/*! For license information please see vendors~project-page-96621b2aa2d153c94071.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[4],Array(211).concat([function(e,t,n){var r=n(223),i=n(258),o=n(407),a=n(411),s=n(414),l=function(e,t,n){var c,u,h,d,p=e&l.F,f=e&l.G,m=e&l.S,g=e&l.P,v=e&l.B,y=f?r:m?r[t]||(r[t]={}):(r[t]||{}).prototype,_=f?i:i[t]||(i[t]={}),b=_.prototype||(_.prototype={});for(c in f&&(n=t),n)h=((u=!p&&y&&void 0!==y[c])?y:n)[c],d=v&&u?s(h,r):g&&"function"==typeof h?s(Function.call,h):h,y&&a(y,c,h,e&l.U),_[c]!=h&&o(_,c,d),g&&b[c]!=h&&(b[c]=h)};r.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var r=n(230),i=n(214);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";function r(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e){var o;if(void 0===t)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;(o=new Error(t.replace(/%s/g,(function(){return r[a++]})))).name="Invariant Violation"}throw o.framesToPop=1,o}}n.d(t,"a",(function(){return r}))},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(371),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){var r=n(570),i=n(608),o=n(236),a=n(212),s=n(617);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},function(e,t,n){var r=n(296)("wks"),i=n(264),o=n(227).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactCSS=t.loop=t.handleActive=t.handleHover=t.hover=void 0;var r=c(n(560)),i=c(n(621)),o=c(n(641)),a=c(n(642)),s=c(n(643)),l=c(n(644));function c(e){return e&&e.__esModule?e:{default:e}}t.hover=a.default,t.handleHover=a.default,t.handleActive=s.default,t.loop=l.default;var u=t.ReactCSS=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var s=(0,r.default)(n),l=(0,i.default)(e,s);return(0,o.default)(l)};t.default=u},,function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return null==e}},,function(e,t,n){var r=n(227),i=n(216),o=n(290),a=n(239),s=n(233),l=function(e,t,n){var c,u,h,d=e&l.F,p=e&l.G,f=e&l.S,m=e&l.P,g=e&l.B,v=e&l.W,y=p?i:i[t]||(i[t]={}),_=y.prototype,b=p?r:f?r[t]:(r[t]||{}).prototype;for(c in p&&(n=t),n)(u=!d&&b&&void 0!==b[c])&&s(y,c)||(h=u?b[c]:n[c],y[c]=p&&"function"!=typeof b[c]?n[c]:g&&u?o(h,r):v&&b[c]==h?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(h):m&&"function"==typeof h?o(Function.call,h):h,m&&((y.virtual||(y.virtual={}))[c]=h,e&l.R&&_&&!_[c]&&a(_,c,h)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(240),i=n(357),o=n(291),a=Object.defineProperty;t.f=n(229)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(242)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(243),i=n(561),o=n(562),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},,function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(360),i=n(293);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(213),i=n(312);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},function(e,t){e.exports=function(e){return e}},function(e,t,n){var r=n(582),i=n(585);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(502),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){var r=n(228),i=n(248);e.exports=n(229)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(241);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(217).Symbol;e.exports=r},function(e,t,n){var r=n(373),i=n(568),o=n(235);e.exports=function(e){return o(e)?r(e):i(e)}},function(e,t,n){var r=n(230),i=n(218);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(231)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(293);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports={}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(362),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t,n){return t in e?(0,o.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(309),i=n(620)(r);e.exports=i},function(e,t,n){var r=n(392),i=n(277);e.exports=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var c=t[s],u=o?o(n[c],e[c],c,n,e):void 0;void 0===u&&(u=e[c]),a?i(n,c,u):r(n,c,u)}return n}},function(e,t,n){var r=n(254),i=n(235),o=n(310),a=n(214);e.exports=function(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";var r=function(){};e.exports=r},,function(e,t,n){"use strict";var r=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(e),n=n.getBlob()}catch(t){n=new Blob([e])}return new Worker(r.createObjectURL(n))}catch(t){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(e){if(!t)throw Error("Inline worker is not supported");return new Worker(t)}}},function(e,t,n){var r=n(359),i=n(297);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){e.exports=!0},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(230),i=n(212),o=n(218);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==r(e)}},function(e,t,n){var r=n(565),i=n(218),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,t,n){(function(e){var r=n(217),i=n(566),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l}).call(this,n(122)(e))},function(e,t,n){var r=n(270),i=n(577),o=n(578),a=n(579),s=n(580),l=n(581);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,e.exports=c},function(e,t,n){var r=n(572),i=n(573),o=n(574),a=n(575),s=n(576);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(254);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(237)(Object,"create");e.exports=r},function(e,t,n){var r=n(594);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){var r=n(604),i=n(317),o=n(605),a=n(385),s=n(606),l=n(230),c=n(377),u=c(r),h=c(i),d=c(o),p=c(a),f=c(s),m=l;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=m(new i)||o&&"[object Promise]"!=m(o.resolve())||a&&"[object Set]"!=m(new a)||s&&"[object WeakMap]"!=m(new s))&&(m=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case u:return"[object DataView]";case h:return"[object Map]";case d:return"[object Promise]";case p:return"[object Set]";case f:return"[object WeakMap]"}return t}),e.exports=m},function(e,t,n){var r=n(388);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},function(e,t,n){var r=n(245);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,n){var r=n(393);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(373),i=n(626),o=n(235);e.exports=function(e){return o(e)?r(e,!0):i(e)}},function(e,t,n){var r=n(246);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(245);e.exports=function(e,t,n){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t(a);if(null!=s&&(void 0===l?s==s&&!r(s):n(s,l)))var l=s,c=a}return c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDOM=void 0;var r,i=n(474);var o=((r=i)&&r.__esModule?r:{default:r}).default,a=o.canUseDOM?window.HTMLElement:{};t.canUseDOM=o.canUseDOM;t.default=a},function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function i(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function o(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function a(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,a=null,s=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?a="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==a||null!==s){var l=e.displayName||e.name,c="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==a?"\n  "+a:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=i),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=o;var u=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;u.call(this,e,t,r)}}return e}n.r(t),n.d(t,"polyfill",(function(){return a})),r.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=l(o),s=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var c={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},u=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],h=function(e,t){t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStyle=e.fontStyle,t.style.letterSpacing=e.letterSpacing,t.style.textTransform=e.textTransform},d=!("undefined"==typeof window||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),p=function(){return d?"_"+Math.random().toString(36).substr(2,12):void 0},f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.inputRef=function(e){n.input=e,"function"==typeof n.props.inputRef&&n.props.inputRef(e)},n.placeHolderSizerRef=function(e){n.placeHolderSizer=e},n.sizerRef=function(e){n.sizer=e},n.state={inputWidth:e.minWidth,inputId:e.id||p()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.id;t!==this.props.id&&this.setState({inputId:t||p()})}},{key:"componentDidUpdate",value:function(e,t){t.inputWidth!==this.state.inputWidth&&"function"==typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(this.mounted&&window.getComputedStyle){var e=this.input&&window.getComputedStyle(this.input);e&&(h(e,this.sizer),this.placeHolderSizer&&h(e,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(this.mounted&&this.sizer&&void 0!==this.sizer.scrollWidth){var e=void 0;e=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2,(e+="number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0)<this.props.minWidth&&(e=this.props.minWidth),e!==this.state.inputWidth&&this.setState({inputWidth:e})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var e=this.props.injectStyles;return d&&e?a.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var e=[this.props.defaultValue,this.props.value,""].reduce((function(e,t){return null!=e?e:t})),t=r({},this.props.style);t.display||(t.display="inline-block");var n=r({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(this.props,[]);return function(e){u.forEach((function(t){return delete e[t]}))}(i),i.className=this.props.inputClassName,i.id=this.state.inputId,i.style=n,a.default.createElement("div",{className:this.props.className,style:t},this.renderStyles(),a.default.createElement("input",r({},i,{ref:this.inputRef})),a.default.createElement("div",{ref:this.sizerRef,style:c},e),this.props.placeholder?a.default.createElement("div",{ref:this.placeHolderSizerRef,style:c},this.props.placeholder):null)}}]),t}(o.Component);f.propTypes={className:s.default.string,defaultValue:s.default.any,extraWidth:s.default.oneOfType([s.default.number,s.default.string]),id:s.default.string,injectStyles:s.default.bool,inputClassName:s.default.string,inputRef:s.default.func,inputStyle:s.default.object,minWidth:s.default.oneOfType([s.default.number,s.default.string]),onAutosize:s.default.func,onChange:s.default.func,placeholder:s.default.string,placeholderIsMinWidth:s.default.bool,style:s.default.object,value:s.default.any},f.defaultProps={minWidth:1,injectStyles:!0},t.default=f},,,function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(1),a=n(7),s=a.get,l=(a.deepValue,a.isArray),c=function(){function e(t,n){var r=n.location,i=void 0===r?0:r,o=n.distance,a=void 0===o?100:o,l=n.threshold,c=void 0===l?.6:l,u=n.maxPatternLength,h=void 0===u?32:u,d=n.caseSensitive,p=void 0!==d&&d,f=n.tokenSeparator,m=void 0===f?/ +/g:f,g=n.findAllMatches,v=void 0!==g&&g,y=n.minMatchCharLength,_=void 0===y?1:y,b=n.id,x=void 0===b?null:b,S=n.keys,w=void 0===S?[]:S,E=n.shouldSort,T=void 0===E||E,M=n.getFn,C=void 0===M?s:M,$=n.sortFn,O=void 0===$?function(e,t){return e.score-t.score}:$,A=n.tokenize,I=void 0!==A&&A,P=n.matchAllTokens,L=void 0!==P&&P,k=n.includeMatches,R=void 0!==k&&k,D=n.includeScore,j=void 0!==D&&D,N=n.verbose,F=void 0!==N&&N;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:i,distance:a,threshold:c,maxPatternLength:h,isCaseSensitive:p,tokenSeparator:m,findAllMatches:v,minMatchCharLength:_,id:x,keys:w,includeMatches:R,includeScore:j,shouldSort:T,getFn:C,sortFn:O,verbose:F,tokenize:I,matchAllTokens:L},this.setCollection(t),this._processKeys(w)}var t,n;return t=e,(n=[{key:"setCollection",value:function(e){return this.list=e,e}},{key:"_processKeys",value:function(e){if(this._keyWeights={},this._keyNames=[],e.length&&"string"==typeof e[0])for(var t=0,n=e.length;t<n;t+=1){var r=e[t];this._keyWeights[r]=1,this._keyNames.push(r)}else{for(var i=null,o=null,a=0,s=0,l=e.length;s<l;s+=1){var c=e[s];if(!c.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var u=c.name;if(this._keyNames.push(u),!c.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');var h=c.weight;if(h<0||h>1)throw new Error('"weight" property in key must bein the range of [0, 1)');o=null==o?h:Math.max(o,h),i=null==i?h:Math.min(i,h),this._keyWeights[u]=h,a+=h}if(a>1)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\nSearch pattern: "'.concat(e,'"'));var n=this._prepareSearchers(e),r=n.tokenSearchers,i=n.fullSearcher,o=this._search(r,i);return this._computeScore(o),this.options.shouldSort&&this._sort(o),t.limit&&"number"==typeof t.limit&&(o=o.slice(0,t.limit)),this._format(o)}},{key:"_prepareSearchers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var n=e.split(this.options.tokenSeparator),r=0,i=n.length;r<i;r+=1)t.push(new o(n[r],this.options));return{tokenSearchers:t,fullSearcher:new o(e,this.options)}}},{key:"_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=this.list,r={},i=[];if("string"==typeof n[0]){for(var o=0,a=n.length;o<a;o+=1)this._analyze({key:"",value:n[o],record:o,index:o},{resultMap:r,results:i,tokenSearchers:e,fullSearcher:t});return i}for(var s=0,l=n.length;s<l;s+=1)for(var c=n[s],u=0,h=this._keyNames.length;u<h;u+=1){var d=this._keyNames[u];this._analyze({key:d,value:this.options.getFn(c,d),record:c,index:s},{resultMap:r,results:i,tokenSearchers:e,fullSearcher:t})}return i}},{key:"_analyze",value:function(e,t){var n=this,r=e.key,i=e.arrayIndex,o=void 0===i?-1:i,a=e.value,s=e.record,c=e.index,u=t.tokenSearchers,h=void 0===u?[]:u,d=t.fullSearcher,p=t.resultMap,f=void 0===p?{}:p,m=t.results,g=void 0===m?[]:m;!function e(t,i,o,a){if(null!=i)if("string"==typeof i){var s=!1,c=-1,u=0;n._log("\nKey: ".concat(""===r?"--":r));var p=d.search(i);if(n._log('Full text: "'.concat(i,'", score: ').concat(p.score)),n.options.tokenize){for(var m=i.split(n.options.tokenSeparator),v=m.length,y=[],_=0,b=h.length;_<b;_+=1){var x=h[_];n._log('\nPattern: "'.concat(x.pattern,'"'));for(var S=!1,w=0;w<v;w+=1){var E=m[w],T=x.search(E),M={};T.isMatch?(M[E]=T.score,s=!0,S=!0,y.push(T.score)):(M[E]=1,n.options.matchAllTokens||y.push(1)),n._log('Token: "'.concat(E,'", score: ').concat(M[E]))}S&&(u+=1)}c=y[0];for(var C=y.length,$=1;$<C;$+=1)c+=y[$];c/=C,n._log("Token score average:",c)}var O=p.score;c>-1&&(O=(O+c)/2),n._log("Score average:",O);var A=!n.options.tokenize||!n.options.matchAllTokens||u>=h.length;if(n._log("\nCheck Matches: ".concat(A)),(s||p.isMatch)&&A){var I={key:r,arrayIndex:t,value:i,score:O};n.options.includeMatches&&(I.matchedIndices=p.matchedIndices);var P=f[a];P?P.output.push(I):(f[a]={item:o,output:[I]},g.push(f[a]))}}else if(l(i))for(var L=0,k=i.length;L<k;L+=1)e(L,i[L],o,a)}(o,a,s,c)}},{key:"_computeScore",value:function(e){this._log("\n\nComputing score:\n");for(var t=this._keyWeights,n=!!Object.keys(t).length,r=0,i=e.length;r<i;r+=1){for(var o=e[r],a=o.output,s=a.length,l=1,c=0;c<s;c+=1){var u=a[c],h=u.key,d=n?t[h]:1,p=0===u.score&&t&&t[h]>0?Number.EPSILON:u.score;l*=Math.pow(p,d)}o.score=l,this._log(o)}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];if(this.options.verbose){var n=[];this._log("\n\nOutput:\n\n",JSON.stringify(e,(function(e,t){if("object"===r(t)&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t}),2)),n=null}var i=[];this.options.includeMatches&&i.push((function(e,t){var n=e.output;t.matches=[];for(var r=0,i=n.length;r<i;r+=1){var o=n[r];if(0!==o.matchedIndices.length){var a={indices:o.matchedIndices,value:o.value};o.key&&(a.key=o.key),o.hasOwnProperty("arrayIndex")&&o.arrayIndex>-1&&(a.arrayIndex=o.arrayIndex),t.matches.push(a)}}})),this.options.includeScore&&i.push((function(e,t){t.score=e.score}));for(var o=0,a=e.length;o<a;o+=1){var s=e[o];if(this.options.id&&(s.item=this.options.getFn(s.item,this.options.id)[0]),i.length){for(var l={item:s.item},c=0,u=i.length;c<u;c+=1)i[c](s,l);t.push(l)}else t.push(s.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}])&&i(t.prototype,n),e}();e.exports=c},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(2),o=n(3),a=n(6),s=function(){function e(t,n){var r=n.location,i=void 0===r?0:r,o=n.distance,s=void 0===o?100:o,l=n.threshold,c=void 0===l?.6:l,u=n.maxPatternLength,h=void 0===u?32:u,d=n.isCaseSensitive,p=void 0!==d&&d,f=n.tokenSeparator,m=void 0===f?/ +/g:f,g=n.findAllMatches,v=void 0!==g&&g,y=n.minMatchCharLength,_=void 0===y?1:y,b=n.includeMatches,x=void 0!==b&&b;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:i,distance:s,threshold:c,maxPatternLength:h,isCaseSensitive:p,tokenSeparator:m,findAllMatches:v,includeMatches:x,minMatchCharLength:_},this.pattern=p?t:t.toLowerCase(),this.pattern.length<=h&&(this.patternAlphabet=a(this.pattern))}var t,n;return t=e,(n=[{key:"search",value:function(e){var t=this.options,n=t.isCaseSensitive,r=t.includeMatches;if(n||(e=e.toLowerCase()),this.pattern===e){var a={isMatch:!0,score:0};return r&&(a.matchedIndices=[[0,e.length-1]]),a}var s=this.options,l=s.maxPatternLength,c=s.tokenSeparator;if(this.pattern.length>l)return i(e,this.pattern,c);var u=this.options,h=u.location,d=u.distance,p=u.threshold,f=u.findAllMatches,m=u.minMatchCharLength;return o(e,this.pattern,this.patternAlphabet,{location:h,distance:d,threshold:p,findAllMatches:f,minMatchCharLength:m,includeMatches:r})}}])&&r(t.prototype,n),e}();e.exports=s},function(e,t){var n=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,i=new RegExp(t.replace(n,"\\$&").replace(r,"|")),o=e.match(i),a=!!o,s=[];if(a)for(var l=0,c=o.length;l<c;l+=1){var u=o[l];s.push([e.indexOf(u),u.length-1])}return{score:a?.5:1,isMatch:a,matchedIndices:s}}},function(e,t,n){var r=n(4),i=n(5);e.exports=function(e,t,n,o){for(var a=o.location,s=void 0===a?0:a,l=o.distance,c=void 0===l?100:l,u=o.threshold,h=void 0===u?.6:u,d=o.findAllMatches,p=void 0!==d&&d,f=o.minMatchCharLength,m=void 0===f?1:f,g=o.includeMatches,v=void 0!==g&&g,y=s,_=e.length,b=h,x=e.indexOf(t,y),S=t.length,w=[],E=0;E<_;E+=1)w[E]=0;if(-1!==x){var T=r(t,{errors:0,currentLocation:x,expectedLocation:y,distance:c});if(b=Math.min(T,b),-1!==(x=e.lastIndexOf(t,y+S))){var M=r(t,{errors:0,currentLocation:x,expectedLocation:y,distance:c});b=Math.min(M,b)}}x=-1;for(var C=[],$=1,O=S+_,A=1<<(S<=31?S-1:30),I=0;I<S;I+=1){for(var P=0,L=O;P<L;)r(t,{errors:I,currentLocation:y+L,expectedLocation:y,distance:c})<=b?P=L:O=L,L=Math.floor((O-P)/2+P);O=L;var k=Math.max(1,y-L+1),R=p?_:Math.min(y+L,_)+S,D=Array(R+2);D[R+1]=(1<<I)-1;for(var j=R;j>=k;j-=1){var N=j-1,F=n[e.charAt(N)];if(F&&(w[N]=1),D[j]=(D[j+1]<<1|1)&F,0!==I&&(D[j]|=(C[j+1]|C[j])<<1|1|C[j+1]),D[j]&A&&($=r(t,{errors:I,currentLocation:N,expectedLocation:y,distance:c}))<=b){if(b=$,(x=N)<=y)break;k=Math.max(1,2*y-x)}}if(r(t,{errors:I+1,currentLocation:y,expectedLocation:y,distance:c})>b)break;C=D}var U={isMatch:x>=0,score:0===$?.001:$};return v&&(U.matchedIndices=i(w,m)),U}},function(e,t){e.exports=function(e,t){var n=t.errors,r=void 0===n?0:n,i=t.currentLocation,o=void 0===i?0:i,a=t.expectedLocation,s=void 0===a?0:a,l=t.distance,c=void 0===l?100:l,u=r/e.length,h=Math.abs(s-o);return c?u+h/c:h?1:u}},function(e,t){e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,i=-1,o=0,a=e.length;o<a;o+=1){var s=e[o];s&&-1===r?r=o:s||-1===r||((i=o-1)-r+1>=t&&n.push([r,i]),r=-1)}return e[o-1]&&o-r>=t&&n.push([r,o-1]),n}},function(e,t){e.exports=function(e){for(var t={},n=e.length,r=0;r<n;r+=1)t[e.charAt(r)]=0;for(var i=0;i<n;i+=1)t[e.charAt(i)]|=1<<n-i-1;return t}},function(e,t){var n=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},r=function(e){return null==e?"":function(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)},i=function(e){return"string"==typeof e},o=function(e){return"number"==typeof e};e.exports={get:function(e,t){var a=[];return function e(t,s){if(s){var l=s.indexOf("."),c=s,u=null;-1!==l&&(c=s.slice(0,l),u=s.slice(l+1));var h=t[c];if(null!=h)if(u||!i(h)&&!o(h))if(n(h))for(var d=0,p=h.length;d<p;d+=1)e(h[d],u);else u&&e(h,u);else a.push(r(h))}else a.push(t)}(e,t),a},isArray:n,isString:i,isNum:o,toString:r}}])},,function(e,t,n){var r=n(505);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(241);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(296)("keys"),i=n(264);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(216),i=n(227),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(263)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(362),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(363),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){var r=n(240),i=n(515),o=n(297),a=n(295)("IE_PROTO"),s=function(){},l=function(){var e,t=n(358)("iframe"),r=o.length;for(t.style.display="none",n(516).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[o[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(228).f,i=n(233),o=n(220)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){t.f=n(220)},function(e,t,n){var r=n(227),i=n(216),o=n(263),a=n(304),s=n(228).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(265),i=n(248),o=n(234),a=n(291),s=n(233),l=n(357),c=Object.getOwnPropertyDescriptor;t.f=n(229)?c:function(e,t){if(e=o(e),t=a(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(531)),i=a(n(535)),o=a(n(363));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},function(e,t,n){var r=n(309),i=n(375);e.exports=function(e,t){return e&&r(e,i(t))}},function(e,t,n){var r=n(372),i=n(244);e.exports=function(e,t){return e&&r(e,t,i)}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(567),i=n(252),o=n(313),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){(function(e){var r=n(371),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(this,n(122)(e))},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(230),i=n(316),o=n(218),a=Function.prototype,s=Object.prototype,l=a.toString,c=s.hasOwnProperty,u=l.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},function(e,t,n){var r=n(374)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(237)(n(217),"Map");e.exports=r},function(e,t,n){var r=n(586),i=n(593),o=n(595),a=n(596),s=n(597);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(598),i=n(218);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,o,a,e,s))}},function(e,t,n){var r=n(318),i=n(599),o=n(600);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){var r=n(383),i=n(384),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},function(e,t,n){var r=n(212),i=n(245),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},function(e,t,n){var r=n(380);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){var r=n(236),i=n(649),o=n(651);e.exports=function(e,t){return o(i(e,t,r),e+"")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(655);Object.defineProperty(t,"Alpha",{enumerable:!0,get:function(){return h(r).default}});var i=n(329);Object.defineProperty(t,"Checkboard",{enumerable:!0,get:function(){return h(i).default}});var o=n(658);Object.defineProperty(t,"EditableInput",{enumerable:!0,get:function(){return h(o).default}});var a=n(659);Object.defineProperty(t,"Hue",{enumerable:!0,get:function(){return h(a).default}});var s=n(661);Object.defineProperty(t,"Raised",{enumerable:!0,get:function(){return h(s).default}});var l=n(662);Object.defineProperty(t,"Saturation",{enumerable:!0,get:function(){return h(l).default}});var c=n(665);Object.defineProperty(t,"ColorWrap",{enumerable:!0,get:function(){return h(c).default}});var u=n(669);function h(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Swatch",{enumerable:!0,get:function(){return h(u).default}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Checkboard=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),o=l(i),a=l(n(221)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(657));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.Checkboard=function(e){var t=e.white,n=e.grey,l=e.size,c=e.renderers,u=e.borderRadius,h=e.boxShadow,d=e.children,p=(0,a.default)({default:{grid:{borderRadius:u,boxShadow:h,absolute:"0px 0px 0px 0px",background:"url("+s.get(t,n,l,c.canvas)+") center left"}}});return(0,i.isValidElement)(d)?o.default.cloneElement(d,r({},d.props,{style:r({},d.props.style,p.grid)})):o.default.createElement("div",{style:p.grid})};c.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},t.default=c},function(e,t,n){var r=n(279),i=n(408),o=n(331),a=Object.defineProperty;t.f=n(247)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(246);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(700),i=n(336);e.exports=function(e){return r(i(e))}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(211),i=n(336),o=n(231),a=n(339),s="["+a+"]",l=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),u=function(e,t,n){var i={},s=o((function(){return!!a[e]()||"​"!="​"[e]()})),l=i[e]=s?t(h):a[e];n&&(i[n]=l),r(r.P+r.F*s,"String",i)},h=u.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(c,"")),e};e.exports=u},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r=n(230),i=n(218);e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==r(e)}},function(e,t,n){var r=n(319);e.exports=function(e,t){return r(e,t)}},function(e,t,n){var r=n(426),i=n(730),o=n(327),a=n(257),s=o((function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])}));e.exports=s},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return[].slice.call(e.querySelectorAll("*"),0).filter(a)};var r=/input|select|textarea|button|object/;function i(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;var n=window.getComputedStyle(e);return t?"visible"!==n.getPropertyValue("overflow")||e.scrollWidth<=0&&e.scrollHeight<=0:"none"==n.getPropertyValue("display")}function o(e,t){var n=e.nodeName.toLowerCase();return(r.test(n)&&!e.disabled||"a"===n&&e.href||t)&&function(e){for(var t=e;t&&t!==document.body;){if(i(t))return!1;t=t.parentNode}return!0}(e)}function a(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var n=isNaN(t);return(n||t>=0)&&o(e,!n)}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertNodeList=l,t.setElement=function(e){var t=e;if("string"==typeof t&&a.canUseDOM){var n=document.querySelectorAll(t);l(n,t),t="length"in n?n[0]:n}return s=t||s},t.validateElement=c,t.hide=function(e){c(e)&&(e||s).setAttribute("aria-hidden","true")},t.show=function(e){c(e)&&(e||s).removeAttribute("aria-hidden")},t.documentNotReadyOrSSRTesting=function(){s=null},t.resetForTesting=function(){s=null};var r,i=n(259),o=(r=i)&&r.__esModule?r:{default:r},a=n(283);var s=null;function l(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function c(e){return!(!e&&!s)||((0,o.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.register=function(e){-1===t.openInstances.indexOf(e)&&(t.openInstances.push(e),t.emit("register"))},this.deregister=function(e){var n=t.openInstances.indexOf(e);-1!==n&&(t.openInstances.splice(n,1),t.emit("deregister"))},this.subscribe=function(e){t.subscribers.push(e)},this.emit=function(e){t.subscribers.forEach((function(n){return n(e,t.openInstances.slice())}))},this.openInstances=[],this.subscribers=[]};t.default=r,e.exports=t.default},function(e,t){t.__esModule=!0;t.ATTRIBUTE_NAMES={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"};var n=t.TAG_NAMES={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},r=(t.VALID_TAG_NAMES=Object.keys(n).map((function(e){return n[e]})),t.TAG_PROPERTIES={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src"},t.REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"});t.HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},t.HTML_TAG_MAP=Object.keys(r).reduce((function(e,t){return e[r[t]]=t,e}),{}),t.SELF_CLOSING_TAGS=[n.NOSCRIPT,n.SCRIPT,n.STYLE],t.HELMET_ATTRIBUTE="data-react-helmet"},,,,function(e,t,n){e.exports=n.p+"assets/models/spawn-point-af89f0ed6871147032774ddc8bdfb5ec.glb"},function(e,t,n){var r;"undefined"!=typeof window&&(r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s="./src/hls.js")}({"./node_modules/eventemitter3/index.js":function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||e,o),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),c.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},c.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},c.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,r,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,r),!0;case 5:return u.fn.call(u.context,t,n,r,o),!0;case 6:return u.fn.call(u.context,t,n,r,o,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,r);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},c.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,r){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return l(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||l(this,o);else{for(var s=0,c=[],u=a.length;s<u;s++)(a[s].fn!==t||r&&!a[s].once||n&&a[s].context!==n)&&c.push(a[s]);c.length?this._events[o]=1===c.length?c[0]:c:l(this,o)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&l(this,t)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,e.exports=c},"./node_modules/node-libs-browser/node_modules/events/events.js":function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,s,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(o(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),a=(c=n.slice()).length,l=0;l<a;l++)c[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var a;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,o,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,n){var r,i,o,a,s;r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/?#]*)(.*)$/,o=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=s.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return n.alwaysNormalize?(o.path=s.normalizePath(o.path),s.buildURLFromParts(o)):t;var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var l=i.exec(a.path);a.netLoc=l[1],a.path=l[2]}a.netLoc&&!a.path&&(a.path="/");var c={scheme:a.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(c.netLoc=a.netLoc,"/"!==o.path[0]))if(o.path){var u=a.path,h=u.substring(0,u.lastIndexOf("/")+1)+o.path;c.path=s.normalizePath(h)}else c.path=a.path,o.params||(c.params=a.params,o.query||(c.query=a.query));return null===c.path&&(c.path=n.alwaysNormalize?s.normalizePath(o.path):o.path),s.buildURLFromParts(c)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(o,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},"./node_modules/webworkify-webpack/index.js":function(e,t,n){function r(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var r=n(n.s=ENTRY_MODULE);return r.default||r}function i(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(e,t,r){var o={};o[r]=[];var a=t.toString(),s=a.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!s)return o;for(var l,c=s[1],u=new RegExp("(\\\\n|\\W)"+i(c)+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");l=u.exec(a);)"dll-reference"!==l[3]&&o[r].push(l[3]);for(u=new RegExp("\\("+i(c)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");l=u.exec(a);)e[l[2]]||(o[r].push(l[1]),e[l[2]]=n(l[1]).m),o[l[2]]=o[l[2]]||[],o[l[2]].push(l[4]);for(var h,d=Object.keys(o),p=0;p<d.length;p++)for(var f=0;f<o[d[p]].length;f++)h=o[d[p]][f],isNaN(1*h)||(o[d[p]][f]=1*o[d[p]][f]);return o}function a(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}e.exports=function(e,t){t=t||{};var i={main:n.m},s=t.all?{main:Object.keys(i.main)}:function(e,t){for(var n={main:[t]},r={main:[]},i={main:{}};a(n);)for(var s=Object.keys(n),l=0;l<s.length;l++){var c=s[l],u=n[c].pop();if(i[c]=i[c]||{},!i[c][u]&&e[c][u]){i[c][u]=!0,r[c]=r[c]||[],r[c].push(u);for(var h=o(e,e[c][u],c),d=Object.keys(h),p=0;p<d.length;p++)n[d[p]]=n[d[p]]||[],n[d[p]]=n[d[p]].concat(h[d[p]])}}return r}(i,e),l="";Object.keys(s).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;s[e][t];)t++;s[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+e+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+s[e].map((function(t){return JSON.stringify(t)+": "+i[e][t].toString()})).join(",")+"});\n"})),l=l+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+s.main.map((function(e){return JSON.stringify(e)+": "+i.main[e].toString()})).join(",")+"}))(self);";var c=new window.Blob([l],{type:"text/javascript"});if(t.bare)return c;var u=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),h=new window.Worker(u);return h.objectURL=u,h}},"./src/config.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/controller/abr-controller.js"),i=n("./src/controller/buffer-controller.js"),o=n("./src/controller/cap-level-controller.js"),a=n("./src/controller/fps-controller.js"),s=n("./src/utils/xhr-loader.js"),l=(n("./src/empty.js"),n("./src/empty.js"),n("./src/empty.js"),n("./src/empty.js"),n("./src/empty.js"),n("./src/empty.js"),n("./src/empty.js"),n("./src/utils/mediakeys-helper.js"));t.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:r.default,bufferController:i.default,capLevelController:o.default,fpsController:a.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:l.requestMediaKeySystemAccess}},"./src/controller/abr-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/utils/buffer-helper.js"),l=n("./src/errors.js"),c=n("./src/utils/logger.js"),u=n("./src/utils/ewma-bandwidth-estimator.js"),h=window.performance,d=function(t){function n(e){var n=t.call(this,e,o.default.FRAG_LOADING,o.default.FRAG_LOADED,o.default.FRAG_BUFFERED,o.default.ERROR)||this;return n.lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=e,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(n),n}return i(n,t),n.prototype.destroy=function(){this.clearTimer(),a.default.prototype.destroy.call(this)},n.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var n=this.hls,r=n.config,i=t.level,o=void 0,a=void 0;n.levels[i].details.live?(o=r.abrEwmaFastLive,a=r.abrEwmaSlowLive):(o=r.abrEwmaFastVoD,a=r.abrEwmaSlowVoD),this._bwEstimator=new u.default(n,a,o,r.abrEwmaDefaultEstimate)}},n.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,n=this.fragCurrent;if(n){var r=n.loader,i=e.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return c.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=r.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var l=h.now()-a.trequest,u=Math.abs(t.playbackRate);if(l>500*n.duration/u){var d=e.levels,p=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/l),f=d[n.level],m=f.realBitrate?Math.max(f.realBitrate,f.bitrate):f.bitrate,g=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*m/8)),v=t.currentTime,y=(g-a.loaded)/p,_=(s.BufferHelper.bufferInfo(t,v,e.config.maxBufferHole).end-v)/u;if(_<2*n.duration/u&&y>_){var b=void 0,x=void 0;for(x=n.level-1;x>i;x--){var S=d[x].realBitrate?Math.max(d[x].realBitrate,d[x].bitrate):d[x].bitrate;if((b=n.duration*S/(6.4*p))<_)break}b<y&&(c.logger.warn("loading too slow, abort fragment loading and switch to level "+x+":fragLoadedDelay["+x+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+y.toFixed(1)+":"+_.toFixed(1)),e.nextLoadLevel=x,this._bwEstimator.sample(l,a.loaded),r.abort(),this.clearTimer(),e.trigger(o.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}}},n.prototype.onFragLoaded=function(t){var n=t.frag;if("main"===n.type&&e.isFinite(n.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[n.level],i=(r.loaded?r.loaded.bytes:0)+t.stats.loaded,o=(r.loaded?r.loaded.duration:0)+t.frag.duration;r.loaded={bytes:i,duration:o},r.realBitrate=Math.round(8*i/o)}if(t.frag.bitrateTest){var a=t.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(t)}}},n.prototype.onFragBuffered=function(t){var n=t.stats,r=t.frag;if(!0!==n.aborted&&"main"===r.type&&e.isFinite(r.sn)&&(!r.bitrateTest||n.tload===n.tbuffered)){var i=n.tparsed-n.trequest;c.logger.log("latency/loading/parsing/append/kbps:"+Math.round(n.tfirst-n.trequest)+"/"+Math.round(n.tload-n.tfirst)+"/"+Math.round(n.tparsed-n.tload)+"/"+Math.round(n.tbuffered-n.tparsed)+"/"+Math.round(8*n.loaded/(n.tbuffered-n.trequest))),this._bwEstimator.sample(i,n.loaded),n.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},n.prototype.onError=function(e){switch(e.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},n.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},Object.defineProperty(n.prototype,"nextAutoLevel",{get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_nextABRAutoLevel",{get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,r=e.config,i=e.minAutoLevel,o=e.media,a=this.lastLoadedFragLevel,l=this.fragCurrent?this.fragCurrent.duration:0,u=o?o.currentTime:0,h=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,p=(s.BufferHelper.bufferInfo(o,u,r.maxBufferHole).end-u)/h,f=this._findBestLevel(a,l,d,i,t,p,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(f>=0)return f;c.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var m=l?Math.min(l,r.maxStarvationDelay):r.maxStarvationDelay,g=r.abrBandWidthFactor,v=r.abrBandWidthUpFactor;if(0===p){var y=this.bitrateTestDelay;y&&(m=(l?Math.min(l,r.maxLoadingDelay):r.maxLoadingDelay)-y,c.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*m)+" ms"),g=v=1)}return f=this._findBestLevel(a,l,d,i,t,p+m,g,v,n),Math.max(f,0)},enumerable:!0,configurable:!0}),n.prototype._findBestLevel=function(e,t,n,r,i,o,a,s,l){for(var u=i;u>=r;u--){var h=l[u];if(h){var d=h.details,p=d?d.totalduration/d.fragments.length:t,f=!!d&&d.live,m=void 0;m=u<=e?a*n:s*n;var g=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,v=g*p/m;if(c.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(m)+"/"+g+"/"+p+"/"+o+"/"+v),m>g&&(!v||f&&!this.bitrateTestDelay||v<o))return u}}return-1},n}(a.default);t.default=d}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/base-stream-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/task-loop.js"),a=n("./src/controller/fragment-tracker.js"),s=n("./src/utils/buffer-helper.js"),l=n("./src/utils/logger.js");t.State={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};var c=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.doTick=function(){},r.prototype.startLoad=function(){},r.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=t.State.STOPPED},r.prototype._streamEnded=function(e,t){var n=this.fragCurrent,r=this.fragmentTracker;if(!t.live&&n&&!n.backtracked&&n.sn===t.endSN&&!e.nextStart){var i=r.getState(n);return i===a.FragmentState.PARTIAL||i===a.FragmentState.OK}return!1},r.prototype.onMediaSeeking=function(){var n=this.config,r=this.media,i=this.mediaBuffer,o=this.state,a=r?r.currentTime:null,c=s.BufferHelper.bufferInfo(i||r,a,this.config.maxBufferHole);if(e.isFinite(a)&&l.logger.log("media seeking to "+a.toFixed(3)),o===t.State.FRAG_LOADING){var u=this.fragCurrent;if(0===c.len&&u){var h=n.maxFragLookUpTolerance,d=u.start-h,p=u.start+u.duration+h;a<d||a>p?(u.loader&&(l.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),u.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=t.State.IDLE):l.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else o===t.State.ENDED&&(0===c.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=t.State.IDLE);r&&(this.lastCurrentTime=a),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=a),this.tick()},r.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r.prototype.onHandlerDestroying=function(){this.stopLoad(),n.prototype.onHandlerDestroying.call(this)},r.prototype.onHandlerDestroyed=function(){this.state=t.State.STOPPED,this.fragmentTracker=null},r}(o.default);t.default=c}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/buffer-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/utils/logger.js"),l=n("./src/errors.js"),c=n("./src/utils/mediasource-helper.js").getMediaSource(),u=function(t){function n(e){var n=t.call(this,e,o.default.MEDIA_ATTACHING,o.default.MEDIA_DETACHING,o.default.MANIFEST_PARSED,o.default.BUFFER_RESET,o.default.BUFFER_APPENDING,o.default.BUFFER_CODECS,o.default.BUFFER_EOS,o.default.BUFFER_FLUSHING,o.default.LEVEL_PTS_UPDATED,o.default.LEVEL_UPDATED)||this;return n._msDuration=null,n._levelDuration=null,n._levelTargetDuration=10,n._live=null,n._objectUrl=null,n.bufferCodecEventsExpected=0,n.onsbue=n.onSBUpdateEnd.bind(n),n.onsbe=n.onSBUpdateError.bind(n),n.pendingTracks={},n.tracks={},n}return i(n,t),n.prototype.destroy=function(){a.default.prototype.destroy.call(this)},n.prototype.onLevelPtsUpdated=function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var r=this.sourceBuffer.audio;if(Math.abs(r.timestampOffset-e.start)>.1){var i=r.updating;try{r.abort()}catch(e){s.logger.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(s.logger.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+e.start),r.timestampOffset=e.start)}}},n.prototype.onManifestParsed=function(e){this.bufferCodecEventsExpected=e.altAudio?2:1,s.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},n.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var n=this.mediaSource=new c;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),t.src=window.URL.createObjectURL(n),this._objectUrl=t.src}},n.prototype.onMediaDetaching=function(){s.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){s.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):s.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(o.default.MEDIA_DETACHED)},n.prototype.onMediaSourceOpen=function(){s.logger.log("media source opened"),this.hls.trigger(o.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},n.prototype.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,n=Object.keys(t).length;(n&&!e||2===n)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},n.prototype.onMediaSourceClose=function(){s.logger.log("media source closed")},n.prototype.onMediaSourceEnded=function(){s.logger.log("media source ended")},n.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;s.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,n=this.segments.reduce((function(e,n){return n.parent===t?e+1:e}),0),r={},i=this.sourceBuffer;for(var a in i)r[a]=i[a].buffered;this.hls.trigger(o.default.BUFFER_APPENDED,{parent:t,pending:n,timeRanges:r}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration(),0===n&&this.flushLiveBackBuffer()},n.prototype.onSBUpdateError=function(e){s.logger.error("sourceBuffer error:",e),this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},n.prototype.onBufferCodecs=function(e){var t=this;if(!Object.keys(this.sourceBuffer).length){Object.keys(e).forEach((function(n){t.pendingTracks[n]=e[n]}));var n=this.mediaSource;this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),n&&"open"===n.readyState&&this.checkPendingTracks()}},n.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;for(var r in e)if(!t[r]){var i=e[r],a=i.levelCodec||i.codec,c=i.container+";codecs="+a;s.logger.log("creating sourceBuffer("+c+")");try{var u=t[r]=n.addSourceBuffer(c);u.addEventListener("updateend",this.onsbue),u.addEventListener("error",this.onsbe),this.tracks[r]={codec:a,container:i.container},i.buffer=u}catch(e){s.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:c})}}this.hls.trigger(o.default.BUFFER_CREATED,{tracks:e})},n.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},n.prototype.onBufferAppendFail=function(e){s.logger.error("sourceBuffer error:",e.event),this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.prototype.onBufferEos=function(e){var t=this.sourceBuffer,n=e.type;for(var r in t)n&&r!==n||t[r].ended||(t[r].ended=!0,s.logger.log(r+" sourceBuffer now EOS"));this.checkEos()},n.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){var r=e[n];if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}s.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){s.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},n.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},n.prototype.flushLiveBackBuffer=function(){if(this._live){var e=this.hls.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))for(var t=this.media.currentTime,n=this.sourceBuffer,r=Object.keys(n),i=t-Math.max(e,this._levelTargetDuration),o=r.length-1;o>=0;o--){var a=r[o],s=n[a].buffered;s.length>0&&i>s.start(0)&&this.removeBufferRange(a,n[a],0,i)}}},n.prototype.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},n.prototype.updateMediaElementDuration=function(){var t,n=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer)if(!0===this.sourceBuffer[r].updating)return;t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===n.liveDurationInfinity?(s.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!e.isFinite(t))&&(s.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},n.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var r in n)t+=n[r].buffered.length}catch(e){s.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(o.default.BUFFER_FLUSHED)}},n.prototype.doAppending=function(){var e=this.hls,t=this.segments,n=this.sourceBuffer;if(Object.keys(n).length){if(this.media.error)return this.segments=[],void s.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(t&&t.length){var r=t.shift();try{var i=n[r.type];i?i.updating?t.unshift(r):(i.ended=!1,this.parent=r.parent,i.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(n){s.logger.error("error while trying to append buffer:"+n.message),t.unshift(r);var a={type:l.ErrorTypes.MEDIA_ERROR,parent:r.parent};22!==n.code?(this.appendError?this.appendError++:this.appendError=1,a.details=l.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry?(s.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],a.fatal=!0,e.trigger(o.default.ERROR,a)):(a.fatal=!1,e.trigger(o.default.ERROR,a))):(this.segments=[],a.details=l.ErrorDetails.BUFFER_FULL_ERROR,a.fatal=!1,e.trigger(o.default.ERROR,a))}}}},n.prototype.flushBuffer=function(e,t,n){var r,i=this.sourceBuffer;if(Object.keys(i).length){if(s.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var o in i)if(!n||o===n){if((r=i[o]).ended=!1,r.updating)return s.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(o,r,e,t))return this.flushBufferCounter++,!1}}else s.logger.warn("abort flushing too many retries");s.logger.log("buffer flushed")}return!0},n.prototype.removeBufferRange=function(e,t,n,r){try{for(var i=0;i<t.buffered.length;i++){var o=t.buffered.start(i),a=t.buffered.end(i),l=Math.max(o,n),c=Math.min(a,r);if(Math.min(c,a)-l>.5)return s.logger.log("sb remove "+e+" ["+l+","+c+"], of ["+o+","+a+"], pos:"+this.media.currentTime),t.remove(l,c),!0}}catch(e){s.logger.warn("removeBufferRange failed",e)}return!1},n}(a.default);t.default=u}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/cap-level-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=function(t){function n(n){var r=t.call(this,n,o.default.FPS_DROP_LEVEL_CAPPING,o.default.MEDIA_ATTACHING,o.default.MANIFEST_PARSED,o.default.BUFFER_CODECS,o.default.MEDIA_DETACHING)||this;return r.autoLevelCapping=e.POSITIVE_INFINITY,r.firstLevel=null,r.levels=[],r.media=null,r.restrictedLevels=[],r.timer=null,r}return i(n,t),n.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},n.prototype.onFpsDropLevelCapping=function(e){n.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},n.prototype.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},n.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this._startCapping()},n.prototype.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this._startCapping()},n.prototype.onLevelsUpdated=function(e){this.levels=e.levels},n.prototype.onMediaDetaching=function(){this._stopCapping()},n.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},n.prototype.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var r=this.levels.filter((function(r,i){return n.isLevelAllowed(i,t.restrictedLevels)&&i<=e}));return n.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},n.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=e.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},n.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=e.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},Object.defineProperty(n.prototype,"mediaWidth",{get:function(){var e,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=n.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mediaHeight",{get:function(){var e,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=n.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"contentScaleFactor",{get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e},enumerable:!0,configurable:!0}),n.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},n.getMaxLevelByMediaSize=function(e,t,n){if(!e||e&&!e.length)return-1;for(var r,i,o=e.length-1,a=0;a<e.length;a+=1){var s=e[a];if((s.width>=t||s.height>=n)&&(r=s,!(i=e[a+1])||r.width!==i.width||r.height!==i.height)){o=a;break}}return o},n}(n("./src/event-handler.js").default);t.default=a}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/fps-controller.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/utils/logger.js"),l=window.performance,c=function(e){function t(t){return e.call(this,t,o.default.MEDIA_ATTACHING)||this}return i(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},t.prototype.checkFPS=function(e,t,n){var r=l.now();if(t){if(this.lastTime){var i=r-this.lastTime,a=n-this.lastDroppedFrames,c=t-this.lastDecodedFrames,u=1e3*a/i,h=this.hls;if(h.trigger(o.default.FPS_DROP,{currentDropped:a,currentDecoded:c,totalDroppedFrames:n}),u>0&&a>h.config.fpsDroppedMonitoringThreshold*c){var d=h.currentLevel;s.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===h.autoLevelCapping||h.autoLevelCapping>=d)&&(d-=1,h.trigger(o.default.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:h.currentLevel}),h.autoLevelCapping=d,h.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(a.default);t.default=c},"./src/controller/fragment-finders.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/binary-search.js");function i(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0);var r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function o(e,t,n){var r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.endProgramDateTime-r>e}t.findFragmentByPDT=function(t,n,r){if(!Array.isArray(t)||!t.length||!e.isFinite(n))return null;if(n<t[0].programDateTime)return null;if(n>=t[t.length-1].endProgramDateTime)return null;r=r||0;for(var i=0;i<t.length;++i){var a=t[i];if(o(n,r,a))return a}return null},t.findFragmentByPTS=function(e,t,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var a=e?t[e.sn-t[0].sn+1]:null;return a&&!i(n,o,a)?a:r.default.search(t,i.bind(null,n,o))},t.fragmentWithinToleranceTest=i,t.pdtWithinToleranceTest=o}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/fragment-tracker.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/event-handler.js"),a=n("./src/events.js");t.FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};var s=function(n){function r(e){var t=n.call(this,e,a.default.BUFFER_APPENDED,a.default.FRAG_BUFFERED,a.default.FRAG_LOADED)||this;return t.bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=e.config,t}return i(r,n),r.prototype.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,o.default.prototype.destroy.call(this),n.prototype.destroy.call(this)},r.prototype.getBufferedFrag=function(e,t){var n=this.fragments,r=Object.keys(n).filter((function(r){var i=n[r];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var o=i.body;return o.startPTS<=e&&e<=o.endPTS}));if(0===r.length)return null;var i=r.pop();return n[i].body},r.prototype.detectEvictedFragments=function(e,t){var n,r,i=this;Object.keys(this.fragments).forEach((function(o){var a=i.fragments[o];if(!0===a.buffered){var s=a.range[e];if(s){n=s.time;for(var l=0;l<n.length;l++)if(r=n[l],!1===i.isTimeBuffered(r.startPTS,r.endPTS,t)){i.removeFragment(a.body);break}}}}))},r.prototype.detectPartialFragments=function(e){var t=this,n=this.getFragmentKey(e),r=this.fragments[n];r&&(r.buffered=!0,Object.keys(this.timeRanges).forEach((function(n){if(e.hasElementaryStream(n)){var i=t.timeRanges[n];r.range[n]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}})))},r.prototype.getBufferedTimes=function(e,t,n){for(var r,i,o=[],a=!1,s=0;s<n.length;s++){if(r=n.start(s)-this.bufferPadding,i=n.end(s)+this.bufferPadding,e>=r&&t<=i){o.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))});break}if(e<i&&t>r)o.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))}),a=!0;else if(t<=r)break}return{time:o,partial:a}},r.prototype.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},r.prototype.getPartialFragment=function(e){var t,n,r,i=this,o=null,a=0;return Object.keys(this.fragments).forEach((function(s){var l=i.fragments[s];i.isPartial(l)&&(n=l.body.startPTS-i.bufferPadding,r=l.body.endPTS+i.bufferPadding,e>=n&&e<=r&&(t=Math.min(e-n,r-e),a<=t&&(o=l.body,a=t)))})),o},r.prototype.getState=function(e){var n=this.getFragmentKey(e),r=this.fragments[n],i=t.FragmentState.NOT_LOADED;return void 0!==r&&(i=r.buffered?!0===this.isPartial(r)?t.FragmentState.PARTIAL:t.FragmentState.OK:t.FragmentState.APPENDING),i},r.prototype.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},r.prototype.isTimeBuffered=function(e,t,n){for(var r,i,o=0;o<n.length;o++){if(r=n.start(o)-this.bufferPadding,i=n.end(o)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1},r.prototype.onFragLoaded=function(t){var n=t.frag;e.isFinite(n.sn)&&!n.bitrateTest&&(this.fragments[this.getFragmentKey(n)]={body:n,range:Object.create(null),buffered:!1})},r.prototype.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var n=t.timeRanges[e];t.detectEvictedFragments(e,n)}))},r.prototype.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},r.prototype.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},r.prototype.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},r.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},r}(o.default);t.FragmentTracker=s}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/gap-controller.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/buffer-helper.js"),i=n("./src/errors.js"),o=n("./src/events.js"),a=n("./src/utils/logger.js"),s=function(){function e(e,t,n,r){this.config=e,this.media=t,this.fragmentTracker=n,this.hls=r,this.stallReported=!1}return e.prototype.poll=function(e,t){var n=this.config,i=this.media,o=i.currentTime,s=window.performance.now();if(o!==e)return this.stallReported&&(a.logger.warn("playback not stuck anymore @"+o+", after "+Math.round(s-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(i.ended||!i.buffered.length||i.readyState>2||i.seeking&&r.BufferHelper.isBuffered(i,o))){var l=s-this.stalled,c=r.BufferHelper.bufferInfo(i,o,n.maxBufferHole);this.stalled?(l>=1e3&&this._reportStall(c.len),this._tryFixBufferStall(c,l)):this.stalled=s}},e.prototype._tryFixBufferStall=function(e,t){var n=this.config,r=this.fragmentTracker,i=this.media.currentTime,o=r.getPartialFragment(i);o&&this._trySkipBufferHole(o),e.len>.5&&t>1e3*n.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},e.prototype._reportStall=function(e){var t=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,a.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer"),t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},e.prototype._trySkipBufferHole=function(e){for(var t=this.hls,n=this.media,r=n.currentTime,s=0,l=0;l<n.buffered.length;l++){var c=n.buffered.start(l);if(r>=s&&r<c)return n.currentTime=Math.max(c,n.currentTime+.1),a.logger.warn("skipping hole, adjusting currentTime from "+r+" to "+n.currentTime),this.stalled=null,void t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+n.currentTime,frag:e});s=n.buffered.end(l)}},e.prototype._tryNudgeBuffer=function(){var e=this.config,t=this.hls,n=this.media,r=n.currentTime,s=(this.nudgeRetry||0)+1;if(this.nudgeRetry=s,s<e.nudgeMaxRetry){var l=r+s*e.nudgeOffset;a.logger.log("adjust currentTime from "+r+" to "+l),n.currentTime=l,t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else a.logger.error("still stuck in high buffer @"+r+" after "+e.nudgeMaxRetry+", raise fatal error"),t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();t.default=s},"./src/controller/id3-track-controller.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/demux/id3.js"),l=n("./src/utils/texttrack-utils.js"),c=function(e){function t(t){var n=e.call(this,t,o.default.MEDIA_ATTACHED,o.default.MEDIA_DETACHING,o.default.FRAG_PARSING_METADATA)||this;return n.id3Track=void 0,n.media=void 0,n}return i(t,e),t.prototype.destroy=function(){a.default.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,this.media},t.prototype.onMediaDetaching=function(){l.clearCurrentCues(this.id3Track),this.id3Track=void 0,this.media=void 0},t.prototype.getID3Track=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return l.sendAddTrackEvent(n,this.media),n}return this.media.addTextTrack("metadata","id3")},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,n=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<n.length;i++){var o=s.default.getID3Frames(n[i].data);if(o){var a=n[i].pts,l=i<n.length-1?n[i+1].pts:t.endPTS;a===l&&(l+=1e-4);for(var c=0;c<o.length;c++){var u=o[c];if(!s.default.isTimeStampFrame(u)){var h=new r(a,l,"");h.value=u,this.id3Track.addCue(h)}}}}},t}(a.default);t.default=c},"./src/controller/level-controller.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=n("./src/events.js"),s=n("./src/event-handler.js"),l=n("./src/utils/logger.js"),c=n("./src/errors.js"),u=n("./src/utils/codecs.js"),h=n("./src/controller/level-helper.js"),d=(window.performance,function(e){function t(t){var n=e.call(this,t,a.default.MANIFEST_LOADED,a.default.LEVEL_LOADED,a.default.AUDIO_TRACK_SWITCHED,a.default.FRAG_LOADED,a.default.ERROR)||this;return n.canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,o=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),n}return i(t,e),t.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},t.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t,n=[],r=[],i={},s=null,d=!1,p=!1;if(e.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,d=d||!!e.videoCodec,p=p||!!e.audioCodec,o&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(s=i[e.bitrate])?s.url.push(e.url):(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,n.push(e)),t&&(t.AUDIO&&(p=!0,h.addGroupId(s||e,"audio",t.AUDIO)),t.SUBTITLES&&h.addGroupId(s||e,"text",t.SUBTITLES))})),d&&p&&(n=n.filter((function(e){return!!e.videoCodec}))),n=n.filter((function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||u.isCodecSupportedInMp4(t,"audio"))&&(!n||u.isCodecSupportedInMp4(n,"video"))})),e.audioTracks&&(r=e.audioTracks.filter((function(e){return!e.audioCodec||u.isCodecSupportedInMp4(e.audioCodec,"audio")}))).forEach((function(e,t){e.id=t})),n.length>0){t=n[0].bitrate,n.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=n;for(var f=0;f<n.length;f++)if(n[f].bitrate===t){this._firstLevel=f,l.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(a.default.MANIFEST_PARSED,{levels:n,audioTracks:r,firstLevel:this._firstLevel,stats:e.stats,audio:p,video:d,altAudio:r.some((function(e){return!!e.url}))})}else this.hls.trigger(a.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))},enumerable:!0,configurable:!0}),t.prototype.setLevelInternal=function(e){var t=this._levels,n=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){l.logger.log("switching to level "+e),this.currentLevelIndex=e;var r=t[e];r.level=e,n.trigger(a.default.LEVEL_SWITCHING,r)}var i=t[e],o=i.details;if(!o||o.live){var s=i.urlId;n.trigger(a.default.LEVEL_LOADING,{url:i.url[s],level:e,id:s})}}else n.trigger(a.default.ERROR,{type:c.ErrorTypes.OTHER_ERROR,details:c.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return this._firstLevel},set:function(e){this._firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e},enumerable:!0,configurable:!0}),t.prototype.onError=function(e){if(e.fatal)e.type===c.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,n=!1,r=!1;switch(e.details){case c.ErrorDetails.FRAG_LOAD_ERROR:case c.ErrorDetails.FRAG_LOAD_TIMEOUT:case c.ErrorDetails.KEY_LOAD_ERROR:case c.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,r=!0;break;case c.ErrorDetails.LEVEL_LOAD_ERROR:case c.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,n=!0;break;case c.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,n=!0}void 0!==t&&this.recoverLevel(e,t,n,r)}},t.prototype.recoverLevel=function(e,t,n,r){var i,o,a,s=this,c=this.hls.config,u=e.details,h=this._levels[t];if(h.loadError++,h.fragmentError=r,n){if(!(this.levelRetryCount+1<=c.levelLoadingMaxRetry))return l.logger.error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);o=Math.min(Math.pow(2,this.levelRetryCount)*c.levelLoadingRetryDelay,c.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),o),e.levelRetry=!0,this.levelRetryCount++,l.logger.warn("level controller, "+u+", retry in "+o+" ms, current retry count is "+this.levelRetryCount)}(n||r)&&((i=h.url.length)>1&&h.loadError<i?(h.urlId=(h.urlId+1)%i,h.details=void 0,l.logger.warn("level controller, "+u+" for level "+t+": switching to redundant URL-id "+h.urlId)):-1===this.manualLevelIndex?(a=0===t?this._levels.length-1:t-1,l.logger.warn("level controller, "+u+": switch to "+a),this.hls.nextAutoLevel=this.currentLevelIndex=a):r&&(l.logger.warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var n=this._levels[t.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(e){var t=this,n=e.level,r=e.details;if(n===this.currentLevelIndex){var i=this._levels[n];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),r.live){var o=h.computeReloadInterval(i.details,r,e.stats.trequest);l.logger.log("live playlist, reload in "+Math.round(o)+" ms"),this.timer=setTimeout((function(){return t.loadLevel()}),o)}else this.clearTimer()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var r=-1,i=0;i<n.audioGroupIds.length;i++)if(n.audioGroupIds[i]===t){r=i;break}r!==n.urlId&&(n.urlId=r,this.startLoad())}},t.prototype.loadLevel=function(){if(l.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,n=e.urlId,r=e.url[n];l.logger.log("Attempt loading level index "+t+" with URL-id "+n),this.hls.trigger(a.default.LEVEL_LOADING,{url:r,level:t,id:n})}}},Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)},enumerable:!0,configurable:!0}),t}(s.default));t.default=d},"./src/controller/level-helper.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js");function i(t,n,i){var o=t[n],a=t[i],s=a.startPTS;e.isFinite(s)?i>n?(o.duration=s-o.start,o.duration<0&&r.logger.warn("negative duration computed for frag "+o.sn+",level "+o.level+", there should be some duration drift between playlist and fragment!")):(a.duration=o.start-s,a.duration<0&&r.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):a.start=i>n?o.start+o.duration:Math.max(o.start-a.duration,0)}function o(t,n,r,o,a,s){var l=r;if(e.isFinite(n.startPTS)){var c=Math.abs(n.startPTS-r);e.isFinite(n.deltaPTS)?n.deltaPTS=Math.max(c,n.deltaPTS):n.deltaPTS=c,l=Math.max(r,n.startPTS),r=Math.min(r,n.startPTS),o=Math.max(o,n.endPTS),a=Math.min(a,n.startDTS),s=Math.max(s,n.endDTS)}var u=r-n.start;n.start=n.startPTS=r,n.maxStartPTS=l,n.endPTS=o,n.startDTS=a,n.endDTS=s,n.duration=o-r;var h,d,p,f=n.sn;if(!t||f<t.startSN||f>t.endSN)return 0;for(h=f-t.startSN,(d=t.fragments)[h]=n,p=h;p>0;p--)i(d,p,p-1);for(p=h;p<d.length-1;p++)i(d,p,p+1);return t.PTSKnown=!0,u}function a(e,t,n){if(e&&t)for(var r=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,o=t.startSN-e.startSN,a=r;a<=i;a++){var s=e.fragments[o+a],l=t.fragments[a];if(!s||!l)break;n(s,l,a)}}function s(e,t){var n=t.startSN-e.startSN,r=e.fragments,i=t.fragments;if(!(n<0||n>r.length))for(var o=0;o<i.length;o++)i[o].start+=r[n].start}t.addGroupId=function(e,t,n){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(n);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(n)}},t.updatePTS=i,t.updateFragPTSDTS=o,t.mergeDetails=function(t,n){n.initSegment&&t.initSegment&&(n.initSegment=t.initSegment);var i,l=0;if(a(t,n,(function(t,r){l=t.cc-r.cc,e.isFinite(t.startPTS)&&(r.start=r.startPTS=t.startPTS,r.endPTS=t.endPTS,r.duration=t.duration,r.backtracked=t.backtracked,r.dropped=t.dropped,i=r),n.PTSKnown=!0})),n.PTSKnown){if(l){r.logger.log("discontinuity sliding from playlist, take drift into account");for(var c=n.fragments,u=0;u<c.length;u++)c[u].cc+=l}i?o(n,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):s(t,n),n.PTSKnown=t.PTSKnown}},t.mergeSubtitlePlaylists=function(e,t,n){void 0===n&&(n=0);var r=-1;a(e,t,(function(e,t,n){t.start=e.start,r=n}));var i=t.fragments;if(r<0)i.forEach((function(e){e.start+=n}));else for(var o=r+1;o<i.length;o++)i[o].start=i[o-1].start+i[o-1].duration},t.mapFragmentIntersection=a,t.adjustSliding=s,t.computeReloadInterval=function(e,t,n){var r=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=r/2;return e&&t.endSN===e.endSN&&(r=i),n&&(r=Math.max(i,r-(window.performance.now()-n))),Math.round(r)}}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/stream-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/utils/binary-search.js"),a=n("./src/utils/buffer-helper.js"),s=n("./src/demux/demuxer.js"),l=n("./src/events.js"),c=n("./src/controller/fragment-tracker.js"),u=n("./src/loader/fragment.js"),h=n("./src/loader/playlist-loader.js"),d=n("./src/controller/level-helper.js"),p=n("./src/utils/time-ranges.js"),f=n("./src/errors.js"),m=n("./src/utils/logger.js"),g=n("./src/utils/discontinuities.js"),v=n("./src/controller/fragment-finders.js"),y=n("./src/controller/gap-controller.js"),_=n("./src/controller/base-stream-controller.js"),b=function(t){function n(e,n){var r=t.call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.MANIFEST_LOADING,l.default.MANIFEST_PARSED,l.default.LEVEL_LOADED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_LOAD_EMERGENCY_ABORTED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_SWITCHED,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED)||this;return r.fragmentTracker=n,r.config=e.config,r.audioCodecSwap=!1,r._state=_.State.STOPPED,r.stallReported=!1,r.gapController=null,r}return i(n,t),n.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(r=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}t>0&&-1===e&&(m.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=_.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=_.State.STOPPED},n.prototype.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},n.prototype.doTick=function(){switch(this.state){case _.State.BUFFER_FLUSHING:this.fragLoadError=0;break;case _.State.IDLE:this._doTickIdle();break;case _.State.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=_.State.IDLE);break;case _.State.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(m.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=_.State.IDLE);break;case _.State.ERROR:case _.State.STOPPED:case _.State.FRAG_LOADING:case _.State.PARSING:case _.State.PARSED:case _.State.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},n.prototype._doTickIdle=function(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&t.startFragPrefetch)){var r;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,o=this.levels[i];if(o){var s,c=o.bitrate;s=c?Math.max(8*t.maxBufferSize/c,t.maxBufferLength):t.maxBufferLength,s=Math.min(s,t.maxMaxBufferLength);var u=a.BufferHelper.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,t.maxBufferHole),h=u.len;if(!(h>=s)){m.logger.trace("buffer length of "+h.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var d=o.details;if(!d||d.live&&this.levelLastLoaded!==i)this.state=_.State.WAITING_LEVEL;else{if(this._streamEnded(u,d)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(l.default.BUFFER_EOS,p),void(this.state=_.State.ENDED)}this._fetchPayloadOrEos(r,u,d)}}}}},n.prototype._fetchPayloadOrEos=function(e,t,n){var r=this.fragPrevious,i=this.level,o=n.fragments,a=o.length;if(0!==a){var s,l=o[0].start,c=o[a-1].start+o[a-1].duration,u=t.end;if(n.initSegment&&!n.initSegment.data)s=n.initSegment;else if(n.live){var h=this.config.initialLiveManifestSize;if(a<h)return void m.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+h);if(null===(s=this._ensureFragmentAtLivePoint(n,u,l,c,r,o,a)))return}else u<l&&(s=o[0]);s||(s=this._findFragment(l,r,a,o,u,c,n)),s&&(s.encrypted?(m.logger.log("Loading key for "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+i),this._loadKey(s)):(m.logger.log("Loading "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+i+", currentTime:"+e.toFixed(3)+",bufferEnd:"+u.toFixed(3)),this._loadFragment(s)))}},n.prototype._ensureFragmentAtLivePoint=function(e,t,n,r,i,a,s){var l,c=this.hls.config,u=this.media,h=void 0!==c.liveMaxLatencyDuration?c.liveMaxLatencyDuration:c.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(n-c.maxFragLookUpTolerance,r-h)){var d=this.liveSyncPosition=this.computeLivePosition(n,e);m.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+d.toFixed(3)),t=d,u&&u.readyState&&u.duration>d&&(u.currentTime=d),this.nextLoadPosition=d}if(e.PTSKnown&&t>r&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(i)if(e.hasProgramDateTime)m.logger.log("live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),l=v.findFragmentByPDT(a,i.endProgramDateTime,c.maxFragLookUpTolerance);else{var p=i.sn+1;if(p>=e.startSN&&p<=e.endSN){var f=a[p-e.startSN];i.cc===f.cc&&(l=f,m.logger.log("live playlist, switching playlist, load frag with next SN: "+l.sn))}l||(l=o.default.search(a,(function(e){return i.cc-e.cc})))&&m.logger.log("live playlist, switching playlist, load frag with same CC: "+l.sn)}l||(l=a[Math.min(s-1,Math.round(s/2))],m.logger.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))}return l},n.prototype._findFragment=function(e,t,n,r,i,o,a){var s,l=this.hls.config;if(i<o){var c=i>o-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance;s=v.findFragmentByPTS(t,r,i,c)}else s=r[n-1];if(s){var u=s.sn-a.startSN,h=t&&s.level===t.level,d=r[u-1],p=r[u+1];if(t&&s.sn===t.sn)if(h&&!s.backtracked)if(s.sn<a.endSN){var f=t.deltaPTS;f&&f>l.maxBufferHole&&t.dropped&&u?(s=d,m.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(s=p,m.logger.log("SN just loaded, load next one: "+s.sn,s))}else s=null;else s.backtracked&&(p&&p.backtracked?(m.logger.warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+p.sn),s=p):(m.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,d?(s=d).backtracked=!0:u&&(s=null)))}return s},n.prototype._loadKey=function(e){this.state=_.State.KEY_LOADING,this.hls.trigger(l.default.KEY_LOADING,{frag:e})},n.prototype._loadFragment=function(t){var n=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,e.isFinite(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||n===c.FragmentState.NOT_LOADED||n===c.FragmentState.PARTIAL?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(l.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new s.default(this.hls,"main")),this.state=_.State.FRAG_LOADING):n===c.FragmentState.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},Object.defineProperty(n.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,m.logger.log("main stream:"+t+"->"+e),this.hls.trigger(l.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},enumerable:!0,configurable:!0}),n.prototype.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,h.default.LevelType.MAIN)},Object.defineProperty(n.prototype,"currentLevel",{get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nextBufferedFrag",{get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null},enumerable:!0,configurable:!0}),n.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},Object.defineProperty(n.prototype,"nextLevel",{get:function(){var e=this.nextBufferedFrag;return e?e.level:-1},enumerable:!0,configurable:!0}),n.prototype._checkFragmentChanged=function(){var e,t,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((t=n.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),a.BufferHelper.isBuffered(n,t)?e=this.getBufferedFrag(t):a.BufferHelper.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var r=e;if(r!==this.fragPlaying){this.hls.trigger(l.default.FRAG_CHANGED,{frag:r});var i=r.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(l.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=r}}},n.prototype.immediateLevelSwitch=function(){if(m.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,n=void 0;t?(n=t.paused,t.pause()):n=!0,this.previouslyPaused=n}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)},n.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,a.BufferHelper.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},n.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var n,r=void 0,i=void 0;if((n=this.getBufferedFrag(t.currentTime))&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),t.paused)r=0;else{var o=this.hls.nextLoadLevel,a=this.levels[o],s=this.fragLastKbps;r=s&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*s)+1:0}if((i=this.getBufferedFrag(t.currentTime+r))&&(i=this.followingBufferedFrag(i))){var l=this.fragCurrent;l&&l.loader&&l.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,e.POSITIVE_INFINITY)}}},n.prototype.flushMainBuffer=function(e,t){this.state=_.State.BUFFER_FLUSHING;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(l.default.BUFFER_FLUSHING,n)},n.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition),this.gapController=new y.default(n,t,this.fragmentTracker,this.hls)},n.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(m.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},n.prototype.onMediaSeeked=function(){var t=this.media,n=t?t.currentTime:void 0;e.isFinite(n)&&m.logger.log("media seeked to "+n.toFixed(3)),this.tick()},n.prototype.onManifestLoading=function(){m.logger.log("trigger BUFFER_RESET"),this.hls.trigger(l.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},n.prototype.onManifestParsed=function(e){var t,n=!1,r=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(r=!0))})),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&m.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},n.prototype.onLevelLoaded=function(t){var n=t.details,r=t.level,i=this.levels[this.levelLastLoaded],o=this.levels[r],a=n.totalduration,s=0;if(m.logger.log("level "+r+" loaded ["+n.startSN+","+n.endSN+"],duration:"+a),n.live){var c=o.details;c&&n.fragments.length>0?(d.mergeDetails(c,n),s=n.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(s,c),n.PTSKnown&&e.isFinite(s)?m.logger.log("live playlist sliding:"+s.toFixed(3)):(m.logger.log("live playlist - outdated PTS, unknown sliding"),g.alignStream(this.fragPrevious,i,n))):(m.logger.log("live playlist - first load, unknown sliding"),n.PTSKnown=!1,g.alignStream(this.fragPrevious,i,n))}else n.PTSKnown=!1;if(o.details=n,this.levelLastLoaded=r,this.hls.trigger(l.default.LEVEL_UPDATED,{details:n,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var u=n.startTimeOffset;e.isFinite(u)?(u<0&&(m.logger.log("negative start time offset "+u+", count from end of last fragment"),u=s+a+u),m.logger.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u):n.live?(this.startPosition=this.computeLivePosition(s,n),m.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===_.State.WAITING_LEVEL&&(this.state=_.State.IDLE),this.tick()},n.prototype.onKeyLoaded=function(){this.state===_.State.KEY_LOADING&&(this.state=_.State.IDLE,this.tick())},n.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=this.hls,r=this.levels,i=this.media,o=e.frag;if(this.state===_.State.FRAG_LOADING&&t&&"main"===o.type&&o.level===t.level&&o.sn===t.sn){var a=e.stats,c=r[t.level],u=c.details;if(this.bitrateTest=!1,this.stats=a,m.logger.log("Loaded "+t.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+t.level),o.bitrateTest&&n.nextLoadLevel)this.state=_.State.IDLE,this.startFragRequested=!1,a.tparsed=a.tbuffered=window.performance.now(),n.trigger(l.default.FRAG_BUFFERED,{stats:a,frag:t,id:"main"}),this.tick();else if("initSegment"===o.sn)this.state=_.State.IDLE,a.tparsed=a.tbuffered=window.performance.now(),u.initSegment.data=e.payload,n.trigger(l.default.FRAG_BUFFERED,{stats:a,frag:t,id:"main"}),this.tick();else{m.logger.log("Parsing "+t.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+t.level+", cc "+t.cc),this.state=_.State.PARSING,this.pendingBuffering=!0,this.appended=!1,o.bitrateTest&&(o.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:o}));var h=!(i&&i.seeking)&&(u.PTSKnown||!u.live),d=u.initSegment?u.initSegment.data:[],p=this._getAudioCodec(c);(this.demuxer=this.demuxer||new s.default(this.hls,"main")).push(e.payload,d,p,c.videoCodec,t,u.totalduration,h)}}this.fragLoadError=0},n.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===_.State.PARSING){var r=e.tracks,i=void 0,o=void 0;if(r.audio&&this.altAudio&&delete r.audio,o=r.audio){var a=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(m.logger.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==o.metadata.channelCount&&-1===s.indexOf("firefox")&&(a="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==o.container&&(a="mp4a.40.2",m.logger.log("Android: force audio codec to "+a)),o.levelCodec=a,o.id=e.id}for(i in(o=r.video)&&(o.levelCodec=this.levels[this.level].videoCodec,o.id=e.id),this.hls.trigger(l.default.BUFFER_CODECS,r),r){o=r[i],m.logger.log("main track:"+i+",container:"+o.container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var c=o.initSegment;c&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,{type:i,data:c,parent:"main",content:"initSegment"}))}this.tick()}},n.prototype.onFragParsingData=function(t){var n=this,r=this.fragCurrent,i=t.frag;if(r&&"main"===t.id&&i.sn===r.sn&&i.level===r.level&&("audio"!==t.type||!this.altAudio)&&this.state===_.State.PARSING){var o=this.levels[this.level],a=r;if(e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+r.duration,t.endDTS=t.startDTS+r.duration),!0===t.hasAudio&&a.addElementaryStream(u.default.ElementaryStreamTypes.AUDIO),!0===t.hasVideo&&a.addElementaryStream(u.default.ElementaryStreamTypes.VIDEO),m.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(a.dropped=t.dropped,a.dropped)if(a.backtracked)m.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var s=o.details;if(!s||a.sn!==s.startSN)return m.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=_.State.IDLE,this.fragPrevious=a,void this.tick();m.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var c=d.updateFragPTSDTS(o.details,a,t.startPTS,t.endPTS,t.startDTS,t.endDTS),h=this.hls;h.trigger(l.default.LEVEL_PTS_UPDATED,{details:o.details,level:this.level,drift:c,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach((function(e){e&&e.length&&n.state===_.State.PARSING&&(n.appended=!0,n.pendingBuffering=!0,h.trigger(l.default.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))})),this.tick()}},n.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===_.State.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=_.State.PARSED,this._checkAppendedParsed())},n.prototype.onAudioTrackSwitching=function(t){var n=!!t.url,r=t.id;if(!n){if(this.mediaBuffer!==this.media){m.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(m.logger.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=_.State.IDLE}var o=this.hls;o.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),o.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}},n.prototype.onAudioTrackSwitched=function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(m.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},n.prototype.onBufferCreated=function(e){var t,n,r=e.tracks,i=!1;for(var o in r){var a=r[o];"main"===a.id?(n=o,t=a,"video"===o&&(this.videoBuffer=r[o].buffer)):i=!0}i&&t?(m.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},n.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==_.State.PARSING&&t!==_.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},n.prototype._checkAppendedParsed=function(){if(!(this.state!==_.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;m.logger.log("main buffered : "+p.default.toString(t.buffered)),this.fragPrevious=e;var n=this.stats;n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(l.default.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=_.State.IDLE}this.tick()}},n.prototype.onError=function(t){var n=t.frag||this.fragCurrent;if(!n||"main"===n.type){var r=!!this.media&&a.BufferHelper.isBuffered(this.media,this.media.currentTime)&&a.BufferHelper.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case f.ErrorDetails.FRAG_LOAD_ERROR:case f.ErrorDetails.FRAG_LOAD_TIMEOUT:case f.ErrorDetails.KEY_LOAD_ERROR:case f.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);m.logger.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=_.State.FRAG_LOADING_WAITING_RETRY}else m.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=_.State.ERROR;break;case f.ErrorDetails.LEVEL_LOAD_ERROR:case f.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==_.State.ERROR&&(t.fatal?(this.state=_.State.ERROR,m.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==_.State.WAITING_LEVEL||(this.state=_.State.IDLE));break;case f.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==_.State.PARSING&&this.state!==_.State.PARSED||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=_.State.IDLE):(m.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)))}}},n.prototype._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,m.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},n.prototype._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},n.prototype.onFragLoadEmergencyAborted=function(){this.state=_.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},n.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(u.default.ElementaryStreamTypes.VIDEO,e.buffered),this.state=_.State.IDLE,this.fragPrevious=null},n.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},n.prototype.computeLivePosition=function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)},n.prototype._seekToStartPos=function(){var e=this.media,t=e.currentTime,n=e.seeking?t:this.startPosition;t!==n&&(m.logger.log("target start position not buffered, seek to buffered.start(0) "+n+" from current time "+t+" "),e.currentTime=n)},n.prototype._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(m.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},Object.defineProperty(n.prototype,"liveSyncPosition",{get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e},enumerable:!0,configurable:!0}),n}(_.default);t.default=b}).call(this,n("./src/polyfills/number.js").Number)},"./src/crypt/aes-crypto.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}();t.default=r},"./src/crypt/aes-decryptor.js":function(e,t,n){"use strict";function r(e){var t=e.byteLength,n=t&&new DataView(e).getUint8(t-1);return n?e.slice(0,t-n):e}Object.defineProperty(t,"__esModule",{value:!0}),t.removePadding=r;var i=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<4;r++)n[r]=t.getUint32(4*r);return n},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],o=n[2],a=n[3],s=this.invSubMix,l=s[0],c=s[1],u=s[2],h=s[3],d=new Uint32Array(256),p=0,f=0,m=0;for(m=0;m<256;m++)d[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){var g=f^f<<1^f<<2^f<<3^f<<4;g=g>>>8^255&g^99,e[p]=g,t[g]=p;var v=d[p],y=d[v],_=d[y],b=257*d[g]^16843008*g;r[p]=b<<24|b>>>8,i[p]=b<<16|b>>>16,o[p]=b<<8|b>>>24,a[p]=b,b=16843009*_^65537*y^257*v^16843008*p,l[g]=b<<24|b>>>8,c[g]=b<<16|b>>>16,u[g]=b<<8|b>>>24,h[g]=b,p?(p=v^d[d[d[_^v]]],f^=d[d[f]]):p=f=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o,a,s,l,c=this.ksRows=4*(i+6+1),u=this.keySchedule=new Uint32Array(c),h=this.invKeySchedule=new Uint32Array(c),d=this.sBox,p=this.rcon,f=this.invSubMix,m=f[0],g=f[1],v=f[2],y=f[3];for(o=0;o<c;o++)o<i?s=u[o]=t[o]:(l=s,o%i==0?(l=d[(l=l<<8|l>>>24)>>>24]<<24|d[l>>>16&255]<<16|d[l>>>8&255]<<8|d[255&l],l^=p[o/i|0]<<24):i>6&&o%i==4&&(l=d[l>>>24]<<24|d[l>>>16&255]<<16|d[l>>>8&255]<<8|d[255&l]),u[o]=s=(u[o-i]^l)>>>0);for(a=0;a<c;a++)o=c-a,l=3&a?u[o]:u[o-4],h[a]=a<4||o<=4?l:m[d[l>>>24]]^g[d[l>>>16&255]]^v[d[l>>>8&255]]^y[d[255&l]],h[a]=h[a]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,n,i){for(var o,a,s,l,c,u,h,d,p,f,m,g,v,y,_=this.keySize+6,b=this.invKeySchedule,x=this.invSBox,S=this.invSubMix,w=S[0],E=S[1],T=S[2],M=S[3],C=this.uint8ArrayToUint32Array_(n),$=C[0],O=C[1],A=C[2],I=C[3],P=new Int32Array(e),L=new Int32Array(P.length),k=this.networkToHostOrderSwap;t<P.length;){for(p=k(P[t]),f=k(P[t+1]),m=k(P[t+2]),g=k(P[t+3]),c=p^b[0],u=g^b[1],h=m^b[2],d=f^b[3],v=4,y=1;y<_;y++)o=w[c>>>24]^E[u>>16&255]^T[h>>8&255]^M[255&d]^b[v],a=w[u>>>24]^E[h>>16&255]^T[d>>8&255]^M[255&c]^b[v+1],s=w[h>>>24]^E[d>>16&255]^T[c>>8&255]^M[255&u]^b[v+2],l=w[d>>>24]^E[c>>16&255]^T[u>>8&255]^M[255&h]^b[v+3],c=o,u=a,h=s,d=l,v+=4;o=x[c>>>24]<<24^x[u>>16&255]<<16^x[h>>8&255]<<8^x[255&d]^b[v],a=x[u>>>24]<<24^x[h>>16&255]<<16^x[d>>8&255]<<8^x[255&c]^b[v+1],s=x[h>>>24]<<24^x[d>>16&255]<<16^x[c>>8&255]<<8^x[255&u]^b[v+2],l=x[d>>>24]<<24^x[c>>16&255]<<16^x[u>>8&255]<<8^x[255&h]^b[v+3],v+=3,L[t]=k(o^$),L[t+1]=k(l^O),L[t+2]=k(s^A),L[t+3]=k(a^I),$=p,O=f,A=m,I=g,t+=4}return i?r(L.buffer):L.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}();t.default=i},"./src/crypt/decrypter.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/crypt/aes-crypto.js"),i=n("./src/crypt/fast-aes-key.js"),o=n("./src/crypt/aes-decryptor.js"),a=n("./src/errors.js"),s=n("./src/utils/logger.js"),l=n("./src/events.js"),c=n("./src/utils/get-self-scope.js").getSelfScope(),u=function(){function e(e,t,n){var r=(void 0===n?{}:n).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var o=c.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,n,a){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var c=this.decryptor;c||(this.decryptor=c=new o.default),c.expandKey(t),a(c.decrypt(e,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var u=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new i.default(u,t)),this.fastAesKey.expandKey().then((function(i){new r.default(u,n).decrypt(e,i).catch((function(r){l.onWebCryptoError(r,e,t,n,a)})).then((function(e){a(e)}))})).catch((function(r){l.onWebCryptoError(r,e,t,n,a)}))}},e.prototype.onWebCryptoError=function(e,t,n,r,i){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,r,i)):(s.logger.error("decrypting error : "+e.message),this.observer.trigger(l.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=u},"./src/crypt/fast-aes-key.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();t.default=r},"./src/demux/aacdemuxer.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/demux/adts.js"),i=n("./src/utils/logger.js"),o=n("./src/demux/id3.js"),a=function(){function t(e,t,n){this.observer=e,this.config=n,this.remuxer=t}return t.prototype.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(e){if(!e)return!1;for(var t=(o.default.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(r.probe(e,t))return i.logger.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,n,a,s){for(var l=this._audioTrack,c=o.default.getID3Data(t,0)||[],u=o.default.getTimeStamp(c),h=e.isFinite(u)?90*u:9e4*n,d=0,p=h,f=t.length,m=c.length,g=[{pts:p,dts:p,data:c}];m<f-1;)if(r.isHeader(t,m)&&m+5<f){r.initTrackConfig(l,this.observer,t,m,l.manifestCodec);var v=r.appendFrame(l,t,m,h,d);if(!v){i.logger.log("Unable to parse AAC frame");break}m+=v.length,p=v.sample.pts,d++}else o.default.isHeader(t,m)?(c=o.default.getID3Data(t,m),g.push({pts:p,dts:p,data:c}),m+=c.length):m++;this.remuxer.remux(l,{samples:[]},{samples:g,inputTimeScale:9e4},{samples:[]},n,a,s)},t.prototype.destroy=function(){},t}();t.default=a}).call(this,n("./src/polyfills/number.js").Number)},"./src/demux/adts.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js"),i=n("./src/errors.js"),o=n("./src/events.js");function a(e,t,n,a){var s,l,c,u,h,d=navigator.userAgent.toLowerCase(),p=a,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(s=1+((192&t[n+2])>>>6),!((l=(60&t[n+2])>>>2)>f.length-1))return u=(1&t[n+2])<<2,u|=(192&t[n+3])>>>6,r.logger.log("manifest codec:"+a+",ADTS data:type:"+s+",sampleingIndex:"+l+"["+f[l]+"Hz],channelConfig:"+u),/firefox/i.test(d)?l>=6?(s=5,h=new Array(4),c=l-3):(s=2,h=new Array(2),c=l):-1!==d.indexOf("android")?(s=2,h=new Array(2),c=l):(s=5,h=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&l>=6?c=l-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(l>=6&&1===u||/vivaldi/i.test(d))||!a&&1===u)&&(s=2,h=new Array(2)),c=l)),h[0]=s<<3,h[0]|=(14&l)>>1,h[1]|=(1&l)<<7,h[1]|=u<<3,5===s&&(h[1]|=(14&c)>>1,h[2]=(1&c)<<7,h[2]|=8,h[3]=0),{config:h,samplerate:f[l],channelCount:u,codec:"mp4a.40."+s,manifestCodec:p};e.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}function s(e,t){return 255===e[t]&&240==(246&e[t+1])}function l(e,t){return 1&e[t+1]?7:9}function c(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function u(e){return 9216e4/e}function h(e,t,n,r,i){var o,a,s=e.length;if(o=l(e,t),a=c(e,t),(a-=o)>0&&t+o+a<=s)return{headerLength:o,frameLength:a,stamp:n+r*i}}t.getAudioConfig=a,t.isHeaderPattern=s,t.getHeaderLength=l,t.getFullFrameLength=c,t.isHeader=function(e,t){return!!(t+1<e.length&&s(e,t))},t.probe=function(e,t){if(t+1<e.length&&s(e,t)){var n=l(e,t);t+5<e.length&&(n=c(e,t));var r=t+n;if(r===e.length||r+1<e.length&&s(e,r))return!0}return!1},t.initTrackConfig=function(e,t,n,i,o){if(!e.samplerate){var s=a(t,n,i,o);e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,r.logger.log("parsed codec:"+e.codec+",rate:"+s.samplerate+",nb channel:"+s.channelCount)}},t.getFrameDuration=u,t.parseFrameHeader=h,t.appendFrame=function(e,t,n,r,i){var o=h(t,n,r,i,u(e.samplerate));if(o){var a=o.stamp,s=o.headerLength,l=o.frameLength,c={unit:t.subarray(n+s,n+s+l),pts:a,dts:a};return e.samples.push(c),e.len+=l,{sample:c,length:l+s}}}},"./src/demux/demuxer-inline.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("./src/events.js"),o=n("./src/errors.js"),a=n("./src/crypt/decrypter.js"),s=n("./src/demux/aacdemuxer.js"),l=n("./src/demux/mp4demuxer.js"),c=n("./src/demux/tsdemuxer.js"),u=n("./src/demux/mp3demuxer.js"),h=n("./src/remux/mp4-remuxer.js"),d=n("./src/remux/passthrough-remuxer.js"),p=n("./src/utils/get-self-scope.js"),f=n("./src/utils/logger.js"),m=p.getSelfScope();try{r=m.performance.now.bind(m.performance)}catch(e){f.logger.debug("Unable to use Performance API on this environment"),r=m.Date.now}var g=function(){function e(e,t,n,r){this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,n,o,s,l,c,u,h,d,p,f){var m=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var g=this.decrypter;null==g&&(g=this.decrypter=new a.default(this.observer,this.config));var v=r();g.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var a=r();m.observer.trigger(i.default.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:a}}),m.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),o,s,l,c,u,h,d,p,f)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),o,s,l,c,u,h,d,p,f)},e.prototype.pushDecrypted=function(e,t,n,r,a,p,f,m,g,v,y,_){var b=this.demuxer;if(!b||(f||m)&&!this.probe(e)){for(var x=this.observer,S=this.typeSupported,w=this.config,E=[{demux:c.default,remux:h.default},{demux:l.default,remux:d.default},{demux:s.default,remux:h.default},{demux:u.default,remux:h.default}],T=0,M=E.length;T<M;T++){var C=E[T],$=C.demux.probe;if($(e)){var O=this.remuxer=new C.remux(x,w,S,this.vendor);b=new C.demux(x,O,w,S),this.probe=$;break}}if(!b)return void x.trigger(i.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=b}var A=this.remuxer;(f||m)&&(b.resetInitSegment(n,r,a,v),A.resetInitSegment()),f&&(b.resetTimeStamp(_),A.resetTimeStamp(_)),"function"==typeof b.setDecryptData&&b.setDecryptData(t),b.append(e,p,g,y)},e}();t.default=g},"./src/demux/demuxer-worker.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/demux/demuxer-inline.js"),i=n("./src/events.js"),o=n("./src/utils/logger.js"),a=n("./node_modules/node-libs-browser/node_modules/events/events.js");t.default=function(e){var t=new a.EventEmitter;t.trigger=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.removeListener.apply(t,[e].concat(n))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",(function(i){var a=i.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);e.demuxer=new r.default(t,a.typeSupported,s,a.vendor),o.enableLogs(s.debug),n("init",null);break;case"demux":e.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}})),t.on(i.default.FRAG_DECRYPTED,n),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,n),t.on(i.default.FRAG_PARSED,n),t.on(i.default.ERROR,n),t.on(i.default.FRAG_PARSING_METADATA,n),t.on(i.default.FRAG_PARSING_USERDATA,n),t.on(i.default.INIT_PTS_FOUND,n),t.on(i.default.FRAG_PARSING_DATA,(function(t,n){var r=[],i={event:t,data:n};n.data1&&(i.data1=n.data1.buffer,r.push(n.data1.buffer),delete n.data1),n.data2&&(i.data2=n.data2.buffer,r.push(n.data2.buffer),delete n.data2),e.postMessage(i,r)}))}},"./src/demux/demuxer.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/webworkify-webpack/index.js"),i=n("./src/events.js"),o=n("./src/demux/demuxer-inline.js"),a=n("./src/utils/logger.js"),s=n("./src/errors.js"),l=n("./src/utils/mediasource-helper.js"),c=n("./src/utils/get-self-scope.js"),u=n("./src/observer.js"),h=c.getSelfScope(),d=l.getMediaSource(),p=function(){function t(e,t){var n=this;this.hls=e,this.id=t;var l=this.observer=new u.Observer,c=e.config,p=function(t,r){(r=r||{}).frag=n.frag,r.id=n.id,e.trigger(t,r)};l.on(i.default.FRAG_DECRYPTED,p),l.on(i.default.FRAG_PARSING_INIT_SEGMENT,p),l.on(i.default.FRAG_PARSING_DATA,p),l.on(i.default.FRAG_PARSED,p),l.on(i.default.ERROR,p),l.on(i.default.FRAG_PARSING_METADATA,p),l.on(i.default.FRAG_PARSING_USERDATA,p),l.on(i.default.INIT_PTS_FOUND,p);var f={mp4:d.isTypeSupported("video/mp4"),mpeg:d.isTypeSupported("audio/mpeg"),mp3:d.isTypeSupported('audio/mp4; codecs="mp3"')},m=navigator.vendor;if(c.enableWorker&&"undefined"!=typeof Worker){a.logger.log("demuxing in webworker");var g=void 0;try{g=this.w=r("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),g.addEventListener("message",this.onwmsg),g.onerror=function(t){e.trigger(i.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},g.postMessage({cmd:"init",typeSupported:f,vendor:m,id:t,config:JSON.stringify(c)})}catch(e){a.logger.warn("Error in worker:",e),a.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),g&&h.URL.revokeObjectURL(g.objectURL),this.demuxer=new o.default(l,f,c,m),this.w=void 0}}else this.demuxer=new o.default(l,f,c,m)}return t.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,n,r,i,o,s,l,c){var u=this.w,h=e.isFinite(o.startPTS)?o.startPTS:o.start,d=o.decryptdata,p=this.frag,f=!(p&&o.cc===p.cc),m=!(p&&o.level===p.level),g=p&&o.sn===p.sn+1,v=!m&&g;if(f&&a.logger.log(this.id+":discontinuity detected"),m&&a.logger.log(this.id+":switch detected"),this.frag=o,u)u.postMessage({cmd:"demux",data:t,decryptdata:d,initSegment:n,audioCodec:r,videoCodec:i,timeOffset:h,discontinuity:f,trackSwitch:m,contiguous:v,duration:s,accurateTimeOffset:l,defaultInitPTS:c},t instanceof ArrayBuffer?[t]:[]);else{var y=this.demuxer;y&&y.push(t,d,n,r,i,h,f,m,v,s,l,c)}},t.prototype.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":h.URL.revokeObjectURL(this.w.objectURL);break;case i.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},t}();t.default=p}).call(this,n("./src/polyfills/number.js").Number)},"./src/demux/exp-golomb.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js"),i=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&r.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,n=8,r=8;for(t=0;t<e;t++)0!==r&&(r=(n+this.readEG()+256)%256),n=0===r?n:r},e.prototype.readSPS=function(){var e,t,n,r,i,o,a,s=0,l=0,c=0,u=0,h=this.readUByte.bind(this),d=this.readBits.bind(this),p=this.readUEG.bind(this),f=this.readBoolean.bind(this),m=this.skipBits.bind(this),g=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(h(),e=h(),d(5),m(3),h(),v(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var _=p();if(3===_&&m(1),v(),v(),m(1),f())for(o=3!==_?8:12,a=0;a<o;a++)f()&&y(a<6?16:64)}v();var b=p();if(0===b)p();else if(1===b)for(m(1),g(),g(),t=p(),a=0;a<t;a++)g();v(),m(1),n=p(),r=p(),0===(i=d(1))&&m(1),m(1),f()&&(s=p(),l=p(),c=p(),u=p());var x=[1,1];if(f()&&f())switch(h()){case 1:x=[1,1];break;case 2:x=[12,11];break;case 3:x=[10,11];break;case 4:x=[16,11];break;case 5:x=[40,33];break;case 6:x=[24,11];break;case 7:x=[20,11];break;case 8:x=[32,11];break;case 9:x=[80,33];break;case 10:x=[18,11];break;case 11:x=[15,11];break;case 12:x=[64,33];break;case 13:x=[160,99];break;case 14:x=[4,3];break;case 15:x=[3,2];break;case 16:x=[2,1];break;case 255:x=[h()<<8|h(),h()<<8|h()]}return{width:Math.ceil(16*(n+1)-2*s-2*l),height:(2-i)*(r+1)*16-(i?2:4)*(c+u),pixelRatio:x}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();t.default=i},"./src/demux/id3.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,n){for(var r=n,i=0;e.isHeader(t,n);)i+=10,i+=e._readSize(t,n+6),e.isFooter(t,n+10)&&(i+=10),n+=i;if(i>0)return t.subarray(r,r+i)},e._readSize=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},e.getTimeStamp=function(t){for(var n=e.getID3Frames(t),r=0;r<n.length;r++){var i=n[r];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var n=String.fromCharCode(t[0],t[1],t[2],t[3]),r=e._readSize(t,4);return{type:n,size:r,data:t.subarray(10,10+r)}},e.getID3Frames=function(t){for(var n=0,r=[];e.isHeader(t,n);){for(var i=e._readSize(t,n+6),o=(n+=10)+i;n+8<o;){var a=e._getFrameData(t.subarray(n)),s=e._decodeFrame(a);s&&r.push(s),n+=a.size+10}e.isFooter(t,n)&&(n+=10)}return r},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var n=e._utf8ArrayToStr(t.data,!0),r=new Uint8Array(t.data.subarray(n.length+1));return{key:t.type,info:n,data:r.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var n=1,r=e._utf8ArrayToStr(t.data.subarray(n));n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var o=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:o}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var n=1,r=e._utf8ArrayToStr(t.data.subarray(n));n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var o=e._utf8ArrayToStr(t.data);return{key:t.type,data:o}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);for(var n,r,i,o=e.length,a="",s=0;s<o;){if(0===(n=e[s++])&&t)return a;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:r=e[s++],a+=String.fromCharCode((31&n)<<6|63&r);break;case 14:r=e[s++],i=e[s++],a+=String.fromCharCode((15&n)<<12|(63&r)<<6|(63&i)<<0)}}return a},e}(),i=r._utf8ArrayToStr;t.utf8ArrayToStr=i,t.default=r},"./src/demux/mp3demuxer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/demux/id3.js"),i=n("./src/utils/logger.js"),o=n("./src/demux/mpegaudio.js"),a=function(){function e(e,t,n){this.observer=e,this.config=n,this.remuxer=t}return e.prototype.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t,n,a=r.default.getID3Data(e,0);if(a&&void 0!==r.default.getTimeStamp(a))for(t=a.length,n=Math.min(e.length-1,t+100);t<n;t++)if(o.default.probe(e,t))return i.logger.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,n,i){for(var a=r.default.getID3Data(e,0),s=r.default.getTimeStamp(a),l=s?90*s:9e4*t,c=a.length,u=e.length,h=0,d=0,p=this._audioTrack,f=[{pts:l,dts:l,data:a}];c<u;)if(o.default.isHeader(e,c)){var m=o.default.appendFrame(p,e,c,l,h);if(!m)break;c+=m.length,d=m.sample.pts,h++}else r.default.isHeader(e,c)?(a=r.default.getID3Data(e,c),f.push({pts:d,dts:d,data:a}),c+=a.length):c++;this.remuxer.remux(p,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},t,n,i)},e.prototype.destroy=function(){},e}();t.default=a},"./src/demux/mp4demuxer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js"),i=n("./src/events.js"),o=Math.pow(2,32)-1,a=function(){function e(e,t){this.observer=e,this.remuxer=t}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,n,r,o){if(t&&t.byteLength){var a=this.initData=e.parseInitSegment(t);null==n&&(n="mp4a.40.5"),null==r&&(r="avc1.42e01e");var s={};a.audio&&a.video?s.audiovideo={container:"video/mp4",codec:n+","+r,initSegment:o?t:null}:(a.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:o?t:null}),a.video&&(s.video={container:"video/mp4",codec:r,initSegment:o?t:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),r&&(this.videoCodec=r)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<8|e[t+1];return n<0?65536+n:n},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n},e.writeUint32=function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},e.findBox=function(t,n){var r,i,o,a,s,l,c=[];if(t.data?(s=t.start,o=t.end,t=t.data):(s=0,o=t.byteLength),!n.length)return null;for(r=s;r<o;)l=(i=e.readUint32(t,r))>1?r+i:o,e.bin2str(t.subarray(r+4,r+8))===n[0]&&(1===n.length?c.push({data:t,start:r+8,end:l}):(a=e.findBox({data:t,start:r+8,end:l},n.slice(1))).length&&(c=c.concat(a))),r=l;return c},e.parseSegmentIndex=function(t){var n,r=e.findBox(t,["moov"])[0],i=r?r.end:null,o=0,a=e.findBox(t,["sidx"]);if(!a||!a[0])return null;n=[];var s=(a=a[0]).data[0];o=0===s?8:16;var l=e.readUint32(a,o);o+=4,o+=0===s?8:16,o+=2;var c=a.end+0,u=e.readUint16(a,o);o+=2;for(var h=0;h<u;h++){var d=o,p=e.readUint32(a,d);d+=4;var f=2147483647&p;if(1==(2147483648&p)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var m=e.readUint32(a,d);d+=4,n.push({referenceSize:f,subsegmentDuration:m,info:{duration:m/l,start:c,end:c+f-1}}),c+=f,o=d+=4}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:u,references:n,moovEndOffset:i}},e.parseInitSegment=function(t){var n=[];return e.findBox(t,["moov","trak"]).forEach((function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var o=i.data[i.start],a=0===o?12:20,s=e.readUint32(i,a),l=e.findBox(t,["mdia","mdhd"])[0];if(l){a=0===(o=l.data[l.start])?12:20;var c=e.readUint32(l,a),u=e.findBox(t,["mdia","hdlr"])[0];if(u){var h={soun:"audio",vide:"video"}[e.bin2str(u.data.subarray(u.start+8,u.start+12))];if(h){var d=e.findBox(t,["mdia","minf","stbl","stsd"]);if(d.length){d=d[0];var p=e.bin2str(d.data.subarray(d.start+12,d.start+16));r.logger.log("MP4Demuxer:"+h+":"+p+" found")}n[s]={timescale:c,type:h},n[h]={timescale:c,id:s}}}}}})),n},e.getStartDTS=function(t,n){var r,i,o;return r=e.findBox(n,["moof","traf"]),i=[].concat.apply([],r.map((function(n){return e.findBox(n,["tfhd"]).map((function(r){var i,o;return i=e.readUint32(r,4),o=t[i].timescale||9e4,e.findBox(n,["tfdt"]).map((function(t){var n,r;return n=t.data[t.start],r=e.readUint32(t,4),1===n&&(r*=Math.pow(2,32),r+=e.readUint32(t,8)),r}))[0]/o}))}))),o=Math.min.apply(null,i),isFinite(o)?o:0},e.offsetStartDTS=function(t,n,r){e.findBox(n,["moof","traf"]).map((function(n){return e.findBox(n,["tfhd"]).map((function(i){var a=e.readUint32(i,4),s=t[a].timescale||9e4;e.findBox(n,["tfdt"]).map((function(t){var n=t.data[t.start],i=e.readUint32(t,4);if(0===n)e.writeUint32(t,4,i-r*s);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=r*s,i=Math.max(i,0);var a=Math.floor(i/(o+1)),l=Math.floor(i%(o+1));e.writeUint32(t,4,a),e.writeUint32(t,8,l)}}))}))}))},e.prototype.append=function(t,n,r,o){var a=this.initData;a||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),a=this.initData);var s,l=this.initPTS;if(void 0===l){var c=e.getStartDTS(a,t);this.initPTS=l=c-n,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(a,t,l),s=e.getStartDTS(a,t),this.remuxer.remux(a.audio,a.video,null,null,s,r,o,t)},e.prototype.destroy=function(){},e}();t.default=a},"./src/demux/mpegaudio.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,n,r,i){if(!(n+24>t.length)){var o=this.parseHeader(t,n);if(o&&n+o.frameLength<=t.length){var a=r+i*(9e4*o.samplesPerFrame/o.sampleRate),s={unit:t.subarray(n,n+o.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(s),e.len+=o.frameLength,{sample:s,length:o.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,o=e[t+2]>>4&15,a=e[t+2]>>2&3,s=e[t+2]>>1&1;if(1!==n&&0!==o&&15!==o&&3!==a){var l=3===n?3-i:3===i?3:4,c=1e3*r.BitratesMap[14*l+o-1],u=3===n?0:2===n?1:2,h=r.SamplingRateMap[3*u+a],d=e[t+3]>>6==3?1:2,p=r.SamplesCoefficients[n][i],f=r.BytesInSlot[i],m=8*p*f;return{sampleRate:h,channelCount:d,frameLength:parseInt(p*c/h+s,10)*f,samplesPerFrame:m}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),r=4;n&&n.frameLength&&(r=n.frameLength);var i=t+r;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}};t.default=r},"./src/demux/sample-aes.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/crypt/decrypter.js"),i=function(){function e(e,t,n,i){this.decryptdata=n,this.discardEPB=i,this.decrypter=new r.default(e,t,{removePKCS7Padding:!1})}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,n,r){var i=e[t].unit,o=i.subarray(16,i.length-i.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,(function(o){o=new Uint8Array(o),i.set(o,16),r||s.decryptAacSamples(e,t+1,n)}))},e.prototype.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,r),!r)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),r=0,i=32;i<=e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var n=0,r=32;r<=e.length-16;r+=160,n+=16)e.set(t.subarray(n,n+16),r);return e},e.prototype.decryptAvcSample=function(e,t,n,r,i,o){var a=this.discardEPB(i.data),s=this.getAvcEncryptedData(a),l=this;this.decryptBuffer(s.buffer,(function(s){i.data=l.getAvcDecryptedUnit(a,s),o||l.decryptAvcSamples(e,t,n+1,r)}))},e.prototype.decryptAvcSamples=function(e,t,n,r){for(;;t++,n=0){if(t>=e.length)return void r();for(var i=e[t].units;!(n>=i.length);n++){var o=i[n];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,r,o,a),!a)return}}}},e}();t.default=i},"./src/demux/tsdemuxer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/demux/adts.js"),i=n("./src/demux/mpegaudio.js"),o=n("./src/events.js"),a=n("./src/demux/exp-golomb.js"),s=n("./src/demux/sample-aes.js"),l=n("./src/utils/logger.js"),c=n("./src/errors.js"),u={video:1,audio:2,id3:3,text:4},h=function(){function e(e,t,n,r){this.observer=e,this.config=n,this.typeSupported=r,this.remuxer=t,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new s.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var n=e._syncOffset(t);return!(n<0||(n&&l.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),0))},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:u[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.prototype.resetInitSegment=function(t,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=r,this._duration=i},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,n,r,i){var a,s,u,h,d,p=t.length,f=!1;this.contiguous=r;var m=this.pmtParsed,g=this._avcTrack,v=this._audioTrack,y=this._id3Track,_=g.pid,b=v.pid,x=y.pid,S=this._pmtId,w=g.pesData,E=v.pesData,T=y.pesData,M=this._parsePAT,C=this._parsePMT,$=this._parsePES,O=this._parseAVCPES.bind(this),A=this._parseAACPES.bind(this),I=this._parseMPEGPES.bind(this),P=this._parseID3PES.bind(this),L=e._syncOffset(t);for(p-=(p+L)%188,a=L;a<p;a+=188)if(71===t[a]){if(s=!!(64&t[a+1]),u=((31&t[a+1])<<8)+t[a+2],(48&t[a+3])>>4>1){if((h=a+5+t[a+4])===a+188)continue}else h=a+4;switch(u){case _:s&&(w&&(d=$(w))&&void 0!==d.pts&&O(d,!1),w={data:[],size:0}),w&&(w.data.push(t.subarray(h,a+188)),w.size+=a+188-h);break;case b:s&&(E&&(d=$(E))&&void 0!==d.pts&&(v.isAAC?A(d):I(d)),E={data:[],size:0}),E&&(E.data.push(t.subarray(h,a+188)),E.size+=a+188-h);break;case x:s&&(T&&(d=$(T))&&void 0!==d.pts&&P(d),T={data:[],size:0}),T&&(T.data.push(t.subarray(h,a+188)),T.size+=a+188-h);break;case 0:s&&(h+=t[h]+1),S=this._pmtId=M(t,h);break;case S:s&&(h+=t[h]+1);var k=C(t,h,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(_=k.avc)>0&&(g.pid=_),(b=k.audio)>0&&(v.pid=b,v.isAAC=k.isAAC),(x=k.id3)>0&&(y.pid=x),f&&!m&&(l.logger.log("reparse from beginning"),f=!1,a=L-188),m=this.pmtParsed=!0;break;case 17:case 8191:break;default:f=!0}}else this.observer.trigger(o.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});w&&(d=$(w))&&void 0!==d.pts?(O(d,!0),g.pesData=null):g.pesData=w,E&&(d=$(E))&&void 0!==d.pts?(v.isAAC?A(d):I(d),v.pesData=null):(E&&E.size&&l.logger.log("last AAC PES packet truncated,might overlap between fragments"),v.pesData=E),T&&(d=$(T))&&void 0!==d.pts?(P(d),y.pesData=null):y.pesData=T,null==this.sampleAes?this.remuxer.remux(v,g,y,this._txtTrack,n,r,i):this.decryptAndRemux(v,g,y,this._txtTrack,n,r,i)},e.prototype.decryptAndRemux=function(e,t,n,r,i,o,a){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){s.decryptAndRemuxAvc(e,t,n,r,i,o,a)}))}else this.decryptAndRemuxAvc(e,t,n,r,i,o,a)},e.prototype.decryptAndRemuxAvc=function(e,t,n,r,i,o,a){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){s.remuxer.remux(e,t,n,r,i,o,a)}))}else this.remuxer.remux(e,t,n,r,i,o,a)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,n,r){var i,o,a={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<i;){switch(o=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!r){l.logger.log("unkown stream type:"+e[t]);break}case 15:-1===a.audio&&(a.audio=o);break;case 21:-1===a.id3&&(a.id3=o);break;case 219:if(!r){l.logger.log("unkown stream type:"+e[t]);break}case 27:-1===a.avc&&(a.avc=o);break;case 3:case 4:n?-1===a.audio&&(a.audio=o,a.isAAC=!1):l.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:l.logger.warn("HEVC stream type found, not supported for now");break;default:l.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return a},e.prototype._parsePES=function(e){var t,n,r,i,o,a,s,c,u=0,h=e.data;if(!e||0===e.size)return null;for(;h[0].length<19&&h.length>1;){var d=new Uint8Array(h[0].length+h[1].length);d.set(h[0]),d.set(h[1],h[0].length),h[0]=d,h.splice(1,1)}if(1===((t=h[0])[0]<<16)+(t[1]<<8)+t[2]){if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;192&(n=t[7])&&((a=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(a-=8589934592),64&n?((s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(s-=8589934592),a-s>54e5&&(l.logger.warn(Math.round((a-s)/9e4)+"s delta between PTS and DTS, align them"),a=s)):s=a),c=(i=t[8])+9,e.size-=c,o=new Uint8Array(e.size);for(var p=0,f=h.length;p<f;p++){var m=(t=h[p]).byteLength;if(c){if(c>m){c-=m;continue}t=t.subarray(c),m-=c,c=0}o.set(t,u),u+=m}return r&&(r-=i+3),{data:o,pts:a,dts:s,len:r}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var n=t.samples,r=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(r||this.contiguous)?(e.id=r,n.push(e)):t.dropped++}e.debug.length&&l.logger.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var n,r,i,o=this,s=this._avcTrack,l=this._parseAVCNALu(e.data),c=this.avcSample,u=!1,h=this.pushAccesUnit.bind(this),d=function(e,t,n,r){return{key:e,pts:t,dts:n,units:[],debug:r}};e.data=null,c&&l.length&&!s.audFound&&(h(c,s),c=this.avcSample=d(!1,e.pts,e.dts,"")),l.forEach((function(t){switch(t.type){case 1:r=!0,c||(c=o.avcSample=d(!0,e.pts,e.dts,"")),c.frame=!0;var l=t.data;if(u&&l.length>4){var p=new a.default(l).readSliceType();2!==p&&4!==p&&7!==p&&9!==p||(c.key=!0)}break;case 5:r=!0,c||(c=o.avcSample=d(!0,e.pts,e.dts,"")),c.key=!0,c.frame=!0;break;case 6:r=!0,(n=new a.default(o.discardEPB(t.data))).readUByte();for(var f=0,m=0,g=!1,v=0;!g&&n.bytesAvailable>1;){f=0;do{f+=v=n.readUByte()}while(255===v);m=0;do{m+=v=n.readUByte()}while(255===v);if(4===f&&0!==n.bytesAvailable){if(g=!0,181===n.readUByte()&&49===n.readUShort()&&1195456820===n.readUInt()&&3===n.readUByte()){var y=n.readUByte(),_=31&y,b=[y,n.readUByte()];for(i=0;i<_;i++)b.push(n.readUByte()),b.push(n.readUByte()),b.push(n.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:e.pts,bytes:b})}}else if(m<n.bytesAvailable)for(i=0;i<m;i++)n.readUByte()}break;case 7:if(r=!0,u=!0,!s.sps){var x=(n=new a.default(t.data)).readSPS();s.width=x.width,s.height=x.height,s.pixelRatio=x.pixelRatio,s.sps=[t.data],s.duration=o._duration;var S=t.data.subarray(1,4),w="avc1.";for(i=0;i<3;i++){var E=S[i].toString(16);E.length<2&&(E="0"+E),w+=E}s.codec=w}break;case 8:r=!0,s.pps||(s.pps=[t.data]);break;case 9:r=!1,s.audFound=!0,c&&h(c,s),c=o.avcSample=d(!1,e.pts,e.dts,"");break;case 12:r=!1;break;default:r=!1,c&&(c.debug+="unknown NAL "+t.type+" ")}c&&r&&c.units.push(t)})),t&&c&&(h(c,s),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;r>=0;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var n=this._avcTrack.samples;t=n[n.length-1]}if(t){var r=t.units;e=r[r.length-1]}return e},e.prototype._parseAVCNALu=function(e){var t,n,r,i,o=0,a=e.byteLength,s=this._avcTrack,l=s.naluState||0,c=l,u=[],h=-1;for(-1===l&&(h=0,i=31&e[0],l=0,o=1);o<a;)if(t=e[o++],l)if(1!==l)if(t)if(1===t){var d,p;h>=0?(r={data:e.subarray(h,o-l-1),type:i},u.push(r)):(d=this._getLastNalUnit())&&(c&&o<=4-c&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-c)),(n=o-l-1)>0&&((p=new Uint8Array(d.data.byteLength+n)).set(d.data,0),p.set(e.subarray(0,n),d.data.byteLength),d.data=p)),o<a?(h=o,i=31&e[o],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;return h>=0&&l>=0&&(r={data:e.subarray(h,a),type:i,state:l},u.push(r)),0===u.length&&(d=this._getLastNalUnit())&&((p=new Uint8Array(d.data.byteLength+e.byteLength)).set(d.data,0),p.set(e,d.data.byteLength),d.data=p),s.naluState=l,u},e.prototype.discardEPB=function(e){for(var t,n,r=e.byteLength,i=[],o=1;o<r-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===i[0]&&(a++,i.shift()),n[o]=e[a];return n},e.prototype._parseAACPES=function(e){var t,n,i,a,s,u=this._audioTrack,h=e.data,d=e.pts,p=this.aacOverFlow,f=this.aacLastPTS;if(p){var m=new Uint8Array(p.byteLength+h.byteLength);m.set(p,0),m.set(h,p.byteLength),h=m}for(i=0,s=h.length;i<s-1&&!r.isHeader(h,i);i++);if(i){var g=void 0,v=void 0;if(i<s-1?(g="AAC PES did not start with ADTS header,offset:"+i,v=!1):(g="no ADTS header found in AAC PES",v=!0),l.logger.warn("parsing error:"+g),this.observer.trigger(o.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.FRAG_PARSING_ERROR,fatal:v,reason:g}),v)return}if(r.initTrackConfig(u,this.observer,h,i,this.audioCodec),n=0,t=r.getFrameDuration(u.samplerate),p&&f){var y=f+t;Math.abs(y-d)>1&&(l.logger.log("AAC: align PTS for overlapping frames by "+Math.round((y-d)/90)),d=y)}for(;i<s;)if(r.isHeader(h,i)&&i+5<s){var _=r.appendFrame(u,h,i,d,n);if(!_)break;i+=_.length,a=_.sample.pts,n++}else i++;p=i<s?h.subarray(i,s):null,this.aacOverFlow=p,this.aacLastPTS=a},e.prototype._parseMPEGPES=function(e){for(var t=e.data,n=t.length,r=0,o=0,a=e.pts;o<n;)if(i.default.isHeader(t,o)){var s=i.default.appendFrame(this._audioTrack,t,o,a,r);if(!s)break;o+=s.length,r++}else o++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}();t.default=h},"./src/empty.js":function(e,t){e.exports=void 0},"./src/errors.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},t.ErrorDetails={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},"./src/event-handler.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js"),i=n("./src/errors.js"),o=n("./src/events.js"),a={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},s=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.hls=e,this.onEvent=this.onEvent.bind(this),this.handledEvents=t,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.prototype.onHandlerDestroying=function(){},e.prototype.onHandlerDestroyed=function(){},e.prototype.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(a[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){try{(function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)}).call(this,e,t).call()}catch(t){r.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(o.default.ERROR,{type:i.ErrorTypes.OTHER_ERROR,details:i.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();t.default=s},"./src/events.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},"./src/hls.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/url-toolkit/src/url-toolkit.js"),a=n("./src/errors.js"),s=n("./src/loader/playlist-loader.js"),l=n("./src/loader/fragment-loader.js"),c=n("./src/loader/key-loader.js"),u=n("./src/controller/fragment-tracker.js"),h=n("./src/controller/stream-controller.js"),d=n("./src/controller/level-controller.js"),p=n("./src/controller/id3-track-controller.js"),f=n("./src/is-supported.js"),m=n("./src/utils/logger.js"),g=n("./src/config.js"),v=n("./src/events.js"),y=function(e){function t(n){void 0===n&&(n={});var r=e.call(this)||this,i=t.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var o in i)o in n||(n[o]=i[o]);if(void 0!==n.liveMaxLatencyDurationCount&&n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(n.liveMaxLatencyDuration<=n.liveSyncDuration||void 0===n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');m.enableLogs(n.debug),r.config=n,r._autoLevelCapping=-1;var a=r.abrController=new n.abrController(r),f=new n.bufferController(r),g=new n.capLevelController(r),v=new n.fpsController(r),y=new s.default(r),_=new l.default(r),b=new c.default(r),x=new p.default(r),S=r.levelController=new d.default(r),w=new u.FragmentTracker(r),E=[S,r.streamController=new h.default(r,w)],T=n.audioStreamController;T&&E.push(new T(r,w)),r.networkControllers=E;var M=[y,_,b,a,f,g,v,x,w];if(T=n.audioTrackController){var C=new T(r);r.audioTrackController=C,M.push(C)}if(T=n.subtitleTrackController){var $=new T(r);r.subtitleTrackController=$,E.push($)}if(T=n.emeController){var O=new T(r);r.emeController=O,M.push(O)}return(T=n.subtitleStreamController)&&E.push(new T(r,w)),(T=n.timelineController)&&M.push(new T(r)),r.coreComponents=M,r}return i(t,e),Object.defineProperty(t,"version",{get:function(){return"0.12.4"},enumerable:!0,configurable:!0}),t.isSupported=function(){return f.isSupported()},Object.defineProperty(t,"Events",{get:function(){return v.default},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorTypes",{get:function(){return a.ErrorTypes},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorDetails",{get:function(){return a.ErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DefaultConfig",{get:function(){return t.defaultConfig?t.defaultConfig:g.hlsDefaultConfig},set:function(e){t.defaultConfig=e},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){m.logger.log("destroy"),this.trigger(v.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(e){m.logger.log("attachMedia"),this.media=e,this.trigger(v.default.MEDIA_ATTACHING,{media:e})},t.prototype.detachMedia=function(){m.logger.log("detachMedia"),this.trigger(v.default.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(e){e=o.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),m.logger.log("loadSource:"+e),this.url=e,this.trigger(v.default.MANIFEST_LOADING,{url:e})},t.prototype.startLoad=function(e){void 0===e&&(e=-1),m.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},t.prototype.stopLoad=function(){m.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},t.prototype.swapAudioCodec=function(){m.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){m.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},Object.defineProperty(t.prototype,"levels",{get:function(){return this.levelController.levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLevel",{get:function(){return this.streamController.currentLevel},set:function(e){m.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLevel",{get:function(){return this.streamController.nextLevel},set:function(e){m.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loadLevel",{get:function(){return this.levelController.level},set:function(e){m.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){m.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){return this.levelController.startLevel},set:function(e){m.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelCapping",{get:function(){return this._autoLevelCapping},set:function(e){m.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelEnabled",{get:function(){return-1===this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minAutoLevel",{get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,n=e?e.length:0,r=0;r<n;r++)if((e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate)>t)return r;return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxAutoLevel",{get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextAutoLevel",{get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTracks",{get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"liveSyncPosition",{get:function(){return this.streamController.liveSyncPosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTracks",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTrack",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleDisplay",{get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)},enumerable:!0,configurable:!0}),t}(n("./src/observer.js").Observer);t.default=y},"./src/is-supported.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/mediasource-helper.js");t.isSupported=function(){var e=r.getMediaSource(),t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!i}},"./src/loader/fragment-loader.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/errors.js"),l=n("./src/utils/logger.js"),c=function(t){function n(e){var n=t.call(this,e,o.default.FRAG_LOADING)||this;return n.loaders={},n}return i(n,t),n.prototype.destroy=function(){var e=this.loaders;for(var n in e){var r=e[n];r&&r.destroy()}this.loaders={},t.prototype.destroy.call(this)},n.prototype.onFragLoading=function(t){var n=t.frag,r=n.type,i=this.loaders,o=this.hls.config,a=o.fLoader,s=o.loader;n.loaded=0;var c,u,h,d=i[r];d&&(l.logger.warn("abort previous fragment loader for type: "+r),d.abort()),d=i[r]=n.loader=o.fLoader?new a(o):new s(o),c={url:n.url,frag:n,responseType:"arraybuffer",progressData:!1};var p=n.byteRangeStartOffset,f=n.byteRangeEndOffset;e.isFinite(p)&&e.isFinite(f)&&(c.rangeStart=p,c.rangeEnd=f),u={timeout:o.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:o.fragLoadingMaxRetryTimeout},h={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},d.load(c,u,h)},n.prototype.loadsuccess=function(e,t,n,r){void 0===r&&(r=null);var i=e.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(o.default.FRAG_LOADED,{payload:i,frag:a,stats:t,networkDetails:r})},n.prototype.loaderror=function(e,t,n){void 0===n&&(n=null);var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})},n.prototype.loadtimeout=function(e,t,n){void 0===n&&(n=null);var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})},n.prototype.loadprogress=function(e,t,n,r){void 0===r&&(r=null);var i=t.frag;i.loaded=e.loaded,this.hls.trigger(o.default.FRAG_LOAD_PROGRESS,{frag:i,stats:e,networkDetails:r})},n}(a.default);t.default=c}).call(this,n("./src/polyfills/number.js").Number)},"./src/loader/fragment.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/url-toolkit/src/url-toolkit.js"),i=n("./src/loader/level-key.js"),o=function(){function t(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=((e={})[t.ElementaryStreamTypes.AUDIO]=!1,e[t.ElementaryStreamTypes.VIDEO]=!1,e)}return Object.defineProperty(t,"ElementaryStreamTypes",{get:function(){return{AUDIO:"audio",VIDEO:"video"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return!this._url&&this.relurl&&(this._url=r.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRange",{get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var e=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var n=this.lastByteRangeEndOffset;e[0]=n||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0],this._byteRange=e}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeStartOffset",{get:function(){return this.byteRange[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeEndOffset",{get:function(){return this.byteRange[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decryptdata",{get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endProgramDateTime",{get:function(){if(!e.isFinite(this.programDateTime))return null;var t=e.isFinite(this.duration)?this.duration:0;return this.programDateTime+1e3*t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"encrypted",{get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)},enumerable:!0,configurable:!0}),t.prototype.addElementaryStream=function(e){this._elementaryStreams[e]=!0},t.prototype.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},t.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},t.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&((n=new i.default).method=e.method,n.baseuri=e.baseuri,n.reluri=e.reluri,n.iv=this.createInitializationVector(t)),n},t}();t.default=o}).call(this,n("./src/polyfills/number.js").Number)},"./src/loader/key-loader.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/errors.js"),l=n("./src/utils/logger.js"),c=function(e){function t(t){var n=e.call(this,t,o.default.KEY_LOADING)||this;return n.loaders={},n.decryptkey=null,n.decrypturl=null,n}return i(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},a.default.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,n=t.type,r=this.loaders[n],i=t.decryptdata,a=i.uri;if(a!==this.decrypturl||null===this.decryptkey){var s,c,u,h=this.hls.config;r&&(l.logger.warn("abort previous key loader for type:"+n),r.abort()),t.loader=this.loaders[n]=new h.loader(h),this.decrypturl=a,this.decryptkey=null,s={url:a,frag:t,responseType:"arraybuffer"},c={timeout:h.fragLoadingTimeOut,maxRetry:0,retryDelay:h.fragLoadingRetryDelay,maxRetryDelay:h.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(s,c,u)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(o.default.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,n){var r=n.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(o.default.KEY_LOADED,{frag:r})},t.prototype.loaderror=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},t.prototype.loadtimeout=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},t}(a.default);t.default=c},"./src/loader/level-key.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/url-toolkit/src/url-toolkit.js"),i=function(){function e(){this.method=null,this.key=null,this.iv=null,this._uri=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return!this._uri&&this.reluri&&(this._uri=r.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri},enumerable:!0,configurable:!0}),e}();t.default=i},"./src/loader/level.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return Object.defineProperty(t.prototype,"hasProgramDateTime",{get:function(){return!(!this.fragments[0]||!e.isFinite(this.fragments[0].programDateTime))},enumerable:!0,configurable:!0}),t}();t.default=n}).call(this,n("./src/polyfills/number.js").Number)},"./src/loader/m3u8-parser.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/url-toolkit/src/url-toolkit.js"),i=n("./src/loader/fragment.js"),o=n("./src/loader/level.js"),a=n("./src/loader/level-key.js"),s=n("./src/utils/attr-list.js"),l=n("./src/utils/logger.js"),c=n("./src/utils/codecs.js"),u=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,h=/#EXT-X-MEDIA:(.*)/g,d=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),p=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,f=/\.(mp4|m4s|m4v|m4a)$/i,m=function(){function t(){}return t.findGroup=function(e,t){if(!e)return null;for(var n=null,r=0;r<e.length;r++){var i=e[r];i.id===t&&(n=i)}return n},t.convertAVC1ToAVCOTI=function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t},t.resolve=function(e,t){return r.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,n){var r,i=[];function o(e,t){["video","audio"].forEach((function(n){var r=e.filter((function(e){return c.isCodecType(e,n)}));if(r.length){var i=r.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[n+"Codec"]=i.length>0?i[0]:r[0],e=e.filter((function(e){return-1===r.indexOf(e)}))}})),t.unknownCodecs=e}for(u.lastIndex=0;null!=(r=u.exec(e));){var a={},l=a.attrs=new s.default(r[1]);a.url=t.resolve(r[2],n);var h=l.decimalResolution("RESOLUTION");h&&(a.width=h.width,a.height=h.height),a.bitrate=l.decimalInteger("AVERAGE-BANDWIDTH")||l.decimalInteger("BANDWIDTH"),a.name=l.NAME,o([].concat((l.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=t.convertAVC1ToAVCOTI(a.videoCodec)),i.push(a)}return i},t.parseMasterPlaylistMedia=function(e,n,r,i){var o;void 0===i&&(i=[]);var a=[],l=0;for(h.lastIndex=0;null!==(o=h.exec(e));){var c={},u=new s.default(o[1]);if(u.TYPE===r){if(c.groupId=u["GROUP-ID"],c.name=u.NAME,c.type=r,c.default="YES"===u.DEFAULT,c.autoselect="YES"===u.AUTOSELECT,c.forced="YES"===u.FORCED,u.URI&&(c.url=t.resolve(u.URI,n)),c.lang=u.LANGUAGE,c.name||(c.name=c.lang),i.length){var d=t.findGroup(i,c.groupId);c.audioCodec=d?d.codec:i[0].codec}c.id=l++,a.push(c)}}return a},t.parseLevelPlaylist=function(t,n,r,c,u){var h,m,v=0,y=0,_=new o.default(n),b=new a.default,x=0,S=null,w=new i.default,E=null;for(d.lastIndex=0;null!==(h=d.exec(t));){var T=h[1];if(T){w.duration=parseFloat(T);var M=(" "+h[2]).slice(1);w.title=M||null,w.tagList.push(M?["INF",T,M]:["INF",T])}else if(h[3]){if(e.isFinite(w.duration)){var C=v++;w.type=c,w.start=y,w.levelkey=b,w.sn=C,w.level=r,w.cc=x,w.urlId=u,w.baseurl=n,w.relurl=(" "+h[3]).slice(1),g(w,S),_.fragments.push(w),S=w,y+=w.duration,w=new i.default}}else if(h[4]){if(w.rawByteRange=(" "+h[4]).slice(1),S){var $=S.byteRangeEndOffset;$&&(w.lastByteRangeEndOffset=$)}}else if(h[5])w.rawProgramDateTime=(" "+h[5]).slice(1),w.tagList.push(["PROGRAM-DATE-TIME",w.rawProgramDateTime]),null===E&&(E=_.fragments.length);else{for(h=h[0].match(p),m=1;m<h.length&&void 0===h[m];m++);var O=(" "+h[m+1]).slice(1),A=(" "+h[m+2]).slice(1);switch(h[m]){case"#":w.tagList.push(A?[O,A]:[O]);break;case"PLAYLIST-TYPE":_.type=O.toUpperCase();break;case"MEDIA-SEQUENCE":v=_.startSN=parseInt(O);break;case"TARGETDURATION":_.targetduration=parseFloat(O);break;case"VERSION":_.version=parseInt(O);break;case"EXTM3U":break;case"ENDLIST":_.live=!1;break;case"DIS":x++,w.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":x=parseInt(O);break;case"KEY":var I=O,P=new s.default(I),L=P.enumeratedString("METHOD"),k=P.URI,R=P.hexadecimalInteger("IV");L&&(b=new a.default,k&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(L)>=0&&(b.method=L,b.baseuri=n,b.reluri=k,b.key=null,b.iv=R));break;case"START":var D=O,j=new s.default(D).decimalFloatingPoint("TIME-OFFSET");e.isFinite(j)&&(_.startTimeOffset=j);break;case"MAP":var N=new s.default(O);w.relurl=N.URI,w.rawByteRange=N.BYTERANGE,w.baseurl=n,w.level=r,w.type=c,w.sn="initSegment",_.initSegment=w,(w=new i.default).rawProgramDateTime=_.initSegment.rawProgramDateTime;break;default:l.logger.warn("line parsed but not handled: "+h)}}}return(w=S)&&!w.relurl&&(_.fragments.pop(),y-=w.duration),_.totalduration=y,_.averagetargetduration=y/_.fragments.length,_.endSN=v-1,_.startCC=_.fragments[0]?_.fragments[0].cc:0,_.endCC=x,!_.initSegment&&_.fragments.length&&_.fragments.every((function(e){return f.test(e.relurl)}))&&(l.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(w=new i.default).relurl=_.fragments[0].relurl,w.baseurl=n,w.level=r,w.type=c,w.sn="initSegment",_.initSegment=w,_.needSidxRanges=!0),E&&function(e,t){for(var n=e[t],r=t-1;r>=0;r--){var i=e[r];i.programDateTime=n.programDateTime-1e3*i.duration,n=i}}(_.fragments,E),_},t}();function g(t,n){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):n&&n.programDateTime&&(t.programDateTime=n.endProgramDateTime),e.isFinite(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}t.default=m}).call(this,n("./src/polyfills/number.js").Number)},"./src/loader/playlist-loader.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/errors.js"),l=n("./src/utils/logger.js"),c=n("./src/demux/mp4demuxer.js"),u=n("./src/loader/m3u8-parser.js"),h=window.performance,d={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},p={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},f=function(t){function n(e){var n=t.call(this,e,o.default.MANIFEST_LOADING,o.default.LEVEL_LOADING,o.default.AUDIO_TRACK_LOADING,o.default.SUBTITLE_TRACK_LOADING)||this;return n.loaders={},n}return i(n,t),Object.defineProperty(n,"ContextType",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(n,"LevelType",{get:function(){return p},enumerable:!0,configurable:!0}),n.canHaveQualityLevels=function(e){return e!==d.AUDIO_TRACK&&e!==d.SUBTITLE_TRACK},n.mapContextToLevelType=function(e){switch(e.type){case d.AUDIO_TRACK:return p.AUDIO;case d.SUBTITLE_TRACK:return p.SUBTITLE;default:return p.MAIN}},n.getResponseUrl=function(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n},n.prototype.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return e.loader=i,this.loaders[e.type]=i,i},n.prototype.getInternalLoader=function(e){return this.loaders[e.type]},n.prototype.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},n.prototype.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},n.prototype.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},n.prototype.onManifestLoading=function(e){this.load(e.url,{type:d.MANIFEST,level:0,id:null})},n.prototype.onLevelLoading=function(e){this.load(e.url,{type:d.LEVEL,level:e.level,id:e.id})},n.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:d.AUDIO_TRACK,level:null,id:e.id})},n.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:d.SUBTITLE_TRACK,level:null,id:e.id})},n.prototype.load=function(e,t){var n=this.hls.config;l.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var r,i,o,a,s=this.getInternalLoader(t);if(s){var c=s.context;if(c&&c.url===e)return l.logger.trace("playlist request ongoing"),!1;l.logger.warn("aborting previous loader for type: "+t.type),s.abort()}switch(t.type){case d.MANIFEST:r=n.manifestLoadingMaxRetry,i=n.manifestLoadingTimeOut,o=n.manifestLoadingRetryDelay,a=n.manifestLoadingMaxRetryTimeout;break;case d.LEVEL:r=0,i=n.levelLoadingTimeOut;break;default:r=n.levelLoadingMaxRetry,i=n.levelLoadingTimeOut,o=n.levelLoadingRetryDelay,a=n.levelLoadingMaxRetryTimeout}s=this.createInternalLoader(t),t.url=e,t.responseType=t.responseType||"";var u={timeout:i,maxRetry:r,retryDelay:o,maxRetryDelay:a},h={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return l.logger.debug("Calling internal loader delegate for URL: "+e),s.load(t,u,h),!0},n.prototype.loadsuccess=function(e,t,n,r){if(void 0===r&&(r=null),n.isSidxRequest)return this._handleSidxRequest(e,n),void this._handlePlaylistLoaded(e,t,n,r);this.resetInternalLoader(n.type);var i=e.data;t.tload=h.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,n,r):this._handleMasterPlaylist(e,t,n,r):this._handleManifestParsingError(e,n,"no EXTM3U delimiter",r)},n.prototype.loaderror=function(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!1,e)},n.prototype.loadtimeout=function(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!0)},n.prototype._handleMasterPlaylist=function(e,t,r,i){var a=this.hls,s=e.data,c=n.getResponseUrl(e,r),h=u.default.parseMasterPlaylist(s,c);if(h.length){var d=h.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),p=u.default.parseMasterPlaylistMedia(s,c,"AUDIO",d),f=u.default.parseMasterPlaylistMedia(s,c,"SUBTITLES");if(p.length){var m=!1;p.forEach((function(e){e.url||(m=!0)})),!1===m&&h[0].audioCodec&&!h[0].attrs.AUDIO&&(l.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main"}))}a.trigger(o.default.MANIFEST_LOADED,{levels:h,audioTracks:p,subtitles:f,url:c,stats:t,networkDetails:i})}else this._handleManifestParsingError(e,r,"no level found in manifest",i)},n.prototype._handleTrackOrLevelPlaylist=function(t,r,i,a){var s=this.hls,l=i.id,c=i.level,p=i.type,f=n.getResponseUrl(t,i),m=e.isFinite(l)?l:0,g=e.isFinite(c)?c:m,v=n.mapContextToLevelType(i),y=u.default.parseLevelPlaylist(t.data,f,g,v,m);if(y.tload=r.tload,p===d.MANIFEST){var _={url:f,details:y};s.trigger(o.default.MANIFEST_LOADED,{levels:[_],audioTracks:[],url:f,stats:r,networkDetails:a})}if(r.tparsed=h.now(),y.needSidxRanges){var b=y.initSegment.url;this.load(b,{isSidxRequest:!0,type:p,level:c,levelDetails:y,id:l,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else i.levelDetails=y,this._handlePlaylistLoaded(t,r,i,a)},n.prototype._handleSidxRequest=function(e,t){var n=c.default.parseSegmentIndex(new Uint8Array(e.data));if(n){var r=n.references,i=t.levelDetails;r.forEach((function(e,t){var n=e.info,r=i.fragments[t];0===r.byteRange.length&&(r.rawByteRange=String(1+n.end-n.start)+"@"+String(n.start))})),i.initSegment.rawByteRange=String(n.moovEndOffset)+"@0"}},n.prototype._handleManifestParsingError=function(e,t,n,r){this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:n,networkDetails:r})},n.prototype._handleNetworkError=function(e,t,n,r){var i,a;void 0===n&&(n=!1),void 0===r&&(r=null),l.logger.info("A network error occured while loading a "+e.type+"-type playlist");var c=this.getInternalLoader(e);switch(e.type){case d.MANIFEST:i=n?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,a=!0;break;case d.LEVEL:i=n?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,a=!1;break;case d.AUDIO_TRACK:i=n?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,a=!1;break;default:a=!1}c&&(c.abort(),this.resetInternalLoader(e.type));var u={type:s.ErrorTypes.NETWORK_ERROR,details:i,fatal:a,url:c.url,loader:c,context:e,networkDetails:t};r&&(u.response=r),this.hls.trigger(o.default.ERROR,u)},n.prototype._handlePlaylistLoaded=function(e,t,r,i){var a=r.type,s=r.level,l=r.id,c=r.levelDetails;if(c.targetduration)if(n.canHaveQualityLevels(r.type))this.hls.trigger(o.default.LEVEL_LOADED,{details:c,level:s||0,id:l||0,stats:t,networkDetails:i});else switch(a){case d.AUDIO_TRACK:this.hls.trigger(o.default.AUDIO_TRACK_LOADED,{details:c,id:l,stats:t,networkDetails:i});break;case d.SUBTITLE_TRACK:this.hls.trigger(o.default.SUBTITLE_TRACK_LOADED,{details:c,id:l,stats:t,networkDetails:i})}else this._handleManifestParsingError(e,r,"invalid target duration",i)},n}(a.default);t.default=f}).call(this,n("./src/polyfills/number.js").Number)},"./src/observer.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.emit.apply(this,[e,e].concat(t))},t}(n("./node_modules/eventemitter3/index.js").EventEmitter);t.Observer=o},"./src/polyfills/number.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/get-self-scope.js").getSelfScope().Number;t.Number=r,r.isFinite=r.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},"./src/remux/aac-helper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();t.default=r},"./src/remux/mp4-generator.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Math.pow(2,32)-1,i=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=o,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,a,l,a,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,o=i;i--;)r+=n[i].byteLength;for((t=new Uint8Array(r))[0]=r>>24&255,t[1]=r>>16&255,t[2]=r>>8&255,t[3]=255&r,t.set(e,4),i=0,r=8;i<o;i++)t.set(n[i],r),r+=n[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var i=Math.floor(n/(r+1)),o=Math.floor(n%(r+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,n))},e.moov=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))},e.mvhd=function(t,n){n*=t;var i=Math.floor(n/(r+1)),o=Math.floor(n%(r+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var n,r,i=t.samples||[],o=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,o[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,o)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,r,i,o=[],a=[];for(n=0;n<t.sps.length;n++)i=(r=t.sps[n]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));for(n=0;n<t.pps.length;n++)i=(r=t.pps[n]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));var s=e.box(e.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|t.sps.length].concat(o).concat([t.pps.length]).concat(a))),l=t.width,c=t.height,u=t.pixelRatio[0],h=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,h>>24,h>>16&255,h>>8&255,255&h])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,i=t.duration*t.timescale,o=t.width,a=t.height,s=Math.floor(i/(r+1)),l=Math.floor(i%(r+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,n){var i=e.sdtp(t),o=t.id,a=Math.floor(n/(r+1)),s=Math.floor(n%(r+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var r,i,o,a,s,l,c=t.samples||[],u=c.length,h=12+16*u,d=new Uint8Array(h);for(n+=8+h,d.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<u;r++)o=(i=c[r]).duration,a=i.size,s=i.flags,l=i.cts,d.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*r);return e.box(e.types.trun,d)},e.initSegment=function(t){e.types||e.init();var n,r=e.moov(t);return(n=new Uint8Array(e.FTYP.byteLength+r.byteLength)).set(e.FTYP),n.set(r,e.FTYP.byteLength),n},e}();t.default=i},"./src/remux/mp4-remuxer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/remux/aac-helper.js"),i=n("./src/remux/mp4-generator.js"),o=n("./src/events.js"),a=n("./src/errors.js"),s=n("./src/utils/logger.js"),l=function(){function e(e,t,n,r){this.observer=e,this.config=t,this.typeSupported=n;var i=navigator.userAgent;this.isSafari=r&&r.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,n,r,i,a,l){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated){var c=e.samples.length,u=t.samples.length,h=i,d=i;if(c&&u){var p=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;h+=Math.max(0,p),d+=Math.max(0,-p)}if(c){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var f=this.remuxAudio(e,h,a,l);if(u){var m=void 0;f&&(m=f.endPTS-f.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,d,a,m,l)}}else if(u){var g=this.remuxVideo(t,d,a,0,l);g&&e.codec&&this.remuxEmptyAudio(e,h,a,g)}}n.samples.length&&this.remuxID3(n,i),r.samples.length&&this.remuxText(r,i),this.observer.trigger(o.default.FRAG_PARSED)},e.prototype.generateIS=function(e,t,n){var r,l,c=this.observer,u=e.samples,h=t.samples,d=this.typeSupported,p="audio/mp4",f={},m={tracks:f},g=void 0===this._initPTS;if(g&&(r=l=1/0),e.config&&u.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(d.mpeg?(p="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3")),f.audio={container:p,codec:e.codec,initSegment:!e.isAAC&&d.mpeg?new Uint8Array:i.default.initSegment([e]),metadata:{channelCount:e.channelCount}},g&&(r=l=u[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&h.length){var v=t.inputTimeScale;t.timescale=v,f.video={container:"video/mp4",codec:t.codec,initSegment:i.default.initSegment([t]),metadata:{width:t.width,height:t.height}},g&&(r=Math.min(r,h[0].pts-v*n),l=Math.min(l,h[0].dts-v*n),this.observer.trigger(o.default.INIT_PTS_FOUND,{initPTS:r}))}Object.keys(f).length?(c.trigger(o.default.FRAG_PARSING_INIT_SEGMENT,m),this.ISGenerated=!0,g&&(this._initPTS=r,this._initDTS=l)):c.trigger(o.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,n,r,l){var c,u,h,d,p,f,m,g=8,v=e.timescale,y=e.samples,_=[],b=y.length,x=this._PTSNormalize,S=this._initPTS,w=this.nextAvcDts,E=this.isSafari;if(0!==b){E&&(n|=y.length&&w&&(l&&Math.abs(t-w/v)<.1||Math.abs(y[0].pts-w-S)<v/5)),n||(w=t*v),y.forEach((function(e){e.pts=x(e.pts-S,w),e.dts=x(e.dts-S,w)})),y.sort((function(e,t){var n=e.dts-t.dts,r=e.pts-t.pts;return n||r||e.id-t.id}));var T=y.reduce((function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)}),0);if(T<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(T/90)+" ms to overcome this issue");for(var M=0;M<y.length;M++)y[M].dts+=T}var C=y[0];p=Math.max(C.dts,0),d=Math.max(C.pts,0);var $=Math.round((p-w)/90);n&&$&&($>1?s.logger.log("AVC:"+$+" ms hole between fragments detected,filling it"):$<-1&&s.logger.log("AVC:"+-$+" ms overlapping between fragments detected"),p=w,y[0].dts=p,d=Math.max(d-$,w),y[0].pts=d,s.logger.log("Video/PTS/DTS adjusted: "+Math.round(d/90)+"/"+Math.round(p/90)+",delta:"+$+" ms")),C=y[y.length-1],m=Math.max(C.dts,0),f=Math.max(C.pts,0,m),E&&(c=Math.round((m-p)/(y.length-1)));var O=0,A=0;for(M=0;M<b;M++){for(var I=y[M],P=I.units,L=P.length,k=0,R=0;R<L;R++)k+=P[R].data.length;A+=k,O+=L,I.length=k,I.dts=E?p+M*c:Math.max(I.dts,p),I.pts=Math.max(I.pts,I.dts)}var D=A+4*O+8;try{u=new Uint8Array(D)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:D,reason:"fail allocating video mdat "+D})}var j=new DataView(u.buffer);for(j.setUint32(0,D),u.set(i.default.types.mdat,4),M=0;M<b;M++){var N=y[M],F=N.units,U=0,B=void 0;for(R=0,L=F.length;R<L;R++){var z=F[R],V=z.data,G=z.data.byteLength;j.setUint32(g,G),g+=4,u.set(V,g),g+=G,U+=4+G}if(E)B=Math.max(0,c*Math.round((N.pts-N.dts)/c));else{if(M<b-1)c=y[M+1].dts-N.dts;else{var H=this.config,W=N.dts-y[M>0?M-1:M].dts;if(H.stretchShortVideoTrack){var q=H.maxBufferHole,J=Math.floor(q*v),Y=(r?d+r*v:this.nextAudioPts)-N.pts;Y>J?((c=Y-W)<0&&(c=W),s.logger.log("It is approximately "+Y/90+" ms to the next segment; using duration "+c/90+" ms for the last video frame.")):c=W}else c=W}B=Math.round(N.pts-N.dts)}_.push({size:U,duration:c,cts:B,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:N.key?2:1,isNonSync:N.key?0:1}})}this.nextAvcDts=m+c;var X=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,_.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var K=_[0].flags;K.dependsOn=2,K.isNonSync=0}e.samples=_,h=i.default.moof(e.sequenceNumber++,p,e),e.samples=[];var Z={data1:h,data2:u,startPTS:d/v,endPTS:(f+c)/v,startDTS:p/v,endDTS:this.nextAvcDts/v,type:"video",hasAudio:!1,hasVideo:!0,nb:_.length,dropped:X};return this.observer.trigger(o.default.FRAG_PARSING_DATA,Z),Z}},e.prototype.remuxAudio=function(e,t,n,l){var c,u,h,d,p,f,m,g=e.inputTimeScale,v=e.timescale,y=g/v,_=(e.isAAC?1024:1152)*y,b=this._PTSNormalize,x=this._initPTS,S=!e.isAAC&&this.typeSupported.mpeg,w=e.samples,E=[],T=this.nextAudioPts;if(n|=w.length&&T&&(l&&Math.abs(t-T/g)<.1||Math.abs(w[0].pts-T-x)<20*_),w.forEach((function(e){e.pts=e.dts=b(e.pts-x,t*g)})),0!==(w=w.filter((function(e){return e.pts>=0}))).length){if(n||(T=l?t*g:w[0].pts),e.isAAC)for(var M=this.config.maxAudioFramesDrift,C=0,$=T;C<w.length;){var O,A=w[C];O=(N=A.pts)-$;var I=Math.abs(1e3*O/g);if(O<=-M*_)s.logger.warn("Dropping 1 audio frame @ "+($/g).toFixed(3)+"s due to "+Math.round(I)+" ms overlap."),w.splice(C,1),e.len-=A.unit.length;else if(O>=M*_&&I<1e4&&$){var P=Math.round(O/_);s.logger.warn("Injecting "+P+" audio frame @ "+($/g).toFixed(3)+"s due to "+Math.round(1e3*O/g)+" ms gap.");for(var L=0;L<P;L++){var k=Math.max($,0);(h=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),h=A.unit.subarray()),w.splice(C,0,{unit:h,pts:k,dts:k}),e.len+=h.length,$+=_,C++}A.pts=A.dts=$,$+=_,C++}else Math.abs(O),A.pts=A.dts=$,$+=_,C++}L=0;for(var R=w.length;L<R;L++){var D=w[L],j=D.unit,N=D.pts;if(void 0!==m)u.duration=Math.round((N-m)/y);else{var F=Math.round(1e3*(N-T)/g),U=0;if(n&&e.isAAC&&F){if(F>0&&F<1e4)U=Math.round((N-T)/_),s.logger.log(F+" ms hole between AAC samples detected,filling it"),U>0&&((h=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(h=j.subarray()),e.len+=U*h.length);else if(F<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(T/g).toFixed(3)+"s/"+(N/g).toFixed(3)+"s/"+-F+"ms"),e.len-=j.byteLength;continue}N=T}if(f=N,!(e.len>0))return;var B=S?e.len:e.len+8;c=S?0:8;try{d=new Uint8Array(B)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:B,reason:"fail allocating audio mdat "+B})}for(S||(new DataView(d.buffer).setUint32(0,B),d.set(i.default.types.mdat,4)),C=0;C<U;C++)(h=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),h=j.subarray()),d.set(h,c),c+=h.byteLength,u={size:h.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(u)}d.set(j,c);var z=j.byteLength;c+=z,u={size:z,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},E.push(u),m=N}var V=0,G=E.length;if(G>=2&&(V=E[G-2].duration,u.duration=V),G){this.nextAudioPts=T=m+y*V,e.len=0,e.samples=E,p=S?new Uint8Array:i.default.moof(e.sequenceNumber++,f/y,e),e.samples=[];var H=f/g,W=T/g,q={data1:p,data2:d,startPTS:H,endPTS:W,startDTS:H,endDTS:W,type:"audio",hasAudio:!0,hasVideo:!1,nb:G};return this.observer.trigger(o.default.FRAG_PARSING_DATA,q),q}return null}},e.prototype.remuxEmptyAudio=function(e,t,n,i){var o=e.inputTimeScale,a=o/(e.samplerate?e.samplerate:o),l=this.nextAudioPts,c=(void 0!==l?l:i.startDTS*o)+this._initDTS,u=i.endDTS*o+this._initDTS,h=1024*a,d=Math.ceil((u-c)/h),p=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),p){for(var f=[],m=0;m<d;m++){var g=c+m*h;f.push({unit:p,pts:g,dts:g}),e.len+=p.length}e.samples=f,this.remuxAudio(e,t,n)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.prototype.remuxID3=function(e){var t,n=e.samples.length,r=e.inputTimeScale,i=this._initPTS,a=this._initDTS;if(n){for(var s=0;s<n;s++)(t=e.samples[s]).pts=(t.pts-i)/r,t.dts=(t.dts-a)/r;this.observer.trigger(o.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},e.prototype.remuxText=function(e){e.samples.sort((function(e,t){return e.pts-t.pts}));var t,n=e.samples.length,r=e.inputTimeScale,i=this._initPTS;if(n){for(var a=0;a<n;a++)(t=e.samples[a]).pts=(t.pts-i)/r;this.observer.trigger(o.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e.prototype._PTSNormalize=function(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e},e}();t.default=l},"./src/remux/passthrough-remuxer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/events.js"),i=function(){function e(e){this.observer=e}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,n,i,o,a,s,l){var c=this.observer,u="";e&&(u+="audio"),t&&(u+="video"),c.trigger(r.default.FRAG_PARSING_DATA,{data1:l,startPTS:o,startDTS:o,type:u,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),c.trigger(r.default.FRAG_PARSED)},e}();t.default=i},"./src/task-loop.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=e.apply(this,[t].concat(n))||this;return i._tickInterval=null,i._tickTimer=null,i._tickCallCount=0,i._boundTick=i.tick.bind(i),i}return i(t,e),t.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.prototype.hasInterval=function(){return!!this._tickInterval},t.prototype.hasNextTick=function(){return!!this._tickTimer},t.prototype.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,e),!0)},t.prototype.clearInterval=function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.prototype.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},t.prototype.doTick=function(){},t}(n("./src/event-handler.js").default);t.default=o},"./src/utils/attr-list.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=/^(\d+)x(\d+)$/,r=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,i=function(){function t(e){for(var n in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(n)&&(this[n]=e[n])}return t.prototype.decimalInteger=function(t){var n=parseInt(this[t],10);return n>e.MAX_SAFE_INTEGER?1/0:n},t.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var n=parseInt(this[t],16);return n>e.MAX_SAFE_INTEGER?1/0:n},t.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.prototype.enumeratedString=function(e){return this[e]},t.prototype.decimalResolution=function(e){var t=n.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},t.parseAttrList=function(e){var t,n={};for(r.lastIndex=0;null!==(t=r.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[t[1]]=i}return n},t}();t.default=i}).call(this,n("./src/polyfills/number.js").Number)},"./src/utils/binary-search.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={search:function(e,t){for(var n=0,r=e.length-1,i=null,o=null;n<=r;){var a=t(o=e[i=(n+r)/2|0]);if(a>0)n=i+1;else{if(!(a<0))return o;r=i-1}}return null}}},"./src/utils/buffer-helper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var n=e.buffered,r=0;r<n.length;r++)if(t>=n.start(r)&&t<=n.end(r))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,n){try{if(e){var r=e.buffered,i=[],o=void 0;for(o=0;o<r.length;o++)i.push({start:r.start(o),end:r.end(o)});return this.bufferedInfo(i,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,n){var r,i,o,a,s,l=[];for(e.sort((function(e,t){var n=e.start-t.start;return n||t.end-e.end})),s=0;s<e.length;s++){var c=l.length;if(c){var u=l[c-1].end;e[s].start-u<n?e[s].end>u&&(l[c-1].end=e[s].end):l.push(e[s])}else l.push(e[s])}for(s=0,r=0,i=o=t;s<l.length;s++){var h=l[s].start,d=l[s].end;if(t+n>=h&&t<d)i=h,r=(o=d)-t;else if(t+n<h){a=h;break}}return{len:r,start:i,end:o,nextStart:a}},e}();t.BufferHelper=r},"./src/utils/codecs.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};t.isCodecType=function(e,t){var n=r[t];return!!n&&!0===n[e.slice(0,4)]},t.isCodecSupportedInMp4=function(e,t){return window.MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}},"./src/utils/discontinuities.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/binary-search.js"),i=n("./src/utils/logger.js");function o(e,t){for(var n=null,r=0;r<e.length;r+=1){var i=e[r];if(i&&i.cc===t){n=i;break}}return n}function a(e,t,n){var r=!1;return t&&t.details&&n&&(n.endCC>n.startCC||e&&e.cc<n.startCC)&&(r=!0),r}function s(e,t){var n=e.fragments,r=t.fragments;if(r.length&&n.length){var a=o(n,r[0].cc);if(a&&(!a||a.startPTS))return a;i.logger.log("No frag in previous level to align on")}else i.logger.log("No fragments to align")}function l(e,t){t.fragments.forEach((function(t){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}})),t.PTSKnown=!0}function c(e,t,n){if(a(e,n,t)){var r=s(n.details,t);r&&(i.logger.log("Adjusting PTS using last level due to CC increase within current level"),l(r.start,t))}}function u(t,n){if(n&&n.fragments.length){if(!t.hasProgramDateTime||!n.hasProgramDateTime)return;var r=n.fragments[0].programDateTime,o=(t.fragments[0].programDateTime-r)/1e3+n.fragments[0].start;e.isFinite(o)&&(i.logger.log("adjusting PTS using programDateTime delta, sliding:"+o.toFixed(3)),l(o,t))}}t.findFirstFragWithCC=o,t.findFragWithCC=function(e,t){return r.default.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))},t.shouldAlignOnDiscontinuities=a,t.findDiscontinuousReferenceFrag=s,t.adjustPts=l,t.alignStream=function(e,t,n){c(e,n,t),!n.PTSKnown&&t&&u(n,t.details)},t.alignDiscontinuities=c,t.alignPDT=u}).call(this,n("./src/polyfills/number.js").Number)},"./src/utils/ewma-bandwidth-estimator.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/ewma.js"),i=function(){function e(e,t,n,i){this.hls=e,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new r.default(t),this.fast_=new r.default(n)}return e.prototype.sample=function(e,t){var n=8e3*t/(e=Math.max(e,this.minDelayMs_)),r=e/1e3;this.fast_.sample(r,n),this.slow_.sample(r,n)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}();t.default=i},"./src/utils/ewma.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}();t.default=r},"./src/utils/get-self-scope.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSelfScope=function(){return"undefined"==typeof window?self:window}},"./src/utils/logger.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/get-self-scope.js");function i(){}var o={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=o;function s(e,t){return t="["+e+"] > "+t}var l=r.getSelfScope();function c(e){var t=l.console[e];return t?function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];n[0]&&(n[0]=s(e,n[0])),t.apply(l.console,n)}:i}t.enableLogs=function(e){if(!0===e||"object"==typeof e){!function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];t.forEach((function(t){a[t]=e[t]?e[t].bind(e):c(t)}))}(e,"debug","log","info","warn","error");try{a.log()}catch(e){a=o}}else a=o},t.logger=a},"./src/utils/mediakeys-helper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;t.requestMediaKeySystemAccess=r},"./src/utils/mediasource-helper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaSource=function(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}},"./src/utils/texttrack-utils.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendAddTrackEvent=function(e,t){var n=null;try{n=new window.Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)},t.clearCurrentCues=function(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}},"./src/utils/time-ranges.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={toString:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}}},"./src/utils/xhr-loader.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js"),i=window.performance,o=window.XMLHttpRequest,a=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:i.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e,t=this.context;e=this.loader=new o;var n=this.stats;n.tfirst=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(e,t.url)}catch(n){e.open("GET",t.url,!0),r(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:e.status,text:n.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,n=t.readyState,o=this.stats,a=this.context,s=this.config;if(!o.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===o.tfirst&&(o.tfirst=Math.max(i.now(),o.trequest)),4===n){var l=t.status;if(l>=200&&l<300){o.tload=Math.max(o.tfirst,i.now());var c=void 0,u=void 0;u="arraybuffer"===a.responseType?(c=t.response).byteLength:(c=t.responseText).length,o.loaded=o.total=u;var h={url:t.responseURL,data:c};this.callbacks.onSuccess(h,o,a,t)}else o.retry>=s.maxRetry||l>=400&&l<499?(r.logger.error(l+" while loading "+a.url),this.callbacks.onError({code:l,text:t.statusText},a,t)):(r.logger.warn(l+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),o.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout)},e.prototype.loadtimeout=function(){r.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var r=this.callbacks.onProgress;r&&r(n,this.context,null,t)},e}();t.default=a}}).default},e.exports=r())},,function(e,t,n){e.exports=!n(229)&&!n(242)((function(){return 7!=Object.defineProperty(n(358)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(241),i=n(227).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(233),i=n(234),o=n(507)(!1),a=n(295)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(292);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(294),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){e.exports={default:n(509),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(511)),i=a(n(521)),o="function"==typeof i.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===o(r.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":o(e)}},function(e,t,n){"use strict";var r=n(513)(!0);n(365)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(263),i=n(226),o=n(366),a=n(239),s=n(250),l=n(514),c=n(303),u=n(367),h=n(220)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,f,m,g,v){l(n,t,f);var y,_,b,x=function(e){if(!d&&e in T)return T[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",w="values"==m,E=!1,T=e.prototype,M=T[h]||T["@@iterator"]||m&&T[m],C=M||x(m),$=m?w?x("entries"):C:void 0,O="Array"==t&&T.entries||M;if(O&&(b=u(O.call(new e)))!==Object.prototype&&b.next&&(c(b,S,!0),r||"function"==typeof b[h]||a(b,h,p)),w&&M&&"values"!==M.name&&(E=!0,C=function(){return M.call(this)}),r&&!v||!d&&!E&&T[h]||a(T,h,C),s[t]=C,s[S]=p,m)if(y={values:w?C:x("values"),keys:g?C:x("keys"),entries:$},v)for(_ in y)_ in T||o(T,_,y[_]);else i(i.P+i.F*(d||E),t,y);return y}},function(e,t,n){e.exports=n(239)},function(e,t,n){var r=n(233),i=n(249),o=n(295)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(359),i=n(297).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}},function(e,t,n){var r=n(226),i=n(216),o=n(242);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(38))},function(e,t,n){var r=n(563)();e.exports=r},function(e,t,n){var r=n(564),i=n(267),o=n(212),a=n(268),s=n(310),l=n(311),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&i(e),h=!n&&!u&&a(e),d=!n&&!u&&!h&&l(e),p=n||u||h||d,f=p?r(e.length,String):[],m=f.length;for(var g in e)!t&&!c.call(e,g)||p&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||f.push(g);return f}},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(236);e.exports=function(e){return"function"==typeof e?e:r}},function(e,t,n){var r=n(253),i=n(219),o=n(390),a=n(212);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var r=n(320),i=n(379),o=n(321);e.exports=function(e,t,n,a,s,l){var c=1&n,u=e.length,h=t.length;if(u!=h&&!(c&&h>u))return!1;var d=l.get(e);if(d&&l.get(t))return d==t;var p=-1,f=!0,m=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<u;){var g=e[p],v=t[p];if(a)var y=c?a(v,g,p,t,e,l):a(g,v,p,e,t,l);if(void 0!==y){if(y)continue;f=!1;break}if(m){if(!i(t,(function(e,t){if(!o(m,t)&&(g===e||s(g,e,n,a,l)))return m.push(t)}))){f=!1;break}}else if(g!==v&&!s(g,v,n,a,l)){f=!1;break}}return l.delete(e),l.delete(t),f}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t,n){var r=n(217).Uint8Array;e.exports=r},function(e,t,n){var r=n(382),i=n(324),o=n(244);e.exports=function(e){return r(e,o,i)}},function(e,t,n){var r=n(323),i=n(212);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(237)(n(217),"Set");e.exports=r},function(e,t,n){var r=n(214);e.exports=function(e){return e==e&&!r(e)}},function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},function(e,t,n){var r=n(389),i=n(276);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},function(e,t,n){var r=n(212),i=n(325),o=n(609),a=n(612);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},function(e,t,n){var r=n(255),i=n(235);e.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},function(e,t,n){var r=n(277),i=n(254),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];o.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(237),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,n){(function(e){var r=n(217),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(122)(e))},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(323),i=n(316),o=n(324),a=n(384),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a;e.exports=s},function(e,t,n){var r=n(326);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(636),i=n(316),o=n(314);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},function(e,t,n){var r=n(645),i=n(648)((function(e,t,n){r(e,t,n)}));e.exports=i},function(e,t,n){var r=n(277),i=n(254);e.exports=function(e,t,n){(void 0!==n&&!i(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},function(e,t,n){var r=n(235),i=n(218);e.exports=function(e){return i(e)&&r(e)}},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t,n){var r=n(404),i=n(214);e.exports=function(e,t,n){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:o,maxWait:t,trailing:a})}},function(e,t,n){var r=n(214),i=n(663),o=n(405),a=Math.max,s=Math.min;e.exports=function(e,t,n){var l,c,u,h,d,p,f=0,m=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=l,r=c;return l=c=void 0,f=t,h=e.apply(r,n)}function _(e){return f=e,d=setTimeout(x,t),m?y(e):h}function b(e){var n=e-p;return void 0===p||n>=t||n<0||g&&e-f>=u}function x(){var e=i();if(b(e))return S(e);d=setTimeout(x,function(e){var n=t-(e-p);return g?s(n,u-(e-f)):n}(e))}function S(e){return d=void 0,v&&l?y(e):(l=c=void 0,h)}function w(){var e=i(),n=b(e);if(l=arguments,c=this,p=e,n){if(void 0===d)return _(p);if(g)return clearTimeout(d),d=setTimeout(x,t),y(p)}return void 0===d&&(d=setTimeout(x,t)),h}return t=o(t)||0,r(n)&&(m=!!n.leading,u=(g="maxWait"in n)?a(o(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),w.cancel=function(){void 0!==d&&clearTimeout(d),f=0,l=p=c=d=void 0},w.flush=function(){return void 0===d?h:S(i())},w}},function(e,t,n){var r=n(214),i=n(245),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.red=t.getContrastingColor=t.isValidHex=t.toState=t.simpleCheckForValidColor=void 0;var r=o(n(666)),i=o(n(668));function o(e){return e&&e.__esModule?e:{default:e}}t.simpleCheckForValidColor=function(e){var t=0,n=0;return(0,r.default)(["r","g","b","a","h","s","l","v"],(function(r){if(e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)){/^\d+%$/.test(e[r])&&(n+=1)}})),t===n&&e};var a=t.toState=function(e,t){var n=e.hex?(0,i.default)(e.hex):(0,i.default)(e),r=n.toHsl(),o=n.toHsv(),a=n.toRgb(),s=n.toHex();return 0===r.s&&(r.h=t||0,o.h=t||0),{hsl:r,hex:"000000"===s&&0===a.a?"transparent":"#"+s,rgb:a,hsv:o,oldHue:e.h||t||r.h,source:e.source}};t.isValidHex=function(e){var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&(0,i.default)(e).isValid()},t.getContrastingColor=function(e){if(!e)return"#fff";var t=a(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},t.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}};t.default=t},function(e,t,n){var r=n(330),i=n(410);e.exports=n(247)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){e.exports=!n(247)&&!n(231)((function(){return 7!=Object.defineProperty(n(409)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(246),i=n(223).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(223),i=n(407),o=n(280),a=n(412)("src"),s=n(675),l=(""+s).split("toString");n(258).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(o(n,a)||i(n,a,e[t]?""+e[t]:l.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(258),i=n(223),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(676)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(677);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){var r=n(699),i=n(410),o=n(335),a=n(331),s=n(280),l=n(408),c=Object.getOwnPropertyDescriptor;t.f=n(247)?c:function(e,t){if(e=o(e),t=a(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(280),i=n(335),o=n(702)(!1),a=n(418)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(413)("keys"),i=n(412);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(334);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(246),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t,n){var r=n(219),i=n(723);e.exports=function(e,t){return e&&e.length?i(e,r(t,2)):[]}},function(e,t,n){var r=n(724);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},function(e,t){e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},function(e,t){e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},function(e,t,n){var r=n(340);e.exports=function(e){return r(e)&&e!=+e}},function(e,t,n){var r=n(323),i=n(729);e.exports=function e(t,n,o,a,s){var l=-1,c=t.length;for(o||(o=i),s||(s=[]);++l<c;){var u=t[l];n>0&&o(u)?n>1?e(u,n-1,o,a,s):r(s,u):a||(s[s.length]=u)}return s}},function(e,t){e.exports=function(e,t){return e>t}},function(e,t){e.exports=function(e,t){return e<t}},function(e,t,n){var r;!function(i){"use strict";var o,a={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},s=!0,l="[DecimalError] ",c=l+"Invalid argument: ",u=l+"Exponent out of range: ",h=Math.floor,d=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,f=1e7,m=h(1286742750677284.5),g={};function v(e,t){var n,r,i,o,a,l,c,u,h=e.constructor,d=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),s?C(t,d):t;if(c=e.d,u=t.d,a=e.e,i=t.e,c=c.slice(),o=a-i){for(o<0?(r=c,o=-o,l=u.length):(r=u,i=a,l=c.length),o>(l=(a=Math.ceil(d/7))>l?a+1:l+1)&&(o=l,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for((l=c.length)-(o=u.length)<0&&(o=l,r=u,u=c,c=r),n=0;o;)n=(c[--o]=c[o]+u[o]+n)/f|0,c[o]%=f;for(n&&(c.unshift(n),++i),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=i,s?C(t,d):t}function y(e,t,n){if(e!==~~e||e<t||e>n)throw Error(c+e)}function _(e){var t,n,r,i=e.length-1,o="",a=e[0];if(i>0){for(o+=a,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(o+=E(n)),o+=r;(n=7-(r=(a=e[t])+"").length)&&(o+=E(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}g.absoluteValue=g.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},g.comparedTo=g.cmp=function(e){var t,n,r,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(t=0,n=(r=o.d.length)<(i=e.d.length)?r:i;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1},g.decimalPlaces=g.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},g.dividedBy=g.div=function(e){return b(this,new this.constructor(e))},g.dividedToIntegerBy=g.idiv=function(e){var t=this.constructor;return C(b(this,new t(e),0,1),t.precision)},g.equals=g.eq=function(e){return!this.cmp(e)},g.exponent=function(){return S(this)},g.greaterThan=g.gt=function(e){return this.cmp(e)>0},g.greaterThanOrEqualTo=g.gte=function(e){return this.cmp(e)>=0},g.isInteger=g.isint=function(){return this.e>this.d.length-2},g.isNegative=g.isneg=function(){return this.s<0},g.isPositive=g.ispos=function(){return this.s>0},g.isZero=function(){return 0===this.s},g.lessThan=g.lt=function(e){return this.cmp(e)<0},g.lessThanOrEqualTo=g.lte=function(e){return this.cmp(e)<1},g.logarithm=g.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(o))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(o)?new r(0):(s=!1,t=b(T(n,a),T(e,a),a),s=!0,C(t,i))},g.minus=g.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?$(t,e):v(t,(e.s=-e.s,e))},g.modulo=g.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(!(e=new r(e)).s)throw Error(l+"NaN");return n.s?(s=!1,t=b(n,e,0,1).times(e),s=!0,n.minus(t)):C(new r(n),i)},g.naturalExponential=g.exp=function(){return x(this)},g.naturalLogarithm=g.ln=function(){return T(this)},g.negated=g.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},g.plus=g.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?v(t,e):$(t,(e.s=-e.s,e))},g.precision=g.sd=function(e){var t,n,r,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=S(i)+1,n=7*(r=i.d.length-1)+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},g.squareRoot=g.sqrt=function(){var e,t,n,r,i,o,a,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(l+"NaN")}for(e=S(c),s=!1,0==(i=Math.sqrt(+c))||i==1/0?(((t=_(c.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=h((e+1)/2)-(e<0||e%2),r=new u(t=i==1/0?"1e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new u(i.toString()),i=a=(n=u.precision)+3;;)if(r=(o=r).plus(b(c,o,a+2)).times(.5),_(o.d).slice(0,a)===(t=_(r.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&"4999"==t){if(C(o,n+1,0),o.times(o).eq(c)){r=o;break}}else if("9999"!=t)break;a+=4}return s=!0,C(r,n)},g.times=g.mul=function(e){var t,n,r,i,o,a,l,c,u,h=this,d=h.constructor,p=h.d,m=(e=new d(e)).d;if(!h.s||!e.s)return new d(0);for(e.s*=h.s,n=h.e+e.e,(c=p.length)<(u=m.length)&&(o=p,p=m,m=o,a=c,c=u,u=a),o=[],r=a=c+u;r--;)o.push(0);for(r=u;--r>=0;){for(t=0,i=c+r;i>r;)l=o[i]+m[r]*p[i-r-1]+t,o[i--]=l%f|0,t=l/f|0;o[i]=(o[i]+t)%f|0}for(;!o[--a];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,s?C(e,d.precision):e},g.toDecimalPlaces=g.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(y(e,0,1e9),void 0===t?t=r.rounding:y(t,0,8),C(n,e+S(n)+1,t))},g.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=O(r,!0):(y(e,0,1e9),void 0===t?t=i.rounding:y(t,0,8),n=O(r=C(new i(r),e+1,t),!0,e+1)),n},g.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return void 0===e?O(i):(y(e,0,1e9),void 0===t?t=o.rounding:y(t,0,8),n=O((r=C(new o(i),e+S(i)+1,t)).abs(),!1,e+S(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},g.toInteger=g.toint=function(){var e=this,t=e.constructor;return C(new t(e),S(e)+1,t.rounding)},g.toNumber=function(){return+this},g.toPower=g.pow=function(e){var t,n,r,i,a,c,u=this,d=u.constructor,p=+(e=new d(e));if(!e.s)return new d(o);if(!(u=new d(u)).s){if(e.s<1)throw Error(l+"Infinity");return u}if(u.eq(o))return u;if(r=d.precision,e.eq(o))return C(u,r);if(c=(t=e.e)>=(n=e.d.length-1),a=u.s,c){if((n=p<0?-p:p)<=9007199254740991){for(i=new d(o),t=Math.ceil(r/7+4),s=!1;n%2&&A((i=i.times(u)).d,t),0!==(n=h(n/2));)A((u=u.times(u)).d,t);return s=!0,e.s<0?new d(o).div(i):C(i,r)}}else if(a<0)throw Error(l+"NaN");return a=a<0&&1&e.d[Math.max(t,n)]?-1:1,u.s=1,s=!1,i=e.times(T(u,r+12)),s=!0,(i=x(i)).s=a,i},g.toPrecision=function(e,t){var n,r,i=this,o=i.constructor;return void 0===e?r=O(i,(n=S(i))<=o.toExpNeg||n>=o.toExpPos):(y(e,1,1e9),void 0===t?t=o.rounding:y(t,0,8),r=O(i=C(new o(i),e,t),e<=(n=S(i))||n<=o.toExpNeg,e)),r},g.toSignificantDigits=g.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(y(e,1,1e9),void 0===t?t=n.rounding:y(t,0,8)),C(new n(this),e,t)},g.toString=g.valueOf=g.val=g.toJSON=function(){var e=this,t=S(e),n=e.constructor;return O(e,t<=n.toExpNeg||t>=n.toExpPos)};var b=function(){function e(e,t){var n,r=0,i=e.length;for(e=e.slice();i--;)n=e[i]*t+r,e[i]=n%f|0,r=n/f|0;return r&&e.unshift(r),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*f+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,o,a){var s,c,u,h,d,p,m,g,v,y,_,b,x,w,E,T,M,$,O=r.constructor,A=r.s==i.s?1:-1,I=r.d,P=i.d;if(!r.s)return new O(r);if(!i.s)throw Error(l+"Division by zero");for(c=r.e-i.e,M=P.length,E=I.length,g=(m=new O(A)).d=[],u=0;P[u]==(I[u]||0);)++u;if(P[u]>(I[u]||0)&&--c,(b=null==o?o=O.precision:a?o+(S(r)-S(i))+1:o)<0)return new O(0);if(b=b/7+2|0,u=0,1==M)for(h=0,P=P[0],b++;(u<E||h)&&b--;u++)x=h*f+(I[u]||0),g[u]=x/P|0,h=x%P|0;else{for((h=f/(P[0]+1)|0)>1&&(P=e(P,h),I=e(I,h),M=P.length,E=I.length),w=M,y=(v=I.slice(0,M)).length;y<M;)v[y++]=0;($=P.slice()).unshift(0),T=P[0],P[1]>=f/2&&++T;do{h=0,(s=t(P,v,M,y))<0?(_=v[0],M!=y&&(_=_*f+(v[1]||0)),(h=_/T|0)>1?(h>=f&&(h=f-1),1==(s=t(d=e(P,h),v,p=d.length,y=v.length))&&(h--,n(d,M<p?$:P,p))):(0==h&&(s=h=1),d=P.slice()),(p=d.length)<y&&d.unshift(0),n(v,d,y),-1==s&&(s=t(P,v,M,y=v.length))<1&&(h++,n(v,M<y?$:P,y)),y=v.length):0===s&&(h++,v=[0]),g[u++]=h,s&&v[0]?v[y++]=I[w]||0:(v=[I[w]],y=1)}while((w++<E||void 0!==v[0])&&b--)}return g[0]||g.shift(),m.e=c,C(m,a?o+S(m)+1:o)}}();function x(e,t){var n,r,i,a,l,c=0,h=0,p=e.constructor,f=p.precision;if(S(e)>16)throw Error(u+S(e));if(!e.s)return new p(o);for(null==t?(s=!1,l=f):l=t,a=new p(.03125);e.abs().gte(.1);)e=e.times(a),h+=5;for(l+=Math.log(d(2,h))/Math.LN10*2+5|0,n=r=i=new p(o),p.precision=l;;){if(r=C(r.times(e),l),n=n.times(++c),_((a=i.plus(b(r,n,l))).d).slice(0,l)===_(i.d).slice(0,l)){for(;h--;)i=C(i.times(i),l);return p.precision=f,null==t?(s=!0,C(i,f)):i}i=a}}function S(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function w(e,t,n){if(t>e.LN10.sd())throw s=!0,n&&(e.precision=n),Error(l+"LN10 precision limit exceeded");return C(new e(e.LN10),t)}function E(e){for(var t="";e--;)t+="0";return t}function T(e,t){var n,r,i,a,c,u,h,d,p,f=1,m=e,g=m.d,v=m.constructor,y=v.precision;if(m.s<1)throw Error(l+(m.s?"NaN":"-Infinity"));if(m.eq(o))return new v(0);if(null==t?(s=!1,d=y):d=t,m.eq(10))return null==t&&(s=!0),w(v,d);if(d+=10,v.precision=d,r=(n=_(g)).charAt(0),a=S(m),!(Math.abs(a)<15e14))return h=w(v,d+2,y).times(a+""),m=T(new v(r+"."+n.slice(1)),d-10).plus(h),v.precision=y,null==t?(s=!0,C(m,y)):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=_((m=m.times(e)).d)).charAt(0),f++;for(a=S(m),r>1?(m=new v("0."+n),a++):m=new v(r+"."+n.slice(1)),u=c=m=b(m.minus(o),m.plus(o),d),p=C(m.times(m),d),i=3;;){if(c=C(c.times(p),d),_((h=u.plus(b(c,new v(i),d))).d).slice(0,d)===_(u.d).slice(0,d))return u=u.times(2),0!==a&&(u=u.plus(w(v,d+2,y).times(a+""))),u=b(u,new v(f),d),v.precision=y,null==t?(s=!0,C(u,y)):u;u=h,i+=2}}function M(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(r,i)){if(i-=r,n=n-r-1,e.e=h(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),s&&(e.e>m||e.e<-m))throw Error(u+n)}else e.s=0,e.e=0,e.d=[0];return e}function C(e,t,n){var r,i,o,a,l,c,p,g,v=e.d;for(a=1,o=v[0];o>=10;o/=10)a++;if((r=t-a)<0)r+=7,i=t,p=v[g=0];else{if((g=Math.ceil((r+1)/7))>=(o=v.length))return e;for(p=o=v[g],a=1;o>=10;o/=10)a++;i=(r%=7)-7+a}if(void 0!==n&&(l=p/(o=d(10,a-i-1))%10|0,c=t<0||void 0!==v[g+1]||p%o,c=n<4?(l||c)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||c||6==n&&(r>0?i>0?p/d(10,a-i):0:v[g-1])%10&1||n==(e.s<0?8:7))),t<1||!v[0])return c?(o=S(e),v.length=1,t=t-o-1,v[0]=d(10,(7-t%7)%7),e.e=h(-t/7)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(0==r?(v.length=g,o=1,g--):(v.length=g+1,o=d(10,7-r),v[g]=i>0?(p/d(10,a-i)%d(10,i)|0)*o:0),c)for(;;){if(0==g){(v[0]+=o)==f&&(v[0]=1,++e.e);break}if(v[g]+=o,v[g]!=f)break;v[g--]=0,o=1}for(r=v.length;0===v[--r];)v.pop();if(s&&(e.e>m||e.e<-m))throw Error(u+S(e));return e}function $(e,t){var n,r,i,o,a,l,c,u,h,d,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),s?C(t,m):t;if(c=e.d,d=t.d,r=t.e,u=e.e,c=c.slice(),a=u-r){for((h=a<0)?(n=c,a=-a,l=d.length):(n=d,r=u,l=c.length),a>(i=Math.max(Math.ceil(m/7),l)+2)&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for((h=(i=c.length)<(l=d.length))&&(l=i),i=0;i<l;i++)if(c[i]!=d[i]){h=c[i]<d[i];break}a=0}for(h&&(n=c,c=d,d=n,t.s=-t.s),l=c.length,i=d.length-l;i>0;--i)c[l++]=0;for(i=d.length;i>a;){if(c[--i]<d[i]){for(o=i;o&&0===c[--o];)c[o]=f-1;--c[o],c[i]+=f}c[i]-=d[i]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,s?C(t,m):t):new p(0)}function O(e,t,n){var r,i=S(e),o=_(e.d),a=o.length;return t?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+E(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+E(-i-1)+o,n&&(r=n-a)>0&&(o+=E(r))):i>=a?(o+=E(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+E(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=E(r))),e.s<0?"-"+o:o}function A(e,t){if(e.length>t)return e.length=t,!0}function I(e){if(!e||"object"!=typeof e)throw Error(l+"Object expected");var t,n,r,i=["precision",1,1e9,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(r=e[n=i[t]])){if(!(h(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(c+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(c+n+": "+r);this[n]=new this(r)}return this}(a=function e(t){var n,r,i;function o(e){var t=this;if(!(t instanceof o))return new o(e);if(t.constructor=o,e instanceof o)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):M(t,e.toString())}if("string"!=typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!p.test(e))throw Error(c+e);M(t,e)}if(o.prototype=g,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=e,o.config=o.set=I,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return o.config(t),o}(a)).default=a.Decimal=a,o=new a(1),void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.memoize=t.reverse=t.compose=t.map=t.range=t.curry=t.PLACE_HOLDER=void 0;var i=function(e){return e},o={"@@functional/placeholder":!0};t.PLACE_HOLDER=o;var a=function(e){return e===o},s=function(e){return function t(){return 0===arguments.length||1===arguments.length&&a(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},l=function(e){return function e(t,n){return 1===t?n:s((function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];var u=l.filter((function(e){return e!==o})).length;return u>=t?n.apply(void 0,l):e(t-u,s((function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=l.map((function(e){return a(e)?t.shift():e}));return n.apply(void 0,r(o).concat(t))})))}))}(e.length,e)};t.curry=l;t.range=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n};var c=l((function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map((function(e){return t[e]})).map(e)}));t.map=c;t.compose=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return i;var r=t.reverse(),o=r[0],a=r.slice(1);return function(){return a.reduce((function(e,t){return t(e)}),o.apply(void 0,arguments))}};t.reverse=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")};t.memoize=function(e){var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t&&i.every((function(e,n){return e===t[n]}))?n:(t=i,n=e.apply(void 0,i))}}},function(e,t,n){(function(t){for(var r=n(749),i="undefined"==typeof window?t:window,o=["moz","webkit"],a="AnimationFrame",s=i["request"+a],l=i["cancel"+a]||i["cancelRequest"+a],c=0;!s&&c<o.length;c++)s=i[o[c]+"Request"+a],l=i[o[c]+"Cancel"+a]||i[o[c]+"CancelRequest"+a];if(!s||!l){var u=0,h=0,d=[];s=function(e){if(0===d.length){var t=r(),n=Math.max(0,1e3/60-(t-u));u=n+t,setTimeout((function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(u)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(n))}return d.push({handle:++h,callback:e,cancelled:!1}),h},l=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}e.exports=function(e){return s.call(i,e)},e.exports.cancel=function(){l.apply(i,arguments)},e.exports.polyfill=function(e){e||(e=i),e.requestAnimationFrame=s,e.cancelAnimationFrame=l}}).call(this,n(38))},function(e,t,n){"use strict";var r=s(n(755)),i=s(n(760)),o=s(n(435)),a=s(n(433));function s(e){return e&&e.__esModule?e:{default:e}}e.exports={Transition:a.default,TransitionGroup:o.default,ReplaceTransition:i.default,CSSTransition:r.default}},function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(1)),i=s(n(0)),o=s(n(69)),a=n(284);n(434);function s(e){return e&&e.__esModule?e:{default:e}}t.UNMOUNTED="unmounted";t.EXITED="exited";t.ENTERING="entering";t.ENTERED="entered";t.EXITING="exiting";var l=function(e){var t,n;function r(t,n){var r;r=e.call(this,t,n)||this;var i,o=n.transitionGroup,a=o&&!o.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i="exited",r.appearStatus="entering"):i="entered":i=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",r.state={status:i},r.nextCallback=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.getChildContext=function(){return{transitionGroup:null}},r.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null},a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(t="entering"):"entering"!==n&&"entered"!==n||(t="exiting")}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=o.default.findDOMNode(this);"entering"===t?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},a.performEnter=function(e,t){var n=this,r=this.props.enter,i=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,o=this.getTimeouts(),a=i?o.appear:o.enter;t||r?(this.props.onEnter(e,i),this.safeSetState({status:"entering"},(function(){n.props.onEntering(e,i),n.onTransitionEnd(e,a,(function(){n.safeSetState({status:"entered"},(function(){n.props.onEntered(e,i)}))}))}))):this.safeSetState({status:"entered"},(function(){n.props.onEntered(e)}))},a.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:"exiting"},(function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,(function(){t.safeSetState({status:"exited"},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:"exited"},(function(){t.props.onExited(e)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var r=null==t&&!this.props.addEndListener;e&&!r?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return n(e,r);var o=i.default.Children.only(n);return i.default.cloneElement(o,r)},r}(i.default.Component);function c(){}l.contextTypes={transitionGroup:r.object},l.childContextTypes={transitionGroup:function(){}},l.propTypes={},l.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:c,onEntering:c,onEntered:c,onExit:c,onExiting:c,onExited:c},l.UNMOUNTED=0,l.EXITED=1,l.ENTERING=2,l.ENTERED=3,l.EXITING=4;var u=(0,a.polyfill)(l);t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0;var r;(r=n(1))&&r.__esModule;t.timeoutsShape=null;t.classNamesShape=null},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=s(n(1)),i=s(n(0)),o=n(284),a=n(761);function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},h=function(e){var t,n;function r(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(c(c(r)));return r.state={handleExited:i,firstRender:!0},r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},o.componentDidMount=function(){this.appeared=!0,this.mounted=!0},o.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(e,t){var n=t.children,r=t.handleExited;return{children:t.firstRender?(0,a.getInitialChildMapping)(e,r):(0,a.getNextChildMapping)(e,n,r),firstRender:!1}},o.handleExited=function(e,t){var n=(0,a.getChildMapping)(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=l({},t.children);return delete n[e.key],{children:n}})))},o.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["component","childFactory"]),o=u(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?o:i.default.createElement(t,r,o)},r}(i.default.Component);h.childContextTypes={transitionGroup:r.default.object.isRequired},h.propTypes={},h.defaultProps={component:"div",childFactory:function(e){return e}};var d=(0,o.polyfill)(h);t.default=d,e.exports=t.default},function(e,t,n){var r=n(763),i=n(764),o=n(219),a=n(212),s=n(257);e.exports=function(e,t,n){var l=a(e)?r:i;return n&&s(e,t,n)&&(t=void 0),l(e,o(t,3))}},function(e,t,n){var r=n(405);e.exports=function(e){return e?(e=r(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},function(e,t,n){var r=n(769)();e.exports=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return Ue})),n.d(t,"b",(function(){return Be}));var r=n(0),i=n(498),o=function(){return Math.random().toString(36).substring(7).split("").join(".")},a={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function s(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function l(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(l)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var o=e,c=t,u=[],h=u,d=!1;function p(){h===u&&(h=u.slice())}function f(){if(d)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return c}function m(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(d)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return p(),h.push(e),function(){if(t){if(d)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,p();var n=h.indexOf(e);h.splice(n,1),u=null}}}function g(e){if(!s(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,c=o(c,e)}finally{d=!1}for(var t=u=h,n=0;n<t.length;n++){(0,t[n])()}return e}function v(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");o=e,g({type:a.REPLACE})}function y(){var e,t=m;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(f())}return n(),{unsubscribe:t(n)}}})[i.a]=function(){return this},e}return g({type:a.INIT}),(r={dispatch:g,subscribe:m,getState:f,replaceReducer:v})[i.a]=y,r}var c="dnd-core/INIT_COORDS",u="dnd-core/BEGIN_DRAG",h="dnd-core/PUBLISH_DRAG_SOURCE",d="dnd-core/HOVER",p="dnd-core/DROP",f="dnd-core/END_DRAG",m=function(e,t){return e===t};function g(e,t){return!e&&!t||!(!e||!t)&&(e.x===t.x&&e.y===t.y)}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case c:case u:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case d:return g(e.clientOffset,n.clientOffset)?e:_({},e,{clientOffset:n.clientOffset});case f:case p:return x;default:return e}}var w="dnd-core/ADD_SOURCE",E="dnd-core/ADD_TARGET",T="dnd-core/REMOVE_SOURCE",M="dnd-core/REMOVE_TARGET";function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t,n){return t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:n||null}),e)}function O(e,t){return e.filter((function(e){return e!==t}))}function A(e){return"object"===C(e)}function I(e,t){var n=new Map,r=function(e){return n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);var i=[];return n.forEach((function(e,t){1===e&&i.push(t)})),i}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case u:return L({},e,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case h:return L({},e,{isSourcePublic:!0});case d:return L({},e,{targetIds:n.targetIds});case M:return-1===e.targetIds.indexOf(n.targetId)?e:L({},e,{targetIds:O(e.targetIds,n.targetId)});case p:return L({},e,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case f:return L({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:case E:return e+1;case T:case M:return e-1;default:return e}}var N=[],F=[];function U(e,t){return e!==N&&(e===F||void 0===t||(n=e,t.filter((function(e){return n.indexOf(e)>-1}))).length>0);var n}function B(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case d:break;case w:case E:case M:case T:return N;case u:case h:case f:case p:default:return F}var t=e.payload,n=t.targetIds,r=void 0===n?[]:n,i=t.prevTargetIds,o=void 0===i?[]:i,a=I(r,o),s=a.length>0||!v(r,o);if(!s)return N;var l=o[o.length-1],c=r[r.length-1];return l!==c&&(l&&a.push(l),c&&a.push(c)),a}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e+1}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:B(e.dirtyHandlerIds,{type:t.type,payload:G({},t.payload,{prevTargetIds:$(e,"dragOperation.targetIds",[])})}),dragOffset:S(e.dragOffset,t),refCount:j(e.refCount,t),dragOperation:D(e.dragOperation,t),stateId:z(e.stateId)}}N.__IS_NONE__=!0,F.__IS_ALL__=!0;var q=n(215);function J(e,t){return{type:c,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}var Y={type:c,payload:{clientOffset:null,sourceClientOffset:null}};function X(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0},r=n.publishSource,i=void 0===r||r,o=n.clientOffset,a=n.getSourceClientOffset,s=e.getMonitor(),l=e.getRegistry();e.dispatch(J(o)),K(t,s,l);var c=ee(t,s);if(null!==c){var h=null;o&&(Z(a),h=a(c)),e.dispatch(J(o,h));var d=l.getSource(c),p=d.beginDrag(s,c);Q(p),l.pinSource(c);var f=l.getSourceType(c);return{type:u,payload:{itemType:f,item:p,sourceId:c,clientOffset:o||null,sourceClientOffset:h||null,isSourcePublic:!!i}}}e.dispatch(Y)}}function K(e,t,n){Object(q.a)(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach((function(e){Object(q.a)(n.getSource(e),"Expected sourceIds to be registered.")}))}function Z(e){Object(q.a)("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}function Q(e){Object(q.a)(A(e),"Item must be an object.")}function ee(e,t){for(var n=null,r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}function te(e){return function(){if(e.getMonitor().isDragging())return{type:h}}}function ne(e,t){return null===t?null===e:Array.isArray(e)?e.some((function(e){return e===t})):e===t}function re(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clientOffset;ie(t);var i=t.slice(0),o=e.getMonitor(),a=e.getRegistry();oe(i,o,a);var s=o.getItemType();return ae(i,a,s),se(i,o,a),{type:d,payload:{targetIds:i,clientOffset:r||null}}}}function ie(e){Object(q.a)(Array.isArray(e),"Expected targetIds to be an array.")}function oe(e,t,n){Object(q.a)(t.isDragging(),"Cannot call hover while not dragging."),Object(q.a)(!t.didDrop(),"Cannot call hover after drop.");for(var r=0;r<e.length;r++){var i=e[r];Object(q.a)(e.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array.");var o=n.getTarget(i);Object(q.a)(o,"Expected targetIds to be registered.")}}function ae(e,t,n){for(var r=e.length-1;r>=0;r--){var i=e[r];ne(t.getTargetType(i),n)||e.splice(r,1)}}function se(e,t,n){e.forEach((function(e){n.getTarget(e).hover(t,e)}))}function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getMonitor(),r=e.getRegistry();de(n);var i=fe(n);i.forEach((function(i,o){var a=pe(i,o,r,n),s={type:p,payload:{dropResult:ce({},t,{},a)}};e.dispatch(s)}))}}function de(e){Object(q.a)(e.isDragging(),"Cannot call drop while not dragging."),Object(q.a)(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function pe(e,t,n,r){var i=n.getTarget(e),o=i?i.drop(r,e):void 0;return function(e){Object(q.a)(void 0===e||A(e),"Drop result must either be an object or undefined.")}(o),void 0===o&&(o=0===t?{}:r.getDropResult()),o}function fe(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function me(e){return function(){var t=e.getMonitor(),n=e.getRegistry();!function(e){Object(q.a)(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);var r=t.getSourceId();return n.getSource(r,!0).endDrag(t,r),n.unpinSource(),{type:f}}}function ge(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ye,_e=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.registry=n}var t,n,r;return t=e,(n=[{key:"subscribeToStateChange",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handlerIds:void 0},r=n.handlerIds;Object(q.a)("function"==typeof e,"listener must be a function."),Object(q.a)(void 0===r||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");var i=this.store.getState().stateId,o=function(){var n=t.store.getState(),o=n.stateId;try{o===i||o===i+1&&!U(n.dirtyHandlerIds,r)||e()}finally{i=o}};return this.store.subscribe(o)}},{key:"subscribeToOffsetChange",value:function(e){var t=this;Object(q.a)("function"==typeof e,"listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe((function(){var r=t.store.getState().dragOffset;r!==n&&(n=r,e())}))}},{key:"canDragSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e);return Object(q.a)(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){if(!e)return!1;var t=this.registry.getTarget(e);return Object(q.a)(t,"Expected to find a valid target."),!(!this.isDragging()||this.didDrop())&&ne(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e,!0);return Object(q.a)(t,"Expected to find a valid source."),!(!this.isDragging()||!this.isSourcePublic())&&this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}},{key:"isOverTarget",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1};if(!e)return!1;var n=t.shallow;if(!this.isDragging())return!1;var r=this.registry.getTargetType(e),i=this.getItemType();if(i&&!ne(r,i))return!1;var o=this.getTargetIds();if(!o.length)return!1;var a=o.indexOf(e);return n?a===o.length-1:a>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return this.store.getState().dragOperation.isSourcePublic}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return e=this.store.getState().dragOffset,r=e.clientOffset,i=e.initialClientOffset,o=e.initialSourceClientOffset,r&&i&&o?ge((n=o,{x:(t=r).x+n.x,y:t.y+n.y}),i):null;var e,t,n,r,i,o}},{key:"getDifferenceFromInitialOffset",value:function(){return e=this.store.getState().dragOffset,t=e.clientOffset,n=e.initialClientOffset,t&&n?ge(t,n):null;var e,t,n}}])&&ve(t.prototype,n),r&&ve(t,r),e}(),be=0;function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){t&&Array.isArray(e)?e.forEach((function(e){return Se(e,!1)})):Object(q.a)("string"==typeof e||"symbol"===xe(e),t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(ye||(ye={}));var we=n(500),Ee=[],Te=[],Me=we.a.makeRequestCallFromTimer((function(){if(Te.length)throw Te.shift()}));function Ce(e){var t;(t=Ee.length?Ee.pop():new $e).task=e,Object(we.a)(t)}var $e=function(){function e(){}return e.prototype.call=function(){try{this.task.call()}catch(e){Ce.onerror?Ce.onerror(e):(Te.push(e),Me())}finally{this.task=null,Ee[Ee.length]=this}},e}();function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ie(e){var t=(be++).toString();switch(e){case ye.SOURCE:return"S".concat(t);case ye.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function Pe(e){switch(e[0]){case"S":return ye.SOURCE;case"T":return ye.TARGET;default:Object(q.a)(!1,"Cannot parse handler ID: ".concat(e))}}function Le(e,t){var n=e.entries(),r=!1;do{var i=n.next(),o=i.done;if(Ae(i.value,2)[1]===t)return!0;r=!!o}while(!r);return!1}var ke=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}var t,n,r;return t=e,(n=[{key:"addSource",value:function(e,t){Se(e),function(e){Object(q.a)("function"==typeof e.canDrag,"Expected canDrag to be a function."),Object(q.a)("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),Object(q.a)("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);var n=this.addHandler(ye.SOURCE,e,t);return this.store.dispatch(function(e){return{type:w,payload:{sourceId:e}}}(n)),n}},{key:"addTarget",value:function(e,t){Se(e,!0),function(e){Object(q.a)("function"==typeof e.canDrop,"Expected canDrop to be a function."),Object(q.a)("function"==typeof e.hover,"Expected hover to be a function."),Object(q.a)("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);var n=this.addHandler(ye.TARGET,e,t);return this.store.dispatch(function(e){return{type:E,payload:{targetId:e}}}(n)),n}},{key:"containsHandler",value:function(e){return Le(this.dragSources,e)||Le(this.dropTargets,e)}},{key:"getSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(q.a)(this.isSourceId(e),"Expected a valid source ID.");var n=t&&e===this.pinnedSourceId,r=n?this.pinnedSource:this.dragSources.get(e);return r}},{key:"getTarget",value:function(e){return Object(q.a)(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}},{key:"getSourceType",value:function(e){return Object(q.a)(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}},{key:"getTargetType",value:function(e){return Object(q.a)(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}},{key:"isSourceId",value:function(e){return Pe(e)===ye.SOURCE}},{key:"isTargetId",value:function(e){return Pe(e)===ye.TARGET}},{key:"removeSource",value:function(e){var t=this;Object(q.a)(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:T,payload:{sourceId:e}}}(e)),Ce((function(){t.dragSources.delete(e),t.types.delete(e)}))}},{key:"removeTarget",value:function(e){Object(q.a)(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:M,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}},{key:"pinSource",value:function(e){var t=this.getSource(e);Object(q.a)(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}},{key:"unpinSource",value:function(){Object(q.a)(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(e,t,n){var r=Ie(e);return this.types.set(r,t),e===ye.SOURCE?this.dragSources.set(r,n):e===ye.TARGET&&this.dropTargets.set(r,n),r}}])&&Oe(t.prototype,n),r&&Oe(t,r),e}();function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e){var t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return l(W,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}var Ne=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Re(this,e),this.isSetUp=!1,this.handleRefCountChange=function(){var e=t.store.getState().refCount>0;t.backend&&(e&&!t.isSetUp?(t.backend.setup(),t.isSetUp=!0):!e&&t.isSetUp&&(t.backend.teardown(),t.isSetUp=!1))};var r=je(n);this.store=r,this.monitor=new _e(r,new ke(r)),r.subscribe(this.handleRefCountChange)}var t,n,r;return t=e,(n=[{key:"receiveBackend",value:function(e){this.backend=e}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var e=this,t=this.store.dispatch,n=function(e){return{beginDrag:X(e),publishDragSource:te(e),hover:re(e),drop:he(e),endDrag:me(e)}}(this);return Object.keys(n).reduce((function(r,i){var o,a=n[i];return r[i]=(o=a,function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=o.apply(e,r);void 0!==a&&t(a)}),r}),{})}},{key:"dispatch",value:function(e){this.store.dispatch(e)}}])&&De(t.prototype,n),r&&De(t,r),e}();function Fe(e,t,n,r){var i=new Ne(r),o=e(i,t,n);return i.receiveBackend(o),i}var Ue=r.createContext({dragDropManager:void 0});function Be(e,t,n,r){return{dragDropManager:Fe(e,t,n,r)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(470),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyOpenClassName=t.portalClassName=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=f(o),s=f(n(69)),l=f(n(1)),c=f(n(471)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(348)),h=n(283),d=f(h),p=n(284);function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=t.portalClassName="ReactModalPortal",y=t.bodyOpenClassName="ReactModal__Body--open",_=void 0!==s.default.createPortal,b=function(){return _?s.default.createPortal:s.default.unstable_renderSubtreeIntoContainer};function x(e){return e()}var S=function(e){function t(){var e,n,i;m(this,t);for(var o=arguments.length,l=Array(o),u=0;u<o;u++)l[u]=arguments[u];return n=i=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.removePortal=function(){!_&&s.default.unmountComponentAtNode(i.node);var e=x(i.props.parentSelector);e?e.removeChild(i.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},i.portalRef=function(e){i.portal=e},i.renderPortal=function(e){var n=b()(i,a.default.createElement(c.default,r({defaultStyles:t.defaultStyles},e)),i.node);i.portalRef(n)},g(i,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){h.canUseDOM&&(_||(this.node=document.createElement("div")),this.node.className=this.props.portalClassName,x(this.props.parentSelector).appendChild(this.node),!_&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(e){return{prevParent:x(e.parentSelector),nextParent:x(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(e,t,n){if(h.canUseDOM){var r=this.props,i=r.isOpen,o=r.portalClassName;e.portalClassName!==o&&(this.node.className=o);var a=n.prevParent,s=n.nextParent;s!==a&&(a.removeChild(this.node),s.appendChild(this.node)),(e.isOpen||i)&&!_&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(h.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),n=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);n?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,n-t)):this.removePortal()}}},{key:"render",value:function(){return h.canUseDOM&&_?(!this.node&&_&&(this.node=document.createElement("div")),b()(a.default.createElement(c.default,r({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){u.setElement(e)}}]),t}(o.Component);S.propTypes={isOpen:l.default.bool.isRequired,style:l.default.shape({content:l.default.object,overlay:l.default.object}),portalClassName:l.default.string,bodyOpenClassName:l.default.string,htmlOpenClassName:l.default.string,className:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),overlayClassName:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),appElement:l.default.instanceOf(d.default),onAfterOpen:l.default.func,onRequestClose:l.default.func,closeTimeoutMS:l.default.number,ariaHideApp:l.default.bool,shouldFocusAfterRender:l.default.bool,shouldCloseOnOverlayClick:l.default.bool,shouldReturnFocusAfterClose:l.default.bool,parentSelector:l.default.func,aria:l.default.object,data:l.default.object,role:l.default.string,contentLabel:l.default.string,shouldCloseOnEsc:l.default.bool,overlayRef:l.default.func,contentRef:l.default.func},S.defaultProps={isOpen:!1,portalClassName:v,bodyOpenClassName:y,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,parentSelector:function(){return document.body}},S.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,p.polyfill)(S),t.default=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),s=g(a),l=g(n(1)),c=m(n(472)),u=g(n(473)),h=m(n(348)),d=m(n(475)),p=g(n(283)),f=g(n(349));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}n(476);var v={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},y=0,_=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setOverlayRef=function(e){n.overlay=e,n.props.overlayRef&&n.props.overlayRef(e)},n.setContentRef=function(e){n.content=e,n.props.contentRef&&n.props.contentRef(e)},n.afterClose=function(){var e=n.props,t=e.appElement,r=e.ariaHideApp,i=e.htmlOpenClassName,o=e.bodyOpenClassName;o&&d.remove(document.body,o),i&&d.remove(document.getElementsByTagName("html")[0],i),r&&y>0&&0===(y-=1)&&h.show(t),n.props.shouldFocusAfterRender&&(n.props.shouldReturnFocusAfterClose?(c.returnFocus(),c.teardownScopedFocus()):c.popWithoutFocus()),n.props.onAfterClose&&n.props.onAfterClose(),f.default.deregister(n)},n.open=function(){n.beforeOpen(),n.state.afterOpen&&n.state.beforeClose?(clearTimeout(n.closeTimer),n.setState({beforeClose:!1})):(n.props.shouldFocusAfterRender&&(c.setupScopedFocus(n.node),c.markForFocusLater()),n.setState({isOpen:!0},(function(){n.setState({afterOpen:!0}),n.props.isOpen&&n.props.onAfterOpen&&n.props.onAfterOpen({overlayEl:n.overlay,contentEl:n.content})})))},n.close=function(){n.props.closeTimeoutMS>0?n.closeWithTimeout():n.closeWithoutTimeout()},n.focusContent=function(){return n.content&&!n.contentHasFocus()&&n.content.focus()},n.closeWithTimeout=function(){var e=Date.now()+n.props.closeTimeoutMS;n.setState({beforeClose:!0,closesAt:e},(function(){n.closeTimer=setTimeout(n.closeWithoutTimeout,n.state.closesAt-Date.now())}))},n.closeWithoutTimeout=function(){n.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},n.afterClose)},n.handleKeyDown=function(e){9===e.keyCode&&(0,u.default)(n.content,e),n.props.shouldCloseOnEsc&&27===e.keyCode&&(e.stopPropagation(),n.requestClose(e))},n.handleOverlayOnClick=function(e){null===n.shouldClose&&(n.shouldClose=!0),n.shouldClose&&n.props.shouldCloseOnOverlayClick&&(n.ownerHandlesClose()?n.requestClose(e):n.focusContent()),n.shouldClose=null},n.handleContentOnMouseUp=function(){n.shouldClose=!1},n.handleOverlayOnMouseDown=function(e){n.props.shouldCloseOnOverlayClick||e.target!=n.overlay||e.preventDefault()},n.handleContentOnClick=function(){n.shouldClose=!1},n.handleContentOnMouseDown=function(){n.shouldClose=!1},n.requestClose=function(e){return n.ownerHandlesClose()&&n.props.onRequestClose(e)},n.ownerHandlesClose=function(){return n.props.onRequestClose},n.shouldBeClosed=function(){return!n.state.isOpen&&!n.state.beforeClose},n.contentHasFocus=function(){return document.activeElement===n.content||n.content.contains(document.activeElement)},n.buildClassName=function(e,t){var r="object"===(void 0===t?"undefined":i(t))?t:{base:v[e],afterOpen:v[e]+"--after-open",beforeClose:v[e]+"--before-close"},o=r.base;return n.state.afterOpen&&(o=o+" "+r.afterOpen),n.state.beforeClose&&(o=o+" "+r.beforeClose),"string"==typeof t&&t?o+" "+t:o},n.attributesFromObject=function(e,t){return Object.keys(t).reduce((function(n,r){return n[e+"-"+r]=t[r],n}),{})},n.state={afterOpen:!1,beforeClose:!1},n.shouldClose=null,n.moveFromContentToOverlay=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(e,t){this.props.isOpen&&!e.isOpen?this.open():!this.props.isOpen&&e.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!t.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer)}},{key:"beforeOpen",value:function(){var e=this.props,t=e.appElement,n=e.ariaHideApp,r=e.htmlOpenClassName,i=e.bodyOpenClassName;i&&d.add(document.body,i),r&&d.add(document.getElementsByTagName("html")[0],r),n&&(y+=1,h.hide(t)),f.default.register(this)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.className,i=e.overlayClassName,o=e.defaultStyles,a=n?{}:o.content,l=i?{}:o.overlay;return this.shouldBeClosed()?null:s.default.createElement("div",{ref:this.setOverlayRef,className:this.buildClassName("overlay",i),style:r({},l,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},s.default.createElement("div",r({id:t,ref:this.setContentRef,style:r({},a,this.props.style.content),className:this.buildClassName("content",n),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",this.props.aria||{}),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),this.props.children))}}]),t}(a.Component);_.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},_.propTypes={isOpen:l.default.bool.isRequired,defaultStyles:l.default.shape({content:l.default.object,overlay:l.default.object}),style:l.default.shape({content:l.default.object,overlay:l.default.object}),className:l.default.oneOfType([l.default.string,l.default.object]),overlayClassName:l.default.oneOfType([l.default.string,l.default.object]),bodyOpenClassName:l.default.string,htmlOpenClassName:l.default.string,ariaHideApp:l.default.bool,appElement:l.default.instanceOf(p.default),onAfterOpen:l.default.func,onAfterClose:l.default.func,onRequestClose:l.default.func,closeTimeoutMS:l.default.number,shouldFocusAfterRender:l.default.bool,shouldCloseOnOverlayClick:l.default.bool,shouldReturnFocusAfterClose:l.default.bool,role:l.default.string,contentLabel:l.default.string,aria:l.default.object,data:l.default.object,children:l.default.node,shouldCloseOnEsc:l.default.bool,overlayRef:l.default.func,contentRef:l.default.func,id:l.default.string,testId:l.default.string},t.default=_,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleBlur=c,t.handleFocus=u,t.markForFocusLater=function(){a.push(document.activeElement)},t.returnFocus=function(){var e=null;try{return void(0!==a.length&&(e=a.pop()).focus())}catch(t){console.warn(["You tried to return focus to",e,"but it is not in the DOM anymore"].join(" "))}},t.popWithoutFocus=function(){a.length>0&&a.pop()},t.setupScopedFocus=function(e){s=e,window.addEventListener?(window.addEventListener("blur",c,!1),document.addEventListener("focus",u,!0)):(window.attachEvent("onBlur",c),document.attachEvent("onFocus",u))},t.teardownScopedFocus=function(){s=null,window.addEventListener?(window.removeEventListener("blur",c),document.removeEventListener("focus",u)):(window.detachEvent("onBlur",c),document.detachEvent("onFocus",u))};var r,i=n(347),o=(r=i)&&r.__esModule?r:{default:r};var a=[],s=null,l=!1;function c(){l=!0}function u(){if(l){if(l=!1,!s)return;setTimeout((function(){s.contains(document.activeElement)||((0,o.default)(s)[0]||s).focus()}),0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,o.default)(e);if(!n.length)return void t.preventDefault();var r=void 0,i=t.shiftKey,a=n[0],s=n[n.length-1];if(e===document.activeElement){if(!i)return;r=s}s!==document.activeElement||i||(r=a);a===document.activeElement&&i&&(r=s);if(r)return t.preventDefault(),void r.focus();var l=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null==l||"Chrome"==l[1]||null!=/\biPod\b|\biPad\b/g.exec(navigator.userAgent))return;var c=n.indexOf(document.activeElement);c>-1&&(c+=i?-1:1);if(void 0===(r=n[c]))return t.preventDefault(),void(r=i?s:a).focus();t.preventDefault(),r.focus()};var r,i=n(347),o=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){var r;!function(){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dumpClassLists=function(){0};var r={},i={};t.add=function(e,t){return n=e.classList,o="html"==e.nodeName.toLowerCase()?r:i,void t.split(" ").forEach((function(e){!function(e,t){e[t]||(e[t]=0),e[t]+=1}(o,e),n.add(e)}));var n,o},t.remove=function(e,t){return n=e.classList,o="html"==e.nodeName.toLowerCase()?r:i,void t.split(" ").forEach((function(e){!function(e,t){e[t]&&(e[t]-=1)}(o,e),0===o[e]&&n.remove(e)}));var n,o}},function(e,t,n){"use strict";var r,i=n(349),o=(r=i)&&r.__esModule?r:{default:r};var a=void 0,s=void 0,l=[];function c(){0!==l.length&&l[l.length-1].focusContent()}o.default.subscribe((function(e,t){a&&s||((a=document.createElement("div")).setAttribute("data-react-modal-body-trap",""),a.style.position="absolute",a.style.opacity="0",a.setAttribute("tabindex","0"),a.addEventListener("focus",c),(s=a.cloneNode()).addEventListener("focus",c)),(l=t).length>0?(document.body.firstChild!==a&&document.body.insertBefore(a,document.body.firstChild),document.body.lastChild!==s&&document.body.appendChild(s)):(a.parentElement&&a.parentElement.removeChild(a),s.parentElement&&s.parentElement.removeChild(s))}))},function(e,t,n){t.__esModule=!0,t.Helmet=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=h(n(0)),a=h(n(1)),s=h(n(478)),l=h(n(480)),c=n(481),u=n(350);function h(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m,g,v,y=(0,s.default)(c.reducePropsToState,c.handleClientStateChange,c.mapStateOnServer)((function(){return null})),_=(m=y,v=g=function(e){function t(){return p(this,t),f(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return!(0,l.default)(this.props,e)},t.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case u.TAG_NAMES.SCRIPT:case u.TAG_NAMES.NOSCRIPT:return{innerHTML:t};case u.TAG_NAMES.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},t.prototype.flattenArrayTypeChildren=function(e){var t,n=e.child,i=e.arrayTypeChildren,o=e.newChildProps,a=e.nestedChildren;return r({},i,((t={})[n.type]=[].concat(i[n.type]||[],[r({},o,this.mapNestedChildrenToProps(n,a))]),t))},t.prototype.mapObjectTypeChildren=function(e){var t,n,i=e.child,o=e.newProps,a=e.newChildProps,s=e.nestedChildren;switch(i.type){case u.TAG_NAMES.TITLE:return r({},o,((t={})[i.type]=s,t.titleAttributes=r({},a),t));case u.TAG_NAMES.BODY:return r({},o,{bodyAttributes:r({},a)});case u.TAG_NAMES.HTML:return r({},o,{htmlAttributes:r({},a)})}return r({},o,((n={})[i.type]=r({},a),n))},t.prototype.mapArrayTypeChildrenToProps=function(e,t){var n=r({},t);return Object.keys(e).forEach((function(t){var i;n=r({},n,((i={})[t]=e[t],i))})),n},t.prototype.warnOnInvalidChildren=function(e,t){return!0},t.prototype.mapChildrenToProps=function(e,t){var n=this,r={};return o.default.Children.forEach(e,(function(e){if(e&&e.props){var i=e.props,o=i.children,a=d(i,["children"]),s=(0,c.convertReactPropstoHtmlAttributes)(a);switch(n.warnOnInvalidChildren(e,o),e.type){case u.TAG_NAMES.LINK:case u.TAG_NAMES.META:case u.TAG_NAMES.NOSCRIPT:case u.TAG_NAMES.SCRIPT:case u.TAG_NAMES.STYLE:r=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:r,newChildProps:s,nestedChildren:o});break;default:t=n.mapObjectTypeChildren({child:e,newProps:t,newChildProps:s,nestedChildren:o})}}})),t=this.mapArrayTypeChildrenToProps(r,t)},t.prototype.render=function(){var e=this.props,t=e.children,n=d(e,["children"]),i=r({},n);return t&&(i=this.mapChildrenToProps(t,i)),o.default.createElement(m,i)},i(t,null,[{key:"canUseDOM",set:function(e){m.canUseDOM=e}}]),t}(o.default.Component),g.propTypes={base:a.default.object,bodyAttributes:a.default.object,children:a.default.oneOfType([a.default.arrayOf(a.default.node),a.default.node]),defaultTitle:a.default.string,defer:a.default.bool,encodeSpecialCharacters:a.default.bool,htmlAttributes:a.default.object,link:a.default.arrayOf(a.default.object),meta:a.default.arrayOf(a.default.object),noscript:a.default.arrayOf(a.default.object),onChangeClientState:a.default.func,script:a.default.arrayOf(a.default.object),style:a.default.arrayOf(a.default.object),title:a.default.string,titleAttributes:a.default.object,titleTemplate:a.default.string},g.defaultProps={defer:!0,encodeSpecialCharacters:!0},g.peek=m.peek,g.rewind=function(){var e=m.rewind();return e||(e=(0,c.mapStateOnServer)({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},v);_.renderStatic=_.rewind,t.Helmet=_,t.default=_},function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=n(0),o=r(i),a=r(n(479));function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,n){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!=typeof r)throw new Error("Expected WrappedComponent to be a React component.");var c,u=[];function h(){c=e(u.map((function(e){return e.props}))),d.canUseDOM?t(c):n&&(c=n(c))}var d=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.peek=function(){return c},i.rewind=function(){if(i.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=c;return c=void 0,u=[],e};var s=i.prototype;return s.shouldComponentUpdate=function(e){return!a(e,this.props)},s.componentWillMount=function(){u.push(this),h()},s.componentDidUpdate=function(){h()},s.componentWillUnmount=function(){var e=u.indexOf(this);u.splice(e,1),h()},s.render=function(){return o.createElement(r,this.props)},i}(i.Component);return s(d,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")"),s(d,"canUseDOM",l),d}}},function(e,t){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!s(c))return!1;var u=e[c],h=t[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0}},function(e,t,n){"use strict";var r=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty,a="undefined"!=typeof Element;e.exports=function(e,t){try{return function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var s,l,c,u=r(t),h=r(n);if(u&&h){if((l=t.length)!=n.length)return!1;for(s=l;0!=s--;)if(!e(t[s],n[s]))return!1;return!0}if(u!=h)return!1;var d=t instanceof Date,p=n instanceof Date;if(d!=p)return!1;if(d&&p)return t.getTime()==n.getTime();var f=t instanceof RegExp,m=n instanceof RegExp;if(f!=m)return!1;if(f&&m)return t.toString()==n.toString();var g=i(t);if((l=g.length)!==i(n).length)return!1;for(s=l;0!=s--;)if(!o.call(n,g[s]))return!1;if(a&&t instanceof Element&&n instanceof Element)return t===n;for(s=l;0!=s--;)if(!("_owner"===(c=g[s])&&t.$$typeof||e(t[c],n[c])))return!1;return!0}return t!=t&&n!=n}(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||-2146828260===e.number)return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}}},function(e,t,n){(function(e){t.__esModule=!0,t.warn=t.requestAnimationFrame=t.reducePropsToState=t.mapStateOnServer=t.handleClientStateChange=t.convertReactPropstoHtmlAttributes=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=l(n(0)),a=l(n(14)),s=n(350);function l(e){return e&&e.__esModule?e:{default:e}}var c,u=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},h=function(e){var t=g(e,s.TAG_NAMES.TITLE),n=g(e,s.HELMET_PROPS.TITLE_TEMPLATE);if(n&&t)return n.replace(/%s/g,(function(){return t}));var r=g(e,s.HELMET_PROPS.DEFAULT_TITLE);return t||r||void 0},d=function(e){return g(e,s.HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||function(){}},p=function(e,t){return t.filter((function(t){return void 0!==t[e]})).map((function(t){return t[e]})).reduce((function(e,t){return i({},e,t)}),{})},f=function(e,t){return t.filter((function(e){return void 0!==e[s.TAG_NAMES.BASE]})).map((function(e){return e[s.TAG_NAMES.BASE]})).reverse().reduce((function(t,n){if(!t.length)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=r[i].toLowerCase();if(-1!==e.indexOf(o)&&n[o])return t.concat(n)}return t}),[])},m=function(e,t,n){var i={};return n.filter((function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&x("Helmet: "+e+' should be of type "Array". Instead found type "'+r(t[e])+'"'),!1)})).map((function(t){return t[e]})).reverse().reduce((function(e,n){var r={};n.filter((function(e){for(var n=void 0,o=Object.keys(e),a=0;a<o.length;a++){var l=o[a],c=l.toLowerCase();-1===t.indexOf(c)||n===s.TAG_PROPERTIES.REL&&"canonical"===e[n].toLowerCase()||c===s.TAG_PROPERTIES.REL&&"stylesheet"===e[c].toLowerCase()||(n=c),-1===t.indexOf(l)||l!==s.TAG_PROPERTIES.INNER_HTML&&l!==s.TAG_PROPERTIES.CSS_TEXT&&l!==s.TAG_PROPERTIES.ITEM_PROP||(n=l)}if(!n||!e[n])return!1;var u=e[n].toLowerCase();return i[n]||(i[n]={}),r[n]||(r[n]={}),!i[n][u]&&(r[n][u]=!0,!0)})).reverse().forEach((function(t){return e.push(t)}));for(var o=Object.keys(r),l=0;l<o.length;l++){var c=o[l],u=(0,a.default)({},i[c],r[c]);i[c]=u}return e}),[]).reverse()},g=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.hasOwnProperty(t))return r[t]}return null},v=(c=Date.now(),function(e){var t=Date.now();t-c>16?(c=t,e(t)):setTimeout((function(){v(e)}),0)}),y=function(e){return clearTimeout(e)},_="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||v:e.requestAnimationFrame||v,b="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||y:e.cancelAnimationFrame||y,x=function(e){return console&&"function"==typeof console.warn&&console.warn(e)},S=null,w=function(e,t){var n=e.baseTag,r=e.bodyAttributes,i=e.htmlAttributes,o=e.linkTags,a=e.metaTags,l=e.noscriptTags,c=e.onChangeClientState,u=e.scriptTags,h=e.styleTags,d=e.title,p=e.titleAttributes;M(s.TAG_NAMES.BODY,r),M(s.TAG_NAMES.HTML,i),T(d,p);var f={baseTag:C(s.TAG_NAMES.BASE,n),linkTags:C(s.TAG_NAMES.LINK,o),metaTags:C(s.TAG_NAMES.META,a),noscriptTags:C(s.TAG_NAMES.NOSCRIPT,l),scriptTags:C(s.TAG_NAMES.SCRIPT,u),styleTags:C(s.TAG_NAMES.STYLE,h)},m={},g={};Object.keys(f).forEach((function(e){var t=f[e],n=t.newTags,r=t.oldTags;n.length&&(m[e]=n),r.length&&(g[e]=f[e].oldTags)})),t&&t(),c(e,m,g)},E=function(e){return Array.isArray(e)?e.join(""):e},T=function(e,t){void 0!==e&&document.title!==e&&(document.title=E(e)),M(s.TAG_NAMES.TITLE,t)},M=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute(s.HELMET_ATTRIBUTE),i=r?r.split(","):[],o=[].concat(i),a=Object.keys(t),l=0;l<a.length;l++){var c=a[l],u=t[c]||"";n.getAttribute(c)!==u&&n.setAttribute(c,u),-1===i.indexOf(c)&&i.push(c);var h=o.indexOf(c);-1!==h&&o.splice(h,1)}for(var d=o.length-1;d>=0;d--)n.removeAttribute(o[d]);i.length===o.length?n.removeAttribute(s.HELMET_ATTRIBUTE):n.getAttribute(s.HELMET_ATTRIBUTE)!==a.join(",")&&n.setAttribute(s.HELMET_ATTRIBUTE,a.join(","))}},C=function(e,t){var n=document.head||document.querySelector(s.TAG_NAMES.HEAD),r=n.querySelectorAll(e+"["+s.HELMET_ATTRIBUTE+"]"),i=Array.prototype.slice.call(r),o=[],a=void 0;return t&&t.length&&t.forEach((function(t){var n=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===s.TAG_PROPERTIES.INNER_HTML)n.innerHTML=t.innerHTML;else if(r===s.TAG_PROPERTIES.CSS_TEXT)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{var l=void 0===t[r]?"":t[r];n.setAttribute(r,l)}n.setAttribute(s.HELMET_ATTRIBUTE,"true"),i.some((function(e,t){return a=t,n.isEqualNode(e)}))?i.splice(a,1):o.push(n)})),i.forEach((function(e){return e.parentNode.removeChild(e)})),o.forEach((function(e){return n.appendChild(e)})),{oldTags:i,newTags:o}},$=function(e){return Object.keys(e).reduce((function(t,n){var r=void 0!==e[n]?n+'="'+e[n]+'"':""+n;return t?t+" "+r:r}),"")},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[s.REACT_TAG_MAP[n]||n]=e[n],t}),t)},A=function(e,t,n){switch(e){case s.TAG_NAMES.TITLE:return{toComponent:function(){return e=t.title,n=t.titleAttributes,(r={key:e})[s.HELMET_ATTRIBUTE]=!0,i=O(n,r),[o.default.createElement(s.TAG_NAMES.TITLE,i,e)];var e,n,r,i},toString:function(){return function(e,t,n,r){var i=$(n),o=E(t);return i?"<"+e+" "+s.HELMET_ATTRIBUTE+'="true" '+i+">"+u(o,r)+"</"+e+">":"<"+e+" "+s.HELMET_ATTRIBUTE+'="true">'+u(o,r)+"</"+e+">"}(e,t.title,t.titleAttributes,n)}};case s.ATTRIBUTE_NAMES.BODY:case s.ATTRIBUTE_NAMES.HTML:return{toComponent:function(){return O(t)},toString:function(){return $(t)}};default:return{toComponent:function(){return function(e,t){return t.map((function(t,n){var r,i=((r={key:n})[s.HELMET_ATTRIBUTE]=!0,r);return Object.keys(t).forEach((function(e){var n=s.REACT_TAG_MAP[e]||e;if(n===s.TAG_PROPERTIES.INNER_HTML||n===s.TAG_PROPERTIES.CSS_TEXT){var r=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:r}}else i[n]=t[e]})),o.default.createElement(e,i)}))}(e,t)},toString:function(){return function(e,t,n){return t.reduce((function(t,r){var i=Object.keys(r).filter((function(e){return!(e===s.TAG_PROPERTIES.INNER_HTML||e===s.TAG_PROPERTIES.CSS_TEXT)})).reduce((function(e,t){var i=void 0===r[t]?t:t+'="'+u(r[t],n)+'"';return e?e+" "+i:i}),""),o=r.innerHTML||r.cssText||"",a=-1===s.SELF_CLOSING_TAGS.indexOf(e);return t+"<"+e+" "+s.HELMET_ATTRIBUTE+'="true" '+i+(a?"/>":">"+o+"</"+e+">")}),"")}(e,t,n)}}}};t.convertReactPropstoHtmlAttributes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,n){return t[s.HTML_TAG_MAP[n]||n]=e[n],t}),t)},t.handleClientStateChange=function(e){S&&b(S),e.defer?S=_((function(){w(e,(function(){S=null}))})):(w(e),S=null)},t.mapStateOnServer=function(e){var t=e.baseTag,n=e.bodyAttributes,r=e.encode,i=e.htmlAttributes,o=e.linkTags,a=e.metaTags,l=e.noscriptTags,c=e.scriptTags,u=e.styleTags,h=e.title,d=void 0===h?"":h,p=e.titleAttributes;return{base:A(s.TAG_NAMES.BASE,t,r),bodyAttributes:A(s.ATTRIBUTE_NAMES.BODY,n,r),htmlAttributes:A(s.ATTRIBUTE_NAMES.HTML,i,r),link:A(s.TAG_NAMES.LINK,o,r),meta:A(s.TAG_NAMES.META,a,r),noscript:A(s.TAG_NAMES.NOSCRIPT,l,r),script:A(s.TAG_NAMES.SCRIPT,c,r),style:A(s.TAG_NAMES.STYLE,u,r),title:A(s.TAG_NAMES.TITLE,{title:d,titleAttributes:p},r)}},t.reducePropsToState=function(e){return{baseTag:f([s.TAG_PROPERTIES.HREF],e),bodyAttributes:p(s.ATTRIBUTE_NAMES.BODY,e),defer:g(e,s.HELMET_PROPS.DEFER),encode:g(e,s.HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:p(s.ATTRIBUTE_NAMES.HTML,e),linkTags:m(s.TAG_NAMES.LINK,[s.TAG_PROPERTIES.REL,s.TAG_PROPERTIES.HREF],e),metaTags:m(s.TAG_NAMES.META,[s.TAG_PROPERTIES.NAME,s.TAG_PROPERTIES.CHARSET,s.TAG_PROPERTIES.HTTPEQUIV,s.TAG_PROPERTIES.PROPERTY,s.TAG_PROPERTIES.ITEM_PROP],e),noscriptTags:m(s.TAG_NAMES.NOSCRIPT,[s.TAG_PROPERTIES.INNER_HTML],e),onChangeClientState:d(e),scriptTags:m(s.TAG_NAMES.SCRIPT,[s.TAG_PROPERTIES.SRC,s.TAG_PROPERTIES.INNER_HTML],e),styleTags:m(s.TAG_NAMES.STYLE,[s.TAG_PROPERTIES.CSS_TEXT],e),title:h(e),titleAttributes:p(s.ATTRIBUTE_NAMES.TITLE,e)}},t.requestAnimationFrame=_,t.warn=x}).call(this,n(38))},function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},,,,,,,function(e,t,n){e.exports=n.p+"assets/models/loading-cube-7dcc3b81897e68b740c1cf12b6cf4c3f.glb"},function(e,t,n){e.exports=n.p+"assets/images/media-error-19a251258c94bb2318e43e9be669ae5e.png"},function(e,t,n){e.exports=function(){return n(261)('!function(n){var r={};function e(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return n[t].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=n,e.c=r,e.d=function(n,r,t){e.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:t})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,r){if(1&r&&(n=e(n)),8&r)return n;if(4&r&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(e.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&r&&"string"!=typeof n)for(var o in n)e.d(t,o,function(r){return n[r]}.bind(null,o));return t},e.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(r,"a",r),r},e.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},e.p="/",e(e.s=2)}([function(n,r){},function(n,r){function e(n,r){for(var e=0,t=n.length-1;t>=0;t--){var o=n[t];"."===o?n.splice(t,1):".."===o?(n.splice(t,1),e++):e&&(n.splice(t,1),e--)}if(r)for(;e--;e)n.unshift("..");return n}function t(n,r){if(n.filter)return n.filter(r);for(var e=[],t=0;t<n.length;t++)r(n[t],t,n)&&e.push(n[t]);return e}r.resolve=function(){for(var n="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var i=o>=0?arguments[o]:process.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(n=i+"/"+n,r="/"===i.charAt(0))}return(r?"/":"")+(n=e(t(n.split("/"),(function(n){return!!n})),!r).join("/"))||"."},r.normalize=function(n){var i=r.isAbsolute(n),a="/"===o(n,-1);return(n=e(t(n.split("/"),(function(n){return!!n})),!i).join("/"))||i||(n="."),n&&a&&(n+="/"),(i?"/":"")+n},r.isAbsolute=function(n){return"/"===n.charAt(0)},r.join=function(){var n=Array.prototype.slice.call(arguments,0);return r.normalize(t(n,(function(n,r){if("string"!=typeof n)throw new TypeError("Arguments to path.join must be strings");return n})).join("/"))},r.relative=function(n,e){function t(n){for(var r=0;r<n.length&&""===n[r];r++);for(var e=n.length-1;e>=0&&""===n[e];e--);return r>e?[]:n.slice(r,e-r+1)}n=r.resolve(n).substr(1),e=r.resolve(e).substr(1);for(var o=t(n.split("/")),i=t(e.split("/")),a=Math.min(o.length,i.length),u=a,f=0;f<a;f++)if(o[f]!==i[f]){u=f;break}var c=[];for(f=u;f<o.length;f++)c.push("..");return(c=c.concat(i.slice(u))).join("/")},r.sep="/",r.delimiter=":",r.dirname=function(n){if("string"!=typeof n&&(n+=""),0===n.length)return".";for(var r=n.charCodeAt(0),e=47===r,t=-1,o=!0,i=n.length-1;i>=1;--i)if(47===(r=n.charCodeAt(i))){if(!o){t=i;break}}else o=!1;return-1===t?e?"/":".":e&&1===t?"/":n.slice(0,t)},r.basename=function(n,r){var e=function(n){"string"!=typeof n&&(n+="");var r,e=0,t=-1,o=!0;for(r=n.length-1;r>=0;--r)if(47===n.charCodeAt(r)){if(!o){e=r+1;break}}else-1===t&&(o=!1,t=r+1);return-1===t?"":n.slice(e,t)}(n);return r&&e.substr(-1*r.length)===r&&(e=e.substr(0,e.length-r.length)),e},r.extname=function(n){"string"!=typeof n&&(n+="");for(var r=-1,e=0,t=-1,o=!0,i=0,a=n.length-1;a>=0;--a){var u=n.charCodeAt(a);if(47!==u)-1===t&&(o=!1,t=a+1),46===u?-1===r?r=a:1!==i&&(i=1):-1!==r&&(i=-1);else if(!o){e=a+1;break}}return-1===r||-1===t||0===i||1===i&&r===t-1&&r===e+1?"":n.slice(r,t)};var o="b"==="ab".substr(-1)?function(n,r,e){return n.substr(r,e)}:function(n,r,e){return r<0&&(r=n.length+r),n.substr(r,e)}},function(n,r,e){"use strict";e.r(r);var t,o=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(n){n=void 0!==(n=n||{})?n:{};var r,o={};for(r in n)n.hasOwnProperty(r)&&(o[r]=n[r]);n.arguments=[],n.thisProgram="./this.program",n.quit=function(n,r){throw r},n.preRun=[],n.postRun=[];var i=!1,a=!1,u=!1,f=!1;i="object"==typeof window,a="function"==typeof importScripts,u="object"==typeof process&&!i&&!a,f=!i&&!u&&!a;var c,s,l="";function p(r){return n.locateFile?n.locateFile(r,l):l+r}u?(l=__dirname+"/",n.read=function(n,r){var t;return c||(c=e(0)),s||(s=e(1)),n=s.normalize(n),t=c.readFileSync(n),r?t:t.toString()},n.readBinary=function(r){var e=n.read(r,!0);return e.buffer||(e=new Uint8Array(e)),b(e.buffer),e},process.argv.length>1&&(n.thisProgram=process.argv[1].replace(/\\\\/g,"/")),n.arguments=process.argv.slice(2),process.on("uncaughtException",(function(n){if(!(n instanceof Hr))throw n})),process.on("unhandledRejection",Vr),n.quit=function(n){process.exit(n)},n.inspect=function(){return"[Emscripten Module object]"}):f?("undefined"!=typeof read&&(n.read=function(n){return read(n)}),n.readBinary=function(n){var r;return"function"==typeof readbuffer?new Uint8Array(readbuffer(n)):(b("object"==typeof(r=read(n,"binary"))),r)},"undefined"!=typeof scriptArgs?n.arguments=scriptArgs:void 0!==arguments&&(n.arguments=arguments),"function"==typeof quit&&(n.quit=function(n){quit(n)})):(i||a)&&(a?l=self.location.href:document.currentScript&&(l=document.currentScript.src),t&&(l=t),l=0!==l.indexOf("blob:")?l.substr(0,l.lastIndexOf("/")+1):"",n.read=function(n){var r=new XMLHttpRequest;return r.open("GET",n,!1),r.send(null),r.responseText},a&&(n.readBinary=function(n){var r=new XMLHttpRequest;return r.open("GET",n,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),n.readAsync=function(n,r,e){var t=new XMLHttpRequest;t.open("GET",n,!0),t.responseType="arraybuffer",t.onload=function(){200==t.status||0==t.status&&t.response?r(t.response):e()},t.onerror=e,t.send(null)},n.setWindowTitle=function(n){document.title=n});var d=n.print||("undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null),y=n.printErr||("undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||d);for(r in o)o.hasOwnProperty(r)&&(n[r]=o[r]);o=void 0;var v,g={"f64-rem":function(n,r){return n%r},debugger:function(){}},h=(new Array(0),function(n){});"object"!=typeof WebAssembly&&y("no native wasm support detected");var m=!1;function b(n,r){n||Vr("Assertion failed: "+r)}var w="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function A(n,r,e){for(var t=r+e,o=r;n[o]&&!(o>=t);)++o;if(o-r>16&&n.subarray&&w)return w.decode(n.subarray(r,o));for(var i="";r<o;){var a=n[r++];if(128&a){var u=63&n[r++];if(192!=(224&a)){var f=63&n[r++];if((a=224==(240&a)?(15&a)<<12|u<<6|f:(7&a)<<18|u<<12|f<<6|63&n[r++])<65536)i+=String.fromCharCode(a);else{var c=a-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&a)<<6|u)}else i+=String.fromCharCode(a)}return i}function T(n,r){return n?A(P,n,r):""}function _(n,r,e,t){if(!(t>0))return 0;for(var o=e,i=e+t-1,a=0;a<n.length;++a){var u=n.charCodeAt(a);if(u>=55296&&u<=57343&&(u=65536+((1023&u)<<10)|1023&n.charCodeAt(++a)),u<=127){if(e>=i)break;r[e++]=u}else if(u<=2047){if(e+1>=i)break;r[e++]=192|u>>6,r[e++]=128|63&u}else if(u<=65535){if(e+2>=i)break;r[e++]=224|u>>12,r[e++]=128|u>>6&63,r[e++]=128|63&u}else{if(e+3>=i)break;r[e++]=240|u>>18,r[e++]=128|u>>12&63,r[e++]=128|u>>6&63,r[e++]=128|63&u}}return r[e]=0,e-o}function C(n,r,e){return _(n,P,r,e)}function E(n){for(var r=0,e=0;e<n.length;++e){var t=n.charCodeAt(e);t>=55296&&t<=57343&&(t=65536+((1023&t)<<10)|1023&n.charCodeAt(++e)),t<=127?++r:r+=t<=2047?2:t<=65535?3:4}return r}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var S,F,P,M,R,W,k,x,O,j=65536;function I(n,r){return n%r>0&&(n+=r-n%r),n}function U(){n.HEAP8=F=new Int8Array(S),n.HEAP16=M=new Int16Array(S),n.HEAP32=W=new Int32Array(S),n.HEAPU8=P=new Uint8Array(S),n.HEAPU16=R=new Uint16Array(S),n.HEAPU32=k=new Uint32Array(S),n.HEAPF32=x=new Float32Array(S),n.HEAPF64=O=new Float64Array(S)}var B=5255696,N=12784,z=5242880,D=n.TOTAL_MEMORY||16777216;function H(r){for(;r.length>0;){var e=r.shift();if("function"!=typeof e){var t=e.func;"number"==typeof t?void 0===e.arg?n.dynCall_v(t):n.dynCall_vi(t,e.arg):t(void 0===e.arg?null:e.arg)}else e()}}D<z&&y("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+D+"! (TOTAL_STACK="+z+")"),n.buffer?S=n.buffer:"object"==typeof WebAssembly&&"function"==typeof WebAssembly.Memory?(v=new WebAssembly.Memory({initial:D/j}),S=v.buffer):S=new ArrayBuffer(D),U(),W[N>>2]=B;var L=[],V=[],q=[],G=[],X=!1;function J(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)Q(n.preRun.shift());H(L)}function K(){X||(X=!0,H(V))}function Y(){H(q)}function Z(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)$(n.postRun.shift());H(G)}function Q(n){L.unshift(n)}function $(n){G.unshift(n)}var nn=0,rn=null,en=null;function tn(r){nn++,n.monitorRunDependencies&&n.monitorRunDependencies(nn)}function on(r){if(nn--,n.monitorRunDependencies&&n.monitorRunDependencies(nn),0==nn&&(null!==rn&&(clearInterval(rn),rn=null),en)){var e=en;en=null,e()}}n.preloadedImages={},n.preloadedAudios={};var an="data:application/octet-stream;base64,";function un(n){return String.prototype.startsWith?n.startsWith(an):0===n.indexOf(an)}var fn="recast.wasm";function cn(){try{if(n.wasmBinary)return new Uint8Array(n.wasmBinary);if(n.readBinary)return n.readBinary(fn);throw"both async and sync fetching of the wasm failed"}catch(n){Vr(n)}}function sn(){return n.wasmBinary||!i&&!a||"function"!=typeof fetch?new Promise((function(n,r){n(cn())})):fetch(fn,{credentials:"same-origin"}).then((function(n){if(!n.ok)throw"failed to load wasm binary file at \'"+fn+"\'";return n.arrayBuffer()})).catch((function(){return cn()}))}function ln(r){var e={env:r,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:g};function t(r,e){var t=r.exports;n.asm=t,on()}if(tn(),n.instantiateWasm)try{return n.instantiateWasm(e,t)}catch(n){return y("Module.instantiateWasm callback failed with error: "+n),!1}function o(n){t(n.instance)}function i(n){sn().then((function(n){return WebAssembly.instantiate(n,e)})).then(n,(function(n){y("failed to asynchronously prepare wasm: "+n),Vr(n)}))}return n.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||un(fn)||"function"!=typeof fetch?i(o):WebAssembly.instantiateStreaming(fetch(fn,{credentials:"same-origin"}),e).then(o,(function(n){y("wasm streaming compile failed: "+n),y("falling back to ArrayBuffer instantiation"),i(o)})),{}}function pn(n,r,e,t){Vr("Assertion failed: "+T(n)+", at: "+[r?T(r):"unknown filename",e,t?T(t):"unknown function"])}function dn(n){return zr(n)}function yn(){return!!yn.uncaught_exception}function vn(n){try{return Nr(n)}catch(n){}}un(fn)||(fn=p(fn)),n.asm=function(n,r,e){return r.memory=v,r.table=new WebAssembly.Table({initial:86,maximum:86,element:"anyfunc"}),r.__memory_base=1024,r.__table_base=0,ln(r)},V.push({func:function(){Dr()}});var gn={last:0,caught:[],infos:{},deAdjust:function(n){if(!n||gn.infos[n])return n;for(var r in gn.infos)for(var e=+r,t=gn.infos[e].adjusted,o=t.length,i=0;i<o;i++)if(t[i]===n)return e;return n},addRef:function(n){n&&gn.infos[n].refcount++},decRef:function(r){if(r){var e=gn.infos[r];b(e.refcount>0),e.refcount--,0!==e.refcount||e.rethrown||(e.destructor&&n.dynCall_vi(e.destructor,r),delete gn.infos[r],vn(r))}},clearRef:function(n){n&&(gn.infos[n].refcount=0)}};function hn(n,r,e){throw gn.infos[n]={ptr:n,adjusted:[n],type:r,destructor:e,refcount:0,caught:!1,rethrown:!1},gn.last=n,"uncaught_exception"in yn?yn.uncaught_exception++:yn.uncaught_exception=1,n}var mn={buffers:[null,[],[]],printChar:function(n,r){var e=mn.buffers[n];0===r||10===r?((1===n?d:y)(A(e,0)),e.length=0):e.push(r)},varargs:0,get:function(n){return mn.varargs+=4,W[mn.varargs-4>>2]},getStr:function(){return T(mn.get())},get64:function(){var n=mn.get();return mn.get(),n},getZero:function(){mn.get()}};function bn(n,r){mn.varargs=r;try{return mn.getStreamFromFD(),mn.get(),mn.get(),mn.get(),mn.get(),0}catch(n){return"undefined"!=typeof FS&&n instanceof FS.ErrnoError||Vr(n),-n.errno}}function wn(n,r){mn.varargs=r;try{for(var e=mn.get(),t=mn.get(),o=mn.get(),i=0,a=0;a<o;a++){for(var u=W[t+8*a>>2],f=W[t+(8*a+4)>>2],c=0;c<f;c++)mn.printChar(e,P[u+c]);i+=f}return i}catch(n){return"undefined"!=typeof FS&&n instanceof FS.ErrnoError||Vr(n),-n.errno}}function An(n,r){mn.varargs=r;try{return 0}catch(n){return"undefined"!=typeof FS&&n instanceof FS.ErrnoError||Vr(n),-n.errno}}function Tn(n,r){mn.varargs=r;try{return mn.getStreamFromFD(),0}catch(n){return"undefined"!=typeof FS&&n instanceof FS.ErrnoError||Vr(n),-n.errno}}function _n(n){switch(n){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+n)}}function Cn(){for(var n=new Array(256),r=0;r<256;++r)n[r]=String.fromCharCode(r);En=n}var En=void 0;function Sn(n){for(var r="",e=n;P[e];)r+=En[P[e++]];return r}var Fn={},Pn={},Mn={},Rn=48,Wn=57;function kn(n){if(void 0===n)return"_unknown";var r=(n=n.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return r>=Rn&&r<=Wn?"_"+n:n}function xn(n,r){return n=kn(n),new Function("body","return function "+n+\'() {\\n    "use strict";    return body.apply(this, arguments);\\n};\\n\')(r)}function On(n,r){var e=xn(r,(function(n){this.name=r,this.message=n;var e=new Error(n).stack;void 0!==e&&(this.stack=this.toString()+"\\n"+e.replace(/^Error(:[^\\n]*)?\\n/,""))}));return e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},e}var jn=void 0;function In(n){throw new jn(n)}var Un=void 0;function Bn(n){throw new Un(n)}function Nn(n,r,e){function t(r){var t=e(r);t.length!==n.length&&Bn("Mismatched type converter count");for(var o=0;o<n.length;++o)zn(n[o],t[o])}n.forEach((function(n){Mn[n]=r}));var o=new Array(r.length),i=[],a=0;r.forEach((function(n,r){Pn.hasOwnProperty(n)?o[r]=Pn[n]:(i.push(n),Fn.hasOwnProperty(n)||(Fn[n]=[]),Fn[n].push((function(){o[r]=Pn[n],++a===i.length&&t(o)})))})),0===i.length&&t(o)}function zn(n,r,e){if(e=e||{},!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");var t=r.name;if(n||In(\'type "\'+t+\'" must have a positive integer typeid pointer\'),Pn.hasOwnProperty(n)){if(e.ignoreDuplicateRegistrations)return;In("Cannot register type \'"+t+"\' twice")}if(Pn[n]=r,delete Mn[n],Fn.hasOwnProperty(n)){var o=Fn[n];delete Fn[n],o.forEach((function(n){n()}))}}function Dn(n,r,e,t,o){var i=_n(e);zn(n,{name:r=Sn(r),fromWireType:function(n){return!!n},toWireType:function(n,r){return r?t:o},argPackAdvance:8,readValueFromPointer:function(n){var t;if(1===e)t=F;else if(2===e)t=M;else{if(4!==e)throw new TypeError("Unknown boolean type size: "+r);t=W}return this.fromWireType(t[n>>i])},destructorFunction:null})}var Hn=[],Ln=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Vn(n){n>4&&0==--Ln[n].refcount&&(Ln[n]=void 0,Hn.push(n))}function qn(){for(var n=0,r=5;r<Ln.length;++r)void 0!==Ln[r]&&++n;return n}function Gn(){for(var n=5;n<Ln.length;++n)if(void 0!==Ln[n])return Ln[n];return null}function Xn(){n.count_emval_handles=qn,n.get_first_emval=Gn}function Jn(n){switch(n){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var r=Hn.length?Hn.pop():Ln.length;return Ln[r]={refcount:1,value:n},r}}function Kn(n){return this.fromWireType(k[n>>2])}function Yn(n,r){zn(n,{name:r=Sn(r),fromWireType:function(n){var r=Ln[n].value;return Vn(n),r},toWireType:function(n,r){return Jn(r)},argPackAdvance:8,readValueFromPointer:Kn,destructorFunction:null})}function Zn(n){if(null===n)return"null";var r=typeof n;return"object"===r||"array"===r||"function"===r?n.toString():""+n}function Qn(n,r){switch(r){case 2:return function(n){return this.fromWireType(x[n>>2])};case 3:return function(n){return this.fromWireType(O[n>>3])};default:throw new TypeError("Unknown float type: "+n)}}function $n(n,r,e){var t=_n(e);zn(n,{name:r=Sn(r),fromWireType:function(n){return n},toWireType:function(n,r){if("number"!=typeof r&&"boolean"!=typeof r)throw new TypeError(\'Cannot convert "\'+Zn(r)+\'" to \'+this.name);return r},argPackAdvance:8,readValueFromPointer:Qn(r,t),destructorFunction:null})}function nr(n,r){if(!(n instanceof Function))throw new TypeError("new_ called with constructor type "+typeof n+" which is not a function");var e=xn(n.name||"unknownFunctionName",(function(){}));e.prototype=n.prototype;var t=new e,o=n.apply(t,r);return o instanceof Object?o:t}function rr(n){for(;n.length;){var r=n.pop();n.pop()(r)}}function er(n,r,e,t,o){var i=r.length;i<2&&In("argTypes array size mismatch! Must at least get return value and \'this\' types!");for(var a=null!==r[1]&&null!==e,u=!1,f=1;f<r.length;++f)if(null!==r[f]&&void 0===r[f].destructorFunction){u=!0;break}var c="void"!==r[0].name,s="",l="";for(f=0;f<i-2;++f)s+=(0!==f?", ":"")+"arg"+f,l+=(0!==f?", ":"")+"arg"+f+"Wired";var p="return function "+kn(n)+"("+s+") {\\nif (arguments.length !== "+(i-2)+") {\\nthrowBindingError(\'function "+n+" called with \' + arguments.length + \' arguments, expected "+(i-2)+" args!\');\\n}\\n";u&&(p+="var destructors = [];\\n");var d=u?"destructors":"null",y=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],v=[In,t,o,rr,r[0],r[1]];for(a&&(p+="var thisWired = classParam.toWireType("+d+", this);\\n"),f=0;f<i-2;++f)p+="var arg"+f+"Wired = argType"+f+".toWireType("+d+", arg"+f+"); // "+r[f+2].name+"\\n",y.push("argType"+f),v.push(r[f+2]);if(a&&(l="thisWired"+(l.length>0?", ":"")+l),p+=(c?"var rv = ":"")+"invoker(fn"+(l.length>0?", ":"")+l+");\\n",u)p+="runDestructors(destructors);\\n";else for(f=a?1:2;f<r.length;++f){var g=1===f?"thisWired":"arg"+(f-2)+"Wired";null!==r[f].destructorFunction&&(p+=g+"_dtor("+g+"); // "+r[f].name+"\\n",y.push(g+"_dtor"),v.push(r[f].destructorFunction))}return c&&(p+="var ret = retType.fromWireType(rv);\\nreturn ret;\\n"),p+="}\\n",y.push(p),nr(Function,y).apply(null,v)}function tr(n,r,e){if(void 0===n[r].overloadTable){var t=n[r];n[r]=function(){return n[r].overloadTable.hasOwnProperty(arguments.length)||In("Function \'"+e+"\' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+n[r].overloadTable+")!"),n[r].overloadTable[arguments.length].apply(this,arguments)},n[r].overloadTable=[],n[r].overloadTable[t.argCount]=t}}function or(r,e,t){n.hasOwnProperty(r)?((void 0===t||void 0!==n[r].overloadTable&&void 0!==n[r].overloadTable[t])&&In("Cannot register public name \'"+r+"\' twice"),tr(n,r,r),n.hasOwnProperty(t)&&In("Cannot register multiple overloads of a function with the same number of arguments ("+t+")!"),n[r].overloadTable[t]=e):(n[r]=e,void 0!==t&&(n[r].numArguments=t))}function ir(n,r){for(var e=[],t=0;t<n;t++)e.push(W[(r>>2)+t]);return e}function ar(r,e,t){n.hasOwnProperty(r)||Bn("Replacing nonexistant public symbol"),void 0!==n[r].overloadTable&&void 0!==t?n[r].overloadTable[t]=e:(n[r]=e,n[r].argCount=t)}function ur(r,e){var t;if(r=Sn(r),void 0!==n["FUNCTION_TABLE_"+r])t=n["FUNCTION_TABLE_"+r][e];else if("undefined"!=typeof FUNCTION_TABLE)t=FUNCTION_TABLE[e];else{var o=n["dynCall_"+r];void 0===o&&void 0===(o=n["dynCall_"+r.replace(/f/g,"d")])&&In("No dynCall invoker for signature: "+r),t=function(n){for(var t=[],o=1;o<r.length;++o)t.push("a"+o);var i="return function dynCall_"+r+"_"+e+"("+t.join(", ")+") {\\n";return i+="    return dynCall(rawFunction"+(t.length?", ":"")+t.join(", ")+");\\n",i+="};\\n",new Function("dynCall","rawFunction",i)(n,e)}(o)}return"function"!=typeof t&&In("unknown function pointer with signature "+r+": "+e),t}var fr=void 0;function cr(n){var r=Br(n),e=Sn(r);return Nr(r),e}function sr(n,r){var e=[],t={};throw r.forEach((function n(r){t[r]||Pn[r]||(Mn[r]?Mn[r].forEach(n):(e.push(r),t[r]=!0))})),new fr(n+": "+e.map(cr).join([", "]))}function lr(n,r,e,t,o,i){var a=ir(r,e);n=Sn(n),o=ur(t,o),or(n,(function(){sr("Cannot call "+n+" due to unbound types",a)}),r-1),Nn([],a,(function(e){var t=[e[0],null].concat(e.slice(1));return ar(n,er(n,t,null,o,i),r-1),[]}))}function pr(n,r,e){switch(r){case 0:return e?function(n){return F[n]}:function(n){return P[n]};case 1:return e?function(n){return M[n>>1]}:function(n){return R[n>>1]};case 2:return e?function(n){return W[n>>2]}:function(n){return k[n>>2]};default:throw new TypeError("Unknown integer type: "+n)}}function dr(n,r,e,t,o){r=Sn(r),-1===o&&(o=4294967295);var i=_n(e),a=function(n){return n};if(0===t){var u=32-8*e;a=function(n){return n<<u>>>u}}var f=-1!=r.indexOf("unsigned");zn(n,{name:r,fromWireType:a,toWireType:function(n,e){if("number"!=typeof e&&"boolean"!=typeof e)throw new TypeError(\'Cannot convert "\'+Zn(e)+\'" to \'+this.name);if(e<t||e>o)throw new TypeError(\'Passing a number "\'+Zn(e)+\'" from JS side to C/C++ side to an argument of type "\'+r+\'", which is outside the valid range [\'+t+", "+o+"]!");return f?e>>>0:0|e},argPackAdvance:8,readValueFromPointer:pr(r,i,0!==t),destructorFunction:null})}function yr(n,r,e){var t=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][r];function o(n){var r=k,e=r[n>>=2],o=r[n+1];return new t(r.buffer,o,e)}zn(n,{name:e=Sn(e),fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})}function vr(n,r){var e="std::string"===(r=Sn(r));zn(n,{name:r,fromWireType:function(n){var r,t=k[n>>2];if(e){var o=P[n+4+t],i=0;0!=o&&(i=o,P[n+4+t]=0);for(var a=n+4,u=0;u<=t;++u){var f=n+4+u;if(0==P[f]){var c=T(a);void 0===r?r=c:(r+=String.fromCharCode(0),r+=c),a=f+1}}0!=i&&(P[n+4+t]=i)}else{var s=new Array(t);for(u=0;u<t;++u)s[u]=String.fromCharCode(P[n+4+u]);r=s.join("")}return Nr(n),r},toWireType:function(n,r){r instanceof ArrayBuffer&&(r=new Uint8Array(r));var t="string"==typeof r;t||r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Int8Array||In("Cannot pass non-string to std::string");var o=(e&&t?function(){return E(r)}:function(){return r.length})(),i=zr(4+o+1);if(k[i>>2]=o,e&&t)C(r,i+4,o+1);else if(t)for(var a=0;a<o;++a){var u=r.charCodeAt(a);u>255&&(Nr(i),In("String has UTF-16 code units that do not fit in 8 bits")),P[i+4+a]=u}else for(a=0;a<o;++a)P[i+4+a]=r[a];return null!==n&&n.push(Nr,i),i},argPackAdvance:8,readValueFromPointer:Kn,destructorFunction:function(n){Nr(n)}})}function gr(n,r,e){var t,o;e=Sn(e),2===r?(t=function(){return R},o=1):4===r&&(t=function(){return k},o=2),zn(n,{name:e,fromWireType:function(n){for(var r=t(),e=k[n>>2],i=new Array(e),a=n+4>>o,u=0;u<e;++u)i[u]=String.fromCharCode(r[a+u]);return Nr(n),i.join("")},toWireType:function(n,e){var i=t(),a=e.length,u=zr(4+a*r);k[u>>2]=a;for(var f=u+4>>o,c=0;c<a;++c)i[f+c]=e.charCodeAt(c);return null!==n&&n.push(Nr,u),u},argPackAdvance:8,readValueFromPointer:Kn,destructorFunction:function(n){Nr(n)}})}function hr(n,r){zn(n,{isVoid:!0,name:r=Sn(r),argPackAdvance:0,fromWireType:function(){},toWireType:function(n,r){}})}function mr(n){return n||In("Cannot use deleted val. handle = "+n),Ln[n].value}function br(n,r){var e=Pn[n];return void 0===e&&In(r+" has unknown type "+cr(n)),e}function wr(n,r,e){n=mr(n),r=br(r,"emval::as");var t=[],o=Jn(t);return W[e>>2]=o,r.toWireType(t,n)}function Ar(n,r){return Jn((n=mr(n))[r=mr(r)])}function Tr(n){n>4&&(Ln[n].refcount+=1)}var _r={};function Cr(n){var r=_r[n];return void 0===r?Sn(n):r}function Er(n){return Jn(Cr(n))}function Sr(n){rr(Ln[n].value),Vn(n)}function Fr(n,r){return Jn((n=br(n,"_emval_take_value")).readValueFromPointer(r))}function Pr(){n.abort()}function Mr(){return F.length}function Rr(n){Vr("OOM")}function Wr(n){n=I(n,65536);var r=S.byteLength;try{return-1!==v.grow((n-r)/65536)&&(S=v.buffer,!0)}catch(n){return!1}}function kr(n){var r=Mr();if(n>2147418112)return!1;for(var e=Math.max(r,16777216);e<n;)e=e<=536870912?I(2*e,65536):Math.min(I((3*e+2147483648)/4,65536),2147418112);return!!Wr(e)&&(U(),!0)}function xr(n,r,e){P.set(P.subarray(r,r+e),n)}function Or(r){return n.___errno_location&&(W[n.___errno_location()>>2]=r),r}Cn(),jn=n.BindingError=On(Error,"BindingError"),Un=n.InternalError=On(Error,"InternalError"),Xn(),fr=n.UnboundTypeError=On(Error,"UnboundTypeError");var jr={},Ir={c:Vr,t:h,b:pn,B:dn,u:hn,j:Or,s:bn,i:wn,r:An,q:Tn,p:Dn,F:Yn,o:$n,g:lr,e:dr,d:yr,n:vr,E:gr,D:hr,h:wr,C:Vn,m:Ar,l:Tr,A:Er,z:Sr,f:Fr,k:Pr,y:Mr,x:xr,w:kr,v:Rr,a:N},Ur=n.asm(jr,Ir,S);n.asm=Ur,n.___errno_location=function(){return n.asm.G.apply(null,arguments)};var Br=n.___getTypeName=function(){return n.asm.H.apply(null,arguments)},Nr=n._free=function(){return n.asm.I.apply(null,arguments)},zr=n._malloc=function(){return n.asm.J.apply(null,arguments)},Dr=n.globalCtors=function(){return n.asm.Y.apply(null,arguments)};function Hr(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}function Lr(r){function e(){n.calledRun||(n.calledRun=!0,m||(K(),Y(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),Z()))}r=r||n.arguments,nn>0||(J(),nn>0||n.calledRun||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),e()}),1)):e()))}function Vr(r){throw n.onAbort&&n.onAbort(r),void 0!==r?(d(r),y(r),r=JSON.stringify(r)):r="",m=!0,"abort("+r+"). Build with -s ASSERTIONS=1 for more info."}if(n.dynCall_ifffffffffffff=function(){return n.asm.K.apply(null,arguments)},n.dynCall_ii=function(){return n.asm.L.apply(null,arguments)},n.dynCall_iidiiii=function(){return n.asm.M.apply(null,arguments)},n.dynCall_iifffffffffffff=function(){return n.asm.N.apply(null,arguments)},n.dynCall_iii=function(){return n.asm.O.apply(null,arguments)},n.dynCall_iiii=function(){return n.asm.P.apply(null,arguments)},n.dynCall_jiji=function(){return n.asm.Q.apply(null,arguments)},n.dynCall_v=function(){return n.asm.R.apply(null,arguments)},n.dynCall_vi=function(){return n.asm.S.apply(null,arguments)},n.dynCall_vii=function(){return n.asm.T.apply(null,arguments)},n.dynCall_viii=function(){return n.asm.U.apply(null,arguments)},n.dynCall_viiii=function(){return n.asm.V.apply(null,arguments)},n.dynCall_viiiii=function(){return n.asm.W.apply(null,arguments)},n.dynCall_viiiiii=function(){return n.asm.X.apply(null,arguments)},n.asm=Ur,n.then=function(r){if(n.calledRun)r(n);else{var e=n.onRuntimeInitialized;n.onRuntimeInitialized=function(){e&&e(),r(n)}}return n},Hr.prototype=new Error,Hr.prototype.constructor=Hr,en=function r(){n.calledRun||Lr(),n.calledRun||(en=r)},n.run=Lr,n.abort=Vr,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return n.noExitRuntime=!0,Lr(),n.ready=new Promise((function(r,e){delete n.then,n.onAbort=function(n){e(n)},$((function(){r(n)}))})),n});const i={cellSize:.166,cellHeight:.1,agentHeight:1.7,agentRadius:.5,agentMaxClimb:.3,agentMaxSlope:45,regionMinSize:1,regionMergeSize:20,edgeMaxLen:12,edgeMaxError:1,vertsPerPoly:3,detailSampleDist:16,detailSampleMaxError:1};let a=null;self.onmessage=async n=>{const r=n.data;try{a||(a=o({locateFile(n){if(n.endsWith(".wasm"))return r.params.wasmUrl}})),await a.ready,a.loadArray(r.verts,r.faces)||self.postMessage({error:"error loading navmesh data"});const{cellSize:n,cellHeight:e,agentHeight:t,agentRadius:u,agentMaxClimb:f,agentMaxSlope:c,regionMinSize:s,regionMergeSize:l,edgeMaxLen:p,edgeMaxError:d,vertsPerPoly:y,detailSampleDist:v,detailSampleMaxError:g}=Object.assign({},i,r.params||{}),h=a.build(n,e,t,u,f,c,s,l,p,d,y,v,g);if(13===h)return self.postMessage({indices:[],verts:[],heightfield:null}),void a.freeNavMesh();if(0!==h)return self.postMessage({error:"unknown error building nav mesh",status:h}),void a.freeNavMesh();const m=a.getMeshes(),b=a.getVerts(),w=new Float32Array(b.length);w.set(b);const A=a.getTris(),T=new Uint16Array(A.length/4*3);let _=0;const C=m.length/4;for(let n=0;n<C;n++){const r=4*n,e=m[r],t=m[r+2],o=m[r+3];for(let n=0;n<o;n++){const r=4*(t+n),o=e+A[r],i=e+A[r+1],a=e+A[r+2];T[_++]=o,T[_++]=i,T[_++]=a}}self.postMessage({indices:T,verts:w},[T.buffer,w.buffer]),a.freeNavMesh()}catch(n){console.error(n),self.postMessage({error:n.message||"unknown error building nav mesh"})}}}]);\n//# sourceMappingURL=recast.worker-cce89d40ba2245c4f432.js.map',null)}},function(e,t,n){e.exports=function(){return n(261)('/*! For license information please see heightfield.worker-3041b1241578c9896313.js.LICENSE.txt */\n!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}([function(t,e,n){"use strict";n.r(e),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\\s*function\\s*([^\\(\\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e});function i(){}Object.assign(i.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,t)}}}});for(var r=[],a=0;a<256;a++)r[a]=(a<16?"0":"")+a.toString(16);var o={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(r[255&t]+r[t>>8&255]+r[t>>16&255]+r[t>>24&255]+"-"+r[255&e]+r[e>>8&255]+"-"+r[e>>16&15|64]+r[e>>24&255]+"-"+r[63&n|128]+r[n>>8&255]+"-"+r[n>>16&255]+r[n>>24&255]+r[255&i]+r[i>>8&255]+r[i>>16&255]+r[i>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*o.DEG2RAD},radToDeg:function(t){return t*o.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function s(t,e){this.x=t||0,this.y=e||0}function c(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}Object.defineProperties(s.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(s.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*n-a*i+t.x,this.y=r*i+a*n+t.y,this}}),Object.assign(c,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,a,o){var s=n[i+0],c=n[i+1],l=n[i+2],h=n[i+3],u=r[a+0],p=r[a+1],d=r[a+2],f=r[a+3];if(h!==f||s!==u||c!==p||l!==d){var m=1-o,v=s*u+c*p+l*d+h*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var x=Math.sqrt(y),b=Math.atan2(x,v*g);m=Math.sin(m*b)/x,o=Math.sin(o*b)/x}var w=o*g;if(s=s*m+u*w,c=c*m+p*w,l=l*m+d*w,h=h*m+f*w,m===1-o){var _=1/Math.sqrt(s*s+c*c+l*l+h*h);s*=_,c*=_,l*=_,h*=_}}t[e]=s,t[e+1]=c,t[e+2]=l,t[e+3]=h}}),Object.defineProperties(c.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(c.prototype,{isQuaternion:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,a=t.order,o=Math.cos,s=Math.sin,c=o(n/2),l=o(i/2),h=o(r/2),u=s(n/2),p=s(i/2),d=s(r/2);return"XYZ"===a?(this._x=u*l*h+c*p*d,this._y=c*p*h-u*l*d,this._z=c*l*d+u*p*h,this._w=c*l*h-u*p*d):"YXZ"===a?(this._x=u*l*h+c*p*d,this._y=c*p*h-u*l*d,this._z=c*l*d-u*p*h,this._w=c*l*h+u*p*d):"ZXY"===a?(this._x=u*l*h-c*p*d,this._y=c*p*h+u*l*d,this._z=c*l*d+u*p*h,this._w=c*l*h-u*p*d):"ZYX"===a?(this._x=u*l*h-c*p*d,this._y=c*p*h+u*l*d,this._z=c*l*d-u*p*h,this._w=c*l*h+u*p*d):"YZX"===a?(this._x=u*l*h+c*p*d,this._y=c*p*h+u*l*d,this._z=c*l*d-u*p*h,this._w=c*l*h-u*p*d):"XZY"===a&&(this._x=u*l*h-c*p*d,this._y=c*p*h-u*l*d,this._z=c*l*d+u*p*h,this._w=c*l*h+u*p*d),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,i=n[0],r=n[4],a=n[8],o=n[1],s=n[5],c=n[9],l=n[2],h=n[6],u=n[10],p=i+s+u;return p>0?(e=.5/Math.sqrt(p+1),this._w=.25/e,this._x=(h-c)*e,this._y=(a-l)*e,this._z=(o-r)*e):i>s&&i>u?(e=2*Math.sqrt(1+i-s-u),this._w=(h-c)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(a+l)/e):s>u?(e=2*Math.sqrt(1+s-i-u),this._w=(a-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(c+h)/e):(e=2*Math.sqrt(1+u-i-s),this._w=(o-r)/e,this._x=(a+l)/e,this._y=(c+h)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(o.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var i=Math.min(1,e/n);return this.slerp(t,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,a=t._w,o=e._x,s=e._y,c=e._z,l=e._w;return this._x=n*l+a*o+i*c-r*s,this._y=i*l+a*s+r*o-n*c,this._z=r*l+a*c+n*s-i*o,this._w=a*l-n*o-i*s-r*c,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=1-o*o;if(s<=Number.EPSILON){var c=1-e;return this._w=c*a+e*this._w,this._x=c*n+e*this._x,this._y=c*i+e*this._y,this._z=c*r+e*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),h=Math.atan2(l,o),u=Math.sin((1-e)*h)/l,p=Math.sin(e*h)/l;return this._w=a*u+this._w*p,this._x=n*u+this._x*p,this._y=i*u+this._y*p,this._z=r*u+this._z*p,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var l=new u,h=new c;function u(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}Object.assign(u.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(h.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(h.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,a=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*a,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,o=t.z,s=t.w,c=s*e+a*i-o*n,l=s*n+o*e-r*i,h=s*i+r*n-a*e,u=-r*e-a*n-o*i;return this.x=c*s+u*-r+l*-o-h*-a,this.y=l*s+u*-a+h*-r-c*-o,this.z=h*s+u*-o+c*-a-l*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,a=e.x,o=e.y,s=e.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(t){return l.copy(this).projectOnVector(t),this.sub(l)},reflect:function(t){return this.sub(l.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());0===e&&console.error("THREE.Vector3: angleTo() can\'t handle zero length vectors.");var n=this.dot(t)/e;return Math.acos(o.clamp(n,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}});var p,d=new u;function f(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(f.prototype,{isMatrix3:!0,set:function(t,e,n,i,r,a,o,s,c){var l=this.elements;return l[0]=t,l[1]=i,l[2]=o,l[3]=e,l[4]=r,l[5]=s,l[6]=n,l[7]=a,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(t){for(var e=0,n=t.count;e<n;e++)d.x=t.getX(e),d.y=t.getY(e),d.z=t.getZ(e),d.applyMatrix3(this),t.setXYZ(e,d.x,d.y,d.z);return t},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[3],s=n[6],c=n[1],l=n[4],h=n[7],u=n[2],p=n[5],d=n[8],f=i[0],m=i[3],v=i[6],g=i[1],y=i[4],x=i[7],b=i[2],w=i[5],_=i[8];return r[0]=a*f+o*g+s*b,r[3]=a*m+o*y+s*w,r[6]=a*v+o*x+s*_,r[1]=c*f+l*g+h*b,r[4]=c*m+l*y+h*w,r[7]=c*v+l*x+h*_,r[2]=u*f+p*g+d*b,r[5]=u*m+p*y+d*w,r[8]=u*v+p*x+d*_,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],c=t[7],l=t[8];return e*a*l-e*o*c-n*r*l+n*o*s+i*r*c-i*a*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,i=this.elements,r=n[0],a=n[1],o=n[2],s=n[3],c=n[4],l=n[5],h=n[6],u=n[7],p=n[8],d=p*c-l*u,f=l*h-p*s,m=u*s-c*h,v=r*d+a*f+o*m;if(0===v){var g="THREE.Matrix3: .getInverse() can\'t invert matrix, determinant is 0";if(!0===e)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return i[0]=d*y,i[1]=(o*u-p*a)*y,i[2]=(l*a-o*c)*y,i[3]=f*y,i[4]=(p*r-o*h)*y,i[5]=(o*s-l*r)*y,i[6]=m*y,i[7]=(a*h-u*r)*y,i[8]=(c*r-a*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,i,r,a,o){var s=Math.cos(r),c=Math.sin(r);this.set(n*s,n*c,-n*(s*a+c*o)+a+t,-i*c,i*s,-i*(-c*a+s*o)+o+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],a=i[3],o=i[6],s=i[1],c=i[4],l=i[7];return i[0]=e*r+n*s,i[3]=e*a+n*c,i[6]=e*o+n*l,i[1]=-n*r+e*s,i[4]=-n*a+e*c,i[7]=-n*o+e*l,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var m={getDataURL:function(t){var e;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===p&&(p=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),p.width=t.width,p.height=t.height;var n=p.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=p}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},v=0;function g(t,e,n,i,r,a,c,l,h,u){Object.defineProperty(this,"id",{value:v++}),this.uuid=o.generateUUID(),this.name="",this.image=void 0!==t?t:g.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:g.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:1001,this.wrapT=void 0!==i?i:1001,this.magFilter=void 0!==r?r:1006,this.minFilter=void 0!==a?a:1008,this.anisotropy=void 0!==h?h:1,this.format=void 0!==c?c:1023,this.type=void 0!==l?l:1009,this.offset=new s(0,0),this.repeat=new s(1,1),this.center=new s(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new f,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:3e3,this.version=0,this.onUpdate=null}function y(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}function x(t,e,n){this.width=t,this.height=e,this.scissor=new y(0,0,t,e),this.scissorTest=!1,this.viewport=new y(0,0,t,e),n=n||{},this.texture=new g(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:1006,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function b(t,e,n){x.call(this,t,e,n),this.samples=4}g.DEFAULT_IMAGE=void 0,g.DEFAULT_MAPPING=300,g.prototype=Object.assign(Object.create(i.prototype),{constructor:g,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=o.generateUUID()),!e&&void 0===t.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var a=0,s=i.length;a<s;a++)r.push(m.getDataURL(i[a]))}else r=m.getDataURL(i);t.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case 1001:t.x=t.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case 1001:t.y=t.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(g.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.defineProperties(y.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(y.prototype,{isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*e+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*e+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*e+a[7]*n+a[11]*i+a[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r,a=t.elements,o=a[0],s=a[4],c=a[8],l=a[1],h=a[5],u=a[9],p=a[2],d=a[6],f=a[10];if(Math.abs(s-l)<.01&&Math.abs(c-p)<.01&&Math.abs(u-d)<.01){if(Math.abs(s+l)<.1&&Math.abs(c+p)<.1&&Math.abs(u+d)<.1&&Math.abs(o+h+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(o+1)/2,v=(h+1)/2,g=(f+1)/2,y=(s+l)/4,x=(c+p)/4,b=(u+d)/4;return m>v&&m>g?m<.01?(n=0,i=.707106781,r=.707106781):(i=y/(n=Math.sqrt(m)),r=x/n):v>g?v<.01?(n=.707106781,i=0,r=.707106781):(n=y/(i=Math.sqrt(v)),r=b/i):g<.01?(n=.707106781,i=.707106781,r=0):(n=x/(r=Math.sqrt(g)),i=b/r),this.set(n,i,r,e),this}var w=Math.sqrt((d-u)*(d-u)+(c-p)*(c-p)+(l-s)*(l-s));return Math.abs(w)<.001&&(w=1),this.x=(d-u)/w,this.y=(c-p)/w,this.z=(l-s)/w,this.w=Math.acos((o+h+f-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),x.prototype=Object.assign(Object.create(i.prototype),{constructor:x,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),b.prototype=Object.assign(Object.create(x.prototype),{constructor:b,isWebGLMultisampleRenderTarget:!0,copy:function(t){return x.prototype.copy.call(this,t),this.samples=t.samples,this}});var w=new u,_=new L,M=new u(0,0,0),S=new u(1,1,1),T=new u,E=new u,A=new u;function L(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(L.prototype,{isMatrix4:!0,set:function(t,e,n,i,r,a,o,s,c,l,h,u,p,d,f,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=i,v[1]=r,v[5]=a,v[9]=o,v[13]=s,v[2]=c,v[6]=l,v[10]=h,v[14]=u,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new L).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,i=1/w.setFromMatrixColumn(t,0).length(),r=1/w.setFromMatrixColumn(t,1).length(),a=1/w.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),c=Math.sin(i),l=Math.cos(r),h=Math.sin(r);if("XYZ"===t.order){var u=a*l,p=a*h,d=o*l,f=o*h;e[0]=s*l,e[4]=-s*h,e[8]=c,e[1]=p+d*c,e[5]=u-f*c,e[9]=-o*s,e[2]=f-u*c,e[6]=d+p*c,e[10]=a*s}else if("YXZ"===t.order){var m=s*l,v=s*h,g=c*l,y=c*h;e[0]=m+y*o,e[4]=g*o-v,e[8]=a*c,e[1]=a*h,e[5]=a*l,e[9]=-o,e[2]=v*o-g,e[6]=y+m*o,e[10]=a*s}else if("ZXY"===t.order){m=s*l,v=s*h,g=c*l,y=c*h;e[0]=m-y*o,e[4]=-a*h,e[8]=g+v*o,e[1]=v+g*o,e[5]=a*l,e[9]=y-m*o,e[2]=-a*c,e[6]=o,e[10]=a*s}else if("ZYX"===t.order){u=a*l,p=a*h,d=o*l,f=o*h;e[0]=s*l,e[4]=d*c-p,e[8]=u*c+f,e[1]=s*h,e[5]=f*c+u,e[9]=p*c-d,e[2]=-c,e[6]=o*s,e[10]=a*s}else if("YZX"===t.order){var x=a*s,b=a*c,w=o*s,_=o*c;e[0]=s*l,e[4]=_-x*h,e[8]=w*h+b,e[1]=h,e[5]=a*l,e[9]=-o*l,e[2]=-c*l,e[6]=b*h+w,e[10]=x-_*h}else if("XZY"===t.order){x=a*s,b=a*c,w=o*s,_=o*c;e[0]=s*l,e[4]=-h,e[8]=c*l,e[1]=x*h+_,e[5]=a*l,e[9]=b*h-w,e[2]=w*h-b,e[6]=o*l,e[10]=_*h+x}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(M,t,S)},lookAt:function(t,e,n){var i=this.elements;return A.subVectors(t,e),0===A.lengthSq()&&(A.z=1),A.normalize(),T.crossVectors(n,A),0===T.lengthSq()&&(1===Math.abs(n.z)?A.x+=1e-4:A.z+=1e-4,A.normalize(),T.crossVectors(n,A)),T.normalize(),E.crossVectors(A,T),i[0]=T.x,i[4]=E.x,i[8]=A.x,i[1]=T.y,i[5]=E.y,i[9]=A.y,i[2]=T.z,i[6]=E.z,i[10]=A.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[4],s=n[8],c=n[12],l=n[1],h=n[5],u=n[9],p=n[13],d=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],x=n[11],b=n[15],w=i[0],_=i[4],M=i[8],S=i[12],T=i[1],E=i[5],A=i[9],L=i[13],P=i[2],R=i[6],C=i[10],O=i[14],I=i[3],N=i[7],D=i[11],z=i[15];return r[0]=a*w+o*T+s*P+c*I,r[4]=a*_+o*E+s*R+c*N,r[8]=a*M+o*A+s*C+c*D,r[12]=a*S+o*L+s*O+c*z,r[1]=l*w+h*T+u*P+p*I,r[5]=l*_+h*E+u*R+p*N,r[9]=l*M+h*A+u*C+p*D,r[13]=l*S+h*L+u*O+p*z,r[2]=d*w+f*T+m*P+v*I,r[6]=d*_+f*E+m*R+v*N,r[10]=d*M+f*A+m*C+v*D,r[14]=d*S+f*L+m*O+v*z,r[3]=g*w+y*T+x*P+b*I,r[7]=g*_+y*E+x*R+b*N,r[11]=g*M+y*A+x*C+b*D,r[15]=g*S+y*L+x*O+b*z,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(t){for(var e=0,n=t.count;e<n;e++)w.x=t.getX(e),w.y=t.getY(e),w.z=t.getZ(e),w.applyMatrix4(this),t.setXYZ(e,w.x,w.y,w.z);return t},determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],a=t[1],o=t[5],s=t[9],c=t[13],l=t[2],h=t[6],u=t[10],p=t[14];return t[3]*(+r*s*h-i*c*h-r*o*u+n*c*u+i*o*p-n*s*p)+t[7]*(+e*s*p-e*c*u+r*a*u-i*a*p+i*c*l-r*s*l)+t[11]*(+e*c*h-e*o*p-r*a*h+n*a*p+r*o*l-n*c*l)+t[15]*(-i*o*l-e*s*h+e*o*u+i*a*h-n*a*u+n*s*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this},getInverse:function(t,e){var n=this.elements,i=t.elements,r=i[0],a=i[1],o=i[2],s=i[3],c=i[4],l=i[5],h=i[6],u=i[7],p=i[8],d=i[9],f=i[10],m=i[11],v=i[12],g=i[13],y=i[14],x=i[15],b=d*y*u-g*f*u+g*h*m-l*y*m-d*h*x+l*f*x,w=v*f*u-p*y*u-v*h*m+c*y*m+p*h*x-c*f*x,_=p*g*u-v*d*u+v*l*m-c*g*m-p*l*x+c*d*x,M=v*d*h-p*g*h-v*l*f+c*g*f+p*l*y-c*d*y,S=r*b+a*w+o*_+s*M;if(0===S){var T="THREE.Matrix4: .getInverse() can\'t invert matrix, determinant is 0";if(!0===e)throw new Error(T);return console.warn(T),this.identity()}var E=1/S;return n[0]=b*E,n[1]=(g*f*s-d*y*s-g*o*m+a*y*m+d*o*x-a*f*x)*E,n[2]=(l*y*s-g*h*s+g*o*u-a*y*u-l*o*x+a*h*x)*E,n[3]=(d*h*s-l*f*s-d*o*u+a*f*u+l*o*m-a*h*m)*E,n[4]=w*E,n[5]=(p*y*s-v*f*s+v*o*m-r*y*m-p*o*x+r*f*x)*E,n[6]=(v*h*s-c*y*s-v*o*u+r*y*u+c*o*x-r*h*x)*E,n[7]=(c*f*s-p*h*s+p*o*u-r*f*u-c*o*m+r*h*m)*E,n[8]=_*E,n[9]=(v*d*s-p*g*s-v*a*m+r*g*m+p*a*x-r*d*x)*E,n[10]=(c*g*s-v*l*s+v*a*u-r*g*u-c*a*x+r*l*x)*E,n[11]=(p*l*s-c*d*s-p*a*u+r*d*u+c*a*m-r*l*m)*E,n[12]=M*E,n[13]=(p*g*o-v*d*o+v*a*f-r*g*f-p*a*y+r*d*y)*E,n[14]=(v*l*o-c*g*o-v*a*h+r*g*h+c*a*y-r*l*y)*E,n[15]=(c*d*o-p*l*o+p*a*h-r*d*h-c*a*f+r*l*f)*E,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,a=t.x,o=t.y,s=t.z,c=r*a,l=r*o;return this.set(c*a+n,c*o-i*s,c*s+i*o,0,c*o+i*s,l*o+n,l*s-i*a,0,c*s-i*o,l*s+i*a,r*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var i=this.elements,r=e._x,a=e._y,o=e._z,s=e._w,c=r+r,l=a+a,h=o+o,u=r*c,p=r*l,d=r*h,f=a*l,m=a*h,v=o*h,g=s*c,y=s*l,x=s*h,b=n.x,w=n.y,_=n.z;return i[0]=(1-(f+v))*b,i[1]=(p+x)*b,i[2]=(d-y)*b,i[3]=0,i[4]=(p-x)*w,i[5]=(1-(u+v))*w,i[6]=(m+g)*w,i[7]=0,i[8]=(d+y)*_,i[9]=(m-g)*_,i[10]=(1-(u+f))*_,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:function(t,e,n){var i=this.elements,r=w.set(i[0],i[1],i[2]).length(),a=w.set(i[4],i[5],i[6]).length(),o=w.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],_.copy(this);var s=1/r,c=1/a,l=1/o;return _.elements[0]*=s,_.elements[1]*=s,_.elements[2]*=s,_.elements[4]*=c,_.elements[5]*=c,_.elements[6]*=c,_.elements[8]*=l,_.elements[9]*=l,_.elements[10]*=l,e.setFromRotationMatrix(_),n.x=r,n.y=a,n.z=o,this},makePerspective:function(t,e,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*r/(e-t),c=2*r/(n-i),l=(e+t)/(e-t),h=(n+i)/(n-i),u=-(a+r)/(a-r),p=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=c,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,i,r,a){var o=this.elements,s=1/(e-t),c=1/(n-i),l=1/(a-r),h=(e+t)*s,u=(n+i)*c,p=(a+r)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}});var P=new L,R=new c;function C(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||C.DefaultOrder}function O(){this.mask=1}C.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],C.DefaultOrder="XYZ",Object.defineProperties(C.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(C.prototype,{isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=o.clamp,r=t.elements,a=r[0],s=r[4],c=r[8],l=r[1],h=r[5],u=r[9],p=r[2],d=r[6],f=r[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(i(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(d,h),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(c,f),this._z=Math.atan2(l,h)):(this._y=Math.atan2(-p,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-p,f),this._z=Math.atan2(-s,h)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===e?(this._y=Math.asin(-i(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,h))):"YZX"===e?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,h),this._y=Math.atan2(-p,a)):(this._x=0,this._y=Math.atan2(c,f))):"XZY"===e?(this._z=Math.asin(-i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(d,h),this._y=Math.atan2(c,a)):(this._x=Math.atan2(-u,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return P.makeRotationFromQuaternion(t),this.setFromRotationMatrix(P,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return R.setFromEuler(this),this.setFromQuaternion(R,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new u(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(O.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}});var I=0,N=new u,D=new c,z=new L,B=new u,U=new u,F=new u,G=new c,V=new u(1,0,0),H=new u(0,1,0),j=new u(0,0,1),k={type:"added"},W={type:"removed"};function q(){Object.defineProperty(this,"id",{value:I++}),this.uuid=o.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=q.DefaultUp.clone();var t=new u,e=new C,n=new c,i=new u(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new L},normalMatrix:{value:new f}}),this.matrix=new L,this.matrixWorld=new L,this.matrixAutoUpdate=q.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new O,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function X(){q.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}q.DefaultUp=new u(0,1,0),q.DefaultMatrixAutoUpdate=!0,q.prototype=Object.assign(Object.create(i.prototype),{constructor:q,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return D.setFromAxisAngle(t,e),this.quaternion.multiply(D),this},rotateOnWorldAxis:function(t,e){return D.setFromAxisAngle(t,e),this.quaternion.premultiply(D),this},rotateX:function(t){return this.rotateOnAxis(V,t)},rotateY:function(t){return this.rotateOnAxis(H,t)},rotateZ:function(t){return this.rotateOnAxis(j,t)},translateOnAxis:function(t,e){return N.copy(t).applyQuaternion(this.quaternion),this.position.add(N.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(V,t)},translateY:function(t){return this.translateOnAxis(H,t)},translateZ:function(t){return this.translateOnAxis(j,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(z.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?B.copy(t):B.set(t,e,n);var i=this.parent;this.updateWorldMatrix(!0,!1),U.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?z.lookAt(U,B,this.up):z.lookAt(B,U,this.up),this.quaternion.setFromRotationMatrix(z),i&&(z.extractRotation(i.matrixWorld),D.setFromRotationMatrix(z),this.quaternion.premultiply(D.inverse()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can\'t be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(k)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(W)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),z.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),z.multiply(t.parent.matrixWorld)),t.applyMatrix(z),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new u),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new c),this.updateMatrixWorld(!0),this.matrixWorld.decompose(U,t,F),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new u),this.updateMatrixWorld(!0),this.matrixWorld.decompose(U,G,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new u),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var i=this.children,r=0,a=i.length;r<a;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isMesh&&0!==this.drawMode&&(i.drawMode=this.drawMode),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,c=o.length;s<c;s++){var l=o[s];r(t.shapes,l)}else r(t.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var h=[];for(s=0,c=this.material.length;s<c;s++)h.push(r(t.materials,this.material[s]));i.material=h}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(t).object)}if(e){var u=m(t.geometries),p=m(t.materials),d=m(t.textures),f=m(t.images);o=m(t.shapes);u.length>0&&(n.geometries=u),p.length>0&&(n.materials=p),d.length>0&&(n.textures=d),f.length>0&&(n.images=f),o.length>0&&(n.shapes=o)}return n.object=i,n;function m(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone())}return this}}),X.prototype=Object.assign(Object.create(q.prototype),{constructor:X,isScene:!0,copy:function(t,e){return q.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=q.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Y=[new u,new u,new u,new u,new u,new u,new u,new u],Z=new u,J=new st,Q=new u,K=new u,$=new u,tt=new u,et=new u,nt=new u,it=new u,rt=new u,at=new u,ot=new u;function st(t,e){this.min=void 0!==t?t:new u(1/0,1/0,1/0),this.max=void 0!==e?e:new u(-1/0,-1/0,-1/0)}function ct(t,e,n,i,r){var a,o;for(a=0,o=t.length-3;a<=o;a+=3){ot.fromArray(t,a);var s=r.x*Math.abs(ot.x)+r.y*Math.abs(ot.y)+r.z*Math.abs(ot.z),c=e.dot(ot),l=n.dot(ot),h=i.dot(ot);if(Math.max(-Math.max(c,l,h),Math.min(c,l,h))>s)return!1}return!0}Object.assign(st.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,c=t.length;s<c;s+=3){var l=t[s],h=t[s+1],u=t[s+2];l<e&&(e=l),h<n&&(n=h),u<i&&(i=u),l>r&&(r=l),h>a&&(a=h),u>o&&(o=u)}return this.min.set(e,n,i),this.max.set(r,a,o),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,c=t.count;s<c;s++){var l=t.getX(s),h=t.getY(s),u=t.getZ(s);l<e&&(e=l),h<n&&(n=h),u<i&&(i=u),l>r&&(r=l),h>a&&(a=h),u>o&&(o=u)}return this.min.set(e,n,i),this.max.set(r,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=Z.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new u),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new u),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),J.copy(e.boundingBox),J.applyMatrix4(t.matrixWorld),this.expandByPoint(J.min),this.expandByPoint(J.max));for(var n=t.children,i=0,r=n.length;i<r;i++)this.expandByObject(n[i]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new u),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,Z),Z.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(t){if(this.isEmpty())return!1;this.getCenter(it),rt.subVectors(this.max,it),Q.subVectors(t.a,it),K.subVectors(t.b,it),$.subVectors(t.c,it),tt.subVectors(K,Q),et.subVectors($,K),nt.subVectors(Q,$);var e=[0,-tt.z,tt.y,0,-et.z,et.y,0,-nt.z,nt.y,tt.z,0,-tt.x,et.z,0,-et.x,nt.z,0,-nt.x,-tt.y,tt.x,0,-et.y,et.x,0,-nt.y,nt.x,0];return!!ct(e,Q,K,$,rt)&&(!!ct(e=[1,0,0,0,1,0,0,0,1],Q,K,$,rt)&&(at.crossVectors(tt,et),ct(e=[at.x,at.y,at.z],Q,K,$,rt)))},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new u),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return Z.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(Z).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()||(Y[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Y[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Y[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Y[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Y[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Y[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Y[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Y[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Y)),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var lt=new st;function ht(t,e){this.center=void 0!==t?t:new u,this.radius=void 0!==e?e:0}Object.assign(ht.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var n=this.center;void 0!==e?n.copy(e):lt.setFromPoints(t).getCenter(n);for(var i=0,r=0,a=t.length;r<a;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new u),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new st),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var ut=new u,pt=new u,dt=new u,ft=new u,mt=new u,vt=new u,gt=new u;function yt(t,e){this.origin=void 0!==t?t:new u,this.direction=void 0!==e?e:new u(0,0,-1)}Object.assign(yt.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new u),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,ut)),this},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new u),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=ut.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(ut.copy(this.direction).multiplyScalar(e).add(this.origin),ut.distanceToSquared(t))},distanceSqToSegment:function(t,e,n,i){pt.copy(t).add(e).multiplyScalar(.5),dt.copy(e).sub(t).normalize(),ft.copy(this.origin).sub(pt);var r,a,o,s,c=.5*t.distanceTo(e),l=-this.direction.dot(dt),h=ft.dot(this.direction),u=-ft.dot(dt),p=ft.lengthSq(),d=Math.abs(1-l*l);if(d>0)if(a=l*h-u,s=c*d,(r=l*u-h)>=0)if(a>=-s)if(a<=s){var f=1/d;o=(r*=f)*(r+l*(a*=f)+2*h)+a*(l*r+a+2*u)+p}else a=c,o=-(r=Math.max(0,-(l*a+h)))*r+a*(a+2*u)+p;else a=-c,o=-(r=Math.max(0,-(l*a+h)))*r+a*(a+2*u)+p;else a<=-s?o=-(r=Math.max(0,-(-l*c+h)))*r+(a=r>0?-c:Math.min(Math.max(-c,-u),c))*(a+2*u)+p:a<=s?(r=0,o=(a=Math.min(Math.max(-c,-u),c))*(a+2*u)+p):o=-(r=Math.max(0,-(l*c+h)))*r+(a=r>0?c:Math.min(Math.max(-c,-u),c))*(a+2*u)+p;else a=l>0?-c:c,o=-(r=Math.max(0,-(l*a+h)))*r+a*(a+2*u)+p;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(dt).multiplyScalar(a).add(pt),o},intersectSphere:function(t,e){ut.subVectors(t.center,this.origin);var n=ut.dot(this.direction),i=ut.dot(ut)-n*n,r=t.radius*t.radius;if(i>r)return null;var a=Math.sqrt(r-i),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,e):this.at(o,e)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,i,r,a,o,s,c=1/this.direction.x,l=1/this.direction.y,h=1/this.direction.z,u=this.origin;return c>=0?(n=(t.min.x-u.x)*c,i=(t.max.x-u.x)*c):(n=(t.max.x-u.x)*c,i=(t.min.x-u.x)*c),l>=0?(r=(t.min.y-u.y)*l,a=(t.max.y-u.y)*l):(r=(t.max.y-u.y)*l,a=(t.min.y-u.y)*l),n>a||r>i?null:((r>n||n!=n)&&(n=r),(a<i||i!=i)&&(i=a),h>=0?(o=(t.min.z-u.z)*h,s=(t.max.z-u.z)*h):(o=(t.max.z-u.z)*h,s=(t.min.z-u.z)*h),n>s||o>i?null:((o>n||n!=n)&&(n=o),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)))},intersectsBox:function(t){return null!==this.intersectBox(t,ut)},intersectTriangle:function(t,e,n,i,r){mt.subVectors(e,t),vt.subVectors(n,t),gt.crossVectors(mt,vt);var a,o=this.direction.dot(gt);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}ft.subVectors(this.origin,t);var s=a*this.direction.dot(vt.crossVectors(ft,vt));if(s<0)return null;var c=a*this.direction.dot(mt.cross(ft));if(c<0)return null;if(s+c>o)return null;var l=-a*ft.dot(gt);return l<0?null:this.at(l/o,r)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var xt=new u,bt=new u,wt=new f;function _t(t,e){this.normal=void 0!==t?t:new u(1,0,0),this.constant=void 0!==e?e:0}Object.assign(_t.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){var i=xt.subVectors(n,e).cross(bt.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new u),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new u);var n=t.delta(xt),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;var r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?void 0:e.copy(n).multiplyScalar(r).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new u),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){var n=e||wt.getNormalMatrix(t),i=this.coplanarPoint(xt).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var Mt=new u,St=new u,Tt=new u,Et=new u,At=new u,Lt=new u,Pt=new u,Rt=new u,Ct=new u,Ot=new u;function It(t,e,n){this.a=void 0!==t?t:new u,this.b=void 0!==e?e:new u,this.c=void 0!==n?n:new u}Object.assign(It,{getNormal:function(t,e,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new u),i.subVectors(n,e),Mt.subVectors(t,e),i.cross(Mt);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)},getBarycoord:function(t,e,n,i,r){Mt.subVectors(i,e),St.subVectors(n,e),Tt.subVectors(t,e);var a=Mt.dot(Mt),o=Mt.dot(St),s=Mt.dot(Tt),c=St.dot(St),l=St.dot(Tt),h=a*c-o*o;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new u),0===h)return r.set(-2,-1,-1);var p=1/h,d=(c*s-o*l)*p,f=(a*l-o*s)*p;return r.set(1-d-f,f,d)},containsPoint:function(t,e,n,i){return It.getBarycoord(t,e,n,i,Et),Et.x>=0&&Et.y>=0&&Et.x+Et.y<=1},getUV:function(t,e,n,i,r,a,o,s){return this.getBarycoord(t,e,n,i,Et),s.set(0,0),s.addScaledVector(r,Et.x),s.addScaledVector(a,Et.y),s.addScaledVector(o,Et.z),s},isFrontFacing:function(t,e,n,i){return Mt.subVectors(n,e),St.subVectors(t,e),Mt.cross(St).dot(i)<0}}),Object.assign(It.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return Mt.subVectors(this.c,this.b),St.subVectors(this.a,this.b),.5*Mt.cross(St).length()},getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new u),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return It.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new _t),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return It.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,n,i,r){return It.getUV(t,this.a,this.b,this.c,e,n,i,r)},containsPoint:function(t){return It.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return It.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new u);var n,i,r=this.a,a=this.b,o=this.c;At.subVectors(a,r),Lt.subVectors(o,r),Rt.subVectors(t,r);var s=At.dot(Rt),c=Lt.dot(Rt);if(s<=0&&c<=0)return e.copy(r);Ct.subVectors(t,a);var l=At.dot(Ct),h=Lt.dot(Ct);if(l>=0&&h<=l)return e.copy(a);var p=s*h-l*c;if(p<=0&&s>=0&&l<=0)return n=s/(s-l),e.copy(r).addScaledVector(At,n);Ot.subVectors(t,o);var d=At.dot(Ot),f=Lt.dot(Ot);if(f>=0&&d<=f)return e.copy(o);var m=d*c-s*f;if(m<=0&&c>=0&&f<=0)return i=c/(c-f),e.copy(r).addScaledVector(Lt,i);var v=l*f-d*h;if(v<=0&&h-l>=0&&d-f>=0)return Pt.subVectors(o,a),i=(h-l)/(h-l+(d-f)),e.copy(a).addScaledVector(Pt,i);var g=1/(v+m+p);return n=m*g,i=p*g,e.copy(r).addScaledVector(At,n).addScaledVector(Lt,i)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var Nt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Dt={h:0,s:0,l:0},zt={h:0,s:0,l:0};function Bt(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function Ut(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function Ft(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Gt(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function Vt(t,e,n,i,r,a){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new u,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new Bt,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}Object.assign(Bt.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(t,e,n){if(t=o.euclideanModulo(t,1),e=o.clamp(e,0,1),n=o.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=Ut(r,i,t+1/3),this.g=Ut(r,i,t),this.b=Ut(r,i,t-1/3)}return this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec(t)){var i,r=n[1],a=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec(a)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,c=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(o,s,c)}}}else if(n=/^\\#([A-Fa-f0-9]+)$/.exec(t)){var l=n[1],h=l.length;if(3===h)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this},setColorName:function(t){var e=Nt[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=Ft(t.r),this.g=Ft(t.g),this.b=Ft(t.b),this},copyLinearToSRGB:function(t){return this.r=Gt(t.r),this.g=Gt(t.g),this.b=Gt(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,i=this.r,r=this.g,a=this.b,o=Math.max(i,r,a),s=Math.min(i,r,a),c=(s+o)/2;if(s===o)e=0,n=0;else{var l=o-s;switch(n=c<=.5?l/(o+s):l/(2-o-s),o){case i:e=(r-a)/l+(r<a?6:0);break;case r:e=(a-i)/l+2;break;case a:e=(i-r)/l+4}e/=6}return t.h=e,t.s=n,t.l=c,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){return this.getHSL(Dt),Dt.h+=t,Dt.s+=e,Dt.l+=n,this.setHSL(Dt.h,Dt.s,Dt.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(Dt),t.getHSL(zt);var n=o.lerp(Dt.h,zt.h,e),i=o.lerp(Dt.s,zt.s,e),r=o.lerp(Dt.l,zt.l,e);return this.setHSL(n,i,r),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),Bt.NAMES=Nt,Object.assign(Vt.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var Ht=0;function jt(){Object.defineProperty(this,"id",{value:Ht++}),this.uuid=o.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function kt(t){jt.call(this),this.type="MeshBasicMaterial",this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}function Wt(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this._array=t,this._itemSize=e,this.count=void 0!==t?t.length/e:0,this._normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.versionVAO=0}function qt(t,e,n){Wt.call(this,new Int8Array(t),e,n)}function Xt(t,e,n){Wt.call(this,new Uint8Array(t),e,n)}function Yt(t,e,n){Wt.call(this,new Uint8ClampedArray(t),e,n)}function Zt(t,e,n){Wt.call(this,new Int16Array(t),e,n)}function Jt(t,e,n){Wt.call(this,new Uint16Array(t),e,n)}function Qt(t,e,n){Wt.call(this,new Int32Array(t),e,n)}function Kt(t,e,n){Wt.call(this,new Uint32Array(t),e,n)}function $t(t,e,n){Wt.call(this,new Float32Array(t),e,n)}function te(t,e,n){Wt.call(this,new Float64Array(t),e,n)}function ee(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function ne(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}jt.prototype=Object.assign(Object.create(i.prototype),{constructor:jt,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": \'"+e+"\' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: \'"+e+"\' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),0!==this.vertexColors&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var r=i(t.textures),a=i(t.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexTangents=t.vertexTangents,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(jt.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),kt.prototype=Object.create(jt.prototype),kt.prototype.constructor=kt,kt.prototype.isMeshBasicMaterial=!0,kt.prototype.copy=function(t){return jt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Object.defineProperties(Wt.prototype,{needsUpdate:{set:function(t){!0===t&&this.version++}},array:{get:function(){return this._array},set:function(t){this._array=t,this.versionVAO++}},itemSize:{get:function(){return this._itemSize},set:function(t){this._itemSize=t,this.versionVAO++}},normalized:{get:function(){return this._normalized},set:function(t){this._normalized=t,this.versionVAO++}}}),Object.assign(Wt.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new Bt),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new s),e[n++]=a.x,e[n++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new u),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new y),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z,e[n++]=a.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),qt.prototype=Object.create(Wt.prototype),qt.prototype.constructor=qt,Xt.prototype=Object.create(Wt.prototype),Xt.prototype.constructor=Xt,Yt.prototype=Object.create(Wt.prototype),Yt.prototype.constructor=Yt,Zt.prototype=Object.create(Wt.prototype),Zt.prototype.constructor=Zt,Jt.prototype=Object.create(Wt.prototype),Jt.prototype.constructor=Jt,Qt.prototype=Object.create(Wt.prototype),Qt.prototype.constructor=Qt,Kt.prototype=Object.create(Wt.prototype),Kt.prototype.constructor=Kt,$t.prototype=Object.create(Wt.prototype),$t.prototype.constructor=$t,te.prototype=Object.create(Wt.prototype),te.prototype.constructor=te,Object.assign(ee.prototype,{computeGroups:function(t){for(var e,n=[],i=void 0,r=t.faces,a=0;a<r.length;a++){var o=r[a];o.materialIndex!==i&&(i=o.materialIndex,void 0!==e&&(e.count=3*a-e.start,n.push(e)),e={start:3*a,materialIndex:i})}void 0!==e&&(e.count=3*a-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,i=t.vertices,r=t.faceVertexUvs,a=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,c=t.morphTargets,l=c.length;if(l>0){e=[];for(var h=0;h<l;h++)e[h]={name:c[h].name,data:[]};this.morphTargets.position=e}var u,p=t.morphNormals,d=p.length;if(d>0){u=[];for(h=0;h<d;h++)u[h]={name:p[h].name,data:[]};this.morphTargets.normal=u}var f=t.skinIndices,m=t.skinWeights,v=f.length===i.length,g=m.length===i.length;i.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(h=0;h<n.length;h++){var y=n[h];this.vertices.push(i[y.a],i[y.b],i[y.c]);var x=y.vertexNormals;if(3===x.length)this.normals.push(x[0],x[1],x[2]);else{var b=y.normal;this.normals.push(b,b,b)}var w,_=y.vertexColors;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var M=y.color;this.colors.push(M,M,M)}if(!0===a)void 0!==(w=r[0][h])?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",h),this.uvs.push(new s,new s,new s));if(!0===o)void 0!==(w=r[1][h])?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",h),this.uvs2.push(new s,new s,new s));for(var S=0;S<l;S++){var T=c[S].vertices;e[S].data.push(T[y.a],T[y.b],T[y.c])}for(S=0;S<d;S++){var E=p[S].vertexNormals[h];u[S].data.push(E.a,E.b,E.c)}v&&this.skinIndices.push(f[y.a],f[y.b],f[y.c]),g&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var ie=1,re=new L,ae=new q,oe=new u,se=new st,ce=new st,le=new u;function he(){Object.defineProperty(this,"id",{value:ie+=2}),this.uuid=o.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}he.prototype=Object.assign(Object.create(i.prototype),{constructor:he,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(ne(t)>65535?Kt:Jt)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new f).getNormalMatrix(t).applyToBufferAttribute(n),n.needsUpdate=!0);var i=this.attributes.tangent;void 0!==i&&((new f).getNormalMatrix(t).applyToBufferAttribute(i),i.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return re.makeRotationX(t),this.applyMatrix(re),this},rotateY:function(t){return re.makeRotationY(t),this.applyMatrix(re),this},rotateZ:function(t){return re.makeRotationZ(t),this.applyMatrix(re),this},translate:function(t,e,n){return re.makeTranslation(t,e,n),this.applyMatrix(re),this},scale:function(t,e,n){return re.makeScale(t,e,n),this.applyMatrix(re),this},lookAt:function(t){return ae.lookAt(t),ae.updateMatrix(),this.applyMatrix(ae.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(oe).negate(),this.translate(oe.x,oe.y,oe.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new $t(3*e.vertices.length,3),i=new $t(3*e.colors.length,3);if(this.setAttribute("position",n.copyVector3sArray(e.vertices)),this.setAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new $t(e.lineDistances.length,1);this.setAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new $t(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new ee).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new Wt(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.setAttribute("normal",new Wt(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var i=new Float32Array(3*t.colors.length);this.setAttribute("color",new Wt(i,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new Wt(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new Wt(a,2).copyVector2sArray(t.uvs2))}for(var o in this.groups=t.groups,t.morphTargets){for(var s=[],c=t.morphTargets[o],l=0,h=c.length;l<h;l++){var u=c[l],p=new $t(3*u.data.length,3);p.name=u.name,s.push(p.copyVector3sArray(u.data))}this.morphAttributes[o]=s}if(t.skinIndices.length>0){var d=new $t(4*t.skinIndices.length,4);this.setAttribute("skinIndex",d.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var f=new $t(4*t.skinWeights.length,4);this.setAttribute("skinWeight",f.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new st);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,i=e.length;n<i;n++){var r=e[n];se.setFromBufferAttribute(r),this.morphTargetsRelative?(le.addVectors(this.boundingBox.min,se.min),this.boundingBox.expandByPoint(le),le.addVectors(this.boundingBox.max,se.max),this.boundingBox.expandByPoint(le)):(this.boundingBox.expandByPoint(se.min),this.boundingBox.expandByPoint(se.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error(\'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.\',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new ht);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var n=this.boundingSphere.center;if(se.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var a=e[i];ce.setFromBufferAttribute(a),this.morphTargetsRelative?(le.addVectors(se.min,ce.min),se.expandByPoint(le),le.addVectors(se.max,ce.max),se.expandByPoint(le)):(se.expandByPoint(ce.min),se.expandByPoint(ce.max))}se.getCenter(n);var o=0;for(i=0,r=t.count;i<r;i++)le.fromBufferAttribute(t,i),o=Math.max(o,n.distanceToSquared(le));if(e)for(i=0,r=e.length;i<r;i++){a=e[i];for(var s=this.morphTargetsRelative,c=0,l=a.count;c<l;c++)le.fromBufferAttribute(a,c),s&&(oe.fromBufferAttribute(t,c),le.add(oe)),o=Math.max(o,n.distanceToSquared(le))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error(\'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.\',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.setAttribute("normal",new Wt(new Float32Array(n.length),3));else for(var i=e.normal.array,r=0,a=i.length;r<a;r++)i[r]=0;var o,s,c,l=e.normal.array,h=new u,p=new u,d=new u,f=new u,m=new u;if(t){var v=t.array;for(r=0,a=t.count;r<a;r+=3)o=3*v[r+0],s=3*v[r+1],c=3*v[r+2],h.fromArray(n,o),p.fromArray(n,s),d.fromArray(n,c),f.subVectors(d,p),m.subVectors(h,p),f.cross(m),l[o]+=f.x,l[o+1]+=f.y,l[o+2]+=f.z,l[s]+=f.x,l[s+1]+=f.y,l[s+2]+=f.z,l[c]+=f.x,l[c+1]+=f.y,l[c+2]+=f.z}else for(r=0,a=n.length;r<a;r+=9)h.fromArray(n,r),p.fromArray(n,r+3),d.fromArray(n,r+6),f.subVectors(d,p),m.subVectors(h,p),f.cross(m),l[r]=f.x,l[r+1]=f.y,l[r+2]=f.z,l[r+3]=f.x,l[r+4]=f.y,l[r+5]=f.z,l[r+6]=f.x,l[r+7]=f.y,l[r+8]=f.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i].array,a=t.attributes[i],o=a.array,s=a.itemSize*e,c=Math.min(o.length,r.length-s),l=0,h=s;l<c;l++,h++)r[h]=o[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)le.x=t.getX(e),le.y=t.getY(e),le.z=t.getZ(e),le.normalize(),t.setXYZ(e,le.x,le.y,le.z)},toNonIndexed:function(){function t(t,e){for(var n=t.array,i=t.itemSize,r=new n.constructor(e.length*i),a=0,o=0,s=0,c=e.length;s<c;s++){a=e[s]*i;for(var l=0;l<i;l++)r[o++]=n[a++]}return new Wt(r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new he,n=this.index.array,i=this.attributes;for(var r in i){var a=t(i[r],n);e.setAttribute(r,a)}var o=this.morphAttributes;for(r in o){for(var s=[],c=o[r],l=0,h=c.length;l<h;l++){a=t(c[l],n);s.push(a)}e.morphAttributes[r]=s}e.morphTargetsRelative=this.morphTargetsRelative;for(var u=this.groups,p=(l=0,u.length);l<p;l++){var d=u[l];e.addGroup(d.start,d.count,d.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var n in r){var a=(p=r[n]).toJSON();""!==p.name&&(a.name=p.name),t.data.attributes[n]=a}var o={},s=!1;for(var n in this.morphAttributes){for(var c=this.morphAttributes[n],l=[],h=0,u=c.length;h<u;h++){var p;a=(p=c[h]).toJSON();""!==p.name&&(a.name=p.name),l.push(a)}l.length>0&&(o[n]=l,s=!0)}s&&(t.data.morphAttributes=o,t.data.morphTargetsRelative=this.morphTargetsRelative);var d=this.groups;d.length>0&&(t.data.groups=JSON.parse(JSON.stringify(d)));var f=this.boundingSphere;return null!==f&&(t.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),t},clone:function(){return(new he).copy(this)},copy:function(t){var e,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var a=t.attributes;for(e in a){var o=a[e];this.setAttribute(e,o.clone())}var s=t.morphAttributes;for(e in s){var c=[],l=s[e];for(n=0,i=l.length;n<i;n++)c.push(l[n].clone());this.morphAttributes[e]=c}this.morphTargetsRelative=t.morphTargetsRelative;var h=t.groups;for(n=0,i=h.length;n<i;n++){var u=h[n];this.addGroup(u.start,u.count,u.materialIndex)}var p=t.boundingBox;null!==p&&(this.boundingBox=p.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ue=new L,pe=new yt,de=new ht,fe=new u,me=new u,ve=new u,ge=new u,ye=new u,xe=new u,be=new u,we=new u,_e=new u,Me=new s,Se=new s,Te=new s,Ee=new u,Ae=new u;function Le(t,e){q.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new he,this.material=void 0!==e?e:new kt({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function Pe(t,e,n,i,r,a,o,s){if(null===(1===e.side?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,2!==e.side,s)))return null;Ae.copy(s),Ae.applyMatrix4(t.matrixWorld);var c=n.ray.origin.distanceTo(Ae);return c<n.near||c>n.far?null:{distance:c,point:Ae.clone(),object:t}}function Re(t,e,n,i,r,a,o,c,l,h,u,p){fe.fromBufferAttribute(r,h),me.fromBufferAttribute(r,u),ve.fromBufferAttribute(r,p);var d=t.morphTargetInfluences;if(e.morphTargets&&a&&d){be.set(0,0,0),we.set(0,0,0),_e.set(0,0,0);for(var f=0,m=a.length;f<m;f++){var v=d[f],g=a[f];0!==v&&(ge.fromBufferAttribute(g,h),ye.fromBufferAttribute(g,u),xe.fromBufferAttribute(g,p),o?(be.addScaledVector(ge,v),we.addScaledVector(ye,v),_e.addScaledVector(xe,v)):(be.addScaledVector(ge.sub(fe),v),we.addScaledVector(ye.sub(me),v),_e.addScaledVector(xe.sub(ve),v)))}fe.add(be),me.add(we),ve.add(_e)}var y=Pe(t,e,n,i,fe,me,ve,Ee);if(y){c&&(Me.fromBufferAttribute(c,h),Se.fromBufferAttribute(c,u),Te.fromBufferAttribute(c,p),y.uv=It.getUV(Ee,fe,me,ve,Me,Se,Te,new s)),l&&(Me.fromBufferAttribute(l,h),Se.fromBufferAttribute(l,u),Te.fromBufferAttribute(l,p),y.uv2=It.getUV(Ee,fe,me,ve,Me,Se,Te,new s));var x=new Vt(h,u,p);It.getNormal(fe,me,ve,x.normal),y.face=x}return y}Le.prototype=Object.assign(Object.create(q.prototype),{constructor:Le,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return q.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,a=Object.keys(r);if(a.length>0){var o=r[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=o.length;t<e;t++)n=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=i.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){var n,i=this.geometry,r=this.material,a=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),de.copy(i.boundingSphere),de.applyMatrix4(a),!1!==t.ray.intersectsSphere(de)&&(ue.getInverse(a),pe.copy(t.ray).applyMatrix4(ue),null===i.boundingBox||!1!==pe.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var o,c,l,h,u,p,d,f,m,v,g,y=i.index,x=i.attributes.position,b=i.morphAttributes.position,w=i.morphTargetsRelative,_=i.attributes.uv,M=i.attributes.uv2,S=i.groups,T=i.drawRange;if(null!==y)if(Array.isArray(r))for(h=0,p=S.length;h<p;h++)for(m=r[(f=S[h]).materialIndex],u=v=Math.max(f.start,T.start),d=g=Math.min(f.start+f.count,T.start+T.count);u<d;u+=3)o=y.getX(u),c=y.getX(u+1),l=y.getX(u+2),(n=Re(this,m,t,pe,x,b,w,_,M,o,c,l))&&(n.faceIndex=Math.floor(u/3),n.face.materialIndex=f.materialIndex,e.push(n));else for(h=v=Math.max(0,T.start),p=g=Math.min(y.count,T.start+T.count);h<p;h+=3)o=y.getX(h),c=y.getX(h+1),l=y.getX(h+2),(n=Re(this,r,t,pe,x,b,w,_,M,o,c,l))&&(n.faceIndex=Math.floor(h/3),e.push(n));else if(void 0!==x)if(Array.isArray(r))for(h=0,p=S.length;h<p;h++)for(m=r[(f=S[h]).materialIndex],u=v=Math.max(f.start,T.start),d=g=Math.min(f.start+f.count,T.start+T.count);u<d;u+=3)(n=Re(this,m,t,pe,x,b,w,_,M,o=u,c=u+1,l=u+2))&&(n.faceIndex=Math.floor(u/3),n.face.materialIndex=f.materialIndex,e.push(n));else if(v=Math.max(0,T.start),g=Math.min(x.count,T.start+T.count),1===this.drawMode){var E=0;for(h=v,p=g;h<p-2;h++)c=h+1+E,l=h+2-E,E=(E+1)%2,(n=Re(this,r,t,pe,x,b,w,_,M,o=h,c,l))&&(n.faceIndex=Math.floor(h),e.push(n))}else for(h=v,p=g;h<p;h+=3)(n=Re(this,r,t,pe,x,b,w,_,M,o=h,c=h+1,l=h+2))&&(n.faceIndex=Math.floor(h/3),e.push(n))}else if(i.isGeometry){var A,L,P,R,C=Array.isArray(r),O=i.vertices,I=i.faces,N=i.faceVertexUvs[0];N.length>0&&(R=N);for(var D=0,z=I.length;D<z;D++){var B=I[D],U=C?r[B.materialIndex]:r;if(void 0!==U&&(A=O[B.a],L=O[B.b],P=O[B.c],n=Pe(this,U,t,pe,A,L,P,Ee))){if(R&&R[D]){var F=R[D];Me.copy(F[0]),Se.copy(F[1]),Te.copy(F[2]),n.uv=It.getUV(Ee,A,L,P,Me,Se,Te,new s)}n.face=B,n.faceIndex=D,e.push(n)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Ce=0,Oe=new L,Ie=new q,Ne=new u;function De(){Object.defineProperty(this,"id",{value:Ce+=2}),this.uuid=o.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}De.prototype=Object.assign(Object.create(i.prototype),{constructor:De,isGeometry:!0,applyMatrix:function(t){for(var e=(new f).getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(t)}for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(e).normalize();for(var a=0,o=r.vertexNormals.length;a<o;a++)r.vertexNormals[a].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return Oe.makeRotationX(t),this.applyMatrix(Oe),this},rotateY:function(t){return Oe.makeRotationY(t),this.applyMatrix(Oe),this},rotateZ:function(t){return Oe.makeRotationZ(t),this.applyMatrix(Oe),this},translate:function(t,e,n){return Oe.makeTranslation(t,e,n),this.applyMatrix(Oe),this},scale:function(t,e,n){return Oe.makeScale(t,e,n),this.applyMatrix(Oe),this},lookAt:function(t){return Ie.lookAt(t),Ie.updateMatrix(),this.applyMatrix(Ie.matrix),this},fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,i=t.attributes;if(void 0===i.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var r=i.position.array,a=void 0!==i.normal?i.normal.array:void 0,o=void 0!==i.color?i.color.array:void 0,c=void 0!==i.uv?i.uv.array:void 0,l=void 0!==i.uv2?i.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var h=0;h<r.length;h+=3)e.vertices.push((new u).fromArray(r,h)),void 0!==o&&e.colors.push((new Bt).fromArray(o,h));function p(t,n,i,r){var h=void 0===o?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[i].clone()],p=new Vt(t,n,i,void 0===a?[]:[(new u).fromArray(a,3*t),(new u).fromArray(a,3*n),(new u).fromArray(a,3*i)],h,r);e.faces.push(p),void 0!==c&&e.faceVertexUvs[0].push([(new s).fromArray(c,2*t),(new s).fromArray(c,2*n),(new s).fromArray(c,2*i)]),void 0!==l&&e.faceVertexUvs[1].push([(new s).fromArray(l,2*t),(new s).fromArray(l,2*n),(new s).fromArray(l,2*i)])}var d=t.groups;if(d.length>0)for(h=0;h<d.length;h++)for(var f=d[h],m=f.start,v=m,g=m+f.count;v<g;v+=3)void 0!==n?p(n[v],n[v+1],n[v+2],f.materialIndex):p(v,v+1,v+2,f.materialIndex);else if(void 0!==n)for(h=0;h<n.length;h+=3)p(n[h],n[h+1],n[h+2]);else for(h=0;h<r.length/3;h+=3)p(h,h+1,h+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ne).negate(),this.translate(Ne.x,Ne.y,Ne.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new L;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new u,e=new u,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];t.subVectors(s,o),e.subVectors(a,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){var e,n,i,r,a,o;for(void 0===t&&(t=!0),o=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)o[e]=new u;if(t){var s,c,l,h=new u,p=new u;for(i=0,r=this.faces.length;i<r;i++)a=this.faces[i],s=this.vertices[a.a],c=this.vertices[a.b],l=this.vertices[a.c],h.subVectors(l,c),p.subVectors(s,c),h.cross(p),o[a.a].add(h),o[a.b].add(h),o[a.c].add(h)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)o[(a=this.faces[i]).a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(e=0,n=this.vertices.length;e<n;e++)o[e].normalize();for(i=0,r=this.faces.length;i<r;i++){var d=(a=this.faces[i]).vertexNormals;3===d.length?(d[0].copy(o[a.a]),d[1].copy(o[a.b]),d[2].copy(o[a.c])):(d[0]=o[a.a].clone(),d[1]=o[a.b].clone(),d[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var i=(n=this.faces[t]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var a=new De;for(a.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var o=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)c=new u,l={a:new u,b:new u,c:new u},o.push(c),s.push(l)}var c,l,h=this.morphNormals[t];for(a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],c=h.faceNormals[n],l=h.vertexNormals[n],c.copy(r.normal),l.a.copy(r.vertexNormals[0]),l.b.copy(r.vertexNormals[1]),l.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new st),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new ht),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var i,r=this.vertices.length,a=this.vertices,o=t.vertices,s=this.faces,c=t.faces,l=this.colors,h=t.colors;void 0===n&&(n=0),void 0!==e&&(i=(new f).getNormalMatrix(e));for(var u=0,p=o.length;u<p;u++){var d=o[u].clone();void 0!==e&&d.applyMatrix4(e),a.push(d)}for(u=0,p=h.length;u<p;u++)l.push(h[u].clone());for(u=0,p=c.length;u<p;u++){var m,v,g,y=c[u],x=y.vertexNormals,b=y.vertexColors;(m=new Vt(y.a+r,y.b+r,y.c+r)).normal.copy(y.normal),void 0!==i&&m.normal.applyMatrix3(i).normalize();for(var w=0,_=x.length;w<_;w++)v=x[w].clone(),void 0!==i&&v.applyMatrix3(i).normalize(),m.vertexNormals.push(v);m.color.copy(y.color);for(w=0,_=b.length;w<_;w++)g=b[w],m.vertexColors.push(g.clone());m.materialIndex=y.materialIndex+n,s.push(m)}for(u=0,p=t.faceVertexUvs.length;u<p;u++){var M=t.faceVertexUvs[u];void 0===this.faceVertexUvs[u]&&(this.faceVertexUvs[u]=[]);for(w=0,_=M.length;w<_;w++){for(var S=M[w],T=[],E=0,A=S.length;E<A;E++)T.push(S[E].clone());this.faceVertexUvs[u].push(T)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,i,r,a,o,s,c={},l=[],h=[],u=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)t=this.vertices[n],void 0===c[e=Math.round(t.x*u)+"_"+Math.round(t.y*u)+"_"+Math.round(t.z*u)]?(c[e]=n,l.push(this.vertices[n]),h[n]=l.length-1):h[n]=h[c[e]];var p=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=h[r.a],r.b=h[r.b],r.c=h[r.c],a=[r.a,r.b,r.c];for(var d=0;d<3;d++)if(a[d]===a[(d+1)%3]){p.push(n);break}}for(n=p.length-1;n>=0;n--){var f=p[n];for(this.faces.splice(f,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(f,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];this.vertices.push(new u(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));var i,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===e&&(i=[]),o&&o.length===e&&(r=[]);for(n=0;n<e;n++){var s=t[n]._id;i&&i.push(a[s]),r&&r.push(o[s])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var i=[],r=0;r<this.vertices.length;r++){var a=this.vertices[r];i.push(a.x,a.y,a.z)}var o=[],s=[],c={},l=[],h={},u=[],p={};for(r=0;r<this.faces.length;r++){var d=this.faces[r],f=void 0!==this.faceVertexUvs[0][r],m=d.normal.length()>0,v=d.vertexNormals.length>0,g=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,x=0;if(x=M(x,0,0),x=M(x,1,!0),x=M(x,2,!1),x=M(x,3,f),x=M(x,4,m),x=M(x,5,v),x=M(x,6,g),x=M(x,7,y),o.push(x),o.push(d.a,d.b,d.c),o.push(d.materialIndex),f){var b=this.faceVertexUvs[0][r];o.push(E(b[0]),E(b[1]),E(b[2]))}if(m&&o.push(S(d.normal)),v){var w=d.vertexNormals;o.push(S(w[0]),S(w[1]),S(w[2]))}if(g&&o.push(T(d.color)),y){var _=d.vertexColors;o.push(T(_[0]),T(_[1]),T(_[2]))}}function M(t,e,n){return n?t|1<<e:t&~(1<<e)}function S(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==c[e]||(c[e]=s.length/3,s.push(t.x,t.y,t.z)),c[e]}function T(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==h[e]||(h[e]=l.length,l.push(t.getHex())),h[e]}function E(t){var e=t.x.toString()+t.y.toString();return void 0!==p[e]||(p[e]=u.length/2,u.push(t.x,t.y)),p[e]}return t.data={},t.data.vertices=i,t.data.normals=s,l.length>0&&(t.data.colors=l),u.length>0&&(t.data.uvs=[u]),t.data.faces=o,t},clone:function(){return(new De).copy(this)},copy:function(t){var e,n,i,r,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var c=t.colors;for(e=0,n=c.length;e<n;e++)this.colors.push(c[e].clone());var l=t.faces;for(e=0,n=l.length;e<n;e++)this.faces.push(l[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var h=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),i=0,r=h.length;i<r;i++){var u=h[i],p=[];for(a=0,o=u.length;a<o;a++){var d=u[a];p.push(d.clone())}this.faceVertexUvs[e].push(p)}}var f=t.morphTargets;for(e=0,n=f.length;e<n;e++){var m={};if(m.name=f[e].name,void 0!==f[e].vertices)for(m.vertices=[],i=0,r=f[e].vertices.length;i<r;i++)m.vertices.push(f[e].vertices[i].clone());if(void 0!==f[e].normals)for(m.normals=[],i=0,r=f[e].normals.length;i<r;i++)m.normals.push(f[e].normals[i].clone());this.morphTargets.push(m)}var v=t.morphNormals;for(e=0,n=v.length;e<n;e++){var g={};if(void 0!==v[e].vertexNormals)for(g.vertexNormals=[],i=0,r=v[e].vertexNormals.length;i<r;i++){var y=v[e].vertexNormals[i],x={};x.a=y.a.clone(),x.b=y.b.clone(),x.c=y.c.clone(),g.vertexNormals.push(x)}if(void 0!==v[e].faceNormals)for(g.faceNormals=[],i=0,r=v[e].faceNormals.length;i<r;i++)g.faceNormals.push(v[e].faceNormals[i].clone());this.morphNormals.push(g)}var b=t.skinWeights;for(e=0,n=b.length;e<n;e++)this.skinWeights.push(b[e].clone());var w=t.skinIndices;for(e=0,n=w.length;e<n;e++)this.skinIndices.push(w[e].clone());var _=t.lineDistances;for(e=0,n=_.length;e<n;e++)this.lineDistances.push(_[e]);var M=t.boundingBox;null!==M&&(this.boundingBox=M.clone());var S=t.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class ze extends he{constructor(t,e,n,i,r,a){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};var o=this;t=t||1,e=e||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,a=Math.floor(a)||1;var s=[],c=[],l=[],h=[],p=0,d=0;function f(t,e,n,i,r,a,f,m,v,g,y){var x,b,w=a/v,_=f/g,M=a/2,S=f/2,T=m/2,E=v+1,A=g+1,L=0,P=0,R=new u;for(b=0;b<A;b++){var C=b*_-S;for(x=0;x<E;x++){var O=x*w-M;R[t]=O*i,R[e]=C*r,R[n]=T,c.push(R.x,R.y,R.z),R[t]=0,R[e]=0,R[n]=m>0?1:-1,l.push(R.x,R.y,R.z),h.push(x/v),h.push(1-b/g),L+=1}}for(b=0;b<g;b++)for(x=0;x<v;x++){var I=p+x+E*b,N=p+x+E*(b+1),D=p+(x+1)+E*(b+1),z=p+(x+1)+E*b;s.push(I,N,z),s.push(N,D,z),P+=6}o.addGroup(d,P,y),d+=P,p+=L}f("z","y","x",-1,-1,n,e,t,a,r,0),f("z","y","x",1,-1,n,e,-t,a,r,1),f("x","z","y",1,1,t,n,e,i,a,2),f("x","z","y",1,-1,t,n,-e,i,a,3),f("x","y","z",1,-1,t,e,n,i,r,4),f("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(s),this.setAttribute("position",new $t(c,3)),this.setAttribute("normal",new $t(l,3)),this.setAttribute("uv",new $t(h,2))}}function Be(t){var e={};for(var n in t)for(var i in e[n]={},t[n]){var r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}return e}function Ue(t){for(var e={},n=0;n<t.length;n++){var i=Be(t[n]);for(var r in i)e[r]=i[r]}return e}function Fe(t){jt.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}",this.fragmentShader="void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function Ge(){q.call(this),this.type="Camera",this.matrixWorldInverse=new L,this.projectionMatrix=new L,this.projectionMatrixInverse=new L}function Ve(t,e,n,i){Ge.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Fe.prototype=Object.create(jt.prototype),Fe.prototype.constructor=Fe,Fe.prototype.isShaderMaterial=!0,Fe.prototype.copy=function(t){return jt.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Be(t.uniforms),this.uniformsGroups=function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},Fe.prototype.toJSON=function(t){var e=jt.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var i=this.uniforms[n].value;i&&i.isTexture?e.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[n]={type:"m4",value:i.toArray()}:e.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var r={};for(var a in this.extensions)!0===this.extensions[a]&&(r[a]=!0);return Object.keys(r).length>0&&(e.extensions=r),e},Ge.prototype=Object.assign(Object.create(q.prototype),{constructor:Ge,isCamera:!0,copy:function(t,e){return q.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new u),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){q.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Ve.prototype=Object.assign(Object.create(Ge.prototype),{constructor:Ve,isPerspectiveCamera:!0,copy:function(t,e){return Ge.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*o.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*o.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*o.RAD2DEG*Math.atan(Math.tan(.5*o.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*o.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var s=a.fullWidth,c=a.fullHeight;r+=a.offsetX*i/s,e-=a.offsetY*n/c,i*=a.width/s,n*=a.height/c}var l=this.filmOffset;0!==l&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=q.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});function He(t,e,n,i){q.call(this),this.type="CubeCamera";var r=new Ve(90,1,t,e);r.up.set(0,-1,0),r.lookAt(new u(1,0,0)),this.add(r);var a=new Ve(90,1,t,e);a.up.set(0,-1,0),a.lookAt(new u(-1,0,0)),this.add(a);var o=new Ve(90,1,t,e);o.up.set(0,0,1),o.lookAt(new u(0,1,0)),this.add(o);var s=new Ve(90,1,t,e);s.up.set(0,0,-1),s.lookAt(new u(0,-1,0)),this.add(s);var c=new Ve(90,1,t,e);c.up.set(0,-1,0),c.lookAt(new u(0,0,1)),this.add(c);var l=new Ve(90,1,t,e);l.up.set(0,-1,0),l.lookAt(new u(0,0,-1)),this.add(l),i=i||{format:1022,magFilter:1006,minFilter:1006},this.renderTarget=new je(n,n,i),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=t.getRenderTarget(),i=this.renderTarget,h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,r),t.setRenderTarget(i,1),t.render(e,a),t.setRenderTarget(i,2),t.render(e,o),t.setRenderTarget(i,3),t.render(e,s),t.setRenderTarget(i,4),t.render(e,c),i.texture.generateMipmaps=h,t.setRenderTarget(i,5),t.render(e,l),t.setRenderTarget(n)},this.clear=function(t,e,n,i){for(var r=t.getRenderTarget(),a=this.renderTarget,o=0;o<6;o++)t.setRenderTarget(a,o),t.clear(e,n,i);t.setRenderTarget(r)}}function je(t,e,n){x.call(this,t,e,n)}function ke(t,e,n,i,r,a,o,s,c,l,h,u){g.call(this,null,a,o,s,c,l,i,r,h,u),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==c?c:1003,this.minFilter=void 0!==l?l:1003,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}He.prototype=Object.create(q.prototype),He.prototype.constructor=He,je.prototype=Object.create(x.prototype),je.prototype.constructor=je,je.prototype.isWebGLRenderTargetCube=!0,je.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=e.format,this.texture.encoding=e.encoding;var n=new X,i={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\\tvWorldDirection = transformDirection( position, modelMatrix );","\\t#include <begin_vertex>","\\t#include <project_vertex>","}"].join("\\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\\tvec3 direction = normalize( vWorldDirection );","\\tvec2 sampleUV;","\\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\\n")},r=new Fe({type:"CubemapFromEquirect",uniforms:Be(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:1,blending:0});r.uniforms.tEquirect.value=e;var a=new Le(new ze(5,5,5),r);n.add(a);var o=new He(1,10,1);return o.renderTarget=this,o.renderTarget.texture.name="CubeCameraTexture",o.update(t,n),a.geometry.dispose(),a.material.dispose(),this},ke.prototype=Object.create(g.prototype),ke.prototype.constructor=ke,ke.prototype.isDataTexture=!0;var We=new ht,qe=new u;function Xe(t,e,n,i,r,a){this.planes=[void 0!==t?t:new _t,void 0!==e?e:new _t,void 0!==n?n:new _t,void 0!==i?i:new _t,void 0!==r?r:new _t,void 0!==a?a:new _t]}Object.assign(Xe.prototype,{set:function(t,e,n,i,r,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],c=n[5],l=n[6],h=n[7],u=n[8],p=n[9],d=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return e[0].setComponents(o-i,h-s,f-u,y-m).normalize(),e[1].setComponents(o+i,h+s,f+u,y+m).normalize(),e[2].setComponents(o+r,h+c,f+p,y+v).normalize(),e[3].setComponents(o-r,h-c,f-p,y-v).normalize(),e[4].setComponents(o-a,h-l,f-d,y-g).normalize(),e[5].setComponents(o+a,h+l,f+d,y+g).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),We.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(We)},intersectsSprite:function(t){return We.center.set(0,0,0),We.radius=.7071067811865476,We.applyMatrix4(t.matrixWorld),this.intersectsSphere(We)},intersectsSphere:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++){if(e[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:function(t){for(var e=this.planes,n=0;n<6;n++){var i=e[n];if(qe.x=i.normal.x>0?t.max.x:t.min.x,qe.y=i.normal.y>0?t.max.y:t.min.y,qe.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(qe)<0)return!1}return!0},containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var Ye={alphamap_fragment:"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif",alphatest_fragment:"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif",aomap_fragment:"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\\n}\\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\tif( cutoffDistance > 0.0 ) {\\n\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t}\\n\\treturn distanceFalloff;\\n#else\\n\\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t}\\n\\treturn 1.0;\\n#endif\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\\n\\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\\n\\treturn Fr * fresnel + F0;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\treturn specularColor * brdf.x + brdf.y;\\n}\\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\tvec3 FssEss = F * brdf.x + brdf.y;\\n\\tfloat Ess = brdf.x + brdf.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie(float roughness, float NoH) {\\n\\tfloat invAlpha  = 1.0 / roughness;\\n\\tfloat cos2h = NoH * NoH;\\n\\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\\n}\\nfloat V_Neubelt(float NoV, float NoL) {\\n\\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\\n}\\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 H = normalize( V + L );\\n\\tfloat dotNH = saturate( dot( N, H ) );\\n\\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\\n}\\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\\n\\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\\n\\t\\tvarying vec3 vViewPosition;\\n\\t#endif\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\\n\\tvarying vec3 vViewPosition;\\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif",color_fragment:"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif",color_pars_fragment:"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif",color_pars_vertex:"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif",color_vertex:"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif",common:"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define PI_HALF 1.5707963267949\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal;\\n#endif\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n  return m[ 2 ][ 3 ] == - 1.0;\\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\\tvec3 absDirection = abs(direction);\\n\\tint face = -1;\\n\\tif( absDirection.x > absDirection.z ) {\\n\\t\\tif(absDirection.x > absDirection.y )\\n\\t\\t\\tface = direction.x > 0.0 ? 0 : 3;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\telse {\\n\\t\\tif(absDirection.z > absDirection.y )\\n\\t\\t\\tface = direction.z > 0.0 ? 2 : 5;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\\tfloat dxRoughness = dFdx(roughness);\\n\\tfloat dyRoughness = dFdy(roughness);\\n\\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\\tfloat mipLevel = 0.5 * log2(d);\\n\\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\\tbool bRes = mipLevel == 0.0;\\n\\tscale =  bRes && (scale < a) ? a : scale;\\n\\tvec3 r;\\n\\tvec2 offset;\\n\\tint face = getFaceFromDirection(direction);\\n\\tfloat rcpPowScale = 1.0 / powScale;\\n\\tif( face == 0) {\\n\\t\\tr = vec3(direction.x, -direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 1) {\\n\\t\\tr = vec3(direction.y, direction.x, direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 2) {\\n\\t\\tr = vec3(direction.z, direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 3) {\\n\\t\\tr = vec3(direction.x, direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse if( face == 4) {\\n\\t\\tr = vec3(direction.y, direction.x, -direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse {\\n\\t\\tr = vec3(direction.z, -direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\tr = normalize(r);\\n\\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\\tvec2 base = offset + vec2( texelOffset );\\n\\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\\n\\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\\tfloat r1 = floor(roughnessVal);\\n\\tfloat r2 = r1 + 1.0;\\n\\tfloat t = fract(roughnessVal);\\n\\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\\tfloat s = mipInfo.y;\\n\\tfloat level0 = mipInfo.x;\\n\\tfloat level1 = level0 + 1.0;\\n\\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\\tvec4 result = mix(color10, color20, t);\\n\\treturn vec4(result.rgb, 1.0);\\n}\\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\\n#ifdef USE_INSTANCING\\n\\ttransformedNormal = mat3( instanceMatrix ) * transformedNormal;\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = normalMatrix * objectTangent;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat D = max( maxRange / maxRGB, 1.0 );\\n\\tD = min( floor( D ) / 255.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\\n\\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract( Le );\\n\\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\\n\\treturn vec4( max( vRGB, 0.0 ), 1.0 );\\n}",envmap_fragment:"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\t\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t}  else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\tvec2 sampleUV;\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\\n\\t\\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\tuniform int maxMipLevel;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\\n\\t#ifdef ENVMAP_MODE_REFRACTION\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t  vec3 reflectVec = reflect( -viewDir, normal );\\n\\t\\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t#else\\n\\t\\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV;\\n\\t\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) { \\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif",fog_vertex:"#ifdef USE_FOG\\n\\tfogDepth = -mvPosition.z;\\n#endif",fog_pars_vertex:"#ifdef USE_FOG\\n\\tvarying float fogDepth;\\n#endif",fog_fragment:"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif",fog_pars_fragment:"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif",gradientmap_pars_fragment:"#ifdef TOON\\n\\tuniform sampler2D gradientMap;\\n\\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\t\\tfloat dotNL = dot( normal, lightDirection );\\n\\t\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t\\t#ifdef USE_GRADIENTMAP\\n\\t\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t\\t#endif\\n\\t}\\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\\n\\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\nvIndirectFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n\\tvIndirectBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n#endif",lights_pars_begin:"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\nuniform vec3 lightProbe[ 9 ];\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\\n\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t\\tfloat shadowCameraNear;\\n\\t\\tfloat shadowCameraFar;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifdef TOON\\n\\t\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#else\\n\\t\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\t\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#endif\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)",lights_physical_fragment:"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef REFLECTIVITY\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#endif\\n#ifdef CLEARCOAT\\n\\tmaterial.clearcoat = saturate( clearcoat );\\tmaterial.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheen;\\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n#ifdef CLEARCOAT\\n\\tfloat clearcoat;\\n\\tfloat clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tvec3 sheenColor;\\n#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = ccDotNL * directLight.color;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tccIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t\\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\\n\\t\\t\\tmaterial.specularRoughness,\\n\\t\\t\\tdirectLight.direction,\\n\\t\\t\\tgeometry,\\n\\t\\t\\tmaterial.sheenColor\\n\\t\\t);\\n\\t#else\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\\n\\t#endif\\n\\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t\\tfloat ccDotNL = ccDotNV;\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\tfloat clearcoatInv = 1.0 - clearcoatDHR;\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\\n\\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}",lights_fragment_begin:"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\n#ifdef CLEARCOAT\\n\\tgeometry.clearcoatNormal = clearcoatNormal;\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tdirectLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tdirectLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\\n\\t#ifdef CLEARCOAT\\n\\t\\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\\n\\t#endif\\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif",map_fragment:"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif",map_pars_fragment:"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tuniform mat3 uvTransform;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifndef USE_MORPHNORMALS\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\t#ifdef USE_TANGENT\\n\\t\\tvec3 tangent = normalize( vTangent );\\n\\t\\tvec3 bitangent = normalize( vBitangent );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t\\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t#endif\\n\\t\\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tmat3 vTBN = mat3( tangent, bitangent, normal );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\\n\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( TANGENTSPACE_NORMALMAP )\\n\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tnormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef OBJECTSPACE_NORMALMAP\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\\n\\t\\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\\n\\t\\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal = geometryNormal;\\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\\n\\t#else\\n\\t\\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\\n\\t#endif\\n#endif",clearcoat_normalmap_pars_fragment:"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\\n}\\nvec2 unpack2HalfToRGBA( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif",dithering_pars_fragment:"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpack2HalfToRGBA( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\\t\\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / size;\\n\\t\\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\\n\\t\\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\\t\\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\\t\\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\\t\\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\\t\\tvec2 f = fract( uv * size + 0.5 );\\n\\t\\tfloat a = mix( lb, lt, f.y );\\n\\t\\tfloat b = mix( rb, rt, f.y );\\n\\t\\tfloat c = mix( a, b, f.x );\\n\\t\\treturn c;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLight directionalLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tshadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLight spotLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tshadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLight pointLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tshadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}",skinbase_vertex:"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform highp sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif",skinning_vertex:"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif",specularmap_fragment:"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif",tonemapping_pars_fragment:"#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\\n}",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\\n\\tvarying vec2 vUv;\\n#endif",uv_pars_vertex:"#ifdef USE_UV\\n\\t#ifdef UVS_VERTEX_ONLY\\n\\t\\tvec2 vUv;\\n\\t#else\\n\\t\\tvarying vec2 vUv;\\n\\t#endif\\n\\tuniform mat3 uvTransform;\\n#endif",uv_vertex:"#ifdef USE_UV\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = uv2;\\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif",background_frag:"uniform sampler2D t2D;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}",background_vert:"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}",cube_frag:"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\nvoid main() {\\n\\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}",cube_vert:"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}",depth_frag:"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\\t#endif\\n}",depth_vert:"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n}",distanceRGBA_frag:"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}",distanceRGBA_vert:"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}",equirect_frag:"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV;\\n\\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tvec4 texColor = texture2D( tEquirect, sampleUV );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}",equirect_vert:"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}",linedashed_frag:"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}",linedashed_vert:"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\tvLineDistance = scale * lineDistance;\\n\\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}",meshbasic_frag:"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}",meshbasic_vert:"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}",meshlambert_frag:"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vIndirectFront;\\n\\t#endif\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}",meshlambert_vert:"#define LAMBERT\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}",meshmatcap_frag:"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t\\tmatcapColor = matcapTexelToLinear( matcapColor );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}",meshmatcap_vert:"#define MATCAP\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#ifndef FLAT_SHADED\\n\\t\\tvNormal = normalize( transformedNormal );\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}",meshphong_frag:"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}",meshphong_vert:"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}",meshphysical_frag:"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define REFLECTIVITY\\n\\t#define CLEARCOAT\\n\\t#define TRANSPARENCY\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef TRANSPARENCY\\n\\tuniform float transparency;\\n#endif\\n#ifdef REFLECTIVITY\\n\\tuniform float reflectivity;\\n#endif\\n#ifdef CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheen;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#ifdef TRANSPARENCY\\n\\t\\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\\n\\t#endif\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}",meshphysical_vert:"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}",normal_frag:"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}",normal_vert:"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}",points_frag:"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}",points_vert:"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}",shadow_frag:"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <fog_fragment>\\n}",shadow_vert:"#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}",sprite_frag:"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}",sprite_vert:"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}"},Ze={common:{diffuse:{value:new Bt(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new f},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new s(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Bt(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new f}},sprite:{diffuse:{value:new Bt(15658734)},opacity:{value:1},center:{value:new s(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new f}}},Je={basic:{uniforms:Ue([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.fog]),vertexShader:Ye.meshbasic_vert,fragmentShader:Ye.meshbasic_frag},lambert:{uniforms:Ue([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.fog,Ze.lights,{emissive:{value:new Bt(0)}}]),vertexShader:Ye.meshlambert_vert,fragmentShader:Ye.meshlambert_frag},phong:{uniforms:Ue([Ze.common,Ze.specularmap,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.gradientmap,Ze.fog,Ze.lights,{emissive:{value:new Bt(0)},specular:{value:new Bt(1118481)},shininess:{value:30}}]),vertexShader:Ye.meshphong_vert,fragmentShader:Ye.meshphong_frag},standard:{uniforms:Ue([Ze.common,Ze.envmap,Ze.aomap,Ze.lightmap,Ze.emissivemap,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.roughnessmap,Ze.metalnessmap,Ze.fog,Ze.lights,{emissive:{value:new Bt(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Ye.meshphysical_vert,fragmentShader:Ye.meshphysical_frag},matcap:{uniforms:Ue([Ze.common,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,Ze.fog,{matcap:{value:null}}]),vertexShader:Ye.meshmatcap_vert,fragmentShader:Ye.meshmatcap_frag},points:{uniforms:Ue([Ze.points,Ze.fog]),vertexShader:Ye.points_vert,fragmentShader:Ye.points_frag},dashed:{uniforms:Ue([Ze.common,Ze.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ye.linedashed_vert,fragmentShader:Ye.linedashed_frag},depth:{uniforms:Ue([Ze.common,Ze.displacementmap]),vertexShader:Ye.depth_vert,fragmentShader:Ye.depth_frag},normal:{uniforms:Ue([Ze.common,Ze.bumpmap,Ze.normalmap,Ze.displacementmap,{opacity:{value:1}}]),vertexShader:Ye.normal_vert,fragmentShader:Ye.normal_frag},sprite:{uniforms:Ue([Ze.sprite,Ze.fog]),vertexShader:Ye.sprite_vert,fragmentShader:Ye.sprite_frag},background:{uniforms:{uvTransform:{value:new f},t2D:{value:null}},vertexShader:Ye.background_vert,fragmentShader:Ye.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ye.cube_vert,fragmentShader:Ye.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ye.equirect_vert,fragmentShader:Ye.equirect_frag},distanceRGBA:{uniforms:Ue([Ze.common,Ze.displacementmap,{referencePosition:{value:new u},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ye.distanceRGBA_vert,fragmentShader:Ye.distanceRGBA_frag},shadow:{uniforms:Ue([Ze.lights,Ze.fog,{color:{value:new Bt(0)},opacity:{value:1}}]),vertexShader:Ye.shadow_vert,fragmentShader:Ye.shadow_frag}};function Qe(){var t=null,e=!1,n=null;function i(r,a){!1!==e&&(n(r,a),t.requestAnimationFrame(i))}return{start:function(){!0!==e&&null!==n&&(t.requestAnimationFrame(i),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Ke(t){var e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var i=e.get(n);i&&(t.deleteBuffer(i.buffer),e.delete(n))},update:function(n,i){n.isInterleavedBufferAttribute&&(n=n.data);var r=e.get(n);void 0===r?e.set(n,function(e,n){var i=e.array,r=e.usage,a=t.createBuffer();t.bindBuffer(n,a),t.bufferData(n,i,r),e.onUploadCallback();var o=5126;return i instanceof Float32Array?o=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?o=5123:i instanceof Int16Array?o=5122:i instanceof Uint32Array?o=5125:i instanceof Int32Array?o=5124:i instanceof Int8Array?o=5120:i instanceof Uint8Array&&(o=5121),{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(n,i)):r.version<n.version&&(!function(e,n,i){var r=n.array,a=n.updateRange;t.bindBuffer(i,e),-1===a.count?t.bufferSubData(i,0,r):(t.bufferSubData(i,a.offset*r.BYTES_PER_ELEMENT,r.subarray(a.offset,a.offset+a.count)),a.count=-1)}(r.buffer,n,i),r.version=n.version)}}}function $e(t,e,n,i,r){De.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i,flipY:r},this.fromBufferGeometry(new tn(t,e,n,i)),this.mergeVertices()}function tn(t,e,n,i,r=!0){he.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i,flipY:r};var a,o,s=(t=t||1)/2,c=(e=e||1)/2,l=Math.floor(n)||1,h=Math.floor(i)||1,u=l+1,p=h+1,d=t/l,f=e/h,m=[],v=[],g=[],y=[];for(o=0;o<p;o++){var x=o*f-c;for(a=0;a<u;a++){var b=a*d-s;v.push(b,-x,0),g.push(0,0,1),y.push(a/l),y.push(r?1-o/h:o/h)}}for(o=0;o<h;o++)for(a=0;a<l;a++){var w=a+u*o,_=a+u*(o+1),M=a+1+u*(o+1),S=a+1+u*o;m.push(w,_,S),m.push(_,M,S)}this.setIndex(m),this.setAttribute("position",new $t(v,3)),this.setAttribute("normal",new $t(g,3)),this.setAttribute("uv",new $t(y,2))}function en(t,e,n,i){var r,a,o=new Bt(0),s=0,c=null,l=0;function h(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,i)}return{getClearColor:function(){return o},setClearColor:function(t,e){o.set(t),h(o,s=void 0!==e?e:1)},getClearAlpha:function(){return s},setClearAlpha:function(t){h(o,s=t)},render:function(e,i,u,p){var d=i.background,f=t.vr,m=f.getSession&&f.getSession();if(m&&"additive"===m.environmentBlendMode&&(d=null),null===d?(h(o,s),c=null,l=0):d&&d.isColor&&(h(d,1),p=!0,c=null,l=0),(t.autoClear||p)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),d&&(d.isCubeTexture||d.isWebGLRenderTargetCube)){void 0===a&&((a=new Le(new ze(1,1,1),new Fe({type:"BackgroundCubeMaterial",uniforms:Be(Je.cube.uniforms),vertexShader:Je.cube.vertexShader,fragmentShader:Je.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(a));var v=d.isWebGLRenderTargetCube?d.texture:d;a.material.uniforms.tCube.value=v,a.material.uniforms.tFlip.value=d.isWebGLRenderTargetCube?1:-1,c===d&&l===v.version||(a.material.needsUpdate=!0,c=d,l=v.version),e.unshift(a,a.geometry,a.material,0,0,null)}else d&&d.isTexture&&(void 0===r&&((r=new Le(new tn(2,2),new Fe({type:"BackgroundMaterial",uniforms:Be(Je.background.uniforms),vertexShader:Je.background.vertexShader,fragmentShader:Je.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(r.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(r)),r.material.uniforms.t2D.value=d,!0===d.matrixAutoUpdate&&d.updateMatrix(),r.material.uniforms.uvTransform.value.copy(d.matrix),c===d&&l===d.version||(r.material.needsUpdate=!0,c=d,l=d.version),e.unshift(r,r.geometry,r.material,0,0,null))}}}function nn(t,e,n,i){var r=t.getParameter(34921),a=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==a,s={},c=p(null),l=c;function h(e){return i.isWebGL2?t.bindVertexArray(e):a.bindVertexArrayOES(e)}function u(e){return i.isWebGL2?t.deleteVertexArray(e):a.deleteVertexArrayOES(e)}function p(t){for(var e=[],n=[],i=[],a=0;a<r;a++)e[a]=0,n[a]=0,i[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{}}}function d(){for(var t=l.newAttributes,e=0,n=t.length;e<n;e++)t[e]=0}function f(t){m(t,0)}function m(n,r){var a=l.newAttributes,o=l.enabledAttributes,s=l.attributeDivisors;(a[n]=1,0===o[n]&&(t.enableVertexAttribArray(n),o[n]=1),s[n]!==r)&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r)}function v(){for(var e=l.newAttributes,n=l.enabledAttributes,i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function g(){y(),l!==c&&h((l=c).object)}function y(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function(r,c,u,g,y){var x=!1;if(o){var b=function(e,n,r){var o=!0===r.wireframe,c=s[e.id];void 0===c&&(c={},s[e.id]=c);var l=c[n.id];void 0===l&&(l={},c[n.id]=l);var h=l[o];void 0===h&&(h=p(i.isWebGL2?t.createVertexArray():a.createVertexArrayOES()),l[o]=h);return h}(g,u,c);l!==b&&h((l=b).object),(x=function(t){var e=l.attributes,n=t.attributes;if(Object.keys(e).length!==Object.keys(n).length)return!0;for(var i in n){var r=e[i],a=n[i];if(r.attribute!==a)return!0;if(r.version!==a.versionVAO)return!0;if(r.data.buffer!==a.data)return!0;if(a.data&&r.data.version!==a.data.versionVAO)return!0}return!1}(g))&&function(t){var e={},n=t.attributes;for(var i in n){var r=n[i],a={};a.attribute=r,a.version=r.versionVAO,a.data={},r.data&&(a.data.buffer=r.data,a.data.version=r.data.versionVAO),e[i]=a}l.attributes=e}(g)}else{var w=!0===c.wireframe;l.geometry===g.id&&l.program===u.id&&l.wireframe===w||(l.geometry=g.id,l.program=u.id,l.wireframe=w,x=!0)}null!==y&&n.update(y,34963),x&&(!function(r,a,o,s){if(s&&s.isInstancedBufferGeometry&!i.isWebGL2&&null===e.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");d();var c=s.attributes,l=o.getAttributes(),h=a.defaultAttributeValues;for(var u in l){var p=l[u];if(p>=0){var g=c[u];if(void 0!==g){var y=g.normalized,x=g.itemSize;if(void 0===(E=n.get(g)))continue;var b=E.buffer,w=E.type,_=E.bytesPerElement;if(g.isInterleavedBufferAttribute){var M=g.data,S=M.stride,T=g.offset;M&&M.isInstancedInterleavedBuffer?(m(p,M.meshPerAttribute),void 0===s.maxInstancedCount&&(s.maxInstancedCount=M.meshPerAttribute*M.count)):f(p),t.bindBuffer(34962,b),t.vertexAttribPointer(p,x,w,y,S*_,T*_)}else g.isInstancedBufferAttribute?(m(p,g.meshPerAttribute),void 0===s.maxInstancedCount&&(s.maxInstancedCount=g.meshPerAttribute*g.count)):f(p),t.bindBuffer(34962,b),t.vertexAttribPointer(p,x,w,y,0,0)}else if("instanceMatrix"===u){var E;if(void 0===(E=n.get(r.instanceMatrix)))continue;b=E.buffer,w=E.type;m(p+0,1),m(p+1,1),m(p+2,1),m(p+3,1),t.bindBuffer(34962,b),t.vertexAttribPointer(p+0,4,w,!1,64,0),t.vertexAttribPointer(p+1,4,w,!1,64,16),t.vertexAttribPointer(p+2,4,w,!1,64,32),t.vertexAttribPointer(p+3,4,w,!1,64,48)}else if(void 0!==h){var A=h[u];if(void 0!==A)switch(A.length){case 2:t.vertexAttrib2fv(p,A);break;case 3:t.vertexAttrib3fv(p,A);break;case 4:t.vertexAttrib4fv(p,A);break;default:t.vertexAttrib1fv(p,A)}}}}v()}(r,c,u,g),null!==y&&t.bindBuffer(34963,n.get(y).buffer))},reset:g,resetDefaultState:y,dispose:function(){for(var t in g(),s){var e=s[t];for(var n in e){var i=e[n];for(var r in i)u(i[r].object),delete i[r];delete e[n]}delete s[t]}},releaseStatesOfGeometry:function(t){if(void 0!==s[t.id]){var e=s[t.id];for(var n in e){var i=e[n];for(var r in i)u(i[r].object),delete i[r];delete e[n]}delete s[t.id]}},releaseStatesOfProgram:function(t){for(var e in s){var n=s[e];if(void 0!==n[t.id]){var i=n[t.id];for(var r in i)u(i[r].object),delete i[r];delete n[t.id]}}},initAttributes:d,enableAttribute:f,disableUnusedAttributes:v}}function rn(t,e,n,i){var r,a=i.isWebGL2;this.setMode=function(t){r=t},this.render=function(e,i){t.drawArrays(r,e,i),n.update(i,r)},this.renderInstances=function(i,o,s,c){if(0!==c){var l,h;if(a)l=t,h="drawArraysInstanced";else if(h="drawArraysInstancedANGLE",null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[h](r,o,s,c),n.update(s,r,c)}}}function an(t,e,n){var i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=r(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var c=!0===n.logarithmicDepthBuffer,l=t.getParameter(34930),h=t.getParameter(35660),u=t.getParameter(3379),p=t.getParameter(34076),d=t.getParameter(34921),f=t.getParameter(36347),m=t.getParameter(36348),v=t.getParameter(36349),g=h>0,y=a||!!e.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==i)return i;var n=e.get("EXT_texture_filter_anisotropic");return i=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:h,maxTextureSize:u,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y,maxSamples:a?t.getParameter(36183):0}}function on(){var t=this,e=null,n=0,i=!1,r=!1,a=new _t,o=new f,s={value:null,needsUpdate:!1};function c(){s.value!==e&&(s.value=e,s.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function l(e,n,i,r){var c=null!==e?e.length:0,l=null;if(0!==c){if(l=s.value,!0!==r||null===l){var h=i+4*c,u=n.matrixWorldInverse;o.getNormalMatrix(u),(null===l||l.length<h)&&(l=new Float32Array(h));for(var p=0,d=i;p!==c;++p,d+=4)a.copy(e[p]).applyMatrix4(u,o),a.normal.toArray(l,d),l[d+3]=a.constant}s.value=l,s.needsUpdate=!0}return t.numPlanes=c,l}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,r,a){var o=0!==t.length||r||0!==n||i;return i=r,e=l(t,a,0),n=t.length,o},this.beginShadows=function(){r=!0,l(null)},this.endShadows=function(){r=!1,c()},this.setState=function(t,a,o,h,u,p){if(!i||null===t||0===t.length||r&&!o)r?l(null):c();else{var d=r?0:n,f=4*d,m=u.clippingState||null;s.value=m,m=l(t,h,f,p);for(var v=0;v!==f;++v)m[v]=e[v];u.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=d}}}function sn(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=i,i}}}function cn(t,e,n,i){var r=new WeakMap,a=new WeakMap;function o(t){var s=t.target,c=r.get(s);for(var l in null!==c.index&&e.remove(c.index),c.attributes)e.remove(c.attributes[l]);s.removeEventListener("dispose",o),r.delete(s);var h=a.get(c);h&&(e.remove(h),a.delete(c)),i.releaseStatesOfGeometry(s),n.memory.geometries--}function s(t){var n=[],i=t.index,r=t.attributes.position,o=0;if(null!==i){var s=i.array;o=i.version;for(var c=0,l=s.length;c<l;c+=3){var h=s[c+0],u=s[c+1],p=s[c+2];n.push(h,u,u,p,p,h)}}else{s=r.array;o=r.version;for(c=0,l=s.length/3-1;c<l;c+=3){h=c+0,u=c+1,p=c+2;n.push(h,u,u,p,p,h)}}var d=new(ne(n)>65535?Kt:Jt)(n,1);d.version=o;var f=a.get(t);f&&e.remove(f),a.set(t,d)}return{get:function(t,e){var i=r.get(e);return i||(e.addEventListener("dispose",o),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new he).setFromObject(t)),i=e._bufferGeometry),r.set(e,i),n.memory.geometries++,i)},update:function(t){var n=t.attributes;for(var i in n)e.update(n[i],34962);var r=t.morphAttributes;for(var i in r)for(var a=r[i],o=0,s=a.length;o<s;o++)e.update(a[o],34962)},getWireframeAttribute:function(t){var e=a.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return a.get(t)}}}function ln(t,e,n,i){var r,a,o,s=i.isWebGL2;this.setMode=function(t){r=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,i){t.drawElements(r,i,a,e*o),n.update(i,r)},this.renderInstances=function(i,c,l,h){if(0!==h){var u,p;if(s)u=t,p="drawElementsInstanced";else if(p="drawElementsInstancedANGLE",null===(u=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[p](r,l,a,c*o,h),n.update(l,r,h)}}}function hn(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(i=i||1,e.calls++,n){case 4:e.triangles+=i*(t/3);break;case 5:case 6:e.triangles+=i*(t-2);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function un(t,e){return t[0]-e[0]}function pn(t,e){return Math.abs(e[1])-Math.abs(t[1])}function dn(t){for(var e={},n=new Float32Array(8),i=[],r=0;r<8;r++)i[r]=[r,0];return{update:function(r,a,o,s){var c=r.morphTargetInfluences,l=c.length,h=e[a.id];if(void 0===h){h=[];for(var u=0;u<l;u++)h[u]=[u,0];e[a.id]=h}for(u=0;u<l;u++){(m=h[u])[0]=u,m[1]=c[u]}for(h.sort(pn),u=0;u<8;u++)u<l&&h[u][1]?(i[u][0]=h[u][0],i[u][1]=h[u][1]):(i[u][0]=Number.MAX_SAFE_INTEGER,i[u][1]=0);i.sort(un);var p=o.morphTargets&&a.morphAttributes.position,d=o.morphNormals&&a.morphAttributes.normal,f=0;for(u=0;u<8;u++){var m,v=(m=i[u])[0],g=m[1];v!==Number.MAX_SAFE_INTEGER&&g?(p&&a.getAttribute("morphTarget"+u)!==p[v]&&a.setAttribute("morphTarget"+u,p[v]),d&&a.getAttribute("morphNormal"+u)!==d[v]&&a.setAttribute("morphNormal"+u,d[v]),n[u]=g,f+=g):(p&&void 0!==a.getAttribute("morphTarget"+u)&&a.deleteAttribute("morphTarget"+u),d&&void 0!==a.getAttribute("morphNormal"+u)&&a.deleteAttribute("morphNormal"+u),n[u]=0)}var y=a.morphTargetsRelative?1:1-f;s.getUniforms().setValue(t,"morphTargetBaseInfluence",y),s.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function fn(t,e,n,i){var r={};return{update:function(t){var a=i.render.frame,o=t.geometry,s=e.get(t,o);return r[s.id]!==a&&(o.isGeometry&&s.updateFromObject(t),e.update(s),r[s.id]=a),t.isInstancedMesh&&n.update(t.instanceMatrix,34962),s},dispose:function(){r={}}}}function mn(t,e,n,i,r,a,o,s,c,l){t=void 0!==t?t:[],e=void 0!==e?e:301,o=void 0!==o?o:1022,g.call(this,t,e,n,i,r,a,o,s,c,l),this.flipY=!1}function vn(t,e,n,i){g.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:i||1},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function gn(t,e,n,i){g.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:i||1},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Je.physical={uniforms:Ue([Je.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new Bt(0)},clearcoatNormalScale:{value:new s(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:Ye.meshphysical_vert,fragmentShader:Ye.meshphysical_frag},$e.prototype=Object.create(De.prototype),$e.prototype.constructor=$e,tn.prototype=Object.create(he.prototype),tn.prototype.constructor=tn,mn.prototype=Object.create(g.prototype),mn.prototype.constructor=mn,mn.prototype.isCubeTexture=!0,Object.defineProperty(mn.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),vn.prototype=Object.create(g.prototype),vn.prototype.constructor=vn,vn.prototype.isDataTexture2DArray=!0,gn.prototype=Object.create(g.prototype),gn.prototype.constructor=gn,gn.prototype.isDataTexture3D=!0;var yn=new g,xn=new vn,bn=new gn,wn=new mn,_n=[],Mn=[],Sn=new Float32Array(16),Tn=new Float32Array(9),En=new Float32Array(4);function An(t,e,n){var i=t[0];if(i<=0||i>0)return t;var r=e*n,a=_n[r];if(void 0===a&&(a=new Float32Array(r),_n[r]=a),0!==e){i.toArray(a,0);for(var o=1,s=0;o!==e;++o)s+=n,t[o].toArray(a,s)}return a}function Ln(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Pn(t,e){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}function Rn(t,e){var n=Mn[e];void 0===n&&(n=new Int32Array(e),Mn[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Cn(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function On(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ln(n,e))return;t.uniform2fv(this.addr,e),Pn(n,e)}}function In(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ln(n,e))return;t.uniform3fv(this.addr,e),Pn(n,e)}}function Nn(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ln(n,e))return;t.uniform4fv(this.addr,e),Pn(n,e)}}function Dn(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Ln(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Pn(n,e)}else{if(Ln(n,i))return;En.set(i),t.uniformMatrix2fv(this.addr,!1,En),Pn(n,i)}}function zn(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Ln(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Pn(n,e)}else{if(Ln(n,i))return;Tn.set(i),t.uniformMatrix3fv(this.addr,!1,Tn),Pn(n,i)}}function Bn(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Ln(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Pn(n,e)}else{if(Ln(n,i))return;Sn.set(i),t.uniformMatrix4fv(this.addr,!1,Sn),Pn(n,i)}}function Un(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||yn,r)}function Fn(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||xn,r)}function Gn(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||bn,r)}function Vn(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||wn,r)}function Hn(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function jn(t,e){var n=this.cache;Ln(n,e)||(t.uniform2iv(this.addr,e),Pn(n,e))}function kn(t,e){var n=this.cache;Ln(n,e)||(t.uniform3iv(this.addr,e),Pn(n,e))}function Wn(t,e){var n=this.cache;Ln(n,e)||(t.uniform4iv(this.addr,e),Pn(n,e))}function qn(t,e){t.uniform1fv(this.addr,e)}function Xn(t,e){t.uniform1iv(this.addr,e)}function Yn(t,e){t.uniform2iv(this.addr,e)}function Zn(t,e){t.uniform3iv(this.addr,e)}function Jn(t,e){t.uniform4iv(this.addr,e)}function Qn(t,e){var n=An(e,this.size,2);t.uniform2fv(this.addr,n)}function Kn(t,e){var n=An(e,this.size,3);t.uniform3fv(this.addr,n)}function $n(t,e){var n=An(e,this.size,4);t.uniform4fv(this.addr,n)}function ti(t,e){var n=An(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function ei(t,e){var n=An(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function ni(t,e){var n=An(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function ii(t,e,n){var i=e.length,r=Rn(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTexture2D(e[a]||yn,r[a])}function ri(t,e,n){var i=e.length,r=Rn(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTextureCube(e[a]||wn,r[a])}function ai(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Cn;case 35664:return On;case 35665:return In;case 35666:return Nn;case 35674:return Dn;case 35675:return zn;case 35676:return Bn;case 35678:case 36198:return Un;case 35679:return Gn;case 35680:return Vn;case 36289:return Fn;case 5124:case 35670:return Hn;case 35667:case 35671:return jn;case 35668:case 35672:return kn;case 35669:case 35673:return Wn}}(e.type)}function oi(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return qn;case 35664:return Qn;case 35665:return Kn;case 35666:return $n;case 35674:return ti;case 35675:return ei;case 35676:return ni;case 35678:return ii;case 35680:return ri;case 5124:case 35670:return Xn;case 35667:case 35671:return Yn;case 35668:case 35672:return Zn;case 35669:case 35673:return Jn}}(e.type)}function si(t){this.id=t,this.seq=[],this.map={}}oi.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Pn(e,t)},si.prototype.setValue=function(t,e,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(t,e[o.id],n)}};var ci=/([\\w\\d_]+)(\\])?(\\[|\\.)?/g;function li(t,e){t.seq.push(e),t.map[e.id]=e}function hi(t,e,n){var i=t.name,r=i.length;for(ci.lastIndex=0;;){var a=ci.exec(i),o=ci.lastIndex,s=a[1],c="]"===a[2],l=a[3];if(c&&(s|=0),void 0===l||"["===l&&o+2===r){li(n,void 0===l?new ai(s,t,e):new oi(s,t,e));break}var h=n.map[s];void 0===h&&li(n,h=new si(s)),n=h}}function ui(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),i=0;i<n;++i){var r=t.getActiveUniform(e,i);hi(r,t.getUniformLocation(e,r.name),this)}}function pi(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}ui.prototype.setValue=function(t,e,n,i){var r=this.map[e];void 0!==r&&r.setValue(t,n,i)},ui.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},ui.upload=function(t,e,n,i){for(var r=0,a=e.length;r!==a;++r){var o=e[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,i)}},ui.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var a=t[i];a.id in e&&n.push(a)}return n};var di=0;function fi(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+t)}}function mi(t,e,n){var i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();return i&&""===r?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\\n"+r+function(t){for(var e=t.split("\\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\\n")}(t.getShaderSource(e))}function vi(t,e){var n=fi(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function gi(t,e){var n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Uncharted2";break;case 4:n="OptimizedCineon";break;case 5:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function yi(t){return""!==t}function xi(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function bi(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var wi=/^[ \\t]*#include +<([\\w\\d./]+)>/gm;function _i(t){return t.replace(wi,Mi)}function Mi(t,e){var n=Ye[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return _i(n)}var Si=/#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;function Ti(t){return t.replace(Si,Ei)}function Ei(t,e,n,i){for(var r="",a=parseInt(e);a<parseInt(n);a++)r+=i.replace(/\\[ i \\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function Ai(t){var e="precision "+t.precision+" float;\\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\\n#define LOW_PRECISION"),e}function Li(t,e,n,i,r,a,o){var s,c,l,h,u,p=t.getContext(),d=i.defines,f=r.vertexShader,m=r.fragmentShader,v=function(t){var e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(a),g=function(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:e="ENVMAP_TYPE_EQUIREC";break;case 305:e="ENVMAP_TYPE_SPHERE"}return e}(a),y=function(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case 302:case 304:e="ENVMAP_MODE_REFRACTION"}return e}(a),x=function(t){var e="ENVMAP_BLENDING_MULTIPLY";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(a),b=t.gammaFactor>0?t.gammaFactor:1,w=a.isWebGL2?"":function(t,e,n){return[(t=t||{}).derivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(yi).join("\\n")}(i.extensions,a,e),_=function(t){var e=[];for(var n in t){var i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\\n")}(d),M=p.createProgram(),S=a.numMultiviewViews;if(i.isRawShaderMaterial?((s=[_].filter(yi).join("\\n")).length>0&&(s+="\\n"),(c=[w,_].filter(yi).join("\\n")).length>0&&(c+="\\n")):(s=[Ai(a),"#define SHADER_NAME "+r.name,_,a.instancing?"#define USE_INSTANCING":"",a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+b,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+y:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+v:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\\tattribute vec3 morphTarget0;","\\tattribute vec3 morphTarget1;","\\tattribute vec3 morphTarget2;","\\tattribute vec3 morphTarget3;","\\t#ifdef USE_MORPHNORMALS","\\t\\tattribute vec3 morphNormal0;","\\t\\tattribute vec3 morphNormal1;","\\t\\tattribute vec3 morphNormal2;","\\t\\tattribute vec3 morphNormal3;","\\t#else","\\t\\tattribute vec3 morphTarget4;","\\t\\tattribute vec3 morphTarget5;","\\t\\tattribute vec3 morphTarget6;","\\t\\tattribute vec3 morphTarget7;","\\t#endif","#endif","#ifdef USE_SKINNING","\\tattribute vec4 skinIndex;","\\tattribute vec4 skinWeight;","#endif","\\n"].filter(yi).join("\\n"),c=[w,Ai(a),"#define SHADER_NAME "+r.name,_,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+b,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+g:"",a.envMap?"#define "+y:"",a.envMap?"#define "+x:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.sheen?"#define USE_SHEEN":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+v:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensions&&i.extensions.shaderTextureLOD||a.envMap)&&(a.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==a.toneMapping?"#define TONE_MAPPING":"",0!==a.toneMapping?Ye.tonemapping_pars_fragment:"",0!==a.toneMapping?gi("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?Ye.encodings_pars_fragment:"",a.mapEncoding?vi("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?vi("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?vi("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?vi("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?(l="linearToOutputTexel",h=a.outputEncoding,u=fi(h),"vec4 "+l+"( vec4 value ) { return LinearTo"+u[0]+u[1]+"; }"):"",a.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\\n"].filter(yi).join("\\n")),f=bi(f=xi(f=_i(f),a),a),m=bi(m=xi(m=_i(m),a),a),f=Ti(f),m=Ti(m),a.isWebGL2){var T=!1,E=/^\\s*#version\\s+300\\s+es\\s*\\n/;if(i.isShaderMaterial&&null!==f.match(E)&&null!==m.match(E)&&(T=!0,f=f.replace(E,""),m=m.replace(E,"")),i.isRawShaderMaterial){const t="#version 300 es\\n";T&&(s=t+s,c=t+c)}else s=["#version 300 es\\n","#define attribute in","#define varying out","#define texture2D texture"].join("\\n")+"\\n"+s,c=["#version 300 es\\n","#define varying in",T?"":"out highp vec4 pc_fragColor;",T?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\\n")+"\\n"+c;S>0&&(s=(s=s.replace("#version 300 es\\n",["#version 300 es\\n","#extension GL_OVR_multiview2 : require","layout(num_views = "+S+") in;","#define VIEW_ID gl_ViewID_OVR"].join("\\n"))).replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join("\\n"),["uniform mat4 modelViewMatrices["+S+"];","uniform mat4 projectionMatrices["+S+"];","uniform mat4 viewMatrices["+S+"];","uniform mat3 normalMatrices["+S+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join("\\n")),c=(c=c.replace("#version 300 es\\n",["#version 300 es\\n","#extension GL_OVR_multiview2 : require","#define VIEW_ID gl_ViewID_OVR"].join("\\n"))).replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+S+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join("\\n")))}var A,L,P=c+m,R=pi(p,35633,s+f),C=pi(p,35632,P);if(p.attachShader(M,R),p.attachShader(M,C),void 0!==i.index0AttributeName?p.bindAttribLocation(M,0,i.index0AttributeName):!0===a.morphTargets&&p.bindAttribLocation(M,0,"position"),p.linkProgram(M),t.debug.checkShaderErrors){var O=p.getProgramInfoLog(M).trim(),I=p.getShaderInfoLog(R).trim(),N=p.getShaderInfoLog(C).trim(),D=!0,z=!0;if(!1===p.getProgramParameter(M,35714)){D=!1;var B=mi(p,R,"vertex"),U=mi(p,C,"fragment");console.error("THREE.WebGLProgram: shader error: ",p.getError(),"35715",p.getProgramParameter(M,35715),"gl.getProgramInfoLog",O,B,U)}else""!==O?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",O):""!==I&&""!==N||(z=!1);z&&(this.diagnostics={runnable:D,material:i,programLog:O,vertexShader:{log:I,prefix:s},fragmentShader:{log:N,prefix:c}})}return p.deleteShader(R),p.deleteShader(C),this.getUniforms=function(){return void 0===A&&(A=new ui(p,M)),A},this.getAttributes=function(){return void 0===L&&(L=function(t,e){for(var n={},i=t.getProgramParameter(e,35721),r=0;r<i;r++){var a=t.getActiveAttrib(e,r).name;n[a]=t.getAttribLocation(e,a)}return n}(p,M)),L},this.destroy=function(){o.releaseStatesOfProgram(this),p.deleteProgram(M),this.program=void 0},this.name=r.name,this.id=di++,this.cacheKey=n,this.usedTimes=1,this.program=M,this.vertexShader=R,this.fragmentShader=C,this.numMultiviewViews=S,this}function Pi(t,e,n,i){var r=[],a=n.isWebGL2,o=n.logarithmicDepthBuffer,s=n.floatVertexTextures,c=n.precision,l=n.maxVertexUniforms,h=n.vertexTextures,u={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","numMultiviewViews","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function d(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don\'t use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=3e3,3e3===n&&e&&(n=3007),n}this.getParameters=function(e,i,r,p,f,m,v){var g=u[e.type],y=v.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(s)return 1024;var n=l,i=Math.floor((n-20)/4),r=Math.min(i,e.length);return r<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+r+"."),0):r}(v):0;null!==e.precision&&(c=n.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",c,"instead.");var x=t.getRenderTarget(),b=x&&x.isWebGLMultiviewRenderTarget?x.numViews:0;return{isWebGL2:a,shaderID:g,precision:c,instancing:!0===v.isInstancedMesh,supportsVertexTextures:h,numMultiviewViews:b,outputEncoding:d(x?x.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:d(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:d(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:d(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(306===e.envMap.mapping||307===e.envMap.mapping),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:d(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:1===e.normalMapType,tangentSpaceNormalMap:0===e.normalMapType,clearcoatNormalMap:!!e.clearcoatNormalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,sheen:!!e.sheen,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,vertexUvs:!!(e.map||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e.emissiveMap||e.roughnessMap||e.metalnessMap||e.clearcoatNormalMap||e.displacementMap),uvsVertexOnly:!(e.map||e.bumpMap||e.normalMap||e.specularMap||e.alphaMap||e.emissiveMap||e.roughnessMap||e.metalnessMap||e.clearcoatNormalMap||!e.displacementMap),fog:!!p,useFog:e.fog,fogExp2:p&&p.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:o,skinning:e.skinning&&y>0,maxBones:y,useVertexTexture:s,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numDirLightShadows:i.directionalShadowMap.length,numPointLightShadows:i.pointShadowMap.length,numSpotLightShadows:i.spotShadowMap.length,numClippingPlanes:f,numClipIntersection:m,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&r.length>0,shadowMapType:t.shadowMap.type,toneMapping:e.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:2===e.side,flipSided:1===e.side,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCacheKey=function(e,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)i.push(r),i.push(e.defines[r]);for(var a=0;a<p.length;a++)i.push(n[p[a]]);return i.push(e.onBeforeCompile.toString()),i.push(t.gammaOutput),i.push(t.gammaFactor),i.join()},this.acquireProgram=function(n,a,o,s){for(var c,l=0,h=r.length;l<h;l++){var u=r[l];if(u.cacheKey===s){++(c=u).usedTimes;break}}return void 0===c&&(c=new Li(t,e,s,n,a,o,i),r.push(c)),c},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function Ri(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function Ci(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Oi(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Ii(){var t=[],e=0,n=[],i=[],r={id:-1};function a(n,i,a,o,s,c){var l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:i,material:a,program:a.program||r,groupOrder:o,renderOrder:n.renderOrder,z:s,group:c},t[e]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=a,l.program=a.program||r,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=s,l.group=c),e++,l}return{opaque:n,transparent:i,init:function(){e=0,n.length=0,i.length=0},push:function(t,e,r,o,s,c){var l=a(t,e,r,o,s,c);(!0===r.transparent?i:n).push(l)},unshift:function(t,e,r,o,s,c){var l=a(t,e,r,o,s,c);(!0===r.transparent?i:n).unshift(l)},sort:function(){n.length>1&&n.sort(Ci),i.length>1&&i.sort(Oi)}}}function Ni(){var t=new WeakMap;function e(n){var i=n.target;i.removeEventListener("dispose",e),t.delete(i)}return{get:function(n,i){var r,a=t.get(n);return void 0===a?(r=new Ii,t.set(n,new WeakMap),t.get(n).set(i,r),n.addEventListener("dispose",e)):void 0===(r=a.get(i))&&(r=new Ii,a.set(i,r)),r},dispose:function(){t=new WeakMap}}}function Di(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new u,color:new Bt,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new s};break;case"SpotLight":n={position:new u,direction:new u,color:new Bt,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new s};break;case"PointLight":n={position:new u,color:new Bt,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new s,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new u,skyColor:new Bt,groundColor:new Bt};break;case"RectAreaLight":n={color:new Bt,position:new u,halfWidth:new u,halfHeight:new u}}return t[e.id]=n,n}}}var zi=0;function Bi(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Ui(){for(var t=new Di,e={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},n=0;n<9;n++)e.probe.push(new u);var i=new u,r=new L,a=new L;return{setup:function(n,o,s){for(var c=0,l=0,h=0,u=0;u<9;u++)e.probe[u].set(0,0,0);var p=0,d=0,f=0,m=0,v=0,g=0,y=0,x=0,b=s.matrixWorldInverse;n.sort(Bi),u=0;for(var w=n.length;u<w;u++){var _=n[u],M=_.color,S=_.intensity,T=_.distance,E=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)c+=M.r*S,l+=M.g*S,h+=M.b*S;else if(_.isLightProbe)for(var A=0;A<9;A++)e.probe[A].addScaledVector(_.sh.coefficients[A],S);else if(_.isDirectionalLight){if((P=t.get(_)).color.copy(_.color).multiplyScalar(_.intensity),P.direction.setFromMatrixPosition(_.matrixWorld),i.setFromMatrixPosition(_.target.matrixWorld),P.direction.sub(i),P.direction.transformDirection(b),P.shadow=_.castShadow,_.castShadow){var L=_.shadow;P.shadowBias=L.bias,P.shadowRadius=L.radius,P.shadowMapSize=L.mapSize,e.directionalShadowMap[p]=E,e.directionalShadowMatrix[p]=_.shadow.matrix,g++}e.directional[p]=P,p++}else if(_.isSpotLight){if((P=t.get(_)).position.setFromMatrixPosition(_.matrixWorld),P.position.applyMatrix4(b),P.color.copy(M).multiplyScalar(S),P.distance=T,P.direction.setFromMatrixPosition(_.matrixWorld),i.setFromMatrixPosition(_.target.matrixWorld),P.direction.sub(i),P.direction.transformDirection(b),P.coneCos=Math.cos(_.angle),P.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),P.decay=_.decay,P.shadow=_.castShadow,_.castShadow){L=_.shadow;P.shadowBias=L.bias,P.shadowRadius=L.radius,P.shadowMapSize=L.mapSize,e.spotShadowMap[f]=E,e.spotShadowMatrix[f]=_.shadow.matrix,x++}e.spot[f]=P,f++}else if(_.isRectAreaLight){(P=t.get(_)).color.copy(M).multiplyScalar(S),P.position.setFromMatrixPosition(_.matrixWorld),P.position.applyMatrix4(b),a.identity(),r.copy(_.matrixWorld),r.premultiply(b),a.extractRotation(r),P.halfWidth.set(.5*_.width,0,0),P.halfHeight.set(0,.5*_.height,0),P.halfWidth.applyMatrix4(a),P.halfHeight.applyMatrix4(a),e.rectArea[m]=P,m++}else if(_.isPointLight){if((P=t.get(_)).position.setFromMatrixPosition(_.matrixWorld),P.position.applyMatrix4(b),P.color.copy(_.color).multiplyScalar(_.intensity),P.distance=_.distance,P.decay=_.decay,P.shadow=_.castShadow,_.castShadow){L=_.shadow;P.shadowBias=L.bias,P.shadowRadius=L.radius,P.shadowMapSize=L.mapSize,P.shadowCameraNear=L.camera.near,P.shadowCameraFar=L.camera.far,e.pointShadowMap[d]=E,e.pointShadowMatrix[d]=_.shadow.matrix,y++}e.point[d]=P,d++}else if(_.isHemisphereLight){var P;(P=t.get(_)).direction.setFromMatrixPosition(_.matrixWorld),P.direction.transformDirection(b),P.direction.normalize(),P.skyColor.copy(_.color).multiplyScalar(S),P.groundColor.copy(_.groundColor).multiplyScalar(S),e.hemi[v]=P,v++}}e.ambient[0]=c,e.ambient[1]=l,e.ambient[2]=h;var R=e.hash;R.directionalLength===p&&R.pointLength===d&&R.spotLength===f&&R.rectAreaLength===m&&R.hemiLength===v&&R.numDirectionalShadows===g&&R.numPointShadows===y&&R.numSpotShadows===x||(e.directional.length=p,e.spot.length=f,e.rectArea.length=m,e.point.length=d,e.hemi.length=v,e.directionalShadowMap.length=g,e.pointShadowMap.length=y,e.spotShadowMap.length=x,e.directionalShadowMatrix.length=g,e.pointShadowMatrix.length=y,e.spotShadowMatrix.length=x,R.directionalLength=p,R.pointLength=d,R.spotLength=f,R.rectAreaLength=m,R.hemiLength=v,R.numDirectionalShadows=g,R.numPointShadows=y,R.numSpotShadows=x,e.version=zi++)},state:e}}function Fi(){var t=new Ui,e=[],n=[];return{init:function(){e.length=0,n.length=0},state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:function(i){t.setup(e,n,i)},pushLight:function(t){e.push(t)},pushShadow:function(t){n.push(t)}}}function Gi(){var t=new WeakMap;function e(n){var i=n.target;i.removeEventListener("dispose",e),t.delete(i)}return{get:function(n,i){var r;return!1===t.has(n)?(r=new Fi,t.set(n,new WeakMap),t.get(n).set(i,r),n.addEventListener("dispose",e)):!1===t.get(n).has(i)?(r=new Fi,t.get(n).set(i,r)):r=t.get(n).get(i),r},dispose:function(){t=new WeakMap}}}function Vi(t){jt.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Hi(t){jt.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new u,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}Vi.prototype=Object.create(jt.prototype),Vi.prototype.constructor=Vi,Vi.prototype.isMeshDepthMaterial=!0,Vi.prototype.copy=function(t){return jt.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Hi.prototype=Object.create(jt.prototype),Hi.prototype.constructor=Hi,Hi.prototype.isMeshDistanceMaterial=!0,Hi.prototype.copy=function(t){return jt.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};function ji(t,e,n){var i=new Xe,r=new s,a=new s,o=new y,c=[],l=[],h={},u={0:1,1:0,2:2},p=new Fe({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new s},radius:{value:4}},vertexShader:"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}",fragmentShader:"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n  float mean = 0.0;\\n  float squared_mean = 0.0;\\n\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\\n    #ifdef HORIZONAL_PASS\\n      vec2 distribution = unpack2HalfToRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\\n      mean += distribution.x;\\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n    #else\\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\\n      mean += depth;\\n      squared_mean += depth * depth;\\n    #endif\\n  }\\n  mean = mean * HALF_SAMPLE_RATE;\\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\\n  float std_dev = sqrt( squared_mean - mean * mean );\\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}"}),d=p.clone();d.defines.HORIZONAL_PASS=1;var f=new he;f.setAttribute("position",new Wt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var m=new Le(f,p),v=this;function g(n,i){var r=e.update(m);p.uniforms.shadow_pass.value=n.map.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,p,m,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,d,m,null)}function b(t,e,n){var i=t<<0|e<<1|n<<2,r=c[i];return void 0===r&&(r=new Vi({depthPacking:3201,morphTargets:t,skinning:e}),c[i]=r),r}function w(t,e,n){var i=t<<0|e<<1|n<<2,r=l[i];return void 0===r&&(r=new Hi({morphTargets:t,skinning:e}),l[i]=r),r}function _(e,n,i,r,a,o){var s=e.geometry,c=null,l=b,p=e.customDepthMaterial;if(!0===i.isPointLight&&(l=w,p=e.customDistanceMaterial),void 0===p){var d=!1;!0===n.morphTargets&&(!0===s.isBufferGeometry?d=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:!0===s.isGeometry&&(d=s.morphTargets&&s.morphTargets.length>0));var f=!1;!0===e.isSkinnedMesh&&(!0===n.skinning?f=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e)),c=l(d,f,!0===e.isInstancedMesh)}else c=p;if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var m=c.uuid,v=n.uuid,g=h[m];void 0===g&&(g={},h[m]=g);var y=g[v];void 0===y&&(y=c.clone(),g[v]=y),c=y}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=3===o?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:u[n.side],c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,!0===i.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(i.matrixWorld),c.nearDistance=r,c.farDistance=a),c}function M(n,r,a,o,s){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var c=e.update(n),l=n.material;if(Array.isArray(l))for(var h=c.groups,u=0,p=h.length;u<p;u++){var d=h[u],f=l[d.materialIndex];if(f&&f.visible){var m=_(n,f,o,a.near,a.far,s);t.renderBufferDirect(a,null,c,m,n,d)}}else if(l.visible){m=_(n,l,o,a.near,a.far,s);t.renderBufferDirect(a,null,c,m,n,null)}}for(var v=n.children,g=0,y=v.length;g<y;g++)M(v[g],r,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,s,c){if(!1!==v.enabled&&(!1!==v.autoUpdate||!1!==v.needsUpdate)&&0!==e.length){var l=t.getRenderTarget(),h=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),p=t.state;p.setBlending(0),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(var d=0,f=e.length;d<f;d++){var m=e[d],y=m.shadow;if(void 0!==y){r.copy(y.mapSize);var b=y.getFrameExtents();if(r.multiply(b),a.copy(y.mapSize),(r.x>n||r.y>n)&&(console.warn("THREE.WebGLShadowMap:",m,"has shadow exceeding max texture size, reducing"),r.x>n&&(a.x=Math.floor(n/b.x),r.x=a.x*b.x,y.mapSize.x=a.x),r.y>n&&(a.y=Math.floor(n/b.y),r.y=a.y*b.y,y.mapSize.y=a.y)),null===y.map&&!y.isPointLightShadow&&3===this.type){var w={minFilter:1006,magFilter:1006,format:1023};y.map=new x(r.x,r.y,w),y.map.texture.name=m.name+".shadowMap",y.mapPass=new x(r.x,r.y,w),y.camera.updateProjectionMatrix()}if(null===y.map){w={minFilter:1003,magFilter:1003,format:1023};y.map=new x(r.x,r.y,w),y.map.texture.name=m.name+".shadowMap",y.camera.updateProjectionMatrix()}t.setRenderTarget(y.map),t.clear();for(var _=y.getViewportCount(),S=0;S<_;S++){var T=y.getViewport(S);o.set(a.x*T.x,a.y*T.y,a.x*T.z,a.y*T.w),p.viewport(o),y.updateMatrices(m,S),i=y.getFrustum(),M(s,c,y.camera,m,this.type)}y.isPointLightShadow||3!==this.type||g(y,c)}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}v.needsUpdate=!1,t.setRenderTarget(l,h,u)}}}function ki(t,e,n){var i=n.isWebGL2;var r=new function(){var e=!1,n=new y,i=null,r=new y(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,a,o,s){!0===s&&(e*=o,i*=o,a*=o),n.set(e,i,a,o),!1===r.equals(n)&&(t.clearColor(e,i,a,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},a=new function(){var e=!1,n=null,i=null,r=null;return{setTest:function(t){t?z(2929):B(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},o=new function(){var e=!1,n=null,i=null,r=null,a=null,o=null,s=null,c=null,l=null;return{setTest:function(t){e||(t?z(2960):B(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,o){i===e&&r===n&&a===o||(t.stencilFunc(e,n,o),i=e,r=n,a=o)},setOp:function(e,n,i){o===e&&s===n&&c===i||(t.stencilOp(e,n,i),o=e,s=n,c=i)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,i=null,r=null,a=null,o=null,s=null,c=null,l=null}}},s=new WeakMap,c=new WeakMap,l={},h=null,u=null,p=null,d=null,f=null,m=null,v=null,g=null,x=null,b=!1,w=null,_=null,M=null,S=null,T=null,E=t.getParameter(35661),A=!1,L=0,P=t.getParameter(7938);-1!==P.indexOf("WebGL")?(L=parseFloat(/^WebGL\\ ([0-9])/.exec(P)[1]),A=L>=1):-1!==P.indexOf("OpenGL ES")&&(L=parseFloat(/^OpenGL\\ ES\\ ([0-9])/.exec(P)[1]),A=L>=2);var R=null,C={},O=new y,I=new y;function N(e,n,i){var r=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var o=0;o<i;o++)t.texImage2D(n+o,0,6408,1,1,0,6408,5121,r);return a}var D={};function z(e){!0!==l[e]&&(t.enable(e),l[e]=!0)}function B(e){!1!==l[e]&&(t.disable(e),l[e]=!1)}D[3553]=N(3553,3553,1),D[34067]=N(34067,34069,6),r.setClear(0,0,0,1),a.setClear(1),o.setClear(0),z(2929),a.setFunc(3),H(!1),j(1),z(2884),V(0);var U={100:32774,101:32778,102:32779};if(i)U[103]=32775,U[104]=32776;else{var F=e.get("EXT_blend_minmax");null!==F&&(U[103]=F.MIN_EXT,U[104]=F.MAX_EXT)}var G={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function V(e,n,i,r,a,o,s,c){if(0!==e){if(u||(z(3042),u=!0),5===e)a=a||n,o=o||i,s=s||r,n===d&&a===v||(t.blendEquationSeparate(U[n],U[a]),d=n,v=a),i===f&&r===m&&o===g&&s===x||(t.blendFuncSeparate(G[i],G[r],G[o],G[s]),f=i,m=r,g=o,x=s),p=e,b=null;else if(e!==p||c!==b){if(100===d&&100===v||(t.blendEquation(32774),d=100,v=100),c)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}f=null,m=null,g=null,x=null,p=e,b=c}}else u&&(B(3042),u=!1)}function H(e){w!==e&&(e?t.frontFace(2304):t.frontFace(2305),w=e)}function j(e){0!==e?(z(2884),e!==_&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):B(2884),_=e}function k(e,n,i){e?(z(32823),S===n&&T===i||(t.polygonOffset(n,i),S=n,T=i)):B(32823)}function W(e){void 0===e&&(e=33984+E-1),R!==e&&(t.activeTexture(e),R=e)}return{buffers:{color:r,depth:a,stencil:o},enable:z,disable:B,useProgram:function(e){return h!==e&&(t.useProgram(e),h=e,!0)},setBlending:V,setMaterial:function(t,e){2===t.side?B(2884):z(2884);var n=1===t.side;e&&(n=!n),H(n),1===t.blending&&!1===t.transparent?V(0):V(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),r.setMask(t.colorWrite);var i=t.stencilWrite;o.setTest(i),i&&(o.setMask(t.stencilWriteMask),o.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),k(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:H,setCullFace:j,setLineWidth:function(e){e!==M&&(A&&t.lineWidth(e),M=e)},setPolygonOffset:k,setScissorTest:function(t){t?z(3089):B(3089)},activeTexture:W,bindTexture:function(e,n){null===R&&W();var i=C[R];void 0===i&&(i={type:void 0,texture:void 0},C[R]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||D[e]),i.type=e,i.texture=n)},unbindTexture:function(){var e=C[R];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===O.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),O.copy(e))},viewport:function(e){!1===I.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),I.copy(e))},updateUBOMapping:function(e,n){var i=c.get(n);void 0===i&&(i=new WeakMap,c.set(n,i));var r=i.get(e);void 0===r&&(r=t.getUniformBlockIndex(n,e.name),i.set(e,r))},uniformBlockBinding:function(e,n){var i=c.get(n).get(e);s.get(e)!==i&&(t.uniformBlockBinding(n,i,e.__bindingPointIndex),s.set(e,i))},reset:function(){l={},R=null,C={},h=null,p=null,w=null,_=null,r.reset(),a.reset(),o.reset()}}}function Wi(t,e,n,i,r,a,s){var c,l=r.isWebGL2,h=r.maxTextures,u=r.maxCubemapSize,p=r.maxTextureSize,d=r.maxSamples,f=new WeakMap,m="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d");function v(t,e){return m?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(t,e,n,i){var r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var a=e?o.floorPowerOfTwo:Math.floor,s=a(r*t.width),l=a(r*t.height);void 0===c&&(c=v(s,l));var h=n?v(s,l):c;return h.width=s,h.height=l,h.getContext("2d").drawImage(t,0,0,s,l),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+s+"x"+l+")."),h}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function y(t){return o.isPowerOfTwo(t.width)&&o.isPowerOfTwo(t.height)}function x(t,e){return t.generateMipmaps&&e&&1003!==t.minFilter&&1006!==t.minFilter}function b(e,n,r,a){t.generateMipmap(e),i.get(n).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function w(t,n){if(!1===l)return t;var i=t;return 6403===t&&(5126===n&&(i=33326),5131===n&&(i=33325),5121===n&&(i=33321)),6407===t&&(5126===n&&(i=34837),5131===n&&(i=34843),5121===n&&(i=32849)),6408===t&&(5126===n&&(i=34836),5131===n&&(i=34842),5121===n&&(i=32856)),33325===i||33326===i||34842===i||34836===i?e.get("EXT_color_buffer_float"):34843!==i&&34837!==i||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),i}function _(t){return 1003===t||1004===t||1005===t?9728:9729}function M(e){var n=e.target;n.removeEventListener("dispose",M),function(e){var n=i.get(e);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),i.remove(e)}(n),n.isVideoTexture&&f.delete(n),s.memory.textures--}function S(e){var n=e.target;n.removeEventListener("dispose",S),function(e){var n=i.get(e),r=i.get(e.texture);if(!e)return;void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLRenderTargetCube)for(var a=0;a<6;a++)t.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[a]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);if(e.isWebGLMultiviewRenderTarget){t.deleteTexture(n.__webglColorTexture),t.deleteTexture(n.__webglDepthStencilTexture),s.memory.textures-=2;a=0;for(var o=n.__webglViewFramebuffers.length;a<o;a++)t.deleteFramebuffer(n.__webglViewFramebuffers[a])}i.remove(e.texture),i.remove(e)}(n),s.memory.textures--}var T=0;function E(t,e){var r=i.get(t);if(t.isVideoTexture&&function(t){var e=s.render.frame;f.get(t)!==e&&(f.set(t,e),t.update())}(t),t.version>0&&r.__version!==t.version){var a=t.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void I(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function A(e,r){if(6===e.image.length){var o=i.get(e);if(e.version>0&&o.__version!==e.version){O(o,e),n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture),t.pixelStorei(37440,e.flipY);for(var s=e&&e.isCompressedTexture,c=e.image[0]&&e.image[0].isDataTexture,h=[],p=0;p<6;p++)h[p]=s||c?c?e.image[p].image:e.image[p]:g(e.image[p],!1,!0,u);var d,f=h[0],m=y(f)||l,v=a.convert(e.format),_=a.convert(e.type),M=w(v,_);if(C(34067,e,m),s){for(p=0;p<6;p++){d=h[p].mipmaps;for(var S=0;S<d.length;S++){var T=d[S];1023!==e.format&&1022!==e.format?null!==v?n.compressedTexImage2D(34069+p,S,M,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+p,S,M,T.width,T.height,0,v,_,T.data)}}o.__maxMipLevel=d.length-1}else{d=e.mipmaps;for(p=0;p<6;p++)if(c){n.texImage2D(34069+p,0,M,h[p].width,h[p].height,0,v,_,h[p].data);for(S=0;S<d.length;S++){var E=(T=d[S]).image[p].image;n.texImage2D(34069+p,S+1,M,E.width,E.height,0,v,_,E.data)}}else{n.texImage2D(34069+p,0,M,v,_,h[p]);for(S=0;S<d.length;S++){T=d[S];n.texImage2D(34069+p,S+1,M,v,_,T.image[p])}}o.__maxMipLevel=d.length}x(e,m)&&b(34067,e,f.width,f.height),o.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture)}}function L(t,e){n.activeTexture(33984+e),n.bindTexture(34067,i.get(t).__webglTexture)}var P={1e3:10497,1001:33071,1002:33648},R={1003:9728,1004:9984,1005:9986,1006:9729,1007:9985,1008:9987};function C(n,a,o){o?(t.texParameteri(n,10242,P[a.wrapS]),t.texParameteri(n,10243,P[a.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,P[a.wrapR]),t.texParameteri(n,10240,R[a.magFilter]),t.texParameteri(n,10241,R[a.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),1001===a.wrapS&&1001===a.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,_(a.magFilter)),t.texParameteri(n,10241,_(a.minFilter)),1003!==a.minFilter&&1006!==a.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=e.get("EXT_texture_filter_anisotropic");if(s){if(1015===a.type&&null===e.get("OES_texture_float_linear"))return;if(1016===a.type&&null===(l||e.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function O(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",M),e.__webglTexture=t.createTexture(),s.memory.textures++)}function I(e,i,r){var o=3553;i.isDataTexture2DArray&&(o=35866),i.isDataTexture3D&&(o=32879),O(e,i),n.activeTexture(33984+r),n.bindTexture(o,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment);var s=function(t){return!l&&(1001!==t.wrapS||1001!==t.wrapT||1003!==t.minFilter&&1006!==t.minFilter)}(i)&&!1===y(i.image),c=g(i.image,s,!1,p),h=y(c)||l,u=a.convert(i.format),d=a.convert(i.type),f=w(u,d);C(o,i,h);var m,v=i.mipmaps;if(i.isDepthTexture){if(f=6402,1015===i.type){if(!1===l)throw new Error("Float Depth Texture only supported in WebGL2.0");f=36012}else l&&(f=33189);1026===i.format&&6402===f&&1012!==i.type&&1014!==i.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=1012,d=a.convert(i.type)),1027===i.format&&(f=34041,1020!==i.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=1020,d=a.convert(i.type))),n.texImage2D(3553,0,f,c.width,c.height,0,u,d,null)}else if(i.isDataTexture)if(v.length>0&&h){for(var _=0,M=v.length;_<M;_++)m=v[_],n.texImage2D(3553,_,f,m.width,m.height,0,u,d,m.data);i.generateMipmaps=!1,e.__maxMipLevel=v.length-1}else n.texImage2D(3553,0,f,c.width,c.height,0,u,d,c.data),e.__maxMipLevel=0;else if(i.isCompressedTexture){for(_=0,M=v.length;_<M;_++)m=v[_],1023!==i.format&&1022!==i.format?null!==u?n.compressedTexImage2D(3553,_,f,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,_,f,m.width,m.height,0,u,d,m.data);e.__maxMipLevel=v.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,f,c.width,c.height,c.depth,0,u,d,c.data),e.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,f,c.width,c.height,c.depth,0,u,d,c.data),e.__maxMipLevel=0;else if(v.length>0&&h){for(_=0,M=v.length;_<M;_++)m=v[_],n.texImage2D(3553,_,f,u,d,m);i.generateMipmaps=!1,e.__maxMipLevel=v.length-1}else n.texImage2D(3553,0,f,u,d,c),e.__maxMipLevel=0;x(i,h)&&b(3553,i,c.width,c.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function N(e,r,o,s){var c=a.convert(r.texture.format),l=a.convert(r.texture.type),h=w(c,l);n.texImage2D(s,0,h,r.width,r.height,0,c,l,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,s,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function D(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){if(i){var r=B(n);t.renderbufferStorageMultisample(36161,r,33189,n.width,n.height)}else t.renderbufferStorage(36161,33189,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(i){r=B(n);t.renderbufferStorageMultisample(36161,r,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var o=w(a.convert(n.texture.format),a.convert(n.texture.type));if(i){r=B(n);t.renderbufferStorageMultisample(36161,r,o,n.width,n.height)}else t.renderbufferStorage(36161,o,n.width,n.height)}t.bindRenderbuffer(36161,null)}function z(e){var n=i.get(e),r=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),E(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(1026===n.depthTexture.format)t.framebufferTexture2D(36160,36096,3553,r,0);else{if(1027!==n.depthTexture.format)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,e)}else if(r){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)t.bindFramebuffer(36160,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=t.createRenderbuffer(),D(n.__webglDepthbuffer[a],e)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),D(n.__webglDepthbuffer,e);t.bindFramebuffer(36160,null)}function B(t){return l&&t.isWebGLMultisampleRenderTarget?Math.min(d,t.samples):0}var U=!1,F=!1;this.allocateTextureUnit=function(){var t=T;return t>=h&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+h),T+=1,t},this.resetTextureUnits=function(){T=0},this.setTexture2D=E,this.setTexture2DArray=function(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?I(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?I(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=A,this.setTextureCubeDynamic=L,this.setupRenderTarget=function(r){var o=i.get(r),c=i.get(r.texture);r.addEventListener("dispose",S),c.__webglTexture=t.createTexture(),s.memory.textures++;var h=!0===r.isWebGLRenderTargetCube,u=!0===r.isWebGLMultisampleRenderTarget,p=!0===r.isWebGLMultiviewRenderTarget,d=y(r)||l;if(h){o.__webglFramebuffer=[];for(var f=0;f<6;f++)o.__webglFramebuffer[f]=t.createFramebuffer()}else if(o.__webglFramebuffer=t.createFramebuffer(),u)if(l){o.__webglMultisampledFramebuffer=t.createFramebuffer(),o.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,o.__webglColorRenderbuffer);var m=w(a.convert(r.texture.format),a.convert(r.texture.type)),v=B(r);t.renderbufferStorageMultisample(36161,v,m,r.width,r.height),t.bindFramebuffer(36160,o.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,o.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),r.depthBuffer&&(o.__webglDepthRenderbuffer=t.createRenderbuffer(),D(o.__webglDepthRenderbuffer,r,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");else if(p){var g=r.width,_=r.height,M=r.numViews;t.bindFramebuffer(36160,o.__webglFramebuffer);var T=e.get("OVR_multiview2");s.memory.textures+=2;var E=t.createTexture();t.bindTexture(35866,E),t.texParameteri(35866,10240,9728),t.texParameteri(35866,10241,9728),t.texImage3D(35866,0,32856,g,_,M,0,6408,5121,null),T.framebufferTextureMultiviewOVR(36160,36064,E,0,0,M);var A=t.createTexture();t.bindTexture(35866,A),t.texParameteri(35866,10240,9728),t.texParameteri(35866,10241,9728),t.texImage3D(35866,0,35056,g,_,M,0,34041,34042,null),T.framebufferTextureMultiviewOVR(36160,33306,A,0,0,M);var L=new Array(M);for(f=0;f<M;++f)L[f]=t.createFramebuffer(),t.bindFramebuffer(36160,L[f]),t.framebufferTextureLayer(36160,36064,E,0,f);o.__webglColorTexture=E,o.__webglDepthStencilTexture=A,o.__webglViewFramebuffers=L,t.bindFramebuffer(36160,null),t.bindTexture(35866,null)}if(h){n.bindTexture(34067,c.__webglTexture),C(34067,r.texture,d);for(f=0;f<6;f++)N(o.__webglFramebuffer[f],r,36064,34069+f);x(r.texture,d)&&b(34067,r.texture,r.width,r.height),n.bindTexture(34067,null)}else p||(n.bindTexture(3553,c.__webglTexture),C(3553,r.texture,d),N(o.__webglFramebuffer,r,36064,3553),x(r.texture,d)&&b(3553,r.texture,r.width,r.height),n.bindTexture(3553,null));r.depthBuffer&&z(r)},this.updateRenderTargetMipmap=function(t){var e=t.texture;if(x(e,y(t)||l)){var r=t.isWebGLRenderTargetCube?34067:3553,a=i.get(e).__webglTexture;n.bindTexture(r,a),b(r,e,t.width,t.height),n.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(l){var n=i.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var r=e.width,a=e.height,o=16384;e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024),t.blitFramebuffer(0,0,r,a,0,0,r,a,o,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===U&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don\'t use render targets as textures. Use their .texture property instead."),U=!0),t=t.texture),E(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLRenderTargetCube&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don\'t use cube render targets as textures. Use their .texture property instead."),F=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?A(t,e):L(t,e)}}function qi(t,e,n,i){var r={},a={},o=[],s=n.isWebGL2?t.getParameter(35375):0;function c(t,e,n){var i=t.value;if(void 0===n[e])return n[e]="number"==typeof i?i:i.clone(),!0;if("number"==typeof i){if(n[e]!==i)return n[e]=i,!0}else{var r=n[e];if(!1===r.equals(i))return r.copy(i),!0}return!1}function l(t){var e=t.value,n={boundary:0,storage:0};return"number"==typeof e?(n.boundary=4,n.storage=4):e.isVector2?(n.boundary=8,n.storage=8):e.isVector3||e.isColor?(n.boundary=16,n.storage=12):e.isVector4?(n.boundary=16,n.storage=16):e.isMatrix3?(n.boundary=48,n.storage=48):e.isMatrix4?(n.boundary=64,n.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),n}function h(e){var n=e.target;n.removeEventListener("dispose",h);var i=o.indexOf(n.__bindingPointIndex);o.splice(i,1),t.deleteBuffer(r[n.id]),delete r[n.id],delete a[n.id]}return{bind:function(t,e){i.uniformBlockBinding(t,e)},update:function(n,u){var p=r[n.id];void 0===p&&(!function(t){if(t.isRawUniformsGroup)return this;for(var e=t.uniforms,n=0,i=0,r=0,a=e.length;r<a;r++){var o=e[r],s=l(o);if(o.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),o.__offset=n,r>0){var c=16-(i=n%16);0!==i&&c-s.boundary<0&&(n+=16-i,o.__offset=n)}n+=s.storage}(i=n%16)>0&&(n+=16-i);t.__size=n,t.__cache={}}(n),p=function(e){var n=function(){for(var t=0;t<s;t++)if(-1===o.indexOf(t))return o.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=n;var i=t.createBuffer(),r=e.isRawUniformsGroup?e.data.byteLength:e.__size,a=e.dynamic?35048:35044;return t.bindBuffer(35345,i),t.bufferData(35345,r,a),t.bindBuffer(35345,null),t.bindBufferBase(35345,n,i),i}(n),r[n.id]=p,n.addEventListener("dispose",h)),i.updateUBOMapping(n,u);var d=e.render.frame;a[n.id]!==d&&(!function(e){var n=r[e.id],i=e.uniforms,a=e.__cache;if(e.isRawUniformsGroup)return void((e.autoUpdate||e.needsUpdate)&&(t.bindBuffer(35345,n),t.bufferSubData(35345,0,e.data),t.bindBuffer(35345,null)));t.bindBuffer(35345,n);for(var o=0,s=i.length;o<s;o++){var l=i[o];if(!0===c(l,o,a)){var h=l.value,u=l.__offset;"number"==typeof h?(l.__data[0]=h,t.bufferSubData(35345,u,l.__data)):(l.value.isMatrix3?(l.__data[0]=l.value.elements[0],l.__data[1]=l.value.elements[1],l.__data[2]=l.value.elements[2],l.__data[3]=l.value.elements[0],l.__data[4]=l.value.elements[3],l.__data[5]=l.value.elements[4],l.__data[6]=l.value.elements[5],l.__data[7]=l.value.elements[0],l.__data[8]=l.value.elements[6],l.__data[9]=l.value.elements[7],l.__data[10]=l.value.elements[8],l.__data[11]=l.value.elements[0]):h.toArray(l.__data),t.bufferSubData(35345,u,l.__data))}}t.bindBuffer(35345,null)}(n),a[n.id]=d)},dispose:function(){for(var e in r)t.deleteBuffer(r[e]);o=[],r={},a={}}}}function Xi(t,e,n){var i=n.isWebGL2;return{convert:function(t){var n;if(1009===t)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(1012===t)return 5123;if(1013===t)return 5124;if(1014===t)return 5125;if(1015===t)return 5126;if(1016===t)return i?5131:null!==(n=e.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(1021===t)return 6406;if(1022===t)return 6407;if(1023===t)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(1026===t)return 6402;if(1027===t)return 34041;if(1028===t)return 6403;if(33776===t||33777===t||33778===t||33779===t){if(null===(n=e.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===t)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===t||35841===t||35842===t||35843===t){if(null===(n=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===t)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}return 36196===t?null!==(n=e.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null:37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t?null!==(n=e.get("WEBGL_compressed_texture_astc"))?t:null:1020===t?i?34042:null!==(n=e.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function Yi(t,e,n,i){x.call(this,t,e,i),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=n}function Zi(t,e){var n,i,r,a,o,c,l,h=t.extensions,u=t.properties,p=0;function d(t){return t.isArrayCamera?t.cameras:(o[0]=t,o)}this.isAvailable=function(){if(void 0===l){var t=h.get("OVR_multiview2");if(l=null!==t&&!1===e.getContextAttributes().antialias){p=e.getParameter(t.MAX_VIEWS_OVR),n=new Yi(0,0,2),c=new s,a=[],r=[],o=[];for(var i=0;i<p;i++)a[i]=new L,r[i]=new f}}return l},this.attachCamera=function(e){!1!==function(t){if(void 0===t.isArrayCamera)return!0;var e=t.cameras;if(e.length>p)return!1;for(var n=1,i=e.length;n<i;n++)if(e[0].viewport.z!==e[n].viewport.z||e[0].viewport.w!==e[n].viewport.w)return!1;return!0}(e)&&(i=t.getRenderTarget(),function(e){if(i?c.set(i.width,i.height):t.getDrawingBufferSize(c),e.isArrayCamera){var r=e.cameras[0].viewport;n.setSize(r.z,r.w),n.setNumViews(e.cameras.length)}else n.setSize(c.x,c.y),n.setNumViews(2)}(e),t.setRenderTarget(n))},this.detachCamera=function(r){n===t.getRenderTarget()&&(t.setRenderTarget(i),function(t){var i=n,r=i.numViews,a=u.get(i).__webglViewFramebuffers,o=i.width,s=i.height;if(t.isArrayCamera)for(var l=0;l<r;l++){var h=t.cameras[l].viewport,p=h.x,d=h.y,f=p+h.z,m=d+h.w;e.bindFramebuffer(36008,a[l]),e.blitFramebuffer(0,0,o,s,p,d,f,m,16384,9728)}else e.bindFramebuffer(36008,a[0]),e.blitFramebuffer(0,0,o,s,0,0,c.x,c.y,16384,9728)}(r))},this.updateCameraProjectionMatricesUniform=function(t,n){for(var i=d(t),r=0;r<i.length;r++)a[r].copy(i[r].projectionMatrix);n.setValue(e,"projectionMatrices",a)},this.updateCameraViewMatricesUniform=function(t,n){for(var i=d(t),r=0;r<i.length;r++)a[r].copy(i[r].matrixWorldInverse);n.setValue(e,"viewMatrices",a)},this.updateObjectMatricesUniforms=function(t,n,i){for(var o=d(n),s=0;s<o.length;s++)a[s].multiplyMatrices(o[s].matrixWorldInverse,t.matrixWorld),r[s].getNormalMatrix(a[s]);i.setValue(e,"modelViewMatrices",a),i.setValue(e,"normalMatrices",r)}}function Ji(){q.call(this),this.type="Group"}function Qi(t){Ve.call(this),this.cameras=t||[]}Yi.prototype=Object.assign(Object.create(x.prototype),{constructor:Yi,isWebGLMultiviewRenderTarget:!0,copy:function(t){return x.prototype.copy.call(this,t),this.numViews=t.numViews,this},setNumViews:function(t){return this.numViews!==t&&(this.numViews=t,this.dispose()),this}}),Ji.prototype=Object.assign(Object.create(q.prototype),{constructor:Ji,isGroup:!0}),Qi.prototype=Object.assign(Object.create(Ve.prototype),{constructor:Qi,isArrayCamera:!0});var Ki,$i=new u,tr=new u;function er(t,e,n){$i.setFromMatrixPosition(e.matrixWorld),tr.setFromMatrixPosition(n.matrixWorld);var i=$i.distanceTo(tr),r=e.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),c=(r[9]+1)/r[5],l=(r[9]-1)/r[5],h=(r[8]-1)/r[0],u=(a[8]+1)/a[0],p=o*h,d=o*u,f=i/(-h+u),m=f*-h;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var v=o+f,g=s+f,y=p-m,x=d+(i-m),b=c*s/g*v,w=l*s/g*v;t.projectionMatrix.makePerspective(y,x,b,w,v,g)}function nr(t){var e,n,i=this,r=null,a=null,o=null,l=[],h=new L,p=new L,d=1,f="local-floor";"undefined"!=typeof window&&"VRFrameData"in window&&(a=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",T,!1));var m=new L,v=new c,g=new u,x=new Ve;x.viewport=new y,x.layers.enable(1);var b=new Ve;b.viewport=new y,b.layers.enable(2);var w=new Qi([x,b]);function _(){return null!==r&&!0===r.isPresenting}w.layers.enable(1),w.layers.enable(2);var M,S=new s;function T(){if(_()){var a=r.getEyeParameters("left");e=2*a.renderWidth*d,n=a.renderHeight*d,M=t.getPixelRatio(),t.getSize(S),t.setDrawingBufferSize(e,n,1),x.viewport.set(0,0,e/2,n),b.viewport.set(e/2,0,e/2,n),C.start(),i.dispatchEvent({type:"sessionstart"})}else i.enabled&&t.setDrawingBufferSize(S.width,S.height,M),C.stop(),i.dispatchEvent({type:"sessionend"})}var E=[],A=[];function P(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),n=0,i=e.length;n<i;n++){var r=e[n];if(r&&("Daydream Controller"===r.id||"Gear VR Controller"===r.id||"Oculus Go Controller"===r.id||"OpenVR Gamepad"===r.id||r.id.startsWith("Oculus Touch")||r.id.startsWith("HTC Vive Focus")||r.id.startsWith("Spatial Controller"))){var a=r.hand;if(0===t&&(""===a||"right"===a))return r;if(1===t&&"left"===a)return r}}}function R(t,i){null!==i&&4===i.length&&t.set(i[0]*e,i[1]*n,i[2]*e,i[3]*n)}this.enabled=!1,this.getController=function(t){var e=l[t];return void 0===e&&((e=new Ji).matrixAutoUpdate=!1,e.visible=!1,l[t]=e),e},this.getDevice=function(){return r},this.setDevice=function(t){void 0!==t&&(r=t),C.setContext(t)},this.setFramebufferScaleFactor=function(t){d=t},this.setReferenceSpaceType=function(t){f=t},this.setPoseTarget=function(t){void 0!==t&&(o=t)},this.getCamera=function(t){var e="local-floor"===f?1.6:0;if(r.depthNear=t.near,r.depthFar=t.far,r.getFrameData(a),"local-floor"===f){var n=r.stageParameters;n?h.fromArray(n.sittingToStandingTransform):h.makeTranslation(0,e,0)}var i=a.pose,s=null!==o?o:t;s.matrix.copy(h),s.matrix.decompose(s.position,s.quaternion,s.scale),null!==i.orientation&&(v.fromArray(i.orientation),s.quaternion.multiply(v)),null!==i.position&&(v.setFromRotationMatrix(h),g.fromArray(i.position),g.applyQuaternion(v),s.position.add(g)),s.updateMatrixWorld();for(var c=s.children,u=0,d=c.length;u<d;u++)c[u].updateMatrixWorld(!0);x.near=t.near,b.near=t.near,x.far=t.far,b.far=t.far,x.matrixWorldInverse.fromArray(a.leftViewMatrix),b.matrixWorldInverse.fromArray(a.rightViewMatrix),p.getInverse(h),"local-floor"===f&&(x.matrixWorldInverse.multiply(p),b.matrixWorldInverse.multiply(p));var y=s.parent;null!==y&&(m.getInverse(y.matrixWorld),x.matrixWorldInverse.multiply(m),b.matrixWorldInverse.multiply(m)),x.matrixWorld.getInverse(x.matrixWorldInverse),b.matrixWorld.getInverse(b.matrixWorldInverse),x.projectionMatrix.fromArray(a.leftProjectionMatrix),b.projectionMatrix.fromArray(a.rightProjectionMatrix),er(w,x,b);var _=r.getLayers();if(_.length){var M=_[0];R(x.viewport,M.leftBounds),R(b.viewport,M.rightBounds)}return function(){for(var t=0;t<l.length;t++){var e=l[t],n=P(t);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var i=n.pose;!1===i.hasPosition&&e.position.set(.2,-.6,-.05),null!==i.position&&e.position.fromArray(i.position),null!==i.orientation&&e.quaternion.fromArray(i.orientation),e.matrix.compose(e.position,e.quaternion,e.scale),e.matrix.premultiply(h),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0,e.visible=!0;var r="Daydream Controller"===n.id?0:1;void 0===E[t]&&(E[t]=!1),E[t]!==n.buttons[r].pressed&&(E[t]=n.buttons[r].pressed,!0===E[t]?e.dispatchEvent({type:"selectstart"}):(e.dispatchEvent({type:"selectend"}),e.dispatchEvent({type:"select"}))),r=2,void 0===A[t]&&(A[t]=!1),void 0!==n.buttons[r]&&A[t]!==n.buttons[r].pressed&&(A[t]=n.buttons[r].pressed,!0===A[t]?e.dispatchEvent({type:"squeezestart"}):(e.dispatchEvent({type:"squeezeend"}),e.dispatchEvent({type:"squeeze"})))}else e.visible=!1}}(),w},this.getStandingMatrix=function(){return h},this.isPresenting=_;var C=new Qe;this.setAnimationLoop=function(t){C.setAnimationLoop(t),_()&&C.start()},this.submitFrame=function(){_()&&r.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",T)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function ir(t,e){var n=this,i=null,r=null,a="local-floor",o=null,s=null,c=[],l=[];var h=new Ve;h.layers.enable(1),h.viewport=new y;var u=new Ve;u.layers.enable(2),u.viewport=new y;var p=new Qi([h,u]);p.layers.enable(1),p.layers.enable(2);var d=new THREE.Matrix4;function f(t){for(var e=0;e<c.length;e++)l[e]===t.inputSource&&c[e].dispatchEvent({type:t.type})}function m(){t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),_.stop(),n.dispatchEvent({type:"sessionend"})}function v(t){r=t,_.setContext(i),_.start(),n.dispatchEvent({type:"sessionstart"})}function g(){for(var t=0;t<c.length;t++)l[t]=x(t)}function x(t){for(var e=i.inputSources,n=0;n<e.length;n++){var r=e[n],a=r.handedness;if(0===t&&("none"===a||"right"===a))return r;if(1===t&&"left"===a)return r}}function b(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}this.enabled=!1,this.getController=function(t){var e=c[t];return void 0===e&&((e=new Ji).matrixAutoUpdate=!1,e.visible=!1,c[t]=e),e},this.setFramebufferScaleFactor=function(){},this.setReferenceSpaceType=function(t){a=t},this.getSession=function(){return i},this.setSession=function(t){null!==(i=t)&&(i.addEventListener("select",f),i.addEventListener("selectstart",f),i.addEventListener("selectend",f),i.addEventListener("squeeze",f),i.addEventListener("squeezestart",f),i.addEventListener("squeezeend",f),i.addEventListener("end",m),i.updateRenderState({baseLayer:new XRWebGLLayer(i,e)}),i.requestReferenceSpace(a).then(v),i.addEventListener("inputsourceschange",g),g())},this.setPoseTarget=function(t){void 0!==t&&(s=t)},this.getCamera=function(t){var e=t.parent,n=p.cameras,i=s||t;b(p,e);for(var r=0;r<n.length;r++)b(n[r],e);i.matrixWorld.copy(p.matrixWorld),o&&(d.elements=o.transform.matrix,d.decompose(i.position,i.quaternion,i.scale),i.matrixNeedsUpdate=!0);for(var a=i.children,c=(r=0,a.length);r<c;r++)a[r].updateMatrixWorld(!0);return er(p,h,u),p},this.getCameraPose=function(){return o},this.isPresenting=function(){return null!==i&&null!==r};var w=null;var _=new Qe;_.setAnimationLoop((function(e,n){if(null!==(o=n.getViewerPose(r))){var a=o.views,s=i.renderState.baseLayer;t.setFramebuffer(s.framebuffer);for(var h=0;h<a.length;h++){var u=a[h],d=s.getViewport(u),f=u.transform.inverse.matrix,m=p.cameras[h];m.matrix.fromArray(f).getInverse(m.matrix),m.projectionMatrix.fromArray(u.projectionMatrix),m.viewport.set(d.x,d.y,d.width,d.height),0===h&&p.matrix.copy(m.matrix)}}for(h=0;h<c.length;h++){var v=c[h],g=l[h];if(g){var y=n.getPose(g.targetRaySpace,r);if(null!==y){v.matrix.fromArray(y.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.visible=!0;continue}}v.visible=!1}w&&w(e,n)})),this.setAnimationLoop=function(t){w=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new L},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function rr(t){var e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,c=void 0!==t.antialias&&t.antialias,l=void 0===t.premultipliedAlpha||t.premultipliedAlpha,h=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,p=void 0!==t.powerPreference?t.powerPreference:"default",d=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,f=void 0!==t.forceWebVR&&t.forceWebVR,m=null,v=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=1,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var g,x,b,w,_,M,S,T,E,A,P,R,C,O,I,N,D,z,B,U,F,G=this,V=!1,H=null,j=0,k=0,W=null,q=null,X=-1,Y=null,Z=null,J=new y,Q=new y,K=null,$=e.width,tt=e.height,et=1,nt=new y(0,0,$,tt),it=new y(0,0,$,tt),rt=!1,at=new Xe,ot=new on,st=!1,ct=!1,lt=new L,ht=new u;function ut(){return null===W?et:1}try{var pt={alpha:i,depth:r,stencil:a,antialias:c,premultipliedAlpha:l,preserveDrawingBuffer:h,powerPreference:p,failIfMajorPerformanceCaveat:d,xrCompatible:!0};if(e.addEventListener("webglcontextlost",gt,!1),e.addEventListener("webglcontextrestored",yt,!1),null===(g=n||e.getContext("webgl",pt)||e.getContext("experimental-webgl",pt)))throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===g.getShaderPrecisionFormat&&(g.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function dt(){x=new sn(g),!1===(b=new an(g,x,t)).isWebGL2&&(x.get("WEBGL_depth_texture"),x.get("OES_texture_float"),x.get("OES_texture_half_float"),x.get("OES_texture_half_float_linear"),x.get("OES_standard_derivatives"),x.get("OES_element_index_uint"),x.get("OES_vertex_array_object"),x.get("ANGLE_instanced_arrays")),x.get("OES_texture_float_linear"),B=new Xi(g,x,b),(w=new ki(g,x,b)).scissor(Q.copy(it).multiplyScalar(et).floor()),w.viewport(J.copy(nt).multiplyScalar(et).floor()),_=new hn(g),M=new Ri,S=new Wi(g,x,w,M,b,B,_),T=new Ke(g),U=new nn(g,x,T,b),E=new cn(g,T,_,U),A=new fn(g,E,T,_),N=new dn(g),P=new Pi(G,x,b,U),R=new Ni,C=new Gi,O=new qi(g,_,b,w),I=new en(G,w,A,l),D=new rn(g,x,_,b),z=new ln(g,x,_,b),_.programs=P.programs,F=[],G.capabilities=b,G.extensions=x,G.properties=M,G.renderLists=R,G.state=w,G.info=_}dt();var ft=!f&&"undefined"!=typeof navigator&&"xr"in navigator&&navigator.xr?new ir(G,g):new nr(G);this.vr=ft;var mt=new Zi(G,g),vt=new ji(G,A,b.maxTextureSize);function gt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),V=!0}function yt(){console.log("THREE.WebGLRenderer: Context Restored."),V=!1,dt()}function xt(t){var e=t.target;e.removeEventListener("dispose",xt),function(t){bt(t),M.remove(t)}(e)}function bt(t){var e=M.get(t).program;t.program=void 0,void 0!==e&&P.releaseProgram(e)}this.shadowMap=vt,this.getContext=function(){return g},this.getContextAttributes=function(){return g.getContextAttributes()},this.forceContextLoss=function(){var t=x.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=x.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return et},this.setPixelRatio=function(t){void 0!==t&&(et=t,this.setSize($,tt,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new s),t.set($,tt)},this.setSize=function(t,n,i){ft.isPresenting()?console.warn("THREE.WebGLRenderer: Can\'t change size while VR device is presenting."):($=t,tt=n,e.width=Math.floor(t*et),e.height=Math.floor(n*et),!1!==i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new s),t.set($*et,tt*et).floor()},this.setDrawingBufferSize=function(t,n,i){$=t,tt=n,et=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new y),t.copy(J)},this.getViewport=function(t){return t.copy(nt)},this.setViewport=function(t,e,n,i){t.isVector4?nt.set(t.x,t.y,t.z,t.w):nt.set(t,e,n,i),w.viewport(J.copy(nt).multiplyScalar(et).floor())},this.getScissor=function(t){return t.copy(it)},this.setScissor=function(t,e,n,i){t.isVector4?it.set(t.x,t.y,t.z,t.w):it.set(t,e,n,i),w.scissor(Q.copy(it).multiplyScalar(et).floor())},this.getScissorTest=function(){return rt},this.setScissorTest=function(t){w.setScissorTest(rt=t)},this.getClearColor=function(){return I.getClearColor()},this.setClearColor=function(){I.setClearColor.apply(I,arguments)},this.getClearAlpha=function(){return I.getClearAlpha()},this.setClearAlpha=function(){I.setClearAlpha.apply(I,arguments)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),g.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",gt,!1),e.removeEventListener("webglcontextrestored",yt,!1),R.dispose(),C.dispose(),M.dispose(),A.dispose(),U.dispose(),O.dispose(),ft.dispose(),_t.stop()},this.renderBufferImmediate=function(t,e){U.initAttributes();var n=M.get(t);t.hasPositions&&!n.position&&(n.position=g.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=g.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=g.createBuffer()),t.hasColors&&!n.color&&(n.color=g.createBuffer());var i=e.getAttributes();t.hasPositions&&(g.bindBuffer(34962,n.position),g.bufferData(34962,t.positionArray,35048),U.enableAttribute(i.position),g.vertexAttribPointer(i.position,3,5126,!1,0,0)),t.hasNormals&&(g.bindBuffer(34962,n.normal),g.bufferData(34962,t.normalArray,35048),U.enableAttribute(i.normal),g.vertexAttribPointer(i.normal,3,5126,!1,0,0)),t.hasUvs&&(g.bindBuffer(34962,n.uv),g.bufferData(34962,t.uvArray,35048),U.enableAttribute(i.uv),g.vertexAttribPointer(i.uv,2,5126,!1,0,0)),t.hasColors&&(g.bindBuffer(34962,n.color),g.bufferData(34962,t.colorArray,35048),U.enableAttribute(i.color),g.vertexAttribPointer(i.color,3,5126,!1,0,0)),U.disableUnusedAttributes(),g.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,i,r,a){var o=r.isMesh&&r.matrixWorld.determinant()<0;w.setMaterial(i,o);var s=Et(t,e,i,r),c=n.index,l=n.attributes.position;if((null===c||0!==c.count)&&void 0!==l&&0!==l.count){var h,u=1;!0===i.wireframe&&(c=E.getWireframeAttribute(n),u=2),r.morphTargetInfluences&&N.update(r,n,i,s),U.setup(r,i,s,n,c);var p=D;null!==c&&(h=T.get(c),(p=z).setIndex(h));var d=1/0;null!==c?d=c.count:void 0!==l&&(d=l.count);var f=n.drawRange.start*u,m=n.drawRange.count*u,v=null!==a?a.start*u:0,g=null!==a?a.count*u:1/0,y=Math.max(f,v),x=Math.min(d,f+m,v+g)-1,b=Math.max(0,x-y+1);if(0!==b){if(r.isMesh)if(!0===i.wireframe)w.setLineWidth(i.wireframeLinewidth*ut()),p.setMode(1);else switch(r.drawMode){case 0:p.setMode(4);break;case 1:p.setMode(5);break;case 2:p.setMode(6)}else if(r.isLine){var _=i.linewidth;void 0===_&&(_=1),w.setLineWidth(_*ut()),r.isLineSegments?p.setMode(1):r.isLineLoop?p.setMode(2):p.setMode(3)}else r.isPoints?p.setMode(0):r.isSprite&&p.setMode(4);r.isInstancedMesh?p.renderInstances(n,y,b,r.count):n.isInstancedBufferGeometry?p.renderInstances(n,y,b,n.maxInstancedCount):p.render(y,b)}}},this.compileAndUploadMaterials=function(t,e){(v=C.get(t,e)).init(),t.traverse((function(t){t.isLight&&v.pushLight(t),t.castShadow&&v.pushShadow(t)})),v.setupLights(e),t.traverse((function(n){if(n.material)if(Array.isArray(n.material))for(var i=0;i<n.material.length;i++)w.setMaterial(n.material[i]),Et(e,t.fog,n.material[i],n);else w.setMaterial(n.material),Et(e,t.fog,n.material,n)})),v=null},this.compile=function(t,e){(v=C.get(t,e)).init(),t.traverse((function(t){t.isLight&&(v.pushLight(t),t.castShadow&&v.pushShadow(t))})),v.setupLights(e),t.traverse((function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)Tt(e.material[n],t.fog,e);else Tt(e.material,t.fog,e)}))};var wt=null;var _t=new Qe;function Mt(t,e,n,i){for(var r=0,a=t.length;r<a;r++){var o=t[r],s=o.object,c=o.geometry,l=void 0===i?o.material:i,h=o.group;if(n.isArrayCamera)if(Z=n,ft.enabled&&mt.isAvailable())St(s,e,n,c,l,h);else for(var u=n.cameras,p=0,d=u.length;p<d;p++){var f=u[p];s.layers.test(f.layers)&&(w.viewport(J.copy(f.viewport)),v.setupLights(f),St(s,e,f,c,l,h))}else Z=null,St(s,e,n,c,l,h)}}function St(t,e,n,i,r,a){if(t.onBeforeRender(G,e,n,i,r,a),v=C.get(e,Z||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){w.setMaterial(r);var o=Et(n,e.fog,r,t);U.reset(),function(t,e){t.render((function(t){G.renderBufferImmediate(t,e)}))}(t,o)}else G.renderBufferDirect(n,e.fog,i,r,t,a);t.onAfterRender(G,e,n,i,r,a),v=C.get(e,Z||n)}function Tt(t,e,n){var i=M.get(t),r=v.state.lights,a=v.state.shadowsArray,o=r.state.version,s=P.getParameters(t,r.state,a,e,ot.numPlanes,ot.numIntersection,n),c=P.getProgramCacheKey(t,s),l=i.program,h=!0;if(void 0===l)t.addEventListener("dispose",xt);else if(l.cacheKey!==c)bt(t);else if(i.lightsStateVersion!==o)i.lightsStateVersion=o,h=!1;else{if(void 0!==s.shaderID)return;h=!1}if(h){if(s.shaderID){var u=Je[s.shaderID];i.shader={name:t.type,uniforms:Be(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else i.shader={name:t.type,uniforms:t.uniforms,uniformsGroups:t.uniformsGroups,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(i.shader,G),c=P.getProgramCacheKey(t,s),l=P.acquireProgram(t,i.shader,s,c),i.program=l,t.program=l}var p=l.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var d=0;d<G.maxMorphTargets;d++)p["morphTarget"+d]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(d=0;d<G.maxMorphNormals;d++)p["morphNormal"+d]>=0&&t.numSupportedMorphNormals++}var f=i.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=ot.numPlanes,i.numIntersection=ot.numIntersection,f.clippingPlanes=ot.uniform),i.fog=e,i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=o,i.needsLights&&(f.ambientLightColor.value=r.state.ambient,f.lightProbe.value=r.state.probe,f.directionalLights.value=r.state.directional,f.spotLights.value=r.state.spot,f.rectAreaLights.value=r.state.rectArea,f.pointLights.value=r.state.point,f.hemisphereLights.value=r.state.hemi,f.directionalShadowMap.value=r.state.directionalShadowMap,f.directionalShadowMatrix.value=r.state.directionalShadowMatrix,f.spotShadowMap.value=r.state.spotShadowMap,f.spotShadowMatrix.value=r.state.spotShadowMatrix,f.pointShadowMap.value=r.state.pointShadowMap,f.pointShadowMatrix.value=r.state.pointShadowMatrix);var m=i.program.getUniforms(),g=ui.seqWithValue(m.seq,f);i.uniformsList=g}function Et(t,e,n,i){S.resetTextureUnits();var r=M.get(n),a=v.state.lights;if(st&&(ct||t!==Y)){var s=t===Y&&n.id===X;ot.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,r,s)}n.version===r.__version&&(void 0===r.program||n.fog&&r.fog!==e||r.needsLights&&r.lightsStateVersion!==a.state.version?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===ot.numPlanes&&r.numIntersection===ot.numIntersection||(n.needsUpdate=!0)),n.version!==r.__version&&(Tt(n,e,i),r.__version=n.version);var c,l,h=!1,u=!1,p=!1,d=r.program,f=d.getUniforms(),m=r.shader.uniforms;if(w.useProgram(d.program)&&(h=!0,u=!0,p=!0),n.id!==X&&(X=n.id,u=!0),h||Y!==t){if(d.numMultiviewViews>0?mt.updateCameraProjectionMatricesUniform(t,f):f.setValue(g,"projectionMatrix",t.projectionMatrix),b.logarithmicDepthBuffer&&f.setValue(g,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),Y!==t&&(Y=t,u=!0,p=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var y=f.map.cameraPosition;void 0!==y&&y.setValue(g,ht.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&f.setValue(g,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&(d.numMultiviewViews>0?mt.updateCameraViewMatricesUniform(t,f):f.setValue(g,"viewMatrix",t.matrixWorldInverse))}if(n.skinning){f.setOptional(g,i,"bindMatrix"),f.setOptional(g,i,"bindMatrixInverse");var x=i.skeleton;if(x){var _=x.bones;if(b.floatVertexTextures){if(void 0===x.boneTexture){var T=Math.sqrt(4*_.length);T=o.ceilPowerOfTwo(T),T=Math.max(T,4);var E=new Float32Array(T*T*4);E.set(x.boneMatrices);var A=new ke(E,T,T,1023,1015);x.boneMatrices=E,x.boneTexture=A,x.boneTextureSize=T}f.setValue(g,"boneTexture",x.boneTexture,S),f.setValue(g,"boneTextureSize",x.boneTextureSize)}else f.setOptional(g,x,"boneMatrices")}}if((u||r.receiveShadow!==i.receiveShadow)&&(r.receiveShadow=i.receiveShadow,f.setValue(g,"receiveShadow",i.receiveShadow)),u&&(f.setValue(g,"toneMappingExposure",G.toneMappingExposure),f.setValue(g,"toneMappingWhitePoint",G.toneMappingWhitePoint),r.needsLights&&(l=p,(c=m).ambientLightColor.needsUpdate=l,c.lightProbe.needsUpdate=l,c.directionalLights.needsUpdate=l,c.pointLights.needsUpdate=l,c.spotLights.needsUpdate=l,c.rectAreaLights.needsUpdate=l,c.hemisphereLights.needsUpdate=l),e&&n.fog&&function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}(m,e),n.isMeshBasicMaterial?At(m,n):n.isMeshLambertMaterial?(At(m,n),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(m,n)):n.isMeshPhongMaterial?(At(m,n),n.isMeshToonMaterial?function(t,e){Lt(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(m,n):Lt(m,n)):n.isMeshStandardMaterial?(At(m,n),n.isMeshPhysicalMaterial?function(t,e){Pt(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen);e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate());t.transparency.value=e.transparency}(m,n):Pt(m,n)):n.isMeshMatcapMaterial?(At(m,n),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(m,n)):n.isMeshDepthMaterial?(At(m,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(m,n)):n.isMeshDistanceMaterial?(At(m,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(m,n)):n.isMeshNormalMaterial?(At(m,n),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(m,n)):n.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(m,n),n.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(m,n)):n.isPointsMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*et,t.scale.value=.5*tt,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);var n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(m,n):n.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);var n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(m,n):n.isShadowMaterial&&(m.color.value.copy(n.color),m.opacity.value=n.opacity),void 0!==m.ltc_1&&(m.ltc_1.value=Ze.LTC_1),void 0!==m.ltc_2&&(m.ltc_2.value=Ze.LTC_2),ui.upload(g,r.uniformsList,m,S),n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(ui.upload(g,r.uniformsList,m,S),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&f.setValue(g,"center",i.center),d.numMultiviewViews>0?mt.updateObjectMatricesUniforms(i,t,f):(f.setValue(g,"modelViewMatrix",i.modelViewMatrix),f.setValue(g,"normalMatrix",i.normalMatrix)),f.setValue(g,"modelMatrix",i.matrixWorld),n.isShaderMaterial||n.isRawShaderMaterial)for(var L=r.shader.uniformsGroups,P=r.program.program,R=0,C=L.length;R<C;R++)if(b.isWebGL2){var I=L[R];O.update(I,P),O.bind(I,P)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return d}function At(t,e){var n;t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=M.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function Lt(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Pt(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}_t.setAnimationLoop((function(t){ft.isPresenting()||wt&&wt(t)})),this.animation=_t,"undefined"!=typeof window&&_t.setContext(window),this.setAnimationLoop=function(t){wt=t,ft.setAnimationLoop(t),_t.start()},this.render=function(e,n,i,r){if(n&&n.isCamera){if(!V){U.resetDefaultState(),X=-1,Y=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===n.parent&&n.updateMatrixWorld(),ft.enabled&&ft.isPresenting()&&(n=ft.getCamera(n)),(v=C.get(e,n)).init(),e.onBeforeRender(G,e,n,i||W),lt.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),at.setFromMatrix(lt),ct=this.localClippingEnabled,st=ot.init(this.clippingPlanes,ct,n),(m=R.get(e,n)).init(),F.length=0,function e(n,i,r,a){if(!1===n.visible)return;if(n.layers.test(i.layers))if(n.isGroup)r=n.renderOrder;else if(n.isLOD)!0===n.autoUpdate&&n.update(i);else if(n.isLight)v.pushLight(n),n.castShadow&&v.pushShadow(n);else if(n.isSprite){if(!n.frustumCulled||at.intersectsSprite(n)){a&&ht.setFromMatrixPosition(n.matrixWorld).applyMatrix4(lt);var o=A.update(n);(s=n.material).visible&&m.push(n,o,s,r,ht.z,null)}}else if(n.isImmediateRenderObject)a&&ht.setFromMatrixPosition(n.matrixWorld).applyMatrix4(lt),m.push(n,null,n.material,r,ht.z,null);else if((n.isMesh||n.isLine||n.isPoints)&&(n.isSkinnedMesh&&n.skeleton.frame!==_.render.frame&&(n.skeleton.update(),n.skeleton.frame=_.render.frame),!n.frustumCulled||at.intersectsObject(n))){a&&ht.setFromMatrixPosition(n.matrixWorld).applyMatrix4(lt);o=A.update(n);var s=n.material;if(Array.isArray(s))for(var c=o.groups,l=0,h=c.length;l<h;l++){var u=c[l],p=s[u.materialIndex];p&&p.visible&&m.push(n,o,p,r,ht.z,u)}else s.visible&&(t.preuploadVideos&&s.map&&s.map.isVideoTexture&&F.push(s.map),m.push(n,o,s,r,ht.z,null))}var d=n.children;for(l=0,h=d.length;l<h;l++)e(d[l],i,r,a)}(e,n,0,G.sortObjects),!0===G.sortObjects&&m.sort(),st&&ot.beginShadows();var a=v.state.shadowsArray;if(vt.render(a,e,n),v.setupLights(n),st&&ot.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==i&&this.setRenderTarget(i),t.preuploadVideos)for(var o=0,s=F.length;o<s;o++)S.setTexture2D(F[o],0);ft.enabled&&mt.isAvailable()&&mt.attachCamera(n),I.render(m,e,n,r);var c=m.opaque,l=m.transparent;if(e.overrideMaterial){var h=e.overrideMaterial;c.length&&Mt(c,e,n,h),l.length&&Mt(l,e,n,h)}else c.length&&Mt(c,e,n),l.length&&Mt(l,e,n);e.onAfterRender(G,e,n),null!==W&&(S.updateRenderTargetMipmap(W),S.updateMultisampleRenderTarget(W)),w.buffers.depth.setTest(!0),w.buffers.depth.setMask(!0),w.buffers.color.setMask(!0),w.setPolygonOffset(!1),ft.enabled&&(mt.isAvailable()&&mt.detachCamera(n),ft.submitFrame()),m=null,v=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){H!==t&&null===W&&g.bindFramebuffer(36160,t),H=t},this.getActiveCubeFace=function(){return j},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return W},this.setRenderTarget=function(t,e,n){W=t,j=e,k=n,t&&void 0===M.get(t).__webglFramebuffer&&S.setupRenderTarget(t);var i=H,r=!1;if(t){var a=M.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(i=a[e||0],r=!0):i=t.isWebGLMultisampleRenderTarget?M.get(t).__webglMultisampledFramebuffer:a,J.copy(t.viewport),Q.copy(t.scissor),K=t.scissorTest}else J.copy(nt).multiplyScalar(et).floor(),Q.copy(it).multiplyScalar(et).floor(),K=rt;if(q!==i&&(g.bindFramebuffer(36160,i),q=i),w.viewport(J),w.scissor(Q),w.setScissorTest(K),r){var o=M.get(t.texture);g.framebufferTexture2D(36160,36064,34069+(e||0),o.__webglTexture,n||0)}},this.readRenderTargetPixels=function(t,e,n,i,r,a,o){if(t&&t.isWebGLRenderTarget){var s=M.get(t).__webglFramebuffer;if(t.isWebGLRenderTargetCube&&void 0!==o&&(s=s[o]),s){var c=!1;s!==q&&(g.bindFramebuffer(36160,s),c=!0);try{var l=t.texture,h=l.format,u=l.type;if(1023!==h&&B.convert(h)!==g.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(1009===u||B.convert(u)===g.getParameter(35738)||1015===u&&(b.isWebGL2||x.get("OES_texture_float")||x.get("WEBGL_color_buffer_float"))||1016===u&&(b.isWebGL2?x.get("EXT_color_buffer_float"):x.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===g.checkFramebufferStatus(36160)?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&g.readPixels(e,n,i,r,B.convert(h),B.convert(u),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{c&&g.bindFramebuffer(36160,q)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){void 0===n&&(n=0);var i=Math.pow(2,-n),r=Math.floor(e.image.width*i),a=Math.floor(e.image.height*i),o=B.convert(e.format);S.setTexture2D(e,0),g.copyTexImage2D(3553,n,o,t.x,t.y,r,a,0),w.unbindTexture()},this.copyTextureToTexture=function(t,e,n,i){var r=e.image.width,a=e.image.height,o=B.convert(n.format),s=B.convert(n.type);S.setTexture2D(n,0),e.isDataTexture?g.texSubImage2D(3553,i||0,t.x,t.y,r,a,o,s,e.image.data):g.texSubImage2D(3553,i||0,t.x,t.y,o,s,e.image),w.unbindTexture()},this.initTexture=function(t){S.setTexture2D(t,0),w.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function ar(t,e){this.name="",this.color=new Bt(t),this.density=void 0!==e?e:25e-5}function or(t,e,n){this.name="",this.color=new Bt(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function sr(t,e){this._array=t,this._stride=e,this.count=void 0!==t?t.length/e:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.versionVAO=0}function cr(t,e,n,i){this._data=t,this._itemSize=e,this._offset=n,this._normalized=!0===i,this.versionVAO=0}function lr(t){jt.call(this),this.type="SpriteMaterial",this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}Object.assign(nr.prototype,i.prototype),Object.assign(ir.prototype,i.prototype),Object.assign(ar.prototype,{isFogExp2:!0,clone:function(){return new ar(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(or.prototype,{isFog:!0,clone:function(){return new or(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperties(sr.prototype,{needsUpdate:{set:function(t){!0===t&&this.version++}},array:{get:function(){return this._array},set:function(t){this._array=t,this.versionVAO++}},stride:{get:function(){return this._stride},set:function(t){this._stride=t,this.versionVAO++}}}),Object.assign(sr.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(cr.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},data:{get:function(){return this._data},set:function(t){this._data=t,this.versionVAO++}},itemSize:{get:function(){return this._itemSize},set:function(t){this._itemSize=t,this.versionVAO++}},offset:{get:function(){return this._offset},set:function(t){this._offset=t,this.versionVAO++}},normalized:{get:function(){return this._normalized},set:function(t){this._normalized=t,this.versionVAO++}}}),Object.assign(cr.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}}),lr.prototype=Object.create(jt.prototype),lr.prototype.constructor=lr,lr.prototype.isSpriteMaterial=!0,lr.prototype.copy=function(t){return jt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var hr=new u,ur=new u,pr=new u,dr=new s,fr=new s,mr=new L,vr=new u,gr=new u,yr=new u,xr=new s,br=new s,wr=new s;function _r(t){if(q.call(this),this.type="Sprite",void 0===Ki){Ki=new he;var e=new sr(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Ki.setIndex([0,1,2,0,2,3]),Ki.setAttribute("position",new cr(e,3,0,!1)),Ki.setAttribute("uv",new cr(e,2,3,!1))}this.geometry=Ki,this.material=void 0!==t?t:new lr,this.center=new s(.5,.5)}function Mr(t,e,n,i,r,a){dr.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(fr.x=a*dr.x-r*dr.y,fr.y=r*dr.x+a*dr.y):fr.copy(dr),t.copy(e),t.x+=fr.x,t.y+=fr.y,t.applyMatrix4(mr)}_r.prototype=Object.assign(Object.create(q.prototype),{constructor:_r,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error(\'THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.\'),ur.setFromMatrixScale(this.matrixWorld),mr.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),pr.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ur.multiplyScalar(-pr.z);var n,i,r=this.material.rotation;0!==r&&(i=Math.cos(r),n=Math.sin(r));var a=this.center;Mr(vr.set(-.5,-.5,0),pr,a,ur,n,i),Mr(gr.set(.5,-.5,0),pr,a,ur,n,i),Mr(yr.set(.5,.5,0),pr,a,ur,n,i),xr.set(0,0),br.set(1,0),wr.set(1,1);var o=t.ray.intersectTriangle(vr,gr,yr,!1,hr);if(null!==o||(Mr(gr.set(-.5,.5,0),pr,a,ur,n,i),br.set(0,1),null!==(o=t.ray.intersectTriangle(vr,yr,gr,!1,hr)))){var c=t.ray.origin.distanceTo(hr);c<t.near||c>t.far||e.push({distance:c,point:hr.clone(),uv:It.getUV(hr,vr,gr,yr,xr,br,wr,new s),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return q.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}});var Sr=new u,Tr=new u;function Er(){q.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Ar(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Le.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new L,this.bindMatrixInverse=new L}Er.prototype=Object.assign(Object.create(q.prototype),{constructor:Er,isLOD:!0,copy:function(t){q.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var r=e[n];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,i=0;i<n.length&&!(e<n[i].distance);i++);return n.splice(i,0,{distance:e,object:t}),this.add(t),this},getObjectForDistance:function(t){var e=this.levels;if(e.length>0){for(var n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){if(this.levels.length>0){Sr.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(Sr);this.getObjectForDistance(n).raycast(t,e)}},update:function(t){var e=this.levels;if(e.length>1){Sr.setFromMatrixPosition(t.matrixWorld),Tr.setFromMatrixPosition(this.matrixWorld);var n=Sr.distanceTo(Tr);e[0].object.visible=!0;for(var i=1,r=e.length;i<r&&n>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(;i<r;i++)e[i].object.visible=!1}},toJSON:function(t){var e=q.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var a=n[i];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e}}),Ar.prototype=Object.assign(Object.create(Le.prototype),{constructor:Ar,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new y,e=this.geometry.attributes.skinWeight,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Le.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Lr=new L,Pr=new L;function Rr(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new L)}}function Cr(){q.call(this),this.type="Bone"}Object.assign(Rr.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new L;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=t.length;r<a;r++){var o=t[r]?t[r].matrixWorld:Pr;Lr.multiplyMatrices(o,e[r]),Lr.toArray(n,16*r)}void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new Rr(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}}}),Cr.prototype=Object.assign(Object.create(q.prototype),{constructor:Cr,isBone:!0});var Or=new L,Ir=new L,Nr=[],Dr=new Le;function zr(t,e,n){Le.call(this,t,e),this.instanceMatrix=new Wt(new Float32Array(16*n),16),this.count=n}function Br(t){jt.call(this),this.type="LineBasicMaterial",this.color=new Bt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}zr.prototype=Object.assign(Object.create(Le.prototype),{constructor:zr,isInstancedMesh:!0,getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){var n=this.matrixWorld,i=this.count;if(Dr.geometry=this.geometry,Dr.material=this.material,void 0!==Dr.material)for(var r=0;r<i;r++)this.getMatrixAt(r,Or),Ir.multiplyMatrices(n,Or),Dr.matrixWorld=Ir,Dr.raycast(t,Nr),Nr.length>0&&(Nr[0].instanceId=r,Nr[0].object=this,e.push(Nr[0]),Nr.length=0)},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),Br.prototype=Object.create(jt.prototype),Br.prototype.constructor=Br,Br.prototype.isLineBasicMaterial=!0,Br.prototype.copy=function(t){return jt.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this};var Ur=new u,Fr=new u,Gr=new L,Vr=new yt,Hr=new ht;function jr(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),q.call(this),this.type="Line",this.geometry=void 0!==t?t:new he,this.material=void 0!==e?e:new Br({color:16777215*Math.random()})}jr.prototype=Object.assign(Object.create(q.prototype),{constructor:jr,isLine:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],i=1,r=e.count;i<r;i++)Ur.fromBufferAttribute(e,i-1),Fr.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=Ur.distanceTo(Fr);t.setAttribute("lineDistance",new $t(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var a=t.vertices;(n=t.lineDistances)[0]=0;for(i=1,r=a.length;i<r;i++)n[i]=n[i-1],n[i]+=a[i-1].distanceTo(a[i])}return this},raycast:function(t,e){var n=t.linePrecision,i=this.geometry,r=this.matrixWorld;if(null===i.boundingSphere&&i.computeBoundingSphere(),Hr.copy(i.boundingSphere),Hr.applyMatrix4(r),Hr.radius+=n,!1!==t.ray.intersectsSphere(Hr)){Gr.getInverse(r),Vr.copy(t.ray).applyMatrix4(Gr);var a=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,s=new u,c=new u,l=new u,h=new u,p=this&&this.isLineSegments?2:1;if(i.isBufferGeometry){var d=i.index,f=i.attributes.position.array;if(null!==d)for(var m=d.array,v=0,g=m.length-1;v<g;v+=p){var y=m[v],x=m[v+1];if(s.fromArray(f,3*y),c.fromArray(f,3*x),!(Vr.distanceSqToSegment(s,c,h,l)>o))h.applyMatrix4(this.matrixWorld),(_=t.ray.origin.distanceTo(h))<t.near||_>t.far||e.push({distance:_,point:l.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}else for(v=0,g=f.length/3-1;v<g;v+=p){if(s.fromArray(f,3*v),c.fromArray(f,3*v+3),!(Vr.distanceSqToSegment(s,c,h,l)>o))h.applyMatrix4(this.matrixWorld),(_=t.ray.origin.distanceTo(h))<t.near||_>t.far||e.push({distance:_,point:l.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else if(i.isGeometry){var b=i.vertices,w=b.length;for(v=0;v<w-1;v+=p){var _;if(!(Vr.distanceSqToSegment(b[v],b[v+1],h,l)>o))h.applyMatrix4(this.matrixWorld),(_=t.ray.origin.distanceTo(h))<t.near||_>t.far||e.push({distance:_,point:l.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var kr=new u,Wr=new u;function qr(t,e){jr.call(this,t,e),this.type="LineSegments"}function Xr(t,e){jr.call(this,t,e),this.type="LineLoop"}function Yr(t){jt.call(this),this.type="PointsMaterial",this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}qr.prototype=Object.assign(Object.create(jr.prototype),{constructor:qr,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],i=0,r=e.count;i<r;i+=2)kr.fromBufferAttribute(e,i),Wr.fromBufferAttribute(e,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+kr.distanceTo(Wr);t.setAttribute("lineDistance",new $t(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var a=t.vertices;for(n=t.lineDistances,i=0,r=a.length;i<r;i+=2)kr.copy(a[i]),Wr.copy(a[i+1]),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+kr.distanceTo(Wr)}return this}}),Xr.prototype=Object.assign(Object.create(jr.prototype),{constructor:Xr,isLineLoop:!0}),Yr.prototype=Object.create(jt.prototype),Yr.prototype.constructor=Yr,Yr.prototype.isPointsMaterial=!0,Yr.prototype.copy=function(t){return jt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var Zr=new L,Jr=new yt,Qr=new ht,Kr=new u;function $r(t,e){q.call(this),this.type="Points",this.geometry=void 0!==t?t:new he,this.material=void 0!==e?e:new Yr({color:16777215*Math.random()}),this.updateMorphTargets()}function ta(t,e,n,i,r,a,o){var s=Jr.distanceSqToPoint(t);if(s<n){var c=new u;Jr.closestPointToPoint(t,c),c.applyMatrix4(i);var l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:c,index:e,face:null,object:o})}}function ea(t,e,n,i,r,a,o,s,c){g.call(this,t,e,n,i,r,a,o,s,c),this.format=void 0!==o?o:1022,this.minFilter=void 0!==a?a:1006,this.magFilter=void 0!==r?r:1006,this.generateMipmaps=!1}function na(t,e,n,i,r,a,o,s,c,l,h,u){g.call(this,null,a,o,s,c,l,i,r,h,u),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function ia(t,e,n,i,r,a,o,s,c){g.call(this,t,e,n,i,r,a,o,s,c),this.needsUpdate=!0}function ra(t,e,n,i,r,a,o,s,c,l){if(1026!==(l=void 0!==l?l:1026)&&1027!==l)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===l&&(n=1012),void 0===n&&1027===l&&(n=1020),g.call(this,null,i,r,a,o,s,l,n,c),this.image={width:t,height:e},this.magFilter=void 0!==o?o:1003,this.minFilter=void 0!==s?s:1003,this.flipY=!1,this.generateMipmaps=!1}function aa(t){he.call(this),this.type="WireframeGeometry";var e,n,i,r,a,o,s,c,l,h,p=[],d=[0,0],f={},m=["a","b","c"];if(t&&t.isGeometry){var v=t.faces;for(e=0,i=v.length;e<i;e++){var g=v[e];for(n=0;n<3;n++)s=g[m[n]],c=g[m[(n+1)%3]],d[0]=Math.min(s,c),d[1]=Math.max(s,c),void 0===f[l=d[0]+","+d[1]]&&(f[l]={index1:d[0],index2:d[1]})}for(l in f)o=f[l],h=t.vertices[o.index1],p.push(h.x,h.y,h.z),h=t.vertices[o.index2],p.push(h.x,h.y,h.z)}else if(t&&t.isBufferGeometry){var y,x,b,w,_,M,S;if(h=new u,null!==t.index){for(y=t.attributes.position,x=t.index,0===(b=t.groups).length&&(b=[{start:0,count:x.count,materialIndex:0}]),r=0,a=b.length;r<a;++r)for(e=_=(w=b[r]).start,i=_+w.count;e<i;e+=3)for(n=0;n<3;n++)s=x.getX(e+n),c=x.getX(e+(n+1)%3),d[0]=Math.min(s,c),d[1]=Math.max(s,c),void 0===f[l=d[0]+","+d[1]]&&(f[l]={index1:d[0],index2:d[1]});for(l in f)o=f[l],h.fromBufferAttribute(y,o.index1),p.push(h.x,h.y,h.z),h.fromBufferAttribute(y,o.index2),p.push(h.x,h.y,h.z)}else for(e=0,i=(y=t.attributes.position).count/3;e<i;e++)for(n=0;n<3;n++)M=3*e+n,h.fromBufferAttribute(y,M),p.push(h.x,h.y,h.z),S=3*e+(n+1)%3,h.fromBufferAttribute(y,S),p.push(h.x,h.y,h.z)}this.setAttribute("position",new $t(p,3))}function oa(t,e,n){De.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new sa(t,e,n)),this.mergeVertices()}function sa(t,e,n){he.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i,r,a=[],o=[],s=[],c=[],l=1e-5,h=new u,p=new u,d=new u,f=new u,m=new u;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var v=e+1;for(i=0;i<=n;i++){var g=i/n;for(r=0;r<=e;r++){var y=r/e;t(y,g,p),o.push(p.x,p.y,p.z),y-l>=0?(t(y-l,g,d),f.subVectors(p,d)):(t(y+l,g,d),f.subVectors(d,p)),g-l>=0?(t(y,g-l,d),m.subVectors(p,d)):(t(y,g+l,d),m.subVectors(d,p)),h.crossVectors(f,m).normalize(),s.push(h.x,h.y,h.z),c.push(y,g)}}for(i=0;i<n;i++)for(r=0;r<e;r++){var x=i*v+r,b=i*v+r+1,w=(i+1)*v+r+1,_=(i+1)*v+r;a.push(x,b,_),a.push(b,w,_)}this.setIndex(a),this.setAttribute("position",new $t(o,3)),this.setAttribute("normal",new $t(s,3)),this.setAttribute("uv",new $t(c,2))}function ca(t,e,n,i){De.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new la(t,e,n,i)),this.mergeVertices()}function la(t,e,n,i){he.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},n=n||1;var r=[],a=[];function o(t,e,n,i){var r,a,o=Math.pow(2,i),s=[];for(r=0;r<=o;r++){s[r]=[];var l=t.clone().lerp(n,r/o),h=e.clone().lerp(n,r/o),u=o-r;for(a=0;a<=u;a++)s[r][a]=0===a&&r===o?l:l.clone().lerp(h,a/u)}for(r=0;r<o;r++)for(a=0;a<2*(o-r)-1;a++){var p=Math.floor(a/2);a%2==0?(c(s[r][p+1]),c(s[r+1][p]),c(s[r][p])):(c(s[r][p+1]),c(s[r+1][p+1]),c(s[r+1][p]))}}function c(t){r.push(t.x,t.y,t.z)}function l(e,n){var i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function h(t,e,n,i){i<0&&1===t.x&&(a[e]=t.x-1),0===n.x&&0===n.z&&(a[e]=i/2/Math.PI+.5)}function p(t){return Math.atan2(t.z,-t.x)}!function(t){for(var n=new u,i=new u,r=new u,a=0;a<e.length;a+=3)l(e[a+0],n),l(e[a+1],i),l(e[a+2],r),o(n,i,r,t)}(i=i||0),function(t){for(var e=new u,n=0;n<r.length;n+=3)e.x=r[n+0],e.y=r[n+1],e.z=r[n+2],e.normalize().multiplyScalar(t),r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z}(n),function(){for(var t=new u,e=0;e<r.length;e+=3){t.x=r[e+0],t.y=r[e+1],t.z=r[e+2];var n=p(t)/2/Math.PI+.5,i=(o=t,Math.atan2(-o.y,Math.sqrt(o.x*o.x+o.z*o.z))/Math.PI+.5);a.push(n,1-i)}var o;(function(){for(var t=new u,e=new u,n=new u,i=new u,o=new s,c=new s,l=new s,d=0,f=0;d<r.length;d+=9,f+=6){t.set(r[d+0],r[d+1],r[d+2]),e.set(r[d+3],r[d+4],r[d+5]),n.set(r[d+6],r[d+7],r[d+8]),o.set(a[f+0],a[f+1]),c.set(a[f+2],a[f+3]),l.set(a[f+4],a[f+5]),i.copy(t).add(e).add(n).divideScalar(3);var m=p(i);h(o,f+0,t,m),h(c,f+2,e,m),h(l,f+4,n,m)}})(),function(){for(var t=0;t<a.length;t+=6){var e=a[t+0],n=a[t+2],i=a[t+4],r=Math.max(e,n,i),o=Math.min(e,n,i);r>.9&&o<.1&&(e<.2&&(a[t+0]+=1),n<.2&&(a[t+2]+=1),i<.2&&(a[t+4]+=1))}}()}(),this.setAttribute("position",new $t(r,3)),this.setAttribute("normal",new $t(r.slice(),3)),this.setAttribute("uv",new $t(a,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function ha(t,e){De.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new ua(t,e)),this.mergeVertices()}function ua(t,e){la.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function pa(t,e){De.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new da(t,e)),this.mergeVertices()}function da(t,e){la.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function fa(t,e){De.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new ma(t,e)),this.mergeVertices()}function ma(t,e){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];la.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function va(t,e){De.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new ga(t,e)),this.mergeVertices()}function ga(t,e){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i];la.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ya(t,e,n,i,r,a){De.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new xa(t,e,n,i,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function xa(t,e,n,i,r){he.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},e=e||64,n=n||1,i=i||8,r=r||!1;var a=t.computeFrenetFrames(e,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o,c,l=new u,h=new u,p=new s,d=new u,f=[],m=[],v=[],g=[];function y(r){d=t.getPointAt(r/e,d);var o=a.normals[r],s=a.binormals[r];for(c=0;c<=i;c++){var u=c/i*Math.PI*2,p=Math.sin(u),v=-Math.cos(u);h.x=v*o.x+p*s.x,h.y=v*o.y+p*s.y,h.z=v*o.z+p*s.z,h.normalize(),m.push(h.x,h.y,h.z),l.x=d.x+n*h.x,l.y=d.y+n*h.y,l.z=d.z+n*h.z,f.push(l.x,l.y,l.z)}}!function(){for(o=0;o<e;o++)y(o);y(!1===r?e:0),function(){for(o=0;o<=e;o++)for(c=0;c<=i;c++)p.x=o/e,p.y=c/i,v.push(p.x,p.y)}(),function(){for(c=1;c<=e;c++)for(o=1;o<=i;o++){var t=(i+1)*(c-1)+(o-1),n=(i+1)*c+(o-1),r=(i+1)*c+o,a=(i+1)*(c-1)+o;g.push(t,n,a),g.push(n,r,a)}}()}(),this.setIndex(g),this.setAttribute("position",new $t(f,3)),this.setAttribute("normal",new $t(m,3)),this.setAttribute("uv",new $t(v,2))}function ba(t,e,n,i,r,a,o){De.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new wa(t,e,n,i,r,a)),this.mergeVertices()}function wa(t,e,n,i,r,a){he.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},t=t||1,e=e||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,a=a||3;var o,s,c=[],l=[],h=[],p=[],d=new u,f=new u,m=new u,v=new u,g=new u,y=new u,x=new u;for(o=0;o<=n;++o){var b=o/n*r*Math.PI*2;for(L(b,r,a,t,m),L(b+.01,r,a,t,v),y.subVectors(v,m),x.addVectors(v,m),g.crossVectors(y,x),x.crossVectors(g,y),g.normalize(),x.normalize(),s=0;s<=i;++s){var w=s/i*Math.PI*2,_=-e*Math.cos(w),M=e*Math.sin(w);d.x=m.x+(_*x.x+M*g.x),d.y=m.y+(_*x.y+M*g.y),d.z=m.z+(_*x.z+M*g.z),l.push(d.x,d.y,d.z),f.subVectors(d,m).normalize(),h.push(f.x,f.y,f.z),p.push(o/n),p.push(s/i)}}for(s=1;s<=n;s++)for(o=1;o<=i;o++){var S=(i+1)*(s-1)+(o-1),T=(i+1)*s+(o-1),E=(i+1)*s+o,A=(i+1)*(s-1)+o;c.push(S,T,A),c.push(T,E,A)}function L(t,e,n,i,r){var a=Math.cos(t),o=Math.sin(t),s=n/e*t,c=Math.cos(s);r.x=i*(2+c)*.5*a,r.y=i*(2+c)*o*.5,r.z=i*Math.sin(s)*.5}this.setIndex(c),this.setAttribute("position",new $t(l,3)),this.setAttribute("normal",new $t(h,3)),this.setAttribute("uv",new $t(p,2))}function _a(t,e,n,i,r){De.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Ma(t,e,n,i,r)),this.mergeVertices()}function Ma(t,e,n,i,r){he.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||1,e=e||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var a,o,s=[],c=[],l=[],h=[],p=new u,d=new u,f=new u;for(a=0;a<=n;a++)for(o=0;o<=i;o++){var m=o/i*r,v=a/n*Math.PI*2;d.x=(t+e*Math.cos(v))*Math.cos(m),d.y=(t+e*Math.cos(v))*Math.sin(m),d.z=e*Math.sin(v),c.push(d.x,d.y,d.z),p.x=t*Math.cos(m),p.y=t*Math.sin(m),f.subVectors(d,p).normalize(),l.push(f.x,f.y,f.z),h.push(o/i),h.push(a/n)}for(a=1;a<=n;a++)for(o=1;o<=i;o++){var g=(i+1)*a+o-1,y=(i+1)*(a-1)+o-1,x=(i+1)*(a-1)+o,b=(i+1)*a+o;s.push(g,y,b),s.push(y,x,b)}this.setIndex(s),this.setAttribute("position",new $t(c,3)),this.setAttribute("normal",new $t(l,3)),this.setAttribute("uv",new $t(h,2))}$r.prototype=Object.assign(Object.create(q.prototype),{constructor:$r,isPoints:!0,raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Qr.copy(n.boundingSphere),Qr.applyMatrix4(i),Qr.radius+=r,!1!==t.ray.intersectsSphere(Qr)){Zr.getInverse(i),Jr.copy(t.ray).applyMatrix4(Zr);var a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(n.isBufferGeometry){var s=n.index,c=n.attributes.position.array;if(null!==s)for(var l=s.array,h=0,u=l.length;h<u;h++){var p=l[h];Kr.fromArray(c,3*p),ta(Kr,p,o,i,t,e,this)}else{h=0;for(var d=c.length/3;h<d;h++)Kr.fromArray(c,3*h),ta(Kr,h,o,i,t,e,this)}}else{var f=n.vertices;for(h=0,d=f.length;h<d;h++)ta(f[h],h,o,i,t,e,this)}}},updateMorphTargets:function(){var t,e,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,a=Object.keys(r);if(a.length>0){var o=r[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=o.length;t<e;t++)n=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=i.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ea.prototype=Object.assign(Object.create(g.prototype),{constructor:ea,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),na.prototype=Object.create(g.prototype),na.prototype.constructor=na,na.prototype.isCompressedTexture=!0,ia.prototype=Object.create(g.prototype),ia.prototype.constructor=ia,ia.prototype.isCanvasTexture=!0,ra.prototype=Object.create(g.prototype),ra.prototype.constructor=ra,ra.prototype.isDepthTexture=!0,aa.prototype=Object.create(he.prototype),aa.prototype.constructor=aa,oa.prototype=Object.create(De.prototype),oa.prototype.constructor=oa,sa.prototype=Object.create(he.prototype),sa.prototype.constructor=sa,ca.prototype=Object.create(De.prototype),ca.prototype.constructor=ca,la.prototype=Object.create(he.prototype),la.prototype.constructor=la,ha.prototype=Object.create(De.prototype),ha.prototype.constructor=ha,ua.prototype=Object.create(la.prototype),ua.prototype.constructor=ua,pa.prototype=Object.create(De.prototype),pa.prototype.constructor=pa,da.prototype=Object.create(la.prototype),da.prototype.constructor=da,fa.prototype=Object.create(De.prototype),fa.prototype.constructor=fa,ma.prototype=Object.create(la.prototype),ma.prototype.constructor=ma,va.prototype=Object.create(De.prototype),va.prototype.constructor=va,ga.prototype=Object.create(la.prototype),ga.prototype.constructor=ga,ya.prototype=Object.create(De.prototype),ya.prototype.constructor=ya,xa.prototype=Object.create(he.prototype),xa.prototype.constructor=xa,xa.prototype.toJSON=function(){var t=he.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},ba.prototype=Object.create(De.prototype),ba.prototype.constructor=ba,wa.prototype=Object.create(he.prototype),wa.prototype.constructor=wa,_a.prototype=Object.create(De.prototype),_a.prototype.constructor=_a,Ma.prototype=Object.create(he.prototype),Ma.prototype.constructor=Ma;var Sa=function(t,e,n){n=n||2;var i,r,a,o,s,c,l,h=e&&e.length,u=h?e[0]*n:t.length,p=Ta(t,0,u,n,!0),d=[];if(!p||p.next===p.prev)return d;if(h&&(p=function(t,e,n,i){var r,a,o,s,c,l=[];for(r=0,a=e.length;r<a;r++)o=e[r]*i,s=r<a-1?e[r+1]*i:t.length,(c=Ta(t,o,s,i,!1))===c.next&&(c.steiner=!0),l.push(Da(c));for(l.sort(Oa),r=0;r<l.length;r++)Ia(l[r],n),n=Ea(n,n.next);return n}(t,e,p,n)),t.length>80*n){i=a=t[0],r=o=t[1];for(var f=n;f<u;f+=n)(s=t[f])<i&&(i=s),(c=t[f+1])<r&&(r=c),s>a&&(a=s),c>o&&(o=c);l=0!==(l=Math.max(a-i,o-r))?1/l:0}return Aa(p,d,n,i,r,l),d};function Ta(t,e,n,i,r){var a,o;if(r===function(t,e,n,i){for(var r=0,a=e,o=n-i;a<n;a+=i)r+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return r}(t,e,n,i)>0)for(a=e;a<n;a+=i)o=ja(a,t[a],t[a+1],o);else for(a=n-i;a>=e;a-=i)o=ja(a,t[a],t[a+1],o);return o&&Fa(o,o.next)&&(ka(o),o=o.next),o}function Ea(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!Fa(i,i.next)&&0!==Ua(i.prev,i,i.next))i=i.next;else{if(ka(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function Aa(t,e,n,i,r,a,o){if(t){!o&&a&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=Na(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,a,o,s,c,l=1;do{for(n=t,t=null,a=null,o=0;n;){for(o++,i=n,s=0,e=0;e<l&&(s++,i=i.nextZ);e++);for(c=l;s>0||c>0&&i;)0!==s&&(0===c||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,c--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;n=i}a.nextZ=null,l*=2}while(o>1)}(r)}(t,i,r,a);for(var s,c,l=t;t.prev!==t.next;)if(s=t.prev,c=t.next,a?Pa(t,i,r,a):La(t))e.push(s.i/n),e.push(t.i/n),e.push(c.i/n),ka(t),t=c.next,l=c.next;else if((t=c)===l){o?1===o?Aa(t=Ra(t,e,n),e,n,i,r,a,2):2===o&&Ca(t,e,n,i,r,a):Aa(Ea(t),e,n,i,r,a,1);break}}}function La(t){var e=t.prev,n=t,i=t.next;if(Ua(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(za(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Ua(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Pa(t,e,n,i){var r=t.prev,a=t,o=t.next;if(Ua(r,a,o)>=0)return!1;for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,c=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,l=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,h=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,u=Na(s,c,e,n,i),p=Na(l,h,e,n,i),d=t.prevZ,f=t.nextZ;d&&d.z>=u&&f&&f.z<=p;){if(d!==t.prev&&d!==t.next&&za(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Ua(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,f!==t.prev&&f!==t.next&&za(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Ua(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;d&&d.z>=u;){if(d!==t.prev&&d!==t.next&&za(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Ua(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&za(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Ua(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Ra(t,e,n){var i=t;do{var r=i.prev,a=i.next.next;!Fa(r,a)&&Ga(r,i,i.next,a)&&Va(r,a)&&Va(a,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(a.i/n),ka(i),ka(i.next),i=t=a),i=i.next}while(i!==t);return i}function Ca(t,e,n,i,r,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Ba(o,s)){var c=Ha(o,s);return o=Ea(o,o.next),c=Ea(c,c.next),Aa(o,e,n,i,r,a),void Aa(c,e,n,i,r,a)}s=s.next}o=o.next}while(o!==t)}function Oa(t,e){return t.x-e.x}function Ia(t,e){if(e=function(t,e){var n,i=e,r=t.x,a=t.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>o){if(o=s,s===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===o)return n.prev;var c,l=n,h=n.x,u=n.y,p=1/0;i=n.next;for(;i!==l;)r>=i.x&&i.x>=h&&r!==i.x&&za(a<u?r:o,a,h,u,a<u?o:r,a,i.x,i.y)&&((c=Math.abs(a-i.y)/(r-i.x))<p||c===p&&i.x>n.x)&&Va(i,t)&&(n=i,p=c),i=i.next;return n}(t,e)){var n=Ha(e,t);Ea(n,n.next)}}function Na(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Da(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function za(t,e,n,i,r,a,o,s){return(r-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(i-s)-(n-o)*(e-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function Ba(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Ga(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Va(t,e)&&Va(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)}function Ua(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Fa(t,e){return t.x===e.x&&t.y===e.y}function Ga(t,e,n,i){return!!(Fa(t,n)&&Fa(e,i)||Fa(t,i)&&Fa(n,e))||Ua(t,e,n)>0!=Ua(t,e,i)>0&&Ua(n,i,t)>0!=Ua(n,i,e)>0}function Va(t,e){return Ua(t.prev,t,t.next)<0?Ua(t,e,t.next)>=0&&Ua(t,t.prev,e)>=0:Ua(t,e,t.prev)<0||Ua(t,t.next,e)<0}function Ha(t,e){var n=new Wa(t.i,t.x,t.y),i=new Wa(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function ja(t,e,n,i){var r=new Wa(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ka(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Wa(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var qa={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},isClockWise:function(t){return qa.area(t)<0},triangulateShape:function(t,e){var n=[],i=[],r=[];Xa(t),Ya(n,t);var a=t.length;e.forEach(Xa);for(var o=0;o<e.length;o++)i.push(a),a+=e[o].length,Ya(n,e[o]);var s=Sa(n,i);for(o=0;o<s.length;o+=3)r.push(s.slice(o,o+3));return r}};function Xa(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Ya(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function Za(t,e){De.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Ja(t,e)),this.mergeVertices()}function Ja(t,e){he.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var n=this,i=[],r=[],a=0,o=t.length;a<o;a++){c(t[a])}function c(t){var a=[],o=void 0!==e.curveSegments?e.curveSegments:12,c=void 0!==e.steps?e.steps:1,l=void 0!==e.depth?e.depth:100,h=void 0===e.bevelEnabled||e.bevelEnabled,p=void 0!==e.bevelThickness?e.bevelThickness:6,d=void 0!==e.bevelSize?e.bevelSize:p-2,f=void 0!==e.bevelOffset?e.bevelOffset:0,m=void 0!==e.bevelSegments?e.bevelSegments:3,v=e.extrudePath,g=void 0!==e.UVGenerator?e.UVGenerator:Qa;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);var y,x,b,w,_,M,S,T,E=!1;v&&(y=v.getSpacedPoints(c),E=!0,h=!1,x=v.computeFrenetFrames(c,!1),b=new u,w=new u,_=new u),h||(m=0,p=0,d=0,f=0);var A=t.extractPoints(o),L=A.shape,P=A.holes;if(!qa.isClockWise(L))for(L=L.reverse(),S=0,T=P.length;S<T;S++)M=P[S],qa.isClockWise(M)&&(P[S]=M.reverse());var R=qa.triangulateShape(L,P),C=L;for(S=0,T=P.length;S<T;S++)M=P[S],L=L.concat(M);function O(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var I,N,D,z,B,U,F=L.length,G=R.length;function V(t,e,n){var i,r,a,o=t.x-e.x,c=t.y-e.y,l=n.x-t.x,h=n.y-t.y,u=o*o+c*c,p=o*h-c*l;if(Math.abs(p)>Number.EPSILON){var d=Math.sqrt(u),f=Math.sqrt(l*l+h*h),m=e.x-c/d,v=e.y+o/d,g=((n.x-h/f-m)*h-(n.y+l/f-v)*l)/(o*h-c*l),y=(i=m+o*g-t.x)*i+(r=v+c*g-t.y)*r;if(y<=2)return new s(i,r);a=Math.sqrt(y/2)}else{var x=!1;o>Number.EPSILON?l>Number.EPSILON&&(x=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(x=!0):Math.sign(c)===Math.sign(h)&&(x=!0),x?(i=-c,r=o,a=Math.sqrt(u)):(i=o,r=c,a=Math.sqrt(u/2))}return new s(i/a,r/a)}for(var H=[],j=0,k=C.length,W=k-1,q=j+1;j<k;j++,W++,q++)W===k&&(W=0),q===k&&(q=0),H[j]=V(C[j],C[W],C[q]);var X,Y,Z=[],J=H.concat();for(S=0,T=P.length;S<T;S++){for(M=P[S],X=[],j=0,W=(k=M.length)-1,q=j+1;j<k;j++,W++,q++)W===k&&(W=0),q===k&&(q=0),X[j]=V(M[j],M[W],M[q]);Z.push(X),J=J.concat(X)}for(I=0;I<m;I++){for(D=I/m,z=p*Math.cos(D*Math.PI/2),N=d*Math.sin(D*Math.PI/2)+f,j=0,k=C.length;j<k;j++)K((B=O(C[j],H[j],N)).x,B.y,-z);for(S=0,T=P.length;S<T;S++)for(M=P[S],X=Z[S],j=0,k=M.length;j<k;j++)K((B=O(M[j],X[j],N)).x,B.y,-z)}for(N=d+f,j=0;j<F;j++)B=h?O(L[j],J[j],N):L[j],E?(w.copy(x.normals[0]).multiplyScalar(B.x),b.copy(x.binormals[0]).multiplyScalar(B.y),_.copy(y[0]).add(w).add(b),K(_.x,_.y,_.z)):K(B.x,B.y,0);for(Y=1;Y<=c;Y++)for(j=0;j<F;j++)B=h?O(L[j],J[j],N):L[j],E?(w.copy(x.normals[Y]).multiplyScalar(B.x),b.copy(x.binormals[Y]).multiplyScalar(B.y),_.copy(y[Y]).add(w).add(b),K(_.x,_.y,_.z)):K(B.x,B.y,l/c*Y);for(I=m-1;I>=0;I--){for(D=I/m,z=p*Math.cos(D*Math.PI/2),N=d*Math.sin(D*Math.PI/2)+f,j=0,k=C.length;j<k;j++)K((B=O(C[j],H[j],N)).x,B.y,l+z);for(S=0,T=P.length;S<T;S++)for(M=P[S],X=Z[S],j=0,k=M.length;j<k;j++)B=O(M[j],X[j],N),E?K(B.x,B.y+y[c-1].y,y[c-1].x+z):K(B.x,B.y,l+z)}function Q(t,e){var n,i;for(j=t.length;--j>=0;){n=j,(i=j-1)<0&&(i=t.length-1);var r=0,a=c+2*m;for(r=0;r<a;r++){var o=F*r,s=F*(r+1);tt(e+n+o,e+i+o,e+i+s,e+n+s)}}}function K(t,e,n){a.push(t),a.push(e),a.push(n)}function $(t,e,r){et(t),et(e),et(r);var a=i.length/3,o=g.generateTopUV(n,i,a-3,a-2,a-1);nt(o[0]),nt(o[1]),nt(o[2])}function tt(t,e,r,a){et(t),et(e),et(a),et(e),et(r),et(a);var o=i.length/3,s=g.generateSideWallUV(n,i,o-6,o-3,o-2,o-1);nt(s[0]),nt(s[1]),nt(s[3]),nt(s[1]),nt(s[2]),nt(s[3])}function et(t){i.push(a[3*t+0]),i.push(a[3*t+1]),i.push(a[3*t+2])}function nt(t){r.push(t.x),r.push(t.y)}!function(){var t=i.length/3;if(h){var e=0,r=F*e;for(j=0;j<G;j++)$((U=R[j])[2]+r,U[1]+r,U[0]+r);for(r=F*(e=c+2*m),j=0;j<G;j++)$((U=R[j])[0]+r,U[1]+r,U[2]+r)}else{for(j=0;j<G;j++)$((U=R[j])[2],U[1],U[0]);for(j=0;j<G;j++)$((U=R[j])[0]+F*c,U[1]+F*c,U[2]+F*c)}n.addGroup(t,i.length/3-t,0)}(),function(){var t=i.length/3,e=0;for(Q(C,e),e+=C.length,S=0,T=P.length;S<T;S++)Q(M=P[S],e),e+=M.length;n.addGroup(t,i.length/3-t,1)}()}this.setAttribute("position",new $t(i,3)),this.setAttribute("uv",new $t(r,2)),this.computeVertexNormals()}Za.prototype=Object.create(De.prototype),Za.prototype.constructor=Za,Za.prototype.toJSON=function(){var t=De.prototype.toJSON.call(this);return Ka(this.parameters.shapes,this.parameters.options,t)},Ja.prototype=Object.create(he.prototype),Ja.prototype.constructor=Ja,Ja.prototype.toJSON=function(){var t=he.prototype.toJSON.call(this);return Ka(this.parameters.shapes,this.parameters.options,t)};var Qa={generateTopUV:function(t,e,n,i,r){var a=e[3*n],o=e[3*n+1],c=e[3*i],l=e[3*i+1],h=e[3*r],u=e[3*r+1];return[new s(a,o),new s(c,l),new s(h,u)]},generateSideWallUV:function(t,e,n,i,r,a){var o=e[3*n],c=e[3*n+1],l=e[3*n+2],h=e[3*i],u=e[3*i+1],p=e[3*i+2],d=e[3*r],f=e[3*r+1],m=e[3*r+2],v=e[3*a],g=e[3*a+1],y=e[3*a+2];return Math.abs(c-u)<.01?[new s(o,1-l),new s(h,1-p),new s(d,1-m),new s(v,1-y)]:[new s(c,1-l),new s(u,1-p),new s(f,1-m),new s(g,1-y)]}};function Ka(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var a=t[i];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function $a(t,e){De.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new to(t,e)),this.mergeVertices()}function to(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new De;var i=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Ja.call(this,i,e),this.type="TextBufferGeometry"}function eo(t,e,n,i,r,a,o){De.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new no(t,e,n,i,r,a,o)),this.mergeVertices()}function no(t,e,n,i,r,a,o){he.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;var s,c,l=Math.min(a+o,Math.PI),h=0,p=[],d=new u,f=new u,m=[],v=[],g=[],y=[];for(c=0;c<=n;c++){var x=[],b=c/n,w=0;for(0==c&&0==a?w=.5/e:c==n&&l==Math.PI&&(w=-.5/e),s=0;s<=e;s++){var _=s/e;d.x=-t*Math.cos(i+_*r)*Math.sin(a+b*o),d.y=t*Math.cos(a+b*o),d.z=t*Math.sin(i+_*r)*Math.sin(a+b*o),v.push(d.x,d.y,d.z),f.copy(d).normalize(),g.push(f.x,f.y,f.z),y.push(_+w,1-b),x.push(h++)}p.push(x)}for(c=0;c<n;c++)for(s=0;s<e;s++){var M=p[c][s+1],S=p[c][s],T=p[c+1][s],E=p[c+1][s+1];(0!==c||a>0)&&m.push(M,S,E),(c!==n-1||l<Math.PI)&&m.push(S,T,E)}this.setIndex(m),this.setAttribute("position",new $t(v,3)),this.setAttribute("normal",new $t(g,3)),this.setAttribute("uv",new $t(y,2))}function io(t,e,n,i,r,a){De.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new ro(t,e,n,i,r,a)),this.mergeVertices()}function ro(t,e,n,i,r,a){he.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},t=t||.5,e=e||1,r=void 0!==r?r:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var o,c,l,h=[],p=[],d=[],f=[],m=t,v=(e-t)/(i=void 0!==i?Math.max(1,i):1),g=new u,y=new s;for(c=0;c<=i;c++){for(l=0;l<=n;l++)o=r+l/n*a,g.x=m*Math.cos(o),g.y=m*Math.sin(o),p.push(g.x,g.y,g.z),d.push(0,0,1),y.x=(g.x/e+1)/2,y.y=(g.y/e+1)/2,f.push(y.x,y.y);m+=v}for(c=0;c<i;c++){var x=c*(n+1);for(l=0;l<n;l++){var b=o=l+x,w=o+n+1,_=o+n+2,M=o+1;h.push(b,w,M),h.push(w,_,M)}}this.setIndex(h),this.setAttribute("position",new $t(p,3)),this.setAttribute("normal",new $t(d,3)),this.setAttribute("uv",new $t(f,2))}function ao(t,e,n,i){De.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new oo(t,e,n,i)),this.mergeVertices()}function oo(t,e,n,i){he.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e)||12,n=n||0,i=i||2*Math.PI,i=o.clamp(i,0,2*Math.PI);var r,a,c,l=[],h=[],p=[],d=1/e,f=new u,m=new s;for(a=0;a<=e;a++){var v=n+a*d*i,g=Math.sin(v),y=Math.cos(v);for(c=0;c<=t.length-1;c++)f.x=t[c].x*g,f.y=t[c].y,f.z=t[c].x*y,h.push(f.x,f.y,f.z),m.x=a/e,m.y=c/(t.length-1),p.push(m.x,m.y)}for(a=0;a<e;a++)for(c=0;c<t.length-1;c++){var x=r=c+a*t.length,b=r+t.length,w=r+t.length+1,_=r+1;l.push(x,b,_),l.push(b,w,_)}if(this.setIndex(l),this.setAttribute("position",new $t(h,3)),this.setAttribute("uv",new $t(p,2)),this.computeVertexNormals(),i===2*Math.PI){var M=this.attributes.normal.array,S=new u,T=new u,E=new u;for(r=e*t.length*3,a=0,c=0;a<t.length;a++,c+=3)S.x=M[c+0],S.y=M[c+1],S.z=M[c+2],T.x=M[r+c+0],T.y=M[r+c+1],T.z=M[r+c+2],E.addVectors(S,T).normalize(),M[c+0]=M[r+c+0]=E.x,M[c+1]=M[r+c+1]=E.y,M[c+2]=M[r+c+2]=E.z}}function so(t,e){De.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new co(t,e)),this.mergeVertices()}function co(t,e){he.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],i=[],r=[],a=[],o=0,s=0;if(!1===Array.isArray(t))l(t);else for(var c=0;c<t.length;c++)l(t[c]),this.addGroup(o,s,c),o+=s,s=0;function l(t){var o,c,l,h=i.length/3,u=t.extractPoints(e),p=u.shape,d=u.holes;for(!1===qa.isClockWise(p)&&(p=p.reverse()),o=0,c=d.length;o<c;o++)l=d[o],!0===qa.isClockWise(l)&&(d[o]=l.reverse());var f=qa.triangulateShape(p,d);for(o=0,c=d.length;o<c;o++)l=d[o],p=p.concat(l);for(o=0,c=p.length;o<c;o++){var m=p[o];i.push(m.x,m.y,0),r.push(0,0,1),a.push(m.x,m.y)}for(o=0,c=f.length;o<c;o++){var v=f[o],g=v[0]+h,y=v[1]+h,x=v[2]+h;n.push(g,y,x),s+=3}}this.setIndex(n),this.setAttribute("position",new $t(i,3)),this.setAttribute("normal",new $t(r,3)),this.setAttribute("uv",new $t(a,2))}function lo(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}function ho(t,e){he.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,i,r,a,s=[],c=Math.cos(o.DEG2RAD*e),l=[0,0],h={},u=["a","b","c"];t.isBufferGeometry?(a=new De).fromBufferGeometry(t):a=t.clone(),a.mergeVertices(),a.computeFaceNormals();for(var p=a.vertices,d=a.faces,f=0,m=d.length;f<m;f++)for(var v=d[f],g=0;g<3;g++)n=v[u[g]],i=v[u[(g+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),void 0===h[r=l[0]+","+l[1]]?h[r]={index1:l[0],index2:l[1],face1:f,face2:void 0}:h[r].face2=f;for(r in h){var y=h[r];if(void 0===y.face2||d[y.face1].normal.dot(d[y.face2].normal)<=c){var x=p[y.index1];s.push(x.x,x.y,x.z),x=p[y.index2],s.push(x.x,x.y,x.z)}}this.setAttribute("position",new $t(s,3))}function uo(t,e,n,i,r,a,o,s){De.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new po(t,e,n,i,r,a,o,s)),this.mergeVertices()}function po(t,e,n,i,r,a,o,c){he.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:c};var l=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,a=void 0!==a&&a,o=void 0!==o?o:0,c=void 0!==c?c:2*Math.PI;var h=[],p=[],d=[],f=[],m=0,v=[],g=n/2,y=0;function x(n){var r,a,v,x=new s,b=new u,w=0,_=!0===n?t:e,M=!0===n?1:-1;for(a=m,r=1;r<=i;r++)p.push(0,g*M,0),d.push(0,M,0),f.push(.5,.5),m++;for(v=m,r=0;r<=i;r++){var S=r/i*c+o,T=Math.cos(S),E=Math.sin(S);b.x=_*E,b.y=g*M,b.z=_*T,p.push(b.x,b.y,b.z),d.push(0,M,0),x.x=.5*T+.5,x.y=.5*E*M+.5,f.push(x.x,x.y),m++}for(r=0;r<i;r++){var A=a+r,L=v+r;!0===n?h.push(L,L+1,A):h.push(L+1,L,A),w+=3}l.addGroup(y,w,!0===n?1:2),y+=w}!function(){var a,s,x=new u,b=new u,w=0,_=(e-t)/n;for(s=0;s<=r;s++){var M=[],S=s/r,T=S*(e-t)+t;for(a=0;a<=i;a++){var E=a/i,A=E*c+o,L=Math.sin(A),P=Math.cos(A);b.x=T*L,b.y=-S*n+g,b.z=T*P,p.push(b.x,b.y,b.z),x.set(L,_,P).normalize(),d.push(x.x,x.y,x.z),f.push(E,1-S),M.push(m++)}v.push(M)}for(a=0;a<i;a++)for(s=0;s<r;s++){var R=v[s][a],C=v[s+1][a],O=v[s+1][a+1],I=v[s][a+1];h.push(R,C,I),h.push(C,O,I),w+=6}l.addGroup(y,w,0),y+=w}(),!1===a&&(t>0&&x(!0),e>0&&x(!1)),this.setIndex(h),this.setAttribute("position",new $t(p,3)),this.setAttribute("normal",new $t(d,3)),this.setAttribute("uv",new $t(f,2))}function fo(t,e,n,i,r,a,o){uo.call(this,0,t,e,n,i,r,a,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function mo(t,e,n,i,r,a,o){po.call(this,0,t,e,n,i,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function vo(t,e,n,i){De.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new go(t,e,n,i)),this.mergeVertices()}function go(t,e,n,i){he.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,a,o=[],c=[],l=[],h=[],p=new u,d=new s;for(c.push(0,0,0),l.push(0,0,1),h.push(.5,.5),a=0,r=3;a<=e;a++,r+=3){var f=n+a/e*i;p.x=t*Math.cos(f),p.y=t*Math.sin(f),c.push(p.x,p.y,p.z),l.push(0,0,1),d.x=(c[r]/t+1)/2,d.y=(c[r+1]/t+1)/2,h.push(d.x,d.y)}for(r=1;r<=e;r++)o.push(r,r+1,0);this.setIndex(o),this.setAttribute("position",new $t(c,3)),this.setAttribute("normal",new $t(l,3)),this.setAttribute("uv",new $t(h,2))}$a.prototype=Object.create(De.prototype),$a.prototype.constructor=$a,to.prototype=Object.create(Ja.prototype),to.prototype.constructor=to,eo.prototype=Object.create(De.prototype),eo.prototype.constructor=eo,no.prototype=Object.create(he.prototype),no.prototype.constructor=no,io.prototype=Object.create(De.prototype),io.prototype.constructor=io,ro.prototype=Object.create(he.prototype),ro.prototype.constructor=ro,ao.prototype=Object.create(De.prototype),ao.prototype.constructor=ao,oo.prototype=Object.create(he.prototype),oo.prototype.constructor=oo,so.prototype=Object.create(De.prototype),so.prototype.constructor=so,so.prototype.toJSON=function(){var t=De.prototype.toJSON.call(this);return lo(this.parameters.shapes,t)},co.prototype=Object.create(he.prototype),co.prototype.constructor=co,co.prototype.toJSON=function(){var t=he.prototype.toJSON.call(this);return lo(this.parameters.shapes,t)},ho.prototype=Object.create(he.prototype),ho.prototype.constructor=ho,uo.prototype=Object.create(De.prototype),uo.prototype.constructor=uo,po.prototype=Object.create(he.prototype),po.prototype.constructor=po,fo.prototype=Object.create(uo.prototype),fo.prototype.constructor=fo,mo.prototype=Object.create(po.prototype),mo.prototype.constructor=mo,vo.prototype=Object.create(De.prototype),vo.prototype.constructor=vo,go.prototype=Object.create(he.prototype),go.prototype.constructor=go;var yo=Object.freeze({__proto__:null,WireframeGeometry:aa,ParametricGeometry:oa,ParametricBufferGeometry:sa,TetrahedronGeometry:ha,TetrahedronBufferGeometry:ua,OctahedronGeometry:pa,OctahedronBufferGeometry:da,IcosahedronGeometry:fa,IcosahedronBufferGeometry:ma,DodecahedronGeometry:va,DodecahedronBufferGeometry:ga,PolyhedronGeometry:ca,PolyhedronBufferGeometry:la,TubeGeometry:ya,TubeBufferGeometry:xa,TorusKnotGeometry:ba,TorusKnotBufferGeometry:wa,TorusGeometry:_a,TorusBufferGeometry:Ma,TextGeometry:$a,TextBufferGeometry:to,SphereGeometry:eo,SphereBufferGeometry:no,RingGeometry:io,RingBufferGeometry:ro,PlaneGeometry:$e,PlaneBufferGeometry:tn,LatheGeometry:ao,LatheBufferGeometry:oo,ShapeGeometry:so,ShapeBufferGeometry:co,ExtrudeGeometry:Za,ExtrudeBufferGeometry:Ja,EdgesGeometry:ho,ConeGeometry:fo,ConeBufferGeometry:mo,CylinderGeometry:uo,CylinderBufferGeometry:po,CircleGeometry:vo,CircleBufferGeometry:go,BoxGeometry:class extends De{constructor(t,e,n,i,r,a){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new ze(t,e,n,i,r,a)),this.mergeVertices()}},BoxBufferGeometry:ze});function xo(t){jt.call(this),this.type="ShadowMaterial",this.color=new Bt(0),this.transparent=!0,this.setValues(t)}function bo(t){Fe.call(this,t),this.type="RawShaderMaterial"}function wo(t){jt.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Bt(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new s(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function _o(t){wo.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new s(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(t)}function Mo(t){jt.call(this),this.type="MeshPhongMaterial",this.color=new Bt(16777215),this.specular=new Bt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new s(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function So(t){Mo.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function To(t){jt.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new s(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Eo(t){jt.call(this),this.type="MeshLambertMaterial",this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ao(t){jt.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Bt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new s(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Lo(t){Br.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}xo.prototype=Object.create(jt.prototype),xo.prototype.constructor=xo,xo.prototype.isShadowMaterial=!0,xo.prototype.copy=function(t){return jt.prototype.copy.call(this,t),this.color.copy(t.color),this},bo.prototype=Object.create(Fe.prototype),bo.prototype.constructor=bo,bo.prototype.isRawShaderMaterial=!0,wo.prototype=Object.create(jt.prototype),wo.prototype.constructor=wo,wo.prototype.isMeshStandardMaterial=!0,wo.prototype.copy=function(t){return jt.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},_o.prototype=Object.create(wo.prototype),_o.prototype.constructor=_o,_o.prototype.isMeshPhysicalMaterial=!0,_o.prototype.copy=function(t){return wo.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearcoat=t.clearcoat,this.clearcoatRoughness=t.clearcoatRoughness,t.sheen?this.sheen=(this.sheen||new Bt).copy(t.sheen):this.sheen=null,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.transparency=t.transparency,this},Mo.prototype=Object.create(jt.prototype),Mo.prototype.constructor=Mo,Mo.prototype.isMeshPhongMaterial=!0,Mo.prototype.copy=function(t){return jt.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},So.prototype=Object.create(Mo.prototype),So.prototype.constructor=So,So.prototype.isMeshToonMaterial=!0,So.prototype.copy=function(t){return Mo.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},To.prototype=Object.create(jt.prototype),To.prototype.constructor=To,To.prototype.isMeshNormalMaterial=!0,To.prototype.copy=function(t){return jt.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Eo.prototype=Object.create(jt.prototype),Eo.prototype.constructor=Eo,Eo.prototype.isMeshLambertMaterial=!0,Eo.prototype.copy=function(t){return jt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ao.prototype=Object.create(jt.prototype),Ao.prototype.constructor=Ao,Ao.prototype.isMeshMatcapMaterial=!0,Ao.prototype.copy=function(t){return jt.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Lo.prototype=Object.create(Br.prototype),Lo.prototype.constructor=Lo,Lo.prototype.isLineDashedMaterial=!0,Lo.prototype.copy=function(t){return Br.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Po=Object.freeze({__proto__:null,ShadowMaterial:xo,SpriteMaterial:lr,RawShaderMaterial:bo,ShaderMaterial:Fe,PointsMaterial:Yr,MeshPhysicalMaterial:_o,MeshStandardMaterial:wo,MeshPhongMaterial:Mo,MeshToonMaterial:So,MeshNormalMaterial:To,MeshLambertMaterial:Eo,MeshDepthMaterial:Vi,MeshDistanceMaterial:Hi,MeshBasicMaterial:kt,MeshMatcapMaterial:Ao,LineDashedMaterial:Lo,LineBasicMaterial:Br,Material:jt}),Ro={arraySlice:function(t,e,n){return Ro.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),i=0;i!==e;++i)n[i]=i;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*e,c=0;c!==e;++c)r[o++]=t[s+c];return r},flattenJSON:function(t,e,n,i){for(var r=1,a=t[0];void 0!==a&&void 0===a[i];)a=t[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[i])&&(e.push(a.time),n.push.apply(n,o)),a=t[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[i])&&(e.push(a.time),o.toArray(n,n.length)),a=t[r++]}while(void 0!==a);else do{void 0!==(o=a[i])&&(e.push(a.time),n.push(o)),a=t[r++]}while(void 0!==a)}},subclip:function(t,e,n,i,r){r=r||30;var a=t.clone();a.name=e;for(var o=[],s=0;s<a.tracks.length;++s){for(var c=a.tracks[s],l=c.getValueSize(),h=[],u=[],p=0;p<c.times.length;++p){var d=c.times[p]*r;if(!(d<n||d>=i)){h.push(c.times[p]);for(var f=0;f<l;++f)u.push(c.values[p*l+f])}}0!==h.length&&(c.times=Ro.convertArray(h,c.times.constructor),c.values=Ro.convertArray(u,c.values.constructor),o.push(c))}a.tracks=o;var m=1/0;for(s=0;s<a.tracks.length;++s)m>a.tracks[s].times[0]&&(m=a.tracks[s].times[0]);for(s=0;s<a.tracks.length;++s)a.tracks[s].shift(-1*m);return a.resetDuration(),a}};function Co(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Oo(t,e,n,i){Co.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Io(t,e,n,i){Co.call(this,t,e,n,i)}function No(t,e,n,i){Co.call(this,t,e,n,i)}function Do(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Ro.convertArray(e,this.TimeBufferType),this.values=Ro.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function zo(t,e,n){Do.call(this,t,e,n)}function Bo(t,e,n,i){Do.call(this,t,e,n,i)}function Uo(t,e,n,i){Do.call(this,t,e,n,i)}function Fo(t,e,n,i){Co.call(this,t,e,n,i)}function Go(t,e,n,i){Do.call(this,t,e,n,i)}function Vo(t,e,n,i){Do.call(this,t,e,n,i)}function Ho(t,e,n,i){Do.call(this,t,e,n,i)}function jo(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=o.generateUUID(),this.duration<0&&this.resetDuration()}function ko(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Uo;case"vector":case"vector2":case"vector3":case"vector4":return Ho;case"color":return Bo;case"quaternion":return Go;case"bool":case"boolean":return zo;case"string":return Vo}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],i=[];Ro.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(Co.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var a;n:{i:if(!(t<i)){for(var o=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===o)break;if(r=i,t<(i=e[++n]))break e}a=e.length;break n}if(t>=r)break t;var s=e[1];t<s&&(n=2,r=s);for(o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===o)break;if(i=r,t>=(r=e[--n-1]))break e}a=n,n=0}for(;n<a;){var c=n+a>>>1;t<e[c]?a=c:n=c+1}if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,a=0;a!==i;++a)e[a]=n[r+a];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Co.prototype,{beforeStart_:Co.prototype.copySampleValue_,afterEnd_:Co.prototype.copySampleValue_}),Oo.prototype=Object.assign(Object.create(Co.prototype),{constructor:Oo,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,a=t+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:r=t,o=2*e-n;break;case 2402:o=e+i[r=i.length-2]-i[r+1];break;default:r=t,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=t,s=2*n-e;break;case 2402:a=1,s=n+i[1]-i[0];break;default:a=t-1,s=e}var c=.5*(n-e),l=this.valueSize;this._weightPrev=c/(e-o),this._weightNext=c/(s-n),this._offsetPrev=r*l,this._offsetNext=a*l},interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,c=s-o,l=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,p=this._weightNext,d=(n-e)/(i-e),f=d*d,m=f*d,v=-u*m+2*u*f-u*d,g=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*d+1,y=(-1-p)*m+(1.5+p)*f+.5*d,x=p*m-p*f,b=0;b!==o;++b)r[b]=v*a[l+b]+g*a[c+b]+y*a[s+b]+x*a[h+b];return r}}),Io.prototype=Object.assign(Object.create(Co.prototype),{constructor:Io,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,c=s-o,l=(n-e)/(i-e),h=1-l,u=0;u!==o;++u)r[u]=a[c+u]*h+a[s+u]*l;return r}}),No.prototype=Object.assign(Object.create(Co.prototype),{constructor:No,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Do,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:Ro.convertArray(t.times,Array),values:Ro.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}),Object.assign(Do.prototype,{constructor:Do,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new No(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Io(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Oo(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<t;)++r;for(;-1!==a&&n[a]>e;)--a;if(++a,0!==r||a!==i){r>=a&&(r=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=Ro.arraySlice(n,r,a),this.values=Ro.arraySlice(this.values,r*o,a*o)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),t=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),t=!1;break}a=s}if(void 0!==i&&Ro.isTypedArray(i)){o=0;for(var c=i.length;o!==c;++o){var l=i[o];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,l),t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),i=2302===this.getInterpolation(),r=1,a=t.length-1,o=1;o<a;++o){var s=!1,c=t[o];if(c!==t[o+1]&&(1!==o||c!==c[0]))if(i)s=!0;else for(var l=o*n,h=l-n,u=l+n,p=0;p!==n;++p){var d=e[l+p];if(d!==e[h+p]||d!==e[u+p]){s=!0;break}}if(s){if(o!==r){t[r]=t[o];var f=o*n,m=r*n;for(p=0;p!==n;++p)e[m+p]=e[f+p]}++r}}if(a>0){t[r]=t[a];for(f=a*n,m=r*n,p=0;p!==n;++p)e[m+p]=e[f+p];++r}return r!==t.length&&(this.times=Ro.arraySlice(t,0,r),this.values=Ro.arraySlice(e,0,r*n)),this},clone:function(){var t=Ro.arraySlice(this.times,0),e=Ro.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}),zo.prototype=Object.assign(Object.create(Do.prototype),{constructor:zo,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Bo.prototype=Object.assign(Object.create(Do.prototype),{constructor:Bo,ValueTypeName:"color"}),Uo.prototype=Object.assign(Object.create(Do.prototype),{constructor:Uo,ValueTypeName:"number"}),Fo.prototype=Object.assign(Object.create(Co.prototype),{constructor:Fo,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,l=(n-e)/(i-e),h=s+o;s!==h;s+=4)c.slerpFlat(r,0,a,s-o,a,s,l);return r}}),Go.prototype=Object.assign(Object.create(Do.prototype),{constructor:Go,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new Fo(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Vo.prototype=Object.assign(Object.create(Do.prototype),{constructor:Vo,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ho.prototype=Object.assign(Object.create(Do.prototype),{constructor:Ho,ValueTypeName:"vector"}),Object.assign(jo,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,a=n.length;r!==a;++r)e.push(ko(n[r]).scale(i));return new jo(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},r=0,a=n.length;r!==a;++r)e.push(Do.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,a=[],o=0;o<r;o++){var s=[],c=[];s.push((o+r-1)%r,o,(o+1)%r),c.push(0,1,0);var l=Ro.getKeyframeOrder(s);s=Ro.sortedArray(s,1,l),c=Ro.sortedArray(c,1,l),i||0!==s[0]||(s.push(r),c.push(c[0])),a.push(new Uo(".morphTargetInfluences["+e[o].name+"]",s,c).scale(1/n))}return new jo(t,-1,a)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var i=t;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\\w-]*?)([\\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],c=s.name.match(r);if(c&&c.length>1){var l=i[u=c[1]];l||(i[u]=l=[]),l.push(s)}}var h=[];for(var u in i)h.push(jo.CreateFromMorphTargetSequence(u,i[u],e,n));return h},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,i,r){if(0!==n.length){var a=[],o=[];Ro.flattenJSON(n,a,o,i),0!==a.length&&r.push(new t(e,a,o))}},i=[],r=t.name||"default",a=t.length||-1,o=t.fps||30,s=t.hierarchy||[],c=0;c<s.length;c++){var l=s[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var h={},u=0;u<l.length;u++)if(l[u].morphTargets)for(var p=0;p<l[u].morphTargets.length;p++)h[l[u].morphTargets[p]]=-1;for(var d in h){var f=[],m=[];for(p=0;p!==l[u].morphTargets.length;++p){var v=l[u];f.push(v.time),m.push(v.morphTarget===d?1:0)}i.push(new Uo(".morphTargetInfluence["+d+"]",f,m))}a=h.length*(o||1)}else{var g=".bones["+e[c].name+"]";n(Ho,g+".position",l,"pos",i),n(Go,g+".quaternion",l,"rot",i),n(Ho,g+".scale",l,"scl",i)}}return 0===i.length?null:new jo(r,a,i)}}),Object.assign(jo.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var i=this.tracks[e];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new jo(this.name,this.duration,t)}});var Wo={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function qo(t,e,n){var i=this,r=!1,a=0,o=0,s=void 0,c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===r&&void 0!==i.onStart&&i.onStart(t,a,o),r=!0},this.itemEnd=function(t){a++,void 0!==i.onProgress&&i.onProgress(t,a,o),a===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return c.push(t,e),this},this.removeHandler=function(t){var e=c.indexOf(t);return-1!==e&&c.splice(e,2),this},this.getHandler=function(t){for(var e=0,n=c.length;e<n;e+=2){var i=c[e],r=c[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return r}return null}}var Xo=new qo;function Yo(t){this.manager=void 0!==t?t:Xo,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(Yo.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this}});var Zo={};function Jo(t){Yo.call(this,t)}function Qo(t){Yo.call(this,t)}function Ko(t){Yo.call(this,t)}function $o(t){Yo.call(this,t)}function ts(t){Yo.call(this,t)}function es(t){Yo.call(this,t)}function ns(t){Yo.call(this,t)}function is(){this.type="Curve",this.arcLengthDivisions=200}function rs(t,e,n,i,r,a,o,s){is.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function as(t,e,n,i,r,a){rs.call(this,t,e,n,n,i,r,a),this.type="ArcCurve"}function os(){var t=0,e=0,n=0,i=0;function r(r,a,o,s){t=r,e=o,n=-3*r+3*a-2*o-s,i=2*r-2*a+o+s}return{initCatmullRom:function(t,e,n,i,a){r(e,n,a*(n-t),a*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,a,o,s){var c=(e-t)/a-(n-t)/(a+o)+(n-e)/o,l=(n-e)/o-(i-e)/(o+s)+(i-n)/s;r(e,n,c*=o,l*=o)},calc:function(r){var a=r*r;return t+e*r+n*a+i*(a*r)}}}Jo.prototype=Object.assign(Object.create(Yo.prototype),{constructor:Jo,load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=Wo.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;if(void 0===Zo[t]){var o=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var s=o[1],c=!!o[2],l=o[3];l=decodeURIComponent(l),c&&(l=atob(l));try{var h,u=(this.responseType||"").toLowerCase();switch(u){case"arraybuffer":case"blob":for(var p=new Uint8Array(l.length),d=0;d<l.length;d++)p[d]=l.charCodeAt(d);h="blob"===u?new Blob([p.buffer],{type:s}):p.buffer;break;case"document":var f=new DOMParser;h=f.parseFromString(l,s);break;case"json":h=JSON.parse(l);break;default:h=l}setTimeout((function(){e&&e(h),r.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}),0)}}else{Zo[t]=[],Zo[t].push({onLoad:e,onProgress:n,onError:i});var m=new XMLHttpRequest;for(var v in m.open("GET",t,!0),m.addEventListener("load",(function(e){var n=this.response,i=Zo[t];if(delete Zo[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Wo.add(t,n);for(var a=0,o=i.length;a<o;a++){(s=i[a]).onLoad&&s.onLoad(n)}r.manager.itemEnd(t)}else{for(a=0,o=i.length;a<o;a++){var s;(s=i[a]).onError&&s.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}}),!1),m.addEventListener("progress",(function(e){for(var n=Zo[t],i=0,r=n.length;i<r;i++){var a=n[i];a.onProgress&&a.onProgress(e)}}),!1),m.addEventListener("error",(function(e){var n=Zo[t];delete Zo[t];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}),!1),m.addEventListener("abort",(function(e){var n=Zo[t];delete Zo[t];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return r.manager.itemStart(t),m}Zo[t].push({onLoad:e,onProgress:n,onError:i})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Qo.prototype=Object.assign(Object.create(Yo.prototype),{constructor:Qo,load:function(t,e,n,i){var r=this,a=new Jo(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),n,i)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var i=jo.parse(t[n]);e.push(i)}return e}}),Ko.prototype=Object.assign(Object.create(Yo.prototype),{constructor:Ko,load:function(t,e,n,i){var r=this,a=[],o=new na;o.image=a;var s=new Jo(this.manager);function c(c){s.load(t[c],(function(t){var n=r.parse(t,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(o.minFilter=1006),o.format=n.format,o.needsUpdate=!0,e&&e(o))}),n,i)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var l=0,h=0,u=t.length;h<u;++h)c(h);else s.load(t,(function(t){var n=r.parse(t,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){a[s]={mipmaps:[]};for(var c=0;c<n.mipmapCount;c++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+c]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=1006),o.format=n.format,o.needsUpdate=!0,e&&e(o)}),n,i);return o}}),$o.prototype=Object.assign(Object.create(Yo.prototype),{constructor:$o,load:function(t,e,n,i){var r=this,a=new ke,o=new Jo(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(t,(function(t){var n=r.parse(t);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:1001,a.wrapT=void 0!==n.wrapT?n.wrapT:1001,a.magFilter=void 0!==n.magFilter?n.magFilter:1006,a.minFilter=void 0!==n.minFilter?n.minFilter:1006,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=1008),1===n.mipmapCount&&(a.minFilter=1006),a.needsUpdate=!0,e&&e(a,n))}),n,i),a}}),ts.prototype=Object.assign(Object.create(Yo.prototype),{constructor:ts,load:function(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=Wo.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",c,!1),Wo.add(t,this),e&&e(this),r.manager.itemEnd(t)}function c(e){o.removeEventListener("load",s,!1),o.removeEventListener("error",c,!1),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}return o.addEventListener("load",s,!1),o.addEventListener("error",c,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(t),o.src=t,o}}),es.prototype=Object.assign(Object.create(Yo.prototype),{constructor:es,load:function(t,e,n,i){var r=new mn,a=new ts(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(t[n],(function(t){r.images[n]=t,6===++o&&(r.needsUpdate=!0,e&&e(r))}),void 0,i)}for(var c=0;c<t.length;++c)s(c);return r}}),ns.prototype=Object.assign(Object.create(Yo.prototype),{constructor:ns,load:function(t,e,n,i){var r=new g,a=new ts(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,(function(n){r.image=n;var i=t.search(/\\.jpe?g($|\\?)/i)>0||0===t.search(/^data\\:image\\/jpeg/);r.format=i?1022:1023,r.needsUpdate=!0,void 0!==e&&e(r)}),n,i),r}}),Object.assign(is.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,i=[],r=this.getPoint(0),a=0;for(i.push(0),n=1;n<=t;n++)a+=(e=this.getPoint(n/t)).distanceTo(r),i.push(a),r=e;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,i=this.getLengths(),r=0,a=i.length;n=e||t*i[a-1];for(var o,s=0,c=a-1;s<=c;)if((o=i[r=Math.floor(s+(c-s)/2)]-n)<0)s=r+1;else{if(!(o>0)){c=r;break}c=r-1}if(i[r=c]===n)return r/(a-1);var l=i[r];return(r+(n-l)/(i[r+1]-l))/(a-1)},getTangent:function(t){var e=t-1e-4,n=t+1e-4;e<0&&(e=0),n>1&&(n=1);var i=this.getPoint(e);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,i,r,a=new u,s=[],c=[],l=[],h=new u,p=new L;for(n=0;n<=t;n++)i=n/t,s[n]=this.getTangentAt(i),s[n].normalize();c[0]=new u,l[0]=new u;var d=Number.MAX_VALUE,f=Math.abs(s[0].x),m=Math.abs(s[0].y),v=Math.abs(s[0].z);for(f<=d&&(d=f,a.set(1,0,0)),m<=d&&(d=m,a.set(0,1,0)),v<=d&&a.set(0,0,1),h.crossVectors(s[0],a).normalize(),c[0].crossVectors(s[0],h),l[0].crossVectors(s[0],c[0]),n=1;n<=t;n++)c[n]=c[n-1].clone(),l[n]=l[n-1].clone(),h.crossVectors(s[n-1],s[n]),h.length()>Number.EPSILON&&(h.normalize(),r=Math.acos(o.clamp(s[n-1].dot(s[n]),-1,1)),c[n].applyMatrix4(p.makeRotationAxis(h,r))),l[n].crossVectors(s[n],c[n]);if(!0===e)for(r=Math.acos(o.clamp(c[0].dot(c[t]),-1,1)),r/=t,s[0].dot(h.crossVectors(c[0],c[t]))>0&&(r=-r),n=1;n<=t;n++)c[n].applyMatrix4(p.makeRotationAxis(s[n],r*n)),l[n].crossVectors(s[n],c[n]);return{tangents:s,normals:c,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),rs.prototype=Object.create(is.prototype),rs.prototype.constructor=rs,rs.prototype.isEllipseCurve=!0,rs.prototype.getPoint=function(t,e){for(var n=e||new s,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);var o=this.aStartAngle+t*r,c=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var h=Math.cos(this.aRotation),u=Math.sin(this.aRotation),p=c-this.aX,d=l-this.aY;c=p*h-d*u+this.aX,l=p*u+d*h+this.aY}return n.set(c,l)},rs.prototype.copy=function(t){return is.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},rs.prototype.toJSON=function(){var t=is.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},rs.prototype.fromJSON=function(t){return is.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},as.prototype=Object.create(rs.prototype),as.prototype.constructor=as,as.prototype.isArcCurve=!0;var ss=new u,cs=new os,ls=new os,hs=new os;function us(t,e,n,i){is.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=i||.5}function ps(t,e,n,i,r){var a=.5*(i-e),o=.5*(r-n),s=t*t;return(2*n-2*i+a+o)*(t*s)+(-3*n+3*i-2*a-o)*s+a*t+n}function ds(t,e,n,i){return function(t,e){var n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function fs(t,e,n,i,r){return function(t,e){var n=1-t;return n*n*n*e}(t,e)+function(t,e){var n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}function ms(t,e,n,i){is.call(this),this.type="CubicBezierCurve",this.v0=t||new s,this.v1=e||new s,this.v2=n||new s,this.v3=i||new s}function vs(t,e,n,i){is.call(this),this.type="CubicBezierCurve3",this.v0=t||new u,this.v1=e||new u,this.v2=n||new u,this.v3=i||new u}function gs(t,e){is.call(this),this.type="LineCurve",this.v1=t||new s,this.v2=e||new s}function ys(t,e){is.call(this),this.type="LineCurve3",this.v1=t||new u,this.v2=e||new u}function xs(t,e,n){is.call(this),this.type="QuadraticBezierCurve",this.v0=t||new s,this.v1=e||new s,this.v2=n||new s}function bs(t,e,n){is.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new u,this.v1=e||new u,this.v2=n||new u}function ws(t){is.call(this),this.type="SplineCurve",this.points=t||[]}us.prototype=Object.create(is.prototype),us.prototype.constructor=us,us.prototype.isCatmullRomCurve3=!0,us.prototype.getPoint=function(t,e){var n,i,r,a,o=e||new u,s=this.points,c=s.length,l=(c-(this.closed?0:1))*t,h=Math.floor(l),p=l-h;if(this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/c)+1)*c:0===p&&h===c-1&&(h=c-2,p=1),this.closed||h>0?n=s[(h-1)%c]:(ss.subVectors(s[0],s[1]).add(s[0]),n=ss),i=s[h%c],r=s[(h+1)%c],this.closed||h+2<c?a=s[(h+2)%c]:(ss.subVectors(s[c-1],s[c-2]).add(s[c-1]),a=ss),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,f=Math.pow(n.distanceToSquared(i),d),m=Math.pow(i.distanceToSquared(r),d),v=Math.pow(r.distanceToSquared(a),d);m<1e-4&&(m=1),f<1e-4&&(f=m),v<1e-4&&(v=m),cs.initNonuniformCatmullRom(n.x,i.x,r.x,a.x,f,m,v),ls.initNonuniformCatmullRom(n.y,i.y,r.y,a.y,f,m,v),hs.initNonuniformCatmullRom(n.z,i.z,r.z,a.z,f,m,v)}else"catmullrom"===this.curveType&&(cs.initCatmullRom(n.x,i.x,r.x,a.x,this.tension),ls.initCatmullRom(n.y,i.y,r.y,a.y,this.tension),hs.initCatmullRom(n.z,i.z,r.z,a.z,this.tension));return o.set(cs.calc(p),ls.calc(p),hs.calc(p)),o},us.prototype.copy=function(t){is.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},us.prototype.toJSON=function(){var t=is.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},us.prototype.fromJSON=function(t){is.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new u).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},ms.prototype=Object.create(is.prototype),ms.prototype.constructor=ms,ms.prototype.isCubicBezierCurve=!0,ms.prototype.getPoint=function(t,e){var n=e||new s,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(fs(t,i.x,r.x,a.x,o.x),fs(t,i.y,r.y,a.y,o.y)),n},ms.prototype.copy=function(t){return is.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},ms.prototype.toJSON=function(){var t=is.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},ms.prototype.fromJSON=function(t){return is.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},vs.prototype=Object.create(is.prototype),vs.prototype.constructor=vs,vs.prototype.isCubicBezierCurve3=!0,vs.prototype.getPoint=function(t,e){var n=e||new u,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(fs(t,i.x,r.x,a.x,o.x),fs(t,i.y,r.y,a.y,o.y),fs(t,i.z,r.z,a.z,o.z)),n},vs.prototype.copy=function(t){return is.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},vs.prototype.toJSON=function(){var t=is.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},vs.prototype.fromJSON=function(t){return is.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},gs.prototype=Object.create(is.prototype),gs.prototype.constructor=gs,gs.prototype.isLineCurve=!0,gs.prototype.getPoint=function(t,e){var n=e||new s;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},gs.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},gs.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},gs.prototype.copy=function(t){return is.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},gs.prototype.toJSON=function(){var t=is.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},gs.prototype.fromJSON=function(t){return is.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},ys.prototype=Object.create(is.prototype),ys.prototype.constructor=ys,ys.prototype.isLineCurve3=!0,ys.prototype.getPoint=function(t,e){var n=e||new u;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},ys.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},ys.prototype.copy=function(t){return is.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},ys.prototype.toJSON=function(){var t=is.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},ys.prototype.fromJSON=function(t){return is.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},xs.prototype=Object.create(is.prototype),xs.prototype.constructor=xs,xs.prototype.isQuadraticBezierCurve=!0,xs.prototype.getPoint=function(t,e){var n=e||new s,i=this.v0,r=this.v1,a=this.v2;return n.set(ds(t,i.x,r.x,a.x),ds(t,i.y,r.y,a.y)),n},xs.prototype.copy=function(t){return is.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},xs.prototype.toJSON=function(){var t=is.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},xs.prototype.fromJSON=function(t){return is.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},bs.prototype=Object.create(is.prototype),bs.prototype.constructor=bs,bs.prototype.isQuadraticBezierCurve3=!0,bs.prototype.getPoint=function(t,e){var n=e||new u,i=this.v0,r=this.v1,a=this.v2;return n.set(ds(t,i.x,r.x,a.x),ds(t,i.y,r.y,a.y),ds(t,i.z,r.z,a.z)),n},bs.prototype.copy=function(t){return is.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},bs.prototype.toJSON=function(){var t=is.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},bs.prototype.fromJSON=function(t){return is.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},ws.prototype=Object.create(is.prototype),ws.prototype.constructor=ws,ws.prototype.isSplineCurve=!0,ws.prototype.getPoint=function(t,e){var n=e||new s,i=this.points,r=(i.length-1)*t,a=Math.floor(r),o=r-a,c=i[0===a?a:a-1],l=i[a],h=i[a>i.length-2?i.length-1:a+1],u=i[a>i.length-3?i.length-1:a+2];return n.set(ps(o,c.x,l.x,h.x,u.x),ps(o,c.y,l.y,h.y,u.y)),n},ws.prototype.copy=function(t){is.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this},ws.prototype.toJSON=function(){var t=is.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t},ws.prototype.fromJSON=function(t){is.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new s).fromArray(i))}return this};var _s=Object.freeze({__proto__:null,ArcCurve:as,CatmullRomCurve3:us,CubicBezierCurve:ms,CubicBezierCurve3:vs,EllipseCurve:rs,LineCurve:gs,LineCurve3:ys,QuadraticBezierCurve:xs,QuadraticBezierCurve3:bs,SplineCurve:ws});function Ms(){is.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Ss(t){Ms.call(this),this.type="Path",this.currentPoint=new s,t&&this.setFromPoints(t)}function Ts(t){Ss.call(this,t),this.uuid=o.generateUUID(),this.type="Shape",this.holes=[]}function Es(t,e){q.call(this),this.type="Light",this.color=new Bt(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function As(t,e,n){Es.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(q.DefaultUp),this.updateMatrix(),this.groundColor=new Bt(e)}function Ls(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new s(512,512),this.map=null,this.mapPass=null,this.matrix=new L,this._frustum=new Xe,this._frameExtents=new s(1,1),this._viewportCount=1,this._viewports=[new y(0,0,1,1)]}function Ps(){Ls.call(this,new Ve(50,1,.5,500))}function Rs(t,e,n,i,r,a){Es.call(this,t,e),this.type="SpotLight",this.position.copy(q.DefaultUp),this.updateMatrix(),this.target=new q,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new Ps}function Cs(){Ls.call(this,new Ve(90,1,.5,500)),this._frameExtents=new s(4,2),this._viewportCount=6,this._viewports=[new y(2,1,1,1),new y(0,1,1,1),new y(3,1,1,1),new y(1,1,1,1),new y(3,0,1,1),new y(1,0,1,1)],this._cubeDirections=[new u(1,0,0),new u(-1,0,0),new u(0,0,1),new u(0,0,-1),new u(0,1,0),new u(0,-1,0)],this._cubeUps=[new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,0,1),new u(0,0,-1)]}function Os(t,e,n,i){Es.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Cs}function Is(t,e,n,i,r,a){Ge.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Ns(){Ls.call(this,new Is(-5,5,5,-5,.5,500))}function Ds(t,e){Es.call(this,t,e),this.type="DirectionalLight",this.position.copy(q.DefaultUp),this.updateMatrix(),this.target=new q,this.shadow=new Ns}function zs(t,e){Es.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function Bs(t,e,n,i){Es.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function Us(t){Yo.call(this,t),this.textures={}}Ms.prototype=Object.assign(Object.create(is.prototype),{constructor:Ms,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new gs(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=e){var r=n[i]-e,a=this.curves[i],o=a.getLength(),s=0===o?0:1-r/o;return a.getPointAt(s)}i++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),c=0;c<s.length;c++){var l=s[c];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){is.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=is.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function(t){is.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push((new _s[i.type]).fromJSON(i))}return this}}),Ss.prototype=Object.assign(Object.create(Ms.prototype),{constructor:Ss,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var n=new gs(this.currentPoint.clone(),new s(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,i){var r=new xs(this.currentPoint.clone(),new s(t,e),new s(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(t,e,n,i,r,a){var o=new ms(this.currentPoint.clone(),new s(t,e),new s(n,i),new s(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this},splineThru:function(t){var e=new ws([this.currentPoint.clone()].concat(t));return this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+o,e+s,n,i,r,a),this},absarc:function(t,e,n,i,r,a){return this.absellipse(t,e,n,n,i,r,a),this},ellipse:function(t,e,n,i,r,a,o,s){var c=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(t+c,e+l,n,i,r,a,o,s),this},absellipse:function(t,e,n,i,r,a,o,s){var c=new rs(t,e,n,i,r,a,o,s);if(this.curves.length>0){var l=c.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(c);var h=c.getPoint(1);return this.currentPoint.copy(h),this},copy:function(t){return Ms.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Ms.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Ms.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Ts.prototype=Object.assign(Object.create(Ss.prototype),{constructor:Ts,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Ss.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){var t=Ss.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function(t){Ss.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push((new Ss).fromJSON(i))}return this}}),Es.prototype=Object.assign(Object.create(q.prototype),{constructor:Es,isLight:!0,copy:function(t){return q.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=q.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),As.prototype=Object.assign(Object.create(Es.prototype),{constructor:As,isHemisphereLight:!0,copy:function(t){return Es.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Ls.prototype,{_projScreenMatrix:new L,_lightPositionWorld:new u,_lookTarget:new u,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(t.matrixWorld),e.position.copy(a),r.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(r),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Ps.prototype=Object.assign(Object.create(Ls.prototype),{constructor:Ps,isSpotLightShadow:!0,updateMatrices:function(t){var e=this.camera,n=2*o.RAD2DEG*t.angle,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),Ls.prototype.updateMatrices.call(this,t)}}),Rs.prototype=Object.assign(Object.create(Es.prototype),{constructor:Rs,isSpotLight:!0,copy:function(t){return Es.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Cs.prototype=Object.assign(Object.create(Ls.prototype),{constructor:Cs,isPointLightShadow:!0,updateMatrices:function(t,e){void 0===e&&(e=0);var n=this.camera,i=this.matrix,r=this._lightPositionWorld,a=this._lookTarget,o=this._projScreenMatrix;r.setFromMatrixPosition(t.matrixWorld),n.position.copy(r),a.copy(n.position),a.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(a),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromMatrix(o)}}),Os.prototype=Object.assign(Object.create(Es.prototype),{constructor:Os,isPointLight:!0,copy:function(t){return Es.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Is.prototype=Object.assign(Object.create(Ge.prototype),{constructor:Is,isOrthographicCamera:!0,copy:function(t,e){return Ge.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,a=n+t,o=i+e,s=i-e;if(null!==this.view&&this.view.enabled){var c=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),h=(this.right-this.left)/this.view.width,u=(this.top-this.bottom)/this.view.height;a=(r+=h*(this.view.offsetX/c))+h*(this.view.width/c),s=(o-=u*(this.view.offsetY/l))-u*(this.view.height/l)}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=q.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Ns.prototype=Object.assign(Object.create(Ls.prototype),{constructor:Ns,isDirectionalLightShadow:!0,updateMatrices:function(t){Ls.prototype.updateMatrices.call(this,t)}}),Ds.prototype=Object.assign(Object.create(Es.prototype),{constructor:Ds,isDirectionalLight:!0,copy:function(t){return Es.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),zs.prototype=Object.assign(Object.create(Es.prototype),{constructor:zs,isAmbientLight:!0}),Bs.prototype=Object.assign(Object.create(Es.prototype),{constructor:Bs,isRectAreaLight:!0,copy:function(t){return Es.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=Es.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),Us.prototype=Object.assign(Object.create(Yo.prototype),{constructor:Us,load:function(t,e,n,i){var r=this,a=new Jo(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),n,i)},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var i=new Po[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.sheen&&(i.sheen=(new Bt).setHex(t.sheen)),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(i.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(i.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(i.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(i.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(i.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(i.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(i.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(i.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(i.morphNormals=t.morphNormals),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.uniforms)for(var r in t.uniforms){var a=t.uniforms[r];switch(i.uniforms[r]={},a.type){case"t":i.uniforms[r].value=n(a.value);break;case"c":i.uniforms[r].value=(new Bt).setHex(a.value);break;case"v2":i.uniforms[r].value=(new s).fromArray(a.value);break;case"v3":i.uniforms[r].value=(new u).fromArray(a.value);break;case"v4":i.uniforms[r].value=(new y).fromArray(a.value);break;case"m3":i.uniforms[r].value=(new f).fromArray(a.value);case"m4":i.uniforms[r].value=(new L).fromArray(a.value);break;default:i.uniforms[r].value=a.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var o in t.extensions)i.extensions[o]=t.extensions[o];if(void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.matcap&&(i.matcap=n(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){var c=t.normalScale;!1===Array.isArray(c)&&(c=[c,c]),i.normalScale=(new s).fromArray(c)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new s).fromArray(t.clearcoatNormalScale)),i},setTextures:function(t){return this.textures=t,this}});var Fs=function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)};function Gs(){he.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Vs(t,e,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Wt.call(this,t,e,n),this._meshPerAttribute=i||1,this.versionVAO=0}function Hs(t){Yo.call(this,t)}Gs.prototype=Object.assign(Object.create(he.prototype),{constructor:Gs,isInstancedBufferGeometry:!0,copy:function(t){return he.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=he.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),Vs.prototype=Object.assign(Object.create(Wt.prototype),{constructor:Vs,isInstancedBufferAttribute:!0,copy:function(t){return Wt.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=Wt.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Object.defineProperties(Vs.prototype,{meshPerAttribute:{get:function(){return this._meshPerAttribute},set:function(t){this._meshPerAttribute=t,this.versionVAO++}}}),Hs.prototype=Object.assign(Object.create(Yo.prototype),{constructor:Hs,load:function(t,e,n,i){var r=this,a=new Jo(r.manager);a.setPath(r.path),a.load(t,(function(t){e(r.parse(JSON.parse(t)))}),n,i)},parse:function(t){var e=t.isInstancedBufferGeometry?new Gs:new he,n=t.data.index;if(void 0!==n){var i=new js[n.type](n.array);e.setIndex(new Wt(i,1))}var r=t.data.attributes;for(var a in r){var o=r[a],s=(i=new js[o.type](o.array),new(o.isInstancedBufferAttribute?Vs:Wt)(i,o.itemSize,o.normalized));void 0!==o.name&&(s.name=o.name),e.setAttribute(a,s)}var c=t.data.morphAttributes;if(c)for(var a in c){for(var l=c[a],h=[],p=0,d=l.length;p<d;p++){o=l[p],s=new Wt(i=new js[o.type](o.array),o.itemSize,o.normalized);void 0!==o.name&&(s.name=o.name),h.push(s)}e.morphAttributes[a]=h}t.data.morphTargetsRelative&&(e.morphTargetsRelative=!0);var f=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==f){p=0;for(var m=f.length;p!==m;++p){var v=f[p];e.addGroup(v.start,v.count,v.materialIndex)}}var g=t.data.boundingSphere;if(void 0!==g){var y=new u;void 0!==g.center&&y.fromArray(g.center),e.boundingSphere=new ht(y,g.radius)}return t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e}});var js={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function ks(t){Yo.call(this,t)}ks.prototype=Object.assign(Object.create(Yo.prototype),{constructor:ks,load:function(t,e,n,i){var r=this,a=""===this.path?Fs(t):this.path;this.resourcePath=this.resourcePath||a;var o=new Jo(r.manager);o.setPath(this.path),o.load(t,(function(n){var a=null;try{a=JSON.parse(n)}catch(e){return void 0!==i&&i(e),void console.error("THREE:ObjectLoader: Can\'t parse "+t+".",e.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?r.parse(a,e):console.error("THREE.ObjectLoader: Can\'t load "+t)}),n,i)},parse:function(t,e){var n=this.parseShape(t.shapes),i=this.parseGeometries(t.geometries,n),r=this.parseImages(t.images,(function(){void 0!==e&&e(s)})),a=this.parseTextures(t.textures,r),o=this.parseMaterials(t.materials,a),s=this.parseObject(t.object,i,o);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new Ts).fromJSON(t[n]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var i=new Hs,r=0,a=t.length;r<a;r++){var o,s=t[r];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new yo[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new yo[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new yo[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new yo[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new yo[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new yo[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new yo[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new yo[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new yo[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new yo[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new yo[s.type]((new _s[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new yo[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new yo[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],l=0,h=s.shapes.length;l<h;l++){var u=e[s.shapes[l]];c.push(u)}o=new yo[s.type](c,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(c=[],l=0,h=s.shapes.length;l<h;l++){u=e[s.shapes[l]];c.push(u)}var p=s.options.extrudePath;void 0!==p&&(s.options.extrudePath=(new _s[p.type]).fromJSON(p)),o=new yo[s.type](c,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)o=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry;else console.error(\'THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".\');break;default:console.warn(\'THREE.ObjectLoader: Unsupported geometry type "\'+s.type+\'"\');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n},parseMaterials:function(t,e){var n={},i={};if(void 0!==t){var r=new Us;r.setTextures(e);for(var a=0,o=t.length;a<o;a++){var s=t[a];if("MultiMaterial"===s.type){for(var c=[],l=0;l<s.materials.length;l++){var h=s.materials[l];void 0===n[h.uuid]&&(n[h.uuid]=r.parse(h)),c.push(n[h.uuid])}i[s.uuid]=c}else void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=jo.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),e.push(r)}return e},parseImages:function(t,e){var n=this,i={};function r(t){return n.manager.itemStart(t),a.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}if(void 0!==t&&t.length>0){var a=new ts(new qo(e));a.setCrossOrigin(this.crossOrigin);for(var o=0,s=t.length;o<s;o++){var c=t[o],l=c.url;if(Array.isArray(l)){i[c.uuid]=[];for(var h=0,u=l.length;h<u;h++){var p=l[h],d=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(p)?p:n.resourcePath+p;i[c.uuid].push(r(d))}}else{d=/^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(c.url)?c.url:n.resourcePath+c.url;i[c.uuid]=r(d)}}}return i},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={};if(void 0!==t)for(var r=0,a=t.length;r<a;r++){var o,s=t[r];void 0===s.image&&console.warn(\'THREE.ObjectLoader: No "image" specified for\',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(o=Array.isArray(e[s.image])?new mn(e[s.image]):new g(e[s.image])).needsUpdate=!0,o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=n(s.mapping,qs)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=n(s.wrap[0],Xs),o.wrapT=n(s.wrap[1],Xs)),void 0!==s.format&&(o.format=s.format),void 0!==s.type&&(o.type=s.type),void 0!==s.encoding&&(o.encoding=s.encoding),void 0!==s.minFilter&&(o.minFilter=n(s.minFilter,Ys)),void 0!==s.magFilter&&(o.magFilter=n(s.magFilter,Ys)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(o.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(o.unpackAlignment=s.unpackAlignment),i[s.uuid]=o}return i},parseObject:function(t,e,n){var i;function r(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function a(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var a=t[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),e.push(n[a])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":i=new X,void 0!==t.background&&Number.isInteger(t.background)&&(i.background=new Bt(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new or(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new ar(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new Ve(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new Is(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"AmbientLight":i=new zs(t.color,t.intensity);break;case"DirectionalLight":i=new Ds(t.color,t.intensity);break;case"PointLight":i=new Os(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":i=new Bs(t.color,t.intensity,t.width,t.height);break;case"SpotLight":i=new Rs(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new As(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=r(t.geometry),s=a(t.material);i=o.bones&&o.bones.length>0?new Ar(o,s):new Le(o,s);break;case"InstancedMesh":o=r(t.geometry),s=a(t.material);var c=t.count,l=t.instanceMatrix;(i=new zr(o,s,c)).instanceMatrix=new Wt(new Float32Array(l.array),16);break;case"LOD":i=new Er;break;case"Line":i=new jr(r(t.geometry),a(t.material),t.mode);break;case"LineLoop":i=new Xr(r(t.geometry),a(t.material));break;case"LineSegments":i=new qr(r(t.geometry),a(t.material));break;case"PointCloud":case"Points":i=new $r(r(t.geometry),a(t.material));break;case"Sprite":i=new _r(a(t.material));break;case"Group":i=new Ji;break;default:i=new q}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(i.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(i.matrixAutoUpdate=t.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.frustumCulled&&(i.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(i.renderOrder=t.renderOrder),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.layers&&(i.layers.mask=t.layers),void 0!==t.drawMode&&i.setDrawMode(t.drawMode),void 0!==t.children)for(var h=t.children,u=0;u<h.length;u++)i.add(this.parseObject(h[u],e,n));if("LOD"===t.type){void 0!==t.autoUpdate&&(i.autoUpdate=t.autoUpdate);for(var p=t.levels,d=0;d<p.length;d++){var f=p[d],m=i.getObjectByProperty("uuid",f.object);void 0!==m&&i.addLevel(m,f.distance)}}return i}});var Ws,qs={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Xs={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Ys={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};function Zs(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Yo.call(this,t),this.options=void 0}function Js(){this.type="ShapePath",this.color=new Bt,this.subPaths=[],this.currentPath=null}function Qs(t){this.type="Font",this.data=t}function Ks(t,e,n,i,r){var a=r.glyphs[t]||r.glyphs["?"];if(a){var o,s,c,l,h,u,p,d,f=new Js;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,g=m.length;v<g;){switch(m[v++]){case"m":o=m[v++]*e+n,s=m[v++]*e+i,f.moveTo(o,s);break;case"l":o=m[v++]*e+n,s=m[v++]*e+i,f.lineTo(o,s);break;case"q":c=m[v++]*e+n,l=m[v++]*e+i,h=m[v++]*e+n,u=m[v++]*e+i,f.quadraticCurveTo(h,u,c,l);break;case"b":c=m[v++]*e+n,l=m[v++]*e+i,h=m[v++]*e+n,u=m[v++]*e+i,p=m[v++]*e+n,d=m[v++]*e+i,f.bezierCurveTo(h,u,p,d,c,l)}}return{offsetX:a.ha*e,path:f}}console.error(\'THREE.Font: character "\'+t+\'" does not exists in font family \'+r.familyName+".")}function $s(t){Yo.call(this,t)}Zs.prototype=Object.assign(Object.create(Yo.prototype),{constructor:Zs,setOptions:function(t){return this.options=t,this},load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=Wo.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout((function(){e&&e(a),r.manager.itemEnd(t)}),0),a;fetch(t).then((function(t){return t.blob()})).then((function(t){return void 0===r.options?createImageBitmap(t):createImageBitmap(t,r.options)})).then((function(n){Wo.add(t,n),e&&e(n),r.manager.itemEnd(t)})).catch((function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}}),Object.assign(Js.prototype,{moveTo:function(t,e){return this.currentPath=new Ss,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this},bezierCurveTo:function(t,e,n,i,r,a){return this.currentPath.bezierCurveTo(t,e,n,i,r,a),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],a=new Ts;a.curves=r.curves,e.push(a)}return e}function i(t,e){for(var n=e.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=e[r],s=e[a],c=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=e[a],c=-c,s=e[r],l=-l),t.y<o.y||t.y>s.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var h=l*(t.x-o.x)-c*(t.y-o.y);if(0===h)return!0;if(h<0)continue;i=!i}}else{if(t.y!==o.y)continue;if(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x)return!0}}return i}var r=qa.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return n(a);var o,s,c,l=[];if(1===a.length)return s=a[0],(c=new Ts).curves=s.curves,l.push(c),l;var h=!r(a[0].getPoints());h=t?!h:h;var u,p,d=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=a.length;g<y;g++)o=r(u=(s=a[g]).getPoints()),(o=t?!o:o)?(!h&&f[v]&&v++,f[v]={s:new Ts,p:u},f[v].s.curves=s.curves,h&&v++,m[v]=[]):m[v].push({h:s,p:u[0]});if(!f[0])return n(a);if(f.length>1){for(var x=!1,b=[],w=0,_=f.length;w<_;w++)d[w]=[];for(w=0,_=f.length;w<_;w++)for(var M=m[w],S=0;S<M.length;S++){for(var T=M[S],E=!0,A=0;A<f.length;A++)i(T.p,f[A].p)&&(w!==A&&b.push({froms:w,tos:A,hole:S}),E?(E=!1,d[A].push(T)):x=!0);E&&d[w].push(T)}b.length>0&&(x||(m=d))}g=0;for(var L=f.length;g<L;g++){c=f[g].s,l.push(c);for(var P=0,R=(p=m[g]).length;P<R;P++)c.holes.push(p[P].h)}return l}}),Object.assign(Qs.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],i=function(t,e,n){for(var i=Array.from?Array.from(t):String(t).split(""),r=e/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[],s=0,c=0,l=0;l<i.length;l++){var h=i[l];if("\\n"===h)s=0,c-=a;else{var u=Ks(h,r,s,c,n);s+=u.offsetX,o.push(u.path)}}return o}(t,e,this.data),r=0,a=i.length;r<a;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),$s.prototype=Object.assign(Object.create(Yo.prototype),{constructor:$s,load:function(t,e,n,i){var r=this,a=new Jo(this.manager);a.setPath(this.path),a.load(t,(function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var i=r.parse(n);e&&e(i)}),n,i)},parse:function(t){return new Qs(t)}});var tc=function(){return void 0===Ws&&(Ws=new(window.AudioContext||window.webkitAudioContext)),Ws};function ec(t){Yo.call(this,t)}function nc(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new u)}function ic(t,e){Es.call(this,void 0,e),this.sh=void 0!==t?t:new nc}function rc(t,e,n){ic.call(this,void 0,n);var i=(new Bt).set(t),r=(new Bt).set(e),a=new u(i.r,i.g,i.b),o=new u(r.r,r.g,r.b),s=Math.sqrt(Math.PI),c=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(c)}function ac(t,e){ic.call(this,void 0,e);var n=(new Bt).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}ec.prototype=Object.assign(Object.create(Yo.prototype),{constructor:ec,load:function(t,e,n,i){var r=new Jo(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(t,(function(t){var n=t.slice(0);tc().decodeAudioData(n,(function(t){e(t)}))}),n,i)}}),Object.assign(nc.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScale(a[1],.488603*i),e.addScale(a[2],.488603*r),e.addScale(a[3],.488603*n),e.addScale(a[4],n*i*1.092548),e.addScale(a[5],i*r*1.092548),e.addScale(a[6],.315392*(3*r*r-1)),e.addScale(a[7],n*r*1.092548),e.addScale(a[8],.546274*(n*n-i*i)),e},getIrradianceAt:function(t,e){var n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScale(a[1],1.023328*i),e.addScale(a[2],1.023328*r),e.addScale(a[3],1.023328*n),e.addScale(a[4],.858086*n*i),e.addScale(a[5],.858086*i*r),e.addScale(a[6],.743125*r*r-.247708),e.addScale(a[7],.858086*n*r),e.addScale(a[8],.429043*(n*n-i*i)),e},add:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},scale:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this},equals:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t,e){void 0===e&&(e=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}}),Object.assign(nc,{getBasisAt:function(t,e){var n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}),ic.prototype=Object.assign(Object.create(Es.prototype),{constructor:ic,isLightProbe:!0,copy:function(t){return Es.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function(t){return Es.prototype.toJSON.call(this,t)}}),rc.prototype=Object.assign(Object.create(ic.prototype),{constructor:rc,isHemisphereLightProbe:!0,copy:function(t){return ic.prototype.copy.call(this,t),this},toJSON:function(t){return ic.prototype.toJSON.call(this,t)}}),ac.prototype=Object.assign(Object.create(ic.prototype),{constructor:ac,isAmbientLightProbe:!0,copy:function(t){return ic.prototype.copy.call(this,t),this},toJSON:function(t){return ic.prototype.toJSON.call(this,t)}});var oc=new L,sc=new L;function cc(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ve,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ve,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}.prototype,{update:function(t){var e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;var n,i,r=t.projectionMatrix.clone(),a=e.eyeSep/2,s=a*e.near/e.focus,c=e.near*Math.tan(o.DEG2RAD*e.fov*.5)/e.zoom;sc.elements[12]=-a,oc.elements[12]=a,n=-c*e.aspect+s,i=c*e.aspect+s,r.elements[0]=2*e.near/(i-n),r.elements[8]=(i+n)/(i-n),this.cameraL.projectionMatrix.copy(r),n=-c*e.aspect-s,i=c*e.aspect-s,r.elements[0]=2*e.near/(i-n),r.elements[8]=(i+n)/(i-n),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(sc),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(oc)}}),Object.assign(cc.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}});var lc=new u,hc=new c,uc=new u,pc=new u;function dc(){q.call(this),this.type="AudioListener",this.context=tc(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new cc}function fc(t){q.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._pausedAt=0,this.filters=[]}dc.prototype=Object.assign(Object.create(q.prototype),{constructor:dc,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){q.prototype.updateMatrixWorld.call(this,t);var e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(lc,hc,uc),pc.set(0,0,-1).applyQuaternion(hc),e.positionX){var i=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(lc.x,i),e.positionY.linearRampToValueAtTime(lc.y,i),e.positionZ.linearRampToValueAtTime(lc.z,i),e.forwardX.linearRampToValueAtTime(pc.x,i),e.forwardY.linearRampToValueAtTime(pc.y,i),e.forwardZ.linearRampToValueAtTime(pc.z,i),e.upX.linearRampToValueAtTime(n.x,i),e.upY.linearRampToValueAtTime(n.y,i),e.upZ.linearRampToValueAtTime(n.z,i)}else e.setPosition(lc.x,lc.y,lc.z),e.setOrientation(pc.x,pc.y,pc.z,n.x,n.y,n.z)}}),fc.prototype=Object.assign(Object.create(q.prototype),{constructor:fc,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setMediaStreamSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(t){if(void 0===t&&(t=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._pausedAt+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._pausedAt=(this.context.currentTime-this._startedAt)*this.playbackRate,this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._pausedAt=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(t){return this.loopStart=t,this},setLoopEnd:function(t){return this.loopEnd=t,this},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var mc=new u,vc=new c,gc=new u,yc=new u;function xc(t){fc.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function bc(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function wc(t,e,n){this.binding=t,this.valueSize=n;var i,r=Float64Array;switch(e){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}xc.prototype=Object.assign(Object.create(fc.prototype),{constructor:xc,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(t){if(q.prototype.updateMatrixWorld.call(this,t),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(mc,vc,gc),yc.set(0,0,1).applyQuaternion(vc);var e=this.panner;if(e.positionX){var n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(mc.x,n),e.positionY.linearRampToValueAtTime(mc.y,n),e.positionZ.linearRampToValueAtTime(mc.z,n),e.orientationX.linearRampToValueAtTime(yc.x,n),e.orientationY.linearRampToValueAtTime(yc.y,n),e.orientationZ.linearRampToValueAtTime(yc.z,n)}else e.setPosition(mc.x,mc.y,mc.z),e.setOrientation(yc.x,yc.y,yc.z)}}}),Object.assign(bc.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(wc.prototype,{accumulate:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=e}else{var s=e/(a+=e);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a},apply:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,r<1){var o=3*e;this._mixBufferRegion(n,i,o,1-r,e)}for(var s=e,c=e+e;s!==c;++s)if(n[s]!==n[s+e]){a.setValue(n,i);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,i=3*n;t.getValue(e,i);for(var r=n,a=i;r!==a;++r)e[r]=e[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)t[e+a]=t[n+a]},_slerp:function(t,e,n,i){c.slerpFlat(t,e,t,e,t,n,i)},_lerp:function(t,e,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=e+o;t[s]=t[s]*a+t[n+o]*i}}});var _c=new RegExp("[\\\\[\\\\]\\\\.:\\\\/]","g"),Mc="[^"+"\\\\[\\\\]\\\\.:\\\\/".replace("\\\\.","")+"]",Sc=/((?:WC+[\\/:])*)/.source.replace("WC","[^\\\\[\\\\]\\\\.:\\\\/]"),Tc=/(WCOD+)?/.source.replace("WCOD",Mc),Ec=/(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace("WC","[^\\\\[\\\\]\\\\.:\\\\/]"),Ac=/\\.(WC+)(?:\\[(.+)\\])?/.source.replace("WC","[^\\\\[\\\\]\\\\.:\\\\/]"),Lc=new RegExp("^"+Sc+Tc+Ec+Ac+"$"),Pc=["material","materials","bones"];function Rc(t,e,n){var i=n||Cc.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function Cc(t,e,n){this.path=e,this.parsedPath=n||Cc.parseTrackName(e),this.node=Cc.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Oc(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var i=e.tracks,r=i.length,a=new Array(r),o={endingStart:2400,endingEnd:2400},s=0;s!==r;++s){var c=i[s].createInterpolant(null);a[s]=c,c.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Ic(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Nc(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}Object.assign(Rc.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(Cc,{Composite:Rc,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new Cc.Composite(t,e,n):new Cc(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\\s/g,"_").replace(_c,"")},parseTrackName:function(t){var e=Lc.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==Pc.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var i=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e||r.uuid===e)return r;var a=i(r.children);if(a)return a}return null},r=i(t.children);if(r)return r}return null}}),Object.assign(Cc.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(t=Cc.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var a=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===a){a=o;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==a){if(void 0===t[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[a]}}var s=t[i];if(void 0!==s){var c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(t.geometry.morphAttributes.position[o].name===r){r=o;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(t.geometry.morphTargets[o].name===r){r=o;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}else{var h=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn\'t found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn\'t found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Cc.prototype,{_getValue_unbound:Cc.prototype.getValue,_setValue_unbound:Cc.prototype.setValue}),Object.assign(function(){this.uuid=o.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,c=void 0,l=0,h=arguments.length;l!==h;++l){var u=arguments[l],p=u.uuid,d=i[p];if(void 0===d){d=e++,i[p]=d,t.push(u);for(var f=0,m=s;f!==m;++f)o[f].push(new Cc(u,r[f],a[f]))}else if(d<n){c=t[d];var v=--n,g=t[v];i[g.uuid]=d,t[d]=g,i[p]=v,t[v]=u;for(f=0,m=s;f!==m;++f){var y=o[f],x=y[v],b=y[d];y[d]=x,void 0===b&&(b=new Cc(u,r[f],a[f])),y[v]=b}}else t[d]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],c=s.uuid,l=n[c];if(void 0!==l&&l>=e){var h=e++,u=t[h];n[u.uuid]=l,t[l]=u,n[c]=h,t[h]=s;for(var p=0,d=r;p!==d;++p){var f=i[p],m=f[h],v=f[l];f[l]=m,f[h]=v}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,a=r.length,o=0,s=arguments.length;o!==s;++o){var c=arguments[o],l=c.uuid,h=i[l];if(void 0!==h)if(delete i[l],h<n){var u=--n,p=t[u],d=t[y=--e];i[p.uuid]=h,t[h]=p,i[d.uuid]=u,t[u]=d,t.pop();for(var f=0,m=a;f!==m;++f){var v=(x=r[f])[u],g=x[y];x[h]=v,x[u]=g,x.pop()}}else{var y;i[(d=t[y=--e]).uuid]=h,t[h]=d,t.pop();for(f=0,m=a;f!==m;++f){var x;(x=r[f])[h]=x[y],x.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,s=this._objects,c=s.length,l=this.nCachedObjects_,h=new Array(c);i=r.length,n[t]=i,a.push(t),o.push(e),r.push(h);for(var u=l,p=s.length;u!==p;++u){var d=s[u];h[u]=new Cc(d,t,e)}return h},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];e[t[o]]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}),Object.assign(Oc.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var i=this._clip.duration,r=t._clip.duration,a=r/i,o=i/r;t.warp(1,a,e),this.warp(o,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var i=this._mixer,r=i.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,c=a.sampleValues;return s[0]=r,s[1]=r+n,c[0]=t/o,c[1]=e/o,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(t-r)*n;if(a<0||0===n)return;this._startTime=null,e=n*a}e*=this._updateTimeScale(t);var o=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var c=this._interpolants,l=this._propertyBindings,h=0,u=c.length;h!==u;++h)c[h].evaluate(o),l[h].accumulate(i,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,n=this._clip.duration,i=this.loop,r=this._loopCount,a=2202===i;if(0===t)return-1===r?e:a&&1==(1&r)?n-e:e;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0)){this.time=e;break t}e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),e>=n||e<0){var o=Math.floor(e/n);e-=n*o,r+=Math.abs(o);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var c=t<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=e;if(a&&1==(1&r))return n-e}return e},_setEndings:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,i.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(t,e,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=e,o[1]=r+t,s[1]=n,this}}),Ic.prototype=Object.assign(Object.create(i.prototype),{constructor:Ic,_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,a=t._propertyBindings,o=t._interpolants,s=n.uuid,c=this._bindingsByRootAndName,l=c[s];void 0===l&&(l={},c[s]=l);for(var h=0;h!==r;++h){var u=i[h],p=u.name,d=l[p];if(void 0!==d)a[h]=d;else{if(void 0!==(d=a[h])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,p));continue}var f=e&&e._propertyBindings[h].binding.parsedPath;++(d=new wc(Cc.create(n,p,f),u.ValueTypeName,u.getValueSize())).referenceCount,this._addInactiveBinding(d,s,p),a[h]=d}o[h].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var r=t._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var i=this._actions,r=this._actionsByClip,a=r[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{var o=a.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=i.length,i.push(t),a.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,c=s[s.length-1],l=t._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,r=i[e],a=this._bindings;void 0===r&&(r={},i[e]=r),r[n]=t,t._cacheIndex=a.length,a.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=e[e.length-1],c=t._cacheIndex;s._cacheIndex=c,e[c]=s,e.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new Io(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?jo.findByName(n,t):t,a=null!==r?r.uuid:t,o=this._actionsByClip[a],s=null;if(void 0!==o){var c=o.actionByRoot[i];if(void 0!==c)return c;s=o.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var l=new Oc(this,r,e);return this._bindAction(l,s),this._addInactiveAction(l,a,i),l},existingAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?jo.findByName(n,t):t,a=r?r.uuid:t,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==e;++r)t[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1,o=0;o!==n;++o){e[o]._update(i,t,r,a)}var s=this._bindings,c=this._nActiveBindings;for(o=0;o!==c;++o)s[o].apply(a);return this},setTime:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var c=a[o];this._deactivateAction(c);var l=c._cacheIndex,h=e[e.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=l,e[l]=h,e.pop(),this._removeInactiveBindingsForAction(c)}delete i[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[e];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Nc.prototype.clone=function(){return new Nc(void 0===this.value.clone?this.value:this.value.clone())};var Dc=0;function zc(){Object.defineProperty(this,"id",{value:Dc++}),this.name="",this.dynamic=!1,this.uniforms=[]}function Bc(t){zc.call(this),this.data=t,this.autoUpdate=!0,this.needsUpdate=!1}function Uc(t,e,n){sr.call(this,t,e),this._meshPerAttribute=n||1,this.versionVAO=0}function Fc(t,e,n,i){this.ray=new yt(t,e),this.near=n||0,this.far=i||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Gc(t,e){return t.distance-e.distance}function Vc(t,e,n,i){if(!1!==t.visible&&(t.raycast(e,n),!0===i))for(var r=t.children,a=0,o=r.length;a<o;a++)Vc(r[a],e,n,!0)}zc.prototype=Object.assign(Object.create(i.prototype),{constructor:zc,isUniformsGroup:!0,add:function(t){return this.uniforms.push(t),this},remove:function(t){var e=this.uniforms.indexOf(t);return-1!==e&&this.uniforms.splice(e,1),this},setName:function(t){return this.name=t,this},dispose:function(){return this.dispatchEvent({type:"dispose"}),this},copy:function(t){this.name=t.name,this.dynamic=t.dynamic;var e=t.uniforms;this.uniforms.length=0;for(var n=0,i=e.length;n<i;n++)this.uniforms.push(e[n].clone());return this},clone:function(){return(new this.constructor).copy(this)}}),Bc.prototype=Object.assign(Object.create(zc.prototype),{constructor:Bc,isRawUniformsGroup:!0,add:function(t){return console.warn("THREE.RawUniformsGroup: .add() is unimplemented. Modify .data manually instead."),this},remove:function(t){return console.warn("THREE.RawUniformsGroup: .add() is unimplemented. Modify .data manually instead."),this},copy:function(t){return zc.prototype.copy.call(this),this.autoUpdate=t.autoUpdate,this.data=t.data.slice(0),this}}),Uc.prototype=Object.assign(Object.create(sr.prototype),{constructor:Uc,isInstancedInterleavedBuffer:!0,copy:function(t){return sr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.defineProperties(Uc.prototype,{meshPerAttribute:{get:function(){return this._meshPerAttribute},set:function(t){this._meshPerAttribute=t,this.versionVAO++}}}),Object.assign(Fc.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var i=n||[];return Vc(t,this,i,e),i.sort(Gc),i},intersectObjects:function(t,e,n){var i=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,a=t.length;r<a;r++)Vc(t[r],this,i,e);return i.sort(Gc),i}}),Object.assign(function(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(o.clamp(e/this.radius,-1,1))),this}}),Object.assign(function(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}});var Hc=new s;function jc(t,e){this.min=void 0!==t?t:new s(1/0,1/0),this.max=void 0!==e?e:new s(-1/0,-1/0)}Object.assign(jc.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=Hc.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new s),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new s),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new s),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new s),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return Hc.copy(t).clamp(this.min,this.max).sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var kc=new u,Wc=new u;function qc(t,e){this.start=void 0!==t?t:new u,this.end=void 0!==e?e:new u}function Xc(t){q.call(this),this.material=t,this.render=function(){}}Object.assign(qc.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new u),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new u),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new u),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,e){kc.subVectors(t,this.start),Wc.subVectors(this.end,this.start);var n=Wc.dot(Wc),i=Wc.dot(kc)/n;return e&&(i=o.clamp(i,0,1)),i},closestPointToPoint:function(t,e,n){var i=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new u),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Xc.prototype=Object.create(q.prototype),Xc.prototype.constructor=Xc,Xc.prototype.isImmediateRenderObject=!0;var Yc=new u,Zc=new u,Jc=new f,Qc=["a","b","c"];function Kc(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16711680,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var c=new he,l=new $t(2*o*3,3);c.setAttribute("position",l),qr.call(this,c,new Br({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}Kc.prototype=Object.create(qr.prototype),Kc.prototype.constructor=Kc,Kc.prototype.update=function(){this.object.updateMatrixWorld(!0),Jc.getNormalMatrix(this.object.matrixWorld);var t=this.object.matrixWorld,e=this.geometry.attributes.position,n=this.object.geometry;if(n&&n.isGeometry)for(var i=n.vertices,r=n.faces,a=0,o=0,s=r.length;o<s;o++)for(var c=r[o],l=0,h=c.vertexNormals.length;l<h;l++){var u=i[c[Qc[l]]],p=c.vertexNormals[l];Yc.copy(u).applyMatrix4(t),Zc.copy(p).applyMatrix3(Jc).normalize().multiplyScalar(this.size).add(Yc),e.setXYZ(a,Yc.x,Yc.y,Yc.z),a+=1,e.setXYZ(a,Zc.x,Zc.y,Zc.z),a+=1}else if(n&&n.isBufferGeometry){var d=n.attributes.position,f=n.attributes.normal;for(a=0,l=0,h=d.count;l<h;l++)Yc.set(d.getX(l),d.getY(l),d.getZ(l)).applyMatrix4(t),Zc.set(f.getX(l),f.getY(l),f.getZ(l)),Zc.applyMatrix3(Jc).normalize().multiplyScalar(this.size).add(Yc),e.setXYZ(a,Yc.x,Yc.y,Yc.z),a+=1,e.setXYZ(a,Zc.x,Zc.y,Zc.z),a+=1}e.needsUpdate=!0};var $c=new u;function tl(t,e){q.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new he,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,a=1;r<32;r++,a++){var o=r/32*Math.PI*2,s=a/32*Math.PI*2;i.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}n.setAttribute("position",new $t(i,3));var c=new Br({fog:!1});this.cone=new qr(n,c),this.add(this.cone),this.update()}tl.prototype=Object.create(q.prototype),tl.prototype.constructor=tl,tl.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},tl.prototype.update=function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),$c.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt($c),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var el=new u,nl=new L,il=new L;function rl(t){for(var e=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var i=0;i<e.children.length;i++)n.push.apply(n,t(e.children[i]));return n}(t),n=new he,i=[],r=[],a=new Bt(0,0,1),o=new Bt(0,1,0),s=0;s<e.length;s++){var c=e[s];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}n.setAttribute("position",new $t(i,3)),n.setAttribute("color",new $t(r,3));var l=new Br({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});qr.call(this,n,l),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function al(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var i=new no(e,4,2),r=new kt({wireframe:!0,fog:!1});Le.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ol(t,e){this.type="RectAreaLightHelper",this.light=t,this.color=e;var n=new he;n.setAttribute("position",new $t([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere();var i=new Br({fog:!1});jr.call(this,n,i);var r=new he;r.setAttribute("position",new $t([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new Le(r,new kt({side:1,fog:!1}))),this.update()}rl.prototype=Object.create(qr.prototype),rl.prototype.constructor=rl,rl.prototype.updateMatrixWorld=function(t){var e=this.bones,n=this.geometry,i=n.getAttribute("position");il.getInverse(this.root.matrixWorld);for(var r=0,a=0;r<e.length;r++){var o=e[r];o.parent&&o.parent.isBone&&(nl.multiplyMatrices(il,o.matrixWorld),el.setFromMatrixPosition(nl),i.setXYZ(a,el.x,el.y,el.z),nl.multiplyMatrices(il,o.parent.matrixWorld),el.setFromMatrixPosition(nl),i.setXYZ(a+1,el.x,el.y,el.z),a+=2)}n.getAttribute("position").needsUpdate=!0,q.prototype.updateMatrixWorld.call(this,t)},al.prototype=Object.create(Le.prototype),al.prototype.constructor=al,al.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},al.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},ol.prototype=Object.create(jr.prototype),ol.prototype.constructor=ol,ol.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var t=this.material.color,e=Math.max(t.r,t.g,t.b);e>1&&t.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}},ol.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()};var sl=new u,cl=new Bt,ll=new Bt;function hl(t,e,n){q.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new da(e);i.rotateY(.5*Math.PI),this.material=new kt({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2);var r=i.getAttribute("position"),a=new Float32Array(3*r.count);i.setAttribute("color",new Wt(a,3)),this.add(new Le(i,this.material)),this.update()}function ul(t,e){this.lightProbe=t,this.size=e;var n={GAMMA_OUTPUT:""},i=new Fe({defines:n,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\\tvNormal = normalize( normalMatrix * normal );","\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\\t// matrix is assumed to be orthogonal","\\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\\t#ifdef GAMMA_OUTPUT","\\t\\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\\t#else","\\t\\treturn a;","\\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\\t// normal is assumed to have unit length","\\tfloat x = normal.x, y = normal.y, z = normal.z;","\\t// band 0","\\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\\t// band 1","\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\\t// band 2","\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\\tvec3 normal = normalize( vNormal );","\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\\toutgoingLight = linearToOutput( outgoingLight );","\\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\\n")}),r=new no(1,32,16);Le.call(this,r,i),this.onBeforeRender()}function pl(t,e,n,i){t=t||10,e=e||10,n=new Bt(void 0!==n?n:4473924),i=new Bt(void 0!==i?i:8947848);for(var r=e/2,a=t/e,o=t/2,s=[],c=[],l=0,h=0,u=-o;l<=e;l++,u+=a){s.push(-o,0,u,o,0,u),s.push(u,0,-o,u,0,o);var p=l===r?n:i;p.toArray(c,h),h+=3,p.toArray(c,h),h+=3,p.toArray(c,h),h+=3,p.toArray(c,h),h+=3}var d=new he;d.setAttribute("position",new $t(s,3)),d.setAttribute("color",new $t(c,3));var f=new Br({vertexColors:2});qr.call(this,d,f)}function dl(t,e,n,i,r,a){t=t||10,e=e||16,n=n||8,i=i||64,r=new Bt(void 0!==r?r:4473924),a=new Bt(void 0!==a?a:8947848);var o,s,c,l,h,u,p,d=[],f=[];for(l=0;l<=e;l++)c=l/e*(2*Math.PI),o=Math.sin(c)*t,s=Math.cos(c)*t,d.push(0,0,0),d.push(o,0,s),p=1&l?r:a,f.push(p.r,p.g,p.b),f.push(p.r,p.g,p.b);for(l=0;l<=n;l++)for(p=1&l?r:a,u=t-t/n*l,h=0;h<i;h++)c=h/i*(2*Math.PI),o=Math.sin(c)*u,s=Math.cos(c)*u,d.push(o,0,s),f.push(p.r,p.g,p.b),c=(h+1)/i*(2*Math.PI),o=Math.sin(c)*u,s=Math.cos(c)*u,d.push(o,0,s),f.push(p.r,p.g,p.b);var m=new he;m.setAttribute("position",new $t(d,3)),m.setAttribute("color",new $t(f,3));var v=new Br({vertexColors:2});qr.call(this,m,v)}function fl(t,e,n,i){this.audio=t,this.range=e||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=i||2;var r=new he,a=this.divisionsInnerAngle+2*this.divisionsOuterAngle,o=new Float32Array(3*(3*a+3));r.setAttribute("position",new Wt(o,3));var s=new Br({color:65280}),c=new Br({color:16776960});jr.call(this,r,[c,s]),this.update()}hl.prototype=Object.create(q.prototype),hl.prototype.constructor=hl,hl.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},hl.prototype.update=function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");cl.copy(this.light.color),ll.copy(this.light.groundColor);for(var n=0,i=e.count;n<i;n++){var r=n<i/2?cl:ll;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(sl.setFromMatrixPosition(this.light.matrixWorld).negate())},ul.prototype=Object.create(Le.prototype),ul.prototype.constructor=ul,ul.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},ul.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},pl.prototype=Object.assign(Object.create(qr.prototype),{constructor:pl,copy:function(t){return qr.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),dl.prototype=Object.create(qr.prototype),dl.prototype.constructor=dl,fl.prototype=Object.create(jr.prototype),fl.prototype.constructor=fl,fl.prototype.update=function(){var t,e,n=this.audio,i=this.range,r=this.divisionsInnerAngle,a=this.divisionsOuterAngle,s=o.degToRad(n.panner.coneInnerAngle),c=o.degToRad(n.panner.coneOuterAngle),l=s/2,h=c/2,u=0,p=0,d=this.geometry,f=d.attributes.position;function m(n,r,a,o){var s=(r-n)/a;for(f.setXYZ(u,0,0,0),p++,t=n;t<r;t+=s)e=u+p,f.setXYZ(e,Math.sin(t)*i,0,Math.cos(t)*i),f.setXYZ(e+1,Math.sin(Math.min(t+s,r))*i,0,Math.cos(Math.min(t+s,r))*i),f.setXYZ(e+2,0,0,0),p+=3;d.addGroup(u,p,o),u+=p,p=0}d.clearGroups(),m(-h,-l,a,0),m(-l,l,r,1),m(l,h,a,0),f.needsUpdate=!0,s===c&&(this.material[0].visible=!1)},fl.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()};var ml=new u,vl=new u,gl=new f;function yl(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16776960,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new he,l=new $t(2*o*3,3);c.setAttribute("position",l),qr.call(this,c,new Br({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}yl.prototype=Object.create(qr.prototype),yl.prototype.constructor=yl,yl.prototype.update=function(){this.object.updateMatrixWorld(!0),gl.getNormalMatrix(this.object.matrixWorld);for(var t=this.object.matrixWorld,e=this.geometry.attributes.position,n=this.object.geometry,i=n.vertices,r=n.faces,a=0,o=0,s=r.length;o<s;o++){var c=r[o],l=c.normal;ml.copy(i[c.a]).add(i[c.b]).add(i[c.c]).divideScalar(3).applyMatrix4(t),vl.copy(l).applyMatrix3(gl).normalize().multiplyScalar(this.size).add(ml),e.setXYZ(a,ml.x,ml.y,ml.z),a+=1,e.setXYZ(a,vl.x,vl.y,vl.z),a+=1}e.needsUpdate=!0};var xl=new u,bl=new u,wl=new u;function _l(t,e,n){q.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var i=new he;i.setAttribute("position",new $t([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var r=new Br({fog:!1});this.lightPlane=new jr(i,r),this.add(this.lightPlane),(i=new he).setAttribute("position",new $t([0,0,0,0,0,1],3)),this.targetLine=new jr(i,r),this.add(this.targetLine),this.update()}_l.prototype=Object.create(q.prototype),_l.prototype.constructor=_l,_l.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},_l.prototype.update=function(){xl.setFromMatrixPosition(this.light.matrixWorld),bl.setFromMatrixPosition(this.light.target.matrixWorld),wl.subVectors(bl,xl),this.lightPlane.lookAt(bl),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(bl),this.targetLine.scale.z=wl.length()};var Ml=new u,Sl=new Ge;function Tl(t){var e=new he,n=new Br({color:16777215,vertexColors:1}),i=[],r=[],a={},o=new Bt(16755200),s=new Bt(16711680),c=new Bt(43775),l=new Bt(16777215),h=new Bt(3355443);function u(t,e,n){p(t,n),p(e,n)}function p(t,e){i.push(0,0,0),r.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(i.length/3-1)}u("n1","n2",o),u("n2","n4",o),u("n4","n3",o),u("n3","n1",o),u("f1","f2",o),u("f2","f4",o),u("f4","f3",o),u("f3","f1",o),u("n1","f1",o),u("n2","f2",o),u("n3","f3",o),u("n4","f4",o),u("p","n1",s),u("p","n2",s),u("p","n3",s),u("p","n4",s),u("u1","u2",c),u("u2","u3",c),u("u3","u1",c),u("c","t",l),u("p","c",h),u("cn1","cn2",h),u("cn3","cn4",h),u("cf1","cf2",h),u("cf3","cf4",h),e.setAttribute("position",new $t(i,3)),e.setAttribute("color",new $t(r,3)),qr.call(this,e,n),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function El(t,e,n,i,r,a,o){Ml.set(r,a,o).unproject(i);var s=e[t];if(void 0!==s)for(var c=n.getAttribute("position"),l=0,h=s.length;l<h;l++)c.setXYZ(s[l],Ml.x,Ml.y,Ml.z)}Tl.prototype=Object.create(qr.prototype),Tl.prototype.constructor=Tl,Tl.prototype.update=function(){var t=this.geometry,e=this.pointMap;Sl.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),El("c",e,t,Sl,0,0,-1),El("t",e,t,Sl,0,0,1),El("n1",e,t,Sl,-1,-1,-1),El("n2",e,t,Sl,1,-1,-1),El("n3",e,t,Sl,-1,1,-1),El("n4",e,t,Sl,1,1,-1),El("f1",e,t,Sl,-1,-1,1),El("f2",e,t,Sl,1,-1,1),El("f3",e,t,Sl,-1,1,1),El("f4",e,t,Sl,1,1,1),El("u1",e,t,Sl,.7,1.1,-1),El("u2",e,t,Sl,-.7,1.1,-1),El("u3",e,t,Sl,0,2,-1),El("cf1",e,t,Sl,-1,0,1),El("cf2",e,t,Sl,1,0,1),El("cf3",e,t,Sl,0,-1,1),El("cf4",e,t,Sl,0,1,1),El("cn1",e,t,Sl,-1,0,-1),El("cn2",e,t,Sl,1,0,-1),El("cn3",e,t,Sl,0,-1,-1),El("cn4",e,t,Sl,0,1,-1),t.getAttribute("position").needsUpdate=!0};var Al=new st;function Ll(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new he;r.setIndex(new Wt(n,1)),r.setAttribute("position",new Wt(i,3)),qr.call(this,r,new Br({color:e})),this.matrixAutoUpdate=!1,this.update()}function Pl(t,e){this.type="Box3Helper",this.box=t,e=e||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new he;i.setIndex(new Wt(n,1)),i.setAttribute("position",new $t([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),qr.call(this,i,new Br({color:e})),this.geometry.computeBoundingSphere()}function Rl(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var i=void 0!==n?n:16776960,r=new he;r.setAttribute("position",new $t([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),jr.call(this,r,new Br({color:i}));var a=new he;a.setAttribute("position",new $t([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new Le(a,new kt({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}Ll.prototype=Object.create(qr.prototype),Ll.prototype.constructor=Ll,Ll.prototype.update=function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Al.setFromObject(this.object),!Al.isEmpty()){var e=Al.min,n=Al.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}},Ll.prototype.setFromObject=function(t){return this.object=t,this.update(),this},Ll.prototype.copy=function(t){return qr.prototype.copy.call(this,t),this.object=t.object,this},Ll.prototype.clone=function(){return(new this.constructor).copy(this)},Pl.prototype=Object.create(qr.prototype),Pl.prototype.constructor=Pl,Pl.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),q.prototype.updateMatrixWorld.call(this,t))},Rl.prototype=Object.create(jr.prototype),Rl.prototype.constructor=Rl,Rl.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?1:0,this.lookAt(this.plane.normal),q.prototype.updateMatrixWorld.call(this,t)};var Cl,Ol,Il=new u;function Nl(t,e,n,i,r,a){q.call(this),void 0===t&&(t=new u(0,0,1)),void 0===e&&(e=new u(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===Cl&&((Cl=new he).setAttribute("position",new $t([0,0,0,0,1,0],3)),(Ol=new po(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new jr(Cl,new Br({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Le(Ol,new kt({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,a)}function Dl(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new he;n.setAttribute("position",new $t(e,3)),n.setAttribute("color",new $t([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new Br({vertexColors:2});qr.call(this,n,i)}Nl.prototype=Object.create(q.prototype),Nl.prototype.constructor=Nl,Nl.prototype.setDirection=function(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Il.set(t.z,0,-t.x).normalize();var e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Il,e)}},Nl.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},Nl.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},Nl.prototype.copy=function(t){return q.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},Nl.prototype.clone=function(){return(new this.constructor).copy(this)},Dl.prototype=Object.create(qr.prototype),Dl.prototype.constructor=Dl;function zl(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),us.call(this,t),this.type="catmullrom"}is.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(is.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Ms.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new De,n=0,i=t.length;n<i;n++){var r=t[n];e.vertices.push(new u(r.x,r.y,r.z||0))}return e}}),Object.assign(Ss.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),Object.create(us.prototype),Object.create(us.prototype),zl.prototype=Object.create(us.prototype),Object.assign(zl.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),pl.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},rl.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Yo.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Fs(t)}}),Yo.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(ks.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(jc.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(st.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),qc.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(o,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),o.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),o.ceilPowerOfTwo(t)}}),Object.assign(f.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(L.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new u).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,a)}}),_t.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},c.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(yt.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(It.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(It,{barycoordFromPoint:function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),It.getBarycoord(t,e,n,i,r)},normal:function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),It.getNormal(t,e,n,i)}}),Object.assign(Ts.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Za(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new so(this,t)}}),Object.assign(s.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(u.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(y.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(De.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(q.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(q.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Er.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Rr.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Ar.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(is.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Ve.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Es.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Wt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),Object.assign(Wt.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?35048:35044),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(he.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Wt(arguments[1],arguments[2])))},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)}}),Object.defineProperties(he.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(sr.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),35048===this.usage},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(sr.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?35048:35044),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Ja.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Nc.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(jt.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Bt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(Mo.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Fe.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(rr.prototype,{clearTarget:function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \'OES_texture_float\' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \'OES_texture_half_float\' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \'OES_standard_derivatives\' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \'WEBGL_compressed_texture_s3tc\' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \'WEBGL_compressed_texture_pvrtc\' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \'EXT_blend_minmax\' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \'ANGLE_instanced_arrays\' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(rr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}}}),Object.defineProperties(ji.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(je.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(x.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(nr.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Object.defineProperties(fc.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new ec).load(t,(function(t){e.setBuffer(t)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),bc.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},He.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};m.crossOrigin=void 0,m.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new ns;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},m.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new es;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},m.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},m.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"111"}}));var Bl=new u,Ul=new u,Fl=new u,Gl=new s,Vl=new s,Hl=new s,jl=new u,kl=new u;function Wl(t,e,n,i,r,a,o,c){Bl.fromBufferAttribute(i,a),Ul.fromBufferAttribute(i,o),Fl.fromBufferAttribute(i,c);var l=function(t,e,n,i,r,a,o,s){if(null===(1===e.side?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,2!==e.side,s)))return null;kl.copy(s),kl.applyMatrix4(t.matrixWorld);var c=n.ray.origin.distanceTo(kl);return c<n.near||c>n.far?null:{distance:c,point:kl.clone(),object:t}}(t,t.material,e,n,Bl,Ul,Fl,jl);if(l){r&&(Gl.fromBufferAttribute(r,a),Vl.fromBufferAttribute(r,o),Hl.fromBufferAttribute(r,c),l.uv=It.getUV(jl,Bl,Ul,Fl,Gl,Vl,Hl,new s));var h=new u;l.face=new Vt(a,o,c,It.getNormal(Bl,Ul,Fl,h)),l.faceIndex=a}return l}function ql(t,e,n,i,r,a){const o=3*r,s=e.index.getX(o),c=e.index.getX(o+1),l=e.index.getX(o+2),h=Wl(t,n,i,e.attributes.position,e.attributes.uv,s,c,l);return h?(h.faceIndex=r,a&&a.push(h),h):null}function Xl(t,e){return e.min.x=t[0],e.min.y=t[1],e.min.z=t[2],e.max.x=t[3],e.max.y=t[4],e.max.z=t[5],e}function Yl(t){let e=-1,n=-1/0;for(let i=0;i<3;i++){const r=t[i+3]-t[i];r>n&&(n=r,e=i)}return e}class Zl{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(t,e){let n=1/0,i=-1/0;for(let r=0,a=t.length;r<a;r++){const a=t[r][e];n=Math.min(a,n),i=Math.max(a,i)}this.min=n,this.max=i}setFromPoints(t,e){let n=1/0,i=-1/0;for(let r=0,a=e.length;r<a;r++){const a=e[r],o=t.dot(a);n=Math.min(o,n),i=Math.max(o,i)}this.min=n,this.max=i}isSeparated(t){return this.min>t.max||t.min>this.max}}Zl.prototype.setFromBox=function(){const t=new u;return function(e,n){const i=n.min,r=n.max;let a=1/0,o=-1/0;for(let n=0;n<=1;n++)for(let s=0;s<=1;s++)for(let c=0;c<=1;c++){t.x=i.x*n+r.x*(1-n),t.y=i.y*s+r.y*(1-s),t.z=i.z*c+r.z*(1-c);const l=e.dot(t);a=Math.min(l,a),o=Math.max(l,o)}this.min=a,this.max=o}}();!function(){const t=new Zl}();const Jl=function(){const t=new u,e=new u,n=new u;return function(i,r,a){const o=i.start,s=t,c=r.start,l=e;n.subVectors(o,c),t.subVectors(i.end,r.start),e.subVectors(r.end,r.start);const h=n.dot(l),u=l.dot(s),p=l.dot(l),d=n.dot(s),f=s.dot(s)*p-u*u;let m,v;m=0!==f?(h*u-d*p)/f:0,v=(h+m*u)/p,a.x=m,a.y=v}}(),Ql=function(){const t=new s,e=new u,n=new u;return function(i,r,a,o){Jl(i,r,t);let s=t.x,c=t.y;if(s>=0&&s<=1&&c>=0&&c<=1)return i.at(s,a),void r.at(c,o);if(s>=0&&s<=1)return c<0?r.at(0,o):r.at(1,o),void i.closestPointToPoint(o,!0,a);if(c>=0&&c<=1)return s<0?i.at(0,a):i.at(1,a),void r.closestPointToPoint(a,!0,o);{let t,l;t=s<0?i.start:i.end,l=c<0?r.start:r.end;const h=e,u=n;return i.closestPointToPoint(l,!0,e),r.closestPointToPoint(t,!0,n),h.distanceToSquared(l)<=u.distanceToSquared(t)?(a.copy(h),void o.copy(l)):(a.copy(t),void o.copy(u))}}}(),Kl=function(){const t=new u,e=new u,n=new _t,i=new qc;return function(r,a){const{radius:o,center:s}=r,{a:c,b:l,c:h}=a;i.start=c,i.end=l;if(i.closestPointToPoint(s,!0,t).distanceTo(s)<=o)return!0;i.start=c,i.end=h;if(i.closestPointToPoint(s,!0,t).distanceTo(s)<=o)return!0;i.start=l,i.end=h;if(i.closestPointToPoint(s,!0,t).distanceTo(s)<=o)return!0;const u=a.getPlane(n);if(Math.abs(u.distanceToPoint(s))<=o){const t=u.projectPoint(s,e);if(a.containsPoint(t))return!0}return!1}}();class $l extends It{constructor(...t){super(...t),this.isSeparatingAxisTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new u),this.satBounds=new Array(4).fill().map(()=>new Zl),this.points=[this.a,this.b,this.c],this.sphere=new ht}}$l.prototype.update=function(){const t=new Array(3);return function(){const e=this.a,n=this.b,i=this.c;t[0]=this.a,t[1]=this.b,t[2]=this.c;const r=this.satAxes,a=this.satBounds,o=r[0],s=a[0];this.getNormal(o),s.setFromPoints(o,t);const c=r[1],l=a[1];c.subVectors(e,n),l.setFromPoints(c,t);const h=r[2],u=a[2];h.subVectors(n,i),u.setFromPoints(h,t);const p=r[3],d=a[3];p.subVectors(i,e),d.setFromPoints(p,t),this.sphere.setFromPoints(this.points)}}(),$l.prototype.intersectsTriangle=function(){const t=new $l,e=new Array(3),n=new Array(3),i=new Zl,r=new Zl,a=new u;return function(o){o.isSeparatingAxisTriangle||(t.copy(o),t.update(),o=t);const s=this.satBounds,c=this.satAxes;n[0]=o.a,n[1]=o.b,n[2]=o.c;for(let t=0;t<4;t++){const e=s[t],r=c[t];if(i.setFromPoints(r,n),e.isSeparated(i))return!1}const l=o.satBounds,h=o.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let t=0;t<4;t++){const n=l[t],r=h[t];if(i.setFromPoints(r,e),n.isSeparated(i))return!1}for(let t=0;t<4;t++){const o=c[t];for(let t=0;t<4;t++){const s=h[t];if(a.crossVectors(o,s),i.setFromPoints(a,e),r.setFromPoints(a,n),i.isSeparated(r))return!1}}return!0}}(),$l.prototype.distanceToPoint=function(){const t=new u;return function(e){return this.closestPointToPoint(e,t),e.distanceTo(t)}}(),$l.prototype.distanceToTriangle=function(){const t=new u,e=new u,n=["a","b","c"],i=new qc,r=new qc;return function(a,o=null,s=null){if(this.intersectsTriangle(a))return(o||s)&&(this.getMidpoint(t),a.closestPointToPoint(t,e),this.closestPointToPoint(e,t),o&&o.copy(t),s&&s.copy(e)),0;let c=1/0;for(let e=0;e<3;e++){let i;const r=n[e],l=a[r];this.closestPointToPoint(l,t),i=l.distanceToSquared(t),i<c&&(c=i,o&&o.copy(t),s&&s.copy(l));const h=this[r];a.closestPointToPoint(h,t),i=h.distanceToSquared(t),i<c&&(c=i,o&&o.copy(h),s&&s.copy(t))}for(let l=0;l<3;l++){const h=n[l],u=n[(l+1)%3];i.set(this[h],this[u]);for(let l=0;l<3;l++){const h=n[l],u=n[(l+1)%3];r.set(a[h],a[u]),Ql(i,r,t,e);const p=t.distanceToSquared(e);p<c&&(c=p,o&&o.copy(t),s&&s.copy(e))}}return Math.sqrt(c)}}();class th extends st{constructor(...t){super(...t),this.isOrientedBox=!0,this.matrix=new L,this.invMatrix=new L,this.points=new Array(8).fill().map(()=>new u),this.satAxes=new Array(3).fill().map(()=>new u),this.satBounds=new Array(3).fill().map(()=>new Zl),this.alignedSatBounds=new Array(3).fill().map(()=>new Zl),this.sphere=new ht}set(t,e,n){super.set(t,e),this.matrix=n}copy(t){super.copy(t),this.matrix.copy(t.matrix)}}th.prototype.update=function(){const t=this.matrix,e=this.min,n=this.max,i=this.points;for(let r=0;r<=1;r++)for(let a=0;a<=1;a++)for(let o=0;o<=1;o++){const s=i[1*r|2*a|4*o];s.x=r?n.x:e.x,s.y=a?n.y:e.y,s.z=o?n.z:e.z,s.applyMatrix4(t)}this.sphere.setFromPoints(this.points);const r=this.satBounds,a=this.satAxes,o=i[0];for(let t=0;t<3;t++){const e=a[t],n=r[t],s=i[1<<t];e.subVectors(o,s),n.setFromPoints(e,i)}const s=this.alignedSatBounds;s[0].setFromPointsField(i,"x"),s[1].setFromPointsField(i,"y"),s[2].setFromPointsField(i,"z"),this.invMatrix.getInverse(this.matrix)},th.prototype.intersectsBox=function(){const t=new Zl;return function(e){if(!e.intersectsSphere(this.sphere))return!1;const n=e.min,i=e.max,r=this.satBounds,a=this.satAxes,o=this.alignedSatBounds;if(t.min=n.x,t.max=i.x,o[0].isSeparated(t))return!1;if(t.min=n.y,t.max=i.y,o[1].isSeparated(t))return!1;if(t.min=n.z,t.max=i.z,o[2].isSeparated(t))return!1;for(let n=0;n<3;n++){const i=a[n],o=r[n];if(t.setFromBox(i,e),o.isSeparated(t))return!1}return!0}}(),th.prototype.intersectsTriangle=function(){const t=new $l,e=new Array(3),n=new Zl,i=new Zl,r=new u;return function(a){a.isSeparatingAxisTriangle||(t.copy(a),t.update(),a=t);const o=this.satBounds,s=this.satAxes;e[0]=a.a,e[1]=a.b,e[2]=a.c;for(let t=0;t<3;t++){const i=o[t],r=s[t];if(n.setFromPoints(r,e),i.isSeparated(n))return!1}const c=a.satBounds,l=a.satAxes,h=this.points;for(let t=0;t<3;t++){const e=c[t],i=l[t];if(n.setFromPoints(i,h),e.isSeparated(n))return!1}for(let t=0;t<3;t++){const a=s[t];for(let t=0;t<4;t++){const o=l[t];if(r.crossVectors(a,o),n.setFromPoints(r,e),i.setFromPoints(r,h),n.isSeparated(i))return!1}}return!0}}(),th.prototype.closestPointToPoint=function(t,e){return e.copy(t).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),e},th.prototype.distanceToPoint=function(){const t=new u;return function(e){return this.closestPointToPoint(e,t),e.distanceTo(t)}}(),th.prototype.distanceToBox=function(){const t=["x","y","z"],e=new Array(12).fill().map(()=>new qc),n=new Array(12).fill().map(()=>new qc),i=new u,r=new u;return function(a,o=0,s=null,c=null){if(this.intersectsBox(a))return(s||c)&&(a.getCenter(r),this.closestPointToPoint(r,i),a.closestPointToPoint(i,r),s&&s.copy(i),c&&c.copy(r)),0;const l=o*o,h=a.min,u=a.max,p=this.points;let d=1/0;for(let t=0;t<8;t++){const e=p[t];r.copy(e).clamp(h,u);const n=e.distanceToSquared(r);if(n<d&&(d=n,s&&s.copy(e),c&&c.copy(r),n<l))return Math.sqrt(n)}let f=0;for(let i=0;i<3;i++)for(let r=0;r<=1;r++)for(let a=0;a<=1;a++){const o=(i+1)%3,s=(i+2)%3,c=1<<i|r<<o|a<<s,l=p[r<<o|a<<s],d=p[c];e[f].set(l,d);const m=t[i],v=t[o],g=t[s],y=n[f],x=y.start,b=y.end;x[m]=h[m],x[v]=r?h[v]:u[v],x[g]=a?h[g]:u[v],b[m]=u[m],b[v]=r?h[v]:u[v],b[g]=a?h[g]:u[v],f++}for(let t=0;t<=1;t++)for(let e=0;e<=1;e++)for(let n=0;n<=1;n++){r.x=t?u.x:h.x,r.y=e?u.y:h.y,r.z=n?u.z:h.z,this.closestPointToPoint(r,i);const a=r.distanceToSquared(i);if(a<d&&(d=a,s&&s.copy(i),c&&c.copy(r),a<l))return Math.sqrt(a)}for(let t=0;t<12;t++){const a=e[t];for(let t=0;t<12;t++){const e=n[t];Ql(a,e,i,r);const o=i.distanceToSquared(r);if(o<d&&(d=o,s&&s.copy(i),c&&c.copy(r),o<l))return Math.sqrt(o)}}return Math.sqrt(d)}}();const eh=new st,nh=new u,ih=["x","y","z"];function rh(t,e,n,i){const r=t.a,a=t.b,o=t.c;let s=n.getX(e);r.x=i.getX(s),r.y=i.getY(s),r.z=i.getZ(s),s=n.getX(e+1),a.x=i.getX(s),a.y=i.getY(s),a.z=i.getZ(s),s=n.getX(e+2),o.x=i.getX(s),o.y=i.getY(s),o.z=i.getZ(s)}class ah{constructor(){}intersectRay(t,e){return Xl(this.boundingData,eh),t.intersectBox(eh,e)}raycast(t,e,n,i){this.count?function(t,e,n,i,r,a,o){for(let s=r,c=r+a;s<c;s++)ql(t,e,n,i,s,o)}(t,t.geometry,e,n,this.offset,this.count,i):(this.left.intersectRay(n,nh)&&this.left.raycast(t,e,n,i),this.right.intersectRay(n,nh)&&this.right.raycast(t,e,n,i))}raycastFirst(t,e,n){if(this.count)return function(t,e,n,i,r,a){let o=1/0,s=null;for(let c=r,l=r+a;c<l;c++){const r=ql(t,e,n,i,c);r&&r.distance<o&&(s=r,o=r.distance)}return s}(t,t.geometry,e,n,this.offset,this.count);{const i=this.splitAxis,r=ih[i];let a,o;n.direction[r]>=0?(a=this.left,o=this.right):(a=this.right,o=this.left);const s=a.intersectRay(n,nh)?a.raycastFirst(t,e,n):null;if(s){const t=n.origin[r],e=t-s.point[r],a=t-o.boundingData[i],c=t-o.boundingData[i+3],l=e*e;if(l<=a*a&&l<=c*c)return s}const c=o.intersectRay(n,nh)?o.raycastFirst(t,e,n):null;return s&&c?s.distance<=c.distance?s:c:s||c||null}}}ah.prototype.shapecast=function(){const t=new $l,e=new st,n=new st;return function(i,r,a=null,o=null){if(this.count&&a){const e=i.geometry,n=e.index,r=e.attributes.position,o=this.offset;for(let e=3*o,i=3*(this.count+o);e<i;e+=3)if(rh(t,e,n,r),t.update(),a(t,e,e+1,e+2))return!0;return!1}{const t=this.left,s=this.right;let c,l,h,u,p=t,d=s;if(o&&(h=e,u=n,Xl(p.boundingData,h),Xl(d.boundingData,u),c=o(h),l=o(u),l<c)){p=s,d=t;const e=c;c=l,l=e;const n=h;h=u,u=n}h||(h=e,Xl(p.boundingData,h));if(r(h,!!p.count,c,p)&&p.shapecast(i,r,a,o))return!0;u||(u=n,Xl(d.boundingData,u));return!!(r(u,!!d.count,l,d)&&d.shapecast(i,r,a,o))}}}(),ah.prototype.intersectsGeometry=function(){const t=new $l,e=new $l,n=new Le,i=new L,r=new th,a=new th;return function(o,s,c,l=null){if(null===l&&(s.boundingBox||s.computeBoundingBox(),r.set(s.boundingBox.min,s.boundingBox.max,c),r.update(),l=r),!this.count){const t=this.left,e=this.right;Xl(t.boundingData,eh);if(l.intersectsBox(eh)&&t.intersectsGeometry(o,s,c,l))return!0;Xl(e.boundingData,eh);return!!(l.intersectsBox(eh)&&e.intersectsGeometry(o,s,c,l))}{const r=o.geometry,l=r.index,h=r.attributes.position,u=s.index,p=s.attributes.position,d=this.offset,f=this.count;if(i.getInverse(c),s.boundsTree){Xl(this.boundingData,a),a.matrix.copy(i),a.update(),n.geometry=s;const t=s.boundsTree.shapecast(n,t=>a.intersectsBox(t),(function(t){t.a.applyMatrix4(c),t.b.applyMatrix4(c),t.c.applyMatrix4(c),t.update();for(let n=3*d,i=3*(f+d);n<i;n+=3)if(rh(e,n,l,h),e.update(),t.intersectsTriangle(e))return!0;return!1}));return n.geometry=null,t}for(let n=3*d,r=f+3*d;n<r;n+=3){rh(t,n,l,h),t.a.applyMatrix4(i),t.b.applyMatrix4(i),t.c.applyMatrix4(i),t.update();for(let n=0,i=u.count;n<i;n+=3)if(rh(e,n,u,p),e.update(),t.intersectsTriangle(e))return!0}}}}(),ah.prototype.intersectsBox=function(){const t=new th;return function(e,n,i){return t.set(n.min,n.max,i),t.update(),this.shapecast(e,e=>t.intersectsBox(e),e=>t.intersectsTriangle(e))}}(),ah.prototype.intersectsSphere=function(t,e){return this.shapecast(t,t=>e.intersectsBox(t),t=>Kl(e,t))},ah.prototype.closestPointToPoint=function(){const t=new u;return function(e,n,i=null,r=0,a=1/0){let o=1/0;return this.shapecast(e,(t,e,n)=>n<o&&n<a,e=>{e.closestPointToPoint(n,t);const a=n.distanceTo(t);return a<o&&(i&&i.copy(t),o=a),a<r},t=>t.distanceToPoint(n)),o}}(),ah.prototype.closestPointToGeometry=function(){const t=new $l,e=new th,n=new u,i=new u;return function(r,a,o,s=null,c=null,l=0,h=1/0){a.boundingBox||a.computeBoundingBox(),e.set(a.boundingBox.min,a.boundingBox.max,o),e.update();const u=a.attributes.position,p=a.index;let d,f;s&&(d=n),c&&(f=i);let m=1/0;return this.shapecast(r,(t,e,n)=>n<m&&n<h,e=>{const n=e.sphere;for(let i=0,r=p.count;i<r;i+=3){rh(t,i,p,u),t.a.applyMatrix4(o),t.b.applyMatrix4(o),t.c.applyMatrix4(o),t.sphere.setFromPoints(t.points);const r=t.sphere;if(r.center.distanceTo(n.center)-r.radius-n.radius>m)continue;t.update();const a=e.distanceToTriangle(t,d,f);if(a<m&&(s&&s.copy(d),c&&c.copy(f),m=a),a<l)return!0}return!1},t=>e.distanceToBox(t,Math.min(m,h))),m}}();const oh=["x","y","z"];const sh=new st;class ch{constructor(t,e){if(this.geo=t,this.options=e,this.bounds=function(t){const e=t.attributes.position.array,n=t.index.array,i=n.length/3,r=new Float32Array(6*i);for(let t=0;t<i;t++){const i=3*n[3*t+0],a=3*n[3*t+1],o=3*n[3*t+2];for(let n=0;n<3;n++){const s=e[i+n],c=e[a+n],l=e[o+n],h=Math.min(s,c,l),u=(Math.max(s,c,l)-h)/2;r[6*t+2*n+0]=h+u,r[6*t+2*n+1]=u}}return r}(t),this.sahplanes=null,2===e.strategy){const e=t.index.count/3;this.sahplanes=[new Array(e),new Array(e),new Array(e)];for(let t=0;t<e;t++)for(let e=0;e<3;e++)this.sahplanes[e][t]={p:this.bounds[6*t+2*e],tri:t}}}getAverage(t,e,n){let i=0;const r=this.bounds;for(let a=t,o=t+e;a<o;a++)i+=r[6*a+2*n];return i/e}getBounds(t,e,n){let i=1/0,r=1/0,a=1/0,o=-1/0,s=-1/0,c=-1/0;const l=this.bounds;for(let n=t,h=t+e;n<h;n++){const t=l[6*n+0],e=l[6*n+1];i=Math.min(i,t-e),o=Math.max(o,t+e);const h=l[6*n+2],u=l[6*n+3];r=Math.min(r,h-u),s=Math.max(s,h+u);const p=l[6*n+4],d=l[6*n+5];a=Math.min(a,p-d),c=Math.max(c,p+d)}return n[0]=i,n[1]=r,n[2]=a,n[3]=o,n[4]=s,n[5]=c,n}partition(t,e,n){let i=t,r=t+e-1;const a=n.pos,o=2*n.axis,s=this.geo.index.array,c=this.bounds,l=this.sahplanes;for(;;){for(;i<=r&&c[6*i+o]<a;)i++;for(;i<=r&&c[6*r+o]>=a;)r--;if(!(i<r))return i;for(let t=0;t<3;t++){let e=s[3*i+t];s[3*i+t]=s[3*r+t],s[3*r+t]=e;let n=c[6*i+2*t+0];c[6*i+2*t+0]=c[6*r+2*t+0],c[6*r+2*t+0]=n;let a=c[6*i+2*t+1];c[6*i+2*t+1]=c[6*r+2*t+1],c[6*r+2*t+1]=a}if(l)for(let t=0;t<3;t++){let e=l[t][i];l[t][i]=l[t][r],l[t][r]=e}i++,r--}}getOptimalSplit(t,e,n,i){let r=-1,a=0;if(0===i)r=Yl(t),-1!==r&&(a=(t[r+3]+t[r])/2);else if(1===i)r=Yl(t),-1!==r&&(a=this.getAverage(e,n,r));else if(2===i){const i=3,o=1,s=Xl(t,sh),c=[s.max.x-s.min.x,s.max.y-s.min.y,s.max.z-s.min.z],l=2*(c[0]*c[1]+c[0]*c[2]+c[1]*c[2]),h=[[],[],[]];for(let t=e,i=e+n;t<i;t++)for(let e=0;e<3;e++)h[e].push(this.sahplanes[e][t]);h.forEach(t=>t.sort((t,e)=>t.p-e.p));const u=(t,e,n,r,a)=>i+o*(e/t*n+r/t*a);r=-1;let p=o*n;for(let t=0;t<3;t++){const e=(t+1)%3,i=(t+2)%3,o=s.min[oh[t]],d=s.max[oh[t]],f=h[t];let m=0,v=n;for(let n=0;n<f.length;n++){const s=f[n];m++,v--;const h=s.p-o,g=d-s.p;let y=c[e],x=c[e],b=c[i],w=c[i];const _=u(l,2*(y*b+y*h+b*h),m,2*(x*w+x*g+w*g),v);_<p&&(r=t,a=s.p,p=_)}}}return{axis:r,pos:a}}}class lh{constructor(t,e={}){if(!t.isBufferGeometry)throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t.attributes.position.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the position attribute.");if(t.index&&t.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.");(e=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0},e)).strategy=Math.max(0,Math.min(2,e.strategy)),this._roots=this._buildTree(t,e)}_ensureIndex(t){if(!t.index){const e=t.attributes.position.count,n=new(e>65535?Uint32Array:Uint16Array)(e);t.setIndex(new Wt(n,1));for(let t=0;t<e;t++)n[t]=t}}_getRootIndexRanges(t){if(!t.groups||!t.groups.length)return[{offset:0,count:t.index.count/3}];const e=[],n=new Set;for(const e of t.groups)n.add(e.start),n.add(e.start+e.count);const i=Array.from(n.values()).sort((t,e)=>t-e);for(let t=0;t<i.length-1;t++){const n=i[t],r=i[t+1];e.push({offset:n/3,count:(r-n)/3})}return e}_buildTree(t,e){this._ensureIndex(t);const n=new ch(t,e);let i=!1;const r=(t,a,o,s=0)=>{if(s>=e.maxDepth&&(i=!0),o<=e.maxLeafTris||s>=e.maxDepth)return t.offset=a,t.count=o,t;const c=n.getOptimalSplit(t.boundingData,a,o,e.strategy);if(-1===c.axis)return t.offset=a,t.count=o,t;const l=n.partition(a,o,c);if(l===a||l===a+o)t.offset=a,t.count=o;else{t.splitAxis=c.axis;const e=t.left=new ah,i=a,h=l-a;e.boundingData=n.getBounds(i,h,new Float32Array(6)),r(e,i,h,s+1);const u=t.right=new ah,p=l,d=o-h;u.boundingData=n.getBounds(p,d,new Float32Array(6)),r(u,p,d,s+1)}return t},a=[],o=this._getRootIndexRanges(t);if(1===o.length){const e=new ah,i=o[0];null!=t.boundingBox?e.boundingData=function(t){const e=new Float32Array(6);return e[0]=t.min.x,e[1]=t.min.y,e[2]=t.min.z,e[3]=t.max.x,e[4]=t.max.y,e[5]=t.max.z,e}(t.boundingBox):e.boundingData=n.getBounds(i.offset,i.count,new Float32Array(6)),r(e,i.offset,i.count),a.push(e)}else for(let t of o){const e=new ah;e.boundingData=n.getBounds(t.offset,t.count,new Float32Array(6)),r(e,t.offset,t.count),a.push(e)}if(i&&e.verbose&&(console.warn(`MeshBVH: Max depth of ${e.maxDepth} reached when generating BVH. Consider increasing maxDepth.`),console.warn(this,t)),null==t.boundingBox){const e=new st;t.boundingBox=new st;for(let n of a)t.boundingBox.union(Xl(n.boundingData,e))}return a}raycast(t,e,n,i){for(const r of this._roots)r.raycast(t,e,n,i)}raycastFirst(t,e,n){let i=null;for(const r of this._roots){const a=r.raycastFirst(t,e,n);null!=a&&(null==i||a.distance<i.distance)&&(i=a)}return i}intersectsGeometry(t,e,n){for(const i of this._roots)if(i.intersectsGeometry(t,e,n))return!0;return!1}shapecast(t,e,n=null,i=null){for(const r of this._roots)if(r.shapecast(t,e,n,i))return!0;return!1}intersectsBox(t,e,n){for(const i of this._roots)if(i.intersectsBox(t,e,n))return!0;return!1}intersectsSphere(t,e){for(const n of this._roots)if(n.intersectsSphere(t,e))return!0;return!1}closestPointToGeometry(t,e,n,i,r,a,o){let s=1/0;for(const c of this._roots){const l=c.closestPointToGeometry(t,e,n,i,r,a,o);if(l<s&&(s=l),l<a)return l}return s}distanceToGeometry(t,e,n,i,r){return this.closestPointToGeometry(t,e,n,null,null,i,r)}closestPointToPoint(t,e,n,i,r){let a=1/0;for(const o of this._roots){const s=o.closestPointToPoint(t,e,n,i,r);if(s<a&&(a=s),s<i)return s}return a}distanceToPoint(t,e,n,i){return this.closestPointToPoint(t,e,null,n,i)}}new Br({color:65416,transparent:!0,opacity:.3}),(new Pl).geometry;new st;const hh=new yt,uh=new L,ph=Le.prototype.raycast;function dh(t,e,n){const i=e.boundingData,r=n.triangleThreshold,a=n.minimumVolume,o=n.minimumTriangles,s=(i[3]-i[0])*(i[4]-i[1])*(i[5]-i[2]);return!(s<a)&&(!(t<o)&&t/s>r)}function fh(t,e){if(t.count){return!0===dh(t.count,t,e)||t.count}{const n=fh(t.left,e);if(!0===n)return!0;const i=fh(t.right,e);if(!0===i)return!0;const r=n+i;return!0===dh(r,t,e)||r}}function mh(t,e){t.computeBoundingBox();const n=new u;if(t.boundingBox.getSize(n),t.computeBoundsTree({strategy:1,maxDepth:40}),!function(t,e){const n=t.boundsTree._roots;for(let t=0;t<n.length;++t)if(!0===fh(n[t],e))return!0;return!1}(t,e))return null;const i=new Le(t),r=Math.max(n.x,n.z),a=Object.prototype.hasOwnProperty.call(e,"distance")?e.distance:Math.max(.25,Math.pow(r,.5)/10),o=Math.ceil(r/a),s=[],c=new u;t.boundingBox.getCenter(c);const l=new u(0,-1,0),h=new u,p=new Fc,d=-r/2+c.x,f=-r/2+c.z;let m=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY;for(let t=0;t<o;t++){s[t]=[];for(let n=0;n<o;n++){h.set(d+n*a,e.raycastY,f+t*a),p.set(h,l);const r=[];let o,c;if(i.raycast(p,r),1===r.length)o=r[0];else for(let t=0;t<r.length;t++)(!o||r[t].distance<o.distance)&&r[t].point.y<e.minY+e.agentHeight&&(o=r[t]);!o&&r.length>0&&(o=r[0]),c=o?o.point.y:e.minY,s[t][n]=c,c<m&&(m=s[t][n]),c>v&&(v=s[t][n])}}return 0===s.length?null:(c.y=(v+m)/2,{offset:c,distance:a,data:s,width:r,length:r})}Le.prototype.raycast=function(t,e){if(this.geometry.boundsTree){if(void 0===this.material)return;if(uh.getInverse(this.matrixWorld),hh.copy(t.ray).applyMatrix4(uh),!0===t.firstHitOnly){const n=this.geometry.boundsTree.raycastFirst(this,t,hh);n&&e.push(n)}else this.geometry.boundsTree.raycast(this,t,hh,e)}else ph.call(this,t,e)},he.prototype.computeBoundsTree=function(t){return this.boundsTree=new lh(this,t),this.boundsTree};const vh={raycastY:1e3,minY:0,agentHeight:1.7,triangleThreshold:1e3,minimumVolume:.1,minimumTriangles:100};self.onmessage=async t=>{const e=t.data,n=Object.assign({},vh,e.params||{}),i=new he;i.addAttribute("position",new $t(e.verts,3));const r=mh(i,n);self.postMessage({heightfield:r})}}]);\n//# sourceMappingURL=heightfield.worker-3041b1241578c9896313.js.map',null)}},function(e,t,n){e.exports=n.p+"assets/js/wasm/recast-cdfd36cc3c82e78bb3b253ec10d6b9b4.wasm"},function(e,t,n){e.exports=n.p+"assets/models/TransformGizmo-5661bc18bc9b9fecd7ad49b099a8a1c2.glb"},function(e,t,n){var r;!function(i,o,a){if(i){for(var s,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},c={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},u={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},h={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},d=1;d<20;++d)l[111+d]="f"+d;for(d=0;d<=9;++d)l[d+96]=d.toString();y.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},y.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},y.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},y.prototype.reset=function(){return this._callbacks={},this._directMap={},this},y.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(function e(t,n){return null!==t&&t!==o&&(t===n||e(t.parentNode,n))}(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},y.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},y.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(l[t]=e[t]);s=null},y.init=function(){var e=y(o);for(var t in e)"_"!==t.charAt(0)&&(y[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},y.init(),i.Mousetrap=y,e.exports&&(e.exports=y),void 0===(r=function(){return y}.call(t,n,t,e))||(e.exports=r)}function p(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function f(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return l[e.which]?l[e.which]:c[e.which]?c[e.which]:String.fromCharCode(e.which).toLowerCase()}function m(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function g(e,t,n){return n||(n=function(){if(!s)for(var e in s={},l)e>95&&e<112||l.hasOwnProperty(e)&&(s[l[e]]=e);return s}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function v(e,t){var n,r,i,o=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),i=0;i<n.length;++i)r=n[i],h[r]&&(r=h[r]),t&&"keypress"!=t&&u[r]&&(r=u[r],o.push("shift")),m(r)&&o.push(r);return{key:r,modifiers:o,action:t=g(r,o,t)}}function y(e){var t=this;if(e=e||o,!(t instanceof y))return new y(e);t.target=e,t._callbacks={},t._directMap={};var n,r={},i=!1,a=!1,s=!1;function l(e){e=e||{};var t,n=!1;for(t in r)e[t]?n=!0:r[t]=0;n||(s=!1)}function c(e,n,i,o,a,s){var l,c,u,h,d=[],p=i.type;if(!t._callbacks[e])return[];for("keyup"==p&&m(e)&&(n=[e]),l=0;l<t._callbacks[e].length;++l)if(c=t._callbacks[e][l],(o||!c.seq||r[c.seq]==c.level)&&p==c.action&&("keypress"==p&&!i.metaKey&&!i.ctrlKey||(u=n,h=c.modifiers,u.sort().join(",")===h.sort().join(",")))){var f=!o&&c.combo==a,g=o&&c.seq==o&&c.level==s;(f||g)&&t._callbacks[e].splice(l,1),d.push(c)}return d}function u(e,n,r,i){t.stopCallback(n,n.target||n.srcElement,r,i)||!1===e(n,r)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(n),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(n))}function h(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n=f(e);n&&("keyup"!=e.type||i!==n?t.handleKey(n,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):i=!1)}function d(e,t,o,a){function c(t){return function(){s=t,++r[e],clearTimeout(n),n=setTimeout(l,1e3)}}function h(t){u(o,t,e),"keyup"!==a&&(i=f(t)),setTimeout(l,10)}r[e]=0;for(var d=0;d<t.length;++d){var p=d+1===t.length?h:c(a||v(t[d+1]).action);g(t[d],p,a,e,d)}}function g(e,n,r,i,o){t._directMap[e+":"+r]=n;var a,s=(e=e.replace(/\s+/g," ")).split(" ");s.length>1?d(e,s,n,r):(a=v(e,r),t._callbacks[a.key]=t._callbacks[a.key]||[],c(a.key,a.modifiers,{type:a.action},i,e,o),t._callbacks[a.key][i?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:i,level:o,combo:e}))}t._handleKey=function(e,t,n){var r,i=c(e,t,n),o={},h=0,d=!1;for(r=0;r<i.length;++r)i[r].seq&&(h=Math.max(h,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=h)continue;d=!0,o[i[r].seq]=1,u(i[r].callback,n,i[r].combo,i[r].seq)}else d||u(i[r].callback,n,i[r].combo);var p="keypress"==n.type&&a;n.type!=s||m(e)||p||l(o),a=d&&"keydown"==n.type},t._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)g(e[r],t,n)},p(e,"keypress",h),p(e,"keydown",h),p(e,"keyup",h)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},function(e,t,n){e.exports=n.p+"assets/images/audio-icon-8969e6388ecf8e8e50fcfefbaef2a27c.png"},function(e,t,n){e.exports=n.p+"assets/images/link-icon-33022e4ece55028f7b75d1a8a94a4816.png"},function(e,t,n){"use strict";(function(e,r){var i,o=n(499);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var a=Object(o.a)(i);t.a=a}).call(this,n(38),n(123)(e))},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";(function(e){function r(e){o.length||(i(),!0),o[o.length]=e}n.d(t,"a",(function(){return r}));var i,o=[],a=0;function s(){for(;a<o.length;){var e=a;if(a+=1,o[e].call(),a>1024){for(var t=0,n=o.length-a;t<n;t++)o[t]=o[t+a];o.length-=a,a=0}}o.length=0,a=0,!1}var l,c,u,h=void 0!==e?e:self,d=h.MutationObserver||h.WebKitMutationObserver;function p(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof d?(l=1,c=new d(s),u=document.createTextNode(""),c.observe(u,{characterData:!0}),i=function(){l=-l,u.data=l}):i=p(s),r.requestFlush=i,r.makeRequestCallFromTimer=p}).call(this,n(38))},function(e,t,n){"use strict";(function(e){var r=n(0);function i(t){var n;n="undefined"!=typeof window?window:"undefined"!=typeof self?self:e;var r,i,o="undefined"!=typeof document&&document.attachEvent;if(!o){var a=(i=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||function(e){return n.setTimeout(e,20)},function(e){return i(e)}),s=(r=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.clearTimeout,function(e){return r(e)}),l=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,i=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,i.style.width=n.offsetWidth+1+"px",i.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},c=function(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;l(this),this.__resizeRAF__&&s(this.__resizeRAF__),this.__resizeRAF__=a((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(n){n.call(t,e)})))}))}},u=!1,h="",d="animationstart",p="Webkit Moz O ms".split(" "),f="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m=document.createElement("fakeelement");if(void 0!==m.style.animationName&&(u=!0),!1===u)for(var g=0;g<p.length;g++)if(void 0!==m.style[p[g]+"AnimationName"]){h="-"+p[g].toLowerCase()+"-",d=f[g],u=!0;break}var v="resizeanim",y="@"+h+"keyframes "+v+" { from { opacity: 0; } to { opacity: 0; } } ",_=h+"animation: 1ms "+v+"; "}return{addResizeListener:function(e,r){if(o)e.attachEvent("onresize",r);else{if(!e.__resizeTriggers__){var i=e.ownerDocument,a=n.getComputedStyle(e);a&&"static"==a.position&&(e.style.position="relative"),function(e){if(!e.getElementById("detectElementResize")){var n=(y||"")+".resize-triggers { "+(_||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',r=e.head||e.getElementsByTagName("head")[0],i=e.createElement("style");i.id="detectElementResize",i.type="text/css",null!=t&&i.setAttribute("nonce",t),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(e.createTextNode(n)),r.appendChild(i)}}(i),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=i.createElement("div")).className="resize-triggers",e.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',e.appendChild(e.__resizeTriggers__),l(e),e.addEventListener("scroll",c,!0),d&&(e.__resizeTriggers__.__animationListener__=function(t){t.animationName==v&&l(e)},e.__resizeTriggers__.addEventListener(d,e.__resizeTriggers__.__animationListener__))}e.__resizeListeners__.push(r)}},removeResizeListener:function(e,t){if(o)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",c,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(d,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}var o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},c=function(e){function t(){var e,n,r;o(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={height:r.props.defaultHeight||0,width:r.props.defaultWidth||0},r._onResize=function(){var e=r.props,t=e.disableHeight,n=e.disableWidth,i=e.onResize;if(r._parentNode){var o=r._parentNode.offsetHeight||0,a=r._parentNode.offsetWidth||0,s=window.getComputedStyle(r._parentNode)||{},l=parseInt(s.paddingLeft,10)||0,c=parseInt(s.paddingRight,10)||0,u=parseInt(s.paddingTop,10)||0,h=parseInt(s.paddingBottom,10)||0,d=o-u-h,p=a-l-c;(!t&&r.state.height!==d||!n&&r.state.width!==p)&&(r.setState({height:o-u-h,width:a-l-c}),i({height:o,width:a}))}},r._setRef=function(e){r._autoSizer=e},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=i(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,i=e.disableHeight,o=e.disableWidth,a=e.style,l=this.state,c=l.height,u=l.width,h={overflow:"visible"},d={},p=!1;return i||(0===c&&(p=!0),h.height=0,d.height=c),o||(0===u&&(p=!0),h.width=0,d.width=u),Object(r.createElement)("div",{className:n,ref:this._setRef,style:s({},h,a)},!p&&t(d))}}]),t}(r.PureComponent);c.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}},t.a=c}).call(this,n(38))},function(e,t,n){e.exports={default:n(503),__esModule:!0}},function(e,t,n){n(504),e.exports=n(216).Object.assign},function(e,t,n){var r=n(226);r(r.S+r.F,"Object",{assign:n(506)})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(229),i=n(262),o=n(298),a=n(265),s=n(249),l=n(360),c=Object.assign;e.exports=!c||n(242)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r}))?function(e,t){for(var n=s(e),c=arguments.length,u=1,h=o.f,d=a.f;c>u;)for(var p,f=l(arguments[u++]),m=h?i(f).concat(h(f)):i(f),g=m.length,v=0;g>v;)p=m[v++],r&&!d.call(f,p)||(n[p]=f[p]);return n}:c},function(e,t,n){var r=n(234),i=n(361),o=n(508);e.exports=function(e){return function(t,n,a){var s,l=r(t),c=i(l.length),u=o(a,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n){var r=n(294),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){n(510);var r=n(216).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(226);r(r.S+r.F*!n(229),"Object",{defineProperty:n(228).f})},function(e,t,n){e.exports={default:n(512),__esModule:!0}},function(e,t,n){n(364),n(517),e.exports=n(304).f("iterator")},function(e,t,n){var r=n(294),i=n(293);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),l=r(n),c=s.length;return l<0||l>=c?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(302),i=n(248),o=n(303),a={};n(239)(a,n(220)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(228),i=n(240),o=n(262);e.exports=n(229)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,l=0;s>l;)r.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var r=n(227).document;e.exports=r&&r.documentElement},function(e,t,n){n(518);for(var r=n(227),i=n(239),o=n(250),a=n(220)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var c=s[l],u=r[c],h=u&&u.prototype;h&&!h[a]&&i(h,a,c),o[c]=o.Array}},function(e,t,n){"use strict";var r=n(519),i=n(520),o=n(250),a=n(234);e.exports=n(365)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(522),__esModule:!0}},function(e,t,n){n(523),n(528),n(529),n(530),e.exports=n(216).Symbol},function(e,t,n){"use strict";var r=n(227),i=n(233),o=n(229),a=n(226),s=n(366),l=n(524).KEY,c=n(242),u=n(296),h=n(303),d=n(264),p=n(220),f=n(304),m=n(305),g=n(525),v=n(526),y=n(240),_=n(241),b=n(249),x=n(234),S=n(291),w=n(248),E=n(302),T=n(527),M=n(306),C=n(298),$=n(228),O=n(262),A=M.f,I=$.f,P=T.f,L=r.Symbol,k=r.JSON,R=k&&k.stringify,D=p("_hidden"),j=p("toPrimitive"),N={}.propertyIsEnumerable,F=u("symbol-registry"),U=u("symbols"),B=u("op-symbols"),z=Object.prototype,V="function"==typeof L&&!!C.f,G=r.QObject,H=!G||!G.prototype||!G.prototype.findChild,W=o&&c((function(){return 7!=E(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=A(z,t);r&&delete z[t],I(e,t,n),r&&e!==z&&I(z,t,r)}:I,q=function(e){var t=U[e]=E(L.prototype);return t._k=e,t},J=V&&"symbol"==typeof L.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof L},Y=function(e,t,n){return e===z&&Y(B,t,n),y(e),t=S(t,!0),y(n),i(U,t)?(n.enumerable?(i(e,D)&&e[D][t]&&(e[D][t]=!1),n=E(n,{enumerable:w(0,!1)})):(i(e,D)||I(e,D,w(1,{})),e[D][t]=!0),W(e,t,n)):I(e,t,n)},X=function(e,t){y(e);for(var n,r=g(t=x(t)),i=0,o=r.length;o>i;)Y(e,n=r[i++],t[n]);return e},K=function(e){var t=N.call(this,e=S(e,!0));return!(this===z&&i(U,e)&&!i(B,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,D)&&this[D][e])||t)},Z=function(e,t){if(e=x(e),t=S(t,!0),e!==z||!i(U,t)||i(B,t)){var n=A(e,t);return!n||!i(U,t)||i(e,D)&&e[D][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=P(x(e)),r=[],o=0;n.length>o;)i(U,t=n[o++])||t==D||t==l||r.push(t);return r},ee=function(e){for(var t,n=e===z,r=P(n?B:x(e)),o=[],a=0;r.length>a;)!i(U,t=r[a++])||n&&!i(z,t)||o.push(U[t]);return o};V||(s((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===z&&t.call(B,n),i(this,D)&&i(this[D],e)&&(this[D][e]=!1),W(this,e,w(1,n))};return o&&H&&W(z,e,{configurable:!0,set:t}),q(e)}).prototype,"toString",(function(){return this._k})),M.f=Z,$.f=Y,n(368).f=T.f=Q,n(265).f=K,C.f=ee,o&&!n(263)&&s(z,"propertyIsEnumerable",K,!0),f.f=function(e){return q(p(e))}),a(a.G+a.W+a.F*!V,{Symbol:L});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var re=O(p.store),ie=0;re.length>ie;)m(re[ie++]);a(a.S+a.F*!V,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=L(e)},keyFor:function(e){if(!J(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!V,"Object",{create:function(e,t){return void 0===t?E(e):X(E(e),t)},defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:ee});var oe=c((function(){C.f(1)}));a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return C.f(b(e))}}),k&&a(a.S+a.F*(!V||c((function(){var e=L();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(_(t)||void 0!==e)&&!J(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!J(t))return t}),r[1]=t,R.apply(k,r)}}),L.prototype[j]||n(239)(L.prototype,j,L.prototype.valueOf),h(L,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(e,t,n){var r=n(264)("meta"),i=n(241),o=n(233),a=n(228).f,s=0,l=Object.isExtensible||function(){return!0},c=!n(242)((function(){return l(Object.preventExtensions({}))})),u=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},h=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[r].w},onFreeze:function(e){return c&&h.NEED&&l(e)&&!o(e,r)&&u(e),e}}},function(e,t,n){var r=n(262),i=n(298),o=n(265);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),l=o.f,c=0;s.length>c;)l.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(292);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(234),i=n(368).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},function(e,t){},function(e,t,n){n(305)("asyncIterator")},function(e,t,n){n(305)("observable")},function(e,t,n){e.exports={default:n(532),__esModule:!0}},function(e,t,n){n(533),e.exports=n(216).Object.setPrototypeOf},function(e,t,n){var r=n(226);r(r.S,"Object",{setPrototypeOf:n(534).set})},function(e,t,n){var r=n(241),i=n(240),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(290)(Function.call,n(306).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(536),__esModule:!0}},function(e,t,n){n(537);var r=n(216).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(226);r(r.S,"Object",{create:n(302)})},function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(539)),i=o(n(542));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t,n,o){null===t&&(t=Function.prototype);var a=(0,i.default)(t,n);if(void 0===a){var s=(0,r.default)(t);return null===s?void 0:e(s,n,o)}if("value"in a)return a.value;var l=a.get;return void 0!==l?l.call(o):void 0}},function(e,t,n){e.exports={default:n(540),__esModule:!0}},function(e,t,n){n(541),e.exports=n(216).Object.getPrototypeOf},function(e,t,n){var r=n(249),i=n(367);n(370)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},function(e,t,n){e.exports={default:n(543),__esModule:!0}},function(e,t,n){n(544);var r=n(216).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},function(e,t,n){var r=n(234),i=n(306).f;n(370)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(r(e),t)}}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){function i(t){var r=new o.default(t);n.call(e,r)}if(e.addEventListener){var a=(s=!1,"object"==typeof r?s=r.capture||!1:"boolean"==typeof r&&(s=r),e.addEventListener(t,i,r||!1),{v:{remove:function(){e.removeEventListener(t,i,s)}}});if("object"==typeof a)return a.v}else if(e.attachEvent)return e.attachEvent("on"+t,i),{remove:function(){e.detachEvent("on"+t,i)}};var s};var r,i=n(546),o=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(547)),o=r(n(14)),a=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"];function s(e){return null==e}var l=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(e,t){s(e.which)&&(e.which=s(t.charCode)?t.keyCode:t.charCode),void 0===e.metaKey&&(e.metaKey=e.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(e,t){var n=void 0,r=void 0,i=void 0,o=t.wheelDelta,a=t.axis,s=t.wheelDeltaY,l=t.wheelDeltaX,c=t.detail;o&&(i=o/120),c&&(i=0-(c%3==0?c/3:c)),void 0!==a&&(a===e.HORIZONTAL_AXIS?(r=0,n=0-i):a===e.VERTICAL_AXIS&&(n=0,r=i)),void 0!==s&&(r=s/120),void 0!==l&&(n=-1*l/120),n||r||(r=i),void 0!==n&&(e.deltaX=n),void 0!==r&&(e.deltaY=r),void 0!==i&&(e.delta=i)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(e,t){var n=void 0,r=void 0,i=void 0,o=e.target,a=t.button;return o&&s(e.pageX)&&!s(t.clientX)&&(r=(n=o.ownerDocument||document).documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===o?e.toElement:e.fromElement),e}}];function c(){return!0}function u(){return!1}function h(e){var t=e.type,n="function"==typeof e.stopPropagation||"boolean"==typeof e.cancelBubble;i.default.call(this),this.nativeEvent=e;var r=u;"defaultPrevented"in e?r=e.defaultPrevented?c:u:"getPreventDefault"in e?r=e.getPreventDefault()?c:u:"returnValue"in e&&(r=!1===e.returnValue?c:u),this.isDefaultPrevented=r;var o=[],s=void 0,h=void 0,d=a.concat();for(l.forEach((function(e){t.match(e.reg)&&(d=d.concat(e.props),e.fix&&o.push(e.fix))})),s=d.length;s;)this[h=d[--s]]=e[h];for(!this.target&&n&&(this.target=e.srcElement||document),this.target&&3===this.target.nodeType&&(this.target=this.target.parentNode),s=o.length;s;)(0,o[--s])(this,e);this.timeStamp=e.timeStamp||Date.now()}var d=i.default.prototype;(0,o.default)(h.prototype,d,{constructor:h,preventDefault:function(){var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,d.preventDefault.call(this)},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,d.stopPropagation.call(this)}}),t.default=h,e.exports=t.default},function(e,t,n){"use strict";function r(){return!1}function i(){return!0}function o(){this.timeStamp=Date.now(),this.target=void 0,this.currentTarget=void 0}Object.defineProperty(t,"__esModule",{value:!0}),o.prototype={isEventObject:1,constructor:o,isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r,preventDefault:function(){this.isDefaultPrevented=i},stopPropagation:function(){this.isPropagationStopped=i},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},t.default=o,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(549),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,o.default)(e)}},function(e,t,n){e.exports={default:n(550),__esModule:!0}},function(e,t,n){n(364),n(551),e.exports=n(216).Array.from},function(e,t,n){"use strict";var r=n(290),i=n(226),o=n(249),a=n(552),s=n(553),l=n(361),c=n(554),u=n(555);i(i.S+i.F*!n(557)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,h,d=o(e),p="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,v=0,y=u(d);if(g&&(m=r(m,f>2?arguments[2]:void 0,2)),null==y||p==Array&&s(y))for(n=new p(t=l(d.length));t>v;v++)c(n,v,g?m(d[v],v):d[v]);else for(h=y.call(d),n=new p;!(i=h.next()).done;v++)c(n,v,g?a(h,m,[i.value,v],!0):i.value);return n.length=v,n}})},function(e,t,n){var r=n(240);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(250),i=n(220)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(228),i=n(248);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(556),i=n(220)("iterator"),o=n(250);e.exports=n(216).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(292),i=n(220)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(220)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=n(559),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sketch=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=h(n(0)),o=h(n(1)),a=h(n(221)),s=h(n(399)),l=n(328),c=h(n(671)),u=h(n(672));function h(e){return e&&e.__esModule?e:{default:e}}var d=t.Sketch=function(e){var t=e.width,n=e.rgb,o=e.hex,h=e.hsv,d=e.hsl,p=e.onChange,f=e.onSwatchHover,m=e.disableAlpha,g=e.presetColors,v=e.renderers,y=e.styles,_=void 0===y?{}:y,b=e.className,x=void 0===b?"":b,S=(0,a.default)((0,s.default)({default:r({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},_),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},_),{disableAlpha:m});return i.default.createElement("div",{style:S.picker,className:"sketch-picker "+x},i.default.createElement("div",{style:S.saturation},i.default.createElement(l.Saturation,{style:S.Saturation,hsl:d,hsv:h,onChange:p})),i.default.createElement("div",{style:S.controls,className:"flexbox-fix"},i.default.createElement("div",{style:S.sliders},i.default.createElement("div",{style:S.hue},i.default.createElement(l.Hue,{style:S.Hue,hsl:d,onChange:p})),i.default.createElement("div",{style:S.alpha},i.default.createElement(l.Alpha,{style:S.Alpha,rgb:n,hsl:d,renderers:v,onChange:p}))),i.default.createElement("div",{style:S.color},i.default.createElement(l.Checkboard,null),i.default.createElement("div",{style:S.activeColor}))),i.default.createElement(c.default,{rgb:n,hsl:d,hex:o,onChange:p,disableAlpha:m}),i.default.createElement(u.default,{colors:g,onClick:p,onSwatchHover:f}))};d.propTypes={disableAlpha:o.default.bool,width:o.default.oneOfType([o.default.string,o.default.number]),styles:o.default.object},d.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},t.default=(0,l.ColorWrap)(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var r=s(n(266)),i=s(n(308)),o=s(n(315)),a=s(n(376));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,a.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return n.push(e)})):(0,o.default)(t)?(0,i.default)(t,(function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)})):(0,r.default)(t)&&n.push(t)})),n};t.default=l},function(e,t,n){var r=n(243),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t){e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(230),i=n(218);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(230),i=n(312),o=n(218),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},function(e,t,n){var r=n(314),i=n(569),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(374)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(571),i=n(607),o=n(387);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(269),i=n(319);e.exports=function(e,t,n,o){var a=n.length,s=a,l=!o;if(null==e)return!s;for(e=Object(e);a--;){var c=n[a];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<s;){var u=(c=n[a])[0],h=e[u],d=c[1];if(l&&c[2]){if(void 0===h&&!(u in e))return!1}else{var p=new r;if(o)var f=o(h,d,u,e,t,p);if(!(void 0===f?i(d,h,3,o,p):f))return!1}}return!0}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(271),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},function(e,t,n){var r=n(271);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(271);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(271);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},function(e,t,n){var r=n(270);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(270),i=n(317),o=n(318);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(213),i=n(583),o=n(214),a=n(377),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,d=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?d:s).test(a(e))}},function(e,t,n){var r,i=n(584),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},function(e,t,n){var r=n(217)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(587),i=n(270),o=n(317);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(e,t,n){var r=n(588),i=n(589),o=n(590),a=n(591),s=n(592);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},function(e,t,n){var r=n(272);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(272),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(272),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},function(e,t,n){var r=n(272);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(273);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(273);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(273);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(273);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},function(e,t,n){var r=n(269),i=n(378),o=n(601),a=n(603),s=n(274),l=n(212),c=n(268),u=n(311),h="[object Object]",d=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,p,f,m){var g=l(e),v=l(t),y=g?"[object Array]":s(e),_=v?"[object Array]":s(t),b=(y="[object Arguments]"==y?h:y)==h,x=(_="[object Arguments]"==_?h:_)==h,S=y==_;if(S&&c(e)){if(!c(t))return!1;g=!0,b=!1}if(S&&!b)return m||(m=new r),g||u(e)?i(e,t,n,p,f,m):o(e,t,y,n,p,f,m);if(!(1&n)){var w=b&&d.call(e,"__wrapped__"),E=x&&d.call(t,"__wrapped__");if(w||E){var T=w?e.value():e,M=E?t.value():t;return m||(m=new r),f(T,M,n,p,m)}}return!!S&&(m||(m=new r),a(e,t,n,p,f,m))}},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(243),i=n(380),o=n(254),a=n(378),s=n(602),l=n(322),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,h,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=s;case"[object Set]":var f=1&r;if(p||(p=l),e.size!=t.size&&!f)return!1;var m=d.get(e);if(m)return m==t;r|=2,d.set(e,t);var g=a(p(e),p(t),r,c,h,d);return d.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t,n){var r=n(381),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,s){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var h=u;h--;){var d=c[h];if(!(l?d in t:i.call(t,d)))return!1}var p=s.get(e);if(p&&s.get(t))return p==t;var f=!0;s.set(e,t),s.set(t,e);for(var m=l;++h<u;){var g=e[d=c[h]],v=t[d];if(o)var y=l?o(v,g,d,t,e,s):o(g,v,d,e,t,s);if(!(void 0===y?g===v||a(g,v,n,o,s):y)){f=!1;break}m||(m="constructor"==d)}if(f&&!m){var _=e.constructor,b=t.constructor;_==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(f=!1)}return s.delete(e),s.delete(t),f}},function(e,t,n){var r=n(237)(n(217),"DataView");e.exports=r},function(e,t,n){var r=n(237)(n(217),"Promise");e.exports=r},function(e,t,n){var r=n(237)(n(217),"WeakMap");e.exports=r},function(e,t,n){var r=n(386),i=n(244);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},function(e,t,n){var r=n(319),i=n(275),o=n(614),a=n(325),s=n(386),l=n(387),c=n(276);e.exports=function(e,t){return a(e)&&s(t)?l(c(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,3)}}},function(e,t,n){var r=n(610),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},function(e,t,n){var r=n(611);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},function(e,t,n){var r=n(318);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},function(e,t,n){var r=n(613);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(243),i=n(253),o=n(212),a=n(245),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},function(e,t,n){var r=n(615),i=n(616);e.exports=function(e,t){return null!=e&&i(e,t,r)}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(389),i=n(267),o=n(212),a=n(310),s=n(312),l=n(276);e.exports=function(e,t,n){for(var c=-1,u=(t=r(t,e)).length,h=!1;++c<u;){var d=l(t[c]);if(!(h=null!=e&&n(e,d)))break;e=e[d]}return h||++c!=u?h:!!(u=null==e?0:e.length)&&s(u)&&a(d,u)&&(o(e)||i(e))}},function(e,t,n){var r=n(618),i=n(619),o=n(325),a=n(276);e.exports=function(e){return o(e)?r(a(e)):i(e)}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,n){var r=n(388);e.exports=function(e){return function(t){return r(t,e)}}},function(e,t,n){var r=n(235);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var r=a(n(308)),i=a(n(622)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e){return e&&e.__esModule?e:{default:e}}var s=t.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,i.default)(e.default)||{};return t.map((function(t){var i=e[t];return i&&(0,r.default)(i,(function(e,t){n[t]||(n[t]={}),n[t]=o({},n[t],i[t])})),t})),n};t.default=s},function(e,t,n){var r=n(623);e.exports=function(e){return r(e,5)}},function(e,t,n){var r=n(269),i=n(391),o=n(392),a=n(624),s=n(625),l=n(394),c=n(395),u=n(628),h=n(629),d=n(381),p=n(630),f=n(274),m=n(631),g=n(632),v=n(398),y=n(212),_=n(268),b=n(637),x=n(214),S=n(639),w=n(244),E={};E["[object Arguments]"]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E["[object Object]"]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E["[object Function]"]=E["[object WeakMap]"]=!1,e.exports=function e(t,n,T,M,C,$){var O,A=1&n,I=2&n,P=4&n;if(T&&(O=C?T(t,M,C,$):T(t)),void 0!==O)return O;if(!x(t))return t;var L=y(t);if(L){if(O=m(t),!A)return c(t,O)}else{var k=f(t),R="[object Function]"==k||"[object GeneratorFunction]"==k;if(_(t))return l(t,A);if("[object Object]"==k||"[object Arguments]"==k||R&&!C){if(O=I||R?{}:v(t),!A)return I?h(t,s(O,t)):u(t,a(O,t))}else{if(!E[k])return C?t:{};O=g(t,k,A)}}$||($=new r);var D=$.get(t);if(D)return D;$.set(t,O),S(t)?t.forEach((function(r){O.add(e(r,n,T,r,t,$))})):b(t)&&t.forEach((function(r,i){O.set(i,e(r,n,T,i,t,$))}));var j=P?I?p:d:I?keysIn:w,N=L?void 0:j(t);return i(N||t,(function(r,i){N&&(r=t[i=r]),o(O,i,e(r,n,T,i,t,$))})),O}},function(e,t,n){var r=n(256),i=n(244);e.exports=function(e,t){return e&&r(t,i(t),e)}},function(e,t,n){var r=n(256),i=n(278);e.exports=function(e,t){return e&&r(t,i(t),e)}},function(e,t,n){var r=n(214),i=n(314),o=n(627),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(256),i=n(324);e.exports=function(e,t){return r(e,i(e),t)}},function(e,t,n){var r=n(256),i=n(396);e.exports=function(e,t){return r(e,i(e),t)}},function(e,t,n){var r=n(382),i=n(396),o=n(278);e.exports=function(e){return r(e,o,i)}},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},function(e,t,n){var r=n(326),i=n(633),o=n(634),a=n(635),s=n(397);e.exports=function(e,t,n){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return i(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return o(e);case"[object Set]":return new l;case"[object Symbol]":return a(e)}}},function(e,t,n){var r=n(326);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(243),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},function(e,t,n){var r=n(214),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},function(e,t,n){var r=n(638),i=n(252),o=n(313),a=o&&o.isMap,s=a?i(a):r;e.exports=s},function(e,t,n){var r=n(274),i=n(218);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},function(e,t,n){var r=n(640),i=n(252),o=n(313),a=o&&o.isSet,s=a?i(a):r;e.exports=s},function(e,t,n){var r=n(274),i=n(218);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var r,i=n(308),o=(r=i)&&r.__esModule?r:{default:r},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var s={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var n=t[e];return n||{extend:e}}},l=t.autoprefix=function(e){var t={};return(0,o.default)(e,(function(e,n){var r={};(0,o.default)(e,(function(e,t){var n=s[t];n?r=a({},r,n(e)):r[t]=e})),t[n]=r})),t};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),a=(r=o)&&r.__esModule?r:{default:r};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,o,c;s(this,r);for(var u=arguments.length,h=Array(u),d=0;d<u;d++)h[d]=arguments[d];return o=c=l(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(h))),c.state={hover:!1},c.handleMouseOver=function(){return c.setState({hover:!0})},c.handleMouseOut=function(){return c.setState({hover:!1})},c.render=function(){return a.default.createElement(t,{onMouseOver:c.handleMouseOver,onMouseOut:c.handleMouseOut},a.default.createElement(e,i({},c.props,c.state)))},l(c,o)}return c(r,n),r}(a.default.Component)};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),a=(r=o)&&r.__esModule?r:{default:r};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=t.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,o,c;s(this,r);for(var u=arguments.length,h=Array(u),d=0;d<u;d++)h[d]=arguments[d];return o=c=l(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(h))),c.state={active:!1},c.handleMouseDown=function(){return c.setState({active:!0})},c.handleMouseUp=function(){return c.setState({active:!1})},c.render=function(){return a.default.createElement(t,{onMouseDown:c.handleMouseDown,onMouseUp:c.handleMouseUp},a.default.createElement(e,i({},c.props,c.state)))},l(c,o)}return c(r,n),r}(a.default.Component)};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2==0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n}},function(e,t,n){var r=n(269),i=n(400),o=n(372),a=n(646),s=n(214),l=n(278),c=n(402);e.exports=function e(t,n,u,h,d){t!==n&&o(n,(function(o,l){if(d||(d=new r),s(o))a(t,n,l,u,e,h,d);else{var p=h?h(c(t,l),o,l+"",t,n,d):void 0;void 0===p&&(p=o),i(t,l,p)}}),l)}},function(e,t,n){var r=n(400),i=n(394),o=n(397),a=n(395),s=n(398),l=n(267),c=n(212),u=n(401),h=n(268),d=n(213),p=n(214),f=n(315),m=n(311),g=n(402),v=n(647);e.exports=function(e,t,n,y,_,b,x){var S=g(e,n),w=g(t,n),E=x.get(w);if(E)r(e,n,E);else{var T=b?b(S,w,n+"",e,t,x):void 0,M=void 0===T;if(M){var C=c(w),$=!C&&h(w),O=!C&&!$&&m(w);T=w,C||$||O?c(S)?T=S:u(S)?T=a(S):$?(M=!1,T=i(w,!0)):O?(M=!1,T=o(w,!0)):T=[]:f(w)||l(w)?(T=S,l(S)?T=v(S):p(S)&&!d(S)||(T=s(w))):M=!1}M&&(x.set(w,T),_(T,w,y,b,x),x.delete(w)),r(e,n,T)}}},function(e,t,n){var r=n(256),i=n(278);e.exports=function(e){return r(e,i(e))}},function(e,t,n){var r=n(327),i=n(257);e.exports=function(e){return r((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var l=n[r];l&&e(t,l,r,a)}return t}))}},function(e,t,n){var r=n(650),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),l=Array(s);++a<s;)l[a]=o[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=o[a];return c[t]=n(l),r(e,this,c)}}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(652),i=n(654)(r);e.exports=i},function(e,t,n){var r=n(653),i=n(393),o=n(236),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var i=n(),o=16-(i-r);if(r=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Alpha=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=u(o),s=u(n(221)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(656)),c=u(n(329));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=t.Alpha=function(e){function t(){var e,n,r;h(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleChange=function(e){var t=l.calculateChange(e,r.props.hsl,r.props.direction,r.props.a,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=(0,s.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:r({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return a.default.createElement("div",{style:n.alpha},a.default.createElement("div",{style:n.checkboard},a.default.createElement(c.default,{renderers:this.props.renderers})),a.default.createElement("div",{style:n.gradient}),a.default.createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.default.createElement("div",{style:n.pointer},this.props.pointer?a.default.createElement(this.props.pointer,this.props):a.default.createElement("div",{style:n.slider}))))}}]),t}(o.PureComponent||o.Component);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,r,i){var o=i.clientWidth,a=i.clientHeight,s="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=s-(i.getBoundingClientRect().left+window.pageXOffset),u=l-(i.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var h=void 0;if(h=u<0?0:u>a?1:Math.round(100*u/a)/100,t.a!==h)return{h:t.h,s:t.s,l:t.l,a:h,source:"rgb"}}else{var d=void 0;if(r!==(d=c<0?0:c>o?1:Math.round(100*c/o)/100))return{h:t.h,s:t.s,l:t.l,a:d,source:"rgb"}}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={},i=t.render=function(e,t,n,r){if("undefined"==typeof document&&!r)return null;var i=r?new r:document.createElement("canvas");i.width=2*n,i.height=2*n;var o=i.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,i.width,i.height),o.fillStyle=t,o.fillRect(0,0,n,n),o.translate(n,n),o.fillRect(0,0,n,n),i.toDataURL()):null};t.get=function(e,t,n,o){var a=e+"-"+t+"-"+n+(o?"-server":"");if(r[a])return r[a];var s=i(e,t,n,o);return r[a]=s,s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableInput=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=s(i),a=s(n(221));function s(e){return e&&e.__esModule?e:{default:e}}var l=[38,40],c=t.EditableInput=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.setUpdatedValue(e.target.value,e)},n.handleKeyDown=function(e){var t,r=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(r)&&(t=e.keyCode,l.indexOf(t)>-1)){var i=n.getArrowOffset(),o=38===e.keyCode?r+i:r-i;n.setUpdatedValue(o,e)}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidUpdate",value:function(e,t){this.props.value===this.state.value||e.value===this.props.value&&t.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var n=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=(0,a.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return o.default.createElement("div",{style:t.wrap},o.default.createElement("input",{style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?o.default.createElement("span",{style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(i.PureComponent||i.Component);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hue=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=l(i),a=l(n(221)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(660));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=t.Hue=function(e){function t(){var e,n,r;c(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleChange=function(e){var t=s.calculateChange(e,r.props.direction,r.props.hsl,r.container);t&&"function"==typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=(0,a.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return o.default.createElement("div",{style:r.hue},o.default.createElement("div",{className:"hue-"+n,style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.default.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),o.default.createElement("div",{style:r.pointer},this.props.pointer?o.default.createElement(this.props.pointer,this.props):o.default.createElement("div",{style:r.slider}))))}}]),t}(i.PureComponent||i.Component);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n,r){var i=r.clientWidth,o=r.clientHeight,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(r.getBoundingClientRect().left+window.pageXOffset),c=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var u=void 0;if(c<0)u=359;else if(c>o)u=0;else{u=360*(-100*c/o+100)/100}if(n.h!==u)return{h:u,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var h=void 0;if(l<0)h=0;else if(l>i)h=359;else{h=360*(100*l/i)/100}if(n.h!==h)return{h:h,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Raised=void 0;var r=s(n(0)),i=s(n(1)),o=s(n(221)),a=s(n(399));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.Raised=function(e){var t=e.zDepth,n=e.radius,i=e.background,s=e.children,l=e.styles,c=void 0===l?{}:l,u=(0,o.default)((0,a.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},c),{"zDepth-1":1===t});return r.default.createElement("div",{style:u.wrap},r.default.createElement("div",{style:u.bg}),r.default.createElement("div",{style:u.content},s))};l.propTypes={background:i.default.string,zDepth:i.default.oneOf([0,1,2,3,4,5]),radius:i.default.number,styles:i.default.object},l.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Saturation=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=c(i),a=c(n(221)),s=c(n(403)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(664));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.Saturation=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){"function"==typeof n.props.onChange&&n.throttle(n.props.onChange,l.calculateChange(e,n.props.hsl,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=(0,s.default)((function(e,t,n){e(t,n)}),50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,i=t.black,s=t.pointer,l=t.circle,c=(0,a.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:i,pointer:s,circle:l}},{custom:!!this.props.style});return o.default.createElement("div",{style:c.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.default.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),o.default.createElement("div",{style:c.white,className:"saturation-white"},o.default.createElement("div",{style:c.black,className:"saturation-black"}),o.default.createElement("div",{style:c.pointer},this.props.pointer?o.default.createElement(this.props.pointer,this.props):o.default.createElement("div",{style:c.circle}))))}}]),t}(i.PureComponent||i.Component);t.default=u},function(e,t,n){var r=n(217);e.exports=function(){return r.Date.now()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.calculateChange=function(e,t,n){var r=n.getBoundingClientRect(),i=r.width,o=r.height,a="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(n.getBoundingClientRect().left+window.pageXOffset),c=s-(n.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>i&&(l=i),c<0?c=0:c>o&&(c=o);var u=l/i,h=1-c/o;return{h:t.h,s:u,v:h,a:t.a,source:"hsv"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorWrap=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=c(o),s=c(n(404)),l=c(n(406));function c(e){return e&&e.__esModule?e:{default:e}}var u=t.ColorWrap=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(l.default.simpleCheckForValidColor(e)){var r=l.default.toState(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(l.default.simpleCheckForValidColor(e)){var r=l.default.toState(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=r({},l.default.toState(e.color,0)),t.debounce=(0,s.default)((function(e,t,n){e(t,n)}),100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),i(n,[{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),a.default.createElement(e,r({},this.props,this.state,{onChange:this.handleChange},t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return r({},l.default.toState(e.color,t.oldHue))}}]),n}(o.PureComponent||o.Component);return t.propTypes=r({},e.propTypes),t.defaultProps=r({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t};t.default=u},function(e,t,n){e.exports=n(667)},function(e,t,n){var r=n(391),i=n(255),o=n(375),a=n(212);e.exports=function(e,t){return(a(e)?r:i)(e,o(t))}},function(e,t,n){var r;!function(i){var o=/^\s+/,a=/\s+$/,s=0,l=i.round,c=i.min,u=i.max,h=i.random;function d(e,t){if(t=t||{},(e=e||"")instanceof d)return e;if(!(this instanceof d))return new d(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,s=null,l=null,h=!1,d=!1;"string"==typeof e&&(e=function(e){e=e.replace(o,"").replace(a,"").toLowerCase();var t,n=!1;if(A[e])e=A[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=V.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=V.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=V.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=V.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=V.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=V.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=V.hex8.exec(e))return{r:R(t[1]),g:R(t[2]),b:R(t[3]),a:F(t[4]),format:n?"name":"hex8"};if(t=V.hex6.exec(e))return{r:R(t[1]),g:R(t[2]),b:R(t[3]),format:n?"name":"hex"};if(t=V.hex4.exec(e))return{r:R(t[1]+""+t[1]),g:R(t[2]+""+t[2]),b:R(t[3]+""+t[3]),a:F(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=V.hex3.exec(e))return{r:R(t[1]+""+t[1]),g:R(t[2]+""+t[2]),b:R(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(G(e.r)&&G(e.g)&&G(e.b)?(p=e.r,f=e.g,m=e.b,t={r:255*L(p,255),g:255*L(f,255),b:255*L(m,255)},h=!0,d="%"===String(e.r).substr(-1)?"prgb":"rgb"):G(e.h)&&G(e.s)&&G(e.v)?(r=j(e.s),s=j(e.v),t=function(e,t,n){e=6*L(e,360),t=L(t,100),n=L(n,100);var r=i.floor(e),o=e-r,a=n*(1-t),s=n*(1-o*t),l=n*(1-(1-o)*t),c=r%6;return{r:255*[n,s,a,a,l,n][c],g:255*[l,n,n,s,a,a][c],b:255*[a,a,l,n,n,s][c]}}(e.h,r,s),h=!0,d="hsv"):G(e.h)&&G(e.s)&&G(e.l)&&(r=j(e.s),l=j(e.l),t=function(e,t,n){var r,i,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=L(e,360),t=L(t,100),n=L(n,100),0===t)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),i=a(l,s,e),o=a(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,r,l),h=!0,d="hsl"),e.hasOwnProperty("a")&&(n=e.a));var p,f,m;return n=P(n),{ok:h,format:e.format||d,r:c(255,u(t.r,0)),g:c(255,u(t.g,0)),b:c(255,u(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=l(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=n.ok,this._tc_id=s++}function p(e,t,n){e=L(e,255),t=L(t,255),n=L(n,255);var r,i,o=u(e,t,n),a=c(e,t,n),s=(o+a)/2;if(o==a)r=i=0;else{var l=o-a;switch(i=s>.5?l/(2-o-a):l/(o+a),o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:s}}function f(e,t,n){e=L(e,255),t=L(t,255),n=L(n,255);var r,i,o=u(e,t,n),a=c(e,t,n),s=o,l=o-a;if(i=0===o?0:l/o,o==a)r=0;else{switch(o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:s}}function m(e,t,n,r){var i=[D(l(e).toString(16)),D(l(t).toString(16)),D(l(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function g(e,t,n,r){return[D(N(r)),D(l(e).toString(16)),D(l(t).toString(16)),D(l(n).toString(16))].join("")}function v(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.s-=t/100,n.s=k(n.s),d(n)}function y(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.s+=t/100,n.s=k(n.s),d(n)}function _(e){return d(e).desaturate(100)}function b(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.l+=t/100,n.l=k(n.l),d(n)}function x(e,t){t=0===t?0:t||10;var n=d(e).toRgb();return n.r=u(0,c(255,n.r-l(-t/100*255))),n.g=u(0,c(255,n.g-l(-t/100*255))),n.b=u(0,c(255,n.b-l(-t/100*255))),d(n)}function S(e,t){t=0===t?0:t||10;var n=d(e).toHsl();return n.l-=t/100,n.l=k(n.l),d(n)}function w(e,t){var n=d(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,d(n)}function E(e){var t=d(e).toHsl();return t.h=(t.h+180)%360,d(t)}function T(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+120)%360,s:t.s,l:t.l}),d({h:(n+240)%360,s:t.s,l:t.l})]}function M(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+90)%360,s:t.s,l:t.l}),d({h:(n+180)%360,s:t.s,l:t.l}),d({h:(n+270)%360,s:t.s,l:t.l})]}function C(e){var t=d(e).toHsl(),n=t.h;return[d(e),d({h:(n+72)%360,s:t.s,l:t.l}),d({h:(n+216)%360,s:t.s,l:t.l})]}function $(e,t,n){t=t||6,n=n||30;var r=d(e).toHsl(),i=360/n,o=[d(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(d(r));return o}function O(e,t){t=t||6;for(var n=d(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(d({h:r,s:i,v:o})),o=(o+s)%1;return a}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=P(e),this._roundA=l(100*this._a)/100,this},toHsv:function(){var e=f(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=f(this._r,this._g,this._b),t=l(360*e.h),n=l(100*e.s),r=l(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=p(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=p(this._r,this._g,this._b),t=l(360*e.h),n=l(100*e.s),r=l(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return m(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var o=[D(l(e).toString(16)),D(l(t).toString(16)),D(l(n).toString(16)),D(N(r))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*L(this._r,255))+"%",g:l(100*L(this._g,255))+"%",b:l(100*L(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*L(this._r,255))+"%, "+l(100*L(this._g,255))+"%, "+l(100*L(this._b,255))+"%)":"rgba("+l(100*L(this._r,255))+"%, "+l(100*L(this._g,255))+"%, "+l(100*L(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(I[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+g(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=d(e);n="#"+g(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(S,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(_,arguments)},spin:function(){return this._applyModification(w,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination($,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(O,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(T,arguments)},tetrad:function(){return this._applyCombination(M,arguments)}},d.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:j(e[r]));e=n}return d(e,t)},d.equals=function(e,t){return!(!e||!t)&&d(e).toRgbString()==d(t).toRgbString()},d.random=function(){return d.fromRatio({r:h(),g:h(),b:h()})},d.mix=function(e,t,n){n=0===n?0:n||50;var r=d(e).toRgb(),i=d(t).toRgb(),o=n/100;return d({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},d.readability=function(e,t){var n=d(e),r=d(t);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},d.isReadable=function(e,t,n){var r,i,o=d.readability(e,t);switch(i=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},d.mostReadable=function(e,t,n){var r,i,o,a,s=null,l=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var c=0;c<t.length;c++)(r=d.readability(e,t[c]))>l&&(l=r,s=d(t[c]));return d.isReadable(e,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,d.mostReadable(e,["#fff","#000"],n))};var A=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},I=d.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(A);function P(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function L(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=c(t,u(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),i.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function k(e){return c(1,u(0,e))}function R(e){return parseInt(e,16)}function D(e){return 1==e.length?"0"+e:""+e}function j(e){return e<=1&&(e=100*e+"%"),e}function N(e){return i.round(255*parseFloat(e)).toString(16)}function F(e){return R(e)/255}var U,B,z,V=(B="[\\s|\\(]+("+(U="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",z="[\\s|\\(]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",{CSS_UNIT:new RegExp(U),rgb:new RegExp("rgb"+B),rgba:new RegExp("rgba"+z),hsl:new RegExp("hsl"+B),hsla:new RegExp("hsla"+z),hsv:new RegExp("hsv"+B),hsva:new RegExp("hsva"+z),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function G(e){return!!V.CSS_UNIT.exec(e)}e.exports?e.exports=d:void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}(Math)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatch=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=l(n(0)),o=l(n(221)),a=n(670),s=l(n(329));function l(e){return e&&e.__esModule?e:{default:e}}var c=t.Swatch=function(e){var t=e.color,n=e.style,a=e.onClick,l=void 0===a?function(){}:a,c=e.onHover,u=e.title,h=void 0===u?t:u,d=e.children,p=e.focus,f=e.focusStyle,m=void 0===f?{}:f,g="transparent"===t,v=(0,o.default)({default:{swatch:r({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,p?m:{})}}),y={};return c&&(y.onMouseOver=function(e){return c(t,e)}),i.default.createElement("div",r({style:v.swatch,onClick:function(e){return l(t,e)},title:h,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&l(t,e)}},y),d,g&&i.default.createElement(s.default,{borderRadius:v.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};t.default=(0,a.handleFocus)(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleFocus=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),s=(r=a)&&r.__esModule?r:{default:r};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.handleFocus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var e,t,n;l(this,r);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=n=c(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(o))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},c(n,t)}return u(r,n),o(r,[{key:"render",value:function(){return s.default.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},s.default.createElement(e,i({},this.props,this.state)))}}]),r}(s.default.Component)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SketchFields=void 0;var r=s(n(0)),i=s(n(221)),o=s(n(406)),a=n(328);function s(e){return e&&e.__esModule?e:{default:e}}var l=t.SketchFields=function(e){var t=e.onChange,n=e.rgb,s=e.hsl,l=e.hex,c=e.disableAlpha,u=(0,i.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:c}),h=function(e,r){e.hex?o.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},r):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},r):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:s.h,s:s.s,l:s.l,a:e.a,source:"rgb"},r))};return r.default.createElement("div",{style:u.fields,className:"flexbox-fix"},r.default.createElement("div",{style:u.double},r.default.createElement(a.EditableInput,{style:{input:u.input,label:u.label},label:"hex",value:l.replace("#",""),onChange:h})),r.default.createElement("div",{style:u.single},r.default.createElement(a.EditableInput,{style:{input:u.input,label:u.label},label:"r",value:n.r,onChange:h,dragLabel:"true",dragMax:"255"})),r.default.createElement("div",{style:u.single},r.default.createElement(a.EditableInput,{style:{input:u.input,label:u.label},label:"g",value:n.g,onChange:h,dragLabel:"true",dragMax:"255"})),r.default.createElement("div",{style:u.single},r.default.createElement(a.EditableInput,{style:{input:u.input,label:u.label},label:"b",value:n.b,onChange:h,dragLabel:"true",dragMax:"255"})),r.default.createElement("div",{style:u.alpha},r.default.createElement(a.EditableInput,{style:{input:u.input,label:u.label},label:"a",value:Math.round(100*n.a),onChange:h,dragLabel:"true",dragMax:"100"})))};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SketchPresetColors=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=l(n(0)),o=l(n(1)),a=l(n(221)),s=n(328);function l(e){return e&&e.__esModule?e:{default:e}}var c=t.SketchPresetColors=function(e){var t=e.colors,n=e.onClick,o=void 0===n?function(){}:n,l=e.onSwatchHover,c=(0,a.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),u=function(e,t){o({hex:e,source:"hex"},t)};return i.default.createElement("div",{style:c.colors,className:"flexbox-fix"},t.map((function(e){var t="string"==typeof e?{color:e}:e,n=""+t.color+(t.title||"");return i.default.createElement("div",{key:n,style:c.swatchWrap},i.default.createElement(s.Swatch,r({},t,{style:c.swatch,onClick:u,onHover:l,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};c.propTypes={colors:o.default.arrayOf(o.default.oneOfType([o.default.string,o.default.shape({color:o.default.string,title:o.default.string})])).isRequired},t.default=c},function(e,t,n){n(674),n(678),n(679),n(680),n(681),n(682),n(683),n(684),n(686),n(687),n(688),n(689),n(690),n(691),n(692),n(693),n(694),e.exports=n(258).Math},function(e,t,n){var r=n(211),i=n(415),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t,n){e.exports=n(413)("native-function-to-string",Function.toString)},function(e,t){e.exports=!1},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(211),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,n){var r=n(211),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(211),i=n(332);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(211);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(211),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){var r=n(211),i=n(333);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,n){var r=n(211);r(r.S,"Math",{fround:n(685)})},function(e,t,n){var r=n(332),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),l=i(2,-126);e.exports=Math.fround||function(e){var t,n,i=Math.abs(e),c=r(e);return i<l?c*(i/l/a+1/o-1/o)*l*a:(n=(t=(1+a/o)*i)-(t-i))>s||n!=n?c*(1/0):c*n}},function(e,t,n){var r=n(211),i=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,o=0,a=0,s=arguments.length,l=0;a<s;)l<(n=i(arguments[a++]))?(o=o*(r=l/n)*r+1,l=n):o+=n>0?(r=n/l)*r:n;return l===1/0?1/0:l*Math.sqrt(o)}})},function(e,t,n){var r=n(211),i=Math.imul;r(r.S+r.F*n(231)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(211);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(211);r(r.S,"Math",{log1p:n(415)})},function(e,t,n){var r=n(211);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(211);r(r.S,"Math",{sign:n(332)})},function(e,t,n){var r=n(211),i=n(333),o=Math.exp;r(r.S+r.F*n(231)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(211),i=n(333),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var r=n(211);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){n(696),n(709),n(711),n(712),n(713),n(714),n(715),n(716),n(717),n(718),n(719),n(721),e.exports=n(258).Number},function(e,t,n){"use strict";var r=n(223),i=n(280),o=n(334),a=n(697),s=n(331),l=n(231),c=n(701).f,u=n(416).f,h=n(330).f,d=n(338).trim,p=r.Number,f=p,m=p.prototype,g="Number"==o(n(705)(m)),v="trim"in String.prototype,y=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var n,r,i,o=(t=v?t.trim():d(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,l=t.slice(2),c=0,u=l.length;c<u;c++)if((a=l.charCodeAt(c))<48||a>i)return NaN;return parseInt(l,r)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(g?l((function(){m.valueOf.call(n)})):"Number"!=o(n))?a(new f(y(t)),n,p):y(t)};for(var _,b=n(247)?c(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;b.length>x;x++)i(f,_=b[x])&&!i(p,_)&&h(p,_,u(f,_));p.prototype=m,m.constructor=p,n(411)(r,"Number",p)}},function(e,t,n){var r=n(246),i=n(698).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){var r=n(246),i=n(279),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(414)(Function.call,n(416).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(334);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(417),i=n(337).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(335),i=n(703),o=n(704);e.exports=function(e){return function(t,n,a){var s,l=r(t),c=i(l.length),u=o(a,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n){var r=n(281),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(281),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(279),i=n(706),o=n(337),a=n(418)("IE_PROTO"),s=function(){},l=function(){var e,t=n(409)("iframe"),r=o.length;for(t.style.display="none",n(708).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[o[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(330),i=n(279),o=n(707);e.exports=n(247)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,l=0;s>l;)r.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var r=n(417),i=n(337);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(223).document;e.exports=r&&r.documentElement},function(e,t,n){"use strict";var r=n(211),i=n(281),o=n(419),a=n(710),s=1..toFixed,l=Math.floor,c=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",h=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*c[n],c[n]=r%1e7,r=l(r/1e7)},d=function(e){for(var t=6,n=0;--t>=0;)n+=c[t],c[t]=l(n/e),n=n%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var n=String(c[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},f=function(e,t,n){return 0===t?n:t%2==1?f(e,t-1,n*e):f(e*e,t/2,n)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(231)((function(){s.call({})}))),"Number",{toFixed:function(e){var t,n,r,s,l=o(this,u),c=i(e),m="",g="0";if(c<0||c>20)throw RangeError(u);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(m="-",l=-l),l>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(l*f(2,69,1))-69)<0?l*f(2,-t,1):l/f(2,t,1),n*=4503599627370496,(t=52-t)>0){for(h(0,n),r=c;r>=7;)h(1e7,0),r-=7;for(h(f(10,r,1),0),r=t-1;r>=23;)d(1<<23),r-=23;d(1<<r),h(1,1),d(2),g=p()}else h(0,n),h(1<<-t,0),g=p()+a.call("0",c);return g=c>0?m+((s=g.length)<=c?"0."+a.call("0",c-s)+g:g.slice(0,s-c)+"."+g.slice(s-c)):m+g}})},function(e,t,n){"use strict";var r=n(281),i=n(336);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t,n){"use strict";var r=n(211),i=n(231),o=n(419),a=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var r=n(211);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(211),i=n(223).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var r=n(211);r(r.S,"Number",{isInteger:n(420)})},function(e,t,n){var r=n(211);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(211),i=n(420),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){var r=n(211);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(211);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(211),i=n(720);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){var r=n(223).parseFloat,i=n(338).trim;e.exports=1/r(n(339)+"-0")!=-1/0?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(211),i=n(722);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){var r=n(223).parseInt,i=n(338).trim,o=n(339),a=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(320),i=n(422),o=n(424),a=n(321),s=n(727),l=n(322);e.exports=function(e,t,n){var c=-1,u=i,h=e.length,d=!0,p=[],f=p;if(n)d=!1,u=o;else if(h>=200){var m=t?null:s(e);if(m)return l(m);d=!1,u=a,f=new r}else f=t?[]:p;e:for(;++c<h;){var g=e[c],v=t?t(g):g;if(g=n||0!==g?g:0,d&&v==v){for(var y=f.length;y--;)if(f[y]===v)continue e;t&&f.push(v),p.push(g)}else u(f,v,n)||(f!==p&&f.push(v),p.push(g))}return p}},function(e,t,n){var r=n(423),i=n(725),o=n(726);e.exports=function(e,t,n){return t==t?o(e,t,n):r(e,i,n)}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(385),i=n(728),o=n(322),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(243),i=n(267),o=n(212),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},function(e,t,n){var r=n(253),i=n(219),o=n(390),a=n(731),s=n(252),l=n(732),c=n(236);e.exports=function(e,t,n){var u=-1;t=r(t.length?t:[c],s(i));var h=o(e,(function(e,n,i){return{criteria:r(t,(function(t){return t(e)})),index:++u,value:e}}));return a(h,(function(e,t){return l(e,t,n)}))}},function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},function(e,t,n){var r=n(733);e.exports=function(e,t,n){for(var i=-1,o=e.criteria,a=t.criteria,s=o.length,l=n.length;++i<s;){var c=r(o[i],a[i]);if(c)return i>=l?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}},function(e,t,n){var r=n(245);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,o=e==e,a=r(e),s=void 0!==t,l=null===t,c=t==t,u=r(t);if(!l&&!u&&!a&&e>t||a&&s&&c&&!l&&!u||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!u&&e<t||u&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!c)return-1}return 0}},function(e,t,n){var r=n(282),i=n(427),o=n(236);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},function(e,t,n){var r=n(282),i=n(428),o=n(236);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},function(e,t,n){var r=n(426),i=n(376);e.exports=function(e,t){return r(i(e,t),1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getTickValues",{enumerable:!0,get:function(){return r.getTickValues}}),Object.defineProperty(t,"getNiceTickValues",{enumerable:!0,get:function(){return r.getNiceTickValues}}),Object.defineProperty(t,"getTickValuesFixedDomain",{enumerable:!0,get:function(){return r.getTickValuesFixedDomain}});var r=n(738)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTickValuesFixedDomain=t.getTickValues=t.getNiceTickValues=void 0;var r=a(n(429)),i=n(430),o=a(n(739));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e){var t=l(e,2),n=t[0],r=t[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function u(e,t,n){if(e.lte(0))return new r.default(0);var i=o.default.getDigitCount(e.toNumber()),a=new r.default(10).pow(i),s=e.div(a),l=1!==i?.05:.1,c=new r.default(Math.ceil(s.div(l).toNumber())).add(n).mul(l).mul(a);return t?c:new r.default(Math.ceil(c))}function h(e,t,n){var a=1,s=new r.default(e);if(!s.isint()&&n){var l=Math.abs(e);l<1?(a=new r.default(10).pow(o.default.getDigitCount(e)-1),s=new r.default(Math.floor(s.div(a).toNumber())).mul(a)):l>1&&(s=new r.default(Math.floor(e)))}else 0===e?s=new r.default(Math.floor((t-1)/2)):n||(s=new r.default(Math.floor(e)));var c=Math.floor((t-1)/2);return(0,i.compose)((0,i.map)((function(e){return s.add(new r.default(e-c).mul(a)).toNumber()})),i.range)(0,t)}function d(e,t,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new r.default(0),tickMin:new r.default(0),tickMax:new r.default(0)};var a,s=u(new r.default(t).sub(e).div(n-1),i,o);a=e<=0&&t>=0?new r.default(0):(a=new r.default(e).add(t).div(2)).sub(new r.default(a).mod(s));var l=Math.ceil(a.sub(e).div(s).toNumber()),c=Math.ceil(new r.default(t).sub(a).div(s).toNumber()),h=l+c+1;return h>n?d(e,t,n,i,o+1):(h<n&&(c=t>0?c+(n-h):c,l=t>0?l:l+(n-h)),{step:s,tickMin:a.sub(new r.default(l).mul(s)),tickMax:a.add(new r.default(c).mul(s))})}var p=(0,i.memoize)((function(e){var t=l(e,2),n=t[0],a=t[1],u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,p=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],f=Math.max(u,2),m=c([n,a]),g=l(m,2),v=g[0],y=g[1];if(v===-1/0||y===1/0){var _=y===1/0?[v].concat(s((0,i.range)(0,u-1).map((function(){return 1/0})))):s((0,i.range)(0,u-1).map((function(){return-1/0}))).concat([y]);return n>a?(0,i.reverse)(_):_}if(v===y)return h(v,u,p);var b=d(v,y,f,p),x=b.step,S=b.tickMin,w=b.tickMax,E=o.default.rangeStep(S,w.add(new r.default(.1).mul(x)),x);return n>a?(0,i.reverse)(E):E}));t.getNiceTickValues=p;var f=(0,i.memoize)((function(e){var t=l(e,2),n=t[0],o=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=Math.max(a,2),p=c([n,o]),f=l(p,2),m=f[0],g=f[1];if(m===-1/0||g===1/0)return[n,o];if(m===g)return h(m,a,s);var v=u(new r.default(g).sub(m).div(d-1),s,0),y=(0,i.compose)((0,i.map)((function(e){return new r.default(m).add(new r.default(e).mul(v)).toNumber()})),i.range),_=y(0,d).filter((function(e){return e>=m&&e<=g}));return n>o?(0,i.reverse)(_):_}));t.getTickValues=f;var m=(0,i.memoize)((function(e,t){var n=l(e,2),a=n[0],h=n[1],d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],p=c([a,h]),f=l(p,2),m=f[0],g=f[1];if(m===-1/0||g===1/0)return[a,h];if(m===g)return[m];var v=Math.max(t,2),y=u(new r.default(g).sub(m).div(v-1),d,0),_=s(o.default.rangeStep(new r.default(m),new r.default(g).sub(new r.default(.99).mul(y)),y)).concat([g]);return a>h?(0,i.reverse)(_):_}));t.getTickValuesFixedDomain=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(429))&&r.__esModule?r:{default:r},o=n(430);var a={rangeStep:function(e,t,n){for(var r=new i.default(e),o=0,a=[];r.lt(t)&&o<1e5;)a.push(r.toNumber()),r=r.add(n),o++;return a},getDigitCount:function(e){return 0===e?1:Math.floor(new i.default(e).abs().log(10).toNumber())+1},interpolateNumber:(0,o.curry)((function(e,t,n){var r=+e;return r+n*(+t-r)})),uninterpolateNumber:(0,o.curry)((function(e,t,n){var r=t-+e;return(n-e)/(r=r||1/0)})),uninterpolateTruncation:(0,o.curry)((function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))}))};t.default=a},function(e,t,n){var r,i=n(741),o=n(742),a=n(744),s=/(\+|\-|\*|\\|[^a-z]|)(\s*)(\()/g;e.exports=function(e,t){function n(e,o,l){if(r++>100)throw r=0,new Error("Call stack overflow for "+l);if(""===e)throw new Error(o+"(): '"+l+"' must contain a non-whitespace string");var c=function(e){var t=[],n=[],r=/[\.0-9]([%a-z]+)/gi,i=r.exec(e);for(;i;)i&&i[1]&&(-1===n.indexOf(i[1].toLowerCase())&&(t.push(i[1]),n.push(i[1].toLowerCase())),i=r.exec(e));return t}(e=function(e,t){e=e.replace(/((?:\-[a-z]+\-)?calc)/g,"");var r,o="",a=e;for(;r=s.exec(a);){r[0].index>0&&(o+=a.substring(0,r[0].index));var l=i("(",")",a.substring([0].index));if(""===l.body)throw new Error("'"+e+"' must contain a non-whitespace string");var c=n(l.body,"",t);o+=l.pre+c,a=l.post}return o+a}(e,l));if(c.length>1||e.indexOf("var(")>-1)return o+"("+e+")";var u=c[0]||"";"%"===u&&(e=e.replace(/\b[0-9\.]+%/g,(function(e){return.01*parseFloat(e.slice(0,-1))})));var h,d=e.replace(new RegExp(u,"gi"),"");try{h=a.eval(d)}catch(t){return o+"("+e+")"}return"%"===u&&(h*=100),(o.length||"%"===u)&&(h=Math.round(h*t)/t),h+=u}return r=0,t=Math.pow(10,void 0===t?5:t),e=e.replace(/\n+/g," "),o(e,/((?:\-[a-z]+\-)?calc)\(/,n)}},function(e,t){function n(e,t,n){e instanceof RegExp&&(e=r(e,n)),t instanceof RegExp&&(t=r(t,n));var o=i(e,t,n);return o&&{start:o[0],end:o[1],pre:n.slice(0,o[0]),body:n.slice(o[0]+e.length,o[1]),post:n.slice(o[1]+t.length)}}function r(e,t){var n=t.match(e);return n?n[0]:null}function i(e,t,n){var r,i,o,a,s,l=n.indexOf(e),c=n.indexOf(t,l+1),u=l;if(l>=0&&c>0){for(r=[],o=n.length;u>=0&&!s;)u==l?(r.push(u),l=n.indexOf(e,u+1)):1==r.length?s=[r.pop(),c]:((i=r.pop())<o&&(o=i,a=c),c=n.indexOf(t,u+1)),u=l<c&&l>=0?l:c;r.length&&(s=[o,a])}return s}e.exports=n,n.range=i},function(e,t,n){var r=n(743);function i(e,t,n){var o=e;return function(e,t){var n=[],i="string"==typeof t?new RegExp("\\b("+t+")\\("):t;do{var o=i.exec(e);if(!o)return n;if(void 0===o[1])throw new Error("Missing the first couple of parenthesis to get the function identifier in "+t);var a=o[1],s=o.index,l=r("(",")",e.substring(s));if(!l||l.start!==o[0].length-1)throw new SyntaxError(a+"(): missing closing ')' in the value '"+e+"'");n.push({matches:l,functionIdentifier:a}),e=l.post}while(i.test(e));return n}(e,t).reduce((function(e,r){return e.replace(r.functionIdentifier+"("+r.matches.body+")",function(e,t,n,r,o){return n(i(e,o,n),t,r)}(r.matches.body,r.functionIdentifier,n,o,t))}),e)}e.exports=i},function(e,t,n){"use strict";function r(e,t,n){e instanceof RegExp&&(e=i(e,n)),t instanceof RegExp&&(t=i(t,n));var r=o(e,t,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+e.length,r[1]),post:n.slice(r[1]+t.length)}}function i(e,t){var n=t.match(e);return n?n[0]:null}function o(e,t,n){var r,i,o,a,s,l=n.indexOf(e),c=n.indexOf(t,l+1),u=l;if(l>=0&&c>0){for(r=[],o=n.length;u>=0&&!s;)u==l?(r.push(u),l=n.indexOf(e,u+1)):1==r.length?s=[r.pop(),c]:((i=r.pop())<o&&(o=i,a=c),c=n.indexOf(t,u+1)),u=l<c&&l>=0?l:c;r.length&&(s=[o,a])}return s}e.exports=r,r.range=o},function(e,t,n){var r=n(745);r.prototype.formulaEval=function(){"use strict";for(var e,t,n,r=[],i=this.value,o=0;o<i.length;o++)1===i[o].type||3===i[o].type?r.push({value:3===i[o].type?i[o].show:i[o].value,type:1}):13===i[o].type?r.push({value:i[o].show,type:1}):0===i[o].type?r[r.length-1]={value:i[o].show+("-"!=i[o].show?"(":"")+r[r.length-1].value+("-"!=i[o].show?")":""),type:0}:7===i[o].type?r[r.length-1]={value:(1!=r[r.length-1].type?"(":"")+r[r.length-1].value+(1!=r[r.length-1].type?")":"")+i[o].show,type:7}:10===i[o].type?(e=r.pop(),t=r.pop(),"P"===i[o].show||"C"===i[o].show?r.push({value:"<sup>"+t.value+"</sup>"+i[o].show+"<sub>"+e.value+"</sub>",type:10}):r.push({value:(1!=t.type?"(":"")+t.value+(1!=t.type?")":"")+"<sup>"+e.value+"</sup>",type:1})):2===i[o].type||9===i[o].type?(e=r.pop(),t=r.pop(),r.push({value:(1!=t.type?"(":"")+t.value+(1!=t.type?")":"")+i[o].show+(1!=e.type?"(":"")+e.value+(1!=e.type?")":""),type:i[o].type})):12===i[o].type&&(e=r.pop(),t=r.pop(),n=r.pop(),r.push({value:i[o].show+"("+n.value+","+t.value+","+e.value+")",type:12}));return r[0].value},e.exports=r},function(e,t,n){var r=n(746);r.prototype.postfixEval=function(e){"use strict";(e=e||{}).PI=Math.PI,e.E=Math.E;for(var t,n,i,o=[],a=this.value,s=void 0!==e.n,l=0;l<a.length;l++)1===a[l].type?o.push({value:a[l].value,type:1}):3===a[l].type?o.push({value:e[a[l].value],type:1}):0===a[l].type||7===a[l].type?void 0===o[o.length-1].type?o[o.length-1].value.push(a[l]):o[o.length-1].value=a[l].value(o[o.length-1].value):8===a[l].type?(t=o.pop(),n=o.pop(),o.push({type:1,value:a[l].value(n.value,t.value)})):10===a[l].type?(t=o.pop(),void 0===(n=o.pop()).type?(n.value=n.concat(t),n.value.push(a[l]),o.push(n)):void 0===t.type?(t.unshift(n),t.push(a[l]),o.push(t)):o.push({type:1,value:a[l].value(n.value,t.value)})):2===a[l].type||9===a[l].type?(t=o.pop(),void 0===(n=o.pop()).type?(console.log(n),(n=n.concat(t)).push(a[l]),o.push(n)):void 0===t.type?(t.unshift(n),t.push(a[l]),o.push(t)):o.push({type:1,value:a[l].value(n.value,t.value)})):12===a[l].type?(void 0!==(t=o.pop()).type&&(t=[t]),n=o.pop(),i=o.pop(),o.push({type:1,value:a[l].value(i.value,n.value,new r(t))})):13===a[l].type&&(s?o.push({value:e[a[l].value],type:3}):o.push([a[l]]));if(o.length>1)throw new r.exception("Uncaught Syntax error");return o[0].value>1e15?"Infinity":parseFloat(o[0].value.toFixed(15))},r.eval=function(e,t,n){return void 0===t?this.lex(e).toPostfix().postfixEval():void 0===n?void 0!==t.length?this.lex(e,t).toPostfix().postfixEval():this.lex(e).toPostfix().postfixEval(t):this.lex(e,t).toPostfix().postfixEval(n)},e.exports=r},function(e,t,n){var r=n(747);r.prototype.toPostfix=function(){"use strict";for(var e,t,n,i,o,a=[],s=[{value:"(",type:4,pre:0}],l=this.value,c=1;c<l.length;c++)if(1===l[c].type||3===l[c].type||13===l[c].type)1===l[c].type&&(l[c].value=Number(l[c].value)),a.push(l[c]);else if(4===l[c].type)s.push(l[c]);else if(5===l[c].type)for(;4!==(t=s.pop()).type;)a.push(t);else if(11===l[c].type){for(;4!==(t=s.pop()).type;)a.push(t);s.push(t)}else{i=(e=l[c]).pre,n=(o=s[s.length-1]).pre;var u="Math.pow"==o.value&&"Math.pow"==e.value;if(i>n)s.push(e);else{for(;n>=i&&!u||u&&i<n;)t=s.pop(),o=s[s.length-1],a.push(t),n=o.pre,u="Math.pow"==e.value&&"Math.pow"==o.value;s.push(e)}}return new r(a)},e.exports=r},function(e,t,n){var r=n(748);function i(e,t){for(var n=0;n<e.length;n++)e[n]+=t;return e}var o=["sin","cos","tan","pi","(",")","P","C","asin","acos","atan","7","8","9","int","cosh","acosh","ln","^","root","4","5","6","/","!","tanh","atanh","Mod","1","2","3","*","sinh","asinh","e","log","0",".","+","-",",","Sigma","n","Pi","pow"],a=["sin","cos","tan","&pi;","(",")","P","C","asin","acos","atan","7","8","9","Int","cosh","acosh"," ln","^","root","4","5","6","&divide;","!","tanh","atanh"," Mod ","1","2","3","&times;","sinh","asinh","e"," log","0",".","+","-",",","&Sigma;","n","&Pi;","pow"],s=[r.math.sin,r.math.cos,r.math.tan,"PI","(",")",r.math.P,r.math.C,r.math.asin,r.math.acos,r.math.atan,"7","8","9",Math.floor,r.math.cosh,r.math.acosh,Math.log,Math.pow,Math.sqrt,"4","5","6",r.math.div,r.math.fact,r.math.tanh,r.math.atanh,r.math.mod,"1","2","3",r.math.mul,r.math.sinh,r.math.asinh,"E",r.math.log,"0",".",r.math.add,r.math.sub,",",r.math.sigma,"n",r.math.Pi,Math.pow],l={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0},c=[0,0,0,3,4,5,10,10,0,0,0,1,1,1,0,0,0,0,10,0,1,1,1,2,7,0,0,2,1,1,1,2,0,0,3,0,1,6,9,9,11,12,13,12,8],u={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0},h={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0},d={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0},p={},f={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0},m={1:!0},g=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"],["pi","ln","Pi"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]];function v(e,t,n,r){for(var i=0;i<r;i++)if(e[n+i]!==t[i])return!1;return!0}r.addToken=function(e){for(var t=0;t<e.length;t++){var n=e[t].token.length,r=-1;if(n<g.length)for(var i=0;i<g[n].length;i++)if(e[t].token===g[n][i]){r=o.indexOf(g[n][i]);break}-1===r?(o.push(e[t].token),c.push(e[t].type),g.length<=e[t].token.length&&(g[e[t].token.length]=[]),g[e[t].token.length].push(e[t].token),s.push(e[t].value),a.push(e[t].show)):(o[r]=e[t].token,c[r]=e[t].type,s[r]=e[t].value,a[r]=e[t].show)}},r.lex=function(e,t){"use strict";var n,y,_,b,x={value:r.math.changeSign,type:0,pre:21,show:"-"},S={value:")",show:")",type:5,pre:0},w={value:"(",type:4,pre:0,show:"("},E=[w],T=[],M=e,C=u,$=0,O=p,A="";void 0!==t&&r.addToken(t);var I={};for(y=0;y<M.length;y++)if(" "!==M[y]){for(n="",_=M.length-y>g.length-2?g.length-1:M.length-y;_>0;_--)if(void 0!==g[_])for(b=0;b<g[_].length;b++)v(M,g[_][b],y,_)&&(n=g[_][b],b=g[_].length,_=0);if(y+=n.length-1,""===n)throw new r.Exception("Can't understand after "+M.slice(y));var P,L=o.indexOf(n),k=n,R=c[L],D=s[L],j=l[R],N=a[L],F=E[E.length-1];for(P=T.length;P--&&0===T[P];)if(-1!==[0,2,3,4,5,9,11,12,13].indexOf(R)){if(!0!==C[R])throw new r.Exception(n+" is not allowed after "+A);E.push(S),C=h,O=f,i(T,-1).pop()}if(!0!==C[R])throw new r.Exception(n+" is not allowed after "+A);if(!0===O[R]&&(R=2,D=r.math.mul,N="&times;",j=3,y-=n.length),I={value:D,type:R,pre:j,show:N},0===R)C=u,O=p,i(T,2).push(2),E.push(I),E.push(w);else if(1===R)1===F.type?(F.value+=D,i(T,1)):E.push(I),C=h,O=d;else if(2===R)C=u,O=p,i(T,2),E.push(I);else if(3===R)E.push(I),C=h,O=f;else if(4===R)i(T,1),$++,C=u,O=p,E.push(I);else if(5===R){if(!$)throw new r.Exception("Closing parenthesis are more than opening one, wait What!!!");$--,C=h,O=f,E.push(I)}else if(6===R){if(F.hasDec)throw new r.Exception("Two decimals are not allowed in one number");1!==F.type&&(F={value:0,type:1,pre:0},E.push(F),i(T,-1)),C=m,i(T,1),O=p,F.value+=D,F.hasDec=!0}else 7===R&&(C=h,O=f,i(T,1),E.push(I));8===R?(C=u,O=p,i(T,4).push(4),E.push(I),E.push(w)):9===R?(9===F.type?F.value===r.math.add?(F.value=D,F.show=N,i(T,1)):F.value===r.math.sub&&"-"===N&&(F.value=r.math.add,F.show="+",i(T,1)):5!==F.type&&7!==F.type&&1!==F.type&&3!==F.type&&13!==F.type?"-"===k&&(C=u,O=p,i(T,2).push(2),E.push(x),E.push(w)):(E.push(I),i(T,2)),C=u,O=p):10===R?(C=u,O=p,i(T,2),E.push(I)):11===R?(C=u,O=p,E.push(I)):12===R?(C=u,O=p,i(T,6).push(6),E.push(I),E.push(w)):13===R&&(C=h,O=f,E.push(I)),i(T,-1),A=n}for(P=T.length;P--&&0===T[P];)E.push(S),i(T,-1).pop();if(!0!==C[5])throw new r.Exception("complete the expression");for(;$--;)E.push(S);return E.push(S),new r(E)},e.exports=r},function(e,t){var n=function(e){this.value=e};n.math={isDegree:!0,acos:function(e){return n.math.isDegree?180/Math.PI*Math.acos(e):Math.acos(e)},add:function(e,t){return e+t},asin:function(e){return n.math.isDegree?180/Math.PI*Math.asin(e):Math.asin(e)},atan:function(e){return n.math.isDegree?180/Math.PI*Math.atan(e):Math.atan(e)},acosh:function(e){return Math.log(e+Math.sqrt(e*e-1))},asinh:function(e){return Math.log(e+Math.sqrt(e*e+1))},atanh:function(e){return Math.log((1+e)/(1-e))},C:function(e,t){var r=1,i=e-t,o=t;o<i&&(o=i,i=t);for(var a=o+1;a<=e;a++)r*=a;return r/n.math.fact(i)},changeSign:function(e){return-e},cos:function(e){return n.math.isDegree&&(e=n.math.toRadian(e)),Math.cos(e)},cosh:function(e){return(Math.pow(Math.E,e)+Math.pow(Math.E,-1*e))/2},div:function(e,t){return e/t},fact:function(e){if(e%1!=0)return"NaN";for(var t=1,n=2;n<=e;n++)t*=n;return t},inverse:function(e){return 1/e},log:function(e){return Math.log(e)/Math.log(10)},mod:function(e,t){return e%t},mul:function(e,t){return e*t},P:function(e,t){for(var n=1,r=Math.floor(e)-Math.floor(t)+1;r<=Math.floor(e);r++)n*=r;return n},Pi:function(e,t,n){for(var r=1,i=e;i<=t;i++)r*=Number(n.postfixEval({n:i}));return r},pow10x:function(e){for(var t=1;e--;)t*=10;return t},sigma:function(e,t,n){for(var r=0,i=e;i<=t;i++)r+=Number(n.postfixEval({n:i}));return r},sin:function(e){return n.math.isDegree&&(e=n.math.toRadian(e)),Math.sin(e)},sinh:function(e){return(Math.pow(Math.E,e)-Math.pow(Math.E,-1*e))/2},sub:function(e,t){return e-t},tan:function(e){return n.math.isDegree&&(e=n.math.toRadian(e)),Math.tan(e)},tanh:function(e){return n.sinha(e)/n.cosha(e)},toRadian:function(e){return e*Math.PI/180}},n.Exception=function(e){this.message=e},e.exports=n},function(e,t){(function(){var t,n,r,i,o,a;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-o)/1e6},n=process.hrtime,i=(t=function(){var e;return 1e9*(e=n())[0]+e[1]})(),a=1e9*process.uptime(),o=i-a):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)},function(e,t,n){var r=n(253),i=n(751),o=n(327),a=n(752),s=o((function(e){var t=r(e,a);return t.length&&t[0]===e[0]?i(t):[]}));e.exports=s},function(e,t,n){var r=n(320),i=n(422),o=n(424),a=n(253),s=n(252),l=n(321),c=Math.min;e.exports=function(e,t,n){for(var u=n?o:i,h=e[0].length,d=e.length,p=d,f=Array(d),m=1/0,g=[];p--;){var v=e[p];p&&t&&(v=a(v,s(t))),m=c(v.length,m),f[p]=!n&&(t||h>=120&&v.length>=120)?new r(p&&v):void 0}v=e[0];var y=-1,_=f[0];e:for(;++y<h&&g.length<m;){var b=v[y],x=t?t(b):b;if(b=n||0!==b?b:0,!(_?l(_,x):u(g,x,n))){for(p=d;--p;){var S=f[p];if(!(S?l(S,x):u(e[p],x,n)))continue e}_&&_.push(x),g.push(b)}}return g}},function(e,t,n){var r=n(401);e.exports=function(e){return r(e)?e:[]}},function(e,t,n){var r=n(383),i=n(754),o=n(219),a=n(212);e.exports=function(e,t){return(a(e)?r:i)(e,o(t,3))}},function(e,t,n){var r=n(255);e.exports=function(e,t){var n=[];return r(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}t.default=e}(n(1));var r=s(n(756)),i=s(n(759)),o=s(n(0)),a=s(n(433));n(434);function s(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,r.default)(e,t)}))},u=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,i.default)(e,t)}))},h=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).onEnter=function(e,n){var r=t.getClassNames(n?"appear":"enter").className;t.removeClasses(e,"exit"),c(e,r),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.getClassNames(n?"appear":"enter").activeClassName;t.reflowAndAddClass(e,r),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.getClassNames("appear").doneClassName,i=t.getClassNames("enter").doneClassName,o=n?r+" "+i:i;t.removeClasses(e,n?"appear":"enter"),c(e,o),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.getClassNames("exit").className;t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),c(e,n),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.getClassNames("exit").activeClassName;t.reflowAndAddClass(e,n),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.getClassNames("exit").doneClassName;t.removeClasses(e,"exit"),c(e,n),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,i=r?(r&&n?n+"-":"")+e:n[e];return{className:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.removeClasses=function(e,t){var n=this.getClassNames(t),r=n.className,i=n.activeClassName,o=n.doneClassName;r&&u(e,r),i&&u(e,i),o&&u(e,o)},i.reflowAndAddClass=function(e,t){t&&(e&&e.scrollTop,c(e,t))},i.render=function(){var e=l({},this.props);return delete e.classNames,o.default.createElement(a.default,l({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},r}(o.default.Component);h.defaultProps={classNames:""},h.propTypes={};var d=h;t.default=d,e.exports=t.default},function(e,t,n){"use strict";var r=n(757);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,i.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var i=r(n(758));e.exports=t.default},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;a(n(1));var r=a(n(0)),i=n(69),o=a(n(435));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t,n;function a(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleEnter=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEnter",0,n)},t.handleEntering=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntering",0,n)},t.handleEntered=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onEntered",0,n)},t.handleExit=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExit",1,n)},t.handleExiting=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExiting",1,n)},t.handleExited=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.handleLifecycle("onExited",1,n)},t}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=a.prototype;return s.handleLifecycle=function(e,t,n){var o,a=this.props.children,s=r.default.Children.toArray(a)[t];s.props[e]&&(o=s.props)[e].apply(o,n),this.props[e]&&this.props[e]((0,i.findDOMNode)(this))},s.render=function(){var e=this.props,t=e.children,n=e.in,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["children","in"]),a=r.default.Children.toArray(t),s=a[0],l=a[1];return delete i.onEnter,delete i.onEntering,delete i.onEntered,delete i.onExit,delete i.onExiting,delete i.onExited,r.default.createElement(o.default,i,n?r.default.cloneElement(s,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):r.default.cloneElement(l,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},a}(r.default.Component);s.propTypes={};var l=s;t.default=l,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=i,t.mergeChildMappings=o,t.getInitialChildMapping=function(e,t){return i(e.children,(function(n){return(0,r.cloneElement)(n,{onExited:t.bind(null,n),in:!0,appear:a(n,"appear",e),enter:a(n,"enter",e),exit:a(n,"exit",e)})}))},t.getNextChildMapping=function(e,t,n){var s=i(e.children),l=o(t,s);return Object.keys(l).forEach((function(i){var o=l[i];if((0,r.isValidElement)(o)){var c=i in t,u=i in s,h=t[i],d=(0,r.isValidElement)(h)&&!h.props.in;!u||c&&!d?u||!c||d?u&&c&&(0,r.isValidElement)(h)&&(l[i]=(0,r.cloneElement)(o,{onExited:n.bind(null,o),in:h.props.in,exit:a(o,"exit",e),enter:a(o,"enter",e)})):l[i]=(0,r.cloneElement)(o,{in:!1}):l[i]=(0,r.cloneElement)(o,{onExited:n.bind(null,o),in:!0,exit:a(o,"exit",e),enter:a(o,"enter",e)})}})),l};var r=n(0);function i(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function o(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];s[i[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}function a(e,t,n){return null!=n[t]?n[t]:e.props[t]}},function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},function(e,t,n){var r=n(255);e.exports=function(e,t){var n=!0;return r(e,(function(e,r,i){return n=!!t(e,r,i)})),n}},function(e,t,n){var r=n(766)(n(767));e.exports=r},function(e,t,n){var r=n(219),i=n(235),o=n(244);e.exports=function(e){return function(t,n,a){var s=Object(t);if(!i(t)){var l=r(n,3);t=o(t),n=function(e){return l(s[e],e,s)}}var c=e(t,n,a);return c>-1?s[l?t[c]:c]:void 0}}},function(e,t,n){var r=n(423),i=n(219),o=n(768),a=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var l=null==n?0:o(n);return l<0&&(l=a(s+l,0)),r(e,i(t,3),l)}},function(e,t,n){var r=n(437);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t,n){var r=n(770),i=n(257),o=n(437);e.exports=function(e){return function(t,n,a){return a&&"number"!=typeof a&&i(t,n,a)&&(n=a=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),a=void 0===a?t<n?1:-1:o(a),r(t,n,a,e)}}},function(e,t){var n=Math.ceil,r=Math.max;e.exports=function(e,t,i,o){for(var a=-1,s=r(n((t-e)/(i||1)),0),l=Array(s);s--;)l[o?s:++a]=e,e+=i;return l}},function(e,t,n){var r=n(379),i=n(219),o=n(772),a=n(212),s=n(257);e.exports=function(e,t,n){var l=a(e)?r:o;return n&&s(e,t,n)&&(t=void 0),l(e,i(t,3))}},function(e,t,n){var r=n(255);e.exports=function(e,t){var n;return r(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}},function(e,t,n){var r=n(277),i=n(309),o=n(219);e.exports=function(e,t){var n={};return t=o(t,3),i(e,(function(e,i,o){r(n,i,t(e,i,o))})),n}},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,n,r){var i,o,a,s;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=u(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=d.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var c=l.length,u=g(l,c);for(n=0;n<c;++n)o(u[n],this,t)}return!0},s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,o,a;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return f(this,e,!0)},s.prototype.rawListeners=function(e){return f(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){var r=n(282),i=n(219),o=n(428);e.exports=function(e,t){return e&&e.length?r(e,i(t,2),o):void 0}},function(e,t,n){var r=n(282),i=n(427),o=n(219);e.exports=function(e,t){return e&&e.length?r(e,o(t,2),i):void 0}},function(e,t,n){(function(e,n){var r=void 0!==e?e:window,i=Object.create(r);if(i.scheduleImmediate=i.setImmediate?function(e){r.setImmediate(e)}:function(e){setTimeout(e,0)},i.exports=t,"undefined"!=typeof process&&(i.process=process),"undefined"!=typeof __dirname&&(i.__dirname=__dirname),i.__filename=n,!(r.window||"undefined"!=typeof WorkerGlobalScope&&r instanceof WorkerGlobalScope)){var o=require("url");i.location={get href(){return o.pathToFileURL?o.pathToFileURL(process.cwd()).href+"/":"file://"+(e=process.cwd(),("win32"!=process.platform?e:"/"+e.replace(/\\/g,"/"))+"/");var e}},function(){function e(){try{throw new Error}catch(i){var e=i.stack,t=new RegExp("^ *at [^(]*\\((.*):[0-9]*:[0-9]*\\)$","mg"),n=null;do{var r=t.exec(e);null!=r&&(n=r)}while(null!=r);return n[1]}}var t=null;i.document={get currentScript(){return null==t&&(t={src:e()}),t}}}(),i.dartDeferredLibraryLoader=function(e,t,n){try{load(e),t()}catch(e){n(e)}}}!function(){function e(e,t){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];t[i]=e[i]}}var t=function(){var e=function(){};e.prototype={p:{}};var t=new e;if(!t.__proto__||t.__proto__.p!==e.prototype.p)return!1;try{if("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Chrome/")>=0)return!0;if("function"==typeof version&&0==version.length){var n=version();if(/^\d+\.\d+\.\d+\.\d+$/.test(n))return!0}}catch(e){}return!1}();function n(e){if("string"!=typeof function(){}.name)for(var t=0;t<e.length;t++)for(var n=e[t],r=Object.keys(n),i=0;i<r.length;i++){var o=r[i],a=n[o];"function"==typeof a&&(a.name=o)}}function r(n,r){if(n.prototype.constructor=n,n.prototype["$is"+n.name]=n,null!=r){if(t)return void(n.prototype.__proto__=r.prototype);var i=Object.create(r.prototype);e(n.prototype,i),n.prototype=i}}function o(e,t){for(var n=0;n<t.length;n++)r(t[n],e)}function a(t,n){e(n.prototype,t.prototype),t.prototype.constructor=t}function s(e,t,n,r){var i=e;e[t]=i,e[n]=function(){var o;e[n]=function(){E.throwCyclicInit(t)};var a=r;try{e[t]===i?(o=e[t]=a,o=e[t]=r()):o=e[t]}finally{o===a&&(e[t]=null),e[n]=function(){return this[t]}}return o}}function l(e){return e.immutable$list=Array,e.fixed$length=Array,e}function c(e){function t(){}return t.prototype=e,new t,e}var u=0;function h(e,t,n,r,i,o){var a=null;return r?function(){return null===a&&(a=E.closureFromTearOff(this,e,t,n,!0,!1,i).prototype),a}:function(e,t,n,r,i){return i?new Function("funcs","applyTrampolineIndex","reflectionInfo","name","H","c","return function tearOff_"+r+u+++"(receiver) {if (c === null) c = H.closureFromTearOff(this, funcs, applyTrampolineIndex, reflectionInfo, false, true, name);return new c(this, funcs[0], receiver, name);}")(e,t,n,r,E,null):new Function("funcs","applyTrampolineIndex","reflectionInfo","name","H","c","return function tearOff_"+r+u+++"() {if (c === null) c = H.closureFromTearOff(this, funcs, applyTrampolineIndex, reflectionInfo, false, false, name);return new c(this, funcs[0], null, name);}")(e,t,n,r,E,null)}(e,t,n,i,o)}var d=0;function p(e,t,n,r,i,o,a,s,l,c){for(var u=[],p=0;p<s.length;p++){"string"==typeof(f=s[p])&&(f=e[f]),f.$callName=a[p],u.push(f)}var f;(f=u[0]).$requiredArgCount=i,f.$defaultValues=o;var m=l;"number"==typeof m&&(m+=d);var g=s[0];f.$stubName=g;var v=h(u,c||0,m,n,g,r);e[t]=v,n&&(f.$tearOff=v)}function f(e,t,n,r,i,o,a,s){return p(e,t,!0,!1,n,r,i,o,a,s)}function m(e,t,n,r,i,o,a,s,l){return p(e,t,!1,n,r,i,o,a,s,l)}function g(t){var n=Q.interceptorsByTag;n?e(t,n):Q.interceptorsByTag=t}function v(t){var n=Q.leafTags;n?e(t,n):Q.leafTags=t}function y(e){var t=Q.types,n=t.length;return t.push.apply(t,e),n}function _(t,n){return e(n,t),t}var b,x,S=(b=function(e,t,n,r,i){return function(o,a,s,l){return m(o,a,e,t,n,r,[s],l,i)}},x=function(e,t,n,r){return function(i,o,a,s){return f(i,o,e,t,n,[a],s,r)}},{inherit:r,inheritMany:o,mixin:a,installStaticTearOff:f,installInstanceTearOff:m,_instance_0u:b(0,0,null,["call$0"],0),_instance_1u:b(0,1,null,["call$1"],0),_instance_2u:b(0,2,null,["call$2"],0),_instance_0i:b(1,0,null,["call$0"],0),_instance_1i:b(1,1,null,["call$1"],0),_instance_2i:b(1,2,null,["call$2"],0),_static_0:x(0,null,["call$0"],0),_static_1:x(1,null,["call$1"],0),_static_2:x(2,null,["call$2"],0),makeConstList:l,lazy:s,updateHolder:_,convertToFastObject:c,setFunctionNamesIfNecessary:n,updateTypes:y,setOrUpdateInterceptorsByTag:g,setOrUpdateLeafTags:v});var w={},E={JS_CONST:function(){},CastIterable_CastIterable:function(e,t,n){return E.checkSubtype(e,"$isEfficientLengthIterable",[t],"$asEfficientLengthIterable")?new E._EfficientLengthCastIterable(e,[t,n]):new E.CastIterable(e,[t,n])},hexDigitValue:function(e){var t,n=48^e;return n<=9?n:97<=(t=32|e)&&t<=102?t-87:-1},parseHexByte:function(e,t){var n=E.hexDigitValue(w.JSString_methods.codeUnitAt$1(e,t)),r=E.hexDigitValue(w.JSString_methods.codeUnitAt$1(e,t+1));return 16*n+r-(256&r)},SubListIterable$:function(e,t,n,r){return M.RangeError_checkNotNegative(t,"start"),new E.SubListIterable(e,t,n,[r])},MappedIterable_MappedIterable:function(e,t,n,r){return T.getInterceptor$(e).$isEfficientLengthIterable?new E.EfficientLengthMappedIterable(e,t,[n,r]):new E.MappedIterable(e,t,[n,r])},SkipIterable_SkipIterable:function(e,t,n){return T.getInterceptor$(e).$isEfficientLengthIterable?(M.RangeError_checkNotNegative(t,"count"),new E.EfficientLengthSkipIterable(e,t,[n])):(M.RangeError_checkNotNegative(t,"count"),new E.SkipIterable(e,t,[n]))},IterableElementError_noElement:function(){return new M.StateError("No element")},IterableElementError_tooFew:function(){return new M.StateError("Too few elements")},_CastIterableBase:function(){},CastIterator:function(e,t){this._source=e,this.$ti=t},CastIterable:function(e,t){this._source=e,this.$ti=t},_EfficientLengthCastIterable:function(e,t){this._source=e,this.$ti=t},_CastListBase:function(){},CastList:function(e,t){this._source=e,this.$ti=t},CastMap:function(e,t){this._source=e,this.$ti=t},CastMap_forEach_closure:function(e,t){this.$this=e,this.f=t},CodeUnits:function(e){this._string=e},EfficientLengthIterable:function(){},ListIterable:function(){},SubListIterable:function(e,t,n,r){var i=this;i.__internal$_iterable=e,i._start=t,i._endOrLength=n,i.$ti=r},ListIterator:function(e,t,n){var r=this;r.__internal$_iterable=e,r.__internal$_length=t,r.__internal$_index=0,r.__internal$_current=null,r.$ti=n},MappedIterable:function(e,t,n){this.__internal$_iterable=e,this._f=t,this.$ti=n},EfficientLengthMappedIterable:function(e,t,n){this.__internal$_iterable=e,this._f=t,this.$ti=n},MappedIterator:function(e,t,n){var r=this;r.__internal$_current=null,r._iterator=e,r._f=t,r.$ti=n},MappedListIterable:function(e,t,n){this._source=e,this._f=t,this.$ti=n},WhereIterable:function(e,t,n){this.__internal$_iterable=e,this._f=t,this.$ti=n},WhereIterator:function(e,t,n){this._iterator=e,this._f=t,this.$ti=n},SkipIterable:function(e,t,n){this.__internal$_iterable=e,this._skipCount=t,this.$ti=n},EfficientLengthSkipIterable:function(e,t,n){this.__internal$_iterable=e,this._skipCount=t,this.$ti=n},SkipIterator:function(e,t,n){this._iterator=e,this._skipCount=t,this.$ti=n},EmptyIterable:function(e){this.$ti=e},EmptyIterator:function(e){this.$ti=e},FixedLengthListMixin:function(){},UnmodifiableListMixin:function(){},UnmodifiableListBase:function(){},Symbol:function(e){this.__internal$_name=e},__CastListBase__CastIterableBase_ListMixin:function(){},ConstantMap__throwUnmodifiable:function(){throw E.wrapException(M.UnsupportedError$("Cannot modify unmodifiable Map"))},unminifyOrTag:function(e){var t=E.unmangleGlobalNameIfPreservedAnyways(e);return"string"==typeof t?t:e},getType:function(e){return Q.types[E.intTypeCheck(e)]},isJsIndexable:function(e,t){var n;return null!=t&&null!=(n=t.x)?n:!!T.getInterceptor$(e).$isJavaScriptIndexingBehavior},S:function(e){var t;if("string"==typeof e)return e;if("number"==typeof e){if(0!==e)return""+e}else{if(!0===e)return"true";if(!1===e)return"false";if(null==e)return"null"}if("string"!=typeof(t=T.toString$0$(e)))throw E.wrapException(E.argumentErrorValue(e));return t},Primitives_objectHashCode:function(e){var t=e.$identityHash;return null==t&&(t=1073741823*Math.random()|0,e.$identityHash=t),t},Primitives_parseInt:function(e,t){var n,r,i,o,a,s;if("string"!=typeof e&&E.throwExpression(E.argumentErrorValue(e)),null!=(n=/^\s*[+-]?((0x[a-f0-9]+)|(\d+)|([a-z0-9]+))\s*$/i.exec(e))){if(3>=n.length)return E.ioore(n,3);if(r=E.stringTypeCheck(n[3]),null==t)return null!=r?parseInt(e,10):null!=n[2]?parseInt(e,16):void 0;if(t<2||t>36)throw E.wrapException(M.RangeError$range(t,2,36,"radix",null));if(10===t&&null!=r)return parseInt(e,10);if(t<10||null==r)for(i=t<=10?47+t:86+t,a=(o=n[1]).length,s=0;s<a;++s)if((32|w.JSString_methods._codeUnitAt$1(o,s))>i)return;return parseInt(e,t)}},Primitives_objectTypeName:function(e){return E.Primitives__objectClassName(e)+E._joinArguments(E.getRuntimeTypeInfo(e),0,null)},Primitives__objectClassName:function(e){var t,n,r,i,o,a,s,l=T.getInterceptor$(e),c=l.constructor;return(r=null==(n="function"==typeof c&&"string"==typeof(t=c.name)?t:null))||l===w.Interceptor_methods||l.$isUnknownJavaScriptObject?(i=w.C_JS_CONST(e),r&&(n=i),"Object"===i&&"function"==typeof(o=e.constructor)&&"string"==typeof(s=null==(a=String(o).match(/^\s*function\s*([\w$]*)\s*\(/))?null:a[1])&&/^\w+$/.test(s)&&(n=s),n):(n=n,E.unminifyOrTag(n.length>1&&36===w.JSString_methods._codeUnitAt$1(n,0)?w.JSString_methods.substring$1(n,1):n))},Primitives__fromCharCodeApply:function(e){var t,n,r,i,o=T.get$length$asx(e);if(o<=500)return String.fromCharCode.apply(null,e);for(t="",n=0;n<o;n=r)i=(r=n+500)<o?r:o,t+=String.fromCharCode.apply(null,e.slice(n,i));return t},Primitives_stringFromCodePoints:function(e){var t,n,r,i=E.setRuntimeTypeInfo([],[M.int]);for(t=e.length,n=0;n<e.length;e.length===t||(0,E.throwConcurrentModificationError)(e),++n){if("number"!=typeof(r=e[n])||Math.floor(r)!==r)throw E.wrapException(E.argumentErrorValue(r));if(r<=65535)w.JSArray_methods.add$1(i,r);else{if(!(r<=1114111))throw E.wrapException(E.argumentErrorValue(r));w.JSArray_methods.add$1(i,55296+(1023&w.JSInt_methods._shrOtherPositive$1(r-65536,10))),w.JSArray_methods.add$1(i,56320+(1023&r))}}return E.Primitives__fromCharCodeApply(i)},Primitives_stringFromCharCodes:function(e){var t,n,r;for(t=e.length,n=0;n<t;++n){if("number"!=typeof(r=e[n])||Math.floor(r)!==r)throw E.wrapException(E.argumentErrorValue(r));if(r<0)throw E.wrapException(E.argumentErrorValue(r));if(r>65535)return E.Primitives_stringFromCodePoints(e)}return E.Primitives__fromCharCodeApply(e)},Primitives_stringFromNativeUint8List:function(e,t,n){var r,i,o,a;if(n<=500&&0===t&&n===e.length)return String.fromCharCode.apply(null,e);for(r=t,i="";r<n;r=o)a=(o=r+500)<n?o:n,i+=String.fromCharCode.apply(null,e.subarray(r,a));return i},Primitives_stringFromCharCode:function(e){var t;if(0<=e){if(e<=65535)return String.fromCharCode(e);if(e<=1114111)return t=e-65536,String.fromCharCode((55296|w.JSInt_methods._shrOtherPositive$1(t,10))>>>0,56320|1023&t)}throw E.wrapException(M.RangeError$range(e,0,1114111,null,null))},Primitives_lazyAsJsDate:function(e){return void 0===e.date&&(e.date=new Date(e._value)),e.date},Primitives_getYear:function(e){return e.isUtc?E.Primitives_lazyAsJsDate(e).getUTCFullYear()+0:E.Primitives_lazyAsJsDate(e).getFullYear()+0},Primitives_getMonth:function(e){return e.isUtc?E.Primitives_lazyAsJsDate(e).getUTCMonth()+1:E.Primitives_lazyAsJsDate(e).getMonth()+1},Primitives_getDay:function(e){return e.isUtc?E.Primitives_lazyAsJsDate(e).getUTCDate()+0:E.Primitives_lazyAsJsDate(e).getDate()+0},Primitives_getHours:function(e){return e.isUtc?E.Primitives_lazyAsJsDate(e).getUTCHours()+0:E.Primitives_lazyAsJsDate(e).getHours()+0},Primitives_getMinutes:function(e){return e.isUtc?E.Primitives_lazyAsJsDate(e).getUTCMinutes()+0:E.Primitives_lazyAsJsDate(e).getMinutes()+0},Primitives_getSeconds:function(e){return e.isUtc?E.Primitives_lazyAsJsDate(e).getUTCSeconds()+0:E.Primitives_lazyAsJsDate(e).getSeconds()+0},Primitives_getMilliseconds:function(e){return e.isUtc?E.Primitives_lazyAsJsDate(e).getUTCMilliseconds()+0:E.Primitives_lazyAsJsDate(e).getMilliseconds()+0},Primitives_functionNoSuchMethod:function(e,t,n){var r,i,o={argumentCount:0};return r=[],i=[],o.argumentCount=t.length,w.JSArray_methods.addAll$1(r,t),o.names="",null!=n&&0!==n.__js_helper$_length&&n.forEach$1(0,new E.Primitives_functionNoSuchMethod_closure(o,i,r)),o.argumentCount,T.noSuchMethod$1$(e,new E.JSInvocationMirror(w.Symbol_call,0,r,i,0))},Primitives_applyFunction:function(e,t,n){var r,i,o;if(t instanceof Array&&(null==n||0===n.__js_helper$_length)){if(0===(i=(r=t).length)){if(e.call$0)return e.call$0()}else if(1===i){if(e.call$1)return e.call$1(r[0])}else if(2===i){if(e.call$2)return e.call$2(r[0],r[1])}else if(3===i){if(e.call$3)return e.call$3(r[0],r[1],r[2])}else if(4===i){if(e.call$4)return e.call$4(r[0],r[1],r[2],r[3])}else if(5===i&&e.call$5)return e.call$5(r[0],r[1],r[2],r[3],r[4]);if(null!=(o=e["call$"+i]))return o.apply(e,r)}return E.Primitives__genericApplyFunction2(e,t,n)},Primitives__genericApplyFunction2:function(e,t,n){var r,i,o,a,s,l,c,u,h,d,p,f;if((i=(r=null!=t?t instanceof Array?t:M.List_List$from(t,!0,null):[]).length)<(o=e.$requiredArgCount))return E.Primitives_functionNoSuchMethod(e,r,n);if(l=(s=null==(a=e.$defaultValues))?null:a(),"string"==typeof(u=(c=T.getInterceptor$(e))["call*"])&&(u=c[u]),s)return null!=n&&0!==n.__js_helper$_length?E.Primitives_functionNoSuchMethod(e,r,n):i===o?u.apply(e,r):E.Primitives_functionNoSuchMethod(e,r,n);if(l instanceof Array)return null!=n&&0!==n.__js_helper$_length?E.Primitives_functionNoSuchMethod(e,r,n):i>o+l.length?E.Primitives_functionNoSuchMethod(e,r,null):(w.JSArray_methods.addAll$1(r,l.slice(i-o)),u.apply(e,r));if(i>o)return E.Primitives_functionNoSuchMethod(e,r,n);if(h=Object.keys(l),null==n)for(s=h.length,d=0;d<h.length;h.length===s||(0,E.throwConcurrentModificationError)(h),++d)w.JSArray_methods.add$1(r,l[E.stringTypeCheck(h[d])]);else{for(s=h.length,p=0,d=0;d<h.length;h.length===s||(0,E.throwConcurrentModificationError)(h),++d)f=E.stringTypeCheck(h[d]),n.containsKey$1(f)?(++p,w.JSArray_methods.add$1(r,n.$index(0,f))):w.JSArray_methods.add$1(r,l[f]);if(p!==n.__js_helper$_length)return E.Primitives_functionNoSuchMethod(e,r,n)}return u.apply(e,r)},iae:function(e){throw E.wrapException(E.argumentErrorValue(e))},ioore:function(e,t){throw null==e&&T.get$length$asx(e),E.wrapException(E.diagnoseIndexError(e,t))},diagnoseIndexError:function(e,t){var n;return"number"!=typeof t||Math.floor(t)!==t?new M.ArgumentError(!0,t,"index",null):(n=E.intTypeCheck(T.get$length$asx(e)),t<0||t>=n?M.IndexError$(t,e,"index",null,n):M.RangeError$value(t,"index"))},diagnoseRangeError:function(e,t,n){return e<0||e>n?new M.RangeError(0,n,!0,e,"start","Invalid value"):null!=t&&(t<e||t>n)?new M.RangeError(e,n,!0,t,"end","Invalid value"):new M.ArgumentError(!0,t,"end",null)},argumentErrorValue:function(e){return new M.ArgumentError(!0,e,null,null)},wrapException:function(e){var t;return null==e&&(e=new M.NullThrownError),(t=new Error).dartException=e,"defineProperty"in Object?(Object.defineProperty(t,"message",{get:E.toStringWrapper}),t.name=""):t.toString=E.toStringWrapper,t},toStringWrapper:function(){return T.toString$0$(this.dartException)},throwExpression:function(e){throw E.wrapException(e)},throwConcurrentModificationError:function(e){throw E.wrapException(M.ConcurrentModificationError$(e))},TypeErrorDecoder_extractPattern:function(e){var t,n,r,i,o,a;return null==(t=(e=E.quoteStringForRegExp(e.replace(String({}),"$receiver$"))).match(/\\\$[a-zA-Z]+\\\$/g))&&(t=E.setRuntimeTypeInfo([],[M.String])),n=t.indexOf("\\$arguments\\$"),r=t.indexOf("\\$argumentsExpr\\$"),i=t.indexOf("\\$expr\\$"),o=t.indexOf("\\$method\\$"),a=t.indexOf("\\$receiver\\$"),new E.TypeErrorDecoder(e.replace(new RegExp("\\\\\\$arguments\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$argumentsExpr\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$expr\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$method\\\\\\$","g"),"((?:x|[^x])*)").replace(new RegExp("\\\\\\$receiver\\\\\\$","g"),"((?:x|[^x])*)"),n,r,i,o,a)},TypeErrorDecoder_provokeCallErrorOn:function(e){return function(e){try{e.$method$("$arguments$")}catch(e){return e.message}}(e)},TypeErrorDecoder_provokePropertyErrorOn:function(e){return function(e){try{e.$method$}catch(e){return e.message}}(e)},NullError$:function(e,t){return new E.NullError(e,null==t?null:t.method)},JsNoSuchMethodError$:function(e,t){var n=null==t,r=n?null:t.method;return new E.JsNoSuchMethodError(e,r,n?null:t.receiver)},unwrapException:function(e){var t,n,r,i,o,a,s,l,c,u,h,d,p,f=new E.unwrapException_saveStackTrace(e);if(null!=e){if(e instanceof E.ExceptionAndStackTrace)return f.call$1(e.dartException);if("object"!=typeof e)return e;if("dartException"in e)return f.call$1(e.dartException);if(!("message"in e))return e;if(t=e.message,"number"in e&&"number"==typeof e.number&&(r=65535&(n=e.number),10==(8191&w.JSInt_methods._shrOtherPositive$1(n,16))))switch(r){case 438:return f.call$1(E.JsNoSuchMethodError$(E.S(t)+" (Error "+r+")",null));case 445:case 5007:return f.call$1(E.NullError$(E.S(t)+" (Error "+r+")",null))}return e instanceof TypeError?(i=K.$get$TypeErrorDecoder_noSuchMethodPattern(),o=K.$get$TypeErrorDecoder_notClosurePattern(),a=K.$get$TypeErrorDecoder_nullCallPattern(),s=K.$get$TypeErrorDecoder_nullLiteralCallPattern(),l=K.$get$TypeErrorDecoder_undefinedCallPattern(),c=K.$get$TypeErrorDecoder_undefinedLiteralCallPattern(),u=K.$get$TypeErrorDecoder_nullPropertyPattern(),K.$get$TypeErrorDecoder_nullLiteralPropertyPattern(),h=K.$get$TypeErrorDecoder_undefinedPropertyPattern(),d=K.$get$TypeErrorDecoder_undefinedLiteralPropertyPattern(),null!=(p=i.matchTypeError$1(t))?f.call$1(E.JsNoSuchMethodError$(E.stringTypeCheck(t),p)):null!=(p=o.matchTypeError$1(t))?(p.method="call",f.call$1(E.JsNoSuchMethodError$(E.stringTypeCheck(t),p))):null!=(p=a.matchTypeError$1(t))||(null!=(p=s.matchTypeError$1(t))||(null!=(p=l.matchTypeError$1(t))||(null!=(p=c.matchTypeError$1(t))||(null!=(p=u.matchTypeError$1(t))||(null!=(p=s.matchTypeError$1(t))||(null!=(p=h.matchTypeError$1(t))||null!=(p=d.matchTypeError$1(t))))))))?f.call$1(E.NullError$(E.stringTypeCheck(t),p)):f.call$1(new E.UnknownJsTypeError("string"==typeof t?t:""))):e instanceof RangeError?"string"==typeof t&&-1!==t.indexOf("call stack")?new M.StackOverflowError:(t=function(e){try{return String(e)}catch(e){}return null}(e),f.call$1(new M.ArgumentError(!1,null,null,"string"==typeof t?t.replace(/^RangeError:\s*/,""):t))):"function"==typeof InternalError&&e instanceof InternalError&&"string"==typeof t&&"too much recursion"===t?new M.StackOverflowError:e}},getTraceFromException:function(e){var t;return e instanceof E.ExceptionAndStackTrace?e.stackTrace:null==e?new E._StackTrace(e):null!=(t=e.$cachedTrace)?t:e.$cachedTrace=new E._StackTrace(e)},objectHashCode:function(e){return null==e||"object"!=typeof e?T.get$hashCode$(e):E.Primitives_objectHashCode(e)},fillLiteralMap:function(e,t){var n,r,i,o=e.length;for(n=0;n<o;n=i)i=(r=n+1)+1,t.$indexSet(0,e[n],e[r]);return t},fillLiteralSet:function(e,t){var n,r=e.length;for(n=0;n<r;++n)t.add$1(0,e[n]);return t},invokeClosure:function(e,t,n,r,i,o){switch(E.interceptedTypeCheck(e,"$isFunction"),E.intTypeCheck(t)){case 0:return e.call$0();case 1:return e.call$1(n);case 2:return e.call$2(n,r);case 3:return e.call$3(n,r,i);case 4:return e.call$4(n,r,i,o)}throw E.wrapException(new M._Exception("Unsupported number of arguments for wrapped closure"))},convertDartClosureToJS:function(e,t){var n;if(null!=e)return(n=e.$identity)||(n=function(e,t,n){return function(r,i,o,a){return n(e,t,r,i,o,a)}}(e,t,E.invokeClosure),e.$identity=n),n},Closure_fromTearOff:function(e,t,n,r,i,o,a){var s,l,c,u,h,d,p,f,m=t[0],g=m.$callName,v=i?Object.create((new E.StaticClosure).constructor.prototype):Object.create(new E.BoundClosure(null,null,null,null).constructor.prototype);if(v.$initialize=v.constructor,i)s=function(){this.$initialize()};else{if("number"!=typeof(l=K.Closure_functionCounter))return l.$add();K.Closure_functionCounter=l+1,s=l=new Function("a,b,c,d"+l,"this.$initialize(a,b,c,d"+l+")")}for(v.constructor=s,s.prototype=v,i?(v.$static_name=a,c=m):(c=E.Closure_forwardCallTo(e,m,o)).$reflectionInfo=r,u=E.Closure__computeSignatureFunctionLegacy(r,i,o),v.$signature=u,v[g]=c,h=c,d=1;d<t.length;++d)null!=(f=(p=t[d]).$callName)&&(p=i?p:E.Closure_forwardCallTo(e,p,o),v[f]=p),d===n&&(p.$reflectionInfo=r,h=p);return v["call*"]=h,v.$requiredArgCount=m.$requiredArgCount,v.$defaultValues=m.$defaultValues,s},Closure__computeSignatureFunctionLegacy:function(e,t,n){var r,i,o,a,s;if("number"==typeof e)return i=E.getType,o=e,function(){return i(o)};if("function"==typeof e)return t?e:(r=n?E.BoundClosure_receiverOf:E.BoundClosure_selfOf,a=e,s=r,function(){return a.apply({$receiver:s(this)},arguments)});throw E.wrapException("Error in functionType of tearoff")},Closure_cspForwardCall:function(e,t,n,r){var i,o,a=E.BoundClosure_selfOf;switch(t?-1:e){case 0:return function(e,t){return function(){return t(this)[e]()}}(n,a);case 1:return function(e,t){return function(n){return t(this)[e](n)}}(n,a);case 2:return function(e,t){return function(n,r){return t(this)[e](n,r)}}(n,a);case 3:return function(e,t){return function(n,r,i){return t(this)[e](n,r,i)}}(n,a);case 4:return function(e,t){return function(n,r,i,o){return t(this)[e](n,r,i,o)}}(n,a);case 5:return function(e,t){return function(n,r,i,o,a){return t(this)[e](n,r,i,o,a)}}(n,a);default:return i=r,o=a,function(){return i.apply(o(this),arguments)}}},Closure_forwardCallTo:function(e,t,n){var r,i,o,a,s,l,c;return n?E.Closure_forwardInterceptedCallTo(e,t):(r=t.$stubName,i=t.length,o=e[r],(s=!(a=null==t?null==o:t===o)||i>=27)?E.Closure_cspForwardCall(i,!a,r,t):0===i?"number"!=typeof(a=K.Closure_functionCounter)?a.$add():(K.Closure_functionCounter=a+1,a="return function(){var "+(l="self"+a)+" = this.",s=K.BoundClosure_selfFieldNameCache,new Function(a+E.S(null==s?K.BoundClosure_selfFieldNameCache=E.BoundClosure_computeFieldNamed("self"):s)+";return "+l+"."+E.S(r)+"();}")()):(c="abcdefghijklmnopqrstuvwxyz".split("").splice(0,i).join(","),"number"!=typeof(a=K.Closure_functionCounter)?a.$add():(K.Closure_functionCounter=a+1,a="return function("+(c+=a)+"){return this.",s=K.BoundClosure_selfFieldNameCache,new Function(a+E.S(null==s?K.BoundClosure_selfFieldNameCache=E.BoundClosure_computeFieldNamed("self"):s)+"."+E.S(r)+"("+c+");}")())))},Closure_cspForwardInterceptedCall:function(e,t,n,r){var i,o,a,s=E.BoundClosure_selfOf,l=E.BoundClosure_receiverOf;switch(t?-1:e){case 0:throw E.wrapException(E.RuntimeError$("Intercepted function with no arguments."));case 1:return i=n,o=s,a=l,function(){return o(this)[i](a(this))};case 2:return function(e,t,n){return function(r){return t(this)[e](n(this),r)}}(n,s,l);case 3:return function(e,t,n){return function(r,i){return t(this)[e](n(this),r,i)}}(n,s,l);case 4:return function(e,t,n){return function(r,i,o){return t(this)[e](n(this),r,i,o)}}(n,s,l);case 5:return function(e,t,n){return function(r,i,o,a){return t(this)[e](n(this),r,i,o,a)}}(n,s,l);case 6:return function(e,t,n){return function(r,i,o,a,s){return t(this)[e](n(this),r,i,o,a,s)}}(n,s,l);default:return function(e,t,n,r){return function(){return r=[n(this)],Array.prototype.push.apply(r,arguments),e.apply(t(this),r)}}(r,s,l)}},Closure_forwardInterceptedCallTo:function(e,t){var n,r,i,o,a,s,l=K.BoundClosure_selfFieldNameCache;return null==l&&(l=K.BoundClosure_selfFieldNameCache=E.BoundClosure_computeFieldNamed("self")),null==(n=K.BoundClosure_receiverFieldNameCache)&&(n=K.BoundClosure_receiverFieldNameCache=E.BoundClosure_computeFieldNamed("receiver")),r=t.$stubName,i=t.length,o=e[r],!(a=null==t?null==o:t===o)||i>=28?E.Closure_cspForwardInterceptedCall(i,!a,r,t):1===i?(l="return function(){return this."+E.S(l)+"."+E.S(r)+"(this."+E.S(n)+");","number"!=typeof(n=K.Closure_functionCounter)?n.$add():(K.Closure_functionCounter=n+1,new Function(l+n+"}")())):(l="return function("+(s="abcdefghijklmnopqrstuvwxyz".split("").splice(0,i-1).join(","))+"){return this."+E.S(l)+"."+E.S(r)+"(this."+E.S(n)+", "+s+");","number"!=typeof(n=K.Closure_functionCounter)?n.$add():(K.Closure_functionCounter=n+1,new Function(l+n+"}")()))},closureFromTearOff:function(e,t,n,r,i,o,a){return E.Closure_fromTearOff(e,t,n,r,!!i,!!o,a)},BoundClosure_selfOf:function(e){return e._self},BoundClosure_receiverOf:function(e){return e._receiver},BoundClosure_computeFieldNamed:function(e){var t,n,r,i=new E.BoundClosure("self","target","receiver","name"),o=T.JSArray_markFixedList(Object.getOwnPropertyNames(i));for(t=o.length,n=0;n<t;++n)if(i[r=o[n]]===e)return r},boolConversionCheck:function(e){return null==e&&E.assertThrow("boolean expression must not be null"),e},stringTypeCheck:function(e){if(null==e)return e;if("string"==typeof e)return e;throw E.wrapException(E.TypeErrorImplementation$(e,"String"))},doubleTypeCheck:function(e){if(null==e)return e;if("number"==typeof e)return e;throw E.wrapException(E.TypeErrorImplementation$(e,"double"))},numTypeCheck:function(e){if(null==e)return e;if("number"==typeof e)return e;throw E.wrapException(E.TypeErrorImplementation$(e,"num"))},boolTypeCheck:function(e){if(null==e)return e;if("boolean"==typeof e)return e;throw E.wrapException(E.TypeErrorImplementation$(e,"bool"))},intTypeCheck:function(e){if(null==e)return e;if("number"==typeof e&&Math.floor(e)===e)return e;throw E.wrapException(E.TypeErrorImplementation$(e,"int"))},propertyTypeError:function(e,t){throw E.wrapException(E.TypeErrorImplementation$(e,E.unminifyOrTag(E.stringTypeCheck(t).substring(3))))},propertyTypeCastError:function(e,t){throw E.wrapException(E.CastErrorImplementation$(e,E.unminifyOrTag(E.stringTypeCheck(t).substring(3))))},interceptedTypeCheck:function(e,t){return null==e?e:"object"!=typeof e&&"function"!=typeof e||!T.getInterceptor$(e)[t]?void E.propertyTypeError(e,t):e},interceptedTypeCast:function(e,t){if(null==e||("object"==typeof e||"function"==typeof e)&&T.getInterceptor$(e)[t])return e;E.propertyTypeCastError(e,t)},stringSuperNativeTypeCheck:function(e,t){return null==e||"string"==typeof e||T.getInterceptor$(e)[t]?e:void E.propertyTypeError(e,t)},listTypeCheck:function(e){if(null==e)return e;if(T.getInterceptor$(e).$isList)return e;throw E.wrapException(E.TypeErrorImplementation$(e,"List<dynamic>"))},listSuperNativeTypeCheck:function(e,t){var n;return null==e||(n=T.getInterceptor$(e)).$isList||n[t]?e:void E.propertyTypeError(e,t)},listSuperNativeTypeCast:function(e,t){var n=T.getInterceptor$(e);return n.$isList||null==e||n[t]?e:void E.propertyTypeCastError(e,t)},extractFunctionTypeObjectFromInternal:function(e){var t;if("$signature"in e)return"number"==typeof(t=e.$signature)?Q.types[E.intTypeCheck(t)]:e.$signature()},functionTypeTest:function(e,t){var n;return"function"==typeof e||null!=(n=E.extractFunctionTypeObjectFromInternal(T.getInterceptor$(e)))&&E._isFunctionSubtype(n,null,t,null)},functionTypeCheck:function(e,t){var n,r;if(null==e)return e;if(K._inTypeAssertion)return e;K._inTypeAssertion=!0;try{if(E.functionTypeTest(e,t))return e;throw n=E.runtimeTypeToString(t),r=E.TypeErrorImplementation$(e,n),E.wrapException(r)}finally{K._inTypeAssertion=!1}},futureOrCheck:function(e,t){return null==e||E.checkSubtypeOfRuntimeType(e,t)||E.throwExpression(E.TypeErrorImplementation$(e,E.runtimeTypeToString(t))),e},TypeErrorImplementation$:function(e,t){return new E.TypeErrorImplementation("TypeError: "+M.Error_safeToString(e)+": type '"+E.S(E._typeDescription(e))+"' is not a subtype of type '"+t+"'")},CastErrorImplementation$:function(e,t){return new E.CastErrorImplementation("CastError: "+M.Error_safeToString(e)+": type '"+E.S(E._typeDescription(e))+"' is not a subtype of type '"+t+"'")},_typeDescription:function(e){var t,n=T.getInterceptor$(e);return n.$isClosure?null!=(t=E.extractFunctionTypeObjectFromInternal(n))?E.runtimeTypeToString(t):"Closure":E.Primitives_objectTypeName(e)},assertThrow:function(e){throw E.wrapException(new E._AssertionError(e))},throwCyclicInit:function(e){throw E.wrapException(new M.CyclicInitializationError(e))},RuntimeError$:function(e){return new E.RuntimeError(e)},getIsolateAffinityTag:function(e){return Q.getIsolateTag(e)},createRuntimeType:function(e){return new E.TypeImpl(e)},setRuntimeTypeInfo:function(e,t){return e.$ti=t,e},getRuntimeTypeInfo:function(e){if(null!=e)return e.$ti},getRuntimeTypeArguments:function(e,t,n){return E.substitute(e["$as"+E.S(n)],E.getRuntimeTypeInfo(t))},getRuntimeTypeArgumentIntercepted:function(e,t,n,r){var i=E.substitute(e["$as"+E.S(n)],E.getRuntimeTypeInfo(t));return null==i?null:i[r]},getRuntimeTypeArgument:function(e,t,n){var r=E.substitute(e["$as"+E.S(t)],E.getRuntimeTypeInfo(e));return null==r?null:r[n]},getTypeArgumentByIndex:function(e,t){var n=E.getRuntimeTypeInfo(e);return null==n?null:n[t]},runtimeTypeToString:function(e){return E._runtimeTypeToString(e,null)},_runtimeTypeToString:function(e,t){var n,r;return null==e?"dynamic":-1===e?"void":"object"==typeof e&&null!==e&&e.constructor===Array?E.unminifyOrTag(e[0].name)+E._joinArguments(e,1,t):"function"==typeof e?E.unminifyOrTag(e.name):-2===e?"dynamic":"number"==typeof e?(E.intTypeCheck(e),null==t||e<0||e>=t.length?"unexpected-generic-index:"+e:(r=(n=t.length)-e-1)<0||r>=n?E.ioore(t,r):E.S(t[r])):"func"in e?E._functionRtiToString(e,t):"futureOr"in e?"FutureOr<"+E._runtimeTypeToString("type"in e?e.type:null,t)+">":"unknown-reified-type"},_functionRtiToString:function(e,t){var n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,v,y,_,b;if("bounds"in e){for(n=e.bounds,null==t?(t=E.setRuntimeTypeInfo([],[M.String]),r=null):r=t.length,i=t.length,a=o=n.length;a>0;--a)w.JSArray_methods.add$1(t,"T"+(i+a));for(s="<",l="",a=0;a<o;++a,l=", "){if(s+=l,(u=(c=t.length)-a-1)<0)return E.ioore(t,u);s=w.JSString_methods.$add(s,t[u]),null!=(h=n[a])&&h!==M.Object&&(s+=" extends "+E._runtimeTypeToString(h,t))}s+=">"}else s="",r=null;if(d=e.v?"void":E._runtimeTypeToString(e.ret,t),"args"in e)for(c=(p=e.args).length,f="",m="",g=0;g<c;++g,m=", ")v=p[g],f=f+m+E._runtimeTypeToString(v,t);else f="",m="";if("opt"in e){for(f+=m+"[",c=(y=e.opt).length,m="",g=0;g<c;++g,m=", ")v=y[g],f=f+m+E._runtimeTypeToString(v,t);f+="]"}if("named"in e){for(_=e.named,f+=m+"{",u=(c=E.extractKeys(_)).length,m="",g=0;g<u;++g,m=", ")b=E.stringTypeCheck(c[g]),f=f+m+E._runtimeTypeToString(_[b],t)+" "+E.S(b);f+="}"}return null!=r&&(t.length=r),s+"("+f+") => "+d},_joinArguments:function(e,t,n){var r,i,o,a,s;if(null==e)return"";for(r=new M.StringBuffer(""),i=t,o="",!0,a="";i<e.length;++i,o=", ")r._contents=a+o,null!=(s=e[i])&&!1,a=r._contents+=E._runtimeTypeToString(s,n);return"<"+r.toString$0(0)+">"},substitute:function(e,t){return null==e?t:null!=(e=e.apply(null,t))?"object"==typeof e&&null!==e&&e.constructor===Array?e:"function"==typeof e?e.apply(null,t):t:void 0},checkSubtype:function(e,t,n,r){var i,o;return null!=e&&(i=E.getRuntimeTypeInfo(e),null!=(o=T.getInterceptor$(e))[t]&&E.areSubtypes(E.substitute(o[r],i),null,n,null))},subtypeCast:function(e,t,n,r){if(null==e)return e;if(E.checkSubtype(e,t,n,r))return e;throw E.wrapException(E.CastErrorImplementation$(e,(i=E.unminifyOrTag(t.substring(3))+E._joinArguments(n,0,null),o=Q.mangledGlobalNames,i.replace(/[^<,> ]+/g,(function(e){return o[e]||e})))));var i,o},assertSubtype:function(e,t,n,r){if(null==e)return e;if(E.checkSubtype(e,t,n,r))return e;throw E.wrapException(E.TypeErrorImplementation$(e,(i=E.unminifyOrTag(t.substring(3))+E._joinArguments(n,0,null),o=Q.mangledGlobalNames,i.replace(/[^<,> ]+/g,(function(e){return o[e]||e})))));var i,o},areSubtypes:function(e,t,n,r){var i,o;if(null==n)return!0;if(null==e){for(i=n.length,o=0;o<i;++o)if(!E._isSubtype(null,null,n[o],r))return!1;return!0}for(i=e.length,o=0;o<i;++o)if(!E._isSubtype(e[o],t,n[o],r))return!1;return!0},computeSignature:function(e,t,n){return e.apply(t,E.substitute(T.getInterceptor$(t)["$as"+E.S(n)],E.getRuntimeTypeInfo(t)))},isSupertypeOfNullRecursive:function(e){var t;return"number"!=typeof e&&("futureOr"in e&&(t="type"in e?e.type:null,null==e||"Object"===e.name||"Null"===e.name||-1===e||-2===e||E.isSupertypeOfNullRecursive(t)))},checkSubtypeOfRuntimeType:function(e,t){var n,r;if(null==e)return null==t||"Object"===t.name||"Null"===t.name||-1===t||-2===t||E.isSupertypeOfNullRecursive(t);if(null==t||-1===t||"Object"===t.name||-2===t)return!0;if("object"==typeof t){if("futureOr"in t&&E.checkSubtypeOfRuntimeType(e,"type"in t?t.type:null))return!0;if("func"in t)return E.functionTypeTest(e,t)}return n=T.getInterceptor$(e).constructor,null!=(r=E.getRuntimeTypeInfo(e))&&((r=r.slice()).splice(0,0,n),n=r),E._isSubtype(n,null,t,null)},subtypeOfRuntimeTypeCast:function(e,t){if(null!=e&&!E.checkSubtypeOfRuntimeType(e,t))throw E.wrapException(E.CastErrorImplementation$(e,E.runtimeTypeToString(t)));return e},assertSubtypeOfRuntimeType:function(e,t){if(null!=e&&!E.checkSubtypeOfRuntimeType(e,t))throw E.wrapException(E.TypeErrorImplementation$(e,E.runtimeTypeToString(t)));return e},_isSubtype:function(e,t,n,r){var i,o,a,s,l,c,u,h,d;if(e===n)return!0;if(null==n||-1===n||"Object"===n.name||-2===n)return!0;if(-2===e)return!0;if(null==e||-1===e||"Object"===e.name||-2===e)return"number"!=typeof n&&("futureOr"in n&&E._isSubtype(e,t,"type"in n?n.type:null,r));if("number"==typeof e)return E._isSubtype(t[E.intTypeCheck(e)],t,n,r);if("number"==typeof n)return!1;if("Null"===e.name)return!0;if(o=(i="object"==typeof e&&null!==e&&e.constructor===Array)?e[0]:e,"futureOr"in n)return a="type"in n?n.type:null,"futureOr"in e?E._isSubtype("type"in e?e.type:null,t,a,r):!!E._isSubtype(e,t,a,r)||"$isFuture"in o.prototype&&(s=o.prototype.$asFuture,l=E.substitute(s,i?e.slice(1):null),E._isSubtype("object"==typeof l&&null!==l&&l.constructor===Array?l[0]:null,t,a,r));if("func"in n)return E._isFunctionSubtype(e,t,n,r);if("func"in e)return"Function"===n.name;if((u=(c="object"==typeof n&&null!==n&&n.constructor===Array)?n[0]:n)!==o){if(!("$is"+(h=u.name)in o.prototype))return!1;d=o.prototype["$as"+h]}else d=null;return!c||(i=i?e.slice(1):null,c=n.slice(1),E.areSubtypes(E.substitute(d,i),t,c,r))},_isFunctionSubtype:function(e,t,n,r){var i,o,a,s,l,c,u,h,d,p,f,m,g,v,y;if(!("func"in e))return!1;if("bounds"in e){if(!("bounds"in n))return!1;if(i=e.bounds,o=n.bounds,i.length!==o.length)return!1;t=null==t?i:i.concat(t),r=null==r?o:o.concat(r)}else if("bounds"in n)return!1;if(!E._isSubtype(e.ret,t,n.ret,r))return!1;if(a=e.args,s=n.args,l=e.opt,c=n.opt,u=null!=a?a.length:0,h=null!=s?s.length:0,d=null!=l?l.length:0,p=null!=c?c.length:0,u>h)return!1;if(u+d<h+p)return!1;for(f=0;f<u;++f)if(!E._isSubtype(s[f],r,a[f],t))return!1;for(m=f,g=0;m<h;++g,++m)if(!E._isSubtype(s[m],r,l[g],t))return!1;for(m=0;m<p;++g,++m)if(!E._isSubtype(c[m],r,l[g],t))return!1;return v=e.named,null==(y=n.named)||null!=v&&E.namedParametersSubtypeCheck(v,t,y,r)},namedParametersSubtypeCheck:function(e,t,n,r){var i,o,a,s=Object.getOwnPropertyNames(n);for(i=s.length,o=0;o<i;++o){if(a=s[o],!Object.hasOwnProperty.call(e,a))return!1;if(!E._isSubtype(n[a],r,e[a],t))return!1}return!0},defineProperty:function(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0,configurable:!0})},lookupAndCacheInterceptor:function(e){var t,n,r,i,o=E.stringTypeCheck(K.getTagFunction.call$1(e)),a=K.dispatchRecordsForInstanceTags[o];if(null!=a)return Object.defineProperty(e,Q.dispatchPropertyName,{value:a,enumerable:!1,writable:!0,configurable:!0}),a.i;if(null!=(t=K.interceptorsForUncacheableTags[o]))return t;if(null==(n=Q.interceptorsByTag[o])&&null!=(o=E.stringTypeCheck(K.alternateTagFunction.call$2(e,o)))){if(null!=(a=K.dispatchRecordsForInstanceTags[o]))return Object.defineProperty(e,Q.dispatchPropertyName,{value:a,enumerable:!1,writable:!0,configurable:!0}),a.i;if(null!=(t=K.interceptorsForUncacheableTags[o]))return t;n=Q.interceptorsByTag[o]}if(null!=n){if(t=n.prototype,"!"===(r=o[0]))return a=E.makeLeafDispatchRecord(t),K.dispatchRecordsForInstanceTags[o]=a,Object.defineProperty(e,Q.dispatchPropertyName,{value:a,enumerable:!1,writable:!0,configurable:!0}),a.i;if("~"===r)return K.interceptorsForUncacheableTags[o]=t,t;if("-"===r)return i=E.makeLeafDispatchRecord(t),Object.defineProperty(Object.getPrototypeOf(e),Q.dispatchPropertyName,{value:i,enumerable:!1,writable:!0,configurable:!0}),i.i;if("+"===r)return E.patchInteriorProto(e,t);if("*"===r)throw E.wrapException(M.UnimplementedError$(o));return!0===Q.leafTags[o]?(i=E.makeLeafDispatchRecord(t),Object.defineProperty(Object.getPrototypeOf(e),Q.dispatchPropertyName,{value:i,enumerable:!1,writable:!0,configurable:!0}),i.i):E.patchInteriorProto(e,t)}},patchInteriorProto:function(e,t){var n=Object.getPrototypeOf(e);return Object.defineProperty(n,Q.dispatchPropertyName,{value:T.makeDispatchRecord(t,n,null,null),enumerable:!1,writable:!0,configurable:!0}),t},makeLeafDispatchRecord:function(e){return T.makeDispatchRecord(e,!1,null,!!e.$isJavaScriptIndexingBehavior)},makeDefaultDispatchRecord:function(e,t,n){var r=t.prototype;return!0===Q.leafTags[e]?E.makeLeafDispatchRecord(r):T.makeDispatchRecord(r,n,null,null)},initNativeDispatch:function(){!0!==K.initNativeDispatchFlag&&(K.initNativeDispatchFlag=!0,E.initNativeDispatchContinue())},initNativeDispatchContinue:function(){var e,t,n,r,i,o,a,s;if(K.dispatchRecordsForInstanceTags=Object.create(null),K.interceptorsForUncacheableTags=Object.create(null),E.initHooks(),e=Q.interceptorsByTag,t=Object.getOwnPropertyNames(e),"undefined"!=typeof window)for(window,n=function(){},r=0;r<t.length;++r)i=t[r],null!=(o=K.prototypeForTagFunction.call$1(i))&&null!=(a=E.makeDefaultDispatchRecord(i,e[i],o))&&(Object.defineProperty(o,Q.dispatchPropertyName,{value:a,enumerable:!1,writable:!0,configurable:!0}),n.prototype=o);for(r=0;r<t.length;++r)i=t[r],/^[A-Za-z_]/.test(i)&&(s=e[i],e["!"+i]=s,e["~"+i]=s,e["-"+i]=s,e["+"+i]=s,e["*"+i]=s)},initHooks:function(){var e,t,n,r,i,o,a=w.C_JS_CONST0();if(a=E.applyHooksTransformer(w.C_JS_CONST1,E.applyHooksTransformer(w.C_JS_CONST2,E.applyHooksTransformer(w.C_JS_CONST3,E.applyHooksTransformer(w.C_JS_CONST3,E.applyHooksTransformer(w.C_JS_CONST4,E.applyHooksTransformer(w.C_JS_CONST5,E.applyHooksTransformer(w.C_JS_CONST6(w.C_JS_CONST),a))))))),"undefined"!=typeof dartNativeDispatchHooksTransformer&&("function"==typeof(e=dartNativeDispatchHooksTransformer)&&(e=[e]),e.constructor==Array))for(t=0;t<e.length;++t)"function"==typeof(n=e[t])&&(a=n(a)||a);r=a.getTag,i=a.getUnknownTag,o=a.prototypeForTag,K.getTagFunction=new E.initHooks_closure(r),K.alternateTagFunction=new E.initHooks_closure0(i),K.prototypeForTagFunction=new E.initHooks_closure1(o)},applyHooksTransformer:function(e,t){return e(t)||t},JSSyntaxRegExp_makeNative:function(e,t,n,r,i,o){var a=function(e,t){try{return new RegExp(e,t)}catch(e){return e}}(e,(t?"m":"")+(n?"":"i")+(r?"u":"")+(i?"s":"")+(o?"g":""));if(a instanceof RegExp)return a;throw E.wrapException(M.FormatException$("Illegal RegExp pattern ("+String(a)+")",e,null))},escapeReplacement:function(e){return e.indexOf("$",0)>=0?e.replace(/\$/g,"$$$$"):e},quoteStringForRegExp:function(e){return/[[\]{}()*+?.\\^$|]/.test(e)?e.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&"):e},stringReplaceAllUnchecked:function(e,t,n){return E.stringReplaceAllUncheckedString(e,t,n)},stringReplaceAllUncheckedString:function(e,t,n){var r,i,o;if(""===t){if(""===e)return n;for(r=e.length,i=n,o=0;o<r;++o)i=i+e[o]+n;return i.charCodeAt(0),i}return e.indexOf(t,0)<0?e:e.length<500||n.indexOf("$",0)>=0?e.split(t).join(n):e.replace(new RegExp(E.quoteStringForRegExp(t),"g"),E.escapeReplacement(n))},ConstantMapView:function(e,t){this._map=e,this.$ti=t},ConstantMap:function(){},ConstantStringMap:function(e,t,n,r){var i=this;i.__js_helper$_length=e,i._jsObject=t,i.__js_helper$_keys=n,i.$ti=r},_ConstantMapKeyIterable:function(e,t){this.__js_helper$_map=e,this.$ti=t},GeneralConstantMap:function(e,t){this._jsData=e,this.$ti=t},JSInvocationMirror:function(e,t,n,r,i){var o=this;o._memberName=e,o._kind=t,o._arguments=n,o._namedArgumentNames=r,o._typeArgumentCount=i},Primitives_functionNoSuchMethod_closure:function(e,t,n){this._box_0=e,this.namedArgumentList=t,this.$arguments=n},TypeErrorDecoder:function(e,t,n,r,i,o){var a=this;a._pattern=e,a._arguments=t,a._argumentsExpr=n,a._expr=r,a._method=i,a._receiver=o},NullError:function(e,t){this._message=e,this._method=t},JsNoSuchMethodError:function(e,t,n){this._message=e,this._method=t,this._receiver=n},UnknownJsTypeError:function(e){this._message=e},ExceptionAndStackTrace:function(e,t){this.dartException=e,this.stackTrace=t},unwrapException_saveStackTrace:function(e){this.ex=e},_StackTrace:function(e){this._exception=e,this._trace=null},Closure:function(){},TearOffClosure:function(){},StaticClosure:function(){},BoundClosure:function(e,t,n,r){var i=this;i._self=e,i._target=t,i._receiver=n,i._name=r},TypeErrorImplementation:function(e){this.message=e},CastErrorImplementation:function(e){this.message=e},RuntimeError:function(e){this.message=e},_AssertionError:function(e){this.message=e},TypeImpl:function(e){this._rti=e,this._hashCode=this.__typeName=null},JsLinkedHashMap:function(e){var t=this;t.__js_helper$_length=0,t._last=t._first=t.__js_helper$_rest=t.__js_helper$_nums=t.__js_helper$_strings=null,t._modifications=0,t.$ti=e},JsLinkedHashMap_values_closure:function(e){this.$this=e},LinkedHashMapCell:function(e,t){this.hashMapCellKey=e,this.hashMapCellValue=t,this._next=null},LinkedHashMapKeyIterable:function(e,t){this.__js_helper$_map=e,this.$ti=t},LinkedHashMapKeyIterator:function(e,t,n){var r=this;r.__js_helper$_map=e,r._modifications=t,r.__js_helper$_current=r._cell=null,r.$ti=n},initHooks_closure:function(e){this.getTag=e},initHooks_closure0:function(e){this.getUnknownTag=e},initHooks_closure1:function(e){this.prototypeForTag=e},JSSyntaxRegExp:function(e,t){var n=this;n.pattern=e,n._nativeRegExp=t,n._nativeAnchoredRegExp=n._nativeGlobalRegExp=null},_MatchImplementation:function(e){this._match=e},_checkViewArguments:function(e,t,n){},_ensureNativeList:function(e){return e},NativeByteData_NativeByteData$view:function(e,t,n){return E._checkViewArguments(e,t,n),new DataView(e,t)},NativeFloat32List_NativeFloat32List:function(e){return new Float32Array(e)},NativeInt8List__create1:function(e){return new Int8Array(e)},NativeUint16List_NativeUint16List$view:function(e,t,n){return E._checkViewArguments(e,t,n),new Uint16Array(e,t,n)},NativeUint32List_NativeUint32List$view:function(e,t,n){return E._checkViewArguments(e,t,n),new Uint32Array(e,t,n)},NativeUint8List_NativeUint8List$view:function(e,t,n){return E._checkViewArguments(e,t,n),new Uint8Array(e,t,n)},_checkValidIndex:function(e,t,n){if(e>>>0!==e||e>=n)throw E.wrapException(E.diagnoseIndexError(t,e))},_checkValidRange:function(e,t,n){if(e>>>0!==e||(t>>>0!==t||e>t||t>n))throw E.wrapException(E.diagnoseRangeError(e,t,n));return t},NativeTypedData:function(){},NativeByteData:function(){},NativeTypedArray:function(){},NativeTypedArrayOfDouble:function(){},NativeTypedArrayOfInt:function(){},NativeFloat32List:function(){},NativeFloat64List:function(){},NativeInt16List:function(){},NativeInt32List:function(){},NativeInt8List:function(){},NativeUint16List:function(){},NativeUint32List:function(){},NativeUint8ClampedList:function(){},NativeUint8List:function(){},_NativeTypedArrayOfDouble_NativeTypedArray_ListMixin:function(){},_NativeTypedArrayOfDouble_NativeTypedArray_ListMixin_FixedLengthListMixin:function(){},_NativeTypedArrayOfInt_NativeTypedArray_ListMixin:function(){},_NativeTypedArrayOfInt_NativeTypedArray_ListMixin_FixedLengthListMixin:function(){},extractKeys:function(e){return T.JSArray_JSArray$markFixed(e?Object.keys(e):[],null)},unmangleGlobalNameIfPreservedAnyways:function(e){return Q.mangledGlobalNames[e]}},T={makeDispatchRecord:function(e,t,n,r){return{i:e,p:t,e:n,x:r}},getNativeInterceptor:function(e){var t,n,r,i,o=e[Q.dispatchPropertyName];if(null==o&&null==K.initNativeDispatchFlag&&(E.initNativeDispatch(),o=e[Q.dispatchPropertyName]),null!=o){if(!1===(t=o.p))return o.i;if(!0===t)return e;if(t===(n=Object.getPrototypeOf(e)))return o.i;if(o.e===n)throw E.wrapException(M.UnimplementedError$("Return interceptor for "+E.S(t(e,o))))}return null!=(i=null==(r=e.constructor)?null:r[K.$get$JS_INTEROP_INTERCEPTOR_TAG()])||null!=(i=E.lookupAndCacheInterceptor(e))?i:"function"==typeof e?w.JavaScriptFunction_methods:null==(t=Object.getPrototypeOf(e))||t===Object.prototype?w.PlainJavaScriptObject_methods:"function"==typeof r?(Object.defineProperty(r,K.$get$JS_INTEROP_INTERCEPTOR_TAG(),{value:w.UnknownJavaScriptObject_methods,enumerable:!1,writable:!0,configurable:!0}),w.UnknownJavaScriptObject_methods):w.UnknownJavaScriptObject_methods},JSArray_JSArray$fixed:function(e,t){if(e<0||e>4294967295)throw E.wrapException(M.RangeError$range(e,0,4294967295,"length",null));return T.JSArray_JSArray$markFixed(new Array(e),t)},JSArray_JSArray$markFixed:function(e,t){return T.JSArray_markFixedList(E.setRuntimeTypeInfo(e,[t]))},JSArray_markFixedList:function(e){return e.fixed$length=Array,e},JSString__isWhitespace:function(e){if(e<256)switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 133:case 160:return!0;default:return!1}switch(e){case 5760:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}},JSString__skipTrailingWhitespace:function(e,t){for(var n,r;t>0&&(n=t-1,32===(r=w.JSString_methods.codeUnitAt$1(e,n))||13===r||T.JSString__isWhitespace(r));t=n);return t},getInterceptor$:function(e){return"number"==typeof e?Math.floor(e)==e?T.JSInt.prototype:T.JSDouble.prototype:"string"==typeof e?T.JSString.prototype:null==e?T.JSNull.prototype:"boolean"==typeof e?T.JSBool.prototype:e.constructor==Array?T.JSArray.prototype:"object"!=typeof e?"function"==typeof e?T.JavaScriptFunction.prototype:e:e instanceof M.Object?e:T.getNativeInterceptor(e)},getInterceptor$asx:function(e){return"string"==typeof e?T.JSString.prototype:null==e?e:e.constructor==Array?T.JSArray.prototype:"object"!=typeof e?"function"==typeof e?T.JavaScriptFunction.prototype:e:e instanceof M.Object?e:T.getNativeInterceptor(e)},getInterceptor$ax:function(e){return null==e?e:e.constructor==Array?T.JSArray.prototype:"object"!=typeof e?"function"==typeof e?T.JavaScriptFunction.prototype:e:e instanceof M.Object?e:T.getNativeInterceptor(e)},getInterceptor$n:function(e){return"number"==typeof e?T.JSNumber.prototype:null==e||e instanceof M.Object?e:T.UnknownJavaScriptObject.prototype},getInterceptor$s:function(e){return"string"==typeof e?T.JSString.prototype:null==e||e instanceof M.Object?e:T.UnknownJavaScriptObject.prototype},getInterceptor$x:function(e){return null==e?e:"object"!=typeof e?"function"==typeof e?T.JavaScriptFunction.prototype:e:e instanceof M.Object?e:T.getNativeInterceptor(e)},set$length$asx:function(e,t){return T.getInterceptor$asx(e).set$length(e,t)},set$supportedExtensions$x:function(e,t){return T.getInterceptor$x(e).set$supportedExtensions(e,t)},set$validateBytes$x:function(e,t){return T.getInterceptor$x(e).set$validateBytes(e,t)},set$validateString$x:function(e,t){return T.getInterceptor$x(e).set$validateString(e,t)},set$version$x:function(e,t){return T.getInterceptor$x(e).set$version(e,t)},get$hashCode$:function(e){return T.getInterceptor$(e).get$hashCode(e)},get$isEmpty$asx:function(e){return T.getInterceptor$asx(e).get$isEmpty(e)},get$isNotEmpty$asx:function(e){return T.getInterceptor$asx(e).get$isNotEmpty(e)},get$iterator$ax:function(e){return T.getInterceptor$ax(e).get$iterator(e)},get$length$asx:function(e){return T.getInterceptor$asx(e).get$length(e)},get$validateAccessorData$x:function(e){return T.getInterceptor$x(e).get$validateAccessorData(e)},get$writeTimestamp$x:function(e){return T.getInterceptor$x(e).get$writeTimestamp(e)},$eq$:function(e,t){return null==e?null==t:"object"!=typeof e?null!=t&&e===t:T.getInterceptor$(e).$eq(e,t)},$index$asx:function(e,t){return"number"==typeof t&&(e.constructor==Array||"string"==typeof e||E.isJsIndexable(e,e[Q.dispatchPropertyName]))&&t>>>0===t&&t<e.length?e[t]:T.getInterceptor$asx(e).$index(e,t)},$indexSet$ax:function(e,t,n){return T.getInterceptor$ax(e).$indexSet(e,t,n)},_codeUnitAt$1$s:function(e,t){return T.getInterceptor$s(e)._codeUnitAt$1(e,t)},add$1$ax:function(e,t){return T.getInterceptor$ax(e).add$1(e,t)},cast$1$0$ax:function(e,t){return T.getInterceptor$ax(e).cast$1$0(e,t)},contains$1$ax:function(e,t){return T.getInterceptor$ax(e).contains$1(e,t)},elementAt$1$ax:function(e,t){return T.getInterceptor$ax(e).elementAt$1(e,t)},fillRange$3$x:function(e,t,n,r){return T.getInterceptor$x(e).fillRange$3(e,t,n,r)},map$1$1$ax:function(e,t,n){return T.getInterceptor$ax(e).map$1$1(e,t,n)},noSuchMethod$1$:function(e,t){return T.getInterceptor$(e).noSuchMethod$1(e,t)},skip$1$ax:function(e,t){return T.getInterceptor$ax(e).skip$1(e,t)},startsWith$1$s:function(e,t){return T.getInterceptor$s(e).startsWith$1(e,t)},then$1$1$x:function(e,t,n){return T.getInterceptor$x(e).then$1$1(e,t,n)},then$2$x:function(e,t,n){return T.getInterceptor$x(e).then$2(e,t,n)},toInt$0$n:function(e){return T.getInterceptor$n(e).toInt$0(e)},toList$1$growable$ax:function(e,t){return T.getInterceptor$ax(e).toList$1$growable(e,t)},toString$0$:function(e){return T.getInterceptor$(e).toString$0(e)},trimRight$0$s:function(e){return T.getInterceptor$s(e).trimRight$0(e)},Interceptor:function(){},JSBool:function(){},JSNull:function(){},JavaScriptObject:function(){},PlainJavaScriptObject:function(){},UnknownJavaScriptObject:function(){},JavaScriptFunction:function(){},JSArray:function(e){this.$ti=e},JSUnmodifiableArray:function(e){this.$ti=e},ArrayIterator:function(e,t,n){var r=this;r._iterable=e,r._length=t,r._index=0,r._current=null,r.$ti=n},JSNumber:function(){},JSInt:function(){},JSDouble:function(){},JSString:function(){}},M={_AsyncRun__initializeScheduleImmediate:function(){var e,t,n={};return null!=i.scheduleImmediate?M.async__AsyncRun__scheduleImmediateJsOverride$closure():null!=i.MutationObserver&&null!=i.document?(e=i.document.createElement("div"),t=i.document.createElement("span"),n.storedCallback=null,new i.MutationObserver(E.convertDartClosureToJS(new M._AsyncRun__initializeScheduleImmediate_internalCallback(n),1)).observe(e,{childList:!0}),new M._AsyncRun__initializeScheduleImmediate_closure(n,e,t)):null!=i.setImmediate?M.async__AsyncRun__scheduleImmediateWithSetImmediate$closure():M.async__AsyncRun__scheduleImmediateWithTimer$closure()},_AsyncRun__scheduleImmediateJsOverride:function(e){i.scheduleImmediate(E.convertDartClosureToJS(new M._AsyncRun__scheduleImmediateJsOverride_internalCallback(E.functionTypeCheck(e,{func:1,ret:-1})),0))},_AsyncRun__scheduleImmediateWithSetImmediate:function(e){i.setImmediate(E.convertDartClosureToJS(new M._AsyncRun__scheduleImmediateWithSetImmediate_internalCallback(E.functionTypeCheck(e,{func:1,ret:-1})),0))},_AsyncRun__scheduleImmediateWithTimer:function(e){E.functionTypeCheck(e,{func:1,ret:-1}),M._TimerImpl$(0,e)},_TimerImpl$:function(e,t){var n=new M._TimerImpl;return n._TimerImpl$2(e,t),n},_makeAsyncAwaitCompleter:function(e){return new M._AsyncAwaitCompleter(new M._Future(K.Zone__current,[e]),[e])},_asyncStartSync:function(e,t){return e.call$2(0,null),t.isSync=!0,t._future},_asyncAwait:function(e,t){M._awaitOnObject(e,t)},_asyncReturn:function(e,t){t.complete$1(e)},_asyncRethrow:function(e,t){t.completeError$2(E.unwrapException(e),E.getTraceFromException(e))},_awaitOnObject:function(e,t){var n,r=new M._awaitOnObject_closure(t),i=new M._awaitOnObject_closure0(t),o=T.getInterceptor$(e);o.$is_Future?e._thenAwait$1$2(r,i,null):o.$isFuture?e.then$1$2$onError(0,r,i,null):(n=new M._Future(K.Zone__current,[null]),E.assertSubtypeOfRuntimeType(e,null),n._state=4,n._resultOrListeners=e,n._thenAwait$1$2(r,null,null))},_wrapJsFunctionForAsync:function(e){var t,n=(t=e,function(e,n){for(;;)try{t(e,n);break}catch(t){n=t,e=1}});return K.Zone__current.registerBinaryCallback$3$1(new M._wrapJsFunctionForAsync_closure(n),M.Null,M.int,null)},_IterationMarker_yieldStar:function(e){return new M._IterationMarker(e,1)},_IterationMarker_endOfIteration:function(){return w._IterationMarker_null_2},_IterationMarker_uncaughtError:function(e){return new M._IterationMarker(e,3)},_makeSyncStarIterable:function(e,t){return new M._SyncStarIterable(e,[t])},_Future__chainForeignFuture:function(e,t){var n,r,i;t._state=1;try{e.then$1$2$onError(0,new M._Future__chainForeignFuture_closure(t),new M._Future__chainForeignFuture_closure0(t),M.Null)}catch(i){n=E.unwrapException(i),r=E.getTraceFromException(i),M.scheduleMicrotask(new M._Future__chainForeignFuture_closure1(t,n,r))}},_Future__chainCoreFuture:function(e,t){for(var n,r;2===(n=e._state);)e=E.interceptedTypeCheck(e._resultOrListeners,"$is_Future");n>=4?(r=t._removeListeners$0(),t._state=e._state,t._resultOrListeners=e._resultOrListeners,M._Future__propagateToListeners(t,r)):(r=E.interceptedTypeCheck(t._resultOrListeners,"$is_FutureListener"),t._state=2,t._resultOrListeners=e,e._prependListeners$1(r))},_Future__propagateToListeners:function(e,t){for(var n,r,i,o,a,s,l,c,u,h,d,p,f={},m=f.source=e;;){if(n={},r=8===m._state,null==t)return void(r&&(i=E.interceptedTypeCheck(m._resultOrListeners,"$isAsyncError"),M._rootHandleUncaughtError(null,null,m._zone,i.error,i.stackTrace)));for(;null!=(o=t._nextListener);t=o)t._nextListener=null,M._Future__propagateToListeners(f.source,t);if(a=(m=f.source)._resultOrListeners,n.listenerHasError=r,n.listenerValueOrError=a,l=!(s=!r)||(0!=(1&(l=t.state))||8==(15&l))){if(c=(l=t.result)._zone,u=!!r&&!((u=m._zone===c)||u))return E.interceptedTypeCheck(a,"$isAsyncError"),void M._rootHandleUncaughtError(null,null,m._zone,a.error,a.stackTrace);if((h=K.Zone__current)!==c?K.Zone__current=c:h=null,8==(15&(m=t.state))?new M._Future__propagateToListeners_handleWhenCompleteCallback(f,n,t,r).call$0():s?0!=(1&m)&&new M._Future__propagateToListeners_handleValueCallback(n,t,a).call$0():0!=(2&m)&&new M._Future__propagateToListeners_handleError(f,n,t).call$0(),null!=h&&(K.Zone__current=h),m=n.listenerValueOrError,T.getInterceptor$(m).$isFuture){if(m._state>=4){d=E.interceptedTypeCheck(l._resultOrListeners,"$is_FutureListener"),l._resultOrListeners=null,t=l._reverseListeners$1(d),l._state=m._state,l._resultOrListeners=m._resultOrListeners,f.source=m;continue}return void M._Future__chainCoreFuture(m,l)}}p=t.result,d=E.interceptedTypeCheck(p._resultOrListeners,"$is_FutureListener"),p._resultOrListeners=null,t=p._reverseListeners$1(d),m=n.listenerHasError,s=n.listenerValueOrError,m?(E.interceptedTypeCheck(s,"$isAsyncError"),p._state=8,p._resultOrListeners=s):(E.assertSubtypeOfRuntimeType(s,E.getTypeArgumentByIndex(p,0)),p._state=4,p._resultOrListeners=s),f.source=p,m=p}},_registerErrorHandler:function(e,t){if(E.functionTypeTest(e,{func:1,args:[M.Object,M.StackTrace]}))return t.registerBinaryCallback$3$1(e,null,M.Object,M.StackTrace);if(E.functionTypeTest(e,{func:1,args:[M.Object]}))return E.functionTypeCheck(e,{func:1,ret:null,args:[M.Object]});throw E.wrapException(M.ArgumentError$value(e,"onError","Error handler must accept one Object or one Object and a StackTrace as arguments, and return a a valid result"))},_microtaskLoop:function(){for(var e,t;null!=(e=K._nextCallback);)K._lastPriorityCallback=null,t=e.next,K._nextCallback=t,null==t&&(K._lastCallback=null),e.callback.call$0()},_startMicrotaskLoop:function(){K._isInCallbackLoop=!0;try{M._microtaskLoop()}finally{K._lastPriorityCallback=null,K._isInCallbackLoop=!1,null!=K._nextCallback&&K.$get$_AsyncRun__scheduleImmediateClosure().call$1(M.async___startMicrotaskLoop$closure())}},_scheduleAsyncCallback:function(e){var t=new M._AsyncCallbackEntry(e);null==K._nextCallback?(K._nextCallback=K._lastCallback=t,K._isInCallbackLoop||K.$get$_AsyncRun__scheduleImmediateClosure().call$1(M.async___startMicrotaskLoop$closure())):K._lastCallback=K._lastCallback.next=t},_schedulePriorityAsyncCallback:function(e){var t,n,r=K._nextCallback;if(null==r)return M._scheduleAsyncCallback(e),void(K._lastPriorityCallback=K._lastCallback);t=new M._AsyncCallbackEntry(e),null==(n=K._lastPriorityCallback)?(t.next=r,K._nextCallback=K._lastPriorityCallback=t):(t.next=n.next,K._lastPriorityCallback=n.next=t,null==t.next&&(K._lastCallback=t))},scheduleMicrotask:function(e){var t=K.Zone__current;w.C__RootZone!==t?M._rootScheduleMicrotask(null,null,t,E.functionTypeCheck(t.bindCallbackGuarded$1(e),{func:1,ret:-1})):M._rootScheduleMicrotask(null,null,w.C__RootZone,e)},Stream_Stream$fromFuture:function(e,t){var n=new M._SyncStreamController(null,null,null,null,[t]);return e.then$1$2$onError(0,new M.Stream_Stream$fromFuture_closure(n,t),new M.Stream_Stream$fromFuture_closure0(n),M.Null),new M._ControllerStream(n,[t])},Stream_Stream$fromIterable:function(e,t){return new M._GeneratedStreamImpl(new M.Stream_Stream$fromIterable_closure(e,t),[t])},StreamIterator_StreamIterator:function(e,t){return null==e&&E.throwExpression(M.ArgumentError$notNull("stream")),new M._StreamIterator([t])},StreamController_StreamController:function(e,t,n,r){return new M._AsyncStreamController(null,t,n,e,[r])},_runGuarded:function(e){var t,n,r;if(null!=e)try{e.call$0()}catch(r){t=E.unwrapException(r),n=E.getTraceFromException(r),M._rootHandleUncaughtError(null,null,K.Zone__current,t,E.interceptedTypeCheck(n,"$isStackTrace"))}},_BufferingStreamSubscription$:function(e,t,n,r,i){var o=K.Zone__current,a=r?1:0;return(a=new M._BufferingStreamSubscription(o,a,[i]))._BufferingStreamSubscription$4(e,t,n,r,i),a},_nullErrorHandler:function(e,t){M._rootHandleUncaughtError(null,null,K.Zone__current,e,t)},_rootHandleUncaughtError:function(e,t,n,r,i){var o={};o.error=r,M._schedulePriorityAsyncCallback(new M._rootHandleUncaughtError_closure(o,i))},_rootRun:function(e,t,n,r,i){var o,a=K.Zone__current;if(a===n)return r.call$0();K.Zone__current=n,o=a;try{return a=r.call$0()}finally{K.Zone__current=o}},_rootRunUnary:function(e,t,n,r,i,o,a){var s,l=K.Zone__current;if(l===n)return r.call$1(i);K.Zone__current=n,s=l;try{return l=r.call$1(i)}finally{K.Zone__current=s}},_rootRunBinary:function(e,t,n,r,i,o,a,s,l){var c,u=K.Zone__current;if(u===n)return r.call$2(i,o);K.Zone__current=n,c=u;try{return u=r.call$2(i,o)}finally{K.Zone__current=c}},_rootScheduleMicrotask:function(e,t,n,r){var i;E.functionTypeCheck(r,{func:1,ret:-1}),(i=w.C__RootZone!==n)&&(r=i?n.bindCallbackGuarded$1(r):n.bindCallback$1$1(r,-1)),M._scheduleAsyncCallback(r)},_AsyncRun__initializeScheduleImmediate_internalCallback:function(e){this._box_0=e},_AsyncRun__initializeScheduleImmediate_closure:function(e,t,n){this._box_0=e,this.div=t,this.span=n},_AsyncRun__scheduleImmediateJsOverride_internalCallback:function(e){this.callback=e},_AsyncRun__scheduleImmediateWithSetImmediate_internalCallback:function(e){this.callback=e},_TimerImpl:function(){},_TimerImpl_internalCallback:function(e,t){this.$this=e,this.callback=t},_AsyncAwaitCompleter:function(e,t){this._future=e,this.isSync=!1,this.$ti=t},_awaitOnObject_closure:function(e){this.bodyFunction=e},_awaitOnObject_closure0:function(e){this.bodyFunction=e},_wrapJsFunctionForAsync_closure:function(e){this.$protected=e},_IterationMarker:function(e,t){this.value=e,this.state=t},_SyncStarIterator:function(e,t){var n=this;n._body=e,n._suspendedBodies=n._nestedIterator=n._async$_current=null,n.$ti=t},_SyncStarIterable:function(e,t){this._outerHelper=e,this.$ti=t},Future:function(){},_Completer:function(){},_AsyncCompleter:function(e,t){this.future=e,this.$ti=t},_FutureListener:function(e,t,n,r,i){var o=this;o._nextListener=null,o.result=e,o.state=t,o.callback=n,o.errorCallback=r,o.$ti=i},_Future:function(e,t){var n=this;n._state=0,n._zone=e,n._resultOrListeners=null,n.$ti=t},_Future__addListener_closure:function(e,t){this.$this=e,this.listener=t},_Future__prependListeners_closure:function(e,t){this._box_0=e,this.$this=t},_Future__chainForeignFuture_closure:function(e){this.target=e},_Future__chainForeignFuture_closure0:function(e){this.target=e},_Future__chainForeignFuture_closure1:function(e,t,n){this.target=e,this.e=t,this.s=n},_Future__asyncComplete_closure:function(e,t){this.$this=e,this.value=t},_Future__chainFuture_closure:function(e,t){this.$this=e,this.value=t},_Future__asyncCompleteError_closure:function(e,t,n){this.$this=e,this.error=t,this.stackTrace=n},_Future__propagateToListeners_handleWhenCompleteCallback:function(e,t,n,r){var i=this;i._box_1=e,i._box_0=t,i.listener=n,i.hasError=r},_Future__propagateToListeners_handleWhenCompleteCallback_closure:function(e){this.originalSource=e},_Future__propagateToListeners_handleValueCallback:function(e,t,n){this._box_0=e,this.listener=t,this.sourceResult=n},_Future__propagateToListeners_handleError:function(e,t,n){this._box_1=e,this._box_0=t,this.listener=n},_AsyncCallbackEntry:function(e){this.callback=e,this.next=null},Stream:function(){},Stream_Stream$fromFuture_closure:function(e,t){this.controller=e,this.T=t},Stream_Stream$fromFuture_closure0:function(e){this.controller=e},Stream_Stream$fromIterable_closure:function(e,t){this.elements=e,this.T=t},Stream_length_closure:function(e,t){this._box_0=e,this.$this=t},Stream_length_closure0:function(e,t){this._box_0=e,this.future=t},StreamTransformerBase:function(){},_StreamController:function(){},_StreamController__subscribe_closure:function(e){this.$this=e},_StreamController__recordCancel_complete:function(e){this.$this=e},_SyncStreamControllerDispatch:function(){},_AsyncStreamControllerDispatch:function(){},_AsyncStreamController:function(e,t,n,r,i){var o=this;o._varData=null,o._state=0,o._doneFuture=null,o.onListen=e,o.onPause=t,o.onResume=n,o.onCancel=r,o.$ti=i},_SyncStreamController:function(e,t,n,r,i){var o=this;o._varData=null,o._state=0,o._doneFuture=null,o.onListen=e,o.onPause=t,o.onResume=n,o.onCancel=r,o.$ti=i},_ControllerStream:function(e,t){this._controller=e,this.$ti=t},_ControllerSubscription:function(e,t,n,r){var i=this;i._controller=e,i._onDone=i._onError=i._onData=null,i._zone=t,i._state=n,i._pending=i._cancelFuture=null,i.$ti=r},_BufferingStreamSubscription:function(e,t,n){var r=this;r._onDone=r._onError=r._onData=null,r._zone=e,r._state=t,r._pending=r._cancelFuture=null,r.$ti=n},_BufferingStreamSubscription__sendError_sendError:function(e,t,n){this.$this=e,this.error=t,this.stackTrace=n},_BufferingStreamSubscription__sendDone_sendDone:function(e){this.$this=e},_StreamImpl:function(){},_GeneratedStreamImpl:function(e,t){this._pending=e,this._async$_isUsed=!1,this.$ti=t},_IterablePendingEvents:function(e,t){this._async$_iterator=e,this._state=0,this.$ti=t},_DelayedEvent:function(){},_DelayedData:function(e,t){this.value=e,this.next=null,this.$ti=t},_DelayedError:function(e,t){this.error=e,this.stackTrace=t,this.next=null},_DelayedDone:function(){},_PendingEvents:function(){},_PendingEvents_schedule_closure:function(e,t){this.$this=e,this.dispatch=t},_StreamImplEvents:function(e){var t=this;t.lastPendingEvent=t.firstPendingEvent=null,t._state=0,t.$ti=e},_StreamIterator:function(e){this.$ti=e},AsyncError:function(e,t){this.error=e,this.stackTrace=t},_Zone:function(){},_rootHandleUncaughtError_closure:function(e,t){this._box_0=e,this.stackTrace=t},_RootZone:function(){},_RootZone_bindCallback_closure:function(e,t,n){this.$this=e,this.f=t,this.R=n},_RootZone_bindCallbackGuarded_closure:function(e,t){this.$this=e,this.f=t},_HashMap__getTableEntry:function(e,t){var n=e[t];return n===e?null:n},_HashMap__setTableEntry:function(e,t,n){e[t]=null==n?e:n},_HashMap__newHashTable:function(){var e=Object.create(null);return M._HashMap__setTableEntry(e,"<non-identifier-key>",e),delete e["<non-identifier-key>"],e},LinkedHashMap_LinkedHashMap$_literal:function(e,t,n){return E.assertSubtype(E.fillLiteralMap(e,new E.JsLinkedHashMap([t,n])),"$isLinkedHashMap",[t,n],"$asLinkedHashMap")},LinkedHashMap_LinkedHashMap$_empty:function(e,t){return new E.JsLinkedHashMap([e,t])},LinkedHashSet_LinkedHashSet:function(e){return new M._LinkedHashSet([e])},LinkedHashSet_LinkedHashSet$_empty:function(e){return new M._LinkedHashSet([e])},LinkedHashSet_LinkedHashSet$_literal:function(e,t){return E.assertSubtype(E.fillLiteralSet(e,new M._LinkedHashSet([t])),"$isLinkedHashSet",[t],"$asLinkedHashSet")},_LinkedHashSet__newHashTable:function(){var e=Object.create(null);return e["<non-identifier-key>"]=e,delete e["<non-identifier-key>"],e},IterableBase_iterableToShortString:function(e,t,n){var r,i;if(M._isToStringVisiting(e))return"("===t&&")"===n?"(...)":t+"..."+n;r=E.setRuntimeTypeInfo([],[M.String]),w.JSArray_methods.add$1(K._toStringVisiting,e);try{M._iterablePartsToStrings(e,r)}finally{if(0>=K._toStringVisiting.length)return E.ioore(K._toStringVisiting,-1);K._toStringVisiting.pop()}return(i=M.StringBuffer__writeAll(t,E.listSuperNativeTypeCheck(r,"$isIterable"),", ")+n).charCodeAt(0),i},IterableBase_iterableToFullString:function(e,t,n){var r,i;if(M._isToStringVisiting(e))return t+"..."+n;r=new M.StringBuffer(t),w.JSArray_methods.add$1(K._toStringVisiting,e);try{(i=r)._contents=M.StringBuffer__writeAll(i._contents,e,", ")}finally{if(0>=K._toStringVisiting.length)return E.ioore(K._toStringVisiting,-1);K._toStringVisiting.pop()}return r._contents+=n,(i=r._contents).charCodeAt(0),i},_isToStringVisiting:function(e){var t,n;for(t=K._toStringVisiting.length,n=0;n<t;++n)if(e===K._toStringVisiting[n])return!0;return!1},_iterablePartsToStrings:function(e,t){for(var n,r,i,o,a,s,l,c=e.get$iterator(e),u=0,h=0;u<80||h<3;){if(!c.moveNext$0())return;n=E.S(c.get$current()),w.JSArray_methods.add$1(t,n),u+=n.length+2,++h}if(c.moveNext$0())if(o=c.get$current(),++h,c.moveNext$0()){for(a=c.get$current(),++h;c.moveNext$0();o=a,a=s)if(s=c.get$current(),++h>100){for(;u>75&&h>3;){if(0>=t.length)return E.ioore(t,-1);u-=t.pop().length+2,--h}return void w.JSArray_methods.add$1(t,"...")}i=E.S(o),u+=(r=E.S(a)).length+i.length+4}else{if(h<=4)return void w.JSArray_methods.add$1(t,E.S(o));if(r=E.S(o),0>=t.length)return E.ioore(t,-1);i=t.pop(),u+=r.length+2}else{if(h<=5)return;if(0>=t.length)return E.ioore(t,-1);if(r=t.pop(),0>=t.length)return E.ioore(t,-1);i=t.pop()}for(h>t.length+2?(u+=5,l="..."):l=null;u>80&&t.length>3;){if(0>=t.length)return E.ioore(t,-1);u-=t.pop().length+2,null==l&&(u+=5,l="...")}null!=l&&w.JSArray_methods.add$1(t,l),w.JSArray_methods.add$1(t,i),w.JSArray_methods.add$1(t,r)},LinkedHashSet_LinkedHashSet$from:function(e,t){var n,r=M.LinkedHashSet_LinkedHashSet(t);for(n=T.get$iterator$ax(e);n.moveNext$0();)r.add$1(0,E.assertSubtypeOfRuntimeType(n.get$current(),t));return r},MapBase_mapToString:function(e){var t,n={};if(M._isToStringVisiting(e))return"{...}";t=new M.StringBuffer("");try{w.JSArray_methods.add$1(K._toStringVisiting,e),t._contents+="{",n.first=!0,e.forEach$1(0,new M.MapBase_mapToString_closure(n,t)),t._contents+="}"}finally{if(0>=K._toStringVisiting.length)return E.ioore(K._toStringVisiting,-1);K._toStringVisiting.pop()}return(n=t._contents).charCodeAt(0),n},_HashMap:function(){},_IdentityHashMap:function(e){var t=this;t._collection$_length=0,t._keys=t._rest=t._nums=t._strings=null,t.$ti=e},_HashMapKeyIterable:function(e,t){this._map=e,this.$ti=t},_HashMapKeyIterator:function(e,t,n){var r=this;r._map=e,r._keys=t,r._offset=0,r._collection$_current=null,r.$ti=n},_LinkedHashSet:function(e){var t=this;t._collection$_length=0,t._collection$_last=t._collection$_first=t._rest=t._nums=t._strings=null,t._collection$_modifications=0,t.$ti=e},_LinkedHashSetCell:function(e){this._element=e,this._previous=this._collection$_next=null},_LinkedHashSetIterator:function(e,t,n){var r=this;r._set=e,r._collection$_modifications=t,r._collection$_current=r._collection$_cell=null,r.$ti=n},UnmodifiableListView:function(e,t){this._collection$_source=e,this.$ti=t},IterableBase:function(){},ListBase:function(){},ListMixin:function(){},MapBase:function(){},MapBase_mapToString_closure:function(e,t){this._box_0=e,this.result=t},MapMixin:function(){},MapMixin_entries_closure:function(e){this.$this=e},_UnmodifiableMapMixin:function(){},MapView:function(){},UnmodifiableMapView:function(e,t){this._map=e,this.$ti=t},_SetBase:function(){},_UnmodifiableSet:function(e,t){this._map=e,this.$ti=t},_ListBase_Object_ListMixin:function(){},_UnmodifiableMapView_MapView__UnmodifiableMapMixin:function(){},_parseJson:function(e,t){var n,r,i,o=null;try{o=JSON.parse(e)}catch(r){throw n=E.unwrapException(r),i=M.FormatException$(String(n),null,null),E.wrapException(i)}return i=M._convertJsonToDartLazy(o)},_convertJsonToDartLazy:function(e){var t;if(null!=e){if("object"!=typeof e)return e;if(Object.getPrototypeOf(e)!==Array.prototype)return new M._JsonMap(e,Object.create(null));for(t=0;t<e.length;++t)e[t]=M._convertJsonToDartLazy(e[t]);return e}},Utf8Decoder__convertIntercepted:function(e,t,n,r){if(t instanceof Uint8Array)return M.Utf8Decoder__convertInterceptedUint8List(!1,t,n,r)},Utf8Decoder__convertInterceptedUint8List:function(e,t,n,r){var i,o,a=K.$get$Utf8Decoder__decoder();if(null!=a)return(i=0===n)?M.Utf8Decoder__useTextDecoderChecked(a,t):(o=t.length,r=M.RangeError_checkValidRange(n,r,o),i&&r===o?M.Utf8Decoder__useTextDecoderChecked(a,t):M.Utf8Decoder__useTextDecoderChecked(a,t.subarray(n,r)))},Utf8Decoder__useTextDecoderChecked:function(e,t){if(!M.Utf8Decoder__unsafe(t))return M.Utf8Decoder__useTextDecoderUnchecked(e,t)},Utf8Decoder__useTextDecoderUnchecked:function(e,t){var n;try{return e.decode(t)}catch(n){E.unwrapException(n)}},Utf8Decoder__unsafe:function(e){var t,n=e.length-2;for(t=0;t<n;++t)if(237===e[t]&&160==(224&e[t+1]))return!0;return!1},Utf8Decoder__makeDecoder:function(){var e;try{return new TextDecoder("utf-8",{fatal:!0})}catch(e){E.unwrapException(e)}},_scanOneByteCharacters:function(e,t,n){var r,i,o;for(r=T.getInterceptor$asx(e),i=t;i<n;++i){if("number"!=typeof(o=r.$index(e,i)))return o.$and();if((127&o)!==o)return i-t}return n-t},Base64Codec__checkPadding:function(e,t,n,r,i,o){if(0!==w.JSInt_methods.$mod(o,4))throw E.wrapException(M.FormatException$("Invalid base64 padding, padded length must be multiple of four, is "+o,e,n));if(r+i!==o)throw E.wrapException(M.FormatException$("Invalid base64 padding, '=' not at the end",e,t));if(i>2)throw E.wrapException(M.FormatException$("Invalid base64 padding, more than two '=' characters",e,t))},_Base64Decoder_decodeChunk:function(e,t,n,r,i,o){var a,s,l,c,u,h,d,p,f="Invalid encoding before padding",m="Invalid character",g=w.JSInt_methods._shrOtherPositive$1(o,2),v=3&o;for(a=t,s=0;a<n;++a){if(s|=l=w.JSString_methods.codeUnitAt$1(e,a),(u=127&l)>=(c=K.$get$_Base64Decoder__inverseAlphabet()).length)return E.ioore(c,u);if(!((h=c[u])>=0)){if(-1===h&&v>1){if(s>127)break;if(3===v){if(0!=(3&g))throw E.wrapException(M.FormatException$(f,e,a));if(d=i+1,i>=(c=r.length))return E.ioore(r,i);if(r[i]=g>>>10,d>=c)return E.ioore(r,d);r[d]=g>>>2}else{if(0!=(15&g))throw E.wrapException(M.FormatException$(f,e,a));if(i>=r.length)return E.ioore(r,i);r[i]=g>>>4}return p=3*(3-v),37===l&&(p+=2),M._Base64Decoder__checkPadding(e,a+1,n,-p-1)}throw E.wrapException(M.FormatException$(m,e,a))}if(g=16777215&(g<<6|h),0===(v=v+1&3)){if(d=i+1,i>=(c=r.length))return E.ioore(r,i);if(r[i]=g>>>16&255,i=d+1,d>=c)return E.ioore(r,d);if(r[d]=g>>>8&255,d=i+1,i>=c)return E.ioore(r,i);r[i]=255&g,i=d,g=0}}if(s>=0&&s<=127)return(g<<2|v)>>>0;for(a=t;a<n&&!((l=w.JSString_methods.codeUnitAt$1(e,a))>127);++a);throw E.wrapException(M.FormatException$(m,e,a))},_Base64Decoder__allocateBuffer:function(e,t,n,r){var i=M._Base64Decoder__trimPaddingChars(e,t,n),o=i-t+(3&r),a=3*w.JSInt_methods._shrOtherPositive$1(o,2),s=3&o;if(0!==s&&i<n&&(a+=s-1),a>0)return new Uint8Array(a)},_Base64Decoder__trimPaddingChars:function(e,t,n){for(var r,i=n,o=i,a=0;o>t&&a<2;)if(--o,61!==(r=w.JSString_methods.codeUnitAt$1(e,o))){if(100==(32|r)){if(o===t)break;--o,r=w.JSString_methods.codeUnitAt$1(e,o)}if(51===r){if(o===t)break;--o,r=w.JSString_methods.codeUnitAt$1(e,o)}if(37!==r)break;++a,i=o}else++a,i=o;return i},_Base64Decoder__checkPadding:function(e,t,n,r){var i,o;if(t===n)return r;for(i=-r-1;i>0;){if(o=w.JSString_methods.codeUnitAt$1(e,t),3===i){if(61===o){i-=3,++t;break}if(37!==o)break;if(--i,++t===n)break;o=w.JSString_methods.codeUnitAt$1(e,t)}if(2===(i>3?i-3:i)){if(51!==o)break;if(--i,++t===n)break;o=w.JSString_methods.codeUnitAt$1(e,t)}if(100!=(32|o))break;if(--i,++t===n)break}if(t!==n)throw E.wrapException(M.FormatException$("Invalid padding character",e,t));return-i-1},_JsonMap:function(e,t){this._original=e,this._processed=t,this._data=null},_JsonMapKeyIterable:function(e){this._convert$_parent=e},_JsonDecoderSink:function(e,t,n){this._reviver=e,this._sink=t,this._stringSink=n},Base64Codec:function(){},Base64Encoder:function(){},Base64Decoder:function(){},_Base64Decoder:function(){this._convert$_state=0},ByteConversionSink:function(){},ChunkedConversionSink:function(){},_SimpleCallbackSink:function(e,t,n){this._callback=e,this._accumulated=t,this.$ti=n},Codec:function(){},Converter:function(){},Encoding:function(){},JsonCodec:function(){},JsonDecoder:function(e){this._reviver=e},StringConversionSinkBase:function(){},StringConversionSinkMixin:function(){},_StringSinkConversionSink:function(){},_Utf8StringSinkAdapter:function(e,t){this._decoder=e,this._sink=t},Utf8Codec:function(){},Utf8Decoder:function(e){this._allowMalformed=e},_Utf8Decoder:function(e,t){var n=this;n._allowMalformed=e,n._stringSink=t,n._isFirstCharacter=!0,n._extraUnits=n._expectedUnits=n._convert$_value=0},int_parse:function(e,t,n){var r=E.Primitives_parseInt(e,n);if(null!=r)return r;if(null!=t)return t.call$1(e);throw E.wrapException(M.FormatException$(e,null,null))},Error__objectToString:function(e){return e instanceof E.Closure?e.toString$0(0):"Instance of '"+E.S(E.Primitives_objectTypeName(e))+"'"},List_List$filled:function(e,t,n){var r,i=T.JSArray_JSArray$fixed(e,n);if(0!==e)for(r=0;r<i.length;++r)w.JSArray_methods.$indexSet(i,r,t);return E.assertSubtype(i,"$isList",[n],"$asList")},List_List$from:function(e,t,n){var r,i=[n],o=E.setRuntimeTypeInfo([],i);for(r=T.get$iterator$ax(e);r.moveNext$0();)w.JSArray_methods.add$1(o,E.assertSubtypeOfRuntimeType(r.get$current(),n));return t?o:E.assertSubtype(T.JSArray_markFixedList(o),"$isList",i,"$asList")},String_String$fromCharCodes:function(e,t,n){var r;return"object"==typeof e&&null!==e&&e.constructor===Array?(E.assertSubtype(e,"$isJSArray",[M.int],"$asJSArray"),r=e.length,n=M.RangeError_checkValidRange(t,n,r),E.Primitives_stringFromCharCodes(t>0||n<r?w.JSArray_methods.sublist$2(e,t,n):e)):T.getInterceptor$(e).$isNativeUint8List?E.Primitives_stringFromNativeUint8List(e,t,M.RangeError_checkValidRange(t,n,e.length)):M.String__stringFromIterable(e,t,n)},String__stringFromIterable:function(e,t,n){var r,i,o,a;if(t<0)throw E.wrapException(M.RangeError$range(t,0,T.get$length$asx(e),null,null));if(!(r=null==n)&&n<t)throw E.wrapException(M.RangeError$range(n,t,T.get$length$asx(e),null,null));for(i=T.get$iterator$ax(e),o=0;o<t;++o)if(!i.moveNext$0())throw E.wrapException(M.RangeError$range(t,0,o,null,null));if(a=[],r)for(;i.moveNext$0();)a.push(i.get$current());else for(o=t;o<n;++o){if(!i.moveNext$0())throw E.wrapException(M.RangeError$range(n,t,o,null,null));a.push(i.get$current())}return E.Primitives_stringFromCharCodes(a)},RegExp_RegExp:function(e){return new E.JSSyntaxRegExp(e,E.JSSyntaxRegExp_makeNative(e,!1,!0,!1,!1,!1))},StringBuffer__writeAll:function(e,t,n){var r=T.get$iterator$ax(t);if(!r.moveNext$0())return e;if(0===n.length)do{e+=E.S(r.get$current())}while(r.moveNext$0());else for(e+=E.S(r.get$current());r.moveNext$0();)e=e+n+E.S(r.get$current());return e},NoSuchMethodError$:function(e,t,n,r){return new M.NoSuchMethodError(e,t,n,r)},DateTime__fourDigits:function(e){var t=Math.abs(e),n=e<0?"-":"";return t>=1e3?""+e:t>=100?n+"0"+t:t>=10?n+"00"+t:n+"000"+t},DateTime__sixDigits:function(e){var t=Math.abs(e),n=e<0?"-":"+";return t>=1e5?n+t:n+"0"+t},DateTime__threeDigits:function(e){return e>=100?""+e:e>=10?"0"+e:"00"+e},DateTime__twoDigits:function(e){return e>=10?""+e:"0"+e},Error_safeToString:function(e){return"number"==typeof e||"boolean"==typeof e||null==e?T.toString$0$(e):"string"==typeof e?JSON.stringify(e):M.Error__objectToString(e)},ArgumentError$:function(e){return new M.ArgumentError(!1,null,null,e)},ArgumentError$value:function(e,t,n){return new M.ArgumentError(!0,e,t,n)},ArgumentError$notNull:function(e){return new M.ArgumentError(!1,null,e,"Must not be null")},RangeError$value:function(e,t){return new M.RangeError(null,null,!0,e,t,"Value not in range")},RangeError$range:function(e,t,n,r,i){return new M.RangeError(t,n,!0,e,r,"Invalid value")},RangeError_checkValidRange:function(e,t,n){if(0>e||e>n)throw E.wrapException(M.RangeError$range(e,0,n,"start",null));if(null!=t){if(e>t||t>n)throw E.wrapException(M.RangeError$range(t,e,n,"end",null));return t}return n},RangeError_checkNotNegative:function(e,t){if("number"!=typeof e)return e.$lt();if(e<0)throw E.wrapException(M.RangeError$range(e,0,null,t,null))},IndexError$:function(e,t,n,r,i){var o=E.intTypeCheck(null==i?T.get$length$asx(t):i);return new M.IndexError(o,!0,e,n,"Index out of range")},UnsupportedError$:function(e){return new M.UnsupportedError(e)},UnimplementedError$:function(e){return new M.UnimplementedError(e)},StateError$:function(e){return new M.StateError(e)},ConcurrentModificationError$:function(e){return new M.ConcurrentModificationError(e)},FormatException$:function(e,t,n){return new M.FormatException(e,t,n)},Iterable_Iterable$generate:function(e,t,n){return e<=0?new E.EmptyIterable([n]):new M._GeneratorIterable(e,t,[n])},List_List$generate:function(e,t,n,r){var i,o,a;for(n?(i=E.setRuntimeTypeInfo([],[r]),w.JSArray_methods.set$length(i,e)):((o=new Array(e)).fixed$length=Array,i=E.setRuntimeTypeInfo(o,[r])),a=0;a<e;++a)w.JSArray_methods.$indexSet(i,a,t.call$1(a));return i},Map_castFrom:function(e,t,n,r,i){return new E.CastMap(e,[t,n,r,i])},Uri_parse:function(e){var t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g=e.length;if(g>=5){if(0===(t=M._startsWithData(e,0)))return(n=M.UriData__parse(g<g?w.JSString_methods.substring$2(e,0,g):e,5,null)).get$uri(n);if(32===t)return(n=M.UriData__parse(w.JSString_methods.substring$2(e,5,g),0,null)).get$uri(n)}return(n=new Array(8)).fixed$length=Array,r=E.setRuntimeTypeInfo(n,[M.int]),w.JSArray_methods.$indexSet(r,0,0),w.JSArray_methods.$indexSet(r,1,-1),w.JSArray_methods.$indexSet(r,2,-1),w.JSArray_methods.$indexSet(r,7,-1),w.JSArray_methods.$indexSet(r,3,0),w.JSArray_methods.$indexSet(r,4,0),w.JSArray_methods.$indexSet(r,5,g),w.JSArray_methods.$indexSet(r,6,g),M._scan(e,0,g,0,r)>=14&&w.JSArray_methods.$indexSet(r,7,g),"number"!=typeof(i=r[1])?i.$ge():(i>=0&&20===M._scan(e,0,i,20,r)&&(r[7]=i),"number"!=typeof(n=r[2])?n.$add():(o=n+1,a=r[3],s=r[4],l=r[5],"number"!=typeof(c=r[6])?c.$lt():"number"!=typeof l?E.iae(l):(c<l&&(l=c),"number"!=typeof s?s.$lt():(s<o?s=l:s<=i&&(s=i+1),"number"!=typeof a?a.$lt():(a<o&&(a=s),"number"!=typeof(n=r[7])?n.$lt():((u=n<0)?o>i+3||(n=a>0)&&a+1===s||(!!(l<g&&l===s+2&&w.JSString_methods.startsWith$2(e,"..",s))||l>s+2&&w.JSString_methods.startsWith$2(e,"/..",l-3))?(h=null,u=!1):(4===i?w.JSString_methods.startsWith$2(e,"file",0)?(o<=0?(w.JSString_methods.startsWith$2(e,"/",s)?(d="file://",p=2):(d="file:///",p=3),i-=0,l+=n=p-0,c+=n,g=(e=d+w.JSString_methods.substring$2(e,s,g)).length,o=7,a=7,s=7):s===l&&(f=l+1,++c,e=w.JSString_methods.replaceRange$3(e,s,l,"/"),++g,l=f),h="file"):w.JSString_methods.startsWith$2(e,"http",0)?(n&&a+3===s&&w.JSString_methods.startsWith$2(e,"80",a+1)&&(m=s-3,l-=3,c-=3,e=w.JSString_methods.replaceRange$3(e,a,s,""),g-=3,s=m),h="http"):h=null:5===i&&w.JSString_methods.startsWith$2(e,"https",0)?(n&&a+4===s&&w.JSString_methods.startsWith$2(e,"443",a+1)&&(m=s-4,l-=4,c-=4,e=w.JSString_methods.replaceRange$3(e,a,s,""),g-=3,s=m),h="https"):h=null,u=!0):h=null,u?(g<e.length&&(e=w.JSString_methods.substring$2(e,0,g),i-=0,o-=0,a-=0,s-=0,l-=0,c-=0),new M._SimpleUri(e,i,o,a,s,l,c,h)):M._Uri__Uri$notSimple(e,0,g,i,o,a,s,l,c,h)))))))},Uri__parseIPv4Address:function(e,t,n){var r,i,o,a,s,l,c,u="IPv4 address should contain exactly 4 parts",h="each part must be in the range 0..255",d=new M.Uri__parseIPv4Address_error(e),p=new Uint8Array(4);for(r=p.length,o=i=t,a=0;i<n;++i)if(46!==(s=w.JSString_methods.codeUnitAt$1(e,i)))(48^s)>9&&d.call$2("invalid character",i);else{if(3===a&&d.call$2(u,i),"number"!=typeof(l=M.int_parse(w.JSString_methods.substring$2(e,o,i),null,null)))return l.$gt();if(l>255&&d.call$2(h,o),c=a+1,a>=r)return E.ioore(p,a);p[a]=l,o=i+1,a=c}return 3!==a&&d.call$2(u,n),"number"!=typeof(l=M.int_parse(w.JSString_methods.substring$2(e,o,n),null,null))?l.$gt():(l>255&&d.call$2(h,o),a>=r?E.ioore(p,a):(p[a]=l,p))},Uri_parseIPv6Address:function(e,t,n){var r,i,o,a,s,l,c,u,h,d,p,f,m,g,v,y,_=new M.Uri_parseIPv6Address_error(e),b=new M.Uri_parseIPv6Address_parseHex(_,e);for(e.length<2&&_.call$1("address is too short"),r=E.setRuntimeTypeInfo([],[M.int]),o=i=t,a=!1,s=!1;i<n;++i)58===(l=w.JSString_methods.codeUnitAt$1(e,i))?(i===t&&(++i,58!==w.JSString_methods.codeUnitAt$1(e,i)&&_.call$2("invalid start colon.",i),o=i),i===o?(a&&_.call$2("only one wildcard `::` is allowed",i),w.JSArray_methods.add$1(r,-1),a=!0):w.JSArray_methods.add$1(r,b.call$2(o,i)),o=i+1):46===l&&(s=!0);for(0===r.length&&_.call$1("too few parts"),c=o===n,u=w.JSArray_methods.get$last(r),c&&-1!==u&&_.call$2("expected a part after last `:`",n),c||(s?(h=M.Uri__parseIPv4Address(e,o,n),w.JSArray_methods.add$1(r,(h[0]<<8|h[1])>>>0),w.JSArray_methods.add$1(r,(h[2]<<8|h[3])>>>0)):w.JSArray_methods.add$1(r,b.call$2(o,n))),a?r.length>7&&_.call$1("an address with a wildcard must have less than 7 parts"):8!==r.length&&_.call$1("an address without a wildcard must contain exactly 8 parts"),d=new Uint8Array(16),u=r.length,p=d.length,f=9-u,i=0,m=0;i<u;++i)if(-1===(g=r[i]))for(v=0;v<f;++v){if(m<0||m>=p)return E.ioore(d,m);if(d[m]=0,(y=m+1)>=p)return E.ioore(d,y);d[y]=0,m+=2}else{if(y=w.JSInt_methods._shrOtherPositive$1(g,8),m<0||m>=p)return E.ioore(d,m);if(d[m]=y,(y=m+1)>=p)return E.ioore(d,y);d[y]=255&g,m+=2}return d},_Uri__Uri$notSimple:function(e,t,n,r,i,o,a,s,l,c){var u,h,d,p,f,m,g;if(null==c&&(r>t?c=M._Uri__makeScheme(e,t,r):(r===t&&M._Uri__fail(e,t,"Invalid empty scheme"),c="")),i>t){if(h=(u=r+3)<i?M._Uri__makeUserInfo(e,u,i-1):"",d=M._Uri__makeHost(e,i,o,!1),"number"!=typeof o)return o.$add();if(p=o+1,"number"!=typeof a)return E.iae(a);f=p<a?M._Uri__makePort(M.int_parse(w.JSString_methods.substring$2(e,p,a),new M._Uri__Uri$notSimple_closure(e,o),null),c):null}else d=f=null,h="";return m=M._Uri__makePath(e,a,s,null,c,null!=d),"number"!=typeof s?s.$lt():(g=s<l?M._Uri__makeQuery(e,s+1,l,null):null,new M._Uri(c,h,d,f,m,g,l<n?M._Uri__makeFragment(e,l+1,n):null))},_Uri__defaultPort:function(e){return"http"===e?80:"https"===e?443:0},_Uri__fail:function(e,t,n){throw E.wrapException(M.FormatException$(n,e,t))},_Uri__makePort:function(e,t){if(null==e||e!==M._Uri__defaultPort(t))return e},_Uri__makeHost:function(e,t,n,r){var i,o,a,s,l,c;if(t===n)return"";if(91===w.JSString_methods.codeUnitAt$1(e,t))return"number"!=typeof n?n.$sub():(i=n-1,93!==w.JSString_methods.codeUnitAt$1(e,i)&&M._Uri__fail(e,t,"Missing end `]` to match `[` in host"),o=t+1,"number"!=typeof(a=M._Uri__checkZoneID(e,o,i))?a.$lt():(a<i?(s=a+1,l=M._Uri__normalizeZoneID(e,w.JSString_methods.startsWith$2(e,"25",s)?a+3:s,i,"%25")):l="",M.Uri_parseIPv6Address(e,o,a),w.JSString_methods.substring$2(e,t,a).toLowerCase()+l+"]"));if("number"!=typeof n)return E.iae(n);for(c=t;c<n;++c)if(58===w.JSString_methods.codeUnitAt$1(e,c))return(a=w.JSString_methods.indexOf$2(e,"%",t))>=t&&a<n||(a=n),a<n?(s=a+1,l=M._Uri__normalizeZoneID(e,w.JSString_methods.startsWith$2(e,"25",s)?a+3:s,n,"%25")):l="",M.Uri_parseIPv6Address(e,t,a),"["+w.JSString_methods.substring$2(e,t,a)+l+"]";return M._Uri__normalizeRegName(e,t,n)},_Uri__checkZoneID:function(e,t,n){var r,i=w.JSString_methods.indexOf$2(e,"%",t);if(i>=t){if("number"!=typeof n)return E.iae(n);r=i<n}else r=!1;return r?i:n},_Uri__normalizeZoneID:function(e,t,n,r){var i,o,a,s,l,c,u,h,d,p=""!==r?new M.StringBuffer(r):null;if("number"!=typeof n)return E.iae(n);for(o=i=t,a=!0;i<n;)if(37===(s=w.JSString_methods.codeUnitAt$1(e,i))){if((c=null==(l=M._Uri__normalizeEscape(e,i,!0)))&&a){i+=3;continue}null==p&&(p=new M.StringBuffer("")),u=p._contents+=w.JSString_methods.substring$2(e,o,i),c?l=w.JSString_methods.substring$2(e,i,i+3):"%"===l&&M._Uri__fail(e,i,"ZoneID should not contain % anymore"),p._contents=u+l,o=i+=3,a=!0}else{if(s<127){if((c=s>>>4)>=8)return E.ioore(w.List_nxB,c);c=0!=(w.List_nxB[c]&1<<(15&s))}else c=!1;c?(a&&65<=s&&90>=s&&(null==p&&(p=new M.StringBuffer("")),o<i&&(p._contents+=w.JSString_methods.substring$2(e,o,i),o=i),a=!1),++i):(55296==(64512&s)&&i+1<n&&56320==(64512&(h=w.JSString_methods.codeUnitAt$1(e,i+1)))?(s=65536|(1023&s)<<10|1023&h,d=2):d=1,null==p&&(p=new M.StringBuffer("")),p._contents+=w.JSString_methods.substring$2(e,o,i),p._contents+=M._Uri__escapeChar(s),o=i+=d)}return null==p?w.JSString_methods.substring$2(e,t,n):(o<n&&(p._contents+=w.JSString_methods.substring$2(e,o,n)),(c=p._contents).charCodeAt(0),c)},_Uri__normalizeRegName:function(e,t,n){var r,i,o,a,s,l,c,u,h,d,p;if("number"!=typeof n)return E.iae(n);for(i=r=t,o=null,a=!0;r<n;)if(37===(s=w.JSString_methods.codeUnitAt$1(e,r))){if((c=null==(l=M._Uri__normalizeEscape(e,r,!0)))&&a){r+=3;continue}null==o&&(o=new M.StringBuffer("")),u=w.JSString_methods.substring$2(e,i,r),h=o._contents+=a?u:u.toLowerCase(),c?(l=w.JSString_methods.substring$2(e,r,r+3),d=3):"%"===l?(l="%25",d=1):d=3,o._contents=h+l,i=r+=d,a=!0}else{if(s<127){if((c=s>>>4)>=8)return E.ioore(w.List_qNA,c);c=0!=(w.List_qNA[c]&1<<(15&s))}else c=!1;if(c)a&&65<=s&&90>=s&&(null==o&&(o=new M.StringBuffer("")),i<r&&(o._contents+=w.JSString_methods.substring$2(e,i,r),i=r),a=!1),++r;else{if(s<=93){if((c=s>>>4)>=8)return E.ioore(w.List_2Vk0,c);c=0!=(w.List_2Vk0[c]&1<<(15&s))}else c=!1;c?M._Uri__fail(e,r,"Invalid character"):(55296==(64512&s)&&r+1<n&&56320==(64512&(p=w.JSString_methods.codeUnitAt$1(e,r+1)))?(s=65536|(1023&s)<<10|1023&p,d=2):d=1,null==o&&(o=new M.StringBuffer("")),u=w.JSString_methods.substring$2(e,i,r),o._contents+=a?u:u.toLowerCase(),o._contents+=M._Uri__escapeChar(s),i=r+=d)}}return null==o?w.JSString_methods.substring$2(e,t,n):(i<n&&(u=w.JSString_methods.substring$2(e,i,n),o._contents+=a?u:u.toLowerCase()),(c=o._contents).charCodeAt(0),c)},_Uri__makeScheme:function(e,t,n){var r,i,o,a;if(t===n)return"";for(M._Uri__isAlphabeticCharacter(w.JSString_methods._codeUnitAt$1(e,t))||M._Uri__fail(e,t,"Scheme not starting with alphabetic character"),r=t,i=!1;r<n;++r){if((o=w.JSString_methods._codeUnitAt$1(e,r))<128){if((a=o>>>4)>=8)return E.ioore(w.List_JYB,a);a=0!=(w.List_JYB[a]&1<<(15&o))}else a=!1;a||M._Uri__fail(e,r,"Illegal scheme character"),65<=o&&o<=90&&(i=!0)}return e=w.JSString_methods.substring$2(e,t,n),M._Uri__canonicalizeScheme(i?e.toLowerCase():e)},_Uri__canonicalizeScheme:function(e){return"http"===e?"http":"file"===e?"file":"https"===e?"https":"package"===e?"package":e},_Uri__makeUserInfo:function(e,t,n){return M._Uri__normalizeOrSubstring(e,t,n,w.List_gRj,!1)},_Uri__makePath:function(e,t,n,r,i,o){var a="file"===i,s=a||o,l=M._Uri__normalizeOrSubstring(e,t,n,w.List_qg4,!0);if(0===l.length){if(a)return"/"}else s&&!w.JSString_methods.startsWith$1(l,"/")&&(l="/"+l);return M._Uri__normalizePath(l,i,o)},_Uri__normalizePath:function(e,t,n){var r=0===t.length;return!r||n||w.JSString_methods.startsWith$1(e,"/")?M._Uri__removeDotSegments(e):M._Uri__normalizeRelativePath(e,!r||n)},_Uri__makeQuery:function(e,t,n,r){return M._Uri__normalizeOrSubstring(e,t,n,w.List_CVk,!0)},_Uri__makeFragment:function(e,t,n){return M._Uri__normalizeOrSubstring(e,t,n,w.List_CVk,!0)},_Uri__normalizeEscape:function(e,t,n){var r,i,o,a,s,l=t+2;if(l>=e.length)return"%";if(r=w.JSString_methods.codeUnitAt$1(e,t+1),i=w.JSString_methods.codeUnitAt$1(e,l),o=E.hexDigitValue(r),a=E.hexDigitValue(i),o<0||a<0)return"%";if((s=16*o+a)<127){if((l=w.JSInt_methods._shrOtherPositive$1(s,4))>=8)return E.ioore(w.List_nxB,l);l=0!=(w.List_nxB[l]&1<<(15&s))}else l=!1;return l?E.Primitives_stringFromCharCode(n&&65<=s&&90>=s?(32|s)>>>0:s):r>=97||i>=97?w.JSString_methods.substring$2(e,t,t+3).toUpperCase():void 0},_Uri__escapeChar:function(e){var t,n,r,i,o,a,s="0123456789ABCDEF";if(e<128)(t=new Array(3)).fixed$length=Array,n=E.setRuntimeTypeInfo(t,[M.int]),w.JSArray_methods.$indexSet(n,0,37),w.JSArray_methods.$indexSet(n,1,w.JSString_methods._codeUnitAt$1(s,e>>>4)),w.JSArray_methods.$indexSet(n,2,w.JSString_methods._codeUnitAt$1(s,15&e));else for(e>2047?e>65535?(r=240,i=4):(r=224,i=3):(r=192,i=2),(t=new Array(3*i)).fixed$length=Array,n=E.setRuntimeTypeInfo(t,[M.int]),o=0;--i>=0;r=128)a=63&w.JSInt_methods._shrReceiverPositive$1(e,6*i)|r,w.JSArray_methods.$indexSet(n,o,37),w.JSArray_methods.$indexSet(n,o+1,w.JSString_methods._codeUnitAt$1(s,a>>>4)),w.JSArray_methods.$indexSet(n,o+2,w.JSString_methods._codeUnitAt$1(s,15&a)),o+=3;return M.String_String$fromCharCodes(n,0,null)},_Uri__normalizeOrSubstring:function(e,t,n,r,i){var o=M._Uri__normalize(e,t,n,r,i);return null==o?w.JSString_methods.substring$2(e,t,n):o},_Uri__normalize:function(e,t,n,r,i){for(var o,a,s,l,c,u=!i,h=t,d=h,p=null;;){if("number"!=typeof h)return h.$lt();if("number"!=typeof n)return E.iae(n);if(!(h<n))break;e:{if((o=w.JSString_methods.codeUnitAt$1(e,h))<127){if((a=o>>>4)>=8)return E.ioore(r,a);a=0!=(r[a]&1<<(15&o))}else a=!1;if(a)++h;else{if(37===o){if(null==(s=M._Uri__normalizeEscape(e,h,!1))){h+=3;break e}"%"===s?(s="%25",l=1):l=3}else{if(u)if(o<=93){if((a=o>>>4)>=8)return E.ioore(w.List_2Vk0,a);a=0!=(w.List_2Vk0[a]&1<<(15&o))}else a=!1;else a=!1;a?(M._Uri__fail(e,h,"Invalid character"),s=null,l=null):(55296==(64512&o)&&(a=h+1)<n&&56320==(64512&(c=w.JSString_methods.codeUnitAt$1(e,a)))?(o=65536|(1023&o)<<10|1023&c,l=2):l=1,s=M._Uri__escapeChar(o))}if(null==p&&(p=new M.StringBuffer("")),p._contents+=w.JSString_methods.substring$2(e,d,h),p._contents+=E.S(s),"number"!=typeof l)return E.iae(l);d=h+=l}}}if(null!=p)return"number"!=typeof d?d.$lt():(d<n&&(p._contents+=w.JSString_methods.substring$2(e,d,n)),(u=p._contents).charCodeAt(0),u)},_Uri__mayContainDotSegments:function(e){return!!w.JSString_methods.startsWith$1(e,".")||-1!==w.JSString_methods.indexOf$1(e,"/.")},_Uri__removeDotSegments:function(e){var t,n,r,i,o,a,s;if(!M._Uri__mayContainDotSegments(e))return e;for(t=E.setRuntimeTypeInfo([],[M.String]),r=(n=e.split("/")).length,i=!1,o=0;o<r;++o)if(a=n[o],T.$eq$(a,"..")){if(0!==(s=t.length)){if(0>=s)return E.ioore(t,-1);t.pop(),0===t.length&&w.JSArray_methods.add$1(t,"")}i=!0}else"."===a?i=!0:(w.JSArray_methods.add$1(t,a),i=!1);return i&&w.JSArray_methods.add$1(t,""),w.JSArray_methods.join$1(t,"/")},_Uri__normalizeRelativePath:function(e,t){var n,r,i,o,a,s;if(!M._Uri__mayContainDotSegments(e))return t?e:M._Uri__escapeScheme(e);for(n=E.setRuntimeTypeInfo([],[M.String]),i=(r=e.split("/")).length,o=!1,a=0;a<i;++a)if(".."===(s=r[a]))if(0!==n.length&&".."!==w.JSArray_methods.get$last(n)){if(0>=n.length)return E.ioore(n,-1);n.pop(),o=!0}else w.JSArray_methods.add$1(n,".."),o=!1;else"."===s?o=!0:(w.JSArray_methods.add$1(n,s),o=!1);if(0!==(r=n.length))if(1===r){if(0>=r)return E.ioore(n,0);r=0===n[0].length}else r=!1;else r=!0;if(r)return"./";if((o||".."===w.JSArray_methods.get$last(n))&&w.JSArray_methods.add$1(n,""),!t){if(0>=n.length)return E.ioore(n,0);w.JSArray_methods.$indexSet(n,0,M._Uri__escapeScheme(n[0]))}return w.JSArray_methods.join$1(n,"/")},_Uri__escapeScheme:function(e){var t,n,r,i=e.length;if(i>=2&&M._Uri__isAlphabeticCharacter(T._codeUnitAt$1$s(e,0)))for(t=1;t<i;++t){if(58===(n=w.JSString_methods._codeUnitAt$1(e,t)))return w.JSString_methods.substring$2(e,0,t)+"%3A"+w.JSString_methods.substring$1(e,t+1);if(n<=127){if((r=n>>>4)>=8)return E.ioore(w.List_JYB,r);r=0==(w.List_JYB[r]&1<<(15&n))}else r=!0;if(r)break}return e},_Uri__hexCharPairToByte:function(e,t){var n,r,i;for(n=0,r=0;r<2;++r)if(48<=(i=w.JSString_methods.codeUnitAt$1(e,t+r))&&i<=57)n=16*n+i-48;else{if(!(97<=(i|=32)&&i<=102))throw E.wrapException(M.ArgumentError$("Invalid URL encoding"));n=16*n+i-87}return n},_Uri__uriDecode:function(e,t,n,r,i){for(var o,a,s,l,c=t;;){if(!(c<n)){o=!0;break}if(s=!((a=w.JSString_methods.codeUnitAt$1(e,c))<=127)||37===a){o=!1;break}++c}if(o){if(s=w.C_Utf8Codec===r)return w.JSString_methods.substring$2(e,t,n);l=new E.CodeUnits(w.JSString_methods.substring$2(e,t,n))}else for(l=E.setRuntimeTypeInfo([],[M.int]),s=e.length,c=t;c<n;++c){if((a=w.JSString_methods.codeUnitAt$1(e,c))>127)throw E.wrapException(M.ArgumentError$("Illegal percent encoding in URI"));if(37===a){if(c+3>s)throw E.wrapException(M.ArgumentError$("Truncated URI"));w.JSArray_methods.add$1(l,M._Uri__hexCharPairToByte(e,c+1)),c+=2}else w.JSArray_methods.add$1(l,a)}return E.assertSubtype(l,"$isList",[M.int],"$asList"),new M.Utf8Decoder(!1).convert$1(l)},_Uri__isAlphabeticCharacter:function(e){var t=32|e;return 97<=t&&t<=122},UriData_parse:function(e){var t;if(e.length>=5){if(0===(t=M._startsWithData(e,0)))return M.UriData__parse(e,5,null);if(32===t)return M.UriData__parse(w.JSString_methods.substring$1(e,5),0,null)}throw E.wrapException(M.FormatException$("Does not start with 'data:'",e,0))},UriData__parse:function(e,t,n){var r,i,o,a,s,l,c,u,h="Invalid MIME type",d=E.setRuntimeTypeInfo([t-1],[M.int]);for(r=e.length,i=t,o=-1,a=null;i<r&&(44!==(a=w.JSString_methods._codeUnitAt$1(e,i))&&59!==a);++i)if(47===a){if(o<0){o=i;continue}throw E.wrapException(M.FormatException$(h,e,i))}if(o<0&&i>t)throw E.wrapException(M.FormatException$(h,e,i));for(;44!==a;){for(w.JSArray_methods.add$1(d,i),++i,s=-1;i<r;++i)if(61===(a=w.JSString_methods._codeUnitAt$1(e,i)))s<0&&(s=i);else if(59===a||44===a)break;if(!(s>=0)){if(l=w.JSArray_methods.get$last(d),44!==a||i!==l+7||!w.JSString_methods.startsWith$2(e,"base64",l+1))throw E.wrapException(M.FormatException$("Expecting '='",e,i));break}w.JSArray_methods.add$1(d,s)}return w.JSArray_methods.add$1(d,i),c=i+1,1==(1&d.length)?e=w.C_Base64Codec.normalize$3(e,c,r):null!=(u=M._Uri__normalize(e,c,r,w.List_CVk,!0))&&(e=w.JSString_methods.replaceRange$3(e,c,r,u)),new M.UriData(e,d,n)},_createTables:function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-._~!$&'()*+,;=",t=M.List_List$generate(22,new M._createTables_closure,!0,M.Uint8List),n=new M._createTables_build(t),r=new M._createTables_setChars,i=new M._createTables_setRange,o=E.interceptedTypeCheck(n.call$2(0,225),"$isUint8List");return r.call$3(o,e,1),r.call$3(o,".",14),r.call$3(o,":",34),r.call$3(o,"/",3),r.call$3(o,"?",172),r.call$3(o,"#",205),o=E.interceptedTypeCheck(n.call$2(14,225),"$isUint8List"),r.call$3(o,e,1),r.call$3(o,".",15),r.call$3(o,":",34),r.call$3(o,"/",234),r.call$3(o,"?",172),r.call$3(o,"#",205),o=E.interceptedTypeCheck(n.call$2(15,225),"$isUint8List"),r.call$3(o,e,1),r.call$3(o,"%",225),r.call$3(o,":",34),r.call$3(o,"/",9),r.call$3(o,"?",172),r.call$3(o,"#",205),o=E.interceptedTypeCheck(n.call$2(1,225),"$isUint8List"),r.call$3(o,e,1),r.call$3(o,":",34),r.call$3(o,"/",10),r.call$3(o,"?",172),r.call$3(o,"#",205),o=E.interceptedTypeCheck(n.call$2(2,235),"$isUint8List"),r.call$3(o,e,139),r.call$3(o,"/",131),r.call$3(o,".",146),r.call$3(o,"?",172),r.call$3(o,"#",205),o=E.interceptedTypeCheck(n.call$2(3,235),"$isUint8List"),r.call$3(o,e,11),r.call$3(o,"/",68),r.call$3(o,".",18),r.call$3(o,"?",172),r.call$3(o,"#",205),o=E.interceptedTypeCheck(n.call$2(4,229),"$isUint8List"),r.call$3(o,e,5),i.call$3(o,"AZ",229),r.call$3(o,":",102),r.call$3(o,"@",68),r.call$3(o,"[",232),r.call$3(o,"/",138),r.call$3(o,"?",172),r.call$3(o,"#",205),o=E.interceptedTypeCheck(n.call$2(5,229),"$isUint8List"),r.call$3(o,e,5),i.call$3(o,"AZ",229),r.call$3(o,":",102),r.call$3(o,"@",68),r.call$3(o,"/",138),r.call$3(o,"?",172),r.call$3(o,"#",205),o=E.interceptedTypeCheck(n.call$2(6,231),"$isUint8List"),i.call$3(o,"19",7),r.call$3(o,"@",68),r.call$3(o,"/",138),r.call$3(o,"?",172),r.call$3(o,"#",205),o=E.interceptedTypeCheck(n.call$2(7,231),"$isUint8List"),i.call$3(o,"09",7),r.call$3(o,"@",68),r.call$3(o,"/",138),r.call$3(o,"?",172),r.call$3(o,"#",205),r.call$3(E.interceptedTypeCheck(n.call$2(8,8),"$isUint8List"),"]",5),o=E.interceptedTypeCheck(n.call$2(9,235),"$isUint8List"),r.call$3(o,e,11),r.call$3(o,".",16),r.call$3(o,"/",234),r.call$3(o,"?",172),r.call$3(o,"#",205),o=E.interceptedTypeCheck(n.call$2(16,235),"$isUint8List"),r.call$3(o,e,11),r.call$3(o,".",17),r.call$3(o,"/",234),r.call$3(o,"?",172),r.call$3(o,"#",205),o=E.interceptedTypeCheck(n.call$2(17,235),"$isUint8List"),r.call$3(o,e,11),r.call$3(o,"/",9),r.call$3(o,"?",172),r.call$3(o,"#",205),o=E.interceptedTypeCheck(n.call$2(10,235),"$isUint8List"),r.call$3(o,e,11),r.call$3(o,".",18),r.call$3(o,"/",234),r.call$3(o,"?",172),r.call$3(o,"#",205),o=E.interceptedTypeCheck(n.call$2(18,235),"$isUint8List"),r.call$3(o,e,11),r.call$3(o,".",19),r.call$3(o,"/",234),r.call$3(o,"?",172),r.call$3(o,"#",205),o=E.interceptedTypeCheck(n.call$2(19,235),"$isUint8List"),r.call$3(o,e,11),r.call$3(o,"/",234),r.call$3(o,"?",172),r.call$3(o,"#",205),o=E.interceptedTypeCheck(n.call$2(11,235),"$isUint8List"),r.call$3(o,e,11),r.call$3(o,"/",10),r.call$3(o,"?",172),r.call$3(o,"#",205),o=E.interceptedTypeCheck(n.call$2(12,236),"$isUint8List"),r.call$3(o,e,12),r.call$3(o,"?",12),r.call$3(o,"#",205),o=E.interceptedTypeCheck(n.call$2(13,237),"$isUint8List"),r.call$3(o,e,13),r.call$3(o,"?",13),i.call$3(E.interceptedTypeCheck(n.call$2(20,245),"$isUint8List"),"az",21),o=E.interceptedTypeCheck(n.call$2(21,245),"$isUint8List"),i.call$3(o,"az",21),i.call$3(o,"09",21),r.call$3(o,"+-.",21),t},_scan:function(e,t,n,r,i){var o,a,s,l,c=K.$get$_scannerTables();for(o=t;o<n;++o){if(r<0||r>=c.length)return E.ioore(c,r);if(a=c[r],(s=96^w.JSString_methods._codeUnitAt$1(e,o))>95&&(s=31),s>=a.length)return E.ioore(a,s);r=31&(l=a[s]),w.JSArray_methods.$indexSet(i,l>>>5,o)}return r},_startsWithData:function(e,t){return(3*(58^w.JSString_methods._codeUnitAt$1(e,t+4))|100^w.JSString_methods._codeUnitAt$1(e,t)|97^w.JSString_methods._codeUnitAt$1(e,t+1)|116^w.JSString_methods._codeUnitAt$1(e,t+2)|97^w.JSString_methods._codeUnitAt$1(e,t+3))>>>0},NoSuchMethodError_toString_closure:function(e,t){this._box_0=e,this.sb=t},bool:function(){},DateTime:function(e,t){this._value=e,this.isUtc=t},double:function(){},Error:function(){},AssertionError:function(){},NullThrownError:function(){},ArgumentError:function(e,t,n,r){var i=this;i._hasValue=e,i.invalidValue=t,i.name=n,i.message=r},RangeError:function(e,t,n,r,i,o){var a=this;a.start=e,a.end=t,a._hasValue=n,a.invalidValue=r,a.name=i,a.message=o},IndexError:function(e,t,n,r,i){var o=this;o.length=e,o._hasValue=t,o.invalidValue=n,o.name=r,o.message=i},NoSuchMethodError:function(e,t,n,r){var i=this;i._core$_receiver=e,i._core$_memberName=t,i._core$_arguments=n,i._namedArguments=r},UnsupportedError:function(e){this.message=e},UnimplementedError:function(e){this.message=e},StateError:function(e){this.message=e},ConcurrentModificationError:function(e){this.modifiedObject=e},OutOfMemoryError:function(){},StackOverflowError:function(){},CyclicInitializationError:function(e){this.variableName=e},_Exception:function(e){this.message=e},FormatException:function(e,t,n){this.message=e,this.source=t,this.offset=n},Function:function(){},int:function(){},Iterable:function(){},_GeneratorIterable:function(e,t,n){this.length=e,this._generator=t,this.$ti=n},Iterator:function(){},List:function(){},Map:function(){},MapEntry:function(e,t,n){this.key=e,this.value=t,this.$ti=n},Null:function(){},num:function(){},Object:function(){},Set:function(){},StackTrace:function(){},String:function(){},StringBuffer:function(e){this._contents=e},StringSink:function(){},Symbol0:function(){},Type:function(){},Uri:function(){},Uri__parseIPv4Address_error:function(e){this.host=e},Uri_parseIPv6Address_error:function(e){this.host=e},Uri_parseIPv6Address_parseHex:function(e,t){this.error=e,this.host=t},_Uri:function(e,t,n,r,i,o,a){var s=this;s.scheme=e,s._userInfo=t,s._host=n,s._port=r,s.path=i,s._query=o,s._fragment=a,s._hashCodeCache=s._text=null},_Uri__Uri$notSimple_closure:function(e,t){this.uri=e,this.portStart=t},UriData:function(e,t,n){this._text=e,this._separatorIndices=t,this._uriCache=n},_createTables_closure:function(){},_createTables_build:function(e){this.tables=e},_createTables_setChars:function(){},_createTables_setRange:function(){},_SimpleUri:function(e,t,n,r,i,o,a,s){var l=this;l._uri=e,l._schemeEnd=t,l._hostStart=n,l._portStart=r,l._pathStart=i,l._queryStart=o,l._fragmentStart=a,l._schemeCache=s,l._hashCodeCache=null},_DataUri:function(e,t,n,r,i,o,a){var s=this;s.scheme=e,s._userInfo=t,s._host=n,s._port=r,s.path=i,s._query=o,s._fragment=a,s._hashCodeCache=s._text=null},jsify:function(e){var t=T.getInterceptor$(e);if(!t.$isMap&&!t.$isIterable)throw E.wrapException(M.ArgumentError$("object must be a Map or Iterable"));return M._convertDataTree(e)},_convertDataTree:function(e){return new M._convertDataTree__convert(new M._IdentityHashMap([null,null])).call$1(e)},_convertDataTree__convert:function(e){this._convertedObjects=e},Uint8List:function(){},_convertDartFunctionFast:function(e){var t,n=e.$dart_jsFunction;return null!=n?n:((t=function(e,t){return function(){return e(t,Array.prototype.slice.apply(arguments))}}(M._callDartFunctionFast,e))[K.$get$DART_CLOSURE_PROPERTY_NAME()]=e,e.$dart_jsFunction=t,t)},_callDartFunctionFast:function(e,t){return E.listTypeCheck(t),E.interceptedTypeCheck(e,"$isFunction"),E.Primitives_applyFunction(e,t,null)},allowInterop:function(e,t){return"function"==typeof e?e:E.assertSubtypeOfRuntimeType(M._convertDartFunctionFast(e),t)}},C={Accessor_fromMap:function(e,t){var n,r,i,o,a,s,l,c,u,h,d,p,f,m,g="byteOffset",v=M.Object;switch(E.assertSubtype(e,"$isMap",[M.String,v],"$asMap"),H.checkMembers(e,w.List_jxI,t),-1===(n=H.getIndex(e,"bufferView",t,!1))?((r=e.containsKey$1(g))&&t.addIssue$3$args$name(K.$get$SchemaError_unsatisfiedDependency(),E.setRuntimeTypeInfo(["bufferView"],[v]),g),i=0):i=H.getUint(e,g,t,0,null,-1,0,!1),o=H.getUint(e,"componentType",t,-1,w.List_Q4K,-1,0,!0),a=H.getUint(e,"count",t,-1,null,-1,1,!0),s=H.getString(e,"type",t,null,w.Map_A1ato.get$keys(),null,!0),l=H.getBool(e,"normalized",t),null!=s&&-1!==o&&null!=(c=w.Map_A1ato.$index(0,s))?5126===o?(v=[M.int],u=H.getFloatList(e,"min",t,null,E.setRuntimeTypeInfo([c],v),1/0,-1/0,!0),h=H.getFloatList(e,"max",t,null,E.setRuntimeTypeInfo([c],v),1/0,-1/0,!0)):(u=H.getGlIntList(e,"min",t,o,c),h=H.getGlIntList(e,"max",t,o,c)):h=u=null,d=H.getObjectFromInnerMap(e,"sparse",t,C.accessor_AccessorSparse_fromMap$closure(),!1,C.AccessorSparse),(v=!!l&&(5126===o||5125===o))&&t.addIssue$2$name(K.$get$SemanticError_accessorNormalizedInvalid(),"normalized"),"MAT2"!==s&&"MAT3"!==s&&"MAT4"!==s||-1===i||0==(3&i)||t.addIssue$2$name(K.$get$SemanticError_accessorMatrixAlignment(),g),o){case 5120:case 5121:case 5122:case 5123:case 5125:r=[v=M.int],E.subtypeCast(h,"$isList",r,"$asList"),E.subtypeCast(u,"$isList",r,"$asList"),H.getString(e,"name",t,null,null,null,!1),r=H.getExtensions(e,w.Type_Accessor_scC,t,null,!1),p=H.getExtras(e,t),f=new C._AccessorInt(n,i,o,a,s,l,h,u,d,$.componentTypeLength(o),r,p),null!=u&&(r=t.getPointerString$0(),p=M.List_List$filled(u.length,0,v),(m=new Array(u.length)).fixed$length=Array,t.addElementChecker$2(f,new C.MinIntegerChecker(p,E.setRuntimeTypeInfo(m,[v]),T.toList$1$growable$ax(u,!1),r))),null!=h&&(r=t.getPointerString$0(),p=M.List_List$filled(h.length,0,v),(m=new Array(h.length)).fixed$length=Array,t.addElementChecker$2(f,new C.MaxIntegerChecker(p,E.setRuntimeTypeInfo(m,[v]),T.toList$1$growable$ax(h,!1),r)));break;default:r=[v=M.double],E.subtypeCast(h,"$isList",r,"$asList"),E.subtypeCast(u,"$isList",r,"$asList"),H.getString(e,"name",t,null,null,null,!1),r=H.getExtensions(e,w.Type_Accessor_scC,t,null,!1),p=H.getExtras(e,t),f=new C._AccessorFloat(n,i,o,a,s,l,h,u,d,$.componentTypeLength(o),r,p),t.addElementChecker$2(f,new C.InvalidFloatChecker(t.getPointerString$0())),null!=u&&(r=t.getPointerString$0(),p=M.List_List$filled(u.length,0,M.int),(m=new Array(u.length)).fixed$length=Array,t.addElementChecker$2(f,new C.MinFloatChecker(p,E.setRuntimeTypeInfo(m,[v]),T.toList$1$growable$ax(u,!1),r))),null!=h&&(r=t.getPointerString$0(),p=M.List_List$filled(h.length,0,M.int),(m=new Array(h.length)).fixed$length=Array,t.addElementChecker$2(f,new C.MaxFloatChecker(p,E.setRuntimeTypeInfo(m,[v]),T.toList$1$growable$ax(h,!1),r)))}return f},Accessor__checkByteOffsetAndLength:function(e,t,n,r,i,o){var a,s;if(-1===e)return!1;if(e%t!=0){if(null==o)return!1;o.addIssue$3$args$name(K.$get$SemanticError_accessorOffsetAlignment(),E.setRuntimeTypeInfo([e,t],[M.Object]),"byteOffset")}if(-1===(a=r.byteOffset))return!1;if((s=a+e)%t!=0){if(null==o)return!1;o.addIssue$2$args(K.$get$LinkError_accessorTotalOffsetAlignment(),E.setRuntimeTypeInfo([s,t],[M.Object]))}if(e>(a=r.byteLength)){if(null==o)return!1;o.addIssue$3$args$name(K.$get$LinkError_accessorTooLong(),E.setRuntimeTypeInfo([e,n,i,a],[M.Object]),"byteOffset")}else if(e+n>a){if(null==o)return!1;o.addIssue$2$args(K.$get$LinkError_accessorTooLong(),E.setRuntimeTypeInfo([e,n,i,a],[M.Object]))}return!0},Accessor__typedViewIndices:function(e,t,n,r){var i,o;if(null!=t){if(i=t.byteLength,o=$.componentTypeLength(e),"number"!=typeof i)return i.$lt();i=o=i<n+o*r}else i=!0;if(!i)switch(e){case 5121:return t.toString,E.NativeUint8List_NativeUint8List$view(t,n,r);case 5123:return E.NativeUint16List_NativeUint16List$view(t,n,r);case 5125:return E.NativeUint32List_NativeUint32List$view(t,n,r);default:return}},Accessor__typedViewFloat:function(e,t,n,r){var i,o;if(null!=t){if(i=t.byteLength,o=$.componentTypeLength(e),"number"!=typeof i)return i.$lt();i=o=i<n+o*r}else i=!0;if(!i)switch(e){case 5126:return E._checkViewArguments(t,n,r),i=new Float32Array(t,n,r);default:return}},Accessor__typedViewInt:function(e,t,n,r){var i,o;if(null!=t){if(i=t.byteLength,o=$.componentTypeLength(e),"number"!=typeof i)return i.$lt();i=o=i<n+o*r}else i=!0;if(!i)switch(e){case 5120:return E._checkViewArguments(t,n,r),i=new Int8Array(t,n,r);case 5121:return t.toString,E.NativeUint8List_NativeUint8List$view(t,n,r);case 5122:return E._checkViewArguments(t,n,r),i=new Int16Array(t,n,r);case 5123:return E.NativeUint16List_NativeUint16List$view(t,n,r);case 5125:return E.NativeUint32List_NativeUint32List$view(t,n,r);default:return}},AccessorSparse_fromMap:function(e,t){var n,r,i;if(E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),H.checkMembers(e,w.List_count_indices_values,t),n=H.getUint(e,"count",t,-1,null,-1,1,!0),r=H.getObjectFromInnerMap(e,"indices",t,C.accessor_AccessorSparseIndices_fromMap$closure(),!0,C.AccessorSparseIndices),i=H.getObjectFromInnerMap(e,"values",t,C.accessor_AccessorSparseValues_fromMap$closure(),!0,C.AccessorSparseValues),-1!==n&&null!=r&&null!=i)return new C.AccessorSparse(n,r,i,H.getExtensions(e,w.Type_AccessorSparse_SoA,t,null,!1),H.getExtras(e,t))},AccessorSparseIndices_fromMap:function(e,t){return E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),H.checkMembers(e,w.List_YcR,t),new C.AccessorSparseIndices(H.getIndex(e,"bufferView",t,!0),H.getUint(e,"byteOffset",t,0,null,-1,0,!1),H.getUint(e,"componentType",t,-1,w.List_5121_5123_5125,-1,0,!0),H.getExtensions(e,w.Type_AccessorSparseIndices_XRi,t,null,!1),H.getExtras(e,t))},AccessorSparseValues_fromMap:function(e,t){return E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),H.checkMembers(e,w.List_bufferView_byteOffset,t),new C.AccessorSparseValues(H.getIndex(e,"bufferView",t,!0),H.getUint(e,"byteOffset",t,0,null,-1,0,!1),H.getExtensions(e,w.Type_AccessorSparseValues_Yas,t,null,!1),H.getExtras(e,t))},Accessor:function(){},_AccessorInt:function(e,t,n,r,i,o,a,s,l,c,u,h){var d=this;d._accessor$_bufferViewIndex=e,d.byteOffset=t,d.componentType=n,d.count=r,d.type=i,d.normalized=o,d.max=a,d.min=s,d.sparse=l,d.componentLength=c,d._bufferView=null,d._byteStride=0,d._accessor$_usage=d._containsCubicSpline=null,d.extensions=u,d.extras=h,d._isUsed=!1},_AccessorInt_getElements_closure:function(e,t,n,r,i){var o=this;o.length=e,o.view=t,o.rowCount=n,o.columnCount=r,o.skip=i},_AccessorInt_getElements_closure0:function(e){this.view=e},_AccessorInt_getElements_closure1:function(){},_AccessorInt_getElements_closure2:function(e,t,n,r,i){var o=this;o.$this=e,o.indices=t,o.baseElements=n,o.components=r,o.values=i},_AccessorInt_getElementsNormalized_closure:function(e){this.denom=e},_AccessorInt_getElementsNormalized_closure0:function(e){this.denom=e},_AccessorFloat:function(e,t,n,r,i,o,a,s,l,c,u,h){var d=this;d._accessor$_bufferViewIndex=e,d.byteOffset=t,d.componentType=n,d.count=r,d.type=i,d.normalized=o,d.max=a,d.min=s,d.sparse=l,d.componentLength=c,d._bufferView=null,d._byteStride=0,d._accessor$_usage=d._containsCubicSpline=null,d.extensions=u,d.extras=h,d._isUsed=!1},_AccessorFloat_getElements_closure:function(e,t,n,r,i){var o=this;o.length=e,o.view=t,o.rowCount=n,o.columnCount=r,o.skip=i},_AccessorFloat_getElements_closure0:function(e){this.view=e},_AccessorFloat_getElements_closure1:function(){},_AccessorFloat_getElements_closure2:function(e,t,n,r,i){var o=this;o.$this=e,o.indices=t,o.baseElements=n,o.components=r,o.values=i},AccessorSparse:function(e,t,n,r,i){var o=this;o.count=e,o.indices=t,o.values=n,o.extensions=r,o.extras=i,o._isUsed=!1},AccessorSparseIndices:function(e,t,n,r,i){var o=this;o._accessor$_bufferViewIndex=e,o.byteOffset=t,o.componentType=n,o._bufferView=null,o.extensions=r,o.extras=i,o._isUsed=!1},AccessorSparseValues:function(e,t,n,r){var i=this;i._accessor$_bufferViewIndex=e,i.byteOffset=t,i._bufferView=null,i.extensions=n,i.extras=r,i._isUsed=!1},InvalidFloatChecker:function(e){this.path=e},MinFloatChecker:function(e,t,n,r){var i=this;i._invalidMinCount=e,i._computedMin=t,i._providedMin=n,i.path=r},MaxFloatChecker:function(e,t,n,r){var i=this;i._invalidMaxCount=e,i._computedMax=t,i._providedMax=n,i.path=r},MinIntegerChecker:function(e,t,n,r){var i=this;i._invalidMinCount=e,i._computedMin=t,i._providedMin=n,i.path=r},MaxIntegerChecker:function(e,t,n,r){var i=this;i._invalidMaxCount=e,i._computedMax=t,i._providedMax=n,i.path=r},ValidationOptions$:function(e,t,n){var r=M.LinkedHashSet_LinkedHashSet$_empty(M.String),i=null==t?0:t;return null!=e&&r.addAll$1(0,e),new C.ValidationOptions(i,r,n)},Context_defaultExtensionNames:function(){var e=M.String,t=E.getTypeArgumentByIndex(w.List_2nP,0);return new E.MappedListIterable(w.List_2nP,E.functionTypeCheck(new C.Context_defaultExtensionNames_closure,{func:1,ret:e,args:[t]}),[t,e])},Context$:function(e){var t,n,r,i=M.String,o=[i],a=E.setRuntimeTypeInfo([],o),s=M.Object,l=E.setRuntimeTypeInfo([],[U.ResourceValidatableExtensionEntry]),c=U.ExtensionTuple,u=U.ExtFuncs,h=M.LinkedHashMap_LinkedHashMap$_empty(c,u),d=E.setRuntimeTypeInfo([],o),p=E.setRuntimeTypeInfo([],o),f=[M.Map,M.String,M.Object],m=E.setRuntimeTypeInfo([],[f]),g=E.setRuntimeTypeInfo([],[F.Issue]);return o=E.setRuntimeTypeInfo(["image/jpeg","image/png"],o),t=I.AccessorFormat,n=[M.Set,I.AccessorFormat],r=M.LinkedHashMap_LinkedHashMap$_literal(["POSITION",M.LinkedHashSet_LinkedHashSet$_literal([w.AccessorFormat_VEC3_5126_false],t),"NORMAL",M.LinkedHashSet_LinkedHashSet$_literal([w.AccessorFormat_VEC3_5126_false],t),"TANGENT",M.LinkedHashSet_LinkedHashSet$_literal([w.AccessorFormat_VEC4_5126_false],t),"TEXCOORD",M.LinkedHashSet_LinkedHashSet$_literal([w.AccessorFormat_VEC2_5126_false,w.AccessorFormat_VEC2_5121_true,w.AccessorFormat_VEC2_5123_true],t),"COLOR",M.LinkedHashSet_LinkedHashSet$_literal([w.AccessorFormat_VEC3_5126_false,w.AccessorFormat_VEC3_5121_true,w.AccessorFormat_VEC3_5123_true,w.AccessorFormat_VEC4_5126_false,w.AccessorFormat_VEC4_5121_true,w.AccessorFormat_VEC4_5123_true],t),"JOINTS",M.LinkedHashSet_LinkedHashSet$_literal([w.AccessorFormat_VEC4_5121_false,w.AccessorFormat_VEC4_5123_false],t),"WEIGHTS",M.LinkedHashSet_LinkedHashSet$_literal([w.AccessorFormat_VEC4_5126_false,w.AccessorFormat_VEC4_5121_true,w.AccessorFormat_VEC4_5123_true],t)],i,n),n=M.LinkedHashMap_LinkedHashMap$_literal(["POSITION",M.LinkedHashSet_LinkedHashSet$_literal([w.AccessorFormat_VEC3_5126_false],t),"NORMAL",M.LinkedHashSet_LinkedHashSet$_literal([w.AccessorFormat_VEC3_5126_false],t),"TANGENT",M.LinkedHashSet_LinkedHashSet$_literal([w.AccessorFormat_VEC3_5126_false],t)],i,n),t=null==e?C.ValidationOptions$(null,null,null):e,i=[i],(n=new C.Context(t,a,M.LinkedHashMap_LinkedHashMap$_empty([C.Accessor,M.num],[M.List,[H.ElementChecker,M.num]]),M.LinkedHashMap_LinkedHashMap$_empty(s,s),M.LinkedHashMap_LinkedHashMap$_empty(M.Type,[M.List,U.LinkableExtensionEntry]),l,M.LinkedHashMap_LinkedHashMap$_empty(I.BufferView,[M.Set,[C.Accessor,M.num]]),M.LinkedHashMap_LinkedHashMap$_empty([H.SafeList,,],[M.List,M.String]),h,d,p,m,M.LinkedHashSet_LinkedHashSet$_empty(U.Extension),g,new M.StringBuffer(""),o,r,n)).set$_extensionsLoadedView(new M.UnmodifiableListView(p,i)),n.set$_extensionsUsedView(new M.UnmodifiableListView(d,i)),n.set$_extensionsFunctionsView(new M.UnmodifiableMapView(h,[c,u])),n.set$_resourcesView(new M.UnmodifiableListView(m,[f])),n},ValidationOptions:function(e,t,n){this.maxIssues=e,this.ignoredIssues=t,this.severityOverrides=n},Context:function(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,v){var y=this;y.options=e,y.path=t,y.accessorElementCheckers=n,y.owners=r,y.linkableExtensions=i,y.resourceValidatableExtensions=o,y.bufferViewAccessors=a,y.extensionCollections=s,y._isTruncated=!1,y._extensionsFunctions=l,y._extensionsFunctionsView=null,y._extensionsUsed=c,y._extensionsUsedView=null,y._extensionsLoaded=u,y._extensionsLoadedView=null,y._resources=h,y._resourcesView=null,y._userExtensions=d,y._issues=p,y._sb=f,y._isGlb=!1,y.imageMimeTypes=m,y.attributeAccessorFormats=g,y.morphAttributeAccessorFormats=v},Context_defaultExtensionNames_closure:function(){},Context_addElementChecker_closure:function(){},Context_getPointerString_closure:function(){},Context_initExtensions_closure:function(e){this.extensionName=e},Context_initExtensions_closure0:function(e){this.extensionName=e},Context_initExtensions__closure:function(e){this.extensionName=e},Context_initExtensions__closure0:function(){},Context_initExtensions_closure1:function(e,t){this.$this=e,this.extension=t},IssuesLimitExceededException:function(){}},$={Animation_fromMap:function(e,t){var n,r,i,o,a,s,l,c,u,h,d="channels";if(E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),H.checkMembers(e,w.List_channels_samplers_name,t),null!=(n=H.getMapList(e,d,t))){for(r=n.get$length(n),i=$.AnimationChannel,(o=new Array(r)).fixed$length=Array,o=E.setRuntimeTypeInfo(o,[i]),a=new H.SafeList(o,r,d,[i]),i=t.path,w.JSArray_methods.add$1(i,d),r=$.AnimationChannelTarget,s=0;s<n.get$length(n);++s){if(l=n.$index(0,s),w.JSArray_methods.add$1(i,w.JSInt_methods.toString$0(s)),H.checkMembers(l,w.List_target_sampler,t),w.JSArray_methods.$indexSet(o,s,new $.AnimationChannel(H.getIndex(l,"sampler",t,!0),H.getObjectFromInnerMap(l,"target",t,$.animation_AnimationChannelTarget_fromMap$closure(),!0,r),H.getExtensions(l,w.Type_AnimationChannel_nvO,t,null,!1),H.getExtras(l,t))),0>=i.length)return E.ioore(i,-1);i.pop()}if(0>=i.length)return E.ioore(i,-1);i.pop()}else a=null;if(null!=(c=H.getMapList(e,"samplers",t))){for(r=c.get$length(c),i=$.AnimationSampler,(o=new Array(r)).fixed$length=Array,o=E.setRuntimeTypeInfo(o,[i]),u=new H.SafeList(o,r,"samplers",[i]),i=t.path,w.JSArray_methods.add$1(i,"samplers"),s=0;s<c.get$length(c);++s){if(h=c.$index(0,s),w.JSArray_methods.add$1(i,w.JSInt_methods.toString$0(s)),H.checkMembers(h,w.List_input_interpolation_output,t),w.JSArray_methods.$indexSet(o,s,new $.AnimationSampler(H.getIndex(h,"input",t,!0),H.getString(h,"interpolation",t,"LINEAR",w.List_LINEAR_STEP_CUBICSPLINE,null,!1),H.getIndex(h,"output",t,!0),H.getExtensions(h,w.Type_AnimationSampler_y5u,t,null,!1),H.getExtras(h,t))),0>=i.length)return E.ioore(i,-1);i.pop()}if(0>=i.length)return E.ioore(i,-1);i.pop()}else u=null;return H.getString(e,"name",t,null,null,null,!1),new $.Animation(a,u,H.getExtensions(e,w.Type_Animation_hcA,t,null,!1),H.getExtras(e,t))},AnimationChannelTarget_fromMap:function(e,t){return E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),H.checkMembers(e,w.List_node_path,t),new $.AnimationChannelTarget(H.getIndex(e,"node",t,!1),H.getString(e,"path",t,null,w.List_translation_rotation_scale_weights,null,!0),H.getExtensions(e,w.Type_AnimationChannelTarget_Nno,t,null,!1),H.getExtras(e,t))},Animation:function(e,t,n,r){var i=this;i.channels=e,i.samplers=t,i.extensions=n,i.extras=r,i._isUsed=!1},Animation_link_closure:function(e,t){this.context=e,this.gltf=t},Animation_link_closure0:function(e,t,n){this.$this=e,this.context=t,this.gltf=n},AnimationChannel:function(e,t,n,r){var i=this;i._animation$_samplerIndex=e,i.target=t,i._animation$_sampler=null,i.extensions=n,i.extras=r,i._isUsed=!1},AnimationChannelTarget:function(e,t,n,r){var i=this;i._nodeIndex=e,i.path=t,i._node=null,i.extensions=n,i.extras=r,i._isUsed=!1},AnimationSampler:function(e,t,n,r,i){var o=this;o._inputIndex=e,o.interpolation=t,o._outputIndex=n,o._output=o._input=null,o.extensions=r,o.extras=i,o._isUsed=!1},AnimationInputChecker:function(e){this._lastValue=0,this.path=e},QuaternionFloatChecker:function(e,t,n,r){var i=this;i.hasTangents=e,i.normalizeValue=t,i.path=n,i._animation$_sum=i._fullComponentIndex=0,i.$ti=r},componentTypeLength:function(e){switch(e){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5124:case 5125:case 5126:return 4;default:return-1}},typeMin:function(e){switch(e){case 5121:case 5123:case 5125:return 0;case 5120:return-128;case 5122:return-32768;case 5124:return-2147483648;default:throw E.wrapException(M.ArgumentError$(null))}},typeMax:function(e){switch(e){case 5120:return 127;case 5121:return 255;case 5122:return 32767;case 5123:return 65535;case 5124:return 2147483647;case 5125:return 4294967295;default:throw E.wrapException(M.ArgumentError$(null))}}},O={Asset_fromMap:function(e,t){var n,r,i,o,a,s=M.Object;if(E.assertSubtype(e,"$isMap",[M.String,s],"$asMap"),H.checkMembers(e,w.List_avb,t),H.getString(e,"copyright",t,null,null,null,!1),n=H.getString(e,"generator",t,null,null,null,!1),r=K.$get$Asset_versionRegexp(),i=H.getString(e,"version",t,null,null,r,!0),r=H.getString(e,"minVersion",t,null,null,r,!1),o=new O.Asset(n,i,r,H.getExtensions(e,w.Type_Asset_ePM,t,null,!1),H.getExtras(e,t)),n=null!=r&&null!=i){if(n=o.get$majorMinVersion(),a=o.get$majorVersion(),"number"!=typeof n)return n.$gt();if("number"!=typeof a)return E.iae(a);if(n<=a)if(o.get$majorMinVersion()==o.get$majorVersion()){if(n=o.get$minorMinVersion(),a=o.get$minorVersion(),"number"!=typeof n)return n.$gt();if("number"!=typeof a)return E.iae(a);n=a=n>a}else n=!1;else n=!0;n&&t.addIssue$3$args$name(K.$get$SemanticError_minVersionGreaterThanVersion(),E.setRuntimeTypeInfo([r,i],[s]),"minVersion")}return o},Asset:function(e,t,n,r,i){var o=this;o.generator=e,o.version=t,o.minVersion=n,o.extensions=r,o.extras=i,o._isUsed=!1},Image_fromMap:function(e,t){var n,r,i,o,a,s,l,c,u,h,d=M.Object;if(E.assertSubtype(e,"$isMap",[M.String,d],"$asMap"),H.checkMembers(e,w.List_bufferView_mimeType_uri_name,t),o=H.getIndex(e,"bufferView",t,!1),a=t.imageMimeTypes,s=H.getString(e,"mimeType",t,null,a,null,!1),n=H.getString(e,"uri",t,null,null,null,!1),(c=!(l=-1===o))&&null==s&&t.addIssue$3$args$name(K.$get$SchemaError_unsatisfiedDependency(),E.setRuntimeTypeInfo(["mimeType"],[d]),"bufferView"),(l=!(!c||null==n)||l&&null==n)&&t.addIssue$2$args(K.$get$SchemaError_oneOfMismatch(),E.setRuntimeTypeInfo(["bufferView","uri"],[d])),r=null,null!=n){i=null;try{i=M.UriData_parse(n)}catch(u){if(!(E.unwrapException(u)instanceof M.FormatException))throw u;r=H.getUri(n,t)}null!=i?(t._isGlb&&t.addIssue$2$name(K.$get$DataError_dataUriGlb(),"uri"),h=i.contentAsBytes$0(),null==s&&((l=w.JSArray_methods.contains$1(a,i.get$mimeType()))||t.addIssue$3$args$name(K.$get$SchemaError_valueNotInList(),E.setRuntimeTypeInfo([i.get$mimeType(),a],[d]),"uri"),s=i.get$mimeType())):h=null}else h=null;return d=r,H.getString(e,"name",t,null,null,null,!1),new O.Image(o,s,d,h,H.getExtensions(e,w.Type_Image_5hW,t,null,!1),H.getExtras(e,t))},Image:function(e,t,n,r,i,o){var a=this;a._bufferViewIndex=e,a.mimeType=t,a.uri=n,a.data=r,a.info=a._image$_bufferView=null,a.extensions=i,a.extras=o,a._isUsed=!1},Sampler_fromMap:function(e,t){return E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),H.checkMembers(e,w.List_qPn,t),H.getUint(e,"magFilter",t,-1,w.List_9728_9729,-1,0,!1),H.getUint(e,"minFilter",t,-1,w.List_BKg,-1,0,!1),H.getUint(e,"wrapS",t,10497,w.List_33071_33648_10497,-1,0,!1),H.getUint(e,"wrapT",t,10497,w.List_33071_33648_10497,-1,0,!1),H.getString(e,"name",t,null,null,null,!1),new O.Sampler(H.getExtensions(e,w.Type_Sampler_mXu,t,null,!1),H.getExtras(e,t))},Sampler:function(e,t){this.extensions=e,this.extras=t,this._isUsed=!1},Matrix4$zero:function(){return new O.Matrix4(new Float32Array(16))},Quaternion$_:function(){return new O.Quaternion(new Float32Array(4))},Vector3_Vector3$array:function(e){var t=new Float32Array(3);return E.assertSubtype(e,"$isList",[M.double],"$asList"),2>=e.length?E.ioore(e,2):(w.NativeFloat32List_methods.$indexSet(t,2,e[2]),1>=e.length?E.ioore(e,1):(w.NativeFloat32List_methods.$indexSet(t,1,e[1]),0>=e.length?E.ioore(e,0):(w.NativeFloat32List_methods.$indexSet(t,0,e[0]),new O.Vector3(t))))},Vector3$zero:function(){return new O.Vector3(new Float32Array(3))},Matrix4:function(e){this._m4storage=e},Quaternion:function(e){this._qStorage=e},Vector3:function(e){this._v3storage=e},Vector4:function(e){this._v4storage=e}},A={Buffer_fromMap:function(e,t){var n,r,i,o,a,s,l,c,u,h=M.Object;if(E.assertSubtype(e,"$isMap",[M.String,h],"$asMap"),H.checkMembers(e,w.List_uri_byteLength_name,t),o=H.getUint(e,"byteLength",t,-1,null,-1,1,!0),n=null,a=e.containsKey$1("uri"))if(null!=(r=H.getString(e,"uri",t,null,null,null,!1))){i=null;try{i=M.UriData_parse(r)}catch(s){if(!(E.unwrapException(s)instanceof M.FormatException))throw s;n=H.getUri(r,t)}null!=i?(t._isGlb&&t.addIssue$2$name(K.$get$DataError_dataUriGlb(),"uri"),"application/octet-stream"===i.get$mimeType()||"application/gltf-buffer"===i.get$mimeType()?l=i.contentAsBytes$0():(t.addIssue$3$args$name(K.$get$SemanticError_bufferDataUriMimeTypeInvalid(),E.setRuntimeTypeInfo([i.get$mimeType()],[h]),"uri"),l=null)):l=null,null!=l&&-1!==o&&l.length!==o&&(c=K.$get$DataError_bufferEmbeddedBytelengthMismatch(),u=l.length,t.addIssue$3$args$name(c,E.setRuntimeTypeInfo([u,o],[h]),"byteLength"),o=u)}else l=null;else l=null;return h=n,H.getString(e,"name",t,null,null,null,!1),new A.Buffer(h,o,a,l,H.getExtensions(e,w.Type_Buffer_gn0,t,null,!1),H.getExtras(e,t))},Buffer:function(e,t,n,r,i,o){var a=this;a.uri=e,a.byteLength=t,a.hasUri=n,a.data=r,a.extensions=i,a.extras=o,a._isUsed=!1},main:function(){var e=new A.main_onError;T.set$validateBytes$x(i.exports,M.allowInterop(new A.main_closure(e),{func:1,ret:[A.Promise,-2],args:[M.Uint8List,A._JSValidationOptions]})),T.set$validateString$x(i.exports,M.allowInterop(new A.main_closure0(e),{func:1,ret:[A.Promise,-2],args:[M.String,A._JSValidationOptions]})),T.set$version$x(i.exports,M.allowInterop(new A.main_closure1,{func:1,ret:M.String})),T.set$supportedExtensions$x(i.exports,M.allowInterop(new A.main_closure2,{func:1,ret:M.Object}))},validateBytes:function(e,t){return A.validateBytes$body(e,t)},validateBytes$body:function(e,t){var n,r,i,o,a,s,l,c,u=0,h=M._makeAsyncAwaitCompleter([M.Map,M.String,M.Object]),d=2,p=M._wrapJsFunctionForAsync((function(f,m){for(1===f&&(r=m,u=d);;)switch(u){case 0:if(!T.getInterceptor$(e).$isUint8List)throw E.wrapException(M.ArgumentError$("data: Argument must be a Uint8Array."));return s=A._checkOptionsObject(t),i=A._getContextFromOptions(s),o=null,d=4,l=[M.List,M.int],u=7,M._asyncAwait(G.GltfReader_detect(M.Stream_Stream$fromIterable(E.setRuntimeTypeInfo([e],[l]),l),i),p);case 7:return a=m,u=8,M._asyncAwait(a.read$0(),p);case 8:o=m,d=2,u=6;break;case 4:throw d=3,c=r,E.unwrapException(c),G.GltfInvalidFormatException,c;case 3:u=2;break;case 6:n=A._validateResourcesAndGetReport(s,i,o),u=1;break;case 1:return M._asyncReturn(n,h);case 2:return M._asyncRethrow(r,h)}}));return M._asyncStartSync(p,h)},validateString:function(e,t){var n,r,i,o=0,a=M._makeAsyncAwaitCompleter([M.Map,M.String,M.Object]),s=M._wrapJsFunctionForAsync((function(s,l){if(1===s)return M._asyncRethrow(l,a);for(;;)switch(o){case 0:if("string"!=typeof e)throw E.wrapException(M.ArgumentError$("json: Argument must be a string."));r=A._checkOptionsObject(t),i=A._getContextFromOptions(r),n=A._validateResourcesAndGetReport(r,i,G.GltfJsonReader_readFromJsonString(e,i)),o=1;break;case 1:return M._asyncReturn(n,a)}}));return M._asyncStartSync(s,a)},_checkOptionsObject:function(e){if(null!=e&&("number"==typeof e||"boolean"==typeof e||"string"==typeof e||!!T.getInterceptor$(e).$isList))throw E.wrapException(M.ArgumentError$("options: Value must be an object."));return E.interceptedTypeCast(e,"$is_JSValidationOptions")},_validateResourcesAndGetReport:function(e,t,n){var r,i,o,a,s,l,c=0,u=M._makeAsyncAwaitCompleter([M.Map,M.String,M.Object]),h=M._wrapJsFunctionForAsync((function(d,p){if(1===d)return M._asyncRethrow(p,u);for(;;)switch(c){case 0:if(l=null==e)o=null,a=null;else{if(i=T.getInterceptor$x(e),o=A._getUri(i.get$uri(e)),null!=i.get$externalResourceFunction(e)&&!T.getInterceptor$(i.get$externalResourceFunction(e)).$isFunction)throw E.wrapException(M.ArgumentError$("options.externalResourceFunction: Value must be a function."));if(a=i.get$externalResourceFunction(e),null!=i.get$validateAccessorData(e)&&"boolean"!=typeof i.get$validateAccessorData(e))throw E.wrapException(M.ArgumentError$("options.validateAccessorData: Value must be a boolean."));if(i=null!=i.get$writeTimestamp(e)&&"boolean"!=typeof(i=i.get$writeTimestamp(e)))throw E.wrapException(M.ArgumentError$("options.writeTimestamp: Value must be a boolean."))}c=null!=(null==n?null:n.gltf)&&null!=a?3:4;break;case 3:return s=A._getResourcesLoader(t,n,a),i=T.get$validateAccessorData$x(e),c=5,M._asyncAwait(s.load$1$validateAccessorData(null==i||i),h);case 5:case 4:l=l?null:T.get$writeTimestamp$x(e),r=new z.ValidationResult(o,t,n,null==l||l).toMap$0(),c=1;break;case 1:return M._asyncReturn(r,u)}}));return M._asyncStartSync(h,u)},_getUri:function(e){var t,n,r;if(null!=e){if("string"!=typeof e)throw E.wrapException(M.ArgumentError$("options.uri: Value must be a string."));try{return n=M.Uri_parse(e)}catch(r){throw(n=E.unwrapException(r))instanceof M.FormatException?(t=n,E.wrapException(M.ArgumentError$("options.uri: "+E.S(t)+"."))):r}}},_getContextFromOptions:function(e){var t,n,r,o,a,s,l,c,u;if(null!=e){if(null!=(t=T.getInterceptor$x(e)).get$maxIssues(e))if("number"==typeof(n=t.get$maxIssues(e))&&Math.floor(n)===n){if("number"!=typeof(n=t.get$maxIssues(e)))return n.$lt();n=n<0}else n=!0;else n=!1;if(n)throw E.wrapException(M.ArgumentError$("options.maxIssues: Value must be a non-negative integer."));if(null!=t.get$ignoredIssues(e)){if(!T.getInterceptor$(t.get$ignoredIssues(e)).$isList)throw E.wrapException(M.ArgumentError$("options.ignoredIssues: Value must be an array."));for(r=E.setRuntimeTypeInfo([],[M.String]),o=0;o<T.get$length$asx(t.get$ignoredIssues(e));++o){if("string"!=typeof(a=T.$index$asx(t.get$ignoredIssues(e),o))||0===a.length)throw E.wrapException(M.ArgumentError$("options.ignoredIssues["+o+"]: Value must be a non-empty String."));w.JSArray_methods.add$1(r,a)}}else r=null;if(null!=t.get$severityOverrides(e)){if(n="number"==typeof(n=t.get$severityOverrides(e))||("boolean"==typeof(n=t.get$severityOverrides(e))||("string"==typeof(n=t.get$severityOverrides(e))||!!T.getInterceptor$(t.get$severityOverrides(e)).$isList)))throw E.wrapException(M.ArgumentError$("options.severityOverrides: Value must be an object."));for(n=M.String,s=M.LinkedHashMap_LinkedHashMap$_empty(n,F.Severity),l=t.get$severityOverrides(e),n=T.cast$1$0$ax(i.Object.keys(l),n),n=new E.ListIterator(n,n.get$length(n),[E.getRuntimeTypeArgument(n,"ListMixin",0)]);n.moveNext$0();){if(l=n.__internal$_current,!("number"==typeof(c=t.get$severityOverrides(e)[l])&&Math.floor(c)===c&&c>=0&&c<=3))throw E.wrapException(M.ArgumentError$('options.severityOverrides["'+E.S(l)+'"]: Value must be one of [0, 1, 2, 3].'));s.$indexSet(0,l,w.JSArray_methods.$index(w.List_qFu,c))}}else s=null;u=C.ValidationOptions$(r,t.get$maxIssues(e),s)}else u=null;return C.Context$(u)},_getResourcesLoader:function(e,t,n){var r=new A._getResourcesLoader_getBytes(n);return new N.ResourcesLoader(t.gltf,e,new A._getResourcesLoader_closure(t,r),new A._getResourcesLoader_closure0(r))},Promise:function(){},Exports:function(){},_JSValidationOptions:function(){},main_onError:function(){},main_closure:function(e){this.onError=e},main__closure0:function(e,t,n){this.data=e,this.options=t,this.onError=n},main___closure1:function(e){this.resolve=e},main___closure2:function(e,t){this.onError=e,this.reject=t},main_closure0:function(e){this.onError=e},main__closure:function(e,t,n){this.json=e,this.options=t,this.onError=n},main___closure:function(e){this.resolve=e},main___closure0:function(e,t){this.onError=e,this.reject=t},main_closure1:function(){},main_closure2:function(){},_getResourcesLoader_getBytes:function(e){this.getResource=e},_getResourcesLoader_getBytes_closure:function(e){this.completer=e},_getResourcesLoader_getBytes_closure0:function(e){this.completer=e},_getResourcesLoader_closure:function(e,t){this.readerResult=e,this.getBytes=t},_getResourcesLoader_closure0:function(e){this.getBytes=e},NodeException:function(e){this.message=e}},I={BufferView_fromMap:function(e,t){var n,r,i,o,a="byteStride",s=M.Object;return E.assertSubtype(e,"$isMap",[M.String,s],"$asMap"),H.checkMembers(e,w.List_IVU,t),n=H.getUint(e,"byteLength",t,-1,null,-1,1,!0),r=H.getUint(e,a,t,-1,null,252,4,!1),i=H.getUint(e,"target",t,-1,w.List_34962_34963,-1,0,!1),-1!==r&&(-1!==n&&r>n&&t.addIssue$3$args$name(K.$get$SemanticError_bufferViewTooBigByteStride(),E.setRuntimeTypeInfo([r,n],[s]),a),r%4!=0&&t.addIssue$3$args$name(K.$get$SchemaError_valueMultipleOf(),E.setRuntimeTypeInfo([r,4],[s]),a),34963===i&&t.addIssue$2$name(K.$get$SemanticError_bufferViewInvalidByteStride(),a)),s=H.getIndex(e,"buffer",t,!0),o=H.getUint(e,"byteOffset",t,0,null,-1,0,!1),H.getString(e,"name",t,null,null,null,!1),new I.BufferView(s,o,n,r,i,H.getExtensions(e,w.Type_BufferView_JO4,t,null,!1),H.getExtras(e,t))},BufferView:function(e,t,n,r,i,o,a){var s=this;s._buffer_view$_bufferIndex=e,s.byteOffset=t,s.byteLength=n,s.byteStride=r,s._buffer_view$_target=i,s._usage=s._buffer=null,s.effectiveByteStride=-1,s.extensions=o,s.extras=a,s._isUsed=!1},Gltf_Gltf$fromMap:function(e,t){var n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,v,y,_,b,x,S,T,N,F,U,B,z,V,G,W,q,J,Y,X,Z="extensionsRequired",Q=new I.Gltf_Gltf$fromMap_resetPath(t);if(Q.call$0(),H.checkMembers(e,w.List_yvP,t),e.containsKey$1(Z)&&!e.containsKey$1("extensionsUsed")&&t.addIssue$3$args$name(K.$get$SchemaError_unsatisfiedDependency(),E.setRuntimeTypeInfo(["extensionsUsed"],[M.Object]),Z),null==(n=H.getStringList(e,"extensionsUsed",t))&&(n=E.setRuntimeTypeInfo([],[M.String])),null==(r=H.getStringList(e,Z,t))&&(r=E.setRuntimeTypeInfo([],[M.String])),t.initExtensions$2(n,r),i=new I.Gltf_Gltf$fromMap_toSafeList(e,Q,t),null!=(null==(o=new I.Gltf_Gltf$fromMap_toValue(Q,e,t).call$1$3$req("asset",O.asset_Asset_fromMap$closure(),!0,O.Asset))?null:o.version)){if(2!==o.get$majorVersion())return a=K.$get$SemanticError_unknownAssetMajorVersion(),s=o.get$majorVersion(),void t.addIssue$3$args$name(a,E.setRuntimeTypeInfo([s],[M.Object]),"version");if("number"!=typeof(a=o.get$minorVersion()))return a.$gt();if(a>0&&(a=K.$get$SemanticError_unknownAssetMinorVersion(),s=o.get$minorVersion(),t.addIssue$3$args$name(a,E.setRuntimeTypeInfo([s],[M.Object]),"version")),l=i.call$1$2("accessors",C.accessor_Accessor_fromMap$closure(),[C.Accessor,M.num]),c=i.call$1$2("animations",$.animation_Animation_fromMap$closure(),$.Animation),u=i.call$1$2("buffers",A.buffer_Buffer_fromMap$closure(),A.Buffer),h=i.call$1$2("bufferViews",I.buffer_view_BufferView_fromMap$closure(),I.BufferView),d=i.call$1$2("cameras",P.camera_Camera_fromMap$closure(),P.Camera),p=i.call$1$2("images",O.image_Image_fromMap$closure(),O.Image),f=i.call$1$2("materials",L.material_Material_fromMap$closure(),L.Material),m=i.call$1$2("meshes",k.mesh_Mesh_fromMap$closure(),k.Mesh),a=I.Node,g=i.call$1$2("nodes",I.node_Node_fromMap$closure(),a),v=i.call$1$2("samplers",O.sampler_Sampler_fromMap$closure(),O.Sampler),y=i.call$1$2("scenes",R.scene_Scene_fromMap$closure(),R.Scene),Q.call$0(),_=H.getIndex(e,"scene",t,!1),b=y.$index(0,_),(s=-1!==_&&null==b)&&t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([_],[M.Object]),"scene"),x=i.call$1$2("skins",D.skin_Skin_fromMap$closure(),D.Skin),S=i.call$1$2("textures",j.texture_Texture_fromMap$closure(),j.Texture),T=H.getExtensions(e,w.Type_Gltf_IeY,t,null,!1),Q.call$0(),N=new I.Gltf(n,r,l,c,o,u,h,d,p,f,m,g,v,b,x,S,T,H.getExtras(e,t)),(F=new I.Gltf_Gltf$fromMap_linkCollection(t,N)).call$2(h,w.Type_BufferView_JO4),F.call$2(l,w.Type_Accessor_scC),F.call$2(p,w.Type_Image_5hW),F.call$2(S,w.Type_Texture_gsm),F.call$2(f,w.Type_Material_2bi),F.call$2(m,w.Type_Mesh_K2f),F.call$2(g,w.Type_Node_jrF),F.call$2(x,w.Type_Skin_OJ4),F.call$2(c,w.Type_Animation_hcA),F.call$2(y,w.Type_Scene_9YE),0!==T.__js_helper$_length){if(s=t.path,w.JSArray_methods.add$1(s,"extensions"),T.forEach$1(0,new I.Gltf_Gltf$fromMap_closure(t,N)),0>=s.length)return E.ioore(s,-1);s.pop()}if(s=t.path,w.JSArray_methods.add$1(s,"nodes"),g.forEachWithIndices$1(new I.Gltf_Gltf$fromMap_closure0(t,M.LinkedHashSet_LinkedHashSet$_empty(a))),0>=(a=s.length))return E.ioore(s,-1);for(s.pop(),U=[l,u,h,d,p,f,m,g,v,x,S],B=0;B<11;++B)if(0!==(z=U[B]).get$length(z)){for(w.JSArray_methods.add$1(s,z.name),a=z._utils$_length,G=(V=z._list).length,W=0;W<a;++W){if(q=W>=G)q=null;else{if(W>=G)return E.ioore(V,W);q=V[W]}!1===(null==q?null:q._isUsed)&&t.addIssue$2$index(K.$get$LinkError_unusedObject(),W)}if(0>=s.length)return E.ioore(s,-1);s.pop()}if(0!==(a=t.extensionCollections).__js_helper$_length){for(V=(V=new E.LinkedHashMapKeyIterable(a,[E.getTypeArgumentByIndex(a,0)])).get$iterator(V);V.moveNext$0();)if(0!==(G=V.__js_helper$_current).get$length(G))for(J=a.$index(0,G),w.JSArray_methods.set$length(s,0),w.JSArray_methods.addAll$1(s,J),q=G._utils$_length,Y=(G=G._list).length,W=0;W<q;++W){if(X=W>=Y)X=null;else{if(W>=Y)return E.ioore(G,W);X=G[W]}!1===(null==X?null:X.get$isUsed())&&t.addIssue$2$index(K.$get$LinkError_unusedObject(),W)}w.JSArray_methods.set$length(s,0)}return N}},Gltf:function(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,v){var y=this;y.extensionsUsed=e,y.extensionsRequired=t,y.accessors=n,y.animations=r,y.asset=i,y.buffers=o,y.bufferViews=a,y.cameras=s,y.images=l,y.materials=c,y.meshes=u,y.nodes=h,y.samplers=d,y.scene=p,y.skins=f,y.textures=m,y.extensions=g,y.extras=v,y._isUsed=!1},Gltf_Gltf$fromMap_resetPath:function(e){this.context=e},Gltf_Gltf$fromMap_toSafeList:function(e,t,n){this.map=e,this.resetPath=t,this.context=n},Gltf_Gltf$fromMap_toValue:function(e,t,n){this.resetPath=e,this.map=t,this.context=n},Gltf_Gltf$fromMap_linkCollection:function(e,t){this.context=e,this.gltf=t},Gltf_Gltf$fromMap_linkCollection_closure:function(e,t){this.context=e,this.gltf=t},Gltf_Gltf$fromMap_closure:function(e,t){this.context=e,this.gltf=t},Gltf_Gltf$fromMap_closure0:function(e,t){this.context=e,this.seenNodes=t},Gltf_Gltf$fromMap__closure:function(){},Gltf_Gltf$fromMap__closure0:function(){},Gltf_validateResources_validateResourcesInCollection:function(e,t){this.$this=e,this.context=t},Gltf_validateResources_validateResourcesInCollection_closure:function(e,t){this.$this=e,this.context=t},ResourceValidatable:function(){},GltfProperty:function(){},GltfChildOfRootProperty:function(){},BufferViewUsage:function(e){this._members$_value=e},AccessorUsage:function(e){this._members$_value=e},AccessorFormat:function(e,t,n){this.type=e,this.componentType=t,this.normalized=n},Node_fromMap:function(e,t){var n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,v,y,_,b,x,S,T,C,$,A,P,L,k,D,j,N="matrix",F="rotation",U=M.Object;if(E.assertSubtype(e,"$isMap",[M.String,U],"$asMap"),H.checkMembers(e,w.List_B9o,t),e.containsKey$1(N))if(null!=(n=H.getFloatList(e,N,t,null,w.List_16,1/0,-1/0,!1))){if(r=new Float32Array(16),i=new O.Matrix4(r),0>=(o=n.length))return E.ioore(n,0);if(a=n[0],1>=o)return E.ioore(n,1);if(s=n[1],2>=o)return E.ioore(n,2);if(l=n[2],3>=o)return E.ioore(n,3);if(c=n[3],4>=o)return E.ioore(n,4);if(u=n[4],5>=o)return E.ioore(n,5);if(h=n[5],6>=o)return E.ioore(n,6);if(d=n[6],7>=o)return E.ioore(n,7);if(p=n[7],8>=o)return E.ioore(n,8);if(f=n[8],9>=o)return E.ioore(n,9);if(m=n[9],10>=o)return E.ioore(n,10);if(g=n[10],11>=o)return E.ioore(n,11);if(v=n[11],12>=o)return E.ioore(n,12);if(y=n[12],13>=o)return E.ioore(n,13);if(_=n[13],14>=o)return E.ioore(n,14);if(b=n[14],15>=o)return E.ioore(n,15);o=n[15],E.doubleTypeCheck(a),E.doubleTypeCheck(s),E.doubleTypeCheck(l),E.doubleTypeCheck(c),E.doubleTypeCheck(u),E.doubleTypeCheck(h),E.doubleTypeCheck(d),E.doubleTypeCheck(p),E.doubleTypeCheck(f),E.doubleTypeCheck(m),E.doubleTypeCheck(g),E.doubleTypeCheck(v),E.doubleTypeCheck(y),E.doubleTypeCheck(_),E.doubleTypeCheck(b),w.NativeFloat32List_methods.$indexSet(r,15,E.doubleTypeCheck(o)),w.NativeFloat32List_methods.$indexSet(r,14,b),w.NativeFloat32List_methods.$indexSet(r,13,_),w.NativeFloat32List_methods.$indexSet(r,12,y),w.NativeFloat32List_methods.$indexSet(r,11,v),w.NativeFloat32List_methods.$indexSet(r,10,g),w.NativeFloat32List_methods.$indexSet(r,9,m),w.NativeFloat32List_methods.$indexSet(r,8,f),w.NativeFloat32List_methods.$indexSet(r,7,p),w.NativeFloat32List_methods.$indexSet(r,6,d),w.NativeFloat32List_methods.$indexSet(r,5,h),w.NativeFloat32List_methods.$indexSet(r,4,u),w.NativeFloat32List_methods.$indexSet(r,3,c),w.NativeFloat32List_methods.$indexSet(r,2,l),w.NativeFloat32List_methods.$indexSet(r,1,s),w.NativeFloat32List_methods.$indexSet(r,0,a)}else i=null;else i=null;if(S=e.containsKey$1("translation")&&null!=(x=H.getFloatList(e,"translation",t,null,w.List_3,1/0,-1/0,!1))?O.Vector3_Vector3$array(x):null,e.containsKey$1(F))if(null!=(T=H.getFloatList(e,F,t,null,w.List_4,1,-1,!1))){if(0>=(r=T.length))return E.ioore(T,0);if(o=T[0],1>=r)return E.ioore(T,1);if(a=T[1],2>=r)return E.ioore(T,2);if(s=T[2],3>=r)return E.ioore(T,3);r=T[3],l=new Float32Array(4),C=new O.Quaternion(l),w.NativeFloat32List_methods.$indexSet(l,0,o),w.NativeFloat32List_methods.$indexSet(l,1,a),w.NativeFloat32List_methods.$indexSet(l,2,s),w.NativeFloat32List_methods.$indexSet(l,3,r),r=Math.sqrt(C.get$length2()),Math.abs(1-r)>.00769&&t.addIssue$2$name(K.$get$SemanticError_rotationNonUnit(),F)}else C=null;else C=null;return A=e.containsKey$1("scale")&&null!=($=H.getFloatList(e,"scale",t,null,w.List_3,1/0,-1/0,!1))?O.Vector3_Vector3$array($):null,P=H.getIndex(e,"camera",t,!1),L=H.getIndicesList(e,"children",t,!1),k=H.getIndex(e,"mesh",t,!1),D=H.getIndex(e,"skin",t,!1),j=H.getFloatList(e,"weights",t,null,null,1/0,-1/0,!1),-1===k&&(-1!==D&&t.addIssue$3$args$name(K.$get$SchemaError_unsatisfiedDependency(),E.setRuntimeTypeInfo(["mesh"],[U]),"skin"),null!=j&&t.addIssue$3$args$name(K.$get$SchemaError_unsatisfiedDependency(),E.setRuntimeTypeInfo(["mesh"],[U]),"weights")),null!=i&&(null==S&&null==C&&null==A||t.addIssue$2$name(K.$get$SemanticError_nodeMatrixTrs(),N),i.isIdentity$0()?t.addIssue$2$name(K.$get$SemanticError_nodeDefaultMatrix(),N):H.isTrsDecomposable(i)||t.addIssue$2$name(K.$get$SemanticError_nodeNonTrsMatrix(),N)),H.getString(e,"name",t,null,null,null,!1),new I.Node(P,L,D,i,k,S,C,A,j,M.LinkedHashSet_LinkedHashSet$_empty(R.Scene),H.getExtensions(e,w.Type_Node_jrF,t,null,!1),H.getExtras(e,t))},Node:function(e,t,n,r,i,o,a,s,l,c,u,h){var d=this;d._cameraIndex=e,d._childrenIndices=t,d._skinIndex=n,d.matrix=r,d._meshIndex=i,d.translation=o,d.rotation=a,d.scale=s,d.weights=l,d._scenes=c,d._skin=d._parent=d._mesh=d._children=d._camera=null,d.isJoint=!1,d.extensions=u,d.extras=h,d._isUsed=!1},Node_link_closure:function(){},Node_link_closure0:function(){},Node_link_closure1:function(e,t){this.$this=e,this.context=t}},P={Camera_fromMap:function(e,t){switch(E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),H.checkMembers(e,w.List_type_orthographic_perspective_name,t),e.containsKey$1("orthographic")&&e.containsKey$1("perspective")&&t.addIssue$2$args(K.$get$SchemaError_oneOfMismatch(),w.List_orthographic_perspective),H.getString(e,"type",t,null,w.List_orthographic_perspective,null,!0)){case"orthographic":H.getObjectFromInnerMap(e,"orthographic",t,P.camera_CameraOrthographic_fromMap$closure(),!0,P.CameraOrthographic);break;case"perspective":H.getObjectFromInnerMap(e,"perspective",t,P.camera_CameraPerspective_fromMap$closure(),!0,P.CameraPerspective)}return H.getString(e,"name",t,null,null,null,!1),new P.Camera(H.getExtensions(e,w.Type_Camera_s3t,t,null,!1),H.getExtras(e,t))},CameraOrthographic_fromMap:function(e,t){var n,r,i,o;return E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),H.checkMembers(e,w.List_xmag_ymag_zfar_znear,t),n=H.getFloat(e,"xmag",t,NaN,1/0,-1/0,1/0,-1/0,!0),r=H.getFloat(e,"ymag",t,NaN,1/0,-1/0,1/0,-1/0,!0),i=H.getFloat(e,"zfar",t,NaN,1/0,0,1/0,-1/0,!0),o=H.getFloat(e,"znear",t,NaN,1/0,-1/0,1/0,0,!0),!isNaN(i)&&!isNaN(o)&&i<=o&&t.addIssue$1(K.$get$SemanticError_cameraZfarLequalZnear()),0!==n&&0!==r||t.addIssue$1(K.$get$SemanticError_cameraXmagYmagZero()),new P.CameraOrthographic(H.getExtensions(e,w.Type_CameraOrthographic_wIv,t,null,!1),H.getExtras(e,t))},CameraPerspective_fromMap:function(e,t){var n,r;return E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),H.checkMembers(e,w.List_aspectRatio_yfov_zfar_znear,t),n=H.getFloat(e,"zfar",t,NaN,1/0,0,1/0,-1/0,!1),r=H.getFloat(e,"znear",t,NaN,1/0,0,1/0,-1/0,!0),!isNaN(n)&&!isNaN(r)&&n<=r&&t.addIssue$1(K.$get$SemanticError_cameraZfarLequalZnear()),H.getFloat(e,"aspectRatio",t,NaN,1/0,0,1/0,-1/0,!1),H.getFloat(e,"yfov",t,NaN,1/0,0,1/0,-1/0,!0),new P.CameraPerspective(H.getExtensions(e,w.Type_CameraPerspective_EWB,t,null,!1),H.getExtras(e,t))},Camera:function(e,t){this.extensions=e,this.extras=t,this._isUsed=!1},CameraOrthographic:function(e,t){this.extensions=e,this.extras=t,this._isUsed=!1},CameraPerspective:function(e,t){this.extensions=e,this.extras=t,this._isUsed=!1}},L={Material_fromMap:function(e,t){var n,r,i,o,a,s,l,c="alphaCutoff",u=M.String,h=M.Object;for(E.assertSubtype(e,"$isMap",[u,h],"$asMap"),H.checkMembers(e,w.List_OdV,t),n=H.getObjectFromInnerMap(e,"pbrMetallicRoughness",t,L.material_PbrMetallicRoughness_fromMap$closure(),!1,L.PbrMetallicRoughness),r=H.getObjectFromInnerMap(e,"normalTexture",t,L.material_NormalTextureInfo_fromMap$closure(),!1,L.NormalTextureInfo),i=H.getObjectFromInnerMap(e,"occlusionTexture",t,L.material_OcclusionTextureInfo_fromMap$closure(),!1,L.OcclusionTextureInfo),o=H.getObjectFromInnerMap(e,"emissiveTexture",t,L.material_TextureInfo_fromMap$closure(),!1,L.TextureInfo),H.getFloatList(e,"emissiveFactor",t,w.List_0_0_0,w.List_3,1,0,!1),a=H.getString(e,"alphaMode",t,"OPAQUE",w.List_OPAQUE_MASK_BLEND,null,!1),H.getFloat(e,c,t,.5,1/0,-1/0,1/0,0,!1),"MASK"!==a&&e.containsKey$1(c)&&t.addIssue$2$name(K.$get$SemanticError_materialAlphaCutoffInvalidMode(),c),H.getBool(e,"doubleSided",t),s=H.getExtensions(e,w.Type_Material_2bi,t,null,!0),H.getString(e,"name",t,null,null,null,!1),l=new L.Material(n,r,i,o,M.LinkedHashMap_LinkedHashMap$_empty(u,M.int),s,H.getExtras(e,t)),u=E.setRuntimeTypeInfo([],[h]),w.JSArray_methods.add$1(u,n),w.JSArray_methods.add$1(u,r),w.JSArray_methods.add$1(u,i),w.JSArray_methods.add$1(u,o),h=s.get$values(),h=new E.MappedIterator(T.get$iterator$ax(h.__internal$_iterable),h._f,[E.getTypeArgumentByIndex(h,0),E.getTypeArgumentByIndex(h,1)]);h.moveNext$0();)w.JSArray_methods.add$1(u,h.__internal$_current);return t.registerObjectsOwner$2(l,u),l},PbrMetallicRoughness_fromMap:function(e,t){var n,r,i,o,a,s=M.Object;for(E.assertSubtype(e,"$isMap",[M.String,s],"$asMap"),H.checkMembers(e,w.List_chs,t),H.getFloatList(e,"baseColorFactor",t,w.List_1_1_1_1,w.List_4,1,0,!1),n=L.TextureInfo,r=H.getObjectFromInnerMap(e,"baseColorTexture",t,L.material_TextureInfo_fromMap$closure(),!1,n),H.getFloat(e,"metallicFactor",t,1,1/0,-1/0,1,0,!1),H.getFloat(e,"roughnessFactor",t,1,1/0,-1/0,1,0,!1),i=H.getObjectFromInnerMap(e,"metallicRoughnessTexture",t,L.material_TextureInfo_fromMap$closure(),!1,n),o=H.getExtensions(e,w.Type_PbrMetallicRoughness_k2w,t,null,!1),a=new L.PbrMetallicRoughness(r,i,o,H.getExtras(e,t)),s=E.setRuntimeTypeInfo([],[s]),w.JSArray_methods.add$1(s,r),w.JSArray_methods.add$1(s,i),n=o.get$values(),n=new E.MappedIterator(T.get$iterator$ax(n.__internal$_iterable),n._f,[E.getTypeArgumentByIndex(n,0),E.getTypeArgumentByIndex(n,1)]);n.moveNext$0();)w.JSArray_methods.add$1(s,n.__internal$_current);return t.registerObjectsOwner$2(a,s),a},OcclusionTextureInfo_fromMap:function(e,t){var n,r,i,o;return E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),H.checkMembers(e,w.List_index_texCoord_strength,t),n=H.getExtensions(e,w.Type_OcclusionTextureInfo_YCM,t,w.Type_Material_2bi,!1),r=H.getIndex(e,"index",t,!0),i=H.getUint(e,"texCoord",t,0,null,-1,0,!1),H.getFloat(e,"strength",t,1,1/0,-1/0,1,0,!1),o=new L.OcclusionTextureInfo(r,i,n,H.getExtras(e,t)),t.registerObjectsOwner$2(o,n.get$values()),o},NormalTextureInfo_fromMap:function(e,t){var n,r,i,o;return E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),H.checkMembers(e,w.List_index_texCoord_scale,t),n=H.getExtensions(e,w.Type_NormalTextureInfo_0,t,w.Type_Material_2bi,!1),r=H.getIndex(e,"index",t,!0),i=H.getUint(e,"texCoord",t,0,null,-1,0,!1),H.getFloat(e,"scale",t,1,1/0,-1/0,1/0,-1/0,!1),o=new L.NormalTextureInfo(r,i,n,H.getExtras(e,t)),t.registerObjectsOwner$2(o,n.get$values()),o},TextureInfo_fromMap:function(e,t){var n,r;return E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),H.checkMembers(e,w.List_index_texCoord,t),n=H.getExtensions(e,w.Type_TextureInfo_V3H,t,w.Type_Material_2bi,!1),r=new L.TextureInfo(H.getIndex(e,"index",t,!0),H.getUint(e,"texCoord",t,0,null,-1,0,!1),n,H.getExtras(e,t)),t.registerObjectsOwner$2(r,n.get$values()),r},Material:function(e,t,n,r,i,o,a){var s=this;s.pbrMetallicRoughness=e,s.normalTexture=t,s.occlusionTexture=n,s.emissiveTexture=r,s.texCoordIndices=i,s.extensions=o,s.extras=a,s._isUsed=!1},Material_link_linkWithPath:function(e,t){this.context=e,this.gltf=t},PbrMetallicRoughness:function(e,t,n,r){var i=this;i.baseColorTexture=e,i.metallicRoughnessTexture=t,i.extensions=n,i.extras=r,i._isUsed=!1},OcclusionTextureInfo:function(e,t,n,r){var i=this;i._material$_index=e,i.texCoord=t,i._texture=null,i.extensions=n,i.extras=r,i._isUsed=!1},NormalTextureInfo:function(e,t,n,r){var i=this;i._material$_index=e,i.texCoord=t,i._texture=null,i.extensions=n,i.extras=r,i._isUsed=!1},TextureInfo:function(e,t,n,r){var i=this;i._material$_index=e,i.texCoord=t,i._texture=null,i.extensions=n,i.extras=r,i._isUsed=!1},ImageInfo$_:function(e,t,n,r,i,o,a,s,l){return new L.ImageInfo(e,t,n,r,i,o,a,l,s)},ImageInfo_parseStreamAsync:function(e){var t,n,r,i={};return i.subscription=i.decoder=null,t=L.ImageInfo,n=new M._Future(K.Zone__current,[t]),r=new M._AsyncCompleter(n,[t]),i.isDetected=!1,i.subscription=e.listen$3$onDone$onError(new L.ImageInfo_parseStreamAsync_closure(i,r),new L.ImageInfo_parseStreamAsync_closure0(i),new L.ImageInfo_parseStreamAsync_closure1(i,r)),n},ImageInfo__detectCodec:function(e){var t=new L.ImageInfo__detectCodec_beginsWith;return E.boolConversionCheck(t.call$2(e,w.List_255_216))?w._ImageCodec_0:E.boolConversionCheck(t.call$2(e,w.List_2Vk))?w._ImageCodec_1:E.boolConversionCheck(t.call$2(e,w.List_82_73_70_70))?w._ImageCodec_2:void 0},_ImageCodec:function(e){this._image_decoder$_name=e},_ColorPrimaries:function(e,t){this.index=e,this._image_decoder$_name=t},_ColorTransfer:function(e,t){this.index=e,this._image_decoder$_name=t},Format:function(e,t){this.index=e,this._image_decoder$_name=t},ImageInfo:function(e,t,n,r,i,o,a,s,l){var c=this;c.mimeType=e,c.bits=t,c.format=n,c.width=r,c.height=i,c.colorPrimaries=o,c.colorTransfer=a,c.hasNonSquarePixels=s,c.hasAnimation=l},ImageInfo_parseStreamAsync_closure:function(e,t){this._box_0=e,this.completer=t},ImageInfo_parseStreamAsync_closure1:function(e,t){this._box_0=e,this.completer=t},ImageInfo_parseStreamAsync_closure0:function(e){this._box_0=e},ImageInfo__detectCodec_beginsWith:function(){},ImageInfoDecoder:function(){},JpegInfoDecoder:function(e,t){var n=this;n._segmentIndex=n._segmentLength=n._type=n._image_decoder$_state=0,n._sofBuffer=null,n.completer=e,n.subscription=t},JpegInfoDecoder__add_isSOF:function(){},JpegInfoDecoder__add_hasSegment:function(){},PngInfoDecoder:function(e,t,n,r,i,o){var a=this;a._image_decoder$_state=a._chunkDataIndex=a._chunkCrcIndex=a._chunkTypeIndex=a._chunkType=a._chunkLengthIndex=a._chunkLength=0,a._hasTrns=a._hasHeader=!1,a._transfer=e,a._primaries=t,a._hasNonSquarePixels=!1,a._headerChunkBytes=n,a._chunkBytes=r,a.completer=i,a.subscription=o},PngInfoDecoder_add_reset:function(e){this.$this=e},WebPInfoDecoder:function(e,t,n){var r=this;r._image_decoder$_buffer=e,r._bufferIndex=0,r.completer=t,r.subscription=n},UnsupportedImageFormatException:function(){},UnexpectedEndOfStreamException:function(){},InvalidDataFormatException:function(e){this.message=e}},k={Mesh_fromMap:function(e,t){var n,r,i,o,a,s,l,c,u,h,d="primitives",p=M.Object;if(E.assertSubtype(e,"$isMap",[M.String,p],"$asMap"),H.checkMembers(e,w.List_primitives_weights_name,t),n=H.getFloatList(e,"weights",t,null,null,1/0,-1/0,!1),null!=(r=H.getMapList(e,d,t))){for(i=r.get$length(r),o=k.MeshPrimitive,(a=new Array(i)).fixed$length=Array,a=E.setRuntimeTypeInfo(a,[o]),s=new H.SafeList(a,i,d,[o]),o=t.path,w.JSArray_methods.add$1(o,d),l=null,c=-1,u=0;u<r.get$length(r);++u){if(w.JSArray_methods.add$1(o,w.JSInt_methods.toString$0(u)),h=k.MeshPrimitive_MeshPrimitive$fromMap(r.$index(0,u),t),null==l?l=null==(i=h._targetsIndices)?null:i.length:l!==(null==(i=h._targetsIndices)?null:i.length)&&t.addIssue$2$name(K.$get$SemanticError_meshPrimitivesUnequalTargetsCount(),"targets"),-1===c?c=h.jointsCount:c!==h.jointsCount&&t.addIssue$2$name(K.$get$SemanticError_meshPrimitivesUnequalJointsCount(),"attributes"),w.JSArray_methods.$indexSet(a,u,h),0>=o.length)return E.ioore(o,-1);o.pop()}if(0>=o.length)return E.ioore(o,-1);o.pop(),(i=null!=l&&null!=n&&l!==n.length)&&t.addIssue$3$args$name(K.$get$SemanticError_meshInvalidWeightsCount(),E.setRuntimeTypeInfo([n.length,l],[p]),"weights")}else s=null;return H.getString(e,"name",t,null,null,null,!1),new k.Mesh(s,H.getExtensions(e,w.Type_Mesh_K2f,t,null,!1),H.getExtras(e,t))},MeshPrimitive_MeshPrimitive$fromMap:function(e,t){var n,r,i,o,a,s,l={};if(H.checkMembers(e,w.List_iyy,t),l.hasTangent=l.hasNormal=l.hasPosition=!1,l.colorCount=0,l.maxColor=-1,l.jointsCount=0,l.maxJoints=-1,l.weightsCount=0,l.maxWeights=-1,l.texcoordCount=0,l.maxTexcoord=-1,n=H.getUint(e,"mode",t,4,null,6,0,!1),null!=(r=H.getIndicesMap(e,"attributes",t,new k.MeshPrimitive_MeshPrimitive$fromMap_checkAttributeSemanticName(l,t)))){if(i=t.path,w.JSArray_methods.add$1(i,"attributes"),l.hasPosition||t.addIssue$1(K.$get$SemanticError_meshPrimitiveNoPosition()),!l.hasNormal&&l.hasTangent&&t.addIssue$2$name(K.$get$SemanticError_meshPrimitiveTangentWithoutNormal(),"TANGENT"),l.hasTangent&&0===n&&t.addIssue$2$name(K.$get$SemanticError_meshPrimitiveTangentPoints(),"TANGENT"),o=new k.MeshPrimitive_MeshPrimitive$fromMap_checkContinuity(t),l.colorCount=o.call$3(l.maxColor,l.colorCount,"COLOR"),l.jointsCount=o.call$3(l.maxJoints,l.jointsCount,"JOINTS"),l.weightsCount=o.call$3(l.maxWeights,l.weightsCount,"WEIGHTS"),l.texcoordCount=o.call$3(l.maxTexcoord,l.texcoordCount,"TEXCOORD"),(o=l.jointsCount)!==(a=l.weightsCount)&&(t.addIssue$2$args(K.$get$SemanticError_meshPrimitiveJointsWeightsMismatch(),E.setRuntimeTypeInfo([o,a],[M.Object])),l.weightsCount=l.jointsCount=0),0>=i.length)return E.ioore(i,-1);i.pop()}return s=H.getIndicesMapsList(e,"targets",t,new k.MeshPrimitive_MeshPrimitive$fromMap_checkMorphTargetAttributeSemanticName(t)),new k.MeshPrimitive(r,H.getIndex(e,"indices",t,!1),H.getIndex(e,"material",t,!1),n,s,l.jointsCount,l.weightsCount,l.texcoordCount,M.LinkedHashMap_LinkedHashMap$_empty(M.String,[C.Accessor,M.num]),H.getExtensions(e,w.Type_MeshPrimitive_TPX,t,null,!1),H.getExtras(e,t))},Mesh:function(e,t,n){var r=this;r.primitives=e,r.extensions=t,r.extras=n,r._isUsed=!1},Mesh_link_closure:function(e,t){this.context=e,this.gltf=t},MeshPrimitive:function(e,t,n,r,i,o,a,s,l,c,u){var h=this;h._attributesIndices=e,h._indicesIndex=t,h._materialIndex=n,h.mode=r,h._targetsIndices=i,h.jointsCount=o,h.weightsCount=a,h.texcoordCount=s,h.attributes=l,h._vertexCount=h._count=-1,h._material=h._indices=h._targets=null,h.extensions=c,h.extras=u,h._isUsed=!1},MeshPrimitive_MeshPrimitive$fromMap_checkAttributeSemanticName:function(e,t){this._box_0=e,this.context=t},MeshPrimitive_MeshPrimitive$fromMap_checkContinuity:function(e){this.context=e},MeshPrimitive_MeshPrimitive$fromMap_checkMorphTargetAttributeSemanticName:function(e){this.context=e},MeshPrimitive_link_closure:function(e,t,n){this.$this=e,this.gltf=t,this.context=n},MeshPrimitive_link_closure0:function(){},MeshPrimitive_link_closure1:function(e,t,n){this.$this=e,this.context=t,this.unusedTexCoords=n},MeshPrimitive_link_closure2:function(){},MeshPrimitive_link_closure3:function(e,t,n,r){var i=this;i.$this=e,i.gltf=t,i.context=n,i.i=r},MeshPrimitive__checkAccessorRefs_closure:function(){},IndexBufferIntegerChecker:function(e,t,n,r,i,o){var a=this;a.maxVertexIndex=e,a.totalTriangles=t,a.primitiveRestartIndex=n,a.isTriangles=r,a._degenerateTriangles=a._vertexIndex=0,a._triangle=i,a.path=o},KhrMaterialsUnlit_fromMap:function(e,t){return E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),E.interceptedTypeCheck(t,"$isContext"),t.toString,H.checkMembers(e,w.List_empty,t),new k.KhrMaterialsUnlit(H.getExtensions(e,w.Type_KhrMaterialsUnlit_0,t,null,!1),H.getExtras(e,t))},KhrMaterialsUnlit:function(e,t){this.extensions=e,this.extras=t,this._isUsed=!1}},R={Scene_fromMap:function(e,t){var n;return E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),H.checkMembers(e,w.List_nodes_name,t),n=H.getIndicesList(e,"nodes",t,!1),H.getString(e,"name",t,null,null,null,!1),new R.Scene(n,H.getExtensions(e,w.Type_Scene_9YE,t,null,!1),H.getExtras(e,t))},Scene:function(e,t,n){var r=this;r._nodesIndices=e,r.nodes=null,r.extensions=t,r.extras=n,r._isUsed=!1},Scene_link_closure:function(e,t){this.$this=e,this.context=t}},D={Skin_fromMap:function(e,t){var n,r,i;return E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),H.checkMembers(e,w.List_QW2,t),n=H.getIndex(e,"inverseBindMatrices",t,!1),r=H.getIndex(e,"skeleton",t,!1),i=H.getIndicesList(e,"joints",t,!0),H.getString(e,"name",t,null,null,null,!1),new D.Skin(n,r,i,M.LinkedHashSet_LinkedHashSet$_empty(I.Node),H.getExtensions(e,w.Type_Skin_OJ4,t,null,!1),H.getExtras(e,t))},Skin:function(e,t,n,r,i,o){var a=this;a._inverseBindMatricesIndex=e,a._skeletonIndex=t,a._jointsIndices=n,a._skeleton=a._joints=a._inverseBindMatrices=null,a._commonRoots=r,a.extensions=i,a.extras=o,a._isUsed=!1},Skin_link_closure:function(e){this.$this=e},IbmMatrixFloatChecker:function(e){this.path=e},_guardAccessor:function(e,t){if(null!=e&&null!=e.type&&-1!==e.componentType&&-1!==e.count&&(null!=e._bufferView||null!=e.sparse))return e},validateAccessorsData:function(e,t){var n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,v;for(e.accessors.forEachWithIndices$1(new D.validateAccessorsData_closure(t)),D._processAccessorElements(t),n=E.setRuntimeTypeInfo([],[[M.Iterator,M.num]]),r=E.setRuntimeTypeInfo([],[D.InfluencesChecker]),i=t.path,w.JSArray_methods.set$length(i,0),w.JSArray_methods.add$1(i,"meshes"),a=(o=e.meshes)._utils$_length,s=(o=o._list).length,l=0;l<a;++l){if(c={},u=l>=s)h=null;else{if(l>=s)return E.ioore(o,l);h=o[l]}if(null!=(null==h?null:h.primitives)&&!(u=h.primitives).every$1(u,new D.validateAccessorsData_closure0)){for(c.limitingSkinIndex=c.maxJoints=-1,d=e.nodes,d=new E.ListIterator(d,d.get$length(d),[E.getTypeArgumentByIndex(d,0)]);d.moveNext$0();)(f=(p=d.__internal$_current)._mesh==h&&null!=(null==(f=p._skin)?null:f._joints))&&(m=(p=p._skin)._joints.length,(-1===(f=c.maxJoints)||m<f)&&(c.maxJoints=m,f=e.skins,c.limitingSkinIndex=f.indexOf$1(f,p)));if(!(c.maxJoints<1)){if(w.JSArray_methods.add$1(i,w.JSInt_methods.toString$0(l)),w.JSArray_methods.add$1(i,"primitives"),u.forEachWithIndices$1(new D.validateAccessorsData_closure1(c,t,n,r)),0>=i.length)return E.ioore(i,-1);if(i.pop(),0>=i.length)return E.ioore(i,-1);i.pop()}}}if(0>=i.length)return E.ioore(i,-1);if(i.pop(),0!==n.length)for(;D._stepInfluencesIterators(n);)for(i=r.length,g=0;g<r.length;r.length===i||(0,E.throwConcurrentModificationError)(r),++g)(v=r[g])._done||v.checkNext$1(t)},_stepInfluencesIterators:function(e){var t,n;for(t=e.length,n=0;n<e.length;e.length===t||(0,E.throwConcurrentModificationError)(e),++n)e[n].moveNext$0();return t=E.functionTypeCheck(new D._stepInfluencesIterators_closure,{func:1,ret:M.bool,args:[E.getTypeArgumentByIndex(e,0)]}),e.fixed$length&&E.throwExpression(M.UnsupportedError$("removeWhere")),w.JSArray_methods._removeWhere$2(e,t,!0),0!==e.length},_processAccessorElements:function(e){var t,n,r,i,o,a,s,l,c,u,h,d,p;for(t=(t=e.accessorElementCheckers.get$entries()).get$iterator(t),n=e.path,r=M.num;t.moveNext$0();)if(i=t.get$current(),null!=(o=D._guardAccessor(i.key,r))){for(null==(a=w.Map_A1ato.$index(0,o.type))&&(a=0),s=i.value,w.JSArray_methods.set$length(n,0),i=o.getElements$0(),i=new M._SyncStarIterator(i._outerHelper(),[E.getTypeArgumentByIndex(i,0)]),l=T.getInterceptor$asx(s),c=0,u=0,h=!1;i.moveNext$0();h=!0){for(d=i.get$current(),p=0;p<l.get$length(s);++p)if(!l.$index(s,p).check$4(e,c,u,d))continue;++u===a&&(u=0),++c}if(h)for(p=0;p<l.get$length(s);++p)l.$index(s,p).done$1(e)}},validateAccessorsData_closure:function(e){this.context=e},validateAccessorsData_closure0:function(){},validateAccessorsData_closure1:function(e,t,n,r){var i=this;i._box_0=e,i.context=t,i.influencesIterators=n,i.influencesCheckers=r},_stepInfluencesIterators_closure:function(){},InfluencesChecker:function(e,t,n,r,i,o){var a=this;a.jointsIterators=e,a.weightsIterators=t,a.maxJointIndex=n,a.limitingSkinIndex=r,a.path=i,a._componentIndex=a._validate_accessors$_index=0,a._done=!1,a._threshold=a._sum=0,a._currentIndices=o}},j={Texture_fromMap:function(e,t){var n,r;return E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),H.checkMembers(e,w.List_sampler_source_name,t),n=H.getIndex(e,"sampler",t,!1),r=H.getIndex(e,"source",t,!1),H.getString(e,"name",t,null,null,null,!1),new j.Texture(n,r,H.getExtensions(e,w.Type_Texture_gsm,t,null,!1),H.getExtras(e,t))},Texture:function(e,t,n,r){var i=this;i._samplerIndex=e,i._texture$_sourceIndex=t,i._texture$_source=i._sampler=null,i.extensions=n,i.extras=r,i._isUsed=!1},_init0:function(e){var t=e.attributeAccessorFormats;t.$index(0,"POSITION").addAll$1(0,w.List_tES),t.$index(0,"NORMAL").addAll$1(0,w.List_a9P),t.$index(0,"TANGENT").addAll$1(0,w.List_zzp),t.$index(0,"TEXCOORD").addAll$1(0,w.List_4CA),(t=e.morphAttributeAccessorFormats).$index(0,"POSITION").addAll$1(0,w.List_Ri2),t.$index(0,"NORMAL").addAll$1(0,w.List_a9P),t.$index(0,"TANGENT").addAll$1(0,w.List_a9P)}},N={_Storage:function(e,t){this.index=e,this._resources_loader$_name=t},ResourceInfo:function(e){var t=this;t.pointer=e,t.image=t.uri=t.byteLength=t.storage=t.mimeType=null},ResourcesLoader:function(e,t,n,r){var i=this;i.gltf=e,i.context=t,i.externalBytesFetch=n,i.externalStreamFetch=r},ResourcesLoader__loadBuffers__fetchBuffer:function(e,t,n){this.$this=e,this.info=t,this.i=n},ResourcesLoader__loadImages__fetchImageData:function(e,t){this.$this=e,this.resourceInfo=t}},F={DataError$_:function(e,t,n){return new F.DataError(n,e,t)},SchemaError$_:function(e,t,n){return new F.SchemaError(n,e,t)},SemanticError$_:function(e,t,n){return new F.SemanticError(n,e,t)},LinkError$_:function(e,t,n){return new F.LinkError(n,e,t)},GlbError$_:function(e,t,n){return new F.GlbError(n,e,t)},_q:function(e){return"'"+E.S(e)+"'"},_mbq:function(e){return"string"==typeof e?"'"+e+"'":T.toString$0$(e)},Severity:function(e,t){this.index=e,this._errors$_name=t},IssueType:function(){},DataError:function(e,t,n){this.severity=e,this.code=t,this.message=n},DataError_closure16:function(){},DataError_closure14:function(){},DataError_closure13:function(){},DataError_closure20:function(){},DataError_closure18:function(){},DataError_closure19:function(){},DataError_closure17:function(){},DataError_closure29:function(){},DataError_closure30:function(){},DataError_closure22:function(){},DataError_closure28:function(){},DataError_closure21:function(){},DataError_closure27:function(){},DataError_closure25:function(){},DataError_closure26:function(){},DataError_closure24:function(){},DataError_closure23:function(){},DataError_closure5:function(){},DataError_closure4:function(){},DataError_closure31:function(){},DataError_closure9:function(){},DataError_closure8:function(){},DataError_closure10:function(){},DataError_closure11:function(){},DataError_closure12:function(){},DataError_closure7:function(){},DataError_closure6:function(){},DataError_closure15:function(){},DataError_closure3:function(){},DataError_closure2:function(){},DataError_closure1:function(){},DataError_closure:function(){},DataError_closure0:function(){},IoError:function(e,t,n){this.severity=e,this.code=t,this.message=n},IoError_closure:function(){},SchemaError:function(e,t,n){this.severity=e,this.code=t,this.message=n},SchemaError_closure3:function(){},SchemaError_closure4:function(){},SchemaError_closure9:function(){},SchemaError_closure7:function(){},SchemaError_closure14:function(){},SchemaError_closure10:function(){},SchemaError_closure5:function(){},SchemaError_closure11:function(){},SchemaError_closure8:function(){},SchemaError_closure:function(){},SchemaError_closure2:function(){},SchemaError_closure1:function(){},SchemaError_closure12:function(){},SchemaError_closure0:function(){},SchemaError_closure6:function(){},SchemaError_closure13:function(){},SemanticError:function(e,t,n){this.severity=e,this.code=t,this.message=n},SemanticError_closure38:function(){},SemanticError_closure37:function(){},SemanticError_closure28:function(){},SemanticError_closure26:function(){},SemanticError_closure27:function(){},SemanticError_closure25:function(){},SemanticError_closure23:function(){},SemanticError_closure24:function(){},SemanticError_closure33:function(){},SemanticError_closure34:function(){},SemanticError_closure22:function(){},SemanticError_closure21:function(){},SemanticError_closure20:function(){},SemanticError_closure19:function(){},SemanticError_closure18:function(){},SemanticError_closure16:function(){},SemanticError_closure10:function(){},SemanticError_closure9:function(){},SemanticError_closure8:function(){},SemanticError_closure15:function(){},SemanticError_closure12:function(){},SemanticError_closure14:function(){},SemanticError_closure11:function(){},SemanticError_closure13:function(){},SemanticError_closure7:function(){},SemanticError_closure5:function(){},SemanticError_closure4:function(){},SemanticError_closure3:function(){},SemanticError_closure6:function(){},SemanticError_closure39:function(){},SemanticError_closure40:function(){},SemanticError_closure41:function(){},SemanticError_closure42:function(){},SemanticError_closure32:function(){},SemanticError_closure31:function(){},SemanticError_closure30:function(){},SemanticError_closure29:function(){},SemanticError_closure36:function(){},SemanticError_closure35:function(){},SemanticError_closure17:function(){},SemanticError_closure0:function(){},SemanticError_closure:function(){},SemanticError_closure2:function(){},SemanticError_closure1:function(){},LinkError:function(e,t,n){this.severity=e,this.code=t,this.message=n},LinkError_closure4:function(){},LinkError_closure8:function(){},LinkError_closure3:function(){},LinkError_closure17:function(){},LinkError_closure9:function(){},LinkError_closure13:function(){},LinkError_closure12:function(){},LinkError_closure15:function(){},LinkError_closure16:function(){},LinkError_closure11:function(){},LinkError_closure14:function(){},LinkError_closure10:function(){},LinkError_closure2:function(){},LinkError_closure18:function(){},LinkError_closure7:function(){},LinkError_closure35:function(){},LinkError_closure21:function(){},LinkError_closure22:function(){},LinkError_closure19:function(){},LinkError_closure20:function(){},LinkError_closure28:function(){},LinkError_closure27:function(){},LinkError_closure26:function(){},LinkError_closure25:function(){},LinkError_closure29:function(){},LinkError_closure24:function(){},LinkError_closure23:function(){},LinkError_closure6:function(){},LinkError_closure30:function(){},LinkError_closure33:function(){},LinkError_closure32:function(){},LinkError_closure31:function(){},LinkError_closure34:function(){},LinkError_closure36:function(){},LinkError_closure1:function(){},LinkError_closure0:function(){},LinkError_closure:function(){},LinkError_closure37:function(){},LinkError_closure38:function(){},LinkError_closure5:function(){},GlbError:function(e,t,n){this.severity=e,this.code=t,this.message=n},GlbError_closure12:function(){},GlbError_closure11:function(){},GlbError_closure10:function(){},GlbError_closure9:function(){},GlbError_closure0:function(){},GlbError_closure8:function(){},GlbError_closure4:function(){},GlbError_closure5:function(){},GlbError_closure1:function(){},GlbError_closure:function(){},GlbError_closure2:function(){},GlbError_closure7:function(){},GlbError_closure6:function(){},GlbError_closure3:function(){},Issue:function(e,t,n,r,i){var o=this;o.type=e,o.severityOverride=t,o.pointer=n,o.offset=r,o._args=i}},U={_init:function(e){w.JSArray_methods.add$1(e.imageMimeTypes,"image/webp")},ExtTextureWebPTexture_fromMap:function(e,t){return E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),E.interceptedTypeCheck(t,"$isContext"),t.toString,H.checkMembers(e,w.List_source,t),new U.ExtTextureWebPTexture(H.getIndex(e,"source",t,!1),H.getExtensions(e,w.Type_ExtTextureWebPTexture_9YE,t,null,!1),H.getExtras(e,t))},ExtTextureWebPTexture:function(e,t,n){var r=this;r._sourceIndex=e,r._ext_texture_webp$_source=null,r.extensions=t,r.extras=n,r._isUsed=!1},Extension:function(e,t,n,r){var i=this;i.name=e,i.functions=t,i.init=n,i.required=r},ExtFuncs:function(e){this.fromMap=e},ExtensionTuple:function(e,t){this.type=e,this.name=t},LinkableExtensionEntry:function(e,t){this.object=e,this.path=t},ResourceValidatableExtensionEntry:function(e,t){this.object=e,this.path=t}},B={KhrLightsPunctualGltf_fromMap:function(e,t){var n,r,i,o,a,s,l,c,u,h,d="lights";if(E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),E.interceptedTypeCheck(t,"$isContext"),t.toString,H.checkMembers(e,w.List_lights,t),n=H.getMapList(e,d,t),i=[r=B.KhrLightsPunctualLight],r=[r],null!=n){for(o=n.get$length(n),(a=new Array(o)).fixed$length=Array,i=E.setRuntimeTypeInfo(a,i),s=new H.SafeList(i,o,d,r),r=t.path,w.JSArray_methods.add$1(r,d),o=B.KhrLightsPunctualLightSpot,l=0;l<n.get$length(n);++l){if(c=n.$index(0,l),w.JSArray_methods.add$1(r,w.JSInt_methods.toString$0(l)),H.checkMembers(c,w.List_INA,t),H.getFloatList(c,"color",t,w.List_1_1_1,w.List_3,1,0,!1),H.getFloat(c,"intensity",t,1,1/0,-1/0,1/0,0,!1),"spot"===(u=H.getString(c,"type",t,null,w.List_directional_point_spot,null,!0))?H.getObjectFromInnerMap(c,"spot",t,B.khr_lights_punctual_KhrLightsPunctualLightSpot_fromMap$closure(),!0,o):(a=c.containsKey$1("spot"))&&t.addIssue$2$name(K.$get$SemanticError_extraProperty(),"spot"),h=H.getFloat(c,"range",t,NaN,1/0,0,1/0,-1/0,!1),(a="directional"===u&&!isNaN(h))&&t.addIssue$2$name(K.$get$SemanticError_extraProperty(),"range"),H.getString(c,"name",t,null,null,null,!1),w.JSArray_methods.$indexSet(i,l,new B.KhrLightsPunctualLight(H.getExtensions(c,w.Type_KhrLightsPunctualLight_4m4,t,null,!1),H.getExtras(c,t))),0>=r.length)return E.ioore(r,-1);r.pop()}if(0>=r.length)return E.ioore(r,-1);r.pop()}else(o=new Array(0)).fixed$length=Array,s=new H.SafeList(E.setRuntimeTypeInfo(o,i),0,d,r);return new B.KhrLightsPunctualGltf(s,H.getExtensions(e,w.Type_KhrLightsPunctualGltf_4YB,t,null,!1),H.getExtras(e,t))},KhrLightsPunctualLightSpot_fromMap:function(e,t){var n,r,i=M.Object;return E.assertSubtype(e,"$isMap",[M.String,i],"$asMap"),H.checkMembers(e,w.List_innerConeAngle_outerConeAngle,t),n=H.getFloat(e,"innerConeAngle",t,0,1.5707963267948966,-1/0,1/0,0,!1),r=H.getFloat(e,"outerConeAngle",t,.7853981633974483,1/0,0,1.5707963267948966,-1/0,!1),!isNaN(r)&&!isNaN(n)&&r<=n&&t.addIssue$3$args$name(K.$get$SemanticError_khrLightsPunctualLightSpotAngles(),E.setRuntimeTypeInfo([n,r],[i]),"outerConeAngle"),new B.KhrLightsPunctualLightSpot(H.getExtensions(e,w.Type_KhrLightsPunctualLightSpot_oBB,t,null,!1),H.getExtras(e,t))},KhrLightsPunctualNode_fromMap:function(e,t){return E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),E.interceptedTypeCheck(t,"$isContext"),t.toString,H.checkMembers(e,w.List_light,t),new B.KhrLightsPunctualNode(H.getIndex(e,"light",t,!0),H.getExtensions(e,w.Type_KhrLightsPunctualNode_eHw,t,null,!1),H.getExtras(e,t))},KhrLightsPunctualGltf:function(e,t,n){var r=this;r.lights=e,r.extensions=t,r.extras=n,r._isUsed=!1},KhrLightsPunctualGltf_link_closure:function(e,t){this.context=e,this.gltf=t},KhrLightsPunctualLight:function(e,t){this.extensions=e,this.extras=t,this._isUsed=!1},KhrLightsPunctualLightSpot:function(e,t){this.extensions=e,this.extras=t,this._isUsed=!1},KhrLightsPunctualNode:function(e,t,n){var r=this;r._lightIndex=e,r._light=null,r.extensions=t,r.extras=n,r._isUsed=!1}},z={KhrMaterialsPbrSpecularGlossiness_fromMap:function(e,t){var n,r,i,o,a,s=M.Object;for(E.assertSubtype(e,"$isMap",[M.String,s],"$asMap"),E.interceptedTypeCheck(t,"$isContext"),t.toString,H.checkMembers(e,w.List_cwF,t),H.getFloatList(e,"diffuseFactor",t,w.List_1_1_1_1,w.List_4,1,0,!1),n=L.TextureInfo,r=H.getObjectFromInnerMap(e,"diffuseTexture",t,L.material_TextureInfo_fromMap$closure(),!1,n),H.getFloatList(e,"specularFactor",t,w.List_1_1_1,w.List_3,1,0,!1),H.getFloat(e,"glossinessFactor",t,1,1/0,-1/0,1,0,!1),i=H.getObjectFromInnerMap(e,"specularGlossinessTexture",t,L.material_TextureInfo_fromMap$closure(),!1,n),o=H.getExtensions(e,w.Type_DzG,t,null,!1),a=new z.KhrMaterialsPbrSpecularGlossiness(r,i,o,H.getExtras(e,t)),s=E.setRuntimeTypeInfo([],[s]),w.JSArray_methods.add$1(s,r),w.JSArray_methods.add$1(s,i),n=o.get$values(),n=new E.MappedIterator(T.get$iterator$ax(n.__internal$_iterable),n._f,[E.getTypeArgumentByIndex(n,0),E.getTypeArgumentByIndex(n,1)]);n.moveNext$0();)w.JSArray_methods.add$1(s,n.__internal$_current);return t.registerObjectsOwner$2(a,s),a},KhrMaterialsPbrSpecularGlossiness:function(e,t,n,r){var i=this;i.diffuseTexture=e,i.specularGlossinessTexture=t,i.extensions=n,i.extras=r,i._isUsed=!1},GlbReader:function(e,t,n){var r=this;r._header=e,r._headerByteData=null,r.stream=t,r._glb_reader$_subscription=null,r._glb_reader$_completer=n,r._context=null,r._glb_reader$_chunkType=r._glb_reader$_chunkLength=r._chunkNumber=r._totalLength=r._glb_reader$_offset=r._localOffset=r._glb_reader$_state=0,r._hasJsonChunk=!1,r._jsonStreamController=r._jsonReaderResult=r._jsonReader=null,r._hasBinChunk=!1,r._binaryBuffer=null},GlbReader_read_closure:function(e){this.$this=e},GlbReader__onData_updateState:function(e){this.$this=e},GlbReader__onDone_closure:function(e){this.$this=e},ValidationResult:function(e,t,n,r){var i=this;i.uri=e,i.context=t,i.readerResult=n,i.writeTimestamp=r},ValidationResult__getGltfInfoMap_closure:function(){},ValidationResult__getGltfInfoMap__closure:function(){},hashObjects:function(e){var t,n=w.NativeFloat32List_methods.fold$1$2(e,0,new z.hashObjects_closure,M.int);return"number"!=typeof n?E.iae(n):(t=536870911&n+((67108863&n)<<3),536870911&(t^=t>>>11)+((16383&t)<<15))},hashObjects_closure:function(){},_combine:function(e,t){var n=536870911&e+t;return(n=536870911&n+((524287&n)<<10))^n>>>6},_finish:function(e){var t=536870911&e+((67108863&e)<<3);return 536870911&(t^=t>>>11)+((16383&t)<<15)}},V={KhrTextureTransform_fromMap:function(e,t){return E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap"),E.interceptedTypeCheck(t,"$isContext"),t.toString,H.checkMembers(e,w.List_offset_rotation_scale_texCoord,t),H.getFloatList(e,"offset",t,w.List_0_0,w.List_2,1/0,-1/0,!1),H.getFloat(e,"rotation",t,0,1/0,-1/0,1/0,-1/0,!1),H.getFloatList(e,"scale",t,w.List_1_1,w.List_2,1/0,-1/0,!1),new V.KhrTextureTransform(H.getUint(e,"texCoord",t,-1,null,-1,0,!1),H.getExtensions(e,w.Type_KhrTextureTransform_xSJ,t,null,!1),H.getExtras(e,t))},KhrTextureTransform:function(e,t,n){var r=this;r.texCoord=e,r.extensions=t,r.extras=n,r._isUsed=!1}},G={GltfReader_detect:function(e,t){var n,r={},i=G.GltfReader,o=new M._Future(K.Zone__current,[i]);return r.formatDetected=!1,r.subscription=null,n=M.StreamController_StreamController(new G.GltfReader_detect_closure(r),new G.GltfReader_detect_closure0(r),new G.GltfReader_detect_closure1(r),[M.List,M.int]),r.subscription=e.listen$2$onDone(new G.GltfReader_detect_closure2(r,n,new M._AsyncCompleter(o,[i]),t),n.get$close()),o},GltfJsonReader$:function(e,t){var n=G.GltfReaderResult;return(n=new G.GltfJsonReader(e,new M._AsyncCompleter(new M._Future(K.Zone__current,[n]),[n])))._gltf_reader$_context=t,n},GltfJsonReader_readFromJsonString:function(e,t){var n,r,i,o,a,s=null;try{s=w.C_JsonCodec.decode$1(e)}catch(i){if((o=E.unwrapException(i))instanceof M.FormatException)return n=o,void t.addIssue$3$args$noPointer(K.$get$SchemaError_invalidJson(),E.setRuntimeTypeInfo([n],[M.Object]),!0);throw i}if(o=s,a=M.Object,E.checkSubtype(o,"$isMap",[M.String,a],"$asMap"))try{return r=I.Gltf_Gltf$fromMap(s,t),new G.GltfReaderResult("model/gltf+json",r,null)}catch(i){if(E.unwrapException(i)instanceof C.IssuesLimitExceededException)return;throw i}else t.addIssue$3$args$noPointer(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([s,"object"],[a]),!0)},GltfReaderResult:function(e,t,n){this.mimeType=e,this.gltf=t,this.buffer=n},GltfReader:function(){},GltfReader_detect_closure0:function(e){this._box_0=e},GltfReader_detect_closure1:function(e){this._box_0=e},GltfReader_detect_closure:function(e){this._box_0=e},GltfReader_detect_closure2:function(e,t,n,r){var i=this;i._box_0=e,i.controller=t,i.completer=n,i.context=r},GltfJsonReader:function(e,t){var n=this;n.stream=e,n._gltf_reader$_subscription=null,n._completer=t,n._gltf_reader$_context=n._byteSink=null,n._isFirstChunk=!0},GltfJsonReader_read_closure:function(e){this.$this=e},GltfInvalidFormatException:function(){}},H={_getGuarded:function(e,t,n,r){var i=e.$index(0,t);return null==i&&e.containsKey$1(t)&&r.addIssue$3$args$name(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([null,n],[M.Object]),t),i},getIndex:function(e,t,n,r){var i=H._getGuarded(e,t,"integer",n);if("number"==typeof i&&Math.floor(i)===i){if(i>=0)return i;n.addIssue$2$name(K.$get$SchemaError_invalidIndex(),t)}else null==i?r&&n.addIssue$2$args(K.$get$SchemaError_undefinedProperty(),E.setRuntimeTypeInfo([t],[M.Object])):n.addIssue$3$args$name(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([i,"integer"],[M.Object]),t);return-1},getBool:function(e,t,n){var r=H._getGuarded(e,t,"boolean",n);return null!=r&&("boolean"==typeof r?r:(n.addIssue$3$args$name(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([r,"boolean"],[M.Object]),t),!1))},getUint:function(e,t,n,r,i,o,a,s){var l=H._getGuarded(e,t,"integer",n);if("number"==typeof l&&Math.floor(l)===l){if(null!=i){if(!H.checkEnum(t,l,i,n,!1,M.int))return-1}else if(l<a||-1!==o&&l>o)return n.addIssue$3$args$name(K.$get$SchemaError_valueNotInRange(),E.setRuntimeTypeInfo([l],[M.Object]),t),-1;return l}if(null==l){if(!s)return r;n.addIssue$2$args(K.$get$SchemaError_undefinedProperty(),E.setRuntimeTypeInfo([t],[M.Object]))}else n.addIssue$3$args$name(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([l,"integer"],[M.Object]),t);return-1},getFloat:function(e,t,n,r,i,o,a,s,l){var c=H._getGuarded(e,t,"number",n);if("number"==typeof c)return c<s||c<=o||c>a||c>=i?(n.addIssue$3$args$name(K.$get$SchemaError_valueNotInRange(),E.setRuntimeTypeInfo([c],[M.Object]),t),NaN):c;if(null==c){if(!l)return r;n.addIssue$2$args(K.$get$SchemaError_undefinedProperty(),E.setRuntimeTypeInfo([t],[M.Object]))}else n.addIssue$3$args$name(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([c,"number"],[M.Object]),t);return NaN},getString:function(e,t,n,r,i,o,a){var s=H._getGuarded(e,t,"string",n);if("string"==typeof s){if(null!=i)H.checkEnum(t,s,i,n,!1,M.String);else if(!1===(null==o?null:o._nativeRegExp.test(s)))return void n.addIssue$3$args$name(K.$get$SchemaError_patternMismatch(),E.setRuntimeTypeInfo([s,o.pattern],[M.Object]),t);return s}if(null==s){if(!a)return r;n.addIssue$2$args(K.$get$SchemaError_undefinedProperty(),E.setRuntimeTypeInfo([t],[M.Object]))}else n.addIssue$3$args$name(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([s,"string"],[M.Object]),t)},getUri:function(e,t){var n,r,i,o;try{return((i=n=M.Uri_parse(e)).get$hasScheme()||i.get$hasAuthority()||i.get$hasAbsolutePath()||i.get$hasQuery()||i.get$hasFragment())&&t.addIssue$3$args$name(K.$get$SemanticError_nonRelativeUri(),E.setRuntimeTypeInfo([e],[M.Object]),"uri"),n}catch(o){if((i=E.unwrapException(o))instanceof M.FormatException)return r=i,void t.addIssue$3$args$name(K.$get$SchemaError_invalidUri(),E.setRuntimeTypeInfo([e,r],[M.Object]),"uri");throw o}},getMap:function(e,t,n,r){var i=H._getGuarded(e,t,"object",n),o=M.String,a=M.Object;if(E.checkSubtype(i,"$isMap",[o,a],"$asMap"))return i;if(null==i){if(r)return void n.addIssue$2$args(K.$get$SchemaError_undefinedProperty(),E.setRuntimeTypeInfo([t],[a]))}else if(n.addIssue$3$args$name(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([i,"object"],[a]),t),r)return;return M.LinkedHashMap_LinkedHashMap$_empty(o,a)},getObjectFromInnerMap:function(e,t,n,r,i,o){var a,s=H._getGuarded(e,t,"object",n),l=M.Object;if(E.checkSubtype(s,"$isMap",[M.String,l],"$asMap"))return l=n.path,w.JSArray_methods.add$1(l,t),a=r.call$2(s,n),0>=l.length?E.ioore(l,-1):(l.pop(),a);null==s?i&&n.addIssue$2$args(K.$get$SchemaError_undefinedProperty(),E.setRuntimeTypeInfo([t],[l])):n.addIssue$3$args$name(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([s,"object"],[l]),t)},getIndicesList:function(e,t,n,r){var i,o,a,s,l,c=H._getGuarded(e,t,"array",n),u=T.getInterceptor$(c);if(u.$isList){if(u.get$isEmpty(c))return void n.addIssue$2$name(K.$get$SchemaError_emptyEntity(),t);for(i=n.path,w.JSArray_methods.add$1(i,t),o=M.int,a=M.LinkedHashSet_LinkedHashSet$_empty(o),s=0;s<u.get$length(c);++s)"number"==typeof(l=u.$index(c,s))&&Math.floor(l)===l&&l>=0?a.add$1(0,l)||n.addIssue$2$index(K.$get$SchemaError_arrayDuplicateElements(),s):(u.$indexSet(c,s,-1),n.addIssue$2$index(K.$get$SchemaError_invalidIndex(),s));return 0>=i.length?E.ioore(i,-1):(i.pop(),u.cast$1$0(c,o))}null==c?r&&n.addIssue$2$args(K.$get$SchemaError_undefinedProperty(),E.setRuntimeTypeInfo([t],[M.Object])):n.addIssue$3$args$name(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([c,"array"],[M.Object]),t)},getIndicesMap:function(e,t,n,r){var i,o=H._getGuarded(e,t,"object",n),a=M.String,s=M.Object;if(E.checkSubtype(o,"$isMap",[a,s],"$asMap"))return(s=T.getInterceptor$asx(o)).get$isEmpty(o)?void n.addIssue$2$name(K.$get$SchemaError_emptyEntity(),t):(i=n.path,w.JSArray_methods.add$1(i,t),s.forEach$1(o,new H.getIndicesMap_closure(r,o,n)),0>=i.length?E.ioore(i,-1):(i.pop(),s.cast$2$0(o,a,M.int)));a=[s],null==o?n.addIssue$2$args(K.$get$SchemaError_undefinedProperty(),E.setRuntimeTypeInfo([t],a)):n.addIssue$3$args$name(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([o,"object"],a),t)},getIndicesMapsList:function(e,t,n,r){var i,o,a,s,l,c,u,h=H._getGuarded(e,t,"array",n),d=T.getInterceptor$(h);if(d.$isList){if(d.get$isEmpty(h))return void n.addIssue$2$name(K.$get$SchemaError_emptyEntity(),t);for(i=n.path,w.JSArray_methods.add$1(i,t),a=[o=M.Object],o=[M.String,o],s=!1,l=0;l<d.get$length(h);++l)if(c=d.$index(h,l),E.checkSubtype(c,"$isMap",o,"$asMap"))if((u=T.getInterceptor$asx(c)).get$isEmpty(c))n.addIssue$2$index(K.$get$SchemaError_emptyEntity(),l),s=!0;else{if(w.JSArray_methods.add$1(i,w.JSInt_methods.toString$0(l)),u.forEach$1(c,new H.getIndicesMapsList_closure(r,c,n)),0>=i.length)return E.ioore(i,-1);i.pop()}else n.addIssue$2$args(K.$get$SchemaError_arrayTypeMismatch(),E.setRuntimeTypeInfo([c,"object"],a)),s=!0;if(0>=i.length)return E.ioore(i,-1);if(i.pop(),s)return;return d=d.cast$1$0(h,[M.Map,,,]),i=[M.Map,M.String,M.int],o=E.getRuntimeTypeArgument(d,"ListMixin",0),new E.MappedListIterable(d,E.functionTypeCheck(new H.getIndicesMapsList_closure0,{func:1,ret:i,args:[o]}),[o,i]).toList$1$growable(0,!1)}null!=h&&n.addIssue$3$args$name(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([h,"array"],[M.Object]),t)},getFloatList:function(e,t,n,r,i,o,a,s){var l,c,u,h,d,p,f=H._getGuarded(e,t,"array",n),m=T.getInterceptor$(f);if(m.$isList){if(m.get$isEmpty(f))return void n.addIssue$2$name(K.$get$SchemaError_emptyEntity(),t);if(null!=i&&!H.checkEnum(t,m.get$length(f),i,n,!0,M.int))return;for((l=new Array(m.get$length(f))).fixed$length=Array,c=E.setRuntimeTypeInfo(l,[M.double]),l=[M.Object],u=!1,h=0;h<m.get$length(f);++h)"number"==typeof(d=m.$index(f,h))?((p=d<a||d>o)&&(n.addIssue$3$args$name(K.$get$SchemaError_valueNotInRange(),E.setRuntimeTypeInfo([d],l),t),u=!0),s?((p=K.$get$_float())[0]=d,w.JSArray_methods.$indexSet(c,h,p[0])):w.JSArray_methods.$indexSet(c,h,d)):(n.addIssue$3$args$name(K.$get$SchemaError_arrayTypeMismatch(),E.setRuntimeTypeInfo([d,"number"],l),t),u=!0);if(u)return;return c}if(null==f)return m=null==r?null:T.JSArray_JSArray$markFixed(r.slice(0),E.getTypeArgumentByIndex(r,0));n.addIssue$3$args$name(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([f,"array"],[M.Object]),t)},getGlIntList:function(e,t,n,r,i){var o,a,s,l,c,u,h,d,p,f=H._getGuarded(e,t,"array",n),m=T.getInterceptor$(f);if(m.$isList){if(m.get$length(f)!==i)return void n.addIssue$3$args$name(K.$get$SchemaError_arrayLengthNotInList(),E.setRuntimeTypeInfo([m.get$length(f),E.setRuntimeTypeInfo([i],[M.int])],[M.Object]),t);for(o=$.typeMin(r),a=$.typeMax(r),s=H.createTypedIntList(r,i),l=[M.Object],c=s.length,u=!1,h=0;h<m.get$length(f);++h)if("number"==typeof(d=m.$index(f,h))&&w.JSNumber_methods.toInt$0(d)===d){if("number"==typeof d&&Math.floor(d)===d||n.addIssue$3$args$name(K.$get$SemanticError_integerWrittenAsFloat(),E.setRuntimeTypeInfo([d],l),t),"number"!=typeof d)return d.$lt();if((p=d<o||d>a)&&(n.addIssue$3$args$name(K.$get$SemanticError_invalidGlValue(),E.setRuntimeTypeInfo([d,w.Map_ZGNO4.$index(0,r)],l),t),u=!0),p=T.toInt$0$n(d),h>=c)return E.ioore(s,h);s[h]=p}else n.addIssue$3$args$name(K.$get$SchemaError_arrayTypeMismatch(),E.setRuntimeTypeInfo([d,"integer"],l),t),u=!0;if(u)return;return s}null!=f&&n.addIssue$3$args$name(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([f,"array"],[M.Object]),t)},getStringList:function(e,t,n){var r,i,o,a,s,l,c,u=H._getGuarded(e,t,"array",n),h=T.getInterceptor$(u);if(h.$isList){if(h.get$isEmpty(u))return void n.addIssue$2$name(K.$get$SchemaError_emptyEntity(),t);for(r=n.path,w.JSArray_methods.add$1(r,t),i=M.String,o=M.LinkedHashSet_LinkedHashSet$_empty(i),a=[M.Object],s=!1,l=0;l<h.get$length(u);++l)"string"==typeof(c=h.$index(u,l))?o.add$1(0,c)||n.addIssue$2$index(K.$get$SchemaError_arrayDuplicateElements(),l):(n.addIssue$3$args$index(K.$get$SchemaError_arrayTypeMismatch(),E.setRuntimeTypeInfo([c,"string"],a),l),s=!0);if(0>=r.length)return E.ioore(r,-1);if(r.pop(),s)return;return h.cast$1$0(u,i)}null!=u&&n.addIssue$3$args$name(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([u,"array"],[M.Object]),t)},getMapList:function(e,t,n){var r,i,o,a,s,l=H._getGuarded(e,t,"array",n),c=T.getInterceptor$(l);if(c.$isList){if(c.get$isEmpty(l))return void n.addIssue$2$name(K.$get$SchemaError_emptyEntity(),t);for(r=c.get$iterator(l),i=M.Object,o=[M.String,i],i=[i],a=!1;r.moveNext$0();)s=r.get$current(),E.checkSubtype(s,"$isMap",o,"$asMap")||(n.addIssue$3$args$name(K.$get$SchemaError_arrayTypeMismatch(),E.setRuntimeTypeInfo([s,"object"],i),t),a=!0);if(a)return;return c.cast$1$0(l,[M.Map,M.String,M.Object])}c=[M.Object],null==l?n.addIssue$2$args(K.$get$SchemaError_undefinedProperty(),E.setRuntimeTypeInfo([t],c)):n.addIssue$3$args$name(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([l,"array"],c),t)},getExtensions:function(e,t,n,r,i){var o,a,s,l,c,u,h,d,p,f,m=M.Object,g=M.LinkedHashMap_LinkedHashMap$_empty(M.String,m),v=H.getMap(e,"extensions",n,!1);if(v.get$isEmpty(v))return g;for(o=n.path,w.JSArray_methods.add$1(o,"extensions"),i&&v.get$length(v)>1&&n.addIssue$2$args(K.$get$SemanticError_multipleExtensions(),E.setRuntimeTypeInfo([null,v.get$keys()],[m])),m=(m=v.get$keys()).get$iterator(m),a=null==r,s=n.linkableExtensions,l=n.resourceValidatableExtensions;m.moveNext$0();)if(c=m.get$current(),u=H.getMap(v,c,n,!1),(h=n._extensionsLoadedView).contains$1(h,c))if(null!=(d=n._extensionsFunctionsView._map.$index(0,new U.ExtensionTuple(t,c)))){if(null!=u){if(w.JSArray_methods.add$1(o,c),p=d.fromMap.call$2(u,n),g.$indexSet(0,c,p),(c=T.getInterceptor$(p)).$isLinkable&&(h=a?t:r,h=s.putIfAbsent$2(h,new H.getExtensions_closure),(f=E.setRuntimeTypeInfo(o.slice(0),[E.getTypeArgumentByIndex(o,0)])).fixed$length=Array,T.add$1$ax(h,new U.LinkableExtensionEntry(p,f))),c.$isResourceValidatable&&((c=E.setRuntimeTypeInfo(o.slice(0),[E.getTypeArgumentByIndex(o,0)])).fixed$length=Array,w.JSArray_methods.add$1(l,new U.ResourceValidatableExtensionEntry(p,c))),0>=o.length)return E.ioore(o,-1);o.pop()}}else n.addIssue$2$name(K.$get$LinkError_unexpectedExtensionObject(),c);else g.$indexSet(0,c,null),(h=(h=n._extensionsUsedView).contains$1(h,c))||n.addIssue$2$name(K.$get$LinkError_undeclaredExtension(),c);return 0>=o.length?E.ioore(o,-1):(o.pop(),g)},getExtras:function(e,t){var n=e.$index(0,"extras");return null!=n&&!T.getInterceptor$(n).$isMap&&t.addIssue$2$name(K.$get$SemanticError_nonObjectExtras(),"extras"),n},checkEnum:function(e,t,n,r,i,o){var a;return!!T.contains$1$ax(n,t)||(a=i?K.$get$SchemaError_arrayLengthNotInList():K.$get$SchemaError_valueNotInList(),r.addIssue$3$args$name(a,E.setRuntimeTypeInfo([t,n],[M.Object]),e),!1)},checkMembers:function(e,t,n){var r,i;for(r=(r=e.get$keys()).get$iterator(r);r.moveNext$0();)i=r.get$current(),!w.JSArray_methods.contains$1(t,i)&&!w.JSArray_methods.contains$1(w.List_extensions_extras,i)&&n.addIssue$2$name(K.$get$SchemaError_unexpectedProperty(),i)},resolveNodeList:function(e,t,n,r,i,o){var a,s,l,c,u,h,d,p=i.path;for(w.JSArray_methods.add$1(p,r),a=[M.Object],l=(s=n._list).length,c=t&&w.JSArray_methods,u=0;u<e.get$length(e);++u)-1!==(h=e.$index(0,u))&&(null!=(d=null==h||h<0||h>=l?null:w.JSArray_methods.$index(s,h))?(d._isUsed=!0,c.$indexSet(t,u,d),o.call$3(d,h,u)):i.addIssue$3$args$index(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([h],a),u));if(0>=p.length)return E.ioore(p,-1);p.pop()},isTrsDecomposable:function(e){var t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,v,y,_,b,x,S,w,T,M,C,$,A,I,P,L,k,R,D,j,N,F,U=e._m4storage;if(0!==U[3]||0!==U[7]||0!==U[11]||1!==U[15])return!1;if(0===e.determinant$0())return!1;if(t=K.$get$_translation(),n=K.$get$_rotation(),r=K.$get$_scale(),(i=new O.Vector3(new Float32Array(3))).setValues$3(U[0],U[1],U[2]),o=Math.sqrt(i.get$length2()),i.setValues$3(U[4],U[5],U[6]),a=Math.sqrt(i.get$length2()),i.setValues$3(U[8],U[9],U[10]),s=Math.sqrt(i.get$length2()),e.determinant$0()<0&&(o=-o),(t=t._v3storage)[0]=U[12],t[1]=U[13],t[2]=U[14],l=1/o,c=1/a,u=1/s,U=new Float32Array(16),new O.Matrix4(U).setFrom$1(e),U[0]=U[0]*l,U[1]=U[1]*l,U[2]=U[2]*l,U[4]=U[4]*c,U[5]=U[5]*c,U[6]=U[6]*c,U[8]=U[8]*u,U[9]=U[9]*u,U[10]=U[10]*u,(h=new Float32Array(9))[0]=U[0],h[1]=U[1],h[2]=U[2],h[3]=U[4],h[4]=U[5],h[5]=U[6],h[6]=U[8],h[7]=U[9],h[8]=U[10],n.toString,(f=0+(U=h[0])+(d=h[4])+(p=h[8]))>0)m=Math.sqrt(f+1),(U=n._qStorage)[3]=.5*m,m=.5/m,U[0]=(h[5]-h[7])*m,U[1]=(h[6]-h[2])*m,U[2]=(h[1]-h[3])*m;else{if(v=((g=U<d?d<p?2:1:U<p?2:0)+1)%3,y=(g+2)%3,(d=(U=3*g)+g)>=9)return E.ioore(h,d);if(d=h[d],(_=(p=3*v)+v)>=9)return E.ioore(h,_);if(_=h[_],(x=(b=3*y)+y)>=9)return E.ioore(h,x);if(m=Math.sqrt(d-_-h[x]+1),(n=n._qStorage)[g]=.5*m,m=.5/m,(x=p+y)>=9)return E.ioore(h,x);if(x=h[x],(_=b+v)>=9)return E.ioore(h,_);if(n[3]=(x-h[_])*m,(_=U+v)>=9)return E.ioore(h,_);if(_=h[_],(p+=g)>=9)return E.ioore(h,p);if(n[v]=(_+h[p])*m,(U+=y)>=9)return E.ioore(h,U);if(U=h[U],(b+=g)>=9)return E.ioore(h,b);n[y]=(U+h[b])*m,U=n}return(n=r._v3storage)[0]=o,n[1]=a,n[2]=s,h=K.$get$_matrix(),I=(S=U[0])*(C=S+S),P=S*($=(w=U[1])+w),L=S*(A=(T=U[2])+T),k=w*$,R=w*A,D=T*A,j=(M=U[3])*C,N=M*$,F=M*A,(U=h._m4storage)[0]=1-(k+D),U[1]=P+F,U[2]=L-N,U[3]=0,U[4]=P-F,U[5]=1-(I+D),U[6]=R+j,U[7]=0,U[8]=L+N,U[9]=R-j,U[10]=1-(I+k),U[11]=0,U[12]=t[0],U[13]=t[1],U[14]=t[2],U[15]=1,r instanceof O.Vector3?(o=n[0],a=n[1],s=n[2]):(o=null,a=null,s=null),t=U[0],"number"!=typeof o?E.iae(o):(U[0]=t*o,U[1]=U[1]*o,U[2]=U[2]*o,U[3]=U[3]*o,t=U[4],"number"!=typeof a?E.iae(a):(U[4]=t*a,U[5]=U[5]*a,U[6]=U[6]*a,U[7]=U[7]*a,t=U[8],"number"!=typeof s?E.iae(s):(U[8]=t*s,U[9]=U[9]*s,U[10]=U[10]*s,U[11]=U[11]*s,U[12]=U[12],U[13]=U[13],U[14]=U[14],U[15]=U[15],Math.abs(h.infinityNorm$0()-e.infinityNorm$0())<5e-5)))},createTypedIntList:function(e,t){switch(e){case 5120:return new Int8Array(t);case 5121:return new Uint8Array(t);case 5122:return new Int16Array(t);case 5123:return new Uint16Array(t);case 5124:return new Int32Array(t);case 5125:return new Uint32Array(t);default:throw E.wrapException(M.ArgumentError$(null))}},getIndicesMap_closure:function(e,t,n){this.checkKey=e,this.value=t,this.context=n},getIndicesMapsList_closure:function(e,t,n){this.checkKey=e,this.innerMap=t,this.context=n},getIndicesMapsList_closure0:function(){},getExtensions_closure:function(){},SafeList:function(e,t,n,r){var i=this;i._list=e,i._utils$_length=t,i.name=n,i.$ti=r},ElementChecker:function(){},UnitVec3FloatChecker:function(e,t){this._utils$_sum=0,this.path=e,this.normalizeValue=t},UnitVec3SignFloatChecker:function(e,t){this._utils$_sum=0,this.path=e,this.normalizeValue=t},ClampedRangeFloatChecker:function(e){this.path=e}},W=[w,E,T,M,C,$,O,A,I,P,L,k,R,D,j,N,F,U,B,z,V,G,H];S.setFunctionNamesIfNecessary(W);var q,J,Y,X,K={};E.JS_CONST.prototype={},T.Interceptor.prototype={$eq:function(e,t){return e===t},get$hashCode:function(e){return E.Primitives_objectHashCode(e)},toString$0:function(e){return"Instance of '"+E.S(E.Primitives_objectTypeName(e))+"'"},noSuchMethod$1:function(e,t){throw E.interceptedTypeCheck(t,"$isInvocation"),E.wrapException(M.NoSuchMethodError$(e,t.get$memberName(),t.get$positionalArguments(),t.get$namedArguments()))}},T.JSBool.prototype={toString$0:function(e){return String(e)},get$hashCode:function(e){return e?519018:218159},$isbool:1},T.JSNull.prototype={$eq:function(e,t){return null==t},toString$0:function(e){return"null"},get$hashCode:function(e){return 0},noSuchMethod$1:function(e,t){return this.super$Interceptor$noSuchMethod(e,E.interceptedTypeCheck(t,"$isInvocation"))},$isNull:1},T.JavaScriptObject.prototype={get$hashCode:function(e){return 0},toString$0:function(e){return String(e)},$isPromise:1,$asPromise:function(){return[-2]},$is_JSValidationOptions:1,then$1$1:function(e,t){return e.then(t)},then$2:function(e,t,n){return e.then(t,n)},set$validateBytes:function(e,t){return e.validateBytes=t},set$validateString:function(e,t){return e.validateString=t},set$version:function(e,t){return e.version=t},set$supportedExtensions:function(e,t){return e.supportedExtensions=t},get$uri:function(e){return e.uri},get$externalResourceFunction:function(e){return e.externalResourceFunction},get$validateAccessorData:function(e){return e.validateAccessorData},get$writeTimestamp:function(e){return e.writeTimestamp},get$maxIssues:function(e){return e.maxIssues},get$ignoredIssues:function(e){return e.ignoredIssues},get$severityOverrides:function(e){return e.severityOverrides}},T.PlainJavaScriptObject.prototype={},T.UnknownJavaScriptObject.prototype={},T.JavaScriptFunction.prototype={toString$0:function(e){var t=e[K.$get$DART_CLOSURE_PROPERTY_NAME()];return null==t?this.super$JavaScriptObject$toString(e):"JavaScript function for "+E.S(T.toString$0$(t))},$signature:function(){return{func:1,opt:[,,,,,,,,,,,,,,,,]}},$isFunction:1},T.JSArray.prototype={cast$1$0:function(e,t){return new E.CastList(e,[E.getTypeArgumentByIndex(e,0),t])},add$1:function(e,t){E.assertSubtypeOfRuntimeType(t,E.getTypeArgumentByIndex(e,0)),e.fixed$length&&E.throwExpression(M.UnsupportedError$("add")),e.push(t)},_removeWhere$2:function(e,t,n){var r,i,o,a,s;for(E.functionTypeCheck(t,{func:1,ret:M.bool,args:[E.getTypeArgumentByIndex(e,0)]}),r=[],i=e.length,o=0;o<i;++o)if(a=e[o],E.boolConversionCheck(t.call$1(a))||r.push(a),e.length!==i)throw E.wrapException(M.ConcurrentModificationError$(e));if((s=r.length)!==i)for(this.set$length(e,s),o=0;o<r.length;++o)e[o]=r[o]},addAll$1:function(e,t){var n;for(E.assertSubtype(t,"$isIterable",[E.getTypeArgumentByIndex(e,0)],"$asIterable"),e.fixed$length&&E.throwExpression(M.UnsupportedError$("addAll")),n=T.get$iterator$ax(t);n.moveNext$0();)e.push(n.get$current())},map$1$1:function(e,t,n){var r=E.getTypeArgumentByIndex(e,0);return new E.MappedListIterable(e,E.functionTypeCheck(t,{func:1,ret:n,args:[r]}),[r,n])},join$1:function(e,t){var n,r=new Array(e.length);for(r.fixed$length=Array,n=0;n<e.length;++n)this.$indexSet(r,n,E.S(e[n]));return r.join(t)},skip$1:function(e,t){return E.SubListIterable$(e,t,null,E.getTypeArgumentByIndex(e,0))},firstWhere$2$orElse:function(e,t,n){var r,i,o,a=E.getTypeArgumentByIndex(e,0);for(E.functionTypeCheck(t,{func:1,ret:M.bool,args:[a]}),E.functionTypeCheck(n,{func:1,ret:a}),r=e.length,i=0;i<r;++i){if(o=e[i],E.boolConversionCheck(t.call$1(o)))return o;if(e.length!==r)throw E.wrapException(M.ConcurrentModificationError$(e))}return n.call$0()},elementAt$1:function(e,t){return t<0||t>=e.length?E.ioore(e,t):e[t]},sublist$2:function(e,t,n){if(t<0||t>e.length)throw E.wrapException(M.RangeError$range(t,0,e.length,"start",null));if(n<t||n>e.length)throw E.wrapException(M.RangeError$range(n,t,e.length,"end",null));return t===n?E.setRuntimeTypeInfo([],[E.getTypeArgumentByIndex(e,0)]):E.setRuntimeTypeInfo(e.slice(t,n),[E.getTypeArgumentByIndex(e,0)])},get$last:function(e){var t=e.length;if(t>0)return e[t-1];throw E.wrapException(E.IterableElementError_noElement())},contains$1:function(e,t){var n;for(n=0;n<e.length;++n)if(T.$eq$(e[n],t))return!0;return!1},get$isEmpty:function(e){return 0===e.length},get$isNotEmpty:function(e){return 0!==e.length},toString$0:function(e){return M.IterableBase_iterableToFullString(e,"[","]")},toList$1$growable:function(e,t){return T.JSArray_JSArray$markFixed(e.slice(0),E.getTypeArgumentByIndex(e,0))},toSet$0:function(e){return M.LinkedHashSet_LinkedHashSet$from(e,E.getTypeArgumentByIndex(e,0))},get$iterator:function(e){return new T.ArrayIterator(e,e.length,[E.getTypeArgumentByIndex(e,0)])},get$hashCode:function(e){return E.Primitives_objectHashCode(e)},get$length:function(e){return e.length},set$length:function(e,t){if(e.fixed$length&&E.throwExpression(M.UnsupportedError$("set length")),t<0)throw E.wrapException(M.RangeError$range(t,0,null,"newLength",null));e.length=t},$index:function(e,t){if(t>=e.length||t<0)throw E.wrapException(E.diagnoseIndexError(e,t));return e[t]},$indexSet:function(e,t,n){if(E.assertSubtypeOfRuntimeType(n,E.getTypeArgumentByIndex(e,0)),e.immutable$list&&E.throwExpression(M.UnsupportedError$("indexed set")),t>=e.length||t<0)throw E.wrapException(E.diagnoseIndexError(e,t));e[t]=n},$isEfficientLengthIterable:1,$isIterable:1,$isList:1},T.JSUnmodifiableArray.prototype={},T.ArrayIterator.prototype={get$current:function(){return this._current},moveNext$0:function(){var e,t=this._iterable,n=t.length;if(this._length!==n)throw E.wrapException(E.throwConcurrentModificationError(t));return(e=this._index)>=n?(this.set$_current(null),!1):(this.set$_current(t[e]),++this._index,!0)},set$_current:function(e){this._current=E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(this,0))},$isIterator:1},T.JSNumber.prototype={toInt$0:function(e){if(e>=-2147483648&&e<=2147483647)return 0|e;if(isFinite(e))return(e<0?Math.ceil(e):Math.floor(e))+0;throw E.wrapException(M.UnsupportedError$(e+".toInt()"))},toRadixString$1:function(e,t){var n,r,i,o;if(t<2||t>36)throw E.wrapException(M.RangeError$range(t,2,36,"radix",null));return n=e.toString(t),41!==w.JSString_methods.codeUnitAt$1(n,n.length-1)?n:(null==(r=/^([\da-z]+)(?:\.([\da-z]+))?\(e\+(\d+)\)$/.exec(n))&&E.throwExpression(M.UnsupportedError$("Unexpected toString result: "+n)),1>=(i=r.length)?E.ioore(r,1):(n=r[1],3>=i?E.ioore(r,3):(o=+r[3],null!=(i=r[2])&&(n+=i,o-=i.length),n+w.JSString_methods.$mul("0",o))))},toString$0:function(e){return 0===e&&1/e<0?"-0.0":""+e},get$hashCode:function(e){var t,n,r,i,o=0|e;return e===o?536870911&o:(t=Math.abs(e),n=Math.log(t)/.6931471805599453|0,r=Math.pow(2,n),536870911&599197*((9007199254740992*(i=t<1?t/r:r/t)|0)+(0xc95a6c285a6c9*i|0))+1259*n)},$mod:function(e,t){var n=e%t;return 0===n?0:n>0?n:t<0?n-t:n+t},$tdiv:function(e,t){return(0|e)===e&&(t>=1||t<-1)?e/t|0:this._tdivSlow$1(e,t)},_tdivFast$1:function(e,t){return(0|e)===e?e/t|0:this._tdivSlow$1(e,t)},_tdivSlow$1:function(e,t){var n=e/t;if(n>=-2147483648&&n<=2147483647)return 0|n;if(n>0){if(n!==1/0)return Math.floor(n)}else if(n>-1/0)return Math.ceil(n);throw E.wrapException(M.UnsupportedError$("Result of truncating division is "+E.S(n)+": "+E.S(e)+" ~/ "+t))},$shl:function(e,t){if(t<0)throw E.wrapException(E.argumentErrorValue(t));return t>31?0:e<<t>>>0},_shrOtherPositive$1:function(e,t){return e>0?this._shrBothPositive$1(e,t):e>>(t>31?31:t)>>>0},_shrReceiverPositive$1:function(e,t){if(t<0)throw E.wrapException(E.argumentErrorValue(t));return this._shrBothPositive$1(e,t)},_shrBothPositive$1:function(e,t){return t>31?0:e>>>t},$isdouble:1,$isnum:1},T.JSInt.prototype={$isint:1},T.JSDouble.prototype={},T.JSString.prototype={codeUnitAt$1:function(e,t){if(t<0)throw E.wrapException(E.diagnoseIndexError(e,t));return t>=e.length&&E.throwExpression(E.diagnoseIndexError(e,t)),e.charCodeAt(t)},_codeUnitAt$1:function(e,t){if(t>=e.length)throw E.wrapException(E.diagnoseIndexError(e,t));return e.charCodeAt(t)},$add:function(e,t){if("string"!=typeof t)throw E.wrapException(M.ArgumentError$value(t,null,null));return e+t},replaceRange$3:function(e,t,n,r){return n=M.RangeError_checkValidRange(t,n,e.length),e.substring(0,t)+r+e.substring(n)},startsWith$2:function(e,t,n){var r;if("number"==typeof n&&Math.floor(n)===n||E.throwExpression(E.argumentErrorValue(n)),"number"!=typeof n)return n.$lt();if(n<0||n>e.length)throw E.wrapException(M.RangeError$range(n,0,e.length,null,null));return!((r=n+t.length)>e.length)&&t===e.substring(n,r)},startsWith$1:function(e,t){return this.startsWith$2(e,t,0)},substring$2:function(e,t,n){if("number"==typeof t&&Math.floor(t)===t||E.throwExpression(E.argumentErrorValue(t)),null==n&&(n=e.length),"number"!=typeof t)return t.$lt();if(t<0)throw E.wrapException(M.RangeError$value(t,null));if(t>n)throw E.wrapException(M.RangeError$value(t,null));if(n>e.length)throw E.wrapException(M.RangeError$value(n,null));return e.substring(t,n)},substring$1:function(e,t){return this.substring$2(e,t,null)},trimRight$0:function(e){var t,n,r;if(void 0!==e.trimRight){if(0===(n=(t=e.trimRight()).length))return t;r=n-1,133===this.codeUnitAt$1(t,r)&&(n=T.JSString__skipTrailingWhitespace(t,r))}else n=T.JSString__skipTrailingWhitespace(e,e.length),t=e;return n===t.length?t:0===n?"":t.substring(0,n)},$mul:function(e,t){var n,r;if(0>=t)return"";if(1===t||0===e.length)return e;if(t!==t>>>0)throw E.wrapException(w.C_OutOfMemoryError);for(n=e,r="";1==(1&t)&&(r=n+r),0!==(t>>>=1);)n+=n;return r},padLeft$2:function(e,t,n){var r=t-e.length;return r<=0?e:this.$mul(n,r)+e},indexOf$2:function(e,t,n){if(n<0||n>e.length)throw E.wrapException(M.RangeError$range(n,0,e.length,null,null));return e.indexOf(t,n)},indexOf$1:function(e,t){return this.indexOf$2(e,t,0)},toString$0:function(e){return e},get$hashCode:function(e){var t,n,r;for(t=e.length,n=0,r=0;r<t;++r)n=536870911&(n=536870911&n+e.charCodeAt(r))+((524287&n)<<10),n^=n>>6;return n=536870911&n+((67108863&n)<<3),536870911&(n^=n>>11)+((16383&n)<<15)},get$length:function(e){return e.length},$isPattern:1,$isString:1},E._CastIterableBase.prototype={get$iterator:function(e){return new E.CastIterator(T.get$iterator$ax(this.get$_source()),this.$ti)},get$length:function(e){return T.get$length$asx(this.get$_source())},get$isEmpty:function(e){return T.get$isEmpty$asx(this.get$_source())},get$isNotEmpty:function(e){return T.get$isNotEmpty$asx(this.get$_source())},skip$1:function(e,t){return E.CastIterable_CastIterable(T.skip$1$ax(this.get$_source(),t),E.getTypeArgumentByIndex(this,0),E.getTypeArgumentByIndex(this,1))},elementAt$1:function(e,t){return E.subtypeOfRuntimeTypeCast(T.elementAt$1$ax(this.get$_source(),t),E.getTypeArgumentByIndex(this,1))},contains$1:function(e,t){return T.contains$1$ax(this.get$_source(),t)},toString$0:function(e){return T.toString$0$(this.get$_source())},$asIterable:function(e,t){return[t]}},E.CastIterator.prototype={moveNext$0:function(){return this._source.moveNext$0()},get$current:function(){return E.subtypeOfRuntimeTypeCast(this._source.get$current(),E.getTypeArgumentByIndex(this,1))},$isIterator:1,$asIterator:function(e,t){return[t]}},E.CastIterable.prototype={get$_source:function(){return this._source}},E._EfficientLengthCastIterable.prototype={$isEfficientLengthIterable:1,$asEfficientLengthIterable:function(e,t){return[t]}},E._CastListBase.prototype={$index:function(e,t){return E.subtypeOfRuntimeTypeCast(T.$index$asx(this._source,t),E.getTypeArgumentByIndex(this,1))},$indexSet:function(e,t,n){T.$indexSet$ax(this._source,t,E.subtypeOfRuntimeTypeCast(E.assertSubtypeOfRuntimeType(n,E.getTypeArgumentByIndex(this,1)),E.getTypeArgumentByIndex(this,0)))},set$length:function(e,t){T.set$length$asx(this._source,t)},add$1:function(e,t){T.add$1$ax(this._source,E.subtypeOfRuntimeTypeCast(E.assertSubtypeOfRuntimeType(t,E.getTypeArgumentByIndex(this,1)),E.getTypeArgumentByIndex(this,0)))},$isEfficientLengthIterable:1,$asEfficientLengthIterable:function(e,t){return[t]},$asListMixin:function(e,t){return[t]},$isList:1,$asList:function(e,t){return[t]}},E.CastList.prototype={cast$1$0:function(e,t){return new E.CastList(this._source,[E.getTypeArgumentByIndex(this,0),t])},get$_source:function(){return this._source}},E.CastMap.prototype={cast$2$0:function(e,t,n){return new E.CastMap(this._source,[E.getTypeArgumentByIndex(this,0),E.getTypeArgumentByIndex(this,1),t,n])},containsKey$1:function(e){return this._source.containsKey$1(e)},$index:function(e,t){return E.subtypeOfRuntimeTypeCast(this._source.$index(0,t),E.getTypeArgumentByIndex(this,3))},$indexSet:function(e,t,n){E.assertSubtypeOfRuntimeType(t,E.getTypeArgumentByIndex(this,2)),E.assertSubtypeOfRuntimeType(n,E.getTypeArgumentByIndex(this,3)),this._source.$indexSet(0,E.subtypeOfRuntimeTypeCast(t,E.getTypeArgumentByIndex(this,0)),E.subtypeOfRuntimeTypeCast(n,E.getTypeArgumentByIndex(this,1)))},forEach$1:function(e,t){this._source.forEach$1(0,new E.CastMap_forEach_closure(this,E.functionTypeCheck(t,{func:1,ret:-1,args:[E.getTypeArgumentByIndex(this,2),E.getTypeArgumentByIndex(this,3)]})))},get$keys:function(){return E.CastIterable_CastIterable(this._source.get$keys(),E.getTypeArgumentByIndex(this,0),E.getTypeArgumentByIndex(this,2))},get$length:function(e){var t=this._source;return t.get$length(t)},get$isEmpty:function(e){var t=this._source;return t.get$isEmpty(t)},$asMapMixin:function(e,t,n,r){return[n,r]},$asMap:function(e,t,n,r){return[n,r]}},E.CastMap_forEach_closure.prototype={call$2:function(e,t){var n=this.$this;E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(n,0)),E.assertSubtypeOfRuntimeType(t,E.getTypeArgumentByIndex(n,1)),this.f.call$2(E.subtypeOfRuntimeTypeCast(e,E.getTypeArgumentByIndex(n,2)),E.subtypeOfRuntimeTypeCast(t,E.getTypeArgumentByIndex(n,3)))},$signature:function(){var e=this.$this;return{func:1,ret:M.Null,args:[E.getTypeArgumentByIndex(e,0),E.getTypeArgumentByIndex(e,1)]}}},E.CodeUnits.prototype={get$length:function(e){return this._string.length},$index:function(e,t){return w.JSString_methods.codeUnitAt$1(this._string,t)},$asEfficientLengthIterable:function(){return[M.int]},$asUnmodifiableListMixin:function(){return[M.int]},$asListMixin:function(){return[M.int]},$asIterable:function(){return[M.int]},$asList:function(){return[M.int]}},E.EfficientLengthIterable.prototype={},E.ListIterable.prototype={get$iterator:function(e){return new E.ListIterator(this,this.get$length(this),[E.getRuntimeTypeArgument(this,"ListIterable",0)])},get$isEmpty:function(e){return 0===this.get$length(this)},contains$1:function(e,t){var n,r=this.get$length(this);for(n=0;n<r;++n){if(T.$eq$(this.elementAt$1(0,n),t))return!0;if(r!==this.get$length(this))throw E.wrapException(M.ConcurrentModificationError$(this))}return!1},map$1$1:function(e,t,n){var r=E.getRuntimeTypeArgument(this,"ListIterable",0);return new E.MappedListIterable(this,E.functionTypeCheck(t,{func:1,ret:n,args:[r]}),[r,n])},skip$1:function(e,t){return E.SubListIterable$(this,t,null,E.getRuntimeTypeArgument(this,"ListIterable",0))},toList$1$growable:function(e,t){var n,r,i=new Array(this.get$length(this));for(i.fixed$length=Array,n=E.setRuntimeTypeInfo(i,[E.getRuntimeTypeArgument(this,"ListIterable",0)]),r=0;r<this.get$length(this);++r)w.JSArray_methods.$indexSet(n,r,this.elementAt$1(0,r));return n}},E.SubListIterable.prototype={get$_endIndex:function(){return T.get$length$asx(this.__internal$_iterable)},get$_startIndex:function(){var e=T.get$length$asx(this.__internal$_iterable),t=this._start;return t>e?e:t},get$length:function(e){var t=T.get$length$asx(this.__internal$_iterable),n=this._start;return n>=t?0:t-n},elementAt$1:function(e,t){var n,r=this.get$_startIndex()+t;if(t>=0){if("number"!=typeof(n=this.get$_endIndex()))return E.iae(n);n=r>=n}else n=!0;if(n)throw E.wrapException(M.IndexError$(t,this,"index",null,null));return T.elementAt$1$ax(this.__internal$_iterable,r)},skip$1:function(e,t){return M.RangeError_checkNotNegative(t,"count"),E.SubListIterable$(this.__internal$_iterable,this._start+t,this._endOrLength,E.getTypeArgumentByIndex(this,0))},toList$1$growable:function(e,t){var n,r,i,o=this._start,a=this.__internal$_iterable,s=T.getInterceptor$asx(a),l=s.get$length(a),c=l-o;for(c<0&&(c=0),(n=new Array(c)).fixed$length=Array,r=E.setRuntimeTypeInfo(n,this.$ti),i=0;i<c;++i)if(w.JSArray_methods.$indexSet(r,i,s.elementAt$1(a,o+i)),s.get$length(a)<l)throw E.wrapException(M.ConcurrentModificationError$(this));return r}},E.ListIterator.prototype={get$current:function(){return this.__internal$_current},moveNext$0:function(){var e,t=this.__internal$_iterable,n=T.getInterceptor$asx(t),r=n.get$length(t);if(this.__internal$_length!==r)throw E.wrapException(M.ConcurrentModificationError$(t));return(e=this.__internal$_index)>=r?(this.set$__internal$_current(null),!1):(this.set$__internal$_current(n.elementAt$1(t,e)),++this.__internal$_index,!0)},set$__internal$_current:function(e){this.__internal$_current=E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(this,0))},$isIterator:1},E.MappedIterable.prototype={get$iterator:function(e){return new E.MappedIterator(T.get$iterator$ax(this.__internal$_iterable),this._f,this.$ti)},get$length:function(e){return T.get$length$asx(this.__internal$_iterable)},get$isEmpty:function(e){return T.get$isEmpty$asx(this.__internal$_iterable)},elementAt$1:function(e,t){return this._f.call$1(T.elementAt$1$ax(this.__internal$_iterable,t))},$asIterable:function(e,t){return[t]}},E.EfficientLengthMappedIterable.prototype={$isEfficientLengthIterable:1,$asEfficientLengthIterable:function(e,t){return[t]}},E.MappedIterator.prototype={moveNext$0:function(){var e=this._iterator;return e.moveNext$0()?(this.set$__internal$_current(this._f.call$1(e.get$current())),!0):(this.set$__internal$_current(null),!1)},get$current:function(){return this.__internal$_current},set$__internal$_current:function(e){this.__internal$_current=E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(this,1))},$asIterator:function(e,t){return[t]}},E.MappedListIterable.prototype={get$length:function(e){return T.get$length$asx(this._source)},elementAt$1:function(e,t){return this._f.call$1(T.elementAt$1$ax(this._source,t))},$asEfficientLengthIterable:function(e,t){return[t]},$asListIterable:function(e,t){return[t]},$asIterable:function(e,t){return[t]}},E.WhereIterable.prototype={get$iterator:function(e){return new E.WhereIterator(T.get$iterator$ax(this.__internal$_iterable),this._f,this.$ti)},map$1$1:function(e,t,n){var r=E.getTypeArgumentByIndex(this,0);return new E.MappedIterable(this,E.functionTypeCheck(t,{func:1,ret:n,args:[r]}),[r,n])}},E.WhereIterator.prototype={moveNext$0:function(){var e,t;for(e=this._iterator,t=this._f;e.moveNext$0();)if(E.boolConversionCheck(t.call$1(e.get$current())))return!0;return!1},get$current:function(){return this._iterator.get$current()}},E.SkipIterable.prototype={skip$1:function(e,t){return M.RangeError_checkNotNegative(t,"count"),new E.SkipIterable(this.__internal$_iterable,this._skipCount+t,this.$ti)},get$iterator:function(e){return new E.SkipIterator(T.get$iterator$ax(this.__internal$_iterable),this._skipCount,this.$ti)}},E.EfficientLengthSkipIterable.prototype={get$length:function(e){var t=T.get$length$asx(this.__internal$_iterable)-this._skipCount;return t>=0?t:0},skip$1:function(e,t){return M.RangeError_checkNotNegative(t,"count"),new E.EfficientLengthSkipIterable(this.__internal$_iterable,this._skipCount+t,this.$ti)},$isEfficientLengthIterable:1},E.SkipIterator.prototype={moveNext$0:function(){var e,t;for(e=this._iterator,t=0;t<this._skipCount;++t)e.moveNext$0();return this._skipCount=0,e.moveNext$0()},get$current:function(){return this._iterator.get$current()}},E.EmptyIterable.prototype={get$iterator:function(e){return w.C_EmptyIterator},get$isEmpty:function(e){return!0},get$length:function(e){return 0},elementAt$1:function(e,t){throw E.wrapException(M.RangeError$range(t,0,0,"index",null))},contains$1:function(e,t){return!1},map$1$1:function(e,t,n){return E.functionTypeCheck(t,{func:1,ret:n,args:[E.getTypeArgumentByIndex(this,0)]}),new E.EmptyIterable([n])},skip$1:function(e,t){return M.RangeError_checkNotNegative(t,"count"),this}},E.EmptyIterator.prototype={moveNext$0:function(){return!1},get$current:function(){},$isIterator:1},E.FixedLengthListMixin.prototype={set$length:function(e,t){throw E.wrapException(M.UnsupportedError$("Cannot change the length of a fixed-length list"))},add$1:function(e,t){throw E.assertSubtypeOfRuntimeType(t,E.getRuntimeTypeArgumentIntercepted(this,e,"FixedLengthListMixin",0)),E.wrapException(M.UnsupportedError$("Cannot add to a fixed-length list"))}},E.UnmodifiableListMixin.prototype={$indexSet:function(e,t,n){throw E.assertSubtypeOfRuntimeType(n,E.getRuntimeTypeArgument(this,"UnmodifiableListMixin",0)),E.wrapException(M.UnsupportedError$("Cannot modify an unmodifiable list"))},set$length:function(e,t){throw E.wrapException(M.UnsupportedError$("Cannot change the length of an unmodifiable list"))},add$1:function(e,t){throw E.assertSubtypeOfRuntimeType(t,E.getRuntimeTypeArgument(this,"UnmodifiableListMixin",0)),E.wrapException(M.UnsupportedError$("Cannot add to an unmodifiable list"))}},E.UnmodifiableListBase.prototype={},E.Symbol.prototype={get$hashCode:function(e){var t=this._hashCode;return null!=t||(t=536870911&664597*T.get$hashCode$(this.__internal$_name),this._hashCode=t),t},toString$0:function(e){return'Symbol("'+E.S(this.__internal$_name)+'")'},$eq:function(e,t){return null!=t&&(t instanceof E.Symbol&&this.__internal$_name==t.__internal$_name)},$isSymbol0:1},E.__CastListBase__CastIterableBase_ListMixin.prototype={},E.ConstantMapView.prototype={},E.ConstantMap.prototype={cast$2$0:function(e,t,n){return M.Map_castFrom(this,E.getTypeArgumentByIndex(this,0),E.getTypeArgumentByIndex(this,1),t,n)},get$isEmpty:function(e){return 0===this.get$length(this)},toString$0:function(e){return M.MapBase_mapToString(this)},$indexSet:function(e,t,n){return E.assertSubtypeOfRuntimeType(t,E.getTypeArgumentByIndex(this,0)),E.assertSubtypeOfRuntimeType(n,E.getTypeArgumentByIndex(this,1)),E.ConstantMap__throwUnmodifiable()},$isMap:1},E.ConstantStringMap.prototype={get$length:function(e){return this.__js_helper$_length},containsKey$1:function(e){return"string"==typeof e&&("__proto__"!==e&&this._jsObject.hasOwnProperty(e))},$index:function(e,t){if(this.containsKey$1(t))return this._fetch$1(t)},_fetch$1:function(e){return this._jsObject[E.stringTypeCheck(e)]},forEach$1:function(e,t){var n,r,i,o,a=E.getTypeArgumentByIndex(this,1);for(E.functionTypeCheck(t,{func:1,ret:-1,args:[E.getTypeArgumentByIndex(this,0),a]}),r=(n=this.__js_helper$_keys).length,i=0;i<r;++i)o=n[i],t.call$2(o,E.assertSubtypeOfRuntimeType(this._fetch$1(o),a))},get$keys:function(){return new E._ConstantMapKeyIterable(this,[E.getTypeArgumentByIndex(this,0)])}},E._ConstantMapKeyIterable.prototype={get$iterator:function(e){var t=this.__js_helper$_map.__js_helper$_keys;return new T.ArrayIterator(t,t.length,[E.getTypeArgumentByIndex(t,0)])},get$length:function(e){return this.__js_helper$_map.__js_helper$_keys.length}},E.GeneralConstantMap.prototype={_getMap$0:function(){var e=this.$map;return null==e&&(e=new E.JsLinkedHashMap(this.$ti),E.fillLiteralMap(this._jsData,e),this.$map=e),e},containsKey$1:function(e){return this._getMap$0().containsKey$1(e)},$index:function(e,t){return this._getMap$0().$index(0,t)},forEach$1:function(e,t){E.functionTypeCheck(t,{func:1,ret:-1,args:[E.getTypeArgumentByIndex(this,0),E.getTypeArgumentByIndex(this,1)]}),this._getMap$0().forEach$1(0,t)},get$keys:function(){var e=this._getMap$0();return new E.LinkedHashMapKeyIterable(e,[E.getTypeArgumentByIndex(e,0)])},get$length:function(e){return this._getMap$0().__js_helper$_length}},E.JSInvocationMirror.prototype={get$memberName:function(){return this._memberName},get$positionalArguments:function(){var e,t,n,r;if(1===this._kind)return w.List_empty0;if(0===(t=(e=this._arguments).length-this._namedArgumentNames.length-this._typeArgumentCount))return w.List_empty0;for(n=[],r=0;r<t;++r){if(r>=e.length)return E.ioore(e,r);n.push(e[r])}return n.fixed$length=Array,n.immutable$list=Array,n},get$namedArguments:function(){var e,t,n,r,i,o,a,s,l;if(0!==this._kind)return w.Map_empty;if(t=(e=this._namedArgumentNames).length,r=(n=this._arguments).length-t-this._typeArgumentCount,0===t)return w.Map_empty;for(i=M.Symbol0,o=new E.JsLinkedHashMap([i,null]),a=0;a<t;++a){if(a>=e.length)return E.ioore(e,a);if(s=e[a],(l=r+a)<0||l>=n.length)return E.ioore(n,l);o.$indexSet(0,new E.Symbol(s),n[l])}return new E.ConstantMapView(o,[i,null])},$isInvocation:1},E.Primitives_functionNoSuchMethod_closure.prototype={call$2:function(e,t){var n;E.stringTypeCheck(e),(n=this._box_0).names=n.names+"$"+E.S(e),w.JSArray_methods.add$1(this.namedArgumentList,e),w.JSArray_methods.add$1(this.$arguments,t),++n.argumentCount},$signature:38},E.TypeErrorDecoder.prototype={matchTypeError$1:function(e){var t,n,r=new RegExp(this._pattern).exec(e);if(null!=r)return t=Object.create(null),-1!==(n=this._arguments)&&(t.arguments=r[n+1]),-1!==(n=this._argumentsExpr)&&(t.argumentsExpr=r[n+1]),-1!==(n=this._expr)&&(t.expr=r[n+1]),-1!==(n=this._method)&&(t.method=r[n+1]),-1!==(n=this._receiver)&&(t.receiver=r[n+1]),t}},E.NullError.prototype={toString$0:function(e){var t=this._method;return null==t?"NoSuchMethodError: "+E.S(this._message):"NoSuchMethodError: method not found: '"+t+"' on null"}},E.JsNoSuchMethodError.prototype={toString$0:function(e){var t,n="NoSuchMethodError: method not found: '",r=this._method;return null==r?"NoSuchMethodError: "+E.S(this._message):null==(t=this._receiver)?n+r+"' ("+E.S(this._message)+")":n+r+"' on '"+t+"' ("+E.S(this._message)+")"}},E.UnknownJsTypeError.prototype={toString$0:function(e){var t=this._message;return 0===t.length?"Error":"Error: "+t}},E.ExceptionAndStackTrace.prototype={},E.unwrapException_saveStackTrace.prototype={call$1:function(e){return T.getInterceptor$(e).$isError&&null==e.$thrownJsError&&(e.$thrownJsError=this.ex),e},$signature:4},E._StackTrace.prototype={toString$0:function(e){var t,n=this._trace;return null!=n?n:(t=null!==(n=this._exception)&&"object"==typeof n?n.stack:null,this._trace=null==t?"":t)},$isStackTrace:1},E.Closure.prototype={toString$0:function(e){var t=this.constructor,n=null==t?null:t.name;return"Closure '"+E.unminifyOrTag(null==n?"unknown":n)+"'"},$isFunction:1,get$$call:function(){return this},"call*":"call$1",$requiredArgCount:1,$defaultValues:null},E.TearOffClosure.prototype={},E.StaticClosure.prototype={toString$0:function(e){var t=this.$static_name;return null==t?"Closure of unknown static method":"Closure '"+E.unminifyOrTag(t)+"'"}},E.BoundClosure.prototype={$eq:function(e,t){return null!=t&&(this===t||t instanceof E.BoundClosure&&(this._self===t._self&&this._target===t._target&&this._receiver===t._receiver))},get$hashCode:function(e){var t=this._receiver;return((null==t?E.Primitives_objectHashCode(this._self):"object"!=typeof t?T.get$hashCode$(t):E.Primitives_objectHashCode(t))^E.Primitives_objectHashCode(this._target))>>>0},toString$0:function(e){var t=this._receiver;return null==t&&(t=this._self),"Closure '"+E.S(this._name)+"' of Instance of '"+E.S(E.Primitives_objectTypeName(t))+"'"}},E.TypeErrorImplementation.prototype={toString$0:function(e){return this.message}},E.CastErrorImplementation.prototype={toString$0:function(e){return this.message}},E.RuntimeError.prototype={toString$0:function(e){return"RuntimeError: "+E.S(this.message)}},E._AssertionError.prototype={toString$0:function(e){return"Assertion failed: "+M.Error_safeToString(this.message)}},E.TypeImpl.prototype={get$_typeName:function(){var e=this.__typeName;return null==e?this.__typeName=E.runtimeTypeToString(this._rti):e},toString$0:function(e){return this.get$_typeName()},get$hashCode:function(e){var t=this._hashCode;return null==t?this._hashCode=w.JSString_methods.get$hashCode(this.get$_typeName()):t},$eq:function(e,t){return null!=t&&(t instanceof E.TypeImpl&&this.get$_typeName()===t.get$_typeName())},$isType:1},E.JsLinkedHashMap.prototype={get$length:function(e){return this.__js_helper$_length},get$isEmpty:function(e){return 0===this.__js_helper$_length},get$keys:function(){return new E.LinkedHashMapKeyIterable(this,[E.getTypeArgumentByIndex(this,0)])},get$values:function(){var e=E.getTypeArgumentByIndex(this,0);return E.MappedIterable_MappedIterable(new E.LinkedHashMapKeyIterable(this,[e]),new E.JsLinkedHashMap_values_closure(this),e,E.getTypeArgumentByIndex(this,1))},containsKey$1:function(e){var t,n;return"string"==typeof e?null!=(t=this.__js_helper$_strings)&&this._containsTableEntry$2(t,e):"number"==typeof e&&(67108863&e)===e?null!=(n=this.__js_helper$_nums)&&this._containsTableEntry$2(n,e):this.internalContainsKey$1(e)},internalContainsKey$1:function(e){var t=this.__js_helper$_rest;return null!=t&&this.internalFindBucketIndex$2(this._getTableBucket$2(t,67108863&T.get$hashCode$(e)),e)>=0},$index:function(e,t){var n,r,i;if("string"==typeof t){if(null==(n=this.__js_helper$_strings))return;return null==(r=this._getTableCell$2(n,t))?null:r.hashMapCellValue}if("number"==typeof t&&(67108863&t)===t){if(null==(i=this.__js_helper$_nums))return;return null==(r=this._getTableCell$2(i,t))?null:r.hashMapCellValue}return this.internalGet$1(t)},internalGet$1:function(e){var t,n,r=this.__js_helper$_rest;if(null!=r&&(t=this._getTableBucket$2(r,67108863&T.get$hashCode$(e)),!((n=this.internalFindBucketIndex$2(t,e))<0)))return t[n].hashMapCellValue},$indexSet:function(e,t,n){var r,i,o,a,s,l;E.assertSubtypeOfRuntimeType(t,E.getTypeArgumentByIndex(this,0)),E.assertSubtypeOfRuntimeType(n,E.getTypeArgumentByIndex(this,1)),"string"==typeof t?(r=this.__js_helper$_strings,this.__js_helper$_addHashTableEntry$3(null==r?this.__js_helper$_strings=this._newHashTable$0():r,t,n)):"number"==typeof t&&(67108863&t)===t?(i=this.__js_helper$_nums,this.__js_helper$_addHashTableEntry$3(null==i?this.__js_helper$_nums=this._newHashTable$0():i,t,n)):(null==(o=this.__js_helper$_rest)&&(o=this.__js_helper$_rest=this._newHashTable$0()),a=67108863&T.get$hashCode$(t),null==(s=this._getTableBucket$2(o,a))?this._setTableEntry$3(o,a,[this._newLinkedCell$2(t,n)]):(l=this.internalFindBucketIndex$2(s,t))>=0?s[l].hashMapCellValue=n:s.push(this._newLinkedCell$2(t,n)))},putIfAbsent$2:function(e,t){var n;return E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(this,0)),E.functionTypeCheck(t,{func:1,ret:E.getTypeArgumentByIndex(this,1)}),this.containsKey$1(e)?this.$index(0,e):(n=t.call$0(),this.$indexSet(0,e,n),n)},forEach$1:function(e,t){var n,r;for(E.functionTypeCheck(t,{func:1,ret:-1,args:[E.getTypeArgumentByIndex(this,0),E.getTypeArgumentByIndex(this,1)]}),n=this._first,r=this._modifications;null!=n;){if(t.call$2(n.hashMapCellKey,n.hashMapCellValue),r!==this._modifications)throw E.wrapException(M.ConcurrentModificationError$(this));n=n._next}},__js_helper$_addHashTableEntry$3:function(e,t,n){var r;E.assertSubtypeOfRuntimeType(t,E.getTypeArgumentByIndex(this,0)),E.assertSubtypeOfRuntimeType(n,E.getTypeArgumentByIndex(this,1)),null==(r=this._getTableCell$2(e,t))?this._setTableEntry$3(e,t,this._newLinkedCell$2(t,n)):r.hashMapCellValue=n},_newLinkedCell$2:function(e,t){var n=new E.LinkedHashMapCell(E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(this,0)),E.assertSubtypeOfRuntimeType(t,E.getTypeArgumentByIndex(this,1)));return null==this._first?this._first=this._last=n:this._last=this._last._next=n,++this.__js_helper$_length,this._modifications=this._modifications+1&67108863,n},internalFindBucketIndex$2:function(e,t){var n,r;if(null==e)return-1;for(n=e.length,r=0;r<n;++r)if(T.$eq$(e[r].hashMapCellKey,t))return r;return-1},toString$0:function(e){return M.MapBase_mapToString(this)},_getTableCell$2:function(e,t){return e[t]},_getTableBucket$2:function(e,t){return e[t]},_setTableEntry$3:function(e,t,n){e[t]=n},_deleteTableEntry$2:function(e,t){delete e[t]},_containsTableEntry$2:function(e,t){return null!=this._getTableCell$2(e,t)},_newHashTable$0:function(){var e="<non-identifier-key>",t=Object.create(null);return this._setTableEntry$3(t,e,t),this._deleteTableEntry$2(t,e),t},$isLinkedHashMap:1},E.JsLinkedHashMap_values_closure.prototype={call$1:function(e){var t=this.$this;return t.$index(0,E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(t,0)))},$signature:function(){var e=this.$this;return{func:1,ret:E.getTypeArgumentByIndex(e,1),args:[E.getTypeArgumentByIndex(e,0)]}}},E.LinkedHashMapCell.prototype={},E.LinkedHashMapKeyIterable.prototype={get$length:function(e){return this.__js_helper$_map.__js_helper$_length},get$isEmpty:function(e){return 0===this.__js_helper$_map.__js_helper$_length},get$iterator:function(e){var t=this.__js_helper$_map,n=new E.LinkedHashMapKeyIterator(t,t._modifications,this.$ti);return n._cell=t._first,n},contains$1:function(e,t){return this.__js_helper$_map.containsKey$1(t)}},E.LinkedHashMapKeyIterator.prototype={get$current:function(){return this.__js_helper$_current},moveNext$0:function(){var e=this.__js_helper$_map;if(this._modifications!==e._modifications)throw E.wrapException(M.ConcurrentModificationError$(e));return null==(e=this._cell)?(this.set$__js_helper$_current(null),!1):(this.set$__js_helper$_current(e.hashMapCellKey),this._cell=this._cell._next,!0)},set$__js_helper$_current:function(e){this.__js_helper$_current=E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(this,0))},$isIterator:1},E.initHooks_closure.prototype={call$1:function(e){return this.getTag(e)},$signature:4},E.initHooks_closure0.prototype={call$2:function(e,t){return this.getUnknownTag(e,t)},$signature:42},E.initHooks_closure1.prototype={call$1:function(e){return this.prototypeForTag(E.stringTypeCheck(e))},$signature:41},E.JSSyntaxRegExp.prototype={toString$0:function(e){return"RegExp/"+this.pattern+"/"+this._nativeRegExp.flags},firstMatch$1:function(e){var t;if("string"!=typeof e&&E.throwExpression(E.argumentErrorValue(e)),null!=(t=this._nativeRegExp.exec(e)))return new E._MatchImplementation(t)},$isPattern:1},E._MatchImplementation.prototype={},E.NativeTypedData.prototype={_invalidPosition$3:function(e,t,n,r){var i=M.RangeError$range(t,0,n,r,null);throw E.wrapException(i)},_checkPosition$3:function(e,t,n,r){(t>>>0!==t||t>n)&&this._invalidPosition$3(e,t,n,r)}},E.NativeByteData.prototype={$isByteData:1},E.NativeTypedArray.prototype={get$length:function(e){return e.length},_setRangeFast$4:function(e,t,n,r,i){var o,a,s=e.length;if(this._checkPosition$3(e,t,s,"start"),this._checkPosition$3(e,n,s,"end"),t>n)throw E.wrapException(M.RangeError$range(t,0,n,null,null));if(o=n-t,i<0)throw E.wrapException(M.ArgumentError$(i));if((a=r.length)-i<o)throw E.wrapException(M.StateError$("Not enough elements"));0===i&&a===o||(r=r.subarray(i,i+o)),e.set(r,t)},$isJavaScriptIndexingBehavior:1,$asJavaScriptIndexingBehavior:function(){}},E.NativeTypedArrayOfDouble.prototype={$index:function(e,t){return E._checkValidIndex(t,e,e.length),e[t]},$indexSet:function(e,t,n){E.doubleTypeCheck(n),E._checkValidIndex(t,e,e.length),e[t]=n},$isEfficientLengthIterable:1,$asEfficientLengthIterable:function(){return[M.double]},$asFixedLengthListMixin:function(){return[M.double]},$asListMixin:function(){return[M.double]},$isIterable:1,$asIterable:function(){return[M.double]},$isList:1,$asList:function(){return[M.double]}},E.NativeTypedArrayOfInt.prototype={$indexSet:function(e,t,n){E.intTypeCheck(n),E._checkValidIndex(t,e,e.length),e[t]=n},setRange$4:function(e,t,n,r,i){E.assertSubtype(r,"$isIterable",[M.int],"$asIterable"),T.getInterceptor$(r).$isNativeTypedArrayOfInt?this._setRangeFast$4(e,t,n,r,i):this.super$ListMixin$setRange(e,t,n,r,i)},setRange$3:function(e,t,n,r){return this.setRange$4(e,t,n,r,0)},$isEfficientLengthIterable:1,$asEfficientLengthIterable:function(){return[M.int]},$asFixedLengthListMixin:function(){return[M.int]},$asListMixin:function(){return[M.int]},$isIterable:1,$asIterable:function(){return[M.int]},$isList:1,$asList:function(){return[M.int]}},E.NativeFloat32List.prototype={sublist$2:function(e,t,n){return new Float32Array(e.subarray(t,E._checkValidRange(t,n,e.length)))},$isFloat32List:1},E.NativeFloat64List.prototype={sublist$2:function(e,t,n){return new Float64Array(e.subarray(t,E._checkValidRange(t,n,e.length)))}},E.NativeInt16List.prototype={$index:function(e,t){return E._checkValidIndex(t,e,e.length),e[t]},sublist$2:function(e,t,n){return new Int16Array(e.subarray(t,E._checkValidRange(t,n,e.length)))}},E.NativeInt32List.prototype={$index:function(e,t){return E._checkValidIndex(t,e,e.length),e[t]},sublist$2:function(e,t,n){return new Int32Array(e.subarray(t,E._checkValidRange(t,n,e.length)))}},E.NativeInt8List.prototype={$index:function(e,t){return E._checkValidIndex(t,e,e.length),e[t]},sublist$2:function(e,t,n){return new Int8Array(e.subarray(t,E._checkValidRange(t,n,e.length)))}},E.NativeUint16List.prototype={$index:function(e,t){return E._checkValidIndex(t,e,e.length),e[t]},sublist$2:function(e,t,n){return new Uint16Array(e.subarray(t,E._checkValidRange(t,n,e.length)))}},E.NativeUint32List.prototype={$index:function(e,t){return E._checkValidIndex(t,e,e.length),e[t]},sublist$2:function(e,t,n){return new Uint32Array(e.subarray(t,E._checkValidRange(t,n,e.length)))},$isUint32List:1},E.NativeUint8ClampedList.prototype={get$length:function(e){return e.length},$index:function(e,t){return E._checkValidIndex(t,e,e.length),e[t]},sublist$2:function(e,t,n){return new Uint8ClampedArray(e.subarray(t,E._checkValidRange(t,n,e.length)))}},E.NativeUint8List.prototype={get$length:function(e){return e.length},$index:function(e,t){return E._checkValidIndex(t,e,e.length),e[t]},sublist$2:function(e,t,n){return new Uint8Array(e.subarray(t,E._checkValidRange(t,n,e.length)))},$isNativeUint8List:1,$isUint8List:1},E._NativeTypedArrayOfDouble_NativeTypedArray_ListMixin.prototype={},E._NativeTypedArrayOfDouble_NativeTypedArray_ListMixin_FixedLengthListMixin.prototype={},E._NativeTypedArrayOfInt_NativeTypedArray_ListMixin.prototype={},E._NativeTypedArrayOfInt_NativeTypedArray_ListMixin_FixedLengthListMixin.prototype={},M._AsyncRun__initializeScheduleImmediate_internalCallback.prototype={call$1:function(e){var t=this._box_0,n=t.storedCallback;t.storedCallback=null,n.call$0()},$signature:13},M._AsyncRun__initializeScheduleImmediate_closure.prototype={call$1:function(e){var t,n;this._box_0.storedCallback=E.functionTypeCheck(e,{func:1,ret:-1}),t=this.div,n=this.span,t.firstChild?t.removeChild(n):t.appendChild(n)},$signature:106},M._AsyncRun__scheduleImmediateJsOverride_internalCallback.prototype={call$0:function(){this.callback.call$0()},"call*":"call$0",$requiredArgCount:0,$signature:2},M._AsyncRun__scheduleImmediateWithSetImmediate_internalCallback.prototype={call$0:function(){this.callback.call$0()},"call*":"call$0",$requiredArgCount:0,$signature:2},M._TimerImpl.prototype={_TimerImpl$2:function(e,t){if(null==i.setTimeout)throw E.wrapException(M.UnsupportedError$("`setTimeout()` not found."));i.setTimeout(E.convertDartClosureToJS(new M._TimerImpl_internalCallback(this,t),0),e)}},M._TimerImpl_internalCallback.prototype={call$0:function(){this.callback.call$0()},"call*":"call$0",$requiredArgCount:0,$signature:1},M._AsyncAwaitCompleter.prototype={complete$1:function(e){var t,n,r=E.getTypeArgumentByIndex(this,0);E.futureOrCheck(e,{futureOr:1,type:r}),t=!this.isSync||E.checkSubtype(e,"$isFuture",this.$ti,"$asFuture"),n=this._future,t?n._asyncComplete$1(e):n._completeWithValue$1(E.assertSubtypeOfRuntimeType(e,r))},completeError$2:function(e,t){var n=this._future;this.isSync?n._completeError$2(e,t):n._asyncCompleteError$2(e,t)},$isCompleter:1},M._awaitOnObject_closure.prototype={call$1:function(e){return this.bodyFunction.call$2(0,e)},$signature:73},M._awaitOnObject_closure0.prototype={call$2:function(e,t){this.bodyFunction.call$2(1,new E.ExceptionAndStackTrace(e,E.interceptedTypeCheck(t,"$isStackTrace")))},"call*":"call$2",$requiredArgCount:2,$signature:74},M._wrapJsFunctionForAsync_closure.prototype={call$2:function(e,t){this.$protected(E.intTypeCheck(e),t)},$signature:81},M._IterationMarker.prototype={toString$0:function(e){return"IterationMarker("+this.state+", "+E.S(this.value)+")"}},M._SyncStarIterator.prototype={get$current:function(){var e=this._nestedIterator;return null==e?this._async$_current:E.assertSubtypeOfRuntimeType(e.get$current(),E.getTypeArgumentByIndex(this,0))},moveNext$0:function(){for(var e,t,n,r;;){if(null!=(e=this._nestedIterator)){if(e.moveNext$0())return!0;this._nestedIterator=null}if(!((t=function(e,t,n){for(var r,i=0;;)try{return e(i,r)}catch(e){r=e,i=1}}(this._body))instanceof M._IterationMarker))return this.set$_async$_current(t),!0;if(2!==(n=t.state)){if(e=t.value,3===n)throw e;(r=T.get$iterator$ax(e)).$is_SyncStarIterator?(null==(e=this._suspendedBodies)&&(e=this._suspendedBodies=[]),w.JSArray_methods.add$1(e,this._body),this._body=r._body):this._nestedIterator=r}else{if(null==(e=this._suspendedBodies)||0===e.length)return this.set$_async$_current(null),!1;if(0>=e.length)return E.ioore(e,-1);this._body=e.pop()}}return!1},set$_async$_current:function(e){this._async$_current=E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(this,0))},$isIterator:1},M._SyncStarIterable.prototype={get$iterator:function(e){return new M._SyncStarIterator(this._outerHelper(),this.$ti)}},M.Future.prototype={},M._Completer.prototype={completeError$2:function(e,t){var n;if(null==e&&(e=new M.NullThrownError),0!==(n=this.future)._state)throw E.wrapException(M.StateError$("Future already completed"));n._asyncCompleteError$2(e,t)},completeError$1:function(e){return this.completeError$2(e,null)},$isCompleter:1},M._AsyncCompleter.prototype={complete$1:function(e){var t;if(E.futureOrCheck(e,{futureOr:1,type:E.getTypeArgumentByIndex(this,0)}),0!==(t=this.future)._state)throw E.wrapException(M.StateError$("Future already completed"));t._asyncComplete$1(e)},complete$0:function(){return this.complete$1(null)}},M._FutureListener.prototype={matchesErrorTest$1:function(e){return 6!=(15&this.state)||this.result._zone.runUnary$2$2(E.functionTypeCheck(this.callback,{func:1,ret:M.bool,args:[M.Object]}),e.error,M.bool,M.Object)},handleError$1:function(e){var t=this.errorCallback,n=M.Object,r={futureOr:1,type:E.getTypeArgumentByIndex(this,1)},i=this.result._zone;return E.functionTypeTest(t,{func:1,args:[M.Object,M.StackTrace]})?E.futureOrCheck(i.runBinary$3$3(t,e.error,e.stackTrace,null,n,M.StackTrace),r):E.futureOrCheck(i.runUnary$2$2(E.functionTypeCheck(t,{func:1,args:[M.Object]}),e.error,null,n),r)}},M._Future.prototype={then$1$2$onError:function(e,t,n,r){var i,o,a,s=E.getTypeArgumentByIndex(this,0);return E.functionTypeCheck(t,{func:1,ret:{futureOr:1,type:r},args:[s]}),(i=K.Zone__current)!==w.C__RootZone&&(E.functionTypeCheck(t,{func:1,ret:{futureOr:1,type:r},args:[s]}),null!=n&&(n=M._registerErrorHandler(n,i))),o=new M._Future(K.Zone__current,[r]),a=null==n?1:3,this._addListener$1(new M._FutureListener(o,a,t,n,[s,r])),o},then$1$1:function(e,t,n){return this.then$1$2$onError(e,t,null,n)},_thenAwait$1$2:function(e,t,n){var r,i=E.getTypeArgumentByIndex(this,0);return E.functionTypeCheck(e,{func:1,ret:{futureOr:1,type:n},args:[i]}),r=new M._Future(K.Zone__current,[n]),this._addListener$1(new M._FutureListener(r,16|(null==t?1:3),e,t,[i,n])),r},whenComplete$1:function(e){var t,n;return E.functionTypeCheck(e,{func:1}),t=K.Zone__current,n=new M._Future(t,this.$ti),t!==w.C__RootZone&&(e=E.functionTypeCheck(e,{func:1,ret:null})),t=E.getTypeArgumentByIndex(this,0),this._addListener$1(new M._FutureListener(n,8,e,null,[t,t])),n},_setValue$1:function(e){E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(this,0)),this._state=4,this._resultOrListeners=e},_addListener$1:function(e){var t,n=this._state;if(n<=1)e._nextListener=E.interceptedTypeCheck(this._resultOrListeners,"$is_FutureListener"),this._resultOrListeners=e;else{if(2===n){if((n=(t=E.interceptedTypeCheck(this._resultOrListeners,"$is_Future"))._state)<4)return void t._addListener$1(e);this._state=n,this._resultOrListeners=t._resultOrListeners}M._rootScheduleMicrotask(null,null,this._zone,E.functionTypeCheck(new M._Future__addListener_closure(this,e),{func:1,ret:-1}))}},_prependListeners$1:function(e){var t,n,r,i,o,a={};if(a.listeners=e,null!=e)if((t=this._state)<=1){if(n=E.interceptedTypeCheck(this._resultOrListeners,"$is_FutureListener"),r=this._resultOrListeners=e,null!=n){for(;null!=(i=r._nextListener);r=i);r._nextListener=n}}else{if(2===t){if((t=(o=E.interceptedTypeCheck(this._resultOrListeners,"$is_Future"))._state)<4)return void o._prependListeners$1(e);this._state=t,this._resultOrListeners=o._resultOrListeners}a.listeners=this._reverseListeners$1(e),M._rootScheduleMicrotask(null,null,this._zone,E.functionTypeCheck(new M._Future__prependListeners_closure(a,this),{func:1,ret:-1}))}},_removeListeners$0:function(){var e=E.interceptedTypeCheck(this._resultOrListeners,"$is_FutureListener");return this._resultOrListeners=null,this._reverseListeners$1(e)},_reverseListeners$1:function(e){var t,n,r;for(t=e,n=null;null!=t;n=t,t=r)r=t._nextListener,t._nextListener=n;return n},_complete$1:function(e){var t,n,r=E.getTypeArgumentByIndex(this,0);E.futureOrCheck(e,{futureOr:1,type:r}),t=this.$ti,E.checkSubtype(e,"$isFuture",t,"$asFuture")?E.checkSubtype(e,"$is_Future",t,null)?M._Future__chainCoreFuture(e,this):M._Future__chainForeignFuture(e,this):(n=this._removeListeners$0(),E.assertSubtypeOfRuntimeType(e,r),this._state=4,this._resultOrListeners=e,M._Future__propagateToListeners(this,n))},_completeWithValue$1:function(e){var t;E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(this,0)),t=this._removeListeners$0(),this._state=4,this._resultOrListeners=e,M._Future__propagateToListeners(this,t)},_completeError$2:function(e,t){var n;E.interceptedTypeCheck(t,"$isStackTrace"),n=this._removeListeners$0(),this._state=8,this._resultOrListeners=new M.AsyncError(e,t),M._Future__propagateToListeners(this,n)},_completeError$1:function(e){return this._completeError$2(e,null)},_asyncComplete$1:function(e){E.futureOrCheck(e,{futureOr:1,type:E.getTypeArgumentByIndex(this,0)}),E.checkSubtype(e,"$isFuture",this.$ti,"$asFuture")?this._chainFuture$1(e):(this._state=1,M._rootScheduleMicrotask(null,null,this._zone,E.functionTypeCheck(new M._Future__asyncComplete_closure(this,e),{func:1,ret:-1})))},_chainFuture$1:function(e){var t=this.$ti;E.assertSubtype(e,"$isFuture",t,"$asFuture"),E.checkSubtype(e,"$is_Future",t,null)?8===e._state?(this._state=1,M._rootScheduleMicrotask(null,null,this._zone,E.functionTypeCheck(new M._Future__chainFuture_closure(this,e),{func:1,ret:-1}))):M._Future__chainCoreFuture(e,this):M._Future__chainForeignFuture(e,this)},_asyncCompleteError$2:function(e,t){E.interceptedTypeCheck(t,"$isStackTrace"),this._state=1,M._rootScheduleMicrotask(null,null,this._zone,E.functionTypeCheck(new M._Future__asyncCompleteError_closure(this,e,t),{func:1,ret:-1}))},$isFuture:1},M._Future__addListener_closure.prototype={call$0:function(){M._Future__propagateToListeners(this.$this,this.listener)},$signature:2},M._Future__prependListeners_closure.prototype={call$0:function(){M._Future__propagateToListeners(this.$this,this._box_0.listeners)},$signature:2},M._Future__chainForeignFuture_closure.prototype={call$1:function(e){var t=this.target;t._state=0,t._complete$1(e)},$signature:13},M._Future__chainForeignFuture_closure0.prototype={call$2:function(e,t){E.interceptedTypeCheck(t,"$isStackTrace"),this.target._completeError$2(e,t)},call$1:function(e){return this.call$2(e,null)},"call*":"call$2",$defaultValues:function(){return[null]},$signature:34},M._Future__chainForeignFuture_closure1.prototype={call$0:function(){this.target._completeError$2(this.e,this.s)},$signature:2},M._Future__asyncComplete_closure.prototype={call$0:function(){var e=this.$this;e._completeWithValue$1(E.assertSubtypeOfRuntimeType(this.value,E.getTypeArgumentByIndex(e,0)))},$signature:2},M._Future__chainFuture_closure.prototype={call$0:function(){M._Future__chainCoreFuture(this.value,this.$this)},$signature:2},M._Future__asyncCompleteError_closure.prototype={call$0:function(){this.$this._completeError$2(this.error,this.stackTrace)},$signature:2},M._Future__propagateToListeners_handleWhenCompleteCallback.prototype={call$0:function(){var e,t,n,r,i,o,a=null;try{a=(n=this.listener).result._zone.run$1$1(E.functionTypeCheck(n.callback,{func:1}),null)}catch(r){return e=E.unwrapException(r),t=E.getTraceFromException(r),this.hasError?(i=e,n=i=null==(n=E.interceptedTypeCheck(this._box_1.source._resultOrListeners,"$isAsyncError").error)?null==i:n===i):n=!1,(i=this._box_0).listenerValueOrError=n?E.interceptedTypeCheck(this._box_1.source._resultOrListeners,"$isAsyncError"):new M.AsyncError(e,t),void(i.listenerHasError=!0)}if(T.getInterceptor$(a).$isFuture){if(a instanceof M._Future&&a._state>=4)return void(8===a._state&&((n=this._box_0).listenerValueOrError=E.interceptedTypeCheck(a._resultOrListeners,"$isAsyncError"),n.listenerHasError=!0));o=this._box_1.source,(n=this._box_0).listenerValueOrError=T.then$1$1$x(a,new M._Future__propagateToListeners_handleWhenCompleteCallback_closure(o),null),n.listenerHasError=!1}},$signature:1},M._Future__propagateToListeners_handleWhenCompleteCallback_closure.prototype={call$1:function(e){return this.originalSource},$signature:40},M._Future__propagateToListeners_handleValueCallback.prototype={call$0:function(){var e,t,n,r,i,o,a;try{n=this.listener,r=E.getTypeArgumentByIndex(n,0),i=E.assertSubtypeOfRuntimeType(this.sourceResult,r),o=E.getTypeArgumentByIndex(n,1),this._box_0.listenerValueOrError=n.result._zone.runUnary$2$2(E.functionTypeCheck(n.callback,{func:1,ret:{futureOr:1,type:o},args:[r]}),i,{futureOr:1,type:o},r)}catch(a){e=E.unwrapException(a),t=E.getTraceFromException(a),(n=this._box_0).listenerValueOrError=new M.AsyncError(e,t),n.listenerHasError=!0}},$signature:1},M._Future__propagateToListeners_handleError.prototype={call$0:function(){var e,t,n,r,i,o,a,s;try{e=E.interceptedTypeCheck(this._box_1.source._resultOrListeners,"$isAsyncError"),r=this.listener,E.boolConversionCheck(r.matchesErrorTest$1(e))&&null!=r.errorCallback&&((i=this._box_0).listenerValueOrError=r.handleError$1(e),i.listenerHasError=!1)}catch(o){t=E.unwrapException(o),n=E.getTraceFromException(o),i=(r=E.interceptedTypeCheck(this._box_1.source._resultOrListeners,"$isAsyncError")).error,a=t,(s=this._box_0).listenerValueOrError=(null==i?null==a:i===a)?r:new M.AsyncError(t,n),s.listenerHasError=!0}},$signature:1},M._AsyncCallbackEntry.prototype={},M.Stream.prototype={get$length:function(e){var t={},n=new M._Future(K.Zone__current,[M.int]);return t.count=0,this.listen$4$cancelOnError$onDone$onError(new M.Stream_length_closure(t,this),!0,new M.Stream_length_closure0(t,n),n.get$_completeError()),n}},M.Stream_Stream$fromFuture_closure.prototype={call$1:function(e){var t=this.controller;t._async$_add$1(E.assertSubtypeOfRuntimeType(e,this.T)),t._closeUnchecked$0()},$signature:function(){return{func:1,ret:M.Null,args:[this.T]}}},M.Stream_Stream$fromFuture_closure0.prototype={call$2:function(e,t){var n,r=this.controller;E.interceptedTypeCheck(t,"$isStackTrace"),0!=(1&(n=r._state))?r._sendError$2(e,t):0==(3&n)&&r._ensurePendingEvents$0().add$1(0,new M._DelayedError(e,t)),r._closeUnchecked$0()},"call*":"call$2",$requiredArgCount:2,$signature:15},M.Stream_Stream$fromIterable_closure.prototype={call$0:function(){var e=this.elements;return new M._IterablePendingEvents(new T.ArrayIterator(e,1,[E.getTypeArgumentByIndex(e,0)]),[this.T])},$signature:function(){return{func:1,ret:[M._IterablePendingEvents,this.T]}}},M.Stream_length_closure.prototype={call$1:function(e){E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(this.$this,0)),++this._box_0.count},$signature:function(){return{func:1,ret:M.Null,args:[E.getTypeArgumentByIndex(this.$this,0)]}}},M.Stream_length_closure0.prototype={call$0:function(){this.future._complete$1(this._box_0.count)},$signature:2},M.StreamTransformerBase.prototype={},M._StreamController.prototype={get$_pendingEvents:function(){var e;return 0==(8&this._state)?E.assertSubtype(this._varData,"$is_PendingEvents",this.$ti,"$as_PendingEvents"):(e=this.$ti,E.assertSubtype(E.assertSubtype(this._varData,"$is_StreamControllerAddStreamState",e,"$as_StreamControllerAddStreamState").get$varData(),"$is_PendingEvents",e,"$as_PendingEvents"))},_ensurePendingEvents$0:function(){var e,t;return 0==(8&this._state)?(null==(e=this._varData)&&(e=this._varData=new M._StreamImplEvents(this.$ti)),E.assertSubtype(e,"$is_StreamImplEvents",this.$ti,"$as_StreamImplEvents")):(e=this.$ti,(t=E.assertSubtype(this._varData,"$is_StreamControllerAddStreamState",e,"$as_StreamControllerAddStreamState")).get$varData(),E.assertSubtype(t.get$varData(),"$is_StreamImplEvents",e,"$as_StreamImplEvents"))},get$_subscription:function(){var e;return 0!=(8&this._state)?(e=this.$ti,E.assertSubtype(E.assertSubtype(this._varData,"$is_StreamControllerAddStreamState",e,"$as_StreamControllerAddStreamState").get$varData(),"$is_ControllerSubscription",e,"$as_ControllerSubscription")):E.assertSubtype(this._varData,"$is_ControllerSubscription",this.$ti,"$as_ControllerSubscription")},_badEventState$0:function(){return 0!=(4&this._state)?new M.StateError("Cannot add event after closing"):new M.StateError("Cannot add event while adding a stream")},_ensureDoneFuture$0:function(){var e=this._doneFuture;return null==e&&(e=this._doneFuture=0!=(2&this._state)?K.$get$Future__nullFuture():new M._Future(K.Zone__current,[null])),e},add$1:function(e,t){if(E.assertSubtypeOfRuntimeType(t,E.getTypeArgumentByIndex(this,0)),this._state>=4)throw E.wrapException(this._badEventState$0());this._async$_add$1(t)},close$0:function(){var e=this._state;if(0!=(4&e))return this._ensureDoneFuture$0();if(e>=4)throw E.wrapException(this._badEventState$0());return this._closeUnchecked$0(),this._ensureDoneFuture$0()},_closeUnchecked$0:function(){var e=this._state|=4;0!=(1&e)?this._sendDone$0():0==(3&e)&&this._ensurePendingEvents$0().add$1(0,w.C__DelayedDone)},_async$_add$1:function(e){var t;E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(this,0)),0!=(1&(t=this._state))?this._sendData$1(e):0==(3&t)&&this._ensurePendingEvents$0().add$1(0,new M._DelayedData(e,this.$ti))},_subscribe$4:function(e,t,n,r){var i,o,a,s,l,c,u=E.getTypeArgumentByIndex(this,0);if(E.functionTypeCheck(e,{func:1,ret:-1,args:[u]}),E.functionTypeCheck(n,{func:1,ret:-1}),0!=(3&this._state))throw E.wrapException(M.StateError$("Stream has already been listened to."));return i=K.Zone__current,o=r?1:0,a=this.$ti,(s=new M._ControllerSubscription(this,i,o,a))._BufferingStreamSubscription$4(e,t,n,r,u),l=this.get$_pendingEvents(),0!=(8&(u=this._state|=1))?((c=E.assertSubtype(this._varData,"$is_StreamControllerAddStreamState",a,"$as_StreamControllerAddStreamState")).set$varData(s),c.resume$0()):this._varData=s,s._setPendingEvents$1(l),s._guardCallback$1(new M._StreamController__subscribe_closure(this)),s},_recordCancel$1:function(e){var t,n,r,i,o,a=this.$ti;if(E.assertSubtype(e,"$isStreamSubscription",a,"$asStreamSubscription"),t=null,0!=(8&this._state)&&(t=E.assertSubtype(this._varData,"$is_StreamControllerAddStreamState",a,"$as_StreamControllerAddStreamState").cancel$0()),this._varData=null,this._state=4294967286&this._state|2,null!=(a=this.onCancel))if(null==t)try{t=E.interceptedTypeCheck(a.call$0(),"$isFuture")}catch(i){n=E.unwrapException(i),r=E.getTraceFromException(i),(o=new M._Future(K.Zone__current,[null]))._asyncCompleteError$2(n,r),t=o}else t=t.whenComplete$1(a);return a=new M._StreamController__recordCancel_complete(this),null!=t?t=t.whenComplete$1(a):a.call$0(),t},set$onPause:function(e){this.onPause=E.functionTypeCheck(e,{func:1,ret:-1})},set$onResume:function(e){this.onResume=E.functionTypeCheck(e,{func:1,ret:-1})},set$onCancel:function(e){this.onCancel=E.functionTypeCheck(e,{func:1})},$isStreamController:1,$is_StreamControllerLifecycle:1,$is_EventDispatch:1,$isSink:1},M._StreamController__subscribe_closure.prototype={call$0:function(){M._runGuarded(this.$this.onListen)},$signature:2},M._StreamController__recordCancel_complete.prototype={call$0:function(){var e=this.$this._doneFuture;null!=e&&0===e._state&&e._asyncComplete$1(null)},$signature:1},M._SyncStreamControllerDispatch.prototype={_sendData$1:function(e){E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(this,0)),this.get$_subscription()._async$_add$1(e)},_sendError$2:function(e,t){this.get$_subscription()._addError$2(e,t)},_sendDone$0:function(){this.get$_subscription()._close$0()}},M._AsyncStreamControllerDispatch.prototype={_sendData$1:function(e){var t=E.getTypeArgumentByIndex(this,0);E.assertSubtypeOfRuntimeType(e,t),this.get$_subscription()._addPending$1(new M._DelayedData(e,[t]))},_sendDone$0:function(){this.get$_subscription()._addPending$1(w.C__DelayedDone)}},M._AsyncStreamController.prototype={},M._SyncStreamController.prototype={},M._ControllerStream.prototype={_createSubscription$4:function(e,t,n,r){return this._controller._subscribe$4(E.functionTypeCheck(e,{func:1,ret:-1,args:[E.getTypeArgumentByIndex(this,0)]}),t,E.functionTypeCheck(n,{func:1,ret:-1}),r)},get$hashCode:function(e){return(892482866^E.Primitives_objectHashCode(this._controller))>>>0},$eq:function(e,t){return null!=t&&(this===t||t instanceof M._ControllerStream&&t._controller===this._controller)}},M._ControllerSubscription.prototype={_onCancel$0:function(){return this._controller._recordCancel$1(this)},_onPause$0:function(){var e=this._controller,t=E.getTypeArgumentByIndex(e,0);E.assertSubtype(this,"$isStreamSubscription",[t],"$asStreamSubscription"),0!=(8&e._state)&&E.assertSubtype(e._varData,"$is_StreamControllerAddStreamState",[t],"$as_StreamControllerAddStreamState").pause$0(),M._runGuarded(e.onPause)},_onResume$0:function(){var e=this._controller,t=E.getTypeArgumentByIndex(e,0);E.assertSubtype(this,"$isStreamSubscription",[t],"$asStreamSubscription"),0!=(8&e._state)&&E.assertSubtype(e._varData,"$is_StreamControllerAddStreamState",[t],"$as_StreamControllerAddStreamState").resume$0(),M._runGuarded(e.onResume)}},M._BufferingStreamSubscription.prototype={_BufferingStreamSubscription$4:function(e,t,n,r,i){var o,a=E.getTypeArgumentByIndex(this,0);E.functionTypeCheck(e,{func:1,ret:-1,args:[a]}),this.set$_onData(E.functionTypeCheck(e,{func:1,ret:null,args:[a]})),o=null==t?M.async___nullErrorHandler$closure():t,E.functionTypeTest(o,{func:1,ret:-1,args:[M.Object,M.StackTrace]})?this._onError=this._zone.registerBinaryCallback$3$1(o,null,M.Object,M.StackTrace):E.functionTypeTest(o,{func:1,ret:-1,args:[M.Object]})?this._onError=E.functionTypeCheck(o,{func:1,ret:null,args:[M.Object]}):E.throwExpression(M.ArgumentError$("handleError callback must take either an Object (the error), or both an Object (the error) and a StackTrace.")),E.functionTypeCheck(n,{func:1,ret:-1}),this.set$_onDone(E.functionTypeCheck(n,{func:1,ret:-1}))},_setPendingEvents$1:function(e){E.assertSubtype(e,"$is_PendingEvents",this.$ti,"$as_PendingEvents"),null!=e&&(this.set$_pending(e),e.get$isEmpty(e)||(this._state=(64|this._state)>>>0,this._pending.schedule$1(this)))},pause$1:function(e){var t,n,r=this._state;0==(8&r)&&(t=(r+128|4)>>>0,this._state=t,r<128&&null!=this._pending&&1===(n=this._pending)._state&&(n._state=3),0==(4&r)&&0==(32&t)&&this._guardCallback$1(this.get$_onPause()))},pause$0:function(){return this.pause$1(null)},resume$0:function(){var e=this._state;0==(8&e)&&e>=128&&(e=this._state=e-128)<128&&((e=0!=(64&e)&&!(e=this._pending).get$isEmpty(e))?this._pending.schedule$1(this):(e=(4294967291&this._state)>>>0,this._state=e,0==(32&e)&&this._guardCallback$1(this.get$_onResume())))},cancel$0:function(){var e=(4294967279&this._state)>>>0;return this._state=e,0==(8&e)&&this._cancel$0(),null==(e=this._cancelFuture)?K.$get$Future__nullFuture():e},_cancel$0:function(){var e,t=this._state=(8|this._state)>>>0;0!=(64&t)&&1===(e=this._pending)._state&&(e._state=3),0==(32&t)&&this.set$_pending(null),this._cancelFuture=this._onCancel$0()},_async$_add$1:function(e){var t;E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(this,0)),0==(8&(t=this._state))&&(t<32?this._sendData$1(e):this._addPending$1(new M._DelayedData(e,this.$ti)))},_addError$2:function(e,t){var n=this._state;0==(8&n)&&(n<32?this._sendError$2(e,t):this._addPending$1(new M._DelayedError(e,t)))},_close$0:function(){var e=this._state;0==(8&e)&&(e=(2|e)>>>0,this._state=e,e<32?this._sendDone$0():this._addPending$1(w.C__DelayedDone))},_onPause$0:function(){},_onResume$0:function(){},_onCancel$0:function(){},_addPending$1:function(e){var t=this.$ti,n=E.assertSubtype(this._pending,"$is_StreamImplEvents",t,"$as_StreamImplEvents");null==n&&(n=new M._StreamImplEvents(t),this.set$_pending(n)),n.add$1(0,e),0==(64&(t=this._state))&&(t=(64|t)>>>0,this._state=t,t<128&&this._pending.schedule$1(this))},_sendData$1:function(e){var t,n=E.getTypeArgumentByIndex(this,0);E.assertSubtypeOfRuntimeType(e,n),t=this._state,this._state=(32|t)>>>0,this._zone.runUnaryGuarded$1$2(this._onData,e,n),this._state=(4294967263&this._state)>>>0,this._checkState$1(0!=(4&t))},_sendError$2:function(e,t){var n,r;E.interceptedTypeCheck(t,"$isStackTrace"),n=this._state,r=new M._BufferingStreamSubscription__sendError_sendError(this,e,t),0!=(1&n)?(this._state=(16|n)>>>0,this._cancel$0(),null!=(n=this._cancelFuture)&&n!==K.$get$Future__nullFuture()?n.whenComplete$1(r):r.call$0()):(r.call$0(),this._checkState$1(0!=(4&n)))},_sendDone$0:function(){var e,t=new M._BufferingStreamSubscription__sendDone_sendDone(this);this._cancel$0(),this._state=(16|this._state)>>>0,null!=(e=this._cancelFuture)&&e!==K.$get$Future__nullFuture()?e.whenComplete$1(t):t.call$0()},_guardCallback$1:function(e){var t;E.functionTypeCheck(e,{func:1,ret:-1}),t=this._state,this._state=(32|t)>>>0,e.call$0(),this._state=(4294967263&this._state)>>>0,this._checkState$1(0!=(4&t))},_checkState$1:function(e){var t,n;for((t=0!=(64&this._state)&&(t=this._pending).get$isEmpty(t))&&(t=0!=(4&(t=this._state=(4294967231&this._state)>>>0))&&(t<128&&(null==(t=this._pending)||t.get$isEmpty(t))))&&(this._state=(4294967291&this._state)>>>0);;e=n){if(0!=(8&(t=this._state)))return void this.set$_pending(null);if(e===(n=0!=(4&t)))break;this._state=(32^t)>>>0,n?this._onPause$0():this._onResume$0(),this._state=(4294967263&this._state)>>>0}0!=(64&(t=this._state))&&t<128&&this._pending.schedule$1(this)},set$_onData:function(e){this._onData=E.functionTypeCheck(e,{func:1,ret:-1,args:[E.getTypeArgumentByIndex(this,0)]})},set$_onDone:function(e){this._onDone=E.functionTypeCheck(e,{func:1,ret:-1})},set$_pending:function(e){this._pending=E.assertSubtype(e,"$is_PendingEvents",this.$ti,"$as_PendingEvents")},$isStreamSubscription:1,$is_EventDispatch:1},M._BufferingStreamSubscription__sendError_sendError.prototype={call$0:function(){var e,t,n,r=this.$this,i=r._state;0!=(8&i)&&0==(16&i)||(r._state=(32|i)>>>0,e=r._onError,i=this.error,t=M.Object,n=r._zone,E.functionTypeTest(e,{func:1,ret:-1,args:[M.Object,M.StackTrace]})?n.runBinaryGuarded$2$3(e,i,this.stackTrace,t,M.StackTrace):n.runUnaryGuarded$1$2(E.functionTypeCheck(r._onError,{func:1,ret:-1,args:[M.Object]}),i,t),r._state=(4294967263&r._state)>>>0)},$signature:1},M._BufferingStreamSubscription__sendDone_sendDone.prototype={call$0:function(){var e=this.$this,t=e._state;0!=(16&t)&&(e._state=(42|t)>>>0,e._zone.runGuarded$1(e._onDone),e._state=(4294967263&e._state)>>>0)},$signature:1},M._StreamImpl.prototype={listen$4$cancelOnError$onDone$onError:function(e,t,n,r){return this._createSubscription$4(E.functionTypeCheck(e,{func:1,ret:-1,args:[E.getTypeArgumentByIndex(this,0)]}),r,E.functionTypeCheck(n,{func:1,ret:-1}),!0===t)},listen$3$onDone$onError:function(e,t,n){return this.listen$4$cancelOnError$onDone$onError(e,null,t,n)},listen$2$onDone:function(e,t){return this.listen$4$cancelOnError$onDone$onError(e,null,t,null)},_createSubscription$4:function(e,t,n,r){var i=E.getTypeArgumentByIndex(this,0);return M._BufferingStreamSubscription$(E.functionTypeCheck(e,{func:1,ret:-1,args:[i]}),t,E.functionTypeCheck(n,{func:1,ret:-1}),r,i)}},M._GeneratedStreamImpl.prototype={_createSubscription$4:function(e,t,n,r){var i=E.getTypeArgumentByIndex(this,0);if(E.functionTypeCheck(e,{func:1,ret:-1,args:[i]}),E.functionTypeCheck(n,{func:1,ret:-1}),this._async$_isUsed)throw E.wrapException(M.StateError$("Stream has already been listened to."));return this._async$_isUsed=!0,(i=M._BufferingStreamSubscription$(e,t,n,r,i))._setPendingEvents$1(this._pending.call$0()),i}},M._IterablePendingEvents.prototype={get$isEmpty:function(e){return null==this._async$_iterator},handleNext$1:function(e){var t,n,r,i,o;if(E.assertSubtype(e,"$is_EventDispatch",this.$ti,"$as_EventDispatch"),null==(i=this._async$_iterator))throw E.wrapException(M.StateError$("No events pending."));t=null;try{t=i.moveNext$0(),E.boolConversionCheck(t)?e._sendData$1(this._async$_iterator.get$current()):(this.set$_async$_iterator(null),e._sendDone$0())}catch(o){n=E.unwrapException(o),r=E.getTraceFromException(o),null==t?(this.set$_async$_iterator(w.C_EmptyIterator),e._sendError$2(n,r)):e._sendError$2(n,r)}},set$_async$_iterator:function(e){this._async$_iterator=E.assertSubtype(e,"$isIterator",this.$ti,"$asIterator")}},M._DelayedEvent.prototype={set$next:function(e){this.next=E.interceptedTypeCheck(e,"$is_DelayedEvent")},get$next:function(){return this.next}},M._DelayedData.prototype={perform$1:function(e){E.assertSubtype(e,"$is_EventDispatch",this.$ti,"$as_EventDispatch")._sendData$1(this.value)}},M._DelayedError.prototype={perform$1:function(e){e._sendError$2(this.error,this.stackTrace)},$as_DelayedEvent:function(){}},M._DelayedDone.prototype={perform$1:function(e){e._sendDone$0()},get$next:function(){},set$next:function(e){throw E.wrapException(M.StateError$("No events after a done."))},$is_DelayedEvent:1,$as_DelayedEvent:function(){}},M._PendingEvents.prototype={schedule$1:function(e){var t;E.assertSubtype(e,"$is_EventDispatch",this.$ti,"$as_EventDispatch"),1!==(t=this._state)&&(t>=1||M.scheduleMicrotask(new M._PendingEvents_schedule_closure(this,e)),this._state=1)}},M._PendingEvents_schedule_closure.prototype={call$0:function(){var e=this.$this,t=e._state;e._state=0,3!==t&&e.handleNext$1(this.dispatch)},$signature:2},M._StreamImplEvents.prototype={get$isEmpty:function(e){return null==this.lastPendingEvent},add$1:function(e,t){var n=this.lastPendingEvent;null==n?this.firstPendingEvent=this.lastPendingEvent=t:(n.set$next(t),this.lastPendingEvent=t)},handleNext$1:function(e){var t,n;E.assertSubtype(e,"$is_EventDispatch",this.$ti,"$as_EventDispatch"),n=(t=this.firstPendingEvent).get$next(),this.firstPendingEvent=n,null==n&&(this.lastPendingEvent=null),t.perform$1(e)}},M._StreamIterator.prototype={},M.AsyncError.prototype={toString$0:function(e){return E.S(this.error)},$isError:1},M._Zone.prototype={$isZone:1},M._rootHandleUncaughtError_closure.prototype={call$0:function(){var e,t=this._box_0,n=t.error;if(t=null==n?t.error=new M.NullThrownError:n,null==(n=this.stackTrace))throw E.wrapException(t);throw(e=E.wrapException(t)).stack=n.toString$0(0),e},$signature:2},M._RootZone.prototype={runGuarded$1:function(e){var t,n,r;E.functionTypeCheck(e,{func:1,ret:-1});try{if(w.C__RootZone===K.Zone__current)return void e.call$0();M._rootRun(null,null,this,e,-1)}catch(r){t=E.unwrapException(r),n=E.getTraceFromException(r),M._rootHandleUncaughtError(null,null,this,t,E.interceptedTypeCheck(n,"$isStackTrace"))}},runUnaryGuarded$1$2:function(e,t,n){var r,i,o;E.functionTypeCheck(e,{func:1,ret:-1,args:[n]}),E.assertSubtypeOfRuntimeType(t,n);try{if(w.C__RootZone===K.Zone__current)return void e.call$1(t);M._rootRunUnary(null,null,this,e,t,-1,n)}catch(o){r=E.unwrapException(o),i=E.getTraceFromException(o),M._rootHandleUncaughtError(null,null,this,r,E.interceptedTypeCheck(i,"$isStackTrace"))}},runBinaryGuarded$2$3:function(e,t,n,r,i){var o,a,s;E.functionTypeCheck(e,{func:1,ret:-1,args:[r,i]}),E.assertSubtypeOfRuntimeType(t,r),E.assertSubtypeOfRuntimeType(n,i);try{if(w.C__RootZone===K.Zone__current)return void e.call$2(t,n);M._rootRunBinary(null,null,this,e,t,n,-1,r,i)}catch(s){o=E.unwrapException(s),a=E.getTraceFromException(s),M._rootHandleUncaughtError(null,null,this,o,E.interceptedTypeCheck(a,"$isStackTrace"))}},bindCallback$1$1:function(e,t){return new M._RootZone_bindCallback_closure(this,E.functionTypeCheck(e,{func:1,ret:t}),t)},bindCallbackGuarded$1:function(e){return new M._RootZone_bindCallbackGuarded_closure(this,E.functionTypeCheck(e,{func:1,ret:-1}))},run$1$1:function(e,t){return E.functionTypeCheck(e,{func:1,ret:t}),K.Zone__current===w.C__RootZone?e.call$0():M._rootRun(null,null,this,e,t)},runUnary$2$2:function(e,t,n,r){return E.functionTypeCheck(e,{func:1,ret:n,args:[r]}),E.assertSubtypeOfRuntimeType(t,r),K.Zone__current===w.C__RootZone?e.call$1(t):M._rootRunUnary(null,null,this,e,t,n,r)},runBinary$3$3:function(e,t,n,r,i,o){return E.functionTypeCheck(e,{func:1,ret:r,args:[i,o]}),E.assertSubtypeOfRuntimeType(t,i),E.assertSubtypeOfRuntimeType(n,o),K.Zone__current===w.C__RootZone?e.call$2(t,n):M._rootRunBinary(null,null,this,e,t,n,r,i,o)},registerBinaryCallback$3$1:function(e,t,n,r){return E.functionTypeCheck(e,{func:1,ret:t,args:[n,r]})}},M._RootZone_bindCallback_closure.prototype={call$0:function(){return this.$this.run$1$1(this.f,this.R)},$signature:function(){return{func:1,ret:this.R}}},M._RootZone_bindCallbackGuarded_closure.prototype={call$0:function(){return this.$this.runGuarded$1(this.f)},$signature:1},M._HashMap.prototype={get$length:function(e){return this._collection$_length},get$isEmpty:function(e){return 0===this._collection$_length},get$keys:function(){return new M._HashMapKeyIterable(this,[E.getTypeArgumentByIndex(this,0)])},containsKey$1:function(e){var t,n;return"string"==typeof e&&"__proto__"!==e?null!=(t=this._strings)&&null!=t[e]:"number"==typeof e&&(1073741823&e)===e?null!=(n=this._nums)&&null!=n[e]:this._containsKey$1(e)},_containsKey$1:function(e){var t=this._rest;return null!=t&&this._findBucketIndex$2(this._getBucket$2(t,e),e)>=0},$index:function(e,t){var n,r;return"string"==typeof t&&"__proto__"!==t?null==(n=this._strings)?null:M._HashMap__getTableEntry(n,t):"number"==typeof t&&(1073741823&t)===t?null==(r=this._nums)?null:M._HashMap__getTableEntry(r,t):this._get$1(t)},_get$1:function(e){var t,n,r=this._rest;if(null!=r)return t=this._getBucket$2(r,e),(n=this._findBucketIndex$2(t,e))<0?null:t[n+1]},$indexSet:function(e,t,n){var r,i,o,a,s;E.assertSubtypeOfRuntimeType(t,E.getTypeArgumentByIndex(this,0)),E.assertSubtypeOfRuntimeType(n,E.getTypeArgumentByIndex(this,1)),"string"==typeof t&&"__proto__"!==t?(r=this._strings,this._addHashTableEntry$3(null==r?this._strings=M._HashMap__newHashTable():r,t,n)):(null==(i=this._rest)&&(i=this._rest=M._HashMap__newHashTable()),null==(a=i[o=1073741823&E.objectHashCode(t)])?(M._HashMap__setTableEntry(i,o,[t,n]),++this._collection$_length,this._keys=null):(s=this._findBucketIndex$2(a,t))>=0?a[s+1]=n:(a.push(t,n),++this._collection$_length,this._keys=null))},forEach$1:function(e,t){var n,r,i,o,a=E.getTypeArgumentByIndex(this,0);for(E.functionTypeCheck(t,{func:1,ret:-1,args:[a,E.getTypeArgumentByIndex(this,1)]}),r=(n=this._computeKeys$0()).length,i=0;i<r;++i)if(o=n[i],t.call$2(E.assertSubtypeOfRuntimeType(o,a),this.$index(0,o)),n!==this._keys)throw E.wrapException(M.ConcurrentModificationError$(this))},_computeKeys$0:function(){var e,t,n,r,i,o,a,s,l,c,u,h=this._keys;if(null!=h)return h;if((e=new Array(this._collection$_length)).fixed$length=Array,null!=(t=this._strings))for(r=(n=Object.getOwnPropertyNames(t)).length,i=0,o=0;o<r;++o)e[i]=n[o],++i;else i=0;if(null!=(a=this._nums))for(r=(n=Object.getOwnPropertyNames(a)).length,o=0;o<r;++o)e[i]=+n[o],++i;if(null!=(s=this._rest))for(r=(n=Object.getOwnPropertyNames(s)).length,o=0;o<r;++o)for(c=(l=s[n[o]]).length,u=0;u<c;u+=2)e[i]=l[u],++i;return this._keys=e},_addHashTableEntry$3:function(e,t,n){E.assertSubtypeOfRuntimeType(t,E.getTypeArgumentByIndex(this,0)),E.assertSubtypeOfRuntimeType(n,E.getTypeArgumentByIndex(this,1)),null==e[t]&&(++this._collection$_length,this._keys=null),M._HashMap__setTableEntry(e,t,n)},_getBucket$2:function(e,t){return e[1073741823&E.objectHashCode(t)]}},M._IdentityHashMap.prototype={_findBucketIndex$2:function(e,t){var n,r,i;if(null==e)return-1;for(n=e.length,r=0;r<n;r+=2)if(null==(i=e[r])?null==t:i===t)return r;return-1}},M._HashMapKeyIterable.prototype={get$length:function(e){return this._map._collection$_length},get$isEmpty:function(e){return 0===this._map._collection$_length},get$iterator:function(e){var t=this._map;return new M._HashMapKeyIterator(t,t._computeKeys$0(),this.$ti)},contains$1:function(e,t){return this._map.containsKey$1(t)}},M._HashMapKeyIterator.prototype={get$current:function(){return this._collection$_current},moveNext$0:function(){var e=this._keys,t=this._offset,n=this._map;if(e!==n._keys)throw E.wrapException(M.ConcurrentModificationError$(n));return t>=e.length?(this.set$_collection$_current(null),!1):(this.set$_collection$_current(e[t]),this._offset=t+1,!0)},set$_collection$_current:function(e){this._collection$_current=E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(this,0))},$isIterator:1},M._LinkedHashSet.prototype={get$iterator:function(e){var t=new M._LinkedHashSetIterator(this,this._collection$_modifications,this.$ti);return t._collection$_cell=this._collection$_first,t},get$length:function(e){return this._collection$_length},get$isEmpty:function(e){return 0===this._collection$_length},get$isNotEmpty:function(e){return 0!==this._collection$_length},contains$1:function(e,t){var n,r;return"string"==typeof t&&"__proto__"!==t?null!=(n=this._strings)&&null!=E.interceptedTypeCheck(n[t],"$is_LinkedHashSetCell"):"number"==typeof t&&(1073741823&t)===t?null!=(r=this._nums)&&null!=E.interceptedTypeCheck(r[t],"$is_LinkedHashSetCell"):this._contains$1(t)},_contains$1:function(e){var t=this._rest;return null!=t&&this._findBucketIndex$2(this._getBucket$2(t,e),e)>=0},add$1:function(e,t){var n,r;return E.assertSubtypeOfRuntimeType(t,E.getTypeArgumentByIndex(this,0)),"string"==typeof t&&"__proto__"!==t?(n=this._strings,this._addHashTableEntry$2(null==n?this._strings=M._LinkedHashSet__newHashTable():n,t)):"number"==typeof t&&(1073741823&t)===t?(r=this._nums,this._addHashTableEntry$2(null==r?this._nums=M._LinkedHashSet__newHashTable():r,t)):this._add$1(t)},_add$1:function(e){var t,n,r;if(E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(this,0)),null==(t=this._rest)&&(t=this._rest=M._LinkedHashSet__newHashTable()),null==(r=t[n=this._computeHashCode$1(e)]))t[n]=[this._collection$_newLinkedCell$1(e)];else{if(this._findBucketIndex$2(r,e)>=0)return!1;r.push(this._collection$_newLinkedCell$1(e))}return!0},remove$1:function(e,t){return"string"==typeof t&&"__proto__"!==t?this._removeHashTableEntry$2(this._strings,t):"number"==typeof t&&(1073741823&t)===t?this._removeHashTableEntry$2(this._nums,t):this._remove$1(t)},_remove$1:function(e){var t,n,r=this._rest;return null!=r&&(t=this._getBucket$2(r,e),!((n=this._findBucketIndex$2(t,e))<0)&&(this._unlinkCell$1(t.splice(n,1)[0]),!0))},_filterWhere$2:function(e,t){var n,r,i,o,a,s=E.getTypeArgumentByIndex(this,0);for(E.functionTypeCheck(e,{func:1,ret:M.bool,args:[s]}),n=this._collection$_first;null!=n;n=i){if(r=E.assertSubtypeOfRuntimeType(n._element,s),i=n._collection$_next,o=this._collection$_modifications,a=e.call$1(r),o!==this._collection$_modifications)throw E.wrapException(M.ConcurrentModificationError$(this));!1===a&&this.remove$1(0,r)}},clear$0:function(e){this._collection$_length>0&&(this._strings=this._nums=this._rest=this._collection$_first=this._collection$_last=null,this._collection$_length=0,this._modified$0())},_addHashTableEntry$2:function(e,t){return E.assertSubtypeOfRuntimeType(t,E.getTypeArgumentByIndex(this,0)),null==E.interceptedTypeCheck(e[t],"$is_LinkedHashSetCell")&&(e[t]=this._collection$_newLinkedCell$1(t),!0)},_removeHashTableEntry$2:function(e,t){var n;return null!=e&&(null!=(n=E.interceptedTypeCheck(e[t],"$is_LinkedHashSetCell"))&&(this._unlinkCell$1(n),delete e[t],!0))},_modified$0:function(){this._collection$_modifications=1073741823&this._collection$_modifications+1},_collection$_newLinkedCell$1:function(e){var t,n=new M._LinkedHashSetCell(E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(this,0)));return null==this._collection$_first?this._collection$_first=this._collection$_last=n:(t=this._collection$_last,n._previous=t,this._collection$_last=t._collection$_next=n),++this._collection$_length,this._modified$0(),n},_unlinkCell$1:function(e){var t=e._previous,n=e._collection$_next;null==t?this._collection$_first=n:t._collection$_next=n,null==n?this._collection$_last=t:n._previous=t,--this._collection$_length,this._modified$0()},_computeHashCode$1:function(e){return 1073741823&T.get$hashCode$(e)},_getBucket$2:function(e,t){return e[this._computeHashCode$1(t)]},_findBucketIndex$2:function(e,t){var n,r;if(null==e)return-1;for(n=e.length,r=0;r<n;++r)if(T.$eq$(e[r]._element,t))return r;return-1},$isLinkedHashSet:1},M._LinkedHashSetCell.prototype={},M._LinkedHashSetIterator.prototype={get$current:function(){return this._collection$_current},moveNext$0:function(){var e=this._set;if(this._collection$_modifications!==e._collection$_modifications)throw E.wrapException(M.ConcurrentModificationError$(e));return null==(e=this._collection$_cell)?(this.set$_collection$_current(null),!1):(this.set$_collection$_current(E.assertSubtypeOfRuntimeType(e._element,E.getTypeArgumentByIndex(this,0))),this._collection$_cell=this._collection$_cell._collection$_next,!0)},set$_collection$_current:function(e){this._collection$_current=E.assertSubtypeOfRuntimeType(e,E.getTypeArgumentByIndex(this,0))},$isIterator:1},M.UnmodifiableListView.prototype={cast$1$0:function(e,t){return new M.UnmodifiableListView(T.cast$1$0$ax(this._collection$_source,t),[t])},get$length:function(e){return T.get$length$asx(this._collection$_source)},$index:function(e,t){return T.elementAt$1$ax(this._collection$_source,t)}},M.IterableBase.prototype={},M.ListBase.prototype={$isEfficientLengthIterable:1,$isIterable:1,$isList:1},M.ListMixin.prototype={get$iterator:function(e){return new E.ListIterator(e,this.get$length(e),[E.getRuntimeTypeArgumentIntercepted(this,e,"ListMixin",0)])},elementAt$1:function(e,t){return this.$index(e,t)},get$isEmpty:function(e){return 0===this.get$length(e)},get$isNotEmpty:function(e){return!this.get$isEmpty(e)},get$first:function(e){if(0===this.get$length(e))throw E.wrapException(E.IterableElementError_noElement());return this.$index(e,0)},contains$1:function(e,t){var n,r=this.get$length(e);for(n=0;n<r;++n){if(T.$eq$(this.$index(e,n),t))return!0;if(r!==this.get$length(e))throw E.wrapException(M.ConcurrentModificationError$(e))}return!1},every$1:function(e,t){var n,r;for(E.functionTypeCheck(t,{func:1,ret:M.bool,args:[E.getRuntimeTypeArgumentIntercepted(this,e,"ListMixin",0)]}),n=this.get$length(e),r=0;r<n;++r){if(!E.boolConversionCheck(t.call$1(this.$index(e,r))))return!1;if(n!==this.get$length(e))throw E.wrapException(M.ConcurrentModificationError$(e))}return!0},any$1:function(e,t){var n,r;for(E.functionTypeCheck(t,{func:1,ret:M.bool,args:[E.getRuntimeTypeArgumentIntercepted(this,e,"ListMixin",0)]}),n=this.get$length(e),r=0;r<n;++r){if(E.boolConversionCheck(t.call$1(this.$index(e,r))))return!0;if(n!==this.get$length(e))throw E.wrapException(M.ConcurrentModificationError$(e))}return!1},map$1$1:function(e,t,n){var r=E.getRuntimeTypeArgumentIntercepted(this,e,"ListMixin",0);return new E.MappedListIterable(e,E.functionTypeCheck(t,{func:1,ret:n,args:[r]}),[r,n])},fold$1$2:function(e,t,n,r){var i,o,a;for(E.assertSubtypeOfRuntimeType(t,r),E.functionTypeCheck(n,{func:1,ret:r,args:[r,E.getRuntimeTypeArgumentIntercepted(this,e,"ListMixin",0)]}),i=this.get$length(e),o=t,a=0;a<i;++a)if(o=n.call$2(o,this.$index(e,a)),i!==this.get$length(e))throw E.wrapException(M.ConcurrentModificationError$(e));return o},skip$1:function(e,t){return E.SubListIterable$(e,t,null,E.getRuntimeTypeArgumentIntercepted(this,e,"ListMixin",0))},toList$1$growable:function(e,t){var n,r,i=new Array(this.get$length(e));for(i.fixed$length=Array,n=E.setRuntimeTypeInfo(i,[E.getRuntimeTypeArgumentIntercepted(this,e,"ListMixin",0)]),r=0;r<this.get$length(e);++r)w.JSArray_methods.$indexSet(n,r,this.$index(e,r));return n},toSet$0:function(e){var t,n=M.LinkedHashSet_LinkedHashSet(E.getRuntimeTypeArgumentIntercepted(this,e,"ListMixin",0));for(t=0;t<this.get$length(e);++t)n.add$1(0,this.$index(e,t));return n},add$1:function(e,t){var n;E.assertSubtypeOfRuntimeType(t,E.getRuntimeTypeArgumentIntercepted(this,e,"ListMixin",0)),n=this.get$length(e),this.set$length(e,n+1),this.$indexSet(e,n,t)},cast$1$0:function(e,t){return new E.CastList(e,[E.getRuntimeTypeArgumentIntercepted(this,e,"ListMixin",0),t])},sublist$2:function(e,t,n){var r,i,o,a=this.get$length(e);for(M.RangeError_checkValidRange(t,n,a),r=n-t,i=E.setRuntimeTypeInfo([],[E.getRuntimeTypeArgumentIntercepted(this,e,"ListMixin",0)]),w.JSArray_methods.set$length(i,r),o=0;o<r;++o)w.JSArray_methods.$indexSet(i,o,this.$index(e,t+o));return i},fillRange$3:function(e,t,n,r){var i;for(E.assertSubtypeOfRuntimeType(r,E.getRuntimeTypeArgumentIntercepted(this,e,"ListMixin",0)),M.RangeError_checkValidRange(t,n,this.get$length(e)),i=t;i<n;++i)this.$indexSet(e,i,r)},setRange$4:function(e,t,n,r,i){var o,a,s,l,c=E.getRuntimeTypeArgumentIntercepted(this,e,"ListMixin",0);if(E.assertSubtype(r,"$isIterable",[c],"$asIterable"),M.RangeError_checkValidRange(t,n,this.get$length(e)),0!==(o=n-t)){if(M.RangeError_checkNotNegative(i,"skipCount"),E.checkSubtype(r,"$isList",[c],"$asList")?(a=i,s=r):(s=T.skip$1$ax(r,i).toList$1$growable(0,!1),a=0),a+o>(c=T.getInterceptor$asx(s)).get$length(s))throw E.wrapException(E.IterableElementError_tooFew());if(a<t)for(l=o-1;l>=0;--l)this.$indexSet(e,t+l,c.$index(s,a+l));else for(l=0;l<o;++l)this.$indexSet(e,t+l,c.$index(s,a+l))}},indexOf$1:function(e,t){var n;for(n=0;n<this.get$length(e);++n)if(T.$eq$(this.$index(e,n),t))return n;return-1},toString$0:function(e){return M.IterableBase_iterableToFullString(e,"[","]")}},M.MapBase.prototype={},M.MapBase_mapToString_closure.prototype={call$2:function(e,t){var n,r=this._box_0;r.first||(this.result._contents+=", "),r.first=!1,n=(r=this.result)._contents+=E.S(e),r._contents=n+": ",r._contents+=E.S(t)},$signature:15},M.MapMixin.prototype={cast$2$0:function(e,t,n){return M.Map_castFrom(this,E.getRuntimeTypeArgument(this,"MapMixin",0),E.getRuntimeTypeArgument(this,"MapMixin",1),t,n)},forEach$1:function(e,t){var n,r;for(E.functionTypeCheck(t,{func:1,ret:-1,args:[E.getRuntimeTypeArgument(this,"MapMixin",0),E.getRuntimeTypeArgument(this,"MapMixin",1)]}),n=(n=this.get$keys()).get$iterator(n);n.moveNext$0();)r=n.get$current(),t.call$2(r,this.$index(0,r))},get$entries:function(){return this.get$keys().map$1$1(0,new M.MapMixin_entries_closure(this),[M.MapEntry,E.getRuntimeTypeArgument(this,"MapMixin",0),E.getRuntimeTypeArgument(this,"MapMixin",1)])},containsKey$1:function(e){return this.get$keys().contains$1(0,e)},get$length:function(e){var t=this.get$keys();return t.get$length(t)},get$isEmpty:function(e){var t=this.get$keys();return t.get$isEmpty(t)},toString$0:function(e){return M.MapBase_mapToString(this)},$isMap:1},M.MapMixin_entries_closure.prototype={call$1:function(e){var t=this.$this,n=E.getRuntimeTypeArgument(t,"MapMixin",0);return E.assertSubtypeOfRuntimeType(e,n),new M.MapEntry(e,t.$index(0,e),[n,E.getRuntimeTypeArgument(t,"MapMixin",1)])},$signature:function(){var e=this.$this,t=E.getRuntimeTypeArgument(e,"MapMixin",0);return{func:1,ret:[M.MapEntry,t,E.getRuntimeTypeArgument(e,"MapMixin",1)],args:[t]}}},M._UnmodifiableMapMixin.prototype={$indexSet:function(e,t,n){throw E.assertSubtypeOfRuntimeType(t,E.getRuntimeTypeArgument(this,"_UnmodifiableMapMixin",0)),E.assertSubtypeOfRuntimeType(n,E.getRuntimeTypeArgument(this,"_UnmodifiableMapMixin",1)),E.wrapException(M.UnsupportedError$("Cannot modify unmodifiable map"))}},M.MapView.prototype={cast$2$0:function(e,t,n){return this._map.cast$2$0(0,t,n)},$index:function(e,t){return this._map.$index(0,t)},$indexSet:function(e,t,n){this._map.$indexSet(0,E.assertSubtypeOfRuntimeType(t,E.getTypeArgumentByIndex(this,0)),E.assertSubtypeOfRuntimeType(n,E.getTypeArgumentByIndex(this,1)))},containsKey$1:function(e){return this._map.containsKey$1(e)},forEach$1:function(e,t){this._map.forEach$1(0,E.functionTypeCheck(t,{func:1,ret:-1,args:[E.getTypeArgumentByIndex(this,0),E.getTypeArgumentByIndex(this,1)]}))},get$isEmpty:function(e){var t=this._map;return t.get$isEmpty(t)},get$length:function(e){var t=this._map;return t.get$length(t)},get$keys:function(){return this._map.get$keys()},toString$0:function(e){return this._map.toString$0(0)},$isMap:1},M.UnmodifiableMapView.prototype={cast$2$0:function(e,t,n){return new M.UnmodifiableMapView(this._map.cast$2$0(0,t,n),[t,n])}},M._SetBase.prototype={get$isEmpty:function(e){return 0===this.get$length(this)},get$isNotEmpty:function(e){return 0!==this.get$length(this)},addAll$1:function(e,t){var n;for(n=T.get$iterator$ax(E.assertSubtype(t,"$isIterable",this.$ti,"$asIterable"));n.moveNext$0();)this.add$1(0,n.get$current())},toList$1$growable:function(e,t){var n,r,i,o,a=this.$ti;for(t?(n=E.setRuntimeTypeInfo([],a),w.JSArray_methods.set$length(n,this.get$length(this))):((r=new Array(this.get$length(this))).fixed$length=Array,n=E.setRuntimeTypeInfo(r,a)),a=this.get$iterator(this),i=0;a.moveNext$0();i=o)o=i+1,w.JSArray_methods.$indexSet(n,i,a.get$current());return n},map$1$1:function(e,t,n){var r=E.getTypeArgumentByIndex(this,0);return new E.EfficientLengthMappedIterable(this,E.functionTypeCheck(t,{func:1,ret:n,args:[r]}),[r,n])},toString$0:function(e){return M.IterableBase_iterableToFullString(this,"{","}")},every$1:function(e,t){var n;for(E.functionTypeCheck(t,{func:1,ret:M.bool,args:[E.getTypeArgumentByIndex(this,0)]}),n=this.get$iterator(this);n.moveNext$0();)if(!E.boolConversionCheck(t.call$1(n.get$current())))return!1;return!0},skip$1:function(e,t){return E.SkipIterable_SkipIterable(this,t,E.getTypeArgumentByIndex(this,0))},firstWhere$2$orElse:function(e,t,n){var r,i=E.getTypeArgumentByIndex(this,0);for(E.functionTypeCheck(t,{func:1,ret:M.bool,args:[i]}),E.functionTypeCheck(n,{func:1,ret:i}),i=this.get$iterator(this);i.moveNext$0();)if(r=i.get$current(),E.boolConversionCheck(t.call$1(r)))return r;return n.call$0()},elementAt$1:function(e,t){var n,r,i;for(M.RangeError_checkNotNegative(t,"index"),n=this.get$iterator(this),r=0;n.moveNext$0();){if(i=n.get$current(),t===r)return i;++r}throw E.wrapException(M.IndexError$(t,this,"index",null,r))},$isEfficientLengthIterable:1,$isIterable:1,$isSet:1},M._UnmodifiableSet.prototype={contains$1:function(e,t){return this._map.containsKey$1(t)},get$iterator:function(e){var t=this._map.get$keys();return t.get$iterator(t)},get$length:function(e){var t=this._map;return t.get$length(t)},add$1:function(e,t){throw E.assertSubtypeOfRuntimeType(t,E.getTypeArgumentByIndex(this,0)),E.wrapException(M.UnsupportedError$("Cannot change unmodifiable set"))}},M._ListBase_Object_ListMixin.prototype={},M._UnmodifiableMapView_MapView__UnmodifiableMapMixin.prototype={},M._JsonMap.prototype={$index:function(e,t){var n,r=this._processed;return null==r?this._data.$index(0,t):"string"!=typeof t?void 0:void 0===(n=r[t])?this._process$1(t):n},get$length:function(e){return null==this._processed?this._data.__js_helper$_length:this._convert$_computeKeys$0().length},get$isEmpty:function(e){return 0===this.get$length(this)},get$keys:function(){if(null==this._processed){var e=this._data;return new E.LinkedHashMapKeyIterable(e,[E.getTypeArgumentByIndex(e,0)])}return new M._JsonMapKeyIterable(this)},$indexSet:function(e,t,n){var r,i;null==this._processed?this._data.$indexSet(0,t,n):this.containsKey$1(t)?((r=this._processed)[t]=n,(null==(i=this._original)?null!=r:i!==r)&&(i[t]=null)):this._upgrade$0().$indexSet(0,t,n)},containsKey$1:function(e){return null==this._processed?this._data.containsKey$1(e):"string"==typeof e&&Object.prototype.hasOwnProperty.call(this._original,e)},forEach$1:function(e,t){var n,r,i,o;if(E.functionTypeCheck(t,{func:1,ret:-1,args:[M.String,,]}),null==this._processed)return this._data.forEach$1(0,t);for(n=this._convert$_computeKeys$0(),r=0;r<n.length;++r)if(i=n[r],void 0===(o=this._processed[i])&&(o=M._convertJsonToDartLazy(this._original[i]),this._processed[i]=o),t.call$2(i,o),n!==this._data)throw E.wrapException(M.ConcurrentModificationError$(this))},_convert$_computeKeys$0:function(){var e=E.listTypeCheck(this._data);return null==e&&(e=this._data=E.setRuntimeTypeInfo(Object.keys(this._original),[M.String])),e},_upgrade$0:function(){var e,t,n,r,i;if(null==this._processed)return this._data;for(e=M.LinkedHashMap_LinkedHashMap$_empty(M.String,null),t=this._convert$_computeKeys$0(),n=0;n<(r=t.length);++n)i=t[n],e.$indexSet(0,i,this.$index(0,i));return 0===r?w.JSArray_methods.add$1(t,null):w.JSArray_methods.set$length(t,0),this._original=this._processed=null,this._data=e},_process$1:function(e){var t;if(Object.prototype.hasOwnProperty.call(this._original,e))return t=M._convertJsonToDartLazy(this._original[e]),this._processed[e]=t},$asMapMixin:function(){return[M.String,null]},$asMap:function(){return[M.String,null]}},M._JsonMapKeyIterable.prototype={get$length:function(e){var t=this._convert$_parent;return t.get$length(t)},elementAt$1:function(e,t){var n=this._convert$_parent;if(null==n._processed)n=n.get$keys().elementAt$1(0,t);else{if(n=n._convert$_computeKeys$0(),t<0||t>=n.length)return E.ioore(n,t);n=n[t]}return n},get$iterator:function(e){var t=this._convert$_parent;return null==t._processed?t=(t=t.get$keys()).get$iterator(t):(t=t._convert$_computeKeys$0(),t=new T.ArrayIterator(t,t.length,[E.getTypeArgumentByIndex(t,0)])),t},contains$1:function(e,t){return this._convert$_parent.containsKey$1(t)},$asEfficientLengthIterable:function(){return[M.String]},$asListIterable:function(){return[M.String]},$asIterable:function(){return[M.String]}},M._JsonDecoderSink.prototype={close$0:function(){var e,t,n,r;this.super$_StringSinkConversionSink$close(),t=(e=this._stringSink)._contents,e._contents="",r=(n=this._sink)._accumulated,w.JSArray_methods.add$1(r,E.assertSubtypeOfRuntimeType(M._parseJson((t.charCodeAt(0),t),this._reviver),E.getTypeArgumentByIndex(n,0))),n._callback.call$1(r)},$as_StringSinkConversionSink:function(){return[M.StringSink]},$asSink:function(){return[M.String]}},M.Base64Codec.prototype={normalize$3:function(e,t,n){var r,i,o,a,s,l,c,u,h,d,p,f,m,g,v,y,_="Invalid base64 encoding length ";for(n=M.RangeError_checkValidRange(t,n,e.length),r=K.$get$_Base64Decoder__inverseAlphabet(),o=i=t,a=null,s=-1,l=-1,c=0;i<n;i=u){if(u=i+1,37===(h=w.JSString_methods._codeUnitAt$1(e,i))?(d=u+2)<=n?(37===(p=E.parseHexByte(e,u))&&(p=-1),u=d):p=-1:p=h,0<=p&&p<=127){if(p<0||p>=r.length)return E.ioore(r,p);if((f=r[p])>=0){if((p=w.JSString_methods.codeUnitAt$1("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f))===h)continue;h=p}else{if(-1===f&&(s<0&&(null==(m=null==a?null:a._contents.length)&&(m=0),s=m+(i-o),l=i),++c,61===h))continue;h=p}if(-2!==f){null==a&&(a=new M.StringBuffer("")),a._contents+=w.JSString_methods.substring$2(e,o,i),a._contents+=E.Primitives_stringFromCharCode(h),o=u;continue}}throw E.wrapException(M.FormatException$("Invalid base64 data",e,i))}if(null!=a){if(g=(m=a._contents+=w.JSString_methods.substring$2(e,o,n)).length,s>=0)M.Base64Codec__checkPadding(e,l,n,s,c,g);else{if(1===(v=w.JSInt_methods.$mod(g-1,4)+1))throw E.wrapException(M.FormatException$(_,e,n));for(;v<4;)m+="=",a._contents=m,++v}return m=a._contents,w.JSString_methods.replaceRange$3(e,t,n,(m.charCodeAt(0),m))}if(y=n-t,s>=0)M.Base64Codec__checkPadding(e,l,n,s,c,y);else{if(1===(v=w.JSInt_methods.$mod(y,4)))throw E.wrapException(M.FormatException$(_,e,n));v>1&&(e=w.JSString_methods.replaceRange$3(e,n,n,2===v?"==":"="))}return e},$asCodec:function(){return[[M.List,M.int],M.String]}},M.Base64Encoder.prototype={$asConverter:function(){return[[M.List,M.int],M.String]}},M.Base64Decoder.prototype={convert$2:function(e,t){var n,r,i,o=M.RangeError_checkValidRange(t,null,e.length);return t===o?new Uint8Array(0):(r=(n=new M._Base64Decoder).decode$3(e,t,o),(i=n._convert$_state)<-1&&E.throwExpression(M.FormatException$("Missing padding character",e,o)),i>0&&E.throwExpression(M.FormatException$("Invalid length, must be multiple of four",e,o)),n._convert$_state=-1,r)},$asConverter:function(){return[M.String,[M.List,M.int]]}},M._Base64Decoder.prototype={decode$3:function(e,t,n){var r,i=this._convert$_state;if(!(i<0))return t===n?new Uint8Array(0):(r=M._Base64Decoder__allocateBuffer(e,t,n,i),this._convert$_state=M._Base64Decoder_decodeChunk(e,t,n,r,0,this._convert$_state),r);this._convert$_state=M._Base64Decoder__checkPadding(e,t,n,i)}},M.ByteConversionSink.prototype={$asChunkedConversionSink:function(){return[[M.List,M.int]]},$asSink:function(){return[[M.List,M.int]]}},M.ChunkedConversionSink.prototype={$isSink:1},M._SimpleCallbackSink.prototype={},M.Codec.prototype={},M.Converter.prototype={},M.Encoding.prototype={$asCodec:function(){return[M.String,[M.List,M.int]]}},M.JsonCodec.prototype={decode$1:function(e){return M._parseJson(e,this.get$decoder()._reviver)},get$decoder:function(){return w.JsonDecoder_null},$asCodec:function(){return[M.Object,M.String]}},M.JsonDecoder.prototype={$asConverter:function(){return[M.String,M.Object]}},M.StringConversionSinkBase.prototype={},M.StringConversionSinkMixin.prototype={$isSink:1,$asSink:function(){return[M.String]}},M._StringSinkConversionSink.prototype={close$0:function(){}},M._Utf8StringSinkAdapter.prototype={close$0:function(){this._decoder.flush$0(),this._sink.close$0()}},M.Utf8Codec.prototype={},M.Utf8Decoder.prototype={convert$1:function(e){var t,n,r,i,o,a,s,l,c;if(E.assertSubtype(e,"$isList",[M.int],"$asList"),null!=(t=M.Utf8Decoder__convertIntercepted(!1,e,0,null)))return t;if(n=M.RangeError_checkValidRange(0,null,T.get$length$asx(e)),(r=M._scanOneByteCharacters(e,0,n))>0){if(i=M.String_String$fromCharCodes(e,0,r),r===n)return i;o=new M.StringBuffer(i),a=r,s=!1}else a=0,o=null,s=!0;return null==o&&(o=new M.StringBuffer("")),(l=new M._Utf8Decoder(!1,o))._isFirstCharacter=s,l.convert$3(e,a,n),l.flush$2(e,n),(c=o._contents).charCodeAt(0),c},$asConverter:function(){return[[M.List,M.int],M.String]}},M._Utf8Decoder.prototype={flush$2:function(e,t){var n;if(E.assertSubtype(e,"$isList",[M.int],"$asList"),this._expectedUnits>0)throw n=M.FormatException$("Unfinished UTF-8 octet sequence",e,t),E.wrapException(n)},flush$0:function(){return this.flush$2(null,null)},convert$3:function(e,t,n){var r,i,o,a,s,l,c,u,h,d,p,f,m="Bad UTF-8 encoding 0x";E.assertSubtype(e,"$isList",[M.int],"$asList"),r=this._convert$_value,i=this._expectedUnits,o=this._extraUnits,this._extraUnits=this._expectedUnits=this._convert$_value=0;e:for(a=T.getInterceptor$asx(e),s=this._stringSink,l=t;;l=p){if(i>0){do{if(l===n)break e;if("number"!=typeof(c=a.$index(e,l)))return c.$and();if(128!=(192&c))throw u=M.FormatException$(m+w.JSInt_methods.toRadixString$1(c,16),e,l),E.wrapException(u);r=(r<<6|63&c)>>>0,--i,++l}while(i>0);if((u=o-1)<0||u>=4)return E.ioore(w.List_127_2047_65535_1114111,u);if(r<=w.List_127_2047_65535_1114111[u])throw u=M.FormatException$("Overlong encoding of 0x"+w.JSInt_methods.toRadixString$1(r,16),e,l-o-1),E.wrapException(u);if(r>1114111)throw u=M.FormatException$("Character outside valid Unicode range: 0x"+w.JSInt_methods.toRadixString$1(r,16),e,l-o-1),E.wrapException(u);this._isFirstCharacter&&65279===r||(s._contents+=E.Primitives_stringFromCharCode(r)),this._isFirstCharacter=!1}for(u=l<n;u;){if((h=M._scanOneByteCharacters(e,l,n))>0){if(this._isFirstCharacter=!1,d=l+h,s._contents+=M.String_String$fromCharCodes(e,l,d),d===n)break}else d=l;if(p=d+1,"number"!=typeof(c=a.$index(e,d)))return c.$lt();if(c<0)throw f=M.FormatException$("Negative UTF-8 code unit: -0x"+w.JSInt_methods.toRadixString$1(-c,16),e,p-1),E.wrapException(f);if(192==(224&c)){r=31&c,i=1,o=1;continue e}if(224==(240&c)){r=15&c,i=2,o=2;continue e}if(240==(248&c)&&c<245){r=7&c,i=3,o=3;continue e}throw f=M.FormatException$(m+w.JSInt_methods.toRadixString$1(c,16),e,p-1),E.wrapException(f)}break e}i>0&&(this._convert$_value=r,this._expectedUnits=i,this._extraUnits=o)}},M.NoSuchMethodError_toString_closure.prototype={call$2:function(e,t){var n,r,i;E.interceptedTypeCheck(e,"$isSymbol0"),n=this.sb,r=this._box_0,n._contents+=r.comma,i=n._contents+=E.S(e.__internal$_name),n._contents=i+": ",n._contents+=M.Error_safeToString(t),r.comma=", "},$signature:46},M.bool.prototype={},M.DateTime.prototype={$eq:function(e,t){return null!=t&&(t instanceof M.DateTime&&this._value===t._value&&this.isUtc===t.isUtc)},get$hashCode:function(e){var t=this._value;return 1073741823&(t^w.JSInt_methods._shrOtherPositive$1(t,30))},toUtc$0:function(){var e;return this.isUtc?this:(e=this._value,!(Math.abs(e)<=864e13)&&E.throwExpression(M.ArgumentError$("DateTime is outside valid range: "+e)),new M.DateTime(e,!0))},toString$0:function(e){var t=M.DateTime__fourDigits(E.Primitives_getYear(this)),n=M.DateTime__twoDigits(E.Primitives_getMonth(this)),r=M.DateTime__twoDigits(E.Primitives_getDay(this)),i=M.DateTime__twoDigits(E.Primitives_getHours(this)),o=M.DateTime__twoDigits(E.Primitives_getMinutes(this)),a=M.DateTime__twoDigits(E.Primitives_getSeconds(this)),s=M.DateTime__threeDigits(E.Primitives_getMilliseconds(this));return this.isUtc?t+"-"+n+"-"+r+" "+i+":"+o+":"+a+"."+s+"Z":t+"-"+n+"-"+r+" "+i+":"+o+":"+a+"."+s},toIso8601String$0:function(){var e=E.Primitives_getYear(this)>=-9999&&E.Primitives_getYear(this)<=9999?M.DateTime__fourDigits(E.Primitives_getYear(this)):M.DateTime__sixDigits(E.Primitives_getYear(this)),t=M.DateTime__twoDigits(E.Primitives_getMonth(this)),n=M.DateTime__twoDigits(E.Primitives_getDay(this)),r=M.DateTime__twoDigits(E.Primitives_getHours(this)),i=M.DateTime__twoDigits(E.Primitives_getMinutes(this)),o=M.DateTime__twoDigits(E.Primitives_getSeconds(this)),a=M.DateTime__threeDigits(E.Primitives_getMilliseconds(this));return this.isUtc?e+"-"+t+"-"+n+"T"+r+":"+i+":"+o+"."+a+"Z":e+"-"+t+"-"+n+"T"+r+":"+i+":"+o+"."+a}},M.double.prototype={},M.Error.prototype={},M.AssertionError.prototype={toString$0:function(e){return"Assertion failed"}},M.NullThrownError.prototype={toString$0:function(e){return"Throw of null."}},M.ArgumentError.prototype={get$_errorName:function(){return"Invalid argument"+(this._hasValue?"":"(s)")},get$_errorExplanation:function(){return""},toString$0:function(e){var t,n,r=this.name,i=null!=r?" ("+r+")":"";return t=null==(r=this.message)?"":": "+E.S(r),n=this.get$_errorName()+i+t,this._hasValue?n+this.get$_errorExplanation()+": "+M.Error_safeToString(this.invalidValue):n}},M.RangeError.prototype={get$_errorName:function(){return"RangeError"},get$_errorExplanation:function(){var e,t=this.start;return null==t?null!=(t=this.end)?": Not less than or equal to "+E.S(t):"":null==(e=this.end)?": Not greater than or equal to "+E.S(t):e>t?": Not in range "+E.S(t)+".."+E.S(e)+", inclusive":e<t?": Valid value range is empty":": Only valid value is "+E.S(t)}},M.IndexError.prototype={get$_errorName:function(){return"RangeError"},get$_errorExplanation:function(){var e,t=E.intTypeCheck(this.invalidValue);return"number"!=typeof t?t.$lt():t<0?": index must not be negative":0===(e=this.length)?": no indices are valid":": index should be less than "+e},get$length:function(e){return this.length}},M.NoSuchMethodError.prototype={toString$0:function(e){var t,n,r,i,o,a,s,l,c={},u=new M.StringBuffer("");for(c.comma="",n=(t=this._core$_arguments).length,r=0,i="",o="";r<n;++r,o=", ")a=t[r],u._contents=i+o,i=u._contents+=M.Error_safeToString(a),c.comma=", ";return this._namedArguments.forEach$1(0,new M.NoSuchMethodError_toString_closure(c,u)),s=M.Error_safeToString(this._core$_receiver),l=u.toString$0(0),t="NoSuchMethodError: method not found: '"+E.S(this._core$_memberName.__internal$_name)+"'\nReceiver: "+s+"\nArguments: ["+l+"]"}},M.UnsupportedError.prototype={toString$0:function(e){return"Unsupported operation: "+this.message}},M.UnimplementedError.prototype={toString$0:function(e){var t=this.message;return null!=t?"UnimplementedError: "+t:"UnimplementedError"}},M.StateError.prototype={toString$0:function(e){return"Bad state: "+this.message}},M.ConcurrentModificationError.prototype={toString$0:function(e){var t=this.modifiedObject;return null==t?"Concurrent modification during iteration.":"Concurrent modification during iteration: "+M.Error_safeToString(t)+"."}},M.OutOfMemoryError.prototype={toString$0:function(e){return"Out of Memory"},$isError:1},M.StackOverflowError.prototype={toString$0:function(e){return"Stack Overflow"},$isError:1},M.CyclicInitializationError.prototype={toString$0:function(e){var t=this.variableName;return null==t?"Reading static variable during its initialization":"Reading static variable '"+t+"' during its initialization"}},M._Exception.prototype={toString$0:function(e){return"Exception: "+this.message},$isException:1},M.FormatException.prototype={toString$0:function(e){var t,n,r,i,o,a,s,l,c,u,h=this.message,d=null!=h&&""!==h?"FormatException: "+E.S(h):"FormatException",p=this.offset,f=this.source;if("string"==typeof f){if((h=null!=p&&(p<0||p>f.length))&&(p=null),null==p)return d+"\n"+(f.length>78?w.JSString_methods.substring$2(f,0,75)+"...":f);for(t=1,n=0,r=!1,i=0;i<p;++i)10===(o=w.JSString_methods._codeUnitAt$1(f,i))?(n===i&&r||++t,n=i+1,r=!1):13===o&&(++t,n=i+1,r=!0);for(d=t>1?d+" (at line "+t+", character "+(p-n+1)+")\n":d+" (at character "+(p+1)+")\n",a=f.length,i=p;i<a;++i)if(10===(o=w.JSString_methods.codeUnitAt$1(f,i))||13===o){a=i;break}return a-n>78?p-n<75?(s=n+75,l=n,c="",u="..."):(a-p<75?(l=a-75,s=a,u=""):(l=p-36,s=p+36,u="..."),c="..."):(s=a,l=n,c="",u=""),d+c+w.JSString_methods.substring$2(f,l,s)+u+"\n"+w.JSString_methods.$mul(" ",p-l+c.length)+"^\n"}return null!=p?d+" (at offset "+E.S(p)+")":d},$isException:1},M.Function.prototype={},M.int.prototype={},M.Iterable.prototype={cast$1$0:function(e,t){return E.CastIterable_CastIterable(this,E.getRuntimeTypeArgument(this,"Iterable",0),t)},map$1$1:function(e,t,n){var r=E.getRuntimeTypeArgument(this,"Iterable",0);return E.MappedIterable_MappedIterable(this,E.functionTypeCheck(t,{func:1,ret:n,args:[r]}),r,n)},contains$1:function(e,t){var n;for(n=this.get$iterator(this);n.moveNext$0();)if(T.$eq$(n.get$current(),t))return!0;return!1},toList$1$growable:function(e,t){return M.List_List$from(this,!1,E.getRuntimeTypeArgument(this,"Iterable",0))},get$length:function(e){var t,n=this.get$iterator(this);for(t=0;n.moveNext$0();)++t;return t},get$isEmpty:function(e){return!this.get$iterator(this).moveNext$0()},get$isNotEmpty:function(e){return!this.get$isEmpty(this)},skip$1:function(e,t){return E.SkipIterable_SkipIterable(this,t,E.getRuntimeTypeArgument(this,"Iterable",0))},elementAt$1:function(e,t){var n,r,i;for(M.RangeError_checkNotNegative(t,"index"),n=this.get$iterator(this),r=0;n.moveNext$0();){if(i=n.get$current(),t===r)return i;++r}throw E.wrapException(M.IndexError$(t,this,"index",null,r))},toString$0:function(e){return M.IterableBase_iterableToShortString(this,"(",")")}},M._GeneratorIterable.prototype={elementAt$1:function(e,t){var n=this.length;return(0>t||t>=n)&&E.throwExpression(M.IndexError$(t,this,"index",null,n)),this._generator.call$1(t)},get$length:function(e){return this.length}},M.Iterator.prototype={},M.List.prototype={$isEfficientLengthIterable:1,$isIterable:1},M.Map.prototype={},M.MapEntry.prototype={toString$0:function(e){return"MapEntry("+E.S(this.key)+": "+E.S(this.value)+")"}},M.Null.prototype={get$hashCode:function(e){return M.Object.prototype.get$hashCode.call(this,this)},toString$0:function(e){return"null"}},M.num.prototype={},M.Object.prototype={constructor:M.Object,$isObject:1,$eq:function(e,t){return this===t},get$hashCode:function(e){return E.Primitives_objectHashCode(this)},toString$0:function(e){return"Instance of '"+E.S(E.Primitives_objectTypeName(this))+"'"},noSuchMethod$1:function(e,t){throw E.interceptedTypeCheck(t,"$isInvocation"),E.wrapException(M.NoSuchMethodError$(this,t.get$memberName(),t.get$positionalArguments(),t.get$namedArguments()))},toString:function(){return this.toString$0(this)}},M.Set.prototype={},M.StackTrace.prototype={},M.String.prototype={$isPattern:1},M.StringBuffer.prototype={get$length:function(e){return this._contents.length},toString$0:function(e){var t=this._contents;return t.charCodeAt(0),t},$isStringSink:1},M.StringSink.prototype={},M.Symbol0.prototype={},M.Type.prototype={},M.Uri.prototype={},M.Uri__parseIPv4Address_error.prototype={call$2:function(e,t){throw E.wrapException(M.FormatException$("Illegal IPv4 address, "+e,this.host,t))},$signature:50},M.Uri_parseIPv6Address_error.prototype={call$2:function(e,t){throw E.wrapException(M.FormatException$("Illegal IPv6 address, "+e,this.host,t))},call$1:function(e){return this.call$2(e,null)},$signature:53},M.Uri_parseIPv6Address_parseHex.prototype={call$2:function(e,t){var n;return t-e>4&&this.error.call$2("an IPv6 part can only contain a maximum of 4 hex digits",e),"number"!=typeof(n=M.int_parse(w.JSString_methods.substring$2(this.host,e,t),null,16))?n.$lt():((n<0||n>65535)&&this.error.call$2("each part must be in the range of `0x0..0xFFFF`",e),n)},$signature:54},M._Uri.prototype={get$userInfo:function(){return this._userInfo},get$host:function(){var e=this._host;return null==e?"":w.JSString_methods.startsWith$1(e,"[")?w.JSString_methods.substring$2(e,1,e.length-1):e},get$port:function(){var e=this._port;return null==e?M._Uri__defaultPort(this.scheme):e},get$query:function(){var e=this._query;return null==e?"":e},get$fragment:function(){var e=this._fragment;return null==e?"":e},get$hasScheme:function(){return 0!==this.scheme.length},get$hasAuthority:function(){return null!=this._host},get$hasQuery:function(){return null!=this._query},get$hasFragment:function(){return null!=this._fragment},get$hasAbsolutePath:function(){return w.JSString_methods.startsWith$1(this.path,"/")},toString$0:function(e){var t,n,r,i=this._text;return null==i&&(t=0!==(i=this.scheme).length?i+":":"",(r=null==(n=this._host))&&"file"!==i?i=t:(i=t+"//",0!==(t=this._userInfo).length&&(i=i+E.S(t)+"@"),r||(i+=n),null!=(t=this._port)&&(i=i+":"+E.S(t))),i+=this.path,null!=(t=this._query)&&(i=i+"?"+t),null!=(t=this._fragment)&&(i=i+"#"+t),i=this._text=(i.charCodeAt(0),i)),i},$eq:function(e,t){var n,r;return null!=t&&(this===t||(T.getInterceptor$(t).$isUri&&this.scheme===t.get$scheme()&&null!=this._host===t.get$hasAuthority()&&this._userInfo==t.get$userInfo()&&this.get$host()==t.get$host()&&this.get$port()==t.get$port()&&this.path===t.get$path()&&!(r=null==(n=this._query))===t.get$hasQuery()?(r&&(n=""),n===t.get$query()&&!(r=null==(n=this._fragment))===t.get$hasFragment()?(r&&(n=""),n=n===t.get$fragment()):n=!1):n=!1,n))},get$hashCode:function(e){var t=this._hashCodeCache;return null==t?this._hashCodeCache=w.JSString_methods.get$hashCode(this.toString$0(0)):t},$isUri:1,get$scheme:function(){return this.scheme},get$path:function(){return this.path}},M._Uri__Uri$notSimple_closure.prototype={call$1:function(e){throw E.wrapException(M.FormatException$("Invalid port",this.uri,this.portStart+1))},$signature:60},M.UriData.prototype={get$uri:function(e){var t,n,r,i,o=this._uriCache;return null!=o?o:0>=(o=this._separatorIndices).length?E.ioore(o,0):(t=this._text,o=o[0]+1,n=w.JSString_methods.indexOf$2(t,"?",o),r=t.length,n>=0?(i=M._Uri__normalizeOrSubstring(t,n+1,r,w.List_CVk,!1),r=n):i=null,this._uriCache=new M._DataUri("data",null,null,null,M._Uri__normalizeOrSubstring(t,o,r,w.List_qg4,!1),i,null))},get$mimeType:function(){var e,t,n=this._separatorIndices,r=n.length;return 0>=r?E.ioore(n,0):(e=n[0]+1,1>=r?E.ioore(n,1):e===(t=n[1])?"text/plain":M._Uri__uriDecode(this._text,e,t,w.C_Utf8Codec,!1))},contentAsBytes$0:function(){var e,t,n,r,i,o,a,s,l,c=this._text,u=this._separatorIndices,h=w.JSArray_methods.get$last(u)+1;if(1==(1&u.length))return w.C_Base64Decoder.convert$2(c,h);for(e=(u=c.length)-h,t=h;t<u;++t)37===w.JSString_methods.codeUnitAt$1(c,t)&&(t+=2,e-=2);if(n=new Uint8Array(e),e===u)return w.NativeUint8List_methods.setRange$4(n,0,e,new E.CodeUnits(c),h),n;for(r=n.length,t=h,i=0;t<u;++t){if(37===(o=w.JSString_methods.codeUnitAt$1(c,t))){if((s=t+2)<u&&(l=E.parseHexByte(c,t+1))>=0){if(a=i+1,i>=r)return E.ioore(n,i);n[i]=l,t=s,i=a;continue}throw E.wrapException(M.FormatException$("Invalid percent escape",c,t))}if(a=i+1,i>=r)return E.ioore(n,i);n[i]=o,i=a}return n},toString$0:function(e){var t,n=this._separatorIndices;return 0>=n.length?E.ioore(n,0):(t=this._text,-1===n[0]?"data:"+t:t)}},M._createTables_closure.prototype={call$1:function(e){return new Uint8Array(96)},$signature:62},M._createTables_build.prototype={call$2:function(e,t){var n=this.tables;return e>=n.length?E.ioore(n,e):(n=n[e],T.fillRange$3$x(n,0,96,t),n)},$signature:63},M._createTables_setChars.prototype={call$3:function(e,t,n){var r,i,o,a;for(r=t.length,i=e.length,o=0;o<r;++o){if((a=96^w.JSString_methods._codeUnitAt$1(t,o))>=i)return E.ioore(e,a);e[a]=n}}},M._createTables_setRange.prototype={call$3:function(e,t,n){var r,i,o,a;for(r=w.JSString_methods._codeUnitAt$1(t,0),i=w.JSString_methods._codeUnitAt$1(t,1),o=e.length;r<=i;++r){if((a=(96^r)>>>0)>=o)return E.ioore(e,a);e[a]=n}}},M._SimpleUri.prototype={get$hasScheme:function(){return this._schemeEnd>0},get$hasAuthority:function(){return this._hostStart>0},get$hasQuery:function(){var e=this._queryStart;return"number"!=typeof e?e.$lt():e<this._fragmentStart},get$hasFragment:function(){return this._fragmentStart<this._uri.length},get$_isHttp:function(){return 4===this._schemeEnd&&w.JSString_methods.startsWith$1(this._uri,"http")},get$_isHttps:function(){return 5===this._schemeEnd&&w.JSString_methods.startsWith$1(this._uri,"https")},get$hasAbsolutePath:function(){return w.JSString_methods.startsWith$2(this._uri,"/",this._pathStart)},get$scheme:function(){var e,t=this._schemeEnd;return t<=0?"":null!=(e=this._schemeCache)?e:(this.get$_isHttp()?t=this._schemeCache="http":this.get$_isHttps()?(this._schemeCache="https",t="https"):4===t&&w.JSString_methods.startsWith$1(this._uri,"file")?(this._schemeCache="file",t="file"):7===t&&w.JSString_methods.startsWith$1(this._uri,"package")?(this._schemeCache="package",t="package"):(t=w.JSString_methods.substring$2(this._uri,0,t),this._schemeCache=t),t)},get$userInfo:function(){var e=this._hostStart,t=this._schemeEnd+3;return e>t?w.JSString_methods.substring$2(this._uri,t,e-1):""},get$host:function(){var e=this._hostStart;return e>0?w.JSString_methods.substring$2(this._uri,e,this._portStart):""},get$port:function(){var e,t;if(this._hostStart>0){if("number"!=typeof(e=this._portStart))return e.$add();if("number"!=typeof(t=this._pathStart))return E.iae(t);e=t=e+1<t}else e=!1;return e?"number"!=typeof(e=this._portStart)?e.$add():M.int_parse(w.JSString_methods.substring$2(this._uri,e+1,this._pathStart),null,null):this.get$_isHttp()?80:this.get$_isHttps()?443:0},get$path:function(){return w.JSString_methods.substring$2(this._uri,this._pathStart,this._queryStart)},get$query:function(){var e=this._queryStart,t=this._fragmentStart;return"number"!=typeof e?e.$lt():e<t?w.JSString_methods.substring$2(this._uri,e+1,t):""},get$fragment:function(){var e=this._fragmentStart,t=this._uri;return e<t.length?w.JSString_methods.substring$1(t,e+1):""},get$hashCode:function(e){var t=this._hashCodeCache;return null==t?this._hashCodeCache=w.JSString_methods.get$hashCode(this._uri):t},$eq:function(e,t){return null!=t&&(this===t||!!T.getInterceptor$(t).$isUri&&this._uri===t.toString$0(0))},toString$0:function(e){return this._uri},$isUri:1},M._DataUri.prototype={},M._convertDataTree__convert.prototype={call$1:function(e){var t,n,r,i,o=this._convertedObjects;if(o.containsKey$1(e))return o.$index(0,e);if((t=T.getInterceptor$(e)).$isMap){for(n={},o.$indexSet(0,e,n),o=(o=e.get$keys()).get$iterator(o);o.moveNext$0();)n[r=o.get$current()]=this.call$1(e.$index(0,r));return n}return t.$isIterable?(i=[],o.$indexSet(0,e,i),w.JSArray_methods.addAll$1(i,t.map$1$1(e,this,null)),i):e},$signature:4},M.Uint8List.prototype={$isEfficientLengthIterable:1,$asEfficientLengthIterable:function(){return[M.int]},$isIterable:1,$asIterable:function(){return[M.int]},$isList:1,$asList:function(){return[M.int]}},C.Accessor.prototype={get$_isMatrixWithGaps:function(){var e,t=this.componentType;return t=!!(e=(5121===t||5120===t)&&("MAT2"===(e=this.type)||"MAT3"===e))||(5123===t||5122===t)&&"MAT3"===this.type},get$components:function(){var e=w.Map_A1ato.$index(0,this.type);return null==e?0:e},get$elementLength:function(){var e=this.componentType;return 5121===e||5120===e?"MAT2"===(e=this.type)?6:"MAT3"===e?11:this.get$components():5123===e||5122===e?"MAT3"===this.type?22:2*this.get$components():4*this.get$components()},get$byteStride:function(){var e=this._byteStride;return 0!==e?e:5121===(e=this.componentType)||5120===e?"MAT2"===(e=this.type)?8:"MAT3"===e?12:this.get$components():5123===e||5122===e?"MAT3"===this.type?24:2*this.get$components():4*this.get$components()},get$byteLength:function(){return this.get$byteStride()*(this.count-1)+this.get$elementLength()},link$2:function(e,t){var n,r,i,o,a="bufferView",s=e.bufferViews,l=this._accessor$_bufferViewIndex,c=E.interceptedTypeCheck(s.$index(0,l),"$isBufferView");if(this._bufferView=c,(n=null==c)||-1===c.byteStride||(this._byteStride=c.byteStride),-1!==this.componentType&&-1!==this.count&&null!=this.type&&(-1!==l&&(n?t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([l],[M.Object]),a):(c._isUsed=!0,-1!==(c=c.byteStride)&&c<this.get$elementLength()&&t.addIssue$2$args(K.$get$LinkError_accessorSmallStride(),E.setRuntimeTypeInfo([this._bufferView.byteStride,this.get$elementLength()],[M.Object])),C.Accessor__checkByteOffsetAndLength(this.byteOffset,this.componentLength,this.get$byteLength(),this._bufferView,l,t))),null!=(l=this.sparse))){if(n=-1===(c=l.count))return;if(n=t.path,w.JSArray_methods.add$1(n,"sparse"),c>(r=this.count)&&t.addIssue$3$args$name(K.$get$SemanticError_accessorSparseCountOutOfRange(),E.setRuntimeTypeInfo([c,r],[M.Object]),"count"),i=(r=l.values)._accessor$_bufferViewIndex,r._bufferView=E.interceptedTypeCheck(s.$index(0,i),"$isBufferView"),w.JSArray_methods.add$1(n,"indices"),-1!==(l=(o=l.indices)._accessor$_bufferViewIndex)&&(s=E.interceptedTypeCheck(s.$index(0,l),"$isBufferView"),o._bufferView=s,null==s?t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([l],[M.Object]),a):(s.setUsage$3(w.BufferViewUsage_Other,a,t),-1!==o._bufferView.byteStride&&t.addIssue$2$name(K.$get$SemanticError_bufferViewInvalidByteStride(),a),-1!==(s=o.componentType)&&C.Accessor__checkByteOffsetAndLength(o.byteOffset,$.componentTypeLength(s),$.componentTypeLength(s)*c,o._bufferView,l,t))),0>=n.length)return E.ioore(n,-1);if(n.pop(),w.JSArray_methods.add$1(n,"values"),-1!==i&&(null==(s=r._bufferView)?t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([i],[M.Object]),a):(s.setUsage$3(w.BufferViewUsage_Other,a,t),-1!==r._bufferView.byteStride&&t.addIssue$2$name(K.$get$SemanticError_bufferViewInvalidByteStride(),a),s=this.componentLength,null==(l=w.Map_A1ato.$index(0,this.type))&&(l=0),C.Accessor__checkByteOffsetAndLength(r.byteOffset,s,s*l*c,r._bufferView,i,t))),0>=n.length)return E.ioore(n,-1);if(n.pop(),0>=n.length)return E.ioore(n,-1);n.pop()}},setUsage$3:function(e,t,n){var r;this._isUsed=!0,null==(r=this._accessor$_usage)?this._accessor$_usage=e:r!==e&&n.addIssue$3$args$name(K.$get$LinkError_accessorUsageOverride(),E.setRuntimeTypeInfo([r,e],[M.Object]),t)},trySetInterpolation$1$cubic:function(e){var t=this._containsCubicSpline;if(null==t)this._containsCubicSpline=e;else if(t!==e)return!1;return!0},normalizeValue$1:function(e){var t,n;return E.numTypeCheck(e),this.normalized&&5126!==this.componentType?(t=8*this.componentLength,5120===(n=this.componentType)||5122===n||5124===n?(n=w.JSInt_methods.$shl(1,t-1),"number"!=typeof e?e.$div():Math.max(e/(n-1),-1)):(n=w.JSInt_methods.$shl(1,t),"number"!=typeof e?e.$div():e/(n-1))):(e.toString,e)}},C._AccessorInt.prototype={getElements$0:function(){var e=this;return M._makeSyncStarIterable((function(){var t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,v,y=0;return function(_,b){for(1===_&&(t=b,y=2);;)switch(y){case 0:if(-1===(v=e.componentType)||-1===e.count||null==e.type){y=1;break}if(n=e.get$components(),r=e.count,null!=(i=e._bufferView)){if(null==(null==(i=i._buffer)?null:i.data)){y=1;break}if(e.get$byteStride()<e.get$elementLength()){y=1;break}if(i=e.byteOffset,o=e.componentLength,!C.Accessor__checkByteOffsetAndLength(i,o,e.get$byteLength(),e._bufferView,null,null)){y=1;break}if(a=e._bufferView,null==(s=C.Accessor__typedViewInt(v,a._buffer.data.buffer,a.byteOffset+i,w.JSInt_methods.$tdiv(e.get$byteLength(),o)))){y=1;break}l=s.length,e.get$_isMatrixWithGaps()?(i=w.JSInt_methods.$tdiv(e.get$byteStride(),o),o="MAT2"===e.type,a=o?8:12,c=o?2:3,u=new C._AccessorInt_getElements_closure(l,s,c,c,i-a).call$0()):u=new C._AccessorInt_getElements_closure0(s).call$3(l,n,w.JSInt_methods.$tdiv(e.get$byteStride(),o)-n)}else u=M.Iterable_Iterable$generate(r*n,new C._AccessorInt_getElements_closure1,M.int);if(null!=(i=e.sparse)){if(o=i.values,a=o.byteOffset,h=-1===a||(null==(h=o._bufferView)||(-1===h.byteLength||(-1===h.byteOffset||(null==(null==(h=h._buffer)?null:h.data)||(-1===(h=i.indices).componentType||(-1===h.byteOffset||(null==(h=h._bufferView)||(-1===h.byteLength||(-1===h.byteOffset||null==(null==(h=h._buffer)?null:h.data))))))))))){y=1;break}if((h=i.count)>r){y=1;break}if(r=i.indices,i=r.byteOffset,d=r.componentType,C.Accessor__checkByteOffsetAndLength(i,$.componentTypeLength(d),$.componentTypeLength(d)*h,r._bufferView,null,null)?(p=e.componentLength,null==(f=w.Map_A1ato.$index(0,e.type))&&(f=0),f=!C.Accessor__checkByteOffsetAndLength(a,p,p*f*h,o._bufferView,null,null),p=f):p=!0,p){y=1;break}if(r=r._bufferView,m=C.Accessor__typedViewIndices(d,r._buffer.data.buffer,r.byteOffset+i,h),o=o._bufferView,g=C.Accessor__typedViewInt(v,o._buffer.data.buffer,o.byteOffset+a,h*n),null==m||null==g){y=1;break}u=new C._AccessorInt_getElements_closure2(e,m,u,n,g).call$0()}return y=3,M._IterationMarker_yieldStar(u);case 3:case 1:return M._IterationMarker_endOfIteration();case 2:return M._IterationMarker_uncaughtError(t)}}}),M.int)},getElementsNormalized$0:function(){var e=this;return M._makeSyncStarIterable((function(){var t,n,r,i,o,a,s=0;return function(l,c){for(1===l&&(t=c,s=1);;)switch(s){case 0:o=8*e.componentLength,a=5120===(a=e.componentType)||5122===a||5124===a,n=M.double,s=a?2:4;break;case 2:return a=w.JSInt_methods.$shl(1,o-1),(r=e.getElements$0()).toString,i=E.getRuntimeTypeArgument(r,"Iterable",0),s=5,M._IterationMarker_yieldStar(E.MappedIterable_MappedIterable(r,E.functionTypeCheck(new C._AccessorInt_getElementsNormalized_closure(1/(a-1)),{func:1,ret:n,args:[i]}),i,n));case 5:s=3;break;case 4:return a=w.JSInt_methods.$shl(1,o),(r=e.getElements$0()).toString,i=E.getRuntimeTypeArgument(r,"Iterable",0),s=6,M._IterationMarker_yieldStar(E.MappedIterable_MappedIterable(r,E.functionTypeCheck(new C._AccessorInt_getElementsNormalized_closure0(1/(a-1)),{func:1,ret:n,args:[i]}),i,n));case 6:case 3:return M._IterationMarker_endOfIteration();case 1:return M._IterationMarker_uncaughtError(t)}}}),M.double)},$asAccessor:function(){return[M.int]}},C._AccessorInt_getElements_closure.prototype={call$0:function(){var e=this;return M._makeSyncStarIterable((function(){var t,n,r,i,o,a,s,l,c,u,h=0;return function(d,p){for(1===d&&(t=p,h=2);;)switch(h){case 0:n=e.length,r=e.rowCount,i=e.view,o=i.length,a=e.columnCount,s=e.skip,l=0,c=0,u=0;case 3:if(!(l<n)){h=4;break}if(l<0||l>=o){E.ioore(i,l),h=1;break}return h=5,i[l];case 5:++l,++c===r&&(l+=4-c,++u===a&&(l+=s,u=0),c=0),h=3;break;case 4:case 1:return M._IterationMarker_endOfIteration();case 2:return M._IterationMarker_uncaughtError(t)}}}),M.int)},$signature:17},C._AccessorInt_getElements_closure0.prototype={call$3:function(e,t,n){var r=this;return M._makeSyncStarIterable((function(){var i,o,a,s,l,c=e,u=t,h=n,d=0;return function(e,t){for(1===e&&(i=t,d=2);;)switch(d){case 0:o=r.view,a=o.length,s=0,l=0;case 3:if(!(s<c)){d=4;break}if(s<0||s>=a){E.ioore(o,s),d=1;break}return d=5,o[s];case 5:++s,++l===u&&(s+=h,l=0),d=3;break;case 4:case 1:return M._IterationMarker_endOfIteration();case 2:return M._IterationMarker_uncaughtError(i)}}}),M.int)}},C._AccessorInt_getElements_closure1.prototype={call$1:function(e){return E.intTypeCheck(e),0},$signature:18},C._AccessorInt_getElements_closure2.prototype={call$0:function(){var e=this;return M._makeSyncStarIterable((function(){var t,n,r,i,o,a,s,l,c,u,h,d,p,f=0;return function(m,g){for(1===m&&(t=g,f=2);;)switch(f){case 0:if(d=e.indices,0>=(p=d.length)){E.ioore(d,0),f=1;break}n=d[0],r=T.get$iterator$ax(e.baseElements),i=e.components,o=e.$this.sparse,a=e.values,s=a.length,l=0,c=0,u=0;case 3:if(!r.moveNext$0()){f=4;break}if(h=r.get$current(),c===i){if(l===n&&u!==o.count-1){if(++u>=p){E.ioore(d,u),f=1;break}n=d[u]}++l,c=0}f=l===n?5:7;break;case 5:if((h=u*i+c)>=s){E.ioore(a,h),f=1;break}return f=8,a[h];case 8:f=6;break;case 7:return f=9,h;case 9:case 6:++c,f=3;break;case 4:case 1:return M._IterationMarker_endOfIteration();case 2:return M._IterationMarker_uncaughtError(t)}}}),M.int)},$signature:17},C._AccessorInt_getElementsNormalized_closure.prototype={call$1:function(e){return E.intTypeCheck(e),"number"!=typeof e?e.$mul():Math.max(e*this.denom,-1)},$signature:5},C._AccessorInt_getElementsNormalized_closure0.prototype={call$1:function(e){return E.intTypeCheck(e),"number"!=typeof e?e.$mul():e*this.denom},$signature:5},C._AccessorFloat.prototype={getElements$0:function(){var e=this;return M._makeSyncStarIterable((function(){var t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,v,y=0;return function(_,b){for(1===_&&(t=b,y=2);;)switch(y){case 0:if(-1===(v=e.componentType)||-1===e.count||null==e.type){y=1;break}if(n=e.get$components(),r=e.count,null!=(i=e._bufferView)){if(null==(null==(i=i._buffer)?null:i.data)){y=1;break}if(e.get$byteStride()<e.get$elementLength()){y=1;break}if(i=e.byteOffset,o=e.componentLength,!C.Accessor__checkByteOffsetAndLength(i,o,e.get$byteLength(),e._bufferView,null,null)){y=1;break}if(a=e._bufferView,null==(s=C.Accessor__typedViewFloat(v,a._buffer.data.buffer,a.byteOffset+i,w.JSInt_methods.$tdiv(e.get$byteLength(),o)))){y=1;break}l=s.length,e.get$_isMatrixWithGaps()?(i=w.JSInt_methods.$tdiv(e.get$byteStride(),o),o="MAT2"===e.type,a=o?8:12,c=o?2:3,u=new C._AccessorFloat_getElements_closure(l,s,c,c,i-a).call$0()):u=new C._AccessorFloat_getElements_closure0(s).call$3(l,n,w.JSInt_methods.$tdiv(e.get$byteStride(),o)-n)}else u=M.Iterable_Iterable$generate(r*n,new C._AccessorFloat_getElements_closure1,M.double);if(null!=(i=e.sparse)){if(o=i.values,a=o.byteOffset,h=-1===a||(null==(h=o._bufferView)||(-1===h.byteLength||(-1===h.byteOffset||(null==(null==(h=h._buffer)?null:h.data)||(-1===(h=i.indices).componentType||(-1===h.byteOffset||(null==(h=h._bufferView)||(-1===h.byteLength||(-1===h.byteOffset||null==(null==(h=h._buffer)?null:h.data))))))))))){y=1;break}if((h=i.count)>r){y=1;break}if(r=i.indices,i=r.byteOffset,d=r.componentType,C.Accessor__checkByteOffsetAndLength(i,$.componentTypeLength(d),$.componentTypeLength(d)*h,r._bufferView,null,null)?(p=e.componentLength,null==(f=w.Map_A1ato.$index(0,e.type))&&(f=0),f=!C.Accessor__checkByteOffsetAndLength(a,p,p*f*h,o._bufferView,null,null),p=f):p=!0,p){y=1;break}if(r=r._bufferView,m=C.Accessor__typedViewIndices(d,r._buffer.data.buffer,r.byteOffset+i,h),o=o._bufferView,g=C.Accessor__typedViewFloat(v,o._buffer.data.buffer,o.byteOffset+a,h*n),null==m||null==g){y=1;break}u=new C._AccessorFloat_getElements_closure2(e,m,u,n,g).call$0()}return y=3,M._IterationMarker_yieldStar(u);case 3:case 1:return M._IterationMarker_endOfIteration();case 2:return M._IterationMarker_uncaughtError(t)}}}),M.double)},getElementsNormalized$0:function(){return this.getElements$0()},$asAccessor:function(){return[M.double]}},C._AccessorFloat_getElements_closure.prototype={call$0:function(){var e=this;return M._makeSyncStarIterable((function(){var t,n,r,i,o,a,s,l,c,u,h=0;return function(d,p){for(1===d&&(t=p,h=2);;)switch(h){case 0:n=e.length,r=e.rowCount,i=e.view,o=i.length,a=e.columnCount,s=e.skip,l=0,c=0,u=0;case 3:if(!(l<n)){h=4;break}if(l<0||l>=o){E.ioore(i,l),h=1;break}return h=5,i[l];case 5:++l,++c===r&&(l+=4-c,++u===a&&(l+=s,u=0),c=0),h=3;break;case 4:case 1:return M._IterationMarker_endOfIteration();case 2:return M._IterationMarker_uncaughtError(t)}}}),M.double)},$signature:19},C._AccessorFloat_getElements_closure0.prototype={call$3:function(e,t,n){var r=this;return M._makeSyncStarIterable((function(){var i,o,a,s,l,c=e,u=t,h=n,d=0;return function(e,t){for(1===e&&(i=t,d=2);;)switch(d){case 0:o=r.view,a=o.length,s=0,l=0;case 3:if(!(s<c)){d=4;break}if(s<0||s>=a){E.ioore(o,s),d=1;break}return d=5,o[s];case 5:++s,++l===u&&(s+=h,l=0),d=3;break;case 4:case 1:return M._IterationMarker_endOfIteration();case 2:return M._IterationMarker_uncaughtError(i)}}}),M.double)}},C._AccessorFloat_getElements_closure1.prototype={call$1:function(e){return E.intTypeCheck(e),0},$signature:5},C._AccessorFloat_getElements_closure2.prototype={call$0:function(){var e=this;return M._makeSyncStarIterable((function(){var t,n,r,i,o,a,s,l,c,u,h,d,p,f=0;return function(m,g){for(1===m&&(t=g,f=2);;)switch(f){case 0:if(d=e.indices,0>=(p=d.length)){E.ioore(d,0),f=1;break}n=d[0],r=T.get$iterator$ax(e.baseElements),i=e.components,o=e.$this.sparse,a=e.values,s=a.length,l=0,c=0,u=0;case 3:if(!r.moveNext$0()){f=4;break}if(h=r.get$current(),c===i){if(l===n&&u!==o.count-1){if(++u>=p){E.ioore(d,u),f=1;break}n=d[u]}++l,c=0}f=l===n?5:7;break;case 5:if((h=u*i+c)>=s){E.ioore(a,h),f=1;break}return f=8,a[h];case 8:f=6;break;case 7:return f=9,h;case 9:case 6:++c,f=3;break;case 4:case 1:return M._IterationMarker_endOfIteration();case 2:return M._IterationMarker_uncaughtError(t)}}}),M.double)},$signature:19},C.AccessorSparse.prototype={get$indicesTypedView:function(){var e=this.indices,t=e._bufferView,n=null==t?null:t._buffer;if(null!=(null==n?null:n.data))return C.Accessor__typedViewIndices(e.componentType,t._buffer.data.buffer,t.byteOffset+e.byteOffset,this.count)}},C.AccessorSparseIndices.prototype={link$2:function(e,t){this._bufferView=E.interceptedTypeCheck(e.bufferViews.$index(0,this._accessor$_bufferViewIndex),"$isBufferView")}},C.AccessorSparseValues.prototype={link$2:function(e,t){this._bufferView=E.interceptedTypeCheck(e.bufferViews.$index(0,this._accessor$_bufferViewIndex),"$isBufferView")}},C.InvalidFloatChecker.prototype={check$4:function(e,t,n,r){return r.toString,r!=1/0&&r!=-1/0&&!isNaN(r)||(e.addIssue$3$args$name(K.$get$DataError_accessorInvalidFloat(),E.setRuntimeTypeInfo([t,r],[M.Object]),this.path),!1)},$asElementChecker:function(){return[M.double]}},C.MinFloatChecker.prototype={check$4:function(e,t,n,r){var i;if(t!==n){if(n>=(i=this._computedMin).length)return E.ioore(i,n);if("number"!=typeof(i=i[n]))return i.$gt();if("number"!=typeof r)return E.iae(r);i=i>r}else i=!0;if(i&&w.JSArray_methods.$indexSet(this._computedMin,n,r),n>=(i=this._providedMin).length)return E.ioore(i,n);if(i=i[n],"number"!=typeof r)return r.$lt();if("number"!=typeof i)return E.iae(i);if(r<i){if(n>=(i=this._invalidMinCount).length)return E.ioore(i,n);w.JSArray_methods.$indexSet(i,n,i[n]+1)}return!0},done$1:function(e){var t,n,r,i,o,a,s,l,c,u,h;for(n=(t=this._computedMin).length,r=this._providedMin,o=(i=this._invalidMinCount).length,a=this.path,s=[M.Object],l=0;l<n;++l){if(l>=r.length)return E.ioore(r,l);if(!T.$eq$(r[l],t[l])){if(c=K.$get$DataError_accessorMinMismatch(),u=a+"/min/"+l,l>=r.length)return E.ioore(r,l);if(e.addIssue$3$args$name(c,E.setRuntimeTypeInfo([r[l],t[l]],s),u),l>=o)return E.ioore(i,l);if(i[l]>0){if(c=K.$get$DataError_accessorElementOutOfMinBound(),u=a+"/min/"+l,h=i[l],l>=r.length)return E.ioore(r,l);e.addIssue$3$args$name(c,E.setRuntimeTypeInfo([h,r[l]],s),u)}}}return!0},$asElementChecker:function(){return[M.double]}},C.MaxFloatChecker.prototype={check$4:function(e,t,n,r){var i;if(t!==n){if(n>=(i=this._computedMax).length)return E.ioore(i,n);if("number"!=typeof(i=i[n]))return i.$lt();if("number"!=typeof r)return E.iae(r);i=i<r}else i=!0;if(i&&w.JSArray_methods.$indexSet(this._computedMax,n,r),n>=(i=this._providedMax).length)return E.ioore(i,n);if(i=i[n],"number"!=typeof r)return r.$gt();if("number"!=typeof i)return E.iae(i);if(r>i){if(n>=(i=this._invalidMaxCount).length)return E.ioore(i,n);w.JSArray_methods.$indexSet(i,n,i[n]+1)}return!0},done$1:function(e){var t,n,r,i,o,a,s,l,c,u,h;for(n=(t=this._computedMax).length,r=this._providedMax,o=(i=this._invalidMaxCount).length,a=this.path,s=[M.Object],l=0;l<n;++l){if(l>=r.length)return E.ioore(r,l);if(!T.$eq$(r[l],t[l])){if(c=K.$get$DataError_accessorMaxMismatch(),u=a+"/max/"+l,l>=r.length)return E.ioore(r,l);if(e.addIssue$3$args$name(c,E.setRuntimeTypeInfo([r[l],t[l]],s),u),l>=o)return E.ioore(i,l);if(i[l]>0){if(c=K.$get$DataError_accessorElementOutOfMaxBound(),u=a+"/max/"+l,h=i[l],l>=r.length)return E.ioore(r,l);e.addIssue$3$args$name(c,E.setRuntimeTypeInfo([h,r[l]],s),u)}}}return!0},$asElementChecker:function(){return[M.double]}},C.MinIntegerChecker.prototype={check$4:function(e,t,n,r){var i;if(E.intTypeCheck(r),t!==n){if(n>=(i=this._computedMin).length)return E.ioore(i,n);if("number"!=typeof(i=i[n]))return i.$gt();if("number"!=typeof r)return E.iae(r);i=i>r}else i=!0;if(i&&w.JSArray_methods.$indexSet(this._computedMin,n,r),n>=(i=this._providedMin).length)return E.ioore(i,n);if(i=i[n],"number"!=typeof r)return r.$lt();if("number"!=typeof i)return E.iae(i);if(r<i){if(n>=(i=this._invalidMinCount).length)return E.ioore(i,n);w.JSArray_methods.$indexSet(i,n,i[n]+1)}return!0},done$1:function(e){var t,n,r,i,o,a,s,l,c,u,h;for(n=(t=this._computedMin).length,r=this._providedMin,o=(i=this._invalidMinCount).length,a=this.path,s=[M.Object],l=0;l<n;++l){if(l>=r.length)return E.ioore(r,l);if(!T.$eq$(r[l],t[l])){if(c=K.$get$DataError_accessorMinMismatch(),u=a+"/min/"+l,l>=r.length)return E.ioore(r,l);if(e.addIssue$3$args$name(c,E.setRuntimeTypeInfo([r[l],t[l]],s),u),l>=o)return E.ioore(i,l);if(i[l]>0){if(c=K.$get$DataError_accessorElementOutOfMinBound(),u=a+"/min/"+l,h=i[l],l>=r.length)return E.ioore(r,l);e.addIssue$3$args$name(c,E.setRuntimeTypeInfo([h,r[l]],s),u)}}}return!0},$asElementChecker:function(){return[M.int]}},C.MaxIntegerChecker.prototype={check$4:function(e,t,n,r){var i;if(E.intTypeCheck(r),t!==n){if(n>=(i=this._computedMax).length)return E.ioore(i,n);if("number"!=typeof(i=i[n]))return i.$lt();if("number"!=typeof r)return E.iae(r);i=i<r}else i=!0;if(i&&w.JSArray_methods.$indexSet(this._computedMax,n,r),n>=(i=this._providedMax).length)return E.ioore(i,n);if(i=i[n],"number"!=typeof r)return r.$gt();if("number"!=typeof i)return E.iae(i);if(r>i){if(n>=(i=this._invalidMaxCount).length)return E.ioore(i,n);w.JSArray_methods.$indexSet(i,n,i[n]+1)}return!0},done$1:function(e){var t,n,r,i,o,a,s,l,c,u,h;for(n=(t=this._computedMax).length,r=this._providedMax,o=(i=this._invalidMaxCount).length,a=this.path,s=[M.Object],l=0;l<n;++l){if(l>=r.length)return E.ioore(r,l);if(!T.$eq$(r[l],t[l])){if(c=K.$get$DataError_accessorMaxMismatch(),u=a+"/max/"+l,l>=r.length)return E.ioore(r,l);if(e.addIssue$3$args$name(c,E.setRuntimeTypeInfo([r[l],t[l]],s),u),l>=o)return E.ioore(i,l);if(i[l]>0){if(c=K.$get$DataError_accessorElementOutOfMaxBound(),u=a+"/max/"+l,h=i[l],l>=r.length)return E.ioore(r,l);e.addIssue$3$args$name(c,E.setRuntimeTypeInfo([h,r[l]],s),u)}}}return!0},$asElementChecker:function(){return[M.int]}},$.Animation.prototype={link$2:function(e,t){var n,r,i,o,a,s=this.samplers;if(null!=s&&null!=this.channels){if(n=t.path,w.JSArray_methods.add$1(n,"samplers"),s.forEachWithIndices$1(new $.Animation_link_closure(t,e)),0>=n.length)return E.ioore(n,-1);if(n.pop(),w.JSArray_methods.add$1(n,"channels"),this.channels.forEachWithIndices$1(new $.Animation_link_closure0(this,t,e)),0>=n.length)return E.ioore(n,-1);for(n.pop(),w.JSArray_methods.add$1(n,"samplers"),r=s._utils$_length,i=(s=s._list).length,o=0;o<r;++o){if(a=o>=i)a=null;else{if(o>=i)return E.ioore(s,o);a=s[o]}a._isUsed||t.addIssue$2$index(K.$get$LinkError_unusedObject(),o)}if(0>=n.length)return E.ioore(n,-1);n.pop()}}},$.Animation_link_closure.prototype={call$2:function(e,t){var n,r,i,o,a,s;if(E.interceptedTypeCheck(t,"$isAnimationSampler"),r=(n=this.context).path,w.JSArray_methods.add$1(r,w.JSInt_methods.toString$0(e)),i=this.gltf.accessors,o=t._inputIndex,t.set$_input(i.$index(0,o)),a=t._outputIndex,t.set$_output(i.$index(0,a)),-1!==o)if(null==(i=t._input))n.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([o],[M.Object]),"input");else{if(i.setUsage$3(w.AccessorUsage_AnimationInput,"input",n),null!=(i=t._input._bufferView)&&i.setUsage$3(w.BufferViewUsage_Other,"input",n),w.JSArray_methods.add$1(r,"input"),i=t._input,(s=new I.AccessorFormat(i.type,i.componentType,i.normalized)).$eq(0,w.AccessorFormat_SCALAR_5126_false)?n.addElementChecker$2(t._input,new $.AnimationInputChecker(n.getPointerString$0())):n.addIssue$2$args(K.$get$LinkError_animationSamplerInputAccessorInvalidFormat(),E.setRuntimeTypeInfo([s,E.setRuntimeTypeInfo([w.AccessorFormat_SCALAR_5126_false],[I.AccessorFormat])],[M.Object])),null!=(i=t._input).min&&null!=i.max||n.addIssue$1(K.$get$LinkError_animationSamplerInputAccessorWithoutBounds()),"CUBICSPLINE"===t.interpolation&&t._input.count<2&&n.addIssue$2$args(K.$get$LinkError_animationSamplerInputAccessorTooFewElements(),E.setRuntimeTypeInfo(["CUBICSPLINE",2,t._input.count],[M.Object])),0>=r.length)return E.ioore(r,-1);r.pop()}if(-1!==a&&(null==(i=t._output)?n.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([a],[M.Object]),"output"):(i.setUsage$3(w.AccessorUsage_AnimationOutput,"output",n),null!=(i=t._output._bufferView)&&i.setUsage$3(w.BufferViewUsage_Other,"output",n),t._output.trySetInterpolation$1$cubic("CUBICSPLINE"===t.interpolation))),0>=r.length)return E.ioore(r,-1);r.pop()},$signature:107},$.Animation_link_closure0.prototype={call$2:function(e,t){var n,r,i,o,a,s,l,c,u,h,d,p,f,m,g="sampler";if(E.interceptedTypeCheck(t,"$isAnimationChannel"),r=(n=this.context).path,w.JSArray_methods.add$1(r,w.JSInt_methods.toString$0(e)),i=this.$this,o=t._animation$_samplerIndex,t._animation$_sampler=E.interceptedTypeCheck(i.samplers.$index(0,o),"$isAnimationSampler"),(s=null!=(a=t.target))&&(l=a._nodeIndex,a._node=E.interceptedTypeCheck(this.gltf.nodes.$index(0,l),"$isNode"),-1!==l)){if(w.JSArray_methods.add$1(r,"target"),null==(c=a._node))n.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([l],[M.Object]),"node");else switch(c._isUsed=!0,a.path){case"translation":case"rotation":case"scale":null!=c.matrix&&n.addIssue$1(K.$get$LinkError_animationChannelTargetNodeMatrix()),null!=a._node._skin&&n.addIssue$2$name(K.$get$SemanticError_animationChannelTargetNodeSkin(),"path");break;case"weights":null==(null==(l=null==(l=null==(l=c._mesh)?null:l.primitives)?null:l.get$first(l))?null:l._targets)&&n.addIssue$1(K.$get$LinkError_animationChannelTargetNodeWeightsNoMorphs())}if(0>=r.length)return E.ioore(r,-1);r.pop()}if(-1!==o){if(null==(l=t._animation$_sampler))n.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([o],[M.Object]),g);else if(l._isUsed=!0,s&&null!=l._output){if("rotation"===(o=a.path)){if(4===(u=l._output).get$components()){if(w.JSArray_methods.add$1(r,g),l=n.getPointerString$0(),c=5126===u.componentType?null:u.get$normalizeValue(),n.addElementChecker$2(u,new $.QuaternionFloatChecker("CUBICSPLINE"===t._animation$_sampler.interpolation,c,l,[M.num])),0>=r.length)return E.ioore(r,-1);r.pop()}(l=t._animation$_sampler)._output.toString}l=l._output,h=new I.AccessorFormat(l.type,l.componentType,l.normalized),!1===(null==(d=w.Map_0nNZ.$index(0,o))?null:w.JSArray_methods.contains$1(d,h))&&n.addIssue$3$args$name(K.$get$LinkError_animationSamplerOutputAccessorInvalidFormat(),E.setRuntimeTypeInfo([h,d,o],[M.Object]),g),null!=(c=(l=t._animation$_sampler)._input)&&-1!==c.count&&-1!==l._output.count&&null!=l.interpolation&&(p=c.count,"CUBICSPLINE"===l.interpolation&&(p*=3),"weights"===o&&(p*=null==(f=null==(o=null==(o=null==(o=null==(o=null==(o=a._node)?null:o._mesh)?null:o.primitives)?null:o.get$first(o))?null:o._targets)?null:o.length)?0:f),0!==p&&p!==t._animation$_sampler._output.count&&n.addIssue$3$args$name(K.$get$LinkError_animationSamplerOutputAccessorInvalidCount(),E.setRuntimeTypeInfo([p,t._animation$_sampler._output.count],[M.Object]),g))}for(m=e+1,o=(i=i.channels)._utils$_length,l=[M.Object];m<o;++m){if(s){if(c=m>=i._list.length)c=null;else{if(m>=(c=i._list).length)return E.ioore(c,m);c=c[m]}c=null!=(c=c.target)&&a._nodeIndex===c._nodeIndex&&a.path==c.path}else c=!1;c&&n.addIssue$3$args$name(K.$get$LinkError_animationDuplicateTargets(),E.setRuntimeTypeInfo([m],l),"target")}if(0>=r.length)return E.ioore(r,-1);r.pop()}},$signature:31},$.AnimationChannel.prototype={},$.AnimationChannelTarget.prototype={},$.AnimationSampler.prototype={set$_input:function(e){this._input=E.assertSubtype(e,"$isAccessor",[M.num],"$asAccessor")},set$_output:function(e){this._output=E.assertSubtype(e,"$isAccessor",[M.num],"$asAccessor")}},$.AnimationInputChecker.prototype={check$4:function(e,t,n,r){return"number"!=typeof r?r.$lt():(r<0?e.addIssue$3$args$name(K.$get$DataError_accessorAnimationInputNegative(),E.setRuntimeTypeInfo([t,r],[M.Object]),this.path):(0!==t&&r<=this._lastValue&&e.addIssue$3$args$name(K.$get$DataError_accessorAnimationInputNonIncreasing(),E.setRuntimeTypeInfo([t,r,this._lastValue],[M.Object]),this.path),this._lastValue=r),!0)},$asElementChecker:function(){return[M.double]}},$.QuaternionFloatChecker.prototype={check$4:function(e,t,n,r){var i,o;if(E.assertSubtypeOfRuntimeType(r,E.getTypeArgumentByIndex(this,0)),!this.hasTangents||4==(4&this._fullComponentIndex)){if(o=null!=(i=this.normalizeValue)?i.call$1(r):r,i=this._animation$_sum,"number"!=typeof o)return o.$mul();i+=o*o,this._animation$_sum=i,3===n&&(Math.abs(Math.sqrt(i)-1)>.00769&&e.addIssue$3$args$name(K.$get$DataError_accessorAnimationSamplerOutputNonNormalizedQuaternion(),E.setRuntimeTypeInfo([t-3,t,Math.sqrt(this._animation$_sum)],[M.Object]),this.path),this._animation$_sum=0)}return 12==++this._fullComponentIndex&&(this._fullComponentIndex=0),!0}},O.Asset.prototype={get$majorVersion:function(){var e=this.version;return null==e||!K.$get$Asset_versionRegexp()._nativeRegExp.test(e)?0:1>=(e=K.$get$Asset_versionRegexp().firstMatch$1(e)._match).length?E.ioore(e,1):M.int_parse(e[1],null,null)},get$minorVersion:function(){var e=this.version;return null==e||!K.$get$Asset_versionRegexp()._nativeRegExp.test(e)?0:2>=(e=K.$get$Asset_versionRegexp().firstMatch$1(e)._match).length?E.ioore(e,2):M.int_parse(e[2],null,null)},get$majorMinVersion:function(){var e=this.minVersion;return null==e||!K.$get$Asset_versionRegexp()._nativeRegExp.test(e)?2:1>=(e=K.$get$Asset_versionRegexp().firstMatch$1(e)._match).length?E.ioore(e,1):M.int_parse(e[1],null,null)},get$minorMinVersion:function(){var e=this.minVersion;return null==e||!K.$get$Asset_versionRegexp()._nativeRegExp.test(e)?0:2>=(e=K.$get$Asset_versionRegexp().firstMatch$1(e)._match).length?E.ioore(e,2):M.int_parse(e[2],null,null)}},A.Buffer.prototype={},I.BufferView.prototype={setUsage$3:function(e,t,n){var r;this._isUsed=!0,null==(r=this._usage)?this._usage=e:r!==e&&n.addIssue$3$args$name(K.$get$LinkError_bufferViewTargetOverride(),E.setRuntimeTypeInfo([r,e],[M.Object]),t)},link$2:function(e,t){var n,r=this._buffer_view$_bufferIndex,i=E.interceptedTypeCheck(e.buffers.$index(0,r),"$isBuffer");this._buffer=i,this.effectiveByteStride=this.byteStride,34962===(n=this._buffer_view$_target)?this._usage=w.BufferViewUsage_VertexBuffer:34963===n&&(this._usage=w.BufferViewUsage_IndexBuffer),-1!==r&&(null==i?t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([r],[M.Object]),"buffer"):(i._isUsed=!0,-1!==(i=i.byteLength)&&((n=this.byteOffset)>=i?t.addIssue$3$args$name(K.$get$LinkError_bufferViewTooLong(),E.setRuntimeTypeInfo([r,i],[M.Object]),"byteOffset"):n+this.byteLength>i&&t.addIssue$3$args$name(K.$get$LinkError_bufferViewTooLong(),E.setRuntimeTypeInfo([r,i],[M.Object]),"byteLength"))))}},P.Camera.prototype={},P.CameraOrthographic.prototype={},P.CameraPerspective.prototype={},I.Gltf.prototype={validateResources$1:function(e){var t,n,r,i,o;for(new I.Gltf_validateResources_validateResourcesInCollection(this,e).call$1(this.textures),n=(t=e.resourceValidatableExtensions).length,r=e.path,i=0;i<t.length;t.length===n||(0,E.throwConcurrentModificationError)(t),++i)o=t[i],w.JSArray_methods.set$length(r,0),w.JSArray_methods.addAll$1(r,o.path),o.object.validateResources$2(this,e);w.JSArray_methods.set$length(r,0)}},I.Gltf_Gltf$fromMap_resetPath.prototype={call$0:function(){w.JSArray_methods.set$length(this.context.path,0)},$signature:1},I.Gltf_Gltf$fromMap_toSafeList.prototype={call$1$2:function(e,t,n){var r,i,o,a,s,l,c,u,h,d,p;if(E.functionTypeCheck(t,{func:1,ret:n,args:[[M.Map,M.String,M.Object],C.Context]}),!(r=this.map).containsKey$1(e))return(r=new Array(0)).fixed$length=Array,new H.SafeList(E.setRuntimeTypeInfo(r,[n]),0,e,[n]);if(this.resetPath.call$0(),i=r.$index(0,e),(r=T.getInterceptor$(i)).$isList){if(o=[n],a=[n],s=this.context,r.get$isNotEmpty(i)){for(l=r.get$length(i),(c=new Array(l)).fixed$length=Array,o=E.setRuntimeTypeInfo(c,o),c=s.path,w.JSArray_methods.add$1(c,e),h=[u=M.Object],u=[M.String,u],d=0;d<r.get$length(i);++d)if(p=r.$index(i,d),E.checkSubtype(p,"$isMap",u,"$asMap")){if(w.JSArray_methods.add$1(c,w.JSInt_methods.toString$0(d)),w.JSArray_methods.$indexSet(o,d,E.assertSubtypeOfRuntimeType(t.call$2(p,s),n)),0>=c.length)return E.ioore(c,-1);c.pop()}else s.addIssue$3$args$index(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([p,"object"],h),d);return new H.SafeList(o,l,e,a)}return s.addIssue$2$name(K.$get$SchemaError_emptyEntity(),e),(r=new Array(0)).fixed$length=Array,new H.SafeList(E.setRuntimeTypeInfo(r,o),0,e,a)}return this.context.addIssue$3$args$name(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([i,"array"],[M.Object]),e),(r=new Array(0)).fixed$length=Array,new H.SafeList(E.setRuntimeTypeInfo(r,[n]),0,e,[n])},call$2:function(e,t){return this.call$1$2(e,t,null)}},I.Gltf_Gltf$fromMap_toValue.prototype={call$1$3$req:function(e,t,n,r){var i,o;if(E.functionTypeCheck(t,{func:1,ret:r,args:[[M.Map,M.String,M.Object],C.Context]}),this.resetPath.call$0(),i=this.context,null!=(o=H.getMap(this.map,e,i,!0)))return w.JSArray_methods.add$1(i.path,e),t.call$2(o,i)},call$2:function(e,t){return this.call$1$3$req(e,t,!1,null)},call$1$2:function(e,t,n){return this.call$1$3$req(e,t,!1,n)}},I.Gltf_Gltf$fromMap_linkCollection.prototype={call$2:function(e,t){var n,r,i,o,a,s,l;if(E.assertSubtype(e,"$isSafeList",[I.GltfProperty],"$asSafeList"),r=(n=this.context).path,w.JSArray_methods.add$1(r,e.name),i=this.gltf,e.forEachWithIndices$1(new I.Gltf_Gltf$fromMap_linkCollection_closure(n,i)),null!=(o=n.linkableExtensions.$index(0,t))){for(a=T.JSArray_JSArray$markFixed(r.slice(0),E.getTypeArgumentByIndex(r,0)),s=T.get$iterator$ax(o);s.moveNext$0();)l=s.get$current(),w.JSArray_methods.set$length(r,0),w.JSArray_methods.addAll$1(r,l.path),l.object.link$2(i,n);w.JSArray_methods.set$length(r,0),w.JSArray_methods.addAll$1(r,a)}if(0>=r.length)return E.ioore(r,-1);r.pop()},$signature:32},I.Gltf_Gltf$fromMap_linkCollection_closure.prototype={call$2:function(e,t){var n,r;if(E.interceptedTypeCheck(t,"$isGltfProperty"),r=(n=this.context).path,w.JSArray_methods.add$1(r,w.JSInt_methods.toString$0(e)),t.link$2(this.gltf,n),0>=r.length)return E.ioore(r,-1);r.pop()},$signature:33},I.Gltf_Gltf$fromMap_closure.prototype={call$2:function(e,t){var n,r;if(E.stringTypeCheck(e),T.getInterceptor$(t).$isLinkable){if(r=(n=this.context).path,w.JSArray_methods.add$1(r,e),t.link$2(this.gltf,n),0>=r.length)return E.ioore(r,-1);r.pop()}},$signature:6},I.Gltf_Gltf$fromMap_closure0.prototype={call$2:function(e,t){var n,r,i;if(E.interceptedTypeCheck(t,"$isNode"),t.isJoint||null!=t._children||null!=t._mesh||null!=t._camera||0!==t.extensions.__js_helper$_length||null!=t.extras||this.context.addIssue$2$index(K.$get$SemanticError_nodeEmpty(),e),null!=t._parent)for((n=this.seenNodes).clear$0(0),r=t;null!=r._parent;){if(!n.add$1(0,r)){r===t&&this.context.addIssue$2$index(K.$get$LinkError_nodeLoop(),e);break}r=r._parent}null!=t._skin&&(null!=t._parent&&this.context.addIssue$2$index(K.$get$SemanticError_nodeSkinnedMeshNonRoot(),e),(n=!(null!=(n=t.matrix)&&!n.isIdentity$0())&&(!!(n=null==(n=t.translation)||0===(n=n._v3storage)[0]&&0===n[1]&&0===n[2])&&(!!(n=null==(n=t.rotation)||0===(n=n._qStorage)[0]&&0===n[1]&&0===n[2]&&1===n[3])&&(null==(n=t.scale)||1===(n=n._v3storage)[0]&&1===n[1]&&1===n[2]))))||this.context.addIssue$2$index(K.$get$SemanticError_nodeSkinnedMeshLocalTransforms(),e),null!=(i=t._skin._commonRoots.firstWhere$2$orElse(0,new I.Gltf_Gltf$fromMap__closure,new I.Gltf_Gltf$fromMap__closure0))?(n=i._scenes,n=!t._scenes.every$1(0,n.get$contains(n))):n=!1,n&&this.context.addIssue$2$index(K.$get$SemanticError_nodeSkinNoScene(),e))},$signature:35},I.Gltf_Gltf$fromMap__closure.prototype={call$1:function(e){return null==E.interceptedTypeCheck(e,"$isNode")._parent},$signature:36},I.Gltf_Gltf$fromMap__closure0.prototype={call$0:function(){},$signature:2},I.Gltf_validateResources_validateResourcesInCollection.prototype={call$1:function(e){var t,n;if(E.assertSubtype(e,"$isSafeList",[I.ResourceValidatable],"$asSafeList"),n=(t=this.context).path,w.JSArray_methods.set$length(n,0),w.JSArray_methods.add$1(n,e.name),e.forEachWithIndices$1(new I.Gltf_validateResources_validateResourcesInCollection_closure(this.$this,t)),0>=n.length)return E.ioore(n,-1);n.pop()},$signature:37},I.Gltf_validateResources_validateResourcesInCollection_closure.prototype={call$2:function(e,t){var n,r;if(E.interceptedTypeCheck(t,"$isResourceValidatable"),r=(n=this.context).path,w.JSArray_methods.add$1(r,w.JSInt_methods.toString$0(e)),t.validateResources$2(this.$this,n),0>=r.length)return E.ioore(r,-1);r.pop()},$signature:30},I.ResourceValidatable.prototype={},I.GltfProperty.prototype={get$isUsed:function(){return this._isUsed},link$2:function(e,t){},$isLinkable:1},I.GltfChildOfRootProperty.prototype={},O.Image.prototype={link$2:function(e,t){var n,r=this._bufferViewIndex;-1!==r&&(n=E.interceptedTypeCheck(e.bufferViews.$index(0,r),"$isBufferView"),this._image$_bufferView=n,null==n?t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([r],[M.Object]),"bufferView"):n.setUsage$3(w.BufferViewUsage_Image,"bufferView",t))},tryLoadFromBufferView$0:function(){var e,t,n=this._image$_bufferView,r=null==n?null:n._buffer;if(null!=(null==r?null:r.data))try{r=n._buffer.data.buffer,e=n.byteOffset,n=n.byteLength,r.toString,this.data=E.NativeUint8List_NativeUint8List$view(r,e,n)}catch(t){if(!(E.unwrapException(t)instanceof M.ArgumentError))throw t}}},L.Material.prototype={link$2:function(e,t){var n=new L.Material_link_linkWithPath(t,e);n.call$2(this.pbrMetallicRoughness,"pbrMetallicRoughness"),n.call$2(this.normalTexture,"normalTexture"),n.call$2(this.occlusionTexture,"occlusionTexture"),n.call$2(this.emissiveTexture,"emissiveTexture")}},L.Material_link_linkWithPath.prototype={call$2:function(e,t){var n,r;if(null!=e){if(r=(n=this.context).path,w.JSArray_methods.add$1(r,t),e.link$2(this.gltf,n),0>=r.length)return E.ioore(r,-1);r.pop()}},$signature:39},L.PbrMetallicRoughness.prototype={link$2:function(e,t){var n,r=this.baseColorTexture;if(null!=r){if(n=t.path,w.JSArray_methods.add$1(n,"baseColorTexture"),r.link$2(e,t),0>=n.length)return E.ioore(n,-1);n.pop()}if(null!=(r=this.metallicRoughnessTexture)){if(n=t.path,w.JSArray_methods.add$1(n,"metallicRoughnessTexture"),r.link$2(e,t),0>=n.length)return E.ioore(n,-1);n.pop()}}},L.OcclusionTextureInfo.prototype={},L.NormalTextureInfo.prototype={},L.TextureInfo.prototype={link$2:function(e,t){var n,r=this._material$_index,i=E.interceptedTypeCheck(e.textures.$index(0,r),"$isTexture");for(this._texture=i,-1!==r&&(null==i?t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([r],[M.Object]),"index"):i._isUsed=!0),r=t.owners,n=this;null!=n;)if((n=r.$index(0,n))instanceof L.Material){n.texCoordIndices.$indexSet(0,t.getPointerString$0(),this.texCoord);break}}},I.BufferViewUsage.prototype={toString$0:function(e){return this._members$_value}},I.AccessorUsage.prototype={toString$0:function(e){return this._members$_value}},I.AccessorFormat.prototype={toString$0:function(e){return"{"+E.S(this.type)+", "+E.S(w.Map_ZGNO4.$index(0,this.componentType))+(this.normalized?" normalized":"")+"}"},$eq:function(e,t){return null!=t&&(t instanceof I.AccessorFormat&&t.type==this.type&&t.componentType===this.componentType&&t.normalized===this.normalized)},get$hashCode:function(e){return z._finish(z._combine(z._combine(z._combine(0,T.get$hashCode$(this.type)),w.JSInt_methods.get$hashCode(this.componentType)),w.JSBool_methods.get$hashCode(this.normalized)))}},k.Mesh.prototype={link$2:function(e,t){var n,r=t.path;if(w.JSArray_methods.add$1(r,"primitives"),null!=(n=this.primitives)&&n.forEachWithIndices$1(new k.Mesh_link_closure(t,e)),0>=r.length)return E.ioore(r,-1);r.pop()}},k.Mesh_link_closure.prototype={call$2:function(e,t){var n,r;if(E.interceptedTypeCheck(t,"$isMeshPrimitive"),r=(n=this.context).path,w.JSArray_methods.add$1(r,w.JSInt_methods.toString$0(e)),t.link$2(this.gltf,n),0>=r.length)return E.ioore(r,-1);r.pop()},$signature:20},k.MeshPrimitive.prototype={get$trianglesCount:function(){switch(this.mode){case 4:return w.JSInt_methods._tdivFast$1(this._count,3);case 5:case 6:var e=this._count;return e>2?e-2:0;default:return 0}},link$2:function(e,t){var n,r,i,o,a,s,l,c,u,h,d,p="indices",f=this._attributesIndices;if(null!=f){if(n=t.path,w.JSArray_methods.add$1(n,"attributes"),f.forEach$1(0,new k.MeshPrimitive_link_closure(this,e,t)),0>=n.length)return E.ioore(n,-1);n.pop()}if(-1!==(f=this._indicesIndex))if(this.set$_indices(e.accessors.$index(0,f)),null==(n=this._indices))t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([f],[M.Object]),p);else{if(this._count=n.count,n.setUsage$3(w.AccessorUsage_PrimitiveIndices,p,t),null!=(f=this._indices._bufferView)&&f.setUsage$3(w.BufferViewUsage_IndexBuffer,p,t),f=t.path,w.JSArray_methods.add$1(f,p),null!=(n=this._indices._bufferView)&&-1!==n.byteStride&&t.addIssue$1(K.$get$LinkError_meshPrimitiveIndicesAccessorWithByteStride()),n=this._indices,r=new I.AccessorFormat(n.type,n.componentType,n.normalized),w.JSArray_methods.contains$1(w.List_AKA,r)?(i=-1!==(n=this._vertexCount)?n-1:-1,0!==(o=-1!==(n=this.mode)?w.JSInt_methods.$shl(1,n):-1)&&i>=-1&&(n=this._indices,a=t.getPointerString$0(),s=w.JSInt_methods._tdivFast$1(this._count,3),l=this._indices.componentType,c=new Uint32Array(3),t.addElementChecker$2(n,new k.IndexBufferIntegerChecker(i,s,$.typeMax(l),16==(16&o),c,a)))):t.addIssue$2$args(K.$get$LinkError_meshPrimitiveIndicesAccessorInvalidFormat(),E.setRuntimeTypeInfo([r,w.List_AKA],[M.Object])),0>=f.length)return E.ioore(f,-1);f.pop()}if(f=-1!==(f=this._count)&&(1===(n=this.mode)&&f%2!=0||((2===n||3===n)&&f<2||(4===n&&f%3!=0||(5===n||6===n)&&f<3)))){if(f=K.$get$LinkError_meshPrimitiveIncompatibleMode(),n=this._count,(a=this.mode)<0||a>=7)return E.ioore(w.List_WJh,a);t.addIssue$2$args(f,E.setRuntimeTypeInfo([n,w.List_WJh[a]],[M.Object]))}for(f=this._materialIndex,this._material=E.interceptedTypeCheck(e.materials.$index(0,f),"$isMaterial"),u=M.List_List$generate(this.texcoordCount,new k.MeshPrimitive_link_closure0,!1,M.int),-1!==f&&(null==(n=this._material)?t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([f],[M.Object]),"material"):(n._isUsed=!0,n.texCoordIndices.forEach$1(0,new k.MeshPrimitive_link_closure1(this,t,u)))),f=E.getTypeArgumentByIndex(u,0),n=E.functionTypeCheck(new k.MeshPrimitive_link_closure2,{func:1,ret:M.bool,args:[f]}),a=w.JSArray_methods.get$iterator(u),f=new E.WhereIterator(a,n,[f]),n=t.path;f.moveNext$0();){if(s=a.get$current(),w.JSArray_methods.add$1(n,"attributes"),t.addIssue$2$name(K.$get$LinkError_unusedObject(),"TEXCOORD_"+E.S(s)),0>=n.length)return E.ioore(n,-1);n.pop()}if(null!=(f=this._targetsIndices)){for(n=t.path,w.JSArray_methods.add$1(n,"targets"),(a=new Array(f.length)).fixed$length=Array,this.set$_targets(E.setRuntimeTypeInfo(a,[[M.Map,M.String,[C.Accessor,M.num]]])),a=M.String,s=[C.Accessor,M.num],h=0;h<f.length;++h){if(d=f[h],((l=this._targets)&&w.JSArray_methods).$indexSet(l,h,M.LinkedHashMap_LinkedHashMap$_empty(a,s)),w.JSArray_methods.add$1(n,w.JSInt_methods.toString$0(h)),d.forEach$1(0,new k.MeshPrimitive_link_closure3(this,e,t,h)),0>=n.length)return E.ioore(n,-1);n.pop()}if(0>=n.length)return E.ioore(n,-1);n.pop()}},_checkAccessorRefs$3:function(e,t,n){var r,i;E.assertSubtype(e,"$isAccessor",[M.num],"$asAccessor"),-1===(r=e._bufferView).byteStride&&(i=n.bufferViewAccessors.putIfAbsent$2(r,new k.MeshPrimitive__checkAccessorRefs_closure)).add$1(0,e)&&i.get$length(i)>1&&n.addIssue$2$name(K.$get$LinkError_meshPrimitiveAccessorWithoutByteStride(),t)},set$_targets:function(e){this._targets=E.assertSubtype(e,"$isList",[[M.Map,M.String,[C.Accessor,M.num]]],"$asList")},set$_indices:function(e){this._indices=E.assertSubtype(e,"$isAccessor",[M.num],"$asAccessor")}},k.MeshPrimitive_MeshPrimitive$fromMap_checkAttributeSemanticName.prototype={call$1:function(e){var t,n,r,i,o,a,s,l,c,u,h,d,p,f;if(0===e.length||95!==T._codeUnitAt$1$s(e,0))switch(e){case"POSITION":this._box_0.hasPosition=!0;break;case"NORMAL":this._box_0.hasNormal=!0;break;case"TANGENT":this._box_0.hasTangent=!0;break;default:if(0>=(n=(t=E.setRuntimeTypeInfo(e.split("_"),[M.String])).length))return E.ioore(t,0);if(r=t[0],!w.JSArray_methods.contains$1(w.List_COLOR_JOINTS_TEXCOORD_WEIGHTS,r)||2!==n){this.context.addIssue$2$name(K.$get$SemanticError_meshPrimitiveInvalidAttribute(),e);break}if(1>=n)return E.ioore(t,1);if((n=t[1]).toString,0===(i=new E.CodeUnits(n)).get$length(i))o=0,a=!1;else if(1===(s=n.length))a=!((o=T._codeUnitAt$1$s(n,0)-48)<0||o>9)||!1;else for(l=T.getInterceptor$s(n),o=0,c=0;;){if(!(c<s)){a=!0;break}if(!((u=l._codeUnitAt$1(n,c)-48)<=9)||(!(u>=0)||0===c&&0===u)){a=!1;break}o=10*o+u,++c}if(a)switch(r){case"COLOR":++(n=this._box_0).colorCount,h=n.maxColor,n.maxColor=o>h?o:h;break;case"JOINTS":++(n=this._box_0).jointsCount,d=n.maxJoints,n.maxJoints=o>d?o:d;break;case"TEXCOORD":++(n=this._box_0).texcoordCount,p=n.maxTexcoord,n.maxTexcoord=o>p?o:p;break;case"WEIGHTS":++(n=this._box_0).weightsCount,f=n.maxWeights,n.maxWeights=o>f?o:f}else this.context.addIssue$2$name(K.$get$SemanticError_meshPrimitiveInvalidAttribute(),e)}},$signature:21},k.MeshPrimitive_MeshPrimitive$fromMap_checkContinuity.prototype={call$3:function(e,t,n){var r=e+1;return r!==t?(this.context.addIssue$2$args(K.$get$SemanticError_meshPrimitiveIndexedSemanticContinuity(),E.setRuntimeTypeInfo([n,r,t],[M.Object])),0):t}},k.MeshPrimitive_MeshPrimitive$fromMap_checkMorphTargetAttributeSemanticName.prototype={call$1:function(e){var t=this.context;t.morphAttributeAccessorFormats.containsKey$1(e)||T.startsWith$1$s(e,"_")||t.addIssue$2$name(K.$get$SemanticError_meshPrimitiveInvalidAttribute(),e)},$signature:21},k.MeshPrimitive_link_closure.prototype={call$2:function(e,t){var n,r,i,o,a,s,l,c;if(E.stringTypeCheck(e),E.intTypeCheck(t),-1!==t)if(null!=(n=this.gltf.accessors.$index(0,t))){if((r=this.$this).attributes.$indexSet(0,e,n),i=this.context,n.setUsage$3(w.AccessorUsage_VertexAttribute,e,i),null!=(o=n._bufferView)&&o.setUsage$3(w.BufferViewUsage_VertexBuffer,e,i),(o="POSITION"===e&&(null==n.min||null==n.max))&&i.addIssue$2$name(K.$get$LinkError_meshPrimitivePositionAccessorWithoutBounds(),"POSITION"),o=n.type,a=n.componentType,s=new I.AccessorFormat(o,a,n.normalized),0>=(o=E.setRuntimeTypeInfo(e.split("_"),[M.String])).length)return E.ioore(o,0);if(null!=(l=i.attributeAccessorFormats.$index(0,o[0])))if(l.contains$1(0,s)){if("NORMAL"===e){if(o=i.path,w.JSArray_methods.add$1(o,"NORMAL"),c=i.getPointerString$0(),i.addElementChecker$2(n,new H.UnitVec3FloatChecker(c,5126===a?null:n.get$normalizeValue())),0>=o.length)return E.ioore(o,-1);o.pop()}else if("TANGENT"===e){if(o=i.path,w.JSArray_methods.add$1(o,"TANGENT"),c=i.getPointerString$0(),i.addElementChecker$2(n,new H.UnitVec3SignFloatChecker(c,5126===a?null:n.get$normalizeValue())),0>=o.length)return E.ioore(o,-1);o.pop()}else if(w.JSString_methods.startsWith$1(e,"COLOR_")&&5126===a){if(o=i.path,w.JSArray_methods.add$1(o,e),i.addElementChecker$2(n,new H.ClampedRangeFloatChecker(i.getPointerString$0())),0>=o.length)return E.ioore(o,-1);o.pop()}}else i.addIssue$3$args$name(K.$get$LinkError_meshPrimitiveAttributesAccessorInvalidFormat(),E.setRuntimeTypeInfo([s,l],[M.Object]),e);(o=-1!==(o=n.byteOffset)&&o%4!=0||n.get$elementLength()%4!=0&&(null!=(o=n._bufferView)&&-1===o.byteStride))&&i.addIssue$2$name(K.$get$LinkError_meshPrimitiveAccessorUnaligned(),e),-1===(o=r._vertexCount)?r._count=r._vertexCount=n.count:o!==n.count&&i.addIssue$2$name(K.$get$LinkError_meshPrimitiveUnequalAccessorsCount(),e),null!=(o=n._bufferView)&&-1===o.byteStride&&(-1===o.effectiveByteStride&&(o.effectiveByteStride=n.get$elementLength()),r._checkAccessorRefs$3(n,e,i))}else this.context.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([t],[M.Object]),e)},$signature:7},k.MeshPrimitive_link_closure0.prototype={call$1:function(e){return e},$signature:18},k.MeshPrimitive_link_closure1.prototype={call$2:function(e,t){if(E.stringTypeCheck(e),E.intTypeCheck(t),-1!==t){if("number"!=typeof t)return t.$add();t+1>this.$this.texcoordCount?this.context.addIssue$3$args$name(K.$get$LinkError_meshPrimitiveTooFewTexcoords(),E.setRuntimeTypeInfo([e,t],[M.Object]),"material"):w.JSArray_methods.$indexSet(this.unusedTexCoords,t,-1)}},$signature:7},k.MeshPrimitive_link_closure2.prototype={call$1:function(e){return-1!==E.intTypeCheck(e)},$signature:8},k.MeshPrimitive_link_closure3.prototype={call$2:function(e,t){var n,r,i,o,a,s,l;if(E.stringTypeCheck(e),E.intTypeCheck(t),-1!==t){if(null==(n=this.gltf.accessors.$index(0,t))?this.context.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([t],[M.Object]),e):(r=this.context,n.setUsage$3(w.AccessorUsage_VertexAttribute,e,r),null==(o=(i=this.$this).attributes.$index(0,e))?r.addIssue$2$name(K.$get$LinkError_meshPrimitiveMorphTargetNoBaseAccessor(),e):o.count!==n.count&&r.addIssue$2$name(K.$get$LinkError_meshPrimitiveMorphTargetInvalidAttributeCount(),e),(a="POSITION"===e&&(null==n.min||null==n.max))&&r.addIssue$2$name(K.$get$LinkError_meshPrimitivePositionAccessorWithoutBounds(),"POSITION"),s=new I.AccessorFormat(n.type,n.componentType,n.normalized),null==(l=r.morphAttributeAccessorFormats.$index(0,e))||l.contains$1(0,s)||r.addIssue$3$args$name(K.$get$LinkError_meshPrimitiveAttributesAccessorInvalidFormat(),E.setRuntimeTypeInfo([s,l],[M.Object]),e),(a=-1!==(a=n.byteOffset)&&a%4!=0||n.get$elementLength()%4!=0&&(null!=(a=n._bufferView)&&-1===a.byteStride))&&r.addIssue$2$name(K.$get$LinkError_meshPrimitiveAccessorUnaligned(),e),null!=(a=n._bufferView)&&-1===a.byteStride&&(-1===a.effectiveByteStride&&(a.effectiveByteStride=n.get$elementLength()),i._checkAccessorRefs$3(n,e,r))),r=this.$this._targets,(i=this.i)>=r.length)return E.ioore(r,i);r[i].$indexSet(0,e,n)}},$signature:7},k.MeshPrimitive__checkAccessorRefs_closure.prototype={call$0:function(){return M.LinkedHashSet_LinkedHashSet$_empty([C.Accessor,M.num])},$signature:44},k.IndexBufferIntegerChecker.prototype={check$4:function(e,t,n,r){var i,o,a;if(E.intTypeCheck(r),i=this.maxVertexIndex,"number"!=typeof r)return r.$gt();if(r>i&&e.addIssue$3$args$name(K.$get$DataError_accessorIndexOob(),E.setRuntimeTypeInfo([t,r,i],[M.Object]),this.path),r===this.primitiveRestartIndex&&e.addIssue$3$args$name(K.$get$DataError_accessorIndexPrimitiveRestart(),E.setRuntimeTypeInfo([r,t],[M.Object]),this.path),this.isTriangles){if(i=this._triangle,(o=this._vertexIndex)>=3)return E.ioore(i,o);i[o]=r,++o,this._vertexIndex=o,3===o&&(this._vertexIndex=0,(i=(o=i[0])===(a=i[1])||(a===(i=i[2])||i===o))&&++this._degenerateTriangles)}return!0},done$1:function(e){var t=this._degenerateTriangles;return t>0&&e.addIssue$3$args$name(K.$get$DataError_accessorIndexTriangleDegenerate(),E.setRuntimeTypeInfo([t,this.totalTriangles],[M.Object]),this.path),!0},$asElementChecker:function(){return[M.int]}},I.Node.prototype={link$2:function(e,t){var n,r,i,o=this._cameraIndex;this._camera=E.interceptedTypeCheck(e.cameras.$index(0,o),"$isCamera"),n=this._skinIndex,this._skin=E.interceptedTypeCheck(e.skins.$index(0,n),"$isSkin"),r=this._meshIndex,this._mesh=E.interceptedTypeCheck(e.meshes.$index(0,r),"$isMesh"),-1!==o&&(null==(i=this._camera)?t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([o],[M.Object]),"camera"):i._isUsed=!0),-1!==n&&(null==(o=this._skin)?t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([n],[M.Object]),"skin"):o._isUsed=!0),-1!==r&&(null==(o=this._mesh)?t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([r],[M.Object]),"mesh"):(o._isUsed=!0,null!=(o=o.primitives)&&((o=null!=(n=this.weights)&&(o=null==(o=o.$index(0,0)._targets)?null:o.length)!==n.length)&&(o=K.$get$LinkError_nodeWeightsInvalid(),n=n.length,r=this._mesh.primitives.$index(0,0)._targets,t.addIssue$3$args$name(o,E.setRuntimeTypeInfo([n,null==r?null:r.length],[M.Object]),"weights")),null!=this._skin?(o=this._mesh.primitives).every$1(o,new I.Node_link_closure)&&t.addIssue$1(K.$get$LinkError_nodeSkinWithNonSkinnedMesh()):(o=this._mesh.primitives).any$1(o,new I.Node_link_closure0)&&t.addIssue$1(K.$get$LinkError_nodeSkinnedMeshWithoutSkin())))),null!=(o=this._childrenIndices)&&((n=new Array(o.get$length(o))).fixed$length=Array,this.set$_children(E.setRuntimeTypeInfo(n,[I.Node])),H.resolveNodeList(o,this._children,e.nodes,"children",t,new I.Node_link_closure1(this,t)))},addScene$1:function(e){var t,n,r,i;if(this._scenes.add$1(0,e),null!=(t=this._children))for(n=t.length,r=0;r<n;++r)null!=(i=t[r])&&i.addScene$1(e)},set$_children:function(e){this._children=E.assertSubtype(e,"$isList",[I.Node],"$asList")}},I.Node_link_closure.prototype={call$1:function(e){return 0===E.interceptedTypeCheck(e,"$isMeshPrimitive").jointsCount},$signature:3},I.Node_link_closure0.prototype={call$1:function(e){return 0!==E.interceptedTypeCheck(e,"$isMeshPrimitive").jointsCount},$signature:3},I.Node_link_closure1.prototype={call$3:function(e,t,n){null!=e._parent&&this.context.addIssue$3$args$index(K.$get$LinkError_nodeParentOverride(),E.setRuntimeTypeInfo([t],[M.Object]),n),e._parent=this.$this},$signature:9},O.Sampler.prototype={},R.Scene.prototype={link$2:function(e,t){var n,r=this._nodesIndices;null!=r&&((n=new Array(r.get$length(r))).fixed$length=Array,this.set$nodes(E.setRuntimeTypeInfo(n,[I.Node])),H.resolveNodeList(r,this.nodes,e.nodes,"nodes",t,new R.Scene_link_closure(this,t)))},set$nodes:function(e){this.nodes=E.assertSubtype(e,"$isList",[I.Node],"$asList")}},R.Scene_link_closure.prototype={call$3:function(e,t,n){null!=e._parent&&this.context.addIssue$3$args$index(K.$get$LinkError_sceneNonRootNode(),E.setRuntimeTypeInfo([t],[M.Object]),n),e.addScene$1(this.$this)},$signature:9},D.Skin.prototype={link$2:function(e,t){var n,r,i,o,a,s="inverseBindMatrices",l=this._inverseBindMatricesIndex;if(this.set$_inverseBindMatrices(e.accessors.$index(0,l)),n=e.nodes,r=this._skeletonIndex,this._skeleton=E.interceptedTypeCheck(n.$index(0,r),"$isNode"),null!=(i=this._jointsIndices)&&((o=new Array(i.get$length(i))).fixed$length=Array,this.set$_joints(E.setRuntimeTypeInfo(o,[I.Node])),H.resolveNodeList(i,this._joints,n,"joints",t,new D.Skin_link_closure(this)),0===this._commonRoots._collection$_length&&t.addIssue$2$name(K.$get$SemanticError_skinNoCommonRoot(),"joints")),-1!==l)if(null==(n=this._inverseBindMatrices))t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([l],[M.Object]),s);else{if(n.setUsage$3(w.AccessorUsage_IBM,s,t),null!=(l=this._inverseBindMatrices._bufferView)&&l.setUsage$3(w.BufferViewUsage_IBM,s,t),l=t.path,w.JSArray_methods.add$1(l,s),n=this._inverseBindMatrices,(a=new I.AccessorFormat(n.type,n.componentType,n.normalized)).$eq(0,w.AccessorFormat_MAT4_5126_false)?t.addElementChecker$2(this._inverseBindMatrices,new D.IbmMatrixFloatChecker(t.getPointerString$0())):t.addIssue$2$args(K.$get$LinkError_skinIbmInvalidFormat(),E.setRuntimeTypeInfo([a,E.setRuntimeTypeInfo([w.AccessorFormat_MAT4_5126_false],[I.AccessorFormat])],[M.Object])),null!=(n=this._joints)&&this._inverseBindMatrices.count!==n.length&&t.addIssue$2$args(K.$get$LinkError_invalidIbmAccessorCount(),E.setRuntimeTypeInfo([n.length,this._inverseBindMatrices.count],[M.Object])),0>=l.length)return E.ioore(l,-1);l.pop()}-1!==r&&(null==(l=this._skeleton)?t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([r],[M.Object]),"skeleton"):this._commonRoots.contains$1(0,l)||t.addIssue$2$name(K.$get$SemanticError_skinSkeletonInvalid(),"skeleton"))},set$_inverseBindMatrices:function(e){this._inverseBindMatrices=E.assertSubtype(e,"$isAccessor",[M.num],"$asAccessor")},set$_joints:function(e){this._joints=E.assertSubtype(e,"$isList",[I.Node],"$asList")}},D.Skin_link_closure.prototype={call$3:function(e,t,n){var r,i,o;for(e.isJoint=!0,r=M.LinkedHashSet_LinkedHashSet$_empty(I.Node),i=e;null!=i&&r.add$1(0,i);)i=i._parent;0===(o=this.$this._commonRoots)._collection$_length?o.addAll$1(0,r):o._filterWhere$2(E.functionTypeCheck(r.get$contains(r),{func:1,ret:M.bool,args:[E.getTypeArgumentByIndex(o,0)]}),!1)},$signature:9},D.IbmMatrixFloatChecker.prototype={check$4:function(e,t,n,r){return(3===n&&0!==r||(7===n&&0!==r||(11===n&&0!==r||15===n&&1!==r)))&&e.addIssue$3$args$name(K.$get$DataError_accessorInvalidInverseBindMatrix(),E.setRuntimeTypeInfo([t,n,r],[M.Object]),this.path),!0},$asElementChecker:function(){return[M.double]}},j.Texture.prototype={link$2:function(e,t){var n,r,i=this._texture$_sourceIndex;this._texture$_source=E.interceptedTypeCheck(e.images.$index(0,i),"$isImage"),n=this._samplerIndex,this._sampler=E.interceptedTypeCheck(e.samplers.$index(0,n),"$isSampler"),-1!==i&&(null==(r=this._texture$_source)?t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([i],[M.Object]),"source"):r._isUsed=!0),-1!==n&&(null==(i=this._sampler)?t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([n],[M.Object]),"sampler"):i._isUsed=!0)},validateResources$2:function(e,t){var n,r=this._texture$_source;null==(n=null==(r=null==r?null:r.info)?null:r.mimeType)||w.JSArray_methods.contains$1(w.List_6D4,n)||t.addIssue$3$args$name(K.$get$LinkError_textureInvalidImageMimeType(),E.setRuntimeTypeInfo([n,w.List_6D4],[M.Object]),"source")},$isResourceValidatable:1},C.ValidationOptions.prototype={},C.Context.prototype={addElementChecker$2:function(e,t){var n=M.num;E.assertSubtype(e,"$isAccessor",[n],"$asAccessor"),E.assertSubtype(t,"$isElementChecker",[n],"$asElementChecker"),T.add$1$ax(this.accessorElementCheckers.putIfAbsent$2(e,new C.Context_addElementChecker_closure),t)},registerObjectsOwner$2:function(e,t){var n,r,i;for(n=T.get$iterator$ax(E.assertSubtype(t,"$isIterable",[M.Object],"$asIterable")),r=this.owners;n.moveNext$0();)null!=(i=n.get$current())&&r.$indexSet(0,i,e)},getPointerString$1:function(e){var t,n,r,i,o,a=this.path;if(0===a.length&&null!=e&&w.JSString_methods.startsWith$1(e,"/"))return e;if((t=null!=e)&&w.JSArray_methods.add$1(a,e),r=(n=this._sb)._contents+="/",i=M.String,o=E.getTypeArgumentByIndex(a,0),n._contents=M.StringBuffer__writeAll(r,new E.MappedListIterable(a,E.functionTypeCheck(new C.Context_getPointerString_closure,{func:1,ret:i,args:[o]}),[o,i]),"/"),t){if(0>=a.length)return E.ioore(a,-1);a.pop()}return a=n._contents,n._contents="",a.charCodeAt(0),a},getPointerString$0:function(){return this.getPointerString$1(null)},initExtensions$2:function(e,t){var n,r,i,o,a,s,l,c,u,h,d,p,f="/extensionsUsed/",m=[M.String];for(E.assertSubtype(e,"$isList",m,"$asList"),E.assertSubtype(t,"$isList",m,"$asList"),w.JSArray_methods.addAll$1(this._extensionsUsed,e),m=T.getInterceptor$asx(e),n=this._extensionsLoaded,r=this._userExtensions,i=w.Set_AiVn._map,o=[M.Object],a=T.getInterceptor$asx(t),s=0;s<m.get$length(e);++s){if(l=m.$index(e,s),null==(c=K.$get$Context__extNameFormat().firstMatch$1(l)))u=null;else{if(1>=(c=c._match).length)return E.ioore(c,1);u=c[1]}null==u?this.addIssue$2$name(K.$get$SemanticError_invalidExtensionNameFormat(),f+s):i.containsKey$1(u)||(c=K.$get$SemanticError_unreservedExtensionPrefix(),h=f+s,this.addIssue$3$args$name(c,E.setRuntimeTypeInfo([u],o),h)),null!=(d=r.firstWhere$2$orElse(0,new C.Context_initExtensions_closure(l),new C.Context_initExtensions_closure0(l)))?(d.functions.forEach$1(0,new C.Context_initExtensions_closure1(this,d)),null!=(c=d.init)&&c.call$1(this),(c=d.required&&!a.contains$1(t,l))&&(c=K.$get$SemanticError_nonRequiredExtension(),h=f+s,this.addIssue$3$args$name(c,E.setRuntimeTypeInfo([l],o),h)),w.JSArray_methods.add$1(n,l)):(c=K.$get$LinkError_unsupportedExtension(),h=f+s,this.addIssue$3$args$name(c,E.setRuntimeTypeInfo([l],o),h))}for(s=0;s<a.get$length(t);++s)p=a.$index(t,s),m.contains$1(e,p)||(n=K.$get$SemanticError_unusedExtensionRequired(),r="/extensionsRequired/"+s,this.addIssue$3$args$name(n,E.setRuntimeTypeInfo([p],o),r))},addIssue$6$args$index$name$noPointer$offset:function(e,t,n,r,i,o){var a,s,l,c,u;if(E.assertSubtype(t,"$isList",[M.Object],"$asList"),a=this.options,s=e.code,!a.ignoredIssues.contains$1(0,s)){if((l=a.maxIssues)>0&&this._issues.length===l)throw this._isTruncated=!0,E.wrapException(w.C_IssuesLimitExceededException);c=null!=(a=a.severityOverrides)?a.$index(0,s):null,null!=o?w.JSArray_methods.add$1(this._issues,new F.Issue(e,c,null,o,t)):(u=null!=n?w.JSInt_methods.toString$0(n):r,a=i?"":this.getPointerString$1(u),w.JSArray_methods.add$1(this._issues,new F.Issue(e,c,a,null,t)))}},addIssue$2$name:function(e,t){return this.addIssue$6$args$index$name$noPointer$offset(e,null,null,t,!1,null)},addIssue$2$args:function(e,t){return this.addIssue$6$args$index$name$noPointer$offset(e,t,null,null,!1,null)},addIssue$3$args$name:function(e,t,n){return this.addIssue$6$args$index$name$noPointer$offset(e,t,null,n,!1,null)},addIssue$1:function(e){return this.addIssue$6$args$index$name$noPointer$offset(e,null,null,null,!1,null)},addIssue$3$args$noPointer:function(e,t,n){return this.addIssue$6$args$index$name$noPointer$offset(e,t,null,null,n,null)},addIssue$2$index:function(e,t){return this.addIssue$6$args$index$name$noPointer$offset(e,null,t,null,!1,null)},addIssue$3$args$index:function(e,t,n){return this.addIssue$6$args$index$name$noPointer$offset(e,t,n,null,!1,null)},addIssue$2$offset:function(e,t){return this.addIssue$6$args$index$name$noPointer$offset(e,null,null,null,!1,t)},addIssue$3$args$offset:function(e,t,n){return this.addIssue$6$args$index$name$noPointer$offset(e,t,null,null,!1,n)},set$_extensionsFunctionsView:function(e){this._extensionsFunctionsView=E.assertSubtype(e,"$isMap",[U.ExtensionTuple,U.ExtFuncs],"$asMap")},set$_extensionsUsedView:function(e){this._extensionsUsedView=E.assertSubtype(e,"$isList",[M.String],"$asList")},set$_extensionsLoadedView:function(e){this._extensionsLoadedView=E.assertSubtype(e,"$isList",[M.String],"$asList")},set$_resourcesView:function(e){this._resourcesView=E.assertSubtype(e,"$isList",[[M.Map,M.String,M.Object]],"$asList")}},C.Context_defaultExtensionNames_closure.prototype={call$1:function(e){return E.interceptedTypeCheck(e,"$isExtension").name},$signature:47},C.Context_addElementChecker_closure.prototype={call$0:function(){return E.setRuntimeTypeInfo([],[[H.ElementChecker,M.num]])},$signature:48},C.Context_getPointerString_closure.prototype={call$1:function(e){var t;return E.stringTypeCheck(e),e.toString,t=E.stringReplaceAllUnchecked(e,"~","~0"),E.stringReplaceAllUnchecked(t,"/","~1")},$signature:49},C.Context_initExtensions_closure.prototype={call$1:function(e){return E.interceptedTypeCheck(e,"$isExtension").name===this.extensionName},$signature:22},C.Context_initExtensions_closure0.prototype={call$0:function(){return w.JSArray_methods.firstWhere$2$orElse(w.List_2nP,new C.Context_initExtensions__closure(this.extensionName),new C.Context_initExtensions__closure0)},$signature:51},C.Context_initExtensions__closure.prototype={call$1:function(e){return E.interceptedTypeCheck(e,"$isExtension").name===this.extensionName},$signature:22},C.Context_initExtensions__closure0.prototype={call$0:function(){},$signature:2},C.Context_initExtensions_closure1.prototype={call$2:function(e,t){this.$this._extensionsFunctions.$indexSet(0,new U.ExtensionTuple(E.interceptedTypeCheck(e,"$isType"),this.extension.name),E.interceptedTypeCheck(t,"$isExtFuncs"))},$signature:52},C.IssuesLimitExceededException.prototype={$isException:1},L._ImageCodec.prototype={toString$0:function(e){return this._image_decoder$_name}},L._ColorPrimaries.prototype={toString$0:function(e){return this._image_decoder$_name}},L._ColorTransfer.prototype={toString$0:function(e){return this._image_decoder$_name}},L.Format.prototype={toString$0:function(e){return this._image_decoder$_name}},L.ImageInfo.prototype={},L.ImageInfo_parseStreamAsync_closure.prototype={call$1:function(e){var t,n,r,i;if(E.assertSubtype(e,"$isList",[M.int],"$asList"),!(t=this._box_0).isDetected){if(T.get$length$asx(e)<9)return t.subscription.cancel$0(),void this.completer.completeError$1(w.C_UnexpectedEndOfStreamException);switch(n=L.ImageInfo__detectCodec(e),r=t.subscription,i=this.completer,n){case w._ImageCodec_0:t.decoder=new L.JpegInfoDecoder(i,r);break;case w._ImageCodec_1:n=new Uint8Array(13),t.decoder=new L.PngInfoDecoder(w._ColorTransfer_0,w._ColorPrimaries_0,n,new Uint8Array(32),i,r);break;case w._ImageCodec_2:t.decoder=new L.WebPInfoDecoder(new Uint8Array(30),i,r);break;default:return r.cancel$0(),void i.completeError$1(w.C_UnsupportedImageFormatException)}t.isDetected=!0}t.decoder.add$1(0,e)},$signature:23},L.ImageInfo_parseStreamAsync_closure1.prototype={call$1:function(e){this._box_0.subscription.cancel$0(),this.completer.completeError$1(e)},$signature:24},L.ImageInfo_parseStreamAsync_closure0.prototype={call$0:function(){var e=this._box_0.decoder;e.subscription.cancel$0(),0===(e=e.completer).future._state&&e.completeError$1(w.C_UnexpectedEndOfStreamException)},$signature:2},L.ImageInfo__detectCodec_beginsWith.prototype={call$2:function(e,t){var n,r,i=[M.int];for(E.assertSubtype(e,"$isList",i,"$asList"),E.assertSubtype(t,"$isList",i,"$asList"),i=t.length,n=T.getInterceptor$asx(e),r=0;r<i;++r)if(!T.$eq$(n.$index(e,r),t[r]))return!1;return!0},$signature:55},L.ImageInfoDecoder.prototype={$isSink:1,$asSink:function(){return[[M.List,M.int]]}},L.JpegInfoDecoder.prototype={add$1:function(e,t){var n,r,i;E.assertSubtype(t,"$isList",[M.int],"$asList");try{this._image_decoder$_add$1(t)}catch(r){if(!((i=E.unwrapException(r))instanceof L.InvalidDataFormatException))throw r;n=i,this.subscription.cancel$0(),this.completer.completeError$1(n)}},_image_decoder$_add$1:function(e){var t,n,r,i,o,a,s,l,c,u,h,d;for(E.assertSubtype(e,"$isList",[M.int],"$asList"),t=new L.JpegInfoDecoder__add_isSOF,n=new L.JpegInfoDecoder__add_hasSegment,r=T.getInterceptor$asx(e),i=0,o=0;i!==r.get$length(e);){switch(a=r.$index(e,i),this._image_decoder$_state){case 0:if(255!==a)throw E.wrapException(w.InvalidDataFormatException_sAZ);this._image_decoder$_state=255;break;case 255:E.boolConversionCheck(n.call$1(a))&&(this._image_decoder$_state=1,this._type=a,this._segmentLength=this._segmentIndex=0);break;case 1:if("number"!=typeof a)return a.$shl();this._segmentLength=a<<8>>>0,this._image_decoder$_state=2;break;case 2:if(s=this._segmentLength,"number"!=typeof a)return E.iae(a);if(s+=a,this._segmentLength=s,s<2)throw E.wrapException(w.InvalidDataFormatException_YbV);E.boolConversionCheck(t.call$1(this._type))&&(s=this._segmentLength,this._sofBuffer=new Uint8Array(s-2)),this._image_decoder$_state=3;break;case 3:if(o=Math.min(r.get$length(e)-i,this._segmentLength-this._segmentIndex-2),s=E.boolConversionCheck(t.call$1(this._type)),c=(l=this._segmentIndex)+o,s){if(s=this._sofBuffer,this._segmentIndex=c,(s&&w.NativeUint8List_methods).setRange$4(s,l,c,e,i),this._segmentIndex===this._segmentLength-2)return this.subscription.cancel$0(),0>=(r=(e=this._sofBuffer).length)?E.ioore(e,0):(u=e[0],1>=r?E.ioore(e,1):(s=e[1],2>=r?E.ioore(e,2):(l=e[2],3>=r?E.ioore(e,3):(c=e[3],4>=r?E.ioore(e,4):(h=e[4],5>=r?E.ioore(e,5):(d=3===(r=e[5])?w.Format_1:1===r?w.Format_3:w.Format_0,r=this.completer,l=E.futureOrCheck(new L.ImageInfo("image/jpeg",u,d,(c<<8|h)>>>0,(s<<8|l)>>>0,w._ColorPrimaries_0,w._ColorTransfer_0,!1,!1),{futureOr:1,type:E.getTypeArgumentByIndex(r,0)}),0!==(r=r.future)._state&&E.throwExpression(M.StateError$("Future already completed")),void r._asyncComplete$1(l)))))))}else this._segmentIndex=c,c===this._segmentLength-2&&(this._image_decoder$_state=255);i+=o;continue}++i}}},L.JpegInfoDecoder__add_isSOF.prototype={call$1:function(e){return"number"!=typeof e?e.$and():192==(240&e)&&196!==e&&200!==e&&204!==e||222===e},$signature:8},L.JpegInfoDecoder__add_hasSegment.prototype={call$1:function(e){var t;if(1!==e){if("number"!=typeof e)return e.$and();t=208==(248&e)||216===e||217===e||255===e}else t=!0;return!t},$signature:8},L.PngInfoDecoder.prototype={add$1:function(e,t){var n,r,i,o,a,s,l,c,u,h,d,p,f,m,g;for(E.assertSubtype(t,"$isList",[M.int],"$asList"),n=new L.PngInfoDecoder_add_reset(this),r=T.getInterceptor$asx(t),i=this._chunkBytes,o=this._headerChunkBytes,a=0,s=0;a!==r.get$length(t);){switch(l=r.$index(t,a),this._image_decoder$_state){case 0:a+=8,this._image_decoder$_state=1;continue;case 1:if(c=this._chunkLength,"number"!=typeof l)return E.iae(l);this._chunkLength=(c<<8|l)>>>0,4==++this._chunkLengthIndex&&(this._image_decoder$_state=2);break;case 2:if(c=this._chunkType,"number"!=typeof l)return E.iae(l);if(c=(c<<8|l)>>>0,this._chunkType=c,4==++this._chunkTypeIndex){switch(c){case 1229472850:if(13!==this._chunkLength)return this.subscription.cancel$0(),void(0===(r=this.completer).future._state&&r.completeError$1(w.InvalidDataFormatException_b84));this._hasHeader=!0;break;case 1951551059:this._hasTrns=!0;break;case 1665684045:if(32!==this._chunkLength)return this.subscription.cancel$0(),void(0===(r=this.completer).future._state&&r.completeError$1(w.InvalidDataFormatException_b84));break;case 1934772034:if(1!==this._chunkLength)return this.subscription.cancel$0(),void(0===(r=this.completer).future._state&&r.completeError$1(w.InvalidDataFormatException_b84));break;case 1883789683:if(9!==this._chunkLength)return this.subscription.cancel$0(),void(0===(r=this.completer).future._state&&r.completeError$1(w.InvalidDataFormatException_b84));break;case 1732332865:if(4!==this._chunkLength)return this.subscription.cancel$0(),void(0===(r=this.completer).future._state&&r.completeError$1(w.InvalidDataFormatException_b84));break;case 1766015824:this._transfer=w._ColorTransfer_3,this._primaries=w._ColorPrimaries_2;break;case 1229209940:switch(this.subscription.cancel$0(),this._hasHeader||this.completer.completeError$1(w.InvalidDataFormatException_KIf),(r=o.buffer).toString,E._checkViewArguments(r,0,null),u=(t=new DataView(r,0)).getUint32(0,!1),h=t.getUint32(4,!1),d=t.getUint8(8),t.getUint8(9)){case 0:p=this._hasTrns?w.Format_4:w.Format_3;break;case 2:case 3:p=this._hasTrns?w.Format_2:w.Format_1;break;case 4:p=w.Format_4;break;case 6:p=w.Format_2;break;default:p=w.Format_0}return(r=this._primaries)===w._ColorPrimaries_0&&(r=this._primaries=w._ColorPrimaries_1),(i=this._transfer)===w._ColorTransfer_0&&(i=this._transfer=w._ColorTransfer_2),o=this.completer,i=E.futureOrCheck(new L.ImageInfo("image/png",d,p,u,h,r,i,this._hasNonSquarePixels,!1),{futureOr:1,type:E.getTypeArgumentByIndex(o,0)}),0!==(r=o.future)._state&&E.throwExpression(M.StateError$("Future already completed")),void r._asyncComplete$1(i)}0===this._chunkLength?this._image_decoder$_state=4:this._image_decoder$_state=3}break;case 3:switch(c=r.get$length(t),f=this._chunkLength,m=this._chunkDataIndex,s=Math.min(c-a,f-m),this._chunkType){case 1229472850:c=m+s,this._chunkDataIndex=c,w.NativeUint8List_methods.setRange$4(o,m,c,t,a);break;case 1665684045:case 1732332865:case 1883789683:c=m+s,this._chunkDataIndex=c,w.NativeUint8List_methods.setRange$4(i,m,c,t,a);break;case 1934772034:this._transfer=w._ColorTransfer_2,this._primaries=w._ColorPrimaries_1,this._chunkDataIndex=m+1;break;default:this._chunkDataIndex=m+s}if(this._chunkDataIndex===this._chunkLength){switch(this._chunkType){case 1665684045:this._primaries===w._ColorPrimaries_0&&this._checkChrm$0();break;case 1732332865:this._transfer===w._ColorTransfer_0&&this._checkGama$0();break;case 1883789683:(c=i.buffer).toString,E._checkViewArguments(c,0,null),(g=new DataView(c,0)).getUint32(0,!1)!==g.getUint32(4,!1)&&(this._hasNonSquarePixels=!0)}this._image_decoder$_state=4}a+=s;continue;case 4:4==++this._chunkCrcIndex&&(n.call$0(),this._image_decoder$_state=1)}++a}},_checkGama$0:function(){var e;if(this._transfer!==w._ColorTransfer_2)switch((e=this._chunkBytes.buffer).toString,E.NativeByteData_NativeByteData$view(e,0,null).getUint32(0,!1)){case 45455:this._transfer=w._ColorTransfer_2;break;case 1e5:this._transfer=w._ColorTransfer_1;break;default:this._transfer=w._ColorTransfer_3}},_checkChrm$0:function(){var e,t;this._primaries!==w._ColorPrimaries_1&&((e=this._chunkBytes.buffer).toString,31270===(t=E.NativeByteData_NativeByteData$view(e,0,null)).getUint32(0,!1)&&32900===t.getUint32(4,!1)&&64e3===t.getUint32(8,!1)&&33e3===t.getUint32(12,!1)&&3e4===t.getUint32(16,!1)&&6e4===t.getUint32(20,!1)&&15e3===t.getUint32(24,!1)&&6e3===t.getUint32(28,!1)?this._primaries=w._ColorPrimaries_1:this._primaries=w._ColorPrimaries_2)}},L.PngInfoDecoder_add_reset.prototype={call$0:function(){var e=this.$this;e._chunkCrcIndex=e._chunkDataIndex=e._chunkTypeIndex=e._chunkType=e._chunkLengthIndex=e._chunkLength=0},$signature:1},L.WebPInfoDecoder.prototype={add$1:function(e,t){var n,r,i,o,a,s,l,c,u,h;if(E.assertSubtype(t,"$isList",[M.int],"$asList"),n=T.get$length$asx(t),r=this._bufferIndex,i=this._image_decoder$_buffer,n=r+Math.min(n,30-r),this._bufferIndex=n,w.NativeUint8List_methods.setRange$3(i,r,n,t),!(n=!((n=this._bufferIndex)>=25)||n<30&&76!==i[15]))if(this.subscription.cancel$0(),(n=i.buffer).toString,1380533830===(o=E.NativeByteData_NativeByteData$view(n,0,null)).getUint32(0,!1)&&1464156752===o.getUint32(8,!1)){switch(o.getUint32(12,!1)){case 1448097824:a=16383&o.getUint16(26,!0),s=16383&o.getUint16(28,!0),l=w.Format_1,c=!1,u=!1;break;case 1448097868:a=1+(((n=i[21])|(63&(r=i[22]))<<8)>>>0),s=1+((r>>>6|(n=i[23])<<2|(15&(i=i[24]))<<10)>>>0),l=16==(16&i)?w.Format_2:w.Format_1,c=!1,u=!1;break;case 1448097880:u=2==(2&(h=i[20])),c=32==(32&h),l=16==(16&h)?w.Format_2:w.Format_1,a=1+((i[24]|i[25]<<8|i[26]<<16)>>>0),s=1+((i[27]|i[28]<<8|i[29]<<16)>>>0);break;default:return void this._abort$1(w.InvalidDataFormatException_AgZ)}n=c?w._ColorTransfer_3:w._ColorTransfer_2,this.completer.complete$1(L.ImageInfo$_("image/webp",8,l,a,s,c?w._ColorPrimaries_2:w._ColorPrimaries_1,n,u,!1))}else this._abort$1(w.InvalidDataFormatException_AgZ)},_abort$1:function(e){var t;this.subscription.cancel$0(),0===(t=this.completer).future._state&&t.completeError$1(e)}},L.UnsupportedImageFormatException.prototype={$isException:1},L.UnexpectedEndOfStreamException.prototype={$isException:1},L.InvalidDataFormatException.prototype={toString$0:function(e){return this.message},$isException:1},N._Storage.prototype={toString$0:function(e){return this._resources_loader$_name}},N.ResourceInfo.prototype={toMap$0:function(){var e,t=M.String,n=M.Object,r=M.LinkedHashMap_LinkedHashMap$_empty(t,n);if(r.$indexSet(0,"pointer",this.pointer),null!=(e=this.mimeType)&&r.$indexSet(0,"mimeType",e),null!=(e=this.storage)){if((e=e.index)>=4)return E.ioore(w.List_UWS,e);r.$indexSet(0,"storage",w.List_UWS[e])}if(null!=(e=this.uri)&&r.$indexSet(0,"uri",e),null!=(e=this.byteLength)&&r.$indexSet(0,"byteLength",e),null==(e=this.image))t=null;else{if((t=M.LinkedHashMap_LinkedHashMap$_empty(t,n)).$indexSet(0,"width",e.width),t.$indexSet(0,"height",e.height),(n=e.format)!==w.Format_0){if((n=n.index)>=5)return E.ioore(w.List_qVm,n);t.$indexSet(0,"format",w.List_qVm[n])}if((n=e.colorPrimaries)!==w._ColorPrimaries_0){if((n=n.index)>=3)return E.ioore(w.List_null_srgb_custom,n);t.$indexSet(0,"primaries",w.List_null_srgb_custom[n])}if((n=e.colorTransfer)!==w._ColorTransfer_0){if((n=n.index)>=4)return E.ioore(w.List_null_linear_srgb_custom,n);t.$indexSet(0,"transfer",w.List_null_linear_srgb_custom[n])}if("number"!=typeof(n=e.bits))return n.$gt();n>0&&t.$indexSet(0,"bits",n)}return null!=t&&r.$indexSet(0,"image",t),r}},N.ResourcesLoader.prototype={load$1$validateAccessorData:function(e){return this.load$body$ResourcesLoader(e)},load$body$ResourcesLoader:function(e){var t,n,r=0,i=M._makeAsyncAwaitCompleter(-1),o=2,a=this,s=M._wrapJsFunctionForAsync((function(l,c){for(1===l&&(t=c,r=o);;)switch(r){case 0:return o=4,r=7,M._asyncAwait(a._loadBuffers$0(),s);case 7:return r=8,M._asyncAwait(a._loadImages$0(),s);case 8:e&&D.validateAccessorsData(a.gltf,a.context),a.gltf.validateResources$1(a.context),o=2,r=6;break;case 4:if(o=3,n=t,E.unwrapException(n)instanceof C.IssuesLimitExceededException){r=1;break}throw n;case 3:r=2;break;case 6:case 1:return M._asyncReturn(void 0,i);case 2:return M._asyncRethrow(t,i)}}));return M._asyncStartSync(s,i)},_loadBuffers$0:function(){var e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,v,y,_,b,x=0,S=M._makeAsyncAwaitCompleter(-1),C=2,$=this,O=M._wrapJsFunctionForAsync((function(A,I){for(1===A&&(t=I,x=C);;)switch(x){case 0:v=$.context,y=v.path,w.JSArray_methods.set$length(y,0),w.JSArray_methods.add$1(y,"buffers"),a=$.gltf.buffers,s=a._utils$_length,l=M.Object,c=[M.String,l],u=v._resources,l=[l],a=a._list,h=a.length,d=0;case 3:if(!(d<s)){x=5;break}if(p=d>=h)f=null;else{if(d>=h){e=E.ioore(a,d),x=1;break}f=a[d]}if(null==(n=f)){x=4;break}return w.JSArray_methods.add$1(y,w.JSInt_methods.toString$0(d)),(m=new N.ResourceInfo(v.getPointerString$0())).mimeType="application/gltf-buffer",r=new N.ResourcesLoader__loadBuffers__fetchBuffer($,m,d),i=null,C=7,b=E,x=10,M._asyncAwait(r.call$1(n),O);case 10:i=b.interceptedTypeCast(I,"$isUint8List"),C=2,x=9;break;case 7:if(C=6,_=t,p=E.unwrapException(_),!T.getInterceptor$(p).$isException)throw _;o=p,v.addIssue$3$args$name(K.$get$IoError_ioError(),E.setRuntimeTypeInfo([o],l),"uri"),x=9;break;case 6:x=2;break;case 9:if(null!=i&&(m.byteLength=T.get$length$asx(i),T.get$length$asx(i)<n.byteLength?v.addIssue$2$args(K.$get$DataError_bufferExternalBytelengthMismatch(),E.setRuntimeTypeInfo([T.get$length$asx(i),n.byteLength],l)):(v._isGlb&&0===d&&!n.hasUri&&(p=n.byteLength,g=p+(4-(3&p)&3),T.get$length$asx(i)>g&&v.addIssue$2$args(K.$get$DataError_bufferGlbChunkTooBig(),E.setRuntimeTypeInfo([T.get$length$asx(i)-g],l))),null==(p=n).data&&(p.data=E.interceptedTypeCheck(i,"$isUint8List")))),w.JSArray_methods.add$1(u,E.assertSubtype(m.toMap$0(),"$isMap",c,"$asMap")),0>=y.length){e=E.ioore(y,-1),x=1;break}y.pop();case 4:++d,x=3;break;case 5:case 1:return M._asyncReturn(e,S);case 2:return M._asyncRethrow(t,S)}}));return M._asyncStartSync(O,S)},_loadImages$0:function(){var e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,v,y,_,b,x,S,C,$=0,O=M._makeAsyncAwaitCompleter(-1),A=2,I=this,P=M._wrapJsFunctionForAsync((function(k,R){for(1===k&&(t=R,$=A);;)switch($){case 0:x=I.context,S=x.path,w.JSArray_methods.set$length(S,0),w.JSArray_methods.add$1(S,"images"),c=I.gltf.images,u=c._utils$_length,h=M.Object,d=[M.String,h],p=x._resources,h=[h],f=x.imageMimeTypes,c=c._list,m=c.length,g=0;case 3:if(!(g<u)){$=5;break}if(v=g>=m)y=null;else{if(g>=m){e=E.ioore(c,g),$=1;break}y=c[g]}if(null==(n=y)){$=4;break}w.JSArray_methods.add$1(S,w.JSInt_methods.toString$0(g)),_=new N.ResourceInfo(x.getPointerString$0()),r=new N.ResourcesLoader__loadImages__fetchImageData(I,_),i=null;try{i=r.call$1(n)}catch(e){if(v=E.unwrapException(e),!T.getInterceptor$(v).$isException)throw e;o=v,x.addIssue$3$args$name(K.$get$IoError_ioError(),E.setRuntimeTypeInfo([o],h),"uri")}a=null,$=null!=i?6:7;break;case 6:return A=9,$=12,M._asyncAwait(L.ImageInfo_parseStreamAsync(i),P);case 12:a=R,(v=w.JSArray_methods.contains$1(f,a.mimeType))||x.addIssue$2$args(K.$get$DataError_imageNonEnabledMimeType(),E.setRuntimeTypeInfo([a.mimeType],h)),A=2,$=11;break;case 9:if(A=8,C=t,v=E.unwrapException(C),(b=T.getInterceptor$(v)).$isUnsupportedImageFormatException)x.addIssue$1(K.$get$DataError_imageUnrecognizedFormat());else if(b.$isUnexpectedEndOfStreamException)x.addIssue$1(K.$get$DataError_imageUnexpectedEos());else if(b.$isInvalidDataFormatException)s=v,x.addIssue$2$args(K.$get$DataError_imageDataInvalid(),E.setRuntimeTypeInfo([s],h));else{if(!b.$isException)throw C;l=v,x.addIssue$3$args$name(K.$get$IoError_ioError(),E.setRuntimeTypeInfo([l],h),"uri")}$=11;break;case 8:$=2;break;case 11:null!=a&&(_.mimeType=a.mimeType,null!=n.mimeType&&n.mimeType!==a.mimeType&&x.addIssue$2$args(K.$get$DataError_imageMimeTypeInvalid(),E.setRuntimeTypeInfo([a.mimeType,n.mimeType],h)),(v=0===(v=a.width)||(v&v-1)>>>0!=0||!(0!==(v=a.height)&&(v&v-1)>>>0==0))&&x.addIssue$2$args(K.$get$DataError_imageNonPowerOfTwoDimensions(),E.setRuntimeTypeInfo([a.width,a.height],h)),((v=a).colorPrimaries===w._ColorPrimaries_2||v.colorTransfer===w._ColorTransfer_3||a.hasAnimation||a.hasNonSquarePixels)&&x.addIssue$1(K.$get$DataError_imageFeaturesUnsupported()),n.info=E.interceptedTypeCheck(a,"$isImageInfo"),_.image=E.interceptedTypeCheck(a,"$isImageInfo"));case 7:if(w.JSArray_methods.add$1(p,E.assertSubtype(_.toMap$0(),"$isMap",d,"$asMap")),0>=S.length){e=E.ioore(S,-1),$=1;break}S.pop();case 4:++g,$=3;break;case 5:case 1:return M._asyncReturn(e,O);case 2:return M._asyncRethrow(t,O)}}));return M._asyncStartSync(P,O)}},N.ResourcesLoader__loadBuffers__fetchBuffer.prototype={call$1:function(e){var t,n,r;if(0===e.extensions.__js_helper$_length){if(null!=(t=e.uri))return(n=this.info).storage=w._Storage_3,n.uri=t.toString$0(0),this.$this.externalBytesFetch.call$1(t);if(null!=(t=e.data))return this.info.storage=w._Storage_0,t;if((n=(t=this.$this).context)._isGlb&&0===this.i&&!e.hasUri)return this.info.storage=w._Storage_2,null==(r=t.externalBytesFetch.call$0())&&n.addIssue$1(K.$get$LinkError_bufferMissingGlbData()),r}},$signature:56},N.ResourcesLoader__loadImages__fetchImageData.prototype={call$1:function(e){var t,n;if(0===e.extensions.__js_helper$_length){if(null!=(t=e.uri))return(n=this.resourceInfo).storage=w._Storage_3,n.uri=t.toString$0(0),this.$this.externalStreamFetch.call$1(t);if(null!=(t=e.data)&&null!=e.mimeType)return this.resourceInfo.storage=w._Storage_0,n=[M.List,M.int],M.Stream_Stream$fromIterable(E.setRuntimeTypeInfo([t],[n]),n);if(null!=e._image$_bufferView&&(this.resourceInfo.storage=w._Storage_1,e.tryLoadFromBufferView$0(),null!=(t=e.data)))return n=[M.List,M.int],M.Stream_Stream$fromIterable(E.setRuntimeTypeInfo([t],[n]),n)}},$signature:57},D.validateAccessorsData_closure.prototype={call$2:function(e,t){var n,r,i,o,a,s,l,c,u=M.num;if(E.assertSubtype(t,"$isAccessor",[u],"$asAccessor"),null!=(null==(u=D._guardAccessor(t,u))?null:u.sparse)&&(n=(u=this.context).path,w.JSArray_methods.set$length(n,0),w.JSArray_methods.add$1(n,"accessors"),w.JSArray_methods.add$1(n,w.JSInt_methods.toString$0(e)),null!=(r=t.sparse.get$indicesTypedView())))for(n=r.length,i=t.count,o=[M.Object],a=0,s=-1,l=0;l<n;++l,s=c)c=r[l],-1!==s&&c<=s&&u.addIssue$3$args$name(K.$get$DataError_accessorSparseIndicesNonIncreasing(),E.setRuntimeTypeInfo([a,c,s],o),"sparse"),c>=i&&u.addIssue$3$args$name(K.$get$DataError_accessorSparseIndexOob(),E.setRuntimeTypeInfo([a,c,i],o),"sparse"),++a},$signature:58},D.validateAccessorsData_closure0.prototype={call$1:function(e){return 0===E.interceptedTypeCheck(e,"$isMeshPrimitive").jointsCount},$signature:3},D.validateAccessorsData_closure1.prototype={call$2:function(e,t){var n,r,i,o,a,s,l,c,u,h,d,p,f;for(E.interceptedTypeCheck(t,"$isMeshPrimitive"),n=t._vertexCount,r=t.jointsCount,(i=new Array(r)).fixed$length=Array,o=E.setRuntimeTypeInfo(i,[[M.Iterator,M.int]]),(i=new Array(r)).fixed$length=Array,a=E.setRuntimeTypeInfo(i,[[M.Iterator,M.double]]),l=[i=M.int],c=t.attributes,u=M.num,h=0;;){if(!(h<r)){s=!1;break}if(d=D._guardAccessor(c.$index(0,"JOINTS_"+h),u),p=D._guardAccessor(c.$index(0,"WEIGHTS_"+h),u),f=(null==d?null:d.count)!==n||(null==p?null:p.count)!==n){s=!0;break}f=E.subtypeCast(d,"$isAccessor",l,"$asAccessor").getElements$0(),w.JSArray_methods.$indexSet(o,h,new M._SyncStarIterator(f._outerHelper(),[E.getTypeArgumentByIndex(f,0)])),f=p.getElementsNormalized$0(),w.JSArray_methods.$indexSet(a,h,new M._SyncStarIterator(f._outerHelper(),[E.getTypeArgumentByIndex(f,0)])),++h}if(!s){if(l=(r=this.context).path,w.JSArray_methods.add$1(l,w.JSInt_methods.toString$0(e)),w.JSArray_methods.add$1(l,"attributes"),c=this.influencesIterators,w.JSArray_methods.addAll$1(c,o),w.JSArray_methods.addAll$1(c,a),r=r.getPointerString$0(),c=this._box_0,w.JSArray_methods.add$1(this.influencesCheckers,new D.InfluencesChecker(o,a,c.maxJoints-1,c.limitingSkinIndex,r,M.LinkedHashSet_LinkedHashSet$_empty(i))),0>=l.length)return E.ioore(l,-1);if(l.pop(),0>=l.length)return E.ioore(l,-1);l.pop()}},$signature:20},D._stepInfluencesIterators_closure.prototype={call$1:function(e){return null==E.assertSubtype(e,"$isIterator",[M.num],"$asIterator").get$current()},$signature:59},D.InfluencesChecker.prototype={checkNext$1:function(e){var t,n,r,i,o,a,s,l,c,u,h,d,p,f,m;for(n=(t=this.jointsIterators).length,i=(r=this.weightsIterators).length,o=this.maxJointIndex,a=this.path,s=[M.Object],l=this._currentIndices,c=this.limitingSkinIndex,u=0;u<n;++u){if(null==(h=t[u].get$current()))return void(this._done=!0);if(h>o)d=K.$get$DataError_accessorJointsIndexOob(),p=a+"/JOINTS_"+u,e.addIssue$3$args$name(d,E.setRuntimeTypeInfo([this._validate_accessors$_index,this._componentIndex,h,o,c],s),p);else{if(u>=i)return E.ioore(r,u);if(0!==(f=r[u].get$current())){if(l.add$1(0,h)?m=!0:(d=K.$get$DataError_accessorJointsIndexDuplicate(),p=a+"/JOINTS_"+u,e.addIssue$3$args$name(d,E.setRuntimeTypeInfo([this._validate_accessors$_index,this._componentIndex,h],s),p),m=!1),"number"!=typeof f)return f.$lt();f<0?(d=K.$get$DataError_accessorWeightsNegative(),p=a+"/WEIGHTS_"+u,e.addIssue$3$args$name(d,E.setRuntimeTypeInfo([this._validate_accessors$_index,this._componentIndex,f],s),p)):m&&(d=this._sum,(p=K.$get$_float())[0]=d+f,this._sum=p[0],this._threshold+=2e-7)}else 0!==h&&(d=K.$get$DataError_accessorJointsUsedZeroWeight(),p=a+"/JOINTS_"+u,e.addIssue$3$args$name(d,E.setRuntimeTypeInfo([this._validate_accessors$_index,this._componentIndex,h],s),p))}}if(4==++this._componentIndex){if(Math.abs(this._sum-1)>this._threshold)for(u=0;u<n;++u)t=K.$get$DataError_accessorWeightsNonNormalized(),r=a+"/WEIGHTS_"+u,i=this._validate_accessors$_index,e.addIssue$3$args$name(t,E.setRuntimeTypeInfo([i-3,i,this._sum],s),r);l.clear$0(0),this._sum=this._threshold=this._componentIndex=0}++this._validate_accessors$_index}},F.Severity.prototype={toString$0:function(e){return this._errors$_name}},F.IssueType.prototype={},F.DataError.prototype={},F.DataError_closure16.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Actual Data URI encoded data length "+E.S(e[0])+" is not equal to the declared buffer byteLength ",1>=e.length?E.ioore(e,1):t+E.S(e[1])+".")},$signature:0},F.DataError_closure14.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Actual data length "+E.S(e[0])+" is less than the declared buffer byteLength ",1>=e.length?E.ioore(e,1):t+E.S(e[1])+".")},$signature:0},F.DataError_closure13.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"GLB-stored BIN chunk contains "+E.S(e[0])+" extra padding byte(s)."},$signature:0},F.DataError_closure20.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Declared minimum value for this component ("+E.S(e[0])+") does not match actual minimum (",1>=e.length?E.ioore(e,1):t+E.S(e[1])+").")},$signature:0},F.DataError_closure18.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Declared maximum value for this component ("+E.S(e[0])+") does not match actual maximum (",1>=e.length?E.ioore(e,1):t+E.S(e[1])+").")},$signature:0},F.DataError_closure19.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Accessor contains "+E.S(e[0])+" element(s) less than declared minimum value ",1>=e.length?E.ioore(e,1):t+E.S(e[1])+".")},$signature:0},F.DataError_closure17.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Accessor contains "+E.S(e[0])+" element(s) greater than declared maximum value ",1>=e.length?E.ioore(e,1):t+E.S(e[1])+".")},$signature:0},F.DataError_closure29.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Vector3 at accessor indices "+E.S(e[0])+"..",1>=e.length?E.ioore(e,1):(t=t+E.S(e[1])+" is not of unit length: ",2>=e.length?E.ioore(e,2):t+E.S(e[2])+"."))},$signature:0},F.DataError_closure30.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Vector3 with sign at accessor indices "+E.S(e[0])+"..",1>=e.length?E.ioore(e,1):(t=t+E.S(e[1])+" has invalid w component: ",2>=e.length?E.ioore(e,2):t+E.S(e[2])+". Must be 1.0 or -1.0."))},$signature:0},F.DataError_closure22.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Animation sampler output accessor element at indices "+E.S(e[0])+"..",1>=e.length?E.ioore(e,1):(t=t+E.S(e[1])+" is not of unit length: ",2>=e.length?E.ioore(e,2):t+E.S(e[2])+"."))},$signature:0},F.DataError_closure28.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Accessor element at index "+E.S(e[0])+" is not clamped to 0..1 range: ",1>=e.length?E.ioore(e,1):t+E.S(e[1])+".")},$signature:0},F.DataError_closure21.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Accessor element at index "+E.S(e[0])+" is ",1>=e.length?E.ioore(e,1):t+E.S(e[1])+".")},$signature:0},F.DataError_closure27.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Indices accessor element at index "+E.S(e[0])+" has value ",1>=e.length?E.ioore(e,1):(t=t+E.S(e[1])+" that is greater than the maximum vertex index available (",2>=e.length?E.ioore(e,2):t+E.S(e[2])+")."))},$signature:0},F.DataError_closure25.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Indices accessor contains "+E.S(e[0])+" degenerate triangles (out of ",1>=e.length?E.ioore(e,1):t+E.S(e[1])+").")},$signature:0},F.DataError_closure26.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Indices accessor contains primitive restart value ("+E.S(e[0])+") at index ",1>=e.length?E.ioore(e,1):t+E.S(e[1])+".")},$signature:0},F.DataError_closure24.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Animation input accessor element at index "+E.S(e[0])+" is negative: ",1>=e.length?E.ioore(e,1):t+E.S(e[1])+".")},$signature:0},F.DataError_closure23.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Animation input accessor element at index "+E.S(e[0])+" is less than or equal to previous: ",1>=e.length?E.ioore(e,1):(t=t+E.S(e[1])+" <= ",2>=e.length?E.ioore(e,2):t+E.S(e[2])+"."))},$signature:0},F.DataError_closure5.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Accessor sparse indices element at index "+E.S(e[0])+" is less than or equal to previous: ",1>=e.length?E.ioore(e,1):(t=t+E.S(e[1])+" <= ",2>=e.length?E.ioore(e,2):t+E.S(e[2])+"."))},$signature:0},F.DataError_closure4.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Accessor sparse indices element at index "+E.S(e[0])+" is greater than or equal to the number of accessor elements: ",1>=e.length?E.ioore(e,1):(t=t+E.S(e[1])+" >= ",2>=e.length?E.ioore(e,2):t+E.S(e[2])+"."))},$signature:0},F.DataError_closure31.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Matrix element at index "+E.S(e[0])+" (component index ",1>=e.length?E.ioore(e,1):(t=t+E.S(e[1])+") contains invalid value: ",2>=e.length?E.ioore(e,2):t+E.S(e[2])+"."))},$signature:0},F.DataError_closure9.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Image data is invalid. "+E.S(e[0])},$signature:0},F.DataError_closure8.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Recognized image format '"+E.S(e[0])+"' does not match declared image format ",1>=e.length?E.ioore(e,1):t+"'"+E.S(e[1])+"'.")},$signature:0},F.DataError_closure10.prototype={call$1:function(e){return"Unexpected end of image stream."},$signature:0},F.DataError_closure11.prototype={call$1:function(e){return"Image format not recognized."},$signature:0},F.DataError_closure12.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"'"+E.S(e[0])+"' MIME type requires an extension."},$signature:0},F.DataError_closure7.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Image has non-power-of-two dimensions: "+E.S(e[0])+"x",1>=e.length?E.ioore(e,1):t+E.S(e[1])+".")},$signature:0},F.DataError_closure6.prototype={call$1:function(e){return"Image contains unsupported features like non-default colorspace information, non-square pixels, or animation."},$signature:0},F.DataError_closure15.prototype={call$1:function(e){return"Data URI is used in GLB container."},$signature:0},F.DataError_closure3.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Joints accessor element at index "+E.S(e[0])+" (component index ",1>=e.length?E.ioore(e,1):(t=t+E.S(e[1])+") has value ",2>=e.length?E.ioore(e,2):(t=t+E.S(e[2])+" that is greater than the maximum joint index (",3>=e.length?E.ioore(e,3):(t=t+E.S(e[3])+") set by skin ",4>=e.length?E.ioore(e,4):t+E.S(e[4])+"."))))},$signature:0},F.DataError_closure2.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Joints accessor element at index "+E.S(e[0])+" (component index ",1>=e.length?E.ioore(e,1):(t=t+E.S(e[1])+") has value ",2>=e.length?E.ioore(e,2):t+E.S(e[2])+" that is already in use for the vertex."))},$signature:0},F.DataError_closure1.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Weights accessor element at index "+E.S(e[0])+" (component index ",1>=e.length?E.ioore(e,1):(t=t+E.S(e[1])+") has negative value ",2>=e.length?E.ioore(e,2):t+E.S(e[2])+"."))},$signature:0},F.DataError_closure.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Weights accessor elements (at indices "+E.S(e[0])+"..",1>=e.length?E.ioore(e,1):(t=t+E.S(e[1])+") have non-normalized sum: ",2>=e.length?E.ioore(e,2):t+E.S(e[2])+"."))},$signature:0},F.DataError_closure0.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Joints accessor element at index "+E.S(e[0])+" (component index ",1>=e.length?E.ioore(e,1):(t=t+E.S(e[1])+") is used with zero weight but has non-zero value (",2>=e.length?E.ioore(e,2):t+E.S(e[2])+")."))},$signature:0},F.IoError.prototype={},F.IoError_closure.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):T.toString$0$(e[0])},$signature:0},F.SchemaError.prototype={},F.SchemaError_closure3.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Invalid array length "+E.S(e[0])+". Valid lengths are: ",1>=e.length?E.ioore(e,1):t+T.map$1$1$ax(E.listSuperNativeTypeCast(e[1],"$isIterable"),F.errors___mbq$closure(),M.String).toString$0(0)+".")},$signature:0},F.SchemaError_closure4.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t=e[0],t="Type mismatch. Array element "+E.S("string"==typeof t?"'"+t+"'":T.toString$0$(t))+" is not a ",1>=e.length?E.ioore(e,1):t+"'"+E.S(e[1])+"'.")},$signature:0},F.SchemaError_closure9.prototype={call$1:function(e){return"Duplicate element."},$signature:0},F.SchemaError_closure7.prototype={call$1:function(e){return"Index must be a non-negative integer."},$signature:0},F.SchemaError_closure14.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Invalid JSON data. Parser output: "+E.S(e[0])},$signature:0},F.SchemaError_closure10.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Invalid URI '"+E.S(e[0])+"'. Parser output:\n",1>=e.length?E.ioore(e,1):t+E.S(e[1]))},$signature:0},F.SchemaError_closure5.prototype={call$1:function(e){return"Entity cannot be empty."},$signature:0},F.SchemaError_closure11.prototype={call$1:function(e){var t,n=M.String;return e.toString,t=E.getTypeArgumentByIndex(e,0),"Exactly one of "+new E.MappedListIterable(e,E.functionTypeCheck(F.errors___q$closure(),{func:1,ret:n,args:[t]}),[t,n]).toString$0(0)+" properties must be defined."},$signature:0},F.SchemaError_closure8.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Value '"+E.S(e[0])+"' does not match regexp pattern ",1>=e.length?E.ioore(e,1):t+"'"+E.S(e[1])+"'.")},$signature:0},F.SchemaError_closure.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t=e[0],t="Type mismatch. Property value "+E.S("string"==typeof t?"'"+t+"'":T.toString$0$(t))+" is not a ",1>=e.length?E.ioore(e,1):t+"'"+E.S(e[1])+"'.")},$signature:0},F.SchemaError_closure2.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t=e[0],t="Invalid value "+E.S("string"==typeof t?"'"+t+"'":T.toString$0$(t))+". Valid values are ",1>=e.length?E.ioore(e,1):t+T.map$1$1$ax(E.listSuperNativeTypeCast(e[1],"$isIterable"),F.errors___mbq$closure(),M.String).toString$0(0)+".")},$signature:0},F.SchemaError_closure1.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Value "+E.S(e[0])+" is out of range."},$signature:0},F.SchemaError_closure12.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Value "+E.S(e[0])+" is not a multiple of ",1>=e.length?E.ioore(e,1):t+E.S(e[1])+".")},$signature:0},F.SchemaError_closure0.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Property '"+E.S(e[0])+"' must be defined."},$signature:0},F.SchemaError_closure6.prototype={call$1:function(e){return"Unexpected property."},$signature:0},F.SchemaError_closure13.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Dependency failed. '"+E.S(e[0])+"' must be defined."},$signature:0},F.SemanticError.prototype={},F.SemanticError_closure38.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Unknown glTF major asset version: "+E.S(e[0])+"."},$signature:0},F.SemanticError_closure37.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Unknown glTF minor asset version: "+E.S(e[0])+"."},$signature:0},F.SemanticError_closure28.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Asset minVersion '"+E.S(e[0])+"' is greater than version ",1>=e.length?E.ioore(e,1):t+"'"+E.S(e[1])+"'.")},$signature:0},F.SemanticError_closure26.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Invalid value "+E.S(e[0])+" for GL type ",1>=e.length?E.ioore(e,1):t+"'"+E.S(e[1])+"'.")},$signature:0},F.SemanticError_closure27.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Integer value is written with fractional part: "+E.S(e[0])+"."},$signature:0},F.SemanticError_closure25.prototype={call$1:function(e){return"Only (u)byte and (u)short accessors can be normalized."},$signature:0},F.SemanticError_closure23.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Offset "+E.S(e[0])+" is not a multiple of componentType length ",1>=e.length?E.ioore(e,1):t+E.S(e[1])+".")},$signature:0},F.SemanticError_closure24.prototype={call$1:function(e){return"Matrix accessors must be aligned to 4-byte boundaries."},$signature:0},F.SemanticError_closure33.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Sparse accessor overrides more elements ("+E.S(e[0])+") than the base accessor contains (",1>=e.length?E.ioore(e,1):t+E.S(e[1])+").")},$signature:0},F.SemanticError_closure34.prototype={call$1:function(e){return"Animated TRS properties will not affect a skinned mesh."},$signature:0},F.SemanticError_closure22.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Buffer's Data URI MIME-Type must be 'application/octet-stream' or 'application/gltf-buffer'. Found '"+E.S(e[0])+"' instead."},$signature:0},F.SemanticError_closure21.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Buffer view's byteStride ("+E.S(e[0])+") is greater than byteLength (",1>=e.length?E.ioore(e,1):t+E.S(e[1])+").")},$signature:0},F.SemanticError_closure20.prototype={call$1:function(e){return"Only buffer views with raw vertex data can have byteStride."},$signature:0},F.SemanticError_closure19.prototype={call$1:function(e){return"xmag and ymag must not be zero."},$signature:0},F.SemanticError_closure18.prototype={call$1:function(e){return"zfar must be greater than znear."},$signature:0},F.SemanticError_closure16.prototype={call$1:function(e){return"Alpha cutoff is supported only for 'MASK' alpha mode."},$signature:0},F.SemanticError_closure10.prototype={call$1:function(e){return"Invalid attribute name."},$signature:0},F.SemanticError_closure9.prototype={call$1:function(e){return"All primitives must have the same number of morph targets."},$signature:0},F.SemanticError_closure8.prototype={call$1:function(e){return"All primitives should contain the same number of 'JOINTS' and 'WEIGHTS' attribute sets."},$signature:0},F.SemanticError_closure15.prototype={call$1:function(e){return"No POSITION attribute found."},$signature:0},F.SemanticError_closure12.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Indices for indexed attribute semantic '"+E.S(e[0])+"' must start with 0 and be continuous. Total expected indices: ",1>=e.length?E.ioore(e,1):(t=t+E.S(e[1])+", total provided indices: ",2>=e.length?E.ioore(e,2):t+E.S(e[2])+"."))},$signature:0},F.SemanticError_closure14.prototype={call$1:function(e){return"TANGENT attribute without NORMAL found."},$signature:0},F.SemanticError_closure11.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Number of JOINTS attribute semantics ("+E.S(e[0])+") does not match the number of WEIGHTS (",1>=e.length?E.ioore(e,1):t+E.S(e[1])+").")},$signature:0},F.SemanticError_closure13.prototype={call$1:function(e){return"TANGENT attribute defined for POINTS rendering mode."},$signature:0},F.SemanticError_closure7.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="The length of weights array ("+E.S(e[0])+") does not match the number of morph targets (",1>=e.length?E.ioore(e,1):t+E.S(e[1])+").")},$signature:0},F.SemanticError_closure5.prototype={call$1:function(e){return"A node can have either a matrix or any combination of translation/rotation/scale (TRS) properties."},$signature:0},F.SemanticError_closure4.prototype={call$1:function(e){return"Do not specify default transform matrix."},$signature:0},F.SemanticError_closure3.prototype={call$1:function(e){return"Matrix must be decomposable to TRS."},$signature:0},F.SemanticError_closure6.prototype={call$1:function(e){return"Rotation quaternion must be normalized."},$signature:0},F.SemanticError_closure39.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Unused extension '"+E.S(e[0])+"' cannot be required."},$signature:0},F.SemanticError_closure40.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Extension '"+E.S(e[0])+"' cannot be optional."},$signature:0},F.SemanticError_closure41.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Extension uses unreserved extension prefix '"+E.S(e[0])+"'."},$signature:0},F.SemanticError_closure42.prototype={call$1:function(e){return"Extension name has invalid format."},$signature:0},F.SemanticError_closure32.prototype={call$1:function(e){return"Empty node encountered."},$signature:0},F.SemanticError_closure31.prototype={call$1:function(e){return"Node with a skinned mesh is not root. Parent transforms will not affect a skinned mesh."},$signature:0},F.SemanticError_closure30.prototype={call$1:function(e){return"Local transforms will not affect a skinned mesh."},$signature:0},F.SemanticError_closure29.prototype={call$1:function(e){return"A node with a skinned mesh is used in a scene that does not contain joint nodes."},$signature:0},F.SemanticError_closure36.prototype={call$1:function(e){return"Joints do not have a common root."},$signature:0},F.SemanticError_closure35.prototype={call$1:function(e){return"Skeleton node is not a common root."},$signature:0},F.SemanticError_closure17.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Non-relative URI found: '"+E.S(e[0])+"'."},$signature:0},F.SemanticError_closure0.prototype={call$1:function(e){return 1>=e.length?E.ioore(e,1):"Multiple extensions are defined for this object: "+T.map$1$1$ax(E.listSuperNativeTypeCast(e[1],"$isIterable"),F.errors___q$closure(),M.String).toString$0(0)+"."},$signature:0},F.SemanticError_closure.prototype={call$1:function(e){return"Prefer JSON Objects for extras."},$signature:0},F.SemanticError_closure2.prototype={call$1:function(e){return"This property should not be defined as it will not be used."},$signature:0},F.SemanticError_closure1.prototype={call$1:function(e){var t;return 1>=e.length?E.ioore(e,1):(t="outerConeAngle ("+E.S(e[1])+") is less than or equal to innerConeAngle (",0>=e.length?E.ioore(e,0):t+E.S(e[0])+").")},$signature:0},F.LinkError.prototype={},F.LinkError_closure4.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Accessor's total byteOffset "+E.S(e[0])+" isn't a multiple of componentType length ",1>=e.length?E.ioore(e,1):t+E.S(e[1])+".")},$signature:0},F.LinkError_closure8.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Referenced bufferView's byteStride value "+E.S(e[0])+" is less than accessor element's length ",1>=e.length?E.ioore(e,1):t+E.S(e[1])+".")},$signature:0},F.LinkError_closure3.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Accessor (offset: "+E.S(e[0])+", length: ",1>=e.length?E.ioore(e,1):(t=t+E.S(e[1])+") does not fit referenced bufferView [",2>=e.length?E.ioore(e,2):(t=t+E.S(e[2])+"] length ",3>=e.length?E.ioore(e,3):t+E.S(e[3])+".")))},$signature:0},F.LinkError_closure17.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Override of previously set accessor usage. Initial: '"+E.S(e[0])+"', new: ",1>=e.length?E.ioore(e,1):t+"'"+E.S(e[1])+"'.")},$signature:0},F.LinkError_closure9.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Animation channel has the same target as channel "+E.S(e[0])+"."},$signature:0},F.LinkError_closure13.prototype={call$1:function(e){return"Animation channel cannot target TRS properties of a node with defined matrix."},$signature:0},F.LinkError_closure12.prototype={call$1:function(e){return"Animation channel cannot target WEIGHTS when mesh does not have morph targets."},$signature:0},F.LinkError_closure15.prototype={call$1:function(e){return"accessor.min and accessor.max must be defined for animation input accessor."},$signature:0},F.LinkError_closure16.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Invalid Animation sampler input accessor format '"+E.S(e[0])+"'. Must be one of ",1>=e.length?E.ioore(e,1):t+T.map$1$1$ax(E.listSuperNativeTypeCast(e[1],"$isIterable"),F.errors___q$closure(),M.String).toString$0(0)+".")},$signature:0},F.LinkError_closure11.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Invalid animation sampler output accessor format '"+E.S(e[0])+"' for path ",2>=e.length?E.ioore(e,2):(t=t+"'"+E.S(e[2])+"'. Must be one of ",1>=e.length?E.ioore(e,1):t+T.map$1$1$ax(E.listSuperNativeTypeCast(e[1],"$isIterable"),F.errors___q$closure(),M.String).toString$0(0)+"."))},$signature:0},F.LinkError_closure14.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Animation sampler output accessor with '"+E.S(e[0])+"' interpolation must have at least ",1>=e.length?E.ioore(e,1):(t=t+E.S(e[1])+" elements. Got ",2>=e.length?E.ioore(e,2):t+E.S(e[2])+"."))},$signature:0},F.LinkError_closure10.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Animation sampler output accessor of count "+E.S(e[0])+" expected. Found ",1>=e.length?E.ioore(e,1):t+E.S(e[1])+".")},$signature:0},F.LinkError_closure2.prototype={call$1:function(e){return"Buffer refers to an unresolved GLB binary chunk."},$signature:0},F.LinkError_closure18.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="BufferView does not fit buffer ("+E.S(e[0])+") byteLength (",1>=e.length?E.ioore(e,1):t+E.S(e[1])+").")},$signature:0},F.LinkError_closure7.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Override of previously set bufferView target or usage. Initial: '"+E.S(e[0])+"', new: ",1>=e.length?E.ioore(e,1):t+"'"+E.S(e[1])+"'.")},$signature:0},F.LinkError_closure35.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Accessor of count "+E.S(e[0])+" expected. Found ",1>=e.length?E.ioore(e,1):t+E.S(e[1])+".")},$signature:0},F.LinkError_closure21.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Invalid accessor format '"+E.S(e[0])+"' for this attribute semantic. Must be one of ",1>=e.length?E.ioore(e,1):t+T.map$1$1$ax(E.listSuperNativeTypeCast(e[1],"$isIterable"),F.errors___q$closure(),M.String).toString$0(0)+".")},$signature:0},F.LinkError_closure22.prototype={call$1:function(e){return"accessor.min and accessor.max must be defined for POSITION attribute accessor."},$signature:0},F.LinkError_closure19.prototype={call$1:function(e){return"bufferView.byteStride must be defined when two or more accessors use the same buffer view."},$signature:0},F.LinkError_closure20.prototype={call$1:function(e){return"Vertex attribute data must be aligned to 4-byte boundaries."},$signature:0},F.LinkError_closure28.prototype={call$1:function(e){return"bufferView.byteStride must not be defined for indices accessor."},$signature:0},F.LinkError_closure27.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Invalid indices accessor format '"+E.S(e[0])+"'. Must be one of ",1>=e.length?E.ioore(e,1):t+T.map$1$1$ax(E.listSuperNativeTypeCast(e[1],"$isIterable"),F.errors___q$closure(),M.String).toString$0(0)+". ")},$signature:0},F.LinkError_closure26.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Number of vertices or indices ("+E.S(e[0])+") is not compatible with used drawing mode (",1>=e.length?E.ioore(e,1):t+"'"+E.S(e[1])+"').")},$signature:0},F.LinkError_closure25.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Material is incompatible with mesh primitive: Texture binding '"+E.S(e[0])+"' needs 'TEXCOORD_",1>=e.length?E.ioore(e,1):t+E.S(e[1])+"' attribute.")},$signature:0},F.LinkError_closure29.prototype={call$1:function(e){return"All accessors of the same primitive must have the same count."},$signature:0},F.LinkError_closure24.prototype={call$1:function(e){return"No base accessor for this attribute semantic."},$signature:0},F.LinkError_closure23.prototype={call$1:function(e){return"Base accessor has different count."},$signature:0},F.LinkError_closure6.prototype={call$1:function(e){return"Node is a part of a node loop."},$signature:0},F.LinkError_closure30.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Value overrides parent of node "+E.S(e[0])+"."},$signature:0},F.LinkError_closure33.prototype={call$1:function(e){var t,n;return 0>=e.length?E.ioore(e,0):(t="The length of weights array ("+E.S(e[0])+") does not match the number of morph targets (",1>=e.length?E.ioore(e,1):(n=e[1],t+E.S(null==n?0:n)+")."))},$signature:0},F.LinkError_closure32.prototype={call$1:function(e){return"Node has skin defined, but mesh has no joints data."},$signature:0},F.LinkError_closure31.prototype={call$1:function(e){return"Node uses skinned mesh, but has no skin defined."},$signature:0},F.LinkError_closure34.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Node "+E.S(e[0])+" is not a root node."},$signature:0},F.LinkError_closure36.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Invalid IBM accessor format '"+E.S(e[0])+"'. Must be one of ",1>=e.length?E.ioore(e,1):t+T.map$1$1$ax(E.listSuperNativeTypeCast(e[1],"$isIterable"),F.errors___q$closure(),M.String).toString$0(0)+". ")},$signature:0},F.LinkError_closure1.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Invalid MIME type '"+E.S(e[0])+"' for the texture source. Valid MIME types are ",1>=e.length?E.ioore(e,1):t+T.map$1$1$ax(E.listSuperNativeTypeCast(e[1],"$isIterable"),F.errors___q$closure(),M.String).toString$0(0)+".")},$signature:0},F.LinkError_closure0.prototype={call$1:function(e){return"Extension is not declared in extensionsUsed."},$signature:0},F.LinkError_closure.prototype={call$1:function(e){return"Unexpected location for this extension."},$signature:0},F.LinkError_closure37.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Unresolved reference: "+E.S(e[0])+"."},$signature:0},F.LinkError_closure38.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Cannot validate an extension as it is not supported by the validator: '"+E.S(e[0])+"'."},$signature:0},F.LinkError_closure5.prototype={call$1:function(e){return"This object may be unused."},$signature:0},F.GlbError.prototype={},F.GlbError_closure12.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Invalid GLB magic value ("+E.S(e[0])+")."},$signature:0},F.GlbError_closure11.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Invalid GLB version value "+E.S(e[0])+"."},$signature:0},F.GlbError_closure10.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Declared GLB length ("+E.S(e[0])+") is too small."},$signature:0},F.GlbError_closure9.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Length of "+E.S(e[0])+" chunk is not aligned to 4-byte boundaries."},$signature:0},F.GlbError_closure0.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Declared length ("+E.S(e[0])+") does not match GLB length (",1>=e.length?E.ioore(e,1):t+E.S(e[1])+").")},$signature:0},F.GlbError_closure8.prototype={call$1:function(e){var t;return 0>=e.length?E.ioore(e,0):(t="Chunk ("+E.S(e[0])+") length (",1>=e.length?E.ioore(e,1):t+E.S(e[1])+") does not fit total GLB length.")},$signature:0},F.GlbError_closure4.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Chunk ("+E.S(e[0])+") cannot have zero length."},$signature:0},F.GlbError_closure5.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Chunk of type "+E.S(e[0])+" has already been used."},$signature:0},F.GlbError_closure1.prototype={call$1:function(e){return"Unexpected end of chunk header."},$signature:0},F.GlbError_closure.prototype={call$1:function(e){return"Unexpected end of chunk data."},$signature:0},F.GlbError_closure2.prototype={call$1:function(e){return"Unexpected end of header."},$signature:0},F.GlbError_closure7.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"First chunk must be of JSON type. Found "+E.S(e[0])+" instead."},$signature:0},F.GlbError_closure6.prototype={call$1:function(e){return"BIN chunk must be the second chunk."},$signature:0},F.GlbError_closure3.prototype={call$1:function(e){return 0>=e.length?E.ioore(e,0):"Unknown GLB chunk type: "+E.S(e[0])+"."},$signature:0},F.Issue.prototype={get$message:function(){return T.trimRight$0$s(this.type.message.call$1(this._args))},get$hashCode:function(e){return w.JSString_methods.get$hashCode(this.toString$0(0))},$eq:function(e,t){return null!=t&&(t instanceof F.Issue&&t.toString$0(0)===this.toString$0(0))},toString$0:function(e){var t=this.pointer;return null!=t&&0!==t.length?E.S(t)+": "+this.get$message():null!=(t=this.offset)?"@"+E.S(t)+": "+this.get$message():this.get$message()}},U.ExtTextureWebPTexture.prototype={link$2:function(e,t){var n=this._sourceIndex,r=E.interceptedTypeCheck(e.images.$index(0,n),"$isImage");this._ext_texture_webp$_source=r,-1!==n&&(null==r?t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([n],[M.Object]),"source"):r._isUsed=!0)},validateResources$2:function(e,t){var n,r=this._ext_texture_webp$_source;null!=(n=null==(r=null==r?null:r.info)?null:r.mimeType)&&"image/webp"!==n&&t.addIssue$3$args$name(K.$get$LinkError_textureInvalidImageMimeType(),E.setRuntimeTypeInfo([n,w.List_oCz],[M.Object]),"source")},$isResourceValidatable:1},B.KhrLightsPunctualGltf.prototype={link$2:function(e,t){var n,r,i=t.path;if(w.JSArray_methods.add$1(i,"lights"),n=this.lights,r=T.JSArray_JSArray$markFixed(i.slice(0),E.getTypeArgumentByIndex(i,0)),t.extensionCollections.$indexSet(0,n,r),n.forEachWithIndices$1(new B.KhrLightsPunctualGltf_link_closure(t,e)),0>=i.length)return E.ioore(i,-1);i.pop()}},B.KhrLightsPunctualGltf_link_closure.prototype={call$2:function(e,t){var n;if(E.interceptedTypeCheck(t,"$isKhrLightsPunctualLight"),n=this.context.path,w.JSArray_methods.add$1(n,w.JSInt_methods.toString$0(e)),0>=n.length)return E.ioore(n,-1);n.pop()},$signature:61},B.KhrLightsPunctualLight.prototype={},B.KhrLightsPunctualLightSpot.prototype={},B.KhrLightsPunctualNode.prototype={link$2:function(e,t){var n,r,i=e.extensions.$index(0,"KHR_lights_punctual");i instanceof B.KhrLightsPunctualGltf?(n=this._lightIndex,r=E.interceptedTypeCheck(i.lights.$index(0,n),"$isKhrLightsPunctualLight"),this._light=r,-1!==n&&(null==r?t.addIssue$3$args$name(K.$get$LinkError_unresolvedReference(),E.setRuntimeTypeInfo([n],[M.Object]),"light"):r._isUsed=!0)):t.addIssue$2$args(K.$get$SchemaError_unsatisfiedDependency(),E.setRuntimeTypeInfo(["/extensions/KHR_lights_punctual"],[M.Object]))}},z.KhrMaterialsPbrSpecularGlossiness.prototype={link$2:function(e,t){var n,r=this.diffuseTexture;if(null!=r){if(n=t.path,w.JSArray_methods.add$1(n,"diffuseTexture"),r.link$2(e,t),0>=n.length)return E.ioore(n,-1);n.pop()}if(null!=(r=this.specularGlossinessTexture)){if(n=t.path,w.JSArray_methods.add$1(n,"specularGlossinessTexture"),r.link$2(e,t),0>=n.length)return E.ioore(n,-1);n.pop()}}},k.KhrMaterialsUnlit.prototype={},V.KhrTextureTransform.prototype={link$2:function(e,t){var n,r;for(n=t.owners,r=this;null!=r;)if((r=n.$index(0,r))instanceof L.Material){r.texCoordIndices.$indexSet(0,t.getPointerString$0(),this.texCoord);break}}},U.Extension.prototype={},U.ExtFuncs.prototype={},U.ExtensionTuple.prototype={get$hashCode:function(e){var t=T.get$hashCode$(this.type),n=T.get$hashCode$(this.name);return z._finish(z._combine(z._combine(0,w.JSInt_methods.get$hashCode(t)),w.JSInt_methods.get$hashCode(n)))},$eq:function(e,t){return null!=t&&(t instanceof U.ExtensionTuple&&this.name==t.name&&T.$eq$(this.type,t.type))}},U.LinkableExtensionEntry.prototype={},U.ResourceValidatableExtensionEntry.prototype={},z.GlbReader.prototype={read$0:function(){var e;return this.set$_glb_reader$_subscription(this.stream.listen$3$onDone$onError(this.get$_glb_reader$_onData(),this.get$_glb_reader$_onDone(),this.get$_glb_reader$_onError())),(e=this._jsonStreamController).set$onPause(this._glb_reader$_subscription.get$pause()),e.set$onResume(this._glb_reader$_subscription.get$resume()),e.set$onCancel(new z.GlbReader_read_closure(this)),this._glb_reader$_completer.future},_glb_reader$_abort$0:function(){this._glb_reader$_subscription.cancel$0();var e=this._glb_reader$_completer;0===e.future._state&&e.complete$1(new G.GltfReaderResult("model/gltf-binary",null,this._binaryBuffer))},_glb_reader$_onData$1:function(e){var t,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g="model/gltf-binary";for(E.assertSubtype(e,"$isList",[M.int],"$asList"),this._glb_reader$_subscription.pause$0(),t=T.getInterceptor$asx(e),r=[n=G.GltfReaderResult],n=[n],i=[M.Object],o=this._header,a=0,s=0;a!==t.get$length(e);)switch(this._glb_reader$_state){case 0:if(l=t.get$length(e),l=(c=this._localOffset)+(s=Math.min(l-a,12-c)),this._localOffset=l,w.NativeUint8List_methods.setRange$4(o,c,l,e,a),a+=s,this._glb_reader$_offset=s,12!==this._localOffset)break;if(1179937895!==(u=this._headerByteData.getUint32(0,!0)))return this._context.addIssue$3$args$offset(K.$get$GlbError_invalidMagic(),E.setRuntimeTypeInfo([u],i),0),this._glb_reader$_subscription.cancel$0(),void(0===(n=(t=this._glb_reader$_completer).future)._state&&(t=E.futureOrCheck(new G.GltfReaderResult(g,null,this._binaryBuffer),{futureOr:1,type:E.getTypeArgumentByIndex(t,0)}),n._asyncComplete$1(t)));if(2!==(h=this._headerByteData.getUint32(4,!0)))return this._context.addIssue$3$args$offset(K.$get$GlbError_invalidVersion(),E.setRuntimeTypeInfo([h],i),4),this._glb_reader$_subscription.cancel$0(),void(0===(n=(t=this._glb_reader$_completer).future)._state&&(t=E.futureOrCheck(new G.GltfReaderResult(g,null,this._binaryBuffer),{futureOr:1,type:E.getTypeArgumentByIndex(t,0)}),n._asyncComplete$1(t)));(l=this._totalLength=this._headerByteData.getUint32(8,!0))<=this._glb_reader$_offset&&this._context.addIssue$3$args$offset(K.$get$GlbError_lengthTooSmall(),E.setRuntimeTypeInfo([l],i),8),this._glb_reader$_state=1,this._localOffset=0;break;case 1:if(l=t.get$length(e),l=(c=this._localOffset)+(s=Math.min(l-a,8-c)),this._localOffset=l,w.NativeUint8List_methods.setRange$4(o,c,l,e,a),a+=s,this._glb_reader$_offset+=s,8!==this._localOffset)break;switch(this._glb_reader$_chunkLength=this._headerByteData.getUint32(0,!0),l=this._headerByteData.getUint32(4,!0),this._glb_reader$_chunkType=l,0!=(3&this._glb_reader$_chunkLength)&&(c=this._context,d=K.$get$GlbError_chunkLengthUnaligned(),p=this._glb_reader$_offset,c.addIssue$3$args$offset(d,E.setRuntimeTypeInfo(["0x"+w.JSString_methods.padLeft$2(w.JSInt_methods.toRadixString$1(l,16),8,"0")],i),p-8)),this._glb_reader$_offset+this._glb_reader$_chunkLength>this._totalLength&&this._context.addIssue$3$args$offset(K.$get$GlbError_chunkTooBig(),E.setRuntimeTypeInfo(["0x"+w.JSString_methods.padLeft$2(w.JSInt_methods.toRadixString$1(this._glb_reader$_chunkType,16),8,"0"),this._glb_reader$_chunkLength],i),this._glb_reader$_offset-8),0===this._chunkNumber&&1313821514!==this._glb_reader$_chunkType&&this._context.addIssue$3$args$offset(K.$get$GlbError_unexpectedFirstChunk(),E.setRuntimeTypeInfo(["0x"+w.JSString_methods.padLeft$2(w.JSInt_methods.toRadixString$1(this._glb_reader$_chunkType,16),8,"0")],i),this._glb_reader$_offset-8),5130562===(l=this._glb_reader$_chunkType)&&this._chunkNumber>1&&!this._hasBinChunk&&this._context.addIssue$3$args$offset(K.$get$GlbError_unexpectedBinChunk(),E.setRuntimeTypeInfo(["0x"+w.JSString_methods.padLeft$2(w.JSInt_methods.toRadixString$1(l,16),8,"0")],i),this._glb_reader$_offset-8),f=new z.GlbReader__onData_updateState(this),l=this._glb_reader$_chunkType){case 1313821514:0===this._glb_reader$_chunkLength&&(c=this._context,d=K.$get$GlbError_emptyChunk(),p=this._glb_reader$_offset,c.addIssue$3$args$offset(d,E.setRuntimeTypeInfo(["0x"+w.JSString_methods.padLeft$2(w.JSInt_methods.toRadixString$1(l,16),8,"0")],i),p-8)),f.call$1$seen(this._hasJsonChunk),this._hasJsonChunk=!0;break;case 5130562:f.call$1$seen(this._hasBinChunk),this._hasBinChunk=!0;break;default:this._context.addIssue$3$args$offset(K.$get$GlbError_unknownChunkType(),E.setRuntimeTypeInfo(["0x"+w.JSString_methods.padLeft$2(w.JSInt_methods.toRadixString$1(l,16),8,"0")],i),this._glb_reader$_offset-8),this._glb_reader$_state=4294967295}++this._chunkNumber,this._localOffset=0;break;case 1313821514:s=Math.min(t.get$length(e)-a,this._glb_reader$_chunkLength-this._localOffset),null==this._jsonReader&&(l=this._jsonStreamController,c=this._context,(l=new G.GltfJsonReader(new M._ControllerStream(l,[E.getTypeArgumentByIndex(l,0)]),new M._AsyncCompleter(new M._Future(K.Zone__current,r),n)))._gltf_reader$_context=c,this._jsonReader=l,this.set$_jsonReaderResult(l.read$0())),l=this._jsonStreamController,m=a+s,c=E.getTypeArgumentByIndex(l,0),d=E.assertSubtypeOfRuntimeType(t.sublist$2(e,a,m),c),l._state>=4&&E.throwExpression(l._badEventState$0()),0!=(1&(p=l._state))?l._sendData$1(d):0==(3&p)&&(l=l._ensurePendingEvents$0(),c=new M._DelayedData(d,[c]),null==(d=l.lastPendingEvent)?l.firstPendingEvent=l.lastPendingEvent=c:(d.set$next(c),l.lastPendingEvent=c)),l=this._localOffset+=s,this._glb_reader$_offset+=s,l===this._glb_reader$_chunkLength&&(this._jsonStreamController.close$0(),this._glb_reader$_state=1,this._localOffset=0),a=m;break;case 5130562:l=t.get$length(e),c=this._glb_reader$_chunkLength,s=Math.min(l-a,c-this._localOffset),null==(l=this._binaryBuffer)&&(l=this._binaryBuffer=new Uint8Array(c)),d=(c=this._localOffset)+s,this._localOffset=d,w.NativeUint8List_methods.setRange$4(l,c,d,e,a),a+=s,this._glb_reader$_offset+=s,this._localOffset===this._glb_reader$_chunkLength&&(this._glb_reader$_state=1,this._localOffset=0);break;case 4294967295:l=t.get$length(e),c=this._glb_reader$_chunkLength,d=this._localOffset,d+=s=Math.min(l-a,c-d),this._localOffset=d,a+=s,this._glb_reader$_offset+=s,d===c&&(this._glb_reader$_state=1,this._localOffset=0)}this._glb_reader$_subscription.resume$0()},_glb_reader$_onDone$0:function(){var e,t;switch(this._glb_reader$_state){case 0:this._context.addIssue$2$offset(K.$get$GlbError_unexpectedEndOfHeader(),this._glb_reader$_offset),this._glb_reader$_abort$0();break;case 1:0!==this._localOffset?(this._context.addIssue$2$offset(K.$get$GlbError_unexpectedEndOfChunkHeader(),this._glb_reader$_offset),this._glb_reader$_abort$0()):((e=this._totalLength)!==(t=this._glb_reader$_offset)&&this._context.addIssue$3$args$offset(K.$get$GlbError_lengthMismatch(),E.setRuntimeTypeInfo([e,t],[M.Object]),this._glb_reader$_offset),null!=(e=this._jsonReaderResult)?e.then$1$2$onError(0,new z.GlbReader__onDone_closure(this),this.get$_glb_reader$_onError(),M.Null):this._glb_reader$_completer.complete$1(new G.GltfReaderResult("model/gltf-binary",null,this._binaryBuffer)));break;default:this._glb_reader$_chunkLength>0&&this._context.addIssue$2$offset(K.$get$GlbError_unexpectedEndOfChunkData(),this._glb_reader$_offset),this._glb_reader$_abort$0()}},_glb_reader$_onError$1:function(e){var t;this._glb_reader$_subscription.cancel$0(),0===(t=this._glb_reader$_completer).future._state&&t.completeError$1(e)},set$_glb_reader$_subscription:function(e){this._glb_reader$_subscription=E.assertSubtype(e,"$isStreamSubscription",[[M.List,M.int]],"$asStreamSubscription")},set$_jsonReaderResult:function(e){this._jsonReaderResult=E.assertSubtype(e,"$isFuture",[G.GltfReaderResult],"$asFuture")},set$_jsonStreamController:function(e){this._jsonStreamController=E.assertSubtype(e,"$isStreamController",[[M.List,M.int]],"$asStreamController")},$isGltfReader:1},z.GlbReader_read_closure.prototype={call$0:function(){var e=this.$this;0!=(4&e._jsonStreamController._state)?e._glb_reader$_subscription.resume$0():e._glb_reader$_abort$0()},$signature:2},z.GlbReader__onData_updateState.prototype={call$1$seen:function(e){var t=this.$this;e?(t._context.addIssue$3$args$offset(K.$get$GlbError_duplicateChunk(),E.setRuntimeTypeInfo(["0x"+w.JSString_methods.padLeft$2(w.JSInt_methods.toRadixString$1(t._glb_reader$_chunkType,16),8,"0")],[M.Object]),t._glb_reader$_offset-8),t._glb_reader$_state=4294967295):t._glb_reader$_state=t._glb_reader$_chunkType},call$0:function(){return this.call$1$seen(null)},$signature:64},z.GlbReader__onDone_closure.prototype={call$1:function(e){var t,n;E.interceptedTypeCheck(e,"$isGltfReaderResult"),t=this.$this,n=null==e?null:e.gltf,t._glb_reader$_completer.complete$1(new G.GltfReaderResult("model/gltf-binary",n,t._binaryBuffer))},$signature:65},G.GltfReaderResult.prototype={},G.GltfReader.prototype={},G.GltfReader_detect_closure0.prototype={call$0:function(){return this._box_0.subscription.pause$0()},$signature:1},G.GltfReader_detect_closure1.prototype={call$0:function(){return this._box_0.subscription.resume$0()},$signature:1},G.GltfReader_detect_closure.prototype={call$0:function(){return this._box_0.subscription.cancel$0()},$signature:16},G.GltfReader_detect_closure2.prototype={call$1:function(e){var t,n,r,i,o,a;if(E.assertSubtype(e,"$isList",[M.int],"$asList"),!(t=this._box_0).formatDetected){if((n=T.getInterceptor$asx(e)).get$isEmpty(e))return t.subscription.cancel$0(),this.controller.close$0(),void this.completer.completeError$1(w.C_GltfInvalidFormatException);if(103===(r=n.$index(e,0)))n=this.controller,i=this.context,o=new Uint8Array(12),a=G.GltfReaderResult,a=new z.GlbReader(o,new M._ControllerStream(n,[E.getTypeArgumentByIndex(n,0)]),new M._AsyncCompleter(new M._Future(K.Zone__current,[a]),[a])),i._isGlb=!0,a._context=i,(n=o.buffer).toString,a._headerByteData=E.NativeByteData_NativeByteData$view(n,0,null),a.set$_jsonStreamController(M.StreamController_StreamController(null,null,null,[M.List,M.int])),this.completer.complete$1(a),t.formatDetected=!0;else{if(n=123===r||9===r||32===r||10===r||13===r||239===r,i=this.completer,o=this.controller,!n)return t.subscription.cancel$0(),o.close$0(),void i.completeError$1(w.C_GltfInvalidFormatException);i.complete$1(G.GltfJsonReader$(new M._ControllerStream(o,[E.getTypeArgumentByIndex(o,0)]),this.context)),t.formatDetected=!0}}this.controller.add$1(0,e)},$signature:23},G.GltfJsonReader.prototype={read$0:function(){var e=M.Object,t=E.setRuntimeTypeInfo([],[e]),n=new M.StringBuffer("");return this._byteSink=new M._Utf8StringSinkAdapter(new M._Utf8Decoder(!1,n),new M._JsonDecoderSink(w.C_JsonCodec.get$decoder()._reviver,E.assertSubtype(new M._SimpleCallbackSink(new G.GltfJsonReader_read_closure(this),t,[e]),"$isSink",[e],"$asSink"),n)),this.set$_gltf_reader$_subscription(this.stream.listen$3$onDone$onError(this.get$_gltf_reader$_onData(),this.get$_gltf_reader$_onDone(),this.get$_gltf_reader$_onError())),this._completer.future},_gltf_reader$_onData$1:function(e){var t,n,r,i,o=[M.int];E.assertSubtype(e,"$isList",o,"$asList"),this._gltf_reader$_subscription.pause$0(),this._isFirstChunk&&(T.get$isNotEmpty$asx(e)&&239===T.$index$asx(e,0)&&this._gltf_reader$_context.addIssue$3$args$noPointer(K.$get$SchemaError_invalidJson(),E.setRuntimeTypeInfo(["BOM found at the beginning of UTF-8 stream."],[M.Object]),!0),this._isFirstChunk=!1);try{n=this._byteSink,r=T.get$length$asx(e),n.toString,o=E.assertSubtype(e,"$isList",o,"$asList"),n._decoder.convert$3(o,0,r),this._gltf_reader$_subscription.resume$0()}catch(i){if(!((o=E.unwrapException(i))instanceof M.FormatException))throw i;t=o,this._gltf_reader$_context.addIssue$3$args$noPointer(K.$get$SchemaError_invalidJson(),E.setRuntimeTypeInfo([t],[M.Object]),!0),this._gltf_reader$_subscription.cancel$0(),this._completer.complete$0()}},_gltf_reader$_onError$1:function(e){var t;this._gltf_reader$_subscription.cancel$0(),0===(t=this._completer).future._state&&t.completeError$1(e)},_gltf_reader$_onDone$0:function(){var e,t,n;try{this._byteSink.close$0()}catch(t){if(!((n=E.unwrapException(t))instanceof M.FormatException))throw t;e=n,this._gltf_reader$_context.addIssue$3$args$noPointer(K.$get$SchemaError_invalidJson(),E.setRuntimeTypeInfo([e],[M.Object]),!0),this._gltf_reader$_subscription.cancel$0(),this._completer.complete$0()}},set$_gltf_reader$_subscription:function(e){this._gltf_reader$_subscription=E.assertSubtype(e,"$isStreamSubscription",[[M.List,M.int]],"$asStreamSubscription")},$isGltfReader:1},G.GltfJsonReader_read_closure.prototype={call$1:function(e){var t,n,r,i,o=M.Object,a=[o];if(E.assertSubtype(e,"$isList",a,"$asList"),0>=e.length)return E.ioore(e,0);if(r=t=e[0],E.checkSubtype(r,"$isMap",[M.String,o],"$asMap"))try{o=this.$this,n=I.Gltf_Gltf$fromMap(t,o._gltf_reader$_context),o._completer.complete$1(new G.GltfReaderResult("model/gltf+json",n,null))}catch(i){if(!(E.unwrapException(i)instanceof C.IssuesLimitExceededException))throw i;(o=this.$this)._gltf_reader$_subscription.cancel$0(),o._completer.complete$0()}else(o=this.$this)._gltf_reader$_context.addIssue$3$args$noPointer(K.$get$SchemaError_typeMismatch(),E.setRuntimeTypeInfo([t,"object"],a),!0),o._gltf_reader$_subscription.cancel$0(),o._completer.complete$0()},$signature:66},G.GltfInvalidFormatException.prototype={toString$0:function(e){return"Invalid data: could not detect glTF format."},$isException:1},H.getIndicesMap_closure.prototype={call$2:function(e,t){E.stringTypeCheck(e),this.checkKey.call$1(e),"number"==typeof t&&Math.floor(t)===t&&t>=0||(this.value.$indexSet(0,e,-1),this.context.addIssue$2$name(K.$get$SchemaError_invalidIndex(),e))},$signature:6},H.getIndicesMapsList_closure.prototype={call$2:function(e,t){E.stringTypeCheck(e),this.checkKey.call$1(e),"number"==typeof t&&Math.floor(t)===t&&t>=0||(this.innerMap.$indexSet(0,e,-1),this.context.addIssue$2$name(K.$get$SchemaError_invalidIndex(),e))},$signature:6},H.getIndicesMapsList_closure0.prototype={call$1:function(e){return E.interceptedTypeCheck(e,"$isMap").cast$2$0(0,M.String,M.int)},$signature:67},H.getExtensions_closure.prototype={call$0:function(){return E.setRuntimeTypeInfo([],[U.LinkableExtensionEntry])},$signature:68},H.SafeList.prototype={$index:function(e,t){return null==t||t<0||t>=this._list.length?null:w.JSArray_methods.$index(this._list,t)},$indexSet:function(e,t,n){w.JSArray_methods.$indexSet(this._list,t,E.assertSubtypeOfRuntimeType(n,E.getTypeArgumentByIndex(this,0)))},get$length:function(e){return this._utils$_length},set$length:function(e,t){throw E.wrapException(M.UnsupportedError$("Changing length is not supported"))},toString$0:function(e){return M.IterableBase_iterableToFullString(this._list,"[","]")},forEachWithIndices$1:function(e){var t,n,r,i,o;for(E.functionTypeCheck(e,{func:1,ret:-1,args:[M.int,E.getTypeArgumentByIndex(this,0)]}),t=this._utils$_length,r=(n=this._list).length,i=0;i<t;++i){if(i>=r)return E.ioore(n,i);null!=(o=n[i])&&e.call$2(i,o)}}},H.ElementChecker.prototype={done$1:function(e){return!0}},H.UnitVec3FloatChecker.prototype={check$4:function(e,t,n,r){var i=this.normalizeValue,o=null!=i?i.call$1(r):r;return i=this._utils$_sum,"number"!=typeof o?o.$mul():(i+=o*o,this._utils$_sum=i,2===n&&(Math.abs(Math.sqrt(i)-1)>.00674&&e.addIssue$3$args$name(K.$get$DataError_accessorVector3NonUnit(),E.setRuntimeTypeInfo([t-2,t,Math.sqrt(this._utils$_sum)],[M.Object]),this.path),this._utils$_sum=0),!0)},$asElementChecker:function(){return[M.num]}},H.UnitVec3SignFloatChecker.prototype={check$4:function(e,t,n,r){var i=this.normalizeValue,o=null!=i?i.call$1(r):r;if(3===n)1!==o&&-1!==o&&e.addIssue$3$args$name(K.$get$DataError_accessorInvalidSign(),E.setRuntimeTypeInfo([t-3,t,o],[M.Object]),this.path);else{if(i=this._utils$_sum,"number"!=typeof o)return o.$mul();i+=o*o,this._utils$_sum=i,2===n&&(Math.abs(Math.sqrt(i)-1)>.00674&&e.addIssue$3$args$name(K.$get$DataError_accessorVector3NonUnit(),E.setRuntimeTypeInfo([t-2,t,Math.sqrt(this._utils$_sum)],[M.Object]),this.path),this._utils$_sum=0)}return!0},$asElementChecker:function(){return[M.num]}},H.ClampedRangeFloatChecker.prototype={check$4:function(e,t,n,r){return"number"!=typeof r?E.iae(r):((1<r||0>r)&&e.addIssue$3$args$name(K.$get$DataError_accessorNonClamped(),E.setRuntimeTypeInfo([t,r],[M.Object]),this.path),!0)},$asElementChecker:function(){return[M.double]}},z.ValidationResult.prototype={toMap$0:function(){var e,t,n,r,i,o,a,s,l,c,u,h,d=M.String,p=M.Object,f=M.LinkedHashMap_LinkedHashMap$_empty(d,p),m=this.uri;for(null!=m&&f.$indexSet(0,"uri",m.toString$0(0)),null!=((e=null==(m=this.readerResult))?null:m.mimeType)&&f.$indexSet(0,"mimeType",e?null:m.mimeType),f.$indexSet(0,"validatorVersion","2.0.0-dev.3.2"),this.writeTimestamp&&f.$indexSet(0,"validatedAt",new M.DateTime(Date.now(),!1).toUtc$0().toIso8601String$0()),t=(m=this.context)._issues,n=M.LinkedHashMap_LinkedHashMap$_empty(d,p),r=E.setRuntimeTypeInfo([0,0,0,0],[M.int]),(e=new Array(t.length)).fixed$length=Array,e=(i=E.setRuntimeTypeInfo(e,[[M.Map,M.String,M.Object]])).length,o=0;o<e;++o){if(o>=t.length)return E.ioore(t,o);if((c=((l=null==(s=(a=t[o]).severityOverride))?a.type.severity:s).index)>=4)return E.ioore(r,c);w.JSArray_methods.$indexSet(r,c,r[c]+1),c=a.type,u=T.trimRight$0$s(c.message.call$1(a._args)),l&&(s=c.severity),h=M.LinkedHashMap_LinkedHashMap$_literal(["code",c.code,"message",u,"severity",s.index],d,p),null!=(s=a.pointer)?h.$indexSet(0,"pointer",s):null!=(s=a.offset)&&h.$indexSet(0,"offset",s),w.JSArray_methods.$indexSet(i,o,h)}return n.$indexSet(0,"numErrors",r[0]),n.$indexSet(0,"numWarnings",r[1]),n.$indexSet(0,"numInfos",r[2]),n.$indexSet(0,"numHints",r[3]),n.$indexSet(0,"messages",i),n.$indexSet(0,"truncated",m._isTruncated),f.$indexSet(0,"issues",n),null!=(d=this._getGltfInfoMap$0())&&f.$indexSet(0,"info",d),f},_getGltfInfoMap$0:function(){var e,t,n,r,i,o,a,s,l,c,u=this.readerResult,h=null==u?null:u.gltf;if(null!=(null==(u=null==h?null:h.asset)?null:u.version)){for(e=M.LinkedHashMap_LinkedHashMap$_empty(M.String,M.Object),u=h.asset,e.$indexSet(0,"version",u.version),null!=(t=u.minVersion)&&e.$indexSet(0,"minVersion",t),null!=(u=u.generator)&&e.$indexSet(0,"generator",u),u=h.extensionsUsed,(t=T.getInterceptor$asx(u)).get$isNotEmpty(u)&&e.$indexSet(0,"extensionsUsed",t.toSet$0(u).toList$1$growable(0,!1)),u=h.extensionsRequired,(t=T.getInterceptor$asx(u)).get$isNotEmpty(u)&&e.$indexSet(0,"extensionsRequired",t.toSet$0(u).toList$1$growable(0,!1)),(t=(u=this.context)._resourcesView).get$isEmpty(t)||e.$indexSet(0,"resources",u._resourcesView),e.$indexSet(0,"animationCount",h.animations._utils$_length),e.$indexSet(0,"materialCount",h.materials._utils$_length),u=h.meshes,e.$indexSet(0,"hasMorphTargets",u.any$1(u,new z.ValidationResult__getGltfInfoMap_closure)),t=h.skins,e.$indexSet(0,"hasSkins",!t.get$isEmpty(t)),t=h.textures,e.$indexSet(0,"hasTextures",!t.get$isEmpty(t)),e.$indexSet(0,"hasDefaultScene",null!=h.scene),u=new E.ListIterator(u,u.get$length(u),[E.getTypeArgumentByIndex(u,0)]),n=0,r=0,i=0,o=0,a=0,s=0;u.moveNext$0();)if(null!=(t=u.__internal$_current.primitives))for(n+=t._utils$_length,t=new E.ListIterator(t,t.get$length(t),[E.getRuntimeTypeArgument(t,"ListMixin",0)]);t.moveNext$0();)-1!==(c=(l=t.__internal$_current)._vertexCount)&&(a+=c),s+=l.get$trianglesCount(),r=Math.max(r,l.attributes.__js_helper$_length),i=Math.max(i,l.texcoordCount),o=Math.max(o,4*l.jointsCount);return e.$indexSet(0,"drawCallCount",n),e.$indexSet(0,"totalVertexCount",a),e.$indexSet(0,"totalTriangleCount",s),e.$indexSet(0,"maxUVs",i),e.$indexSet(0,"maxInfluences",o),e.$indexSet(0,"maxAttributes",r),e}}},z.ValidationResult__getGltfInfoMap_closure.prototype={call$1:function(e){var t=E.interceptedTypeCheck(e,"$isMesh").primitives;return null!=t&&t.any$1(t,new z.ValidationResult__getGltfInfoMap__closure)},$signature:69},z.ValidationResult__getGltfInfoMap__closure.prototype={call$1:function(e){return null!=E.interceptedTypeCheck(e,"$isMeshPrimitive")._targets},$signature:3},z.hashObjects_closure.prototype={call$2:function(e,t){var n,r;return E.intTypeCheck(e),n=T.get$hashCode$(t),"number"!=typeof e?e.$add():(r=536870911&(r=536870911&e+n)+((524287&r)<<10))^r>>>6},$signature:70},O.Matrix4.prototype={setFrom$1:function(e){var t=e._m4storage,n=this._m4storage;n[15]=t[15],n[14]=t[14],n[13]=t[13],n[12]=t[12],n[11]=t[11],n[10]=t[10],n[9]=t[9],n[8]=t[8],n[7]=t[7],n[6]=t[6],n[5]=t[5],n[4]=t[4],n[3]=t[3],n[2]=t[2],n[1]=t[1],n[0]=t[0]},toString$0:function(e){return"[0] "+this.getRow$1(0).toString$0(0)+"\n[1] "+this.getRow$1(1).toString$0(0)+"\n[2] "+this.getRow$1(2).toString$0(0)+"\n[3] "+this.getRow$1(3).toString$0(0)+"\n"},$eq:function(e,t){var n,r;return null!=t&&(n=t instanceof O.Matrix4&&((n=this._m4storage)[0]===(r=t._m4storage)[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]&&n[4]===r[4]&&n[5]===r[5]&&n[6]===r[6]&&n[7]===r[7]&&n[8]===r[8]&&n[9]===r[9]&&n[10]===r[10]&&n[11]===r[11]&&n[12]===r[12]&&n[13]===r[13]&&n[14]===r[14]&&n[15]===r[15]))},get$hashCode:function(e){return z.hashObjects(this._m4storage)},getRow$1:function(e){var t,n=new Float32Array(4),r=this._m4storage;return e>=16?E.ioore(r,e):(n[0]=r[e],(t=4+e)>=16?E.ioore(r,t):(n[1]=r[t],(t=8+e)>=16?E.ioore(r,t):(n[2]=r[t],(t=12+e)>=16?E.ioore(r,t):(n[3]=r[t],new O.Vector4(n)))))},determinant$0:function(){var e=this._m4storage,t=e[0],n=e[5],r=e[1],i=e[4],o=t*n-r*i,a=e[6],s=e[2],l=t*a-s*i,c=e[7],u=e[3],h=t*c-u*i,d=r*a-s*n,p=r*c-u*n,f=s*c-u*a;return a=e[8],-((u=e[9])*f-(c=e[10])*p+(s=e[11])*d)*e[12]+(a*f-c*h+s*l)*e[13]-(a*p-u*h+s*o)*e[14]+(a*d-u*l+c*o)*e[15]},infinityNorm$0:function(){var e=this._m4storage,t=0+Math.abs(e[0])+Math.abs(e[1])+Math.abs(e[2])+Math.abs(e[3]),n=t>0?t:0;return(t=0+Math.abs(e[4])+Math.abs(e[5])+Math.abs(e[6])+Math.abs(e[7]))>n&&(n=t),(t=0+Math.abs(e[8])+Math.abs(e[9])+Math.abs(e[10])+Math.abs(e[11]))>n&&(n=t),(t=0+Math.abs(e[12])+Math.abs(e[13])+Math.abs(e[14])+Math.abs(e[15]))>n?t:n},isIdentity$0:function(){var e=this._m4storage;return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&0===e[12]&&0===e[13]&&0===e[14]&&1===e[15]}},O.Quaternion.prototype={get$length2:function(){var e=this._qStorage,t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i},get$length:function(e){var t=this._qStorage,n=t[0],r=t[1],i=t[2],o=t[3];return Math.sqrt(n*n+r*r+i*i+o*o)},toString$0:function(e){var t=this._qStorage;return E.S(t[0])+", "+E.S(t[1])+", "+E.S(t[2])+" @ "+E.S(t[3])}},O.Vector3.prototype={setValues$3:function(e,t,n){var r=this._v3storage;r[0]=e,r[1]=t,r[2]=n},toString$0:function(e){var t=this._v3storage;return"["+E.S(t[0])+","+E.S(t[1])+","+E.S(t[2])+"]"},$eq:function(e,t){var n,r;return null!=t&&(n=t instanceof O.Vector3&&((n=this._v3storage)[0]===(r=t._v3storage)[0]&&n[1]===r[1]&&n[2]===r[2]))},get$hashCode:function(e){return z.hashObjects(this._v3storage)},get$length:function(e){var t=this._v3storage,n=t[0],r=t[1];return t=t[2],Math.sqrt(n*n+r*r+t*t)},get$length2:function(){var e=this._v3storage,t=e[0],n=e[1];return t*t+n*n+(e=e[2])*e}},O.Vector4.prototype={toString$0:function(e){var t=this._v4storage;return E.S(t[0])+","+E.S(t[1])+","+E.S(t[2])+","+E.S(t[3])},$eq:function(e,t){var n,r;return null!=t&&(n=t instanceof O.Vector4&&((n=this._v4storage)[0]===(r=t._v4storage)[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]))},get$hashCode:function(e){return z.hashObjects(this._v4storage)},get$length:function(e){var t=this._v4storage,n=t[0],r=t[1],i=t[2];return t=t[3],Math.sqrt(n*n+r*r+i*i+t*t)}},A.Promise.prototype={},A.Exports.prototype={},A._JSValidationOptions.prototype={},A.main_onError.prototype={call$3:function(e,t,n){return n.call$1(T.toString$0$(t))}},A.main_closure.prototype={call$2:function(e,t){var n=M.allowInterop(new A.main__closure0(E.interceptedTypeCheck(e,"$isUint8List"),t,this.onError),{func:1,ret:-1,args:[{func:1,ret:-1,args:[M.Object]},M.Function]});return new i.Promise(n,M.Object)},"call*":"call$2",$requiredArgCount:2,$signature:71},A.main__closure0.prototype={call$2:function(e,t){E.functionTypeCheck(e,{func:1,ret:-1,args:[M.Object]}),E.interceptedTypeCheck(t,"$isFunction"),A.validateBytes(this.data,this.options).then$1$2$onError(0,new A.main___closure1(e),new A.main___closure2(this.onError,t),M.Null)},"call*":"call$2",$requiredArgCount:2,$signature:26},A.main___closure1.prototype={call$1:function(e){this.resolve.call$1(M.jsify(E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap")))},$signature:27},A.main___closure2.prototype={call$2:function(e,t){return this.onError.call$3(e,E.interceptedTypeCheck(t,"$isStackTrace"),this.reject)},"call*":"call$2",$requiredArgCount:2,$signature:28},A.main_closure0.prototype={call$2:function(e,t){var n=M.allowInterop(new A.main__closure(E.stringTypeCheck(e),t,this.onError),{func:1,ret:-1,args:[{func:1,ret:-1,args:[M.Object]},M.Function]});return new i.Promise(n,M.Object)},"call*":"call$2",$requiredArgCount:2,$signature:75},A.main__closure.prototype={call$2:function(e,t){E.functionTypeCheck(e,{func:1,ret:-1,args:[M.Object]}),E.interceptedTypeCheck(t,"$isFunction"),A.validateString(this.json,this.options).then$1$2$onError(0,new A.main___closure(e),new A.main___closure0(this.onError,t),M.Null)},"call*":"call$2",$requiredArgCount:2,$signature:26},A.main___closure.prototype={call$1:function(e){this.resolve.call$1(M.jsify(E.assertSubtype(e,"$isMap",[M.String,M.Object],"$asMap")))},$signature:27},A.main___closure0.prototype={call$2:function(e,t){return this.onError.call$3(e,E.interceptedTypeCheck(t,"$isStackTrace"),this.reject)},"call*":"call$2",$requiredArgCount:2,$signature:28},A.main_closure1.prototype={call$0:function(){return"2.0.0-dev.3.2"},"call*":"call$0",$requiredArgCount:0,$signature:114},A.main_closure2.prototype={call$0:function(){return M.jsify(C.Context_defaultExtensionNames())},"call*":"call$0",$requiredArgCount:0,$signature:77},A._getResourcesLoader_getBytes.prototype={call$1:function(e){var t=M.Uint8List,n=new M._Future(K.Zone__current,[t]),r=new M._AsyncCompleter(n,[t]);return T.then$2$x(this.getResource.call$1(T.toString$0$(e)),M.allowInterop(new A._getResourcesLoader_getBytes_closure(r),{func:1,ret:-1,args:[M.Object]}),M.allowInterop(new A._getResourcesLoader_getBytes_closure0(r),M.Function)),n},$signature:78},A._getResourcesLoader_getBytes_closure.prototype={call$1:function(e){var t=this.completer;T.getInterceptor$(e).$isUint8List?t.complete$1(e):t.completeError$1(new M.ArgumentError(!1,null,null,"options.externalResourceFunction: Promise must be fulfilled with Uint8Array."))},$signature:24},A._getResourcesLoader_getBytes_closure0.prototype={call$1:function(e){return this.completer.completeError$1(new A.NodeException(T.toString$0$(e)))},$signature:10},A._getResourcesLoader_closure.prototype={call$1:function(e){return E.interceptedTypeCheck(e,"$isUri"),null==e?this.readerResult.buffer:this.getBytes.call$1(e)},call$0:function(){return this.call$1(null)},"call*":"call$1",$requiredArgCount:0,$defaultValues:function(){return[null]},$signature:79},A._getResourcesLoader_closure0.prototype={call$1:function(e){var t=this.getBytes.call$1(E.interceptedTypeCheck(e,"$isUri"));return null==t?null:M.Stream_Stream$fromFuture(t,E.getTypeArgumentByIndex(t,0))},$signature:80},A.NodeException.prototype={toString$0:function(e){return"Node Exception: "+E.S(this.message)},$isException:1},(q=T.Interceptor.prototype).super$Interceptor$noSuchMethod=q.noSuchMethod$1,(q=T.JavaScriptObject.prototype).super$JavaScriptObject$toString=q.toString$0,(q=M.ListMixin.prototype).super$ListMixin$setRange=q.setRange$4,(q=M._StringSinkConversionSink.prototype).super$_StringSinkConversionSink$close=q.close$0,function(){var e,t=S._static_1,n=S._static_0,r=S.installStaticTearOff,i=S.installInstanceTearOff,o=S._instance_0u,a=S._instance_1i,s=S._static_2,l=S._instance_1u;t(M,"async__AsyncRun__scheduleImmediateJsOverride$closure","_AsyncRun__scheduleImmediateJsOverride",11),t(M,"async__AsyncRun__scheduleImmediateWithSetImmediate$closure","_AsyncRun__scheduleImmediateWithSetImmediate",11),t(M,"async__AsyncRun__scheduleImmediateWithTimer$closure","_AsyncRun__scheduleImmediateWithTimer",11),n(M,"async___startMicrotaskLoop$closure","_startMicrotaskLoop",1),r(M,"async___nullErrorHandler$closure",1,null,["call$2","call$1"],["_nullErrorHandler",function(e){return M._nullErrorHandler(e,null)}],14,0),i(M._Future.prototype,"get$_completeError",0,1,(function(){return[null]}),["call$2","call$1"],["_completeError$2","_completeError$1"],14,0),o(M._StreamController.prototype,"get$close","close$0",16),o(e=M._ControllerSubscription.prototype,"get$_onPause","_onPause$0",1),o(e,"get$_onResume","_onResume$0",1),i(e=M._BufferingStreamSubscription.prototype,"get$pause",0,0,null,["call$1","call$0"],["pause$1","pause$0"],43,0),o(e,"get$resume","resume$0",1),o(e,"get$_onPause","_onPause$0",1),o(e,"get$_onResume","_onResume$0",1),a(M._LinkedHashSet.prototype,"get$contains","contains$1",45),s(C,"accessor_Accessor_fromMap$closure","Accessor_fromMap",82),s(C,"accessor_AccessorSparse_fromMap$closure","AccessorSparse_fromMap",83),s(C,"accessor_AccessorSparseIndices_fromMap$closure","AccessorSparseIndices_fromMap",84),s(C,"accessor_AccessorSparseValues_fromMap$closure","AccessorSparseValues_fromMap",85),l(C.Accessor.prototype,"get$normalizeValue","normalizeValue$1",72),s($,"animation_Animation_fromMap$closure","Animation_fromMap",86),s($,"animation_AnimationChannelTarget_fromMap$closure","AnimationChannelTarget_fromMap",87),s(O,"asset_Asset_fromMap$closure","Asset_fromMap",88),s(A,"buffer_Buffer_fromMap$closure","Buffer_fromMap",89),s(I,"buffer_view_BufferView_fromMap$closure","BufferView_fromMap",90),s(P,"camera_Camera_fromMap$closure","Camera_fromMap",91),s(P,"camera_CameraOrthographic_fromMap$closure","CameraOrthographic_fromMap",92),s(P,"camera_CameraPerspective_fromMap$closure","CameraPerspective_fromMap",93),s(O,"image_Image_fromMap$closure","Image_fromMap",94),s(L,"material_Material_fromMap$closure","Material_fromMap",95),s(L,"material_PbrMetallicRoughness_fromMap$closure","PbrMetallicRoughness_fromMap",96),s(L,"material_OcclusionTextureInfo_fromMap$closure","OcclusionTextureInfo_fromMap",97),s(L,"material_NormalTextureInfo_fromMap$closure","NormalTextureInfo_fromMap",98),s(L,"material_TextureInfo_fromMap$closure","TextureInfo_fromMap",99),s(k,"mesh_Mesh_fromMap$closure","Mesh_fromMap",100),s(I,"node_Node_fromMap$closure","Node_fromMap",101),s(O,"sampler_Sampler_fromMap$closure","Sampler_fromMap",102),s(R,"scene_Scene_fromMap$closure","Scene_fromMap",103),s(D,"skin_Skin_fromMap$closure","Skin_fromMap",104),s(j,"texture_Texture_fromMap$closure","Texture_fromMap",105),t(F,"errors___q$closure","_q",29),t(F,"errors___mbq$closure","_mbq",29),t(U,"ext_texture_webp___init$closure","_init",12),s(U,"ext_texture_webp_ExtTextureWebPTexture_fromMap$closure","ExtTextureWebPTexture_fromMap",108),s(B,"khr_lights_punctual_KhrLightsPunctualGltf_fromMap$closure","KhrLightsPunctualGltf_fromMap",109),s(B,"khr_lights_punctual_KhrLightsPunctualLightSpot_fromMap$closure","KhrLightsPunctualLightSpot_fromMap",110),s(B,"khr_lights_punctual_KhrLightsPunctualNode_fromMap$closure","KhrLightsPunctualNode_fromMap",111),s(z,"khr_materials_pbr_specular_glossiness_KhrMaterialsPbrSpecularGlossiness_fromMap$closure","KhrMaterialsPbrSpecularGlossiness_fromMap",112),s(k,"khr_materials_unlit_KhrMaterialsUnlit_fromMap$closure","KhrMaterialsUnlit_fromMap",113),s(V,"khr_texture_transform_KhrTextureTransform_fromMap$closure","KhrTextureTransform_fromMap",76),l(e=z.GlbReader.prototype,"get$_glb_reader$_onData","_glb_reader$_onData$1",25),o(e,"get$_glb_reader$_onDone","_glb_reader$_onDone$0",1),l(e,"get$_glb_reader$_onError","_glb_reader$_onError$1",10),l(e=G.GltfJsonReader.prototype,"get$_gltf_reader$_onData","_gltf_reader$_onData$1",25),l(e,"get$_gltf_reader$_onError","_gltf_reader$_onError$1",10),o(e,"get$_gltf_reader$_onDone","_gltf_reader$_onDone$0",1),t(j,"khr_mesh_quantization___init$closure","_init0",12)}(),J=S.mixin,Y=S.inherit,X=S.inheritMany,Y(M.Object,null),X(M.Object,[E.JS_CONST,T.Interceptor,T.ArrayIterator,M.Iterable,E.CastIterator,M.MapMixin,E.Closure,M._ListBase_Object_ListMixin,E.ListIterator,M.Iterator,E.EmptyIterator,E.FixedLengthListMixin,E.UnmodifiableListMixin,E.Symbol,M.MapView,E.ConstantMap,E.JSInvocationMirror,E.TypeErrorDecoder,M.Error,E.ExceptionAndStackTrace,E._StackTrace,E.TypeImpl,E.LinkedHashMapCell,E.LinkedHashMapKeyIterator,E.JSSyntaxRegExp,E._MatchImplementation,M._TimerImpl,M._AsyncAwaitCompleter,M._IterationMarker,M._SyncStarIterator,M.Future,M._Completer,M._FutureListener,M._Future,M._AsyncCallbackEntry,M.Stream,M.StreamTransformerBase,M._StreamController,M._SyncStreamControllerDispatch,M._AsyncStreamControllerDispatch,M._BufferingStreamSubscription,M._PendingEvents,M._DelayedEvent,M._DelayedDone,M._StreamIterator,M.AsyncError,M._Zone,M._HashMapKeyIterator,M._SetBase,M._LinkedHashSetCell,M._LinkedHashSetIterator,M.ListMixin,M._UnmodifiableMapMixin,M.StringConversionSinkMixin,M.Codec,M._Base64Decoder,M.ChunkedConversionSink,M._Utf8Decoder,M.bool,M.DateTime,M.num,M.OutOfMemoryError,M.StackOverflowError,M._Exception,M.FormatException,M.Function,M.List,M.Map,M.MapEntry,M.Null,M.StackTrace,M.String,M.StringBuffer,M.StringSink,M.Symbol0,M.Type,M.Uri,M._Uri,M.UriData,M._SimpleUri,M.Uint8List,I.GltfProperty,H.ElementChecker,I.ResourceValidatable,I.BufferViewUsage,I.AccessorUsage,I.AccessorFormat,C.ValidationOptions,C.Context,C.IssuesLimitExceededException,L._ImageCodec,L._ColorPrimaries,L._ColorTransfer,L.Format,L.ImageInfo,L.ImageInfoDecoder,L.UnsupportedImageFormatException,L.UnexpectedEndOfStreamException,L.InvalidDataFormatException,N._Storage,N.ResourceInfo,N.ResourcesLoader,D.InfluencesChecker,F.Severity,F.IssueType,F.Issue,U.Extension,U.ExtFuncs,U.ExtensionTuple,U.LinkableExtensionEntry,U.ResourceValidatableExtensionEntry,z.GlbReader,G.GltfReaderResult,G.GltfReader,G.GltfJsonReader,G.GltfInvalidFormatException,z.ValidationResult,O.Matrix4,O.Quaternion,O.Vector3,O.Vector4,A.NodeException]),X(T.Interceptor,[T.JSBool,T.JSNull,T.JavaScriptObject,T.JSArray,T.JSNumber,T.JSString,E.NativeTypedData]),X(T.JavaScriptObject,[T.PlainJavaScriptObject,T.UnknownJavaScriptObject,T.JavaScriptFunction,A.Promise,A.Exports,A._JSValidationOptions]),Y(T.JSUnmodifiableArray,T.JSArray),X(T.JSNumber,[T.JSInt,T.JSDouble]),X(M.Iterable,[E._CastIterableBase,E.EfficientLengthIterable,E.MappedIterable,E.WhereIterable,E.SkipIterable,E._ConstantMapKeyIterable,M.IterableBase]),X(E._CastIterableBase,[E.CastIterable,E.__CastListBase__CastIterableBase_ListMixin]),Y(E._EfficientLengthCastIterable,E.CastIterable),Y(E._CastListBase,E.__CastListBase__CastIterableBase_ListMixin),Y(E.CastList,E._CastListBase),Y(M.MapBase,M.MapMixin),X(M.MapBase,[E.CastMap,E.JsLinkedHashMap,M._HashMap,M._JsonMap]),X(E.Closure,[E.CastMap_forEach_closure,E.Primitives_functionNoSuchMethod_closure,E.unwrapException_saveStackTrace,E.TearOffClosure,E.JsLinkedHashMap_values_closure,E.initHooks_closure,E.initHooks_closure0,E.initHooks_closure1,M._AsyncRun__initializeScheduleImmediate_internalCallback,M._AsyncRun__initializeScheduleImmediate_closure,M._AsyncRun__scheduleImmediateJsOverride_internalCallback,M._AsyncRun__scheduleImmediateWithSetImmediate_internalCallback,M._TimerImpl_internalCallback,M._awaitOnObject_closure,M._awaitOnObject_closure0,M._wrapJsFunctionForAsync_closure,M._Future__addListener_closure,M._Future__prependListeners_closure,M._Future__chainForeignFuture_closure,M._Future__chainForeignFuture_closure0,M._Future__chainForeignFuture_closure1,M._Future__asyncComplete_closure,M._Future__chainFuture_closure,M._Future__asyncCompleteError_closure,M._Future__propagateToListeners_handleWhenCompleteCallback,M._Future__propagateToListeners_handleWhenCompleteCallback_closure,M._Future__propagateToListeners_handleValueCallback,M._Future__propagateToListeners_handleError,M.Stream_Stream$fromFuture_closure,M.Stream_Stream$fromFuture_closure0,M.Stream_Stream$fromIterable_closure,M.Stream_length_closure,M.Stream_length_closure0,M._StreamController__subscribe_closure,M._StreamController__recordCancel_complete,M._BufferingStreamSubscription__sendError_sendError,M._BufferingStreamSubscription__sendDone_sendDone,M._PendingEvents_schedule_closure,M._rootHandleUncaughtError_closure,M._RootZone_bindCallback_closure,M._RootZone_bindCallbackGuarded_closure,M.MapBase_mapToString_closure,M.MapMixin_entries_closure,M.NoSuchMethodError_toString_closure,M.Uri__parseIPv4Address_error,M.Uri_parseIPv6Address_error,M.Uri_parseIPv6Address_parseHex,M._Uri__Uri$notSimple_closure,M._createTables_closure,M._createTables_build,M._createTables_setChars,M._createTables_setRange,M._convertDataTree__convert,C._AccessorInt_getElements_closure,C._AccessorInt_getElements_closure0,C._AccessorInt_getElements_closure1,C._AccessorInt_getElements_closure2,C._AccessorInt_getElementsNormalized_closure,C._AccessorInt_getElementsNormalized_closure0,C._AccessorFloat_getElements_closure,C._AccessorFloat_getElements_closure0,C._AccessorFloat_getElements_closure1,C._AccessorFloat_getElements_closure2,$.Animation_link_closure,$.Animation_link_closure0,I.Gltf_Gltf$fromMap_resetPath,I.Gltf_Gltf$fromMap_toSafeList,I.Gltf_Gltf$fromMap_toValue,I.Gltf_Gltf$fromMap_linkCollection,I.Gltf_Gltf$fromMap_linkCollection_closure,I.Gltf_Gltf$fromMap_closure,I.Gltf_Gltf$fromMap_closure0,I.Gltf_Gltf$fromMap__closure,I.Gltf_Gltf$fromMap__closure0,I.Gltf_validateResources_validateResourcesInCollection,I.Gltf_validateResources_validateResourcesInCollection_closure,L.Material_link_linkWithPath,k.Mesh_link_closure,k.MeshPrimitive_MeshPrimitive$fromMap_checkAttributeSemanticName,k.MeshPrimitive_MeshPrimitive$fromMap_checkContinuity,k.MeshPrimitive_MeshPrimitive$fromMap_checkMorphTargetAttributeSemanticName,k.MeshPrimitive_link_closure,k.MeshPrimitive_link_closure0,k.MeshPrimitive_link_closure1,k.MeshPrimitive_link_closure2,k.MeshPrimitive_link_closure3,k.MeshPrimitive__checkAccessorRefs_closure,I.Node_link_closure,I.Node_link_closure0,I.Node_link_closure1,R.Scene_link_closure,D.Skin_link_closure,C.Context_defaultExtensionNames_closure,C.Context_addElementChecker_closure,C.Context_getPointerString_closure,C.Context_initExtensions_closure,C.Context_initExtensions_closure0,C.Context_initExtensions__closure,C.Context_initExtensions__closure0,C.Context_initExtensions_closure1,L.ImageInfo_parseStreamAsync_closure,L.ImageInfo_parseStreamAsync_closure1,L.ImageInfo_parseStreamAsync_closure0,L.ImageInfo__detectCodec_beginsWith,L.JpegInfoDecoder__add_isSOF,L.JpegInfoDecoder__add_hasSegment,L.PngInfoDecoder_add_reset,N.ResourcesLoader__loadBuffers__fetchBuffer,N.ResourcesLoader__loadImages__fetchImageData,D.validateAccessorsData_closure,D.validateAccessorsData_closure0,D.validateAccessorsData_closure1,D._stepInfluencesIterators_closure,F.DataError_closure16,F.DataError_closure14,F.DataError_closure13,F.DataError_closure20,F.DataError_closure18,F.DataError_closure19,F.DataError_closure17,F.DataError_closure29,F.DataError_closure30,F.DataError_closure22,F.DataError_closure28,F.DataError_closure21,F.DataError_closure27,F.DataError_closure25,F.DataError_closure26,F.DataError_closure24,F.DataError_closure23,F.DataError_closure5,F.DataError_closure4,F.DataError_closure31,F.DataError_closure9,F.DataError_closure8,F.DataError_closure10,F.DataError_closure11,F.DataError_closure12,F.DataError_closure7,F.DataError_closure6,F.DataError_closure15,F.DataError_closure3,F.DataError_closure2,F.DataError_closure1,F.DataError_closure,F.DataError_closure0,F.IoError_closure,F.SchemaError_closure3,F.SchemaError_closure4,F.SchemaError_closure9,F.SchemaError_closure7,F.SchemaError_closure14,F.SchemaError_closure10,F.SchemaError_closure5,F.SchemaError_closure11,F.SchemaError_closure8,F.SchemaError_closure,F.SchemaError_closure2,F.SchemaError_closure1,F.SchemaError_closure12,F.SchemaError_closure0,F.SchemaError_closure6,F.SchemaError_closure13,F.SemanticError_closure38,F.SemanticError_closure37,F.SemanticError_closure28,F.SemanticError_closure26,F.SemanticError_closure27,F.SemanticError_closure25,F.SemanticError_closure23,F.SemanticError_closure24,F.SemanticError_closure33,F.SemanticError_closure34,F.SemanticError_closure22,F.SemanticError_closure21,F.SemanticError_closure20,F.SemanticError_closure19,F.SemanticError_closure18,F.SemanticError_closure16,F.SemanticError_closure10,F.SemanticError_closure9,F.SemanticError_closure8,F.SemanticError_closure15,F.SemanticError_closure12,F.SemanticError_closure14,F.SemanticError_closure11,F.SemanticError_closure13,F.SemanticError_closure7,F.SemanticError_closure5,F.SemanticError_closure4,F.SemanticError_closure3,F.SemanticError_closure6,F.SemanticError_closure39,F.SemanticError_closure40,F.SemanticError_closure41,F.SemanticError_closure42,F.SemanticError_closure32,F.SemanticError_closure31,F.SemanticError_closure30,F.SemanticError_closure29,F.SemanticError_closure36,F.SemanticError_closure35,F.SemanticError_closure17,F.SemanticError_closure0,F.SemanticError_closure,F.SemanticError_closure2,F.SemanticError_closure1,F.LinkError_closure4,F.LinkError_closure8,F.LinkError_closure3,F.LinkError_closure17,F.LinkError_closure9,F.LinkError_closure13,F.LinkError_closure12,F.LinkError_closure15,F.LinkError_closure16,F.LinkError_closure11,F.LinkError_closure14,F.LinkError_closure10,F.LinkError_closure2,F.LinkError_closure18,F.LinkError_closure7,F.LinkError_closure35,F.LinkError_closure21,F.LinkError_closure22,F.LinkError_closure19,F.LinkError_closure20,F.LinkError_closure28,F.LinkError_closure27,F.LinkError_closure26,F.LinkError_closure25,F.LinkError_closure29,F.LinkError_closure24,F.LinkError_closure23,F.LinkError_closure6,F.LinkError_closure30,F.LinkError_closure33,F.LinkError_closure32,F.LinkError_closure31,F.LinkError_closure34,F.LinkError_closure36,F.LinkError_closure1,F.LinkError_closure0,F.LinkError_closure,F.LinkError_closure37,F.LinkError_closure38,F.LinkError_closure5,F.GlbError_closure12,F.GlbError_closure11,F.GlbError_closure10,F.GlbError_closure9,F.GlbError_closure0,F.GlbError_closure8,F.GlbError_closure4,F.GlbError_closure5,F.GlbError_closure1,F.GlbError_closure,F.GlbError_closure2,F.GlbError_closure7,F.GlbError_closure6,F.GlbError_closure3,B.KhrLightsPunctualGltf_link_closure,z.GlbReader_read_closure,z.GlbReader__onData_updateState,z.GlbReader__onDone_closure,G.GltfReader_detect_closure0,G.GltfReader_detect_closure1,G.GltfReader_detect_closure,G.GltfReader_detect_closure2,G.GltfJsonReader_read_closure,H.getIndicesMap_closure,H.getIndicesMapsList_closure,H.getIndicesMapsList_closure0,H.getExtensions_closure,z.ValidationResult__getGltfInfoMap_closure,z.ValidationResult__getGltfInfoMap__closure,z.hashObjects_closure,A.main_onError,A.main_closure,A.main__closure0,A.main___closure1,A.main___closure2,A.main_closure0,A.main__closure,A.main___closure,A.main___closure0,A.main_closure1,A.main_closure2,A._getResourcesLoader_getBytes,A._getResourcesLoader_getBytes_closure,A._getResourcesLoader_getBytes_closure0,A._getResourcesLoader_closure,A._getResourcesLoader_closure0]),Y(M.ListBase,M._ListBase_Object_ListMixin),X(M.ListBase,[E.UnmodifiableListBase,H.SafeList]),X(E.UnmodifiableListBase,[E.CodeUnits,M.UnmodifiableListView]),X(E.EfficientLengthIterable,[E.ListIterable,E.EmptyIterable,E.LinkedHashMapKeyIterable,M._HashMapKeyIterable,M.Set]),X(E.ListIterable,[E.SubListIterable,E.MappedListIterable,M._JsonMapKeyIterable,M._GeneratorIterable]),Y(E.EfficientLengthMappedIterable,E.MappedIterable),X(M.Iterator,[E.MappedIterator,E.WhereIterator,E.SkipIterator]),Y(E.EfficientLengthSkipIterable,E.SkipIterable),Y(M._UnmodifiableMapView_MapView__UnmodifiableMapMixin,M.MapView),Y(M.UnmodifiableMapView,M._UnmodifiableMapView_MapView__UnmodifiableMapMixin),Y(E.ConstantMapView,M.UnmodifiableMapView),X(E.ConstantMap,[E.ConstantStringMap,E.GeneralConstantMap]),X(M.Error,[E.NullError,E.JsNoSuchMethodError,E.UnknownJsTypeError,E.TypeErrorImplementation,E.CastErrorImplementation,E.RuntimeError,M.AssertionError,M.NullThrownError,M.ArgumentError,M.NoSuchMethodError,M.UnsupportedError,M.UnimplementedError,M.StateError,M.ConcurrentModificationError,M.CyclicInitializationError]),X(E.TearOffClosure,[E.StaticClosure,E.BoundClosure]),Y(E._AssertionError,M.AssertionError),X(E.NativeTypedData,[E.NativeByteData,E.NativeTypedArray]),X(E.NativeTypedArray,[E._NativeTypedArrayOfDouble_NativeTypedArray_ListMixin,E._NativeTypedArrayOfInt_NativeTypedArray_ListMixin]),Y(E._NativeTypedArrayOfDouble_NativeTypedArray_ListMixin_FixedLengthListMixin,E._NativeTypedArrayOfDouble_NativeTypedArray_ListMixin),Y(E.NativeTypedArrayOfDouble,E._NativeTypedArrayOfDouble_NativeTypedArray_ListMixin_FixedLengthListMixin),Y(E._NativeTypedArrayOfInt_NativeTypedArray_ListMixin_FixedLengthListMixin,E._NativeTypedArrayOfInt_NativeTypedArray_ListMixin),Y(E.NativeTypedArrayOfInt,E._NativeTypedArrayOfInt_NativeTypedArray_ListMixin_FixedLengthListMixin),X(E.NativeTypedArrayOfDouble,[E.NativeFloat32List,E.NativeFloat64List]),X(E.NativeTypedArrayOfInt,[E.NativeInt16List,E.NativeInt32List,E.NativeInt8List,E.NativeUint16List,E.NativeUint32List,E.NativeUint8ClampedList,E.NativeUint8List]),Y(M._SyncStarIterable,M.IterableBase),Y(M._AsyncCompleter,M._Completer),X(M._StreamController,[M._AsyncStreamController,M._SyncStreamController]),Y(M._StreamImpl,M.Stream),X(M._StreamImpl,[M._ControllerStream,M._GeneratedStreamImpl]),Y(M._ControllerSubscription,M._BufferingStreamSubscription),X(M._PendingEvents,[M._IterablePendingEvents,M._StreamImplEvents]),X(M._DelayedEvent,[M._DelayedData,M._DelayedError]),Y(M._RootZone,M._Zone),Y(M._IdentityHashMap,M._HashMap),X(M._SetBase,[M._LinkedHashSet,M._UnmodifiableSet]),Y(M.StringConversionSinkBase,M.StringConversionSinkMixin),Y(M._StringSinkConversionSink,M.StringConversionSinkBase),Y(M._JsonDecoderSink,M._StringSinkConversionSink),X(M.Codec,[M.Base64Codec,M.Encoding,M.JsonCodec]),Y(M.Converter,M.StreamTransformerBase),X(M.Converter,[M.Base64Encoder,M.Base64Decoder,M.JsonDecoder,M.Utf8Decoder]),X(M.ChunkedConversionSink,[M.ByteConversionSink,M._SimpleCallbackSink]),Y(M._Utf8StringSinkAdapter,M.ByteConversionSink),Y(M.Utf8Codec,M.Encoding),X(M.num,[M.double,M.int]),X(M.ArgumentError,[M.RangeError,M.IndexError]),Y(M._DataUri,M._Uri),X(I.GltfProperty,[I.GltfChildOfRootProperty,C.AccessorSparse,C.AccessorSparseIndices,C.AccessorSparseValues,$.AnimationChannel,$.AnimationChannelTarget,$.AnimationSampler,O.Asset,P.CameraOrthographic,P.CameraPerspective,I.Gltf,L.PbrMetallicRoughness,L.TextureInfo,k.MeshPrimitive,U.ExtTextureWebPTexture,B.KhrLightsPunctualGltf,B.KhrLightsPunctualLightSpot,B.KhrLightsPunctualNode,z.KhrMaterialsPbrSpecularGlossiness,k.KhrMaterialsUnlit,V.KhrTextureTransform]),X(I.GltfChildOfRootProperty,[C.Accessor,$.Animation,A.Buffer,I.BufferView,P.Camera,O.Image,L.Material,k.Mesh,I.Node,O.Sampler,R.Scene,D.Skin,j.Texture,B.KhrLightsPunctualLight]),X(C.Accessor,[C._AccessorInt,C._AccessorFloat]),X(H.ElementChecker,[C.InvalidFloatChecker,C.MinFloatChecker,C.MaxFloatChecker,C.MinIntegerChecker,C.MaxIntegerChecker,$.AnimationInputChecker,$.QuaternionFloatChecker,k.IndexBufferIntegerChecker,D.IbmMatrixFloatChecker,H.UnitVec3FloatChecker,H.UnitVec3SignFloatChecker,H.ClampedRangeFloatChecker]),X(L.TextureInfo,[L.OcclusionTextureInfo,L.NormalTextureInfo]),X(L.ImageInfoDecoder,[L.JpegInfoDecoder,L.PngInfoDecoder,L.WebPInfoDecoder]),X(F.IssueType,[F.DataError,F.IoError,F.SchemaError,F.SemanticError,F.LinkError,F.GlbError]),J(E.UnmodifiableListBase,E.UnmodifiableListMixin),J(E.__CastListBase__CastIterableBase_ListMixin,M.ListMixin),J(E._NativeTypedArrayOfDouble_NativeTypedArray_ListMixin,M.ListMixin),J(E._NativeTypedArrayOfDouble_NativeTypedArray_ListMixin_FixedLengthListMixin,E.FixedLengthListMixin),J(E._NativeTypedArrayOfInt_NativeTypedArray_ListMixin,M.ListMixin),J(E._NativeTypedArrayOfInt_NativeTypedArray_ListMixin_FixedLengthListMixin,E.FixedLengthListMixin),J(M._AsyncStreamController,M._AsyncStreamControllerDispatch),J(M._SyncStreamController,M._SyncStreamControllerDispatch),J(M._ListBase_Object_ListMixin,M.ListMixin),J(M._UnmodifiableMapView_MapView__UnmodifiableMapMixin,M._UnmodifiableMapMixin);var Z,Q={mangledGlobalNames:{int:"int",double:"double",num:"num",String:"String",bool:"bool",Null:"Null",List:"List"},mangledNames:{},getTypeFromName:function(e){for(var t=0;t<W.length;t++)if(W[t]!=w&&W[t][e])return W[t][e]},metadata:[],types:[{func:1,ret:M.String,args:[[M.List,,]]},{func:1,ret:-1},{func:1,ret:M.Null},{func:1,ret:M.bool,args:[k.MeshPrimitive]},{func:1,args:[,]},{func:1,ret:M.double,args:[M.int]},{func:1,ret:M.Null,args:[M.String,M.Object]},{func:1,ret:M.Null,args:[M.String,M.int]},{func:1,ret:M.bool,args:[M.int]},{func:1,ret:M.Null,args:[I.Node,M.int,M.int]},{func:1,ret:-1,args:[M.Object]},{func:1,ret:-1,args:[{func:1,ret:-1}]},{func:1,ret:-1,args:[C.Context]},{func:1,ret:M.Null,args:[,]},{func:1,ret:-1,args:[M.Object],opt:[M.StackTrace]},{func:1,ret:M.Null,args:[,,]},{func:1,ret:[M.Future,,]},{func:1,ret:[M.Iterable,M.int]},{func:1,ret:M.int,args:[M.int]},{func:1,ret:[M.Iterable,M.double]},{func:1,ret:M.Null,args:[M.int,k.MeshPrimitive]},{func:1,ret:-1,args:[M.String]},{func:1,ret:M.bool,args:[U.Extension]},{func:1,ret:M.Null,args:[[M.List,M.int]]},{func:1,ret:M.Null,args:[M.Object]},{func:1,ret:-1,args:[[M.List,M.int]]},{func:1,ret:M.Null,args:[{func:1,ret:-1,args:[M.Object]},M.Function]},{func:1,ret:M.Null,args:[[M.Map,M.String,M.Object]]},{func:1,ret:-1,args:[M.Object,M.StackTrace]},{func:1,ret:M.String,args:[M.Object]},{func:1,ret:M.Null,args:[M.int,I.ResourceValidatable]},{func:1,ret:M.Null,args:[M.int,$.AnimationChannel]},{func:1,ret:-1,args:[[H.SafeList,I.GltfProperty],M.Type]},{func:1,ret:M.Null,args:[M.int,I.GltfProperty]},{func:1,ret:M.Null,args:[,],opt:[M.StackTrace]},{func:1,ret:M.Null,args:[M.int,I.Node]},{func:1,ret:M.bool,args:[I.Node]},{func:1,ret:-1,args:[[H.SafeList,I.ResourceValidatable]]},{func:1,ret:M.Null,args:[M.String,,]},{func:1,ret:-1,args:[I.GltfProperty,M.String]},{func:1,ret:[M._Future,,],args:[,]},{func:1,args:[M.String]},{func:1,args:[,M.String]},{func:1,ret:-1,opt:[[M.Future,,]]},{func:1,ret:[M.Set,[C.Accessor,M.num]]},{func:1,ret:M.bool,args:[M.Object]},{func:1,ret:M.Null,args:[M.Symbol0,,]},{func:1,ret:M.String,args:[U.Extension]},{func:1,ret:[M.List,[H.ElementChecker,M.num]]},{func:1,ret:M.String,args:[M.String]},{func:1,ret:-1,args:[M.String,M.int]},{func:1,ret:U.Extension},{func:1,ret:M.Null,args:[M.Type,U.ExtFuncs]},{func:1,ret:-1,args:[M.String],opt:[,]},{func:1,ret:M.int,args:[M.int,M.int]},{func:1,ret:M.bool,args:[[M.List,M.int],[M.List,M.int]]},{func:1,ret:{futureOr:1,type:[M.List,M.int]},args:[A.Buffer]},{func:1,ret:[M.Stream,[M.List,M.int]],args:[O.Image]},{func:1,ret:M.Null,args:[M.int,[C.Accessor,M.num]]},{func:1,ret:M.bool,args:[[M.Iterator,M.num]]},{func:1,ret:M.Null,args:[M.String]},{func:1,ret:M.Null,args:[M.int,B.KhrLightsPunctualLight]},{func:1,ret:M.Uint8List,args:[M.int]},{func:1,ret:M.Uint8List,args:[,,]},{func:1,ret:-1,named:{seen:M.bool}},{func:1,ret:M.Null,args:[G.GltfReaderResult]},{func:1,ret:M.Null,args:[[M.List,M.Object]]},{func:1,ret:[M.Map,M.String,M.int],args:[[M.Map,,,]]},{func:1,ret:[M.List,U.LinkableExtensionEntry]},{func:1,ret:M.bool,args:[k.Mesh]},{func:1,ret:M.int,args:[M.int,M.Object]},{func:1,ret:[A.Promise,-2],args:[M.Uint8List,M.Object]},{func:1,ret:M.double,args:[M.num]},{func:1,ret:-1,args:[,]},{func:1,ret:M.Null,args:[,M.StackTrace]},{func:1,ret:[A.Promise,-2],args:[M.String,M.Object]},{func:1,ret:V.KhrTextureTransform,args:[[M.Map,M.String,M.Object],C.Context]},{func:1},{func:1,ret:[M.Future,M.Uint8List],args:[M.Uri]},{func:1,ret:{futureOr:1,type:M.Uint8List},opt:[M.Uri]},{func:1,ret:[M.Stream,M.Uint8List],args:[M.Uri]},{func:1,ret:M.Null,args:[M.int,,]},{func:1,ret:[C.Accessor,M.num],args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:C.AccessorSparse,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:C.AccessorSparseIndices,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:C.AccessorSparseValues,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:$.Animation,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:$.AnimationChannelTarget,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:O.Asset,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:A.Buffer,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:I.BufferView,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:P.Camera,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:P.CameraOrthographic,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:P.CameraPerspective,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:O.Image,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:L.Material,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:L.PbrMetallicRoughness,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:L.OcclusionTextureInfo,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:L.NormalTextureInfo,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:L.TextureInfo,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:k.Mesh,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:I.Node,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:O.Sampler,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:R.Scene,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:D.Skin,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:j.Texture,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:M.Null,args:[{func:1,ret:-1}]},{func:1,ret:M.Null,args:[M.int,$.AnimationSampler]},{func:1,ret:U.ExtTextureWebPTexture,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:B.KhrLightsPunctualGltf,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:B.KhrLightsPunctualLightSpot,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:B.KhrLightsPunctualNode,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:z.KhrMaterialsPbrSpecularGlossiness,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:k.KhrMaterialsUnlit,args:[[M.Map,M.String,M.Object],C.Context]},{func:1,ret:M.String}],interceptorsByTag:null,leafTags:null};!function(){var e=S.makeConstList;w.Interceptor_methods=T.Interceptor.prototype,w.JSArray_methods=T.JSArray.prototype,w.JSBool_methods=T.JSBool.prototype,w.JSInt_methods=T.JSInt.prototype,w.JSNumber_methods=T.JSNumber.prototype,w.JSString_methods=T.JSString.prototype,w.JavaScriptFunction_methods=T.JavaScriptFunction.prototype,w.NativeFloat32List_methods=E.NativeFloat32List.prototype,w.NativeUint8List_methods=E.NativeUint8List.prototype,w.PlainJavaScriptObject_methods=T.PlainJavaScriptObject.prototype,w.UnknownJavaScriptObject_methods=T.UnknownJavaScriptObject.prototype,w.AccessorFormat_MAT4_5126_false=new I.AccessorFormat("MAT4",5126,!1),w.AccessorFormat_SCALAR_5126_false=new I.AccessorFormat("SCALAR",5126,!1),w.AccessorFormat_VEC2_5121_true=new I.AccessorFormat("VEC2",5121,!0),w.AccessorFormat_VEC2_5123_true=new I.AccessorFormat("VEC2",5123,!0),w.AccessorFormat_VEC2_5126_false=new I.AccessorFormat("VEC2",5126,!1),w.AccessorFormat_VEC3_5121_true=new I.AccessorFormat("VEC3",5121,!0),w.AccessorFormat_VEC3_5123_true=new I.AccessorFormat("VEC3",5123,!0),w.AccessorFormat_VEC3_5126_false=new I.AccessorFormat("VEC3",5126,!1),w.AccessorFormat_VEC4_5121_false=new I.AccessorFormat("VEC4",5121,!1),w.AccessorFormat_VEC4_5121_true=new I.AccessorFormat("VEC4",5121,!0),w.AccessorFormat_VEC4_5123_false=new I.AccessorFormat("VEC4",5123,!1),w.AccessorFormat_VEC4_5123_true=new I.AccessorFormat("VEC4",5123,!0),w.AccessorFormat_VEC4_5126_false=new I.AccessorFormat("VEC4",5126,!1),w.AccessorUsage_AnimationInput=new I.AccessorUsage("AnimationInput"),w.AccessorUsage_AnimationOutput=new I.AccessorUsage("AnimationOutput"),w.AccessorUsage_IBM=new I.AccessorUsage("IBM"),w.AccessorUsage_PrimitiveIndices=new I.AccessorUsage("PrimitiveIndices"),w.AccessorUsage_VertexAttribute=new I.AccessorUsage("VertexAttribute"),w.BufferViewUsage_IBM=new I.BufferViewUsage("IBM"),w.BufferViewUsage_Image=new I.BufferViewUsage("Image"),w.BufferViewUsage_IndexBuffer=new I.BufferViewUsage("IndexBuffer"),w.BufferViewUsage_Other=new I.BufferViewUsage("Other"),w.BufferViewUsage_VertexBuffer=new I.BufferViewUsage("VertexBuffer"),w.C_Base64Encoder=new M.Base64Encoder,w.C_Base64Codec=new M.Base64Codec,w.C_Base64Decoder=new M.Base64Decoder,w.C_EmptyIterator=new E.EmptyIterator([M.Null]),w.C_GltfInvalidFormatException=new G.GltfInvalidFormatException,w.C_IssuesLimitExceededException=new C.IssuesLimitExceededException,w.C_JS_CONST=function(e){var t=Object.prototype.toString.call(e);return t.substring(8,t.length-1)},w.C_JS_CONST0=function(){var e=Object.prototype.toString;function t(t,n){if(/^HTML[A-Z].*Element$/.test(n))return"[object Object]"==e.call(t)?null:"HTMLElement"}return{getTag:function(t){var n=e.call(t);return n.substring(8,n.length-1)},getUnknownTag:"object"==typeof navigator?function(e,n){return i.HTMLElement&&e instanceof HTMLElement?"HTMLElement":t(e,n)}:t,prototypeForTag:function(e){if("undefined"==typeof window)return null;if(void 0===window[e])return null;var t=window[e];return"function"!=typeof t?null:t.prototype},discriminator:function(e){return null}}},w.C_JS_CONST6=function(e){return function(t){if("object"!=typeof navigator)return t;var n=navigator.userAgent;if(n.indexOf("DumpRenderTree")>=0)return t;if(n.indexOf("Chrome")>=0){function r(e){return"object"==typeof window&&window[e]&&window[e].name==e}if(r("Window")&&r("HTMLElement"))return t}t.getTag=e}},w.C_JS_CONST1=function(e){if("function"!=typeof dartExperimentalFixupGetTag)return e;e.getTag=dartExperimentalFixupGetTag(e.getTag)},w.C_JS_CONST2=function(e){var t=e.getTag,n=e.prototypeForTag;e.getTag=function(e){var n=t(e);return"Document"==n?e.xmlVersion?"!Document":"!HTMLDocument":n},e.prototypeForTag=function(e){return"Document"==e?null:n(e)}},w.C_JS_CONST5=function(e){if(-1==("object"==typeof navigator?navigator.userAgent:"").indexOf("Firefox"))return e;var t=e.getTag,n={BeforeUnloadEvent:"Event",DataTransfer:"Clipboard",GeoGeolocation:"Geolocation",Location:"!Location",WorkerMessageEvent:"MessageEvent",XMLDocument:"!Document"};e.getTag=function(e){var r=t(e);return n[r]||r}},w.C_JS_CONST4=function(e){if(-1==("object"==typeof navigator?navigator.userAgent:"").indexOf("Trident/"))return e;var t=e.getTag,n={BeforeUnloadEvent:"Event",DataTransfer:"Clipboard",HTMLDDElement:"HTMLElement",HTMLDTElement:"HTMLElement",HTMLPhraseElement:"HTMLElement",Position:"Geoposition"};e.getTag=function(e){var r=t(e),i=n[r];return i||("Object"==r&&window.DataView&&e instanceof window.DataView?"DataView":r)},e.prototypeForTag=function(e){var t=window[e];return null==t?null:t.prototype}},w.C_JS_CONST3=function(e){return e},w.C_JsonCodec=new M.JsonCodec,w.C_OutOfMemoryError=new M.OutOfMemoryError,w.C_UnexpectedEndOfStreamException=new L.UnexpectedEndOfStreamException,w.C_UnsupportedImageFormatException=new L.UnsupportedImageFormatException,w.C_Utf8Codec=new M.Utf8Codec,w.C__DelayedDone=new M._DelayedDone,w.C__RootZone=new M._RootZone,w.Format_0=new L.Format(0,"Format.Unknown"),w.Format_1=new L.Format(1,"Format.RGB"),w.Format_2=new L.Format(2,"Format.RGBA"),w.Format_3=new L.Format(3,"Format.Luminance"),w.Format_4=new L.Format(4,"Format.LuminanceAlpha"),w.InvalidDataFormatException_AgZ=new L.InvalidDataFormatException("Wrong WebP header."),w.InvalidDataFormatException_KIf=new L.InvalidDataFormatException("PNG header not found."),w.InvalidDataFormatException_YbV=new L.InvalidDataFormatException("Invalid JPEG marker segment length."),w.InvalidDataFormatException_b84=new L.InvalidDataFormatException("Wrong chunk length."),w.InvalidDataFormatException_sAZ=new L.InvalidDataFormatException("Invalid start of file."),w.JsonDecoder_null=new M.JsonDecoder(null),w.List_0_0=E.setRuntimeTypeInfo(e([0,0]),[M.double]),w.List_0_0_0=E.setRuntimeTypeInfo(e([0,0,0]),[M.double]),w.List_127_2047_65535_1114111=E.setRuntimeTypeInfo(e([127,2047,65535,1114111]),[M.int]),w.List_16=E.setRuntimeTypeInfo(e([16]),[M.int]),w.List_1_1=E.setRuntimeTypeInfo(e([1,1]),[M.double]),w.List_1_1_1=E.setRuntimeTypeInfo(e([1,1,1]),[M.double]),w.List_1_1_1_1=E.setRuntimeTypeInfo(e([1,1,1,1]),[M.double]),w.List_2=E.setRuntimeTypeInfo(e([2]),[M.int]),w.List_255_216=E.setRuntimeTypeInfo(e([255,216]),[M.int]),w.List_2Vk0=E.setRuntimeTypeInfo(e([0,0,32776,33792,1,10240,0,0]),[M.int]),w.List_2Vk=E.setRuntimeTypeInfo(e([137,80,78,71,13,10,26,10]),[M.int]),w.Type_Texture_gsm=E.createRuntimeType(j.Texture),w.ExtFuncs_fromMap=new U.ExtFuncs(U.ext_texture_webp_ExtTextureWebPTexture_fromMap$closure()),w.Map_bHQKw=new E.GeneralConstantMap([w.Type_Texture_gsm,w.ExtFuncs_fromMap],[M.Type,U.ExtFuncs]),w.Extension_CC5=new U.Extension("EXT_texture_webp",w.Map_bHQKw,U.ext_texture_webp___init$closure(),!1),w.Type_Gltf_IeY=E.createRuntimeType(I.Gltf),w.Type_Node_jrF=E.createRuntimeType(I.Node),w.ExtFuncs_fromMap0=new U.ExtFuncs(B.khr_lights_punctual_KhrLightsPunctualGltf_fromMap$closure()),w.ExtFuncs_fromMap1=new U.ExtFuncs(B.khr_lights_punctual_KhrLightsPunctualNode_fromMap$closure()),w.Map_I6YMD=new E.GeneralConstantMap([w.Type_Gltf_IeY,w.ExtFuncs_fromMap0,w.Type_Node_jrF,w.ExtFuncs_fromMap1],[M.Type,U.ExtFuncs]),w.Extension_gg9=new U.Extension("KHR_lights_punctual",w.Map_I6YMD,null,!1),w.Type_Material_2bi=E.createRuntimeType(L.Material),w.ExtFuncs_fromMap2=new U.ExtFuncs(z.khr_materials_pbr_specular_glossiness_KhrMaterialsPbrSpecularGlossiness_fromMap$closure()),w.Map_5YHpO=new E.GeneralConstantMap([w.Type_Material_2bi,w.ExtFuncs_fromMap2],[M.Type,U.ExtFuncs]),w.Extension_Oyf=new U.Extension("KHR_materials_pbrSpecularGlossiness",w.Map_5YHpO,null,!1),w.ExtFuncs_fromMap3=new U.ExtFuncs(k.khr_materials_unlit_KhrMaterialsUnlit_fromMap$closure()),w.Map_5YHpO0=new E.GeneralConstantMap([w.Type_Material_2bi,w.ExtFuncs_fromMap3],[M.Type,U.ExtFuncs]),w.Extension_58O=new U.Extension("KHR_materials_unlit",w.Map_5YHpO0,null,!1),w.List_empty1=E.setRuntimeTypeInfo(e([]),[M.Type]),w.Map_empty0=new E.ConstantStringMap(0,{},w.List_empty1,[M.Type,U.ExtFuncs]),w.Extension_yDH=new U.Extension("KHR_mesh_quantization",w.Map_empty0,j.khr_mesh_quantization___init$closure(),!0),w.Type_TextureInfo_V3H=E.createRuntimeType(L.TextureInfo),w.Type_NormalTextureInfo_0=E.createRuntimeType(L.NormalTextureInfo),w.Type_OcclusionTextureInfo_YCM=E.createRuntimeType(L.OcclusionTextureInfo),w.ExtFuncs_fromMap4=new U.ExtFuncs(V.khr_texture_transform_KhrTextureTransform_fromMap$closure()),w.Map_RkAPm=new E.GeneralConstantMap([w.Type_TextureInfo_V3H,w.ExtFuncs_fromMap4,w.Type_NormalTextureInfo_0,w.ExtFuncs_fromMap4,w.Type_OcclusionTextureInfo_YCM,w.ExtFuncs_fromMap4],[M.Type,U.ExtFuncs]),w.Extension_Mul=new U.Extension("KHR_texture_transform",w.Map_RkAPm,null,!1),w.List_2nP=E.setRuntimeTypeInfo(e([w.Extension_CC5,w.Extension_gg9,w.Extension_Oyf,w.Extension_58O,w.Extension_yDH,w.Extension_Mul]),[U.Extension]),w.List_3=E.setRuntimeTypeInfo(e([3]),[M.int]),w.List_33071_33648_10497=E.setRuntimeTypeInfo(e([33071,33648,10497]),[M.int]),w.List_34962_34963=E.setRuntimeTypeInfo(e([34962,34963]),[M.int]),w.List_4=E.setRuntimeTypeInfo(e([4]),[M.int]),w.AccessorFormat_VEC2_5120_false=new I.AccessorFormat("VEC2",5120,!1),w.AccessorFormat_VEC2_5120_true=new I.AccessorFormat("VEC2",5120,!0),w.AccessorFormat_VEC2_5121_false=new I.AccessorFormat("VEC2",5121,!1),w.AccessorFormat_VEC2_5122_false=new I.AccessorFormat("VEC2",5122,!1),w.AccessorFormat_VEC2_5122_true=new I.AccessorFormat("VEC2",5122,!0),w.AccessorFormat_VEC2_5123_false=new I.AccessorFormat("VEC2",5123,!1),w.List_4CA=E.setRuntimeTypeInfo(e([w.AccessorFormat_VEC2_5120_false,w.AccessorFormat_VEC2_5120_true,w.AccessorFormat_VEC2_5121_false,w.AccessorFormat_VEC2_5122_false,w.AccessorFormat_VEC2_5122_true,w.AccessorFormat_VEC2_5123_false]),[I.AccessorFormat]),w.List_5121_5123_5125=E.setRuntimeTypeInfo(e([5121,5123,5125]),[M.int]),w.List_6D4=E.setRuntimeTypeInfo(e(["image/jpeg","image/png"]),[M.String]),w.List_82_73_70_70=E.setRuntimeTypeInfo(e([82,73,70,70]),[M.int]),w.List_9728_9729=E.setRuntimeTypeInfo(e([9728,9729]),[M.int]),w.AccessorFormat_SCALAR_5121_false=new I.AccessorFormat("SCALAR",5121,!1),w.AccessorFormat_SCALAR_5123_false=new I.AccessorFormat("SCALAR",5123,!1),w.AccessorFormat_SCALAR_5125_false=new I.AccessorFormat("SCALAR",5125,!1),w.List_AKA=E.setRuntimeTypeInfo(e([w.AccessorFormat_SCALAR_5121_false,w.AccessorFormat_SCALAR_5123_false,w.AccessorFormat_SCALAR_5125_false]),[I.AccessorFormat]),w.List_B9o=E.setRuntimeTypeInfo(e(["camera","children","skin","matrix","mesh","rotation","scale","translation","weights","name"]),[M.String]),w.List_BKg=E.setRuntimeTypeInfo(e([9728,9729,9984,9985,9986,9987]),[M.int]),w.List_COLOR_JOINTS_TEXCOORD_WEIGHTS=E.setRuntimeTypeInfo(e(["COLOR","JOINTS","TEXCOORD","WEIGHTS"]),[M.String]),w.List_CVk=E.setRuntimeTypeInfo(e([0,0,65490,45055,65535,34815,65534,18431]),[M.int]),w.List_INA=E.setRuntimeTypeInfo(e(["color","intensity","spot","type","range","name"]),[M.String]),w.List_IVU=E.setRuntimeTypeInfo(e(["buffer","byteOffset","byteLength","byteStride","target","name"]),[M.String]),w.List_JYB=E.setRuntimeTypeInfo(e([0,0,26624,1023,65534,2047,65534,2047]),[M.int]),w.List_LINEAR_STEP_CUBICSPLINE=E.setRuntimeTypeInfo(e(["LINEAR","STEP","CUBICSPLINE"]),[M.String]),w.List_OPAQUE_MASK_BLEND=E.setRuntimeTypeInfo(e(["OPAQUE","MASK","BLEND"]),[M.String]),w.List_OdV=E.setRuntimeTypeInfo(e(["pbrMetallicRoughness","normalTexture","occlusionTexture","emissiveTexture","emissiveFactor","alphaMode","alphaCutoff","doubleSided","name"]),[M.String]),w.List_Q4K=E.setRuntimeTypeInfo(e([5120,5121,5122,5123,5125,5126]),[M.int]),w.List_QW2=E.setRuntimeTypeInfo(e(["inverseBindMatrices","skeleton","joints","name"]),[M.String]),w.AccessorFormat_VEC3_5120_false=new I.AccessorFormat("VEC3",5120,!1),w.AccessorFormat_VEC3_5120_true=new I.AccessorFormat("VEC3",5120,!0),w.AccessorFormat_VEC3_5122_false=new I.AccessorFormat("VEC3",5122,!1),w.AccessorFormat_VEC3_5122_true=new I.AccessorFormat("VEC3",5122,!0),w.List_Ri2=E.setRuntimeTypeInfo(e([w.AccessorFormat_VEC3_5120_false,w.AccessorFormat_VEC3_5120_true,w.AccessorFormat_VEC3_5122_false,w.AccessorFormat_VEC3_5122_true]),[I.AccessorFormat]),w.List_UWS=E.setRuntimeTypeInfo(e(["data-uri","buffer-view","glb","external"]),[M.String]),w.List_WJh=E.setRuntimeTypeInfo(e(["POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN"]),[M.String]),w.List_YcR=E.setRuntimeTypeInfo(e(["bufferView","byteOffset","componentType"]),[M.String]),w.List_a9P=E.setRuntimeTypeInfo(e([w.AccessorFormat_VEC3_5120_true,w.AccessorFormat_VEC3_5122_true]),[I.AccessorFormat]),w.List_aspectRatio_yfov_zfar_znear=E.setRuntimeTypeInfo(e(["aspectRatio","yfov","zfar","znear"]),[M.String]),w.List_avb=E.setRuntimeTypeInfo(e(["copyright","generator","version","minVersion"]),[M.String]),w.List_bufferView_byteOffset=E.setRuntimeTypeInfo(e(["bufferView","byteOffset"]),[M.String]),w.List_bufferView_mimeType_uri_name=E.setRuntimeTypeInfo(e(["bufferView","mimeType","uri","name"]),[M.String]),w.List_channels_samplers_name=E.setRuntimeTypeInfo(e(["channels","samplers","name"]),[M.String]),w.List_chs=E.setRuntimeTypeInfo(e(["baseColorFactor","baseColorTexture","metallicFactor","roughnessFactor","metallicRoughnessTexture"]),[M.String]),w.List_count_indices_values=E.setRuntimeTypeInfo(e(["count","indices","values"]),[M.String]),w.List_cwF=E.setRuntimeTypeInfo(e(["diffuseFactor","diffuseTexture","specularFactor","glossinessFactor","specularGlossinessTexture"]),[M.String]),w.List_directional_point_spot=E.setRuntimeTypeInfo(e(["directional","point","spot"]),[M.String]),w.List_empty=E.setRuntimeTypeInfo(e([]),[M.String]),w.List_empty0=e([]),w.List_extensions_extras=E.setRuntimeTypeInfo(e(["extensions","extras"]),[M.String]),w.List_gRj=E.setRuntimeTypeInfo(e([0,0,32722,12287,65534,34815,65534,18431]),[M.int]),w.List_index_texCoord=E.setRuntimeTypeInfo(e(["index","texCoord"]),[M.String]),w.List_index_texCoord_scale=E.setRuntimeTypeInfo(e(["index","texCoord","scale"]),[M.String]),w.List_index_texCoord_strength=E.setRuntimeTypeInfo(e(["index","texCoord","strength"]),[M.String]),w.List_innerConeAngle_outerConeAngle=E.setRuntimeTypeInfo(e(["innerConeAngle","outerConeAngle"]),[M.String]),w.List_input_interpolation_output=E.setRuntimeTypeInfo(e(["input","interpolation","output"]),[M.String]),w.List_iyy=E.setRuntimeTypeInfo(e(["attributes","indices","material","mode","targets"]),[M.String]),w.List_jxI=E.setRuntimeTypeInfo(e(["bufferView","byteOffset","componentType","count","type","normalized","max","min","sparse","name"]),[M.String]),w.List_light=E.setRuntimeTypeInfo(e(["light"]),[M.String]),w.List_lights=E.setRuntimeTypeInfo(e(["lights"]),[M.String]),w.List_node_path=E.setRuntimeTypeInfo(e(["node","path"]),[M.String]),w.List_nodes_name=E.setRuntimeTypeInfo(e(["nodes","name"]),[M.String]),w.List_null_linear_srgb_custom=E.setRuntimeTypeInfo(e([null,"linear","srgb","custom"]),[M.String]),w.List_null_srgb_custom=E.setRuntimeTypeInfo(e([null,"srgb","custom"]),[M.String]),w.List_nxB=E.setRuntimeTypeInfo(e([0,0,24576,1023,65534,34815,65534,18431]),[M.int]),w.List_oCz=E.setRuntimeTypeInfo(e(["image/webp"]),[M.String]),w.List_offset_rotation_scale_texCoord=E.setRuntimeTypeInfo(e(["offset","rotation","scale","texCoord"]),[M.String]),w.List_orthographic_perspective=E.setRuntimeTypeInfo(e(["orthographic","perspective"]),[M.String]),w.List_primitives_weights_name=E.setRuntimeTypeInfo(e(["primitives","weights","name"]),[M.String]),w.Severity_0=new F.Severity(0,"Severity.Error"),w.Severity_1=new F.Severity(1,"Severity.Warning"),w.Severity_2=new F.Severity(2,"Severity.Information"),w.Severity_3=new F.Severity(3,"Severity.Hint"),w.List_qFu=E.setRuntimeTypeInfo(e([w.Severity_0,w.Severity_1,w.Severity_2,w.Severity_3]),[F.Severity]),w.List_qNA=E.setRuntimeTypeInfo(e([0,0,32754,11263,65534,34815,65534,18431]),[M.int]),w.List_qPn=E.setRuntimeTypeInfo(e(["magFilter","minFilter","wrapS","wrapT","name"]),[M.String]),w.List_qVm=E.setRuntimeTypeInfo(e([null,"rgb","rgba","luminance","luminance-alpha"]),[M.String]),w.List_qg4=E.setRuntimeTypeInfo(e([0,0,65490,12287,65535,34815,65534,18431]),[M.int]),w.List_sampler_source_name=E.setRuntimeTypeInfo(e(["sampler","source","name"]),[M.String]),w.List_source=E.setRuntimeTypeInfo(e(["source"]),[M.String]),w.AccessorFormat_VEC3_5121_false=new I.AccessorFormat("VEC3",5121,!1),w.AccessorFormat_VEC3_5123_false=new I.AccessorFormat("VEC3",5123,!1),w.List_tES=E.setRuntimeTypeInfo(e([w.AccessorFormat_VEC3_5120_false,w.AccessorFormat_VEC3_5120_true,w.AccessorFormat_VEC3_5121_false,w.AccessorFormat_VEC3_5121_true,w.AccessorFormat_VEC3_5122_false,w.AccessorFormat_VEC3_5122_true,w.AccessorFormat_VEC3_5123_false,w.AccessorFormat_VEC3_5123_true]),[I.AccessorFormat]),w.List_target_sampler=E.setRuntimeTypeInfo(e(["target","sampler"]),[M.String]),w.List_translation_rotation_scale_weights=E.setRuntimeTypeInfo(e(["translation","rotation","scale","weights"]),[M.String]),w.List_type_orthographic_perspective_name=E.setRuntimeTypeInfo(e(["type","orthographic","perspective","name"]),[M.String]),w.List_uri_byteLength_name=E.setRuntimeTypeInfo(e(["uri","byteLength","name"]),[M.String]),w.List_xmag_ymag_zfar_znear=E.setRuntimeTypeInfo(e(["xmag","ymag","zfar","znear"]),[M.String]),w.List_yvP=E.setRuntimeTypeInfo(e(["extensionsUsed","extensionsRequired","accessors","animations","asset","buffers","bufferViews","cameras","images","materials","meshes","nodes","samplers","scene","scenes","skins","textures"]),[M.String]),w.AccessorFormat_VEC4_5120_true=new I.AccessorFormat("VEC4",5120,!0),w.AccessorFormat_VEC4_5122_true=new I.AccessorFormat("VEC4",5122,!0),w.List_zzp=E.setRuntimeTypeInfo(e([w.AccessorFormat_VEC4_5120_true,w.AccessorFormat_VEC4_5122_true]),[I.AccessorFormat]),w.List_AccessorFormat_VEC3_5126_false=E.setRuntimeTypeInfo(e([w.AccessorFormat_VEC3_5126_false]),[I.AccessorFormat]),w.List_2AS=E.setRuntimeTypeInfo(e([w.AccessorFormat_VEC4_5126_false,w.AccessorFormat_VEC4_5121_true,w.AccessorFormat_VEC4_5120_true,w.AccessorFormat_VEC4_5123_true,w.AccessorFormat_VEC4_5122_true]),[I.AccessorFormat]),w.AccessorFormat_SCALAR_5121_true=new I.AccessorFormat("SCALAR",5121,!0),w.AccessorFormat_SCALAR_5120_true=new I.AccessorFormat("SCALAR",5120,!0),w.AccessorFormat_SCALAR_5123_true=new I.AccessorFormat("SCALAR",5123,!0),w.AccessorFormat_SCALAR_5122_true=new I.AccessorFormat("SCALAR",5122,!0),w.List_i3t=E.setRuntimeTypeInfo(e([w.AccessorFormat_SCALAR_5126_false,w.AccessorFormat_SCALAR_5121_true,w.AccessorFormat_SCALAR_5120_true,w.AccessorFormat_SCALAR_5123_true,w.AccessorFormat_SCALAR_5122_true]),[I.AccessorFormat]),w.Map_0nNZ=new E.ConstantStringMap(4,{translation:w.List_AccessorFormat_VEC3_5126_false,rotation:w.List_2AS,scale:w.List_AccessorFormat_VEC3_5126_false,weights:w.List_i3t},w.List_translation_rotation_scale_weights,[M.String,[M.List,I.AccessorFormat]]),w.List_A18=E.setRuntimeTypeInfo(e(["SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4"]),[M.String]),w.Map_A1ato=new E.ConstantStringMap(7,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},w.List_A18,[M.String,M.int]),w.Map_ZGNO4=new E.GeneralConstantMap([5120,"BYTE",5121,"UNSIGNED_BYTE",5122,"SHORT",5123,"UNSIGNED_SHORT",5124,"INT",5125,"UNSIGNED_INT",5126,"FLOAT",35664,"FLOAT_VEC2",35665,"FLOAT_VEC3",35666,"FLOAT_VEC4",35667,"INT_VEC2",35668,"INT_VEC3",35669,"INT_VEC4",35670,"BOOL",35671,"BOOL_VEC2",35672,"BOOL_VEC3",35673,"BOOL_VEC4",35674,"FLOAT_MAT2",35675,"FLOAT_MAT3",35676,"FLOAT_MAT4",35678,"SAMPLER_2D"],[M.int,M.String]),w.List_empty2=E.setRuntimeTypeInfo(e([]),[M.Symbol0]),w.Map_empty=new E.ConstantStringMap(0,{},w.List_empty2,[M.Symbol0,null]),w.List_AiV=E.setRuntimeTypeInfo(e(["KHR","EXT","ADOBE","AGI","AGT","ALCM","ALI","AMZN","AVR","BLENDER","CAPTURE","CESIUM","CVTOOLS","FB","FOXIT","GOOGLE","KDAB","LLQ","MESHOPT","MOZ","MSFT","NV","OWLII","POLUTROPON","S8S","SI","SKFB","SKYLINE","WEB3D"]),[M.String]),w.Map_Aicw1=new E.ConstantStringMap(29,{KHR:null,EXT:null,ADOBE:null,AGI:null,AGT:null,ALCM:null,ALI:null,AMZN:null,AVR:null,BLENDER:null,CAPTURE:null,CESIUM:null,CVTOOLS:null,FB:null,FOXIT:null,GOOGLE:null,KDAB:null,LLQ:null,MESHOPT:null,MOZ:null,MSFT:null,NV:null,OWLII:null,POLUTROPON:null,S8S:null,SI:null,SKFB:null,SKYLINE:null,WEB3D:null},w.List_AiV,[M.String,M.Null]),w.Set_AiVn=new M._UnmodifiableSet(w.Map_Aicw1,[M.String]),w.Symbol_call=new E.Symbol("call"),w.Type_AccessorSparseIndices_XRi=E.createRuntimeType(C.AccessorSparseIndices),w.Type_AccessorSparseValues_Yas=E.createRuntimeType(C.AccessorSparseValues),w.Type_AccessorSparse_SoA=E.createRuntimeType(C.AccessorSparse),w.Type_Accessor_scC=E.createRuntimeType([C.Accessor,M.num]),w.Type_AnimationChannelTarget_Nno=E.createRuntimeType($.AnimationChannelTarget),w.Type_AnimationChannel_nvO=E.createRuntimeType($.AnimationChannel),w.Type_AnimationSampler_y5u=E.createRuntimeType($.AnimationSampler),w.Type_Animation_hcA=E.createRuntimeType($.Animation),w.Type_Asset_ePM=E.createRuntimeType(O.Asset),w.Type_BufferView_JO4=E.createRuntimeType(I.BufferView),w.Type_Buffer_gn0=E.createRuntimeType(A.Buffer),w.Type_CameraOrthographic_wIv=E.createRuntimeType(P.CameraOrthographic),w.Type_CameraPerspective_EWB=E.createRuntimeType(P.CameraPerspective),w.Type_Camera_s3t=E.createRuntimeType(P.Camera),w.Type_DzG=E.createRuntimeType(z.KhrMaterialsPbrSpecularGlossiness),w.Type_ExtTextureWebPTexture_9YE=E.createRuntimeType(U.ExtTextureWebPTexture),w.Type_Image_5hW=E.createRuntimeType(O.Image),w.Type_KhrLightsPunctualGltf_4YB=E.createRuntimeType(B.KhrLightsPunctualGltf),w.Type_KhrLightsPunctualLightSpot_oBB=E.createRuntimeType(B.KhrLightsPunctualLightSpot),w.Type_KhrLightsPunctualLight_4m4=E.createRuntimeType(B.KhrLightsPunctualLight),w.Type_KhrLightsPunctualNode_eHw=E.createRuntimeType(B.KhrLightsPunctualNode),w.Type_KhrMaterialsUnlit_0=E.createRuntimeType(k.KhrMaterialsUnlit),w.Type_KhrTextureTransform_xSJ=E.createRuntimeType(V.KhrTextureTransform),w.Type_MeshPrimitive_TPX=E.createRuntimeType(k.MeshPrimitive),w.Type_Mesh_K2f=E.createRuntimeType(k.Mesh),w.Type_PbrMetallicRoughness_k2w=E.createRuntimeType(L.PbrMetallicRoughness),w.Type_Sampler_mXu=E.createRuntimeType(O.Sampler),w.Type_Scene_9YE=E.createRuntimeType(R.Scene),w.Type_Skin_OJ4=E.createRuntimeType(D.Skin),w._ColorPrimaries_0=new L._ColorPrimaries(0,"_ColorPrimaries.Unknown"),w._ColorPrimaries_1=new L._ColorPrimaries(1,"_ColorPrimaries.sRGB"),w._ColorPrimaries_2=new L._ColorPrimaries(2,"_ColorPrimaries.Custom"),w._ColorTransfer_0=new L._ColorTransfer(0,"_ColorTransfer.Unknown"),w._ColorTransfer_1=new L._ColorTransfer(1,"_ColorTransfer.Linear"),w._ColorTransfer_2=new L._ColorTransfer(2,"_ColorTransfer.sRGB"),w._ColorTransfer_3=new L._ColorTransfer(3,"_ColorTransfer.Custom"),w._ImageCodec_0=new L._ImageCodec("_ImageCodec.JPEG"),w._ImageCodec_1=new L._ImageCodec("_ImageCodec.PNG"),w._ImageCodec_2=new L._ImageCodec("_ImageCodec.WebP"),w._IterationMarker_null_2=new M._IterationMarker(null,2),w._Storage_0=new N._Storage(0,"_Storage.DataUri"),w._Storage_1=new N._Storage(1,"_Storage.BufferView"),w._Storage_2=new N._Storage(2,"_Storage.GLB"),w._Storage_3=new N._Storage(3,"_Storage.External")}(),K.Closure_functionCounter=0,K.BoundClosure_selfFieldNameCache=null,K.BoundClosure_receiverFieldNameCache=null,K._inTypeAssertion=!1,K.getTagFunction=null,K.alternateTagFunction=null,K.prototypeForTagFunction=null,K.dispatchRecordsForInstanceTags=null,K.interceptorsForUncacheableTags=null,K.initNativeDispatchFlag=null,K._nextCallback=null,K._lastCallback=null,K._lastPriorityCallback=null,K._isInCallbackLoop=!1,K.Zone__current=w.C__RootZone,K._toStringVisiting=[],(Z=S.lazy)(K,"DART_CLOSURE_PROPERTY_NAME","$get$DART_CLOSURE_PROPERTY_NAME",(function(){return E.getIsolateAffinityTag("_$dart_dartClosure")})),Z(K,"JS_INTEROP_INTERCEPTOR_TAG","$get$JS_INTEROP_INTERCEPTOR_TAG",(function(){return E.getIsolateAffinityTag("_$dart_js")})),Z(K,"TypeErrorDecoder_noSuchMethodPattern","$get$TypeErrorDecoder_noSuchMethodPattern",(function(){return E.TypeErrorDecoder_extractPattern(E.TypeErrorDecoder_provokeCallErrorOn({toString:function(){return"$receiver$"}}))})),Z(K,"TypeErrorDecoder_notClosurePattern","$get$TypeErrorDecoder_notClosurePattern",(function(){return E.TypeErrorDecoder_extractPattern(E.TypeErrorDecoder_provokeCallErrorOn({$method$:null,toString:function(){return"$receiver$"}}))})),Z(K,"TypeErrorDecoder_nullCallPattern","$get$TypeErrorDecoder_nullCallPattern",(function(){return E.TypeErrorDecoder_extractPattern(E.TypeErrorDecoder_provokeCallErrorOn(null))})),Z(K,"TypeErrorDecoder_nullLiteralCallPattern","$get$TypeErrorDecoder_nullLiteralCallPattern",(function(){return E.TypeErrorDecoder_extractPattern(function(){try{null.$method$("$arguments$")}catch(e){return e.message}}())})),Z(K,"TypeErrorDecoder_undefinedCallPattern","$get$TypeErrorDecoder_undefinedCallPattern",(function(){return E.TypeErrorDecoder_extractPattern(E.TypeErrorDecoder_provokeCallErrorOn(void 0))})),Z(K,"TypeErrorDecoder_undefinedLiteralCallPattern","$get$TypeErrorDecoder_undefinedLiteralCallPattern",(function(){return E.TypeErrorDecoder_extractPattern(function(){try{(void 0).$method$("$arguments$")}catch(e){return e.message}}())})),Z(K,"TypeErrorDecoder_nullPropertyPattern","$get$TypeErrorDecoder_nullPropertyPattern",(function(){return E.TypeErrorDecoder_extractPattern(E.TypeErrorDecoder_provokePropertyErrorOn(null))})),Z(K,"TypeErrorDecoder_nullLiteralPropertyPattern","$get$TypeErrorDecoder_nullLiteralPropertyPattern",(function(){return E.TypeErrorDecoder_extractPattern(function(){try{null.$method$}catch(e){return e.message}}())})),Z(K,"TypeErrorDecoder_undefinedPropertyPattern","$get$TypeErrorDecoder_undefinedPropertyPattern",(function(){return E.TypeErrorDecoder_extractPattern(E.TypeErrorDecoder_provokePropertyErrorOn(void 0))})),Z(K,"TypeErrorDecoder_undefinedLiteralPropertyPattern","$get$TypeErrorDecoder_undefinedLiteralPropertyPattern",(function(){return E.TypeErrorDecoder_extractPattern(function(){try{(void 0).$method$}catch(e){return e.message}}())})),Z(K,"_AsyncRun__scheduleImmediateClosure","$get$_AsyncRun__scheduleImmediateClosure",(function(){return M._AsyncRun__initializeScheduleImmediate()})),Z(K,"Future__nullFuture","$get$Future__nullFuture",(function(){var e=new M._Future(w.C__RootZone,[M.Null]);return e._setValue$1(null),e})),Z(K,"Utf8Decoder__decoder","$get$Utf8Decoder__decoder",(function(){return M.Utf8Decoder__makeDecoder()})),Z(K,"_Base64Decoder__inverseAlphabet","$get$_Base64Decoder__inverseAlphabet",(function(){return E.NativeInt8List__create1(E._ensureNativeList(E.setRuntimeTypeInfo([-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-1,-2,-2,-2,-2,-2,62,-2,62,-2,63,52,53,54,55,56,57,58,59,60,61,-2,-2,-2,-1,-2,-2,-2,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-2,-2,-2,-2,63,-2,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-2,-2,-2,-2,-2],[M.int])))})),Z(K,"_scannerTables","$get$_scannerTables",(function(){return M._createTables()})),Z(K,"Asset_versionRegexp","$get$Asset_versionRegexp",(function(){return M.RegExp_RegExp("^([0-9]+)\\.([0-9]+)$")})),Z(K,"Context__extNameFormat","$get$Context__extNameFormat",(function(){return M.RegExp_RegExp("^([A-Z0-9]+)_[A-Za-z0-9_]+$")})),Z(K,"DataError_bufferEmbeddedBytelengthMismatch","$get$DataError_bufferEmbeddedBytelengthMismatch",(function(){return F.DataError$_("BUFFER_EMBEDDED_BYTELENGTH_MISMATCH",new F.DataError_closure16,w.Severity_0)})),Z(K,"DataError_bufferExternalBytelengthMismatch","$get$DataError_bufferExternalBytelengthMismatch",(function(){return F.DataError$_("BUFFER_EXTERNAL_BYTELENGTH_MISMATCH",new F.DataError_closure14,w.Severity_0)})),Z(K,"DataError_bufferGlbChunkTooBig","$get$DataError_bufferGlbChunkTooBig",(function(){return F.DataError$_("BUFFER_GLB_CHUNK_TOO_BIG",new F.DataError_closure13,w.Severity_1)})),Z(K,"DataError_accessorMinMismatch","$get$DataError_accessorMinMismatch",(function(){return F.DataError$_("ACCESSOR_MIN_MISMATCH",new F.DataError_closure20,w.Severity_0)})),Z(K,"DataError_accessorMaxMismatch","$get$DataError_accessorMaxMismatch",(function(){return F.DataError$_("ACCESSOR_MAX_MISMATCH",new F.DataError_closure18,w.Severity_0)})),Z(K,"DataError_accessorElementOutOfMinBound","$get$DataError_accessorElementOutOfMinBound",(function(){return F.DataError$_("ACCESSOR_ELEMENT_OUT_OF_MIN_BOUND",new F.DataError_closure19,w.Severity_0)})),Z(K,"DataError_accessorElementOutOfMaxBound","$get$DataError_accessorElementOutOfMaxBound",(function(){return F.DataError$_("ACCESSOR_ELEMENT_OUT_OF_MAX_BOUND",new F.DataError_closure17,w.Severity_0)})),Z(K,"DataError_accessorVector3NonUnit","$get$DataError_accessorVector3NonUnit",(function(){return F.DataError$_("ACCESSOR_VECTOR3_NON_UNIT",new F.DataError_closure29,w.Severity_0)})),Z(K,"DataError_accessorInvalidSign","$get$DataError_accessorInvalidSign",(function(){return F.DataError$_("ACCESSOR_INVALID_SIGN",new F.DataError_closure30,w.Severity_0)})),Z(K,"DataError_accessorAnimationSamplerOutputNonNormalizedQuaternion","$get$DataError_accessorAnimationSamplerOutputNonNormalizedQuaternion",(function(){return F.DataError$_("ACCESSOR_ANIMATION_SAMPLER_OUTPUT_NON_NORMALIZED_QUATERNION",new F.DataError_closure22,w.Severity_0)})),Z(K,"DataError_accessorNonClamped","$get$DataError_accessorNonClamped",(function(){return F.DataError$_("ACCESSOR_NON_CLAMPED",new F.DataError_closure28,w.Severity_0)})),Z(K,"DataError_accessorInvalidFloat","$get$DataError_accessorInvalidFloat",(function(){return F.DataError$_("ACCESSOR_INVALID_FLOAT",new F.DataError_closure21,w.Severity_0)})),Z(K,"DataError_accessorIndexOob","$get$DataError_accessorIndexOob",(function(){return F.DataError$_("ACCESSOR_INDEX_OOB",new F.DataError_closure27,w.Severity_0)})),Z(K,"DataError_accessorIndexTriangleDegenerate","$get$DataError_accessorIndexTriangleDegenerate",(function(){return F.DataError$_("ACCESSOR_INDEX_TRIANGLE_DEGENERATE",new F.DataError_closure25,w.Severity_2)})),Z(K,"DataError_accessorIndexPrimitiveRestart","$get$DataError_accessorIndexPrimitiveRestart",(function(){return F.DataError$_("ACCESSOR_INDEX_PRIMITIVE_RESTART",new F.DataError_closure26,w.Severity_0)})),Z(K,"DataError_accessorAnimationInputNegative","$get$DataError_accessorAnimationInputNegative",(function(){return F.DataError$_("ACCESSOR_ANIMATION_INPUT_NEGATIVE",new F.DataError_closure24,w.Severity_0)})),Z(K,"DataError_accessorAnimationInputNonIncreasing","$get$DataError_accessorAnimationInputNonIncreasing",(function(){return F.DataError$_("ACCESSOR_ANIMATION_INPUT_NON_INCREASING",new F.DataError_closure23,w.Severity_0)})),Z(K,"DataError_accessorSparseIndicesNonIncreasing","$get$DataError_accessorSparseIndicesNonIncreasing",(function(){return F.DataError$_("ACCESSOR_SPARSE_INDICES_NON_INCREASING",new F.DataError_closure5,w.Severity_0)})),Z(K,"DataError_accessorSparseIndexOob","$get$DataError_accessorSparseIndexOob",(function(){return F.DataError$_("ACCESSOR_SPARSE_INDEX_OOB",new F.DataError_closure4,w.Severity_0)})),Z(K,"DataError_accessorInvalidInverseBindMatrix","$get$DataError_accessorInvalidInverseBindMatrix",(function(){return F.DataError$_("ACCESSOR_INVALID_IBM",new F.DataError_closure31,w.Severity_0)})),Z(K,"DataError_imageDataInvalid","$get$DataError_imageDataInvalid",(function(){return F.DataError$_("IMAGE_DATA_INVALID",new F.DataError_closure9,w.Severity_0)})),Z(K,"DataError_imageMimeTypeInvalid","$get$DataError_imageMimeTypeInvalid",(function(){return F.DataError$_("IMAGE_MIME_TYPE_INVALID",new F.DataError_closure8,w.Severity_0)})),Z(K,"DataError_imageUnexpectedEos","$get$DataError_imageUnexpectedEos",(function(){return F.DataError$_("IMAGE_UNEXPECTED_EOS",new F.DataError_closure10,w.Severity_0)})),Z(K,"DataError_imageUnrecognizedFormat","$get$DataError_imageUnrecognizedFormat",(function(){return F.DataError$_("IMAGE_UNRECOGNIZED_FORMAT",new F.DataError_closure11,w.Severity_1)})),Z(K,"DataError_imageNonEnabledMimeType","$get$DataError_imageNonEnabledMimeType",(function(){return F.DataError$_("IMAGE_NON_ENABLED_MIME_TYPE",new F.DataError_closure12,w.Severity_0)})),Z(K,"DataError_imageNonPowerOfTwoDimensions","$get$DataError_imageNonPowerOfTwoDimensions",(function(){return F.DataError$_("IMAGE_NPOT_DIMENSIONS",new F.DataError_closure7,w.Severity_2)})),Z(K,"DataError_imageFeaturesUnsupported","$get$DataError_imageFeaturesUnsupported",(function(){return F.DataError$_("IMAGE_FEATURES_UNSUPPORTED",new F.DataError_closure6,w.Severity_1)})),Z(K,"DataError_dataUriGlb","$get$DataError_dataUriGlb",(function(){return F.DataError$_("DATA_URI_GLB",new F.DataError_closure15,w.Severity_2)})),Z(K,"DataError_accessorJointsIndexOob","$get$DataError_accessorJointsIndexOob",(function(){return F.DataError$_("ACCESSOR_JOINTS_INDEX_OOB",new F.DataError_closure3,w.Severity_0)})),Z(K,"DataError_accessorJointsIndexDuplicate","$get$DataError_accessorJointsIndexDuplicate",(function(){return F.DataError$_("ACCESSOR_JOINTS_INDEX_DUPLICATE",new F.DataError_closure2,w.Severity_0)})),Z(K,"DataError_accessorWeightsNegative","$get$DataError_accessorWeightsNegative",(function(){return F.DataError$_("ACCESSOR_WEIGHTS_NEGATIVE",new F.DataError_closure1,w.Severity_0)})),Z(K,"DataError_accessorWeightsNonNormalized","$get$DataError_accessorWeightsNonNormalized",(function(){return F.DataError$_("ACCESSOR_WEIGHTS_NON_NORMALIZED",new F.DataError_closure,w.Severity_0)})),Z(K,"DataError_accessorJointsUsedZeroWeight","$get$DataError_accessorJointsUsedZeroWeight",(function(){return F.DataError$_("ACCESSOR_JOINTS_USED_ZERO_WEIGHT",new F.DataError_closure0,w.Severity_1)})),Z(K,"IoError_ioError","$get$IoError_ioError",(function(){return new F.IoError(w.Severity_0,"IO_ERROR",new F.IoError_closure)})),Z(K,"SchemaError_arrayLengthNotInList","$get$SchemaError_arrayLengthNotInList",(function(){return F.SchemaError$_("ARRAY_LENGTH_NOT_IN_LIST",new F.SchemaError_closure3,w.Severity_0)})),Z(K,"SchemaError_arrayTypeMismatch","$get$SchemaError_arrayTypeMismatch",(function(){return F.SchemaError$_("ARRAY_TYPE_MISMATCH",new F.SchemaError_closure4,w.Severity_0)})),Z(K,"SchemaError_arrayDuplicateElements","$get$SchemaError_arrayDuplicateElements",(function(){return F.SchemaError$_("DUPLICATE_ELEMENTS",new F.SchemaError_closure9,w.Severity_0)})),Z(K,"SchemaError_invalidIndex","$get$SchemaError_invalidIndex",(function(){return F.SchemaError$_("INVALID_INDEX",new F.SchemaError_closure7,w.Severity_0)})),Z(K,"SchemaError_invalidJson","$get$SchemaError_invalidJson",(function(){return F.SchemaError$_("INVALID_JSON",new F.SchemaError_closure14,w.Severity_0)})),Z(K,"SchemaError_invalidUri","$get$SchemaError_invalidUri",(function(){return F.SchemaError$_("INVALID_URI",new F.SchemaError_closure10,w.Severity_0)})),Z(K,"SchemaError_emptyEntity","$get$SchemaError_emptyEntity",(function(){return F.SchemaError$_("EMPTY_ENTITY",new F.SchemaError_closure5,w.Severity_0)})),Z(K,"SchemaError_oneOfMismatch","$get$SchemaError_oneOfMismatch",(function(){return F.SchemaError$_("ONE_OF_MISMATCH",new F.SchemaError_closure11,w.Severity_0)})),Z(K,"SchemaError_patternMismatch","$get$SchemaError_patternMismatch",(function(){return F.SchemaError$_("PATTERN_MISMATCH",new F.SchemaError_closure8,w.Severity_0)})),Z(K,"SchemaError_typeMismatch","$get$SchemaError_typeMismatch",(function(){return F.SchemaError$_("TYPE_MISMATCH",new F.SchemaError_closure,w.Severity_0)})),Z(K,"SchemaError_valueNotInList","$get$SchemaError_valueNotInList",(function(){return F.SchemaError$_("VALUE_NOT_IN_LIST",new F.SchemaError_closure2,w.Severity_1)})),Z(K,"SchemaError_valueNotInRange","$get$SchemaError_valueNotInRange",(function(){return F.SchemaError$_("VALUE_NOT_IN_RANGE",new F.SchemaError_closure1,w.Severity_0)})),Z(K,"SchemaError_valueMultipleOf","$get$SchemaError_valueMultipleOf",(function(){return F.SchemaError$_("VALUE_MULTIPLE_OF",new F.SchemaError_closure12,w.Severity_0)})),Z(K,"SchemaError_undefinedProperty","$get$SchemaError_undefinedProperty",(function(){return F.SchemaError$_("UNDEFINED_PROPERTY",new F.SchemaError_closure0,w.Severity_0)})),Z(K,"SchemaError_unexpectedProperty","$get$SchemaError_unexpectedProperty",(function(){return F.SchemaError$_("UNEXPECTED_PROPERTY",new F.SchemaError_closure6,w.Severity_1)})),Z(K,"SchemaError_unsatisfiedDependency","$get$SchemaError_unsatisfiedDependency",(function(){return F.SchemaError$_("UNSATISFIED_DEPENDENCY",new F.SchemaError_closure13,w.Severity_0)})),Z(K,"SemanticError_unknownAssetMajorVersion","$get$SemanticError_unknownAssetMajorVersion",(function(){return F.SemanticError$_("UNKNOWN_ASSET_MAJOR_VERSION",new F.SemanticError_closure38,w.Severity_0)})),Z(K,"SemanticError_unknownAssetMinorVersion","$get$SemanticError_unknownAssetMinorVersion",(function(){return F.SemanticError$_("UNKNOWN_ASSET_MINOR_VERSION",new F.SemanticError_closure37,w.Severity_1)})),Z(K,"SemanticError_minVersionGreaterThanVersion","$get$SemanticError_minVersionGreaterThanVersion",(function(){return F.SemanticError$_("ASSET_MIN_VERSION_GREATER_THAN_VERSION",new F.SemanticError_closure28,w.Severity_1)})),Z(K,"SemanticError_invalidGlValue","$get$SemanticError_invalidGlValue",(function(){return F.SemanticError$_("INVALID_GL_VALUE",new F.SemanticError_closure26,w.Severity_0)})),Z(K,"SemanticError_integerWrittenAsFloat","$get$SemanticError_integerWrittenAsFloat",(function(){return F.SemanticError$_("INTEGER_WRITTEN_AS_FLOAT",new F.SemanticError_closure27,w.Severity_1)})),Z(K,"SemanticError_accessorNormalizedInvalid","$get$SemanticError_accessorNormalizedInvalid",(function(){return F.SemanticError$_("ACCESSOR_NORMALIZED_INVALID",new F.SemanticError_closure25,w.Severity_0)})),Z(K,"SemanticError_accessorOffsetAlignment","$get$SemanticError_accessorOffsetAlignment",(function(){return F.SemanticError$_("ACCESSOR_OFFSET_ALIGNMENT",new F.SemanticError_closure23,w.Severity_0)})),Z(K,"SemanticError_accessorMatrixAlignment","$get$SemanticError_accessorMatrixAlignment",(function(){return F.SemanticError$_("ACCESSOR_MATRIX_ALIGNMENT",new F.SemanticError_closure24,w.Severity_0)})),Z(K,"SemanticError_accessorSparseCountOutOfRange","$get$SemanticError_accessorSparseCountOutOfRange",(function(){return F.SemanticError$_("ACCESSOR_SPARSE_COUNT_OUT_OF_RANGE",new F.SemanticError_closure33,w.Severity_0)})),Z(K,"SemanticError_animationChannelTargetNodeSkin","$get$SemanticError_animationChannelTargetNodeSkin",(function(){return F.SemanticError$_("ANIMATION_CHANNEL_TARGET_NODE_SKIN",new F.SemanticError_closure34,w.Severity_1)})),Z(K,"SemanticError_bufferDataUriMimeTypeInvalid","$get$SemanticError_bufferDataUriMimeTypeInvalid",(function(){return F.SemanticError$_("BUFFER_DATA_URI_MIME_TYPE_INVALID",new F.SemanticError_closure22,w.Severity_0)})),Z(K,"SemanticError_bufferViewTooBigByteStride","$get$SemanticError_bufferViewTooBigByteStride",(function(){return F.SemanticError$_("BUFFER_VIEW_TOO_BIG_BYTE_STRIDE",new F.SemanticError_closure21,w.Severity_0)})),Z(K,"SemanticError_bufferViewInvalidByteStride","$get$SemanticError_bufferViewInvalidByteStride",(function(){return F.SemanticError$_("BUFFER_VIEW_INVALID_BYTE_STRIDE",new F.SemanticError_closure20,w.Severity_0)})),Z(K,"SemanticError_cameraXmagYmagZero","$get$SemanticError_cameraXmagYmagZero",(function(){return F.SemanticError$_("CAMERA_XMAG_YMAG_ZERO",new F.SemanticError_closure19,w.Severity_1)})),Z(K,"SemanticError_cameraZfarLequalZnear","$get$SemanticError_cameraZfarLequalZnear",(function(){return F.SemanticError$_("CAMERA_ZFAR_LEQUAL_ZNEAR",new F.SemanticError_closure18,w.Severity_0)})),Z(K,"SemanticError_materialAlphaCutoffInvalidMode","$get$SemanticError_materialAlphaCutoffInvalidMode",(function(){return F.SemanticError$_("MATERIAL_ALPHA_CUTOFF_INVALID_MODE",new F.SemanticError_closure16,w.Severity_1)})),Z(K,"SemanticError_meshPrimitiveInvalidAttribute","$get$SemanticError_meshPrimitiveInvalidAttribute",(function(){return F.SemanticError$_("MESH_PRIMITIVE_INVALID_ATTRIBUTE",new F.SemanticError_closure10,w.Severity_0)})),Z(K,"SemanticError_meshPrimitivesUnequalTargetsCount","$get$SemanticError_meshPrimitivesUnequalTargetsCount",(function(){return F.SemanticError$_("MESH_PRIMITIVES_UNEQUAL_TARGETS_COUNT",new F.SemanticError_closure9,w.Severity_0)})),Z(K,"SemanticError_meshPrimitivesUnequalJointsCount","$get$SemanticError_meshPrimitivesUnequalJointsCount",(function(){return F.SemanticError$_("MESH_PRIMITIVES_UNEQUAL_JOINTS_COUNT",new F.SemanticError_closure8,w.Severity_1)})),Z(K,"SemanticError_meshPrimitiveNoPosition","$get$SemanticError_meshPrimitiveNoPosition",(function(){return F.SemanticError$_("MESH_PRIMITIVE_NO_POSITION",new F.SemanticError_closure15,w.Severity_1)})),Z(K,"SemanticError_meshPrimitiveIndexedSemanticContinuity","$get$SemanticError_meshPrimitiveIndexedSemanticContinuity",(function(){return F.SemanticError$_("MESH_PRIMITIVE_INDEXED_SEMANTIC_CONTINUITY",new F.SemanticError_closure12,w.Severity_0)})),Z(K,"SemanticError_meshPrimitiveTangentWithoutNormal","$get$SemanticError_meshPrimitiveTangentWithoutNormal",(function(){return F.SemanticError$_("MESH_PRIMITIVE_TANGENT_WITHOUT_NORMAL",new F.SemanticError_closure14,w.Severity_1)})),Z(K,"SemanticError_meshPrimitiveJointsWeightsMismatch","$get$SemanticError_meshPrimitiveJointsWeightsMismatch",(function(){return F.SemanticError$_("MESH_PRIMITIVE_JOINTS_WEIGHTS_MISMATCH",new F.SemanticError_closure11,w.Severity_0)})),Z(K,"SemanticError_meshPrimitiveTangentPoints","$get$SemanticError_meshPrimitiveTangentPoints",(function(){return F.SemanticError$_("MESH_PRIMITIVE_TANGENT_POINTS",new F.SemanticError_closure13,w.Severity_1)})),Z(K,"SemanticError_meshInvalidWeightsCount","$get$SemanticError_meshInvalidWeightsCount",(function(){return F.SemanticError$_("MESH_INVALID_WEIGHTS_COUNT",new F.SemanticError_closure7,w.Severity_0)})),Z(K,"SemanticError_nodeMatrixTrs","$get$SemanticError_nodeMatrixTrs",(function(){return F.SemanticError$_("NODE_MATRIX_TRS",new F.SemanticError_closure5,w.Severity_0)})),Z(K,"SemanticError_nodeDefaultMatrix","$get$SemanticError_nodeDefaultMatrix",(function(){return F.SemanticError$_("NODE_MATRIX_DEFAULT",new F.SemanticError_closure4,w.Severity_2)})),Z(K,"SemanticError_nodeNonTrsMatrix","$get$SemanticError_nodeNonTrsMatrix",(function(){return F.SemanticError$_("NODE_MATRIX_NON_TRS",new F.SemanticError_closure3,w.Severity_0)})),Z(K,"SemanticError_rotationNonUnit","$get$SemanticError_rotationNonUnit",(function(){return F.SemanticError$_("ROTATION_NON_UNIT",new F.SemanticError_closure6,w.Severity_0)})),Z(K,"SemanticError_unusedExtensionRequired","$get$SemanticError_unusedExtensionRequired",(function(){return F.SemanticError$_("UNUSED_EXTENSION_REQUIRED",new F.SemanticError_closure39,w.Severity_0)})),Z(K,"SemanticError_nonRequiredExtension","$get$SemanticError_nonRequiredExtension",(function(){return F.SemanticError$_("NON_REQUIRED_EXTENSION",new F.SemanticError_closure40,w.Severity_0)})),Z(K,"SemanticError_unreservedExtensionPrefix","$get$SemanticError_unreservedExtensionPrefix",(function(){return F.SemanticError$_("UNRESERVED_EXTENSION_PREFIX",new F.SemanticError_closure41,w.Severity_1)})),Z(K,"SemanticError_invalidExtensionNameFormat","$get$SemanticError_invalidExtensionNameFormat",(function(){return F.SemanticError$_("INVALID_EXTENSION_NAME_FORMAT",new F.SemanticError_closure42,w.Severity_1)})),Z(K,"SemanticError_nodeEmpty","$get$SemanticError_nodeEmpty",(function(){return F.SemanticError$_("NODE_EMPTY",new F.SemanticError_closure32,w.Severity_2)})),Z(K,"SemanticError_nodeSkinnedMeshNonRoot","$get$SemanticError_nodeSkinnedMeshNonRoot",(function(){return F.SemanticError$_("NODE_SKINNED_MESH_NON_ROOT",new F.SemanticError_closure31,w.Severity_1)})),Z(K,"SemanticError_nodeSkinnedMeshLocalTransforms","$get$SemanticError_nodeSkinnedMeshLocalTransforms",(function(){return F.SemanticError$_("NODE_SKINNED_MESH_LOCAL_TRANSFORMS",new F.SemanticError_closure30,w.Severity_1)})),Z(K,"SemanticError_nodeSkinNoScene","$get$SemanticError_nodeSkinNoScene",(function(){return F.SemanticError$_("NODE_SKIN_NO_SCENE",new F.SemanticError_closure29,w.Severity_0)})),Z(K,"SemanticError_skinNoCommonRoot","$get$SemanticError_skinNoCommonRoot",(function(){return F.SemanticError$_("SKIN_NO_COMMON_ROOT",new F.SemanticError_closure36,w.Severity_0)})),Z(K,"SemanticError_skinSkeletonInvalid","$get$SemanticError_skinSkeletonInvalid",(function(){return F.SemanticError$_("SKIN_SKELETON_INVALID",new F.SemanticError_closure35,w.Severity_0)})),Z(K,"SemanticError_nonRelativeUri","$get$SemanticError_nonRelativeUri",(function(){return F.SemanticError$_("NON_RELATIVE_URI",new F.SemanticError_closure17,w.Severity_1)})),Z(K,"SemanticError_multipleExtensions","$get$SemanticError_multipleExtensions",(function(){return F.SemanticError$_("MULTIPLE_EXTENSIONS",new F.SemanticError_closure0,w.Severity_1)})),Z(K,"SemanticError_nonObjectExtras","$get$SemanticError_nonObjectExtras",(function(){return F.SemanticError$_("NON_OBJECT_EXTRAS",new F.SemanticError_closure,w.Severity_2)})),Z(K,"SemanticError_extraProperty","$get$SemanticError_extraProperty",(function(){return F.SemanticError$_("EXTRA_PROPERTY",new F.SemanticError_closure2,w.Severity_2)})),Z(K,"SemanticError_khrLightsPunctualLightSpotAngles","$get$SemanticError_khrLightsPunctualLightSpotAngles",(function(){return F.SemanticError$_("KHR_LIGHTS_PUNCTUAL_LIGHT_SPOT_ANGLES",new F.SemanticError_closure1,w.Severity_0)})),Z(K,"LinkError_accessorTotalOffsetAlignment","$get$LinkError_accessorTotalOffsetAlignment",(function(){return F.LinkError$_("ACCESSOR_TOTAL_OFFSET_ALIGNMENT",new F.LinkError_closure4,w.Severity_0)})),Z(K,"LinkError_accessorSmallStride","$get$LinkError_accessorSmallStride",(function(){return F.LinkError$_("ACCESSOR_SMALL_BYTESTRIDE",new F.LinkError_closure8,w.Severity_0)})),Z(K,"LinkError_accessorTooLong","$get$LinkError_accessorTooLong",(function(){return F.LinkError$_("ACCESSOR_TOO_LONG",new F.LinkError_closure3,w.Severity_0)})),Z(K,"LinkError_accessorUsageOverride","$get$LinkError_accessorUsageOverride",(function(){return F.LinkError$_("ACCESSOR_USAGE_OVERRIDE",new F.LinkError_closure17,w.Severity_0)})),Z(K,"LinkError_animationDuplicateTargets","$get$LinkError_animationDuplicateTargets",(function(){return F.LinkError$_("ANIMATION_DUPLICATE_TARGETS",new F.LinkError_closure9,w.Severity_0)})),Z(K,"LinkError_animationChannelTargetNodeMatrix","$get$LinkError_animationChannelTargetNodeMatrix",(function(){return F.LinkError$_("ANIMATION_CHANNEL_TARGET_NODE_MATRIX",new F.LinkError_closure13,w.Severity_0)})),Z(K,"LinkError_animationChannelTargetNodeWeightsNoMorphs","$get$LinkError_animationChannelTargetNodeWeightsNoMorphs",(function(){return F.LinkError$_("ANIMATION_CHANNEL_TARGET_NODE_WEIGHTS_NO_MORPHS",new F.LinkError_closure12,w.Severity_0)})),Z(K,"LinkError_animationSamplerInputAccessorWithoutBounds","$get$LinkError_animationSamplerInputAccessorWithoutBounds",(function(){return F.LinkError$_("ANIMATION_SAMPLER_INPUT_ACCESSOR_WITHOUT_BOUNDS",new F.LinkError_closure15,w.Severity_0)})),Z(K,"LinkError_animationSamplerInputAccessorInvalidFormat","$get$LinkError_animationSamplerInputAccessorInvalidFormat",(function(){return F.LinkError$_("ANIMATION_SAMPLER_INPUT_ACCESSOR_INVALID_FORMAT",new F.LinkError_closure16,w.Severity_0)})),Z(K,"LinkError_animationSamplerOutputAccessorInvalidFormat","$get$LinkError_animationSamplerOutputAccessorInvalidFormat",(function(){return F.LinkError$_("ANIMATION_SAMPLER_OUTPUT_ACCESSOR_INVALID_FORMAT",new F.LinkError_closure11,w.Severity_0)})),Z(K,"LinkError_animationSamplerInputAccessorTooFewElements","$get$LinkError_animationSamplerInputAccessorTooFewElements",(function(){return F.LinkError$_("ANIMATION_SAMPLER_INPUT_ACCESSOR_TOO_FEW_ELEMENTS",new F.LinkError_closure14,w.Severity_0)})),Z(K,"LinkError_animationSamplerOutputAccessorInvalidCount","$get$LinkError_animationSamplerOutputAccessorInvalidCount",(function(){return F.LinkError$_("ANIMATION_SAMPLER_OUTPUT_ACCESSOR_INVALID_COUNT",new F.LinkError_closure10,w.Severity_0)})),Z(K,"LinkError_bufferMissingGlbData","$get$LinkError_bufferMissingGlbData",(function(){return F.LinkError$_("BUFFER_MISSING_GLB_DATA",new F.LinkError_closure2,w.Severity_0)})),Z(K,"LinkError_bufferViewTooLong","$get$LinkError_bufferViewTooLong",(function(){return F.LinkError$_("BUFFER_VIEW_TOO_LONG",new F.LinkError_closure18,w.Severity_0)})),Z(K,"LinkError_bufferViewTargetOverride","$get$LinkError_bufferViewTargetOverride",(function(){return F.LinkError$_("BUFFER_VIEW_TARGET_OVERRIDE",new F.LinkError_closure7,w.Severity_0)})),Z(K,"LinkError_invalidIbmAccessorCount","$get$LinkError_invalidIbmAccessorCount",(function(){return F.LinkError$_("INVALID_IBM_ACCESSOR_COUNT",new F.LinkError_closure35,w.Severity_0)})),Z(K,"LinkError_meshPrimitiveAttributesAccessorInvalidFormat","$get$LinkError_meshPrimitiveAttributesAccessorInvalidFormat",(function(){return F.LinkError$_("MESH_PRIMITIVE_ATTRIBUTES_ACCESSOR_INVALID_FORMAT",new F.LinkError_closure21,w.Severity_0)})),Z(K,"LinkError_meshPrimitivePositionAccessorWithoutBounds","$get$LinkError_meshPrimitivePositionAccessorWithoutBounds",(function(){return F.LinkError$_("MESH_PRIMITIVE_POSITION_ACCESSOR_WITHOUT_BOUNDS",new F.LinkError_closure22,w.Severity_0)})),Z(K,"LinkError_meshPrimitiveAccessorWithoutByteStride","$get$LinkError_meshPrimitiveAccessorWithoutByteStride",(function(){return F.LinkError$_("MESH_PRIMITIVE_ACCESSOR_WITHOUT_BYTESTRIDE",new F.LinkError_closure19,w.Severity_0)})),Z(K,"LinkError_meshPrimitiveAccessorUnaligned","$get$LinkError_meshPrimitiveAccessorUnaligned",(function(){return F.LinkError$_("MESH_PRIMITIVE_ACCESSOR_UNALIGNED",new F.LinkError_closure20,w.Severity_0)})),Z(K,"LinkError_meshPrimitiveIndicesAccessorWithByteStride","$get$LinkError_meshPrimitiveIndicesAccessorWithByteStride",(function(){return F.LinkError$_("MESH_PRIMITIVE_INDICES_ACCESSOR_WITH_BYTESTRIDE",new F.LinkError_closure28,w.Severity_0)})),Z(K,"LinkError_meshPrimitiveIndicesAccessorInvalidFormat","$get$LinkError_meshPrimitiveIndicesAccessorInvalidFormat",(function(){return F.LinkError$_("MESH_PRIMITIVE_INDICES_ACCESSOR_INVALID_FORMAT",new F.LinkError_closure27,w.Severity_0)})),Z(K,"LinkError_meshPrimitiveIncompatibleMode","$get$LinkError_meshPrimitiveIncompatibleMode",(function(){return F.LinkError$_("MESH_PRIMITIVE_INCOMPATIBLE_MODE",new F.LinkError_closure26,w.Severity_1)})),Z(K,"LinkError_meshPrimitiveTooFewTexcoords","$get$LinkError_meshPrimitiveTooFewTexcoords",(function(){return F.LinkError$_("MESH_PRIMITIVE_TOO_FEW_TEXCOORDS",new F.LinkError_closure25,w.Severity_0)})),Z(K,"LinkError_meshPrimitiveUnequalAccessorsCount","$get$LinkError_meshPrimitiveUnequalAccessorsCount",(function(){return F.LinkError$_("MESH_PRIMITIVE_UNEQUAL_ACCESSOR_COUNT",new F.LinkError_closure29,w.Severity_0)})),Z(K,"LinkError_meshPrimitiveMorphTargetNoBaseAccessor","$get$LinkError_meshPrimitiveMorphTargetNoBaseAccessor",(function(){return F.LinkError$_("MESH_PRIMITIVE_MORPH_TARGET_NO_BASE_ACCESSOR",new F.LinkError_closure24,w.Severity_0)})),Z(K,"LinkError_meshPrimitiveMorphTargetInvalidAttributeCount","$get$LinkError_meshPrimitiveMorphTargetInvalidAttributeCount",(function(){return F.LinkError$_("MESH_PRIMITIVE_MORPH_TARGET_INVALID_ATTRIBUTE_COUNT",new F.LinkError_closure23,w.Severity_0)})),Z(K,"LinkError_nodeLoop","$get$LinkError_nodeLoop",(function(){return F.LinkError$_("NODE_LOOP",new F.LinkError_closure6,w.Severity_0)})),Z(K,"LinkError_nodeParentOverride","$get$LinkError_nodeParentOverride",(function(){return F.LinkError$_("NODE_PARENT_OVERRIDE",new F.LinkError_closure30,w.Severity_0)})),Z(K,"LinkError_nodeWeightsInvalid","$get$LinkError_nodeWeightsInvalid",(function(){return F.LinkError$_("NODE_WEIGHTS_INVALID",new F.LinkError_closure33,w.Severity_0)})),Z(K,"LinkError_nodeSkinWithNonSkinnedMesh","$get$LinkError_nodeSkinWithNonSkinnedMesh",(function(){return F.LinkError$_("NODE_SKIN_WITH_NON_SKINNED_MESH",new F.LinkError_closure32,w.Severity_0)})),Z(K,"LinkError_nodeSkinnedMeshWithoutSkin","$get$LinkError_nodeSkinnedMeshWithoutSkin",(function(){return F.LinkError$_("NODE_SKINNED_MESH_WITHOUT_SKIN",new F.LinkError_closure31,w.Severity_1)})),Z(K,"LinkError_sceneNonRootNode","$get$LinkError_sceneNonRootNode",(function(){return F.LinkError$_("SCENE_NON_ROOT_NODE",new F.LinkError_closure34,w.Severity_0)})),Z(K,"LinkError_skinIbmInvalidFormat","$get$LinkError_skinIbmInvalidFormat",(function(){return F.LinkError$_("SKIN_IBM_INVALID_FORMAT",new F.LinkError_closure36,w.Severity_0)})),Z(K,"LinkError_textureInvalidImageMimeType","$get$LinkError_textureInvalidImageMimeType",(function(){return F.LinkError$_("TEXTURE_INVALID_IMAGE_MIME_TYPE",new F.LinkError_closure1,w.Severity_0)})),Z(K,"LinkError_undeclaredExtension","$get$LinkError_undeclaredExtension",(function(){return F.LinkError$_("UNDECLARED_EXTENSION",new F.LinkError_closure0,w.Severity_0)})),Z(K,"LinkError_unexpectedExtensionObject","$get$LinkError_unexpectedExtensionObject",(function(){return F.LinkError$_("UNEXPECTED_EXTENSION_OBJECT",new F.LinkError_closure,w.Severity_0)})),Z(K,"LinkError_unresolvedReference","$get$LinkError_unresolvedReference",(function(){return F.LinkError$_("UNRESOLVED_REFERENCE",new F.LinkError_closure37,w.Severity_0)})),Z(K,"LinkError_unsupportedExtension","$get$LinkError_unsupportedExtension",(function(){return F.LinkError$_("UNSUPPORTED_EXTENSION",new F.LinkError_closure38,w.Severity_1)})),Z(K,"LinkError_unusedObject","$get$LinkError_unusedObject",(function(){return F.LinkError$_("UNUSED_OBJECT",new F.LinkError_closure5,w.Severity_2)})),Z(K,"GlbError_invalidMagic","$get$GlbError_invalidMagic",(function(){return F.GlbError$_("GLB_INVALID_MAGIC",new F.GlbError_closure12,w.Severity_0)})),Z(K,"GlbError_invalidVersion","$get$GlbError_invalidVersion",(function(){return F.GlbError$_("GLB_INVALID_VERSION",new F.GlbError_closure11,w.Severity_0)})),Z(K,"GlbError_lengthTooSmall","$get$GlbError_lengthTooSmall",(function(){return F.GlbError$_("GLB_LENGTH_TOO_SMALL",new F.GlbError_closure10,w.Severity_0)})),Z(K,"GlbError_chunkLengthUnaligned","$get$GlbError_chunkLengthUnaligned",(function(){return F.GlbError$_("GLB_CHUNK_LENGTH_UNALIGNED",new F.GlbError_closure9,w.Severity_0)})),Z(K,"GlbError_lengthMismatch","$get$GlbError_lengthMismatch",(function(){return F.GlbError$_("GLB_LENGTH_MISMATCH",new F.GlbError_closure0,w.Severity_0)})),Z(K,"GlbError_chunkTooBig","$get$GlbError_chunkTooBig",(function(){return F.GlbError$_("GLB_CHUNK_TOO_BIG",new F.GlbError_closure8,w.Severity_0)})),Z(K,"GlbError_emptyChunk","$get$GlbError_emptyChunk",(function(){return F.GlbError$_("GLB_EMPTY_CHUNK",new F.GlbError_closure4,w.Severity_0)})),Z(K,"GlbError_duplicateChunk","$get$GlbError_duplicateChunk",(function(){return F.GlbError$_("GLB_DUPLICATE_CHUNK",new F.GlbError_closure5,w.Severity_0)})),Z(K,"GlbError_unexpectedEndOfChunkHeader","$get$GlbError_unexpectedEndOfChunkHeader",(function(){return F.GlbError$_("GLB_UNEXPECTED_END_OF_CHUNK_HEADER",new F.GlbError_closure1,w.Severity_0)})),Z(K,"GlbError_unexpectedEndOfChunkData","$get$GlbError_unexpectedEndOfChunkData",(function(){return F.GlbError$_("GLB_UNEXPECTED_END_OF_CHUNK_DATA",new F.GlbError_closure,w.Severity_0)})),Z(K,"GlbError_unexpectedEndOfHeader","$get$GlbError_unexpectedEndOfHeader",(function(){return F.GlbError$_("GLB_UNEXPECTED_END_OF_HEADER",new F.GlbError_closure2,w.Severity_0)})),Z(K,"GlbError_unexpectedFirstChunk","$get$GlbError_unexpectedFirstChunk",(function(){return F.GlbError$_("GLB_UNEXPECTED_FIRST_CHUNK",new F.GlbError_closure7,w.Severity_0)})),Z(K,"GlbError_unexpectedBinChunk","$get$GlbError_unexpectedBinChunk",(function(){return F.GlbError$_("GLB_UNEXPECTED_BIN_CHUNK",new F.GlbError_closure6,w.Severity_0)})),Z(K,"GlbError_unknownChunkType","$get$GlbError_unknownChunkType",(function(){return F.GlbError$_("GLB_UNKNOWN_CHUNK_TYPE",new F.GlbError_closure3,w.Severity_1)})),Z(K,"_float","$get$_float",(function(){return E.NativeFloat32List_NativeFloat32List(1)})),Z(K,"_matrix","$get$_matrix",(function(){return O.Matrix4$zero()})),Z(K,"_translation","$get$_translation",(function(){return O.Vector3$zero()})),Z(K,"_rotation","$get$_rotation",(function(){var e=O.Quaternion$_();return e._qStorage[3]=1,e})),Z(K,"_scale","$get$_scale",(function(){return O.Vector3$zero()})),function(){var e=function(e){var t={};return t[e]=1,Object.keys(S.convertToFastObject(t))[0]};Q.getIsolateTag=function(t){return e("___dart_"+t+Q.isolateTag)};for(var t=Object.___dart_isolate_tags_||(Object.___dart_isolate_tags_=Object.create(null)),n=0;;n++){var r=e("_ZxYxX_"+n+"_");if(!(r in t)){t[r]=1,Q.isolateTag=r;break}}Q.dispatchPropertyName=Q.getIsolateTag("dispatch_record")}(),S.setOrUpdateInterceptorsByTag({ArrayBuffer:T.Interceptor,ArrayBufferView:E.NativeTypedData,DataView:E.NativeByteData,Float32Array:E.NativeFloat32List,Float64Array:E.NativeFloat64List,Int16Array:E.NativeInt16List,Int32Array:E.NativeInt32List,Int8Array:E.NativeInt8List,Uint16Array:E.NativeUint16List,Uint32Array:E.NativeUint32List,Uint8ClampedArray:E.NativeUint8ClampedList,CanvasPixelArray:E.NativeUint8ClampedList,Uint8Array:E.NativeUint8List}),S.setOrUpdateLeafTags({ArrayBuffer:!0,ArrayBufferView:!1,DataView:!0,Float32Array:!0,Float64Array:!0,Int16Array:!0,Int32Array:!0,Int8Array:!0,Uint16Array:!0,Uint32Array:!0,Uint8ClampedArray:!0,CanvasPixelArray:!0,Uint8Array:!1}),E.NativeTypedArray.$nativeSuperclassTag="ArrayBufferView",E._NativeTypedArrayOfDouble_NativeTypedArray_ListMixin.$nativeSuperclassTag="ArrayBufferView",E._NativeTypedArrayOfDouble_NativeTypedArray_ListMixin_FixedLengthListMixin.$nativeSuperclassTag="ArrayBufferView",E.NativeTypedArrayOfDouble.$nativeSuperclassTag="ArrayBufferView",E._NativeTypedArrayOfInt_NativeTypedArray_ListMixin.$nativeSuperclassTag="ArrayBufferView",E._NativeTypedArrayOfInt_NativeTypedArray_ListMixin_FixedLengthListMixin.$nativeSuperclassTag="ArrayBufferView",E.NativeTypedArrayOfInt.$nativeSuperclassTag="ArrayBufferView",Function.prototype.call$1=function(e){return this(e)},Function.prototype.call$0=function(){return this()},Function.prototype.call$2=function(e,t){return this(e,t)},Function.prototype.call$3=function(e,t,n){return this(e,t,n)},Function.prototype.call$4=function(e,t,n,r){return this(e,t,n,r)},Function.prototype.call$1$1=function(e){return this(e)},Function.prototype.call$1$0=function(){return this()},Function.prototype.call$1$2=function(e,t){return this(e,t)},Function.prototype.call$2$0=function(){return this()},function(e){for(var t=0;t<e.length;++t)c(e[t])}(W),c(K),function(e){if("undefined"!=typeof document)if(void 0===document.currentScript)for(var t=document.scripts,n=0;n<t.length;++n)t[n].addEventListener("load",r,!1);else e(document.currentScript);else e(null);function r(n){for(var i=0;i<t.length;++i)t[i].removeEventListener("load",r,!1);e(n.target)}}((function(e){Q.currentScript=e,"function"==typeof dartMainRunner?dartMainRunner(A.main,[]):A.main([])}))}()}).call(this,n(38),"/index.js")},function(e,t,n){e.exports=n.p+"assets/images/dot-75db99b125fe4e9afbe58696320bea73.png"},function(e,t,n){e.exports=n.p+"assets/images/default-7e4cf420b4b831bd5b1bfdc51baf508a.png"},function(e,t,n){e.exports=n.p+"assets/images/lmb-e660a57a13eb0824cb256144eb51e0f4.svg"},function(e,t,n){e.exports=n.p+"assets/images/rmb-c4e5ad68dffa357f82b3b55e6d915245.svg"},function(e,t,n){e.exports=n.p+"assets/images/wasd-f95ac5ab7fd5e31bde6e7c3ad422b791.svg"},function(e,t,n){e.exports=n.p+"assets/templates/tutorial-5238155fcba54fea06d06d9c76249258.spoke"},,,,,,,,,function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(0),i=n(439);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=0,l=Object(r.memo)((function(e){var t=e.children,n=o(function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=t;o[c]||(o[c]=Object(i.b)(e,t,n,r));return o[c]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(a(e,["children"])),2),l=n[0],h=n[1];return r.useEffect((function(){return h&&s++,function(){h&&(0===--s&&(u()[c]=null))}}),[]),r.createElement(i.a.Provider,{value:l},t)}));l.displayName="DndProvider";var c=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");function u(){return void 0!==e?e:window}}).call(this,n(38))},,function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"FILE",(function(){return P})),n.d(r,"URL",(function(){return L})),n.d(r,"TEXT",(function(){return k}));var i={};n.r(i),n.d(i,"scaleBand",(function(){return fy})),n.d(i,"scalePoint",(function(){return gy})),n.d(i,"scaleIdentity",(function(){return j_})),n.d(i,"scaleLinear",(function(){return D_})),n.d(i,"scaleLog",(function(){return W_})),n.d(i,"scaleSymlog",(function(){return X_})),n.d(i,"scaleOrdinal",(function(){return py})),n.d(i,"scaleImplicit",(function(){return dy})),n.d(i,"scalePow",(function(){return tb})),n.d(i,"scaleSqrt",(function(){return nb})),n.d(i,"scaleQuantile",(function(){return rb})),n.d(i,"scaleQuantize",(function(){return ib})),n.d(i,"scaleThreshold",(function(){return ob})),n.d(i,"scaleTime",(function(){return cS})),n.d(i,"scaleUtc",(function(){return gS})),n.d(i,"scaleSequential",(function(){return _S})),n.d(i,"scaleSequentialLog",(function(){return bS})),n.d(i,"scaleSequentialPow",(function(){return SS})),n.d(i,"scaleSequentialSqrt",(function(){return wS})),n.d(i,"scaleSequentialSymlog",(function(){return xS})),n.d(i,"scaleSequentialQuantile",(function(){return ES})),n.d(i,"scaleDiverging",(function(){return MS})),n.d(i,"scaleDivergingLog",(function(){return CS})),n.d(i,"scaleDivergingPow",(function(){return OS})),n.d(i,"scaleDivergingSqrt",(function(){return AS})),n.d(i,"scaleDivergingSymlog",(function(){return $S})),n.d(i,"tickFormat",(function(){return k_}));var o={};n.r(o),n.d(o,"linear",(function(){return tP})),n.d(o,"quadraticIn",(function(){return nP})),n.d(o,"quadraticOut",(function(){return rP})),n.d(o,"quadraticInOut",(function(){return iP})),n.d(o,"cubicIn",(function(){return oP})),n.d(o,"cubicOut",(function(){return aP})),n.d(o,"cubicInOut",(function(){return sP})),n.d(o,"quarticIn",(function(){return lP})),n.d(o,"quarticOut",(function(){return cP})),n.d(o,"quarticInOut",(function(){return uP})),n.d(o,"quinticIn",(function(){return hP})),n.d(o,"quinticOut",(function(){return dP})),n.d(o,"quinticInOut",(function(){return pP})),n.d(o,"sinusoidalIn",(function(){return fP})),n.d(o,"sinusoidalOut",(function(){return mP})),n.d(o,"sinusoidalInOut",(function(){return gP})),n.d(o,"exponentialIn",(function(){return vP})),n.d(o,"exponentialOut",(function(){return yP})),n.d(o,"exponentialInOut",(function(){return _P})),n.d(o,"circularIn",(function(){return bP})),n.d(o,"circularOut",(function(){return xP})),n.d(o,"circularInOut",(function(){return SP})),n.d(o,"elasticIn",(function(){return wP})),n.d(o,"elasticOut",(function(){return EP})),n.d(o,"elasticInOut",(function(){return TP})),n.d(o,"backIn",(function(){return MP})),n.d(o,"backOut",(function(){return CP})),n.d(o,"backInOut",(function(){return $P})),n.d(o,"bounceIn",(function(){return OP})),n.d(o,"bounceOut",(function(){return AP})),n.d(o,"bounceInOut",(function(){return IP}));var a=n(13),s=n.n(a),l=n(4),c=n.n(l),u=n(0),h=n.n(u),d=n(1),p=n.n(d),f=n(5),m=n(469),g=n.n(m),v=n(477),y=n(18),_=n(2),b=n(792);function x(e){var t=null;return function(){return null==t&&(t=e()),t}}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entered=[],this.isNodeInDocument=t}var t,n,r;return t=e,(n=[{key:"enter",value:function(e){var t=this,n=this.entered.length;return this.entered=function(e,t){var n=new Set,r=function(e){return n.add(e)};e.forEach(r),t.forEach(r);var i=[];return n.forEach((function(e){return i.push(e)})),i}(this.entered.filter((function(n){return t.isNodeInDocument(n)&&(!n.contains||n.contains(e))})),[e]),0===n&&this.entered.length>0}},{key:"leave",value:function(e){var t,n,r=this.entered.length;return this.entered=(t=this.entered.filter(this.isNodeInDocument),n=e,t.filter((function(e){return e!==n}))),r>0&&0===this.entered.length}},{key:"reset",value:function(){this.entered=[]}}])&&S(t.prototype,n),r&&S(t,r),e}(),E=x((function(){return/firefox/i.test(navigator.userAgent)})),T=x((function(){return Boolean(window.safari)}));function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=t.length,i=[],o=0;o<r;o++)i.push(o);i.sort((function(e,n){return t[e]<t[n]?-1:1}));for(var a,s,l=[],c=[],u=[],h=0;h<r-1;h++)a=t[h+1]-t[h],s=n[h+1]-n[h],c.push(a),l.push(s),u.push(s/a);for(var d=[u[0]],p=0;p<c.length-1;p++){var f=u[p],m=u[p+1];if(f*m<=0)d.push(0);else{a=c[p];var g=c[p+1],v=a+g;d.push(3*v/((v+g)/f+(v+a)/m))}}d.push(u[u.length-1]);for(var y,_=[],b=[],x=0;x<d.length-1;x++){y=u[x];var S=d[x],w=1/c[x],E=S+d[x+1]-y-y;_.push((y-S-E)*w),b.push(E*w*w)}this.xs=t,this.ys=n,this.c1s=d,this.c2s=_,this.c3s=b}var t,n,r;return t=e,(n=[{key:"interpolate",value:function(e){var t=this.xs,n=this.ys,r=this.c1s,i=this.c2s,o=this.c3s,a=t.length-1;if(e===t[a])return n[a];for(var s,l=0,c=o.length-1;l<=c;){var u=t[s=Math.floor(.5*(l+c))];if(u<e)l=s+1;else{if(!(u>e))return n[s];c=s-1}}var h=e-t[a=Math.max(0,c)],d=h*h;return n[a]+r[a]*h+i[a]*d+o[a]*h*d}}])&&M(t.prototype,n),r&&M(t,r),e}();function $(e){var t=1===e.nodeType?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}function O(e){return{x:e.clientX,y:e.clientY}}function A(e,t,n,r,i){var o,a,s="IMG"===(o=t).nodeName&&(E()||!document.documentElement.contains(o)),l=$(s?e:t),c={x:n.x-l.x,y:n.y-l.y},u=e.offsetWidth,h=e.offsetHeight,d=r.anchorX,p=r.anchorY,f=function(e,t,n,r){var i=e?t.width:n,o=e?t.height:r;return T()&&e&&(o/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:o}}(s,t,u,h),m=f.dragPreviewWidth,g=f.dragPreviewHeight,v=i.offsetX,y=i.offsetY,_=0===y||y;return{x:0===v||v?v:new C([0,.5,1],[c.x,c.x/u*m,c.x+m-u]).interpolate(d),y:_?y:(a=new C([0,.5,1],[c.y,c.y/h*g,c.y+g-h]).interpolate(p),T()&&s&&(a+=(window.devicePixelRatio-1)*g),a)}}var I,P="__NATIVE_FILE__",L="__NATIVE_URL__",k="__NATIVE_TEXT__";function R(e,t,n){var r=t.reduce((function(t,n){return t||e.getData(n)}),"");return null!=r?r:n}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=(D(I={},P,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items}},matchesTypes:["Files"]}),D(I,L,{exposeProperties:{urls:function(e,t){return R(e,t,"").split("\n")}},matchesTypes:["Url","text/uri-list"]}),D(I,k,{exposeProperties:{text:function(e,t){return R(e,t,"")}},matchesTypes:["Text","text/plain"]}),I);function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.item={},this.initializeExposedProperties()}var t,n,r;return t=e,(n=[{key:"initializeExposedProperties",value:function(){var e=this;Object.keys(this.config.exposeProperties).forEach((function(t){Object.defineProperty(e.item,t,{configurable:!0,enumerable:!0,get:function(){return console.warn("Browser doesn't allow reading \"".concat(t,'" until the drop event.')),null}})}))}},{key:"loadDataTransfer",value:function(e){var t=this;if(e){var n={};Object.keys(this.config.exposeProperties).forEach((function(r){n[r]={value:t.config.exposeProperties[r](e,t.config.matchesTypes),configurable:!0,enumerable:!0}})),Object.defineProperties(this.item,n)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}])&&N(t.prototype,n),r&&N(t,r),e}();function U(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(j).filter((function(e){return j[e].matchesTypes.some((function(e){return t.indexOf(e)>-1}))}))[0]||null}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalContext=t}var t,n,r;return t=e,(n=[{key:"window",get:function(){return this.globalContext?this.globalContext:"undefined"!=typeof window?window:void 0}},{key:"document",get:function(){if(this.window)return this.window.document}}])&&B(t.prototype,n),r&&B(t,r),e}();function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.getSourceClientOffset=function(e){return $(r.sourceNodes.get(e))},this.endDragNativeItem=function(){r.isDraggingNativeItem()&&(r.actions.endDrag(),r.registry.removeSource(r.currentNativeHandle),r.currentNativeHandle=null,r.currentNativeSource=null)},this.isNodeInDocument=function(e){return r.document&&r.document.body&&document.body.contains(e)},this.endDragIfSourceWasRemovedFromDOM=function(){var e=r.currentDragSourceNode;r.isNodeInDocument(e)||r.clearCurrentDragSourceNode()&&r.actions.endDrag()},this.handleTopDragStartCapture=function(){r.clearCurrentDragSourceNode(),r.dragStartSourceIds=[]},this.handleTopDragStart=function(e){if(!e.defaultPrevented){var t=r.dragStartSourceIds;r.dragStartSourceIds=null;var n=O(e);r.monitor.isDragging()&&r.actions.endDrag(),r.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:r.getSourceClientOffset,clientOffset:n});var i=e.dataTransfer,o=U(i);if(r.monitor.isDragging()){if(i&&"function"==typeof i.setDragImage){var a=r.monitor.getSourceId(),s=r.sourceNodes.get(a),l=r.sourcePreviewNodes.get(a)||s;if(l){var c=r.getCurrentSourcePreviewNodeOptions(),u=A(s,l,n,{anchorX:c.anchorX,anchorY:c.anchorY},{offsetX:c.offsetX,offsetY:c.offsetY});i.setDragImage(l,u.x,u.y)}}try{i.setData("application/json",{})}catch(e){}r.setCurrentDragSourceNode(e.target),r.getCurrentSourcePreviewNodeOptions().captureDraggingState?r.actions.publishDragSource():setTimeout((function(){return r.actions.publishDragSource()}),0)}else if(o)r.beginDragNativeItem(o);else{if(i&&!i.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}}},this.handleTopDragEndCapture=function(){r.clearCurrentDragSourceNode()&&r.actions.endDrag()},this.handleTopDragEnterCapture=function(e){if(r.dragEnterTargetIds=[],r.enterLeaveCounter.enter(e.target)&&!r.monitor.isDragging()){var t=e.dataTransfer,n=U(t);n&&r.beginDragNativeItem(n,t)}},this.handleTopDragEnter=function(e){var t=r.dragEnterTargetIds;(r.dragEnterTargetIds=[],r.monitor.isDragging())&&(r.altKeyPressed=e.altKey,E()||r.actions.hover(t,{clientOffset:O(e)}),t.some((function(e){return r.monitor.canDropOnTarget(e)}))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())))},this.handleTopDragOverCapture=function(){r.dragOverTargetIds=[]},this.handleTopDragOver=function(e){var t=r.dragOverTargetIds;if(r.dragOverTargetIds=[],!r.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));r.altKeyPressed=e.altKey,r.actions.hover(t||[],{clientOffset:O(e)}),(t||[]).some((function(e){return r.monitor.canDropOnTarget(e)}))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=r.getCurrentDropEffect())):r.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=function(e){r.isDraggingNativeItem()&&e.preventDefault(),r.enterLeaveCounter.leave(e.target)&&r.isDraggingNativeItem()&&r.endDragNativeItem()},this.handleTopDropCapture=function(e){r.dropTargetIds=[],e.preventDefault(),r.isDraggingNativeItem()&&r.currentNativeSource.loadDataTransfer(e.dataTransfer),r.enterLeaveCounter.reset()},this.handleTopDrop=function(e){var t=r.dropTargetIds;r.dropTargetIds=[],r.actions.hover(t,{clientOffset:O(e)}),r.actions.drop({dropEffect:r.getCurrentDropEffect()}),r.isDraggingNativeItem()?r.endDragNativeItem():r.endDragIfSourceWasRemovedFromDOM()},this.handleSelectStart=function(e){var t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new z(n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new w(this.isNodeInDocument)}var t,n,i;return t=e,(n=[{key:"setup",value:function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}}},{key:"teardown",value:function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))}},{key:"connectDragPreview",value:function(e,t,n){var r=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),function(){r.sourcePreviewNodes.delete(e),r.sourcePreviewNodeOptions.delete(e)}}},{key:"connectDragSource",value:function(e,t,n){var r=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);var i=function(t){return r.handleDragStart(t,e)},o=function(e){return r.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",i),t.addEventListener("selectstart",o),function(){r.sourceNodes.delete(e),r.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",i),t.removeEventListener("selectstart",o),t.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(e,t){var n=this,r=function(t){return n.handleDragEnter(t,e)},i=function(t){return n.handleDragOver(t,e)},o=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",r),t.addEventListener("dragover",i),t.addEventListener("drop",o),function(){t.removeEventListener("dragenter",r),t.removeEventListener("dragover",i),t.removeEventListener("drop",o)}}},{key:"addEventListeners",value:function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return G({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var e=this.monitor.getSourceId();return G({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}},{key:"isDraggingNativeItem",value:function(){var e=this.monitor.getItemType();return Object.keys(r).some((function(t){return r[t]===e}))}},{key:"beginDragNativeItem",value:function(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){var n=new F(j[e]);return n.loadDataTransfer(t),n}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout((function(){return t.window&&t.window.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}},{key:"clearCurrentDragSourceNode",value:function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0)}},{key:"handleDragStart",value:function(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}},{key:"handleDragEnter",value:function(e,t){this.dragEnterTargetIds.unshift(t)}},{key:"handleDragOver",value:function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}},{key:"handleDrop",value:function(e,t){this.dropTargetIds.unshift(t)}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}}])&&W(t.prototype,n),i&&W(t,i),e}(),J=function(e,t){return new q(e,t)},Y=n(25),X=n(9),K=n.n(X),Z=n(27),Q=n(69),ee=n.n(Q);class te extends u.Component{constructor(e){super(e),this.el=document.createElement("div")}componentDidMount(){document.body.appendChild(this.el)}componentWillUnmount(){try{this.el&&document.body.removeChild(this.el)}catch(e){console.warn("Error removing Portal element: "+e)}}render(){return Object(Q.createPortal)(this.props.children,this.el)}}c()(te,"propTypes",{children:p.a.node});var ne="top",re="top-left",ie="top-right",oe="bottom",ae="bottom-left",se="bottom-right",le="left",ce="right",ue=function(e,t){var n=e.width,r=e.height,i=t.left,o=t.top,a=Math.ceil(i),s=Math.ceil(o);return{width:n,height:r,left:a,top:s,right:a+n,bottom:s+r}},he=function(e){switch(e){case re:return ae;case ne:default:return oe;case ie:return se;case ae:return re;case oe:return ne;case se:return ie}},de=function(e){switch(e){case re:case ne:case ie:return!0;default:return!1}},pe=function(e){switch(e){case le:case ce:return!0;default:return!1}};function fe(e){var t=e.position,n=e.dimensions,r=e.targetRect,i=e.targetOffset,o=e.viewport,a=e.viewportOffset,s=void 0===a?8:a,l=function(e){var t=e.position,n=e.dimensions,r=e.targetRect,i=e.targetOffset,o=e.viewport,a=e.viewportOffset,s=void 0===a?8:a;if(pe(t)){var l=me({position:le,dimensions:n,targetRect:r,targetOffset:i}),c=me({position:ce,dimensions:n,targetRect:r,targetOffset:i}),u=function(e,t){return e.left>t}(l,s),h=function(e,t,n){return e.right<t.width-n}(c,o,s);if(t===le){if(u)return{position:t,rect:l};if(h)return{position:ce,rect:c}}if(t===ce){if(h)return{position:t,rect:c};if(u)return{position:le,rect:l}}var d=Math.abs(o.width-s-c.right),p=Math.abs(l.left-s);return d<p?{position:ce,rect:c}:{position:le,rect:l}}var f,m,g=de(t);g?(f=me({position:t,dimensions:n,targetRect:r,targetOffset:i}),m=me({position:he(t),dimensions:n,targetRect:r,targetOffset:i})):(f=me({position:he(t),dimensions:n,targetRect:r,targetOffset:i}),m=me({position:t,dimensions:n,targetRect:r,targetOffset:i}));var v=function(e,t){return e.top>t}(f,s),y=function(e,t,n){return e.bottom<t.height-n}(m,o,s);if(g){if(v)return{position:t,rect:f};if(y)return{position:he(t),rect:m}}if(!g){if(y)return{position:t,rect:m};if(v)return{position:he(t),rect:f}}var _=Math.abs(o.height-s-m.bottom),b=Math.abs(f.top-s);if(_<b)return{position:g?he(t):t,rect:m};return{position:g?t:he(t),rect:f}}({position:t,dimensions:n,targetRect:r,targetOffset:i,viewport:o,viewportOffset:s}),c=l.rect,u=l.position;if(c.left<s&&(c.right+=Math.ceil(Math.abs(c.left-s)),c.left=Math.ceil(s)),c.right>o.width-s){var h=Math.ceil(c.right-(o.width-s));c.left-=h,c.right-=h}if(c.top<s&&(c.top+=Math.ceil(Math.abs(c.top-s)),c.bottom=Math.ceil(s)),c.bottom>o.height-s){var d=Math.ceil(c.bottom-(o.height-s));c.top-=d,c.bottom-=d}return{rect:c,position:u,transformOrigin:function(e){var t=e.rect,n=e.position,r=e.dimensions,i=e.targetCenter,o=Math.round(i-t.top);if(n===le)return"".concat(r.width,"px ").concat(o,"px");if(n===ce)return"0px ".concat(o,"px");var a=Math.round(i-t.left);return de(n)?"".concat(a,"px ").concat(r.height,"px "):"".concat(a,"px 0px ")}({rect:c,position:u,dimensions:n,targetCenter:pe(t)?r.top+r.height/2:r.left+r.width/2})}}function me(e){var t=e.position,n=e.targetOffset,r=e.dimensions,i=e.targetRect,o=i.left+i.width/2-r.width/2,a=i.top-r.height-n,s=i.bottom+n,l=i.right-r.width,c=i.top+i.height/2-r.height/2;switch(t){case le:return ue(r,{left:i.left-r.width-n,top:c});case ce:return ue(r,{left:i.right+n,top:c});case ne:return ue(r,{left:o,top:a});case re:return ue(r,{left:i.left,top:a});case ie:return ue(r,{left:l,top:a});default:case oe:return ue(r,{left:o,top:s});case ae:return ue(r,{left:i.left,top:s});case se:return ue(r,{left:l,top:s})}}const ge=_.e.div.attrs(({transform:e,transformOrigin:t,opacity:n})=>({style:{transform:e,transformOrigin:t,opacity:n}})).withConfig({displayName:"Positioner__PositionerContainer",componentId:"sc-1u2o405-0"})(["position:fixed;top:0;left:0;"]);function ve(e){let{children:t,position:n,padding:r,getTargetRef:i}=e,o=K()(e,["children","position","padding","getTargetRef"]);const a=Object(u.useRef)(),[l,c]=Object(u.useState)({finalPosition:n,transform:"translate(0px,0px)",transformOrigin:"initial",opacity:0});Object(u.useEffect)(()=>{const e=()=>{const e=a.current.getBoundingClientRect(),t=i().current.getBoundingClientRect(),o=document.documentElement.clientHeight,s=document.documentElement.clientWidth,{rect:l,position:u,transformOrigin:h}=fe({position:n,targetRect:t,targetOffset:r,dimensions:{width:e.width,height:e.height},viewport:{width:s,height:o},viewportOffset:r});c({finalPosition:u,transformOrigin:h,transform:`translate(${l.left}px, ${l.top}px)`,opacity:1})};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[n,r,i,c]);const d=u.Children.map(t,e=>Object(u.cloneElement)(e,{position:l.finalPosition}));return h.a.createElement(ge,s()({},o,l,{ref:a}),d)}function ye(){const[e,t]=Object(u.useState)(!1),n=Object(u.useRef)(null),r=()=>t(!0),i=()=>t(!1);return Object(u.useEffect)(()=>{const e=n.current;if(e)return e.addEventListener("mouseenter",r),e.addEventListener("mouseleave",i),()=>{e.removeEventListener("mouseenter",r),e.removeEventListener("mouseleave",i)}},[n.current]),[n,e]}ve.propTypes={children:p.a.node,position:p.a.string,padding:p.a.number,getTargetRef:p.a.func},ve.defaultProps={padding:8,position:"bottom"};const _e=_.e.div.withConfig({displayName:"Tooltip__StyledTooltip",componentId:"v0r76r-0"})(["display:inherit;"]);function be(e){let{children:t,padding:n,position:r,renderContent:i,disabled:o}=e,a=K()(e,["children","padding","position","renderContent","disabled"]);const[l,c]=ye(),d=Object(u.useCallback)(()=>l,[l]);return h.a.createElement(_e,s()({ref:l},a),t,c&&h.a.createElement(te,null,h.a.createElement(ve,{getTargetRef:d,padding:n,position:r},i())))}be.propTypes={disabled:p.a.bool,children:p.a.node,padding:p.a.number,position:p.a.string,renderContent:p.a.func.isRequired};const xe=_.e.div.withConfig({displayName:"Tooltip__TooltipContainer",componentId:"v0r76r-1"})(["display:inline-block;pointer-events:none;background-color:rgba(21,23,27,0.9);border-radius:3px;font-size:13px;padding:8px;max-width:200px;overflow:hidden;overflow-wrap:break-word;user-select:none;text-align:center;"]);function Se(e){let{info:t,children:n}=e,r=K()(e,["info","children"]);return t?h.a.createElement(be,s()({},r,{renderContent:()=>h.a.createElement(xe,null,t)}),n):h.a.createElement("div",r,n)}Se.propTypes={children:p.a.node,info:p.a.string};const we=_.e.button.withConfig({displayName:"ToolButton__StyledToolButton",componentId:"sc-11fnys9-0"})(["width:40px;height:40px;border:none;color:",";cursor:pointer;position:relative;background-color:",";&:hover{background-color:",";}"],e=>e.theme.white,e=>e.selected?e.theme.blue:e.theme.toolbar,e=>e.selected?e.theme.blueHover:e.theme.panel2),Ee=_.e.div.withConfig({displayName:"ToolButton__Icon",componentId:"sc-11fnys9-1"})(["width:14px;height:14px;font-size:14px;"]);function Te({id:e,icon:t,onClick:n,selected:r,tooltip:i}){return h.a.createElement(Se,{id:e,info:i,position:"bottom"},h.a.createElement(we,{selected:r,onClick:n},h.a.createElement(Ee,{as:t})))}Te.propTypes={id:p.a.string,icon:p.a.object,onClick:p.a.func,selected:p.a.bool,tooltip:p.a.string};var Me=n(17),Ce=n(58),$e=n(482),Oe=n.n($e);var Ae=function(){function e(e){this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.before=null}var t=e.prototype;return t.insert=function(e){if(this.ctr%(this.isSpeedy?65e3:1)==0){var t,n=function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t}(this);t=0===this.tags.length?this.before:this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(n,t),this.tags.push(n)}var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(r);try{var o=105===e.charCodeAt(1)&&64===e.charCodeAt(0);i.insertRule(e,o?0:i.cssRules.length)}catch(e){0}}else r.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}();var Ie=function(e){function t(e,t,r){var i=t.trim().split(f);t=i;var o=i.length,a=e.length;switch(a){case 0:case 1:var s=0;for(e=0===a?"":e[0]+" ";s<o;++s)t[s]=n(e,t[s],r).trim();break;default:var l=s=0;for(t=[];s<o;++s)for(var c=0;c<a;++c)t[l++]=n(e[c]+" ",i[s],r).trim()}return t}function n(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(m,"$1"+e.trim());case 58:return e.trim()+t.replace(m,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(m,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function r(e,t,n,o){var a=e+";",s=2*t+3*n+4*o;if(944===s){e=a.indexOf(":",9)+1;var l=a.substring(e,a.length-1).trim();return l=a.substring(0,e).trim()+l+";",1===O||2===O&&i(l,1)?"-webkit-"+l+l:l}if(0===O||2===O&&!i(a,1))return a;switch(s){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(T,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(l=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+l+a;case 1005:return d.test(a)?a.replace(h,":-webkit-")+a.replace(h,":-moz-")+a:a;case 1e3:switch(t=(l=a.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=a.replace(_,"tb");break;case 232:l=a.replace(_,"tb-rl");break;case 220:l=a.replace(_,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+l+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(t=(a=e).length-10,s=(l=(33===a.charCodeAt(t)?a.substring(0,t):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:a=a.replace(l,"-webkit-"+l)+";"+a;break;case 207:case 102:a=a.replace(l,"-webkit-"+(102<s?"inline-":"")+"box")+";"+a.replace(l,"-webkit-"+l)+";"+a.replace(l,"-ms-"+l+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return l=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+l+"-ms-flex-"+l+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(S,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(S,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===E.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?r(e.replace("stretch","fill-available"),t,n,o).replace(":fill-available",":stretch"):a.replace(l,"-webkit-"+l)+a.replace(l,"-moz-"+l.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===n+o&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+a}return a}function i(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),L(2!==t?r:r.replace(w,"$1"),n,t)}function o(e,t){var n=r(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(x," or ($1)").substring(4):"("+t+")"}function a(e,t,n,r,i,o,a,s,c,u){for(var h,d=0,p=t;d<P;++d)switch(h=I[d].call(l,e,p,n,r,i,o,a,s,c,u)){case void 0:case!1:case!0:case null:break;default:p=h}if(p!==t)return p}function s(e){return void 0!==(e=e.prefix)&&(L=null,e?"function"!=typeof e?O=1:(O=2,L=e):O=0),s}function l(e,n){var s=e;if(33>s.charCodeAt(0)&&(s=s.trim()),s=[s],0<P){var l=a(-1,n,s,s,C,M,0,0,0,0);void 0!==l&&"string"==typeof l&&(n=l)}var h=function e(n,s,l,h,d){for(var p,f,m,_,x,S=0,w=0,E=0,T=0,I=0,L=0,R=m=p=0,D=0,j=0,N=0,F=0,U=l.length,B=U-1,z="",V="",G="",H="";D<U;){if(f=l.charCodeAt(D),D===B&&0!==w+T+E+S&&(0!==w&&(f=47===w?10:47),T=E=S=0,U++,B++),0===w+T+E+S){if(D===B&&(0<j&&(z=z.replace(u,"")),0<z.trim().length)){switch(f){case 32:case 9:case 59:case 13:case 10:break;default:z+=l.charAt(D)}f=59}switch(f){case 123:for(p=(z=z.trim()).charCodeAt(0),m=1,F=++D;D<U;){switch(f=l.charCodeAt(D)){case 123:m++;break;case 125:m--;break;case 47:switch(f=l.charCodeAt(D+1)){case 42:case 47:e:{for(R=D+1;R<B;++R)switch(l.charCodeAt(R)){case 47:if(42===f&&42===l.charCodeAt(R-1)&&D+2!==R){D=R+1;break e}break;case 10:if(47===f){D=R+1;break e}}D=R}}break;case 91:f++;case 40:f++;case 34:case 39:for(;D++<B&&l.charCodeAt(D)!==f;);}if(0===m)break;D++}switch(m=l.substring(F,D),0===p&&(p=(z=z.replace(c,"").trim()).charCodeAt(0)),p){case 64:switch(0<j&&(z=z.replace(u,"")),f=z.charCodeAt(1)){case 100:case 109:case 115:case 45:j=s;break;default:j=A}if(F=(m=e(s,j,m,f,d+1)).length,0<P&&(x=a(3,m,j=t(A,z,N),s,C,M,F,f,d,h),z=j.join(""),void 0!==x&&0===(F=(m=x.trim()).length)&&(f=0,m="")),0<F)switch(f){case 115:z=z.replace(b,o);case 100:case 109:case 45:m=z+"{"+m+"}";break;case 107:m=(z=z.replace(g,"$1 $2"))+"{"+m+"}",m=1===O||2===O&&i("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=z+m,112===h&&(V+=m,m="")}else m="";break;default:m=e(s,t(s,z,N),m,h,d+1)}G+=m,m=N=j=R=p=0,z="",f=l.charCodeAt(++D);break;case 125:case 59:if(1<(F=(z=(0<j?z.replace(u,""):z).trim()).length))switch(0===R&&(p=z.charCodeAt(0),45===p||96<p&&123>p)&&(F=(z=z.replace(" ",":")).length),0<P&&void 0!==(x=a(1,z,s,n,C,M,V.length,h,d,h))&&0===(F=(z=x.trim()).length)&&(z="\0\0"),p=z.charCodeAt(0),f=z.charCodeAt(1),p){case 0:break;case 64:if(105===f||99===f){H+=z+l.charAt(D);break}default:58!==z.charCodeAt(F-1)&&(V+=r(z,p,f,z.charCodeAt(2)))}N=j=R=p=0,z="",f=l.charCodeAt(++D)}}switch(f){case 13:case 10:47===w?w=0:0===1+p&&107!==h&&0<z.length&&(j=1,z+="\0"),0<P*k&&a(0,z,s,n,C,M,V.length,h,d,h),M=1,C++;break;case 59:case 125:if(0===w+T+E+S){M++;break}default:switch(M++,_=l.charAt(D),f){case 9:case 32:if(0===T+S+w)switch(I){case 44:case 58:case 9:case 32:_="";break;default:32!==f&&(_=" ")}break;case 0:_="\\0";break;case 12:_="\\f";break;case 11:_="\\v";break;case 38:0===T+w+S&&(j=N=1,_="\f"+_);break;case 108:if(0===T+w+S+$&&0<R)switch(D-R){case 2:112===I&&58===l.charCodeAt(D-3)&&($=I);case 8:111===L&&($=L)}break;case 58:0===T+w+S&&(R=D);break;case 44:0===w+E+T+S&&(j=1,_+="\r");break;case 34:case 39:0===w&&(T=T===f?0:0===T?f:T);break;case 91:0===T+w+E&&S++;break;case 93:0===T+w+E&&S--;break;case 41:0===T+w+S&&E--;break;case 40:if(0===T+w+S){if(0===p)switch(2*I+3*L){case 533:break;default:p=1}E++}break;case 64:0===w+E+T+S+R+m&&(m=1);break;case 42:case 47:if(!(0<T+S+E))switch(w){case 0:switch(2*f+3*l.charCodeAt(D+1)){case 235:w=47;break;case 220:F=D,w=42}break;case 42:47===f&&42===I&&F+2!==D&&(33===l.charCodeAt(F+2)&&(V+=l.substring(F,D+1)),_="",w=0)}}0===w&&(z+=_)}L=I,I=f,D++}if(0<(F=V.length)){if(j=s,0<P&&(void 0!==(x=a(2,V,j,n,C,M,F,h,d,h))&&0===(V=x).length))return H+V+G;if(V=j.join(",")+"{"+V+"}",0!=O*$){switch(2!==O||i(V,2)||($=0),$){case 111:V=V.replace(y,":-moz-$1")+V;break;case 112:V=V.replace(v,"::-webkit-input-$1")+V.replace(v,"::-moz-$1")+V.replace(v,":-ms-input-$1")+V}$=0}}return H+V+G}(A,s,n,0,0);return 0<P&&(void 0!==(l=a(-2,h,s,s,C,M,h.length,0,0,0))&&(h=l)),"",$=0,M=C=1,h}var c=/^\0+/g,u=/[\0\r\f]/g,h=/: */g,d=/zoo|gra/,p=/([,: ])(transform)/g,f=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,g=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,y=/:(read-only)/g,_=/[svh]\w+-[tblr]{2}/,b=/\(\s*(.*)\s*\)/g,x=/([\s\S]*?);/g,S=/-self|flex-/g,w=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,T=/([^-])(image-set\()/,M=1,C=1,$=0,O=1,A=[],I=[],P=0,L=null,k=0;return l.use=function e(t){switch(t){case void 0:case null:P=I.length=0;break;default:if("function"==typeof t)I[P++]=t;else if("object"==typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else k=0|!!t}return e},l.set=s,void 0!==e&&s(e),l};function Pe(e){e&&Le.current.insert(e+"}")}var Le={current:null},ke=function(e,t,n,r,i,o,a,s,l,c){switch(e){case 1:switch(t.charCodeAt(0)){case 64:return Le.current.insert(t+";"),"";case 108:if(98===t.charCodeAt(2))return""}break;case 2:if(0===s)return t+"/*|*/";break;case 3:switch(s){case 102:case 112:return Le.current.insert(n[0]+t),"";default:return t+(0===c?"/*|*/":"")}case-2:t.split("/*|*/}").forEach(Pe)}},Re=function(e){void 0===e&&(e={});var t,n=e.key||"css";void 0!==e.prefix&&(t={prefix:e.prefix});var r=new Ie(t);var i,o={};i=e.container||document.head;var a,s=document.querySelectorAll("style[data-emotion-"+n+"]");Array.prototype.forEach.call(s,(function(e){e.getAttribute("data-emotion-"+n).split(" ").forEach((function(e){o[e]=!0})),e.parentNode!==i&&i.appendChild(e)})),r.use(e.stylisPlugins)(ke),a=function(e,t,n,i){var o=t.name;Le.current=n,r(e,t.styles),i&&(l.inserted[o]=!0)};var l={key:n,sheet:new Ae({key:n,container:i,nonce:e.nonce,speedy:e.speedy}),nonce:e.nonce,inserted:o,registered:{},insert:a};return l};function De(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]):r+=n+" "})),r}var je=function(e,t,n){var r=e.key+"-"+t.name;if(!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles),void 0===e.inserted[t.name]){var i=t;do{e.insert("."+r,i,e.sheet,!0);i=i.next}while(void 0!==i)}};var Ne=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},Fe=n(73),Ue=n(74),Be=/[A-Z]|^ms/g,ze=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ve=function(e){return 45===e.charCodeAt(1)},Ge=function(e){return null!=e&&"boolean"!=typeof e},He=Object(Ue.a)((function(e){return Ve(e)?e:e.replace(Be,"-$&").toLowerCase()})),We=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(ze,(function(e,t,n){return Je={name:t,styles:n,next:Je},t}))}return 1===Fe.a[e]||Ve(e)||"number"!=typeof t||0===t?t:t+"px"};function qe(e,t,n,r){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Je={name:n.name,styles:n.styles,next:Je},n.name;if(void 0!==n.styles){var i=n.next;if(void 0!==i)for(;void 0!==i;)Je={name:i.name,styles:i.styles,next:Je},i=i.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=qe(e,t,n[i],!1);else for(var o in n){var a=n[o];if("object"!=typeof a)null!=t&&void 0!==t[a]?r+=o+"{"+t[a]+"}":Ge(a)&&(r+=He(o)+":"+We(o,a)+";");else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=qe(e,t,a,!1);switch(o){case"animation":case"animationName":r+=He(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var l=0;l<a.length;l++)Ge(a[l])&&(r+=He(o)+":"+We(o,a[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var o=Je,a=n(e);return Je=o,qe(e,t,a,r)}break;case"string":}if(null==t)return n;var s=t[n];return void 0===s||r?n:s}var Je,Ye=/label:\s*([^\s;\n{]+)\s*;/g;var Xe=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Je=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=qe(n,t,o,!1)):i+=o[0];for(var a=1;a<e.length;a++)i+=qe(n,t,e[a],46===i.charCodeAt(i.length-1)),r&&(i+=o[a]);Ye.lastIndex=0;for(var s,l="";null!==(s=Ye.exec(i));)l+="-"+s[1];return{name:Ne(i)+l,styles:i,next:Je}};var Ke=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Xe(t)},Ze=Object(u.createContext)("undefined"!=typeof HTMLElement?Re():null),Qe=Object(u.createContext)({}),et=Ze.Provider,tt=function(e){return Object(u.forwardRef)((function(t,n){return Object(u.createElement)(Ze.Consumer,null,(function(r){return e(t,r,n)}))}))},nt="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",rt=Object.prototype.hasOwnProperty,it=function(e,t,n,r){var i=null===n?t.css:t.css(n);"string"==typeof i&&void 0!==e.registered[i]&&(i=e.registered[i]);var o=t[nt],a=[i],s="";"string"==typeof t.className?s=De(e.registered,a,t.className):null!=t.className&&(s=t.className+" ");var l=Xe(a);je(e,l,"string"==typeof o);s+=e.key+"-"+l.name;var c={};for(var h in t)rt.call(t,h)&&"css"!==h&&h!==nt&&(c[h]=t[h]);return c.ref=r,c.className=s,Object(u.createElement)(o,c)},ot=tt((function(e,t,n){return"function"==typeof e.css?Object(u.createElement)(Qe.Consumer,null,(function(r){return it(t,e,r,n)})):it(t,e,null,n)}));var at=function(e,t){var n=arguments;if(null==t||!rt.call(t,"css"))return u.createElement.apply(void 0,n);var r=n.length,i=new Array(r);i[0]=ot;var o={};for(var a in t)rt.call(t,a)&&(o[a]=t[a]);o[nt]=e,i[1]=o;for(var s=2;s<r;s++)i[s]=n[s];return u.createElement.apply(null,i)},st=(u.Component,function e(t){for(var n=t.length,r=0,i="";r<n;r++){var o=t[r];if(null!=o){var a=void 0;switch(typeof o){case"boolean":break;case"object":if(Array.isArray(o))a=e(o);else for(var s in a="",o)o[s]&&s&&(a&&(a+=" "),a+=s);break;default:a=o}a&&(i&&(i+=" "),i+=a)}}return i});function lt(e,t,n){var r=[],i=De(e,r,n);return r.length<2?n:i+t(r)}var ct=tt((function(e,t){return Object(u.createElement)(Qe.Consumer,null,(function(n){var r=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=Xe(n,t.registered);return je(t,i,!1),t.key+"-"+i.name},i={css:r,cx:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return lt(t.registered,r,st(n))},theme:n},o=e.children(i);return!0,o}))})),ut=function(){};function ht(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function dt(e,t,n){var r=[n];if(t&&e)for(var i in t)t.hasOwnProperty(i)&&t[i]&&r.push(""+ht(e,i));return r.filter((function(e){return e})).map((function(e){return String(e).trim()})).join(" ")}var pt=function(e){return Array.isArray(e)?e.filter(Boolean):"object"==typeof e&&null!==e?[e]:[]};function ft(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function mt(e){return ft(e)?window.pageYOffset:e.scrollTop}function gt(e,t){ft(e)?window.scrollTo(0,t):e.scrollTop=t}function vt(e,t,n,r){void 0===n&&(n=200),void 0===r&&(r=ut);var i=mt(e),o=t-i,a=0;!function t(){var s,l=o*((s=(s=a+=10)/n-1)*s*s+1)+i;gt(e,l),a<n?window.requestAnimationFrame(t):r(e)}()}function yt(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}var _t=n(285),bt=n.n(_t);function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function St(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function wt(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,i=e.placement,o=e.shouldScroll,a=e.isFixedPosition,s=e.theme.spacing,l=function(e){var t=getComputedStyle(e),n="absolute"===t.position,r=/(auto|scroll)/,i=document.documentElement;if("fixed"===t.position)return i;for(var o=e;o=o.parentElement;)if(t=getComputedStyle(o),(!n||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return o;return i}(n),c={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return c;var u=l.getBoundingClientRect().height,h=n.getBoundingClientRect(),d=h.bottom,p=h.height,f=h.top,m=n.offsetParent.getBoundingClientRect().top,g=window.innerHeight,v=mt(l),y=parseInt(getComputedStyle(n).marginBottom,10),_=parseInt(getComputedStyle(n).marginTop,10),b=m-_,x=g-f,S=b+v,w=u-v-f,E=d-g+v+y,T=v+f-_;switch(i){case"auto":case"bottom":if(x>=p)return{placement:"bottom",maxHeight:t};if(w>=p&&!a)return o&&vt(l,E,160),{placement:"bottom",maxHeight:t};if(!a&&w>=r||a&&x>=r)return o&&vt(l,E,160),{placement:"bottom",maxHeight:a?x-y:w-y};if("auto"===i||a){var M=t,C=a?b:S;return C>=r&&(M=Math.min(C-y-s.controlHeight,t)),{placement:"top",maxHeight:M}}if("bottom"===i)return gt(l,E),{placement:"bottom",maxHeight:t};break;case"top":if(b>=p)return{placement:"top",maxHeight:t};if(S>=p&&!a)return o&&vt(l,T,160),{placement:"top",maxHeight:t};if(!a&&S>=r||a&&b>=r){var $=t;return(!a&&S>=r||a&&b>=r)&&($=a?b-_:S-_),o&&vt(l,T,160),{placement:"top",maxHeight:$}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'+i+'".')}return c}var Et=function(e){return"auto"===e?"bottom":e},Tt=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={maxHeight:t.props.maxMenuHeight,placement:null},t.getPlacement=function(e){var n=t.props,r=n.minMenuHeight,i=n.maxMenuHeight,o=n.menuPlacement,a=n.menuPosition,s=n.menuShouldScrollIntoView,l=n.theme,c=t.context.getPortalPlacement;if(e){var u="fixed"===a,h=wt({maxHeight:i,menuEl:e,minHeight:r,placement:o,shouldScroll:s&&!u,isFixedPosition:u,theme:l});c&&c(h),t.setState(h)}},t.getUpdatedProps=function(){var e=t.props.menuPlacement,n=t.state.placement||Et(e);return xt({},t.props,{placement:n,maxHeight:t.state.maxHeight})},t}return St(t,e),t.prototype.render=function(){return(0,this.props.children)({ref:this.getPlacement,placerProps:this.getUpdatedProps()})},t}(u.Component);Tt.contextTypes={getPortalPlacement:p.a.func};var Mt=function(e){var t=e.theme,n=t.spacing.baseUnit;return{color:t.colors.neutral40,padding:2*n+"px "+3*n+"px",textAlign:"center"}},Ct=Mt,$t=Mt,Ot=function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.innerProps;return at("div",xt({css:i("noOptionsMessage",e),className:r({"menu-notice":!0,"menu-notice--no-options":!0},n)},o),t)};Ot.defaultProps={children:"No options"};var At=function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.innerProps;return at("div",xt({css:i("loadingMessage",e),className:r({"menu-notice":!0,"menu-notice--loading":!0},n)},o),t)};At.defaultProps={children:"Loading..."};var It=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={placement:null},t.getPortalPlacement=function(e){var n=e.placement;n!==Et(t.props.menuPlacement)&&t.setState({placement:n})},t}St(t,e);var n=t.prototype;return n.getChildContext=function(){return{getPortalPlacement:this.getPortalPlacement}},n.render=function(){var e=this.props,t=e.appendTo,n=e.children,r=e.controlElement,i=e.menuPlacement,o=e.menuPosition,a=e.getStyles,s="fixed"===o;if(!t&&!s||!r)return null;var l=this.state.placement||Et(i),c=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(r),u=s?0:window.pageYOffset,h=c[l]+u,d=at("div",{css:a("menuPortal",{offset:h,position:o,rect:c})},n);return t?Object(Q.createPortal)(d,t):d},t}(u.Component);It.childContextTypes={getPortalPlacement:p.a.func};var Pt=Array.isArray,Lt=Object.keys,kt=Object.prototype.hasOwnProperty;function Rt(e,t){try{return function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var r,i,o,a=Pt(t),s=Pt(n);if(a&&s){if((i=t.length)!=n.length)return!1;for(r=i;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(a!=s)return!1;var l=t instanceof Date,c=n instanceof Date;if(l!=c)return!1;if(l&&c)return t.getTime()==n.getTime();var u=t instanceof RegExp,h=n instanceof RegExp;if(u!=h)return!1;if(u&&h)return t.toString()==n.toString();var d=Lt(t);if((i=d.length)!==Lt(n).length)return!1;for(r=i;0!=r--;)if(!kt.call(n,d[r]))return!1;for(r=i;0!=r--;)if(!("_owner"===(o=d[r])&&t.$$typeof||e(t[o],n[o])))return!1;return!0}return t!=t&&n!=n}(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i))return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}}function Dt(){return(Dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jt(){var e=function(e,t){t||(t=e.slice(0));return e.raw=t,e}(["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"]);return jt=function(){return e},e}function Nt(){return(Nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ft={name:"19bqh2r",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0;"},Ut=function(e){var t=e.size,n=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["size"]);return at("svg",Nt({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Ft},n))},Bt=function(e){return at(Ut,Nt({size:20},e),at("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},zt=function(e){return at(Ut,Nt({size:20},e),at("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Vt=function(e){var t=e.isFocused,n=e.theme,r=n.spacing.baseUnit,i=n.colors;return{label:"indicatorContainer",color:t?i.neutral60:i.neutral20,display:"flex",padding:2*r,transition:"color 150ms",":hover":{color:t?i.neutral80:i.neutral40}}},Gt=Vt,Ht=Vt,Wt=function(){var e=Ke.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(jt()),qt=function(e){var t=e.delay,n=e.offset;return at("span",{css:Ke({animation:Wt+" 1s ease-in-out "+t+"ms infinite;",backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":null,height:"1em",verticalAlign:"top",width:"1em"},"")})},Jt=function(e){var t=e.className,n=e.cx,r=e.getStyles,i=e.innerProps,o=e.isRtl;return at("div",Nt({},i,{css:r("loadingIndicator",e),className:n({indicator:!0,"loading-indicator":!0},t)}),at(qt,{delay:0,offset:o}),at(qt,{delay:160,offset:!0}),at(qt,{delay:320,offset:!o}))};function Yt(){return(Yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}Jt.defaultProps={size:4};function Xt(){return(Xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Kt(){return(Kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Zt=function(e){return{label:"input",background:0,border:0,fontSize:"inherit",opacity:e?0:1,outline:0,padding:0,color:"inherit"}};function Qt(){return(Qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var en=function(e){var t=e.children,n=e.innerProps;return at("div",n,t)},tn=en,nn=en;var rn=function(e){var t=e.children,n=e.className,r=e.components,i=e.cx,o=e.data,a=e.getStyles,s=e.innerProps,l=e.isDisabled,c=e.removeProps,u=e.selectProps,h=r.Container,d=r.Label,p=r.Remove;return at(ct,null,(function(r){var f=r.css,m=r.cx;return at(h,{data:o,innerProps:Qt({},s,{className:m(f(a("multiValue",e)),i({"multi-value":!0,"multi-value--is-disabled":l},n))}),selectProps:u},at(d,{data:o,innerProps:{className:m(f(a("multiValueLabel",e)),i({"multi-value__label":!0},n))},selectProps:u},t),at(p,{data:o,innerProps:Qt({className:m(f(a("multiValueRemove",e)),i({"multi-value__remove":!0},n))},c),selectProps:u}))}))};function on(){return(on=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}rn.defaultProps={cropWithEllipsis:!0};function an(){return(an=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function sn(){return(sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ln(){return(ln=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var cn={ClearIndicator:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.innerProps;return at("div",Nt({},o,{css:i("clearIndicator",e),className:r({indicator:!0,"clear-indicator":!0},n)}),t||at(Bt,null))},Control:function(e){var t=e.children,n=e.cx,r=e.getStyles,i=e.className,o=e.isDisabled,a=e.isFocused,s=e.innerRef,l=e.innerProps,c=e.menuIsOpen;return at("div",Yt({ref:s,css:r("control",e),className:n({control:!0,"control--is-disabled":o,"control--is-focused":a,"control--menu-is-open":c},i)},l),t)},DropdownIndicator:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.innerProps;return at("div",Nt({},o,{css:i("dropdownIndicator",e),className:r({indicator:!0,"dropdown-indicator":!0},n)}),t||at(zt,null))},DownChevron:zt,CrossIcon:Bt,Group:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.Heading,a=e.headingProps,s=e.label,l=e.theme,c=e.selectProps;return at("div",{css:i("group",e),className:r({group:!0},n)},at(o,Xt({},a,{selectProps:c,theme:l,getStyles:i,cx:r}),s),at("div",null,t))},GroupHeading:function(e){var t=e.className,n=e.cx,r=e.getStyles,i=e.theme,o=(e.selectProps,function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["className","cx","getStyles","theme","selectProps"]));return at("div",Xt({css:r("groupHeading",Xt({theme:i},o)),className:n({"group-heading":!0},t)},o))},IndicatorsContainer:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles;return at("div",{css:i("indicatorsContainer",e),className:r({indicators:!0},n)},t)},IndicatorSeparator:function(e){var t=e.className,n=e.cx,r=e.getStyles,i=e.innerProps;return at("span",Nt({},i,{css:r("indicatorSeparator",e),className:n({"indicator-separator":!0},t)}))},Input:function(e){var t=e.className,n=e.cx,r=e.getStyles,i=e.innerRef,o=e.isHidden,a=e.isDisabled,s=e.theme,l=(e.selectProps,function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["className","cx","getStyles","innerRef","isHidden","isDisabled","theme","selectProps"]));return at("div",{css:r("input",Kt({theme:s},l))},at(bt.a,Kt({className:n({input:!0},t),inputRef:i,inputStyle:Zt(o),disabled:a},l)))},LoadingIndicator:Jt,Menu:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.innerRef,a=e.innerProps;return at("div",xt({css:i("menu",e),className:r({menu:!0},n)},a,{ref:o}),t)},MenuList:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.isMulti,a=e.innerRef;return at("div",{css:i("menuList",e),className:r({"menu-list":!0,"menu-list--is-multi":o},n),ref:a},t)},MenuPortal:It,LoadingMessage:At,NoOptionsMessage:Ot,MultiValue:rn,MultiValueContainer:tn,MultiValueLabel:nn,MultiValueRemove:function(e){var t=e.children,n=e.innerProps;return at("div",n,t||at(Bt,{size:14}))},Option:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.isDisabled,a=e.isFocused,s=e.isSelected,l=e.innerRef,c=e.innerProps;return at("div",on({css:i("option",e),className:r({option:!0,"option--is-disabled":o,"option--is-focused":a,"option--is-selected":s},n),ref:l},c),t)},Placeholder:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.innerProps;return at("div",an({css:i("placeholder",e),className:r({placeholder:!0},n)},o),t)},SelectContainer:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.innerProps,a=e.isDisabled,s=e.isRtl;return at("div",Dt({css:i("container",e),className:r({"--is-disabled":a,"--is-rtl":s},n)},o),t)},SingleValue:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.isDisabled,a=e.innerProps;return at("div",sn({css:i("singleValue",e),className:r({"single-value":!0,"single-value--is-disabled":o},n)},a),t)},ValueContainer:function(e){var t=e.children,n=e.className,r=e.cx,i=e.isMulti,o=e.getStyles,a=e.hasValue;return at("div",{css:o("valueContainer",e),className:r({"value-container":!0,"value-container--is-multi":i,"value-container--has-value":a},n)},t)}},un=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],hn=function(e){for(var t=0;t<un.length;t++)e=e.replace(un[t].letters,un[t].base);return e};function dn(){return(dn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var pn=function(e){return e.replace(/^\s+|\s+$/g,"")},fn=function(e){return e.label+" "+e.value};function mn(){return(mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var gn={name:"1laao21-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap;"},vn=function(e){return at("span",mn({css:gn},e))};function yn(){return(yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _n(e){e.in,e.out,e.onExited,e.appear,e.enter,e.exit;var t=e.innerRef,n=(e.emotion,function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["in","out","onExited","appear","enter","exit","innerRef","emotion"]));return at("input",yn({ref:t},n,{css:Ke({label:"dummyInput",background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"},"")}))}var bn=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.componentDidMount=function(){this.props.innerRef(Object(Q.findDOMNode)(this))},i.componentWillUnmount=function(){this.props.innerRef(null)},i.render=function(){return this.props.children},r}(u.Component),xn=["boxSizing","height","overflow","paddingRight","position"],Sn={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function wn(e){e.preventDefault()}function En(e){e.stopPropagation()}function Tn(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function Mn(){return"ontouchstart"in window||navigator.maxTouchPoints}var Cn=!(!window.document||!window.document.createElement),$n=0,On=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).originalStyles={},t.listenerOptions={capture:!1,passive:!1},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.componentDidMount=function(){var e=this;if(Cn){var t=this.props,n=t.accountForScrollbars,r=t.touchScrollTarget,i=document.body,o=i&&i.style;if(n&&xn.forEach((function(t){var n=o&&o[t];e.originalStyles[t]=n})),n&&$n<1){var a=parseInt(this.originalStyles.paddingRight,10)||0,s=document.body?document.body.clientWidth:0,l=window.innerWidth-s+a||0;Object.keys(Sn).forEach((function(e){var t=Sn[e];o&&(o[e]=t)})),o&&(o.paddingRight=l+"px")}i&&Mn()&&(i.addEventListener("touchmove",wn,this.listenerOptions),r&&(r.addEventListener("touchstart",Tn,this.listenerOptions),r.addEventListener("touchmove",En,this.listenerOptions))),$n+=1}},i.componentWillUnmount=function(){var e=this;if(Cn){var t=this.props,n=t.accountForScrollbars,r=t.touchScrollTarget,i=document.body,o=i&&i.style;$n=Math.max($n-1,0),n&&$n<1&&xn.forEach((function(t){var n=e.originalStyles[t];o&&(o[t]=n)})),i&&Mn()&&(i.removeEventListener("touchmove",wn,this.listenerOptions),r&&(r.removeEventListener("touchstart",Tn,this.listenerOptions),r.removeEventListener("touchmove",En,this.listenerOptions)))}},i.render=function(){return null},r}(u.Component);On.defaultProps={accountForScrollbars:!0};var An={name:"1dsbpcp",styles:"position:fixed;left:0;bottom:0;right:0;top:0;"},In=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={touchScrollTarget:null},t.getScrollTarget=function(e){e!==t.state.touchScrollTarget&&t.setState({touchScrollTarget:e})},t.blurSelectInput=function(){document.activeElement&&document.activeElement.blur()},t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.children,n=e.isEnabled,r=this.state.touchScrollTarget;return n?at("div",null,at("div",{onClick:this.blurSelectInput,css:An}),at(bn,{innerRef:this.getScrollTarget},t),r?at(On,{touchScrollTarget:r}):null):t},r}(u.PureComponent);var Pn=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).isBottom=!1,t.isTop=!1,t.scrollTarget=void 0,t.touchStart=void 0,t.cancelScroll=function(e){e.preventDefault(),e.stopPropagation()},t.handleEventDelta=function(e,n){var r=t.props,i=r.onBottomArrive,o=r.onBottomLeave,a=r.onTopArrive,s=r.onTopLeave,l=t.scrollTarget,c=l.scrollTop,u=l.scrollHeight,h=l.clientHeight,d=t.scrollTarget,p=n>0,f=u-h-c,m=!1;f>n&&t.isBottom&&(o&&o(e),t.isBottom=!1),p&&t.isTop&&(s&&s(e),t.isTop=!1),p&&n>f?(i&&!t.isBottom&&i(e),d.scrollTop=u,m=!0,t.isBottom=!0):!p&&-n>c&&(a&&!t.isTop&&a(e),d.scrollTop=0,m=!0,t.isTop=!0),m&&t.cancelScroll(e)},t.onWheel=function(e){t.handleEventDelta(e,e.deltaY)},t.onTouchStart=function(e){t.touchStart=e.changedTouches[0].clientY},t.onTouchMove=function(e){var n=t.touchStart-e.changedTouches[0].clientY;t.handleEventDelta(e,n)},t.getScrollTarget=function(e){t.scrollTarget=e},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.componentDidMount=function(){this.startListening(this.scrollTarget)},i.componentWillUnmount=function(){this.stopListening(this.scrollTarget)},i.startListening=function(e){e&&("function"==typeof e.addEventListener&&e.addEventListener("wheel",this.onWheel,!1),"function"==typeof e.addEventListener&&e.addEventListener("touchstart",this.onTouchStart,!1),"function"==typeof e.addEventListener&&e.addEventListener("touchmove",this.onTouchMove,!1))},i.stopListening=function(e){"function"==typeof e.removeEventListener&&e.removeEventListener("wheel",this.onWheel,!1),"function"==typeof e.removeEventListener&&e.removeEventListener("touchstart",this.onTouchStart,!1),"function"==typeof e.removeEventListener&&e.removeEventListener("touchmove",this.onTouchMove,!1)},i.render=function(){return h.a.createElement(bn,{innerRef:this.getScrollTarget},this.props.children)},r}(u.Component);function Ln(e){var t=e.isEnabled,n=void 0===t||t,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["isEnabled"]);return n?h.a.createElement(Pn,r):r.children}var kn=function(e,t){void 0===t&&(t={});var n=t,r=n.isSearchable,i=n.isMulti,o=n.label,a=n.isDisabled;switch(e){case"menu":return"Use Up and Down to choose options"+(a?"":", press Enter to select the currently focused option")+", press Escape to exit the menu, press Tab to select the option and exit the menu.";case"input":return(o||"Select")+" is focused "+(r?",type to refine list":"")+", press Down to open the menu, "+(i?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value"}},Rn=function(e,t){var n=t.value,r=t.isDisabled;if(n)switch(e){case"deselect-option":case"pop-value":case"remove-value":return"option "+n+", deselected.";case"select-option":return r?"option "+n+" is disabled. Select another option.":"option "+n+", selected."}},Dn=function(e){return!!e.isDisabled};var jn={clearIndicator:Ht,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":null,pointerEvents:t?"none":null,position:"relative"}},control:function(e){var t=e.isDisabled,n=e.isFocused,r=e.theme,i=r.colors,o=r.borderRadius,a=r.spacing;return{label:"control",alignItems:"center",backgroundColor:t?i.neutral5:i.neutral0,borderColor:t?i.neutral10:n?i.primary:i.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px "+i.primary:null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:n?i.primary:i.neutral30}}},dropdownIndicator:Gt,group:function(e){var t=e.theme.spacing;return{paddingBottom:2*t.baseUnit,paddingTop:2*t.baseUnit}},groupHeading:function(e){var t=e.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:3*t.baseUnit,paddingRight:3*t.baseUnit,textTransform:"uppercase"}},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e){var t=e.isDisabled,n=e.theme,r=n.spacing.baseUnit,i=n.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:t?i.neutral10:i.neutral20,marginBottom:2*r,marginTop:2*r,width:1}},input:function(e){var t=e.isDisabled,n=e.theme,r=n.spacing,i=n.colors;return{margin:r.baseUnit/2,paddingBottom:r.baseUnit/2,paddingTop:r.baseUnit/2,visibility:t?"hidden":"visible",color:i.neutral80}},loadingIndicator:function(e){var t=e.isFocused,n=e.size,r=e.theme,i=r.colors,o=r.spacing.baseUnit;return{label:"loadingIndicator",color:t?i.neutral60:i.neutral20,display:"flex",padding:2*o,transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"}},loadingMessage:$t,menu:function(e){var t,n=e.placement,r=e.theme,i=r.borderRadius,o=r.spacing,a=r.colors;return(t={label:"menu"})[function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(n)]="100%",t.backgroundColor=a.neutral0,t.borderRadius=i,t.boxShadow="0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",t.marginBottom=o.menuGutter,t.marginTop=o.menuGutter,t.position="absolute",t.width="100%",t.zIndex=1,t},menuList:function(e){var t=e.maxHeight,n=e.theme.spacing.baseUnit;return{maxHeight:t,overflowY:"auto",paddingBottom:n,paddingTop:n,position:"relative",WebkitOverflowScrolling:"touch"}},menuPortal:function(e){var t=e.rect,n=e.offset,r=e.position;return{left:t.left,position:r,top:n,width:t.width,zIndex:1}},multiValue:function(e){var t=e.theme,n=t.spacing,r=t.borderRadius;return{label:"multiValue",backgroundColor:t.colors.neutral10,borderRadius:r/2,display:"flex",margin:n.baseUnit/2,minWidth:0}},multiValueLabel:function(e){var t=e.theme,n=t.borderRadius,r=t.colors,i=e.cropWithEllipsis;return{borderRadius:n/2,color:r.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:i?"ellipsis":null,whiteSpace:"nowrap"}},multiValueRemove:function(e){var t=e.theme,n=t.spacing,r=t.borderRadius,i=t.colors;return{alignItems:"center",borderRadius:r/2,backgroundColor:e.isFocused&&i.dangerLight,display:"flex",paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:i.dangerLight,color:i.danger}}},noOptionsMessage:Ct,option:function(e){var t=e.isDisabled,n=e.isFocused,r=e.isSelected,i=e.theme,o=i.spacing,a=i.colors;return{label:"option",backgroundColor:r?a.primary:n?a.primary25:"transparent",color:t?a.neutral20:r?a.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:2*o.baseUnit+"px "+3*o.baseUnit+"px",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:!t&&(r?a.primary:a.primary50)}}},placeholder:function(e){var t=e.theme,n=t.spacing;return{label:"placeholder",color:t.colors.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},singleValue:function(e){var t=e.isDisabled,n=e.theme,r=n.spacing,i=n.colors;return{label:"singleValue",color:t?i.neutral40:i.neutral80,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2,maxWidth:"calc(100% - "+2*r.baseUnit+"px)",overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},valueContainer:function(e){var t=e.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:t.baseUnit/2+"px "+2*t.baseUnit+"px",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}}};var Nn={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}};function Fn(){return(Fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Un(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Bn,zn={backspaceRemovesValue:!0,blurInputOnSelect:yt(),captureMenuScroll:!yt(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){var n=dn({ignoreCase:!0,ignoreAccents:!0,stringify:fn,trim:!0,matchFrom:"any"},Bn),r=n.ignoreCase,i=n.ignoreAccents,o=n.stringify,a=n.trim,s=n.matchFrom,l=a?pn(t):t,c=a?pn(o(e)):o(e);return r&&(l=l.toLowerCase(),c=c.toLowerCase()),i&&(l=hn(l),c=hn(c)),"start"===s?c.substr(0,l.length)===l:c.indexOf(l)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:Dn,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return t+" result"+(1!==t?"s":"")+" available"},styles:{},tabIndex:"0",tabSelectsValue:!0},Vn=1,Gn=function(e){var t,n;function r(t){var n;(n=e.call(this,t)||this).state={ariaLiveSelection:"",ariaLiveContext:"",focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,menuOptions:{render:[],focusable:[]},selectValue:[]},n.blockOptionHover=!1,n.isComposing=!1,n.clearFocusValueOnUpdate=!1,n.commonProps=void 0,n.components=void 0,n.hasGroups=!1,n.initialTouchX=0,n.initialTouchY=0,n.inputIsHiddenAfterUpdate=void 0,n.instancePrefix="",n.openAfterFocus=!1,n.scrollToFocusedOptionOnUpdate=!1,n.userIsDragging=void 0,n.controlRef=null,n.getControlRef=function(e){n.controlRef=e},n.focusedOptionRef=null,n.getFocusedOptionRef=function(e){n.focusedOptionRef=e},n.menuListRef=null,n.getMenuListRef=function(e){n.menuListRef=e},n.inputRef=null,n.getInputRef=function(e){n.inputRef=e},n.cacheComponents=function(e){n.components=ln({},cn,{components:e}.components)},n.focus=n.focusInput,n.blur=n.blurInput,n.onChange=function(e,t){var r=n.props;(0,r.onChange)(e,Fn({},t,{name:r.name}))},n.setValue=function(e,t,r){void 0===t&&(t="set-value");var i=n.props,o=i.closeMenuOnSelect,a=i.isMulti;n.onInputChange("",{action:"set-value"}),o&&(n.inputIsHiddenAfterUpdate=!a,n.onMenuClose()),n.clearFocusValueOnUpdate=!0,n.onChange(e,{action:t,option:r})},n.selectOption=function(e){var t=n.props,r=t.blurInputOnSelect,i=t.isMulti,o=n.state.selectValue;if(i)if(n.isOptionSelected(e,o)){var a=n.getOptionValue(e);n.setValue(o.filter((function(e){return n.getOptionValue(e)!==a})),"deselect-option",e),n.announceAriaLiveSelection({event:"deselect-option",context:{value:n.getOptionLabel(e)}})}else n.isOptionDisabled(e,o)?n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(e),isDisabled:!0}}):(n.setValue([].concat(o,[e]),"select-option",e),n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(e)}}));else n.isOptionDisabled(e,o)?n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(e),isDisabled:!0}}):(n.setValue(e,"select-option"),n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(e)}}));r&&n.blurInput()},n.removeValue=function(e){var t=n.state.selectValue,r=n.getOptionValue(e),i=t.filter((function(e){return n.getOptionValue(e)!==r}));n.onChange(i.length?i:null,{action:"remove-value",removedValue:e}),n.announceAriaLiveSelection({event:"remove-value",context:{value:e?n.getOptionLabel(e):""}}),n.focusInput()},n.clearValue=function(){var e=n.props.isMulti;n.onChange(e?[]:null,{action:"clear"})},n.popValue=function(){var e=n.state.selectValue,t=e[e.length-1],r=e.slice(0,e.length-1);n.announceAriaLiveSelection({event:"pop-value",context:{value:t?n.getOptionLabel(t):""}}),n.onChange(r.length?r:null,{action:"pop-value",removedValue:t})},n.getOptionLabel=function(e){return n.props.getOptionLabel(e)},n.getOptionValue=function(e){return n.props.getOptionValue(e)},n.getStyles=function(e,t){var r=jn[e](t);r.boxSizing="border-box";var i=n.props.styles[e];return i?i(r,t):r},n.getElementId=function(e){return n.instancePrefix+"-"+e},n.getActiveDescendentId=function(){var e=n.props.menuIsOpen,t=n.state,r=t.menuOptions,i=t.focusedOption;if(i&&e){var o=r.focusable.indexOf(i),a=r.render[o];return a&&a.key}},n.announceAriaLiveSelection=function(e){var t=e.event,r=e.context;n.setState({ariaLiveSelection:Rn(t,r)})},n.announceAriaLiveContext=function(e){var t=e.event,r=e.context;n.setState({ariaLiveContext:kn(t,Fn({},r,{label:n.props["aria-label"]}))})},n.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),n.focusInput())},n.onMenuMouseMove=function(e){n.blockOptionHover=!1},n.onControlMouseDown=function(e){var t=n.props.openMenuOnClick;n.state.isFocused?n.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&n.onMenuClose():t&&n.openMenu("first"):(t&&(n.openAfterFocus=!0),n.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()},n.onDropdownIndicatorMouseDown=function(e){if(!(e&&"mousedown"===e.type&&0!==e.button||n.props.isDisabled)){var t=n.props,r=t.isMulti,i=t.menuIsOpen;n.focusInput(),i?(n.inputIsHiddenAfterUpdate=!r,n.onMenuClose()):n.openMenu("first"),e.preventDefault(),e.stopPropagation()}},n.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(n.clearValue(),e.stopPropagation(),n.openAfterFocus=!1,"touchend"===e.type?n.focusInput():setTimeout((function(){return n.focusInput()})))},n.onScroll=function(e){"boolean"==typeof n.props.closeMenuOnScroll?e.target instanceof HTMLElement&&ft(e.target)&&n.props.onMenuClose():"function"==typeof n.props.closeMenuOnScroll&&n.props.closeMenuOnScroll(e)&&n.props.onMenuClose()},n.onCompositionStart=function(){n.isComposing=!0},n.onCompositionEnd=function(){n.isComposing=!1},n.onTouchStart=function(e){var t=e.touches.item(0);t&&(n.initialTouchX=t.clientX,n.initialTouchY=t.clientY,n.userIsDragging=!1)},n.onTouchMove=function(e){var t=e.touches.item(0);if(t){var r=Math.abs(t.clientX-n.initialTouchX),i=Math.abs(t.clientY-n.initialTouchY);n.userIsDragging=r>5||i>5}},n.onTouchEnd=function(e){n.userIsDragging||(n.controlRef&&!n.controlRef.contains(e.target)&&n.menuListRef&&!n.menuListRef.contains(e.target)&&n.blurInput(),n.initialTouchX=0,n.initialTouchY=0)},n.onControlTouchEnd=function(e){n.userIsDragging||n.onControlMouseDown(e)},n.onClearIndicatorTouchEnd=function(e){n.userIsDragging||n.onClearIndicatorMouseDown(e)},n.onDropdownIndicatorTouchEnd=function(e){n.userIsDragging||n.onDropdownIndicatorMouseDown(e)},n.handleInputChange=function(e){var t=e.currentTarget.value;n.inputIsHiddenAfterUpdate=!1,n.onInputChange(t,{action:"input-change"}),n.onMenuOpen()},n.onInputFocus=function(e){var t=n.props,r=t.isSearchable,i=t.isMulti;n.props.onFocus&&n.props.onFocus(e),n.inputIsHiddenAfterUpdate=!1,n.announceAriaLiveContext({event:"input",context:{isSearchable:r,isMulti:i}}),n.setState({isFocused:!0}),(n.openAfterFocus||n.props.openMenuOnFocus)&&n.openMenu("first"),n.openAfterFocus=!1},n.onInputBlur=function(e){n.menuListRef&&n.menuListRef.contains(document.activeElement)?n.inputRef.focus():(n.props.onBlur&&n.props.onBlur(e),n.onInputChange("",{action:"input-blur"}),n.onMenuClose(),n.setState({focusedValue:null,isFocused:!1}))},n.onOptionHover=function(e){n.blockOptionHover||n.state.focusedOption===e||n.setState({focusedOption:e})},n.shouldHideSelectedOptions=function(){var e=n.props,t=e.hideSelectedOptions,r=e.isMulti;return void 0===t?r:t},n.onKeyDown=function(e){var t=n.props,r=t.isMulti,i=t.backspaceRemovesValue,o=t.escapeClearsValue,a=t.inputValue,s=t.isClearable,l=t.isDisabled,c=t.menuIsOpen,u=t.onKeyDown,h=t.tabSelectsValue,d=t.openMenuOnFocus,p=n.state,f=p.focusedOption,m=p.focusedValue,g=p.selectValue;if(!(l||"function"==typeof u&&(u(e),e.defaultPrevented))){switch(n.blockOptionHover=!0,e.key){case"ArrowLeft":if(!r||a)return;n.focusValue("previous");break;case"ArrowRight":if(!r||a)return;n.focusValue("next");break;case"Delete":case"Backspace":if(a)return;if(m)n.removeValue(m);else{if(!i)return;r?n.popValue():s&&n.clearValue()}break;case"Tab":if(n.isComposing)return;if(e.shiftKey||!c||!h||!f||d&&n.isOptionSelected(f,g))return;n.selectOption(f);break;case"Enter":if(229===e.keyCode)break;if(c){if(!f)return;if(n.isComposing)return;n.selectOption(f);break}return;case"Escape":c?(n.inputIsHiddenAfterUpdate=!1,n.onInputChange("",{action:"menu-close"}),n.onMenuClose()):s&&o&&n.clearValue();break;case" ":if(a)return;if(!c){n.openMenu("first");break}if(!f)return;n.selectOption(f);break;case"ArrowUp":c?n.focusOption("up"):n.openMenu("last");break;case"ArrowDown":c?n.focusOption("down"):n.openMenu("first");break;case"PageUp":if(!c)return;n.focusOption("pageup");break;case"PageDown":if(!c)return;n.focusOption("pagedown");break;case"Home":if(!c)return;n.focusOption("first");break;case"End":if(!c)return;n.focusOption("last");break;default:return}e.preventDefault()}},n.buildMenuOptions=function(e,t){var r=e.inputValue,i=void 0===r?"":r,o=e.options,a=function(e,r){var o=n.isOptionDisabled(e,t),a=n.isOptionSelected(e,t),s=n.getOptionLabel(e),l=n.getOptionValue(e);if(!(n.shouldHideSelectedOptions()&&a||!n.filterOption({label:s,value:l,data:e},i))){var c=o?void 0:function(){return n.onOptionHover(e)},u=o?void 0:function(){return n.selectOption(e)},h=n.getElementId("option")+"-"+r;return{innerProps:{id:h,onClick:u,onMouseMove:c,onMouseOver:c,tabIndex:-1},data:e,isDisabled:o,isSelected:a,key:h,label:s,type:"option",value:l}}};return o.reduce((function(e,t,r){if(t.options){n.hasGroups||(n.hasGroups=!0);var i=t.options.map((function(t,n){var i=a(t,r+"-"+n);return i&&e.focusable.push(t),i})).filter(Boolean);if(i.length){var o=n.getElementId("group")+"-"+r;e.render.push({type:"group",key:o,data:t,options:i})}}else{var s=a(t,""+r);s&&(e.render.push(s),e.focusable.push(t))}return e}),{render:[],focusable:[]})};var r=t.value;n.cacheComponents=Object(Ce.a)(n.cacheComponents,Rt).bind(Un(Un(n))),n.cacheComponents(t.components),n.instancePrefix="react-select-"+(n.props.instanceId||++Vn);var i=pt(r);n.buildMenuOptions=Object(Ce.a)(n.buildMenuOptions,(function(e,t){var n=e,r=n[0],i=n[1],o=t,a=o[0];return Rt(i,o[1])&&Rt(r.inputValue,a.inputValue)&&Rt(r.options,a.options)})).bind(Un(Un(n)));var o=t.menuIsOpen?n.buildMenuOptions(t,i):{render:[],focusable:[]};return n.state.menuOptions=o,n.state.selectValue=i,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.componentDidMount=function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()},i.UNSAFE_componentWillReceiveProps=function(e){var t=this.props,n=t.options,r=t.value,i=t.menuIsOpen,o=t.inputValue;if(this.cacheComponents(e.components),e.value!==r||e.options!==n||e.menuIsOpen!==i||e.inputValue!==o){var a=pt(e.value),s=e.menuIsOpen?this.buildMenuOptions(e,a):{render:[],focusable:[]},l=this.getNextFocusedValue(a),c=this.getNextFocusedOption(s.focusable);this.setState({menuOptions:s,selectValue:a,focusedOption:c,focusedValue:l})}null!=this.inputIsHiddenAfterUpdate&&(this.setState({inputIsHidden:this.inputIsHiddenAfterUpdate}),delete this.inputIsHiddenAfterUpdate)},i.componentDidUpdate=function(e){var t,n,r,i,o,a=this.props,s=a.isDisabled,l=a.menuIsOpen,c=this.state.isFocused;(c&&!s&&e.isDisabled||c&&l&&!e.menuIsOpen)&&this.focusInput(),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(t=this.menuListRef,n=this.focusedOptionRef,r=t.getBoundingClientRect(),i=n.getBoundingClientRect(),o=n.offsetHeight/3,i.bottom+o>r.bottom?gt(t,Math.min(n.offsetTop+n.clientHeight-t.offsetHeight+o,t.scrollHeight)):i.top-o<r.top&&gt(t,Math.max(n.offsetTop-o,0)),this.scrollToFocusedOptionOnUpdate=!1)},i.componentWillUnmount=function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)},i.onMenuOpen=function(){this.props.onMenuOpen()},i.onMenuClose=function(){var e=this.props,t=e.isSearchable,n=e.isMulti;this.announceAriaLiveContext({event:"input",context:{isSearchable:t,isMulti:n}}),this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()},i.onInputChange=function(e,t){this.props.onInputChange(e,t)},i.focusInput=function(){this.inputRef&&this.inputRef.focus()},i.blurInput=function(){this.inputRef&&this.inputRef.blur()},i.openMenu=function(e){var t=this,n=this.state,r=n.selectValue,i=n.isFocused,o=this.buildMenuOptions(this.props,r),a=this.props.isMulti,s="first"===e?0:o.focusable.length-1;if(!a){var l=o.focusable.indexOf(r[0]);l>-1&&(s=l)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.inputIsHiddenAfterUpdate=!1,this.setState({menuOptions:o,focusedValue:null,focusedOption:o.focusable[s]},(function(){t.onMenuOpen(),t.announceAriaLiveContext({event:"menu"})}))},i.focusValue=function(e){var t=this.props,n=t.isMulti,r=t.isSearchable,i=this.state,o=i.selectValue,a=i.focusedValue;if(n){this.setState({focusedOption:null});var s=o.indexOf(a);a||(s=-1,this.announceAriaLiveContext({event:"value"}));var l=o.length-1,c=-1;if(o.length){switch(e){case"previous":c=0===s?0:-1===s?l:s-1;break;case"next":s>-1&&s<l&&(c=s+1)}-1===c&&this.announceAriaLiveContext({event:"input",context:{isSearchable:r,isMulti:n}}),this.setState({inputIsHidden:-1!==c,focusedValue:o[c]})}}},i.focusOption=function(e){void 0===e&&(e="first");var t=this.props.pageSize,n=this.state,r=n.focusedOption,i=n.menuOptions.focusable;if(i.length){var o=0,a=i.indexOf(r);r||(a=-1,this.announceAriaLiveContext({event:"menu"})),"up"===e?o=a>0?a-1:i.length-1:"down"===e?o=(a+1)%i.length:"pageup"===e?(o=a-t)<0&&(o=0):"pagedown"===e?(o=a+t)>i.length-1&&(o=i.length-1):"last"===e&&(o=i.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:i[o],focusedValue:null}),this.announceAriaLiveContext({event:"menu",context:{isDisabled:Dn(i[o])}})}},i.getTheme=function(){return this.props.theme?"function"==typeof this.props.theme?this.props.theme(Nn):Fn({},Nn,this.props.theme):Nn},i.getCommonProps=function(){var e=this.clearValue,t=this.getStyles,n=this.setValue,r=this.selectOption,i=this.props,o=i.classNamePrefix,a=i.isMulti,s=i.isRtl,l=i.options,c=this.state.selectValue,u=this.hasValue();return{cx:dt.bind(null,o),clearValue:e,getStyles:t,getValue:function(){return c},hasValue:u,isMulti:a,isRtl:s,options:l,selectOption:r,setValue:n,selectProps:i,theme:this.getTheme()}},i.getNextFocusedValue=function(e){if(this.clearFocusValueOnUpdate)return this.clearFocusValueOnUpdate=!1,null;var t=this.state,n=t.focusedValue,r=t.selectValue.indexOf(n);if(r>-1){if(e.indexOf(n)>-1)return n;if(r<e.length)return e[r]}return null},i.getNextFocusedOption=function(e){var t=this.state.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]},i.hasValue=function(){return this.state.selectValue.length>0},i.hasOptions=function(){return!!this.state.menuOptions.render.length},i.countOptions=function(){return this.state.menuOptions.focusable.length},i.isClearable=function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t},i.isOptionDisabled=function(e,t){return"function"==typeof this.props.isOptionDisabled&&this.props.isOptionDisabled(e,t)},i.isOptionSelected=function(e,t){var n=this;if(t.indexOf(e)>-1)return!0;if("function"==typeof this.props.isOptionSelected)return this.props.isOptionSelected(e,t);var r=this.getOptionValue(e);return t.some((function(e){return n.getOptionValue(e)===r}))},i.filterOption=function(e,t){return!this.props.filterOption||this.props.filterOption(e,t)},i.formatOptionLabel=function(e,t){if("function"==typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:r})}return this.getOptionLabel(e)},i.formatGroupLabel=function(e){return this.props.formatGroupLabel(e)},i.startListeningComposition=function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))},i.stopListeningComposition=function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))},i.startListeningToTouch=function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))},i.stopListeningToTouch=function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))},i.constructAriaLiveMessage=function(){var e=this.state,t=e.ariaLiveContext,n=e.selectValue,r=e.focusedValue,i=e.focusedOption,o=this.props,a=o.options,s=o.menuIsOpen,l=o.inputValue,c=o.screenReaderStatus;return(r?function(e){var t=e.focusedValue,n=e.getOptionLabel,r=e.selectValue;return"value "+n(t)+" focused, "+(r.indexOf(t)+1)+" of "+r.length+"."}({focusedValue:r,getOptionLabel:this.getOptionLabel,selectValue:n}):"")+" "+(i&&s?function(e){var t=e.focusedOption,n=e.getOptionLabel,r=e.options;return"option "+n(t)+" focused"+(t.isDisabled?" disabled":"")+", "+(r.indexOf(t)+1)+" of "+r.length+"."}({focusedOption:i,getOptionLabel:this.getOptionLabel,options:a}):"")+" "+function(e){var t=e.inputValue;return e.screenReaderMessage+(t?" for search term "+t:"")+"."}({inputValue:l,screenReaderMessage:c({count:this.countOptions()})})+" "+t},i.renderInput=function(){var e=this.props,t=e.isDisabled,n=e.isSearchable,r=e.inputId,i=e.inputValue,o=e.tabIndex,a=this.components.Input,s=this.state.inputIsHidden,l=r||this.getElementId("input"),c={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]};if(!n)return h.a.createElement(_n,Fn({id:l,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:ut,onFocus:this.onInputFocus,readOnly:!0,disabled:t,tabIndex:o,value:""},c));var u=this.commonProps,d=u.cx,p=u.theme,f=u.selectProps;return h.a.createElement(a,Fn({autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",cx:d,getStyles:this.getStyles,id:l,innerRef:this.getInputRef,isDisabled:t,isHidden:s,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,selectProps:f,spellCheck:"false",tabIndex:o,theme:p,type:"text",value:i},c))},i.renderPlaceholderOrValue=function(){var e=this,t=this.components,n=t.MultiValue,r=t.MultiValueContainer,i=t.MultiValueLabel,o=t.MultiValueRemove,a=t.SingleValue,s=t.Placeholder,l=this.commonProps,c=this.props,u=c.controlShouldRenderValue,d=c.isDisabled,p=c.isMulti,f=c.inputValue,m=c.placeholder,g=this.state,v=g.selectValue,y=g.focusedValue,_=g.isFocused;if(!this.hasValue()||!u)return f?null:h.a.createElement(s,Fn({},l,{key:"placeholder",isDisabled:d,isFocused:_}),m);if(p)return v.map((function(t,a){var s=t===y;return h.a.createElement(n,Fn({},l,{components:{Container:r,Label:i,Remove:o},isFocused:s,isDisabled:d,key:e.getOptionValue(t),index:a,removeProps:{onClick:function(){return e.removeValue(t)},onTouchEnd:function(){return e.removeValue(t)},onMouseDown:function(e){e.preventDefault(),e.stopPropagation()}},data:t}),e.formatOptionLabel(t,"value"))}));if(f)return null;var b=v[0];return h.a.createElement(a,Fn({},l,{data:b,isDisabled:d}),this.formatOptionLabel(b,"value"))},i.renderClearIndicator=function(){var e=this.components.ClearIndicator,t=this.commonProps,n=this.props,r=n.isDisabled,i=n.isLoading,o=this.state.isFocused;if(!this.isClearable()||!e||r||!this.hasValue()||i)return null;var a={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return h.a.createElement(e,Fn({},t,{innerProps:a,isFocused:o}))},i.renderLoadingIndicator=function(){var e=this.components.LoadingIndicator,t=this.commonProps,n=this.props,r=n.isDisabled,i=n.isLoading,o=this.state.isFocused;if(!e||!i)return null;return h.a.createElement(e,Fn({},t,{innerProps:{"aria-hidden":"true"},isDisabled:r,isFocused:o}))},i.renderIndicatorSeparator=function(){var e=this.components,t=e.DropdownIndicator,n=e.IndicatorSeparator;if(!t||!n)return null;var r=this.commonProps,i=this.props.isDisabled,o=this.state.isFocused;return h.a.createElement(n,Fn({},r,{isDisabled:i,isFocused:o}))},i.renderDropdownIndicator=function(){var e=this.components.DropdownIndicator;if(!e)return null;var t=this.commonProps,n=this.props.isDisabled,r=this.state.isFocused,i={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return h.a.createElement(e,Fn({},t,{innerProps:i,isDisabled:n,isFocused:r}))},i.renderMenu=function(){var e=this,t=this.components,n=t.Group,r=t.GroupHeading,i=t.Menu,o=t.MenuList,a=t.MenuPortal,s=t.LoadingMessage,l=t.NoOptionsMessage,c=t.Option,u=this.commonProps,d=this.state,p=d.focusedOption,f=d.menuOptions,m=this.props,g=m.captureMenuScroll,v=m.inputValue,y=m.isLoading,_=m.loadingMessage,b=m.minMenuHeight,x=m.maxMenuHeight,S=m.menuIsOpen,w=m.menuPlacement,E=m.menuPosition,T=m.menuPortalTarget,M=m.menuShouldBlockScroll,C=m.menuShouldScrollIntoView,$=m.noOptionsMessage,O=m.onMenuScrollToTop,A=m.onMenuScrollToBottom;if(!S)return null;var I,P=function(t){var n=p===t.data;return t.innerRef=n?e.getFocusedOptionRef:void 0,h.a.createElement(c,Fn({},u,t,{isFocused:n}),e.formatOptionLabel(t.data,"menu"))};if(this.hasOptions())I=f.render.map((function(t){if("group"===t.type){t.type;var i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["type"]),o=t.key+"-heading";return h.a.createElement(n,Fn({},u,i,{Heading:r,headingProps:{id:o},label:e.formatGroupLabel(t.data)}),t.options.map((function(e){return P(e)})))}if("option"===t.type)return P(t)}));else if(y){var L=_({inputValue:v});if(null===L)return null;I=h.a.createElement(s,u,L)}else{var k=$({inputValue:v});if(null===k)return null;I=h.a.createElement(l,u,k)}var R={minMenuHeight:b,maxMenuHeight:x,menuPlacement:w,menuPosition:E,menuShouldScrollIntoView:C},D=h.a.createElement(Tt,Fn({},u,R),(function(t){var n=t.ref,r=t.placerProps,a=r.placement,s=r.maxHeight;return h.a.createElement(i,Fn({},u,R,{innerRef:n,innerProps:{onMouseDown:e.onMenuMouseDown,onMouseMove:e.onMenuMouseMove},isLoading:y,placement:a}),h.a.createElement(Ln,{isEnabled:g,onTopArrive:O,onBottomArrive:A},h.a.createElement(In,{isEnabled:M},h.a.createElement(o,Fn({},u,{innerRef:e.getMenuListRef,isLoading:y,maxHeight:s}),I))))}));return T||"fixed"===E?h.a.createElement(a,Fn({},u,{appendTo:T,controlElement:this.controlRef,menuPlacement:w,menuPosition:E}),D):D},i.renderFormField=function(){var e=this,t=this.props,n=t.delimiter,r=t.isDisabled,i=t.isMulti,o=t.name,a=this.state.selectValue;if(o&&!r){if(i){if(n){var s=a.map((function(t){return e.getOptionValue(t)})).join(n);return h.a.createElement("input",{name:o,type:"hidden",value:s})}var l=a.length>0?a.map((function(t,n){return h.a.createElement("input",{key:"i-"+n,name:o,type:"hidden",value:e.getOptionValue(t)})})):h.a.createElement("input",{name:o,type:"hidden"});return h.a.createElement("div",null,l)}var c=a[0]?this.getOptionValue(a[0]):"";return h.a.createElement("input",{name:o,type:"hidden",value:c})}},i.renderLiveRegion=function(){return this.state.isFocused?h.a.createElement(vn,{"aria-live":"polite"},h.a.createElement("p",{id:"aria-selection-event"}," ",this.state.ariaLiveSelection),h.a.createElement("p",{id:"aria-context"}," ",this.constructAriaLiveMessage())):null},i.render=function(){var e=this.components,t=e.Control,n=e.IndicatorsContainer,r=e.SelectContainer,i=e.ValueContainer,o=this.props,a=o.className,s=o.id,l=o.isDisabled,c=o.menuIsOpen,u=this.state.isFocused,d=this.commonProps=this.getCommonProps();return h.a.createElement(r,Fn({},d,{className:a,innerProps:{id:s,onKeyDown:this.onKeyDown},isDisabled:l,isFocused:u}),this.renderLiveRegion(),h.a.createElement(t,Fn({},d,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:l,isFocused:u,menuIsOpen:c}),h.a.createElement(i,Fn({},d,{isDisabled:l}),this.renderPlaceholderOrValue(),this.renderInput()),h.a.createElement(n,Fn({},d,{isDisabled:l}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())},r}(u.Component);function Hn(){return(Hn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}Gn.defaultProps=zn;var Wn={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null},qn=function(e){var t,n;return n=t=function(t){var n,r;function i(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).select=void 0,e.state={inputValue:void 0!==e.props.inputValue?e.props.inputValue:e.props.defaultInputValue,menuIsOpen:void 0!==e.props.menuIsOpen?e.props.menuIsOpen:e.props.defaultMenuIsOpen,value:void 0!==e.props.value?e.props.value:e.props.defaultValue},e.onChange=function(t,n){e.callProp("onChange",t,n),e.setState({value:t})},e.onInputChange=function(t,n){var r=e.callProp("onInputChange",t,n);e.setState({inputValue:void 0!==r?r:t})},e.onMenuOpen=function(){e.callProp("onMenuOpen"),e.setState({menuIsOpen:!0})},e.onMenuClose=function(){e.callProp("onMenuClose"),e.setState({menuIsOpen:!1})},e}r=t,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var o=i.prototype;return o.focus=function(){this.select.focus()},o.blur=function(){this.select.blur()},o.getProp=function(e){return void 0!==this.props[e]?this.props[e]:this.state[e]},o.callProp=function(e){if("function"==typeof this.props[e]){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.props)[e].apply(t,r)}},o.render=function(){var t=this,n=this.props,r=(n.defaultInputValue,n.defaultMenuIsOpen,n.defaultValue,function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,["defaultInputValue","defaultMenuIsOpen","defaultValue"]));return h.a.createElement(e,Hn({},r,{ref:function(e){t.select=e},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))},i}(u.Component),t.defaultProps=Wn,n};u.Component;var Jn=qn(Gn);function Yn(){return(Yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Xn,Kn,Zn,Qn=function(e,t){void 0===e&&(e="");var n=String(e).toLowerCase(),r=String(t.value).toLowerCase(),i=String(t.label).toLowerCase();return r===n||i===n},er=Yn({allowCreateWhileLoading:!1,createOptionPosition:"last"},{formatCreateLabel:function(e){return'Create "'+e+'"'},isValidNewOption:function(e,t,n){return!(!e||t.some((function(t){return Qn(e,t)}))||n.some((function(t){return Qn(e,t)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}}),tr=qn((Xn=Gn,Zn=Kn=function(e){var t,n;function r(t){var n;(n=e.call(this,t)||this).select=void 0,n.onChange=function(e,t){var r=n.props,i=r.getNewOptionData,o=r.inputValue,a=r.isMulti,s=r.onChange,l=r.onCreateOption,c=r.value,u=r.name;if("select-option"!==t.action)return s(e,t);var h=n.state.newOption,d=Array.isArray(e)?e:[e];if(d[d.length-1]!==h)s(e,t);else if(l)l(o);else{var p=i(o,o),f={action:"create-option",name:u};s(a?[].concat(pt(c),[p]):p,f)}};var r=t.options||[];return n.state={newOption:void 0,options:r},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.UNSAFE_componentWillReceiveProps=function(e){var t=e.allowCreateWhileLoading,n=e.createOptionPosition,r=e.formatCreateLabel,i=e.getNewOptionData,o=e.inputValue,a=e.isLoading,s=e.isValidNewOption,l=e.value,c=e.options||[],u=this.state.newOption;u=s(o,pt(l),c)?i(o,r(o)):void 0,this.setState({newOption:u,options:!t&&a||!u?c:"first"===n?[u].concat(c):[].concat(c,[u])})},i.focus=function(){this.select.focus()},i.blur=function(){this.select.blur()},i.render=function(){var e=this,t=this.state.options;return h.a.createElement(Xn,Yn({},this.props,{ref:function(t){e.select=t},options:t,onChange:this.onChange}))},r}(u.Component),Kn.defaultProps=er,Zn));function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ir={container:e=>rr(rr({},e),{},{width:"100%",maxWidth:"200px"}),control:(e,{isDisabled:t})=>rr(rr({},e),{},{backgroundColor:t?"#222222":"black",minHeight:"24px",border:"1px solid #5D646C",cursor:"pointer"}),input:(e,{isDisabled:t})=>rr(rr({},e),{},{margin:"0px",color:t?"grey":"white"}),dropdownIndicator:e=>rr(rr({},e),{},{padding:"0 4px 0 0"}),clearIndicator:e=>rr(rr({},e),{},{padding:"0",width:"16px",height:"16px",alignItems:"center",paddingTop:"1px"}),menu:e=>rr(rr({},e),{},{borderRadius:"4px",border:"1px solid black",backgroundColor:"black",outline:"none",padding:"0",position:"absolute",top:"20px"}),menuList:e=>rr(rr({},e),{},{padding:"0"}),option:(e,{isFocused:t})=>rr(rr({},e),{},{backgroundColor:t?"#006EFF":"black",cursor:"pointer"}),singleValue:(e,{isDisabled:t})=>rr(rr({},e),{},{color:t?"grey":"white"})};function or(e){let{value:t,options:n,onChange:r,placeholder:i,disabled:o,error:a,styles:l,creatable:c}=e,u=K()(e,["value","options","onChange","placeholder","disabled","error","styles","creatable"]);const d=n.find(e=>null===e?e:e.value&&e.value.equals?e.value.equals(t):e.value===t)||null,p=rr(rr({},ir),{},{placeholder:(e,{isDisabled:t})=>rr(rr({},e),{},{color:t?"grey":a?"red":"white"})},l),f=c?tr:Jn;return h.a.createElement(f,s()({},u,{styles:p,value:d,components:{IndicatorSeparator:()=>null},placeholder:i,options:n,onChange:e=>r(e&&e.value,e),isDisabled:o}))}or.defaultProps={value:null,placeholder:"Select...",optionNotFoundPlaceholder:"Error",onChange:()=>{}},or.propTypes={value:p.a.any,options:p.a.arrayOf(p.a.shape({value:p.a.any,label:p.a.string})),styles:p.a.object,onChange:p.a.func,placeholder:p.a.string,error:p.a.bool,disabled:p.a.bool,creatable:p.a.bool};var ar=n(56);function sr(e,t){if(t&&t<=1){const n=Math.abs(Math.log10(t)),r=Math.min(n,2),i=Math.max(r,n);return e.toLocaleString("fullwide",{minimumFractionDigits:r,maximumFractionDigits:i,useGrouping:!1})}return e.toLocaleString("fullwide",{useGrouping:!1})}const lr=_.e.div.withConfig({displayName:"NumericInput__NumericInputContainer",componentId:"sc-8tky7u-0"})(["position:relative;display:flex;flex:1;max-width:100px;"]),cr=_.e.input.withConfig({displayName:"NumericInput__StyledNumericInput",componentId:"sc-8tky7u-1"})(["display:flex;width:100%;color:",";background-color:",";border-radius:4px;border:1px solid ",";padding-left:6px;font-size:12px;height:24px;box-sizing:border-box;outline:none;padding-right:",";&:hover{border-color:",";}&:focus{border-color:",";}&:disabled{background-color:",";color:",";}"],e=>e.theme.text,e=>e.theme.inputBackground,e=>e.theme.border,e=>e.unit?6*e.unit.length+10+"px":0,e=>e.theme.blueHover,e=>e.theme.blue,e=>e.theme.disabled,e=>e.theme.disabledText),ur=_.e.div.withConfig({displayName:"NumericInput__NumericInputUnit",componentId:"sc-8tky7u-2"})(["position:absolute;color:",";right:1px;top:1px;bottom:1px;background-color:",";padding:0 4px;border-top-right-radius:4px;border-bottom-right-radius:4px;line-height:20px;height:22px;"],e=>e.theme.text2,e=>e.theme.inputBackground);class hr extends u.Component{constructor(e){super(e),c()(this,"handleKeyPress",e=>{let t=0;"ArrowUp"===e.key?t=1:"ArrowDown"===e.key&&(t=-1),t&&(e.preventDefault(),this.handleStep(e,t,!0))}),c()(this,"handleKeyDown",e=>{"ArrowUp"!==e.key&&"ArrowDown"!==e.key||e.preventDefault()}),c()(this,"handleChange",e=>{const{min:t,max:n,precision:r,convertTo:i,onChange:o}=this.props,a=e.target.value;this.setState({tempValue:a,focused:!0});const s=parseFloat(a);if(!Number.isNaN(s)){const e=Object(ar.c)(s,t,n);o(i(r?Object(ar.g)(e,r):e))}}),c()(this,"handleFocus",()=>{const{value:e,convertFrom:t,precision:n}=this.props;this.setState({tempValue:t(e).toLocaleString("fullwide",{useGrouping:!1,minimumFractionDigits:0,maximumFractionDigits:Math.abs(Math.log10(n))+1}),focused:!0},()=>{this.inputEl.current.select()})}),c()(this,"handleBlur",()=>{const{value:e,onCommit:t,onChange:n}=this.props;this.setState({tempValue:null,focused:!1}),t?t(e):n(e)}),this.state={tempValue:null,focused:!1},this.inputEl=Object(u.createRef)()}increment(){this.handleStep(1,!1)}decrement(){this.handleStep(-1,!1)}handleStep(e,t,n=!0){const{smallStep:r,mediumStep:i,largeStep:o,min:a,max:s,precision:l,convertTo:c,onChange:u,onCommit:h}=this.props,d=parseFloat(this.inputEl.current.value)+Object(ar.e)(e,r,i,o)*t,p=Object(ar.c)(d,a,s),f=l?Object(ar.g)(p,l):d,m=c(f);h?h(m):u(m),this.setState({tempValue:f.toLocaleString("fullwide",{useGrouping:!1,minimumFractionDigits:0,maximumFractionDigits:Math.abs(Math.log10(l))+1}),focused:n})}render(){const e=this.props,{className:t,unit:n,smallStep:r,mediumStep:i,largeStep:o,min:a,max:l,displayPrecision:c,value:u,convertTo:d,convertFrom:p,onChange:f,onCommit:m}=e,g=K()(e,["className","unit","smallStep","mediumStep","largeStep","min","max","displayPrecision","value","convertTo","convertFrom","onChange","onCommit"]);return h.a.createElement(lr,null,h.a.createElement(cr,s()({},g,{unit:n,ref:this.inputEl,value:this.state.focused?this.state.tempValue:sr(p(u),c),onKeyUp:this.handleKeyPress,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur})),n&&h.a.createElement(ur,null,n))}}hr.propTypes={className:p.a.string,unit:p.a.node,smallStep:p.a.number.isRequired,mediumStep:p.a.number.isRequired,largeStep:p.a.number.isRequired,min:p.a.number.isRequired,max:p.a.number.isRequired,value:p.a.number.isRequired,onChange:p.a.func.isRequired,onCommit:p.a.func,convertTo:p.a.func.isRequired,convertFrom:p.a.func.isRequired,precision:p.a.number.isRequired,displayPrecision:p.a.number.isRequired},hr.defaultProps={value:0,smallStep:.025,mediumStep:.1,largeStep:.25,min:-1/0,max:1/0,displayPrecision:.001,precision:Number.EPSILON,convertTo:e=>e,convertFrom:e=>e};var dr=n(3),pr=n(34),fr=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),u.createElement("path",{d:"M15 19V5l-8 7z",key:"k0"}))}));fr.displayName="CaretLeft";var mr=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),u.createElement("path",{d:"M9 19l8-7-8-7z",key:"k0"}))}));mr.displayName="CaretRight";const gr=_.e.div.withConfig({displayName:"NumericStepperInput__StepperInputContainer",componentId:"sc-104kcwz-0"})(["display:flex;flex:1;width:100%;height:24px;input{border-left-width:0;border-right-width:0;border-radius:0;}"]),vr=_.e.button.withConfig({displayName:"NumericStepperInput__StepperButton",componentId:"sc-104kcwz-1"})(["display:flex;justify-content:center;align-items:center;background-color:",";border:1px solid ",";color:",";width:20px;padding:0;",":hover{background-color:",";}:active{background-color:",";}"],e=>e.value?e.theme.blue:e.theme.toolbar,e=>e.theme.border,e=>e.theme.text,e=>e.left?"border-top-left-radius: 4px; border-bottom-left-radius: 4px;":"border-top-right-radius: 4px; border-bottom-right-radius: 4px;",e=>e.theme.blueHover,e=>e.theme.blue);function yr(e){let{style:t,className:n,decrementTooltip:r,incrementTooltip:i}=e,o=K()(e,["style","className","decrementTooltip","incrementTooltip"]);const a=Object(u.useRef)(),l=Object(u.useCallback)(()=>{a.current.decrement()},[a]),c=Object(u.useCallback)(()=>{a.current.increment()},[a]);return h.a.createElement(gr,{style:t,className:n},h.a.createElement(Se,{info:r,position:"bottom"},h.a.createElement(vr,{left:!0,onClick:l},h.a.createElement(fr,{size:16}))),h.a.createElement(hr,s()({ref:a},o)),h.a.createElement(Se,{info:i,position:"bottom"},h.a.createElement(vr,{right:!0,onClick:c},h.a.createElement(mr,{size:16}))))}yr.propTypes={style:p.a.object,className:p.a.string,decrementTooltip:p.a.string,incrementTooltip:p.a.string};var _r=n(70),br=n.n(_r);const xr={moveLeft:"moveLeft",moveRight:"moveRight",moveX:"moveX",moveForward:"moveForward",moveBackward:"moveBackward",moveZ:"moveZ",lookX:"lookX",lookY:"lookY",moveDown:"moveDown",moveUp:"moveUp",moveY:"moveY",boost:"boost"},Sr={focus:"focus",focusPosition:"focusPosition",focusSelection:"focusSelection",zoomDelta:"zoomDelta",enableFlyMode:"enableFlyMode",disableFlyMode:"disableFlyMode",flying:"flying",selecting:"selecting",selectStart:"selectStart",selectStartPosition:"selectStartPosition",selectEnd:"selectEnd",selectEndPosition:"selectEndPosition",cursorPosition:"cursorPosition",cursorDeltaX:"cursorDeltaX",cursorDeltaY:"cursorDeltaY",panning:"panning",setTranslateMode:"setTranslateMode",setRotateMode:"setRotateMode",setScaleMode:"setScaleMode",toggleSnapMode:"toggleSnapMode",toggleTransformPivot:"toggleTransformPivot",modifier:"modifier",shift:"shift",toggleTransformSpace:"toggleTransformSpace",deleteSelected:"deleteSelected",undo:"undo",redo:"redo",duplicateSelected:"duplicateSelected",groupSelected:"groupSelected",saveProject:"saveProject",cancel:"cancel",rotateLeft:"rotateLeft",rotateRight:"rotateRight",incrementGridHeight:"incrementGridHeight",decrementGridHeight:"decrementGridHeight"},wr={keyboard:{pressed:{w:xr.moveForward,a:xr.moveLeft,s:xr.moveBackward,d:xr.moveRight,r:xr.moveDown,t:xr.moveUp,shift:xr.boost}},mouse:{move:{normalizedMovementX:xr.lookX,normalizedMovementY:xr.lookY}},computed:[{transform:e=>e.get(xr.moveRight)-e.get(xr.moveLeft),action:xr.moveX},{transform:e=>e.get(xr.moveUp)-e.get(xr.moveDown),action:xr.moveY},{transform:e=>e.get(xr.moveBackward)-e.get(xr.moveForward),action:xr.moveZ}]},Er={mouse:{dblclick:{event:[(Tr=Sr.focus,{reset:!0,defaultValue:!1,handler:()=>!0,action:Tr})],position:Sr.focusPosition},wheel:{normalizedDeltaY:Sr.zoomDelta},pressed:{left:Sr.selecting,middle:Sr.panning,right:Sr.flying},mousedown:{event:[function(e){return{handler:(t,n)=>{(!e||e(t,n))&&n.canvas.requestPointerLock()}}}(e=>2===e.button)],left:Sr.selectStart,position:Sr.selectStartPosition,right:Sr.enableFlyMode},mouseup:{event:[function(e){return{handler:(t,n)=>{(!e||e(t,n))&&document.pointerLockElement===n.canvas&&document.exitPointerLock()}}}(e=>2===e.button)],left:Sr.selectEnd,position:Sr.selectEndPosition,right:Sr.disableFlyMode},move:{position:Sr.cursorPosition,normalizedMovementX:Sr.cursorDeltaX,normalizedMovementY:Sr.cursorDeltaY}},keyboard:{pressed:{mod:Sr.modifier,shift:Sr.shift},hotkeys:{"=":Sr.incrementGridHeight,"-":Sr.decrementGridHeight,f:Sr.focusSelection,t:Sr.setTranslateMode,r:Sr.setRotateMode,y:Sr.setScaleMode,q:Sr.rotateLeft,e:Sr.rotateRight,g:Sr.grab,z:Sr.toggleTransformSpace,x:Sr.toggleTransformPivot,c:Sr.toggleSnapMode,backspace:Sr.deleteSelected,del:Sr.deleteSelected,"mod+z":Sr.undo,"mod+shift+z":Sr.redo,"mod+d":Sr.duplicateSelected,"mod+g":Sr.groupSelected,esc:Sr.cancel},globalHotkeys:{"mod+s":Sr.saveProject}}};var Tr,Mr=n(210);function Cr(e,t){if(e.length>0)for(const n of e){let e=n.object;for(;e&&!e.isNode;)e=e.parent;if(e&&e!==t&&!e.ignoreRaycast)return n.node=e,n}return null}var $r=n(440),Or=n(232);class Ar{constructor(){this.undos=[],this.redos=[],this.lastCmdTime=new Date,this.idCounter=0,this.commandUpdatesEnabled=!0,this.debug=!1}execute(e){const t=this.undos[this.undos.length-1],n=(new Date).getTime()-this.lastCmdTime.getTime();return this.commandUpdatesEnabled&&t&&t.constructor===e.constructor&&n<1e3&&t.shouldUpdate(e)?(t.update(e),e=t,this.debug&&console.log("update: "+e)):(this.undos.push(e),e.id=++this.idCounter,e.execute(),this.debug&&console.log("execute: "+e)),this.lastCmdTime=new Date,this.redos=[],e}revert(e){let t=void 0;if(0===this.undos.length)return;const n=this.undos[this.undos.length-1];if(n&&e>n.id)console.warn("Tried to revert back to an undo action with an id greater than the last action");else do{t=this.undos.length>0?this.undos.pop():void 0,void 0!==t&&(t.undo(),this.redos.push(t),this.debug&&console.log("revert: "+t))}while(t&&e!==t.id)}undo(){let e=void 0;return this.undos.length>0&&(e=this.undos.pop()),void 0!==e&&(e.undo(),this.redos.push(e),this.debug&&console.log("undo: "+e)),e}redo(){let e=void 0;return this.redos.length>0&&(e=this.redos.pop()),void 0!==e&&(e.execute(!0),this.undos.push(e),this.debug&&console.log("redo: "+e)),e}getDebugLog(){return this.undos.map(e=>e.toString()).join("\n")}clear(){this.undos=[],this.redos=[],this.idCounter=0}}const Ir=[0,0,0,0];class Pr{constructor(e,t,n){this.freed=[],this.recycle(e,t,n)}recycle(e,t,n){this.size=e,this.nextIdx=0,this.freed.length=0,this.rows=t,this.colls=n,this.maxIdx=t*n-1}nextId(){return this.freed.length?this.freed.pop():this.nextIdx++}freeId(e){this.freed.push(e)}isFull(){return!this.freed.length&&this.nextIdx>=this.maxIdx}isEmpty(){return this.nextIdx===this.freed.length}}const Lr=/android/i.test(navigator.userAgent);function kr(e,t,n,r,i){if(!Lr)return[null,null];const o=e.createTexture(),a=e.createFramebuffer();return t.activeTexture(e.TEXTURE0),t.bindTexture(e.TEXTURE_2D,o),e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0),e.texStorage2D(e.TEXTURE_2D,1,e.RGBA8,n,r),t.bindTexture(e.TEXTURE_2D_ARRAY,i),[o,a]}class Rr extends Mr.Vb{constructor(e,t={}){super(),this.renderer=e,this.layerResolution=t.layerResolution||4096,this.minTileSize=t.minTileSize||512,this.mipLevels=Math.log2(this.minTileSize)+1,this.textures=new Map,this.freeLayers=[],this.layers=[],this.maxLayers=t.maxLayers||8,this.flipY=!1,this.createTextureArray(3),this.nullTextureTransform=[0,0,0,0],this.nullTextureIndex=this.addColorRect(this.minTileSize,[1,1,1,1],this.nullTextureTransform)}getLayerWithSpace(e){for(let t=0;t<this.layers.length;t++){const n=this.layers[t];if(n.size===e&&!n.isFull())return t}return this.allocLayer(e)}allocLayer(e){const t=this.layerResolution/e;if(this.freeLayers.length){const n=this.freeLayers.pop();return this.layers[n].recycle(e,t,t),n}return this.layers.length===this.maxLayers?-1:(this.layers.length===this.arrayDepth&&this.growTextureArray(Math.min(Math.ceil(1.5*this.arrayDepth),this.maxLayers)),this.layers.push(new Pr(e,t,t)),this.layers.length-1)}nextId(e){const t=this.getLayerWithSpace(Math.max(e,this.minTileSize));if(-1!==t)return[t,this.layers[t].nextId()]}createTextureArray(e){const{state:t,properties:n}=this.renderer,r=this.renderer.context,i=n.get(this);this.glTexture=r.createTexture(),this.arrayDepth=e,this.mipFramebuffers=[],i.__webglTexture=this.glTexture,i.__webglInit=!0,t.activeTexture(r.TEXTURE0+0),t.bindTexture(r.TEXTURE_2D_ARRAY,this.glTexture),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,this.unpackAlignment),r.texParameteri(r.TEXTURE_2D_ARRAY,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D_ARRAY,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D_ARRAY,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D_ARRAY,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_LINEAR),i.__maxMipLevel=this.mipLevels,r.texStorage3D(r.TEXTURE_2D_ARRAY,this.mipLevels,r.RGBA8,this.layerResolution,this.layerResolution,e);for(let t=0;t<e;t++){const e=[];for(let n=0;n<this.mipLevels;n++){const i=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,i),r.framebufferTextureLayer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,this.glTexture,n,t),e.push(i)}this.mipFramebuffers.push(e)}r.bindFramebuffer(r.FRAMEBUFFER,null)}generateDebugMips(){const e=this.renderer.context,t=[null,[1,0,0,1],[1,0,0,1],[1,0,0,1],[0,1,0,1],[0,1,0,1],[0,1,0,1],[0,0,1,1],[0,0,1,1],[0,0,1,1],[1,0,1,1],[1,0,1,1],[1,0,1,1]];for(let n=0;n<this.arrayDepth;n++){const r=this.mipFramebuffers[n];for(let n=1;n<this.mipLevels;n++){e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r[n]);const i=t[n];e.clearColor(i[0],i[1],i[2],i[3]),e.clear(e.COLOR_BUFFER_BIT)}}}debugDumpMips(e=0){const t=this.renderer.context,n=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n);const r=document.createElement("div");r.style.zIndex="10000",r.style.position="absolute",r.style.top=r.style.bottom=r.style.left=r.style.right="0",r.style.overflow="scroll",r.style.background="black";const i=document.createElement("button");i.innerText="close",r.appendChild(i),i.addEventListener("click",()=>document.body.removeChild(r),{once:!0}),i.style.marginBottom="10px";const o=this.mipFramebuffers[e];for(let e=0;e<this.mipLevels;e++){t.bindFramebuffer(t.FRAMEBUFFER,o[e]);const n=document.createElement("canvas");n.width=n.height=this.layerResolution/Math.pow(2,e),n.style.display="block",n.style.backgroundImage="linear-gradient(45deg, #808080 25%, transparent 25%), linear-gradient(-45deg, #808080 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #808080 75%), linear-gradient(-45deg, transparent 75%, #808080 75%)",n.style.backgroundSize="64px 64px",n.style.backgroundPosition="0 0, 0 32px, 32px -32px, -32px 0px",n.style.backgroundColor="white",n.style.marginBottom="10px";const i=n.getContext("2d"),a=i.createImageData(n.width,n.height),s=new Uint8Array(n.width*n.height*4);t.readPixels(0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,s),a.data.set(s),i.putImageData(a,0,0),r.appendChild(n)}document.body.appendChild(r),t.deleteFramebuffer(n),t.bindFramebuffer(t.FRAMEBUFFER,null)}growTextureArray(e){const{state:t}=this.renderer,n=this.renderer.context,r=this.glTexture,i=this.arrayDepth,o=this.mipFramebuffers;this.createTextureArray(e);const[a,s]=kr(n,t,this.layerResolution,this.layerResolution,this.glTexture),l=this.mipLevels;for(let e=0;e<i;e++)for(let t=0;t<l;t++){const r=this.layerResolution/Math.pow(2,t);n.bindFramebuffer(n.READ_FRAMEBUFFER,o[e][t]),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,Lr?s:this.mipFramebuffers[e][t]),n.blitFramebuffer(0,0,r,r,0,0,r,r,n.COLOR_BUFFER_BIT,n.NEAREST),Lr&&(n.bindFramebuffer(n.READ_FRAMEBUFFER,s),n.copyTexSubImage3D(n.TEXTURE_2D_ARRAY,t,0,0,e,0,0,r,r))}Lr&&(n.deleteTexture(a),n.deleteFramebuffer(s));for(let e=0;e<o.length;e++){const t=o[e];for(let e=0;e<t.length;e++)n.deleteFramebuffer(t[e])}n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(r)}addTexture(e,t){const n=this.textures.get(e);if(n){n.count++;for(let e=0;e<4;e++)t[e]=n.uvTransform[e];return n.id}const r=e.image;if(!r)return void console.warn("Attempted to add a texture with no image to the atlas");let i,o=r.width,a=r.height;if(o>a){const e=a/o;o=Math.min(Mr.bb.floorPowerOfTwo(o),this.layerResolution),a=Math.round(o*e),i=o}else{const e=o/a;a=Math.min(Mr.bb.floorPowerOfTwo(a),this.layerResolution),o=Math.round(a*e),i=a}const s=this.nextId(i);if(void 0===s)return;const[l,c]=s;o!==r.width||a!==r.height?this.uploadAndResizeImage(l,c,r,o,a):this.uploadImage(l,c,r);const u=this.layers[l],h=.5/this.layerResolution;return t[0]=c%u.colls/u.colls+h,t[1]=Math.floor(c/u.rows)/u.rows+h,t[2]=1/u.colls*((o-1)/u.size),t[3]=1/u.rows*((a-1)/u.size),e.flipY&&(t[1]=t[1]+t[3],t[3]=-t[3]),this.textures.set(e,{id:s,count:1,uvTransform:t.slice()}),e.onUpdate&&e.onUpdate(),s}addColorRect(e,t,n){const r=this.nextId(e),[i,o]=r,a=this.layers[i];this.clearTile(r,t);const s=.5/this.layerResolution;return n[0]=o%a.colls/a.colls+s,n[1]=Math.floor(o/a.rows)/a.rows+s,n[2]=1/a.colls*((e-1)/a.size),n[3]=1/a.rows*((e-1)/a.size),r}clearTile(e,t){const n=this.renderer.context,[r,i]=e,o=this.layers[r],a=this.mipFramebuffers[r];n.bindFramebuffer(n.FRAMEBUFFER,a[0]);const s=i%o.colls*o.size,l=Math.floor(i/o.rows)*o.size;n.enable(n.SCISSOR_TEST),n.scissor(s,l,o.size,o.size),n.clearColor(t[0],t[1],t[2],t[3]),n.clear(n.COLOR_BUFFER_BIT),n.disable(n.SCISSOR_TEST),n.bindFramebuffer(n.FRAMEBUFFER,null),this.genMipmaps(r,i)}uploadImage(e,t,n){const r=this.renderer.state,i=this.renderer.context;r.activeTexture(i.TEXTURE0+0),r.bindTexture(i.TEXTURE_2D_ARRAY,this.glTexture),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,this.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment);const o=this.layers[e],a=t%o.colls*o.size,s=Math.floor(t/o.rows)*o.size;i.texSubImage3D(i.TEXTURE_2D_ARRAY,0,a,s,e,n.width,n.height,1,i.RGBA,i.UNSIGNED_BYTE,n),this.genMipmaps(e,t)}uploadAndResizeImage(e,t,n,r,i){const o=this.renderer.state,a=this.renderer.context;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,this.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,this.unpackAlignment);const s=a.createTexture();o.activeTexture(a.TEXTURE0),o.bindTexture(a.TEXTURE_2D,s),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,n);const l=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,l),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,s,0);const[c,u]=kr(a,o,r,i,this.glTexture),h=this.layers[e],d=t%h.colls*h.size,p=Math.floor(t/h.rows)*h.size;a.bindFramebuffer(a.READ_FRAMEBUFFER,l),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,Lr?u:this.mipFramebuffers[e][0]);const f=Lr?0:d,m=Lr?0:p;a.blitFramebuffer(0,0,n.width,n.height,f,m,f+r,m+i,a.COLOR_BUFFER_BIT,a.LINEAR),Lr&&(a.bindFramebuffer(a.READ_FRAMEBUFFER,u),a.copyTexSubImage3D(a.TEXTURE_2D_ARRAY,0,d,p,e,0,0,r,i)),a.bindFramebuffer(a.FRAMEBUFFER,null),a.deleteTexture(s),Lr&&(a.deleteTexture(c),a.deleteFramebuffer(u)),this.genMipmaps(e,t)}genMipmaps(e,t){const n=this.renderer.state,r=this.renderer.context,i=this.layers[e];let o=1;const a=i.size;let s=a,l=a/2;const c=t%i.colls,u=Math.floor(t/i.rows),[h,d]=kr(r,n,a,a,this.glTexture),p=this.mipFramebuffers[e];for(;l>=2&&o<=this.mipLevels;){const t=c*s,n=u*s,i=t+s,a=n+s,h=c*l,f=u*l;r.bindFramebuffer(r.READ_FRAMEBUFFER,p[o-1]),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,Lr?d:p[o]);const m=Lr?0:h,g=Lr?0:f;r.blitFramebuffer(t,n,i,a,m,g,m+l,g+l,r.COLOR_BUFFER_BIT,r.LINEAR),Lr&&(r.bindFramebuffer(r.READ_FRAMEBUFFER,d),r.copyTexSubImage3D(r.TEXTURE_2D_ARRAY,o,h,f,e,0,0,l,l)),s=l,o++,l/=2}r.bindFramebuffer(r.FRAMEBUFFER,null),Lr&&(r.deleteTexture(h),r.deleteFramebuffer(d))}removeTexture(e){const t=this.textures.get(e);if(t.count--,0!==t.count)return;const[n,r]=t.id,i=this.layers[n];this.clearTile(t.id,Ir),i.freeId(r),i.isEmpty()&&this.freeLayers.push(n),this.textures.delete(e)}}Object.defineProperty(Rr.prototype,"needsUpdate",{set(){console.warn("needsUpdate should not be set on a WebGLAtlasTexture, it handles texture uploading internally")}});const Dr=e=>e.join(),jr=[0,0,0,0],Nr={[Mr.o]:0,[Mr.Mb]:1,[Mr.kb]:2},Fr=new Mr.q(1,1,1),Ur=(new Mr.db).makeScale(0,0,0),Br=[0,0,0,0];class zr extends Mr.Jb{constructor(e,t="InstanceData",n=new ArrayBuffer(112*e)){super(n),this.setName(t);let r=0;this.transforms=new Float32Array(this.data,r,16*e),r+=this.transforms.byteLength,this.colors=new Float32Array(this.data,r,4*e),r+=this.colors.byteLength,this.uvTransforms=new Float32Array(this.data,r,4*e),r+=this.uvTransforms.byteLength,this.mapSettings=new Float32Array(this.data,r,4*e),r+=this.mapSettings.byteLength,this.offset=r,this.nextIdx=0,this.freed=[],this.meshes=new Array(e)}addMesh(e,t){const n=this.nextId(),r=e.material;if(r.map){const e=t.addTexture(r.map,Br);if(void 0===e)return console.warn("Mesh could not be batched. Texture atlas full."),this.freeId(n),!1;this.setInstanceUVTransform(n,Br),this.setInstanceMapSettings(n,e[0],r.map.wrapS,r.map.wrapT)}else this.setInstanceUVTransform(n,t.nullTextureTransform),this.setInstanceMapSettings(n,t.nullTextureIndex[0],Mr.o,Mr.o);return this.setInstanceTransform(n,e.matrixWorld),this.setInstanceColor(n,r.color||Fr,r.opacity||1),this.meshes[n]=e,n}removeMesh(e,t){const n=this.meshes.indexOf(e);e.material.map&&t.removeTexture(e.material.map),this.setInstanceTransform(n,Ur),this.freeId(n),this.meshes[n]=null}update(e){for(let e=0;e<this.meshes.length;e++){const t=this.meshes[e];t&&(this.setInstanceTransform(e,t.visible&&t.parent.visible?t.matrixWorld:Ur),this.setInstanceColor(e,t.material.color||Fr,t.material.opacity||1))}}nextId(){return this.freed.length?this.freed.pop():this.nextIdx++}freeId(e){this.freed.push(e)}setInstanceColor(e,t,n){jr[0]=t.r,jr[1]=t.g,jr[2]=t.b,jr[3]=n,this.colors.set(jr,4*e)}setInstanceTransform(e,t){this.transforms.set(t.elements,16*e)}setInstanceUVTransform(e,t){this.uvTransforms.set(t,4*e)}setInstanceMapSettings(e,t,n,r){this.mapSettings[4*e]=t,this.mapSettings[4*e+1]=Nr[n]||0,this.mapSettings[4*e+2]=Nr[r]||0}}const Vr=Dr`#version 300 es
precision highp float;
precision highp int;

// Keep these separate so three only sets them once
uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;

layout(std140) uniform InstanceData {
  mat4 transforms[MAX_INSTANCES];
  vec4 colors[MAX_INSTANCES];
  vec4 uvTransforms[MAX_INSTANCES];
  vec4 mapSettings[MAX_INSTANCES];
} instanceData;

in vec3 position;
in vec2 uv;

#ifdef PSEUDO_INSTANCING
in float instance;
#endif

#ifdef VERTEX_COLORS
in vec3 color;
#endif

out vec2 vUv;
out vec4 vColor;

flat out vec4 vUVTransform;
flat out vec4 vMapSettings;

out float fogDepth;

void main() {
  #ifdef PSEUDO_INSTANCING
  uint instanceIndex = uint(instance);
  #elif
  uint instanceIndex = gl_InstanceID;
  #endif

  vColor = instanceData.colors[instanceIndex];

  #ifdef VERTEX_COLORS
  vColor *= vec4(color, 1.0);
  #endif

  vUv = uv;
  vUVTransform = instanceData.uvTransforms[instanceIndex];
  vMapSettings = instanceData.mapSettings[instanceIndex];

  vec4 mvPosition = viewMatrix * instanceData.transforms[instanceIndex] * vec4(position, 1.0);

  gl_Position = projectionMatrix * mvPosition;

  fogDepth = -mvPosition.z;
}
`,Gr=Dr`#version 300 es
precision highp float;
precision highp int;
precision highp sampler2DArray;

uniform sampler2DArray map;

in float fogDepth;
uniform vec3 fogColor;

// Fog Type
// 0.0 -> disabled
// 1.0 -> linear
// 2.0 -> exponential
uniform vec4 fogOptions; // r = type; g = density; b = near; a = far;

in vec2 vUv;
in vec4 vColor;
flat in vec4 vUVTransform;
flat in vec4 vMapSettings;

out vec4 outColor;

float applyWrapping(float value, int mode) {
  if (mode == 0) {
    // CLAMP_TO_EDGE - default
    return clamp(value, 0.0, 1.0);
  } else if (mode == 1) {
    // REPEAT
    return fract(value);
  } else {
    // MIRRORED_REPEAT
    float n = mod(value, 2.0);
    return mix(n, 2.0 - n, step(1.0, n));
  }
}

void main() {
  vec2 uv = vUv;

  int wrapS = int(vMapSettings.y);
  int wrapT = int(vMapSettings.z);
  uv.s = applyWrapping(uv.s, wrapS);
  uv.t = applyWrapping(uv.t, wrapT);

  vec2 uvMin = vUVTransform.xy;
  vec2 uvScale = vUVTransform.zw;
  uv = uvMin + uv * uvScale;

  int mapIdx = int(vMapSettings.x);
  outColor = texture(map, vec3(uv, mapIdx)) * vColor;

  float fogType = fogOptions.r;

  if (fogType > 0.5) {
    float fogFactor = 0.0;

    if (fogType < 1.5) {
      float fogNear = fogOptions.z;
      float fogFar = fogOptions.w;
      fogFactor = smoothstep( fogNear, fogFar, fogDepth );
    } else {
      float fogDensity = fogOptions.y;
      fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
    }

    outColor.rgb = mix( outColor.rgb, fogColor, fogFactor );
  }
}
`;class Hr extends Mr.eb{constructor(e,t,n={}){const r=Object.assign({bufferSize:65536,enableVertexColors:!0,pseudoInstancing:!0,maxInstances:512,sharedUniforms:{}},n),i=new Mr.m;i.addAttribute("instance",new Mr.z(new Float32Array(r.bufferSize),1)),i.addAttribute("position",new Mr.z(new Float32Array(3*r.bufferSize),3)),r.enableVertexColors&&i.addAttribute("color",new Mr.z(new Float32Array(3*r.bufferSize).fill(1),3)),i.addAttribute("uv",new Mr.z(new Float32Array(2*r.bufferSize),2)),i.setIndex(new Mr.ac(new Uint32Array(r.bufferSize),1)),i.setDrawRange(0,0);const o=new Mr.Ib({vertexShader:r.shaders&&r.shaders.vertexShader||Vr,fragmentShader:r.shaders&&r.shaders.fragmentShader||Gr,defines:{MAX_INSTANCES:r.maxInstances,PSEUDO_INSTANCING:r.pseudoInstancing,VERTEX_COLORS:r.enableVertexColors},uniforms:Object.assign({},r.sharedUniforms,{map:{value:t}})});o.uniformsGroups=[e],super(i,o),this.bufferSize=r.bufferSize,this.enableVertexColors=r.enableVertexColors,this.maxInstances=r.maxInstances,this.vertCount=0,this.meshes=[],this.frustumCulled=!1,this.atlas=t,this.ubo=e}addMesh(e){const t=e.geometry;e.updateMatrixWorld(!0);const n=this.ubo.addMesh(e,this.atlas);if(!1===n)return!1;this.material.needsUpdate=!0,e.layers.disable(0);const r=t.index.array,i=t.index.count,o=t.attributes.position.count,a=this.geometry.index.array,s=this.geometry.drawRange.count;for(let e=0;e<i;e++)a[s+e]=r[e]+this.vertCount;this.geometry.attributes.instance.array.fill(n,this.vertCount,this.vertCount+o),this.geometry.attributes.instance.needsUpdate=!0;const l=t.attributes.position,c=this.geometry.attributes.position.array;for(let e=0;e<o;e++)c[3*(this.vertCount+e)]=l.getX(e),c[3*(this.vertCount+e)+1]=l.getY(e),c[3*(this.vertCount+e)+2]=l.getZ(e);if(this.geometry.attributes.position.needsUpdate=!0,this.enableVertexColors&&t.attributes.color){const e=t.attributes.color,n=this.geometry.attributes.color.array;for(let t=0;t<o;t++)n[3*(this.vertCount+t)]=e.getX(t),n[3*(this.vertCount+t)+1]=e.getY(t),n[3*(this.vertCount+t)+2]=e.getZ(t);this.geometry.attributes.color.needsUpdate=!0}if(t.attributes.uv){const e=this.geometry.attributes.uv.array,n=t.attributes.uv,r=t.attributes.uv.count;for(let t=0;t<r;t++)e[2*(this.vertCount+t)]=n.getX(t),e[2*(this.vertCount+t)+1]=n.getY(t);this.geometry.attributes.uv.needsUpdate=!0}return this.vertCount+=o,this.geometry.setDrawRange(0,this.geometry.drawRange.count+t.index.count),this.geometry.index.needsUpdate=!0,this.meshes.push(e),!0}removeMesh(e){const t=this.meshes.indexOf(e);let n=0,r=0;for(let e=0;e<t;e++){const t=this.meshes[e].geometry;n+=t.attributes.position.count,r+=t.index.count}const i=e.geometry.attributes.position.count,o=this.geometry.attributes;o.instance.array.copyWithin(n,n+i),o.instance.needsUpdate=!0,o.position.array.copyWithin(3*n,3*(n+i)),o.position.needsUpdate=!0,o.color.array.copyWithin(3*n,3*(n+i)),o.color.needsUpdate=!0,o.uv.array.copyWithin(2*n,2*(n+i)),o.uv.needsUpdate=!0,this.vertCount-=i;const a=e.geometry.index.count,s=this.geometry.index.array;this.geometry.setDrawRange(0,this.geometry.drawRange.count-a);for(let e=r;e<this.geometry.drawRange.count;e++)s[e]=s[e+a]-i;this.geometry.index.needsUpdate=!0,this.ubo.removeMesh(e,this.atlas),this.material.needsUpdate=!0,this.meshes.splice(t,1)}}class Wr{constructor(e,t,n={}){this.scene=e,this.renderer=t,this.fogOptions=new Mr.fc,this.fogColor=new Mr.q,this.sharedUniforms={fogOptions:{value:this.fogOptions},fogColor:{value:this.fogColor}},this.maxInstances=n.maxInstances||512,this.maxBufferSize=n.maxBufferSize||65536,this.batches=[],this.batchForMesh=new WeakMap,this.atlas=new Rr(t),this.ubo=n.ubo||new zr(this.maxInstances),this.shaders=n.shaders||{},this.instanceCount=0}addMesh(e){if(this.instanceCount>=this.maxInstances)return console.warn("Batch is full, not batching",e),!1;if(e.isSkinnedMesh)return console.warn("SkinnedMesh is not supported, skipping.",e),!1;if(!e.geometry)return console.warn("Mesh does not use BufferGeometry, skipping.",e),!1;const t=e.geometry.attributes;for(const n in t){if(t[n].isInterleavedBufferAttribute)return console.warn("Mesh uses unsupported InterleavedBufferAttribute, skipping.",e),!1}const n=e;if(this.batchForMesh.has(n))return console.warn("Mesh is already in the batch, skipping.",e),!1;if(Array.isArray(e.material))return console.warn("Mesh uses unsupported multi-material, skipping.",e),!1;if(e.material.transparent||0!==e.material.alphaTest)return console.warn("Mesh uses unsupported transparency, skipping.",e),!1;let r=null;const i=this.batches;if(!n.geometry.index)return console.warn("Non-indexed mesh, skipping.",e),!1;const o=n.geometry.index.count,a=n.geometry.attributes.position.count;if(o>this.maxBufferSize||a>this.maxBufferSize)return!1;for(let e=0;e<this.batches.length;e++){const t=i[e];if(n.material.side===t.material.side&&t.geometry.drawRange.count+o<t.bufferSize&&t.vertCount+n.geometry.attributes.position.count<t.bufferSize){r=t;break}}return null===r&&(r=new Hr(this.ubo,this.atlas,{maxInstances:this.maxInstances,bufferSize:this.maxBufferSize,shaders:this.shaders.unlit,sharedUniforms:this.sharedUniforms}),r.material.side=n.material.side,this.scene.add(r),this.batches.push(r)),!!r.addMesh(n)&&(this.batchForMesh.set(n,r),this.instanceCount++,!0)}removeMesh(e){const t=e,n=this.batchForMesh.get(t);return!!n&&(n.removeMesh(t),this.batchForMesh.delete(t),this.instanceCount--,!0)}updateFog(){const e=this.scene.fog;e?(this.fogColor.copy(e.color),e.isFog?(this.fogOptions.x=1,this.fogOptions.z=e.near,this.fogOptions.w=e.far):(this.fogOptions.x=2,this.fogOptions.y=e.density)):this.fogOptions.x=0}update(e){this.updateFog(),this.ubo.update(e)}}var qr,Jr,Yr,Xr={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")};function Kr(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(Kr.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),Kr.FullScreenQuad=(qr=new Mr.rb(-1,1,1,-1,0,1),Jr=new Mr.vb(2,2),Yr=function(e){this._mesh=new Mr.eb(Jr,e)},Object.defineProperty(Yr.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(Yr.prototype,{render:function(e){e.render(this._mesh,qr)}}),Yr);var Zr=function(e,t){Kr.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof Mr.Ob?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Mr.cc.clone(e.uniforms),this.material=new Mr.Ob({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Kr.FullScreenQuad(this.material)};Zr.prototype=Object.assign(Object.create(Kr.prototype),{constructor:Zr,render:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}});var Qr=function(e,t){Kr.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};Qr.prototype=Object.assign(Object.create(Kr.prototype),{constructor:Qr,render:function(e,t,n){var r,i,o=e.getContext(),a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(r=0,i=1):(r=1,i=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,r,4294967295),a.buffers.stencil.setClear(i),a.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.buffers.stencil.setLocked(!0)}});var ei=function(){Kr.call(this),this.needsSwap=!1};ei.prototype=Object.create(Kr.prototype),Object.assign(ei.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}});var ti=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:Mr.U,magFilter:Mr.U,format:Mr.Eb,stencilBuffer:!1},r=e.getSize(new Mr.dc);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,(t=new Mr.jc(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===Xr&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===Zr&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Zr(Xr),this.clock=new Mr.p};Object.assign(ti.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,n,r=this.renderer.getRenderTarget(),i=!1,o=this.passes.length;for(n=0;n<o;n++)if(!1!==(t=this.passes[n]).enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),t.needsSwap){if(i){var a=this.renderer.getContext(),s=this.renderer.state.buffers.stencil;s.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),s.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==Qr&&(t instanceof Qr?i=!0:t instanceof ei&&(i=!1))}this.renderer.setRenderTarget(r)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new Mr.dc);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var ni=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(ni.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),ni.FullScreenQuad=function(){var e=new Mr.rb(-1,1,1,-1,0,1),t=new Mr.vb(2,2),n=function(e){this._mesh=new Mr.eb(t,e)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(n.prototype,{render:function(t){t.render(this._mesh,e)}}),n}();var ri=function(e,t,n,r,i){Kr.call(this),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};ri.prototype=Object.assign(Object.create(Kr.prototype),{constructor:ri,render:function(e,t,n){var r,i,o=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(r=e.getClearColor().getHex(),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(r,i),this.scene.overrideMaterial=null,e.autoClear=o}});class ii extends Mr.Ob{constructor(e){super({defines:{DEPTH_TO_VIEW_Z:(e.isPerspectiveCamera?"perspective":"orthographic")+"DepthToViewZ"},uniforms:{depthTexture:{value:null},cameraNearFar:{value:new Mr.dc(.5,.5)},textureMatrix:{value:new Mr.db}},vertexShader:"\n        varying vec4 projTexCoord;\n        varying vec4 vPosition;\n        uniform mat4 textureMatrix;\n  \n        void main() {\n  \n          vPosition = modelViewMatrix * vec4( position, 1.0 );\n          vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n          projTexCoord = textureMatrix * worldPosition;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  \n        }\n      ",fragmentShader:"\n        #include <packing>\n        varying vec4 vPosition;\n        varying vec4 projTexCoord;\n        uniform sampler2D depthTexture;\n        uniform vec2 cameraNearFar;\n  \n        void main() {\n  \n          float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n          float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n          float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n          gl_FragColor = vec4(0.0, 1.0 - depthTest, 1.0, 1.0);\n  \n        }\n      "})}}class oi extends Mr.Ob{constructor(){super({uniforms:{maskTexture:{value:null},texSize:{value:new Mr.dc(.5,.5)}},vertexShader:"\n        varying vec2 vUv;\n\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n      ",fragmentShader:"\n        varying vec2 vUv;\n        uniform sampler2D maskTexture;\n        uniform vec2 texSize;\n\n        void main() {\n          vec2 invSize = 1.0 / texSize;\n          vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n          vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n          vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n          vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n          vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n          float diff1 = (c1.r - c2.r)*0.5;\n          float diff2 = (c3.r - c4.r)*0.5;\n          float d = length( vec2(diff1, diff2) ) * 0.5;\n          float depth = (c1.g + c2.g + c3.g + c4.g) * 0.25;\n          gl_FragColor = vec4(depth * d, 0.0, 0.0, d);\n        }\n      "})}}class ai extends Mr.Ob{constructor(){super({uniforms:{edgeTexture:{value:null},edgeColor:{value:new Mr.ec(1,1,1)},texSize:{value:new Mr.dc(0,0)}},vertexShader:"\n        varying vec2 vUv;\n\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n      ",fragmentShader:"\n        varying vec2 vUv;\n        uniform sampler2D edgeTexture;\n        uniform vec3 edgeColor;\n        uniform vec2 texSize;\n\n        void main() {\n          vec2 invSize = 1.0 / texSize;\n          vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n          vec4 c1 = texture2D( edgeTexture, vUv + uvOffset.xy);\n          vec4 c2 = texture2D( edgeTexture, vUv - uvOffset.xy);\n          vec4 c3 = texture2D( edgeTexture, vUv + uvOffset.yw);\n          vec4 c4 = texture2D( edgeTexture, vUv - uvOffset.yw);\n          float visibilityFactor =  c1.r + c2.r + c3.r + c4.r;\n          gl_FragColor = vec4(edgeColor, visibilityFactor);\n        }\n      ",depthTest:!1,depthWrite:!1,transparent:!0})}}class si extends ni{constructor(e,t,n,r,i){super(),this.renderScene=t,this.renderCamera=n,this.selectedObjects=r,this.spokeRenderer=i,this.selectedRenderables=[],this.nonSelectedRenderables=[],this.edgeColor=new Mr.q(1,1,1),this.resolution=new Mr.dc(e.x,e.y);const o={minFilter:Mr.U,magFilter:Mr.U,format:Mr.Eb};this.maskBufferMaterial=new Mr.fb({color:16777215}),this.maskBufferMaterial.side=Mr.w,this.renderTargetMaskBuffer=new Mr.jc(this.resolution.x,this.resolution.y,o),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new Mr.gb,this.depthMaterial.side=Mr.w,this.depthMaterial.depthPacking=Mr.Db,this.depthMaterial.blending=Mr.ob,this.depthMaskMaterial=new ii(this.renderCamera),this.depthMaskMaterial.side=Mr.w,this.renderTargetDepthBuffer=new Mr.jc(this.resolution.x,this.resolution.y,o),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.edgeDetectionMaterial=new oi,this.renderTargetEdgeBuffer=new Mr.jc(this.resolution.x,this.resolution.y,o),this.renderTargetEdgeBuffer.texture.name="OutlinePass.edge",this.renderTargetEdgeBuffer.texture.generateMipmaps=!1,this.overlayMaterial=new ai,this.copyUniforms=Mr.cc.clone(Xr.uniforms),this.copyUniforms.opacity.value=1,this.copyMaterial=new Mr.Ob({uniforms:this.copyUniforms,vertexShader:Xr.vertexShader,fragmentShader:Xr.fragmentShader,blending:Mr.ob,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new Mr.q,this.oldClearAlpha=1,this.outlineCamera=new Mr.rb(-1,1,1,-1,0,1),this.outlineScene=new Mr.Nb,this.quad=new Mr.eb(new Mr.vb(2,2),null),this.quad.frustumCulled=!1,this.outlineScene.add(this.quad),this.textureMatrix=new Mr.db,this.renderableLayers=new Mr.O}render(e,t,n,r,i){if(this.selectedObjects.length>0){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();const t=e.autoClear;e.autoClear=!1,i&&e.context.disable(e.context.STENCIL_TEST),e.setClearColor(16777215,1);for(const e of this.selectedObjects)e.traverse(e=>{!(e.isMesh||e.isLine||e.isSprite||e.isPoints)||e.isHelper||e.disableOutline||(this.selectedRenderables.push(e),e.userData.prevVisible=e.visible,e.visible=!1)});const r=this.renderScene.background;this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),this.spokeRenderer.batchManager&&this.spokeRenderer.batchManager.update(),e.render(this.renderScene,this.renderCamera);for(const e of this.selectedRenderables)e.visible=e.userData.prevVisible,e.layers.test(this.renderableLayers)||(e.layers.enable(0),e.userData.prevDisableRenderLayer=!0),delete e.userData.prevVisible;this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse),this.renderScene.traverse(e=>{(e.isMesh||e.isLine||e.isSprite||e.isPoints)&&-1===this.selectedRenderables.indexOf(e)&&(this.nonSelectedRenderables.push(e),e.userData.prevVisible=e.visible,e.visible=!1)}),this.renderScene.overrideMaterial=this.depthMaskMaterial,this.depthMaskMaterial.uniforms.cameraNearFar.value=new Mr.dc(this.renderCamera.near,this.renderCamera.far),this.depthMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.depthMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),this.spokeRenderer.batchManager&&this.spokeRenderer.batchManager.update(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null;for(const e of this.nonSelectedRenderables)e.visible=e.userData.prevVisible,delete e.userData.prevVisible;for(const e of this.selectedRenderables)e.userData.prevDisableRenderLayer&&(e.layers.disable(0),delete e.userData.prevDisableRenderLayer);this.selectedRenderables=[],this.nonSelectedRenderables=[],this.renderScene.background=r,this.quad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value=new Mr.dc(this.renderTargetMaskBuffer.width,this.renderTargetMaskBuffer.height),e.setRenderTarget(this.renderTargetEdgeBuffer),e.clear(),e.render(this.outlineScene,this.outlineCamera),this.quad.material=this.overlayMaterial,this.overlayMaterial.uniforms.edgeTexture.value=this.renderTargetEdgeBuffer.texture,this.overlayMaterial.uniforms.edgeColor.value=this.edgeColor,this.overlayMaterial.uniforms.texSize.value=new Mr.dc(this.renderTargetEdgeBuffer.width,this.renderTargetEdgeBuffer.height),i&&e.context.enable(e.context.STENCIL_TEST),e.setRenderTarget(n),e.render(this.outlineScene,this.outlineCamera),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=t}this.renderToScreen&&(this.quad.material=this.copyMaterial,this.copyUniforms.tDiffuse.value=n.texture,e.setRenderTarget(null),e.render(this.outlineScene,this.outlineCamera))}}var li=n(286),ci=n(351);const ui=new Mr.q(1,1,1),hi=(new Mr.db).makeScale(0,0,0),di=[0,0,0,0];function pi(e){let t=e;for(;t&&!t.isNode;)t=t.parent;return!!t&&t.visible}class fi extends zr{constructor(...e){super(...e),c()(this,"meshAtlases",new Map)}addMesh(e,t){return this.meshAtlases.set(e,t),super.addMesh(e,t)}removeMesh(e,t){return this.meshAtlases.delete(e),super.removeMesh(e,t)}update(e){for(let e=0;e<this.meshes.length;e++){const t=this.meshes[e];if(!t)continue;this.setInstanceTransform(e,pi(t)?t.matrixWorld:hi),this.setInstanceColor(e,t.material.color||ui,t.material.opacity||1);const n=t.material,r=this.meshAtlases.get(t);if(r)if(n.map){const t=r.addTexture(n.map,di);if(void 0===t)return console.warn("Mesh could not be batched. Texture atlas full."),this.freeId(e),!1;this.setInstanceUVTransform(e,di),this.setInstanceMapSettings(e,t[0],n.map.wrapS,n.map.wrapT)}else this.setInstanceUVTransform(e,r.nullTextureTransform),this.setInstanceMapSettings(e,r.nullTextureIndex[0],Mr.o,Mr.o)}}}class mi extends class{constructor(e,t){this.name="Default",this.renderer=e,this.editor=t,this.passes=[],this.enableShadows=!1}render(){}}{constructor(e,t,n){super(e,t),this.name="Unlit",this.effectComposer=new ti(e),this.renderPass=new ri(t.scene,t.camera),this.effectComposer.addPass(this.renderPass),this.renderHelpersPass=new ri(t.helperScene,t.camera),this.renderHelpersPass.clear=!1,this.effectComposer.addPass(this.renderHelpersPass);const r=e.domElement.parentElement;this.outlinePass=new si(new Mr.dc(r.offsetWidth,r.offsetHeight),t.scene,t.camera,t.selectedTransformRoots,n),this.outlinePass.edgeColor=new Mr.q("#006EFF"),this.outlinePass.renderToScreen=!0,this.effectComposer.addPass(this.outlinePass),this.enableShadows=!1,this.enabledBatchedObjectLayers=new Mr.O,this.disabledBatchedObjectLayers=new Mr.O,this.disabledBatchedObjectLayers.disable(0),this.disabledBatchedObjectLayers.enable(2),this.hiddenLayers=new Mr.O,this.hiddenLayers.set(1),this.disableBatching=!1,this.spokeRenderer=n}onSceneSet(){if(this.renderer.shadowMap.enabled=this.enableShadows,this.editor.scene.traverse(e=>{e.setShadowsEnabled&&e.setShadowsEnabled(this.enableShadows),this.disableBatching&&e.isMesh&&!e.layers.test(this.enabledBatchedObjectLayers)&&!e.layers.test(this.hiddenLayers)?(e.layers.enable(0),e.layers.enable(2)):!this.disableBatching&&e.isMesh&&e.layers.test(this.disabledBatchedObjectLayers)&&!e.layers.test(this.hiddenLayers)&&(e.layers.disable(0),e.layers.disable(2))}),this.spokeRenderer.batchManager)for(const e of this.spokeRenderer.batchManager.batches)e.visible=!this.disableBatching;this.renderPass.scene=this.editor.scene,this.renderPass.camera=this.editor.camera,this.outlinePass.renderScene=this.editor.scene,this.outlinePass.renderCamera=this.editor.camera}onResize(){const e=this.renderer.domElement.parentElement;this.renderer.setSize(e.offsetWidth,e.offsetHeight,!1)}render(e){this.effectComposer.render(e)}}class gi extends mi{constructor(e,t,n){super(e,t,n),this.name="Lit",this.enableShadows=!1,this.disableBatching=!0}}class vi extends mi{constructor(e,t,n){super(e,t,n),this.name="Shadows",this.disableBatching=!0,this.enableShadows=!0}}class yi extends mi{constructor(e,t,n){super(e,t,n),this.name="Wireframe",this.enableShadows=!1,this.disableBatching=!0,this.renderPass.overrideMaterial=new Mr.fb({wireframe:!0})}}class _i extends mi{constructor(e,t,n){super(e,t,n),this.name="Normals",this.enableShadows=!1,this.disableBatching=!0,this.renderPass.overrideMaterial=new Mr.hb}}class bi{constructor(e,t){c()(this,"onSceneSet",()=>{this.renderer.capabilities.isWebGL2&&(this.batchManager=new Wr(this.editor.scene,this.renderer,{ubo:new fi(512)})),this.renderMode.onSceneSet()}),c()(this,"onResize",()=>{const e=this.camera,t=this.canvas.parentElement.parentElement;e.aspect=t.offsetWidth/t.offsetHeight,e.updateProjectionMatrix(),this.renderer.setSize(t.offsetWidth,t.offsetHeight,!1),this.renderMode.onResize()}),c()(this,"takeScreenshot",async(e=1920,t=1080)=>{const{screenshotRenderer:n,camera:r}=this,i=this.renderer;this.renderer=n,this.editor.disableUpdate=!0;const o=r.aspect;r.aspect=e/t,r.updateProjectionMatrix(),r.layers.disable(1),n.setSize(e,t,!0),n.render(this.editor.scene,r),this.editor.scene.traverse(e=>{e.isNode&&e.onRendererChanged()}),this.renderMode!==this.shadowsRenderMode&&this.shadowsRenderMode.onSceneSet(),this.screenshotRenderer.render(this.editor.scene,r),r.layers.enable(1),r.updateMatrixWorld();const a=r.matrixWorld.clone(),s=await Object(li.c)(n.domElement);return r.aspect=o,r.updateProjectionMatrix(),this.editor.disableUpdate=!1,this.renderer=i,this.renderMode.onSceneSet(),this.editor.scene.traverse(e=>{e.isNode&&e.onRendererChanged()}),{blob:s,cameraTransform:a}}),this.editor=e,this.canvas=t;const n=Object(ci.a)(t.parentElement.parentElement.offsetWidth,t.parentElement.parentElement.offsetHeight,{canvas:t});n.setPixelRatio(window.devicePixelRatio),n.info.autoReset=!1,this.renderer=n,this.renderMode=new gi(n,e,this),this.shadowsRenderMode=new vi(n,e,this),this.renderModes=[],this.renderer.capabilities.isWebGL2&&this.renderModes.push(new mi(n,e,this)),this.renderModes.push(this.renderMode,this.shadowsRenderMode,new yi(n,e,this),new _i(n,e,this)),this.screenshotRenderer=Object(ci.a)(1920,1080);const r=e.camera;this.camera=r}update(e,t){this.renderer.info.reset(),this.batchManager&&this.batchManager.update(),this.renderMode.render(e),this.onUpdateStats&&(this.renderer.info.render.fps=1/e,this.renderer.info.render.frameTime=1e3*e,this.onUpdateStats(this.renderer.info))}setRenderMode(e){this.renderMode=e,this.renderMode.onSceneSet(),this.renderMode.onResize()}addBatchedObject(e){if(!this.batchManager)return;const t=this.renderMode;e.traverse(e=>{e.setShadowsEnabled&&e.setShadowsEnabled(t.enableShadows),e.isMesh&&this.batchManager.addMesh(e),t.disableBatching&&!e.layers.test(t.enabledBatchedObjectLayers)&&(e.layers.enable(0),e.layers.enable(2))});for(const e of this.batchManager.batches)e.visible=!t.disableBatching}removeBatchedObject(e){this.batchManager&&e.traverse(e=>{e.isMesh&&this.batchManager.removeMesh(e)})}dispose(){this.renderer.dispose(),this.screenshotRenderer.dispose()}}var xi=n(352);const Si="static",wi="dynamic",Ei="inherits";function Ti(e,t){e.staticMode=t}function Mi(e){return e.staticMode}function Ci(e){return Mi(e)===Si}function $i(e){let t=e;for(;t;){if(t.staticMode!==Ei&&void 0!==t.staticMode)return t.staticMode;t=t.parent}return wi}function Oi(e){return"#"+e.getHexString()}var Ai=n(489),Ii=n.n(Ai);function Pi(e,t){const n=e.tracks.map(e=>function(e,t){const{nodeName:n,objectName:r,objectIndex:i,propertyName:o,propertyIndex:a}=Mr.Ab.parseTrackName(e.name);let s="";if(void 0!==n){const e=t.get(n);if(void 0===e)throw new Error(`Error cloning model. Could not find KeyframeTrack target with uuid: "${n}"`);s+=e}void 0!==r&&(s+="."+r),void 0!==i&&(s+="["+i+"]"),void 0!==o&&(s+="."+o),void 0!==a&&(s+="["+a+"]");const l=e.clone();return l.name=s,l}(e,t));return new Mr.c(e.name,e.duration,n)}function Li(e,t){const n=new Map,r=new Map,i=e.clone();return function e(t,n,r){r(t,n);for(let i=0;i<t.children.length;i++)e(t.children[i],n.children[i],r)}(e,i,(e,t)=>{n.set(e,t)}),e.traverse(e=>{const i=n.get(e);if(!i)throw new Error(`Couldn't find the cloned node for ${e.nodeName||e.type} "${e.name}"`);t&&(i.uuid=e.uuid),r.set(e.uuid,i.uuid)}),e.traverse(e=>{const t=n.get(e);if(!t)return;if(e.animations&&(t.animations=e.animations.map(e=>Pi(e,r))),e.isMesh&&e.geometry.boundsTree&&(t.geometry.boundsTree=e.geometry.boundsTree),!e.isSkinnedMesh)return;const i=e.skeleton.bones;t.skeleton=e.skeleton.clone(),t.skeleton.bones=i.map(e=>{if(!n.has(e))throw new Error("Required bones are not descendants of the given object.");return n.get(e)}),t.bind(t.skeleton,e.bindMatrix)}),i}let ki=null;class Ri extends Mr.qb{static async load(){if(ki)return Promise.resolve(ki);const e=await new Or.b(Ii.a).loadGLTF();return ki=e,ki}constructor(){if(super(),this.name="LoadingCube",this.type="LoadingCube",!ki)throw new Error("LoadingCube must be loaded before it can be used. Await LoadingCube.load()");this.model=Li(ki.scene),this.add(this.model),this.mixer=new Mr.d(this),this.mixer.clipAction(this.model.animations[0]).play(),this.worldScale=new Mr.ec}copy(e,t=!0){this.remove(this.model),super.copy(e,!1);for(const n of e.children){let r;n===e.model?(r=Li(n),this.model=r):!0===t&&(r=n.clone()),r&&this.add(r)}return this}update(e){const t=this.getWorldScale(this.worldScale);0!==t.x&&0!==t.y&&0!==t.z&&(this.model.scale.set(2/t.x,2/t.y,2/t.z),this.mixer.update(e))}}var Di=n(490),ji=n.n(Di),Ni=n(225);let Fi=null,Ui=null;class Bi extends Mr.eb{static async load(){return Fi||(Fi=Object(Ni.a)(ji.a).then(e=>(e.format=Mr.Eb,e.magFilter=Mr.lb,e)),Ui=await Fi,Ui)}constructor(){if(!Ui)throw new Error("ErrorIcon must be loaded before it can be used. Await ErrorIcon.load()");const e=new Mr.vb,t=new Mr.fb;t.map=Ui,t.side=Mr.w,t.transparent=!0,super(e,t),this.name="ErrorIcon",this.type="ErrorIcon"}}function zi(e){var t,n;return n=t=class extends e{static canAddNode(e){return!0}static async load(){return Promise.resolve()}static shouldDeserialize(e){return!!e.components.find(e=>e.name===this.legacyComponentName)}static async deserialize(e,t){const n=new this(e);if(n.name=t.name,t.components){const e=t.components.find(e=>"transform"===e.name);if(e){const{position:t,rotation:r,scale:i}=e.props;n.position.set(t.x,t.y,t.z),n.rotation.set(r.x,r.y,r.z),n.scale.set(i.x,i.y,i.z)}const r=t.components.find(e=>"visible"===e.name);r&&(n.visible=r.props.visible)}return n}constructor(e,...t){super(...t),this.editor=e,this.nodeName=this.constructor.nodeName,this.name=this.constructor.nodeName,this.isNode=!0,this.isCollapsed=!1,this.disableTransform=this.constructor.disableTransform,this.useMultiplePlacementMode=this.constructor.useMultiplePlacementMode,this.ignoreRaycast=this.constructor.ignoreRaycast,this.staticMode=Ei,this.originalStaticMode=null,this.saveParent=!1,this.loadingCube=null,this.errorIcon=null,this.issues=[]}clone(e){return new this.constructor(this.editor).copy(this,e)}copy(e,t=!0){if(t&&(this.remove(this.loadingCube),this.remove(this.errorIcon)),super.copy(e,t),t){const t=e.children.findIndex(t=>t===e.loadingCube);-1!==t&&(this.loadingCube=this.children[t]);const n=e.children.findIndex(t=>t===e.errorIcon);-1!==n&&(this.errorIcon=this.children[n])}return this.issues=e.issues.slice(),this}onPlay(){}onUpdate(e){this.loadingCube&&this.loadingCube.update(e)}onPause(){}onAdd(){}onChange(){}onRemove(){}onSelect(){}onDeselect(){}onRendererChanged(){}serialize(e){const t={name:this.name,components:[{name:"transform",props:{position:{x:this.position.x,y:this.position.y,z:this.position.z},rotation:{x:this.rotation.x,y:this.rotation.y,z:this.rotation.z},scale:{x:this.scale.x,y:this.scale.y,z:this.scale.z}}},{name:"visible",props:{visible:this.visible}}]};if(e)for(const n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;const r={},i=e[n];for(const e in i){if(!Object.prototype.hasOwnProperty.call(i,e))continue;const t=i[e];t instanceof Mr.q?r[e]=Oi(t):r[e]=t}t.components.push({name:n,props:r})}return t}prepareForExport(){this.userData.MOZ_spoke_uuid=this.uuid,this.visible||this.addGLTFComponent("visible",{visible:this.visible})}addGLTFComponent(e,t){if(this.userData.gltfExtensions||(this.userData.gltfExtensions={}),this.userData.gltfExtensions.MOZ_hubs_components||(this.userData.gltfExtensions.MOZ_hubs_components={}),void 0!==t&&"object"!=typeof t)throw new Error("glTF component props must be an object or undefined");const n={};for(const e in t){if(!Object.prototype.hasOwnProperty.call(t,e))continue;const r=t[e];r instanceof Mr.q?n[e]=Oi(r):n[e]=r}this.userData.gltfExtensions.MOZ_hubs_components[e]=n}replaceObject(e){(e=e||(new Mr.qb).copy(this,!1)).uuid=this.uuid,this.userData.gltfExtensions&&this.userData.gltfExtensions.MOZ_hubs_components&&(e.userData.gltfExtensions.MOZ_hubs_components=this.userData.gltfExtensions.MOZ_hubs_components);for(const t of this.children)t.isNode&&(e.children.push(t),t.parent=e);this.parent.add(e),this.parent.remove(this)}gltfIndexForUUID(e){return{__gltfIndexForUUID:e}}getObjectByUUID(e){return this.getObjectByProperty("uuid",e)}computeStaticMode(){return $i(this)}computeAndSetStaticModes(){this.traverse(e=>{Ti(e,$i(e))})}computeAndSetVisible(){this.traverse(e=>{e.parent&&!e.parent.visible&&(e.visible=!1)})}showLoadingCube(){this.loadingCube||(this.loadingCube=new Ri,this.add(this.loadingCube));const e=this.getWorldScale(this.loadingCube.scale);0===e.x||0===e.y||0===e.z?this.loadingCube.scale.set(1,1,1):this.loadingCube.scale.set(1/e.x,1/e.y,1/e.z)}hideLoadingCube(){this.loadingCube&&(this.remove(this.loadingCube),this.loadingCube=null)}showErrorIcon(){this.errorIcon||(this.errorIcon=new Bi,this.add(this.errorIcon));const e=this.getWorldScale(this.errorIcon.scale);0===e.x||0===e.y||0===e.z?this.errorIcon.scale.set(1,1,1):this.errorIcon.scale.set(1/e.x,1/e.y,1/e.z)}hideErrorIcon(){this.errorIcon&&(this.remove(this.errorIcon),this.errorIcon=null)}isInherits(){return function(e){const t=Mi(e);return t===Ei||void 0===t}(this)}isStatic(){return Ci(this)}isDynamic(){return Mi(this)===wi}findNodeByType(e){if(this.constructor===e)return this;for(const t of this.children)if(t.isNode){const n=t.findNodeByType(e);if(n)return n}return null}getNodesByType(e){const t=[];this.constructor===e&&t.push(this);for(const n of this.children)if(n.isNode){const r=n.getNodesByType(e);for(const e of r)t.push(e)}return t}getRuntimeResourcesForStats(){}},c()(t,"nodeName","Unknown Node"),c()(t,"disableTransform",!1),c()(t,"useMultiplePlacementMode",!1),c()(t,"ignoreRaycast",!1),c()(t,"initialElementProps",{}),c()(t,"hideInElementsPanel",!1),n}var Vi={computeTangents:function(e){var t=e.index,n=e.attributes;if(null!==t&&void 0!==n.position&&void 0!==n.normal&&void 0!==n.uv){var r=t.array,i=n.position.array,o=n.normal.array,a=n.uv.array,s=i.length/3;void 0===n.tangent&&e.setAttribute("tangent",new Mr.l(new Float32Array(4*s),4));for(var l=n.tangent.array,c=[],u=[],h=0;h<s;h++)c[h]=new Mr.ec,u[h]=new Mr.ec;var d=new Mr.ec,p=new Mr.ec,f=new Mr.ec,m=new Mr.dc,g=new Mr.dc,v=new Mr.dc,y=new Mr.ec,_=new Mr.ec,b=e.groups;0===b.length&&(b=[{start:0,count:r.length}]);h=0;for(var x=b.length;h<x;++h)for(var S=P=(I=b[h]).start,w=P+I.count;S<w;S+=3)L(r[S+0],r[S+1],r[S+2]);var E,T,M,C=new Mr.ec,$=new Mr.ec,O=new Mr.ec,A=new Mr.ec;for(h=0,x=b.length;h<x;++h){var I,P;for(S=P=(I=b[h]).start,w=P+I.count;S<w;S+=3)k(r[S+0]),k(r[S+1]),k(r[S+2])}}else console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function L(e,t,n){d.fromArray(i,3*e),p.fromArray(i,3*t),f.fromArray(i,3*n),m.fromArray(a,2*e),g.fromArray(a,2*t),v.fromArray(a,2*n);var r=p.x-d.x,o=f.x-d.x,s=p.y-d.y,l=f.y-d.y,h=p.z-d.z,b=f.z-d.z,x=g.x-m.x,S=v.x-m.x,w=g.y-m.y,E=v.y-m.y,T=1/(x*E-S*w);y.set((E*r-w*o)*T,(E*s-w*l)*T,(E*h-w*b)*T),_.set((x*o-S*r)*T,(x*l-S*s)*T,(x*b-S*h)*T),c[e].add(y),c[t].add(y),c[n].add(y),u[e].add(_),u[t].add(_),u[n].add(_)}function k(e){O.fromArray(o,3*e),A.copy(O),T=c[e],C.copy(T),C.sub(O.multiplyScalar(O.dot(T))).normalize(),$.crossVectors(A,T),M=$.dot(u[e]),E=M<0?-1:1,l[4*e]=C.x,l[4*e+1]=C.y,l[4*e+2]=C.z,l[4*e+3]=E}},mergeBufferGeometries:function(e,t){for(var n=null!==e[0].index,r=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),o={},a={},s=e[0].morphTargetsRelative,l=new Mr.m,c=0,u=0;u<e.length;++u){var h=e[u];if(n!==(null!==h.index))return null;for(var d in h.attributes){if(!r.has(d))return null;void 0===o[d]&&(o[d]=[]),o[d].push(h.attributes[d])}if(s!==h.morphTargetsRelative)return null;for(var d in h.morphAttributes){if(!i.has(d))return null;void 0===a[d]&&(a[d]=[]),a[d].push(h.morphAttributes[d])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(h.userData),t){var p;if(n)p=h.index.count;else{if(void 0===h.attributes.position)return null;p=h.attributes.position.count}l.addGroup(c,p,u),c+=p}}if(n){var f=0,m=[];for(u=0;u<e.length;++u){for(var g=e[u].index,v=0;v<g.count;++v)m.push(g.getX(v)+f);f+=e[u].attributes.position.count}l.setIndex(m)}for(var d in o){var y=this.mergeBufferAttributes(o[d]);if(!y)return null;l.setAttribute(d,y)}for(var d in a){var _=a[d][0].length;if(0===_)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[d]=[];for(u=0;u<_;++u){var b=[];for(v=0;v<a[d].length;++v)b.push(a[d][v][u]);var x=this.mergeBufferAttributes(b);if(!x)return null;l.morphAttributes[d].push(x)}}return l},mergeBufferAttributes:function(e){for(var t,n,r,i=0,o=0;o<e.length;++o){var a=e[o];if(a.isInterleavedBufferAttribute)return null;if(void 0===t&&(t=a.array.constructor),t!==a.array.constructor)return null;if(void 0===n&&(n=a.itemSize),n!==a.itemSize)return null;if(void 0===r&&(r=a.normalized),r!==a.normalized)return null;i+=a.array.length}var s=new t(i),l=0;for(o=0;o<e.length;++o)s.set(e[o].array,l),l+=e[o].array.length;return new Mr.l(s,n,r)},interleaveAttributes:function(e){for(var t,n=0,r=0,i=0,o=e.length;i<o;++i){var a=e[i];if(void 0===t&&(t=a.array.constructor),t!==a.array.constructor)return console.warn("AttributeBuffers of different types cannot be interleaved"),null;n+=a.array.length,r+=a.itemSize}var s=new Mr.J(new t(n),r),l=0,c=[],u=["getX","getY","getZ","getW"],h=["setX","setY","setZ","setW"],d=0;for(o=e.length;d<o;d++){var p=(a=e[d]).itemSize,f=a.count,m=new Mr.K(s,p,l,a.normalized);c.push(m),l+=p;for(var g=0;g<f;g++)for(var v=0;v<p;v++)m[h[v]](g,a[u[v]](g))}return c},estimateBytesUsed:function(e){var t=0;for(var n in e.attributes){var r=e.getAttribute(n);t+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}var i=e.getIndex();return t+=i?i.count*i.itemSize*i.array.BYTES_PER_ELEMENT:0},mergeVertices:function(e,t=1e-4){t=Math.max(t,Number.EPSILON);for(var n={},r=e.getIndex(),i=e.getAttribute("position"),o=r?r.count:i.count,a=0,s=Object.keys(e.attributes),l={},c={},u=[],h=["getX","getY","getZ","getW"],d=0,p=s.length;d<p;d++){l[_=s[d]]=[],(w=e.morphAttributes[_])&&(c[_]=new Array(w.length).fill().map(()=>[]))}var f=Math.log10(1/t),m=Math.pow(10,f);for(d=0;d<o;d++){var g=r?r.getX(d):d,v="",y=0;for(p=s.length;y<p;y++)for(var _=s[y],b=(S=e.getAttribute(_)).itemSize,x=0;x<b;x++)v+=~~(S[h[x]](g)*m)+",";if(v in n)u.push(n[v]);else{for(y=0,p=s.length;y<p;y++){_=s[y];var S=e.getAttribute(_),w=e.morphAttributes[_],E=(b=S.itemSize,l[_]),T=c[_];for(x=0;x<b;x++){var M=h[x];if(E.push(S[M](g)),w)for(var C=0,$=w.length;C<$;C++)T[C].push(w[C][M](g))}}n[v]=a,u.push(a),a++}}const O=e.clone();for(d=0,p=s.length;d<p;d++){_=s[d];var A=e.getAttribute(_),I=new A.array.constructor(l[_]);S=new Mr.l(I,A.itemSize,A.normalized);if(O.setAttribute(_,S),_ in c)for(y=0;y<c[_].length;y++){var P=e.morphAttributes[_][y],L=(I=new P.array.constructor(c[_][y]),new Mr.l(I,P.itemSize,P.normalized));O.morphAttributes[_][y]=L}}return O.setIndex(u),O}};async function Gi(e){const t=function(e){const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");return n.drawImage(e,0,0),n.getImageData(0,0,t.width,t.height)}(e),n=await crypto.subtle.digest("SHA-256",t.data);return Array.from(new Uint8Array(n)).map(e=>("00"+e.toString(16)).slice(-2)).join("")}var Hi=n(260);async function Wi(e,t){let n=e.get(t.src);return n||(n=await Gi(t),e.set(t.src,n)),n}async function qi(e,t,n){return t&&n?t.wrapS===n.wrapS&&t.wrapT===n.wrapT&&t.magFilter===n.magFilter&&t.minFilter===n.minFilter&&await async function(e,t,n){return t===n||!(!t||!n)&&await Wi(e,t)===await Wi(e,n)}(e,t.image,n.image):t===n}async function Ji(e,t,n){const r=e.imageHashes;return t.alphaTest===n.alphaTest&&t.blendDst===n.blendDst&&t.blendDstAlpha===n.blendDstAlpha&&t.blendEquation===n.blendEquation&&t.blendEquationAlpha===n.blendEquationAlpha&&t.blending===n.blending&&t.blendSrc===n.blendSrc&&t.blendSrcAlpha===n.blendSrcAlpha&&t.opacity===n.opacity&&t.side===n.side&&t.transparent===n.transparent&&t.color.equals(n.color)&&await qi(r,t.map,n.map)}async function Yi(e,t,n){if(!n||!n.image)return n;const r=await Wi(e,n.image),i=t.get(r);return i||(t.set(r,n),n)}class Xi{static async combineMeshes(e){e.computeAndSetStaticModes(),e.computeAndSetVisible();const t=[],n=new Map,r=new Map,i=Object(Hi.a)(e);for(const e of i)e.map=await Yi(n,r,e.map),e.roughnessMap=await Yi(n,r,e.roughnessMap),e.metalnessMap=await Yi(n,r,e.metalnessMap),e.aoMap=await Yi(n,r,e.aoMap),e.normalMap=await Yi(n,r,e.normalMap),e.emissiveMap=await Yi(n,r,e.emissiveMap);await async function e(t,n){await n(t);for(const r of t.children)await e(r,n)}(e,async e=>{if(Ci(e)&&e.isMesh){let r=!1;for(const n of t)if(await n._tryAdd(e)){r=!0;break}r||t.push(new Xi(e,n))}});for(const n of t){const t=n._combine();t&&e.add(t)}return e}constructor(e,t){if(!e.isMesh)throw new Error("MeshCombinationGroup must be initialized with a Mesh.");this.initialObject=e,this.meshes=[e],this.imageHashes=t}async _tryAdd(e){if(!e.isMesh||e.isSkinnedMesh)return!1;if(!e.geometry.isBufferGeometry)return!1;const t=Xi.MaterialComparators[e.material.type];return e.visible===this.initialObject.visible&&e.castShadow===this.initialObject.castShadow&&e.receiveShadow===this.initialObject.receiveShadow&&!e.userData.gltfExtensions&&(!(!t||!await t(this,this.initialObject.material,e.material))&&(!!function(e,t){let n=0,r=0;for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&(n++,!Object.prototype.hasOwnProperty.call(t,r)))return!1;for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&r++;return n===r}(this.initialObject.geometry.attributes,e.geometry.attributes)&&(this.meshes.push(e),!0)))}_combine(){const e=this.meshes[0];if(1===this.meshes.length)return null;const t=[];for(const e of this.meshes){const n=e.geometry.clone(),r=e.matrixWorld;n.applyMatrix(r);const i=r.elements[0]*r.elements[5]*r.elements[10]<0,o=n.index.array;if(i&&o)for(let e=0;e<o.length;e+=3){const t=o[e+1];o[e+1]=o[e+2],o[e+2]=t}t.push(n),e.parent.remove(e)}const n=Vi.mergeBufferGeometries(t);delete n.userData.mergedUserData;const r=new Mr.eb(n,e.material);return r.name="CombinedMesh",r.userData.gltfExtensions={MOZ_hubs_components:{visible:{visible:e.visible},shadow:{cast:e.castShadow,receive:e.receiveShadow}}},r}}c()(Xi,"MaterialComparators",{MeshStandardMaterial:async function(e,t,n){const r=e.imageHashes;return t.roughness===n.roughness&&t.metalness===n.metalness&&t.aoMapIntensity===n.aoMapIntensity&&t.normalScale.equals(n.normalScale)&&t.emissive.equals(n.emissive)&&await Ji(e,t,n)&&await qi(r,t.roughnessMap,n.roughnessMap)&&await qi(r,t.metalnessMap,n.metalnessMap)&&await qi(r,t.aoMap,n.aoMap)&&await qi(r,t.normalMap,n.normalMap)&&await qi(r,t.emissiveMap,n.emissiveMap)},MeshBasicMaterial:Ji});class Ki extends(zi(Mr.E)){serialize(){return super.serialize({group:{}})}}function Zi(e,t){let n=null;return e.traverse(e=>{!n&&e.isNode&&e.uuid===t&&(n=e)}),n}c()(Ki,"legacyComponentName","group"),c()(Ki,"nodeName","Group");var Qi=n(39);const eo={Stereo:"stereo",PannerNode:"pannernode"},to={Linear:"linear",Inverse:"inverse",Exponential:"exponential"},no=Object.values(eo).map(e=>({label:e,value:e})),ro=Object.values(to).map(e=>({label:e,value:e}));class io extends Mr.qb{constructor(e,t="audio"){super();const n=document.createElement(t);n.setAttribute("playsinline",""),n.setAttribute("webkit-playsinline",""),n.crossOrigin="anonymous",n.loop=!0,this.el=n,this._src="",this.audioListener=e,this.controls=!0,this.audioType=eo.PannerNode,this.volume=.5}get duration(){return this.el.duration}get src(){return this.el.src}set src(e){this.load(e).catch(console.error)}get autoPlay(){return this.el.autoplay}set autoPlay(e){this.el.autoplay=e}get loop(){return this.el.loop}set loop(e){this.el.loop=e}get audioType(){return this._audioType}set audioType(e){if(e===this._audioType)return;let t;const n=this.audio;t=e===eo.PannerNode?new Mr.zb(this.audioListener):new Mr.e(this.audioListener),n&&(t.gain.gain.value=n.getVolume(),this.audioSource&&n.disconnect(),this.remove(n)),this.audioSource&&t.setNodeSource(this.audioSource),this.audio=t,this.add(t),this._audioType=e}get volume(){return this.audio.getVolume()}set volume(e){this.audio.gain.gain.value=e}get distanceModel(){return this.audioType===eo.PannerNode?this.audio.getDistanceModel():null}set distanceModel(e){this.audioType===eo.PannerNode&&this.audio.setDistanceModel(e)}get rolloffFactor(){return this.audioType===eo.PannerNode?this.audio.getRolloffFactor():null}set rolloffFactor(e){if(this.audioType===eo.PannerNode)return this.audio.setRolloffFactor(e)}get refDistance(){return this.audioType===eo.PannerNode?this.audio.getRefDistance():null}set refDistance(e){this.audioType===eo.PannerNode&&this.audio.setRefDistance(e)}get maxDistance(){return this.audioType===eo.PannerNode?this.audio.getMaxDistance():null}set maxDistance(e){this.audioType===eo.PannerNode&&this.audio.setMaxDistance(e)}get coneInnerAngle(){return this.audioType===eo.PannerNode?this.audio.panner.coneInnerAngle:null}set coneInnerAngle(e){this.audioType===eo.PannerNode&&(this.audio.panner.coneInnerAngle=e)}get coneOuterAngle(){return this.audioType===eo.PannerNode?this.audio.panner.coneOuterAngle:null}set coneOuterAngle(e){this.audioType===eo.PannerNode&&(this.audio.panner.coneOuterAngle=e)}get coneOuterGain(){return this.audioType===eo.PannerNode?this.audio.panner.coneOuterGain:null}set coneOuterGain(e){this.audioType===eo.PannerNode&&(this.audio.panner.coneOuterGain=e)}loadMedia(e){return new Promise((t,n)=>{this.el.src=e;let r=null;const i=()=>{r(),t()},o=e=>{r(),n(new Qi.b(`Error loading video "${this.el.src}"`,e))};r=()=>{this.el.removeEventListener("loadeddata",i),this.el.removeEventListener("error",o)},this.el.addEventListener("loadeddata",i),this.el.addEventListener("error",o)})}async load(e){return await this.loadMedia(e),this.audioSource=this.audioListener.context.createMediaElementSource(this.el),this.audio.setNodeSource(this.audioSource),this}copy(e,t=!0){if(super.copy(e,!1),t)for(let t=0;t<e.children.length;t++){const n=e.children[t];n!==e.audio&&this.add(n.clone())}return this.controls=e.controls,this.autoPlay=e.autoPlay,this.loop=e.loop,this.audioType=e.audioType,this.volume=e.volume,this.distanceModel=e.distanceModel,this.rolloffFactor=e.rolloffFactor,this.refDistance=e.refDistance,this.maxDistance=e.maxDistance,this.coneInnerAngle=e.coneInnerAngle,this.coneOuterAngle=e.coneOuterAngle,this.coneOuterGain=e.coneOuterGain,this.src=e.src,this}}const oo="disabled",ao="linear",so="exponential";class lo extends(zi(Mr.Nb)){static canAddNode(){return!1}static async loadProject(e,t){t.version||(t=function(e){const{root:t,metadata:n,entities:r}=e,i=Mr.bb.generateUUID(),o={[t]:i};for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&(o[e]=Mr.bb.generateUUID());const a={[i]:{name:t}};for(const[e,t]of Object.entries(r)){a[o[e]]=Object.assign({},t,{name:e,parent:o[t.parent]})}return{version:2,root:o[t],entities:a,metadata:n}}(t)),2===t.version&&(t=function(e){e.version=3;for(const t in e.entities){if(!Object.prototype.hasOwnProperty.call(e.entities,t))continue;const n=e.entities[t];if(!n.components)continue;n.components.push({name:"visible",props:{value:!0}});const r=n.components.find(e=>"gltf-model"===e.name),i=n.components.find(e=>"nav-mesh"===e.name);!i&&r&&r.props.includeInFloorPlan&&(n.components.push({name:"collidable",props:{}}),n.components.push({name:"walkable",props:{}}));n.components.find(e=>"ground-plane"===e.name)&&n.components.push({name:"walkable",props:{}}),r&&i&&(n.components=[{name:"floor-plan",props:{autoCellSize:!0,cellSize:1,cellHeight:.1,agentHeight:1,agentRadius:1e-4,agentMaxClimb:.5,agentMaxSlope:45,regionMinSize:4}}])}return e}(t)),3===t.version&&(t=function(e){e.version=4;for(const t in e.entities){if(!Object.prototype.hasOwnProperty.call(e.entities,t))continue;const n=e.entities[t];if(!n.components)continue;const r=n.components.find(e=>"visible"===e.name);if(r){if(void 0!==r.props.visible)continue;void 0!==r.props.value?r.props={visible:r.props.value}:r.props={visible:!0}}}return e}(t));const{root:n,metadata:r,entities:i}=t;let o=null;const a=[];function s(e){a.push(e)}const l=[];function c(e,t){l.push(t)}const u=function(e){const t=[];let n=[];for(const r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;const i=e[r];i.parent&&e[i.parent]?n.push(r):t.push(r)}const r={};for(const t of n){const n=e[t];r[n.parent]||(r[n.parent]=[]),r[n.parent].push(t)}for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&r[t].sort((t,n)=>{const r=e[t],i=e[n];return r.index-i.index});function i(e){const n=r[e];if(void 0!==n){n.forEach(e=>t.push(e));for(const e of n)i(e)}}n=t.concat();for(const e of n)i(e);return t}(i);for(const t of u){const a=i[t];let l;for(const t of e.nodeTypes)if(t.shouldDeserialize(a)){l=t;break}if(!l)throw new Error(`No node constructor found for entity "${a.name}"`);const u=await l.deserialize(e,a,s,c);if(u.uuid=t,a.parent){const e=Zi(o,a.parent);if(!e)throw new Error(`Node "${a.name}" with uuid "${a.uuid}" specifies parent "${a.parent}", but was not found.`);e.children.splice(a.index,0,u),u.parent=e}else{if(t!==n)throw new Error(`Node "${a.name}" with uuid "${a.uuid}" does not specify a parent.`);o=u,o.metadata=r,e.scene=o}u.onChange()}return await Promise.all(a),[o,l]}static shouldDeserialize(e){return void 0===e.parent}static async deserialize(e,t){const n=await super.deserialize(e,t);if(t.components){const e=t.components.find(e=>"fog"===e.name);if(e){const{type:t,color:r,density:i,near:o,far:a}=e.props;n.fogType=t,n.fogColor.set(r),n.fogDensity=i,n.fogNearDistance=o,n.fogFarDistance=a}const r=t.components.find(e=>"background"===e.name);if(r){const{color:e}=r.props;n.background.set(e)}const i=t.components.find(e=>"audio-settings"===e.name);if(i){const e=i.props;n.overrideAudioSettings=e.overrideAudioSettings,n.avatarDistanceModel=e.avatarDistanceModel,n.avatarRolloffFactor=e.avatarRolloffFactor,n.avatarRefDistance=e.avatarRefDistance,n.avatarMaxDistance=e.avatarMaxDistance,n.mediaVolume=e.mediaVolume,n.mediaDistanceModel=e.mediaDistanceModel,n.mediaRolloffFactor=e.mediaRolloffFactor,n.mediaRefDistance=e.mediaRefDistance,n.mediaMaxDistance=e.mediaMaxDistance,n.mediaConeInnerAngle=e.mediaConeInnerAngle,n.mediaConeOuterAngle=e.mediaConeOuterAngle,n.mediaConeOuterGain=e.mediaConeOuterGain}}return n}constructor(e){super(e),this.url=null,this.metadata={},this.background=new Mr.q(11184810),this._environmentMap=null,this._fogType=oo,this._fog=new Mr.A(16777215,.0025),this._fogExp2=new Mr.B(16777215,.0025),this.fog=null,this.overrideAudioSettings=!1,this.avatarDistanceModel=to.Inverse,this.avatarRolloffFactor=2,this.avatarRefDistance=1,this.avatarMaxDistance=1e4,this.mediaVolume=.5,this.mediaDistanceModel=to.Inverse,this.mediaRolloffFactor=1,this.mediaRefDistance=1,this.mediaMaxDistance=1e4,this.mediaConeInnerAngle=360,this.mediaConeOuterAngle=0,this.mediaConeOuterGain=0,Ti(this,Si)}get fogType(){return this._fogType}set fogType(e){switch(this._fogType=e,e){case ao:this.fog=this._fog;break;case so:this.fog=this._fogExp2;break;default:this.fog=null}}get fogColor(){return this.fogType===ao?this._fog.color:this._fogExp2.color}get fogDensity(){return this._fogExp2.density}set fogDensity(e){this._fogExp2.density=e}get fogNearDistance(){return this._fog.near}set fogNearDistance(e){this._fog.near=e}get fogFarDistance(){return this._fog.far}set fogFarDistance(e){this._fog.far=e}get environmentMap(){return this._environmentMap}updateEnvironmentMap(e){this._environmentMap=e,this.traverse(t=>{t.material&&t.material.isMeshStandardMaterial&&(t.material.envMap=e,t.material.needsUpdate=!0)})}copy(e,t=!0){return super.copy(e,t),this.url=e.url,this.metadata=e.metadata,this._environmentMap=e._environmentMap,this.fogType=e.fogType,this.fogColor.copy(e.fogColor),this.fogDensity=e.fogDensity,this.fogNearDistance=e.fogNearDistance,this.fogFarDistance=e.fogFarDistance,this.overrideAudioSettings=e.overrideAudioSettings,this.avatarDistanceModel=e.avatarDistanceModel,this.avatarRolloffFactor=e.avatarRolloffFactor,this.avatarRefDistance=e.avatarRefDistance,this.avatarMaxDistance=e.avatarMaxDistance,this.mediaVolume=e.mediaVolume,this.mediaDistanceModel=e.mediaDistanceModel,this.mediaRolloffFactor=e.mediaRolloffFactor,this.mediaRefDistance=e.mediaRefDistance,this.mediaMaxDistance=e.mediaMaxDistance,this.mediaConeInnerAngle=e.mediaConeInnerAngle,this.mediaConeOuterAngle=e.mediaConeOuterAngle,this.mediaConeOuterGain=e.mediaConeOuterGain,this}serialize(){const e={version:4,root:this.uuid,metadata:JSON.parse(JSON.stringify(this.metadata)),entities:{[this.uuid]:{name:this.name,components:[{name:"fog",props:{type:this.fogType,color:Oi(this.fogColor),near:this.fogNearDistance,far:this.fogFarDistance,density:this.fogDensity}},{name:"background",props:{color:Oi(this.background)}},{name:"audio-settings",props:{overrideAudioSettings:this.overrideAudioSettings,avatarDistanceModel:this.avatarDistanceModel,avatarRolloffFactor:this.avatarRolloffFactor,avatarRefDistance:this.avatarRefDistance,avatarMaxDistance:this.avatarMaxDistance,mediaVolume:this.mediaVolume,mediaDistanceModel:this.mediaDistanceModel,mediaRolloffFactor:this.mediaRolloffFactor,mediaRefDistance:this.mediaRefDistance,mediaMaxDistance:this.mediaMaxDistance,mediaConeInnerAngle:this.mediaConeInnerAngle,mediaConeOuterAngle:this.mediaConeOuterAngle,mediaConeOuterGain:this.mediaConeOuterGain}}]}}};return this.traverse(t=>{if(!t.isNode||t===this)return;const n=t.serialize();n.parent=t.parent.uuid;let r=0;for(const e of t.parent.children){if(e===t)break;e.isNode&&r++}n.index=r,e.entities[t.uuid]=n}),e}prepareForExport(e){this.children=this.children.filter(e=>e.isNode);const t=[];this.traverse(e=>{e.isNode&&e!==this&&t.push(e)});for(const n of t)n.prepareForExport(e);this.addGLTFComponent("background",{color:this.background}),this.fogType===ao?this.addGLTFComponent("fog",{type:this.fogType,color:Oi(this.fogColor),near:this.fogNearDistance,far:this.fogFarDistance}):this.fogType===so&&this.addGLTFComponent("fog",{type:this.fogType,color:Oi(this.fogColor),density:this.fogDensity}),this.overrideAudioSettings&&this.addGLTFComponent("audio-settings",{avatarDistanceModel:this.avatarDistanceModel,avatarRolloffFactor:this.avatarRolloffFactor,avatarRefDistance:this.avatarRefDistance,avatarMaxDistance:this.avatarMaxDistance,mediaVolume:this.mediaVolume,mediaDistanceModel:this.mediaDistanceModel,mediaRolloffFactor:this.mediaRolloffFactor,mediaRefDistance:this.mediaRefDistance,mediaMaxDistance:this.mediaMaxDistance,mediaConeInnerAngle:this.mediaConeInnerAngle,mediaConeOuterAngle:this.mediaConeOuterAngle,mediaConeOuterGain:this.mediaConeOuterGain})}async combineMeshes(){await Xi.combineMeshes(this)}removeUnusedObjects(){this.computeAndSetStaticModes(),function e(t){let n=!!t.parent;for(const r of t.children.slice(0))e(r)||(n=!1);const r=n&&(t.constructor===Mr.qb||t.constructor===Mr.Nb||t.constructor===Mr.E||t.constructor===Ki)&&0===t.children.length&&Ci(t)&&!function(e){const t=e.userData;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!0;return!1}(t);return!(!n||!r)&&(t.parent.remove(t),!0)}(this)}getAnimationClips(){const e=[];return this.traverse(t=>{if(t.isNode&&"Model"===t.type){t.activeClip&&e.push(t.activeClip)}}),e}getContentAttributions(){const e=[],t=new Set;return this.traverse(n=>{if(!n.isNode||"Model"!==n.type)return;const r=n.attribution;if(r&&r){const n=r.url||`${r.name}_${r.author}`;if(t.has(n))return;t.add(n),e.push(r)}}),e}clearMetadata(){this.metadata={}}setMetadata(e){const t=this.metadata||{};this.metadata=Object.assign(t,e)}}c()(lo,"nodeName","Scene"),c()(lo,"disableTransform",!0);class co extends Mr.qb{constructor(){super(),this.position.y=.005,this.navMesh=null,this.trimesh=null,this.heightfield=null,this.heightfieldMesh=null}setNavMesh(e){this.navMesh&&this.remove(this.navMesh),this.navMesh=e,e&&(this.add(e),this.navMesh.layers.set(1),this.navMesh.visible=!1)}setTrimesh(e){this.trimesh&&this.remove(this.trimesh),this.trimesh=e,e&&(this.add(e),this.trimesh.layers.set(1),this.trimesh.visible=!1)}setHeightfield(e){this.heightfield=e||null}copy(e,t=!0){if(this.heightfield=JSON.parse(JSON.stringify(e.heightfield)),t&&(this.remove(this.navMesh),this.remove(this.trimesh)),super.copy(e,t),t){const t=e.children.indexOf(e.navMesh);-1!==t&&(this.navMesh=this.children[t]);const n=e.children.indexOf(e.trimesh);-1!==n&&(this.trimesh=this.children[n])}return this}}class uo extends Mr.qb{constructor(){super(),this._receiveShadow=!0;const e=new Mr.jb({roughness:1,metalness:0,color:"#5DE336"}),t=new Mr.eb(uo._geometry,e);t.name="GroundPlaneMesh",t.position.y=-.05,t.rotation.x=-Math.PI/2,this.mesh=t,this.mesh.receiveShadow=this.receiveShadow,this.add(this.mesh)}get color(){return this.mesh.material.color}get receiveShadow(){return this._receiveShadow}set receiveShadow(e){if(this._receiveShadow=e,this.mesh){this.mesh.receiveShadow=e;const t=this.mesh.material;if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e].needsUpdate=!0;else t.needsUpdate=!0}}copy(e,t=!0){if(t&&this.remove(this.mesh),super.copy(e,t),t){const t=e.children.indexOf(e.mesh);-1!==t&&(this.mesh=this.children[t])}return this.color.copy(e.color),this}}c()(uo,"_geometry",new Mr.n(4e3,32));class ho extends(zi(uo)){static canAddNode(e){return null===e.scene.findNodeByType(ho)}static async deserialize(e,t){const n=await super.deserialize(e,t),{color:r}=t.components.find(e=>"ground-plane"===e.name).props;n.color.set(r);const i=t.components.find(e=>"shadow"===e.name);return i&&(n.receiveShadow=i.props.receive),n.walkable=!!t.components.find(e=>"walkable"===e.name),n}constructor(e){super(e),this.walkable=!0,this.walkableMesh=new Mr.eb(new Mr.n(1,32),new Mr.fb),this.walkableMesh.name="WalkableMesh",this.walkableMesh.scale.set(100,100,100),this.walkableMesh.position.y=-.05,this.walkableMesh.rotation.x=-Math.PI/2,this.walkableMesh.visible=!1,this.add(this.walkableMesh)}copy(e,t=!0){if(t&&this.remove(this.walkableMesh),super.copy(e,t),t){const t=e.children.findIndex(t=>t===e.walkableMesh);-1!==t&&(this.walkableMesh=this.children[t])}return this.walkable=e.walkable,this}serialize(){const e={"ground-plane":{color:this.color},shadow:{receive:this.receiveShadow}};return this.walkable&&(e.walkable={}),super.serialize(e)}prepareForExport(){super.prepareForExport();const e=new Mr.qb;e.scale.set(this.walkableMesh.scale.x,.1,this.walkableMesh.scale.z),e.userData.gltfExtensions={MOZ_hubs_components:{"box-collider":{position:e.position,rotation:{x:e.rotation.x,y:e.rotation.y,z:e.rotation.z},scale:e.scale}}},this.add(e),this.remove(this.walkableMesh),this.addGLTFComponent("shadow",{receive:this.receiveShadow,cast:!1})}getRuntimeResourcesForStats(){return{meshes:[this.mesh],materials:[this.mesh.material]}}}c()(ho,"legacyComponentName","ground-plane"),c()(ho,"nodeName","Ground Plane");class po extends(zi(Mr.qb)){static async deserialize(e,t){const n=await super.deserialize(e,t);return n.walkable=!!t.components.find(e=>"walkable"===e.name),n}constructor(e){super(e);const t=new Mr.eb(po._geometry,po._material),n=new Mr.k(t,65280);n.layers.set(1),this.helper=n,this.add(n),this.walkable=!1}copy(e,t=!0){if(t&&this.remove(this.helper),super.copy(e,t),t){const t=e.children.indexOf(e.helper);if(-1!==t){const e=new Mr.eb(po._geometry,po._material),n=new Mr.k(e,65280);n.layers.set(1),this.helper=n,n.parent=this,this.children.splice(t,1,n)}}return this.walkable=e.walkable,this}serialize(){const e={"box-collider":{}};return this.walkable&&(e.walkable={}),super.serialize(e)}prepareForExport(){super.prepareForExport(),this.remove(this.helper),this.addGLTFComponent("box-collider",{position:this.position,rotation:{x:this.rotation.x,y:this.rotation.y,z:this.rotation.z},scale:this.scale})}}function fo(e){const t=[];for(const n of e){let e=n.geometry,r=e.attributes;if(e.isBufferGeometry||(e=(new Mr.m).fromGeometry(e),r=e.attributes),!r.position)continue;if(3!==r.position.itemSize)throw new Error("Tried to merge geometry with an invalid number of positions");e.index&&(e=e.toNonIndexed());const i=new Mr.m;i.addAttribute("position",e.attributes.position.clone()),n.updateMatrixWorld(),i.applyMatrix(n.matrixWorld),e=i,t.push(e)}if(0===t.length)return function(){const e=new Mr.m;return e.setIndex([]),e.addAttribute("position",new Mr.z([],3)),e}();const n=Vi.mergeBufferGeometries(t),r=n.clone(),i=r.attributes.position.array;for(let e=0;e<i.length;e+=9){const t=i[e],n=i[e+1],r=i[e+2],o=6;i[e]=i[e+o],i[e+1]=i[e+o+1],i[e+2]=i[e+o+2],i[e+o]=t,i[e+o+1]=n,i[e+o+2]=r}return Vi.mergeBufferGeometries([n,r])}c()(po,"legacyComponentName","box-collider"),c()(po,"nodeName","Box Collider"),c()(po,"_geometry",new Mr.j),c()(po,"_material",new Mr.ab);var mo=n(491),go=n.n(mo);const vo=["success","unknown error","out of memory error","invalid navmesh data","error generating navmesh heightfield","error rasterizing navmesh","error generating navmesh compact heightfield","error eroding navmesh walkable area","error generating navmesh distance field","error generating navmesh regions","error generating monotone navmesh regions","error generating navmesh layer regions","error generating navmesh contours","error generating navmesh data","error generating navmesh detail geometry"];var yo=n(492),_o=n.n(yo);var bo=n(354),xo=n.n(bo);let So=null;class wo extends(zi(Mr.qb)){static async load(){const{scene:e}=await new Or.b(xo.a).loadGLTF();e.traverse(e=>{e.isMesh&&e.layers.set(1)}),So=e}constructor(e){super(e),So?(this.helper=So.clone(),this.add(this.helper)):(console.warn("SpawnPointNode: helper model was not loaded before creating a new SpawnPointNode"),this.helper=null)}copy(e,t=!0){if(t&&this.remove(this.helper),super.copy(e,t),t){const t=e.children.findIndex(t=>t===e.helper);-1!==t&&(this.helper=this.children[t])}return this}serialize(){return super.serialize({"spawn-point":{}})}prepareForExport(){super.prepareForExport(),this.remove(this.helper),this.addGLTFComponent("spawn-point",{})}}c()(wo,"legacyComponentName","spawn-point"),c()(wo,"nodeName","Spawn Point");var Eo=n(493);const To=new class{constructor(){this.worker=new go.a,this.working=!1}async buildNavMesh(e,t,n){if(this.working)throw new Error("Already building nav mesh");if(this.working=!0,0===e.attributes.position.count)return this.working=!1,e;const r=e.attributes.position.array,i=new Int32Array(r.length/3);for(let e=0;e<i.length;e++)i[e]=e;const o=new Promise((e,t)=>{let r=null,i=null,o=null;const a=()=>{n.removeEventListener("abort",o),this.worker.removeEventListener("message",r),this.worker.removeEventListener("message",i),this.working=!1};r=t=>{e(t.data),a()},o=()=>{this.worker.terminate(),this.worker=new go.a;const e=new Error("Canceled navmesh generation.");e.aborted=!0,t(e),a()},i=e=>{t(e),a()},n.addEventListener("abort",o),this.worker.addEventListener("message",r),this.worker.addEventListener("error",i)});this.worker.postMessage({verts:r,faces:i,params:t},[r.buffer,i.buffer]);const a=await o;if(a.error)throw new Error(vo[a.status]||a.error);const s=new Mr.m;return s.addAttribute("position",new Mr.z(a.verts,3)),s.setIndex(new Mr.Zb(a.indices,1)),s}},Mo=new class{constructor(){this.worker=new _o.a,this.working=!1}async buildHeightfield(e,t,n){if(this.working)throw new Error("Already building heightfield");if(this.working=!0,0===e.attributes.position.count)return this.working=!1,null;const r=new Promise((e,t)=>{let r=null,i=null,o=null;const a=()=>{n.removeEventListener("abort",o),this.worker.removeEventListener("message",r),this.worker.removeEventListener("message",i),this.working=!1};r=t=>{e(t.data),a()},o=()=>{this.worker.terminate(),this.worker=new _o.a;const e=new Error("Canceled heightfield generation.");e.aborted=!0,t(e),a()},i=e=>{t(e),a()},n.addEventListener("abort",o),this.worker.addEventListener("message",r),this.worker.addEventListener("error",i)}),i=e.attributes.position.array;this.worker.postMessage({verts:i,params:t});const o=await r;if(o.error)throw new Error(o.error);return o.heightfield}};class Co extends(zi(co)){static canAddNode(e){return null===e.scene.findNodeByType(Co)}static async deserialize(e,t){const n=await super.deserialize(e,t),{autoCellSize:r,cellSize:i,cellHeight:o,agentHeight:a,agentRadius:s,agentMaxClimb:l,agentMaxSlope:c,regionMinSize:u,maxTriangles:h,forceTrimesh:d}=t.components.find(e=>"floor-plan"===e.name).props;return n.autoCellSize=r,n.cellSize=i,n.cellHeight=o,n.agentHeight=a,n.agentRadius=s,n.agentMaxClimb=l,n.agentMaxSlope=c,n.regionMinSize=u,n.maxTriangles=h||1e3,n.forceTrimesh=d||!1,n}constructor(e){super(e),this.autoCellSize=!0,this.cellSize=.166,this.cellHeight=.1,this.agentHeight=1.7,this.agentRadius=.5,this.agentMaxClimb=.3,this.agentMaxSlope=45,this.regionMinSize=4,this.maxTriangles=1e3,this.forceTrimesh=!1,this.heightfieldMesh=null}onSelect(){this.navMesh&&(this.navMesh.visible=!0),this.trimesh&&(this.trimesh.visible=!0),this.heightfieldMesh&&(this.heightfieldMesh.visible=!0)}onDeselect(){this.navMesh&&(this.navMesh.visible=!1),this.trimesh&&(this.trimesh.visible=!1),this.heightfieldMesh&&(this.heightfieldMesh.visible=!1)}async generate(e){window.scene=this;const t=[],n=[],r=this.editor.scene.findNodeByType(ho);r&&r.walkable&&n.push(r.walkableMesh),this.editor.scene.traverse(e=>{e.isNode&&e.model&&(e.collidable||e.walkable)&&e.model.traverse(r=>{r.isMesh&&(e.collidable&&t.push(r),e.walkable&&n.push(r))})});const i=this.editor.scene.getNodesByType(po);for(const e of i)if(e.walkable){const t=e.helper.object,r=new Mr.eb(t.geometry,new Mr.fb);r.applyMatrix(e.matrixWorld),r.updateMatrixWorld(),n.push(r)}const o=fo(n),a=(new Mr.i).setFromBufferAttribute(o.attributes.position),s=new Mr.ec;if(a.getSize(s),Math.max(s.x,s.y,s.z)>2e3)throw new Error(`Scene is too large (${s.x.toFixed(3)} x ${s.y.toFixed(3)} x ${s.z.toFixed(3)}) to generate a floor plan.\nYou can un-check the "walkable" checkbox on models to exclude them from the floor plan.`);const l=s.x*s.z,c=this.autoCellSize?Math.pow(l,1/3)/50:this.cellSize,u=await To.buildNavMesh(o,{cellSize:c,cellHeight:this.cellHeight,agentHeight:this.agentHeight,agentRadius:this.agentRadius,agentMaxClimb:this.agentMaxClimb,agentMaxSlope:this.agentMaxSlope,regionMinSize:this.regionMinSize,wasmUrl:new URL(Eo,f.a.BASE_ASSETS_PATH||window.location).href},e),h=new Mr.eb(u,new Mr.fb({color:255,transparent:!0,opacity:.2}));this.setNavMesh(h),h.visible=-1!==this.editor.selected.indexOf(this);const d=fo(t);let p=null;if(!this.forceTrimesh){const t=this.editor.scene.getNodesByType(wo);let n=Number.POSITIVE_INFINITY;for(let e=0;e<t.length;e++)n=Math.min(n,t[e].position.y);p=await Mo.buildHeightfield(d,{minY:n,agentHeight:this.agentHeight,triangleThreshold:this.maxTriangles},e)}if(null!==p){this.setTrimesh(null),this.setHeightfield(p),this.heightfieldMesh&&this.remove(this.heightfieldMesh);const e=p.data[0].length,t=new Mr.vb(p.width,p.length,e-1,e-1);t.rotateX(-Math.PI/2);const n=t.attributes.position.array;for(let t=0,r=0,i=n.length;t<i/3;t++,r+=3)n[r+1]=p.data[Math.floor(t/e)][t%e];const r=new Mr.eb(t,new Mr.fb({wireframe:!0,color:16776960}));r.name="HeightfieldMesh",this.heightfieldMesh=r,this.add(r),this.heightfieldMesh.layers.set(1),r.position.set(p.offset.x,0,p.offset.z),this.heightfieldMesh.visible=-1!==this.editor.selected.indexOf(this)}else{const e=new Mr.eb(d,new Mr.fb({wireframe:!0,color:16711680}));this.setTrimesh(e),this.heightfieldMesh&&this.remove(this.heightfieldMesh),-1!==this.editor.selected.indexOf(this)&&(e.visible=!0)}return this}copy(e,t=!0){if(t&&this.remove(this.heightfieldMesh),super.copy(e,t),t){const t=e.children.findIndex(t=>t===e.heightfieldMesh);-1!==t&&(this.heightfieldMesh=this.children[t])}return this.autoCellSize=e.autoCellSize,this.cellSize=e.cellSize,this.cellHeight=e.cellHeight,this.agentHeight=e.agentHeight,this.agentRadius=e.agentRadius,this.agentMaxClimb=e.agentMaxClimb,this.agentMaxSlope=e.agentMaxSlope,this.regionMinSize=e.regionMinSize,this.maxTriangles=e.maxTriangles,this.forceTrimesh=e.forceTrimesh,this}serialize(){return super.serialize({"floor-plan":{autoCellSize:this.autoCellSize,cellSize:this.cellSize,cellHeight:this.cellHeight,agentHeight:this.agentHeight,agentRadius:this.agentRadius,agentMaxClimb:this.agentMaxClimb,agentMaxSlope:this.agentMaxSlope,regionMinSize:this.regionMinSize,maxTriangles:this.maxTriangles,forceTrimesh:this.forceTrimesh}})}prepareForExport(){super.prepareForExport(),this.heightfieldMesh&&this.remove(this.heightfieldMesh);const e=this.navMesh.material;if(e.transparent=!0,e.opacity=0,this.navMesh.name="navMesh",this.navMesh.userData.gltfExtensions={MOZ_hubs_components:{"nav-mesh":{},visible:{visible:!1}}},this.trimesh){this.trimesh.name="trimesh";const e=this.trimesh.material;e.transparent=!0,e.opacity=0,e.wireframe=!1,this.trimesh.userData.gltfExtensions={MOZ_hubs_components:{trimesh:{},visible:{visible:!1}}}}if(this.heightfield){const e=new Mr.qb;e.name="heightfield",e.userData.gltfExtensions={MOZ_hubs_components:{heightfield:this.heightfield}},this.add(e)}}}c()(Co,"nodeName","Floor Plan"),c()(Co,"legacyComponentName","floor-plan"),c()(Co,"disableTransform",!0);var $o=n(494),Oo=n.n($o);let Ao=null;class Io extends Mr.qb{static async load(){if(Ao)return Promise.resolve(Ao);const e=await new Or.b(Oo.a).loadGLTF();return Ao=e,Ao}constructor(){if(super(),this.name="TransformGizmo",!Ao)throw new Error("TransformGizmo must be loaded before it can be used. Await TransformGizmo.load()");this.model=Li(Ao.scene),this.add(this.model),this.selectionColor=(new Mr.q).setRGB(1,1,1),this.previousColor=new Mr.q,this.raycasterResults=[],this.translateControls=this.model.getObjectByName("TranslateControls"),this.translateXAxis=this.translateControls.getObjectByName("TranslateXAxis"),this.translateXAxis.axisInfo={axis:Au.X,planeNormal:new Mr.ec(0,1,0),selectionColorTarget:this.translateXAxis.material},this.translateYAxis=this.translateControls.getObjectByName("TranslateYAxis"),this.translateYAxis.axisInfo={axis:Au.Y,planeNormal:new Mr.ec(0,0,1),selectionColorTarget:this.translateYAxis.material},this.translateZAxis=this.translateControls.getObjectByName("TranslateZAxis"),this.translateZAxis.axisInfo={axis:Au.Z,planeNormal:new Mr.ec(0,1,0),selectionColorTarget:this.translateZAxis.material},this.translateXYPlane=this.translateControls.getObjectByName("TranslateXYPlane"),this.translateXYPlane.axisInfo={axis:Au.XY,planeNormal:new Mr.ec(0,0,1),selectionColorTarget:this.translateXYPlane.material},this.translateYZPlane=this.translateControls.getObjectByName("TranslateYZPlane"),this.translateYZPlane.axisInfo={axis:Au.YZ,planeNormal:new Mr.ec(1,0,0),selectionColorTarget:this.translateYZPlane.material},this.translateXZPlane=this.translateControls.getObjectByName("TranslateXZPlane"),this.translateXZPlane.axisInfo={axis:Au.XZ,planeNormal:new Mr.ec(0,1,0),selectionColorTarget:this.translateXZPlane.material},this.rotateControls=this.model.getObjectByName("RotateControls"),this.rotateXAxis=this.rotateControls.getObjectByName("RotateXAxis");const e=this.rotateXAxis.getObjectByName("RotateXAxisDisk"),t=this.rotateXAxis.getObjectByName("RotateXAxisStart"),n=this.rotateXAxis.getObjectByName("RotateXAxisEnd"),r=t.clone();e.axisInfo={axis:Au.X,planeNormal:new Mr.ec(1,0,0),rotationTarget:e,startMarker:t,startMarkerLocal:r,endMarker:n,selectionColorTarget:e.material},this.rotateYAxis=this.rotateControls.getObjectByName("RotateYAxis");const i=this.rotateYAxis.getObjectByName("RotateYAxisDisk"),o=this.rotateYAxis.getObjectByName("RotateYAxisStart"),a=this.rotateYAxis.getObjectByName("RotateYAxisEnd"),s=o.clone();i.axisInfo={axis:Au.Y,planeNormal:new Mr.ec(0,1,0),rotationTarget:i,startMarker:o,startMarkerLocal:s,endMarker:a,selectionColorTarget:i.material},this.rotateZAxis=this.rotateControls.getObjectByName("RotateZAxis");const l=this.rotateZAxis.getObjectByName("RotateZAxisDisk"),c=this.rotateZAxis.getObjectByName("RotateZAxisStart"),u=this.rotateZAxis.getObjectByName("RotateZAxisEnd"),h=c.clone();l.axisInfo={axis:Au.Z,planeNormal:new Mr.ec(0,0,1),rotationTarget:l,startMarker:c,startMarkerLocal:h,endMarker:u,selectionColorTarget:l.material},this.scaleControls=this.model.getObjectByName("ScaleControls"),this.scaleXAxis=this.scaleControls.getObjectByName("ScaleXAxis"),this.scaleXAxis.axisInfo={axis:Au.X,planeNormal:new Mr.ec(0,0,1),selectionColorTarget:this.scaleXAxis.material},this.scaleYAxis=this.scaleControls.getObjectByName("ScaleYAxis"),this.scaleYAxis.axisInfo={axis:Au.Y,planeNormal:new Mr.ec(0,0,1),selectionColorTarget:this.scaleYAxis.material},this.scaleZAxis=this.scaleControls.getObjectByName("ScaleZAxis"),this.scaleZAxis.axisInfo={axis:Au.Z,planeNormal:new Mr.ec(0,1,0),selectionColorTarget:this.scaleZAxis.material},this.scaleXYPlane=this.scaleControls.getObjectByName("ScaleXYPlane"),this.scaleXYPlane.axisInfo={axis:Au.XY,planeNormal:new Mr.ec(0,0,1),selectionColorTarget:this.scaleXYPlane.material},this.scaleYZPlane=this.scaleControls.getObjectByName("ScaleYZPlane"),this.scaleYZPlane.axisInfo={axis:Au.YZ,planeNormal:new Mr.ec(1,0,0),selectionColorTarget:this.scaleYZPlane.material},this.scaleXZPlane=this.scaleControls.getObjectByName("ScaleXZPlane"),this.scaleXZPlane.axisInfo={axis:Au.XZ,planeNormal:new Mr.ec(0,1,0),selectionColorTarget:this.scaleXZPlane.material},this.scaleUniformHandle=this.scaleControls.getObjectByName("ScaleUniformHandle"),this.scaleUniformHandle.axisInfo={axis:Au.XYZ,planeNormal:new Mr.ec(0,1,0),selectionColorTarget:this.scaleUniformHandle.material},t.visible=!1,n.visible=!1,o.visible=!1,a.visible=!1,c.visible=!1,u.visible=!1,this.translateControls.visible=!1,this.rotateControls.visible=!1,this.scaleControls.visible=!1,this.transformMode=Ou.Disabled,this.model.traverse(e=>{e.isMesh&&(e.layers.set(1),e.material.depthTest=!1,e.material.depthWrite=!1,e.renderOrder=100)})}setTransformMode(e){switch(this.transformMode=e,this.translateControls.visible=!1,this.rotateControls.visible=!1,this.scaleControls.visible=!1,e){case Ou.Translate:this.translateControls.visible=!0,this.activeControls=this.translateControls;break;case Ou.Rotate:this.rotateControls.visible=!0,this.activeControls=this.rotateControls;break;case Ou.Scale:this.scaleControls.visible=!0,this.activeControls=this.scaleControls;break;default:this.selectedAxis=void 0,this.activeControls=null}}setLocalScaleHandlesVisible(e){this.scaleXAxis.visible=e,this.scaleYAxis.visible=e,this.scaleZAxis.visible=e,this.scaleXYPlane.visible=e,this.scaleYZPlane.visible=e,this.scaleXZPlane.visible=e}selectAxisWithRaycaster(e){if(this.deselectAxis(),!this.activeControls)return;this.raycasterResults.length=0,e.intersectObject(this.activeControls,!0,this.raycasterResults);const t=this.raycasterResults.find(e=>void 0!==e.object.axisInfo);if(!t)return;this.selectedAxis=t.object;const n=this.selectedAxis.axisInfo;return this.previousColor.copy(n.selectionColorTarget.color),n.selectionColorTarget.color.copy(this.selectionColor),n.rotationStartObject&&(n.rotationStartObject.visible=!0),n.rotationEndObject&&(n.rotationEndObject.visible=!0),n.axis}highlightHoveredAxis(e){if(!this.activeControls)return;this.hoveredAxis&&(this.hoveredAxis.axisInfo.selectionColorTarget.opacity=.5),this.raycasterResults.length=0,e.intersectObject(this.activeControls,!0,this.raycasterResults);const t=this.raycasterResults.find(e=>void 0!==e.object.axisInfo);t&&(t.object.axisInfo.selectionColorTarget.opacity=1,this.hoveredAxis=t.object)}deselectAxis(){if(this.selectedAxis){const e=this.selectedAxis.axisInfo;e.selectionColorTarget.color.copy(this.previousColor),e.rotationStartObject&&(e.rotationStartObject.visible=!1),e.rotationEndObject&&(e.rotationEndObject.visible=!1),this.selectedAxis=void 0}}clone(){return(new Mr.qb).copy(this)}}function Po(e){e.traverse(e=>{(e.isMesh||e.isLine||e.isSprite)&&(e.isHelper=!0)})}class Lo extends Mr.eb{constructor(e,t,n,r){n=n||new Mr.q("white"),e=e||1,t=t||10,r=r||8e3;super(new Mr.vb(2,2,1,1),new Mr.Ob({side:Mr.w,uniforms:{uSize1:{value:e},uSize2:{value:t},uColor:{value:n},uDistance:{value:r}},transparent:!0,vertexShader:"\nvarying vec3 worldPosition;\n      \nuniform float uDistance;\n\nvoid main() {\n\n      vec3 pos = position.xzy * uDistance;\n      pos.xz += cameraPosition.xz;\n      \n      worldPosition = pos;\n      \n      gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n\n      gl_Position.z -= 0.01;\n}\n",fragmentShader:"\nvarying vec3 worldPosition;\n\nuniform float uSize1;\nuniform float uSize2;\nuniform vec3 uColor;\nuniform float uDistance;\n\nfloat getGrid(float size) {\n    vec2 r = worldPosition.xz / size;\n    vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);\n    float line = min(grid.x, grid.y);\n    return 1.0 - min(line, 1.0);\n}\n\nvoid main() {\n\n  float d = 1.0 - min(distance(cameraPosition.xz, worldPosition.xz) / uDistance, 1.0);\n\n  float g1 = getGrid(uSize1);\n  float g2 = getGrid(uSize2);\n\n\n  gl_FragColor = vec4(uColor.rgb, mix(g2, g1, g1) * pow(d, 3.0));\n  gl_FragColor.a = mix(0.5 * gl_FragColor.a, gl_FragColor.a, g2);\n\n  if ( gl_FragColor.a <= 0.0 ) discard;\n}\n",extensions:{derivatives:!0}})),this.name="SpokeInfiniteGridHelper",this.layers.set(1),Po(this),this.frustumCulled=!1,this.plane=new Mr.ub(this.up),this.intersectionPointWorld=new Mr.ec,this.intersection={distance:0,point:this.intersectionPointWorld,object:this}}setSize(e){this.material.uniforms.uSize1.value=e,this.material.uniforms.uSize2.value=10*e}raycast(e,t){const n=new Mr.ec;if(null===e.ray.intersectPlane(this.plane,n))return null;this.intersectionPointWorld.copy(n),this.intersectionPointWorld.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(this.intersectionPointWorld);if(r<e.near||r>e.far)return null;this.intersection.distance=r,t.push(this.intersection)}}function ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}class Ro{constructor(){this.cache=new Map}getLoader(e,t){const n=new URL(e,window.location).href;if(this.cache.has(n))return this.cache.get(n);{const e=new Or.b(n,void 0,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ko(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({revokeObjectURLs:!1},t));return this.cache.set(n,e),e}}disposeAndClear(){this.cache.clear()}}class Do extends class{constructor(){c()(this,"_cache",new Map)}evict(e){const t=new URL(e,window.location).href;this._cache.delete(t)}_clear(){this._cache.clear()}}{constructor(){super(),this.textureLoader=new Mr.Wb}get(e){const t=new URL(e,window.location).href;return this._cache.has(t)||this._cache.set(t,Object(Ni.a)(t,this.textureLoader)),this._cache.get(t)}disposeAndClear(){for(const e of this._cache.values())e.then(e=>e.dispose());this._clear()}}var jo=n(287);function No(e,t=[]){for(let n=0;n<e.length;n++)t.push(e[n]);for(let n=0;n<e.length;n++){const r=e[n];let i=!0;for(let e=0;e<t.length;e++){const n=t[e];if(n!==r&&!Object(jo.a)(n,e=>e!==r)){i=!1;break}}if(!i){const e=t.indexOf(r);if(-1===e)throw new Error("Object not found");t.splice(e,1)}}return t}var Fo=n(353);const Uo=new RegExp("(.*) \\d+$");function Bo(e,t){const n=new Set;e.traverse(e=>{e.isNode&&n.add(e.name)}),t.traverse(e=>{if(!e.isNode||!n.has(e.name))return;const r=function(e){let t=e;const n=Uo.exec(e);return n&&(t=n[1]),t}(t.name);let i=1,o=r+" "+i;for(;n.has(o);)i++,o=r+" "+i;t.name=o,n.add(o)})}function zo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}const Vo=new Mr.i,Go=new Mr.i,Ho=new Mr.db,Wo=new Mr.i,qo=[new Mr.ec,new Mr.ec,new Mr.ec,new Mr.ec,new Mr.ec,new Mr.ec,new Mr.ec,new Mr.ec];function Jo(){const e=document.activeElement,t=e.nodeName;return e.isContentEditable||"INPUT"===t||"SELECT"===t||"TEXTAREA"===t}var Yo=n(343);function Xo(e,t){return 1===e&&1===t?4:e*t*4+Xo(Math.max(Math.floor(e/2),1),Math.max(Math.floor(t/2),1))}function Ko(e){const t=e&&e.visible;return!t||t.visible}function Zo(e,t){return e*t>4194304}function Qo(e){const t=e.image;if(!t)return!1;return Zo(t.width||t.videoWidth,t.height||t.videoHeight)}function ea(e){const t=e.image;if(!t)return 0;return Xo(t.width||t.videoWidth,t.height||t.videoHeight)}const ta={gltf:10485760,image:4194304,default:4194304};function na(e,t,n){const r=ta[e]||ta.default;t>r&&n.push({severity:"warning",message:`Large file (${Object(ar.a)(t)}). Suggested ${e} max file size is ${r}.`})}function ra(e,t=!0){const n=[];let r=0,i=0,o=0;const a=new Set,s=e=>{e.isMesh&&(r+=ia(e),Object(Hi.b)(e,e=>{a.add(e)}))};t?e.traverse(s):s(e);for(const e of a)if(e.map&&(i+=ea(e.map),Qo(e.map)&&o++),e.aoMap&&(i+=ea(e.aoMap),Qo(e.aoMap)&&o++),e.roughnessMap&&e.roughnessMap!==e.aoMap&&(i+=ea(e.roughnessMap),Qo(e.roughnessMap)&&o++),e.normalMap&&(i+=ea(e.normalMap),Qo(e.normalMap)&&o++),e.emissiveMap&&(i+=ea(e.emissiveMap),Qo(e.emissiveMap)&&o++),e.uniforms)for(const t in e.uniforms){if(!Object.prototype.hasOwnProperty.call(e.uniforms,t))continue;const{value:n}=e.uniforms[t];n instanceof Mr.Vb&&(i+=ea(n),Qo(e.value)&&o++)}return r>1e4&&n.push({severity:"warning",message:`This object contains ${r.toLocaleString()} polygons.`}),a>10&&n.push({severity:"warning",message:`This object contains ${a.size} unique materials.`}),o>0&&n.push({severity:"warning",message:`This object contains ${o} texture${o>1?"s":""} larger than 2048 x 2048.`}),i>67108860&&n.push({severity:"warning",message:`This object's textures use ~${Object(ar.a)(i)} of video RAM.`}),n}function ia(e){return e.geometry.index?e.geometry.index.count/3:e.geometry.attributes.position.count/3}var oa=n(495),aa=n.n(oa);const sa={},la=aa.a.prototype.stopCallback;function ca(e,t,n,r,i,o,a=!0){if(e)for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];if("event"===s){for(const{defaultValue:e,action:i,reset:o}of l)void 0!==i&&void 0!==e&&(t[i]=e,n[i]=e,o&&r.push(i));continue}if("position"===s){t[l]={x:0,y:0},n[l]=void 0!==n[l]?n[l]:{x:0,y:0},a&&r.push(l);continue}t[l]=i,n[l]=void 0!==n[l]?n[l]:i,o&&r.push(l)}}function ua(e){return 0===e?e:e>0?1:-1}function ha(e){const t={keyboard:{pressed:{},keyup:{},keydown:{},hotkeys:{},globalHotkeys:{}},mouse:{click:{},dblclick:{},move:{},wheel:{},pressed:{},mouseup:{},mousedown:{}},computed:[]};for(const n of e.values()){const{keyboard:e,mouse:r,computed:i}=n;if(e&&(e.pressed&&Object.assign(t.keyboard.pressed,e.pressed),e.keyup&&Object.assign(t.keyboard.keyup,e.keyup),e.keydown&&Object.assign(t.keyboard.keydown,e.keydown),e.hotkeys&&Object.assign(t.keyboard.hotkeys,e.hotkeys),e.globalHotkeys&&Object.assign(t.keyboard.globalHotkeys,e.globalHotkeys)),r&&(r.click&&Object.assign(t.mouse.click,r.click),r.dblclick&&Object.assign(t.mouse.dblclick,r.dblclick),r.move&&Object.assign(t.mouse.move,r.move),r.wheel&&Object.assign(t.mouse.wheel,r.wheel),r.pressed&&Object.assign(t.mouse.pressed,r.pressed),r.mouseup&&Object.assign(t.mouse.mouseup,r.mouseup),r.mousedown&&Object.assign(t.mouse.mousedown,r.mousedown)),i)for(const e of i)t.computed.push(e)}return t}function da(e,t){for(const n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;delete e[t[n]]}}aa.a.prototype.stopCallback=function(e,t,n,r){return!!this.paused||!sa[n]&&!sa[r]&&la.call(this,e,t,n)},aa.a.prototype.bindGlobal=function(e,t,n){if(this.bind(e,t,n),e instanceof Array)for(let t=0;t<e.length;t++)sa[e[t]]=!0;else sa[e]=!0},aa.a.prototype.unbindGlobal=function(e,t,n){if(this.unbind(e,t,n),e instanceof Array)for(let t=0;t<e.length;t++)delete sa[e[t]];else delete sa[e]},aa.a.init();const pa=["left","middle","right","button4","button5"],fa={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"control"};class ma{constructor(e){c()(this,"onKeyDown",e=>{if(Jo())return;let t=!1;const n=this.mapping.keyboard;if(!n)return;n.event&&(this.handleEventMappings(n.event,e),t=!0);const r=n.pressed;r&&(t=this.handleKeyMappings(r,e,1));const i=n.keydown;i&&(t=this.handleKeyMappings(i,e,1)),t&&e.preventDefault()}),c()(this,"onKeyUp",e=>{if(Jo())return;let t=!1;const n=this.mapping.keyboard;if(!n)return;n.event&&(this.handleEventMappings(n.event,e),t=!0);const r=n.pressed;r&&(t=this.handleKeyMappings(r,e,0));const i=n.keyup;i&&(t=this.handleKeyMappings(i,e,0)),t&&e.preventDefault()}),c()(this,"onWindowMouseDown",e=>{this.mouseDownTarget=e.target}),c()(this,"onMouseDown",e=>{this.mouseDownTarget=e.target;const t=this.mapping.mouse;if(!t)return;const n=pa[e.button],r=t.pressed;if(r){const e=r[n];e&&(this.state[e]=1)}const i=t.mousedown;if(i){const t=i[n];t&&(this.state[t]=1),i.event&&this.handleEventMappings(i.event,e),i.position&&this.handlePosition(i.position,e)}}),c()(this,"onWindowMouseUp",e=>{const t=this.canvas,n=this.mouseDownTarget;this.mouseDownTarget=null,e.target!==t&&n===t&&this.onMouseUp(e)}),c()(this,"onMouseUp",e=>{const t=this.mapping.mouse;if(!t)return;const n=pa[e.button],r=t.pressed;if(r){const e=r[n];e&&(this.state[e]=0)}const i=t.mouseup;if(i){const t=i[n];t&&(this.state[t]=1),i.event&&this.handleEventMappings(i.event,e),i.position&&this.handlePosition(i.position,e)}}),c()(this,"onMouseMove",e=>{const t=this.mapping.mouse;if(!t)return;const n=t.move;if(n)for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&("event"===t?this.handleEventMappings(n.event,e):"movementX"===t||"movementY"===t?this.state[n[t]]+=e[t]:"normalizedMovementX"===t?this.state[n[t]]+=-e.movementX/this.canvas.clientWidth:"normalizedMovementY"===t?this.state[n[t]]+=-e.movementY/this.canvas.clientHeight:"position"===t?this.handlePosition(n.position,e):this.state[n[t]]=e[t])}),c()(this,"onWheel",e=>{const t=this.mapping.mouse;if(e.preventDefault(),!t)return!1;const n=t.wheel;if(!n)return!1;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&("event"===t?this.handleEventMappings(n.event,e):"deltaX"===t||"deltaY"===t?this.state[n[t]]+=e[t]:this.state[n[t]]="normalizedDeltaX"===t?ua(e.deltaX):"normalizedDeltaY"===t?ua(e.deltaY):e[t]);return!1}),c()(this,"onClick",e=>{const t=this.mapping.mouse;if(!t)return;const n=t.click;n&&n.event&&this.handleEventMappings(t.event,e),n.position&&this.handlePosition(n.position,e)}),c()(this,"onDoubleClick",e=>{const t=this.mapping.mouse;if(!t)return;const n=t.dblclick;n&&(n.event&&this.handleEventMappings(n.event,e),n.position&&this.handlePosition(n.position,e))}),c()(this,"onContextMenu",e=>{e.preventDefault()}),c()(this,"onResize",()=>{this.boundingClientRect=this.canvas.getBoundingClientRect()}),c()(this,"onWindowBlur",()=>{const e=this.initialState;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.state[t]=e[t])}),this.canvas=e,this.mappings=new Map,this.mapping={},this.initialState={},this.state={},this.resetKeys=[],this.boundingClientRect=this.canvas.getBoundingClientRect(),this.mouseDownTarget=null,window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),e.addEventListener("wheel",this.onWheel),e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mousedown",this.onMouseDown),window.addEventListener("mousedown",this.onWindowMouseDown),e.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mouseup",this.onWindowMouseUp),e.addEventListener("dblclick",this.onDoubleClick),e.addEventListener("click",this.onClick),e.addEventListener("contextmenu",this.onContextMenu),window.addEventListener("blur",this.onWindowBlur)}enableInputMapping(e,t){this.mappings.set(e,t),this.setInputMapping(ha(this.mappings))}disableInputMapping(e){const t=this.mappings.get(e);if(t){const n=this.state,{keyboard:r,mouse:i,computed:o}=t;if(r){r.pressed&&da(n,r.pressed),r.keyup&&da(n,r.keyup),r.keydown&&da(n,r.keydown);const e=r.hotkeys;if(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&aa.a.unbind(t);da(n,r.hotkeys)}const t=r.globalHotkeys;if(t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&aa.a.unbindGlobal(e);da(n,r.globalHotkeys)}}if(i&&(i.click&&da(n,i.click),i.dblclick&&da(n,i.dblclick),i.move&&da(n,i.move),i.wheel&&da(n,i.wheel),i.pressed&&da(n,i.pressed),i.mouseup&&da(n,i.mouseup),i.mousedown&&da(n,i.mousedown)),o)for(const e of o)delete n[e.action];this.mappings.delete(e),this.setInputMapping(ha(this.mappings))}}setInputMapping(e){this.mapping=e;const t={},n=this.state,r=[],i=e.keyboard;if(i){ca(i.pressed,t,n,r,0,!1),ca(i.keydown,t,n,r,0,!0),ca(i.keyup,t,n,r,0,!0);const e=i.hotkeys;if(e)for(const i in e){if(!Object.prototype.hasOwnProperty.call(e,i))continue;const o=e[i];aa.a.bind(i,()=>(n[o]=!0,!1)),t[o]=!1,n[o]=!1,r.push(o)}const o=i.globalHotkeys;if(o)for(const e in o){if(!Object.prototype.hasOwnProperty.call(o,e))continue;const i=o[e];aa.a.bindGlobal(e,()=>(n[i]=!0,!1)),t[i]=!1,n[i]=!1,r.push(i)}}const o=e.mouse;o&&(ca(o.click,t,n,r,0,!0),ca(o.dblclick,t,n,r,0,!0),ca(o.move,t,n,r,0,!0,!1),ca(o.wheel,t,n,r,0,!0),ca(o.pressed,t,n,r,0,!1),ca(o.mousedown,t,n,r,0,!0),ca(o.mouseup,t,n,r,0,!0));const a=e.computed;if(a)for(const e of a){const{action:i,transform:o,defaultValue:a,reset:s}=e,l=void 0!==a?a:o(this,e,null,null);if(void 0===i)throw new Error("Action is undefined for "+e);t[i]=l,n[i]=l,s&&r.push(i)}this.initialState=t,this.resetKeys=r}handleEventMappings(e,t){for(let n=0;n<e.length;n++){const r=e[n],{handler:i,action:o}=r,a=i(t,this,r);o&&(this.state[o]=a)}}handleKeyMappings(e,t,n){let r=t.key;r||(r=String.fromCharCode(t.which||t.code)),r=r.toLowerCase();let i=!1;for(const t in e){if(!Object.prototype.hasOwnProperty.call(e,t))continue;const o=e[t];if(r===t){this.state[o]=n,i=!0;continue}r===fa[t]&&(this.state[o]=n,i=!0)}return i}handlePosition(e,t){const n=this.state[e];if(n){const e=this.boundingClientRect;n.x=(t.clientX-e.left)/e.width*2-1,n.y=(t.clientY-e.top)/e.height*-2+1}}update(e,t){const n=this.mapping.computed;if(n)for(let r=0;r<n.length;r++){const i=n[r],{action:o,transform:a}=i;this.state[o]=a(this,i,e,t)}}reset(){for(let e=0;e<this.resetKeys.length;e++){const t=this.resetKeys[e],n=this.state[t],r=this.initialState[t];"object"==typeof n&&"object"==typeof initialState?null!==n&&null!==r?this.state[t]=Object.assign(this.state[t],r):null!==r&&(this.state[t]=Object.assign({},r)):this.state[t]=r}}get(e){return this.state[e]||0}dispose(){const e=this.canvas;window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),e.removeEventListener("wheel",this.onWheel),e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousedown",this.onWindowMouseDown),e.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mouseup",this.onWindowMouseUp),e.removeEventListener("dblclick",this.onDoubleClick),e.removeEventListener("click",this.onClick),e.removeEventListener("contextmenu",this.onContextMenu),window.removeEventListener("blur",this.onWindowBlur)}}const ga=new Mr.ec(0,1,0),va=new Mr.db,ya=(new Mr.db).identity(),_a=new Mr.ec,ba=new Mr.Bb,xa=new Mr.ec,Sa=new Mr.Bb,wa=new Mr.ec,Ea=new Mr.Bb;class Ta{constructor(e,t){this.enabled=!1,this.camera=e,this.inputManager=t,this.moveSpeed=2,this.boostSpeed=2,this.lookSensitivity=10,this.maxXRotation=Mr.bb.degToRad(80),this.direction=new Mr.ec,this.onMouseUp=e=>{this.enabled&&2===e.button&&document.pointerLockElement===this.inputManager.canvas&&document.exitPointerLock()}}enable(){this.enabled=!0,this.inputManager.enableInputMapping(xr,wr),this.inputManager.canvas.addEventListener("mouseup",this.onMouseUp)}disable(){this.enabled=!1,this.inputManager.disableInputMapping(xr),this.inputManager.canvas.removeEventListener("mouseup",this.onMouseUp)}update(e){if(!this.enabled)return;const t=this.inputManager;this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(xa,Sa,wa),Ea.multiplyQuaternions(ba.setFromAxisAngle(_a.set(1,0,0).applyQuaternion(Sa),t.get(xr.lookY)*this.lookSensitivity),Sa);const n=_a.set(0,1,0).applyQuaternion(Sa).y,r=_a.set(0,1,0).applyQuaternion(Ea).y,i=_a.set(0,0,-1).applyQuaternion(Ea).y,o=Math.sin(this.maxXRotation);r>0&&(i<o&&i>-o||r>n)&&(this.camera.matrixWorld.compose(xa,Ea,wa),va.getInverse(this.camera.parent?this.camera.parent.matrixWorld:ya),this.camera.matrix.multiplyMatrices(va,this.camera.matrixWorld),this.camera.matrixWorld.decompose(this.camera.position,this.camera.quaternion,this.camera.scale)),this.camera.matrixWorld.decompose(xa,Sa,wa),Ea.multiplyQuaternions(ba.setFromAxisAngle(ga,t.get(xr.lookX)*this.lookSensitivity),Sa),this.camera.matrixWorld.compose(xa,Ea,wa),this.camera.matrix.multiplyMatrices(va,this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.direction.set(t.get(xr.moveX),0,t.get(xr.moveZ));const a=t.get(xr.boost)?this.boostSpeed:1,s=e*this.moveSpeed*a;this.direction.lengthSq()>1e-4&&this.camera.translateOnAxis(this.direction,s),this.camera.position.y+=t.get(xr.moveY)*e*this.moveSpeed*a}}class Ma{constructor(e,t,n){c()(this,"onClickCanvas",()=>{this.inputManager.canvas.requestPointerLock()}),c()(this,"onPointerLockChange",()=>{document.pointerLockElement===this.inputManager.canvas?(this.spokeControls.disable(),this.flyControls.enable()):(this.spokeControls.enable(),this.flyControls.disable())}),this.inputManager=e,this.spokeControls=t,this.flyControls=n,this.enabled=!1}enable(){this.enabled=!0,this.inputManager.canvas.addEventListener("click",this.onClickCanvas),document.addEventListener("pointerlockchange",this.onPointerLockChange)}disable(){this.enabled=!1,this.spokeControls.enable(),this.flyControls.disable(),this.inputManager.canvas.removeEventListener("click",this.onClickCanvas),document.removeEventListener("pointerlockchange",this.onPointerLockChange),document.exitPointerLock()}}class Ca{constructor(e){this.editor=e,this.id=-1}execute(e){}shouldUpdate(e){return!1}update(e){}undo(){}toString(){return`${this.constructor.name} id: ${this.id}`}}function $a(e){return`Vector3 { x: ${e.x}, y: ${e.y}, z: ${e.z} }`}function Oa(e){return`Euler { x: ${e.x}, y: ${e.y}, z: ${e.z} }`}function Aa(e){return e?`${e.constructor.name} "${e.name}"`:e}function Ia(e){return e.map(e=>Aa(e)).join(",")}function Pa(e){return"object"!=typeof e||null===e?e:e.isVector2?function(e){return`Vector2 { x: ${e.x}, y: ${e.y} }`}(e):e.isVector3?$a(e):e.isEuler?Oa(e):e.isColor?function(e){return`Color { r: ${e.r}, g: ${e.g}, b: ${e.b}, hex: #${e.getHexString()}`}(e):e.isVector4?function(e){return`Vector4 { x: ${e.x}, y: ${e.y}, z: ${e.z}, w: ${e.w} }`}(e):e.isQuaternion?function(e){return`Quaternion { x: ${e.x}, y: ${e.y}, z: ${e.z}, w: ${e.w} }`}(e):e.isObject3D?`${e.constructor.name} "${e.name}"`:e.constructor?e.constructor.name:e.toString()}function La(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=Pa(e[n]));return t}class ka extends Ca{constructor(e,t,n,r){super(e),this.objects=t.slice(0),this.parent=n,this.before=r,this.oldSelection=e.selected.slice(0)}execute(){this.editor.addMultipleObjects(this.objects,this.parent,this.before,!1)}undo(){this.editor.removeMultipleObjects(this.objects,!1,!0,!1),this.editor.setSelection(this.oldSelection,!1)}toString(){return`AddMultipleObjectsCommand id: ${this.id} objects: ${Ia(this.objects)} parent: ${Aa(this.parent)} before: ${Aa(this.before)}`}}class Ra extends Ca{constructor(e,t,n,r){super(e),this.object=t,this.parent=n,this.before=r,this.oldSelection=e.selected.slice(0)}execute(){this.editor.addObject(this.object,this.parent,this.before,!1)}undo(){this.editor.removeObject(this.object,!1,!0,!1),this.editor.setSelection(this.oldSelection,!1)}toString(){return`AddObjectCommand id: ${this.id} object: ${Aa(this.object)} parent: ${Aa(this.parent)} before: ${Aa(this.before)}`}}class Da extends Ca{constructor(e,t){super(e),this.object=t,this.oldSelection=e.selected.slice(0)}execute(){this.editor.deselect(this.object,!1)}undo(){this.editor.setSelection(this.oldSelection,!1)}toString(){return`DeselectCommand id: ${this.id} object: ${Aa(this.object)}`}}class ja extends Ca{constructor(e,t){super(e),this.objects=t.slice(0),this.oldSelection=e.selected.slice(0)}execute(){this.editor.deselectMultiple(this.objects,!1)}undo(){this.editor.setSelection(this.oldSelection,!1)}toString(){return`DeselectMultipleCommand id: ${this.id} objects: ${Ia(this.objects)}`}}class Na extends Ca{constructor(e,t,n,r){super(e),this.object=t,this.parent=n,this.before=r,this.oldSelection=e.selected.slice(0),this.duplicatedObject=null}execute(){this.duplicatedObject=this.editor.duplicate(this.object,this.parent,this.before,!1)}undo(){this.editor.removeObject(this.duplicatedObject,!1,!0,!1),this.editor.setSelection(this.oldSelection,!1)}toString(){return`DuplicateCommand id: ${this.id} object: ${Aa(this.object)} parent: ${Aa(this.parent)} before: ${Aa(this.before)}`}}class Fa extends Ca{constructor(e,t,n,r,i){super(e),this.objects=t.slice(0),this.parent=n,this.before=r,this.selectObjects=i,this.oldSelection=e.selected.slice(0),this.duplicatedObjects=[]}execute(e){e?this.editor.addMultipleObjects(this.duplicatedObjects,this.parent,this.before,!1,!0,this.selectObjects):this.duplicatedObjects=this.editor.duplicateMultiple(this.objects,this.parent,this.before,!1,!0,this.selectObjects)}undo(){this.editor.removeMultipleObjects(this.duplicatedObjects,!1,!0,!1),this.editor.setSelection(this.oldSelection,!1)}toString(){return`DuplicateMultipleCommand id: ${this.id} objects: ${Ia(this.objects)} parent: ${Aa(this.parent)} before: ${Aa(this.before)}`}}class Ua extends Ca{constructor(e,t){super(e),this.objects=[],this.oldParents=[],this.oldBefores=[],this.oldNodes=e.nodes.slice(0),this.oldSelection=e.selected.slice(0),e.scene.traverse(e=>{if(-1!==t.indexOf(e)&&(this.objects.push(e),this.oldParents.push(e.parent),e.parent)){const t=e.parent.children,n=t.indexOf(e);n+1<t.length?this.oldBefores.push(t[n+1]):this.oldBefores.push(void 0)}})}execute(){this.editor.removeMultipleObjects(this.objects,!1)}undo(){this.editor._addMultipleObjectsWithParentsAndBefores(this.objects,this.oldParents,this.oldBefores,this.oldNodes),this.editor.setSelection(this.oldSelection,!1)}toString(){return`RemoveMultipleObjectsCommand id: ${this.id} objects: ${Ia(this.objects)}`}}class Ba extends Ca{constructor(e,t){if(super(e),this.object=t,this.parent=t.parent,this.parent){const e=this.parent.children.indexOf(this.object);this.parent.children.length>e+1&&(this.before=this.parent.children[e+1])}this.oldSelection=e.selected.slice(0)}execute(){this.editor.removeObject(this.object,!1)}undo(){this.editor.addObject(this.object,this.parent,this.before,!1,!0,!1),this.editor.setSelection(this.oldSelection,!1)}toString(){return`${this.constructor.name} id: ${this.id} object: ${Aa(this.object)}`}}class za extends Ca{constructor(e,t,n,r){if(super(e),this.object=t,this.oldParent=t.parent,t.parent){const e=t.parent.children,n=e.indexOf(t);n+1<e.length&&(this.oldBefore=e[n+1])}this.newParent=n,this.newBefore=r,this.oldSelection=e.selected.slice(0)}execute(){this.editor.reparent(this.object,this.newParent,this.newBefore,!1)}undo(){this.editor.reparent(this.object,this.oldParent,this.oldBefore,!1,!0,!1),this.editor.setSelection(this.oldSelection,!1)}toString(){return`${this.constructor.name} id: ${this.id} object: ${Aa(this.object)} newParent: ${Aa(this.newParent)} newBefore: ${Aa(this.newBefore)}`}}function Va(e,t){t(e);const n=e.children;for(let e=n.length-1;e>=0;e--)Va(n[e],t)}class Ga extends Ca{constructor(e,t,n,r){super(e),this.objects=[],this.undoObjects=[],this.newParent=n,this.newBefore=r,this.oldParents=[],this.oldBefores=[],this.oldSelection=e.selected.slice(0),e.scene.traverse(e=>{-1!==t.indexOf(e)&&this.objects.push(e)}),Va(e.scene,e=>{if(-1!==t.indexOf(e)&&(this.undoObjects.push(e),this.oldParents.push(e.parent),e.parent)){const t=e.parent.children,n=t.indexOf(e);n+1<t.length?this.oldBefores.push(t[n+1]):this.oldBefores.push(void 0)}})}execute(){this.editor.reparentMultiple(this.objects,this.newParent,this.newBefore,!1)}undo(){for(let e=0;e<this.objects.length;e++)this.editor.reparent(this.undoObjects[e],this.oldParents[e],this.oldBefores[e],!1,!1,!1,!1);this.editor.setSelection(this.oldSelection,!1,!0,!1),this.editor.updateTransformRoots(),this.editor.emit("sceneGraphChanged")}toString(){return`${this.constructor.name} id: ${this.id} objects: ${Ia(this.objects)} newParent: ${Aa(this.newParent)} newBefore: ${Aa(this.newBefore)}`}}class Ha extends Ca{constructor(e,t,n,r,i){super(e),this.object=t,this.pivot=n.clone(),this.axis=r.clone(),this.angle=i,this.oldPosition=t.position.clone(),this.oldRotation=t.rotation.clone()}execute(){this.editor.rotateAround(this.object,this.pivot,this.axis,this.angle,!1)}shouldUpdate(e){return this.object===e.object&&this.pivot.equals(e.pivot)&&this.axis.equals(e.axis)}update(e){this.angle+=e.angle,this.editor.rotateAround(this.object,this.pivot,this.axis,e.angle,!1)}undo(){this.editor.setPosition(this.object,this.oldPosition,yu.Local,!1,!1),this.editor.setRotation(this.object,this.oldRotation,yu.Local,!1,!1),this.editor.emit("objectsChanged",this.objects,"matrix")}toString(){return`RotateAroundCommand id: ${this.id} object: ${Aa(this.object)} pivot: ${$a(this.pivot)} axis: ${$a(this.axis)} angle: ${this.angle}`}}function Wa(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}class qa extends Ca{constructor(e,t,n,r,i){super(e),this.objects=t.slice(0),this.pivot=n.clone(),this.axis=r.clone(),this.angle=i,this.oldRotations=t.map(e=>e.rotation.clone()),this.oldPositions=t.map(e=>e.position.clone())}execute(){this.editor.rotateAroundMultiple(this.objects,this.pivot,this.axis,this.angle,!1)}shouldUpdate(e){return this.pivot.equals(e.pivot)&&this.axis.equals(e.axis)&&Wa(this.objects,e.objects)}update(e){this.angle+=e.angle,this.editor.rotateAroundMultiple(this.objects,this.pivot,this.axis,e.angle,!1)}undo(){for(let e=0;e<this.objects.length;e++)this.editor.setRotation(this.objects[e],this.oldRotations[e],yu.Local,!1,!1);for(let e=0;e<this.objects.length;e++)this.editor.setPosition(this.objects[e],this.oldPositions[e],yu.Local,!1,!1);this.editor.emit("objectsChanged",this.objects,"matrix")}toString(){return`RotateAroundMultipleCommand id: ${this.id} objects: ${Ia(this.objects)} pivot: ${$a(this.pivot)} axis: { ${$a(this.axis)} angle: ${this.angle} space: ${this.space}`}}class Ja extends Ca{constructor(e,t,n,r,i){super(e),this.object=t,this.axis=n.clone(),this.angle=r,this.space=i,this.oldRotation=t.rotation.clone()}execute(){this.editor.rotateOnAxis(this.object,this.axis,this.angle,this.space,!1)}shouldUpdate(e){return this.object===e.object&&this.space===e.space&&this.axis.equals(e.axis)}update(e){this.angle+=e.angle,this.editor.rotateOnAxis(this.object,this.axis,e.angle,this.space,!1)}undo(){this.editor.setRotation(this.object,this.oldRotation,yu.Local,!1)}toString(){return`RotateOnAxisCommand id: ${this.id} object: ${Aa(this.object)} axis: ${$a(this.axis)} angle: ${this.angle} space: ${this.space}`}}class Ya extends Ca{constructor(e,t,n,r,i){super(e),this.objects=t.slice(0),this.axis=n.clone(),this.angle=r,this.space=i,this.oldRotations=t.map(e=>e.rotation.clone())}execute(){this.editor.rotateOnAxisMultiple(this.objects,this.axis,this.angle,this.space,!1)}shouldUpdate(e){return this.space===e.space&&this.axis.equals(e.axis)&&Wa(this.objects,e.objects)}update(e){this.angle+=e.angle,this.editor.rotateOnAxisMultiple(this.objects,this.axis,e.angle,this.space,!1)}undo(){for(let e=0;e<this.objects.length;e++)this.editor.setRotation(this.objects[e],this.oldRotations[e],yu.Local,!1,!1);this.editor.emit("objectsChanged",this.objects,"rotation")}toString(){return`RotateOnAxisMultipleCommand id: ${this.id} objects: ${Ia(this.objects)} axis: ${$a(this.axis)} angle: ${this.angle} space: ${this.space}`}}class Xa extends Ca{constructor(e,t,n,r){super(e),this.object=t,this.scale=n.clone(),this.space=r,this.oldScale=t.scale.clone()}execute(){this.editor.scale(this.object,this.scale,this.space,!1)}shouldUpdate(e){return this.object===e.object&&this.space===e.space}update(e){this.scale.multiply(e.scale),this.editor.scale(this.object,e.scale,this.space,!1)}undo(){this.editor.setScale(this.object,this.oldScale,yu.Local,!1)}toString(){return`ScaleCommand id: ${this.id} object: ${Aa(this.object)} scale: ${$a(this.scale)} space: ${this.space}`}}class Ka extends Ca{constructor(e,t,n,r){super(e),this.objects=t.slice(0),this.scale=n.clone(),this.space=r,this.oldScales=t.map(e=>e.scale.clone())}execute(){this.editor.scaleMultiple(this.objects,this.scale,this.space,!1)}shouldUpdate(e){return this.space===e.space&&Wa(this.objects,e.objects)}update(e){this.scale.multiply(e.scale),this.editor.scaleMultiple(this.objects,e.scale,this.space,!1)}undo(){for(let e=0;e<this.objects.length;e++)this.editor.setScale(this.objects[e],this.oldScales[e],yu.Local,!1,!1);this.editor.emit("objectsChanged",this.objects,"scale")}toString(){return`ScaleMultipleCommand id: ${this.id} objects: ${Ia(this.objects)} scale: ${$a(this.scale)} space: ${this.space}`}}class Za extends Ca{constructor(e,t){super(e),this.object=t,this.oldSelection=e.selected.slice(0)}execute(){this.editor.select(this.object,!1)}undo(){this.editor.setSelection(this.oldSelection,!1)}toString(){return`SelectCommand id: ${this.id} object: ${Aa(this.object)}`}}class Qa extends Ca{constructor(e,t){super(e),this.objects=t.slice(0),this.oldSelection=e.selected.slice(0)}execute(){this.editor.selectMultiple(this.objects,!1)}undo(){this.editor.setSelection(this.oldSelection,!1)}toString(){return`SelectMultipleCommand id: ${this.id} objects: ${Ia(this.objects)}`}}class es extends Ca{constructor(e,t,n,r){super(e),this.object=t,this.position=n.clone(),this.space=r,this.oldPosition=t.position.clone()}execute(){this.editor.setPosition(this.object,this.position,this.space,!1)}shouldUpdate(e){return this.object===e.object&&this.space===e.space}update(e){this.position=e.position.clone(),this.editor.setPosition(this.object,e.position,this.space,!1)}undo(){this.editor.setPosition(this.object,this.oldPosition,yu.Local,!1)}toString(){return`SetPositionCommand id: ${this.id} object: ${Aa(this.object)} position: ${$a(this.position)} space: ${this.space}`}}class ts extends Ca{constructor(e,t,n,r){super(e),this.objects=t.slice(0),this.position=n.clone(),this.space=r,this.oldPositions=t.map(e=>e.position.clone())}execute(){this.editor.setPositionMultiple(this.objects,this.position,this.space,!1)}shouldUpdate(e){return this.space===e.space&&Wa(this.objects,e.objects)}update(e){this.position=e.position.clone(),this.editor.setPositionMultiple(this.objects,e.position,this.space,!1)}undo(){for(let e=0;e<this.objects.length;e++)this.editor.setPosition(this.objects[e],this.oldPositions[e],yu.Local,!1,!1);this.editor.emit("objectsChanged",this.objects,"position")}toString(){return`SetPositionMultipleCommand id: ${this.id} objects: ${Ia(this.objects)} position: ${$a(this.position)} space: ${this.space}`}}class ns extends Ca{constructor(e,t,n){super(e),this.object=t,this.newProperties={},this.oldProperties={};for(const e in n){if(!Object.prototype.hasOwnProperty.call(n,e))continue;const t=n[e];t&&t.clone?this.newProperties[e]=t.clone():this.newProperties[e]=t;const r=this.object[e];r&&r.clone?this.oldProperties[e]=r.clone():this.oldProperties[e]=r}}execute(){this.editor.setProperties(this.object,this.newProperties,!1)}undo(){this.editor.setProperties(this.object,this.oldProperties,!1)}toString(){return`SetPropertiesCommand id: ${this.id} object: ${Aa(this.object)} properties: ${La(this.newProperties)}`}}class rs extends Ca{constructor(e,t,n){super(e),this.objects=t.slice(0),this.newProperties={},this.objectsOldProperties=[];for(const e in n){if(!Object.prototype.hasOwnProperty.call(n,e))continue;const t=n[e];t&&t.clone?this.newProperties[e]=t.clone():this.newProperties[e]=t}for(let e=0;e<t.length;e++){const r=t[e],i={};for(const e in n){if(!Object.prototype.hasOwnProperty.call(n,e))continue;const t=r[e];t&&t.clone?i[e]=t.clone():i[e]=t}this.objectsOldProperties.push(i)}}execute(){this.editor.setPropertiesMultiple(this.objects,this.newProperties,!1)}undo(){for(let e=0;e<this.objects.length;e++)this.editor.setProperties(this.objects[e],this.objectsOldProperties[e],!1,!1);this.editor.emit("objectsChanged",this.objects)}toString(){return`SetPropertiesMultipleCommand id: ${this.id} objects: ${Ia(this.objects)} properties: ${La(this.newProperties)}`}}class is extends Ca{constructor(e,t,n,r,i){super(e),this.object=t,this.propertyName=n,this.disableCopy=i,r&&r.clone&&!i?this.newValue=r.clone():this.newValue=r;const o=this.object[n];o&&o.clone&&!i?this.oldValue=o.clone():this.oldValue=o}execute(){this.editor.setProperty(this.object,this.propertyName,this.newValue,!1,!0,this.disableCopy)}shouldUpdate(e){return this.object===e.object&&this.propertyName===e.propertyName}update(e){const t=e.newValue;t&&t.clone&&t.copy&&!this.disableCopy?this.newValue=t.clone():this.newValue=t,this.editor.setProperty(this.object,this.propertyName,this.newValue,!1,!0,this.disableCopy)}undo(){this.editor.setProperty(this.object,this.propertyName,this.oldValue,!1,!0,this.disableCopy)}toString(){return`SetPropertyCommand id: ${this.id} object: ${Aa(this.object)} propertyName: ${this.propertyName} newValue: ${Pa(this.newValue)}`}}class os extends Ca{constructor(e,t,n,r){super(e),this.objects=t.slice(0),this.propertyName=n,r&&r.clone?this.newValue=r.clone():this.newValue=r,this.oldValues=this.objects.map(e=>{const t=e[n];return t&&t.clone?t.clone():t})}execute(){this.editor.setPropertyMultiple(this.objects,this.propertyName,this.newValue,!1)}shouldUpdate(e){return this.propertyName===e.propertyName&&Wa(this.objects,e.objects)}update(e){const t=e.newValue;t&&t.clone&&t.copy?this.newValue=t.clone():this.newValue=t,this.editor.setPropertyMultiple(this.objects,this.propertyName,this.newValue,!1)}undo(){for(let e=0;e<this.objects.length;e++)this.editor.setProperty(this.objects[e],this.propertyName,this.oldValues[e],!1,!1);this.editor.emit("objectsChanged",this.objects,this.propertyName)}toString(){return`SetPropertyMultipleCommand id: ${this.id} objects: ${Ia(this.objects)} propertyName: ${this.propertyName} newValue: ${Pa(this.newValue)}`}}class as extends Ca{constructor(e,t,n,r){super(e),this.object=t,this.rotation=n.clone(),this.space=r,this.oldRotation=t.rotation.clone()}execute(){this.editor.setRotation(this.object,this.rotation,this.space,!1)}shouldUpdate(e){return this.object===e.object&&this.space===e.space}update(e){this.rotation=e.rotation.clone(),this.editor.setRotation(this.object,e.rotation,this.space,!1)}undo(){this.editor.setRotation(this.object,this.oldRotation,yu.Local,!1)}toString(){return`SetRotationCommand id: ${this.id} object: ${Aa(this.object)} rotation: ${Oa(this.rotation)} space: ${this.space}`}}class ss extends Ca{constructor(e,t,n,r){super(e),this.objects=t.slice(0),this.rotation=n.clone(),this.space=r,this.oldRotations=t.map(e=>e.rotation.clone())}execute(){this.editor.setRotationMultiple(this.objects,this.rotation,this.space,!1)}shouldUpdate(e){return this.space===e.space&&Wa(this.objects,e.objects)}update(e){this.rotation=e.rotation.clone(),this.editor.setRotationMultiple(this.objects,e.rotation,this.space,!1)}undo(){for(let e=0;e<this.objects.length;e++)this.editor.setRotation(this.objects[e],this.oldRotations[e],yu.Local,!1,!1);this.editor.emit("objectsChanged",this.objects,"rotation")}toString(){return`SetRotationMultipleCommand id: ${this.id} objects: ${Ia(this.objects)} rotation: ${Oa(this.rotation)} space: ${this.space}`}}class ls extends Ca{constructor(e,t,n,r){super(e),this.object=t,this.scale=n.clone(),this.space=r,this.oldScale=t.scale.clone()}execute(){this.editor.setScale(this.object,this.scale,this.space,!1)}shouldUpdate(e){return this.object===e.object&&this.space===e.space}update(e){this.scale=e.scale.clone(),this.editor.setScale(this.object,e.scale,this.space,!1)}undo(){this.editor.setScale(this.object,this.oldScale,yu.Local,!1)}toString(){return`SetScaleCommand id: ${this.id} object: ${Aa(this.object)} scale: ${$a(this.scale)} space: ${this.space}`}}class cs extends Ca{constructor(e,t,n,r){super(e),this.objects=t.slice(0),this.scale=n.clone(),this.space=r,this.oldScales=t.map(e=>e.scale.clone())}execute(){this.editor.setScaleMultiple(this.objects,this.scale,this.space,!1)}shouldUpdate(e){return this.space===e.space&&Wa(this.objects,e.objects)}update(e){this.scale=e.scale.clone(),this.editor.setScaleMultiple(this.objects,e.scale,this.space,!1)}undo(){for(let e=0;e<this.objects.length;e++)this.editor.setScale(this.objects[e],this.oldScales[e],yu.Local,!1,!1);this.editor.emit("objectsChanged",this.objects,"scale")}toString(){return`SetScaleMultipleCommand id: ${this.id} objects: ${Ia(this.objects)} scale: ${$a(this.scale)} space: ${this.space}`}}class us extends Ca{constructor(e,t){super(e),this.oldSelection=e.selected.slice(0),this.objects=t.slice(0)}execute(){this.editor.setSelection(this.objects,!1)}undo(){this.editor.setSelection(this.oldSelection,!1)}toString(){return`SetSelectionCommand id: ${this.id} objects: ${Ia(this.objects)}`}}class hs extends Ca{constructor(e,t,n,r){super(e),this.object=t,this.translation=n.clone(),this.space=r,this.oldPosition=t.position.clone()}execute(){this.editor.translate(this.object,this.translation,this.space,!1)}shouldUpdate(e){return this.object===e.object&&this.space===e.space}update(e){this.translation.add(e.translation),this.editor.translate(this.object,e.translation,this.space,!1)}undo(){this.editor.setPosition(this.object,this.oldPosition,yu.Local,!1)}toString(){return`TranslateCommand id: ${this.id} object: ${Aa(this.object)} translation: ${$a(this.translation)} space: ${this.space}`}}class ds extends Ca{constructor(e,t,n,r){super(e),this.objects=t.slice(0),this.translation=n.clone(),this.space=r,this.oldPositions=t.map(e=>e.position.clone())}execute(){this.editor.translateMultiple(this.objects,this.translation,this.space,!1)}shouldUpdate(e){return this.space===e.space&&Wa(this.objects,e.objects)}update(e){this.translation.add(e.translation),this.editor.translateMultiple(this.objects,e.translation,this.space,!1)}undo(){for(let e=0;e<this.objects.length;e++)this.editor.setPosition(this.objects[e],this.oldPositions[e],yu.Local,!1,!1);this.editor.emit("objectsChanged",this.objects,"position")}toString(){return`TranslateMultipleCommand id: ${this.id} objects: ${Ia(this.objects)} translation: ${$a(this.translation)} space: ${this.space}`}}class ps extends Ca{constructor(e,t,n,r){super(e),this.objects=[],this.undoObjects=[],this.groupParent=n,this.groupBefore=r,this.oldParents=[],this.oldBefores=[],this.oldSelection=e.selected.slice(0),e.scene.traverse(e=>{-1!==t.indexOf(e)&&this.objects.push(e)}),Va(e.scene,e=>{if(-1!==t.indexOf(e)&&(this.undoObjects.push(e),this.oldParents.push(e.parent),e.parent)){const t=e.parent.children,n=t.indexOf(e);n+1<t.length?this.oldBefores.push(t[n+1]):this.oldBefores.push(void 0)}}),this.groupNode=null}execute(){this.groupNode=this.editor.groupMultiple(this.objects,this.groupParent,this.groupBefore,!1)}undo(){for(let e=0;e<this.objects.length;e++)this.editor.reparent(this.undoObjects[e],this.oldParents[e],this.oldBefores[e],!1,!1,!1,!1);this.editor.removeObject(this.groupNode,!1,!1,!1),this.editor.updateTransformRoots(),this.editor.emit("sceneGraphChanged"),this.editor.setSelection(this.oldSelection,!1,!0,!1)}toString(){return`GroupMultipleObjectsCommand id: ${this.id} objects: ${Ia(this.objects)} groupParent: ${Aa(this.groupParent)} groupBefore: ${Aa(this.groupBefore)}`}}class fs extends Ca{constructor(e,t,n,r,i){super(e),this.objects=[],this.undoObjects=[],this.newParent=n,this.newBefore=r,this.oldParents=[],this.oldBefores=[],this.oldSelection=e.selected.slice(0),this.oldPositions=t.map(e=>e.position.clone()),this.position=i.clone(),e.scene.traverse(e=>{-1!==t.indexOf(e)&&this.objects.push(e)}),Va(e.scene,e=>{if(-1!==t.indexOf(e)&&(this.undoObjects.push(e),this.oldParents.push(e.parent),e.parent)){const t=e.parent.children,n=t.indexOf(e);n+1<t.length?this.oldBefores.push(t[n+1]):this.oldBefores.push(void 0)}})}execute(){this.editor.reparentMultiple(this.objects,this.newParent,this.newBefore,!1),this.editor.setPositionMultiple(this.objects,this.position,yu.Local,!1)}undo(){for(let e=0;e<this.objects.length;e++)this.editor.reparent(this.undoObjects[e],this.oldParents[e],this.oldBefores[e],!1,!1,!1,!1);for(let e=0;e<this.objects.length;e++)this.editor.setPosition(this.objects[e],this.oldPositions[e],yu.Local,!1,!1);this.editor.setSelection(this.oldSelection,!1,!0,!1),this.editor.updateTransformRoots(),this.editor.emit("sceneGraphChanged"),this.editor.emit("objectsChanged",this.objects,"position")}toString(){return`${this.constructor.name} id: ${this.id} objects: ${Ia(this.objects)} newParent: ${Aa(this.newParent)} newBefore: ${Aa(this.newBefore)} position: ${$a(this.position)}`}}class ms extends Ca{constructor(e,t,n,r,i){super(e),this.object=t,this.subPieceId=n,this.materialSlotId=r,this.materialId=i,this.prevMaterialId=t.getMaterialIdForMaterialSlot(n,r)}execute(){this.editor.loadMaterialSlot(this.object,this.subPieceId,this.materialSlotId,this.materialId,!1)}undo(){this.editor.loadMaterialSlot(this.object,this.subPieceId,this.materialSlotId,this.prevMaterialId,!1)}toString(){return`LoadMaterialSlotCommand id: ${this.id} object: ${Aa(this.object)} subPieceId: ${this.subPieceId} materialSlotId: ${this.materialSlotId} materialId: ${this.materialId}`}}class gs extends Ca{constructor(e,t,n,r,i){super(e),this.objects=t.slice(0),this.subPieceId=n,this.materialSlotId=r,this.materialId=i,this.prevMaterialIds=t.map(e=>e.getMaterialIdForMaterialSlot(n,r))}execute(){this.editor.loadMaterialSlotMultiple(this.objects,this.subPieceId,this.materialSlotId,this.materialId,!1)}undo(){for(let e=0;e<this.objects.length;e++){const t=this.objects[e];this.editor.loadMaterialSlot(t,this.subPieceId,this.materialSlotId,this.prevMaterialIds[e],!1,!1)}this.editor.emit("objectsChanged",this.objects,"materialSlot")}toString(){return`LoadMaterialSlotMultipleCommand id: ${this.id} objects: ${Ia(this.objects)} subPieceId: ${this.subPieceId} materialSlotId: ${this.materialSlotId} materialId: ${this.materialId}`}}class vs extends Mr.qb{constructor(){super(),this.type="Model",this.model=null,this._src=null,this._castShadow=!1,this._receiveShadow=!1,this.activeClipIndex=-1,this.animationMixer=null,this.activeClipAction=null}get src(){return this._src}set src(e){this.load(e).catch(console.error)}async loadGLTF(e){const t=(await new Or.b(e).loadGLTF()).scene;return t.animations=t.animations||[],t}async load(e,...t){this._src=e,this.model&&(this.remove(this.model),this.model=null);const n=await this.loadGLTF(e,...t);return n.animations=n.animations||[],this.model=n,this.add(n),n.animations&&n.animations.length>0&&(this.animationMixer=new Mr.d(this.model)),this.castShadow=this._castShadow,this.receiveShadow=this._receiveShadow,this}getClipOptions(){const e=this.model&&this.model.animations?this.model.animations.map((e,t)=>({label:e.name,value:t})):[];return e.unshift({label:"None",value:-1}),e}get activeClip(){return this.model&&this.model.animations&&this.model.animations[this.activeClipIndex]||null}updateAnimationState(){const e=this.activeClip;e!==(this.activeClipAction&&this.activeClipAction.getClip())&&(this.activeClipAction&&this.activeClipAction.stop(),this.animationMixer&&e?(this.activeClipAction=this.animationMixer.clipAction(e),this.activeClipAction.play()):this.activeClipAction=null)}playAnimation(){this.updateAnimationState()}stopAnimation(){this.activeClipAction&&(this.activeClipAction.stop(),this.activeClipAction=null)}update(e){this.animationMixer&&(this.updateAnimationState(),this.animationMixer.update(e))}get castShadow(){return this._castShadow}set castShadow(e){this._castShadow=e,this.model&&this.model.traverse(t=>{if(t.castShadow=e,t.material){const e=t.material;if(Array.isArray(e))for(let t=0;t<e.length;t++)e[t].needsUpdate=!0;else e.needsUpdate=!0}})}get receiveShadow(){return this._receiveShadow}set receiveShadow(e){this._receiveShadow=e,this.model&&this.model.traverse(t=>{if(t.receiveShadow=e,t.material){const e=t.material;if(Array.isArray(e))for(let t=0;t<e.length;t++)e[t].needsUpdate=!0;else e.needsUpdate=!0}})}setShadowsEnabled(e){this.model&&this.model.traverse(t=>{if(t.castShadow=!!e&&this._castShadow,t.receiveShadow=!!e&&this._receiveShadow,t.material){const e=t.material;if(Array.isArray(e))for(let t=0;t<e.length;t++)e[t].needsUpdate=!0;else e.needsUpdate=!0}})}copy(e,t=!0){super.copy(e,!1);for(const n of e.children){let r;n===e.model?(r=Li(n),this.model=r,this.model.animations.length>0&&(this.animationMixer=new Mr.d(this.model))):!0===t&&n!==e.loadingCube&&(r=n.clone()),r&&this.add(r)}return this._src=e._src,this.activeClipIndex=e.activeClipIndex,this}}const ys={nodes:0,meshes:0,materials:0,textures:0,polygons:0,vertices:0,jsonSize:0,bufferInfo:{},textureInfo:{},meshInfo:{}};class _s extends(zi(vs)){static async deserialize(e,t,n,r){const i=await super.deserialize(e,t);return n((async()=>{const{src:e,attribution:n}=t.components.find(e=>"gltf-model"===e.name).props;if(await i.load(e,r),n&&"string"==typeof n){const[e,t]=n.split(" by ");i.attribution={name:e,author:t}}else i.attribution=n;i.collidable=!!t.components.find(e=>"collidable"===e.name),i.walkable=!!t.components.find(e=>"walkable"===e.name);const o=t.components.find(e=>"loop-animation"===e.name);if(o&&o.props){const{clip:e,activeClipIndex:t}=o.props;void 0!==t?i.activeClipIndex=o.props.activeClipIndex:void 0!==e&&i.model&&i.model.animations&&(i.activeClipIndex=i.model.animations.findIndex(t=>t.name===e))}const a=t.components.find(e=>"shadow"===e.name);a&&(i.castShadow=a.props.cast,i.receiveShadow=a.props.receive)})()),i}constructor(e){super(e),this.attribution=null,this._canonicalUrl="",this.collidable=!0,this.walkable=!0,this.initialScale=1,this.boundingBox=new Mr.i,this.boundingSphere=new Mr.Rb,this.stats=ys,this.gltfJson=null}get src(){return this._canonicalUrl}set src(e){this.load(e).catch(console.error)}async loadGLTF(e){const t=this.editor.gltfCache.getLoader(e),{scene:n,json:r,stats:i}=await t.getDependency("gltf");this.stats=i,this.gltfJson=r;const o=Li(n),a=r.asset&&r.asset.extras;if(a){const e=a.title,t=a.author.replace(/ \(http.+\)/,""),n=a.source||this._canonicalUrl;o.name=e,this.attribution={name:e,author:t,url:n}}return o}async load(e,t){const n=e||"";if(n!==this._canonicalUrl||""===n){this._canonicalUrl=n,this.attribution=null,this.issues=[],this.stats=ys,this.gltfJson=null,this.model&&(this.editor.renderer.removeBatchedObject(this.model),this.remove(this.model),this.model=null),this.hideErrorIcon(),this.showLoadingCube();try{const{accessibleUrl:t,files:n}=await this.editor.api.resolveMedia(e);if(this.model&&this.editor.renderer.removeBatchedObject(this.model),await super.load(t),this.stats){const e=this.stats.textureInfo;for(const t in e){if(!Object.prototype.hasOwnProperty.call(e,t))continue;const r=e[t];if(void 0===r.size){let e;for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&n[t].url===r.url){e=n[t];break}e&&(r.size=e.size,this.stats.totalSize+=e.size)}}}if(this.model&&this.editor.renderer.addBatchedObject(this.model),"fit"===this.initialScale){if(this.scale.set(1,1,1),this.model){this.updateMatrixWorld(),this.boundingBox.setFromObject(this.model),this.boundingBox.getBoundingSphere(this.boundingSphere);const e=2*this.boundingSphere.radius;if((e>1e3||e<.1)&&0!==e){const t=1/e;this.scale.set(t,t,t)}else e>20&&this.scale.set(.01,.01,.01)}this.initialScale=1}else this.scale.multiplyScalar(this.initialScale),this.initialScale=1;this.model&&(this.model.traverse(e=>{e.material&&e.material.isMeshStandardMaterial&&(e.material.envMap=this.editor.scene.environmentMap,e.material.needsUpdate=!0)}),this.issues=ra(this.model),na("gltf",this.stats.totalSize,this.issues)),this.updateStaticModes()}catch(e){this.showErrorIcon();const n=new Qi.b(`Error loading model "${this._canonicalUrl}"`,e);t&&t(this,n),console.error(n),this.issues.push({severity:"error",message:"Error loading model."})}return this.editor.emit("objectsChanged",[this]),this.editor.emit("selectionChanged"),this.hideLoadingCube(),this}}onAdd(){this.model&&this.editor.renderer.addBatchedObject(this.model)}onRemove(){this.model&&this.editor.renderer.removeBatchedObject(this.model)}onPlay(){this.playAnimation()}onPause(){this.stopAnimation()}onUpdate(e){super.onUpdate(e),this.editor.playing&&this.update(e)}updateStaticModes(){if(this.model&&(Ti(this.model,Si),this.model.animations&&this.model.animations.length>0))for(const e of this.model.animations)for(const t of e.tracks){const{nodeName:n}=Mr.Ab.parseTrackName(t.name),r=this.model.getObjectByProperty("uuid",n);if(!r)throw new Error(`Model.updateStaticModes: model with url "${this._canonicalUrl}" has an invalid animation "${e.name}"`);Ti(r,wi)}}serialize(){const e={"gltf-model":{src:this._canonicalUrl,attribution:this.attribution},shadow:{cast:this.castShadow,receive:this.receiveShadow}};return-1!==this.activeClipIndex&&(e["loop-animation"]={activeClipIndex:this.activeClipIndex}),this.collidable&&(e.collidable={}),this.walkable&&(e.walkable={}),super.serialize(e)}copy(e,t=!0){return super.copy(e,t),e.loadingCube?(this.initialScale=e.initialScale,this.load(e.src)):(this.updateStaticModes(),this.stats=JSON.parse(JSON.stringify(e.stats)),this.gltfJson=e.gltfJson,this._canonicalUrl=e._canonicalUrl),this.attribution=e.attribution,this.collidable=e.collidable,this.walkable=e.walkable,this}prepareForExport(e){if(super.prepareForExport(),this.addGLTFComponent("shadow",{cast:this.castShadow,receive:this.receiveShadow}),this.activeClip){const t=e.animations.indexOf(this.activeClip);if(-1===t)throw new Error(`Error exporting model "${this.name}" with url "${this._canonicalUrl}". Animation could not be found.`);this.addGLTFComponent("loop-animation",{activeClipIndex:t})}}}c()(_s,"nodeName","Model"),c()(_s,"legacyComponentName","gltf-model"),c()(_s,"initialElementProps",{initialScale:"fit",src:"https://sketchfab.com/models/a4c500d7358a4a199b6a5cd35f416466"});var bs=n(355),xs=n.n(bs);const Ss=["application/x-mpegurl","application/vnd.apple.mpegurl"];function ws(e,t){return!(!t||!Ss.includes(t.toLowerCase()))||!!(e&&e.toLowerCase().indexOf(".m3u8")>0)}const Es={Flat:"flat",Equirectangular360:"360-equirectangular"};class Ts extends io{constructor(e){super(e,"video"),this._videoTexture=new Mr.ic(this.el),this._videoTexture.minFilter=Mr.U,this._videoTexture.encoding=Mr.mc,this._texture=this._videoTexture;const t=new Mr.vb,n=new Mr.fb;n.map=this._texture,n.side=Mr.w,this._mesh=new Mr.eb(t,n),this._mesh.name="VideoMesh",this.add(this._mesh),this._projection="flat",this.hls=null}loadVideo(e,t){return new Promise((n,r)=>{const i=ws(e,t);i?(this.hls||(this.hls=new xs.a),this.hls.loadSource(e),this.hls.attachMedia(this.el),this.hls.on(xs.a.Events.MANIFEST_PARSED,()=>{this.hls.startLoad(-1)})):this.el.src=e;let o=null;const a=()=>{o(),n(this._videoTexture)},s=e=>{o(),r(new Qi.b(`Error loading video "${this.el.src}"`,e))};o=()=>{this.el.removeEventListener("loadeddata",a),this.el.removeEventListener("error",s)},i&&this.hls.on(xs.a.Events.ERROR,s),this.el.addEventListener("loadeddata",a),this.el.addEventListener("error",s)})}get projection(){return this._projection}set projection(e){if(e===this._projection)return;const t=new Mr.fb;let n;"360-equirectangular"===e?(n=new Mr.Sb(1,64,32),n.scale(-1,1,1)):(n=new Mr.vb,t.side=Mr.w),t.map=this._texture,this._projection=e;const r=new Mr.eb(n,t);r.name="VideoMesh";const i=this.children.indexOf(this._mesh);-1===i?this.add(r):(this.children.splice(i,1,r),r.parent=this),this._mesh=r,this.onResize()}async load(e,t){return this._mesh.visible=!1,this._texture=await this.loadVideo(e,t),this.onResize(),this.audioSource=this.audioListener.context.createMediaElementSource(this.el),this.audio.setNodeSource(this.audioSource),this._texture.format===Mr.Eb&&(this._mesh.material.transparent=!0),this._mesh.material.map=this._texture,this._mesh.material.needsUpdate=!0,this._mesh.visible=!0,this}onResize(){if(this.projection===Es.Flat){const e=(this.el.videoHeight||1)/(this.el.videoWidth||1),t=Math.min(1,1/e),n=Math.min(1,e);this._mesh.scale.set(t,n,1)}}clone(e){return new this.constructor(this.audioListener).copy(this,e)}copy(e,t=!0){if(super.copy(e,!1),t)for(let t=0;t<e.children.length;t++){const n=e.children[t];n!==e.audio&&n!==e._mesh&&this.add(n.clone())}return this.projection=e.projection,this}}var Ms=n(75),Cs=n.n(Ms);class $s extends(zi(Ts)){static async deserialize(e,t,n,r){const i=await super.deserialize(e,t),{src:o,controls:a,autoPlay:s,loop:l,audioType:c,volume:u,distanceModel:h,rolloffFactor:d,refDistance:p,maxDistance:f,coneInnerAngle:m,coneOuterAngle:g,coneOuterGain:v,projection:y}=t.components.find(e=>"video"===e.name).props;return n((async()=>{await i.load(o,r),i.controls=a||!1,i.autoPlay=s,i.loop=l,i.audioType=c,i.volume=u,i.distanceModel=h,i.rolloffFactor=d,i.refDistance=p,i.maxDistance=f,i.coneInnerAngle=m,i.coneOuterAngle=g,i.coneOuterGain=v,i.projection=y})()),i}constructor(e){super(e,e.audioListener),this._canonicalUrl="",this._autoPlay=!0,this.volume=.5,this.controls=!0}get src(){return this._canonicalUrl}get autoPlay(){return this._autoPlay}set autoPlay(e){this._autoPlay=e}set src(e){this.load(e).catch(console.error)}async load(e,t){const n=e||"";if(n!==this._canonicalUrl||""===n){this._canonicalUrl=e||"",this.issues=[],this._mesh.visible=!1,this.hideErrorIcon(),this.showLoadingCube(),this.editor.playing&&this.el.pause();try{const{accessibleUrl:t,contentType:n}=await this.editor.api.resolveMedia(e),r=ws(e,n);r&&(this.hls=new xs.a({xhrSetup:(t,n)=>{t.open("GET",this.editor.api.unproxyUrl(e,n))}})),await super.load(t,n),r&&this.hls?this.hls.stopLoad():this.el.duration&&(this.el.currentTime=1),this.editor.playing&&this.autoPlay&&this.el.play(),this.issues=ra(this._mesh,!1)}catch(e){this.showErrorIcon();const n=new Qi.b("Error loading video "+this._canonicalUrl,e);t&&t(this,n),console.error(n),this.issues.push({severity:"error",message:"Error loading video."})}return this.editor.emit("objectsChanged",[this]),this.editor.emit("selectionChanged"),this.hideLoadingCube(),this}}onPlay(){this.autoPlay&&this.el.play()}onPause(){this.el.pause(),this.el.currentTime=0}onChange(){this.onResize()}clone(e){return new this.constructor(this.editor,this.audioListener).copy(this,e)}copy(e,t=!0){return super.copy(e,t),this.controls=e.controls,this._canonicalUrl=e._canonicalUrl,this}serialize(){return super.serialize({video:{src:this._canonicalUrl,controls:this.controls,autoPlay:this.autoPlay,loop:this.loop,audioType:this.audioType,volume:this.volume,distanceModel:this.distanceModel,rolloffFactor:this.rolloffFactor,refDistance:this.refDistance,maxDistance:this.maxDistance,coneInnerAngle:this.coneInnerAngle,coneOuterAngle:this.coneOuterAngle,coneOuterGain:this.coneOuterGain,projection:this.projection}})}prepareForExport(){super.prepareForExport(),this.addGLTFComponent("video",{src:this._canonicalUrl,controls:this.controls,autoPlay:this.autoPlay,loop:this.loop,audioType:this.audioType,volume:this.volume,distanceModel:this.distanceModel,rolloffFactor:this.rolloffFactor,refDistance:this.refDistance,maxDistance:this.maxDistance,coneInnerAngle:this.coneInnerAngle,coneOuterAngle:this.coneOuterAngle,coneOuterGain:this.coneOuterGain,projection:this.projection}),this.addGLTFComponent("networked",{id:this.uuid}),this.replaceObject()}getRuntimeResourcesForStats(){if(this._texture)return{textures:[this._texture],meshes:[this._mesh],materials:[this._mesh.material]}}}c()($s,"legacyComponentName","video"),c()($s,"nodeName","Video"),c()($s,"initialElementProps",{src:new URL(Cs.a,location).href});const Os={Flat:"flat",Equirectangular360:"360-equirectangular"};class As extends Mr.qb{constructor(){super(),this._src=null,this._projection="flat";const e=new Mr.vb,t=new Mr.fb;t.side=Mr.w,this._mesh=new Mr.eb(e,t),this._mesh.name="ImageMesh",this.add(this._mesh),this._texture=null}get src(){return this._src}set src(e){this.load(e).catch(console.error)}loadTexture(e){return Object(Ni.a)(e)}get projection(){return this._projection}set projection(e){const t=new Mr.fb;let n;"360-equirectangular"===e?(n=new Mr.Sb(1,64,32),n.scale(-1,1,1)):(n=new Mr.vb,t.side=Mr.w),t.map=this._texture,this._texture&&this._texture.format===Mr.Eb&&(t.transparent=!0),this._projection=e;const r=new Mr.eb(n,t);r.name="ImageMesh",r.visible=this._mesh.visible;const i=this.children.indexOf(this._mesh);-1===i?this.add(r):(this.children.splice(i,1,r),r.parent=this),this._mesh=r,this.onResize()}async load(e){this._src=e,this._mesh.visible=!1;const t=this._mesh.material;t.map&&t.map.dispose();const n=await this.loadTexture(e);return n.encoding=Mr.mc,n.minFilter=Mr.U,this._texture=n,this.onResize(),n.format===Mr.Eb&&(this._mesh.material.transparent=!0),this._mesh.material.map=this._texture,this._mesh.material.needsUpdate=!0,this._mesh.visible=!0,this}onResize(){if(this._texture&&this.projection===Os.Flat){const e=(this._texture.image.height||1)/(this._texture.image.width||1),t=Math.min(1,1/e),n=Math.min(1,e);this._mesh.scale.set(t,n,1)}}copy(e,t=!0){if(t&&this.remove(this._mesh),super.copy(e,t),t){const t=e.children.indexOf(e._mesh);-1!==t&&(this._mesh=this.children[t])}return this.projection=e.projection,this.src=e.src,this}}var Is=n(72),Ps=n.n(Is);class Ls extends(zi(As)){static async deserialize(e,t,n,r){const i=await super.deserialize(e,t),{src:o,projection:a,controls:s}=t.components.find(e=>"image"===e.name).props;return n((async()=>{await i.load(o,r),i.controls=s||!1,i.projection=a})()),i}constructor(e){super(e),this._canonicalUrl="",this.controls=!0}get src(){return this._canonicalUrl}set src(e){this.load(e).catch(console.error)}onChange(){this.onResize()}loadTexture(e){return this.editor.textureCache.get(e)}async load(e,t){const n=e||"";if(n!==this._canonicalUrl||""===n){this._canonicalUrl=n,this.issues=[],this._mesh.visible=!1,this.hideErrorIcon(),this.showLoadingCube();try{const{accessibleUrl:t}=await this.editor.api.resolveMedia(e);await super.load(t),this.issues=ra(this._mesh,!1);const n=performance.getEntriesByName(t);if(n.length>0){na("image",n[0].encodedBodySize,this.issues)}}catch(e){this.showErrorIcon();const n=new Qi.b("Error loading image "+this._canonicalUrl,e);t&&t(this,n),console.error(n),this.issues.push({severity:"error",message:"Error loading image."})}return this.editor.emit("objectsChanged",[this]),this.editor.emit("selectionChanged"),this.hideLoadingCube(),this}}copy(e,t=!0){return super.copy(e,t),this.controls=e.controls,this._canonicalUrl=e._canonicalUrl,this}serialize(){return super.serialize({image:{src:this._canonicalUrl,controls:this.controls,projection:this.projection}})}prepareForExport(){super.prepareForExport(),this.addGLTFComponent("image",{src:this._canonicalUrl,controls:this.controls,projection:this.projection}),this.addGLTFComponent("networked",{id:this.uuid}),this.replaceObject()}getRuntimeResourcesForStats(){if(this._texture)return{textures:[this._texture],meshes:[this._mesh],materials:[this._mesh.material]}}}c()(Ls,"legacyComponentName","image"),c()(Ls,"nodeName","Image"),c()(Ls,"initialElementProps",{src:new URL(Ps.a,location).href});var ks=n(496),Rs=n.n(ks);let Ds=null;class js extends(zi(io)){static async load(){Ds=await Object(Ni.a)(Rs.a)}static async deserialize(e,t,n,r){const i=await super.deserialize(e,t),{src:o,controls:a,autoPlay:s,loop:l,audioType:c,volume:u,distanceModel:h,rolloffFactor:d,refDistance:p,maxDistance:f,coneInnerAngle:m,coneOuterAngle:g,coneOuterGain:v}=t.components.find(e=>"audio"===e.name).props;return n((async()=>{await i.load(o,r),i.controls=a||!1,i.autoPlay=s,i.loop=l,i.audioType=c,i.volume=u,i.distanceModel=h,i.rolloffFactor=d,i.refDistance=p,i.maxDistance=f,i.coneInnerAngle=m,i.coneOuterAngle=g,i.coneOuterGain=v})()),i}constructor(e){super(e,e.audioListener),this._canonicalUrl="",this._autoPlay=!0,this.volume=.5,this.controls=!0;const t=new Mr.vb,n=new Mr.fb;n.map=Ds,n.side=Mr.w,n.transparent=!0,this.helper=new Mr.eb(t,n),this.helper.layers.set(1),this.add(this.helper)}get src(){return this._canonicalUrl}set src(e){this.load(e).catch(console.error)}get autoPlay(){return this._autoPlay}set autoPlay(e){this._autoPlay=e}async load(e,t){const n=e||"";if(n!==this._canonicalUrl||""===n){this._canonicalUrl=e||"",this.helper.visible=!1,this.hideErrorIcon(),this.showLoadingCube(),this.editor.playing&&this.el.pause();try{const{accessibleUrl:t,contentType:n}=await this.editor.api.resolveMedia(e);await super.load(t,n),this.editor.playing&&this.autoPlay&&this.el.play(),this.helper.visible=!0}catch(e){this.showErrorIcon();const n=new Qi.b("Error loading audio "+this._canonicalUrl,e);t&&t(this,n),console.error(n)}return this.editor.emit("objectsChanged",[this]),this.editor.emit("selectionChanged"),this.hideLoadingCube(),this}}onPlay(){this.autoPlay&&this.el.play()}onPause(){this.el.pause(),this.el.currentTime=0}clone(e){return new this.constructor(this.editor,this.audioListener).copy(this,e)}copy(e,t=!0){if(t&&this.remove(this.helper),super.copy(e,t),t){const t=e.children.findIndex(t=>t===e.helper);-1!==t&&(this.helper=this.children[t])}return this._canonicalUrl=e._canonicalUrl,this.controls=e.controls,this}serialize(){return super.serialize({audio:{src:this._canonicalUrl,controls:this.controls,autoPlay:this.autoPlay,loop:this.loop,audioType:this.audioType,volume:this.volume,distanceModel:this.distanceModel,rolloffFactor:this.rolloffFactor,refDistance:this.refDistance,maxDistance:this.maxDistance,coneInnerAngle:this.coneInnerAngle,coneOuterAngle:this.coneOuterAngle,coneOuterGain:this.coneOuterGain}})}prepareForExport(){super.prepareForExport(),this.remove(this.helper),this.addGLTFComponent("audio",{src:this._canonicalUrl,controls:this.controls,autoPlay:this.autoPlay,loop:this.loop,audioType:this.audioType,volume:this.volume,distanceModel:this.distanceModel,rolloffFactor:this.rolloffFactor,refDistance:this.refDistance,maxDistance:this.maxDistance,coneInnerAngle:this.coneInnerAngle,coneOuterAngle:this.coneOuterAngle,coneOuterGain:this.coneOuterGain}),this.addGLTFComponent("networked",{id:this.uuid}),this.replaceObject()}}c()(js,"legacyComponentName","audio"),c()(js,"nodeName","Audio");var Ns=n(497),Fs=n.n(Ns);let Us=null;class Bs extends(zi(Mr.qb)){static async load(){Us=await Object(Ni.a)(Fs.a)}static async deserialize(e,t){const n=await super.deserialize(e,t),{href:r}=t.components.find(e=>"link"===e.name).props;return n.href=r,n}constructor(e){super(e),this.href="";const t=new Mr.vb,n=new Mr.fb;n.map=Us,n.side=Mr.w,n.transparent=!0,this.helper=new Mr.eb(t,n),this.helper.layers.set(1),this.add(this.helper)}copy(e,t=!0){if(t&&this.remove(this.helper),super.copy(e,t),t){const t=e.children.findIndex(t=>t===e.helper);-1!==t&&(this.helper=this.children[t])}return this.href=e.href,this}serialize(){return super.serialize({link:{href:this.href}})}prepareForExport(){super.prepareForExport(),this.remove(this.helper),this.addGLTFComponent("link",{href:this.href}),this.addGLTFComponent("networked",{id:this.uuid}),this.replaceObject()}}c()(Bs,"legacyComponentName","link"),c()(Bs,"nodeName","Link");var zs=n(288),Vs=n.n(zs),Gs=n(71);class Hs extends br.a{constructor(){super(),this.id="",this.name="",this.iconComponent=void 0,this.assetPanelComponent=void 0,this.requiresAuthentication=!1,this.uploadSource=!1,this.searchDebounceTimeout=500}search(e,t,n,r){return{results:[],suggestions:[],nextCursor:0,hasMore:!1}}}function Ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qs(e,t=[],n=0){const r=Object(u.useRef)(),i=Object(u.useRef)(),o=function(){const e=Object(u.useRef)(!1);return Object(u.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),()=>e.current}(),[a,s]=Object(u.useState)(t),[l,c]=Object(u.useState)([]),[h,d]=Object(u.useState)(void 0),[p,f]=Object(u.useState)(!1),[m,g]=Object(u.useState)(n),[v,y]=Object(u.useState)(!0),_=Object(u.useCallback)((t,n=0)=>{f(!0),y(!1),d(void 0),0===n&&s([]),i.current&&i.current.abort();const l=new AbortController;i.current=l;const u=e(t,n,l.signal);r.current=u,u.then(e=>{if(o()&&r.current===u){const t=e.results||[];s(0===n?t:[...a,...t]),c(e.suggestions||[]),g(e.nextCursor||0),y(e.hasMore||!1),f(!1)}}).catch(e=>{o()&&r.current===u&&(s([]),c([]),g(0),y(!1),d(e),f(!1),console.error(e))}).finally(()=>{i.current===l&&(i.current=void 0)})},[i,d,f,e,r,o,a,s,c,g,y]);return{loadAsync:Object(u.useCallback)(e=>_(e,0),[_]),loadMore:Object(u.useCallback)(e=>{!p&&v&&_(e,m)},[p,v,_,m]),hasMore:v,isLoading:p,results:a,suggestions:l,error:h}}function Js(e,t={},n=[],r=0){const[i,o]=Object(u.useState)(t),a=qs((t,n,r)=>e.search(t,n,r),n,r),{loadAsync:s}=a,l=K()(a,["loadAsync"]);Object(u.useEffect)(()=>{const t=()=>{s(i)};return e.addListener("resultsChanged",t),()=>{e.removeListener("resultsChanged",t)}},[e,s,i]);const[h]=function(e,t,n){void 0===n&&(n={});var r=n.maxWait,i=Object(u.useRef)(null),o=Object(u.useRef)([]),a=n.leading,s=void 0===n.trailing||n.trailing,l=Object(u.useRef)(!1),c=Object(u.useRef)(null),h=Object(u.useRef)(!1),d=Object(u.useRef)(e);d.current=e;var p=Object(u.useCallback)((function(){clearTimeout(c.current),clearTimeout(i.current),i.current=null,o.current=[],c.current=null,l.current=!1}),[]);Object(u.useEffect)((function(){return function(){h.current=!0}}),[]);var f=Object(u.useCallback)((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];o.current=e,clearTimeout(c.current),l.current&&(l.current=!1),c.current||!a||l.current||(d.current.apply(d,e),l.current=!0),c.current=setTimeout((function(){var t=!0;a&&l.current&&(t=!1),p(),!h.current&&s&&t&&d.current.apply(d,e)}),t),r&&!i.current&&s&&(i.current=setTimeout((function(){var e=o.current;p(),h.current||d.current.apply(null,e)}),r))}),[r,t,p,a,s]),m=Object(u.useCallback)((function(){c.current&&(d.current.apply(null,o.current),p())}),[p]);return[f,p,m]}(s,e.searchDebounceTimeout),d=Object(u.useCallback)(e=>{h(e),o(e)},[h,o]);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ws(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ws(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({params:i,setParams:d},l)}var Ys=n(45);const Xs=_.e.li.withConfig({displayName:"List__ListItem",componentId:"sc-1g50txf-0"})(["display:flex;flex-direction:row;outline:none;overflow:hidden;user-select:none;min-height:24px;padding:0 4px;align-items:center;color:",";background-color:",";:nth-child(odd){background-color:",";}:hover,:focus{background-color:",";color:",";}:active{background-color:",";color:",";}"],e=>e.theme.text,e=>e.selected?e.theme.selected:e.theme.panel2,e=>e.selected?e.theme.selected:e.theme.panel,e=>e.selected?e.theme.blueHover:e.theme.hover,e=>e.theme.text,e=>e.theme.bluePressed,e=>e.theme.text);_.e.div.withConfig({displayName:"List__ListItemIcon",componentId:"sc-1g50txf-1"})(["width:12px;height:12px;margin-right:4px;"]);p.a.object.isRequired,p.a.node;const Ks=_.e.ul.withConfig({displayName:"List",componentId:"sc-1g50txf-2"})(["height:100%;overflow-y:auto;"]),Zs=h.a.createContext(null),Qs=Zs.Provider;function el(e){return function(t){return h.a.createElement(Zs.Consumer,null,n=>h.a.createElement(e,s()({},t,{editor:n})))}}var tl=n(215),nl="undefined"!=typeof window?u.useLayoutEffect:u.useEffect;function rl(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!s(c))return!1;var u=e[c],h=t[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0}function il(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ol(e,t,n){var r=il(Object(u.useState)((function(){return t(e)})),2),i=r[0],o=r[1],a=Object(u.useCallback)((function(){var r=t(e);rl(i,r)||(o(r),n&&n())}),[i,e,n]);return nl(a,[]),[i,a]}function al(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function sl(e,t,n){var r=al(ol(e,t,n),2),i=r[0],o=r[1];return nl((function(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(o,{handlerIds:[t]})}),[e,o]),i}var ll=n(439);function cl(){var e=Object(u.useContext)(ll.a).dragDropManager;return Object(tl.a)(null!=e,"Expected drag drop context"),e}function ul(e,t){"function"==typeof e?e(t):e.current=t}function hl(e,t){var n=e.ref;return Object(tl.a)("string"!=typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),n?Object(u.cloneElement)(e,{ref:function(e){ul(n,e),ul(t,e)}}):Object(u.cloneElement)(e,{ref:t})}function dl(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}function pl(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{var i=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Object(u.isValidElement)(t)){var r=t;return e(r,n),r}var i=t;dl(i);var o=n?function(t){return e(t,n)}:e;return hl(i,o)}}(r);t[n]=function(){return i}}})),t}function fl(e){return(fl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ml(e){return null!==e&&"object"===fl(e)&&e.hasOwnProperty("current")}function gl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var vl=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks=pl({dropTarget:function(e,t){n.clearDropTarget(),n.dropTargetOptions=t,ml(e)?n.dropTargetRef=e:n.dropTargetNode=e,n.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=t}var t,n,r;return t=e,(n=[{key:"reconnect",value:function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}},{key:"receiveHandlerId",value:function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!rl(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}},{key:"connectTarget",get:function(){return this.dropTarget}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}}])&&gl(t.prototype,n),r&&gl(t,r),e}();function yl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _l=!1,bl=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.targetId=null,this.internalMonitor=t.getMonitor()}var t,n,r;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.targetId=e}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;Object(tl.a)(!_l,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return _l=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{_l=!1}}},{key:"isOver",value:function(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}])&&yl(t.prototype,n),r&&yl(t,r),e}();function xl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Sl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function wl(e){var t=Object(u.useRef)(e);t.current=e,Object(tl.a)(null!=e.accept,"accept must be defined");var n,r=Sl((n=cl(),[Object(u.useMemo)((function(){return new bl(n)}),[n]),Object(u.useMemo)((function(){return new vl(n.getBackend())}),[n])]),2),i=r[0],o=r[1];!function(e,t,n){var r=cl(),i=Object(u.useMemo)((function(){return{canDrop:function(){var n=e.current.canDrop;return!n||n(t.getItem(),t)},hover:function(){var n=e.current.hover;n&&n(t.getItem(),t)},drop:function(){var n=e.current.drop;if(n)return n(t.getItem(),t)}}}),[t]);nl((function(){var o=xl(function(e,t,n){var r=n.getRegistry(),i=r.addTarget(e,t);return[i,function(){return r.removeTarget(i)}]}(e.current.accept,i,r),2),a=o[0],s=o[1];return t.receiveHandlerId(a),n.receiveHandlerId(a),s}),[t,n])}(t,i,o);var a=sl(i,t.current.collect||function(){return{}},(function(){return o.reconnect()})),s=Object(u.useMemo)((function(){return o.hooks.dropTarget()}),[o]);return nl((function(){o.dropTargetOptions=e.options||null,o.reconnect()}),[e.options]),[a,s]}const El={File:r.FILE,Node:"Node",Model:"Model",Image:"Image",Video:"Video",Audio:"Audio",Element:"Element",KitPiece:"KitPiece"},Tl=[El.Model,El.Image,El.Video,El.Audio,El.Element,El.KitPiece];function Ml(e){return-1!==Tl.indexOf(e.type)}function Cl(e,t,n,r){if(Ml(t)){const{nodeClass:i,initialProps:o}=t.value,a=new i(e);return o&&Object.assign(a,o),e.addObject(a,n,r),!0}return!1}var $l=n(209),Ol=n(26);const Al=Object(_.e)(Ol.b).withConfig({displayName:"ErrorDialog__ErrorDialogContainer",componentId:"sc-1ctjezc-0"})(["max-width:600px;","{padding:0;}"],Ol.a),Il=_.e.code.withConfig({displayName:"ErrorDialog__ErrorMessage",componentId:"sc-1ctjezc-1"})(["white-space:pre-wrap;overflow-wrap:break-word;overflow-x:hidden;overflow-y:auto;padding:16px;color:",";"],e=>e.theme.red);class Pl extends u.Component{constructor(...e){super(...e),c()(this,"state",{eventId:null}),c()(this,"onShowReportDialog",()=>{$l.b({eventId:this.state.eventId,user:{name:"Anonymous Spoke User",email:"anonymous.spoke.user@mozilla.com"}})})}componentDidMount(){if(this.props.error){const e=y.a(this.props.error);this.setState({eventId:e})}}renderBottomNav(){return this.state.eventId?h.a.createElement(Me.a,{onClick:this.onShowReportDialog},"Submit Feedback"):null}render(){const e=this.props,{error:t,message:n,onCancel:r}=e,i=K()(e,["error","message","onCancel"]);return h.a.createElement(Al,s()({},i,{bottomNav:this.renderBottomNav()}),h.a.createElement(Il,null,n))}}Pl.propTypes={title:p.a.string.isRequired,error:p.a.object,message:p.a.string.isRequired,onCancel:p.a.func},Pl.defaultProps={title:"Error"};var Ll=n(30),kl=n(29);const Rl=h.a.createContext({showDialog:()=>{},hideDialog:()=>{}}),Dl=Rl.Provider;var jl=n(57);function Nl(e={}){const t=Object(u.useContext)(Zs),{showDialog:n,hideDialog:r}=Object(u.useContext)(Rl),i=void 0!==e.multiple&&e.multiple,o=e.source||t.defaultUploadSource,a=e.accepts||jl.b;return Object(u.useCallback)(async e=>{let s=[];try{if(!i&&e.length>1)throw new Error("Input does not accept multiple files.");if(a)for(const t of e){let e=!1;for(const n of a)if(n.startsWith(".")){if(t.name.endsWith(n)){e=!0;break}}else if(t.type.startsWith(n)){e=!0;break}if(!e)throw new Error(`"${t.name}" does not match the following mime types or extensions: ${a.join(", ")}`)}if(!t.api.isAuthenticated()){if(!await new Promise(e=>{n(kl.a,{onSuccess:()=>e(!0),onCancel:()=>e(!1)})}))return r(),null}const l=new AbortController;n(Ll.a,{title:"Uploading Files",message:`Uploading files 1 of ${e.length}: 0%`,cancelable:!0,onCancel:()=>{l.abort(),r()}}),s=await o.upload(e,(e,t,i)=>{n(Ll.a,{title:"Uploading Files",message:`Uploading files: ${e} of ${t}: ${Math.round(100*i)}%`,cancelable:!0,onCancel:()=>{l.abort(),r()}})},l.signal),r()}catch(e){return console.error(e),n(Pl,{title:"Upload Error",message:"Error uploading file: "+(e.message||"There was an unknown error."),error:e}),null}return s},[n,r,o,i,a,t])}var Fl=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 640 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",key:"k0"}))}));Fl.displayName="CloudUploadAlt";const Ul=_.e.div.withConfig({displayName:"AssetDropZone__DropZoneBackground",componentId:"g4qb0i-0"})(["position:absolute;display:flex;flex-direction:column;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.3);justify-content:center;align-items:center;opacity:",";pointer-events:",";h3{font-size:1.5em;margin-top:12px;}"],({isOver:e,canDrop:t})=>e&&t?"1":"0",({isDragging:e})=>e?"auto":"none");function Bl({afterUpload:e,uploadOptions:t}){const n=Object(u.useContext)(Zs),r=Nl(t),[{canDrop:i,isOver:o,isDragging:a},s]=wl({accept:[El.File],drop(t){r(t.files).then(t=>{t&&(n.setSource(n.defaultUploadSource.id),e&&e(t))})},collect:e=>({canDrop:e.canDrop(),isOver:e.isOver(),isDragging:null!==e.getItem()&&e.canDrop()})});return h.a.createElement(Ul,{ref:s,isDragging:a,canDrop:i,isOver:o},h.a.createElement(Fl,{size:48}),h.a.createElement("h3",null,"Upload Asset"))}function zl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zl(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Bl.propTypes={afterUpload:p.a.func,uploadOptions:p.a.object};const Gl=Object(_.e)(Ys.b).withConfig({displayName:"AssetsPanel__AssetsPanelContainer",componentId:"sc-1xq1o7-0"})(["position:relative;flex:1;background-color:",";"],e=>e.theme.panel),Hl=_.e.div.withConfig({displayName:"AssetsPanel__AssetsPanelToolbarContainer",componentId:"sc-1xq1o7-1"})(["display:flex;min-height:32px;background-color:",";align-items:center;padding:0 8px;justify-content:space-between;border-bottom:1px solid ",";"],e=>e.theme.toolbar,e=>e.theme.panel),Wl=Object(_.e)(Ys.b).withConfig({displayName:"AssetsPanel__AssetPanelToolbarContent",componentId:"sc-1xq1o7-2"})(["flex:1;align-items:flex-end;& > *{margin-left:16px;}"]);function ql(e){let{title:t,children:n}=e,r=K()(e,["title","children"]);return h.a.createElement(Hl,r,h.a.createElement("div",null,t),h.a.createElement(Wl,null,n))}ql.propTypes={title:p.a.string,children:p.a.node};const Jl=Object(_.e)(Ys.a).withConfig({displayName:"AssetsPanel__AssetsPanelColumn",componentId:"sc-1xq1o7-3"})(["max-width:175px;border-right:1px solid ",";"],e=>e.theme.border),Yl=Object(_.e)(Ys.b).withConfig({displayName:"AssetsPanel__AssetPanelContentContainer",componentId:"sc-1xq1o7-4"})(["flex:1;overflow:hidden;"]);function Xl(e){const t=e.api.isAuthenticated();return e.sources.filter(e=>!e.requiresAuthentication||t)}function Kl(){const e=Object(u.useContext)(Zs),[t,n]=Object(u.useState)(Xl(e).filter(t=>!t.experimental||e.settings.enableExperimentalFeatures)),[r,i]=Object(u.useState)(t.length>0?t[0]:null),o=r&&r.component;Object(u.useEffect)(()=>{const o=e=>{i(t.find(t=>t.id===e))},a=()=>{const t=Xl(e);n(t),-1===t.indexOf(r)&&i(t.length>0?t[0]:null)};return e.addListener("settingsChanged",()=>{const t=e.settings.enableExperimentalFeatures,r=Xl(e).filter(e=>!e.experimental||t);n(r)}),e.addListener("setSource",o),e.api.addListener("authentication-changed",a),()=>{e.removeListener("setSource",o),e.api.removeListener("authentication-changed",a)}},[e,i,t,n,r]);const[a,s]=Object(u.useState)({}),l=Object(u.useCallback)(e=>{s(Vl(Vl({},a),{},{[r.id]:e}))},[r,s,a]),c=a[r.id]||{};return h.a.createElement(Gl,{id:"assets-panel"},h.a.createElement(Jl,{flex:!0},h.a.createElement(ql,{title:"Assets"}),h.a.createElement(Ks,null,t.map(e=>h.a.createElement(Xs,{key:e.id,onClick:()=>i(e),selected:r===e},e.name)))),h.a.createElement(Ys.a,{flex:!0},o&&h.a.createElement(o,{key:r.id,source:r,editor:e,savedState:c,setSavedState:l})),h.a.createElement(Bl,null))}var Zl=Object(_.d)(["background-color:",";border-radius:4px;border:1px solid ",";color:",";height:24px;padding:6px 8px;&:hover{border-color:",";}&:focus{border-color:",";}&:disabled{background-color:",";color:",";}"],e=>e.theme.inputBackground,e=>e.theme.border,e=>e.theme.text,e=>e.theme.blueHover,e=>e.theme.blue,e=>e.theme.disabled,e=>e.theme.disabledText);const Ql=_.e.div.withConfig({displayName:"AssetSearchInput__SearchInputContainer",componentId:"sc-1wytiad-0"})(["display:flex;align-items:center;flex:1;justify-content:flex-end;a{color:",";}input{"," margin-right:8px;display:flex;flex:1;max-width:300px;}"],e=>e.theme.text,Zl),ec=_.e.div.withConfig({displayName:"AssetSearchInput__LegalContainer",componentId:"sc-1wytiad-1"})(["display:flex;white-space:nowrap;text-indent:0.5em;"]);function tc(e){let{legal:t,privacyPolicyUrl:n,onChange:r}=e,i=K()(e,["legal","privacyPolicyUrl","onChange"]);return h.a.createElement(Ql,null,h.a.createElement("input",s()({placeholder:"Search...",onChange:r},i)),t&&h.a.createElement(ec,null,t,n&&h.a.createElement(h.a.Fragment,null,h.a.createElement("span",null,"|"),h.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:n},"Privacy Policy"))))}function nc(e,t,n,r=!1){const i=Object(u.useRef)(e),o=Object(u.useCallback)((e,i)=>{r&&i.shiftKey?-1===t.indexOf(e)?n([...t,e]):n(t.filter(t=>t!==e)):n([e])},[t,r,n]),a=Object(u.useCallback)(()=>n([]),[n]);return Object(u.useEffect)(()=>{e!==i.current&&(a(),i.current=e)},[e,i,a]),[o,a]}tc.propTypes={onChange:p.a.func,legal:p.a.string,privacyPolicyUrl:p.a.string};var rc=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 192 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z",key:"k0"}))}));rc.displayName="CaretRight";var ic=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 320 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z",key:"k0"}))}));ic.displayName="CaretDown";function oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ac(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oc(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const sc=Object(_.e)(Ys.a).withConfig({displayName:"TagList__StyledTagList",componentId:"j21q1x-0"})(["height:auto;min-height:100%;min-width:175px;border-right:1px solid ",";"],e=>e.theme.panel),lc=Object(_.e)(Ys.b).withConfig({displayName:"TagList__TagListHeader",componentId:"j21q1x-1"})(["color:",";justify-content:space-between;align-items:center;padding:0 4px;min-height:24px;background-color:",";border-bottom:1px solid ",";"],e=>e.theme.text2,e=>e.theme.panel2,e=>e.theme.panel),cc=_.e.div.withConfig({displayName:"TagList__TagListContainer",componentId:"j21q1x-2"})(["height:100%;overflow-y:scroll;overflow-x:auto;"]),uc=_.e.div.withConfig({displayName:"TagList__TagListToggle",componentId:"j21q1x-3"})(["padding:2px 2px;margin:0 2px;:hover{color:",";background-color:",";border-radius:3px;}"],e=>e.theme.text,e=>e.theme.hover2),hc=_.e.div.withConfig({displayName:"TagList__TagContent",componentId:"j21q1x-4"})(["display:flex;align-items:center;min-height:24px;padding-left:","px;color:",";background-color:",";:hover,:focus{background-color:",";color:",";}:active{background-color:",";color:",";}"],e=>20*e.depth,e=>e.theme.text,e=>e.selected?e.theme.selected:"transparent",e=>e.selected?e.theme.blueHover:e.theme.hover,e=>e.theme.text,e=>e.theme.bluePressed,e=>e.theme.text),dc=_.e.li.withConfig({displayName:"TagList__TreeListItem",componentId:"j21q1x-5"})(["display:flex;flex-direction:column;outline:none;overflow:hidden;user-select:none;min-height:24px;white-space:nowrap;"]),pc=_.e.ul.withConfig({displayName:"TagList__TagChildrenList",componentId:"j21q1x-6"})(["width:max-content;min-width:100%;"]),fc=_.e.div.withConfig({displayName:"TagList__TreeLeafSpacer",componentId:"j21q1x-7"})(["width:16px;"]);function mc(e){let{tag:t,depth:n,onClick:r,expanded:i,onToggleExpanded:o,selectedTags:a}=e,l=K()(e,["tag","depth","onClick","expanded","onToggleExpanded","selectedTags"]);const c=Object(u.useCallback)(e=>{e.stopPropagation(),t.disabled||r(t,e)},[r,t]),d=Object(u.useCallback)(e=>{e.stopPropagation(),o(t)},[o,t]),p=-1!==a.indexOf(t)||0===a.length&&"All"===t.value,f=i[t.value];return h.a.createElement(dc,s()({selected:p},l),h.a.createElement(hc,{depth:n,selected:p,onClick:c},t.children?h.a.createElement(uc,{onClick:d},f?h.a.createElement(ic,{size:12}):h.a.createElement(rc,{size:12})):h.a.createElement(fc,null),t.label),t.children&&f&&h.a.createElement(pc,null,t.children.map(e=>h.a.createElement(mc,s()({key:e.value,tag:e,onClick:r,depth:n+1,expanded:i,selectedTags:a,onToggleExpanded:o},l)))))}function gc({tags:e,selectedTags:t,onChange:n,multiselect:r,initialExpandedTags:i,onChangeExpandedTags:o}){const a=Object(u.useContext)(_.a),s=Object(u.useRef)(),[l,c]=nc(e,t,n,r),[d,p]=Object(u.useState)(i||{}),f=Object(u.useCallback)(e=>{const t=ac(ac({},d),{},{[e.value]:!d[e.value]});p(t),o(t)},[d,p,o]);return Object(u.useEffect)(()=>{s.current.querySelectorAll("li").forEach((e,t)=>{e.style.backgroundColor=t%2==0?a.panel:a.panel2})},[s,a,d,e]),h.a.createElement(sc,null,h.a.createElement(lc,null,"Tags"),h.a.createElement(cc,{ref:s},h.a.createElement(pc,null,h.a.createElement(mc,{key:"All",onClick:c,onToggleExpanded:f,expanded:d,selectedTags:t,tag:{label:"All",value:"All"}}),e.map(e=>h.a.createElement(mc,{key:e.value,onClick:l,onToggleExpanded:f,expanded:d,selectedTags:t,tag:e})))))}mc.propTypes={tag:p.a.object.isRequired,onClick:p.a.func,depth:p.a.number,expanded:p.a.object,onToggleExpanded:p.a.func,selectedTags:p.a.arrayOf(p.a.object)},mc.defaultProps={depth:0},gc.propTypes={selectedTags:p.a.arrayOf(p.a.object).isRequired,tags:p.a.arrayOf(p.a.object).isRequired,onChange:p.a.func.isRequired,multiselect:p.a.bool,initialExpandedTags:p.a.object,onChangeExpandedTags:p.a.func},gc.defaultProps={tags:[],selectedTags:[],onSelect:()=>{},initialExpandedTags:{},onChangeExpandedTags:()=>{}};var vc=n(47),yc=n.n(vc);const _c=_.e.div.withConfig({displayName:"MediaGrid__MediaGridItemContainer",componentId:"nfwu9f-0"})(["position:relative;display:flex;flex:1;flex-direction:column;outline:none;overflow:hidden;user-select:none;text-decoration:none;border-radius:","px;background-color:",";border:2px solid ",';cursor:pointer;::before{content:"";display:inline-block;width:1px;height:0;padding-bottom:',"%;}:hover,:focus{color:inherit;border-color:",";}:active{border-color:",";}"],e=>e.borderRadius,e=>e.theme.panel2,e=>e.selected?e.theme.selected:"transparent",e=>1/e.aspectRatio*100,e=>e.theme.blueHover,e=>e.theme.selected);_c.propTypes={aspectRatio:p.a.number.isRequired,borderRadius:p.a.number.isRequired,selected:p.a.bool},_c.defaultProps={aspectRatio:1,borderRadius:6};const bc=_.e.div.withConfig({displayName:"MediaGrid__MediaGridItemContent",componentId:"nfwu9f-1"})(["display:flex;flex-direction:column;position:absolute;top:0;left:0;bottom:0;right:0;"]),xc=_.e.div.withConfig({displayName:"MediaGrid__MediaGridItemThumbnailImage",componentId:"nfwu9f-2"})(["display:flex;flex:1;background-size:cover;background-position:50%;background-repeat:no-repeat;"]),Sc=_.e.video.withConfig({displayName:"MediaGrid__MediaGridItemThumbnailVideo",componentId:"nfwu9f-3"})(["display:flex;flex:1;"]),wc=_.e.div.withConfig({displayName:"MediaGrid__MediaGridItemIconContainer",componentId:"nfwu9f-4"})(["display:flex;flex:1;flex-direction:column;justify-content:center;align-items:center;padding:8px;text-align:center;overflow:hidden;div{margin-top:8px;display:block;text-overflow:ellipsis;overflow:hidden;width:100%;}"]),Ec=_.e.div.withConfig({displayName:"MediaGrid__MediaGridItemLabelContainer",componentId:"nfwu9f-5"})(["padding-top:4px;display:flex;justify-content:center;"]),Tc=_.e.div.withConfig({displayName:"MediaGrid__MediaGridItemLabel",componentId:"nfwu9f-6"})(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]);function Mc(e){let{label:t,src:n}=e,r=K()(e,["label","src"]);return h.a.createElement(h.a.Fragment,null,h.a.createElement(_c,r,h.a.createElement(bc,null,h.a.createElement(Sc,{autoPlay:!0,muted:!0,src:n}))),h.a.createElement(Ec,null,h.a.createElement(Tc,null,t)))}function Cc(e){let{label:t,src:n}=e,r=K()(e,["label","src"]);return h.a.createElement(h.a.Fragment,null,h.a.createElement(_c,r,h.a.createElement(bc,null,h.a.createElement(xc,{style:{backgroundImage:`url(${n})`}}))),h.a.createElement(Ec,null,h.a.createElement(Tc,null,t)))}function $c(e){let{label:t,iconComponent:n}=e,r=K()(e,["label","iconComponent"]);return h.a.createElement(h.a.Fragment,null,h.a.createElement(_c,r,h.a.createElement(bc,null,h.a.createElement(wc,null,h.a.createElement(n,{size:48})))),h.a.createElement(Ec,null,h.a.createElement(Tc,null,t)))}Mc.propTypes={src:p.a.string,label:p.a.string},Cc.propTypes={src:p.a.string,label:p.a.string},$c.propTypes={iconComponent:p.a.object,label:p.a.string};const Oc=_.e.div.withConfig({displayName:"MediaGrid",componentId:"nfwu9f-7"})(["display:grid;grid-gap:",";width:100%;grid-template-columns:repeat(auto-fill,minmax(",",1fr));padding:",";"],e=>e.gap,e=>e.minWidth,e=>e.gap);function Ac(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Oc.propTypes={gap:p.a.string.isRequired,minWidth:p.a.string.isRequired},Oc.defaultProps={gap:"20px",minWidth:"100px"};var Ic=!1,Pc=!1,Lc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceId=null,this.internalMonitor=t.getMonitor()}var t,n,r;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){Object(tl.a)(!Ic,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Ic=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Ic=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;Object(tl.a)(!Pc,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Pc=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Pc=!1}}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"isDraggingSource",value:function(e){return this.internalMonitor.isDraggingSource(e)}},{key:"isOverTarget",value:function(e,t){return this.internalMonitor.isOverTarget(e,t)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(e){return this.internalMonitor.subscribeToOffsetChange(e)}},{key:"canDragSource",value:function(e){return this.internalMonitor.canDragSource(e)}},{key:"canDropOnTarget",value:function(e){return this.internalMonitor.canDropOnTarget(e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}])&&Ac(t.prototype,n),r&&Ac(t,r),e}();function kc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Rc,Dc=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks=pl({dragSource:function(e,t){n.clearDragSource(),n.dragSourceOptions=t||null,ml(e)?n.dragSourceRef=e:n.dragSourceNode=e,n.reconnectDragSource()},dragPreview:function(e,t){n.clearDragPreview(),n.dragPreviewOptions=t||null,ml(e)?n.dragPreviewRef=e:n.dragPreviewNode=e,n.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=t}var t,n,r;return t=e,(n=[{key:"receiveHandlerId",value:function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();t&&this.disconnectDragSource(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)):this.lastConnectedDragSource=e)}},{key:"reconnectDragPreview",value:function(){var e=this.dragPreview,t=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();this.handlerId?this.dragPreview&&t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=e,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.disconnectDragPreview(),this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,e,this.dragPreviewOptions)):this.disconnectDragPreview()}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!rl(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!rl(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}}])&&kc(t.prototype,n),r&&kc(t,r),e}();function jc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Nc(e){return(Nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Uc(e){var t=Object(u.useRef)(e);t.current=e,Object(tl.a)(null!=e.item,"item must be defined"),Object(tl.a)(null!=e.item.type,"item type must be defined");var n,r=Fc((n=cl(),[Object(u.useMemo)((function(){return new Lc(n)}),[n]),Object(u.useMemo)((function(){return new Dc(n.getBackend())}),[n])]),2),i=r[0],o=r[1];!function(e,t,n){var r=cl(),i=Object(u.useMemo)((function(){return{beginDrag:function(){var n=e.current,r=n.begin,i=n.item;if(r){var o=r(t);return Object(tl.a)(null==o||"object"===Nc(o),"dragSpec.begin() must either return an object, undefined, or null"),o||i||{}}return i||{}},canDrag:function(){return"boolean"==typeof e.current.canDrag?e.current.canDrag:"function"!=typeof e.current.canDrag||e.current.canDrag(t)},isDragging:function(n,r){var i=e.current.isDragging;return i?i(t):r===n.getSourceId()},endDrag:function(){var r=e.current.end;r&&r(t.getItem(),t),n.reconnect()}}}),[]);nl((function(){var o=jc(function(e,t,n){var r=n.getRegistry(),i=r.addSource(e,t);return[i,function(){return r.removeSource(i)}]}(e.current.item.type,i,r),2),a=o[0],s=o[1];return t.receiveHandlerId(a),n.receiveHandlerId(a),s}),[])}(t,i,o);var a=sl(i,t.current.collect||function(){return{}},(function(){return o.reconnect()})),s=Object(u.useMemo)((function(){return o.hooks.dragSource()}),[o]),l=Object(u.useMemo)((function(){return o.hooks.dragPreview()}),[o]);return nl((function(){o.dragSourceOptions=t.current.options||null,o.reconnect()}),[o]),nl((function(){o.dragPreviewOptions=t.current.previewOptions||null,o.reconnect()}),[o]),[a,s,l]}function Bc(){return Rc||((Rc=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),Rc}const zc=_.e.div.withConfig({displayName:"AssetTooltip__TooltipContainer",componentId:"sc-1aurb1j-0"})(["display:flex;width:600px;padding:12px 0;"]),Vc=_.e.div.withConfig({displayName:"AssetTooltip__TooltipThumbnailContainer",componentId:"sc-1aurb1j-1"})(["display:flex;justify-content:center;align-items:center;width:200px;height:200px;"]),Gc=_.e.div.withConfig({displayName:"AssetTooltip__TooltipContent",componentId:"sc-1aurb1j-2"})(["display:flex;flex:1;flex-direction:column;margin-left:16px;div{margin-top:8px;}"]);function Hc({item:e}){let t;if(e.thumbnailUrl)t=h.a.createElement("img",{src:e.thumbnailUrl});else if(e.videoUrl)t=h.a.createElement("video",{src:e.videoUrl,autoPlay:!0,muted:!0});else if(e.iconComponent){const n=e.iconComponent;t=h.a.createElement(n,{size:100})}else t=h.a.createElement("img",{src:e.src});return h.a.createElement(zc,null,h.a.createElement(Vc,null,t),h.a.createElement(Gc,null,h.a.createElement("b",null,e.label),e.attributions&&e.attributions.creator&&h.a.createElement("div",null,"by ",e.attributions.creator.name),e.description&&h.a.createElement("div",null,e.description)))}Hc.propTypes={item:p.a.object};const Wc=h.a.createContext({enabled:!1}),qc=Wc.Provider,Jc=Object(u.createContext)(new Audio);function Yc({src:e,children:t}){const n=Object(u.useContext)(Jc),[r,i]=ye();return Object(u.useEffect)(()=>{i?(n.src=e,n.play()):n.pause()},[i,e,n]),h.a.createElement("div",{ref:r},t)}Yc.propTypes={src:p.a.string,children:p.a.node};const Xc=Object(_.e)(xe).withConfig({displayName:"AssetGrid__AssetGridTooltipContainer",componentId:"sc-1dbgerb-0"})(["max-width:initial;text-align:left;"]);function Kc({item:e}){return{item:e}}function Zc(e){let{contextMenuId:t,tooltipComponent:n,disableTooltip:r,item:i,onClick:o}=e,a=K()(e,["contextMenuId","tooltipComponent","disableTooltip","item","onClick"]);const l=Object(u.useCallback)(e=>{o&&o(i,e)},[i,o]);let c;c=i.thumbnailUrl?h.a.createElement(Cc,s()({src:i.thumbnailUrl,onClick:l,label:i.label},a)):i.videoUrl?h.a.createElement(Mc,s()({src:i.videoUrl,onClick:l,label:i.label},a)):i.iconComponent?h.a.createElement($c,s()({iconComponent:i.iconComponent,onClick:l,label:i.label},a)):h.a.createElement(Cc,s()({onClick:l,label:i.label},a)),i.type===El.Audio&&(c=h.a.createElement(Yc,{src:i.url},c));const[d,p,f]=Uc({item:{type:i.type},begin:()=>({type:i.type,multiple:!1,value:i})}),m=Object(u.useCallback)(()=>{const e=n;return h.a.createElement(Xc,null,h.a.createElement(e,{item:i}))},[i,n]);return Object(u.useEffect)(()=>{f(Bc(),{captureDraggingState:!0})},[f]),h.a.createElement("div",{ref:p},h.a.createElement(Z.b,{id:t,item:i,collect:Kc,holdToDisplay:-1},h.a.createElement(be,{renderContent:m,disabled:r},c)))}const Qc=_.e.div.withConfig({displayName:"AssetGrid__LoadingItem",componentId:"sc-1dbgerb-1"})(["display:flex;flex-direction:column;height:100px;border-radius:6px;background-color:rgba(128,128,128,0.5);border:2px solid transparent;overflow:hidden;justify-content:center;align-items:center;user-select:none;"]);Zc.propTypes={tooltipComponent:p.a.func,disableTooltip:p.a.bool,contextMenuId:p.a.string,onClick:p.a.func,item:p.a.shape({id:p.a.any.isRequired,type:p.a.string.isRequired,label:p.a.string,thumbnailUrl:p.a.string,videoUrl:p.a.string,iconComponent:p.a.object,url:p.a.string}).isRequired};let eu=0;const tu=Object(u.memo)(Zc);function nu({isLoading:e,selectedItems:t,items:n,onSelect:r,onLoadMore:i,hasMore:o,tooltip:a,source:s}){const l=Object(u.useContext)(Zs),c=Object(u.useContext)(Wc),d=Object(u.useRef)("AssetGrid"+eu);Object(u.useEffect)(()=>{eu++},[]);const p=Object(u.useCallback)((e,t)=>{const n=t.item,r=new n.nodeClass(l);n.initialProps&&Object.assign(r,n.initialProps),l.getSpawnPosition(r.position),l.addObject(r)},[l]),f=Object(u.useCallback)((e,t)=>{const n=t.item,r=new n.nodeClass(l);n.initialProps&&Object.assign(r,n.initialProps),l.addObject(r)},[l]),m=Object(u.useCallback)((e,t)=>{navigator.clipboard&&navigator.clipboard.writeText(t.item.url)},[]),g=Object(u.useCallback)((e,t)=>{window.open(t.item.url)},[]),v=Object(u.useCallback)((e,t)=>{s.delete(t.item)},[s]);return h.a.createElement(h.a.Fragment,null,h.a.createElement(Ys.c,{flex:!0},h.a.createElement(yc.a,{pageStart:0,loadMore:i,hasMore:o,threshold:100,useWindow:!1},h.a.createElement(Oc,null,Object(ar.h)(n,"id").map(e=>h.a.createElement(tu,{key:e.id,tooltipComponent:a,disableTooltip:c.enabled,contextMenuId:d.current,item:e,selected:-1!==t.indexOf(e),onClick:r})),e&&h.a.createElement(Qc,null,"Loading...")))),h.a.createElement(Z.a,{id:d.current},h.a.createElement(Z.c,{onClick:p},"Place Object"),h.a.createElement(Z.c,{onClick:f},"Place Object at Origin"),!s.disableUrl&&h.a.createElement(Z.c,{onClick:m},"Copy URL"),!s.disableUrl&&h.a.createElement(Z.c,{onClick:g},"Open URL in New Tab"),s.delete&&h.a.createElement(Z.c,{onClick:v},"Delete Asset")))}nu.propTypes={source:p.a.object,tooltip:p.a.func,isLoading:p.a.bool,onSelect:p.a.func,onLoadMore:p.a.func.isRequired,hasMore:p.a.bool,selectedItems:p.a.arrayOf(p.a.shape({id:p.a.any.isRequired,label:p.a.string,thumbnailUrl:p.a.string})).isRequired,items:p.a.arrayOf(p.a.shape({id:p.a.any.isRequired,label:p.a.string,thumbnailUrl:p.a.string})).isRequired},nu.defaultProps={onSelect:()=>{},items:[],selectedItems:[],tooltip:Hc};var ru=n(356);function iu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ou(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iu(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function au({editor:e,source:t,searchPlaceholder:n,initialSearchParams:r,multiselectTags:i,savedState:o,setSavedState:a}){const{params:s,setParams:l,isLoading:c,loadMore:d,hasMore:p,results:f}=Js(t,o.searchParams||r),m=Object(u.useCallback)(n=>{const{nodeClass:r,initialProps:i}=n,o=new r(e);i&&Object.assign(o,i);const a=n.transformPivot||t.transformPivot;a&&e.spokeControls.setTransformPivot(a),e.spawnGrabbedObject(o)},[e,t.transformPivot]),g=Nl({source:t}),v=Object(u.useCallback)(()=>{d(s)},[s,d]),y=Object(u.useCallback)(e=>{const t=ou(ou({},s),{},{query:e.target.value});l(t),a(ou(ou({},o),{},{searchParams:t}))},[s,l,o,a]),_=Object(u.useCallback)(e=>{const t=ou(ou({},s),{},{tags:e});l(t),a(ou(ou({},o),{},{searchParams:t}))},[s,l,a,o]),b=Object(u.useCallback)(e=>a(ou(ou({},o),{},{expandedTags:e})),[o,a]);return h.a.createElement(h.a.Fragment,null,h.a.createElement(ql,{title:t.name},h.a.createElement(tc,{placeholder:n,value:s.query,onChange:y,legal:t.searchLegalCopy,privacyPolicyUrl:t.privacyPolicyUrl}),t.upload&&h.a.createElement(ru.a,{accept:t.acceptFileTypes||"all",multiple:t.uploadMultiple||!1,onChange:g})),h.a.createElement(Yl,null,t.tags&&h.a.createElement(gc,{multiselect:i,tags:t.tags,selectedTags:s.tags,onChange:_,initialExpandedTags:o.expandedTags,onChangeExpandedTags:b}),h.a.createElement(nu,{source:t,items:f,onLoadMore:v,hasMore:p,onSelect:m,isLoading:c})))}function su(e){return h.a.createElement(au,s()({},e,{multiselectTags:!0,searchPlaceholder:e.source.searchPlaceholder||"Search pieces..."}))}au.propTypes={searchPlaceholder:p.a.string,initialSearchParams:p.a.object,editor:p.a.object,source:p.a.object,multiselectTags:p.a.bool,savedState:p.a.object,setSavedState:p.a.func.isRequired},au.defaultProps={searchPlaceholder:"Search...",initialSearchParams:{query:"",tags:[]},multiselectTags:!1},su.propTypes={source:p.a.object};const lu={[El.Audio]:js,[El.Image]:Ls,[El.Video]:$s,[El.Model]:_s};class cu extends Hs{constructor(e,t,n){super(),this.editor=e,this.id=n,this.name=t,this.manifestUrl=Object(Gs.b)(new URL(n,window.location).href),this.component=su,this.assets=[],this.tags=[],this.loaded=!1,this.searchDebounceTimeout=0}async load(){const e=await this.editor.api.fetch(this.manifestUrl),t=await e.json();t.searchPlaceholder&&(this.searchPlaceholder=t.searchPlaceholder);for(const e of t.assets){const t=Object(Gs.b)(new URL(e.url,this.manifestUrl).href),n=lu[e.type],r=this.editor.nodeEditors.get(n);this.assets.push({id:e.id,label:e.label,url:t,tags:e.tags||[],type:e.type,iconComponent:r.iconComponent,nodeClass:n,initialProps:{name:e.label,src:t}})}this.tags=t.tags;this.fuse=new Vs.a(this.assets,{shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["label","tags"]}),this.loaded=!0}async search(e,t,n){this.loaded||await this.load();let r=this.assets;return e.tags&&e.tags.length>0&&(r=r.filter(t=>function(e,t){for(const{value:n}of t)if(-1===e.tags.indexOf(n))return!1;return!0}(t,e.tags))),e.query&&(r=this.fuse.search(e.query)),{results:r,hasMore:!1}}}const uu=new Mr.db,hu=new Mr.db,du=new Mr.db,pu=new Mr.db,fu=new Mr.db,mu=new Mr.Bb,gu=new Mr.Bb,vu=new Mr.ec,yu={World:"World",Local:"Local",LocalSelection:"LocalSelection"};let _u,bu;const xu=new Promise((e,t)=>{_u=e,bu=t}),Su=[];class wu extends br.a{constructor(e,t={}){super(),c()(this,"update",()=>{if(!this.disableUpdate){const e=this.clock.getDelta(),t=this.clock.getElapsedTime();this.scene.updateMatrixWorld(),this.inputManager.update(e,t);const n=this.renderer.renderMode.enableShadows;this.scene.traverse(r=>{n&&r.isDirectionalLight&&function(e,t){Go.makeEmpty(),Vo.makeEmpty(),t.traverse(e=>{const t=e.geometry;t&&e.castShadow&&(t.boundingBox||t.computeBoundingBox(),Wo.copy(t.boundingBox),Wo.applyMatrix4(e.matrixWorld),Vo.union(Wo))});const n=Vo.min,r=Vo.max;qo[0].set(n.x,n.y,n.z),qo[1].set(n.x,n.y,r.z),qo[2].set(n.x,r.y,n.z),qo[3].set(n.x,r.y,r.z),qo[4].set(r.x,n.y,n.z),qo[5].set(r.x,n.y,r.z),qo[6].set(r.x,r.y,n.z),qo[7].set(r.x,r.y,r.z),Ho.getInverse(e.shadow.camera.matrixWorld);for(let e=0;e<qo.length;e++)qo[e].applyMatrix4(Ho),Go.expandByPoint(qo[e]);const i=e.shadow.camera;i.left=Go.min.x-1,i.right=Go.max.x+1,i.bottom=Go.min.y-1,i.top=Go.max.y+1,i.near=Go.min.z+-500,i.far=Go.max.z+500,i.updateProjectionMatrix()}(r,this.scene),r.isNode&&r.onUpdate(e,t)}),this.flyControls.update(e),this.spokeControls.update(e),this.renderer.update(e,t),this.inputManager.reset()}this.rafId=requestAnimationFrame(this.update)}),c()(this,"onResize",()=>{this.inputManager.onResize(),this.renderer.onResize(),this.emit("resize")}),c()(this,"onCopy",e=>{Jo()||(e.preventDefault(),this.selected.length>0&&e.clipboardData.setData("application/vnd.spoke.nodes",JSON.stringify({nodeUUIDs:this.selected.map(e=>e.uuid)})))}),c()(this,"onPaste",e=>{if(Jo())return;let t;if(e.preventDefault(),""!==(t=e.clipboardData.getData("application/vnd.spoke.nodes"))){const{nodeUUIDs:e}=JSON.parse(t);if(!Array.isArray(e))return;const n=e.map(e=>this.scene.getObjectByUUID(e)).filter(e=>void 0!==e);this.duplicateMultiple(n)}else if(""!==(t=e.clipboardData.getData("text")))try{const e=new URL(t);this.addMedia(e.href).catch(e=>this.emit("error",e))}catch(e){console.warn("Clipboard contents did not contain a valid url")}}),this.api=e,this.settings=t,this.project=null,this.selected=[],this.selectedTransformRoots=[],this.history=new Ar,this.renderer=null,this.inputManager=null,this.spokeControls=null,this.flyControls=null,this.playModeControls=null,this.nodeTypes=new Set,this.nodeEditors=new Map,this.sources=[],this.defaultUploadSource=null,this.textureCache=new Do,this.gltfCache=new Ro,this.scene=new lo(this),this.sceneModified=!1,this.projectLoaded=!1,this.camera=new Mr.tb(80,window.innerWidth/window.innerHeight,.2,8e3),this.audioListener=new Mr.f,this.camera.add(this.audioListener),this.camera.layers.enable(1),this.camera.name="Camera",this.helperScene=new Mr.Nb,this.grid=new Lo,this.helperScene.add(this.grid),this.nodes=[this.scene],this.raycaster=new Mr.Lb,this.centerScreenSpace=new Mr.dc,this.clock=new Mr.p,this.disableUpdate=!1,this.initializing=!1,this.initialized=!1,this.sceneLoading=!1}registerNode(e,t){this.nodeTypes.add(e),this.nodeEditors.set(e,t)}getNodeEditor(e){return this.nodeEditors.get(e.constructor)}registerSource(e){this.sources.push(e),e.uploadSource&&!this.defaultUploadSource&&(this.defaultUploadSource=e)}async installAssetSource(e){const t=this.api.proxyUrl(new URL(e,window.location).href),n=await this.api.fetch(t),r=await n.json();this.sources.push(new cu(this,r.name,e)),this.emit("settingsChanged")}getSource(e){return this.sources.find(t=>t.id===e)}setSource(e){this.emit("setSource",e)}emit(e,...t){this.sceneLoading||super.emit(e,...t)}async init(){if(this.initialized)return;if(this.initializing)return new Promise((e,t)=>{let n=null;const r=()=>{e(),n()},i=e=>{t(e),n()};n=()=>{this.removeListener("initialized",r),this.removeListener("error",i)},this.addListener("initialized",r),this.addListener("error",i)});this.initializing=!0;const e=[xu,Object(Fo.b)(),Ri.load(),Bi.load(),Io.load()];for(const t of this.nodeTypes)e.push(t.load());await Promise.all(e),this.inputManager=new ma(this.renderer.canvas),this.flyControls=new Ta(this.camera,this.inputManager),this.spokeControls=new ku(this.camera,this,this.inputManager,this.flyControls),this.playModeControls=new Ma(this.inputManager,this.spokeControls,this.flyControls),this.spokeControls.enable(),window.addEventListener("copy",this.onCopy),window.addEventListener("paste",this.onPaste),this.rafId=requestAnimationFrame(this.update),this.initialized=!0,this.emit("initialized")}onEmitSceneModified(){this.sceneModified=!0,this.emit("sceneModified")}initializeRenderer(e){try{this.renderer=new bi(this,e),this.thumbnailRenderer=new xi.a,_u()}catch(e){bu(e)}}clearCaches(){this.textureCache.disposeAndClear(),this.gltfCache.disposeAndClear()}async loadProject(e){this.removeListener("objectsChanged",this.onEmitSceneModified),this.removeListener("sceneGraphChanged",this.onEmitSceneModified),this.clearCaches(),this.removeObject(this.scene),this.sceneLoading=!0,this.disableUpdate=!0;const[t,n]=await lo.loadProject(this,e);if(this.sceneLoading=!1,this.disableUpdate=!1,this.scene=t,this.camera.position.set(0,5,10),this.camera.lookAt(new Mr.ec),this.scene.add(this.camera),this.spokeControls.center.set(0,0,0),this.spokeControls.onSceneSet(t),this.renderer.onSceneSet(),this.addObject(this.scene),this.deselectAll(),this.history.clear(),this.sceneModified=!1,this.scene.traverse(e=>{e.isNode&&e.onRendererChanged()}),0===n.length&&this.emit("projectLoaded"),this.emit("sceneGraphChanged"),this.addListener("objectsChanged",this.onEmitSceneModified),this.addListener("sceneGraphChanged",this.onEmitSceneModified),n.length>0){const e=new Qi.a("Errors loading project",n);throw this.emit("error",e),e}return t}async exportScene(e,t={}){const{combineMeshes:n,removeUnusedObjects:r}=Object.assign({},wu.DefaultExportOptions,t),i=this.scene,o=i.findNodeByType(Co);o&&await o.generate(e);const a=Li(i,!0),s=a.getAnimationClips();for(const e of s)for(const t of e.tracks){const{nodeName:e}=Mr.Ab.parseTrackName(t.name);if(!a.getObjectByProperty("uuid",e)){i.getObjectByProperty("uuid",e)?console.log(`Couldn't find object with uuid: "${e}" in cloned scene but was found in original scene!`):console.log(`Couldn't find object with uuid: "${e}" in cloned or original scene!`)}}const l={animations:s};a.prepareForExport(l),n&&await a.combineMeshes(),r&&a.removeUnusedObjects();const c=this.camera.clone();c.name="scene-preview-camera",c.userData.gltfExtensions={MOZ_hubs_components:{"scene-preview-camera":{}}},a.add(c);const u=new $r.a({mode:"glb",onlyVisible:!1,includeCustomExtensions:!0,animations:s});let h;try{h=await u.exportChunks(a)}catch(e){throw new Qi.b("Error exporting scene",e)}const d=h.json,p=d.nodes;if(p){const e={};for(let t=0;t<p.length;t++){const n=p[t];n.extras&&n.extras.MOZ_spoke_uuid&&(e[n.extras.MOZ_spoke_uuid]=t,delete n.extras.MOZ_spoke_uuid,zo(n.extras)&&delete n.extras)}for(const t of p)if(t.extensions&&t.extensions.MOZ_hubs_components){const n=t.extensions.MOZ_hubs_components;for(const t in n){if(!Object.prototype.hasOwnProperty.call(n,t))continue;const r=n[t];for(const t in r){if(!Object.prototype.hasOwnProperty.call(r,t))continue;const n=r[t];null!==n&&"object"==typeof n&&Object.prototype.hasOwnProperty.call(n,"__gltfIndexForUUID")&&(r[t]=e[n.__gltfIndexForUUID])}}}}d.extensions||(d.extensions={}),d.extensions.MOZ_hubs_components={version:4},d.asset.generator="Mozilla Spoke dev";try{const e=await u.exportGLBBlob(h);let n;return t.scores&&(n=function(e,t,n){const r=n.json;let i=0;Object(Yo.g)(r,r.scene,e=>{if(!Ko(Object(Yo.c)(e)))return!1;if(void 0!==e.mesh){const t=r.meshes[e.mesh];if(t)for(const e of t.primitives){let t=0;if(void 0!==e.indices){const n=r.accessors[e.indices];t=n&&n.count||0}else if(void 0!==e.attributes.POSITION){const n=r.accessors[e.attributes.POSITION];t=n&&n.count||0}switch(e.mode){case 4:i+=Math.round(t/3);break;case 5:case 6:i+=t>2?t-2:0}}}});let o=0;Object(Yo.f)(r,r.scene,e=>{const t=Object(Yo.c)(e);Ko(t)&&function(e){return e&&(e["directional-light"]||e["point-light"]||e["spot-light"])}(t)&&o++});let a=0,s=0;for(const{width:e,height:t}of n.images)a+=Xo(e,t),Zo(e,t)&&s++;let l=r.materials?r.materials.length:0;const c=t.size,u=new Set,h=new Set,d=[];e.traverse(e=>{if(e.isNode&&e.visible){const t=e.getRuntimeResourcesForStats();if(!t)return;t.lights&&(o+=t.lights.filter(e=>e instanceof Mr.wb||e instanceof Mr.v||e instanceof Mr.Ub).length),t.materials&&t.materials.forEach(e=>u.add(e)),t.textures&&t.textures.forEach(e=>h.add(e)),t.meshes&&d.push(...t.meshes)}}),l+=u.size;for(const e of h)a+=ea(e),Qo(e)&&s++;for(const e of d)i+=ia(e);let p,f,m,g,v;return p=i<=5e4?"Low":i<=75e3?"Medium":"High",f=o<=3?"Low":o<=6?"Medium":"High",m=a<=268435500?"Low":a<=536870900?"Medium":"High",g=l<=25?"Low":l<=50?"Medium":"High",v=c<16777220?"Low":c<52428800?"Medium":"High",{polygons:{value:i,score:p},textures:{value:a,score:m,largeTexturesValue:s,largeTexturesScore:s>0?"High":"Low"},lights:{value:o,score:f},materials:{value:l,score:g},fileSize:{value:c,score:v}}}(i,e,h)),{glbBlob:e,chunks:h,scores:n}}catch(e){throw new Qi.b("Error creating glb blob",e)}}getSpawnPosition(e){return this.getScreenSpaceSpawnPosition(this.centerScreenSpace,e)}getCursorSpawnPosition(e,t){const n=this.renderer.canvas.getBoundingClientRect(),r=new Mr.dc;return r.x=(e.x-n.left)/n.width*2-1,r.y=(e.y-n.top)/n.height*-2+1,this.getScreenSpaceSpawnPosition(r,t)}getScreenSpaceSpawnPosition(e,t){this.raycaster.setFromCamera(e,this.camera);const n=Cr(this.raycaster.intersectObject(this.scene,!0),this.scene);if(n&&n.distance<1e3?t.copy(n.point):this.raycaster.ray.at(20,t),this.spokeControls.shouldSnap()){const e=this.spokeControls.translationSnap;t.set(Math.round(t.x/e)*e,Math.round(t.y/e)*e,Math.round(t.z/e)*e)}}reparentToSceneAtCursorPosition(e,t){const n=new Mr.ec;this.getCursorSpawnPosition(t,n),this.history.execute(new fs(this,e,this.scene,void 0,n))}async takeScreenshot(e,t){return this.renderer.takeScreenshot(e,t)}async generateFileThumbnail(e,t,n){const r=URL.createObjectURL(e);let i;if(e.name.toLowerCase().endsWith(".glb")){const{scene:e}=await new Or.b(r).loadGLTF();i=await this.thumbnailRenderer.generateThumbnail(e,t,n)}else[".png",".jpg",".jpeg",".gif",".webp"].some(t=>e.name.toLowerCase().endsWith(t))?i=await Object(li.a)(e):e.name.toLowerCase().endsWith(".mp4")&&(i=await Object(li.b)(e));if(URL.revokeObjectURL(r),!i)throw new Error(`Unsupported file type for file: "${e.name}". File must be an image, video, or glb model.`);return i}enterPlayMode(){this.playing=!0,this.deselectAll(),this.camera.layers.disable(1),this.playModeControls.enable(),this.scene.traverse(e=>{e.isNode&&e.onPlay()}),this.emit("playModeChanged")}leavePlayMode(){this.playing=!1,this.camera.layers.enable(1),this.playModeControls.disable(),this.scene.traverse(e=>{e.isNode&&e.onPause()}),this.emit("playModeChanged")}revert(e){this.history.revert(e)}undo(){this.history.undo()}redo(){this.history.redo()}select(e,t=!0,n=!0,r=!0){return-1!==this.selected.indexOf(e)?this.selected:(n&&this.emit("beforeSelectionChanged"),t?this.history.execute(new Za(this,e)):(this.selected.push(e),e.isNode&&e.onSelect(),r&&this.updateTransformRoots(),n&&this.emit("selectionChanged"),this.selected))}selectMultiple(e,t=!0,n=!0,r=!0){let i=!1;for(let t=0;t<e.length;t++)if(-1===this.selected.indexOf(e[t])){i=!0;break}if(!i)return this.selected;if(n&&this.emit("beforeSelectionChanged"),t)return this.history.execute(new Qa(this,e));for(let t=0;t<e.length;t++)this.select(e[t],!1,!1,!1);return n&&this.emit("selectionChanged"),r&&this.updateTransformRoots(),this.selected}selectAll(e=!0,t=!0,n=!0){return this.setSelection(this.nodes,e,t,n)}deselect(e,t=!0,n=!0,r=!0){const i=this.selected.indexOf(e);return-1===i?this.selected:(n&&this.emit("beforeSelectionChanged"),t?this.history.execute(new Da(this,e)):(this.selected.splice(i,1),e.isNode&&e.onDeselect(),n&&this.emit("selectionChanged"),r&&this.updateTransformRoots(),this.selected))}deselectMultiple(e,t=!0,n=!0,r=!0){let i=!1;for(let t=0;t<e.length;t++)if(-1!==this.selected.indexOf(e[t])){i=!0;break}if(!i)return this.selected;if(n&&this.emit("beforeSelectionChanged"),t)return this.history.execute(new ja(this,e));for(let t=0;t<e.length;t++)this.deselect(e[t],!1,!1,!1);return n&&this.emit("selectionChanged"),r&&this.updateTransformRoots(),this.selected}deselectAll(e=!0,t=!0,n=!0){return this.setSelection([],e,t,n)}toggleSelection(e,t=!0,n=!0,r=!0){return-1!==this.selected.indexOf(e)?this.deselect(e,t,n,r):this.select(e,t,n,r)}setSelection(e,t=!0,n=!0,r=!0){if(e.length===this.selected.length){let t=!0;for(let n=0;n<e.length;n++)if(this.selected[n]!==e[n]){t=!1;break}if(t)return this.selected}if(n&&this.emit("beforeSelectionChanged"),t)return this.history.execute(new us(this,e));const i=this.selected.slice(0);for(let t=this.selected.length-1;t>=0;t--){const t=this.selected.pop();t.isNode&&-1===e.indexOf(t)&&t.onDeselect()}for(let t=0;t<e.length;t++){const n=e[t];this.selected.push(n),n.isNode&&-1===i.indexOf(n)&&n.onSelect()}return n&&this.emit("selectionChanged"),r&&this.updateTransformRoots(),this.selected}addObject(e,t,n,r=!0,i=!0,o=!0,a=!1){if(i&&o&&this.emit("beforeSelectionChanged"),r)return this.history.execute(new Ra(this,e,t,n));if(e.saveParent=!0,void 0!==t)if(void 0!==n){const r=t.children.indexOf(n);if(-1===r)throw new Error("addObject: before object not found");t.children.splice(r,0,e),e.parent=t}else t.add(e);else e!==this.scene&&this.scene.add(e);return e.traverse(e=>{e.isNode&&(a&&Bo(this.scene,e),e.onAdd(),this.nodes.push(e))}),e.updateMatrixWorld(!0),o&&this.setSelection([e],!1,!1),i&&(o&&this.emit("selectionChanged"),this.emit("sceneGraphChanged")),e}addMultipleObjects(e,t,n,r=!0,i=!0,o=!0,a=!1){if(o&&i&&this.emit("beforeSelectionChanged"),r)return this.history.execute(new ka(this,e,t,n));const s=No(e);for(let e=0;e<s.length;e++)this.addObject(s[e],t,n,!1,!1,!1,a);return o&&this.setSelection(e,!1,!1),i&&(o&&this.emit("selectionChanged"),this.emit("sceneGraphChanged")),s}_addMultipleObjectsWithParentsAndBefores(e,t,n,r,i=!0){const o=No(e);for(let r=o.length-1;r>=0;r--){const i=o[r],a=e.indexOf(i);this.addObject(i,t[a],n[a],!1,!1,!1)}this.nodes.length=0;for(let e=0;e<r.length;e++)this.nodes.push(r[e]);i&&this.emit("sceneGraphChanged")}removeObject(e,t=!0,n=!0,r=!0){return null===e.parent?null:t?this.history.execute(new Ba(this,e)):(e.traverse(e=>{if(e.isNode){e.onRemove();const t=this.nodes.indexOf(e);if(-1===t)throw new Error("removeObject: node not found. This is due to removing a node that is no longer in the scene.");this.nodes.splice(t,1)}}),e.parent.remove(e),r&&this.deselect(e,!1,n),n&&this.emit("sceneGraphChanged"),e)}removeMultipleObjects(e,t=!0,n=!0,r=!0){if(this.getRootObjects(e,Su),t)return this.history.execute(new Ua(this,Su));for(let e=0;e<Su.length;e++)this.removeObject(Su[e],!1,!1,!1);return r&&this.deselectMultiple(e,!1,n),n&&this.emit("sceneGraphChanged"),Su}removeSelectedObjects(e=!0,t=!0,n=!0){return this.removeMultipleObjects(this.selected,e,t,n)}duplicate(e,t,n,r=!0,i=!0,o=!0){if(i&&o&&this.emit("beforeSelectionChanged"),r)return this.history.execute(new Na(this,e,t,n));if(!e.constructor.canAddNode(this))return;const a=e.clone();return a.traverse(e=>{e.isNode&&Bo(this.scene,e)}),this.addObject(a,t||e.parent,n,!1,!1,!1),o&&this.setSelection([a],!1,!1,!1),this.updateTransformRoots(),i&&(o&&this.emit("selectionChanged"),this.emit("sceneGraphChanged")),a}duplicateMultiple(e,t,n,r=!0,i=!0,o=!0){if(i&&o&&this.emit("beforeSelectionChanged"),r)return this.history.execute(new Fa(this,e,t,n,o));const a=No(e.filter(e=>e.constructor.canAddNode(this))),s=a.map(e=>e.clone());if(t)this.addMultipleObjects(s,t,n,!1,!1,!1,!0);else for(let e=0;e<a.length;e++)this.addObject(s[e],a[e].parent,void 0,!1,!1,!1,!0);return o&&this.setSelection(s,!1,!1,!1),this.updateTransformRoots(),i&&(o&&this.emit("selectionChanged"),this.emit("sceneGraphChanged")),s}duplicateSelected(e,t,n=!0,r=!0,i=!0){this.duplicateMultiple(this.selected,e,t,n,r,i)}reparent(e,t,n,r=!0,i=!0,o=!0){if(!e.parent)throw new Error(`${e.nodeName||e.type} "${e.name}" has no parent. Reparent only works on objects that are currently in the scene.`);if(!t)throw new Error("editor.reparent: newParent is undefined");if(i&&o&&this.emit("beforeSelectionChanged"),r)return this.history.execute(new za(this,e,t,n));t!==e.parent&&(t.updateMatrixWorld(),uu.getInverse(t.matrixWorld),e.parent.updateMatrixWorld(),uu.multiply(e.parent.matrixWorld),e.applyMatrix(uu),e.updateWorldMatrix(!1,!1));const a=e.parent.children.indexOf(e);if(e.parent.children.splice(a,1),n){const r=t.children.indexOf(n);t.children.splice(r,0,e)}else t.children.push(e);return e.parent=t,e.updateMatrixWorld(!0),o&&this.setSelection([e],!1,!1,!1),this.updateTransformRoots(),i&&(o&&this.emit("selectionChanged"),this.emit("sceneGraphChanged")),e}reparentMultiple(e,t,n,r=!0,i=!0,o=!0){if(i&&o&&this.emit("beforeSelectionChanged"),r)return this.history.execute(new Ga(this,e,t,n));for(let r=0;r<e.length;r++)this.reparent(e[r],t,n,!1,!1,!1);return o&&this.setSelection(e,!1,!1,!1),this.updateTransformRoots(),i&&(o&&this.emit("selectionChanged"),this.emit("sceneGraphChanged")),e}reparentSelected(e,t,n=!0,r=!0,i=!0){return this.reparentMultiple(this.selected,e,t,n,r,i)}groupMultiple(e,t,n,r=!0,i=!0,o=!0){if(i&&o&&this.emit("beforeSelectionChanged"),r)return this.history.execute(new ps(this,e,t,n));const a=this.addObject(new Ki(this),t,n,!1,!1,!1);for(let t=0;t<e.length;t++)this.reparent(e[t],a,void 0,!1,!1,!1);return o&&this.setSelection([a],!1,!1,!1),this.updateTransformRoots(),i&&(o&&this.emit("selectionChanged"),this.emit("sceneGraphChanged")),a}groupSelected(e,t,n=!0,r=!0,i=!0){return this.groupMultiple(this.selectedTransformRoots,e,t,n,r,i)}setPosition(e,t,n=yu.Local,r=!0,i=!0){if(r)return this.history.execute(new es(this,e,t,n));if(n===yu.Local)e.position.copy(t);else{let r;if(e.updateMatrixWorld(),vu.copy(t),n===yu.World)r=e.parent.matrixWorld;else if(n===yu.LocalSelection)if(this.selected.length>0){const e=this.selected[this.selected.length-1];e.updateMatrixWorld(),r=e.parent.matrixWorld}else r=uu.identity();else r=n;uu.getInverse(r),vu.applyMatrix4(uu),e.position.copy(vu)}return e.updateMatrixWorld(!0),e.onChange("position"),i&&this.emit("objectsChanged",[e],"position"),e}setPositionMultiple(e,t,n=yu.Local,r=!0,i=!0){if(r)return this.history.execute(new ts(this,e,t,n));if(n===yu.LocalSelection)if(this.selected.length>0){const e=this.selected[this.selected.length-1];e.updateMatrixWorld(),n=e.parent.matrixWorld}else n=uu.identity();for(let r=0;r<e.length;r++)this.setPosition(e[r],t,n,!1,!1);return i&&this.emit("objectsChanged",e,"position"),e}setPositionSelected(e,t=yu.Local,n=!0,r=!0){return this.setPositionMultiple(this.selectedTransformRoots,e,t,n,r)}translate(e,t,n=yu.Local,r=!0,i=!0){if(r)return this.history.execute(new hs(this,e,t,n));if(n===yu.Local)e.position.add(t);else{let r;if(e.updateMatrixWorld(),vu.setFromMatrixPosition(e.matrixWorld),vu.add(t),n===yu.World)r=e.parent.matrixWorld;else if(n===yu.LocalSelection)if(this.selected.length>0){const e=this.selected[this.selected.length-1];e.updateMatrixWorld(),r=e.parent.matrixWorld}else r=uu.identity();else r=n;uu.getInverse(r),vu.applyMatrix4(uu),e.position.copy(vu)}return e.updateMatrixWorld(!0),e.onChange("position"),i&&this.emit("objectsChanged",[e],"position"),e}translateMultiple(e,t,n=yu.Local,r=!0,i=!0){if(r)return this.history.execute(new ds(this,e,t,n));if(n===yu.LocalSelection)if(this.selected.length>0){const e=this.selected[this.selected.length-1];e.updateMatrixWorld(),n=e.parent.matrixWorld}else n=uu.identity();for(let r=0;r<e.length;r++)this.translate(e[r],t,n,!1,!1);return i&&this.emit("objectsChanged",e,"position"),e}translateSelected(e,t=yu.Local,n=!0,r=!0){return this.translateMultiple(this.selectedTransformRoots,e,t,n,r)}setRotation(e,t,n=yu.Local,r=!0,i=!0){if(r)return this.history.execute(new as(this,e,t,n));if(n===yu.Local)e.rotation.copy(t);else{let r;if(e.updateMatrixWorld(),n===yu.World)r=e.parent.matrixWorld;else if(n===yu.LocalSelection)if(this.selected.length>0){const e=this.selected[this.selected.length-1];e.updateMatrixWorld(),r=e.parent.matrixWorld}else r=uu.identity();else r=n;const i=mu.setFromEuler(t),o=gu.setFromRotationMatrix(r).inverse().multiply(i);e.quaternion.copy(o)}return e.updateMatrixWorld(!0),e.onChange("rotation"),i&&this.emit("objectsChanged",[e],"rotation"),e}setRotationMultiple(e,t,n=yu.Local,r=!0,i=!0){if(r)return this.history.execute(new ss(this,e,t,n));if(n===yu.LocalSelection)if(this.selected.length>0){const e=this.selected[this.selected.length-1];e.updateMatrixWorld(),n=e.parent.matrixWorld}else n=uu.identity();for(let r=0;r<e.length;r++)this.setRotation(e[r],t,n,!1,!1);return i&&this.emit("objectsChanged",e,"rotation"),e}setRotationSelected(e,t=yu.Local,n=!0,r=!0){return this.setRotationMultiple(this.selectedTransformRoots,e,t,n,r)}rotateOnAxis(e,t,n,r=yu.Local,i=!0,o=!0){if(i)return this.history.execute(new Ja(this,e,t,n,r));if(r===yu.Local)e.rotateOnAxis(t,n);else if(r===yu.World)e.rotateOnWorldAxis(t,n);else{let i;if(e.updateMatrixWorld(),r===yu.LocalSelection)if(this.selected.length>0){const e=this.selected[this.selected.length-1];e.updateMatrixWorld(),r=e.parent.matrixWorld}else r=uu.identity();else i=r;uu.getInverse(i),vu.copy(t).applyMatrix4(uu),e.rotateOnAxis(vu,n)}return e.updateMatrixWorld(!0),e.onChange("position"),o&&this.emit("objectsChanged",[e],"position"),e}rotateOnAxisMultiple(e,t,n,r=yu.Local,i=!0,o=!0){if(i)return this.history.execute(new Ya(this,e,t,n,r));if(r===yu.LocalSelection)if(this.selected.length>0){const e=this.selected[this.selected.length-1];e.updateMatrixWorld(),r=e.parent.matrixWorld}else r=uu.identity();for(let i=0;i<e.length;i++)this.rotateOnAxis(e[i],t,n,r,!1,!1);return o&&this.emit("objectsChanged",e,"rotation"),e}rotateOnAxisSelected(e,t,n=yu.Local,r=!0,i=!0){return this.rotateOnAxisMultiple(this.selectedTransformRoots,e,t,n,r,i)}rotateAround(e,t,n,r,i=!0,o=!0){if(i)return this.history.execute(new Ha(this,e,t,n,r));e.updateMatrixWorld();const a=uu.copy(e.matrixWorld),s=hu.getInverse(e.parent.matrixWorld),l=du.makeTranslation(-t.x,-t.y,-t.z),c=pu.makeTranslation(t.x,t.y,t.z),u=fu.makeRotationAxis(n,r);return a.premultiply(l).premultiply(u).premultiply(c).premultiply(s).decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(),o&&this.emit("objectsChanged",[e],"matrix"),e}rotateAroundMultiple(e,t,n,r,i=!0,o=!0){if(i)return this.history.execute(new qa(this,e,t,n,r));for(let i=0;i<e.length;i++)this.rotateAround(e[i],t,n,r,!1,!1);return o&&this.emit("objectsChanged",e,"matrix"),e}rotateAroundSelected(e,t,n,r=!0,i=!0){return this.rotateAroundMultiple(this.selectedTransformRoots,e,t,n,r,i)}scale(e,t,n=yu.Local,r=!0,i=!0){return r?this.history.execute(new Xa(this,e,t,n)):(n!==yu.World||t.x===t.y&&t.x===t.z&&t.y===t.z||console.warn("Scaling an object in world space with a non-uniform scale is not supported"),e.scale.multiply(t),e.updateMatrixWorld(!0),e.onChange("scale"),i&&this.emit("objectsChanged",[e],"scale"),e)}scaleMultiple(e,t,n=yu.Local,r=!0,i=!0){if(r)return this.history.execute(new Ka(this,e,t,n));for(let r=0;r<e.length;r++)this.scale(e[r],t,n,!1,!1);return i&&this.emit("objectsChanged",e,"scale"),e}scaleSelected(e,t=yu.Local,n=!0,r=!0){return this.scaleMultiple(this.selectedTransformRoots,e,t,n,r)}setScale(e,t,n=yu.Local,r=!0,i=!0){if(r)return this.history.execute(new ls(this,e,t,n));if(n===yu.Local)vu.set(0===t.x?Number.EPSILON:t.x,0===t.y?Number.EPSILON:t.y,0===t.z?Number.EPSILON:t.z),e.scale.copy(vu);else{let r;if(e.updateMatrixWorld(),vu.copy(t),n===yu.World)r=e.parent.matrixWorld;else if(n===yu.LocalSelection)if(this.selected.length>0){const e=this.selected[this.selected.length-1];e.updateMatrixWorld(),r=e.parent.matrixWorld}else r=uu.identity();else r=n;uu.getInverse(r),vu.applyMatrix4(uu),vu.set(0===vu.x?Number.EPSILON:vu.x,0===vu.y?Number.EPSILON:vu.y,0===vu.z?Number.EPSILON:vu.z),e.scale.copy(vu)}return e.updateMatrixWorld(!0),e.onChange("scale"),i&&this.emit("objectsChanged",[e],"scale"),e}setScaleMultiple(e,t,n=yu.Local,r=!0,i=!0){if(r)return this.history.execute(new cs(this,e,t,n));if(n===yu.LocalSelection)if(this.selected.length>0){const e=this.selected[this.selected.length-1];e.updateMatrixWorld(),n=e.parent.matrixWorld}else n=uu.identity();for(let r=0;r<e.length;r++)this.setScale(e[r],t,n,!1,!1);return i&&this.emit("objectsChanged",e,"scale"),e}setScaleSelected(e,t=yu.Local,n=!0,r=!0){return this.setScaleMultiple(this.selectedTransformRoots,e,t,n,r)}setProperty(e,t,n,r=!0,i=!0,o=!1){return r?this.history.execute(new is(this,e,t,n,o)):(n&&n.copy&&!o?e[t].copy(n):e[t]=n,e.onChange&&e.onChange(t),i&&this.emit("objectsChanged",[e],t),e)}setPropertyMultiple(e,t,n,r=!0,i=!0){if(r)return this.history.execute(new os(this,e,t,n));for(let r=0;r<e.length;r++)this.setProperty(e[r],t,n,!1,!1);return i&&this.emit("objectsChanged",e,t),e}setPropertySelected(e,t,n=!0,r=!0){return this.setPropertyMultiple(this.selected,e,t,n,r)}setProperties(e,t,n=!0,r=!0){if(n)return this.history.execute(new ns(this,e,t));for(const n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;const r=t[n];r&&r.copy?e[n].copy(r):e[n]=r}return e.onChange(),r&&this.emit("objectsChanged",[e]),e}setPropertiesMultiple(e,t,n=!0,r=!0){if(n)return this.history.execute(new rs(this,e,t));for(let n=0;n<e.length;n++)this.setProperties(e[n],t,!1,!1);return r&&this.emit("objectsChanged",e),e}setPropertiesSelected(e,t=!0,n=!0){return this.setPropertiesMultiple(this.selected,e,t,n)}loadMaterialSlot(e,t,n,r,i=!0,o=!0){return i?this.history.execute(new ms(this,e,t,n,r)):(e.loadMaterialSlot(t,n,r).catch(console.error),e.onChange&&e.onChange("materialSlot"),o&&this.emit("objectsChanged",[e],"materialSlot"),e)}loadMaterialSlotMultiple(e,t,n,r,i=!0,o=!0){if(i)return this.history.execute(new gs(this,e,t,n,r));for(const i of e)i.loadMaterialSlot(t,n,r).catch(console.error),i.onChange&&i.onChange("materialSlot");return o&&this.emit("objectsChanged",e,"materialSlot"),e}loadMaterialSlotSelected(e,t,n,r=!0,i=!0){return this.loadMaterialSlotMultiple(this.selected,e,t,n,r,i)}getRootObjects(e,t=[],n=!0,r=!1){t.length=0;const i=o=>{if(-1!==e.indexOf(o)&&(!n||o.parent)&&(!r||!o.disableTransform))return void t.push(o);const a=o.children;for(let e=0;e<a.length;e++){const t=a[e];t.isNode&&i(t)}};return i(this.scene),t}getTransformRoots(e,t=[]){return this.getRootObjects(e,t,!0,!0)}updateTransformRoots(){this.getTransformRoots(this.selected,this.selectedTransformRoots)}async addMedia(e,t,n){let r="";const{hostname:i}=new URL(e);try{r=await this.api.getContentType(e)||""}catch(t){console.warn(`Couldn't fetch content type for url ${e}. Using LinkNode instead.`)}let o;return r.startsWith("model/gltf")?(o=new _s(this),this.getSpawnPosition(o.position),this.addObject(o,t,n),o.initialScale="fit",await o.load(e)):r.startsWith("video/")||"www.twitch.tv"===i?(o=new $s(this),this.getSpawnPosition(o.position),this.addObject(o,t,n),await o.load(e)):r.startsWith("image/")?(o=new Ls(this),this.getSpawnPosition(o.position),this.addObject(o,t,n),await o.load(e)):r.startsWith("audio/")?(o=new js(this),this.getSpawnPosition(o.position),this.addObject(o,t,n),await o.load(e)):(o=new Bs(this),this.getSpawnPosition(o.position),o.href=e,this.addObject(o,t,n)),o}spawnGrabbedObject(e){this.spokeControls.transformMode===Ou.Placement&&this.removeSelectedObjects(),e.disableTransform||this.getSpawnPosition(e.position),this.addObject(e),e.disableTransform||this.spokeControls.setTransformMode(Ou.Placement,e.useMultiplePlacementMode)}incrementGridHeight(){this.setGridHeight(this.grid.position.y+1.5)}decrementGridHeight(){this.setGridHeight(this.grid.position.y-1.5)}setGridHeight(e){this.grid.position.y=e,this.emit("gridHeightChanged",e)}toggleGridVisible(){this.grid.visible=!this.grid.visible,this.emit("gridVisibilityChanged",this.grid.visible)}dispose(){this.clearCaches(),this.renderer&&this.renderer.dispose()}}c()(wu,"DefaultExportOptions",{combineMeshes:!0,removeUnusedObjects:!0});const Eu="Disabled",Tu="Grid",Mu="Selection",Cu="Center",$u="Bottom",Ou={Disabled:"Disabled",Grab:"Grab",Placement:"Placement",Translate:"Translate",Rotate:"Rotate",Scale:"Scale"},Au={X:"X",Y:"Y",Z:"Z",XY:"XY",YZ:"YZ",XZ:"XZ",XYZ:"XYZ"},Iu={X:new Mr.ec(1,0,0),Y:new Mr.ec(0,1,0),Z:new Mr.ec(0,0,1),XY:new Mr.ec(1,1,0),YZ:new Mr.ec(0,1,1),XZ:new Mr.ec(1,0,1),XYZ:new Mr.ec(1,1,1)},Pu=new Mr.ec;function Lu(e,t){return e.distance-t.distance}class ku extends br.a{constructor(e,t,n,r){super(),c()(this,"onSceneSet",e=>{this.scene=e}),c()(this,"onBeforeSelectionChanged",()=>{if(this.transformMode===Ou.Grab){const e=this.grabHistoryCheckpoint;this.setTransformMode(this.transformModeOnCancel),this.editor.revert(e)}else this.transformMode===Ou.Placement&&(this.setTransformMode(this.transformModeOnCancel),this.editor.removeSelectedObjects())}),c()(this,"onSelectionChanged",()=>{this.selectionChanged=!0}),c()(this,"onObjectsChanged",(e,t)=>{"position"!==t&&"rotation"!==t&&"scale"!==t&&"matrix"!==t||(this.transformPropertyChanged=!0)}),c()(this,"transformPivotModes",[Mu,Cu,$u]),this.camera=e,this.editor=t,this.inputManager=n,this.flyControls=r,this.enabled=!1,this.normalMatrix=new Mr.cb,this.vector=new Mr.ec,this.delta=new Mr.ec,this.center=new Mr.ec,this.spherical=new Mr.Tb,this.panSpeed=1,this.zoomSpeed=.1,this.orbitSpeed=5,this.lookSensitivity=5,this.selectSensitivity=.001,this.boostSpeed=4,this.moveSpeed=4,this.initialLookSensitivity=r.lookSensitivity,this.initialBoostSpeed=r.boostSpeed,this.initialMoveSpeed=r.moveSpeed,this.distance=0,this.maxFocusDistance=1e3,this.raycaster=new Mr.Lb,this.raycasterResults=[],this.scene=t.scene,this.box=new Mr.i,this.sphere=new Mr.Rb,this.centerViewportPosition=new Mr.dc,this.raycastIgnoreLayers=new Mr.O,this.raycastIgnoreLayers.set(1),this.renderableLayers=new Mr.O,this.transformGizmo=new Io,this.editor.helperScene.add(this.transformGizmo),this.transformMode=Ou.Translate,this.multiplePlacement=!1,this.transformModeOnCancel=Ou.Translate,this.transformSpace=yu.World,this.transformPivot=Mu,this.transformAxis=null,this.grabHistoryCheckpoint=null,this.placementObjects=[],this.snapMode=Tu,this.translationSnap=.5,this.rotationSnap=90,this.scaleSnap=.1,this.editor.grid.setSize(this.translationSnap),this.selectionBoundingBox=new Mr.i,this.selectStartPosition=new Mr.dc,this.selectEndPosition=new Mr.dc,this.inverseGizmoQuaternion=new Mr.Bb,this.dragOffset=new Mr.ec,this.transformRay=new Mr.Kb,this.transformPlane=new Mr.ub,this.planeIntersection=new Mr.ec,this.planeNormal=new Mr.ec,this.translationVector=new Mr.ec,this.initRotationDragVector=new Mr.ec,this.prevRotationAngle=0,this.curRotationDragVector=new Mr.ec,this.normalizedInitRotationDragVector=new Mr.ec,this.normalizedCurRotationDragVector=new Mr.ec,this.initDragVector=new Mr.ec,this.dragVector=new Mr.ec,this.deltaDragVector=new Mr.ec,this.prevScale=new Mr.ec,this.curScale=new Mr.ec,this.scaleVector=new Mr.ec,this.dragging=!1,this.selectionChanged=!0,this.transformPropertyChanged=!0,this.transformModeChanged=!0,this.transformPivotChanged=!0,this.transformSpaceChanged=!0,this.flyStartTime=0,this.flyModeSensitivity=.25,this.editor.addListener("beforeSelectionChanged",this.onBeforeSelectionChanged),this.editor.addListener("selectionChanged",this.onSelectionChanged),this.editor.addListener("objectsChanged",this.onObjectsChanged)}enable(){this.enabled=!0,this.inputManager.enableInputMapping(Sr,Er)}disable(){this.enabled=!1,this.inputManager.disableInputMapping(Sr)}update(){if(!this.enabled)return;const e=this.inputManager;e.get(Sr.enableFlyMode)?(this.flyStartTime=performance.now(),this.distance=this.camera.position.distanceTo(this.center)):e.get(Sr.disableFlyMode)&&(this.flyControls.disable(),this.flyControls.lookSensitivity=this.initialLookSensitivity,this.flyControls.boostSpeed=this.initialBoostSpeed,this.flyControls.moveSpeed=this.initialMoveSpeed,this.center.addVectors(this.camera.position,this.vector.set(0,0,-this.distance).applyMatrix3(this.normalMatrix.getNormalMatrix(this.camera.matrix))),this.emit("flyModeChanged"),performance.now()-this.flyStartTime<1e3*this.flyModeSensitivity&&this.cancel());const t=e.get(Sr.flying);t&&!this.flyControls.enabled&&performance.now()-this.flyStartTime>100&&(this.flyControls.enable(),this.initialLookSensitivity=this.flyControls.lookSensitivity,this.initialMoveSpeed=this.flyControls.moveSpeed,this.initialBoostSpeed=this.flyControls.boostSpeed,this.flyControls.lookSensitivity=this.lookSensitivity,this.flyControls.moveSpeed=this.moveSpeed,this.flyControls.boostSpeed=this.boostSpeed,this.emit("flyModeChanged"));const n=e.get(Sr.shift),r=this.editor.selected,i=this.editor.selectedTransformRoots,o=e.get(Sr.modifier);let a=!1;this.transformModeChanged&&(this.transformGizmo.setTransformMode(this.transformMode),this.transformMode!==Ou.Grab&&this.transformMode!==Ou.Placement||(a=!0));const s=e.get(Sr.selectStart)&&!t&&this.transformMode!==Ou.Grab&&this.transformMode!==Ou.Placement;if(i.length>0&&this.transformMode!==Ou.Disabled){const e=r[r.length-1];if(this.selectionChanged||this.transformModeChanged||this.transformPivotChanged||this.transformPropertyChanged)if(this.transformPivot===Mu)e.getWorldPosition(this.transformGizmo.position);else{this.selectionBoundingBox.makeEmpty();for(let e=0;e<i.length;e++)this.selectionBoundingBox.expandByObject(i[e]);this.transformPivot===Cu?this.selectionBoundingBox.getCenter(this.transformGizmo.position):(this.transformGizmo.position.x=(this.selectionBoundingBox.max.x+this.selectionBoundingBox.min.x)/2,this.transformGizmo.position.y=this.selectionBoundingBox.min.y,this.transformGizmo.position.z=(this.selectionBoundingBox.max.z+this.selectionBoundingBox.min.z)/2)}(this.selectionChanged||this.transformModeChanged||this.transformSpaceChanged||this.transformPropertyChanged)&&(this.transformSpace===yu.LocalSelection?e.getWorldQuaternion(this.transformGizmo.quaternion):this.transformGizmo.rotation.set(0,0,0),this.inverseGizmoQuaternion.copy(this.transformGizmo.quaternion).inverse()),(this.transformModeChanged||this.transformSpaceChanged)&&this.transformMode===Ou.Scale&&this.transformGizmo.setLocalScaleHandlesVisible(this.transformSpace!==yu.World),this.transformGizmo.visible=!0}else this.transformGizmo.visible=!1;this.selectionChanged=!1,this.transformModeChanged=!1,this.transformPivotChanged=!1,this.transformSpaceChanged=!1;const l=e.get(Sr.cursorPosition);if(s){const t=e.get(Sr.selectStartPosition);if(this.selectStartPosition.copy(t),this.raycaster.setFromCamera(t,this.camera),this.transformGizmo.activeControls)if(this.transformAxis=this.transformGizmo.selectAxisWithRaycaster(this.raycaster),this.transformAxis){const e=this.transformGizmo.selectedAxis.axisInfo;this.planeNormal.copy(e.planeNormal).applyQuaternion(this.transformGizmo.quaternion).normalize(),this.transformPlane.setFromNormalAndCoplanarPoint(this.planeNormal,this.transformGizmo.position),this.dragging=!0}else this.dragging=!1}else this.transformGizmo.activeControls&&!this.dragging&&(this.raycaster.setFromCamera(l,this.camera),this.transformGizmo.highlightHoveredAxis(this.raycaster));const c=1===e.get(Sr.selectEnd);if(this.dragging||this.transformMode===Ou.Grab||this.transformMode===Ou.Placement){let e;if(this.transformMode===Ou.Grab||this.transformMode===Ou.Placement?(this.getRaycastPosition(t?this.centerViewportPosition:l,this.planeIntersection,o),e=Iu.XYZ):(this.transformRay.origin.setFromMatrixPosition(this.camera.matrixWorld),this.transformRay.direction.set(l.x,l.y,.5).unproject(this.camera).sub(this.transformRay.origin),this.transformRay.intersectPlane(this.transformPlane,this.planeIntersection),e=Iu[this.transformAxis]),e||console.warn(`Axis Constraint is undefined. transformAxis was ${this.transformAxis} transformMode was ${this.transformMode} dragging was ${this.dragging}`),s?this.dragOffset.subVectors(this.transformGizmo.position,this.planeIntersection):a&&this.dragOffset.set(0,0,0),this.planeIntersection.add(this.dragOffset),this.transformMode===Ou.Translate||this.transformMode===Ou.Grab||this.transformMode===Ou.Placement){if(this.translationVector.subVectors(this.planeIntersection,this.transformGizmo.position).applyQuaternion(this.inverseGizmoQuaternion).multiply(e),this.translationVector.applyQuaternion(this.transformGizmo.quaternion),this.transformGizmo.position.add(this.translationVector),this.shouldSnap(o)){const t=this.transformGizmo.position,n=t.x,r=t.y,i=t.z,o=(new Mr.ec).copy(e).applyQuaternion(this.transformGizmo.quaternion);t.set(0!==o.x?Math.round(t.x/this.translationSnap)*this.translationSnap:t.x,0!==o.y?Math.round(t.y/this.translationSnap)*this.translationSnap:t.y,0!==o.z?Math.round(t.z/this.translationSnap)*this.translationSnap:t.z);const a=t.x-n,s=t.y-r,l=t.z-i;this.translationVector.set(this.translationVector.x+a,this.translationVector.y+s,this.translationVector.z+l)}const t=this.editor.translateSelected(this.translationVector,this.transformSpace);a&&this.transformMode===Ou.Grab&&(this.grabHistoryCheckpoint=t.id)}else if(this.transformMode===Ou.Rotate){s&&(this.initRotationDragVector.subVectors(this.planeIntersection,this.dragOffset).sub(this.transformGizmo.position),this.prevRotationAngle=0),this.curRotationDragVector.subVectors(this.planeIntersection,this.dragOffset).sub(this.transformGizmo.position),this.normalizedInitRotationDragVector.copy(this.initRotationDragVector).normalize(),this.normalizedCurRotationDragVector.copy(this.curRotationDragVector).normalize();let e=this.curRotationDragVector.angleTo(this.initRotationDragVector);if(e*=this.normalizedInitRotationDragVector.cross(this.normalizedCurRotationDragVector).dot(this.planeNormal)>0?1:-1,this.shouldSnap(o)){const t=Mr.bb.DEG2RAD*this.rotationSnap;e=Math.round(e/t)*t}const t=e-this.prevRotationAngle;this.prevRotationAngle=e,this.editor.rotateAroundSelected(this.transformGizmo.position,this.planeNormal,t);const n=this.transformGizmo.selectedAxis.axisInfo;if(s&&(n.startMarker.visible=!0,n.endMarker.visible=!0,this.transformSpace!==yu.World)){const e=n.startMarkerLocal;e.position.copy(this.transformGizmo.position),e.quaternion.copy(this.transformGizmo.quaternion),e.scale.copy(this.transformGizmo.scale),this.scene.add(e)}if(this.transformSpace===yu.World){if(!n.rotationTarget)throw new Error(`Couldn't rotate object due to an unknown error. The selected axis is ${this.transformGizmo.selectedAxis.name} The selected axis info is: ${JSON.stringify(n)}`);n.rotationTarget.rotateOnAxis(n.planeNormal,t)}else this.transformGizmo.rotateOnAxis(n.planeNormal,t);if(c&&(n.startMarker.visible=!1,n.endMarker.visible=!1,n.rotationTarget.rotation.set(0,0,0),this.transformSpace!==yu.World)){const e=n.startMarkerLocal;this.scene.remove(e)}}else if(this.transformMode===Ou.Scale){let t;this.dragVector.copy(this.planeIntersection).applyQuaternion(this.inverseGizmoQuaternion).multiply(e),s&&(this.initDragVector.copy(this.dragVector),this.prevScale.set(1,1,1)),this.deltaDragVector.subVectors(this.dragVector,this.initDragVector),this.deltaDragVector.multiply(e),t=this.transformAxis===Au.XYZ?1+this.camera.getWorldDirection(Pu).applyQuaternion(this.transformGizmo.quaternion).dot(this.deltaDragVector):1+e.dot(this.deltaDragVector),this.curScale.set(0===e.x?1:t,0===e.y?1:t,0===e.z?1:t),this.shouldSnap(o)&&this.curScale.divideScalar(this.scaleSnap).round().multiplyScalar(this.scaleSnap),this.curScale.set(this.curScale.x<=0?Number.EPSILON:this.curScale.x,this.curScale.y<=0?Number.EPSILON:this.curScale.y,this.curScale.z<=0?Number.EPSILON:this.curScale.z),this.scaleVector.copy(this.curScale).divide(this.prevScale),this.prevScale.copy(this.curScale),this.editor.scaleSelected(this.scaleVector,this.transformSpace)}}if(c)if(this.transformMode===Ou.Grab||this.transformMode===Ou.Placement)this.transformMode===Ou.Grab&&(n||e.get(xr.boost)?this.setTransformMode(Ou.Placement):this.setTransformMode(this.transformModeOnCancel)),this.transformMode===Ou.Placement&&(n||e.get(xr.boost)||this.multiplePlacement?this.editor.duplicateSelected(void 0,void 0,!0,!0,!1):this.setTransformMode(this.transformModeOnCancel));else{const t=e.get(Sr.selectEndPosition);if(this.selectStartPosition.distanceTo(t)<this.selectSensitivity){const e=this.raycastNode(t);e?n?this.editor.toggleSelection(e.node):this.editor.setSelection([e.node]):n||this.editor.deselectAll()}this.transformGizmo.deselectAxis(),this.dragging=!1}if(this.transformPropertyChanged=!1,e.get(Sr.rotateLeft)?this.editor.rotateAroundSelected(this.transformGizmo.position,new Mr.ec(0,1,0),this.rotationSnap*Mr.bb.DEG2RAD):e.get(Sr.rotateRight)?this.editor.rotateAroundSelected(this.transformGizmo.position,new Mr.ec(0,1,0),-this.rotationSnap*Mr.bb.DEG2RAD):e.get(Sr.grab)?(this.transformMode!==Ou.Grab&&this.transformMode!==Ou.Placement||this.cancel(),this.editor.selected.length>0&&this.setTransformMode(Ou.Grab)):e.get(Sr.cancel)?this.cancel():e.get(Sr.focusSelection)?this.focus(this.editor.selected):e.get(Sr.setTranslateMode)?this.setTransformMode(Ou.Translate):e.get(Sr.setRotateMode)?this.setTransformMode(Ou.Rotate):e.get(Sr.setScaleMode)?this.setTransformMode(Ou.Scale):e.get(Sr.toggleSnapMode)?this.toggleSnapMode():e.get(Sr.toggleTransformPivot)?this.changeTransformPivot():e.get(Sr.toggleTransformSpace)?this.toggleTransformSpace():e.get(Sr.incrementGridHeight)?this.editor.incrementGridHeight():e.get(Sr.decrementGridHeight)?this.editor.decrementGridHeight():e.get(Sr.undo)?this.editor.undo():e.get(Sr.redo)?this.editor.redo():e.get(Sr.duplicateSelected)?this.editor.duplicateSelected():e.get(Sr.groupSelected)?this.editor.groupSelected():e.get(Sr.deleteSelected)?this.editor.removeSelectedObjects():e.get(Sr.saveProject)&&this.editor.emit("saveProject"),t)return void this.updateTransformGizmoScale();const u=e.get(Sr.selecting)&&!this.dragging,h=e.get(Sr.zoomDelta),d=e.get(Sr.cursorDeltaX),p=e.get(Sr.cursorDeltaY);if(0!==h){const e=this.camera,t=this.delta,n=this.center;t.set(0,0,h);const r=e.position.distanceTo(n);if(t.multiplyScalar(r*this.zoomSpeed),t.length()>r)return;t.applyMatrix3(this.normalMatrix.getNormalMatrix(e.matrix)),e.position.add(t)}else if(e.get(Sr.focus)){const t=this.raycastNode(e.get(Sr.focusPosition));t&&this.focus([t.node])}else if(e.get(Sr.panning)){const e=this.camera,t=this.delta,n=this.center,r=e.position.distanceTo(n);t.set(d,-p,0).multiplyScalar(r*this.panSpeed).applyMatrix3(this.normalMatrix.getNormalMatrix(this.camera.matrix)),e.position.add(t),n.add(t)}else if(u){const e=this.camera,t=this.center,n=this.vector,r=this.spherical;n.copy(e.position).sub(t),r.setFromVector3(n),r.theta+=d*this.orbitSpeed,r.phi+=p*this.orbitSpeed,r.makeSafe(),n.setFromSpherical(r),e.position.copy(t).add(n),e.lookAt(t)}this.updateTransformGizmoScale()}raycastNode(e){return this.raycaster.setFromCamera(e,this.camera),this.raycasterResults.length=0,this.raycaster.intersectObject(this.scene,!0,this.raycasterResults),Cr(this.raycasterResults,this.scene)}focus(e){const t=this.box,n=this.center,r=this.delta,i=this.camera;let o=0;if(0===e.length)n.set(0,0,0),o=10;else{t.makeEmpty();for(const n of e)t.expandByObject(n);!1===t.isEmpty()?(t.getCenter(n),o=t.getBoundingSphere(this.sphere).radius):(n.setFromMatrixPosition(e[0].matrixWorld),o=.1)}r.set(0,0,1),r.applyQuaternion(i.quaternion),r.multiplyScalar(4*Math.min(o,this.maxFocusDistance)),i.position.copy(n).add(r)}updateTransformGizmoScale(){const e=this.transformGizmo.position.distanceTo(this.camera.position);this.transformGizmo.scale.set(1,1,1).multiplyScalar(e/5)}_raycastRecursive(e,t,n){if(t&&-1!==t.indexOf(e)||n&&n.test(e.layers)||this.editor.renderer.batchManager&&-1!==this.editor.renderer.batchManager.batches.indexOf(e)||!e.visible)return;this.raycaster.intersectObject(e,!1,this.raycasterResults);const r=e.children;for(let e=0;e<r.length;e++)this._raycastRecursive(r[e],t,n)}getRaycastPosition(e,t,n){this.raycaster.setFromCamera(e,this.camera),this.raycasterResults.length=0,this._raycastRecursive(this.scene,this.editor.selectedTransformRoots,this.raycastIgnoreLayers),this._raycastRecursive(this.editor.grid),this.raycasterResults.sort(Lu);const r=this.raycasterResults[0];if(r&&r.distance<100?t.copy(r.point):this.raycaster.ray.at(10,t),this.shouldSnap(n)){const e=this.translationSnap;t.set(Math.round(t.x/e)*e,Math.round(t.y/e)*e,Math.round(t.z/e)*e)}}setTransformMode(e,t){(e!==Ou.Placement&&e!==Ou.Grab||!this.editor.selected.some(e=>e.disableTransform))&&(e!==Ou.Placement&&e!==Ou.Grab&&(this.transformModeOnCancel=e),e===Ou.Placement?this.placementObjects=this.editor.selected.slice(0):this.placementObjects=[],this.multiplePlacement=t||!1,this.grabHistoryCheckpoint=null,this.transformMode=e,this.transformModeChanged=!0,this.emit("transformModeChanged",e))}setTransformSpace(e){this.transformSpace=e,this.transformSpaceChanged=!0,this.emit("transformSpaceChanged")}toggleTransformSpace(){this.setTransformSpace(this.transformSpace===yu.World?yu.LocalSelection:yu.World)}setTransformPivot(e){this.transformPivot=e,this.transformPivotChanged=!0,this.emit("transformPivotChanged")}changeTransformPivot(){const e=(this.transformPivotModes.indexOf(this.transformPivot)+1)%this.transformPivotModes.length;this.setTransformPivot(this.transformPivotModes[e])}setSnapMode(e){this.snapMode=e,this.emit("snapSettingsChanged")}toggleSnapMode(){this.setSnapMode(this.snapMode===Eu?Tu:Eu)}shouldSnap(e=!1){return this.snapMode===Tu==!e}setTranslationSnap(e){this.translationSnap=e,this.editor.grid.setSize(e),this.emit("snapSettingsChanged")}setScaleSnap(e){this.scaleSnap=e,this.emit("snapSettingsChanged")}setRotationSnap(e){this.rotationSnap=e,this.emit("snapSettingsChanged")}cancel(){if(this.transformMode===Ou.Grab){const e=this.grabHistoryCheckpoint;this.setTransformMode(this.transformModeOnCancel),this.editor.revert(e)}else this.transformMode===Ou.Placement&&(this.setTransformMode(this.transformModeOnCancel),this.editor.removeSelectedObjects());this.editor.deselectAll()}}var Ru=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M352.201 425.775l-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z",key:"k0"}))}));Ru.displayName="ArrowsAlt";var Du=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z",key:"k0"}))}));Du.displayName="SyncAlt";var ju=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 256 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z",key:"k0"}))}));ju.displayName="ArrowsAltV";var Nu=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 496 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z",key:"k0"}))}));Nu.displayName="Globe";var Fu=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 496 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm0 432c-101.69 0-184-82.29-184-184 0-101.69 82.29-184 184-184 101.69 0 184 82.29 184 184 0 101.69-82.29 184-184 184zm0-312c-70.69 0-128 57.31-128 128s57.31 128 128 128 128-57.31 128-128-57.31-128-128-128zm0 192c-35.29 0-64-28.71-64-64s28.71-64 64-64 64 28.71 64 64-28.71 64-64 64z",key:"k0"}))}));Fu.displayName="Bullseye";var Uu=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M164.07 148.1H12a12 12 0 01-12-12v-80a36 36 0 0136-36h104a36 36 0 0136 36v80a11.89 11.89 0 01-11.93 12zm347.93-12V56a36 36 0 00-36-36H372a36 36 0 00-36 36v80a12 12 0 0012 12h152a11.89 11.89 0 0012-11.9zm-164 44a12 12 0 00-12 12v52c0 128.1-160 127.9-160 0v-52a12 12 0 00-12-12H12.1a12 12 0 00-12 12.1c.1 21.4.6 40.3 0 53.3 0 150.6 136.17 246.6 256.75 246.6s255-96 255-246.7c-.6-12.8-.2-33 0-53.2a12 12 0 00-12-12.1z",key:"k0"}))}));Uu.displayName="Magnet";var Bu=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 448 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z",key:"k0"}))}));Bu.displayName="Bars";var zu=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),u.createElement("path",{d:"M15 3H4.984c-1.103 0-2 .897-2 2v14.016c0 1.103.897 2 2 2H19c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2h-4zm4 5h-3V5h3v3zM4.984 10h3v4.016h-3V10zm5 0H14v4.016H9.984V10zM16 10h3v4.016h-3V10zm-2-5v3H9.984V5H14zM7.984 5v3h-3V5h3zm-3 11.016h3v3h-3v-3zm5 3v-3H14v3H9.984zm6.016 0v-3h3.001v3H16z",key:"k0"}))}));zu.displayName="Grid";var Vu=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 448 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z",key:"k0"}))}));Vu.displayName="Play";var Gu=n(86),Hu=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 448 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z",key:"k0"}))}));Hu.displayName="Pause";function Wu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wu(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ju=_.e.div.withConfig({displayName:"ToolBar__StyledToolbar",componentId:"sc-1rziabs-0"})(["display:flex;flex-direction:row;height:40px;background-color:",";user-select:none;"],e=>e.theme.toolbar),Yu=_.e.div.withConfig({displayName:"ToolBar__ToolButtons",componentId:"sc-1rziabs-1"})(["width:auto;height:inherit;display:flex;flex-direction:row;"]),Xu=_.e.div.withConfig({displayName:"ToolBar__ToolToggles",componentId:"sc-1rziabs-2"})(["width:auto;height:inherit;display:flex;flex-direction:row;background-color:",";align-items:center;padding:0 16px;"],e=>e.theme.toolbar2),Ku=_.e.div.withConfig({displayName:"ToolBar__Spacer",componentId:"sc-1rziabs-3"})(["flex:1;"]),Zu=Object(_.e)(Me.a).withConfig({displayName:"ToolBar__PublishButton",componentId:"sc-1rziabs-4"})(["align-self:center;margin:1em;padding:0 2em;"]),Qu={container:e=>qu(qu({},e),{},{width:"80px"}),control:e=>qu(qu({},e),{},{backgroundColor:Gu.a.inputBackground,minHeight:"24px",borderRadius:"0px",borderWidth:"0px",cursor:"pointer",outline:"none",boxShadow:"none"})},eh={container:e=>qu(qu({},e),{},{width:"80px"}),control:e=>qu(qu({},e),{},{backgroundColor:Gu.a.inputBackground,minHeight:"24px",borderTopLeftRadius:"0px",borderBottomLeftRadius:"0px",borderWidth:"0px 0px 0px 1px",borderColor:Gu.a.border,cursor:"pointer",outline:"none",boxShadow:"none",":hover":{borderColor:Gu.a.border}})},th={container:e=>qu(qu({},e),{},{width:"100px"}),control:e=>qu(qu({},e),{},{backgroundColor:Gu.a.inputBackground,minHeight:"24px",borderTopLeftRadius:"0px",borderBottomLeftRadius:"0px",borderWidth:"0px",cursor:"pointer",outline:"none",boxShadow:"none"})},nh=_.e.div.withConfig({displayName:"ToolBar__StyledToggleButton",componentId:"sc-1rziabs-5"})(["display:flex;justify-content:center;align-items:center;width:24px;height:24px;background-color:",";border-top-left-radius:4px;border-bottom-left-radius:4px;:hover{background-color:",";}:active{background-color:",";}"],e=>e.value?e.theme.blue:e.theme.toolbar,e=>e.theme.blueHover,e=>e.theme.blue);function rh(e){let{tooltip:t,children:n}=e,r=K()(e,["tooltip","children"]);return h.a.createElement(Se,{info:t},h.a.createElement(nh,r,n))}rh.propTypes={tooltip:p.a.string,children:p.a.node};const ih=_.e.div.withConfig({displayName:"ToolBar__ToolbarInputGroup",componentId:"sc-1rziabs-6"})(["display:flex;align-items:center;border:1px solid ",";border-radius:4px;margin:0 4px;"],e=>e.theme.border),oh=Object(_.e)(yr).withConfig({displayName:"ToolBar__ToolbarNumericStepperInput",componentId:"sc-1rziabs-7"})(["width:100px;input{border-width:0;}button{border-width:0px 1px 0px 1px;&:first-child{border-radius:0;}&:last-child{border-right-width:0;}}"]),ah=[{label:"0.1m",value:.1},{label:"0.125m",value:.125},{label:"0.25m",value:.25},{label:"0.5m",value:.5},{label:"1m",value:1},{label:"2m",value:2},{label:"4m",value:4}],sh=[{label:"1°",value:1},{label:"5°",value:5},{label:"10°",value:10},{label:"15°",value:15},{label:"30°",value:30},{label:"45°",value:45},{label:"90°",value:90}],lh=[{label:"Selection",value:Mu},{label:"Center",value:Cu},{label:"Bottom",value:$u}],ch=[{label:"Selection",value:yu.LocalSelection},{label:"World",value:yu.World}];class uh extends u.Component{constructor(e){super(e),c()(this,"onEditorInitialized",()=>{const e=this.props.editor;e.spokeControls.addListener("transformModeChanged",this.onForceUpdate),e.spokeControls.addListener("transformSpaceChanged",this.onForceUpdate),e.spokeControls.addListener("transformPivotChanged",this.onForceUpdate),e.spokeControls.addListener("snapSettingsChanged",this.onForceUpdate),e.addListener("gridHeightChanged",this.onForceUpdate),e.addListener("gridVisibilityChanged",this.onForceUpdate),this.setState({editorInitialized:!0})}),c()(this,"onForceUpdate",()=>{this.forceUpdate()}),c()(this,"onMenuSelected",e=>{if(!this.state.menuOpen){const t=0,n=e.currentTarget.offsetHeight;Object(Z.f)({position:{x:t,y:n},target:e.currentTarget,id:"menu"}),this.setState({menuOpen:!0}),window.addEventListener("mousedown",this.onWindowClick)}}),c()(this,"onWindowClick",()=>{window.removeEventListener("mousedown",this.onWindowClick),this.setState({menuOpen:!1})}),c()(this,"renderMenu",e=>e.items&&0!==e.items.length?h.a.createElement(Z.d,{key:e.name,title:e.name,hoverDelay:0},e.items.map(e=>this.renderMenu(e))):h.a.createElement(Z.c,{key:e.name,onClick:e.action},e.name,e.hotkey&&h.a.createElement("div",null,e.hotkey))),c()(this,"onSelectTranslate",()=>{this.props.editor.spokeControls.setTransformMode(Ou.Translate)}),c()(this,"onSelectRotate",()=>{this.props.editor.spokeControls.setTransformMode(Ou.Rotate)}),c()(this,"onSelectScale",()=>{this.props.editor.spokeControls.setTransformMode(Ou.Scale)}),c()(this,"onToggleTransformSpace",()=>{this.props.editor.spokeControls.toggleTransformSpace()}),c()(this,"onChangeTransformPivot",e=>{this.props.editor.spokeControls.setTransformPivot(e)}),c()(this,"onToggleTransformPivot",()=>{this.props.editor.spokeControls.changeTransformPivot()}),c()(this,"onToggleSnapMode",()=>{this.props.editor.spokeControls.toggleSnapMode()}),c()(this,"onChangeTranslationSnap",e=>{this.props.editor.spokeControls.setTranslationSnap(parseFloat(e)),this.props.editor.spokeControls.setSnapMode(Tu)}),c()(this,"onChangeScaleSnap",e=>{this.props.editor.spokeControls.setScaleSnap(e)}),c()(this,"onChangeRotationSnap",e=>{this.props.editor.spokeControls.setRotationSnap(parseFloat(e)),this.props.editor.spokeControls.setSnapMode(Tu)}),c()(this,"onChangeGridHeight",e=>{this.props.editor.setGridHeight(e)}),c()(this,"onToggleGridVisible",()=>{this.props.editor.toggleGridVisible()}),c()(this,"onTogglePlayMode",()=>{this.props.editor.playing?this.props.editor.leavePlayMode():this.props.editor.enterPlayMode()}),this.state={editorInitialized:!1,menuOpen:!1}}componentDidMount(){const e=this.props.editor;e.addListener("initialized",this.onEditorInitialized),e.addListener("playModeChanged",this.onForceUpdate),e.addListener("settingsChanged",this.onForceUpdate)}componentWillUnmount(){const e=this.props.editor;e.removeListener("initialized",this.onEditorInitialized),e.spokeControls&&(e.spokeControls.removeListener("transformModeChanged",this.onForceUpdate),e.spokeControls.removeListener("transformSpaceChanged",this.onForceUpdate),e.spokeControls.removeListener("transformPivotChanged",this.onForceUpdate),e.spokeControls.removeListener("snapSettingsChanged",this.onForceUpdate),e.removeListener("gridHeightChanged",this.onForceUpdate),e.removeListener("gridVisibilityChanged",this.onForceUpdate),e.removeListener("playModeChanged",this.onForceUpdate),e.removeListener("settingsChanged",this.onForceUpdate))}render(){const{editorInitialized:e,menuOpen:t}=this.state;if(!e)return h.a.createElement(Ju,null);const{transformMode:n,transformSpace:r,transformPivot:i,snapMode:o,translationSnap:a,rotationSnap:s}=this.props.editor.spokeControls;return h.a.createElement(Ju,null,h.a.createElement(Yu,null,h.a.createElement(Te,{icon:Bu,onClick:this.onMenuSelected,selected:t,id:"menu"}),h.a.createElement(Te,{id:"translate-button",tooltip:"[T] Translate",icon:Ru,onClick:this.onSelectTranslate,selected:n===Ou.Translate}),h.a.createElement(Te,{id:"rotate-button",tooltip:"[R] Rotate",icon:Du,onClick:this.onSelectRotate,selected:n===Ou.Rotate}),h.a.createElement(Te,{id:"scale-button",tooltip:"[Y] Scale",icon:ju,onClick:this.onSelectScale,selected:n===Ou.Scale})),h.a.createElement(Xu,null,h.a.createElement(ih,{id:"transform-space"},h.a.createElement(Se,{info:"[Z] Toggle Transform Space",position:"bottom"},h.a.createElement(rh,{onClick:this.onToggleTransformSpace},h.a.createElement(Nu,{size:12}))),h.a.createElement(or,{styles:th,onChange:this.onChangeTransformSpace,options:ch,value:r})),h.a.createElement(ih,{id:"transform-pivot"},h.a.createElement(rh,{onClick:this.onToggleTransformPivot,tooltip:"[X] Toggle Transform Pivot"},h.a.createElement(Fu,{size:12})),h.a.createElement(or,{styles:th,onChange:this.onChangeTransformPivot,options:lh,value:i})),h.a.createElement(ih,{id:"transform-snap"},h.a.createElement(rh,{value:o===Tu,onClick:this.onToggleSnapMode,tooltip:"[C] Toggle Snap Mode"},h.a.createElement(Uu,{size:12})),h.a.createElement(or,{styles:Qu,onChange:this.onChangeTranslationSnap,options:ah,value:a,placeholder:a+"m",formatCreateLabel:e=>"Custom: "+e+"m",isValidNewOption:e=>""!==e.trim()&&!isNaN(e),creatable:!0}),h.a.createElement(or,{styles:eh,onChange:this.onChangeRotationSnap,options:sh,value:s,placeholder:s+"°",formatCreateLabel:e=>"Custom: "+e+"°",isValidNewOption:e=>""!==e.trim()&&!isNaN(e),creatable:!0})),h.a.createElement(ih,{id:"transform-grid"},h.a.createElement(rh,{onClick:this.onToggleGridVisible,tooltip:"Toggle Grid Visibility"},h.a.createElement(zu,{size:16})),h.a.createElement(oh,{value:this.props.editor.grid.position.y,onChange:this.onChangeGridHeight,precision:.01,smallStep:.25,mediumStep:1.5,largeStep:4.5,unit:"m",incrementTooltip:"[-] Increment Grid Height",decrementTooltip:"[=] Decrement Grid Height"})),this.props.editor.settings.enableExperimentalFeatures&&h.a.createElement(ih,{id:"preview"},h.a.createElement(rh,{onClick:this.onTogglePlayMode,tooltip:this.props.editor.playing?"Stop Previewing Scene":"Preview Scene"},this.props.editor.playing?h.a.createElement(Hu,{size:14}):h.a.createElement(Vu,{size:14})))),h.a.createElement(Ku,null),this.props.isPublishedScene&&h.a.createElement(Zu,{onClick:this.props.onOpenScene},f.a.isMoz()?"Open in Hubs":"Open Scene"),h.a.createElement(Zu,{id:"publish-button",onClick:this.props.onPublish},f.a.isMoz()?"Publish to Hubs...":"Publish Scene..."),h.a.createElement(Z.a,{id:"menu"},this.props.menu.map(e=>this.renderMenu(e))))}}c()(uh,"propTypes",{menu:p.a.array,editor:p.a.object,onPublish:p.a.func,onOpenScene:p.a.func,isPublishedScene:p.a.bool});const hh=_.e.div.withConfig({displayName:"PropertyGroup__StyledPropertyGroup",componentId:"r0jflu-0"})(["display:flex;flex-direction:column;flex-shrink:0;width:100%;padding:12px 0;border-bottom:1px solid ",";"],e=>e.theme.border),dh=_.e.div.withConfig({displayName:"PropertyGroup__PropertyGroupHeader",componentId:"r0jflu-1"})(["display:flex;flex-direction:row;align-items:left;font-weight:bold;color:",";padding:0 8px 8px;:last-child{margin-left:auto;}"],e=>e.theme.text2),ph=_.e.div.withConfig({displayName:"PropertyGroup__PropertyGroupDescription",componentId:"r0jflu-2"})(["background-color:",";color:",";white-space:pre-wrap;padding:0 8px 8px;"],e=>e.theme.panel,e=>e.theme.text2),fh=_.e.div.withConfig({displayName:"PropertyGroup__PropertyGroupContent",componentId:"r0jflu-3"})(["display:flex;flex-direction:column;"]);function mh(e){const{name:t,description:n,children:r}=e,i=K()(e,["name","description","children"]);return h.a.createElement(hh,i,h.a.createElement(dh,null,t),n&&h.a.createElement(ph,null,n.split("\\n").map((e,t)=>h.a.createElement(u.Fragment,{key:t},e,h.a.createElement("br",null)))),h.a.createElement(fh,null,r))}mh.propTypes={name:p.a.string,description:p.a.string,children:p.a.node};var gh=mh;class vh extends u.Component{render(){const{node:e,description:t,children:n}=this.props;return h.a.createElement(gh,{name:e.nodeName,description:t},n)}}c()(vh,"propTypes",{name:p.a.string,description:p.a.string,node:p.a.object,editor:p.a.object,children:p.a.node,disableTransform:p.a.bool}),c()(vh,"defaultProps",{disableTransform:!1});var yh=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z",key:"k0"}))}));yh.displayName="Circle";class _h extends u.Component{render(){return h.a.createElement(vh,this.props)}}c()(_h,"propTypes",{editor:p.a.object,node:p.a.object}),c()(_h,"iconComponent",yh);const bh=_.e.div.withConfig({displayName:"Panel__PanelContainer",componentId:"sc-12zq80v-0"})(["position:relative;display:flex;flex:1;flex-direction:column;border-radius:4px;background-color:",";overflow:hidden;user-select:none;"],e=>e.theme.panel),xh=_.e.div.withConfig({displayName:"Panel__PanelToolbar",componentId:"sc-12zq80v-1"})(["display:flex;padding:4px;height:24px;align-items:center;border-bottom:1px solid rgba(0,0,0,0.2);"]),Sh=_.e.div.withConfig({displayName:"Panel__PanelIcon",componentId:"sc-12zq80v-2"})(["margin-right:8px;"]),wh=_.e.div.withConfig({displayName:"Panel__PanelTitle",componentId:"sc-12zq80v-3"})([""]),Eh=_.e.div.withConfig({displayName:"Panel__PanelContent",componentId:"sc-12zq80v-4"})(["display:flex;flex:1;flex-direction:column;position:relative;overflow:hidden;"]);class Th extends u.Component{render(){const e=this.props,{icon:t,title:n,children:r,toolbarContent:i}=e,o=K()(e,["icon","title","children","toolbarContent"]);return h.a.createElement(bh,o,h.a.createElement(xh,{className:"toolbar"},t&&h.a.createElement(Sh,{as:t,size:12}),h.a.createElement(wh,null,n),i),h.a.createElement(Eh,null,r))}}c()(Th,"propTypes",{icon:p.a.object,title:p.a.string,children:p.a.node,toolbarContent:p.a.node});var Mh=n(15),Ch=n(19);function $h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Oh=n(31),Ah="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function Ih(e){cancelAnimationFrame(e.id)}function Ph(e,t){var n=Ah();var r={id:requestAnimationFrame((function i(){Ah()-n>=t?e.call(null):r.id=requestAnimationFrame(i)}))};return r}var Lh=null;function kh(e){if(void 0===e&&(e=!1),null===Lh||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?Lh="positive-descending":(t.scrollLeft=1,Lh=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),Lh}return Lh}var Rh=function(e,t){return e};function Dh(e){var t,n,r=e.getItemOffset,i=e.getEstimatedTotalSize,o=e.getItemSize,a=e.getOffsetForIndexAndAlignment,s=e.getStartIndexForOffset,l=e.getStopIndexForStartIndex,c=e.initInstanceProps,h=e.shouldResetStyleCacheOnItemSizeChange,d=e.validateProps;return n=t=function(e){function t(t){var n;return(n=e.call(this,t)||this)._instanceProps=c(n.props,$h($h(n))),n._outerRef=void 0,n._resetIsScrollingTimeoutId=null,n.state={instance:$h($h(n)),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof n.props.initialScrollOffset?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},n._callOnItemsRendered=void 0,n._callOnItemsRendered=Object(Ce.a)((function(e,t,r,i){return n.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:r,visibleStopIndex:i})})),n._callOnScroll=void 0,n._callOnScroll=Object(Ce.a)((function(e,t,r){return n.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:r})})),n._getItemStyle=void 0,n._getItemStyle=function(e){var t,i=n.props,a=i.direction,s=i.itemSize,l=i.layout,c=n._getItemStyleCache(h&&s,h&&l,h&&a);if(c.hasOwnProperty(e))t=c[e];else{var u,d=r(n.props,e,n._instanceProps),p=o(n.props,e,n._instanceProps),f="horizontal"===a||"horizontal"===l;c[e]=((u={position:"absolute"})["rtl"===a?"right":"left"]=f?d:0,u.top=f?0:d,u.height=f?"100%":p,u.width=f?p:"100%",t=u)}return t},n._getItemStyleCache=void 0,n._getItemStyleCache=Object(Ce.a)((function(e,t,n){return{}})),n._onScrollHorizontal=function(e){var t=e.currentTarget,r=t.clientWidth,i=t.scrollLeft,o=t.scrollWidth;n.setState((function(e){if(e.scrollOffset===i)return null;var t=n.props.direction,a=i;if("rtl"===t)switch(kh()){case"negative":a=-i;break;case"positive-descending":a=o-r-i}return a=Math.max(0,Math.min(a,o-r)),{isScrolling:!0,scrollDirection:e.scrollOffset<i?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._onScrollVertical=function(e){var t=e.currentTarget,r=t.clientHeight,i=t.scrollHeight,o=t.scrollTop;n.setState((function(e){if(e.scrollOffset===o)return null;var t=Math.max(0,Math.min(o,i-r));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){null!==n._resetIsScrollingTimeoutId&&Ih(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=Ph(n._resetIsScrolling,150)},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},(function(){n._getItemStyleCache(-1,null)}))},n}Object(Ch.a)(t,e),t.getDerivedStateFromProps=function(e,t){return jh(e,t),d(e),null};var n=t.prototype;return n.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},n.scrollToItem=function(e,t){void 0===t&&(t="auto");var n=this.props.itemCount,r=this.state.scrollOffset;e=Math.max(0,Math.min(e,n-1)),this.scrollTo(a(this.props,e,t,r,this._instanceProps))},n.componentDidMount=function(){var e=this.props,t=e.direction,n=e.initialScrollOffset,r=e.layout;if("number"==typeof n&&null!=this._outerRef){var i=this._outerRef;"horizontal"===t||"horizontal"===r?i.scrollLeft=n:i.scrollTop=n}this._callPropsCallbacks()},n.componentDidUpdate=function(){var e=this.props,t=e.direction,n=e.layout,r=this.state,i=r.scrollOffset;if(r.scrollUpdateWasRequested&&null!=this._outerRef){var o=this._outerRef;if("horizontal"===t||"horizontal"===n)if("rtl"===t)switch(kh()){case"negative":o.scrollLeft=-i;break;case"positive-ascending":o.scrollLeft=i;break;default:var a=o.clientWidth,s=o.scrollWidth;o.scrollLeft=s-a-i}else o.scrollLeft=i;else o.scrollTop=i}this._callPropsCallbacks()},n.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&Ih(this._resetIsScrollingTimeoutId)},n.render=function(){var e=this.props,t=e.children,n=e.className,r=e.direction,o=e.height,a=e.innerRef,s=e.innerElementType,l=e.innerTagName,c=e.itemCount,h=e.itemData,d=e.itemKey,p=void 0===d?Rh:d,f=e.layout,m=e.outerElementType,g=e.outerTagName,v=e.style,y=e.useIsScrolling,_=e.width,b=this.state.isScrolling,x="horizontal"===r||"horizontal"===f,S=x?this._onScrollHorizontal:this._onScrollVertical,w=this._getRangeToRender(),E=w[0],T=w[1],M=[];if(c>0)for(var C=E;C<=T;C++)M.push(Object(u.createElement)(t,{data:h,key:p(C,h),index:C,isScrolling:y?b:void 0,style:this._getItemStyle(C)}));var $=i(this.props,this._instanceProps);return Object(u.createElement)(m||g||"div",{className:n,onScroll:S,ref:this._outerRefSetter,style:Object(Mh.a)({position:"relative",height:o,width:_,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:r},v)},Object(u.createElement)(s||l||"div",{children:M,ref:a,style:{height:x?"100%":$,pointerEvents:b?"none":void 0,width:x?$:"100%"}}))},n._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],n=e[1],r=e[2],i=e[3];this._callOnItemsRendered(t,n,r,i)}if("function"==typeof this.props.onScroll){var o=this.state,a=o.scrollDirection,s=o.scrollOffset,l=o.scrollUpdateWasRequested;this._callOnScroll(a,s,l)}},n._getRangeToRender=function(){var e=this.props,t=e.itemCount,n=e.overscanCount,r=this.state,i=r.isScrolling,o=r.scrollDirection,a=r.scrollOffset;if(0===t)return[0,0,0,0];var c=s(this.props,a,this._instanceProps),u=l(this.props,c,a,this._instanceProps),h=i&&"backward"!==o?1:Math.max(1,n),d=i&&"forward"!==o?1:Math.max(1,n);return[Math.max(0,c-h),Math.max(0,Math.min(t-1,u+d)),c,u]},t}(u.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},n}var jh=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},Nh=Dh({getItemOffset:function(e,t){return t*e.itemSize},getItemSize:function(e,t){return e.itemSize},getEstimatedTotalSize:function(e){var t=e.itemCount;return e.itemSize*t},getOffsetForIndexAndAlignment:function(e,t,n,r){var i=e.direction,o=e.height,a=e.itemCount,s=e.itemSize,l=e.layout,c=e.width,u="horizontal"===i||"horizontal"===l?c:o,h=Math.max(0,a*s-u),d=Math.min(h,t*s),p=Math.max(0,t*s-u+s);switch("smart"===n&&(n=r>=p-u&&r<=d+u?"auto":"center"),n){case"start":return d;case"end":return p;case"center":var f=Math.round(p+(d-p)/2);return f<Math.ceil(u/2)?0:f>h+Math.floor(u/2)?h:f;case"auto":default:return r>=p&&r<=d?r:r<p?p:d}},getStartIndexForOffset:function(e,t){var n=e.itemCount,r=e.itemSize;return Math.max(0,Math.min(n-1,Math.floor(t/r)))},getStopIndexForStartIndex:function(e,t,n){var r=e.direction,i=e.height,o=e.itemCount,a=e.itemSize,s=e.layout,l=e.width,c=t*a,u="horizontal"===r||"horizontal"===s?l:i,h=Math.ceil((u+n-c)/a);return Math.max(0,Math.min(o-1,t+h-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function Fh(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function Uh(e,t){var n=e.style,r=Object(Oh.a)(e,["style"]),i=t.style,o=Object(Oh.a)(t,["style"]);return!Fh(n,i)&&!Fh(r,o)}var Bh=n(501),zh=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 640 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M384 320H256c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V352c0-17.67-14.33-32-32-32zM192 32c0-17.67-14.33-32-32-32H32C14.33 0 0 14.33 0 32v128c0 17.67 14.33 32 32 32h95.72l73.16 128.04C211.98 300.98 232.4 288 256 288h.28L192 175.51V128h224V64H192V32zM608 0H480c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32z",key:"k0"}))}));zh.displayName="ProjectDiagram";var Vh=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 576 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z",key:"k0"}))}));Vh.displayName="ExclamationTriangle";const Gh=_.e.div.withConfig({displayName:"NodeIssuesIcon__IssuesTooltipContainer",componentId:"p726rq-0"})(['display:inline-block;pointer-events:none;background-color:rgba(21,23,27,0.9);border-radius:3px;padding:8px;max-width:320px;overflow:hidden;overflow-wrap:break-word;user-select:none;h6{font-size:14px;}ul{margin-top:4px;}li{margin-bottom:4px;margin-left:4px;font-family:"Lucida Console",Monaco,monospace;font-size:12px;}']),Hh=Object(_.e)(Vh).withConfig({displayName:"NodeIssuesIcon__IssueIcon",componentId:"p726rq-1"})(["color:",";"],e=>e.color);function Wh({node:e}){const t=Object(u.useContext)(_.a),n=Object(u.useMemo)(()=>({warning:t.yellow,error:t.red}),[t]),r=Object(u.useCallback)(()=>h.a.createElement(Gh,null,h.a.createElement("h6",null,"Issues:"),h.a.createElement("ul",null,e.issues.map((e,t)=>h.a.createElement("li",{key:t},h.a.createElement(Hh,{size:12,color:n[e.severity]})," ",e.message)))),[e,n]);let i="warning";for(const t of e.issues)if("error"===t.severity){i="error";break}return h.a.createElement(be,{renderContent:r},h.a.createElement(Hh,{size:14,color:n[i]}))}function qh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qh(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Wh.propTypes={node:p.a.object.isRequired};const Yh={multiple:!0,accepts:jl.b};function Xh({node:e}){return e}const Kh=_.e.div.withConfig({displayName:"HierarchyPanelContainer__PanelContainer",componentId:"aw2wf4-0"})(["outline:none;user-select:none;width:100%;position:relative;display:flex;flex-direction:column;color:",";flex:1;"],e=>e.theme.text2),Zh=_.e.li.withConfig({displayName:"HierarchyPanelContainer__TreeDepthContainer",componentId:"aw2wf4-1"})([""]);function Qh(e,t){return t.nodes[e].object.id}function ed(e){return"hierarchy-node-"+e.id}const td=_.e.div.withConfig({displayName:"HierarchyPanelContainer__TreeNodeContainer",componentId:"aw2wf4-2"})(["display:flex;flex-direction:column;outline:none;overflow:hidden;background-color:",";border-bottom:",";color:",";:hover,:focus{background-color:",";color:",";}:active{background-color:",";color:",";}"],(function({root:e,selected:t,active:n,theme:r}){return t?n?r.bluePressed:r.selected:e?r.panel2:r.panel}),e=>e.root?e.theme.borderStyle:"none",e=>e.selected||e.focused?e.theme.text:e.theme.text2,e=>e.selected?e.theme.blueHover:e.theme.hover,e=>e.theme.text,e=>e.theme.bluePressed,e=>e.theme.text),nd=_.e.div.withConfig({displayName:"HierarchyPanelContainer__TreeNodeSelectTarget",componentId:"aw2wf4-3"})(["display:flex;flex:1;padding:2px 4px 2px 0;"]),rd=_.e.div.withConfig({displayName:"HierarchyPanelContainer__TreeNodeLabelContainer",componentId:"aw2wf4-4"})(["display:flex;flex:1;"]),id=_.e.div.withConfig({displayName:"HierarchyPanelContainer__TreeNodeContent",componentId:"aw2wf4-5"})(["outline:none;display:flex;padding-right:8px;padding-left:",";"],e=>8*e.depth+2+"px"),od=_.e.div.withConfig({displayName:"HierarchyPanelContainer__TreeNodeToggle",componentId:"aw2wf4-6"})(["padding:2px 4px;margin:0 4px;:hover{color:",";background-color:",";border-radius:3px;}"],e=>e.theme.text,e=>e.theme.hover2),ad=_.e.div.withConfig({displayName:"HierarchyPanelContainer__TreeNodeLeafSpacer",componentId:"aw2wf4-7"})(["width:20px;"]),sd=_.e.div.withConfig({displayName:"HierarchyPanelContainer__TreeNodeIcon",componentId:"aw2wf4-8"})(["width:12px;height:12px;margin:2px 4px;"]),ld=_.e.div.withConfig({displayName:"HierarchyPanelContainer__TreeNodeLabel",componentId:"aw2wf4-9"})(["background-color:",";color:",";border-radius:4px;padding:0 2px;"],e=>e.isOver&&e.canDrop?"rgba(255, 255, 255, 0.3)":"transparent",e=>e.isOver&&e.canDrop?e.theme.text:"inherit");const cd=_.e.div.withConfig({displayName:"HierarchyPanelContainer__TreeNodeDropTarget",componentId:"aw2wf4-10"})(["height:4px;box-sizing:content-box;",";margin-left:","px;"],(function({isOver:e,canDrop:t,position:n}){return e&&t?`border-${"before"===n?"top":"bottom"}: 2px solid rgba(255, 255, 255, 0.3)`:""}),e=>e.depth>0?8*e.depth+20:0),ud=_.e.input.withConfig({displayName:"HierarchyPanelContainer__TreeNodeRenameInput",componentId:"aw2wf4-11"})(["position:absolute;top:-3px;background-color:",";color:",";border:",";padding:2px 4px;"],e=>e.theme.inputBackground,e=>e.theme.text,e=>e.theme.borderStyle),hd=_.e.div.withConfig({displayName:"HierarchyPanelContainer__TreeNodeRenameInputContainer",componentId:"aw2wf4-12"})(["position:relative;height:15px;"]);function dd(e,t){return!Object(jo.a)(e,e=>e!==t)}function pd({index:e,data:{nodes:t,renamingNode:n,onToggle:r,onKeyDown:i,onMouseDown:o,onClick:a,onChangeName:s,onRenameSubmit:l,onUpload:c},style:d}){const p=t[e],{isLeaf:f,object:m,depth:g,selected:v,active:y,iconComponent:_,isCollapsed:b,childIndex:x,lastChild:S}=p,w=Object(u.useContext)(Zs),E=Object(u.useCallback)(e=>{e.stopPropagation(),r&&r(e,p)},[r,p]),T=Object(u.useCallback)(e=>{e.stopPropagation(),i&&i(e,p)},[i,p]),M=Object(u.useCallback)(e=>{"Escape"===e.key?l(p,null):"Enter"===e.key&&l(p,e.target.value)},[l,p]),C=Object(u.useCallback)(e=>{a(e,p)},[p,a]),$=Object(u.useCallback)(e=>{o(e,p)},[p,o]),O=Object(u.useCallback)(e=>{s(p,e.target.value)},[p,s]),A=Object(u.useCallback)(e=>{l(p,e.target.value)},[l,p]),I=n&&n.id===p.id,[P,L,k]=Uc({item:{type:El.Node},begin(){const e=w.selected.length>1;return{type:El.Node,multiple:e,value:e?w.selected:w.selected[0]}},canDrag:()=>!w.selected.some(e=>!e.parent),collect:e=>({isDragging:!!e.isDragging()})});Object(u.useEffect)(()=>{k(Bc(),{captureDraggingState:!0})},[k]);const[{canDropBefore:R,isOverBefore:D},j]=wl({accept:[El.Node,El.File,...Tl],drop(e){e.files?c(e.files).then(e=>{if(e)for(const t of e)w.addMedia(t.url,m.parent,m)}):Cl(w,e,m.parent,m)||(e.multiple?w.reparentMultiple(e.value,m.parent,m):w.reparent(e.value,m.parent,m))},canDrop:(e,t)=>!(!t.isOver()||!m.parent)&&(!!Ml(e)||(e.type!==El.Node||m.parent&&!(e.multiple?e.value.some(e=>dd(e,m)):dd(e.value,m)))),collect:e=>({canDropBefore:e.canDrop(),isOverBefore:e.isOver()})}),[{canDropAfter:N,isOverAfter:F},U]=wl({accept:[El.Node,El.File,...Tl],drop(e){const t=!S&&m.parent.children[x+1];e.files?c(e.files).then(e=>{if(e)for(const n of e)w.addMedia(n.url,m.parent,t)}):Cl(w,e,m.parent,t)||(e.multiple?w.reparentMultiple(e.value,m.parent,t):w.reparent(e.value,m.parent,t))},canDrop:(e,t)=>!(!t.isOver()||!m.parent)&&(!!Ml(e)||(e.type!==El.Node||m.parent&&!(e.multiple?e.value.some(e=>dd(e,m)):dd(e.value,m)))),collect:e=>({canDropAfter:e.canDrop(),isOverAfter:e.isOver()})}),[{canDropOn:B,isOverOn:z},V]=wl({accept:[El.Node,El.File,...Tl],drop(e){e.files?c(e.files).then(e=>{if(e)for(const t of e)w.addMedia(t.url,m)}):Cl(w,e,m)||(e.multiple?w.reparentMultiple(e.value,m):w.reparent(e.value,m))},canDrop:(e,t)=>!!t.isOver()&&(!!Ml(e)||(e.type!==El.Node||!(e.multiple?e.value.some(e=>dd(e,m)):dd(e.value,m)))),collect:e=>({canDropOn:e.canDrop(),isOverOn:e.isOver()})});return h.a.createElement(Zh,{style:d},h.a.createElement(Z.b,{holdToDisplay:-1,id:"hierarchy-node-menu",node:p,collect:Xh},h.a.createElement(td,{ref:L,id:ed(p),onMouseDown:$,onClick:C,tabIndex:"0",onKeyDown:T,root:0===g,selected:v,active:y},h.a.createElement(cd,{ref:j,depth:g,position:"before",canDrop:R,isOver:D}),h.a.createElement(id,{depth:g,ref:V},f?h.a.createElement(ad,null):h.a.createElement(od,{collapsed:b,onClick:E},b?h.a.createElement(rc,{size:12}):h.a.createElement(ic,{size:12})),h.a.createElement(nd,null,h.a.createElement(sd,{as:_}),h.a.createElement(rd,null,I?h.a.createElement(hd,null,h.a.createElement(ud,{type:"text",onChange:O,onKeyDown:M,onBlur:A,value:n.name,autoFocus:!0})):h.a.createElement(ld,{canDrop:B,isOver:z},m.name)),p.object.issues.length>0&&h.a.createElement(Wh,{node:p.object}))),h.a.createElement(cd,{depth:g,ref:U,position:"after",canDrop:N,isOver:F}))))}pd.propTypes={data:p.a.shape({nodes:p.a.arrayOf(p.a.shape({id:p.a.any.isRequired,object:p.a.object.isRequired,isLeaf:p.a.bool,depth:p.a.number,selected:p.a.bool,active:p.a.bool,iconComponent:p.a.object,isCollapsed:p.a.bool,childIndex:p.a.number.isRequired,lastChild:p.a.bool.isRequired})),renamingNode:p.a.object,onRenameSubmit:p.a.func.isRequired,onChangeName:p.a.func.isRequired,onMouseDown:p.a.func.isRequired,onClick:p.a.func.isRequired,onToggle:p.a.func.isRequired,onKeyDown:p.a.func.isRequired,onUpload:p.a.func.isRequired}),index:p.a.number,style:p.a.object.isRequired,isScrolling:p.a.bool};const fd=Object(u.memo)(pd,Uh);function md(){const e=Object(u.useContext)(Zs),t=Nl(Yh),[n,r]=Object(u.useState)(null),[i,o]=Object(u.useState)({}),[a,s]=Object(u.useState)([]),l=Object(u.useCallback)(()=>{s(Array.from(function*(e,t){const n=[];for(n.push({depth:0,object:e.scene,childIndex:0,lastChild:!0});0!==n.length;){const{depth:r,object:i,childIndex:o,lastChild:a}=n.pop(),s=(e.getNodeEditor(i)||_h).iconComponent||_h.iconComponent,l=t[i.id];if(yield{id:i.id,isLeaf:0===i.children.filter(e=>e.isNode).length,isCollapsed:l,depth:r,object:i,iconComponent:s,selected:-1!==e.selected.indexOf(i),active:e.selected.length>0&&i===e.selected[e.selected.length-1],childIndex:o,lastChild:a},0!==i.children.length&&!l)for(let e=i.children.length-1;e>=0;e--){const t=i.children[e];t.isNode&&n.push({depth:r+1,object:t,childIndex:e,lastChild:0===e})}}}(e,i)))},[e,i]),c=Object(u.useCallback)(e=>{delete i[e.id],o(Jh({},i))},[i]),d=Object(u.useCallback)(e=>{o(Jh(Jh({},i),{},{[e.id]:!0}))},[o,i]),p=Object(u.useCallback)(e=>{e.object.traverse(e=>{e.isNode&&delete i[e.id]}),o(Jh({},i))},[o,i]),f=Object(u.useCallback)(e=>{e.object.traverse(e=>{e.isNode&&(i[e.id]=!0)}),o(Jh({},i))},[o,i]),m=Object(u.useCallback)(()=>{o({})},[o]),g=Object(u.useCallback)(()=>{const t={};e.scene.traverse(e=>{e.isNode&&(t[e.id]=!0)}),o(t)},[e,o]),v=Object(u.useCallback)((e,t)=>{"name"!==t&&t||l()},[l]);Object(u.useEffect)(()=>(e.addListener("sceneGraphChanged",l),e.addListener("selectionChanged",l),e.addListener("objectsChanged",v),()=>{e.removeListener("sceneGraphChanged",l),e.removeListener("selectionChanged",l),e.removeListener("objectsChanged",v)}),[e,l,v]);const y=Object(u.useCallback)((t,n)=>{1===t.detail&&(t.shiftKey?e.toggleSelection(n.object):n.selected||e.setSelection([n.object]))},[e]),_=Object(u.useCallback)((t,n)=>{2===t.detail?e.spokeControls.focus([n.object]):t.shiftKey||e.setSelection([n.object])},[e]),b=Object(u.useCallback)((e,t)=>{i[t.id]?c(t):d(t)},[i,c,d]),x=Object(u.useCallback)((t,n)=>{if("ArrowDown"===t.key){t.preventDefault();const r=a.indexOf(n),i=-1!==r&&a[r+1];if(i){t.shiftKey&&e.select(i.object);const n=document.getElementById(ed(i));n&&n.focus()}}else if("ArrowUp"===t.key){t.preventDefault();const r=a.indexOf(n),i=-1!==r&&a[r-1];if(i){t.shiftKey&&e.select(i.object);const n=document.getElementById(ed(i));n&&n.focus()}}else"ArrowLeft"===t.key&&n.object.children.filter(e=>e.isNode).length>0?t.shiftKey?f(n):d(n):"ArrowRight"===t.key&&n.object.children.filter(e=>e.isNode).length>0?t.shiftKey?p(n):n.object.children.filter(e=>e.isNode).length>0&&c(n):"Enter"===t.key&&(t.shiftKey?e.toggleSelection(n.object):e.setSelection([n.object]))},[a,e,c,d,p,f]),S=Object(u.useCallback)((t,n)=>{n.selected?e.removeSelectedObjects():e.removeObject(n.object)},[e]),w=Object(u.useCallback)((t,n)=>{n.selected?e.duplicateSelected():e.duplicate(n.object)},[e]),E=Object(u.useCallback)((t,n)=>{n.selected?e.groupSelected():e.groupMultiple([n.object])},[e]),T=Object(u.useCallback)((e,t)=>{r({id:t.id,name:t.object.name})},[r]),M=Object(u.useCallback)((e,t)=>{r({id:e.id,name:t})},[r]),C=Object(u.useCallback)((t,n)=>{null!==n&&e.setProperty(t.object,"name",n),r(null)},[e]),[,$]=wl({accept:[El.Node,El.File,...Tl],drop(n,r){r.didDrop()||(n.files?t(n.files).then(t=>{if(t)for(const n of t)e.addMedia(n.url)}):Cl(e,n)||(n.multiple?e.reparentMultiple(n.value,e.scene):e.reparent(n.value,e.scene)))},canDrop:(t,n)=>!!n.isOver({shallow:!0})&&(!!Ml(t)||(t.type!==El.Node||!(t.multiple?t.value.some(t=>dd(t,e.scene)):dd(t.value,e.scene))))});return Object(u.useEffect)(()=>{l()},[i,l]),h.a.createElement(Th,{id:"hierarchy-panel",title:"Hierarchy",icon:zh},h.a.createElement(Kh,null,e.scene&&h.a.createElement(Bh.a,null,({height:e,width:r})=>h.a.createElement(Nh,{height:e,width:r,itemSize:32,itemCount:a.length,itemData:{renamingNode:n,nodes:a,onKeyDown:x,onChangeName:M,onRenameSubmit:C,onMouseDown:y,onClick:_,onToggle:b,onUpload:t},itemKey:Qh,outerRef:$,innerElementType:"ul"},fd))),h.a.createElement(Z.a,{id:"hierarchy-node-menu"},h.a.createElement(Z.c,{onClick:T},"Rename"),h.a.createElement(Z.c,{onClick:w},"Duplicate",h.a.createElement("div",null,ar.d+"+ D")),h.a.createElement(Z.c,{onClick:E},"Group",h.a.createElement("div",null,ar.d+"+ G")),h.a.createElement(Z.c,{onClick:S},"Delete"),h.a.createElement(Z.c,{onClick:m},"Expand All"),h.a.createElement(Z.c,{onClick:g},"Collapse All")))}var gd=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M496 384H160v-16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h80v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h336c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm0-160h-80v-16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h336v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h80c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm0-160H288V48c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16C7.2 64 0 71.2 0 80v32c0 8.8 7.2 16 16 16h208v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h208c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16z",key:"k0"}))}));gd.displayName="SlidersH";var vd=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 448c-110.532 0-200-89.431-200-200 0-110.495 89.472-200 200-200 110.491 0 200 89.471 200 200 0 110.53-89.431 200-200 200zm107.244-255.2c0 67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C184.846 131.491 214.94 112 261.794 112c49.071 0 101.45 38.304 101.45 88.8zM298 368c0 23.159-18.841 42-42 42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z",key:"k0"}))}));vd.displayName="QuestionCircle";const yd=_.e.div.withConfig({displayName:"InputGroup__InputGroupContainer",componentId:"sc-1oh2bal-0"})(["display:flex;flex-direction:row;padding:4px 8px;flex:1;min-height:24px;"," & > label{display:block;width:25%;color:",";padding-bottom:2px;padding-top:4px;}"],e=>e.disabled&&"\n    pointer-events: none;\n    opacity: 0.3;\n  ",e=>e.theme.text2),_d=_.e.div.withConfig({displayName:"InputGroup__InputGroupContent",componentId:"sc-1oh2bal-1"})(["display:flex;flex-direction:row;flex:1;padding-left:8px;"]),bd=Object(_.e)(vd).withConfig({displayName:"InputGroup__InputGroupInfoIcon",componentId:"sc-1oh2bal-2"})(["width:20px;display:flex;padding-left:8px;color:",";cursor:pointer;align-self:center;"],e=>e.theme.blue);function xd({info:e}){return h.a.createElement(Se,{info:e},h.a.createElement(bd,null))}function Sd(e){let{name:t,children:n,disabled:r,info:i}=e,o=K()(e,["name","children","disabled","info"]);return h.a.createElement(yd,s()({disabled:r},o),h.a.createElement("label",null,t,":"),h.a.createElement(_d,null,n,i&&h.a.createElement(xd,{info:i})))}xd.propTypes={info:p.a.string},Sd.propTypes={name:p.a.string,children:p.a.any,disabled:p.a.bool,className:p.a.string,info:p.a.string};var wd=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M377.941 169.941V216H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.568 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296h243.882v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.568 0-33.941l-86.059-86.059c-15.119-15.12-40.971-4.412-40.971 16.97z",key:"k0"}))}));wd.displayName="ArrowsAltH";var Ed=_.e.div.withConfig({displayName:"Overlay",componentId:"sc-1m3vp99-0"})(["position:fixed;left:0;right:0;top:0;bottom:0;pointer-events:",";"],e=>e.pointerEvents||"inherit");function Td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Md(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Td(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Td(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Cd=_.e.div.withConfig({displayName:"Scrubber__ScrubberContainer",componentId:"sc-15svodj-0"})(["cursor:ew-resize;user-select:none;"]),$d=Object(_.e)(wd).attrs(({x:e,y:t})=>({style:{transform:`translate(${e}px,${t}px)`}})).withConfig({displayName:"Scrubber__Cursor",componentId:"sc-15svodj-1"})(["position:absolute;width:20px;path{stroke:white;stroke-width:20px;fill:black;}"]);class Od extends u.Component{constructor(e){super(e),c()(this,"handleMouseMove",e=>{const t=this.state,{smallStep:n,mediumStep:r,largeStep:i,sensitivity:o,min:a,max:s,precision:l,convertTo:c,onChange:u}=this.props;if(t.isDragging){const h=t.mouseX+e.movementX,d=t.mouseY+e.movementY,p=t.delta+e.movementX,f=Object(ar.e)(e,n,r,i),m=t.startValue+Math.round(p/o)*f,g=Object(ar.c)(m,a,s);u(c(l?Object(ar.g)(g,l):g)),this.setState(Md(Md({},t),{},{delta:p,mouseX:h,mouseY:d}))}}),c()(this,"handleMouseDown",e=>{const{convertFrom:t,value:n}=this.props;this.setState({isDragging:!0,startValue:t(n),delta:0,mouseX:e.clientX,mouseY:e.clientY}),this.scrubberEl.current.requestPointerLock(),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mouseup",this.handleMouseUp)}),c()(this,"handleMouseUp",()=>{const{onCommit:e,onChange:t,value:n}=this.props;this.state.isDragging&&(this.setState({isDragging:!1,startValue:null,delta:null,mouseX:null,mouseY:null}),e?e(n):t(n),document.exitPointerLock()),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp)}),this.scrubberEl=Object(u.createRef)(),this.state={isDragging:!1,startValue:null,delta:null,mouseX:null,mouseY:null}}componentWillUnmount(){window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp)}render(){const e=this.props,{tag:t,children:n,smallStep:r,mediumStep:i,largeStep:o,sensitivity:a,min:l,max:c,precision:u,convertFrom:d,convertTo:p,value:f,onChange:m,onCommit:g}=e,v=K()(e,["tag","children","smallStep","mediumStep","largeStep","sensitivity","min","max","precision","convertFrom","convertTo","value","onChange","onCommit"]),{isDragging:y,mouseX:_,mouseY:b}=this.state;return h.a.createElement(Cd,s()({as:t,ref:this.scrubberEl,onMouseDown:this.handleMouseDown},v),n,y&&h.a.createElement(te,null,h.a.createElement(Ed,{pointerEvents:"none"},h.a.createElement($d,{x:_,y:b}))))}}Od.propTypes={tag:p.a.string,children:p.a.node,className:p.a.string,smallStep:p.a.number.isRequired,mediumStep:p.a.number.isRequired,largeStep:p.a.number.isRequired,sensitivity:p.a.number.isRequired,min:p.a.number.isRequired,max:p.a.number.isRequired,precision:p.a.number,value:p.a.number.isRequired,onChange:p.a.func.isRequired,onCommit:p.a.func,convertFrom:p.a.func.isRequired,convertTo:p.a.func.isRequired},Od.defaultProps={tag:"label",smallStep:.025,mediumStep:.1,largeStep:.25,sensitivity:5,min:-1/0,max:1/0,convertFrom:e=>e,convertTo:e=>e};var Ad=h.a.memo(Od),Id=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 01-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0120.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0020.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 00-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z",key:"k0"}))}));Id.displayName="Link";var Pd=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M304.083 405.907c4.686 4.686 4.686 12.284 0 16.971l-44.674 44.674c-59.263 59.262-155.693 59.266-214.961 0-59.264-59.265-59.264-155.696 0-214.96l44.675-44.675c4.686-4.686 12.284-4.686 16.971 0l39.598 39.598c4.686 4.686 4.686 12.284 0 16.971l-44.675 44.674c-28.072 28.073-28.072 73.75 0 101.823 28.072 28.072 73.75 28.073 101.824 0l44.674-44.674c4.686-4.686 12.284-4.686 16.971 0l39.597 39.598zm-56.568-260.216c4.686 4.686 12.284 4.686 16.971 0l44.674-44.674c28.072-28.075 73.75-28.073 101.824 0 28.072 28.073 28.072 73.75 0 101.823l-44.675 44.674c-4.686 4.686-4.686 12.284 0 16.971l39.598 39.598c4.686 4.686 12.284 4.686 16.971 0l44.675-44.675c59.265-59.265 59.265-155.695 0-214.96-59.266-59.264-155.695-59.264-214.961 0l-44.674 44.674c-4.686 4.686-4.686 12.284 0 16.971l39.597 39.598zm234.828 359.28l22.627-22.627c9.373-9.373 9.373-24.569 0-33.941L63.598 7.029c-9.373-9.373-24.569-9.373-33.941 0L7.029 29.657c-9.373 9.373-9.373 24.569 0 33.941l441.373 441.373c9.373 9.372 24.569 9.372 33.941 0z",key:"k0"}))}));Pd.displayName="Unlink";var Ld=n(289);const kd=_.e.div.withConfig({displayName:"Vector3Input__Vector3InputContainer",componentId:"nc88aw-0"})(["display:flex;flex-direction:row;flex:1 1 auto;width:70%;justify-content:flex-start;"]),Rd=Object(_.e)(Ad).withConfig({displayName:"Vector3Input__Vector3Scrubber",componentId:"nc88aw-1"})(["display:flex;align-items:center;padding:0 8px;color:",";"],e=>e.theme.text2),Dd=_.e.div.withConfig({displayName:"Vector3Input__UniformButtonContainer",componentId:"nc88aw-2"})(["display:flex;align-items:center;svg{width:12px;}label{color:",";}label:hover{color:",";}"],e=>e.theme.text2,e=>e.theme.blueHover);let jd=0;class Nd extends u.Component{constructor(e){super(e),c()(this,"onToggleUniform",()=>{this.setState({uniformEnabled:!this.state.uniformEnabled})}),c()(this,"onChange",(e,t)=>{const n=this.props.value;if(this.state.uniformEnabled)this.newValue.set(t,t,t);else{const r=n?n.x:0,i=n?n.y:0,o=n?n.z:0;this.newValue.x="x"===e?t:r,this.newValue.y="y"===e?t:i,this.newValue.z="z"===e?t:o}this.props.onChange(this.newValue)}),c()(this,"onChangeX",e=>this.onChange("x",e)),c()(this,"onChangeY",e=>this.onChange("y",e)),c()(this,"onChangeZ",e=>this.onChange("z",e)),this.id=jd++,this.newValue=new Mr.ec,this.state={uniformEnabled:e.uniformScaling}}render(){const e=this.props,{uniformScaling:t,value:n,onChange:r}=e,i=K()(e,["uniformScaling","value","onChange"]),{uniformEnabled:o}=this.state,a=n?n.x:0,l=n?n.y:0,c=n?n.z:0,u="uniform-button-"+this.id;return h.a.createElement(kd,null,t&&h.a.createElement(Dd,null,h.a.createElement(Ld.a,{as:"input",id:u,type:"checkbox",checked:o,onChange:this.onToggleUniform}),h.a.createElement("label",{title:"Uniform Scale",htmlFor:u},o?h.a.createElement(Id,null):h.a.createElement(Pd,null))),h.a.createElement(Rd,s()({},i,{tag:"div",value:a,onChange:this.onChangeX}),"X:"),h.a.createElement(hr,s()({},i,{value:a,onChange:this.onChangeX})),h.a.createElement(Rd,s()({},i,{tag:"div",value:l,onChange:this.onChangeY}),"Y:"),h.a.createElement(hr,s()({},i,{value:l,onChange:this.onChangeY})),h.a.createElement(Rd,s()({},i,{tag:"div",value:c,onChange:this.onChangeZ}),"Z:"),h.a.createElement(hr,s()({},i,{value:c,onChange:this.onChangeZ})))}}c()(Nd,"propTypes",{uniformScaling:p.a.bool,value:p.a.object,onChange:p.a.func}),c()(Nd,"defaultProps",{value:new Mr.ec,onChange:()=>{}});const{RAD2DEG:Fd,DEG2RAD:Ud}=Mr.bb;class Bd extends u.Component{constructor(...e){super(...e),c()(this,"onChange",(e,t,n)=>{this.props.onChange(new Mr.x(e*Ud,t*Ud,n*Ud))})}render(){const e=this.props,{value:t,onChange:n}=e,r=K()(e,["value","onChange"]),i=t?(t.x||0)*Fd:0,o=t?(t.y||0)*Fd:0,a=t?(t.z||0)*Fd:0;return h.a.createElement(kd,null,h.a.createElement(Rd,s()({},r,{tag:"div",value:i,onChange:e=>this.onChange(e,o,a)}),"X:"),h.a.createElement(hr,s()({},r,{value:i,onChange:e=>this.onChange(e,o,a)})),h.a.createElement(Rd,s()({},r,{tag:"div",value:o,onChange:e=>this.onChange(i,e,a)}),"Y:"),h.a.createElement(hr,s()({},r,{value:o,onChange:e=>this.onChange(i,e,a)})),h.a.createElement(Rd,s()({},r,{tag:"div",value:a,onChange:e=>this.onChange(i,o,e)}),"Z:"),h.a.createElement(hr,s()({},r,{value:a,onChange:e=>this.onChange(i,o,e)})))}}c()(Bd,"propTypes",{value:p.a.shape({x:p.a.number,y:p.a.number,z:p.a.number}),onChange:p.a.func}),c()(Bd,"defaultProps",{value:new Mr.x,onChange:()=>{},smallStep:.1,mediumStep:1,largeStep:5});class zd extends u.Component{constructor(e){super(e),c()(this,"onObjectsChanged",(e,t)=>{for(let n=0;n<e.length;n++)if(e[n]===this.props.node&&("position"===t||"rotation"===t||"scale"===t||"matrix"===t||null==t))return void this.forceUpdate()}),c()(this,"onChangePosition",e=>{this.translation.subVectors(e,this.props.node.position),this.props.editor.translateSelected(this.translation)}),c()(this,"onChangeRotation",e=>{this.props.editor.setRotationSelected(e)}),c()(this,"onChangeScale",e=>{this.props.editor.setScaleSelected(e)}),this.translation=new Mr.ec}shouldComponentUpdate(e){return e.node!==this.props.node}componentDidMount(){this.props.editor.addListener("objectsChanged",this.onObjectsChanged)}componentWillUnmount(){this.props.editor.removeListener("objectsChanged",this.onObjectsChanged)}render(){const{node:e}=this.props;return h.a.createElement(gh,{name:"Transform"},h.a.createElement(Sd,{name:"Position"},h.a.createElement(Nd,{value:e.position,smallStep:.01,mediumStep:.1,largeStep:1,onChange:this.onChangePosition})),h.a.createElement(Sd,{name:"Rotation"},h.a.createElement(Bd,{value:e.rotation,onChange:this.onChangeRotation,unit:"°"})),h.a.createElement(Sd,{name:"Scale"},h.a.createElement(Nd,{uniformScaling:!0,smallStep:.01,mediumStep:.1,largeStep:1,value:e.scale,onChange:this.onChangeScale})))}}c()(zd,"propTypes",{editor:p.a.object,node:p.a.object});var Vd=n(40);const Gd=Object(_.e)(Sd).withConfig({displayName:"NameInputGroup__StyledNameInputGroup",componentId:"sc-1u1perw-0"})(["label{width:auto !important;padding-right:8px;}"]);class Hd extends u.Component{constructor(e){super(e),c()(this,"onUpdateName",e=>{this.setState({name:e})}),c()(this,"onFocus",()=>{this.setState({focusedNode:this.props.node,name:this.props.node.name})}),c()(this,"onBlurName",()=>{this.props.node.name!==this.state.name&&this.props.node===this.state.focusedNode&&this.props.editor.setPropertySelected("name",this.state.name),this.setState({focusedNode:null})}),c()(this,"onKeyUpName",e=>{"Enter"===e.key&&(e.preventDefault(),this.props.editor.setPropertySelected("name",this.state.name))}),this.state={name:this.props.node.name,focusedNode:null}}render(){const e=this.state.focusedNode?this.state.name:this.props.node.name;return h.a.createElement(Gd,{name:"Name"},h.a.createElement(Vd.b,{value:e,onChange:this.onUpdateName,onFocus:this.onFocus,onBlur:this.onBlurName,onKeyUp:this.onKeyUpName}))}}c()(Hd,"propTypes",{editor:p.a.object.isRequired,node:p.a.object.isRequired});var Wd=n(55);const qd=_.e.div.withConfig({displayName:"PropertiesPanelContainer__StyledNodeEditor",componentId:"ku0xfn-0"})(["display:flex;flex:1;flex-direction:column;"]),Jd=_.e.div.withConfig({displayName:"PropertiesPanelContainer__PropertiesHeader",componentId:"ku0xfn-1"})(["background-color:",";border:none !important;padding-bottom:0 !important;"],e=>e.theme.panel2),Yd=_.e.div.withConfig({displayName:"PropertiesPanelContainer__NameInputGroupContainer",componentId:"ku0xfn-2"})(["display:flex;flex-flow:row wrap;align-items:flex-start;padding:8px 0;"]),Xd=Object(_.e)(Sd).withConfig({displayName:"PropertiesPanelContainer__VisibleInputGroup",componentId:"ku0xfn-3"})(["display:flex;flex:0;& > label{width:auto !important;padding-right:8px;}"]),Kd=_.e.div.withConfig({displayName:"PropertiesPanelContainer__PropertiesPanelContent",componentId:"ku0xfn-4"})(["display:flex;flex-direction:column;flex:1;overflow-y:auto;"]),Zd=_.e.div.withConfig({displayName:"PropertiesPanelContainer__NoNodeSelectedMessage",componentId:"ku0xfn-5"})(["display:flex;justify-content:center;align-items:center;height:100%;"]);class Qd extends u.Component{constructor(e){super(e),c()(this,"onSelectionChanged",()=>{this.setState({selected:this.props.editor.selected})}),c()(this,"onObjectsChanged",(e,t)=>{const n=this.props.editor.selected;if("position"!==t&&"rotation"!==t&&"scale"!==t&&"matrix"!==t)for(let t=0;t<e.length;t++)if(-1!==n.indexOf(e[t]))return void this.setState({selected:this.props.editor.selected})}),c()(this,"onChangeVisible",e=>{this.props.editor.setPropertySelected("visible",e)}),this.state={selected:e.editor.selected}}componentDidMount(){const e=this.props.editor;e.addListener("selectionChanged",this.onSelectionChanged),e.addListener("objectsChanged",this.onObjectsChanged)}componentWillUnmount(){const e=this.props.editor;e.removeListener("selectionChanged",this.onSelectionChanged),e.removeListener("objectsChanged",this.onObjectsChanged)}render(){const e=this.props.editor,t=this.state.selected;let n;if(0===t.length)n=h.a.createElement(Zd,null,"No node selected");else{const r=t[t.length-1],i=e.getNodeEditor(r)||_h,o=t.length>1;let a,s=!0;for(let n=0;n<t.length-1;n++)if(e.getNodeEditor(t[n])!==i){s=!1;break}a=s?h.a.createElement(i,{multiEdit:o,node:r,editor:e}):h.a.createElement(Zd,null,"Multiple Nodes of different types selected");const l=t.some(e=>e.disableTransform);n=h.a.createElement(qd,null,h.a.createElement(Jd,null,h.a.createElement(Yd,null,h.a.createElement(Hd,{node:r,editor:e}),"Scene"!==r.nodeName&&h.a.createElement(Xd,{name:"Visible"},h.a.createElement(Wd.a,{value:r.visible,onChange:this.onChangeVisible}))),!l&&h.a.createElement(zd,{node:r,editor:e})),a)}return h.a.createElement(Th,{id:"properties-panel",title:"Properties",icon:gd},h.a.createElement(Kd,null,n))}}c()(Qd,"propTypes",{editor:p.a.object});var ep=el(Qd),tp=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M464 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-16 160H64v-84c0-6.6 5.4-12 12-12h360c6.6 0 12 5.4 12 12v84z",key:"k0"}))}));tp.displayName="WindowMaximize";const np=_.c`
  body {
    cursor: ${e=>e.resizing?"y"===e.axis?"ns-resize":"ew-resize":"inherit"};
  }
`,rp=_.e.div.withConfig({displayName:"Resizeable__HorizontalContainer",componentId:"sc-1giviil-0"})(["display:flex;flex:1;overflow:hidden;"]),ip=_.e.div.withConfig({displayName:"Resizeable__HorizontalResizer",componentId:"sc-1giviil-1"})(["display:flex;height:6px;:hover{cursor:ns-resize;}:active,:hover{background-color:",";}"],e=>e.theme.hover),op=_.e.div.withConfig({displayName:"Resizeable__VerticalContainer",componentId:"sc-1giviil-2"})(["display:flex;flex:1;flex-direction:column;overflow:hidden;"]),ap=_.e.div.withConfig({displayName:"Resizeable__VerticalResizer",componentId:"sc-1giviil-3"})(["display:flex;width:6px;:hover{cursor:ew-resize;}:hover,:active{background-color:",";}"],e=>e.theme.hover),sp=_.e.div.attrs(e=>({style:{flex:void 0===e.size?1:e.size}})).withConfig({displayName:"Resizeable__ResizeContainer",componentId:"sc-1giviil-4"})(["display:flex;overflow:hidden;"]);class lp extends u.Component{constructor(e){let t;if(super(e),c()(this,"onMouseDown",(e,t)=>{this.setState({index:t,resizing:!0}),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("blur",this.onMouseUp)}),c()(this,"onMouseMove",e=>{const{axis:t,min:n}=this.props,{index:r,sizes:i}=this.state,o=this.containerRef.current.getBoundingClientRect(),a=this.itemRefs[r].getBoundingClientRect(),s=i[r]+i[r+1];let l;l="y"===t?(e.pageY-a.top)/o.height:(e.pageX-a.left)/o.width,l=Math.min(Math.max(l,n),s-n),i[r]=l,i[r+1]=s-l,this.setState({sizes:i},()=>{this.props.onChange&&this.props.onChange()})}),c()(this,"onMouseUp",()=>{window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("blur",this.onMouseUp),this.setState({resizing:!1})}),e.initialSizes)t=e.initialSizes;else{const n=u.Children.count(e.children);t=[];for(let e=0;e<n;e++)t.push(1/n)}this.state={sizes:t,index:null,resizing:!1},this.containerRef=Object(u.createRef)(),this.itemRefs=[]}componentWillUnmount(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("blur",this.onMouseUp)}render(){const e=u.Children.toArray(this.props.children),t=[],n="y"===this.props.axis?ip:ap,r="y"===this.props.axis?op:rp;for(let r=0;r<e.length;r++)t.push(h.a.createElement(sp,{ref:e=>this.itemRefs[r]=e,size:this.state.sizes[r],key:"container-"+r},e[r])),r<e.length-1&&t.push(h.a.createElement(n,{onMouseDown:e=>this.onMouseDown(e,r),key:"resizer-"+r}));return h.a.createElement(u.Fragment,null,h.a.createElement(r,{ref:this.containerRef},t),h.a.createElement(np,{resizing:this.state.resizing,axis:this.props.axis}))}}c()(lp,"propTypes",{children:p.a.node,initialSizes:p.a.arrayOf(p.a.number),min:p.a.number.isRequired,axis:p.a.string.isRequired,onChange:p.a.func}),c()(lp,"defaultProps",{min:.2,axis:"y"});var cp=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M500 384c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v308h436zM372.7 159.5L288 216l-85.3-113.7c-5.1-6.8-15.5-6.3-19.9 1L96 248v104h384l-89.9-187.8c-3.2-6.5-11.4-8.7-17.4-4.7z",key:"k0"}))}));cp.displayName="ChartArea";const up=_.e.div.withConfig({displayName:"Stats__StatsContainer",componentId:"sc-13cglsq-0"})(["position:absolute;top:8px;right:8px;color:white;padding:8px;text-shadow:1px 1px 1px rgba(0,0,0,0.5);background-color:rgba(0,0,0,0.5);border-radius:4px;width:150px;h3{font-size:14px;}ul{margin:8px 4px;}"]);function hp({editor:e}){const[t,n]=Object(u.useState)(0);return Object(u.useEffect)(()=>(e.renderer.onUpdateStats=e=>{e.render.frame%3==0&&n({geometries:e.memory.geometries,textures:e.memory.textures,fps:e.render.fps,frameTime:e.render.frameTime,calls:e.render.calls,triangles:e.render.triangles,points:e.render.points,lines:e.render.lines})},()=>{e.renderer.onUpdateStats=void 0}),[e]),h.a.createElement(up,null,h.a.createElement("h3",null,"Stats:"),t&&h.a.createElement("ul",null,h.a.createElement("li",null,"Memory:",h.a.createElement("ul",null,h.a.createElement("li",null,"Geometries: ",t.geometries),h.a.createElement("li",null,"Textures: ",t.textures))),h.a.createElement("li",null,"Render:",h.a.createElement("ul",null,h.a.createElement("li",null,"FPS: ",Math.round(t.fps)),h.a.createElement("li",null,"Frame Time: ",Math.round(t.frameTime),"ms"),h.a.createElement("li",null,"Calls: ",t.calls),h.a.createElement("li",null,"Triangles: ",t.triangles),h.a.createElement("li",null,"Points: ",t.points),h.a.createElement("li",null,"Lines: ",t.lines)))))}function dp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dp(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}hp.propTypes={editor:p.a.object};const fp=_.e.canvas.withConfig({displayName:"ViewportPanelContainer__Viewport",componentId:"a7veb9-0"})(["width:100%;height:100%;position:relative;"]),mp=_.e.div.withConfig({displayName:"ViewportPanelContainer__ViewportContainer",componentId:"a7veb9-1"})(['display:flex;flex:1;position:relative;::after{position:absolute;top:0;bottom:0;left:0;right:0;content:"";pointer-events:none;border:1px solid ',";}"],e=>function(e,t){return e.canDrop?e.theme.blue:e.error?e.theme.error:t}(e,"transparent")),gp=_.e.div.withConfig({displayName:"ViewportPanelContainer__ControlsText",componentId:"a7veb9-2"})(["position:absolute;bottom:0;left:0;pointer-events:none;color:white;padding:8px;text-shadow:1px 1px 1px rgba(0,0,0,0.5);"]),vp=_.e.div.withConfig({displayName:"ViewportPanelContainer__ViewportToolbarContainer",componentId:"a7veb9-3"})(["display:flex;justify-content:flex-end;flex:1;"]),yp=_.e.div.withConfig({displayName:"ViewportPanelContainer__ToolbarIconContainer",componentId:"a7veb9-4"})(["display:flex;justify-content:center;align-items:center;padding:0 8px;border-left:1px solid rgba(255,255,255,0.2);background-color:",";cursor:pointer;:hover{background-color:",";}:active{background-color:",";}"],e=>e.value?e.theme.blue:"transparent",e=>e.value?e.theme.blueHover:e.theme.hover,e=>e.value?e.theme.bluePressed:e.theme.hover2),_p=[.8,.2];function bp(e){let{icon:t,value:n,onClick:r,tooltip:i}=e,o=K()(e,["icon","value","onClick","tooltip"]);const a=Object(u.useCallback)(()=>{r(!n)},[n,r]);return h.a.createElement(Se,{info:i},h.a.createElement(yp,s()({onClick:a,value:n},o),h.a.createElement(t,{size:14})))}bp.propTypes={icon:p.a.elementType,value:p.a.bool,onClick:p.a.func,tooltip:p.a.string};const xp={container:e=>pp(pp({},e),{},{width:"120px"}),control:(e,{isFocused:t,theme:n})=>pp(pp({},e),{},{backgroundColor:"transparent",minHeight:"20px",borderRadius:"0px",borderWidth:"0px 1px",borderStyle:"solid",borderColor:t?n.colors.primary:"rgba(255, 255, 255, 0.2)",cursor:"pointer",outline:"none",boxShadow:"none"})};function Sp({onToggleStats:e,showStats:t}){const n=Object(u.useContext)(Zs),r=n.renderer,[i,o]=Object(u.useState)(r&&r.renderMode),a=r?r.renderModes.map(e=>({label:e.name,value:e})):[];Object(u.useEffect)(()=>{n.addListener("initialized",()=>{o(n.renderer.renderMode)})},[n]);const s=Object(u.useCallback)(e=>{n.renderer.setRenderMode(e),o(e)},[n,o]);return h.a.createElement(vp,null,h.a.createElement(bp,{onClick:e,value:t,tooltip:"Toggle Stats",icon:cp}),h.a.createElement(or,{value:i,options:a,onChange:s,styles:xp}))}function wp(){const e=Object(u.useContext)(Zs),t=Object(u.useRef)(),[n,r]=Object(u.useState)(!1),[i,o]=Object(u.useState)(!1),[a,s]=Object(u.useState)(null),[l,c]=Object(u.useState)(!1),d=Object(u.useCallback)(()=>{o(e.selected.length>0)},[e]),p=Object(u.useCallback)(()=>{r(e.flyControls.enabled)},[e,r]),f=Object(u.useCallback)(e=>{s(e)},[]),m=Object(u.useCallback)(()=>{e.onResize()},[e]),g=Object(u.useCallback)(()=>{e.addListener("selectionChanged",d),e.spokeControls.addListener("flyModeChanged",p),e.spokeControls.addListener("transformModeChanged",f)},[e,d,p,f]);Object(u.useEffect)(()=>(e.addListener("initialized",g),e.initializeRenderer(t.current),()=>{e.removeListener("selectionChanged",d),e.spokeControls&&e.spokeControls.removeListener("flyModeChanged",p),e.renderer&&e.renderer.dispose()}),[e,t,g,d,p]);const[{canDrop:v,isOver:y},_]=wl({accept:[El.Node,...Tl],drop(t,n){const r=n.getClientOffset();t.type!==El.Node?function(e,t,n){if(Ml(t)){const{nodeClass:r,initialProps:i}=t.value,o=new r(e);return i&&Object.assign(o,i),e.getCursorSpawnPosition(n,o.position),e.addObject(o),!0}}(e,t,r):t.multiple?e.reparentToSceneAtCursorPosition(t.value,r):e.reparentToSceneAtCursorPosition([t.value],r)},collect:e=>({canDrop:e.canDrop(),isOver:e.isOver()})}),b=Object(u.useCallback)(t=>{Promise.all(t.map(({url:t})=>{e.addMedia(t)})).catch(t=>{e.emit("error",t)})},[e]);let x;return x=n?"[W][A][S][D] Move Camera | [Shift] Fly faster":"[LMB] Orbit / Select | [MMB] Pan | [RMB] Fly",i&&(x+=" | [F] Focus | [Q] Rotate Left | [E] Rotate Right"),a===Ou.Placement?x+=" | [ESC / G] Cancel Placement":a===Ou.Grab?x+=" | [Shift + Click] Place Duplicate | [ESC / G] Cancel Grab":i&&(x+="| [G] Grab | [ESC] Deselect All"),h.a.createElement(Th,{id:"viewport-panel",title:"Viewport",icon:tp,toolbarContent:h.a.createElement(Sp,{onToggleStats:c,showStats:l})},h.a.createElement(lp,{axis:"y",onChange:m,min:.01,initialSizes:_p},h.a.createElement(mp,{error:y&&!v,canDrop:y&&v,ref:_},h.a.createElement(fp,{ref:t,tabIndex:"-1"}),h.a.createElement(gp,null,x),l&&h.a.createElement(hp,{editor:e}),h.a.createElement(Bl,{afterUpload:b})),h.a.createElement(Kl,null)))}Sp.propTypes={showStats:p.a.bool,onToggleStats:p.a.func};const Ep={enableExperimentalFeatures:!1},Tp=h.a.createContext({settings:Ep,updateSetting:()=>{}}),Mp=Tp.Provider;var Cp=n(21);function $p(e){let{name:t,className:n,info:r}=e,i=K()(e,["name","className","info"]);const{displayPrecision:o}=i,a=K()(i,["displayPrecision"]);return h.a.createElement(yd,null,h.a.createElement(Ad,a,t,":"),h.a.createElement(_d,null,h.a.createElement(hr,i),r&&h.a.createElement(xd,{info:r})))}$p.propTypes={name:p.a.string.isRequired,className:p.a.string,info:p.a.string};var Op=n(238),Ap=n.n(Op),Ip=n(299),Pp=n.n(Ip),Lp=n(300),kp=n.n(Lp),Rp=n(301),Dp=n.n(Rp),jp=n(307),Np=n.n(jp),Fp=n(259),Up=n.n(Fp),Bp=n(251),zp=n.n(Bp),Vp=function(e){var t,n,r=e.className,i=e.included,o=e.vertical,a=e.offset,s=e.length,l=e.style,c=e.reverse,u=o?(t={},zp()(t,c?"top":"bottom",a+"%"),zp()(t,c?"bottom":"top","auto"),zp()(t,"height",s+"%"),t):(n={},zp()(n,c?"right":"left",a+"%"),zp()(n,c?"left":"right","auto"),zp()(n,"width",s+"%"),n),d=Ap()({},l,u);return i?h.a.createElement("div",{className:r,style:d}):null},Gp=n(369),Hp=n.n(Gp),Wp=n(538),qp=n.n(Wp),Jp=n(545),Yp=n.n(Jp);function Xp(e,t,n,r){var i=ee.a.unstable_batchedUpdates?function(e){ee.a.unstable_batchedUpdates(n,e)}:n;return Yp()(e,t,i,r)}var Kp=n(16),Zp=n.n(Kp),Qp=function(e){var t=e.prefixCls,n=e.vertical,r=e.reverse,i=e.marks,o=e.dots,a=e.step,s=e.included,l=e.lowerBound,c=e.upperBound,u=e.max,d=e.min,p=e.dotStyle,f=e.activeDotStyle,m=u-d,g=function(e,t,n,r,i,o){Up()(!n||r>0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var a=Object.keys(t).map(parseFloat).sort((function(e,t){return e-t}));if(n&&r)for(var s=i;s<=o;s+=r)-1===a.indexOf(s)&&a.push(s);return a}(0,i,o,a,d,u).map((function(e){var i,o=Math.abs(e-d)/m*100+"%",a=!s&&e===c||s&&e<=c&&e>=l,u=n?Ap()({},p,zp()({},r?"top":"bottom",o)):Ap()({},p,zp()({},r?"right":"left",o));a&&(u=Ap()({},u,f));var g=Zp()((i={},zp()(i,t+"-dot",!0),zp()(i,t+"-dot-active",a),zp()(i,t+"-dot-reverse",r),i));return h.a.createElement("span",{className:g,style:u,key:e})}));return h.a.createElement("div",{className:t+"-step"},g)};Qp.propTypes={prefixCls:p.a.string,activeDotStyle:p.a.object,dotStyle:p.a.object,min:p.a.number,max:p.a.number,upperBound:p.a.number,lowerBound:p.a.number,included:p.a.bool,dots:p.a.bool,step:p.a.number,marks:p.a.object,vertical:p.a.bool,reverse:p.a.bool};var ef=Qp,tf=function(e){var t=e.className,n=e.vertical,r=e.reverse,i=e.marks,o=e.included,a=e.upperBound,s=e.lowerBound,l=e.max,c=e.min,u=e.onClickLabel,d=Object.keys(i),p=l-c,f=d.map(parseFloat).sort((function(e,t){return e-t})).map((function(e){var l,d=i[e],f="object"==typeof d&&!h.a.isValidElement(d),m=f?d.label:d;if(!m&&0!==m)return null;var g=!o&&e===a||o&&e<=a&&e>=s,v=Zp()((l={},zp()(l,t+"-text",!0),zp()(l,t+"-text-active",g),l)),y=zp()({marginBottom:"-50%"},r?"top":"bottom",(e-c)/p*100+"%"),_=zp()({transform:"translateX(-50%)",msTransform:"translateX(-50%)"},r?"right":"left",r?(e-c/4)/p*100+"%":(e-c)/p*100+"%"),b=n?y:_,x=f?Ap()({},b,d.style):b;return h.a.createElement("span",{className:v,style:x,key:e,onMouseDown:function(t){return u(t,e)},onTouchStart:function(t){return u(t,e)}},m)}));return h.a.createElement("div",{className:t},f)};tf.propTypes={className:p.a.string,vertical:p.a.bool,reverse:p.a.bool,marks:p.a.object,included:p.a.bool,upperBound:p.a.number,lowerBound:p.a.number,max:p.a.number,min:p.a.number,onClickLabel:p.a.func};var nf=tf,rf=function(e){function t(){var e,n,r,i;Pp()(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=Dp()(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={clickFocused:!1},r.setHandleRef=function(e){r.handle=e},r.handleMouseUp=function(){document.activeElement===r.handle&&r.setClickFocus(!0)},r.handleMouseDown=function(){r.focus()},r.handleBlur=function(){r.setClickFocus(!1)},r.handleKeyDown=function(){r.setClickFocus(!1)},i=n,Dp()(r,i)}return Np()(t,e),kp()(t,[{key:"componentDidMount",value:function(){this.onMouseUpListener=Xp(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(e){this.setState({clickFocused:e})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var e,t,n=this.props,r=n.prefixCls,i=n.vertical,o=n.reverse,a=n.offset,s=n.style,l=n.disabled,c=n.min,u=n.max,d=n.value,p=n.tabIndex,f=Hp()(n,["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex"]),m=Zp()(this.props.className,zp()({},r+"-handle-click-focused",this.state.clickFocused)),g=i?(e={},zp()(e,o?"top":"bottom",a+"%"),zp()(e,o?"bottom":"top","auto"),zp()(e,"transform","translateY(+50%)"),e):(t={},zp()(t,o?"right":"left",a+"%"),zp()(t,o?"left":"right","auto"),zp()(t,"transform","translateX("+(o?"+":"-")+"50%)"),t),v=Ap()({},s,g),y=p||0;return(l||null===p)&&(y=null),h.a.createElement("div",Ap()({ref:this.setHandleRef,tabIndex:y},f,{className:m,style:v,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":c,"aria-valuemax":u,"aria-valuenow":d,"aria-disabled":!!l}))}}]),t}(h.a.Component),of=rf;rf.propTypes={prefixCls:p.a.string,className:p.a.string,vertical:p.a.bool,offset:p.a.number,style:p.a.object,disabled:p.a.bool,min:p.a.number,max:p.a.number,value:p.a.number,tabIndex:p.a.number,reverse:p.a.bool};var af=n(548),sf=n.n(af),lf={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=lf.F1&&t<=lf.F12)return!1;switch(t){case lf.ALT:case lf.CAPS_LOCK:case lf.CONTEXT_MENU:case lf.CTRL:case lf.DOWN:case lf.END:case lf.ESC:case lf.HOME:case lf.INSERT:case lf.LEFT:case lf.MAC_FF_META:case lf.META:case lf.NUMLOCK:case lf.NUM_CENTER:case lf.PAGE_DOWN:case lf.PAGE_UP:case lf.PAUSE:case lf.PRINT_SCREEN:case lf.RIGHT:case lf.SHIFT:case lf.UP:case lf.WIN_KEY:case lf.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=lf.ZERO&&e<=lf.NINE)return!0;if(e>=lf.NUM_ZERO&&e<=lf.NUM_MULTIPLY)return!0;if(e>=lf.A&&e<=lf.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case lf.SPACE:case lf.QUESTION_MARK:case lf.NUM_PLUS:case lf.NUM_MINUS:case lf.NUM_PERIOD:case lf.NUM_DIVISION:case lf.SEMICOLON:case lf.DASH:case lf.EQUALS:case lf.COMMA:case lf.PERIOD:case lf.SLASH:case lf.APOSTROPHE:case lf.SINGLE_QUOTE:case lf.OPEN_SQUARE_BRACKET:case lf.BACKSLASH:case lf.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},cf=lf;function uf(e,t){try{return Object.keys(t).some((function(n){return e.target===Object(Q.findDOMNode)(t[n])}))}catch(e){return!1}}function hf(e){return e.touches.length>1||"touchend"===e.type.toLowerCase()&&e.touches.length>0}function df(e,t){var n=t.marks,r=t.step,i=t.min,o=t.max,a=Object.keys(n).map(parseFloat);if(null!==r){var s=Math.floor((o-i)/r),l=Math.min((e-i)/r,s),c=Math.round(l)*r+i;a.push(c)}var u=a.map((function(t){return Math.abs(e-t)}));return a[u.indexOf(Math.min.apply(Math,sf()(u)))]}function pf(e,t){return e?t.clientY:t.pageX}function ff(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function mf(e,t){var n=t.getBoundingClientRect();return e?n.top+.5*n.height:window.pageXOffset+n.left+.5*n.width}function gf(e,t){var n=t.max,r=t.min;return e<=r?r:e>=n?n:e}function vf(e,t){var n=t.step,r=isFinite(df(e,t))?df(e,t):0;return null===n?r:parseFloat(r.toFixed(function(e){var t=e.toString(),n=0;return t.indexOf(".")>=0&&(n=t.length-t.indexOf(".")-1),n}(n)))}function yf(e){e.stopPropagation(),e.preventDefault()}function _f(e,t,n){var r="increase";switch(e.keyCode){case cf.UP:r=t&&n?"decrease":"increase";break;case cf.RIGHT:r=!t&&n?"decrease":"increase";break;case cf.DOWN:r=t&&n?"increase":"decrease";break;case cf.LEFT:r=!t&&n?"increase":"decrease";break;case cf.END:return function(e,t){return t.max};case cf.HOME:return function(e,t){return t.min};case cf.PAGE_UP:return function(e,t){return e+2*t.step};case cf.PAGE_DOWN:return function(e,t){return e-2*t.step};default:return}return function(e,t){return function(e,t,n){var r={increase:function(e,t){return e+t},decrease:function(e,t){return e-t}},i=r[e](Object.keys(n.marks).indexOf(JSON.stringify(t)),1),o=Object.keys(n.marks)[i];return n.step?r[e](t,n.step):Object.keys(n.marks).length&&n.marks[o]?n.marks[o]:t}(r,e,t)}}function bf(){}var xf=function(e){function t(e){Pp()(this,t);var n=Dp()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onEnd=function(e){var t=n.state.dragging;n.removeDocumentEvents(),(t||e)&&n.props.onAfterChange(n.getValue()),n.setState({dragging:!1})};var r=void 0!==e.defaultValue?e.defaultValue:e.min,i=void 0!==e.value?e.value:r;return n.state={value:n.trimAlignValue(i),dragging:!1},Up()(!("minimumTrackStyle"in e),"minimumTrackStyle will be deprecated, please use trackStyle instead."),Up()(!("maximumTrackStyle"in e),"maximumTrackStyle will be deprecated, please use railStyle instead."),n}return Np()(t,e),kp()(t,[{key:"componentDidUpdate",value:function(e,t){if("value"in this.props||"min"in this.props||"max"in this.props){var n=this.props,r=n.value,i=n.onChange,o=void 0!==r?r:t.value,a=this.trimAlignValue(o,this.props);a!==t.value&&(this.setState({value:a}),function(e,t){var n=t.min,r=t.max;return e<n||e>r}(o,this.props)&&i(a))}}},{key:"onChange",value:function(e){var t=this.props,n=!("value"in t),r=e.value>this.props.max?Ap()({},e,{value:this.props.max}):e;n&&this.setState(r);var i=r.value;t.onChange(i)}},{key:"onStart",value:function(e){this.setState({dragging:!0});var t=this.props,n=this.getValue();t.onBeforeChange(n);var r=this.calcValueByPos(e);this.startValue=r,this.startPosition=e,r!==n&&(this.prevMovedHandleIndex=0,this.onChange({value:r}))}},{key:"onMove",value:function(e,t){yf(e);var n=this.state.value,r=this.calcValueByPos(t);r!==n&&this.onChange({value:r})}},{key:"onKeyboard",value:function(e){var t=this.props,n=t.reverse,r=_f(e,t.vertical,n);if(r){yf(e);var i=this.state.value,o=r(i,this.props),a=this.trimAlignValue(o);if(a===i)return;this.onChange({value:a}),this.props.onAfterChange(a),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){return this.props.min}},{key:"getUpperBound",value:function(){return this.state.value}},{key:"trimAlignValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===e)return null;var n=Ap()({},this.props,t),r=gf(e,n);return vf(r,n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,r=t.vertical,i=t.included,o=t.disabled,a=t.minimumTrackStyle,s=t.trackStyle,l=t.handleStyle,c=t.tabIndex,u=t.min,d=t.max,p=t.reverse,f=t.handle,m=this.state,g=m.value,v=m.dragging,y=this.calcOffset(g),_=f({className:n+"-handle",prefixCls:n,vertical:r,offset:y,value:g,dragging:v,disabled:o,min:u,max:d,reverse:p,index:0,tabIndex:c,style:l[0]||l,ref:function(t){return e.saveHandle(0,t)}}),b=s[0]||s;return{tracks:h.a.createElement(Vp,{className:n+"-track",vertical:r,included:i,offset:0,reverse:p,length:y,style:Ap()({},a,b)}),handles:_}}}]),t}(h.a.Component);xf.propTypes={defaultValue:p.a.number,value:p.a.number,disabled:p.a.bool,autoFocus:p.a.bool,tabIndex:p.a.number,reverse:p.a.bool,min:p.a.number,max:p.a.number};var Sf=function(e){var t,n;return n=t=function(e){function t(e){Pp()(this,t);var n=Dp()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onMouseDown=function(e){if(0===e.button){var t=n.props.vertical,r=pf(t,e);if(uf(e,n.handlesRefs)){var i=mf(t,e.target);n.dragOffset=r-i,r=i}else n.dragOffset=0;n.removeDocumentEvents(),n.onStart(r),n.addDocumentMouseEvents()}},n.onTouchStart=function(e){if(!hf(e)){var t=n.props.vertical,r=ff(t,e);if(uf(e,n.handlesRefs)){var i=mf(t,e.target);n.dragOffset=r-i,r=i}else n.dragOffset=0;n.onStart(r),n.addDocumentTouchEvents(),yf(e)}},n.onFocus=function(e){var t=n.props,r=t.onFocus,i=t.vertical;if(uf(e,n.handlesRefs)){var o=mf(i,e.target);n.dragOffset=0,n.onStart(o),yf(e),r&&r(e)}},n.onBlur=function(e){var t=n.props.onBlur;n.onEnd(),t&&t(e)},n.onMouseUp=function(){n.handlesRefs[n.prevMovedHandleIndex]&&n.handlesRefs[n.prevMovedHandleIndex].clickFocus()},n.onMouseMove=function(e){if(n.sliderRef){var t=pf(n.props.vertical,e);n.onMove(e,t-n.dragOffset)}else n.onEnd()},n.onTouchMove=function(e){if(!hf(e)&&n.sliderRef){var t=ff(n.props.vertical,e);n.onMove(e,t-n.dragOffset)}else n.onEnd()},n.onKeyDown=function(e){n.sliderRef&&uf(e,n.handlesRefs)&&n.onKeyboard(e)},n.onClickMarkLabel=function(e,t){e.stopPropagation(),n.onChange({value:t}),n.setState({value:t},(function(){return n.onEnd(!0)}))},n.saveSlider=function(e){n.sliderRef=e};var r=e.step,i=e.max,o=e.min,a=!isFinite(i-o)||(i-o)%r==0;return Up()(!r||Math.floor(r)!==r||a,"Slider[max] - Slider[min] (%s) should be a multiple of Slider[step] (%s)",i-o,r),n.handlesRefs={},n}return Np()(t,e),kp()(t,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var e=this.props,t=e.autoFocus,n=e.disabled;t&&!n&&this.focus()}},{key:"componentWillUnmount",value:function(){qp()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this)&&qp()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var e=this.sliderRef,t=this.props,n=t.vertical,r=t.reverse,i=e.getBoundingClientRect();return n?r?i.bottom:i.top:window.pageXOffset+(r?i.right:i.left)}},{key:"getSliderLength",value:function(){var e=this.sliderRef;if(!e)return 0;var t=e.getBoundingClientRect();return this.props.vertical?t.height:t.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=Xp(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=Xp(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=Xp(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=Xp(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){this.props.disabled||this.handlesRefs[0].focus()}},{key:"blur",value:function(){var e=this;this.props.disabled||Object.keys(this.handlesRefs).forEach((function(t){e.handlesRefs[t]&&e.handlesRefs[t].blur&&e.handlesRefs[t].blur()}))}},{key:"calcValue",value:function(e){var t=this.props,n=t.vertical,r=t.min,i=t.max,o=Math.abs(Math.max(e,0)/this.getSliderLength());return n?(1-o)*(i-r)+r:o*(i-r)+r}},{key:"calcValueByPos",value:function(e){var t=(this.props.reverse?-1:1)*(e-this.getSliderStart());return this.trimAlignValue(this.calcValue(t))}},{key:"calcOffset",value:function(e){var t=this.props,n=t.min;return 100*((e-n)/(t.max-n))}},{key:"saveHandle",value:function(e,t){this.handlesRefs[e]=t}},{key:"render",value:function(){var e,n=this.props,r=n.prefixCls,i=n.className,o=n.marks,a=n.dots,s=n.step,l=n.included,c=n.disabled,u=n.vertical,d=n.reverse,p=n.min,f=n.max,m=n.children,g=n.maximumTrackStyle,v=n.style,y=n.railStyle,_=n.dotStyle,b=n.activeDotStyle,x=qp()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this),S=x.tracks,w=x.handles,E=Zp()(r,(e={},zp()(e,r+"-with-marks",Object.keys(o).length),zp()(e,r+"-disabled",c),zp()(e,r+"-vertical",u),zp()(e,i,i),e));return h.a.createElement("div",{ref:this.saveSlider,className:E,onTouchStart:c?bf:this.onTouchStart,onMouseDown:c?bf:this.onMouseDown,onMouseUp:c?bf:this.onMouseUp,onKeyDown:c?bf:this.onKeyDown,onFocus:c?bf:this.onFocus,onBlur:c?bf:this.onBlur,style:v},h.a.createElement("div",{className:r+"-rail",style:Ap()({},g,y)}),S,h.a.createElement(ef,{prefixCls:r,vertical:u,reverse:d,marks:o,dots:a,step:s,included:l,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:f,min:p,dotStyle:_,activeDotStyle:b}),w,h.a.createElement(nf,{className:r+"-mark",onClickLabel:c?bf:this.onClickMarkLabel,vertical:u,marks:o,included:l,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:f,min:p,reverse:d}),m)}}]),t}(e),t.displayName="ComponentEnhancer("+e.displayName+")",t.propTypes=Ap()({},e.propTypes,{min:p.a.number,max:p.a.number,step:p.a.number,marks:p.a.object,included:p.a.bool,className:p.a.string,prefixCls:p.a.string,disabled:p.a.bool,children:p.a.any,onBeforeChange:p.a.func,onChange:p.a.func,onAfterChange:p.a.func,handle:p.a.func,dots:p.a.bool,vertical:p.a.bool,style:p.a.object,reverse:p.a.bool,minimumTrackStyle:p.a.object,maximumTrackStyle:p.a.object,handleStyle:p.a.oneOfType([p.a.object,p.a.arrayOf(p.a.object)]),trackStyle:p.a.oneOfType([p.a.object,p.a.arrayOf(p.a.object)]),railStyle:p.a.object,dotStyle:p.a.object,activeDotStyle:p.a.object,autoFocus:p.a.bool,onFocus:p.a.func,onBlur:p.a.func}),t.defaultProps=Ap()({},e.defaultProps,{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(e){var t=e.index,n=Hp()(e,["index"]);return delete n.dragging,null===n.value?null:h.a.createElement(of,Ap()({},n,{key:t}))},onBeforeChange:bf,onChange:bf,onAfterChange:bf,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),n}(xf);const wf=_.c`
  .rc-slider {
    display: flex;
    flex: 1;
    height: 1px;
    margin-right: 28px;
    position: relative;
    border-radius: 2px;
  }

  .rc-slider-track {
    position: absolute;
    height: 2px;
    background-color: ${e=>e.theme.blue};
    border-radius: 2px;
  }

  .rc-slider-rail {
    position: absolute;
    width: calc(100% + 16px);
    height: 2px;
    background-color: ${e=>e.theme.border};
    border-radius: 2px;
  }

  .rc-slider-handle {
    position: absolute;
    margin-top: -5px;
    width: 12px;
    height: 12px;
    cursor: pointer;
    border-radius: 50%;
    border: solid 2px ${e=>e.theme.white};
    background-color: ${e=>e.theme.border};
    touch-action: pan-x;
    outline: none;

      &:hover {
        border: solid 2px ${e=>e.theme.blue};
        background-color: ${e=>e.theme.white};
      }

      &:active {
        border:  2px solid ${e=>e.theme.blue};
        background-color: ${e=>e.theme.white};
      }
    }

  .rc-slider-disabled {
    background-color: ${e=>e.theme.panel2};
    border-radius: 2px;

    .rc-slider-track {
      background-color: ${e=>e.theme.panel2};
    }

    .rc-slider-handle, .rc-slider-dot {
      border-color: ${e=>e.theme.panel2};
      box-shadow: none;
      background-color: ${e=>e.theme.toolbar};
      cursor: not-allowed;
    }

    .rc-slider-mark-text, .rc-slider-dot {
      cursor: not-allowed!important;
    }
  }
`;function Ef(e){return h.a.createElement(h.a.Fragment,null,h.a.createElement(Sf,e),h.a.createElement(wf,null))}const Tf=_.e.div.withConfig({displayName:"CompoundNumericInput__StyledCompoundNumericInput",componentId:"lruliz-0"})(["display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%;"]);function Mf(e){let{value:t,onChange:n}=e,r=K()(e,["value","onChange"]);const{min:i,max:o,step:a}=r;return h.a.createElement(Tf,null,h.a.createElement(Ef,{min:i,max:o,value:t,step:a,onChange:n}),h.a.createElement(hr,s()({},r,{mediumStep:a,value:t,onChange:n})))}Mf.defaultProps={value:0,onChange:()=>{},min:0,max:1,step:.01},Mf.propTypes={value:p.a.number,onChange:p.a.func};var Cf=n(558),$f=n.n(Cf),Of=n(36);function Af(e){let{children:t,padding:n,position:r,renderContent:i,disabled:o}=e,a=K()(e,["children","padding","position","renderContent","disabled"]);const l=Object(u.useRef)(),[c,d]=Object(u.useState)(!1),p=Object(u.useCallback)(()=>{o||d(!0)},[d,o]),f=Object(u.useCallback)(e=>{d(!1),e.stopPropagation()},[d]),m=Object(u.useCallback)(e=>{e.stopPropagation()},[]),g=Object(u.useCallback)(()=>l,[l]);return h.a.createElement("div",s()({ref:l,onClick:p},a),t,c&&h.a.createElement(te,null,h.a.createElement(Ed,{onClick:f}),h.a.createElement(ve,{onClick:m,getTargetRef:g,padding:n,position:r},i({onClose:f}))))}Af.propTypes={disabled:p.a.bool,children:p.a.node,padding:p.a.number,position:p.a.string,renderContent:p.a.func.isRequired};const If=_.e.div.withConfig({displayName:"ColorInput__ColorInputContainer",componentId:"sc-1yk21k3-0"})(["display:flex;position:relative;width:100%;max-width:100px;"]),Pf=Object(_.e)(Of.a).withConfig({displayName:"ColorInput__StyledColorInput",componentId:"sc-1yk21k3-1"})(["display:flex;flex:1;align-items:center;"]),Lf=_.e.div.withConfig({displayName:"ColorInput__ColorPreview",componentId:"sc-1yk21k3-2"})(["width:32px;height:auto;border-radius:2px;padding:6px;margin-right:8px;"]),kf=_.e.div.withConfig({displayName:"ColorInput__ColorText",componentId:"sc-1yk21k3-3"})(["padding-top:2px;"]),Rf=_.e.div.withConfig({displayName:"ColorInput__ColorInputPopover",componentId:"sc-1yk21k3-4"})(["box-shadow:",";margin-bottom:3px;"],e=>e.theme.shadow30);function Df(e){let{value:t,onChange:n,disabled:r}=e,i=K()(e,["value","onChange","disabled"]);const o=Object(u.useCallback)(({hex:e})=>{n(new Mr.q(e))},[n]),a="#"+t.getHexString();return h.a.createElement(If,null,h.a.createElement(Af,{disabled:r,renderContent:()=>h.a.createElement(Rf,null,h.a.createElement($f.a,s()({},i,{color:a,disableAlpha:!0,onChange:o})))},h.a.createElement(Pf,{as:"div",disabled:r},h.a.createElement(Lf,{style:{background:a}}),h.a.createElement(kf,null,a.toUpperCase()))))}function jf(e,t){return Object(u.useCallback)(n=>e.setPropertySelected(t,n),[e,t])}Df.propTypes={disabled:p.a.bool,value:p.a.object.isRequired,onChange:p.a.func},Df.defaultProps={value:new Mr.q,onChange:()=>{}};const Nf=[{label:"Disabled",value:oo},{label:"Linear",value:ao},{label:"Exponential",value:so}];function Ff(e){const{editor:t,node:n}=e,r=jf(t,"background"),i=jf(t,"fogType"),o=jf(t,"fogColor"),a=jf(t,"fogNearDistance"),l=jf(t,"fogFarDistance"),c=jf(t,"fogDensity"),u=jf(t,"overrideAudioSettings"),d=jf(t,"mediaVolume"),p=jf(t,"mediaDistanceModel"),f=jf(t,"mediaRolloffFactor"),m=jf(t,"mediaRefDistance"),g=jf(t,"mediaMaxDistance"),v=jf(t,"mediaConeInnerAngle"),y=jf(t,"mediaConeOuterAngle"),_=jf(t,"mediaConeOuterGain"),b=jf(t,"avatarDistanceModel"),x=jf(t,"avatarRolloffFactor"),S=jf(t,"avatarRefDistance"),w=jf(t,"avatarMaxDistance");return h.a.createElement(vh,s()({},e,{description:Ff.description}),h.a.createElement(Sd,{name:"Background Color"},h.a.createElement(Df,{value:n.background,onChange:r})),h.a.createElement(Sd,{name:"Fog Type"},h.a.createElement(or,{options:Nf,value:n.fogType,onChange:i})),n.fogType!==oo&&h.a.createElement(Sd,{name:"Fog Color"},h.a.createElement(Df,{value:n.fogColor,onChange:o})),n.fogType===ao&&h.a.createElement(h.a.Fragment,null,h.a.createElement($p,{name:"Fog Near Distance",smallStep:.1,mediumStep:1,largeStep:10,min:0,value:n.fogNearDistance,onChange:a}),h.a.createElement($p,{name:"Fog Far Distance",smallStep:1,mediumStep:100,largeStep:1e3,min:0,value:n.fogFarDistance,onChange:l})),n.fogType===so&&h.a.createElement($p,{name:"Fog Density",smallStep:.01,mediumStep:.1,largeStep:.25,min:0,value:n.fogDensity,onChange:c}),h.a.createElement(Sd,{name:"Override Audio Settings"},h.a.createElement(Wd.a,{value:n.overrideAudioSettings,onChange:u})),n.overrideAudioSettings&&h.a.createElement(h.a.Fragment,null,h.a.createElement(Sd,{name:"Avatar Distance Model",info:"The algorithim used to calculate audio rolloff."},h.a.createElement(or,{options:ro,value:n.avatarDistanceModel,onChange:b})),n.avatarDistanceModel===to.linear?h.a.createElement(Sd,{name:"Avatar Rolloff Factor",info:"A double value describing how quickly the volume is reduced as the source moves away from the listener. 0 to 1"},h.a.createElement(Mf,{min:0,max:1,smallStep:.001,mediumStep:.01,largeStep:.1,value:n.avatarRolloffFactor,onChange:x})):h.a.createElement($p,{name:"Avatar Rolloff Factor",info:"A double value describing how quickly the volume is reduced as the source moves away from the listener. 0 to Infinity",min:0,smallStep:.1,mediumStep:1,largeStep:10,value:n.avatarRolloffFactor,onChange:x}),h.a.createElement($p,{name:"Avatar Ref Distance",info:"A double value representing the reference distance for reducing volume as the audio source moves further from the listener.",min:0,smallStep:.1,mediumStep:1,largeStep:10,value:n.avatarRefDistance,onChange:S,unit:"m"}),h.a.createElement($p,{name:"Avatar Max Distance",info:"A double value representing the maximum distance between the audio source and the listener, after which the volume is not reduced any further.",min:0,smallStep:.1,mediumStep:1,largeStep:10,value:n.avatarMaxDistance,onChange:w,unit:"m"}),h.a.createElement(Sd,{name:"Media Volume"},h.a.createElement(Mf,{value:n.mediaVolume,onChange:d})),h.a.createElement(Sd,{name:"Media Distance Model",info:"The algorithim used to calculate audio rolloff."},h.a.createElement(or,{options:ro,value:n.mediaDistanceModel,onChange:p})),n.mediaDistanceModel===to.linear?h.a.createElement(Sd,{name:"Media Rolloff Factor",info:"A double value describing how quickly the volume is reduced as the source moves away from the listener. 0 to 1"},h.a.createElement(Mf,{min:0,max:1,smallStep:.001,mediumStep:.01,largeStep:.1,value:n.mediaRolloffFactor,onChange:f})):h.a.createElement($p,{name:"Media Rolloff Factor",info:"A double value describing how quickly the volume is reduced as the source moves away from the listener. 0 to Infinity",min:0,smallStep:.1,mediumStep:1,largeStep:10,value:n.mediaRolloffFactor,onChange:f}),h.a.createElement($p,{name:"Media Ref Distance",info:"A double value representing the reference distance for reducing volume as the audio source moves further from the listener.",min:0,smallStep:.1,mediumStep:1,largeStep:10,value:n.mediaRefDistance,onChange:m,unit:"m"}),h.a.createElement($p,{name:"Media Max Distance",info:"A double value representing the maximum distance between the audio source and the listener, after which the volume is not reduced any further.",min:0,smallStep:.1,mediumStep:1,largeStep:10,value:n.mediaMaxDistance,onChange:g,unit:"m"}),h.a.createElement($p,{name:"Media Cone Inner Angle",info:"A double value describing the angle, in degrees, of a cone inside of which there will be no volume reduction.",min:0,max:360,smallStep:.1,mediumStep:1,largeStep:10,value:n.mediaConeInnerAngle,onChange:v,unit:"°"}),h.a.createElement($p,{name:"Media Cone Outer Angle",info:"A double value describing the angle, in degrees, of a cone outside of which the volume will be reduced by a constant value, defined by the coneOuterGain attribute.",min:0,max:360,smallStep:.1,mediumStep:1,largeStep:10,value:n.mediaConeOuterAngle,onChange:y,unit:"°"}),h.a.createElement(Sd,{name:"Media Cone Outer Gain",info:"A double value describing the amount of volume reduction outside the cone defined by the coneOuterAngle attribute. Its default value is 0, meaning that no sound can be heard."},h.a.createElement(Mf,{min:0,max:1,step:.01,value:n.mediaConeOuterGain,onChange:_}))))}Ff.propTypes={editor:p.a.object,node:p.a.object},Ff.iconComponent=Nu,Ff.description="The root object of the scene.";var Uf=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M488.6 250.2L392 214V105.5c0-15-9.3-28.4-23.4-33.7l-100-37.5c-8.1-3.1-17.1-3.1-25.3 0l-100 37.5c-14.1 5.3-23.4 18.7-23.4 33.7V214l-96.6 36.2C9.3 255.5 0 268.9 0 283.9V394c0 13.6 7.7 26.1 19.9 32.2l100 50c10.1 5.1 22.1 5.1 32.2 0l103.9-52 103.9 52c10.1 5.1 22.1 5.1 32.2 0l100-50c12.2-6.1 19.9-18.6 19.9-32.2V283.9c0-15-9.3-28.4-23.4-33.7zM358 214.8l-85 31.9v-68.2l85-37v73.3zM154 104.1l102-38.2 102 38.2v.6l-102 41.4-102-41.4v-.6zm84 291.1l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6zm240 112l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6z",key:"k0"}))}));Uf.displayName="Cubes";class Bf extends u.Component{render(){return h.a.createElement(vh,s()({},this.props,{description:Bf.description}))}}c()(Bf,"propTypes",{editor:p.a.object,node:p.a.object}),c()(Bf,"iconComponent",Uf),c()(Bf,"description","A group of multiple objects that can be moved or duplicated together.\nDrag and drop objects into the Group in the Hierarchy.");const zf={multiple:!1,accepts:jl.e};function Vf(e){let{onChange:t}=e,n=K()(e,["onChange"]);const r=Nl(),[{canDrop:i,isOver:o},a]=wl({accept:[El.Model,El.File],drop(e){e.type===El.Model?t(e.value.url,e.value.initialProps||{}):r(e.files,zf).then(e=>{e&&e.length>0&&t(e[0].url,{})})},collect:e=>({canDrop:e.canDrop(),isOver:e.isOver()})});return h.a.createElement(Vd.a,s()({ref:a,onChange:(e,n)=>t(e,{},n),error:o&&!i,canDrop:o&&i},n))}Vf.propTypes={onChange:p.a.func.isRequired};var Gf=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M239.1 6.3l-208 78c-18.7 7-31.1 25-31.1 45v225.1c0 18.2 10.3 34.8 26.5 42.9l208 104c13.5 6.8 29.4 6.8 42.9 0l208-104c16.3-8.1 26.5-24.8 26.5-42.9V129.3c0-20-12.4-37.9-31.1-44.9l-208-78C262 2.2 250 2.2 239.1 6.3zM256 68.4l192 72v1.1l-192 78-192-78v-1.1l192-72zm32 356V275.5l160-65v133.9l-160 80z",key:"k0"}))}));Gf.displayName="Cube";n(673),n(695);if(!Object.setPrototypeOf&&!{}.__proto__){var Hf=Object.getPrototypeOf;Object.getPrototypeOf=function(e){return e.__proto__?e.__proto__:Hf.call(Object,e)}}var Wf=n(213),qf=n.n(Wf),Jf=n(421),Yf=n.n(Jf),Xf=n(224),Kf=n.n(Xf),Zf=n(266),Qf=n.n(Zf),em=n(214),tm=n.n(em),nm=n(212),rm=n.n(nm),im=n(275),om=n.n(im),am=n(425),sm=n.n(am),lm=n(340),cm=n.n(lm),um=function(e){return 0===e?0:e>0?1:-1},hm=function(e){return Qf()(e)&&e.indexOf("%")===e.length-1},dm=function(e){return cm()(e)&&!sm()(e)},pm=function(e){return dm(e)||Qf()(e)},fm=0,mm=function(e){var t=++fm;return"".concat(e||"").concat(t)},gm=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!dm(e)&&!Qf()(e))return r;if(hm(e)){var o=e.indexOf("%");n=t*parseFloat(e.slice(0,o))/100}else n=+e;return sm()(n)&&(n=r),i&&n>t&&(n=t),n},vm=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},ym=function(e,t){return dm(e)&&dm(t)?function(n){return e+n*(t-e)}:function(){return t}},_m=function(e,t,n){return e&&e.length?e.find((function(e){return e&&("function"==typeof t?t(e):om()(e,t))===n})):null};function bm(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function xm(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Sm(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var wm={"aria-current":p.a.string,"aria-details":p.a.any,"aria-disabled":p.a.any,"aria-hidden":p.a.any,"aria-invalid":p.a.any,"aria-keyshortcuts":p.a.any,"aria-label":p.a.any,"aria-roledescription":p.a.any,"aria-autocomplete":p.a.any,"aria-checked":p.a.any,"aria-expanded":p.a.any,"aria-haspopup":p.a.any,"aria-level":p.a.any,"aria-modal":p.a.any,"aria-multiline":p.a.any,"aria-multiselectable":p.a.any,"aria-orientation":p.a.any,"aria-placeholder":p.a.any,"aria-pressed":p.a.any,"aria-readonly":p.a.any,"aria-required":p.a.any,"aria-selected":p.a.any,"aria-sort":p.a.any,"aria-valuemax":p.a.any,"aria-valuemin":p.a.any,"aria-valuenow":p.a.any,"aria-valuetext":p.a.any,"aria-atomic":p.a.any,"aria-busy":p.a.any,"aria-live":p.a.any,"aria-relevant":p.a.any,"aria-dropeffect":p.a.any,"aria-grabbed":p.a.any,"aria-activedescendant":p.a.any,"aria-colcount":p.a.any,"aria-colindex":p.a.any,"aria-colspan":p.a.any,"aria-controls":p.a.any,"aria-describedby":p.a.any,"aria-errormessage":p.a.any,"aria-flowto":p.a.any,"aria-labelledby":p.a.any,"aria-owns":p.a.any,"aria-posinset":p.a.any,"aria-rowcount":p.a.any,"aria-rowindex":p.a.any,"aria-rowspan":p.a.any,"aria-setsize":p.a.any,alignmentBaseline:p.a.string,angle:p.a.number,baselineShift:p.a.string,clip:p.a.string,clipPath:p.a.string,clipRule:p.a.string,color:p.a.string,colorInterpolation:p.a.string,colorInterpolationFilters:p.a.string,colorProfile:p.a.string,colorRendering:p.a.string,cursor:p.a.string,direction:p.a.oneOf(["ltr","rtl","inherit"]),display:p.a.string,dominantBaseline:p.a.string,enableBackground:p.a.string,fill:p.a.string,fillOpacity:p.a.oneOfType([p.a.string,p.a.number]),fillRule:p.a.oneOf(["nonzero","evenodd","inherit"]),filter:p.a.string,floodColor:p.a.string,floodOpacity:p.a.oneOfType([p.a.string,p.a.number]),font:p.a.string,fontFamily:p.a.string,fontSize:p.a.oneOfType([p.a.number,p.a.string]),fontSizeAdjust:p.a.oneOfType([p.a.number,p.a.string]),fontStretch:p.a.oneOf(["normal","wider","narrower","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded","inherit"]),fontStyle:p.a.oneOf(["normal","italic","oblique","inherit"]),fontVariant:p.a.oneOf(["normal","small-caps","inherit"]),fontWeight:p.a.oneOf(["normal","bold","bolder","lighter",100,200,300,400,500,600,700,800,900,"inherit"]),glyphOrientationHorizontal:p.a.string,glyphOrientationVertical:p.a.string,imageRendering:p.a.oneOf(["auto","optimizeSpeed","optimizeQuality","inherit"]),kerning:p.a.oneOfType([p.a.number,p.a.string]),letterSpacing:p.a.oneOfType([p.a.number,p.a.string]),lightingColor:p.a.string,lineHeight:p.a.oneOfType([p.a.number,p.a.string]),markerEnd:p.a.string,markerMid:p.a.string,markerStart:p.a.string,mask:p.a.string,opacity:p.a.oneOfType([p.a.number,p.a.string]),overflow:p.a.oneOf(["visible","hidden","scroll","auto","inherit"]),pointerEvents:p.a.oneOf(["visiblePainted","visibleFill","visibleStroke","visible","painted","fill","stroke","all","none","inherit"]),shapeRendering:p.a.oneOf(["auto","optimizeSpeed","crispEdges","geometricPrecision","inherit"]),stopColor:p.a.string,stopOpacity:p.a.oneOfType([p.a.number,p.a.string]),stroke:p.a.oneOfType([p.a.number,p.a.string]),strokeDasharray:p.a.string,strokeDashoffset:p.a.oneOfType([p.a.number,p.a.string]),strokeLinecap:p.a.oneOf(["butt","round","square","inherit"]),strokeLinejoin:p.a.oneOf(["miter","round","bevel","inherit"]),strokeMiterlimit:p.a.oneOfType([p.a.number,p.a.string]),strokeOpacity:p.a.oneOfType([p.a.number,p.a.string]),strokeWidth:p.a.oneOfType([p.a.number,p.a.string]),textAnchor:p.a.oneOf(["start","middle","end","inherit"]),textDecoration:p.a.oneOf(["none","underline","overline","line-through","blink","inherit"]),textRendering:p.a.oneOf(["auto","optimizeSpeed","optimizeLegibility","geometricPrecision","inherit"]),unicodeBidi:p.a.oneOf(["normal","embed","bidi-override","inherit"]),visibility:p.a.oneOf(["visible","hidden","collapse","inherit"]),wordSpacing:p.a.oneOfType([p.a.number,p.a.string]),writingMode:p.a.oneOf(["lr-tb","rl-tb","tb-rl","lr","rl","tb","inherit"]),transform:p.a.string,role:p.a.string,focusable:p.a.string,tabIndex:p.a.string,style:p.a.object,width:p.a.number,height:p.a.number,dx:p.a.number,dy:p.a.number,x:p.a.number,y:p.a.number,r:p.a.number,radius:p.a.oneOfType([p.a.number,p.a.array])},Em={onClick:p.a.func,onMouseDown:p.a.func,onMouseUp:p.a.func,onMouseOver:p.a.func,onMouseMove:p.a.func,onMouseOut:p.a.func,onMouseEnter:p.a.func,onMouseLeave:p.a.func,onTouchEnd:p.a.func,onTouchMove:p.a.func,onTouchStart:p.a.func,onTouchCancel:p.a.func},Tm={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Mm=["plainline","line","square","rect","circle","cross","diamond","star","triangle","wye","none"],Cm=["none"],$m=function(e){return"string"==typeof e?e:e?e.displayName||e.name||"Component":""},Om=function(e,t){var n=[],r=[];return r=rm()(t)?t.map((function(e){return $m(e)})):[$m(t)],h.a.Children.forEach(e,(function(e){var t=e&&e.type&&(e.type.displayName||e.type.name);-1!==r.indexOf(t)&&n.push(e)})),n},Am=function(e,t){var n=Om(e,t);return n&&n[0]},Im=function(e){if(!e||qf()(e))return null;var t=h.a.isValidElement(e)?e.props:e;if(!tm()(t))return null;var n=null;for(var r in t)({}).hasOwnProperty.call(t,r)&&wm[r]&&(n||(n={}),n[r]=t[r]);return n},Pm=function(e,t){return function(n){return e(t,n),null}},Lm=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||qf()(e))return null;var r=h.a.isValidElement(e)?e.props:e;if(!tm()(r))return null;var i=null;for(var o in r)({}).hasOwnProperty.call(r,o)&&Em[o]&&(i||(i={}),i[o]=t||(n?Pm(r[o],r):r[o]));return i},km=function(e,t,n){return function(r){return e(t,n,r),null}},Rm=function(e,t,n){if(!tm()(e))return null;var r=null;for(var i in e)({}).hasOwnProperty.call(e,i)&&Em[i]&&qf()(e[i])&&(r||(r={}),r[i]=km(e[i],t,n));return r},Dm=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!dm(n)||n<=0||!dm(r)||r<=0)},jm=function(){return!("undefined"!=typeof window&&window.document&&window.document.createElement&&window.setTimeout)},Nm=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Fm=function(e,t){if(Kf()(e)&&Kf()(t))return!0;if(!Kf()(e)&&!Kf()(t)){var n=e.props||{},r=n.children,i=Sm(n,["children"]),o=t.props||{},a=o.children,s=Sm(o,["children"]);return r&&a?bm(i,s)&&Um(r,a):!r&&!a&&bm(i,s)}return!1},Um=function e(t,n){if(t===n)return!0;if(u.Children.count(t)!==u.Children.count(n))return!1;var r=u.Children.count(t);if(0===r)return!0;if(1===r)return Fm(rm()(t)?t[0]:t,rm()(n)?n[0]:n);for(var i=0;i<r;i++){var o=t[i],a=n[i];if(rm()(o)||rm()(a)){if(!e(o,a))return!1}else if(!Fm(o,a))return!1}return!0},Bm=function(e,t){var n=[],r={};return u.Children.forEach(e,(function(e,i){if(e&&function(e){return e&&e.type&&Qf()(e.type)&&Nm.indexOf(e.type)>=0}(e))n.push(e);else if(e&&t[$m(e.type)]){var o=$m(e.type),a=t[o],s=a.handler,l=a.once;if(l&&!r[o]||!l){var c=s(e,o,i);rm()(c)?n=[n].concat(xm(c)):n.push(c),r[o]=!0}}})),n};function zm(){return(zm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Vm(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Gm={width:p.a.number.isRequired,height:p.a.number.isRequired,viewBox:p.a.shape({x:p.a.number,y:p.a.number,width:p.a.number,height:p.a.number}),className:p.a.string,style:p.a.object,children:p.a.oneOfType([p.a.arrayOf(p.a.node),p.a.node])};function Hm(e){var t=e.children,n=e.width,r=e.height,i=e.viewBox,o=e.className,a=e.style,s=Vm(e,["children","width","height","viewBox","className","style"]),l=i||{width:n,height:r,x:0,y:0},c=Zp()("recharts-surface",o),u=Im(s);return h.a.createElement("svg",zm({},u,{className:c,width:n,height:r,style:a,viewBox:"".concat(l.x," ").concat(l.y," ").concat(l.width," ").concat(l.height),version:"1.1"}),t)}Hm.propTypes=Gm;var Wm=Hm,qm=(Math.abs,Math.atan2,Math.cos,Math.max,Math.min,Math.sin,Math.sqrt,Math.PI),Jm=2*qm;var Ym={draw:function(e,t){var n=Math.sqrt(t/qm);e.moveTo(n,0),e.arc(0,0,n,0,Jm)}},Xm={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Km=Math.sqrt(1/3),Zm=2*Km,Qm={draw:function(e,t){var n=Math.sqrt(t/Zm),r=n*Km;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},eg={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},tg=Math.sin(qm/10)/Math.sin(7*qm/10),ng=Math.sin(Jm/10)*tg,rg=-Math.cos(Jm/10)*tg,ig={draw:function(e,t){var n=Math.sqrt(.8908130915292852*t),r=ng*n,i=rg*n;e.moveTo(0,-n),e.lineTo(r,i);for(var o=1;o<5;++o){var a=Jm*o/5,s=Math.cos(a),l=Math.sin(a);e.lineTo(l*n,-s*n),e.lineTo(s*r-l*i,l*r+s*i)}e.closePath()}},og=Math.sqrt(3),ag={draw:function(e,t){var n=-Math.sqrt(t/(3*og));e.moveTo(0,2*n),e.lineTo(-og*n,-n),e.lineTo(og*n,-n),e.closePath()}},sg=Math.sqrt(3)/2,lg=1/Math.sqrt(12),cg=3*(lg/2+1),ug={draw:function(e,t){var n=Math.sqrt(t/cg),r=n/2,i=n*lg,o=r,a=n*lg+n,s=-o,l=a;e.moveTo(r,i),e.lineTo(o,a),e.lineTo(s,l),e.lineTo(-.5*r-sg*i,sg*r+-.5*i),e.lineTo(-.5*o-sg*a,sg*o+-.5*a),e.lineTo(-.5*s-sg*l,sg*s+-.5*l),e.lineTo(-.5*r+sg*i,-.5*i-sg*r),e.lineTo(-.5*o+sg*a,-.5*a-sg*o),e.lineTo(-.5*s+sg*l,-.5*l-sg*s),e.closePath()}},hg=Math.PI,dg=2*hg,pg=dg-1e-6;function fg(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function mg(){return new fg}fg.prototype=mg.prototype={constructor:fg,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-e,l=r-t,c=o-e,u=a-t,h=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>1e-6)if(Math.abs(u*s-l*c)>1e-6&&i){var d=n-o,p=r-a,f=s*s+l*l,m=d*d+p*p,g=Math.sqrt(f),v=Math.sqrt(h),y=i*Math.tan((hg-Math.acos((f+h-m)/(2*g*v)))/2),_=y/v,b=y/g;Math.abs(_-1)>1e-6&&(this._+="L"+(e+_*c)+","+(t+_*u)),this._+="A"+i+","+i+",0,0,"+ +(u*d>c*p)+","+(this._x1=e+b*s)+","+(this._y1=t+b*l)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=e+a,c=t+s,u=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%dg+dg),h>pg?this._+="A"+n+","+n+",0,1,"+u+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=hg)+","+u+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var gg=mg,vg=function(e){return function(){return e}};function yg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bg(e){return(bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xg(){return(xg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Sg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eg(e,t){return!t||"object"!==bg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tg(e){return(Tg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mg(e,t){return(Mg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Cg={symbolCircle:Ym,symbolCross:Xm,symbolDiamond:Qm,symbolSquare:eg,symbolStar:ig,symbolTriangle:ag,symbolWye:ug},$g=Math.PI/180,Og=function(e){function t(){return Sg(this,t),Eg(this,Tg(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mg(e,t)}(t,e),n=t,(r=[{key:"getPath",value:function(){var e=this.props,t=e.size,n=e.sizeType,r=e.type,i=function(e){var t="symbol".concat(e.slice(0,1).toUpperCase()).concat(e.slice(1));return Cg[t]||Ym}(r);return function(){var e=vg(Ym),t=vg(64),n=null;function r(){var r;if(n||(n=r=gg()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(t){return arguments.length?(e="function"==typeof t?t:vg(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:vg(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type(i).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*$g;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(t,n,r))()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.cx,r=e.cy,i=e.size;return n===+n&&r===+r&&i===+i?h.a.createElement("path",xg({},Im(this.props),Lm(this.props),{className:Zp()("recharts-symbols",t),transform:"translate(".concat(n,", ").concat(r,")"),d:this.getPath()})):null}}])&&wg(n.prototype,r),i&&wg(n,i),t}(u.PureComponent);Og.displayName="Symbols",Og.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yg(n,!0).forEach((function(t){_g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yg(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},wm,{className:p.a.string,type:p.a.oneOf(["circle","cross","diamond","square","star","triangle","wye"]),cx:p.a.number,cy:p.a.number,size:p.a.number,sizeType:p.a.oneOf(["area","diameter"])}),Og.defaultProps={type:"circle",size:64,sizeType:"area"};var Ag=Og;function Ig(e){return(Ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pg(){return(Pg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Lg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dg(e,t){return!t||"object"!==Ig(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jg(e){return(jg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ng(e,t){return(Ng=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fg=Mm.filter((function(e){return"none"!==e})),Ug=function(e){function t(){return kg(this,t),Dg(this,jg(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ng(e,t)}(t,e),n=t,(r=[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,n=e.inactive?t:e.color;return"plainline"===e.type?h.a.createElement("line",{strokeWidth:4,fill:"none",stroke:n,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:16,x2:32,y2:16,className:"recharts-legend-icon"}):"line"===e.type?h.a.createElement("path",{strokeWidth:4,fill:"none",stroke:n,d:"M0,".concat(16,"h").concat(32/3,"\n            A").concat(32/6,",").concat(32/6,",0,1,1,").concat(32/3*2,",").concat(16,"\n            H").concat(32,"M").concat(32/3*2,",").concat(16,"\n            A").concat(32/6,",").concat(32/6,",0,1,1,").concat(32/3,",").concat(16),className:"recharts-legend-icon"}):"rect"===e.type?h.a.createElement("path",{stroke:"none",fill:n,d:"M0,".concat(4,"h").concat(32,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"}):h.a.createElement(Ag,{fill:n,cx:16,cy:16,size:32,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,n=t.payload,r=t.iconSize,i=t.layout,o=t.formatter,a={x:0,y:0,width:32,height:32},s={display:"horizontal"===i?"inline-block":"block",marginRight:10},l={display:"inline-block",verticalAlign:"middle",marginRight:4};return n.map((function(t,n){var i,c=t.formatter||o,u=Zp()((Lg(i={"recharts-legend-item":!0},"legend-item-".concat(n),!0),Lg(i,"inactive",t.inactive),i));return"none"===t.type?null:h.a.createElement("li",Pg({className:u,style:s,key:"legend-item-".concat(n)},Rm(e.props,t,n)),h.a.createElement(Wm,{width:r,height:r,viewBox:a,style:l},e.renderIcon(t)),h.a.createElement("span",{className:"recharts-legend-item-text"},c?c(t.value,t,n):t.value))}))}},{key:"render",value:function(){var e=this.props,t=e.payload,n=e.layout,r=e.align;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:"horizontal"===n?r:"left"};return h.a.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}])&&Rg(n.prototype,r),i&&Rg(n,i),t}(u.PureComponent);Ug.displayName="Legend",Ug.propTypes={content:p.a.element,iconSize:p.a.number,iconType:p.a.oneOf(Fg),layout:p.a.oneOf(["horizontal","vertical"]),align:p.a.oneOf(["center","left","right"]),verticalAlign:p.a.oneOf(["top","bottom","middle"]),payload:p.a.arrayOf(p.a.shape({value:p.a.any,id:p.a.any,type:p.a.oneOf(Mm)})),inactiveColor:p.a.string,formatter:p.a.func,onMouseEnter:p.a.func,onMouseLeave:p.a.func,onClick:p.a.func},Ug.defaultProps={iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"};var Bg=Ug;function zg(e){return(zg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vg(n,!0).forEach((function(t){Hg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vg(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jg(e,t){return!t||"object"!==zg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yg(e){return(Yg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xg(e,t){return(Xg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Kg=function(e){return e.value},Zg=function(e,t){return!0===e?Yf()(t,Kg):qf()(e)?Yf()(t,e):t},Qg=Mm.filter((function(e){return"none"!==e})),ev=function(e){function t(){var e,n;Wg(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Jg(this,(e=Yg(t)).call.apply(e,[this].concat(i)))).state={boxWidth:-1,boxHeight:-1},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xg(e,t)}(t,e),n=t,i=[{key:"getWithHeight",value:function(e,t){var n=e.props.layout;return"vertical"===n&&dm(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],(r=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){var e=this.state,t=e.boxWidth,n=e.boxHeight;return t>=0&&n>=0?{width:t,height:n}:null}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,i=r.layout,o=r.align,a=r.verticalAlign,s=r.margin,l=r.chartWidth,c=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===o&&"vertical"===i?{left:((l||0)-(this.getBBox()||{width:0}).width)/2}:"right"===o?{right:s&&s.right||0}:{left:s&&s.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===a?{top:((c||0)-(this.getBBox()||{height:0}).height)/2}:"bottom"===a?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),Gg({},t,{},n)}},{key:"updateBBox",value:function(){var e=this.state,t=e.boxWidth,n=e.boxHeight,r=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();(Math.abs(i.width-t)>1||Math.abs(i.height-n)>1)&&this.setState({boxWidth:i.width,boxHeight:i.height},(function(){r&&r(i)}))}else-1===t&&-1===n||this.setState({boxWidth:-1,boxHeight:-1},(function(){r&&r(null)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,r=t.width,i=t.height,o=t.wrapperStyle,a=t.paylodUniqBy,s=t.payload,l=Gg({position:"absolute",width:r||"auto",height:i||"auto"},this.getDefaultPosition(o),{},o);return h.a.createElement("div",{className:"recharts-legend-wrapper",style:l,ref:function(t){e.wrapperNode=t}},function(e,t){return h.a.isValidElement(e)?h.a.cloneElement(e,t):qf()(e)?e(t):h.a.createElement(Bg,t)}(n,Gg({},this.props,{payload:Zg(a,s)})))}}])&&qg(n.prototype,r),i&&qg(n,i),t}(u.PureComponent);ev.displayName="Legend",ev.propTypes={content:p.a.oneOfType([p.a.element,p.a.func]),wrapperStyle:p.a.object,chartWidth:p.a.number,chartHeight:p.a.number,width:p.a.number,height:p.a.number,iconSize:p.a.number,iconType:p.a.oneOf(Qg),layout:p.a.oneOf(["horizontal","vertical"]),align:p.a.oneOf(["center","left","right"]),verticalAlign:p.a.oneOf(["top","bottom","middle"]),margin:p.a.shape({top:p.a.number,left:p.a.number,bottom:p.a.number,right:p.a.number}),payload:p.a.arrayOf(p.a.shape({value:p.a.any,id:p.a.any,type:p.a.oneOf(Mm)})),paylodUniqBy:p.a.oneOfType([p.a.func,p.a.bool]),formatter:p.a.func,onMouseEnter:p.a.func,onMouseLeave:p.a.func,onClick:p.a.func,onBBoxUpdate:p.a.func},ev.defaultProps={iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"};var tv=ev;function nv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iv(){return null}iv.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nv(n,!0).forEach((function(t){rv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nv(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},wm),iv.displayName="Cell";var ov=iv,av=n(740),sv=n.n(av);function lv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lv(n,!0).forEach((function(t){uv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lv(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hv(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var dv={widthCache:{},cacheCount:0},pv={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},fv=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","lineHeight","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"];var mv=function(e){return Object.keys(e).reduce((function(t,n){return"".concat(t).concat((o=n,o.split("").reduce((function(e,t){return t===t.toUpperCase()?[].concat(hv(e),["-",t.toLowerCase()]):[].concat(hv(e),[t])}),[]).join("")),":").concat((r=n,i=e[n],fv.indexOf(r)>=0&&i===+i?"".concat(i,"px"):i),";");var r,i,o}),"")},gv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||jm())return{width:0,height:0};var n="".concat(e),r=mv(t),i="".concat(n,"-").concat(r);if(dv.widthCache[i])return dv.widthCache[i];try{var o=document.getElementById("recharts_measurement_span");o||((o=document.createElement("span")).setAttribute("id","recharts_measurement_span"),document.body.appendChild(o));var a=cv({},pv,{},t);Object.keys(a).map((function(e){return o.style[e]=a[e],e})),o.textContent=n;var s=o.getBoundingClientRect(),l={width:s.width,height:s.height};return dv.widthCache[i]=l,++dv.cacheCount>2e3&&(dv.cacheCount=0,dv.widthCache={}),l}catch(e){return{width:0,height:0}}};function vv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _v(e){return(_v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bv(){return(bv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xv(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Sv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wv(e,t){return!t||"object"!==_v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ev(e){return(Ev=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tv(e,t){return(Tv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mv=/[ \f\n\r\t\v\u2028\u2029]+/,Cv=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=wv(this,Ev(t).call(this,e))).getWordsWithoutCalculate=function(e){return[{words:Kf()(e.children)?[]:e.children.toString().split(Mv)}]},n.state={wordsByLines:n.getWordsByLines(e,!0)},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tv(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.updateWordsByLines(this.props,!0)}},{key:"componentDidUpdate",value:function(e){if(e.width!==this.props.width||e.scaleToFit!==this.props.scaleToFit||e.children!==this.props.children||e.style!==this.props.style){var t=this.props.children!==e.children||this.props.style!==e.style;this.updateWordsByLines(this.props,t)}}},{key:"updateWordsByLines",value:function(e,t){this.setState({wordsByLines:this.getWordsByLines(e,t)})}},{key:"getWordsByLines",value:function(e,t){if((e.width||e.scaleToFit)&&!jm()){if(t){var n=function(e){try{return{wordsWithComputedWidth:(Kf()(e.children)?[]:e.children.toString().split(Mv)).map((function(t){return{word:t,width:gv(t,e.style).width}})),spaceWidth:gv(" ",e.style).width}}catch(e){return null}}(e);if(!n)return this.getWordsWithoutCalculate(e);var r=n.wordsWithComputedWidth,i=n.spaceWidth;this.wordsWithComputedWidth=r,this.spaceWidth=i}return this.calculateWordsByLines(this.wordsWithComputedWidth,this.spaceWidth,e.width)}return this.getWordsWithoutCalculate(e)}},{key:"calculateWordsByLines",value:function(e,t,n){var r=this.props.scaleToFit;return(e||[]).reduce((function(e,i){var o=i.word,a=i.width,s=e[e.length-1];if(s&&(null==n||r||s.width+a+t<n))s.words.push(o),s.width+=a+t;else{var l={words:[o],width:a};e.push(l)}return e}),[])}},{key:"render",value:function(){var e=this.props,t=e.dx,n=e.dy,r=e.textAnchor,i=e.verticalAnchor,o=e.scaleToFit,a=e.angle,s=e.lineHeight,l=e.capHeight,c=e.className,u=xv(e,["dx","dy","textAnchor","verticalAnchor","scaleToFit","angle","lineHeight","capHeight","className"]),d=this.state.wordsByLines;if(!pm(u.x)||!pm(u.y))return null;var p,f=u.x+(dm(t)?t:0),m=u.y+(dm(n)?n:0);switch(i){case"start":p=sv()("calc(".concat(l,")"));break;case"middle":p=sv()("calc(".concat((d.length-1)/2," * -").concat(s," + (").concat(l," / 2))"));break;default:p=sv()("calc(".concat(d.length-1," * -").concat(s,")"))}var g=[];if(o){var v=d[0].width;g.push("scale(".concat(this.props.width/v,")"))}return a&&g.push("rotate(".concat(a,", ").concat(f,", ").concat(m,")")),g.length&&(u.transform=g.join(" ")),h.a.createElement("text",bv({},Im(u),Lm(u),{x:f,y:m,className:Zp()("recharts-text",c),textAnchor:r}),d.map((function(e,t){return h.a.createElement("tspan",{x:f,dy:0===t?p:s,key:t},e.words.join(" "))})))}}])&&Sv(n.prototype,r),i&&Sv(n,i),t}(u.Component);Cv.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vv(n,!0).forEach((function(t){yv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vv(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},wm,{scaleToFit:p.a.bool,angle:p.a.number,textAnchor:p.a.oneOf(["start","middle","end","inherit"]),verticalAnchor:p.a.oneOf(["start","middle","end"]),style:p.a.object}),Cv.defaultProps={x:0,y:0,lineHeight:"1em",capHeight:"0.71em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end"};var $v=Cv,Ov=n(341),Av=n.n(Ov),Iv=n(342),Pv=n.n(Iv),Lv=n(734),kv=n.n(Lv),Rv=n(735),Dv=n.n(Rv),jv=n(736),Nv=n.n(jv),Fv=n(737),Uv=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},Bv=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return Uv(t(e),n)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}};var zv=Bv(Uv),Vv=zv.right,Gv=(zv.left,Vv);var Hv=function(e){return null===e?NaN:+e},Wv=Array.prototype,qv=(Wv.slice,Wv.map,function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}),Jv=Math.sqrt(50),Yv=Math.sqrt(10),Xv=Math.sqrt(2),Kv=function(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=Zv(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(e+s)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(e-s)/a;return r&&o.reverse(),o};function Zv(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Jv?10:o>=Yv?5:o>=Xv?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Jv?10:o>=Yv?5:o>=Xv?2:1)}function Qv(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Jv?i*=10:o>=Yv?i*=5:o>=Xv&&(i*=2),t<e?-i:i}var ey=function(e,t,n){if(null==n&&(n=Hv),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}};function ty(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function ny(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e)}return this}function ry(){}function iy(e,t){var n=new ry;if(e instanceof ry)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,i=-1,o=e.length;if(null==t)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t(r=e[i],i,e),r)}else if(e)for(var a in e)n.set(a,e[a]);return n}ry.prototype=iy.prototype={constructor:ry,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var oy=iy;function ay(){}var sy=oy.prototype;function ly(e,t){var n=new ay;if(e instanceof ay)e.each((function(e){n.add(e)}));else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}ay.prototype=ly.prototype={constructor:ay,has:sy.has,add:function(e){return this["$"+(e+="")]=e,this},remove:sy.remove,clear:sy.clear,values:sy.keys,size:sy.size,empty:sy.empty,each:sy.each};var cy=Array.prototype,uy=cy.map,hy=cy.slice,dy={name:"implicit"};function py(){var e=oy(),t=[],n=[],r=dy;function i(i){var o=i+"",a=e.get(o);if(!a){if(r!==dy)return r;e.set(o,a=t.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=oy();for(var r,o,a=-1,s=n.length;++a<s;)e.has(o=(r=n[a])+"")||e.set(o,t.push(r));return i},i.range=function(e){return arguments.length?(n=hy.call(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return py(t,n).unknown(r)},ty.apply(i,arguments),i}function fy(){var e,t,n=py().unknown(void 0),r=n.domain,i=n.range,o=[0,1],a=!1,s=0,l=0,c=.5;function u(){var n=r().length,u=o[1]<o[0],h=o[u-0],d=o[1-u];e=(d-h)/Math.max(1,n-s+2*l),a&&(e=Math.floor(e)),h+=(d-h-e*(n-s))*c,t=e*(1-s),a&&(h=Math.round(h),t=Math.round(t));var p=qv(n).map((function(t){return h+e*t}));return i(u?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),u()):r()},n.range=function(e){return arguments.length?(o=[+e[0],+e[1]],u()):o.slice()},n.rangeRound=function(e){return o=[+e[0],+e[1]],a=!0,u()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(a=!!e,u()):a},n.padding=function(e){return arguments.length?(s=Math.min(1,l=+e),u()):s},n.paddingInner=function(e){return arguments.length?(s=Math.min(1,e),u()):s},n.paddingOuter=function(e){return arguments.length?(l=+e,u()):l},n.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),u()):c},n.copy=function(){return fy(r(),o).round(a).paddingInner(s).paddingOuter(l).align(c)},ty.apply(u(),arguments)}function my(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return my(t())},e}function gy(){return my(fy.apply(null,arguments).paddingInner(1))}var vy=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function yy(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function _y(){}var by="\\s*([+-]?\\d+)\\s*",xy="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sy="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wy=/^#([0-9a-f]{3,8})$/,Ey=new RegExp("^rgb\\("+[by,by,by]+"\\)$"),Ty=new RegExp("^rgb\\("+[Sy,Sy,Sy]+"\\)$"),My=new RegExp("^rgba\\("+[by,by,by,xy]+"\\)$"),Cy=new RegExp("^rgba\\("+[Sy,Sy,Sy,xy]+"\\)$"),$y=new RegExp("^hsl\\("+[xy,Sy,Sy]+"\\)$"),Oy=new RegExp("^hsla\\("+[xy,Sy,Sy,xy]+"\\)$"),Ay={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Iy(){return this.rgb().formatHex()}function Py(){return this.rgb().formatRgb()}function Ly(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=wy.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?ky(t):3===n?new Ny(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Ry(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Ry(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Ey.exec(e))?new Ny(t[1],t[2],t[3],1):(t=Ty.exec(e))?new Ny(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=My.exec(e))?Ry(t[1],t[2],t[3],t[4]):(t=Cy.exec(e))?Ry(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=$y.exec(e))?zy(t[1],t[2]/100,t[3]/100,1):(t=Oy.exec(e))?zy(t[1],t[2]/100,t[3]/100,t[4]):Ay.hasOwnProperty(e)?ky(Ay[e]):"transparent"===e?new Ny(NaN,NaN,NaN,0):null}function ky(e){return new Ny(e>>16&255,e>>8&255,255&e,1)}function Ry(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ny(e,t,n,r)}function Dy(e){return e instanceof _y||(e=Ly(e)),e?new Ny((e=e.rgb()).r,e.g,e.b,e.opacity):new Ny}function jy(e,t,n,r){return 1===arguments.length?Dy(e):new Ny(e,t,n,null==r?1:r)}function Ny(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Fy(){return"#"+By(this.r)+By(this.g)+By(this.b)}function Uy(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function By(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function zy(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Gy(e,t,n,r)}function Vy(e){if(e instanceof Gy)return new Gy(e.h,e.s,e.l,e.opacity);if(e instanceof _y||(e=Ly(e)),!e)return new Gy;if(e instanceof Gy)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Gy(a,s,l,e.opacity)}function Gy(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Hy(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Wy(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}vy(_y,Ly,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Iy,formatHex:Iy,formatHsl:function(){return Vy(this).formatHsl()},formatRgb:Py,toString:Py}),vy(Ny,jy,yy(_y,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Ny(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Ny(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fy,formatHex:Fy,formatRgb:Uy,toString:Uy})),vy(Gy,(function(e,t,n,r){return 1===arguments.length?Vy(e):new Gy(e,t,n,null==r?1:r)}),yy(_y,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Gy(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new Gy(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ny(Hy(e>=240?e-240:e+120,i,r),Hy(e,i,r),Hy(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var qy=function(e){return function(){return e}};function Jy(e,t){return function(n){return e+n*t}}function Yy(e){return 1==(e=+e)?Xy:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):qy(isNaN(t)?n:t)}}function Xy(e,t){var n=t-e;return n?Jy(e,n):qy(isNaN(e)?t:e)}var Ky=function e(t){var n=Yy(t);function r(e,t){var r=n((e=jy(e)).r,(t=jy(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=Xy(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function Zy(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=jy(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}Zy((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return Wy((n-r/t)*t,a,i,o,s)}})),Zy((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return Wy((n-r/t)*t,i,o,a,s)}}));var Qy=function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}};function e_(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function t_(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=l_(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}var n_=function(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}},r_=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}},i_=function(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=l_(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}},o_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,a_=new RegExp(o_.source,"g");var s_=function(e,t){var n,r,i,o=o_.lastIndex=a_.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=o_.exec(e))&&(r=a_.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:r_(n,r)})),o=a_.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})},l_=function(e,t){var n,r=typeof t;return null==t||"boolean"===r?qy(t):("number"===r?r_:"string"===r?(n=Ly(t))?(t=n,Ky):s_:t instanceof Ly?Ky:t instanceof Date?n_:e_(t)?Qy:Array.isArray(t)?t_:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?i_:r_)(e,t)},c_=function(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}},u_=function(e){return+e},h_=[0,1];function d_(e){return e}function p_(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function f_(e){var t,n=e[0],r=e[e.length-1];return n>r&&(t=n,n=r,r=t),function(e){return Math.max(n,Math.min(r,e))}}function m_(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=p_(i,r),o=n(a,o)):(r=p_(r,i),o=n(o,a)),function(e){return o(r(e))}}function g_(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=p_(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=Gv(e,t,1,r)-1;return o[n](i[n](t))}}function v_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function y_(){var e,t,n,r,i,o,a=h_,s=h_,l=l_,c=d_;function u(){return r=Math.min(a.length,s.length)>2?g_:m_,i=o=null,h}function h(t){return isNaN(t=+t)?n:(i||(i=r(a.map(e),s,l)))(e(c(t)))}return h.invert=function(n){return c(t((o||(o=r(s,a.map(e),r_)))(n)))},h.domain=function(e){return arguments.length?(a=uy.call(e,u_),c===d_||(c=f_(a)),u()):a.slice()},h.range=function(e){return arguments.length?(s=hy.call(e),u()):s.slice()},h.rangeRound=function(e){return s=hy.call(e),l=c_,u()},h.clamp=function(e){return arguments.length?(c=e?f_(a):d_,h):c!==d_},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,u()}}function __(e,t){return y_()(e,t)}var b_=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function x_(e){if(!(t=b_.exec(e)))throw new Error("invalid format: "+e);var t;return new S_({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function S_(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}x_.prototype=S_.prototype,S_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var w_,E_,T_,M_,C_=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]},$_=function(e){return(e=C_(Math.abs(e)))?e[1]:NaN},O_=function(e,t){var n=C_(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},A_={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return O_(100*e,t)},r:O_,s:function(e,t){var n=C_(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(w_=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+C_(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},I_=function(e){return e},P_=Array.prototype.map,L_=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];E_=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?I_:(t=P_.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?I_:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(P_.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"-":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=x_(e)).fill,n=e.align,h=e.sign,d=e.symbol,p=e.zero,f=e.width,m=e.comma,g=e.precision,v=e.trim,y=e.type;"n"===y?(m=!0,y="g"):A_[y]||(void 0===g&&(g=12),v=!0,y="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var _="$"===d?i:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===d?o:/[%p]/.test(y)?l:"",x=A_[y],S=/[defgprs%]/.test(y);function w(e){var i,o,l,d=_,w=b;if("c"===y)w=x(e)+w,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:x(Math.abs(e),g),v&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0==+e&&"+"!==h&&(E=!1),d=(E?"("===h?h:c:"-"===h||"("===h?"":h)+d,w=("s"===y?L_[8+w_/3]:"")+w+(E&&"("===h?")":""),S)for(i=-1,o=e.length;++i<o;)if(48>(l=e.charCodeAt(i))||l>57){w=(46===l?a+e.slice(i+1):e.slice(i))+w,e=e.slice(0,i);break}}m&&!p&&(e=r(e,1/0));var T=d.length+e.length+w.length,M=T<f?new Array(f-T+1).join(t):"";switch(m&&p&&(e=r(M+e,M.length?f-w.length:1/0),M=""),n){case"<":e=d+e+w+M;break;case"=":e=d+M+e+w;break;case"^":e=M.slice(0,T=M.length>>1)+d+e+w+M.slice(T);break;default:e=M+d+e+w}return s(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),w.toString=function(){return e+""},w}return{format:h,formatPrefix:function(e,t){var n=h(((e=x_(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor($_(t)/3))),i=Math.pow(10,-r),o=L_[8+r/3];return function(e){return n(i*e)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),T_=E_.format,M_=E_.formatPrefix;var k_=function(e,t,n,r){var i,o=Qv(e,t,n);switch((r=x_(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor($_(t)/3)))-$_(Math.abs(e)))}(o,a))||(r.precision=i),M_(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,$_(t)-$_(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-$_(Math.abs(e)))}(o))||(r.precision=i-2*("%"===r.type))}return T_(r)};function R_(e){var t=e.domain;return e.ticks=function(e){var n=t();return Kv(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return k_(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),o=0,a=i.length-1,s=i[o],l=i[a];return l<s&&(r=s,s=l,l=r,r=o,o=a,a=r),(r=Zv(s,l,n))>0?r=Zv(s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r,n):r<0&&(r=Zv(s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(l/r)*r,t(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(l*r)/r,t(i)),e},e}function D_(){var e=__(d_,d_);return e.copy=function(){return v_(e,D_())},ty.apply(e,arguments),R_(e)}function j_(e){var t;function n(e){return isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=uy.call(t,u_),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return j_(e).unknown(t)},e=arguments.length?uy.call(e,u_):[0,1],R_(n)}var N_=function(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e};function F_(e){return Math.log(e)}function U_(e){return Math.exp(e)}function B_(e){return-Math.log(-e)}function z_(e){return-Math.exp(-e)}function V_(e){return isFinite(e)?+("1e"+e):e<0?0:e}function G_(e){return function(t){return-e(-t)}}function H_(e){var t,n,r=e(F_,U_),i=r.domain,o=10;function a(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(o),n=function(e){return 10===e?V_:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(o),i()[0]<0?(t=G_(t),n=G_(n),e(B_,z_)):e(F_,U_),r}return r.base=function(e){return arguments.length?(o=+e,a()):o},r.domain=function(e){return arguments.length?(i(e),a()):i()},r.ticks=function(e){var r,a=i(),s=a[0],l=a[a.length-1];(r=l<s)&&(d=s,s=l,l=d);var c,u,h,d=t(s),p=t(l),f=null==e?10:+e,m=[];if(!(o%1)&&p-d<f){if(d=Math.round(d)-1,p=Math.round(p)+1,s>0){for(;d<p;++d)for(u=1,c=n(d);u<o;++u)if(!((h=c*u)<s)){if(h>l)break;m.push(h)}}else for(;d<p;++d)for(u=o-1,c=n(d);u>=1;--u)if(!((h=c*u)<s)){if(h>l)break;m.push(h)}}else m=Kv(d,p,Math.min(p-d,f)).map(n);return r?m.reverse():m},r.tickFormat=function(e,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=T_(i)),e===1/0)return i;null==e&&(e=10);var a=Math.max(1,o*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*o<o-.5&&(r*=o),r<=a?i(e):""}},r.nice=function(){return i(N_(i(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function W_(){var e=H_(y_()).domain([1,10]);return e.copy=function(){return v_(e,W_()).base(e.base())},ty.apply(e,arguments),e}function q_(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function J_(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Y_(e){var t=1,n=e(q_(t),J_(t));return n.constant=function(n){return arguments.length?e(q_(t=+n),J_(t)):t},R_(n)}function X_(){var e=Y_(y_());return e.copy=function(){return v_(e,X_()).constant(e.constant())},ty.apply(e,arguments)}function K_(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Z_(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Q_(e){return e<0?-e*e:e*e}function eb(e){var t=e(d_,d_),n=1;function r(){return 1===n?e(d_,d_):.5===n?e(Z_,Q_):e(K_(n),K_(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},R_(t)}function tb(){var e=eb(y_());return e.copy=function(){return v_(e,tb()).exponent(e.exponent())},ty.apply(e,arguments),e}function nb(){return tb.apply(null,arguments).exponent(.5)}function rb(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=ey(t,e/i);return o}function o(t){return isNaN(t=+t)?e:n[Gv(r,t)]}return o.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var n,r=0,o=e.length;r<o;++r)null==(n=e[r])||isNaN(n=+n)||t.push(n);return t.sort(Uv),i()},o.range=function(e){return arguments.length?(n=hy.call(e),i()):n.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return rb().domain(t).range(n).unknown(e)},ty.apply(o,arguments)}function ib(){var e,t=0,n=1,r=1,i=[.5],o=[0,1];function a(t){return t<=t?o[Gv(i,t,0,r)]:e}function s(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return a}return a.domain=function(e){return arguments.length?(t=+e[0],n=+e[1],s()):[t,n]},a.range=function(e){return arguments.length?(r=(o=hy.call(e)).length-1,s()):o.slice()},a.invertExtent=function(e){var a=o.indexOf(e);return a<0?[NaN,NaN]:a<1?[t,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return ib().domain([t,n]).range(o).unknown(e)},ty.apply(R_(a),arguments)}function ob(){var e,t=[.5],n=[0,1],r=1;function i(i){return i<=i?n[Gv(t,i,0,r)]:e}return i.domain=function(e){return arguments.length?(t=hy.call(e),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(e){return arguments.length?(n=hy.call(e),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return ob().domain(t).range(n).unknown(e)},ty.apply(i,arguments)}var ab=new Date,sb=new Date;function lb(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return s},i.filter=function(n){return lb((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return ab.setTime(+t),sb.setTime(+r),e(ab),e(sb),Math.floor(n(ab,sb))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var cb=lb((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));cb.every=function(e){return isFinite(e=Math.floor(e))&&e>0?lb((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var ub=cb,hb=(cb.range,lb((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),db=hb;hb.range;function pb(e){return lb((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5}))}var fb=pb(0),mb=pb(1),gb=pb(2),vb=pb(3),yb=pb(4),_b=pb(5),bb=pb(6),xb=(fb.range,mb.range,gb.range,vb.range,yb.range,_b.range,bb.range,lb((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5}),(function(e){return e.getDate()-1}))),Sb=xb,wb=(xb.range,lb((function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getHours()}))),Eb=wb,Tb=(wb.range,lb((function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())}),(function(e,t){e.setTime(+e+6e4*t)}),(function(e,t){return(t-e)/6e4}),(function(e){return e.getMinutes()}))),Mb=Tb,Cb=(Tb.range,lb((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+1e3*t)}),(function(e,t){return(t-e)/1e3}),(function(e){return e.getUTCSeconds()}))),$b=Cb,Ob=(Cb.range,lb((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e})));Ob.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?lb((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Ob:null};var Ab=Ob;Ob.range;function Ib(e){return lb((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/6048e5}))}var Pb=Ib(0),Lb=Ib(1),kb=Ib(2),Rb=Ib(3),Db=Ib(4),jb=Ib(5),Nb=Ib(6),Fb=(Pb.range,Lb.range,kb.range,Rb.range,Db.range,jb.range,Nb.range,lb((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/864e5}),(function(e){return e.getUTCDate()-1}))),Ub=Fb,Bb=(Fb.range,lb((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));Bb.every=function(e){return isFinite(e=Math.floor(e))&&e>0?lb((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var zb=Bb;Bb.range;function Vb(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Gb(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Hb(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Wb,qb,Jb,Yb={"-":"",_:" ",0:"0"},Xb=/^\s*\d+/,Kb=/^%/,Zb=/[\\^$*+?|[\]().{}]/g;function Qb(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function ex(e){return e.replace(Zb,"\\$&")}function tx(e){return new RegExp("^(?:"+e.map(ex).join("|")+")","i")}function nx(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function rx(e,t,n){var r=Xb.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ix(e,t,n){var r=Xb.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function ox(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function ax(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function sx(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function lx(e,t,n){var r=Xb.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function cx(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ux(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function hx(e,t,n){var r=Xb.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function dx(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function px(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function fx(e,t,n){var r=Xb.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function mx(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function gx(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function vx(e,t,n){var r=Xb.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function yx(e,t,n){var r=Xb.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function _x(e,t,n){var r=Xb.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function bx(e,t,n){var r=Kb.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function xx(e,t,n){var r=Xb.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Sx(e,t,n){var r=Xb.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function wx(e,t){return Qb(e.getDate(),t,2)}function Ex(e,t){return Qb(e.getHours(),t,2)}function Tx(e,t){return Qb(e.getHours()%12||12,t,2)}function Mx(e,t){return Qb(1+Sb.count(ub(e),e),t,3)}function Cx(e,t){return Qb(e.getMilliseconds(),t,3)}function $x(e,t){return Cx(e,t)+"000"}function Ox(e,t){return Qb(e.getMonth()+1,t,2)}function Ax(e,t){return Qb(e.getMinutes(),t,2)}function Ix(e,t){return Qb(e.getSeconds(),t,2)}function Px(e){var t=e.getDay();return 0===t?7:t}function Lx(e,t){return Qb(fb.count(ub(e)-1,e),t,2)}function kx(e,t){var n=e.getDay();return e=n>=4||0===n?yb(e):yb.ceil(e),Qb(yb.count(ub(e),e)+(4===ub(e).getDay()),t,2)}function Rx(e){return e.getDay()}function Dx(e,t){return Qb(mb.count(ub(e)-1,e),t,2)}function jx(e,t){return Qb(e.getFullYear()%100,t,2)}function Nx(e,t){return Qb(e.getFullYear()%1e4,t,4)}function Fx(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Qb(t/60|0,"0",2)+Qb(t%60,"0",2)}function Ux(e,t){return Qb(e.getUTCDate(),t,2)}function Bx(e,t){return Qb(e.getUTCHours(),t,2)}function zx(e,t){return Qb(e.getUTCHours()%12||12,t,2)}function Vx(e,t){return Qb(1+Ub.count(zb(e),e),t,3)}function Gx(e,t){return Qb(e.getUTCMilliseconds(),t,3)}function Hx(e,t){return Gx(e,t)+"000"}function Wx(e,t){return Qb(e.getUTCMonth()+1,t,2)}function qx(e,t){return Qb(e.getUTCMinutes(),t,2)}function Jx(e,t){return Qb(e.getUTCSeconds(),t,2)}function Yx(e){var t=e.getUTCDay();return 0===t?7:t}function Xx(e,t){return Qb(Pb.count(zb(e)-1,e),t,2)}function Kx(e,t){var n=e.getUTCDay();return e=n>=4||0===n?Db(e):Db.ceil(e),Qb(Db.count(zb(e),e)+(4===zb(e).getUTCDay()),t,2)}function Zx(e){return e.getUTCDay()}function Qx(e,t){return Qb(Lb.count(zb(e)-1,e),t,2)}function eS(e,t){return Qb(e.getUTCFullYear()%100,t,2)}function tS(e,t){return Qb(e.getUTCFullYear()%1e4,t,4)}function nS(){return"+0000"}function rS(){return"%"}function iS(e){return+e}function oS(e){return Math.floor(+e/1e3)}!function(e){Wb=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,c=tx(i),u=nx(i),h=tx(o),d=nx(o),p=tx(a),f=nx(a),m=tx(s),g=nx(s),v=tx(l),y=nx(l),_={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:wx,e:wx,f:$x,H:Ex,I:Tx,j:Mx,L:Cx,m:Ox,M:Ax,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:iS,s:oS,S:Ix,u:Px,U:Lx,V:kx,w:Rx,W:Dx,x:null,X:null,y:jx,Y:Nx,Z:Fx,"%":rS},b={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Ux,e:Ux,f:Hx,H:Bx,I:zx,j:Vx,L:Gx,m:Wx,M:qx,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:iS,s:oS,S:Jx,u:Yx,U:Xx,V:Kx,w:Zx,W:Qx,x:null,X:null,y:eS,Y:tS,Z:nS,"%":rS},x={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=f[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=d[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return E(e,t,n,r)},d:px,e:px,f:_x,H:mx,I:mx,j:fx,L:yx,m:dx,M:gx,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u[r[0].toLowerCase()],n+r[0].length):-1},q:hx,Q:xx,s:Sx,S:vx,u:ix,U:ox,V:ax,w:rx,W:sx,x:function(e,t,r){return E(e,n,t,r)},X:function(e,t,n){return E(e,r,t,n)},y:cx,Y:lx,Z:ux,"%":bx};function S(e,t){return function(n){var r,i,o,a=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=Yb[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function w(e,t){return function(n){var r,i,o=Hb(1900,void 0,1);if(E(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Gb(Hb(o.y,0,1))).getUTCDay(),r=i>4||0===i?Lb.ceil(r):Lb(r),r=Ub.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Vb(Hb(o.y,0,1))).getDay(),r=i>4||0===i?mb.ceil(r):mb(r),r=Sb.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Gb(Hb(o.y,0,1)).getUTCDay():Vb(Hb(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Gb(o)):Vb(o)}}function E(e,t,n,r){for(var i,o,a=0,s=t.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=x[i in Yb?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=S(n,_),_.X=S(r,_),_.c=S(t,_),b.x=S(n,b),b.X=S(r,b),b.c=S(t,b),{format:function(e){var t=S(e+="",_);return t.toString=function(){return e},t},parse:function(e){var t=w(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=S(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=w(e+="",!0);return t.toString=function(){return e},t}}}(e),qb=Wb.format,Wb.parse,Jb=Wb.utcFormat,Wb.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function aS(e){return new Date(e)}function sS(e){return e instanceof Date?+e:+new Date(+e)}function lS(e,t,n,r,i,o,a,s,l){var c=__(d_,d_),u=c.invert,h=c.domain,d=l(".%L"),p=l(":%S"),f=l("%I:%M"),m=l("%I %p"),g=l("%a %d"),v=l("%b %d"),y=l("%B"),_=l("%Y"),b=[[a,1,1e3],[a,5,5e3],[a,15,15e3],[a,30,3e4],[o,1,6e4],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,864e5],[r,2,1728e5],[n,1,6048e5],[t,1,2592e6],[t,3,7776e6],[e,1,31536e6]];function x(s){return(a(s)<s?d:o(s)<s?p:i(s)<s?f:r(s)<s?m:t(s)<s?n(s)<s?g:v:e(s)<s?y:_)(s)}function S(t,n,r,i){if(null==t&&(t=10),"number"==typeof t){var o=Math.abs(r-n)/t,a=Bv((function(e){return e[2]})).right(b,o);a===b.length?(i=Qv(n/31536e6,r/31536e6,t),t=e):a?(i=(a=b[o/b[a-1][2]<b[a][2]/o?a-1:a])[1],t=a[0]):(i=Math.max(Qv(n,r,t),1),t=s)}return null==i?t:t.every(i)}return c.invert=function(e){return new Date(u(e))},c.domain=function(e){return arguments.length?h(uy.call(e,sS)):h().map(aS)},c.ticks=function(e,t){var n,r=h(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=(n=S(e,i,o,t))?n.range(i,o+1):[],a?n.reverse():n},c.tickFormat=function(e,t){return null==t?x:l(t)},c.nice=function(e,t){var n=h();return(e=S(e,n[0],n[n.length-1],t))?h(N_(n,e)):c},c.copy=function(){return v_(c,lS(e,t,n,r,i,o,a,s,l))},c}var cS=function(){return ty.apply(lS(ub,db,fb,Sb,Eb,Mb,$b,Ab,qb).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},uS=lb((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})),hS=uS,dS=(uS.range,lb((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+36e5*t)}),(function(e,t){return(t-e)/36e5}),(function(e){return e.getUTCHours()}))),pS=dS,fS=(dS.range,lb((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+6e4*t)}),(function(e,t){return(t-e)/6e4}),(function(e){return e.getUTCMinutes()}))),mS=fS,gS=(fS.range,function(){return ty.apply(lS(zb,hS,Pb,Ub,pS,mS,$b,Ab,Jb).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)});function vS(){var e,t,n,r,i,o=0,a=1,s=d_,l=!1;function c(t){return isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}return c.domain=function(i){return arguments.length?(e=r(o=+i[0]),t=r(a=+i[1]),n=e===t?0:1/(t-e),c):[o,a]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(s=e,c):s},c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),c}}function yS(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function _S(){var e=R_(vS()(d_));return e.copy=function(){return yS(e,_S())},ny.apply(e,arguments)}function bS(){var e=H_(vS()).domain([1,10]);return e.copy=function(){return yS(e,bS()).base(e.base())},ny.apply(e,arguments)}function xS(){var e=Y_(vS());return e.copy=function(){return yS(e,xS()).constant(e.constant())},ny.apply(e,arguments)}function SS(){var e=eb(vS());return e.copy=function(){return yS(e,SS()).exponent(e.exponent())},ny.apply(e,arguments)}function wS(){return SS.apply(null,arguments).exponent(.5)}function ES(){var e=[],t=d_;function n(n){if(!isNaN(n=+n))return t((Gv(e,n)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var r,i=0,o=t.length;i<o;++i)null==(r=t[i])||isNaN(r=+r)||e.push(r);return e.sort(Uv),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return ES(t).domain(e)},ny.apply(n,arguments)}function TS(){var e,t,n,r,i,o,a,s=0,l=.5,c=1,u=d_,h=!1;function d(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(e<t?r:i),u(h?Math.max(0,Math.min(1,e)):e))}return d.domain=function(a){return arguments.length?(e=o(s=+a[0]),t=o(l=+a[1]),n=o(c=+a[2]),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),d):[s,l,c]},d.clamp=function(e){return arguments.length?(h=!!e,d):h},d.interpolator=function(e){return arguments.length?(u=e,d):u},d.unknown=function(e){return arguments.length?(a=e,d):a},function(a){return o=a,e=a(s),t=a(l),n=a(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),d}}function MS(){var e=R_(TS()(d_));return e.copy=function(){return yS(e,MS())},ny.apply(e,arguments)}function CS(){var e=H_(TS()).domain([.1,1,10]);return e.copy=function(){return yS(e,CS()).base(e.base())},ny.apply(e,arguments)}function $S(){var e=Y_(TS());return e.copy=function(){return yS(e,$S()).constant(e.constant())},ny.apply(e,arguments)}function OS(){var e=eb(TS());return e.copy=function(){return yS(e,OS()).exponent(e.exponent())},ny.apply(e,arguments)}function AS(){return OS.apply(null,arguments).exponent(.5)}var IS=function(e,t){if((i=e.length)>1)for(var n,r,i,o=1,a=e[t[0]],s=a.length;o<i;++o)for(r=a,a=e[t[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},PS=Array.prototype.slice,LS=function(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n};function kS(e,t){return e[t]}function RS(){return(RS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function DS(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var jS={className:p.a.string,children:p.a.oneOfType([p.a.arrayOf(p.a.node),p.a.node])};function NS(e){var t=e.children,n=e.className,r=DS(e,["children","className"]),i=Zp()("recharts-layer",n);return h.a.createElement("g",RS({className:i},r),t)}NS.propTypes=jS;var FS=NS;function US(e){return(US="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BS(){return(BS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function zS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function VS(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function GS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WS(e,t){return!t||"object"!==US(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qS(e){return(qS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JS(e,t){return(JS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var YS=function(e){function t(){return GS(this,t),WS(this,qS(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JS(e,t)}(t,e),n=t,(r=[{key:"renderErrorBars",value:function(){var e=this.props,t=e.offset,n=e.layout,r=e.width,i=e.dataKey,o=e.data,a=e.dataPointFormatter,s=e.xAxis,l=e.yAxis,c=VS(e,["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"]),u=Im(c);return o.map((function(e,o){var c,d,p,f,m,g,v,y,_,b,x,S,w=a(e,i),E=w.x,T=w.y,M=w.value,C=w.errorVal;if(!C)return null;if(Array.isArray(C)){var $=zS(C,2);x=$[0],S=$[1]}else x=S=C;return"vertical"===n?(v=s.scale,d=T+t,p=v((c=M)-x),f=d+r,y={x1:m=v(c+S),y1:f,x2:m,y2:g=d-r},_={x1:p,y1:d,x2:m,y2:d},b={x1:p,y1:f,x2:p,y2:g}):"horizontal"===n&&(v=l.scale,p=(c=E+t)-r,m=c+r,f=v((d=M)-x),y={x1:p,y1:g=v(d+S),x2:m,y2:g},_={x1:c,y1:f,x2:c,y2:g},b={x1:p,y1:f,x2:m,y2:f}),h.a.createElement(FS,BS({className:"recharts-errorBar",key:"bar-".concat(o)},u),h.a.createElement("line",y),h.a.createElement("line",_),h.a.createElement("line",b))}))}},{key:"render",value:function(){return h.a.createElement(FS,{className:"recharts-errorBars"},this.renderErrorBars())}}])&&HS(n.prototype,r),i&&HS(n,i),t}(u.Component);YS.propTypes={dataKey:p.a.oneOfType([p.a.string,p.a.number,p.a.func]).isRequired,data:p.a.array,xAxis:p.a.object,yAxis:p.a.object,layout:p.a.string,dataPointFormatter:p.a.func,stroke:p.a.string,strokeWidth:p.a.number,width:p.a.number,offset:p.a.number},YS.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};var XS=YS;function KS(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ZS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZS(n,!0).forEach((function(t){ew(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZS(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ew(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tw=function(e,t,n){return Kf()(e)||Kf()(t)?n:pm(t)?om()(e,t,n):qf()(t)?t(e):n},nw=function(e,t,n,r){var i=Nv()(e,(function(e){return tw(e,t)}));if("number"===n){var o=i.filter((function(e){return dm(e)||parseFloat(e,10)}));return o.length?[Dv()(o),kv()(o)]:[1/0,-1/0]}return(r?i.filter((function(e){return!Kf()(e)})):i).map((function(e){return pm(e)?e:""}))},rw=function(e){var t,n=e.type.displayName,r=e.props,i=r.stroke,o=r.fill;switch(n){case"Line":t=i;break;case"Area":case"Radar":t=i&&"none"!==i?i:o;break;default:t=o}return t},iw=function(e){var t,n=e.children,r=e.formatedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=Am(n,tv);return a?(t=a.props&&a.props.payload?a.props&&a.props.payload:"children"===o?(r||[]).reduce((function(e,t){var n=t.item,r=t.props,i=r.sectors||r.data||[];return e.concat(i.map((function(e){return{type:a.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}})))}),[]):(r||[]).map((function(e){var t=e.item,n=t.props,r=n.dataKey,i=n.name,o=n.legendType;return{inactive:n.hide,dataKey:r,type:a.props.iconType||o||"square",color:rw(t),value:i||r,payload:t.props}})),QS({},a.props,{},tv.getWithHeight(a,i),{payload:t,item:a})):null},ow=function(e,t,n,r){var i=t.props.children,o=Om(i,XS).filter((function(e){var t=e.props.direction;return!(!Kf()(t)&&!Kf()(r))||r.indexOf(t)>=0}));if(o&&o.length){var a=o.map((function(e){return e.props.dataKey}));return e.reduce((function(e,t){var r=tw(t,n,0),i=rm()(r)?[Dv()(r),kv()(r)]:[r,r],o=a.reduce((function(e,n){var r=tw(t,n,0),o=i[0]-Math.abs(rm()(r)?r[0]:r),a=i[1]+Math.abs(rm()(r)?r[1]:r);return[Math.min(o,e[0]),Math.max(a,e[1])]}),[1/0,-1/0]);return[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}),[1/0,-1/0])}return null},aw=function(e,t,n,r){var i=t.map((function(t){var i=t.props.dataKey;return"number"===n&&i&&ow(e,t,i)||nw(e,i,n,r)}));if("number"===n)return i.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]);var o={};return i.reduce((function(e,t){for(var n=0,r=t.length;n<r;n++)o[t[n]]||(o[t[n]]=!0,e.push(t[n]));return e}),[])},sw=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},lw=function(e,t,n){var r,i,o=e.map((function(e){return e.coordinate===t&&(r=!0),e.coordinate===n&&(i=!0),e.coordinate}));return r||o.push(t),i||o.push(n),o},cw=function(e,t,n){if(!e)return null;var r=e.scale,i=e.duplicateDomain,o=e.type,a=e.range,s=(t||n)&&"category"===o&&r.bandwidth?r.bandwidth()/2:0;return s="angleAxis"===e.axisType?2*um(a[0]-a[1])*s:s,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map((function(e){var t=i?i.indexOf(e):e;return{coordinate:r(t)+s,value:e,offset:s}})):e.isCategorial&&e.categoricalDomain?e.categoricalDomain.map((function(e,t){return{coordinate:r(e),value:e,index:t,offset:s}})):r.ticks&&!n?r.ticks(e.tickCount).map((function(e){return{coordinate:r(e)+s,value:e,offset:s}})):r.domain().map((function(e,t){return{coordinate:r(e)+s,value:i?i[e]:e,index:t,offset:s}}))},uw=function(e,t,n){var r;return qf()(n)?r=n:qf()(t)&&(r=t),qf()(e)||r?function(t,n,i,o){qf()(e)&&e(t,n,i,o),qf()(r)&&r(t,n,i,o)}:null},hw=function(e,t){var n=e.scale,r=e.type,o=e.layout,a=e.axisType;if("auto"===n)return"radial"===o&&"radiusAxis"===a?{scale:fy(),realScaleType:"band"}:"radial"===o&&"angleAxis"===a?{scale:D_(),realScaleType:"linear"}:"category"===r&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0)?{scale:gy(),realScaleType:"point"}:"category"===r?{scale:fy(),realScaleType:"band"}:{scale:D_(),realScaleType:"linear"};if(Qf()(n)){var s="scale".concat(n.slice(0,1).toUpperCase()).concat(n.slice(1));return{scale:(i[s]||gy)(),realScaleType:i[s]?s:"point"}}return qf()(n)?{scale:n}:{scale:gy(),realScaleType:"point"}},dw=function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-1e-4,o=Math.max(r[0],r[1])+1e-4,a=e(t[0]),s=e(t[n-1]);(a<i||a>o||s<i||s>o)&&e.domain([t[0],t[n-1]])}},pw={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0,a=0;a<t;++a){var s=sm()(e[a][n][1])?e[a][n][0]:e[a][n][1];s>=0?(e[a][n][0]=i,e[a][n][1]=i+s,i=e[a][n][1]):(e[a][n][0]=o,e[a][n][1]=o+s,o=e[a][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,i,o=0,a=e[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=e[n][o][1]||0;if(i)for(n=0;n<r;++n)e[n][o][1]/=i}IS(e,t)}},none:IS,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=e[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}IS(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,l=0,c=0;s<i;++s){for(var u=e[t[s]],h=u[a][1]||0,d=(h-(u[a-1][1]||0))/2,p=0;p<s;++p){var f=e[t[p]];d+=(f[a][1]||0)-(f[a-1][1]||0)}l+=h,c+=d*h}n[a-1][1]+=n[a-1][0]=o,l&&(o-=c/l)}n[a-1][1]+=n[a-1][0]=o,IS(e,t)}}},fw=function(e,t,n){var r=t.map((function(e){return e.props.dataKey}));return function(){var e=vg([]),t=LS,n=IS,r=kS;function i(i){var o,a,s=e.apply(this,arguments),l=i.length,c=s.length,u=new Array(c);for(o=0;o<c;++o){for(var h,d=s[o],p=u[o]=new Array(l),f=0;f<l;++f)p[f]=h=[0,+r(i[f],d,f,i)],h.data=i[f];p.key=d}for(o=0,a=t(u);o<c;++o)u[a[o]].index=o;return n(u,a),u}return i.keys=function(t){return arguments.length?(e="function"==typeof t?t:vg(PS.call(t)),i):e},i.value=function(e){return arguments.length?(r="function"==typeof e?e:vg(+e),i):r},i.order=function(e){return arguments.length?(t=null==e?LS:"function"==typeof e?e:vg(PS.call(e)),i):t},i.offset=function(e){return arguments.length?(n=null==e?IS:e,i):n},i}().keys(r).value((function(e,t){return+tw(e,t,0)})).order(LS).offset(pw[n])(e)},mw=function(e,t){var n=t.realScaleType,r=t.type,i=t.tickCount,o=t.originalDomain,a=t.allowDecimals,s=n||t.scale;if("auto"!==s&&"linear"!==s)return null;if(i&&"number"===r&&o&&("auto"===o[0]||"auto"===o[1])){var l=e.domain(),c=Object(Fv.getNiceTickValues)(l,i,a);return e.domain(function(e,t){return"number"===t?[Dv()(e),kv()(e)]:e}(c,r)),{niceTicks:c}}if(i&&"number"===r){var u=e.domain();return{niceTicks:Object(Fv.getTickValuesFixedDomain)(u,i,a)}}return null},gw=function(e,t,n){return Object.keys(e).reduce((function(r,i){var o=e[i].stackedData.reduce((function(e,r){var i=r.slice(t,n+1).reduce((function(e,t){return[Dv()(t.concat([e[0]]).filter(dm)),kv()(t.concat([e[1]]).filter(dm))]}),[1/0,-1/0]);return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]}),[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]}),[1/0,-1/0]).map((function(e){return e===1/0||e===-1/0?0:e}))},vw=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,yw=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_w=function(e,t,n){if(!rm()(e))return t;var r=[];if(dm(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(vw.test(e[0])){var i=+vw.exec(e[0])[1];r[0]=t[0]-i}else qf()(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(dm(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(yw.test(e[1])){var o=+yw.exec(e[1])[1];r[1]=t[1]+o}else qf()(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},bw=function(e,t){if(e&&e.scale&&e.scale.bandwidth)return e.scale.bandwidth();if(e&&t&&t.length>=2){for(var n=Pv()(t,(function(e){return e.coordinate})),r=1/0,i=1,o=n.length;i<o;i++){var a=n[i],s=n[i-1];r=Math.min((a.coordinate||0)-(s.coordinate||0),r)}return r===1/0?0:r}return 0},xw=function(e,t,n){return e&&e.length?Av()(e,om()(n,"type.defaultProps.domain"))?t:e:t};function Sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ww(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sw(n,!0).forEach((function(t){Ew(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sw(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ew(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Mw=Math.PI/180,Cw=function(e){return 180*e/Math.PI},$w=function(e,t,n,r){return{x:e+Math.cos(-Mw*r)*n,y:t+Math.sin(-Mw*r)*n}},Ow=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},Aw=function(e,t){var n,r,i,o,a,s,l=e.x,c=e.y,u=t.cx,h=t.cy,d=(r={x:u,y:h},i=(n={x:l,y:c}).x,o=n.y,a=r.x,s=r.y,Math.sqrt(Math.pow(i-a,2)+Math.pow(o-s,2)));if(d<=0)return{radius:d};var p=(l-u)/d,f=Math.acos(p);return c>h&&(f=2*Math.PI-f),{radius:d,angle:Cw(f),angleInRadian:f}},Iw=function(e,t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),o=Math.floor(r/360);return e+360*Math.min(i,o)},Pw=function(e,t){var n=e.x,r=e.y,i=Aw({x:n,y:r},t),o=i.radius,a=i.angle,s=t.innerRadius,l=t.outerRadius;if(o<s||o>l)return!1;if(0===o)return!0;var c,u=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:t-360*o,endAngle:n-360*o}}(t),h=u.startAngle,d=u.endAngle,p=a;if(h<=d){for(;p>d;)p-=360;for(;p<h;)p+=360;c=p>=h&&p<=d}else{for(;p>h;)p-=360;for(;p<d;)p+=360;c=p>=d&&p<=h}return c?ww({},t,{radius:o,angle:Iw(p,t)}):null};function Lw(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function kw(){return(kw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Rw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jw=p.a.shape({x:p.a.number,y:p.a.number,width:p.a.number,height:p.a.number}),Nw=p.a.shape({cx:p.a.number,cy:p.a.number,innerRadius:p.a.number,outerRadius:p.a.number,startAngle:p.a.number,endAngle:p.a.number}),Fw=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rw(n,!0).forEach((function(t){Dw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rw(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},wm,{viewBox:p.a.oneOfType([jw,Nw]),formatter:p.a.func,value:p.a.oneOfType([p.a.number,p.a.string]),offset:p.a.number,position:p.a.oneOf(["top","left","right","bottom","inside","outside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight","insideStart","insideEnd","end","center","centerTop","centerBottom"]),children:p.a.oneOfType([p.a.arrayOf(p.a.node),p.a.node]),className:p.a.string,content:p.a.oneOfType([p.a.element,p.a.func])}),Uw=function(e,t,n){var r,i,o=e.position,a=e.viewBox,s=e.offset,l=e.className,c=a.cx,u=a.cy,d=a.innerRadius,p=a.outerRadius,f=a.startAngle,m=a.endAngle,g=a.clockWise,v=(d+p)/2,y=function(e,t){return um(t-e)*Math.min(Math.abs(t-e),360)}(f,m),_=y>=0?1:-1;"insideStart"===o?(r=f+_*s,i=g):"insideEnd"===o?(r=m-_*s,i=!g):"end"===o&&(r=m+_*s,i=g),i=y<=0?i:!i;var b=$w(c,u,v,r),x=$w(c,u,v,r+359*(i?1:-1)),S="M".concat(b.x,",").concat(b.y,"\n    A").concat(v,",").concat(v,",0,1,").concat(i?0:1,",\n    ").concat(x.x,",").concat(x.y),w=Kf()(e.id)?mm("recharts-radial-line-"):e.id;return h.a.createElement("text",kw({},n,{dominantBaseline:"central",className:Zp()("recharts-radial-bar-label",l)}),h.a.createElement("defs",null,h.a.createElement("path",{id:w,d:S})),h.a.createElement("textPath",{xlinkHref:"#".concat(w)},t))};function Bw(e){var t,n=e.viewBox,r=e.position,i=e.value,o=e.children,a=e.content,s=e.className,l=void 0===s?"":s;if(!n||Kf()(i)&&Kf()(o)&&!Object(u.isValidElement)(a)&&!qf()(a))return null;if(Object(u.isValidElement)(a))return Object(u.cloneElement)(a,e);if(qf()(a)){if(t=a(e),Object(u.isValidElement)(t))return t}else t=function(e){var t=e.value,n=e.formatter,r=Kf()(e.children)?t:e.children;return qf()(n)?n(r):r}(e);var c=function(e){return dm(e.cx)}(n),d=Im(e),p=Lm(e);if(c&&("insideStart"===r||"insideEnd"===r||"end"===r))return Uw(e,t,d);var f=c?function(e){var t=e.viewBox,n=e.offset,r=e.position,i=t.cx,o=t.cy,a=t.innerRadius,s=t.outerRadius,l=(t.startAngle+t.endAngle)/2;if("outside"===r){var c=$w(i,o,s+n,l),u=c.x;return{x:u,y:c.y,textAnchor:u>=i?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:i,y:o,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:i,y:o,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:i,y:o,textAnchor:"middle",verticalAnchor:"end"};var h=$w(i,o,(a+s)/2,l);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}}(e):function(e){var t=e.viewBox,n=e.offset,r=e.position,i=t.x,o=t.y,a=t.width,s=t.height,l=s>=0?1:-1;return"top"===r?{x:i+a/2,y:o-l*n,textAnchor:"middle",verticalAnchor:l>0?"end":"start"}:"bottom"===r?{x:i+a/2,y:o+s+l*n,textAnchor:"middle",verticalAnchor:"start"}:"left"===r?{x:i-n,y:o+s/2,textAnchor:"end",verticalAnchor:"middle"}:"right"===r?{x:i+a+n,y:o+s/2,textAnchor:"start",verticalAnchor:"middle"}:"insideLeft"===r?{x:i+n,y:o+s/2,textAnchor:"start",verticalAnchor:"middle"}:"insideRight"===r?{x:i+a-n,y:o+s/2,textAnchor:"end",verticalAnchor:"middle"}:"insideTop"===r?{x:i+a/2,y:o+l*n,textAnchor:"middle",verticalAnchor:"start"}:"insideBottom"===r?{x:i+a/2,y:o+s-l*n,textAnchor:"middle",verticalAnchor:"end"}:"insideTopLeft"===r?{x:i+n,y:o+l*n,textAnchor:"start",verticalAnchor:"start"}:"insideTopRight"===r?{x:i+a-n,y:o+l*n,textAnchor:"end",verticalAnchor:"start"}:"insideBottomLeft"===r?{x:i+n,y:o+s-l*n,textAnchor:"start",verticalAnchor:"end"}:"insideBottomRight"===r?{x:i+a-n,y:o+s-l*n,textAnchor:"end",verticalAnchor:"end"}:tm()(r)&&(dm(r.x)||hm(r.x))&&(dm(r.y)||hm(r.y))?{x:i+gm(r.x,a),y:o+gm(r.y,s),textAnchor:"end",verticalAnchor:"end"}:{x:i+a/2,y:o+s/2,textAnchor:"middle",verticalAnchor:"middle"}}(e);return h.a.createElement($v,kw({className:Zp()("recharts-label",l)},d,f,p),t)}Bw.displayName="Label",Bw.defaultProps={offset:5},Bw.propTypes=Fw;var zw=function(e){var t=e.cx,n=e.cy,r=e.angle,i=e.startAngle,o=e.endAngle,a=e.r,s=e.radius,l=e.innerRadius,c=e.outerRadius,u=e.x,h=e.y,d=e.top,p=e.left,f=e.width,m=e.height,g=e.clockWise;if(dm(f)&&dm(m)){if(dm(u)&&dm(h))return{x:u,y:h,width:f,height:m};if(dm(d)&&dm(p))return{x:d,y:p,width:f,height:m}}return dm(u)&&dm(h)?{x:u,y:h,width:0,height:0}:dm(t)&&dm(n)?{cx:t,cy:n,startAngle:i||r||0,endAngle:o||r||0,innerRadius:l||0,outerRadius:c||s||a||0,clockWise:g}:e.viewBox?e.viewBox:{}},Vw=function(e,t){return e?!0===e?h.a.createElement(Bw,{key:"label-implicit",viewBox:t}):pm(e)?h.a.createElement(Bw,{key:"label-implicit",viewBox:t,value:e}):Object(u.isValidElement)(e)?e.type===Bw?Object(u.cloneElement)(e,{key:"label-implicit",viewBox:t}):h.a.createElement(Bw,{key:"label-implicit",content:e,viewBox:t}):qf()(e)?h.a.createElement(Bw,{key:"label-implicit",content:e,viewBox:t}):tm()(e)?h.a.createElement(Bw,kw({viewBox:t},e,{key:"label-implicit"})):null:null};Bw.parseViewBox=zw,Bw.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=zw(e),o=Om(r,Bw).map((function(e,n){return Object(u.cloneElement)(e,{viewBox:t||i,key:"label-".concat(n)})}));if(!n)return o;var a=Vw(e.label,t||i);return[a].concat(Lw(o))};var Gw=Bw,Hw=n(315),Ww=n.n(Hw),qw=n(431),Jw=n.n(qw);function Yw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1,r=function r(i){n<0&&(n=i),i-n>t?(e(i),n=-1):Jw()(r)};Jw()(r)}function Xw(e){return(Xw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kw(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Zw(){var e=function(){return null},t=!1;return{stop:function(){t=!0},start:function(n){t=!1,function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var i=Kw(r),o=i[0],a=i.slice(1);return"number"==typeof o?void Yw(n.bind(null,a),o):(n(o),void Yw(n.bind(null,a)))}"object"===Xw(r)&&e(r),"function"==typeof r&&r()}}(n)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}var Qw=n(750),eE=n.n(Qw);function tE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){nE(e,t,n[t])}))}return e}function nE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rE=["Webkit","Moz","O","ms"],iE=["-webkit-","-moz-","-o-","-ms-"],oE=["transform","transformOrigin","transition"],aE=function(e){return e},sE=function(e,t){return Object.keys(t).reduce((function(n,r){return tE({},n,nE({},r,e(r,t[r])))}),{})},lE=function(e){return Object.keys(e).reduce((function(e,t){return tE({},e,function(e,t){if(-1===oE.indexOf(e))return nE({},e,t);var n="transition"===e,r=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),i=t;return rE.reduce((function(e,o,a){return n&&(i=t.replace(/(transform|transform-origin)/gim,"".concat(iE[a],"$1"))),tE({},e,nE({},o+r,i))}),{})}(t,e[t]))}),e)},cE=function(e,t,n){return e.map((function(e){return"".concat((r=e,r.replace(/([A-Z])/g,(function(e){return"-".concat(e.toLowerCase())})))," ").concat(t,"ms ").concat(n);var r})).join(",")};function uE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function hE(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var dE=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},pE=function(e,t){return e.map((function(e,n){return e*Math.pow(t,n)})).reduce((function(e,t){return e+t}))},fE=function(e,t){return function(n){var r=dE(e,t);return pE(r,n)}},mE=function(e,t){return function(n){var r=hE(dE(e,t).map((function(e,t){return e*t})).slice(1)).concat([0]);return pE(r,n)}},gE=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=t[2],a=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,i=0,o=1,a=1;break;case"ease":r=.25,i=.1,o=.25,a=1;break;case"ease-in":r=.42,i=0,o=1,a=1;break;case"ease-out":r=.42,i=0,o=.58,a=1;break;case"ease-in-out":r=0,i=0,o=.58,a=1;break;default:var s=t[0].split("(");if("cubic-bezier"===s[0]&&4===s[1].split(")")[0].split(",").length){var l=s[1].split(")")[0].split(",").map((function(e){return parseFloat(e)})),c=uE(l,4);r=c[0],i=c[1],o=c[2],a=c[3]}}[r,o,i,a].every((function(e){return"number"==typeof e&&e>=0&&e<=1}));var u=fE(r,o),h=fE(i,a),d=mE(r,o),p=function(e){return e>1?1:e<0?0:e},f=function(e){for(var t=e>1?1:e,n=t,r=0;r<8;++r){var i=u(n)-t,o=d(n);if(Math.abs(i-t)<1e-4||o<1e-4)return h(n);n=p(n-i/o)}return h(n)};return f.isStepper=!1,f},vE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,i=void 0===r?8:r,o=e.dt,a=void 0===o?17:o,s=function(e,t,r){var o=r+(-(e-t)*n-r*i)*a/1e3,s=r*a/1e3+e;return Math.abs(s-t)<1e-4&&Math.abs(o)<1e-4?[t,0]:[s,o]};return s.isStepper=!0,s.dt=a,s},yE=n(753),_E=n.n(yE);function bE(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function xE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){SE(e,t,n[t])}))}return e}function SE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var EE=function(e,t,n){return e+(t-e)*n},TE=function(e){return e.from!==e.to},ME=function(e,t,n,r,i){var o,a,s,l,c=(o=e,a=t,eE()(Object.keys(o),Object.keys(a))),u=c.reduce((function(n,r){return xE({},n,SE({},r,[e[r],t[r]]))}),{}),h=c.reduce((function(n,r){return xE({},n,SE({},r,{from:e[r],velocity:0,to:t[r]}))}),{}),d=-1,p=function(){return null};return p=n.isStepper?function(r){s||(s=r);var o=(r-s)/n.dt;h=function e(t,n,r){var i=sE((function(e,n){if(TE(n)){var r=wE(t(n.from,n.to,n.velocity),2);return xE({},n,{from:r[0],velocity:r[1]})}return n}),n);return r<1?sE((function(e,t){return TE(t)?xE({},t,{velocity:EE(t.velocity,i[e].velocity,r),from:EE(t.from,i[e].from,r)}):t}),n):e(t,i,r-1)}(n,h,o),i(xE({},e,t,sE((function(e,t){return t.from}),h))),s=r,_E()(h,TE).length&&(d=Jw()(p))}:function(o){l||(l=o);var a=(o-l)/r,s=sE((function(e,t){return EE.apply(void 0,bE(t).concat([n(a)]))}),u);if(i(xE({},e,t,s)),a<1)d=Jw()(p);else{var c=sE((function(e,t){return EE.apply(void 0,bE(t).concat([n(1)]))}),u);i(xE({},e,t,c))}},function(){return Jw()(p),function(){Object(qw.cancel)(d)}}};function CE(e){return(CE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $E(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function OE(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function AE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){IE(e,t,n[t])}))}return e}function IE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LE(e,t){return!t||"object"!==CE(t)&&"function"!=typeof t?DE(e):t}function kE(e){return(kE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RE(e,t){return(RE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function DE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var jE=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=(r=LE(this,kE(t).call(this,e,n))).props,o=i.isActive,a=i.attributeName,s=i.from,l=i.to,c=i.steps,u=i.children;if(r.handleStyleChange=r.handleStyleChange.bind(DE(DE(r))),r.changeStyle=r.changeStyle.bind(DE(DE(r))),!o)return r.state={style:{}},"function"==typeof u&&(r.state={style:l}),LE(r);if(c&&c.length)r.state={style:c[0].style};else if(s){if("function"==typeof u)return r.state={style:s},LE(r);r.state={style:a?IE({},a,s):s}}else r.state={style:{}};return r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RE(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,i=t.attributeName,o=t.shouldReAnimate;if(r)if(n){if(!(Av()(e.to,this.props.to)&&e.canBegin&&e.isActive)){var a=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var s=a||o?this.props.from:e.to;this.setState({style:i?IE({},i,s):s}),this.runAnimation(AE({},this.props,{from:s,begin:0}))}}else this.setState({style:i?IE({},i,this.props.to):this.props.to})}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation()}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,i=e.duration,o=e.easing,a=e.begin,s=e.onAnimationEnd,l=e.onAnimationStart,c=ME(n,r,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"==typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return gE(r);case"spring":return vE();default:if("cubic-bezier"===r.split("(")[0])return gE(r)}return"function"==typeof r?r:null}(o),i,this.changeStyle);this.manager.start([l,a,function(){t.stopJSAnimation=c()},i,s])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,i=e.onAnimationStart,o=n[0],a=o.style,s=o.duration,l=void 0===s?0:s;return this.manager.start([i].concat(OE(n.reduce((function(e,r,i){if(0===i)return e;var o=r.duration,a=r.easing,s=void 0===a?"ease":a,l=r.style,c=r.properties,u=r.onAnimationEnd,h=i>0?n[i-1]:r,d=c||Object.keys(l);if("function"==typeof s||"spring"===s)return OE(e).concat([t.runJSAnimation.bind(t,{from:h.style,to:l,duration:o,easing:s}),o]);var p=cE(d,o,s),f=AE({},h.style,l,{transition:p});return OE(e).concat([f,o,u]).filter(aE)}),[a,Math.max(l,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=Zw());var t=e.begin,n=e.duration,r=e.attributeName,i=e.to,o=e.easing,a=e.onAnimationStart,s=e.onAnimationEnd,l=e.steps,c=e.children,u=this.manager;if(this.unSubscribe=u.subscribe(this.handleStyleChange),"function"!=typeof o&&"function"!=typeof c&&"spring"!==o)if(l.length>1)this.runStepAnimation(e);else{var h=r?IE({},r,i):i,d=cE(Object.keys(h),n,o);u.start([a,t,AE({},h,{transition:d}),n,s])}else this.runJSAnimation(e)}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.begin,e.duration,e.attributeName,e.easing,e.isActive),r=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,$E(e,["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"])),i=u.Children.count(t),o=lE(this.state.style);if("function"==typeof t)return t(o);if(!n||0===i)return t;var a=function(e){var t=e.props,n=t.style,i=void 0===n?{}:n,a=t.className;return Object(u.cloneElement)(e,AE({},r,{style:AE({},i,o),className:a}))};return 1===i?a(u.Children.only(t)):h.a.createElement("div",null,u.Children.map(t,(function(e){return a(e)})))}}])&&PE(n.prototype,r),i&&PE(n,i),t}(u.PureComponent);jE.displayName="Animate",jE.propTypes={from:p.a.oneOfType([p.a.object,p.a.string]),to:p.a.oneOfType([p.a.object,p.a.string]),attributeName:p.a.string,duration:p.a.number,begin:p.a.number,easing:p.a.oneOfType([p.a.string,p.a.func]),steps:p.a.arrayOf(p.a.shape({duration:p.a.number.isRequired,style:p.a.object.isRequired,easing:p.a.oneOfType([p.a.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),p.a.func]),properties:p.a.arrayOf("string"),onAnimationEnd:p.a.func})),children:p.a.oneOfType([p.a.node,p.a.func]),isActive:p.a.bool,canBegin:p.a.bool,onAnimationEnd:p.a.func,shouldReAnimate:p.a.bool,onAnimationStart:p.a.func,onAnimationReStart:p.a.func},jE.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};var NE=jE,FE=n(432);function UE(e){return(UE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BE(){return(BE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function zE(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function VE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WE(e,t){return!t||"object"!==UE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qE(e){return(qE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JE(e,t){return(JE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var YE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.steps,n=e.duration;return t&&t.length?t.reduce((function(e,t){return e+(cm()(t.duration)&&t.duration>0?t.duration:0)}),0):cm()(n)?n:0},XE=function(e){function t(){var e,n;GE(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=WE(this,(e=qE(t)).call.apply(e,[this].concat(i)))).state={isActive:!1},n.handleEnter=function(e,t){var r=n.props,i=r.appearOptions,o=r.enterOptions;n.handleStyleActive(t?i:o)},n.handleExit=function(){n.handleStyleActive(n.props.leaveOptions)},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JE(e,t)}(t,e),n=t,(r=[{key:"handleStyleActive",value:function(e){if(e){var t=e.onAnimationEnd?function(){e.onAnimationEnd()}:null;this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){VE(e,t,n[t])}))}return e}({},e,{onAnimationEnd:t,isActive:!0}))}}},{key:"parseTimeout",value:function(){var e=this.props,t=e.appearOptions,n=e.enterOptions,r=e.leaveOptions;return YE(t)+YE(n)+YE(r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=(t.appearOptions,t.enterOptions,t.leaveOptions,zE(t,["children","appearOptions","enterOptions","leaveOptions"]));return h.a.createElement(FE.Transition,BE({},r,{onEnter:this.handleEnter,onExit:this.handleExit,timeout:this.parseTimeout()}),(function(){return h.a.createElement(NE,e.state,u.Children.only(n))}))}}])&&HE(n.prototype,r),i&&HE(n,i),t}(u.Component);XE.propTypes={appearOptions:p.a.object,enterOptions:p.a.object,leaveOptions:p.a.object,children:p.a.element};var KE=XE;function ZE(e){var t=e.component,n=e.children,r=e.appear,i=e.enter,o=e.leave;return h.a.createElement(FE.TransitionGroup,{component:t},u.Children.map(n,(function(e,t){return h.a.createElement(KE,{appearOptions:r,enterOptions:i,leaveOptions:o,key:"child-".concat(t)},e)})))}ZE.propTypes={appear:p.a.object,enter:p.a.object,leave:p.a.object,children:p.a.oneOfType([p.a.array,p.a.element]),component:p.a.any},ZE.defaultProps={component:"span"};var QE=NE;function eT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nT(e){return(nT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rT(){return(rT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function iT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aT(e,t){return!t||"object"!==nT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sT(e){return(sT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lT(e,t){return(lT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cT=function(e){var t=e.cx,n=e.cy,r=e.radius,i=e.angle,o=e.sign,a=e.isExternal,s=e.cornerRadius,l=e.cornerIsExternal,c=s*(a?1:-1)+r,u=Math.asin(s/c)/Mw,h=l?i:i+o*u,d=l?i-o*u:i;return{center:$w(t,n,c,h),circleTangency:$w(t,n,r,h),lineTangency:$w(t,n,c*Math.cos(u*Mw),d),theta:u}},uT=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,o=e.startAngle,a=function(e,t){return um(t-e)*Math.min(Math.abs(t-e),359.999)}(o,e.endAngle),s=o+a,l=$w(t,n,i,o),c=$w(t,n,i,s),u="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(a)>180),",").concat(+(o>s),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var h=$w(t,n,r,o),d=$w(t,n,r,s);u+="L ".concat(d.x,",").concat(d.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(a)>180),",").concat(+(o<=s),",\n            ").concat(h.x,",").concat(h.y," Z")}else u+="L ".concat(t,",").concat(n," Z");return u},hT=function(e){function t(){return iT(this,t),aT(this,sT(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lT(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,s=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,u=e.className;if(i<r||l===c)return null;var d,p=Zp()("recharts-sector",u),f=i-r,m=gm(o,f,0,!0);return d=m>0&&Math.abs(l-c)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,s=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,u=um(c-l),h=cT({cx:t,cy:n,radius:i,angle:l,sign:u,cornerRadius:o,cornerIsExternal:s}),d=h.circleTangency,p=h.lineTangency,f=h.theta,m=cT({cx:t,cy:n,radius:i,angle:c,sign:-u,cornerRadius:o,cornerIsExternal:s}),g=m.circleTangency,v=m.lineTangency,y=m.theta,_=Math.abs(l-c)-f-y;if(_<0)return a?"M ".concat(p.x,",").concat(p.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*o,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*-o,",0\n      "):uT({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var b="M ".concat(p.x,",").concat(p.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(d.x,",").concat(d.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(v.x,",").concat(v.y,"\n  ");if(r>0){var x=cT({cx:t,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),S=x.circleTangency,w=x.lineTangency,E=x.theta,T=cT({cx:t,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),M=T.circleTangency,C=T.lineTangency,$=T.theta,O=Math.abs(l-c)-E-$;if(O<0)return"".concat(b,"L").concat(t,",").concat(n,"Z");b+="L".concat(C.x,",").concat(C.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(M.x,",").concat(M.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(O>180),",").concat(+(u>0),",").concat(S.x,",").concat(S.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(w.x,",").concat(w.y,"Z")}else b+="L".concat(t,",").concat(n,"Z");return b}({cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:Math.min(m,f/2),forceCornerRadius:a,cornerIsExternal:s,startAngle:l,endAngle:c}):uT({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c}),h.a.createElement("path",rT({},Im(this.props),Lm(this.props),{className:p,d:d}))}}])&&oT(n.prototype,r),i&&oT(n,i),t}(u.PureComponent);hT.displayName="Sector",hT.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eT(n,!0).forEach((function(t){tT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eT(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},wm,{className:p.a.string,cx:p.a.number,cy:p.a.number,innerRadius:p.a.number,outerRadius:p.a.number,startAngle:p.a.number,endAngle:p.a.number,cornerRadius:p.a.oneOfType([p.a.number,p.a.string]),forceCornerRadius:p.a.bool,cornerIsExternal:p.a.bool}),hT.defaultProps={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1};var dT=hT,pT=function(){};function fT(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function mT(e){this._context=e}mT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fT(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fT(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gT(e){this._context=e}gT.prototype={areaStart:pT,areaEnd:pT,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:fT(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vT(e){this._context=e}vT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:fT(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function yT(e){this._context=e}yT.prototype={areaStart:pT,areaEnd:pT,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function _T(e){this._context=e}_T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var bT=function(e){return new _T(e)};function xT(e){return e<0?-1:1}function ST(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(xT(o)+xT(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function wT(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function ET(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function TT(e){this._context=e}function MT(e){this._context=new CT(e)}function CT(e){this._context=e}function $T(e){this._context=e}function OT(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}TT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ET(this,this._t0,wT(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ET(this,wT(this,n=ST(this,e,t)),n);break;default:ET(this,this._t0,n=ST(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(MT.prototype=Object.create(TT.prototype)).point=function(e,t){TT.prototype.point.call(this,t,e)},CT.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},$T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=OT(e),i=OT(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function AT(e,t){this._context=e,this._t=t}AT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};function IT(e){return e[0]}function PT(e){return e[1]}var LT=function(){var e=IT,t=PT,n=vg(!0),r=null,i=bT,o=null;function a(a){var s,l,c,u=a.length,h=!1;for(null==r&&(o=i(c=gg())),s=0;s<=u;++s)!(s<u&&n(l=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(l,s,a),+t(l,s,a));if(c)return o=null,c+""||null}return a.x=function(t){return arguments.length?(e="function"==typeof t?t:vg(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:vg(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:vg(!!e),a):n},a.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),a):i},a.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),a):r},a},kT=function(){var e=IT,t=null,n=vg(0),r=PT,i=vg(!0),o=null,a=bT,s=null;function l(l){var c,u,h,d,p,f=l.length,m=!1,g=new Array(f),v=new Array(f);for(null==o&&(s=a(p=gg())),c=0;c<=f;++c){if(!(c<f&&i(d=l[c],c,l))===m)if(m=!m)u=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=c-1;h>=u;--h)s.point(g[h],v[h]);s.lineEnd(),s.areaEnd()}m&&(g[c]=+e(d,c,l),v[c]=+n(d,c,l),s.point(t?+t(d,c,l):g[c],r?+r(d,c,l):v[c]))}if(p)return s=null,p+""||null}function c(){return LT().defined(i).curve(a).context(o)}return l.x=function(n){return arguments.length?(e="function"==typeof n?n:vg(+n),t=null,l):e},l.x0=function(t){return arguments.length?(e="function"==typeof t?t:vg(+t),l):e},l.x1=function(e){return arguments.length?(t=null==e?null:"function"==typeof e?e:vg(+e),l):t},l.y=function(e){return arguments.length?(n="function"==typeof e?e:vg(+e),r=null,l):n},l.y0=function(e){return arguments.length?(n="function"==typeof e?e:vg(+e),l):n},l.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:vg(+e),l):r},l.lineX0=l.lineY0=function(){return c().x(e).y(n)},l.lineY1=function(){return c().x(e).y(r)},l.lineX1=function(){return c().x(t).y(n)},l.defined=function(e){return arguments.length?(i="function"==typeof e?e:vg(!!e),l):i},l.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),l):a},l.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),l):o},l};function RT(e){return(RT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DT(){return(DT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jT(n,!0).forEach((function(t){FT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jT(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function FT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zT(e,t){return!t||"object"!==RT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function VT(e){return(VT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GT(e,t){return(GT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var HT={curveBasisClosed:function(e){return new gT(e)},curveBasisOpen:function(e){return new vT(e)},curveBasis:function(e){return new mT(e)},curveLinearClosed:function(e){return new yT(e)},curveLinear:bT,curveMonotoneX:function(e){return new TT(e)},curveMonotoneY:function(e){return new MT(e)},curveNatural:function(e){return new $T(e)},curveStep:function(e){return new AT(e,.5)},curveStepAfter:function(e){return new AT(e,1)},curveStepBefore:function(e){return new AT(e,0)}},WT=function(e){return e.x===+e.x&&e.y===+e.y},qT=function(e){return e.x},JT=function(e){return e.y},YT=function(e){function t(){return UT(this,t),zT(this,VT(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GT(e,t)}(t,e),n=t,(r=[{key:"getPath",value:function(){var e,t=this.props,n=t.type,r=t.points,i=t.baseLine,o=t.layout,a=t.connectNulls,s=function(e,t){if(qf()(e))return e;var n="curve".concat(e.slice(0,1).toUpperCase()).concat(e.slice(1));return"curveMonotone"===n&&t?HT["".concat(n).concat("vertical"===t?"Y":"X")]:HT[n]||bT}(n,o),l=a?r.filter((function(e){return WT(e)})):r;if(rm()(i)){var c=a?i.filter((function(e){return WT(e)})):i,u=l.map((function(e,t){return NT({},e,{base:c[t]})}));return(e="vertical"===o?kT().y(JT).x1(qT).x0((function(e){return e.base.x})):kT().x(qT).y1(JT).y0((function(e){return e.base.y}))).defined(WT).curve(s),e(u)}return(e="vertical"===o&&dm(i)?kT().y(JT).x1(qT).x0(i):dm(i)?kT().x(qT).y1(JT).y0(i):LT().x(qT).y(JT)).defined(WT).curve(s),e(l)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.points,r=e.path,i=e.pathRef;if(!(n&&n.length||r))return null;var o=n&&n.length?this.getPath():r;return h.a.createElement("path",DT({},Im(this.props),Lm(this.props,null,!0),{className:Zp()("recharts-curve",t),d:o,ref:i}))}}])&&BT(n.prototype,r),i&&BT(n,i),t}(u.PureComponent);YT.displayName="Curve",YT.propTypes=NT({},wm,{className:p.a.string,type:p.a.oneOfType([p.a.oneOf(["basis","basisClosed","basisOpen","linear","linearClosed","natural","monotoneX","monotoneY","monotone","step","stepBefore","stepAfter"]),p.a.func]),layout:p.a.oneOf(["horizontal","vertical"]),baseLine:p.a.oneOfType([p.a.number,p.a.array]),points:p.a.arrayOf(p.a.object),connectNulls:p.a.bool,path:p.a.string,pathRef:p.a.func}),YT.defaultProps={type:"linear",points:[],connectNulls:!1};var XT=YT,KT=n(762),ZT=n.n(KT);function QT(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function eM(){return(eM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tM(n,!0).forEach((function(t){rM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tM(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iM(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var oM={id:p.a.string,data:p.a.arrayOf(p.a.object),valueAccessor:p.a.func,clockWise:p.a.bool,dataKey:p.a.oneOfType([p.a.string,p.a.number,p.a.func])},aM={valueAccessor:function(e){return rm()(e.value)?ZT()(e.value):e.value}};function sM(e){var t=e.data,n=e.valueAccessor,r=e.dataKey,i=e.clockWise,o=e.id,a=iM(e,["data","valueAccessor","dataKey","clockWise","id"]);return t&&t.length?h.a.createElement(FS,{className:"recharts-label-list"},t.map((function(e,t){var s=Kf()(r)?n(e,t):tw(e&&e.payload,r),l=Kf()(o)?{}:{id:"".concat(o,"-").concat(t)};return h.a.createElement(Gw,eM({},Im(e),a,l,{index:t,value:s,viewBox:Gw.parseViewBox(Kf()(i)?e:nM({},e,{clockWise:i})),key:"label-".concat(t)}))}))):null}sM.propTypes=oM,sM.displayName="LabelList";var lM=function(e,t){return e?!0===e?h.a.createElement(sM,{key:"labelList-implicit",data:t}):h.a.isValidElement(e)||qf()(e)?h.a.createElement(sM,{key:"labelList-implicit",data:t,content:e}):tm()(e)?h.a.createElement(sM,eM({data:t},e,{key:"labelList-implicit"})):null:null};sM.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=Om(r,sM).map((function(e,n){return Object(u.cloneElement)(e,{data:t,key:"labelList-".concat(n)})}));if(!n)return i;var o=lM(e.label,t);return[o].concat(QT(i))},sM.defaultProps=aM;var cM=sM;function uM(e){return(uM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hM(){return(hM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function dM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dM(n,!0).forEach((function(t){fM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dM(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vM(e,t){return!t||"object"!==uM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yM(e){return(yM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _M(e,t){return(_M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bM=function(e){function t(){var e,n;mM(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=vM(this,(e=yM(t)).call.apply(e,[this].concat(i)))).state={isAnimationFinished:!1},n.id=mm("recharts-pie-"),n.cachePrevData=function(e){n.setState({prevSectors:e})},n.handleAnimationEnd=function(){var e=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),qf()(e)&&e()},n.handleAnimationStart=function(){var e=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),qf()(e)&&e()},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_M(e,t)}(t,e),n=t,i=[{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,t){return h.a.isValidElement(e)?h.a.cloneElement(e,t):qf()(e)?e(t):h.a.createElement(XT,hM({},t,{type:"linear",className:"recharts-pie-label-line"}))}},{key:"renderLabelItem",value:function(e,t,n){if(h.a.isValidElement(e))return h.a.cloneElement(e,t);var r=n;return qf()(e)&&(r=e(t),h.a.isValidElement(r))?r:h.a.createElement($v,hM({},t,{alignmentBaseline:"middle",className:"recharts-pie-label-text"}),r)}},{key:"renderSectorItem",value:function(e,t){return h.a.isValidElement(e)?h.a.cloneElement(e,t):qf()(e)?e(t):Ww()(e)?h.a.createElement(dT,hM({},t,e)):h.a.createElement(dT,t)}}],(r=[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.animationId,r=t.sectors;e.isAnimationActive!==this.props.isAnimationActive?this.cachePrevData([]):e.animationId!==n&&this.cachePrevData(r)}},{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"renderLabels",value:function(e){var t=this;if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,r=n.label,i=n.labelLine,o=n.dataKey,a=n.valueKey,s=Im(this.props),l=Im(r),c=Im(i),u=r&&r.offsetRadius||20,d=e.map((function(e,n){var d=(e.startAngle+e.endAngle)/2,p=$w(e.cx,e.cy,e.outerRadius+u,d),f=pM({},s,{},e,{stroke:"none"},l,{index:n,textAnchor:t.constructor.getTextAnchor(p.x,e.cx)},p),m=pM({},s,{},e,{fill:"none",stroke:e.fill},c,{index:n,points:[$w(e.cx,e.cy,e.outerRadius,d),p],key:"line"}),g=o;return Kf()(o)&&Kf()(a)?g="value":Kf()(o)&&(g=a),h.a.createElement(FS,{key:"label-".concat(n)},i&&t.constructor.renderLabelLineItem(i,m),t.constructor.renderLabelItem(r,f,tw(e,g)))}));return h.a.createElement(FS,{className:"recharts-pie-labels"},d)}},{key:"renderSectorsStatically",value:function(e){var t=this,n=this.props,r=n.activeShape,i=n.blendStroke;return e.map((function(e,n){var o=t.isActiveIndex(n)?r:null,a=pM({},e,{stroke:i?e.fill:e.stroke});return h.a.createElement(FS,hM({className:"recharts-pie-sector"},Rm(t.props,e,n),{key:"sector-".concat(n)}),t.constructor.renderSectorItem(o,a))}))}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,n=t.sectors,r=t.isAnimationActive,i=t.animationBegin,o=t.animationDuration,a=t.animationEasing,s=t.animationId,l=this.state.prevSectors;return h.a.createElement(QE,{begin:i,duration:o,isActive:r,easing:a,from:{t:0},to:{t:1},key:"pie-".concat(s),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},(function(t){var r=t.t,i=[],o=(n&&n[0]).startAngle;return n.forEach((function(e,t){var n=l&&l[t],a=t>0?om()(e,"paddingAngle",0):0;if(n){var s=ym(n.endAngle-n.startAngle,e.endAngle-e.startAngle),c=pM({},e,{startAngle:o+a,endAngle:o+s(r)+a});i.push(c),o=c.endAngle}else{var u=e.endAngle,h=e.startAngle,d=ym(0,u-h)(r),p=pM({},e,{startAngle:o+a,endAngle:o+d+a});i.push(p),o=p.endAngle}})),h.a.createElement(FS,null,e.renderSectorsStatically(i))}))}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,n=e.isAnimationActive,r=this.state.prevSectors;return!(n&&t&&t.length)||r&&Av()(r,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"render",value:function(){var e=this.props,t=e.hide,n=e.sectors,r=e.className,i=e.label,o=e.cx,a=e.cy,s=e.innerRadius,l=e.outerRadius,c=e.isAnimationActive,u=e.prevSectors;if(t||!n||!n.length||!dm(o)||!dm(a)||!dm(s)||!dm(l))return null;var d=Zp()("recharts-pie",r);return h.a.createElement(FS,{className:d},this.renderSectors(),i&&this.renderLabels(n),Gw.renderCallByParent(this.props,null,!1),(!c||u&&Av()(u,n))&&cM.renderCallByParent(this.props,n,!1))}}])&&gM(n.prototype,r),i&&gM(n,i),t}(u.PureComponent);bM.displayName="Pie",bM.propTypes=pM({},wm,{},Em,{className:p.a.string,animationId:p.a.number,cx:p.a.oneOfType([p.a.number,p.a.string]),cy:p.a.oneOfType([p.a.number,p.a.string]),startAngle:p.a.number,endAngle:p.a.number,paddingAngle:p.a.number,innerRadius:p.a.oneOfType([p.a.number,p.a.string]),outerRadius:p.a.oneOfType([p.a.number,p.a.string]),cornerRadius:p.a.oneOfType([p.a.number,p.a.string]),dataKey:p.a.oneOfType([p.a.string,p.a.number,p.a.func]).isRequired,nameKey:p.a.oneOfType([p.a.string,p.a.number,p.a.func]),valueKey:p.a.oneOfType([p.a.string,p.a.number,p.a.func]),data:p.a.arrayOf(p.a.object),blendStroke:p.a.bool,minAngle:p.a.number,legendType:p.a.oneOf(Mm),tooltipType:p.a.oneOf(Cm),maxRadius:p.a.number,sectors:p.a.arrayOf(p.a.object),hide:p.a.bool,labelLine:p.a.oneOfType([p.a.object,p.a.func,p.a.element,p.a.bool]),label:p.a.oneOfType([p.a.shape({offsetRadius:p.a.number}),p.a.func,p.a.element,p.a.bool]),activeShape:p.a.oneOfType([p.a.object,p.a.func,p.a.element]),activeIndex:p.a.oneOfType([p.a.number,p.a.arrayOf(p.a.number)]),onAnimationStart:p.a.func,onAnimationEnd:p.a.func,isAnimationActive:p.a.bool,animationBegin:p.a.number,animationDuration:p.a.number,animationEasing:p.a.oneOf(["ease","ease-in","ease-out","ease-in-out","spring","linear"]),id:p.a.string}),bM.defaultProps={stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!jm(),animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1},bM.parseDeltaAngle=function(e){var t=e.startAngle,n=e.endAngle;return um(n-t)*Math.min(Math.abs(n-t),360)},bM.getRealPieData=function(e){var t=e.props,n=t.data,r=t.children,i=Im(e.props),o=Om(r,ov);return n&&n.length?n.map((function(e,t){return pM({payload:e},i,{},e,{},o&&o[t]&&o[t].props)})):o&&o.length?o.map((function(e){return pM({},i,{},e.props)})):[]},bM.parseCoordinateOfPie=function(e,t){var n=t.top,r=t.left,i=t.width,o=t.height,a=Ow(i,o);return{cx:r+gm(e.props.cx,i,i/2),cy:n+gm(e.props.cy,o,o/2),innerRadius:gm(e.props.innerRadius,a,0),outerRadius:gm(e.props.outerRadius,a,.8*a),maxRadius:e.props.maxRadius||Math.sqrt(i*i+o*o)/2}},bM.getComposedData=function(e){var t=e.item,n=e.offset,r=e.onItemMouseLeave,i=e.onItemMouseEnter,o=bM.getRealPieData(t);if(!o||!o.length)return[];var a=t.props,s=a.cornerRadius,l=a.startAngle,c=a.endAngle,u=a.paddingAngle,h=a.dataKey,d=a.nameKey,p=a.valueKey,f=a.tooltipType,m=Math.abs(t.props.minAngle),g=bM.parseCoordinateOfPie(t,n),v=o.length,y=bM.parseDeltaAngle({startAngle:l,endAngle:c}),_=Math.abs(y),b=_-v*m-(_>=360?v:v-1)*u,x=h;Kf()(h)&&Kf()(p)?x="value":Kf()(h)&&(x=p);var S,w,E=o.reduce((function(e,t){var n=tw(t,x,0);return e+(dm(n)?n:0)}),0);E>0&&(S=o.map((function(e,t){var n,r=tw(e,x,0),i=tw(e,d,t),o=(dm(r)?r:0)/E,a=(n=t?w.endAngle+um(y)*u:l)+um(y)*(m+o*b),c=(n+a)/2,h=(g.innerRadius+g.outerRadius)/2,p=[{name:i,value:r,payload:e,dataKey:x,type:f}],v=$w(g.cx,g.cy,h,c);return w=pM({percent:o,cornerRadius:s,name:i,tooltipPayload:p,midAngle:c,middleRadius:h,tooltipPosition:v},e,{},g,{value:tw(e,x),startAngle:n,endAngle:a,payload:e,paddingAngle:um(y)*u})})));return pM({},g,{sectors:S,data:o,onMouseLeave:r,onMouseEnter:i})};var xM=bM,SM=n(436),wM=n.n(SM),EM=n(765),TM=n.n(EM),MM=n(438),CM=n.n(MM),$M=n(403),OM=n.n($M);function AM(e){return(AM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function PM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PM(n,!0).forEach((function(t){kM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PM(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jM(e,t){return!t||"object"!==AM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function NM(e){return(NM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FM(e,t){return(FM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var UM=function(e){return rm()(e)&&pm(e[0])&&pm(e[1])?e.join(" ~ "):e},BM=function(e){function t(){return RM(this,t),jM(this,NM(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FM(e,t)}(t,e),n=t,(r=[{key:"renderContent",value:function(){var e=this.props,t=e.payload,n=e.separator,r=e.formatter,i=e.itemStyle,o=e.itemSorter;if(t&&t.length){var a=(o?Pv()(t,o):t).map((function(e,t){if("none"===e.type)return null;var o=LM({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},i),a=e.formatter||r||UM,s=e.name,l=e.value;if(a){var c=a(l,s,e,t);if(Array.isArray(c)){var u=IM(c,2);l=u[0],s=u[1]}else l=c}return h.a.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:o},pm(s)?h.a.createElement("span",{className:"recharts-tooltip-item-name"},s):null,pm(s)?h.a.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,h.a.createElement("span",{className:"recharts-tooltip-item-value"},l),h.a.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))}));return h.a.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},a)}return null}},{key:"render",value:function(){var e=this.props,t=e.wrapperClassName,n=e.contentStyle,r=e.labelClassName,i=e.labelStyle,o=e.label,a=e.labelFormatter,s=LM({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),l=LM({margin:0},i),c=pm(o),u=c?o:"",d=Zp()("recharts-default-tooltip",t),p=Zp()("recharts-tooltip-label",r);return c&&a&&(u=a(o)),h.a.createElement("div",{className:d,style:s},h.a.createElement("p",{className:p,style:l},u),this.renderContent())}}])&&DM(n.prototype,r),i&&DM(n,i),t}(u.PureComponent);BM.displayName="DefaultTooltipContent",BM.propTypes={separator:p.a.string,wrapperClassName:p.a.string,labelClassName:p.a.string,formatter:p.a.func,contentStyle:p.a.object,itemStyle:p.a.object,labelStyle:p.a.object,labelFormatter:p.a.func,label:p.a.any,payload:p.a.arrayOf(p.a.shape({name:p.a.any,value:p.a.oneOfType([p.a.number,p.a.string,p.a.array]),unit:p.a.any})),itemSorter:p.a.func},BM.defaultProps={separator:" : ",contentStyle:{},itemStyle:{},labelStyle:{}};var zM=BM;function VM(e){return(VM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GM(n,!0).forEach((function(t){WM(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GM(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YM(e,t){return!t||"object"!==VM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function XM(e){return(XM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KM(e,t){return(KM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ZM="recharts-tooltip-wrapper",QM=function(e){return e.dataKey},eC={allowEscapeViewBox:p.a.shape({x:p.a.boolean,y:p.a.boolean}),content:p.a.oneOfType([p.a.element,p.a.func]),viewBox:p.a.shape({x:p.a.number,y:p.a.number,width:p.a.number,height:p.a.number}),active:p.a.bool,separator:p.a.string,formatter:p.a.func,offset:p.a.number,itemStyle:p.a.object,labelStyle:p.a.object,wrapperStyle:p.a.object,contentStyle:p.a.object,cursor:p.a.oneOfType([p.a.bool,p.a.element,p.a.object]),coordinate:p.a.shape({x:p.a.number,y:p.a.number}),position:p.a.shape({x:p.a.number,y:p.a.number}),label:p.a.any,payload:p.a.arrayOf(p.a.shape({name:p.a.any,value:p.a.oneOfType([p.a.number,p.a.string,p.a.array]),unit:p.a.any,type:p.a.oneOf(Cm)})),paylodUniqBy:p.a.oneOfType([p.a.func,p.a.bool]),isAnimationActive:p.a.bool,animationDuration:p.a.number,animationEasing:p.a.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),itemSorter:p.a.func,filterNull:p.a.bool,useTranslate3d:p.a.bool},tC={active:!1,allowEscapeViewBox:{x:!1,y:!1},offset:10,viewBox:{x1:0,x2:0,y1:0,y2:0},coordinate:{x:0,y:0},cursorStyle:{},separator:" : ",wrapperStyle:{},contentStyle:{},itemStyle:{},labelStyle:{},cursor:!0,isAnimationActive:!jm(),animationEasing:"ease",animationDuration:400,filterNull:!0,useTranslate3d:!1},nC=function(e){function t(){var e,n;qM(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=YM(this,(e=XM(t)).call.apply(e,[this].concat(i)))).state={boxWidth:-1,boxHeight:-1},n.getTranslate=function(e){var t=e.key,r=e.tooltipDimension,i=e.viewBoxDimension,o=n.props,a=o.allowEscapeViewBox,s=o.coordinate,l=o.offset,c=o.position,u=o.viewBox;if(c&&dm(c[t]))return c[t];var h=s[t]-r-l,d=s[t]+l;return a[t]?d:s[t]+r+l>u[t]+i?Math.max(h,u[t]):Math.max(d,u[t])},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KM(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"updateBBox",value:function(){var e=this.state,t=e.boxWidth,n=e.boxHeight;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-t)>1||Math.abs(r.height-n)>1)&&this.setState({boxWidth:r.width,boxHeight:r.height})}else-1===t&&-1===n||this.setState({boxWidth:-1,boxHeight:-1})}},{key:"render",value:function(){var e,t,n,r=this,i=this.props,o=i.payload,a=i.isAnimationActive,s=i.animationDuration,l=i.animationEasing,c=i.filterNull,u=function(e,t){return!0===e?Yf()(t,QM):qf()(e)?Yf()(t,e):t}(i.paylodUniqBy,c&&o&&o.length?o.filter((function(e){return!Kf()(e.value)})):o),d=u&&u.length,p=this.props,f=p.content,m=p.viewBox,g=p.coordinate,v=p.position,y=p.active,_=HM({pointerEvents:"none",visibility:y&&d?"visible":"hidden",position:"absolute",top:0},p.wrapperStyle);if(v&&dm(v.x)&&dm(v.y))t=v.x,n=v.y;else{var b=this.state,x=b.boxWidth,S=b.boxHeight;x>0&&S>0&&g?(t=this.getTranslate({key:"x",tooltipDimension:x,viewBoxDimension:m.width}),n=this.getTranslate({key:"y",tooltipDimension:S,viewBoxDimension:m.height})):_.visibility="hidden"}_=HM({},lE({transform:this.props.useTranslate3d?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}),{},_),a&&y&&(_=HM({},lE({transition:"transform ".concat(s,"ms ").concat(l)}),{},_));var w=Zp()(ZM,(WM(e={},"".concat(ZM,"-right"),dm(t)&&g&&dm(g.x)&&t>=g.x),WM(e,"".concat(ZM,"-left"),dm(t)&&g&&dm(g.x)&&t<g.x),WM(e,"".concat(ZM,"-bottom"),dm(n)&&g&&dm(g.y)&&n>=g.y),WM(e,"".concat(ZM,"-top"),dm(n)&&g&&dm(g.y)&&n<g.y),e));return h.a.createElement("div",{className:w,style:_,ref:function(e){r.wrapperNode=e}},function(e,t){return h.a.isValidElement(e)?h.a.cloneElement(e,t):qf()(e)?e(t):h.a.createElement(zM,t)}(f,HM({},this.props,{payload:u})))}}])&&JM(n.prototype,r),i&&JM(n,i),t}(u.PureComponent);nC.displayName="Tooltip",nC.propTypes=eC,nC.defaultProps=tC;var rC=nC;function iC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aC(e){return(aC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sC(){return(sC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uC(e,t){return!t||"object"!==aC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hC(e){return(hC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dC(e,t){return(dC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pC=function(e){function t(){return lC(this,t),uC(this,hC(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dC(e,t)}(t,e),n=t,i=[{key:"getPath",value:function(e,t,n,r,i,o){return"M".concat(e,",").concat(i,"v").concat(r,"M").concat(o,",").concat(t,"h").concat(n)}}],(r=[{key:"render",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,o=e.top,a=e.left,s=e.className;return dm(t)&&dm(n)&&dm(r)&&dm(i)&&dm(o)&&dm(a)?h.a.createElement("path",sC({},Im(this.props),{className:Zp()("recharts-cross",s),d:this.constructor.getPath(t,n,r,i,o,a)})):null}}])&&cC(n.prototype,r),i&&cC(n,i),t}(u.PureComponent);pC.displayName="Cross",pC.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iC(n,!0).forEach((function(t){oC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iC(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},wm,{x:p.a.number,y:p.a.number,width:p.a.number,height:p.a.number,top:p.a.number,left:p.a.number,className:p.a.string}),pC.defaultProps={x:0,y:0,top:0,left:0,width:0,height:0};var fC=pC;function mC(e){return(mC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gC(){return(gC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _C(e,t){return!t||"object"!==mC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bC(e){return(bC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xC(e,t){return(xC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var SC=function(e){function t(){return vC(this,t),_C(this,bC(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xC(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.r,i=e.className,o=Zp()("recharts-dot",i);return t===+t&&n===+n&&r===+r?h.a.createElement("circle",gC({},Im(this.props),Lm(this.props,null,!0),{className:o,cx:t,cy:n,r:r})):null}}])&&yC(n.prototype,r),i&&yC(n,i),t}(u.PureComponent);SC.displayName="Dot",SC.propTypes={className:p.a.string,cx:p.a.number,cy:p.a.number,r:p.a.number};var wC=SC;function EC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MC(e){return(MC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CC(){return(CC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AC(e,t){return!t||"object"!==MC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function IC(e){return(IC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PC(e,t){return(PC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var LC=function(e,t,n,r,i){var o,a=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(a>0&&i instanceof Array){for(var u=[],h=0;h<4;h++)u[h]=i[h]>a?a:i[h];o="M".concat(e,",").concat(t+s*u[0]),u[0]>0&&(o+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),o+="L ".concat(e+n-l*u[1],",").concat(t),u[1]>0&&(o+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+s*u[1])),o+="L ".concat(e+n,",").concat(t+r-s*u[2]),u[2]>0&&(o+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,",\n        ").concat(e+n-l*u[2],",").concat(t+r)),o+="L ".concat(e+l*u[3],",").concat(t+r),u[3]>0&&(o+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-s*u[3])),o+="Z"}else if(a>0&&i===+i&&i>0){var d=Math.min(a,i);o="M ".concat(e,",").concat(t+s*d,"\n            A ").concat(d,",").concat(d,",0,0,").concat(c,",").concat(e+l*d,",").concat(t,"\n            L ").concat(e+n-l*d,",").concat(t,"\n            A ").concat(d,",").concat(d,",0,0,").concat(c,",").concat(e+n,",").concat(t+s*d,"\n            L ").concat(e+n,",").concat(t+r-s*d,"\n            A ").concat(d,",").concat(d,",0,0,").concat(c,",").concat(e+n-l*d,",").concat(t+r,"\n            L ").concat(e+l*d,",").concat(t+r,"\n            A ").concat(d,",").concat(d,",0,0,").concat(c,",").concat(e,",").concat(t+r-s*d," Z")}else o="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return o},kC=function(e){function t(){var e,n;$C(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=AC(this,(e=IC(t)).call.apply(e,[this].concat(i)))).state={totalLength:-1},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PC(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){if(this.node&&this.node.getTotalLength)try{var e=this.node.getTotalLength();e&&this.setState({totalLength:e})}catch(e){}}},{key:"render",value:function(){var e=this,t=this.props,n=t.x,r=t.y,i=t.width,o=t.height,a=t.radius,s=t.className,l=this.state.totalLength,c=this.props,u=c.animationEasing,d=c.animationDuration,p=c.animationBegin,f=c.isAnimationActive,m=c.isUpdateAnimationActive;if(n!==+n||r!==+r||i!==+i||o!==+o||0===i||0===o)return null;var g=Zp()("recharts-rectangle",s);return m?h.a.createElement(QE,{canBegin:l>0,from:{width:i,height:o,x:n,y:r},to:{width:i,height:o,x:n,y:r},duration:d,animationEasing:u,isActive:m},(function(t){var n=t.width,r=t.height,i=t.x,o=t.y;return h.a.createElement(QE,{canBegin:l>0,from:"0px ".concat(-1===l?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:d,isActive:f,easing:u},h.a.createElement("path",CC({},Im(e.props),Lm(e.props),{className:g,d:LC(i,o,n,r,a),ref:function(t){e.node=t}})))})):h.a.createElement("path",CC({},Im(this.props),Lm(this.props),{className:g,d:LC(n,r,i,o,a)}))}}])&&OC(n.prototype,r),i&&OC(n,i),t}(u.PureComponent);kC.displayName="Rectangle",kC.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EC(n,!0).forEach((function(t){TC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EC(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},wm,{},Em,{className:p.a.string,x:p.a.number,y:p.a.number,width:p.a.number,height:p.a.number,radius:p.a.oneOfType([p.a.number,p.a.array]),isAnimationActive:p.a.bool,isUpdateAnimationActive:p.a.bool,animationBegin:p.a.number,animationDuration:p.a.number,animationEasing:p.a.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"])}),kC.defaultProps={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"};var RC=kC;function DC(e){return(DC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jC(){return(jC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function NC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NC(n,!0).forEach((function(t){UC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NC(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function UC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BC(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GC(e,t){return!t||"object"!==DC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function HC(e){return(HC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WC(e,t){return(WC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qC=function(e){function t(){return zC(this,t),GC(this,HC(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WC(e,t)}(t,e),n=t,i=[{key:"getTicks",value:function(e){var n=e.tick,r=e.ticks,i=e.viewBox,o=e.minTickGap,a=e.orientation,s=e.interval,l=e.tickFormatter,c=e.unit;return r&&r.length&&n?dm(s)||jm()?t.getNumberIntervalTicks(r,dm(s)?s:0):"preserveStartEnd"===s?t.getTicksStart({ticks:r,tickFormatter:l,viewBox:i,orientation:a,minTickGap:o,unit:c},!0):"preserveStart"===s?t.getTicksStart({ticks:r,tickFormatter:l,viewBox:i,orientation:a,minTickGap:o,unit:c}):t.getTicksEnd({ticks:r,tickFormatter:l,viewBox:i,orientation:a,minTickGap:o,unit:c}):[]}},{key:"getNumberIntervalTicks",value:function(e,t){return e.filter((function(e,n){return n%(t+1)==0}))}},{key:"getTicksStart",value:function(e,t){var n,r,i=e.ticks,o=e.tickFormatter,a=e.viewBox,s=e.orientation,l=e.minTickGap,c=e.unit,u=a.x,h=a.y,d=a.width,p=a.height,f="top"===s||"bottom"===s?"width":"height",m=(i||[]).slice(),g=c&&"width"===f?gv(c)[f]:0,v=m.length,y=v>=2?um(m[1].coordinate-m[0].coordinate):1;if(1===y?(n="width"===f?u:h,r="width"===f?u+d:h+p):(n="width"===f?u+d:h+p,r="width"===f?u:h),t){var _=i[v-1],b=qf()(o)?o(_.value):_.value,x=gv(b)[f]+g,S=y*(_.coordinate+y*x/2-r);m[v-1]=_=FC({},_,{tickCoord:S>0?_.coordinate-S*y:_.coordinate}),y*(_.tickCoord-y*x/2-n)>=0&&y*(_.tickCoord+y*x/2-r)<=0&&(r=_.tickCoord-y*(x/2+l),m[v-1]=FC({},_,{isShow:!0}))}for(var w=t?v-1:v,E=0;E<w;E++){var T=m[E],M=qf()(o)?o(T.value):T.value,C=gv(M)[f]+g;if(0===E){var $=y*(T.coordinate-y*C/2-n);m[E]=T=FC({},T,{tickCoord:$<0?T.coordinate-$*y:T.coordinate})}else m[E]=T=FC({},T,{tickCoord:T.coordinate});y*(T.tickCoord-y*C/2-n)>=0&&y*(T.tickCoord+y*C/2-r)<=0&&(n=T.tickCoord+y*(C/2+l),m[E]=FC({},T,{isShow:!0}))}return m.filter((function(e){return e.isShow}))}},{key:"getTicksEnd",value:function(e){var t,n,r=e.ticks,i=e.tickFormatter,o=e.viewBox,a=e.orientation,s=e.minTickGap,l=e.unit,c=o.x,u=o.y,h=o.width,d=o.height,p="top"===a||"bottom"===a?"width":"height",f=l&&"width"===p?gv(l)[p]:0,m=(r||[]).slice(),g=m.length,v=g>=2?um(m[1].coordinate-m[0].coordinate):1;1===v?(t="width"===p?c:u,n="width"===p?c+h:u+d):(t="width"===p?c+h:u+d,n="width"===p?c:u);for(var y=g-1;y>=0;y--){var _=m[y],b=qf()(i)?i(_.value):_.value,x=gv(b)[p]+f;if(y===g-1){var S=v*(_.coordinate+v*x/2-n);m[y]=_=FC({},_,{tickCoord:S>0?_.coordinate-S*v:_.coordinate})}else m[y]=_=FC({},_,{tickCoord:_.coordinate});v*(_.tickCoord-v*x/2-t)>=0&&v*(_.tickCoord+v*x/2-n)<=0&&(n=_.tickCoord-v*(x/2+s),m[y]=FC({},_,{isShow:!0}))}return m.filter((function(e){return e.isShow}))}},{key:"renderTickItem",value:function(e,t,n){return h.a.isValidElement(e)?h.a.cloneElement(e,t):qf()(e)?e(t):h.a.createElement($v,jC({},t,{className:"recharts-cartesian-axis-tick-value"}),n)}}],(r=[{key:"shouldComponentUpdate",value:function(e,t){var n=e.viewBox,r=BC(e,["viewBox"]),i=this.props,o=i.viewBox,a=BC(i,["viewBox"]);return!bm(n,o)||!bm(r,a)||!bm(t,this.state)}},{key:"getTickLineCoord",value:function(e){var t,n,r,i,o,a,s=this.props,l=s.x,c=s.y,u=s.width,h=s.height,d=s.orientation,p=s.tickSize,f=s.mirror,m=s.tickMargin,g=f?-1:1,v=e.tickSize||p,y=dm(e.tickCoord)?e.tickCoord:e.coordinate;switch(d){case"top":t=n=e.coordinate,a=(r=(i=c+!f*h)-g*v)-g*m,o=y;break;case"left":r=i=e.coordinate,o=(t=(n=l+!f*u)-g*v)-g*m,a=y;break;case"right":r=i=e.coordinate,o=(t=(n=l+f*u)+g*v)+g*m,a=y;break;default:t=n=e.coordinate,a=(r=(i=c+f*h)+g*v)+g*m,o=y}return{line:{x1:t,y1:r,x2:n,y2:i},tick:{x:o,y:a}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,n=t.orientation,r=t.mirror;switch(n){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,n=e.mirror,r="end";switch(t){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,o=e.orientation,a=e.axisLine,s=e.mirror,l=FC({},Im(this.props),{fill:"none"},Im(a));if("top"===o||"bottom"===o){var c="top"===o&&!s||"bottom"===o&&s;l=FC({},l,{x1:t,y1:n+c*i,x2:t+r,y2:n+c*i})}else{var u="left"===o&&!s||"right"===o&&s;l=FC({},l,{x1:t+u*r,y1:n,x2:t+u*r,y2:n+i})}return h.a.createElement("line",jC({className:"recharts-cartesian-axis-line"},l))}},{key:"renderTicks",value:function(e){var n=this,r=this.props,i=r.tickLine,o=r.stroke,a=r.tick,s=r.tickFormatter,l=r.unit,c=t.getTicks(FC({},this.props,{ticks:e})),u=this.getTickTextAnchor(),d=this.getTickVerticalAnchor(),p=Im(this.props),f=Im(a),m=FC({},p,{fill:"none"},Im(i)),g=c.map((function(e,t){var r=n.getTickLineCoord(e),g=r.line,v=r.tick,y=FC({textAnchor:u,verticalAnchor:d},p,{stroke:"none",fill:o},f,{},v,{index:t,payload:e,visibleTicksCount:c.length});return h.a.createElement(FS,jC({className:"recharts-cartesian-axis-tick",key:"tick-".concat(t)},Rm(n.props,e,t)),i&&h.a.createElement("line",jC({className:"recharts-cartesian-axis-tick-line"},m,g)),a&&n.constructor.renderTickItem(a,y,"".concat(qf()(s)?s(e.value):e.value).concat(l||"")))}));return h.a.createElement("g",{className:"recharts-cartesian-axis-ticks"},g)}},{key:"render",value:function(){var e=this.props,t=e.axisLine,n=e.width,r=e.height,i=e.ticksGenerator,o=e.className;if(e.hide)return null;var a=this.props,s=a.ticks,l=BC(a,["ticks"]),c=s;return qf()(i)&&(c=s&&s.length>0?i(this.props):i(l)),n<=0||r<=0||!c||!c.length?null:h.a.createElement(FS,{className:Zp()("recharts-cartesian-axis",o)},t&&this.renderAxisLine(),this.renderTicks(c),Gw.renderCallByParent(this.props))}}])&&VC(n.prototype,r),i&&VC(n,i),t}(u.Component);qC.displayName="CartesianAxis",qC.propTypes=FC({},wm,{},Em,{className:p.a.string,x:p.a.number,y:p.a.number,width:p.a.number,height:p.a.number,orientation:p.a.oneOf(["top","bottom","left","right"]),viewBox:p.a.shape({x:p.a.number,y:p.a.number,width:p.a.number,height:p.a.number}),tick:p.a.oneOfType([p.a.bool,p.a.func,p.a.object,p.a.element]),axisLine:p.a.oneOfType([p.a.bool,p.a.object]),tickLine:p.a.oneOfType([p.a.bool,p.a.object]),mirror:p.a.bool,tickMargin:p.a.number.isRequired,minTickGap:p.a.number,ticks:p.a.array,tickSize:p.a.number,stroke:p.a.string,tickFormatter:p.a.func,ticksGenerator:p.a.func,interval:p.a.oneOfType([p.a.number,p.a.oneOf(["preserveStart","preserveEnd","preserveStartEnd"])])}),qC.defaultProps={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};var JC=qC;function YC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var KC=["Webkit","Moz","O","ms"],ZC=function(e,t){if(!e)return null;var n=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),r=KC.reduce((function(e,r){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YC(n,!0).forEach((function(t){XC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YC(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,XC({},r+n,t))}),{});return r[e]=t,r};function QC(e){return(QC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e$(){return(e$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function t$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r$(e){return(r$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i$(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o$(e,t){return(o$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a$=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!==QC(t)&&"function"!=typeof t?i$(e):t}(this,r$(t).call(this,e))).handleDrag=function(e){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(e):n.state.isSlideMoving&&n.handleSlideDrag(e)},n.handleTouchMove=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleDrag(e.changedTouches[0])},n.handleDragEnd=function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1})},n.handleLeaveWrapper=function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=setTimeout(n.handleDragEnd,n.props.leaveTimeOut))},n.handleEnterSlideOrTraveller=function(){n.setState({isTextActive:!0})},n.handleLeaveSlideOrTraveller=function(){n.setState({isTextActive:!1})},n.handleSlideDragStart=function(e){var t=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX})},n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(i$(n),"startX"),endX:n.handleTravellerDragStart.bind(i$(n),"endX")},n.state=e.data&&e.data.length?n.updateScale(e):{},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o$(e,t)}(t,e),n=t,i=[{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var i=Math.floor((n+r)/2);e[i]>t?r=i:n=i}return t>=e[r]?r:n}}],(r=[{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props,r=n.data,i=n.width,o=n.x,a=n.travellerWidth,s=n.updateId;(e.data!==r||e.updateId!==s)&&e.data&&e.data.length?this.setState(this.updateScale(e)):e.width===i&&e.x===o&&e.travellerWidth===a||(this.scale.range([e.x,e.x+e.width-e.travellerWidth]),this.scaleValues=this.scale.domain().map((function(e){return t.scale(e)})),this.setState({startX:this.scale(e.startIndex),endX:this.scale(e.endIndex)}))}},{key:"componentWillUnmount",value:function(){this.scale=null,this.scaleValues=null,this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null)}},{key:"getIndex",value:function(e){var t=e.startX,n=e.endX,r=this.props,i=r.gap,o=r.data.length-1,a=Math.min(t,n),s=Math.max(t,n),l=this.constructor.getIndexInRange(this.scaleValues,a),c=this.constructor.getIndexInRange(this.scaleValues,s);return{startIndex:l-l%i,endIndex:c===o?o:c-c%i}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,i=t.dataKey,o=tw(n[e],i,e);return qf()(r)?r(o):o}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,i=t.endX,o=this.props,a=o.x,s=o.width,l=o.travellerWidth,c=o.startIndex,u=o.endIndex,h=o.onChange,d=e.pageX-n;d>0?d=Math.min(d,a+s-l-i,a+s-l-r):d<0&&(d=Math.max(d,a-r,a-i));var p=this.getIndex({startX:r+d,endX:i+d});p.startIndex===c&&p.endIndex===u||!h||h(p),this.setState({startX:r+d,endX:i+d,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX})}},{key:"handleTravellerMove",value:function(e){var t,n=this.state,r=n.brushMoveStartX,i=n.movingTravellerId,o=n.endX,a=n.startX,s=this.state[i],l=this.props,c=l.x,u=l.width,h=l.travellerWidth,d=l.onChange,p=l.gap,f=l.data,m={startX:this.state.startX,endX:this.state.endX},g=e.pageX-r;g>0?g=Math.min(g,c+u-h-s):g<0&&(g=Math.max(g,c-s)),m[i]=s+g;var v=this.getIndex(m),y=v.startIndex,_=v.endIndex;this.setState((t$(t={},i,s+g),t$(t,"brushMoveStartX",e.pageX),t),(function(){var e;d&&(e=f.length-1,("startX"===i&&(o>a?y%p==0:_%p==0)||o<a&&_===e||"endX"===i&&(o>a?_%p==0:y%p==0)||o>a&&_===e)&&d(v))}))}},{key:"updateScale",value:function(e){var t=this,n=e.data,r=e.startIndex,i=e.endIndex,o=e.x,a=e.width,s=e.travellerWidth,l=n.length;return this.scale=gy().domain(CM()(0,l)).range([o,o+a-s]),this.scaleValues=this.scale.domain().map((function(e){return t.scale(e)})),{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,startX:this.scale(r),endX:this.scale(i)}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,o=e.fill,a=e.stroke;return h.a.createElement("rect",{stroke:a,fill:o,x:t,y:n,width:r,height:i})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,o=e.data,a=e.children,s=e.padding,l=u.Children.only(a);return l?h.a.cloneElement(l,{x:t,y:n,width:r,height:i,margin:s,compact:!0,data:o}):null}},{key:"renderTraveller",value:function(e,t){var n=this.props,r=n.y,i=n.travellerWidth,o=n.height,a=n.stroke,s=Math.floor(r+o/2)-1,l=Math.max(e,this.props.x);return h.a.createElement(FS,{className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[t],onTouchStart:this.travellerDragStartHandlers[t],style:{cursor:"col-resize"}},h.a.createElement("rect",{x:l,y:r,width:i,height:o,fill:a,stroke:"none"}),h.a.createElement("line",{x1:l+1,y1:s,x2:l+i-1,y2:s,fill:"none",stroke:"#fff"}),h.a.createElement("line",{x1:l+1,y1:s+2,x2:l+i-1,y2:s+2,fill:"none",stroke:"#fff"}))}},{key:"renderSlide",value:function(e,t){var n=this.props,r=n.y,i=n.height,o=n.stroke;return h.a.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:o,fillOpacity:.2,x:Math.min(e,t),y:r,width:Math.abs(t-e),height:i})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,n=e.endIndex,r=e.y,i=e.height,o=e.travellerWidth,a=e.stroke,s=this.state,l=s.startX,c=s.endX,u={pointerEvents:"none",fill:a};return h.a.createElement(FS,{className:"recharts-brush-texts"},h.a.createElement($v,e$({textAnchor:"end",verticalAnchor:"middle",x:Math.min(l,c)-5,y:r+i/2},u),this.getTextOfTick(t)),h.a.createElement($v,e$({textAnchor:"start",verticalAnchor:"middle",x:Math.max(l,c)+o+5,y:r+i/2},u),this.getTextOfTick(n)))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.className,r=e.children,i=e.x,o=e.y,a=e.width,s=e.height,l=e.alwaysShowText,c=this.state,u=c.startX,d=c.endX,p=c.isTextActive,f=c.isSlideMoving,m=c.isTravellerMoving;if(!t||!t.length||!dm(i)||!dm(o)||!dm(a)||!dm(s)||a<=0||s<=0)return null;var g=Zp()("recharts-brush",n),v=1===h.a.Children.count(r),y=ZC("userSelect","none");return h.a.createElement(FS,{className:g,onMouseMove:this.handleDrag,onMouseLeave:this.handleLeaveWrapper,onMouseUp:this.handleDragEnd,onTouchEnd:this.handleDragEnd,onTouchMove:this.handleTouchMove,style:y},this.renderBackground(),v&&this.renderPanorama(),this.renderSlide(u,d),this.renderTraveller(u,"startX"),this.renderTraveller(d,"endX"),(p||f||m||l)&&this.renderText())}}])&&n$(n.prototype,r),i&&n$(n,i),t}(u.PureComponent);a$.displayName="Brush",a$.propTypes={className:p.a.string,fill:p.a.string,stroke:p.a.string,x:p.a.number,y:p.a.number,width:p.a.number,height:p.a.number.isRequired,travellerWidth:p.a.number,gap:p.a.number,padding:p.a.shape({top:p.a.number,right:p.a.number,bottom:p.a.number,left:p.a.number}),dataKey:p.a.oneOfType([p.a.string,p.a.number,p.a.func]),data:p.a.array,startIndex:p.a.number,endIndex:p.a.number,tickFormatter:p.a.func,children:p.a.node,onChange:p.a.func,updateId:p.a.oneOfType([p.a.string,p.a.number]),leaveTimeOut:p.a.number,alwaysShowText:p.a.bool},a$.defaultProps={height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1};var s$=a$,l$=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},c$=n(773),u$=n.n(c$);function h$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p$(e,t,n){return t&&d$(e.prototype,t),n&&d$(e,n),e}var f$=function(e,t){var n=e.x,r=e.y,i=t.x,o=t.y;return{x:Math.min(n,i),y:Math.min(r,o),width:Math.abs(i-n),height:Math.abs(o-r)}},m$=function(){function e(t){h$(this,e),this.scale=t}return p$(e,null,[{key:"create",value:function(t){return new e(t)}}]),p$(e,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":return this.scale(e);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i;case"end":var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o;default:return this.scale(e)}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}},{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}}]),e}();m$.EPS=1e-4;var g$=function(){function e(t){h$(this,e),this.scales=u$()(t,m$.create),Object.assign(this,this.scales)}return p$(e,null,[{key:"create",value:function(e){return new this(e)}}]),p$(e,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=this.scales;return u$()(e,(function(e,t){return r[t].apply(e,{bandAware:n})}))}},{key:"isInRange",value:function(e){var t=this.scales;return wM()(e,(function(e,n){return t[n].isInRange(e)}))}}]),e}();function v$(e){return(v$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y$(){return(y$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_$(n,!0).forEach((function(t){x$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E$(e,t){return!t||"object"!==v$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T$(e){return(T$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M$(e,t){return(M$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C$=function(e){function t(){return S$(this,t),E$(this,T$(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M$(e,t)}(t,e),n=t,i=[{key:"renderDot",value:function(e,t){return h.a.isValidElement(e)?h.a.cloneElement(e,t):qf()(e)?e(t):h.a.createElement(wC,y$({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))}}],(r=[{key:"getCoordinate",value:function(){var e=this.props,t=e.x,n=e.y,r=e.xAxis,i=e.yAxis,o=g$.create({x:r.scale,y:i.scale}),a=o.apply({x:t,y:n},{bandAware:!0});return l$(this.props,"discard")&&!o.isInRange(a)?null:a}},{key:"render",value:function(){var e=this.props,t=e.x,n=e.y,r=e.r,i=(e.alwaysShow,e.clipPathId),o=pm(t),a=pm(n);if(!o||!a)return null;var s=this.getCoordinate();if(!s)return null;var l=s.x,c=s.y,u=this.props,d=u.shape,p=u.className,f=b$({clipPath:l$(this.props,"hidden")?"url(#".concat(i,")"):void 0},Im(this.props),{},Lm(this.props),{cx:l,cy:c});return h.a.createElement(FS,{className:Zp()("recharts-reference-dot",p)},this.constructor.renderDot(d,f),Gw.renderCallByParent(this.props,{x:l-r,y:c-r,width:2*r,height:2*r}))}}])&&w$(n.prototype,r),i&&w$(n,i),t}(u.PureComponent);C$.displayName="ReferenceDot",C$.propTypes=b$({},wm,{},Em,{r:p.a.number,xAxis:p.a.shape({scale:p.a.func}),yAxis:p.a.shape({scale:p.a.func}),isFront:p.a.bool,alwaysShow:p.a.bool,ifOverflow:p.a.oneOf(["hidden","visible","discard","extendDomain"]),x:p.a.oneOfType([p.a.number,p.a.string]),y:p.a.oneOfType([p.a.number,p.a.string]),className:p.a.oneOfType([p.a.number,p.a.string]),yAxisId:p.a.oneOfType([p.a.string,p.a.number]),xAxisId:p.a.oneOfType([p.a.string,p.a.number]),shape:p.a.oneOfType([p.a.func,p.a.element]),clipPathId:p.a.string}),C$.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};var $$=C$,O$=n(771),A$=n.n(O$);function I$(e){return(I$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P$(n,!0).forEach((function(t){k$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function D$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N$(e,t){return!t||"object"!==I$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F$(e){return(F$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U$(e,t){return(U$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B$(){return(B$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var z$=function(e){function t(){return D$(this,t),N$(this,F$(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U$(e,t)}(t,e),n=t,(r=[{key:"getEndPoints",value:function(e,t,n,r){var i=this.props,o=i.viewBox,a=o.x,s=o.y,l=o.width,c=o.height,u=i.position;if(n){var h=this.props,d=h.y,p=h.yAxis.orientation,f=e.y.apply(d,{position:u});if(l$(this.props,"discard")&&!e.y.isInRange(f))return null;var m=[{x:a+l,y:f},{x:a,y:f}];return"left"===p?m.reverse():m}if(t){var g=this.props,v=g.x,y=g.xAxis.orientation,_=e.x.apply(v,{position:u});if(l$(this.props,"discard")&&!e.x.isInRange(_))return null;var b=[{x:_,y:s+c},{x:_,y:s}];return"top"===y?b.reverse():b}if(r){var x=this.props.segment.map((function(t){return e.apply(t,{position:u})}));return l$(this.props,"discard")&&A$()(x,(function(t){return!e.isInRange(t)}))?null:x}return null}},{key:"render",value:function(){var e=this.props,t=e.x,n=e.y,r=e.segment,i=e.xAxis,o=e.yAxis,a=e.shape,s=e.className,l=(e.alwaysShow,e.clipPathId),c=g$.create({x:i.scale,y:o.scale}),u=pm(t),d=pm(n),p=r&&2===r.length,f=this.getEndPoints(c,u,d,p);if(!f)return null;var m=R$(f,2),g=m[0],v=g.x,y=g.y,_=m[1],b=_.x,x=_.y,S=L$({clipPath:l$(this.props,"hidden")?"url(#".concat(l,")"):void 0},Im(this.props),{},Lm(this.props),{x1:v,y1:y,x2:b,y2:x});return h.a.createElement(FS,{className:Zp()("recharts-reference-line",s)},function(e,t){return h.a.isValidElement(e)?h.a.cloneElement(e,t):qf()(e)?e(t):h.a.createElement("line",B$({},t,{className:"recharts-reference-line-line"}))}(a,S),Gw.renderCallByParent(this.props,function(e){var t=e.x1,n=e.y1,r=e.x2,i=e.y2;return f$({x:t,y:n},{x:r,y:i})}({x1:v,y1:y,x2:b,y2:x})))}}])&&j$(n.prototype,r),i&&j$(n,i),t}(u.PureComponent);z$.displayName="ReferenceLine",z$.propTypes=L$({},wm,{viewBox:p.a.shape({x:p.a.number,y:p.a.number,width:p.a.number,height:p.a.number}),xAxis:p.a.object,yAxis:p.a.object,isFront:p.a.bool,alwaysShow:p.a.bool,ifOverflow:p.a.oneOf(["hidden","visible","discard","extendDomain"]),x:p.a.oneOfType([p.a.number,p.a.string]),y:p.a.oneOfType([p.a.number,p.a.string]),segment:p.a.arrayOf(p.a.shape({x:p.a.oneOfType([p.a.number,p.a.string]),y:p.a.oneOfType([p.a.number,p.a.string])})),position:p.a.oneOf(["middle","start","end"]),className:p.a.oneOfType([p.a.number,p.a.string]),yAxisId:p.a.oneOfType([p.a.string,p.a.number]),xAxisId:p.a.oneOfType([p.a.string,p.a.number]),shape:p.a.func}),z$.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};var V$=z$;function G$(e){return(G$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H$(){return(H$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function W$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W$(n,!0).forEach((function(t){J$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K$(e,t){return!t||"object"!==G$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z$(e){return(Z$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q$(e,t){return(Q$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var eO=function(e){function t(){return Y$(this,t),K$(this,Z$(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q$(e,t)}(t,e),n=t,i=[{key:"renderRect",value:function(e,t){return h.a.isValidElement(e)?h.a.cloneElement(e,t):qf()(e)?e(t):h.a.createElement(RC,H$({},t,{className:"recharts-reference-area-rect"}))}}],(r=[{key:"getRect",value:function(e,t,n,r){var i=this.props,o=i.x1,a=i.x2,s=i.y1,l=i.y2,c=i.xAxis,u=i.yAxis,h=g$.create({x:c.scale,y:u.scale}),d={x:e?h.x.apply(o):h.x.rangeMin,y:n?h.y.apply(s):h.y.rangeMin},p={x:t?h.x.apply(a):h.x.rangeMax,y:r?h.y.apply(l):h.y.rangeMax};return!l$(this.props,"discard")||h.isInRange(d)&&h.isInRange(p)?f$(d,p):null}},{key:"render",value:function(){var e=this.props,t=e.x1,n=e.x2,r=e.y1,i=e.y2,o=e.className,a=(e.alwaysShow,e.clipPathId),s=pm(t),l=pm(n),c=pm(r),u=pm(i),d=this.props.shape;if(!(s||l||c||u||d))return null;var p=this.getRect(s,l,c,u);if(!p&&!d)return null;var f=l$(this.props,"hidden")?"url(#".concat(a,")"):void 0;return h.a.createElement(FS,{className:Zp()("recharts-reference-area",o)},this.constructor.renderRect(d,q$({clipPath:f},this.props,{},p)),Gw.renderCallByParent(this.props,p))}}])&&X$(n.prototype,r),i&&X$(n,i),t}(u.PureComponent);eO.displayName="ReferenceArea",eO.propTypes=q$({},wm,{viewBox:p.a.shape({x:p.a.number,y:p.a.number,width:p.a.number,height:p.a.number}),xAxis:p.a.object,yAxis:p.a.object,isFront:p.a.bool,alwaysShow:p.a.bool,ifOverflow:p.a.oneOf(["hidden","visible","discard","extendDomain"]),x1:p.a.oneOfType([p.a.number,p.a.string]),x2:p.a.oneOfType([p.a.number,p.a.string]),y1:p.a.oneOfType([p.a.number,p.a.string]),y2:p.a.oneOfType([p.a.number,p.a.string]),className:p.a.oneOfType([p.a.number,p.a.string]),yAxisId:p.a.oneOfType([p.a.string,p.a.number]),xAxisId:p.a.oneOfType([p.a.string,p.a.number]),shape:p.a.oneOfType([p.a.func,p.a.element])}),eO.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};var tO=eO,nO=function(e,t,n,r,i){var o=Om(e,V$),a=Om(e,$$),s=o.concat(a),l=Om(e,tO),c="".concat(r,"Id"),u=r[0],h=t;if(s.length&&(h=s.reduce((function(e,t){if(t.props[c]===n&&l$(t.props,"extendDomain")&&dm(t.props[u])){var r=t.props[u];return[Math.min(e[0],r),Math.max(e[1],r)]}return e}),h)),l.length){var d="".concat(u,"1"),p="".concat(u,"2");h=l.reduce((function(e,t){if(t.props[c]===n&&l$(t.props,"extendDomain")&&dm(t.props[d])&&dm(t.props[p])){var r=t.props[d],i=t.props[p];return[Math.min(e[0],r,i),Math.max(e[1],r,i)]}return e}),h)}return i&&i.length&&(h=i.reduce((function(e,t){return dm(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e}),h)),h},rO=n(774),iO=new(n.n(rO).a);iO.setMaxListeners&&iO.setMaxListeners(10);var oO="recharts.syncMouseEvents";function aO(e){return(aO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sO(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lO(){return(lO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function cO(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function uO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uO(n,!0).forEach((function(t){dO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uO(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fO(e){return(fO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gO(e,t){return(gO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vO={xAxis:["bottom","top"],yAxis:["left","right"]},yO={x:0,y:0},_O=function(e){var t=e.chartName,n=e.GraphicalChild,r=e.eventType,i=void 0===r?"axis":r,o=e.axisComponents,a=e.legendContent,s=e.formatAxisMap,l=e.defaultProps,c=e.propTypes,d=function(e){function r(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(n=function(e,t){return!t||"object"!==aO(t)&&"function"!=typeof t?mO(e):t}(this,fO(r).call(this,e))).handleLegendBBoxUpdate=function(e){if(e&&n.legendInstance){var t=n.state,r=t.dataStartIndex,i=t.dataEndIndex,o=t.updateId;n.setState(n.updateStateOfAxisMapsOffsetAndStackGroups({props:n.props,dataStartIndex:r,dataEndIndex:i,updateId:o}))}},n.handleReceiveSyncEvent=function(e,t,r){var i=n.props,o=i.syncId,a=i.layout,s=n.state.updateId;if(o===e&&t!==n.uniqueChartId){var l=r.dataStartIndex,c=r.dataEndIndex;if(Kf()(r.dataStartIndex)&&Kf()(r.dataEndIndex))if(Kf()(r.activeTooltipIndex))n.setState(r);else{var u=r.chartX,h=r.chartY,d=r.activeTooltipIndex,p=n.state,f=p.offset,m=p.tooltipTicks;if(!f)return;var g=hO({},f,{x:f.left,y:f.top}),v=Math.min(u,g.x+g.width),y=Math.min(h,g.y+g.height),_=m[d]&&m[d].value,b=n.getTooltipContent(d),x=m[d]?{x:"horizontal"===a?m[d].coordinate:v,y:"horizontal"===a?y:m[d].coordinate}:yO;n.setState(hO({},r,{activeLabel:_,activeCoordinate:x,activePayload:b}))}else n.setState(hO({dataStartIndex:l,dataEndIndex:c},n.updateStateOfAxisMapsOffsetAndStackGroups({props:n.props,dataStartIndex:l,dataEndIndex:c,updateId:s})))}},n.handleBrushChange=function(e){var t=e.startIndex,r=e.endIndex;if(t!==n.state.dataStartIndex||r!==n.state.dataEndIndex){var i=n.state.updateId;n.setState((function(){return hO({dataStartIndex:t,dataEndIndex:r},n.updateStateOfAxisMapsOffsetAndStackGroups({props:n.props,dataStartIndex:t,dataEndIndex:r,updateId:i}))})),n.triggerSyncEvent({dataStartIndex:t,dataEndIndex:r})}},n.handleMouseEnter=function(e){var t=n.props.onMouseEnter,r=n.getMouseInfo(e);if(r){var i=hO({},r,{isTooltipActive:!0});n.setState(i),n.triggerSyncEvent(i),qf()(t)&&t(i,e)}},n.triggeredAfterMouseMove=function(e){var t=n.props.onMouseMove,r=n.getMouseInfo(e),i=r?hO({},r,{isTooltipActive:!0}):{isTooltipActive:!1};n.setState(i),n.triggerSyncEvent(i),qf()(t)&&t(i,e)},n.handleItemMouseEnter=function(e){n.setState((function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}}))},n.handleItemMouseLeave=function(){n.setState((function(){return{isTooltipActive:!1}}))},n.handleMouseMove=function(e){e&&qf()(e.persist)&&e.persist(),n.triggeredAfterMouseMove(e)},n.handleMouseLeave=function(e){var t=n.props.onMouseLeave,r={isTooltipActive:!1};n.setState(r),n.triggerSyncEvent(r),qf()(t)&&t(r,e)},n.handleOuterEvent=function(e){var t=function(e){var t=e&&e.type;return t&&Tm[t]?Tm[t]:null}(e);if(t&&qf()(n.props[t])){var r=n.getMouseInfo(e);(0,n.props[t])(r,e)}},n.handleClick=function(e){var t=n.props.onClick;qf()(t)&&t(n.getMouseInfo(e),e)},n.handleMouseDown=function(e){var t=n.props.onMouseDown;qf()(t)&&t(n.getMouseInfo(e),e)},n.handleMouseUp=function(e){var t=n.props.onMouseUp;qf()(t)&&t(n.getMouseInfo(e),e)},n.handleTouchMove=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleMouseMove(e.changedTouches[0])},n.handleTouchStart=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleMouseDown(e.changedTouches[0])},n.handleTouchEnd=function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleMouseUp(e.changedTouches[0])},n.verticalCoordinatesGenerator=function(e){var t=e.xAxis,n=e.width,r=e.height,i=e.offset;return lw(JC.getTicks(hO({},JC.defaultProps,{},t,{ticks:cw(t,!0),viewBox:{x:0,y:0,width:n,height:r}})),i.left,i.left+i.width)},n.horizontalCoordinatesGenerator=function(e){var t=e.yAxis,n=e.width,r=e.height,i=e.offset;return lw(JC.getTicks(hO({},JC.defaultProps,{},t,{ticks:cw(t,!0),viewBox:{x:0,y:0,width:n,height:r}})),i.top,i.top+i.height)},n.axesTicksGenerator=function(e){return cw(e,!0)},n.tooltipTicksGenerator=function(e){var t=vm(e),n=cw(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Pv()(n,(function(e){return e.coordinate})),tooltipAxis:t,tooltipAxisBandSize:bw(t)}},n.renderCursor=function(e){var r=n.state,i=r.isTooltipActive,o=r.activeCoordinate,a=r.activePayload,s=r.offset;if(!(e&&e.props.cursor&&i&&o))return null;var l,c=n.props.layout,h=XT;if("ScatterChart"===t)l=o,h=fC;else if("BarChart"===t)l=n.getCursorRectangle(),h=RC;else if("radial"===c){var d=n.getCursorPoints(),p=d.cx,f=d.cy,m=d.radius;l={cx:p,cy:f,startAngle:d.startAngle,endAngle:d.endAngle,innerRadius:m,outerRadius:m},h=dT}else l={points:n.getCursorPoints()},h=XT;var g=e.key||"_recharts-cursor",v=hO({stroke:"#ccc",pointerEvents:"none"},s,{},l,{},Im(e.props.cursor),{payload:a,key:g,className:"recharts-tooltip-cursor"});return Object(u.isValidElement)(e.props.cursor)?Object(u.cloneElement)(e.props.cursor,v):Object(u.createElement)(h,v)},n.renderPolarAxis=function(e,t,r){var i=e.type.axisType,o=n.state["".concat(i,"Map")][e.props["".concat(i,"Id")]];return Object(u.cloneElement)(e,hO({},o,{className:i,key:e.key||"".concat(t,"-").concat(r),ticks:cw(o,!0)}))},n.renderXAxis=function(e,t,r){var i=n.state.xAxisMap[e.props.xAxisId];return n.renderAxis(i,e,t,r)},n.renderYAxis=function(e,t,r){var i=n.state.yAxisMap[e.props.yAxisId];return n.renderAxis(i,e,t,r)},n.renderGrid=function(e){var t=n.state,r=t.xAxisMap,i=t.yAxisMap,o=t.offset,a=n.props,s=a.width,l=a.height,c=vm(r),h=TM()(i,(function(e){return wM()(e.domain,Number.isFinite)}))||vm(i),d=e.props||{};return Object(u.cloneElement)(e,{key:e.key||"grid",x:dm(d.x)?d.x:o.left,y:dm(d.y)?d.y:o.top,width:dm(d.width)?d.width:o.width,height:dm(d.height)?d.height:o.height,xAxis:c,yAxis:h,offset:o,chartWidth:s,chartHeight:l,verticalCoordinatesGenerator:d.verticalCoordinatesGenerator||n.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:d.horizontalCoordinatesGenerator||n.horizontalCoordinatesGenerator})},n.renderPolarGrid=function(e){var t=n.state,r=t.radiusAxisMap,i=t.angleAxisMap,o=vm(r),a=vm(i),s=a.cx,l=a.cy,c=a.innerRadius,h=a.outerRadius;return Object(u.cloneElement)(e,{polarAngles:cw(a,!0).map((function(e){return e.coordinate})),polarRadius:cw(o,!0).map((function(e){return e.coordinate})),cx:s,cy:l,innerRadius:c,outerRadius:h,key:e.key||"polar-grid"})},n.renderBrush=function(e){var t=n.props,r=t.margin,i=t.data,o=n.state,a=o.offset,s=o.dataStartIndex,l=o.dataEndIndex,c=o.updateId;return Object(u.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:uw(n.handleBrushChange,null,e.props.onChange),data:i,x:dm(e.props.x)?e.props.x:a.left,y:dm(e.props.y)?e.props.y:a.top+a.height+a.brushBottom-(r.bottom||0),width:dm(e.props.width)?e.props.width:a.width,startIndex:s,endIndex:l,updateId:"brush-".concat(c)})},n.renderReferenceElement=function(e,t,r){if(!e)return null;var i=mO(n).clipPathId,o=n.state,a=o.xAxisMap,s=o.yAxisMap,l=o.offset,c=e.props,h=c.xAxisId,d=c.yAxisId;return Object(u.cloneElement)(e,{key:e.key||"".concat(t,"-").concat(r),xAxis:a[h],yAxis:s[d],viewBox:{x:l.left,y:l.top,width:l.width,height:l.height},clipPathId:i})},n.renderGraphicChild=function(e,t,r){var i=n.filterFormatItem(e,t,r);if(!i)return null;var o=Object(u.cloneElement)(e,i.props),a=n.state,s=a.isTooltipActive,l=a.tooltipAxis,c=a.activeTooltipIndex,h=a.activeLabel,d=n.props.children,p=Am(d,rC),f=i.props,m=f.points,g=f.isRange,v=f.baseLine,y=i.item.props,_=y.activeDot;if(!y.hide&&s&&p&&_&&c>=0){var b,x;if(l.dataKey&&!l.allowDuplicatedCategory){var S="function"==typeof l.dataKey?function(e){return l.dataKey(e.payload)}:"payload.".concat(l.dataKey);b=_m(m,S,h),x=g&&v&&_m(v,S,h)}else b=m[c],x=g&&v&&v[c];if(!Kf()(b))return[o].concat(cO(n.renderActivePoints({item:i,activePoint:b,basePoint:x,childIndex:c,isRange:g})))}return g?[o,null,null]:[o,null]},n.renderCustomized=function(e){return Object(u.cloneElement)(e,hO({},n.props,{},n.state))};var i=n.constructor.createDefaultState(e);return n.state=hO({},i,{updateId:0},n.updateStateOfAxisMapsOffsetAndStackGroups(hO({props:e},i,{updateId:0}))),n.uniqueChartId=Kf()(e.id)?mm("recharts"):e.id,n.clipPathId="".concat(n.uniqueChartId,"-clip"),e.throttleDelay&&(n.triggeredAfterMouseMove=OM()(n.triggeredAfterMouseMove,e.throttleDelay)),n}var l,c,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gO(e,t)}(r,e),l=r,d=[{key:"getAxisNameByLayout",value:function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}}},{key:"renderActiveDot",value:function(e,t){var n;return n=Object(u.isValidElement)(e)?Object(u.cloneElement)(e,t):qf()(e)?e(t):h.a.createElement(wC,t),h.a.createElement(FS,{className:"recharts-active-dot",key:t.key},n)}}],(c=[{key:"componentDidMount",value:function(){Kf()(this.props.syncId)||this.addListener()}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props,r=n.data,i=n.children,o=n.width,a=n.height,s=n.layout,l=n.stackOffset,c=n.margin,u=this.state.updateId;if(e.data===r&&e.width===o&&e.height===a&&e.layout===s&&e.stackOffset===l&&bm(e.margin,c)){if(!Um(e.children,i)){var h=Kf()(e.data)?u+1:u;this.setState((function(n){return hO({updateId:h},t.updateStateOfAxisMapsOffsetAndStackGroups(hO({props:e},n,{updateId:h})))}))}}else{var d=this.constructor.createDefaultState(e);this.setState(hO({},d,{updateId:u+1},this.updateStateOfAxisMapsOffsetAndStackGroups(hO({props:e},d,{updateId:u+1}))))}Kf()(this.props.syncId)&&!Kf()(e.syncId)&&this.addListener(),!Kf()(this.props.syncId)&&Kf()(e.syncId)&&this.removeListener()}},{key:"componentWillUnmount",value:function(){Kf()(this.props.syncId)||this.removeListener(),"function"==typeof this.triggeredAfterMouseMove.cancel&&this.triggeredAfterMouseMove.cancel()}},{key:"getAxisMap",value:function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,i=t.AxisComp,o=t.graphicalItems,a=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,c=e.children,u="".concat(r,"Id"),h=Om(c,i),d={};return h&&h.length?d=this.getAxisMapByAxes(e,{axes:h,graphicalItems:o,axisType:r,axisIdKey:u,stackGroups:a,dataStartIndex:s,dataEndIndex:l}):o&&o.length&&(d=this.getAxisMapByItems(e,{Axis:i,graphicalItems:o,axisType:r,axisIdKey:u,stackGroups:a,dataStartIndex:s,dataEndIndex:l})),d}},{key:"getAxisMapByAxes",value:function(e,t){var n=this,r=t.axes,i=t.graphicalItems,o=t.axisType,a=t.axisIdKey,s=t.stackGroups,l=t.dataStartIndex,c=t.dataEndIndex,u=e.layout,h=e.children,d=e.stackOffset,p=sw(u,o);return r.reduce((function(t,r){var f=r.props,m=f.type,g=f.dataKey,v=f.allowDataOverflow,y=f.allowDuplicatedCategory,_=f.scale,b=f.ticks,x=r.props[a],S=n.constructor.getDisplayedData(e,{graphicalItems:i.filter((function(e){return e.props[a]===x})),dataStartIndex:l,dataEndIndex:c}),w=S.length;if(!t[x]){var E,T,M;if(g){if(E=nw(S,g,m),"category"===m&&p){var C=function(e){if(!rm()(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(E);y&&C?(T=E,E=CM()(0,w)):y||(E=xw(r.props.domain,E,r).reduce((function(e,t){return e.indexOf(t)>=0?e:[].concat(cO(e),[t])}),[]))}else if("category"===m)E=y?E.filter((function(e){return""!==e&&!Kf()(e)})):xw(r.props.domain,E,r).reduce((function(e,t){return e.indexOf(t)>=0||""===t||Kf()(t)?e:[].concat(cO(e),[t])}),[]);else if("number"===m){var $=function(e,t,n,r){var i=t.map((function(t){return ow(e,t,n,r)})).filter((function(e){return!Kf()(e)}));return i&&i.length?i.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]):null}(S,i.filter((function(e){return e.props[a]===x&&!e.props.hide})),g,o);$&&(E=$)}!p||"number"!==m&&"auto"===_||(M=nw(S,g,"category"))}else E=p?CM()(0,w):s&&s[x]&&s[x].hasStack&&"number"===m?"expand"===d?[0,1]:gw(s[x].stackGroups,l,c):aw(S,i.filter((function(e){return e.props[a]===x&&!e.props.hide})),m,!0);return"number"===m&&(E=nO(h,E,x,o,b),r.props.domain&&(E=_w(r.props.domain,E,v))),hO({},t,dO({},x,hO({},r.props,{axisType:o,domain:E,categoricalDomain:M,duplicateDomain:T,originalDomain:r.props.domain,isCategorial:p,layout:u})))}return t}),{})}},{key:"getAxisMapByItems",value:function(e,t){var n=t.graphicalItems,r=t.Axis,i=t.axisType,o=t.axisIdKey,a=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,h=this.constructor.getDisplayedData(e,{graphicalItems:n,dataStartIndex:s,dataEndIndex:l}),d=h.length,p=sw(c,i),f=-1;return n.reduce((function(e,t){var m,g=t.props[o];return e[g]?e:(f++,p?m=CM()(0,d):a&&a[g]&&a[g].hasStack?(m=gw(a[g].stackGroups,s,l),m=nO(u,m,g,i)):(m=_w(r.defaultProps.domain,aw(h,n.filter((function(e){return e.props[o]===g&&!e.props.hide})),"number"),r.defaultProps.allowDataOverflow),m=nO(u,m,g,i)),hO({},e,dO({},g,hO({axisType:i},r.defaultProps,{hide:!0,orientation:vO[i]&&vO[i][f%2],domain:m,originalDomain:r.defaultProps.domain,isCategorial:p,layout:c}))))}),{})}},{key:"getActiveCoordinate",value:function(e,t,n){var r=this.props.layout,i=e.find((function(e){return e&&e.index===t}));if(i){if("horizontal"===r)return{x:i.coordinate,y:n.y};if("vertical"===r)return{x:n.x,y:i.coordinate};if("centric"===r){var o=i.coordinate,a=n.radius;return hO({},n,{},$w(n.cx,n.cy,a,o),{angle:o,radius:a})}var s=i.coordinate,l=n.angle;return hO({},n,{},$w(n.cx,n.cy,s,l),{angle:l,radius:s})}return yO}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,n,r,o=function(e,t){return{chartX:Math.round(e.pageX-t.left),chartY:Math.round(e.pageY-t.top)}}(e,(t=this.container,n=t.ownerDocument.documentElement,r={top:0,left:0},void 0!==t.getBoundingClientRect&&(r=t.getBoundingClientRect()),{top:r.top+window.pageYOffset-n.clientTop,left:r.left+window.pageXOffset-n.clientLeft})),a=this.inRange(o.chartX,o.chartY);if(!a)return null;var s=this.state,l=s.xAxisMap,c=s.yAxisMap;if("axis"!==i&&l&&c){var u=vm(l).scale,h=vm(c).scale;return hO({},o,{xValue:u&&u.invert?u.invert(o.chartX):null,yValue:h&&h.invert?h.invert(o.chartY):null})}var d=this.state,p=d.orderedTooltipTicks,f=d.tooltipAxis,m=d.tooltipTicks,g=function(e,t,n,r){var i=-1,o=t.length;if(o>1){if(r&&"angleAxis"===r.axisType&&Math.abs(Math.abs(r.range[1]-r.range[0])-360)<=1e-6)for(var a=r.range,s=0;s<o;s++){var l=s>0?n[s-1].coordinate:n[o-1].coordinate,c=n[s].coordinate,u=s>=o-1?n[0].coordinate:n[s+1].coordinate,h=void 0;if(um(c-l)!==um(u-c)){var d=[];if(um(u-c)===um(a[1]-a[0])){h=u;var p=c+a[1]-a[0];d[0]=Math.min(p,(p+l)/2),d[1]=Math.max(p,(p+l)/2)}else{h=l;var f=u+a[1]-a[0];d[0]=Math.min(c,(f+c)/2),d[1]=Math.max(c,(f+c)/2)}var m=[Math.min(c,(h+c)/2),Math.max(c,(h+c)/2)];if(e>m[0]&&e<=m[1]||e>=d[0]&&e<=d[1]){i=n[s].index;break}}else{var g=Math.min(l,u),v=Math.max(l,u);if(e>(g+c)/2&&e<=(v+c)/2){i=n[s].index;break}}}else for(var y=0;y<o;y++)if(0===y&&e<=(t[y].coordinate+t[y+1].coordinate)/2||y>0&&y<o-1&&e>(t[y].coordinate+t[y-1].coordinate)/2&&e<=(t[y].coordinate+t[y+1].coordinate)/2||y===o-1&&e>(t[y].coordinate+t[y-1].coordinate)/2){i=t[y].index;break}}else i=0;return i}(this.calculateTooltipPos(a),p,m,f);if(g>=0&&m){var v=m[g]&&m[g].value;return hO({},o,{activeTooltipIndex:g,activeLabel:v,activePayload:this.getTooltipContent(g,v),activeCoordinate:this.getActiveCoordinate(p,g,a)})}return null}},{key:"getTooltipContent",value:function(e,t){var n=this.state,r=n.graphicalItems,i=n.tooltipAxis,o=this.constructor.getDisplayedData(this.props,this.state);return e<0||!r||!r.length||e>=o.length?null:r.reduce((function(n,r){if(r.props.hide)return n;var a,s=r.props,l=s.dataKey,c=s.name,u=s.unit,h=s.formatter,d=s.data,p=s.tooltipType;return(a=i.dataKey&&!i.allowDuplicatedCategory?_m(d||o,i.dataKey,t):d&&d[e]||o[e])?[].concat(cO(n),[hO({},Im(r),{dataKey:l,unit:u,formatter:h,name:c||l,color:rw(r),value:tw(a,l),type:p,payload:a})]):n}),[])}},{key:"getFormatItems",value:function(e,t){var n=this,r=t.graphicalItems,i=t.stackGroups,a=t.offset,s=t.updateId,l=t.dataStartIndex,c=t.dataEndIndex,h=e.barSize,d=e.layout,p=e.barGap,f=e.barCategoryGap,m=e.maxBarSize,g=this.constructor.getAxisNameByLayout(d),v=g.numericAxisName,y=g.cateAxisName,_=this.constructor.hasBar(r),b=_&&function(e){var t=e.barSize,n=e.stackGroups,r=void 0===n?{}:n;if(!r)return{};for(var i={},o=Object.keys(r),a=0,s=o.length;a<s;a++)for(var l=r[o[a]].stackGroups,c=Object.keys(l),u=0,h=c.length;u<h;u++){var d=l[c[u]],p=d.items,f=d.cateAxisId,m=p.filter((function(e){return $m(e.type).indexOf("Bar")>=0}));if(m&&m.length){var g=m[0].props.barSize,v=m[0].props[f];i[v]||(i[v]=[]),i[v].push({item:m[0],stackList:m.slice(1),barSize:Kf()(g)?t:g})}}return i}({barSize:h,stackGroups:i}),x=[];return r.forEach((function(r,h){var g,S,w,E,T=n.constructor.getDisplayedData(e,{dataStartIndex:l,dataEndIndex:c},r),M=r.props,C=M.dataKey,$=M.maxBarSize,O=r.props["".concat(v,"Id")],A=r.props["".concat(y,"Id")],I=o.reduce((function(e,n){var i,o=t["".concat(n.axisType,"Map")],a=r.props["".concat(n.axisType,"Id")],s=o&&o[a];return hO({},e,(dO(i={},n.axisType,s),dO(i,"".concat(n.axisType,"Ticks"),cw(s)),i))}),{}),P=I[y],L=I["".concat(y,"Ticks")],k=i&&i[O]&&i[O].hasStack&&function(e,t){var n=e.props.stackId;if(pm(n)){var r=t[n];if(r&&r.items.length){for(var i=-1,o=0,a=r.items.length;o<a;o++)if(r.items[o]===e){i=o;break}return i>=0?r.stackedData[i]:null}}return null}(r,i[O].stackGroups),R=bw(P,L),D=Kf()($)?m:$,j=_&&function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,i=e.sizeList,o=void 0===i?[]:i,a=e.maxBarSize,s=o.length;if(s<1)return null;var l,c=gm(t,r,0,!0);if(o[0].barSize===+o[0].barSize){var u=!1,h=r/s,d=o.reduce((function(e,t){return e+t.barSize||0}),0);(d+=(s-1)*c)>=r&&(d-=(s-1)*c,c=0),d>=r&&h>0&&(u=!0,d=s*(h*=.9));var p={offset:((r-d)/2>>0)-c,size:0};l=o.reduce((function(e,t){var n=[].concat(KS(e),[{item:t.item,position:{offset:p.offset+p.size+c,size:u?h:t.barSize}}]);return p=n[n.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){n.push({item:e,position:p})})),n}),[])}else{var f=gm(n,r,0,!0);r-2*f-(s-1)*c<=0&&(c=0);var m=(r-2*f-(s-1)*c)/s;m>1&&(m>>=0);var g=a===+a?Math.min(m,a):m;l=o.reduce((function(e,t,n){var r=[].concat(KS(e),[{item:t.item,position:{offset:f+(m+c)*n+(m-g)/2,size:g}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:r[r.length-1].position})})),r}),[])}return l}({barGap:p,barCategoryGap:f,bandSize:R,sizeList:b[A],maxBarSize:D}),N=r&&r.type&&r.type.getComposedData;N&&x.push({props:hO({},N(hO({},I,{displayedData:T,props:e,dataKey:C,item:r,bandSize:R,barPosition:j,offset:a,stackedData:k,layout:d,dataStartIndex:l,dataEndIndex:c,onItemMouseLeave:uw(n.handleItemMouseLeave,null,r.props.onMouseLeave),onItemMouseEnter:uw(n.handleItemMouseEnter,null,r.props.onMouseEnter)})),(g={key:r.key||"item-".concat(h)},dO(g,v,I[v]),dO(g,y,I[y]),dO(g,"animationId",s),g)),childIndex:(S=r,w=e.children,E=-1,u.Children.forEach(w,(function(e,t){e===S&&(E=t)})),E),item:r})})),x}},{key:"getCursorRectangle",value:function(){var e=this.props.layout,t=this.state,n=t.activeCoordinate,r=t.offset,i=t.tooltipAxisBandSize,o=i/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?n.x-o:r.left+.5,y:"horizontal"===e?r.top+.5:n.y-o,width:"horizontal"===e?i:r.width-1,height:"horizontal"===e?r.height-1:i}}},{key:"getCursorPoints",value:function(){var e,t,n,r,i=this.props.layout,o=this.state,a=o.activeCoordinate,s=o.offset;if("horizontal"===i)n=e=a.x,t=s.top,r=s.top+s.height;else if("vertical"===i)r=t=a.y,e=s.left,n=s.left+s.width;else if(!Kf()(a.cx)||!Kf()(a.cy)){if("centric"!==i){var l=a.cx,c=a.cy,u=a.radius,h=a.startAngle,d=a.endAngle;return{points:[$w(l,c,u,h),$w(l,c,u,d)],cx:l,cy:c,radius:u,startAngle:h,endAngle:d}}var p=a.cx,f=a.cy,m=a.innerRadius,g=a.outerRadius,v=a.angle,y=$w(p,f,m,v),_=$w(p,f,g,v);e=y.x,t=y.y,n=_.x,r=_.y}return[{x:e,y:t},{x:n,y:r}]}},{key:"calculateTooltipPos",value:function(e){var t=this.props.layout;return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}},{key:"inRange",value:function(e,t){var n=this.props.layout;if("horizontal"===n||"vertical"===n){var r=this.state.offset;return e>=r.left&&e<=r.left+r.width&&t>=r.top&&t<=r.top+r.height?{x:e,y:t}:null}var i=this.state,o=i.angleAxisMap,a=i.radiusAxisMap;if(o&&a){var s=vm(o);return Pw({x:e,y:t},s)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=Am(e,rC)&&"axis"===i?{onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd}:{};return hO({},Lm(this.props,this.handleOuterEvent),{},t)}},{key:"updateStateOfAxisMapsOffsetAndStackGroups",value:function(e){var r=this,i=e.props,a=e.dataStartIndex,l=e.dataEndIndex,c=e.updateId;if(!Dm({props:i}))return null;var u=i.children,h=i.layout,d=i.stackOffset,p=i.data,f=i.reverseStackOrder,m=this.constructor.getAxisNameByLayout(h),g=m.numericAxisName,v=m.cateAxisName,y=Om(u,n),_=function(e,t,n,r,i,o){if(!e)return null;var a=(o?t.reverse():t).reduce((function(e,t){var i=t.props,o=i.stackId;if(i.hide)return e;var a=t.props[n],s=e[a]||{hasStack:!1,stackGroups:{}};if(pm(o)){var l=s.stackGroups[o]||{numericAxisId:n,cateAxisId:r,items:[]};l.items.push(t),s.hasStack=!0,s.stackGroups[o]=l}else s.stackGroups[mm("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return QS({},e,ew({},a,s))}),{});return Object.keys(a).reduce((function(t,o){var s=a[o];return s.hasStack&&(s.stackGroups=Object.keys(s.stackGroups).reduce((function(t,o){var a=s.stackGroups[o];return QS({},t,ew({},o,{numericAxisId:n,cateAxisId:r,items:a.items,stackedData:fw(e,a.items,i)}))}),{})),QS({},t,ew({},o,s))}),{})}(p,y,"".concat(g,"Id"),"".concat(v,"Id"),d,f),b=o.reduce((function(e,t){return hO({},e,dO({},"".concat(t.axisType,"Map"),r.getAxisMap(i,hO({},t,{graphicalItems:y,stackGroups:t.axisType===g&&_,dataStartIndex:a,dataEndIndex:l}))))}),{}),x=this.calculateOffset(hO({},b,{props:i,graphicalItems:y}));Object.keys(b).forEach((function(e){b[e]=s(i,b[e],x,e.replace("Map",""),t)}));var S=b["".concat(v,"Map")],w=this.tooltipTicksGenerator(S),E=this.getFormatItems(i,hO({},b,{dataStartIndex:a,dataEndIndex:l,updateId:c,graphicalItems:y,stackGroups:_,offset:x}));return hO({formatedGraphicalItems:E,graphicalItems:y,offset:x,stackGroups:_},w,{},b)}},{key:"addListener",value:function(){iO.on(oO,this.handleReceiveSyncEvent),iO.setMaxListeners&&iO._maxListeners&&iO.setMaxListeners(iO._maxListeners+1)}},{key:"removeListener",value:function(){iO.removeListener(oO,this.handleReceiveSyncEvent),iO.setMaxListeners&&iO._maxListeners&&iO.setMaxListeners(iO._maxListeners-1)}},{key:"calculateOffset",value:function(e){var t=e.props,n=e.graphicalItems,r=e.xAxisMap,i=void 0===r?{}:r,o=e.yAxisMap,a=void 0===o?{}:o,s=t.width,l=t.height,c=t.children,u=t.margin||{},h=Am(c,s$),d=Am(c,tv),p=Object.keys(a).reduce((function(e,t){var n=a[t],r=n.orientation;return n.mirror||n.hide?e:hO({},e,dO({},r,e[r]+n.width))}),{left:u.left||0,right:u.right||0}),f=Object.keys(i).reduce((function(e,t){var n=i[t],r=n.orientation;return n.mirror||n.hide?e:hO({},e,dO({},r,e[r]+n.height))}),{top:u.top||0,bottom:u.bottom||0}),m=hO({},f,{},p),g=m.bottom;return h&&(m.bottom+=h.props.height||s$.defaultProps.height),d&&this.legendInstance&&(m=function(e,t,n,r){var i=n.children,o=n.width,a=n.height,s=n.margin,l=o-(s.left||0)-(s.right||0),c=a-(s.top||0)-(s.bottom||0),u=iw({children:i,items:t,legendWidth:l,legendHeight:c}),h=e;if(u){var d=r||{},p=u.align,f=u.verticalAlign,m=u.layout;("vertical"===m||"horizontal"===m&&"center"===f)&&dm(e[p])&&(h=QS({},e,ew({},p,h[p]+(d.width||0)))),("horizontal"===m||"vertical"===m&&"center"===p)&&dm(e[f])&&(h=QS({},e,ew({},f,h[f]+(d.height||0))))}return h}(m,n,t,this.legendInstance.getBBox())),hO({brushBottom:g},m,{width:s-m.left-m.right,height:l-m.top-m.bottom})}},{key:"triggerSyncEvent",value:function(e){var t=this.props.syncId;Kf()(t)||iO.emit(oO,t,this.uniqueChartId,e)}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formatedGraphicalItems,i=0,o=r.length;i<o;i++){var a=r[i];if(a.item===e||a.props.key===e.key||t===$m(a.item.type)&&n===a.childIndex)return a}return null}},{key:"renderAxis",value:function(e,t,n,r){var i=this.props,o=i.width,a=i.height;return h.a.createElement(JC,lO({},e,{className:"recharts-".concat(e.axisType," ").concat(e.axisType),key:t.key||"".concat(n,"-").concat(r),viewBox:{x:0,y:0,width:o,height:a},ticksGenerator:this.axesTicksGenerator}))}},{key:"renderLegend",value:function(){var e=this,t=this.state.formatedGraphicalItems,n=this.props,r=n.children,i=n.width,o=n.height,s=this.props.margin||{},l=i-(s.left||0)-(s.right||0),c=o-(s.top||0)-(s.bottom||0),h=iw({children:r,formatedGraphicalItems:t,legendWidth:l,legendHeight:c,legendContent:a});if(!h)return null;var d=h.item,p=sO(h,["item"]);return Object(u.cloneElement)(d,hO({},p,{chartWidth:i,chartHeight:o,margin:s,ref:function(t){e.legendInstance=t},onBBoxUpdate:this.handleLegendBBoxUpdate}))}},{key:"renderTooltip",value:function(){var e=this.props.children,t=Am(e,rC);if(!t)return null;var n=this.state,r=n.isTooltipActive,i=n.activeCoordinate,o=n.activePayload,a=n.activeLabel,s=n.offset;return Object(u.cloneElement)(t,{viewBox:hO({},s,{x:s.left,y:s.top}),active:r,label:a,payload:r?o:[],coordinate:i})}},{key:"renderActivePoints",value:function(e){var t=e.item,n=e.activePoint,r=e.basePoint,i=e.childIndex,o=e.isRange,a=[],s=t.props.key,l=t.item.props,c=l.activeDot,u=hO({index:i,dataKey:l.dataKey,cx:n.x,cy:n.y,r:4,fill:rw(t.item),strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value,key:"".concat(s,"-activePoint-").concat(i)},Im(c),{},Lm(c));return a.push(this.constructor.renderActiveDot(c,u,i)),r?a.push(this.constructor.renderActiveDot(c,hO({},u,{cx:r.x,cy:r.y,key:"".concat(s,"-basePoint-").concat(i)}),i)):o&&a.push(null),a}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,n=t.left,r=t.top,i=t.height,o=t.width;return h.a.createElement("defs",null,h.a.createElement("clipPath",{id:e},h.a.createElement("rect",{x:n,y:r,height:i,width:o})))}},{key:"render",value:function(){var e=this;if(!Dm(this))return null;var t=this.props,n=t.children,r=t.className,i=t.width,o=t.height,a=t.style,s=t.compact,l=sO(t,["children","className","width","height","style","compact"]),c=Im(l),u={CartesianGrid:{handler:this.renderGrid,once:!0},ReferenceArea:{handler:this.renderReferenceElement},ReferenceLine:{handler:this.renderReferenceElement},ReferenceDot:{handler:this.renderReferenceElement},XAxis:{handler:this.renderXAxis},YAxis:{handler:this.renderYAxis},Brush:{handler:this.renderBrush,once:!0},Bar:{handler:this.renderGraphicChild},Line:{handler:this.renderGraphicChild},Area:{handler:this.renderGraphicChild},Radar:{handler:this.renderGraphicChild},RadialBar:{handler:this.renderGraphicChild},Scatter:{handler:this.renderGraphicChild},Pie:{handler:this.renderGraphicChild},Funnel:{handler:this.renderGraphicChild},Tooltip:{handler:this.renderCursor,once:!0},PolarGrid:{handler:this.renderPolarGrid,once:!0},PolarAngleAxis:{handler:this.renderPolarAxis},PolarRadiusAxis:{handler:this.renderPolarAxis},Customized:{handler:this.renderCustomized}};if(s)return h.a.createElement(Wm,lO({},c,{width:i,height:o}),this.renderClipPath(),Bm(n,u));var d=this.parseEventsOfWrapper();return h.a.createElement("div",lO({className:Zp()("recharts-wrapper",r),style:hO({position:"relative",cursor:"default",width:i,height:o},a)},d,{ref:function(t){e.container=t}}),h.a.createElement(Wm,lO({},c,{width:i,height:o}),this.renderClipPath(),Bm(n,u)),this.renderLegend(),this.renderTooltip())}}])&&pO(l.prototype,c),d&&pO(l,d),r}(u.Component);return d.displayName=t,d.propTypes=hO({syncId:p.a.oneOfType([p.a.string,p.a.number]),compact:p.a.bool,width:p.a.number,height:p.a.number,data:p.a.arrayOf(p.a.object),layout:p.a.oneOf(["horizontal","vertical"]),stackOffset:p.a.oneOf(["sign","expand","none","wiggle","silhouette"]),throttleDelay:p.a.number,margin:p.a.shape({top:p.a.number,right:p.a.number,bottom:p.a.number,left:p.a.number}),barCategoryGap:p.a.oneOfType([p.a.number,p.a.string]),barGap:p.a.oneOfType([p.a.number,p.a.string]),barSize:p.a.oneOfType([p.a.number,p.a.string]),maxBarSize:p.a.number,style:p.a.object,className:p.a.string,children:p.a.oneOfType([p.a.arrayOf(p.a.node),p.a.node]),defaultShowTooltip:p.a.bool,onClick:p.a.func,onMouseLeave:p.a.func,onMouseEnter:p.a.func,onMouseMove:p.a.func,onMouseDown:p.a.func,onMouseUp:p.a.func,reverseStackOrder:p.a.bool,id:p.a.string},c),d.defaultProps=hO({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1},l),d.createDefaultState=function(e){var t=e.children,n=e.defaultShowTooltip,r=Am(t,s$);return{chartX:0,chartY:0,dataStartIndex:r&&r.props&&r.props.startIndex||0,dataEndIndex:r&&r.props&&r.props.endIndex||e.data&&e.data.length-1||0,activeTooltipIndex:-1,isTooltipActive:!Kf()(n)&&n}},d.hasBar=function(e){return!(!e||!e.length)&&e.some((function(e){var t=$m(e&&e.type);return t&&t.indexOf("Bar")>=0}))},d.getDisplayedData=function(e,t,n){var r=t.graphicalItems,i=t.dataStartIndex,o=t.dataEndIndex,a=(r||[]).reduce((function(e,t){var n=t.props.data;return n&&n.length?[].concat(cO(e),cO(n)):e}),[]);if(a&&a.length>0)return a;if(n&&n.props&&n.props.data&&n.props.data.length>0)return n.props.data;var s=e.data;return s&&s.length&&dm(i)&&dm(o)?s.slice(i,o+1):[]},d};function bO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SO(e){return(SO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wO(){return(wO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function EO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MO(e,t){return!t||"object"!==SO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function CO(e){return(CO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $O(e,t){return($O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var OO=function(e){return e.reduce((function(e,t){return t.x===+t.x&&t.y===+t.y&&e.push([t.x,t.y]),e}),[]).join(" ")},AO=function(e){function t(){return EO(this,t),MO(this,CO(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$O(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.points,n=e.className;if(!t||!t.length)return null;var r=Zp()("recharts-polygon",n);return h.a.createElement("polygon",wO({},Im(this.props),Lm(this.props),{className:r,points:OO(t)}))}}])&&TO(n.prototype,r),i&&TO(n,i),t}(u.PureComponent);AO.displayName="Polygon",AO.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bO(n,!0).forEach((function(t){xO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bO(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},wm,{className:p.a.string,points:p.a.arrayOf(p.a.shape({x:p.a.number,y:p.a.number}))});var IO=AO;function PO(e){return(PO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LO(){return(LO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function kO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kO(n,!0).forEach((function(t){DO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kO(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function DO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FO(e,t){return!t||"object"!==PO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function UO(e){return(UO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BO(e,t){return(BO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zO=Math.PI/180,VO=function(e){function t(){return jO(this,t),FO(this,UO(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BO(e,t)}(t,e),n=t,i=[{key:"renderTickItem",value:function(e,t,n){return h.a.isValidElement(e)?h.a.cloneElement(e,t):qf()(e)?e(t):h.a.createElement($v,LO({},t,{className:"recharts-polar-angle-axis-tick-value"}),n)}}],(r=[{key:"getTickLineCoord",value:function(e){var t=this.props,n=t.cx,r=t.cy,i=t.radius,o=t.orientation,a=t.tickLine,s=a&&a.size||8,l=$w(n,r,i,e.coordinate),c=$w(n,r,i+("inner"===o?-1:1)*s,e.coordinate);return{x1:l.x,y1:l.y,x2:c.x,y2:c.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,n=Math.cos(-e.coordinate*zO);return n>1e-5?"outer"===t?"start":"end":n<-1e-5?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.radius,i=e.axisLine,o=e.axisLineType,a=RO({},Im(this.props),{fill:"none"},Im(i));if("circle"===o)return h.a.createElement(wC,LO({className:"recharts-polar-angle-axis-line"},a,{cx:t,cy:n,r:r}));var s=this.props.ticks.map((function(e){return $w(t,n,r,e.coordinate)}));return h.a.createElement(IO,LO({className:"recharts-polar-angle-axis-line"},a,{points:s}))}},{key:"renderTicks",value:function(){var e=this,t=this.props,n=t.ticks,r=t.tick,i=t.tickLine,o=t.tickFormatter,a=t.stroke,s=Im(this.props),l=Im(r),c=RO({},s,{fill:"none"},Im(i)),u=n.map((function(t,n){var u=e.getTickLineCoord(t),d=RO({textAnchor:e.getTickTextAnchor(t)},s,{stroke:"none",fill:a},l,{index:n,payload:t,x:u.x2,y:u.y2});return h.a.createElement(FS,LO({className:"recharts-polar-angle-axis-tick",key:"tick-".concat(n)},Rm(e.props,t,n)),i&&h.a.createElement("line",LO({className:"recharts-polar-angle-axis-tick-line"},c,u)),r&&e.constructor.renderTickItem(r,d,o?o(t.value):t.value))}));return h.a.createElement(FS,{className:"recharts-polar-angle-axis-ticks"},u)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.radius,r=e.axisLine;return n<=0||!t||!t.length?null:h.a.createElement(FS,{className:"recharts-polar-angle-axis"},r&&this.renderAxisLine(),this.renderTicks())}}])&&NO(n.prototype,r),i&&NO(n,i),t}(u.PureComponent);VO.displayName="PolarAngleAxis",VO.axisType="angleAxis",VO.propTypes=RO({},wm,{},Em,{type:p.a.oneOf(["number","category"]),angleAxisId:p.a.oneOfType([p.a.string,p.a.number]),dataKey:p.a.oneOfType([p.a.number,p.a.string,p.a.func]),cx:p.a.number,cy:p.a.number,radius:p.a.oneOfType([p.a.number,p.a.string]),hide:p.a.bool,scale:p.a.oneOfType([p.a.oneOf(["auto","linear","pow","sqrt","log","identity","time","band","point","ordinal","quantile","quantize","utc","sequential","threshold"]),p.a.func]),axisLine:p.a.oneOfType([p.a.bool,p.a.object]),axisLineType:p.a.oneOf(["polygon","circle"]),tickLine:p.a.oneOfType([p.a.bool,p.a.object]),tick:p.a.oneOfType([p.a.bool,p.a.func,p.a.object,p.a.element]),ticks:p.a.arrayOf(p.a.shape({value:p.a.any,coordinate:p.a.number})),stroke:p.a.string,orientation:p.a.oneOf(["inner","outer"]),tickFormatter:p.a.func,allowDuplicatedCategory:p.a.bool}),VO.defaultProps={type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,domain:[0,"auto"],orientation:"outer",axisLine:!0,tickLine:!0,tick:!0,hide:!1,allowDuplicatedCategory:!0};var GO=VO,HO=n(775),WO=n.n(HO),qO=n(776),JO=n.n(qO);function YO(e){return(YO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XO(){return(XO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function KO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KO(n,!0).forEach((function(t){QO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KO(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function QO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eA(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function tA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rA(e,t){return!t||"object"!==YO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iA(e){return(iA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oA(e,t){return(oA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var aA=function(e){function t(){return tA(this,t),rA(this,iA(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oA(e,t)}(t,e),n=t,i=[{key:"renderTickItem",value:function(e,t,n){return h.a.isValidElement(e)?h.a.cloneElement(e,t):qf()(e)?e(t):h.a.createElement($v,XO({},t,{className:"recharts-polar-radius-axis-tick-value"}),n)}}],(r=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,n=this.props,r=n.angle,i=n.cx,o=n.cy;return $w(i,o,t,r)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.angle,i=e.ticks,o=JO()(i,(function(e){return e.coordinate||0}));return{cx:t,cy:n,startAngle:r,endAngle:r,innerRadius:WO()(i,(function(e){return e.coordinate||0})).coordinate||0,outerRadius:o.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.angle,i=e.ticks,o=e.axisLine,a=eA(e,["cx","cy","angle","ticks","axisLine"]),s=i.reduce((function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]}),[1/0,-1/0]),l=$w(t,n,s[0],r),c=$w(t,n,s[1],r),u=ZO({},Im(a),{fill:"none"},Im(o),{x1:l.x,y1:l.y,x2:c.x,y2:c.y});return h.a.createElement("line",XO({className:"recharts-polar-radius-axis-line"},u))}},{key:"renderTicks",value:function(){var e=this,t=this.props,n=t.ticks,r=t.tick,i=t.angle,o=t.tickFormatter,a=t.stroke,s=eA(t,["ticks","tick","angle","tickFormatter","stroke"]),l=this.getTickTextAnchor(),c=Im(s),u=Im(r),d=n.map((function(t,n){var s=e.getTickValueCoord(t),d=ZO({textAnchor:l,transform:"rotate(".concat(90-i,", ").concat(s.x,", ").concat(s.y,")")},c,{stroke:"none",fill:a},u,{index:n},s,{payload:t});return h.a.createElement(FS,XO({className:"recharts-polar-radius-axis-tick",key:"tick-".concat(n)},Rm(e.props,t,n)),e.constructor.renderTickItem(r,d,o?o(t.value):t.value))}));return h.a.createElement(FS,{className:"recharts-polar-radius-axis-ticks"},d)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.axisLine,r=e.tick;return t&&t.length?h.a.createElement(FS,{className:"recharts-polar-radius-axis"},n&&this.renderAxisLine(),r&&this.renderTicks(),Gw.renderCallByParent(this.props,this.getViewBox())):null}}])&&nA(n.prototype,r),i&&nA(n,i),t}(u.PureComponent);aA.displayName="PolarRadiusAxis",aA.axisType="radiusAxis",aA.propTypes=ZO({},wm,{},Em,{type:p.a.oneOf(["number","category"]),cx:p.a.number,cy:p.a.number,hide:p.a.bool,radiusAxisId:p.a.oneOfType([p.a.string,p.a.number]),angle:p.a.number,tickCount:p.a.number,ticks:p.a.arrayOf(p.a.shape({value:p.a.any,coordinate:p.a.number})),orientation:p.a.oneOf(["left","right","middle"]),axisLine:p.a.oneOfType([p.a.bool,p.a.object]),tick:p.a.oneOfType([p.a.bool,p.a.object,p.a.element,p.a.func]),stroke:p.a.string,tickFormatter:p.a.func,domain:p.a.arrayOf(p.a.oneOfType([p.a.number,p.a.oneOf(["auto","dataMin","dataMax"])])),scale:p.a.oneOfType([p.a.oneOf(["auto","linear","pow","sqrt","log","identity","time","band","point","ordinal","quantile","quantize","utc","sequential","threshold"]),p.a.func]),allowDataOverflow:p.a.bool,allowDuplicatedCategory:p.a.bool}),aA.defaultProps={type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,domain:[0,"auto"],allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0};var sA=_O({chartName:"PieChart",GraphicalChild:xM,eventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:GO},{axisType:"radiusAxis",AxisComp:aA}],formatAxisMap:function(e,t,n,r,i){var o=e.width,a=e.height,s=e.startAngle,l=e.endAngle,c=gm(e.cx,o,o/2),u=gm(e.cy,a,a/2),h=Ow(o,a,n),d=gm(e.innerRadius,h,0),p=gm(e.outerRadius,h,.8*h);return Object.keys(t).reduce((function(e,n){var o,a=t[n],h=a.domain,f=a.reversed;if(Kf()(a.range))"angleAxis"===r?o=[s,l]:"radiusAxis"===r&&(o=[d,p]),f&&(o=[o[1],o[0]]);else{var m=Tw(o=a.range,2);s=m[0],l=m[1]}var g=hw(a,i),v=g.realScaleType,y=g.scale;y.domain(h).range(o),dw(y);var _=mw(y,ww({},a,{realScaleType:v})),b=ww({},a,{},_,{range:o,radius:p,realScaleType:v,scale:y,cx:c,cy:u,innerRadius:d,outerRadius:p,startAngle:s,endAngle:l});return ww({},e,Ew({},n,b))}),{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},propTypes:{layout:p.a.oneOf(["centric"]),startAngle:p.a.number,endAngle:p.a.number,cx:p.a.oneOfType([p.a.number,p.a.string]),cy:p.a.oneOfType([p.a.number,p.a.string]),innerRadius:p.a.oneOfType([p.a.number,p.a.string]),outerRadius:p.a.oneOfType([p.a.number,p.a.string])}}),lA=n(777);const cA=_.e.div.withConfig({displayName:"Collapsible__CollapsibleContainer",componentId:"m3bk7k-0"})(["display:flex;flex-direction:column;padding:4px 8px;"]),uA=_.e.div.withConfig({displayName:"Collapsible__CollapsibleLabel",componentId:"m3bk7k-1"})(["color:",";cursor:pointer;display:inline-block;:hover{color:",";}"],e=>e.theme.text2,e=>e.theme.text),hA=_.e.div.withConfig({displayName:"Collapsible__CollapsibleContent",componentId:"m3bk7k-2"})(["display:flex;flex-direction:column;padding:4px 8px;"]),dA=_.e.div.withConfig({displayName:"Collapsible__CollapseIcon",componentId:"m3bk7k-3"})([""]);function pA({label:e,open:t,children:n}){const[r,i]=Object(u.useState)(!t),o=Object(u.useCallback)(()=>{i(e=>!e)},[i]);return h.a.createElement(cA,null,h.a.createElement(uA,{onClick:o},h.a.createElement(dA,{as:r?rc:ic,size:14,collapsed:r}),e),!r&&h.a.createElement(hA,null,n))}pA.defaultProps={open:!1},pA.propTypes={open:p.a.bool,label:p.a.string.isRequired,children:p.a.node};const fA=_.e.div.withConfig({displayName:"GLTFInfo__ChartContainer",componentId:"r4cl4f-0"})(["margin:4px 0;padding:4px;background-color:",";border-radius:4px;"],e=>e.theme.panel2);function mA({node:e}){const t=e.stats;let n=t.jsonSize;const r=[{name:"JSON",type:"application/json",size:t.jsonSize}];for(const e in t.bufferInfo){if(!Object.prototype.hasOwnProperty.call(t.bufferInfo,e))continue;const i=t.bufferInfo[e];n+=i.size||0,r.push(i)}for(const e in t.textureInfo){if(!Object.prototype.hasOwnProperty.call(t.textureInfo,e))continue;const i=t.textureInfo[e];n+=i.size||0,r.push(i)}const i=Object(u.useCallback)((e,t,r)=>{const i=t.payload.name,o=i.length>15?t.payload.name.substring(0,12)+"...":i;return h.a.createElement("span",{title:i},`${o}: ${Object(ar.a)(t.payload.value)} (${Math.round(t.payload.value/n*100)}%)`)},[n]);let o=240;r.length>15&&(o+=16*(r.length-15));const a=Object(u.useContext)(_.a),s=r.length,l=Object(u.useCallback)(e=>{const t=a.chartColors;return t[Math.round(e/s*t.length)]},[a,s]);return h.a.createElement(fA,null,h.a.createElement(sA,{width:400,height:o},h.a.createElement(xM,{isAnimationActive:!1,data:r,dataKey:"size",cx:"50%",cy:"50%",innerRadius:60,outerRadius:80},r.map((e,t)=>h.a.createElement(ov,{key:t,fill:l(t),stroke:a.panel2})),h.a.createElement(Gw,{fill:a.text,value:"Total: "+Object(ar.a)(n),offset:0,position:"center"})),h.a.createElement(tv,{layout:"vertical",align:"right",verticalAlign:"middle",iconType:"rect",formatter:i})))}mA.propTypes={node:p.a.object};const gA=_.e.img.withConfig({displayName:"GLTFInfo__Thumbnail",componentId:"r4cl4f-1"})(["width:64px;height:64px;border:1px solid rgba(0,0,0,0.5);border-radius:4px;"]),vA=_.e.li.withConfig({displayName:"GLTFInfo__ImageItemContainer",componentId:"r4cl4f-2"})(["display:flex;margin:4px 0;padding:4px;background-color:",";border-radius:4px;& >:first-child{margin-right:8px;}h3{font-size:14px;}"],e=>e.theme.panel2);function yA({item:e}){return h.a.createElement(vA,null,h.a.createElement(gA,{src:e.url,alt:e.name}),h.a.createElement("div",null,h.a.createElement("h3",null,e.name),h.a.createElement("ul",null,h.a.createElement("li",null,h.a.createElement("b",null,"Type:")," ",e.type),h.a.createElement("li",null,h.a.createElement("b",null,"Size:")," ",Object(ar.a)(e.size)),h.a.createElement("li",null,h.a.createElement("b",null,"Dimensions:")," ",`${e.width}px x ${e.height}px`))))}function _A({node:e}){const t=Object.values(e.stats.textureInfo);return h.a.createElement("ul",null,t.map((e,t)=>h.a.createElement(yA,{key:t,item:e})))}yA.propTypes={item:p.a.object},_A.propTypes={node:p.a.object};const bA=_.e.li.withConfig({displayName:"GLTFInfo__MeshItemContainer",componentId:"r4cl4f-3"})(["display:flex;flex-direction:column;margin:4px 0;padding:8px;background-color:",";border-radius:4px;h3{font-size:14px;margin-bottom:4px;}"],e=>e.theme.panel2);function xA({item:e}){return h.a.createElement(bA,null,h.a.createElement("h3",null,e.name),h.a.createElement("ul",null,h.a.createElement("li",null,h.a.createElement("b",null,"Triangles:")," ",e.triangles),h.a.createElement("li",null,h.a.createElement("b",null,"Vertices:")," ",e.vertices)))}function SA({node:e}){const t=Object.values(e.stats.meshInfo);return h.a.createElement("ul",null,t.map((e,t)=>h.a.createElement(xA,{key:t,item:e})))}xA.propTypes={item:p.a.object},SA.propTypes={node:p.a.object};const wA=_.e.ul.withConfig({displayName:"GLTFInfo__StatsContainer",componentId:"r4cl4f-4"})(["margin:4px 0;padding:8px;background-color:",";border-radius:4px;"],e=>e.theme.panel2);function EA({node:e}){const t=e.stats;return h.a.createElement(wA,null,h.a.createElement("li",null,h.a.createElement("b",null,"Nodes:")," ",t.nodes),h.a.createElement("li",null,h.a.createElement("b",null,"Meshes:")," ",t.meshes),h.a.createElement("li",null,h.a.createElement("b",null,"Materials:")," ",t.materials),h.a.createElement("li",null,h.a.createElement("b",null,"Textures:")," ",t.textures),h.a.createElement("li",null,h.a.createElement("b",null,"Triangles:")," ",t.triangles),h.a.createElement("li",null,h.a.createElement("b",null,"Vertices:")," ",t.vertices))}EA.propTypes={node:p.a.object};const TA=_.e.div.withConfig({displayName:"GLTFInfo__ValidationInfoContainer",componentId:"r4cl4f-5"})(["margin:4px 0;padding:8px;background-color:",";border-radius:4px;h3{font-size:14px;}"],e=>e.theme.panel2),MA=_.e.li.withConfig({displayName:"GLTFInfo__IssueItemContainer",componentId:"r4cl4f-6"})(["margin:4px 0;padding:8px;background-color:",";border-radius:4px;h3{font-size:14px;}"],e=>e.theme.panel2);function CA({issue:e}){return h.a.createElement(MA,null,h.a.createElement("h3",null,e.code),h.a.createElement("p",null,e.message),h.a.createElement("p",null,"On: ",h.a.createElement("code",null,e.pointer)))}CA.propTypes={issue:p.a.object};const $A=_.e.div.withConfig({displayName:"GLTFInfo__NoIssues",componentId:"r4cl4f-7"})(["width:100%;text-align:center;color:",";font-size:14px;font-weight:bold;margin:8px 0;"],e=>e.theme.green);function OA({label:e,issues:t,severity:n}){const r=t.filter(e=>e.severity===n);return 0===r.length?null:h.a.createElement(pA,{label:`${e} (${r.length})`},h.a.createElement("ul",null,r.map((e,t)=>h.a.createElement(CA,{issue:e,key:t}))))}function AA({node:e}){const t=Object(u.useContext)(Zs),[n,r]=Object(u.useState)(!1),[i,o]=Object(u.useState)();Object(u.useEffect)(()=>{r(!1),o()},[e]);const a=Object(u.useCallback)(()=>{(async()=>{r(!0);try{const t=await(n=JSON.stringify(e.gltfJson),lA.validateString(n,i));o(t)}catch(e){console.log(e),t.emit("error",e)}finally{r(!1)}var n,i})()},[r,o,t,e]);return h.a.createElement(h.a.Fragment,null,i&&h.a.createElement(h.a.Fragment,null,h.a.createElement(TA,null,h.a.createElement("h3",null,"Info:"),h.a.createElement("ul",null,h.a.createElement("li",null,h.a.createElement("b",null,"Version:")," ",i.info.version),h.a.createElement("li",null,h.a.createElement("b",null,"Generator:")," ",i.info.generator),h.a.createElement("li",null,h.a.createElement("b",null,"Draw Call Count:")," ",i.info.drawCallCount),h.a.createElement("li",null,h.a.createElement("b",null,"Material Count:")," ",i.info.materialCount),h.a.createElement("li",null,h.a.createElement("b",null,"Total Triangle Count:")," ",i.info.totalTriangleCount),h.a.createElement("li",null,h.a.createElement("b",null,"Total Vertex Count:")," ",i.info.totalVertexCount),h.a.createElement("li",null,h.a.createElement("b",null,"Animation Count:")," ",i.info.animationCount),h.a.createElement("li",null,h.a.createElement("b",null,"Max Attributes:")," ",i.info.maxAttributes),h.a.createElement("li",null,h.a.createElement("b",null,"Max Influences:")," ",i.info.maxInfluences),h.a.createElement("li",null,h.a.createElement("b",null,"Max UVs:")," ",i.info.maxUVs),h.a.createElement("li",null,h.a.createElement("b",null,"Has Default Scene:")," ",i.info.hasDefaultScene.toString()),h.a.createElement("li",null,h.a.createElement("b",null,"Has Morph Targets:")," ",i.info.hasMorphTargets.toString()),h.a.createElement("li",null,h.a.createElement("b",null,"Has Skins:")," ",i.info.hasSkins.toString()),h.a.createElement("li",null,h.a.createElement("b",null,"Has Textures:")," ",i.info.hasTextures.toString())),0===i.issues.messages.length&&h.a.createElement($A,null,"No issues detected.")),h.a.createElement(OA,{label:"Errors",severity:0,issues:i.issues.messages}),h.a.createElement(OA,{label:"Warnings",severity:1,issues:i.issues.messages}),h.a.createElement(OA,{label:"Info",severity:2,issues:i.issues.messages}),h.a.createElement(OA,{label:"Hints",severity:3,issues:i.issues.messages})),!i&&h.a.createElement(Me.e,{disabled:n,onClick:a},"Validate glTF"))}function IA({node:e}){return h.a.createElement(pA,{label:"glTF Info"},h.a.createElement(pA,{open:!0,label:"Stats"},h.a.createElement(EA,{node:e})),h.a.createElement(pA,{open:!0,label:"Files"},h.a.createElement(mA,{node:e})),h.a.createElement(pA,{open:!0,label:"Textures"},h.a.createElement(_A,{node:e})),h.a.createElement(pA,{open:!0,label:"Meshes"},h.a.createElement(SA,{node:e})),h.a.createElement(pA,{open:!0,label:"Validation"},h.a.createElement(AA,{node:e})))}function PA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PA(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}OA.propTypes={label:p.a.string,severity:p.a.number,issues:p.a.array},AA.propTypes={node:p.a.object},IA.propTypes={node:p.a.object};class kA extends u.Component{constructor(...e){super(...e),c()(this,"onChangeSrc",(e,t)=>{this.props.editor.setPropertiesSelected(LA(LA({},t),{},{src:e}))}),c()(this,"onChangeAnimation",e=>{this.props.editor.setPropertySelected("activeClipIndex",e)}),c()(this,"onChangeCollidable",e=>{this.props.editor.setPropertySelected("collidable",e)}),c()(this,"onChangeWalkable",e=>{this.props.editor.setPropertySelected("walkable",e)}),c()(this,"onChangeCastShadow",e=>{this.props.editor.setPropertySelected("castShadow",e)}),c()(this,"onChangeReceiveShadow",e=>{this.props.editor.setPropertySelected("receiveShadow",e)})}isAnimationPropertyDisabled(){const{multiEdit:e,editor:t,node:n}=this.props;return!!e&&t.selected.some(e=>e.src!==n.src)}render(){const e=this.props.node;return h.a.createElement(vh,s()({description:kA.description},this.props),h.a.createElement(Sd,{name:"Model Url"},h.a.createElement(Vf,{value:e.src,onChange:this.onChangeSrc})),h.a.createElement(Sd,{name:"Loop Animation"},h.a.createElement(or,{disabled:this.isAnimationPropertyDisabled(),options:e.getClipOptions(),value:e.activeClipIndex,onChange:this.onChangeAnimation})),h.a.createElement(Sd,{name:"Collidable"},h.a.createElement(Wd.a,{value:e.collidable,onChange:this.onChangeCollidable})),h.a.createElement(Sd,{name:"Walkable"},h.a.createElement(Wd.a,{value:e.walkable,onChange:this.onChangeWalkable})),h.a.createElement(Sd,{name:"Cast Shadow"},h.a.createElement(Wd.a,{value:e.castShadow,onChange:this.onChangeCastShadow})),h.a.createElement(Sd,{name:"Receive Shadow"},h.a.createElement(Wd.a,{value:e.receiveShadow,onChange:this.onChangeReceiveShadow})),e.model&&h.a.createElement(IA,{node:e}))}}c()(kA,"propTypes",{editor:p.a.object,node:p.a.object,multiEdit:p.a.bool}),c()(kA,"iconComponent",Gf),c()(kA,"description","A 3D model in your scene, loaded from a GLTF URL or file.");var RA=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M512 512H0V0h512v512z",key:"k0"}))}));RA.displayName="SquareFull";class DA extends u.Component{constructor(...e){super(...e),c()(this,"onChangeColor",e=>{this.props.editor.setPropertySelected("color",e)}),c()(this,"onChangeReceiveShadow",e=>{this.props.editor.setPropertySelected("receiveShadow",e)}),c()(this,"onChangeWalkable",e=>{this.props.editor.setPropertySelected("walkable",e)})}render(){const e=this.props.node;return h.a.createElement(vh,s()({},this.props,{description:DA.description}),h.a.createElement(Sd,{name:"Color"},h.a.createElement(Df,{value:e.color,onChange:this.onChangeColor})),h.a.createElement(Sd,{name:"Receive Shadow"},h.a.createElement(Wd.a,{value:e.receiveShadow,onChange:this.onChangeReceiveShadow})),h.a.createElement(Sd,{name:"Walkable"},h.a.createElement(Wd.a,{value:this.props.node.walkable,onChange:this.onChangeWalkable})))}}c()(DA,"propTypes",{editor:p.a.object,node:p.a.object}),c()(DA,"iconComponent",RA),c()(DA,"description","A flat ground plane that extends into the distance.");var jA=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 448 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M408.781 128.007C386.356 127.578 368 146.36 368 168.79V256h-8V79.79c0-22.43-18.356-41.212-40.781-40.783C297.488 39.423 280 57.169 280 79v177h-8V40.79C272 18.36 253.644-.422 231.219.007 209.488.423 192 18.169 192 40v216h-8V80.79c0-22.43-18.356-41.212-40.781-40.783C121.488 40.423 104 58.169 104 80v235.992l-31.648-43.519c-12.993-17.866-38.009-21.817-55.877-8.823-17.865 12.994-21.815 38.01-8.822 55.877l125.601 172.705A48 48 0 00172.073 512h197.59c22.274 0 41.622-15.324 46.724-37.006l26.508-112.66a192.011 192.011 0 005.104-43.975V168c.001-21.831-17.487-39.577-39.218-39.993z",key:"k0"}))}));jA.displayName="HandPaper";class NA extends u.Component{constructor(...e){super(...e),c()(this,"onChangeWalkable",e=>{this.props.editor.setPropertySelected("walkable",e)})}render(){return h.a.createElement(vh,s()({},this.props,{description:NA.description}),h.a.createElement(Sd,{name:"Walkable"},h.a.createElement(Wd.a,{value:this.props.node.walkable,onChange:this.onChangeWalkable})))}}c()(NA,"propTypes",{editor:p.a.object,node:p.a.object}),c()(NA,"iconComponent",jA),c()(NA,"description","An invisible box that objects will bounce off of or rest on top of.\nWithout colliders, objects will fall through floors and go through walls.");class FA extends(zi(Mr.b)){static canAddNode(e){return null===e.scene.findNodeByType(FA)}static async deserialize(e,t){const n=await super.deserialize(e,t),{color:r,intensity:i}=t.components.find(e=>"ambient-light"===e.name).props;return n.color.set(r),n.intensity=i,n}serialize(){return super.serialize({"ambient-light":{color:this.color,intensity:this.intensity}})}prepareForExport(){super.prepareForExport(),this.addGLTFComponent("ambient-light",{color:this.color,intensity:this.intensity}),this.replaceObject()}}c()(FA,"legacyComponentName","ambient-light"),c()(FA,"nodeName","Ambient Light"),c()(FA,"disableTransform",!0);var UA=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z",key:"k0"}))}));UA.displayName="Sun";class BA extends u.Component{constructor(...e){super(...e),c()(this,"onChangeColor",e=>{this.props.editor.setPropertySelected("color",e)}),c()(this,"onChangeIntensity",e=>{this.props.editor.setPropertySelected("intensity",e)})}render(){const e=this.props.node;return h.a.createElement(vh,s()({},this.props,{description:BA.description}),h.a.createElement(Sd,{name:"Color"},h.a.createElement(Df,{value:e.color,onChange:this.onChangeColor})),h.a.createElement($p,{name:"Intensity",min:0,smallStep:.001,mediumStep:.01,largeStep:.1,value:e.intensity,onChange:this.onChangeIntensity,unit:"cd"}))}}function zA(e){return new Proxy(e.shadow.mapSize,{set:(t,n,r)=>(e.shadow.mapSize[n]=r,e.shadow.map&&(e.shadow.map.dispose(),e.shadow.map=null),!0)})}c()(BA,"propTypes",{editor:p.a.object,node:p.a.object}),c()(BA,"iconComponent",UA),c()(BA,"description","A light which illuminates all objects in your scene.");class VA extends Mr.v{constructor(){super(),this.position.set(0,0,0),this.target.position.set(0,0,1),this.add(this.target),this.castShadow=!0,this.shadowMapResolution=zA(this)}get shadowBias(){return this.shadow.bias}set shadowBias(e){this.shadow.bias=e}get shadowRadius(){return this.shadow.radius}set shadowRadius(e){this.shadow.radius=e}copy(e,t=!0){if(Mr.qb.prototype.copy.call(this,e,!1),this.color.copy(e.color),this.intensity=e.intensity,this.shadow.copy(e.shadow),t){this.remove(this.target);for(let t=0;t<e.children.length;t++){const n=e.children[t];n===e.target?(this.target=n.clone(),this.target.position.set(0,0,1),this.add(this.target)):this.add(n.clone())}}return this}}class GA extends Mr.qb{constructor(e,t,n){super(),this.name="SpokeDirectionalLightHelper",this.light=e,this.color=n,void 0===t&&(t=1);let r=new Mr.m;r.addAttribute("position",new Mr.z([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new Mr.Q({fog:!1});this.lightPlane=new Mr.P(r,i),this.lightPlane.layers.set(1),this.add(this.lightPlane),r=new Mr.m,r.addAttribute("position",new Mr.z([0,0,0,0,0,1],3)),this.targetLine=new Mr.P(r,i),this.targetLine.layers.set(1),this.add(this.targetLine),this.update(),Po(this)}update(){void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color))}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}}class HA extends(zi(VA)){static async deserialize(e,t){const n=await super.deserialize(e,t),{color:r,intensity:i,castShadow:o,shadowMapResolution:a,shadowBias:s,shadowRadius:l}=t.components.find(e=>"directional-light"===e.name).props;return n.color.set(r),n.intensity=i,n.castShadow=o,n.shadowBias=s||0,n.shadowRadius=void 0===l?1:l,a&&n.shadowMapResolution.fromArray(a),n}constructor(e){super(e),this.helper=new GA(this),this.helper.visible=!1,this.add(this.helper)}onAdd(){this.helper.update()}onChange(){this.helper.update()}onSelect(){this.helper.visible=!0}onDeselect(){this.helper.visible=!1}copy(e,t=!0){if(super.copy(e,!1),t){this.remove(this.helper),this.remove(this.target);for(let t=0;t<e.children.length;t++){const n=e.children[t];n===e.helper?(this.helper=new GA(this),this.add(this.helper)):n===e.target?(this.target=n.clone(),this.add(this.target)):this.add(n.clone())}}return this}serialize(){return super.serialize({"directional-light":{color:this.color,intensity:this.intensity,castShadow:this.castShadow,shadowMapResolution:this.shadowMapResolution.toArray(),shadowBias:this.shadowBias,shadowRadius:this.shadowRadius}})}prepareForExport(){super.prepareForExport(),this.remove(this.helper),this.addGLTFComponent("directional-light",{color:this.color,intensity:this.intensity,castShadow:this.castShadow,shadowMapResolution:this.shadowMapResolution.toArray(),shadowBias:this.shadowBias,shadowRadius:this.shadowRadius}),this.replaceObject()}}c()(HA,"legacyComponentName","directional-light"),c()(HA,"nodeName","Directional Light");const WA=[{label:"256px",value:new Mr.dc(256,256)},{label:"512px",value:new Mr.dc(512,512)},{label:"1024px",value:new Mr.dc(1024,1024)},{label:"2048px",value:new Mr.dc(2048,2048)},{label:"4096px (not recommended)",value:new Mr.dc(4096,4096)}];class qA extends u.Component{constructor(...e){super(...e),c()(this,"onChangeShadowMapResolution",e=>{this.props.editor.setPropertySelected("shadowMapResolution",e)}),c()(this,"onChangeCastShadow",e=>{this.props.editor.setPropertySelected("castShadow",e)}),c()(this,"onChangeShadowBias",e=>{this.props.editor.setPropertySelected("shadowBias",e)}),c()(this,"onChangeShadowRadius",e=>{this.props.editor.setPropertySelected("shadowRadius",e)})}render(){const e=this.props.node;return h.a.createElement(u.Fragment,null,h.a.createElement(Sd,{name:"Cast Shadow"},h.a.createElement(Wd.a,{value:e.castShadow,onChange:this.onChangeCastShadow})),h.a.createElement(Sd,{name:"Shadow Map Resolution"},h.a.createElement(or,{options:WA,value:e.shadowMapResolution,onChange:this.onChangeShadowMapResolution})),h.a.createElement($p,{name:"Shadow Bias",mediumStep:1e-5,smallStep:1e-4,largeStep:.001,displayPrecision:1e-6,value:e.shadowBias,onChange:this.onChangeShadowBias}),h.a.createElement($p,{name:"Shadow Radius",mediumStep:.01,smallStep:.1,largeStep:1,displayPrecision:1e-4,value:e.shadowRadius,onChange:this.onChangeShadowRadius}))}}c()(qA,"propTypes",{editor:p.a.object,node:p.a.object});var JA=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 320 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M296 160H180.6l42.6-129.8C227.2 15 215.7 0 200 0H56C44 0 33.8 8.9 32.2 20.8l-32 240C-1.7 275.2 9.5 288 24 288h118.7L96.6 482.5c-3.6 15.2 8 29.5 23.3 29.5 8.4 0 16.4-4.4 20.8-12l176-304c9.3-15.9-2.2-36-20.7-36z",key:"k0"}))}));JA.displayName="Bolt";class YA extends u.Component{constructor(...e){super(...e),c()(this,"onChangeColor",e=>{this.props.editor.setPropertySelected("color",e)}),c()(this,"onChangeIntensity",e=>{this.props.editor.setPropertySelected("intensity",e)})}render(){const{node:e,editor:t}=this.props;return h.a.createElement(vh,s()({},this.props,{description:YA.description}),h.a.createElement(Sd,{name:"Color"},h.a.createElement(Df,{value:e.color,onChange:this.onChangeColor})),h.a.createElement($p,{name:"Intensity",min:0,smallStep:.001,mediumStep:.01,largeStep:.1,value:e.intensity,onChange:this.onChangeIntensity,unit:"cd"}),h.a.createElement(qA,{node:e,editor:t}))}}c()(YA,"propTypes",{editor:p.a.object,node:p.a.object}),c()(YA,"iconComponent",JA),c()(YA,"description","A light which illuminates the entire scene, but emits along a single direction.");class XA extends Mr.Ub{constructor(){super(),this.position.set(0,0,0),this.decay=2,this.target.position.set(0,0,1),this.add(this.target),this.castShadow=!0,this.innerConeAngle=0,this.outerConeAngle=Math.PI/4,this.maxOuterConeAngle=Math.PI/2,this.shadowMapResolution=zA(this)}get range(){return this.distance}set range(e){this.distance=e}get innerConeAngle(){return(1-this.penumbra)*this.angle}set innerConeAngle(e){this.penumbra=1-Math.max(e,Number.EPSILON)/this.angle}get outerConeAngle(){return this.angle}set outerConeAngle(e){this.angle=e,this.penumbra=1-Math.max(this.innerConeAngle,Number.EPSILON)/e}get shadowBias(){return this.shadow.bias}set shadowBias(e){this.shadow.bias=e}get shadowRadius(){return this.shadow.radius}set shadowRadius(e){this.shadow.radius=e}copy(e,t=!0){if(Mr.qb.prototype.copy.call(this,e,!1),this.color.copy(e.color),this.intensity=e.intensity,this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.shadow.copy(e.shadow),t){this.remove(this.target);for(let t=0;t<e.children.length;t++){const n=e.children[t];n===e.target?(this.target=n.clone(),this.target.position.set(0,0,1),this.add(this.target)):this.add(n.clone())}}return this}}class KA extends Mr.qb{constructor(e,t){super(),c()(this,"update",()=>{this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle),n=(1-this.light.penumbra)*this.light.angle,r=e*Math.tan(n);this.outerCone.scale.set(t,t,e),this.innerCone.scale.set(r,r,e),void 0!==this.color?(this.outerCone.material.color.set(this.color),this.innerCone.material.color.set(this.color)):(this.outerCone.material.color.copy(this.light.color),this.innerCone.material.color.copy(this.light.color))}),this.name="SpokeSpotLightHelper",this.light=e,this.color=t;const n=new Mr.m,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const i=e/n*Math.PI*2,o=t/n*Math.PI*2;r.push(Math.cos(i),Math.sin(i),1,Math.cos(o),Math.sin(o),1)}n.addAttribute("position",new Mr.z(r,3));const i=new Mr.Q({fog:!1});this.outerCone=new Mr.S(n,i),this.outerCone.layers.set(1),this.add(this.outerCone),this.innerCone=new Mr.S(n,i),this.innerCone.layers.set(1),this.add(this.innerCone),this.update(),Po(this)}dispose(){this.outerCone.geometry.dispose(),this.outerCone.material.dispose()}}class ZA extends(zi(XA)){static async deserialize(e,t){const n=await super.deserialize(e,t),{color:r,intensity:i,range:o,innerConeAngle:a,outerConeAngle:s,castShadow:l,shadowMapResolution:c,shadowBias:u,shadowRadius:h}=t.components.find(e=>"spot-light"===e.name).props;return n.color.set(r),n.intensity=i,n.range=o,n.innerConeAngle=a,n.outerConeAngle=s,n.castShadow=l,n.shadowBias=u||0,n.shadowRadius=void 0===h?1:h,c&&n.shadowMapResolution.fromArray(c),n}constructor(e){super(e),this.helper=new KA(this),this.helper.visible=!1,this.add(this.helper)}onAdd(){this.helper.update()}onChange(){this.helper.update()}onSelect(){this.helper.visible=!0}onDeselect(){this.helper.visible=!1}copy(e,t=!0){if(super.copy(e,!1),t){this.remove(this.helper),this.remove(this.target);for(let t=0;t<e.children.length;t++){const n=e.children[t];n===e.helper?(this.helper=new KA(this),this.add(this.helper)):n===e.target?(this.target=n.clone(),this.add(this.target)):this.add(n.clone())}}return this}serialize(){return super.serialize({"spot-light":{color:this.color,intensity:this.intensity,range:this.range,innerConeAngle:this.innerConeAngle,outerConeAngle:this.outerConeAngle,castShadow:this.castShadow,shadowMapResolution:this.shadowMapResolution.toArray(),shadowBias:this.shadowBias,shadowRadius:this.shadowRadius}})}prepareForExport(){super.prepareForExport(),this.remove(this.helper),this.addGLTFComponent("spot-light",{color:this.color,intensity:this.intensity,range:this.range,innerConeAngle:this.innerConeAngle,outerConeAngle:this.outerConeAngle,castShadow:this.castShadow,shadowMapResolution:this.shadowMapResolution.toArray(),shadowBias:this.shadowBias,shadowRadius:this.shadowRadius}),this.replaceObject()}}c()(ZA,"legacyComponentName","spot-light"),c()(ZA,"nodeName","Spot Light"),c()(ZA,"ignoreRaycast",!0);const QA=Mr.bb.radToDeg,eI=Mr.bb.degToRad;function tI(e){let{convertTo:t,convertFrom:n}=e,r=K()(e,["convertTo","convertFrom"]);return h.a.createElement($p,s()({},r,{convertFrom:QA,convertTo:eI}))}tI.propTypes={value:p.a.number.isRequired,onChange:p.a.func.isRequired,min:p.a.number.isRequired,max:p.a.number.isRequired,unit:p.a.string.isRequired,smallStep:p.a.number.isRequired,mediumStep:p.a.number.isRequired,largeStep:p.a.number.isRequired,convertTo:p.a.func,convertFrom:p.a.func},tI.defaultProps={min:0,max:360,smallStep:1,mediumStep:5,largeStep:15,unit:"°"};const nI=Mr.bb.radToDeg;class rI extends u.Component{constructor(...e){super(...e),c()(this,"onChangeColor",e=>{this.props.editor.setPropertySelected("color",e)}),c()(this,"onChangeIntensity",e=>{this.props.editor.setPropertySelected("intensity",e)}),c()(this,"onChangeInnerConeAngle",e=>{this.props.editor.setPropertySelected("innerConeAngle",e)}),c()(this,"onChangeOuterConeAngle",e=>{this.props.editor.setPropertySelected("outerConeAngle",e)}),c()(this,"onChangeRange",e=>{this.props.editor.setPropertySelected("range",e)})}render(){const{node:e,editor:t}=this.props;return h.a.createElement(vh,s()({},this.props,{description:rI.description}),h.a.createElement(Sd,{name:"Color"},h.a.createElement(Df,{value:e.color,onChange:this.onChangeColor})),h.a.createElement($p,{name:"Intensity",min:0,smallStep:.001,mediumStep:.01,largeStep:.1,value:e.intensity,onChange:this.onChangeIntensity,unit:"°"}),h.a.createElement(tI,{name:"Inner Cone Angle",min:0,max:nI(e.outerConeAngle),smallStep:.1,mediumStep:1,largeStep:10,value:e.innerConeAngle,onChange:this.onChangeInnerConeAngle,unit:"°"}),h.a.createElement(tI,{name:"Outer Cone Angle",min:nI(e.innerConeAngle+1e-5),max:nI(e.maxOuterConeAngle),smallStep:.1,mediumStep:1,largeStep:10,value:e.outerConeAngle,onChange:this.onChangeOuterConeAngle,unit:"°"}),h.a.createElement($p,{name:"Range",min:0,smallStep:.1,mediumStep:1,largeStep:10,value:e.range,onChange:this.onChangeRange,unit:"m"}),h.a.createElement(qA,{node:e,editor:t}))}}c()(rI,"propTypes",{editor:p.a.object,node:p.a.object,multiEdit:p.a.bool}),c()(rI,"iconComponent",Fu),c()(rI,"description","A light which emits along a direction, illuminating objects within a cone.");class iI extends Mr.wb{constructor(){super(),this.decay=2,this.castShadow=!0,this.shadowMapResolution=zA(this)}get range(){return this.distance}set range(e){this.distance=e}get shadowBias(){return this.shadow.bias}set shadowBias(e){this.shadow.bias=e}get shadowRadius(){return this.shadow.radius}set shadowRadius(e){this.shadow.radius=e}copy(e,t=!0){if(Mr.qb.prototype.copy.call(this,e,!1),this.color.copy(e.color),this.intensity=e.intensity,this.distance=e.distance,this.decay=e.decay,this.shadow.copy(e.shadow),t){this.remove(this.target);for(let t=0;t<e.children.length;t++){const n=e.children[t];n===e.target?(this.target=n.clone(),this.add(this.target)):this.add(n.clone())}}return this}}class oI extends Mr.eb{constructor(e,t){super(new Mr.Sb(t,4,2),new Mr.fb({wireframe:!0,fog:!1})),this.name="SpokePointLightHelper",this.light=e;const n=new Mr.G(1,2),r=new Mr.fb({fog:!1,wireframe:!0,opacity:.1,transparent:!0});this.lightDistanceHelper=new Mr.eb(n,r),this.lightDistanceHelper.layers.set(1),this.add(this.lightDistanceHelper),this.layers.set(1),this.update(),Po(this)}dispose(){this.geometry.dispose(),this.material.dispose(),this.lightDistanceHelper.geometry.dispose(),this.lightDistanceHelper.material.dispose()}update(){this.material.color.copy(this.light.color);const e=this.light.distance;0===e?this.lightDistanceHelper.visible=!1:(this.lightDistanceHelper.visible=!0,this.lightDistanceHelper.scale.set(e,e,e))}}class aI extends(zi(iI)){static async deserialize(e,t){const n=await super.deserialize(e,t),{color:r,intensity:i,range:o,castShadow:a,shadowMapResolution:s,shadowBias:l,shadowRadius:c}=t.components.find(e=>"point-light"===e.name).props;return n.color.set(r),n.intensity=i,n.range=o,n.castShadow=a,n.shadowBias=l||0,n.shadowRadius=void 0===c?1:c,s&&n.shadowMapResolution.fromArray(s),n}constructor(e){super(e),this.helper=new oI(this),this.helper.visible=!1,this.add(this.helper)}onAdd(){this.helper.update()}onChange(){this.helper.update()}onSelect(){this.helper.visible=!0}onDeselect(){this.helper.visible=!1}copy(e,t=!0){if(super.copy(e,!1),t){this.remove(this.helper);for(let t=0;t<e.children.length;t++){const n=e.children[t];n===e.helper?(this.helper=new oI(this),this.add(this.helper)):this.add(n.clone())}}return this}serialize(){return super.serialize({"point-light":{color:this.color,intensity:this.intensity,range:this.range,castShadow:this.castShadow,shadowMapResolution:this.shadowMapResolution.toArray(),shadowBias:this.shadowBias,shadowRadius:this.shadowRadius}})}prepareForExport(){super.prepareForExport(),this.remove(this.helper),this.addGLTFComponent("point-light",{color:this.color,intensity:this.intensity,range:this.range,castShadow:this.castShadow,shadowMapResolution:this.shadowMapResolution.toArray(),shadowBias:this.shadowBias,shadowRadius:this.shadowRadius}),this.replaceObject()}}c()(aI,"legacyComponentName","point-light"),c()(aI,"nodeName","Point Light");var sI=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 352 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0026.64 14.28h61.71a31.99 31.99 0 0026.64-14.28l17.09-25.69a31.989 31.989 0 005.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z",key:"k0"}))}));sI.displayName="Lightbulb";class lI extends u.Component{constructor(...e){super(...e),c()(this,"onChangeColor",e=>{this.props.editor.setPropertySelected("color",e)}),c()(this,"onChangeIntensity",e=>{this.props.editor.setPropertySelected("intensity",e)}),c()(this,"onChangeRange",e=>{this.props.editor.setPropertySelected("range",e)})}render(){const{node:e,editor:t}=this.props;return h.a.createElement(vh,s()({},this.props,{description:lI.description}),h.a.createElement(Sd,{name:"Color"},h.a.createElement(Df,{value:e.color,onChange:this.onChangeColor})),h.a.createElement($p,{name:"Intensity",min:0,smallStep:.001,mediumStep:.01,largeStep:.1,value:e.intensity,onChange:this.onChangeIntensity,unit:"cd"}),h.a.createElement($p,{name:"Range",min:0,smallStep:.1,mediumStep:1,largeStep:10,value:e.range,onChange:this.onChangeRange,unit:"m"}),h.a.createElement(qA,{node:e,editor:t}))}}c()(lI,"propTypes",{editor:p.a.object,node:p.a.object}),c()(lI,"iconComponent",sI),c()(lI,"description","A light which emits in all directions from a single point.");class cI extends Mr.F{constructor(){super(),this.position.set(0,0,0)}get skyColor(){return this.color}copy(e,t=!0){return Mr.qb.prototype.copy.call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this.groundColor.copy(e.groundColor),this}}class uI extends(zi(cI)){static canAddNode(e){return null===e.scene.findNodeByType(uI)}static async deserialize(e,t){const n=await super.deserialize(e,t),{skyColor:r,groundColor:i,intensity:o}=t.components.find(e=>"hemisphere-light"===e.name).props;return n.skyColor.set(r),n.groundColor.set(i),n.intensity=o,n}serialize(){return super.serialize({"hemisphere-light":{skyColor:this.skyColor,groundColor:this.groundColor,intensity:this.intensity}})}prepareForExport(){super.prepareForExport(),this.addGLTFComponent("hemisphere-light",{skyColor:this.skyColor,groundColor:this.groundColor,intensity:this.intensity}),this.replaceObject()}}c()(uI,"legacyComponentName","hemisphere-light"),c()(uI,"disableTransform",!0),c()(uI,"nodeName","Hemisphere Light");var hI=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M458.622 255.92l45.985-45.005c13.708-12.977 7.316-36.039-10.664-40.339l-62.65-15.99 17.661-62.015c4.991-17.838-11.829-34.663-29.661-29.671l-61.994 17.667-15.984-62.671C337.085.197 313.765-6.276 300.99 7.228L256 53.57 211.011 7.229c-12.63-13.351-36.047-7.234-40.325 10.668l-15.984 62.671-61.995-17.667C74.87 57.907 58.056 74.738 63.046 92.572l17.661 62.015-62.65 15.99C.069 174.878-6.31 197.944 7.392 210.915l45.985 45.005-45.985 45.004c-13.708 12.977-7.316 36.039 10.664 40.339l62.65 15.99-17.661 62.015c-4.991 17.838 11.829 34.663 29.661 29.671l61.994-17.667 15.984 62.671c4.439 18.575 27.696 24.018 40.325 10.668L256 458.61l44.989 46.001c12.5 13.488 35.987 7.486 40.325-10.668l15.984-62.671 61.994 17.667c17.836 4.994 34.651-11.837 29.661-29.671l-17.661-62.015 62.65-15.99c17.987-4.302 24.366-27.367 10.664-40.339l-45.984-45.004z",key:"k0"}))}));hI.displayName="Certificate";class dI extends u.Component{constructor(...e){super(...e),c()(this,"onChangeSkyColor",e=>{this.props.editor.setPropertySelected("skyColor",e)}),c()(this,"onChangeGroundColor",e=>{this.props.editor.setPropertySelected("groundColor",e)}),c()(this,"onChangeIntensity",e=>{this.props.editor.setPropertySelected("intensity",e)})}render(){const e=this.props.node;return h.a.createElement(vh,s()({},this.props,{description:dI.description}),h.a.createElement(Sd,{name:"Sky Color"},h.a.createElement(Df,{value:e.skyColor,onChange:this.onChangeSkyColor})),h.a.createElement(Sd,{name:"Ground Color"},h.a.createElement(Df,{value:e.groundColor,onChange:this.onChangeGroundColor})),h.a.createElement($p,{name:"Intensity",min:0,smallStep:.001,mediumStep:.01,largeStep:.1,value:e.intensity,onChange:this.onChangeIntensity,unit:"cd"}))}}c()(dI,"propTypes",{editor:p.a.object,node:p.a.object}),c()(dI,"iconComponent",hI),c()(dI,"description","A light which illuminates the scene from directly overhead.");var pI=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M367.9 329.76c-4.62 5.3-9.78 10.1-15.9 13.65v22.94c66.52 9.34 112 28.05 112 49.65 0 30.93-93.12 56-208 56S48 446.93 48 416c0-21.6 45.48-40.3 112-49.65v-22.94c-6.12-3.55-11.28-8.35-15.9-13.65C58.87 345.34 0 378.05 0 416c0 53.02 114.62 96 256 96s256-42.98 256-96c0-37.95-58.87-70.66-144.1-86.24zM256 128c35.35 0 64-28.65 64-64S291.35 0 256 0s-64 28.65-64 64 28.65 64 64 64zm-64 192v96c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-96c17.67 0 32-14.33 32-32v-96c0-26.51-21.49-48-48-48h-11.8c-11.07 5.03-23.26 8-36.2 8s-25.13-2.97-36.2-8H208c-26.51 0-48 21.49-48 48v96c0 17.67 14.33 32 32 32z",key:"k0"}))}));pI.displayName="StreetView";class fI extends u.Component{render(){return h.a.createElement(vh,s()({description:fI.description},this.props))}}c()(fI,"propTypes",{editor:p.a.object,node:p.a.object}),c()(fI,"iconComponent",pI),c()(fI,"description","A point where people will appear when they enter your scene.\nThe icon in the Viewport represents the actual size of an avatar.");let mI=null;class gI extends(zi(Mr.qb)){static async load(){const{scene:e}=await new Or.b(xo.a).loadGLTF();e.traverse(e=>{e.isMesh&&e.layers.set(1)}),mI=e}constructor(e){super(e),this.canBeSpawnPoint=!1,this.canBeOccupied=!1,this.canBeClicked=!1,this.willDisableMotion=!1,this.willDisableTeleporting=!1,this.snapToNavMesh=!1,this.willMaintainInitialOrientation=!1,mI?(this.helper=mI.clone(),this.add(this.helper)):(console.warn("WayPointNode: helper model was not loaded before creating a new WayPointNode"),this.helper=null)}copy(e,t=!0){if(t&&this.remove(this.helper),this.canBeSpawnPoint=e.canBeSpawnPoint,this.canBeOccupied=e.canBeOccupied,this.canBeClicked=e.canBeClicked,this.willDisableMotion=e.willDisableMotion,this.willDisableTeleporting=e.willDisableTeleporting,this.snapToNavMesh=e.snapToNavMesh,this.willMaintainInitialOrientation=e.willMaintainInitialOrientation,super.copy(e,t),t){const t=e.children.findIndex(t=>t===e.helper);-1!==t&&(this.helper=this.children[t])}return this}serialize(){return super.serialize({waypoint:{canBeSpawnPoint:this.canBeSpawnPoint,canBeOccupied:this.canBeOccupied,canBeClicked:this.canBeClicked,willDisableMotion:this.willDisableMotion,willDisableTeleporting:this.willDisableTeleporting,snapToNavMesh:this.snapToNavMesh,willMaintainInitialOrientation:this.willMaintainInitialOrientation}})}static async deserialize(e,t){const n=await super.deserialize(e,t),r=t.components.find(e=>"waypoint"===e.name);return n.canBeSpawnPoint=r.props.canBeSpawnPoint,n.canBeOccupied=r.props.canBeOccupied,n.canBeClicked=r.props.canBeClicked,n.willDisableMotion=r.props.willDisableMotion,n.willDisableTeleporting=r.props.willDisableTeleporting,n.snapToNavMesh=r.props.snapToNavMesh,n.willMaintainInitialOrientation=r.props.willMaintainInitialOrientation,n}prepareForExport(){super.prepareForExport(),this.remove(this.helper),this.addGLTFComponent("waypoint",{canBeSpawnPoint:this.canBeSpawnPoint,canBeOccupied:this.canBeOccupied,canBeClicked:this.canBeClicked,willDisableMotion:this.willDisableMotion,willDisableTeleporting:this.willDisableTeleporting,snapToNavMesh:this.snapToNavMesh,willMaintainInitialOrientation:this.willMaintainInitialOrientation}),this.addGLTFComponent("networked",{id:this.uuid})}}c()(gI,"legacyComponentName","waypoint"),c()(gI,"nodeName","Way Point");class vI extends u.Component{constructor(e){super(e);const t=e=>t=>this.props.editor.setPropertySelected(e,t);this.onChangeCanBeSpawnPoint=t("canBeSpawnPoint"),this.onChangeCanBeOccupied=t("canBeOccupied"),this.onChangeCanBeClicked=t("canBeClicked"),this.onChangeWillDisableMotion=t("willDisableMotion"),this.onChangeWillDisableTeleporting=t("willDisableTeleporting"),this.onChangeSnapToNavMesh=t("snapToNavMesh"),this.onChangeWillMaintainInitialOrientation=t("willMaintainInitialOrientation")}render(){const{node:e}=this.props;return h.a.createElement(vh,s()({description:vI.description},this.props),h.a.createElement(Sd,{name:"Spawn Point"},h.a.createElement(Wd.a,{value:e.canBeSpawnPoint,onChange:this.onChangeCanBeSpawnPoint})),h.a.createElement(Sd,{name:"Occupiable"},h.a.createElement(Wd.a,{value:e.canBeOccupied,onChange:this.onChangeCanBeOccupied})),h.a.createElement(Sd,{name:"Clickable"},h.a.createElement(Wd.a,{value:e.canBeClicked,onChange:this.onChangeCanBeClicked})),h.a.createElement(Sd,{name:"Disable Motion"},h.a.createElement(Wd.a,{value:e.willDisableMotion,onChange:this.onChangeWillDisableMotion})),h.a.createElement(Sd,{name:"Disable Teleporting"},h.a.createElement(Wd.a,{value:e.willDisableTeleporting,onChange:this.onChangeWillDisableTeleporting})),h.a.createElement(Sd,{name:"Snap to floor plan"},h.a.createElement(Wd.a,{value:e.snapToNavMesh,onChange:this.onChangeSnapToNavMesh})),h.a.createElement(Sd,{name:"Maintain initial orientation"},h.a.createElement(Wd.a,{value:e.willMaintainInitialOrientation,onChange:this.onChangeWillMaintainInitialOrientation})))}}c()(vI,"propTypes",{editor:p.a.object,node:p.a.object}),c()(vI,"iconComponent",pI),c()(vI,"description","A point people can teleport to.\n");var yI=function(){var e,t=((e=new Mr.Ob({defines:{SAMPLES_PER_LEVEL:20},uniforms:{faceIndex:{value:0},roughness:{value:.5},mapSize:{value:.5},envMap:{value:null},tFlip:{value:-1}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform int faceIndex;\n\t\t\t\tuniform float roughness;\n\t\t\t\tuniform samplerCube envMap;\n\t\t\t\tuniform float mapSize;\n\t\t\t\tuniform float tFlip;\n\t\t\t\t\n\t\t\t\tfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\t\t\t\t\tfloat a = ggxRoughness + 0.0001;\n\t\t\t\t\ta *= a;\n\t\t\t\t\treturn ( 2.0 / a - 2.0 );\n\t\t\t\t}\n\t\t\t\tvec3 ImportanceSamplePhong(vec2 uv, mat3 vecSpace, float specPow) {\n\t\t\t\t\tfloat phi = uv.y * 2.0 * PI;\n\t\t\t\t\tfloat cosTheta = pow(1.0 - uv.x, 1.0 / (specPow + 1.0));\n\t\t\t\t\tfloat sinTheta = sqrt(1.0 - cosTheta * cosTheta);\n\t\t\t\t\tvec3 sampleDir = vec3(cos(phi) * sinTheta, sin(phi) * sinTheta, cosTheta);\n\t\t\t\t\treturn vecSpace * sampleDir;\n\t\t\t\t}\n\t\t\t\tvec3 ImportanceSampleGGX( vec2 uv, mat3 vecSpace, float Roughness )\n\t\t\t\t{\n\t\t\t\t\tfloat a = Roughness * Roughness;\n\t\t\t\t\tfloat Phi = 2.0 * PI * uv.x;\n\t\t\t\t\tfloat CosTheta = sqrt( (1.0 - uv.y) / ( 1.0 + (a*a - 1.0) * uv.y ) );\n\t\t\t\t\tfloat SinTheta = sqrt( 1.0 - CosTheta * CosTheta );\n\t\t\t\t\treturn vecSpace * vec3(SinTheta * cos( Phi ), SinTheta * sin( Phi ), CosTheta);\n\t\t\t\t}\n\t\t\t\tmat3 matrixFromVector(vec3 n) {\n\t\t\t\t\tfloat a = 1.0 / (1.0 + n.z);\n\t\t\t\t\tfloat b = -n.x * n.y * a;\n\t\t\t\t\tvec3 b1 = vec3(1.0 - n.x * n.x * a, b, -n.x);\n\t\t\t\t\tvec3 b2 = vec3(b, 1.0 - n.y * n.y * a, -n.y);\n\t\t\t\t\treturn mat3(b1, b2, n);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvec4 testColorMap(float Roughness) {\n\t\t\t\t\tvec4 color;\n\t\t\t\t\tif(faceIndex == 0)\n\t\t\t\t\t\tcolor = vec4(1.0,0.0,0.0,1.0);\n\t\t\t\t\telse if(faceIndex == 1)\n\t\t\t\t\t\tcolor = vec4(0.0,1.0,0.0,1.0);\n\t\t\t\t\telse if(faceIndex == 2)\n\t\t\t\t\t\tcolor = vec4(0.0,0.0,1.0,1.0);\n\t\t\t\t\telse if(faceIndex == 3)\n\t\t\t\t\t\tcolor = vec4(1.0,1.0,0.0,1.0);\n\t\t\t\t\telse if(faceIndex == 4)\n\t\t\t\t\t\tcolor = vec4(0.0,1.0,1.0,1.0);\n\t\t\t\t\telse\n\t\t\t\t\t\tcolor = vec4(1.0,0.0,1.0,1.0);\n\t\t\t\t\tcolor *= ( 1.0 - Roughness );\n\t\t\t\t\treturn color;\n\t\t\t\t}\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec3 sampleDirection;\n\t\t\t\t\tvec2 uv = vUv*2.0 - 1.0;\n\t\t\t\t\tfloat offset = -1.0/mapSize;\n\t\t\t\t\tconst float a = -1.0;\n\t\t\t\t\tconst float b = 1.0;\n\t\t\t\t\tfloat c = -1.0 + offset;\n\t\t\t\t\tfloat d = 1.0 - offset;\n\t\t\t\t\tfloat bminusa = b - a;\n\t\t\t\t\tuv.x = (uv.x - a)/bminusa * d - (uv.x - b)/bminusa * c;\n\t\t\t\t\tuv.y = (uv.y - a)/bminusa * d - (uv.y - b)/bminusa * c;\n\t\t\t\t\tif (faceIndex==0) {\n\t\t\t\t\t\tsampleDirection = vec3(1.0, -uv.y, -uv.x);\n\t\t\t\t\t} else if (faceIndex==1) {\n\t\t\t\t\t\tsampleDirection = vec3(-1.0, -uv.y, uv.x);\n\t\t\t\t\t} else if (faceIndex==2) {\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, 1.0, uv.y);\n\t\t\t\t\t} else if (faceIndex==3) {\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, -1.0, -uv.y);\n\t\t\t\t\t} else if (faceIndex==4) {\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, -uv.y, 1.0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsampleDirection = vec3(-uv.x, -uv.y, -1.0);\n\t\t\t\t\t}\n\t\t\t\t\tvec3 correctedDirection = vec3( tFlip * sampleDirection.x, sampleDirection.yz );\n\t\t\t\t\tmat3 vecSpace = matrixFromVector( normalize( correctedDirection ) );\n\t\t\t\t\tvec3 rgbColor = vec3(0.0);\n\t\t\t\t\tconst int NumSamples = SAMPLES_PER_LEVEL;\n\t\t\t\t\tvec3 vect;\n\t\t\t\t\tfloat weight = 0.0;\n\t\t\t\t\tfor( int i = 0; i < NumSamples; i ++ ) {\n\t\t\t\t\t\tfloat sini = sin(float(i));\n\t\t\t\t\t\tfloat cosi = cos(float(i));\n\t\t\t\t\t\tfloat r = rand(vec2(sini, cosi));\n\t\t\t\t\t\tvect = ImportanceSampleGGX(vec2(float(i) / float(NumSamples), r), vecSpace, roughness);\n\t\t\t\t\t\tfloat dotProd = dot(vect, normalize(sampleDirection));\n\t\t\t\t\t\tweight += dotProd;\n\t\t\t\t\t\tvec3 color = envMapTexelToLinear(textureCube(envMap, vect)).rgb;\n\t\t\t\t\t\trgbColor.rgb += color;\n\t\t\t\t\t}\n\t\t\t\t\trgbColor /= float(NumSamples);\n\t\t\t\t\t//rgbColor = testColorMap( roughness ).rgb;\n\t\t\t\t\tgl_FragColor = linearToOutputTexel( vec4( rgbColor, 1.0 ) );\n\t\t\t\t}",blending:Mr.ob})).type="PMREMGenerator",e),n=new Mr.rb(-1,1,1,-1,0,1e3),r=new Mr.Nb,i=new Mr.eb(new Mr.vb(2,2,0),t);i.material.side=Mr.w,r.add(i),r.add(n);var o=function(e,t,n){this.sourceTexture=e,this.resolution=void 0!==n?n:256,this.samplesPerLevel=void 0!==t?t:32;var r=this.sourceTexture.encoding===Mr.T||this.sourceTexture.encoding===Mr.D||this.sourceTexture.encoding===Mr.mc;this.sourceTexture.minFilter=r?Mr.U:Mr.lb,this.sourceTexture.magFilter=r?Mr.U:Mr.lb,this.sourceTexture.generateMipmaps=this.sourceTexture.generateMipmaps&&r,this.cubeLods=[];var i=this.resolution,o={format:this.sourceTexture.format,magFilter:this.sourceTexture.magFilter,minFilter:this.sourceTexture.minFilter,type:this.sourceTexture.type,generateMipmaps:this.sourceTexture.generateMipmaps,anisotropy:this.sourceTexture.anisotropy,encoding:this.sourceTexture.encoding};this.numLods=Math.log(i)/Math.log(2)-2;for(var a=0;a<this.numLods;a++){var s=new Mr.kc(i,i,o);s.texture.name="PMREMGenerator.cube"+a,this.cubeLods.push(s),i=Math.max(16,i/2)}};return o.prototype={constructor:o,update:function(e){var n=this.sourceTexture.isCubeTexture?-1:1;t.defines.SAMPLES_PER_LEVEL=this.samplesPerLevel,t.uniforms.faceIndex.value=0,t.uniforms.envMap.value=this.sourceTexture,t.envMap=this.sourceTexture,t.needsUpdate=!0;var r=e.gammaInput,i=e.gammaOutput,o=e.toneMapping,a=e.toneMappingExposure,s=e.getRenderTarget();e.toneMapping=Mr.X,e.toneMappingExposure=1,e.gammaInput=!1,e.gammaOutput=!1;for(var l=0;l<this.numLods;l++){var c=l/(this.numLods-1);t.uniforms.roughness.value=.9*c,t.uniforms.tFlip.value=0==l?n:1;var u=this.cubeLods[l].width;t.uniforms.mapSize.value=u,this.renderToCubeMapTarget(e,this.cubeLods[l]),l<5&&(t.uniforms.envMap.value=this.cubeLods[l].texture)}e.setRenderTarget(s),e.toneMapping=o,e.toneMappingExposure=a,e.gammaInput=r,e.gammaOutput=i},renderToCubeMapTarget:function(e,t){for(var n=0;n<6;n++)this.renderToCubeMapTargetFace(e,t,n)},renderToCubeMapTargetFace:function(e,i,o){t.uniforms.faceIndex.value=o,e.setRenderTarget(i,o),e.clear(),e.render(r,n)},dispose:function(){for(var e=0,n=this.cubeLods.length;e<n;e++)this.cubeLods[e].dispose();t.dispose()}},o}(),_I=function(){var e,t=new Mr.rb,n=new Mr.Nb,r=((e=new Mr.Ob({uniforms:{faceIndex:{value:0},mapSize:{value:0},envMap:{value:null},testColor:{value:new Mr.ec(1,1,1)}},vertexShader:"precision highp float;        varying vec2 vUv;        void main() {          vUv = uv;          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );        }",fragmentShader:"precision highp float;        varying vec2 vUv;        uniform samplerCube envMap;        uniform float mapSize;        uniform vec3 testColor;        uniform int faceIndex;                void main() {          vec3 sampleDirection;          vec2 uv = vUv;          uv = uv * 2.0 - 1.0;          uv.y *= -1.0;          if(faceIndex == 0) {            sampleDirection = normalize(vec3(1.0, uv.y, -uv.x));          } else if(faceIndex == 1) {            sampleDirection = normalize(vec3(uv.x, 1.0, uv.y));          } else if(faceIndex == 2) {            sampleDirection = normalize(vec3(uv.x, uv.y, 1.0));          } else if(faceIndex == 3) {            sampleDirection = normalize(vec3(-1.0, uv.y, uv.x));          } else if(faceIndex == 4) {            sampleDirection = normalize(vec3(uv.x, -1.0, -uv.y));          } else {            sampleDirection = normalize(vec3(-uv.x, uv.y, -1.0));          }          vec4 color = envMapTexelToLinear( textureCube( envMap, sampleDirection ) );          gl_FragColor = linearToOutputTexel( color );        }",blending:Mr.ob})).type="PMREMCubeUVPacker",e),i=function(e){this.cubeLods=e;var t=4*e[0].width,n=e[0].texture,i={format:n.format,magFilter:n.magFilter,minFilter:n.minFilter,type:n.type,generateMipmaps:n.generateMipmaps,anisotropy:n.anisotropy,encoding:n.encoding===Mr.Fb?Mr.Hb:n.encoding};i.encoding===Mr.Hb&&(i.magFilter=Mr.U,i.minFilter=Mr.U),this.CubeUVRenderTarget=new Mr.jc(t,t,i),this.CubeUVRenderTarget.texture.name="PMREMCubeUVPacker.cubeUv",this.CubeUVRenderTarget.texture.mapping=Mr.t,this.objects=[];var o=new Mr.vb(1,1),a=[];a.push(new Mr.dc(0,0)),a.push(new Mr.dc(1,0)),a.push(new Mr.dc(2,0)),a.push(new Mr.dc(0,1)),a.push(new Mr.dc(1,1)),a.push(new Mr.dc(2,1));var s=t;t=e[0].width;var l=0,c=4;this.numLods=Math.log(e[0].width)/Math.log(2)-2;for(var u=0;u<this.numLods;u++){var h=.5*(s-s/c);t>16&&(c*=2);for(var d=t>16?6:1,p=0,f=0,m=t,g=0;g<d;g++){for(var v=0;v<6;v++){var y=r.clone();y.uniforms.envMap.value=this.cubeLods[u].texture,y.envMap=this.cubeLods[u].texture,y.uniforms.faceIndex.value=v,y.uniforms.mapSize.value=m;var _=new Mr.eb(o,y);_.position.x=a[v].x*m-h+p,_.position.y=a[v].y*m-h+l+f,_.material.side=Mr.g,_.scale.setScalar(m),this.objects.push(_)}f+=1.75*m,p+=1.25*m,m/=2}l+=2*t,t>16&&(t/=2)}};return i.prototype={constructor:i,update:function(e){var r=4*this.cubeLods[0].width;t.left=.5*-r,t.right=.5*r,t.top=.5*-r,t.bottom=.5*r,t.near=0,t.far=1,t.updateProjectionMatrix();for(var i=0;i<this.objects.length;i++)n.add(this.objects[i]);var o=e.gammaInput,a=e.gammaOutput,s=e.toneMapping,l=e.toneMappingExposure,c=e.getRenderTarget();e.gammaInput=!1,e.gammaOutput=!1,e.toneMapping=Mr.X,e.toneMappingExposure=1,e.setRenderTarget(this.CubeUVRenderTarget),e.render(n,t),e.setRenderTarget(c),e.toneMapping=s,e.toneMappingExposure=l,e.gammaInput=o,e.gammaOutput=a;for(i=0;i<this.objects.length;i++)n.remove(this.objects[i])},dispose:function(){for(var e=0,t=this.objects.length;e<t;e++)this.objects[e].material.dispose();this.objects[0].geometry.dispose()}},i}();class bI extends Mr.qb{constructor(){super();const e=new Mr.Ob({fragmentShader:bI.shader.fragmentShader,vertexShader:bI.shader.vertexShader,uniforms:Mr.cc.clone(bI.shader.uniforms),side:Mr.g,fog:!0});this.skyScene=new Mr.Nb,this.cubeCamera=new Mr.r(1,1e5,512),this.skyScene.add(this.cubeCamera),this.sky=new Mr.eb(bI._geometry,e),this.sky.name="Sky",this.add(this.sky),this._inclination=0,this._azimuth=.15,this._distance=8e3,this.updateSunPosition()}get turbidity(){return this.sky.material.uniforms.turbidity.value}set turbidity(e){this.sky.material.uniforms.turbidity.value=e}get rayleigh(){return this.sky.material.uniforms.rayleigh.value}set rayleigh(e){this.sky.material.uniforms.rayleigh.value=e}get luminance(){return this.sky.material.uniforms.luminance.value}set luminance(e){this.sky.material.uniforms.luminance.value=e}get mieCoefficient(){return this.sky.material.uniforms.mieCoefficient.value}set mieCoefficient(e){this.sky.material.uniforms.mieCoefficient.value=e}get mieDirectionalG(){return this.sky.material.uniforms.mieDirectionalG.value}set mieDirectionalG(e){this.sky.material.uniforms.mieDirectionalG.value=e}get inclination(){return this._inclination}set inclination(e){this._inclination=e,this.updateSunPosition()}get azimuth(){return this._azimuth}set azimuth(e){this._azimuth=e,this.updateSunPosition()}get distance(){return this._distance}set distance(e){this._distance=e,this.updateSunPosition()}updateSunPosition(){const e=Math.PI*(this._inclination-.5),t=2*Math.PI*(this._azimuth-.5),n=this._distance,r=n*Math.cos(t),i=n*Math.sin(t)*Math.sin(e),o=n*Math.sin(t)*Math.cos(e);this.sky.material.uniforms.sunPosition.value.set(r,i,o).normalize(),this.sky.scale.set(n,n,n)}generateEnvironmentMap(e){this.skyScene.add(this.sky),this.cubeCamera.update(e,this.skyScene),this.add(this.sky);const t=e.vr.enabled;e.vr.enabled=!1;const n=new yI(this.cubeCamera.renderTarget.texture);n.update(e);const r=new _I(n.cubeLods);return r.update(e),e.vr.enabled=t,n.dispose(),r.dispose(),r.CubeUVRenderTarget.texture}copy(e,t=!0){if(t&&this.remove(this.sky),super.copy(e,t),t){const t=e.children.indexOf(e.sky);-1!==t&&(this.sky=this.children[t])}return this.turbidity=e.turbidity,this.rayleigh=e.rayleigh,this.luminance=e.luminance,this.mieCoefficient=e.mieCoefficient,this.mieDirectionalG=e.mieDirectionalG,this.inclination=e.inclination,this.azimuth=e.azimuth,this.distance=e.distance,this}}c()(bI,"shader",{uniforms:Mr.cc.merge([Mr.bc.fog,{luminance:{value:1},turbidity:{value:10},rayleigh:{value:2},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new Mr.ec}}]),vertexShader:"\n#include <common>\n#include <fog_pars_vertex>\n\nuniform vec3 sunPosition;\nuniform float rayleigh;\nuniform float turbidity;\nuniform float mieCoefficient;\n\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\n\nconst vec3 up = vec3( 0.0, 1.0, 0.0 );\n\n// constants for atmospheric scattering\nconst float e = 2.71828182845904523536028747135266249775724709369995957;\nconst float pi = 3.141592653589793238462643383279502884197169;\n\n// wavelength of used primaries, according to preetham\nconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\nconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n// mie stuff\n// K coefficient for the primaries\nconst float v = 4.0;\nconst vec3 K = vec3( 0.686, 0.678, 0.666 );\n// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\nconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n// earth shadow hack\n// cutoffAngle = pi / 1.95;\nconst float cutoffAngle = 1.6110731556870734;\nconst float steepness = 1.5;\nconst float EE = 1000.0;\n\nfloat sunIntensity( float zenithAngleCos ) {\n  zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n  return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n}\n\nvec3 totalMie( float T ) {\n  float c = ( 0.2 * T ) * 10E-18;\n  return 0.434 * c * MieConst;\n}\n\nvoid main() {\n  #include <begin_vertex>\n\n  vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n  vWorldPosition = worldPosition.xyz;\n\n  #include <project_vertex>\n\n  vSunDirection = normalize( sunPosition );\n\n  vSunE = sunIntensity( dot( vSunDirection, up ) );\n\n  vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n  float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n  // extinction (absorbtion + out scattering)\n  // rayleigh coefficients\n  vBetaR = totalRayleigh * rayleighCoefficient;\n\n  // mie coefficients\n  vBetaM = totalMie( turbidity ) * mieCoefficient;\n\n  #include <fog_vertex>\n}\n",fragmentShader:"\n#include <common>\n#include <fog_pars_fragment>\n\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\n\nuniform float luminance;\nuniform float mieDirectionalG;\n\nconst vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n// constants for atmospheric scattering\nconst float pi = 3.141592653589793238462643383279502884197169;\n\nconst float n = 1.0003; // refractive index of air\nconst float N = 2.545E25; // number of molecules per unit volume for air at\n// 288.15K and 1013mb (sea level -45 celsius)\n\n// optical length at zenith for molecules\nconst float rayleighZenithLength = 8.4E3;\nconst float mieZenithLength = 1.25E3;\nconst vec3 up = vec3( 0.0, 1.0, 0.0 );\n// 66 arc seconds -> degrees, and the cosine of that\nconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n// 3.0 / ( 16.0 * pi )\nconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n// 1.0 / ( 4.0 * pi )\nconst float ONE_OVER_FOURPI = 0.07957747154594767;\n\nfloat rayleighPhase( float cosTheta ) {\n  return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n}\n\nfloat hgPhase( float cosTheta, float g ) {\n  float g2 = pow( g, 2.0 );\n  float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n  return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n}\n\n// Filmic ToneMapping http://filmicgames.com/archives/75\nconst float A = 0.15;\nconst float B = 0.50;\nconst float C = 0.10;\nconst float D = 0.20;\nconst float E = 0.02;\nconst float F = 0.30;\n\nconst float whiteScale = 1.0748724675633854; // 1.0 / Uncharted2Tonemap(1000.0)\n\nvec3 Uncharted2Tonemap( vec3 x ) {\n  return ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;\n}\n\nvoid main() {\n  // optical length\n  // cutoff angle at 90 to avoid singularity in next formula.\n  float zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );\n  float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n  float sR = rayleighZenithLength * inverse;\n  float sM = mieZenithLength * inverse;\n\n  // combined extinction factor\n  vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n  // in scattering\n  float cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );\n\n  float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n  vec3 betaRTheta = vBetaR * rPhase;\n\n  float mPhase = hgPhase( cosTheta, mieDirectionalG );\n  vec3 betaMTheta = vBetaM * mPhase;\n\n  vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n  Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n  // nightsky\n  vec3 direction = normalize( vWorldPosition - cameraPos );\n  float theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]\n  float phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]\n  vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n  vec3 L0 = vec3( 0.1 ) * Fex;\n\n  // composition + solar disc\n  float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n  L0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n  vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n  vec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );\n  vec3 color = curr * whiteScale;\n\n  vec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n  gl_FragColor = vec4( retColor, 1.0 );\n\n  #include <fog_fragment>\n}\n"}),c()(bI,"_geometry",new Mr.j(1,1,1));class xI extends(zi(bI)){static canAddNode(e){return null===e.scene.findNodeByType(xI)}static async deserialize(e,t){const n=await super.deserialize(e,t),{turbidity:r,rayleigh:i,luminance:o,mieCoefficient:a,mieDirectionalG:s,inclination:l,azimuth:c,distance:u}=t.components.find(e=>"skybox"===e.name).props;return n.turbidity=r,n.rayleigh=i,n.luminance=o,n.mieCoefficient=a,n.mieDirectionalG=s,n.inclination=l,n.azimuth=c,n.distance=u,n}onRendererChanged(){this.updateEnvironmentMap()}onAdd(){this.updateEnvironmentMap()}onChange(){this.updateEnvironmentMap()}onRemove(){this.editor.scene.updateEnvironmentMap(null)}updateEnvironmentMap(){const e=this.editor.renderer.renderer,t=this.generateEnvironmentMap(e);this.editor.scene.updateEnvironmentMap(t)}serialize(){return super.serialize({skybox:{turbidity:this.turbidity,rayleigh:this.rayleigh,luminance:this.luminance,mieCoefficient:this.mieCoefficient,mieDirectionalG:this.mieDirectionalG,inclination:this.inclination,azimuth:this.azimuth,distance:this.distance}})}prepareForExport(){super.prepareForExport(),this.addGLTFComponent("skybox",{turbidity:this.turbidity,rayleigh:this.rayleigh,luminance:this.luminance,mieCoefficient:this.mieCoefficient,mieDirectionalG:this.mieDirectionalG,inclination:this.inclination,azimuth:this.azimuth,distance:this.distance}),this.replaceObject()}getRuntimeResourcesForStats(){return{meshes:[this.sky],materials:[this.sky.material]}}}c()(xI,"legacyComponentName","skybox"),c()(xI,"disableTransform",!0),c()(xI,"ignoreRaycast",!0),c()(xI,"nodeName","Skybox");var SI=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 640 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4z",key:"k0"}))}));SI.displayName="Cloud";const wI=e=>e/24,EI=e=>24*e;class TI extends u.Component{constructor(...e){super(...e),c()(this,"onChangeTurbidity",e=>{this.props.editor.setPropertySelected("turbidity",e)}),c()(this,"onChangeRayleigh",e=>{this.props.editor.setPropertySelected("rayleigh",e)}),c()(this,"onChangeLuminance",e=>{this.props.editor.setPropertySelected("luminance",e)}),c()(this,"onChangeMieCoefficient",e=>{this.props.editor.setPropertySelected("mieCoefficient",e)}),c()(this,"onChangeMieDirectionalG",e=>{this.props.editor.setPropertySelected("mieDirectionalG",e)}),c()(this,"onChangeInclination",e=>{this.props.editor.setPropertySelected("inclination",e)}),c()(this,"onChangeAzimuth",e=>{this.props.editor.setPropertySelected("azimuth",e)}),c()(this,"onChangeDistance",e=>{this.props.editor.setPropertySelected("distance",e)})}render(){const e=this.props.node;return h.a.createElement(vh,s()({description:TI.description},this.props),h.a.createElement($p,{name:"Time of Day",smallStep:.1,mediumStep:.5,largeStep:1,min:0,max:24,convertFrom:EI,convertTo:wI,value:e.azimuth,onChange:this.onChangeAzimuth,unit:"h"}),h.a.createElement(tI,{name:"Latitude",min:-90,max:90,smallStep:.1,mediumStep:.5,largeStep:1,value:e.inclination,onChange:this.onChangeInclination}),h.a.createElement(Sd,{name:"Luminance"},h.a.createElement(Mf,{min:.001,max:1.189,step:.001,value:e.luminance,onChange:this.onChangeLuminance})),h.a.createElement(Sd,{name:"Scattering Amount"},h.a.createElement(Mf,{min:0,max:.1,step:.001,value:e.mieCoefficient,onChange:this.onChangeMieCoefficient})),h.a.createElement(Sd,{name:"Scattering Distance"},h.a.createElement(Mf,{min:0,max:1,step:.001,value:e.mieDirectionalG,onChange:this.onChangeMieDirectionalG})),h.a.createElement(Sd,{name:"Horizon Start"},h.a.createElement(Mf,{min:1,max:20,value:e.turbidity,onChange:this.onChangeTurbidity})),h.a.createElement(Sd,{name:"Horizon End"},h.a.createElement(Mf,{min:0,max:4,value:e.rayleigh,onChange:this.onChangeRayleigh})))}}c()(TI,"propTypes",{editor:p.a.object,node:p.a.object}),c()(TI,"iconComponent",SI),c()(TI,"description","Creates a visualization of an open sky and atmosphere around your scene. Also used as the environment map for your scene.");var MI=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 640 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M192 160h32V32h-32c-35.35 0-64 28.65-64 64s28.65 64 64 64zM0 416c0 35.35 28.65 64 64 64h32V352H64c-35.35 0-64 28.65-64 64zm337.46-128c-34.91 0-76.16 13.12-104.73 32-24.79 16.38-44.52 32-104.73 32v128l57.53 15.97c26.21 7.28 53.01 13.12 80.31 15.05 32.69 2.31 65.6.67 97.58-6.2C472.9 481.3 512 429.22 512 384c0-64-84.18-96-174.54-96zM491.42 7.19C459.44.32 426.53-1.33 393.84.99c-27.3 1.93-54.1 7.77-80.31 15.04L256 32v128c60.2 0 79.94 15.62 104.73 32 28.57 18.88 69.82 32 104.73 32C555.82 224 640 192 640 128c0-45.22-39.1-97.3-148.58-120.81z",key:"k0"}))}));MI.displayName="ShoePrints";class CI extends u.Component{constructor(e){super(e),c()(this,"onRegenerate",async()=>{const e=new AbortController;this.props.showDialog(Ll.a,{title:"Generating Floor Plan",message:"Generating floor plan...",cancelable:!0,onCancel:()=>e.abort()});try{await this.props.node.generate(e.signal),this.props.hideDialog()}catch(e){if(e.aborted)return void this.props.hideDialog();console.error(e),this.props.showDialog(Pl,{title:"Error Generating Floor Plan",message:e.message||"There was an unknown error.",error:e})}});const t=e=>t=>this.props.editor.setPropertySelected(e,t);this.onChangeAutoCellSize=t("autoCellSize"),this.onChangeCellSize=t("cellSize"),this.onChangeCellHeight=t("cellHeight"),this.onChangeAgentHeight=t("agentHeight"),this.onChangeAgentRadius=t("agentRadius"),this.onChangeAgentMaxClimb=t("agentMaxClimb"),this.onChangeAgentMaxSlope=t("agentMaxSlope"),this.onChangeRegionMinSize=t("regionMinSize"),this.onChangeMaxTriangles=t("maxTriangles"),this.onChangeForceTrimesh=t("forceTrimesh")}render(){const{node:e,settings:t}=this.props;return h.a.createElement(vh,s()({},this.props,{description:CI.description}),h.a.createElement(Sd,{name:"Auto Cell Size"},h.a.createElement(Wd.a,{value:e.autoCellSize,onChange:this.onChangeAutoCellSize})),!e.autoCellSize&&h.a.createElement($p,{name:"Cell Size",value:e.cellSize,smallStep:.001,mediumStep:.01,largeStep:.1,min:.1,displayPrecision:1e-4,onChange:this.onChangeCellSize}),h.a.createElement($p,{name:"Cell Height",value:e.cellHeight,smallStep:.001,mediumStep:.01,largeStep:.1,min:.1,onChange:this.onChangeCellHeight,unit:"m"}),h.a.createElement($p,{name:"Agent Height",value:e.agentHeight,smallStep:.001,mediumStep:.01,largeStep:.1,min:.1,onChange:this.onChangeAgentHeight,unit:"m"}),h.a.createElement($p,{name:"Agent Radius",value:e.agentRadius,min:0,smallStep:.001,mediumStep:.01,largeStep:.1,onChange:this.onChangeAgentRadius,unit:"m"}),h.a.createElement($p,{name:"Maximum Step Height",value:e.agentMaxClimb,min:0,smallStep:.001,mediumStep:.01,largeStep:.1,onChange:this.onChangeAgentMaxClimb,unit:"m"}),h.a.createElement($p,{name:"Maximum Slope",value:e.agentMaxSlope,min:1e-5,max:90,smallStep:1,mediumStep:5,largeStep:15,onChange:this.onChangeAgentMaxSlope,unit:"°"}),h.a.createElement($p,{name:"Minimum Region Area",value:e.regionMinSize,min:.1,smallStep:.1,mediumStep:1,largeStep:10,onChange:this.onChangeRegionMinSize,unit:"m²"}),h.a.createElement(Sd,{name:"Force Trimesh"},h.a.createElement(Wd.a,{value:e.forceTrimesh,onChange:this.onChangeForceTrimesh})),!e.forceTrimesh&&t.enableExperimentalFeatures&&h.a.createElement($p,{name:"Collision Geo Triangle Threshold",value:e.maxTriangles,min:10,max:1e4,smallStep:1,mediumStep:100,largeStep:1e3,precision:1,onChange:this.onChangeMaxTriangles}),h.a.createElement(Me.e,{onClick:this.onRegenerate},"Regenerate"))}}c()(CI,"propTypes",{hideDialog:p.a.func.isRequired,showDialog:p.a.func.isRequired,editor:p.a.object,settings:p.a.object.isRequired,node:p.a.object}),c()(CI,"iconComponent",MI),c()(CI,"description","Sets the walkable surface area in your scene.");const $I=(AI=CI,OI=function(e){return h.a.createElement(Tp.Consumer,null,t=>h.a.createElement(AI,s()({},e,t)))},function(e){return h.a.createElement(Rl.Consumer,null,t=>h.a.createElement(OI,s()({},e,t)))});var OI,AI;$I.iconComponent=CI.iconComponent,$I.description=CI.description;var II=$I;const PI={multiple:!1,accepts:jl.d};function LI(e){let{onChange:t}=e,n=K()(e,["onChange"]);const r=Nl(PI),[{canDrop:i,isOver:o},a]=wl({accept:[El.Image,El.File],drop(e){e.type===El.Image?t(e.value.url,e.value.initialProps||{}):r(e.files).then(e=>{e&&e.length>0&&t(e[0].url,{})})},collect:e=>({canDrop:e.canDrop(),isOver:e.isOver()})});return h.a.createElement(Vd.a,s()({ref:a,onChange:t,error:o&&!i,canDrop:o&&i},n))}LI.propTypes={onChange:p.a.func.isRequired};var kI=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z",key:"k0"}))}));kI.displayName="Image";const RI=Object.values(Os).map(e=>({label:e,value:e}));function DI(e){const{editor:t,node:n}=e,r=jf(t,"src"),i=jf(t,"controls"),o=jf(t,"projection");return h.a.createElement(vh,s()({description:DI.description},e),h.a.createElement(Sd,{name:"Image Url"},h.a.createElement(LI,{value:n.src,onChange:r})),h.a.createElement(Sd,{name:"Controls",info:"Toggle the visibility of the media controls in Hubs."},h.a.createElement(Wd.a,{value:n.controls,onChange:i})),h.a.createElement(Sd,{name:"Projection"},h.a.createElement(or,{options:RI,value:n.projection,onChange:o})))}DI.propTypes={editor:p.a.object,node:p.a.object,multiEdit:p.a.bool},DI.iconComponent=kI,DI.description="Dynamically loads an image.";const jI={multiple:!1,accepts:jl.f};function NI(e){let{onChange:t}=e,n=K()(e,["onChange"]);const r=Nl(jI),[{canDrop:i,isOver:o},a]=wl({accept:[El.Video,El.File],drop(e){e.type===El.Video?t(e.value.url,e.value.initialProps||{}):r(e.files).then(e=>{e&&e.length>0&&t(e[0].url,{})})},collect:e=>({canDrop:e.canDrop(),isOver:e.isOver()})});return h.a.createElement(Vd.a,s()({ref:a,onChange:t,error:o&&!i,canDrop:o&&i},n))}NI.propTypes={onChange:p.a.func.isRequired};var FI=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 576 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z",key:"k0"}))}));FI.displayName="Video";function UI({node:e,editor:t,multiEdit:n}){const r=jf(t,"controls"),i=jf(t,"autoPlay"),o=jf(t,"loop"),a=jf(t,"audioType"),s=jf(t,"volume"),l=jf(t,"distanceModel"),c=jf(t,"rolloffFactor"),u=jf(t,"refDistance"),d=jf(t,"maxDistance"),p=jf(t,"coneInnerAngle"),f=jf(t,"coneOuterAngle"),m=jf(t,"coneOuterGain");return h.a.createElement(h.a.Fragment,null,h.a.createElement(Sd,{name:"Controls",info:"Toggle the visibility of the media controls in Hubs."},h.a.createElement(Wd.a,{value:e.controls,onChange:r})),h.a.createElement(Sd,{name:"Auto Play",info:"If true, the media will play when first entering the scene."},h.a.createElement(Wd.a,{value:e.autoPlay,onChange:i})),h.a.createElement(Sd,{name:"Loop",info:"If true the media will loop indefinitely."},h.a.createElement(Wd.a,{value:e.loop,onChange:o})),h.a.createElement(Sd,{name:"Audio Type"},h.a.createElement(or,{options:no,value:e.audioType,onChange:a})),h.a.createElement(Sd,{name:"Volume"},h.a.createElement(Mf,{value:e.volume,onChange:s})),!n&&e.audioType===eo.PannerNode&&h.a.createElement(h.a.Fragment,null,h.a.createElement(Sd,{name:"Distance Model",info:"The algorithim used to calculate audio rolloff."},h.a.createElement(or,{options:ro,value:e.distanceModel,onChange:l})),e.distanceModel===to.linear?h.a.createElement(Sd,{name:"Rolloff Factor",info:"A double value describing how quickly the volume is reduced as the source moves away from the listener. 0 to 1"},h.a.createElement(Mf,{min:0,max:1,smallStep:.001,mediumStep:.01,largeStep:.1,value:e.rolloffFactor,onChange:c})):h.a.createElement($p,{name:"Rolloff Factor",info:"A double value describing how quickly the volume is reduced as the source moves away from the listener. 0 to Infinity",min:0,smallStep:.1,mediumStep:1,largeStep:10,value:e.rolloffFactor,onChange:c}),h.a.createElement($p,{name:"Ref Distance",info:"A double value representing the reference distance for reducing volume as the audio source moves further from the listener.",min:0,smallStep:.1,mediumStep:1,largeStep:10,value:e.refDistance,onChange:u,unit:"m"}),h.a.createElement($p,{name:"Max Distance",info:"A double value representing the maximum distance between the audio source and the listener, after which the volume is not reduced any further.",min:1e-5,smallStep:.1,mediumStep:1,largeStep:10,value:e.maxDistance,onChange:d,unit:"m"}),h.a.createElement($p,{name:"Cone Inner Angle",info:"A double value describing the angle, in degrees, of a cone inside of which there will be no volume reduction.",min:0,max:360,smallStep:.1,mediumStep:1,largeStep:10,value:e.coneInnerAngle,onChange:p,unit:"°",disabled:n}),h.a.createElement($p,{name:"Cone Outer Angle",info:"A double value describing the angle, in degrees, of a cone outside of which the volume will be reduced by a constant value, defined by the coneOuterGain attribute.",min:0,max:360,smallStep:.1,mediumStep:1,largeStep:10,value:e.coneOuterAngle,onChange:f,unit:"°",disabled:n}),h.a.createElement(Sd,{name:"Cone Outer Gain",info:"A double value describing the amount of volume reduction outside the cone defined by the coneOuterAngle attribute. Its default value is 0, meaning that no sound can be heard."},h.a.createElement(Mf,{min:0,max:1,step:.01,value:e.coneOuterGain,onChange:m}))))}UI.propTypes={node:p.a.object,editor:p.a.object,multiEdit:p.a.bool};const BI=Object.values(Es).map(e=>({label:e,value:e}));function zI(e){const{editor:t,node:n}=e,r=jf(t,"src"),i=jf(t,"projection");return h.a.createElement(vh,s()({description:zI.description},e),h.a.createElement(Sd,{name:"Video"},h.a.createElement(NI,{value:n.src,onChange:r})),h.a.createElement(Sd,{name:"Projection"},h.a.createElement(or,{options:BI,value:n.projection,onChange:i})),h.a.createElement(UI,e))}zI.propTypes={editor:p.a.object,node:p.a.object,multiEdit:p.a.bool},zI.iconComponent=FI,zI.description="Dynamically loads a video.";const VI={nodes:0,meshes:0,materials:0,textures:0,polygons:0,vertices:0,jsonSize:0,bufferInfo:{},textureInfo:{},meshInfo:{}};class GI extends(zi(vs)){static async deserialize(e,t,n,r){const i=await super.deserialize(e,t),{src:o}=t.components.find(e=>"spawner"===e.name).props;return n(i.load(o,r)),i}constructor(e){super(e),this._canonicalUrl="",this.initialScale=1,this.boundingBox=new Mr.i,this.boundingSphere=new Mr.Rb,this.stats=VI,this.gltfJson=null}get src(){return this._canonicalUrl}set src(e){this.load(e).catch(console.error)}async loadGLTF(e){const t=this.editor.gltfCache.getLoader(e),{scene:n,json:r,stats:i}=await t.getDependency("gltf");return this.stats=i,this.gltfJson=r,Li(n)}async load(e,t){const n=e||"";if(n!==this._canonicalUrl||""===n){this._canonicalUrl=n,this.stats=VI,this.gltfJson=null,this.issues=[],this.model&&(this.remove(this.model),this.editor.renderer.removeBatchedObject(this.model),this.model=null),this.hideErrorIcon(),this.showLoadingCube();try{const{accessibleUrl:t,files:n}=await this.editor.api.resolveMedia(e);if(this.model&&this.editor.renderer.removeBatchedObject(this.model),await super.load(t),this.stats){const e=this.stats.textureInfo;for(const t in e){if(!Object.prototype.hasOwnProperty.call(e,t))continue;const r=e[t];if(void 0===r.size){let e;for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&n[t].url===r.url){e=n[t];break}e&&(r.size=e.size,this.stats.totalSize+=e.size)}}}if(this.model&&this.editor.renderer.addBatchedObject(this.model),"fit"===this.initialScale){if(this.scale.set(1,1,1),this.model){this.updateMatrixWorld(),this.boundingBox.setFromObject(this.model),this.boundingBox.getBoundingSphere(this.boundingSphere);const e=2*this.boundingSphere.radius;if((e>1e3||e<.1)&&0!==e){const t=1/e;this.scale.set(t,t,t)}else e>20&&this.scale.set(.01,.01,.01)}this.initialScale=1}else this.scale.multiplyScalar(this.initialScale),this.initialScale=1;if(this.model&&(this.model.traverse(e=>{e.material&&e.material.isMeshStandardMaterial&&(e.material.envMap=this.editor.scene.environmentMap,e.material.needsUpdate=!0)}),this.issues=ra(this.model),na("gltf",this.stats.totalSize,this.issues)),n)for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&URL.revokeObjectURL(n[e].url)}catch(e){this.showErrorIcon();const n=new Qi.b(`Error loading spawner model "${this._canonicalUrl}"`,e);t&&t(this,n),console.error(n),this.issues.push({severity:"error",message:"Error loading model."})}return this.editor.emit("objectsChanged",[this]),this.editor.emit("selectionChanged"),this.hideLoadingCube(),this}}onAdd(){this.model&&this.editor.renderer.addBatchedObject(this.model)}onRemove(){this.model&&this.editor.renderer.removeBatchedObject(this.model)}serialize(){return super.serialize({spawner:{src:this._canonicalUrl}})}copy(e,t=!0){return super.copy(e,t),e.loadingCube?(this.initialScale=e.initialScale,this.load(e.src)):(this.stats=JSON.parse(JSON.stringify(e.stats)),this.gltfJson=e.gltfJson,this._canonicalUrl=e._canonicalUrl),this}prepareForExport(){super.prepareForExport(),this.addGLTFComponent("spawner",{src:this._canonicalUrl}),this.replaceObject()}getRuntimeResourcesForStats(){if(this.model){const e=[];this.model.traverse(t=>{t.isMesh&&e.push(t)});const t=Object(Hi.a)(this.model);return{meshes:e,materials:t}}}}c()(GI,"legacyComponentName","spawner"),c()(GI,"nodeName","Spawner"),c()(GI,"initialElementProps",{initialScale:"fit",src:"https://sketchfab.com/models/a4c500d7358a4a199b6a5cd35f416466"});var HI=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z",key:"k0"}))}));HI.displayName="Magic";function WI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WI(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class JI extends u.Component{constructor(...e){super(...e),c()(this,"onChangeSrc",(e,t)=>{this.props.editor.setPropertiesSelected(qI(qI({},t),{},{src:e}))})}render(){const e=this.props.node;return h.a.createElement(vh,s()({},this.props,{description:JI.description}),h.a.createElement(Sd,{name:"Model Url"},h.a.createElement(Vf,{value:e.src,onChange:this.onChangeSrc})),e.model&&h.a.createElement(IA,{node:e}))}}c()(JI,"propTypes",{editor:p.a.object,node:p.a.object}),c()(JI,"iconComponent",HI),c()(JI,"description","Spawns a model as an interactable object.");const YI=["target","enterComponent","enterProperty","enterValue","leaveComponent","leaveProperty","leaveValue"];class XI extends(zi(Mr.qb)){static async deserialize(e,t){const n=await super.deserialize(e,t),r=t.components.find(e=>"trigger-volume"===e.name).props;return n.target=r.target,n.enterComponent=r.enterComponent,n.enterProperty=r.enterProperty,n.enterValue=r.enterValue,n.leaveComponent=r.leaveComponent,n.leaveProperty=r.leaveProperty,n.leaveValue=r.leaveValue,n}constructor(e){super(e);const t=new Mr.eb(XI._geometry,XI._material),n=new Mr.k(t,16776960);n.layers.set(1),this.helper=n,this.add(n),this.target=null,this.enterComponent=null,this.enterProperty=null,this.enterValue=null,this.leaveComponent=null,this.leaveProperty=null,this.leaveValue=null}copy(e,t=!0){if(t&&this.remove(this.helper),super.copy(e,t),t){const t=e.children.indexOf(e.helper);-1!==t&&(this.helper=this.children[t])}return this.target=e.target,this.enterComponent=e.enterComponent,this.enterProperty=e.enterProperty,this.enterValue=e.enterValue,this.leaveComponent=e.leaveComponent,this.leaveProperty=e.leaveProperty,this.leaveValue=e.leaveValue,this}serialize(){return super.serialize({"trigger-volume":{target:this.target,enterComponent:this.enterComponent,enterProperty:this.enterProperty,enterValue:this.enterValue,leaveComponent:this.leaveComponent,leaveProperty:this.leaveProperty,leaveValue:this.leaveValue}})}prepareForExport(){super.prepareForExport(),this.remove(this.helper);for(const e of YI)if(null===this[e]||void 0===this[e])return void console.warn(`TriggerVolumeNode: property "${e}" is required. Skipping...`);const e=new Mr.ec;this.getWorldScale(e),this.addGLTFComponent("trigger-volume",{size:{x:e.x,y:e.y,z:e.z},target:this.gltfIndexForUUID(this.target),enterComponent:this.enterComponent,enterProperty:this.enterProperty,enterValue:this.enterValue,leaveComponent:this.leaveComponent,leaveProperty:this.leaveProperty,leaveValue:this.leaveValue})}}c()(XI,"legacyComponentName","trigger-volume"),c()(XI,"experimental",!0),c()(XI,"nodeName","Trigger Volume"),c()(XI,"_geometry",new Mr.j),c()(XI,"_material",new Mr.ab);var KI=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 416 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M272 96c26.51 0 48-21.49 48-48S298.51 0 272 0s-48 21.49-48 48 21.49 48 48 48zM113.69 317.47l-14.8 34.52H32c-17.67 0-32 14.33-32 32s14.33 32 32 32h77.45c19.25 0 36.58-11.44 44.11-29.09l8.79-20.52-10.67-6.3c-17.32-10.23-30.06-25.37-37.99-42.61zM384 223.99h-44.03l-26.06-53.25c-12.5-25.55-35.45-44.23-61.78-50.94l-71.08-21.14c-28.3-6.8-57.77-.55-80.84 17.14l-39.67 30.41c-14.03 10.75-16.69 30.83-5.92 44.86s30.84 16.66 44.86 5.92l39.69-30.41c7.67-5.89 17.44-8 25.27-6.14l14.7 4.37-37.46 87.39c-12.62 29.48-1.31 64.01 26.3 80.31l84.98 50.17-27.47 87.73c-5.28 16.86 4.11 34.81 20.97 40.09 3.19 1 6.41 1.48 9.58 1.48 13.61 0 26.23-8.77 30.52-22.45l31.64-101.06c5.91-20.77-2.89-43.08-21.64-54.39l-61.24-36.14 31.31-78.28 20.27 41.43c8 16.34 24.92 26.89 43.11 26.89H384c17.67 0 32-14.33 32-32s-14.33-31.99-32-31.99z",key:"k0"}))}));KI.displayName="Running";const ZI=[{label:"video",value:"video",nodeNames:["Video"],propertyOptions:[{label:"paused",value:"paused",component:"video",input:Wd.a,default:!1}]},{label:"loop-animation",value:"loop-animation",nodeNames:["Model"],propertyOptions:[{label:"paused",value:"paused",component:"loop-animation",input:Wd.a,default:!1}]}];class QI extends u.Component{constructor(e){super(e),c()(this,"onChangeTarget",e=>{this.props.editor.setPropertiesSelected({target:e,enterComponent:null,enterProperty:null,enterValue:null,leaveComponent:null,leaveProperty:null,leaveValue:null})}),c()(this,"onChangeEnterComponent",e=>{this.props.editor.setPropertiesSelected({enterComponent:e,enterProperty:null,enterValue:null})}),c()(this,"onChangeEnterProperty",(e,t)=>{this.props.editor.setPropertiesSelected({enterProperty:e,enterValue:void 0!==t.default?t.default:null})}),c()(this,"onChangeEnterValue",e=>{this.props.editor.setPropertySelected("enterValue",e)}),c()(this,"onChangeLeaveComponent",e=>{this.props.editor.setPropertiesSelected({leaveComponent:e,leaveProperty:null,leaveValue:null})}),c()(this,"onChangeLeaveProperty",(e,t)=>{this.props.editor.setPropertiesSelected({leaveProperty:e,leaveValue:void 0!==t.default?t.default:null})}),c()(this,"onChangeLeaveValue",e=>{this.props.editor.setPropertySelected("leaveValue",e)}),this.state={options:[]}}componentDidMount(){const e=[],t=this.props.editor.scene;t.traverse(n=>{n.isNode&&n!==t&&e.push({label:n.name,value:n.uuid,nodeName:n.nodeName})}),this.setState({options:e})}render(){const{node:e,multiEdit:t}=this.props,n=this.state.options.find(t=>t.value===e.target),r=n?n.value:null,i=e.target&&null===r,o=n?ZI.filter(e=>-1!==e.nodeNames.indexOf(n.nodeName)):[],a=o.find(t=>t.value===e.enterComponent),l=a?a.value:null,c=o.find(t=>t.value===e.leaveComponent),u=c?c.value:null,d=a?a.propertyOptions.filter(t=>t.component===e.enterComponent):[],p=d.find(t=>t.value===e.enterProperty),f=p?p.value:null,m=c?c.propertyOptions.filter(t=>t.component===e.leaveComponent):[],g=m.find(t=>t.value===e.leaveProperty),v=g?g.value:null,y=p&&p.input,_=g&&g.input;return h.a.createElement(vh,s()({description:QI.description},this.props),h.a.createElement(Sd,{name:"Target"},h.a.createElement(or,{error:i,placeholder:i?"Error missing node.":"Select node...",value:e.target,onChange:this.onChangeTarget,options:this.state.options,disabled:t})),h.a.createElement(Sd,{name:"Enter Component"},h.a.createElement(or,{placeholder:e.enterComponent||"Select component...",value:e.enterComponent,onChange:this.onChangeEnterComponent,options:o,disabled:t||!r})),h.a.createElement(Sd,{name:"Enter Property"},h.a.createElement(or,{placeholder:e.enterProperty||"Select property...",value:e.enterProperty,onChange:this.onChangeEnterProperty,options:d,disabled:t||!l})),h.a.createElement(Sd,{name:"Enter Value"},y?h.a.createElement(y,{value:e.enterValue,onChange:this.onChangeEnterValue,disabled:t||!(r&&l&&f)}):h.a.createElement(Vd.b,{disabled:!0})),h.a.createElement(Sd,{name:"Leave Component"},h.a.createElement(or,{placeholder:e.leaveComponent||"Select component...",value:e.leaveComponent,onChange:this.onChangeLeaveComponent,options:o,disabled:t||!r})),h.a.createElement(Sd,{name:"Leave Property"},h.a.createElement(or,{placeholder:e.leaveProperty||"Select property...",value:e.leaveProperty,onChange:this.onChangeLeaveProperty,options:m,disabled:t||!u})),h.a.createElement(Sd,{name:"Leave Value"},_?h.a.createElement(_,{value:e.leaveValue,onChange:this.onChangeLeaveValue,disabled:t||!(r&&u&&v)}):h.a.createElement(Vd.b,{disabled:!0})))}}c()(QI,"propTypes",{editor:p.a.object,node:p.a.object,multiEdit:p.a.bool}),c()(QI,"iconComponent",KI),c()(QI,"description","Sets a property on the target object on enter and leave.");class eP extends u.Component{constructor(...e){super(...e),c()(this,"onChangeHref",e=>{this.props.editor.setPropertySelected("href",e)})}render(){const e=this.props.node;return h.a.createElement(vh,s()({description:eP.description},this.props),h.a.createElement(Sd,{name:"Url"},h.a.createElement(Vd.b,{value:e.href,onChange:this.onChangeHref})))}}function tP(e){return e}function nP(e){return e*e}function rP(e){return e*(2-e)}function iP(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}function oP(e){return e*e*e}function aP(e){return--e*e*e+1}function sP(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}function lP(e){return e*e*e*e}function cP(e){return 1- --e*e*e*e}function uP(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}function hP(e){return e*e*e*e*e}function dP(e){return--e*e*e*e*e+1}function pP(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}function fP(e){return 1-Math.cos(e*Math.PI/2)}function mP(e){return Math.sin(e*Math.PI/2)}function gP(e){return.5*(1-Math.cos(Math.PI*e))}function vP(e){return 0===e?0:Math.pow(1024,e-1)}function yP(e){return 1===e?1:1-Math.pow(2,-10*e)}function _P(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}function bP(e){return 1-Math.sqrt(1-e*e)}function xP(e){return Math.sqrt(1- --e*e)}function SP(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}function wP(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)}function EP(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1}function TP(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}function MP(e){const t=1.70158;return e*e*((t+1)*e-t)}function CP(e){const t=1.70158;return--e*e*((t+1)*e+t)+1}function $P(e){const t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}function OP(e){return 1-AP(1-e)}function AP(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function IP(e){return e<.5?.5*OP(2*e):.5*AP(2*e-1)+.5}function PP(e,t,n){return(t-e)*n+e}c()(eP,"propTypes",{editor:p.a.object,node:p.a.object}),c()(eP,"iconComponent",Id),c()(eP,"description",`Link to a ${f.a.isMoz()?"Hubs ":""}room.`);class LP extends Mr.eb{constructor(e){const t=new Mr.vb(1,1,1,1,e&&e.flipY),n=new Mr.I;n.index=t.index,n.attributes=t.attributes;super(n,new Mr.Ob({uniforms:Mr.cc.merge([{map:{value:e},emitterMatrix:{value:new Mr.db}},Mr.bc.fog]),vertexShader:"\n  #include <common>\n\n  attribute vec4 particlePosition;\n  attribute vec4 particleColor;\n  attribute float particleAngle;\n\n  varying vec4 vColor;\n  varying vec2 vUV;\n\n  uniform mat4 emitterMatrix;\n\n  #include <fog_pars_vertex>\n\n  void main() {\n    vUV = uv;\n    vColor = particleColor;\n\n    float particleScale = particlePosition.w;\n    vec4 mvPosition = viewMatrix * emitterMatrix * vec4(particlePosition.xyz, 1.0);\n    \n    vec3 rotatedPosition = position;\n    rotatedPosition.x = cos( particleAngle ) * position.x - sin( particleAngle ) * position.y;\n    rotatedPosition.y = sin( particleAngle ) * position.x + cos( particleAngle ) * position.y;\n\n    mvPosition.xyz += rotatedPosition * particleScale;\n\n    gl_Position = projectionMatrix * mvPosition;\n\n    #include <fog_vertex>\n  }\n",fragmentShader:"\n  #include <common>\n  #include <fog_pars_fragment>\n\n  uniform sampler2D map;\n\n  varying vec2 vUV;\n  varying vec4 vColor;\n\n  void main() {\n    gl_FragColor = texture2D(map,  vUV) * vColor;\n    #include <fog_fragment>\n  }\n",transparent:!0,depthWrite:!1,fog:!0,blendEquation:Mr.a})),this.frustumCulled=!1,this.initialPositions=[],this.startSize=.25,this.endSize=.25,this.sizeRandomness=0,this.startVelocity=new Mr.ec(0,0,.5),this.endVelocity=new Mr.ec(0,0,.5),this.angularVelocity=0,this.particleCount=100,this.lifetime=5,this.lifetimes=[],this.lifetimeRandomness=5,this.particleSizeRandomness=[],this.ageRandomness=10,this.initialAges=[],this.ages=[],this.colors=[],this.endColor=new Mr.q,this.middleColor=new Mr.q,this.startColor=new Mr.q,this.startOpacity=1,this.middleOpacity=1,this.endOpacity=1,this.colorCurve="linear",this.velocityCurve="linear",this.sizeCurve="linear",this.worldScale=new Mr.ec,this.inverseWorldScale=new Mr.ec,this.updateParticles()}updateParticles(){const e=this.material.uniforms.map.value,t=new Mr.vb(1,1,1,1,e&&e.flipY),n=new Mr.I;n.index=t.index,n.attributes=t.attributes;const r=[],i=[],o=[],a=[],s=[],l=[],c=[],u=[];this.getWorldScale(this.worldScale);for(let e=0;e<this.particleCount;e++)s[e]=Math.random()*this.ageRandomness-this.ageRandomness,o[e]=this.lifetime+2*Math.random()*this.lifetimeRandomness,a[e]=s[e],l[3*e]=2*Math.random()-1,l[3*e+1]=2*Math.random()-1,l[3*e+2]=0,c[e]=Math.random()*this.sizeRandomness,r.push(l[3*e]*this.worldScale.x),r.push(l[3*e+1]*this.worldScale.y),r.push(l[3*e+2]),r.push(this.startSize+c[e]),u.push(0),i.push(this.startColor.r,this.startColor.g,this.startColor.b,0);n.addAttribute("particlePosition",new Mr.H(new Float32Array(r),4).setDynamic(!0)),n.addAttribute("particleColor",new Mr.H(new Float32Array(i),4).setDynamic(!0)),n.addAttribute("particleAngle",new Mr.H(new Float32Array(u),1).setDynamic(!0)),this.geometry=n,this.initialPositions=l,this.particleSizeRandomness=c,this.ages=a,this.initialAges=s,this.lifetimes=o,this.colors=i}update(e){const t=this.geometry,n=t.attributes.particlePosition.array,r=t.attributes.particleColor.array,i=t.attributes.particleAngle.array;this.getWorldScale(this.worldScale),this.inverseWorldScale.set(1/this.worldScale.x,1/this.worldScale.y,1/this.worldScale.z);const a=this.material.uniforms.emitterMatrix.value;a.copy(this.matrixWorld),a.scale(this.inverseWorldScale);for(let t=0;t<this.particleCount;t++){const a=this.ages[t],u=this.ages[t]+=e;if(u<0)continue;if(u>0&&a<=0){r[4*t+3]=this.startOpacity,n[4*t]=this.initialPositions[3*t]*this.worldScale.x,n[4*t+1]=this.initialPositions[3*t+1]*this.worldScale.y,n[4*t+2]=0,n[4*t+3]=this.startSize+this.particleSizeRandomness[t],r[4*t]=this.startColor.r,r[4*t+1]=this.startColor.g,r[4*t+2]=this.startColor.b;continue}if(u>this.lifetimes[t]){this.ages[t]=this.initialAges[t],r[4*t+3]=0;continue}const h=(s=0,l=1,(c=this.ages[t]/this.lifetimes[t])<s&&(c=s),c>l&&(c=l),c),d=o,p=d[this.velocityCurve](h),f=d[this.sizeCurve](h),m=d[this.colorCurve](h);if(n[4*t]+=PP(this.startVelocity.x,this.endVelocity.x,p)*e,n[4*t+1]+=PP(this.startVelocity.y,this.endVelocity.y,p)*e,n[4*t+2]+=PP(this.startVelocity.z,this.endVelocity.z,p)*e,n[4*t+3]=PP(this.startSize+this.particleSizeRandomness[t],this.endSize+this.particleSizeRandomness[t],f),i[t]+=this.angularVelocity*Mr.bb.DEG2RAD*e,m<=.5){const e=m/.5;r[4*t]=PP(this.startColor.r,this.middleColor.r,e),r[4*t+1]=PP(this.startColor.g,this.middleColor.g,e),r[4*t+2]=PP(this.startColor.b,this.middleColor.b,e),r[4*t+3]=PP(this.startOpacity,this.middleOpacity,e)}else if(m>.5){const e=(m-.5)/.5;r[4*t]=PP(this.middleColor.r,this.endColor.r,e),r[4*t+1]=PP(this.middleColor.g,this.endColor.g,e),r[4*t+2]=PP(this.middleColor.b,this.endColor.b,e),r[4*t+3]=PP(this.middleOpacity,this.endOpacity,e)}}var s,l,c;t.attributes.particlePosition.needsUpdate=!0,t.attributes.particleColor.needsUpdate=!0,t.attributes.particleAngle.needsUpdate=!0}copy(e,t=!0){super.copy(e,t);const n=this.material,r=e.material;return n.uniforms.map.value=r.uniforms.map.value,this.startColor.copy(e.startColor),this.middleColor.copy(e.middleColor),this.endColor.copy(e.endColor),this.startOpacity=e.startOpacity,this.middleOpacity=e.middleOpacity,this.endOpacity=e.endOpacity,this.colorCurve=e.colorCurve,this.sizeCurve=e.sizeCurve,this.startSize=e.startSize,this.endSize=e.endSize,this.sizeRandomness=e.sizeRandomness,this.ageRandomness=e.ageRandomness,this.lifetime=e.lifetime,this.lifetimeRandomness=e.lifetimeRandomness,this.particleCount=e.particleCount,this.startVelocity.copy(e.startVelocity),this.endVelocity.copy(e.endVelocity),this.velocityCurve=e.velocityCurve,this.angularVelocity=e.angularVelocity,this}}var kP=n(778),RP=n.n(kP);class DP extends Mr.qb{constructor(e=1){super(),this.name="DirectionalPlaneHelper";let t=new Mr.m;t.addAttribute("position",new Mr.z([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const n=new Mr.Q({fog:!1});this.plane=new Mr.P(t,n),this.plane.layers.set(1),this.add(this.plane),t=new Mr.m,t.addAttribute("position",new Mr.z([0,0,0,0,0,1],3)),this.directionLine=new Mr.P(t,n),this.directionLine.layers.set(1),this.add(this.directionLine),Po(this)}setColor(e){this.plane.material.color.copy(e),this.directionLine.material.color.copy(e)}dispose(){this.plane.geometry.dispose(),this.plane.material.dispose(),this.directionLine.geometry.dispose(),this.directionLine.material.dispose()}}let jP=null;class NP extends(zi(LP)){static async deserialize(e,t,n,r){const i=await super.deserialize(e,t),{src:o,colorCurve:a,velocityCurve:s,startColor:l,middleColor:c,endColor:u,startOpacity:h,middleOpacity:d,endOpacity:p,sizeCurve:f,startSize:m,endSize:g,sizeRandomness:v,startVelocity:y,endVelocity:_,angularVelocity:b,particleCount:x,ageRandomness:S,lifetime:w,lifetimeRandomness:E}=t.components.find(e=>"particle-emitter"===e.name).props;return i.startColor.set(l),i.middleColor.set(c),i.endColor.set(u),i.startOpacity=h,i.middleOpacity=d,i.endOpacity=p,i.colorCurve=a,i.startSize=m,i.endSize=g,i.sizeRandomness=v,i.ageRandomness=S,i.lifetime=w,i.lifetimeRandomness=E,i.particleCount=x,i.startVelocity.copy(y),i.endVelocity.copy(_),i.sizeCurve=f,i.velocityCurve=s,i.angularVelocity=b,n((async()=>{await i.load(o,r)})()),i.updateParticles(),i}static async load(){jP=await Object(Ni.a)(RP.a),jP.flipY=!1}constructor(e){super(e,jP),this.disableOutline=!0,this._canonicalUrl="",this.helper=new DP,this.helper.visible=!1,this.add(this.helper)}get src(){return this._canonicalUrl}set src(e){this.load(e).catch(console.error)}async load(e,t){const n=e||"";if(n!==this._canonicalUrl){this._canonicalUrl=n;try{const{accessibleUrl:t}=await this.editor.api.resolveMedia(e);this.material.uniforms.map.value=await Object(Ni.a)(t)}catch(e){t&&t(this,e),console.error(e)}return this}}onSelect(){this.helper.visible=!0}onDeselect(){this.helper.visible=!1}onUpdate(e){this.update(e)}copy(e,t=!0){if(t&&this.remove(this.helper),super.copy(e,t),t){const t=e.children.indexOf(e.helper);if(-1===t)throw new Error("Source helper could not be found.");this.helper=this.children[t]}return this.src=e._canonicalUrl,this}serialize(){return super.serialize({"particle-emitter":{src:this._canonicalUrl,startColor:this.startColor,middleColor:this.middleColor,endColor:this.endColor,startOpacity:this.startOpacity,middleOpacity:this.middleOpacity,endOpacity:this.endOpacity,colorCurve:this.colorCurve,sizeCurve:this.sizeCurve,startSize:this.startSize,endSize:this.endSize,sizeRandomness:this.sizeRandomness,ageRandomness:this.ageRandomness,lifetime:this.lifetime,lifetimeRandomness:this.lifetimeRandomness,particleCount:this.particleCount,startVelocity:this.startVelocity,endVelocity:this.endVelocity,velocityCurve:this.velocityCurve,angularVelocity:this.angularVelocity}})}prepareForExport(){super.prepareForExport(),this.addGLTFComponent("particle-emitter",{src:this._canonicalUrl,startColor:this.startColor,middleColor:this.middleColor,endColor:this.endColor,startOpacity:this.startOpacity,middleOpacity:this.middleOpacity,endOpacity:this.endOpacity,colorCurve:this.colorCurve,sizeCurve:this.sizeCurve,startSize:this.startSize,endSize:this.endSize,sizeRandomness:this.sizeRandomness,ageRandomness:this.ageRandomness,lifetime:this.lifetime,lifetimeRandomness:this.lifetimeRandomness,particleCount:this.particleCount,startVelocity:this.startVelocity,endVelocity:this.endVelocity,velocityCurve:this.velocityCurve,angularVelocity:this.angularVelocity}),this.replaceObject()}getRuntimeResourcesForStats(){const e=[];return this.material.uniforms.map.value&&e.push(this.material.uniforms.map.value),{meshes:[this],materials:[this.material],textures:e}}}c()(NP,"legacyComponentName","particle-emitter"),c()(NP,"nodeName","Particle Emitter"),c()(NP,"initialElementProps",{src:new URL(RP.a,location).href});var FP=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 512 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M224 32c0-17.67-14.33-32-32-32h-64c-17.67 0-32 14.33-32 32v96h128V32zm256 96c-17.67 0-32 14.33-32 32s14.33 32 32 32 32-14.33 32-32-14.33-32-32-32zm-256 32H96c-53.02 0-96 42.98-96 96v224c0 17.67 14.33 32 32 32h256c17.67 0 32-14.33 32-32V256c0-53.02-42.98-96-96-96zm-64 256c-44.18 0-80-35.82-80-80s35.82-80 80-80 80 35.82 80 80-35.82 80-80 80zM480 96c17.67 0 32-14.33 32-32s-14.33-32-32-32-32 14.33-32 32 14.33 32 32 32zm-96 32c-17.67 0-32 14.33-32 32s14.33 32 32 32 32-14.33 32-32-14.33-32-32-32zm-96-96c-17.67 0-32 14.33-32 32s14.33 32 32 32 32-14.33 32-32-14.33-32-32-32zm96 0c-17.67 0-32 14.33-32 32s14.33 32 32 32 32-14.33 32-32-14.33-32-32-32zm96 192c-17.67 0-32 14.33-32 32s14.33 32 32 32 32-14.33 32-32-14.33-32-32-32z",key:"k0"}))}));FP.displayName="SprayCan";const UP=Object.keys(o).map(e=>({label:Object(ar.b)(e),value:e}));class BP extends u.Component{constructor(...e){super(...e),c()(this,"onChangeColorCurve",e=>{this.props.editor.setPropertySelected("colorCurve",e)}),c()(this,"onChangeVelocityCurve",e=>{this.props.editor.setPropertySelected("velocityCurve",e)}),c()(this,"onChangeStartColor",e=>{this.props.editor.setPropertySelected("startColor",e),this.updateParticles()}),c()(this,"onChangeMiddleColor",e=>{this.props.editor.setPropertySelected("middleColor",e)}),c()(this,"onChangeEndColor",e=>{this.props.editor.setPropertySelected("endColor",e)}),c()(this,"onChangeStartOpacity",e=>{this.props.editor.setPropertySelected("startOpacity",e)}),c()(this,"onChangeMiddleOpacity",e=>{this.props.editor.setPropertySelected("middleOpacity",e)}),c()(this,"onChangeEndOpacity",e=>{this.props.editor.setPropertySelected("endOpacity",e)}),c()(this,"onChangeSrc",e=>{this.props.editor.setPropertySelected("src",e)}),c()(this,"onChangeSizeCurve",e=>{this.props.editor.setPropertySelected("sizeCurve",e)}),c()(this,"onChangeStartSize",e=>{this.props.editor.setPropertySelected("startSize",e),this.updateParticles()}),c()(this,"onChangeEndSize",e=>{this.props.editor.setPropertySelected("endSize",e)}),c()(this,"onChangeSizeRandomness",e=>{this.props.editor.setPropertySelected("sizeRandomness",e),this.updateParticles()}),c()(this,"onChangeStartVelocity",e=>{this.props.editor.setPropertySelected("startVelocity",e)}),c()(this,"onChangeEndVelocity",e=>{this.props.editor.setPropertySelected("endVelocity",e)}),c()(this,"onChangeAngularVelocity",e=>{this.props.editor.setPropertySelected("angularVelocity",e)}),c()(this,"onChangeParticleCount",e=>{this.props.editor.setPropertySelected("particleCount",e),this.updateParticles()}),c()(this,"onChangeLifetime",e=>{this.props.editor.setPropertySelected("lifetime",e),this.updateParticles()}),c()(this,"onChangeAgeRandomness",e=>{this.props.editor.setPropertySelected("ageRandomness",e),this.updateParticles()}),c()(this,"onChangeLifetimeRandomness",e=>{this.props.editor.setPropertySelected("lifetimeRandomness",e),this.updateParticles()})}updateParticles(){for(const e of this.props.editor.selected)e.updateParticles()}render(){return h.a.createElement(vh,s()({},this.props,{description:BP.description}),h.a.createElement($p,{name:"Particle Count",min:1,smallStep:1,mediumStep:1,largeStep:1,value:this.props.node.particleCount,onChange:this.onChangeParticleCount}),h.a.createElement(Sd,{name:"Image"},h.a.createElement(LI,{value:this.props.node.src,onChange:this.onChangeSrc})),h.a.createElement($p,{name:"Age Randomness",info:"The amount of variation between when particles are spawned.",min:0,smallStep:.01,mediumStep:.1,largeStep:1,value:this.props.node.ageRandomness,onChange:this.onChangeAgeRandomness,unit:"s"}),h.a.createElement($p,{name:"Lifetime",info:"The maximum age of a particle before it is respawned.",min:0,smallStep:.01,mediumStep:.1,largeStep:1,value:this.props.node.lifetime,onChange:this.onChangeLifetime,unit:"s"}),h.a.createElement($p,{name:"Lifetime Randomness",info:"The amount of variation between particle lifetimes.",min:0,smallStep:.01,mediumStep:.1,largeStep:1,value:this.props.node.lifetimeRandomness,onChange:this.onChangeLifetimeRandomness,unit:"s"}),h.a.createElement(Sd,{name:"Size Curve"},h.a.createElement(or,{options:UP,value:this.props.node.sizeCurve,onChange:this.onChangeSizeCurve})),h.a.createElement($p,{name:"Start Particle Size",min:0,smallStep:.01,mediumStep:.1,largeStep:1,value:this.props.node.startSize,onChange:this.onChangeStartSize,unit:"m"}),h.a.createElement($p,{name:"End Particle Size",min:0,smallStep:.01,mediumStep:.1,largeStep:1,value:this.props.node.endSize,onChange:this.onChangeEndSize,unit:"m"}),h.a.createElement($p,{name:"Size Randomness",info:"The amount of variation between particle starting sizes.",min:0,smallStep:.01,mediumStep:.1,largeStep:1,value:this.props.node.sizeRandomness,onChange:this.onChangeSizeRandomness,unit:"m"}),h.a.createElement(Sd,{name:"Color Curve"},h.a.createElement(or,{options:UP,value:this.props.node.colorCurve,onChange:this.onChangeColorCurve})),h.a.createElement(Sd,{name:"Start Color"},h.a.createElement(Df,{value:this.props.node.startColor,onChange:this.onChangeStartColor})),h.a.createElement(Sd,{name:"Start Opacity"},h.a.createElement(Mf,{min:0,max:1,step:.01,value:this.props.node.startOpacity,onChange:this.onChangeStartOpacity})),h.a.createElement(Sd,{name:"Middle Color"},h.a.createElement(Df,{value:this.props.node.middleColor,onChange:this.onChangeMiddleColor})),h.a.createElement(Sd,{name:"Middle Opacity"},h.a.createElement(Mf,{min:0,max:1,step:.01,value:this.props.node.middleOpacity,onChange:this.onChangeMiddleOpacity})),h.a.createElement(Sd,{name:"End Color"},h.a.createElement(Df,{value:this.props.node.endColor,onChange:this.onChangeEndColor})),h.a.createElement(Sd,{name:"End Opacity"},h.a.createElement(Mf,{min:0,max:1,step:.01,value:this.props.node.endOpacity,onChange:this.onChangeEndOpacity})),h.a.createElement(Sd,{name:"Velocity Curve"},h.a.createElement(or,{options:UP,value:this.props.node.velocityCurve,onChange:this.onChangeVelocityCurve})),h.a.createElement(Sd,{name:"Start Velocity"},h.a.createElement(Nd,{value:this.props.node.startVelocity,smallStep:.01,mediumStep:.1,largeStep:1,onChange:this.onChangeStartVelocity})),h.a.createElement(Sd,{name:"End Velocity"},h.a.createElement(Nd,{value:this.props.node.endVelocity,smallStep:.01,mediumStep:.1,largeStep:1,onChange:this.onChangeEndVelocity})),h.a.createElement($p,{name:"Angular Velocity",min:-100,smallStep:1,mediumStep:1,largeStep:1,value:this.props.node.angularVelocity,onChange:this.onChangeAngularVelocity,unit:"°/s"}))}}function zP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zP(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c()(BP,"propTypes",{editor:p.a.object,node:p.a.object}),c()(BP,"iconComponent",FP),c()(BP,"description","Particle emitter to create particles.");class GP extends(zi(vs)){static async deserialize(e,t,n,r){const i=await super.deserialize(e,t);return n((async()=>{const{kitId:e,pieceId:n,subPiecesConfig:o}=t.components.find(e=>"kit-piece"===e.name).props;await i.load(e||"architecture-kit",n,o,r),i.collidable=!!t.components.find(e=>"collidable"===e.name),i.walkable=!!t.components.find(e=>"walkable"===e.name);const a=t.components.find(e=>"loop-animation"===e.name);if(a&&a.props){const{clip:e,activeClipIndex:t}=a.props;void 0!==t?i.activeClipIndex=a.props.activeClipIndex:void 0!==e&&i.model&&i.model.animations&&(i.activeClipIndex=i.model.animations.findIndex(t=>t.name===e))}const s=t.components.find(e=>"shadow"===e.name);s&&(i.castShadow=s.props.cast,i.receiveShadow=s.props.receive)})()),i}constructor(e){super(e),this._canonicalUrl="",this.collidable=!0,this.walkable=!0,this._kitId=null,this._pieceId=null,this.subPieces=[],this.materialIds=[]}get src(){return this._canonicalUrl}set src(e){throw new Error("Cannot set src directly on a KitPieceNode")}get kitId(){return this._kitId}set kitId(e){this.load(e,this.pieceId).catch(console.error)}get pieceId(){return this._pieceId}set pieceId(e){this.load(this.kitId,e).catch(console.error)}getMaterialIdForMaterialSlot(e,t){const n=this.subPieces.find(t=>t.id===e),r=n&&n.materialSlots.find(e=>e.id===t);return r&&r.value?r.value.id:void 0}async loadMaterialSlot(e,t,n){const r=this.subPieces.find(t=>t.id===e);if(!r)return;const i=r.materialSlots.find(e=>e.id===t);if(!i)return;const o=this.materialIds.find(e=>e.id===n);if(!o)return;const a=this.editor.gltfCache.getLoader(this._src);i.value=o;const s=await a.getDependency("material",o.index);i.value&&i.value.id===n&&(i.object.material=s,s.isMeshStandardMaterial&&(s.envMap=this.editor.scene.environmentMap,s.needsUpdate=!0))}async loadGLTF(e,t,n={}){const r=this.editor.gltfCache.getLoader(e,{addUnknownExtensionsToUserData:!0}),{json:i}=await r.getDependency("root");if(!Array.isArray(i.nodes))throw new Error("glTF file has no nodes.");const o=i.nodes.findIndex(e=>Object(Yo.d)(e,t));if(-1==o)throw new Error("Could not find node definition for piece "+t);if(void 0===o)throw new Error("Couldn't find kit piece with id "+t);let a=!1;Object(Yo.e)(i,o,e=>{Object(Yo.b)(e,"kit-alt-materials")&&(a=!0)});const s=await r.getDependency("node",o,{cacheKey:"kit-piece:"+t,loadDefaultMaterial:a});if(!s)throw new Error("Could not load node for piece "+t);const l=Li(s),c=this.materialIds,u=i.materials||[];c.length=0;for(let e=0;e<u.length;e++){const t=u[e],n=Object(Yo.b)(t,"material-id");n&&c.push(VP({index:e},n))}this.subPieces.length=0,l.traverse(e=>{const t=Object(Yo.a)(e,"kit-alt-materials");if(t){const{id:r,name:i,defaultMaterials:o,altMaterials:a}=t,s=n[r]||{};for(const{id:e,material:t}of o)if(!s[e]){const n=c.find(e=>e.index===t);s[e]=n?n.id:void 0}o.length!==a.length&&console.warn(`Kit subPiece ${i} has ${o.length} default materials and ${a.length} alternate materials. They should be the same.`);const l=[];e.traverse(e=>{e.isMesh&&l.length<o.length&&l.push(e)}),o.length!==l.length&&console.warn(`Kit subPiece ${i} has ${o.length} default materials and ${l.length} primitives. They should be the same.`);const u=[];for(let e=0;e<o.length;e++){const{id:t,name:n,material:r}=o[e],i=l[e],h=a[e].map(e=>c.find(t=>t.index===e)),d=c.find(e=>e.index===r);h.push(d);const p=c.find(e=>e.id===s[t])||d;u.push({id:t,name:n,object:i,value:p,options:h})}this.subPieces.push({id:r,name:i,object:e,materialSlots:u})}});const h=[];for(const e of this.subPieces)for(const{object:t,value:n}of e.materialSlots)n&&h.push(r.getDependency("material",n.index).then(e=>t.material=e));return await Promise.all(h),l}async load(e,t,n,r){const i=e||null,o=t||null;if(this.hideErrorIcon(),this.showLoadingCube(),i===this.kitId&&o===this.pieceId)return;this._kitId=e,this._pieceId=t;const a=this.editor.getSource(e);this.model&&(this.editor.renderer.removeBatchedObject(this.model),this.remove(this.model),this.model=null),this._canonicalUrl=a&&a.kitUrl||"";try{if(this._canonicalUrl&&o){const{accessibleUrl:e,files:t}=await this.editor.api.resolveMedia(this._canonicalUrl);if(this.model&&this.editor.renderer.removeBatchedObject(this.model),await super.load(e,o,n),this.model&&this.editor.renderer.addBatchedObject(this.model),this.model&&(this.model.position.set(0,0,0),this.model.traverse(e=>{e.userData.subPiece&&this.subPieces.push(e),e.material&&e.material.isMeshStandardMaterial&&(e.material.envMap=this.editor.scene.environmentMap,e.material.needsUpdate=!0)}),this.castShadow=!0,this.receiveShadow=!0),t)for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&URL.revokeObjectURL(t[e].url)}}catch(e){this.showErrorIcon();const t=new Qi.b(`Error loading kit piece. Kit Url: "${this._canonicalUrl}" Kit Id: "${this._kitId}" Piece Id: "${this.pieceId}"`,e);r&&r(this,t),console.error(t)}return this.editor.emit("objectsChanged",[this]),this.editor.emit("selectionChanged"),this.hideLoadingCube(),this}onAdd(){this.model&&this.editor.renderer.addBatchedObject(this.model)}onRemove(){this.model&&this.editor.renderer.removeBatchedObject(this.model)}updateStaticModes(){if(this.model&&(Ti(this.model,Si),this.model.animations&&this.model.animations.length>0))for(const e of this.model.animations)for(const t of e.tracks){const{nodeName:e}=Mr.Ab.parseTrackName(t.name),n=this.model.getObjectByProperty("uuid",e);if(!n)throw new Error(`Model.updateStaticModes: Couldn't find object with uuid: "${e}"`);Ti(n,wi)}}serialize(){const e={};for(const t of this.subPieces){const n={};for(const e of t.materialSlots)n[e.id]=e.value?e.value.id:null;e[t.id]=n}const t={"kit-piece":{kitId:this.kitId,pieceId:this.pieceId,subPiecesConfig:e},shadow:{cast:this.castShadow,receive:this.receiveShadow}};return-1!==this.activeClipIndex&&(t["loop-animation"]={activeClipIndex:this.activeClipIndex}),this.collidable&&(t.collidable={}),this.walkable&&(t.walkable={}),super.serialize(t)}copy(e,t=!0){if(super.copy(e,t),this.updateStaticModes(),this._canonicalUrl=e._canonicalUrl,this._kitId=e._kitId,this._pieceId=e._pieceId,this.collidable=e.collidable,this.walkable=e.walkable,this.model){const t={};this.model.traverse(e=>{const n=Object(Yo.a)(e,"kit-alt-materials");n&&(t[n.id]=e)});for(const n of e.subPieces){const e=t[n.id],r=[];e.traverse(e=>{e.isMesh&&r.length<n.materialSlots.length&&r.push(e)});const i=[];for(let e=0;e<r.length;e++){const t=n.materialSlots[e];i.push(VP(VP({},t),{},{object:r[e]}))}this.subPieces.push(VP(VP({},n),{},{object:e,materialSlots:i}))}this.materialIds=e.materialIds.slice(0)}return this}prepareForExport(e){if(super.prepareForExport(),this.addGLTFComponent("shadow",{cast:this.castShadow,receive:this.receiveShadow}),this.activeClip){const t=e.animations.indexOf(this.activeClip);if(-1===t)throw new Error(`Error exporting model "${this.name}" with url "${this._canonicalUrl}". Animation could not be found.`);this.addGLTFComponent("loop-animation",{activeClipIndex:t})}this.model&&(this.model.userData={},this.model.traverse(e=>{e.userData.subPiece&&delete e.userData.subPiece}))}}c()(GP,"legacyComponentName","kit-piece"),c()(GP,"experimental",!0),c()(GP,"hideInElementsPanel",!0),c()(GP,"useMultiplePlacementMode",!0),c()(GP,"nodeName","Kit Piece");var HP=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 576 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M519.442 288.651c-41.519 0-59.5 31.593-82.058 31.593C377.409 320.244 432 144 432 144s-196.288 80-196.288-3.297c0-35.827 36.288-46.25 36.288-85.985C272 19.216 243.885 0 210.539 0c-34.654 0-66.366 18.891-66.366 56.346 0 41.364 31.711 59.277 31.711 81.75C175.885 207.719 0 166.758 0 166.758v333.237s178.635 41.047 178.635-28.662c0-22.473-40-40.107-40-81.471 0-37.456 29.25-56.346 63.577-56.346 33.673 0 61.788 19.216 61.788 54.717 0 39.735-36.288 50.158-36.288 85.985 0 60.803 129.675 25.73 181.23 25.73 0 0-34.725-120.101 25.827-120.101 35.962 0 46.423 36.152 86.308 36.152C556.712 416 576 387.99 576 354.443c0-34.199-18.962-65.792-56.558-65.792z",key:"k0"}))}));HP.displayName="PuzzlePiece";const WP=_.e.div.withConfig({displayName:"KitPieceNodeEditor__SubPiecesHeader",componentId:"sc-83dry2-0"})(["color:",";margin-left:8px;"],e=>e.theme.text2),qP=_.e.div.withConfig({displayName:"KitPieceNodeEditor__SubPiecesContainer",componentId:"sc-83dry2-1"})(["display:flex;flex-direction:column;"]),JP=_.e.div.withConfig({displayName:"KitPieceNodeEditor__SubPieceItemContainer",componentId:"sc-83dry2-2"})(["display:flex;flex-direction:column;background-color:",";border-radius:4px;margin:8px;"],e=>e.theme.panel2),YP=_.e.div.withConfig({displayName:"KitPieceNodeEditor__SubPieceItemTitle",componentId:"sc-83dry2-3"})(["display:flex;color:",";align-items:center;background-color:",";padding:8px;border-top-left-radius:4px;border-top-right-radius:4px;"],e=>e.theme.text2,e=>e.theme.toolbar),XP=_.e.div.withConfig({displayName:"KitPieceNodeEditor__MaterialSlotList",componentId:"sc-83dry2-4"})(["display:flex;flex-direction:column;margin-left:12px;padding:8px;"]),KP=_.e.div.withConfig({displayName:"KitPieceNodeEditor__MaterialSlotItemContainer",componentId:"sc-83dry2-5"})(["display:flex;padding:4px 0;"]),ZP=_.e.div.withConfig({displayName:"KitPieceNodeEditor__MaterialSlotItemTitle",componentId:"sc-83dry2-6"})(["display:flex;color:",";align-items:center;"],e=>e.theme.text2),QP=_.e.div.withConfig({displayName:"KitPieceNodeEditor__MaterialSlotContent",componentId:"sc-83dry2-7"})(["display:flex;padding:0 8px;flex:1;"]);function eL(e){let{name:t,children:n}=e,r=K()(e,["name","children"]);return h.a.createElement(JP,r,h.a.createElement(YP,null,t),h.a.createElement(XP,null,n))}function tL(e){let{name:t,children:n}=e,r=K()(e,["name","children"]);return h.a.createElement(KP,r,h.a.createElement(ZP,null,t," Material"),h.a.createElement(QP,null,n))}eL.propTypes={name:p.a.string,children:p.a.node},tL.propTypes={name:p.a.string,children:p.a.node};class nL extends u.Component{constructor(...e){super(...e),c()(this,"onChangeMaterialSlot",(e,t,n)=>{this.props.editor.loadMaterialSlotSelected(e.id,t.id,n)}),c()(this,"onChangeAnimation",e=>{this.props.editor.setPropertySelected("activeClipIndex",e)}),c()(this,"onChangeCollidable",e=>{this.props.editor.setPropertySelected("collidable",e)}),c()(this,"onChangeWalkable",e=>{this.props.editor.setPropertySelected("walkable",e)}),c()(this,"onChangeCastShadow",e=>{this.props.editor.setPropertySelected("castShadow",e)}),c()(this,"onChangeReceiveShadow",e=>{this.props.editor.setPropertySelected("receiveShadow",e)})}isAnimationPropertyDisabled(){const{multiEdit:e,editor:t,node:n}=this.props;return!!e&&t.selected.some(e=>e.kitId!==n.kitId||e.pieceId!==n.pieceId)}render(){const{node:e,editor:t}=this.props,n=[];for(const e of t.selected)for(const t of e.subPieces)n.some(e=>e.id===t.id)||n.push(t);return h.a.createElement(vh,s()({},this.props,{description:nL.description}),n.length>0&&h.a.createElement(h.a.Fragment,null,h.a.createElement(WP,null,"Sub Pieces:"),h.a.createElement(qP,null,n.map(e=>h.a.createElement(eL,{key:"subPiece-"+e.id,name:e.name},e.materialSlots.map(t=>h.a.createElement(tL,{key:"materialSlot-"+t.id,name:t.name},h.a.createElement(or,{options:t.options.map(e=>({value:e.id,label:e.name})),value:t.value?t.value.id:null,onChange:(n,r)=>this.onChangeMaterialSlot(e,t,n,r)}))))))),h.a.createElement(Sd,{name:"Loop Animation"},h.a.createElement(or,{disabled:this.isAnimationPropertyDisabled(),options:e.getClipOptions(),value:e.activeClipIndex,onChange:this.onChangeAnimation})),h.a.createElement(Sd,{name:"Collidable"},h.a.createElement(Wd.a,{value:e.collidable,onChange:this.onChangeCollidable})),h.a.createElement(Sd,{name:"Walkable"},h.a.createElement(Wd.a,{value:e.walkable,onChange:this.onChangeWalkable})),h.a.createElement(Sd,{name:"Cast Shadow"},h.a.createElement(Wd.a,{value:e.castShadow,onChange:this.onChangeCastShadow})),h.a.createElement(Sd,{name:"Receive Shadow"},h.a.createElement(Wd.a,{value:e.receiveShadow,onChange:this.onChangeReceiveShadow})))}}c()(nL,"propTypes",{editor:p.a.object,node:p.a.object,multiEdit:p.a.bool}),c()(nL,"iconComponent",HP),c()(nL,"description","");var rL=function(e){null==e&&(e=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(var t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]};rL.prototype.dot=function(e,t,n){return e[0]*t+e[1]*n},rL.prototype.dot3=function(e,t,n,r){return e[0]*t+e[1]*n+e[2]*r},rL.prototype.dot4=function(e,t,n,r,i){return e[0]*t+e[1]*n+e[2]*r+e[3]*i},rL.prototype.noise=function(e,t){var n,r,i=(e+t)*(.5*(Math.sqrt(3)-1)),o=Math.floor(e+i),a=Math.floor(t+i),s=(3-Math.sqrt(3))/6,l=(o+a)*s,c=e-(o-l),u=t-(a-l);c>u?(n=1,r=0):(n=0,r=1);var h=c-n+s,d=u-r+s,p=c-1+2*s,f=u-1+2*s,m=255&o,g=255&a,v=this.perm[m+this.perm[g]]%12,y=this.perm[m+n+this.perm[g+r]]%12,_=this.perm[m+1+this.perm[g+1]]%12,b=.5-c*c-u*u,x=.5-h*h-d*d,S=.5-p*p-f*f;return 70*((b<0?0:(b*=b)*b*this.dot(this.grad3[v],c,u))+(x<0?0:(x*=x)*x*this.dot(this.grad3[y],h,d))+(S<0?0:(S*=S)*S*this.dot(this.grad3[_],p,f)))},rL.prototype.noise3d=function(e,t,n){var r,i,o,a,s,l,c=(e+t+n)*(1/3),u=Math.floor(e+c),h=Math.floor(t+c),d=Math.floor(n+c),p=1/6,f=(u+h+d)*p,m=e-(u-f),g=t-(h-f),v=n-(d-f);m>=g?g>=v?(r=1,i=0,o=0,a=1,s=1,l=0):m>=v?(r=1,i=0,o=0,a=1,s=0,l=1):(r=0,i=0,o=1,a=1,s=0,l=1):g<v?(r=0,i=0,o=1,a=0,s=1,l=1):m<v?(r=0,i=1,o=0,a=0,s=1,l=1):(r=0,i=1,o=0,a=1,s=1,l=0);var y=m-r+p,_=g-i+p,b=v-o+p,x=m-a+2*p,S=g-s+2*p,w=v-l+2*p,E=m-1+.5,T=g-1+.5,M=v-1+.5,C=255&u,$=255&h,O=255&d,A=this.perm[C+this.perm[$+this.perm[O]]]%12,I=this.perm[C+r+this.perm[$+i+this.perm[O+o]]]%12,P=this.perm[C+a+this.perm[$+s+this.perm[O+l]]]%12,L=this.perm[C+1+this.perm[$+1+this.perm[O+1]]]%12,k=.6-m*m-g*g-v*v,R=.6-y*y-_*_-b*b,D=.6-x*x-S*S-w*w,j=.6-E*E-T*T-M*M;return 32*((k<0?0:(k*=k)*k*this.dot3(this.grad3[A],m,g,v))+(R<0?0:(R*=R)*R*this.dot3(this.grad3[I],y,_,b))+(D<0?0:(D*=D)*D*this.dot3(this.grad3[P],x,S,w))+(j<0?0:(j*=j)*j*this.dot3(this.grad3[L],E,T,M)))},rL.prototype.noise4d=function(e,t,n,r){var i,o,a,s,l,c,u,h,d,p,f,m,g=this.grad4,v=this.simplex,y=this.perm,_=(Math.sqrt(5)-1)/4,b=(5-Math.sqrt(5))/20,x=(e+t+n+r)*_,S=Math.floor(e+x),w=Math.floor(t+x),E=Math.floor(n+x),T=Math.floor(r+x),M=(S+w+E+T)*b,C=e-(S-M),$=t-(w-M),O=n-(E-M),A=r-(T-M),I=(C>$?32:0)+(C>O?16:0)+($>O?8:0)+(C>A?4:0)+($>A?2:0)+(O>A?1:0),P=C-(i=v[I][0]>=3?1:0)+b,L=$-(o=v[I][1]>=3?1:0)+b,k=O-(a=v[I][2]>=3?1:0)+b,R=A-(s=v[I][3]>=3?1:0)+b,D=C-(l=v[I][0]>=2?1:0)+2*b,j=$-(c=v[I][1]>=2?1:0)+2*b,N=O-(u=v[I][2]>=2?1:0)+2*b,F=A-(h=v[I][3]>=2?1:0)+2*b,U=C-(d=v[I][0]>=1?1:0)+3*b,B=$-(p=v[I][1]>=1?1:0)+3*b,z=O-(f=v[I][2]>=1?1:0)+3*b,V=A-(m=v[I][3]>=1?1:0)+3*b,G=C-1+4*b,H=$-1+4*b,W=O-1+4*b,q=A-1+4*b,J=255&S,Y=255&w,X=255&E,K=255&T,Z=y[J+y[Y+y[X+y[K]]]]%32,Q=y[J+i+y[Y+o+y[X+a+y[K+s]]]]%32,ee=y[J+l+y[Y+c+y[X+u+y[K+h]]]]%32,te=y[J+d+y[Y+p+y[X+f+y[K+m]]]]%32,ne=y[J+1+y[Y+1+y[X+1+y[K+1]]]]%32,re=.6-C*C-$*$-O*O-A*A,ie=.6-P*P-L*L-k*k-R*R,oe=.6-D*D-j*j-N*N-F*F,ae=.6-U*U-B*B-z*z-V*V,se=.6-G*G-H*H-W*W-q*q;return 27*((re<0?0:(re*=re)*re*this.dot4(g[Z],C,$,O,A))+(ie<0?0:(ie*=ie)*ie*this.dot4(g[Q],P,L,k,R))+(oe<0?0:(oe*=oe)*oe*this.dot4(g[ee],D,j,N,F))+(ae<0?0:(ae*=ae)*ae*this.dot4(g[te],U,B,z,V))+(se<0?0:(se*=se)*se*this.dot4(g[ne],G,H,W,q)))};class iL{constructor(e=new Mr.dc(1,1),t=new Mr.dc(1,1),n=.0025,r=!0){this.speed=e,this.scale=t,this.height=n,this.alternate=r}}class oL extends Mr.eb{constructor(e,t=24,n=!1){const r=new Mr.vb(10,10,t,t);r.rotateX(-Math.PI/2);const i={ripplesSpeed:{value:.25},ripplesScale:{value:1},time:{value:0}},o=n?Mr.ib:Mr.jb;e.wrapS=e.wrapT=Mr.Mb;const a=new o({color:21727,normalMap:e});a.name="SimpleWaterMaterial",a.onBeforeCompile=e=>{Object.assign(e.uniforms,i),e.vertexShader=e.vertexShader.replace("#include <fog_pars_vertex>","\n        #include <fog_pars_vertex>\n        varying vec3 vWPosition;\n      "),e.vertexShader=e.vertexShader.replace("#include <fog_vertex>","\n        #include <fog_vertex>\n        vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;\n      "),e.fragmentShader=e.fragmentShader.replace("#include <normalmap_pars_fragment>","\n        #include <normalmap_pars_fragment>\n\n        uniform float time;\n        uniform float ripplesSpeed;\n        uniform float ripplesScale;\n      \n        varying vec3 vWPosition;\n      \n        vec4 getNoise(vec2 uv){\n          float timeOffset = time * ripplesSpeed;\n          uv = (uv - 0.5) * (1.0 / ripplesScale);\n          vec2 uv0 = (uv/103.0)+vec2(timeOffset/17.0, timeOffset/29.0);\n          vec2 uv1 = uv/107.0-vec2(timeOffset/-19.0, timeOffset/31.0);\n          vec2 uv2 = uv/vec2(897.0, 983.0)+vec2(timeOffset/101.0, timeOffset/97.0);\n          vec2 uv3 = uv/vec2(991.0, 877.0)-vec2(timeOffset/109.0, timeOffset/-113.0);\n          vec4 noise = (texture2D(normalMap, uv0)) +\n                       (texture2D(normalMap, uv1)) +\n                       (texture2D(normalMap, uv2)) +\n                       (texture2D(normalMap, uv3));\n          return noise / 4.0;\n        }\n      "),e.fragmentShader=e.fragmentShader.replace("#include <normal_fragment_maps>","\n          // Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n          vec3 eye_pos = -vViewPosition;\n          vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n          vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n          vec2 st0 = dFdx( vUv.st );\n          vec2 st1 = dFdy( vUv.st );\n\n          float scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n          vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n          vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n          vec3 N = normalize( normal );\n          mat3 tsn = mat3( S, T, N );\n\n          vec3 mapN = getNoise(vWPosition.xz).xyz * 2.0 - 1.0;\n\n          mapN.xy *= normalScale;\n          mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n          normal = normalize( tsn * mapN );\n        ")},super(r,a),this.lowQuality=n,this.waterUniforms=i,n?this.material.specular.set(16777215):this.receiveShadow=!0,this.geometry.attributes.position.dynamic=!0,this.resolution=t,this.octaves=[new iL(new Mr.dc(.5,.5),new Mr.dc(1,1),.01,!0),new iL(new Mr.dc(.05,6),new Mr.dc(1,20),.1,!1)],this.simplex=new rL}get opacity(){return this.material.opacity}set opacity(e){this.material.opacity=e,1!==e&&(this.material.transparent=!0)}get color(){return this.material.color}get tideHeight(){return this.octaves[0].height}get tideScale(){return this.octaves[0].scale}get tideSpeed(){return this.octaves[0].speed}set tideHeight(e){this.octaves[0].height=e}get waveHeight(){return this.octaves[1].height}set waveHeight(e){this.octaves[1].height=e}get waveScale(){return this.octaves[1].scale}get waveSpeed(){return this.octaves[1].speed}set ripplesSpeed(e){this.waterUniforms.ripplesSpeed.value=e}get ripplesSpeed(){return this.waterUniforms.ripplesSpeed.value}set ripplesScale(e){this.waterUniforms.ripplesScale.value=e}get ripplesScale(){return this.waterUniforms.ripplesScale.value}update(e){const t=this.geometry.attributes.position;for(let n=0;n<=this.resolution;n++)for(let r=0;r<=this.resolution;r++){let i=0;for(let t=0;t<this.octaves.length;t++){const o=this.octaves[t];if(o.alternate){const t=this.simplex.noise(n*o.scale.x/this.resolution,r*o.scale.y/this.resolution);i+=Math.cos(t+o.speed.length()*e)*o.height}else{i+=(this.simplex.noise((n*o.scale.x+e*o.speed.x)/this.resolution,(r*o.scale.y+e*o.speed.y)/this.resolution)-.5)*o.height}}t.setY(n*(this.resolution+1)+r,i)}this.geometry.computeVertexNormals(),t.needsUpdate=!0,this.waterUniforms.time.value=e}clone(e){return new oL(this.material.normalMap,this.resolution,this.lowQuality).copy(this,e)}copy(e,t=!0){return super.copy(e,t),this.opacity=e.opacity,this.color.copy(e.color),this.tideHeight=e.tideHeight,this.tideScale.copy(e.tideScale),this.tideSpeed.copy(e.tideSpeed),this.waveHeight=e.waveHeight,this.waveScale.copy(e.waveScale),this.waveSpeed.copy(e.waveSpeed),this.ripplesSpeed=e.ripplesSpeed,this.ripplesScale=e.ripplesScale,this}}class aL extends(zi(oL)){static async deserialize(e,t){const n=await super.deserialize(e,t),{opacity:r,color:i,tideHeight:o,tideScale:a,tideSpeed:s,waveHeight:l,waveScale:c,waveSpeed:u,ripplesSpeed:h,ripplesScale:d}=t.components.find(e=>e.name===aL.legacyComponentName).props;return n.opacity=r,n.color.set(i),n.tideHeight=o,n.tideScale.copy(a),n.tideSpeed.copy(s),n.waveHeight=l,n.waveScale.copy(c),n.waveSpeed.copy(u),n.ripplesSpeed=h,n.ripplesScale=d,n}static async load(){}constructor(e){console.warn("SimpleWaterNode: water normal map was not loaded before creating a new SimpleWaterNode"),super(e,new Mr.Vb),e.scene&&(this.material.envMap=e.scene.environmentMap,this.material.needsUpdate=!0)}onUpdate(e,t){this.update(t)}serialize(){return super.serialize({"simple-water":{opacity:this.opacity,color:this.color,tideHeight:this.tideHeight,tideScale:this.tideScale,tideSpeed:this.tideSpeed,waveHeight:this.waveHeight,waveScale:this.waveScale,waveSpeed:this.waveSpeed,ripplesSpeed:this.ripplesSpeed,ripplesScale:this.ripplesScale}})}prepareForExport(){super.prepareForExport(),this.addGLTFComponent("simple-water",{opacity:this.opacity,color:this.color,tideHeight:this.tideHeight,tideScale:this.tideScale,tideSpeed:this.tideSpeed,waveHeight:this.waveHeight,waveScale:this.waveScale,waveSpeed:this.waveSpeed,ripplesSpeed:this.ripplesSpeed,ripplesScale:this.ripplesScale}),this.replaceObject()}getRuntimeResourcesForStats(){return{meshes:[this],materials:[this.material],textures:[null]}}}c()(aL,"legacyComponentName","simple-water"),c()(aL,"nodeName","Simple Water");var sL=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 576 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M562.1 383.9c-21.5-2.4-42.1-10.5-57.9-22.9-14.1-11.1-34.2-11.3-48.2 0-37.9 30.4-107.2 30.4-145.7-1.5-13.5-11.2-33-9.1-46.7 1.8-38 30.1-106.9 30-145.2-1.7-13.5-11.2-33.3-8.9-47.1 2-15.5 12.2-36 20.1-57.7 22.4-7.9.8-13.6 7.8-13.6 15.7v32.2c0 9.1 7.6 16.8 16.7 16 28.8-2.5 56.1-11.4 79.4-25.9 56.5 34.6 137 34.1 192 0 56.5 34.6 137 34.1 192 0 23.3 14.2 50.9 23.3 79.1 25.8 9.1.8 16.7-6.9 16.7-16v-31.6c.1-8-5.7-15.4-13.8-16.3zm0-144c-21.5-2.4-42.1-10.5-57.9-22.9-14.1-11.1-34.2-11.3-48.2 0-37.9 30.4-107.2 30.4-145.7-1.5-13.5-11.2-33-9.1-46.7 1.8-38 30.1-106.9 30-145.2-1.7-13.5-11.2-33.3-8.9-47.1 2-15.5 12.2-36 20.1-57.7 22.4-7.9.8-13.6 7.8-13.6 15.7v32.2c0 9.1 7.6 16.8 16.7 16 28.8-2.5 56.1-11.4 79.4-25.9 56.5 34.6 137 34.1 192 0 56.5 34.6 137 34.1 192 0 23.3 14.2 50.9 23.3 79.1 25.8 9.1.8 16.7-6.9 16.7-16v-31.6c.1-8-5.7-15.4-13.8-16.3zm0-144C540.6 93.4 520 85.4 504.2 73 490.1 61.9 470 61.7 456 73c-37.9 30.4-107.2 30.4-145.7-1.5-13.5-11.2-33-9.1-46.7 1.8-38 30.1-106.9 30-145.2-1.7-13.5-11.2-33.3-8.9-47.1 2-15.5 12.2-36 20.1-57.7 22.4-7.9.8-13.6 7.8-13.6 15.7v32.2c0 9.1 7.6 16.8 16.7 16 28.8-2.5 56.1-11.4 79.4-25.9 56.5 34.6 137 34.1 192 0 56.5 34.6 137 34.1 192 0 23.3 14.2 50.9 23.3 79.1 25.8 9.1.8 16.7-6.9 16.7-16v-31.6c.1-8-5.7-15.4-13.8-16.3z",key:"k0"}))}));sL.displayName="Water";const lL=_.e.div.withConfig({displayName:"Vector2Input__Vector2InputContainer",componentId:"o3t5cz-0"})(["display:flex;flex-direction:row;flex:1 1 auto;width:70%;justify-content:flex-start;"]),cL=Object(_.e)(Ad).withConfig({displayName:"Vector2Input__Vector2Scrubber",componentId:"o3t5cz-1"})(["display:flex;align-items:center;padding:0 8px;color:",";"],e=>e.theme.text2),uL=_.e.div.withConfig({displayName:"Vector2Input__UniformButtonContainer",componentId:"o3t5cz-2"})(["display:flex;align-items:center;svg{width:12px;}label{color:",";}label:hover{color:",";}"],e=>e.theme.text2,e=>e.theme.blueHover);let hL=0;class dL extends u.Component{constructor(e){super(e),c()(this,"onToggleUniform",()=>{this.setState({uniformEnabled:!this.state.uniformEnabled})}),c()(this,"onChange",(e,t)=>{const n=this.props.value;if(this.state.uniformEnabled)this.newValue.set(t,t);else{const r=n?n.x:0,i=n?n.y:0;this.newValue.x="x"===e?t:r,this.newValue.y="y"===e?t:i}this.props.onChange(this.newValue)}),c()(this,"onChangeX",e=>this.onChange("x",e)),c()(this,"onChangeY",e=>this.onChange("y",e)),this.id=hL++,this.newValue=new Mr.dc,this.state={uniformEnabled:e.uniformScaling}}render(){const e=this.props,{uniformScaling:t,value:n,onChange:r}=e,i=K()(e,["uniformScaling","value","onChange"]),{uniformEnabled:o}=this.state,a=n?n.x:0,l=n?n.y:0,c="uniform-button-"+this.id;return h.a.createElement(lL,null,t&&h.a.createElement(uL,null,h.a.createElement(Ld.a,{as:"input",id:c,type:"checkbox",checked:o,onChange:this.onToggleUniform}),h.a.createElement("label",{title:"Uniform Scale",htmlFor:c},o?h.a.createElement(Id,null):h.a.createElement(Pd,null))),h.a.createElement(cL,s()({},i,{tag:"div",value:a,onChange:this.onChangeX}),"X:"),h.a.createElement(hr,s()({},i,{value:a,onChange:this.onChangeX})),h.a.createElement(cL,s()({},i,{tag:"div",value:l,onChange:this.onChangeY}),"Y:"),h.a.createElement(hr,s()({},i,{value:l,onChange:this.onChangeY})))}}c()(dL,"propTypes",{uniformScaling:p.a.bool,value:p.a.object,onChange:p.a.func}),c()(dL,"defaultProps",{value:new Mr.dc,onChange:()=>{}});class pL extends u.Component{constructor(...e){super(...e),c()(this,"onChangeColor",e=>{this.props.editor.setPropertySelected("color",e)}),c()(this,"onChangeOpacity",e=>{this.props.editor.setPropertySelected("opacity",e)}),c()(this,"onChangeTideHeight",e=>{this.props.editor.setPropertySelected("tideHeight",e)}),c()(this,"onChangeTideScale",e=>{this.props.editor.setPropertySelected("tideScale",e)}),c()(this,"onChangeTideSpeed",e=>{this.props.editor.setPropertySelected("tideSpeed",e)}),c()(this,"onChangeWaveHeight",e=>{this.props.editor.setPropertySelected("waveHeight",e)}),c()(this,"onChangeWaveScale",e=>{this.props.editor.setPropertySelected("waveScale",e)}),c()(this,"onChangeWaveSpeed",e=>{this.props.editor.setPropertySelected("waveSpeed",e)}),c()(this,"onChangeRipplesScale",e=>{this.props.editor.setPropertySelected("ripplesScale",e)}),c()(this,"onChangeRipplesSpeed",e=>{this.props.editor.setPropertySelected("ripplesSpeed",e)})}render(){const e=this.props.node;return h.a.createElement(vh,s()({},this.props,{description:pL.description}),h.a.createElement(Sd,{name:"Color"},h.a.createElement(Df,{value:e.color,onChange:this.onChangeColor})),h.a.createElement($p,{name:"Opacity",smallStep:.01,mediumStep:.1,largeStep:.25,min:0,max:1,value:e.opacity,onChange:this.onChangeOpacity}),h.a.createElement($p,{name:"Tide Height",smallStep:.01,mediumStep:.1,largeStep:.25,min:0,value:e.tideHeight,onChange:this.onChangeTideHeight}),h.a.createElement(Sd,{name:"Tide Scale"},h.a.createElement(dL,{smallStep:.01,mediumStep:.1,largeStep:.25,value:e.tideScale,onChange:this.onChangeTideScale})),h.a.createElement(Sd,{name:"Tide Speed"},h.a.createElement(dL,{smallStep:.01,mediumStep:.1,largeStep:.25,value:e.tideSpeed,onChange:this.onChangeTideSpeed})),h.a.createElement($p,{name:"Wave Height",smallStep:.01,mediumStep:.1,largeStep:.25,min:0,value:e.waveHeight,onChange:this.onChangeWaveHeight}),h.a.createElement(Sd,{name:"Wave Scale"},h.a.createElement(dL,{smallStep:.01,mediumStep:.1,largeStep:.25,value:e.waveScale,onChange:this.onChangeWaveScale})),h.a.createElement(Sd,{name:"Wave Speed"},h.a.createElement(dL,{smallStep:.01,mediumStep:.1,largeStep:.25,value:e.waveSpeed,onChange:this.onChangeWaveSpeed})),h.a.createElement($p,{name:"Ripples Speed",smallStep:.01,mediumStep:.1,largeStep:.25,value:e.ripplesSpeed,onChange:this.onChangeRipplesSpeed}),h.a.createElement($p,{name:"Ripples Scale",smallStep:.01,mediumStep:.1,largeStep:.25,value:e.ripplesScale,onChange:this.onChangeRipplesScale}))}}c()(pL,"propTypes",{editor:p.a.object,node:p.a.object}),c()(pL,"iconComponent",sL),c()(pL,"description","Renders a water plane.");const fL={multiple:!1,accepts:jl.c};function mL(e){let{onChange:t}=e,n=K()(e,["onChange"]);const r=Nl(fL),[{canDrop:i,isOver:o},a]=wl({accept:[El.Audio,El.File],drop(e){e.type===El.Audio?t(e.value.url,e.value.initialProps||{}):r(e.files).then(e=>{e&&e.length>0&&t(e[0].url,{})})},collect:e=>({canDrop:e.canDrop(),isOver:e.isOver()})});return h.a.createElement(Vd.a,s()({ref:a,onChange:t,error:o&&!i,canDrop:o&&i},n))}mL.propTypes={onChange:p.a.func.isRequired};var gL=u.forwardRef((function(e,t){return u.createElement(pr.a,Object(dr.a)({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"-.125em",iconViewBox:"0 0 576 512"},e,{ref:t}),u.createElement("path",{fill:"currentColor",d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z",key:"k0"}))}));gL.displayName="VolumeUp";function vL(e){const{editor:t,node:n}=e,r=jf(t,"src");return h.a.createElement(vh,s()({description:vL.description},e),h.a.createElement(Sd,{name:"Audio Url"},h.a.createElement(mL,{value:n.src,onChange:r})),h.a.createElement(UI,e))}function yL(e){return h.a.createElement(au,s()({},e,{searchPlaceholder:e.source.searchPlaceholder||"Search models..."}))}function _L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_L(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}vL.propTypes={editor:p.a.object,node:p.a.object,multiEdit:p.a.bool},vL.iconComponent=gL,vL.description="Dynamically loads audio.",yL.propTypes={source:p.a.object};class xL extends Hs{constructor(e){super(),this.component=yL,this.api=e}async search(e,t,n){const r={initialScale:"fit"},i={},o={query:e.query};if(e.tags&&e.tags.length>0){const t=e.tags[0];o[void 0!==t.paramsKey?t.paramsKey:"filter"]=t.value,t.initialNodeProps&&Object.assign(r,t.initialNodeProps),t.itemProps&&Object.assign(i,t.itemProps)}const{results:a,suggestions:s,nextCursor:l}=await this.api.searchMedia(this.id,o,t,n);return{results:a.map(e=>bL({id:e.id,thumbnailUrl:e&&e.images&&e.images.preview&&e.images.preview.url,attributions:e.attributions,label:e.name,type:El.Model,url:e.url,nodeClass:_s,initialProps:bL(bL({name:e.name},r),{},{src:e.url})},i)),suggestions:s,nextCursor:l,hasMore:!!l}}}class SL extends xL{constructor(e){super(e),this.id="sketchfab",this.name="Sketchfab",this.tags=[{disabled:!0,label:"Categories",value:"categories",children:[{label:"Featured",value:"featured"},{label:"Animals",value:"animals-pets"},{label:"Architecture",value:"architecture"},{label:"Art",value:"art-abstract"},{label:"Vehicles",value:"cars-vehicles"},{label:"Characters",value:"characters-creatures"},{label:"Culture",value:"cultural-heritage-history"},{label:"Gadgets",value:"electronics-gadgets"},{label:"Fashion",value:"fashion-style"},{label:"Food",value:"food-drink"},{label:"Furniture",value:"furniture-home"},{label:"Music",value:"music"},{label:"Nature",value:"nature-plants"},{label:"News",value:"news-politics"},{label:"People",value:"people"},{label:"Places",value:"places-travel"},{label:"Science",value:"science-technology"},{label:"Sports",value:"sports-fitness"},{label:"Weapons",value:"weapons-military"}]},{disabled:!0,label:"Collections",value:"collections",children:[{label:"Hubs Scene Props",value:"51b7fd61abd04bc888cc8e7146125741",paramsKey:"collection",initialNodeProps:{initialScale:"fit",castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}},{label:"Hubs Recommended Props",value:"6cc8879692694161b1208c4626c48aba",paramsKey:"collection",initialNodeProps:{initialScale:"fit"},itemProps:{transformPivot:$u}},{disabled:!0,label:"Medieval Fantasy Contest",value:"medieval-fantasy-contest",children:[{label:"Medieval City Builder - by Eanorien",value:"355623519b124985a08c4370d93a3810",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:Mu}},{label:"Sky Castle - by Alok",value:"bdf05d92317b4bfba9ffd81fea39a368",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:Mu}},{label:"Middle Ages Mine - by Vladislav Laryushin",value:"d106792122154e8ba89b5f28f1889f8b",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:Mu}},{label:"Medieval Labyrinth - by NomadKing",value:"965f436a8aff41548cc5fa689ac114b8",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:Mu}},{label:"Medieval Town Port - by lakos",value:"6c227e9f36fc4558a23de3f4af9a5c80",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:Mu}},{label:"Assassin Hideout - by marti3d",value:"05c5c177f1c7403597c18b6c14886b63",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}},{label:"Medieval Castle with Village - by Artbake Graphics",value:"39a126f30394489d9de6af7f452d553a",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:Mu}},{label:"Medieval Fantasy Book - by Pixel",value:"cf717f81734b4eefba9f17e9e6a1c9e4",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}},{label:"Blacksmith's Workshop - by Kyan0s",value:"a013c33e56a44b479cc527e2dc992b7f",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:Mu}},{label:"Castle, Siege, Army - by BlackSpire",value:"53b764aab88b472ebe4ad80c4148c336",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:Mu}},{label:"Treasure Island - by rogueisland",value:"8f14c1d6b54d467784dfccb82aa882eb",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}},{label:"Medieval Country Village - by David",value:"2c995b31f2774df1b8fac87e65b1752d",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}},{label:"Mobile Dragon Shop - by Nive",value:"ef4745784f664105a76d009d56004f15",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}},{label:"The Tavern - by François Espagnet",value:"9983f117e3a8471da0076e8dadce2438",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}},{label:"Dragon Attack Aftermath - by Guillermo T",value:"d5445aa9dc8a457bb225c4d4ce9ce97f",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:Mu}},{label:"Building Modules - by Tobal",value:"ca06c20e01a1405f9bc444fe36cdc175",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:Mu}},{label:"The Great Sorcerer's Room - by moyicat",value:"316a36ae8dac4ab281baa79f79ef38c2",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:Mu}},{label:"Plateau Sanctuary - by BenjiToddArtist",value:"4409d7ed90054082bf9e626cde88a9a9",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}},{label:"Throne Room - by tuturu",value:"e3ad5aebeaa84806afcc4b0efe4ae39b",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}},{label:"Dark Age Motte and Bailey - by MattMakesSwords",value:"50758d11ea7146378f96440655682ce0",paramsKey:"collection",initialNodeProps:{initialScale:2.25,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}},{label:"Market Square - by Feyfolken",value:"50b5b42e549748418f93354c785a195c",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:Mu}},{label:"Cemetary Fantasy Battle - by daniel_slusarz",value:"7eaba35bf3e54475b8ecefa0e7725bb8",paramsKey:"collection",initialNodeProps:{initialScale:.01,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:Mu}},{label:'"The Drunk Troll" Tavern - by mrrobot',value:"b0e926a29dd644e48fd4c40fd416f0b8",paramsKey:"collection",initialNodeProps:{initialScale:.04,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:Mu}},{label:"Siege Equipment - by Carrigan Raketic",value:"cc6b26d45b2a4d45be66ccdc80d5ba86",paramsKey:"collection",initialNodeProps:{initialScale:3,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}}]},{disabled:!0,label:"Hubs Clubhouse Contest",value:"hubs-clubhouse-contest",children:[{label:"Mozilla Playground - by Tombolaso",value:"cfdeae6bb4ba480e9ca0c52b6a7965bd",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}},{label:"Wizard's Library - by mediochrea",value:"9ed3d50e891d4261a6b31d664869d419",paramsKey:"collection",initialNodeProps:{initialScale:.01,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}},{label:"Tree House - by grigoriyarx",value:"6e739d5f763043769828569164d6fad0",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}},{label:"Theatre - by daedaljs",value:"aede4e128b284e9d9672038bdbfd8423",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}},{label:"Round Table Room - by plasmaernst",value:"486d77de949749a998e1be80b7be5bd6",paramsKey:"collection",initialNodeProps:{initialScale:.01,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}},{label:"Space Dome - by rudolfs",value:"ce3cdb49e8144b51a8beb3a5b3aa191c",paramsKey:"collection",initialNodeProps:{initialScale:.01,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}},{label:"Summer Festival - by proxy_doug",value:"44fc5a8ed00943fd82002c78027bfe3e",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:Mu}},{label:"Space Smugglers Clubhouse - by sawcisson",value:"9edad35200f44fc09c42ddd5fca73c8e",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}},{label:"Morning Dew Coffee Shop - by CameronMckenzie",value:"4a4511d656374c79a743c4b17efea961",paramsKey:"collection",initialNodeProps:{initialScale:1,castShadow:!0,receiveShadow:!0},itemProps:{transformPivot:$u}}]}]}],this.searchLegalCopy="Search by Sketchfab",this.privacyPolicyUrl="https://sketchfab.com/privacy",this.transformPivot=$u}}class wL extends xL{constructor(e){super(e),this.id="poly",this.name="Google Poly",this.tags=[{label:"Featured",value:""},{label:"Animals",value:"animals"},{label:"Architecture",value:"architecture"},{label:"Art",value:"art"},{label:"Food",value:"food"},{label:"Nature",value:"nature"},{label:"Objects",value:"objects"},{label:"People",value:"people"},{label:"Scenes",value:"scenes"},{label:"Transport",value:"transport"}],this.searchLegalCopy="Search by Google",this.privacyPolicyUrl="https://policies.google.com/privacy",this.transformPivot=$u}}function EL(e){return h.a.createElement(au,s()({},e,{searchPlaceholder:e.source.searchPlaceholder||"Search images..."}))}EL.propTypes={source:p.a.object};class TL extends Hs{constructor(e){super(),this.component=EL,this.api=e}async search(e,t,n){const{results:r,suggestions:i,nextCursor:o}=await this.api.searchMedia(this.id,{query:e.query,filter:e.tags&&e.tags.length>0&&e.tags[0].value},t,n);return{results:r.map(e=>({id:e.id,thumbnailUrl:e&&e.images&&e.images.preview&&e.images.preview.url,attributions:e.attributions,label:e.name,type:El.Image,url:e.url,nodeClass:Ls,initialProps:{name:e.name,src:e.url}})),suggestions:i,nextCursor:o,hasMore:!!o}}}class ML extends TL{constructor(e){super(e),this.id="bing_images",this.name="Bing Images",this.searchLegalCopy="Search by Bing",this.privacyPolicyUrl="https://privacy.microsoft.com/en-us/privacystatement"}}function CL(e){return h.a.createElement(au,s()({},e,{searchPlaceholder:e.source.searchPlaceholder||"Search videos..."}))}CL.propTypes={source:p.a.object};class $L extends Hs{constructor(e){super(),this.component=CL,this.api=e}async search(e,t,n){const{results:r,suggestions:i,nextCursor:o}=await this.api.searchMedia(this.id,{query:e.query,filter:e.tags&&e.tags.length>0&&e.tags[0].value},t,n);return{results:r.map(e=>({id:e.id,thumbnailUrl:e&&e.images&&e.images.preview&&e.images.preview.url,attributions:e.attributions,label:e.name,type:El.Video,url:e.url,nodeClass:$s,initialProps:{name:e.name,src:e.url}})),suggestions:i,nextCursor:o,hasMore:!!o}}}class OL extends $L{constructor(e){super(e),this.id="bing_videos",this.name="Bing Videos",this.searchLegalCopy="Search by Bing",this.privacyPolicyUrl="https://privacy.microsoft.com/en-us/privacystatement"}}class AL extends $L{constructor(e){super(e),this.id="tenor",this.name="Tenor GIFs",this.searchPlaceholder="Search GIFs...",this.searchLegalCopy="Search by Tenor",this.privacyPolicyUrl="https://tenor.com/legal-privacy"}async search(e,t,n){const{results:r,suggestions:i,nextCursor:o}=await this.api.searchMedia(this.id,{query:e.query,filter:e.tags&&e.tags.length>0&&e.tags[0].value},t,n);return{results:r.map(e=>({id:e.id,videoUrl:e&&e.images&&e.images.preview&&e.images.preview.url,label:e.name,type:El.Video,url:e.url,nodeClass:$s,initialProps:{name:e.name,src:e.url}})),suggestions:i,nextCursor:o,hasMore:!!o}}}class IL extends Hs{constructor(e){super(),c()(this,"onSettingsChanged",()=>{this.enableExperimentalFeatures=this.editor.settings.enableExperimentalFeatures,this.emit("resultsChanged")}),c()(this,"onSceneGraphChanged",()=>{this.emit("resultsChanged")}),this.component=au,this.editor=e,this.id="elements",this.name="Elements",this.enableExperimentalFeatures=e.settings.enableExperimentalFeatures,this.editor.addListener("settingsChanged",this.onSettingsChanged),this.editor.addListener("sceneGraphChanged",this.onSceneGraphChanged),this.disableUrl=!0,this.searchDebounceTimeout=0}async search(e){const t=this.editor;let n=Array.from(t.nodeTypes).reduce((e,n)=>{if(!n.canAddNode(t))return e;if(n.experimental&&!this.enableExperimentalFeatures||n.hideInElementsPanel)return e;const r=t.nodeEditors.get(n);return e.push({id:n.nodeName,iconComponent:r.iconComponent,label:n.nodeName,description:r.description,type:El.Element,nodeClass:n,initialProps:n.initialElementProps}),e},[]);if(e.query){const t={shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["label"]};n=new Vs.a(n,t).search(e.query)}return{results:n,hasMore:!1}}}function PL(e){return h.a.createElement(au,s()({},e,{searchPlaceholder:e.source.searchPlaceholder||"Search assets..."}))}PL.propTypes={source:p.a.object};const LL={model:_s,image:Ls,video:$s,audio:js},kL={model:El.Model,image:El.Image,video:El.Video,audio:El.Audio};class RL extends Hs{constructor(e){super(),this.component=PL,this.editor=e,this.id="assets",this.name="My Assets",this.tags=[{label:"Models",value:"model"},{label:"Images",value:"image"},{label:"Videos",value:"video"},{label:"Audio",value:"audio"}],this.searchLegalCopy="Search by Mozilla Hubs",this.privacyPolicyUrl="https://github.com/mozilla/hubs/blob/master/PRIVACY.md",this.uploadSource=!0,this.uploadMultiple=!0,this.acceptFileTypes=jl.a,this.requiresAuthentication=!0}async upload(e,t,n){const r=await this.editor.api.uploadAssets(this.editor,e,t,n);return this.emit("resultsChanged"),r}async delete(e){await this.editor.api.deleteAsset(e.id),this.emit("resultsChanged")}async search(e,t,n){const{results:r,suggestions:i,nextCursor:o}=await this.editor.api.searchMedia(this.id,{query:e.query,type:e.tags&&e.tags.length>0&&e.tags[0].value},t,n);return{results:r.map(e=>{const t=e&&e.images&&e.images.preview&&e.images.preview.url,n=LL[e.type],r=t?null:this.editor.nodeEditors.get(n).iconComponent;return{id:e.id,thumbnailUrl:t,iconComponent:r,label:e.name,type:kL[e.type],url:e.url,nodeClass:n,initialProps:{name:e.name,src:e.url}}}),suggestions:i,nextCursor:o,hasMore:!!o}}}class DL extends Hs{constructor(e,t){super(),this.api=e,this.kitUrl=Object(Gs.b)(new URL(t,window.location).href),this.component=su,this.assets=[],this.tags=[],this.loaded=!1,this.searchDebounceTimeout=0}async load(){const e=await this.api.fetch(this.kitUrl),t=await e.json(),n=new Set;if(t.nodes){for(const e of t.nodes)if(e.extensions&&e.extensions.MOZ_hubs_components&&e.extensions.MOZ_hubs_components["kit-piece"]){const{id:t,thumbnailUrl:r,name:i,tags:o}=e.extensions.MOZ_hubs_components["kit-piece"];if(o)for(const e of o)n.add(e);this.assets.push({id:t,thumbnailUrl:new URL(r,this.kitUrl).href,label:i,tags:o,type:El.KitPiece,url:this.kitUrl,nodeClass:GP,initialProps:{name:i,kitId:this.id,pieceId:t}})}const e=Array.from(n),r=[];for(const t of e){const e=t.split("/");let n=e.shift(),i=r;for(;n;){let r=i.find(e=>e.label===n);r||(r={label:n,value:t},i.push(r)),n=e.shift(),n&&(r.children||(r.children=[]),i=r.children)}}this.tags=r}this.fuse=new Vs.a(this.assets,{shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["label","tags"]}),this.loaded=!0}async search(e,t,n){this.loaded||await this.load();let r=this.assets;return e.tags&&e.tags.length>0&&(r=r.filter(t=>function(e,t){for(const{value:n}of t)if(-1===e.tags.indexOf(n))return!1;return!0}(t,e.tags))),e.query&&(r=this.fuse.search(e.query)),{results:r,hasMore:!1}}}class jL extends DL{constructor(e){super(e,"https://assets-prod.reticulum.io/kits/architecture/ArchKit-64274f78e194a993850e208cbaa2fe7c5a35a955.gltf"),this.id="architecture-kit",this.name="Architecture Kit",this.transformPivot=Mu,this.searchDebounceTimeout=500}}class NL extends DL{constructor(e){super(e,"https://assets-prod.reticulum.io/kits/rock/RocksKit_v2-f259c85a5e6091bd72eac7e2fdca177209613f1b.gltf"),this.id="rock-kit",this.name="Rock Kit",this.transformPivot=Mu}}class FL extends cu{constructor(e){super(e,"Hubs Sound Pack","https://assets-prod.reticulum.io/hubs-sound-pack/asset-manifest.json")}}function UL(e){let{message:t}=e,n=K()(e,["message"]);return h.a.createElement(Ol.b,n,t)}UL.propTypes={title:p.a.string.isRequired,message:p.a.string.isRequired,tag:p.a.string,onCancel:p.a.func,cancelLabel:p.a.string.isRequired,onConfirm:p.a.func,confirmLabel:p.a.string.isRequired,bottomNav:p.a.node},UL.defaultProps={title:"Confirm"};var BL=n(37),zL=n(50);function VL({thumbnailUrl:e,initialName:t,onConfirm:n,onCancel:r}){const[i,o]=Object(u.useState)(t),a=Object(u.useCallback)(e=>{o(e)},[o]),s=Object(u.useCallback)(e=>{e.preventDefault(),n({name:i})},[i,n]),l=Object(u.useCallback)(e=>{e.preventDefault(),r()},[r]);return h.a.createElement(zL.a,{imageSrc:e,title:"Save Project",onConfirm:s,onCancel:l,confirmLabel:"Save Project"},h.a.createElement(BL.a,null,h.a.createElement("label",{htmlFor:"name"},"Project Name"),h.a.createElement(Vd.b,{id:"name",required:!0,pattern:"[A-Za-z0-9-':\"!@#$%^&*(),.?~ ]{4,64}",title:"Name must be between 4 and 64 characters and cannot contain underscores",value:i,onChange:a})))}function GL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GL(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}VL.propTypes={thumbnailUrl:p.a.string.isRequired,initialName:p.a.string.isRequired,onConfirm:p.a.func.isRequired,onCancel:p.a.func.isRequired};const WL=_.e.div.withConfig({displayName:"ExportProjectDialog__FormContainer",componentId:"sc-1wg9ilg-0"})(["display:flex;flex-direction:column;flex:1;"]);function qL({defaultOptions:e,onConfirm:t,onCancel:n}){const[r,i]=Object(u.useState)(e),o=Object(u.useCallback)(e=>{i(HL(HL({},r),{},{combineMeshes:e}))},[r,i]),a=Object(u.useCallback)(e=>{i(HL(HL({},r),{},{removeUnusedObjects:e}))},[r,i]),s=Object(u.useCallback)(e=>{e.preventDefault(),t(r)},[r,t]),l=Object(u.useCallback)(e=>{e.preventDefault(),n()},[n]);return h.a.createElement(Ol.b,{title:"Export Project",onConfirm:s,onCancel:l,confirmLabel:"Export Project"},h.a.createElement(WL,null,h.a.createElement(BL.a,null,h.a.createElement("label",{htmlFor:"combineMeshes"},"Combine Meshes"),h.a.createElement(Wd.a,{id:"combineMeshes",value:r.combineMeshes,onChange:o})),h.a.createElement(BL.a,null,h.a.createElement("label",{htmlFor:"removeUnusedObjects"},"Remove Unused Objects"),h.a.createElement(Wd.a,{id:"removeUnusedObjects",value:r.removeUnusedObjects,onChange:a}))))}function JL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JL(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}qL.propTypes={defaultOptions:p.a.object.isRequired,onConfirm:p.a.func.isRequired,onCancel:p.a.func.isRequired};const XL=_.e.div.withConfig({displayName:"OnboardingContainer__StyledOnboardingContainer",componentId:"zfrq8c-0"})(["position:absolute;display:flex;left:0;top:0;right:0;bottom:0;pointer-events:none;z-index:1000;"]);class KL extends u.Component{constructor(e){super(e),c()(this,"nextStep",()=>{const{steps:e,curStepIdx:t}=this.state;t>=e.length-1?this.setStep(-1):this.setStep(t+1)}),c()(this,"prevStep",()=>{const{curStepIdx:e}=this.state;e>0&&this.setStep(e-1)}),c()(this,"skip",()=>{Object(Y.c)("Tutorial Skipped",this.state.curStepIdx),this.setStep(-1,!0)}),c()(this,"setStep",(e,t)=>{const{steps:n,curStepIdx:r}=this.state,i={steps:n,curStepIdx:r,nextStep:this.nextStep,prevStep:this.prevStep,setStep:this.setStep,skip:this.skip},o=n[r];o&&o.onLeave&&o.onLeave(i);const a=n[e];a&&a.onEnter&&a.onEnter(i),e>n.length&&(e=-1),this.setState({curStepIdx:e}),-1===e&&(t?this.props.onSkip(r):this.props.onFinish())}),this.state={curStepIdx:e.steps.length>0?0:-1,steps:e.steps}}render(){const{steps:e,curStepIdx:t}=this.state,n=e[t],r=YL(YL({},this.props),{},{steps:e,curStepIdx:t,nextStep:this.nextStep,prevStep:this.prevStep,setStep:this.setStep,skip:this.skip});return h.a.createElement(XL,null,n&&(n.render?n.render(r):h.a.createElement(n.component,r)))}}c()(KL,"propTypes",{steps:p.a.array.isRequired,onFinish:p.a.func.isRequired,onSkip:p.a.func.isRequired});const ZL=_.e.div.withConfig({displayName:"OnboardingOverlay__StyledOnboardingOverlay",componentId:"fzds5w-0"})(["display:flex;flex:1;justify-content:center;align-items:center;background-color:rgba(0,0,0,0.5);pointer-events:all;"]),QL=_.e.div.withConfig({displayName:"OnboardingOverlay__Content",componentId:"fzds5w-1"})(["display:flex;"]);function ek({children:e}){return h.a.createElement(ZL,null,h.a.createElement(QL,null,e))}ek.propTypes={children:p.a.node};var tk=n(779),nk=n.n(tk);const rk=_.e.div.withConfig({displayName:"OnboardingDialog__StyledOnboadingDialog",componentId:"sc-1ml5fat-0"})(["width:800px;height:480px;background-color:#282c31;border-radius:4px;display:flex;flex-direction:column;"]),ik=_.e.div.withConfig({displayName:"OnboardingDialog__Content",componentId:"sc-1ml5fat-1"})(["display:flex;flex-direction:row;flex:1;border-top-left-radius:inherit;border-top-right-radius:inherit;"]),ok=_.e.div.withConfig({displayName:"OnboardingDialog__LeftContent",componentId:"sc-1ml5fat-2"})(["display:flex;width:360px;background-color:#006eff;background-size:cover;border-top-left-radius:inherit;align-items:center;padding:30px;background-image:url(",");video{border-radius:6px;}"],e=>e.backgroundImage),ak=_.e.div.withConfig({displayName:"OnboardingDialog__RightContent",componentId:"sc-1ml5fat-3"})(["display:flex;flex-direction:column;flex:1;padding:90px 60px 30px 60px;h1{font-size:3em;font-weight:lighter;margin-bottom:16px;}h2{color:",";margin-bottom:8px;}p{margin-bottom:12px;line-height:1.5em;}img{align-self:center;margin-bottom:8px;}"],e=>e.theme.text2),sk=_.e.div.withConfig({displayName:"OnboardingDialog__BottomNav",componentId:"sc-1ml5fat-4"})(["display:flex;height:64px;flex-direction:row;justify-content:flex-end;align-items:center;background-color:black;border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;padding:8px;a{color:",";}button{width:84px;}& > *{margin:0 8px;}"],e=>e.theme.text2);function lk({children:e,backgroundImage:t,videoSrc:n,steps:r,curStepIdx:i,prevStep:o,disablePrev:a,nextStep:s,disableNext:l,disableSkip:c,skip:u}){return h.a.createElement(ek,null,h.a.createElement(rk,null,h.a.createElement(ik,null,h.a.createElement(ok,{backgroundImage:t||nk.a},n&&h.a.createElement("video",{src:n,loop:!0,autoPlay:!0,muted:!0})),h.a.createElement(ak,null,e)),h.a.createElement(sk,null,!c&&h.a.createElement("a",{href:"",onClick:e=>{e.preventDefault(),e.target.blur(),u()}},"Skip Tutorial"),!a&&i>0&&h.a.createElement(Me.f,{onClick:o},"Back"),!l&&i<r.length-1&&h.a.createElement(Me.a,{onClick:s},"Next"),!l&&i===r.length-1&&h.a.createElement(Me.a,{onClick:s},"Finish"))))}lk.propTypes={children:p.a.node,backgroundImage:p.a.string,videoSrc:p.a.string,steps:p.a.array.isRequired,curStepIdx:p.a.number.isRequired,nextStep:p.a.func.isRequired,disableNext:p.a.bool,prevStep:p.a.func.isRequired,disablePrev:p.a.bool,disableSkip:p.a.bool,skip:p.a.func.isRequired};const ck=_.e.div.withConfig({displayName:"OnboardingPopover__TransformContainer",componentId:"sc-11tjqy8-0"})(["position:fixed;top:0;left:0;right:0;pointer-events:none;"]),uk={left:Object(_.d)(["&:after{left:100%;top:50%;border-left-color:#006eff;margin-top:-8px;}"]),right:Object(_.d)(["&:after{right:100%;top:50%;border-right-color:#006eff;margin-top:-8px;}"]),top:Object(_.d)(["&:after{top:100%;left:50%;border-top-color:#000000;margin-left:-8px;}"]),"top-right":Object(_.d)(["&:after{top:100%;left:10%;border-top-color:#000000;margin-left:-8px;}"]),"top-left":Object(_.d)(["&:after{top:100%;left:90%;border-top-color:#000000;margin-left:-8px;}"]),bottom:Object(_.d)(["&:after{bottom:100%;left:50%;border-bottom-color:#006eff;margin-left:-8px;}"]),"bottom-left":Object(_.d)(["&:after{bottom:100%;left:0;border-bottom-color:#006eff;margin-left:12px;}"]),"bottom-right":Object(_.d)(["&:after{bottom:100%;left:90%;border-bottom-color:#006eff;margin-left:-8px;}"])},hk=_.e.div.withConfig({displayName:"OnboardingPopover__Popover",componentId:"sc-11tjqy8-1"})(['position:absolute;top:0;left:0;pointer-events:all;background-color:#006eff;border-radius:4px;border-color:#000000;border-width:1px;max-width:360px;&:after{border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none;border-color:rgba(0,0,0,0);border-width:8px;}',""],e=>uk[e.position]),dk=_.e.div.withConfig({displayName:"OnboardingPopover__PopoverContent",componentId:"sc-11tjqy8-2"})(["display:flex;flex-direction:column;flex:1;padding:30px;h1{font-size:3em;font-weight:lighter;margin-bottom:16px;}h2{color:",";margin-bottom:8px;}p{margin-bottom:12px;line-height:1.5em;}"],e=>e.theme.text2),pk=_.e.div.withConfig({displayName:"OnboardingPopover__PopoverNav",componentId:"sc-11tjqy8-3"})(["display:flex;height:50px;flex-direction:row;justify-content:flex-end;align-items:center;background-color:black;border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;padding:8px;a{color:",";}button{width:84px;}& > *{margin:0 8px;}"],e=>e.theme.text2);class fk extends u.Component{constructor(e){super(e),c()(this,"onResize",()=>{this.updatePosition(this.state.targetEl)}),this.el=document.createElement("div"),this.popoverRef=h.a.createRef(),this.state={targetEl:null,finalPosition:e.position,transform:"translate(0px,0px)",transformOrigin:"initial"}}componentDidMount(){const e=document.querySelector(this.props.target);this.updatePosition(e),window.addEventListener("resize",this.onResize)}componentDidUpdate(e){if(this.props.target!==e.target){const e=document.querySelector(this.props.target);this.updatePosition(e)}}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}updatePosition(e){if(!e)return;const{position:t,padding:n}=this.props,r=this.popoverRef.current.getBoundingClientRect(),i=e.getBoundingClientRect(),o=document.documentElement.clientHeight,a=document.documentElement.clientWidth,{rect:s,position:l,transformOrigin:c}=fe({position:t,targetRect:i,targetOffset:n,dimensions:{width:r.width,height:r.height},viewport:{width:a,height:o},viewportOffset:n});this.setState({finalPosition:l,transformOrigin:c,transform:`translate(${s.left}px, ${s.top}px)`})}render(){const{transform:e,transformOrigin:t}=this.state,{position:n,children:r,steps:i,curStepIdx:o,prevStep:a,disablePrev:s,nextStep:l,disableNext:c,skip:u,disableSkip:d}=this.props;return h.a.createElement(te,null,h.a.createElement(ck,{style:{transform:e,transformOrigin:t}},h.a.createElement(hk,{position:n,ref:this.popoverRef},h.a.createElement(dk,null,r),h.a.createElement(pk,null,!d&&h.a.createElement("a",{href:"",onClick:e=>{e.preventDefault(),e.target.blur(),u()}},"Skip Tutorial"),!s&&o>0&&h.a.createElement(Me.f,{onClick:a},"Back"),!c&&o<i.length-1&&h.a.createElement(Me.a,{onClick:l},"Next"),!c&&o===i.length-1&&h.a.createElement(Me.a,{onClick:l},"Finish")))))}}function mk(e){return h.a.createElement("img",{src:e.src,style:{color:e.color,width:e.size,height:e.size}})}c()(fk,"propTypes",{target:p.a.string.isRequired,padding:p.a.number.isRequired,position:p.a.string.isRequired,children:p.a.node,steps:p.a.array.isRequired,curStepIdx:p.a.number.isRequired,disablePrev:p.a.bool.isRequired,disableNext:p.a.bool.isRequired,nextStep:p.a.func.isRequired,prevStep:p.a.func.isRequired,disableSkip:p.a.bool.isRequired,skip:p.a.func.isRequired}),c()(fk,"defaultProps",{disablePrev:!1,disableNext:!1,disableSkip:!1,position:"top",padding:16}),mk.propTypes={src:p.a.string.isRequired,color:p.a.string.isRequired,size:p.a.number.isRequired},mk.defaultProps={color:"white",size:32};var gk=n(780),vk=n.n(gk),yk=n(781),_k=n.n(yk),bk=n(782),xk=n.n(bk);const Sk=_.e.div.withConfig({displayName:"HotkeyDescription__StyledHotkeyDescription",componentId:"sc-1v1zqqq-0"})(["display:flex;align-items:center;margin:4px 4px;"]),wk=_.e.div.withConfig({displayName:"HotkeyDescription__HotkeySeparator",componentId:"sc-1v1zqqq-1"})(["margin:0 4px;"]);function Ek({children:e,action:t}){return h.a.createElement(Sk,null,Object(ar.f)(e,e=>h.a.createElement(wk,{key:e},"+")),h.a.createElement(wk,null,"="),h.a.createElement("div",null,t))}Ek.propTypes={action:p.a.string.isRequired,children:p.a.node};const Tk=_.e.div.withConfig({displayName:"Well",componentId:"sc-1s5qpvh-0"})(["display:flex;flex-direction:column;background-color:rgba(0,0,0,0.2);border-radius:6px;padding:4px;margin:8px;"]);Tk.displayName="Well";var Mk=Tk,Ck=n(6);class $k extends u.Component{constructor(...e){super(...e),c()(this,"onObjectAdded",()=>{this.props.nextStep()})}componentDidMount(){this.props.editor.setSource("poly"),this.props.editor.addListener("sceneGraphChanged",this.onObjectAdded)}componentWillUnmount(){this.props.editor.removeListener("sceneGraphChanged",this.onObjectAdded)}render(){return h.a.createElement(fk,s()({target:"#assets-panel"},this.props,{disableNext:!0}),"Add a model to your scene by clicking on it.")}}const Ok=el($k);class Ak extends u.Component{constructor(...e){super(...e),c()(this,"onProjectSaving",()=>{this.props.nextStep()})}componentDidMount(){this.props.api.addListener("project-saving",this.onProjectSaving)}componentWillUnmount(){this.props.api.removeListener("project-saving",this.onProjectSaving)}render(){return h.a.createElement(lk,s()({},this.props,{disableNext:!0}),h.a.createElement("h2",null,"Saving and Publishing"),h.a.createElement("h1",null,"Saving Your Project"),h.a.createElement("p",null,"Before you navigate away from the page you'll want to save your work. You can do this by opening the menu and clicking Save Project or by pressing ",ar.d," + S."),h.a.createElement(Mk,null,h.a.createElement(Ek,{action:"Save Project"},h.a.createElement("div",null,ar.d),h.a.createElement("div",null,"S"))))}}const Ik=Object(Cp.c)(Ak);class Pk extends u.Component{constructor(...e){super(...e),c()(this,"onProjectSaved",()=>{this.props.nextStep()})}componentDidMount(){this.props.api.addListener("project-saved",this.onProjectSaved)}componentWillUnmount(){this.props.api.removeListener("project-saved",this.onProjectSaved)}render(){return h.a.createElement(fk,s()({target:"#viewport-panel .toolbar"},this.props,{position:"bottom",disablePrev:!0,disableNext:!0}),"Press ",ar.d," + S to save your project.",h.a.createElement(Mk,null,h.a.createElement(Ek,{action:"Save Project"},h.a.createElement("div",null,ar.d),h.a.createElement("div",null,"S"))))}}const Lk=Object(Cp.c)(Pk);class kk extends u.Component{constructor(...e){super(...e),c()(this,"onScenePublished",()=>{this.props.nextStep()})}componentDidMount(){this.props.api.addListener("project-published",this.onScenePublished)}componentWillUnmount(){this.props.api.removeListener("project-published",this.onScenePublishing)}render(){return h.a.createElement(fk,s()({target:"#publish-button"},this.props,{position:"bottom",disablePrev:!0,disableNext:!0}),"Click to publish your scene.")}}const Rk=[{render:e=>h.a.createElement(lk,e,h.a.createElement("h2",null,"Introduction"),h.a.createElement("h1",null,"Welcome",f.a.isMoz()?" to Spoke":""),h.a.createElement("p",null,"In this tutorial we'll go over how to create and publish a scene."))},{render:e=>h.a.createElement(fk,s()({target:"#viewport-panel .toolbar"},e,{position:"bottom"}),h.a.createElement("p",null,"You can orbit around the scene by holding the left mouse button and dragging."),h.a.createElement("p",null,"You can also fly around the scene by holding the right mouse button and using the WASD keys."),h.a.createElement(Mk,null,h.a.createElement(Ek,{action:"Orbit"},h.a.createElement(mk,{src:vk.a})),h.a.createElement(Ek,{action:"Fly"},h.a.createElement(mk,{src:_k.a}),h.a.createElement(mk,{src:xk.a})),h.a.createElement(Ek,{action:"Boost"},h.a.createElement(mk,{src:_k.a}),h.a.createElement(mk,{src:xk.a}),h.a.createElement("div",null,"Shift"))))},{component:Ok},{render:e=>h.a.createElement(fk,s()({target:"#assets-panel"},e,{position:"top",disablePrev:!0}),h.a.createElement("p",null,"While the model is loading you'll see the loading indicator."),h.a.createElement("p",null,"Press Q to rotate the object to the left and E to rotate the object to the right."),h.a.createElement("p",null,"Click to place the object and press ESC to stop placing objects."),h.a.createElement(Mk,null,h.a.createElement(Ek,{action:"Rotate Left"},h.a.createElement("div",null,"Q")),h.a.createElement(Ek,{action:"Rotate Right"},h.a.createElement("div",null,"E")),h.a.createElement(Ek,{action:"Cancel Placement"},h.a.createElement("div",null,"Esc"))))},{render:e=>h.a.createElement(fk,s()({target:"#assets-panel"},e,{position:"top",disablePrev:!0}),h.a.createElement("p",null,"You can select objects by clicking on them."),h.a.createElement("p",null,"Hold shift to select multiple objects."),h.a.createElement("p",null,"Press ESC to deselect all objects."),h.a.createElement(Mk,null,h.a.createElement(Ek,{action:"Select"},h.a.createElement(mk,{src:vk.a})),h.a.createElement(Ek,{action:"Add to Selection"},h.a.createElement(mk,{src:vk.a}),h.a.createElement("div",null,"Shift")),h.a.createElement(Ek,{action:"Deselect All"},h.a.createElement("div",null,"ESC"))))},{render:e=>h.a.createElement(fk,s()({target:"#hierarchy-panel"},e,{position:"left"}),"Objects you add to the scene show up in the hierarchy panel. Double click the object you added to focus it. You can also press the F key to focus the selected object.",h.a.createElement(Mk,null,h.a.createElement(Ek,{action:"Focus Selected Object"},h.a.createElement("div",null,"F"))))},{render:e=>h.a.createElement(fk,s()({target:"#translate-button"},e,{position:"bottom-left"}),h.a.createElement("p",null,"You can move objects around the scene using the translation gizmo by selecting an object and pressing T to enter translation mode."),h.a.createElement("p",null,"Drag the arrows of the gizmo to move the object along the X, Y, or Z axis."),h.a.createElement(Mk,null,h.a.createElement(Ek,{action:"Translation Mode"},h.a.createElement("div",null,"T"))))},{render:e=>h.a.createElement(fk,s()({target:"#rotate-button"},e,{position:"bottom-left"}),h.a.createElement("p",null,"You can rotate objects using the rotation gizmo by selecting an object and pressing R to enter rotation mode."),h.a.createElement("p",null,"Drag the rings of the gizmo to rotate the object along the X, Y, or Z axis."),h.a.createElement(Mk,null,h.a.createElement(Ek,{action:"Rotation Mode"},h.a.createElement("div",null,"R"))))},{render:e=>h.a.createElement(fk,s()({target:"#scale-button"},e,{position:"bottom-left"}),h.a.createElement("p",null,"You can scale objects using the scale gizmo by selecting an object and pressing Y to enter scale mode."),h.a.createElement("p",null,"Drag the center cube of the gizmo to scale the object up or down."),h.a.createElement(Mk,null,h.a.createElement(Ek,{action:"Scale Mode"},h.a.createElement("div",null,"Y"))))},{render:e=>h.a.createElement(fk,s()({target:"#translate-button"},e,{position:"bottom-left"}),h.a.createElement("p",null,"You can also move objects around using the grab tool. While objects are selected press G to grab the selection. Move your mouse and click to place the onject in the scene."),h.a.createElement("p",null,"Press Esc or press G again to cancel the current grab operation."),h.a.createElement(Mk,null,h.a.createElement(Ek,{action:"Grab Object"},h.a.createElement("div",null,"G")),h.a.createElement(Ek,{action:"Cancel Grab"},h.a.createElement("div",null,"Esc / G"))))},{render:e=>h.a.createElement(fk,s()({target:"#transform-pivot"},e,{position:"bottom-left"}),h.a.createElement("p",null,"Sometimes placing an object can be tough if the model's pivot point is set incorrectly. You can change how the pivot is calculated in this dropdown menu. The pivot mode can be changed by pressing X."),h.a.createElement(Mk,null,h.a.createElement(Ek,{action:"Change Pivot Mode"},h.a.createElement("div",null,"X"))))},{render:e=>h.a.createElement(fk,s()({target:"#transform-snap"},e,{position:"bottom-left"}),h.a.createElement("p",null,"Sometimes you may want to move an object with a precise position or rotation. To do this toggle the snapping mode by clicking on the magnet icon. You can set the translation and rotation snap settings by using the dropdown menus above."),h.a.createElement(Mk,null,h.a.createElement(Ek,{action:"Toggle Snap Mode"},h.a.createElement("div",null,"C"))))},{render:e=>h.a.createElement(fk,s()({target:"#transform-grid"},e,{position:"bottom-left"}),h.a.createElement("p",null,"In placement mode, objects can be placed on top of other objects or the grid. When building vertically, it can be useful to change the grid height."),h.a.createElement(Mk,null,h.a.createElement(Ek,{action:"Increase Grid Height"},h.a.createElement("div",null,"=")),h.a.createElement(Ek,{action:"Decrease Grid Height"},h.a.createElement("div",null,"-"))))},{render:e=>h.a.createElement(fk,s()({target:"#properties-panel"},e,{position:"left"}),"Additional object properties can be set in the properties panel. This includes things like shadows, light color, and more.")},{component:Ik},{component:Lk},{render:e=>h.a.createElement(lk,s()({},e,{disablePrev:!0}),h.a.createElement("h2",null,"Saving and Publishing"),h.a.createElement("h1",null,"Publishing Your Project"),h.a.createElement("p",null,"Once your project is ready, you can publish it",f.a.isMoz()&&" to Hubs"," and invite your friends with the click of a button."))},{component:Object(Cp.c)(kk)},{render:e=>h.a.createElement(lk,s()({},e,{disablePrev:!0,disableSkip:!0}),h.a.createElement("h2",null,"Saving and Publishing"),h.a.createElement("h1",null,"Great Job!"),h.a.createElement("p",null,"Great job! You've touched all the basics ",f.a.isMoz()&&"of Spoke ","and published a scene"," ",f.a.isMoz()&&"to Hubs","! To get started on your own scene check out your projects page. Or click finish to continue working on this scene."),h.a.createElement(Me.a,{as:Ck.b,onClick:()=>e.onFinish("Navigate to Projects Page"),to:"/projects"},"My Projects"))}];function Dk({onFinish:e,onSkip:t}){return h.a.createElement(KL,{steps:Rk,onFinish:()=>e("Continue"),onSkip:t})}function jk(e){let{onCancel:t}=e,n=K()(e,["onCancel"]);return h.a.createElement(Ol.b,s()({},n,{title:"Support"}),h.a.createElement("div",null,h.a.createElement("p",null,"Need to report a problem?"),h.a.createElement("p",null,"You can file a"," ",h.a.createElement("a",{href:"https://github.com/mozilla/Spoke/issues/new",target:"_blank",rel:"noopener noreferrer"},"GitHub Issue")," ","or e-mail us for support at ",h.a.createElement("a",{href:"mailto:hubs@mozilla.com"},"hubs@mozilla.com")),h.a.createElement("p",null,"You can also find us on"," ",h.a.createElement("a",{href:"https://discord.gg/wHmY4nd",target:"_blank",rel:"noopener noreferrer"},"Discord"))))}Dk.propTypes={onFinish:p.a.func.isRequired,onSkip:p.a.func.isRequired},jk.propTypes={onCancel:p.a.func};var Nk=n(12);class Fk extends h.a.Component{constructor(e){super(e),c()(this,"onBeforeUnload",e=>{const t=this.props.message;return e.returnValue=t,t}),window.addEventListener("beforeunload",this.onBeforeUnload)}componentWillUnmount(){window.removeEventListener("beforeunload",this.onBeforeUnload)}render(){return h.a.createElement(Nk.a,this.props)}}function Uk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}c()(Fk,"propTypes",{message:p.a.oneOfType([p.a.func,p.a.string]).isRequired});const Bk=_.e.div.withConfig({displayName:"DragLayer__DragLayerContainer",componentId:"sc-1ldj617-0"})(["position:fixed;pointer-events:none;z-index:99999;left:0;right:0;top:0;bottom:0;"]),zk=_.e.div.attrs(e=>({style:{transform:`translate(${e.offset.x}px, ${e.offset.y}px)`}})).withConfig({displayName:"DragLayer__DragPreviewContainer",componentId:"sc-1ldj617-1"})(["background-color:",";opacity:0.3;color:",";padding:4px;border-radius:4px;display:inline-block;"],e=>e.theme.blue,e=>e.theme.text);function Vk(){const{item:e,itemType:t,currentOffset:n,isDragging:r}=function(e){var t=cl().getMonitor(),n=Uk(ol(t,e),2),r=n[0],i=n[1];return Object(u.useEffect)((function(){return t.subscribeToOffsetChange(i)})),Object(u.useEffect)((function(){return t.subscribeToStateChange(i)})),r}(e=>({item:e.getItem(),itemType:e.getItemType(),currentOffset:e.getClientOffset(),isDragging:e.isDragging()}));if(!r||!n)return null;let i;return i=t===El.Node?e.multiple?h.a.createElement("div",null,e.value.length+" Nodes Selected"):h.a.createElement("div",null,e.value.name):t===El.Model?e.multiple?h.a.createElement("div",null,e.value.length+" Models Selected"):h.a.createElement("div",null,e.value.label):t===El.Image?e.multiple?h.a.createElement("div",null,e.value.length+" Images Selected"):h.a.createElement("div",null,e.value.label):t===El.Video?e.multiple?h.a.createElement("div",null,e.value.length+" Videos Selected"):h.a.createElement("div",null,e.value.label):t===El.Audio?e.multiple?h.a.createElement("div",null,e.value.length+" Audio Sources Selected"):h.a.createElement("div",null,e.value.label):t===El.KitPiece?e.multiple?h.a.createElement("div",null,e.value.length+" Kit Pieces Selected"):h.a.createElement("div",null,e.value.label):h.a.createElement("div",null,e.type),h.a.createElement(Bk,null,h.a.createElement(zk,{offset:n},i))}var Gk=n(84),Hk=n.n(Gk),Wk=n(783),qk=n.n(Wk);function Jk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jk(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Xk=_.e.div.withConfig({displayName:"EditorContainer__StyledEditorContainer",componentId:"hrh2nf-0"})(["display:flex;flex:1;flex-direction:column;height:100%;width:100%;position:fixed;"]),Kk=_.e.div.withConfig({displayName:"EditorContainer__WorkspaceContainer",componentId:"hrh2nf-1"})(["display:flex;flex:1;overflow:hidden;margin:6px;"]);class Zk extends u.Component{constructor(e){super(e),c()(this,"updateModifiedState",e=>{const t=this.state.editor.sceneModified&&!this.state.creatingProject;t!==this.state.modified?this.setState({modified:t},e):e&&e()}),c()(this,"generateToolbarMenu",()=>[{name:"Back to Projects",action:this.onOpenProject},{name:"File",items:[{name:"New Project",action:this.onNewProject},{name:"Save Project",hotkey:ar.d+" + S",action:this.onSaveProject},{name:"Save As",action:this.onDuplicateProject},{name:f.a.isMoz()?"Publish to Hubs...":"Publish Scene...",action:this.onPublishProject},{name:"Export as binary glTF (.glb) ...",action:this.onExportProject},{name:"Import legacy .spoke project",action:this.onImportLegacyProject},{name:"Export legacy .spoke project",action:this.onExportLegacyProject}]},{name:"Help",items:[{name:"Tutorial",action:()=>{const{projectId:e}=this.props.match.params;"tutorial"===e?(Object(Y.c)("Tutorial Start"),this.setState({onboardingContext:{enabled:!0}})):this.props.history.push("/projects/tutorial")}},{name:"Keyboard and Mouse Controls",action:()=>window.open("https://github.com/mozilla/Spoke/wiki/Keyboard-and-Mouse-Controls")},{name:"Get Support",action:()=>this.showDialog(jk)},{name:"Submit Feedback",action:()=>window.open("https://forms.gle/2PAFXKwW1SXdfSK17")},{name:"Report an Issue",action:()=>window.open("https://github.com/mozilla/Spoke/issues/new")},{name:"Join us on Discord",action:()=>window.open("https://discord.gg/wHmY4nd")},{name:"Terms of Use",action:()=>window.open("https://github.com/mozilla/hubs/blob/master/TERMS.md")},{name:"Privacy Notice",action:()=>window.open("https://github.com/mozilla/hubs/blob/master/PRIVACY.md")}]},{name:"Developer",items:[{name:this.state.settingsContext.settings.enableExperimentalFeatures?"Disable Experimental Features":"Enable Experimental Features",action:()=>this.updateSetting("enableExperimentalFeatures",!this.state.settingsContext.settings.enableExperimentalFeatures)}]},{name:"Submit Feedback",action:()=>window.open("https://forms.gle/2PAFXKwW1SXdfSK17")}]),c()(this,"onEditorInitialized",()=>{const e=this.state.editor,t=this.state.editor.renderer.renderer.context,n=t.getExtension("WEBGL_debug_renderer_info");let r="Unknown",i="Unknown";n&&(r=t.getParameter(n.UNMASKED_VENDOR_WEBGL),i=t.getParameter(n.UNMASKED_RENDERER_WEBGL)),y.b(e=>{e.setTag("webgl-vendor",r),e.setTag("webgl-renderer",i)}),window.addEventListener("resize",this.onResize),this.onResize(),e.addListener("projectLoaded",this.onProjectLoaded),e.addListener("error",this.onEditorError),e.addListener("sceneModified",this.onSceneModified),e.addListener("saveProject",this.onSaveProject)}),c()(this,"onResize",()=>{this.state.editor.onResize()}),c()(this,"showDialog",(e,t={})=>{this.setState({DialogComponent:e,dialogProps:t})}),c()(this,"hideDialog",()=>{this.setState({DialogComponent:null,dialogProps:{}})}),c()(this,"dialogContext",{showDialog:this.showDialog,hideDialog:this.hideDialog}),c()(this,"onEditorError",e=>{e.aborted?this.hideDialog():(console.error(e),this.showDialog(Pl,{title:e.title||"Error",message:e.message||"There was an unknown error.",error:e}))}),c()(this,"onSceneModified",()=>{this.updateModifiedState()}),c()(this,"onProjectLoaded",()=>{this.updateModifiedState()}),c()(this,"onLogin",()=>{this.props.api.showLoginDialog(this.showDialog,this.hideDialog)}),c()(this,"onNewProject",async()=>{this.props.history.push("/projects/templates")}),c()(this,"onOpenProject",()=>{this.props.history.push("/projects")}),c()(this,"onSaveProject",async()=>{Object(Y.c)("Project Save Start");const e=new AbortController;this.showDialog(Ll.a,{title:"Saving Project",message:"Saving project...",cancelable:!0,onCancel:()=>{e.abort(),this.hideDialog()}}),await new Promise(e=>setTimeout(e,5));try{const{editor:t,project:n}=this.state;if(n){const r=await this.props.api.saveProject(n.project_id,t,e.signal,this.showDialog,this.hideDialog);this.setState({project:r})}else await this.createProject();t.sceneModified=!1,this.updateModifiedState(),this.hideDialog(),Object(Y.c)("Project Save Successful")}catch(e){console.error(e),this.showDialog(Pl,{title:"Error Saving Project",message:e.message||"There was an error when saving the project."}),Object(Y.c)("Project Save Error")}}),c()(this,"onDuplicateProject",async()=>{const e=new AbortController;this.showDialog(Ll.a,{title:"Duplicating Project",message:"Duplicating project...",cancelable:!0,onCancel:()=>{e.abort(),this.hideDialog()}}),await new Promise(e=>setTimeout(e,5));try{const e=this.state.editor;await this.createProject(),e.sceneModified=!1,this.updateModifiedState(),this.hideDialog()}catch(e){console.error(e),this.showDialog(Pl,{title:"Error Saving Project",message:e.message||"There was an error when saving the project."})}}),c()(this,"onExportProject",async()=>{const e=await new Promise(e=>{this.showDialog(qL,{defaultOptions:Object.assign({},wu.DefaultExportOptions),onConfirm:e,onCancel:e})});if(!e)return void this.hideDialog();const t=new AbortController;this.showDialog(Ll.a,{title:"Exporting Project",message:"Exporting project...",cancelable:!0,onCancel:()=>t.abort()});try{const n=this.state.editor,{glbBlob:r}=await n.exportScene(t.signal,e);this.hideDialog();const i=document.createElement("a");i.download=n.scene.name+".glb",i.href=URL.createObjectURL(r),document.body.appendChild(i),i.click(),document.body.removeChild(i),Object(Y.c)("Export Project as glTF")}catch(e){if(e.aborted)return void this.hideDialog();console.error(e),this.showDialog(Pl,{title:"Error Exporting Project",message:e.message||"There was an error when exporting the project.",error:e})}}),c()(this,"onImportLegacyProject",async()=>{const e=await new Promise(e=>{this.showDialog(UL,{title:"Import Legacy Spoke Project",message:"Warning! This will overwrite your existing scene! Are you sure you wish to continue?",onConfirm:()=>e(!0),onCancel:()=>e(!1)})});if(this.hideDialog(),!e)return;const t=document.createElement("input");t.type="file",t.accept=".spoke",t.style.display="none",t.onchange=()=>{if(t.files.length>0){const e=new FileReader;e.onload=()=>{const t=JSON.parse(e.result);t.metadata&&(delete t.metadata.sceneUrl,delete t.metadata.sceneId),this.importProject(t)},e.readAsText(t.files[0])}},t.click(),Object(Y.c)("Import Legacy Project")}),c()(this,"onExportLegacyProject",async()=>{const e=this.state.editor.scene.serialize();e.metadata&&(delete e.metadata.sceneUrl,delete e.metadata.sceneId);const t=JSON.stringify(e),n=new Blob([t]),r=document.createElement("a"),i=this.state.editor.scene.name.toLowerCase().replace(/\s+/g,"-");r.download=i+".spoke",r.href=URL.createObjectURL(n),document.body.appendChild(r),r.click(),document.body.removeChild(r),Object(Y.c)("Project Exported")}),c()(this,"onPublishProject",async()=>{Object(Y.c)("Project Publish Started");try{const e=this.state.editor;let t=this.state.project;if(t||(t=await this.createProject()),!t)return;if(t=await this.props.api.publishProject(t,e,this.showDialog,this.hideDialog),!t)return;e.sceneModified=!1,this.updateModifiedState(),Object(Y.c)("Project Publish Successful"),this.setState({project:t})}catch(e){if(e.aborted)return this.hideDialog(),void Object(Y.c)("Project Publish Canceled");console.error(e),this.showDialog(Pl,{title:"Error Publishing Project",message:e.message||"There was an unknown error.",error:e}),Object(Y.c)("Project Publish Error")}}),c()(this,"onOpenScene",()=>{const e=this.getSceneId();if(e){const t=this.props.api.getSceneUrl(e);window.open(t)}}),c()(this,"onFinishTutorial",e=>{Object(Y.c)("Tutorial Finished",e),this.setState({onboardingContext:{enabled:!1}})}),c()(this,"onSkipTutorial",e=>{Object(Y.c)("Tutorial Skipped",e),this.setState({onboardingContext:{enabled:!1}})});let t=Ep;const n=localStorage.getItem("spoke-settings");n&&(t=JSON.parse(n));const r=function(e,t){const n=new wu(e,t);return n.registerNode(lo,Ff),n.registerNode(Ki,Bf),n.registerNode(_s,kA),n.registerNode(ho,DA),n.registerNode(po,NA),n.registerNode(FA,BA),n.registerNode(HA,YA),n.registerNode(uI,dI),n.registerNode(ZA,rI),n.registerNode(aI,lI),n.registerNode(wo,fI),n.registerNode(gI,vI),n.registerNode(xI,TI),n.registerNode(Co,II),n.registerNode(Ls,DI),n.registerNode($s,zI),n.registerNode(js,vL),n.registerNode(GI,JI),n.registerNode(XI,QI),n.registerNode(Bs,eP),n.registerNode(NP,BP),n.registerNode(GP,nL),n.registerNode(aL,pL),n.registerSource(new IL(n)),n.registerSource(new RL(n)),n.registerSource(new jL(e)),n.registerSource(new NL(e)),n.registerSource(new SL(e)),n.registerSource(new wL(e)),n.registerSource(new ML(e)),n.registerSource(new OL(e)),n.registerSource(new FL(n)),n.registerSource(new AL(e)),n}(e.api,t);window.editor=r,r.init(),r.addListener("initialized",this.onEditorInitialized),this.state={error:null,project:null,parentSceneId:null,editor:r,settingsContext:{settings:t,updateSetting:this.updateSetting},onboardingContext:{enabled:!1},DialogComponent:null,dialogProps:{},modified:!1}}componentDidMount(){const{match:e,location:t}=this.props,n=e.params.projectId,r=new URLSearchParams(t.search);"new"===n?r.has("template")?this.loadProjectTemplate(r.get("template")):r.has("sceneId")?this.loadScene(r.get("sceneId")):this.loadProjectTemplate(Hk.a):"tutorial"===n?this.loadProjectTemplate(qk.a,!0):this.loadProject(n),"tutorial"===n&&(Object(Y.c)("Tutorial Start"),this.setState({onboardingContext:{enabled:!0}}))}componentDidUpdate(e){if(this.props.match.url!==e.match.url&&!this.state.creatingProject){const t=e.match.params.projectId,{projectId:n}=this.props.match.params,r=new URLSearchParams(location.search);let i=null;"new"!==n||r.has("sceneId")?"tutorial"===n&&(i=qk.a):i=r.get("template")||Hk.a,"new"===n||"tutorial"===n?this.loadProjectTemplate(i):"tutorial"!==t&&"new"!==t&&this.loadProject(n),"tutorial"===n&&(Object(Y.c)("Tutorial Start"),this.setState({onboardingContext:{enabled:!0}}))}}async loadProjectTemplate(e){this.setState({project:null,parentSceneId:null,templateUrl:e}),this.showDialog(Ll.a,{title:"Loading Project",message:"Loading project..."});const t=this.state.editor;try{const n=await this.props.api.fetch(e).then(e=>e.json());await t.init(),n.metadata&&(delete n.metadata.sceneUrl,delete n.metadata.sceneId,delete n.metadata.creatorAttribution,delete n.metadata.allowRemixing,delete n.metadata.allowPromotion),await t.loadProject(n),this.hideDialog()}catch(e){console.error(e),this.showDialog(Pl,{title:"Error loading project.",message:e.message||"There was an error when loading the project.",error:e})}}async loadScene(e){Object(Y.c)("Remix Scene"),this.setState({project:null,parentSceneId:e,templateUrl:null,onboardingContext:{enabled:!1}}),this.showDialog(Ll.a,{title:"Loading Project",message:"Loading project..."});const t=this.state.editor;try{const n=await this.props.api.getScene(e),r=await this.props.api.fetch(n.scene_project_url).then(e=>e.json());r.metadata&&(delete r.metadata.sceneUrl,delete r.metadata.sceneId,delete r.metadata.creatorAttribution,delete r.metadata.allowRemixing,delete r.metadata.allowPromotion),await t.init(),await t.loadProject(r),this.hideDialog()}catch(e){console.error(e),this.showDialog(Pl,{title:"Error loading project.",message:e.message||"There was an error when loading the project.",error:e})}}async importProject(e){this.setState({project:null,parentSceneId:null,templateUrl:null,onboardingContext:{enabled:!1}}),this.showDialog(Ll.a,{title:"Loading Project",message:"Loading project..."});const t=this.state.editor;try{await t.init(),await t.loadProject(e),this.hideDialog()}catch(e){console.error(e),this.showDialog(Pl,{title:"Error loading project.",message:e.message||"There was an error when loading the project.",error:e})}}async loadProject(e){this.setState({project:null,parentSceneId:null,templateUrl:null,onboardingContext:{enabled:!1}}),this.showDialog(Ll.a,{title:"Loading Project",message:"Loading project..."});const t=this.state.editor;let n;try{n=await this.props.api.getProject(e);const r=await this.props.api.fetch(n.project_url).then(e=>e.json());await t.init(),await t.loadProject(r),this.hideDialog()}catch(e){console.error(e),this.showDialog(Pl,{title:"Error loading project.",message:e.message||"There was an error when loading the project.",error:e})}finally{n&&this.setState({project:n})}}componentWillUnmount(){window.removeEventListener("resize",this.onResize);const e=this.state.editor;e.removeListener("sceneModified",this.onSceneModified),e.removeListener("saveProject",this.onSaveProject),e.removeListener("initialized",this.onEditorInitialized),e.removeListener("error",this.onEditorError),e.removeListener("projectLoaded",this.onProjectLoaded),e.dispose()}updateSetting(e,t){const n=Object.assign(this.state.settingsContext.settings,{[e]:t});localStorage.setItem("spoke-settings",JSON.stringify(n));const r=this.state.editor;r.settings=n,r.emit("settingsChanged"),this.setState({settingsContext:Yk(Yk({},this.state.settingsContext),{},{settings:n})})}async createProject(){const{editor:e,parentSceneId:t}=this.state;this.showDialog(Ll.a,{title:"Generating Project Screenshot",message:"Generating project screenshot..."}),await new Promise(e=>setTimeout(e,5));const{blob:n}=await e.takeScreenshot(512,320),r=await new Promise(t=>{this.showDialog(VL,{thumbnailUrl:URL.createObjectURL(n),initialName:e.scene.name,onConfirm:t,onCancel:t})});if(!r)return this.hideDialog(),null;const i=new AbortController;this.showDialog(Ll.a,{title:"Saving Project",message:"Saving project...",cancelable:!0,onCancel:()=>{i.abort(),this.hideDialog()}}),e.setProperty(e.scene,"name",r.name,!1),e.scene.setMetadata({name:r.name});const o=await this.props.api.createProject(e.scene,t,n,i.signal,this.showDialog,this.hideDialog);return e.sceneModified=!1,this.updateModifiedState(()=>{this.setState({creatingProject:!0,project:o},()=>{this.props.history.replace("/projects/"+o.project_id),this.setState({creatingProject:!1})})}),o}getSceneId(){const{editor:e,project:t}=this.state;return t&&t.scene&&t.scene.scene_id||e.scene.metadata&&e.scene.metadata.sceneId}render(){const{DialogComponent:e,dialogProps:t,settingsContext:n,onboardingContext:r,editor:i}=this.state,o=this.generateToolbarMenu(),a=!!this.getSceneId();return h.a.createElement(Xk,{id:"editor-container"},h.a.createElement(Mp,{value:n},h.a.createElement(Qs,{value:i},h.a.createElement(Dl,{value:this.dialogContext},h.a.createElement(qc,{value:r},h.a.createElement(b.a,{backend:J},h.a.createElement(Vk,null),h.a.createElement(uh,{menu:o,editor:i,onPublish:this.onPublishProject,isPublishedScene:a,onOpenScene:this.onOpenScene}),h.a.createElement(Kk,null,h.a.createElement(lp,{axis:"x",initialSizes:[.7,.3],onChange:this.onResize},h.a.createElement(wp,null),h.a.createElement(lp,{axis:"y",initialSizes:[.5,.5]},h.a.createElement(md,null),h.a.createElement(ep,null)))),h.a.createElement(g.a,{ariaHideApp:!1,isOpen:!!e,onRequestClose:this.hideDialog,shouldCloseOnOverlayClick:!1,className:"Modal",overlayClassName:"Overlay"},e&&h.a.createElement(e,s()({onConfirm:this.hideDialog,onCancel:this.hideDialog},t))),h.a.createElement(v.Helmet,null,h.a.createElement("title",null,`${this.state.modified?"*":""}${i.scene.name} | ${f.a.longName()}`),h.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1, user-scalable=no"})),this.state.modified&&h.a.createElement(Fk,{message:i.scene.name+" has unsaved changes, are you sure you wish to navigate away from the page?"}),r.enabled&&h.a.createElement(Dk,{onFinish:this.onFinishTutorial,onSkip:this.onSkipTutorial})))))))}}c()(Zk,"propTypes",{api:p.a.object.isRequired,history:p.a.object.isRequired,match:p.a.object.isRequired,location:p.a.object.isRequired});t.default=Object(Cp.c)(Zk)}])]);
//# sourceMappingURL=vendors~project-page-96621b2aa2d153c94071.js.map