{
  "version": 3,
  "sources": ["../../../../node_modules/@feathersjs/transport-commons/src/client.ts", "../../../../node_modules/@feathersjs/transport-commons/client.js"],
  "sourcesContent": ["/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { convert } from '@feathersjs/errors'\nimport { createDebug } from '@feathersjs/commons'\nimport { Id, NullableId, Params, ServiceInterface } from '@feathersjs/feathers'\n\nconst debug = createDebug('@feathersjs/transport-commons/client')\n\nconst namespacedEmitterMethods = [\n  'addListener',\n  'addEventListener',\n  'emit',\n  'listenerCount',\n  'listeners',\n  'on',\n  'once',\n  'prependListener',\n  'prependOnceListener',\n  'removeAllListeners',\n  'removeEventListener',\n  'removeListener'\n]\nconst otherEmitterMethods = ['eventNames', 'getMaxListeners', 'setMaxListeners']\n\nconst addEmitterMethods = (service: any) => {\n  otherEmitterMethods.forEach((method) => {\n    service[method] = function (...args: any[]) {\n      if (typeof this.connection[method] !== 'function') {\n        throw new Error(`Can not call '${method}' on the client service connection`)\n      }\n\n      return this.connection[method](...args)\n    }\n  })\n\n  // Methods that should add the namespace (service path)\n  namespacedEmitterMethods.forEach((method) => {\n    service[method] = function (name: string, ...args: any[]) {\n      if (typeof this.connection[method] !== 'function') {\n        throw new Error(`Can not call '${method}' on the client service connection`)\n      }\n\n      const eventName = `${this.path} ${name}`\n\n      debug(`Calling emitter method ${method} with ` + `namespaced event '${eventName}'`)\n\n      const result = this.connection[method](eventName, ...args)\n\n      return result === this.connection ? this : result\n    }\n  })\n}\n\ninterface ServiceOptions {\n  name: string\n  connection: any\n  method: string\n  events?: string[]\n}\n\nexport type SocketService<T = any, D = Partial<any>, P extends Params = Params> = Service<T, D, P>\n\nexport class Service<T = any, D = Partial<T>, P extends Params = Params>\n  implements ServiceInterface<T, D, P>\n{\n  events: string[]\n  path: string\n  connection: any\n  method: string\n\n  constructor(options: ServiceOptions) {\n    this.events = options.events\n    this.path = options.name\n    this.connection = options.connection\n    this.method = options.method\n\n    addEmitterMethods(this)\n  }\n\n  send<X = any>(method: string, ...args: any[]) {\n    return new Promise<X>((resolve, reject) => {\n      args.unshift(method, this.path)\n      args.push(function (error: any, data: any) {\n        return error ? reject(convert(error)) : resolve(data)\n      })\n\n      debug(`Sending socket.${this.method}`, args)\n\n      this.connection[this.method](...args)\n    })\n  }\n\n  methods(this: any, ...names: string[]) {\n    names.forEach((name) => {\n      this[name] = function (data: any, params: Params = {}) {\n        return this.send(name, data, params.query || {})\n      }\n    })\n    return this\n  }\n\n  find(params: Params = {}) {\n    return this.send<T | T[]>('find', params.query || {})\n  }\n\n  get(id: Id, params: Params = {}) {\n    return this.send<T>('get', id, params.query || {})\n  }\n\n  create(data: any, params: Params = {}) {\n    return this.send<T>('create', data, params.query || {})\n  }\n\n  update(id: Id, data: any, params: Params = {}) {\n    return this.send<T>('update', id, data, params.query || {})\n  }\n\n  patch(id: NullableId, data: any, params: Params = {}) {\n    return this.send<T | T[]>('patch', id, data, params.query || {})\n  }\n\n  remove(id: NullableId, params: Params = {}) {\n    return this.send<T | T[]>('remove', id, params.query || {})\n  }\n\n  // `off` is actually not part of the Node event emitter spec\n  // but we are adding it since everybody is expecting it because\n  // of the emitter-component Socket.io is using\n  off(name: string, ...args: any[]) {\n    if (typeof this.connection.off === 'function') {\n      const result = this.connection.off(`${this.path} ${name}`, ...args)\n\n      return result === this.connection ? this : result\n    } else if (args.length === 0) {\n      // @ts-ignore\n      return this.removeAllListeners(name)\n    }\n\n    // @ts-ignore\n    return this.removeListener(name, ...args)\n  }\n}\n", "module.exports = require('./lib/client');"],
  "mappings": ";;;;;;;;;;;;;;;;AACA,QAAA,WAAA;AACA,QAAA,YAAA;AAGA,QAAM,SAAQ,GAAA,UAAA,aAAY,sCAAsC;AAEhE,QAAM,2BAA2B;MAC/B;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;AAEF,QAAM,sBAAsB,CAAC,cAAc,mBAAmB,iBAAiB;AAE/E,QAAM,oBAAoB,CAAC,YAAgB;AACzC,0BAAoB,QAAQ,CAAC,WAAU;AACrC,gBAAQ,MAAM,IAAI,YAAa,MAAW;AACxC,cAAI,OAAO,KAAK,WAAW,MAAM,MAAM,YAAY;AACjD,kBAAM,IAAI,MAAM,iBAAiB,0CAA0C;;AAG7E,iBAAO,KAAK,WAAW,MAAM,EAAE,GAAG,IAAI;QACxC;MACF,CAAC;AAGD,+BAAyB,QAAQ,CAAC,WAAU;AAC1C,gBAAQ,MAAM,IAAI,SAAU,SAAiB,MAAW;AACtD,cAAI,OAAO,KAAK,WAAW,MAAM,MAAM,YAAY;AACjD,kBAAM,IAAI,MAAM,iBAAiB,0CAA0C;;AAG7E,gBAAM,YAAY,GAAG,KAAK,QAAQ;AAElC,gBAAM,0BAA0B,iCAAsC,YAAY;AAElF,gBAAM,SAAS,KAAK,WAAW,MAAM,EAAE,WAAW,GAAG,IAAI;AAEzD,iBAAO,WAAW,KAAK,aAAa,OAAO;QAC7C;MACF,CAAC;IACH;AAWA,QAAa,UAAb,MAAoB;MAQlB,YAAY,SAAuB;AACjC,aAAK,SAAS,QAAQ;AACtB,aAAK,OAAO,QAAQ;AACpB,aAAK,aAAa,QAAQ;AAC1B,aAAK,SAAS,QAAQ;AAEtB,0BAAkB,IAAI;MACxB;MAEA,KAAc,WAAmB,MAAW;AAC1C,eAAO,IAAI,QAAW,CAAC,SAAS,WAAU;AACxC,eAAK,QAAQ,QAAQ,KAAK,IAAI;AAC9B,eAAK,KAAK,SAAU,OAAY,MAAS;AACvC,mBAAO,QAAQ,QAAO,GAAA,SAAA,SAAQ,KAAK,CAAC,IAAI,QAAQ,IAAI;UACtD,CAAC;AAED,gBAAM,kBAAkB,KAAK,UAAU,IAAI;AAE3C,eAAK,WAAW,KAAK,MAAM,EAAE,GAAG,IAAI;QACtC,CAAC;MACH;MAEA,WAAsB,OAAe;AACnC,cAAM,QAAQ,CAAC,SAAQ;AACrB,eAAK,IAAI,IAAI,SAAU,MAAW,SAAiB,CAAA,GAAE;AACnD,mBAAO,KAAK,KAAK,MAAM,MAAM,OAAO,SAAS,CAAA,CAAE;UACjD;QACF,CAAC;AACD,eAAO;MACT;MAEA,KAAK,SAAiB,CAAA,GAAE;AACtB,eAAO,KAAK,KAAc,QAAQ,OAAO,SAAS,CAAA,CAAE;MACtD;MAEA,IAAI,IAAQ,SAAiB,CAAA,GAAE;AAC7B,eAAO,KAAK,KAAQ,OAAO,IAAI,OAAO,SAAS,CAAA,CAAE;MACnD;MAEA,OAAO,MAAW,SAAiB,CAAA,GAAE;AACnC,eAAO,KAAK,KAAQ,UAAU,MAAM,OAAO,SAAS,CAAA,CAAE;MACxD;MAEA,OAAO,IAAQ,MAAW,SAAiB,CAAA,GAAE;AAC3C,eAAO,KAAK,KAAQ,UAAU,IAAI,MAAM,OAAO,SAAS,CAAA,CAAE;MAC5D;MAEA,MAAM,IAAgB,MAAW,SAAiB,CAAA,GAAE;AAClD,eAAO,KAAK,KAAc,SAAS,IAAI,MAAM,OAAO,SAAS,CAAA,CAAE;MACjE;MAEA,OAAO,IAAgB,SAAiB,CAAA,GAAE;AACxC,eAAO,KAAK,KAAc,UAAU,IAAI,OAAO,SAAS,CAAA,CAAE;MAC5D;;;;MAKA,IAAI,SAAiB,MAAW;AAC9B,YAAI,OAAO,KAAK,WAAW,QAAQ,YAAY;AAC7C,gBAAM,SAAS,KAAK,WAAW,IAAI,GAAG,KAAK,QAAQ,QAAQ,GAAG,IAAI;AAElE,iBAAO,WAAW,KAAK,aAAa,OAAO;mBAClC,KAAK,WAAW,GAAG;AAE5B,iBAAO,KAAK,mBAAmB,IAAI;;AAIrC,eAAO,KAAK,eAAe,MAAM,GAAG,IAAI;MAC1C;;AA9EF,YAAA,UAAA;;;;;AC7DA,IAAAA,kBAAA;AAAA;AAAA,WAAO,UAAU;AAAA;AAAA;",
  "names": ["require_client"]
}
