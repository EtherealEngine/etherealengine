{
  "version": 3,
  "sources": ["../../../../node_modules/@reactflow/node-toolbar/dist/esm/index.js"],
  "sourcesContent": ["import { jsx } from 'react/jsx-runtime';\nimport { useCallback } from 'react';\nimport { useStore, useNodeId, getRectOfNodes, internalsSymbol, Position } from '@reactflow/core';\nimport cc from 'classcat';\nimport { shallow } from 'zustand/shallow';\nimport { createPortal } from 'react-dom';\n\nconst selector = (state) => state.domNode?.querySelector('.react-flow__renderer');\nfunction NodeToolbarPortal({ children }) {\n    const wrapperRef = useStore(selector);\n    if (!wrapperRef) {\n        return null;\n    }\n    return createPortal(children, wrapperRef);\n}\n\nconst nodeEqualityFn = (a, b) => a?.positionAbsolute?.x === b?.positionAbsolute?.x &&\n    a?.positionAbsolute?.y === b?.positionAbsolute?.y &&\n    a?.width === b?.width &&\n    a?.height === b?.height &&\n    a?.selected === b?.selected &&\n    a?.[internalsSymbol]?.z === b?.[internalsSymbol]?.z;\nconst nodesEqualityFn = (a, b) => {\n    return a.length === b.length && a.every((node, i) => nodeEqualityFn(node, b[i]));\n};\nconst storeSelector = (state) => ({\n    transform: state.transform,\n    nodeOrigin: state.nodeOrigin,\n    selectedNodesCount: state.getNodes().filter((node) => node.selected).length,\n});\nfunction getTransform(nodeRect, transform, position, offset) {\n    // position === Position.Top\n    let xPos = (nodeRect.x + nodeRect.width / 2) * transform[2] + transform[0];\n    let yPos = nodeRect.y * transform[2] + transform[1] - offset;\n    let xShift = -50;\n    let yShift = -100;\n    switch (position) {\n        case Position.Right:\n            xPos = (nodeRect.x + nodeRect.width) * transform[2] + transform[0] + offset;\n            yPos = (nodeRect.y + nodeRect.height / 2) * transform[2] + transform[1];\n            xShift = 0;\n            yShift = -50;\n            break;\n        case Position.Bottom:\n            yPos = (nodeRect.y + nodeRect.height) * transform[2] + transform[1] + offset;\n            yShift = 0;\n            break;\n        case Position.Left:\n            xPos = nodeRect.x * transform[2] + transform[0] - offset;\n            yPos = (nodeRect.y + nodeRect.height / 2) * transform[2] + transform[1];\n            xShift = -100;\n            yShift = -50;\n            break;\n    }\n    return `translate(${xPos}px, ${yPos}px) translate(${xShift}%, ${yShift}%)`;\n}\nfunction NodeToolbar({ nodeId, children, className, style, isVisible, position = Position.Top, offset = 10, ...rest }) {\n    const contextNodeId = useNodeId();\n    const nodesSelector = useCallback((state) => {\n        const nodeIds = Array.isArray(nodeId) ? nodeId : [nodeId || contextNodeId || ''];\n        return nodeIds.reduce((acc, id) => {\n            const node = state.nodeInternals.get(id);\n            if (node) {\n                acc.push(node);\n            }\n            return acc;\n        }, []);\n    }, [nodeId, contextNodeId]);\n    const nodes = useStore(nodesSelector, nodesEqualityFn);\n    const { transform, nodeOrigin, selectedNodesCount } = useStore(storeSelector, shallow);\n    const isActive = typeof isVisible === 'boolean' ? isVisible : nodes.length === 1 && nodes[0].selected && selectedNodesCount === 1;\n    if (!isActive || !nodes.length) {\n        return null;\n    }\n    const nodeRect = getRectOfNodes(nodes, nodeOrigin);\n    const zIndex = Math.max(...nodes.map((node) => (node[internalsSymbol]?.z || 1) + 1));\n    const wrapperStyle = {\n        position: 'absolute',\n        transform: getTransform(nodeRect, transform, position, offset),\n        zIndex,\n        ...style,\n    };\n    return (jsx(NodeToolbarPortal, { children: jsx(\"div\", { style: wrapperStyle, className: cc(['react-flow__node-toolbar', className]), ...rest, children: children }) }));\n}\n\nexport { NodeToolbar };\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,yBAAoB;AACpB,mBAA4B;AAI5B,uBAA6B;AAE7B,IAAM,WAAW,CAAC,UAAU,MAAM,SAAS,cAAc,uBAAuB;AAChF,SAAS,kBAAkB,EAAE,SAAS,GAAG;AACrC,QAAM,aAAa,SAAS,QAAQ;AACpC,MAAI,CAAC,YAAY;AACb,WAAO;AAAA,EACX;AACA,aAAO,+BAAa,UAAU,UAAU;AAC5C;AAEA,IAAM,iBAAiB,CAAC,GAAG,MAAM,GAAG,kBAAkB,MAAM,GAAG,kBAAkB,KAC7E,GAAG,kBAAkB,MAAM,GAAG,kBAAkB,KAChD,GAAG,UAAU,GAAG,SAChB,GAAG,WAAW,GAAG,UACjB,GAAG,aAAa,GAAG,YACnB,IAAI,eAAe,GAAG,MAAM,IAAI,eAAe,GAAG;AACtD,IAAM,kBAAkB,CAAC,GAAG,MAAM;AAC9B,SAAO,EAAE,WAAW,EAAE,UAAU,EAAE,MAAM,CAAC,MAAM,MAAM,eAAe,MAAM,EAAE,CAAC,CAAC,CAAC;AACnF;AACA,IAAM,gBAAgB,CAAC,WAAW;AAAA,EAC9B,WAAW,MAAM;AAAA,EACjB,YAAY,MAAM;AAAA,EAClB,oBAAoB,MAAM,SAAS,EAAE,OAAO,CAAC,SAAS,KAAK,QAAQ,EAAE;AACzE;AACA,SAAS,aAAa,UAAU,WAAW,UAAU,QAAQ;AAEzD,MAAI,QAAQ,SAAS,IAAI,SAAS,QAAQ,KAAK,UAAU,CAAC,IAAI,UAAU,CAAC;AACzE,MAAI,OAAO,SAAS,IAAI,UAAU,CAAC,IAAI,UAAU,CAAC,IAAI;AACtD,MAAI,SAAS;AACb,MAAI,SAAS;AACb,UAAQ,UAAU;AAAA,IACd,KAAK,SAAS;AACV,cAAQ,SAAS,IAAI,SAAS,SAAS,UAAU,CAAC,IAAI,UAAU,CAAC,IAAI;AACrE,cAAQ,SAAS,IAAI,SAAS,SAAS,KAAK,UAAU,CAAC,IAAI,UAAU,CAAC;AACtE,eAAS;AACT,eAAS;AACT;AAAA,IACJ,KAAK,SAAS;AACV,cAAQ,SAAS,IAAI,SAAS,UAAU,UAAU,CAAC,IAAI,UAAU,CAAC,IAAI;AACtE,eAAS;AACT;AAAA,IACJ,KAAK,SAAS;AACV,aAAO,SAAS,IAAI,UAAU,CAAC,IAAI,UAAU,CAAC,IAAI;AAClD,cAAQ,SAAS,IAAI,SAAS,SAAS,KAAK,UAAU,CAAC,IAAI,UAAU,CAAC;AACtE,eAAS;AACT,eAAS;AACT;AAAA,EACR;AACA,SAAO,aAAa,WAAW,qBAAqB,YAAY;AACpE;AACA,SAAS,YAAY,EAAE,QAAQ,UAAU,WAAW,OAAO,WAAW,WAAW,SAAS,KAAK,SAAS,IAAI,GAAG,KAAK,GAAG;AACnH,QAAM,gBAAgB,UAAU;AAChC,QAAM,oBAAgB,0BAAY,CAAC,UAAU;AACzC,UAAM,UAAU,MAAM,QAAQ,MAAM,IAAI,SAAS,CAAC,UAAU,iBAAiB,EAAE;AAC/E,WAAO,QAAQ,OAAO,CAAC,KAAK,OAAO;AAC/B,YAAM,OAAO,MAAM,cAAc,IAAI,EAAE;AACvC,UAAI,MAAM;AACN,YAAI,KAAK,IAAI;AAAA,MACjB;AACA,aAAO;AAAA,IACX,GAAG,CAAC,CAAC;AAAA,EACT,GAAG,CAAC,QAAQ,aAAa,CAAC;AAC1B,QAAM,QAAQ,SAAS,eAAe,eAAe;AACrD,QAAM,EAAE,WAAW,YAAY,mBAAmB,IAAI,SAAS,eAAe,OAAO;AACrF,QAAM,WAAW,OAAO,cAAc,YAAY,YAAY,MAAM,WAAW,KAAK,MAAM,CAAC,EAAE,YAAY,uBAAuB;AAChI,MAAI,CAAC,YAAY,CAAC,MAAM,QAAQ;AAC5B,WAAO;AAAA,EACX;AACA,QAAM,WAAW,eAAe,OAAO,UAAU;AACjD,QAAM,SAAS,KAAK,IAAI,GAAG,MAAM,IAAI,CAAC,UAAU,KAAK,eAAe,GAAG,KAAK,KAAK,CAAC,CAAC;AACnF,QAAM,eAAe;AAAA,IACjB,UAAU;AAAA,IACV,WAAW,aAAa,UAAU,WAAW,UAAU,MAAM;AAAA,IAC7D;AAAA,IACA,GAAG;AAAA,EACP;AACA,aAAQ,wBAAI,mBAAmB,EAAE,cAAU,wBAAI,OAAO,EAAE,OAAO,cAAc,WAAW,GAAG,CAAC,4BAA4B,SAAS,CAAC,GAAG,GAAG,MAAM,SAAmB,CAAC,EAAE,CAAC;AACzK;",
  "names": []
}
