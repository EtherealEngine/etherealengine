import{N as v,a as m}from"./AuthService.6db25508.js";import{E as d,d as g,i as A,q as R,g as f,h as b}from"./avatarFunctions.c7a0e273.js";import{T as k}from"./SystemUpdateType.4e88f289.js";import{A as q,X as I,V as P}from"./[projectId].d5e44847.js";import{W as O}from"./networkSchema.bc1be026.js";import{i as T}from"./mathUtils.88086a33.js";import{X as j}from"./XRHandsInputComponent.9ef816f1.js";import"./AlertService.bfed2141.js";import"./index.0040ebb6.js";import"./vendor.c8b8cc93.js";import"./_app.009e96ac.js";import"./feathers.081246a7.js";import"./three.module.0404e109.js";import"./upload.38e3baaf.js";import"./index.9af95596.js";function u(o,e){if(o.length!==e.length)return!1;for(let n=0;n<o.length;n++)if(o[n]!==e[n])return!1;return!0}const x=g([m,k]),E=A?g([q,I]):g([I]),V=A?g([q,j]):g([j]);function S(o,e,n){for(let t=0;t<o.pose.length;t++)if(o.pose[t].networkId===e)return!!u(o.pose[t].angularVelocity,n);return!1}function H(o,e,n,t,i){i===void 0&&(i=[0]);for(let s=0;s<o.pose.length;s++)if(o.pose[s].networkId===e)return!!(u(o.pose[s].position,n)&&u(o.pose[s].rotation,t)&&u(o.pose[s].linearVelocity,i));return!1}function X(o,e,n,t,i,s,c,a){for(let r=0;r<o.ikPose.length;r++)if(o.ikPose[r].networkId===e)return!!(u(o.ikPose[r].headPosePosition,n)&&u(o.ikPose[r].headPoseRotation,t)&&u(o.ikPose[r].leftPosePosition,i)&&u(o.ikPose[r].leftPoseRotation,s)&&u(o.ikPose[r].rightPosePosition,c)&&u(o.ikPose[r].rightPoseRotation,a));return!1}const $=o=>{const{incomingActions:e,outgoingActions:n}=o;if(o.isHosting)for(const t of e)t.$from!==d.userId&&n.add(t);return e.clear(),o},D=o=>{const{incomingActions:e,outgoingActions:n}=o;for(const t of n)t.$from=t.$from??d.userId,t.$from===d.userId&&t.$to==="local"&&(e.add(t),n.delete(t)),o.isHosting&&t.$from===d.userId&&e.add(t);return o},U=R($,D),F=o=>{const{outgoingNetworkState:e,previousNetworkState:n}=o,t=x(o);for(let i=0;i<t.length;i++){const s=t[i],c=f(s,m),a=f(s,k);let r;if(b(s,P)){const l=f(s,P);T(l.velocity)||S(n,c.networkId,l.velocity)?r=[0]:r=l.velocity.toArray()}(n===void 0||!H(n,c.networkId,a.position.toArray(),a.rotation.toArray(),r))&&e.pose.push({networkId:c.networkId,position:a.position.toArray(),rotation:a.rotation.toArray(),linearVelocity:r!==void 0?r:[0],angularVelocity:[0]})}return o},Q=o=>{const{outgoingNetworkState:e,previousNetworkState:n}=o,t=f(o.localClientEntity,m);if(A&&t){const i=f(o.localClientEntity,k);let s;if(b(o.localClientEntity,P)){const c=f(o.localClientEntity,P);T(c.velocity)||S(n,o.localClientEntity,c.velocity)?s=[0]:s=c.velocity.toArray()}(n===void 0||!H(n,t.networkId,i.position.toArray(),i.rotation.toArray(),s))&&e.pose.push({networkId:t.networkId,position:i.position.toArray(),rotation:i.rotation.toArray(),linearVelocity:s!==void 0?s:[0],angularVelocity:[0]})}return o},ao=o=>{const{outgoingNetworkState:e,previousNetworkState:n}=o,t=E(o);for(let i=0;i<t.length;i++){const s=t[i],{networkId:c}=f(s,m),a=f(s,I),r=a.head.position.toArray(),l=a.head.quaternion.toArray(),p=a.controllerLeft.position.toArray(),y=a.controllerLeft.quaternion.toArray(),h=a.controllerRight.position.toArray(),C=a.controllerRight.quaternion.toArray();(n===void 0||!X(n,c,r,l,p,y,h,C))&&e.ikPose.push({networkId:c,headPosePosition:r,headPoseRotation:l,leftPosePosition:p,leftPoseRotation:y,rightPosePosition:h,rightPoseRotation:C})}return o},N=o=>{const{outgoingNetworkState:e}=o;for(const n of V(o)){const{networkId:t}=f(n,m),i=f(n,j),s=[{joints:[]},{joints:[]}];for(let c of i.hands){const a=c.joints;if(!a)continue;const r=s[c.userData.handedness=="left"?0:1];for(const[l,p]of Object.entries(a)){const y=p.position.toArray(),h=p.quaternion.toArray();r.joints.push({key:l,position:y,rotation:h})}}e.handsPose.push({networkId:t,hands:s})}return o},B=o=>(o.previousNetworkState=o.outgoingNetworkState,o.outgoingNetworkState={tick:o.fixedTick,time:Date.now(),pose:[],ikPose:[],handsPose:[]},o),L=R(B,F,Q,N),M=o=>e=>{const{outgoingActions:n}=e;return o.sendActions(n),n.clear(),e},W=o=>e=>{o.sendData(e)};async function co(o){const e=M(v.instance.transport),n=W(v.instance.transport);return()=>{U(o);try{e(o)}catch(t){console.error(t)}if(!d.offlineMode){L(o);try{const t=O.toBuffer(o.outgoingNetworkState);n(t)}catch(t){console.error(t)}}}}export{co as default,$ as forwardIncomingActionsFromOthersIfHost,L as queueAllOutgoingPoses,ao as queueUnchangedIkPoses,F as queueUnchangedPoses,Q as queueUnchangedPosesForClient,N as queueXRHandPoses,U as rerouteActions,D as rerouteOutgoingActionsBoundForSelf,B as resetNetworkState};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT3V0Z29pbmdOZXR3b3JrU3lzdGVtLjI1YTNkM2E2LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9jb21tb24vc3JjL3V0aWxzL21pc2NVdGlscy50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvbmV0d29ya2luZy9zeXN0ZW1zL091dGdvaW5nTmV0d29ya1N5c3RlbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gd2FpdChtczogbnVtYmVyKTogdm9pZCB7XG4gIGNvbnN0IGRhdGUgPSBEYXRlLm5vdygpXG4gIGxldCBjdXJyZW50RGF0ZTogYW55ID0gbnVsbCFcbiAgZG8ge1xuICAgIGN1cnJlbnREYXRlID0gRGF0ZS5ub3coKVxuICB9IHdoaWxlIChjdXJyZW50RGF0ZSAtIGRhdGUgPCBtcylcbn1cbmV4cG9ydCBmdW5jdGlvbiB3YWl0UyhzZWNvbmRzOiBudW1iZXIpOiB2b2lkIHtcbiAgd2FpdChzZWNvbmRzICogMTAwMClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlOiBzdHJpbmcgfCBudW1iZXIpOiBib29sZWFuIHtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgdmFsdWUgIT09ICcnICYmICFpc05hTihOdW1iZXIodmFsdWUudG9TdHJpbmcoKSkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21iaW5lKGZpcnN0LCBzZWNvbmQsIHRoaXJkKSB7XG4gIGNvbnN0IHJlczogYW55W10gPSBbXVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZmlyc3QubGVuZ3RoOyBpKyspIHJlcy5wdXNoKGZpcnN0W2ldKVxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNlY29uZC5sZW5ndGg7IGkrKykgcmVzLnB1c2goc2Vjb25kW2ldKVxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXJkLmxlbmd0aDsgaSsrKSByZXMucHVzaCh0aGlyZFtpXSlcblxuICByZXR1cm4gcmVzXG59XG5leHBvcnQgZnVuY3Rpb24gY29tYmluZUFycmF5cyhhcnJheXM6IFtbXV0pIHtcbiAgY29uc3QgcmVzID0gW11cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5cy5sZW5ndGg7IGkrKykge1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgYXJyYXlzW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICByZXMucHVzaChhcnJheXNbaV1bal0pXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlzQXJlRXF1YWwoYXJyMTogYW55W10sIGFycjI6IGFueVtdKTogYm9vbGVhbiB7XG4gIGlmIChhcnIxLmxlbmd0aCAhPT0gYXJyMi5sZW5ndGgpIHJldHVybiBmYWxzZVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyMS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChhcnIxW2ldICE9PSBhcnIyW2ldKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuIiwiaW1wb3J0IHsgTmV0d29ya09iamVjdENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvTmV0d29ya09iamVjdENvbXBvbmVudCdcbmltcG9ydCB7IGRlZmluZVF1ZXJ5LCBnZXRDb21wb25lbnQsIGhhc0NvbXBvbmVudCB9IGZyb20gJy4uLy4uL2Vjcy9mdW5jdGlvbnMvQ29tcG9uZW50RnVuY3Rpb25zJ1xuaW1wb3J0IHsgTmV0d29yayB9IGZyb20gJy4uL2NsYXNzZXMvTmV0d29yaydcbmltcG9ydCB7IFdvcmxkIH0gZnJvbSAnLi4vLi4vZWNzL2NsYXNzZXMvV29ybGQnXG5pbXBvcnQgeyBUcmFuc2Zvcm1Db21wb25lbnQgfSBmcm9tICcuLi8uLi90cmFuc2Zvcm0vY29tcG9uZW50cy9UcmFuc2Zvcm1Db21wb25lbnQnXG5pbXBvcnQgeyBYUklucHV0U291cmNlQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vYXZhdGFyL2NvbXBvbmVudHMvWFJJbnB1dFNvdXJjZUNvbXBvbmVudCdcbmltcG9ydCB7IFdvcmxkU3RhdGVJbnRlcmZhY2UsIFdvcmxkU3RhdGVNb2RlbCB9IGZyb20gJy4uL3NjaGVtYS9uZXR3b3JrU2NoZW1hJ1xuaW1wb3J0IHsgQXZhdGFyQ29udHJvbGxlckNvbXBvbmVudCB9IGZyb20gJy4uLy4uL2F2YXRhci9jb21wb25lbnRzL0F2YXRhckNvbnRyb2xsZXJDb21wb25lbnQnXG5pbXBvcnQgeyBpc0NsaWVudCB9IGZyb20gJy4uLy4uL2NvbW1vbi9mdW5jdGlvbnMvaXNDbGllbnQnXG5pbXBvcnQgeyBFbmdpbmUgfSBmcm9tICcuLi8uLi9lY3MvY2xhc3Nlcy9FbmdpbmUnXG5pbXBvcnQgeyBTeXN0ZW0gfSBmcm9tICcuLi8uLi9lY3MvY2xhc3Nlcy9TeXN0ZW0nXG5pbXBvcnQgeyBWZWxvY2l0eUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3BoeXNpY3MvY29tcG9uZW50cy9WZWxvY2l0eUNvbXBvbmVudCdcbmltcG9ydCB7IGlzWmVybyB9IGZyb20gJ0B4cmVuZ2luZS9jb21tb24vc3JjL3V0aWxzL21hdGhVdGlscydcbmltcG9ydCB7IGFycmF5c0FyZUVxdWFsIH0gZnJvbSAnQHhyZW5naW5lL2NvbW1vbi9zcmMvdXRpbHMvbWlzY1V0aWxzJ1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9BY3Rpb24nXG5pbXBvcnQgeyBwaXBlIH0gZnJvbSAnYml0ZWNzJ1xuaW1wb3J0IHsgWFJIYW5kc0lucHV0Q29tcG9uZW50IH0gZnJvbSAnLi4vLi4veHIvY29tcG9uZW50cy9YUkhhbmRzSW5wdXRDb21wb25lbnQnXG5pbXBvcnQgeyBOZXR3b3JrVHJhbnNwb3J0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9OZXR3b3JrVHJhbnNwb3J0J1xuaW1wb3J0IHsgTWVzaCB9IGZyb20gJ3RocmVlJ1xuXG4vKioqKioqKioqKipcbiAqIFFVRVJJRVMgKlxuICoqKioqKioqKiovXG5cbmNvbnN0IG5ldHdvcmtUcmFuc2Zvcm1zUXVlcnkgPVxuICAvLyBpc0NsaWVudFxuICAvLyAgID8gZGVmaW5lUXVlcnkoW05ldHdvcmtPYmplY3RPd25lckNvbXBvbmVudCwgTmV0d29ya09iamVjdENvbXBvbmVudCwgVHJhbnNmb3JtQ29tcG9uZW50XSkgOlxuICBkZWZpbmVRdWVyeShbTmV0d29ya09iamVjdENvbXBvbmVudCwgVHJhbnNmb3JtQ29tcG9uZW50XSlcblxuY29uc3QgaWtUcmFuc2Zvcm1zUXVlcnkgPSBpc0NsaWVudFxuICA/IGRlZmluZVF1ZXJ5KFtBdmF0YXJDb250cm9sbGVyQ29tcG9uZW50LCBYUklucHV0U291cmNlQ29tcG9uZW50XSlcbiAgOiBkZWZpbmVRdWVyeShbWFJJbnB1dFNvdXJjZUNvbXBvbmVudF0pXG5cbmNvbnN0IHhySGFuZHNRdWVyeSA9IGlzQ2xpZW50XG4gID8gZGVmaW5lUXVlcnkoW0F2YXRhckNvbnRyb2xsZXJDb21wb25lbnQsIFhSSGFuZHNJbnB1dENvbXBvbmVudF0pXG4gIDogZGVmaW5lUXVlcnkoW1hSSGFuZHNJbnB1dENvbXBvbmVudF0pXG5cbi8qKioqKioqKioqKioqXG4gKiBVVElMSVRJRVMgKlxuICoqKioqKioqKioqKi9cblxuZnVuY3Rpb24gdmVsb2NpdHlJc1RoZVNhbWUocHJldmlvdXNOZXR3b3JrU3RhdGUsIG5ldElkLCB2ZWwpOiBib29sZWFuIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2aW91c05ldHdvcmtTdGF0ZS5wb3NlLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHByZXZpb3VzTmV0d29ya1N0YXRlLnBvc2VbaV0ubmV0d29ya0lkID09PSBuZXRJZCkge1xuICAgICAgaWYgKGFycmF5c0FyZUVxdWFsKHByZXZpb3VzTmV0d29ya1N0YXRlLnBvc2VbaV0uYW5ndWxhclZlbG9jaXR5LCB2ZWwpKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2Vcbn1cbmZ1bmN0aW9uIHRyYW5zZm9ybUlzVGhlU2FtZShwcmV2aW91c05ldHdvcmtTdGF0ZSwgbmV0SWQsIHBvcywgcm90LCB2ZWwpOiBib29sZWFuIHtcbiAgaWYgKHZlbCA9PT0gdW5kZWZpbmVkKSB2ZWwgPSBbMF1cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2aW91c05ldHdvcmtTdGF0ZS5wb3NlLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHByZXZpb3VzTmV0d29ya1N0YXRlLnBvc2VbaV0ubmV0d29ya0lkID09PSBuZXRJZCkge1xuICAgICAgaWYgKFxuICAgICAgICBhcnJheXNBcmVFcXVhbChwcmV2aW91c05ldHdvcmtTdGF0ZS5wb3NlW2ldLnBvc2l0aW9uLCBwb3MpICYmXG4gICAgICAgIGFycmF5c0FyZUVxdWFsKHByZXZpb3VzTmV0d29ya1N0YXRlLnBvc2VbaV0ucm90YXRpb24sIHJvdCkgJiZcbiAgICAgICAgYXJyYXlzQXJlRXF1YWwocHJldmlvdXNOZXR3b3JrU3RhdGUucG9zZVtpXS5saW5lYXJWZWxvY2l0eSwgdmVsKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2Vcbn1cbmZ1bmN0aW9uIGlrUG9zZUlzVGhlU2FtZShwcmV2aW91c05ldHdvcmtTdGF0ZSwgbmV0SWQsIGhwLCBociwgbHAsIGxyLCBycCwgcnIpOiBib29sZWFuIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2aW91c05ldHdvcmtTdGF0ZS5pa1Bvc2UubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAocHJldmlvdXNOZXR3b3JrU3RhdGUuaWtQb3NlW2ldLm5ldHdvcmtJZCA9PT0gbmV0SWQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgYXJyYXlzQXJlRXF1YWwocHJldmlvdXNOZXR3b3JrU3RhdGUuaWtQb3NlW2ldLmhlYWRQb3NlUG9zaXRpb24sIGhwKSAmJlxuICAgICAgICBhcnJheXNBcmVFcXVhbChwcmV2aW91c05ldHdvcmtTdGF0ZS5pa1Bvc2VbaV0uaGVhZFBvc2VSb3RhdGlvbiwgaHIpICYmXG4gICAgICAgIGFycmF5c0FyZUVxdWFsKHByZXZpb3VzTmV0d29ya1N0YXRlLmlrUG9zZVtpXS5sZWZ0UG9zZVBvc2l0aW9uLCBscCkgJiZcbiAgICAgICAgYXJyYXlzQXJlRXF1YWwocHJldmlvdXNOZXR3b3JrU3RhdGUuaWtQb3NlW2ldLmxlZnRQb3NlUm90YXRpb24sIGxyKSAmJlxuICAgICAgICBhcnJheXNBcmVFcXVhbChwcmV2aW91c05ldHdvcmtTdGF0ZS5pa1Bvc2VbaV0ucmlnaHRQb3NlUG9zaXRpb24sIHJwKSAmJlxuICAgICAgICBhcnJheXNBcmVFcXVhbChwcmV2aW91c05ldHdvcmtTdGF0ZS5pa1Bvc2VbaV0ucmlnaHRQb3NlUm90YXRpb24sIHJyKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2Vcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKlxuICogQUNUSU9OIFBSRVBST0NFU1NJTkcgKlxuICoqKioqKioqKioqKioqKioqKioqKioqL1xuXG5leHBvcnQgY29uc3QgZm9yd2FyZEluY29taW5nQWN0aW9uc0Zyb21PdGhlcnNJZkhvc3QgPSAod29ybGQ6IFdvcmxkKSA9PiB7XG4gIGNvbnN0IHsgaW5jb21pbmdBY3Rpb25zLCBvdXRnb2luZ0FjdGlvbnMgfSA9IHdvcmxkXG5cbiAgaWYgKHdvcmxkLmlzSG9zdGluZykge1xuICAgIGZvciAoY29uc3QgaW5jb21pbmcgb2YgaW5jb21pbmdBY3Rpb25zKSB7XG4gICAgICAvLyBpZiBpbmNvbWluZyBhY3Rpb24gaXMgbm90IGZyb20gdGhpcyBjbGllbnRcbiAgICAgIGlmIChpbmNvbWluZy4kZnJvbSAhPT0gRW5naW5lLnVzZXJJZCkge1xuICAgICAgICAvLyBmb3J3YXJkIGl0IG91dFxuICAgICAgICBvdXRnb2luZ0FjdGlvbnMuYWRkKGluY29taW5nKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGluY29taW5nQWN0aW9ucy5jbGVhcigpXG5cbiAgcmV0dXJuIHdvcmxkXG59XG5cbmV4cG9ydCBjb25zdCByZXJvdXRlT3V0Z29pbmdBY3Rpb25zQm91bmRGb3JTZWxmID0gKHdvcmxkOiBXb3JsZCkgPT4ge1xuICBjb25zdCB7IGluY29taW5nQWN0aW9ucywgb3V0Z29pbmdBY3Rpb25zIH0gPSB3b3JsZFxuXG4gIGZvciAoY29uc3Qgb3V0IG9mIG91dGdvaW5nQWN0aW9ucykge1xuICAgIC8vIGlmIGl0J3MgYSBmb3J3YXJkZWQgYWN0aW9uLCB1c2UgZXhpc3RpbmcgJGZyb20gaWRcbiAgICAvLyBpZiBub3QsIHVzZSB0aGlzIGNsaWVudCdzIHVzZXJJZFxuICAgIG91dC4kZnJvbSA9IG91dC4kZnJvbSA/PyBFbmdpbmUudXNlcklkXG4gICAgLy8gaWYgYWN0aW9uIGlzIGZyb20gdGhpcyBjbGllbnQgYW5kIGdvaW5nIHRvIHRoaXMgY2xpZW50XG4gICAgaWYgKG91dC4kZnJvbSA9PT0gRW5naW5lLnVzZXJJZCAmJiBvdXQuJHRvID09PSAnbG9jYWwnKSB7XG4gICAgICAvLyBhZGQgYWN0aW9uIHRvIGluY29taW5nIGFjdGlvbiBhbmQgcmVtb3ZlIGZyb20gb3V0Z29pbmcgYWN0aW9uc1xuICAgICAgLy8gdGhpcyBwcmV2ZW50cyB0aGUgYWN0aW9uIGZyb20gbGVhdmluZyB0aGlzIGNsaWVudCBhbmQgYXBwbHlpbmcgaXRzZWxmIHRvIG90aGVyIGNvbm5lY3RlZCBjbGllbnRzJyBzdGF0ZVxuICAgICAgaW5jb21pbmdBY3Rpb25zLmFkZChvdXQgYXMgUmVxdWlyZWQ8QWN0aW9uPilcbiAgICAgIG91dGdvaW5nQWN0aW9ucy5kZWxldGUob3V0KVxuICAgIH1cbiAgICAvLyBpZiBjbGllbnQgaXMgaG9zdGluZyBhbmQgYWN0aW9uIGlzIGZyb20gdGhpcyBjbGllbnRcbiAgICBpZiAod29ybGQuaXNIb3N0aW5nICYmIG91dC4kZnJvbSA9PT0gRW5naW5lLnVzZXJJZCkge1xuICAgICAgLy8gYWRkIG91dGdvaW5nIGFjdGlvbiB0byBpbmNvbWluZyBhY3Rpb24sIGJ1dCBkbyBub3QgcmVtb3ZlIGZyb20gb3V0Z29pbmcgYWN0aW9uc1xuICAgICAgLy8gdGhpcyBhcHBsaWVzIHRoZSBhY3Rpb24gdG8gYm90aCB0aGlzIGhvc3QgYW5kIG90aGVyIGNvbm5lY3RlZCBjbGllbnRzJyBzdGF0ZVxuICAgICAgaW5jb21pbmdBY3Rpb25zLmFkZChvdXQgYXMgUmVxdWlyZWQ8QWN0aW9uPilcbiAgICB9XG4gIH1cblxuICByZXR1cm4gd29ybGRcbn1cblxuLy8gcHJldHRpZXItaWdub3JlXG5leHBvcnQgY29uc3QgcmVyb3V0ZUFjdGlvbnMgPSBwaXBlKFxuICBmb3J3YXJkSW5jb21pbmdBY3Rpb25zRnJvbU90aGVyc0lmSG9zdCxcbiAgcmVyb3V0ZU91dGdvaW5nQWN0aW9uc0JvdW5kRm9yU2VsZixcbilcblxuLyoqKioqKioqKioqKioqKlxuICogREFUQSBRVUVJTkcgKlxuICoqKioqKioqKioqKioqL1xuXG5leHBvcnQgY29uc3QgcXVldWVVbmNoYW5nZWRQb3NlcyA9ICh3b3JsZDogV29ybGQpID0+IHtcbiAgY29uc3QgeyBvdXRnb2luZ05ldHdvcmtTdGF0ZSwgcHJldmlvdXNOZXR3b3JrU3RhdGUgfSA9IHdvcmxkXG5cbiAgY29uc3QgZW50cyA9IG5ldHdvcmtUcmFuc2Zvcm1zUXVlcnkod29ybGQpXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGVudGl0eSA9IGVudHNbaV1cbiAgICBjb25zdCBuZXR3b3JrT2JqZWN0ID0gZ2V0Q29tcG9uZW50KGVudGl0eSwgTmV0d29ya09iamVjdENvbXBvbmVudClcblxuICAgIGNvbnN0IHRyYW5zZm9ybUNvbXBvbmVudCA9IGdldENvbXBvbmVudChlbnRpdHksIFRyYW5zZm9ybUNvbXBvbmVudClcblxuICAgIGxldCB2ZWwgPSB1bmRlZmluZWQhIGFzIG51bWJlcltdXG4gICAgbGV0IGFuZ1ZlbCA9IHVuZGVmaW5lZFxuICAgIGlmIChoYXNDb21wb25lbnQoZW50aXR5LCBWZWxvY2l0eUNvbXBvbmVudCkpIHtcbiAgICAgIGNvbnN0IHZlbEMgPSBnZXRDb21wb25lbnQoZW50aXR5LCBWZWxvY2l0eUNvbXBvbmVudClcbiAgICAgIGlmIChpc1plcm8odmVsQy52ZWxvY2l0eSkgfHwgdmVsb2NpdHlJc1RoZVNhbWUocHJldmlvdXNOZXR3b3JrU3RhdGUsIG5ldHdvcmtPYmplY3QubmV0d29ya0lkLCB2ZWxDLnZlbG9jaXR5KSlcbiAgICAgICAgdmVsID0gWzBdXG4gICAgICBlbHNlIHZlbCA9IHZlbEMudmVsb2NpdHkudG9BcnJheSgpXG4gICAgfVxuICAgIC8vIGNvbnN0IG5ldHdvcmtPYmplY3RPd25lckNvbXBvbmVudCA9IGdldENvbXBvbmVudChlbnRpdHksIE5ldHdvcmtPYmplY3RPd25lckNvbXBvbmVudClcbiAgICAvLyBuZXR3b3JrT2JqZWN0T3duZXJDb21wb25lbnQgJiYgY29uc29sZS5sb2coJ291dGdvaW5nJywgZ2V0Q29tcG9uZW50KGVudGl0eSwgTmFtZUNvbXBvbmVudCkubmFtZSwgdHJhbnNmb3JtQ29tcG9uZW50LnBvc2l0aW9uKVxuICAgIC8vIGNvbnNvbGUubG9nKCdvdXRnb2luZycsIGdldENvbXBvbmVudChlbnRpdHksIE5hbWVDb21wb25lbnQpLm5hbWUsIHRyYW5zZm9ybUNvbXBvbmVudC5wb3NpdGlvbi50b0FycmF5KCkuY29uY2F0KHRyYW5zZm9ybUNvbXBvbmVudC5yb3RhdGlvbi50b0FycmF5KCkpKVxuICAgIGlmIChcbiAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIHByZXZpb3VzIHN0YXRlIChmaXJzdCBmcmFtZSlcbiAgICAgIHByZXZpb3VzTmV0d29ya1N0YXRlID09PSB1bmRlZmluZWQgfHxcbiAgICAgIC8vIG9yIGlmIHRoZSB0cmFuc2Zvcm0gaXMgbm90IHRoZSBzYW1lIGFzIGxhc3QgZnJhbWVcbiAgICAgICF0cmFuc2Zvcm1Jc1RoZVNhbWUoXG4gICAgICAgIHByZXZpb3VzTmV0d29ya1N0YXRlLFxuICAgICAgICBuZXR3b3JrT2JqZWN0Lm5ldHdvcmtJZCxcbiAgICAgICAgdHJhbnNmb3JtQ29tcG9uZW50LnBvc2l0aW9uLnRvQXJyYXkoKSxcbiAgICAgICAgdHJhbnNmb3JtQ29tcG9uZW50LnJvdGF0aW9uLnRvQXJyYXkoKSxcbiAgICAgICAgdmVsXG4gICAgICApXG4gICAgKVxuICAgICAgb3V0Z29pbmdOZXR3b3JrU3RhdGUucG9zZS5wdXNoKHtcbiAgICAgICAgbmV0d29ya0lkOiBuZXR3b3JrT2JqZWN0Lm5ldHdvcmtJZCxcbiAgICAgICAgcG9zaXRpb246IHRyYW5zZm9ybUNvbXBvbmVudC5wb3NpdGlvbi50b0FycmF5KCksXG4gICAgICAgIHJvdGF0aW9uOiB0cmFuc2Zvcm1Db21wb25lbnQucm90YXRpb24udG9BcnJheSgpLFxuICAgICAgICBsaW5lYXJWZWxvY2l0eTogdmVsICE9PSB1bmRlZmluZWQgPyB2ZWwgOiBbMF0sXG4gICAgICAgIGFuZ3VsYXJWZWxvY2l0eTogYW5nVmVsICE9PSB1bmRlZmluZWQgPyBhbmdWZWwgOiBbMF1cbiAgICAgIH0pXG4gIH1cbiAgcmV0dXJuIHdvcmxkXG59XG5cbi8vIHRvZG86IG1vdmUgdG8gY2xpZW50LXNwZWNpZmljIHN5c3RlbT9cbmV4cG9ydCBjb25zdCBxdWV1ZVVuY2hhbmdlZFBvc2VzRm9yQ2xpZW50ID0gKHdvcmxkOiBXb3JsZCkgPT4ge1xuICBjb25zdCB7IG91dGdvaW5nTmV0d29ya1N0YXRlLCBwcmV2aW91c05ldHdvcmtTdGF0ZSB9ID0gd29ybGRcblxuICBjb25zdCBuZXR3b3JrQ29tcG9uZW50ID0gZ2V0Q29tcG9uZW50KHdvcmxkLmxvY2FsQ2xpZW50RW50aXR5LCBOZXR3b3JrT2JqZWN0Q29tcG9uZW50KVxuICBpZiAoaXNDbGllbnQgJiYgbmV0d29ya0NvbXBvbmVudCkge1xuICAgIGNvbnN0IHRyYW5zZm9ybUNvbXBvbmVudCA9IGdldENvbXBvbmVudCh3b3JsZC5sb2NhbENsaWVudEVudGl0eSwgVHJhbnNmb3JtQ29tcG9uZW50KVxuICAgIGxldCB2ZWwgPSB1bmRlZmluZWQhIGFzIG51bWJlcltdXG4gICAgbGV0IGFuZ1ZlbCA9IHVuZGVmaW5lZFxuICAgIGlmIChoYXNDb21wb25lbnQod29ybGQubG9jYWxDbGllbnRFbnRpdHksIFZlbG9jaXR5Q29tcG9uZW50KSkge1xuICAgICAgY29uc3QgdmVsQyA9IGdldENvbXBvbmVudCh3b3JsZC5sb2NhbENsaWVudEVudGl0eSwgVmVsb2NpdHlDb21wb25lbnQpXG4gICAgICBpZiAoaXNaZXJvKHZlbEMudmVsb2NpdHkpIHx8IHZlbG9jaXR5SXNUaGVTYW1lKHByZXZpb3VzTmV0d29ya1N0YXRlLCB3b3JsZC5sb2NhbENsaWVudEVudGl0eSwgdmVsQy52ZWxvY2l0eSkpXG4gICAgICAgIHZlbCA9IFswXVxuICAgICAgZWxzZSB2ZWwgPSB2ZWxDLnZlbG9jaXR5LnRvQXJyYXkoKVxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIHByZXZpb3VzIHN0YXRlIChmaXJzdCBmcmFtZSlcbiAgICAgIHByZXZpb3VzTmV0d29ya1N0YXRlID09PSB1bmRlZmluZWQgfHxcbiAgICAgIC8vIG9yIGlmIHRoZSB0cmFuc2Zvcm0gaXMgbm90IHRoZSBzYW1lIGFzIGxhc3QgZnJhbWVcbiAgICAgICF0cmFuc2Zvcm1Jc1RoZVNhbWUoXG4gICAgICAgIHByZXZpb3VzTmV0d29ya1N0YXRlLFxuICAgICAgICBuZXR3b3JrQ29tcG9uZW50Lm5ldHdvcmtJZCxcbiAgICAgICAgdHJhbnNmb3JtQ29tcG9uZW50LnBvc2l0aW9uLnRvQXJyYXkoKSxcbiAgICAgICAgdHJhbnNmb3JtQ29tcG9uZW50LnJvdGF0aW9uLnRvQXJyYXkoKSxcbiAgICAgICAgdmVsXG4gICAgICApXG4gICAgKVxuICAgICAgb3V0Z29pbmdOZXR3b3JrU3RhdGUucG9zZS5wdXNoKHtcbiAgICAgICAgbmV0d29ya0lkOiBuZXR3b3JrQ29tcG9uZW50Lm5ldHdvcmtJZCxcbiAgICAgICAgcG9zaXRpb246IHRyYW5zZm9ybUNvbXBvbmVudC5wb3NpdGlvbi50b0FycmF5KCksXG4gICAgICAgIHJvdGF0aW9uOiB0cmFuc2Zvcm1Db21wb25lbnQucm90YXRpb24udG9BcnJheSgpLFxuICAgICAgICBsaW5lYXJWZWxvY2l0eTogdmVsICE9PSB1bmRlZmluZWQgPyB2ZWwgOiBbMF0sXG4gICAgICAgIGFuZ3VsYXJWZWxvY2l0eTogYW5nVmVsICE9PSB1bmRlZmluZWQgPyBhbmdWZWwgOiBbMF1cbiAgICAgIH0pXG4gIH1cbiAgcmV0dXJuIHdvcmxkXG59XG5cbmV4cG9ydCBjb25zdCBxdWV1ZVVuY2hhbmdlZElrUG9zZXMgPSAod29ybGQ6IFdvcmxkKSA9PiB7XG4gIGNvbnN0IHsgb3V0Z29pbmdOZXR3b3JrU3RhdGUsIHByZXZpb3VzTmV0d29ya1N0YXRlIH0gPSB3b3JsZFxuXG4gIGNvbnN0IGVudHMgPSBpa1RyYW5zZm9ybXNRdWVyeSh3b3JsZClcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgZW50aXR5ID0gZW50c1tpXVxuXG4gICAgY29uc3QgeyBuZXR3b3JrSWQgfSA9IGdldENvbXBvbmVudChlbnRpdHksIE5ldHdvcmtPYmplY3RDb21wb25lbnQpXG5cbiAgICBjb25zdCB4cklucHV0cyA9IGdldENvbXBvbmVudChlbnRpdHksIFhSSW5wdXRTb3VyY2VDb21wb25lbnQpXG5cbiAgICBjb25zdCBoZWFkUG9zZVBvc2l0aW9uID0geHJJbnB1dHMuaGVhZC5wb3NpdGlvbi50b0FycmF5KClcbiAgICBjb25zdCBoZWFkUG9zZVJvdGF0aW9uID0geHJJbnB1dHMuaGVhZC5xdWF0ZXJuaW9uLnRvQXJyYXkoKVxuICAgIGNvbnN0IGxlZnRQb3NlUG9zaXRpb24gPSB4cklucHV0cy5jb250cm9sbGVyTGVmdC5wb3NpdGlvbi50b0FycmF5KClcbiAgICBjb25zdCBsZWZ0UG9zZVJvdGF0aW9uID0geHJJbnB1dHMuY29udHJvbGxlckxlZnQucXVhdGVybmlvbi50b0FycmF5KClcbiAgICBjb25zdCByaWdodFBvc2VQb3NpdGlvbiA9IHhySW5wdXRzLmNvbnRyb2xsZXJSaWdodC5wb3NpdGlvbi50b0FycmF5KClcbiAgICBjb25zdCByaWdodFBvc2VSb3RhdGlvbiA9IHhySW5wdXRzLmNvbnRyb2xsZXJSaWdodC5xdWF0ZXJuaW9uLnRvQXJyYXkoKVxuXG4gICAgaWYgKFxuICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gcHJldmlvdXMgc3RhdGUgKGZpcnN0IGZyYW1lKVxuICAgICAgcHJldmlvdXNOZXR3b3JrU3RhdGUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgLy8gb3IgaWYgdGhlIHRyYW5zZm9ybSBpcyBub3QgdGhlIHNhbWUgYXMgbGFzdCBmcmFtZVxuICAgICAgIWlrUG9zZUlzVGhlU2FtZShcbiAgICAgICAgcHJldmlvdXNOZXR3b3JrU3RhdGUsXG4gICAgICAgIG5ldHdvcmtJZCxcbiAgICAgICAgaGVhZFBvc2VQb3NpdGlvbixcbiAgICAgICAgaGVhZFBvc2VSb3RhdGlvbixcbiAgICAgICAgbGVmdFBvc2VQb3NpdGlvbixcbiAgICAgICAgbGVmdFBvc2VSb3RhdGlvbixcbiAgICAgICAgcmlnaHRQb3NlUG9zaXRpb24sXG4gICAgICAgIHJpZ2h0UG9zZVJvdGF0aW9uXG4gICAgICApXG4gICAgKVxuICAgICAgb3V0Z29pbmdOZXR3b3JrU3RhdGUuaWtQb3NlLnB1c2goe1xuICAgICAgICBuZXR3b3JrSWQsXG4gICAgICAgIGhlYWRQb3NlUG9zaXRpb24sXG4gICAgICAgIGhlYWRQb3NlUm90YXRpb24sXG4gICAgICAgIGxlZnRQb3NlUG9zaXRpb24sXG4gICAgICAgIGxlZnRQb3NlUm90YXRpb24sXG4gICAgICAgIHJpZ2h0UG9zZVBvc2l0aW9uLFxuICAgICAgICByaWdodFBvc2VSb3RhdGlvblxuICAgICAgfSlcbiAgfVxuICByZXR1cm4gd29ybGRcbn1cblxuZXhwb3J0IGNvbnN0IHF1ZXVlWFJIYW5kUG9zZXMgPSAod29ybGQ6IFdvcmxkKSA9PiB7XG4gIGNvbnN0IHsgb3V0Z29pbmdOZXR3b3JrU3RhdGUgfSA9IHdvcmxkXG5cbiAgZm9yIChjb25zdCBlbnRpdHkgb2YgeHJIYW5kc1F1ZXJ5KHdvcmxkKSkge1xuICAgIGNvbnN0IHsgbmV0d29ya0lkIH0gPSBnZXRDb21wb25lbnQoZW50aXR5LCBOZXR3b3JrT2JqZWN0Q29tcG9uZW50KVxuICAgIGNvbnN0IHhySGFuZHMgPSBnZXRDb21wb25lbnQoZW50aXR5LCBYUkhhbmRzSW5wdXRDb21wb25lbnQpXG4gICAgY29uc3QgaGFuZHM6IGFueSA9IFtcbiAgICAgIHtcbiAgICAgICAgam9pbnRzOiBbXSBhcyBhbnlcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGpvaW50czogW10gYXMgYW55XG4gICAgICB9XG4gICAgXVxuXG4gICAgZm9yIChsZXQgeHJIYW5kIG9mIHhySGFuZHMuaGFuZHMpIHtcbiAgICAgIGNvbnN0IGpvaW50cyA9ICh4ckhhbmQgYXMgYW55KS5qb2ludHNcbiAgICAgIGlmICgham9pbnRzKSBjb250aW51ZVxuXG4gICAgICBjb25zdCBoYW5kID0gaGFuZHNbeHJIYW5kLnVzZXJEYXRhLmhhbmRlZG5lc3MgPT0gJ2xlZnQnID8gMCA6IDFdXG5cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGpvaW50cykpIHtcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSAodmFsdWUgYXMgTWVzaCkucG9zaXRpb24udG9BcnJheSgpXG4gICAgICAgIGNvbnN0IHJvdGF0aW9uID0gKHZhbHVlIGFzIE1lc2gpLnF1YXRlcm5pb24udG9BcnJheSgpXG5cbiAgICAgICAgaGFuZC5qb2ludHMucHVzaCh7XG4gICAgICAgICAga2V5LFxuICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICAgIHJvdGF0aW9uXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgb3V0Z29pbmdOZXR3b3JrU3RhdGUuaGFuZHNQb3NlLnB1c2goe1xuICAgICAgbmV0d29ya0lkLFxuICAgICAgaGFuZHNcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIHdvcmxkXG59XG5cbmV4cG9ydCBjb25zdCByZXNldE5ldHdvcmtTdGF0ZSA9ICh3b3JsZDogV29ybGQpID0+IHtcbiAgd29ybGQucHJldmlvdXNOZXR3b3JrU3RhdGUgPSB3b3JsZC5vdXRnb2luZ05ldHdvcmtTdGF0ZVxuICB3b3JsZC5vdXRnb2luZ05ldHdvcmtTdGF0ZSA9IHtcbiAgICB0aWNrOiB3b3JsZC5maXhlZFRpY2ssXG4gICAgdGltZTogRGF0ZS5ub3coKSxcbiAgICBwb3NlOiBbXSxcbiAgICBpa1Bvc2U6IFtdLFxuICAgIGhhbmRzUG9zZTogW11cbiAgfVxuICByZXR1cm4gd29ybGRcbn1cblxuLy8gcHJldHRpZXItaWdub3JlXG5leHBvcnQgY29uc3QgcXVldWVBbGxPdXRnb2luZ1Bvc2VzID0gcGlwZShcbiAgcmVzZXROZXR3b3JrU3RhdGUsXG4gIHF1ZXVlVW5jaGFuZ2VkUG9zZXMsIFxuICBxdWV1ZVVuY2hhbmdlZFBvc2VzRm9yQ2xpZW50LCBcbiAgcXVldWVYUkhhbmRQb3Nlc1xuKVxuXG4vKioqKioqKioqKioqKioqKlxuICogREFUQSBTRU5ESU5HICpcbiAqKioqKioqKioqKioqKiovXG5cbmNvbnN0IHNlbmRBY3Rpb25zT25UcmFuc3BvcnQgPSAodHJhbnNwb3J0OiBOZXR3b3JrVHJhbnNwb3J0KSA9PiAod29ybGQ6IFdvcmxkKSA9PiB7XG4gIGNvbnN0IHsgb3V0Z29pbmdBY3Rpb25zIH0gPSB3b3JsZFxuXG4gIHRyYW5zcG9ydC5zZW5kQWN0aW9ucyhvdXRnb2luZ0FjdGlvbnMpXG5cbiAgb3V0Z29pbmdBY3Rpb25zLmNsZWFyKClcblxuICByZXR1cm4gd29ybGRcbn1cblxuY29uc3Qgc2VuZERhdGFPblRyYW5zcG9ydCA9ICh0cmFuc3BvcnQ6IE5ldHdvcmtUcmFuc3BvcnQpID0+IChkYXRhKSA9PiB7XG4gIHRyYW5zcG9ydC5zZW5kRGF0YShkYXRhKVxufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBPdXRnb2luZ05ldHdvcmtTeXN0ZW0od29ybGQ6IFdvcmxkKTogUHJvbWlzZTxTeXN0ZW0+IHtcbiAgLyoqXG4gICAqIEZvciB0aGUgY2xpZW50LCB3ZSBvbmx5IHdhbnQgdG8gc2VuZCBvdXQgb2JqZWN0cyB3ZSBoYXZlIGF1dGhvcml0eSBvdmVyLFxuICAgKiAgIHdoaWNoIGFyZSB0aGUgbG9jYWwgYXZhdGFyIGFuZCBhbnkgb3duZWQgb2JqZWN0c1xuICAgKiBGb3IgdGhlIHNlcnZlciwgd2Ugd2FudCB0byBzZW5kIGFsbCBvYmplY3RzXG4gICAqL1xuXG4gIGNvbnN0IHNlbmRBY3Rpb25zID0gc2VuZEFjdGlvbnNPblRyYW5zcG9ydChOZXR3b3JrLmluc3RhbmNlLnRyYW5zcG9ydClcbiAgY29uc3Qgc2VuZERhdGEgPSBzZW5kRGF0YU9uVHJhbnNwb3J0KE5ldHdvcmsuaW5zdGFuY2UudHJhbnNwb3J0KVxuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgcmVyb3V0ZUFjdGlvbnMod29ybGQpXG5cbiAgICAvLyBzaWRlIGVmZmVjdCAtIG5ldHdvcmsgSU9cbiAgICB0cnkge1xuICAgICAgc2VuZEFjdGlvbnMod29ybGQpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihlKVxuICAgIH1cblxuICAgIGlmIChFbmdpbmUub2ZmbGluZU1vZGUpIHJldHVyblxuXG4gICAgcXVldWVBbGxPdXRnb2luZ1Bvc2VzKHdvcmxkKVxuXG4gICAgLy8gc2lkZSBlZmZlY3QgLSBuZXR3b3JrIElPXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBXb3JsZFN0YXRlTW9kZWwudG9CdWZmZXIod29ybGQub3V0Z29pbmdOZXR3b3JrU3RhdGUpXG4gICAgICBzZW5kRGF0YShkYXRhKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSlcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMG9CQW9DK0IsRUFBYSxFQUFzQixJQUM1RCxFQUFLLFNBQVcsRUFBSyxhQUFlLFVBRS9CLEdBQUksRUFBRyxFQUFJLEVBQUssT0FBUSxPQUMzQixFQUFLLEtBQU8sRUFBSyxTQUNaLFNBSUosR0NyQlQsS0FBTSxHQUdKLEVBQVksQ0FBQyxFQUF3QixJQUVqQyxFQUFvQixFQUN0QixFQUFZLENBQUMsRUFBMkIsSUFDeEMsRUFBWSxDQUFDLElBRVgsRUFBZSxFQUNqQixFQUFZLENBQUMsRUFBMkIsSUFDeEMsRUFBWSxDQUFDLElBTWpCLFdBQTJCLEVBQXNCLEVBQU8sRUFBYyxRQUMzRCxHQUFJLEVBQUcsRUFBSSxFQUFxQixLQUFLLE9BQVEsT0FDaEQsRUFBcUIsS0FBSyxHQUFHLFlBQWMsUUFDekMsSUFBZSxFQUFxQixLQUFLLEdBQUcsZ0JBQWlCLFNBUTlELEdBRVQsV0FBNEIsRUFBc0IsRUFBTyxFQUFLLEVBQUssRUFBYyxDQUMzRSxJQUFRLFdBQWlCLENBQUMsV0FDckIsR0FBSSxFQUFHLEVBQUksRUFBcUIsS0FBSyxPQUFRLE9BQ2hELEVBQXFCLEtBQUssR0FBRyxZQUFjLFFBRTNDLEtBQWUsRUFBcUIsS0FBSyxHQUFHLFNBQVUsSUFDdEQsRUFBZSxFQUFxQixLQUFLLEdBQUcsU0FBVSxJQUN0RCxFQUFlLEVBQXFCLEtBQUssR0FBRyxlQUFnQixVQVMzRCxHQUVULFdBQXlCLEVBQXNCLEVBQU8sRUFBSSxFQUFJLEVBQUksRUFBSSxFQUFJLEVBQWEsUUFDNUUsR0FBSSxFQUFHLEVBQUksRUFBcUIsT0FBTyxPQUFRLE9BQ2xELEVBQXFCLE9BQU8sR0FBRyxZQUFjLFFBRTdDLEtBQWUsRUFBcUIsT0FBTyxHQUFHLGlCQUFrQixJQUNoRSxFQUFlLEVBQXFCLE9BQU8sR0FBRyxpQkFBa0IsSUFDaEUsRUFBZSxFQUFxQixPQUFPLEdBQUcsaUJBQWtCLElBQ2hFLEVBQWUsRUFBcUIsT0FB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
