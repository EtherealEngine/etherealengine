import{aq as qd,ar as Yd,_ as Z,as as es,ak as $,at as lr,B as mt,E as ts,p as ns,a9 as te,z as Xd,au as rs,an as Jd,S as Zd,al as is,am as Qd}from"./_app.f0a72417.js";import{r as u,R as p,m as U,b as On,h as Zt,t as Ft,s as Bt,p as jt,e as G,j as Oe,q as Ae,c as os,g as as,n as ss,f as ef,u as Pt,d as ls,w as Tn,i as De}from"./vendor.475cb2ff.js";import{j as de,D as tf,u as nf,k as rf,l as of,H as af,U as sf,T as lf,N as cs,f as Be,_ as Wt,w as cr,K as we,m as ur,n as us,P as He,o as Xr,p as dr,i as po,I as Te,q as cf,r as ho,t as Pn,v as H,E as Re,x as ee,y as uf,z as df,A as ff,G as fr,e as pf,J as hf,L as Y,O as Le,a as ds,b as fn,Q as vo,R as pr,V as vf,W as hr,X as mf,Y as pn,Z as fs,$ as gf,a0 as ot,s as bf,a1 as yf,a2 as wf,a3 as Ht,a4 as Jr,a5 as xf,a6 as _n,a7 as mo,a8 as Cf,a9 as Zr,aa as Qr,ab as Sf,ac as ps,B as Ef,ad as Df,ae as Mf,af as go,ag as Of,ah as Tf,ai as Pf,aj as _f,ak as If,al as kf,am as Ze,an as hs,ao as Rf,ap as Nf,aq as Af,ar as $t,as as Lf,at as zf,au as Ff,av as Bf}from"./projectFunctions.0b423c97.js";import{L as vs,S as jf}from"./SceneService.306da1a6.js";import{a as fe}from"./index.ebe70c7a.js";import{K as Wf}from"./_baseIteratee.d1a5d142.js";import{b as Hf,u as bo,g as $f}from"./upload.bd537b46.js";import{V as Kf,S as Vf,P as Uf,W as Gf,am as qf,ak as Yf}from"./three.module.493739a3.js";import{G as Xf}from"./avatarFunctions.6d66cf01.js";import{C as ei}from"./index.7b02be28.js";import"./___vite-browser-external_commonjs-proxy.0e203c6e.js";import"./__vite-browser-external.b6126e45.js";import"./SystemUpdateType.772fc25d.js";import"./index.81138b53.js";import"./createSvgIcon.896642b4.js";import"./capitalize.fc001633.js";import"./useControlled.8dca0ac1.js";import"./useFormControl.a2039fae.js";import"./IconButton.ce216bbb.js";import"./ButtonBase.fb193a96.js";import"./createSvgIcon.57924123.js";import"./ownerWindow.3d7152ce.js";import"./index.2272cc2f.js";import"./AlertService.5d8abaff.js";import"./feathers.32f4d4e8.js";var lt;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(lt||(lt={}));var yo="dnd-core/INIT_COORDS",ti="dnd-core/BEGIN_DRAG",wo="dnd-core/PUBLISH_DRAG_SOURCE",ni="dnd-core/HOVER",ri="dnd-core/DROP",ii="dnd-core/END_DRAG";function ms(t,e){return{type:yo,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}function oi(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?oi=function(n){return typeof n}:oi=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},oi(t)}function Jf(t,e,n){return e.split(".").reduce(function(r,i){return r&&r[i]?r[i]:n||null},t)}function Zf(t,e){return t.filter(function(n){return n!==e})}function gs(t){return oi(t)==="object"}function Qf(t,e){var n=new Map,r=function(a){n.set(a,n.has(a)?n.get(a)+1:1)};t.forEach(r),e.forEach(r);var i=[];return n.forEach(function(o,a){o===1&&i.push(a)}),i}function ep(t,e){return t.filter(function(n){return e.indexOf(n)>-1})}var tp={type:yo,payload:{clientOffset:null,sourceClientOffset:null}};function np(t){return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{publishSource:!0},i=r.publishSource,o=i===void 0?!0:i,a=r.clientOffset,s=r.getSourceClientOffset,l=t.getMonitor(),c=t.getRegistry();t.dispatch(ms(a)),rp(n,l,c);var d=ap(n,l);if(d===null){t.dispatch(tp);return}var f=null;if(a){if(!s)throw new Error("getSourceClientOffset must be defined");ip(s),f=s(d)}t.dispatch(ms(a,f));var h=c.getSource(d),v=h.beginDrag(l,d);if(v!=null){op(v),c.pinSource(d);var m=c.getSourceType(d);return{type:ti,payload:{itemType:m,item:v,sourceId:d,clientOffset:a||null,sourceClientOffset:f||null,isSourcePublic:!!o}}}}}function rp(t,e,n){de(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(r){de(n.getSource(r),"Expected sourceIds to be registered.")})}function ip(t){de(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function op(t){de(gs(t),"Item must be an object.")}function ap(t,e){for(var n=null,r=t.length-1;r>=0;r--)if(e.canDragSource(t[r])){n=t[r];break}return n}function sp(t){return function(){var n=t.getMonitor();if(n.isDragging())return{type:wo}}}function xo(t,e){return e===null?t===null:Array.isArray(t)?t.some(function(n){return n===e}):t===e}function lp(t){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.clientOffset;cp(n);var o=n.slice(0),a=t.getMonitor(),s=t.getRegistry();up(o,a,s);var l=a.getItemType();return dp(o,s,l),fp(o,a,s),{type:ni,payload:{targetIds:o,clientOffset:i||null}}}}function cp(t){de(Array.isArray(t),"Expected targetIds to be an array.")}function up(t,e,n){de(e.isDragging(),"Cannot call hover while not dragging."),de(!e.didDrop(),"Cannot call hover after drop.");for(var r=0;r<t.length;r++){var i=t[r];de(t.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array.");var o=n.getTarget(i);de(o,"Expected targetIds to be registered.")}}function dp(t,e,n){for(var r=t.length-1;r>=0;r--){var i=t[r],o=e.getTargetType(i);xo(o,n)||t.splice(r,1)}}function fp(t,e,n){t.forEach(function(r){var i=n.getTarget(r);i.hover(e,r)})}function bs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ys(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bs(Object(n),!0).forEach(function(r){pp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bs(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hp(t){return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.getMonitor(),i=t.getRegistry();vp(r);var o=bp(r);o.forEach(function(a,s){var l=mp(a,s,i,r),c={type:ri,payload:{dropResult:ys(ys({},n),l)}};t.dispatch(c)})}}function vp(t){de(t.isDragging(),"Cannot call drop while not dragging."),de(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function mp(t,e,n,r){var i=n.getTarget(t),o=i?i.drop(r,t):void 0;return gp(o),typeof o=="undefined"&&(o=e===0?{}:r.getDropResult()),o}function gp(t){de(typeof t=="undefined"||gs(t),"Drop result must either be an object or undefined.")}function bp(t){var e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function yp(t){return function(){var n=t.getMonitor(),r=t.getRegistry();wp(n);var i=n.getSourceId();if(i!=null){var o=r.getSource(i,!0);o.endDrag(n,i),r.unpinSource()}return{type:ii}}}function wp(t){de(t.isDragging(),"Cannot call endDrag while not dragging.")}function xp(t){return{beginDrag:np(t),publishDragSource:sp(t),hover:lp(t),drop:hp(t),endDrag:yp(t)}}function Cp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ws(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sp(t,e,n){return e&&ws(t.prototype,e),n&&ws(t,n),t}function vr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ep=function(){function t(e,n){var r=this;Cp(this,t),vr(this,"store",void 0),vr(this,"monitor",void 0),vr(this,"backend",void 0),vr(this,"isSetUp",!1),vr(this,"handleRefCountChange",function(){var i=r.store.getState().refCount>0;r.backend&&(i&&!r.isSetUp?(r.backend.setup(),r.isSetUp=!0):!i&&r.isSetUp&&(r.backend.teardown(),r.isSetUp=!1))}),this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}return Sp(t,[{key:"receiveBackend",value:function(n){this.backend=n}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var n=this,r=this.store.dispatch;function i(a){return function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var d=a.apply(n,l);typeof d!="undefined"&&r(d)}}var o=xp(this);return Object.keys(o).reduce(function(a,s){var l=o[s];return a[s]=i(l),a},{})}},{key:"dispatch",value:function(n){this.store.dispatch(n)}}]),t}(),Dp=function(e,n){return e===n};function Mp(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function Op(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Dp;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(!n(t[r],e[r]))return!1;return!0}function xs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xs(Object(n),!0).forEach(function(r){Tp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ss={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Pp(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ss,e=arguments.length>1?arguments[1]:void 0,n=e.payload;switch(e.type){case yo:case ti:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case ni:return Mp(t.clientOffset,n.clientOffset)?t:Cs(Cs({},t),{},{clientOffset:n.clientOffset});case ii:case ri:return Ss;default:return t}}var Co="dnd-core/ADD_SOURCE",So="dnd-core/ADD_TARGET",Eo="dnd-core/REMOVE_SOURCE",ai="dnd-core/REMOVE_TARGET";function _p(t){return{type:Co,payload:{sourceId:t}}}function Ip(t){return{type:So,payload:{targetId:t}}}function kp(t){return{type:Eo,payload:{sourceId:t}}}function Rp(t){return{type:ai,payload:{targetId:t}}}function Es(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ct(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Es(Object(n),!0).forEach(function(r){Np(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Es(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Np(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ap={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Lp(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ap,e=arguments.length>1?arguments[1]:void 0,n=e.payload;switch(e.type){case ti:return ct(ct({},t),{},{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case wo:return ct(ct({},t),{},{isSourcePublic:!0});case ni:return ct(ct({},t),{},{targetIds:n.targetIds});case ai:return t.targetIds.indexOf(n.targetId)===-1?t:ct(ct({},t),{},{targetIds:Zf(t.targetIds,n.targetId)});case ri:return ct(ct({},t),{},{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case ii:return ct(ct({},t),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function zp(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Co:case So:return t+1;case Eo:case ai:return t-1;default:return t}}var si=[],Do=[];si.__IS_NONE__=!0;Do.__IS_ALL__=!0;function Fp(t,e){if(t===si)return!1;if(t===Do||typeof e=="undefined")return!0;var n=ep(e,t);return n.length>0}function Bp(){var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ni:break;case Co:case So:case ai:case Eo:return si;case ti:case wo:case ii:case ri:default:return Do}var e=t.payload,n=e.targetIds,r=n===void 0?[]:n,i=e.prevTargetIds,o=i===void 0?[]:i,a=Qf(r,o),s=a.length>0||!Op(r,o);if(!s)return si;var l=o[o.length-1],c=r[r.length-1];return l!==c&&(l&&a.push(l),c&&a.push(c)),a}function jp(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return t+1}function Ds(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ms(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ds(Object(n),!0).forEach(function(r){Wp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ds(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hp(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:Bp(t.dirtyHandlerIds,{type:e.type,payload:Ms(Ms({},e.payload),{},{prevTargetIds:Jf(t,"dragOperation.targetIds",[])})}),dragOffset:Pp(t.dragOffset,e),refCount:zp(t.refCount,e),dragOperation:Lp(t.dragOperation,e),stateId:jp(t.stateId)}}function $p(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Os(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Kp(t){var e=t.clientOffset,n=t.initialClientOffset,r=t.initialSourceClientOffset;return!e||!n||!r?null:Os($p(e,r),n)}function Vp(t){var e=t.clientOffset,n=t.initialClientOffset;return!e||!n?null:Os(e,n)}function Up(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ts(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gp(t,e,n){return e&&Ts(t.prototype,e),n&&Ts(t,n),t}function Ps(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qp=function(){function t(e,n){Up(this,t),Ps(this,"store",void 0),Ps(this,"registry",void 0),this.store=e,this.registry=n}return Gp(t,[{key:"subscribeToStateChange",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{handlerIds:void 0},o=i.handlerIds;de(typeof n=="function","listener must be a function."),de(typeof o=="undefined"||Array.isArray(o),"handlerIds, when specified, must be an array of strings.");var a=this.store.getState().stateId,s=function(){var c=r.store.getState(),d=c.stateId;try{var f=d===a||d===a+1&&!Fp(c.dirtyHandlerIds,o);f||n()}finally{a=d}};return this.store.subscribe(s)}},{key:"subscribeToOffsetChange",value:function(n){var r=this;de(typeof n=="function","listener must be a function.");var i=this.store.getState().dragOffset,o=function(){var s=r.store.getState().dragOffset;s!==i&&(i=s,n())};return this.store.subscribe(o)}},{key:"canDragSource",value:function(n){if(!n)return!1;var r=this.registry.getSource(n);return de(r,"Expected to find a valid source. sourceId=".concat(n)),this.isDragging()?!1:r.canDrag(this,n)}},{key:"canDropOnTarget",value:function(n){if(!n)return!1;var r=this.registry.getTarget(n);if(de(r,"Expected to find a valid target. targetId=".concat(n)),!this.isDragging()||this.didDrop())return!1;var i=this.registry.getTargetType(n),o=this.getItemType();return xo(i,o)&&r.canDrop(this,n)}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(n){if(!n)return!1;var r=this.registry.getSource(n,!0);if(de(r,"Expected to find a valid source. sourceId=".concat(n)),!this.isDragging()||!this.isSourcePublic())return!1;var i=this.registry.getSourceType(n),o=this.getItemType();return i!==o?!1:r.isDragging(this,n)}},{key:"isOverTarget",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shallow:!1};if(!n)return!1;var i=r.shallow;if(!this.isDragging())return!1;var o=this.registry.getTargetType(n),a=this.getItemType();if(a&&!xo(o,a))return!1;var s=this.getTargetIds();if(!s.length)return!1;var l=s.indexOf(n);return i?l===s.length-1:l>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return Kp(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return Vp(this.store.getState().dragOffset)}}]),t}(),Yp=0;function Xp(){return Yp++}function li(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?li=function(n){return typeof n}:li=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},li(t)}function Jp(t){de(typeof t.canDrag=="function","Expected canDrag to be a function."),de(typeof t.beginDrag=="function","Expected beginDrag to be a function."),de(typeof t.endDrag=="function","Expected endDrag to be a function.")}function Zp(t){de(typeof t.canDrop=="function","Expected canDrop to be a function."),de(typeof t.hover=="function","Expected hover to be a function."),de(typeof t.drop=="function","Expected beginDrag to be a function.")}function Mo(t,e){if(e&&Array.isArray(t)){t.forEach(function(n){return Mo(n,!1)});return}de(typeof t=="string"||li(t)==="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}function ci(t){_t.length||ui(),_t[_t.length]=t}var _t=[],ui,It=0,Qp=1024;function _s(){for(;It<_t.length;){var t=It;if(It=It+1,_t[t].call(),It>Qp){for(var e=0,n=_t.length-It;e<n;e++)_t[e]=_t[e+It];_t.length-=It,It=0}}_t.length=0,It=0}var Is=typeof global!="undefined"?global:self,ks=Is.MutationObserver||Is.WebKitMutationObserver;typeof ks=="function"?ui=eh(_s):ui=Rs(_s);ci.requestFlush=ui;function eh(t){var e=1,n=new ks(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}function Rs(t){return function(){var n=setTimeout(i,0),r=setInterval(i,50);function i(){clearTimeout(n),clearInterval(r),t()}}}ci.makeRequestCallFromTimer=Rs;var di=[],Oo=[],th=ci.makeRequestCallFromTimer(nh);function nh(){if(Oo.length)throw Oo.shift()}function To(t){var e;di.length?e=di.pop():e=new rh,e.task=t,ci(e)}var rh=function(){function t(){}return t.prototype.call=function(){try{this.task.call()}catch(e){To.onerror?To.onerror(e):(Oo.push(e),th())}finally{this.task=null,di[di.length]=this}},t}();function ih(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ns(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function oh(t,e,n){return e&&Ns(t.prototype,e),n&&Ns(t,n),t}function In(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ah(t,e){return uh(t)||ch(t,e)||lh(t,e)||sh()}function sh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lh(t,e){if(!!t){if(typeof t=="string")return As(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return As(t,e)}}function As(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ch(t,e){var n=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,s;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(l){o=!0,s=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function uh(t){if(Array.isArray(t))return t}function dh(t){var e=Xp().toString();switch(t){case lt.SOURCE:return"S".concat(e);case lt.TARGET:return"T".concat(e);default:throw new Error("Unknown Handler Role: ".concat(t))}}function Ls(t){switch(t[0]){case"S":return lt.SOURCE;case"T":return lt.TARGET;default:de(!1,"Cannot parse handler ID: ".concat(t))}}function zs(t,e){var n=t.entries(),r=!1;do{var i=n.next(),o=i.done,a=ah(i.value,2),s=a[1];if(s===e)return!0;r=!!o}while(!r);return!1}var fh=function(){function t(e){ih(this,t),In(this,"types",new Map),In(this,"dragSources",new Map),In(this,"dropTargets",new Map),In(this,"pinnedSourceId",null),In(this,"pinnedSource",null),In(this,"store",void 0),this.store=e}return oh(t,[{key:"addSource",value:function(n,r){Mo(n),Jp(r);var i=this.addHandler(lt.SOURCE,n,r);return this.store.dispatch(_p(i)),i}},{key:"addTarget",value:function(n,r){Mo(n,!0),Zp(r);var i=this.addHandler(lt.TARGET,n,r);return this.store.dispatch(Ip(i)),i}},{key:"containsHandler",value:function(n){return zs(this.dragSources,n)||zs(this.dropTargets,n)}},{key:"getSource",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;de(this.isSourceId(n),"Expected a valid source ID.");var i=r&&n===this.pinnedSourceId,o=i?this.pinnedSource:this.dragSources.get(n);return o}},{key:"getTarget",value:function(n){return de(this.isTargetId(n),"Expected a valid target ID."),this.dropTargets.get(n)}},{key:"getSourceType",value:function(n){return de(this.isSourceId(n),"Expected a valid source ID."),this.types.get(n)}},{key:"getTargetType",value:function(n){return de(this.isTargetId(n),"Expected a valid target ID."),this.types.get(n)}},{key:"isSourceId",value:function(n){var r=Ls(n);return r===lt.SOURCE}},{key:"isTargetId",value:function(n){var r=Ls(n);return r===lt.TARGET}},{key:"removeSource",value:function(n){var r=this;de(this.getSource(n),"Expected an existing source."),this.store.dispatch(kp(n)),To(function(){r.dragSources.delete(n),r.types.delete(n)})}},{key:"removeTarget",value:function(n){de(this.getTarget(n),"Expected an existing target."),this.store.dispatch(Rp(n)),this.dropTargets.delete(n),this.types.delete(n)}},{key:"pinSource",value:function(n){var r=this.getSource(n);de(r,"Expected an existing source."),this.pinnedSourceId=n,this.pinnedSource=r}},{key:"unpinSource",value:function(){de(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(n,r,i){var o=dh(n);return this.types.set(o,r),n===lt.SOURCE?this.dragSources.set(o,i):n===lt.TARGET&&this.dropTargets.set(o,i),o}}]),t}();function ph(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=hh(r),o=new qp(i,new fh(i)),a=new Ep(i,o),s=t(a,e,n);return a.receiveBackend(s),a}function hh(t){var e=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__;return qd(Hp,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}var vh=["children"];function mh(t,e){return wh(t)||yh(t,e)||bh(t,e)||gh()}function gh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bh(t,e){if(!!t){if(typeof t=="string")return Fs(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fs(t,e)}}function Fs(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yh(t,e){var n=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,s;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(l){o=!0,s=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function wh(t){if(Array.isArray(t))return t}function xh(t,e){if(t==null)return{};var n=Ch(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function Ch(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Bs=0,fi=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),Sh=u.exports.memo(function(e){var n=e.children,r=xh(e,vh),i=Eh(r),o=mh(i,2),a=o[0],s=o[1];return u.exports.useEffect(function(){if(s){var l=js();return++Bs,function(){--Bs==0&&(l[fi]=null)}}},[]),Yd.exports.jsx(tf.Provider,Object.assign({value:a},{children:n}),void 0)});function Eh(t){if("manager"in t){var e={dragDropManager:t.manager};return[e,!1]}var n=Dh(t.backend,t.context,t.options,t.debugMode),r=!t.context;return[n,r]}function Dh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:js(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=e;return i[fi]||(i[fi]={dragDropManager:ph(t,e,n,r)}),i[fi]}function js(){return typeof global!="undefined"?global:window}function Mh(t,e){return _h(t)||Ph(t,e)||Th(t,e)||Oh()}function Oh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Th(t,e){if(!!t){if(typeof t=="string")return Ws(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ws(t,e)}}function Ws(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ph(t,e){var n=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,s;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(l){o=!0,s=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function _h(t){if(Array.isArray(t))return t}function Ih(t){var e=nf(),n=e.getMonitor(),r=rf(n,t),i=Mh(r,2),o=i[0],a=i[1];return u.exports.useEffect(function(){return n.subscribeToOffsetChange(a)}),u.exports.useEffect(function(){return n.subscribeToStateChange(a)}),o}function Hs(t){var e=null,n=function(){return e==null&&(e=t()),e};return n}function kh(t,e){return t.filter(function(n){return n!==e})}function Rh(t,e){var n=new Set,r=function(a){return n.add(a)};t.forEach(r),e.forEach(r);var i=[];return n.forEach(function(o){return i.push(o)}),i}function Nh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ah(t,e,n){return e&&$s(t.prototype,e),n&&$s(t,n),t}function Ks(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Lh=function(){function t(e){Nh(this,t),Ks(this,"entered",[]),Ks(this,"isNodeInDocument",void 0),this.isNodeInDocument=e}return Ah(t,[{key:"enter",value:function(n){var r=this,i=this.entered.length,o=function(s){return r.isNodeInDocument(s)&&(!s.contains||s.contains(n))};return this.entered=Rh(this.entered.filter(o),[n]),i===0&&this.entered.length>0}},{key:"leave",value:function(n){var r=this.entered.length;return this.entered=kh(this.entered.filter(this.isNodeInDocument),n),r>0&&this.entered.length===0}},{key:"reset",value:function(){this.entered=[]}}]),t}(),zh=Hs(function(){return/firefox/i.test(navigator.userAgent)}),Vs=Hs(function(){return Boolean(window.safari)});function Fh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Us(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bh(t,e,n){return e&&Us(t.prototype,e),n&&Us(t,n),t}function mr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Gs=function(){function t(e,n){Fh(this,t),mr(this,"xs",void 0),mr(this,"ys",void 0),mr(this,"c1s",void 0),mr(this,"c2s",void 0),mr(this,"c3s",void 0);for(var r=e.length,i=[],o=0;o<r;o++)i.push(o);i.sort(function(_,F){return e[_]<e[F]?-1:1});for(var a=[],s=[],l,c,d=0;d<r-1;d++)l=e[d+1]-e[d],c=n[d+1]-n[d],a.push(l),s.push(c/l);for(var f=[s[0]],h=0;h<a.length-1;h++){var v=s[h],m=s[h+1];if(v*m<=0)f.push(0);else{l=a[h];var b=a[h+1],g=l+b;f.push(3*g/((g+b)/v+(g+l)/m))}}f.push(s[s.length-1]);for(var w=[],D=[],E,y=0;y<f.length-1;y++){E=s[y];var S=f[y],x=1/a[y],I=S+f[y+1]-E-E;w.push((E-S-I)*x),D.push(I*x*x)}this.xs=e,this.ys=n,this.c1s=f,this.c2s=w,this.c3s=D}return Bh(t,[{key:"interpolate",value:function(n){var r=this.xs,i=this.ys,o=this.c1s,a=this.c2s,s=this.c3s,l=r.length-1;if(n===r[l])return i[l];for(var c=0,d=s.length-1,f;c<=d;){f=Math.floor(.5*(c+d));var h=r[f];if(h<n)c=f+1;else if(h>n)d=f-1;else return i[f]}l=Math.max(0,d);var v=n-r[l],m=v*v;return i[l]+o[l]*v+a[l]*m+s[l]*v*m}}]),t}(),jh=1;function qs(t){var e=t.nodeType===jh?t:t.parentElement;if(!e)return null;var n=e.getBoundingClientRect(),r=n.top,i=n.left;return{x:i,y:r}}function pi(t){return{x:t.clientX,y:t.clientY}}function Wh(t){var e;return t.nodeName==="IMG"&&(zh()||!((e=document.documentElement)!==null&&e!==void 0&&e.contains(t)))}function Hh(t,e,n,r){var i=t?e.width:n,o=t?e.height:r;return Vs()&&t&&(o/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:o}}function $h(t,e,n,r,i){var o=Wh(e),a=o?t:e,s=qs(a),l={x:n.x-s.x,y:n.y-s.y},c=t.offsetWidth,d=t.offsetHeight,f=r.anchorX,h=r.anchorY,v=Hh(o,e,c,d),m=v.dragPreviewWidth,b=v.dragPreviewHeight,g=function(){var I=new Gs([0,.5,1],[l.y,l.y/d*b,l.y+b-d]),_=I.interpolate(h);return Vs()&&o&&(_+=(window.devicePixelRatio-1)*b),_},w=function(){var I=new Gs([0,.5,1],[l.x,l.x/c*m,l.x+m-c]);return I.interpolate(f)},D=i.offsetX,E=i.offsetY,y=D===0||D,S=E===0||E;return{x:y?D:w(),y:S?E:g()}}function Po(t,e,n){var r=e.reduce(function(i,o){return i||t.getData(o)},"");return r??n}var kn;function hi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _o=(kn={},hi(kn,of,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items}},matchesTypes:["Files"]}),hi(kn,af,{exposeProperties:{html:function(e,n){return Po(e,n,"")}},matchesTypes:["Html","text/html"]}),hi(kn,sf,{exposeProperties:{urls:function(e,n){return Po(e,n,"").split(`
`)}},matchesTypes:["Url","text/uri-list"]}),hi(kn,lf,{exposeProperties:{text:function(e,n){return Po(e,n,"")}},matchesTypes:["Text","text/plain"]}),kn);function Kh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ys(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vh(t,e,n){return e&&Ys(t.prototype,e),n&&Ys(t,n),t}function Xs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Uh=function(){function t(e){Kh(this,t),Xs(this,"item",void 0),Xs(this,"config",void 0),this.config=e,this.item={},this.initializeExposedProperties()}return Vh(t,[{key:"initializeExposedProperties",value:function(){var n=this;Object.keys(this.config.exposeProperties).forEach(function(r){Object.defineProperty(n.item,r,{configurable:!0,enumerable:!0,get:function(){return console.warn(`Browser doesn't allow reading "`.concat(r,'" until the drop event.')),null}})})}},{key:"loadDataTransfer",value:function(n){var r=this;if(n){var i={};Object.keys(this.config.exposeProperties).forEach(function(o){i[o]={value:r.config.exposeProperties[o](n,r.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,i)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(n,r){return r===n.getSourceId()}},{key:"endDrag",value:function(){}}]),t}();function Gh(t,e){var n=new Uh(_o[t]);return n.loadDataTransfer(e),n}function Io(t){if(!t)return null;var e=Array.prototype.slice.call(t.types||[]);return Object.keys(_o).filter(function(n){var r=_o[n].matchesTypes;return r.some(function(i){return e.indexOf(i)>-1})})[0]||null}function qh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Js(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yh(t,e,n){return e&&Js(t.prototype,e),n&&Js(t,n),t}function ko(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xh=function(){function t(e,n){qh(this,t),ko(this,"ownerDocument",null),ko(this,"globalContext",void 0),ko(this,"optionsArgs",void 0),this.globalContext=e,this.optionsArgs=n}return Yh(t,[{key:"window",get:function(){if(this.globalContext)return this.globalContext;if(typeof window!="undefined")return window}},{key:"document",get:function(){var n;return(n=this.globalContext)!==null&&n!==void 0&&n.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:"rootElement",get:function(){var n;return((n=this.optionsArgs)===null||n===void 0?void 0:n.rootElement)||this.window}}]),t}();function Zs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zs(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zs(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function el(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zh(t,e,n){return e&&el(t.prototype,e),n&&el(t,n),t}function pe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Qh=function(){function t(e,n,r){var i=this;Jh(this,t),pe(this,"options",void 0),pe(this,"actions",void 0),pe(this,"monitor",void 0),pe(this,"registry",void 0),pe(this,"enterLeaveCounter",void 0),pe(this,"sourcePreviewNodes",new Map),pe(this,"sourcePreviewNodeOptions",new Map),pe(this,"sourceNodes",new Map),pe(this,"sourceNodeOptions",new Map),pe(this,"dragStartSourceIds",null),pe(this,"dropTargetIds",[]),pe(this,"dragEnterTargetIds",[]),pe(this,"currentNativeSource",null),pe(this,"currentNativeHandle",null),pe(this,"currentDragSourceNode",null),pe(this,"altKeyPressed",!1),pe(this,"mouseMoveTimeoutTimer",null),pe(this,"asyncEndDragFrameId",null),pe(this,"dragOverTargetIds",null),pe(this,"getSourceClientOffset",function(o){var a=i.sourceNodes.get(o);return a&&qs(a)||null}),pe(this,"endDragNativeItem",function(){!i.isDraggingNativeItem()||(i.actions.endDrag(),i.currentNativeHandle&&i.registry.removeSource(i.currentNativeHandle),i.currentNativeHandle=null,i.currentNativeSource=null)}),pe(this,"isNodeInDocument",function(o){return Boolean(o&&i.document&&i.document.body&&i.document.body.contains(o))}),pe(this,"endDragIfSourceWasRemovedFromDOM",function(){var o=i.currentDragSourceNode;o==null||i.isNodeInDocument(o)||i.clearCurrentDragSourceNode()&&i.monitor.isDragging()&&i.actions.endDrag()}),pe(this,"handleTopDragStartCapture",function(){i.clearCurrentDragSourceNode(),i.dragStartSourceIds=[]}),pe(this,"handleTopDragStart",function(o){if(!o.defaultPrevented){var a=i.dragStartSourceIds;i.dragStartSourceIds=null;var s=pi(o);i.monitor.isDragging()&&i.actions.endDrag(),i.actions.beginDrag(a||[],{publishSource:!1,getSourceClientOffset:i.getSourceClientOffset,clientOffset:s});var l=o.dataTransfer,c=Io(l);if(i.monitor.isDragging()){if(l&&typeof l.setDragImage=="function"){var d=i.monitor.getSourceId(),f=i.sourceNodes.get(d),h=i.sourcePreviewNodes.get(d)||f;if(h){var v=i.getCurrentSourcePreviewNodeOptions(),m=v.anchorX,b=v.anchorY,g=v.offsetX,w=v.offsetY,D={anchorX:m,anchorY:b},E={offsetX:g,offsetY:w},y=$h(f,h,s,D,E);l.setDragImage(h,y.x,y.y)}}try{l==null||l.setData("application/json",{})}catch(I){}i.setCurrentDragSourceNode(o.target);var S=i.getCurrentSourcePreviewNodeOptions(),x=S.captureDraggingState;x?i.actions.publishDragSource():setTimeout(function(){return i.actions.publishDragSource()},0)}else if(c)i.beginDragNativeItem(c);else{if(l&&!l.types&&(o.target&&!o.target.hasAttribute||!o.target.hasAttribute("draggable")))return;o.preventDefault()}}}),pe(this,"handleTopDragEndCapture",function(){i.clearCurrentDragSourceNode()&&i.monitor.isDragging()&&i.actions.endDrag()}),pe(this,"handleTopDragEnterCapture",function(o){i.dragEnterTargetIds=[];var a=i.enterLeaveCounter.enter(o.target);if(!(!a||i.monitor.isDragging())){var s=o.dataTransfer,l=Io(s);l&&i.beginDragNativeItem(l,s)}}),pe(this,"handleTopDragEnter",function(o){var a=i.dragEnterTargetIds;if(i.dragEnterTargetIds=[],!!i.monitor.isDragging()){i.altKeyPressed=o.altKey,a.length>0&&i.actions.hover(a,{clientOffset:pi(o)});var s=a.some(function(l){return i.monitor.canDropOnTarget(l)});s&&(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect=i.getCurrentDropEffect()))}}),pe(this,"handleTopDragOverCapture",function(){i.dragOverTargetIds=[]}),pe(this,"handleTopDragOver",function(o){var a=i.dragOverTargetIds;if(i.dragOverTargetIds=[],!i.monitor.isDragging()){o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect="none");return}i.altKeyPressed=o.altKey,i.actions.hover(a||[],{clientOffset:pi(o)});var s=(a||[]).some(function(l){return i.monitor.canDropOnTarget(l)});s?(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect=i.getCurrentDropEffect())):i.isDraggingNativeItem()?o.preventDefault():(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect="none"))}),pe(this,"handleTopDragLeaveCapture",function(o){i.isDraggingNativeItem()&&o.preventDefault();var a=i.enterLeaveCounter.leave(o.target);!a||i.isDraggingNativeItem()&&setTimeout(function(){return i.endDragNativeItem()},0)}),pe(this,"handleTopDropCapture",function(o){if(i.dropTargetIds=[],i.isDraggingNativeItem()){var a;o.preventDefault(),(a=i.currentNativeSource)===null||a===void 0||a.loadDataTransfer(o.dataTransfer)}else Io(o.dataTransfer)&&o.preventDefault();i.enterLeaveCounter.reset()}),pe(this,"handleTopDrop",function(o){var a=i.dropTargetIds;i.dropTargetIds=[],i.actions.hover(a,{clientOffset:pi(o)}),i.actions.drop({dropEffect:i.getCurrentDropEffect()}),i.isDraggingNativeItem()?i.endDragNativeItem():i.monitor.isDragging()&&i.actions.endDrag()}),pe(this,"handleSelectStart",function(o){var a=o.target;typeof a.dragDrop=="function"&&(a.tagName==="INPUT"||a.tagName==="SELECT"||a.tagName==="TEXTAREA"||a.isContentEditable||(o.preventDefault(),a.dragDrop()))}),this.options=new Xh(n,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Lh(this.isNodeInDocument)}return Zh(t,[{key:"profile",value:function(){var n,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((n=this.dragStartSourceIds)===null||n===void 0?void 0:n.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}},{key:"rootElement",get:function(){return this.options.rootElement}},{key:"setup",value:function(){var n=this.rootElement;if(n!==void 0){if(n.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");n.__isReactDndBackendSetUp=!0,this.addEventListeners(n)}}},{key:"teardown",value:function(){var n=this.rootElement;if(n!==void 0&&(n.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}},{key:"connectDragPreview",value:function(n,r,i){var o=this;return this.sourcePreviewNodeOptions.set(n,i),this.sourcePreviewNodes.set(n,r),function(){o.sourcePreviewNodes.delete(n),o.sourcePreviewNodeOptions.delete(n)}}},{key:"connectDragSource",value:function(n,r,i){var o=this;this.sourceNodes.set(n,r),this.sourceNodeOptions.set(n,i);var a=function(c){return o.handleDragStart(c,n)},s=function(c){return o.handleSelectStart(c)};return r.setAttribute("draggable","true"),r.addEventListener("dragstart",a),r.addEventListener("selectstart",s),function(){o.sourceNodes.delete(n),o.sourceNodeOptions.delete(n),r.removeEventListener("dragstart",a),r.removeEventListener("selectstart",s),r.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(n,r){var i=this,o=function(c){return i.handleDragEnter(c,n)},a=function(c){return i.handleDragOver(c,n)},s=function(c){return i.handleDrop(c,n)};return r.addEventListener("dragenter",o),r.addEventListener("dragover",a),r.addEventListener("drop",s),function(){r.removeEventListener("dragenter",o),r.removeEventListener("dragover",a),r.removeEventListener("drop",s)}}},{key:"addEventListeners",value:function(n){!n.addEventListener||(n.addEventListener("dragstart",this.handleTopDragStart),n.addEventListener("dragstart",this.handleTopDragStartCapture,!0),n.addEventListener("dragend",this.handleTopDragEndCapture,!0),n.addEventListener("dragenter",this.handleTopDragEnter),n.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),n.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),n.addEventListener("dragover",this.handleTopDragOver),n.addEventListener("dragover",this.handleTopDragOverCapture,!0),n.addEventListener("drop",this.handleTopDrop),n.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(n){!n.removeEventListener||(n.removeEventListener("dragstart",this.handleTopDragStart),n.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),n.removeEventListener("dragend",this.handleTopDragEndCapture,!0),n.removeEventListener("dragenter",this.handleTopDragEnter),n.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),n.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),n.removeEventListener("dragover",this.handleTopDragOver),n.removeEventListener("dragover",this.handleTopDragOverCapture,!0),n.removeEventListener("drop",this.handleTopDrop),n.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var n=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(n);return Qs({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var n=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(n);return Qs({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}},{key:"isDraggingNativeItem",value:function(){var n=this.monitor.getItemType();return Object.keys(cs).some(function(r){return cs[r]===n})}},{key:"beginDragNativeItem",value:function(n,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=Gh(n,r),this.currentNativeHandle=this.registry.addSource(n,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(n){var r=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=n;var i=1e3;this.mouseMoveTimeoutTimer=setTimeout(function(){var o;return(o=r.rootElement)===null||o===void 0?void 0:o.addEventListener("mousemove",r.endDragIfSourceWasRemovedFromDOM,!0)},i)}},{key:"clearCurrentDragSourceNode",value:function(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var n;(n=this.window)===null||n===void 0||n.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:"handleDragStart",value:function(n,r){n.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}},{key:"handleDragEnter",value:function(n,r){this.dragEnterTargetIds.unshift(r)}},{key:"handleDragOver",value:function(n,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}},{key:"handleDrop",value:function(n,r){this.dropTargetIds.unshift(r)}}]),t}(),ev=function(e,n,r){return new Qh(e,n,r)},tl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 512 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"}))});tl.displayName="Archive";var nl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 512 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"m352.201 425.775-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z"}))});nl.displayName="ArrowsAlt";var rl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 256 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z"}))});rl.displayName="ArrowsAltV";var il=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 448 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}))});il.displayName="Bars";var ol=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 320 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"}))});ol.displayName="CaretDown";var al=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 192 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"}))});al.displayName="CaretRight";var sl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 512 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M500 384c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v308h436zM372.7 159.5 288 216l-85.3-113.7c-5.1-6.8-15.5-6.3-19.9 1L96 248v104h384l-89.9-187.8c-3.2-6.5-11.4-8.7-17.4-4.7z"}))});sl.displayName="ChartArea";var ll=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 576 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346 7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}))});ll.displayName="ExclamationTriangle";var cl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 512 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M164.07 148.1H12a12 12 0 0 1-12-12v-80a36 36 0 0 1 36-36h104a36 36 0 0 1 36 36v80a11.89 11.89 0 0 1-11.93 12zm347.93-12V56a36 36 0 0 0-36-36H372a36 36 0 0 0-36 36v80a12 12 0 0 0 12 12h152a11.89 11.89 0 0 0 12-11.9zm-164 44a12 12 0 0 0-12 12v52c0 128.1-160 127.9-160 0v-52a12 12 0 0 0-12-12H12.1a12 12 0 0 0-12 12.1c.1 21.4.6 40.3 0 53.3 0 150.6 136.17 246.6 256.75 246.6s255-96 255-246.7c-.6-12.8-.2-33 0-53.2a12 12 0 0 0-12-12.1z"}))});cl.displayName="Magnet";var ul=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 448 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"}))});ul.displayName="Pause";var dl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 448 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M424.4 214.7 72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}))});dl.displayName="Play";var fl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 640 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M384 320H256c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V352c0-17.67-14.33-32-32-32zM192 32c0-17.67-14.33-32-32-32H32C14.33 0 0 14.33 0 32v128c0 17.67 14.33 32 32 32h95.72l73.16 128.04C211.98 300.98 232.4 288 256 288h.28L192 175.51V128h224V64H192V32zM608 0H480c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32z"}))});fl.displayName="ProjectDiagram";var pl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 512 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M496 384H160v-16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h80v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h336c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm0-160h-80v-16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h336v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h80c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm0-160H288V48c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16C7.2 64 0 71.2 0 80v32c0 8.8 7.2 16 16 16h208v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h208c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16z"}))});pl.displayName="SlidersH";var hl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 512 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"}))});hl.displayName="SyncAlt";const tv={floatable:!0,maximizable:!0},vi="place-holder",mi="-maximized-placeholder-",nv={floatable:!1},ut=p.createContext(null),rv=ut.Provider;ut.Consumer;function Rn(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];return p.Children.forEach(t,function(r){r==null&&!e.keepEmpty||(Array.isArray(r)?n=n.concat(Rn(r)):es.exports.isFragment(r)&&r.props?n=n.concat(Rn(r.props.children,e)):n.push(r))}),n}var vl=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return!!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t==null?void 0:t.substr(0,4)))};function Nn(t,e){var n=e||{},r=n.defaultValue,i=n.value,o=n.onChange,a=n.postState,s=u.exports.useState(function(){return i!==void 0?i:r!==void 0?typeof r=="function"?r():r:typeof t=="function"?t():t}),l=U(s,2),c=l[0],d=l[1],f=i!==void 0?i:c;a&&(f=a(f));function h(m){d(m),f!==m&&o&&o(m,f)}var v=u.exports.useRef(!0);return u.exports.useEffect(function(){if(v.current){v.current=!1;return}i===void 0&&d(i)},[i]),[f,h]}var ml=function(e){return+setTimeout(e,16)},gl=function(e){return clearTimeout(e)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(ml=function(e){return window.requestAnimationFrame(e)},gl=function(e){return window.cancelAnimationFrame(e)});var bl=0,Ro=new Map;function yl(t){Ro.delete(t)}function Ce(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;bl+=1;var n=bl;function r(i){if(i===0)yl(n),t();else{var o=ml(function(){r(i-1)});Ro.set(n,o)}}return r(e),n}Ce.cancel=function(t){var e=Ro.get(t);return yl(e),gl(e)};function No(t){return t instanceof HTMLElement?t:On.findDOMNode(t)}function wl(t,e){typeof t=="function"?t(e):Zt(t)==="object"&&t&&"current"in t&&(t.current=e)}function Ao(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){e.forEach(function(i){wl(i,r)})}}function xl(t){var e,n,r=es.exports.isMemo(t)?t.type.type:t.type;return!(typeof r=="function"&&!((e=r.prototype)===null||e===void 0?void 0:e.render)||typeof t=="function"&&!((n=t.prototype)===null||n===void 0?void 0:n.render))}var Cl=function(){if(typeof Map!="undefined")return Map;function t(e,n){var r=-1;return e.some(function(i,o){return i[0]===n?(r=o,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var r=t(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},e.prototype.set=function(n,r){var i=t(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},e.prototype.delete=function(n){var r=this.__entries__,i=t(r,n);~i&&r.splice(i,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,o=this.__entries__;i<o.length;i++){var a=o[i];n.call(r,a[1],a[0])}},e}()}(),Lo=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,gi=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),iv=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(gi):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),ov=2;function av(t,e){var n=!1,r=!1,i=0;function o(){n&&(n=!1,t()),r&&s()}function a(){iv(o)}function s(){var l=Date.now();if(n){if(l-i<ov)return;r=!0}else n=!0,r=!1,setTimeout(a,e);i=l}return s}var sv=20,lv=["top","right","bottom","left","width","height","size","weight"],cv=typeof MutationObserver!="undefined",uv=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=av(this.refresh.bind(this),sv)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,r=n.indexOf(e);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!Lo||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),cv?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!Lo||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,r=n===void 0?"":n,i=lv.some(function(o){return!!~r.indexOf(o)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Sl=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},An=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||gi},El=yi(0,0,0,0);function bi(t){return parseFloat(t)||0}function Dl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(r,i){var o=t["border-"+i+"-width"];return r+bi(o)},0)}function dv(t){for(var e=["top","right","bottom","left"],n={},r=0,i=e;r<i.length;r++){var o=i[r],a=t["padding-"+o];n[o]=bi(a)}return n}function fv(t){var e=t.getBBox();return yi(0,0,e.width,e.height)}function pv(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return El;var r=An(t).getComputedStyle(t),i=dv(r),o=i.left+i.right,a=i.top+i.bottom,s=bi(r.width),l=bi(r.height);if(r.boxSizing==="border-box"&&(Math.round(s+o)!==e&&(s-=Dl(r,"left","right")+o),Math.round(l+a)!==n&&(l-=Dl(r,"top","bottom")+a)),!vv(t)){var c=Math.round(s+o)-e,d=Math.round(l+a)-n;Math.abs(c)!==1&&(s-=c),Math.abs(d)!==1&&(l-=d)}return yi(i.left,i.top,s,l)}var hv=function(){return typeof SVGGraphicsElement!="undefined"?function(t){return t instanceof An(t).SVGGraphicsElement}:function(t){return t instanceof An(t).SVGElement&&typeof t.getBBox=="function"}}();function vv(t){return t===An(t).document.documentElement}function mv(t){return Lo?hv(t)?fv(t):pv(t):El}function gv(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,a=Object.create(o.prototype);return Sl(a,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),a}function yi(t,e,n,r){return{x:t,y:e,width:n,height:r}}var bv=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=yi(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=mv(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),yv=function(){function t(e,n){var r=gv(n);Sl(this,{target:e,contentRect:r})}return t}(),wv=function(){function t(e,n,r){if(this.activeObservations_=[],this.observations_=new Cl,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof An(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new bv(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof An(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;!n.has(e)||(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(!!this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new yv(r.target,r.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Ml=typeof WeakMap!="undefined"?new WeakMap:new Cl,Ol=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=uv.getInstance(),r=new wv(e,n,this);Ml.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){Ol.prototype[t]=function(){var e;return(e=Ml.get(this))[t].apply(e,arguments)}});var zo=function(){return typeof gi.ResizeObserver!="undefined"?gi.ResizeObserver:Ol}(),xv="rc-observer-key",gr=function(t){Ft(n,t);var e=Wt(n);function n(){var r;return Bt(this,n),r=e.apply(this,arguments),r.resizeObserver=null,r.childNode=null,r.currentElement=null,r.state={width:0,height:0,offsetHeight:0,offsetWidth:0},r.onResize=function(i){var o=r.props.onResize,a=i[0].target,s=a.getBoundingClientRect(),l=s.width,c=s.height,d=a.offsetWidth,f=a.offsetHeight,h=Math.floor(l),v=Math.floor(c);if(r.state.width!==h||r.state.height!==v||r.state.offsetWidth!==d||r.state.offsetHeight!==f){var m={width:h,height:v,offsetWidth:d,offsetHeight:f};r.setState(m),o&&Promise.resolve().then(function(){o($($({},m),{},{offsetWidth:d,offsetHeight:f}),a)})}},r.setChildNode=function(i){r.childNode=i},r}return jt(n,[{key:"componentDidMount",value:function(){this.onComponentUpdated()}},{key:"componentDidUpdate",value:function(){this.onComponentUpdated()}},{key:"componentWillUnmount",value:function(){this.destroyObserver()}},{key:"onComponentUpdated",value:function(){var i=this.props.disabled;if(i){this.destroyObserver();return}var o=No(this.childNode||this),a=o!==this.currentElement;a&&(this.destroyObserver(),this.currentElement=o),!this.resizeObserver&&o&&(this.resizeObserver=new zo(this.onResize),this.resizeObserver.observe(o))}},{key:"destroyObserver",value:function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}},{key:"render",value:function(){var i=this.props.children,o=Rn(i);if(o.length>1)cr(!1,"Find more than one child node with `children` in ResizeObserver. Will only observe first one.");else if(o.length===0)return cr(!1,"`children` of ResizeObserver is empty. Nothing is in observe."),null;var a=o[0];if(u.exports.isValidElement(a)&&xl(a)){var s=a.ref;o[0]=u.exports.cloneElement(a,{ref:Ao(s,this.setChildNode)})}return o.length===1?o[0]:o.map(function(l,c){return!u.exports.isValidElement(l)||"key"in l&&l.key!==null?l:u.exports.cloneElement(l,{key:"".concat(xv,"-").concat(c)})})}}]),n}(u.exports.Component);gr.displayName="ResizeObserver";function Tl(t){var e=u.exports.useRef(),n=u.exports.useRef(!1);function r(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];n.current||(Ce.cancel(e.current),e.current=Ce(function(){t.apply(void 0,o)}))}return u.exports.useEffect(function(){return function(){n.current=!0,Ce.cancel(e.current)}},[]),r}function Cv(t){var e=u.exports.useRef([]),n=u.exports.useState({}),r=U(n,2),i=r[1],o=u.exports.useRef(typeof t=="function"?t():t),a=Tl(function(){var l=o.current;e.current.forEach(function(c){l=c(l)}),e.current=[],o.current=l,i({})});function s(l){e.current.push(l),a()}return[o.current,s]}function Sv(t,e){var n,r=t.prefixCls,i=t.id,o=t.active,a=t.tab,s=a.key,l=a.tab,c=a.disabled,d=a.closeIcon,f=t.closable,h=t.renderWrapper,v=t.removeAriaLabel,m=t.editable,b=t.onClick,g=t.onRemove,w=t.onFocus,D=t.style,E="".concat(r,"-tab");u.exports.useEffect(function(){return g},[]);var y=m&&f!==!1&&!c;function S(_){c||b(_)}function x(_){_.preventDefault(),_.stopPropagation(),m.onEdit("remove",{key:s,event:_})}var I=u.exports.createElement("div",{key:s,ref:e,className:fe(E,(n={},G(n,"".concat(E,"-with-remove"),y),G(n,"".concat(E,"-active"),o),G(n,"".concat(E,"-disabled"),c),n)),style:D,onClick:S},u.exports.createElement("div",{role:"tab","aria-selected":o,id:i&&"".concat(i,"-tab-").concat(s),className:"".concat(E,"-btn"),"aria-controls":i&&"".concat(i,"-panel-").concat(s),"aria-disabled":c,tabIndex:c?null:0,onClick:function(F){F.stopPropagation(),S(F)},onKeyDown:function(F){[we.SPACE,we.ENTER].includes(F.which)&&(F.preventDefault(),S(F))},onFocus:w},l),y&&u.exports.createElement("button",{type:"button","aria-label":v||"remove",tabIndex:0,className:"".concat(E,"-remove"),onClick:function(F){F.stopPropagation(),x(F)}},d||m.removeIcon||"\xD7"));return h?h(I):I}var Ev=u.exports.forwardRef(Sv),Pl={width:0,height:0,left:0,top:0};function Dv(t,e,n){return u.exports.useMemo(function(){for(var r,i=new Map,o=e.get((r=t[0])===null||r===void 0?void 0:r.key)||Pl,a=o.left+o.width,s=0;s<t.length;s+=1){var l=t[s].key,c=e.get(l);if(!c){var d;c=e.get((d=t[s-1])===null||d===void 0?void 0:d.key)||Pl}var f=i.get(l)||$({},c);f.right=a-f.left-f.width,i.set(l,f)}return i},[t.map(function(r){return r.key}).join("_"),e,n])}var _l={width:0,height:0,left:0,top:0,right:0};function Mv(t,e,n,r,i){var o=i.tabs,a=i.tabPosition,s=i.rtl,l,c,d;["top","bottom"].includes(a)?(l="width",c=s?"right":"left",d=Math.abs(e.left)):(l="height",c="top",d=-e.top);var f=e[l],h=n[l],v=r[l],m=f;return h+v>f&&(m=f-v),u.exports.useMemo(function(){if(!o.length)return[0,0];for(var b=o.length,g=b,w=0;w<b;w+=1){var D=t.get(o[w].key)||_l;if(D[c]+D[l]>d+m){g=w-1;break}}for(var E=0,y=b-1;y>=0;y-=1){var S=t.get(o[y].key)||_l;if(S[c]<d){E=y+1;break}}return[E,g]},[t,d,m,a,o.map(function(b){return b.key}).join("_"),s])}var Ln=void 0;function Ov(t,e){var n=t.prefixCls,r=t.invalidate,i=t.item,o=t.renderItem,a=t.responsive,s=t.registerSize,l=t.itemKey,c=t.className,d=t.style,f=t.children,h=t.display,v=t.order,m=t.component,b=m===void 0?"div":m,g=Oe(t,["prefixCls","invalidate","item","renderItem","responsive","registerSize","itemKey","className","style","children","display","order","component"]),w=a&&!h;function D(I){s(l,I)}u.exports.useEffect(function(){return function(){D(null)}},[]);var E=o&&i!==Ln?o(i):f,y;r||(y={opacity:w?0:1,height:w?0:Ln,overflowY:w?"hidden":Ln,order:a?v:Ln,pointerEvents:w?"none":Ln,position:w?"absolute":Ln});var S={};w&&(S["aria-hidden"]=!0);var x=u.exports.createElement(b,Z({className:fe(!r&&n,c),style:$($({},y),d)},S,g,{ref:e}),E);return a&&(x=u.exports.createElement(gr,{onResize:function(_){var F=_.offsetWidth;D(F)}},x)),x}var br=u.exports.forwardRef(Ov);br.displayName="Item";function Tv(){var t=u.exports.useState({}),e=U(t,2),n=e[1],r=u.exports.useRef([]),i=u.exports.useRef(!1),o=0,a=0;u.exports.useEffect(function(){return function(){i.current=!0}},[]);function s(l){var c=o;o+=1,r.current.length<c+1&&(r.current[c]=l);var d=r.current[c];function f(h){r.current[c]=typeof h=="function"?h(r.current[c]):h,Ce.cancel(a),a=Ce(function(){i.current||n({})})}return[d,f]}return s}var Pv=function(e,n){var r=u.exports.useContext(wi);if(!r){var i=e.component,o=i===void 0?"div":i,a=Oe(e,["component"]);return u.exports.createElement(o,Z({},a,{ref:n}))}var s=r.className,l=Oe(r,["className"]),c=e.className,d=Oe(e,["className"]);return u.exports.createElement(wi.Provider,{value:null},u.exports.createElement(br,Z({ref:n,className:fe(s,c)},l,d)))},Il=u.exports.forwardRef(Pv);Il.displayName="RawItem";var wi=u.exports.createContext(null),kl="responsive",Rl="invalidate";function _v(t){return"+ ".concat(t.length," ...")}function Iv(t,e){var n=t.prefixCls,r=n===void 0?"rc-overflow":n,i=t.data,o=i===void 0?[]:i,a=t.renderItem,s=t.renderRawItem,l=t.itemKey,c=t.itemWidth,d=c===void 0?10:c,f=t.ssr,h=t.style,v=t.className,m=t.maxCount,b=t.renderRest,g=t.renderRawRest,w=t.suffix,D=t.component,E=D===void 0?"div":D,y=t.itemComponent,S=t.onVisibleChange,x=Oe(t,["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"]),I=Tv(),_=f==="full",F=I(null),k=U(F,2),P=k[0],O=k[1],j=P||0,N=I(new Map),R=U(N,2),V=R[0],T=R[1],C=I(0),M=U(C,2),A=M[0],W=M[1],L=I(0),K=U(L,2),Q=K[0],z=K[1],q=I(0),J=U(q,2),le=J[0],ve=J[1],me=u.exports.useState(null),be=U(me,2),ze=be[0],Fe=be[1],tt=u.exports.useState(null),Ne=U(tt,2),ue=Ne[0],je=Ne[1],se=u.exports.useMemo(function(){return ue===null&&_?Number.MAX_SAFE_INTEGER:ue||0},[ue,P]),ce=u.exports.useState(!1),Se=U(ce,2),Yt=Se[0],Lt=Se[1],$e="".concat(r,"-item"),Xt=Math.max(A,Q),Ye=o.length&&m===kl,We=m===Rl,zt=Ye||typeof m=="number"&&o.length>m,Xe=u.exports.useMemo(function(){var ae=o;return Ye?P===null&&_?ae=o:ae=o.slice(0,Math.min(o.length,j/d)):typeof m=="number"&&(ae=o.slice(0,m)),ae},[o,d,P,m,Ye]),ht=u.exports.useMemo(function(){return Ye?o.slice(se+1):o.slice(Xe.length)},[o,Xe,Ye,se]),Ke=u.exports.useCallback(function(ae,he){var Ee;return typeof l=="function"?l(ae):(Ee=l&&(ae==null?void 0:ae[l]))!==null&&Ee!==void 0?Ee:he},[l]),nt=u.exports.useCallback(a||function(ae){return ae},[a]);function ke(ae,he){je(ae),he||(Lt(ae<o.length-1),S==null||S(ae))}function Qn(ae,he){O(he.clientWidth)}function Jt(ae,he){T(function(Ee){var Je=new Map(Ee);return he===null?Je.delete(ae):Je.set(ae,he),Je})}function at(ae,he){z(he),W(Q)}function Sn(ae,he){ve(he)}function st(ae){return V.get(Ke(Xe[ae],ae))}u.exports.useLayoutEffect(function(){if(j&&Xt&&Xe){var ae=le,he=Xe.length,Ee=he-1;if(!he){ke(0),Fe(null);return}for(var Je=0;Je<he;Je+=1){var cn=st(Je);if(cn===void 0){ke(Je-1,!0);break}if(ae+=cn,Ee===0&&ae<=j||Je===Ee-1&&ae+st(Ee)<=j){ke(Ee),Fe(null);break}else if(ae+Xt>j){ke(Je-1),Fe(ae-cn-le+Q);break}}w&&st(0)+le>j&&Fe(null)}},[j,V,Q,le,Ke,Xe]);var an=Yt&&!!ht.length,vt={};ze!==null&&Ye&&(vt={position:"absolute",left:ze,top:0});var it={prefixCls:$e,responsive:Ye,component:y,invalidate:We},sn=s?function(ae,he){var Ee=Ke(ae,he);return u.exports.createElement(wi.Provider,{key:Ee,value:$($({},it),{},{order:he,item:ae,itemKey:Ee,registerSize:Jt,display:he<=se})},s(ae,he))}:function(ae,he){var Ee=Ke(ae,he);return u.exports.createElement(br,Z({},it,{order:he,key:Ee,item:ae,renderItem:nt,itemKey:Ee,registerSize:Jt,display:he<=se}))},Dt,ln={order:an?se:Number.MAX_SAFE_INTEGER,className:"".concat($e,"-rest"),registerSize:at,display:an};if(g)g&&(Dt=u.exports.createElement(wi.Provider,{value:$($({},it),ln)},g(ht)));else{var rt=b||_v;Dt=u.exports.createElement(br,Z({},it,ln),typeof rt=="function"?rt(ht):rt)}var Mt=u.exports.createElement(E,Z({className:fe(!We&&r,v),style:h,ref:e},x),Xe.map(sn),zt?Dt:null,w&&u.exports.createElement(br,Z({},it,{order:se,className:"".concat($e,"-suffix"),registerSize:Sn,display:!0,style:vt}),w));return Ye&&(Mt=u.exports.createElement(gr,{onResize:Qn},Mt)),Mt}var Kt=u.exports.forwardRef(Iv);Kt.displayName="Overflow";Kt.Item=Il;Kt.RESPONSIVE=kl;Kt.INVALIDATE=Rl;function xi(t,e){var n=$({},t);return Array.isArray(e)&&e.forEach(function(r){delete n[r]}),n}function kv(t,e,n){var r=u.exports.useRef({});return(!("value"in r.current)||n(r.current.condition,e))&&(r.current.value=t(),r.current.condition=e),r.current.value}var gt=u.exports.createContext(null);function Rv(t,e){var n=$({},t);return Object.keys(e).forEach(function(r){var i=e[r];i!==void 0&&(n[r]=i)}),n}function yr(t){var e=t.children,n=t.locked,r=Oe(t,["children","locked"]),i=u.exports.useContext(gt),o=kv(function(){return Rv(i,r)},[i,r],function(a,s){return!n&&(a[0]!==s[0]||!lr(a[1],s[1]))});return u.exports.createElement(gt.Provider,{value:o},e)}function Nl(t,e,n,r){var i=u.exports.useContext(gt),o=i.activeKey,a=i.onActive,s=i.onInactive,l={active:o===t};return e||(l.onMouseEnter=function(c){n==null||n({key:t,domEvent:c}),a(t)},l.onMouseLeave=function(c){r==null||r({key:t,domEvent:c}),s(t)}),l}function Ci(t){var e=t.item,n=Oe(t,["item"]);return Object.defineProperty(n,"item",{get:function(){return cr(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),e}}),n}function Al(t){var e=t.icon,n=t.props,r=t.children,i;return typeof e=="function"?i=u.exports.createElement(e,$({},n)):i=e,i||r||null}function Ll(t){var e=u.exports.useContext(gt),n=e.mode,r=e.rtl,i=e.inlineIndent;if(n!=="inline")return null;var o=t;return r?{paddingRight:o*i}:{paddingLeft:o*i}}var Nv=[],zl=u.exports.createContext(null);function Si(){return u.exports.useContext(zl)}var Fl=u.exports.createContext(Nv);function wr(t){var e=u.exports.useContext(Fl);return u.exports.useMemo(function(){return t!==void 0?[].concat(mt(e),[t]):e},[e,t])}var Bl=u.exports.createContext(null),jl=u.exports.createContext(null);function Wl(t,e){return t===void 0?null:"".concat(t,"-").concat(e)}function Hl(t){var e=u.exports.useContext(jl);return Wl(e,t)}var Av=function(t){Ft(n,t);var e=Wt(n);function n(){return Bt(this,n),e.apply(this,arguments)}return jt(n,[{key:"render",value:function(){var i=this.props,o=i.title,a=i.attribute,s=i.elementRef,l=Oe(i,["title","attribute","elementRef"]),c=xi(l,["eventKey"]);return cr(!a,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),u.exports.createElement(Kt.Item,Z({},a,{title:typeof o=="string"?o:void 0},c,{ref:s}))}}]),n}(u.exports.Component),Lv=function(e){var n,r=e.style,i=e.className,o=e.eventKey;e.warnKey;var a=e.disabled,s=e.itemIcon,l=e.children,c=e.role,d=e.onMouseEnter,f=e.onMouseLeave,h=e.onClick,v=e.onKeyDown,m=e.onFocus,b=Oe(e,["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"]),g=Hl(o),w=u.exports.useContext(gt),D=w.prefixCls,E=w.onItemClick,y=w.disabled,S=w.overflowDisabled,x=w.itemIcon,I=w.selectedKeys,_=w.onActive,F="".concat(D,"-item"),k=u.exports.useRef(),P=u.exports.useRef(),O=y||a,j=wr(o),N=function(q){return{key:o,keyPath:mt(j).reverse(),item:k.current,domEvent:q}},R=s||x,V=Nl(o,O,d,f),T=V.active,C=Oe(V,["active"]),M=I.includes(o),A=Ll(j.length),W=function(q){if(!O){var J=N(q);h==null||h(Ci(J)),E(J)}},L=function(q){if(v==null||v(q),q.which===we.ENTER){var J=N(q);h==null||h(Ci(J)),E(J)}},K=function(q){_(o),m==null||m(q)},Q={};return e.role==="option"&&(Q["aria-selected"]=M),u.exports.createElement(Av,Z({ref:k,elementRef:P,role:c===null?"none":c||"menuitem",tabIndex:a?null:-1,"data-menu-id":S&&g?null:g},b,C,Q,{component:"li","aria-disabled":a,style:$($({},A),r),className:fe(F,(n={},G(n,"".concat(F,"-active"),T),G(n,"".concat(F,"-selected"),M),G(n,"".concat(F,"-disabled"),O),n),i),onClick:W,onKeyDown:L,onFocus:K}),l,u.exports.createElement(Al,{props:$($({},e),{},{isSelected:M}),icon:R}))};function Fo(t){var e=t.eventKey,n=Si(),r=wr(e);return u.exports.useEffect(function(){if(n)return n.registerPath(e,r),function(){n.unregisterPath(e,r)}},[r]),n?null:u.exports.createElement(Lv,t)}function Bo(t,e){return Rn(t).map(function(n,r){if(u.exports.isValidElement(n)){var i,o,a=n.key,s=(i=(o=n.props)===null||o===void 0?void 0:o.eventKey)!==null&&i!==void 0?i:a,l=s==null;l&&(s="tmp_key-".concat([].concat(mt(e),[r]).join("-")));var c={key:s,eventKey:s};return u.exports.cloneElement(n,c)}return n})}function zn(t){var e=u.exports.useRef(t);e.current=t;var n=u.exports.useCallback(function(){for(var r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(r=e.current)===null||r===void 0?void 0:r.call.apply(r,[e].concat(o))},[]);return t?n:void 0}var zv=function(e,n){var r=e.className,i=e.children,o=Oe(e,["className","children"]),a=u.exports.useContext(gt),s=a.prefixCls,l=a.mode;return u.exports.createElement("ul",Z({className:fe(s,"".concat(s,"-sub"),"".concat(s,"-").concat(l==="inline"?"inline":"vertical"),r)},o,{"data-menu-list":!0,ref:n}),i)},jo=u.exports.forwardRef(zv);jo.displayName="SubMenuList";function Ei(t,e){return t?t.contains(e):!1}function Di(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var Fv=u.exports.forwardRef(function(t,e){var n=t.didUpdate,r=t.getContainer,i=t.children,o=u.exports.useRef();u.exports.useImperativeHandle(e,function(){return{}});var a=u.exports.useRef(!1);return!a.current&&Di()&&(o.current=r(),a.current=!0),u.exports.useEffect(function(){n==null||n(t)}),u.exports.useEffect(function(){return function(){var s,l;(s=o.current)===null||s===void 0||(l=s.parentNode)===null||l===void 0||l.removeChild(o.current)}},[]),o.current?On.createPortal(i,o.current):null});function Bv(t,e,n){return n?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function jv(t,e,n){var r=t[e]||{};return $($({},r),n)}function Wv(t,e,n,r){for(var i=n.points,o=Object.keys(t),a=0;a<o.length;a+=1){var s=o[a];if(Bv(t[s].points,i,r))return"".concat(e,"-placement-").concat(s)}return""}function $l(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function Hv(t,e){var n={animationend:$l("Animation","AnimationEnd"),transitionend:$l("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var $v=Hv(Di(),typeof window!="undefined"?window:{}),Kl={};if(Di()){var Kv=document.createElement("div");Kl=Kv.style}var Mi={};function Vl(t){if(Mi[t])return Mi[t];var e=$v[t];if(e)for(var n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(e,o)&&o in Kl)return Mi[t]=e[o],Mi[t]}return""}var Ul=Vl("animationend"),Gl=Vl("transitionend"),Vv=!!(Ul&&Gl),ql=Ul||"animationend",Yl=Gl||"transitionend";function Xl(t,e){if(!t)return null;if(Zt(t)==="object"){var n=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return t[n]}return"".concat(t,"-").concat(e)}var xr="none",Wo="appear",Ho="enter",$o="leave",Jl="none",Vt="prepare",Fn="start",Bn="active",Ko="end";function Vo(t){var e=u.exports.useRef(!1),n=u.exports.useState(t),r=U(n,2),i=r[0],o=r[1];function a(s){e.current||o(s)}return u.exports.useEffect(function(){return function(){e.current=!0}},[]),[i,a]}var Zl=Di()?u.exports.useLayoutEffect:u.exports.useEffect,Uv=function(){var t=u.exports.useRef(null);function e(){Ce.cancel(t.current)}function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var o=Ce(function(){i<=1?r({isCanceled:function(){return o!==t.current}}):n(r,i-1)});t.current=o}return u.exports.useEffect(function(){return function(){e()}},[]),[n,e]},Ql=[Vt,Fn,Bn,Ko],ec=!1,Gv=!0;function tc(t){return t===Bn||t===Ko}var qv=function(t,e){var n=u.exports.useState(Jl),r=U(n,2),i=r[0],o=r[1],a=Uv(),s=U(a,2),l=s[0],c=s[1];function d(){o(Vt)}return Zl(function(){if(i!==Jl&&i!==Ko){var f=Ql.indexOf(i),h=Ql[f+1],v=e(i);v===ec?o(h):l(function(m){function b(){m.isCanceled()||o(h)}v===!0?b():Promise.resolve(v).then(b)})}},[t,i]),u.exports.useEffect(function(){return function(){c()}},[]),[d,i]},Yv=function(t){var e=u.exports.useRef(),n=u.exports.useRef(t);n.current=t;var r=u.exports.useCallback(function(a){n.current(a)},[]);function i(a){a&&(a.removeEventListener(Yl,r),a.removeEventListener(ql,r))}function o(a){e.current&&e.current!==a&&i(e.current),a&&a!==e.current&&(a.addEventListener(Yl,r),a.addEventListener(ql,r),e.current=a)}return u.exports.useEffect(function(){return function(){i(e.current)}},[]),[o,i]};function Xv(t,e,n,r){var i=r.motionEnter,o=i===void 0?!0:i,a=r.motionAppear,s=a===void 0?!0:a,l=r.motionLeave,c=l===void 0?!0:l,d=r.motionDeadline,f=r.motionLeaveImmediately,h=r.onAppearPrepare,v=r.onEnterPrepare,m=r.onLeavePrepare,b=r.onAppearStart,g=r.onEnterStart,w=r.onLeaveStart,D=r.onAppearActive,E=r.onEnterActive,y=r.onLeaveActive,S=r.onAppearEnd,x=r.onEnterEnd,I=r.onLeaveEnd,_=r.onVisibleChanged,F=Vo(),k=U(F,2),P=k[0],O=k[1],j=Vo(xr),N=U(j,2),R=N[0],V=N[1],T=Vo(null),C=U(T,2),M=C[0],A=C[1],W=u.exports.useRef(!1),L=u.exports.useRef(null),K=u.exports.useRef(!1),Q=u.exports.useRef(null);function z(){var se=n();return se||Q.current}var q=u.exports.useRef(!1);function J(se){var ce=z();if(!(se&&!se.deadline&&se.target!==ce)){var Se;R===Wo&&q.current?Se=S==null?void 0:S(ce,se):R===Ho&&q.current?Se=x==null?void 0:x(ce,se):R===$o&&q.current&&(Se=I==null?void 0:I(ce,se)),Se!==!1&&!K.current&&(V(xr),A(null))}}var le=Yv(J),ve=U(le,1),me=ve[0],be=u.exports.useMemo(function(){var se,ce,Se;switch(R){case"appear":return se={},G(se,Vt,h),G(se,Fn,b),G(se,Bn,D),se;case"enter":return ce={},G(ce,Vt,v),G(ce,Fn,g),G(ce,Bn,E),ce;case"leave":return Se={},G(Se,Vt,m),G(Se,Fn,w),G(Se,Bn,y),Se;default:return{}}},[R]),ze=qv(R,function(se){if(se===Vt){var ce=be[Vt];return ce?ce(z()):ec}if(Ne in be){var Se;A(((Se=be[Ne])===null||Se===void 0?void 0:Se.call(be,z(),null))||null)}return Ne===Bn&&(me(z()),d>0&&(clearTimeout(L.current),L.current=setTimeout(function(){J({deadline:!0})},d))),Gv}),Fe=U(ze,2),tt=Fe[0],Ne=Fe[1],ue=tc(Ne);q.current=ue,Zl(function(){O(e);var se=W.current;if(W.current=!0,!!t){var ce;!se&&e&&s&&(ce=Wo),se&&e&&o&&(ce=Ho),(se&&!e&&c||!se&&f&&!e&&c)&&(ce=$o),ce&&(V(ce),tt())}},[e]),u.exports.useEffect(function(){(R===Wo&&!s||R===Ho&&!o||R===$o&&!c)&&V(xr)},[s,o,c]),u.exports.useEffect(function(){return function(){clearTimeout(L.current),K.current=!0}},[]),u.exports.useEffect(function(){P!==void 0&&R===xr&&(_==null||_(P))},[P,R]);var je=M;return be[Vt]&&Ne===Fn&&(je=$({transition:"none"},je)),[R,Ne,je,P??e]}var Jv=function(t){Ft(n,t);var e=Wt(n);function n(){return Bt(this,n),e.apply(this,arguments)}return jt(n,[{key:"render",value:function(){return this.props.children}}]),n}(u.exports.Component);function Zv(t){var e=t;Zt(t)==="object"&&(e=t.transitionSupport);function n(i){return!!(i.motionName&&e)}var r=u.exports.forwardRef(function(i,o){var a=i.visible,s=a===void 0?!0:a,l=i.removeOnLeave,c=l===void 0?!0:l,d=i.forceRender,f=i.children,h=i.motionName,v=i.leavedClassName,m=i.eventProps,b=n(i),g=u.exports.useRef(),w=u.exports.useRef();function D(){try{return No(g.current||w.current)}catch(V){return null}}var E=Xv(b,s,D,i),y=U(E,4),S=y[0],x=y[1],I=y[2],_=y[3],F=u.exports.useRef(_);_&&(F.current=!0);var k=u.exports.useRef(o);k.current=o;var P=u.exports.useCallback(function(V){g.current=V,wl(k.current,V)},[]),O,j=$($({},m),{},{visible:s});if(!f)O=null;else if(S===xr||!n(i))_?O=f($({},j),P):!c&&F.current?O=f($($({},j),{},{className:v}),P):d?O=f($($({},j),{},{style:{display:"none"}}),P):O=null;else{var N,R;x===Vt?R="prepare":tc(x)?R="active":x===Fn&&(R="start"),O=f($($({},j),{},{className:fe(Xl(h,S),(N={},G(N,Xl(h,"".concat(S,"-").concat(R)),R),G(N,h,typeof h=="string"),N)),style:I}),P)}return u.exports.createElement(Jv,{ref:w},O)});return r.displayName="CSSMotion",r}var Cr=Zv(Vv);function nc(t){var e=t.prefixCls,n=t.motion,r=t.animation,i=t.transitionName;return n||(r?{motionName:"".concat(e,"-").concat(r)}:i?{motionName:i}:null)}function Qv(t){var e=t.prefixCls,n=t.visible,r=t.zIndex,i=t.mask,o=t.maskMotion,a=t.maskAnimation,s=t.maskTransitionName;if(!i)return null;var l={};return(o||s||a)&&(l=$({motionAppear:!0},nc({motion:o,prefixCls:e,transitionName:s,animation:a}))),u.exports.createElement(Cr,Z({},l,{visible:n,removeOnLeave:!0}),function(c){var d=c.className;return u.exports.createElement("div",{style:{zIndex:r},className:fe("".concat(e,"-mask"),d)})})}var rc=function(t){if(!t)return!1;if(t.offsetParent)return!0;if(t.getBBox){var e=t.getBBox();if(e.width||e.height)return!0}if(t.getBoundingClientRect){var n=t.getBoundingClientRect();if(n.width||n.height)return!0}return!1};function ic(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ic(Object(n),!0).forEach(function(r){em(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ic(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oi(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Oi=function(e){return typeof e}:Oi=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oi(t)}function em(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Sr,tm={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function Ti(){if(Sr!==void 0)return Sr;Sr="";var t=document.createElement("p").style,e="Transform";for(var n in tm)n+e in t&&(Sr=n);return Sr}function ac(){return Ti()?"".concat(Ti(),"TransitionProperty"):"transitionProperty"}function Pi(){return Ti()?"".concat(Ti(),"Transform"):"transform"}function sc(t,e){var n=ac();n&&(t.style[n]=e,n!=="transitionProperty"&&(t.style.transitionProperty=e))}function Uo(t,e){var n=Pi();n&&(t.style[n]=e,n!=="transform"&&(t.style.transform=e))}function nm(t){return t.style.transitionProperty||t.style[ac()]}function rm(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("transform")||e.getPropertyValue(Pi());if(n&&n!=="none"){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}var im=/matrix\((.*)\)/,om=/matrix3d\((.*)\)/;function am(t,e){var n=window.getComputedStyle(t,null),r=n.getPropertyValue("transform")||n.getPropertyValue(Pi());if(r&&r!=="none"){var i,o=r.match(im);if(o)o=o[1],i=o.split(",").map(function(s){return parseFloat(s,10)}),i[4]=e.x,i[5]=e.y,Uo(t,"matrix(".concat(i.join(","),")"));else{var a=r.match(om)[1];i=a.split(",").map(function(s){return parseFloat(s,10)}),i[12]=e.x,i[13]=e.y,Uo(t,"matrix3d(".concat(i.join(","),")"))}}else Uo(t,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}var sm=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,Er;function lc(t){var e=t.style.display;t.style.display="none",t.offsetHeight,t.style.display=e}function jn(t,e,n){var r=n;if(Oi(e)==="object"){for(var i in e)e.hasOwnProperty(i)&&jn(t,i,e[i]);return}if(typeof r!="undefined"){typeof r=="number"&&(r="".concat(r,"px")),t.style[e]=r;return}return Er(t,e)}function lm(t){var e,n,r,i=t.ownerDocument,o=i.body,a=i&&i.documentElement;return e=t.getBoundingClientRect(),n=e.left,r=e.top,n-=a.clientLeft||o.clientLeft||0,r-=a.clientTop||o.clientTop||0,{left:n,top:r}}function cc(t,e){var n=t["page".concat(e?"Y":"X","Offset")],r="scroll".concat(e?"Top":"Left");if(typeof n!="number"){var i=t.document;n=i.documentElement[r],typeof n!="number"&&(n=i.body[r])}return n}function uc(t){return cc(t)}function dc(t){return cc(t,!0)}function Dr(t){var e=lm(t),n=t.ownerDocument,r=n.defaultView||n.parentWindow;return e.left+=uc(r),e.top+=dc(r),e}function Go(t){return t!=null&&t==t.window}function fc(t){return Go(t)?t.document:t.nodeType===9?t:t.ownerDocument}function cm(t,e,n){var r=n,i="",o=fc(t);return r=r||o.defaultView.getComputedStyle(t,null),r&&(i=r.getPropertyValue(e)||r[e]),i}var um=new RegExp("^(".concat(sm,")(?!px)[a-z%]+$"),"i"),dm=/^(top|right|bottom|left)$/,qo="currentStyle",Yo="runtimeStyle",hn="left",fm="px";function pm(t,e){var n=t[qo]&&t[qo][e];if(um.test(n)&&!dm.test(e)){var r=t.style,i=r[hn],o=t[Yo][hn];t[Yo][hn]=t[qo][hn],r[hn]=e==="fontSize"?"1em":n||0,n=r.pixelLeft+fm,r[hn]=i,t[Yo][hn]=o}return n===""?"auto":n}typeof window!="undefined"&&(Er=window.getComputedStyle?cm:pm);function _i(t,e){return t==="left"?e.useCssRight?"right":t:e.useCssBottom?"bottom":t}function pc(t){if(t==="left")return"right";if(t==="right")return"left";if(t==="top")return"bottom";if(t==="bottom")return"top"}function hc(t,e,n){jn(t,"position")==="static"&&(t.style.position="relative");var r=-999,i=-999,o=_i("left",n),a=_i("top",n),s=pc(o),l=pc(a);o!=="left"&&(r=999),a!=="top"&&(i=999);var c="",d=Dr(t);("left"in e||"top"in e)&&(c=nm(t)||"",sc(t,"none")),"left"in e&&(t.style[s]="",t.style[o]="".concat(r,"px")),"top"in e&&(t.style[l]="",t.style[a]="".concat(i,"px")),lc(t);var f=Dr(t),h={};for(var v in e)if(e.hasOwnProperty(v)){var m=_i(v,n),b=v==="left"?r:i,g=d[v]-f[v];m===v?h[m]=b+g:h[m]=b-g}jn(t,h),lc(t),("left"in e||"top"in e)&&sc(t,c);var w={};for(var D in e)if(e.hasOwnProperty(D)){var E=_i(D,n),y=e[D]-d[D];D===E?w[E]=h[E]+y:w[E]=h[E]-y}jn(t,w)}function hm(t,e){var n=Dr(t),r=rm(t),i={x:r.x,y:r.y};"left"in e&&(i.x=r.x+e.left-n.left),"top"in e&&(i.y=r.y+e.top-n.top),am(t,i)}function vm(t,e,n){if(n.ignoreShake){var r=Dr(t),i=r.left.toFixed(0),o=r.top.toFixed(0),a=e.left.toFixed(0),s=e.top.toFixed(0);if(i===a&&o===s)return}n.useCssRight||n.useCssBottom?hc(t,e,n):n.useCssTransform&&Pi()in document.body.style?hm(t,e):hc(t,e,n)}function Xo(t,e){for(var n=0;n<t.length;n++)e(t[n])}function vc(t){return Er(t,"boxSizing")==="border-box"}var mm=["margin","border","padding"],Jo=-1,gm=2,Zo=1,bm=0;function ym(t,e,n){var r={},i=t.style,o;for(o in e)e.hasOwnProperty(o)&&(r[o]=i[o],i[o]=e[o]);n.call(t);for(o in e)e.hasOwnProperty(o)&&(i[o]=r[o])}function Mr(t,e,n){var r=0,i,o,a;for(o=0;o<e.length;o++)if(i=e[o],i)for(a=0;a<n.length;a++){var s=void 0;i==="border"?s="".concat(i).concat(n[a],"Width"):s=i+n[a],r+=parseFloat(Er(t,s))||0}return r}var kt={getParent:function(e){var n=e;do n.nodeType===11&&n.host?n=n.host:n=n.parentNode;while(n&&n.nodeType!==1&&n.nodeType!==9);return n}};Xo(["Width","Height"],function(t){kt["doc".concat(t)]=function(e){var n=e.document;return Math.max(n.documentElement["scroll".concat(t)],n.body["scroll".concat(t)],kt["viewport".concat(t)](n))},kt["viewport".concat(t)]=function(e){var n="client".concat(t),r=e.document,i=r.body,o=r.documentElement,a=o[n];return r.compatMode==="CSS1Compat"&&a||i&&i[n]||a}});function mc(t,e,n){var r=n;if(Go(t))return e==="width"?kt.viewportWidth(t):kt.viewportHeight(t);if(t.nodeType===9)return e==="width"?kt.docWidth(t):kt.docHeight(t);var i=e==="width"?["Left","Right"]:["Top","Bottom"],o=e==="width"?t.getBoundingClientRect().width:t.getBoundingClientRect().height,a=vc(t),s=0;(o==null||o<=0)&&(o=void 0,s=Er(t,e),(s==null||Number(s)<0)&&(s=t.style[e]||0),s=parseFloat(s)||0),r===void 0&&(r=a?Zo:Jo);var l=o!==void 0||a,c=o||s;return r===Jo?l?c-Mr(t,["border","padding"],i):s:l?r===Zo?c:c+(r===gm?-Mr(t,["border"],i):Mr(t,["margin"],i)):s+Mr(t,mm.slice(r),i)}var wm={position:"absolute",visibility:"hidden",display:"block"};function gc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=e[0];return i.offsetWidth!==0?r=mc.apply(void 0,e):ym(i,wm,function(){r=mc.apply(void 0,e)}),r}Xo(["width","height"],function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);kt["outer".concat(e)]=function(r,i){return r&&gc(r,t,i?bm:Zo)};var n=t==="width"?["Left","Right"]:["Top","Bottom"];kt[t]=function(r,i){var o=i;if(o!==void 0){if(r){var a=vc(r);return a&&(o+=Mr(r,["padding","border"],n)),jn(r,t,o)}return}return r&&gc(r,t,Jo)}});function bc(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var re={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var n=e.ownerDocument||e;return n.defaultView||n.parentWindow},getDocument:fc,offset:function(e,n,r){if(typeof n!="undefined")vm(e,n,r||{});else return Dr(e)},isWindow:Go,each:Xo,css:jn,clone:function(e){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);var i=e.overflow;if(i)for(n in e)e.hasOwnProperty(n)&&(r.overflow[n]=e.overflow[n]);return r},mix:bc,getWindowScrollLeft:function(e){return uc(e)},getWindowScrollTop:function(e){return dc(e)},merge:function(){for(var e={},n=0;n<arguments.length;n++)re.mix(e,n<0||arguments.length<=n?void 0:arguments[n]);return e},viewportWidth:0,viewportHeight:0};bc(re,kt);var Qo=re.getParent;function ea(t){if(re.isWindow(t)||t.nodeType===9)return null;var e=re.getDocument(t),n=e.body,r,i=re.css(t,"position"),o=i==="fixed"||i==="absolute";if(!o)return t.nodeName.toLowerCase()==="html"?null:Qo(t);for(r=Qo(t);r&&r!==n&&r.nodeType!==9;r=Qo(r))if(i=re.css(r,"position"),i!=="static")return r;return null}var yc=re.getParent;function xm(t){if(re.isWindow(t)||t.nodeType===9)return!1;var e=re.getDocument(t),n=e.body,r=null;for(r=yc(t);r&&r!==n&&r!==e;r=yc(r)){var i=re.css(r,"position");if(i==="fixed")return!0}return!1}function ta(t,e){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=ea(t),i=re.getDocument(t),o=i.defaultView||i.parentWindow,a=i.body,s=i.documentElement;r;){if((navigator.userAgent.indexOf("MSIE")===-1||r.clientWidth!==0)&&r!==a&&r!==s&&re.css(r,"overflow")!=="visible"){var l=re.offset(r);l.left+=r.clientLeft,l.top+=r.clientTop,n.top=Math.max(n.top,l.top),n.right=Math.min(n.right,l.left+r.clientWidth),n.bottom=Math.min(n.bottom,l.top+r.clientHeight),n.left=Math.max(n.left,l.left)}else if(r===a||r===s)break;r=ea(r)}var c=null;if(!re.isWindow(t)&&t.nodeType!==9){c=t.style.position;var d=re.css(t,"position");d==="absolute"&&(t.style.position="fixed")}var f=re.getWindowScrollLeft(o),h=re.getWindowScrollTop(o),v=re.viewportWidth(o),m=re.viewportHeight(o),b=s.scrollWidth,g=s.scrollHeight,w=window.getComputedStyle(a);if(w.overflowX==="hidden"&&(b=o.innerWidth),w.overflowY==="hidden"&&(g=o.innerHeight),t.style&&(t.style.position=c),e||xm(t))n.left=Math.max(n.left,f),n.top=Math.max(n.top,h),n.right=Math.min(n.right,f+v),n.bottom=Math.min(n.bottom,h+m);else{var D=Math.max(b,f+v);n.right=Math.min(n.right,D);var E=Math.max(g,h+m);n.bottom=Math.min(n.bottom,E)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function Cm(t,e,n,r){var i=re.clone(t),o={width:e.width,height:e.height};return r.adjustX&&i.left<n.left&&(i.left=n.left),r.resizeWidth&&i.left>=n.left&&i.left+o.width>n.right&&(o.width-=i.left+o.width-n.right),r.adjustX&&i.left+o.width>n.right&&(i.left=Math.max(n.right-o.width,n.left)),r.adjustY&&i.top<n.top&&(i.top=n.top),r.resizeHeight&&i.top>=n.top&&i.top+o.height>n.bottom&&(o.height-=i.top+o.height-n.bottom),r.adjustY&&i.top+o.height>n.bottom&&(i.top=Math.max(n.bottom-o.height,n.top)),re.mix(i,o)}function na(t){var e,n,r;if(!re.isWindow(t)&&t.nodeType!==9)e=re.offset(t),n=re.outerWidth(t),r=re.outerHeight(t);else{var i=re.getWindow(t);e={left:re.getWindowScrollLeft(i),top:re.getWindowScrollTop(i)},n=re.viewportWidth(i),r=re.viewportHeight(i)}return e.width=n,e.height=r,e}function wc(t,e){var n=e.charAt(0),r=e.charAt(1),i=t.width,o=t.height,a=t.left,s=t.top;return n==="c"?s+=o/2:n==="b"&&(s+=o),r==="c"?a+=i/2:r==="r"&&(a+=i),{left:a,top:s}}function Ii(t,e,n,r,i){var o=wc(e,n[1]),a=wc(t,n[0]),s=[a.left-o.left,a.top-o.top];return{left:Math.round(t.left-s[0]+r[0]-i[0]),top:Math.round(t.top-s[1]+r[1]-i[1])}}function xc(t,e,n){return t.left<n.left||t.left+e.width>n.right}function Cc(t,e,n){return t.top<n.top||t.top+e.height>n.bottom}function Sm(t,e,n){return t.left>n.right||t.left+e.width<n.left}function Em(t,e,n){return t.top>n.bottom||t.top+e.height<n.top}function ki(t,e,n){var r=[];return re.each(t,function(i){r.push(i.replace(e,function(o){return n[o]}))}),r}function Ri(t,e){return t[e]=-t[e],t}function Sc(t,e){var n;return/%$/.test(t)?n=parseInt(t.substring(0,t.length-1),10)/100*e:n=parseInt(t,10),n||0}function Ec(t,e){t[0]=Sc(t[0],e.width),t[1]=Sc(t[1],e.height)}function Dc(t,e,n,r){var i=n.points,o=n.offset||[0,0],a=n.targetOffset||[0,0],s=n.overflow,l=n.source||t;o=[].concat(o),a=[].concat(a),s=s||{};var c={},d=0,f=!!(s&&s.alwaysByViewport),h=ta(l,f),v=na(l);Ec(o,v),Ec(a,e);var m=Ii(v,e,i,o,a),b=re.merge(v,m);if(h&&(s.adjustX||s.adjustY)&&r){if(s.adjustX&&xc(m,v,h)){var g=ki(i,/[lr]/gi,{l:"r",r:"l"}),w=Ri(o,0),D=Ri(a,0),E=Ii(v,e,g,w,D);Sm(E,v,h)||(d=1,i=g,o=w,a=D)}if(s.adjustY&&Cc(m,v,h)){var y=ki(i,/[tb]/gi,{t:"b",b:"t"}),S=Ri(o,1),x=Ri(a,1),I=Ii(v,e,y,S,x);Em(I,v,h)||(d=1,i=y,o=S,a=x)}d&&(m=Ii(v,e,i,o,a),re.mix(b,m));var _=xc(m,v,h),F=Cc(m,v,h);if(_||F){var k=i;_&&(k=ki(i,/[lr]/gi,{l:"r",r:"l"})),F&&(k=ki(i,/[tb]/gi,{t:"b",b:"t"})),i=k,o=n.offset||[0,0],a=n.targetOffset||[0,0]}c.adjustX=s.adjustX&&_,c.adjustY=s.adjustY&&F,(c.adjustX||c.adjustY)&&(b=Cm(m,v,h,c))}return b.width!==v.width&&re.css(l,"width",re.width(l)+b.width-v.width),b.height!==v.height&&re.css(l,"height",re.height(l)+b.height-v.height),re.offset(l,{left:b.left,top:b.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:i,offset:o,targetOffset:a,overflow:c}}function Dm(t,e){var n=ta(t,e),r=na(t);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}function ra(t,e,n){var r=n.target||e,i=na(r),o=!Dm(r,n.overflow&&n.overflow.alwaysByViewport);return Dc(t,i,n,o)}ra.__getOffsetParent=ea;ra.__getVisibleRectForElement=ta;function Mm(t,e,n){var r,i,o=re.getDocument(t),a=o.defaultView||o.parentWindow,s=re.getWindowScrollLeft(a),l=re.getWindowScrollTop(a),c=re.viewportWidth(a),d=re.viewportHeight(a);"pageX"in e?r=e.pageX:r=s+e.clientX,"pageY"in e?i=e.pageY:i=l+e.clientY;var f={left:r,top:i,width:0,height:0},h=r>=0&&r<=s+c&&i>=0&&i<=l+d,v=[n.points[0],"cc"];return Dc(t,f,oc(oc({},n),{},{points:v}),h)}var Om=Wf;function Tm(t,e){return Om(t,e)}var Pm=Tm;function _m(t,e){return t===e?!0:!t||!e?!1:"pageX"in e&&"pageY"in e?t.pageX===e.pageX&&t.pageY===e.pageY:"clientX"in e&&"clientY"in e?t.clientX===e.clientX&&t.clientY===e.clientY:!1}function Im(t,e){t!==document.activeElement&&Ei(e,t)&&typeof t.focus=="function"&&t.focus()}function Mc(t,e){var n=null,r=null;function i(a){var s=U(a,1),l=s[0].target;if(!!document.documentElement.contains(l)){var c=l.getBoundingClientRect(),d=c.width,f=c.height,h=Math.floor(d),v=Math.floor(f);(n!==h||r!==v)&&Promise.resolve().then(function(){e({width:h,height:v})}),n=h,r=v}}var o=new zo(i);return t&&o.observe(t),function(){o.disconnect()}}var km=function(t,e){var n=p.useRef(!1),r=p.useRef(null);function i(){window.clearTimeout(r.current)}function o(a){if(!n.current||a===!0){if(t()===!1)return;n.current=!0,i(),r.current=window.setTimeout(function(){n.current=!1},e)}else i(),r.current=window.setTimeout(function(){n.current=!1,o()},e)}return[o,function(){n.current=!1,i()}]};function Oc(t){return typeof t!="function"?null:t()}function Tc(t){return Zt(t)!=="object"||!t?null:t}var Rm=function(e,n){var r=e.children,i=e.disabled,o=e.target,a=e.align,s=e.onAlign,l=e.monitorWindowResize,c=e.monitorBufferTime,d=c===void 0?0:c,f=p.useRef({}),h=p.useRef(),v=p.Children.only(r),m=p.useRef({});m.current.disabled=i,m.current.target=o,m.current.align=a,m.current.onAlign=s;var b=km(function(){var x=m.current,I=x.disabled,_=x.target,F=x.align,k=x.onAlign;if(!I&&_){var P=h.current,O,j=Oc(_),N=Tc(_);f.current.element=j,f.current.point=N,f.current.align=F;var R=document,V=R.activeElement;return j&&rc(j)?O=ra(P,j,F):N&&(O=Mm(P,N,F)),Im(V,P),k&&O&&k(P,O),!0}return!1},d),g=U(b,2),w=g[0],D=g[1],E=p.useRef({cancel:function(){}}),y=p.useRef({cancel:function(){}});p.useEffect(function(){var x=Oc(o),I=Tc(o);h.current!==y.current.element&&(y.current.cancel(),y.current.element=h.current,y.current.cancel=Mc(h.current,w)),(f.current.element!==x||!_m(f.current.point,I)||!Pm(f.current.align,a))&&(w(),E.current.element!==x&&(E.current.cancel(),E.current.element=x,E.current.cancel=Mc(x,w)))}),p.useEffect(function(){i?D():w()},[i]);var S=p.useRef(null);return p.useEffect(function(){l?S.current||(S.current=ur(window,"resize",w)):S.current&&(S.current.remove(),S.current=null)},[l]),p.useEffect(function(){return function(){E.current.cancel(),y.current.cancel(),S.current&&S.current.remove(),D()}},[]),p.useImperativeHandle(n,function(){return{forceAlign:function(){return w(!0)}}}),p.isValidElement(v)&&(v=p.cloneElement(v,{ref:Ao(v.ref,h)})),v},Pc=p.forwardRef(Rm);Pc.displayName="Align";var _c={exports:{}};(function(t){var e=function(n){var r=Object.prototype,i=r.hasOwnProperty,o,a=typeof Symbol=="function"?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function d(C,M,A){return Object.defineProperty(C,M,{value:A,enumerable:!0,configurable:!0,writable:!0}),C[M]}try{d({},"")}catch(C){d=function(M,A,W){return M[A]=W}}function f(C,M,A,W){var L=M&&M.prototype instanceof D?M:D,K=Object.create(L.prototype),Q=new R(W||[]);return K._invoke=P(C,A,Q),K}n.wrap=f;function h(C,M,A){try{return{type:"normal",arg:C.call(M,A)}}catch(W){return{type:"throw",arg:W}}}var v="suspendedStart",m="suspendedYield",b="executing",g="completed",w={};function D(){}function E(){}function y(){}var S={};d(S,s,function(){return this});var x=Object.getPrototypeOf,I=x&&x(x(V([])));I&&I!==r&&i.call(I,s)&&(S=I);var _=y.prototype=D.prototype=Object.create(S);E.prototype=y,d(_,"constructor",y),d(y,"constructor",E),E.displayName=d(y,c,"GeneratorFunction");function F(C){["next","throw","return"].forEach(function(M){d(C,M,function(A){return this._invoke(M,A)})})}n.isGeneratorFunction=function(C){var M=typeof C=="function"&&C.constructor;return M?M===E||(M.displayName||M.name)==="GeneratorFunction":!1},n.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,y):(C.__proto__=y,d(C,c,"GeneratorFunction")),C.prototype=Object.create(_),C},n.awrap=function(C){return{__await:C}};function k(C,M){function A(K,Q,z,q){var J=h(C[K],C,Q);if(J.type==="throw")q(J.arg);else{var le=J.arg,ve=le.value;return ve&&typeof ve=="object"&&i.call(ve,"__await")?M.resolve(ve.__await).then(function(me){A("next",me,z,q)},function(me){A("throw",me,z,q)}):M.resolve(ve).then(function(me){le.value=me,z(le)},function(me){return A("throw",me,z,q)})}}var W;function L(K,Q){function z(){return new M(function(q,J){A(K,Q,q,J)})}return W=W?W.then(z,z):z()}this._invoke=L}F(k.prototype),d(k.prototype,l,function(){return this}),n.AsyncIterator=k,n.async=function(C,M,A,W,L){L===void 0&&(L=Promise);var K=new k(f(C,M,A,W),L);return n.isGeneratorFunction(M)?K:K.next().then(function(Q){return Q.done?Q.value:K.next()})};function P(C,M,A){var W=v;return function(K,Q){if(W===b)throw new Error("Generator is already running");if(W===g){if(K==="throw")throw Q;return T()}for(A.method=K,A.arg=Q;;){var z=A.delegate;if(z){var q=O(z,A);if(q){if(q===w)continue;return q}}if(A.method==="next")A.sent=A._sent=A.arg;else if(A.method==="throw"){if(W===v)throw W=g,A.arg;A.dispatchException(A.arg)}else A.method==="return"&&A.abrupt("return",A.arg);W=b;var J=h(C,M,A);if(J.type==="normal"){if(W=A.done?g:m,J.arg===w)continue;return{value:J.arg,done:A.done}}else J.type==="throw"&&(W=g,A.method="throw",A.arg=J.arg)}}}function O(C,M){var A=C.iterator[M.method];if(A===o){if(M.delegate=null,M.method==="throw"){if(C.iterator.return&&(M.method="return",M.arg=o,O(C,M),M.method==="throw"))return w;M.method="throw",M.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var W=h(A,C.iterator,M.arg);if(W.type==="throw")return M.method="throw",M.arg=W.arg,M.delegate=null,w;var L=W.arg;if(!L)return M.method="throw",M.arg=new TypeError("iterator result is not an object"),M.delegate=null,w;if(L.done)M[C.resultName]=L.value,M.next=C.nextLoc,M.method!=="return"&&(M.method="next",M.arg=o);else return L;return M.delegate=null,w}F(_),d(_,c,"Generator"),d(_,s,function(){return this}),d(_,"toString",function(){return"[object Generator]"});function j(C){var M={tryLoc:C[0]};1 in C&&(M.catchLoc=C[1]),2 in C&&(M.finallyLoc=C[2],M.afterLoc=C[3]),this.tryEntries.push(M)}function N(C){var M=C.completion||{};M.type="normal",delete M.arg,C.completion=M}function R(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(j,this),this.reset(!0)}n.keys=function(C){var M=[];for(var A in C)M.push(A);return M.reverse(),function W(){for(;M.length;){var L=M.pop();if(L in C)return W.value=L,W.done=!1,W}return W.done=!0,W}};function V(C){if(C){var M=C[s];if(M)return M.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var A=-1,W=function L(){for(;++A<C.length;)if(i.call(C,A))return L.value=C[A],L.done=!1,L;return L.value=o,L.done=!0,L};return W.next=W}}return{next:T}}n.values=V;function T(){return{value:o,done:!0}}return R.prototype={constructor:R,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(N),!C)for(var M in this)M.charAt(0)==="t"&&i.call(this,M)&&!isNaN(+M.slice(1))&&(this[M]=o)},stop:function(){this.done=!0;var C=this.tryEntries[0],M=C.completion;if(M.type==="throw")throw M.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var M=this;function A(q,J){return K.type="throw",K.arg=C,M.next=q,J&&(M.method="next",M.arg=o),!!J}for(var W=this.tryEntries.length-1;W>=0;--W){var L=this.tryEntries[W],K=L.completion;if(L.tryLoc==="root")return A("end");if(L.tryLoc<=this.prev){var Q=i.call(L,"catchLoc"),z=i.call(L,"finallyLoc");if(Q&&z){if(this.prev<L.catchLoc)return A(L.catchLoc,!0);if(this.prev<L.finallyLoc)return A(L.finallyLoc)}else if(Q){if(this.prev<L.catchLoc)return A(L.catchLoc,!0)}else if(z){if(this.prev<L.finallyLoc)return A(L.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(C,M){for(var A=this.tryEntries.length-1;A>=0;--A){var W=this.tryEntries[A];if(W.tryLoc<=this.prev&&i.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var L=W;break}}L&&(C==="break"||C==="continue")&&L.tryLoc<=M&&M<=L.finallyLoc&&(L=null);var K=L?L.completion:{};return K.type=C,K.arg=M,L?(this.method="next",this.next=L.finallyLoc,w):this.complete(K)},complete:function(C,M){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&M&&(this.next=M),w},finish:function(C){for(var M=this.tryEntries.length-1;M>=0;--M){var A=this.tryEntries[M];if(A.finallyLoc===C)return this.complete(A.completion,A.afterLoc),N(A),w}},catch:function(C){for(var M=this.tryEntries.length-1;M>=0;--M){var A=this.tryEntries[M];if(A.tryLoc===C){var W=A.completion;if(W.type==="throw"){var L=W.arg;N(A)}return L}}throw new Error("illegal catch attempt")},delegateYield:function(C,M,A){return this.delegate={iterator:V(C),resultName:M,nextLoc:A},this.method==="next"&&(this.arg=o),w}},n}(t.exports);try{regeneratorRuntime=e}catch(n){typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(_c);var Ic=_c.exports;function kc(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(c){n(c);return}s.done?e(l):Promise.resolve(l).then(r,i)}function Nm(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(l){kc(o,r,i,a,s,"next",l)}function s(l){kc(o,r,i,a,s,"throw",l)}a(void 0)})}}var Rc=["measure","align",null,"motion"],Am=function(t,e){var n=u.exports.useState(null),r=U(n,2),i=r[0],o=r[1],a=u.exports.useRef(),s=u.exports.useRef(!1);function l(f){s.current||o(f)}function c(){Ce.cancel(a.current)}function d(f){c(),a.current=Ce(function(){l(function(h){switch(i){case"align":return"motion";case"motion":return"stable"}return h}),f==null||f()})}return u.exports.useEffect(function(){l("measure")},[t]),u.exports.useEffect(function(){switch(i){case"measure":e();break}i&&(a.current=Ce(Nm(Ic.mark(function f(){var h,v;return Ic.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:h=Rc.indexOf(i),v=Rc[h+1],v&&h!==-1&&l(v);case 3:case"end":return b.stop()}},f)}))))},[i]),u.exports.useEffect(function(){return function(){s.current=!0,c()}},[]),[i,d]},Lm=function(t){var e=u.exports.useState({width:0,height:0}),n=U(e,2),r=n[0],i=n[1];function o(s){i({width:s.offsetWidth,height:s.offsetHeight})}var a=u.exports.useMemo(function(){var s={};if(t){var l=r.width,c=r.height;t.indexOf("height")!==-1&&c?s.height=c:t.indexOf("minHeight")!==-1&&c&&(s.minHeight=c),t.indexOf("width")!==-1&&l?s.width=l:t.indexOf("minWidth")!==-1&&l&&(s.minWidth=l)}return s},[t,r]);return[a,o]},Nc=u.exports.forwardRef(function(t,e){var n=t.visible,r=t.prefixCls,i=t.className,o=t.style,a=t.children,s=t.zIndex,l=t.stretch,c=t.destroyPopupOnHide,d=t.forceRender,f=t.align,h=t.point,v=t.getRootDomNode,m=t.getClassNameFromAlign,b=t.onAlign,g=t.onMouseEnter,w=t.onMouseLeave,D=t.onMouseDown,E=t.onTouchStart,y=u.exports.useRef(),S=u.exports.useRef(),x=u.exports.useState(),I=U(x,2),_=I[0],F=I[1],k=Lm(l),P=U(k,2),O=P[0],j=P[1];function N(){l&&j(v())}var R=Am(n,N),V=U(R,2),T=V[0],C=V[1],M=u.exports.useRef();function A(){return h||v}function W(){var le;(le=y.current)===null||le===void 0||le.forceAlign()}function L(le,ve){var me=m(ve);_!==me&&F(me),T==="align"&&(_!==me?Promise.resolve().then(function(){W()}):C(function(){var be;(be=M.current)===null||be===void 0||be.call(M)}),b==null||b(le,ve))}var K=$({},nc(t));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(le){var ve=K[le];K[le]=function(me,be){return C(),ve==null?void 0:ve(me,be)}});function Q(){return new Promise(function(le){M.current=le})}u.exports.useEffect(function(){!K.motionName&&T==="motion"&&C()},[K.motionName,T]),u.exports.useImperativeHandle(e,function(){return{forceAlign:W,getElement:function(){return S.current}}});var z=$($({},O),{},{zIndex:s,opacity:T==="motion"||T==="stable"||!n?void 0:0,pointerEvents:T==="stable"?void 0:"none"},o),q=!0;(f==null?void 0:f.points)&&(T==="align"||T==="stable")&&(q=!1);var J=a;return u.exports.Children.count(a)>1&&(J=u.exports.createElement("div",{className:"".concat(r,"-content")},a)),u.exports.createElement(Cr,Z({visible:n,ref:S,leavedClassName:"".concat(r,"-hidden")},K,{onAppearPrepare:Q,onEnterPrepare:Q,removeOnLeave:c,forceRender:d}),function(le,ve){var me=le.className,be=le.style,ze=fe(r,i,_,me);return u.exports.createElement(Pc,{target:A(),key:"popup",ref:y,monitorWindowResize:!0,disabled:q,align:f,onAlign:L},u.exports.createElement("div",{ref:ve,className:ze,onMouseEnter:g,onMouseLeave:w,onMouseDownCapture:D,onTouchStartCapture:E,style:$($({},be),z)},J))})});Nc.displayName="PopupInner";var Ac=u.exports.forwardRef(function(t,e){var n=t.prefixCls,r=t.visible,i=t.zIndex,o=t.children,a=t.mobile;a=a===void 0?{}:a;var s=a.popupClassName,l=a.popupStyle,c=a.popupMotion,d=c===void 0?{}:c,f=a.popupRender,h=u.exports.useRef();u.exports.useImperativeHandle(e,function(){return{forceAlign:function(){},getElement:function(){return h.current}}});var v=$({zIndex:i},l),m=o;return u.exports.Children.count(o)>1&&(m=u.exports.createElement("div",{className:"".concat(n,"-content")},o)),f&&(m=f(m)),u.exports.createElement(Cr,Z({visible:r,ref:h,removeOnLeave:!0},d),function(b,g){var w=b.className,D=b.style,E=fe(n,s,w);return u.exports.createElement("div",{ref:g,className:E,style:$($({},D),v)},m)})});Ac.displayName="MobilePopupInner";var zm=["visible","mobile"],Lc=u.exports.forwardRef(function(t,e){var n=t.visible,r=t.mobile,i=Oe(t,zm),o=u.exports.useState(n),a=U(o,2),s=a[0],l=a[1],c=u.exports.useState(!1),d=U(c,2),f=d[0],h=d[1],v=$($({},i),{},{visible:s});u.exports.useEffect(function(){l(n),n&&r&&h(vl())},[n,r]);var m=f?u.exports.createElement(Ac,Z({},v,{mobile:r,ref:e})):u.exports.createElement(Nc,Z({},v,{ref:e}));return u.exports.createElement("div",null,u.exports.createElement(Qv,v),m)});Lc.displayName="Popup";var zc=u.exports.createContext(null);function ia(){}function Fm(){return""}function Bm(t){return t?t.ownerDocument:window.document}var jm=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function Wm(t){var e=function(n){Ft(i,n);var r=Wt(i);function i(o){var a;Bt(this,i),a=r.call(this,o),a.popupRef=u.exports.createRef(),a.triggerRef=u.exports.createRef(),a.attachId=void 0,a.clickOutsideHandler=void 0,a.touchOutsideHandler=void 0,a.contextMenuOutsideHandler1=void 0,a.contextMenuOutsideHandler2=void 0,a.mouseDownTimeout=void 0,a.focusTime=void 0,a.preClickTime=void 0,a.preTouchTime=void 0,a.delayTimer=void 0,a.hasPopupMouseDown=void 0,a.onMouseEnter=function(l){var c=a.props.mouseEnterDelay;a.fireEvents("onMouseEnter",l),a.delaySetPopupVisible(!0,c,c?null:l)},a.onMouseMove=function(l){a.fireEvents("onMouseMove",l),a.setPoint(l)},a.onMouseLeave=function(l){a.fireEvents("onMouseLeave",l),a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)},a.onPopupMouseEnter=function(){a.clearDelayTimer()},a.onPopupMouseLeave=function(l){var c;l.relatedTarget&&!l.relatedTarget.setTimeout&&Ei((c=a.popupRef.current)===null||c===void 0?void 0:c.getElement(),l.relatedTarget)||a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)},a.onFocus=function(l){a.fireEvents("onFocus",l),a.clearDelayTimer(),a.isFocusToShow()&&(a.focusTime=Date.now(),a.delaySetPopupVisible(!0,a.props.focusDelay))},a.onMouseDown=function(l){a.fireEvents("onMouseDown",l),a.preClickTime=Date.now()},a.onTouchStart=function(l){a.fireEvents("onTouchStart",l),a.preTouchTime=Date.now()},a.onBlur=function(l){a.fireEvents("onBlur",l),a.clearDelayTimer(),a.isBlurToHide()&&a.delaySetPopupVisible(!1,a.props.blurDelay)},a.onContextMenu=function(l){l.preventDefault(),a.fireEvents("onContextMenu",l),a.setPopupVisible(!0,l)},a.onContextMenuClose=function(){a.isContextMenuToShow()&&a.close()},a.onClick=function(l){if(a.fireEvents("onClick",l),a.focusTime){var c;if(a.preClickTime&&a.preTouchTime?c=Math.min(a.preClickTime,a.preTouchTime):a.preClickTime?c=a.preClickTime:a.preTouchTime&&(c=a.preTouchTime),Math.abs(c-a.focusTime)<20)return;a.focusTime=0}a.preClickTime=0,a.preTouchTime=0,a.isClickToShow()&&(a.isClickToHide()||a.isBlurToHide())&&l&&l.preventDefault&&l.preventDefault();var d=!a.state.popupVisible;(a.isClickToHide()&&!d||d&&a.isClickToShow())&&a.setPopupVisible(!a.state.popupVisible,l)},a.onPopupMouseDown=function(){if(a.hasPopupMouseDown=!0,clearTimeout(a.mouseDownTimeout),a.mouseDownTimeout=window.setTimeout(function(){a.hasPopupMouseDown=!1},0),a.context){var l;(l=a.context).onPopupMouseDown.apply(l,arguments)}},a.onDocumentClick=function(l){if(!(a.props.mask&&!a.props.maskClosable)){var c=l.target,d=a.getRootDomNode(),f=a.getPopupDomNode();(!Ei(d,c)||a.isContextMenuOnly())&&!Ei(f,c)&&!a.hasPopupMouseDown&&a.close()}},a.getRootDomNode=function(){var l=a.props.getTriggerDOMNode;if(l)return l(a.triggerRef.current);try{var c=No(a.triggerRef.current);if(c)return c}catch(d){}return On.findDOMNode(Ae(a))},a.getPopupClassNameFromAlign=function(l){var c=[],d=a.props,f=d.popupPlacement,h=d.builtinPlacements,v=d.prefixCls,m=d.alignPoint,b=d.getPopupClassNameFromAlign;return f&&h&&c.push(Wv(h,v,l,m)),b&&c.push(b(l)),c.join(" ")},a.getComponent=function(){var l=a.props,c=l.prefixCls,d=l.destroyPopupOnHide,f=l.popupClassName,h=l.onPopupAlign,v=l.popupMotion,m=l.popupAnimation,b=l.popupTransitionName,g=l.popupStyle,w=l.mask,D=l.maskAnimation,E=l.maskTransitionName,y=l.maskMotion,S=l.zIndex,x=l.popup,I=l.stretch,_=l.alignPoint,F=l.mobile,k=l.forceRender,P=a.state,O=P.popupVisible,j=P.point,N=a.getPopupAlign(),R={};return a.isMouseEnterToShow()&&(R.onMouseEnter=a.onPopupMouseEnter),a.isMouseLeaveToHide()&&(R.onMouseLeave=a.onPopupMouseLeave),R.onMouseDown=a.onPopupMouseDown,R.onTouchStart=a.onPopupMouseDown,u.exports.createElement(Lc,Z({prefixCls:c,destroyPopupOnHide:d,visible:O,point:_&&j,className:f,align:N,onAlign:h,animation:m,getClassNameFromAlign:a.getPopupClassNameFromAlign},R,{stretch:I,getRootDomNode:a.getRootDomNode,style:g,mask:w,zIndex:S,transitionName:b,maskAnimation:D,maskTransitionName:E,maskMotion:y,ref:a.popupRef,motion:v,mobile:F,forceRender:k}),typeof x=="function"?x():x)},a.attachParent=function(l){Ce.cancel(a.attachId);var c=a.props,d=c.getPopupContainer,f=c.getDocument,h=a.getRootDomNode(),v;d?(h||d.length===0)&&(v=d(h)):v=f(a.getRootDomNode()).body,v?v.appendChild(l):a.attachId=Ce(function(){a.attachParent(l)})},a.getContainer=function(){var l=a.props.getDocument,c=l(a.getRootDomNode()).createElement("div");return c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.width="100%",a.attachParent(c),c},a.setPoint=function(l){var c=a.props.alignPoint;!c||!l||a.setState({point:{pageX:l.pageX,pageY:l.pageY}})},a.handlePortalUpdate=function(){a.state.prevPopupVisible!==a.state.popupVisible&&a.props.afterPopupVisibleChange(a.state.popupVisible)},a.triggerContextValue={onPopupMouseDown:a.onPopupMouseDown};var s;return"popupVisible"in o?s=!!o.popupVisible:s=!!o.defaultPopupVisible,a.state={prevPopupVisible:s,popupVisible:s},jm.forEach(function(l){a["fire".concat(l)]=function(c){a.fireEvents(l,c)}}),a}return jt(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var a=this.props,s=this.state;if(s.popupVisible){var l;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(l=a.getDocument(this.getRootDomNode()),this.clickOutsideHandler=ur(l,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(l=l||a.getDocument(this.getRootDomNode()),this.touchOutsideHandler=ur(l,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(l=l||a.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=ur(l,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=ur(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Ce.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var a;return((a=this.popupRef.current)===null||a===void 0?void 0:a.getElement())||null}},{key:"getPopupAlign",value:function(){var a=this.props,s=a.popupPlacement,l=a.popupAlign,c=a.builtinPlacements;return s&&c?jv(c,s,l):l}},{key:"setPopupVisible",value:function(a,s){var l=this.props.alignPoint,c=this.state.popupVisible;this.clearDelayTimer(),c!==a&&("popupVisible"in this.props||this.setState({popupVisible:a,prevPopupVisible:c}),this.props.onPopupVisibleChange(a)),l&&s&&a&&this.setPoint(s)}},{key:"delaySetPopupVisible",value:function(a,s,l){var c=this,d=s*1e3;if(this.clearDelayTimer(),d){var f=l?{pageX:l.pageX,pageY:l.pageY}:null;this.delayTimer=window.setTimeout(function(){c.setPopupVisible(a,f),c.clearDelayTimer()},d)}else this.setPopupVisible(a,l)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(a){var s=this.props.children.props,l=this.props;return s[a]&&l[a]?this["fire".concat(a)]:s[a]||l[a]}},{key:"isClickToShow",value:function(){var a=this.props,s=a.action,l=a.showAction;return s.indexOf("click")!==-1||l.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var a=this.props.action;return a==="contextMenu"||a.length===1&&a[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var a=this.props,s=a.action,l=a.showAction;return s.indexOf("contextMenu")!==-1||l.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var a=this.props,s=a.action,l=a.hideAction;return s.indexOf("click")!==-1||l.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var a=this.props,s=a.action,l=a.showAction;return s.indexOf("hover")!==-1||l.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var a=this.props,s=a.action,l=a.hideAction;return s.indexOf("hover")!==-1||l.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var a=this.props,s=a.action,l=a.showAction;return s.indexOf("focus")!==-1||l.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var a=this.props,s=a.action,l=a.hideAction;return s.indexOf("focus")!==-1||l.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var a;(a=this.popupRef.current)===null||a===void 0||a.forceAlign()}}},{key:"fireEvents",value:function(a,s){var l=this.props.children.props[a];l&&l(s);var c=this.props[a];c&&c(s)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var a=this.state.popupVisible,s=this.props,l=s.children,c=s.forceRender,d=s.alignPoint,f=s.className,h=s.autoDestroy,v=u.exports.Children.only(l),m={key:"trigger"};this.isContextMenuToShow()?m.onContextMenu=this.onContextMenu:m.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(m.onClick=this.onClick,m.onMouseDown=this.onMouseDown,m.onTouchStart=this.onTouchStart):(m.onClick=this.createTwoChains("onClick"),m.onMouseDown=this.createTwoChains("onMouseDown"),m.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(m.onMouseEnter=this.onMouseEnter,d&&(m.onMouseMove=this.onMouseMove)):m.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?m.onMouseLeave=this.onMouseLeave:m.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(m.onFocus=this.onFocus,m.onBlur=this.onBlur):(m.onFocus=this.createTwoChains("onFocus"),m.onBlur=this.createTwoChains("onBlur"));var b=fe(v&&v.props&&v.props.className,f);b&&(m.className=b);var g=$({},m);xl(v)&&(g.ref=Ao(this.triggerRef,v.ref));var w=u.exports.cloneElement(v,g),D;return(a||this.popupRef.current||c)&&(D=u.exports.createElement(t,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!a&&h&&(D=null),u.exports.createElement(zc.Provider,{value:this.triggerContextValue},w,D)}}],[{key:"getDerivedStateFromProps",value:function(a,s){var l=a.popupVisible,c={};return l!==void 0&&s.popupVisible!==l&&(c.popupVisible=l,c.prevPopupVisible=s.popupVisible),c}}]),i}(u.exports.Component);return e.contextType=zc,e.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:Fm,getDocument:Bm,onPopupVisibleChange:ia,afterPopupVisibleChange:ia,onPopupAlign:ia,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},e}var oa=Wm(Fv),Qt={adjustX:1,adjustY:1},Hm={topLeft:{points:["bl","tl"],overflow:Qt,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Qt,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:Qt,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:Qt,offset:[4,0]}},$m={topLeft:{points:["bl","tl"],overflow:Qt,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Qt,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:Qt,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:Qt,offset:[4,0]}};function Fc(t,e,n){if(e)return e;if(n)return n[t]||n.other}var Km={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Vm(t){var e=t.prefixCls,n=t.visible,r=t.children,i=t.popup,o=t.popupClassName,a=t.popupOffset,s=t.disabled,l=t.mode,c=t.onVisibleChange,d=u.exports.useContext(gt),f=d.getPopupContainer,h=d.rtl,v=d.subMenuOpenDelay,m=d.subMenuCloseDelay,b=d.builtinPlacements,g=d.triggerSubMenuAction,w=d.forceSubMenuRender,D=d.motion,E=d.defaultMotions,y=u.exports.useState(!1),S=U(y,2),x=S[0],I=S[1],_=h?$($({},$m),b):$($({},Hm),b),F=Km[l],k=Fc(l,D,E),P=$($({},k),{},{leavedClassName:"".concat(e,"-hidden"),removeOnLeave:!1,motionAppear:!0}),O=u.exports.useRef();return u.exports.useEffect(function(){return O.current=Ce(function(){I(n)}),function(){Ce.cancel(O.current)}},[n]),u.exports.createElement(oa,{prefixCls:e,popupClassName:fe("".concat(e,"-popup"),G({},"".concat(e,"-rtl"),h),o),stretch:l==="horizontal"?"minWidth":null,getPopupContainer:f,builtinPlacements:_,popupPlacement:F,popupVisible:x,popup:i,popupAlign:a&&{offset:a},action:s?[]:[g],mouseEnterDelay:v,mouseLeaveDelay:m,onPopupVisibleChange:c,forceRender:w,popupMotion:P},r)}function Um(t){var e=t.id,n=t.open,r=t.keyPath,i=t.children,o="inline",a=u.exports.useContext(gt),s=a.prefixCls,l=a.forceSubMenuRender,c=a.motion,d=a.defaultMotions,f=a.mode,h=u.exports.useRef(!1);h.current=f===o;var v=u.exports.useState(!h.current),m=U(v,2),b=m[0],g=m[1],w=h.current?n:!1;u.exports.useEffect(function(){h.current&&g(!1)},[f]);var D=$({},Fc(o,c,d));r.length>1&&(D.motionAppear=!1);var E=D.onVisibleChanged;return D.onVisibleChanged=function(y){return!h.current&&!y&&g(!0),E==null?void 0:E(y)},b?null:u.exports.createElement(yr,{mode:o,locked:!h.current},u.exports.createElement(Cr,Z({visible:w},D,{forceRender:l,removeOnLeave:!1,leavedClassName:"".concat(s,"-hidden")}),function(y){var S=y.className,x=y.style;return u.exports.createElement(jo,{id:e,className:S,style:x},i)}))}var Gm=function(e){var n,r=e.style,i=e.className,o=e.title,a=e.eventKey;e.warnKey;var s=e.disabled,l=e.internalPopupClose,c=e.children,d=e.itemIcon,f=e.expandIcon,h=e.popupClassName,v=e.popupOffset,m=e.onClick,b=e.onMouseEnter,g=e.onMouseLeave,w=e.onTitleClick,D=e.onTitleMouseEnter,E=e.onTitleMouseLeave,y=Oe(e,["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"]),S=Hl(a),x=u.exports.useContext(gt),I=x.prefixCls,_=x.mode,F=x.openKeys,k=x.disabled,P=x.overflowDisabled,O=x.activeKey,j=x.selectedKeys,N=x.itemIcon,R=x.expandIcon,V=x.onItemClick,T=x.onOpenChange,C=x.onActive,M=u.exports.useContext(Bl),A=M.isSubPathKey,W=wr(),L="".concat(I,"-submenu"),K=k||s,Q=u.exports.useRef(),z=u.exports.useRef(),q=d||N,J=f||R,le=F.includes(a),ve=!P&&le,me=A(j,a),be=Nl(a,K,D,E),ze=be.active,Fe=Oe(be,["active"]),tt=u.exports.useState(!1),Ne=U(tt,2),ue=Ne[0],je=Ne[1],se=function(ke){K||je(ke)},ce=function(ke){se(!0),b==null||b({key:a,domEvent:ke})},Se=function(ke){se(!1),g==null||g({key:a,domEvent:ke})},Yt=u.exports.useMemo(function(){return ze||(_!=="inline"?ue||A([O],a):!1)},[_,ze,O,ue,a,A]),Lt=Ll(W.length),$e=function(ke){K||(w==null||w({key:a,domEvent:ke}),_==="inline"&&T(a,!le))},Xt=zn(function(nt){m==null||m(Ci(nt)),V(nt)}),Ye=function(ke){_!=="inline"&&T(a,ke)},We=function(){C(a)},zt=S&&"".concat(S,"-popup"),Xe=u.exports.createElement("div",Z({role:"menuitem",style:Lt,className:"".concat(L,"-title"),tabIndex:K?null:-1,ref:Q,title:typeof o=="string"?o:null,"data-menu-id":P&&S?null:S,"aria-expanded":ve,"aria-haspopup":!0,"aria-controls":zt,"aria-disabled":K,onClick:$e,onFocus:We},Fe),o,u.exports.createElement(Al,{icon:_!=="horizontal"?J:null,props:$($({},e),{},{isOpen:ve,isSubMenu:!0})},u.exports.createElement("i",{className:"".concat(L,"-arrow")}))),ht=u.exports.useRef(_);if(_!=="inline"&&(ht.current=W.length>1?"vertical":_),!P){var Ke=ht.current;Xe=u.exports.createElement(Vm,{mode:Ke,prefixCls:L,visible:!l&&ve&&_!=="inline",popupClassName:h,popupOffset:v,popup:u.exports.createElement(yr,{mode:Ke==="horizontal"?"vertical":Ke},u.exports.createElement(jo,{id:zt,ref:z},c)),disabled:K,onVisibleChange:Ye},Xe)}return u.exports.createElement(yr,{onItemClick:Xt,mode:_==="horizontal"?"vertical":_,itemIcon:q,expandIcon:J},u.exports.createElement(Kt.Item,Z({role:"none"},y,{component:"li",style:r,className:fe(L,"".concat(L,"-").concat(_),i,(n={},G(n,"".concat(L,"-open"),ve),G(n,"".concat(L,"-active"),Yt),G(n,"".concat(L,"-selected"),me),G(n,"".concat(L,"-disabled"),K),n)),onMouseEnter:ce,onMouseLeave:Se}),Xe,!P&&u.exports.createElement(Um,{id:zt,open:ve,keyPath:W},c)))};function Bc(t){var e=t.eventKey,n=t.children,r=wr(e),i=Bo(n,r),o=Si();u.exports.useEffect(function(){if(o)return o.registerPath(e,r),function(){o.unregisterPath(e,r)}},[r]);var a;return o?a=i:a=u.exports.createElement(Gm,t,i),u.exports.createElement(Fl.Provider,{value:r},a)}function jc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(rc(t)){var n=t.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||t.isContentEditable||n==="a"&&!!t.getAttribute("href"),i=t.getAttribute("tabindex"),o=Number(i),a=null;return i&&!Number.isNaN(o)?a=o:r&&a===null&&(a=0),r&&t.disabled&&(a=null),a!==null&&(a>=0||e&&a<0)}return!1}function qm(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=mt(t.querySelectorAll("*")).filter(function(r){return jc(r,e)});return jc(t,e)&&n.unshift(t),n}var aa=we.LEFT,sa=we.RIGHT,la=we.UP,Ni=we.DOWN,Ai=we.ENTER,Wc=we.ESC,Hc=[la,Ni,aa,sa];function Ym(t,e,n,r){var i,o,a,s,l="prev",c="next",d="children",f="parent";if(t==="inline"&&r===Ai)return{inlineTrigger:!0};var h=(i={},G(i,la,l),G(i,Ni,c),i),v=(o={},G(o,aa,n?c:l),G(o,sa,n?l:c),G(o,Ni,d),G(o,Ai,d),o),m=(a={},G(a,la,l),G(a,Ni,c),G(a,Ai,d),G(a,Wc,f),G(a,aa,n?d:f),G(a,sa,n?f:d),a),b={inline:h,horizontal:v,vertical:m,inlineSub:h,horizontalSub:m,verticalSub:m},g=(s=b["".concat(t).concat(e?"":"Sub")])===null||s===void 0?void 0:s[r];switch(g){case l:return{offset:-1,sibling:!0};case c:return{offset:1,sibling:!0};case f:return{offset:-1,sibling:!1};case d:return{offset:1,sibling:!1};default:return null}}function Xm(t){for(var e=t;e;){if(e.getAttribute("data-menu-list"))return e;e=e.parentElement}return null}function Jm(t,e){for(var n=t||document.activeElement;n;){if(e.has(n))return n;n=n.parentElement}return null}function Zm(t,e){var n=qm(t,!0);return n.filter(function(r){return e.has(r)})}function $c(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!t)return null;var i=Zm(t,e),o=i.length,a=i.findIndex(function(s){return n===s});return r<0?a===-1?a=o-1:a-=1:r>0&&(a+=1),a=(a+o)%o,i[a]}function Qm(t,e,n,r,i,o,a,s,l,c){var d=u.exports.useRef(),f=u.exports.useRef();f.current=e;var h=function(){Ce.cancel(d.current)};return u.exports.useEffect(function(){return function(){h()}},[]),function(v){var m=v.which;if([].concat(Hc,[Ai,Wc]).includes(m)){var b,g,w,D=function(){b=new Set,g=new Map,w=new Map;var N=o();return N.forEach(function(R){var V=document.querySelector("[data-menu-id='".concat(Wl(r,R),"']"));V&&(b.add(V),w.set(V,R),g.set(R,V))}),b};D();var E=g.get(e),y=Jm(E,b),S=w.get(y),x=Ym(t,a(S,!0).length===1,n,m);if(!x)return;Hc.includes(m)&&v.preventDefault();var I=function(N){if(N){var R=N,V=N.querySelector("a");(V==null?void 0:V.getAttribute("href"))&&(R=V);var T=w.get(N);s(T),h(),d.current=Ce(function(){f.current===T&&R.focus()})}};if(x.sibling||!y){var _;!y||t==="inline"?_=i.current:_=Xm(y);var F=$c(_,b,y,x.offset);I(F)}else if(x.inlineTrigger)l(S);else if(x.offset>0)l(S,!0),h(),d.current=Ce(function(){D();var j=y.getAttribute("aria-controls"),N=document.getElementById(j),R=$c(N,b);I(R)},5);else if(x.offset<0){var k=a(S,!0),P=k[k.length-2],O=g.get(P);l(P,!1),I(O)}}c==null||c(v)}}var eg=Math.random().toFixed(5).toString().slice(2),Kc=0;function tg(t){var e=Nn(t,{value:t}),n=U(e,2),r=n[0],i=n[1];return u.exports.useEffect(function(){Kc+=1;var o="".concat(eg,"-").concat(Kc);i("rc-menu-uuid-".concat(o))},[]),r}function ng(t){Promise.resolve().then(t)}var ca="__RC_UTIL_PATH_SPLIT__",Vc=function(e){return e.join(ca)},rg=function(e){return e.split(ca)},ua="rc-menu-more";function ig(){var t=u.exports.useState({}),e=U(t,2),n=e[1],r=u.exports.useRef(new Map),i=u.exports.useRef(new Map),o=u.exports.useState([]),a=U(o,2),s=a[0],l=a[1],c=u.exports.useRef(0),d=u.exports.useRef(!1),f=function(){d.current||n({})},h=u.exports.useCallback(function(E,y){var S=Vc(y);i.current.set(S,E),r.current.set(E,S),c.current+=1;var x=c.current;ng(function(){x===c.current&&f()})},[]),v=u.exports.useCallback(function(E,y){var S=Vc(y);i.current.delete(S),r.current.delete(E)},[]),m=u.exports.useCallback(function(E){l(E)},[]),b=u.exports.useCallback(function(E,y){var S=r.current.get(E)||"",x=rg(S);return y&&s.includes(x[0])&&x.unshift(ua),x},[s]),g=u.exports.useCallback(function(E,y){return E.some(function(S){var x=b(S,!0);return x.includes(y)})},[b]),w=function(){var y=mt(r.current.keys());return s.length&&y.push(ua),y},D=u.exports.useCallback(function(E){var y="".concat(r.current.get(E)).concat(ca),S=new Set;return mt(i.current.keys()).forEach(function(x){x.startsWith(y)&&S.add(i.current.get(x))}),S},[]);return u.exports.useEffect(function(){return function(){d.current=!0}},[]),{registerPath:h,unregisterPath:v,refreshOverflowKeys:m,isSubPathKey:g,getKeyPath:b,getKeys:w,getSubPathKeys:D}}var Wn=[],og=function(e){var n,r,i=e.prefixCls,o=i===void 0?"rc-menu":i,a=e.style,s=e.className,l=e.tabIndex,c=l===void 0?0:l,d=e.children,f=e.direction,h=e.id,v=e.mode,m=v===void 0?"vertical":v,b=e.inlineCollapsed,g=e.disabled,w=e.disabledOverflow,D=e.subMenuOpenDelay,E=D===void 0?.1:D,y=e.subMenuCloseDelay,S=y===void 0?.1:y,x=e.forceSubMenuRender,I=e.defaultOpenKeys,_=e.openKeys,F=e.activeKey,k=e.defaultActiveFirst,P=e.selectable,O=P===void 0?!0:P,j=e.multiple,N=j===void 0?!1:j,R=e.defaultSelectedKeys,V=e.selectedKeys,T=e.onSelect,C=e.onDeselect,M=e.inlineIndent,A=M===void 0?24:M,W=e.motion,L=e.defaultMotions,K=e.triggerSubMenuAction,Q=K===void 0?"hover":K,z=e.builtinPlacements,q=e.itemIcon,J=e.expandIcon,le=e.overflowedIndicator,ve=le===void 0?"...":le,me=e.overflowedIndicatorPopupClassName,be=e.getPopupContainer,ze=e.onClick,Fe=e.onOpenChange,tt=e.onKeyDown;e.openAnimation,e.openTransitionName;var Ne=Oe(e,["prefixCls","style","className","tabIndex","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName"]),ue=Bo(d,Wn),je=u.exports.useState(!1),se=U(je,2),ce=se[0],Se=se[1],Yt=u.exports.useRef(),Lt=tg(h),$e=f==="rtl",Xt=u.exports.useMemo(function(){return(m==="inline"||m==="vertical")&&b?["vertical",b]:[m,!1]},[m,b]),Ye=U(Xt,2),We=Ye[0],zt=Ye[1],Xe=u.exports.useState(0),ht=U(Xe,2),Ke=ht[0],nt=ht[1],ke=Ke>=ue.length-1||We!=="horizontal"||w,Qn=Nn(I,{value:_,postState:function(X){return X||Wn}}),Jt=U(Qn,2),at=Jt[0],Sn=Jt[1],st=function(X){Sn(X),Fe==null||Fe(X)},an=u.exports.useState(at),vt=U(an,2),it=vt[0],sn=vt[1],Dt=We==="inline",ln=u.exports.useRef(!1);u.exports.useEffect(function(){Dt&&sn(at)},[at]),u.exports.useEffect(function(){if(!ln.current){ln.current=!0;return}Dt?Sn(it):st(Wn)},[Dt]);var rt=ig(),Mt=rt.registerPath,ae=rt.unregisterPath,he=rt.refreshOverflowKeys,Ee=rt.isSubPathKey,Je=rt.getKeyPath,cn=rt.getKeys,Vr=rt.getSubPathKeys,oo=u.exports.useMemo(function(){return{registerPath:Mt,unregisterPath:ae}},[Mt,ae]),ao=u.exports.useMemo(function(){return{isSubPathKey:Ee}},[Ee]);u.exports.useEffect(function(){he(ke?Wn:ue.slice(Ke+1).map(function(xe){return xe.key}))},[Ke,ke]);var En=Nn(F||k&&((n=ue[0])===null||n===void 0?void 0:n.key),{value:F}),er=U(En,2),Dn=er[0],tr=er[1],so=zn(function(xe){tr(xe)}),Ur=zn(function(){tr(void 0)}),lo=Nn(R||[],{value:V,postState:function(X){return Array.isArray(X)?X:X==null?Wn:[X]}}),nr=U(lo,2),Mn=nr[0],co=nr[1],Ot=function(X){if(O){var ne=X.key,ge=Mn.includes(ne),Me;N?ge?Me=Mn.filter(function(dn){return dn!==ne}):Me=[].concat(mt(Mn),[ne]):Me=[ne],co(Me);var Tt=$($({},X),{},{selectedKeys:Me});ge?C==null||C(Tt):T==null||T(Tt)}!N&&at.length&&We!=="inline"&&st(Wn)},Gr=zn(function(xe){ze==null||ze(Ci(xe)),Ot(xe)}),rr=zn(function(xe,X){var ne=at.filter(function(Me){return Me!==xe});if(X)ne.push(xe);else if(We!=="inline"){var ge=Vr(xe);ne=ne.filter(function(Me){return!ge.has(Me)})}lr(at,ne)||st(ne)}),qr=zn(be),un=function(X,ne){var ge=ne??!at.includes(X);rr(X,ge)},ir=Qm(We,Dn,$e,Lt,Yt,cn,Je,tr,un,tt);u.exports.useEffect(function(){Se(!0)},[]);var or=We!=="horizontal"||w?ue:ue.map(function(xe,X){return u.exports.createElement(yr,{key:xe.key,overflowDisabled:X>Ke},xe)}),Yr=u.exports.createElement(Kt,Z({id:h,ref:Yt,prefixCls:"".concat(o,"-overflow"),component:"ul",itemComponent:Fo,className:fe(o,"".concat(o,"-root"),"".concat(o,"-").concat(We),s,(r={},G(r,"".concat(o,"-inline-collapsed"),zt),G(r,"".concat(o,"-rtl"),$e),r)),dir:f,style:a,role:"menu",tabIndex:c,data:or,renderRawItem:function(X){return X},renderRawRest:function(X){var ne=X.length,ge=ne?ue.slice(-ne):null;return u.exports.createElement(Bc,{eventKey:ua,title:ve,disabled:ke,internalPopupClose:ne===0,popupClassName:me},ge)},maxCount:We!=="horizontal"||w?Kt.INVALIDATE:Kt.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(X){nt(X)},onKeyDown:ir},Ne));return u.exports.createElement(jl.Provider,{value:Lt},u.exports.createElement(yr,{prefixCls:o,mode:We,openKeys:at,rtl:$e,disabled:g,motion:ce?W:null,defaultMotions:ce?L:null,activeKey:Dn,onActive:so,onInactive:Ur,selectedKeys:Mn,inlineIndent:A,subMenuOpenDelay:E,subMenuCloseDelay:S,forceSubMenuRender:x,builtinPlacements:z,triggerSubMenuAction:Q,getPopupContainer:qr,itemIcon:q,expandIcon:J,onItemClick:Gr,onOpenChange:rr},u.exports.createElement(Bl.Provider,{value:ao},Yr),u.exports.createElement("div",{style:{display:"none"},"aria-hidden":!0},u.exports.createElement(zl.Provider,{value:oo},ue))))},ag=function(e){var n=e.className,r=e.title;e.eventKey;var i=e.children,o=Oe(e,["className","title","eventKey","children"]),a=u.exports.useContext(gt),s=a.prefixCls,l="".concat(s,"-item-group");return u.exports.createElement("li",Z({},o,{onClick:function(d){return d.stopPropagation()},className:fe(l,n)}),u.exports.createElement("div",{className:"".concat(l,"-title"),title:typeof r=="string"?r:void 0},r),u.exports.createElement("ul",{className:"".concat(l,"-list")},i))};function sg(t){var e=t.children,n=Oe(t,["children"]),r=wr(n.eventKey),i=Bo(e,r),o=Si();return o?i:u.exports.createElement(ag,xi(n,["warnKey"]),i)}function lg(t){var e=t.className,n=t.style,r=u.exports.useContext(gt),i=r.prefixCls,o=Si();return o?null:u.exports.createElement("li",{className:fe("".concat(i,"-item-divider"),e),style:n})}var Or=og;Or.Item=Fo;Or.SubMenu=Bc;Or.ItemGroup=sg;Or.Divider=lg;var Hn={adjustX:1,adjustY:1},$n=[0,0],cg={topLeft:{points:["bl","tl"],overflow:Hn,offset:[0,-4],targetOffset:$n},topCenter:{points:["bc","tc"],overflow:Hn,offset:[0,-4],targetOffset:$n},topRight:{points:["br","tr"],overflow:Hn,offset:[0,-4],targetOffset:$n},bottomLeft:{points:["tl","bl"],overflow:Hn,offset:[0,4],targetOffset:$n},bottomCenter:{points:["tc","bc"],overflow:Hn,offset:[0,4],targetOffset:$n},bottomRight:{points:["tr","br"],overflow:Hn,offset:[0,4],targetOffset:$n}};function ug(t,e){var n=t.arrow,r=n===void 0?!1:n,i=t.prefixCls,o=i===void 0?"rc-dropdown":i,a=t.transitionName,s=t.animation,l=t.align,c=t.placement,d=c===void 0?"bottomLeft":c,f=t.placements,h=f===void 0?cg:f,v=t.getPopupContainer,m=t.showAction,b=t.hideAction,g=t.overlayClassName,w=t.overlayStyle,D=t.visible,E=t.trigger,y=E===void 0?["hover"]:E,S=Oe(t,["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger"]),x=u.exports.useState(),I=U(x,2),_=I[0],F=I[1],k="visible"in t?D:_,P=u.exports.useRef(null);u.exports.useImperativeHandle(e,function(){return P.current});var O=function(){var L=t.overlay,K;return typeof L=="function"?K=L():K=L,K},j=function(L){var K=t.onOverlayClick,Q=O().props;F(!1),K&&K(L),Q.onClick&&Q.onClick(L)},N=function(L){var K=t.onVisibleChange;F(L),typeof K=="function"&&K(L)},R=function(){var L=O(),K={prefixCls:"".concat(o,"-menu"),onClick:j};return typeof L.type=="string"&&delete K.prefixCls,u.exports.createElement(u.exports.Fragment,null,r&&u.exports.createElement("div",{className:"".concat(o,"-arrow")}),u.exports.cloneElement(L,K))},V=function(){var L=t.overlay;return typeof L=="function"?R:R()},T=function(){var L=t.minOverlayWidthMatchTrigger,K=t.alignPoint;return"minOverlayWidthMatchTrigger"in t?L:!K},C=function(){var L=t.openClassName;return L!==void 0?L:"".concat(o,"-open")},M=function(){var L=t.children,K=L.props?L.props:{},Q=fe(K.className,C());return _&&L?u.exports.cloneElement(L,{className:Q}):L},A=b;return!A&&y.indexOf("contextMenu")!==-1&&(A=["click"]),u.exports.createElement(oa,Object.assign({},S,{prefixCls:o,ref:P,popupClassName:fe(g,G({},"".concat(o,"-show-arrow"),r)),popupStyle:w,builtinPlacements:h,action:y,showAction:m,hideAction:A||[],popupPlacement:d,popupAlign:l,popupTransitionName:a,popupAnimation:s,popupVisible:k,stretch:T()?"minWidth":"",popup:V(),onPopupVisibleChange:N,getPopupContainer:v}),M())}var Uc=u.exports.forwardRef(ug);function dg(t,e){var n=t.prefixCls,r=t.editable,i=t.locale,o=t.style;return!r||r.showAdd===!1?null:u.exports.createElement("button",{ref:e,type:"button",className:"".concat(n,"-nav-add"),style:o,"aria-label":(i==null?void 0:i.addAriaLabel)||"Add tab",onClick:function(s){r.onEdit("add",{event:s})}},r.addIcon||"+")}var Gc=u.exports.forwardRef(dg);function fg(t,e){var n=t.prefixCls,r=t.id,i=t.tabs,o=t.locale,a=t.mobile,s=t.moreIcon,l=s===void 0?"More":s,c=t.moreTransitionName,d=t.style,f=t.className,h=t.editable,v=t.tabBarGutter,m=t.rtl,b=t.onTabClick,g=u.exports.useState(!1),w=U(g,2),D=w[0],E=w[1],y=u.exports.useState(null),S=U(y,2),x=S[0],I=S[1],_="".concat(r,"-more-popup"),F="".concat(n,"-dropdown"),k=x!==null?"".concat(_,"-").concat(x):null,P=o==null?void 0:o.dropdownAriaLabel,O=u.exports.createElement(Or,{onClick:function(M){var A=M.key,W=M.domEvent;b(A,W),E(!1)},id:_,tabIndex:-1,role:"listbox","aria-activedescendant":k,selectedKeys:[x],"aria-label":P!==void 0?P:"expanded dropdown"},i.map(function(C){return u.exports.createElement(Fo,{key:C.key,id:"".concat(_,"-").concat(C.key),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(C.key),disabled:C.disabled},C.tab)}));function j(C){for(var M=i.filter(function(Q){return!Q.disabled}),A=M.findIndex(function(Q){return Q.key===x})||0,W=M.length,L=0;L<W;L+=1){A=(A+C+W)%W;var K=M[A];if(!K.disabled){I(K.key);return}}}function N(C){var M=C.which;if(!D){[we.DOWN,we.SPACE,we.ENTER].includes(M)&&(E(!0),C.preventDefault());return}switch(M){case we.UP:j(-1),C.preventDefault();break;case we.DOWN:j(1),C.preventDefault();break;case we.ESC:E(!1);break;case we.SPACE:case we.ENTER:x!==null&&b(x,C);break}}u.exports.useEffect(function(){var C=document.getElementById(k);C&&C.scrollIntoView&&C.scrollIntoView(!1)},[x]),u.exports.useEffect(function(){D||I(null)},[D]);var R=G({},m?"marginRight":"marginLeft",v);i.length||(R.visibility="hidden",R.order=1);var V=fe(G({},"".concat(F,"-rtl"),m)),T=a?null:u.exports.createElement(Uc,{prefixCls:F,overlay:O,trigger:["hover"],visible:D,transitionName:c,onVisibleChange:E,overlayClassName:V,mouseEnterDelay:.1,mouseLeaveDelay:.1},u.exports.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:R,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":_,id:"".concat(r,"-more"),"aria-expanded":D,onKeyDown:N},l));return u.exports.createElement("div",{className:fe("".concat(n,"-nav-operations"),f),style:d,ref:e},T,u.exports.createElement(Gc,{prefixCls:n,locale:o,editable:h}))}var pg=u.exports.forwardRef(fg),da=u.exports.createContext(null),hg=.1,qc=.01,Li=20,Yc=Math.pow(.995,Li);function vg(t,e){var n=u.exports.useState(),r=U(n,2),i=r[0],o=r[1],a=u.exports.useState(0),s=U(a,2),l=s[0],c=s[1],d=u.exports.useState(0),f=U(d,2),h=f[0],v=f[1],m=u.exports.useState(),b=U(m,2),g=b[0],w=b[1],D=u.exports.useRef();function E(F){var k=F.touches[0],P=k.screenX,O=k.screenY;o({x:P,y:O}),window.clearInterval(D.current)}function y(F){if(!!i){F.preventDefault();var k=F.touches[0],P=k.screenX,O=k.screenY;o({x:P,y:O});var j=P-i.x,N=O-i.y;e(j,N);var R=Date.now();c(R),v(R-l),w({x:j,y:N})}}function S(){if(!!i&&(o(null),w(null),g)){var F=g.x/h,k=g.y/h,P=Math.abs(F),O=Math.abs(k);if(Math.max(P,O)<hg)return;var j=F,N=k;D.current=window.setInterval(function(){if(Math.abs(j)<qc&&Math.abs(N)<qc){window.clearInterval(D.current);return}j*=Yc,N*=Yc,e(j*Li,N*Li)},Li)}}var x=u.exports.useRef();function I(F){var k=F.deltaX,P=F.deltaY,O=0,j=Math.abs(k),N=Math.abs(P);j===N?O=x.current==="x"?k:P:j>N?(O=k,x.current="x"):(O=P,x.current="y"),e(-O,-O)&&F.preventDefault()}var _=u.exports.useRef(null);_.current={onTouchStart:E,onTouchMove:y,onTouchEnd:S,onWheel:I},u.exports.useEffect(function(){function F(j){_.current.onTouchStart(j)}function k(j){_.current.onTouchMove(j)}function P(j){_.current.onTouchEnd(j)}function O(j){_.current.onWheel(j)}return document.addEventListener("touchmove",k,{passive:!1}),document.addEventListener("touchend",P,{passive:!1}),t.current.addEventListener("touchstart",F,{passive:!1}),t.current.addEventListener("wheel",O),function(){document.removeEventListener("touchmove",k),document.removeEventListener("touchend",P)}},[])}function mg(){var t=u.exports.useRef(new Map);function e(r){return t.current.has(r)||t.current.set(r,u.exports.createRef()),t.current.get(r)}function n(r){t.current.delete(r)}return[e,n]}function Xc(t,e){var n=u.exports.useRef(t),r=u.exports.useState({}),i=U(r,2),o=i[1];function a(s){var l=typeof s=="function"?s(n.current):s;l!==n.current&&e(l,n.current),n.current=l,o({})}return[n.current,a]}var Jc=function(e){var n=e.position,r=e.prefixCls,i=e.extra;if(!i)return null;var o,a={};return i&&Zt(i)==="object"&&!u.exports.isValidElement(i)?a=i:a.right=i,n==="right"&&(o=a.right),n==="left"&&(o=a.left),o?u.exports.createElement("div",{className:"".concat(r,"-extra-content")},o):null};function gg(t,e){var n,r=u.exports.useContext(da),i=r.prefixCls,o=r.tabs,a=t.className,s=t.style,l=t.id,c=t.animated,d=t.activeKey,f=t.rtl,h=t.extra,v=t.editable,m=t.locale,b=t.tabPosition,g=t.tabBarGutter,w=t.children,D=t.onTabClick,E=t.onTabScroll,y=u.exports.useRef(),S=u.exports.useRef(),x=u.exports.useRef(),I=u.exports.useRef(),_=mg(),F=U(_,2),k=F[0],P=F[1],O=b==="top"||b==="bottom",j=Xc(0,function(X,ne){O&&E&&E({direction:X>ne?"left":"right"})}),N=U(j,2),R=N[0],V=N[1],T=Xc(0,function(X,ne){!O&&E&&E({direction:X>ne?"top":"bottom"})}),C=U(T,2),M=C[0],A=C[1],W=u.exports.useState(0),L=U(W,2),K=L[0],Q=L[1],z=u.exports.useState(0),q=U(z,2),J=q[0],le=q[1],ve=u.exports.useState(0),me=U(ve,2),be=me[0],ze=me[1],Fe=u.exports.useState(0),tt=U(Fe,2),Ne=tt[0],ue=tt[1],je=u.exports.useState(null),se=U(je,2),ce=se[0],Se=se[1],Yt=u.exports.useState(null),Lt=U(Yt,2),$e=Lt[0],Xt=Lt[1],Ye=u.exports.useState(0),We=U(Ye,2),zt=We[0],Xe=We[1],ht=u.exports.useState(0),Ke=U(ht,2),nt=Ke[0],ke=Ke[1],Qn=Cv(new Map),Jt=U(Qn,2),at=Jt[0],Sn=Jt[1],st=Dv(o,at,K),an="".concat(i,"-nav-operations-hidden"),vt=0,it=0;O?f?(vt=0,it=Math.max(0,K-ce)):(vt=Math.min(0,ce-K),it=0):(vt=Math.min(0,$e-J),it=0);function sn(X){return X<vt?vt:X>it?it:X}var Dt=u.exports.useRef(),ln=u.exports.useState(),rt=U(ln,2),Mt=rt[0],ae=rt[1];function he(){ae(Date.now())}function Ee(){window.clearTimeout(Dt.current)}vg(y,function(X,ne){function ge(Me,Tt){Me(function(dn){var ar=sn(dn+Tt);return ar})}if(O){if(ce>=K)return!1;ge(V,X)}else{if($e>=J)return!1;ge(A,ne)}return Ee(),he(),!0}),u.exports.useEffect(function(){return Ee(),Mt&&(Dt.current=window.setTimeout(function(){ae(0)},100)),Ee},[Mt]);function Je(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,ne=st.get(X)||{width:0,height:0,left:0,right:0,top:0};if(O){var ge=R;f?ne.right<R?ge=ne.right:ne.right+ne.width>R+ce&&(ge=ne.right+ne.width-ce):ne.left<-R?ge=-ne.left:ne.left+ne.width>-R+ce&&(ge=-(ne.left+ne.width-ce)),A(0),V(sn(ge))}else{var Me=M;ne.top<-M?Me=-ne.top:ne.top+ne.height>-M+$e&&(Me=-(ne.top+ne.height-$e)),V(0),A(sn(Me))}}var cn=Mv(st,{width:ce,height:$e,left:R,top:M},{width:be,height:Ne},{width:zt,height:nt},$($({},t),{},{tabs:o})),Vr=U(cn,2),oo=Vr[0],ao=Vr[1],En={};b==="top"||b==="bottom"?En[f?"marginRight":"marginLeft"]=g:En.marginTop=g;var er=o.map(function(X,ne){var ge=X.key;return u.exports.createElement(Ev,{id:l,prefixCls:i,key:ge,tab:X,style:ne===0?void 0:En,closable:X.closable,editable:v,active:ge===d,renderWrapper:w,removeAriaLabel:m==null?void 0:m.removeAriaLabel,ref:k(ge),onClick:function(Tt){D(ge,Tt)},onRemove:function(){P(ge)},onFocus:function(){Je(ge),he(),!!y.current&&(f||(y.current.scrollLeft=0),y.current.scrollTop=0)}})}),Dn=Tl(function(){var X,ne,ge,Me,Tt,dn,ar,uo,fo,$d=((X=y.current)===null||X===void 0?void 0:X.offsetWidth)||0,Kd=((ne=y.current)===null||ne===void 0?void 0:ne.offsetHeight)||0,Ga=((ge=I.current)===null||ge===void 0?void 0:ge.offsetWidth)||0,qa=((Me=I.current)===null||Me===void 0?void 0:Me.offsetHeight)||0,Vd=((Tt=x.current)===null||Tt===void 0?void 0:Tt.offsetWidth)||0,Ud=((dn=x.current)===null||dn===void 0?void 0:dn.offsetHeight)||0;Se($d),Xt(Kd),Xe(Ga),ke(qa);var Ya=(((ar=S.current)===null||ar===void 0?void 0:ar.offsetWidth)||0)-Ga,Xa=(((uo=S.current)===null||uo===void 0?void 0:uo.offsetHeight)||0)-qa;Q(Ya),le(Xa);var Ja=(fo=x.current)===null||fo===void 0?void 0:fo.className.includes(an);ze(Ya-(Ja?0:Vd)),ue(Xa-(Ja?0:Ud)),Sn(function(){var Za=new Map;return o.forEach(function(Gd){var Qa=Gd.key,sr=k(Qa).current;sr&&Za.set(Qa,{width:sr.offsetWidth,height:sr.offsetHeight,left:sr.offsetLeft,top:sr.offsetTop})}),Za})}),tr=o.slice(0,oo),so=o.slice(ao+1),Ur=[].concat(mt(tr),mt(so)),lo=u.exports.useState(),nr=U(lo,2),Mn=nr[0],co=nr[1],Ot=st.get(d),Gr=u.exports.useRef();function rr(){Ce.cancel(Gr.current)}u.exports.useEffect(function(){var X={};return Ot&&(O?(f?X.right=Ot.right:X.left=Ot.left,X.width=Ot.width):(X.top=Ot.top,X.height=Ot.height)),rr(),Gr.current=Ce(function(){co(X)}),rr},[Ot,O,f]),u.exports.useEffect(function(){Je()},[d,Ot,st,O]),u.exports.useEffect(function(){Dn()},[f,g,d,o.map(function(X){return X.key}).join("_")]);var qr=!!Ur.length,un="".concat(i,"-nav-wrap"),ir,or,Yr,xe;return O?f?(or=R>0,ir=R+ce<K):(ir=R<0,or=-R+ce<K):(Yr=M<0,xe=-M+$e<J),u.exports.createElement("div",{ref:e,role:"tablist",className:fe("".concat(i,"-nav"),a),style:s,onKeyDown:function(){he()}},u.exports.createElement(Jc,{position:"left",extra:h,prefixCls:i}),u.exports.createElement(gr,{onResize:Dn},u.exports.createElement("div",{className:fe(un,(n={},G(n,"".concat(un,"-ping-left"),ir),G(n,"".concat(un,"-ping-right"),or),G(n,"".concat(un,"-ping-top"),Yr),G(n,"".concat(un,"-ping-bottom"),xe),n)),ref:y},u.exports.createElement(gr,{onResize:Dn},u.exports.createElement("div",{ref:S,className:"".concat(i,"-nav-list"),style:{transform:"translate(".concat(R,"px, ").concat(M,"px)"),transition:Mt?"none":void 0}},er,u.exports.createElement(Gc,{ref:I,prefixCls:i,locale:m,editable:v,style:$($({},er.length===0?void 0:En),{},{visibility:qr?"hidden":null})}),u.exports.createElement("div",{className:fe("".concat(i,"-ink-bar"),G({},"".concat(i,"-ink-bar-animated"),c.inkBar)),style:Mn}))))),u.exports.createElement(pg,Z({},t,{ref:x,prefixCls:i,tabs:Ur,className:!qr&&an})),u.exports.createElement(Jc,{position:"right",extra:h,prefixCls:i}))}var Zc=u.exports.forwardRef(gg);function bg(t){var e=t.id,n=t.activeKey,r=t.animated,i=t.tabPosition,o=t.rtl,a=t.destroyInactiveTabPane,s=u.exports.useContext(da),l=s.prefixCls,c=s.tabs,d=r.tabPane,f=c.findIndex(function(h){return h.key===n});return u.exports.createElement("div",{className:fe("".concat(l,"-content-holder"))},u.exports.createElement("div",{className:fe("".concat(l,"-content"),"".concat(l,"-content-").concat(i),G({},"".concat(l,"-content-animated"),d)),style:f&&d?G({},o?"marginRight":"marginLeft","-".concat(f,"00%")):null},c.map(function(h){return u.exports.cloneElement(h.node,{key:h.key,prefixCls:l,tabKey:h.key,id:e,animated:d,active:h.key===n,destroyInactiveTabPane:a})})))}function yg(t){var e=t.prefixCls,n=t.forceRender,r=t.className,i=t.style,o=t.id,a=t.active,s=t.animated,l=t.destroyInactiveTabPane,c=t.tabKey,d=t.children,f=u.exports.useState(n),h=U(f,2),v=h[0],m=h[1];u.exports.useEffect(function(){a?m(!0):l&&m(!1)},[a,l]);var b={};return a||(s?(b.visibility="hidden",b.height=0,b.overflowY="hidden"):b.display="none"),u.exports.createElement("div",{id:o&&"".concat(o,"-panel-").concat(c),role:"tabpanel",tabIndex:a?0:-1,"aria-labelledby":o&&"".concat(o,"-tab-").concat(c),"aria-hidden":!a,style:$($({},b),i),className:fe("".concat(e,"-tabpane"),a&&"".concat(e,"-tabpane-active"),r)},(a||v||n)&&d)}var wg=["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll"],Qc=0;function xg(t){return Rn(t).map(function(e){if(u.exports.isValidElement(e)){var n=e.key!==void 0?String(e.key):void 0;return $($({key:n},e.props),{},{node:e})}return null}).filter(function(e){return e})}function Cg(t,e){var n,r=t.id,i=t.prefixCls,o=i===void 0?"rc-tabs":i,a=t.className,s=t.children,l=t.direction,c=t.activeKey,d=t.defaultActiveKey,f=t.editable,h=t.animated,v=h===void 0?{inkBar:!0,tabPane:!1}:h,m=t.tabPosition,b=m===void 0?"top":m,g=t.tabBarGutter,w=t.tabBarStyle,D=t.tabBarExtraContent,E=t.locale,y=t.moreIcon,S=t.moreTransitionName,x=t.destroyInactiveTabPane,I=t.renderTabBar,_=t.onChange,F=t.onTabClick,k=t.onTabScroll,P=Oe(t,wg),O=xg(s),j=l==="rtl",N;v===!1?N={inkBar:!1,tabPane:!1}:v===!0?N={inkBar:!0,tabPane:!0}:N=$({inkBar:!0,tabPane:!1},Zt(v)==="object"?v:{});var R=u.exports.useState(!1),V=U(R,2),T=V[0],C=V[1];u.exports.useEffect(function(){C(vl())},[]);var M=Nn(function(){var ue;return(ue=O[0])===null||ue===void 0?void 0:ue.key},{value:c,defaultValue:d}),A=U(M,2),W=A[0],L=A[1],K=u.exports.useState(function(){return O.findIndex(function(ue){return ue.key===W})}),Q=U(K,2),z=Q[0],q=Q[1];u.exports.useEffect(function(){var ue=O.findIndex(function(se){return se.key===W});if(ue===-1){var je;ue=Math.max(0,Math.min(z,O.length-1)),L((je=O[ue])===null||je===void 0?void 0:je.key)}q(ue)},[O.map(function(ue){return ue.key}).join("_"),W,z]);var J=Nn(null,{value:r}),le=U(J,2),ve=le[0],me=le[1],be=b;T&&!["left","right"].includes(b)&&(be="top"),u.exports.useEffect(function(){r||(me("rc-tabs-".concat(Qc)),Qc+=1)},[]);function ze(ue,je){F==null||F(ue,je),L(ue),_==null||_(ue)}var Fe={id:ve,activeKey:W,animated:N,tabPosition:be,rtl:j,mobile:T},tt,Ne=$($({},Fe),{},{editable:f,locale:E,moreIcon:y,moreTransitionName:S,tabBarGutter:g,onTabClick:ze,onTabScroll:k,extra:D,style:w,panes:s});return I?tt=I(Ne,Zc):tt=u.exports.createElement(Zc,Ne),u.exports.createElement(da.Provider,{value:{tabs:O,prefixCls:o}},u.exports.createElement("div",Z({ref:e,id:r,className:fe(o,"".concat(o,"-").concat(be),(n={},G(n,"".concat(o,"-mobile"),T),G(n,"".concat(o,"-editable"),f),G(n,"".concat(o,"-rtl"),j),n),a)},P),tt,u.exports.createElement(bg,Z({destroyInactiveTabPane:x},Fe,{animated:N}))))}var eu=u.exports.forwardRef(Cg);eu.TabPane=yg;var Sg=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),tu=u.exports.createContext(null),Eg=function(t){Sg(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){return u.exports.createElement(tu.Provider,{value:this.props.store},this.props.children)},e}(u.exports.Component),Dg=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vn=function(){return vn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},vn.apply(this,arguments)};function Mg(t){return t.displayName||t.name||"Component"}var Og=function(){return{}};function fa(t,e){e===void 0&&(e={});var n=!!t,r=t||Og;return function(o){var a=function(l){Dg(c,l);function c(d,f){var h=l.call(this,d,f)||this;return h.unsubscribe=null,h.handleChange=function(){if(!!h.unsubscribe){var v=r(h.store.getState(),h.props);h.setState({subscribed:v})}},h.store=h.context,h.state={subscribed:r(h.store.getState(),d),store:h.store,props:d},h}return c.getDerivedStateFromProps=function(d,f){return t&&t.length===2&&d!==f.props?{subscribed:r(f.store.getState(),d),props:d}:{props:d}},c.prototype.componentDidMount=function(){this.trySubscribe()},c.prototype.componentWillUnmount=function(){this.tryUnsubscribe()},c.prototype.shouldComponentUpdate=function(d,f){return!lr(this.props,d)||!lr(this.state.subscribed,f.subscribed)},c.prototype.trySubscribe=function(){n&&(this.unsubscribe=this.store.subscribe(this.handleChange),this.handleChange())},c.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},c.prototype.render=function(){var d=vn(vn(vn({},this.props),this.state.subscribed),{store:this.store});return u.exports.createElement(o,vn({},d,{ref:this.props.miniStoreForwardedRef}))},c.displayName="Connect("+Mg(o)+")",c.contextType=tu,c}(u.exports.Component);if(e.forwardRef){var s=u.exports.forwardRef(function(l,c){return u.exports.createElement(a,vn({},l,{miniStoreForwardedRef:c}))});return ts(s,o)}return ts(a,o)}}var zi=function(){return zi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},zi.apply(this,arguments)};function Tg(t){var e=t,n=[];function r(a){e=zi(zi({},e),a);for(var s=0;s<n.length;s++)n[s]()}function i(){return e}function o(a){return n.push(a),function(){var l=n.indexOf(a);n.splice(l,1)}}return{setState:r,getState:i,subscribe:o}}function Pg(){var t=[].slice.call(arguments,0);return t.length===1?t[0]:function(){for(var n=0;n<t.length;n++)t[n]&&t[n].apply&&t[n].apply(this,arguments)}}var pa=/iPhone/i,nu=/iPod/i,ru=/iPad/i,ha=/\bAndroid(?:.+)Mobile\b/i,iu=/Android/i,Kn=/\bAndroid(?:.+)SD4930UR\b/i,Fi=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,Ut=/Windows Phone/i,ou=/\bWindows(?:.+)ARM\b/i,au=/BlackBerry/i,su=/BB10/i,lu=/Opera Mini/i,cu=/\b(CriOS|Chrome)(?:.+)Mobile/i,uu=/Mobile(?:.+)Firefox\b/i;function ie(t,e){return t.test(e)}function du(t){var e=t||(typeof navigator!="undefined"?navigator.userAgent:""),n=(e||"").split("[FBAN");if(typeof n[1]!="undefined"){var r=n,i=U(r,1);e=i[0]}if(n=e.split("Twitter"),typeof n[1]!="undefined"){var o=n,a=U(o,1);e=a[0]}var s={apple:{phone:ie(pa,e)&&!ie(Ut,e),ipod:ie(nu,e),tablet:!ie(pa,e)&&ie(ru,e)&&!ie(Ut,e),device:(ie(pa,e)||ie(nu,e)||ie(ru,e))&&!ie(Ut,e)},amazon:{phone:ie(Kn,e),tablet:!ie(Kn,e)&&ie(Fi,e),device:ie(Kn,e)||ie(Fi,e)},android:{phone:!ie(Ut,e)&&ie(Kn,e)||!ie(Ut,e)&&ie(ha,e),tablet:!ie(Ut,e)&&!ie(Kn,e)&&!ie(ha,e)&&(ie(Fi,e)||ie(iu,e)),device:!ie(Ut,e)&&(ie(Kn,e)||ie(Fi,e)||ie(ha,e)||ie(iu,e))||ie(/\bokhttp\b/i,e)},windows:{phone:ie(Ut,e),tablet:ie(ou,e),device:ie(Ut,e)||ie(ou,e)},other:{blackberry:ie(au,e),blackberry10:ie(su,e),opera:ie(lu,e),firefox:ie(uu,e),chrome:ie(cu,e),device:ie(au,e)||ie(su,e)||ie(lu,e)||ie(uu,e)||ie(cu,e)},any:null,phone:null,tablet:null};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var _g=$($({},du()),{},{isMobile:du});function Ve(){}function va(t,e,n){var r=e||"";return t.key||"".concat(r,"item_").concat(n)}function fu(t){return"".concat(t,"-menu-")}function pu(t,e){var n=-1;u.exports.Children.forEach(t,function(r){n+=1,r&&r.type&&r.type.isMenuItemGroup?u.exports.Children.forEach(r.props.children,function(i){n+=1,e(i,n)}):e(r,n)})}function hu(t,e,n){!t||n.find||u.exports.Children.forEach(t,function(r){if(r){var i=r.type;if(!i||!(i.isSubMenu||i.isMenuItem||i.isMenuItemGroup))return;e.indexOf(r.key)!==-1?n.find=!0:r.props.children&&hu(r.props.children,e,n)}})}var Bi=["defaultSelectedKeys","selectedKeys","defaultOpenKeys","openKeys","mode","getPopupContainer","onSelect","onDeselect","onDestroy","openTransitionName","openAnimation","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","triggerSubMenuAction","level","selectable","multiple","onOpenChange","visible","focusable","defaultActiveFirst","prefixCls","inlineIndent","parentMenu","title","rootPrefixCls","eventKey","active","onItemHover","onTitleMouseEnter","onTitleMouseLeave","onTitleClick","popupAlign","popupOffset","isOpen","renderMenuItem","manualRef","subMenuKey","disabled","index","isSelected","store","activeKey","builtinPlacements","overflowedIndicator","motion","attribute","value","popupClassName","inlineCollapsed","menu","theme","itemIcon","expandIcon"],ma=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=e&&typeof e.getBoundingClientRect=="function"&&e.getBoundingClientRect().width;if(r){if(n){var i=getComputedStyle(e),o=i.marginLeft,a=i.marginRight;r+=+o.replace("px","")+ +a.replace("px","")}r=+r.toFixed(6)}return r||0},ji=function(e,n,r){e&&Zt(e.style)==="object"&&(e.style[n]=r)},Ig=function(){return _g.any},en={adjustX:1,adjustY:1},kg={topLeft:{points:["bl","tl"],overflow:en,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:en,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:en,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:en,offset:[4,0]}},Rg={topLeft:{points:["bl","tl"],overflow:en,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:en,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:en,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:en,offset:[4,0]}},vu=0,Ng={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"},Tr=function(e,n,r){var i=fu(n),o=e.getState();e.setState({defaultActiveFirst:$($({},o.defaultActiveFirst),{},G({},i,r))})},mu=function(t){Ft(n,t);var e=Wt(n);function n(r){var i;Bt(this,n),i=e.call(this,r),i.onDestroy=function(d){i.props.onDestroy(d)},i.onKeyDown=function(d){var f=d.keyCode,h=i.menuInstance,v=i.props.store,m=i.getVisible();if(f===we.ENTER)return i.onTitleClick(d),Tr(v,i.props.eventKey,!0),!0;if(f===we.RIGHT)return m?h.onKeyDown(d):(i.triggerOpenChange(!0),Tr(v,i.props.eventKey,!0)),!0;if(f===we.LEFT){var b;if(m)b=h.onKeyDown(d);else return;return b||(i.triggerOpenChange(!1),b=!0),b}if(m&&(f===we.UP||f===we.DOWN))return h.onKeyDown(d)},i.onOpenChange=function(d){i.props.onOpenChange(d)},i.onPopupVisibleChange=function(d){i.triggerOpenChange(d,d?"mouseenter":"mouseleave")},i.onMouseEnter=function(d){var f=i.props,h=f.eventKey,v=f.onMouseEnter,m=f.store;Tr(m,i.props.eventKey,!1),v({key:h,domEvent:d})},i.onMouseLeave=function(d){var f=i.props,h=f.parentMenu,v=f.eventKey,m=f.onMouseLeave;h.subMenuInstance=Ae(i),m({key:v,domEvent:d})},i.onTitleMouseEnter=function(d){var f=i.props,h=f.eventKey,v=f.onItemHover,m=f.onTitleMouseEnter;v({key:h,hover:!0}),m({key:h,domEvent:d})},i.onTitleMouseLeave=function(d){var f=i.props,h=f.parentMenu,v=f.eventKey,m=f.onItemHover,b=f.onTitleMouseLeave;h.subMenuInstance=Ae(i),m({key:v,hover:!1}),b({key:v,domEvent:d})},i.onTitleClick=function(d){var f=Ae(i),h=f.props;h.onTitleClick({key:h.eventKey,domEvent:d}),h.triggerSubMenuAction!=="hover"&&(i.triggerOpenChange(!i.getVisible(),"click"),Tr(h.store,i.props.eventKey,!1))},i.onSubMenuClick=function(d){typeof i.props.onClick=="function"&&i.props.onClick(i.addKeyPath(d))},i.onSelect=function(d){i.props.onSelect(d)},i.onDeselect=function(d){i.props.onDeselect(d)},i.getPrefixCls=function(){return"".concat(i.props.rootPrefixCls,"-submenu")},i.getActiveClassName=function(){return"".concat(i.getPrefixCls(),"-active")},i.getDisabledClassName=function(){return"".concat(i.getPrefixCls(),"-disabled")},i.getSelectedClassName=function(){return"".concat(i.getPrefixCls(),"-selected")},i.getOpenClassName=function(){return"".concat(i.props.rootPrefixCls,"-submenu-open")},i.getVisible=function(){return i.state.isOpen},i.getMode=function(){return i.state.mode},i.saveMenuInstance=function(d){i.menuInstance=d},i.addKeyPath=function(d){return $($({},d),{},{keyPath:(d.keyPath||[]).concat(i.props.eventKey)})},i.triggerOpenChange=function(d,f){var h=i.props.eventKey,v=function(){i.onOpenChange({key:h,item:Ae(i),trigger:f,open:d})};f==="mouseenter"?i.mouseenterTimeout=setTimeout(function(){v()},0):v()},i.isChildrenSelected=function(){var d={find:!1};return hu(i.props.children,i.props.selectedKeys,d),d.find},i.isInlineMode=function(){return i.getMode()==="inline"},i.adjustWidth=function(){if(!(!i.subMenuTitle||!i.menuInstance)){var d=os.exports.findDOMNode(i.menuInstance);d.offsetWidth>=i.subMenuTitle.offsetWidth||(d.style.minWidth="".concat(i.subMenuTitle.offsetWidth,"px"))}},i.saveSubMenuTitle=function(d){i.subMenuTitle=d},i.getBaseProps=function(){var d=Ae(i),f=d.props,h=i.getMode();return{mode:h==="horizontal"?"vertical":h,visible:i.getVisible(),level:f.level+1,inlineIndent:f.inlineIndent,focusable:!1,onClick:i.onSubMenuClick,onSelect:i.onSelect,onDeselect:i.onDeselect,onDestroy:i.onDestroy,selectedKeys:f.selectedKeys,eventKey:"".concat(f.eventKey,"-menu-"),openKeys:f.openKeys,motion:f.motion,onOpenChange:i.onOpenChange,subMenuOpenDelay:f.subMenuOpenDelay,parentMenu:Ae(i),subMenuCloseDelay:f.subMenuCloseDelay,forceSubMenuRender:f.forceSubMenuRender,triggerSubMenuAction:f.triggerSubMenuAction,builtinPlacements:f.builtinPlacements,defaultActiveFirst:f.store.getState().defaultActiveFirst[fu(f.eventKey)],multiple:f.multiple,prefixCls:f.rootPrefixCls,id:i.internalMenuId,manualRef:i.saveMenuInstance,itemIcon:f.itemIcon,expandIcon:f.expandIcon,direction:f.direction}},i.getMotion=function(d,f){var h=Ae(i),v=h.haveRendered,m=i.props,b=m.motion,g=m.rootPrefixCls,w=$($({},b),{},{leavedClassName:"".concat(g,"-hidden"),removeOnLeave:!1,motionAppear:v||!f||d!=="inline"});return w};var o=r.store,a=r.eventKey,s=o.getState(),l=s.defaultActiveFirst;i.isRootMenu=!1;var c=!1;return l&&(c=l[a]),Tr(o,a,c),i.state={mode:r.mode,isOpen:r.isOpen},i}return jt(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var i=this,o=this.props,a=o.mode,s=o.parentMenu,l=o.manualRef,c=o.isOpen,d=function(){i.setState({mode:a,isOpen:c})},f=c!==this.state.isOpen,h=a!==this.state.mode;(h||f)&&(Ce.cancel(this.updateStateRaf),h?this.updateStateRaf=Ce(d):d()),l&&l(this),!(a!=="horizontal"||!(s==null?void 0:s.isRootMenu)||!c)&&(this.minWidthTimeout=setTimeout(function(){return i.adjustWidth()},0))}},{key:"componentWillUnmount",value:function(){var i=this.props,o=i.onDestroy,a=i.eventKey;o&&o(a),this.minWidthTimeout&&clearTimeout(this.minWidthTimeout),this.mouseenterTimeout&&clearTimeout(this.mouseenterTimeout),Ce.cancel(this.updateStateRaf)}},{key:"renderPopupMenu",value:function(i,o){var a=this.getBaseProps();return u.exports.createElement(xu,Z({},a,{id:this.internalMenuId,className:i,style:o}),this.props.children)}},{key:"renderChildren",value:function(){var i=this,o=this.getBaseProps(),a=o.mode,s=o.visible,l=o.forceSubMenuRender,c=o.direction,d=this.getMotion(a,s);if(this.haveRendered=!0,this.haveOpened=this.haveOpened||s||l,!this.haveOpened)return u.exports.createElement("div",null);var f=fe("".concat(o.prefixCls,"-sub"),G({},"".concat(o.prefixCls,"-rtl"),c==="rtl"));return this.isInlineMode()?u.exports.createElement(Cr,Z({visible:o.visible,forceRender:l},d),function(h){var v=h.className,m=h.style,b=fe(f,v);return i.renderPopupMenu(b,m)}):this.renderPopupMenu(f)}},{key:"render",value:function(){var i,o,a,s=$({},this.props),l=this.getVisible(),c=this.getPrefixCls(),d=this.isInlineMode(),f=this.getMode(),h=fe(c,"".concat(c,"-").concat(f),(i={},G(i,s.className,!!s.className),G(i,this.getOpenClassName(),l),G(i,this.getActiveClassName(),s.active||l&&!d),G(i,this.getDisabledClassName(),s.disabled),G(i,this.getSelectedClassName(),this.isChildrenSelected()),i));this.internalMenuId||(s.eventKey?this.internalMenuId="".concat(s.eventKey,"$Menu"):(vu+=1,this.internalMenuId="$__$".concat(vu,"$Menu")));var v={},m={},b={};s.disabled||(v={onMouseLeave:this.onMouseLeave,onMouseEnter:this.onMouseEnter},m={onClick:this.onTitleClick},b={onMouseEnter:this.onTitleMouseEnter,onMouseLeave:this.onTitleMouseLeave});var g={},w=s.direction,D=w==="rtl";d&&(D?g.paddingRight=s.inlineIndent*s.level:g.paddingLeft=s.inlineIndent*s.level);var E={};this.getVisible()&&(E={"aria-owns":this.internalMenuId});var y=null;f!=="horizontal"&&(y=this.props.expandIcon,typeof this.props.expandIcon=="function"&&(y=u.exports.createElement(this.props.expandIcon,$({},this.props))));var S=u.exports.createElement("div",Z({ref:this.saveSubMenuTitle,style:g,className:"".concat(c,"-title"),role:"button"},b,m,{"aria-expanded":l},E,{"aria-haspopup":"true",title:typeof s.title=="string"?s.title:void 0}),s.title,y||u.exports.createElement("i",{className:"".concat(c,"-arrow")})),x=this.renderChildren(),I=((o=s.parentMenu)===null||o===void 0?void 0:o.isRootMenu)?s.parentMenu.props.getPopupContainer:function(A){return A.parentNode},_=Ng[f],F=s.popupOffset?{offset:s.popupOffset}:{},k=fe((a={},G(a,s.popupClassName,s.popupClassName&&!d),G(a,"".concat(c,"-rtl"),D),a)),P=s.disabled,O=s.triggerSubMenuAction,j=s.subMenuOpenDelay,N=s.forceSubMenuRender,R=s.subMenuCloseDelay,V=s.builtinPlacements;Bi.forEach(function(A){return delete s[A]}),delete s.onClick;var T=D?$($({},Rg),V):$($({},kg),V);delete s.direction;var C=this.getBaseProps(),M=d?null:this.getMotion(C.mode,C.visible);return u.exports.createElement("li",Z({},s,v,{className:h,role:"menuitem"}),u.exports.createElement(oa,{prefixCls:c,popupClassName:fe("".concat(c,"-popup"),k),getPopupContainer:I,builtinPlacements:T,popupPlacement:_,popupVisible:d?!1:l,popupAlign:F,popup:d?null:x,action:P||d?[]:[O],mouseEnterDelay:j,mouseLeaveDelay:R,onPopupVisibleChange:this.onPopupVisibleChange,forceRender:N,popupMotion:M},S),d?x:null)}}]),n}(u.exports.Component);mu.defaultProps={onMouseEnter:Ve,onMouseLeave:Ve,onTitleMouseEnter:Ve,onTitleMouseLeave:Ve,onTitleClick:Ve,manualRef:Ve,mode:"vertical",title:""};var gu=fa(function(t,e){var n=t.openKeys,r=t.activeKey,i=t.selectedKeys,o=e.eventKey,a=e.subMenuKey;return{isOpen:n.indexOf(o)>-1,active:r[a]===o,selectedKeys:i}})(mu);gu.isSubMenu=!0;var bu="menuitem-overflowed",Ag=.5,yu=function(t){Ft(n,t);var e=Wt(n);function n(){var r;return Bt(this,n),r=e.apply(this,arguments),r.resizeObserver=null,r.mutationObserver=null,r.originalTotalWidth=0,r.overflowedItems=[],r.menuItemSizes=[],r.cancelFrameId=null,r.state={lastVisibleIndex:void 0},r.childRef=u.exports.createRef(),r.getMenuItemNodes=function(){var i=r.props.prefixCls,o=r.childRef.current;return o?[].slice.call(o.children).filter(function(a){return a.className.split(" ").indexOf("".concat(i,"-overflowed-submenu"))<0}):[]},r.getOverflowedSubMenuItem=function(i,o,a){var s=r.props,l=s.overflowedIndicator,c=s.level,d=s.mode,f=s.prefixCls,h=s.theme;if(c!==1||d!=="horizontal")return null;var v=r.props.children[0],m=v.props;m.children,m.title;var b=m.style,g=Oe(m,["children","title","style"]),w=$({},b),D="".concat(i,"-overflowed-indicator"),E="".concat(i,"-overflowed-indicator");o.length===0&&a!==!0?w=$($({},w),{},{display:"none"}):a&&(w=$($({},w),{},{visibility:"hidden",position:"absolute"}),D="".concat(D,"-placeholder"),E="".concat(E,"-placeholder"));var y=h?"".concat(f,"-").concat(h):"",S={};return Bi.forEach(function(x){g[x]!==void 0&&(S[x]=g[x])}),u.exports.createElement(gu,Z({title:l,className:"".concat(f,"-overflowed-submenu"),popupClassName:y},S,{key:D,eventKey:E,disabled:!1,style:w}),o)},r.setChildrenWidthAndResize=function(){if(r.props.mode==="horizontal"){var i=r.childRef.current;if(!!i){var o=i.children;if(!(!o||o.length===0)){var a=i.children[o.length-1];ji(a,"display","inline-block");var s=r.getMenuItemNodes(),l=s.filter(function(c){return c.className.split(" ").indexOf(bu)>=0});l.forEach(function(c){ji(c,"display","inline-block")}),r.menuItemSizes=s.map(function(c){return ma(c,!0)}),l.forEach(function(c){ji(c,"display","none")}),r.overflowedIndicatorWidth=ma(i.children[i.children.length-1],!0),r.originalTotalWidth=r.menuItemSizes.reduce(function(c,d){return c+d},0),r.handleResize(),ji(a,"display","none")}}}},r.handleResize=function(){if(r.props.mode==="horizontal"){var i=r.childRef.current;if(!!i){var o=ma(i);r.overflowedItems=[];var a=0,s;r.originalTotalWidth>o+Ag&&(s=-1,r.menuItemSizes.forEach(function(l){a+=l,a+r.overflowedIndicatorWidth<=o&&(s+=1)})),r.setState({lastVisibleIndex:s})}}},r}return jt(n,[{key:"componentDidMount",value:function(){var i=this;if(this.setChildrenWidthAndResize(),this.props.level===1&&this.props.mode==="horizontal"){var o=this.childRef.current;if(!o)return;this.resizeObserver=new zo(function(a){a.forEach(function(){var s=i.cancelFrameId;cancelAnimationFrame(s),i.cancelFrameId=requestAnimationFrame(i.setChildrenWidthAndResize)})}),[].slice.call(o.children).concat(o).forEach(function(a){i.resizeObserver.observe(a)}),typeof MutationObserver!="undefined"&&(this.mutationObserver=new MutationObserver(function(){i.resizeObserver.disconnect(),[].slice.call(o.children).concat(o).forEach(function(a){i.resizeObserver.observe(a)}),i.setChildrenWidthAndResize()}),this.mutationObserver.observe(o,{attributes:!1,childList:!0,subTree:!1}))}}},{key:"componentWillUnmount",value:function(){this.resizeObserver&&this.resizeObserver.disconnect(),this.mutationObserver&&this.mutationObserver.disconnect(),cancelAnimationFrame(this.cancelFrameId)}},{key:"renderChildren",value:function(i){var o=this,a=this.state.lastVisibleIndex;return(i||[]).reduce(function(s,l,c){var d=l;if(o.props.mode==="horizontal"){var f=o.getOverflowedSubMenuItem(l.props.eventKey,[]);a!==void 0&&o.props.className.indexOf("".concat(o.props.prefixCls,"-root"))!==-1&&(c>a&&(d=u.exports.cloneElement(l,{style:{display:"none"},eventKey:"".concat(l.props.eventKey,"-hidden"),className:"".concat(bu)})),c===a+1&&(o.overflowedItems=i.slice(a+1).map(function(v){return u.exports.cloneElement(v,{key:v.props.eventKey,mode:"vertical-left"})}),f=o.getOverflowedSubMenuItem(l.props.eventKey,o.overflowedItems)));var h=[].concat(mt(s),[f,d]);return c===i.length-1&&h.push(o.getOverflowedSubMenuItem(l.props.eventKey,[],!0)),h}return[].concat(mt(s),[d])},[])}},{key:"render",value:function(){var i=this.props;i.visible,i.prefixCls,i.overflowedIndicator,i.mode,i.level;var o=i.tag,a=i.children;i.theme;var s=Oe(i,["visible","prefixCls","overflowedIndicator","mode","level","tag","children","theme"]),l=o;return u.exports.createElement(l,Z({ref:this.childRef},s),this.renderChildren(a))}}]),n}(u.exports.Component);yu.defaultProps={tag:"div",className:""};function Lg(t){return t.length?t.every(function(e){return!!e.props.disabled}):!0}function Wi(t,e,n){var r=t.getState();t.setState({activeKey:$($({},r.activeKey),{},G({},e,n))})}function Vn(t){return t.eventKey||"0-menu-"}function Hi(t,e){var n=e,r=t.children,i=t.eventKey;if(n){var o;if(pu(r,function(a,s){a&&a.props&&!a.props.disabled&&n===va(a,i,s)&&(o=!0)}),o)return n}return n=null,t.defaultActiveFirst&&pu(r,function(a,s){!n&&a&&!a.props.disabled&&(n=va(a,i,s))}),n}function zg(t){if(!!t){var e=this.instanceArray.indexOf(t);e!==-1?this.instanceArray[e]=t:this.instanceArray.push(t)}}var wu=function(t){Ft(n,t);var e=Wt(n);function n(r){var i;return Bt(this,n),i=e.call(this,r),i.onKeyDown=function(o,a){var s=o.keyCode,l;if(i.getFlatInstanceArray().forEach(function(d){d&&d.props.active&&d.onKeyDown&&(l=d.onKeyDown(o))}),l)return 1;var c=null;if((s===we.UP||s===we.DOWN)&&(c=i.step(s===we.UP?-1:1)),c)return o.preventDefault(),Wi(i.props.store,Vn(i.props),c.props.eventKey),typeof a=="function"&&a(c),1},i.onItemHover=function(o){var a=o.key,s=o.hover;Wi(i.props.store,Vn(i.props),s?a:null)},i.onDeselect=function(o){i.props.onDeselect(o)},i.onSelect=function(o){i.props.onSelect(o)},i.onClick=function(o){i.props.onClick(o)},i.onOpenChange=function(o){i.props.onOpenChange(o)},i.onDestroy=function(o){i.props.onDestroy(o)},i.getFlatInstanceArray=function(){return i.instanceArray},i.step=function(o){var a=i.getFlatInstanceArray(),s=i.props.store.getState().activeKey[Vn(i.props)],l=a.length;if(!l)return null;o<0&&(a=a.concat().reverse());var c=-1;if(a.every(function(v,m){return v&&v.props.eventKey===s?(c=m,!1):!0}),!(!i.props.defaultActiveFirst&&c!==-1&&Lg(a.slice(c,l-1)))){var d=(c+1)%l,f=d;do{var h=a[f];if(!h||h.props.disabled)f=(f+1)%l;else return h}while(f!==d);return null}},i.renderCommonMenuItem=function(o,a,s){var l=i.props.store.getState(),c=Ae(i),d=c.props,f=va(o,d.eventKey,a),h=o.props;if(!h||typeof o.type=="string")return o;var v=f===l.activeKey,m=$($({mode:h.mode||d.mode,level:d.level,inlineIndent:d.inlineIndent,renderMenuItem:i.renderMenuItem,rootPrefixCls:d.prefixCls,index:a,parentMenu:d.parentMenu,manualRef:h.disabled?void 0:Pg(o.ref,zg.bind(Ae(i))),eventKey:f,active:!h.disabled&&v,multiple:d.multiple,onClick:function(g){(h.onClick||Ve)(g),i.onClick(g)},onItemHover:i.onItemHover,motion:d.motion,subMenuOpenDelay:d.subMenuOpenDelay,subMenuCloseDelay:d.subMenuCloseDelay,forceSubMenuRender:d.forceSubMenuRender,onOpenChange:i.onOpenChange,onDeselect:i.onDeselect,onSelect:i.onSelect,builtinPlacements:d.builtinPlacements,itemIcon:h.itemIcon||i.props.itemIcon,expandIcon:h.expandIcon||i.props.expandIcon},s),{},{direction:d.direction});return(d.mode==="inline"||Ig())&&(m.triggerSubMenuAction="click"),u.exports.cloneElement(o,$($({},m),{},{key:f||a}))},i.renderMenuItem=function(o,a,s){if(!o)return null;var l=i.props.store.getState(),c={openKeys:l.openKeys,selectedKeys:l.selectedKeys,triggerSubMenuAction:i.props.triggerSubMenuAction,subMenuKey:s};return i.renderCommonMenuItem(o,a,c)},r.store.setState({activeKey:$($({},r.store.getState().activeKey),{},G({},r.eventKey,Hi(r,r.activeKey)))}),i.instanceArray=[],i}return jt(n,[{key:"componentDidMount",value:function(){this.props.manualRef&&this.props.manualRef(this)}},{key:"shouldComponentUpdate",value:function(i){return this.props.visible||i.visible||this.props.className!==i.className||!lr(this.props.style,i.style)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a="activeKey"in o?o.activeKey:o.store.getState().activeKey[Vn(o)],s=Hi(o,a);if(s!==a)Wi(o.store,Vn(o),s);else if("activeKey"in i){var l=Hi(i,i.activeKey);s!==l&&Wi(o.store,Vn(o),s)}}},{key:"render",value:function(){var i=this,o=Z({},this.props);this.instanceArray=[];var a=fe(o.prefixCls,o.className,"".concat(o.prefixCls,"-").concat(o.mode)),s={className:a,role:o.role||"menu"};o.id&&(s.id=o.id),o.focusable&&(s.tabIndex=0,s.onKeyDown=this.onKeyDown);var l=o.prefixCls,c=o.eventKey,d=o.visible,f=o.level,h=o.mode,v=o.overflowedIndicator,m=o.theme;return Bi.forEach(function(b){return delete o[b]}),delete o.onClick,u.exports.createElement(yu,Z({},o,{prefixCls:l,mode:h,tag:"ul",level:f,theme:m,visible:d,overflowedIndicator:v},s),Rn(o.children).map(function(b,g){return i.renderMenuItem(b,g,c||"0-menu-")}))}}]),n}(u.exports.Component);wu.defaultProps={prefixCls:"rc-menu",className:"",mode:"vertical",level:1,inlineIndent:24,visible:!0,focusable:!0,style:{},manualRef:Ve};var xu=fa()(wu);function Fg(t,e,n){var r=t.prefixCls,i=t.motion,o=t.defaultMotions,a=o===void 0?{}:o,s=t.openAnimation,l=t.openTransitionName,c=e.switchingModeFromInline;if(i)return i;if(Zt(s)==="object"&&s)cr(!1,"Object type of `openAnimation` is removed. Please use `motion` instead.");else if(typeof s=="string")return{motionName:"".concat(r,"-open-").concat(s)};if(l)return{motionName:l};var d=a[n];return d||(c?null:a.other)}var Cu=function(t){Ft(n,t);var e=Wt(n);function n(r){var i;Bt(this,n),i=e.call(this,r),i.onSelect=function(s){var l=Ae(i),c=l.props;if(c.selectable){var d=i.store.getState(),f=d.selectedKeys,h=s.key;c.multiple?f=f.concat([h]):f=[h],"selectedKeys"in c||i.store.setState({selectedKeys:f}),c.onSelect($($({},s),{},{selectedKeys:f}))}},i.onClick=function(s){var l=i.getRealMenuMode(),c=Ae(i),d=c.store,f=c.props.onOpenChange;l!=="inline"&&!("openKeys"in i.props)&&(d.setState({openKeys:[]}),f([])),i.props.onClick(s)},i.onKeyDown=function(s,l){i.innerMenu.getWrappedInstance().onKeyDown(s,l)},i.onOpenChange=function(s){var l=Ae(i),c=l.props,d=i.store.getState().openKeys.concat(),f=!1,h=function(m){var b=!1;if(m.open)b=d.indexOf(m.key)===-1,b&&d.push(m.key);else{var g=d.indexOf(m.key);b=g!==-1,b&&d.splice(g,1)}f=f||b};Array.isArray(s)?s.forEach(h):h(s),f&&("openKeys"in i.props||i.store.setState({openKeys:d}),c.onOpenChange(d))},i.onDeselect=function(s){var l=Ae(i),c=l.props;if(c.selectable){var d=i.store.getState().selectedKeys.concat(),f=s.key,h=d.indexOf(f);h!==-1&&d.splice(h,1),"selectedKeys"in c||i.store.setState({selectedKeys:d}),c.onDeselect($($({},s),{},{selectedKeys:d}))}},i.onMouseEnter=function(s){i.restoreModeVerticalFromInline();var l=i.props.onMouseEnter;l&&l(s)},i.onTransitionEnd=function(s){var l=s.propertyName==="width"&&s.target===s.currentTarget,c=s.target.className,d=Object.prototype.toString.call(c)==="[object SVGAnimatedString]"?c.animVal:c,f=s.propertyName==="font-size"&&d.indexOf("anticon")>=0;(l||f)&&i.restoreModeVerticalFromInline()},i.setInnerMenu=function(s){i.innerMenu=s},i.isRootMenu=!0;var o=r.defaultSelectedKeys,a=r.defaultOpenKeys;return"selectedKeys"in r&&(o=r.selectedKeys||[]),"openKeys"in r&&(a=r.openKeys||[]),i.store=Tg({selectedKeys:o,openKeys:a,activeKey:{"0-menu-":Hi(r,r.activeKey)}}),i.state={switchingModeFromInline:!1,prevProps:r,inlineOpenKeys:[],store:i.store},i}return jt(n,[{key:"componentDidMount",value:function(){this.updateMiniStore(),this.updateMenuDisplay()}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.siderCollapsed,s=o.inlineCollapsed,l=o.onOpenChange;(!i.inlineCollapsed&&s||!i.siderCollapsed&&a)&&l([]),this.updateMiniStore(),this.updateMenuDisplay()}},{key:"updateMenuDisplay",value:function(){var i=this.props.collapsedWidth,o=this.store,a=this.prevOpenKeys,s=this.getInlineCollapsed()&&(i===0||i==="0"||i==="0px");s?(this.prevOpenKeys=o.getState().openKeys.concat(),this.store.setState({openKeys:[]})):a&&(this.store.setState({openKeys:a}),this.prevOpenKeys=null)}},{key:"getRealMenuMode",value:function(){var i=this.props.mode,o=this.state.switchingModeFromInline,a=this.getInlineCollapsed();return o&&a?"inline":a?"vertical":i}},{key:"getInlineCollapsed",value:function(){var i=this.props,o=i.inlineCollapsed,a=i.siderCollapsed;return a!==void 0?a:o}},{key:"restoreModeVerticalFromInline",value:function(){var i=this.state.switchingModeFromInline;i&&this.setState({switchingModeFromInline:!1})}},{key:"updateMiniStore",value:function(){"selectedKeys"in this.props&&this.store.setState({selectedKeys:this.props.selectedKeys||[]}),"openKeys"in this.props&&this.store.setState({openKeys:this.props.openKeys||[]})}},{key:"render",value:function(){var i=$({},xi(this.props,["collapsedWidth","siderCollapsed","defaultMotions"])),o=this.getRealMenuMode();return i.className+=" ".concat(i.prefixCls,"-root"),i.direction==="rtl"&&(i.className+=" ".concat(i.prefixCls,"-rtl")),i=$($({},i),{},{mode:o,onClick:this.onClick,onOpenChange:this.onOpenChange,onDeselect:this.onDeselect,onSelect:this.onSelect,onMouseEnter:this.onMouseEnter,onTransitionEnd:this.onTransitionEnd,parentMenu:this,motion:Fg(this.props,this.state,o)}),delete i.openAnimation,delete i.openTransitionName,u.exports.createElement(Eg,{store:this.store},u.exports.createElement(xu,Z({},i,{ref:this.setInnerMenu}),this.props.children))}}],[{key:"getDerivedStateFromProps",value:function(i,o){var a=o.prevProps,s=o.store,l=s.getState(),c={},d={prevProps:i};return a.mode==="inline"&&i.mode!=="inline"&&(d.switchingModeFromInline=!0),"openKeys"in i?c.openKeys=i.openKeys||[]:((i.inlineCollapsed&&!a.inlineCollapsed||i.siderCollapsed&&!a.siderCollapsed)&&(d.switchingModeFromInline=!0,d.inlineOpenKeys=l.openKeys,c.openKeys=[]),(!i.inlineCollapsed&&a.inlineCollapsed||!i.siderCollapsed&&a.siderCollapsed)&&(c.openKeys=o.inlineOpenKeys,d.inlineOpenKeys=[])),Object.keys(c).length&&s.setState(c),d}}]),n}(u.exports.Component);Cu.defaultProps={selectable:!0,onClick:Ve,onSelect:Ve,onOpenChange:Ve,onDeselect:Ve,defaultSelectedKeys:[],defaultOpenKeys:[],subMenuOpenDelay:.1,subMenuCloseDelay:.1,triggerSubMenuAction:"hover",prefixCls:"rc-menu",className:"",mode:"vertical",style:{},builtinPlacements:{},overflowedIndicator:u.exports.createElement("span",null,"\xB7\xB7\xB7")};var ga=function(t){Ft(n,t);var e=Wt(n);function n(){var r;return Bt(this,n),r=e.apply(this,arguments),r.onKeyDown=function(i){var o=i.keyCode;if(o===we.ENTER)return r.onClick(i),!0},r.onMouseLeave=function(i){var o=r.props,a=o.eventKey,s=o.onItemHover,l=o.onMouseLeave;s({key:a,hover:!1}),l({key:a,domEvent:i})},r.onMouseEnter=function(i){var o=r.props,a=o.eventKey,s=o.onItemHover,l=o.onMouseEnter;s({key:a,hover:!0}),l({key:a,domEvent:i})},r.onClick=function(i){var o=r.props,a=o.eventKey,s=o.multiple,l=o.onClick,c=o.onSelect,d=o.onDeselect,f=o.isSelected,h={key:a,keyPath:[a],item:Ae(r),domEvent:i};l(h),s?f?d(h):c(h):f||c(h)},r.saveNode=function(i){r.node=i},r}return jt(n,[{key:"componentDidMount",value:function(){this.callRef()}},{key:"componentDidUpdate",value:function(){this.callRef()}},{key:"componentWillUnmount",value:function(){var i=this.props;i.onDestroy&&i.onDestroy(i.eventKey)}},{key:"getPrefixCls",value:function(){return"".concat(this.props.rootPrefixCls,"-item")}},{key:"getActiveClassName",value:function(){return"".concat(this.getPrefixCls(),"-active")}},{key:"getSelectedClassName",value:function(){return"".concat(this.getPrefixCls(),"-selected")}},{key:"getDisabledClassName",value:function(){return"".concat(this.getPrefixCls(),"-disabled")}},{key:"callRef",value:function(){this.props.manualRef&&this.props.manualRef(this)}},{key:"render",value:function(){var i,o=$({},this.props),a=fe(this.getPrefixCls(),o.className,(i={},G(i,this.getActiveClassName(),!o.disabled&&o.active),G(i,this.getSelectedClassName(),o.isSelected),G(i,this.getDisabledClassName(),o.disabled),i)),s=$($({},o.attribute),{},{title:typeof o.title=="string"?o.title:void 0,className:a,role:o.role||"menuitem","aria-disabled":o.disabled});o.role==="option"?s=$($({},s),{},{role:"option","aria-selected":o.isSelected}):(o.role===null||o.role==="none")&&(s.role="none");var l={onClick:o.disabled?null:this.onClick,onMouseLeave:o.disabled?null:this.onMouseLeave,onMouseEnter:o.disabled?null:this.onMouseEnter},c=$({},o.style);o.mode==="inline"&&(o.direction==="rtl"?c.paddingRight=o.inlineIndent*o.level:c.paddingLeft=o.inlineIndent*o.level),Bi.forEach(function(f){return delete o[f]}),delete o.direction;var d=this.props.itemIcon;return typeof this.props.itemIcon=="function"&&(d=u.exports.createElement(this.props.itemIcon,this.props)),u.exports.createElement("li",Z({},xi(o,["onClick","onMouseEnter","onMouseLeave","onSelect"]),s,l,{style:c,ref:this.saveNode}),o.children,d)}}]),n}(u.exports.Component);ga.isMenuItem=!0;ga.defaultProps={onSelect:Ve,onMouseEnter:Ve,onMouseLeave:Ve,manualRef:Ve};var Bg=fa(function(t,e){var n=t.activeKey,r=t.selectedKeys,i=e.eventKey,o=e.subMenuKey;return{active:n[o]===i,isSelected:Array.isArray(r)?r.indexOf(i)!==-1:r===i}})(ga);class Pe{constructor(e,n,r=!1){if(this.pageX=0,this.pageY=0,this.clientX=0,this.clientY=0,this.dx=0,this.dy=0,this.event=e,this.component=n,this._init=r,e){if(e.type.startsWith("touch")){let i;e.type==="touchend"?i=e.changedTouches[0]:i=e.touches[0],this.pageX=i.pageX,this.pageY=i.pageY,this.clientX=i.clientX,this.clientY=i.clientY}else"pageX"in e&&(this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY);this.dx=(this.pageX-n.baseX)*n.scaleX,this.dy=(this.pageY-n.baseY)*n.scaleY}}moved(){return Math.abs(this.dx)>=1||Math.abs(this.dy)>=1}startDrag(e,n){if(!this._init)throw new Error("startDrag can only be used in onDragStart callback");e===void 0&&(e=this.component.element),Wg(this,e,n),this.component.ownerDocument.body.classList.add("dock-dragging")}setData(e,n){if(!this._init)throw new Error("setData can only be used in onDragStart callback");Pr=n,_r=e}static getData(e,n){return n===Pr&&_r?_r[e]:null}get dragType(){return this.component.dragType}accept(e=""){this.acceptMessage=e,this.rejected=!1}reject(){this.rejected=!0}_onMove(){if(_r){let e=this.component.ownerDocument,n=e.elementFromPoint(this.clientX,this.clientY),r;for(;n&&n!==e.body;){if(Ir.has(n)){let i=Ir.get(n);if(i.onDragOverT&&(i.onDragOverT(this),this.acceptMessage!=null)){r=i;break}}n=n.parentElement}Eu(r,this)}Hg(this)}_onDragEnd(e=!1){Rt&&Rt.onDropT&&!e&&(Rt.onDropT(this),this.component.dragType==="right"&&(this.component.ownerDocument.addEventListener("contextmenu",Su,!0),setTimeout(()=>{this.component.ownerDocument.removeEventListener("contextmenu",Su,!0)},0))),$g(this),this.component.ownerDocument.body.classList.remove("dock-dragging")}}function Su(t){t.preventDefault(),t.stopPropagation()}let Pr,_r,ba,$i,Rt;function Eu(t,e){Rt!==t&&(Rt&&Rt.onDragLeaveT&&Rt.onDragLeaveT(e),Rt=t)}let Ir=new WeakMap;function kr(){return ba!=null}function Du(t,e){Ir.set(t,e)}function ya(t){Ir.get(t)===Rt&&(Rt=null),Ir.delete(t)}let Ue,Rr;function jg(t){Ue=t.createElement("div"),Rr=t.createElement("div"),Ue.className="dragging-layer",Ue.appendChild(document.createElement("div")),Ue.appendChild(Rr)}function Wg(t,e,n){ba=t,e&&(e.classList.add("dragging"),$i=e),jg(t.component.ownerDocument),t.component.ownerDocument.body.appendChild(Ue);let r=0,i=0;n===void 0&&(n=t.component.element),n&&"outerHTML"in n&&(r=n.offsetWidth,i=n.offsetHeight,n=n.outerHTML),n&&(Ue.firstElementChild.outerHTML=n,window.getComputedStyle(Ue.firstElementChild).backgroundColor==="rgba(0, 0, 0, 0)"&&(Ue.firstElementChild.style.backgroundColor=window.getComputedStyle(Ue).getPropertyValue("--default-background-color")),r&&(r>400&&(r=400),Ue.firstElementChild.style.width=`${r}px`),i&&(i>300&&(i=300),Ue.firstElementChild.style.height=`${i}px`));for(let o of Ki)o(Pr||!0)}function Hg(t){Ue.style.left=`${t.pageX}px`,Ue.style.top=`${t.pageY}px`,t.rejected?Rr.className="drag-accept-reject":t.acceptMessage?Rr.className=t.acceptMessage:Rr.className=""}function $g(t){$i&&($i.classList.remove("dragging"),$i=null),Ue&&(Ue.remove(),Ue=null),ba=null,Eu(null,t),Pr=null,_r=null;for(let e of Ki)e(null)}let Ki=new Set;function Kg(t){Ki.add(t)}function Vg(t){Ki.delete(t)}typeof window!="undefined"&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform)&&document.addEventListener("touchmove",t=>{t.touches.length===1&&document.body.classList.contains("dock-dragging")&&t.preventDefault()},{passive:!1});class Mu{constructor(e,n,r=!1){if(this.dx1=0,this.dy1=0,this.dx2=0,this.dy2=0,this.scale=1,this.rotate=0,this.dx=0,this.dy=0,this.event=e,this.component=n,this._init=r,e&&e.touches.length===2){let i=e.touches[0],o=e.touches[1];this.dx1=(i.pageX-n.baseX)*n.scaleX,this.dy1=(i.pageY-n.baseY)*n.scaleY,this.dx2=(o.pageX-n.baseX2)*n.scaleX,this.dy2=(o.pageY-n.baseY2)*n.scaleY,this.dx1*this.dx2>=0&&(this.dx=(this.dx1+this.dx2)/2),this.dy1*this.dy2>=0&&(this.dy=(this.dy1+this.dy2)/2),this.scale=Math.sqrt(Math.pow(o.pageX-i.pageX,2)+Math.pow(o.pageY-i.pageY,2))/n.baseDis,this.rotate=Math.atan2(o.pageY-i.pageY,o.pageX-i.pageX)-n.baseAng,this.rotate>Math.PI?this.rotate-=Math.PI*2:this.rotate<-Math.PI&&(this.rotate+=Math.PI*2)}}moved(){return Math.max(Math.abs(this.dx1),Math.abs(this.dx2),Math.abs(this.dy1),Math.abs(this.dy2))}pageCenter(){let e=this.event.touches[0],n=this.event.touches[1];return[(e.pageX+n.pageX)/2,(e.pageY+n.pageY)/2]}clientCenter(){let e=this.event.touches[0],n=this.event.touches[1];return[(e.clientX+n.clientX)/2,(e.clientY+n.clientY)/2]}}var Ug=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Nt extends p.PureComponent{constructor(){super(...arguments);this._getRef=e=>{if(e===this.element)return;let{getRef:n,onDragOverT:r}=this.props;this.element&&r&&ya(this.element),this.element=e,e&&(this.ownerDocument=e.ownerDocument),n&&n(e),e&&r&&Du(e,this.props)},this.dragType=null,this.waitingMove=!1,this.listening=!1,this.gesturing=!1,this.onPointerDown=e=>{let n=e.nativeEvent.target;if(n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement||n.classList.contains("drag-ignore"))return;let{onDragStartT:r,onGestureStartT:i,onGestureMoveT:o,useRightButtonDragT:a}=this.props,s=e.nativeEvent;if(this.cancel(),s.type==="touchstart")s.touches.length===1?r&&this.onDragStart(s):s.touches.length===2&&i&&o&&this.onGestureStart(s);else if(r){if(s.button===2&&!a)return;this.onDragStart(s)}},this.onMouseMove=e=>{let{onDragMoveT:n}=this.props;if(this.waitingMove){if(kr()){this.onDragEnd();return}if(!this.checkFirstMove(e))return}else{let r=new Pe(e,this);r._onMove(),n&&n(r)}e.preventDefault()},this.onTouchMove=e=>{let{onDragMoveT:n}=this.props;if(this.waitingMove){if(kr()){this.onDragEnd();return}if(!this.checkFirstMove(e))return}else if(e.touches.length!==1)this.onDragEnd();else{let r=new Pe(e,this);r._onMove(),n&&n(r)}e.preventDefault()},this.onDragEnd=e=>{let{onDragEndT:n}=this.props,r=new Pe(e,this);this.removeListeners(),this.waitingMove||(r._onDragEnd(e==null),n&&n(r)),this.cleanupDrag(r)},this.onGestureMove=e=>{let{onGestureMoveT:n,gestureSensitivity:r}=this.props,i=new Mu(e,this);if(this.waitingMove)if(r>0||(r=10),i.moved()>r)this.waitingMove=!1;else return;n&&n(i)},this.onGestureEnd=e=>{let{onGestureEndT:n}=this.props;new Pe(e,this),this.removeListeners(),n&&n()},this.onKeyDown=e=>{e.key==="Escape"&&this.cancel()}}onDragStart(e){if(kr())return;let n=new Pe(e,this,!0);this.baseX=n.pageX,this.baseY=n.pageY;let r=this.element.parentElement,i=r.getBoundingClientRect();this.scaleX=r.offsetWidth/Math.round(i.width),this.scaleY=r.offsetHeight/Math.round(i.height),this.addDragListeners(e),this.props.directDragT&&this.executeFirstMove(n)}addDragListeners(e){this.props,e.type==="touchstart"?(this.ownerDocument.addEventListener("touchmove",this.onTouchMove),this.ownerDocument.addEventListener("touchend",this.onDragEnd),this.dragType="touch"):(this.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.ownerDocument.addEventListener("mouseup",this.onDragEnd),e.button===2?this.dragType="right":this.dragType="left"),this.waitingMove=!0,this.listening=!0}checkFirstMove(e){let n=new Pe(e,this,!0);return n.moved()?this.executeFirstMove(n):!1}executeFirstMove(e){let{onDragStartT:n}=this.props;return this.waitingMove=!1,n(e),kr()?(e._onMove(),this.ownerDocument.addEventListener("keydown",this.onKeyDown),!0):(this.onDragEnd(),!1)}addGestureListeners(e){this.ownerDocument.addEventListener("touchmove",this.onGestureMove),this.ownerDocument.addEventListener("touchend",this.onGestureEnd),this.ownerDocument.addEventListener("keydown",this.onKeyDown),this.gesturing=!0,this.waitingMove=!0}onGestureStart(e){if(!kr())return;let{onGestureStartT:n}=this.props;this.baseX=e.touches[0].pageX,this.baseY=e.touches[0].pageY,this.baseX2=e.touches[1].pageX,this.baseY2=e.touches[1].pageY;let r=this.element.parentElement,i=r.getBoundingClientRect();this.scaleX=r.offsetWidth/Math.round(i.width),this.scaleY=r.offsetHeight/Math.round(i.height),this.baseDis=Math.sqrt(Math.pow(this.baseX-this.baseX2,2)+Math.pow(this.baseY-this.baseY2,2)),this.baseAng=Math.atan2(this.baseY2-this.baseY,this.baseX2-this.baseX);let o=new Mu(e,this,!0);n(o)&&(this.addGestureListeners(e),e.preventDefault())}cancel(){this.listening&&this.onDragEnd(),this.gesturing&&this.onGestureEnd()}removeListeners(){this.gesturing?(this.ownerDocument.removeEventListener("touchmove",this.onGestureMove),this.ownerDocument.removeEventListener("touchend",this.onGestureEnd)):this.listening&&(this.dragType==="touch"?(this.ownerDocument.removeEventListener("touchmove",this.onTouchMove),this.ownerDocument.removeEventListener("touchend",this.onDragEnd)):(this.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.ownerDocument.removeEventListener("mouseup",this.onDragEnd))),this.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.listening=!1,this.gesturing=!1}cleanupDrag(e){this.dragType=null,this.waitingMove=!1}render(){let e=this.props,{getRef:n,children:r,className:i,directDragT:o,onDragStartT:a,onDragMoveT:s,onDragEndT:l,onDragOverT:c,onDragLeaveT:d,onDropT:f,onGestureStartT:h,onGestureMoveT:v,onGestureEndT:m,useRightButtonDragT:b}=e,g=Ug(e,["getRef","children","className","directDragT","onDragStartT","onDragMoveT","onDragEndT","onDragOverT","onDragLeaveT","onDropT","onGestureStartT","onGestureMoveT","onGestureEndT","useRightButtonDragT"]),w=this.onPointerDown,D=this.onPointerDown;return a||(D=null,h||(w=null)),(a||h)&&(i?i=`${i} drag-initiator`:i="drag-initiator"),p.createElement("div",Object.assign({ref:this._getRef,className:i},g,{onMouseDown:D,onTouchStart:w}),r)}componentDidUpdate(e){let{onDragOverT:n,onDragEndT:r,onDragLeaveT:i}=this.props;this.element&&(e.onDragOverT!==n||e.onDragLeaveT!==i||e.onDragEndT!==r)&&(n?Du(this.element,this.props):ya(this.element))}componentWillUnmount(){let{onDragOverT:e}=this.props;this.element&&e&&ya(this.element),this.cancel()}}var Gg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function qg(t,e){if(t==="ArrowLeft"||t==="ArrowRight"){let n=Array.from(e.querySelectorAll(".dock-tab-btn")),r=e.querySelector(".dock-tab-active>.dock-tab-btn"),i=n.indexOf(r);if(i>=0){if(t==="ArrowLeft"){if(i>0)return n[i-1].click(),n[i-1].focus(),!0}else if(i<n.length-1)return n[i+1].click(),n[i+1].focus(),!0}}return!1}function Yg(t){const{onDragStart:e,onDragMove:n,onDragEnd:r,TabNavList:i,isMaximized:o}=t,a=Gg(t,["onDragStart","onDragMove","onDragEnd","TabNavList","isMaximized"]),s=p.useContext(ut),l=p.useRef(),c=f=>{l.current=f},d=f=>{f.key.startsWith("Arrow")&&(!qg(f.key,l.current)&&!o&&s.navigateToPanel(l.current,f.key),f.stopPropagation(),f.preventDefault())};return p.createElement(Nt,{onDragStartT:e,onDragMoveT:n,onDragEndT:r,role:"tablist",className:"dock-bar",onKeyDown:d,getRef:c,tabIndex:-1},p.createElement(i,Object.assign({},a)))}class Ou extends p.PureComponent{constructor(){super(...arguments);this.getRef=e=>{this._ref=e}}updateCache(){const{cached:e,children:n,cacheId:r}=this.props;this._cache&&(!e||r!==this._cache.id)&&(this.context.removeTabCache(this._cache.id,this),this._cache=null),e&&this._ref&&(this._cache=this.context.getTabCache(r,this),this._ref.appendChild(this._cache.div),this.context.updateTabCache(this._cache.id,n))}render(){const{cacheId:e,cached:n,prefixCls:r,forceRender:i,className:o,style:a,id:s,active:l,animated:c,destroyInactiveTabPane:d,tabKey:f,children:h}=this.props;l?this.visited=!0:d&&(this.visited=!1);const v={};l||(c?(v.visibility="hidden",v.height=0,v.overflowY="hidden"):v.display="none");const m=n===!1?l:this.visited;let b=null;n?b=null:(m||i)&&(b=h);let g=n?this.getRef:null;return p.createElement("div",{ref:g,id:e,role:"tabpanel","aria-labelledby":s&&`${s}-tab-${f}`,"aria-hidden":!l,style:Object.assign(Object.assign({},v),a),className:fe(`${r}-tabpane`,l&&`${r}-tabpane-active`,o)},(l||this.visited||i)&&b)}componentDidMount(){this.updateCache()}componentDidUpdate(e,n,r){this.updateCache()}componentWillUnmount(){this._cache&&this.context.removeTabCache(this._cache.id,this)}}Ou.contextType=ut;let wa=new WeakMap;function Vi(t){let e=wa.get(t);return e?Vi(e):t}function Xg(){wa=new WeakMap}function Qe(t,e){let n=Object.assign(Object.assign({},t),e);return Array.isArray(n.tabs)&&(n.tabs=n.tabs.concat()),Array.isArray(n.children)&&(n.children=n.children.concat()),wa.set(t,n),n}function Tu(t,e){return t==null?e:Math.max(t,e)}function Pu(t,e){return t==null||t===e?e:t>=1?e<=1?1:Math.min(t,e):e>=1?1:Math.max(t,e)}let Ui=0;function Jg(){return++Ui,`+${Ui}`}let Gi=0;function xa(t){return t===Gi?t:++Gi}function Zg(t,e,n){if(t.id===e&&n&dt.Panel)return t;if(n&dt.Tab){for(let r of t.tabs)if(r.id===e)return r}return null}function Nr(t,e,n){let r;if(n|dt.Box&&t.id===e)return t;for(let i of t.children)if("children"in i){if(r=Nr(i,e,n))break}else if("tabs"in i&&(r=Zg(i,e,n)))break;return r}var dt;(function(t){t[t.Tab=1]="Tab",t[t.Panel=2]="Panel",t[t.Box=4]="Box",t[t.Docked=8]="Docked",t[t.Floated=16]="Floated",t[t.Windowed=32]="Windowed",t[t.Max=64]="Max",t[t.EveryWhere=120]="EveryWhere",t[t.AnyTab=121]="AnyTab",t[t.AnyPanel=122]="AnyPanel",t[t.AnyTabPanel=123]="AnyTabPanel",t[t.All=127]="All"})(dt||(dt={}));function Ca(t,e,n=dt.AnyTabPanel){let r;return n&dt.Docked&&(r=Nr(t.dockbox,e,n)),r||(n&dt.Floated&&(r=Nr(t.floatbox,e,n)),r)||(n&dt.Windowed&&(r=Nr(t.windowbox,e,n)),r)||n&dt.Max&&(r=Nr(t.maxbox,e,n)),r}function Qg(t,e,n,r){let i=n.parent.tabs.indexOf(n);return i>=0?(r==="after-tab"&&++i,Sa(t,e,n.parent,i)):t}function Sa(t,e,n,r=-1){r===-1&&(r=n.tabs.length);let i,o;if("tabs"in e?(i=e.tabs,o=e.activeId):i=[e],i.length){let a=Qe(n);a.tabs.splice(r,0,...i),a.activeId=i[i.length-1].id;for(let s of i)s.parent=a;o&&(a.activeId=o),t=Lr(t,n,a)}return t}function qi(t){if("tabs"in t)return t;{let e={tabs:[t],group:t.group,activeId:t.id};return t.parent=e,e}}function eb(t,e,n,r){let i=n.parent,o=r==="left"||r==="right"?"horizontal":"vertical",a=r==="bottom"||r==="right",s=i.children.indexOf(n);if(s>=0){let l=Qe(i);if(o===i.mode)a&&++s,n.size*=.5,e.size=n.size,l.children.splice(s,0,e);else{let c={mode:o,children:[]};c.size=n.size,a?c.children=[n,e]:c.children=[e,n],n.parent=c,n.size=200,e.parent=c,e.size=200,l.children[s]=c,c.parent=l}return bt(t,i,l)}return t}function Ea(t,e,n,r){let i=n.parent,o=r==="left"||r==="right"?"horizontal":"vertical",a=r==="bottom"||r==="right";if(i){let s=i.children.indexOf(n);if(s>=0){let l=Qe(i);if(o===i.mode)a&&++s,e.size=n.size*.3,n.size*=.7,l.children.splice(s,0,e);else{let c={mode:o,children:[]};c.size=n.size,a?c.children=[n,e]:c.children=[e,n],n.parent=c,n.size=280,e.parent=c,e.size=120,l.children[s]=c}return bt(t,i,l)}}else if(n===t.dockbox){let s=Qe(n);if(o===n.mode){let l=0;return a&&(l=s.children.length),e.size=n.size*.3,n.size*=.7,s.children.splice(l,0,e),bt(t,n,s)}else{let l={mode:o,children:[]};return l.size=n.size,a?l.children=[s,e]:l.children=[e,s],s.size=280,e.size=120,bt(t,n,l)}}else if(n===t.maxbox){let s=Qe(n);return s.children.push(e),bt(t,n,s)}return t}function _u(t,e,n){let r=Qe(t.floatbox);return n&&(e.x=n.left,e.y=n.top,e.w=n.width,e.h=n.height),r.children.push(e),bt(t,t.floatbox,r)}function tb(t,e){let n=Qe(t.windowbox);return n.children.push(e),bt(t,t.windowbox,n)}function Iu(t,e){if(e){let n;if("tabs"in e?(n=e,t=Da(t,n)):(n=e.parent,t=nb(t,e)),n&&n.parent&&n.parent.mode==="maximize"){let r=t.maxbox.children[0];if(!r||r.tabs.length===0&&!r.panelLock){let i=Ca(t,mi);if(i)return Da(t,i)}}}return t}function Da(t,e){let n=e.parent;if(n){let r=n.children.indexOf(e);if(r>=0){let i=Qe(n);return i.children.splice(r,1),bt(t,n,i)}}return t}function nb(t,e){let n=e.parent;if(n){let r=n.tabs.indexOf(e);if(r>=0){let i=Qe(n);return i.tabs.splice(r,1),i.activeId===e.id&&(i.tabs.length>r?i.activeId=i.tabs[r].id:i.tabs.length&&(i.activeId=i.tabs[0].id)),Lr(t,n,i)}}return t}function rb(t,e){if(e){let n,r=!1,i={};if("tabs"in e?n=e:(n=e.parent,n.activeId!==e.id&&(i.activeId=e.id,r=!0)),n&&n.parent&&n.parent.mode==="float"){let o=xa(n.z);o!==n.z&&(i.z=o,r=!0)}r&&(t=Lr(t,n,Qe(n,i)))}return t}function ib(t,e){return e?"tabs"in e?e.parent.mode==="maximize"?ab(t,e):ob(t,e):sb(t):t}function ob(t,e){if(t.maxbox.children.length)return t;let r=Object.assign(Object.assign({},e),{id:mi,tabs:[],panelLock:{}});return t=Lr(t,e,r),t=Ea(t,e,t.maxbox,"middle"),t}function ab(t,e){t=Da(t,e);let n=Ca(t,mi);if(n){let{x:r,y:i,z:o,w:a,h:s}=n;return e=Object.assign(Object.assign({},e),{x:r,y:i,z:o,w:a,h:s}),Lr(t,n,e)}else return Ea(t,e,t.dockbox,"right")}function sb(t,e){return t}function Ma(t,e,n){let r=!1;if(t&&t.floatbox&&e>200&&n>200){let i=t.floatbox.children.concat();for(let o=0;o<i.length;++o){let a=i[o],s={};a.w>e&&(s.w=e),a.h>n&&(s.h=n),a.y>n-16?s.y=Math.max(n-16-(a.h>>1),0):a.y<0&&(s.y=0),a.x+a.w<16?s.x=16-(a.w>>1):a.x>e-16&&(s.x=e-16-(a.w>>1)),Object.keys(s).length&&(i[o]=Qe(a,s),r=!0)}if(r){let o=Qe(t.floatbox);return o.children=i,bt(t,t.floatbox,o)}}return t}function Ar(t,e,n){function r(a){if(a.id==null)a.id=Jg();else if(a.id.startsWith("+")){let s=Number(a.id);s>Ui&&(Ui=s)}a.size>=0||(a.size=200),a.minWidth=0,a.minHeight=0,a.widthFlex=null,a.heightFlex=null}function i(a){r(a);let s=!1;if(n)for(let d=0;d<a.tabs.length;++d)a.tabs[d]=n(a.tabs[d]);a.group==null&&a.tabs.length&&(a.group=a.tabs[0].group);let l=e==null?void 0:e[a.group];l&&(l.widthFlex!=null&&(a.widthFlex=l.widthFlex),l.heightFlex!=null&&(a.heightFlex=l.heightFlex));for(let d of a.tabs)d.parent=a,d.id===a.activeId&&(s=!0),d.minWidth>a.minWidth&&(a.minWidth=d.minWidth),d.minHeight>a.minHeight&&(a.minHeight=d.minHeight);!s&&a.tabs.length&&(a.activeId=a.tabs[0].id),a.minWidth<=0&&(a.minWidth=1),a.minHeight<=0&&(a.minHeight=1);let{panelLock:c}=a;return c&&(a.minWidth<c.minWidth&&(a.minWidth=c.minWidth),a.minHeight<c.minHeight&&(a.minHeight=c.minHeight),a.panelLock.widthFlex!=null&&(a.widthFlex=c.widthFlex),a.panelLock.heightFlex!=null&&(a.heightFlex=c.heightFlex)),a.z>Gi&&(Gi=a.z),a}function o(a){r(a);for(let s=0;s<a.children.length;++s){let l=a.children[s];if(l.parent=a,"children"in l){if(o(l),l.children.length===0)a.children.splice(s,1),--s;else if(l.children.length===1){let c=l.children[0];if(c.mode===a.mode){let d=0;for(let h of c.children)d+=h.size;let f=l.size/d;for(let h of c.children)h.size*=f;a.children.splice(s,1,...c.children)}else c.size=l.size,a.children[s]=c;--s}}else"tabs"in l&&(i(l),l.tabs.length===0&&(l.panelLock?l.group===vi&&(a.children.length>1||a.parent)&&(a.children.splice(s,1),--s):(a.children.splice(s,1),--s)));switch(a.mode){case"horizontal":l.minWidth>0&&(a.minWidth+=l.minWidth),l.minHeight>a.minHeight&&(a.minHeight=l.minHeight),l.widthFlex!=null&&(a.widthFlex=Tu(a.widthFlex,l.widthFlex)),l.heightFlex!=null&&(a.heightFlex=Pu(a.heightFlex,l.heightFlex));break;case"vertical":l.minWidth>a.minWidth&&(a.minWidth=l.minWidth),l.minHeight>0&&(a.minHeight+=l.minHeight),l.heightFlex!=null&&(a.heightFlex=Tu(a.heightFlex,l.heightFlex)),l.widthFlex!=null&&(a.widthFlex=Pu(a.widthFlex,l.widthFlex));break}}if(a.children.length>1)switch(a.mode){case"horizontal":a.minWidth+=(a.children.length-1)*4;break;case"vertical":a.minHeight+=(a.children.length-1)*4;break}return a}if(t.floatbox?t.floatbox.mode="float":t.floatbox={mode:"float",children:[],size:1},t.windowbox?t.windowbox.mode="window":t.windowbox={mode:"window",children:[],size:1},t.maxbox?t.maxbox.mode="maximize":t.maxbox={mode:"maximize",children:[],size:1},o(t.dockbox),o(t.floatbox),o(t.windowbox),o(t.maxbox),t.dockbox.children.length===0){let a={id:"+0",group:vi,panelLock:{},size:200,tabs:[]};a.parent=t.dockbox,t.dockbox.children.push(a)}else for(;t.dockbox.children.length===1&&"children"in t.dockbox.children[0];){let a=Qe(t.dockbox.children[0]);t.dockbox=a;for(let s of a.children)s.parent=a}return t.dockbox.parent=null,t.floatbox.parent=null,t.windowbox.parent=null,t.maxbox.parent=null,Xg(),t}function Lr(t,e,n){for(let i of n.tabs)i.parent=n;let r=e.parent;if(r){let i=r.children.indexOf(e);if(i>=0){let o=Qe(r);return o.children[i]=n,bt(t,r,o)}}return t}function bt(t,e,n){for(let i of n.children)i.parent=n;let r=e.parent;if(r){let i=r.children.indexOf(e);if(i>=0){let o=Qe(r);return o.children[i]=n,bt(t,r,o)}}else{if(e.id===t.dockbox.id||e===t.dockbox)return Object.assign(Object.assign({},t),{dockbox:n});if(e.id===t.floatbox.id||e===t.floatbox)return Object.assign(Object.assign({},t),{floatbox:n});if(e.id===t.windowbox.id||e===t.windowbox)return Object.assign(Object.assign({},t),{windowbox:n});if(e.id===t.maxbox.id||e===t.maxbox)return Object.assign(Object.assign({},t),{maxbox:n})}return t}function ku(t,e){if(!t)return[300,300];let n=t.offsetWidth,r=t.offsetHeight,[i,o]=e.preferredFloatWidth||[100,600],[a,s]=e.preferredFloatHeight||[50,500];return n>=i?n<=o||(n=o):n=i,r>=a?r<=s||(r=s):r=a,[n,r]}function lb(t,e,n){let r=-1,i=-1,o=0;switch(n){case"ArrowUp":{r=t.top-e.bottom+t.height,i=Math.min(t.right,e.right)-Math.max(t.left,e.left);break}case"ArrowDown":{r=e.top-t.bottom+t.height,i=Math.min(t.right,e.right)-Math.max(t.left,e.left);break}case"ArrowLeft":{r=t.left-e.right+t.width,i=Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top),o=Math.abs(t.top-e.top);break}case"ArrowRight":{r=e.left-t.right+t.width,i=Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top),o=Math.abs(t.top-e.top);break}}return r<0||i<=0?-1:r*(o+1)-i*.001}const cb={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Ru={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},_e={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},et={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},tn={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class B{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5)){if(n[0]===1&&n[1]<6)return"Cupcake";if(n[0]===1&&n[1]>=6)return"Donut";if(n[0]===2&&n[1]<2)return"Eclair";if(n[0]===2&&n[1]===2)return"Froyo";if(n[0]===2&&n[1]>2)return"Gingerbread";if(n[0]===3)return"Honeycomb";if(n[0]===4&&n[1]<1)return"Ice Cream Sandwich";if(n[0]===4&&n[1]<4)return"Jelly Bean";if(n[0]===4&&n[1]>=4)return"KitKat";if(n[0]===5)return"Lollipop";if(n[0]===6)return"Marshmallow";if(n[0]===7)return"Nougat";if(n[0]===8)return"Oreo";if(n[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const i=B.getVersionPrecision(e),o=B.getVersionPrecision(n);let a=Math.max(i,o),s=0;const l=B.map([e,n],c=>{const d=a-B.getVersionPrecision(c),f=c+new Array(d+1).join(".0");return B.map(f.split("."),h=>new Array(20-h.length).join("0")+h).reverse()});for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(l[0][a]>l[1][a])return 1;if(l[0][a]===l[1][a]){if(a===s)return 0;a-=1}else if(l[0][a]<l[1][a])return-1}}static map(e,n){const r=[];let i;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(i=0;i<e.length;i+=1)r.push(n(e[i]));return r}static find(e,n){let r,i;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,i=e.length;r<i;r+=1){const o=e[r];if(n(o,r))return o}}static assign(e,...n){const r=e;let i,o;if(Object.assign)return Object.assign(e,...n);for(i=0,o=n.length;i<o;i+=1){const a=n[i];typeof a=="object"&&a!==null&&Object.keys(a).forEach(l=>{r[l]=a[l]})}return e}static getBrowserAlias(e){return cb[e]}static getBrowserTypeByAlias(e){return Ru[e]||""}}const ye=/version\/(\d+(\.?_?\d+)+)/i,ub=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=B.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=B.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=B.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=B.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=B.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=B.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=B.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=B.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=B.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=B.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=B.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=B.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=B.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=B.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=B.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=B.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=B.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=B.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=B.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=B.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=B.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=B.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=B.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=B.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=B.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=B.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=B.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=/^(.*)\/(.*) /,n=/^(.*)\/(.*)[ \t]\((.*)/,i=t.search("\\(")!==-1?n:e;return{name:B.getFirstMatch(i,t),version:B.getSecondMatch(i,t)}}}];var db=[{test:[/Roku\/DVP/],describe(t){const e=B.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:et.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=B.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:et.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=B.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=B.getWindowsVersionName(e);return{name:et.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:et.iOS},n=B.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=B.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=B.getMacOSVersionName(e),r={name:et.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=B.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:et.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=B.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=B.getAndroidVersionName(e),r={name:et.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=B.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:et.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=B.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||B.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||B.getFirstMatch(/\bbb(\d+)/i,t);return{name:et.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=B.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:et.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=B.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:et.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:et.Linux}}},{test:[/CrOS/],describe(){return{name:et.ChromeOS}}},{test:[/PlayStation 4/],describe(t){const e=B.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:et.PlayStation4,version:e}}}],fb=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(t){const e=B.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:_e.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:_e.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:_e.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:_e.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:_e.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:_e.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:_e.tablet}}},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=B.getFirstMatch(/(ipod|iphone)/i,t);return{type:_e.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:_e.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:_e.mobile}}},{test(t){return t.getBrowserName(!0)==="blackberry"},describe(){return{type:_e.mobile,vendor:"BlackBerry"}}},{test(t){return t.getBrowserName(!0)==="bada"},describe(){return{type:_e.mobile}}},{test(t){return t.getBrowserName()==="windows phone"},describe(){return{type:_e.mobile,vendor:"Microsoft"}}},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe(){return{type:_e.tablet}}},{test(t){return t.getOSName(!0)==="android"},describe(){return{type:_e.mobile}}},{test(t){return t.getOSName(!0)==="macos"},describe(){return{type:_e.desktop,vendor:"Apple"}}},{test(t){return t.getOSName(!0)==="windows"},describe(){return{type:_e.desktop}}},{test(t){return t.getOSName(!0)==="linux"},describe(){return{type:_e.desktop}}},{test(t){return t.getOSName(!0)==="playstation 4"},describe(){return{type:_e.tv}}},{test(t){return t.getOSName(!0)==="roku"},describe(){return{type:_e.tv}}}],pb=[{test(t){return t.getBrowserName(!0)==="microsoft edge"},describe(t){if(/\sedg\//i.test(t))return{name:tn.Blink};const n=B.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:tn.EdgeHTML,version:n}}},{test:[/trident/i],describe(t){const e={name:tn.Trident},n=B.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){return t.test(/presto/i)},describe(t){const e={name:tn.Presto},n=B.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:tn.Gecko},n=B.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:tn.Blink}}},{test:[/(apple)?webkit/i],describe(t){const e={name:tn.WebKit},n=B.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class Nu{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=B.find(ub,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=B.find(db,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=B.find(fb,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=B.find(pb,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return B.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const i={};let o=0;if(Object.keys(e).forEach(s=>{const l=e[s];typeof l=="string"?(i[s]=l,o+=1):typeof l=="object"&&(n[s]=l,r+=1)}),r>0){const s=Object.keys(n),l=B.find(s,d=>this.isOS(d));if(l){const d=this.satisfies(n[l]);if(d!==void 0)return d}const c=B.find(s,d=>this.isPlatform(d));if(c){const d=this.satisfies(n[c]);if(d!==void 0)return d}}if(o>0){const s=Object.keys(i),l=B.find(s,c=>this.isBrowser(c,!0));if(l!==void 0)return this.compareVersion(i[l])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let i=e.toLowerCase();const o=B.getBrowserTypeByAlias(i);return n&&o&&(i=o.toLowerCase()),i===r}compareVersion(e){let n=[0],r=e,i=!1;const o=this.getBrowserVersion();if(typeof o=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(i=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(i=!0,r=e.substr(1)),n.indexOf(B.compareVersions(o,r,i))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Au{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new Nu(e,n)}static parse(e){return new Nu(e).getResult()}static get BROWSER_MAP(){return Ru}static get ENGINE_MAP(){return tn}static get OS_MAP(){return et}static get PLATFORMS_MAP(){return _e}}var hb=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Au});const yt=typeof window=="object"&&Au.getParser(window.navigator.userAgent);function vb(){switch(yt==null?void 0:yt.getOSName(!0)){case"windows":{let t;switch(yt.getBrowserName(!0)){case"firefox":t=[68,8,8];break;case"microsoft edge":t=[62,8,8];break;default:t=[60,8,8]}return window.devicePixelRatio>1&&(t[0]-=2,t[1]-=1,t[2]-=1),t}case"macos":switch(yt.getBrowserName(!0)){case"safari":return[22,0,0];case"firefox":return[59,0,0];default:return[51,0,0]}}return[60,8,8]}const Lu=(yt==null?void 0:yt.getBrowserName(!0))==="safari",mb=(yt==null?void 0:yt.getPlatformType())==="desktop",zu=vb(),gb=us(()=>{let t=document.createElement("div");document.body.append(t),t.remove()},200);class Oa extends p.PureComponent{constructor(e){super(e);this.released=!1,this.container=document.createElement("div"),this.state={mounted:!1},this.onMainWindowUnload=()=>{this.window&&this.window.close()},this.release=n=>{if(!this.released&&(this.released=!0,this.windowCheckerInterval&&(clearInterval(this.windowCheckerInterval),this.windowCheckerInterval=null),window.removeEventListener("beforeunload",this.onMainWindowUnload),this.window.removeEventListener("beforeunload",this.release),n)){const{onClose:r}=this.props;typeof r=="function"&&r()}}}render(){return this.state.mounted?On.createPortal(this.props.children,this.container):null}componentDidMount(){this.openChild(),this.setState({mounted:!0})}openChild(){const{url:e,title:n,name:r,width:i,height:o,initPopupInnerRect:a,initPopupOuterRect:s,onBlock:l,onOpen:c,onClose:d}=this.props;let f={width:i,height:o};if(s){f=s();const[h,v,m]=zu;Lu||(f.width-=v*2,f.height-=h+m)}else if(a){f=a();const[h,v]=zu;f.left-=v,f.top-=h,Lu&&(f.height+=h)}else f.left=window.top.outerWidth/2+window.top.screenX-i/2,f.top=window.top.outerHeight/2+window.top.screenY-o/2;this.window=window.open(e,r,yb(f)),this.window?(window.addEventListener("beforeunload",this.onMainWindowUnload),this.window.addEventListener("resize",gb),this.window.document.title=n||document.title,this.window.document.body.appendChild(this.container),this.props.copyStyles&&setTimeout(()=>bb(document,this.window.document),0),typeof c=="function"&&c(this.window),e&&d&&(this.windowCheckerInterval=setInterval(()=>{(!this.window||this.window.closed)&&this.release(!0)},50)),this.window.addEventListener("beforeunload",this.release)):typeof l=="function"?l():console.warn("A new window could not be opened. Maybe it was blocked.")}componentWillUnmount(){this.window&&(this.release(),this.window.close())}}Oa.supported=mb;Oa.defaultProps={url:"",name:"",width:640,height:480,copyStyles:!0};function bb(t,e){Array.from(t.styleSheets).forEach(n=>{let r;if(n.href){const i=t.createElement("link");i.rel="stylesheet",i.href=n.href,e.head.appendChild(i)}else{try{r=n.cssRules}catch(i){}if(r){const i=t.createElement("style");Array.from(n.cssRules).forEach(o=>{const{cssText:a,type:s}=o;let l=a;[3,5].includes(s)&&(l=a.split("url(").map(c=>c[1]==="/"?`${c.slice(0,1)}${window.location.origin}${c.slice(1)}`:c).join("url(")),i.appendChild(t.createTextNode(l))}),e.head.appendChild(i)}}})}function yb(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return typeof r=="boolean"?e.push(`${n}=${r?"yes":"no"}`):e.push(`${n}=${r}`),e},[]).join(",")}class mn extends p.PureComponent{constructor(){super(...arguments);this.state={dropping:!1},this.onDragOver=e=>{let{panelElement:n,direction:r,depth:i,panelData:o}=this.props;this.setState({dropping:!0});for(let a=0;a<i;++a)n=n.parentElement;if(o.group===vi&&r!=="float")this.context.setDropRect(n,"middle",this,e);else{let a=this.context.getDockId(),s=Pe.getData("panelSize",a);this.context.setDropRect(n,r,this,e,s)}e.accept("")},this.onDragLeave=e=>{this.props,this.setState({dropping:!1}),this.context.setDropRect(null,"remove",this)},this.onDrop=e=>{let n=this.context.getDockId(),r=Pe.getData("tab",n);if(r||(r=Pe.getData("panel",n)),r){let{panelData:i,direction:o,depth:a}=this.props,s=i;for(let l=0;l<a;++l)s=s.parent;this.context.dockMove(r,s,o)}}}render(){let{direction:e,depth:n}=this.props,{dropping:r}=this.state,i=["dock-drop-square"];return i.push(`dock-drop-${e}`),n&&i.push("dock-drop-deep"),r&&i.push("dock-drop-square-dropping"),p.createElement(Nt,{className:i.join(" "),onDragOverT:this.onDragOver,onDragLeaveT:this.onDragLeave,onDropT:this.onDrop},p.createElement("div",{className:"dock-drop-square-box"}))}componentWillUnmount(){this.context.setDropRect(null,"remove",this)}}mn.contextType=ut;class gn extends p.PureComponent{static addDepthSquare(e,n,r,i,o){n==="horizontal"?(e.push(p.createElement(mn,{key:`top${o}`,direction:"top",depth:o,panelData:r,panelElement:i})),e.push(p.createElement(mn,{key:`bottom${o}`,direction:"bottom",depth:o,panelData:r,panelElement:i}))):(e.push(p.createElement(mn,{key:`left${o}`,direction:"left",depth:o,panelData:r,panelElement:i})),e.push(p.createElement(mn,{key:`right${o}`,direction:"right",depth:o,panelData:r,panelElement:i})))}render(){var e;let{panelData:n,panelElement:r,dropFromPanel:i}=this.props,o=this.context.getDockId(),a=[],s=Pe.getData("panel",o),l=this.context.getGroup(i.group);if(l.floatable!==!1&&(!s||!s.panelLock&&((e=s.parent)===null||e===void 0?void 0:e.mode)!=="float")&&a.push(p.createElement(mn,{key:"float",direction:"float",panelData:n,panelElement:r})),s!==n&&!l.disableDock){gn.addDepthSquare(a,"horizontal",n,r,0),gn.addDepthSquare(a,"vertical",n,r,0),!(s==null?void 0:s.panelLock)&&n.group===i.group&&n!==i&&a.push(p.createElement(mn,{key:"middle",direction:"middle",panelData:n,panelElement:r}));let c=n.parent;c&&c.children.length>1&&(gn.addDepthSquare(a,c.mode,n,r,1),c.parent&&gn.addDepthSquare(a,c.parent.mode,n,r,2))}return p.createElement("div",{className:"dock-drop-layer"},a)}}gn.contextType=ut;class Fu extends p.PureComponent{constructor(){super(...arguments);this.getRef=e=>{this._ref=e},this.onDragOver=e=>{var n;let{panelData:r,panelElement:i,dropFromPanel:o}=this.props,a=this.context.getDockId(),s=Pe.getData("panel",a),l=this.context.getGroup(o.group);if(s&&((n=s.parent)===null||n===void 0?void 0:n.mode)==="float")return;let{direction:c,mode:d,depth:f}=this.getDirection(e,l,s===r);if(f=this.getActualDepth(f,d,c),!c||c==="float"&&o.panelLock){this.context.setDropRect(null,"remove",this);return}let h=i;for(let m=0;m<f;++m)h=h.parentElement;let v=Pe.getData("panelSize",a);this.context.setDropRect(h,c,this,e,v),e.accept("")},this.onDragLeave=e=>{this.context.setDropRect(null,"remove",this)},this.onDrop=e=>{let{panelData:n,dropFromPanel:r}=this.props,i=this.context.getDockId(),o=this.context.getGroup(r.group),a=Pe.getData("tab",i),s=Pe.getData("panel",i);if(a||(a=s),a){let{direction:l,mode:c,depth:d}=this.getDirection(e,o,s===n);if(d=this.getActualDepth(d,c,l),!l)return;let f=n;for(let h=0;h<d;++h)f=f.parent;this.context.dockMove(a,f,l)}}}getDirection(e,n,r){let i=this._ref.getBoundingClientRect(),o=Math.min(i.width,500),a=Math.min(i.height,500),s=(e.clientX-i.left)/o,l=(i.right-e.clientX)/o,c=(e.clientY-i.top)/a,d=(i.bottom-e.clientY)/a,f=Math.min(s,l,c,d),h=0;if((n.disableDock||r)&&(f=1),f<0)return{direction:null,depth:0};if(f<.075)h=3;else if(f<.15)h=1;else if(!(f<.3)){if(n.floatable)return{direction:"float",mode:"float",depth:0}}switch(f){case s:return{direction:"left",mode:"horizontal",depth:h};case l:return{direction:"right",mode:"horizontal",depth:h};case c:return{direction:"top",mode:"vertical",depth:h};case d:return{direction:"bottom",mode:"vertical",depth:h}}return{direction:null,depth:0}}getActualDepth(e,n,r){let i=r==="bottom"||r==="right";if(!e)return e;let{panelData:o}=this.props,a=o,s=o.parent,l=0;for(o.parent.mode===n&&++e;s&&l<e;){if(s.mode===n){if(i){if(s.children[s.children.length-1]!==a)break}else if(s.children[0]!==a)break}a=s,s=s.parent,++l}for(;e>l;)e-=2;return e}render(){return p.createElement(Nt,{getRef:this.getRef,className:"dock-drop-edge",onDragOverT:this.onDragOver,onDragLeaveT:this.onDragLeave,onDropT:this.onDrop})}componentWillUnmount(){this.context.setDropRect(null,"remove",this)}}Fu.contextType=ut;class Ge extends p.PureComponent{constructor(){super(...arguments);this.getRef=e=>{this._ref=e},this.state={dropFromPanel:null,draggingHeader:!1},this.onDragOver=e=>{if(Ge._droppingPanel===this)return;this.props;let n=this.context.getDockId(),r=Pe.getData("tab",n),i=Pe.getData("panel",n);(r||i)&&(Ge.droppingPanel=this),r?r.parent?this.setState({dropFromPanel:r.parent}):this.setState({dropFromPanel:{activeId:"",tabs:[],group:r.group}}):i&&this.setState({dropFromPanel:i})},this.onPanelHeaderDragStart=e=>{let{panelData:n}=this.props,{parent:r,x:i,y:o,z:a}=n,s=this.context.getDockId();if(r&&r.mode==="float")this._movingX=i,this._movingY=o,e.setData({panel:this.props.panelData},s),e.startDrag(null,null),this.onFloatPointerDown();else{let l=this.context.getGroup(n.group),[c,d]=ku(this._ref,l);e.setData({panel:n,panelSize:[c,d]},s),e.startDrag(null)}this.setState({draggingHeader:!0})},this.onPanelHeaderDragMove=e=>{let{width:n,height:r}=this.context.getLayoutSize(),{panelData:i}=this.props;i.x=this._movingX+e.dx,i.y=this._movingY+e.dy,n>200&&r>200&&(i.y<0?i.y=0:i.y>r-16&&(i.y=r-16),i.x+i.w<16?i.x=16-i.w:i.x>n-16&&(i.x=n-16)),this.forceUpdate()},this.onPanelHeaderDragEnd=e=>{this._unmounted||(this.setState({draggingHeader:!1}),this.context.onSilentChange(this.props.panelData.activeId,"move"))},this.onPanelCornerDragTL=e=>{this.onPanelCornerDrag(e,"tl")},this.onPanelCornerDragTR=e=>{this.onPanelCornerDrag(e,"tr")},this.onPanelCornerDragBL=e=>{this.onPanelCornerDrag(e,"bl")},this.onPanelCornerDragBR=e=>{this.onPanelCornerDrag(e,"br")},this.onPanelCornerDragMove=e=>{let{panelData:n}=this.props,{dx:r,dy:i}=e;if(this._movingCorner.startsWith("t")){let{width:o,height:a}=this.context.getLayoutSize();this._movingY+i<0?i=-this._movingY:this._movingY+i>a-16&&(i=a-16-this._movingY)}switch(this._movingCorner){case"tl":{n.x=this._movingX+r,n.w=this._movingW-r,n.y=this._movingY+i,n.h=this._movingH-i;break}case"tr":{n.w=this._movingW+r,n.y=this._movingY+i,n.h=this._movingH-i;break}case"bl":{n.x=this._movingX+r,n.w=this._movingW-r,n.h=this._movingH+i;break}case"br":{n.w=this._movingW+r,n.h=this._movingH+i;break}}this.forceUpdate()},this.onPanelCornerDragEnd=e=>{this.context.onSilentChange(this.props.panelData.activeId,"move")},this.onFloatPointerDown=()=>{let{panelData:e}=this.props,{z:n}=e,r=xa(n);r!==n&&(e.z=r,this.forceUpdate())},this.onPanelClicked=e=>{const n=e.nativeEvent.target;!this._ref.contains(this._ref.ownerDocument.activeElement)&&n instanceof Node&&this._ref.contains(n)&&this._ref.querySelector(".dock-bar").focus()},this._unmounted=!1}static set droppingPanel(e){Ge._droppingPanel!==e&&(Ge._droppingPanel&&Ge._droppingPanel.onDragOverOtherPanel(),Ge._droppingPanel=e)}onDragOverOtherPanel(){this.state.dropFromPanel&&this.setState({dropFromPanel:null})}onPanelCornerDrag(e,n){let{parent:r,x:i,y:o,w:a,h:s}=this.props.panelData;r&&r.mode==="float"&&(this._movingCorner=n,this._movingX=i,this._movingY=o,this._movingW=a,this._movingH=s,e.startDrag(null,null))}render(){let{dropFromPanel:e,draggingHeader:n}=this.state,{panelData:r,size:i}=this.props,{minWidth:o,minHeight:a,group:s,id:l,parent:c,panelLock:d}=r,f=s,h=this.context.getGroup(s),{widthFlex:v,heightFlex:m}=h;if(d){let{panelStyle:O,widthFlex:j,heightFlex:N}=d;O&&(f=O),typeof j=="number"&&(v=j),typeof N=="number"&&(m=N)}let b;f&&(b=f.split(" ").map(O=>`dock-style-${O}`).join(" "));let g=(c==null?void 0:c.mode)==="maximize",w=(c==null?void 0:c.mode)==="float",D=(c==null?void 0:c.mode)==="horizontal",E=(c==null?void 0:c.mode)==="vertical",y=this.onFloatPointerDown,S=this.onPanelHeaderDragStart;(!w||g)&&(y=null),g&&(e=null,S=null);let x=`dock-panel ${b||""}${e?" dock-panel-dropping":""}${n?" dragging":""}`,I=1;D&&v!=null?I=v:E&&m!=null&&(I=m);let _=I*i,F=I*1e6;F<1&&(F=1);let k={minWidth:o,minHeight:a,flex:`${_} ${F} ${i}px`};w&&(k.left=r.x,k.top=r.y,k.width=r.w,k.height=r.h,k.zIndex=r.z);let P;if(e){let O=this.context.getGroup(e.group),j=this.context.getDockId();if(!O.tabLocked||Pe.getData("tab",j)==null){let N=this.context.useEdgeDrop()?Fu:gn;P=p.createElement(N,{panelData:r,panelElement:this._ref,dropFromPanel:e})}}return p.createElement(Nt,{getRef:this.getRef,className:x,style:k,"data-dockid":l,onMouseDownCapture:y,onTouchStartCapture:y,onDragOverT:w?null:this.onDragOver,onClick:this.onPanelClicked},p.createElement(_a,{panelData:r,onPanelDragStart:S,onPanelDragMove:this.onPanelHeaderDragMove,onPanelDragEnd:this.onPanelHeaderDragEnd}),w?[p.createElement(Nt,{key:"drag-size-t-l",className:"dock-panel-drag-size dock-panel-drag-size-t-l",onDragStartT:this.onPanelCornerDragTL,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),p.createElement(Nt,{key:"drag-size-t-r",className:"dock-panel-drag-size dock-panel-drag-size-t-r",onDragStartT:this.onPanelCornerDragTR,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),p.createElement(Nt,{key:"drag-size-b-l",className:"dock-panel-drag-size dock-panel-drag-size-b-l",onDragStartT:this.onPanelCornerDragBL,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),p.createElement(Nt,{key:"drag-size-b-r",className:"dock-panel-drag-size dock-panel-drag-size-b-r",onDragStartT:this.onPanelCornerDragBR,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd})]:null,P)}componentWillUnmount(){Ge._droppingPanel===this&&(Ge.droppingPanel=null),this._unmounted=!0}}Ge.contextType=ut;var Gt={},At={},wb=as(hb),xb=ss&&ss.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(At,"__esModule",{value:!0});At.popupWindowBorder=At.popupSupported=At.isSafari=At.gerWindowBorder=void 0;const Cb=xb(wb),wt=typeof window=="object"&&Cb.default.getParser(window.navigator.userAgent);function Bu(){switch(wt==null?void 0:wt.getOSName(!0)){case"windows":{let t;switch(wt.getBrowserName(!0)){case"firefox":t=[68,8,8];break;case"microsoft edge":t=[62,8,8];break;default:t=[60,8,8]}return window.devicePixelRatio>1&&(t[0]-=2,t[1]-=1,t[2]-=1),t}case"macos":switch(wt.getBrowserName(!0)){case"safari":return[22,0,0];case"firefox":return[59,0,0];default:return[51,0,0]}}return[60,8,8]}At.gerWindowBorder=Bu;At.isSafari=(wt==null?void 0:wt.getBrowserName(!0))==="safari";At.popupSupported=(wt==null?void 0:wt.getPlatformType())==="desktop";At.popupWindowBorder=Bu();Object.defineProperty(Gt,"__esModule",{value:!0});var ju=Gt.mapWindowToElement=Vu=Gt.mapElementToScreenRect=Gt.estimateWindowBorder=Gt.estimateBrowserZoom=void 0;const Wu=At;function Hu(t){let[e,n,r]=Wu.gerWindowBorder();t.outerWidth===t.screen.availWidth&&(n=0,r=0);let i=(t.outerWidth-n*2)/t.innerWidth,o=(t.outerHeight-e-r)/t.innerHeight,a=Math.min(o,i);return a>1.8?a=Math.round(a):a>.73?a=Math.round(a*20)/20:a=2/Math.round(2/a),a}Gt.estimateBrowserZoom=Hu;function Ta(t,e=!1){let n=t?Hu(t):1,r=t.outerWidth-t.innerWidth*n>>1,i=Math.round(t.outerHeight-t.innerHeight*n);return r>32?r=8:i-=r,[r,i,n]}Gt.estimateWindowBorder=Ta;class $u{init(e,n,r,i,o,a,s,l){this.scaleX=s/r,this.scaleY=l/i,this.offsetX=o-e*this.scaleX,this.offsetY=a-n*this.scaleY}map(e){return{x:e.x*this.scaleX+this.offsetX,y:e.y*this.scaleY+this.offsetY}}revertMap(e){return{x:(e.x-this.offsetX)/this.scaleX,y:(e.y-this.offsetY)/this.scaleY}}}function Ku(t,e){if(!t)return null;let n=t.getBoundingClientRect(),r=new $u;r.init(0,0,t.offsetWidth,t.offsetHeight,n.x,n.y,n.width,n.height);let i;if(e){let{x:d,y:f}=r.map({x:e.left,y:e.top}),{x:h,y:v}=r.map({x:e.left+e.width,y:e.top+e.height});i={left:d,top:f,width:h-d,height:v-f}}else i={left:n.left,top:n.top,width:n.width,height:n.height};let a=t.ownerDocument.defaultView;if(!a)return n;if(a.frameElement)return Ku(a.frameElement,i);let[s,l,c]=Ta(a);return c!==1&&(i.left*=c,i.top*=c,i.width*=c,i.height*=c),i.left+=a.screenX+s,i.top+=a.screenY+l,i}var Vu=Gt.mapElementToScreenRect=Ku;function Uu(t,e,n,r=!0){if(!t)return null;if(e){if(n={left:e.screenX,top:e.screenY,width:e.outerWidth,height:e.outerHeight},r){const[v,m,b]=Wu.popupWindowBorder;n.left+=m,n.top+=v,n.width-=m*2,n.height-=v+b}}else if(!n)return null;let o=t.ownerDocument.defaultView;if(!o)return n;if(o.frameElement)n=Uu(o.frameElement,null,n);else{let[v,m,b]=Ta(o);n.left-=o.screenX+v,n.top-=o.screenY+m,b!==1&&(n.left/=b,n.top/=b,n.width/=b,n.height/=b)}let a=t.getBoundingClientRect(),s=new $u;s.init(0,0,t.offsetWidth,t.offsetHeight,a.x,a.y,a.width,a.height);let l,{x:c,y:d}=s.revertMap({x:n.left,y:n.top}),{x:f,y:h}=s.revertMap({x:n.left+n.width,y:n.top+n.height});return l={left:c,top:d,width:f-c,height:h-d},l}ju=Gt.mapWindowToElement=Uu;class Gu extends p.PureComponent{constructor(){super(...arguments);this.onOpen=e=>{!this._window&&e&&(this._window=e)},this.onUnload=()=>{let{panelData:e}=this.props,n=this.context.getRootElement();const r=ju(n,this._window);r.width>0&&r.height>0&&(e.x=r.left,e.y=r.top,e.w=r.width,e.h=r.height),this.context.dockMove(e,null,"float")},this.initPopupInnerRect=()=>{let{panelData:e}=this.props;return Vu(this.context.getRootElement(),{left:e.x,top:e.y,width:e.w,height:e.h})}}render(){let{panelData:e}=this.props,{x:n,y:r,w:i,h:o}=e;return p.createElement(Oa,{copyStyles:!0,onOpen:this.onOpen,onClose:this.onUnload,onBlock:this.onUnload,initPopupInnerRect:this.initPopupInnerRect,width:i,height:o},p.createElement("div",{className:"dock-wbox"},p.createElement(Ge,{size:e.size,panelData:e,key:e.id})))}}Gu.contextType=ut;class Pa extends p.PureComponent{render(){let{children:e}=this.props.boxData,n=[];for(let r of e)"tabs"in r&&n.push(p.createElement(Gu,{key:r.id,panelData:r}));return p.createElement(p.Fragment,null,n)}}Pa.enabled=typeof window=="object"&&((window==null?void 0:window.navigator.platform)==="Win32"||(window==null?void 0:window.navigator.platform)==="MacIntel");function Sb(t){for(let e=0;e<10;++e){if(!t)return null;if(t.classList.contains("dock-panel"))return t;t=t.parentElement}return null}function qu(t){var e,n;return t==null||((e=t.parentElement)===null||e===void 0?void 0:e.tagName)==="LI"||((n=t.parentElement)===null||n===void 0?void 0:n.parentElement.tagName)==="LI"}class Eb{constructor(e){this.getRef=n=>{qu(n)||(this._ref=n)},this.getHitAreaRef=n=>{qu(n)||(this._hitAreaRef=n)},this.onCloseClick=n=>{this.context.dockMove(this.data,null,"remove"),n.stopPropagation()},this.onDragStart=n=>{let r=this.data.parent;if(r.parent.mode==="float"&&r.tabs.length===1)return;let i=Sb(this._ref),o=this.context.getGroup(this.data.group),[a,s]=ku(i,o);n.setData({tab:this.data,panelSize:[a,s]},this.context.getDockId()),n.startDrag(this._ref.parentElement,this._ref.parentElement)},this.onDragOver=n=>{let r=this.context.getDockId(),i=Pe.getData("tab",r),o=Pe.getData("panel",r),a;if(i)o=i.parent,a=i.group;else{if(!o)return;if(o==null?void 0:o.panelLock){n.reject();return}a=o.group}if(a!==this.data.group)n.reject();else if(i&&i!==this.data){let s=this.getDropDirection(n);this.context.setDropRect(this._hitAreaRef,s,this),n.accept("")}else if(o&&o!==this.data.parent){let s=this.getDropDirection(n);this.context.setDropRect(this._hitAreaRef,s,this),n.accept("")}},this.onDragLeave=n=>{this.context.setDropRect(null,"remove",this)},this.onDrop=n=>{let r=this.context.getDockId(),i,o=Pe.getData("tab",r);if(o?i=o.parent:i=Pe.getData("panel",r),o&&o!==this.data){let a=this.getDropDirection(n);this.context.dockMove(o,this.data,a)}else if(i&&i!==this.data.parent){let a=this.getDropDirection(n);this.context.dockMove(i,this.data,a)}},this.context=e}setData(e){return e!==this.data?(this.data=e,this.content=this.render(),!0):!1}getDropDirection(e){let n=this._hitAreaRef.getBoundingClientRect(),r=n.left+n.width*.5;return e.clientX>r?"after-tab":"before-tab"}render(){let{id:e,title:n,group:r,content:i,closable:o,cached:a,parent:s}=this.data,{onDragStart:l,onDragOver:c,onDrop:d,onDragLeave:f}=this;s.parent.mode==="window"&&(l=null,c=null,d=null,f=null),this.context.getGroup(r),typeof i=="function"&&(i=i(this.data));let h=p.createElement(Nt,{getRef:this.getRef,onDragStartT:l,onDragOverT:c,onDropT:d,onDragLeaveT:f},n,o?p.createElement("div",{className:"dock-tab-close-btn",onClick:this.onCloseClick}):null,p.createElement("div",{className:"dock-tab-hit-area",ref:this.getHitAreaRef}));return p.createElement(Ou,{key:e,cacheId:e,cached:a,tab:h},i)}destroy(){}}class _a extends p.PureComponent{constructor(){super(...arguments);this._cache=new Map,this.onMaximizeClick=e=>{let{panelData:n}=this.props;this.context.dockMove(n,null,"maximize"),e.stopPropagation()},this.onNewWindowClick=()=>{let{panelData:e}=this.props;this.context.dockMove(e,null,"new-window")},this.renderTabBar=(e,n)=>{let{panelData:r,onPanelDragStart:i,onPanelDragMove:o,onPanelDragEnd:a}=this.props,{group:s,panelLock:l}=r,c=this.context.getGroup(s),{panelExtra:d}=c,f=c.maximizable;r.parent.mode==="window"&&(i=null,f=!1),l&&l.panelExtra&&(d=l.panelExtra);let h=c.newWindow&&Pa.enabled&&r.parent.mode==="float",v;return d?v=d(r,this.context):(f||h)&&(v=p.createElement("div",{className:"dock-panel-max-btn",onClick:f?this.onMaximizeClick:null}),h&&(v=this.addNewWindowMenu(v,!f))),p.createElement(Yg,Object.assign({onDragStart:i,onDragMove:o,onDragEnd:a,TabNavList:n,isMaximized:r.parent.mode==="maximize"},e,{extra:v}))},this.onTabChange=e=>{this.props.panelData.activeId=e,this.context.onSilentChange(e,"active"),this.forceUpdate()}}updateTabs(e){if(e===this.cachedTabs)return;this.cachedTabs=e;let n=new Map,r=0;for(let i of e){let{id:o}=i;if(this._cache.has(o)){let a=this._cache.get(o);n.set(o,a),a.setData(i),++r}else{let a=new Eb(this.context);n.set(o,a),a.setData(i)}}if(r!==this._cache.size)for(let[i,o]of this._cache)n.has(i)||o.destroy();this._cache=n}addNewWindowMenu(e,n){const r=p.createElement(Cu,{onClick:this.onNewWindowClick},p.createElement(Bg,null,"New Window"));let i=n?["contextMenu","click"]:["contextMenu"];return p.createElement(Uc,{prefixCls:"dock-dropdown",overlay:r,trigger:i,mouseEnterDelay:.1,mouseLeaveDelay:.1},e)}render(){let{group:e,tabs:n,activeId:r}=this.props.panelData,i=this.context.getGroup(e),{animated:o}=i;o==null&&(o=!0),this.updateTabs(n);let a=[];for(let[s,l]of this._cache)a.push(l.content);return p.createElement(eu,{prefixCls:"dock",moreIcon:"...",animated:o,renderTabBar:this.renderTabBar,activeKey:r,onChange:this.onTabChange},a)}}_a.contextType=ut;_a.propKeys=["group","tabs","activeId","onTabChange"];class Db{constructor(e){this.beforeSize=0,this.beforeMinSize=0,this.afterSize=0,this.afterMinSize=0,this.element=e.element,this.beforeDivider=e.beforeDivider,this.afterDivider=e.afterDivider;for(let n of this.beforeDivider)this.beforeSize+=n.size,n.minSize>0&&(this.beforeMinSize+=n.minSize);for(let n of this.afterDivider)this.afterSize+=n.size,n.minSize>0&&(this.afterMinSize+=n.minSize)}}function Yu(t,e,n){let r=-1,i=[],o=0;for(;o!==r;){r=o,o=0;let a=(t-r)/(e-r);if(!(a>=0))break;for(let s=0;s<n.length;++s){let l=n[s].size*a;l<n[s].minSize&&(l=n[s].minSize,o+=l),i[s]=l}}return i}class Xu extends p.PureComponent{constructor(){super(...arguments);this.startDrag=e=>{this.boxData=new Db(this.props.getDividerData(this.props.idx)),e.startDrag(this.boxData.element,null)},this.dragMove=e=>{e.event.shiftKey||e.event.ctrlKey||e.event.altKey?this.dragMoveAll(e,e.dx,e.dy):this.dragMove2(e,e.dx,e.dy)},this.dragEnd=e=>{let{onDragEnd:n}=this.props;this.boxData=null,n&&n()}}dragMove2(e,n,r){let{isVertical:i,changeSizes:o}=this.props,{beforeDivider:a,afterDivider:s}=this.boxData;if(!(a.length&&s.length))return;let l=i?r:n,c=a[a.length-1],d=s[0],f=c.size+l,h=d.size-l;l>0?h<d.minSize&&(h=d.minSize,f=c.size+d.size-h):f<c.minSize&&(f=c.minSize,h=c.size+d.size-f);let v=a.concat(s).map(m=>m.size);v[a.length-1]=f,v[a.length]=h,o(v)}dragMoveAll(e,n,r){let{isVertical:i,changeSizes:o}=this.props,{beforeSize:a,beforeMinSize:s,afterSize:l,afterMinSize:c,beforeDivider:d,afterDivider:f}=this.boxData,h=i?r:n,v=a+h,m=l-h;h>0?m<c&&(m=c,v=a+l-c):v<s&&(v=s,m=a+l-s),o(Yu(v,a,d).concat(Yu(m,l,f)))}render(){let{className:e}=this.props;return e||(e="dock-divider"),p.createElement(Nt,{className:e,onDragStartT:this.startDrag,onDragMoveT:this.dragMove,onDragEndT:this.dragEnd})}}class Yi extends p.PureComponent{constructor(){super(...arguments);this.getRef=e=>{this._ref=e},this.getDividerData=e=>{if(this._ref){let{children:n,mode:r}=this.props.boxData,i=this._ref.childNodes;if(i.length===n.length*2-1){let o=[];for(let a=0;a<n.length;++a)r==="vertical"?o.push({size:i[a*2].offsetHeight,minSize:n[a].minHeight}):o.push({size:i[a*2].offsetWidth,minSize:n[a].minWidth});return{element:this._ref,beforeDivider:o.slice(0,e),afterDivider:o.slice(e)}}}return null},this.changeSizes=e=>{let{children:n}=this.props.boxData;if(n.length===e.length){for(let r=0;r<n.length;++r)n[r].size=e[r];this.forceUpdate()}},this.onDragEnd=()=>{this.context.onSilentChange(null,"move")}}render(){let{boxData:e}=this.props,{minWidth:n,minHeight:r,size:i,children:o,mode:a,id:s,widthFlex:l,heightFlex:c}=e,d=a==="vertical",f=[];for(let g=0;g<o.length;++g){g>0&&f.push(p.createElement(Xu,{idx:g,key:g,isVertical:d,onDragEnd:this.onDragEnd,getDividerData:this.getDividerData,changeSizes:this.changeSizes}));let w=o[g];"tabs"in w?f.push(p.createElement(Ge,{size:w.size,panelData:w,key:w.id})):"children"in w&&f.push(p.createElement(Yi,{size:w.size,boxData:w,key:w.id}))}let h,v=1;a==="vertical"?(h="dock-box dock-vbox",l!=null&&(v=l)):(h="dock-box dock-hbox",c!=null&&(v=c));let m=v*i,b=v*1e6;return b<1&&(b=1),p.createElement("div",{ref:this.getRef,className:h,"data-dockid":s,style:{minWidth:n,minHeight:r,flex:`${m} ${b} ${i}px`}},f)}}Yi.contextType=ut;class Mb extends p.PureComponent{render(){let{children:e}=this.props.boxData,n=[];for(let r of e)"tabs"in r&&n.push(p.createElement(Ge,{size:r.size,panelData:r,key:r.id}));return p.createElement("div",{className:"dock-box dock-fbox"},n)}}function Ob(t,e){e.panels.set(t.id,t);for(let n of t.tabs)e.tabs.set(n.id,n)}function Xi(t,e){for(let n of t.children)"tabs"in n?Ob(n,e):"children"in n&&Xi(n,e)}function Tb(t){let e={panels:new Map,tabs:new Map};return t&&("children"in t?Xi(t,e):("dockbox"in t&&Xi(t.dockbox,e),"floatbox"in t&&Xi(t.floatbox,e))),e}function Ju(t,e,n){function r(a){return e?e(a):{id:a.id}}function i(a){let s=[];for(let h of a.tabs){let v=r(h);v&&s.push(v)}let{id:l,size:c,activeId:d}=a,f;if(a.parent.mode==="float"||a.parent.mode==="window"){let{x:h,y:v,z:m,w:b,h:g}=a;f={id:l,size:c,tabs:s,activeId:d,x:h,y:v,z:m,w:b,h:g}}else f={id:l,size:c,tabs:s,activeId:d};return n&&n(f,a),f}function o(a){let s=[];for(let f of a.children)"tabs"in f?s.push(i(f)):"children"in f&&s.push(o(f));let{id:l,size:c,mode:d}=a;return{id:l,size:c,mode:d,children:s}}return{dockbox:o(t.dockbox),floatbox:o(t.floatbox),windowbox:o(t.windowbox),maxbox:o(t.maxbox)}}function Pb(t,e,n,r){var i,o,a;let s=Tb(e);function l(f){if(n)return n(f);let{id:h}=f;return s.tabs.has(h)?s.tabs.get(h):null}function c(f){let{id:h,size:v,activeId:m,x:b,y:g,z:w,w:D,h:E}=f,y=[];for(let x of f.tabs){let I=l(x);I&&y.push(I)}let S;return D||E||b||g||w?S={id:h,size:v,activeId:m,x:b,y:g,z:w,w:D,h:E,tabs:y}:S={id:h,size:v,activeId:m,tabs:y},f.id===mi?S.panelLock={}:r?r(f,S):s.panels.has(h)&&(S=Object.assign(Object.assign({},s.panels.get(h)),S)),S}function d(f){if(!f)return null;let h=[];for(let g of f.children)"tabs"in g?h.push(c(g)):"children"in g&&h.push(d(g));let{id:v,size:m,mode:b}=f;return{id:v,size:m,mode:b,children:h}}return{dockbox:d(t.dockbox),floatbox:d((i=t.floatbox)!==null&&i!==void 0?i:{mode:"float",children:[],size:0}),windowbox:d((o=t.windowbox)!==null&&o!==void 0?o:{mode:"window",children:[],size:0}),maxbox:d((a=t.maxbox)!==null&&a!==void 0?a:{mode:"maximize",children:[],size:1})}}class Zu extends p.PureComponent{render(){let e=this.props.boxData.children[0];if(e)return this.hidePanelData=Object.assign(Object.assign({},e),{id:"",tabs:[]}),p.createElement("div",{className:"dock-box dock-mbox dock-mbox-show"},p.createElement(Ge,{size:100,panelData:e}));if(this.hidePanelData){let n=this.hidePanelData;return this.hidePanelData=null,p.createElement("div",{className:"dock-box dock-mbox dock-mbox-hide"},p.createElement(Ge,{size:100,panelData:n}))}else return p.createElement("div",{className:"dock-box dock-mbox dock-mbox-hide"})}}var _b=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Ib extends p.PureComponent{constructor(){super(...arguments);this._caches=new Map,this.destroyRemovedPane=()=>{this._pendingDestroy=null;let e=!1;for(let[n,r]of this._caches)r.owner==null&&(this._caches.delete(n),e=!0);e&&this.forceUpdate()}}getTabCache(e,n){let r=this._caches.get(e);if(r)r.owner=n;else{let i=document.createElement("div");i.className="dock-pane-cache",r={div:i,id:e,owner:n},this._caches.set(e,r)}return r}removeTabCache(e,n){let r=this._caches.get(e);r&&r.owner===n&&(r.owner=null,this._pendingDestroy||(this._pendingDestroy=setTimeout(this.destroyRemovedPane,1)))}updateTabCache(e,n){let r=this._caches.get(e);r&&(r.portal=On.createPortal(n,r.div,r.id),this.forceUpdate())}}class Un extends Ib{constructor(e){super(e);this.getRef=a=>{this._ref=a},this.onDragStateChange=a=>{a==null&&(Ge.droppingPanel=null,this.state.dropRect&&this.setState({dropRect:null}))},this._onWindowResize=us(()=>{let a=this.getLayout();if(this._ref){let s=Ma(a,this._ref.offsetWidth,this._ref.offsetHeight);a!==s&&(s=Ar(s,this.props.groups),this.changeLayout(s,null,"move"))}},200);let{layout:n,defaultLayout:r,loadTab:i}=e,o;if(r)o=this.prepareInitData(e.defaultLayout);else if(!i)throw new Error("DockLayout.loadTab and DockLayout.defaultLayout should not both be undefined.");n?this.state={layout:Un.loadLayoutData(n,e),dropRect:null}:this.state={layout:o,dropRect:null},Kg(this.onDragStateChange),window.addEventListener("resize",this._onWindowResize)}getRootElement(){return this._ref}prepareInitData(e){let n=Object.assign({},e);return Ar(n,this.props.groups,this.props.loadTab),n}getDockId(){return this.props.dockId||this}getGroup(e){if(e){let{groups:n}=this.props;if(n&&e in n)return n[e];if(e===vi)return nv}return tv}dockMove(e,n,r){let i=this.getLayout();if(r==="maximize"?(i=ib(i,e),this.panelToFocus=e.id):r==="front"?i=rb(i,e):i=Iu(i,e),typeof n=="string"?n=this.find(n,dt.All):n=Vi(n),r==="float"){let o=qi(e);o.z=xa(null),this.state.dropRect?i=_u(i,o,this.state.dropRect):(i=_u(i,o),this._ref&&(i=Ma(i,this._ref.offsetWidth,this._ref.offsetHeight)))}else if(r==="new-window"){let o=qi(e);i=tb(i,o)}else if(n)if("tabs"in n)if(r==="middle")i=Sa(i,e,n);else{let o=qi(e);i=eb(i,o,n,r)}else if("children"in n){let o=qi(e);i=Ea(i,o,n,r)}else i=Qg(i,e,n,r);if(i!==this.getLayout()){i=Ar(i,this.props.groups);let o=null;e.hasOwnProperty("tabs")?o=e.activeId:o=e.id,this.changeLayout(i,o,r)}this.onDragStateChange(!1)}find(e,n){return Ca(this.getLayout(),e,n)}getLayoutSize(){return this._ref?{width:this._ref.offsetWidth,height:this._ref.offsetHeight}:{width:0,height:0}}updateTab(e,n,r=!0){let i=this.find(e,dt.AnyTab);if(i){let o=i.parent,a=o.tabs.indexOf(i);if(a>=0){let{loadTab:s}=this.props,l=this.getLayout(),c=o.activeId;return n&&(s&&!("content"in n&&"title"in n)&&(n=s(n)),l=Iu(l,i),o=Vi(o),l=Sa(l,n,o,a),o=Vi(o)),r||(o.activeId=c,this.panelToFocus=o.id),l=Ar(l,this.props.groups),this.changeLayout(l,n.id,"update"),!0}}return!1}navigateToPanel(e,n){if(!n){e||(e=this._ref.querySelector(".dock-tab-active>.dock-tab-btn")),e.focus();return}let r,i=n==="ArrowUp"||n==="ArrowDown"?".dock>.dock-bar":".dock-box>.dock-panel",o=Array.from(this._ref.querySelectorAll(i)),a=o.find(c=>c.contains(e)),s=a.getBoundingClientRect(),l=[];for(let c of o)if(c!==a){let d=c.getBoundingClientRect(),f=lb(s,d,n);f>=0&&l.push({panel:c,rect:d,distance:f})}l.sort((c,d)=>c.distance-d.distance);for(let c of l)if(r=c.panel.querySelector(".dock-tab-active>.dock-tab-btn"),r)break;r&&r.focus()}useEdgeDrop(){return this.props.dropMode==="edge"}setDropRect(e,n,r,i,o=[300,300]){let{dropRect:a}=this.state;if(a){if(n==="remove"){a.source===r&&this.setState({dropRect:null});return}else if(a.element===e&&a.direction===n&&n!=="float")return}if(!e){this.setState({dropRect:null});return}let s=this._ref.getBoundingClientRect(),l=this._ref.offsetWidth/s.width,c=this._ref.offsetHeight/s.height,d=e.getBoundingClientRect(),f=(d.left-s.left)*l,h=(d.top-s.top)*c,v=d.width*l,m=d.height*c,b=.5;switch(e.classList.contains("dock-box")&&(b=.3),n){case"float":{let g=(i.clientX-s.left)*l;h=(i.clientY-s.top)*c-15,v=o[0],m=o[1],f=g-(v>>1);break}case"right":f+=v*(1-b);case"left":v*=b;break;case"bottom":h+=m*(1-b);case"top":m*=b;break;case"after-tab":f+=v-15,v=30;break;case"before-tab":f-=15,v=30;break}this.setState({dropRect:{left:f,top:h,width:v,height:m,element:e,source:r,direction:n}})}render(){this.tempLayout=null;let{style:e,maximizeTo:n}=this.props,{layout:r,dropRect:i}=this.state,o;if(i){let{element:l,direction:c}=i,d=_b(i,["element","direction"]);o=Object.assign(Object.assign({},d),{display:"block"}),c==="float"&&(o.transition="none")}let a;n?(typeof n=="string"&&(n=document.getElementById(n)),a=On.createPortal(p.createElement(Zu,{boxData:r.maxbox}),n)):a=p.createElement(Zu,{boxData:r.maxbox});let s=[];for(let[l,c]of this._caches)c.portal&&s.push(c.portal);return p.createElement("div",{ref:this.getRef,className:"dock-layout",style:e},p.createElement(rv,{value:this},p.createElement(Yi,{size:1,boxData:r.dockbox}),p.createElement(Mb,{boxData:r.floatbox}),p.createElement(Pa,{boxData:r.windowbox}),a,s),p.createElement("div",{className:"dock-drop-indicator",style:o}))}componentDidUpdate(e,n,r){var i;if(this.panelToFocus){let o=this._ref.querySelector(`.dock-panel[data-dockid="${this.panelToFocus}"]`);o&&!o.contains(this._ref.ownerDocument.activeElement)&&((i=o.querySelector(".dock-bar"))===null||i===void 0||i.focus()),this.panelToFocus=null}}componentWillUnmount(){window.removeEventListener("resize",this._onWindowResize),Vg(this.onDragStateChange),this._onWindowResize.cancel()}setLayout(e){this.tempLayout=e,this.setState({layout:e})}getLayout(){return this.tempLayout||this.state.layout}changeLayout(e,n,r,i=!1){let{layout:o,onLayoutChange:a}=this.props,s;a&&(s=Ju(e,this.props.saveTab,this.props.afterPanelSaved),e.loadedFrom=s,a(s,n,r),o&&this.forceUpdate()),!o&&!i&&this.setLayout(e)}onSilentChange(e=null,n){let{onLayoutChange:r}=this.props;if(r){let i=this.getLayout();this.changeLayout(i,e,n,!0)}}saveLayout(){return Ju(this.getLayout(),this.props.saveTab,this.props.afterPanelSaved)}loadLayout(e){this.setLayout(Un.loadLayoutData(e,this.props,this._ref.offsetWidth,this._ref.offsetHeight))}static loadLayoutData(e,n,r=0,i=0){let{defaultLayout:o,loadTab:a,afterPanelLoaded:s,groups:l}=n,c=Pb(e,o,a,s);return c=Ma(c,r,i),c=Ar(c,l),c.loadedFrom=e,c}static getDerivedStateFromProps(e,n){let{layout:r}=e,{layout:i}=n;return r&&r!==i.loadedFrom?{layout:Un.loadLayoutData(r,e)}:null}}var kb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Rb extends p.PureComponent{constructor(){super(...arguments);this.getRef=e=>{this._ref=e},this.getDividerData=e=>{if(this._ref){let{children:n,mode:r}=this.props,i=this._ref.childNodes,o=1;if(Array.isArray(n)&&(o=n.length),i.length===o*2-1){let a=[];for(let s=0;s<o;++s)r==="vertical"?a.push({size:i[s*2].offsetHeight}):a.push({size:i[s*2].offsetWidth});return{element:this._ref,beforeDivider:a.slice(0,e),afterDivider:a.slice(e)}}}return null},this.changeSizes=e=>{let{mode:n}=this.props,r=this._ref.childNodes;if(r.length===e.length*2-1){for(let i=0;i<e.length;++i)n==="vertical"?r[i*2].style.height=`${e[i]}px`:r[i*2].style.width=`${e[i]}px`;this.forceUpdate()}}}render(){let e=this.props,{children:n,mode:r,className:i}=e,o=kb(e,["children","mode","className"]),a=r==="vertical",s=[];if(Array.isArray(n))for(let c=0;c<n.length;++c)c>0&&s.push(p.createElement(Xu,{idx:c,key:c,isVertical:a,getDividerData:this.getDividerData,changeSizes:this.changeSizes})),s.push(n[c]);else s=n;let l;return r==="vertical"?l="divider-box dock-vbox":l="divider-box dock-hbox",i&&(l=`${l} ${i}`),p.createElement("div",Object.assign({ref:this.getRef,className:l},o),s)}}Rb.contextType=ut;var Ia={exports:{}},bn={},ka={exports:{}},xt={},Ji={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var n=/input|select|textarea|button|object/;function r(l){var c=l.offsetWidth<=0&&l.offsetHeight<=0;if(c&&!l.innerHTML)return!0;try{var d=window.getComputedStyle(l);return c?d.getPropertyValue("overflow")!=="visible"||l.scrollWidth<=0&&l.scrollHeight<=0:d.getPropertyValue("display")=="none"}catch(f){return console.warn("Failed to inspect element style"),!1}}function i(l){for(var c=l;c&&c!==document.body;){if(r(c))return!1;c=c.parentNode}return!0}function o(l,c){var d=l.nodeName.toLowerCase(),f=n.test(d)&&!l.disabled||d==="a"&&l.href||c;return f&&i(l)}function a(l){var c=l.getAttribute("tabindex");c===null&&(c=void 0);var d=isNaN(c);return(d||c>=0)&&o(l,!d)}function s(l){return[].slice.call(l.querySelectorAll("*"),0).filter(a)}t.exports=e.default})(Ji,Ji.exports);Object.defineProperty(xt,"__esModule",{value:!0});xt.resetState=zb;xt.log=Fb;xt.handleBlur=zr;xt.handleFocus=Fr;xt.markForFocusLater=Bb;xt.returnFocus=jb;xt.popWithoutFocus=Wb;xt.setupScopedFocus=Hb;xt.teardownScopedFocus=$b;var Nb=Ji.exports,Ab=Lb(Nb);function Lb(t){return t&&t.__esModule?t:{default:t}}var Gn=[],qn=null,Ra=!1;function zb(){Gn=[]}function Fb(){}function zr(){Ra=!0}function Fr(){if(Ra){if(Ra=!1,!qn)return;setTimeout(function(){if(!qn.contains(document.activeElement)){var t=(0,Ab.default)(qn)[0]||qn;t.focus()}},0)}}function Bb(){Gn.push(document.activeElement)}function jb(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=null;try{Gn.length!==0&&(e=Gn.pop(),e.focus({preventScroll:t}));return}catch(n){console.warn(["You tried to return focus to",e,"but it is not in the DOM anymore"].join(" "))}}function Wb(){Gn.length>0&&Gn.pop()}function Hb(t){qn=t,window.addEventListener?(window.addEventListener("blur",zr,!1),document.addEventListener("focus",Fr,!0)):(window.attachEvent("onBlur",zr),document.attachEvent("onFocus",Fr))}function $b(){qn=null,window.addEventListener?(window.removeEventListener("blur",zr),document.removeEventListener("focus",Fr)):(window.detachEvent("onBlur",zr),document.detachEvent("onFocus",Fr))}var Na={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=Ji.exports,r=i(n);function i(a){return a&&a.__esModule?a:{default:a}}function o(a,s){var l=(0,r.default)(a);if(!l.length){s.preventDefault();return}var c=void 0,d=s.shiftKey,f=l[0],h=l[l.length-1];if(a===document.activeElement){if(!d)return;c=h}if(h===document.activeElement&&!d&&(c=f),f===document.activeElement&&d&&(c=h),c){s.preventDefault(),c.focus();return}var v=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),m=v!=null&&v[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(!!m){var b=l.indexOf(document.activeElement);if(b>-1&&(b+=d?-1:1),c=l[b],typeof c=="undefined"){s.preventDefault(),c=d?h:f,c.focus();return}s.preventDefault(),c.focus()}}t.exports=e.default})(Na,Na.exports);var Ct={},Kb=function(){},Vb=Kb,St={},Qu={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(t){(function(){var e=!!(typeof window!="undefined"&&window.document&&window.document.createElement),n={canUseDOM:e,canUseWorkers:typeof Worker!="undefined",canUseEventListeners:e&&!!(window.addEventListener||window.attachEvent),canUseViewport:e&&!!window.screen};t.exports?t.exports=n:window.ExecutionEnvironment=n})()})(Qu);Object.defineProperty(St,"__esModule",{value:!0});St.canUseDOM=St.SafeNodeList=St.SafeHTMLCollection=void 0;var Ub=Qu.exports,Gb=qb(Ub);function qb(t){return t&&t.__esModule?t:{default:t}}var Zi=Gb.default,Yb=Zi.canUseDOM?window.HTMLElement:{};St.SafeHTMLCollection=Zi.canUseDOM?window.HTMLCollection:{};St.SafeNodeList=Zi.canUseDOM?window.NodeList:{};St.canUseDOM=Zi.canUseDOM;St.default=Yb;Object.defineProperty(Ct,"__esModule",{value:!0});Ct.resetState=ey;Ct.log=ty;Ct.assertNodeList=ed;Ct.setElement=ny;Ct.validateElement=Aa;Ct.hide=ry;Ct.show=iy;Ct.documentNotReadyOrSSRTesting=oy;var Xb=Vb,Jb=Qb(Xb),Zb=St;function Qb(t){return t&&t.__esModule?t:{default:t}}var ft=null;function ey(){ft&&(ft.removeAttribute?ft.removeAttribute("aria-hidden"):ft.length!=null?ft.forEach(function(t){return t.removeAttribute("aria-hidden")}):document.querySelectorAll(ft).forEach(function(t){return t.removeAttribute("aria-hidden")})),ft=null}function ty(){}function ed(t,e){if(!t||!t.length)throw new Error("react-modal: No elements were found for selector "+e+".")}function ny(t){var e=t;if(typeof e=="string"&&Zb.canUseDOM){var n=document.querySelectorAll(e);ed(n,e),e=n}return ft=e||ft,ft}function Aa(t){var e=t||ft;return e?Array.isArray(e)||e instanceof HTMLCollection||e instanceof NodeList?e:[e]:((0,Jb.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function ry(t){var e=!0,n=!1,r=void 0;try{for(var i=Aa(t)[Symbol.iterator](),o;!(e=(o=i.next()).done);e=!0){var a=o.value;a.setAttribute("aria-hidden","true")}}catch(s){n=!0,r=s}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}function iy(t){var e=!0,n=!1,r=void 0;try{for(var i=Aa(t)[Symbol.iterator](),o;!(e=(o=i.next()).done);e=!0){var a=o.value;a.removeAttribute("aria-hidden")}}catch(s){n=!0,r=s}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}function oy(){ft=null}var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.resetState=ay;Yn.log=sy;var Br={},jr={};function td(t,e){t.classList.remove(e)}function ay(){var t=document.getElementsByTagName("html")[0];for(var e in Br)td(t,Br[e]);var n=document.body;for(var r in jr)td(n,jr[r]);Br={},jr={}}function sy(){}var ly=function(e,n){return e[n]||(e[n]=0),e[n]+=1,n},cy=function(e,n){return e[n]&&(e[n]-=1),n},uy=function(e,n,r){r.forEach(function(i){ly(n,i),e.add(i)})},dy=function(e,n,r){r.forEach(function(i){cy(n,i),n[i]===0&&e.remove(i)})};Yn.add=function(e,n){return uy(e.classList,e.nodeName.toLowerCase()=="html"?Br:jr,n.split(" "))};Yn.remove=function(e,n){return dy(e.classList,e.nodeName.toLowerCase()=="html"?Br:jr,n.split(" "))};var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.log=py;Xn.resetState=hy;function fy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var nd=function t(){var e=this;fy(this,t),this.register=function(n){e.openInstances.indexOf(n)===-1&&(e.openInstances.push(n),e.emit("register"))},this.deregister=function(n){var r=e.openInstances.indexOf(n);r!==-1&&(e.openInstances.splice(r,1),e.emit("deregister"))},this.subscribe=function(n){e.subscribers.push(n)},this.emit=function(n){e.subscribers.forEach(function(r){return r(n,e.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},Qi=new nd;function py(){console.log("portalOpenInstances ----------"),console.log(Qi.openInstances.length),Qi.openInstances.forEach(function(t){return console.log(t)}),console.log("end portalOpenInstances ----------")}function hy(){Qi=new nd}Xn.default=Qi;var La={};Object.defineProperty(La,"__esModule",{value:!0});La.resetState=by;La.log=yy;var vy=Xn,my=gy(vy);function gy(t){return t&&t.__esModule?t:{default:t}}var qe=void 0,Et=void 0,yn=[];function by(){for(var t=[qe,Et],e=0;e<t.length;e++){var n=t[e];!n||n.parentNode&&n.parentNode.removeChild(n)}qe=Et=null,yn=[]}function yy(){console.log("bodyTrap ----------"),console.log(yn.length);for(var t=[qe,Et],e=0;e<t.length;e++){var n=t[e],r=n||{};console.log(r.nodeName,r.className,r.id)}console.log("edn bodyTrap ----------")}function rd(){yn.length!==0&&yn[yn.length-1].focusContent()}function wy(t,e){!qe&&!Et&&(qe=document.createElement("div"),qe.setAttribute("data-react-modal-body-trap",""),qe.style.position="absolute",qe.style.opacity="0",qe.setAttribute("tabindex","0"),qe.addEventListener("focus",rd),Et=qe.cloneNode(),Et.addEventListener("focus",rd)),yn=e,yn.length>0?(document.body.firstChild!==qe&&document.body.insertBefore(qe,document.body.firstChild),document.body.lastChild!==Et&&document.body.appendChild(Et)):(qe.parentElement&&qe.parentElement.removeChild(qe),Et.parentElement&&Et.parentElement.removeChild(Et))}my.default.subscribe(wy);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(N){for(var R=1;R<arguments.length;R++){var V=arguments[R];for(var T in V)Object.prototype.hasOwnProperty.call(V,T)&&(N[T]=V[T])}return N},r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},i=function(){function N(R,V){for(var T=0;T<V.length;T++){var C=V[T];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(R,C.key,C)}}return function(R,V,T){return V&&N(R.prototype,V),T&&N(R,T),R}}(),o=u.exports,a=ns.exports,s=S(a),l=xt,c=y(l),d=Na.exports,f=S(d),h=Ct,v=y(h),m=Yn,b=y(m),g=St,w=S(g),D=Xn,E=S(D);function y(N){if(N&&N.__esModule)return N;var R={};if(N!=null)for(var V in N)Object.prototype.hasOwnProperty.call(N,V)&&(R[V]=N[V]);return R.default=N,R}function S(N){return N&&N.__esModule?N:{default:N}}function x(N,R){if(!(N instanceof R))throw new TypeError("Cannot call a class as a function")}function I(N,R){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:N}function _(N,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);N.prototype=Object.create(R&&R.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(N,R):N.__proto__=R)}var F={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},k=9,P=27,O=0,j=function(N){_(R,N);function R(V){x(this,R);var T=I(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,V));return T.setOverlayRef=function(C){T.overlay=C,T.props.overlayRef&&T.props.overlayRef(C)},T.setContentRef=function(C){T.content=C,T.props.contentRef&&T.props.contentRef(C)},T.afterClose=function(){var C=T.props,M=C.appElement,A=C.ariaHideApp,W=C.htmlOpenClassName,L=C.bodyOpenClassName;L&&b.remove(document.body,L),W&&b.remove(document.getElementsByTagName("html")[0],W),A&&O>0&&(O-=1,O===0&&v.show(M)),T.props.shouldFocusAfterRender&&(T.props.shouldReturnFocusAfterClose?(c.returnFocus(T.props.preventScroll),c.teardownScopedFocus()):c.popWithoutFocus()),T.props.onAfterClose&&T.props.onAfterClose(),E.default.deregister(T)},T.open=function(){T.beforeOpen(),T.state.afterOpen&&T.state.beforeClose?(clearTimeout(T.closeTimer),T.setState({beforeClose:!1})):(T.props.shouldFocusAfterRender&&(c.setupScopedFocus(T.node),c.markForFocusLater()),T.setState({isOpen:!0},function(){T.openAnimationFrame=requestAnimationFrame(function(){T.setState({afterOpen:!0}),T.props.isOpen&&T.props.onAfterOpen&&T.props.onAfterOpen({overlayEl:T.overlay,contentEl:T.content})})}))},T.close=function(){T.props.closeTimeoutMS>0?T.closeWithTimeout():T.closeWithoutTimeout()},T.focusContent=function(){return T.content&&!T.contentHasFocus()&&T.content.focus({preventScroll:!0})},T.closeWithTimeout=function(){var C=Date.now()+T.props.closeTimeoutMS;T.setState({beforeClose:!0,closesAt:C},function(){T.closeTimer=setTimeout(T.closeWithoutTimeout,T.state.closesAt-Date.now())})},T.closeWithoutTimeout=function(){T.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},T.afterClose)},T.handleKeyDown=function(C){C.keyCode===k&&(0,f.default)(T.content,C),T.props.shouldCloseOnEsc&&C.keyCode===P&&(C.stopPropagation(),T.requestClose(C))},T.handleOverlayOnClick=function(C){T.shouldClose===null&&(T.shouldClose=!0),T.shouldClose&&T.props.shouldCloseOnOverlayClick&&(T.ownerHandlesClose()?T.requestClose(C):T.focusContent()),T.shouldClose=null},T.handleContentOnMouseUp=function(){T.shouldClose=!1},T.handleOverlayOnMouseDown=function(C){!T.props.shouldCloseOnOverlayClick&&C.target==T.overlay&&C.preventDefault()},T.handleContentOnClick=function(){T.shouldClose=!1},T.handleContentOnMouseDown=function(){T.shouldClose=!1},T.requestClose=function(C){return T.ownerHandlesClose()&&T.props.onRequestClose(C)},T.ownerHandlesClose=function(){return T.props.onRequestClose},T.shouldBeClosed=function(){return!T.state.isOpen&&!T.state.beforeClose},T.contentHasFocus=function(){return document.activeElement===T.content||T.content.contains(document.activeElement)},T.buildClassName=function(C,M){var A=(typeof M=="undefined"?"undefined":r(M))==="object"?M:{base:F[C],afterOpen:F[C]+"--after-open",beforeClose:F[C]+"--before-close"},W=A.base;return T.state.afterOpen&&(W=W+" "+A.afterOpen),T.state.beforeClose&&(W=W+" "+A.beforeClose),typeof M=="string"&&M?W+" "+M:W},T.attributesFromObject=function(C,M){return Object.keys(M).reduce(function(A,W){return A[C+"-"+W]=M[W],A},{})},T.state={afterOpen:!1,beforeClose:!1},T.shouldClose=null,T.moveFromContentToOverlay=null,T}return i(R,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(T,C){this.props.isOpen&&!T.isOpen?this.open():!this.props.isOpen&&T.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!C.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var T=this.props,C=T.appElement,M=T.ariaHideApp,A=T.htmlOpenClassName,W=T.bodyOpenClassName;W&&b.add(document.body,W),A&&b.add(document.getElementsByTagName("html")[0],A),M&&(O+=1,v.hide(C)),E.default.register(this)}},{key:"render",value:function(){var T=this.props,C=T.id,M=T.className,A=T.overlayClassName,W=T.defaultStyles,L=T.children,K=M?{}:W.content,Q=A?{}:W.overlay;if(this.shouldBeClosed())return null;var z={ref:this.setOverlayRef,className:this.buildClassName("overlay",A),style:n({},Q,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},q=n({id:C,ref:this.setContentRef,style:n({},K,this.props.style.content),className:this.buildClassName("content",M),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",n({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),J=this.props.contentElement(q,L);return this.props.overlayElement(z,J)}}]),R}(o.Component);j.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},j.propTypes={isOpen:s.default.bool.isRequired,defaultStyles:s.default.shape({content:s.default.object,overlay:s.default.object}),style:s.default.shape({content:s.default.object,overlay:s.default.object}),className:s.default.oneOfType([s.default.string,s.default.object]),overlayClassName:s.default.oneOfType([s.default.string,s.default.object]),bodyOpenClassName:s.default.string,htmlOpenClassName:s.default.string,ariaHideApp:s.default.bool,appElement:s.default.oneOfType([s.default.instanceOf(w.default),s.default.instanceOf(g.SafeHTMLCollection),s.default.instanceOf(g.SafeNodeList),s.default.arrayOf(s.default.instanceOf(w.default))]),onAfterOpen:s.default.func,onAfterClose:s.default.func,onRequestClose:s.default.func,closeTimeoutMS:s.default.number,shouldFocusAfterRender:s.default.bool,shouldCloseOnOverlayClick:s.default.bool,shouldReturnFocusAfterClose:s.default.bool,preventScroll:s.default.bool,role:s.default.string,contentLabel:s.default.string,aria:s.default.object,data:s.default.object,children:s.default.node,shouldCloseOnEsc:s.default.bool,overlayRef:s.default.func,contentRef:s.default.func,id:s.default.string,overlayElement:s.default.func,contentElement:s.default.func,testId:s.default.string},e.default=j,t.exports=e.default})(ka,ka.exports);function id(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);t!=null&&this.setState(t)}function od(t){function e(n){var r=this.constructor.getDerivedStateFromProps(t,n);return r??null}this.setState(e.bind(this))}function ad(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}id.__suppressDeprecationWarning=!0;od.__suppressDeprecationWarning=!0;ad.__suppressDeprecationWarning=!0;function xy(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return t;var n=null,r=null,i=null;if(typeof e.componentWillMount=="function"?n="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),n!==null||r!==null||i!==null){var o=t.displayName||t.name,a=typeof t.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+a+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(r!==null?`
  `+r:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof t.getDerivedStateFromProps=="function"&&(e.componentWillMount=id,e.componentWillReceiveProps=od),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=ad;var s=e.componentDidUpdate;e.componentDidUpdate=function(c,d,f){var h=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:f;s.call(this,c,d,h)}}return t}var Cy=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",polyfill:xy}),Sy=as(Cy);Object.defineProperty(bn,"__esModule",{value:!0});bn.bodyOpenClassName=bn.portalClassName=void 0;var sd=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ey=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),ld=u.exports,eo=Wr(ld),Dy=os.exports,to=Wr(Dy),My=ns.exports,oe=Wr(My),Oy=ka.exports,cd=Wr(Oy),Ty=Ct,Py=Iy(Ty),nn=St,ud=Wr(nn),_y=Sy;function Iy(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Wr(t){return t&&t.__esModule?t:{default:t}}function ky(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dd(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ry(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ny=bn.portalClassName="ReactModalPortal",Ay=bn.bodyOpenClassName="ReactModal__Body--open",wn=nn.canUseDOM&&to.default.createPortal!==void 0,fd=function(e){return document.createElement(e)},pd=function(){return wn?to.default.createPortal:to.default.unstable_renderSubtreeIntoContainer};function no(t){return t()}var Hr=function(t){Ry(e,t);function e(){var n,r,i,o;ky(this,e);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return o=(r=(i=dd(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(s))),i),i.removePortal=function(){!wn&&to.default.unmountComponentAtNode(i.node);var c=no(i.props.parentSelector);c&&c.contains(i.node)?c.removeChild(i.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},i.portalRef=function(c){i.portal=c},i.renderPortal=function(c){var d=pd(),f=d(i,eo.default.createElement(cd.default,sd({defaultStyles:e.defaultStyles},c)),i.node);i.portalRef(f)},r),dd(i,o)}return Ey(e,[{key:"componentDidMount",value:function(){if(!!nn.canUseDOM){wn||(this.node=fd("div")),this.node.className=this.props.portalClassName;var r=no(this.props.parentSelector);r.appendChild(this.node),!wn&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(r){var i=no(r.parentSelector),o=no(this.props.parentSelector);return{prevParent:i,nextParent:o}}},{key:"componentDidUpdate",value:function(r,i,o){if(!!nn.canUseDOM){var a=this.props,s=a.isOpen,l=a.portalClassName;r.portalClassName!==l&&(this.node.className=l);var c=o.prevParent,d=o.nextParent;d!==c&&(c.removeChild(this.node),d.appendChild(this.node)),!(!r.isOpen&&!s)&&!wn&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!nn.canUseDOM||!this.node||!this.portal)){var r=this.portal.state,i=Date.now(),o=r.isOpen&&this.props.closeTimeoutMS&&(r.closesAt||i+this.props.closeTimeoutMS);o?(r.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,o-i)):this.removePortal()}}},{key:"render",value:function(){if(!nn.canUseDOM||!wn)return null;!this.node&&wn&&(this.node=fd("div"));var r=pd();return r(eo.default.createElement(cd.default,sd({ref:this.portalRef,defaultStyles:e.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(r){Py.setElement(r)}}]),e}(ld.Component);Hr.propTypes={isOpen:oe.default.bool.isRequired,style:oe.default.shape({content:oe.default.object,overlay:oe.default.object}),portalClassName:oe.default.string,bodyOpenClassName:oe.default.string,htmlOpenClassName:oe.default.string,className:oe.default.oneOfType([oe.default.string,oe.default.shape({base:oe.default.string.isRequired,afterOpen:oe.default.string.isRequired,beforeClose:oe.default.string.isRequired})]),overlayClassName:oe.default.oneOfType([oe.default.string,oe.default.shape({base:oe.default.string.isRequired,afterOpen:oe.default.string.isRequired,beforeClose:oe.default.string.isRequired})]),appElement:oe.default.oneOfType([oe.default.instanceOf(ud.default),oe.default.instanceOf(nn.SafeHTMLCollection),oe.default.instanceOf(nn.SafeNodeList),oe.default.arrayOf(oe.default.instanceOf(ud.default))]),onAfterOpen:oe.default.func,onRequestClose:oe.default.func,closeTimeoutMS:oe.default.number,ariaHideApp:oe.default.bool,shouldFocusAfterRender:oe.default.bool,shouldCloseOnOverlayClick:oe.default.bool,shouldReturnFocusAfterClose:oe.default.bool,preventScroll:oe.default.bool,parentSelector:oe.default.func,aria:oe.default.object,data:oe.default.object,role:oe.default.string,contentLabel:oe.default.string,shouldCloseOnEsc:oe.default.bool,overlayRef:oe.default.func,contentRef:oe.default.func,id:oe.default.string,overlayElement:oe.default.func,contentElement:oe.default.func};Hr.defaultProps={isOpen:!1,portalClassName:Ny,bodyOpenClassName:Ay,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,n){return eo.default.createElement("div",e,n)},contentElement:function(e,n){return eo.default.createElement("div",e,n)}};Hr.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,_y.polyfill)(Hr);bn.default=Hr;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=bn,r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}e.default=r.default,t.exports=e.default})(Ia,Ia.exports);var Ly=ef(Ia.exports);const zy=async t=>{let e;try{e=await He.instance.feathersClient.service("project").get(t)}catch(n){throw console.log("Can't get URL from id"+n),new Error(n)}return e.scenes[0]},hd={},Fy=p.createContext({settings:hd,updateSetting:()=>{}}),By=Fy.Provider;function vd(t){const{message:e}=t;return p.createElement(Xr,{...t},e)}vd.defaultProps={title:"Confirm",message:"Confirm action?"};const jy=te.div`
  margin-bottom: 16px;

  label {
    display: block;
    margin-bottom: 8px;
  }
`,Wy=te.div`
  display: flex;
  justify-content: space-between;

  & > * {
    margin-left: 30px;
    align-self: center;
  }

  & > :first-child {
    margin-left: 0;
  }
`;function ro({inline:t,children:e,...n}){return t?p.createElement(Wy,{...n},e):p.createElement(jy,{...n},e)}const Hy=te.div`
  display: flex;
  flex-direction: column;
  flex: 1;
`;function $y({defaultOptions:t,onConfirm:e,onCancel:n}){const{t:r}=Pt(),[i,o]=u.exports.useState(t),a=u.exports.useCallback(d=>{o({...i,combineMeshes:d})},[i,o]),s=u.exports.useCallback(d=>{o({...i,removeUnusedObjects:d})},[i,o]),l=u.exports.useCallback(d=>{d.preventDefault(),e(i)},[i,e]),c=u.exports.useCallback(d=>{d.preventDefault(),n()},[n]);return p.createElement(Xr,{title:r("editor:dialog.exportProject.title"),onConfirm:l,onCancel:c,confirmLabel:r("editor:dialog.exportProject.lbl-confirm")},p.createElement(Hy,null,p.createElement(ro,null,p.createElement("label",{htmlFor:"combineMeshes"},r("editor:dialog.exportProject.lbl-combineMesh")),p.createElement(dr,{id:"combineMeshes",value:i.combineMeshes,onChange:a})),p.createElement(ro,null,p.createElement("label",{htmlFor:"removeUnusedObjects"},r("editor:dialog.exportProject.lbl-removeUnused")),p.createElement(dr,{id:"removeUnusedObjects",value:i.removeUnusedObjects,onChange:s}))))}const Ky=te.div`
  display: flex;
  width: 360px;
  border-top-left-radius: inherit;
  align-items: center;
  padding: 30px;

  img {
    border-radius: 6px;
  }
`,Vy=te.div`
  display: flex;
  flex-direction: column;
  flex: 1;
  padding: 30px 30px;
`;function za({imageSrc:t,children:e,...n}){return p.createElement(Xr,{...n},p.createElement(Ky,null,p.createElement("img",{src:t})),p.createElement(Vy,null,e))}function Uy({thumbnailUrl:t,initialName:e,onConfirm:n,onCancel:r}){const[i,o]=u.exports.useState(e),{t:a}=Pt(),s=u.exports.useCallback(d=>{o(d)},[o]),l=u.exports.useCallback(d=>{d.preventDefault(),n({name:i})},[i,n]),c=u.exports.useCallback(d=>{d.preventDefault(),r()},[r]);return p.createElement(za,{imageSrc:t,title:a("editor:dialog.saveNewProject.title"),onConfirm:l,onCancel:c,confirmLabel:a("editor:dialog.saveNewProject.lbl-confirm")},p.createElement(ro,null,p.createElement("label",{htmlFor:"name"},a("editor:dialog.saveNewProject.lbl-name")),p.createElement(po,{id:"name",required:!0,pattern:`[A-Za-z0-9-':"!@#$%^&*(),.?~ ]{4,64}`,title:a("editor:dialog.saveNewProject.info-name"),value:i,onChange:s})))}const Gy=te.div`
  position: fixed;
  pointer-events: none;
  z-index: 99999;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
`,qy=te.div.attrs(t=>({style:{transform:`translate(${t.offset.x}px, ${t.offset.y}px)`}}))`
  background-color: ${t=>t.theme.blue};
  opacity: 0.3;
  color: ${t=>t.theme.text};
  padding: 4px;
  border-radius: 4px;
  display: inline-block;
`;function Yy(){const{t}=Pt(),{item:e,itemType:n,currentOffset:r,isDragging:i}=Ih(a=>({item:a.getItem(),itemType:a.getItemType(),currentOffset:a.getClientOffset(),isDragging:a.isDragging()}));if(!i||!r)return null;let o;return n===Te.Node?e.multiple?o=p.createElement("div",null,t("editor:dnd.nodes",{count:e.value.length})):o=p.createElement("div",null,e.value.name):n===Te.Model?e.multiple?o=p.createElement("div",null,t("editor:dnd.models",{count:e.value.length})):o=p.createElement("div",null,e.value.label):n===Te.Image?e.multiple?o=p.createElement("div",null,t("editor:dnd.images",{count:e.value.length})):o=p.createElement("div",null,e.value.label):n===Te.Video?e.multiple?o=p.createElement("div",null,t("editor:dnd.videos",{count:e.value.length})):o=p.createElement("div",null,e.value.label):n===Te.Audio?e.multiple?o=p.createElement("div",null,t("editor:dnd.audio",{count:e.value.length})):o=p.createElement("div",null,e.value.label):o=p.createElement("div",null,e.type),p.createElement(Gy,null,p.createElement(qy,{offset:r},o))}class md extends u.exports.Component{render(){return p.createElement(cf,{...this.props})}}var Xy=typeof performance=="object"&&typeof performance.now=="function",gd=Xy?function(){return performance.now()}:function(){return Date.now()};function bd(t){cancelAnimationFrame(t.id)}function Jy(t,e){var n=gd();function r(){gd()-n>=e?t.call(null):i.id=requestAnimationFrame(r)}var i={id:requestAnimationFrame(r)};return i}var Jn=null;function yd(t){if(t===void 0&&(t=!1),Jn===null||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?Jn="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?Jn="negative":Jn="positive-ascending"),document.body.removeChild(e),Jn}return Jn}var Zy=150,Qy=function(e,n){return e};function e0(t){var e,n,r=t.getItemOffset,i=t.getEstimatedTotalSize,o=t.getItemSize,a=t.getOffsetForIndexAndAlignment,s=t.getStartIndexForOffset,l=t.getStopIndexForStartIndex,c=t.initInstanceProps,d=t.shouldResetStyleCacheOnItemSizeChange,f=t.validateProps;return n=e=function(h){Xd(v,h);function v(b){var g;return g=h.call(this,b)||this,g._instanceProps=c(g.props,Ae(Ae(g))),g._outerRef=void 0,g._resetIsScrollingTimeoutId=null,g.state={instance:Ae(Ae(g)),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof g.props.initialScrollOffset=="number"?g.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},g._callOnItemsRendered=void 0,g._callOnItemsRendered=ho(function(w,D,E,y){return g.props.onItemsRendered({overscanStartIndex:w,overscanStopIndex:D,visibleStartIndex:E,visibleStopIndex:y})}),g._callOnScroll=void 0,g._callOnScroll=ho(function(w,D,E){return g.props.onScroll({scrollDirection:w,scrollOffset:D,scrollUpdateWasRequested:E})}),g._getItemStyle=void 0,g._getItemStyle=function(w){var D=g.props,E=D.direction,y=D.itemSize,S=D.layout,x=g._getItemStyleCache(d&&y,d&&S,d&&E),I;if(x.hasOwnProperty(w))I=x[w];else{var _=r(g.props,w,g._instanceProps),F=o(g.props,w,g._instanceProps),k=E==="horizontal"||S==="horizontal",P=E==="rtl",O=k?_:0;x[w]=I={position:"absolute",left:P?void 0:O,right:P?O:void 0,top:k?0:_,height:k?"100%":F,width:k?F:"100%"}}return I},g._getItemStyleCache=void 0,g._getItemStyleCache=ho(function(w,D,E){return{}}),g._onScrollHorizontal=function(w){var D=w.currentTarget,E=D.clientWidth,y=D.scrollLeft,S=D.scrollWidth;g.setState(function(x){if(x.scrollOffset===y)return null;var I=g.props.direction,_=y;if(I==="rtl")switch(yd()){case"negative":_=-y;break;case"positive-descending":_=S-E-y;break}return _=Math.max(0,Math.min(_,S-E)),{isScrolling:!0,scrollDirection:x.scrollOffset<y?"forward":"backward",scrollOffset:_,scrollUpdateWasRequested:!1}},g._resetIsScrollingDebounced)},g._onScrollVertical=function(w){var D=w.currentTarget,E=D.clientHeight,y=D.scrollHeight,S=D.scrollTop;g.setState(function(x){if(x.scrollOffset===S)return null;var I=Math.max(0,Math.min(S,y-E));return{isScrolling:!0,scrollDirection:x.scrollOffset<I?"forward":"backward",scrollOffset:I,scrollUpdateWasRequested:!1}},g._resetIsScrollingDebounced)},g._outerRefSetter=function(w){var D=g.props.outerRef;g._outerRef=w,typeof D=="function"?D(w):D!=null&&typeof D=="object"&&D.hasOwnProperty("current")&&(D.current=w)},g._resetIsScrollingDebounced=function(){g._resetIsScrollingTimeoutId!==null&&bd(g._resetIsScrollingTimeoutId),g._resetIsScrollingTimeoutId=Jy(g._resetIsScrolling,Zy)},g._resetIsScrolling=function(){g._resetIsScrollingTimeoutId=null,g.setState({isScrolling:!1},function(){g._getItemStyleCache(-1,null)})},g}v.getDerivedStateFromProps=function(g,w){return t0(g,w),f(g),null};var m=v.prototype;return m.scrollTo=function(g){g=Math.max(0,g),this.setState(function(w){return w.scrollOffset===g?null:{scrollDirection:w.scrollOffset<g?"forward":"backward",scrollOffset:g,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},m.scrollToItem=function(g,w){w===void 0&&(w="auto");var D=this.props.itemCount,E=this.state.scrollOffset;g=Math.max(0,Math.min(g,D-1)),this.scrollTo(a(this.props,g,w,E,this._instanceProps))},m.componentDidMount=function(){var g=this.props,w=g.direction,D=g.initialScrollOffset,E=g.layout;if(typeof D=="number"&&this._outerRef!=null){var y=this._outerRef;w==="horizontal"||E==="horizontal"?y.scrollLeft=D:y.scrollTop=D}this._callPropsCallbacks()},m.componentDidUpdate=function(){var g=this.props,w=g.direction,D=g.layout,E=this.state,y=E.scrollOffset,S=E.scrollUpdateWasRequested;if(S&&this._outerRef!=null){var x=this._outerRef;if(w==="horizontal"||D==="horizontal")if(w==="rtl")switch(yd()){case"negative":x.scrollLeft=-y;break;case"positive-ascending":x.scrollLeft=y;break;default:var I=x.clientWidth,_=x.scrollWidth;x.scrollLeft=_-I-y;break}else x.scrollLeft=y;else x.scrollTop=y}this._callPropsCallbacks()},m.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&bd(this._resetIsScrollingTimeoutId)},m.render=function(){var g=this.props,w=g.children,D=g.className,E=g.direction,y=g.height,S=g.innerRef,x=g.innerElementType,I=g.innerTagName,_=g.itemCount,F=g.itemData,k=g.itemKey,P=k===void 0?Qy:k,O=g.layout,j=g.outerElementType,N=g.outerTagName,R=g.style,V=g.useIsScrolling,T=g.width,C=this.state.isScrolling,M=E==="horizontal"||O==="horizontal",A=M?this._onScrollHorizontal:this._onScrollVertical,W=this._getRangeToRender(),L=W[0],K=W[1],Q=[];if(_>0)for(var z=L;z<=K;z++)Q.push(u.exports.createElement(w,{data:F,key:P(z,F),index:z,isScrolling:V?C:void 0,style:this._getItemStyle(z)}));var q=i(this.props,this._instanceProps);return u.exports.createElement(j||N||"div",{className:D,onScroll:A,ref:this._outerRefSetter,style:Z({position:"relative",height:y,width:T,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:E},R)},u.exports.createElement(x||I||"div",{children:Q,ref:S,style:{height:M?"100%":q,pointerEvents:C?"none":void 0,width:M?q:"100%"}}))},m._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var g=this.props.itemCount;if(g>0){var w=this._getRangeToRender(),D=w[0],E=w[1],y=w[2],S=w[3];this._callOnItemsRendered(D,E,y,S)}}if(typeof this.props.onScroll=="function"){var x=this.state,I=x.scrollDirection,_=x.scrollOffset,F=x.scrollUpdateWasRequested;this._callOnScroll(I,_,F)}},m._getRangeToRender=function(){var g=this.props,w=g.itemCount,D=g.overscanCount,E=this.state,y=E.isScrolling,S=E.scrollDirection,x=E.scrollOffset;if(w===0)return[0,0,0,0];var I=s(this.props,x,this._instanceProps),_=l(this.props,I,x,this._instanceProps),F=!y||S==="backward"?Math.max(1,D):1,k=!y||S==="forward"?Math.max(1,D):1;return[Math.max(0,I-F),Math.max(0,Math.min(w-1,_+k)),I,_]},v}(u.exports.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},n}var t0=function(e,n){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,n.instance},n0=e0({getItemOffset:function(e,n){var r=e.itemSize;return n*r},getItemSize:function(e,n){var r=e.itemSize;return r},getEstimatedTotalSize:function(e){var n=e.itemCount,r=e.itemSize;return r*n},getOffsetForIndexAndAlignment:function(e,n,r,i){var o=e.direction,a=e.height,s=e.itemCount,l=e.itemSize,c=e.layout,d=e.width,f=o==="horizontal"||c==="horizontal",h=f?d:a,v=Math.max(0,s*l-h),m=Math.min(v,n*l),b=Math.max(0,n*l-h+l);switch(r==="smart"&&(i>=b-h&&i<=m+h?r="auto":r="center"),r){case"start":return m;case"end":return b;case"center":{var g=Math.round(b+(m-b)/2);return g<Math.ceil(h/2)?0:g>v+Math.floor(h/2)?v:g}case"auto":default:return i>=b&&i<=m?i:i<b?b:m}},getStartIndexForOffset:function(e,n){var r=e.itemCount,i=e.itemSize;return Math.max(0,Math.min(r-1,Math.floor(n/i)))},getStopIndexForStartIndex:function(e,n,r){var i=e.direction,o=e.height,a=e.itemCount,s=e.itemSize,l=e.layout,c=e.width,d=i==="horizontal"||l==="horizontal",f=n*s,h=d?c:o,v=Math.ceil((h+r-f)/s);return Math.max(0,Math.min(a-1,n+v-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function wd(t,e){for(var n in t)if(!(n in e))return!0;for(var r in e)if(t[r]!==e[r])return!0;return!1}function r0(t,e){var n=t.style,r=ls(t,["style"]),i=e.style,o=ls(e,["style"]);return!wd(n,i)&&!wd(r,o)}var i0=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o0=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a0=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s0=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},xd=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},l0=function(){function t(e,n){var r=[],i=!0,o=!1,a=void 0;try{for(var s=e[Symbol.iterator](),l;!(i=(l=s.next()).done)&&(r.push(l.value),!(n&&r.length===n));i=!0);}catch(c){o=!0,a=c}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return r}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pt=void 0;typeof window!="undefined"?pt=window:typeof self!="undefined"?pt=self:pt=global;var Fa=null,Ba=null,Cd=20,ja=pt.clearTimeout,Sd=pt.setTimeout,Wa=pt.cancelAnimationFrame||pt.mozCancelAnimationFrame||pt.webkitCancelAnimationFrame,Ed=pt.requestAnimationFrame||pt.mozRequestAnimationFrame||pt.webkitRequestAnimationFrame;Wa==null||Ed==null?(Fa=ja,Ba=function(e){return Sd(e,Cd)}):(Fa=function(e){var n=l0(e,2),r=n[0],i=n[1];Wa(r),ja(i)},Ba=function(e){var n=Ed(function(){ja(r),e()}),r=Sd(function(){Wa(n),e()},Cd);return[n,r]});function c0(t){var e=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,l=typeof document!="undefined"&&document.attachEvent;if(!l){a=function(y){var S=y.__resizeTriggers__,x=S.firstElementChild,I=S.lastElementChild,_=x.firstElementChild;I.scrollLeft=I.scrollWidth,I.scrollTop=I.scrollHeight,_.style.width=x.offsetWidth+1+"px",_.style.height=x.offsetHeight+1+"px",x.scrollLeft=x.scrollWidth,x.scrollTop=x.scrollHeight},o=function(y){return y.offsetWidth!==y.__resizeLast__.width||y.offsetHeight!==y.__resizeLast__.height},s=function(y){if(!(y.target.className&&typeof y.target.className.indexOf=="function"&&y.target.className.indexOf("contract-trigger")<0&&y.target.className.indexOf("expand-trigger")<0)){var S=this;a(this),this.__resizeRAF__&&Fa(this.__resizeRAF__),this.__resizeRAF__=Ba(function(){o(S)&&(S.__resizeLast__.width=S.offsetWidth,S.__resizeLast__.height=S.offsetHeight,S.__resizeListeners__.forEach(function(_){_.call(S,y)}))})}};var c=!1,d="";r="animationstart";var f="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),v="";{var m=document.createElement("fakeelement");if(m.style.animationName!==void 0&&(c=!0),c===!1){for(var b=0;b<f.length;b++)if(m.style[f[b]+"AnimationName"]!==void 0){v=f[b],d="-"+v.toLowerCase()+"-",r=h[b],c=!0;break}}}n="resizeanim",e="@"+d+"keyframes "+n+" { from { opacity: 0; } to { opacity: 0; } } ",i=d+"animation: 1ms "+n+"; "}var g=function(y){if(!y.getElementById("detectElementResize")){var S=(e||"")+".resize-triggers { "+(i||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',x=y.head||y.getElementsByTagName("head")[0],I=y.createElement("style");I.id="detectElementResize",I.type="text/css",t!=null&&I.setAttribute("nonce",t),I.styleSheet?I.styleSheet.cssText=S:I.appendChild(y.createTextNode(S)),x.appendChild(I)}},w=function(y,S){if(l)y.attachEvent("onresize",S);else{if(!y.__resizeTriggers__){var x=y.ownerDocument,I=pt.getComputedStyle(y);I&&I.position==="static"&&(y.style.position="relative"),g(x),y.__resizeLast__={},y.__resizeListeners__=[],(y.__resizeTriggers__=x.createElement("div")).className="resize-triggers";var _=x.createElement("div");_.className="expand-trigger",_.appendChild(x.createElement("div"));var F=x.createElement("div");F.className="contract-trigger",y.__resizeTriggers__.appendChild(_),y.__resizeTriggers__.appendChild(F),y.appendChild(y.__resizeTriggers__),a(y),y.addEventListener("scroll",s,!0),r&&(y.__resizeTriggers__.__animationListener__=function(P){P.animationName===n&&a(y)},y.__resizeTriggers__.addEventListener(r,y.__resizeTriggers__.__animationListener__))}y.__resizeListeners__.push(S)}},D=function(y,S){if(l)y.detachEvent("onresize",S);else if(y.__resizeListeners__.splice(y.__resizeListeners__.indexOf(S),1),!y.__resizeListeners__.length){y.removeEventListener("scroll",s,!0),y.__resizeTriggers__.__animationListener__&&(y.__resizeTriggers__.removeEventListener(r,y.__resizeTriggers__.__animationListener__),y.__resizeTriggers__.__animationListener__=null);try{y.__resizeTriggers__=!y.removeChild(y.__resizeTriggers__)}catch(x){}}};return{addResizeListener:w,removeResizeListener:D}}var Dd=function(t){s0(e,t);function e(){var n,r,i,o;i0(this,e);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return o=(r=(i=xd(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(s))),i),i.state={height:i.props.defaultHeight||0,width:i.props.defaultWidth||0},i._onResize=function(){var c=i.props,d=c.disableHeight,f=c.disableWidth,h=c.onResize;if(i._parentNode){var v=i._parentNode.offsetHeight||0,m=i._parentNode.offsetWidth||0,b=window.getComputedStyle(i._parentNode)||{},g=parseInt(b.paddingLeft,10)||0,w=parseInt(b.paddingRight,10)||0,D=parseInt(b.paddingTop,10)||0,E=parseInt(b.paddingBottom,10)||0,y=v-D-E,S=m-g-w;(!d&&i.state.height!==y||!f&&i.state.width!==S)&&(i.setState({height:v-D-E,width:m-g-w}),h({height:v,width:m}))}},i._setRef=function(c){i._autoSizer=c},r),xd(i,o)}return o0(e,[{key:"componentDidMount",value:function(){var r=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=c0(r),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var r=this.props,i=r.children,o=r.className,a=r.disableHeight,s=r.disableWidth,l=r.style,c=this.state,d=c.height,f=c.width,h={overflow:"visible"},v={},m=!1;return a||(d===0&&(m=!0),h.height=0,v.height=d),s||(f===0&&(m=!0),h.width=0,v.width=f),u.exports.createElement("div",{className:o,ref:this._setRef,style:a0({},h,l)},!m&&i(v))}}]),e}(u.exports.PureComponent);Dd.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}};function io(t,e,n){if(Pn(t)){const{nodeClass:r,initialProps:i}=t,o=new r;return i&&Object.assign(o,i),H.instance.executeCommandWithHistory(Re.ADD_OBJECTS,o,{parents:e,befores:n}),!0}return!1}function u0(t,e){if(Pn(t)){const{nodeClass:n,initialProps:r}=t,i=new n;return r&&Object.assign(i,r),ee.instance.getCursorSpawnPosition(e,i.position),H.instance.executeCommandWithHistory(Re.ADD_OBJECTS,i),!0}return!1}const d0=te.div`
  display: inline-block;
  pointer-events: none;
  background-color: rgba(21, 23, 27, 0.9);
  border-radius: 3px;
  padding: 8px;
  max-width: 320px;
  overflow: hidden;
  overflow-wrap: break-word;
  user-select: none;

  h6 {
    font-size: 14px;
  }

  ul {
    margin-top: 4px;
  }

  li {
    margin-bottom: 4px;
    margin-left: 4px;
    font-family: "Lucida Console", Monaco, monospace;
    font-size: 12px;
  }
`,Md=te(ll)`
  color: ${t=>t.color};
`;function f0({node:t}){const e=u.exports.useContext(rs),{t:n}=Pt(),r=u.exports.useMemo(()=>({warning:e.yellow,error:e.red}),[e]),i=u.exports.useCallback(()=>p.createElement(d0,null,p.createElement("h6",null,n("editor:hierarchy.isseus")),p.createElement("ul",null,t.issues.map((a,s)=>p.createElement("li",{key:s},p.createElement(Md,{size:12,color:r[a.severity]})," ",a.message)))),[t,r]);let o="warning";for(const a of t.issues)if(a.severity==="error"){o="error";break}return p.createElement(uf,{renderContent:i},p.createElement(Md,{size:14,color:r[o]}))}const p0={multiple:!0,accepts:Hf};function h0({node:t}){return t}const v0=te.div`
  outline: none;
  user-select: none;
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  color: ${t=>t.theme.text2};
`,m0=te.li``;function g0({root:t,selected:e,active:n,theme:r}){return e?n?r.bluePressed:r.selected:t?r.panel2:r.panel}function b0(t,e){return e.nodes[t].object.id}function Ha(t){return"hierarchy-node-"+t.id}const y0=te.div`
  display: flex;
  flex-direction: column;
  outline: none;
  overflow: hidden;

  background-color: ${g0};
  border-bottom: ${t=>t.root?t.theme.borderStyle:"none"};

  color: ${t=>t.selected||t.focused?t.theme.text:t.theme.text2};

  :hover,
  :focus {
    background-color: ${t=>t.selected?t.theme.blueHover:t.theme.hover};
    color: ${t=>t.theme.text};
  }

  :active {
    background-color: ${t=>t.theme.bluePressed};
    color: ${t=>t.theme.text};
  }
`,w0=te.div`
  display: flex;
  flex: 1;
  padding: 2px 4px 2px 0;
`,x0=te.div`
  display: flex;
  flex: 1;
`,C0=te.div`
  outline: none;
  display: flex;
  padding-right: 8px;
  padding-left: ${t=>t.depth*8+2+"px"};
`,S0=te.div`
  padding: 2px 4px;
  margin: 0 4px;

  :hover {
    color: ${t=>t.theme.text};
    background-color: ${t=>t.theme.hover2};
    border-radius: 3px;
  }
`,E0=te.div`
  width: 20px;
`,D0=te.div`
  width: 12px;
  height: 12px;
  margin: 2px 4px;
`,M0=te.div`
  background-color: ${t=>t.isOver&&t.canDrop?"rgba(255, 255, 255, 0.3)":"transparent"};
  color: ${t=>t.isOver&&t.canDrop?t.theme.text:"inherit"};
  border-radius: 4px;
  padding: 0 2px;
`;function O0({isOver:t,canDrop:e,position:n}){return t&&e?`border-${n==="before"?"top":"bottom"}: 2px solid rgba(255, 255, 255, 0.3)`:""}const Od=te.div`
  height: 4px;
  box-sizing: content-box;
  ${O0};
  margin-left: ${t=>t.depth>0?t.depth*8+20:0}px;
`,T0=te.input`
  position: absolute;
  top: -3px;
  background-color: ${t=>t.theme.inputBackground};
  color: ${t=>t.theme.text};
  border: ${t=>t.theme.borderStyle};
  padding: 2px 4px;
`,P0=te.div`
  position: relative;
  height: 15px;
`;function rn(t,e){return!vf(t,n=>n!==e)}function _0({index:t,data:{nodes:e,renamingNode:n,onToggle:r,onKeyDown:i,onMouseDown:o,onClick:a,onChangeName:s,onRenameSubmit:l,onUpload:c},style:d}){const f=e[t],{isLeaf:h,object:v,depth:m,selected:b,active:g,iconComponent:w,isCollapsed:D,childIndex:E,lastChild:y}=f,S=u.exports.useCallback(z=>{z.stopPropagation(),r&&r(z,f)},[r,f]),x=u.exports.useCallback(z=>{z.stopPropagation(),i&&i(z,f)},[i,f]),I=u.exports.useCallback(z=>{z.key==="Escape"?l(f,null):z.key==="Enter"&&l(f,z.target.value)},[l,f]),_=u.exports.useCallback(z=>{a(z,f)},[f,a]),F=u.exports.useCallback(z=>{o(z,f)},[f,o]),k=u.exports.useCallback(z=>{s(f,z.target.value)},[f,s]),P=u.exports.useCallback(z=>{l(f,z.target.value)},[l,f]),O=n&&n.id===f.id,[j,N,R]=df({type:Te.Node,item(){const z=H.instance.selected.length>1;return{type:Te.Node,multiple:z,value:z?H.instance.selected:H.instance.selected[0]}},canDrag(){return!H.instance.selected.some(z=>!z.parent)},collect:z=>({isDragging:!!z.isDragging()})});u.exports.useEffect(()=>{R(ff(),{captureDraggingState:!0})},[R]);const[{canDropBefore:V,isOverBefore:T},C]=fr({accept:[Te.Node,Te.File,...pr],drop(z){if(z.files){c(z.files).then(q=>{if(q)for(const J of q)H.instance.addMedia({url:J.url},v.parent,v)});return}io(z,v.parent,v)||H.instance.executeCommandWithHistory(Re.REPARENT,z.value,{parents:v.parent,befores:v})},canDrop(z,q){return!q.isOver()||!v.parent?!1:Pn(z)?!0:z.type===Te.Node?v.parent&&!(z.multiple?z.value.some(J=>rn(J,v)):rn(z.value,v)):!0},collect:z=>({canDropBefore:z.canDrop(),isOverBefore:z.isOver()})}),[{canDropAfter:M,isOverAfter:A},W]=fr({accept:[Te.Node,Te.File,...pr],drop(z){const q=!y&&v.parent.children[E+1];if(z.files){c(z.files).then(J=>{if(J)for(const le of J)H.instance.addMedia({url:le.url},v.parent,q)});return}io(z,v.parent,q)||H.instance.executeCommandWithHistory(Re.REPARENT,z.value,{parents:v.parent,befores:q})},canDrop(z,q){return!q.isOver()||!v.parent?!1:Pn(z)?!0:z.type===Te.Node?v.parent&&!(z.multiple?z.value.some(J=>rn(J,v)):rn(z.value,v)):!0},collect:z=>({canDropAfter:z.canDrop(),isOverAfter:z.isOver()})}),[{canDropOn:L,isOverOn:K},Q]=fr({accept:[Te.Node,Te.File,...pr],drop(z){if(z.files){c(z.files).then(q=>{if(q)for(const J of q)H.instance.addMedia({url:J.url},v)});return}io(z,v)||H.instance.executeCommandWithHistory(Re.REPARENT,z.value,{parents:v})},canDrop(z,q){return q.isOver()?Pn(z)?!0:z.type===Te.Node?!(z.multiple?z.value.some(J=>rn(J,v)):rn(z.value,v)):!0:!1},collect:z=>({canDropOn:z.canDrop(),isOverOn:z.isOver()})});return p.createElement(m0,{style:d},p.createElement(pf,{holdToDisplay:-1,id:"hierarchy-node-menu",node:f,collect:h0},p.createElement(y0,{ref:N,id:Ha(f),onMouseDown:F,onClick:_,tabIndex:"0",onKeyDown:x,root:m===0,selected:b,active:g},p.createElement(Od,{ref:C,depth:m,position:"before",canDrop:V,isOver:T}),p.createElement(C0,{depth:m,ref:Q},h?p.createElement(E0,null):p.createElement(S0,{collapsed:D,onClick:S},D?p.createElement(al,{size:12}):p.createElement(ol,{size:12})),p.createElement(w0,null,p.createElement(D0,{as:w}),p.createElement(x0,null,O?p.createElement(P0,null,p.createElement(T0,{type:"text",onChange:k,onKeyDown:I,onBlur:P,value:n.name,autoFocus:!0})):p.createElement(M0,{canDrop:L,isOver:K},v.name)),f.object.issues&&f.object.issues.length>0&&p.createElement(f0,{node:f.object}))),p.createElement(Od,{depth:m,ref:W,position:"after",canDrop:M,isOver:A}))))}const I0=u.exports.memo(_0,r0);function*k0(t){const e=[];if(!!ee.instance.scene)for(e.push({depth:0,object:ee.instance.scene,childIndex:0,lastChild:!0});e.length!==0;){const{depth:n,object:r,childIndex:i,lastChild:o}=e.pop(),a=hr.instance.getEditorFromNode(r)||md,s=a.WrappedComponent?a.WrappedComponent.iconComponent:a.iconComponent,l=t[r.id];if(yield{id:r.id,isLeaf:r.children.filter(c=>c.isNode).length===0,isCollapsed:l,depth:n,object:r,iconComponent:s,selected:H.instance.selected.indexOf(r)!==-1,active:H.instance.selected.length>0&&r===H.instance.selected[H.instance.selected.length-1],childIndex:i,lastChild:o},r.children.length!==0&&!l)for(let c=r.children.length-1;c>=0;c--){const d=r.children[c];d.isNode&&e.push({depth:n+1,object:d,childIndex:c,lastChild:c===0})}}}function R0(){const t=hf(p0),[e,n]=u.exports.useState(null),[r,i]=u.exports.useState({}),[o,a]=u.exports.useState([]),s=u.exports.useCallback(()=>{const P=Array.from(k0(r));a(P)},[r]),{t:l}=Pt(),c=u.exports.useCallback(P=>{delete r[P.id],i({...r})},[r]),d=u.exports.useCallback(P=>{i({...r,[P.id]:!0})},[i,r]),f=u.exports.useCallback(P=>{P.object.traverse(O=>{O.isNode&&delete r[O.id]}),i({...r})},[i,r]),h=u.exports.useCallback(P=>{P.object.traverse(O=>{O.isNode&&(r[O.id]=!0)}),i({...r})},[i,r]),v=u.exports.useCallback(()=>{i({})},[i]),m=u.exports.useCallback(()=>{const P={};ee.instance.scene.traverse(O=>{O.isNode&&(P[O.id]=!0)}),i(P)},[i]),b=u.exports.useCallback((P,O)=>{(O==="name"||!O)&&s()},[s]);u.exports.useEffect(()=>(H.instance.addListener(Y.SCENE_GRAPH_CHANGED.toString(),s),H.instance.addListener(Y.SELECTION_CHANGED.toString(),s),H.instance.addListener(Y.OBJECTS_CHANGED.toString(),b),()=>{H.instance.removeListener(Y.SCENE_GRAPH_CHANGED.toString(),s),H.instance.removeListener(Y.SELECTION_CHANGED.toString(),s),H.instance.removeListener(Y.OBJECTS_CHANGED.toString(),b)}),[s,b]);const g=u.exports.useCallback((P,O)=>{P.detail===1&&(P.shiftKey?H.instance.executeCommandWithHistory(Re.TOGGLE_SELECTION,O.object):O.selected||H.instance.executeCommandWithHistory(Re.REPLACE_SELECTION,O.object))},[]),w=u.exports.useCallback((P,O)=>{P.detail===2&&Le.instance.editorControls.focus([O.object])},[]),D=u.exports.useCallback((P,O)=>{r[O.id]?c(O):d(O)},[r,c,d]),E=u.exports.useCallback((P,O)=>{if(P.key==="ArrowDown"){P.preventDefault();const j=o.indexOf(O),N=j!==-1&&o[j+1];if(N){P.shiftKey&&H.instance.executeCommandWithHistory(Re.ADD_TO_SELECTION,N.object);const R=document.getElementById(Ha(N));R&&R.focus()}}else if(P.key==="ArrowUp"){P.preventDefault();const j=o.indexOf(O),N=j!==-1&&o[j-1];if(N){P.shiftKey&&H.instance.executeCommandWithHistory(Re.ADD_TO_SELECTION,N.object);const R=document.getElementById(Ha(N));R&&R.focus()}}else P.key==="ArrowLeft"&&O.object.children.filter(j=>j.isNode).length>0?P.shiftKey?h(O):d(O):P.key==="ArrowRight"&&O.object.children.filter(j=>j.isNode).length>0?P.shiftKey?f(O):O.object.children.filter(j=>j.isNode).length>0&&c(O):P.key==="Enter"&&(P.shiftKey?H.instance.executeCommandWithHistory(Re.TOGGLE_SELECTION,O.object):H.instance.executeCommandWithHistory(Re.REPLACE_SELECTION,O.object))},[o,c,d,f,h]),y=u.exports.useCallback((P,O)=>{let j=O.selected?H.instance.selected:O.object;H.instance.executeCommandWithHistory(Re.REMOVE_OBJECTS,j)},[]),S=u.exports.useCallback((P,O)=>{let j=O.selected?H.instance.selected:O.object;H.instance.executeCommandWithHistory(Re.DUPLICATE_OBJECTS,j)},[]),x=u.exports.useCallback((P,O)=>{const j=O.selected?H.instance.selected:O.object;H.instance.executeCommandWithHistory(Re.GROUP,j)},[]),I=u.exports.useCallback((P,O)=>{n({id:O.id,name:O.object.name})},[n]),_=u.exports.useCallback((P,O)=>{n({id:P.id,name:O})},[n]),F=u.exports.useCallback((P,O)=>{O!==null&&H.instance.executeCommand(Re.MODIFY_PROPERTY,P.object,{properties:{name:O}}),n(null)},[]),[,k]=fr({accept:[Te.Node,Te.File,...pr],drop(P,O){if(!O.didDrop()){if(P.files){t(P.files).then(j=>{if(j)for(const N of j)H.instance.addMedia({url:N.url})});return}io(P)||H.instance.executeCommandWithHistory(Re.REPARENT,P.value,{parents:ee.instance.scene})}},canDrop(P,O){return O.isOver({shallow:!0})?Pn(P)?!0:P.type===Te.Node?!(P.multiple?P.value.some(j=>rn(j,ee.instance.scene)):rn(P.value,ee.instance.scene)):!0:!1}});return u.exports.useEffect(()=>{s()},[r,s]),p.createElement(u.exports.Fragment,null,p.createElement(v0,null,ee.instance.scene&&p.createElement(Dd,null,({height:P,width:O})=>p.createElement(n0,{height:P,width:O,itemSize:32,itemCount:o.length,itemData:{renamingNode:e,nodes:o,onKeyDown:E,onChangeName:_,onRenameSubmit:F,onMouseDown:g,onClick:w,onToggle:D,onUpload:t},itemKey:b0,outerRef:k,innerElementType:"ul"},I0))),p.createElement(ds,{id:"hierarchy-node-menu"},p.createElement(fn,{onClick:I},l("editor:hierarchy.lbl-rename")),p.createElement(fn,{onClick:S},l("editor:hierarchy.lbl-duplicate"),p.createElement("div",null,vo+"+ D")),p.createElement(fn,{onClick:x},l("editor:hierarchy.lbl-group"),p.createElement("div",null,vo+"+ G")),p.createElement(fn,{onClick:y},l("editor:hierarchy.lbl-delete")),p.createElement(fn,{onClick:v},l("editor:hierarchy.lbl-expandAll")),p.createElement(fn,{onClick:m},l("editor:hierarchy.lbl-collapseAll"))))}const $a=te.div`
  display: flex;
  flex: 1;
  flex-direction: row;
  align-items: center;
`;te.div`
  position: relative;
  display: flex;
  flex: 1;
  flex-direction: column;
  border-radius: 4px;
  background-color: ${t=>t.theme.panel};
  overflow: hidden;
  user-select: none;
`;te.div`
  display: flex;
  padding: 4px;
  height: 24px;
  align-items: center;
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
`;const Ka=te.div`
  margin-right: 8px;
`,Va=te.div``;te.div`
  display: flex;
  flex: 1;
  flex-direction: column;
  position: relative;
  overflow: hidden;
`;class N0 extends u.exports.Component{constructor(e){super(e);this.translation=new Kf}componentDidMount(){H.instance.addListener(Y.OBJECTS_CHANGED.toString(),this.onObjectsChanged)}shouldComponentUpdate(e){return e.node!==this.props.node}componentWillUnmount(){H.instance.removeListener(Y.OBJECTS_CHANGED.toString(),this.onObjectsChanged)}translation;onObjectsChanged=(e,n)=>{for(let r=0;r<e.length;r++)if(e[r]===this.props.node&&(n==="position"||n==="rotation"||n==="scale"||n==="matrix"||n==null)){this.forceUpdate();return}};onChangePosition=e=>{H.instance.executeCommandWithHistoryOnSelection(Re.POSITION,{positions:e})};onChangeRotation=e=>{H.instance.executeCommandWithHistoryOnSelection(Re.ROTATION,{rotations:e})};onChangeScale=e=>{H.instance.executeCommandWithHistoryOnSelection(Re.SCALE,{scales:e,overrideScale:!0})};render(){const{node:e}=this.props;return p.createElement(mf,{name:this.props.t("editor:properties.transform.title")},p.createElement(pn,{name:"Position",label:this.props.t("editor:properties.transform.lbl-postition")},p.createElement(fs,{value:e.position,smallStep:.01,mediumStep:.1,largeStep:1,onChange:this.onChangePosition})),p.createElement(pn,{name:"Rotation",label:this.props.t("editor:properties.transform.lbl-rotation")},p.createElement(gf,{value:e.rotation,onChange:this.onChangeRotation,unit:"\xB0"})),p.createElement(pn,{name:"Scale",label:this.props.t("editor:properties.transform.lbl-scale")},p.createElement(fs,{uniformScaling:!0,smallStep:.01,mediumStep:.1,largeStep:1,value:e.scale,onChange:this.onChangeScale})))}}var A0=Tn()(N0);const L0=te(pn)`
  label {
    width: auto !important;
    padding-right: 8px;
  }
`;class z0 extends u.exports.Component{constructor(e){super(e);this.state={name:this.props.node.name,focusedNode:null},this.t=this.props.t}t;onUpdateName=e=>{this.setState({name:e})};onFocus=()=>{this.setState({focusedNode:this.props.node,name:this.props.node.name})};onBlurName=()=>{this.props.node.name!==this.state.name&&this.props.node===this.state.focusedNode&&H.instance.setPropertyOnSelection("name",this.state.name),this.setState({focusedNode:null})};onKeyUpName=e=>{e.key==="Enter"&&(e.preventDefault(),H.instance.setPropertyOnSelection("name",this.state.name))};render(){const e=this.state.focusedNode?this.state.name:this.props.node.name;return p.createElement(L0,{name:"Name",label:this.t("editor:properties.name.lbl-name")},p.createElement(po,{value:e,onChange:this.onUpdateName,onFocus:this.onFocus,onBlur:this.onBlurName,onKeyUp:this.onKeyUpName}))}}var F0=Tn()(z0);const B0=te.div`
  display: flex;
  flex: 1;
  flex-direction: column;
`,j0=te.div`
  background-color: ${t=>t.theme.panel2};
  border: none !important;
  padding-bottom: 0 !important;
`,W0=te.div`
  display: flex;
  flex-flow: row wrap;
  align-items: flex-start;
  padding: 8px 0;
`,Td=te(pn)`
  display: flex;
  flex: 0;

  & > label {
    width: auto !important;
    padding-right: 8px;
  }
`,H0=te(pn)`
 display: flex;
 flex: 0;

 & > label {
   width: auto !important;
   padding-right: 8px;
 }
`,$0=te.div`
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow-y: auto;
  height: 100%;
`,Pd=te.div`
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
`;class K0 extends u.exports.Component{constructor(e){super(e);this.state={selected:H.instance.selected}}componentDidMount(){H.instance.addListener(Y.SELECTION_CHANGED.toString(),this.onSelectionChanged),H.instance.addListener(Y.OBJECTS_CHANGED.toString(),this.onObjectsChanged)}componentWillUnmount(){H.instance.removeListener(Y.SELECTION_CHANGED.toString(),this.onSelectionChanged),H.instance.removeListener(Y.OBJECTS_CHANGED.toString(),this.onObjectsChanged)}onSelectionChanged=()=>{this.setState({selected:H.instance.selected})};onObjectsChanged=(e,n)=>{const r=H.instance.selected;if(!(n==="position"||n==="rotation"||n==="scale"||n==="matrix")){for(let i=0;i<e.length;i++)if(r.indexOf(e[i])!==-1){this.setState({selected:H.instance.selected});return}}};onChangeVisible=e=>{H.instance.setPropertyOnSelection("visible",e)};onChangeBakeStatic=e=>{H.instance.setPropertyOnSelection("includeInCubemapBake",e)};onChangePersist=e=>{H.instance.setPropertyOnSelection("persist",e)};render(){const e=H.instance.selected;let n;if(e.length===0)n=p.createElement(Pd,null,this.props.t("editor:properties.noNodeSelected"));else{const r=e[e.length-1],i=hr.instance.getEditorFromNode(r)||md,o=e.length>1;let a=!0;for(let d=0;d<e.length-1;d++)if(hr.instance.getEditorFromNode(e[d])!==i){a=!1;break}let s;a?s=p.createElement(i,{multiEdit:o,node:r}):s=p.createElement(Pd,null,this.props.t("editor:properties.multipleNodeSelected"));const l=e.some(d=>d.disableTransform),c=e.some(d=>d.haveStaticTags);n=p.createElement(B0,null,p.createElement(j0,null,p.createElement(W0,null,p.createElement(F0,{node:r}),r.nodeName!=="Scene"&&p.createElement(p.Fragment,null,p.createElement(Td,{name:"Visible",label:this.props.t("editor:properties.lbl-visible")},p.createElement(dr,{value:r.visible,onChange:this.onChangeVisible})),c&&p.createElement(Td,{name:"Bake Static",label:"Bake Static"},p.createElement(dr,{value:r.includeInCubemapBake,onChange:this.onChangeBakeStatic})))),p.createElement(H0,{name:"Persist",label:this.props.t("editor:properties.lbl-persist")},p.createElement(dr,{value:r.persist,onChange:this.onChangePersist})),!l&&p.createElement(A0,{node:r})),s)}return p.createElement($0,null,n)}}var V0=Tn()(K0);const U0=4,G0="2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",q0={name:"Crater"},Y0={"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC":{name:"default_scene",components:[{name:"mtdata",props:{meta_data:""}},{name:"fog",props:{type:"disabled",color:"#ffffff",near:.0025,far:1e3,density:.0025}},{name:"audio-settings",props:{avatarDistanceModel:"inverse",avatarRolloffFactor:2,avatarRefDistance:1,avatarMaxDistance:1e4,mediaVolume:1,mediaDistanceModel:"inverse",mediaRolloffFactor:1,mediaRefDistance:20,mediaMaxDistance:1e4,mediaConeInnerAngle:360,mediaConeOuterAngle:0,mediaConeOuterGain:0}},{name:"simple-materials",props:{simpleMaterials:!1}},{name:"renderer-settings",props:{LODs:{x:5,y:15,z:30},overrideRendererSettings:!1,csm:!0,toneMapping:1,toneMappingExposure:.8,shadowMapType:2}},{name:"envmap",props:{type:1,envMapIntensity:1,envMapTextureType:0,envMapSourceURL:"/hdr/cubemap/Bridge2/"}}]},"1463EAC0-883F-493A-9A33-6757CC8FF48B":{name:"scene preview camera",components:[{name:"transform",props:{position:{x:0,y:5,z:10},rotation:{x:-.4636,y:0,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"scene-preview-camera",props:{}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:0},"ED0888E7-4032-4DD9-9B43-59B02ECCCB7E":{name:"skybox",components:[{name:"transform",props:{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"skybox",props:{backgroundColor:"#000000",equirectangularPath:"/hdr/city.jpg",cubemapPath:"/hdr/cubemap/Bridge2/",backgroundType:3,skyboxProps:{turbidity:10,rayleigh:1,luminance:1,mieCoefficient:.004999999999999893,mieDirectionalG:.99,inclination:.10471975511965978,azimuth:.16666666666666666,distance:1}}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:1},"1B698482-C15A-4CEC-9247-03873520DF70":{name:"ground plane",components:[{name:"transform",props:{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"ground-plane",props:{color:"#7ed321"}},{name:"shadow",props:{receive:!0}},{name:"walkable",props:{}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:2},"1B698483-C15A-4CEC-9247-03873520DF70":{name:"spawn point",components:[{name:"transform",props:{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"spawn-point",props:{}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:3},"1B698484-C15A-4CEC-9247-03873520DF70":{name:"post processing",components:[{name:"transform",props:{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!1}},{name:"postprocessing",props:{options:{FXAAEffect:{isActive:!0,blendFunction:13},OutlineEffect:{isActive:!0,blendFunction:16,patternTexture:null,edgeStrength:1,pulseSpeed:0,visibleEdgeColor:16777215,hiddenEdgeColor:2230538,resolutionScale:.5,width:-1,height:-1,kernelSize:0,blur:!1,xRay:!0},SSAOEffect:{isActive:!1,blendFunction:10,distanceScaling:!0,depthAwareUpsampling:!0,samples:16,rings:7,distanceThreshold:.125,distanceFalloff:.02,minRadiusScale:1,bias:.25,radius:.01,intensity:2,fade:.05},DepthOfFieldEffect:{isActive:!1,blendFunction:13,focusDistance:.02,focalLength:.5,bokehScale:1},BloomEffect:{isActive:!0,blendFunction:16,kernelSize:2,luminanceThreshold:1,luminanceSmoothing:.1,intensity:.2},ToneMappingEffect:{isActive:!1,blendFunction:13,adaptive:!0,resolution:512,middleGrey:.6,maxLuminance:32,averageLuminance:1,adaptationRate:2},BrightnessContrastEffect:{isActive:!1,brightness:.05,contrast:.1},HueSaturationEffect:{isActive:!1,hue:0,saturation:-.15},ColorDepthEffect:{isActive:!1,bits:16},LinearTosRGBEffect:{isActive:!1}}}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:4},"1B698484-C15A-4CEC-9247-03873520DF71":{name:"hemisphere light",components:[{name:"transform",props:{position:{x:0,y:10,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"hemisphere-light",props:{skyColor:"#ffffff",groundColor:"#ffffff",intensity:1}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:5},"46BB52A2-E365-410F-BC37-5873691B48C9":{name:"directional light",components:[{name:"transform",props:{position:{x:0,y:10,z:0},rotation:{x:-.5235987755982988,y:.2617993877991494,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"directional-light",props:{color:"#ffffff",intensity:1,castShadow:!0,shadowMapResolution:[512,512],shadowBias:0,shadowRadius:1,cameraFar:100,showCameraHelper:!1}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:6}};var _d={version:U0,root:G0,metadata:q0,entities:Y0};const X0=4,J0="2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",Z0={name:"Crater"},Q0={"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC":{name:"Crater"},"E8D3129B-68BF-473F-92B9-6DAEC83514BB":{name:"Skybox",components:[{name:"transform",props:{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"skybox",props:{turbidity:6.09,rayleigh:.82,luminance:1.055,mieCoefficient:.043,mieDirectionalG:.8,inclination:.10471975511965978,azimuth:.2333333333333333,distance:8e3}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:0},"D8061EA5-F0C4-4452-ADFE-B179E2F20CB1":{name:"Directional Light",components:[{name:"transform",props:{position:{x:-1,y:3,z:0},rotation:{x:1.0256860445560714,y:.3490658503988659,z:-.4417643021697627},scale:{x:.9999999999999996,y:.9999999999999998,z:.9999999999999997}}},{name:"visible",props:{visible:!0}},{name:"directional-light",props:{color:"#ffffff",intensity:3,castShadow:!0,shadowMapResolution:[512,512],shadowBias:0,shadowRadius:1}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:1},"633CD01A-BC2A-4584-99E2-2A3CFE2C8AD9":{name:"Spawn Point",components:[{name:"transform",props:{position:{x:2,y:0,z:2},rotation:{x:3.141592653589793,y:-.7853981633974483,z:3.141592653589793},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"spawn-point",props:{}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:2},"2D490729-384D-49AF-A755-9D6F70D56325":{name:"Floor Plan",components:[{name:"transform",props:{position:{x:0,y:.005,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"floor-plan",props:{autoCellSize:!1,cellSize:.1200000000000001,cellHeight:.1,agentHeight:1.7,agentRadius:.19999999999999996,agentMaxClimb:.5,agentMaxSlope:60,regionMinSize:4,maxTriangles:1e3,forceTrimesh:!1}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:3}};var Id={version:X0,root:J0,metadata:Z0,entities:Q0};const ew=te.button`
  width: 40px;
  height: 40px;
  border: none;
  color: ${t=>t.theme.white};
  cursor: pointer;
  position: relative;

  background-color: ${t=>t.isSelected?t.theme.blue:t.theme.toolbar};

  &:hover {
    background-color: ${t=>t.isSelected?t.theme.blueHover:t.theme.panel};
  }
`,tw=te.div`
  width: 14px;
  height: 14px;
  font-size: 14px;
`;function nw({id:t,icon:e,onClick:n,isSelected:r,tooltip:i}){return p.createElement(ot,{id:t,info:i,position:"bottom"},p.createElement(ew,{isSelected:r,onClick:n},p.createElement(tw,{as:e})))}class rw extends p.Component{constructor(e){super(e);this.state={isMenuOpen:!1},this.t=this.props.t}t;toggleMenu=e=>{if(this.state.isMenuOpen){this.setState({isMenuOpen:!1});return}const n=0,r=e.currentTarget.offsetHeight;bf({position:{x:n,y:r},target:e.currentTarget,id:"menu"}),this.setState({isMenuOpen:!0})};renderMenu=e=>!e.subCommnads||e.subCommnads.length===0?p.createElement(fn,{key:e.name,onClick:e.action},e.name,e.hotkey&&p.createElement("div",null,e.hotkey)):p.createElement(yf,{key:e.name,title:e.name,hoverDelay:0},e.subCommnads.map(n=>this.renderMenu(n)));render(){return p.createElement(p.Fragment,null,p.createElement(nw,{icon:il,onClick:this.toggleMenu,isSelected:this.state.isMenuOpen,id:"menu"}),p.createElement(ds,{id:"menu",onHide:()=>this.setState({isMenuOpen:!1})},this.props.commands.map(e=>this.renderMenu(e))))}}var iw=Tn()(rw),kd=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},t,{ref:e}),u.exports.createElement("path",{d:"M15 3H4.984c-1.103 0-2 .897-2 2v14.016c0 1.103.897 2 2 2H19c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2h-4zm4 5h-3V5h3v3zM4.984 10h3v4.016h-3V10zm5 0H14v4.016H9.984V10zM16 10h3v4.016h-3V10zm-2-5v3H9.984V5H14zM7.984 5v3h-3V5h3zm-3 11.016h3v3h-3v-3zm5 3v-3H14v3H9.984zm6.016 0v-3h3.001v3H16z"}))});kd.displayName="Grid";const Ua="_toolbarContainer_r8qha_1",ow="_statsContainer_r8qha_14",Rd="_toolbarNumericStepperInput_r8qha_43",on="_toolbarInputGroup_r8qha_63",qt="_toolButton_r8qha_73",xn="_selected_r8qha_89",Nd="_toolIcon_r8qha_95",Zn="_selectInput_r8qha_107",Ad="_playButtonContainer_r8qha_133";var $r={toolbarContainer:Ua,statsContainer:ow,toolbarNumericStepperInput:Rd,toolbarInputGroup:on,toolButton:qt,selected:xn,toolIcon:Nd,selectInput:Zn,playButtonContainer:Ad},Ld=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},t,{ref:e}),u.exports.createElement("path",{d:"M15 19V5l-8 7z"}))});Ld.displayName="CaretLeft";var zd=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},t,{ref:e}),u.exports.createElement("path",{d:"m9 19 8-7-8-7z"}))});zd.displayName="CaretRight";const aw=te.div`
  display: flex;
  flex: 1;
  width: 100%;
  height: 24px;

  input {
    border-left-width: 0;
    border-right-width: 0;
    border-radius: 0;
  }
`,Fd=te.button`
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: ${t=>t.value?t.theme.blue:t.theme.toolbar};

  border: 1px solid ${t=>t.theme.border};
  color: ${t=>t.theme.text};

  width: 20px;
  padding: 0;

  ${t=>t.left?"border-top-left-radius: 4px; border-bottom-left-radius: 4px;":"border-top-right-radius: 4px; border-bottom-right-radius: 4px;"}

  :hover {
    background-color: ${t=>t.theme.blueHover};
  }

  :active {
    background-color: ${t=>t.theme.blue};
  }
`;function sw({style:t,className:e,decrementTooltip:n,incrementTooltip:r,...i}){const o=u.exports.useRef(),a=u.exports.useCallback(()=>{o.current.decrement()},[o]),s=u.exports.useCallback(()=>{o.current.increment()},[o]);return p.createElement(aw,{style:t,className:e},p.createElement(ot,{info:n,position:"bottom"},p.createElement(Fd,{left:!0,onClick:a},p.createElement(Ld,{size:16}))),p.createElement(wf,{ref:o,...i}),p.createElement(ot,{info:r,position:"bottom"},p.createElement(Fd,{right:!0,onClick:s},p.createElement(zd,{size:16}))))}const lw=()=>{const[t,e]=u.exports.useState(!0),[n,r]=u.exports.useState(0);u.exports.useEffect(()=>(H.instance.addListener(Y.GRID_HEIGHT_CHANGED.toString(),o),H.instance.addListener(Y.GRID_VISIBILITY_CHANGED.toString(),i),()=>{H.instance.removeListener(Y.GRID_HEIGHT_CHANGED.toString(),o),H.instance.removeListener(Y.GRID_VISIBILITY_CHANGED.toString(),i)}),[]);const i=()=>{e(ee.instance.grid.visible)},o=()=>{r(ee.instance.grid.position.y)},a=()=>{ee.instance.grid.toggleGridVisible()},s=l=>{ee.instance.grid.setGridHeight(l)};return p.createElement("div",{id:"transform-grid",className:on},p.createElement(ot,{info:"Toggle Grid Visibility"},p.createElement("button",{onClick:a,className:qt+" "+(t?xn:"")},p.createElement(kd,{size:16}))),p.createElement(sw,{className:Rd,value:n,onChange:s,precision:.01,smallStep:.5,mediumStep:1,largeStep:5,unit:"m",incrementTooltip:"[-] Increment Grid Height",decrementTooltip:"[=] Decrement Grid Height"}))},cw=()=>{const[t,e]=u.exports.useState(Ht.Translate),n=Le.instance.editorControls;u.exports.useEffect(()=>(H.instance.addListener(Y.TRANSFROM_MODE_CHANGED.toString(),r),()=>{H.instance.removeListener(Y.TRANSFROM_MODE_CHANGED.toString(),r)}),[]);const r=()=>{e(n.transformMode)};return p.createElement("div",{className:on},p.createElement(ot,{id:"translate-button",info:"[T] Translate",position:"bottom"},p.createElement("button",{className:qt+" "+(t===Ht.Translate?xn:""),onClick:()=>n.setTransformMode(Ht.Translate)},p.createElement(nl,{size:12}))),p.createElement(ot,{id:"rotate-button",info:"[R] Rotate",position:"bottom"},p.createElement("button",{className:qt+" "+(t===Ht.Rotate?xn:""),onClick:()=>n.setTransformMode(Ht.Rotate)},p.createElement(hl,{size:12}))),p.createElement(ot,{id:"scale-button",info:"[Y] Scale",position:"bottom"},p.createElement("button",{className:qt+" "+(t===Ht.Scale?xn:""),onClick:()=>n.setTransformMode(Ht.Scale)},p.createElement(rl,{size:12}))))},uw=[{label:"Selection",value:Jr.Selection},{label:"Center",value:Jr.Center},{label:"Bottom",value:Jr.Bottom}],dw=()=>{const[t,e]=u.exports.useState(Jr.Selection),n=Le.instance.editorControls;u.exports.useEffect(()=>(H.instance.addListener(Y.TRANSFORM_PIVOT_CHANGED.toString(),r),()=>{H.instance.removeListener(Y.TRANSFORM_PIVOT_CHANGED.toString(),r)}),[]);const r=()=>{e(n.transformPivot)},i=a=>{n.setTransformPivot(a)},o=()=>{n.changeTransformPivot()};return p.createElement("div",{className:on,id:"transform-pivot"},p.createElement(ot,{info:"[X] Toggle Transform Pivot"},p.createElement("button",{onClick:o,className:qt},p.createElement(xf,{size:12}))),p.createElement(_n,{className:Zn,onChange:i,options:uw,value:t,creatable:!1,isSearchable:!1}))},fw=[{label:"Selection",value:mo.LocalSelection},{label:"World",value:mo.World}],pw=()=>{const[t,e]=u.exports.useState(mo.World),n=Le.instance.editorControls;u.exports.useEffect(()=>(H.instance.addListener(Y.TRANSFORM_SPACE_CHANGED.toString(),r),()=>{H.instance.removeListener(Y.TRANSFORM_SPACE_CHANGED.toString(),r)}),[]);const r=()=>{e(n.transformSpace)},i=a=>{n.setTransformSpace(a)},o=()=>{n.toggleTransformSpace()};return p.createElement("div",{className:on,id:"transform-space"},p.createElement(ot,{info:"[Z] Toggle Transform Space"},p.createElement("button",{onClick:o,className:qt},p.createElement(Cf,{size:12}))),p.createElement(_n,{className:Zn,onChange:i,options:fw,value:t,creatable:!1,isSearchable:!1}))},hw=[{label:"0.1m",value:.1},{label:"0.125m",value:.125},{label:"0.25m",value:.25},{label:"0.5m",value:.5},{label:"1m",value:1},{label:"2m",value:2},{label:"4m",value:4}],vw=[{label:"1\xB0",value:1},{label:"5\xB0",value:5},{label:"10\xB0",value:10},{label:"15\xB0",value:15},{label:"30\xB0",value:30},{label:"45\xB0",value:45},{label:"90\xB0",value:90}],mw={mode:Zr.Grid,translationSnap:.5,rotationSnap:10},gw=()=>{const[t,e]=u.exports.useState(mw),n=Le.instance.editorControls;u.exports.useEffect(()=>(H.instance.addListener(Y.SNAP_SETTINGS_CHANGED.toString(),r),()=>{H.instance.removeListener(Y.SNAP_SETTINGS_CHANGED.toString(),r)}),[]);const r=()=>{e({mode:n.snapMode,translationSnap:n.translationSnap,rotationSnap:n.rotationSnap})},i=s=>{n.setTranslationSnap(s),n.setSnapMode(Zr.Grid)},o=s=>{n.setRotationSnap(s),n.setSnapMode(Zr.Grid)},a=()=>{n.toggleSnapMode()};return p.createElement("div",{className:on,id:"transform-snap"},p.createElement(ot,{info:"[C] Toggle Snap Mode"},p.createElement("button",{onClick:a,className:qt+" "+(t.mode===Zr.Grid?xn:"")},p.createElement(cl,{size:12}))),p.createElement(_n,{className:Zn,onChange:i,options:hw,value:t.translationSnap,creatable:!1,isSearchable:!1}),p.createElement(_n,{className:Zn,onChange:o,options:vw,value:t.rotationSnap,creatable:!1,isSearchable:!1}))},bw=()=>{const[t,e]=u.exports.useState(!1);u.exports.useEffect(()=>(H.instance.addListener(Y.PLAY_MODE_CHANGED.toString(),n),()=>{H.instance.removeListener(Y.PLAY_MODE_CHANGED.toString(),n)}),[]);const n=()=>{e(Le.instance.isInPlayMode)},r=()=>{t?Le.instance.leavePlayMode():Le.instance.enterPlayMode()};return p.createElement("div",{className:on+" "+Ad,id:"preview"},p.createElement(ot,{info:t?"Stop Previewing Scene":"Preview Scene"},p.createElement("button",{onClick:r,className:qt+" "+(t?xn:"")},t?p.createElement(ul,{size:16}):p.createElement(dl,{size:16}))))},yw=()=>{const[t,e]=u.exports.useState({}),[n,r]=u.exports.useState(!1),{t:i}=Pt();u.exports.useEffect(()=>(ee.instance.renderer.onUpdateStats=a=>{a.render.frame%3==0&&e({geometries:a.memory.geometries,textures:a.memory.textures,fps:a.render.fps,frameTime:a.render.frameTime,calls:a.render.calls,triangles:a.render.triangles,points:a.render.points,lines:a.render.lines})},()=>{ee.instance.renderer.onUpdateStats=void 0}),[]);const o=()=>{r(!n)};return p.createElement(p.Fragment,null,p.createElement("div",{className:$r.toolbarInputGroup+" "+$r.playButtonContainer,id:"stats"},p.createElement(ot,{info:"Toggle Stats"},p.createElement("button",{onClick:o,className:$r.toolButton+" "+(n?$r.selected:"")},p.createElement(sl,{size:12})))),n&&p.createElement("div",{className:$r.statsContainer},p.createElement("h3",null,i("editor:viewport.state.header")),t&&p.createElement("ul",null,p.createElement("li",null,i("editor:viewport.state.memory"),p.createElement("ul",null,p.createElement("li",null,i("editor:viewport.state.geometries"),": ",t.geometries),p.createElement("li",null,i("editor:viewport.state.textures"),": ",t.textures))),p.createElement("li",null,i("editor:viewport.state.render"),":",p.createElement("ul",null,p.createElement("li",null,i("editor:viewport.state.FPS"),": ",Math.round(t.fps)),p.createElement("li",null,i("editor:viewport.state.frameTime"),": ",Math.round(t.frameTime),"ms"),p.createElement("li",null,i("editor:viewport.state.calls"),": ",t.calls),p.createElement("li",null,i("editor:viewport.state.triangles"),": ",t.triangles),p.createElement("li",null,i("editor:viewport.state.points"),": ",t.points),p.createElement("li",null,i("editor:viewport.state.lines"),": ",t.lines))))))};var Bd=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Z({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},t,{ref:e}),u.exports.createElement("path",{d:"M6.993 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007S14.761 6.993 12 6.993 6.993 9.239 6.993 12zM12 8.993c1.658 0 3.007 1.349 3.007 3.007S13.658 15.007 12 15.007 8.993 13.658 8.993 12 10.342 8.993 12 8.993zM10.998 19h2v3h-2zm0-17h2v3h-2zm-9 9h3v2h-3zm17 0h3v2h-3zM4.219 18.363l2.12-2.122 1.415 1.414-2.12 2.122zM16.24 6.344l2.122-2.122 1.414 1.414-2.122 2.122zM6.342 7.759 4.22 5.637l1.415-1.414 2.12 2.122zm13.434 10.605-1.414 1.414-2.122-2.122 1.414-1.414z"}))});Bd.displayName="Sun";const ww=()=>{const[t,e]=u.exports.useState(Qr.UNLIT),n=[];for(let o of Object.keys(Qr))n.push({label:Qr[o],value:Qr[o]});u.exports.useEffect(()=>(H.instance.addListener(Y.RENDER_MODE_CHANGED.toString(),i),()=>{H.instance.removeListener(Y.RENDER_MODE_CHANGED.toString(),i)}),[]);const r=u.exports.useCallback(o=>ee.instance.renderer.changeRenderMode(o),[]),i=u.exports.useCallback(()=>e(ee.instance.renderer.renderMode),[]);return p.createElement("div",{className:on,id:"transform-pivot"},p.createElement(ot,{info:"Render Mode"},p.createElement("div",{className:Nd},p.createElement(Bd,{size:16}))),p.createElement(_n,{className:Zn,onChange:r,options:n,value:t,creatable:!1,isSearchable:!1}))};class xw extends u.exports.Component{constructor(e){super(e);this.state={editorInitialized:!1}}componentDidMount(){H.instance.addListener(Y.RENDERER_INITIALIZED.toString(),this.onRendererInitialized),H.instance.addListener(Y.SETTINGS_CHANGED.toString(),this.onForceUpdate)}componentWillUnmount(){H.instance.removeListener(Y.SETTINGS_CHANGED.toString(),this.onForceUpdate)}onRendererInitialized=()=>{this.setState({editorInitialized:!0}),H.instance.removeListener(Y.RENDERER_INITIALIZED.toString(),this.onRendererInitialized)};onForceUpdate=()=>{this.forceUpdate()};render(){const{editorInitialized:e}=this.state;return e?p.createElement("div",{className:Ua},p.createElement(iw,{commands:this.props.menu}),p.createElement(cw,null),p.createElement(pw,null),p.createElement(dw,null),p.createElement(gw,null),p.createElement(lw,null),p.createElement(ww,null),p.createElement(bw,null),p.createElement(yw,null)):p.createElement("div",{className:Ua})}}const Cw="_viewportCanvas_1s1yi_1",Sw="_viewportContainer_1s1yi_7",Ew="_controlsText_1s1yi_22";const Ie={a:"",lato:"'Lato', sans-serif",zilla:"'Zilla Slab', sans-serif",background:"rgba(0,0,0,0)",inputBackground:"#070809",border:"#5D646C",panel:"#282C31",panel2:"#3A4048",selected:"#006EFF",selectedText:"#fff",hover:"#4B5562",hover2:"#636F80",text:"#FFFFFF",text2:"#9FA4B5",dropdown:"#000000",red:"#F44336",pink:"#E91E63",purple:"#9C27B0",deepPurple:"#673AB7",indigo:"#3F51B5",blue:"#006EFF",lightBlue:"#03A9F4",cyan:"#00BCD4",teal:"#009688",green:"#4CAF50",lightGreen:"#8BC34A",lime:"#CDDC39",yellow:"#FFEB3B",amber:"#FFC107",orange:"#FF9800",deepOrange:"#FF5722",brown:"#795548",blueHover:"#4D93F1",bluePressed:"#0554BC",disabled:"#222222",disabledText:"grey",deemphasized:"grey",toolbar:"rgba(0, 0, 0, 0.0)",toolbar2:"rgba(0, 0, 0, 0.0)",header:"#1b1b1b",white:"#fff",shadow15:"0px 4px 4px  rgba(0, 0, 0, 0.15)",shadow30:"0px 4px 4px  rgba(0, 0, 0, 0.3)",borderStyle:"1px solid #5D646C"};Ie.chartColors=[Ie.red,Ie.pink,Ie.purple,Ie.deepPurple,Ie.indigo,Ie.blue,Ie.lightBlue,Ie.cyan,Ie.teal,Ie.green,Ie.lightGreen,Ie.lime,Ie.yellow,Ie.amber,Ie.orange,Ie.deepOrange,Ie.brown];p.createContext(Ie);function Dw(){const t=u.exports.useRef(),[e,n]=u.exports.useState(!1),[r,i]=u.exports.useState(!1),[o,a]=u.exports.useState(null),{t:s}=Pt(),l=u.exports.useCallback(()=>{i(H.instance.selected.length>0)},[]),c=u.exports.useCallback(()=>{n(Le.instance.flyControls.enabled)},[]),d=u.exports.useCallback(w=>{a(w)},[]),f=u.exports.useCallback(()=>{H.instance.addListener(Y.SELECTION_CHANGED.toString(),l),Le.instance.editorControls.addListener(Y.FLY_MODE_CHANGED.toString(),c),Le.instance.editorControls.addListener(Y.TRANSFROM_MODE_CHANGED.toString(),d),H.instance.removeListener(Y.RENDERER_INITIALIZED.toString(),f)},[]);u.exports.useEffect(()=>{const w=()=>{ee.instance.initializeRenderer(t.current),H.instance.addListener(Y.PROJECT_LOADED.toString(),w)};return H.instance.addListener(Y.RENDERER_INITIALIZED.toString(),f),H.instance.addListener(Y.PROJECT_LOADED.toString(),w),()=>{H.instance.removeListener(Y.SELECTION_CHANGED.toString(),l),Le.instance.editorControls&&(Le.instance.editorControls.removeListener(Y.FLY_MODE_CHANGED.toString(),c),Le.instance.editorControls.removeListener(Y.TRANSFROM_MODE_CHANGED.toString(),d)),ee.instance.renderer&&ee.instance.renderer.dispose()}},[]);const[{canDrop:h,isOver:v},m]=fr({accept:[Te.Node,...pr],drop(w,D){const E=D.getClientOffset();if(w.type===Te.Node){w.multiple?ee.instance.reparentToSceneAtCursorPosition(w.value,E):ee.instance.reparentToSceneAtCursorPosition([w.value],E);return}u0(w,E)},collect:w=>({canDrop:w.canDrop(),isOver:w.isOver()})}),b=u.exports.useCallback(w=>{Promise.all(w.map(({url:D,name:E,id:y})=>{H.instance.addMedia({url:D,name:E,id:y})})).catch(D=>{H.instance.emitEvent(Y.ERROR,D)})},[]);let g;return e?g="[W][A][S][D] "+s("editor:viewport.command.movecamera")+" | [Shift] "+s("editor:viewport.command.flyFast"):g="[LMB] "+s("editor:viewport.command.orbit")+" | [MMB] "+s("editor:viewport.command.pan")+" | [RMB] "+s("editor:viewport.command.fly"),r&&(g+=" | [F] "+s("editor:viewport.command.focus")+" | [Q] "+s("editor:viewport.command.rotateLeft")+" | [E] "+s("editor:viewport.command.rotateRight")),o===Ht.Placement?g+=" | [ESC / G] "+s("editor:viewport.command.cancelPlacement"):o===Ht.Grab?g+=" | [Shift + Click] "+s("editor:viewport.command.placeDuplicate")+" | [ESC / G] "+s("editor:viewport.command.cancelGrab"):r&&(g+="| [G] "+s("editor:viewport.command.grab")+" | [ESC] "+s("editor:viewport.command.deselectAll")),p.createElement("div",{className:Sw,style:{borderColor:v?h?Ie.blue:Ie.red:"transparent"},ref:m},p.createElement("canvas",{className:Cw,ref:t,tabIndex:-1,id:"viewport-canvas"}),p.createElement("div",{className:Ew},g),p.createElement(Sf,{afterUpload:b}))}const Cn=te.span`
  color: ${t=>t.color};
`,Mw=te.li`
  display: flex;
  min-height: 100px;
  background-color: ${t=>t.theme.toolbar};
  border: 1px solid ${t=>t.theme.panel};
  border-radius: 4px;
  margin: 4px;
  color: white;
  max-width: 560px;

  & > :first-child {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 100px;
  }

  & > :last-child {
    display: flex;
    flex-direction: column;
    flex: 1;
    padding: 12px;
    border-left: 1px solid ${t=>t.theme.panel2};
  }

  h5 {
    font-size: 20px;
  }

  h6 {
    font-size: 16px;
  }

  a {
    white-space: nowrap;
    color: ${t=>t.theme.blue};
  }

  p {
    margin: 0;
  }
`;function Kr({score:t,scoreColor:e,title:n,description:r,learnMoreUrl:i,children:o}){const{t:a}=Pt();return p.createElement(Mw,null,p.createElement("div",null,p.createElement(Cn,{as:"h5",color:e},t)),p.createElement("div",null,p.createElement("h6",null,n,": ",o),p.createElement("p",null,r," ",p.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:i},a("editor:dialog.performance.learnMore")))))}const jd={Low:0,Medium:1,High:2};function Wd({scores:t,...e}){const n=u.exports.useContext(rs),{t:r}=Pt(),i={Low:n.green,Medium:n.yellow,High:n.red},o=jd[t.textures.largeTexturesScore]>jd[t.textures.score]?t.textures.largeTexturesScore:t.textures.score;return p.createElement(Xr,{...e},p.createElement("ul",null,p.createElement(Kr,{title:r("editor:dialog.performance.lbl-polycount"),description:r("editor:dialog.performance.info-polycount"),learnMoreUrl:"htts://xrengine.dev/docs/editor-optimization.html",score:t.polygons.score,scoreColor:i[t.polygons.score]},p.createElement(Cn,{color:i[t.polygons.score]},r("editor:dialog.performance.txt-polycount",{count:t.polygons.value.toLocaleString()}))),p.createElement(Kr,{title:r("editor:dialog.performance.lbl-material"),description:r("editor:dialog.performance.info-material"),learnMoreUrl:"htts://xrengine.dev/docs/editor-optimization.html",score:t.materials.score,scoreColor:i[t.materials.score]},p.createElement(Cn,{color:i[t.materials.score]},r("editor:dialog.performance.txt-material",{count:t.materials.value}))),p.createElement(Kr,{title:r("editor:dialog.performance.lbl-texture"),description:r("editor:dialog.performance.info-texture"),learnMoreUrl:"htts://xrengine.dev/docs/editor-optimization.html",score:o,scoreColor:i[o]},p.createElement(Cn,{color:i[t.textures.score]},r("editor:dialog.performance.txt-ram",{count:ps(t.textures.value)})),","," ",p.createElement(Cn,{color:i[t.textures.largeTexturesScore]},r("editor:dialog.performance.txt-texture",{count:t.textures.largeTexturesValue}))),p.createElement(Kr,{title:r("editor:dialog.performance.lbl-lights"),description:r("editor:dialog.performance.info-lights"),learnMoreUrl:"htts://xrengine.dev/docs/editor-optimization.html",score:t.lights.score,scoreColor:i[t.lights.score]},p.createElement(Cn,{color:i[t.lights.score]},r("editor:dialog.performance.txt-lights",{count:t.lights.value}))),p.createElement(Kr,{title:r("editor:dialog.performance.lbl-fileSize"),description:r("editor:dialog.performance.info-fileSize"),learnMoreUrl:"htts://xrengine.dev/docs/editor-optimization.html",score:t.fileSize.score,scoreColor:i[t.fileSize.score]},p.createElement(Cn,{color:i[t.fileSize.score]},ps(t.fileSize.value)))))}Wd.defaultProps={tag:"div",title:De.t("editor:dialog.performance.info-fileSize")||"Performance Check",confirmLabel:De.t("editor:dialog.performance.info-fileSize")||"Publish Scene"};class Ow extends u.exports.Component{constructor(e){super(e);this.state={name:"",...e.initialSceneParams}}onChangeName=e=>this.setState({name:e});onConfirm=()=>{const e={...this.state};e.name=e.name.trim(),this.props.onPublish(e)};render(){const{onCancel:e,screenshotUrl:n}=this.props,{name:r}=this.state;return p.createElement(za,{imageSrc:n,title:this.props.t("editor:dialog.publish.title"),onConfirm:this.onConfirm,onCancel:e,confirmLabel:this.props.t("editor:dialog.publish.lbl-confirm")},p.createElement(ro,null,p.createElement("label",{htmlFor:"sceneName"},this.props.t("editor:dialog.publish.lbl-name")),p.createElement(po,{id:"sceneName",required:!0,pattern:`[A-Za-z0-9-':"!@#$%^&*(),.?~ ]{4,64}`,title:this.props.t("editor:dialog.publish.info-name"),value:r,onChange:this.onChangeName})))}}var Tw=Tn()(Ow);function Pw({onCancel:t,sceneName:e,sceneUrl:n,screenshotUrl:r,...i}){const{t:o}=Pt();return p.createElement(za,{imageSrc:r,title:o("editor:dialog.published.title"),...i},p.createElement("h1",null,e),p.createElement("p",null,o("editor:dialog.published.header")),p.createElement(Ef,{as:"a",href:n,target:"_blank"},o("editor:dialog.published.lbl-view")))}const _w=async t=>{try{return await He.instance.feathersClient.service("static-resource-url").get(t)}catch(e){throw console.log("Can't get URL from id"+e),new Error(e)}throw new Error("Can't get URL from id")},Iw=async t=>Df(t)||await Mf(t);function kw({onSelectionChanged:t}){const[e,n]=u.exports.useState(go.instance.sources),[r,i]=u.exports.useState(e.length>0?e[1]:null);u.exports.useEffect(()=>{const S=I=>{i(e.find(_=>_.id===I))},x=()=>{const I=go.instance.sources;n(I)};return H.instance.addListener(Y.SETTINGS_CHANGED.toString(),x),H.instance.addListener(Y.SOURCE_CHANGED.toString(),S),()=>{H.instance.removeListener(Y.SOURCE_CHANGED.toString(),S),H.instance.removeListener(Y.SETTINGS_CHANGED.toString(),x)}},[i,e,n,r]);const{loadMore:o,hasMore:a,results:s}=Of(r),l={name:"Current",sid:"",ownedFileIds:{}},c=[];c.push(l),s.forEach(S=>{c.push(S.project)});const d=S=>{t({resourceUrl:S.description,name:S.id,contentType:S.contentType})},h=(S=>{const x=[];return S.forEach((I,_)=>{I.sid!==globalThis.currentProjectID&&x.push({label:I.name,value:_})}),x})(c),[v,m]=u.exports.useState(0),[b,g]=u.exports.useState([]),w=u.exports.useRef(v),D=async S=>{const x={};Object.assign(x,He.instance.ownedFileIds),Object.assign(x,He.instance.currentOwnedFileIds),c[0].ownedFileIds=JSON.stringify(x),c[0].sid=globalThis.currentProjectID;const I=c[S]?.ownedFileIds,_=I?JSON.parse(I):{},F=[];for(let k of Object.keys(_))if(k!=="thumbnailOwnedFileId"){const P=_[k],{url:O}=await _w(P);if(!O)continue;const j=await Iw(new URL(O)),N=kf[j],R=hr.instance.getEditorFromClass(N),V={description:O,fileId:P,projectId:c[S].sid,id:k,label:k,nodeClass:N,url:O,type:"Element",contentType:j,initialProps:{src:new URL(O)},iconComponent:R.WrappedComponent?R.WrappedComponent.iconComponent:R.iconComponent};F.push(V)}g(F)},E=S=>{w.current=S,m(S)};u.exports.useEffect(()=>{D(v)},[v]);const y=S=>{w.current===0&&D(v)};return u.exports.useEffect(()=>(H.instance.addListener(Y.FILE_UPLOADED.toString(),y),()=>{H.instance.removeListener(Y.FILE_UPLOADED.toString(),y)}),[]),p.createElement(p.Fragment,null,p.createElement(pn,{name:"Project Name",label:"Project Name"},p.createElement(_n,{options:h,onChange:E,value:v})),p.createElement(Tf,{id:"file-browser-panel",className:Pf.assetsPanel},p.createElement(_f,null,p.createElement(If,{source:r,items:b,onLoadMore:o,hasMore:a,onSelect:d,isLoading:!1}))))}const Rw=te.audio`
  display: block;
  margin-left: auto;
  margin-right: auto;
  margin-top:300px
  max-width:500px
`,Nw=t=>{const e=t.resourceProps.resourceUrl;return p.createElement(Rw,{src:e,controls:!0},"Your browser doesn't support Audio")},Aw=te.img`
  display: block;
  margin-left: auto;
  margin-right: auto;
`,Lw=t=>{const e=t.resourceProps.resourceUrl;return p.createElement(Aw,{src:e})},zw=te.canvas`
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 100%;
  height: 100%;
  position: relative;
`,Fw=t=>{const e=t.resourceProps.resourceUrl,n=p.createRef(),r=new Vf,i=new Uf(75),[o,a]=u.exports.useState(!1),s=()=>{const d=n.current,f=new Gf({canvas:d});f.setSize(d.width,d.height);const h=new qf(4210752);r.add(h),i.aspect=d.width/d.width,r.add(i),f.render(r,i),new Xf().load(e,v=>{r.add(v.scene);const m=new Yf().setFromObject(v.scene);m.getCenter(i.position),i.position.z=m.max.z+1},void 0,()=>{console.log("Error Loading GLTF From URl")})},l=u.exports.useCallback(()=>{a(Le.instance.flyControls.enabled)},[a]),c=u.exports.useCallback(()=>{Le.instance.editorControls.addListener(Y.FLY_MODE_CHANGED.toString(),l),H.instance.removeListener(Y.RENDERER_INITIALIZED.toString(),c)},[l]);return u.exports.useEffect(()=>(H.instance.addListener(Y.RENDERER_INITIALIZED.toString(),c),He.instance.init(),ee.instance.initializeRenderer(n.current),s(),()=>{Le.instance.editorControls&&Le.instance.editorControls.removeListener(Y.FLY_MODE_CHANGED.toString(),l),ee.instance.renderer&&ee.instance.renderer.dispose(),He.instance.dispose()}),[]),p.createElement(p.Fragment,null,p.createElement("div",null,p.createElement(zw,{ref:n})))},Bw=t=>(t.resourceProps.resourceUrl,p.createElement("div",null,"Preview of this Asset is unavailable")),jw=te.video`
  display: block;
  margin-left: auto;
  margin-right: auto;
  max-width: 500px;
`,Ww=t=>{const e=t.resourceProps.resourceUrl;return p.createElement(jw,{src:e,controls:!0},"Your Browser doesn't support Video")},Hw=te.div`
  text-align: center;
  font-size: 150%;
  padding-bottom: 20px;
`,$w=p.forwardRef((t,e)=>{u.exports.useImperativeHandle(e,()=>({onLayoutChanged:i,onSelectionChanged:o})),u.exports.useState(0);const[n,r]=u.exports.useState({PreviewSource:null,resourceProps:{resourceUrl:"",name:""}}),i=()=>{console.log("Layout is Changed:")},o=s=>{a(s)},a=s=>{switch(s.contentType){case"model/gltf":case"model/gltf-binary":const l={PreviewSource:Fw,resourceProps:{resourceUrl:s.resourceUrl,name:s.name}};r(l);break;case"image/png":case"image/jpeg":const c={PreviewSource:Lw,resourceProps:{resourceUrl:s.resourceUrl,name:s.name}};r(c);break;case"video/mp4":const d={PreviewSource:Ww,resourceProps:{resourceUrl:s.resourceUrl,name:s.name}};r(d);break;case"audio/mpeg":const f={PreviewSource:Nw,resourceProps:{resourceUrl:s.resourceUrl,name:s.name}};r(f);break;default:const h={PreviewSource:Bw,resourceProps:{resourceUrl:s.resourceUrl,name:s.name}};r(h);break}};return p.createElement(p.Fragment,null,p.createElement("div",null,p.createElement(Hw,null,n.resourceProps.name)),n.PreviewSource&&p.createElement(n.PreviewSource,{resourceProps:n.resourceProps}))});function Kw(){const t=p.useRef(),e=()=>{t.current?.onLayoutChanged?.()},n=i=>{t.current?.onSelectionChanged?.(i)};let r={dockbox:{mode:"vertical",children:[{size:5,tabs:[{id:"projectFilesPanel",title:"Project Files",content:p.createElement(kw,{onSelectionChanged:n})}]},{size:5,tabs:[{id:"previewPanel",title:"Preview",content:p.createElement($w,{ref:t})}]}]}};return p.createElement(p.Fragment,null,p.createElement(Un,{defaultLayout:r,style:{pointerEvents:"none",position:"absolute",left:0,top:5,right:5,bottom:5},onLayoutChange:e}))}const Vw={name:()=>"Scene Editor",longName:()=>"Scene Editor",SERVER_URL:ei.publicRuntimeConfig.apiServer,APP_URL:ei.publicRuntimeConfig.appServer,FEATHERS_STORE_KEY:ei.publicRuntimeConfig.feathersStoreKey,ROOT_REDIRECT:ei.publicRuntimeConfig.rootRedirect},Uw=25,Hd=t=>`${Vw.APP_URL}/scenes/${t}`,Gw=async(t,e,n)=>{let r;try{const i=ee.instance.scene,o=new AbortController,a=o.signal;if(ee.instance.sceneModified&&(e(Ze,{title:De.t("editor:saving"),message:De.t("editor:savingMsg"),cancelable:!0,onCancel:()=>{o.abort()}}),t=await hs(t.project_id,a),a.aborted)){const k=new Error(De.t("editor:errors.publishProjectAborted"));throw k.aborted=!0,k}e(Ze,{title:De.t("editor:generateScreenshot"),message:De.t("editor:generateScreenshotMsg")}),await new Promise(k=>setTimeout(k,5));const s=await ee.instance.takeScreenshot();console.log("Screenshot is"),console.log(s);const{blob:l,cameraTransform:c}=s;if(console.log("screenshotBlob is"),console.log(l),r=URL.createObjectURL(l),console.log("Screenshot url is",r),a.aborted){const k=new Error(De.t("editor:errors.publishProjectAborted"));throw k.aborted=!0,k}let{name:d}=i.metadata;d=t.scene&&t.scene.name||d||ee.instance.scene.name;const f=await new Promise(k=>{e(Tw,{screenshotUrl:r,initialSceneParams:{name:d},onCancel:()=>k(null),onPublish:k})});if(!f){URL.revokeObjectURL(r),n();const k=new Error(De.t("editor:errors.publishProjectAborted"));throw k.aborted=!0,k}i.setMetadata({name:f.name,previewCameraTransform:c}),e(Ze,{title:De.t("editor:publishingScene"),message:De.t("editor:publishingSceneMsg"),cancelable:!0,onCancel:()=>{o.abort()}});const{glbBlob:h,chunks:v}=await ee.instance.exportScene({scores:!0});if(a.aborted){const k=new Error(De.t("editor:errors.publishProjectAborted"));throw k.aborted=!0,k}if(!await new Promise(k=>{e(Wd,{chunks:v,onCancel:()=>k(!1),onConfirm:()=>k(!0)})})){const k=new Error(De.t("editor:errors.publishProjectAborted"));throw k.aborted=!0,k}const b=await ee.instance.scene.serialize(t.project_id),g=new Blob([JSON.stringify(b)],{type:"application/json"});e(Ze,{title:De.t("editor:publishingScene"),message:De.t("editor:publishingSceneMsg"),cancelable:!0,onCancel:()=>{o.abort()}});const w=h.size/1024/1024,D=Uw;if(w>D)throw new Error(De.t("editor:errors.sceneTooLarge",{size:w.toFixed(2),maxSize:D}));e(Ze,{title:De.t("editor:publishingScene"),message:De.t("editor:uploadingThumbnailMsg"),cancelable:!0,onCancel:()=>{o.abort()}});const{file_id:E,meta:{access_token:y}}=await bo(l,void 0,o.signal);if(a.aborted){const k=new Error(De.t("editor:errors.publishProjectAborted"));throw k.aborted=!0,k}const{file_id:S,meta:{access_token:x}}=await bo(h,k=>{e(Ze,{title:De.t("editor:publishingScene"),message:De.t("editor:uploadingSceneMsg",{percentage:Math.floor(k*100)}),onCancel:()=>{o.abort()}},o.signal)});if(a.aborted){const k=new Error(De.t("editor:errors.publishProjectAborted"));throw k.aborted=!0,k}const{file_id:I,meta:{access_token:_}}=await bo(g,void 0,o.signal);if(a.aborted){const k=new Error(De.t("editor:errors.publishProjectAborted"));throw k.aborted=!0,k}const F={screenshot_file_id:E,screenshot_file_token:y,model_file_id:S,model_file_token:x,scene_file_id:I,scene_file_token:_,name:f.name};try{t=await He.instance.feathersClient.service(`/publish-project/${t.project_id}`).create({scene:F})}catch(k){throw new Error(k)}e(Pw,{sceneName:F.name,screenshotUrl:r,sceneUrl:Hd(t.scene.scene_id),onConfirm:()=>{n()}})}finally{r&&URL.revokeObjectURL(r)}return t},qw=te.div`
  display: flex;
  flex: 1;
  flex-direction: column;
  height: 100%;
  width: 100%;
  position: fixed;
`,Yw=te.div`
  display: flex;
  flex: 1;
  overflow: hidden;
  margin: 0px;
`,Xw=te.div`
  .dock-panel {
    background: transparent;
    pointer-events: auto;
    opacity: 0.8;
    border: none;
  }
  .dock-panel:first-child {
    position: relative;
    z-index: 99;
  }
  .dock-panel[data-dockid="+3"] {
    visibility: hidden;
    pointer-events: none;
  }
  .dock-divider {
    pointer-events: auto;
  }
  .dock {
    border-radius: 4px;
    background: #282C31;
  }
  .dock-top .dock-bar {
    font-size: 12px;
    border-bottom: 1px solid rgba(0,0,0,0.2);
    background: #282C31;
  }
  .dock-tab {
    background: #282C31; 
    border-bottom: none;
  }
  .dock-tab:hover, .dock-tab-active, .dock-tab-active:hover {
    color: #ffffff; 
  }
  .dock-ink-bar {
    background-color: #ffffff; 
  }
`;class Jw extends u.exports.Component{constructor(e){super(e);let n=hd;const r=localStorage.getItem("editor-settings");r&&(n=JSON.parse(r)),He.buildProjectManager(n),H.buildCommandManager(),ee.buildSceneManager(),Le.buildControlManager(),hr.buildNodeManager(ee.instance.scene),go.buildSourceManager(),Rf.init(),Nf(),Af(),He.instance.initializeFeathersClient($f()),H.instance.addListener(Y.RENDERER_INITIALIZED.toString(),this.setDebuginfo),H.instance.addListener(Y.PROJECT_LOADED.toString(),this.onProjectLoaded),H.instance.addListener(Y.ERROR.toString(),this.onEditorError),H.instance.addListener(Y.SAVE_PROJECT.toString(),this.onSaveProject),this.state={project:null,parentSceneId:null,pathParams:new Map(Object.entries(e.match.params)),queryParams:new Map(new URLSearchParams(window.location.search).entries()),settingsContext:{settings:n,updateSetting:this.updateSetting},creatingProject:null,DialogComponent:null,dialogProps:{},modified:!1},this.t=this.props.t}componentDidMount(){const e=Zd.store.dispatch;is().locations.updateNeeded.value===!0&&e(vs.fetchAdminLocations()),Qd().scenes.updateNeeded.value===!0&&e(jf.fetchAdminScenes()),is().locationTypes.updateNeeded.value===!0&&e(vs.fetchLocationTypes());const n=this.state.pathParams,r=this.state.queryParams,i=n.get("projectId");i==="new"?r.has("template")?this.loadProjectTemplate(r.get("template")):r.has("sceneId")?this.loadScene(r.get("sceneId")):this.loadProjectTemplate(_d):i==="tutorial"?this.loadProjectTemplate(Id):this.loadProject(i)}componentDidUpdate(e){if(this.props.location.pathname!==e.location.pathname&&!this.state.creatingProject){const n=e.match.params.projectId,r=new Map(new URLSearchParams(window.location.search).entries());this.setState({queryParams:r});const o=this.state.pathParams.get("projectId");let a=null;o==="new"&&!r.has("sceneId")?a=r.get("template")||_d:o==="tutorial"&&(a=Id),o==="new"||o==="tutorial"?this.loadProjectTemplate(a):n!=="tutorial"&&n!=="new"&&this.loadProject(o)}}componentWillUnmount(){H.instance.removeListener(Y.SAVE_PROJECT.toString(),this.onSaveProject),H.instance.removeListener(Y.ERROR.toString(),this.onEditorError),H.instance.removeListener(Y.PROJECT_LOADED.toString(),this.onProjectLoaded),He.instance.dispose()}t;async loadProjectTemplate(e){this.setState({project:null,parentSceneId:null}),this.showDialog(Ze,{title:this.t("editor:loading"),message:this.t("editor:loadingMsg")});try{e.metadata&&(delete e.metadata.sceneUrl,delete e.metadata.sceneId),await He.instance.loadProject(e),this.hideDialog()}catch(n){console.error(n),this.showDialog($t,{title:this.t("editor:loadingError"),message:n.message||this.t("editor:loadingErrorMsg"),error:n})}}async loadScene(e){this.setState({project:null,parentSceneId:e}),this.showDialog(Ze,{title:this.t("editor:loading"),message:this.t("editor:loadingMsg")});try{const n=await zy(e);console.warn("loadScene:scene",n);const r=n.data;await He.instance.loadProject(r),this.hideDialog()}catch(n){console.error(n),this.showDialog($t,{title:this.t("editor:loadingError"),message:n.message||this.t("editor:loadingErrorMsg"),error:n})}}async importProject(e){const n=this.state.project;this.setState({project:null,parentSceneId:null}),this.showDialog(Ze,{title:this.t("editor:loading"),message:this.t("editor:loadingMsg")});try{await He.instance.loadProject(e),ee.instance.sceneModified=!0,this.updateModifiedState(),this.hideDialog()}catch(r){console.error(r),this.showDialog($t,{title:this.t("editor:loadingError"),message:r.message||this.t("editor:loadingErrorMsg"),error:r})}finally{n&&this.setState({project:n})}}async loadProject(e){this.setState({project:null,parentSceneId:null}),this.showDialog(Ze,{title:this.t("editor:loading"),message:this.t("editor:loadingMsg")});let n;try{n=await Lf(e),He.instance.ownedFileIds=JSON.parse(n.ownedFileIds),globalThis.currentProjectID=n.project_id;const r=n.project_url.split("collection/")[1],i=await He.instance.feathersClient.service("collection").get(r,{headers:{"content-type":"application/json"}});await He.instance.loadProject(i),this.hideDialog()}catch(r){console.error(r),this.showDialog($t,{title:this.t("editor:loadingError"),message:r.message||this.t("editor:loadingErrorMsg"),error:r})}finally{n&&this.setState({project:n})}}updateModifiedState(e){const n=ee.instance.sceneModified&&!this.state.creatingProject;n!==this.state.modified?this.setState({modified:n},e):e&&e()}generateToolbarMenu=()=>[{name:this.t("editor:menubar.newProject"),action:this.onNewProject},{name:this.t("editor:menubar.saveProject"),hotkey:`${vo} + S`,action:this.onSaveProject},{name:this.t("editor:menubar.saveAs"),action:this.onDuplicateProject},{name:this.t("editor:menubar.exportGLB"),action:this.onExportProject},{name:this.t("editor:menubar.importProject"),action:this.onImportLegacyProject},{name:this.t("editor:menubar.exportProject"),action:this.onExportLegacyProject},{name:this.t("editor:menubar.quit"),action:this.onOpenProject}];setDebuginfo=()=>{const e=ee.instance.renderer.webglRenderer.getContext(),n=e.getExtension("WEBGL_debug_renderer_info");n&&(e.getParameter(n.UNMASKED_VENDOR_WEBGL),e.getParameter(n.UNMASKED_RENDERER_WEBGL)),H.instance.removeListener(Y.RENDERER_INITIALIZED.toString(),this.setDebuginfo)};showDialog=(e,n={})=>{this.setState({DialogComponent:e,dialogProps:n})};hideDialog=()=>{this.setState({DialogComponent:null,dialogProps:{}})};dialogContext={showDialog:this.showDialog,hideDialog:this.hideDialog};onEditorError=e=>{if(e.aborted){this.hideDialog();return}console.error(e),this.showDialog($t,{title:e.title||this.t("editor:error"),message:e.message||this.t("editor:errorMsg"),error:e})};onProjectLoaded=()=>{this.updateModifiedState()};updateSetting(e,n){const r=Object.assign(this.state.settingsContext.settings,{[e]:n});localStorage.setItem("editor-settings",JSON.stringify(r)),He.instance.settings=r,H.instance.emitEvent(Y.SETTINGS_CHANGED),this.setState({settingsContext:{...this.state.settingsContext,settings:r}})}createProject=async()=>{const{parentSceneId:e}=this.state;this.showDialog(Ze,{title:this.t("editor:generateScreenshot"),message:this.t("editor:generateScreenshotMsg")}),await new Promise(s=>setTimeout(s,5));const n=await ee.instance.takeScreenshot(512,320),r=await new Promise(s=>{this.showDialog(Uy,{thumbnailUrl:URL.createObjectURL(n),initialName:ee.instance.scene.name,onConfirm:s,onCancel:s})});if(!r)return this.hideDialog(),null;const i=new AbortController;this.showDialog(Ze,{title:this.t("editor:saving"),message:this.t("editor:savingMsg"),cancelable:!0,onCancel:()=>{i.abort(),this.hideDialog()}}),H.instance.executeCommand(Re.MODIFY_PROPERTY,ee.instance.scene,{properties:{name:r.name}}),ee.instance.scene.setMetadata({name:r.name});const o=await zf(ee.instance.scene,e,n,i.signal,this.showDialog,this.hideDialog);ee.instance.sceneModified=!1,globalThis.currentProjectID=o.project_id;const a=this.state.pathParams;return a.set("projectId",o.project_id),this.updateModifiedState(()=>{this.setState({creatingProject:!0,project:o,pathParams:a},()=>{this.props.history.replace(`/editor/projects/${o.project_id}`),this.setState({creatingProject:!1})})}),o};onNewProject=async()=>{this.props.history.push("/editor/projects/new")};onOpenProject=()=>{this.props.history.push("/editor/projects")};onDuplicateProject=async()=>{const e=new AbortController;this.showDialog(Ze,{title:this.t("editor:duplicating"),message:this.t("editor:duplicatingMsg"),cancelable:!0,onCancel:()=>{e.abort(),this.hideDialog()}}),await new Promise(n=>setTimeout(n,5));try{const n=await this.createProject();ee.instance.sceneModified=!1,this.updateModifiedState(),this.hideDialog();const r=this.state.pathParams;r.set("projectId",n.project_id),this.setState({pathParams:r})}catch(n){console.error(n),this.showDialog($t,{title:this.t("editor:savingError"),message:n.message||this.t("editor:savingErrorMsg")})}};onExportProject=async()=>{const e=await new Promise(r=>{this.showDialog($y,{defaultOptions:Object.assign({},ee.DefaultExportOptions),onConfirm:r,onCancel:r})});if(!e){this.hideDialog();return}const n=new AbortController;this.showDialog(Ze,{title:this.t("editor:exporting"),message:this.t("editor:exportingMsg"),cancelable:!0,onCancel:()=>n.abort()});try{const{glbBlob:r}=await ee.instance.exportScene(e);this.hideDialog();const i=document.createElement("a");i.download=ee.instance.scene.name+".glb",i.href=URL.createObjectURL(r),document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(r){if(r.aborted){this.hideDialog();return}console.error(r),this.showDialog($t,{title:this.t("editor:exportingError"),message:r.message||this.t("editor:exportingErrorMsg"),error:r})}};onImportLegacyProject=async()=>{const e=await new Promise(r=>{this.showDialog(vd,{title:this.t("editor:importLegacy"),message:this.t("editor:importLegacyMsg"),onConfirm:()=>r(!0),onCancel:()=>r(!1)})});if(this.hideDialog(),!e)return;const n=document.createElement("input");n.type="file",n.accept=".world",n.style.display="none",n.onchange=()=>{if(n.files.length>0){const r=new FileReader;r.onload=()=>{const i=JSON.parse(r.result);i.metadata&&(delete i.metadata.sceneUrl,delete i.metadata.sceneId),this.importProject(i)},r.readAsText(n.files[0])}},n.click()};onExportLegacyProject=async()=>{const{project:e}=this.state,n=await ee.instance.scene.serialize(e.project_id);n.metadata&&(delete n.metadata.sceneUrl,delete n.metadata.sceneId);const r=JSON.stringify(n),i=new Blob([r]),o=document.createElement("a"),a=ee.instance.scene.name.toLowerCase().replace(/\s+/g,"-");o.download=a+".world",o.href=URL.createObjectURL(i),document.body.appendChild(o),o.click(),document.body.removeChild(o)};onSaveProject=async()=>{const e=new AbortController;this.showDialog(Ze,{title:this.t("editor:saving"),message:this.t("editor:savingMsg"),cancelable:!0,onCancel:()=>{e.abort(),this.hideDialog()}}),await new Promise(n=>setTimeout(n,5));try{const{project:n}=this.state;if(n){const r=await hs(n.project_id,e.signal);this.setState({project:r});const i=this.state.pathParams;i.set("projectId",r.project_id),this.setState({pathParams:i})}else await this.createProject();ee.instance.sceneModified=!1,this.updateModifiedState(),this.hideDialog()}catch(n){console.error(n),this.showDialog($t,{title:this.t("editor:savingError"),message:n.message||this.t("editor:savingErrorMsg")})}};onPublishProject=async()=>{try{let e=this.state.project;if(e||(e=await this.createProject()),!e||(e=await Gw(e,this.showDialog,this.hideDialog),!e))return;ee.instance.sceneModified=!1,this.updateModifiedState(),this.setState({project:e})}catch(e){if(e.abortedsettingsContext){this.hideDialog();return}console.error(e),this.showDialog($t,{title:this.t("editor:publishingError"),message:e.message||this.t("editor:publishingErrorMsg"),error:e})}};getSceneId(){const{project:e}=this.state;return e&&e.scene&&e.scene.scene_id||ee.instance.scene&&ee.instance.scene.metadata&&ee.instance.scene.metadata.sceneId}onOpenScene=()=>{const e=this.getSceneId();if(e){const n=Hd(e);window.open(n)}};render(){const{DialogComponent:e,dialogProps:n,settingsContext:r}=this.state,i=this.generateToolbarMenu();let o={dockbox:{mode:"horizontal",children:[{mode:"vertical",size:8,children:[{tabs:[{id:"viewPanel",title:"Viewport",content:p.createElement("div",null)}],size:1}]},{mode:"vertical",size:2,children:[{tabs:[{id:"hierarchyPanel",title:p.createElement($a,null,p.createElement(Ka,{as:fl,size:12}),p.createElement(Va,null,"Hierarchy")),content:p.createElement(R0,null)}]},{tabs:[{id:"propertiesPanel",title:p.createElement($a,null,p.createElement(Ka,{as:pl,size:12}),p.createElement(Va,null,"Properties")),content:p.createElement(V0,null)},{id:"assetsPanel",title:"Elements",content:p.createElement(Bf,null)},{id:"fileBrowserPanel",title:p.createElement($a,null,p.createElement(Ka,{as:tl,size:12}),p.createElement(Va,null,"File Browser")),content:p.createElement(Kw,null)}]}]}]}};return p.createElement(qw,{id:"editor-container"},p.createElement(By,{value:r},p.createElement(Ff,{value:this.dialogContext},p.createElement(Sh,{backend:ev},p.createElement(Yy,null),i&&p.createElement(xw,{menu:i}),p.createElement(Yw,null,p.createElement(Dw,null),p.createElement(Xw,null,p.createElement(Un,{defaultLayout:o,style:{pointerEvents:"none",position:"absolute",left:5,top:55,right:5,bottom:5}}))),p.createElement(Ly,{ariaHideApp:!1,isOpen:!!e,onRequestClose:this.hideDialog,shouldCloseOnOverlayClick:!1,className:"Modal",overlayClassName:"Overlay"},e&&p.createElement(e,{onConfirm:this.hideDialog,onCancel:this.hideDialog,...n}))))))}}var Sx=Tn()(Jd(Jw));export{Sx as default,Hd as getSceneUrl,Gw as publishProject};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRWRpdG9yQ29udGFpbmVyLjU2YmFlYmJkLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vaW50ZXJmYWNlcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kbmQtY29yZS9kaXN0L2VzbS9hY3Rpb25zL2RyYWdEcm9wL3R5cGVzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL2FjdGlvbnMvZHJhZ0Ryb3AvbG9jYWwvc2V0Q2xpZW50T2Zmc2V0LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL3V0aWxzL2pzX3V0aWxzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL2FjdGlvbnMvZHJhZ0Ryb3AvYmVnaW5EcmFnLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL2FjdGlvbnMvZHJhZ0Ryb3AvcHVibGlzaERyYWdTb3VyY2UuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vdXRpbHMvbWF0Y2hlc1R5cGUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vYWN0aW9ucy9kcmFnRHJvcC9ob3Zlci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kbmQtY29yZS9kaXN0L2VzbS9hY3Rpb25zL2RyYWdEcm9wL2Ryb3AuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vYWN0aW9ucy9kcmFnRHJvcC9lbmREcmFnLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL2FjdGlvbnMvZHJhZ0Ryb3AvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vY2xhc3Nlcy9EcmFnRHJvcE1hbmFnZXJJbXBsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL3V0aWxzL2VxdWFsaXR5LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL3JlZHVjZXJzL2RyYWdPZmZzZXQuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vYWN0aW9ucy9yZWdpc3RyeS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kbmQtY29yZS9kaXN0L2VzbS9yZWR1Y2Vycy9kcmFnT3BlcmF0aW9uLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL3JlZHVjZXJzL3JlZkNvdW50LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL3V0aWxzL2RpcnRpbmVzcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kbmQtY29yZS9kaXN0L2VzbS9yZWR1Y2Vycy9kaXJ0eUhhbmRsZXJJZHMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vcmVkdWNlcnMvc3RhdGVJZC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kbmQtY29yZS9kaXN0L2VzbS9yZWR1Y2Vycy9pbmRleC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kbmQtY29yZS9kaXN0L2VzbS91dGlscy9jb29yZHMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vY2xhc3Nlcy9EcmFnRHJvcE1vbml0b3JJbXBsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL3V0aWxzL2dldE5leHRVbmlxdWVJZC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kbmQtY29yZS9kaXN0L2VzbS9jb250cmFjdHMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHJlYWN0LWRuZC9hc2FwL2Rpc3QvZXNtL2Jyb3dzZXIvcmF3LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByZWFjdC1kbmQvYXNhcC9kaXN0L2VzbS9icm93c2VyL2FzYXAuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vY2xhc3Nlcy9IYW5kbGVyUmVnaXN0cnlJbXBsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL2NyZWF0ZURyYWdEcm9wTWFuYWdlci5qcyIsIi4uLy4uLy4uL2VkaXRvci9ub2RlX21vZHVsZXMvcmVhY3QtZG5kL2Rpc3QvZXNtL2NvcmUvRG5kUHJvdmlkZXIuanMiLCIuLi8uLi8uLi9lZGl0b3Ivbm9kZV9tb2R1bGVzL3JlYWN0LWRuZC9kaXN0L2VzbS9ob29rcy91c2VEcmFnTGF5ZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZG5kLWh0bWw1LWJhY2tlbmQvZGlzdC9lc20vdXRpbHMvanNfdXRpbHMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZG5kLWh0bWw1LWJhY2tlbmQvZGlzdC9lc20vRW50ZXJMZWF2ZUNvdW50ZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZG5kLWh0bWw1LWJhY2tlbmQvZGlzdC9lc20vQnJvd3NlckRldGVjdG9yLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRuZC1odG1sNS1iYWNrZW5kL2Rpc3QvZXNtL01vbm90b25pY0ludGVycG9sYW50LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRuZC1odG1sNS1iYWNrZW5kL2Rpc3QvZXNtL09mZnNldFV0aWxzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRuZC1odG1sNS1iYWNrZW5kL2Rpc3QvZXNtL05hdGl2ZURyYWdTb3VyY2VzL2dldERhdGFGcm9tRGF0YVRyYW5zZmVyLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRuZC1odG1sNS1iYWNrZW5kL2Rpc3QvZXNtL05hdGl2ZURyYWdTb3VyY2VzL25hdGl2ZVR5cGVzQ29uZmlnLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRuZC1odG1sNS1iYWNrZW5kL2Rpc3QvZXNtL05hdGl2ZURyYWdTb3VyY2VzL05hdGl2ZURyYWdTb3VyY2UuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZG5kLWh0bWw1LWJhY2tlbmQvZGlzdC9lc20vTmF0aXZlRHJhZ1NvdXJjZXMvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZG5kLWh0bWw1LWJhY2tlbmQvZGlzdC9lc20vT3B0aW9uc1JlYWRlci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1kbmQtaHRtbDUtYmFja2VuZC9kaXN0L2VzbS9IVE1MNUJhY2tlbmRJbXBsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRuZC1odG1sNS1iYWNrZW5kL2Rpc3QvZXNtL2luZGV4LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BzdHlsZWQtaWNvbnMvZmEtc29saWQvQXJjaGl2ZS9BcmNoaXZlLmVzbS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ac3R5bGVkLWljb25zL2ZhLXNvbGlkL0Fycm93c0FsdC9BcnJvd3NBbHQuZXNtLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BzdHlsZWQtaWNvbnMvZmEtc29saWQvQXJyb3dzQWx0Vi9BcnJvd3NBbHRWLmVzbS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ac3R5bGVkLWljb25zL2ZhLXNvbGlkL0JhcnMvQmFycy5lc20uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9DYXJldERvd24vQ2FyZXREb3duLmVzbS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ac3R5bGVkLWljb25zL2ZhLXNvbGlkL0NhcmV0UmlnaHQvQ2FyZXRSaWdodC5lc20uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9DaGFydEFyZWEvQ2hhcnRBcmVhLmVzbS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ac3R5bGVkLWljb25zL2ZhLXNvbGlkL0V4Y2xhbWF0aW9uVHJpYW5nbGUvRXhjbGFtYXRpb25UcmlhbmdsZS5lc20uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9NYWduZXQvTWFnbmV0LmVzbS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ac3R5bGVkLWljb25zL2ZhLXNvbGlkL1BhdXNlL1BhdXNlLmVzbS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ac3R5bGVkLWljb25zL2ZhLXNvbGlkL1BsYXkvUGxheS5lc20uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9Qcm9qZWN0RGlhZ3JhbS9Qcm9qZWN0RGlhZ3JhbS5lc20uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9TbGlkZXJzSC9TbGlkZXJzSC5lc20uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9TeW5jQWx0L1N5bmNBbHQuZXNtLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRvY2svZXMvRG9ja0RhdGEuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdXRpbC9lcy9DaGlsZHJlbi90b0FycmF5LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXV0aWwvZXMvaXNNb2JpbGUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdXRpbC9lcy9ob29rcy91c2VNZXJnZWRTdGF0ZS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy11dGlsL2VzL3JhZi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy11dGlsL2VzL0RvbS9maW5kRE9NTm9kZS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy11dGlsL2VzL3JlZi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yZXNpemUtb2JzZXJ2ZXItcG9seWZpbGwvZGlzdC9SZXNpemVPYnNlcnZlci5lcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1yZXNpemUtb2JzZXJ2ZXIvZXMvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9lcy9ob29rcy91c2VSYWYuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9lcy9UYWJOYXZMaXN0L1RhYk5vZGUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9lcy9ob29rcy91c2VPZmZzZXRzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRhYnMvZXMvaG9va3MvdXNlVmlzaWJsZVJhbmdlLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLW92ZXJmbG93L2VzL0l0ZW0uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtb3ZlcmZsb3cvZXMvaG9va3MvdXNlQmF0Y2hGcmFtZVN0YXRlLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLW92ZXJmbG93L2VzL1Jhd0l0ZW0uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtb3ZlcmZsb3cvZXMvT3ZlcmZsb3cuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdXRpbC9lcy9vbWl0LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXV0aWwvZXMvaG9va3MvdXNlTWVtby5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL2NvbnRleHQvTWVudUNvbnRleHQuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9ob29rcy91c2VBY3RpdmUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy91dGlscy93YXJuVXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL0ljb24uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9ob29rcy91c2VEaXJlY3Rpb25TdHlsZS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL2NvbnRleHQvUGF0aENvbnRleHQuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9jb250ZXh0L0lkQ29udGV4dC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL01lbnVJdGVtLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRhYnMvbm9kZV9tb2R1bGVzL3JjLW1lbnUvZXMvdXRpbHMvbm9kZVV0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9ob29rcy91c2VNZW1vQ2FsbGJhY2suanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9TdWJNZW51L1N1Yk1lbnVMaXN0LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXV0aWwvZXMvRG9tL2NvbnRhaW5zLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXV0aWwvZXMvRG9tL2NhblVzZURvbS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy11dGlsL2VzL1BvcnRhbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10cmlnZ2VyL2VzL3V0aWxzL2FsaWduVXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1tb3Rpb24vZXMvdXRpbC9tb3Rpb24uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbW90aW9uL2VzL2ludGVyZmFjZS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1tb3Rpb24vZXMvaG9va3MvdXNlU3RhdGUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbW90aW9uL2VzL2hvb2tzL3VzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbW90aW9uL2VzL2hvb2tzL3VzZU5leHRGcmFtZS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1tb3Rpb24vZXMvaG9va3MvdXNlU3RlcFF1ZXVlLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLW1vdGlvbi9lcy9ob29rcy91c2VEb21Nb3Rpb25FdmVudHMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbW90aW9uL2VzL2hvb2tzL3VzZVN0YXR1cy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1tb3Rpb24vZXMvRG9tV3JhcHBlci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1tb3Rpb24vZXMvQ1NTTW90aW9uLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRyaWdnZXIvZXMvdXRpbHMvbGVnYWN5VXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10cmlnZ2VyL2VzL1BvcHVwL01hc2suanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdXRpbC9lcy9Eb20vaXNWaXNpYmxlLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RvbS1hbGlnbi9kaXN0LXdlYi9pbmRleC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gvaXNFcXVhbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1hbGlnbi9lcy91dGlsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWFsaWduL2VzL2hvb2tzL3VzZUJ1ZmZlci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1hbGlnbi9lcy9BbGlnbi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10cmlnZ2VyL2VzL1BvcHVwL3VzZVZpc2libGVTdGF0dXMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdHJpZ2dlci9lcy9Qb3B1cC91c2VTdHJldGNoU3R5bGUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdHJpZ2dlci9lcy9Qb3B1cC9Qb3B1cElubmVyLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRyaWdnZXIvZXMvUG9wdXAvTW9iaWxlUG9wdXBJbm5lci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10cmlnZ2VyL2VzL1BvcHVwL2luZGV4LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRyaWdnZXIvZXMvY29udGV4dC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10cmlnZ2VyL2VzL2luZGV4LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRhYnMvbm9kZV9tb2R1bGVzL3JjLW1lbnUvZXMvcGxhY2VtZW50cy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL3V0aWxzL21vdGlvblV0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9TdWJNZW51L1BvcHVwVHJpZ2dlci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL1N1Yk1lbnUvSW5saW5lU3ViTWVudUxpc3QuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9TdWJNZW51L2luZGV4LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXV0aWwvZXMvRG9tL2ZvY3VzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRhYnMvbm9kZV9tb2R1bGVzL3JjLW1lbnUvZXMvaG9va3MvdXNlQWNjZXNzaWJpbGl0eS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL2hvb2tzL3VzZVVVSUQuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy91dGlscy90aW1lVXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL2hvb2tzL3VzZUtleVJlY29yZHMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9NZW51LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRhYnMvbm9kZV9tb2R1bGVzL3JjLW1lbnUvZXMvTWVudUl0ZW1Hcm91cC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL0RpdmlkZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9pbmRleC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1kcm9wZG93bi9lcy9wbGFjZW1lbnRzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRyb3Bkb3duL2VzL0Ryb3Bkb3duLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRhYnMvZXMvVGFiTmF2TGlzdC9BZGRCdXR0b24uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9lcy9UYWJOYXZMaXN0L09wZXJhdGlvbk5vZGUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9lcy9UYWJDb250ZXh0LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRhYnMvZXMvaG9va3MvdXNlVG91Y2hNb3ZlLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRhYnMvZXMvaG9va3MvdXNlUmVmcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL2VzL2hvb2tzL3VzZVN5bmNTdGF0ZS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL2VzL1RhYk5hdkxpc3QvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9lcy9UYWJQYW5lbExpc3QvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9lcy9UYWJQYW5lbExpc3QvVGFiUGFuZS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL2VzL1RhYnMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvbWluaS1zdG9yZS9lc20vUHJvdmlkZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvbWluaS1zdG9yZS9lc20vY29ubmVjdC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9taW5pLXN0b3JlL2VzbS9jcmVhdGUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdXRpbC9lcy9jcmVhdGVDaGFpbmVkRnVuY3Rpb24uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy91dGlscy9pc01vYmlsZS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9wbGFjZW1lbnRzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLW1lbnUvZXMvU3ViTWVudS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL0RPTVdyYXAuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9TdWJQb3B1cE1lbnUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy91dGlscy9sZWdhY3lVdGlsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLW1lbnUvZXMvTWVudS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL01lbnVJdGVtLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRvY2svZXMvZHJhZ2Ryb3AvRHJhZ01hbmFnZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtZG9jay9lcy9kcmFnZHJvcC9HZXN0dXJlTWFuYWdlci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1kb2NrL2VzL2RyYWdkcm9wL0RyYWdEcm9wRGl2LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRvY2svZXMvRG9ja1RhYkJhci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1kb2NrL2VzL0RvY2tUYWJQYW5lLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRvY2svZXMvQWxnb3JpdGhtLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Jvd3Nlci9zcmMvY29uc3RhbnRzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Jvd3Nlci9zcmMvdXRpbHMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvYm93c2VyL3NyYy9wYXJzZXItYnJvd3NlcnMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvYm93c2VyL3NyYy9wYXJzZXItb3MuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvYm93c2VyL3NyYy9wYXJzZXItcGxhdGZvcm1zLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Jvd3Nlci9zcmMvcGFyc2VyLWVuZ2luZXMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvYm93c2VyL3NyYy9wYXJzZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvYm93c2VyL3NyYy9ib3dzZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbmV3LXdpbmRvdy9lcy9Ccm93c2VyUG9wdXBXaW5kb3cuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbmV3LXdpbmRvdy9lcy9pbmRleC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1kb2NrL2VzL0RvY2tEcm9wTGF5ZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtZG9jay9lcy9Eb2NrRHJvcEVkZ2UuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtZG9jay9lcy9Eb2NrUGFuZWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbmV3LXdpbmRvdy9saWIvQnJvd3NlclBvcHVwV2luZG93LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLW5ldy13aW5kb3cvbGliL1NjcmVlblBvc2l0aW9uLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRvY2svZXMvV2luZG93UGFuZWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtZG9jay9lcy9XaW5kb3dCb3guanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtZG9jay9lcy9Eb2NrVGFicy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1kb2NrL2VzL0RpdmlkZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtZG9jay9lcy9Eb2NrQm94LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRvY2svZXMvRmxvYXRCb3guanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtZG9jay9lcy9TZXJpYWxpemVyLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRvY2svZXMvTWF4Qm94LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRvY2svZXMvRG9ja0xheW91dC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1kb2NrL2VzL0RpdmlkZXJCb3guanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtbW9kYWwvbGliL2hlbHBlcnMvdGFiYmFibGUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtbW9kYWwvbGliL2hlbHBlcnMvZm9jdXNNYW5hZ2VyLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LW1vZGFsL2xpYi9oZWxwZXJzL3Njb3BlVGFiLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3dhcm5pbmcvd2FybmluZy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9leGVudi9pbmRleC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1tb2RhbC9saWIvaGVscGVycy9zYWZlSFRNTEVsZW1lbnQuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtbW9kYWwvbGliL2hlbHBlcnMvYXJpYUFwcEhpZGVyLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LW1vZGFsL2xpYi9oZWxwZXJzL2NsYXNzTGlzdC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1tb2RhbC9saWIvaGVscGVycy9wb3J0YWxPcGVuSW5zdGFuY2VzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LW1vZGFsL2xpYi9oZWxwZXJzL2JvZHlUcmFwLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LW1vZGFsL2xpYi9jb21wb25lbnRzL01vZGFsUG9ydGFsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWxpZmVjeWNsZXMtY29tcGF0L3JlYWN0LWxpZmVjeWNsZXMtY29tcGF0LmVzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LW1vZGFsL2xpYi9jb21wb25lbnRzL01vZGFsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LW1vZGFsL2xpYi9pbmRleC5qcyIsIi4uLy4uLy4uL2VkaXRvci9zcmMvZnVuY3Rpb25zL2dldFNjZW5lLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9jb250ZXh0cy9TZXR0aW5nc0NvbnRleHQudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2RpYWxvZ3MvQ29uZmlybURpYWxvZy50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvaW5wdXRzL0Zvcm1GaWVsZC50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvZGlhbG9ncy9FeHBvcnRQcm9qZWN0RGlhbG9nLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9kaWFsb2dzL1ByZXZpZXdEaWFsb2cudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2RpYWxvZ3MvU2F2ZU5ld1Byb2plY3REaWFsb2cudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2RuZC9EcmFnTGF5ZXIudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL3Byb3BlcnRpZXMvRGVmYXVsdE5vZGVFZGl0b3IudHN4IiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXdpbmRvdy9kaXN0L2luZGV4LmVzbS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC12aXJ0dWFsaXplZC1hdXRvLXNpemVyL2Rpc3QvaW5kZXguZXNtLmpzIiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2RuZC9pbmRleC50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvaGllcmFyY2h5L05vZGVJc3N1ZXNJY29uLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9oaWVyYXJjaHkvSGllcmFyY2h5UGFuZWxDb250YWluZXIudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2xheW91dC9QYW5lbC50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvcHJvcGVydGllcy9UcmFuc2Zvcm1Qcm9wZXJ0eUdyb3VwLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9wcm9wZXJ0aWVzL05hbWVJbnB1dEdyb3VwLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9wcm9wZXJ0aWVzL1Byb3BlcnRpZXNQYW5lbENvbnRhaW5lci50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvdG9vbGJhci9Ub29sQnV0dG9uLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9tYWluTWVudS9pbmRleC50c3giLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHN0eWxlZC1pY29ucy9ib3hpY29ucy1yZWd1bGFyL0dyaWQvR3JpZC5lc20uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHN0eWxlZC1pY29ucy9ib3hpY29ucy1yZWd1bGFyL0NhcmV0TGVmdC9DYXJldExlZnQuZXNtLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BzdHlsZWQtaWNvbnMvYm94aWNvbnMtcmVndWxhci9DYXJldFJpZ2h0L0NhcmV0UmlnaHQuZXNtLmpzIiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2lucHV0cy9OdW1lcmljU3RlcHBlcklucHV0LnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy90b29sYmFyL3Rvb2xzL0dyaWRUb29sLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy90b29sYmFyL3Rvb2xzL1RyYW5zZm9ybVRvb2wudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL3Rvb2xiYXIvdG9vbHMvVHJhbnNmb3JtUGl2b3RUb29sLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy90b29sYmFyL3Rvb2xzL1RyYW5zZm9ybVNwYWNlVG9vbC50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvdG9vbGJhci90b29scy9UcmFuc2Zvcm1TbmFwVG9vbC50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvdG9vbGJhci90b29scy9QbGF5TW9kZVRvb2wudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL3Rvb2xiYXIvdG9vbHMvU3RhdHNUb29sLnRzeCIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ac3R5bGVkLWljb25zL2JveGljb25zLXJlZ3VsYXIvU3VuL1N1bi5lc20uanMiLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvdG9vbGJhci90b29scy9SZW5kZXJNb2RlVG9vbC50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvdG9vbGJhci9Ub29sQmFyLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy90aGVtZS50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvdmlld3BvcnQvVmlld3BvcnRQYW5lbENvbnRhaW5lci50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvZGlhbG9ncy9QZXJmb3JtYW5jZUNoZWNrRGlhbG9nLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9kaWFsb2dzL1B1Ymxpc2hEaWFsb2cudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2RpYWxvZ3MvUHVibGlzaGVkU2NlbmVEaWFsb2cudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9mdW5jdGlvbnMvZ2V0VXJsRnJvbUlkLnRzeCIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvc2NlbmUvZnVuY3Rpb25zL2dldENvbnRlbnRUeXBlLnRzIiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2Fzc2V0cy9GaWxlQnJvd3NlckNvbnRlbnRQYW5lbC50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvYXNzZXRzL0Fzc2V0UHJldmlld1BhbmVscy9BdWRpb1ByZXZpZXdQYW5lbC50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvYXNzZXRzL0Fzc2V0UHJldmlld1BhbmVscy9JbWFnZVByZXZpZXdQYW5lbC50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvYXNzZXRzL0Fzc2V0UHJldmlld1BhbmVscy9Nb2RlbFByZXZpZXdQYW5lbC50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvYXNzZXRzL0Fzc2V0UHJldmlld1BhbmVscy9QcmV2aWV3VW5hdmFpbGFibGUudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2Fzc2V0cy9Bc3NldFByZXZpZXdQYW5lbHMvVmVkaW9QcmV2aWV3UGFuZWwudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2Fzc2V0cy9Bc3NldHNQcmV2aWV3UGFuZWwudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2Fzc2V0cy9GaWxlQnJvd3NlclBhbmVsLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9jb25maWdzLnRzIiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL0VkaXRvckNvbnRhaW5lci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHZhciBIYW5kbGVyUm9sZTtcblxuKGZ1bmN0aW9uIChIYW5kbGVyUm9sZSkge1xuICBIYW5kbGVyUm9sZVtcIlNPVVJDRVwiXSA9IFwiU09VUkNFXCI7XG4gIEhhbmRsZXJSb2xlW1wiVEFSR0VUXCJdID0gXCJUQVJHRVRcIjtcbn0pKEhhbmRsZXJSb2xlIHx8IChIYW5kbGVyUm9sZSA9IHt9KSk7IiwiZXhwb3J0IHZhciBJTklUX0NPT1JEUyA9ICdkbmQtY29yZS9JTklUX0NPT1JEUyc7XG5leHBvcnQgdmFyIEJFR0lOX0RSQUcgPSAnZG5kLWNvcmUvQkVHSU5fRFJBRyc7XG5leHBvcnQgdmFyIFBVQkxJU0hfRFJBR19TT1VSQ0UgPSAnZG5kLWNvcmUvUFVCTElTSF9EUkFHX1NPVVJDRSc7XG5leHBvcnQgdmFyIEhPVkVSID0gJ2RuZC1jb3JlL0hPVkVSJztcbmV4cG9ydCB2YXIgRFJPUCA9ICdkbmQtY29yZS9EUk9QJztcbmV4cG9ydCB2YXIgRU5EX0RSQUcgPSAnZG5kLWNvcmUvRU5EX0RSQUcnOyIsImltcG9ydCB7IElOSVRfQ09PUkRTIH0gZnJvbSAnLi4vdHlwZXMnO1xuZXhwb3J0IGZ1bmN0aW9uIHNldENsaWVudE9mZnNldChjbGllbnRPZmZzZXQsIHNvdXJjZUNsaWVudE9mZnNldCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IElOSVRfQ09PUkRTLFxuICAgIHBheWxvYWQ6IHtcbiAgICAgIHNvdXJjZUNsaWVudE9mZnNldDogc291cmNlQ2xpZW50T2Zmc2V0IHx8IG51bGwsXG4gICAgICBjbGllbnRPZmZzZXQ6IGNsaWVudE9mZnNldCB8fCBudWxsXG4gICAgfVxuICB9O1xufSIsImZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuLy8gY2hlYXAgbG9kYXNoIHJlcGxhY2VtZW50c1xuXG4vKipcbiAqIGRyb3AtaW4gcmVwbGFjZW1lbnQgZm9yIF8uZ2V0XG4gKiBAcGFyYW0gb2JqXG4gKiBAcGFyYW0gcGF0aFxuICogQHBhcmFtIGRlZmF1bHRWYWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0KG9iaiwgcGF0aCwgZGVmYXVsdFZhbHVlKSB7XG4gIHJldHVybiBwYXRoLnNwbGl0KCcuJykucmVkdWNlKGZ1bmN0aW9uIChhLCBjKSB7XG4gICAgcmV0dXJuIGEgJiYgYVtjXSA/IGFbY10gOiBkZWZhdWx0VmFsdWUgfHwgbnVsbDtcbiAgfSwgb2JqKTtcbn1cbi8qKlxuICogZHJvcC1pbiByZXBsYWNlbWVudCBmb3IgXy53aXRob3V0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhvdXQoaXRlbXMsIGl0ZW0pIHtcbiAgcmV0dXJuIGl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaSkge1xuICAgIHJldHVybiBpICE9PSBpdGVtO1xuICB9KTtcbn1cbi8qKlxuICogZHJvcC1pbiByZXBsYWNlbWVudCBmb3IgXy5pc1N0cmluZ1xuICogQHBhcmFtIGlucHV0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3RyaW5nKGlucHV0KSB7XG4gIHJldHVybiB0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnO1xufVxuLyoqXG4gKiBkcm9wLWluIHJlcGxhY2VtZW50IGZvciBfLmlzU3RyaW5nXG4gKiBAcGFyYW0gaW5wdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QoaW5wdXQpIHtcbiAgcmV0dXJuIF90eXBlb2YoaW5wdXQpID09PSAnb2JqZWN0Jztcbn1cbi8qKlxuICogcmVwYWxjZW1lbnQgZm9yIF8ueG9yXG4gKiBAcGFyYW0gaXRlbXNBXG4gKiBAcGFyYW0gaXRlbXNCXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHhvcihpdGVtc0EsIGl0ZW1zQikge1xuICB2YXIgbWFwID0gbmV3IE1hcCgpO1xuXG4gIHZhciBpbnNlcnRJdGVtID0gZnVuY3Rpb24gaW5zZXJ0SXRlbShpdGVtKSB7XG4gICAgbWFwLnNldChpdGVtLCBtYXAuaGFzKGl0ZW0pID8gbWFwLmdldChpdGVtKSArIDEgOiAxKTtcbiAgfTtcblxuICBpdGVtc0EuZm9yRWFjaChpbnNlcnRJdGVtKTtcbiAgaXRlbXNCLmZvckVhY2goaW5zZXJ0SXRlbSk7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgbWFwLmZvckVhY2goZnVuY3Rpb24gKGNvdW50LCBrZXkpIHtcbiAgICBpZiAoY291bnQgPT09IDEpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuICogcmVwbGFjZW1lbnQgZm9yIF8uaW50ZXJzZWN0aW9uXG4gKiBAcGFyYW0gaXRlbXNBXG4gKiBAcGFyYW0gaXRlbXNCXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdGlvbihpdGVtc0EsIGl0ZW1zQikge1xuICByZXR1cm4gaXRlbXNBLmZpbHRlcihmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiBpdGVtc0IuaW5kZXhPZih0KSA+IC0xO1xuICB9KTtcbn0iLCJpbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tICdAcmVhY3QtZG5kL2ludmFyaWFudCc7XG5pbXBvcnQgeyBzZXRDbGllbnRPZmZzZXQgfSBmcm9tICcuL2xvY2FsL3NldENsaWVudE9mZnNldCc7XG5pbXBvcnQgeyBpc09iamVjdCB9IGZyb20gJy4uLy4uL3V0aWxzL2pzX3V0aWxzJztcbmltcG9ydCB7IEJFR0lOX0RSQUcsIElOSVRfQ09PUkRTIH0gZnJvbSAnLi90eXBlcyc7XG52YXIgUmVzZXRDb29yZGluYXRlc0FjdGlvbiA9IHtcbiAgdHlwZTogSU5JVF9DT09SRFMsXG4gIHBheWxvYWQ6IHtcbiAgICBjbGllbnRPZmZzZXQ6IG51bGwsXG4gICAgc291cmNlQ2xpZW50T2Zmc2V0OiBudWxsXG4gIH1cbn07XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQmVnaW5EcmFnKG1hbmFnZXIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGJlZ2luRHJhZygpIHtcbiAgICB2YXIgc291cmNlSWRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge1xuICAgICAgcHVibGlzaFNvdXJjZTogdHJ1ZVxuICAgIH07XG4gICAgdmFyIF9vcHRpb25zJHB1Ymxpc2hTb3VyYyA9IG9wdGlvbnMucHVibGlzaFNvdXJjZSxcbiAgICAgICAgcHVibGlzaFNvdXJjZSA9IF9vcHRpb25zJHB1Ymxpc2hTb3VyYyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJHB1Ymxpc2hTb3VyYyxcbiAgICAgICAgY2xpZW50T2Zmc2V0ID0gb3B0aW9ucy5jbGllbnRPZmZzZXQsXG4gICAgICAgIGdldFNvdXJjZUNsaWVudE9mZnNldCA9IG9wdGlvbnMuZ2V0U291cmNlQ2xpZW50T2Zmc2V0O1xuICAgIHZhciBtb25pdG9yID0gbWFuYWdlci5nZXRNb25pdG9yKCk7XG4gICAgdmFyIHJlZ2lzdHJ5ID0gbWFuYWdlci5nZXRSZWdpc3RyeSgpOyAvLyBJbml0aWFsaXplIHRoZSBjb29yZGluYXRlcyB1c2luZyB0aGUgY2xpZW50IG9mZnNldFxuXG4gICAgbWFuYWdlci5kaXNwYXRjaChzZXRDbGllbnRPZmZzZXQoY2xpZW50T2Zmc2V0KSk7XG4gICAgdmVyaWZ5SW52YXJpYW50cyhzb3VyY2VJZHMsIG1vbml0b3IsIHJlZ2lzdHJ5KTsgLy8gR2V0IHRoZSBkcmFnZ2FibGUgc291cmNlXG5cbiAgICB2YXIgc291cmNlSWQgPSBnZXREcmFnZ2FibGVTb3VyY2Uoc291cmNlSWRzLCBtb25pdG9yKTtcblxuICAgIGlmIChzb3VyY2VJZCA9PT0gbnVsbCkge1xuICAgICAgbWFuYWdlci5kaXNwYXRjaChSZXNldENvb3JkaW5hdGVzQWN0aW9uKTtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIEdldCB0aGUgc291cmNlIGNsaWVudCBvZmZzZXRcblxuXG4gICAgdmFyIHNvdXJjZUNsaWVudE9mZnNldCA9IG51bGw7XG5cbiAgICBpZiAoY2xpZW50T2Zmc2V0KSB7XG4gICAgICBpZiAoIWdldFNvdXJjZUNsaWVudE9mZnNldCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2dldFNvdXJjZUNsaWVudE9mZnNldCBtdXN0IGJlIGRlZmluZWQnKTtcbiAgICAgIH1cblxuICAgICAgdmVyaWZ5R2V0U291cmNlQ2xpZW50T2Zmc2V0SXNGdW5jdGlvbihnZXRTb3VyY2VDbGllbnRPZmZzZXQpO1xuICAgICAgc291cmNlQ2xpZW50T2Zmc2V0ID0gZ2V0U291cmNlQ2xpZW50T2Zmc2V0KHNvdXJjZUlkKTtcbiAgICB9IC8vIEluaXRpYWxpemUgdGhlIGZ1bGwgY29vcmRpbmF0ZXNcblxuXG4gICAgbWFuYWdlci5kaXNwYXRjaChzZXRDbGllbnRPZmZzZXQoY2xpZW50T2Zmc2V0LCBzb3VyY2VDbGllbnRPZmZzZXQpKTtcbiAgICB2YXIgc291cmNlID0gcmVnaXN0cnkuZ2V0U291cmNlKHNvdXJjZUlkKTtcbiAgICB2YXIgaXRlbSA9IHNvdXJjZS5iZWdpbkRyYWcobW9uaXRvciwgc291cmNlSWQpOyAvLyBJZiBzb3VyY2UuYmVnaW5EcmFnIHJldHVybnMgbnVsbCwgdGhpcyBpcyBhbiBpbmRpY2F0b3IgdG8gY2FuY2VsIHRoZSBkcmFnXG5cbiAgICBpZiAoaXRlbSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHZlcmlmeUl0ZW1Jc09iamVjdChpdGVtKTtcbiAgICByZWdpc3RyeS5waW5Tb3VyY2Uoc291cmNlSWQpO1xuICAgIHZhciBpdGVtVHlwZSA9IHJlZ2lzdHJ5LmdldFNvdXJjZVR5cGUoc291cmNlSWQpO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBCRUdJTl9EUkFHLFxuICAgICAgcGF5bG9hZDoge1xuICAgICAgICBpdGVtVHlwZTogaXRlbVR5cGUsXG4gICAgICAgIGl0ZW06IGl0ZW0sXG4gICAgICAgIHNvdXJjZUlkOiBzb3VyY2VJZCxcbiAgICAgICAgY2xpZW50T2Zmc2V0OiBjbGllbnRPZmZzZXQgfHwgbnVsbCxcbiAgICAgICAgc291cmNlQ2xpZW50T2Zmc2V0OiBzb3VyY2VDbGllbnRPZmZzZXQgfHwgbnVsbCxcbiAgICAgICAgaXNTb3VyY2VQdWJsaWM6ICEhcHVibGlzaFNvdXJjZVxuICAgICAgfVxuICAgIH07XG4gIH07XG59XG5cbmZ1bmN0aW9uIHZlcmlmeUludmFyaWFudHMoc291cmNlSWRzLCBtb25pdG9yLCByZWdpc3RyeSkge1xuICBpbnZhcmlhbnQoIW1vbml0b3IuaXNEcmFnZ2luZygpLCAnQ2Fubm90IGNhbGwgYmVnaW5EcmFnIHdoaWxlIGRyYWdnaW5nLicpO1xuICBzb3VyY2VJZHMuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlSWQpIHtcbiAgICBpbnZhcmlhbnQocmVnaXN0cnkuZ2V0U291cmNlKHNvdXJjZUlkKSwgJ0V4cGVjdGVkIHNvdXJjZUlkcyB0byBiZSByZWdpc3RlcmVkLicpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gdmVyaWZ5R2V0U291cmNlQ2xpZW50T2Zmc2V0SXNGdW5jdGlvbihnZXRTb3VyY2VDbGllbnRPZmZzZXQpIHtcbiAgaW52YXJpYW50KHR5cGVvZiBnZXRTb3VyY2VDbGllbnRPZmZzZXQgPT09ICdmdW5jdGlvbicsICdXaGVuIGNsaWVudE9mZnNldCBpcyBwcm92aWRlZCwgZ2V0U291cmNlQ2xpZW50T2Zmc2V0IG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbn1cblxuZnVuY3Rpb24gdmVyaWZ5SXRlbUlzT2JqZWN0KGl0ZW0pIHtcbiAgaW52YXJpYW50KGlzT2JqZWN0KGl0ZW0pLCAnSXRlbSBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbn1cblxuZnVuY3Rpb24gZ2V0RHJhZ2dhYmxlU291cmNlKHNvdXJjZUlkcywgbW9uaXRvcikge1xuICB2YXIgc291cmNlSWQgPSBudWxsO1xuXG4gIGZvciAodmFyIGkgPSBzb3VyY2VJZHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBpZiAobW9uaXRvci5jYW5EcmFnU291cmNlKHNvdXJjZUlkc1tpXSkpIHtcbiAgICAgIHNvdXJjZUlkID0gc291cmNlSWRzW2ldO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHNvdXJjZUlkO1xufSIsImltcG9ydCB7IFBVQkxJU0hfRFJBR19TT1VSQ0UgfSBmcm9tICcuL3R5cGVzJztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQdWJsaXNoRHJhZ1NvdXJjZShtYW5hZ2VyKSB7XG4gIHJldHVybiBmdW5jdGlvbiBwdWJsaXNoRHJhZ1NvdXJjZSgpIHtcbiAgICB2YXIgbW9uaXRvciA9IG1hbmFnZXIuZ2V0TW9uaXRvcigpO1xuXG4gICAgaWYgKG1vbml0b3IuaXNEcmFnZ2luZygpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQVUJMSVNIX0RSQUdfU09VUkNFXG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn0iLCJleHBvcnQgZnVuY3Rpb24gbWF0Y2hlc1R5cGUodGFyZ2V0VHlwZSwgZHJhZ2dlZEl0ZW1UeXBlKSB7XG4gIGlmIChkcmFnZ2VkSXRlbVR5cGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gdGFyZ2V0VHlwZSA9PT0gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBBcnJheS5pc0FycmF5KHRhcmdldFR5cGUpID8gdGFyZ2V0VHlwZS5zb21lKGZ1bmN0aW9uICh0KSB7XG4gICAgcmV0dXJuIHQgPT09IGRyYWdnZWRJdGVtVHlwZTtcbiAgfSkgOiB0YXJnZXRUeXBlID09PSBkcmFnZ2VkSXRlbVR5cGU7XG59IiwiaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAnQHJlYWN0LWRuZC9pbnZhcmlhbnQnO1xuaW1wb3J0IHsgbWF0Y2hlc1R5cGUgfSBmcm9tICcuLi8uLi91dGlscy9tYXRjaGVzVHlwZSc7XG5pbXBvcnQgeyBIT1ZFUiB9IGZyb20gJy4vdHlwZXMnO1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUhvdmVyKG1hbmFnZXIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGhvdmVyKHRhcmdldElkc0FyZykge1xuICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fSxcbiAgICAgICAgY2xpZW50T2Zmc2V0ID0gX3JlZi5jbGllbnRPZmZzZXQ7XG5cbiAgICB2ZXJpZnlUYXJnZXRJZHNJc0FycmF5KHRhcmdldElkc0FyZyk7XG4gICAgdmFyIHRhcmdldElkcyA9IHRhcmdldElkc0FyZy5zbGljZSgwKTtcbiAgICB2YXIgbW9uaXRvciA9IG1hbmFnZXIuZ2V0TW9uaXRvcigpO1xuICAgIHZhciByZWdpc3RyeSA9IG1hbmFnZXIuZ2V0UmVnaXN0cnkoKTtcbiAgICBjaGVja0ludmFyaWFudHModGFyZ2V0SWRzLCBtb25pdG9yLCByZWdpc3RyeSk7XG4gICAgdmFyIGRyYWdnZWRJdGVtVHlwZSA9IG1vbml0b3IuZ2V0SXRlbVR5cGUoKTtcbiAgICByZW1vdmVOb25NYXRjaGluZ1RhcmdldElkcyh0YXJnZXRJZHMsIHJlZ2lzdHJ5LCBkcmFnZ2VkSXRlbVR5cGUpO1xuICAgIGhvdmVyQWxsVGFyZ2V0cyh0YXJnZXRJZHMsIG1vbml0b3IsIHJlZ2lzdHJ5KTtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogSE9WRVIsXG4gICAgICBwYXlsb2FkOiB7XG4gICAgICAgIHRhcmdldElkczogdGFyZ2V0SWRzLFxuICAgICAgICBjbGllbnRPZmZzZXQ6IGNsaWVudE9mZnNldCB8fCBudWxsXG4gICAgICB9XG4gICAgfTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdmVyaWZ5VGFyZ2V0SWRzSXNBcnJheSh0YXJnZXRJZHNBcmcpIHtcbiAgaW52YXJpYW50KEFycmF5LmlzQXJyYXkodGFyZ2V0SWRzQXJnKSwgJ0V4cGVjdGVkIHRhcmdldElkcyB0byBiZSBhbiBhcnJheS4nKTtcbn1cblxuZnVuY3Rpb24gY2hlY2tJbnZhcmlhbnRzKHRhcmdldElkcywgbW9uaXRvciwgcmVnaXN0cnkpIHtcbiAgaW52YXJpYW50KG1vbml0b3IuaXNEcmFnZ2luZygpLCAnQ2Fubm90IGNhbGwgaG92ZXIgd2hpbGUgbm90IGRyYWdnaW5nLicpO1xuICBpbnZhcmlhbnQoIW1vbml0b3IuZGlkRHJvcCgpLCAnQ2Fubm90IGNhbGwgaG92ZXIgYWZ0ZXIgZHJvcC4nKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRhcmdldElkcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciB0YXJnZXRJZCA9IHRhcmdldElkc1tpXTtcbiAgICBpbnZhcmlhbnQodGFyZ2V0SWRzLmxhc3RJbmRleE9mKHRhcmdldElkKSA9PT0gaSwgJ0V4cGVjdGVkIHRhcmdldElkcyB0byBiZSB1bmlxdWUgaW4gdGhlIHBhc3NlZCBhcnJheS4nKTtcbiAgICB2YXIgdGFyZ2V0ID0gcmVnaXN0cnkuZ2V0VGFyZ2V0KHRhcmdldElkKTtcbiAgICBpbnZhcmlhbnQodGFyZ2V0LCAnRXhwZWN0ZWQgdGFyZ2V0SWRzIHRvIGJlIHJlZ2lzdGVyZWQuJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlTm9uTWF0Y2hpbmdUYXJnZXRJZHModGFyZ2V0SWRzLCByZWdpc3RyeSwgZHJhZ2dlZEl0ZW1UeXBlKSB7XG4gIC8vIFJlbW92ZSB0aG9zZSB0YXJnZXRJZHMgdGhhdCBkb24ndCBtYXRjaCB0aGUgdGFyZ2V0VHlwZS4gIFRoaXNcbiAgLy8gZml4ZXMgc2hhbGxvdyBpc092ZXIgd2hpY2ggd291bGQgb25seSBiZSBub24tc2hhbGxvdyBiZWNhdXNlIG9mXG4gIC8vIG5vbi1tYXRjaGluZyB0YXJnZXRzLlxuICBmb3IgKHZhciBpID0gdGFyZ2V0SWRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgdmFyIHRhcmdldElkID0gdGFyZ2V0SWRzW2ldO1xuICAgIHZhciB0YXJnZXRUeXBlID0gcmVnaXN0cnkuZ2V0VGFyZ2V0VHlwZSh0YXJnZXRJZCk7XG5cbiAgICBpZiAoIW1hdGNoZXNUeXBlKHRhcmdldFR5cGUsIGRyYWdnZWRJdGVtVHlwZSkpIHtcbiAgICAgIHRhcmdldElkcy5zcGxpY2UoaSwgMSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGhvdmVyQWxsVGFyZ2V0cyh0YXJnZXRJZHMsIG1vbml0b3IsIHJlZ2lzdHJ5KSB7XG4gIC8vIEZpbmFsbHkgY2FsbCBob3ZlciBvbiBhbGwgbWF0Y2hpbmcgdGFyZ2V0cy5cbiAgdGFyZ2V0SWRzLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldElkKSB7XG4gICAgdmFyIHRhcmdldCA9IHJlZ2lzdHJ5LmdldFRhcmdldCh0YXJnZXRJZCk7XG4gICAgdGFyZ2V0LmhvdmVyKG1vbml0b3IsIHRhcmdldElkKTtcbiAgfSk7XG59IiwiZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgeyBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IH0ga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5pbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tICdAcmVhY3QtZG5kL2ludmFyaWFudCc7XG5pbXBvcnQgeyBEUk9QIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBpc09iamVjdCB9IGZyb20gJy4uLy4uL3V0aWxzL2pzX3V0aWxzJztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEcm9wKG1hbmFnZXIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGRyb3AoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIHZhciBtb25pdG9yID0gbWFuYWdlci5nZXRNb25pdG9yKCk7XG4gICAgdmFyIHJlZ2lzdHJ5ID0gbWFuYWdlci5nZXRSZWdpc3RyeSgpO1xuICAgIHZlcmlmeUludmFyaWFudHMobW9uaXRvcik7XG4gICAgdmFyIHRhcmdldElkcyA9IGdldERyb3BwYWJsZVRhcmdldHMobW9uaXRvcik7IC8vIE11bHRpcGxlIGFjdGlvbnMgYXJlIGRpc3BhdGNoZWQgaGVyZSwgd2hpY2ggaXMgd2h5IHRoaXMgZG9lc24ndCByZXR1cm4gYW4gYWN0aW9uXG5cbiAgICB0YXJnZXRJZHMuZm9yRWFjaChmdW5jdGlvbiAodGFyZ2V0SWQsIGluZGV4KSB7XG4gICAgICB2YXIgZHJvcFJlc3VsdCA9IGRldGVybWluZURyb3BSZXN1bHQodGFyZ2V0SWQsIGluZGV4LCByZWdpc3RyeSwgbW9uaXRvcik7XG4gICAgICB2YXIgYWN0aW9uID0ge1xuICAgICAgICB0eXBlOiBEUk9QLFxuICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgZHJvcFJlc3VsdDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBvcHRpb25zKSwgZHJvcFJlc3VsdClcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIG1hbmFnZXIuZGlzcGF0Y2goYWN0aW9uKTtcbiAgICB9KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdmVyaWZ5SW52YXJpYW50cyhtb25pdG9yKSB7XG4gIGludmFyaWFudChtb25pdG9yLmlzRHJhZ2dpbmcoKSwgJ0Nhbm5vdCBjYWxsIGRyb3Agd2hpbGUgbm90IGRyYWdnaW5nLicpO1xuICBpbnZhcmlhbnQoIW1vbml0b3IuZGlkRHJvcCgpLCAnQ2Fubm90IGNhbGwgZHJvcCB0d2ljZSBkdXJpbmcgb25lIGRyYWcgb3BlcmF0aW9uLicpO1xufVxuXG5mdW5jdGlvbiBkZXRlcm1pbmVEcm9wUmVzdWx0KHRhcmdldElkLCBpbmRleCwgcmVnaXN0cnksIG1vbml0b3IpIHtcbiAgdmFyIHRhcmdldCA9IHJlZ2lzdHJ5LmdldFRhcmdldCh0YXJnZXRJZCk7XG4gIHZhciBkcm9wUmVzdWx0ID0gdGFyZ2V0ID8gdGFyZ2V0LmRyb3AobW9uaXRvciwgdGFyZ2V0SWQpIDogdW5kZWZpbmVkO1xuICB2ZXJpZnlEcm9wUmVzdWx0VHlwZShkcm9wUmVzdWx0KTtcblxuICBpZiAodHlwZW9mIGRyb3BSZXN1bHQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgZHJvcFJlc3VsdCA9IGluZGV4ID09PSAwID8ge30gOiBtb25pdG9yLmdldERyb3BSZXN1bHQoKTtcbiAgfVxuXG4gIHJldHVybiBkcm9wUmVzdWx0O1xufVxuXG5mdW5jdGlvbiB2ZXJpZnlEcm9wUmVzdWx0VHlwZShkcm9wUmVzdWx0KSB7XG4gIGludmFyaWFudCh0eXBlb2YgZHJvcFJlc3VsdCA9PT0gJ3VuZGVmaW5lZCcgfHwgaXNPYmplY3QoZHJvcFJlc3VsdCksICdEcm9wIHJlc3VsdCBtdXN0IGVpdGhlciBiZSBhbiBvYmplY3Qgb3IgdW5kZWZpbmVkLicpO1xufVxuXG5mdW5jdGlvbiBnZXREcm9wcGFibGVUYXJnZXRzKG1vbml0b3IpIHtcbiAgdmFyIHRhcmdldElkcyA9IG1vbml0b3IuZ2V0VGFyZ2V0SWRzKCkuZmlsdGVyKG1vbml0b3IuY2FuRHJvcE9uVGFyZ2V0LCBtb25pdG9yKTtcbiAgdGFyZ2V0SWRzLnJldmVyc2UoKTtcbiAgcmV0dXJuIHRhcmdldElkcztcbn0iLCJpbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tICdAcmVhY3QtZG5kL2ludmFyaWFudCc7XG5pbXBvcnQgeyBFTkRfRFJBRyB9IGZyb20gJy4vdHlwZXMnO1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVuZERyYWcobWFuYWdlcikge1xuICByZXR1cm4gZnVuY3Rpb24gZW5kRHJhZygpIHtcbiAgICB2YXIgbW9uaXRvciA9IG1hbmFnZXIuZ2V0TW9uaXRvcigpO1xuICAgIHZhciByZWdpc3RyeSA9IG1hbmFnZXIuZ2V0UmVnaXN0cnkoKTtcbiAgICB2ZXJpZnlJc0RyYWdnaW5nKG1vbml0b3IpO1xuICAgIHZhciBzb3VyY2VJZCA9IG1vbml0b3IuZ2V0U291cmNlSWQoKTtcblxuICAgIGlmIChzb3VyY2VJZCAhPSBudWxsKSB7XG4gICAgICB2YXIgc291cmNlID0gcmVnaXN0cnkuZ2V0U291cmNlKHNvdXJjZUlkLCB0cnVlKTtcbiAgICAgIHNvdXJjZS5lbmREcmFnKG1vbml0b3IsIHNvdXJjZUlkKTtcbiAgICAgIHJlZ2lzdHJ5LnVucGluU291cmNlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IEVORF9EUkFHXG4gICAgfTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdmVyaWZ5SXNEcmFnZ2luZyhtb25pdG9yKSB7XG4gIGludmFyaWFudChtb25pdG9yLmlzRHJhZ2dpbmcoKSwgJ0Nhbm5vdCBjYWxsIGVuZERyYWcgd2hpbGUgbm90IGRyYWdnaW5nLicpO1xufSIsImltcG9ydCB7IGNyZWF0ZUJlZ2luRHJhZyB9IGZyb20gJy4vYmVnaW5EcmFnJztcbmltcG9ydCB7IGNyZWF0ZVB1Ymxpc2hEcmFnU291cmNlIH0gZnJvbSAnLi9wdWJsaXNoRHJhZ1NvdXJjZSc7XG5pbXBvcnQgeyBjcmVhdGVIb3ZlciB9IGZyb20gJy4vaG92ZXInO1xuaW1wb3J0IHsgY3JlYXRlRHJvcCB9IGZyb20gJy4vZHJvcCc7XG5pbXBvcnQgeyBjcmVhdGVFbmREcmFnIH0gZnJvbSAnLi9lbmREcmFnJztcbmV4cG9ydCAqIGZyb20gJy4vdHlwZXMnO1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURyYWdEcm9wQWN0aW9ucyhtYW5hZ2VyKSB7XG4gIHJldHVybiB7XG4gICAgYmVnaW5EcmFnOiBjcmVhdGVCZWdpbkRyYWcobWFuYWdlciksXG4gICAgcHVibGlzaERyYWdTb3VyY2U6IGNyZWF0ZVB1Ymxpc2hEcmFnU291cmNlKG1hbmFnZXIpLFxuICAgIGhvdmVyOiBjcmVhdGVIb3ZlcihtYW5hZ2VyKSxcbiAgICBkcm9wOiBjcmVhdGVEcm9wKG1hbmFnZXIpLFxuICAgIGVuZERyYWc6IGNyZWF0ZUVuZERyYWcobWFuYWdlcilcbiAgfTtcbn0iLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmltcG9ydCB7IGNyZWF0ZURyYWdEcm9wQWN0aW9ucyB9IGZyb20gJy4uL2FjdGlvbnMvZHJhZ0Ryb3AnO1xuZXhwb3J0IHZhciBEcmFnRHJvcE1hbmFnZXJJbXBsID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRHJhZ0Ryb3BNYW5hZ2VySW1wbChzdG9yZSwgbW9uaXRvcikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRHJhZ0Ryb3BNYW5hZ2VySW1wbCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdG9yZVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibW9uaXRvclwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYmFja2VuZFwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaXNTZXRVcFwiLCBmYWxzZSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYW5kbGVSZWZDb3VudENoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc2hvdWxkU2V0VXAgPSBfdGhpcy5zdG9yZS5nZXRTdGF0ZSgpLnJlZkNvdW50ID4gMDtcblxuICAgICAgaWYgKF90aGlzLmJhY2tlbmQpIHtcbiAgICAgICAgaWYgKHNob3VsZFNldFVwICYmICFfdGhpcy5pc1NldFVwKSB7XG4gICAgICAgICAgX3RoaXMuYmFja2VuZC5zZXR1cCgpO1xuXG4gICAgICAgICAgX3RoaXMuaXNTZXRVcCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoIXNob3VsZFNldFVwICYmIF90aGlzLmlzU2V0VXApIHtcbiAgICAgICAgICBfdGhpcy5iYWNrZW5kLnRlYXJkb3duKCk7XG5cbiAgICAgICAgICBfdGhpcy5pc1NldFVwID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuc3RvcmUgPSBzdG9yZTtcbiAgICB0aGlzLm1vbml0b3IgPSBtb25pdG9yO1xuICAgIHN0b3JlLnN1YnNjcmliZSh0aGlzLmhhbmRsZVJlZkNvdW50Q2hhbmdlKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhEcmFnRHJvcE1hbmFnZXJJbXBsLCBbe1xuICAgIGtleTogXCJyZWNlaXZlQmFja2VuZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZWNlaXZlQmFja2VuZChiYWNrZW5kKSB7XG4gICAgICB0aGlzLmJhY2tlbmQgPSBiYWNrZW5kO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRNb25pdG9yXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1vbml0b3IoKSB7XG4gICAgICByZXR1cm4gdGhpcy5tb25pdG9yO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRCYWNrZW5kXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEJhY2tlbmQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5iYWNrZW5kO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRSZWdpc3RyeVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZWdpc3RyeSgpIHtcbiAgICAgIHJldHVybiB0aGlzLm1vbml0b3IucmVnaXN0cnk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldEFjdGlvbnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QWN0aW9ucygpIHtcbiAgICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhcyAqL1xuICAgICAgdmFyIG1hbmFnZXIgPSB0aGlzO1xuICAgICAgdmFyIGRpc3BhdGNoID0gdGhpcy5zdG9yZS5kaXNwYXRjaDtcblxuICAgICAgZnVuY3Rpb24gYmluZEFjdGlvbkNyZWF0b3IoYWN0aW9uQ3JlYXRvcikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgYWN0aW9uID0gYWN0aW9uQ3JlYXRvci5hcHBseShtYW5hZ2VyLCBhcmdzKTtcblxuICAgICAgICAgIGlmICh0eXBlb2YgYWN0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgZGlzcGF0Y2goYWN0aW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHZhciBhY3Rpb25zID0gY3JlYXRlRHJhZ0Ryb3BBY3Rpb25zKHRoaXMpO1xuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGFjdGlvbnMpLnJlZHVjZShmdW5jdGlvbiAoYm91bmRBY3Rpb25zLCBrZXkpIHtcbiAgICAgICAgdmFyIGFjdGlvbiA9IGFjdGlvbnNba2V5XTtcbiAgICAgICAgYm91bmRBY3Rpb25zW2tleV0gPSBiaW5kQWN0aW9uQ3JlYXRvcihhY3Rpb24pO1xuICAgICAgICByZXR1cm4gYm91bmRBY3Rpb25zO1xuICAgICAgfSwge30pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJkaXNwYXRjaFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwYXRjaChhY3Rpb24pIHtcbiAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goYWN0aW9uKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRHJhZ0Ryb3BNYW5hZ2VySW1wbDtcbn0oKTsiLCJleHBvcnQgdmFyIHN0cmljdEVxdWFsaXR5ID0gZnVuY3Rpb24gc3RyaWN0RXF1YWxpdHkoYSwgYikge1xuICByZXR1cm4gYSA9PT0gYjtcbn07XG4vKipcbiAqIERldGVybWluZSBpZiB0d28gY2FydGVzaWFuIGNvb3JkaW5hdGUgb2Zmc2V0cyBhcmUgZXF1YWxcbiAqIEBwYXJhbSBvZmZzZXRBXG4gKiBAcGFyYW0gb2Zmc2V0QlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhcmVDb29yZHNFcXVhbChvZmZzZXRBLCBvZmZzZXRCKSB7XG4gIGlmICghb2Zmc2V0QSAmJiAhb2Zmc2V0Qikge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKCFvZmZzZXRBIHx8ICFvZmZzZXRCKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBvZmZzZXRBLnggPT09IG9mZnNldEIueCAmJiBvZmZzZXRBLnkgPT09IG9mZnNldEIueTtcbiAgfVxufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHR3byBhcnJheXMgb2YgaXRlbXMgYXJlIGVxdWFsXG4gKiBAcGFyYW0gYSBUaGUgZmlyc3QgYXJyYXkgb2YgaXRlbXNcbiAqIEBwYXJhbSBiIFRoZSBzZWNvbmQgYXJyYXkgb2YgaXRlbXNcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYXJlQXJyYXlzRXF1YWwoYSwgYikge1xuICB2YXIgaXNFcXVhbCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogc3RyaWN0RXF1YWxpdHk7XG5cbiAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7ICsraSkge1xuICAgIGlmICghaXNFcXVhbChhW2ldLCBiW2ldKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufSIsImZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHsgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyB9IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuaW1wb3J0IHsgSU5JVF9DT09SRFMsIEJFR0lOX0RSQUcsIEhPVkVSLCBFTkRfRFJBRywgRFJPUCB9IGZyb20gJy4uL2FjdGlvbnMvZHJhZ0Ryb3AnO1xuaW1wb3J0IHsgYXJlQ29vcmRzRXF1YWwgfSBmcm9tICcuLi91dGlscy9lcXVhbGl0eSc7XG52YXIgaW5pdGlhbFN0YXRlID0ge1xuICBpbml0aWFsU291cmNlQ2xpZW50T2Zmc2V0OiBudWxsLFxuICBpbml0aWFsQ2xpZW50T2Zmc2V0OiBudWxsLFxuICBjbGllbnRPZmZzZXQ6IG51bGxcbn07XG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlKCkge1xuICB2YXIgc3RhdGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGluaXRpYWxTdGF0ZTtcbiAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkO1xuICB2YXIgcGF5bG9hZCA9IGFjdGlvbi5wYXlsb2FkO1xuXG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIElOSVRfQ09PUkRTOlxuICAgIGNhc2UgQkVHSU5fRFJBRzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGluaXRpYWxTb3VyY2VDbGllbnRPZmZzZXQ6IHBheWxvYWQuc291cmNlQ2xpZW50T2Zmc2V0LFxuICAgICAgICBpbml0aWFsQ2xpZW50T2Zmc2V0OiBwYXlsb2FkLmNsaWVudE9mZnNldCxcbiAgICAgICAgY2xpZW50T2Zmc2V0OiBwYXlsb2FkLmNsaWVudE9mZnNldFxuICAgICAgfTtcblxuICAgIGNhc2UgSE9WRVI6XG4gICAgICBpZiAoYXJlQ29vcmRzRXF1YWwoc3RhdGUuY2xpZW50T2Zmc2V0LCBwYXlsb2FkLmNsaWVudE9mZnNldCkpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSksIHt9LCB7XG4gICAgICAgIGNsaWVudE9mZnNldDogcGF5bG9hZC5jbGllbnRPZmZzZXRcbiAgICAgIH0pO1xuXG4gICAgY2FzZSBFTkRfRFJBRzpcbiAgICBjYXNlIERST1A6XG4gICAgICByZXR1cm4gaW5pdGlhbFN0YXRlO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufSIsImV4cG9ydCB2YXIgQUREX1NPVVJDRSA9ICdkbmQtY29yZS9BRERfU09VUkNFJztcbmV4cG9ydCB2YXIgQUREX1RBUkdFVCA9ICdkbmQtY29yZS9BRERfVEFSR0VUJztcbmV4cG9ydCB2YXIgUkVNT1ZFX1NPVVJDRSA9ICdkbmQtY29yZS9SRU1PVkVfU09VUkNFJztcbmV4cG9ydCB2YXIgUkVNT1ZFX1RBUkdFVCA9ICdkbmQtY29yZS9SRU1PVkVfVEFSR0VUJztcbmV4cG9ydCBmdW5jdGlvbiBhZGRTb3VyY2Uoc291cmNlSWQpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBBRERfU09VUkNFLFxuICAgIHBheWxvYWQ6IHtcbiAgICAgIHNvdXJjZUlkOiBzb3VyY2VJZFxuICAgIH1cbiAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhZGRUYXJnZXQodGFyZ2V0SWQpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBBRERfVEFSR0VULFxuICAgIHBheWxvYWQ6IHtcbiAgICAgIHRhcmdldElkOiB0YXJnZXRJZFxuICAgIH1cbiAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVTb3VyY2Uoc291cmNlSWQpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBSRU1PVkVfU09VUkNFLFxuICAgIHBheWxvYWQ6IHtcbiAgICAgIHNvdXJjZUlkOiBzb3VyY2VJZFxuICAgIH1cbiAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVUYXJnZXQodGFyZ2V0SWQpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBSRU1PVkVfVEFSR0VULFxuICAgIHBheWxvYWQ6IHtcbiAgICAgIHRhcmdldElkOiB0YXJnZXRJZFxuICAgIH1cbiAgfTtcbn0iLCJmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSB7IHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsgfSBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmltcG9ydCB7IEJFR0lOX0RSQUcsIFBVQkxJU0hfRFJBR19TT1VSQ0UsIEhPVkVSLCBFTkRfRFJBRywgRFJPUCB9IGZyb20gJy4uL2FjdGlvbnMvZHJhZ0Ryb3AnO1xuaW1wb3J0IHsgUkVNT1ZFX1RBUkdFVCB9IGZyb20gJy4uL2FjdGlvbnMvcmVnaXN0cnknO1xuaW1wb3J0IHsgd2l0aG91dCB9IGZyb20gJy4uL3V0aWxzL2pzX3V0aWxzJztcbnZhciBpbml0aWFsU3RhdGUgPSB7XG4gIGl0ZW1UeXBlOiBudWxsLFxuICBpdGVtOiBudWxsLFxuICBzb3VyY2VJZDogbnVsbCxcbiAgdGFyZ2V0SWRzOiBbXSxcbiAgZHJvcFJlc3VsdDogbnVsbCxcbiAgZGlkRHJvcDogZmFsc2UsXG4gIGlzU291cmNlUHVibGljOiBudWxsXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZSgpIHtcbiAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBpbml0aWFsU3RhdGU7XG4gIHZhciBhY3Rpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDtcbiAgdmFyIHBheWxvYWQgPSBhY3Rpb24ucGF5bG9hZDtcblxuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBCRUdJTl9EUkFHOlxuICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUpLCB7fSwge1xuICAgICAgICBpdGVtVHlwZTogcGF5bG9hZC5pdGVtVHlwZSxcbiAgICAgICAgaXRlbTogcGF5bG9hZC5pdGVtLFxuICAgICAgICBzb3VyY2VJZDogcGF5bG9hZC5zb3VyY2VJZCxcbiAgICAgICAgaXNTb3VyY2VQdWJsaWM6IHBheWxvYWQuaXNTb3VyY2VQdWJsaWMsXG4gICAgICAgIGRyb3BSZXN1bHQ6IG51bGwsXG4gICAgICAgIGRpZERyb3A6IGZhbHNlXG4gICAgICB9KTtcblxuICAgIGNhc2UgUFVCTElTSF9EUkFHX1NPVVJDRTpcbiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlKSwge30sIHtcbiAgICAgICAgaXNTb3VyY2VQdWJsaWM6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgY2FzZSBIT1ZFUjpcbiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlKSwge30sIHtcbiAgICAgICAgdGFyZ2V0SWRzOiBwYXlsb2FkLnRhcmdldElkc1xuICAgICAgfSk7XG5cbiAgICBjYXNlIFJFTU9WRV9UQVJHRVQ6XG4gICAgICBpZiAoc3RhdGUudGFyZ2V0SWRzLmluZGV4T2YocGF5bG9hZC50YXJnZXRJZCkgPT09IC0xKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUpLCB7fSwge1xuICAgICAgICB0YXJnZXRJZHM6IHdpdGhvdXQoc3RhdGUudGFyZ2V0SWRzLCBwYXlsb2FkLnRhcmdldElkKVxuICAgICAgfSk7XG5cbiAgICBjYXNlIERST1A6XG4gICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSksIHt9LCB7XG4gICAgICAgIGRyb3BSZXN1bHQ6IHBheWxvYWQuZHJvcFJlc3VsdCxcbiAgICAgICAgZGlkRHJvcDogdHJ1ZSxcbiAgICAgICAgdGFyZ2V0SWRzOiBbXVxuICAgICAgfSk7XG5cbiAgICBjYXNlIEVORF9EUkFHOlxuICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUpLCB7fSwge1xuICAgICAgICBpdGVtVHlwZTogbnVsbCxcbiAgICAgICAgaXRlbTogbnVsbCxcbiAgICAgICAgc291cmNlSWQ6IG51bGwsXG4gICAgICAgIGRyb3BSZXN1bHQ6IG51bGwsXG4gICAgICAgIGRpZERyb3A6IGZhbHNlLFxuICAgICAgICBpc1NvdXJjZVB1YmxpYzogbnVsbCxcbiAgICAgICAgdGFyZ2V0SWRzOiBbXVxuICAgICAgfSk7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHN0YXRlO1xuICB9XG59IiwiaW1wb3J0IHsgQUREX1NPVVJDRSwgQUREX1RBUkdFVCwgUkVNT1ZFX1NPVVJDRSwgUkVNT1ZFX1RBUkdFVCB9IGZyb20gJy4uL2FjdGlvbnMvcmVnaXN0cnknO1xuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZSgpIHtcbiAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAwO1xuICB2YXIgYWN0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XG5cbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgQUREX1NPVVJDRTpcbiAgICBjYXNlIEFERF9UQVJHRVQ6XG4gICAgICByZXR1cm4gc3RhdGUgKyAxO1xuXG4gICAgY2FzZSBSRU1PVkVfU09VUkNFOlxuICAgIGNhc2UgUkVNT1ZFX1RBUkdFVDpcbiAgICAgIHJldHVybiBzdGF0ZSAtIDE7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHN0YXRlO1xuICB9XG59IiwiaW1wb3J0IHsgaW50ZXJzZWN0aW9uIH0gZnJvbSAnLi9qc191dGlscyc7XG5leHBvcnQgdmFyIE5PTkUgPSBbXTtcbmV4cG9ydCB2YXIgQUxMID0gW107XG5OT05FLl9fSVNfTk9ORV9fID0gdHJ1ZTtcbkFMTC5fX0lTX0FMTF9fID0gdHJ1ZTtcbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGUgZ2l2ZW4gaGFuZGxlciBJRHMgYXJlIGRpcnR5IG9yIG5vdC5cbiAqXG4gKiBAcGFyYW0gZGlydHlJZHMgVGhlIHNldCBvZiBkaXJ0eSBoYW5kbGVyIGlkc1xuICogQHBhcmFtIGhhbmRsZXJJZHMgVGhlIHNldCBvZiBoYW5kbGVyIGlkcyB0byBjaGVja1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhcmVEaXJ0eShkaXJ0eUlkcywgaGFuZGxlcklkcykge1xuICBpZiAoZGlydHlJZHMgPT09IE5PTkUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoZGlydHlJZHMgPT09IEFMTCB8fCB0eXBlb2YgaGFuZGxlcklkcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHZhciBjb21tb25JZHMgPSBpbnRlcnNlY3Rpb24oaGFuZGxlcklkcywgZGlydHlJZHMpO1xuICByZXR1cm4gY29tbW9uSWRzLmxlbmd0aCA+IDA7XG59IiwiaW1wb3J0IHsgQkVHSU5fRFJBRywgUFVCTElTSF9EUkFHX1NPVVJDRSwgSE9WRVIsIEVORF9EUkFHLCBEUk9QIH0gZnJvbSAnLi4vYWN0aW9ucy9kcmFnRHJvcCc7XG5pbXBvcnQgeyBBRERfU09VUkNFLCBBRERfVEFSR0VULCBSRU1PVkVfU09VUkNFLCBSRU1PVkVfVEFSR0VUIH0gZnJvbSAnLi4vYWN0aW9ucy9yZWdpc3RyeSc7XG5pbXBvcnQgeyBhcmVBcnJheXNFcXVhbCB9IGZyb20gJy4uL3V0aWxzL2VxdWFsaXR5JztcbmltcG9ydCB7IE5PTkUsIEFMTCB9IGZyb20gJy4uL3V0aWxzL2RpcnRpbmVzcyc7XG5pbXBvcnQgeyB4b3IgfSBmcm9tICcuLi91dGlscy9qc191dGlscyc7XG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlKCkge1xuICB2YXIgX3N0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBOT05FO1xuXG4gIHZhciBhY3Rpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDtcblxuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBIT1ZFUjpcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBBRERfU09VUkNFOlxuICAgIGNhc2UgQUREX1RBUkdFVDpcbiAgICBjYXNlIFJFTU9WRV9UQVJHRVQ6XG4gICAgY2FzZSBSRU1PVkVfU09VUkNFOlxuICAgICAgcmV0dXJuIE5PTkU7XG5cbiAgICBjYXNlIEJFR0lOX0RSQUc6XG4gICAgY2FzZSBQVUJMSVNIX0RSQUdfU09VUkNFOlxuICAgIGNhc2UgRU5EX0RSQUc6XG4gICAgY2FzZSBEUk9QOlxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gQUxMO1xuICB9XG5cbiAgdmFyIF9hY3Rpb24kcGF5bG9hZCA9IGFjdGlvbi5wYXlsb2FkLFxuICAgICAgX2FjdGlvbiRwYXlsb2FkJHRhcmdlID0gX2FjdGlvbiRwYXlsb2FkLnRhcmdldElkcyxcbiAgICAgIHRhcmdldElkcyA9IF9hY3Rpb24kcGF5bG9hZCR0YXJnZSA9PT0gdm9pZCAwID8gW10gOiBfYWN0aW9uJHBheWxvYWQkdGFyZ2UsXG4gICAgICBfYWN0aW9uJHBheWxvYWQkcHJldlQgPSBfYWN0aW9uJHBheWxvYWQucHJldlRhcmdldElkcyxcbiAgICAgIHByZXZUYXJnZXRJZHMgPSBfYWN0aW9uJHBheWxvYWQkcHJldlQgPT09IHZvaWQgMCA/IFtdIDogX2FjdGlvbiRwYXlsb2FkJHByZXZUO1xuICB2YXIgcmVzdWx0ID0geG9yKHRhcmdldElkcywgcHJldlRhcmdldElkcyk7XG4gIHZhciBkaWRDaGFuZ2UgPSByZXN1bHQubGVuZ3RoID4gMCB8fCAhYXJlQXJyYXlzRXF1YWwodGFyZ2V0SWRzLCBwcmV2VGFyZ2V0SWRzKTtcblxuICBpZiAoIWRpZENoYW5nZSkge1xuICAgIHJldHVybiBOT05FO1xuICB9IC8vIENoZWNrIHRoZSB0YXJnZXQgaWRzIGF0IHRoZSBpbm5lcm1vc3QgcG9zaXRpb24uIElmIHRoZXkgYXJlIHZhbGlkLCBhZGQgdGhlbVxuICAvLyB0byB0aGUgcmVzdWx0XG5cblxuICB2YXIgcHJldklubmVybW9zdFRhcmdldElkID0gcHJldlRhcmdldElkc1twcmV2VGFyZ2V0SWRzLmxlbmd0aCAtIDFdO1xuICB2YXIgaW5uZXJtb3N0VGFyZ2V0SWQgPSB0YXJnZXRJZHNbdGFyZ2V0SWRzLmxlbmd0aCAtIDFdO1xuXG4gIGlmIChwcmV2SW5uZXJtb3N0VGFyZ2V0SWQgIT09IGlubmVybW9zdFRhcmdldElkKSB7XG4gICAgaWYgKHByZXZJbm5lcm1vc3RUYXJnZXRJZCkge1xuICAgICAgcmVzdWx0LnB1c2gocHJldklubmVybW9zdFRhcmdldElkKTtcbiAgICB9XG5cbiAgICBpZiAoaW5uZXJtb3N0VGFyZ2V0SWQpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGlubmVybW9zdFRhcmdldElkKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufSIsImV4cG9ydCBmdW5jdGlvbiByZWR1Y2UoKSB7XG4gIHZhciBzdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMDtcbiAgcmV0dXJuIHN0YXRlICsgMTtcbn0iLCJmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSB7IHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsgfSBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmltcG9ydCB7IHJlZHVjZSBhcyBkcmFnT2Zmc2V0IH0gZnJvbSAnLi9kcmFnT2Zmc2V0JztcbmltcG9ydCB7IHJlZHVjZSBhcyBkcmFnT3BlcmF0aW9uIH0gZnJvbSAnLi9kcmFnT3BlcmF0aW9uJztcbmltcG9ydCB7IHJlZHVjZSBhcyByZWZDb3VudCB9IGZyb20gJy4vcmVmQ291bnQnO1xuaW1wb3J0IHsgcmVkdWNlIGFzIGRpcnR5SGFuZGxlcklkcyB9IGZyb20gJy4vZGlydHlIYW5kbGVySWRzJztcbmltcG9ydCB7IHJlZHVjZSBhcyBzdGF0ZUlkIH0gZnJvbSAnLi9zdGF0ZUlkJztcbmltcG9ydCB7IGdldCB9IGZyb20gJy4uL3V0aWxzL2pzX3V0aWxzJztcbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2UoKSB7XG4gIHZhciBzdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gIHZhciBhY3Rpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDtcbiAgcmV0dXJuIHtcbiAgICBkaXJ0eUhhbmRsZXJJZHM6IGRpcnR5SGFuZGxlcklkcyhzdGF0ZS5kaXJ0eUhhbmRsZXJJZHMsIHtcbiAgICAgIHR5cGU6IGFjdGlvbi50eXBlLFxuICAgICAgcGF5bG9hZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBhY3Rpb24ucGF5bG9hZCksIHt9LCB7XG4gICAgICAgIHByZXZUYXJnZXRJZHM6IGdldChzdGF0ZSwgJ2RyYWdPcGVyYXRpb24udGFyZ2V0SWRzJywgW10pXG4gICAgICB9KVxuICAgIH0pLFxuICAgIGRyYWdPZmZzZXQ6IGRyYWdPZmZzZXQoc3RhdGUuZHJhZ09mZnNldCwgYWN0aW9uKSxcbiAgICByZWZDb3VudDogcmVmQ291bnQoc3RhdGUucmVmQ291bnQsIGFjdGlvbiksXG4gICAgZHJhZ09wZXJhdGlvbjogZHJhZ09wZXJhdGlvbihzdGF0ZS5kcmFnT3BlcmF0aW9uLCBhY3Rpb24pLFxuICAgIHN0YXRlSWQ6IHN0YXRlSWQoc3RhdGUuc3RhdGVJZClcbiAgfTtcbn0iLCIvKipcbiAqIENvb3JkaW5hdGUgYWRkaXRpb25cbiAqIEBwYXJhbSBhIFRoZSBmaXJzdCBjb29yZGluYXRlXG4gKiBAcGFyYW0gYiBUaGUgc2Vjb25kIGNvb3JkaW5hdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZChhLCBiKSB7XG4gIHJldHVybiB7XG4gICAgeDogYS54ICsgYi54LFxuICAgIHk6IGEueSArIGIueVxuICB9O1xufVxuLyoqXG4gKiBDb29yZGluYXRlIHN1YnRyYWN0aW9uXG4gKiBAcGFyYW0gYSBUaGUgZmlyc3QgY29vcmRpbmF0ZVxuICogQHBhcmFtIGIgVGhlIHNlY29uZCBjb29yZGluYXRlXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnRyYWN0KGEsIGIpIHtcbiAgcmV0dXJuIHtcbiAgICB4OiBhLnggLSBiLngsXG4gICAgeTogYS55IC0gYi55XG4gIH07XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGNhcnRlc2lhbiBkaXN0YW5jZSBvZiB0aGUgZHJhZyBzb3VyY2UgY29tcG9uZW50J3MgcG9zaXRpb24sIGJhc2VkIG9uIGl0cyBwb3NpdGlvblxuICogYXQgdGhlIHRpbWUgd2hlbiB0aGUgY3VycmVudCBkcmFnIG9wZXJhdGlvbiBoYXMgc3RhcnRlZCwgYW5kIHRoZSBtb3ZlbWVudCBkaWZmZXJlbmNlLlxuICpcbiAqIFJldHVybnMgbnVsbCBpZiBubyBpdGVtIGlzIGJlaW5nIGRyYWdnZWQuXG4gKlxuICogQHBhcmFtIHN0YXRlIFRoZSBvZmZzZXQgc3RhdGUgdG8gY29tcHV0ZSBmcm9tXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNvdXJjZUNsaWVudE9mZnNldChzdGF0ZSkge1xuICB2YXIgY2xpZW50T2Zmc2V0ID0gc3RhdGUuY2xpZW50T2Zmc2V0LFxuICAgICAgaW5pdGlhbENsaWVudE9mZnNldCA9IHN0YXRlLmluaXRpYWxDbGllbnRPZmZzZXQsXG4gICAgICBpbml0aWFsU291cmNlQ2xpZW50T2Zmc2V0ID0gc3RhdGUuaW5pdGlhbFNvdXJjZUNsaWVudE9mZnNldDtcblxuICBpZiAoIWNsaWVudE9mZnNldCB8fCAhaW5pdGlhbENsaWVudE9mZnNldCB8fCAhaW5pdGlhbFNvdXJjZUNsaWVudE9mZnNldCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIHN1YnRyYWN0KGFkZChjbGllbnRPZmZzZXQsIGluaXRpYWxTb3VyY2VDbGllbnRPZmZzZXQpLCBpbml0aWFsQ2xpZW50T2Zmc2V0KTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyB0aGUgeCx5IG9mZnNldCBiZXR3ZWVuIHRoZSBjbGllbnQgb2Zmc2V0IGFuZCB0aGUgaW5pdGlhbCBjbGllbnQgb2Zmc2V0XG4gKlxuICogQHBhcmFtIHN0YXRlIFRoZSBvZmZzZXQgc3RhdGUgdG8gY29tcHV0ZSBmcm9tXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERpZmZlcmVuY2VGcm9tSW5pdGlhbE9mZnNldChzdGF0ZSkge1xuICB2YXIgY2xpZW50T2Zmc2V0ID0gc3RhdGUuY2xpZW50T2Zmc2V0LFxuICAgICAgaW5pdGlhbENsaWVudE9mZnNldCA9IHN0YXRlLmluaXRpYWxDbGllbnRPZmZzZXQ7XG5cbiAgaWYgKCFjbGllbnRPZmZzZXQgfHwgIWluaXRpYWxDbGllbnRPZmZzZXQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBzdWJ0cmFjdChjbGllbnRPZmZzZXQsIGluaXRpYWxDbGllbnRPZmZzZXQpO1xufSIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAnQHJlYWN0LWRuZC9pbnZhcmlhbnQnO1xuaW1wb3J0IHsgbWF0Y2hlc1R5cGUgfSBmcm9tICcuLi91dGlscy9tYXRjaGVzVHlwZSc7XG5pbXBvcnQgeyBnZXRTb3VyY2VDbGllbnRPZmZzZXQgYXMgX2dldFNvdXJjZUNsaWVudE9mZnNldCwgZ2V0RGlmZmVyZW5jZUZyb21Jbml0aWFsT2Zmc2V0IGFzIF9nZXREaWZmZXJlbmNlRnJvbUluaXRpYWxPZmZzZXQgfSBmcm9tICcuLi91dGlscy9jb29yZHMnO1xuaW1wb3J0IHsgYXJlRGlydHkgfSBmcm9tICcuLi91dGlscy9kaXJ0aW5lc3MnO1xuZXhwb3J0IHZhciBEcmFnRHJvcE1vbml0b3JJbXBsID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRHJhZ0Ryb3BNb25pdG9ySW1wbChzdG9yZSwgcmVnaXN0cnkpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRHJhZ0Ryb3BNb25pdG9ySW1wbCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdG9yZVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicmVnaXN0cnlcIiwgdm9pZCAwKTtcblxuICAgIHRoaXMuc3RvcmUgPSBzdG9yZTtcbiAgICB0aGlzLnJlZ2lzdHJ5ID0gcmVnaXN0cnk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRHJhZ0Ryb3BNb25pdG9ySW1wbCwgW3tcbiAgICBrZXk6IFwic3Vic2NyaWJlVG9TdGF0ZUNoYW5nZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzdWJzY3JpYmVUb1N0YXRlQ2hhbmdlKGxpc3RlbmVyKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge1xuICAgICAgICBoYW5kbGVySWRzOiB1bmRlZmluZWRcbiAgICAgIH07XG4gICAgICB2YXIgaGFuZGxlcklkcyA9IG9wdGlvbnMuaGFuZGxlcklkcztcbiAgICAgIGludmFyaWFudCh0eXBlb2YgbGlzdGVuZXIgPT09ICdmdW5jdGlvbicsICdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgICBpbnZhcmlhbnQodHlwZW9mIGhhbmRsZXJJZHMgPT09ICd1bmRlZmluZWQnIHx8IEFycmF5LmlzQXJyYXkoaGFuZGxlcklkcyksICdoYW5kbGVySWRzLCB3aGVuIHNwZWNpZmllZCwgbXVzdCBiZSBhbiBhcnJheSBvZiBzdHJpbmdzLicpO1xuICAgICAgdmFyIHByZXZTdGF0ZUlkID0gdGhpcy5zdG9yZS5nZXRTdGF0ZSgpLnN0YXRlSWQ7XG5cbiAgICAgIHZhciBoYW5kbGVDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UoKSB7XG4gICAgICAgIHZhciBzdGF0ZSA9IF90aGlzLnN0b3JlLmdldFN0YXRlKCk7XG5cbiAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZUlkID0gc3RhdGUuc3RhdGVJZDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciBjYW5Ta2lwTGlzdGVuZXIgPSBjdXJyZW50U3RhdGVJZCA9PT0gcHJldlN0YXRlSWQgfHwgY3VycmVudFN0YXRlSWQgPT09IHByZXZTdGF0ZUlkICsgMSAmJiAhYXJlRGlydHkoc3RhdGUuZGlydHlIYW5kbGVySWRzLCBoYW5kbGVySWRzKTtcblxuICAgICAgICAgIGlmICghY2FuU2tpcExpc3RlbmVyKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBwcmV2U3RhdGVJZCA9IGN1cnJlbnRTdGF0ZUlkO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gdGhpcy5zdG9yZS5zdWJzY3JpYmUoaGFuZGxlQ2hhbmdlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic3Vic2NyaWJlVG9PZmZzZXRDaGFuZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3Vic2NyaWJlVG9PZmZzZXRDaGFuZ2UobGlzdGVuZXIpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpbnZhcmlhbnQodHlwZW9mIGxpc3RlbmVyID09PSAnZnVuY3Rpb24nLCAnbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uLicpO1xuICAgICAgdmFyIHByZXZpb3VzU3RhdGUgPSB0aGlzLnN0b3JlLmdldFN0YXRlKCkuZHJhZ09mZnNldDtcblxuICAgICAgdmFyIGhhbmRsZUNoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZSgpIHtcbiAgICAgICAgdmFyIG5leHRTdGF0ZSA9IF90aGlzMi5zdG9yZS5nZXRTdGF0ZSgpLmRyYWdPZmZzZXQ7XG5cbiAgICAgICAgaWYgKG5leHRTdGF0ZSA9PT0gcHJldmlvdXNTdGF0ZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHByZXZpb3VzU3RhdGUgPSBuZXh0U3RhdGU7XG4gICAgICAgIGxpc3RlbmVyKCk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gdGhpcy5zdG9yZS5zdWJzY3JpYmUoaGFuZGxlQ2hhbmdlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2FuRHJhZ1NvdXJjZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5EcmFnU291cmNlKHNvdXJjZUlkKSB7XG4gICAgICBpZiAoIXNvdXJjZUlkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNvdXJjZSA9IHRoaXMucmVnaXN0cnkuZ2V0U291cmNlKHNvdXJjZUlkKTtcbiAgICAgIGludmFyaWFudChzb3VyY2UsIFwiRXhwZWN0ZWQgdG8gZmluZCBhIHZhbGlkIHNvdXJjZS4gc291cmNlSWQ9XCIuY29uY2F0KHNvdXJjZUlkKSk7XG5cbiAgICAgIGlmICh0aGlzLmlzRHJhZ2dpbmcoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzb3VyY2UuY2FuRHJhZyh0aGlzLCBzb3VyY2VJZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNhbkRyb3BPblRhcmdldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5Ecm9wT25UYXJnZXQodGFyZ2V0SWQpIHtcbiAgICAgIC8vIHVuZGVmaW5lZCBvbiBpbml0aWFsIHJlbmRlclxuICAgICAgaWYgKCF0YXJnZXRJZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciB0YXJnZXQgPSB0aGlzLnJlZ2lzdHJ5LmdldFRhcmdldCh0YXJnZXRJZCk7XG4gICAgICBpbnZhcmlhbnQodGFyZ2V0LCBcIkV4cGVjdGVkIHRvIGZpbmQgYSB2YWxpZCB0YXJnZXQuIHRhcmdldElkPVwiLmNvbmNhdCh0YXJnZXRJZCkpO1xuXG4gICAgICBpZiAoIXRoaXMuaXNEcmFnZ2luZygpIHx8IHRoaXMuZGlkRHJvcCgpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRhcmdldFR5cGUgPSB0aGlzLnJlZ2lzdHJ5LmdldFRhcmdldFR5cGUodGFyZ2V0SWQpO1xuICAgICAgdmFyIGRyYWdnZWRJdGVtVHlwZSA9IHRoaXMuZ2V0SXRlbVR5cGUoKTtcbiAgICAgIHJldHVybiBtYXRjaGVzVHlwZSh0YXJnZXRUeXBlLCBkcmFnZ2VkSXRlbVR5cGUpICYmIHRhcmdldC5jYW5Ecm9wKHRoaXMsIHRhcmdldElkKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNEcmFnZ2luZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc0RyYWdnaW5nKCkge1xuICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5nZXRJdGVtVHlwZSgpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNEcmFnZ2luZ1NvdXJjZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc0RyYWdnaW5nU291cmNlKHNvdXJjZUlkKSB7XG4gICAgICAvLyB1bmRlZmluZWQgb24gaW5pdGlhbCByZW5kZXJcbiAgICAgIGlmICghc291cmNlSWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgc291cmNlID0gdGhpcy5yZWdpc3RyeS5nZXRTb3VyY2Uoc291cmNlSWQsIHRydWUpO1xuICAgICAgaW52YXJpYW50KHNvdXJjZSwgXCJFeHBlY3RlZCB0byBmaW5kIGEgdmFsaWQgc291cmNlLiBzb3VyY2VJZD1cIi5jb25jYXQoc291cmNlSWQpKTtcblxuICAgICAgaWYgKCF0aGlzLmlzRHJhZ2dpbmcoKSB8fCAhdGhpcy5pc1NvdXJjZVB1YmxpYygpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNvdXJjZVR5cGUgPSB0aGlzLnJlZ2lzdHJ5LmdldFNvdXJjZVR5cGUoc291cmNlSWQpO1xuICAgICAgdmFyIGRyYWdnZWRJdGVtVHlwZSA9IHRoaXMuZ2V0SXRlbVR5cGUoKTtcblxuICAgICAgaWYgKHNvdXJjZVR5cGUgIT09IGRyYWdnZWRJdGVtVHlwZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzb3VyY2UuaXNEcmFnZ2luZyh0aGlzLCBzb3VyY2VJZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzT3ZlclRhcmdldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc092ZXJUYXJnZXQodGFyZ2V0SWQpIHtcbiAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7XG4gICAgICAgIHNoYWxsb3c6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgICAvLyB1bmRlZmluZWQgb24gaW5pdGlhbCByZW5kZXJcbiAgICAgIGlmICghdGFyZ2V0SWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2hhbGxvdyA9IG9wdGlvbnMuc2hhbGxvdztcblxuICAgICAgaWYgKCF0aGlzLmlzRHJhZ2dpbmcoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciB0YXJnZXRUeXBlID0gdGhpcy5yZWdpc3RyeS5nZXRUYXJnZXRUeXBlKHRhcmdldElkKTtcbiAgICAgIHZhciBkcmFnZ2VkSXRlbVR5cGUgPSB0aGlzLmdldEl0ZW1UeXBlKCk7XG5cbiAgICAgIGlmIChkcmFnZ2VkSXRlbVR5cGUgJiYgIW1hdGNoZXNUeXBlKHRhcmdldFR5cGUsIGRyYWdnZWRJdGVtVHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgdGFyZ2V0SWRzID0gdGhpcy5nZXRUYXJnZXRJZHMoKTtcblxuICAgICAgaWYgKCF0YXJnZXRJZHMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGluZGV4ID0gdGFyZ2V0SWRzLmluZGV4T2YodGFyZ2V0SWQpO1xuXG4gICAgICBpZiAoc2hhbGxvdykge1xuICAgICAgICByZXR1cm4gaW5kZXggPT09IHRhcmdldElkcy5sZW5ndGggLSAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGluZGV4ID4gLTE7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldEl0ZW1UeXBlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEl0ZW1UeXBlKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0U3RhdGUoKS5kcmFnT3BlcmF0aW9uLml0ZW1UeXBlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRJdGVtXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEl0ZW0oKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9yZS5nZXRTdGF0ZSgpLmRyYWdPcGVyYXRpb24uaXRlbTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0U291cmNlSWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U291cmNlSWQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9yZS5nZXRTdGF0ZSgpLmRyYWdPcGVyYXRpb24uc291cmNlSWQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFRhcmdldElkc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUYXJnZXRJZHMoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9yZS5nZXRTdGF0ZSgpLmRyYWdPcGVyYXRpb24udGFyZ2V0SWRzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXREcm9wUmVzdWx0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldERyb3BSZXN1bHQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9yZS5nZXRTdGF0ZSgpLmRyYWdPcGVyYXRpb24uZHJvcFJlc3VsdDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZGlkRHJvcFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkaWREcm9wKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0U3RhdGUoKS5kcmFnT3BlcmF0aW9uLmRpZERyb3A7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzU291cmNlUHVibGljXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzU291cmNlUHVibGljKCkge1xuICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5zdG9yZS5nZXRTdGF0ZSgpLmRyYWdPcGVyYXRpb24uaXNTb3VyY2VQdWJsaWMpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRJbml0aWFsQ2xpZW50T2Zmc2V0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluaXRpYWxDbGllbnRPZmZzZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9yZS5nZXRTdGF0ZSgpLmRyYWdPZmZzZXQuaW5pdGlhbENsaWVudE9mZnNldDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0SW5pdGlhbFNvdXJjZUNsaWVudE9mZnNldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbml0aWFsU291cmNlQ2xpZW50T2Zmc2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0U3RhdGUoKS5kcmFnT2Zmc2V0LmluaXRpYWxTb3VyY2VDbGllbnRPZmZzZXQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldENsaWVudE9mZnNldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDbGllbnRPZmZzZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9yZS5nZXRTdGF0ZSgpLmRyYWdPZmZzZXQuY2xpZW50T2Zmc2V0O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRTb3VyY2VDbGllbnRPZmZzZXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U291cmNlQ2xpZW50T2Zmc2V0KCkge1xuICAgICAgcmV0dXJuIF9nZXRTb3VyY2VDbGllbnRPZmZzZXQodGhpcy5zdG9yZS5nZXRTdGF0ZSgpLmRyYWdPZmZzZXQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXREaWZmZXJlbmNlRnJvbUluaXRpYWxPZmZzZXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGlmZmVyZW5jZUZyb21Jbml0aWFsT2Zmc2V0KCkge1xuICAgICAgcmV0dXJuIF9nZXREaWZmZXJlbmNlRnJvbUluaXRpYWxPZmZzZXQodGhpcy5zdG9yZS5nZXRTdGF0ZSgpLmRyYWdPZmZzZXQpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBEcmFnRHJvcE1vbml0b3JJbXBsO1xufSgpOyIsInZhciBuZXh0VW5pcXVlSWQgPSAwO1xuZXhwb3J0IGZ1bmN0aW9uIGdldE5leHRVbmlxdWVJZCgpIHtcbiAgcmV0dXJuIG5leHRVbmlxdWVJZCsrO1xufSIsImZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAnQHJlYWN0LWRuZC9pbnZhcmlhbnQnO1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlU291cmNlQ29udHJhY3Qoc291cmNlKSB7XG4gIGludmFyaWFudCh0eXBlb2Ygc291cmNlLmNhbkRyYWcgPT09ICdmdW5jdGlvbicsICdFeHBlY3RlZCBjYW5EcmFnIHRvIGJlIGEgZnVuY3Rpb24uJyk7XG4gIGludmFyaWFudCh0eXBlb2Ygc291cmNlLmJlZ2luRHJhZyA9PT0gJ2Z1bmN0aW9uJywgJ0V4cGVjdGVkIGJlZ2luRHJhZyB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICBpbnZhcmlhbnQodHlwZW9mIHNvdXJjZS5lbmREcmFnID09PSAnZnVuY3Rpb24nLCAnRXhwZWN0ZWQgZW5kRHJhZyB0byBiZSBhIGZ1bmN0aW9uLicpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlVGFyZ2V0Q29udHJhY3QodGFyZ2V0KSB7XG4gIGludmFyaWFudCh0eXBlb2YgdGFyZ2V0LmNhbkRyb3AgPT09ICdmdW5jdGlvbicsICdFeHBlY3RlZCBjYW5Ecm9wIHRvIGJlIGEgZnVuY3Rpb24uJyk7XG4gIGludmFyaWFudCh0eXBlb2YgdGFyZ2V0LmhvdmVyID09PSAnZnVuY3Rpb24nLCAnRXhwZWN0ZWQgaG92ZXIgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgaW52YXJpYW50KHR5cGVvZiB0YXJnZXQuZHJvcCA9PT0gJ2Z1bmN0aW9uJywgJ0V4cGVjdGVkIGJlZ2luRHJhZyB0byBiZSBhIGZ1bmN0aW9uLicpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlVHlwZSh0eXBlLCBhbGxvd0FycmF5KSB7XG4gIGlmIChhbGxvd0FycmF5ICYmIEFycmF5LmlzQXJyYXkodHlwZSkpIHtcbiAgICB0eXBlLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZVR5cGUodCwgZmFsc2UpO1xuICAgIH0pO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGludmFyaWFudCh0eXBlb2YgdHlwZSA9PT0gJ3N0cmluZycgfHwgX3R5cGVvZih0eXBlKSA9PT0gJ3N5bWJvbCcsIGFsbG93QXJyYXkgPyAnVHlwZSBjYW4gb25seSBiZSBhIHN0cmluZywgYSBzeW1ib2wsIG9yIGFuIGFycmF5IG9mIGVpdGhlci4nIDogJ1R5cGUgY2FuIG9ubHkgYmUgYSBzdHJpbmcgb3IgYSBzeW1ib2wuJyk7XG59IiwiLy8gVXNlIHRoZSBmYXN0ZXN0IG1lYW5zIHBvc3NpYmxlIHRvIGV4ZWN1dGUgYSB0YXNrIGluIGl0cyBvd24gdHVybiwgd2l0aFxuLy8gcHJpb3JpdHkgb3ZlciBvdGhlciBldmVudHMgaW5jbHVkaW5nIElPLCBhbmltYXRpb24sIHJlZmxvdywgYW5kIHJlZHJhd1xuLy8gZXZlbnRzIGluIGJyb3dzZXJzLlxuLy9cbi8vIEFuIGV4Y2VwdGlvbiB0aHJvd24gYnkgYSB0YXNrIHdpbGwgcGVybWFuZW50bHkgaW50ZXJydXB0IHRoZSBwcm9jZXNzaW5nIG9mXG4vLyBzdWJzZXF1ZW50IHRhc2tzLiBUaGUgaGlnaGVyIGxldmVsIGBhc2FwYCBmdW5jdGlvbiBlbnN1cmVzIHRoYXQgaWYgYW5cbi8vIGV4Y2VwdGlvbiBpcyB0aHJvd24gYnkgYSB0YXNrLCB0aGF0IHRoZSB0YXNrIHF1ZXVlIHdpbGwgY29udGludWUgZmx1c2hpbmcgYXNcbi8vIHNvb24gYXMgcG9zc2libGUsIGJ1dCBpZiB5b3UgdXNlIGByYXdBc2FwYCBkaXJlY3RseSwgeW91IGFyZSByZXNwb25zaWJsZSB0b1xuLy8gZWl0aGVyIGVuc3VyZSB0aGF0IG5vIGV4Y2VwdGlvbnMgYXJlIHRocm93biBmcm9tIHlvdXIgdGFzaywgb3IgdG8gbWFudWFsbHlcbi8vIGNhbGwgYHJhd0FzYXAucmVxdWVzdEZsdXNoYCBpZiBhbiBleGNlcHRpb24gaXMgdGhyb3duLlxuZXhwb3J0IGZ1bmN0aW9uIHJhd0FzYXAodGFzaykge1xuICBpZiAoIXF1ZXVlLmxlbmd0aCkge1xuICAgIHJlcXVlc3RGbHVzaCgpO1xuICAgIGZsdXNoaW5nID0gdHJ1ZTtcbiAgfSAvLyBFcXVpdmFsZW50IHRvIHB1c2gsIGJ1dCBhdm9pZHMgYSBmdW5jdGlvbiBjYWxsLlxuXG5cbiAgcXVldWVbcXVldWUubGVuZ3RoXSA9IHRhc2s7XG59XG52YXIgcXVldWUgPSBbXTsgLy8gT25jZSBhIGZsdXNoIGhhcyBiZWVuIHJlcXVlc3RlZCwgbm8gZnVydGhlciBjYWxscyB0byBgcmVxdWVzdEZsdXNoYCBhcmVcbi8vIG5lY2Vzc2FyeSB1bnRpbCB0aGUgbmV4dCBgZmx1c2hgIGNvbXBsZXRlcy5cbi8vIEB0cy1pZ25vcmVcblxudmFyIGZsdXNoaW5nID0gZmFsc2U7IC8vIGByZXF1ZXN0Rmx1c2hgIGlzIGFuIGltcGxlbWVudGF0aW9uLXNwZWNpZmljIG1ldGhvZCB0aGF0IGF0dGVtcHRzIHRvIGtpY2tcbi8vIG9mZiBhIGBmbHVzaGAgZXZlbnQgYXMgcXVpY2tseSBhcyBwb3NzaWJsZS4gYGZsdXNoYCB3aWxsIGF0dGVtcHQgdG8gZXhoYXVzdFxuLy8gdGhlIGV2ZW50IHF1ZXVlIGJlZm9yZSB5aWVsZGluZyB0byB0aGUgYnJvd3NlcidzIG93biBldmVudCBsb29wLlxuXG52YXIgcmVxdWVzdEZsdXNoOyAvLyBUaGUgcG9zaXRpb24gb2YgdGhlIG5leHQgdGFzayB0byBleGVjdXRlIGluIHRoZSB0YXNrIHF1ZXVlLiBUaGlzIGlzXG4vLyBwcmVzZXJ2ZWQgYmV0d2VlbiBjYWxscyB0byBgZmx1c2hgIHNvIHRoYXQgaXQgY2FuIGJlIHJlc3VtZWQgaWZcbi8vIGEgdGFzayB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuXG52YXIgaW5kZXggPSAwOyAvLyBJZiBhIHRhc2sgc2NoZWR1bGVzIGFkZGl0aW9uYWwgdGFza3MgcmVjdXJzaXZlbHksIHRoZSB0YXNrIHF1ZXVlIGNhbiBncm93XG4vLyB1bmJvdW5kZWQuIFRvIHByZXZlbnQgbWVtb3J5IGV4aGF1c3Rpb24sIHRoZSB0YXNrIHF1ZXVlIHdpbGwgcGVyaW9kaWNhbGx5XG4vLyB0cnVuY2F0ZSBhbHJlYWR5LWNvbXBsZXRlZCB0YXNrcy5cblxudmFyIGNhcGFjaXR5ID0gMTAyNDsgLy8gVGhlIGZsdXNoIGZ1bmN0aW9uIHByb2Nlc3NlcyBhbGwgdGFza3MgdGhhdCBoYXZlIGJlZW4gc2NoZWR1bGVkIHdpdGhcbi8vIGByYXdBc2FwYCB1bmxlc3MgYW5kIHVudGlsIG9uZSBvZiB0aG9zZSB0YXNrcyB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuLy8gSWYgYSB0YXNrIHRocm93cyBhbiBleGNlcHRpb24sIGBmbHVzaGAgZW5zdXJlcyB0aGF0IGl0cyBzdGF0ZSB3aWxsIHJlbWFpblxuLy8gY29uc2lzdGVudCBhbmQgd2lsbCByZXN1bWUgd2hlcmUgaXQgbGVmdCBvZmYgd2hlbiBjYWxsZWQgYWdhaW4uXG4vLyBIb3dldmVyLCBgZmx1c2hgIGRvZXMgbm90IG1ha2UgYW55IGFycmFuZ2VtZW50cyB0byBiZSBjYWxsZWQgYWdhaW4gaWYgYW5cbi8vIGV4Y2VwdGlvbiBpcyB0aHJvd24uXG5cbmZ1bmN0aW9uIGZsdXNoKCkge1xuICB3aGlsZSAoaW5kZXggPCBxdWV1ZS5sZW5ndGgpIHtcbiAgICB2YXIgY3VycmVudEluZGV4ID0gaW5kZXg7IC8vIEFkdmFuY2UgdGhlIGluZGV4IGJlZm9yZSBjYWxsaW5nIHRoZSB0YXNrLiBUaGlzIGVuc3VyZXMgdGhhdCB3ZSB3aWxsXG4gICAgLy8gYmVnaW4gZmx1c2hpbmcgb24gdGhlIG5leHQgdGFzayB0aGUgdGFzayB0aHJvd3MgYW4gZXJyb3IuXG5cbiAgICBpbmRleCA9IGluZGV4ICsgMTtcbiAgICBxdWV1ZVtjdXJyZW50SW5kZXhdLmNhbGwoKTsgLy8gUHJldmVudCBsZWFraW5nIG1lbW9yeSBmb3IgbG9uZyBjaGFpbnMgb2YgcmVjdXJzaXZlIGNhbGxzIHRvIGBhc2FwYC5cbiAgICAvLyBJZiB3ZSBjYWxsIGBhc2FwYCB3aXRoaW4gdGFza3Mgc2NoZWR1bGVkIGJ5IGBhc2FwYCwgdGhlIHF1ZXVlIHdpbGxcbiAgICAvLyBncm93LCBidXQgdG8gYXZvaWQgYW4gTyhuKSB3YWxrIGZvciBldmVyeSB0YXNrIHdlIGV4ZWN1dGUsIHdlIGRvbid0XG4gICAgLy8gc2hpZnQgdGFza3Mgb2ZmIHRoZSBxdWV1ZSBhZnRlciB0aGV5IGhhdmUgYmVlbiBleGVjdXRlZC5cbiAgICAvLyBJbnN0ZWFkLCB3ZSBwZXJpb2RpY2FsbHkgc2hpZnQgMTAyNCB0YXNrcyBvZmYgdGhlIHF1ZXVlLlxuXG4gICAgaWYgKGluZGV4ID4gY2FwYWNpdHkpIHtcbiAgICAgIC8vIE1hbnVhbGx5IHNoaWZ0IGFsbCB2YWx1ZXMgc3RhcnRpbmcgYXQgdGhlIGluZGV4IGJhY2sgdG8gdGhlXG4gICAgICAvLyBiZWdpbm5pbmcgb2YgdGhlIHF1ZXVlLlxuICAgICAgZm9yICh2YXIgc2NhbiA9IDAsIG5ld0xlbmd0aCA9IHF1ZXVlLmxlbmd0aCAtIGluZGV4OyBzY2FuIDwgbmV3TGVuZ3RoOyBzY2FuKyspIHtcbiAgICAgICAgcXVldWVbc2Nhbl0gPSBxdWV1ZVtzY2FuICsgaW5kZXhdO1xuICAgICAgfVxuXG4gICAgICBxdWV1ZS5sZW5ndGggLT0gaW5kZXg7XG4gICAgICBpbmRleCA9IDA7XG4gICAgfVxuICB9XG5cbiAgcXVldWUubGVuZ3RoID0gMDtcbiAgaW5kZXggPSAwO1xuICBmbHVzaGluZyA9IGZhbHNlO1xufSAvLyBgcmVxdWVzdEZsdXNoYCBpcyBpbXBsZW1lbnRlZCB1c2luZyBhIHN0cmF0ZWd5IGJhc2VkIG9uIGRhdGEgY29sbGVjdGVkIGZyb21cbi8vIGV2ZXJ5IGF2YWlsYWJsZSBTYXVjZUxhYnMgU2VsZW5pdW0gd2ViIGRyaXZlciB3b3JrZXIgYXQgdGltZSBvZiB3cml0aW5nLlxuLy8gaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2QvMW1HLTVVWUd1cDVxeEdkRU1Xa2hQNkJXQ3owNTNOVWIyRTFRb1VUVTE2dUEvZWRpdCNnaWQ9NzgzNzI0NTkzXG4vLyBTYWZhcmkgNiBhbmQgNi4xIGZvciBkZXNrdG9wLCBpUGFkLCBhbmQgaVBob25lIGFyZSB0aGUgb25seSBicm93c2VycyB0aGF0XG4vLyBoYXZlIFdlYktpdE11dGF0aW9uT2JzZXJ2ZXIgYnV0IG5vdCB1bi1wcmVmaXhlZCBNdXRhdGlvbk9ic2VydmVyLlxuLy8gTXVzdCB1c2UgYGdsb2JhbGAgb3IgYHNlbGZgIGluc3RlYWQgb2YgYHdpbmRvd2AgdG8gd29yayBpbiBib3RoIGZyYW1lcyBhbmQgd2ViXG4vLyB3b3JrZXJzLiBgZ2xvYmFsYCBpcyBhIHByb3Zpc2lvbiBvZiBCcm93c2VyaWZ5LCBNciwgTXJzLCBvciBNb3AuXG5cbi8qIGdsb2JhbHMgc2VsZiAqL1xuXG5cbnZhciBzY29wZSA9IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogc2VsZjtcbnZhciBCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9IHNjb3BlLk11dGF0aW9uT2JzZXJ2ZXIgfHwgc2NvcGUuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjsgLy8gTXV0YXRpb25PYnNlcnZlcnMgYXJlIGRlc2lyYWJsZSBiZWNhdXNlIHRoZXkgaGF2ZSBoaWdoIHByaW9yaXR5IGFuZCB3b3JrXG4vLyByZWxpYWJseSBldmVyeXdoZXJlIHRoZXkgYXJlIGltcGxlbWVudGVkLlxuLy8gVGhleSBhcmUgaW1wbGVtZW50ZWQgaW4gYWxsIG1vZGVybiBicm93c2Vycy5cbi8vXG4vLyAtIEFuZHJvaWQgNC00LjNcbi8vIC0gQ2hyb21lIDI2LTM0XG4vLyAtIEZpcmVmb3ggMTQtMjlcbi8vIC0gSW50ZXJuZXQgRXhwbG9yZXIgMTFcbi8vIC0gaVBhZCBTYWZhcmkgNi03LjFcbi8vIC0gaVBob25lIFNhZmFyaSA3LTcuMVxuLy8gLSBTYWZhcmkgNi03XG5cbmlmICh0eXBlb2YgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgcmVxdWVzdEZsdXNoID0gbWFrZVJlcXVlc3RDYWxsRnJvbU11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpOyAvLyBNZXNzYWdlQ2hhbm5lbHMgYXJlIGRlc2lyYWJsZSBiZWNhdXNlIHRoZXkgZ2l2ZSBkaXJlY3QgYWNjZXNzIHRvIHRoZSBIVE1MXG4gIC8vIHRhc2sgcXVldWUsIGFyZSBpbXBsZW1lbnRlZCBpbiBJbnRlcm5ldCBFeHBsb3JlciAxMCwgU2FmYXJpIDUuMC0xLCBhbmQgT3BlcmFcbiAgLy8gMTEtMTIsIGFuZCBpbiB3ZWIgd29ya2VycyBpbiBtYW55IGVuZ2luZXMuXG4gIC8vIEFsdGhvdWdoIG1lc3NhZ2UgY2hhbm5lbHMgeWllbGQgdG8gYW55IHF1ZXVlZCByZW5kZXJpbmcgYW5kIElPIHRhc2tzLCB0aGV5XG4gIC8vIHdvdWxkIGJlIGJldHRlciB0aGFuIGltcG9zaW5nIHRoZSA0bXMgZGVsYXkgb2YgdGltZXJzLlxuICAvLyBIb3dldmVyLCB0aGV5IGRvIG5vdCB3b3JrIHJlbGlhYmx5IGluIEludGVybmV0IEV4cGxvcmVyIG9yIFNhZmFyaS5cbiAgLy8gSW50ZXJuZXQgRXhwbG9yZXIgMTAgaXMgdGhlIG9ubHkgYnJvd3NlciB0aGF0IGhhcyBzZXRJbW1lZGlhdGUgYnV0IGRvZXNcbiAgLy8gbm90IGhhdmUgTXV0YXRpb25PYnNlcnZlcnMuXG4gIC8vIEFsdGhvdWdoIHNldEltbWVkaWF0ZSB5aWVsZHMgdG8gdGhlIGJyb3dzZXIncyByZW5kZXJlciwgaXQgd291bGQgYmVcbiAgLy8gcHJlZmVycmFibGUgdG8gZmFsbGluZyBiYWNrIHRvIHNldFRpbWVvdXQgc2luY2UgaXQgZG9lcyBub3QgaGF2ZVxuICAvLyB0aGUgbWluaW11bSA0bXMgcGVuYWx0eS5cbiAgLy8gVW5mb3J0dW5hdGVseSB0aGVyZSBhcHBlYXJzIHRvIGJlIGEgYnVnIGluIEludGVybmV0IEV4cGxvcmVyIDEwIE1vYmlsZSAoYW5kXG4gIC8vIERlc2t0b3AgdG8gYSBsZXNzZXIgZXh0ZW50KSB0aGF0IHJlbmRlcnMgYm90aCBzZXRJbW1lZGlhdGUgYW5kXG4gIC8vIE1lc3NhZ2VDaGFubmVsIHVzZWxlc3MgZm9yIHRoZSBwdXJwb3NlcyBvZiBBU0FQLlxuICAvLyBodHRwczovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3EvaXNzdWVzLzM5NlxuICAvLyBUaW1lcnMgYXJlIGltcGxlbWVudGVkIHVuaXZlcnNhbGx5LlxuICAvLyBXZSBmYWxsIGJhY2sgdG8gdGltZXJzIGluIHdvcmtlcnMgaW4gbW9zdCBlbmdpbmVzLCBhbmQgaW4gZm9yZWdyb3VuZFxuICAvLyBjb250ZXh0cyBpbiB0aGUgZm9sbG93aW5nIGJyb3dzZXJzLlxuICAvLyBIb3dldmVyLCBub3RlIHRoYXQgZXZlbiB0aGlzIHNpbXBsZSBjYXNlIHJlcXVpcmVzIG51YW5jZXMgdG8gb3BlcmF0ZSBpbiBhXG4gIC8vIGJyb2FkIHNwZWN0cnVtIG9mIGJyb3dzZXJzLlxuICAvL1xuICAvLyAtIEZpcmVmb3ggMy0xM1xuICAvLyAtIEludGVybmV0IEV4cGxvcmVyIDYtOVxuICAvLyAtIGlQYWQgU2FmYXJpIDQuM1xuICAvLyAtIEx5bnggMi44Ljdcbn0gZWxzZSB7XG4gIHJlcXVlc3RGbHVzaCA9IG1ha2VSZXF1ZXN0Q2FsbEZyb21UaW1lcihmbHVzaCk7XG59IC8vIGByZXF1ZXN0Rmx1c2hgIHJlcXVlc3RzIHRoYXQgdGhlIGhpZ2ggcHJpb3JpdHkgZXZlbnQgcXVldWUgYmUgZmx1c2hlZCBhc1xuLy8gc29vbiBhcyBwb3NzaWJsZS5cbi8vIFRoaXMgaXMgdXNlZnVsIHRvIHByZXZlbnQgYW4gZXJyb3IgdGhyb3duIGluIGEgdGFzayBmcm9tIHN0YWxsaW5nIHRoZSBldmVudFxuLy8gcXVldWUgaWYgdGhlIGV4Y2VwdGlvbiBoYW5kbGVkIGJ5IE5vZGUuanPigJlzXG4vLyBgcHJvY2Vzcy5vbihcInVuY2F1Z2h0RXhjZXB0aW9uXCIpYCBvciBieSBhIGRvbWFpbi5cblxuXG5yYXdBc2FwLnJlcXVlc3RGbHVzaCA9IHJlcXVlc3RGbHVzaDsgLy8gVG8gcmVxdWVzdCBhIGhpZ2ggcHJpb3JpdHkgZXZlbnQsIHdlIGluZHVjZSBhIG11dGF0aW9uIG9ic2VydmVyIGJ5IHRvZ2dsaW5nXG4vLyB0aGUgdGV4dCBvZiBhIHRleHQgbm9kZSBiZXR3ZWVuIFwiMVwiIGFuZCBcIi0xXCIuXG5cbmZ1bmN0aW9uIG1ha2VSZXF1ZXN0Q2FsbEZyb21NdXRhdGlvbk9ic2VydmVyKGNhbGxiYWNrKSB7XG4gIHZhciB0b2dnbGUgPSAxO1xuICB2YXIgb2JzZXJ2ZXIgPSBuZXcgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIoY2FsbGJhY2spO1xuICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7XG4gICAgY2hhcmFjdGVyRGF0YTogdHJ1ZVxuICB9KTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJlcXVlc3RDYWxsKCkge1xuICAgIHRvZ2dsZSA9IC10b2dnbGU7XG4gICAgbm9kZS5kYXRhID0gdG9nZ2xlO1xuICB9O1xufSAvLyBUaGUgbWVzc2FnZSBjaGFubmVsIHRlY2huaXF1ZSB3YXMgZGlzY292ZXJlZCBieSBNYWx0ZSBVYmwgYW5kIHdhcyB0aGVcbi8vIG9yaWdpbmFsIGZvdW5kYXRpb24gZm9yIHRoaXMgbGlicmFyeS5cbi8vIGh0dHA6Ly93d3cubm9uYmxvY2tpbmcuaW8vMjAxMS8wNi93aW5kb3duZXh0dGljay5odG1sXG4vLyBTYWZhcmkgNi4wLjUgKGF0IGxlYXN0KSBpbnRlcm1pdHRlbnRseSBmYWlscyB0byBjcmVhdGUgbWVzc2FnZSBwb3J0cyBvbiBhXG4vLyBwYWdlJ3MgZmlyc3QgbG9hZC4gVGhhbmtmdWxseSwgdGhpcyB2ZXJzaW9uIG9mIFNhZmFyaSBzdXBwb3J0c1xuLy8gTXV0YXRpb25PYnNlcnZlcnMsIHNvIHdlIGRvbid0IG5lZWQgdG8gZmFsbCBiYWNrIGluIHRoYXQgY2FzZS5cbi8vIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0Q2FsbEZyb21NZXNzYWdlQ2hhbm5lbChjYWxsYmFjaykge1xuLy8gICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4vLyAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBjYWxsYmFjaztcbi8vICAgICByZXR1cm4gZnVuY3Rpb24gcmVxdWVzdENhbGwoKSB7XG4vLyAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG4vLyAgICAgfTtcbi8vIH1cbi8vIEZvciByZWFzb25zIGV4cGxhaW5lZCBhYm92ZSwgd2UgYXJlIGFsc28gdW5hYmxlIHRvIHVzZSBgc2V0SW1tZWRpYXRlYFxuLy8gdW5kZXIgYW55IGNpcmN1bXN0YW5jZXMuXG4vLyBFdmVuIGlmIHdlIHdlcmUsIHRoZXJlIGlzIGFub3RoZXIgYnVnIGluIEludGVybmV0IEV4cGxvcmVyIDEwLlxuLy8gSXQgaXMgbm90IHN1ZmZpY2llbnQgdG8gYXNzaWduIGBzZXRJbW1lZGlhdGVgIHRvIGByZXF1ZXN0Rmx1c2hgIGJlY2F1c2Vcbi8vIGBzZXRJbW1lZGlhdGVgIG11c3QgYmUgY2FsbGVkICpieSBuYW1lKiBhbmQgdGhlcmVmb3JlIG11c3QgYmUgd3JhcHBlZCBpbiBhXG4vLyBjbG9zdXJlLlxuLy8gTmV2ZXIgZm9yZ2V0LlxuLy8gZnVuY3Rpb24gbWFrZVJlcXVlc3RDYWxsRnJvbVNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuLy8gICAgIHJldHVybiBmdW5jdGlvbiByZXF1ZXN0Q2FsbCgpIHtcbi8vICAgICAgICAgc2V0SW1tZWRpYXRlKGNhbGxiYWNrKTtcbi8vICAgICB9O1xuLy8gfVxuLy8gU2FmYXJpIDYuMCBoYXMgYSBwcm9ibGVtIHdoZXJlIHRpbWVycyB3aWxsIGdldCBsb3N0IHdoaWxlIHRoZSB1c2VyIGlzXG4vLyBzY3JvbGxpbmcuIFRoaXMgcHJvYmxlbSBkb2VzIG5vdCBpbXBhY3QgQVNBUCBiZWNhdXNlIFNhZmFyaSA2LjAgc3VwcG9ydHNcbi8vIG11dGF0aW9uIG9ic2VydmVycywgc28gdGhhdCBpbXBsZW1lbnRhdGlvbiBpcyB1c2VkIGluc3RlYWQuXG4vLyBIb3dldmVyLCBpZiB3ZSBldmVyIGVsZWN0IHRvIHVzZSB0aW1lcnMgaW4gU2FmYXJpLCB0aGUgcHJldmFsZW50IHdvcmstYXJvdW5kXG4vLyBpcyB0byBhZGQgYSBzY3JvbGwgZXZlbnQgbGlzdGVuZXIgdGhhdCBjYWxscyBmb3IgYSBmbHVzaC5cbi8vIGBzZXRUaW1lb3V0YCBkb2VzIG5vdCBjYWxsIHRoZSBwYXNzZWQgY2FsbGJhY2sgaWYgdGhlIGRlbGF5IGlzIGxlc3MgdGhhblxuLy8gYXBwcm94aW1hdGVseSA3IGluIHdlYiB3b3JrZXJzIGluIEZpcmVmb3ggOCB0aHJvdWdoIDE4LCBhbmQgc29tZXRpbWVzIG5vdFxuLy8gZXZlbiB0aGVuLlxuXG5cbmZ1bmN0aW9uIG1ha2VSZXF1ZXN0Q2FsbEZyb21UaW1lcihjYWxsYmFjaykge1xuICByZXR1cm4gZnVuY3Rpb24gcmVxdWVzdENhbGwoKSB7XG4gICAgLy8gV2UgZGlzcGF0Y2ggYSB0aW1lb3V0IHdpdGggYSBzcGVjaWZpZWQgZGVsYXkgb2YgMCBmb3IgZW5naW5lcyB0aGF0XG4gICAgLy8gY2FuIHJlbGlhYmx5IGFjY29tbW9kYXRlIHRoYXQgcmVxdWVzdC4gVGhpcyB3aWxsIHVzdWFsbHkgYmUgc25hcHBlZFxuICAgIC8vIHRvIGEgNCBtaWxpc2Vjb25kIGRlbGF5LCBidXQgb25jZSB3ZSdyZSBmbHVzaGluZywgdGhlcmUncyBubyBkZWxheVxuICAgIC8vIGJldHdlZW4gZXZlbnRzLlxuICAgIHZhciB0aW1lb3V0SGFuZGxlID0gc2V0VGltZW91dChoYW5kbGVUaW1lciwgMCk7IC8vIEhvd2V2ZXIsIHNpbmNlIHRoaXMgdGltZXIgZ2V0cyBmcmVxdWVudGx5IGRyb3BwZWQgaW4gRmlyZWZveFxuICAgIC8vIHdvcmtlcnMsIHdlIGVubGlzdCBhbiBpbnRlcnZhbCBoYW5kbGUgdGhhdCB3aWxsIHRyeSB0byBmaXJlXG4gICAgLy8gYW4gZXZlbnQgMjAgdGltZXMgcGVyIHNlY29uZCB1bnRpbCBpdCBzdWNjZWVkcy5cblxuICAgIHZhciBpbnRlcnZhbEhhbmRsZSA9IHNldEludGVydmFsKGhhbmRsZVRpbWVyLCA1MCk7XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVUaW1lcigpIHtcbiAgICAgIC8vIFdoaWNoZXZlciB0aW1lciBzdWNjZWVkcyB3aWxsIGNhbmNlbCBib3RoIHRpbWVycyBhbmRcbiAgICAgIC8vIGV4ZWN1dGUgdGhlIGNhbGxiYWNrLlxuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRIYW5kbGUpO1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbEhhbmRsZSk7XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH1cbiAgfTtcbn0gLy8gVGhpcyBpcyBmb3IgYGFzYXAuanNgIG9ubHkuXG4vLyBJdHMgbmFtZSB3aWxsIGJlIHBlcmlvZGljYWxseSByYW5kb21pemVkIHRvIGJyZWFrIGFueSBjb2RlIHRoYXQgZGVwZW5kcyBvblxuLy8gaXRzIGV4aXN0ZW5jZS5cblxuXG5yYXdBc2FwLm1ha2VSZXF1ZXN0Q2FsbEZyb21UaW1lciA9IG1ha2VSZXF1ZXN0Q2FsbEZyb21UaW1lcjsgLy8gQVNBUCB3YXMgb3JpZ2luYWxseSBhIG5leHRUaWNrIHNoaW0gaW5jbHVkZWQgaW4gUS4gVGhpcyB3YXMgZmFjdG9yZWQgb3V0XG4vLyBpbnRvIHRoaXMgQVNBUCBwYWNrYWdlLiBJdCB3YXMgbGF0ZXIgYWRhcHRlZCB0byBSU1ZQIHdoaWNoIG1hZGUgZnVydGhlclxuLy8gYW1lbmRtZW50cy4gVGhlc2UgZGVjaXNpb25zLCBwYXJ0aWN1bGFybHkgdG8gbWFyZ2luYWxpemUgTWVzc2FnZUNoYW5uZWwgYW5kXG4vLyB0byBjYXB0dXJlIHRoZSBNdXRhdGlvbk9ic2VydmVyIGltcGxlbWVudGF0aW9uIGluIGEgY2xvc3VyZSwgd2VyZSBpbnRlZ3JhdGVkXG4vLyBiYWNrIGludG8gQVNBUCBwcm9wZXIuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vdGlsZGVpby9yc3ZwLmpzL2Jsb2IvY2RkZjcyMzI1NDZhOWNmODU4NTI0Yjc1Y2RlNmY5ZWRmNzI2MjBhNy9saWIvcnN2cC9hc2FwLmpzIiwiaW1wb3J0IHsgcmF3QXNhcCB9IGZyb20gJy4vcmF3JzsgLy8gcmF3QXNhcCBwcm92aWRlcyBldmVyeXRoaW5nIHdlIG5lZWQgZXhjZXB0IGV4Y2VwdGlvbiBtYW5hZ2VtZW50LlxuLy8gUmF3VGFza3MgYXJlIHJlY3ljbGVkIHRvIHJlZHVjZSBHQyBjaHVybi5cblxudmFyIGZyZWVUYXNrcyA9IFtdOyAvLyBXZSBxdWV1ZSBlcnJvcnMgdG8gZW5zdXJlIHRoZXkgYXJlIHRocm93biBpbiByaWdodCBvcmRlciAoRklGTykuXG4vLyBBcnJheS1hcy1xdWV1ZSBpcyBnb29kIGVub3VnaCBoZXJlLCBzaW5jZSB3ZSBhcmUganVzdCBkZWFsaW5nIHdpdGggZXhjZXB0aW9ucy5cblxudmFyIHBlbmRpbmdFcnJvcnMgPSBbXTtcbnZhciByZXF1ZXN0RXJyb3JUaHJvdyA9IHJhd0FzYXAubWFrZVJlcXVlc3RDYWxsRnJvbVRpbWVyKHRocm93Rmlyc3RFcnJvcik7XG5cbmZ1bmN0aW9uIHRocm93Rmlyc3RFcnJvcigpIHtcbiAgaWYgKHBlbmRpbmdFcnJvcnMubGVuZ3RoKSB7XG4gICAgdGhyb3cgcGVuZGluZ0Vycm9ycy5zaGlmdCgpO1xuICB9XG59XG4vKipcbiAqIENhbGxzIGEgdGFzayBhcyBzb29uIGFzIHBvc3NpYmxlIGFmdGVyIHJldHVybmluZywgaW4gaXRzIG93biBldmVudCwgd2l0aCBwcmlvcml0eVxuICogb3ZlciBvdGhlciBldmVudHMgbGlrZSBhbmltYXRpb24sIHJlZmxvdywgYW5kIHJlcGFpbnQuIEFuIGVycm9yIHRocm93biBmcm9tIGFuXG4gKiBldmVudCB3aWxsIG5vdCBpbnRlcnJ1cHQsIG5vciBldmVuIHN1YnN0YW50aWFsbHkgc2xvdyBkb3duIHRoZSBwcm9jZXNzaW5nIG9mXG4gKiBvdGhlciBldmVudHMsIGJ1dCB3aWxsIGJlIHJhdGhlciBwb3N0cG9uZWQgdG8gYSBsb3dlciBwcmlvcml0eSBldmVudC5cbiAqIEBwYXJhbSB7e2NhbGx9fSB0YXNrIEEgY2FsbGFibGUgb2JqZWN0LCB0eXBpY2FsbHkgYSBmdW5jdGlvbiB0aGF0IHRha2VzIG5vXG4gKiBhcmd1bWVudHMuXG4gKi9cblxuXG5leHBvcnQgZnVuY3Rpb24gYXNhcCh0YXNrKSB7XG4gIHZhciByYXdUYXNrO1xuXG4gIGlmIChmcmVlVGFza3MubGVuZ3RoKSB7XG4gICAgcmF3VGFzayA9IGZyZWVUYXNrcy5wb3AoKTtcbiAgfSBlbHNlIHtcbiAgICByYXdUYXNrID0gbmV3IFJhd1Rhc2soKTtcbiAgfVxuXG4gIHJhd1Rhc2sudGFzayA9IHRhc2s7XG4gIHJhd0FzYXAocmF3VGFzayk7XG59IC8vIFdlIHdyYXAgdGFza3Mgd2l0aCByZWN5Y2xhYmxlIHRhc2sgb2JqZWN0cy4gIEEgdGFzayBvYmplY3QgaW1wbGVtZW50c1xuLy8gYGNhbGxgLCBqdXN0IGxpa2UgYSBmdW5jdGlvbi5cblxudmFyIFJhd1Rhc2sgPVxuLyoqIEBjbGFzcyAqL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBSYXdUYXNrKCkge31cblxuICBSYXdUYXNrLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnRhc2suY2FsbCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoYXNhcC5vbmVycm9yKSB7XG4gICAgICAgIC8vIFRoaXMgaG9vayBleGlzdHMgcHVyZWx5IGZvciB0ZXN0aW5nIHB1cnBvc2VzLlxuICAgICAgICAvLyBJdHMgbmFtZSB3aWxsIGJlIHBlcmlvZGljYWxseSByYW5kb21pemVkIHRvIGJyZWFrIGFueSBjb2RlIHRoYXRcbiAgICAgICAgLy8gZGVwZW5kcyBvbiBpdHMgZXhpc3RlbmNlLlxuICAgICAgICBhc2FwLm9uZXJyb3IoZXJyb3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSW4gYSB3ZWIgYnJvd3NlciwgZXhjZXB0aW9ucyBhcmUgbm90IGZhdGFsLiBIb3dldmVyLCB0byBhdm9pZFxuICAgICAgICAvLyBzbG93aW5nIGRvd24gdGhlIHF1ZXVlIG9mIHBlbmRpbmcgdGFza3MsIHdlIHJldGhyb3cgdGhlIGVycm9yIGluIGFcbiAgICAgICAgLy8gbG93ZXIgcHJpb3JpdHkgdHVybi5cbiAgICAgICAgcGVuZGluZ0Vycm9ycy5wdXNoKGVycm9yKTtcbiAgICAgICAgcmVxdWVzdEVycm9yVGhyb3coKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgIGZyZWVUYXNrc1tmcmVlVGFza3MubGVuZ3RoXSA9IHRoaXM7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBSYXdUYXNrO1xufSgpOyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH1cblxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgdmFyIF9pID0gYXJyID09IG51bGwgPyBudWxsIDogdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBhcnJbU3ltYm9sLml0ZXJhdG9yXSB8fCBhcnJbXCJAQGl0ZXJhdG9yXCJdOyBpZiAoX2kgPT0gbnVsbCkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9zLCBfZTsgdHJ5IHsgZm9yIChfaSA9IF9pLmNhbGwoYXJyKTsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0gIT0gbnVsbCkgX2lbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9XG5cbmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfVxuXG5pbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tICdAcmVhY3QtZG5kL2ludmFyaWFudCc7XG5pbXBvcnQgeyBhZGRTb3VyY2UgYXMgX2FkZFNvdXJjZSwgYWRkVGFyZ2V0IGFzIF9hZGRUYXJnZXQsIHJlbW92ZVNvdXJjZSBhcyBfcmVtb3ZlU291cmNlLCByZW1vdmVUYXJnZXQgYXMgX3JlbW92ZVRhcmdldCB9IGZyb20gJy4uL2FjdGlvbnMvcmVnaXN0cnknO1xuaW1wb3J0IHsgZ2V0TmV4dFVuaXF1ZUlkIH0gZnJvbSAnLi4vdXRpbHMvZ2V0TmV4dFVuaXF1ZUlkJztcbmltcG9ydCB7IEhhbmRsZXJSb2xlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyB2YWxpZGF0ZVNvdXJjZUNvbnRyYWN0LCB2YWxpZGF0ZVRhcmdldENvbnRyYWN0LCB2YWxpZGF0ZVR5cGUgfSBmcm9tICcuLi9jb250cmFjdHMnO1xuaW1wb3J0IHsgYXNhcCB9IGZyb20gJ0ByZWFjdC1kbmQvYXNhcCc7XG5cbmZ1bmN0aW9uIGdldE5leHRIYW5kbGVySWQocm9sZSkge1xuICB2YXIgaWQgPSBnZXROZXh0VW5pcXVlSWQoKS50b1N0cmluZygpO1xuXG4gIHN3aXRjaCAocm9sZSkge1xuICAgIGNhc2UgSGFuZGxlclJvbGUuU09VUkNFOlxuICAgICAgcmV0dXJuIFwiU1wiLmNvbmNhdChpZCk7XG5cbiAgICBjYXNlIEhhbmRsZXJSb2xlLlRBUkdFVDpcbiAgICAgIHJldHVybiBcIlRcIi5jb25jYXQoaWQpO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gSGFuZGxlciBSb2xlOiBcIi5jb25jYXQocm9sZSkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlUm9sZUZyb21IYW5kbGVySWQoaGFuZGxlcklkKSB7XG4gIHN3aXRjaCAoaGFuZGxlcklkWzBdKSB7XG4gICAgY2FzZSAnUyc6XG4gICAgICByZXR1cm4gSGFuZGxlclJvbGUuU09VUkNFO1xuXG4gICAgY2FzZSAnVCc6XG4gICAgICByZXR1cm4gSGFuZGxlclJvbGUuVEFSR0VUO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIGludmFyaWFudChmYWxzZSwgXCJDYW5ub3QgcGFyc2UgaGFuZGxlciBJRDogXCIuY29uY2F0KGhhbmRsZXJJZCkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1hcENvbnRhaW5zVmFsdWUobWFwLCBzZWFyY2hWYWx1ZSkge1xuICB2YXIgZW50cmllcyA9IG1hcC5lbnRyaWVzKCk7XG4gIHZhciBpc0RvbmUgPSBmYWxzZTtcblxuICBkbyB7XG4gICAgdmFyIF9lbnRyaWVzJG5leHQgPSBlbnRyaWVzLm5leHQoKSxcbiAgICAgICAgZG9uZSA9IF9lbnRyaWVzJG5leHQuZG9uZSxcbiAgICAgICAgX2VudHJpZXMkbmV4dCR2YWx1ZSA9IF9zbGljZWRUb0FycmF5KF9lbnRyaWVzJG5leHQudmFsdWUsIDIpLFxuICAgICAgICB2YWx1ZSA9IF9lbnRyaWVzJG5leHQkdmFsdWVbMV07XG5cbiAgICBpZiAodmFsdWUgPT09IHNlYXJjaFZhbHVlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpc0RvbmUgPSAhIWRvbmU7XG4gIH0gd2hpbGUgKCFpc0RvbmUpO1xuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IHZhciBIYW5kbGVyUmVnaXN0cnlJbXBsID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gSGFuZGxlclJlZ2lzdHJ5SW1wbChzdG9yZSkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBIYW5kbGVyUmVnaXN0cnlJbXBsKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInR5cGVzXCIsIG5ldyBNYXAoKSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJkcmFnU291cmNlc1wiLCBuZXcgTWFwKCkpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZHJvcFRhcmdldHNcIiwgbmV3IE1hcCgpKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBpbm5lZFNvdXJjZUlkXCIsIG51bGwpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicGlubmVkU291cmNlXCIsIG51bGwpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwic3RvcmVcIiwgdm9pZCAwKTtcblxuICAgIHRoaXMuc3RvcmUgPSBzdG9yZTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhIYW5kbGVyUmVnaXN0cnlJbXBsLCBbe1xuICAgIGtleTogXCJhZGRTb3VyY2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkU291cmNlKHR5cGUsIHNvdXJjZSkge1xuICAgICAgdmFsaWRhdGVUeXBlKHR5cGUpO1xuICAgICAgdmFsaWRhdGVTb3VyY2VDb250cmFjdChzb3VyY2UpO1xuICAgICAgdmFyIHNvdXJjZUlkID0gdGhpcy5hZGRIYW5kbGVyKEhhbmRsZXJSb2xlLlNPVVJDRSwgdHlwZSwgc291cmNlKTtcbiAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goX2FkZFNvdXJjZShzb3VyY2VJZCkpO1xuICAgICAgcmV0dXJuIHNvdXJjZUlkO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJhZGRUYXJnZXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkVGFyZ2V0KHR5cGUsIHRhcmdldCkge1xuICAgICAgdmFsaWRhdGVUeXBlKHR5cGUsIHRydWUpO1xuICAgICAgdmFsaWRhdGVUYXJnZXRDb250cmFjdCh0YXJnZXQpO1xuICAgICAgdmFyIHRhcmdldElkID0gdGhpcy5hZGRIYW5kbGVyKEhhbmRsZXJSb2xlLlRBUkdFVCwgdHlwZSwgdGFyZ2V0KTtcbiAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goX2FkZFRhcmdldCh0YXJnZXRJZCkpO1xuICAgICAgcmV0dXJuIHRhcmdldElkO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb250YWluc0hhbmRsZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29udGFpbnNIYW5kbGVyKGhhbmRsZXIpIHtcbiAgICAgIHJldHVybiBtYXBDb250YWluc1ZhbHVlKHRoaXMuZHJhZ1NvdXJjZXMsIGhhbmRsZXIpIHx8IG1hcENvbnRhaW5zVmFsdWUodGhpcy5kcm9wVGFyZ2V0cywgaGFuZGxlcik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFNvdXJjZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTb3VyY2Uoc291cmNlSWQpIHtcbiAgICAgIHZhciBpbmNsdWRlUGlubmVkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTtcbiAgICAgIGludmFyaWFudCh0aGlzLmlzU291cmNlSWQoc291cmNlSWQpLCAnRXhwZWN0ZWQgYSB2YWxpZCBzb3VyY2UgSUQuJyk7XG4gICAgICB2YXIgaXNQaW5uZWQgPSBpbmNsdWRlUGlubmVkICYmIHNvdXJjZUlkID09PSB0aGlzLnBpbm5lZFNvdXJjZUlkO1xuICAgICAgdmFyIHNvdXJjZSA9IGlzUGlubmVkID8gdGhpcy5waW5uZWRTb3VyY2UgOiB0aGlzLmRyYWdTb3VyY2VzLmdldChzb3VyY2VJZCk7XG4gICAgICByZXR1cm4gc291cmNlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRUYXJnZXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGFyZ2V0KHRhcmdldElkKSB7XG4gICAgICBpbnZhcmlhbnQodGhpcy5pc1RhcmdldElkKHRhcmdldElkKSwgJ0V4cGVjdGVkIGEgdmFsaWQgdGFyZ2V0IElELicpO1xuICAgICAgcmV0dXJuIHRoaXMuZHJvcFRhcmdldHMuZ2V0KHRhcmdldElkKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0U291cmNlVHlwZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTb3VyY2VUeXBlKHNvdXJjZUlkKSB7XG4gICAgICBpbnZhcmlhbnQodGhpcy5pc1NvdXJjZUlkKHNvdXJjZUlkKSwgJ0V4cGVjdGVkIGEgdmFsaWQgc291cmNlIElELicpO1xuICAgICAgcmV0dXJuIHRoaXMudHlwZXMuZ2V0KHNvdXJjZUlkKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0VGFyZ2V0VHlwZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUYXJnZXRUeXBlKHRhcmdldElkKSB7XG4gICAgICBpbnZhcmlhbnQodGhpcy5pc1RhcmdldElkKHRhcmdldElkKSwgJ0V4cGVjdGVkIGEgdmFsaWQgdGFyZ2V0IElELicpO1xuICAgICAgcmV0dXJuIHRoaXMudHlwZXMuZ2V0KHRhcmdldElkKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNTb3VyY2VJZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc1NvdXJjZUlkKGhhbmRsZXJJZCkge1xuICAgICAgdmFyIHJvbGUgPSBwYXJzZVJvbGVGcm9tSGFuZGxlcklkKGhhbmRsZXJJZCk7XG4gICAgICByZXR1cm4gcm9sZSA9PT0gSGFuZGxlclJvbGUuU09VUkNFO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc1RhcmdldElkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzVGFyZ2V0SWQoaGFuZGxlcklkKSB7XG4gICAgICB2YXIgcm9sZSA9IHBhcnNlUm9sZUZyb21IYW5kbGVySWQoaGFuZGxlcklkKTtcbiAgICAgIHJldHVybiByb2xlID09PSBIYW5kbGVyUm9sZS5UQVJHRVQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbW92ZVNvdXJjZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVTb3VyY2Uoc291cmNlSWQpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIGludmFyaWFudCh0aGlzLmdldFNvdXJjZShzb3VyY2VJZCksICdFeHBlY3RlZCBhbiBleGlzdGluZyBzb3VyY2UuJyk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKF9yZW1vdmVTb3VyY2Uoc291cmNlSWQpKTtcbiAgICAgIGFzYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5kcmFnU291cmNlcy5kZWxldGUoc291cmNlSWQpO1xuXG4gICAgICAgIF90aGlzLnR5cGVzLmRlbGV0ZShzb3VyY2VJZCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVtb3ZlVGFyZ2V0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZVRhcmdldCh0YXJnZXRJZCkge1xuICAgICAgaW52YXJpYW50KHRoaXMuZ2V0VGFyZ2V0KHRhcmdldElkKSwgJ0V4cGVjdGVkIGFuIGV4aXN0aW5nIHRhcmdldC4nKTtcbiAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goX3JlbW92ZVRhcmdldCh0YXJnZXRJZCkpO1xuICAgICAgdGhpcy5kcm9wVGFyZ2V0cy5kZWxldGUodGFyZ2V0SWQpO1xuICAgICAgdGhpcy50eXBlcy5kZWxldGUodGFyZ2V0SWQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJwaW5Tb3VyY2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGluU291cmNlKHNvdXJjZUlkKSB7XG4gICAgICB2YXIgc291cmNlID0gdGhpcy5nZXRTb3VyY2Uoc291cmNlSWQpO1xuICAgICAgaW52YXJpYW50KHNvdXJjZSwgJ0V4cGVjdGVkIGFuIGV4aXN0aW5nIHNvdXJjZS4nKTtcbiAgICAgIHRoaXMucGlubmVkU291cmNlSWQgPSBzb3VyY2VJZDtcbiAgICAgIHRoaXMucGlubmVkU291cmNlID0gc291cmNlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1bnBpblNvdXJjZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1bnBpblNvdXJjZSgpIHtcbiAgICAgIGludmFyaWFudCh0aGlzLnBpbm5lZFNvdXJjZSwgJ05vIHNvdXJjZSBpcyBwaW5uZWQgYXQgdGhlIHRpbWUuJyk7XG4gICAgICB0aGlzLnBpbm5lZFNvdXJjZUlkID0gbnVsbDtcbiAgICAgIHRoaXMucGlubmVkU291cmNlID0gbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYWRkSGFuZGxlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRIYW5kbGVyKHJvbGUsIHR5cGUsIGhhbmRsZXIpIHtcbiAgICAgIHZhciBpZCA9IGdldE5leHRIYW5kbGVySWQocm9sZSk7XG4gICAgICB0aGlzLnR5cGVzLnNldChpZCwgdHlwZSk7XG5cbiAgICAgIGlmIChyb2xlID09PSBIYW5kbGVyUm9sZS5TT1VSQ0UpIHtcbiAgICAgICAgdGhpcy5kcmFnU291cmNlcy5zZXQoaWQsIGhhbmRsZXIpO1xuICAgICAgfSBlbHNlIGlmIChyb2xlID09PSBIYW5kbGVyUm9sZS5UQVJHRVQpIHtcbiAgICAgICAgdGhpcy5kcm9wVGFyZ2V0cy5zZXQoaWQsIGhhbmRsZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaWQ7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEhhbmRsZXJSZWdpc3RyeUltcGw7XG59KCk7IiwiaW1wb3J0IHsgRHJhZ0Ryb3BNYW5hZ2VySW1wbCB9IGZyb20gJy4vY2xhc3Nlcy9EcmFnRHJvcE1hbmFnZXJJbXBsJztcbmltcG9ydCB7IGNyZWF0ZVN0b3JlIH0gZnJvbSAncmVkdXgnO1xuaW1wb3J0IHsgcmVkdWNlIH0gZnJvbSAnLi9yZWR1Y2Vycyc7XG5pbXBvcnQgeyBEcmFnRHJvcE1vbml0b3JJbXBsIH0gZnJvbSAnLi9jbGFzc2VzL0RyYWdEcm9wTW9uaXRvckltcGwnO1xuaW1wb3J0IHsgSGFuZGxlclJlZ2lzdHJ5SW1wbCB9IGZyb20gJy4vY2xhc3Nlcy9IYW5kbGVyUmVnaXN0cnlJbXBsJztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEcmFnRHJvcE1hbmFnZXIoYmFja2VuZEZhY3RvcnkpIHtcbiAgdmFyIGdsb2JhbENvbnRleHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDtcbiAgdmFyIGJhY2tlbmRPcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcbiAgdmFyIGRlYnVnTW9kZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7XG4gIHZhciBzdG9yZSA9IG1ha2VTdG9yZUluc3RhbmNlKGRlYnVnTW9kZSk7XG4gIHZhciBtb25pdG9yID0gbmV3IERyYWdEcm9wTW9uaXRvckltcGwoc3RvcmUsIG5ldyBIYW5kbGVyUmVnaXN0cnlJbXBsKHN0b3JlKSk7XG4gIHZhciBtYW5hZ2VyID0gbmV3IERyYWdEcm9wTWFuYWdlckltcGwoc3RvcmUsIG1vbml0b3IpO1xuICB2YXIgYmFja2VuZCA9IGJhY2tlbmRGYWN0b3J5KG1hbmFnZXIsIGdsb2JhbENvbnRleHQsIGJhY2tlbmRPcHRpb25zKTtcbiAgbWFuYWdlci5yZWNlaXZlQmFja2VuZChiYWNrZW5kKTtcbiAgcmV0dXJuIG1hbmFnZXI7XG59XG5cbmZ1bmN0aW9uIG1ha2VTdG9yZUluc3RhbmNlKGRlYnVnTW9kZSkge1xuICAvLyBUT0RPOiBpZiB3ZSBldmVyIG1ha2UgYSByZWFjdC1uYXRpdmUgdmVyc2lvbiBvZiB0aGlzLFxuICAvLyB3ZSdsbCBuZWVkIHRvIGNvbnNpZGVyIGhvdyB0byBwdWxsIG9mZiBkZXYtdG9vbGluZ1xuICB2YXIgcmVkdXhEZXZUb29scyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9fO1xuICByZXR1cm4gY3JlYXRlU3RvcmUocmVkdWNlLCBkZWJ1Z01vZGUgJiYgcmVkdXhEZXZUb29scyAmJiByZWR1eERldlRvb2xzKHtcbiAgICBuYW1lOiAnZG5kLWNvcmUnLFxuICAgIGluc3RhbmNlSWQ6ICdkbmQtY29yZSdcbiAgfSkpO1xufSIsInZhciBfZXhjbHVkZWQgPSBbXCJjaGlsZHJlblwiXTtcblxuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH1cblxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgdmFyIF9pID0gYXJyID09IG51bGwgPyBudWxsIDogdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBhcnJbU3ltYm9sLml0ZXJhdG9yXSB8fCBhcnJbXCJAQGl0ZXJhdG9yXCJdOyBpZiAoX2kgPT0gbnVsbCkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9zLCBfZTsgdHJ5IHsgZm9yIChfaSA9IF9pLmNhbGwoYXJyKTsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0gIT0gbnVsbCkgX2lbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9XG5cbmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpOyB2YXIga2V5LCBpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IHt9OyB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7IHZhciBrZXksIGk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZUtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5pbXBvcnQgeyBqc3ggYXMgX2pzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCBtZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgY3JlYXRlRHJhZ0Ryb3BNYW5hZ2VyIH0gZnJvbSAnZG5kLWNvcmUnO1xuaW1wb3J0IHsgRG5kQ29udGV4dCB9IGZyb20gJy4vRG5kQ29udGV4dCc7XG52YXIgcmVmQ291bnQgPSAwO1xudmFyIElOU1RBTkNFX1NZTSA9IFN5bWJvbC5mb3IoJ19fUkVBQ1RfRE5EX0NPTlRFWFRfSU5TVEFOQ0VfXycpO1xuLyoqXG4gKiBBIFJlYWN0IGNvbXBvbmVudCB0aGF0IHByb3ZpZGVzIHRoZSBSZWFjdC1EbkQgY29udGV4dFxuICovXG5cbmV4cG9ydCB2YXIgRG5kUHJvdmlkZXIgPSBtZW1vKGZ1bmN0aW9uIERuZFByb3ZpZGVyKF9yZWYpIHtcbiAgdmFyIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbixcbiAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIF9leGNsdWRlZCk7XG5cbiAgdmFyIF9nZXREbmRDb250ZXh0VmFsdWUgPSBnZXREbmRDb250ZXh0VmFsdWUocHJvcHMpLFxuICAgICAgX2dldERuZENvbnRleHRWYWx1ZTIgPSBfc2xpY2VkVG9BcnJheShfZ2V0RG5kQ29udGV4dFZhbHVlLCAyKSxcbiAgICAgIG1hbmFnZXIgPSBfZ2V0RG5kQ29udGV4dFZhbHVlMlswXSxcbiAgICAgIGlzR2xvYmFsSW5zdGFuY2UgPSBfZ2V0RG5kQ29udGV4dFZhbHVlMlsxXTsgLy8gbWVtb2l6ZWQgZnJvbSBwcm9wc1xuXG4gIC8qKlxuICAgKiBJZiB0aGUgZ2xvYmFsIGNvbnRleHQgd2FzIHVzZWQgdG8gc3RvcmUgdGhlIERORCBjb250ZXh0XG4gICAqIHRoZW4gd2hlcmUgdGhlcmVzIG5vIG1vcmUgcmVmZXJlbmNlcyB0byBpdCB3ZSBzaG91bGRcbiAgICogY2xlYW4gaXQgdXAgdG8gYXZvaWQgbWVtb3J5IGxlYWtzXG4gICAqL1xuXG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaXNHbG9iYWxJbnN0YW5jZSkge1xuICAgICAgdmFyIGNvbnRleHQgPSBnZXRHbG9iYWxDb250ZXh0KCk7XG4gICAgICArK3JlZkNvdW50O1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKC0tcmVmQ291bnQgPT09IDApIHtcbiAgICAgICAgICBjb250ZXh0W0lOU1RBTkNFX1NZTV0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW10pO1xuICByZXR1cm4gX2pzeChEbmRDb250ZXh0LlByb3ZpZGVyLCBPYmplY3QuYXNzaWduKHtcbiAgICB2YWx1ZTogbWFuYWdlclxuICB9LCB7XG4gICAgY2hpbGRyZW46IGNoaWxkcmVuXG4gIH0pLCB2b2lkIDApO1xufSk7XG5cbmZ1bmN0aW9uIGdldERuZENvbnRleHRWYWx1ZShwcm9wcykge1xuICBpZiAoJ21hbmFnZXInIGluIHByb3BzKSB7XG4gICAgdmFyIF9tYW5hZ2VyID0ge1xuICAgICAgZHJhZ0Ryb3BNYW5hZ2VyOiBwcm9wcy5tYW5hZ2VyXG4gICAgfTtcbiAgICByZXR1cm4gW19tYW5hZ2VyLCBmYWxzZV07XG4gIH1cblxuICB2YXIgbWFuYWdlciA9IGNyZWF0ZVNpbmdsZXRvbkRuZENvbnRleHQocHJvcHMuYmFja2VuZCwgcHJvcHMuY29udGV4dCwgcHJvcHMub3B0aW9ucywgcHJvcHMuZGVidWdNb2RlKTtcbiAgdmFyIGlzR2xvYmFsSW5zdGFuY2UgPSAhcHJvcHMuY29udGV4dDtcbiAgcmV0dXJuIFttYW5hZ2VyLCBpc0dsb2JhbEluc3RhbmNlXTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2luZ2xldG9uRG5kQ29udGV4dChiYWNrZW5kKSB7XG4gIHZhciBjb250ZXh0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBnZXRHbG9iYWxDb250ZXh0KCk7XG4gIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQ7XG4gIHZhciBkZWJ1Z01vZGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMyA/IGFyZ3VtZW50c1szXSA6IHVuZGVmaW5lZDtcbiAgdmFyIGN0eCA9IGNvbnRleHQ7XG5cbiAgaWYgKCFjdHhbSU5TVEFOQ0VfU1lNXSkge1xuICAgIGN0eFtJTlNUQU5DRV9TWU1dID0ge1xuICAgICAgZHJhZ0Ryb3BNYW5hZ2VyOiBjcmVhdGVEcmFnRHJvcE1hbmFnZXIoYmFja2VuZCwgY29udGV4dCwgb3B0aW9ucywgZGVidWdNb2RlKVxuICAgIH07XG4gIH1cblxuICByZXR1cm4gY3R4W0lOU1RBTkNFX1NZTV07XG59XG5cbmZ1bmN0aW9uIGdldEdsb2JhbENvbnRleHQoKSB7XG4gIHJldHVybiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHdpbmRvdztcbn0iLCJmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfVxuXG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyB2YXIgX2kgPSBhcnIgPT0gbnVsbCA/IG51bGwgOiB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIGFycltTeW1ib2wuaXRlcmF0b3JdIHx8IGFycltcIkBAaXRlcmF0b3JcIl07IGlmIChfaSA9PSBudWxsKSByZXR1cm47IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX3MsIF9lOyB0cnkgeyBmb3IgKF9pID0gX2kuY2FsbChhcnIpOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSAhPSBudWxsKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH1cblxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9XG5cbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZURyYWdEcm9wTWFuYWdlciB9IGZyb20gJy4vdXNlRHJhZ0Ryb3BNYW5hZ2VyJztcbmltcG9ydCB7IHVzZUNvbGxlY3RvciB9IGZyb20gJy4vdXNlQ29sbGVjdG9yJztcbi8qKlxuICogdXNlRHJhZ0xheWVyIEhvb2tcbiAqIEBwYXJhbSBjb2xsZWN0b3IgVGhlIHByb3BlcnR5IGNvbGxlY3RvclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VEcmFnTGF5ZXIoY29sbGVjdCkge1xuICB2YXIgZHJhZ0Ryb3BNYW5hZ2VyID0gdXNlRHJhZ0Ryb3BNYW5hZ2VyKCk7XG4gIHZhciBtb25pdG9yID0gZHJhZ0Ryb3BNYW5hZ2VyLmdldE1vbml0b3IoKTtcblxuICB2YXIgX3VzZUNvbGxlY3RvciA9IHVzZUNvbGxlY3Rvcihtb25pdG9yLCBjb2xsZWN0KSxcbiAgICAgIF91c2VDb2xsZWN0b3IyID0gX3NsaWNlZFRvQXJyYXkoX3VzZUNvbGxlY3RvciwgMiksXG4gICAgICBjb2xsZWN0ZWQgPSBfdXNlQ29sbGVjdG9yMlswXSxcbiAgICAgIHVwZGF0ZUNvbGxlY3RlZCA9IF91c2VDb2xsZWN0b3IyWzFdO1xuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG1vbml0b3Iuc3Vic2NyaWJlVG9PZmZzZXRDaGFuZ2UodXBkYXRlQ29sbGVjdGVkKTtcbiAgfSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG1vbml0b3Iuc3Vic2NyaWJlVG9TdGF0ZUNoYW5nZSh1cGRhdGVDb2xsZWN0ZWQpO1xuICB9KTtcbiAgcmV0dXJuIGNvbGxlY3RlZDtcbn0iLCIvLyBjaGVhcCBsb2Rhc2ggcmVwbGFjZW1lbnRzXG5leHBvcnQgZnVuY3Rpb24gbWVtb2l6ZShmbikge1xuICB2YXIgcmVzdWx0ID0gbnVsbDtcblxuICB2YXIgbWVtb2l6ZWQgPSBmdW5jdGlvbiBtZW1vaXplZCgpIHtcbiAgICBpZiAocmVzdWx0ID09IG51bGwpIHtcbiAgICAgIHJlc3VsdCA9IGZuKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICByZXR1cm4gbWVtb2l6ZWQ7XG59XG4vKipcbiAqIGRyb3AtaW4gcmVwbGFjZW1lbnQgZm9yIF8ud2l0aG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB3aXRob3V0KGl0ZW1zLCBpdGVtKSB7XG4gIHJldHVybiBpdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGkpIHtcbiAgICByZXR1cm4gaSAhPT0gaXRlbTtcbiAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdW5pb24oaXRlbXNBLCBpdGVtc0IpIHtcbiAgdmFyIHNldCA9IG5ldyBTZXQoKTtcblxuICB2YXIgaW5zZXJ0SXRlbSA9IGZ1bmN0aW9uIGluc2VydEl0ZW0oaXRlbSkge1xuICAgIHJldHVybiBzZXQuYWRkKGl0ZW0pO1xuICB9O1xuXG4gIGl0ZW1zQS5mb3JFYWNoKGluc2VydEl0ZW0pO1xuICBpdGVtc0IuZm9yRWFjaChpbnNlcnRJdGVtKTtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBzZXQuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIHJlc3VsdC5wdXNoKGtleSk7XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufSIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuaW1wb3J0IHsgdW5pb24sIHdpdGhvdXQgfSBmcm9tICcuL3V0aWxzL2pzX3V0aWxzJztcbmV4cG9ydCB2YXIgRW50ZXJMZWF2ZUNvdW50ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBFbnRlckxlYXZlQ291bnRlcihpc05vZGVJbkRvY3VtZW50KSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEVudGVyTGVhdmVDb3VudGVyKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVudGVyZWRcIiwgW10pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaXNOb2RlSW5Eb2N1bWVudFwiLCB2b2lkIDApO1xuXG4gICAgdGhpcy5pc05vZGVJbkRvY3VtZW50ID0gaXNOb2RlSW5Eb2N1bWVudDtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhFbnRlckxlYXZlQ291bnRlciwgW3tcbiAgICBrZXk6IFwiZW50ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW50ZXIoZW50ZXJpbmdOb2RlKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgcHJldmlvdXNMZW5ndGggPSB0aGlzLmVudGVyZWQubGVuZ3RoO1xuXG4gICAgICB2YXIgaXNOb2RlRW50ZXJlZCA9IGZ1bmN0aW9uIGlzTm9kZUVudGVyZWQobm9kZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMuaXNOb2RlSW5Eb2N1bWVudChub2RlKSAmJiAoIW5vZGUuY29udGFpbnMgfHwgbm9kZS5jb250YWlucyhlbnRlcmluZ05vZGUpKTtcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuZW50ZXJlZCA9IHVuaW9uKHRoaXMuZW50ZXJlZC5maWx0ZXIoaXNOb2RlRW50ZXJlZCksIFtlbnRlcmluZ05vZGVdKTtcbiAgICAgIHJldHVybiBwcmV2aW91c0xlbmd0aCA9PT0gMCAmJiB0aGlzLmVudGVyZWQubGVuZ3RoID4gMDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibGVhdmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbGVhdmUobGVhdmluZ05vZGUpIHtcbiAgICAgIHZhciBwcmV2aW91c0xlbmd0aCA9IHRoaXMuZW50ZXJlZC5sZW5ndGg7XG4gICAgICB0aGlzLmVudGVyZWQgPSB3aXRob3V0KHRoaXMuZW50ZXJlZC5maWx0ZXIodGhpcy5pc05vZGVJbkRvY3VtZW50KSwgbGVhdmluZ05vZGUpO1xuICAgICAgcmV0dXJuIHByZXZpb3VzTGVuZ3RoID4gMCAmJiB0aGlzLmVudGVyZWQubGVuZ3RoID09PSAwO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZXNldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgIHRoaXMuZW50ZXJlZCA9IFtdO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBFbnRlckxlYXZlQ291bnRlcjtcbn0oKTsiLCJpbXBvcnQgeyBtZW1vaXplIH0gZnJvbSAnLi91dGlscy9qc191dGlscyc7XG5leHBvcnQgdmFyIGlzRmlyZWZveCA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gL2ZpcmVmb3gvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xufSk7XG5leHBvcnQgdmFyIGlzU2FmYXJpID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBCb29sZWFuKHdpbmRvdy5zYWZhcmkpO1xufSk7IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5leHBvcnQgdmFyIE1vbm90b25pY0ludGVycG9sYW50ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gTW9ub3RvbmljSW50ZXJwb2xhbnQoeHMsIHlzKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vbm90b25pY0ludGVycG9sYW50KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInhzXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ5c1wiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYzFzXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjMnNcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImMzc1wiLCB2b2lkIDApO1xuXG4gICAgdmFyIGxlbmd0aCA9IHhzLmxlbmd0aDsgLy8gUmVhcnJhbmdlIHhzIGFuZCB5cyBzbyB0aGF0IHhzIGlzIHNvcnRlZFxuXG4gICAgdmFyIGluZGV4ZXMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGluZGV4ZXMucHVzaChpKTtcbiAgICB9XG5cbiAgICBpbmRleGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiB4c1thXSA8IHhzW2JdID8gLTEgOiAxO1xuICAgIH0pOyAvLyBHZXQgY29uc2VjdXRpdmUgZGlmZmVyZW5jZXMgYW5kIHNsb3Blc1xuXG4gICAgdmFyIGR5cyA9IFtdO1xuICAgIHZhciBkeHMgPSBbXTtcbiAgICB2YXIgbXMgPSBbXTtcbiAgICB2YXIgZHg7XG4gICAgdmFyIGR5O1xuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGxlbmd0aCAtIDE7IF9pKyspIHtcbiAgICAgIGR4ID0geHNbX2kgKyAxXSAtIHhzW19pXTtcbiAgICAgIGR5ID0geXNbX2kgKyAxXSAtIHlzW19pXTtcbiAgICAgIGR4cy5wdXNoKGR4KTtcbiAgICAgIGR5cy5wdXNoKGR5KTtcbiAgICAgIG1zLnB1c2goZHkgLyBkeCk7XG4gICAgfSAvLyBHZXQgZGVncmVlLTEgY29lZmZpY2llbnRzXG5cblxuICAgIHZhciBjMXMgPSBbbXNbMF1dO1xuXG4gICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgZHhzLmxlbmd0aCAtIDE7IF9pMisrKSB7XG4gICAgICB2YXIgbTIgPSBtc1tfaTJdO1xuICAgICAgdmFyIG1OZXh0ID0gbXNbX2kyICsgMV07XG5cbiAgICAgIGlmIChtMiAqIG1OZXh0IDw9IDApIHtcbiAgICAgICAgYzFzLnB1c2goMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkeCA9IGR4c1tfaTJdO1xuICAgICAgICB2YXIgZHhOZXh0ID0gZHhzW19pMiArIDFdO1xuICAgICAgICB2YXIgY29tbW9uID0gZHggKyBkeE5leHQ7XG4gICAgICAgIGMxcy5wdXNoKDMgKiBjb21tb24gLyAoKGNvbW1vbiArIGR4TmV4dCkgLyBtMiArIChjb21tb24gKyBkeCkgLyBtTmV4dCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGMxcy5wdXNoKG1zW21zLmxlbmd0aCAtIDFdKTsgLy8gR2V0IGRlZ3JlZS0yIGFuZCBkZWdyZWUtMyBjb2VmZmljaWVudHNcblxuICAgIHZhciBjMnMgPSBbXTtcbiAgICB2YXIgYzNzID0gW107XG4gICAgdmFyIG07XG5cbiAgICBmb3IgKHZhciBfaTMgPSAwOyBfaTMgPCBjMXMubGVuZ3RoIC0gMTsgX2kzKyspIHtcbiAgICAgIG0gPSBtc1tfaTNdO1xuICAgICAgdmFyIGMxID0gYzFzW19pM107XG4gICAgICB2YXIgaW52RHggPSAxIC8gZHhzW19pM107XG5cbiAgICAgIHZhciBfY29tbW9uID0gYzEgKyBjMXNbX2kzICsgMV0gLSBtIC0gbTtcblxuICAgICAgYzJzLnB1c2goKG0gLSBjMSAtIF9jb21tb24pICogaW52RHgpO1xuICAgICAgYzNzLnB1c2goX2NvbW1vbiAqIGludkR4ICogaW52RHgpO1xuICAgIH1cblxuICAgIHRoaXMueHMgPSB4cztcbiAgICB0aGlzLnlzID0geXM7XG4gICAgdGhpcy5jMXMgPSBjMXM7XG4gICAgdGhpcy5jMnMgPSBjMnM7XG4gICAgdGhpcy5jM3MgPSBjM3M7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTW9ub3RvbmljSW50ZXJwb2xhbnQsIFt7XG4gICAga2V5OiBcImludGVycG9sYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGludGVycG9sYXRlKHgpIHtcbiAgICAgIHZhciB4cyA9IHRoaXMueHMsXG4gICAgICAgICAgeXMgPSB0aGlzLnlzLFxuICAgICAgICAgIGMxcyA9IHRoaXMuYzFzLFxuICAgICAgICAgIGMycyA9IHRoaXMuYzJzLFxuICAgICAgICAgIGMzcyA9IHRoaXMuYzNzOyAvLyBUaGUgcmlnaHRtb3N0IHBvaW50IGluIHRoZSBkYXRhc2V0IHNob3VsZCBnaXZlIGFuIGV4YWN0IHJlc3VsdFxuXG4gICAgICB2YXIgaSA9IHhzLmxlbmd0aCAtIDE7XG5cbiAgICAgIGlmICh4ID09PSB4c1tpXSkge1xuICAgICAgICByZXR1cm4geXNbaV07XG4gICAgICB9IC8vIFNlYXJjaCBmb3IgdGhlIGludGVydmFsIHggaXMgaW4sIHJldHVybmluZyB0aGUgY29ycmVzcG9uZGluZyB5IGlmIHggaXMgb25lIG9mIHRoZSBvcmlnaW5hbCB4c1xuXG5cbiAgICAgIHZhciBsb3cgPSAwO1xuICAgICAgdmFyIGhpZ2ggPSBjM3MubGVuZ3RoIC0gMTtcbiAgICAgIHZhciBtaWQ7XG5cbiAgICAgIHdoaWxlIChsb3cgPD0gaGlnaCkge1xuICAgICAgICBtaWQgPSBNYXRoLmZsb29yKDAuNSAqIChsb3cgKyBoaWdoKSk7XG4gICAgICAgIHZhciB4SGVyZSA9IHhzW21pZF07XG5cbiAgICAgICAgaWYgKHhIZXJlIDwgeCkge1xuICAgICAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgICAgIH0gZWxzZSBpZiAoeEhlcmUgPiB4KSB7XG4gICAgICAgICAgaGlnaCA9IG1pZCAtIDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHlzW21pZF07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaSA9IE1hdGgubWF4KDAsIGhpZ2gpOyAvLyBJbnRlcnBvbGF0ZVxuXG4gICAgICB2YXIgZGlmZiA9IHggLSB4c1tpXTtcbiAgICAgIHZhciBkaWZmU3EgPSBkaWZmICogZGlmZjtcbiAgICAgIHJldHVybiB5c1tpXSArIGMxc1tpXSAqIGRpZmYgKyBjMnNbaV0gKiBkaWZmU3EgKyBjM3NbaV0gKiBkaWZmICogZGlmZlNxO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBNb25vdG9uaWNJbnRlcnBvbGFudDtcbn0oKTsiLCJpbXBvcnQgeyBpc1NhZmFyaSwgaXNGaXJlZm94IH0gZnJvbSAnLi9Ccm93c2VyRGV0ZWN0b3InO1xuaW1wb3J0IHsgTW9ub3RvbmljSW50ZXJwb2xhbnQgfSBmcm9tICcuL01vbm90b25pY0ludGVycG9sYW50JztcbnZhciBFTEVNRU5UX05PREUgPSAxO1xuZXhwb3J0IGZ1bmN0aW9uIGdldE5vZGVDbGllbnRPZmZzZXQobm9kZSkge1xuICB2YXIgZWwgPSBub2RlLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREUgPyBub2RlIDogbm9kZS5wYXJlbnRFbGVtZW50O1xuXG4gIGlmICghZWwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBfZWwkZ2V0Qm91bmRpbmdDbGllbnQgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgIHRvcCA9IF9lbCRnZXRCb3VuZGluZ0NsaWVudC50b3AsXG4gICAgICBsZWZ0ID0gX2VsJGdldEJvdW5kaW5nQ2xpZW50LmxlZnQ7XG5cbiAgcmV0dXJuIHtcbiAgICB4OiBsZWZ0LFxuICAgIHk6IHRvcFxuICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEV2ZW50Q2xpZW50T2Zmc2V0KGUpIHtcbiAgcmV0dXJuIHtcbiAgICB4OiBlLmNsaWVudFgsXG4gICAgeTogZS5jbGllbnRZXG4gIH07XG59XG5cbmZ1bmN0aW9uIGlzSW1hZ2VOb2RlKG5vZGUpIHtcbiAgdmFyIF9kb2N1bWVudCRkb2N1bWVudEVsZTtcblxuICByZXR1cm4gbm9kZS5ub2RlTmFtZSA9PT0gJ0lNRycgJiYgKGlzRmlyZWZveCgpIHx8ICEoKF9kb2N1bWVudCRkb2N1bWVudEVsZSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkgIT09IG51bGwgJiYgX2RvY3VtZW50JGRvY3VtZW50RWxlICE9PSB2b2lkIDAgJiYgX2RvY3VtZW50JGRvY3VtZW50RWxlLmNvbnRhaW5zKG5vZGUpKSk7XG59XG5cbmZ1bmN0aW9uIGdldERyYWdQcmV2aWV3U2l6ZShpc0ltYWdlLCBkcmFnUHJldmlldywgc291cmNlV2lkdGgsIHNvdXJjZUhlaWdodCkge1xuICB2YXIgZHJhZ1ByZXZpZXdXaWR0aCA9IGlzSW1hZ2UgPyBkcmFnUHJldmlldy53aWR0aCA6IHNvdXJjZVdpZHRoO1xuICB2YXIgZHJhZ1ByZXZpZXdIZWlnaHQgPSBpc0ltYWdlID8gZHJhZ1ByZXZpZXcuaGVpZ2h0IDogc291cmNlSGVpZ2h0OyAvLyBXb3JrIGFyb3VuZCBAMnggY29vcmRpbmF0ZSBkaXNjcmVwYW5jaWVzIGluIGJyb3dzZXJzXG5cbiAgaWYgKGlzU2FmYXJpKCkgJiYgaXNJbWFnZSkge1xuICAgIGRyYWdQcmV2aWV3SGVpZ2h0IC89IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgIGRyYWdQcmV2aWV3V2lkdGggLz0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGRyYWdQcmV2aWV3V2lkdGg6IGRyYWdQcmV2aWV3V2lkdGgsXG4gICAgZHJhZ1ByZXZpZXdIZWlnaHQ6IGRyYWdQcmV2aWV3SGVpZ2h0XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREcmFnUHJldmlld09mZnNldChzb3VyY2VOb2RlLCBkcmFnUHJldmlldywgY2xpZW50T2Zmc2V0LCBhbmNob3JQb2ludCwgb2Zmc2V0UG9pbnQpIHtcbiAgLy8gVGhlIGJyb3dzZXJzIHdpbGwgdXNlIHRoZSBpbWFnZSBpbnRyaW5zaWMgc2l6ZSB1bmRlciBkaWZmZXJlbnQgY29uZGl0aW9ucy5cbiAgLy8gRmlyZWZveCBvbmx5IGNhcmVzIGlmIGl0J3MgYW4gaW1hZ2UsIGJ1dCBXZWJLaXQgYWxzbyB3YW50cyBpdCB0byBiZSBkZXRhY2hlZC5cbiAgdmFyIGlzSW1hZ2UgPSBpc0ltYWdlTm9kZShkcmFnUHJldmlldyk7XG4gIHZhciBkcmFnUHJldmlld05vZGUgPSBpc0ltYWdlID8gc291cmNlTm9kZSA6IGRyYWdQcmV2aWV3O1xuICB2YXIgZHJhZ1ByZXZpZXdOb2RlT2Zmc2V0RnJvbUNsaWVudCA9IGdldE5vZGVDbGllbnRPZmZzZXQoZHJhZ1ByZXZpZXdOb2RlKTtcbiAgdmFyIG9mZnNldEZyb21EcmFnUHJldmlldyA9IHtcbiAgICB4OiBjbGllbnRPZmZzZXQueCAtIGRyYWdQcmV2aWV3Tm9kZU9mZnNldEZyb21DbGllbnQueCxcbiAgICB5OiBjbGllbnRPZmZzZXQueSAtIGRyYWdQcmV2aWV3Tm9kZU9mZnNldEZyb21DbGllbnQueVxuICB9O1xuICB2YXIgc291cmNlV2lkdGggPSBzb3VyY2VOb2RlLm9mZnNldFdpZHRoLFxuICAgICAgc291cmNlSGVpZ2h0ID0gc291cmNlTm9kZS5vZmZzZXRIZWlnaHQ7XG4gIHZhciBhbmNob3JYID0gYW5jaG9yUG9pbnQuYW5jaG9yWCxcbiAgICAgIGFuY2hvclkgPSBhbmNob3JQb2ludC5hbmNob3JZO1xuXG4gIHZhciBfZ2V0RHJhZ1ByZXZpZXdTaXplID0gZ2V0RHJhZ1ByZXZpZXdTaXplKGlzSW1hZ2UsIGRyYWdQcmV2aWV3LCBzb3VyY2VXaWR0aCwgc291cmNlSGVpZ2h0KSxcbiAgICAgIGRyYWdQcmV2aWV3V2lkdGggPSBfZ2V0RHJhZ1ByZXZpZXdTaXplLmRyYWdQcmV2aWV3V2lkdGgsXG4gICAgICBkcmFnUHJldmlld0hlaWdodCA9IF9nZXREcmFnUHJldmlld1NpemUuZHJhZ1ByZXZpZXdIZWlnaHQ7XG5cbiAgdmFyIGNhbGN1bGF0ZVlPZmZzZXQgPSBmdW5jdGlvbiBjYWxjdWxhdGVZT2Zmc2V0KCkge1xuICAgIHZhciBpbnRlcnBvbGFudFkgPSBuZXcgTW9ub3RvbmljSW50ZXJwb2xhbnQoWzAsIDAuNSwgMV0sIFsvLyBEb2NrIHRvIHRoZSB0b3BcbiAgICBvZmZzZXRGcm9tRHJhZ1ByZXZpZXcueSwgLy8gQWxpZ24gYXQgdGhlIGNlbnRlclxuICAgIG9mZnNldEZyb21EcmFnUHJldmlldy55IC8gc291cmNlSGVpZ2h0ICogZHJhZ1ByZXZpZXdIZWlnaHQsIC8vIERvY2sgdG8gdGhlIGJvdHRvbVxuICAgIG9mZnNldEZyb21EcmFnUHJldmlldy55ICsgZHJhZ1ByZXZpZXdIZWlnaHQgLSBzb3VyY2VIZWlnaHRdKTtcbiAgICB2YXIgeSA9IGludGVycG9sYW50WS5pbnRlcnBvbGF0ZShhbmNob3JZKTsgLy8gV29yayBhcm91bmQgU2FmYXJpIDggcG9zaXRpb25pbmcgYnVnXG5cbiAgICBpZiAoaXNTYWZhcmkoKSAmJiBpc0ltYWdlKSB7XG4gICAgICAvLyBXZSdsbCBoYXZlIHRvIHdhaXQgZm9yIEAzeCB0byBzZWUgaWYgdGhpcyBpcyBlbnRpcmVseSBjb3JyZWN0XG4gICAgICB5ICs9ICh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAtIDEpICogZHJhZ1ByZXZpZXdIZWlnaHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHk7XG4gIH07XG5cbiAgdmFyIGNhbGN1bGF0ZVhPZmZzZXQgPSBmdW5jdGlvbiBjYWxjdWxhdGVYT2Zmc2V0KCkge1xuICAgIC8vIEludGVycG9sYXRlIGNvb3JkaW5hdGVzIGRlcGVuZGluZyBvbiBhbmNob3IgcG9pbnRcbiAgICAvLyBJZiB5b3Uga25vdyBhIHNpbXBsZXIgd2F5IHRvIGRvIHRoaXMsIGxldCBtZSBrbm93XG4gICAgdmFyIGludGVycG9sYW50WCA9IG5ldyBNb25vdG9uaWNJbnRlcnBvbGFudChbMCwgMC41LCAxXSwgWy8vIERvY2sgdG8gdGhlIGxlZnRcbiAgICBvZmZzZXRGcm9tRHJhZ1ByZXZpZXcueCwgLy8gQWxpZ24gYXQgdGhlIGNlbnRlclxuICAgIG9mZnNldEZyb21EcmFnUHJldmlldy54IC8gc291cmNlV2lkdGggKiBkcmFnUHJldmlld1dpZHRoLCAvLyBEb2NrIHRvIHRoZSByaWdodFxuICAgIG9mZnNldEZyb21EcmFnUHJldmlldy54ICsgZHJhZ1ByZXZpZXdXaWR0aCAtIHNvdXJjZVdpZHRoXSk7XG4gICAgcmV0dXJuIGludGVycG9sYW50WC5pbnRlcnBvbGF0ZShhbmNob3JYKTtcbiAgfTsgLy8gRm9yY2Ugb2Zmc2V0cyBpZiBzcGVjaWZpZWQgaW4gdGhlIG9wdGlvbnMuXG5cblxuICB2YXIgb2Zmc2V0WCA9IG9mZnNldFBvaW50Lm9mZnNldFgsXG4gICAgICBvZmZzZXRZID0gb2Zmc2V0UG9pbnQub2Zmc2V0WTtcbiAgdmFyIGlzTWFudWFsT2Zmc2V0WCA9IG9mZnNldFggPT09IDAgfHwgb2Zmc2V0WDtcbiAgdmFyIGlzTWFudWFsT2Zmc2V0WSA9IG9mZnNldFkgPT09IDAgfHwgb2Zmc2V0WTtcbiAgcmV0dXJuIHtcbiAgICB4OiBpc01hbnVhbE9mZnNldFggPyBvZmZzZXRYIDogY2FsY3VsYXRlWE9mZnNldCgpLFxuICAgIHk6IGlzTWFudWFsT2Zmc2V0WSA/IG9mZnNldFkgOiBjYWxjdWxhdGVZT2Zmc2V0KClcbiAgfTtcbn0iLCJleHBvcnQgZnVuY3Rpb24gZ2V0RGF0YUZyb21EYXRhVHJhbnNmZXIoZGF0YVRyYW5zZmVyLCB0eXBlc1RvVHJ5LCBkZWZhdWx0VmFsdWUpIHtcbiAgdmFyIHJlc3VsdCA9IHR5cGVzVG9UcnkucmVkdWNlKGZ1bmN0aW9uIChyZXN1bHRTb0ZhciwgdHlwZVRvVHJ5KSB7XG4gICAgcmV0dXJuIHJlc3VsdFNvRmFyIHx8IGRhdGFUcmFuc2Zlci5nZXREYXRhKHR5cGVUb1RyeSk7XG4gIH0sICcnKTtcbiAgcmV0dXJuIHJlc3VsdCAhPSBudWxsID8gcmVzdWx0IDogZGVmYXVsdFZhbHVlO1xufSIsInZhciBfbmF0aXZlVHlwZXNDb25maWc7XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmltcG9ydCAqIGFzIE5hdGl2ZVR5cGVzIGZyb20gJy4uL05hdGl2ZVR5cGVzJztcbmltcG9ydCB7IGdldERhdGFGcm9tRGF0YVRyYW5zZmVyIH0gZnJvbSAnLi9nZXREYXRhRnJvbURhdGFUcmFuc2Zlcic7XG5leHBvcnQgdmFyIG5hdGl2ZVR5cGVzQ29uZmlnID0gKF9uYXRpdmVUeXBlc0NvbmZpZyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX25hdGl2ZVR5cGVzQ29uZmlnLCBOYXRpdmVUeXBlcy5GSUxFLCB7XG4gIGV4cG9zZVByb3BlcnRpZXM6IHtcbiAgICBmaWxlczogZnVuY3Rpb24gZmlsZXMoZGF0YVRyYW5zZmVyKSB7XG4gICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZGF0YVRyYW5zZmVyLmZpbGVzKTtcbiAgICB9LFxuICAgIGl0ZW1zOiBmdW5jdGlvbiBpdGVtcyhkYXRhVHJhbnNmZXIpIHtcbiAgICAgIHJldHVybiBkYXRhVHJhbnNmZXIuaXRlbXM7XG4gICAgfVxuICB9LFxuICBtYXRjaGVzVHlwZXM6IFsnRmlsZXMnXVxufSksIF9kZWZpbmVQcm9wZXJ0eShfbmF0aXZlVHlwZXNDb25maWcsIE5hdGl2ZVR5cGVzLkhUTUwsIHtcbiAgZXhwb3NlUHJvcGVydGllczoge1xuICAgIGh0bWw6IGZ1bmN0aW9uIGh0bWwoZGF0YVRyYW5zZmVyLCBtYXRjaGVzVHlwZXMpIHtcbiAgICAgIHJldHVybiBnZXREYXRhRnJvbURhdGFUcmFuc2ZlcihkYXRhVHJhbnNmZXIsIG1hdGNoZXNUeXBlcywgJycpO1xuICAgIH1cbiAgfSxcbiAgbWF0Y2hlc1R5cGVzOiBbJ0h0bWwnLCAndGV4dC9odG1sJ11cbn0pLCBfZGVmaW5lUHJvcGVydHkoX25hdGl2ZVR5cGVzQ29uZmlnLCBOYXRpdmVUeXBlcy5VUkwsIHtcbiAgZXhwb3NlUHJvcGVydGllczoge1xuICAgIHVybHM6IGZ1bmN0aW9uIHVybHMoZGF0YVRyYW5zZmVyLCBtYXRjaGVzVHlwZXMpIHtcbiAgICAgIHJldHVybiBnZXREYXRhRnJvbURhdGFUcmFuc2ZlcihkYXRhVHJhbnNmZXIsIG1hdGNoZXNUeXBlcywgJycpLnNwbGl0KCdcXG4nKTtcbiAgICB9XG4gIH0sXG4gIG1hdGNoZXNUeXBlczogWydVcmwnLCAndGV4dC91cmktbGlzdCddXG59KSwgX2RlZmluZVByb3BlcnR5KF9uYXRpdmVUeXBlc0NvbmZpZywgTmF0aXZlVHlwZXMuVEVYVCwge1xuICBleHBvc2VQcm9wZXJ0aWVzOiB7XG4gICAgdGV4dDogZnVuY3Rpb24gdGV4dChkYXRhVHJhbnNmZXIsIG1hdGNoZXNUeXBlcykge1xuICAgICAgcmV0dXJuIGdldERhdGFGcm9tRGF0YVRyYW5zZmVyKGRhdGFUcmFuc2ZlciwgbWF0Y2hlc1R5cGVzLCAnJyk7XG4gICAgfVxuICB9LFxuICBtYXRjaGVzVHlwZXM6IFsnVGV4dCcsICd0ZXh0L3BsYWluJ11cbn0pLCBfbmF0aXZlVHlwZXNDb25maWcpOyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuZXhwb3J0IHZhciBOYXRpdmVEcmFnU291cmNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gTmF0aXZlRHJhZ1NvdXJjZShjb25maWcpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTmF0aXZlRHJhZ1NvdXJjZSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJpdGVtXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb25maWdcIiwgdm9pZCAwKTtcblxuICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIHRoaXMuaXRlbSA9IHt9O1xuICAgIHRoaXMuaW5pdGlhbGl6ZUV4cG9zZWRQcm9wZXJ0aWVzKCk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTmF0aXZlRHJhZ1NvdXJjZSwgW3tcbiAgICBrZXk6IFwiaW5pdGlhbGl6ZUV4cG9zZWRQcm9wZXJ0aWVzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRpYWxpemVFeHBvc2VkUHJvcGVydGllcygpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIE9iamVjdC5rZXlzKHRoaXMuY29uZmlnLmV4cG9zZVByb3BlcnRpZXMpLmZvckVhY2goZnVuY3Rpb24gKHByb3BlcnR5KSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcy5pdGVtLCBwcm9wZXJ0eSwge1xuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkJyb3dzZXIgZG9lc24ndCBhbGxvdyByZWFkaW5nIFxcXCJcIi5jb25jYXQocHJvcGVydHksIFwiXFxcIiB1bnRpbCB0aGUgZHJvcCBldmVudC5cIikpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJsb2FkRGF0YVRyYW5zZmVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWREYXRhVHJhbnNmZXIoZGF0YVRyYW5zZmVyKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKGRhdGFUcmFuc2Zlcikge1xuICAgICAgICB2YXIgbmV3UHJvcGVydGllcyA9IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmNvbmZpZy5leHBvc2VQcm9wZXJ0aWVzKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICAgIG5ld1Byb3BlcnRpZXNbcHJvcGVydHldID0ge1xuICAgICAgICAgICAgdmFsdWU6IF90aGlzMi5jb25maWcuZXhwb3NlUHJvcGVydGllc1twcm9wZXJ0eV0oZGF0YVRyYW5zZmVyLCBfdGhpczIuY29uZmlnLm1hdGNoZXNUeXBlcyksXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMuaXRlbSwgbmV3UHJvcGVydGllcyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNhbkRyYWdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2FuRHJhZygpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJiZWdpbkRyYWdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYmVnaW5EcmFnKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaXRlbTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNEcmFnZ2luZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc0RyYWdnaW5nKG1vbml0b3IsIGhhbmRsZSkge1xuICAgICAgcmV0dXJuIGhhbmRsZSA9PT0gbW9uaXRvci5nZXRTb3VyY2VJZCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJlbmREcmFnXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVuZERyYWcoKSB7Ly8gZW1wdHlcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTmF0aXZlRHJhZ1NvdXJjZTtcbn0oKTsiLCJpbXBvcnQgeyBuYXRpdmVUeXBlc0NvbmZpZyB9IGZyb20gJy4vbmF0aXZlVHlwZXNDb25maWcnO1xuaW1wb3J0IHsgTmF0aXZlRHJhZ1NvdXJjZSB9IGZyb20gJy4vTmF0aXZlRHJhZ1NvdXJjZSc7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTmF0aXZlRHJhZ1NvdXJjZSh0eXBlLCBkYXRhVHJhbnNmZXIpIHtcbiAgdmFyIHJlc3VsdCA9IG5ldyBOYXRpdmVEcmFnU291cmNlKG5hdGl2ZVR5cGVzQ29uZmlnW3R5cGVdKTtcbiAgcmVzdWx0LmxvYWREYXRhVHJhbnNmZXIoZGF0YVRyYW5zZmVyKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXRjaE5hdGl2ZUl0ZW1UeXBlKGRhdGFUcmFuc2Zlcikge1xuICBpZiAoIWRhdGFUcmFuc2Zlcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGRhdGFUcmFuc2ZlclR5cGVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZGF0YVRyYW5zZmVyLnR5cGVzIHx8IFtdKTtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG5hdGl2ZVR5cGVzQ29uZmlnKS5maWx0ZXIoZnVuY3Rpb24gKG5hdGl2ZUl0ZW1UeXBlKSB7XG4gICAgdmFyIG1hdGNoZXNUeXBlcyA9IG5hdGl2ZVR5cGVzQ29uZmlnW25hdGl2ZUl0ZW1UeXBlXS5tYXRjaGVzVHlwZXM7XG4gICAgcmV0dXJuIG1hdGNoZXNUeXBlcy5zb21lKGZ1bmN0aW9uICh0KSB7XG4gICAgICByZXR1cm4gZGF0YVRyYW5zZmVyVHlwZXMuaW5kZXhPZih0KSA+IC0xO1xuICAgIH0pO1xuICB9KVswXSB8fCBudWxsO1xufSIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuZXhwb3J0IHZhciBPcHRpb25zUmVhZGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gT3B0aW9uc1JlYWRlcihnbG9iYWxDb250ZXh0LCBvcHRpb25zKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE9wdGlvbnNSZWFkZXIpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwib3duZXJEb2N1bWVudFwiLCBudWxsKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdsb2JhbENvbnRleHRcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9wdGlvbnNBcmdzXCIsIHZvaWQgMCk7XG5cbiAgICB0aGlzLmdsb2JhbENvbnRleHQgPSBnbG9iYWxDb250ZXh0O1xuICAgIHRoaXMub3B0aW9uc0FyZ3MgPSBvcHRpb25zO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKE9wdGlvbnNSZWFkZXIsIFt7XG4gICAga2V5OiBcIndpbmRvd1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgaWYgKHRoaXMuZ2xvYmFsQ29udGV4dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nbG9iYWxDb250ZXh0O1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJkb2N1bWVudFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgdmFyIF90aGlzJGdsb2JhbENvbnRleHQ7XG5cbiAgICAgIGlmICgoX3RoaXMkZ2xvYmFsQ29udGV4dCA9IHRoaXMuZ2xvYmFsQ29udGV4dCkgIT09IG51bGwgJiYgX3RoaXMkZ2xvYmFsQ29udGV4dCAhPT0gdm9pZCAwICYmIF90aGlzJGdsb2JhbENvbnRleHQuZG9jdW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2xvYmFsQ29udGV4dC5kb2N1bWVudDtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy53aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LmRvY3VtZW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicm9vdEVsZW1lbnRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciBfdGhpcyRvcHRpb25zQXJncztcblxuICAgICAgcmV0dXJuICgoX3RoaXMkb3B0aW9uc0FyZ3MgPSB0aGlzLm9wdGlvbnNBcmdzKSA9PT0gbnVsbCB8fCBfdGhpcyRvcHRpb25zQXJncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkb3B0aW9uc0FyZ3Mucm9vdEVsZW1lbnQpIHx8IHRoaXMud2luZG93O1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBPcHRpb25zUmVhZGVyO1xufSgpOyIsImZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHsgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyB9IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5pbXBvcnQgeyBFbnRlckxlYXZlQ291bnRlciB9IGZyb20gJy4vRW50ZXJMZWF2ZUNvdW50ZXInO1xuaW1wb3J0IHsgZ2V0Tm9kZUNsaWVudE9mZnNldCwgZ2V0RXZlbnRDbGllbnRPZmZzZXQsIGdldERyYWdQcmV2aWV3T2Zmc2V0IH0gZnJvbSAnLi9PZmZzZXRVdGlscyc7XG5pbXBvcnQgeyBjcmVhdGVOYXRpdmVEcmFnU291cmNlLCBtYXRjaE5hdGl2ZUl0ZW1UeXBlIH0gZnJvbSAnLi9OYXRpdmVEcmFnU291cmNlcyc7XG5pbXBvcnQgKiBhcyBOYXRpdmVUeXBlcyBmcm9tICcuL05hdGl2ZVR5cGVzJztcbmltcG9ydCB7IE9wdGlvbnNSZWFkZXIgfSBmcm9tICcuL09wdGlvbnNSZWFkZXInO1xuZXhwb3J0IHZhciBIVE1MNUJhY2tlbmRJbXBsID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLy8gUmVhY3QtRG5kIENvbXBvbmVudHNcbiAgLy8gSW50ZXJuYWwgU3RhdGVcbiAgZnVuY3Rpb24gSFRNTDVCYWNrZW5kSW1wbChtYW5hZ2VyLCBnbG9iYWxDb250ZXh0LCBvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBIVE1MNUJhY2tlbmRJbXBsKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9wdGlvbnNcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFjdGlvbnNcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vbml0b3JcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlZ2lzdHJ5XCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJlbnRlckxlYXZlQ291bnRlclwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwic291cmNlUHJldmlld05vZGVzXCIsIG5ldyBNYXAoKSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJzb3VyY2VQcmV2aWV3Tm9kZU9wdGlvbnNcIiwgbmV3IE1hcCgpKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNvdXJjZU5vZGVzXCIsIG5ldyBNYXAoKSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJzb3VyY2VOb2RlT3B0aW9uc1wiLCBuZXcgTWFwKCkpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZHJhZ1N0YXJ0U291cmNlSWRzXCIsIG51bGwpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZHJvcFRhcmdldElkc1wiLCBbXSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJkcmFnRW50ZXJUYXJnZXRJZHNcIiwgW10pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY3VycmVudE5hdGl2ZVNvdXJjZVwiLCBudWxsKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImN1cnJlbnROYXRpdmVIYW5kbGVcIiwgbnVsbCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjdXJyZW50RHJhZ1NvdXJjZU5vZGVcIiwgbnVsbCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJhbHRLZXlQcmVzc2VkXCIsIGZhbHNlKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vdXNlTW92ZVRpbWVvdXRUaW1lclwiLCBudWxsKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFzeW5jRW5kRHJhZ0ZyYW1lSWRcIiwgbnVsbCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJkcmFnT3ZlclRhcmdldElkc1wiLCBudWxsKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImdldFNvdXJjZUNsaWVudE9mZnNldFwiLCBmdW5jdGlvbiAoc291cmNlSWQpIHtcbiAgICAgIHZhciBzb3VyY2UgPSBfdGhpcy5zb3VyY2VOb2Rlcy5nZXQoc291cmNlSWQpO1xuXG4gICAgICByZXR1cm4gc291cmNlICYmIGdldE5vZGVDbGllbnRPZmZzZXQoc291cmNlKSB8fCBudWxsO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZW5kRHJhZ05hdGl2ZUl0ZW1cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFfdGhpcy5pc0RyYWdnaW5nTmF0aXZlSXRlbSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgX3RoaXMuYWN0aW9ucy5lbmREcmFnKCk7XG5cbiAgICAgIGlmIChfdGhpcy5jdXJyZW50TmF0aXZlSGFuZGxlKSB7XG4gICAgICAgIF90aGlzLnJlZ2lzdHJ5LnJlbW92ZVNvdXJjZShfdGhpcy5jdXJyZW50TmF0aXZlSGFuZGxlKTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMuY3VycmVudE5hdGl2ZUhhbmRsZSA9IG51bGw7XG4gICAgICBfdGhpcy5jdXJyZW50TmF0aXZlU291cmNlID0gbnVsbDtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlzTm9kZUluRG9jdW1lbnRcIiwgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIC8vIENoZWNrIHRoZSBub2RlIGVpdGhlciBpbiB0aGUgbWFpbiBkb2N1bWVudCBvciBpbiB0aGUgY3VycmVudCBjb250ZXh0XG4gICAgICByZXR1cm4gQm9vbGVhbihub2RlICYmIF90aGlzLmRvY3VtZW50ICYmIF90aGlzLmRvY3VtZW50LmJvZHkgJiYgX3RoaXMuZG9jdW1lbnQuYm9keS5jb250YWlucyhub2RlKSk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJlbmREcmFnSWZTb3VyY2VXYXNSZW1vdmVkRnJvbURPTVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbm9kZSA9IF90aGlzLmN1cnJlbnREcmFnU291cmNlTm9kZTtcblxuICAgICAgaWYgKG5vZGUgPT0gbnVsbCB8fCBfdGhpcy5pc05vZGVJbkRvY3VtZW50KG5vZGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKF90aGlzLmNsZWFyQ3VycmVudERyYWdTb3VyY2VOb2RlKCkgJiYgX3RoaXMubW9uaXRvci5pc0RyYWdnaW5nKCkpIHtcbiAgICAgICAgX3RoaXMuYWN0aW9ucy5lbmREcmFnKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYW5kbGVUb3BEcmFnU3RhcnRDYXB0dXJlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLmNsZWFyQ3VycmVudERyYWdTb3VyY2VOb2RlKCk7XG5cbiAgICAgIF90aGlzLmRyYWdTdGFydFNvdXJjZUlkcyA9IFtdO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFuZGxlVG9wRHJhZ1N0YXJ0XCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGRyYWdTdGFydFNvdXJjZUlkcyA9IF90aGlzLmRyYWdTdGFydFNvdXJjZUlkcztcbiAgICAgIF90aGlzLmRyYWdTdGFydFNvdXJjZUlkcyA9IG51bGw7XG4gICAgICB2YXIgY2xpZW50T2Zmc2V0ID0gZ2V0RXZlbnRDbGllbnRPZmZzZXQoZSk7IC8vIEF2b2lkIGNyYXNoaW5nIGlmIHdlIG1pc3NlZCBhIGRyb3AgZXZlbnQgb3Igb3VyIHByZXZpb3VzIGRyYWcgZGllZFxuXG4gICAgICBpZiAoX3RoaXMubW9uaXRvci5pc0RyYWdnaW5nKCkpIHtcbiAgICAgICAgX3RoaXMuYWN0aW9ucy5lbmREcmFnKCk7XG4gICAgICB9IC8vIERvbid0IHB1Ymxpc2ggdGhlIHNvdXJjZSBqdXN0IHlldCAoc2VlIHdoeSBiZWxvdylcblxuXG4gICAgICBfdGhpcy5hY3Rpb25zLmJlZ2luRHJhZyhkcmFnU3RhcnRTb3VyY2VJZHMgfHwgW10sIHtcbiAgICAgICAgcHVibGlzaFNvdXJjZTogZmFsc2UsXG4gICAgICAgIGdldFNvdXJjZUNsaWVudE9mZnNldDogX3RoaXMuZ2V0U291cmNlQ2xpZW50T2Zmc2V0LFxuICAgICAgICBjbGllbnRPZmZzZXQ6IGNsaWVudE9mZnNldFxuICAgICAgfSk7XG5cbiAgICAgIHZhciBkYXRhVHJhbnNmZXIgPSBlLmRhdGFUcmFuc2ZlcjtcbiAgICAgIHZhciBuYXRpdmVUeXBlID0gbWF0Y2hOYXRpdmVJdGVtVHlwZShkYXRhVHJhbnNmZXIpO1xuXG4gICAgICBpZiAoX3RoaXMubW9uaXRvci5pc0RyYWdnaW5nKCkpIHtcbiAgICAgICAgaWYgKGRhdGFUcmFuc2ZlciAmJiB0eXBlb2YgZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIC8vIFVzZSBjdXN0b20gZHJhZyBpbWFnZSBpZiB1c2VyIHNwZWNpZmllcyBpdC5cbiAgICAgICAgICAvLyBJZiBjaGlsZCBkcmFnIHNvdXJjZSByZWZ1c2VzIGRyYWcgYnV0IHBhcmVudCBhZ3JlZXMsXG4gICAgICAgICAgLy8gdXNlIHBhcmVudCdzIG5vZGUgYXMgZHJhZyBpbWFnZS4gTmVpdGhlciB3b3JrcyBpbiBJRSB0aG91Z2guXG4gICAgICAgICAgdmFyIHNvdXJjZUlkID0gX3RoaXMubW9uaXRvci5nZXRTb3VyY2VJZCgpO1xuXG4gICAgICAgICAgdmFyIHNvdXJjZU5vZGUgPSBfdGhpcy5zb3VyY2VOb2Rlcy5nZXQoc291cmNlSWQpO1xuXG4gICAgICAgICAgdmFyIGRyYWdQcmV2aWV3ID0gX3RoaXMuc291cmNlUHJldmlld05vZGVzLmdldChzb3VyY2VJZCkgfHwgc291cmNlTm9kZTtcblxuICAgICAgICAgIGlmIChkcmFnUHJldmlldykge1xuICAgICAgICAgICAgdmFyIF90aGlzJGdldEN1cnJlbnRTb3VyYyA9IF90aGlzLmdldEN1cnJlbnRTb3VyY2VQcmV2aWV3Tm9kZU9wdGlvbnMoKSxcbiAgICAgICAgICAgICAgICBhbmNob3JYID0gX3RoaXMkZ2V0Q3VycmVudFNvdXJjLmFuY2hvclgsXG4gICAgICAgICAgICAgICAgYW5jaG9yWSA9IF90aGlzJGdldEN1cnJlbnRTb3VyYy5hbmNob3JZLFxuICAgICAgICAgICAgICAgIG9mZnNldFggPSBfdGhpcyRnZXRDdXJyZW50U291cmMub2Zmc2V0WCxcbiAgICAgICAgICAgICAgICBvZmZzZXRZID0gX3RoaXMkZ2V0Q3VycmVudFNvdXJjLm9mZnNldFk7XG5cbiAgICAgICAgICAgIHZhciBhbmNob3JQb2ludCA9IHtcbiAgICAgICAgICAgICAgYW5jaG9yWDogYW5jaG9yWCxcbiAgICAgICAgICAgICAgYW5jaG9yWTogYW5jaG9yWVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBvZmZzZXRQb2ludCA9IHtcbiAgICAgICAgICAgICAgb2Zmc2V0WDogb2Zmc2V0WCxcbiAgICAgICAgICAgICAgb2Zmc2V0WTogb2Zmc2V0WVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBkcmFnUHJldmlld09mZnNldCA9IGdldERyYWdQcmV2aWV3T2Zmc2V0KHNvdXJjZU5vZGUsIGRyYWdQcmV2aWV3LCBjbGllbnRPZmZzZXQsIGFuY2hvclBvaW50LCBvZmZzZXRQb2ludCk7XG4gICAgICAgICAgICBkYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGRyYWdQcmV2aWV3LCBkcmFnUHJldmlld09mZnNldC54LCBkcmFnUHJldmlld09mZnNldC55KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIEZpcmVmb3ggd29uJ3QgZHJhZyB3aXRob3V0IHNldHRpbmcgZGF0YVxuICAgICAgICAgIGRhdGFUcmFuc2ZlciA9PT0gbnVsbCB8fCBkYXRhVHJhbnNmZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGFUcmFuc2Zlci5zZXREYXRhKCdhcHBsaWNhdGlvbi9qc29uJywge30pO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHsvLyBJRSBkb2Vzbid0IHN1cHBvcnQgTUlNRSB0eXBlcyBpbiBzZXREYXRhXG4gICAgICAgIH0gLy8gU3RvcmUgZHJhZyBzb3VyY2Ugbm9kZSBzbyB3ZSBjYW4gY2hlY2sgd2hldGhlclxuICAgICAgICAvLyBpdCBpcyByZW1vdmVkIGZyb20gRE9NIGFuZCB0cmlnZ2VyIGVuZERyYWcgbWFudWFsbHkuXG5cblxuICAgICAgICBfdGhpcy5zZXRDdXJyZW50RHJhZ1NvdXJjZU5vZGUoZS50YXJnZXQpOyAvLyBOb3cgd2UgYXJlIHJlYWR5IHRvIHB1Ymxpc2ggdGhlIGRyYWcgc291cmNlLi4gb3IgYXJlIHdlIG5vdD9cblxuXG4gICAgICAgIHZhciBfdGhpcyRnZXRDdXJyZW50U291cmMyID0gX3RoaXMuZ2V0Q3VycmVudFNvdXJjZVByZXZpZXdOb2RlT3B0aW9ucygpLFxuICAgICAgICAgICAgY2FwdHVyZURyYWdnaW5nU3RhdGUgPSBfdGhpcyRnZXRDdXJyZW50U291cmMyLmNhcHR1cmVEcmFnZ2luZ1N0YXRlO1xuXG4gICAgICAgIGlmICghY2FwdHVyZURyYWdnaW5nU3RhdGUpIHtcbiAgICAgICAgICAvLyBVc3VhbGx5IHdlIHdhbnQgdG8gcHVibGlzaCBpdCBpbiB0aGUgbmV4dCB0aWNrIHNvIHRoYXQgYnJvd3NlclxuICAgICAgICAgIC8vIGlzIGFibGUgdG8gc2NyZWVuc2hvdCB0aGUgY3VycmVudCAobm90IHlldCBkcmFnZ2luZykgc3RhdGUuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBJdCBhbHNvIG5lYXRseSBhdm9pZHMgYSBzaXR1YXRpb24gd2hlcmUgcmVuZGVyKCkgcmV0dXJucyBudWxsXG4gICAgICAgICAgLy8gaW4gdGhlIHNhbWUgdGljayBmb3IgdGhlIHNvdXJjZSBlbGVtZW50LCBhbmQgYnJvd3NlciBmcmVha3Mgb3V0LlxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmFjdGlvbnMucHVibGlzaERyYWdTb3VyY2UoKTtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJbiBzb21lIGNhc2VzIHRoZSB1c2VyIG1heSB3YW50IHRvIG92ZXJyaWRlIHRoaXMgYmVoYXZpb3IsIGUuZy5cbiAgICAgICAgICAvLyB0byB3b3JrIGFyb3VuZCBJRSBub3Qgc3VwcG9ydGluZyBjdXN0b20gZHJhZyBwcmV2aWV3cy5cbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vIFdoZW4gdXNpbmcgYSBjdXN0b20gZHJhZyBsYXllciwgdGhlIG9ubHkgd2F5IHRvIHByZXZlbnRcbiAgICAgICAgICAvLyB0aGUgZGVmYXVsdCBkcmFnIHByZXZpZXcgZnJvbSBkcmF3aW5nIGluIElFIGlzIHRvIHNjcmVlbnNob3RcbiAgICAgICAgICAvLyB0aGUgZHJhZ2dpbmcgc3RhdGUgaW4gd2hpY2ggdGhlIG5vZGUgaXRzZWxmIGhhcyB6ZXJvIG9wYWNpdHlcbiAgICAgICAgICAvLyBhbmQgaGVpZ2h0LiBJbiB0aGlzIGNhc2UsIHRob3VnaCwgcmV0dXJuaW5nIG51bGwgZnJvbSByZW5kZXIoKVxuICAgICAgICAgIC8vIHdpbGwgYWJydXB0bHkgZW5kIHRoZSBkcmFnZ2luZywgd2hpY2ggaXMgbm90IG9idmlvdXMuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBUaGlzIGlzIHRoZSByZWFzb24gc3VjaCBiZWhhdmlvciBpcyBzdHJpY3RseSBvcHQtaW4uXG4gICAgICAgICAgX3RoaXMuYWN0aW9ucy5wdWJsaXNoRHJhZ1NvdXJjZSgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG5hdGl2ZVR5cGUpIHtcbiAgICAgICAgLy8gQSBuYXRpdmUgaXRlbSAoc3VjaCBhcyBVUkwpIGRyYWdnZWQgZnJvbSBpbnNpZGUgdGhlIGRvY3VtZW50XG4gICAgICAgIF90aGlzLmJlZ2luRHJhZ05hdGl2ZUl0ZW0obmF0aXZlVHlwZSk7XG4gICAgICB9IGVsc2UgaWYgKGRhdGFUcmFuc2ZlciAmJiAhZGF0YVRyYW5zZmVyLnR5cGVzICYmIChlLnRhcmdldCAmJiAhZS50YXJnZXQuaGFzQXR0cmlidXRlIHx8ICFlLnRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RyYWdnYWJsZScpKSkge1xuICAgICAgICAvLyBMb29rcyBsaWtlIGEgU2FmYXJpIGJ1ZzogZGF0YVRyYW5zZmVyLnR5cGVzIGlzIG51bGwsIGJ1dCB0aGVyZSB3YXMgbm8gZHJhZ2dhYmxlLlxuICAgICAgICAvLyBKdXN0IGxldCBpdCBkcmFnLiBJdCdzIGEgbmF0aXZlIHR5cGUgKFVSTCBvciB0ZXh0KSBhbmQgd2lsbCBiZSBwaWNrZWQgdXAgaW5cbiAgICAgICAgLy8gZHJhZ2VudGVyIGhhbmRsZXIuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElmIGJ5IHRoaXMgdGltZSBubyBkcmFnIHNvdXJjZSByZWFjdGVkLCB0ZWxsIGJyb3dzZXIgbm90IHRvIGRyYWcuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhbmRsZVRvcERyYWdFbmRDYXB0dXJlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfdGhpcy5jbGVhckN1cnJlbnREcmFnU291cmNlTm9kZSgpICYmIF90aGlzLm1vbml0b3IuaXNEcmFnZ2luZygpKSB7XG4gICAgICAgIC8vIEZpcmVmb3ggY2FuIGRpc3BhdGNoIHRoaXMgZXZlbnQgaW4gYW4gaW5maW5pdGUgbG9vcFxuICAgICAgICAvLyBpZiBkcmFnZW5kIGhhbmRsZXIgZG9lcyBzb21ldGhpbmcgbGlrZSBzaG93aW5nIGFuIGFsZXJ0LlxuICAgICAgICAvLyBPbmx5IHByb2NlZWQgaWYgd2UgaGF2ZSBub3QgaGFuZGxlZCBpdCBhbHJlYWR5LlxuICAgICAgICBfdGhpcy5hY3Rpb25zLmVuZERyYWcoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhbmRsZVRvcERyYWdFbnRlckNhcHR1cmVcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLmRyYWdFbnRlclRhcmdldElkcyA9IFtdO1xuXG4gICAgICB2YXIgaXNGaXJzdEVudGVyID0gX3RoaXMuZW50ZXJMZWF2ZUNvdW50ZXIuZW50ZXIoZS50YXJnZXQpO1xuXG4gICAgICBpZiAoIWlzRmlyc3RFbnRlciB8fCBfdGhpcy5tb25pdG9yLmlzRHJhZ2dpbmcoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBkYXRhVHJhbnNmZXIgPSBlLmRhdGFUcmFuc2ZlcjtcbiAgICAgIHZhciBuYXRpdmVUeXBlID0gbWF0Y2hOYXRpdmVJdGVtVHlwZShkYXRhVHJhbnNmZXIpO1xuXG4gICAgICBpZiAobmF0aXZlVHlwZSkge1xuICAgICAgICAvLyBBIG5hdGl2ZSBpdGVtIChzdWNoIGFzIGZpbGUgb3IgVVJMKSBkcmFnZ2VkIGZyb20gb3V0c2lkZSB0aGUgZG9jdW1lbnRcbiAgICAgICAgX3RoaXMuYmVnaW5EcmFnTmF0aXZlSXRlbShuYXRpdmVUeXBlLCBkYXRhVHJhbnNmZXIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFuZGxlVG9wRHJhZ0VudGVyXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgZHJhZ0VudGVyVGFyZ2V0SWRzID0gX3RoaXMuZHJhZ0VudGVyVGFyZ2V0SWRzO1xuICAgICAgX3RoaXMuZHJhZ0VudGVyVGFyZ2V0SWRzID0gW107XG5cbiAgICAgIGlmICghX3RoaXMubW9uaXRvci5pc0RyYWdnaW5nKCkpIHtcbiAgICAgICAgLy8gVGhpcyBpcyBwcm9iYWJseSBhIG5hdGl2ZSBpdGVtIHR5cGUgd2UgZG9uJ3QgdW5kZXJzdGFuZC5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5hbHRLZXlQcmVzc2VkID0gZS5hbHRLZXk7IC8vIElmIHRoZSB0YXJnZXQgY2hhbmdlcyBwb3NpdGlvbiBhcyB0aGUgcmVzdWx0IG9mIGBkcmFnZW50ZXJgLCBgZHJhZ292ZXJgIG1pZ2h0IHN0aWxsXG4gICAgICAvLyBnZXQgZGlzcGF0Y2hlZCBkZXNwaXRlIHRhcmdldCBiZWluZyBubyBsb25nZXIgdGhlcmUuIFRoZSBlYXN5IHNvbHV0aW9uIGlzIHRvIGNoZWNrXG4gICAgICAvLyB3aGV0aGVyIHRoZXJlIGFjdHVhbGx5IGlzIGEgdGFyZ2V0IGJlZm9yZSBmaXJpbmcgYGhvdmVyYC5cblxuICAgICAgaWYgKGRyYWdFbnRlclRhcmdldElkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIF90aGlzLmFjdGlvbnMuaG92ZXIoZHJhZ0VudGVyVGFyZ2V0SWRzLCB7XG4gICAgICAgICAgY2xpZW50T2Zmc2V0OiBnZXRFdmVudENsaWVudE9mZnNldChlKVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdmFyIGNhbkRyb3AgPSBkcmFnRW50ZXJUYXJnZXRJZHMuc29tZShmdW5jdGlvbiAodGFyZ2V0SWQpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLm1vbml0b3IuY2FuRHJvcE9uVGFyZ2V0KHRhcmdldElkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoY2FuRHJvcCkge1xuICAgICAgICAvLyBJRSByZXF1aXJlcyB0aGlzIHRvIGZpcmUgZHJhZ292ZXIgZXZlbnRzXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBpZiAoZS5kYXRhVHJhbnNmZXIpIHtcbiAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gX3RoaXMuZ2V0Q3VycmVudERyb3BFZmZlY3QoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFuZGxlVG9wRHJhZ092ZXJDYXB0dXJlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLmRyYWdPdmVyVGFyZ2V0SWRzID0gW107XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYW5kbGVUb3BEcmFnT3ZlclwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIGRyYWdPdmVyVGFyZ2V0SWRzID0gX3RoaXMuZHJhZ092ZXJUYXJnZXRJZHM7XG4gICAgICBfdGhpcy5kcmFnT3ZlclRhcmdldElkcyA9IFtdO1xuXG4gICAgICBpZiAoIV90aGlzLm1vbml0b3IuaXNEcmFnZ2luZygpKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgcHJvYmFibHkgYSBuYXRpdmUgaXRlbSB0eXBlIHdlIGRvbid0IHVuZGVyc3RhbmQuXG4gICAgICAgIC8vIFByZXZlbnQgZGVmYXVsdCBcImRyb3AgYW5kIGJsb3cgYXdheSB0aGUgd2hvbGUgZG9jdW1lbnRcIiBhY3Rpb24uXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBpZiAoZS5kYXRhVHJhbnNmZXIpIHtcbiAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ25vbmUnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5hbHRLZXlQcmVzc2VkID0gZS5hbHRLZXk7XG5cbiAgICAgIF90aGlzLmFjdGlvbnMuaG92ZXIoZHJhZ092ZXJUYXJnZXRJZHMgfHwgW10sIHtcbiAgICAgICAgY2xpZW50T2Zmc2V0OiBnZXRFdmVudENsaWVudE9mZnNldChlKVxuICAgICAgfSk7XG5cbiAgICAgIHZhciBjYW5Ecm9wID0gKGRyYWdPdmVyVGFyZ2V0SWRzIHx8IFtdKS5zb21lKGZ1bmN0aW9uICh0YXJnZXRJZCkge1xuICAgICAgICByZXR1cm4gX3RoaXMubW9uaXRvci5jYW5Ecm9wT25UYXJnZXQodGFyZ2V0SWQpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChjYW5Ecm9wKSB7XG4gICAgICAgIC8vIFNob3cgdXNlci1zcGVjaWZpZWQgZHJvcCBlZmZlY3QuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBpZiAoZS5kYXRhVHJhbnNmZXIpIHtcbiAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gX3RoaXMuZ2V0Q3VycmVudERyb3BFZmZlY3QoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChfdGhpcy5pc0RyYWdnaW5nTmF0aXZlSXRlbSgpKSB7XG4gICAgICAgIC8vIERvbid0IHNob3cgYSBuaWNlIGN1cnNvciBidXQgc3RpbGwgcHJldmVudCBkZWZhdWx0XG4gICAgICAgIC8vIFwiZHJvcCBhbmQgYmxvdyBhd2F5IHRoZSB3aG9sZSBkb2N1bWVudFwiIGFjdGlvbi5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGlmIChlLmRhdGFUcmFuc2Zlcikge1xuICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnbm9uZSc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhbmRsZVRvcERyYWdMZWF2ZUNhcHR1cmVcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmIChfdGhpcy5pc0RyYWdnaW5nTmF0aXZlSXRlbSgpKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGlzTGFzdExlYXZlID0gX3RoaXMuZW50ZXJMZWF2ZUNvdW50ZXIubGVhdmUoZS50YXJnZXQpO1xuXG4gICAgICBpZiAoIWlzTGFzdExlYXZlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKF90aGlzLmlzRHJhZ2dpbmdOYXRpdmVJdGVtKCkpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLmVuZERyYWdOYXRpdmVJdGVtKCk7XG4gICAgICAgIH0sIDApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFuZGxlVG9wRHJvcENhcHR1cmVcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLmRyb3BUYXJnZXRJZHMgPSBbXTtcblxuICAgICAgaWYgKF90aGlzLmlzRHJhZ2dpbmdOYXRpdmVJdGVtKCkpIHtcbiAgICAgICAgdmFyIF90aGlzJGN1cnJlbnROYXRpdmVTbztcblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIChfdGhpcyRjdXJyZW50TmF0aXZlU28gPSBfdGhpcy5jdXJyZW50TmF0aXZlU291cmNlKSA9PT0gbnVsbCB8fCBfdGhpcyRjdXJyZW50TmF0aXZlU28gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGN1cnJlbnROYXRpdmVTby5sb2FkRGF0YVRyYW5zZmVyKGUuZGF0YVRyYW5zZmVyKTtcbiAgICAgIH0gZWxzZSBpZiAobWF0Y2hOYXRpdmVJdGVtVHlwZShlLmRhdGFUcmFuc2ZlcikpIHtcbiAgICAgICAgLy8gRHJhZ2dpbmcgc29tZSBlbGVtZW50cywgbGlrZSA8YT4gYW5kIDxpbWc+IG1heSBzdGlsbCBiZWhhdmUgbGlrZSBhIG5hdGl2ZSBkcmFnIGV2ZW50LFxuICAgICAgICAvLyBldmVuIGlmIHRoZSBjdXJyZW50IGRyYWcgZXZlbnQgbWF0Y2hlcyBhIHVzZXItZGVmaW5lZCB0eXBlLlxuICAgICAgICAvLyBTdG9wIHRoZSBkZWZhdWx0IGJlaGF2aW9yIHdoZW4gd2UncmUgbm90IGV4cGVjdGluZyBhIG5hdGl2ZSBpdGVtIHRvIGJlIGRyb3BwZWQuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMuZW50ZXJMZWF2ZUNvdW50ZXIucmVzZXQoKTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhbmRsZVRvcERyb3BcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBkcm9wVGFyZ2V0SWRzID0gX3RoaXMuZHJvcFRhcmdldElkcztcbiAgICAgIF90aGlzLmRyb3BUYXJnZXRJZHMgPSBbXTtcblxuICAgICAgX3RoaXMuYWN0aW9ucy5ob3Zlcihkcm9wVGFyZ2V0SWRzLCB7XG4gICAgICAgIGNsaWVudE9mZnNldDogZ2V0RXZlbnRDbGllbnRPZmZzZXQoZSlcbiAgICAgIH0pO1xuXG4gICAgICBfdGhpcy5hY3Rpb25zLmRyb3Aoe1xuICAgICAgICBkcm9wRWZmZWN0OiBfdGhpcy5nZXRDdXJyZW50RHJvcEVmZmVjdCgpXG4gICAgICB9KTtcblxuICAgICAgaWYgKF90aGlzLmlzRHJhZ2dpbmdOYXRpdmVJdGVtKCkpIHtcbiAgICAgICAgX3RoaXMuZW5kRHJhZ05hdGl2ZUl0ZW0oKTtcbiAgICAgIH0gZWxzZSBpZiAoX3RoaXMubW9uaXRvci5pc0RyYWdnaW5nKCkpIHtcbiAgICAgICAgX3RoaXMuYWN0aW9ucy5lbmREcmFnKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYW5kbGVTZWxlY3RTdGFydFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0OyAvLyBPbmx5IElFIHJlcXVpcmVzIHVzIHRvIGV4cGxpY2l0bHkgc2F5XG4gICAgICAvLyB3ZSB3YW50IGRyYWcgZHJvcCBvcGVyYXRpb24gdG8gc3RhcnRcblxuICAgICAgaWYgKHR5cGVvZiB0YXJnZXQuZHJhZ0Ryb3AgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBJbnB1dHMgYW5kIHRleHRhcmVhcyBzaG91bGQgYmUgc2VsZWN0YWJsZVxuXG5cbiAgICAgIGlmICh0YXJnZXQudGFnTmFtZSA9PT0gJ0lOUFVUJyB8fCB0YXJnZXQudGFnTmFtZSA9PT0gJ1NFTEVDVCcgfHwgdGFyZ2V0LnRhZ05hbWUgPT09ICdURVhUQVJFQScgfHwgdGFyZ2V0LmlzQ29udGVudEVkaXRhYmxlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gRm9yIG90aGVyIHRhcmdldHMsIGFzayBJRVxuICAgICAgLy8gdG8gZW5hYmxlIGRyYWcgYW5kIGRyb3BcblxuXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0YXJnZXQuZHJhZ0Ryb3AoKTtcbiAgICB9KTtcblxuICAgIHRoaXMub3B0aW9ucyA9IG5ldyBPcHRpb25zUmVhZGVyKGdsb2JhbENvbnRleHQsIG9wdGlvbnMpO1xuICAgIHRoaXMuYWN0aW9ucyA9IG1hbmFnZXIuZ2V0QWN0aW9ucygpO1xuICAgIHRoaXMubW9uaXRvciA9IG1hbmFnZXIuZ2V0TW9uaXRvcigpO1xuICAgIHRoaXMucmVnaXN0cnkgPSBtYW5hZ2VyLmdldFJlZ2lzdHJ5KCk7XG4gICAgdGhpcy5lbnRlckxlYXZlQ291bnRlciA9IG5ldyBFbnRlckxlYXZlQ291bnRlcih0aGlzLmlzTm9kZUluRG9jdW1lbnQpO1xuICB9XG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBwcm9maWxpbmcgc3RhdGlzdGljcyBmb3IgdGhlIEhUTUw1QmFja2VuZC5cbiAgICovXG5cblxuICBfY3JlYXRlQ2xhc3MoSFRNTDVCYWNrZW5kSW1wbCwgW3tcbiAgICBrZXk6IFwicHJvZmlsZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9maWxlKCkge1xuICAgICAgdmFyIF90aGlzJGRyYWdTdGFydFNvdXJjZSwgX3RoaXMkZHJhZ092ZXJUYXJnZXRJO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzb3VyY2VQcmV2aWV3Tm9kZXM6IHRoaXMuc291cmNlUHJldmlld05vZGVzLnNpemUsXG4gICAgICAgIHNvdXJjZVByZXZpZXdOb2RlT3B0aW9uczogdGhpcy5zb3VyY2VQcmV2aWV3Tm9kZU9wdGlvbnMuc2l6ZSxcbiAgICAgICAgc291cmNlTm9kZU9wdGlvbnM6IHRoaXMuc291cmNlTm9kZU9wdGlvbnMuc2l6ZSxcbiAgICAgICAgc291cmNlTm9kZXM6IHRoaXMuc291cmNlTm9kZXMuc2l6ZSxcbiAgICAgICAgZHJhZ1N0YXJ0U291cmNlSWRzOiAoKF90aGlzJGRyYWdTdGFydFNvdXJjZSA9IHRoaXMuZHJhZ1N0YXJ0U291cmNlSWRzKSA9PT0gbnVsbCB8fCBfdGhpcyRkcmFnU3RhcnRTb3VyY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGRyYWdTdGFydFNvdXJjZS5sZW5ndGgpIHx8IDAsXG4gICAgICAgIGRyb3BUYXJnZXRJZHM6IHRoaXMuZHJvcFRhcmdldElkcy5sZW5ndGgsXG4gICAgICAgIGRyYWdFbnRlclRhcmdldElkczogdGhpcy5kcmFnRW50ZXJUYXJnZXRJZHMubGVuZ3RoLFxuICAgICAgICBkcmFnT3ZlclRhcmdldElkczogKChfdGhpcyRkcmFnT3ZlclRhcmdldEkgPSB0aGlzLmRyYWdPdmVyVGFyZ2V0SWRzKSA9PT0gbnVsbCB8fCBfdGhpcyRkcmFnT3ZlclRhcmdldEkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGRyYWdPdmVyVGFyZ2V0SS5sZW5ndGgpIHx8IDBcbiAgICAgIH07XG4gICAgfSAvLyBwdWJsaWMgZm9yIHRlc3RcblxuICB9LCB7XG4gICAga2V5OiBcIndpbmRvd1wiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy53aW5kb3c7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImRvY3VtZW50XCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmRvY3VtZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJvb3QgZWxlbWVudCB0byB1c2UgZm9yIGV2ZW50IHN1YnNjcmlwdGlvbnNcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInJvb3RFbGVtZW50XCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnJvb3RFbGVtZW50O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzZXR1cFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXR1cCgpIHtcbiAgICAgIHZhciByb290ID0gdGhpcy5yb290RWxlbWVudDtcblxuICAgICAgaWYgKHJvb3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChyb290Ll9faXNSZWFjdERuZEJhY2tlbmRTZXRVcCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBoYXZlIHR3byBIVE1MNSBiYWNrZW5kcyBhdCB0aGUgc2FtZSB0aW1lLicpO1xuICAgICAgfVxuXG4gICAgICByb290Ll9faXNSZWFjdERuZEJhY2tlbmRTZXRVcCA9IHRydWU7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKHJvb3QpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ0ZWFyZG93blwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB0ZWFyZG93bigpIHtcbiAgICAgIHZhciByb290ID0gdGhpcy5yb290RWxlbWVudDtcblxuICAgICAgaWYgKHJvb3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHJvb3QuX19pc1JlYWN0RG5kQmFja2VuZFNldFVwID0gZmFsc2U7XG4gICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKHRoaXMucm9vdEVsZW1lbnQpO1xuICAgICAgdGhpcy5jbGVhckN1cnJlbnREcmFnU291cmNlTm9kZSgpO1xuXG4gICAgICBpZiAodGhpcy5hc3luY0VuZERyYWdGcmFtZUlkKSB7XG4gICAgICAgIHZhciBfdGhpcyR3aW5kb3c7XG5cbiAgICAgICAgKF90aGlzJHdpbmRvdyA9IHRoaXMud2luZG93KSA9PT0gbnVsbCB8fCBfdGhpcyR3aW5kb3cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFzeW5jRW5kRHJhZ0ZyYW1lSWQpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb25uZWN0RHJhZ1ByZXZpZXdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29ubmVjdERyYWdQcmV2aWV3KHNvdXJjZUlkLCBub2RlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdGhpcy5zb3VyY2VQcmV2aWV3Tm9kZU9wdGlvbnMuc2V0KHNvdXJjZUlkLCBvcHRpb25zKTtcbiAgICAgIHRoaXMuc291cmNlUHJldmlld05vZGVzLnNldChzb3VyY2VJZCwgbm9kZSk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIuc291cmNlUHJldmlld05vZGVzLmRlbGV0ZShzb3VyY2VJZCk7XG5cbiAgICAgICAgX3RoaXMyLnNvdXJjZVByZXZpZXdOb2RlT3B0aW9ucy5kZWxldGUoc291cmNlSWQpO1xuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29ubmVjdERyYWdTb3VyY2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29ubmVjdERyYWdTb3VyY2Uoc291cmNlSWQsIG5vZGUsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB0aGlzLnNvdXJjZU5vZGVzLnNldChzb3VyY2VJZCwgbm9kZSk7XG4gICAgICB0aGlzLnNvdXJjZU5vZGVPcHRpb25zLnNldChzb3VyY2VJZCwgb3B0aW9ucyk7XG5cbiAgICAgIHZhciBoYW5kbGVEcmFnU3RhcnQgPSBmdW5jdGlvbiBoYW5kbGVEcmFnU3RhcnQoZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMzLmhhbmRsZURyYWdTdGFydChlLCBzb3VyY2VJZCk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgaGFuZGxlU2VsZWN0U3RhcnQgPSBmdW5jdGlvbiBoYW5kbGVTZWxlY3RTdGFydChlKSB7XG4gICAgICAgIHJldHVybiBfdGhpczMuaGFuZGxlU2VsZWN0U3RhcnQoZSk7XG4gICAgICB9O1xuXG4gICAgICBub2RlLnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgJ3RydWUnKTtcbiAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgaGFuZGxlRHJhZ1N0YXJ0KTtcbiAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0c3RhcnQnLCBoYW5kbGVTZWxlY3RTdGFydCk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczMuc291cmNlTm9kZXMuZGVsZXRlKHNvdXJjZUlkKTtcblxuICAgICAgICBfdGhpczMuc291cmNlTm9kZU9wdGlvbnMuZGVsZXRlKHNvdXJjZUlkKTtcblxuICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIGhhbmRsZURyYWdTdGFydCk7XG4gICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2VsZWN0c3RhcnQnLCBoYW5kbGVTZWxlY3RTdGFydCk7XG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnLCAnZmFsc2UnKTtcbiAgICAgIH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbm5lY3REcm9wVGFyZ2V0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbm5lY3REcm9wVGFyZ2V0KHRhcmdldElkLCBub2RlKSB7XG4gICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgdmFyIGhhbmRsZURyYWdFbnRlciA9IGZ1bmN0aW9uIGhhbmRsZURyYWdFbnRlcihlKSB7XG4gICAgICAgIHJldHVybiBfdGhpczQuaGFuZGxlRHJhZ0VudGVyKGUsIHRhcmdldElkKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBoYW5kbGVEcmFnT3ZlciA9IGZ1bmN0aW9uIGhhbmRsZURyYWdPdmVyKGUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzNC5oYW5kbGVEcmFnT3ZlcihlLCB0YXJnZXRJZCk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgaGFuZGxlRHJvcCA9IGZ1bmN0aW9uIGhhbmRsZURyb3AoZSkge1xuICAgICAgICByZXR1cm4gX3RoaXM0LmhhbmRsZURyb3AoZSwgdGFyZ2V0SWQpO1xuICAgICAgfTtcblxuICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCBoYW5kbGVEcmFnRW50ZXIpO1xuICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGhhbmRsZURyYWdPdmVyKTtcbiAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIGhhbmRsZURyb3ApO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCBoYW5kbGVEcmFnRW50ZXIpO1xuICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgaGFuZGxlRHJhZ092ZXIpO1xuICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBoYW5kbGVEcm9wKTtcbiAgICAgIH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImFkZEV2ZW50TGlzdGVuZXJzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXJzKHRhcmdldCkge1xuICAgICAgLy8gU1NSIEZpeCAoaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0LWRuZC9yZWFjdC1kbmQvcHVsbC84MTNcbiAgICAgIGlmICghdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5oYW5kbGVUb3BEcmFnU3RhcnQpO1xuICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHRoaXMuaGFuZGxlVG9wRHJhZ1N0YXJ0Q2FwdHVyZSwgdHJ1ZSk7XG4gICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIHRoaXMuaGFuZGxlVG9wRHJhZ0VuZENhcHR1cmUsIHRydWUpO1xuICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsIHRoaXMuaGFuZGxlVG9wRHJhZ0VudGVyKTtcbiAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCB0aGlzLmhhbmRsZVRvcERyYWdFbnRlckNhcHR1cmUsIHRydWUpO1xuICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIHRoaXMuaGFuZGxlVG9wRHJhZ0xlYXZlQ2FwdHVyZSwgdHJ1ZSk7XG4gICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCB0aGlzLmhhbmRsZVRvcERyYWdPdmVyKTtcbiAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuaGFuZGxlVG9wRHJhZ092ZXJDYXB0dXJlLCB0cnVlKTtcbiAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5oYW5kbGVUb3BEcm9wKTtcbiAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5oYW5kbGVUb3BEcm9wQ2FwdHVyZSwgdHJ1ZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbW92ZUV2ZW50TGlzdGVuZXJzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXJzKHRhcmdldCkge1xuICAgICAgLy8gU1NSIEZpeCAoaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0LWRuZC9yZWFjdC1kbmQvcHVsbC84MTNcbiAgICAgIGlmICghdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ3N0YXJ0JywgdGhpcy5oYW5kbGVUb3BEcmFnU3RhcnQpO1xuICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHRoaXMuaGFuZGxlVG9wRHJhZ1N0YXJ0Q2FwdHVyZSwgdHJ1ZSk7XG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIHRoaXMuaGFuZGxlVG9wRHJhZ0VuZENhcHR1cmUsIHRydWUpO1xuICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsIHRoaXMuaGFuZGxlVG9wRHJhZ0VudGVyKTtcbiAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCB0aGlzLmhhbmRsZVRvcERyYWdFbnRlckNhcHR1cmUsIHRydWUpO1xuICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIHRoaXMuaGFuZGxlVG9wRHJhZ0xlYXZlQ2FwdHVyZSwgdHJ1ZSk7XG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCB0aGlzLmhhbmRsZVRvcERyYWdPdmVyKTtcbiAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuaGFuZGxlVG9wRHJhZ092ZXJDYXB0dXJlLCB0cnVlKTtcbiAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5oYW5kbGVUb3BEcm9wKTtcbiAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcm9wJywgdGhpcy5oYW5kbGVUb3BEcm9wQ2FwdHVyZSwgdHJ1ZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldEN1cnJlbnRTb3VyY2VOb2RlT3B0aW9uc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDdXJyZW50U291cmNlTm9kZU9wdGlvbnMoKSB7XG4gICAgICB2YXIgc291cmNlSWQgPSB0aGlzLm1vbml0b3IuZ2V0U291cmNlSWQoKTtcbiAgICAgIHZhciBzb3VyY2VOb2RlT3B0aW9ucyA9IHRoaXMuc291cmNlTm9kZU9wdGlvbnMuZ2V0KHNvdXJjZUlkKTtcbiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKHtcbiAgICAgICAgZHJvcEVmZmVjdDogdGhpcy5hbHRLZXlQcmVzc2VkID8gJ2NvcHknIDogJ21vdmUnXG4gICAgICB9LCBzb3VyY2VOb2RlT3B0aW9ucyB8fCB7fSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldEN1cnJlbnREcm9wRWZmZWN0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEN1cnJlbnREcm9wRWZmZWN0KCkge1xuICAgICAgaWYgKHRoaXMuaXNEcmFnZ2luZ05hdGl2ZUl0ZW0oKSkge1xuICAgICAgICAvLyBJdCBtYWtlcyBtb3JlIHNlbnNlIHRvIGRlZmF1bHQgdG8gJ2NvcHknIGZvciBuYXRpdmUgcmVzb3VyY2VzXG4gICAgICAgIHJldHVybiAnY29weSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRTb3VyY2VOb2RlT3B0aW9ucygpLmRyb3BFZmZlY3Q7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldEN1cnJlbnRTb3VyY2VQcmV2aWV3Tm9kZU9wdGlvbnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q3VycmVudFNvdXJjZVByZXZpZXdOb2RlT3B0aW9ucygpIHtcbiAgICAgIHZhciBzb3VyY2VJZCA9IHRoaXMubW9uaXRvci5nZXRTb3VyY2VJZCgpO1xuICAgICAgdmFyIHNvdXJjZVByZXZpZXdOb2RlT3B0aW9ucyA9IHRoaXMuc291cmNlUHJldmlld05vZGVPcHRpb25zLmdldChzb3VyY2VJZCk7XG4gICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7XG4gICAgICAgIGFuY2hvclg6IDAuNSxcbiAgICAgICAgYW5jaG9yWTogMC41LFxuICAgICAgICBjYXB0dXJlRHJhZ2dpbmdTdGF0ZTogZmFsc2VcbiAgICAgIH0sIHNvdXJjZVByZXZpZXdOb2RlT3B0aW9ucyB8fCB7fSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzRHJhZ2dpbmdOYXRpdmVJdGVtXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGlzRHJhZ2dpbmdOYXRpdmVJdGVtKCkge1xuICAgICAgdmFyIGl0ZW1UeXBlID0gdGhpcy5tb25pdG9yLmdldEl0ZW1UeXBlKCk7XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMoTmF0aXZlVHlwZXMpLnNvbWUoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gTmF0aXZlVHlwZXNba2V5XSA9PT0gaXRlbVR5cGU7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYmVnaW5EcmFnTmF0aXZlSXRlbVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBiZWdpbkRyYWdOYXRpdmVJdGVtKHR5cGUsIGRhdGFUcmFuc2Zlcikge1xuICAgICAgdGhpcy5jbGVhckN1cnJlbnREcmFnU291cmNlTm9kZSgpO1xuICAgICAgdGhpcy5jdXJyZW50TmF0aXZlU291cmNlID0gY3JlYXRlTmF0aXZlRHJhZ1NvdXJjZSh0eXBlLCBkYXRhVHJhbnNmZXIpO1xuICAgICAgdGhpcy5jdXJyZW50TmF0aXZlSGFuZGxlID0gdGhpcy5yZWdpc3RyeS5hZGRTb3VyY2UodHlwZSwgdGhpcy5jdXJyZW50TmF0aXZlU291cmNlKTtcbiAgICAgIHRoaXMuYWN0aW9ucy5iZWdpbkRyYWcoW3RoaXMuY3VycmVudE5hdGl2ZUhhbmRsZV0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzZXRDdXJyZW50RHJhZ1NvdXJjZU5vZGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Q3VycmVudERyYWdTb3VyY2VOb2RlKG5vZGUpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICB0aGlzLmNsZWFyQ3VycmVudERyYWdTb3VyY2VOb2RlKCk7XG4gICAgICB0aGlzLmN1cnJlbnREcmFnU291cmNlTm9kZSA9IG5vZGU7IC8vIEEgdGltZW91dCBvZiA+IDAgaXMgbmVjZXNzYXJ5IHRvIHJlc29sdmUgRmlyZWZveCBpc3N1ZSByZWZlcmVuY2VkXG4gICAgICAvLyBTZWU6XG4gICAgICAvLyAgICogaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0LWRuZC9yZWFjdC1kbmQvcHVsbC85MjhcbiAgICAgIC8vICAgKiBodHRwczovL2dpdGh1Yi5jb20vcmVhY3QtZG5kL3JlYWN0LWRuZC9pc3N1ZXMvODY5XG5cbiAgICAgIHZhciBNT1VTRV9NT1ZFX1RJTUVPVVQgPSAxMDAwOyAvLyBSZWNlaXZpbmcgYSBtb3VzZSBldmVudCBpbiB0aGUgbWlkZGxlIG9mIGEgZHJhZ2dpbmcgb3BlcmF0aW9uXG4gICAgICAvLyBtZWFucyBpdCBoYXMgZW5kZWQgYW5kIHRoZSBkcmFnIHNvdXJjZSBub2RlIGRpc2FwcGVhcmVkIGZyb20gRE9NLFxuICAgICAgLy8gc28gdGhlIGJyb3dzZXIgZGlkbid0IGRpc3BhdGNoIHRoZSBkcmFnZW5kIGV2ZW50LlxuICAgICAgLy9cbiAgICAgIC8vIFdlIG5lZWQgdG8gd2FpdCBiZWZvcmUgd2Ugc3RhcnQgbGlzdGVuaW5nIGZvciBtb3VzZW1vdmUgZXZlbnRzLlxuICAgICAgLy8gVGhpcyBpcyBuZWVkZWQgYmVjYXVzZSB0aGUgZHJhZyBwcmV2aWV3IG5lZWRzIHRvIGJlIGRyYXduIG9yIGVsc2UgaXQgZmlyZXMgYW4gJ21vdXNlbW92ZScgZXZlbnRcbiAgICAgIC8vIGltbWVkaWF0ZWx5IGluIHNvbWUgYnJvd3NlcnMuXG4gICAgICAvL1xuICAgICAgLy8gU2VlOlxuICAgICAgLy8gICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdC1kbmQvcmVhY3QtZG5kL3B1bGwvOTI4XG4gICAgICAvLyAgICogaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0LWRuZC9yZWFjdC1kbmQvaXNzdWVzLzg2OVxuICAgICAgLy9cblxuICAgICAgdGhpcy5tb3VzZU1vdmVUaW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzNSRyb290RWxlbWVudDtcblxuICAgICAgICByZXR1cm4gKF90aGlzNSRyb290RWxlbWVudCA9IF90aGlzNS5yb290RWxlbWVudCkgPT09IG51bGwgfHwgX3RoaXM1JHJvb3RFbGVtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpczUkcm9vdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgX3RoaXM1LmVuZERyYWdJZlNvdXJjZVdhc1JlbW92ZWRGcm9tRE9NLCB0cnVlKTtcbiAgICAgIH0sIE1PVVNFX01PVkVfVElNRU9VVCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNsZWFyQ3VycmVudERyYWdTb3VyY2VOb2RlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyQ3VycmVudERyYWdTb3VyY2VOb2RlKCkge1xuICAgICAgaWYgKHRoaXMuY3VycmVudERyYWdTb3VyY2VOb2RlKSB7XG4gICAgICAgIHRoaXMuY3VycmVudERyYWdTb3VyY2VOb2RlID0gbnVsbDtcblxuICAgICAgICBpZiAodGhpcy5yb290RWxlbWVudCkge1xuICAgICAgICAgIHZhciBfdGhpcyR3aW5kb3cyO1xuXG4gICAgICAgICAgKF90aGlzJHdpbmRvdzIgPSB0aGlzLndpbmRvdykgPT09IG51bGwgfHwgX3RoaXMkd2luZG93MiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkd2luZG93Mi5jbGVhclRpbWVvdXQodGhpcy5tb3VzZU1vdmVUaW1lb3V0VGltZXIgfHwgdW5kZWZpbmVkKTtcbiAgICAgICAgICB0aGlzLnJvb3RFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuZW5kRHJhZ0lmU291cmNlV2FzUmVtb3ZlZEZyb21ET00sIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tb3VzZU1vdmVUaW1lb3V0VGltZXIgPSBudWxsO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJoYW5kbGVEcmFnU3RhcnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRHJhZ1N0YXJ0KGUsIHNvdXJjZUlkKSB7XG4gICAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmRyYWdTdGFydFNvdXJjZUlkcykge1xuICAgICAgICB0aGlzLmRyYWdTdGFydFNvdXJjZUlkcyA9IFtdO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmRyYWdTdGFydFNvdXJjZUlkcy51bnNoaWZ0KHNvdXJjZUlkKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaGFuZGxlRHJhZ0VudGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZURyYWdFbnRlcihlLCB0YXJnZXRJZCkge1xuICAgICAgdGhpcy5kcmFnRW50ZXJUYXJnZXRJZHMudW5zaGlmdCh0YXJnZXRJZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImhhbmRsZURyYWdPdmVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZURyYWdPdmVyKGUsIHRhcmdldElkKSB7XG4gICAgICBpZiAodGhpcy5kcmFnT3ZlclRhcmdldElkcyA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLmRyYWdPdmVyVGFyZ2V0SWRzID0gW107XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZHJhZ092ZXJUYXJnZXRJZHMudW5zaGlmdCh0YXJnZXRJZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImhhbmRsZURyb3BcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRHJvcChlLCB0YXJnZXRJZCkge1xuICAgICAgdGhpcy5kcm9wVGFyZ2V0SWRzLnVuc2hpZnQodGFyZ2V0SWQpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBIVE1MNUJhY2tlbmRJbXBsO1xufSgpOyIsImltcG9ydCB7IEhUTUw1QmFja2VuZEltcGwgfSBmcm9tICcuL0hUTUw1QmFja2VuZEltcGwnO1xuaW1wb3J0ICogYXMgTmF0aXZlVHlwZXMgZnJvbSAnLi9OYXRpdmVUeXBlcyc7XG5leHBvcnQgeyBnZXRFbXB0eUltYWdlIH0gZnJvbSAnLi9nZXRFbXB0eUltYWdlJztcbmV4cG9ydCB7IE5hdGl2ZVR5cGVzIH07XG5leHBvcnQgdmFyIEhUTUw1QmFja2VuZCA9IGZ1bmN0aW9uIGNyZWF0ZUJhY2tlbmQobWFuYWdlciwgY29udGV4dCwgb3B0aW9ucykge1xuICByZXR1cm4gbmV3IEhUTUw1QmFja2VuZEltcGwobWFuYWdlciwgY29udGV4dCwgb3B0aW9ucyk7XG59OyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHlsZWRJY29uQmFzZSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvc3R5bGVkLWljb24nO1xuZXhwb3J0IHZhciBBcmNoaXZlID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgdmFyIGF0dHJzID0ge1xuICAgIFwiZmlsbFwiOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIFwieG1sbnNcIjogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRJY29uQmFzZSwgX2V4dGVuZHMoe1xuICAgIGljb25BdHRyczogYXR0cnMsXG4gICAgaWNvblZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgaWNvblZpZXdCb3g6IFwiMCAwIDUxMiA1MTJcIlxuICB9LCBwcm9wcywge1xuICAgIHJlZjogcmVmXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZDogXCJNMzIgNDQ4YzAgMTcuNyAxNC4zIDMyIDMyIDMyaDM4NGMxNy43IDAgMzItMTQuMyAzMi0zMlYxNjBIMzJ2Mjg4em0xNjAtMjEyYzAtNi42IDUuNC0xMiAxMi0xMmgxMDRjNi42IDAgMTIgNS40IDEyIDEydjhjMCA2LjYtNS40IDEyLTEyIDEySDIwNGMtNi42IDAtMTItNS40LTEyLTEydi04ek00ODAgMzJIMzJDMTQuMyAzMiAwIDQ2LjMgMCA2NHY0OGMwIDguOCA3LjIgMTYgMTYgMTZoNDgwYzguOCAwIDE2LTcuMiAxNi0xNlY2NGMwLTE3LjctMTQuMy0zMi0zMi0zMnpcIlxuICB9KSk7XG59KTtcbkFyY2hpdmUuZGlzcGxheU5hbWUgPSAnQXJjaGl2ZSc7XG5leHBvcnQgdmFyIEFyY2hpdmVEaW1lbnNpb25zID0ge1xuICBoZWlnaHQ6IDUxMixcbiAgd2lkdGg6IDUxMlxufTsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU3R5bGVkSWNvbkJhc2UgfSBmcm9tICdAc3R5bGVkLWljb25zL3N0eWxlZC1pY29uJztcbmV4cG9ydCB2YXIgQXJyb3dzQWx0ID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgdmFyIGF0dHJzID0ge1xuICAgIFwiZmlsbFwiOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIFwieG1sbnNcIjogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRJY29uQmFzZSwgX2V4dGVuZHMoe1xuICAgIGljb25BdHRyczogYXR0cnMsXG4gICAgaWNvblZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgaWNvblZpZXdCb3g6IFwiMCAwIDUxMiA1MTJcIlxuICB9LCBwcm9wcywge1xuICAgIHJlZjogcmVmXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZDogXCJtMzUyLjIwMSA0MjUuNzc1LTc5LjE5NiA3OS4xOTZjLTkuMzczIDkuMzczLTI0LjU2OCA5LjM3My0zMy45NDEgMGwtNzkuMTk2LTc5LjE5NmMtMTUuMTE5LTE1LjExOS00LjQxMS00MC45NzEgMTYuOTcxLTQwLjk3aDUxLjE2MkwyMjggMjg0SDEyNy4xOTZ2NTEuMTYyYzAgMjEuMzgyLTI1Ljg1MSAzMi4wOS00MC45NzEgMTYuOTcxTDcuMDI5IDI3Mi45MzdjLTkuMzczLTkuMzczLTkuMzczLTI0LjU2OSAwLTMzLjk0MUw4Ni4yMjUgMTU5LjhjMTUuMTE5LTE1LjExOSA0MC45NzEtNC40MTEgNDAuOTcxIDE2Ljk3MVYyMjhIMjI4VjEyNy4xOTZoLTUxLjIzYy0yMS4zODIgMC0zMi4wOS0yNS44NTEtMTYuOTcxLTQwLjk3MWw3OS4xOTYtNzkuMTk2YzkuMzczLTkuMzczIDI0LjU2OC05LjM3MyAzMy45NDEgMGw3OS4xOTYgNzkuMTk2YzE1LjExOSAxNS4xMTkgNC40MTEgNDAuOTcxLTE2Ljk3MSA0MC45NzFoLTUxLjE2MlYyMjhoMTAwLjgwNHYtNTEuMTYyYzAtMjEuMzgyIDI1Ljg1MS0zMi4wOSA0MC45Ny0xNi45NzFsNzkuMTk2IDc5LjE5NmM5LjM3MyA5LjM3MyA5LjM3MyAyNC41NjkgMCAzMy45NDFMNDI1Ljc3MyAzNTIuMmMtMTUuMTE5IDE1LjExOS00MC45NzEgNC40MTEtNDAuOTctMTYuOTcxVjI4NEgyODR2MTAwLjgwNGg1MS4yM2MyMS4zODIgMCAzMi4wOSAyNS44NTEgMTYuOTcxIDQwLjk3MXpcIlxuICB9KSk7XG59KTtcbkFycm93c0FsdC5kaXNwbGF5TmFtZSA9ICdBcnJvd3NBbHQnO1xuZXhwb3J0IHZhciBBcnJvd3NBbHREaW1lbnNpb25zID0ge1xuICBoZWlnaHQ6IDUxMixcbiAgd2lkdGg6IDUxMlxufTsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU3R5bGVkSWNvbkJhc2UgfSBmcm9tICdAc3R5bGVkLWljb25zL3N0eWxlZC1pY29uJztcbmV4cG9ydCB2YXIgQXJyb3dzQWx0ViA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChwcm9wcywgcmVmKSB7XG4gIHZhciBhdHRycyA9IHtcbiAgICBcImZpbGxcIjogXCJjdXJyZW50Q29sb3JcIixcbiAgICBcInhtbG5zXCI6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICB9O1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkSWNvbkJhc2UsIF9leHRlbmRzKHtcbiAgICBpY29uQXR0cnM6IGF0dHJzLFxuICAgIGljb25WZXJ0aWNhbEFsaWduOiBcIm1pZGRsZVwiLFxuICAgIGljb25WaWV3Qm94OiBcIjAgMCAyNTYgNTEyXCJcbiAgfSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGQ6IFwiTTIxNC4wNTkgMzc3Ljk0MUgxNjhWMTM0LjA1OWg0Ni4wNTljMjEuMzgyIDAgMzIuMDktMjUuODUxIDE2Ljk3MS00MC45NzFMMTQ0Ljk3MSA3LjAyOWMtOS4zNzMtOS4zNzMtMjQuNTY4LTkuMzczLTMzLjk0MSAwTDI0Ljk3MSA5My4wODhjLTE1LjExOSAxNS4xMTktNC40MTEgNDAuOTcxIDE2Ljk3MSA0MC45NzFIODh2MjQzLjg4Mkg0MS45NDFjLTIxLjM4MiAwLTMyLjA5IDI1Ljg1MS0xNi45NzEgNDAuOTcxbDg2LjA1OSA4Ni4wNTljOS4zNzMgOS4zNzMgMjQuNTY4IDkuMzczIDMzLjk0MSAwbDg2LjA1OS04Ni4wNTljMTUuMTItMTUuMTE5IDQuNDEyLTQwLjk3MS0xNi45Ny00MC45NzF6XCJcbiAgfSkpO1xufSk7XG5BcnJvd3NBbHRWLmRpc3BsYXlOYW1lID0gJ0Fycm93c0FsdFYnO1xuZXhwb3J0IHZhciBBcnJvd3NBbHRWRGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiA1MTIsXG4gIHdpZHRoOiAyNTZcbn07IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFN0eWxlZEljb25CYXNlIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9zdHlsZWQtaWNvbic7XG5leHBvcnQgdmFyIEJhcnMgPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAocHJvcHMsIHJlZikge1xuICB2YXIgYXR0cnMgPSB7XG4gICAgXCJmaWxsXCI6IFwiY3VycmVudENvbG9yXCIsXG4gICAgXCJ4bWxuc1wiOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZEljb25CYXNlLCBfZXh0ZW5kcyh7XG4gICAgaWNvbkF0dHJzOiBhdHRycyxcbiAgICBpY29uVmVydGljYWxBbGlnbjogXCJtaWRkbGVcIixcbiAgICBpY29uVmlld0JveDogXCIwIDAgNDQ4IDUxMlwiXG4gIH0sIHByb3BzLCB7XG4gICAgcmVmOiByZWZcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBkOiBcIk0xNiAxMzJoNDE2YzguODM3IDAgMTYtNy4xNjMgMTYtMTZWNzZjMC04LjgzNy03LjE2My0xNi0xNi0xNkgxNkM3LjE2MyA2MCAwIDY3LjE2MyAwIDc2djQwYzAgOC44MzcgNy4xNjMgMTYgMTYgMTZ6bTAgMTYwaDQxNmM4LjgzNyAwIDE2LTcuMTYzIDE2LTE2di00MGMwLTguODM3LTcuMTYzLTE2LTE2LTE2SDE2Yy04LjgzNyAwLTE2IDcuMTYzLTE2IDE2djQwYzAgOC44MzcgNy4xNjMgMTYgMTYgMTZ6bTAgMTYwaDQxNmM4LjgzNyAwIDE2LTcuMTYzIDE2LTE2di00MGMwLTguODM3LTcuMTYzLTE2LTE2LTE2SDE2Yy04LjgzNyAwLTE2IDcuMTYzLTE2IDE2djQwYzAgOC44MzcgNy4xNjMgMTYgMTYgMTZ6XCJcbiAgfSkpO1xufSk7XG5CYXJzLmRpc3BsYXlOYW1lID0gJ0JhcnMnO1xuZXhwb3J0IHZhciBCYXJzRGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiA1MTIsXG4gIHdpZHRoOiA0NDhcbn07IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFN0eWxlZEljb25CYXNlIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9zdHlsZWQtaWNvbic7XG5leHBvcnQgdmFyIENhcmV0RG93biA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChwcm9wcywgcmVmKSB7XG4gIHZhciBhdHRycyA9IHtcbiAgICBcImZpbGxcIjogXCJjdXJyZW50Q29sb3JcIixcbiAgICBcInhtbG5zXCI6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICB9O1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkSWNvbkJhc2UsIF9leHRlbmRzKHtcbiAgICBpY29uQXR0cnM6IGF0dHJzLFxuICAgIGljb25WZXJ0aWNhbEFsaWduOiBcIm1pZGRsZVwiLFxuICAgIGljb25WaWV3Qm94OiBcIjAgMCAzMjAgNTEyXCJcbiAgfSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGQ6IFwiTTMxLjMgMTkyaDI1Ny4zYzE3LjggMCAyNi43IDIxLjUgMTQuMSAzNC4xTDE3NC4xIDM1NC44Yy03LjggNy44LTIwLjUgNy44LTI4LjMgMEwxNy4yIDIyNi4xQzQuNiAyMTMuNSAxMy41IDE5MiAzMS4zIDE5MnpcIlxuICB9KSk7XG59KTtcbkNhcmV0RG93bi5kaXNwbGF5TmFtZSA9ICdDYXJldERvd24nO1xuZXhwb3J0IHZhciBDYXJldERvd25EaW1lbnNpb25zID0ge1xuICBoZWlnaHQ6IDUxMixcbiAgd2lkdGg6IDMyMFxufTsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU3R5bGVkSWNvbkJhc2UgfSBmcm9tICdAc3R5bGVkLWljb25zL3N0eWxlZC1pY29uJztcbmV4cG9ydCB2YXIgQ2FyZXRSaWdodCA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChwcm9wcywgcmVmKSB7XG4gIHZhciBhdHRycyA9IHtcbiAgICBcImZpbGxcIjogXCJjdXJyZW50Q29sb3JcIixcbiAgICBcInhtbG5zXCI6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICB9O1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkSWNvbkJhc2UsIF9leHRlbmRzKHtcbiAgICBpY29uQXR0cnM6IGF0dHJzLFxuICAgIGljb25WZXJ0aWNhbEFsaWduOiBcIm1pZGRsZVwiLFxuICAgIGljb25WaWV3Qm94OiBcIjAgMCAxOTIgNTEyXCJcbiAgfSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGQ6IFwiTTAgMzg0LjY2MlYxMjcuMzM4YzAtMTcuODE4IDIxLjU0My0yNi43NDEgMzQuMTQyLTE0LjE0MmwxMjguNjYyIDEyOC42NjJjNy44MSA3LjgxIDcuODEgMjAuNDc0IDAgMjguMjg0TDM0LjE0MiAzOTguODA0QzIxLjU0MyA0MTEuNDA0IDAgNDAyLjQ4IDAgMzg0LjY2MnpcIlxuICB9KSk7XG59KTtcbkNhcmV0UmlnaHQuZGlzcGxheU5hbWUgPSAnQ2FyZXRSaWdodCc7XG5leHBvcnQgdmFyIENhcmV0UmlnaHREaW1lbnNpb25zID0ge1xuICBoZWlnaHQ6IDUxMixcbiAgd2lkdGg6IDE5MlxufTsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU3R5bGVkSWNvbkJhc2UgfSBmcm9tICdAc3R5bGVkLWljb25zL3N0eWxlZC1pY29uJztcbmV4cG9ydCB2YXIgQ2hhcnRBcmVhID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgdmFyIGF0dHJzID0ge1xuICAgIFwiZmlsbFwiOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIFwieG1sbnNcIjogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRJY29uQmFzZSwgX2V4dGVuZHMoe1xuICAgIGljb25BdHRyczogYXR0cnMsXG4gICAgaWNvblZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgaWNvblZpZXdCb3g6IFwiMCAwIDUxMiA1MTJcIlxuICB9LCBwcm9wcywge1xuICAgIHJlZjogcmVmXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZDogXCJNNTAwIDM4NGM2LjYgMCAxMiA1LjQgMTIgMTJ2NDBjMCA2LjYtNS40IDEyLTEyIDEySDEyYy02LjYgMC0xMi01LjQtMTItMTJWNzZjMC02LjYgNS40LTEyIDEyLTEyaDQwYzYuNiAwIDEyIDUuNCAxMiAxMnYzMDhoNDM2ek0zNzIuNyAxNTkuNSAyODggMjE2bC04NS4zLTExMy43Yy01LjEtNi44LTE1LjUtNi4zLTE5LjkgMUw5NiAyNDh2MTA0aDM4NGwtODkuOS0xODcuOGMtMy4yLTYuNS0xMS40LTguNy0xNy40LTQuN3pcIlxuICB9KSk7XG59KTtcbkNoYXJ0QXJlYS5kaXNwbGF5TmFtZSA9ICdDaGFydEFyZWEnO1xuZXhwb3J0IHZhciBDaGFydEFyZWFEaW1lbnNpb25zID0ge1xuICBoZWlnaHQ6IDUxMixcbiAgd2lkdGg6IDUxMlxufTsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU3R5bGVkSWNvbkJhc2UgfSBmcm9tICdAc3R5bGVkLWljb25zL3N0eWxlZC1pY29uJztcbmV4cG9ydCB2YXIgRXhjbGFtYXRpb25UcmlhbmdsZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChwcm9wcywgcmVmKSB7XG4gIHZhciBhdHRycyA9IHtcbiAgICBcImZpbGxcIjogXCJjdXJyZW50Q29sb3JcIixcbiAgICBcInhtbG5zXCI6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICB9O1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkSWNvbkJhc2UsIF9leHRlbmRzKHtcbiAgICBpY29uQXR0cnM6IGF0dHJzLFxuICAgIGljb25WZXJ0aWNhbEFsaWduOiBcIm1pZGRsZVwiLFxuICAgIGljb25WaWV3Qm94OiBcIjAgMCA1NzYgNTEyXCJcbiAgfSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGQ6IFwiTTU2OS41MTcgNDQwLjAxM0M1ODcuOTc1IDQ3Mi4wMDcgNTY0LjgwNiA1MTIgNTI3Ljk0IDUxMkg0OC4wNTRjLTM2LjkzNyAwLTU5Ljk5OS00MC4wNTUtNDEuNTc3LTcxLjk4N0wyNDYuNDIzIDIzLjk4NWMxOC40NjctMzIuMDA5IDY0LjcyLTMxLjk1MSA4My4xNTQgMGwyMzkuOTQgNDE2LjAyOHpNMjg4IDM1NGMtMjUuNDA1IDAtNDYgMjAuNTk1LTQ2IDQ2czIwLjU5NSA0NiA0NiA0NiA0Ni0yMC41OTUgNDYtNDYtMjAuNTk1LTQ2LTQ2LTQ2em0tNDMuNjczLTE2NS4zNDYgNy40MTggMTM2Yy4zNDcgNi4zNjQgNS42MDkgMTEuMzQ2IDExLjk4MiAxMS4zNDZoNDguNTQ2YzYuMzczIDAgMTEuNjM1LTQuOTgyIDExLjk4Mi0xMS4zNDZsNy40MTgtMTM2Yy4zNzUtNi44NzQtNS4wOTgtMTIuNjU0LTExLjk4Mi0xMi42NTRoLTYzLjM4M2MtNi44ODQgMC0xMi4zNTYgNS43OC0xMS45ODEgMTIuNjU0elwiXG4gIH0pKTtcbn0pO1xuRXhjbGFtYXRpb25UcmlhbmdsZS5kaXNwbGF5TmFtZSA9ICdFeGNsYW1hdGlvblRyaWFuZ2xlJztcbmV4cG9ydCB2YXIgRXhjbGFtYXRpb25UcmlhbmdsZURpbWVuc2lvbnMgPSB7XG4gIGhlaWdodDogNTEyLFxuICB3aWR0aDogNTc2XG59OyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHlsZWRJY29uQmFzZSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvc3R5bGVkLWljb24nO1xuZXhwb3J0IHZhciBNYWduZXQgPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAocHJvcHMsIHJlZikge1xuICB2YXIgYXR0cnMgPSB7XG4gICAgXCJmaWxsXCI6IFwiY3VycmVudENvbG9yXCIsXG4gICAgXCJ4bWxuc1wiOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZEljb25CYXNlLCBfZXh0ZW5kcyh7XG4gICAgaWNvbkF0dHJzOiBhdHRycyxcbiAgICBpY29uVmVydGljYWxBbGlnbjogXCJtaWRkbGVcIixcbiAgICBpY29uVmlld0JveDogXCIwIDAgNTEyIDUxMlwiXG4gIH0sIHByb3BzLCB7XG4gICAgcmVmOiByZWZcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBkOiBcIk0xNjQuMDcgMTQ4LjFIMTJhMTIgMTIgMCAwIDEtMTItMTJ2LTgwYTM2IDM2IDAgMCAxIDM2LTM2aDEwNGEzNiAzNiAwIDAgMSAzNiAzNnY4MGExMS44OSAxMS44OSAwIDAgMS0xMS45MyAxMnptMzQ3LjkzLTEyVjU2YTM2IDM2IDAgMCAwLTM2LTM2SDM3MmEzNiAzNiAwIDAgMC0zNiAzNnY4MGExMiAxMiAwIDAgMCAxMiAxMmgxNTJhMTEuODkgMTEuODkgMCAwIDAgMTItMTEuOXptLTE2NCA0NGExMiAxMiAwIDAgMC0xMiAxMnY1MmMwIDEyOC4xLTE2MCAxMjcuOS0xNjAgMHYtNTJhMTIgMTIgMCAwIDAtMTItMTJIMTIuMWExMiAxMiAwIDAgMC0xMiAxMi4xYy4xIDIxLjQuNiA0MC4zIDAgNTMuMyAwIDE1MC42IDEzNi4xNyAyNDYuNiAyNTYuNzUgMjQ2LjZzMjU1LTk2IDI1NS0yNDYuN2MtLjYtMTIuOC0uMi0zMyAwLTUzLjJhMTIgMTIgMCAwIDAtMTItMTIuMXpcIlxuICB9KSk7XG59KTtcbk1hZ25ldC5kaXNwbGF5TmFtZSA9ICdNYWduZXQnO1xuZXhwb3J0IHZhciBNYWduZXREaW1lbnNpb25zID0ge1xuICBoZWlnaHQ6IDUxMixcbiAgd2lkdGg6IDUxMlxufTsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU3R5bGVkSWNvbkJhc2UgfSBmcm9tICdAc3R5bGVkLWljb25zL3N0eWxlZC1pY29uJztcbmV4cG9ydCB2YXIgUGF1c2UgPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAocHJvcHMsIHJlZikge1xuICB2YXIgYXR0cnMgPSB7XG4gICAgXCJmaWxsXCI6IFwiY3VycmVudENvbG9yXCIsXG4gICAgXCJ4bWxuc1wiOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZEljb25CYXNlLCBfZXh0ZW5kcyh7XG4gICAgaWNvbkF0dHJzOiBhdHRycyxcbiAgICBpY29uVmVydGljYWxBbGlnbjogXCJtaWRkbGVcIixcbiAgICBpY29uVmlld0JveDogXCIwIDAgNDQ4IDUxMlwiXG4gIH0sIHByb3BzLCB7XG4gICAgcmVmOiByZWZcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBkOiBcIk0xNDQgNDc5SDQ4Yy0yNi41IDAtNDgtMjEuNS00OC00OFY3OWMwLTI2LjUgMjEuNS00OCA0OC00OGg5NmMyNi41IDAgNDggMjEuNSA0OCA0OHYzNTJjMCAyNi41LTIxLjUgNDgtNDggNDh6bTMwNC00OFY3OWMwLTI2LjUtMjEuNS00OC00OC00OGgtOTZjLTI2LjUgMC00OCAyMS41LTQ4IDQ4djM1MmMwIDI2LjUgMjEuNSA0OCA0OCA0OGg5NmMyNi41IDAgNDgtMjEuNSA0OC00OHpcIlxuICB9KSk7XG59KTtcblBhdXNlLmRpc3BsYXlOYW1lID0gJ1BhdXNlJztcbmV4cG9ydCB2YXIgUGF1c2VEaW1lbnNpb25zID0ge1xuICBoZWlnaHQ6IDUxMixcbiAgd2lkdGg6IDQ0OFxufTsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU3R5bGVkSWNvbkJhc2UgfSBmcm9tICdAc3R5bGVkLWljb25zL3N0eWxlZC1pY29uJztcbmV4cG9ydCB2YXIgUGxheSA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChwcm9wcywgcmVmKSB7XG4gIHZhciBhdHRycyA9IHtcbiAgICBcImZpbGxcIjogXCJjdXJyZW50Q29sb3JcIixcbiAgICBcInhtbG5zXCI6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICB9O1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkSWNvbkJhc2UsIF9leHRlbmRzKHtcbiAgICBpY29uQXR0cnM6IGF0dHJzLFxuICAgIGljb25WZXJ0aWNhbEFsaWduOiBcIm1pZGRsZVwiLFxuICAgIGljb25WaWV3Qm94OiBcIjAgMCA0NDggNTEyXCJcbiAgfSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGQ6IFwiTTQyNC40IDIxNC43IDcyLjQgNi42QzQzLjgtMTAuMyAwIDYuMSAwIDQ3LjlWNDY0YzAgMzcuNSA0MC43IDYwLjEgNzIuNCA0MS4zbDM1Mi0yMDhjMzEuNC0xOC41IDMxLjUtNjQuMSAwLTgyLjZ6XCJcbiAgfSkpO1xufSk7XG5QbGF5LmRpc3BsYXlOYW1lID0gJ1BsYXknO1xuZXhwb3J0IHZhciBQbGF5RGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiA1MTIsXG4gIHdpZHRoOiA0NDhcbn07IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFN0eWxlZEljb25CYXNlIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9zdHlsZWQtaWNvbic7XG5leHBvcnQgdmFyIFByb2plY3REaWFncmFtID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgdmFyIGF0dHJzID0ge1xuICAgIFwiZmlsbFwiOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIFwieG1sbnNcIjogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRJY29uQmFzZSwgX2V4dGVuZHMoe1xuICAgIGljb25BdHRyczogYXR0cnMsXG4gICAgaWNvblZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgaWNvblZpZXdCb3g6IFwiMCAwIDY0MCA1MTJcIlxuICB9LCBwcm9wcywge1xuICAgIHJlZjogcmVmXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZDogXCJNMzg0IDMyMEgyNTZjLTE3LjY3IDAtMzIgMTQuMzMtMzIgMzJ2MTI4YzAgMTcuNjcgMTQuMzMgMzIgMzIgMzJoMTI4YzE3LjY3IDAgMzItMTQuMzMgMzItMzJWMzUyYzAtMTcuNjctMTQuMzMtMzItMzItMzJ6TTE5MiAzMmMwLTE3LjY3LTE0LjMzLTMyLTMyLTMySDMyQzE0LjMzIDAgMCAxNC4zMyAwIDMydjEyOGMwIDE3LjY3IDE0LjMzIDMyIDMyIDMyaDk1LjcybDczLjE2IDEyOC4wNEMyMTEuOTggMzAwLjk4IDIzMi40IDI4OCAyNTYgMjg4aC4yOEwxOTIgMTc1LjUxVjEyOGgyMjRWNjRIMTkyVjMyek02MDggMEg0ODBjLTE3LjY3IDAtMzIgMTQuMzMtMzIgMzJ2MTI4YzAgMTcuNjcgMTQuMzMgMzIgMzIgMzJoMTI4YzE3LjY3IDAgMzItMTQuMzMgMzItMzJWMzJjMC0xNy42Ny0xNC4zMy0zMi0zMi0zMnpcIlxuICB9KSk7XG59KTtcblByb2plY3REaWFncmFtLmRpc3BsYXlOYW1lID0gJ1Byb2plY3REaWFncmFtJztcbmV4cG9ydCB2YXIgUHJvamVjdERpYWdyYW1EaW1lbnNpb25zID0ge1xuICBoZWlnaHQ6IDUxMixcbiAgd2lkdGg6IDY0MFxufTsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU3R5bGVkSWNvbkJhc2UgfSBmcm9tICdAc3R5bGVkLWljb25zL3N0eWxlZC1pY29uJztcbmV4cG9ydCB2YXIgU2xpZGVyc0ggPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAocHJvcHMsIHJlZikge1xuICB2YXIgYXR0cnMgPSB7XG4gICAgXCJmaWxsXCI6IFwiY3VycmVudENvbG9yXCIsXG4gICAgXCJ4bWxuc1wiOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZEljb25CYXNlLCBfZXh0ZW5kcyh7XG4gICAgaWNvbkF0dHJzOiBhdHRycyxcbiAgICBpY29uVmVydGljYWxBbGlnbjogXCJtaWRkbGVcIixcbiAgICBpY29uVmlld0JveDogXCIwIDAgNTEyIDUxMlwiXG4gIH0sIHByb3BzLCB7XG4gICAgcmVmOiByZWZcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBkOiBcIk00OTYgMzg0SDE2MHYtMTZjMC04LjgtNy4yLTE2LTE2LTE2aC0zMmMtOC44IDAtMTYgNy4yLTE2IDE2djE2SDE2Yy04LjggMC0xNiA3LjItMTYgMTZ2MzJjMCA4LjggNy4yIDE2IDE2IDE2aDgwdjE2YzAgOC44IDcuMiAxNiAxNiAxNmgzMmM4LjggMCAxNi03LjIgMTYtMTZ2LTE2aDMzNmM4LjggMCAxNi03LjIgMTYtMTZ2LTMyYzAtOC44LTcuMi0xNi0xNi0xNnptMC0xNjBoLTgwdi0xNmMwLTguOC03LjItMTYtMTYtMTZoLTMyYy04LjggMC0xNiA3LjItMTYgMTZ2MTZIMTZjLTguOCAwLTE2IDcuMi0xNiAxNnYzMmMwIDguOCA3LjIgMTYgMTYgMTZoMzM2djE2YzAgOC44IDcuMiAxNiAxNiAxNmgzMmM4LjggMCAxNi03LjIgMTYtMTZ2LTE2aDgwYzguOCAwIDE2LTcuMiAxNi0xNnYtMzJjMC04LjgtNy4yLTE2LTE2LTE2em0wLTE2MEgyODhWNDhjMC04LjgtNy4yLTE2LTE2LTE2aC0zMmMtOC44IDAtMTYgNy4yLTE2IDE2djE2SDE2QzcuMiA2NCAwIDcxLjIgMCA4MHYzMmMwIDguOCA3LjIgMTYgMTYgMTZoMjA4djE2YzAgOC44IDcuMiAxNiAxNiAxNmgzMmM4LjggMCAxNi03LjIgMTYtMTZ2LTE2aDIwOGM4LjggMCAxNi03LjIgMTYtMTZWODBjMC04LjgtNy4yLTE2LTE2LTE2elwiXG4gIH0pKTtcbn0pO1xuU2xpZGVyc0guZGlzcGxheU5hbWUgPSAnU2xpZGVyc0gnO1xuZXhwb3J0IHZhciBTbGlkZXJzSERpbWVuc2lvbnMgPSB7XG4gIGhlaWdodDogNTEyLFxuICB3aWR0aDogNTEyXG59OyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHlsZWRJY29uQmFzZSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvc3R5bGVkLWljb24nO1xuZXhwb3J0IHZhciBTeW5jQWx0ID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgdmFyIGF0dHJzID0ge1xuICAgIFwiZmlsbFwiOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIFwieG1sbnNcIjogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRJY29uQmFzZSwgX2V4dGVuZHMoe1xuICAgIGljb25BdHRyczogYXR0cnMsXG4gICAgaWNvblZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgaWNvblZpZXdCb3g6IFwiMCAwIDUxMiA1MTJcIlxuICB9LCBwcm9wcywge1xuICAgIHJlZjogcmVmXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZDogXCJNMzcwLjcyIDEzMy4yOEMzMzkuNDU4IDEwNC4wMDggMjk4Ljg4OCA4Ny45NjIgMjU1Ljg0OCA4OGMtNzcuNDU4LjA2OC0xNDQuMzI4IDUzLjE3OC0xNjIuNzkxIDEyNi44NS0xLjM0NCA1LjM2My02LjEyMiA5LjE1LTExLjY1MSA5LjE1SDI0LjEwM2MtNy40OTggMC0xMy4xOTQtNi44MDctMTEuODA3LTE0LjE3NkMzMy45MzMgOTQuOTI0IDEzNC44MTMgOCAyNTYgOGM2Ni40NDggMCAxMjYuNzkxIDI2LjEzNiAxNzEuMzE1IDY4LjY4NUw0NjMuMDMgNDAuOTdDNDc4LjE0OSAyNS44NTEgNTA0IDM2LjU1OSA1MDQgNTcuOTQxVjE5MmMwIDEzLjI1NS0xMC43NDUgMjQtMjQgMjRIMzQ1Ljk0MWMtMjEuMzgyIDAtMzIuMDktMjUuODUxLTE2Ljk3MS00MC45NzFsNDEuNzUtNDEuNzQ5ek0zMiAyOTZoMTM0LjA1OWMyMS4zODIgMCAzMi4wOSAyNS44NTEgMTYuOTcxIDQwLjk3MWwtNDEuNzUgNDEuNzVjMzEuMjYyIDI5LjI3MyA3MS44MzUgNDUuMzE5IDExNC44NzYgNDUuMjggNzcuNDE4LS4wNyAxNDQuMzE1LTUzLjE0NCAxNjIuNzg3LTEyNi44NDkgMS4zNDQtNS4zNjMgNi4xMjItOS4xNSAxMS42NTEtOS4xNWg1Ny4zMDRjNy40OTggMCAxMy4xOTQgNi44MDcgMTEuODA3IDE0LjE3NkM0NzguMDY3IDQxNy4wNzYgMzc3LjE4NyA1MDQgMjU2IDUwNGMtNjYuNDQ4IDAtMTI2Ljc5MS0yNi4xMzYtMTcxLjMxNS02OC42ODVMNDguOTcgNDcxLjAzQzMzLjg1MSA0ODYuMTQ5IDggNDc1LjQ0MSA4IDQ1NC4wNTlWMzIwYzAtMTMuMjU1IDEwLjc0NS0yNCAyNC0yNHpcIlxuICB9KSk7XG59KTtcblN5bmNBbHQuZGlzcGxheU5hbWUgPSAnU3luY0FsdCc7XG5leHBvcnQgdmFyIFN5bmNBbHREaW1lbnNpb25zID0ge1xuICBoZWlnaHQ6IDUxMixcbiAgd2lkdGg6IDUxMlxufTsiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuLyoqIEBpZ25vcmUgKi9cbmV4cG9ydCBjb25zdCBkZWZhdWx0R3JvdXAgPSB7XG4gICAgZmxvYXRhYmxlOiB0cnVlLFxuICAgIG1heGltaXphYmxlOiB0cnVlLFxufTtcbi8qKiBAaWdub3JlICovXG5leHBvcnQgY29uc3QgcGxhY2VIb2xkZXJTdHlsZSA9ICdwbGFjZS1ob2xkZXInO1xuLyoqIEBpZ25vcmUgKi9cbmV4cG9ydCBjb25zdCBtYXhpbWVQbGFjZUhvbGRlcklkID0gJy1tYXhpbWl6ZWQtcGxhY2Vob2xkZXItJztcbi8qKiBAaWdub3JlICovXG5leHBvcnQgY29uc3QgcGxhY2VIb2xkZXJHcm91cCA9IHtcbiAgICBmbG9hdGFibGU6IGZhbHNlLFxufTtcbi8qKiBAaWdub3JlICovXG5leHBvcnQgY29uc3QgRG9ja0NvbnRleHRUeXBlID0gUmVhY3QuY3JlYXRlQ29udGV4dChudWxsKTtcbi8qKiBAaWdub3JlICovXG5leHBvcnQgY29uc3QgRG9ja0NvbnRleHRQcm92aWRlciA9IERvY2tDb250ZXh0VHlwZS5Qcm92aWRlcjtcbi8qKiBAaWdub3JlICovXG5leHBvcnQgY29uc3QgRG9ja0NvbnRleHRDb25zdW1lciA9IERvY2tDb250ZXh0VHlwZS5Db25zdW1lcjtcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBpc0ZyYWdtZW50IH0gZnJvbSAncmVhY3QtaXMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9BcnJheShjaGlsZHJlbikge1xuICB2YXIgb3B0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgdmFyIHJldCA9IFtdO1xuICBSZWFjdC5DaGlsZHJlbi5mb3JFYWNoKGNoaWxkcmVuLCBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICBpZiAoKGNoaWxkID09PSB1bmRlZmluZWQgfHwgY2hpbGQgPT09IG51bGwpICYmICFvcHRpb24ua2VlcEVtcHR5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGQpKSB7XG4gICAgICByZXQgPSByZXQuY29uY2F0KHRvQXJyYXkoY2hpbGQpKTtcbiAgICB9IGVsc2UgaWYgKGlzRnJhZ21lbnQoY2hpbGQpICYmIGNoaWxkLnByb3BzKSB7XG4gICAgICByZXQgPSByZXQuY29uY2F0KHRvQXJyYXkoY2hpbGQucHJvcHMuY2hpbGRyZW4sIG9wdGlvbikpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXQucHVzaChjaGlsZCk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJldDtcbn0iLCJleHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKCkge1xuICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgYWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IgfHwgd2luZG93Lm9wZXJhO1xuXG4gIGlmICgvKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoNHw2KTB8c3ltYmlhbnx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vfGFuZHJvaWR8aXBhZHxwbGF5Ym9va3xzaWxrL2kudGVzdChhZ2VudCkgfHwgLzEyMDd8NjMxMHw2NTkwfDNnc298NHRocHw1MFsxLTZdaXw3NzBzfDgwMnN8YSB3YXxhYmFjfGFjKGVyfG9vfHMtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfC1tfHIgfHMgKXxhdmFufGJlKGNrfGxsfG5xKXxiaShsYnxyZCl8YmwoYWN8YXopfGJyKGV8dil3fGJ1bWJ8YnctKG58dSl8YzU1XFwvfGNhcGl8Y2N3YXxjZG0tfGNlbGx8Y2h0bXxjbGRjfGNtZC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGMtc3xkZXZpfGRpY2F8ZG1vYnxkbyhjfHApb3xkcygxMnwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2YtNXxnLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGQtKG18cHx0KXxoZWktfGhpKHB0fHRhKXxocCggaXxpcCl8aHMtY3xodChjKC18IHxffGF8Z3xwfHN8dCl8dHApfGh1KGF3fHRjKXxpLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2MtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcXC8oa3xsfHUpfDUwfDU0fC1bYS13XSl8bGlid3xseW54fG0xLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtLWNyfG1lKHJjfHJpKXxtaShvOHxvYXx0cyl8bW1lZnxtbygwMXwwMnxiaXxkZXxkb3x0KC18IHxvfHYpfHp6KXxtdCg1MHxwMXx2ICl8bXdicHxteXdhfG4xMFswLTJdfG4yMFsyLTNdfG4zMCgwfDIpfG41MCgwfDJ8NSl8bjcoMCgwfDEpfDEwKXxuZSgoY3xtKS18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfC0oWzEtOF18YykpfHBoaWx8cGlyZXxwbChheXx1Yyl8cG4tMnxwbyhja3xydHxzZSl8cHJveHxwc2lvfHB0LWd8cWEtYXxxYygwN3wxMnwyMXwzMnw2MHwtWzItN118aS0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoLXxvb3xwLSl8c2RrXFwvfHNlKGMoLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2gtfHNoYXJ8c2llKC18bSl8c2stMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoLXx2LXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbC18dGRnLXx0ZWwoaXxtKXx0aW0tfHQtbW98dG8ocGx8c2gpfHRzKDcwfG0tfG0zfG01KXx0eC05fHVwKFxcLmJ8ZzF8c2kpfHV0c3R8djQwMHx2NzUwfHZlcml8dmkocmd8dGUpfHZrKDQwfDVbMC0zXXwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYygtfCApfHdlYmN8d2hpdHx3aShnIHxuY3xudyl8d21sYnx3b251fHg3MDB8eWFzLXx5b3VyfHpldG98enRlLS9pLnRlc3QoYWdlbnQgPT09IG51bGwgfHwgYWdlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFnZW50LnN1YnN0cigwLCA0KSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn0pOyIsImltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlQ29udHJvbGxlZFN0YXRlKGRlZmF1bHRTdGF0ZVZhbHVlLCBvcHRpb24pIHtcbiAgdmFyIF9yZWYgPSBvcHRpb24gfHwge30sXG4gICAgICBkZWZhdWx0VmFsdWUgPSBfcmVmLmRlZmF1bHRWYWx1ZSxcbiAgICAgIHZhbHVlID0gX3JlZi52YWx1ZSxcbiAgICAgIG9uQ2hhbmdlID0gX3JlZi5vbkNoYW5nZSxcbiAgICAgIHBvc3RTdGF0ZSA9IF9yZWYucG9zdFN0YXRlO1xuXG4gIHZhciBfUmVhY3QkdXNlU3RhdGUgPSBSZWFjdC51c2VTdGF0ZShmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBpZiAoZGVmYXVsdFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgZGVmYXVsdFZhbHVlID09PSAnZnVuY3Rpb24nID8gZGVmYXVsdFZhbHVlKCkgOiBkZWZhdWx0VmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHR5cGVvZiBkZWZhdWx0U3RhdGVWYWx1ZSA9PT0gJ2Z1bmN0aW9uJyA/IGRlZmF1bHRTdGF0ZVZhbHVlKCkgOiBkZWZhdWx0U3RhdGVWYWx1ZTtcbiAgfSksXG4gICAgICBfUmVhY3QkdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlLCAyKSxcbiAgICAgIGlubmVyVmFsdWUgPSBfUmVhY3QkdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0SW5uZXJWYWx1ZSA9IF9SZWFjdCR1c2VTdGF0ZTJbMV07XG5cbiAgdmFyIG1lcmdlZFZhbHVlID0gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDogaW5uZXJWYWx1ZTtcblxuICBpZiAocG9zdFN0YXRlKSB7XG4gICAgbWVyZ2VkVmFsdWUgPSBwb3N0U3RhdGUobWVyZ2VkVmFsdWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJpZ2dlckNoYW5nZShuZXdWYWx1ZSkge1xuICAgIHNldElubmVyVmFsdWUobmV3VmFsdWUpO1xuXG4gICAgaWYgKG1lcmdlZFZhbHVlICE9PSBuZXdWYWx1ZSAmJiBvbkNoYW5nZSkge1xuICAgICAgb25DaGFuZ2UobmV3VmFsdWUsIG1lcmdlZFZhbHVlKTtcbiAgICB9XG4gIH0gLy8gRWZmZWN0IG9mIHJlc2V0IHZhbHVlIHRvIGB1bmRlZmluZWRgXG5cblxuICB2YXIgZmlyc3RSZW5kZXJSZWYgPSBSZWFjdC51c2VSZWYodHJ1ZSk7XG4gIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGZpcnN0UmVuZGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgIGZpcnN0UmVuZGVyUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgc2V0SW5uZXJWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuICB9LCBbdmFsdWVdKTtcbiAgcmV0dXJuIFttZXJnZWRWYWx1ZSwgdHJpZ2dlckNoYW5nZV07XG59IiwidmFyIHJhZiA9IGZ1bmN0aW9uIHJhZihjYWxsYmFjaykge1xuICByZXR1cm4gK3NldFRpbWVvdXQoY2FsbGJhY2ssIDE2KTtcbn07XG5cbnZhciBjYWYgPSBmdW5jdGlvbiBjYWYobnVtKSB7XG4gIHJldHVybiBjbGVhclRpbWVvdXQobnVtKTtcbn07XG5cbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiAncmVxdWVzdEFuaW1hdGlvbkZyYW1lJyBpbiB3aW5kb3cpIHtcbiAgcmFmID0gZnVuY3Rpb24gcmFmKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spO1xuICB9O1xuXG4gIGNhZiA9IGZ1bmN0aW9uIGNhZihoYW5kbGUpIHtcbiAgICByZXR1cm4gd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKGhhbmRsZSk7XG4gIH07XG59XG5cbnZhciByYWZVVUlEID0gMDtcbnZhciByYWZJZHMgPSBuZXcgTWFwKCk7XG5cbmZ1bmN0aW9uIGNsZWFudXAoaWQpIHtcbiAgcmFmSWRzLmRlbGV0ZShpZCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHdyYXBwZXJSYWYoY2FsbGJhY2spIHtcbiAgdmFyIHRpbWVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAxO1xuICByYWZVVUlEICs9IDE7XG4gIHZhciBpZCA9IHJhZlVVSUQ7XG5cbiAgZnVuY3Rpb24gY2FsbFJlZihsZWZ0VGltZXMpIHtcbiAgICBpZiAobGVmdFRpbWVzID09PSAwKSB7XG4gICAgICAvLyBDbGVhbiB1cFxuICAgICAgY2xlYW51cChpZCk7IC8vIFRyaWdnZXJcblxuICAgICAgY2FsbGJhY2soKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTmV4dCByYWZcbiAgICAgIHZhciByZWFsSWQgPSByYWYoZnVuY3Rpb24gKCkge1xuICAgICAgICBjYWxsUmVmKGxlZnRUaW1lcyAtIDEpO1xuICAgICAgfSk7IC8vIEJpbmQgcmVhbCByYWYgaWRcblxuICAgICAgcmFmSWRzLnNldChpZCwgcmVhbElkKTtcbiAgICB9XG4gIH1cblxuICBjYWxsUmVmKHRpbWVzKTtcbiAgcmV0dXJuIGlkO1xufVxuXG53cmFwcGVyUmFmLmNhbmNlbCA9IGZ1bmN0aW9uIChpZCkge1xuICB2YXIgcmVhbElkID0gcmFmSWRzLmdldChpZCk7XG4gIGNsZWFudXAocmVhbElkKTtcbiAgcmV0dXJuIGNhZihyZWFsSWQpO1xufTsiLCJpbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbi8qKlxuICogUmV0dXJuIGlmIGEgbm9kZSBpcyBhIERPTSBub2RlLiBFbHNlIHdpbGwgcmV0dXJuIGJ5IGBmaW5kRE9NTm9kZWBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBmaW5kRE9NTm9kZShub2RlKSB7XG4gIGlmIChub2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIHJldHVybiBSZWFjdERPTS5maW5kRE9NTm9kZShub2RlKTtcbn0iLCJpbXBvcnQgX3R5cGVvZiBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mXCI7XG5pbXBvcnQgeyBpc01lbW8gfSBmcm9tICdyZWFjdC1pcyc7XG5leHBvcnQgZnVuY3Rpb24gZmlsbFJlZihyZWYsIG5vZGUpIHtcbiAgaWYgKHR5cGVvZiByZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZWYobm9kZSk7XG4gIH0gZWxzZSBpZiAoX3R5cGVvZihyZWYpID09PSAnb2JqZWN0JyAmJiByZWYgJiYgJ2N1cnJlbnQnIGluIHJlZikge1xuICAgIHJlZi5jdXJyZW50ID0gbm9kZTtcbiAgfVxufVxuLyoqXG4gKiBNZXJnZSByZWZzIGludG8gb25lIHJlZiBmdW5jdGlvbiB0byBzdXBwb3J0IHJlZiBwYXNzaW5nLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wb3NlUmVmKCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgcmVmcyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICByZWZzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgcmVmcy5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgIGZpbGxSZWYocmVmLCBub2RlKTtcbiAgICB9KTtcbiAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzdXBwb3J0UmVmKG5vZGVPckNvbXBvbmVudCkge1xuICB2YXIgX3R5cGUkcHJvdG90eXBlLCBfbm9kZU9yQ29tcG9uZW50JHByb3Q7XG5cbiAgdmFyIHR5cGUgPSBpc01lbW8obm9kZU9yQ29tcG9uZW50KSA/IG5vZGVPckNvbXBvbmVudC50eXBlLnR5cGUgOiBub2RlT3JDb21wb25lbnQudHlwZTsgLy8gRnVuY3Rpb24gY29tcG9uZW50IG5vZGVcblxuICBpZiAodHlwZW9mIHR5cGUgPT09ICdmdW5jdGlvbicgJiYgISgoX3R5cGUkcHJvdG90eXBlID0gdHlwZS5wcm90b3R5cGUpID09PSBudWxsIHx8IF90eXBlJHByb3RvdHlwZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3R5cGUkcHJvdG90eXBlLnJlbmRlcikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gLy8gQ2xhc3MgY29tcG9uZW50XG5cblxuICBpZiAodHlwZW9mIG5vZGVPckNvbXBvbmVudCA9PT0gJ2Z1bmN0aW9uJyAmJiAhKChfbm9kZU9yQ29tcG9uZW50JHByb3QgPSBub2RlT3JDb21wb25lbnQucHJvdG90eXBlKSA9PT0gbnVsbCB8fCBfbm9kZU9yQ29tcG9uZW50JHByb3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9ub2RlT3JDb21wb25lbnQkcHJvdC5yZW5kZXIpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG4vKiBlc2xpbnQtZW5hYmxlICovIiwiLyoqXHJcbiAqIEEgY29sbGVjdGlvbiBvZiBzaGltcyB0aGF0IHByb3ZpZGUgbWluaW1hbCBmdW5jdGlvbmFsaXR5IG9mIHRoZSBFUzYgY29sbGVjdGlvbnMuXHJcbiAqXHJcbiAqIFRoZXNlIGltcGxlbWVudGF0aW9ucyBhcmUgbm90IG1lYW50IHRvIGJlIHVzZWQgb3V0c2lkZSBvZiB0aGUgUmVzaXplT2JzZXJ2ZXJcclxuICogbW9kdWxlcyBhcyB0aGV5IGNvdmVyIG9ubHkgYSBsaW1pdGVkIHJhbmdlIG9mIHVzZSBjYXNlcy5cclxuICovXHJcbi8qIGVzbGludC1kaXNhYmxlIHJlcXVpcmUtanNkb2MsIHZhbGlkLWpzZG9jICovXHJcbnZhciBNYXBTaGltID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0eXBlb2YgTWFwICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBNYXA7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgaW5kZXggaW4gcHJvdmlkZWQgYXJyYXkgdGhhdCBtYXRjaGVzIHRoZSBzcGVjaWZpZWQga2V5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7QXJyYXk8QXJyYXk+fSBhcnJcclxuICAgICAqIEBwYXJhbSB7Kn0ga2V5XHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRJbmRleChhcnIsIGtleSkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSAtMTtcclxuICAgICAgICBhcnIuc29tZShmdW5jdGlvbiAoZW50cnksIGluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmIChlbnRyeVswXSA9PT0ga2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBpbmRleDtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBjbGFzc18xKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9fZW50cmllc19fID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjbGFzc18xLnByb3RvdHlwZSwgXCJzaXplXCIsIHtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fX2VudHJpZXNfXy5sZW5ndGg7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0ga2V5XHJcbiAgICAgICAgICogQHJldHVybnMgeyp9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBnZXRJbmRleCh0aGlzLl9fZW50cmllc19fLCBrZXkpO1xyXG4gICAgICAgICAgICB2YXIgZW50cnkgPSB0aGlzLl9fZW50cmllc19fW2luZGV4XTtcclxuICAgICAgICAgICAgcmV0dXJuIGVudHJ5ICYmIGVudHJ5WzFdO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBrZXlcclxuICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlXHJcbiAgICAgICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXgodGhpcy5fX2VudHJpZXNfXywga2V5KTtcclxuICAgICAgICAgICAgaWYgKH5pbmRleCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fX2VudHJpZXNfX1tpbmRleF1bMV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX19lbnRyaWVzX18ucHVzaChba2V5LCB2YWx1ZV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcGFyYW0geyp9IGtleVxyXG4gICAgICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgdmFyIGVudHJpZXMgPSB0aGlzLl9fZW50cmllc19fO1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBnZXRJbmRleChlbnRyaWVzLCBrZXkpO1xyXG4gICAgICAgICAgICBpZiAofmluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBlbnRyaWVzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0ga2V5XHJcbiAgICAgICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gISF+Z2V0SW5kZXgodGhpcy5fX2VudHJpZXNfXywga2V5KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9fZW50cmllc19fLnNwbGljZSgwKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBbY3R4PW51bGxdXHJcbiAgICAgICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY2xhc3NfMS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgY3R4KSB7XHJcbiAgICAgICAgICAgIGlmIChjdHggPT09IHZvaWQgMCkgeyBjdHggPSBudWxsOyB9XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLl9fZW50cmllc19fOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVudHJ5ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbChjdHgsIGVudHJ5WzFdLCBlbnRyeVswXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBjbGFzc18xO1xyXG4gICAgfSgpKTtcclxufSkoKTtcblxuLyoqXHJcbiAqIERldGVjdHMgd2hldGhlciB3aW5kb3cgYW5kIGRvY3VtZW50IG9iamVjdHMgYXJlIGF2YWlsYWJsZSBpbiBjdXJyZW50IGVudmlyb25tZW50LlxyXG4gKi9cclxudmFyIGlzQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRvY3VtZW50ID09PSBkb2N1bWVudDtcblxuLy8gUmV0dXJucyBnbG9iYWwgb2JqZWN0IG9mIGEgY3VycmVudCBlbnZpcm9ubWVudC5cclxudmFyIGdsb2JhbCQxID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyAmJiBnbG9iYWwuTWF0aCA9PT0gTWF0aCkge1xyXG4gICAgICAgIHJldHVybiBnbG9iYWw7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmIHNlbGYuTWF0aCA9PT0gTWF0aCkge1xyXG4gICAgICAgIHJldHVybiBzZWxmO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5NYXRoID09PSBNYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcclxuICAgIH1cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuY1xyXG4gICAgcmV0dXJuIEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XHJcbn0pKCk7XG5cbi8qKlxyXG4gKiBBIHNoaW0gZm9yIHRoZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgd2hpY2ggZmFsbHMgYmFjayB0byB0aGUgc2V0VGltZW91dCBpZlxyXG4gKiBmaXJzdCBvbmUgaXMgbm90IHN1cHBvcnRlZC5cclxuICpcclxuICogQHJldHVybnMge251bWJlcn0gUmVxdWVzdHMnIGlkZW50aWZpZXIuXHJcbiAqL1xyXG52YXIgcmVxdWVzdEFuaW1hdGlvbkZyYW1lJDEgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHR5cGVvZiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAvLyBJdCdzIHJlcXVpcmVkIHRvIHVzZSBhIGJvdW5kZWQgZnVuY3Rpb24gYmVjYXVzZSBJRSBzb21ldGltZXMgdGhyb3dzXHJcbiAgICAgICAgLy8gYW4gXCJJbnZhbGlkIGNhbGxpbmcgb2JqZWN0XCIgZXJyb3IgaWYgckFGIGlzIGludm9rZWQgd2l0aG91dCB0aGUgZ2xvYmFsXHJcbiAgICAgICAgLy8gb2JqZWN0IG9uIHRoZSBsZWZ0IGhhbmQgc2lkZS5cclxuICAgICAgICByZXR1cm4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lLmJpbmQoZ2xvYmFsJDEpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjYWxsYmFjaykgeyByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBjYWxsYmFjayhEYXRlLm5vdygpKTsgfSwgMTAwMCAvIDYwKTsgfTtcclxufSkoKTtcblxuLy8gRGVmaW5lcyBtaW5pbXVtIHRpbWVvdXQgYmVmb3JlIGFkZGluZyBhIHRyYWlsaW5nIGNhbGwuXHJcbnZhciB0cmFpbGluZ1RpbWVvdXQgPSAyO1xyXG4vKipcclxuICogQ3JlYXRlcyBhIHdyYXBwZXIgZnVuY3Rpb24gd2hpY2ggZW5zdXJlcyB0aGF0IHByb3ZpZGVkIGNhbGxiYWNrIHdpbGwgYmVcclxuICogaW52b2tlZCBvbmx5IG9uY2UgZHVyaW5nIHRoZSBzcGVjaWZpZWQgZGVsYXkgcGVyaW9kLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAtIEZ1bmN0aW9uIHRvIGJlIGludm9rZWQgYWZ0ZXIgdGhlIGRlbGF5IHBlcmlvZC5cclxuICogQHBhcmFtIHtudW1iZXJ9IGRlbGF5IC0gRGVsYXkgYWZ0ZXIgd2hpY2ggdG8gaW52b2tlIGNhbGxiYWNrLlxyXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259XHJcbiAqL1xyXG5mdW5jdGlvbiB0aHJvdHRsZSAoY2FsbGJhY2ssIGRlbGF5KSB7XHJcbiAgICB2YXIgbGVhZGluZ0NhbGwgPSBmYWxzZSwgdHJhaWxpbmdDYWxsID0gZmFsc2UsIGxhc3RDYWxsVGltZSA9IDA7XHJcbiAgICAvKipcclxuICAgICAqIEludm9rZXMgdGhlIG9yaWdpbmFsIGNhbGxiYWNrIGZ1bmN0aW9uIGFuZCBzY2hlZHVsZXMgbmV3IGludm9jYXRpb24gaWZcclxuICAgICAqIHRoZSBcInByb3h5XCIgd2FzIGNhbGxlZCBkdXJpbmcgY3VycmVudCByZXF1ZXN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiByZXNvbHZlUGVuZGluZygpIHtcclxuICAgICAgICBpZiAobGVhZGluZ0NhbGwpIHtcclxuICAgICAgICAgICAgbGVhZGluZ0NhbGwgPSBmYWxzZTtcclxuICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRyYWlsaW5nQ2FsbCkge1xyXG4gICAgICAgICAgICBwcm94eSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGJhY2sgaW52b2tlZCBhZnRlciB0aGUgc3BlY2lmaWVkIGRlbGF5LiBJdCB3aWxsIGZ1cnRoZXIgcG9zdHBvbmVcclxuICAgICAqIGludm9jYXRpb24gb2YgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIGRlbGVnYXRpbmcgaXQgdG8gdGhlXHJcbiAgICAgKiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHRpbWVvdXRDYWxsYmFjaygpIHtcclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUkMShyZXNvbHZlUGVuZGluZyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNjaGVkdWxlcyBpbnZvY2F0aW9uIG9mIHRoZSBvcmlnaW5hbCBmdW5jdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcHJveHkoKSB7XHJcbiAgICAgICAgdmFyIHRpbWVTdGFtcCA9IERhdGUubm93KCk7XHJcbiAgICAgICAgaWYgKGxlYWRpbmdDYWxsKSB7XHJcbiAgICAgICAgICAgIC8vIFJlamVjdCBpbW1lZGlhdGVseSBmb2xsb3dpbmcgY2FsbHMuXHJcbiAgICAgICAgICAgIGlmICh0aW1lU3RhbXAgLSBsYXN0Q2FsbFRpbWUgPCB0cmFpbGluZ1RpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBTY2hlZHVsZSBuZXcgY2FsbCB0byBiZSBpbiBpbnZva2VkIHdoZW4gdGhlIHBlbmRpbmcgb25lIGlzIHJlc29sdmVkLlxyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGltcG9ydGFudCBmb3IgXCJ0cmFuc2l0aW9uc1wiIHdoaWNoIG5ldmVyIGFjdHVhbGx5IHN0YXJ0XHJcbiAgICAgICAgICAgIC8vIGltbWVkaWF0ZWx5IHNvIHRoZXJlIGlzIGEgY2hhbmNlIHRoYXQgd2UgbWlnaHQgbWlzcyBvbmUgaWYgY2hhbmdlXHJcbiAgICAgICAgICAgIC8vIGhhcHBlbnMgYW1pZHMgdGhlIHBlbmRpbmcgaW52b2NhdGlvbi5cclxuICAgICAgICAgICAgdHJhaWxpbmdDYWxsID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGxlYWRpbmdDYWxsID0gdHJ1ZTtcclxuICAgICAgICAgICAgdHJhaWxpbmdDYWxsID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQodGltZW91dENhbGxiYWNrLCBkZWxheSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxhc3RDYWxsVGltZSA9IHRpbWVTdGFtcDtcclxuICAgIH1cclxuICAgIHJldHVybiBwcm94eTtcclxufVxuXG4vLyBNaW5pbXVtIGRlbGF5IGJlZm9yZSBpbnZva2luZyB0aGUgdXBkYXRlIG9mIG9ic2VydmVycy5cclxudmFyIFJFRlJFU0hfREVMQVkgPSAyMDtcclxuLy8gQSBsaXN0IG9mIHN1YnN0cmluZ3Mgb2YgQ1NTIHByb3BlcnRpZXMgdXNlZCB0byBmaW5kIHRyYW5zaXRpb24gZXZlbnRzIHRoYXRcclxuLy8gbWlnaHQgYWZmZWN0IGRpbWVuc2lvbnMgb2Ygb2JzZXJ2ZWQgZWxlbWVudHMuXHJcbnZhciB0cmFuc2l0aW9uS2V5cyA9IFsndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbScsICdsZWZ0JywgJ3dpZHRoJywgJ2hlaWdodCcsICdzaXplJywgJ3dlaWdodCddO1xyXG4vLyBDaGVjayBpZiBNdXRhdGlvbk9ic2VydmVyIGlzIGF2YWlsYWJsZS5cclxudmFyIG11dGF0aW9uT2JzZXJ2ZXJTdXBwb3J0ZWQgPSB0eXBlb2YgTXV0YXRpb25PYnNlcnZlciAhPT0gJ3VuZGVmaW5lZCc7XHJcbi8qKlxyXG4gKiBTaW5nbGV0b24gY29udHJvbGxlciBjbGFzcyB3aGljaCBoYW5kbGVzIHVwZGF0ZXMgb2YgUmVzaXplT2JzZXJ2ZXIgaW5zdGFuY2VzLlxyXG4gKi9cclxudmFyIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEluZGljYXRlcyB3aGV0aGVyIERPTSBsaXN0ZW5lcnMgaGF2ZSBiZWVuIGFkZGVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGUge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jb25uZWN0ZWRfID0gZmFsc2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGVsbHMgdGhhdCBjb250cm9sbGVyIGhhcyBzdWJzY3JpYmVkIGZvciBNdXRhdGlvbiBFdmVudHMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7Ym9vbGVhbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm11dGF0aW9uRXZlbnRzQWRkZWRfID0gZmFsc2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogS2VlcHMgcmVmZXJlbmNlIHRvIHRoZSBpbnN0YW5jZSBvZiBNdXRhdGlvbk9ic2VydmVyLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGUge011dGF0aW9uT2JzZXJ2ZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tdXRhdGlvbnNPYnNlcnZlcl8gPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgbGlzdCBvZiBjb25uZWN0ZWQgb2JzZXJ2ZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGUge0FycmF5PFJlc2l6ZU9ic2VydmVyU1BJPn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm9ic2VydmVyc18gPSBbXTtcclxuICAgICAgICB0aGlzLm9uVHJhbnNpdGlvbkVuZF8gPSB0aGlzLm9uVHJhbnNpdGlvbkVuZF8uYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLnJlZnJlc2ggPSB0aHJvdHRsZSh0aGlzLnJlZnJlc2guYmluZCh0aGlzKSwgUkVGUkVTSF9ERUxBWSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgb2JzZXJ2ZXIgdG8gb2JzZXJ2ZXJzIGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtSZXNpemVPYnNlcnZlclNQSX0gb2JzZXJ2ZXIgLSBPYnNlcnZlciB0byBiZSBhZGRlZC5cclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICovXHJcbiAgICBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIucHJvdG90eXBlLmFkZE9ic2VydmVyID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgaWYgKCF+dGhpcy5vYnNlcnZlcnNfLmluZGV4T2Yob2JzZXJ2ZXIpKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzXy5wdXNoKG9ic2VydmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWRkIGxpc3RlbmVycyBpZiB0aGV5IGhhdmVuJ3QgYmVlbiBhZGRlZCB5ZXQuXHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbm5lY3RlZF8pIHtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0XygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgb2JzZXJ2ZXIgZnJvbSBvYnNlcnZlcnMgbGlzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1Jlc2l6ZU9ic2VydmVyU1BJfSBvYnNlcnZlciAtIE9ic2VydmVyIHRvIGJlIHJlbW92ZWQuXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLnByb3RvdHlwZS5yZW1vdmVPYnNlcnZlciA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVyc187XHJcbiAgICAgICAgdmFyIGluZGV4ID0gb2JzZXJ2ZXJzLmluZGV4T2Yob2JzZXJ2ZXIpO1xyXG4gICAgICAgIC8vIFJlbW92ZSBvYnNlcnZlciBpZiBpdCdzIHByZXNlbnQgaW4gcmVnaXN0cnkuXHJcbiAgICAgICAgaWYgKH5pbmRleCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUmVtb3ZlIGxpc3RlbmVycyBpZiBjb250cm9sbGVyIGhhcyBubyBjb25uZWN0ZWQgb2JzZXJ2ZXJzLlxyXG4gICAgICAgIGlmICghb2JzZXJ2ZXJzLmxlbmd0aCAmJiB0aGlzLmNvbm5lY3RlZF8pIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0XygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEludm9rZXMgdGhlIHVwZGF0ZSBvZiBvYnNlcnZlcnMuIEl0IHdpbGwgY29udGludWUgcnVubmluZyB1cGRhdGVzIGluc29mYXJcclxuICAgICAqIGl0IGRldGVjdHMgY2hhbmdlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjaGFuZ2VzRGV0ZWN0ZWQgPSB0aGlzLnVwZGF0ZU9ic2VydmVyc18oKTtcclxuICAgICAgICAvLyBDb250aW51ZSBydW5uaW5nIHVwZGF0ZXMgaWYgY2hhbmdlcyBoYXZlIGJlZW4gZGV0ZWN0ZWQgYXMgdGhlcmUgbWlnaHRcclxuICAgICAgICAvLyBiZSBmdXR1cmUgb25lcyBjYXVzZWQgYnkgQ1NTIHRyYW5zaXRpb25zLlxyXG4gICAgICAgIGlmIChjaGFuZ2VzRGV0ZWN0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyBldmVyeSBvYnNlcnZlciBmcm9tIG9ic2VydmVycyBsaXN0IGFuZCBub3RpZmllcyB0aGVtIG9mIHF1ZXVlZFxyXG4gICAgICogZW50cmllcy5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgXCJ0cnVlXCIgaWYgYW55IG9ic2VydmVyIGhhcyBkZXRlY3RlZCBjaGFuZ2VzIGluXHJcbiAgICAgKiAgICAgIGRpbWVuc2lvbnMgb2YgaXQncyBlbGVtZW50cy5cclxuICAgICAqL1xyXG4gICAgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLnByb3RvdHlwZS51cGRhdGVPYnNlcnZlcnNfID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIENvbGxlY3Qgb2JzZXJ2ZXJzIHRoYXQgaGF2ZSBhY3RpdmUgb2JzZXJ2YXRpb25zLlxyXG4gICAgICAgIHZhciBhY3RpdmVPYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVyc18uZmlsdGVyKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuZ2F0aGVyQWN0aXZlKCksIG9ic2VydmVyLmhhc0FjdGl2ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIERlbGl2ZXIgbm90aWZpY2F0aW9ucyBpbiBhIHNlcGFyYXRlIGN5Y2xlIGluIG9yZGVyIHRvIGF2b2lkIGFueVxyXG4gICAgICAgIC8vIGNvbGxpc2lvbnMgYmV0d2VlbiBvYnNlcnZlcnMsIGUuZy4gd2hlbiBtdWx0aXBsZSBpbnN0YW5jZXMgb2ZcclxuICAgICAgICAvLyBSZXNpemVPYnNlcnZlciBhcmUgdHJhY2tpbmcgdGhlIHNhbWUgZWxlbWVudCBhbmQgdGhlIGNhbGxiYWNrIG9mIG9uZVxyXG4gICAgICAgIC8vIG9mIHRoZW0gY2hhbmdlcyBjb250ZW50IGRpbWVuc2lvbnMgb2YgdGhlIG9ic2VydmVkIHRhcmdldC4gU29tZXRpbWVzXHJcbiAgICAgICAgLy8gdGhpcyBtYXkgcmVzdWx0IGluIG5vdGlmaWNhdGlvbnMgYmVpbmcgYmxvY2tlZCBmb3IgdGhlIHJlc3Qgb2Ygb2JzZXJ2ZXJzLlxyXG4gICAgICAgIGFjdGl2ZU9ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uIChvYnNlcnZlcikgeyByZXR1cm4gb2JzZXJ2ZXIuYnJvYWRjYXN0QWN0aXZlKCk7IH0pO1xyXG4gICAgICAgIHJldHVybiBhY3RpdmVPYnNlcnZlcnMubGVuZ3RoID4gMDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIERPTSBsaXN0ZW5lcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICovXHJcbiAgICBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIucHJvdG90eXBlLmNvbm5lY3RfID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIERvIG5vdGhpbmcgaWYgcnVubmluZyBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50IG9yIGlmIGxpc3RlbmVyc1xyXG4gICAgICAgIC8vIGhhdmUgYmVlbiBhbHJlYWR5IGFkZGVkLlxyXG4gICAgICAgIGlmICghaXNCcm93c2VyIHx8IHRoaXMuY29ubmVjdGVkXykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFN1YnNjcmlwdGlvbiB0byB0aGUgXCJUcmFuc2l0aW9uZW5kXCIgZXZlbnQgaXMgdXNlZCBhcyBhIHdvcmthcm91bmQgZm9yXHJcbiAgICAgICAgLy8gZGVsYXllZCB0cmFuc2l0aW9ucy4gVGhpcyB3YXkgaXQncyBwb3NzaWJsZSB0byBjYXB0dXJlIGF0IGxlYXN0IHRoZVxyXG4gICAgICAgIC8vIGZpbmFsIHN0YXRlIG9mIGFuIGVsZW1lbnQuXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIHRoaXMub25UcmFuc2l0aW9uRW5kXyk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVmcmVzaCk7XHJcbiAgICAgICAgaWYgKG11dGF0aW9uT2JzZXJ2ZXJTdXBwb3J0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5tdXRhdGlvbnNPYnNlcnZlcl8gPSBuZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzLnJlZnJlc2gpO1xyXG4gICAgICAgICAgICB0aGlzLm11dGF0aW9uc09ic2VydmVyXy5vYnNlcnZlKGRvY3VtZW50LCB7XHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHN1YnRyZWU6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01TdWJ0cmVlTW9kaWZpZWQnLCB0aGlzLnJlZnJlc2gpO1xyXG4gICAgICAgICAgICB0aGlzLm11dGF0aW9uRXZlbnRzQWRkZWRfID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb25uZWN0ZWRfID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgRE9NIGxpc3RlbmVycy5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5wcm90b3R5cGUuZGlzY29ubmVjdF8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gRG8gbm90aGluZyBpZiBydW5uaW5nIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnQgb3IgaWYgbGlzdGVuZXJzXHJcbiAgICAgICAgLy8gaGF2ZSBiZWVuIGFscmVhZHkgcmVtb3ZlZC5cclxuICAgICAgICBpZiAoIWlzQnJvd3NlciB8fCAhdGhpcy5jb25uZWN0ZWRfKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIHRoaXMub25UcmFuc2l0aW9uRW5kXyk7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVmcmVzaCk7XHJcbiAgICAgICAgaWYgKHRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfKSB7XHJcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubXV0YXRpb25FdmVudHNBZGRlZF8pIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NU3VidHJlZU1vZGlmaWVkJywgdGhpcy5yZWZyZXNoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvbnNPYnNlcnZlcl8gPSBudWxsO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25FdmVudHNBZGRlZF8gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNvbm5lY3RlZF8gPSBmYWxzZTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFwiVHJhbnNpdGlvbmVuZFwiIGV2ZW50IGhhbmRsZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBwYXJhbSB7VHJhbnNpdGlvbkV2ZW50fSBldmVudFxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5wcm90b3R5cGUub25UcmFuc2l0aW9uRW5kXyA9IGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgIHZhciBfYiA9IF9hLnByb3BlcnR5TmFtZSwgcHJvcGVydHlOYW1lID0gX2IgPT09IHZvaWQgMCA/ICcnIDogX2I7XHJcbiAgICAgICAgLy8gRGV0ZWN0IHdoZXRoZXIgdHJhbnNpdGlvbiBtYXkgYWZmZWN0IGRpbWVuc2lvbnMgb2YgYW4gZWxlbWVudC5cclxuICAgICAgICB2YXIgaXNSZWZsb3dQcm9wZXJ0eSA9IHRyYW5zaXRpb25LZXlzLnNvbWUoZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gISF+cHJvcGVydHlOYW1lLmluZGV4T2Yoa2V5KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoaXNSZWZsb3dQcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGluc3RhbmNlIG9mIHRoZSBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge1Jlc2l6ZU9ic2VydmVyQ29udHJvbGxlcn1cclxuICAgICAqL1xyXG4gICAgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLmdldEluc3RhbmNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZV8pIHtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZV8gPSBuZXcgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlXztcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEhvbGRzIHJlZmVyZW5jZSB0byB0aGUgY29udHJvbGxlcidzIGluc3RhbmNlLlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlIHtSZXNpemVPYnNlcnZlckNvbnRyb2xsZXJ9XHJcbiAgICAgKi9cclxuICAgIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5pbnN0YW5jZV8gPSBudWxsO1xyXG4gICAgcmV0dXJuIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlcjtcclxufSgpKTtcblxuLyoqXHJcbiAqIERlZmluZXMgbm9uLXdyaXRhYmxlL2VudW1lcmFibGUgcHJvcGVydGllcyBvZiB0aGUgcHJvdmlkZWQgdGFyZ2V0IG9iamVjdC5cclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IHRhcmdldCAtIE9iamVjdCBmb3Igd2hpY2ggdG8gZGVmaW5lIHByb3BlcnRpZXMuXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyAtIFByb3BlcnRpZXMgdG8gYmUgZGVmaW5lZC5cclxuICogQHJldHVybnMge09iamVjdH0gVGFyZ2V0IG9iamVjdC5cclxuICovXHJcbnZhciBkZWZpbmVDb25maWd1cmFibGUgPSAoZnVuY3Rpb24gKHRhcmdldCwgcHJvcHMpIHtcclxuICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3Qua2V5cyhwcm9wcyk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IF9hW19pXTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHtcclxuICAgICAgICAgICAgdmFsdWU6IHByb3BzW2tleV0sXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICB3cml0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufSk7XG5cbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBnbG9iYWwgb2JqZWN0IGFzc29jaWF0ZWQgd2l0aCBwcm92aWRlZCBlbGVtZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0XHJcbiAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAqL1xyXG52YXIgZ2V0V2luZG93T2YgPSAoZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgLy8gQXNzdW1lIHRoYXQgdGhlIGVsZW1lbnQgaXMgYW4gaW5zdGFuY2Ugb2YgTm9kZSwgd2hpY2ggbWVhbnMgdGhhdCBpdFxyXG4gICAgLy8gaGFzIHRoZSBcIm93bmVyRG9jdW1lbnRcIiBwcm9wZXJ0eSBmcm9tIHdoaWNoIHdlIGNhbiByZXRyaWV2ZSBhXHJcbiAgICAvLyBjb3JyZXNwb25kaW5nIGdsb2JhbCBvYmplY3QuXHJcbiAgICB2YXIgb3duZXJHbG9iYWwgPSB0YXJnZXQgJiYgdGFyZ2V0Lm93bmVyRG9jdW1lbnQgJiYgdGFyZ2V0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XHJcbiAgICAvLyBSZXR1cm4gdGhlIGxvY2FsIGdsb2JhbCBvYmplY3QgaWYgaXQncyBub3QgcG9zc2libGUgZXh0cmFjdCBvbmUgZnJvbVxyXG4gICAgLy8gcHJvdmlkZWQgZWxlbWVudC5cclxuICAgIHJldHVybiBvd25lckdsb2JhbCB8fCBnbG9iYWwkMTtcclxufSk7XG5cbi8vIFBsYWNlaG9sZGVyIG9mIGFuIGVtcHR5IGNvbnRlbnQgcmVjdGFuZ2xlLlxyXG52YXIgZW1wdHlSZWN0ID0gY3JlYXRlUmVjdEluaXQoMCwgMCwgMCwgMCk7XHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBwcm92aWRlZCBzdHJpbmcgdG8gYSBudW1iZXIuXHJcbiAqXHJcbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gdmFsdWVcclxuICogQHJldHVybnMge251bWJlcn1cclxuICovXHJcbmZ1bmN0aW9uIHRvRmxvYXQodmFsdWUpIHtcclxuICAgIHJldHVybiBwYXJzZUZsb2F0KHZhbHVlKSB8fCAwO1xyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0cyBib3JkZXJzIHNpemUgZnJvbSBwcm92aWRlZCBzdHlsZXMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7Q1NTU3R5bGVEZWNsYXJhdGlvbn0gc3R5bGVzXHJcbiAqIEBwYXJhbSB7Li4uc3RyaW5nfSBwb3NpdGlvbnMgLSBCb3JkZXJzIHBvc2l0aW9ucyAodG9wLCByaWdodCwgLi4uKVxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0Qm9yZGVyc1NpemUoc3R5bGVzKSB7XHJcbiAgICB2YXIgcG9zaXRpb25zID0gW107XHJcbiAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHBvc2l0aW9uc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIHJldHVybiBwb3NpdGlvbnMucmVkdWNlKGZ1bmN0aW9uIChzaXplLCBwb3NpdGlvbikge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IHN0eWxlc1snYm9yZGVyLScgKyBwb3NpdGlvbiArICctd2lkdGgnXTtcclxuICAgICAgICByZXR1cm4gc2l6ZSArIHRvRmxvYXQodmFsdWUpO1xyXG4gICAgfSwgMCk7XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3RzIHBhZGRpbmdzIHNpemVzIGZyb20gcHJvdmlkZWQgc3R5bGVzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0NTU1N0eWxlRGVjbGFyYXRpb259IHN0eWxlc1xyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBQYWRkaW5ncyBib3guXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRQYWRkaW5ncyhzdHlsZXMpIHtcclxuICAgIHZhciBwb3NpdGlvbnMgPSBbJ3RvcCcsICdyaWdodCcsICdib3R0b20nLCAnbGVmdCddO1xyXG4gICAgdmFyIHBhZGRpbmdzID0ge307XHJcbiAgICBmb3IgKHZhciBfaSA9IDAsIHBvc2l0aW9uc18xID0gcG9zaXRpb25zOyBfaSA8IHBvc2l0aW9uc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciBwb3NpdGlvbiA9IHBvc2l0aW9uc18xW19pXTtcclxuICAgICAgICB2YXIgdmFsdWUgPSBzdHlsZXNbJ3BhZGRpbmctJyArIHBvc2l0aW9uXTtcclxuICAgICAgICBwYWRkaW5nc1twb3NpdGlvbl0gPSB0b0Zsb2F0KHZhbHVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwYWRkaW5ncztcclxufVxyXG4vKipcclxuICogQ2FsY3VsYXRlcyBjb250ZW50IHJlY3RhbmdsZSBvZiBwcm92aWRlZCBTVkcgZWxlbWVudC5cclxuICpcclxuICogQHBhcmFtIHtTVkdHcmFwaGljc0VsZW1lbnR9IHRhcmdldCAtIEVsZW1lbnQgY29udGVudCByZWN0YW5nbGUgb2Ygd2hpY2ggbmVlZHNcclxuICogICAgICB0byBiZSBjYWxjdWxhdGVkLlxyXG4gKiBAcmV0dXJucyB7RE9NUmVjdEluaXR9XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRTVkdDb250ZW50UmVjdCh0YXJnZXQpIHtcclxuICAgIHZhciBiYm94ID0gdGFyZ2V0LmdldEJCb3goKTtcclxuICAgIHJldHVybiBjcmVhdGVSZWN0SW5pdCgwLCAwLCBiYm94LndpZHRoLCBiYm94LmhlaWdodCk7XHJcbn1cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgY29udGVudCByZWN0YW5nbGUgb2YgcHJvdmlkZWQgSFRNTEVsZW1lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCAtIEVsZW1lbnQgZm9yIHdoaWNoIHRvIGNhbGN1bGF0ZSB0aGUgY29udGVudCByZWN0YW5nbGUuXHJcbiAqIEByZXR1cm5zIHtET01SZWN0SW5pdH1cclxuICovXHJcbmZ1bmN0aW9uIGdldEhUTUxFbGVtZW50Q29udGVudFJlY3QodGFyZ2V0KSB7XHJcbiAgICAvLyBDbGllbnQgd2lkdGggJiBoZWlnaHQgcHJvcGVydGllcyBjYW4ndCBiZVxyXG4gICAgLy8gdXNlZCBleGNsdXNpdmVseSBhcyB0aGV5IHByb3ZpZGUgcm91bmRlZCB2YWx1ZXMuXHJcbiAgICB2YXIgY2xpZW50V2lkdGggPSB0YXJnZXQuY2xpZW50V2lkdGgsIGNsaWVudEhlaWdodCA9IHRhcmdldC5jbGllbnRIZWlnaHQ7XHJcbiAgICAvLyBCeSB0aGlzIGNvbmRpdGlvbiB3ZSBjYW4gY2F0Y2ggYWxsIG5vbi1yZXBsYWNlZCBpbmxpbmUsIGhpZGRlbiBhbmRcclxuICAgIC8vIGRldGFjaGVkIGVsZW1lbnRzLiBUaG91Z2ggZWxlbWVudHMgd2l0aCB3aWR0aCAmIGhlaWdodCBwcm9wZXJ0aWVzIGxlc3NcclxuICAgIC8vIHRoYW4gMC41IHdpbGwgYmUgZGlzY2FyZGVkIGFzIHdlbGwuXHJcbiAgICAvL1xyXG4gICAgLy8gV2l0aG91dCBpdCB3ZSB3b3VsZCBuZWVkIHRvIGltcGxlbWVudCBzZXBhcmF0ZSBtZXRob2RzIGZvciBlYWNoIG9mXHJcbiAgICAvLyB0aG9zZSBjYXNlcyBhbmQgaXQncyBub3QgcG9zc2libGUgdG8gcGVyZm9ybSBhIHByZWNpc2UgYW5kIHBlcmZvcm1hbmNlXHJcbiAgICAvLyBlZmZlY3RpdmUgdGVzdCBmb3IgaGlkZGVuIGVsZW1lbnRzLiBFLmcuIGV2ZW4galF1ZXJ5J3MgJzp2aXNpYmxlJyBmaWx0ZXJcclxuICAgIC8vIGdpdmVzIHdyb25nIHJlc3VsdHMgZm9yIGVsZW1lbnRzIHdpdGggd2lkdGggJiBoZWlnaHQgbGVzcyB0aGFuIDAuNS5cclxuICAgIGlmICghY2xpZW50V2lkdGggJiYgIWNsaWVudEhlaWdodCkge1xyXG4gICAgICAgIHJldHVybiBlbXB0eVJlY3Q7XHJcbiAgICB9XHJcbiAgICB2YXIgc3R5bGVzID0gZ2V0V2luZG93T2YodGFyZ2V0KS5nZXRDb21wdXRlZFN0eWxlKHRhcmdldCk7XHJcbiAgICB2YXIgcGFkZGluZ3MgPSBnZXRQYWRkaW5ncyhzdHlsZXMpO1xyXG4gICAgdmFyIGhvcml6UGFkID0gcGFkZGluZ3MubGVmdCArIHBhZGRpbmdzLnJpZ2h0O1xyXG4gICAgdmFyIHZlcnRQYWQgPSBwYWRkaW5ncy50b3AgKyBwYWRkaW5ncy5ib3R0b207XHJcbiAgICAvLyBDb21wdXRlZCBzdHlsZXMgb2Ygd2lkdGggJiBoZWlnaHQgYXJlIGJlaW5nIHVzZWQgYmVjYXVzZSB0aGV5IGFyZSB0aGVcclxuICAgIC8vIG9ubHkgZGltZW5zaW9ucyBhdmFpbGFibGUgdG8gSlMgdGhhdCBjb250YWluIG5vbi1yb3VuZGVkIHZhbHVlcy4gSXQgY291bGRcclxuICAgIC8vIGJlIHBvc3NpYmxlIHRvIHV0aWxpemUgdGhlIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBpZiBvbmx5IGl0J3MgZGF0YSB3YXNuJ3RcclxuICAgIC8vIGFmZmVjdGVkIGJ5IENTUyB0cmFuc2Zvcm1hdGlvbnMgbGV0IGFsb25lIHBhZGRpbmdzLCBib3JkZXJzIGFuZCBzY3JvbGwgYmFycy5cclxuICAgIHZhciB3aWR0aCA9IHRvRmxvYXQoc3R5bGVzLndpZHRoKSwgaGVpZ2h0ID0gdG9GbG9hdChzdHlsZXMuaGVpZ2h0KTtcclxuICAgIC8vIFdpZHRoICYgaGVpZ2h0IGluY2x1ZGUgcGFkZGluZ3MgYW5kIGJvcmRlcnMgd2hlbiB0aGUgJ2JvcmRlci1ib3gnIGJveFxyXG4gICAgLy8gbW9kZWwgaXMgYXBwbGllZCAoZXhjZXB0IGZvciBJRSkuXHJcbiAgICBpZiAoc3R5bGVzLmJveFNpemluZyA9PT0gJ2JvcmRlci1ib3gnKSB7XHJcbiAgICAgICAgLy8gRm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIHJlcXVpcmVkIHRvIGhhbmRsZSBJbnRlcm5ldCBFeHBsb3JlciB3aGljaFxyXG4gICAgICAgIC8vIGRvZXNuJ3QgaW5jbHVkZSBwYWRkaW5ncyBhbmQgYm9yZGVycyB0byBjb21wdXRlZCBDU1MgZGltZW5zaW9ucy5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIFdlIGNhbiBzYXkgdGhhdCBpZiBDU1MgZGltZW5zaW9ucyArIHBhZGRpbmdzIGFyZSBlcXVhbCB0byB0aGUgXCJjbGllbnRcIlxyXG4gICAgICAgIC8vIHByb3BlcnRpZXMgdGhlbiBpdCdzIGVpdGhlciBJRSwgYW5kIHRodXMgd2UgZG9uJ3QgbmVlZCB0byBzdWJ0cmFjdFxyXG4gICAgICAgIC8vIGFueXRoaW5nLCBvciBhbiBlbGVtZW50IG1lcmVseSBkb2Vzbid0IGhhdmUgcGFkZGluZ3MvYm9yZGVycyBzdHlsZXMuXHJcbiAgICAgICAgaWYgKE1hdGgucm91bmQod2lkdGggKyBob3JpelBhZCkgIT09IGNsaWVudFdpZHRoKSB7XHJcbiAgICAgICAgICAgIHdpZHRoIC09IGdldEJvcmRlcnNTaXplKHN0eWxlcywgJ2xlZnQnLCAncmlnaHQnKSArIGhvcml6UGFkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoTWF0aC5yb3VuZChoZWlnaHQgKyB2ZXJ0UGFkKSAhPT0gY2xpZW50SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIGhlaWdodCAtPSBnZXRCb3JkZXJzU2l6ZShzdHlsZXMsICd0b3AnLCAnYm90dG9tJykgKyB2ZXJ0UGFkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIEZvbGxvd2luZyBzdGVwcyBjYW4ndCBiZSBhcHBsaWVkIHRvIHRoZSBkb2N1bWVudCdzIHJvb3QgZWxlbWVudCBhcyBpdHNcclxuICAgIC8vIGNsaWVudFtXaWR0aC9IZWlnaHRdIHByb3BlcnRpZXMgcmVwcmVzZW50IHZpZXdwb3J0IGFyZWEgb2YgdGhlIHdpbmRvdy5cclxuICAgIC8vIEJlc2lkZXMsIGl0J3MgYXMgd2VsbCBub3QgbmVjZXNzYXJ5IGFzIHRoZSA8aHRtbD4gaXRzZWxmIG5laXRoZXIgaGFzXHJcbiAgICAvLyByZW5kZXJlZCBzY3JvbGwgYmFycyBub3IgaXQgY2FuIGJlIGNsaXBwZWQuXHJcbiAgICBpZiAoIWlzRG9jdW1lbnRFbGVtZW50KHRhcmdldCkpIHtcclxuICAgICAgICAvLyBJbiBzb21lIGJyb3dzZXJzIChvbmx5IGluIEZpcmVmb3gsIGFjdHVhbGx5KSBDU1Mgd2lkdGggJiBoZWlnaHRcclxuICAgICAgICAvLyBpbmNsdWRlIHNjcm9sbCBiYXJzIHNpemUgd2hpY2ggY2FuIGJlIHJlbW92ZWQgYXQgdGhpcyBzdGVwIGFzIHNjcm9sbFxyXG4gICAgICAgIC8vIGJhcnMgYXJlIHRoZSBvbmx5IGRpZmZlcmVuY2UgYmV0d2VlbiByb3VuZGVkIGRpbWVuc2lvbnMgKyBwYWRkaW5nc1xyXG4gICAgICAgIC8vIGFuZCBcImNsaWVudFwiIHByb3BlcnRpZXMsIHRob3VnaCB0aGF0IGlzIG5vdCBhbHdheXMgdHJ1ZSBpbiBDaHJvbWUuXHJcbiAgICAgICAgdmFyIHZlcnRTY3JvbGxiYXIgPSBNYXRoLnJvdW5kKHdpZHRoICsgaG9yaXpQYWQpIC0gY2xpZW50V2lkdGg7XHJcbiAgICAgICAgdmFyIGhvcml6U2Nyb2xsYmFyID0gTWF0aC5yb3VuZChoZWlnaHQgKyB2ZXJ0UGFkKSAtIGNsaWVudEhlaWdodDtcclxuICAgICAgICAvLyBDaHJvbWUgaGFzIGEgcmF0aGVyIHdlaXJkIHJvdW5kaW5nIG9mIFwiY2xpZW50XCIgcHJvcGVydGllcy5cclxuICAgICAgICAvLyBFLmcuIGZvciBhbiBlbGVtZW50IHdpdGggY29udGVudCB3aWR0aCBvZiAzMTQuMnB4IGl0IHNvbWV0aW1lcyBnaXZlc1xyXG4gICAgICAgIC8vIHRoZSBjbGllbnQgd2lkdGggb2YgMzE1cHggYW5kIGZvciB0aGUgd2lkdGggb2YgMzE0LjdweCBpdCBtYXkgZ2l2ZVxyXG4gICAgICAgIC8vIDMxNHB4LiBBbmQgaXQgZG9lc24ndCBoYXBwZW4gYWxsIHRoZSB0aW1lLiBTbyBqdXN0IGlnbm9yZSB0aGlzIGRlbHRhXHJcbiAgICAgICAgLy8gYXMgYSBub24tcmVsZXZhbnQuXHJcbiAgICAgICAgaWYgKE1hdGguYWJzKHZlcnRTY3JvbGxiYXIpICE9PSAxKSB7XHJcbiAgICAgICAgICAgIHdpZHRoIC09IHZlcnRTY3JvbGxiYXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChNYXRoLmFicyhob3JpelNjcm9sbGJhcikgIT09IDEpIHtcclxuICAgICAgICAgICAgaGVpZ2h0IC09IGhvcml6U2Nyb2xsYmFyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBjcmVhdGVSZWN0SW5pdChwYWRkaW5ncy5sZWZ0LCBwYWRkaW5ncy50b3AsIHdpZHRoLCBoZWlnaHQpO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3Mgd2hldGhlciBwcm92aWRlZCBlbGVtZW50IGlzIGFuIGluc3RhbmNlIG9mIHRoZSBTVkdHcmFwaGljc0VsZW1lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0IC0gRWxlbWVudCB0byBiZSBjaGVja2VkLlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICovXHJcbnZhciBpc1NWR0dyYXBoaWNzRWxlbWVudCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBTb21lIGJyb3dzZXJzLCBuYW1lbHkgSUUgYW5kIEVkZ2UsIGRvbid0IGhhdmUgdGhlIFNWR0dyYXBoaWNzRWxlbWVudFxyXG4gICAgLy8gaW50ZXJmYWNlLlxyXG4gICAgaWYgKHR5cGVvZiBTVkdHcmFwaGljc0VsZW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQpIHsgcmV0dXJuIHRhcmdldCBpbnN0YW5jZW9mIGdldFdpbmRvd09mKHRhcmdldCkuU1ZHR3JhcGhpY3NFbGVtZW50OyB9O1xyXG4gICAgfVxyXG4gICAgLy8gSWYgaXQncyBzbywgdGhlbiBjaGVjayB0aGF0IGVsZW1lbnQgaXMgYXQgbGVhc3QgYW4gaW5zdGFuY2Ugb2YgdGhlXHJcbiAgICAvLyBTVkdFbGVtZW50IGFuZCB0aGF0IGl0IGhhcyB0aGUgXCJnZXRCQm94XCIgbWV0aG9kLlxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWV4dHJhLXBhcmVuc1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQpIHsgcmV0dXJuICh0YXJnZXQgaW5zdGFuY2VvZiBnZXRXaW5kb3dPZih0YXJnZXQpLlNWR0VsZW1lbnQgJiZcclxuICAgICAgICB0eXBlb2YgdGFyZ2V0LmdldEJCb3ggPT09ICdmdW5jdGlvbicpOyB9O1xyXG59KSgpO1xyXG4vKipcclxuICogQ2hlY2tzIHdoZXRoZXIgcHJvdmlkZWQgZWxlbWVudCBpcyBhIGRvY3VtZW50IGVsZW1lbnQgKDxodG1sPikuXHJcbiAqXHJcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0IC0gRWxlbWVudCB0byBiZSBjaGVja2VkLlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICovXHJcbmZ1bmN0aW9uIGlzRG9jdW1lbnRFbGVtZW50KHRhcmdldCkge1xyXG4gICAgcmV0dXJuIHRhcmdldCA9PT0gZ2V0V2luZG93T2YodGFyZ2V0KS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcbn1cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgYW4gYXBwcm9wcmlhdGUgY29udGVudCByZWN0YW5nbGUgZm9yIHByb3ZpZGVkIGh0bWwgb3Igc3ZnIGVsZW1lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0IC0gRWxlbWVudCBjb250ZW50IHJlY3RhbmdsZSBvZiB3aGljaCBuZWVkcyB0byBiZSBjYWxjdWxhdGVkLlxyXG4gKiBAcmV0dXJucyB7RE9NUmVjdEluaXR9XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRDb250ZW50UmVjdCh0YXJnZXQpIHtcclxuICAgIGlmICghaXNCcm93c2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIGVtcHR5UmVjdDtcclxuICAgIH1cclxuICAgIGlmIChpc1NWR0dyYXBoaWNzRWxlbWVudCh0YXJnZXQpKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldFNWR0NvbnRlbnRSZWN0KHRhcmdldCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZ2V0SFRNTEVsZW1lbnRDb250ZW50UmVjdCh0YXJnZXQpO1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIHJlY3RhbmdsZSB3aXRoIGFuIGludGVyZmFjZSBvZiB0aGUgRE9NUmVjdFJlYWRPbmx5LlxyXG4gKiBTcGVjOiBodHRwczovL2RyYWZ0cy5meHRmLm9yZy9nZW9tZXRyeS8jZG9tcmVjdHJlYWRvbmx5XHJcbiAqXHJcbiAqIEBwYXJhbSB7RE9NUmVjdEluaXR9IHJlY3RJbml0IC0gT2JqZWN0IHdpdGggcmVjdGFuZ2xlJ3MgeC95IGNvb3JkaW5hdGVzIGFuZCBkaW1lbnNpb25zLlxyXG4gKiBAcmV0dXJucyB7RE9NUmVjdFJlYWRPbmx5fVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlUmVhZE9ubHlSZWN0KF9hKSB7XHJcbiAgICB2YXIgeCA9IF9hLngsIHkgPSBfYS55LCB3aWR0aCA9IF9hLndpZHRoLCBoZWlnaHQgPSBfYS5oZWlnaHQ7XHJcbiAgICAvLyBJZiBET01SZWN0UmVhZE9ubHkgaXMgYXZhaWxhYmxlIHVzZSBpdCBhcyBhIHByb3RvdHlwZSBmb3IgdGhlIHJlY3RhbmdsZS5cclxuICAgIHZhciBDb25zdHIgPSB0eXBlb2YgRE9NUmVjdFJlYWRPbmx5ICE9PSAndW5kZWZpbmVkJyA/IERPTVJlY3RSZWFkT25seSA6IE9iamVjdDtcclxuICAgIHZhciByZWN0ID0gT2JqZWN0LmNyZWF0ZShDb25zdHIucHJvdG90eXBlKTtcclxuICAgIC8vIFJlY3RhbmdsZSdzIHByb3BlcnRpZXMgYXJlIG5vdCB3cml0YWJsZSBhbmQgbm9uLWVudW1lcmFibGUuXHJcbiAgICBkZWZpbmVDb25maWd1cmFibGUocmVjdCwge1xyXG4gICAgICAgIHg6IHgsIHk6IHksIHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQsXHJcbiAgICAgICAgdG9wOiB5LFxyXG4gICAgICAgIHJpZ2h0OiB4ICsgd2lkdGgsXHJcbiAgICAgICAgYm90dG9tOiBoZWlnaHQgKyB5LFxyXG4gICAgICAgIGxlZnQ6IHhcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlY3Q7XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgRE9NUmVjdEluaXQgb2JqZWN0IGJhc2VkIG9uIHRoZSBwcm92aWRlZCBkaW1lbnNpb25zIGFuZCB0aGUgeC95IGNvb3JkaW5hdGVzLlxyXG4gKiBTcGVjOiBodHRwczovL2RyYWZ0cy5meHRmLm9yZy9nZW9tZXRyeS8jZGljdGRlZi1kb21yZWN0aW5pdFxyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcn0geCAtIFggY29vcmRpbmF0ZS5cclxuICogQHBhcmFtIHtudW1iZXJ9IHkgLSBZIGNvb3JkaW5hdGUuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCAtIFJlY3RhbmdsZSdzIHdpZHRoLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IC0gUmVjdGFuZ2xlJ3MgaGVpZ2h0LlxyXG4gKiBAcmV0dXJucyB7RE9NUmVjdEluaXR9XHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVSZWN0SW5pdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgICByZXR1cm4geyB4OiB4LCB5OiB5LCB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0IH07XHJcbn1cblxuLyoqXHJcbiAqIENsYXNzIHRoYXQgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGF0aW9ucyBvZiB0aGUgY29udGVudCByZWN0YW5nbGUgb2ZcclxuICogcHJvdmlkZWQgRE9NIGVsZW1lbnQgYW5kIGZvciBrZWVwaW5nIHRyYWNrIG9mIGl0J3MgY2hhbmdlcy5cclxuICovXHJcbnZhciBSZXNpemVPYnNlcnZhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBSZXNpemVPYnNlcnZhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCAtIEVsZW1lbnQgdG8gYmUgb2JzZXJ2ZWQuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIFJlc2l6ZU9ic2VydmF0aW9uKHRhcmdldCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJyb2FkY2FzdGVkIHdpZHRoIG9mIGNvbnRlbnQgcmVjdGFuZ2xlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmJyb2FkY2FzdFdpZHRoID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCcm9hZGNhc3RlZCBoZWlnaHQgb2YgY29udGVudCByZWN0YW5nbGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYnJvYWRjYXN0SGVpZ2h0ID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWZlcmVuY2UgdG8gdGhlIGxhc3Qgb2JzZXJ2ZWQgY29udGVudCByZWN0YW5nbGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7RE9NUmVjdEluaXR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jb250ZW50UmVjdF8gPSBjcmVhdGVSZWN0SW5pdCgwLCAwLCAwLCAwKTtcclxuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyBjb250ZW50IHJlY3RhbmdsZSBhbmQgdGVsbHMgd2hldGhlciBpdCdzIHdpZHRoIG9yIGhlaWdodCBwcm9wZXJ0aWVzXHJcbiAgICAgKiBoYXZlIGNoYW5nZWQgc2luY2UgdGhlIGxhc3QgYnJvYWRjYXN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBSZXNpemVPYnNlcnZhdGlvbi5wcm90b3R5cGUuaXNBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlY3QgPSBnZXRDb250ZW50UmVjdCh0aGlzLnRhcmdldCk7XHJcbiAgICAgICAgdGhpcy5jb250ZW50UmVjdF8gPSByZWN0O1xyXG4gICAgICAgIHJldHVybiAocmVjdC53aWR0aCAhPT0gdGhpcy5icm9hZGNhc3RXaWR0aCB8fFxyXG4gICAgICAgICAgICByZWN0LmhlaWdodCAhPT0gdGhpcy5icm9hZGNhc3RIZWlnaHQpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyAnYnJvYWRjYXN0V2lkdGgnIGFuZCAnYnJvYWRjYXN0SGVpZ2h0JyBwcm9wZXJ0aWVzIHdpdGggYSBkYXRhXHJcbiAgICAgKiBmcm9tIHRoZSBjb3JyZXNwb25kaW5nIHByb3BlcnRpZXMgb2YgdGhlIGxhc3Qgb2JzZXJ2ZWQgY29udGVudCByZWN0YW5nbGUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge0RPTVJlY3RJbml0fSBMYXN0IG9ic2VydmVkIGNvbnRlbnQgcmVjdGFuZ2xlLlxyXG4gICAgICovXHJcbiAgICBSZXNpemVPYnNlcnZhdGlvbi5wcm90b3R5cGUuYnJvYWRjYXN0UmVjdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVjdCA9IHRoaXMuY29udGVudFJlY3RfO1xyXG4gICAgICAgIHRoaXMuYnJvYWRjYXN0V2lkdGggPSByZWN0LndpZHRoO1xyXG4gICAgICAgIHRoaXMuYnJvYWRjYXN0SGVpZ2h0ID0gcmVjdC5oZWlnaHQ7XHJcbiAgICAgICAgcmV0dXJuIHJlY3Q7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJlc2l6ZU9ic2VydmF0aW9uO1xyXG59KCkpO1xuXG52YXIgUmVzaXplT2JzZXJ2ZXJFbnRyeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBSZXNpemVPYnNlcnZlckVudHJ5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0IC0gRWxlbWVudCB0aGF0IGlzIGJlaW5nIG9ic2VydmVkLlxyXG4gICAgICogQHBhcmFtIHtET01SZWN0SW5pdH0gcmVjdEluaXQgLSBEYXRhIG9mIHRoZSBlbGVtZW50J3MgY29udGVudCByZWN0YW5nbGUuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIFJlc2l6ZU9ic2VydmVyRW50cnkodGFyZ2V0LCByZWN0SW5pdCkge1xyXG4gICAgICAgIHZhciBjb250ZW50UmVjdCA9IGNyZWF0ZVJlYWRPbmx5UmVjdChyZWN0SW5pdCk7XHJcbiAgICAgICAgLy8gQWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpY2F0aW9uIGZvbGxvd2luZyBwcm9wZXJ0aWVzIGFyZSBub3Qgd3JpdGFibGVcclxuICAgICAgICAvLyBhbmQgYXJlIGFsc28gbm90IGVudW1lcmFibGUgaW4gdGhlIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbi5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIFByb3BlcnR5IGFjY2Vzc29ycyBhcmUgbm90IGJlaW5nIHVzZWQgYXMgdGhleSdkIHJlcXVpcmUgdG8gZGVmaW5lIGFcclxuICAgICAgICAvLyBwcml2YXRlIFdlYWtNYXAgc3RvcmFnZSB3aGljaCBtYXkgY2F1c2UgbWVtb3J5IGxlYWtzIGluIGJyb3dzZXJzIHRoYXRcclxuICAgICAgICAvLyBkb24ndCBzdXBwb3J0IHRoaXMgdHlwZSBvZiBjb2xsZWN0aW9ucy5cclxuICAgICAgICBkZWZpbmVDb25maWd1cmFibGUodGhpcywgeyB0YXJnZXQ6IHRhcmdldCwgY29udGVudFJlY3Q6IGNvbnRlbnRSZWN0IH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFJlc2l6ZU9ic2VydmVyRW50cnk7XHJcbn0oKSk7XG5cbnZhciBSZXNpemVPYnNlcnZlclNQSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiBSZXNpemVPYnNlcnZlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1Jlc2l6ZU9ic2VydmVyQ2FsbGJhY2t9IGNhbGxiYWNrIC0gQ2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBpcyBpbnZva2VkXHJcbiAgICAgKiAgICAgIHdoZW4gb25lIG9mIHRoZSBvYnNlcnZlZCBlbGVtZW50cyBjaGFuZ2VzIGl0J3MgY29udGVudCBkaW1lbnNpb25zLlxyXG4gICAgICogQHBhcmFtIHtSZXNpemVPYnNlcnZlckNvbnRyb2xsZXJ9IGNvbnRyb2xsZXIgLSBDb250cm9sbGVyIGluc3RhbmNlIHdoaWNoXHJcbiAgICAgKiAgICAgIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgdXBkYXRlcyBvZiBvYnNlcnZlci5cclxuICAgICAqIEBwYXJhbSB7UmVzaXplT2JzZXJ2ZXJ9IGNhbGxiYWNrQ3R4IC0gUmVmZXJlbmNlIHRvIHRoZSBwdWJsaWNcclxuICAgICAqICAgICAgUmVzaXplT2JzZXJ2ZXIgaW5zdGFuY2Ugd2hpY2ggd2lsbCBiZSBwYXNzZWQgdG8gY2FsbGJhY2sgZnVuY3Rpb24uXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIFJlc2l6ZU9ic2VydmVyU1BJKGNhbGxiYWNrLCBjb250cm9sbGVyLCBjYWxsYmFja0N0eCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbGxlY3Rpb24gb2YgcmVzaXplIG9ic2VydmF0aW9ucyB0aGF0IGhhdmUgZGV0ZWN0ZWQgY2hhbmdlcyBpbiBkaW1lbnNpb25zXHJcbiAgICAgICAgICogb2YgZWxlbWVudHMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7QXJyYXk8UmVzaXplT2JzZXJ2YXRpb24+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYWN0aXZlT2JzZXJ2YXRpb25zXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlZ2lzdHJ5IG9mIHRoZSBSZXNpemVPYnNlcnZhdGlvbiBpbnN0YW5jZXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7TWFwPEVsZW1lbnQsIFJlc2l6ZU9ic2VydmF0aW9uPn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm9ic2VydmF0aW9uc18gPSBuZXcgTWFwU2hpbSgpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIGNhbGxiYWNrIHByb3ZpZGVkIGFzIHBhcmFtZXRlciAxIGlzIG5vdCBhIGZ1bmN0aW9uLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNhbGxiYWNrXyA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlcl8gPSBjb250cm9sbGVyO1xyXG4gICAgICAgIHRoaXMuY2FsbGJhY2tDdHhfID0gY2FsbGJhY2tDdHg7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0cyBvYnNlcnZpbmcgcHJvdmlkZWQgZWxlbWVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCAtIEVsZW1lbnQgdG8gYmUgb2JzZXJ2ZWQuXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgUmVzaXplT2JzZXJ2ZXJTUEkucHJvdG90eXBlLm9ic2VydmUgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJzEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5IDAgcHJlc2VudC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRG8gbm90aGluZyBpZiBjdXJyZW50IGVudmlyb25tZW50IGRvZXNuJ3QgaGF2ZSB0aGUgRWxlbWVudCBpbnRlcmZhY2UuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBFbGVtZW50ID09PSAndW5kZWZpbmVkJyB8fCAhKEVsZW1lbnQgaW5zdGFuY2VvZiBPYmplY3QpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgZ2V0V2luZG93T2YodGFyZ2V0KS5FbGVtZW50KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdwYXJhbWV0ZXIgMSBpcyBub3Qgb2YgdHlwZSBcIkVsZW1lbnRcIi4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG9ic2VydmF0aW9ucyA9IHRoaXMub2JzZXJ2YXRpb25zXztcclxuICAgICAgICAvLyBEbyBub3RoaW5nIGlmIGVsZW1lbnQgaXMgYWxyZWFkeSBiZWluZyBvYnNlcnZlZC5cclxuICAgICAgICBpZiAob2JzZXJ2YXRpb25zLmhhcyh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgb2JzZXJ2YXRpb25zLnNldCh0YXJnZXQsIG5ldyBSZXNpemVPYnNlcnZhdGlvbih0YXJnZXQpKTtcclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXJfLmFkZE9ic2VydmVyKHRoaXMpO1xyXG4gICAgICAgIC8vIEZvcmNlIHRoZSB1cGRhdGUgb2Ygb2JzZXJ2YXRpb25zLlxyXG4gICAgICAgIHRoaXMuY29udHJvbGxlcl8ucmVmcmVzaCgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU3RvcHMgb2JzZXJ2aW5nIHByb3ZpZGVkIGVsZW1lbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXQgLSBFbGVtZW50IHRvIHN0b3Agb2JzZXJ2aW5nLlxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIFJlc2l6ZU9ic2VydmVyU1BJLnByb3RvdHlwZS51bm9ic2VydmUgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJzEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5IDAgcHJlc2VudC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRG8gbm90aGluZyBpZiBjdXJyZW50IGVudmlyb25tZW50IGRvZXNuJ3QgaGF2ZSB0aGUgRWxlbWVudCBpbnRlcmZhY2UuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBFbGVtZW50ID09PSAndW5kZWZpbmVkJyB8fCAhKEVsZW1lbnQgaW5zdGFuY2VvZiBPYmplY3QpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgZ2V0V2luZG93T2YodGFyZ2V0KS5FbGVtZW50KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdwYXJhbWV0ZXIgMSBpcyBub3Qgb2YgdHlwZSBcIkVsZW1lbnRcIi4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG9ic2VydmF0aW9ucyA9IHRoaXMub2JzZXJ2YXRpb25zXztcclxuICAgICAgICAvLyBEbyBub3RoaW5nIGlmIGVsZW1lbnQgaXMgbm90IGJlaW5nIG9ic2VydmVkLlxyXG4gICAgICAgIGlmICghb2JzZXJ2YXRpb25zLmhhcyh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgb2JzZXJ2YXRpb25zLmRlbGV0ZSh0YXJnZXQpO1xyXG4gICAgICAgIGlmICghb2JzZXJ2YXRpb25zLnNpemUpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyXy5yZW1vdmVPYnNlcnZlcih0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9wcyBvYnNlcnZpbmcgYWxsIGVsZW1lbnRzLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICovXHJcbiAgICBSZXNpemVPYnNlcnZlclNQSS5wcm90b3R5cGUuZGlzY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNsZWFyQWN0aXZlKCk7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZhdGlvbnNfLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5jb250cm9sbGVyXy5yZW1vdmVPYnNlcnZlcih0aGlzKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENvbGxlY3RzIG9ic2VydmF0aW9uIGluc3RhbmNlcyB0aGUgYXNzb2NpYXRlZCBlbGVtZW50IG9mIHdoaWNoIGhhcyBjaGFuZ2VkXHJcbiAgICAgKiBpdCdzIGNvbnRlbnQgcmVjdGFuZ2xlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICovXHJcbiAgICBSZXNpemVPYnNlcnZlclNQSS5wcm90b3R5cGUuZ2F0aGVyQWN0aXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5jbGVhckFjdGl2ZSgpO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2YXRpb25zXy5mb3JFYWNoKGZ1bmN0aW9uIChvYnNlcnZhdGlvbikge1xyXG4gICAgICAgICAgICBpZiAob2JzZXJ2YXRpb24uaXNBY3RpdmUoKSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuYWN0aXZlT2JzZXJ2YXRpb25zXy5wdXNoKG9ic2VydmF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogSW52b2tlcyBpbml0aWFsIGNhbGxiYWNrIGZ1bmN0aW9uIHdpdGggYSBsaXN0IG9mIFJlc2l6ZU9ic2VydmVyRW50cnlcclxuICAgICAqIGluc3RhbmNlcyBjb2xsZWN0ZWQgZnJvbSBhY3RpdmUgcmVzaXplIG9ic2VydmF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgUmVzaXplT2JzZXJ2ZXJTUEkucHJvdG90eXBlLmJyb2FkY2FzdEFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBEbyBub3RoaW5nIGlmIG9ic2VydmVyIGRvZXNuJ3QgaGF2ZSBhY3RpdmUgb2JzZXJ2YXRpb25zLlxyXG4gICAgICAgIGlmICghdGhpcy5oYXNBY3RpdmUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjdHggPSB0aGlzLmNhbGxiYWNrQ3R4XztcclxuICAgICAgICAvLyBDcmVhdGUgUmVzaXplT2JzZXJ2ZXJFbnRyeSBpbnN0YW5jZSBmb3IgZXZlcnkgYWN0aXZlIG9ic2VydmF0aW9uLlxyXG4gICAgICAgIHZhciBlbnRyaWVzID0gdGhpcy5hY3RpdmVPYnNlcnZhdGlvbnNfLm1hcChmdW5jdGlvbiAob2JzZXJ2YXRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNpemVPYnNlcnZlckVudHJ5KG9ic2VydmF0aW9uLnRhcmdldCwgb2JzZXJ2YXRpb24uYnJvYWRjYXN0UmVjdCgpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNhbGxiYWNrXy5jYWxsKGN0eCwgZW50cmllcywgY3R4KTtcclxuICAgICAgICB0aGlzLmNsZWFyQWN0aXZlKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhcnMgdGhlIGNvbGxlY3Rpb24gb2YgYWN0aXZlIG9ic2VydmF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgUmVzaXplT2JzZXJ2ZXJTUEkucHJvdG90eXBlLmNsZWFyQWN0aXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlT2JzZXJ2YXRpb25zXy5zcGxpY2UoMCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUZWxscyB3aGV0aGVyIG9ic2VydmVyIGhhcyBhY3RpdmUgb2JzZXJ2YXRpb25zLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBSZXNpemVPYnNlcnZlclNQSS5wcm90b3R5cGUuaGFzQWN0aXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFjdGl2ZU9ic2VydmF0aW9uc18ubGVuZ3RoID4gMDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUmVzaXplT2JzZXJ2ZXJTUEk7XHJcbn0oKSk7XG5cbi8vIFJlZ2lzdHJ5IG9mIGludGVybmFsIG9ic2VydmVycy4gSWYgV2Vha01hcCBpcyBub3QgYXZhaWxhYmxlIHVzZSBjdXJyZW50IHNoaW1cclxuLy8gZm9yIHRoZSBNYXAgY29sbGVjdGlvbiBhcyBpdCBoYXMgYWxsIHJlcXVpcmVkIG1ldGhvZHMgYW5kIGJlY2F1c2UgV2Vha01hcFxyXG4vLyBjYW4ndCBiZSBmdWxseSBwb2x5ZmlsbGVkIGFueXdheS5cclxudmFyIG9ic2VydmVycyA9IHR5cGVvZiBXZWFrTWFwICE9PSAndW5kZWZpbmVkJyA/IG5ldyBXZWFrTWFwKCkgOiBuZXcgTWFwU2hpbSgpO1xyXG4vKipcclxuICogUmVzaXplT2JzZXJ2ZXIgQVBJLiBFbmNhcHN1bGF0ZXMgdGhlIFJlc2l6ZU9ic2VydmVyIFNQSSBpbXBsZW1lbnRhdGlvblxyXG4gKiBleHBvc2luZyBvbmx5IHRob3NlIG1ldGhvZHMgYW5kIHByb3BlcnRpZXMgdGhhdCBhcmUgZGVmaW5lZCBpbiB0aGUgc3BlYy5cclxuICovXHJcbnZhciBSZXNpemVPYnNlcnZlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiBSZXNpemVPYnNlcnZlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1Jlc2l6ZU9ic2VydmVyQ2FsbGJhY2t9IGNhbGxiYWNrIC0gQ2FsbGJhY2sgdGhhdCBpcyBpbnZva2VkIHdoZW5cclxuICAgICAqICAgICAgZGltZW5zaW9ucyBvZiB0aGUgb2JzZXJ2ZWQgZWxlbWVudHMgY2hhbmdlLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBSZXNpemVPYnNlcnZlcihjYWxsYmFjaykge1xyXG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSZXNpemVPYnNlcnZlcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignMSBhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgMCBwcmVzZW50LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY29udHJvbGxlciA9IFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICAgIHZhciBvYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlclNQSShjYWxsYmFjaywgY29udHJvbGxlciwgdGhpcyk7XHJcbiAgICAgICAgb2JzZXJ2ZXJzLnNldCh0aGlzLCBvYnNlcnZlcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUmVzaXplT2JzZXJ2ZXI7XHJcbn0oKSk7XHJcbi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcyBvZiBSZXNpemVPYnNlcnZlci5cclxuW1xyXG4gICAgJ29ic2VydmUnLFxyXG4gICAgJ3Vub2JzZXJ2ZScsXHJcbiAgICAnZGlzY29ubmVjdCdcclxuXS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHtcclxuICAgIFJlc2l6ZU9ic2VydmVyLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4gKF9hID0gb2JzZXJ2ZXJzLmdldCh0aGlzKSlbbWV0aG9kXS5hcHBseShfYSwgYXJndW1lbnRzKTtcclxuICAgIH07XHJcbn0pO1xuXG52YXIgaW5kZXggPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gRXhwb3J0IGV4aXN0aW5nIGltcGxlbWVudGF0aW9uIGlmIGF2YWlsYWJsZS5cclxuICAgIGlmICh0eXBlb2YgZ2xvYmFsJDEuUmVzaXplT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGdsb2JhbCQxLlJlc2l6ZU9ic2VydmVyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFJlc2l6ZU9ic2VydmVyO1xyXG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBpbmRleDtcbiIsImltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVja1wiO1xuaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3NcIjtcbmltcG9ydCBfaW5oZXJpdHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzXCI7XG5pbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlclwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGZpbmRET01Ob2RlIGZyb20gXCJyYy11dGlsL2VzL0RvbS9maW5kRE9NTm9kZVwiO1xuaW1wb3J0IHRvQXJyYXkgZnJvbSBcInJjLXV0aWwvZXMvQ2hpbGRyZW4vdG9BcnJheVwiO1xuaW1wb3J0IHdhcm5pbmcgZnJvbSBcInJjLXV0aWwvZXMvd2FybmluZ1wiO1xuaW1wb3J0IHsgY29tcG9zZVJlZiwgc3VwcG9ydFJlZiB9IGZyb20gXCJyYy11dGlsL2VzL3JlZlwiO1xuaW1wb3J0IFJlc2l6ZU9ic2VydmVyIGZyb20gJ3Jlc2l6ZS1vYnNlcnZlci1wb2x5ZmlsbCc7XG52YXIgSU5URVJOQUxfUFJFRklYX0tFWSA9ICdyYy1vYnNlcnZlci1rZXknOyAvLyBTdGlsbCBuZWVkIHRvIGJlIGNvbXBhdGlibGUgd2l0aCBSZWFjdCAxNSwgd2UgdXNlIGNsYXNzIGNvbXBvbmVudCBoZXJlXG5cbnZhciBSZWFjdFJlc2l6ZU9ic2VydmVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhSZWFjdFJlc2l6ZU9ic2VydmVyLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFJlYWN0UmVzaXplT2JzZXJ2ZXIpO1xuXG4gIGZ1bmN0aW9uIFJlYWN0UmVzaXplT2JzZXJ2ZXIoKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlYWN0UmVzaXplT2JzZXJ2ZXIpO1xuXG4gICAgX3RoaXMgPSBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBfdGhpcy5yZXNpemVPYnNlcnZlciA9IG51bGw7XG4gICAgX3RoaXMuY2hpbGROb2RlID0gbnVsbDtcbiAgICBfdGhpcy5jdXJyZW50RWxlbWVudCA9IG51bGw7XG4gICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICB3aWR0aDogMCxcbiAgICAgIGhlaWdodDogMCxcbiAgICAgIG9mZnNldEhlaWdodDogMCxcbiAgICAgIG9mZnNldFdpZHRoOiAwXG4gICAgfTtcblxuICAgIF90aGlzLm9uUmVzaXplID0gZnVuY3Rpb24gKGVudHJpZXMpIHtcbiAgICAgIHZhciBvblJlc2l6ZSA9IF90aGlzLnByb3BzLm9uUmVzaXplO1xuICAgICAgdmFyIHRhcmdldCA9IGVudHJpZXNbMF0udGFyZ2V0O1xuXG4gICAgICB2YXIgX3RhcmdldCRnZXRCb3VuZGluZ0NsID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgIHdpZHRoID0gX3RhcmdldCRnZXRCb3VuZGluZ0NsLndpZHRoLFxuICAgICAgICAgIGhlaWdodCA9IF90YXJnZXQkZ2V0Qm91bmRpbmdDbC5oZWlnaHQ7XG5cbiAgICAgIHZhciBvZmZzZXRXaWR0aCA9IHRhcmdldC5vZmZzZXRXaWR0aCxcbiAgICAgICAgICBvZmZzZXRIZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0O1xuICAgICAgLyoqXG4gICAgICAgKiBSZXNpemUgb2JzZXJ2ZXIgdHJpZ2dlciB3aGVuIGNvbnRlbnQgc2l6ZSBjaGFuZ2VkLlxuICAgICAgICogSW4gbW9zdCBjYXNlIHdlIGp1c3QgY2FyZSBhYm91dCBlbGVtZW50IHNpemUsXG4gICAgICAgKiBsZXQncyB1c2UgYGJvdW5kYXJ5YCBpbnN0ZWFkIG9mIGBjb250ZW50UmVjdGAgaGVyZSB0byBhdm9pZCBzaGFraW5nLlxuICAgICAgICovXG5cbiAgICAgIHZhciBmaXhlZFdpZHRoID0gTWF0aC5mbG9vcih3aWR0aCk7XG4gICAgICB2YXIgZml4ZWRIZWlnaHQgPSBNYXRoLmZsb29yKGhlaWdodCk7XG5cbiAgICAgIGlmIChfdGhpcy5zdGF0ZS53aWR0aCAhPT0gZml4ZWRXaWR0aCB8fCBfdGhpcy5zdGF0ZS5oZWlnaHQgIT09IGZpeGVkSGVpZ2h0IHx8IF90aGlzLnN0YXRlLm9mZnNldFdpZHRoICE9PSBvZmZzZXRXaWR0aCB8fCBfdGhpcy5zdGF0ZS5vZmZzZXRIZWlnaHQgIT09IG9mZnNldEhlaWdodCkge1xuICAgICAgICB2YXIgc2l6ZSA9IHtcbiAgICAgICAgICB3aWR0aDogZml4ZWRXaWR0aCxcbiAgICAgICAgICBoZWlnaHQ6IGZpeGVkSGVpZ2h0LFxuICAgICAgICAgIG9mZnNldFdpZHRoOiBvZmZzZXRXaWR0aCxcbiAgICAgICAgICBvZmZzZXRIZWlnaHQ6IG9mZnNldEhlaWdodFxuICAgICAgICB9O1xuXG4gICAgICAgIF90aGlzLnNldFN0YXRlKHNpemUpO1xuXG4gICAgICAgIGlmIChvblJlc2l6ZSkge1xuICAgICAgICAgIC8vIGRlZmVyIHRoZSBjYWxsYmFjayBidXQgbm90IGRlZmVyIHRvIG5leHQgZnJhbWVcbiAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG9uUmVzaXplKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc2l6ZSksIHt9LCB7XG4gICAgICAgICAgICAgIG9mZnNldFdpZHRoOiBvZmZzZXRXaWR0aCxcbiAgICAgICAgICAgICAgb2Zmc2V0SGVpZ2h0OiBvZmZzZXRIZWlnaHRcbiAgICAgICAgICAgIH0pLCB0YXJnZXQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLnNldENoaWxkTm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICBfdGhpcy5jaGlsZE5vZGUgPSBub2RlO1xuICAgIH07XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUmVhY3RSZXNpemVPYnNlcnZlciwgW3tcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkTW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICB0aGlzLm9uQ29tcG9uZW50VXBkYXRlZCgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnREaWRVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgdGhpcy5vbkNvbXBvbmVudFVwZGF0ZWQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB0aGlzLmRlc3Ryb3lPYnNlcnZlcigpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkNvbXBvbmVudFVwZGF0ZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Db21wb25lbnRVcGRhdGVkKCkge1xuICAgICAgdmFyIGRpc2FibGVkID0gdGhpcy5wcm9wcy5kaXNhYmxlZDsgLy8gVW5yZWdpc3RlciBpZiBkaXNhYmxlZFxuXG4gICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95T2JzZXJ2ZXIoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBVbnJlZ2lzdGVyIGlmIGVsZW1lbnQgY2hhbmdlZFxuXG5cbiAgICAgIHZhciBlbGVtZW50ID0gZmluZERPTU5vZGUodGhpcy5jaGlsZE5vZGUgfHwgdGhpcyk7XG4gICAgICB2YXIgZWxlbWVudENoYW5nZWQgPSBlbGVtZW50ICE9PSB0aGlzLmN1cnJlbnRFbGVtZW50O1xuXG4gICAgICBpZiAoZWxlbWVudENoYW5nZWQpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95T2JzZXJ2ZXIoKTtcbiAgICAgICAgdGhpcy5jdXJyZW50RWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5yZXNpemVPYnNlcnZlciAmJiBlbGVtZW50KSB7XG4gICAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIodGhpcy5vblJlc2l6ZSk7XG4gICAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZGVzdHJveU9ic2VydmVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3lPYnNlcnZlcigpIHtcbiAgICAgIGlmICh0aGlzLnJlc2l6ZU9ic2VydmVyKSB7XG4gICAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMucHJvcHMuY2hpbGRyZW47XG4gICAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkoY2hpbGRyZW4pO1xuXG4gICAgICBpZiAoY2hpbGROb2Rlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHdhcm5pbmcoZmFsc2UsICdGaW5kIG1vcmUgdGhhbiBvbmUgY2hpbGQgbm9kZSB3aXRoIGBjaGlsZHJlbmAgaW4gUmVzaXplT2JzZXJ2ZXIuIFdpbGwgb25seSBvYnNlcnZlIGZpcnN0IG9uZS4nKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hpbGROb2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgd2FybmluZyhmYWxzZSwgJ2BjaGlsZHJlbmAgb2YgUmVzaXplT2JzZXJ2ZXIgaXMgZW1wdHkuIE5vdGhpbmcgaXMgaW4gb2JzZXJ2ZS4nKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciBjaGlsZE5vZGUgPSBjaGlsZE5vZGVzWzBdO1xuXG4gICAgICBpZiAoIC8qI19fUFVSRV9fKi9SZWFjdC5pc1ZhbGlkRWxlbWVudChjaGlsZE5vZGUpICYmIHN1cHBvcnRSZWYoY2hpbGROb2RlKSkge1xuICAgICAgICB2YXIgcmVmID0gY2hpbGROb2RlLnJlZjtcbiAgICAgICAgY2hpbGROb2Rlc1swXSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGROb2RlLCB7XG4gICAgICAgICAgcmVmOiBjb21wb3NlUmVmKHJlZiwgdGhpcy5zZXRDaGlsZE5vZGUpXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgPyBjaGlsZE5vZGVzWzBdIDogY2hpbGROb2Rlcy5tYXAoZnVuY3Rpb24gKG5vZGUsIGluZGV4KSB7XG4gICAgICAgIGlmICghIC8qI19fUFVSRV9fKi9SZWFjdC5pc1ZhbGlkRWxlbWVudChub2RlKSB8fCAna2V5JyBpbiBub2RlICYmIG5vZGUua2V5ICE9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNsb25lRWxlbWVudChub2RlLCB7XG4gICAgICAgICAga2V5OiBcIlwiLmNvbmNhdChJTlRFUk5BTF9QUkVGSVhfS0VZLCBcIi1cIikuY29uY2F0KGluZGV4KVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBSZWFjdFJlc2l6ZU9ic2VydmVyO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5SZWFjdFJlc2l6ZU9ic2VydmVyLmRpc3BsYXlOYW1lID0gJ1Jlc2l6ZU9ic2VydmVyJztcbmV4cG9ydCBkZWZhdWx0IFJlYWN0UmVzaXplT2JzZXJ2ZXI7IiwiaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgeyB1c2VSZWYsIHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgcmFmIGZyb20gXCJyYy11dGlsL2VzL3JhZlwiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlUmFmKGNhbGxiYWNrKSB7XG4gIHZhciByYWZSZWYgPSB1c2VSZWYoKTtcbiAgdmFyIHJlbW92ZWRSZWYgPSB1c2VSZWYoZmFsc2UpO1xuXG4gIGZ1bmN0aW9uIHRyaWdnZXIoKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIGlmICghcmVtb3ZlZFJlZi5jdXJyZW50KSB7XG4gICAgICByYWYuY2FuY2VsKHJhZlJlZi5jdXJyZW50KTtcbiAgICAgIHJhZlJlZi5jdXJyZW50ID0gcmFmKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2FsbGJhY2suYXBwbHkodm9pZCAwLCBhcmdzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlbW92ZWRSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICByYWYuY2FuY2VsKHJhZlJlZi5jdXJyZW50KTtcbiAgICB9O1xuICB9LCBbXSk7XG4gIHJldHVybiB0cmlnZ2VyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVzZVJhZlN0YXRlKGRlZmF1bHRTdGF0ZSkge1xuICB2YXIgYmF0Y2hSZWYgPSB1c2VSZWYoW10pO1xuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZSh7fSksXG4gICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIGZvcmNlVXBkYXRlID0gX3VzZVN0YXRlMlsxXTtcblxuICB2YXIgc3RhdGUgPSB1c2VSZWYodHlwZW9mIGRlZmF1bHRTdGF0ZSA9PT0gJ2Z1bmN0aW9uJyA/IGRlZmF1bHRTdGF0ZSgpIDogZGVmYXVsdFN0YXRlKTtcbiAgdmFyIGZsdXNoVXBkYXRlID0gdXNlUmFmKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY3VycmVudCA9IHN0YXRlLmN1cnJlbnQ7XG4gICAgYmF0Y2hSZWYuY3VycmVudC5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgY3VycmVudCA9IGNhbGxiYWNrKGN1cnJlbnQpO1xuICAgIH0pO1xuICAgIGJhdGNoUmVmLmN1cnJlbnQgPSBbXTtcbiAgICBzdGF0ZS5jdXJyZW50ID0gY3VycmVudDtcbiAgICBmb3JjZVVwZGF0ZSh7fSk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZXIoY2FsbGJhY2spIHtcbiAgICBiYXRjaFJlZi5jdXJyZW50LnB1c2goY2FsbGJhY2spO1xuICAgIGZsdXNoVXBkYXRlKCk7XG4gIH1cblxuICByZXR1cm4gW3N0YXRlLmN1cnJlbnQsIHVwZGF0ZXJdO1xufSIsImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBLZXlDb2RlIGZyb20gXCJyYy11dGlsL2VzL0tleUNvZGVcIjtcblxuZnVuY3Rpb24gVGFiTm9kZShfcmVmLCByZWYpIHtcbiAgdmFyIF9jbGFzc05hbWVzO1xuXG4gIHZhciBwcmVmaXhDbHMgPSBfcmVmLnByZWZpeENscyxcbiAgICAgIGlkID0gX3JlZi5pZCxcbiAgICAgIGFjdGl2ZSA9IF9yZWYuYWN0aXZlLFxuICAgICAgX3JlZiR0YWIgPSBfcmVmLnRhYixcbiAgICAgIGtleSA9IF9yZWYkdGFiLmtleSxcbiAgICAgIHRhYiA9IF9yZWYkdGFiLnRhYixcbiAgICAgIGRpc2FibGVkID0gX3JlZiR0YWIuZGlzYWJsZWQsXG4gICAgICBjbG9zZUljb24gPSBfcmVmJHRhYi5jbG9zZUljb24sXG4gICAgICBjbG9zYWJsZSA9IF9yZWYuY2xvc2FibGUsXG4gICAgICByZW5kZXJXcmFwcGVyID0gX3JlZi5yZW5kZXJXcmFwcGVyLFxuICAgICAgcmVtb3ZlQXJpYUxhYmVsID0gX3JlZi5yZW1vdmVBcmlhTGFiZWwsXG4gICAgICBlZGl0YWJsZSA9IF9yZWYuZWRpdGFibGUsXG4gICAgICBvbkNsaWNrID0gX3JlZi5vbkNsaWNrLFxuICAgICAgb25SZW1vdmUgPSBfcmVmLm9uUmVtb3ZlLFxuICAgICAgb25Gb2N1cyA9IF9yZWYub25Gb2N1cyxcbiAgICAgIHN0eWxlID0gX3JlZi5zdHlsZTtcbiAgdmFyIHRhYlByZWZpeCA9IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItdGFiXCIpO1xuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBvblJlbW92ZTtcbiAgfSwgW10pO1xuICB2YXIgcmVtb3ZhYmxlID0gZWRpdGFibGUgJiYgY2xvc2FibGUgIT09IGZhbHNlICYmICFkaXNhYmxlZDtcblxuICBmdW5jdGlvbiBvbkludGVybmFsQ2xpY2soZSkge1xuICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG9uQ2xpY2soZSk7XG4gIH1cblxuICBmdW5jdGlvbiBvblJlbW92ZVRhYihldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZWRpdGFibGUub25FZGl0KCdyZW1vdmUnLCB7XG4gICAgICBrZXk6IGtleSxcbiAgICAgIGV2ZW50OiBldmVudFxuICAgIH0pO1xuICB9XG5cbiAgdmFyIG5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAga2V5OiBrZXksXG4gICAgcmVmOiByZWYsXG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKHRhYlByZWZpeCwgKF9jbGFzc05hbWVzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQodGFiUHJlZml4LCBcIi13aXRoLXJlbW92ZVwiKSwgcmVtb3ZhYmxlKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCBcIlwiLmNvbmNhdCh0YWJQcmVmaXgsIFwiLWFjdGl2ZVwiKSwgYWN0aXZlKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCBcIlwiLmNvbmNhdCh0YWJQcmVmaXgsIFwiLWRpc2FibGVkXCIpLCBkaXNhYmxlZCksIF9jbGFzc05hbWVzKSksXG4gICAgc3R5bGU6IHN0eWxlLFxuICAgIG9uQ2xpY2s6IG9uSW50ZXJuYWxDbGlja1xuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgcm9sZTogXCJ0YWJcIixcbiAgICBcImFyaWEtc2VsZWN0ZWRcIjogYWN0aXZlLFxuICAgIGlkOiBpZCAmJiBcIlwiLmNvbmNhdChpZCwgXCItdGFiLVwiKS5jb25jYXQoa2V5KSxcbiAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHRhYlByZWZpeCwgXCItYnRuXCIpLFxuICAgIFwiYXJpYS1jb250cm9sc1wiOiBpZCAmJiBcIlwiLmNvbmNhdChpZCwgXCItcGFuZWwtXCIpLmNvbmNhdChrZXkpLFxuICAgIFwiYXJpYS1kaXNhYmxlZFwiOiBkaXNhYmxlZCxcbiAgICB0YWJJbmRleDogZGlzYWJsZWQgPyBudWxsIDogMCxcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBvbkludGVybmFsQ2xpY2soZSk7XG4gICAgfSxcbiAgICBvbktleURvd246IGZ1bmN0aW9uIG9uS2V5RG93bihlKSB7XG4gICAgICBpZiAoW0tleUNvZGUuU1BBQ0UsIEtleUNvZGUuRU5URVJdLmluY2x1ZGVzKGUud2hpY2gpKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgb25JbnRlcm5hbENsaWNrKGUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgb25Gb2N1czogb25Gb2N1c1xuICB9LCB0YWIpLCByZW1vdmFibGUgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgXCJhcmlhLWxhYmVsXCI6IHJlbW92ZUFyaWFMYWJlbCB8fCAncmVtb3ZlJyxcbiAgICB0YWJJbmRleDogMCxcbiAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHRhYlByZWZpeCwgXCItcmVtb3ZlXCIpLFxuICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIG9uUmVtb3ZlVGFiKGUpO1xuICAgIH1cbiAgfSwgY2xvc2VJY29uIHx8IGVkaXRhYmxlLnJlbW92ZUljb24gfHwgJ8OXJykpO1xuICByZXR1cm4gcmVuZGVyV3JhcHBlciA/IHJlbmRlcldyYXBwZXIobm9kZSkgOiBub2RlO1xufVxuXG5leHBvcnQgZGVmYXVsdCAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihUYWJOb2RlKTsiLCJpbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0IHsgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbnZhciBERUZBVUxUX1NJWkUgPSB7XG4gIHdpZHRoOiAwLFxuICBoZWlnaHQ6IDAsXG4gIGxlZnQ6IDAsXG4gIHRvcDogMFxufTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZU9mZnNldHModGFicywgdGFiU2l6ZXMsIGhvbGRlclNjcm9sbFdpZHRoKSB7XG4gIHJldHVybiB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3RhYnMkO1xuXG4gICAgdmFyIG1hcCA9IG5ldyBNYXAoKTtcbiAgICB2YXIgbGFzdE9mZnNldCA9IHRhYlNpemVzLmdldCgoX3RhYnMkID0gdGFic1swXSkgPT09IG51bGwgfHwgX3RhYnMkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGFicyQua2V5KSB8fCBERUZBVUxUX1NJWkU7XG4gICAgdmFyIHJpZ2h0T2Zmc2V0ID0gbGFzdE9mZnNldC5sZWZ0ICsgbGFzdE9mZnNldC53aWR0aDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFicy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgdmFyIGtleSA9IHRhYnNbaV0ua2V5O1xuICAgICAgdmFyIGRhdGEgPSB0YWJTaXplcy5nZXQoa2V5KTsgLy8gUmV1c2UgbGFzdCBvbmUgd2hlbiBub3QgZXhpc3QgeWV0XG5cbiAgICAgIGlmICghZGF0YSkge1xuICAgICAgICB2YXIgX3RhYnM7XG5cbiAgICAgICAgZGF0YSA9IHRhYlNpemVzLmdldCgoX3RhYnMgPSB0YWJzW2kgLSAxXSkgPT09IG51bGwgfHwgX3RhYnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90YWJzLmtleSkgfHwgREVGQVVMVF9TSVpFO1xuICAgICAgfVxuXG4gICAgICB2YXIgZW50aXR5ID0gbWFwLmdldChrZXkpIHx8IF9vYmplY3RTcHJlYWQoe30sIGRhdGEpOyAvLyBSaWdodFxuXG5cbiAgICAgIGVudGl0eS5yaWdodCA9IHJpZ2h0T2Zmc2V0IC0gZW50aXR5LmxlZnQgLSBlbnRpdHkud2lkdGg7IC8vIFVwZGF0ZSBlbnRpdHlcblxuICAgICAgbWFwLnNldChrZXksIGVudGl0eSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hcDtcbiAgfSwgW3RhYnMubWFwKGZ1bmN0aW9uICh0YWIpIHtcbiAgICByZXR1cm4gdGFiLmtleTtcbiAgfSkuam9pbignXycpLCB0YWJTaXplcywgaG9sZGVyU2Nyb2xsV2lkdGhdKTtcbn0iLCJpbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xudmFyIERFRkFVTFRfU0laRSA9IHtcbiAgd2lkdGg6IDAsXG4gIGhlaWdodDogMCxcbiAgbGVmdDogMCxcbiAgdG9wOiAwLFxuICByaWdodDogMFxufTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZVZpc2libGVSYW5nZSh0YWJPZmZzZXRzLCBjb250YWluZXJTaXplLCB0YWJDb250ZW50Tm9kZVNpemUsIGFkZE5vZGVTaXplLCBfcmVmKSB7XG4gIHZhciB0YWJzID0gX3JlZi50YWJzLFxuICAgICAgdGFiUG9zaXRpb24gPSBfcmVmLnRhYlBvc2l0aW9uLFxuICAgICAgcnRsID0gX3JlZi5ydGw7XG4gIHZhciB1bml0O1xuICB2YXIgcG9zaXRpb247XG4gIHZhciB0cmFuc2Zvcm1TaXplO1xuXG4gIGlmIChbJ3RvcCcsICdib3R0b20nXS5pbmNsdWRlcyh0YWJQb3NpdGlvbikpIHtcbiAgICB1bml0ID0gJ3dpZHRoJztcbiAgICBwb3NpdGlvbiA9IHJ0bCA/ICdyaWdodCcgOiAnbGVmdCc7XG4gICAgdHJhbnNmb3JtU2l6ZSA9IE1hdGguYWJzKGNvbnRhaW5lclNpemUubGVmdCk7XG4gIH0gZWxzZSB7XG4gICAgdW5pdCA9ICdoZWlnaHQnO1xuICAgIHBvc2l0aW9uID0gJ3RvcCc7XG4gICAgdHJhbnNmb3JtU2l6ZSA9IC1jb250YWluZXJTaXplLnRvcDtcbiAgfVxuXG4gIHZhciBiYXNpY1NpemUgPSBjb250YWluZXJTaXplW3VuaXRdO1xuICB2YXIgdGFiQ29udGVudFNpemUgPSB0YWJDb250ZW50Tm9kZVNpemVbdW5pdF07XG4gIHZhciBhZGRTaXplID0gYWRkTm9kZVNpemVbdW5pdF07XG4gIHZhciBtZXJnZWRCYXNpY1NpemUgPSBiYXNpY1NpemU7XG5cbiAgaWYgKHRhYkNvbnRlbnRTaXplICsgYWRkU2l6ZSA+IGJhc2ljU2l6ZSkge1xuICAgIG1lcmdlZEJhc2ljU2l6ZSA9IGJhc2ljU2l6ZSAtIGFkZFNpemU7XG4gIH1cblxuICByZXR1cm4gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0YWJzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFswLCAwXTtcbiAgICB9XG5cbiAgICB2YXIgbGVuID0gdGFicy5sZW5ndGg7XG4gICAgdmFyIGVuZEluZGV4ID0gbGVuO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgdmFyIG9mZnNldCA9IHRhYk9mZnNldHMuZ2V0KHRhYnNbaV0ua2V5KSB8fCBERUZBVUxUX1NJWkU7XG5cbiAgICAgIGlmIChvZmZzZXRbcG9zaXRpb25dICsgb2Zmc2V0W3VuaXRdID4gdHJhbnNmb3JtU2l6ZSArIG1lcmdlZEJhc2ljU2l6ZSkge1xuICAgICAgICBlbmRJbmRleCA9IGkgLSAxO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgc3RhcnRJbmRleCA9IDA7XG5cbiAgICBmb3IgKHZhciBfaSA9IGxlbiAtIDE7IF9pID49IDA7IF9pIC09IDEpIHtcbiAgICAgIHZhciBfb2Zmc2V0ID0gdGFiT2Zmc2V0cy5nZXQodGFic1tfaV0ua2V5KSB8fCBERUZBVUxUX1NJWkU7XG5cbiAgICAgIGlmIChfb2Zmc2V0W3Bvc2l0aW9uXSA8IHRyYW5zZm9ybVNpemUpIHtcbiAgICAgICAgc3RhcnRJbmRleCA9IF9pICsgMTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFtzdGFydEluZGV4LCBlbmRJbmRleF07XG4gIH0sIFt0YWJPZmZzZXRzLCB0cmFuc2Zvcm1TaXplLCBtZXJnZWRCYXNpY1NpemUsIHRhYlBvc2l0aW9uLCB0YWJzLm1hcChmdW5jdGlvbiAodGFiKSB7XG4gICAgcmV0dXJuIHRhYi5rZXk7XG4gIH0pLmpvaW4oJ18nKSwgcnRsXSk7XG59IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IFJlc2l6ZU9ic2VydmVyIGZyb20gJ3JjLXJlc2l6ZS1vYnNlcnZlcic7IC8vIFVzZSBzaGFyZWQgdmFyaWFibGUgdG8gc2F2ZSBidW5kbGUgc2l6ZVxuXG52YXIgVU5ERUZJTkVEID0gdW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBJbnRlcm5hbEl0ZW0ocHJvcHMsIHJlZikge1xuICB2YXIgcHJlZml4Q2xzID0gcHJvcHMucHJlZml4Q2xzLFxuICAgICAgaW52YWxpZGF0ZSA9IHByb3BzLmludmFsaWRhdGUsXG4gICAgICBpdGVtID0gcHJvcHMuaXRlbSxcbiAgICAgIHJlbmRlckl0ZW0gPSBwcm9wcy5yZW5kZXJJdGVtLFxuICAgICAgcmVzcG9uc2l2ZSA9IHByb3BzLnJlc3BvbnNpdmUsXG4gICAgICByZWdpc3RlclNpemUgPSBwcm9wcy5yZWdpc3RlclNpemUsXG4gICAgICBpdGVtS2V5ID0gcHJvcHMuaXRlbUtleSxcbiAgICAgIGNsYXNzTmFtZSA9IHByb3BzLmNsYXNzTmFtZSxcbiAgICAgIHN0eWxlID0gcHJvcHMuc3R5bGUsXG4gICAgICBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuLFxuICAgICAgZGlzcGxheSA9IHByb3BzLmRpc3BsYXksXG4gICAgICBvcmRlciA9IHByb3BzLm9yZGVyLFxuICAgICAgX3Byb3BzJGNvbXBvbmVudCA9IHByb3BzLmNvbXBvbmVudCxcbiAgICAgIENvbXBvbmVudCA9IF9wcm9wcyRjb21wb25lbnQgPT09IHZvaWQgMCA/ICdkaXYnIDogX3Byb3BzJGNvbXBvbmVudCxcbiAgICAgIHJlc3RQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhwcm9wcywgW1wicHJlZml4Q2xzXCIsIFwiaW52YWxpZGF0ZVwiLCBcIml0ZW1cIiwgXCJyZW5kZXJJdGVtXCIsIFwicmVzcG9uc2l2ZVwiLCBcInJlZ2lzdGVyU2l6ZVwiLCBcIml0ZW1LZXlcIiwgXCJjbGFzc05hbWVcIiwgXCJzdHlsZVwiLCBcImNoaWxkcmVuXCIsIFwiZGlzcGxheVwiLCBcIm9yZGVyXCIsIFwiY29tcG9uZW50XCJdKTtcblxuICB2YXIgbWVyZ2VkSGlkZGVuID0gcmVzcG9uc2l2ZSAmJiAhZGlzcGxheTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gRWZmZWN0ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gaW50ZXJuYWxSZWdpc3RlclNpemUod2lkdGgpIHtcbiAgICByZWdpc3RlclNpemUoaXRlbUtleSwgd2lkdGgpO1xuICB9XG5cbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaW50ZXJuYWxSZWdpc3RlclNpemUobnVsbCk7XG4gICAgfTtcbiAgfSwgW10pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBSZW5kZXIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgY2hpbGROb2RlID0gcmVuZGVySXRlbSAmJiBpdGVtICE9PSBVTkRFRklORUQgPyByZW5kZXJJdGVtKGl0ZW0pIDogY2hpbGRyZW47XG4gIHZhciBvdmVyZmxvd1N0eWxlO1xuXG4gIGlmICghaW52YWxpZGF0ZSkge1xuICAgIG92ZXJmbG93U3R5bGUgPSB7XG4gICAgICBvcGFjaXR5OiBtZXJnZWRIaWRkZW4gPyAwIDogMSxcbiAgICAgIGhlaWdodDogbWVyZ2VkSGlkZGVuID8gMCA6IFVOREVGSU5FRCxcbiAgICAgIG92ZXJmbG93WTogbWVyZ2VkSGlkZGVuID8gJ2hpZGRlbicgOiBVTkRFRklORUQsXG4gICAgICBvcmRlcjogcmVzcG9uc2l2ZSA/IG9yZGVyIDogVU5ERUZJTkVELFxuICAgICAgcG9pbnRlckV2ZW50czogbWVyZ2VkSGlkZGVuID8gJ25vbmUnIDogVU5ERUZJTkVELFxuICAgICAgcG9zaXRpb246IG1lcmdlZEhpZGRlbiA/ICdhYnNvbHV0ZScgOiBVTkRFRklORURcbiAgICB9O1xuICB9XG5cbiAgdmFyIG92ZXJmbG93UHJvcHMgPSB7fTtcblxuICBpZiAobWVyZ2VkSGlkZGVuKSB7XG4gICAgb3ZlcmZsb3dQcm9wc1snYXJpYS1oaWRkZW4nXSA9IHRydWU7XG4gIH1cblxuICB2YXIgaXRlbU5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIF9leHRlbmRzKHtcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoIWludmFsaWRhdGUgJiYgcHJlZml4Q2xzLCBjbGFzc05hbWUpLFxuICAgIHN0eWxlOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG92ZXJmbG93U3R5bGUpLCBzdHlsZSlcbiAgfSwgb3ZlcmZsb3dQcm9wcywgcmVzdFByb3BzLCB7XG4gICAgcmVmOiByZWZcbiAgfSksIGNoaWxkTm9kZSk7XG5cbiAgaWYgKHJlc3BvbnNpdmUpIHtcbiAgICBpdGVtTm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlc2l6ZU9ic2VydmVyLCB7XG4gICAgICBvblJlc2l6ZTogZnVuY3Rpb24gb25SZXNpemUoX3JlZikge1xuICAgICAgICB2YXIgb2Zmc2V0V2lkdGggPSBfcmVmLm9mZnNldFdpZHRoO1xuICAgICAgICBpbnRlcm5hbFJlZ2lzdGVyU2l6ZShvZmZzZXRXaWR0aCk7XG4gICAgICB9XG4gICAgfSwgaXRlbU5vZGUpO1xuICB9XG5cbiAgcmV0dXJuIGl0ZW1Ob2RlO1xufVxuXG52YXIgSXRlbSA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKEludGVybmFsSXRlbSk7XG5JdGVtLmRpc3BsYXlOYW1lID0gJ0l0ZW0nO1xuZXhwb3J0IGRlZmF1bHQgSXRlbTsiLCJpbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCB7IHVzZVJlZiwgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCByYWYgZnJvbSBcInJjLXV0aWwvZXMvcmFmXCI7XG4vKipcbiAqIFN0YXRlIGdlbmVyYXRlLiBSZXR1cm4gYSBgc2V0U3RhdGVgIGJ1dCBpdCB3aWxsIGZsdXNoIGFsbCBzdGF0ZSB3aXRoIG9uZSByZW5kZXIgdG8gc2F2ZSBwZXJmLlxuICogVGhpcyBpcyBub3QgYSByZWFsaXphdGlvbiBvZiBgdW5zdGFibGVfYmF0Y2hlZFVwZGF0ZXNgLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VCYXRjaEZyYW1lU3RhdGUoKSB7XG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZSh7fSksXG4gICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIGZvcmNlVXBkYXRlID0gX3VzZVN0YXRlMlsxXTtcblxuICB2YXIgc3RhdGVzUmVmID0gdXNlUmVmKFtdKTtcbiAgdmFyIGRlc3Ryb3lSZWYgPSB1c2VSZWYoZmFsc2UpO1xuICB2YXIgd2Fsa2luZ0luZGV4ID0gMDtcbiAgdmFyIGJlZm9yZUZyYW1lSWQgPSAwO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBkZXN0cm95UmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICBmdW5jdGlvbiBjcmVhdGVTdGF0ZShkZWZhdWx0VmFsdWUpIHtcbiAgICB2YXIgbXlJbmRleCA9IHdhbGtpbmdJbmRleDtcbiAgICB3YWxraW5nSW5kZXggKz0gMTsgLy8gRmlsbCB2YWx1ZSBpZiBub3QgZXhpc3QgeWV0XG5cbiAgICBpZiAoc3RhdGVzUmVmLmN1cnJlbnQubGVuZ3RoIDwgbXlJbmRleCArIDEpIHtcbiAgICAgIHN0YXRlc1JlZi5jdXJyZW50W215SW5kZXhdID0gZGVmYXVsdFZhbHVlO1xuICAgIH0gLy8gUmV0dXJuIGZpbGxlZCBhcyBgc2V0U3RhdGVgXG5cblxuICAgIHZhciB2YWx1ZSA9IHN0YXRlc1JlZi5jdXJyZW50W215SW5kZXhdO1xuXG4gICAgZnVuY3Rpb24gc2V0VmFsdWUodmFsKSB7XG4gICAgICBzdGF0ZXNSZWYuY3VycmVudFtteUluZGV4XSA9IHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicgPyB2YWwoc3RhdGVzUmVmLmN1cnJlbnRbbXlJbmRleF0pIDogdmFsO1xuICAgICAgcmFmLmNhbmNlbChiZWZvcmVGcmFtZUlkKTsgLy8gRmx1c2ggd2l0aCBiYXRjaFxuXG4gICAgICBiZWZvcmVGcmFtZUlkID0gcmFmKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFkZXN0cm95UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBmb3JjZVVwZGF0ZSh7fSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBbdmFsdWUsIHNldFZhbHVlXTtcbiAgfVxuXG4gIHJldHVybiBjcmVhdGVTdGF0ZTtcbn0iLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBJdGVtIGZyb20gJy4vSXRlbSc7XG5pbXBvcnQgeyBPdmVyZmxvd0NvbnRleHQgfSBmcm9tICcuL092ZXJmbG93JztcblxudmFyIEludGVybmFsUmF3SXRlbSA9IGZ1bmN0aW9uIEludGVybmFsUmF3SXRlbShwcm9wcywgcmVmKSB7XG4gIHZhciBjb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChPdmVyZmxvd0NvbnRleHQpOyAvLyBSZW5kZXIgZGlyZWN0bHkgd2hlbiBjb250ZXh0IG5vdCBwcm92aWRlZFxuXG4gIGlmICghY29udGV4dCkge1xuICAgIHZhciBfcHJvcHMkY29tcG9uZW50ID0gcHJvcHMuY29tcG9uZW50LFxuICAgICAgICBDb21wb25lbnQgPSBfcHJvcHMkY29tcG9uZW50ID09PSB2b2lkIDAgPyAnZGl2JyA6IF9wcm9wcyRjb21wb25lbnQsXG4gICAgICAgIF9yZXN0UHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMocHJvcHMsIFtcImNvbXBvbmVudFwiXSk7XG5cbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCBfZXh0ZW5kcyh7fSwgX3Jlc3RQcm9wcywge1xuICAgICAgcmVmOiByZWZcbiAgICB9KSk7XG4gIH1cblxuICB2YXIgY29udGV4dENsYXNzTmFtZSA9IGNvbnRleHQuY2xhc3NOYW1lLFxuICAgICAgcmVzdENvbnRleHQgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoY29udGV4dCwgW1wiY2xhc3NOYW1lXCJdKTtcblxuICB2YXIgY2xhc3NOYW1lID0gcHJvcHMuY2xhc3NOYW1lLFxuICAgICAgcmVzdFByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHByb3BzLCBbXCJjbGFzc05hbWVcIl0pOyAvLyBEbyBub3QgcGFzcyBjb250ZXh0IHRvIHN1YiBpdGVtIHRvIGF2b2lkIG11bHRpcGxlIG1lYXN1cmVcblxuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChPdmVyZmxvd0NvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogbnVsbFxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChJdGVtLCBfZXh0ZW5kcyh7XG4gICAgcmVmOiByZWYsXG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKGNvbnRleHRDbGFzc05hbWUsIGNsYXNzTmFtZSlcbiAgfSwgcmVzdENvbnRleHQsIHJlc3RQcm9wcykpKTtcbn07XG5cbnZhciBSYXdJdGVtID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoSW50ZXJuYWxSYXdJdGVtKTtcblJhd0l0ZW0uZGlzcGxheU5hbWUgPSAnUmF3SXRlbSc7XG5leHBvcnQgZGVmYXVsdCBSYXdJdGVtOyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VNZW1vLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IFJlc2l6ZU9ic2VydmVyIGZyb20gJ3JjLXJlc2l6ZS1vYnNlcnZlcic7XG5pbXBvcnQgSXRlbSBmcm9tICcuL0l0ZW0nO1xuaW1wb3J0IHsgdXNlQmF0Y2hGcmFtZVN0YXRlIH0gZnJvbSAnLi9ob29rcy91c2VCYXRjaEZyYW1lU3RhdGUnO1xuaW1wb3J0IFJhd0l0ZW0gZnJvbSAnLi9SYXdJdGVtJztcbmV4cG9ydCB2YXIgT3ZlcmZsb3dDb250ZXh0ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUNvbnRleHQobnVsbCk7XG52YXIgUkVTUE9OU0lWRSA9ICdyZXNwb25zaXZlJztcbnZhciBJTlZBTElEQVRFID0gJ2ludmFsaWRhdGUnO1xuXG5mdW5jdGlvbiBkZWZhdWx0UmVuZGVyUmVzdChvbWl0dGVkSXRlbXMpIHtcbiAgcmV0dXJuIFwiKyBcIi5jb25jYXQob21pdHRlZEl0ZW1zLmxlbmd0aCwgXCIgLi4uXCIpO1xufVxuXG5mdW5jdGlvbiBPdmVyZmxvdyhwcm9wcywgcmVmKSB7XG4gIHZhciBfcHJvcHMkcHJlZml4Q2xzID0gcHJvcHMucHJlZml4Q2xzLFxuICAgICAgcHJlZml4Q2xzID0gX3Byb3BzJHByZWZpeENscyA9PT0gdm9pZCAwID8gJ3JjLW92ZXJmbG93JyA6IF9wcm9wcyRwcmVmaXhDbHMsXG4gICAgICBfcHJvcHMkZGF0YSA9IHByb3BzLmRhdGEsXG4gICAgICBkYXRhID0gX3Byb3BzJGRhdGEgPT09IHZvaWQgMCA/IFtdIDogX3Byb3BzJGRhdGEsXG4gICAgICByZW5kZXJJdGVtID0gcHJvcHMucmVuZGVySXRlbSxcbiAgICAgIHJlbmRlclJhd0l0ZW0gPSBwcm9wcy5yZW5kZXJSYXdJdGVtLFxuICAgICAgaXRlbUtleSA9IHByb3BzLml0ZW1LZXksXG4gICAgICBfcHJvcHMkaXRlbVdpZHRoID0gcHJvcHMuaXRlbVdpZHRoLFxuICAgICAgaXRlbVdpZHRoID0gX3Byb3BzJGl0ZW1XaWR0aCA9PT0gdm9pZCAwID8gMTAgOiBfcHJvcHMkaXRlbVdpZHRoLFxuICAgICAgc3NyID0gcHJvcHMuc3NyLFxuICAgICAgc3R5bGUgPSBwcm9wcy5zdHlsZSxcbiAgICAgIGNsYXNzTmFtZSA9IHByb3BzLmNsYXNzTmFtZSxcbiAgICAgIG1heENvdW50ID0gcHJvcHMubWF4Q291bnQsXG4gICAgICByZW5kZXJSZXN0ID0gcHJvcHMucmVuZGVyUmVzdCxcbiAgICAgIHJlbmRlclJhd1Jlc3QgPSBwcm9wcy5yZW5kZXJSYXdSZXN0LFxuICAgICAgc3VmZml4ID0gcHJvcHMuc3VmZml4LFxuICAgICAgX3Byb3BzJGNvbXBvbmVudCA9IHByb3BzLmNvbXBvbmVudCxcbiAgICAgIENvbXBvbmVudCA9IF9wcm9wcyRjb21wb25lbnQgPT09IHZvaWQgMCA/ICdkaXYnIDogX3Byb3BzJGNvbXBvbmVudCxcbiAgICAgIGl0ZW1Db21wb25lbnQgPSBwcm9wcy5pdGVtQ29tcG9uZW50LFxuICAgICAgb25WaXNpYmxlQ2hhbmdlID0gcHJvcHMub25WaXNpYmxlQ2hhbmdlLFxuICAgICAgcmVzdFByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHByb3BzLCBbXCJwcmVmaXhDbHNcIiwgXCJkYXRhXCIsIFwicmVuZGVySXRlbVwiLCBcInJlbmRlclJhd0l0ZW1cIiwgXCJpdGVtS2V5XCIsIFwiaXRlbVdpZHRoXCIsIFwic3NyXCIsIFwic3R5bGVcIiwgXCJjbGFzc05hbWVcIiwgXCJtYXhDb3VudFwiLCBcInJlbmRlclJlc3RcIiwgXCJyZW5kZXJSYXdSZXN0XCIsIFwic3VmZml4XCIsIFwiY29tcG9uZW50XCIsIFwiaXRlbUNvbXBvbmVudFwiLCBcIm9uVmlzaWJsZUNoYW5nZVwiXSk7XG5cbiAgdmFyIGNyZWF0ZVVzZVN0YXRlID0gdXNlQmF0Y2hGcmFtZVN0YXRlKCk7XG4gIHZhciBmdWxseVNTUiA9IHNzciA9PT0gJ2Z1bGwnO1xuXG4gIHZhciBfY3JlYXRlVXNlU3RhdGUgPSBjcmVhdGVVc2VTdGF0ZShudWxsKSxcbiAgICAgIF9jcmVhdGVVc2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfY3JlYXRlVXNlU3RhdGUsIDIpLFxuICAgICAgY29udGFpbmVyV2lkdGggPSBfY3JlYXRlVXNlU3RhdGUyWzBdLFxuICAgICAgc2V0Q29udGFpbmVyV2lkdGggPSBfY3JlYXRlVXNlU3RhdGUyWzFdO1xuXG4gIHZhciBtZXJnZWRDb250YWluZXJXaWR0aCA9IGNvbnRhaW5lcldpZHRoIHx8IDA7XG5cbiAgdmFyIF9jcmVhdGVVc2VTdGF0ZTMgPSBjcmVhdGVVc2VTdGF0ZShuZXcgTWFwKCkpLFxuICAgICAgX2NyZWF0ZVVzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF9jcmVhdGVVc2VTdGF0ZTMsIDIpLFxuICAgICAgaXRlbVdpZHRocyA9IF9jcmVhdGVVc2VTdGF0ZTRbMF0sXG4gICAgICBzZXRJdGVtV2lkdGhzID0gX2NyZWF0ZVVzZVN0YXRlNFsxXTtcblxuICB2YXIgX2NyZWF0ZVVzZVN0YXRlNSA9IGNyZWF0ZVVzZVN0YXRlKDApLFxuICAgICAgX2NyZWF0ZVVzZVN0YXRlNiA9IF9zbGljZWRUb0FycmF5KF9jcmVhdGVVc2VTdGF0ZTUsIDIpLFxuICAgICAgcHJldlJlc3RXaWR0aCA9IF9jcmVhdGVVc2VTdGF0ZTZbMF0sXG4gICAgICBzZXRQcmV2UmVzdFdpZHRoID0gX2NyZWF0ZVVzZVN0YXRlNlsxXTtcblxuICB2YXIgX2NyZWF0ZVVzZVN0YXRlNyA9IGNyZWF0ZVVzZVN0YXRlKDApLFxuICAgICAgX2NyZWF0ZVVzZVN0YXRlOCA9IF9zbGljZWRUb0FycmF5KF9jcmVhdGVVc2VTdGF0ZTcsIDIpLFxuICAgICAgcmVzdFdpZHRoID0gX2NyZWF0ZVVzZVN0YXRlOFswXSxcbiAgICAgIHNldFJlc3RXaWR0aCA9IF9jcmVhdGVVc2VTdGF0ZThbMV07XG5cbiAgdmFyIF9jcmVhdGVVc2VTdGF0ZTkgPSBjcmVhdGVVc2VTdGF0ZSgwKSxcbiAgICAgIF9jcmVhdGVVc2VTdGF0ZTEwID0gX3NsaWNlZFRvQXJyYXkoX2NyZWF0ZVVzZVN0YXRlOSwgMiksXG4gICAgICBzdWZmaXhXaWR0aCA9IF9jcmVhdGVVc2VTdGF0ZTEwWzBdLFxuICAgICAgc2V0U3VmZml4V2lkdGggPSBfY3JlYXRlVXNlU3RhdGUxMFsxXTtcblxuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUobnVsbCksXG4gICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIHN1ZmZpeEZpeGVkU3RhcnQgPSBfdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0U3VmZml4Rml4ZWRTdGFydCA9IF91c2VTdGF0ZTJbMV07XG5cbiAgdmFyIF91c2VTdGF0ZTMgPSB1c2VTdGF0ZShudWxsKSxcbiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSxcbiAgICAgIGRpc3BsYXlDb3VudCA9IF91c2VTdGF0ZTRbMF0sXG4gICAgICBzZXREaXNwbGF5Q291bnQgPSBfdXNlU3RhdGU0WzFdO1xuXG4gIHZhciBtZXJnZWREaXNwbGF5Q291bnQgPSBSZWFjdC51c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoZGlzcGxheUNvdW50ID09PSBudWxsICYmIGZ1bGx5U1NSKSB7XG4gICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpc3BsYXlDb3VudCB8fCAwO1xuICB9LCBbZGlzcGxheUNvdW50LCBjb250YWluZXJXaWR0aF0pO1xuXG4gIHZhciBfdXNlU3RhdGU1ID0gdXNlU3RhdGUoZmFsc2UpLFxuICAgICAgX3VzZVN0YXRlNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTUsIDIpLFxuICAgICAgcmVzdFJlYWR5ID0gX3VzZVN0YXRlNlswXSxcbiAgICAgIHNldFJlc3RSZWFkeSA9IF91c2VTdGF0ZTZbMV07XG5cbiAgdmFyIGl0ZW1QcmVmaXhDbHMgPSBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWl0ZW1cIik7IC8vIEFsd2F5cyB1c2UgdGhlIG1heCB3aWR0aCB0byBhdm9pZCBibGlua1xuXG4gIHZhciBtZXJnZWRSZXN0V2lkdGggPSBNYXRoLm1heChwcmV2UmVzdFdpZHRoLCByZXN0V2lkdGgpOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gRGF0YSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgaXNSZXNwb25zaXZlID0gZGF0YS5sZW5ndGggJiYgbWF4Q291bnQgPT09IFJFU1BPTlNJVkU7XG4gIHZhciBpbnZhbGlkYXRlID0gbWF4Q291bnQgPT09IElOVkFMSURBVEU7XG4gIC8qKlxuICAgKiBXaGVuIGlzIGByZXNwb25zaXZlYCwgd2Ugd2lsbCBhbHdheXMgcmVuZGVyIHJlc3Qgbm9kZSB0byBnZXQgdGhlIHJlYWwgd2lkdGggb2YgaXQgZm9yIGNhbGN1bGF0aW9uXG4gICAqL1xuXG4gIHZhciBzaG93UmVzdCA9IGlzUmVzcG9uc2l2ZSB8fCB0eXBlb2YgbWF4Q291bnQgPT09ICdudW1iZXInICYmIGRhdGEubGVuZ3RoID4gbWF4Q291bnQ7XG4gIHZhciBtZXJnZWREYXRhID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGl0ZW1zID0gZGF0YTtcblxuICAgIGlmIChpc1Jlc3BvbnNpdmUpIHtcbiAgICAgIGlmIChjb250YWluZXJXaWR0aCA9PT0gbnVsbCAmJiBmdWxseVNTUikge1xuICAgICAgICBpdGVtcyA9IGRhdGE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpdGVtcyA9IGRhdGEuc2xpY2UoMCwgTWF0aC5taW4oZGF0YS5sZW5ndGgsIG1lcmdlZENvbnRhaW5lcldpZHRoIC8gaXRlbVdpZHRoKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbWF4Q291bnQgPT09ICdudW1iZXInKSB7XG4gICAgICBpdGVtcyA9IGRhdGEuc2xpY2UoMCwgbWF4Q291bnQpO1xuICAgIH1cblxuICAgIHJldHVybiBpdGVtcztcbiAgfSwgW2RhdGEsIGl0ZW1XaWR0aCwgY29udGFpbmVyV2lkdGgsIG1heENvdW50LCBpc1Jlc3BvbnNpdmVdKTtcbiAgdmFyIG9taXR0ZWRJdGVtcyA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIGlmIChpc1Jlc3BvbnNpdmUpIHtcbiAgICAgIHJldHVybiBkYXRhLnNsaWNlKG1lcmdlZERpc3BsYXlDb3VudCArIDEpO1xuICAgIH1cblxuICAgIHJldHVybiBkYXRhLnNsaWNlKG1lcmdlZERhdGEubGVuZ3RoKTtcbiAgfSwgW2RhdGEsIG1lcmdlZERhdGEsIGlzUmVzcG9uc2l2ZSwgbWVyZ2VkRGlzcGxheUNvdW50XSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBJdGVtID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBnZXRLZXkgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIGlmICh0eXBlb2YgaXRlbUtleSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGl0ZW1LZXkoaXRlbSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChfcmVmID0gaXRlbUtleSAmJiAoaXRlbSA9PT0gbnVsbCB8fCBpdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpdGVtW2l0ZW1LZXldKSkgIT09IG51bGwgJiYgX3JlZiAhPT0gdm9pZCAwID8gX3JlZiA6IGluZGV4O1xuICB9LCBbaXRlbUtleV0pO1xuICB2YXIgbWVyZ2VkUmVuZGVySXRlbSA9IHVzZUNhbGxiYWNrKHJlbmRlckl0ZW0gfHwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICByZXR1cm4gaXRlbTtcbiAgfSwgW3JlbmRlckl0ZW1dKTtcblxuICBmdW5jdGlvbiB1cGRhdGVEaXNwbGF5Q291bnQoY291bnQsIG5vdFJlYWR5KSB7XG4gICAgc2V0RGlzcGxheUNvdW50KGNvdW50KTtcblxuICAgIGlmICghbm90UmVhZHkpIHtcbiAgICAgIHNldFJlc3RSZWFkeShjb3VudCA8IGRhdGEubGVuZ3RoIC0gMSk7XG4gICAgICBvblZpc2libGVDaGFuZ2UgPT09IG51bGwgfHwgb25WaXNpYmxlQ2hhbmdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvblZpc2libGVDaGFuZ2UoY291bnQpO1xuICAgIH1cbiAgfSAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gU2l6ZSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIGZ1bmN0aW9uIG9uT3ZlcmZsb3dSZXNpemUoXywgZWxlbWVudCkge1xuICAgIHNldENvbnRhaW5lcldpZHRoKGVsZW1lbnQuY2xpZW50V2lkdGgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXJTaXplKGtleSwgd2lkdGgpIHtcbiAgICBzZXRJdGVtV2lkdGhzKGZ1bmN0aW9uIChvcmlnaW4pIHtcbiAgICAgIHZhciBjbG9uZSA9IG5ldyBNYXAob3JpZ2luKTtcblxuICAgICAgaWYgKHdpZHRoID09PSBudWxsKSB7XG4gICAgICAgIGNsb25lLmRlbGV0ZShrZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xvbmUuc2V0KGtleSwgd2lkdGgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2xvbmU7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByZWdpc3Rlck92ZXJmbG93U2l6ZShfLCB3aWR0aCkge1xuICAgIHNldFJlc3RXaWR0aCh3aWR0aCk7XG4gICAgc2V0UHJldlJlc3RXaWR0aChyZXN0V2lkdGgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXJTdWZmaXhTaXplKF8sIHdpZHRoKSB7XG4gICAgc2V0U3VmZml4V2lkdGgod2lkdGgpO1xuICB9IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IEVmZmVjdCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgZnVuY3Rpb24gZ2V0SXRlbVdpZHRoKGluZGV4KSB7XG4gICAgcmV0dXJuIGl0ZW1XaWR0aHMuZ2V0KGdldEtleShtZXJnZWREYXRhW2luZGV4XSwgaW5kZXgpKTtcbiAgfVxuXG4gIFJlYWN0LnVzZUxheW91dEVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKG1lcmdlZENvbnRhaW5lcldpZHRoICYmIG1lcmdlZFJlc3RXaWR0aCAmJiBtZXJnZWREYXRhKSB7XG4gICAgICB2YXIgdG90YWxXaWR0aCA9IHN1ZmZpeFdpZHRoO1xuICAgICAgdmFyIGxlbiA9IG1lcmdlZERhdGEubGVuZ3RoO1xuICAgICAgdmFyIGxhc3RJbmRleCA9IGxlbiAtIDE7IC8vIFdoZW4gZGF0YSBjb3VudCBjaGFuZ2UgdG8gMCwgcmVzZXQgdGhpcyBzaW5jZSBub3QgbG9vcCB3aWxsIHJlYWNoXG5cbiAgICAgIGlmICghbGVuKSB7XG4gICAgICAgIHVwZGF0ZURpc3BsYXlDb3VudCgwKTtcbiAgICAgICAgc2V0U3VmZml4Rml4ZWRTdGFydChudWxsKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICAgIHZhciBjdXJyZW50SXRlbVdpZHRoID0gZ2V0SXRlbVdpZHRoKGkpOyAvLyBCcmVhayBzaW5jZSBkYXRhIG5vdCByZWFkeVxuXG4gICAgICAgIGlmIChjdXJyZW50SXRlbVdpZHRoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB1cGRhdGVEaXNwbGF5Q291bnQoaSAtIDEsIHRydWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IC8vIEZpbmQgYmVzdCBtYXRjaFxuXG5cbiAgICAgICAgdG90YWxXaWR0aCArPSBjdXJyZW50SXRlbVdpZHRoO1xuXG4gICAgICAgIGlmICggLy8gT25seSBvbmUgbWVhbnMgYHRvdGFsV2lkdGhgIGlzIHRoZSBmaW5hbCB3aWR0aFxuICAgICAgICBsYXN0SW5kZXggPT09IDAgJiYgdG90YWxXaWR0aCA8PSBtZXJnZWRDb250YWluZXJXaWR0aCB8fCAvLyBMYXN0IHR3byB3aWR0aCB3aWxsIGJlIHRoZSBmaW5hbCB3aWR0aFxuICAgICAgICBpID09PSBsYXN0SW5kZXggLSAxICYmIHRvdGFsV2lkdGggKyBnZXRJdGVtV2lkdGgobGFzdEluZGV4KSA8PSBtZXJnZWRDb250YWluZXJXaWR0aCkge1xuICAgICAgICAgIC8vIEFkZGl0aW9uYWwgY2hlY2sgaWYgbWF0Y2ggdGhlIGVuZFxuICAgICAgICAgIHVwZGF0ZURpc3BsYXlDb3VudChsYXN0SW5kZXgpO1xuICAgICAgICAgIHNldFN1ZmZpeEZpeGVkU3RhcnQobnVsbCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSBpZiAodG90YWxXaWR0aCArIG1lcmdlZFJlc3RXaWR0aCA+IG1lcmdlZENvbnRhaW5lcldpZHRoKSB7XG4gICAgICAgICAgLy8gQ2FuIG5vdCBob2xkIGFsbCB0aGUgY29udGVudCB0byBzaG93IHJlc3RcbiAgICAgICAgICB1cGRhdGVEaXNwbGF5Q291bnQoaSAtIDEpO1xuICAgICAgICAgIHNldFN1ZmZpeEZpeGVkU3RhcnQodG90YWxXaWR0aCAtIGN1cnJlbnRJdGVtV2lkdGggLSBzdWZmaXhXaWR0aCArIHJlc3RXaWR0aCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHN1ZmZpeCAmJiBnZXRJdGVtV2lkdGgoMCkgKyBzdWZmaXhXaWR0aCA+IG1lcmdlZENvbnRhaW5lcldpZHRoKSB7XG4gICAgICAgIHNldFN1ZmZpeEZpeGVkU3RhcnQobnVsbCk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbbWVyZ2VkQ29udGFpbmVyV2lkdGgsIGl0ZW1XaWR0aHMsIHJlc3RXaWR0aCwgc3VmZml4V2lkdGgsIGdldEtleSwgbWVyZ2VkRGF0YV0pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBSZW5kZXIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgZGlzcGxheVJlc3QgPSByZXN0UmVhZHkgJiYgISFvbWl0dGVkSXRlbXMubGVuZ3RoO1xuICB2YXIgc3VmZml4U3R5bGUgPSB7fTtcblxuICBpZiAoc3VmZml4Rml4ZWRTdGFydCAhPT0gbnVsbCAmJiBpc1Jlc3BvbnNpdmUpIHtcbiAgICBzdWZmaXhTdHlsZSA9IHtcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgbGVmdDogc3VmZml4Rml4ZWRTdGFydCxcbiAgICAgIHRvcDogMFxuICAgIH07XG4gIH1cblxuICB2YXIgaXRlbVNoYXJlZFByb3BzID0ge1xuICAgIHByZWZpeENsczogaXRlbVByZWZpeENscyxcbiAgICByZXNwb25zaXZlOiBpc1Jlc3BvbnNpdmUsXG4gICAgY29tcG9uZW50OiBpdGVtQ29tcG9uZW50LFxuICAgIGludmFsaWRhdGU6IGludmFsaWRhdGVcbiAgfTsgLy8gPj4+Pj4gQ2hvaWNlIHJlbmRlciBmdW4gYnkgYHJlbmRlclJhd0l0ZW1gXG5cbiAgdmFyIGludGVybmFsUmVuZGVySXRlbU5vZGUgPSByZW5kZXJSYXdJdGVtID8gZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgdmFyIGtleSA9IGdldEtleShpdGVtLCBpbmRleCk7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE92ZXJmbG93Q29udGV4dC5Qcm92aWRlciwge1xuICAgICAga2V5OiBrZXksXG4gICAgICB2YWx1ZTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpdGVtU2hhcmVkUHJvcHMpLCB7fSwge1xuICAgICAgICBvcmRlcjogaW5kZXgsXG4gICAgICAgIGl0ZW06IGl0ZW0sXG4gICAgICAgIGl0ZW1LZXk6IGtleSxcbiAgICAgICAgcmVnaXN0ZXJTaXplOiByZWdpc3RlclNpemUsXG4gICAgICAgIGRpc3BsYXk6IGluZGV4IDw9IG1lcmdlZERpc3BsYXlDb3VudFxuICAgICAgfSlcbiAgICB9LCByZW5kZXJSYXdJdGVtKGl0ZW0sIGluZGV4KSk7XG4gIH0gOiBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICB2YXIga2V5ID0gZ2V0S2V5KGl0ZW0sIGluZGV4KTtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSXRlbSwgX2V4dGVuZHMoe30sIGl0ZW1TaGFyZWRQcm9wcywge1xuICAgICAgb3JkZXI6IGluZGV4LFxuICAgICAga2V5OiBrZXksXG4gICAgICBpdGVtOiBpdGVtLFxuICAgICAgcmVuZGVySXRlbTogbWVyZ2VkUmVuZGVySXRlbSxcbiAgICAgIGl0ZW1LZXk6IGtleSxcbiAgICAgIHJlZ2lzdGVyU2l6ZTogcmVnaXN0ZXJTaXplLFxuICAgICAgZGlzcGxheTogaW5kZXggPD0gbWVyZ2VkRGlzcGxheUNvdW50XG4gICAgfSkpO1xuICB9OyAvLyA+Pj4+PiBSZXN0IG5vZGVcblxuICB2YXIgcmVzdE5vZGU7XG4gIHZhciByZXN0Q29udGV4dFByb3BzID0ge1xuICAgIG9yZGVyOiBkaXNwbGF5UmVzdCA/IG1lcmdlZERpc3BsYXlDb3VudCA6IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLFxuICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQoaXRlbVByZWZpeENscywgXCItcmVzdFwiKSxcbiAgICByZWdpc3RlclNpemU6IHJlZ2lzdGVyT3ZlcmZsb3dTaXplLFxuICAgIGRpc3BsYXk6IGRpc3BsYXlSZXN0XG4gIH07XG5cbiAgaWYgKCFyZW5kZXJSYXdSZXN0KSB7XG4gICAgdmFyIG1lcmdlZFJlbmRlclJlc3QgPSByZW5kZXJSZXN0IHx8IGRlZmF1bHRSZW5kZXJSZXN0O1xuICAgIHJlc3ROb2RlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSXRlbSwgX2V4dGVuZHMoe30sIGl0ZW1TaGFyZWRQcm9wcywgcmVzdENvbnRleHRQcm9wcyksIHR5cGVvZiBtZXJnZWRSZW5kZXJSZXN0ID09PSAnZnVuY3Rpb24nID8gbWVyZ2VkUmVuZGVyUmVzdChvbWl0dGVkSXRlbXMpIDogbWVyZ2VkUmVuZGVyUmVzdCk7XG4gIH0gZWxzZSBpZiAocmVuZGVyUmF3UmVzdCkge1xuICAgIHJlc3ROb2RlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoT3ZlcmZsb3dDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICB2YWx1ZTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpdGVtU2hhcmVkUHJvcHMpLCByZXN0Q29udGV4dFByb3BzKVxuICAgIH0sIHJlbmRlclJhd1Jlc3Qob21pdHRlZEl0ZW1zKSk7XG4gIH1cblxuICB2YXIgb3ZlcmZsb3dOb2RlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCBfZXh0ZW5kcyh7XG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKCFpbnZhbGlkYXRlICYmIHByZWZpeENscywgY2xhc3NOYW1lKSxcbiAgICBzdHlsZTogc3R5bGUsXG4gICAgcmVmOiByZWZcbiAgfSwgcmVzdFByb3BzKSwgbWVyZ2VkRGF0YS5tYXAoaW50ZXJuYWxSZW5kZXJJdGVtTm9kZSksIHNob3dSZXN0ID8gcmVzdE5vZGUgOiBudWxsLCBzdWZmaXggJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSXRlbSwgX2V4dGVuZHMoe30sIGl0ZW1TaGFyZWRQcm9wcywge1xuICAgIG9yZGVyOiBtZXJnZWREaXNwbGF5Q291bnQsXG4gICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChpdGVtUHJlZml4Q2xzLCBcIi1zdWZmaXhcIiksXG4gICAgcmVnaXN0ZXJTaXplOiByZWdpc3RlclN1ZmZpeFNpemUsXG4gICAgZGlzcGxheTogdHJ1ZSxcbiAgICBzdHlsZTogc3VmZml4U3R5bGVcbiAgfSksIHN1ZmZpeCkpO1xuXG4gIGlmIChpc1Jlc3BvbnNpdmUpIHtcbiAgICBvdmVyZmxvd05vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZXNpemVPYnNlcnZlciwge1xuICAgICAgb25SZXNpemU6IG9uT3ZlcmZsb3dSZXNpemVcbiAgICB9LCBvdmVyZmxvd05vZGUpO1xuICB9XG5cbiAgcmV0dXJuIG92ZXJmbG93Tm9kZTtcbn1cblxudmFyIEZvcndhcmRPdmVyZmxvdyA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKE92ZXJmbG93KTtcbkZvcndhcmRPdmVyZmxvdy5kaXNwbGF5TmFtZSA9ICdPdmVyZmxvdyc7XG5Gb3J3YXJkT3ZlcmZsb3cuSXRlbSA9IFJhd0l0ZW07XG5Gb3J3YXJkT3ZlcmZsb3cuUkVTUE9OU0lWRSA9IFJFU1BPTlNJVkU7XG5Gb3J3YXJkT3ZlcmZsb3cuSU5WQUxJREFURSA9IElOVkFMSURBVEU7IC8vIENvbnZlcnQgdG8gZ2VuZXJpYyB0eXBlXG5cbmV4cG9ydCBkZWZhdWx0IEZvcndhcmRPdmVyZmxvdzsiLCJpbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gb21pdChvYmosIGZpZWxkcykge1xuICB2YXIgY2xvbmUgPSBfb2JqZWN0U3ByZWFkKHt9LCBvYmopO1xuXG4gIGlmIChBcnJheS5pc0FycmF5KGZpZWxkcykpIHtcbiAgICBmaWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBkZWxldGUgY2xvbmVba2V5XTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBjbG9uZTtcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VNZW1vKGdldFZhbHVlLCBjb25kaXRpb24sIHNob3VsZFVwZGF0ZSkge1xuICB2YXIgY2FjaGVSZWYgPSBSZWFjdC51c2VSZWYoe30pO1xuXG4gIGlmICghKCd2YWx1ZScgaW4gY2FjaGVSZWYuY3VycmVudCkgfHwgc2hvdWxkVXBkYXRlKGNhY2hlUmVmLmN1cnJlbnQuY29uZGl0aW9uLCBjb25kaXRpb24pKSB7XG4gICAgY2FjaGVSZWYuY3VycmVudC52YWx1ZSA9IGdldFZhbHVlKCk7XG4gICAgY2FjaGVSZWYuY3VycmVudC5jb25kaXRpb24gPSBjb25kaXRpb247XG4gIH1cblxuICByZXR1cm4gY2FjaGVSZWYuY3VycmVudC52YWx1ZTtcbn0iLCJpbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc1wiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1c2VNZW1vIGZyb20gXCJyYy11dGlsL2VzL2hvb2tzL3VzZU1lbW9cIjtcbmltcG9ydCBzaGFsbG93RXF1YWwgZnJvbSAnc2hhbGxvd2VxdWFsJztcbmV4cG9ydCB2YXIgTWVudUNvbnRleHQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlQ29udGV4dChudWxsKTtcblxuZnVuY3Rpb24gbWVyZ2VQcm9wcyhvcmlnaW4sIHRhcmdldCkge1xuICB2YXIgY2xvbmUgPSBfb2JqZWN0U3ByZWFkKHt9LCBvcmlnaW4pO1xuXG4gIE9iamVjdC5rZXlzKHRhcmdldCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIHZhbHVlID0gdGFyZ2V0W2tleV07XG5cbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2xvbmVba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBjbG9uZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSW5oZXJpdGFibGVDb250ZXh0UHJvdmlkZXIoX3JlZikge1xuICB2YXIgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuLFxuICAgICAgbG9ja2VkID0gX3JlZi5sb2NrZWQsXG4gICAgICByZXN0UHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgW1wiY2hpbGRyZW5cIiwgXCJsb2NrZWRcIl0pO1xuXG4gIHZhciBjb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChNZW51Q29udGV4dCk7XG4gIHZhciBpbmhlcml0YWJsZUNvbnRleHQgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbWVyZ2VQcm9wcyhjb250ZXh0LCByZXN0UHJvcHMpO1xuICB9LCBbY29udGV4dCwgcmVzdFByb3BzXSwgZnVuY3Rpb24gKHByZXYsIG5leHQpIHtcbiAgICByZXR1cm4gIWxvY2tlZCAmJiAocHJldlswXSAhPT0gbmV4dFswXSB8fCAhc2hhbGxvd0VxdWFsKHByZXZbMV0sIG5leHRbMV0pKTtcbiAgfSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChNZW51Q29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiBpbmhlcml0YWJsZUNvbnRleHRcbiAgfSwgY2hpbGRyZW4pO1xufSIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IE1lbnVDb250ZXh0IH0gZnJvbSAnLi4vY29udGV4dC9NZW51Q29udGV4dCc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VBY3RpdmUoZXZlbnRLZXksIGRpc2FibGVkLCBvbk1vdXNlRW50ZXIsIG9uTW91c2VMZWF2ZSkge1xuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KE1lbnVDb250ZXh0KSxcbiAgICAgIGFjdGl2ZUtleSA9IF9SZWFjdCR1c2VDb250ZXh0LmFjdGl2ZUtleSxcbiAgICAgIG9uQWN0aXZlID0gX1JlYWN0JHVzZUNvbnRleHQub25BY3RpdmUsXG4gICAgICBvbkluYWN0aXZlID0gX1JlYWN0JHVzZUNvbnRleHQub25JbmFjdGl2ZTtcblxuICB2YXIgcmV0ID0ge1xuICAgIGFjdGl2ZTogYWN0aXZlS2V5ID09PSBldmVudEtleVxuICB9OyAvLyBTa2lwIHdoZW4gZGlzYWJsZWRcblxuICBpZiAoIWRpc2FibGVkKSB7XG4gICAgcmV0Lm9uTW91c2VFbnRlciA9IGZ1bmN0aW9uIChkb21FdmVudCkge1xuICAgICAgb25Nb3VzZUVudGVyID09PSBudWxsIHx8IG9uTW91c2VFbnRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25Nb3VzZUVudGVyKHtcbiAgICAgICAga2V5OiBldmVudEtleSxcbiAgICAgICAgZG9tRXZlbnQ6IGRvbUV2ZW50XG4gICAgICB9KTtcbiAgICAgIG9uQWN0aXZlKGV2ZW50S2V5KTtcbiAgICB9O1xuXG4gICAgcmV0Lm9uTW91c2VMZWF2ZSA9IGZ1bmN0aW9uIChkb21FdmVudCkge1xuICAgICAgb25Nb3VzZUxlYXZlID09PSBudWxsIHx8IG9uTW91c2VMZWF2ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25Nb3VzZUxlYXZlKHtcbiAgICAgICAga2V5OiBldmVudEtleSxcbiAgICAgICAgZG9tRXZlbnQ6IGRvbUV2ZW50XG4gICAgICB9KTtcbiAgICAgIG9uSW5hY3RpdmUoZXZlbnRLZXkpO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gcmV0O1xufSIsImltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzXCI7XG5pbXBvcnQgd2FybmluZyBmcm9tIFwicmMtdXRpbC9lcy93YXJuaW5nXCI7XG4vKipcbiAqIGBvbkNsaWNrYCBldmVudCByZXR1cm4gYGluZm8uaXRlbWAgd2hpY2ggcG9pbnQgdG8gcmVhY3Qgbm9kZSBkaXJlY3RseS5cbiAqIFdlIHNob3VsZCB3YXJuaW5nIHRoaXMgc2luY2UgaXQgd2lsbCBub3Qgd29yayBvbiBGQy5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gd2Fybkl0ZW1Qcm9wKF9yZWYpIHtcbiAgdmFyIGl0ZW0gPSBfcmVmLml0ZW0sXG4gICAgICByZXN0SW5mbyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBbXCJpdGVtXCJdKTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVzdEluZm8sICdpdGVtJywge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgd2FybmluZyhmYWxzZSwgJ2BpbmZvLml0ZW1gIGlzIGRlcHJlY2F0ZWQgc2luY2Ugd2Ugd2lsbCBtb3ZlIHRvIGZ1bmN0aW9uIGNvbXBvbmVudCB0aGF0IG5vdCBwcm92aWRlcyBSZWFjdCBOb2RlIGluc3RhbmNlIGluIGZ1dHVyZS4nKTtcbiAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiByZXN0SW5mbztcbn0iLCJpbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSWNvbihfcmVmKSB7XG4gIHZhciBpY29uID0gX3JlZi5pY29uLFxuICAgICAgcHJvcHMgPSBfcmVmLnByb3BzLFxuICAgICAgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuO1xuICB2YXIgaWNvbk5vZGU7XG5cbiAgaWYgKHR5cGVvZiBpY29uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgaWNvbk5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChpY29uLCBfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcykpO1xuICB9IGVsc2Uge1xuICAgIC8vIENvbXBhdGlibGUgZm9yIG9yaWdpbiBkZWZpbml0aW9uXG4gICAgaWNvbk5vZGUgPSBpY29uO1xuICB9XG5cbiAgcmV0dXJuIGljb25Ob2RlIHx8IGNoaWxkcmVuIHx8IG51bGw7XG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgTWVudUNvbnRleHQgfSBmcm9tICcuLi9jb250ZXh0L01lbnVDb250ZXh0JztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZURpcmVjdGlvblN0eWxlKGxldmVsKSB7XG4gIHZhciBfUmVhY3QkdXNlQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoTWVudUNvbnRleHQpLFxuICAgICAgbW9kZSA9IF9SZWFjdCR1c2VDb250ZXh0Lm1vZGUsXG4gICAgICBydGwgPSBfUmVhY3QkdXNlQ29udGV4dC5ydGwsXG4gICAgICBpbmxpbmVJbmRlbnQgPSBfUmVhY3QkdXNlQ29udGV4dC5pbmxpbmVJbmRlbnQ7XG5cbiAgaWYgKG1vZGUgIT09ICdpbmxpbmUnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgbGVuID0gbGV2ZWw7XG4gIHJldHVybiBydGwgPyB7XG4gICAgcGFkZGluZ1JpZ2h0OiBsZW4gKiBpbmxpbmVJbmRlbnRcbiAgfSA6IHtcbiAgICBwYWRkaW5nTGVmdDogbGVuICogaW5saW5lSW5kZW50XG4gIH07XG59IiwiaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbnZhciBFbXB0eUxpc3QgPSBbXTtcbmV4cG9ydCB2YXIgUGF0aFJlZ2lzdGVyQ29udGV4dCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVDb250ZXh0KG51bGwpO1xuZXhwb3J0IGZ1bmN0aW9uIHVzZU1lYXN1cmUoKSB7XG4gIHJldHVybiBSZWFjdC51c2VDb250ZXh0KFBhdGhSZWdpc3RlckNvbnRleHQpO1xufSAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09IFBhdGggVHJhY2tlciA9PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgdmFyIFBhdGhUcmFja2VyQ29udGV4dCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVDb250ZXh0KEVtcHR5TGlzdCk7XG5leHBvcnQgZnVuY3Rpb24gdXNlRnVsbFBhdGgoZXZlbnRLZXkpIHtcbiAgdmFyIHBhcmVudEtleVBhdGggPSBSZWFjdC51c2VDb250ZXh0KFBhdGhUcmFja2VyQ29udGV4dCk7XG4gIHJldHVybiBSZWFjdC51c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZXZlbnRLZXkgIT09IHVuZGVmaW5lZCA/IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocGFyZW50S2V5UGF0aCksIFtldmVudEtleV0pIDogcGFyZW50S2V5UGF0aDtcbiAgfSwgW3BhcmVudEtleVBhdGgsIGV2ZW50S2V5XSk7XG59XG5leHBvcnQgdmFyIFBhdGhVc2VyQ29udGV4dCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVDb250ZXh0KG51bGwpOyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmV4cG9ydCB2YXIgSWRDb250ZXh0ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUNvbnRleHQobnVsbCk7XG5leHBvcnQgZnVuY3Rpb24gZ2V0TWVudUlkKHV1aWQsIGV2ZW50S2V5KSB7XG4gIGlmICh1dWlkID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBcIlwiLmNvbmNhdCh1dWlkLCBcIi1cIikuY29uY2F0KGV2ZW50S2V5KTtcbn1cbi8qKlxuICogR2V0IGBkYXRhLW1lbnUtaWRgXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZU1lbnVJZChldmVudEtleSkge1xuICB2YXIgaWQgPSBSZWFjdC51c2VDb250ZXh0KElkQ29udGV4dCk7XG4gIHJldHVybiBnZXRNZW51SWQoaWQsIGV2ZW50S2V5KTtcbn0iLCJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5XCI7XG5pbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzXCI7XG5pbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVja1wiO1xuaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3NcIjtcbmltcG9ydCBfaW5oZXJpdHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzXCI7XG5pbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlclwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgT3ZlcmZsb3cgZnJvbSAncmMtb3ZlcmZsb3cnO1xuaW1wb3J0IHdhcm5pbmcgZnJvbSBcInJjLXV0aWwvZXMvd2FybmluZ1wiO1xuaW1wb3J0IEtleUNvZGUgZnJvbSBcInJjLXV0aWwvZXMvS2V5Q29kZVwiO1xuaW1wb3J0IG9taXQgZnJvbSBcInJjLXV0aWwvZXMvb21pdFwiO1xuaW1wb3J0IHsgTWVudUNvbnRleHQgfSBmcm9tICcuL2NvbnRleHQvTWVudUNvbnRleHQnO1xuaW1wb3J0IHVzZUFjdGl2ZSBmcm9tICcuL2hvb2tzL3VzZUFjdGl2ZSc7XG5pbXBvcnQgeyB3YXJuSXRlbVByb3AgfSBmcm9tICcuL3V0aWxzL3dhcm5VdGlsJztcbmltcG9ydCBJY29uIGZyb20gJy4vSWNvbic7XG5pbXBvcnQgdXNlRGlyZWN0aW9uU3R5bGUgZnJvbSAnLi9ob29rcy91c2VEaXJlY3Rpb25TdHlsZSc7XG5pbXBvcnQgeyB1c2VGdWxsUGF0aCwgdXNlTWVhc3VyZSB9IGZyb20gJy4vY29udGV4dC9QYXRoQ29udGV4dCc7XG5pbXBvcnQgeyB1c2VNZW51SWQgfSBmcm9tICcuL2NvbnRleHQvSWRDb250ZXh0JzsgLy8gU2luY2UgTWVudSBldmVudCBwcm92aWRlIHRoZSBgaW5mby5pdGVtYCB3aGljaCBwb2ludCB0byB0aGUgTWVudUl0ZW0gbm9kZSBpbnN0YW5jZS5cbi8vIFdlIGhhdmUgdG8gdXNlIGNsYXNzIGNvbXBvbmVudCBoZXJlLlxuLy8gVGhpcyBzaG91bGQgYmUgcmVtb3ZlZCBmcm9tIGRvYyAmIGFwaSBpbiBmdXR1cmUuXG5cbnZhciBMZWdhY3lNZW51SXRlbSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoTGVnYWN5TWVudUl0ZW0sIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoTGVnYWN5TWVudUl0ZW0pO1xuXG4gIGZ1bmN0aW9uIExlZ2FjeU1lbnVJdGVtKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMZWdhY3lNZW51SXRlbSk7XG5cbiAgICByZXR1cm4gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTGVnYWN5TWVudUl0ZW0sIFt7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIHRpdGxlID0gX3RoaXMkcHJvcHMudGl0bGUsXG4gICAgICAgICAgYXR0cmlidXRlID0gX3RoaXMkcHJvcHMuYXR0cmlidXRlLFxuICAgICAgICAgIGVsZW1lbnRSZWYgPSBfdGhpcyRwcm9wcy5lbGVtZW50UmVmLFxuICAgICAgICAgIHJlc3RQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfdGhpcyRwcm9wcywgW1widGl0bGVcIiwgXCJhdHRyaWJ1dGVcIiwgXCJlbGVtZW50UmVmXCJdKTtcblxuICAgICAgdmFyIHBhc3NlZFByb3BzID0gb21pdChyZXN0UHJvcHMsIFsnZXZlbnRLZXknXSk7XG4gICAgICB3YXJuaW5nKCFhdHRyaWJ1dGUsICdgYXR0cmlidXRlYCBvZiBNZW51Lkl0ZW0gaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHBhc3MgYXR0cmlidXRlIGRpcmVjdGx5LicpO1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE92ZXJmbG93Lkl0ZW0sIF9leHRlbmRzKHt9LCBhdHRyaWJ1dGUsIHtcbiAgICAgICAgdGl0bGU6IHR5cGVvZiB0aXRsZSA9PT0gJ3N0cmluZycgPyB0aXRsZSA6IHVuZGVmaW5lZFxuICAgICAgfSwgcGFzc2VkUHJvcHMsIHtcbiAgICAgICAgcmVmOiBlbGVtZW50UmVmXG4gICAgICB9KSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIExlZ2FjeU1lbnVJdGVtO1xufShSZWFjdC5Db21wb25lbnQpO1xuLyoqXG4gKiBSZWFsIE1lbnUgSXRlbSBjb21wb25lbnRcbiAqL1xuXG5cbnZhciBJbnRlcm5hbE1lbnVJdGVtID0gZnVuY3Rpb24gSW50ZXJuYWxNZW51SXRlbShwcm9wcykge1xuICB2YXIgX2NsYXNzTmFtZXM7XG5cbiAgdmFyIHN0eWxlID0gcHJvcHMuc3R5bGUsXG4gICAgICBjbGFzc05hbWUgPSBwcm9wcy5jbGFzc05hbWUsXG4gICAgICBldmVudEtleSA9IHByb3BzLmV2ZW50S2V5LFxuICAgICAgd2FybktleSA9IHByb3BzLndhcm5LZXksXG4gICAgICBkaXNhYmxlZCA9IHByb3BzLmRpc2FibGVkLFxuICAgICAgaXRlbUljb24gPSBwcm9wcy5pdGVtSWNvbixcbiAgICAgIGNoaWxkcmVuID0gcHJvcHMuY2hpbGRyZW4sXG4gICAgICByb2xlID0gcHJvcHMucm9sZSxcbiAgICAgIG9uTW91c2VFbnRlciA9IHByb3BzLm9uTW91c2VFbnRlcixcbiAgICAgIG9uTW91c2VMZWF2ZSA9IHByb3BzLm9uTW91c2VMZWF2ZSxcbiAgICAgIG9uQ2xpY2sgPSBwcm9wcy5vbkNsaWNrLFxuICAgICAgb25LZXlEb3duID0gcHJvcHMub25LZXlEb3duLFxuICAgICAgb25Gb2N1cyA9IHByb3BzLm9uRm9jdXMsXG4gICAgICByZXN0UHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMocHJvcHMsIFtcInN0eWxlXCIsIFwiY2xhc3NOYW1lXCIsIFwiZXZlbnRLZXlcIiwgXCJ3YXJuS2V5XCIsIFwiZGlzYWJsZWRcIiwgXCJpdGVtSWNvblwiLCBcImNoaWxkcmVuXCIsIFwicm9sZVwiLCBcIm9uTW91c2VFbnRlclwiLCBcIm9uTW91c2VMZWF2ZVwiLCBcIm9uQ2xpY2tcIiwgXCJvbktleURvd25cIiwgXCJvbkZvY3VzXCJdKTtcblxuICB2YXIgZG9tRGF0YUlkID0gdXNlTWVudUlkKGV2ZW50S2V5KTtcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KE1lbnVDb250ZXh0KSxcbiAgICAgIHByZWZpeENscyA9IF9SZWFjdCR1c2VDb250ZXh0LnByZWZpeENscyxcbiAgICAgIG9uSXRlbUNsaWNrID0gX1JlYWN0JHVzZUNvbnRleHQub25JdGVtQ2xpY2ssXG4gICAgICBjb250ZXh0RGlzYWJsZWQgPSBfUmVhY3QkdXNlQ29udGV4dC5kaXNhYmxlZCxcbiAgICAgIG92ZXJmbG93RGlzYWJsZWQgPSBfUmVhY3QkdXNlQ29udGV4dC5vdmVyZmxvd0Rpc2FibGVkLFxuICAgICAgY29udGV4dEl0ZW1JY29uID0gX1JlYWN0JHVzZUNvbnRleHQuaXRlbUljb24sXG4gICAgICBzZWxlY3RlZEtleXMgPSBfUmVhY3QkdXNlQ29udGV4dC5zZWxlY3RlZEtleXMsXG4gICAgICBvbkFjdGl2ZSA9IF9SZWFjdCR1c2VDb250ZXh0Lm9uQWN0aXZlO1xuXG4gIHZhciBpdGVtQ2xzID0gXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1pdGVtXCIpO1xuICB2YXIgbGVnYWN5TWVudUl0ZW1SZWYgPSBSZWFjdC51c2VSZWYoKTtcbiAgdmFyIGVsZW1lbnRSZWYgPSBSZWFjdC51c2VSZWYoKTtcbiAgdmFyIG1lcmdlZERpc2FibGVkID0gY29udGV4dERpc2FibGVkIHx8IGRpc2FibGVkO1xuICB2YXIgY29ubmVjdGVkS2V5cyA9IHVzZUZ1bGxQYXRoKGV2ZW50S2V5KTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gV2FybiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm5LZXkpIHtcbiAgICB3YXJuaW5nKGZhbHNlLCAnTWVudUl0ZW0gc2hvdWxkIG5vdCBsZWF2ZSB1bmRlZmluZWQgYGtleWAuJyk7XG4gIH0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gSW5mbyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdmFyIGdldEV2ZW50SW5mbyA9IGZ1bmN0aW9uIGdldEV2ZW50SW5mbyhlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtleTogZXZlbnRLZXksXG4gICAgICAvLyBOb3RlOiBGb3IgbGVnYWN5IGNvZGUgaXMgcmV2ZXJzZWQgd2hpY2ggbm90IGxpa2Ugb3RoZXIgYW50ZCBjb21wb25lbnRcbiAgICAgIGtleVBhdGg6IF90b0NvbnN1bWFibGVBcnJheShjb25uZWN0ZWRLZXlzKS5yZXZlcnNlKCksXG4gICAgICBpdGVtOiBsZWdhY3lNZW51SXRlbVJlZi5jdXJyZW50LFxuICAgICAgZG9tRXZlbnQ6IGVcbiAgICB9O1xuICB9OyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBJY29uID09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB2YXIgbWVyZ2VkSXRlbUljb24gPSBpdGVtSWNvbiB8fCBjb250ZXh0SXRlbUljb247IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQWN0aXZlID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgX3VzZUFjdGl2ZSA9IHVzZUFjdGl2ZShldmVudEtleSwgbWVyZ2VkRGlzYWJsZWQsIG9uTW91c2VFbnRlciwgb25Nb3VzZUxlYXZlKSxcbiAgICAgIGFjdGl2ZSA9IF91c2VBY3RpdmUuYWN0aXZlLFxuICAgICAgYWN0aXZlUHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3VzZUFjdGl2ZSwgW1wiYWN0aXZlXCJdKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBTZWxlY3QgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdmFyIHNlbGVjdGVkID0gc2VsZWN0ZWRLZXlzLmluY2x1ZGVzKGV2ZW50S2V5KTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09IERpcmVjdGlvblN0eWxlID09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBkaXJlY3Rpb25TdHlsZSA9IHVzZURpcmVjdGlvblN0eWxlKGNvbm5lY3RlZEtleXMubGVuZ3RoKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBFdmVudHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBvbkludGVybmFsQ2xpY2sgPSBmdW5jdGlvbiBvbkludGVybmFsQ2xpY2soZSkge1xuICAgIGlmIChtZXJnZWREaXNhYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBpbmZvID0gZ2V0RXZlbnRJbmZvKGUpO1xuICAgIG9uQ2xpY2sgPT09IG51bGwgfHwgb25DbGljayA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25DbGljayh3YXJuSXRlbVByb3AoaW5mbykpO1xuICAgIG9uSXRlbUNsaWNrKGluZm8pO1xuICB9O1xuXG4gIHZhciBvbkludGVybmFsS2V5RG93biA9IGZ1bmN0aW9uIG9uSW50ZXJuYWxLZXlEb3duKGUpIHtcbiAgICBvbktleURvd24gPT09IG51bGwgfHwgb25LZXlEb3duID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbktleURvd24oZSk7XG5cbiAgICBpZiAoZS53aGljaCA9PT0gS2V5Q29kZS5FTlRFUikge1xuICAgICAgdmFyIGluZm8gPSBnZXRFdmVudEluZm8oZSk7IC8vIExlZ2FjeS4gS2V5IHdpbGwgYWxzbyB0cmlnZ2VyIGNsaWNrIGV2ZW50XG5cbiAgICAgIG9uQ2xpY2sgPT09IG51bGwgfHwgb25DbGljayA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25DbGljayh3YXJuSXRlbVByb3AoaW5mbykpO1xuICAgICAgb25JdGVtQ2xpY2soaW5mbyk7XG4gICAgfVxuICB9O1xuICAvKipcbiAgICogVXNlZCBmb3IgYWNjZXNzaWJpbGl0eS4gSGVscGVyIHdpbGwgZm9jdXMgZWxlbWVudCB3aXRob3V0IGtleSBib2FyZC5cbiAgICogV2Ugc2hvdWxkIG1hbnVhbGx5IHRyaWdnZXIgYW4gYWN0aXZlXG4gICAqL1xuXG5cbiAgdmFyIG9uSW50ZXJuYWxGb2N1cyA9IGZ1bmN0aW9uIG9uSW50ZXJuYWxGb2N1cyhlKSB7XG4gICAgb25BY3RpdmUoZXZlbnRLZXkpO1xuICAgIG9uRm9jdXMgPT09IG51bGwgfHwgb25Gb2N1cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25Gb2N1cyhlKTtcbiAgfTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBSZW5kZXIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdmFyIG9wdGlvblJvbGVQcm9wcyA9IHt9O1xuXG4gIGlmIChwcm9wcy5yb2xlID09PSAnb3B0aW9uJykge1xuICAgIG9wdGlvblJvbGVQcm9wc1snYXJpYS1zZWxlY3RlZCddID0gc2VsZWN0ZWQ7XG4gIH1cblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTGVnYWN5TWVudUl0ZW0sIF9leHRlbmRzKHtcbiAgICByZWY6IGxlZ2FjeU1lbnVJdGVtUmVmLFxuICAgIGVsZW1lbnRSZWY6IGVsZW1lbnRSZWYsXG4gICAgcm9sZTogcm9sZSA9PT0gbnVsbCA/ICdub25lJyA6IHJvbGUgfHwgJ21lbnVpdGVtJyxcbiAgICB0YWJJbmRleDogZGlzYWJsZWQgPyBudWxsIDogLTEsXG4gICAgXCJkYXRhLW1lbnUtaWRcIjogb3ZlcmZsb3dEaXNhYmxlZCAmJiBkb21EYXRhSWQgPyBudWxsIDogZG9tRGF0YUlkXG4gIH0sIHJlc3RQcm9wcywgYWN0aXZlUHJvcHMsIG9wdGlvblJvbGVQcm9wcywge1xuICAgIGNvbXBvbmVudDogXCJsaVwiLFxuICAgIFwiYXJpYS1kaXNhYmxlZFwiOiBkaXNhYmxlZCxcbiAgICBzdHlsZTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkaXJlY3Rpb25TdHlsZSksIHN0eWxlKSxcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoaXRlbUNscywgKF9jbGFzc05hbWVzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQoaXRlbUNscywgXCItYWN0aXZlXCIpLCBhY3RpdmUpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KGl0ZW1DbHMsIFwiLXNlbGVjdGVkXCIpLCBzZWxlY3RlZCksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQoaXRlbUNscywgXCItZGlzYWJsZWRcIiksIG1lcmdlZERpc2FibGVkKSwgX2NsYXNzTmFtZXMpLCBjbGFzc05hbWUpLFxuICAgIG9uQ2xpY2s6IG9uSW50ZXJuYWxDbGljayxcbiAgICBvbktleURvd246IG9uSW50ZXJuYWxLZXlEb3duLFxuICAgIG9uRm9jdXM6IG9uSW50ZXJuYWxGb2N1c1xuICB9KSwgY2hpbGRyZW4sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEljb24sIHtcbiAgICBwcm9wczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcyksIHt9LCB7XG4gICAgICBpc1NlbGVjdGVkOiBzZWxlY3RlZFxuICAgIH0pLFxuICAgIGljb246IG1lcmdlZEl0ZW1JY29uXG4gIH0pKTtcbn07XG5cbmZ1bmN0aW9uIE1lbnVJdGVtKHByb3BzKSB7XG4gIHZhciBldmVudEtleSA9IHByb3BzLmV2ZW50S2V5OyAvLyA9PT09PT09PT09PT09PT09PT09PSBSZWNvcmQgS2V5UGF0aCA9PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBtZWFzdXJlID0gdXNlTWVhc3VyZSgpO1xuICB2YXIgY29ubmVjdGVkS2V5UGF0aCA9IHVzZUZ1bGxQYXRoKGV2ZW50S2V5KTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG5cbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAobWVhc3VyZSkge1xuICAgICAgbWVhc3VyZS5yZWdpc3RlclBhdGgoZXZlbnRLZXksIGNvbm5lY3RlZEtleVBhdGgpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbWVhc3VyZS51bnJlZ2lzdGVyUGF0aChldmVudEtleSwgY29ubmVjdGVkS2V5UGF0aCk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW2Nvbm5lY3RlZEtleVBhdGhdKTtcblxuICBpZiAobWVhc3VyZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9IC8vID09PT09PT09PT09PT09PT09PT09PT09PSBSZW5kZXIgPT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSW50ZXJuYWxNZW51SXRlbSwgcHJvcHMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBNZW51SXRlbTsiLCJpbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheVwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHRvQXJyYXkgZnJvbSBcInJjLXV0aWwvZXMvQ2hpbGRyZW4vdG9BcnJheVwiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ2hpbGRyZW4oY2hpbGRyZW4sIGtleVBhdGgpIHtcbiAgcmV0dXJuIHRvQXJyYXkoY2hpbGRyZW4pLm1hcChmdW5jdGlvbiAoY2hpbGQsIGluZGV4KSB7XG4gICAgaWYgKCAvKiNfX1BVUkVfXyovUmVhY3QuaXNWYWxpZEVsZW1lbnQoY2hpbGQpKSB7XG4gICAgICB2YXIgX2NoaWxkJHByb3BzJGV2ZW50S2V5LCBfY2hpbGQkcHJvcHM7XG5cbiAgICAgIHZhciBrZXkgPSBjaGlsZC5rZXk7XG4gICAgICB2YXIgZXZlbnRLZXkgPSAoX2NoaWxkJHByb3BzJGV2ZW50S2V5ID0gKF9jaGlsZCRwcm9wcyA9IGNoaWxkLnByb3BzKSA9PT0gbnVsbCB8fCBfY2hpbGQkcHJvcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaGlsZCRwcm9wcy5ldmVudEtleSkgIT09IG51bGwgJiYgX2NoaWxkJHByb3BzJGV2ZW50S2V5ICE9PSB2b2lkIDAgPyBfY2hpbGQkcHJvcHMkZXZlbnRLZXkgOiBrZXk7XG4gICAgICB2YXIgZW1wdHlLZXkgPSBldmVudEtleSA9PT0gbnVsbCB8fCBldmVudEtleSA9PT0gdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoZW1wdHlLZXkpIHtcbiAgICAgICAgZXZlbnRLZXkgPSBcInRtcF9rZXktXCIuY29uY2F0KFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoa2V5UGF0aCksIFtpbmRleF0pLmpvaW4oJy0nKSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBjbG9uZVByb3BzID0ge1xuICAgICAgICBrZXk6IGV2ZW50S2V5LFxuICAgICAgICBldmVudEtleTogZXZlbnRLZXlcbiAgICAgIH07XG5cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGVtcHR5S2V5KSB7XG4gICAgICAgIGNsb25lUHJvcHMud2FybktleSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY2xvbmVFbGVtZW50KGNoaWxkLCBjbG9uZVByb3BzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2hpbGQ7XG4gIH0pO1xufSIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0Jztcbi8qKlxuICogQ2FjaGUgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBhbHdheXMgcmV0dXJuIHNhbWUgcmVmIGluc3RlYWQuXG4gKiBUaGlzIGlzIHVzZWQgZm9yIGNvbnRleHQgb3B0aW1pemF0aW9uLlxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZU1lbW9DYWxsYmFjayhmdW5jKSB7XG4gIHZhciBmdW5SZWYgPSBSZWFjdC51c2VSZWYoZnVuYyk7XG4gIGZ1blJlZi5jdXJyZW50ID0gZnVuYztcbiAgdmFyIGNhbGxiYWNrID0gUmVhY3QudXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIHZhciBfZnVuUmVmJGN1cnJlbnQ7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIChfZnVuUmVmJGN1cnJlbnQgPSBmdW5SZWYuY3VycmVudCkgPT09IG51bGwgfHwgX2Z1blJlZiRjdXJyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZnVuUmVmJGN1cnJlbnQuY2FsbC5hcHBseShfZnVuUmVmJGN1cnJlbnQsIFtmdW5SZWZdLmNvbmNhdChhcmdzKSk7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIGZ1bmMgPyBjYWxsYmFjayA6IHVuZGVmaW5lZDtcbn0iLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7IE1lbnVDb250ZXh0IH0gZnJvbSAnLi4vY29udGV4dC9NZW51Q29udGV4dCc7XG5cbnZhciBJbnRlcm5hbFN1Yk1lbnVMaXN0ID0gZnVuY3Rpb24gSW50ZXJuYWxTdWJNZW51TGlzdChfcmVmLCByZWYpIHtcbiAgdmFyIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuLFxuICAgICAgcmVzdFByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIFtcImNsYXNzTmFtZVwiLCBcImNoaWxkcmVuXCJdKTtcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KE1lbnVDb250ZXh0KSxcbiAgICAgIHByZWZpeENscyA9IF9SZWFjdCR1c2VDb250ZXh0LnByZWZpeENscyxcbiAgICAgIG1vZGUgPSBfUmVhY3QkdXNlQ29udGV4dC5tb2RlO1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInVsXCIsIF9leHRlbmRzKHtcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMocHJlZml4Q2xzLCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXN1YlwiKSwgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1cIikuY29uY2F0KG1vZGUgPT09ICdpbmxpbmUnID8gJ2lubGluZScgOiAndmVydGljYWwnKSwgY2xhc3NOYW1lKVxuICB9LCByZXN0UHJvcHMsIHtcbiAgICBcImRhdGEtbWVudS1saXN0XCI6IHRydWUsXG4gICAgcmVmOiByZWZcbiAgfSksIGNoaWxkcmVuKTtcbn07XG5cbnZhciBTdWJNZW51TGlzdCA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKEludGVybmFsU3ViTWVudUxpc3QpO1xuU3ViTWVudUxpc3QuZGlzcGxheU5hbWUgPSAnU3ViTWVudUxpc3QnO1xuZXhwb3J0IGRlZmF1bHQgU3ViTWVudUxpc3Q7IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29udGFpbnMocm9vdCwgbikge1xuICBpZiAoIXJvb3QpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gcm9vdC5jb250YWlucyhuKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjYW5Vc2VEb20oKSB7XG4gIHJldHVybiAhISh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZG9jdW1lbnQgJiYgd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpO1xufSIsImltcG9ydCB7IHVzZVJlZiwgdXNlRWZmZWN0LCBmb3J3YXJkUmVmLCB1c2VJbXBlcmF0aXZlSGFuZGxlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgY2FuVXNlRG9tIGZyb20gJy4vRG9tL2NhblVzZURvbSc7XG52YXIgUG9ydGFsID0gLyojX19QVVJFX18qL2ZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgdmFyIGRpZFVwZGF0ZSA9IHByb3BzLmRpZFVwZGF0ZSxcbiAgICAgIGdldENvbnRhaW5lciA9IHByb3BzLmdldENvbnRhaW5lcixcbiAgICAgIGNoaWxkcmVuID0gcHJvcHMuY2hpbGRyZW47XG4gIHZhciBjb250YWluZXJSZWYgPSB1c2VSZWYoKTsgLy8gUmVmIHJldHVybiBub3RoaW5nLCBvbmx5IGZvciB3cmFwcGVyIGNoZWNrIGV4aXN0XG5cbiAgdXNlSW1wZXJhdGl2ZUhhbmRsZShyZWYsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge307XG4gIH0pOyAvLyBDcmVhdGUgY29udGFpbmVyIGluIGNsaWVudCBzaWRlIHdpdGggc3luYyB0byBhdm9pZCB1c2VFZmZlY3Qgbm90IGdldCByZWZcblxuICB2YXIgaW5pdFJlZiA9IHVzZVJlZihmYWxzZSk7XG5cbiAgaWYgKCFpbml0UmVmLmN1cnJlbnQgJiYgY2FuVXNlRG9tKCkpIHtcbiAgICBjb250YWluZXJSZWYuY3VycmVudCA9IGdldENvbnRhaW5lcigpO1xuICAgIGluaXRSZWYuY3VycmVudCA9IHRydWU7XG4gIH0gLy8gW0xlZ2FjeV0gVXNlZCBieSBgcmMtdHJpZ2dlcmBcblxuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgZGlkVXBkYXRlID09PSBudWxsIHx8IGRpZFVwZGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGlkVXBkYXRlKHByb3BzKTtcbiAgfSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfY29udGFpbmVyUmVmJGN1cnJlbnQsIF9jb250YWluZXJSZWYkY3VycmVudDI7XG5cbiAgICAgIC8vIFtMZWdhY3ldIFRoaXMgc2hvdWxkIG5vdCBiZSBoYW5kbGUgYnkgUG9ydGFsIGJ1dCBwYXJlbnQgUG9ydGFsV3JhcHBlciBpbnN0ZWFkLlxuICAgICAgLy8gU2luY2Ugc29tZSBjb21wb25lbnQgdXNlIGBQb3J0YWxgIGRpcmVjdGx5LCB3ZSBoYXZlIHRvIGtlZXAgdGhlIGxvZ2ljIGhlcmUuXG4gICAgICAoX2NvbnRhaW5lclJlZiRjdXJyZW50ID0gY29udGFpbmVyUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF9jb250YWluZXJSZWYkY3VycmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9jb250YWluZXJSZWYkY3VycmVudDIgPSBfY29udGFpbmVyUmVmJGN1cnJlbnQucGFyZW50Tm9kZSkgPT09IG51bGwgfHwgX2NvbnRhaW5lclJlZiRjdXJyZW50MiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NvbnRhaW5lclJlZiRjdXJyZW50Mi5yZW1vdmVDaGlsZChjb250YWluZXJSZWYuY3VycmVudCk7XG4gICAgfTtcbiAgfSwgW10pO1xuICByZXR1cm4gY29udGFpbmVyUmVmLmN1cnJlbnQgPyAvKiNfX1BVUkVfXyovUmVhY3RET00uY3JlYXRlUG9ydGFsKGNoaWxkcmVuLCBjb250YWluZXJSZWYuY3VycmVudCkgOiBudWxsO1xufSk7XG5leHBvcnQgZGVmYXVsdCBQb3J0YWw7IiwiaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcblxuZnVuY3Rpb24gaXNQb2ludHNFcShhMSwgYTIsIGlzQWxpZ25Qb2ludCkge1xuICBpZiAoaXNBbGlnblBvaW50KSB7XG4gICAgcmV0dXJuIGExWzBdID09PSBhMlswXTtcbiAgfVxuXG4gIHJldHVybiBhMVswXSA9PT0gYTJbMF0gJiYgYTFbMV0gPT09IGEyWzFdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxpZ25Gcm9tUGxhY2VtZW50KGJ1aWx0aW5QbGFjZW1lbnRzLCBwbGFjZW1lbnRTdHIsIGFsaWduKSB7XG4gIHZhciBiYXNlQWxpZ24gPSBidWlsdGluUGxhY2VtZW50c1twbGFjZW1lbnRTdHJdIHx8IHt9O1xuICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBiYXNlQWxpZ24pLCBhbGlnbik7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxpZ25Qb3B1cENsYXNzTmFtZShidWlsdGluUGxhY2VtZW50cywgcHJlZml4Q2xzLCBhbGlnbiwgaXNBbGlnblBvaW50KSB7XG4gIHZhciBwb2ludHMgPSBhbGlnbi5wb2ludHM7XG4gIHZhciBwbGFjZW1lbnRzID0gT2JqZWN0LmtleXMoYnVpbHRpblBsYWNlbWVudHMpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGxhY2VtZW50cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIHZhciBwbGFjZW1lbnQgPSBwbGFjZW1lbnRzW2ldO1xuXG4gICAgaWYgKGlzUG9pbnRzRXEoYnVpbHRpblBsYWNlbWVudHNbcGxhY2VtZW50XS5wb2ludHMsIHBvaW50cywgaXNBbGlnblBvaW50KSkge1xuICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItcGxhY2VtZW50LVwiKS5jb25jYXQocGxhY2VtZW50KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gJyc7XG59IiwiaW1wb3J0IF90eXBlb2YgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZlwiO1xuaW1wb3J0IGNhblVzZURPTSBmcm9tIFwicmMtdXRpbC9lcy9Eb20vY2FuVXNlRG9tXCI7IC8vID09PT09PT09PT09PT09PT09IFRyYW5zaXRpb24gPT09PT09PT09PT09PT09PT1cbi8vIEV2ZW50IHdyYXBwZXIuIENvcHkgZnJvbSByZWFjdCBzb3VyY2UgY29kZVxuXG5mdW5jdGlvbiBtYWtlUHJlZml4TWFwKHN0eWxlUHJvcCwgZXZlbnROYW1lKSB7XG4gIHZhciBwcmVmaXhlcyA9IHt9O1xuICBwcmVmaXhlc1tzdHlsZVByb3AudG9Mb3dlckNhc2UoKV0gPSBldmVudE5hbWUudG9Mb3dlckNhc2UoKTtcbiAgcHJlZml4ZXNbXCJXZWJraXRcIi5jb25jYXQoc3R5bGVQcm9wKV0gPSBcIndlYmtpdFwiLmNvbmNhdChldmVudE5hbWUpO1xuICBwcmVmaXhlc1tcIk1velwiLmNvbmNhdChzdHlsZVByb3ApXSA9IFwibW96XCIuY29uY2F0KGV2ZW50TmFtZSk7XG4gIHByZWZpeGVzW1wibXNcIi5jb25jYXQoc3R5bGVQcm9wKV0gPSBcIk1TXCIuY29uY2F0KGV2ZW50TmFtZSk7XG4gIHByZWZpeGVzW1wiT1wiLmNvbmNhdChzdHlsZVByb3ApXSA9IFwib1wiLmNvbmNhdChldmVudE5hbWUudG9Mb3dlckNhc2UoKSk7XG4gIHJldHVybiBwcmVmaXhlcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFZlbmRvclByZWZpeGVzKGRvbVN1cHBvcnQsIHdpbikge1xuICB2YXIgcHJlZml4ZXMgPSB7XG4gICAgYW5pbWF0aW9uZW5kOiBtYWtlUHJlZml4TWFwKCdBbmltYXRpb24nLCAnQW5pbWF0aW9uRW5kJyksXG4gICAgdHJhbnNpdGlvbmVuZDogbWFrZVByZWZpeE1hcCgnVHJhbnNpdGlvbicsICdUcmFuc2l0aW9uRW5kJylcbiAgfTtcblxuICBpZiAoZG9tU3VwcG9ydCkge1xuICAgIGlmICghKCdBbmltYXRpb25FdmVudCcgaW4gd2luKSkge1xuICAgICAgZGVsZXRlIHByZWZpeGVzLmFuaW1hdGlvbmVuZC5hbmltYXRpb247XG4gICAgfVxuXG4gICAgaWYgKCEoJ1RyYW5zaXRpb25FdmVudCcgaW4gd2luKSkge1xuICAgICAgZGVsZXRlIHByZWZpeGVzLnRyYW5zaXRpb25lbmQudHJhbnNpdGlvbjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcHJlZml4ZXM7XG59XG52YXIgdmVuZG9yUHJlZml4ZXMgPSBnZXRWZW5kb3JQcmVmaXhlcyhjYW5Vc2VET00oKSwgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB7fSk7XG52YXIgc3R5bGUgPSB7fTtcblxuaWYgKGNhblVzZURPTSgpKSB7XG4gIHZhciBfZG9jdW1lbnQkY3JlYXRlRWxlbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICBzdHlsZSA9IF9kb2N1bWVudCRjcmVhdGVFbGVtZS5zdHlsZTtcbn1cblxudmFyIHByZWZpeGVkRXZlbnROYW1lcyA9IHt9O1xuZXhwb3J0IGZ1bmN0aW9uIGdldFZlbmRvclByZWZpeGVkRXZlbnROYW1lKGV2ZW50TmFtZSkge1xuICBpZiAocHJlZml4ZWRFdmVudE5hbWVzW2V2ZW50TmFtZV0pIHtcbiAgICByZXR1cm4gcHJlZml4ZWRFdmVudE5hbWVzW2V2ZW50TmFtZV07XG4gIH1cblxuICB2YXIgcHJlZml4TWFwID0gdmVuZG9yUHJlZml4ZXNbZXZlbnROYW1lXTtcblxuICBpZiAocHJlZml4TWFwKSB7XG4gICAgdmFyIHN0eWxlUHJvcExpc3QgPSBPYmplY3Qua2V5cyhwcmVmaXhNYXApO1xuICAgIHZhciBsZW4gPSBzdHlsZVByb3BMaXN0Lmxlbmd0aDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgIHZhciBzdHlsZVByb3AgPSBzdHlsZVByb3BMaXN0W2ldO1xuXG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByZWZpeE1hcCwgc3R5bGVQcm9wKSAmJiBzdHlsZVByb3AgaW4gc3R5bGUpIHtcbiAgICAgICAgcHJlZml4ZWRFdmVudE5hbWVzW2V2ZW50TmFtZV0gPSBwcmVmaXhNYXBbc3R5bGVQcm9wXTtcbiAgICAgICAgcmV0dXJuIHByZWZpeGVkRXZlbnROYW1lc1tldmVudE5hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiAnJztcbn1cbnZhciBpbnRlcm5hbEFuaW1hdGlvbkVuZE5hbWUgPSBnZXRWZW5kb3JQcmVmaXhlZEV2ZW50TmFtZSgnYW5pbWF0aW9uZW5kJyk7XG52YXIgaW50ZXJuYWxUcmFuc2l0aW9uRW5kTmFtZSA9IGdldFZlbmRvclByZWZpeGVkRXZlbnROYW1lKCd0cmFuc2l0aW9uZW5kJyk7XG5leHBvcnQgdmFyIHN1cHBvcnRUcmFuc2l0aW9uID0gISEoaW50ZXJuYWxBbmltYXRpb25FbmROYW1lICYmIGludGVybmFsVHJhbnNpdGlvbkVuZE5hbWUpO1xuZXhwb3J0IHZhciBhbmltYXRpb25FbmROYW1lID0gaW50ZXJuYWxBbmltYXRpb25FbmROYW1lIHx8ICdhbmltYXRpb25lbmQnO1xuZXhwb3J0IHZhciB0cmFuc2l0aW9uRW5kTmFtZSA9IGludGVybmFsVHJhbnNpdGlvbkVuZE5hbWUgfHwgJ3RyYW5zaXRpb25lbmQnO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zaXRpb25OYW1lKHRyYW5zaXRpb25OYW1lLCB0cmFuc2l0aW9uVHlwZSkge1xuICBpZiAoIXRyYW5zaXRpb25OYW1lKSByZXR1cm4gbnVsbDtcblxuICBpZiAoX3R5cGVvZih0cmFuc2l0aW9uTmFtZSkgPT09ICdvYmplY3QnKSB7XG4gICAgdmFyIHR5cGUgPSB0cmFuc2l0aW9uVHlwZS5yZXBsYWNlKC8tXFx3L2csIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgcmV0dXJuIG1hdGNoWzFdLnRvVXBwZXJDYXNlKCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRyYW5zaXRpb25OYW1lW3R5cGVdO1xuICB9XG5cbiAgcmV0dXJuIFwiXCIuY29uY2F0KHRyYW5zaXRpb25OYW1lLCBcIi1cIikuY29uY2F0KHRyYW5zaXRpb25UeXBlKTtcbn0iLCJleHBvcnQgdmFyIFNUQVRVU19OT05FID0gJ25vbmUnO1xuZXhwb3J0IHZhciBTVEFUVVNfQVBQRUFSID0gJ2FwcGVhcic7XG5leHBvcnQgdmFyIFNUQVRVU19FTlRFUiA9ICdlbnRlcic7XG5leHBvcnQgdmFyIFNUQVRVU19MRUFWRSA9ICdsZWF2ZSc7XG5leHBvcnQgdmFyIFNURVBfTk9ORSA9ICdub25lJztcbmV4cG9ydCB2YXIgU1RFUF9QUkVQQVJFID0gJ3ByZXBhcmUnO1xuZXhwb3J0IHZhciBTVEVQX1NUQVJUID0gJ3N0YXJ0JztcbmV4cG9ydCB2YXIgU1RFUF9BQ1RJVkUgPSAnYWN0aXZlJztcbmV4cG9ydCB2YXIgU1RFUF9BQ1RJVkFURUQgPSAnZW5kJzsiLCJpbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZU1vdW50U3RhdHVzKGRlZmF1bHRWYWx1ZSkge1xuICB2YXIgZGVzdHJveVJlZiA9IHVzZVJlZihmYWxzZSk7XG5cbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKGRlZmF1bHRWYWx1ZSksXG4gICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIHZhbCA9IF91c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRWYWwgPSBfdXNlU3RhdGUyWzFdO1xuXG4gIGZ1bmN0aW9uIHNldFZhbHVlKG5leHQpIHtcbiAgICBpZiAoIWRlc3Ryb3lSZWYuY3VycmVudCkge1xuICAgICAgc2V0VmFsKG5leHQpO1xuICAgIH1cbiAgfVxuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRlc3Ryb3lSZWYuY3VycmVudCA9IHRydWU7XG4gICAgfTtcbiAgfSwgW10pO1xuICByZXR1cm4gW3ZhbCwgc2V0VmFsdWVdO1xufSIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTGF5b3V0RWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNhblVzZURvbSBmcm9tIFwicmMtdXRpbC9lcy9Eb20vY2FuVXNlRG9tXCI7IC8vIEl0J3Mgc2FmZSB0byB1c2UgYHVzZUxheW91dEVmZmVjdGAgYnV0IHRoZSB3YXJuaW5nIGlzIGFubm95aW5nXG5cbnZhciB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0ID0gY2FuVXNlRG9tKCkgPyB1c2VMYXlvdXRFZmZlY3QgOiB1c2VFZmZlY3Q7XG5leHBvcnQgZGVmYXVsdCB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0OyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCByYWYgZnJvbSBcInJjLXV0aWwvZXMvcmFmXCI7XG5leHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKCkge1xuICB2YXIgbmV4dEZyYW1lUmVmID0gUmVhY3QudXNlUmVmKG51bGwpO1xuXG4gIGZ1bmN0aW9uIGNhbmNlbE5leHRGcmFtZSgpIHtcbiAgICByYWYuY2FuY2VsKG5leHRGcmFtZVJlZi5jdXJyZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5leHRGcmFtZShjYWxsYmFjaykge1xuICAgIHZhciBkZWxheSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMjtcbiAgICBjYW5jZWxOZXh0RnJhbWUoKTtcbiAgICB2YXIgbmV4dEZyYW1lSWQgPSByYWYoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGRlbGF5IDw9IDEpIHtcbiAgICAgICAgY2FsbGJhY2soe1xuICAgICAgICAgIGlzQ2FuY2VsZWQ6IGZ1bmN0aW9uIGlzQ2FuY2VsZWQoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV4dEZyYW1lSWQgIT09IG5leHRGcmFtZVJlZi5jdXJyZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0RnJhbWUoY2FsbGJhY2ssIGRlbGF5IC0gMSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgbmV4dEZyYW1lUmVmLmN1cnJlbnQgPSBuZXh0RnJhbWVJZDtcbiAgfVxuXG4gIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbmNlbE5leHRGcmFtZSgpO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgcmV0dXJuIFtuZXh0RnJhbWUsIGNhbmNlbE5leHRGcmFtZV07XG59KTsiLCJpbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFNURVBfUFJFUEFSRSwgU1RFUF9BQ1RJVkUsIFNURVBfU1RBUlQsIFNURVBfQUNUSVZBVEVELCBTVEVQX05PTkUgfSBmcm9tICcuLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QgZnJvbSAnLi91c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0JztcbmltcG9ydCB1c2VOZXh0RnJhbWUgZnJvbSAnLi91c2VOZXh0RnJhbWUnO1xudmFyIFNURVBfUVVFVUUgPSBbU1RFUF9QUkVQQVJFLCBTVEVQX1NUQVJULCBTVEVQX0FDVElWRSwgU1RFUF9BQ1RJVkFURURdO1xuLyoqIFNraXAgY3VycmVudCBzdGVwICovXG5cbmV4cG9ydCB2YXIgU2tpcFN0ZXAgPSBmYWxzZTtcbi8qKiBDdXJyZW50IHN0ZXAgc2hvdWxkIGJlIHVwZGF0ZSBpbiAqL1xuXG5leHBvcnQgdmFyIERvU3RlcCA9IHRydWU7XG5leHBvcnQgZnVuY3Rpb24gaXNBY3RpdmUoc3RlcCkge1xuICByZXR1cm4gc3RlcCA9PT0gU1RFUF9BQ1RJVkUgfHwgc3RlcCA9PT0gU1RFUF9BQ1RJVkFURUQ7XG59XG5leHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKHN0YXR1cywgY2FsbGJhY2spIHtcbiAgdmFyIF9SZWFjdCR1c2VTdGF0ZSA9IFJlYWN0LnVzZVN0YXRlKFNURVBfTk9ORSksXG4gICAgICBfUmVhY3QkdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlLCAyKSxcbiAgICAgIHN0ZXAgPSBfUmVhY3QkdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0U3RlcCA9IF9SZWFjdCR1c2VTdGF0ZTJbMV07XG5cbiAgdmFyIF91c2VOZXh0RnJhbWUgPSB1c2VOZXh0RnJhbWUoKSxcbiAgICAgIF91c2VOZXh0RnJhbWUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZU5leHRGcmFtZSwgMiksXG4gICAgICBuZXh0RnJhbWUgPSBfdXNlTmV4dEZyYW1lMlswXSxcbiAgICAgIGNhbmNlbE5leHRGcmFtZSA9IF91c2VOZXh0RnJhbWUyWzFdO1xuXG4gIGZ1bmN0aW9uIHN0YXJ0UXVldWUoKSB7XG4gICAgc2V0U3RlcChTVEVQX1BSRVBBUkUpO1xuICB9XG5cbiAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHN0ZXAgIT09IFNURVBfTk9ORSAmJiBzdGVwICE9PSBTVEVQX0FDVElWQVRFRCkge1xuICAgICAgdmFyIGluZGV4ID0gU1RFUF9RVUVVRS5pbmRleE9mKHN0ZXApO1xuICAgICAgdmFyIG5leHRTdGVwID0gU1RFUF9RVUVVRVtpbmRleCArIDFdO1xuICAgICAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrKHN0ZXApO1xuXG4gICAgICBpZiAocmVzdWx0ID09PSBTa2lwU3RlcCkge1xuICAgICAgICAvLyBTa2lwIHdoZW4gbm8gbmVlZGVkXG4gICAgICAgIHNldFN0ZXAobmV4dFN0ZXApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRG8gYXMgZnJhbWUgZm9yIHN0ZXAgdXBkYXRlXG4gICAgICAgIG5leHRGcmFtZShmdW5jdGlvbiAoaW5mbykge1xuICAgICAgICAgIGZ1bmN0aW9uIGRvTmV4dCgpIHtcbiAgICAgICAgICAgIC8vIFNraXAgc2luY2UgY3VycmVudCBxdWV1ZSBpcyBvb2RcbiAgICAgICAgICAgIGlmIChpbmZvLmlzQ2FuY2VsZWQoKSkgcmV0dXJuO1xuICAgICAgICAgICAgc2V0U3RlcChuZXh0U3RlcCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgZG9OZXh0KCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE9ubHkgcHJvbWlzZSBzaG91bGQgYmUgYXN5bmNcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZShyZXN1bHQpLnRoZW4oZG9OZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW3N0YXR1cywgc3RlcF0pO1xuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBjYW5jZWxOZXh0RnJhbWUoKTtcbiAgICB9O1xuICB9LCBbXSk7XG4gIHJldHVybiBbc3RhcnRRdWV1ZSwgc3RlcF07XG59KTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBhbmltYXRpb25FbmROYW1lLCB0cmFuc2l0aW9uRW5kTmFtZSB9IGZyb20gJy4uL3V0aWwvbW90aW9uJztcbmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgdmFyIGNhY2hlRWxlbWVudFJlZiA9IHVzZVJlZigpOyAvLyBDYWNoZSBjYWxsYmFja1xuXG4gIHZhciBjYWxsYmFja1JlZiA9IHVzZVJlZihjYWxsYmFjayk7XG4gIGNhbGxiYWNrUmVmLmN1cnJlbnQgPSBjYWxsYmFjazsgLy8gSW50ZXJuYWwgbW90aW9uIGV2ZW50IGhhbmRsZXJcblxuICB2YXIgb25JbnRlcm5hbE1vdGlvbkVuZCA9IFJlYWN0LnVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgIGNhbGxiYWNrUmVmLmN1cnJlbnQoZXZlbnQpO1xuICB9LCBbXSk7IC8vIFJlbW92ZSBldmVudHNcblxuICBmdW5jdGlvbiByZW1vdmVNb3Rpb25FdmVudHMoZWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50KSB7XG4gICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZE5hbWUsIG9uSW50ZXJuYWxNb3Rpb25FbmQpO1xuICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGFuaW1hdGlvbkVuZE5hbWUsIG9uSW50ZXJuYWxNb3Rpb25FbmQpO1xuICAgIH1cbiAgfSAvLyBQYXRjaCBldmVudHNcblxuXG4gIGZ1bmN0aW9uIHBhdGNoTW90aW9uRXZlbnRzKGVsZW1lbnQpIHtcbiAgICBpZiAoY2FjaGVFbGVtZW50UmVmLmN1cnJlbnQgJiYgY2FjaGVFbGVtZW50UmVmLmN1cnJlbnQgIT09IGVsZW1lbnQpIHtcbiAgICAgIHJlbW92ZU1vdGlvbkV2ZW50cyhjYWNoZUVsZW1lbnRSZWYuY3VycmVudCk7XG4gICAgfVxuXG4gICAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudCAhPT0gY2FjaGVFbGVtZW50UmVmLmN1cnJlbnQpIHtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0cmFuc2l0aW9uRW5kTmFtZSwgb25JbnRlcm5hbE1vdGlvbkVuZCk7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoYW5pbWF0aW9uRW5kTmFtZSwgb25JbnRlcm5hbE1vdGlvbkVuZCk7IC8vIFNhdmUgYXMgY2FjaGUgaW4gY2FzZSBkb20gcmVtb3ZlZCB0cmlnZ2VyIGJ5IGBtb3Rpb25EZWFkbGluZWBcblxuICAgICAgY2FjaGVFbGVtZW50UmVmLmN1cnJlbnQgPSBlbGVtZW50O1xuICAgIH1cbiAgfSAvLyBDbGVhbiB1cCB3aGVuIHJlbW92ZWRcblxuXG4gIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlbW92ZU1vdGlvbkV2ZW50cyhjYWNoZUVsZW1lbnRSZWYuY3VycmVudCk7XG4gICAgfTtcbiAgfSwgW10pO1xuICByZXR1cm4gW3BhdGNoTW90aW9uRXZlbnRzLCByZW1vdmVNb3Rpb25FdmVudHNdO1xufSk7IiwiaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU1RBVFVTX0FQUEVBUiwgU1RBVFVTX05PTkUsIFNUQVRVU19MRUFWRSwgU1RBVFVTX0VOVEVSLCBTVEVQX1BSRVBBUkUsIFNURVBfU1RBUlQsIFNURVBfQUNUSVZFIH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcbmltcG9ydCB1c2VTdGF0ZSBmcm9tICcuL3VzZVN0YXRlJztcbmltcG9ydCB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0IGZyb20gJy4vdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCc7XG5pbXBvcnQgdXNlU3RlcFF1ZXVlLCB7IERvU3RlcCwgU2tpcFN0ZXAsIGlzQWN0aXZlIH0gZnJvbSAnLi91c2VTdGVwUXVldWUnO1xuaW1wb3J0IHVzZURvbU1vdGlvbkV2ZW50cyBmcm9tICcuL3VzZURvbU1vdGlvbkV2ZW50cyc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VTdGF0dXMoc3VwcG9ydE1vdGlvbiwgdmlzaWJsZSwgZ2V0RWxlbWVudCwgX3JlZikge1xuICB2YXIgX3JlZiRtb3Rpb25FbnRlciA9IF9yZWYubW90aW9uRW50ZXIsXG4gICAgICBtb3Rpb25FbnRlciA9IF9yZWYkbW90aW9uRW50ZXIgPT09IHZvaWQgMCA/IHRydWUgOiBfcmVmJG1vdGlvbkVudGVyLFxuICAgICAgX3JlZiRtb3Rpb25BcHBlYXIgPSBfcmVmLm1vdGlvbkFwcGVhcixcbiAgICAgIG1vdGlvbkFwcGVhciA9IF9yZWYkbW90aW9uQXBwZWFyID09PSB2b2lkIDAgPyB0cnVlIDogX3JlZiRtb3Rpb25BcHBlYXIsXG4gICAgICBfcmVmJG1vdGlvbkxlYXZlID0gX3JlZi5tb3Rpb25MZWF2ZSxcbiAgICAgIG1vdGlvbkxlYXZlID0gX3JlZiRtb3Rpb25MZWF2ZSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWYkbW90aW9uTGVhdmUsXG4gICAgICBtb3Rpb25EZWFkbGluZSA9IF9yZWYubW90aW9uRGVhZGxpbmUsXG4gICAgICBtb3Rpb25MZWF2ZUltbWVkaWF0ZWx5ID0gX3JlZi5tb3Rpb25MZWF2ZUltbWVkaWF0ZWx5LFxuICAgICAgb25BcHBlYXJQcmVwYXJlID0gX3JlZi5vbkFwcGVhclByZXBhcmUsXG4gICAgICBvbkVudGVyUHJlcGFyZSA9IF9yZWYub25FbnRlclByZXBhcmUsXG4gICAgICBvbkxlYXZlUHJlcGFyZSA9IF9yZWYub25MZWF2ZVByZXBhcmUsXG4gICAgICBvbkFwcGVhclN0YXJ0ID0gX3JlZi5vbkFwcGVhclN0YXJ0LFxuICAgICAgb25FbnRlclN0YXJ0ID0gX3JlZi5vbkVudGVyU3RhcnQsXG4gICAgICBvbkxlYXZlU3RhcnQgPSBfcmVmLm9uTGVhdmVTdGFydCxcbiAgICAgIG9uQXBwZWFyQWN0aXZlID0gX3JlZi5vbkFwcGVhckFjdGl2ZSxcbiAgICAgIG9uRW50ZXJBY3RpdmUgPSBfcmVmLm9uRW50ZXJBY3RpdmUsXG4gICAgICBvbkxlYXZlQWN0aXZlID0gX3JlZi5vbkxlYXZlQWN0aXZlLFxuICAgICAgb25BcHBlYXJFbmQgPSBfcmVmLm9uQXBwZWFyRW5kLFxuICAgICAgb25FbnRlckVuZCA9IF9yZWYub25FbnRlckVuZCxcbiAgICAgIG9uTGVhdmVFbmQgPSBfcmVmLm9uTGVhdmVFbmQsXG4gICAgICBvblZpc2libGVDaGFuZ2VkID0gX3JlZi5vblZpc2libGVDaGFuZ2VkO1xuXG4gIC8vIFVzZWQgZm9yIG91dGVyIHJlbmRlciB1c2FnZSB0byBhdm9pZCBgdmlzaWJsZTogZmFsc2UgJiBzdGF0dXM6IG5vbmVgIHRvIHJlbmRlciBub3RoaW5nXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZSgpLFxuICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgICBhc3luY1Zpc2libGUgPSBfdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0QXN5bmNWaXNpYmxlID0gX3VzZVN0YXRlMlsxXTtcblxuICB2YXIgX3VzZVN0YXRlMyA9IHVzZVN0YXRlKFNUQVRVU19OT05FKSxcbiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSxcbiAgICAgIHN0YXR1cyA9IF91c2VTdGF0ZTRbMF0sXG4gICAgICBzZXRTdGF0dXMgPSBfdXNlU3RhdGU0WzFdO1xuXG4gIHZhciBfdXNlU3RhdGU1ID0gdXNlU3RhdGUobnVsbCksXG4gICAgICBfdXNlU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNSwgMiksXG4gICAgICBzdHlsZSA9IF91c2VTdGF0ZTZbMF0sXG4gICAgICBzZXRTdHlsZSA9IF91c2VTdGF0ZTZbMV07XG5cbiAgdmFyIG1vdW50ZWRSZWYgPSB1c2VSZWYoZmFsc2UpO1xuICB2YXIgZGVhZGxpbmVSZWYgPSB1c2VSZWYobnVsbCk7XG4gIHZhciBkZXN0cm95ZWRSZWYgPSB1c2VSZWYoZmFsc2UpOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT0gRG9tIE5vZGUgPT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIGNhY2hlRWxlbWVudFJlZiA9IHVzZVJlZihudWxsKTtcblxuICBmdW5jdGlvbiBnZXREb21FbGVtZW50KCkge1xuICAgIHZhciBlbGVtZW50ID0gZ2V0RWxlbWVudCgpO1xuICAgIHJldHVybiBlbGVtZW50IHx8IGNhY2hlRWxlbWVudFJlZi5jdXJyZW50O1xuICB9IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09IE1vdGlvbiBFbmQgPT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBhY3RpdmVSZWYgPSB1c2VSZWYoZmFsc2UpO1xuXG4gIGZ1bmN0aW9uIG9uSW50ZXJuYWxNb3Rpb25FbmQoZXZlbnQpIHtcbiAgICB2YXIgZWxlbWVudCA9IGdldERvbUVsZW1lbnQoKTtcblxuICAgIGlmIChldmVudCAmJiAhZXZlbnQuZGVhZGxpbmUgJiYgZXZlbnQudGFyZ2V0ICE9PSBlbGVtZW50KSB7XG4gICAgICAvLyBldmVudCBleGlzdHNcbiAgICAgIC8vIG5vdCBpbml0aWF0ZWQgYnkgZGVhZGxpbmVcbiAgICAgIC8vIHRyYW5zaXRpb25FbmQgbm90IGZpcmVkIGJ5IGlubmVyIGVsZW1lbnRzXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGNhbkVuZDtcblxuICAgIGlmIChzdGF0dXMgPT09IFNUQVRVU19BUFBFQVIgJiYgYWN0aXZlUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNhbkVuZCA9IG9uQXBwZWFyRW5kID09PSBudWxsIHx8IG9uQXBwZWFyRW5kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkFwcGVhckVuZChlbGVtZW50LCBldmVudCk7XG4gICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IFNUQVRVU19FTlRFUiAmJiBhY3RpdmVSZWYuY3VycmVudCkge1xuICAgICAgY2FuRW5kID0gb25FbnRlckVuZCA9PT0gbnVsbCB8fCBvbkVudGVyRW5kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkVudGVyRW5kKGVsZW1lbnQsIGV2ZW50KTtcbiAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gU1RBVFVTX0xFQVZFICYmIGFjdGl2ZVJlZi5jdXJyZW50KSB7XG4gICAgICBjYW5FbmQgPSBvbkxlYXZlRW5kID09PSBudWxsIHx8IG9uTGVhdmVFbmQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uTGVhdmVFbmQoZWxlbWVudCwgZXZlbnQpO1xuICAgIH0gLy8gT25seSB1cGRhdGUgc3RhdHVzIHdoZW4gYGNhbkVuZGAgYW5kIG5vdCBkZXN0cm95ZWRcblxuXG4gICAgaWYgKGNhbkVuZCAhPT0gZmFsc2UgJiYgIWRlc3Ryb3llZFJlZi5jdXJyZW50KSB7XG4gICAgICBzZXRTdGF0dXMoU1RBVFVTX05PTkUpO1xuICAgICAgc2V0U3R5bGUobnVsbCk7XG4gICAgfVxuICB9XG5cbiAgdmFyIF91c2VEb21Nb3Rpb25FdmVudHMgPSB1c2VEb21Nb3Rpb25FdmVudHMob25JbnRlcm5hbE1vdGlvbkVuZCksXG4gICAgICBfdXNlRG9tTW90aW9uRXZlbnRzMiA9IF9zbGljZWRUb0FycmF5KF91c2VEb21Nb3Rpb25FdmVudHMsIDEpLFxuICAgICAgcGF0Y2hNb3Rpb25FdmVudHMgPSBfdXNlRG9tTW90aW9uRXZlbnRzMlswXTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gU3RlcCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdmFyIGV2ZW50SGFuZGxlcnMgPSBSZWFjdC51c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3JlZjIsIF9yZWYzLCBfcmVmNDtcblxuICAgIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgICBjYXNlICdhcHBlYXInOlxuICAgICAgICByZXR1cm4gX3JlZjIgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9yZWYyLCBTVEVQX1BSRVBBUkUsIG9uQXBwZWFyUHJlcGFyZSksIF9kZWZpbmVQcm9wZXJ0eShfcmVmMiwgU1RFUF9TVEFSVCwgb25BcHBlYXJTdGFydCksIF9kZWZpbmVQcm9wZXJ0eShfcmVmMiwgU1RFUF9BQ1RJVkUsIG9uQXBwZWFyQWN0aXZlKSwgX3JlZjI7XG5cbiAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgcmV0dXJuIF9yZWYzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfcmVmMywgU1RFUF9QUkVQQVJFLCBvbkVudGVyUHJlcGFyZSksIF9kZWZpbmVQcm9wZXJ0eShfcmVmMywgU1RFUF9TVEFSVCwgb25FbnRlclN0YXJ0KSwgX2RlZmluZVByb3BlcnR5KF9yZWYzLCBTVEVQX0FDVElWRSwgb25FbnRlckFjdGl2ZSksIF9yZWYzO1xuXG4gICAgICBjYXNlICdsZWF2ZSc6XG4gICAgICAgIHJldHVybiBfcmVmNCA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX3JlZjQsIFNURVBfUFJFUEFSRSwgb25MZWF2ZVByZXBhcmUpLCBfZGVmaW5lUHJvcGVydHkoX3JlZjQsIFNURVBfU1RBUlQsIG9uTGVhdmVTdGFydCksIF9kZWZpbmVQcm9wZXJ0eShfcmVmNCwgU1RFUF9BQ1RJVkUsIG9uTGVhdmVBY3RpdmUpLCBfcmVmNDtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgfSwgW3N0YXR1c10pO1xuXG4gIHZhciBfdXNlU3RlcFF1ZXVlID0gdXNlU3RlcFF1ZXVlKHN0YXR1cywgZnVuY3Rpb24gKG5ld1N0ZXApIHtcbiAgICAvLyBPbmx5IHByZXBhcmUgc3RlcCBjYW4gYmUgc2tpcFxuICAgIGlmIChuZXdTdGVwID09PSBTVEVQX1BSRVBBUkUpIHtcbiAgICAgIHZhciBvblByZXBhcmUgPSBldmVudEhhbmRsZXJzW1NURVBfUFJFUEFSRV07XG5cbiAgICAgIGlmICghb25QcmVwYXJlKSB7XG4gICAgICAgIHJldHVybiBTa2lwU3RlcDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG9uUHJlcGFyZShnZXREb21FbGVtZW50KCkpO1xuICAgIH0gLy8gUmVzdCBzdGVwIGlzIHN5bmMgdXBkYXRlXG5cblxuICAgIC8vIFJlc3Qgc3RlcCBpcyBzeW5jIHVwZGF0ZVxuICAgIGlmIChzdGVwIGluIGV2ZW50SGFuZGxlcnMpIHtcbiAgICAgIHZhciBfZXZlbnRIYW5kbGVycyRzdGVwO1xuXG4gICAgICBzZXRTdHlsZSgoKF9ldmVudEhhbmRsZXJzJHN0ZXAgPSBldmVudEhhbmRsZXJzW3N0ZXBdKSA9PT0gbnVsbCB8fCBfZXZlbnRIYW5kbGVycyRzdGVwID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZXZlbnRIYW5kbGVycyRzdGVwLmNhbGwoZXZlbnRIYW5kbGVycywgZ2V0RG9tRWxlbWVudCgpLCBudWxsKSkgfHwgbnVsbCk7XG4gICAgfVxuXG4gICAgaWYgKHN0ZXAgPT09IFNURVBfQUNUSVZFKSB7XG4gICAgICAvLyBQYXRjaCBldmVudHMgd2hlbiBtb3Rpb24gbmVlZGVkXG4gICAgICBwYXRjaE1vdGlvbkV2ZW50cyhnZXREb21FbGVtZW50KCkpO1xuXG4gICAgICBpZiAobW90aW9uRGVhZGxpbmUgPiAwKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChkZWFkbGluZVJlZi5jdXJyZW50KTtcbiAgICAgICAgZGVhZGxpbmVSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIG9uSW50ZXJuYWxNb3Rpb25FbmQoe1xuICAgICAgICAgICAgZGVhZGxpbmU6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgbW90aW9uRGVhZGxpbmUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBEb1N0ZXA7XG4gIH0pLFxuICAgICAgX3VzZVN0ZXBRdWV1ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RlcFF1ZXVlLCAyKSxcbiAgICAgIHN0YXJ0U3RlcCA9IF91c2VTdGVwUXVldWUyWzBdLFxuICAgICAgc3RlcCA9IF91c2VTdGVwUXVldWUyWzFdO1xuXG4gIHZhciBhY3RpdmUgPSBpc0FjdGl2ZShzdGVwKTtcbiAgYWN0aXZlUmVmLmN1cnJlbnQgPSBhY3RpdmU7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gU3RhdHVzID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gVXBkYXRlIHdpdGggbmV3IHN0YXR1c1xuXG4gIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHNldEFzeW5jVmlzaWJsZSh2aXNpYmxlKTtcbiAgICB2YXIgaXNNb3VudGVkID0gbW91bnRlZFJlZi5jdXJyZW50O1xuICAgIG1vdW50ZWRSZWYuY3VycmVudCA9IHRydWU7XG5cbiAgICBpZiAoIXN1cHBvcnRNb3Rpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmV4dFN0YXR1czsgLy8gQXBwZWFyXG5cbiAgICBpZiAoIWlzTW91bnRlZCAmJiB2aXNpYmxlICYmIG1vdGlvbkFwcGVhcikge1xuICAgICAgbmV4dFN0YXR1cyA9IFNUQVRVU19BUFBFQVI7XG4gICAgfSAvLyBFbnRlclxuXG5cbiAgICBpZiAoaXNNb3VudGVkICYmIHZpc2libGUgJiYgbW90aW9uRW50ZXIpIHtcbiAgICAgIG5leHRTdGF0dXMgPSBTVEFUVVNfRU5URVI7XG4gICAgfSAvLyBMZWF2ZVxuXG5cbiAgICBpZiAoaXNNb3VudGVkICYmICF2aXNpYmxlICYmIG1vdGlvbkxlYXZlIHx8ICFpc01vdW50ZWQgJiYgbW90aW9uTGVhdmVJbW1lZGlhdGVseSAmJiAhdmlzaWJsZSAmJiBtb3Rpb25MZWF2ZSkge1xuICAgICAgbmV4dFN0YXR1cyA9IFNUQVRVU19MRUFWRTtcbiAgICB9IC8vIFVwZGF0ZSB0byBuZXh0IHN0YXR1c1xuXG5cbiAgICBpZiAobmV4dFN0YXR1cykge1xuICAgICAgc2V0U3RhdHVzKG5leHRTdGF0dXMpO1xuICAgICAgc3RhcnRTdGVwKCk7XG4gICAgfVxuICB9LCBbdmlzaWJsZV0pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IEVmZmVjdCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFJlc2V0IHdoZW4gbW90aW9uIGNoYW5nZWRcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICggLy8gQ2FuY2VsIGFwcGVhclxuICAgIHN0YXR1cyA9PT0gU1RBVFVTX0FQUEVBUiAmJiAhbW90aW9uQXBwZWFyIHx8IC8vIENhbmNlbCBlbnRlclxuICAgIHN0YXR1cyA9PT0gU1RBVFVTX0VOVEVSICYmICFtb3Rpb25FbnRlciB8fCAvLyBDYW5jZWwgbGVhdmVcbiAgICBzdGF0dXMgPT09IFNUQVRVU19MRUFWRSAmJiAhbW90aW9uTGVhdmUpIHtcbiAgICAgIHNldFN0YXR1cyhTVEFUVVNfTk9ORSk7XG4gICAgfVxuICB9LCBbbW90aW9uQXBwZWFyLCBtb3Rpb25FbnRlciwgbW90aW9uTGVhdmVdKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGRlYWRsaW5lUmVmLmN1cnJlbnQpO1xuICAgICAgZGVzdHJveWVkUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgIH07XG4gIH0sIFtdKTsgLy8gVHJpZ2dlciBgb25WaXNpYmxlQ2hhbmdlZGBcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmIChhc3luY1Zpc2libGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0dXMgPT09IFNUQVRVU19OT05FKSB7XG4gICAgICBvblZpc2libGVDaGFuZ2VkID09PSBudWxsIHx8IG9uVmlzaWJsZUNoYW5nZWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uVmlzaWJsZUNoYW5nZWQoYXN5bmNWaXNpYmxlKTtcbiAgICB9XG4gIH0sIFthc3luY1Zpc2libGUsIHN0YXR1c10pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IFN0eWxlcyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIG1lcmdlZFN0eWxlID0gc3R5bGU7XG5cbiAgaWYgKGV2ZW50SGFuZGxlcnNbU1RFUF9QUkVQQVJFXSAmJiBzdGVwID09PSBTVEVQX1NUQVJUKSB7XG4gICAgbWVyZ2VkU3R5bGUgPSBfb2JqZWN0U3ByZWFkKHtcbiAgICAgIHRyYW5zaXRpb246ICdub25lJ1xuICAgIH0sIG1lcmdlZFN0eWxlKTtcbiAgfVxuXG4gIHJldHVybiBbc3RhdHVzLCBzdGVwLCBtZXJnZWRTdHlsZSwgYXN5bmNWaXNpYmxlICE9PSBudWxsICYmIGFzeW5jVmlzaWJsZSAhPT0gdm9pZCAwID8gYXN5bmNWaXNpYmxlIDogdmlzaWJsZV07XG59IiwiaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2tcIjtcbmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzXCI7XG5pbXBvcnQgX2luaGVyaXRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0c1wiO1xuaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXJcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxudmFyIERvbVdyYXBwZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKERvbVdyYXBwZXIsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoRG9tV3JhcHBlcik7XG5cbiAgZnVuY3Rpb24gRG9tV3JhcHBlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRG9tV3JhcHBlcik7XG5cbiAgICByZXR1cm4gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRG9tV3JhcHBlciwgW3tcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3BzLmNoaWxkcmVuO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBEb21XcmFwcGVyO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5leHBvcnQgZGVmYXVsdCBEb21XcmFwcGVyOyIsImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgX3R5cGVvZiBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mXCI7XG5cbi8qIGVzbGludC1kaXNhYmxlIHJlYWN0L2RlZmF1bHQtcHJvcHMtbWF0Y2gtcHJvcC10eXBlcywgcmVhY3Qvbm8tbXVsdGktY29tcCwgcmVhY3QvcHJvcC10eXBlcyAqL1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGZpbmRET01Ob2RlIGZyb20gXCJyYy11dGlsL2VzL0RvbS9maW5kRE9NTm9kZVwiO1xuaW1wb3J0IHsgZmlsbFJlZiB9IGZyb20gXCJyYy11dGlsL2VzL3JlZlwiO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgeyBnZXRUcmFuc2l0aW9uTmFtZSwgc3VwcG9ydFRyYW5zaXRpb24gfSBmcm9tICcuL3V0aWwvbW90aW9uJztcbmltcG9ydCB7IFNUQVRVU19OT05FLCBTVEVQX1BSRVBBUkUsIFNURVBfU1RBUlQgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgdXNlU3RhdHVzIGZyb20gJy4vaG9va3MvdXNlU3RhdHVzJztcbmltcG9ydCBEb21XcmFwcGVyIGZyb20gJy4vRG9tV3JhcHBlcic7XG5pbXBvcnQgeyBpc0FjdGl2ZSB9IGZyb20gJy4vaG9va3MvdXNlU3RlcFF1ZXVlJztcbi8qKlxuICogYHRyYW5zaXRpb25TdXBwb3J0YCBpcyB1c2VkIGZvciBub25lIHRyYW5zaXRpb24gdGVzdCBjYXNlLlxuICogRGVmYXVsdCB3ZSB1c2UgYnJvd3NlciB0cmFuc2l0aW9uIGV2ZW50IHN1cHBvcnQgY2hlY2suXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbkNTU01vdGlvbihjb25maWcpIHtcbiAgdmFyIHRyYW5zaXRpb25TdXBwb3J0ID0gY29uZmlnO1xuXG4gIGlmIChfdHlwZW9mKGNvbmZpZykgPT09ICdvYmplY3QnKSB7XG4gICAgdHJhbnNpdGlvblN1cHBvcnQgPSBjb25maWcudHJhbnNpdGlvblN1cHBvcnQ7XG4gIH1cblxuICBmdW5jdGlvbiBpc1N1cHBvcnRUcmFuc2l0aW9uKHByb3BzKSB7XG4gICAgcmV0dXJuICEhKHByb3BzLm1vdGlvbk5hbWUgJiYgdHJhbnNpdGlvblN1cHBvcnQpO1xuICB9XG5cbiAgdmFyIENTU01vdGlvbiA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChwcm9wcywgcmVmKSB7XG4gICAgdmFyIF9wcm9wcyR2aXNpYmxlID0gcHJvcHMudmlzaWJsZSxcbiAgICAgICAgdmlzaWJsZSA9IF9wcm9wcyR2aXNpYmxlID09PSB2b2lkIDAgPyB0cnVlIDogX3Byb3BzJHZpc2libGUsXG4gICAgICAgIF9wcm9wcyRyZW1vdmVPbkxlYXZlID0gcHJvcHMucmVtb3ZlT25MZWF2ZSxcbiAgICAgICAgcmVtb3ZlT25MZWF2ZSA9IF9wcm9wcyRyZW1vdmVPbkxlYXZlID09PSB2b2lkIDAgPyB0cnVlIDogX3Byb3BzJHJlbW92ZU9uTGVhdmUsXG4gICAgICAgIGZvcmNlUmVuZGVyID0gcHJvcHMuZm9yY2VSZW5kZXIsXG4gICAgICAgIGNoaWxkcmVuID0gcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgIG1vdGlvbk5hbWUgPSBwcm9wcy5tb3Rpb25OYW1lLFxuICAgICAgICBsZWF2ZWRDbGFzc05hbWUgPSBwcm9wcy5sZWF2ZWRDbGFzc05hbWUsXG4gICAgICAgIGV2ZW50UHJvcHMgPSBwcm9wcy5ldmVudFByb3BzO1xuICAgIHZhciBzdXBwb3J0TW90aW9uID0gaXNTdXBwb3J0VHJhbnNpdGlvbihwcm9wcyk7IC8vIFJlZiB0byB0aGUgcmVhY3Qgbm9kZSwgaXQgbWF5IGJlIGEgSFRNTEVsZW1lbnRcblxuICAgIHZhciBub2RlUmVmID0gdXNlUmVmKCk7IC8vIFJlZiB0byB0aGUgZG9tIHdyYXBwZXIgaW4gY2FzZSByZWYgY2FuIG5vdCBwYXNzIHRvIEhUTUxFbGVtZW50XG5cbiAgICB2YXIgd3JhcHBlck5vZGVSZWYgPSB1c2VSZWYoKTtcblxuICAgIGZ1bmN0aW9uIGdldERvbUVsZW1lbnQoKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gZmluZERPTU5vZGUobm9kZVJlZi5jdXJyZW50IHx8IHdyYXBwZXJOb2RlUmVmLmN1cnJlbnQpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBPbmx5IGhhcHBlbiB3aGVuIGBtb3Rpb25EZWFkbGluZWAgdHJpZ2dlciBidXQgZWxlbWVudCByZW1vdmVkLlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgX3VzZVN0YXR1cyA9IHVzZVN0YXR1cyhzdXBwb3J0TW90aW9uLCB2aXNpYmxlLCBnZXREb21FbGVtZW50LCBwcm9wcyksXG4gICAgICAgIF91c2VTdGF0dXMyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXR1cywgNCksXG4gICAgICAgIHN0YXR1cyA9IF91c2VTdGF0dXMyWzBdLFxuICAgICAgICBzdGF0dXNTdGVwID0gX3VzZVN0YXR1czJbMV0sXG4gICAgICAgIHN0YXR1c1N0eWxlID0gX3VzZVN0YXR1czJbMl0sXG4gICAgICAgIG1lcmdlZFZpc2libGUgPSBfdXNlU3RhdHVzMlszXTsgLy8gUmVjb3JkIHdoZXRoZXIgY29udGVudCBoYXMgcmVuZGVkXG4gICAgLy8gV2lsbCByZXR1cm4gbnVsbCBmb3IgdW4tcmVuZGVyZWQgZXZlbiB3aGVuIGByZW1vdmVPbkxlYXZlPXtmYWxzZX1gXG5cblxuICAgIHZhciByZW5kZXJlZFJlZiA9IFJlYWN0LnVzZVJlZihtZXJnZWRWaXNpYmxlKTtcblxuICAgIGlmIChtZXJnZWRWaXNpYmxlKSB7XG4gICAgICByZW5kZXJlZFJlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICB9IC8vID09PT09PT09PT09PT09PT09PT09PT0gUmVmcyA9PT09PT09PT09PT09PT09PT09PT09XG5cblxuICAgIHZhciBvcmlnaW5SZWYgPSB1c2VSZWYocmVmKTtcbiAgICBvcmlnaW5SZWYuY3VycmVudCA9IHJlZjtcbiAgICB2YXIgc2V0Tm9kZVJlZiA9IFJlYWN0LnVzZUNhbGxiYWNrKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICBub2RlUmVmLmN1cnJlbnQgPSBub2RlO1xuICAgICAgZmlsbFJlZihvcmlnaW5SZWYuY3VycmVudCwgbm9kZSk7XG4gICAgfSwgW10pOyAvLyA9PT09PT09PT09PT09PT09PT09PT0gUmVuZGVyID09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgdmFyIG1vdGlvbkNoaWxkcmVuO1xuXG4gICAgdmFyIG1lcmdlZFByb3BzID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBldmVudFByb3BzKSwge30sIHtcbiAgICAgIHZpc2libGU6IHZpc2libGVcbiAgICB9KTtcblxuICAgIGlmICghY2hpbGRyZW4pIHtcbiAgICAgIC8vIE5vIGNoaWxkcmVuXG4gICAgICBtb3Rpb25DaGlsZHJlbiA9IG51bGw7XG4gICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IFNUQVRVU19OT05FIHx8ICFpc1N1cHBvcnRUcmFuc2l0aW9uKHByb3BzKSkge1xuICAgICAgLy8gU3RhYmxlIGNoaWxkcmVuXG4gICAgICBpZiAobWVyZ2VkVmlzaWJsZSkge1xuICAgICAgICBtb3Rpb25DaGlsZHJlbiA9IGNoaWxkcmVuKF9vYmplY3RTcHJlYWQoe30sIG1lcmdlZFByb3BzKSwgc2V0Tm9kZVJlZik7XG4gICAgICB9IGVsc2UgaWYgKCFyZW1vdmVPbkxlYXZlICYmIHJlbmRlcmVkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgbW90aW9uQ2hpbGRyZW4gPSBjaGlsZHJlbihfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1lcmdlZFByb3BzKSwge30sIHtcbiAgICAgICAgICBjbGFzc05hbWU6IGxlYXZlZENsYXNzTmFtZVxuICAgICAgICB9KSwgc2V0Tm9kZVJlZik7XG4gICAgICB9IGVsc2UgaWYgKGZvcmNlUmVuZGVyKSB7XG4gICAgICAgIG1vdGlvbkNoaWxkcmVuID0gY2hpbGRyZW4oX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtZXJnZWRQcm9wcyksIHt9LCB7XG4gICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSksIHNldE5vZGVSZWYpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbW90aW9uQ2hpbGRyZW4gPSBudWxsO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgX2NsYXNzTmFtZXM7XG5cbiAgICAgIC8vIEluIG1vdGlvblxuICAgICAgdmFyIHN0YXR1c1N1ZmZpeDtcblxuICAgICAgaWYgKHN0YXR1c1N0ZXAgPT09IFNURVBfUFJFUEFSRSkge1xuICAgICAgICBzdGF0dXNTdWZmaXggPSAncHJlcGFyZSc7XG4gICAgICB9IGVsc2UgaWYgKGlzQWN0aXZlKHN0YXR1c1N0ZXApKSB7XG4gICAgICAgIHN0YXR1c1N1ZmZpeCA9ICdhY3RpdmUnO1xuICAgICAgfSBlbHNlIGlmIChzdGF0dXNTdGVwID09PSBTVEVQX1NUQVJUKSB7XG4gICAgICAgIHN0YXR1c1N1ZmZpeCA9ICdzdGFydCc7XG4gICAgICB9XG5cbiAgICAgIG1vdGlvbkNoaWxkcmVuID0gY2hpbGRyZW4oX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtZXJnZWRQcm9wcyksIHt9LCB7XG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhnZXRUcmFuc2l0aW9uTmFtZShtb3Rpb25OYW1lLCBzdGF0dXMpLCAoX2NsYXNzTmFtZXMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCBnZXRUcmFuc2l0aW9uTmFtZShtb3Rpb25OYW1lLCBcIlwiLmNvbmNhdChzdGF0dXMsIFwiLVwiKS5jb25jYXQoc3RhdHVzU3VmZml4KSksIHN0YXR1c1N1ZmZpeCksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgbW90aW9uTmFtZSwgdHlwZW9mIG1vdGlvbk5hbWUgPT09ICdzdHJpbmcnKSwgX2NsYXNzTmFtZXMpKSxcbiAgICAgICAgc3R5bGU6IHN0YXR1c1N0eWxlXG4gICAgICB9KSwgc2V0Tm9kZVJlZik7XG4gICAgfVxuXG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KERvbVdyYXBwZXIsIHtcbiAgICAgIHJlZjogd3JhcHBlck5vZGVSZWZcbiAgICB9LCBtb3Rpb25DaGlsZHJlbik7XG4gIH0pO1xuICBDU1NNb3Rpb24uZGlzcGxheU5hbWUgPSAnQ1NTTW90aW9uJztcbiAgcmV0dXJuIENTU01vdGlvbjtcbn1cbmV4cG9ydCBkZWZhdWx0IGdlbkNTU01vdGlvbihzdXBwb3J0VHJhbnNpdGlvbik7IiwiZXhwb3J0IGZ1bmN0aW9uIGdldE1vdGlvbihfcmVmKSB7XG4gIHZhciBwcmVmaXhDbHMgPSBfcmVmLnByZWZpeENscyxcbiAgICAgIG1vdGlvbiA9IF9yZWYubW90aW9uLFxuICAgICAgYW5pbWF0aW9uID0gX3JlZi5hbmltYXRpb24sXG4gICAgICB0cmFuc2l0aW9uTmFtZSA9IF9yZWYudHJhbnNpdGlvbk5hbWU7XG5cbiAgaWYgKG1vdGlvbikge1xuICAgIHJldHVybiBtb3Rpb247XG4gIH1cblxuICBpZiAoYW5pbWF0aW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1vdGlvbk5hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItXCIpLmNvbmNhdChhbmltYXRpb24pXG4gICAgfTtcbiAgfVxuXG4gIGlmICh0cmFuc2l0aW9uTmFtZSkge1xuICAgIHJldHVybiB7XG4gICAgICBtb3Rpb25OYW1lOiB0cmFuc2l0aW9uTmFtZVxuICAgIH07XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn0iLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBDU1NNb3Rpb24gZnJvbSAncmMtbW90aW9uJztcbmltcG9ydCB7IGdldE1vdGlvbiB9IGZyb20gJy4uL3V0aWxzL2xlZ2FjeVV0aWwnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTWFzayhwcm9wcykge1xuICB2YXIgcHJlZml4Q2xzID0gcHJvcHMucHJlZml4Q2xzLFxuICAgICAgdmlzaWJsZSA9IHByb3BzLnZpc2libGUsXG4gICAgICB6SW5kZXggPSBwcm9wcy56SW5kZXgsXG4gICAgICBtYXNrID0gcHJvcHMubWFzayxcbiAgICAgIG1hc2tNb3Rpb24gPSBwcm9wcy5tYXNrTW90aW9uLFxuICAgICAgbWFza0FuaW1hdGlvbiA9IHByb3BzLm1hc2tBbmltYXRpb24sXG4gICAgICBtYXNrVHJhbnNpdGlvbk5hbWUgPSBwcm9wcy5tYXNrVHJhbnNpdGlvbk5hbWU7XG5cbiAgaWYgKCFtYXNrKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgbW90aW9uID0ge307XG5cbiAgaWYgKG1hc2tNb3Rpb24gfHwgbWFza1RyYW5zaXRpb25OYW1lIHx8IG1hc2tBbmltYXRpb24pIHtcbiAgICBtb3Rpb24gPSBfb2JqZWN0U3ByZWFkKHtcbiAgICAgIG1vdGlvbkFwcGVhcjogdHJ1ZVxuICAgIH0sIGdldE1vdGlvbih7XG4gICAgICBtb3Rpb246IG1hc2tNb3Rpb24sXG4gICAgICBwcmVmaXhDbHM6IHByZWZpeENscyxcbiAgICAgIHRyYW5zaXRpb25OYW1lOiBtYXNrVHJhbnNpdGlvbk5hbWUsXG4gICAgICBhbmltYXRpb246IG1hc2tBbmltYXRpb25cbiAgICB9KSk7XG4gIH1cblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1NTTW90aW9uLCBfZXh0ZW5kcyh7fSwgbW90aW9uLCB7XG4gICAgdmlzaWJsZTogdmlzaWJsZSxcbiAgICByZW1vdmVPbkxlYXZlOiB0cnVlXG4gIH0pLCBmdW5jdGlvbiAoX3JlZikge1xuICAgIHZhciBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZTtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgc3R5bGU6IHtcbiAgICAgICAgekluZGV4OiB6SW5kZXhcbiAgICAgIH0sXG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1tYXNrXCIpLCBjbGFzc05hbWUpXG4gICAgfSk7XG4gIH0pO1xufSIsImV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoZWxlbWVudCkge1xuICBpZiAoIWVsZW1lbnQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoZWxlbWVudC5vZmZzZXRQYXJlbnQpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmIChlbGVtZW50LmdldEJCb3gpIHtcbiAgICB2YXIgYm94ID0gZWxlbWVudC5nZXRCQm94KCk7XG5cbiAgICBpZiAoYm94LndpZHRoIHx8IGJveC5oZWlnaHQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCkge1xuICAgIHZhciBfYm94ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIGlmIChfYm94LndpZHRoIHx8IF9ib3guaGVpZ2h0KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59KTsiLCJmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHtcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuXG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7XG5cbiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHtcbiAgICAgIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpO1xuICB9XG5cbiAgcmV0dXJuIGtleXM7XG59XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQyKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9O1xuXG4gICAgaWYgKGkgJSAyKSB7XG4gICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5mdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7XG5cbiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7XG4gICAgX3R5cGVvZiA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgIHJldHVybiB0eXBlb2Ygb2JqO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgX3R5cGVvZiA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gX3R5cGVvZihvYmopO1xufVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxudmFyIHZlbmRvclByZWZpeDtcbnZhciBqc0Nzc01hcCA9IHtcbiAgV2Via2l0OiAnLXdlYmtpdC0nLFxuICBNb3o6ICctbW96LScsXG4gIC8vIElFIGRpZCBpdCB3cm9uZyBhZ2FpbiAuLi5cbiAgbXM6ICctbXMtJyxcbiAgTzogJy1vLSdcbn07XG5cbmZ1bmN0aW9uIGdldFZlbmRvclByZWZpeCgpIHtcbiAgaWYgKHZlbmRvclByZWZpeCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHZlbmRvclByZWZpeDtcbiAgfVxuXG4gIHZlbmRvclByZWZpeCA9ICcnO1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJykuc3R5bGU7XG4gIHZhciB0ZXN0UHJvcCA9ICdUcmFuc2Zvcm0nO1xuXG4gIGZvciAodmFyIGtleSBpbiBqc0Nzc01hcCkge1xuICAgIGlmIChrZXkgKyB0ZXN0UHJvcCBpbiBzdHlsZSkge1xuICAgICAgdmVuZG9yUHJlZml4ID0ga2V5O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB2ZW5kb3JQcmVmaXg7XG59XG5cbmZ1bmN0aW9uIGdldFRyYW5zaXRpb25OYW1lKCkge1xuICByZXR1cm4gZ2V0VmVuZG9yUHJlZml4KCkgPyBcIlwiLmNvbmNhdChnZXRWZW5kb3JQcmVmaXgoKSwgXCJUcmFuc2l0aW9uUHJvcGVydHlcIikgOiAndHJhbnNpdGlvblByb3BlcnR5Jztcbn1cblxuZnVuY3Rpb24gZ2V0VHJhbnNmb3JtTmFtZSgpIHtcbiAgcmV0dXJuIGdldFZlbmRvclByZWZpeCgpID8gXCJcIi5jb25jYXQoZ2V0VmVuZG9yUHJlZml4KCksIFwiVHJhbnNmb3JtXCIpIDogJ3RyYW5zZm9ybSc7XG59XG5mdW5jdGlvbiBzZXRUcmFuc2l0aW9uUHJvcGVydHkobm9kZSwgdmFsdWUpIHtcbiAgdmFyIG5hbWUgPSBnZXRUcmFuc2l0aW9uTmFtZSgpO1xuXG4gIGlmIChuYW1lKSB7XG4gICAgbm9kZS5zdHlsZVtuYW1lXSA9IHZhbHVlO1xuXG4gICAgaWYgKG5hbWUgIT09ICd0cmFuc2l0aW9uUHJvcGVydHknKSB7XG4gICAgICBub2RlLnN0eWxlLnRyYW5zaXRpb25Qcm9wZXJ0eSA9IHZhbHVlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzZXRUcmFuc2Zvcm0obm9kZSwgdmFsdWUpIHtcbiAgdmFyIG5hbWUgPSBnZXRUcmFuc2Zvcm1OYW1lKCk7XG5cbiAgaWYgKG5hbWUpIHtcbiAgICBub2RlLnN0eWxlW25hbWVdID0gdmFsdWU7XG5cbiAgICBpZiAobmFtZSAhPT0gJ3RyYW5zZm9ybScpIHtcbiAgICAgIG5vZGUuc3R5bGUudHJhbnNmb3JtID0gdmFsdWU7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldFRyYW5zaXRpb25Qcm9wZXJ0eShub2RlKSB7XG4gIHJldHVybiBub2RlLnN0eWxlLnRyYW5zaXRpb25Qcm9wZXJ0eSB8fCBub2RlLnN0eWxlW2dldFRyYW5zaXRpb25OYW1lKCldO1xufVxuZnVuY3Rpb24gZ2V0VHJhbnNmb3JtWFkobm9kZSkge1xuICB2YXIgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCBudWxsKTtcbiAgdmFyIHRyYW5zZm9ybSA9IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3RyYW5zZm9ybScpIHx8IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoZ2V0VHJhbnNmb3JtTmFtZSgpKTtcblxuICBpZiAodHJhbnNmb3JtICYmIHRyYW5zZm9ybSAhPT0gJ25vbmUnKSB7XG4gICAgdmFyIG1hdHJpeCA9IHRyYW5zZm9ybS5yZXBsYWNlKC9bXjAtOVxcLS4sXS9nLCAnJykuc3BsaXQoJywnKTtcbiAgICByZXR1cm4ge1xuICAgICAgeDogcGFyc2VGbG9hdChtYXRyaXhbMTJdIHx8IG1hdHJpeFs0XSwgMCksXG4gICAgICB5OiBwYXJzZUZsb2F0KG1hdHJpeFsxM10gfHwgbWF0cml4WzVdLCAwKVxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHg6IDAsXG4gICAgeTogMFxuICB9O1xufVxudmFyIG1hdHJpeDJkID0gL21hdHJpeFxcKCguKilcXCkvO1xudmFyIG1hdHJpeDNkID0gL21hdHJpeDNkXFwoKC4qKVxcKS87XG5mdW5jdGlvbiBzZXRUcmFuc2Zvcm1YWShub2RlLCB4eSkge1xuICB2YXIgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCBudWxsKTtcbiAgdmFyIHRyYW5zZm9ybSA9IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3RyYW5zZm9ybScpIHx8IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoZ2V0VHJhbnNmb3JtTmFtZSgpKTtcblxuICBpZiAodHJhbnNmb3JtICYmIHRyYW5zZm9ybSAhPT0gJ25vbmUnKSB7XG4gICAgdmFyIGFycjtcbiAgICB2YXIgbWF0Y2gyZCA9IHRyYW5zZm9ybS5tYXRjaChtYXRyaXgyZCk7XG5cbiAgICBpZiAobWF0Y2gyZCkge1xuICAgICAgbWF0Y2gyZCA9IG1hdGNoMmRbMV07XG4gICAgICBhcnIgPSBtYXRjaDJkLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KGl0ZW0sIDEwKTtcbiAgICAgIH0pO1xuICAgICAgYXJyWzRdID0geHkueDtcbiAgICAgIGFycls1XSA9IHh5Lnk7XG4gICAgICBzZXRUcmFuc2Zvcm0obm9kZSwgXCJtYXRyaXgoXCIuY29uY2F0KGFyci5qb2luKCcsJyksIFwiKVwiKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBtYXRjaDNkID0gdHJhbnNmb3JtLm1hdGNoKG1hdHJpeDNkKVsxXTtcbiAgICAgIGFyciA9IG1hdGNoM2Quc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoaXRlbSwgMTApO1xuICAgICAgfSk7XG4gICAgICBhcnJbMTJdID0geHkueDtcbiAgICAgIGFyclsxM10gPSB4eS55O1xuICAgICAgc2V0VHJhbnNmb3JtKG5vZGUsIFwibWF0cml4M2QoXCIuY29uY2F0KGFyci5qb2luKCcsJyksIFwiKVwiKSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHNldFRyYW5zZm9ybShub2RlLCBcInRyYW5zbGF0ZVgoXCIuY29uY2F0KHh5LngsIFwicHgpIHRyYW5zbGF0ZVkoXCIpLmNvbmNhdCh4eS55LCBcInB4KSB0cmFuc2xhdGVaKDApXCIpKTtcbiAgfVxufVxuXG52YXIgUkVfTlVNID0gL1tcXC0rXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVtcXC0rXT9cXGQrfCkvLnNvdXJjZTtcbnZhciBnZXRDb21wdXRlZFN0eWxlWDsgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM0ODU2NTQvMzA0MDYwNVxuXG5mdW5jdGlvbiBmb3JjZVJlbGF5b3V0KGVsZW0pIHtcbiAgdmFyIG9yaWdpbmFsU3R5bGUgPSBlbGVtLnN0eWxlLmRpc3BsYXk7XG4gIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgZWxlbS5vZmZzZXRIZWlnaHQ7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICBlbGVtLnN0eWxlLmRpc3BsYXkgPSBvcmlnaW5hbFN0eWxlO1xufVxuXG5mdW5jdGlvbiBjc3MoZWwsIG5hbWUsIHYpIHtcbiAgdmFyIHZhbHVlID0gdjtcblxuICBpZiAoX3R5cGVvZihuYW1lKSA9PT0gJ29iamVjdCcpIHtcbiAgICBmb3IgKHZhciBpIGluIG5hbWUpIHtcbiAgICAgIGlmIChuYW1lLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgIGNzcyhlbCwgaSwgbmFtZVtpXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHZhbHVlID0gXCJcIi5jb25jYXQodmFsdWUsIFwicHhcIik7XG4gICAgfVxuXG4gICAgZWwuc3R5bGVbbmFtZV0gPSB2YWx1ZTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgcmV0dXJuIGdldENvbXB1dGVkU3R5bGVYKGVsLCBuYW1lKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2xpZW50UG9zaXRpb24oZWxlbSkge1xuICB2YXIgYm94O1xuICB2YXIgeDtcbiAgdmFyIHk7XG4gIHZhciBkb2MgPSBlbGVtLm93bmVyRG9jdW1lbnQ7XG4gIHZhciBib2R5ID0gZG9jLmJvZHk7XG4gIHZhciBkb2NFbGVtID0gZG9jICYmIGRvYy5kb2N1bWVudEVsZW1lbnQ7IC8vIOagueaNriBHQlMg5pyA5paw5pWw5o2u77yMQS1HcmFkZSBCcm93c2VycyDpg73lt7LmlK/mjIEgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IOaWueazle+8jOS4jeeUqOWGjeiAg+iZkeS8oOe7n+eahOWunueOsOaWueW8j1xuXG4gIGJveCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7IC8vIOazqO+8mmpRdWVyeSDov5jogIPomZHlh4/ljrsgZG9jRWxlbS5jbGllbnRMZWZ0L2NsaWVudFRvcFxuICAvLyDkvYbmtYvor5Xlj5HnjrDvvIzov5nmoLflj43ogIzkvJrlr7zoh7TlvZMgaHRtbCDlkowgYm9keSDmnInovrnot50v6L655qGG5qC35byP5pe277yM6I635Y+W55qE5YC85LiN5q2j56GuXG4gIC8vIOatpOWklu+8jGllNiDkvJrlv73nlaUgaHRtbCDnmoQgbWFyZ2luIOWAvO+8jOW5uOi/kOWcsOaYr+ayoeacieiwgeS8muWOu+iuvue9riBodG1sIOeahCBtYXJnaW5cblxuICB4ID0gYm94LmxlZnQ7XG4gIHkgPSBib3gudG9wOyAvLyBJbiBJRSwgbW9zdCBvZiB0aGUgdGltZSwgMiBleHRyYSBwaXhlbHMgYXJlIGFkZGVkIHRvIHRoZSB0b3AgYW5kIGxlZnRcbiAgLy8gZHVlIHRvIHRoZSBpbXBsaWNpdCAyLXBpeGVsIGluc2V0IGJvcmRlci4gIEluIElFNi83IHF1aXJrcyBtb2RlIGFuZFxuICAvLyBJRTYgc3RhbmRhcmRzIG1vZGUsIHRoaXMgYm9yZGVyIGNhbiBiZSBvdmVycmlkZGVuIGJ5IHNldHRpbmcgdGhlXG4gIC8vIGRvY3VtZW50IGVsZW1lbnQncyBib3JkZXIgdG8gemVybyAtLSB0aHVzLCB3ZSBjYW5ub3QgcmVseSBvbiB0aGVcbiAgLy8gb2Zmc2V0IGFsd2F5cyBiZWluZyAyIHBpeGVscy5cbiAgLy8gSW4gcXVpcmtzIG1vZGUsIHRoZSBvZmZzZXQgY2FuIGJlIGRldGVybWluZWQgYnkgcXVlcnlpbmcgdGhlIGJvZHknc1xuICAvLyBjbGllbnRMZWZ0L2NsaWVudFRvcCwgYnV0IGluIHN0YW5kYXJkcyBtb2RlLCBpdCBpcyBmb3VuZCBieSBxdWVyeWluZ1xuICAvLyB0aGUgZG9jdW1lbnQgZWxlbWVudCdzIGNsaWVudExlZnQvY2xpZW50VG9wLiAgU2luY2Ugd2UgYWxyZWFkeSBjYWxsZWRcbiAgLy8gZ2V0Q2xpZW50Qm91bmRpbmdSZWN0IHdlIGhhdmUgYWxyZWFkeSBmb3JjZWQgYSByZWZsb3csIHNvIGl0IGlzIG5vdFxuICAvLyB0b28gZXhwZW5zaXZlIGp1c3QgdG8gcXVlcnkgdGhlbSBhbGwuXG4gIC8vIGllIOS4i+W6lOivpeWHj+WOu+eql+WPo+eahOi+ueahhuWQp++8jOavleern+m7mOiupCBhYnNvbHV0ZSDpg73mmK/nm7jlr7nnqpflj6PlrprkvY3nmoRcbiAgLy8g56qX5Y+j6L655qGG5qCH5YeG5piv6K6+IGRvY3VtZW50RWxlbWVudCAscXVpcmtzIOaXtuiuvue9riBib2R5XG4gIC8vIOacgOWlveemgeatouWcqCBib2R5IOWSjCBodG1sIOS4iui+ueahhiDvvIzkvYYgaWUgPCA5IGh0bWwg6buY6K6k5pyJIDJweCDvvIzlh4/ljrtcbiAgLy8g5L2G5piv6Z2eIGllIOS4jeWPr+iDveiuvue9rueql+WPo+i+ueahhu+8jGJvZHkgaHRtbCDkuZ/kuI3mmK/nqpflj6MgLGllIOWPr+S7pemAmui/hyBodG1sLGJvZHkg6K6+572uXG4gIC8vIOagh+WHhiBpZSDkuIsgZG9jRWxlbS5jbGllbnRUb3Ag5bCx5pivIGJvcmRlci10b3BcbiAgLy8gaWU3IGh0bWwg5Y2z56qX5Y+j6L655qGG5pS55Y+Y5LiN5LqG44CC5rC46L+c5Li6IDJcbiAgLy8g5L2G5qCH5YeGIGZpcmVmb3gvY2hyb21lL2llOSDkuIsgZG9jRWxlbS5jbGllbnRUb3Ag5piv56qX5Y+j6L655qGG77yM5Y2z5L2/6K6+5LqGIGJvcmRlci10b3Ag5Lmf5Li6IDBcblxuICB4IC09IGRvY0VsZW0uY2xpZW50TGVmdCB8fCBib2R5LmNsaWVudExlZnQgfHwgMDtcbiAgeSAtPSBkb2NFbGVtLmNsaWVudFRvcCB8fCBib2R5LmNsaWVudFRvcCB8fCAwO1xuICByZXR1cm4ge1xuICAgIGxlZnQ6IHgsXG4gICAgdG9wOiB5XG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldFNjcm9sbCh3LCB0b3ApIHtcbiAgdmFyIHJldCA9IHdbXCJwYWdlXCIuY29uY2F0KHRvcCA/ICdZJyA6ICdYJywgXCJPZmZzZXRcIildO1xuICB2YXIgbWV0aG9kID0gXCJzY3JvbGxcIi5jb25jYXQodG9wID8gJ1RvcCcgOiAnTGVmdCcpO1xuXG4gIGlmICh0eXBlb2YgcmV0ICE9PSAnbnVtYmVyJykge1xuICAgIHZhciBkID0gdy5kb2N1bWVudDsgLy8gaWU2LDcsOCBzdGFuZGFyZCBtb2RlXG5cbiAgICByZXQgPSBkLmRvY3VtZW50RWxlbWVudFttZXRob2RdO1xuXG4gICAgaWYgKHR5cGVvZiByZXQgIT09ICdudW1iZXInKSB7XG4gICAgICAvLyBxdWlya3MgbW9kZVxuICAgICAgcmV0ID0gZC5ib2R5W21ldGhvZF07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsTGVmdCh3KSB7XG4gIHJldHVybiBnZXRTY3JvbGwodyk7XG59XG5cbmZ1bmN0aW9uIGdldFNjcm9sbFRvcCh3KSB7XG4gIHJldHVybiBnZXRTY3JvbGwodywgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIGdldE9mZnNldChlbCkge1xuICB2YXIgcG9zID0gZ2V0Q2xpZW50UG9zaXRpb24oZWwpO1xuICB2YXIgZG9jID0gZWwub3duZXJEb2N1bWVudDtcbiAgdmFyIHcgPSBkb2MuZGVmYXVsdFZpZXcgfHwgZG9jLnBhcmVudFdpbmRvdztcbiAgcG9zLmxlZnQgKz0gZ2V0U2Nyb2xsTGVmdCh3KTtcbiAgcG9zLnRvcCArPSBnZXRTY3JvbGxUb3Aodyk7XG4gIHJldHVybiBwb3M7XG59XG4vKipcbiAqIEEgY3J1ZGUgd2F5IG9mIGRldGVybWluaW5nIGlmIGFuIG9iamVjdCBpcyBhIHdpbmRvd1xuICogQG1lbWJlciB1dGlsXG4gKi9cblxuXG5mdW5jdGlvbiBpc1dpbmRvdyhvYmopIHtcbiAgLy8gbXVzdCB1c2UgPT0gZm9yIGllOFxuXG4gIC8qIGVzbGludCBlcWVxZXE6MCAqL1xuICByZXR1cm4gb2JqICE9PSBudWxsICYmIG9iaiAhPT0gdW5kZWZpbmVkICYmIG9iaiA9PSBvYmoud2luZG93O1xufVxuXG5mdW5jdGlvbiBnZXREb2N1bWVudChub2RlKSB7XG4gIGlmIChpc1dpbmRvdyhub2RlKSkge1xuICAgIHJldHVybiBub2RlLmRvY3VtZW50O1xuICB9XG5cbiAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDkpIHtcbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIHJldHVybiBub2RlLm93bmVyRG9jdW1lbnQ7XG59XG5cbmZ1bmN0aW9uIF9nZXRDb21wdXRlZFN0eWxlKGVsZW0sIG5hbWUsIGNzKSB7XG4gIHZhciBjb21wdXRlZFN0eWxlID0gY3M7XG4gIHZhciB2YWwgPSAnJztcbiAgdmFyIGQgPSBnZXREb2N1bWVudChlbGVtKTtcbiAgY29tcHV0ZWRTdHlsZSA9IGNvbXB1dGVkU3R5bGUgfHwgZC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGVsZW0sIG51bGwpOyAvLyBodHRwczovL2dpdGh1Yi5jb20va2lzc3l0ZWFtL2tpc3N5L2lzc3Vlcy82MVxuXG4gIGlmIChjb21wdXRlZFN0eWxlKSB7XG4gICAgdmFsID0gY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpIHx8IGNvbXB1dGVkU3R5bGVbbmFtZV07XG4gIH1cblxuICByZXR1cm4gdmFsO1xufVxuXG52YXIgX1JFX05VTV9OT19QWCA9IG5ldyBSZWdFeHAoXCJeKFwiLmNvbmNhdChSRV9OVU0sIFwiKSg/IXB4KVthLXolXSskXCIpLCAnaScpO1xuXG52YXIgUkVfUE9TID0gL14odG9wfHJpZ2h0fGJvdHRvbXxsZWZ0KSQvO1xudmFyIENVUlJFTlRfU1RZTEUgPSAnY3VycmVudFN0eWxlJztcbnZhciBSVU5USU1FX1NUWUxFID0gJ3J1bnRpbWVTdHlsZSc7XG52YXIgTEVGVCA9ICdsZWZ0JztcbnZhciBQWCA9ICdweCc7XG5cbmZ1bmN0aW9uIF9nZXRDb21wdXRlZFN0eWxlSUUoZWxlbSwgbmFtZSkge1xuICAvLyBjdXJyZW50U3R5bGUgbWF5YmUgbnVsbFxuICAvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvbXM1MzUyMzEuYXNweFxuICB2YXIgcmV0ID0gZWxlbVtDVVJSRU5UX1NUWUxFXSAmJiBlbGVtW0NVUlJFTlRfU1RZTEVdW25hbWVdOyAvLyDlvZMgd2lkdGgvaGVpZ2h0IOiuvue9ruS4uueZvuWIhuavlOaXtu+8jOmAmui/hyBwaXhlbExlZnQg5pa55byP6L2s5o2i55qEIHdpZHRoL2hlaWdodCDlgLxcbiAgLy8g5LiA5byA5aeL5bCx5aSE55CG5LqGISBDVVNUT01fU1RZTEUuaGVpZ2h0LENVU1RPTV9TVFlMRS53aWR0aCAsY3NzSG9vayDop6PlhrNAMjAxMS0wOC0xOVxuICAvLyDlnKggaWUg5LiL5LiN5a+577yM6ZyA6KaB55u05o6l55SoIG9mZnNldCDmlrnlvI9cbiAgLy8gYm9yZGVyV2lkdGgg562J5YC85Lmf5pyJ6Zeu6aKY77yM5L2G6ICD6JmR5YiwIGJvcmRlcldpZHRoIOiuvuS4uueZvuWIhuavlOeahOamgueOh+W+iOWwj++8jOi/memHjOWwseS4jeiAg+iZkeS6hlxuICAvLyBGcm9tIHRoZSBhd2Vzb21lIGhhY2sgYnkgRGVhbiBFZHdhcmRzXG4gIC8vIGh0dHA6Ly9lcmlrLmVhZS5uZXQvYXJjaGl2ZXMvMjAwNy8wNy8yNy8xOC41NC4xNS8jY29tbWVudC0xMDIyOTFcbiAgLy8gSWYgd2UncmUgbm90IGRlYWxpbmcgd2l0aCBhIHJlZ3VsYXIgcGl4ZWwgbnVtYmVyXG4gIC8vIGJ1dCBhIG51bWJlciB0aGF0IGhhcyBhIHdlaXJkIGVuZGluZywgd2UgbmVlZCB0byBjb252ZXJ0IGl0IHRvIHBpeGVsc1xuICAvLyBleGNsdWRlIGxlZnQgcmlnaHQgZm9yIHJlbGF0aXZpdHlcblxuICBpZiAoX1JFX05VTV9OT19QWC50ZXN0KHJldCkgJiYgIVJFX1BPUy50ZXN0KG5hbWUpKSB7XG4gICAgLy8gUmVtZW1iZXIgdGhlIG9yaWdpbmFsIHZhbHVlc1xuICAgIHZhciBzdHlsZSA9IGVsZW0uc3R5bGU7XG4gICAgdmFyIGxlZnQgPSBzdHlsZVtMRUZUXTtcbiAgICB2YXIgcnNMZWZ0ID0gZWxlbVtSVU5USU1FX1NUWUxFXVtMRUZUXTsgLy8gcHJldmVudCBmbGFzaGluZyBvZiBjb250ZW50XG5cbiAgICBlbGVtW1JVTlRJTUVfU1RZTEVdW0xFRlRdID0gZWxlbVtDVVJSRU5UX1NUWUxFXVtMRUZUXTsgLy8gUHV0IGluIHRoZSBuZXcgdmFsdWVzIHRvIGdldCBhIGNvbXB1dGVkIHZhbHVlIG91dFxuXG4gICAgc3R5bGVbTEVGVF0gPSBuYW1lID09PSAnZm9udFNpemUnID8gJzFlbScgOiByZXQgfHwgMDtcbiAgICByZXQgPSBzdHlsZS5waXhlbExlZnQgKyBQWDsgLy8gUmV2ZXJ0IHRoZSBjaGFuZ2VkIHZhbHVlc1xuXG4gICAgc3R5bGVbTEVGVF0gPSBsZWZ0O1xuICAgIGVsZW1bUlVOVElNRV9TVFlMRV1bTEVGVF0gPSByc0xlZnQ7XG4gIH1cblxuICByZXR1cm4gcmV0ID09PSAnJyA/ICdhdXRvJyA6IHJldDtcbn1cblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIGdldENvbXB1dGVkU3R5bGVYID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUgPyBfZ2V0Q29tcHV0ZWRTdHlsZSA6IF9nZXRDb21wdXRlZFN0eWxlSUU7XG59XG5cbmZ1bmN0aW9uIGdldE9mZnNldERpcmVjdGlvbihkaXIsIG9wdGlvbikge1xuICBpZiAoZGlyID09PSAnbGVmdCcpIHtcbiAgICByZXR1cm4gb3B0aW9uLnVzZUNzc1JpZ2h0ID8gJ3JpZ2h0JyA6IGRpcjtcbiAgfVxuXG4gIHJldHVybiBvcHRpb24udXNlQ3NzQm90dG9tID8gJ2JvdHRvbScgOiBkaXI7XG59XG5cbmZ1bmN0aW9uIG9wcG9zaXRlT2Zmc2V0RGlyZWN0aW9uKGRpcikge1xuICBpZiAoZGlyID09PSAnbGVmdCcpIHtcbiAgICByZXR1cm4gJ3JpZ2h0JztcbiAgfSBlbHNlIGlmIChkaXIgPT09ICdyaWdodCcpIHtcbiAgICByZXR1cm4gJ2xlZnQnO1xuICB9IGVsc2UgaWYgKGRpciA9PT0gJ3RvcCcpIHtcbiAgICByZXR1cm4gJ2JvdHRvbSc7XG4gIH0gZWxzZSBpZiAoZGlyID09PSAnYm90dG9tJykge1xuICAgIHJldHVybiAndG9wJztcbiAgfVxufSAvLyDorr7nva4gZWxlbSDnm7jlr7kgZWxlbS5vd25lckRvY3VtZW50IOeahOWdkOagh1xuXG5cbmZ1bmN0aW9uIHNldExlZnRUb3AoZWxlbSwgb2Zmc2V0LCBvcHRpb24pIHtcbiAgLy8gc2V0IHBvc2l0aW9uIGZpcnN0LCBpbi1jYXNlIHRvcC9sZWZ0IGFyZSBzZXQgZXZlbiBvbiBzdGF0aWMgZWxlbVxuICBpZiAoY3NzKGVsZW0sICdwb3NpdGlvbicpID09PSAnc3RhdGljJykge1xuICAgIGVsZW0uc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICB9XG5cbiAgdmFyIHByZXNldEggPSAtOTk5O1xuICB2YXIgcHJlc2V0ViA9IC05OTk7XG4gIHZhciBob3Jpem9udGFsUHJvcGVydHkgPSBnZXRPZmZzZXREaXJlY3Rpb24oJ2xlZnQnLCBvcHRpb24pO1xuICB2YXIgdmVydGljYWxQcm9wZXJ0eSA9IGdldE9mZnNldERpcmVjdGlvbigndG9wJywgb3B0aW9uKTtcbiAgdmFyIG9wcG9zaXRlSG9yaXpvbnRhbFByb3BlcnR5ID0gb3Bwb3NpdGVPZmZzZXREaXJlY3Rpb24oaG9yaXpvbnRhbFByb3BlcnR5KTtcbiAgdmFyIG9wcG9zaXRlVmVydGljYWxQcm9wZXJ0eSA9IG9wcG9zaXRlT2Zmc2V0RGlyZWN0aW9uKHZlcnRpY2FsUHJvcGVydHkpO1xuXG4gIGlmIChob3Jpem9udGFsUHJvcGVydHkgIT09ICdsZWZ0Jykge1xuICAgIHByZXNldEggPSA5OTk7XG4gIH1cblxuICBpZiAodmVydGljYWxQcm9wZXJ0eSAhPT0gJ3RvcCcpIHtcbiAgICBwcmVzZXRWID0gOTk5O1xuICB9XG5cbiAgdmFyIG9yaWdpbmFsVHJhbnNpdGlvbiA9ICcnO1xuICB2YXIgb3JpZ2luYWxPZmZzZXQgPSBnZXRPZmZzZXQoZWxlbSk7XG5cbiAgaWYgKCdsZWZ0JyBpbiBvZmZzZXQgfHwgJ3RvcCcgaW4gb2Zmc2V0KSB7XG4gICAgb3JpZ2luYWxUcmFuc2l0aW9uID0gZ2V0VHJhbnNpdGlvblByb3BlcnR5KGVsZW0pIHx8ICcnO1xuICAgIHNldFRyYW5zaXRpb25Qcm9wZXJ0eShlbGVtLCAnbm9uZScpO1xuICB9XG5cbiAgaWYgKCdsZWZ0JyBpbiBvZmZzZXQpIHtcbiAgICBlbGVtLnN0eWxlW29wcG9zaXRlSG9yaXpvbnRhbFByb3BlcnR5XSA9ICcnO1xuICAgIGVsZW0uc3R5bGVbaG9yaXpvbnRhbFByb3BlcnR5XSA9IFwiXCIuY29uY2F0KHByZXNldEgsIFwicHhcIik7XG4gIH1cblxuICBpZiAoJ3RvcCcgaW4gb2Zmc2V0KSB7XG4gICAgZWxlbS5zdHlsZVtvcHBvc2l0ZVZlcnRpY2FsUHJvcGVydHldID0gJyc7XG4gICAgZWxlbS5zdHlsZVt2ZXJ0aWNhbFByb3BlcnR5XSA9IFwiXCIuY29uY2F0KHByZXNldFYsIFwicHhcIik7XG4gIH0gLy8gZm9yY2UgcmVsYXlvdXRcblxuXG4gIGZvcmNlUmVsYXlvdXQoZWxlbSk7XG4gIHZhciBvbGQgPSBnZXRPZmZzZXQoZWxlbSk7XG4gIHZhciBvcmlnaW5hbFN0eWxlID0ge307XG5cbiAgZm9yICh2YXIga2V5IGluIG9mZnNldCkge1xuICAgIGlmIChvZmZzZXQuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgdmFyIGRpciA9IGdldE9mZnNldERpcmVjdGlvbihrZXksIG9wdGlvbik7XG4gICAgICB2YXIgcHJlc2V0ID0ga2V5ID09PSAnbGVmdCcgPyBwcmVzZXRIIDogcHJlc2V0VjtcbiAgICAgIHZhciBvZmYgPSBvcmlnaW5hbE9mZnNldFtrZXldIC0gb2xkW2tleV07XG5cbiAgICAgIGlmIChkaXIgPT09IGtleSkge1xuICAgICAgICBvcmlnaW5hbFN0eWxlW2Rpcl0gPSBwcmVzZXQgKyBvZmY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcmlnaW5hbFN0eWxlW2Rpcl0gPSBwcmVzZXQgLSBvZmY7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY3NzKGVsZW0sIG9yaWdpbmFsU3R5bGUpOyAvLyBmb3JjZSByZWxheW91dFxuXG4gIGZvcmNlUmVsYXlvdXQoZWxlbSk7XG5cbiAgaWYgKCdsZWZ0JyBpbiBvZmZzZXQgfHwgJ3RvcCcgaW4gb2Zmc2V0KSB7XG4gICAgc2V0VHJhbnNpdGlvblByb3BlcnR5KGVsZW0sIG9yaWdpbmFsVHJhbnNpdGlvbik7XG4gIH1cblxuICB2YXIgcmV0ID0ge307XG5cbiAgZm9yICh2YXIgX2tleSBpbiBvZmZzZXQpIHtcbiAgICBpZiAob2Zmc2V0Lmhhc093blByb3BlcnR5KF9rZXkpKSB7XG4gICAgICB2YXIgX2RpciA9IGdldE9mZnNldERpcmVjdGlvbihfa2V5LCBvcHRpb24pO1xuXG4gICAgICB2YXIgX29mZiA9IG9mZnNldFtfa2V5XSAtIG9yaWdpbmFsT2Zmc2V0W19rZXldO1xuXG4gICAgICBpZiAoX2tleSA9PT0gX2Rpcikge1xuICAgICAgICByZXRbX2Rpcl0gPSBvcmlnaW5hbFN0eWxlW19kaXJdICsgX29mZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldFtfZGlyXSA9IG9yaWdpbmFsU3R5bGVbX2Rpcl0gLSBfb2ZmO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNzcyhlbGVtLCByZXQpO1xufVxuXG5mdW5jdGlvbiBzZXRUcmFuc2Zvcm0kMShlbGVtLCBvZmZzZXQpIHtcbiAgdmFyIG9yaWdpbmFsT2Zmc2V0ID0gZ2V0T2Zmc2V0KGVsZW0pO1xuICB2YXIgb3JpZ2luYWxYWSA9IGdldFRyYW5zZm9ybVhZKGVsZW0pO1xuICB2YXIgcmVzdWx0WFkgPSB7XG4gICAgeDogb3JpZ2luYWxYWS54LFxuICAgIHk6IG9yaWdpbmFsWFkueVxuICB9O1xuXG4gIGlmICgnbGVmdCcgaW4gb2Zmc2V0KSB7XG4gICAgcmVzdWx0WFkueCA9IG9yaWdpbmFsWFkueCArIG9mZnNldC5sZWZ0IC0gb3JpZ2luYWxPZmZzZXQubGVmdDtcbiAgfVxuXG4gIGlmICgndG9wJyBpbiBvZmZzZXQpIHtcbiAgICByZXN1bHRYWS55ID0gb3JpZ2luYWxYWS55ICsgb2Zmc2V0LnRvcCAtIG9yaWdpbmFsT2Zmc2V0LnRvcDtcbiAgfVxuXG4gIHNldFRyYW5zZm9ybVhZKGVsZW0sIHJlc3VsdFhZKTtcbn1cblxuZnVuY3Rpb24gc2V0T2Zmc2V0KGVsZW0sIG9mZnNldCwgb3B0aW9uKSB7XG4gIGlmIChvcHRpb24uaWdub3JlU2hha2UpIHtcbiAgICB2YXIgb3JpT2Zmc2V0ID0gZ2V0T2Zmc2V0KGVsZW0pO1xuICAgIHZhciBvTGVmdCA9IG9yaU9mZnNldC5sZWZ0LnRvRml4ZWQoMCk7XG4gICAgdmFyIG9Ub3AgPSBvcmlPZmZzZXQudG9wLnRvRml4ZWQoMCk7XG4gICAgdmFyIHRMZWZ0ID0gb2Zmc2V0LmxlZnQudG9GaXhlZCgwKTtcbiAgICB2YXIgdFRvcCA9IG9mZnNldC50b3AudG9GaXhlZCgwKTtcblxuICAgIGlmIChvTGVmdCA9PT0gdExlZnQgJiYgb1RvcCA9PT0gdFRvcCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGlmIChvcHRpb24udXNlQ3NzUmlnaHQgfHwgb3B0aW9uLnVzZUNzc0JvdHRvbSkge1xuICAgIHNldExlZnRUb3AoZWxlbSwgb2Zmc2V0LCBvcHRpb24pO1xuICB9IGVsc2UgaWYgKG9wdGlvbi51c2VDc3NUcmFuc2Zvcm0gJiYgZ2V0VHJhbnNmb3JtTmFtZSgpIGluIGRvY3VtZW50LmJvZHkuc3R5bGUpIHtcbiAgICBzZXRUcmFuc2Zvcm0kMShlbGVtLCBvZmZzZXQpO1xuICB9IGVsc2Uge1xuICAgIHNldExlZnRUb3AoZWxlbSwgb2Zmc2V0LCBvcHRpb24pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVhY2goYXJyLCBmbikge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgIGZuKGFycltpXSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNCb3JkZXJCb3hGbihlbGVtKSB7XG4gIHJldHVybiBnZXRDb21wdXRlZFN0eWxlWChlbGVtLCAnYm94U2l6aW5nJykgPT09ICdib3JkZXItYm94Jztcbn1cblxudmFyIEJPWF9NT0RFTFMgPSBbJ21hcmdpbicsICdib3JkZXInLCAncGFkZGluZyddO1xudmFyIENPTlRFTlRfSU5ERVggPSAtMTtcbnZhciBQQURESU5HX0lOREVYID0gMjtcbnZhciBCT1JERVJfSU5ERVggPSAxO1xudmFyIE1BUkdJTl9JTkRFWCA9IDA7XG5cbmZ1bmN0aW9uIHN3YXAoZWxlbSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgdmFyIG9sZCA9IHt9O1xuICB2YXIgc3R5bGUgPSBlbGVtLnN0eWxlO1xuICB2YXIgbmFtZTsgLy8gUmVtZW1iZXIgdGhlIG9sZCB2YWx1ZXMsIGFuZCBpbnNlcnQgdGhlIG5ldyBvbmVzXG5cbiAgZm9yIChuYW1lIGluIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgb2xkW25hbWVdID0gc3R5bGVbbmFtZV07XG4gICAgICBzdHlsZVtuYW1lXSA9IG9wdGlvbnNbbmFtZV07XG4gICAgfVxuICB9XG5cbiAgY2FsbGJhY2suY2FsbChlbGVtKTsgLy8gUmV2ZXJ0IHRoZSBvbGQgdmFsdWVzXG5cbiAgZm9yIChuYW1lIGluIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgc3R5bGVbbmFtZV0gPSBvbGRbbmFtZV07XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldFBCTVdpZHRoKGVsZW0sIHByb3BzLCB3aGljaCkge1xuICB2YXIgdmFsdWUgPSAwO1xuICB2YXIgcHJvcDtcbiAgdmFyIGo7XG4gIHZhciBpO1xuXG4gIGZvciAoaiA9IDA7IGogPCBwcm9wcy5sZW5ndGg7IGorKykge1xuICAgIHByb3AgPSBwcm9wc1tqXTtcblxuICAgIGlmIChwcm9wKSB7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgd2hpY2gubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGNzc1Byb3AgPSB2b2lkIDA7XG5cbiAgICAgICAgaWYgKHByb3AgPT09ICdib3JkZXInKSB7XG4gICAgICAgICAgY3NzUHJvcCA9IFwiXCIuY29uY2F0KHByb3ApLmNvbmNhdCh3aGljaFtpXSwgXCJXaWR0aFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjc3NQcm9wID0gcHJvcCArIHdoaWNoW2ldO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsdWUgKz0gcGFyc2VGbG9hdChnZXRDb21wdXRlZFN0eWxlWChlbGVtLCBjc3NQcm9wKSkgfHwgMDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdmFsdWU7XG59XG5cbnZhciBkb21VdGlscyA9IHtcbiAgZ2V0UGFyZW50OiBmdW5jdGlvbiBnZXRQYXJlbnQoZWxlbWVudCkge1xuICAgIHZhciBwYXJlbnQgPSBlbGVtZW50O1xuXG4gICAgZG8ge1xuICAgICAgaWYgKHBhcmVudC5ub2RlVHlwZSA9PT0gMTEgJiYgcGFyZW50Lmhvc3QpIHtcbiAgICAgICAgcGFyZW50ID0gcGFyZW50Lmhvc3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcbiAgICAgIH1cbiAgICB9IHdoaWxlIChwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlICE9PSAxICYmIHBhcmVudC5ub2RlVHlwZSAhPT0gOSk7XG5cbiAgICByZXR1cm4gcGFyZW50O1xuICB9XG59O1xuZWFjaChbJ1dpZHRoJywgJ0hlaWdodCddLCBmdW5jdGlvbiAobmFtZSkge1xuICBkb21VdGlsc1tcImRvY1wiLmNvbmNhdChuYW1lKV0gPSBmdW5jdGlvbiAocmVmV2luKSB7XG4gICAgdmFyIGQgPSByZWZXaW4uZG9jdW1lbnQ7XG4gICAgcmV0dXJuIE1hdGgubWF4KCAvLyBmaXJlZm94IGNocm9tZSBkb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0PCBib2R5LnNjcm9sbEhlaWdodFxuICAgIC8vIGllIHN0YW5kYXJkIG1vZGUgOiBkb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0PiBib2R5LnNjcm9sbEhlaWdodFxuICAgIGQuZG9jdW1lbnRFbGVtZW50W1wic2Nyb2xsXCIuY29uY2F0KG5hbWUpXSwgLy8gcXVpcmtzIDogZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCDmnIDlpKfnrYnkuo7lj6/op4bnqpflj6PlpJrkuIDngrnvvJ9cbiAgICBkLmJvZHlbXCJzY3JvbGxcIi5jb25jYXQobmFtZSldLCBkb21VdGlsc1tcInZpZXdwb3J0XCIuY29uY2F0KG5hbWUpXShkKSk7XG4gIH07XG5cbiAgZG9tVXRpbHNbXCJ2aWV3cG9ydFwiLmNvbmNhdChuYW1lKV0gPSBmdW5jdGlvbiAod2luKSB7XG4gICAgLy8gcGMgYnJvd3NlciBpbmNsdWRlcyBzY3JvbGxiYXIgaW4gd2luZG93LmlubmVyV2lkdGhcbiAgICB2YXIgcHJvcCA9IFwiY2xpZW50XCIuY29uY2F0KG5hbWUpO1xuICAgIHZhciBkb2MgPSB3aW4uZG9jdW1lbnQ7XG4gICAgdmFyIGJvZHkgPSBkb2MuYm9keTtcbiAgICB2YXIgZG9jdW1lbnRFbGVtZW50ID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICB2YXIgZG9jdW1lbnRFbGVtZW50UHJvcCA9IGRvY3VtZW50RWxlbWVudFtwcm9wXTsgLy8g5qCH5YeG5qih5byP5Y+WIGRvY3VtZW50RWxlbWVudFxuICAgIC8vIGJhY2tjb21wYXQg5Y+WIGJvZHlcblxuICAgIHJldHVybiBkb2MuY29tcGF0TW9kZSA9PT0gJ0NTUzFDb21wYXQnICYmIGRvY3VtZW50RWxlbWVudFByb3AgfHwgYm9keSAmJiBib2R5W3Byb3BdIHx8IGRvY3VtZW50RWxlbWVudFByb3A7XG4gIH07XG59KTtcbi8qXG4g5b6X5Yiw5YWD57Sg55qE5aSn5bCP5L+h5oGvXG4gQHBhcmFtIGVsZW1cbiBAcGFyYW0gbmFtZVxuIEBwYXJhbSB7U3RyaW5nfSBbZXh0cmFdICAncGFkZGluZycgOiAoY3NzIHdpZHRoKSArIHBhZGRpbmdcbiAnYm9yZGVyJyA6IChjc3Mgd2lkdGgpICsgcGFkZGluZyArIGJvcmRlclxuICdtYXJnaW4nIDogKGNzcyB3aWR0aCkgKyBwYWRkaW5nICsgYm9yZGVyICsgbWFyZ2luXG4gKi9cblxuZnVuY3Rpb24gZ2V0V0goZWxlbSwgbmFtZSwgZXgpIHtcbiAgdmFyIGV4dHJhID0gZXg7XG5cbiAgaWYgKGlzV2luZG93KGVsZW0pKSB7XG4gICAgcmV0dXJuIG5hbWUgPT09ICd3aWR0aCcgPyBkb21VdGlscy52aWV3cG9ydFdpZHRoKGVsZW0pIDogZG9tVXRpbHMudmlld3BvcnRIZWlnaHQoZWxlbSk7XG4gIH0gZWxzZSBpZiAoZWxlbS5ub2RlVHlwZSA9PT0gOSkge1xuICAgIHJldHVybiBuYW1lID09PSAnd2lkdGgnID8gZG9tVXRpbHMuZG9jV2lkdGgoZWxlbSkgOiBkb21VdGlscy5kb2NIZWlnaHQoZWxlbSk7XG4gIH1cblxuICB2YXIgd2hpY2ggPSBuYW1lID09PSAnd2lkdGgnID8gWydMZWZ0JywgJ1JpZ2h0J10gOiBbJ1RvcCcsICdCb3R0b20nXTtcbiAgdmFyIGJvcmRlckJveFZhbHVlID0gbmFtZSA9PT0gJ3dpZHRoJyA/IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggOiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgdmFyIGlzQm9yZGVyQm94ID0gaXNCb3JkZXJCb3hGbihlbGVtKTtcbiAgdmFyIGNzc0JveFZhbHVlID0gMDtcblxuICBpZiAoYm9yZGVyQm94VmFsdWUgPT09IG51bGwgfHwgYm9yZGVyQm94VmFsdWUgPT09IHVuZGVmaW5lZCB8fCBib3JkZXJCb3hWYWx1ZSA8PSAwKSB7XG4gICAgYm9yZGVyQm94VmFsdWUgPSB1bmRlZmluZWQ7IC8vIEZhbGwgYmFjayB0byBjb21wdXRlZCB0aGVuIHVuIGNvbXB1dGVkIGNzcyBpZiBuZWNlc3NhcnlcblxuICAgIGNzc0JveFZhbHVlID0gZ2V0Q29tcHV0ZWRTdHlsZVgoZWxlbSwgbmFtZSk7XG5cbiAgICBpZiAoY3NzQm94VmFsdWUgPT09IG51bGwgfHwgY3NzQm94VmFsdWUgPT09IHVuZGVmaW5lZCB8fCBOdW1iZXIoY3NzQm94VmFsdWUpIDwgMCkge1xuICAgICAgY3NzQm94VmFsdWUgPSBlbGVtLnN0eWxlW25hbWVdIHx8IDA7XG4gICAgfSAvLyBOb3JtYWxpemUgJycsIGF1dG8sIGFuZCBwcmVwYXJlIGZvciBleHRyYVxuXG5cbiAgICBjc3NCb3hWYWx1ZSA9IHBhcnNlRmxvYXQoY3NzQm94VmFsdWUpIHx8IDA7XG4gIH1cblxuICBpZiAoZXh0cmEgPT09IHVuZGVmaW5lZCkge1xuICAgIGV4dHJhID0gaXNCb3JkZXJCb3ggPyBCT1JERVJfSU5ERVggOiBDT05URU5UX0lOREVYO1xuICB9XG5cbiAgdmFyIGJvcmRlckJveFZhbHVlT3JJc0JvcmRlckJveCA9IGJvcmRlckJveFZhbHVlICE9PSB1bmRlZmluZWQgfHwgaXNCb3JkZXJCb3g7XG4gIHZhciB2YWwgPSBib3JkZXJCb3hWYWx1ZSB8fCBjc3NCb3hWYWx1ZTtcblxuICBpZiAoZXh0cmEgPT09IENPTlRFTlRfSU5ERVgpIHtcbiAgICBpZiAoYm9yZGVyQm94VmFsdWVPcklzQm9yZGVyQm94KSB7XG4gICAgICByZXR1cm4gdmFsIC0gZ2V0UEJNV2lkdGgoZWxlbSwgWydib3JkZXInLCAncGFkZGluZyddLCB3aGljaCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNzc0JveFZhbHVlO1xuICB9IGVsc2UgaWYgKGJvcmRlckJveFZhbHVlT3JJc0JvcmRlckJveCkge1xuICAgIGlmIChleHRyYSA9PT0gQk9SREVSX0lOREVYKSB7XG4gICAgICByZXR1cm4gdmFsO1xuICAgIH1cblxuICAgIHJldHVybiB2YWwgKyAoZXh0cmEgPT09IFBBRERJTkdfSU5ERVggPyAtZ2V0UEJNV2lkdGgoZWxlbSwgWydib3JkZXInXSwgd2hpY2gpIDogZ2V0UEJNV2lkdGgoZWxlbSwgWydtYXJnaW4nXSwgd2hpY2gpKTtcbiAgfVxuXG4gIHJldHVybiBjc3NCb3hWYWx1ZSArIGdldFBCTVdpZHRoKGVsZW0sIEJPWF9NT0RFTFMuc2xpY2UoZXh0cmEpLCB3aGljaCk7XG59XG5cbnZhciBjc3NTaG93ID0ge1xuICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgdmlzaWJpbGl0eTogJ2hpZGRlbicsXG4gIGRpc3BsYXk6ICdibG9jaydcbn07IC8vIGZpeCAjMTE5IDogaHR0cHM6Ly9naXRodWIuY29tL2tpc3N5dGVhbS9raXNzeS9pc3N1ZXMvMTE5XG5cbmZ1bmN0aW9uIGdldFdISWdub3JlRGlzcGxheSgpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuOyBfa2V5MisrKSB7XG4gICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICB9XG5cbiAgdmFyIHZhbDtcbiAgdmFyIGVsZW0gPSBhcmdzWzBdOyAvLyBpbiBjYXNlIGVsZW0gaXMgd2luZG93XG4gIC8vIGVsZW0ub2Zmc2V0V2lkdGggPT09IHVuZGVmaW5lZFxuXG4gIGlmIChlbGVtLm9mZnNldFdpZHRoICE9PSAwKSB7XG4gICAgdmFsID0gZ2V0V0guYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgfSBlbHNlIHtcbiAgICBzd2FwKGVsZW0sIGNzc1Nob3csIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhbCA9IGdldFdILmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gdmFsO1xufVxuXG5lYWNoKFsnd2lkdGgnLCAnaGVpZ2h0J10sIGZ1bmN0aW9uIChuYW1lKSB7XG4gIHZhciBmaXJzdCA9IG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpO1xuXG4gIGRvbVV0aWxzW1wib3V0ZXJcIi5jb25jYXQoZmlyc3QpXSA9IGZ1bmN0aW9uIChlbCwgaW5jbHVkZU1hcmdpbikge1xuICAgIHJldHVybiBlbCAmJiBnZXRXSElnbm9yZURpc3BsYXkoZWwsIG5hbWUsIGluY2x1ZGVNYXJnaW4gPyBNQVJHSU5fSU5ERVggOiBCT1JERVJfSU5ERVgpO1xuICB9O1xuXG4gIHZhciB3aGljaCA9IG5hbWUgPT09ICd3aWR0aCcgPyBbJ0xlZnQnLCAnUmlnaHQnXSA6IFsnVG9wJywgJ0JvdHRvbSddO1xuXG4gIGRvbVV0aWxzW25hbWVdID0gZnVuY3Rpb24gKGVsZW0sIHYpIHtcbiAgICB2YXIgdmFsID0gdjtcblxuICAgIGlmICh2YWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKGVsZW0pIHtcbiAgICAgICAgdmFyIGlzQm9yZGVyQm94ID0gaXNCb3JkZXJCb3hGbihlbGVtKTtcblxuICAgICAgICBpZiAoaXNCb3JkZXJCb3gpIHtcbiAgICAgICAgICB2YWwgKz0gZ2V0UEJNV2lkdGgoZWxlbSwgWydwYWRkaW5nJywgJ2JvcmRlciddLCB3aGljaCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY3NzKGVsZW0sIG5hbWUsIHZhbCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVsZW0gJiYgZ2V0V0hJZ25vcmVEaXNwbGF5KGVsZW0sIG5hbWUsIENPTlRFTlRfSU5ERVgpO1xuICB9O1xufSk7XG5cbmZ1bmN0aW9uIG1peCh0bywgZnJvbSkge1xuICBmb3IgKHZhciBpIGluIGZyb20pIHtcbiAgICBpZiAoZnJvbS5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgdG9baV0gPSBmcm9tW2ldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0bztcbn1cblxudmFyIHV0aWxzID0ge1xuICBnZXRXaW5kb3c6IGZ1bmN0aW9uIGdldFdpbmRvdyhub2RlKSB7XG4gICAgaWYgKG5vZGUgJiYgbm9kZS5kb2N1bWVudCAmJiBub2RlLnNldFRpbWVvdXQpIHtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH1cblxuICAgIHZhciBkb2MgPSBub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZTtcbiAgICByZXR1cm4gZG9jLmRlZmF1bHRWaWV3IHx8IGRvYy5wYXJlbnRXaW5kb3c7XG4gIH0sXG4gIGdldERvY3VtZW50OiBnZXREb2N1bWVudCxcbiAgb2Zmc2V0OiBmdW5jdGlvbiBvZmZzZXQoZWwsIHZhbHVlLCBvcHRpb24pIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgc2V0T2Zmc2V0KGVsLCB2YWx1ZSwgb3B0aW9uIHx8IHt9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGdldE9mZnNldChlbCk7XG4gICAgfVxuICB9LFxuICBpc1dpbmRvdzogaXNXaW5kb3csXG4gIGVhY2g6IGVhY2gsXG4gIGNzczogY3NzLFxuICBjbG9uZTogZnVuY3Rpb24gY2xvbmUob2JqKSB7XG4gICAgdmFyIGk7XG4gICAgdmFyIHJldCA9IHt9O1xuXG4gICAgZm9yIChpIGluIG9iaikge1xuICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICByZXRbaV0gPSBvYmpbaV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIG92ZXJmbG93ID0gb2JqLm92ZXJmbG93O1xuXG4gICAgaWYgKG92ZXJmbG93KSB7XG4gICAgICBmb3IgKGkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICByZXQub3ZlcmZsb3dbaV0gPSBvYmoub3ZlcmZsb3dbaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmV0O1xuICB9LFxuICBtaXg6IG1peCxcbiAgZ2V0V2luZG93U2Nyb2xsTGVmdDogZnVuY3Rpb24gZ2V0V2luZG93U2Nyb2xsTGVmdCh3KSB7XG4gICAgcmV0dXJuIGdldFNjcm9sbExlZnQodyk7XG4gIH0sXG4gIGdldFdpbmRvd1Njcm9sbFRvcDogZnVuY3Rpb24gZ2V0V2luZG93U2Nyb2xsVG9wKHcpIHtcbiAgICByZXR1cm4gZ2V0U2Nyb2xsVG9wKHcpO1xuICB9LFxuICBtZXJnZTogZnVuY3Rpb24gbWVyZ2UoKSB7XG4gICAgdmFyIHJldCA9IHt9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHV0aWxzLm1peChyZXQsIGkgPCAwIHx8IGFyZ3VtZW50cy5sZW5ndGggPD0gaSA/IHVuZGVmaW5lZCA6IGFyZ3VtZW50c1tpXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldDtcbiAgfSxcbiAgdmlld3BvcnRXaWR0aDogMCxcbiAgdmlld3BvcnRIZWlnaHQ6IDBcbn07XG5taXgodXRpbHMsIGRvbVV0aWxzKTtcblxuLyoqXG4gKiDlvpfliLDkvJrlr7zoh7TlhYPntKDmmL7npLrkuI3lhajnmoTnpZblhYjlhYPntKBcbiAqL1xuXG52YXIgZ2V0UGFyZW50ID0gdXRpbHMuZ2V0UGFyZW50O1xuXG5mdW5jdGlvbiBnZXRPZmZzZXRQYXJlbnQoZWxlbWVudCkge1xuICBpZiAodXRpbHMuaXNXaW5kb3coZWxlbWVudCkgfHwgZWxlbWVudC5ub2RlVHlwZSA9PT0gOSkge1xuICAgIHJldHVybiBudWxsO1xuICB9IC8vIGllIOi/meS4quS5n+S4jeaYr+WujOWFqOWPr+ihjFxuXG4gIC8qXG4gICA8ZGl2IHN0eWxlPVwid2lkdGg6IDUwcHg7aGVpZ2h0OiAxMDBweDtvdmVyZmxvdzogaGlkZGVuXCI+XG4gICA8ZGl2IHN0eWxlPVwid2lkdGg6IDUwcHg7aGVpZ2h0OiAxMDBweDtwb3NpdGlvbjogcmVsYXRpdmU7XCIgaWQ9XCJkNlwiPlxuICAg5YWD57SgIDYg6auYIDEwMHB4IOWuvSA1MHB4PGJyLz5cbiAgIDwvZGl2PlxuICAgPC9kaXY+XG4gICAqL1xuICAvLyBlbGVtZW50Lm9mZnNldFBhcmVudCBkb2VzIHRoZSByaWdodCB0aGluZyBpbiBpZTcgYW5kIGJlbG93LiBSZXR1cm4gcGFyZW50IHdpdGggbGF5b3V0IVxuICAvLyAgSW4gb3RoZXIgYnJvd3NlcnMgaXQgb25seSBpbmNsdWRlcyBlbGVtZW50cyB3aXRoIHBvc2l0aW9uIGFic29sdXRlLCByZWxhdGl2ZSBvclxuICAvLyBmaXhlZCwgbm90IGVsZW1lbnRzIHdpdGggb3ZlcmZsb3cgc2V0IHRvIGF1dG8gb3Igc2Nyb2xsLlxuICAvLyAgICAgICAgaWYgKFVBLmllICYmIGllTW9kZSA8IDgpIHtcbiAgLy8gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG4gIC8vICAgICAgICB9XG4gIC8vIOe7n+S4gOeahCBvZmZzZXRQYXJlbnQg5pa55rOVXG5cblxuICB2YXIgZG9jID0gdXRpbHMuZ2V0RG9jdW1lbnQoZWxlbWVudCk7XG4gIHZhciBib2R5ID0gZG9jLmJvZHk7XG4gIHZhciBwYXJlbnQ7XG4gIHZhciBwb3NpdGlvblN0eWxlID0gdXRpbHMuY3NzKGVsZW1lbnQsICdwb3NpdGlvbicpO1xuICB2YXIgc2tpcFN0YXRpYyA9IHBvc2l0aW9uU3R5bGUgPT09ICdmaXhlZCcgfHwgcG9zaXRpb25TdHlsZSA9PT0gJ2Fic29sdXRlJztcblxuICBpZiAoIXNraXBTdGF0aWMpIHtcbiAgICByZXR1cm4gZWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaHRtbCcgPyBudWxsIDogZ2V0UGFyZW50KGVsZW1lbnQpO1xuICB9XG5cbiAgZm9yIChwYXJlbnQgPSBnZXRQYXJlbnQoZWxlbWVudCk7IHBhcmVudCAmJiBwYXJlbnQgIT09IGJvZHkgJiYgcGFyZW50Lm5vZGVUeXBlICE9PSA5OyBwYXJlbnQgPSBnZXRQYXJlbnQocGFyZW50KSkge1xuICAgIHBvc2l0aW9uU3R5bGUgPSB1dGlscy5jc3MocGFyZW50LCAncG9zaXRpb24nKTtcblxuICAgIGlmIChwb3NpdGlvblN0eWxlICE9PSAnc3RhdGljJykge1xuICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxudmFyIGdldFBhcmVudCQxID0gdXRpbHMuZ2V0UGFyZW50O1xuZnVuY3Rpb24gaXNBbmNlc3RvckZpeGVkKGVsZW1lbnQpIHtcbiAgaWYgKHV0aWxzLmlzV2luZG93KGVsZW1lbnQpIHx8IGVsZW1lbnQubm9kZVR5cGUgPT09IDkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgZG9jID0gdXRpbHMuZ2V0RG9jdW1lbnQoZWxlbWVudCk7XG4gIHZhciBib2R5ID0gZG9jLmJvZHk7XG4gIHZhciBwYXJlbnQgPSBudWxsO1xuXG4gIGZvciAocGFyZW50ID0gZ2V0UGFyZW50JDEoZWxlbWVudCk7IC8vIOS/ruWkjeWFg+e0oOS9jeS6jiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQg5LiL5a+86Ie05bSp5rqD6Zeu6aKYXG4gIHBhcmVudCAmJiBwYXJlbnQgIT09IGJvZHkgJiYgcGFyZW50ICE9PSBkb2M7IHBhcmVudCA9IGdldFBhcmVudCQxKHBhcmVudCkpIHtcbiAgICB2YXIgcG9zaXRpb25TdHlsZSA9IHV0aWxzLmNzcyhwYXJlbnQsICdwb3NpdGlvbicpO1xuXG4gICAgaWYgKHBvc2l0aW9uU3R5bGUgPT09ICdmaXhlZCcpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiDojrflvpflhYPntKDnmoTmmL7npLrpg6jliIbnmoTljLrln59cbiAqL1xuXG5mdW5jdGlvbiBnZXRWaXNpYmxlUmVjdEZvckVsZW1lbnQoZWxlbWVudCwgYWx3YXlzQnlWaWV3cG9ydCkge1xuICB2YXIgdmlzaWJsZVJlY3QgPSB7XG4gICAgbGVmdDogMCxcbiAgICByaWdodDogSW5maW5pdHksXG4gICAgdG9wOiAwLFxuICAgIGJvdHRvbTogSW5maW5pdHlcbiAgfTtcbiAgdmFyIGVsID0gZ2V0T2Zmc2V0UGFyZW50KGVsZW1lbnQpO1xuICB2YXIgZG9jID0gdXRpbHMuZ2V0RG9jdW1lbnQoZWxlbWVudCk7XG4gIHZhciB3aW4gPSBkb2MuZGVmYXVsdFZpZXcgfHwgZG9jLnBhcmVudFdpbmRvdztcbiAgdmFyIGJvZHkgPSBkb2MuYm9keTtcbiAgdmFyIGRvY3VtZW50RWxlbWVudCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7IC8vIERldGVybWluZSB0aGUgc2l6ZSBvZiB0aGUgdmlzaWJsZSByZWN0IGJ5IGNsaW1iaW5nIHRoZSBkb20gYWNjb3VudGluZyBmb3JcbiAgLy8gYWxsIHNjcm9sbGFibGUgY29udGFpbmVycy5cblxuICB3aGlsZSAoZWwpIHtcbiAgICAvLyBjbGllbnRXaWR0aCBpcyB6ZXJvIGZvciBpbmxpbmUgYmxvY2sgZWxlbWVudHMgaW4gaWUuXG4gICAgaWYgKChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ01TSUUnKSA9PT0gLTEgfHwgZWwuY2xpZW50V2lkdGggIT09IDApICYmIC8vIGJvZHkgbWF5IGhhdmUgb3ZlcmZsb3cgc2V0IG9uIGl0LCB5ZXQgd2Ugc3RpbGwgZ2V0IHRoZSBlbnRpcmVcbiAgICAvLyB2aWV3cG9ydC4gSW4gc29tZSBicm93c2VycywgZWwub2Zmc2V0UGFyZW50IG1heSBiZVxuICAgIC8vIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgc28gY2hlY2sgZm9yIHRoYXQgdG9vLlxuICAgIGVsICE9PSBib2R5ICYmIGVsICE9PSBkb2N1bWVudEVsZW1lbnQgJiYgdXRpbHMuY3NzKGVsLCAnb3ZlcmZsb3cnKSAhPT0gJ3Zpc2libGUnKSB7XG4gICAgICB2YXIgcG9zID0gdXRpbHMub2Zmc2V0KGVsKTsgLy8gYWRkIGJvcmRlclxuXG4gICAgICBwb3MubGVmdCArPSBlbC5jbGllbnRMZWZ0O1xuICAgICAgcG9zLnRvcCArPSBlbC5jbGllbnRUb3A7XG4gICAgICB2aXNpYmxlUmVjdC50b3AgPSBNYXRoLm1heCh2aXNpYmxlUmVjdC50b3AsIHBvcy50b3ApO1xuICAgICAgdmlzaWJsZVJlY3QucmlnaHQgPSBNYXRoLm1pbih2aXNpYmxlUmVjdC5yaWdodCwgLy8gY29uc2lkZXIgYXJlYSB3aXRob3V0IHNjcm9sbEJhclxuICAgICAgcG9zLmxlZnQgKyBlbC5jbGllbnRXaWR0aCk7XG4gICAgICB2aXNpYmxlUmVjdC5ib3R0b20gPSBNYXRoLm1pbih2aXNpYmxlUmVjdC5ib3R0b20sIHBvcy50b3AgKyBlbC5jbGllbnRIZWlnaHQpO1xuICAgICAgdmlzaWJsZVJlY3QubGVmdCA9IE1hdGgubWF4KHZpc2libGVSZWN0LmxlZnQsIHBvcy5sZWZ0KTtcbiAgICB9IGVsc2UgaWYgKGVsID09PSBib2R5IHx8IGVsID09PSBkb2N1bWVudEVsZW1lbnQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGVsID0gZ2V0T2Zmc2V0UGFyZW50KGVsKTtcbiAgfSAvLyBTZXQgZWxlbWVudCBwb3NpdGlvbiB0byBmaXhlZFxuICAvLyBtYWtlIHN1cmUgYWJzb2x1dGUgZWxlbWVudCBpdHNlbGYgZG9uJ3QgYWZmZWN0IGl0J3MgdmlzaWJsZSBhcmVhXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbnQtZGVzaWduL2FudC1kZXNpZ24vaXNzdWVzLzc2MDFcblxuXG4gIHZhciBvcmlnaW5hbFBvc2l0aW9uID0gbnVsbDtcblxuICBpZiAoIXV0aWxzLmlzV2luZG93KGVsZW1lbnQpICYmIGVsZW1lbnQubm9kZVR5cGUgIT09IDkpIHtcbiAgICBvcmlnaW5hbFBvc2l0aW9uID0gZWxlbWVudC5zdHlsZS5wb3NpdGlvbjtcbiAgICB2YXIgcG9zaXRpb24gPSB1dGlscy5jc3MoZWxlbWVudCwgJ3Bvc2l0aW9uJyk7XG5cbiAgICBpZiAocG9zaXRpb24gPT09ICdhYnNvbHV0ZScpIHtcbiAgICAgIGVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgIH1cbiAgfVxuXG4gIHZhciBzY3JvbGxYID0gdXRpbHMuZ2V0V2luZG93U2Nyb2xsTGVmdCh3aW4pO1xuICB2YXIgc2Nyb2xsWSA9IHV0aWxzLmdldFdpbmRvd1Njcm9sbFRvcCh3aW4pO1xuICB2YXIgdmlld3BvcnRXaWR0aCA9IHV0aWxzLnZpZXdwb3J0V2lkdGgod2luKTtcbiAgdmFyIHZpZXdwb3J0SGVpZ2h0ID0gdXRpbHMudmlld3BvcnRIZWlnaHQod2luKTtcbiAgdmFyIGRvY3VtZW50V2lkdGggPSBkb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGg7XG4gIHZhciBkb2N1bWVudEhlaWdodCA9IGRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQ7IC8vIHNjcm9sbFhYWCBvbiBodG1sIGlzIHN5bmMgd2l0aCBib2R5IHdoaWNoIG1lYW5zIG92ZXJmbG93OiBoaWRkZW4gb24gYm9keSBnZXRzIHdyb25nIHNjcm9sbFhYWC5cbiAgLy8gV2Ugc2hvdWxkIGN1dCB0aGlzIG91cnNlbGYuXG5cbiAgdmFyIGJvZHlTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGJvZHkpO1xuXG4gIGlmIChib2R5U3R5bGUub3ZlcmZsb3dYID09PSAnaGlkZGVuJykge1xuICAgIGRvY3VtZW50V2lkdGggPSB3aW4uaW5uZXJXaWR0aDtcbiAgfVxuXG4gIGlmIChib2R5U3R5bGUub3ZlcmZsb3dZID09PSAnaGlkZGVuJykge1xuICAgIGRvY3VtZW50SGVpZ2h0ID0gd2luLmlubmVySGVpZ2h0O1xuICB9IC8vIFJlc2V0IGVsZW1lbnQgcG9zaXRpb24gYWZ0ZXIgY2FsY3VsYXRlIHRoZSB2aXNpYmxlIGFyZWFcblxuXG4gIGlmIChlbGVtZW50LnN0eWxlKSB7XG4gICAgZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9IG9yaWdpbmFsUG9zaXRpb247XG4gIH1cblxuICBpZiAoYWx3YXlzQnlWaWV3cG9ydCB8fCBpc0FuY2VzdG9yRml4ZWQoZWxlbWVudCkpIHtcbiAgICAvLyBDbGlwIGJ5IHZpZXdwb3J0J3Mgc2l6ZS5cbiAgICB2aXNpYmxlUmVjdC5sZWZ0ID0gTWF0aC5tYXgodmlzaWJsZVJlY3QubGVmdCwgc2Nyb2xsWCk7XG4gICAgdmlzaWJsZVJlY3QudG9wID0gTWF0aC5tYXgodmlzaWJsZVJlY3QudG9wLCBzY3JvbGxZKTtcbiAgICB2aXNpYmxlUmVjdC5yaWdodCA9IE1hdGgubWluKHZpc2libGVSZWN0LnJpZ2h0LCBzY3JvbGxYICsgdmlld3BvcnRXaWR0aCk7XG4gICAgdmlzaWJsZVJlY3QuYm90dG9tID0gTWF0aC5taW4odmlzaWJsZVJlY3QuYm90dG9tLCBzY3JvbGxZICsgdmlld3BvcnRIZWlnaHQpO1xuICB9IGVsc2Uge1xuICAgIC8vIENsaXAgYnkgZG9jdW1lbnQncyBzaXplLlxuICAgIHZhciBtYXhWaXNpYmxlV2lkdGggPSBNYXRoLm1heChkb2N1bWVudFdpZHRoLCBzY3JvbGxYICsgdmlld3BvcnRXaWR0aCk7XG4gICAgdmlzaWJsZVJlY3QucmlnaHQgPSBNYXRoLm1pbih2aXNpYmxlUmVjdC5yaWdodCwgbWF4VmlzaWJsZVdpZHRoKTtcbiAgICB2YXIgbWF4VmlzaWJsZUhlaWdodCA9IE1hdGgubWF4KGRvY3VtZW50SGVpZ2h0LCBzY3JvbGxZICsgdmlld3BvcnRIZWlnaHQpO1xuICAgIHZpc2libGVSZWN0LmJvdHRvbSA9IE1hdGgubWluKHZpc2libGVSZWN0LmJvdHRvbSwgbWF4VmlzaWJsZUhlaWdodCk7XG4gIH1cblxuICByZXR1cm4gdmlzaWJsZVJlY3QudG9wID49IDAgJiYgdmlzaWJsZVJlY3QubGVmdCA+PSAwICYmIHZpc2libGVSZWN0LmJvdHRvbSA+IHZpc2libGVSZWN0LnRvcCAmJiB2aXNpYmxlUmVjdC5yaWdodCA+IHZpc2libGVSZWN0LmxlZnQgPyB2aXNpYmxlUmVjdCA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIGFkanVzdEZvclZpZXdwb3J0KGVsRnV0dXJlUG9zLCBlbFJlZ2lvbiwgdmlzaWJsZVJlY3QsIG92ZXJmbG93KSB7XG4gIHZhciBwb3MgPSB1dGlscy5jbG9uZShlbEZ1dHVyZVBvcyk7XG4gIHZhciBzaXplID0ge1xuICAgIHdpZHRoOiBlbFJlZ2lvbi53aWR0aCxcbiAgICBoZWlnaHQ6IGVsUmVnaW9uLmhlaWdodFxuICB9O1xuXG4gIGlmIChvdmVyZmxvdy5hZGp1c3RYICYmIHBvcy5sZWZ0IDwgdmlzaWJsZVJlY3QubGVmdCkge1xuICAgIHBvcy5sZWZ0ID0gdmlzaWJsZVJlY3QubGVmdDtcbiAgfSAvLyBMZWZ0IGVkZ2UgaW5zaWRlIGFuZCByaWdodCBlZGdlIG91dHNpZGUgdmlld3BvcnQsIHRyeSB0byByZXNpemUgaXQuXG5cblxuICBpZiAob3ZlcmZsb3cucmVzaXplV2lkdGggJiYgcG9zLmxlZnQgPj0gdmlzaWJsZVJlY3QubGVmdCAmJiBwb3MubGVmdCArIHNpemUud2lkdGggPiB2aXNpYmxlUmVjdC5yaWdodCkge1xuICAgIHNpemUud2lkdGggLT0gcG9zLmxlZnQgKyBzaXplLndpZHRoIC0gdmlzaWJsZVJlY3QucmlnaHQ7XG4gIH0gLy8gUmlnaHQgZWRnZSBvdXRzaWRlIHZpZXdwb3J0LCB0cnkgdG8gbW92ZSBpdC5cblxuXG4gIGlmIChvdmVyZmxvdy5hZGp1c3RYICYmIHBvcy5sZWZ0ICsgc2l6ZS53aWR0aCA+IHZpc2libGVSZWN0LnJpZ2h0KSB7XG4gICAgLy8g5L+d6K+B5bem6L6555WM5ZKM5Y+v6KeG5Yy65Z+f5bem6L6555WM5a+56b2QXG4gICAgcG9zLmxlZnQgPSBNYXRoLm1heCh2aXNpYmxlUmVjdC5yaWdodCAtIHNpemUud2lkdGgsIHZpc2libGVSZWN0LmxlZnQpO1xuICB9IC8vIFRvcCBlZGdlIG91dHNpZGUgdmlld3BvcnQsIHRyeSB0byBtb3ZlIGl0LlxuXG5cbiAgaWYgKG92ZXJmbG93LmFkanVzdFkgJiYgcG9zLnRvcCA8IHZpc2libGVSZWN0LnRvcCkge1xuICAgIHBvcy50b3AgPSB2aXNpYmxlUmVjdC50b3A7XG4gIH0gLy8gVG9wIGVkZ2UgaW5zaWRlIGFuZCBib3R0b20gZWRnZSBvdXRzaWRlIHZpZXdwb3J0LCB0cnkgdG8gcmVzaXplIGl0LlxuXG5cbiAgaWYgKG92ZXJmbG93LnJlc2l6ZUhlaWdodCAmJiBwb3MudG9wID49IHZpc2libGVSZWN0LnRvcCAmJiBwb3MudG9wICsgc2l6ZS5oZWlnaHQgPiB2aXNpYmxlUmVjdC5ib3R0b20pIHtcbiAgICBzaXplLmhlaWdodCAtPSBwb3MudG9wICsgc2l6ZS5oZWlnaHQgLSB2aXNpYmxlUmVjdC5ib3R0b207XG4gIH0gLy8gQm90dG9tIGVkZ2Ugb3V0c2lkZSB2aWV3cG9ydCwgdHJ5IHRvIG1vdmUgaXQuXG5cblxuICBpZiAob3ZlcmZsb3cuYWRqdXN0WSAmJiBwb3MudG9wICsgc2l6ZS5oZWlnaHQgPiB2aXNpYmxlUmVjdC5ib3R0b20pIHtcbiAgICAvLyDkv53or4HkuIrovrnnlYzlkozlj6/op4bljLrln5/kuIrovrnnlYzlr7npvZBcbiAgICBwb3MudG9wID0gTWF0aC5tYXgodmlzaWJsZVJlY3QuYm90dG9tIC0gc2l6ZS5oZWlnaHQsIHZpc2libGVSZWN0LnRvcCk7XG4gIH1cblxuICByZXR1cm4gdXRpbHMubWl4KHBvcywgc2l6ZSk7XG59XG5cbmZ1bmN0aW9uIGdldFJlZ2lvbihub2RlKSB7XG4gIHZhciBvZmZzZXQ7XG4gIHZhciB3O1xuICB2YXIgaDtcblxuICBpZiAoIXV0aWxzLmlzV2luZG93KG5vZGUpICYmIG5vZGUubm9kZVR5cGUgIT09IDkpIHtcbiAgICBvZmZzZXQgPSB1dGlscy5vZmZzZXQobm9kZSk7XG4gICAgdyA9IHV0aWxzLm91dGVyV2lkdGgobm9kZSk7XG4gICAgaCA9IHV0aWxzLm91dGVySGVpZ2h0KG5vZGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB3aW4gPSB1dGlscy5nZXRXaW5kb3cobm9kZSk7XG4gICAgb2Zmc2V0ID0ge1xuICAgICAgbGVmdDogdXRpbHMuZ2V0V2luZG93U2Nyb2xsTGVmdCh3aW4pLFxuICAgICAgdG9wOiB1dGlscy5nZXRXaW5kb3dTY3JvbGxUb3Aod2luKVxuICAgIH07XG4gICAgdyA9IHV0aWxzLnZpZXdwb3J0V2lkdGgod2luKTtcbiAgICBoID0gdXRpbHMudmlld3BvcnRIZWlnaHQod2luKTtcbiAgfVxuXG4gIG9mZnNldC53aWR0aCA9IHc7XG4gIG9mZnNldC5oZWlnaHQgPSBoO1xuICByZXR1cm4gb2Zmc2V0O1xufVxuXG4vKipcbiAqIOiOt+WPliBub2RlIOS4iueahCBhbGlnbiDlr7npvZDngrkg55u45a+55LqO6aG16Z2i55qE5Z2Q5qCHXG4gKi9cbmZ1bmN0aW9uIGdldEFsaWduT2Zmc2V0KHJlZ2lvbiwgYWxpZ24pIHtcbiAgdmFyIFYgPSBhbGlnbi5jaGFyQXQoMCk7XG4gIHZhciBIID0gYWxpZ24uY2hhckF0KDEpO1xuICB2YXIgdyA9IHJlZ2lvbi53aWR0aDtcbiAgdmFyIGggPSByZWdpb24uaGVpZ2h0O1xuICB2YXIgeCA9IHJlZ2lvbi5sZWZ0O1xuICB2YXIgeSA9IHJlZ2lvbi50b3A7XG5cbiAgaWYgKFYgPT09ICdjJykge1xuICAgIHkgKz0gaCAvIDI7XG4gIH0gZWxzZSBpZiAoViA9PT0gJ2InKSB7XG4gICAgeSArPSBoO1xuICB9XG5cbiAgaWYgKEggPT09ICdjJykge1xuICAgIHggKz0gdyAvIDI7XG4gIH0gZWxzZSBpZiAoSCA9PT0gJ3InKSB7XG4gICAgeCArPSB3O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBsZWZ0OiB4LFxuICAgIHRvcDogeVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRFbEZ1dHVyZVBvcyhlbFJlZ2lvbiwgcmVmTm9kZVJlZ2lvbiwgcG9pbnRzLCBvZmZzZXQsIHRhcmdldE9mZnNldCkge1xuICB2YXIgcDEgPSBnZXRBbGlnbk9mZnNldChyZWZOb2RlUmVnaW9uLCBwb2ludHNbMV0pO1xuICB2YXIgcDIgPSBnZXRBbGlnbk9mZnNldChlbFJlZ2lvbiwgcG9pbnRzWzBdKTtcbiAgdmFyIGRpZmYgPSBbcDIubGVmdCAtIHAxLmxlZnQsIHAyLnRvcCAtIHAxLnRvcF07XG4gIHJldHVybiB7XG4gICAgbGVmdDogTWF0aC5yb3VuZChlbFJlZ2lvbi5sZWZ0IC0gZGlmZlswXSArIG9mZnNldFswXSAtIHRhcmdldE9mZnNldFswXSksXG4gICAgdG9wOiBNYXRoLnJvdW5kKGVsUmVnaW9uLnRvcCAtIGRpZmZbMV0gKyBvZmZzZXRbMV0gLSB0YXJnZXRPZmZzZXRbMV0pXG4gIH07XG59XG5cbi8qKlxuICogYWxpZ24gZG9tIG5vZGUgZmxleGlibHlcbiAqIEBhdXRob3IgeWltaW5naGVAZ21haWwuY29tXG4gKi9cblxuZnVuY3Rpb24gaXNGYWlsWChlbEZ1dHVyZVBvcywgZWxSZWdpb24sIHZpc2libGVSZWN0KSB7XG4gIHJldHVybiBlbEZ1dHVyZVBvcy5sZWZ0IDwgdmlzaWJsZVJlY3QubGVmdCB8fCBlbEZ1dHVyZVBvcy5sZWZ0ICsgZWxSZWdpb24ud2lkdGggPiB2aXNpYmxlUmVjdC5yaWdodDtcbn1cblxuZnVuY3Rpb24gaXNGYWlsWShlbEZ1dHVyZVBvcywgZWxSZWdpb24sIHZpc2libGVSZWN0KSB7XG4gIHJldHVybiBlbEZ1dHVyZVBvcy50b3AgPCB2aXNpYmxlUmVjdC50b3AgfHwgZWxGdXR1cmVQb3MudG9wICsgZWxSZWdpb24uaGVpZ2h0ID4gdmlzaWJsZVJlY3QuYm90dG9tO1xufVxuXG5mdW5jdGlvbiBpc0NvbXBsZXRlRmFpbFgoZWxGdXR1cmVQb3MsIGVsUmVnaW9uLCB2aXNpYmxlUmVjdCkge1xuICByZXR1cm4gZWxGdXR1cmVQb3MubGVmdCA+IHZpc2libGVSZWN0LnJpZ2h0IHx8IGVsRnV0dXJlUG9zLmxlZnQgKyBlbFJlZ2lvbi53aWR0aCA8IHZpc2libGVSZWN0LmxlZnQ7XG59XG5cbmZ1bmN0aW9uIGlzQ29tcGxldGVGYWlsWShlbEZ1dHVyZVBvcywgZWxSZWdpb24sIHZpc2libGVSZWN0KSB7XG4gIHJldHVybiBlbEZ1dHVyZVBvcy50b3AgPiB2aXNpYmxlUmVjdC5ib3R0b20gfHwgZWxGdXR1cmVQb3MudG9wICsgZWxSZWdpb24uaGVpZ2h0IDwgdmlzaWJsZVJlY3QudG9wO1xufVxuXG5mdW5jdGlvbiBmbGlwKHBvaW50cywgcmVnLCBtYXApIHtcbiAgdmFyIHJldCA9IFtdO1xuICB1dGlscy5lYWNoKHBvaW50cywgZnVuY3Rpb24gKHApIHtcbiAgICByZXQucHVzaChwLnJlcGxhY2UocmVnLCBmdW5jdGlvbiAobSkge1xuICAgICAgcmV0dXJuIG1hcFttXTtcbiAgICB9KSk7XG4gIH0pO1xuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBmbGlwT2Zmc2V0KG9mZnNldCwgaW5kZXgpIHtcbiAgb2Zmc2V0W2luZGV4XSA9IC1vZmZzZXRbaW5kZXhdO1xuICByZXR1cm4gb2Zmc2V0O1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0T2Zmc2V0KHN0ciwgb2Zmc2V0TGVuKSB7XG4gIHZhciBuO1xuXG4gIGlmICgvJSQvLnRlc3Qoc3RyKSkge1xuICAgIG4gPSBwYXJzZUludChzdHIuc3Vic3RyaW5nKDAsIHN0ci5sZW5ndGggLSAxKSwgMTApIC8gMTAwICogb2Zmc2V0TGVuO1xuICB9IGVsc2Uge1xuICAgIG4gPSBwYXJzZUludChzdHIsIDEwKTtcbiAgfVxuXG4gIHJldHVybiBuIHx8IDA7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZU9mZnNldChvZmZzZXQsIGVsKSB7XG4gIG9mZnNldFswXSA9IGNvbnZlcnRPZmZzZXQob2Zmc2V0WzBdLCBlbC53aWR0aCk7XG4gIG9mZnNldFsxXSA9IGNvbnZlcnRPZmZzZXQob2Zmc2V0WzFdLCBlbC5oZWlnaHQpO1xufVxuLyoqXG4gKiBAcGFyYW0gZWxcbiAqIEBwYXJhbSB0Z3RSZWdpb24g5Y+C54Wn6IqC54K55omA5Y2g55qE5Yy65Z+fOiB7IGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCB9XG4gKiBAcGFyYW0gYWxpZ25cbiAqL1xuXG5cbmZ1bmN0aW9uIGRvQWxpZ24oZWwsIHRndFJlZ2lvbiwgYWxpZ24sIGlzVGd0UmVnaW9uVmlzaWJsZSkge1xuICB2YXIgcG9pbnRzID0gYWxpZ24ucG9pbnRzO1xuICB2YXIgb2Zmc2V0ID0gYWxpZ24ub2Zmc2V0IHx8IFswLCAwXTtcbiAgdmFyIHRhcmdldE9mZnNldCA9IGFsaWduLnRhcmdldE9mZnNldCB8fCBbMCwgMF07XG4gIHZhciBvdmVyZmxvdyA9IGFsaWduLm92ZXJmbG93O1xuICB2YXIgc291cmNlID0gYWxpZ24uc291cmNlIHx8IGVsO1xuICBvZmZzZXQgPSBbXS5jb25jYXQob2Zmc2V0KTtcbiAgdGFyZ2V0T2Zmc2V0ID0gW10uY29uY2F0KHRhcmdldE9mZnNldCk7XG4gIG92ZXJmbG93ID0gb3ZlcmZsb3cgfHwge307XG4gIHZhciBuZXdPdmVyZmxvd0NmZyA9IHt9O1xuICB2YXIgZmFpbCA9IDA7XG4gIHZhciBhbHdheXNCeVZpZXdwb3J0ID0gISEob3ZlcmZsb3cgJiYgb3ZlcmZsb3cuYWx3YXlzQnlWaWV3cG9ydCk7IC8vIOW9k+WJjeiKgueCueWPr+S7peiiq+aUvue9rueahOaYvuekuuWMuuWfn1xuXG4gIHZhciB2aXNpYmxlUmVjdCA9IGdldFZpc2libGVSZWN0Rm9yRWxlbWVudChzb3VyY2UsIGFsd2F5c0J5Vmlld3BvcnQpOyAvLyDlvZPliY3oioLngrnmiYDljaDnmoTljLrln58sIGxlZnQvdG9wL3dpZHRoL2hlaWdodFxuXG4gIHZhciBlbFJlZ2lvbiA9IGdldFJlZ2lvbihzb3VyY2UpOyAvLyDlsIYgb2Zmc2V0IOi9rOaNouaIkOaVsOWAvO+8jOaUr+aMgeeZvuWIhuavlFxuXG4gIG5vcm1hbGl6ZU9mZnNldChvZmZzZXQsIGVsUmVnaW9uKTtcbiAgbm9ybWFsaXplT2Zmc2V0KHRhcmdldE9mZnNldCwgdGd0UmVnaW9uKTsgLy8g5b2T5YmN6IqC54K55bCG6KaB6KKr5pS+572u55qE5L2N572uXG5cbiAgdmFyIGVsRnV0dXJlUG9zID0gZ2V0RWxGdXR1cmVQb3MoZWxSZWdpb24sIHRndFJlZ2lvbiwgcG9pbnRzLCBvZmZzZXQsIHRhcmdldE9mZnNldCk7IC8vIOW9k+WJjeiKgueCueWwhuimgeaJgOWkhOeahOWMuuWfn1xuXG4gIHZhciBuZXdFbFJlZ2lvbiA9IHV0aWxzLm1lcmdlKGVsUmVnaW9uLCBlbEZ1dHVyZVBvcyk7IC8vIOWmguaenOWPr+inhuWMuuWfn+S4jeiDveWujOWFqOaUvue9ruW9k+WJjeiKgueCueaXtuWFgeiuuOiwg+aVtFxuXG4gIGlmICh2aXNpYmxlUmVjdCAmJiAob3ZlcmZsb3cuYWRqdXN0WCB8fCBvdmVyZmxvdy5hZGp1c3RZKSAmJiBpc1RndFJlZ2lvblZpc2libGUpIHtcbiAgICBpZiAob3ZlcmZsb3cuYWRqdXN0WCkge1xuICAgICAgLy8g5aaC5p6c5qiq5ZCR5LiN6IO95pS+5LiLXG4gICAgICBpZiAoaXNGYWlsWChlbEZ1dHVyZVBvcywgZWxSZWdpb24sIHZpc2libGVSZWN0KSkge1xuICAgICAgICAvLyDlr7npvZDkvY3nva7lj43kuItcbiAgICAgICAgdmFyIG5ld1BvaW50cyA9IGZsaXAocG9pbnRzLCAvW2xyXS9naSwge1xuICAgICAgICAgIGw6ICdyJyxcbiAgICAgICAgICByOiAnbCdcbiAgICAgICAgfSk7IC8vIOWBj+enu+mHj+S5n+WPjeS4i1xuXG4gICAgICAgIHZhciBuZXdPZmZzZXQgPSBmbGlwT2Zmc2V0KG9mZnNldCwgMCk7XG4gICAgICAgIHZhciBuZXdUYXJnZXRPZmZzZXQgPSBmbGlwT2Zmc2V0KHRhcmdldE9mZnNldCwgMCk7XG4gICAgICAgIHZhciBuZXdFbEZ1dHVyZVBvcyA9IGdldEVsRnV0dXJlUG9zKGVsUmVnaW9uLCB0Z3RSZWdpb24sIG5ld1BvaW50cywgbmV3T2Zmc2V0LCBuZXdUYXJnZXRPZmZzZXQpO1xuXG4gICAgICAgIGlmICghaXNDb21wbGV0ZUZhaWxYKG5ld0VsRnV0dXJlUG9zLCBlbFJlZ2lvbiwgdmlzaWJsZVJlY3QpKSB7XG4gICAgICAgICAgZmFpbCA9IDE7XG4gICAgICAgICAgcG9pbnRzID0gbmV3UG9pbnRzO1xuICAgICAgICAgIG9mZnNldCA9IG5ld09mZnNldDtcbiAgICAgICAgICB0YXJnZXRPZmZzZXQgPSBuZXdUYXJnZXRPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob3ZlcmZsb3cuYWRqdXN0WSkge1xuICAgICAgLy8g5aaC5p6c57q15ZCR5LiN6IO95pS+5LiLXG4gICAgICBpZiAoaXNGYWlsWShlbEZ1dHVyZVBvcywgZWxSZWdpb24sIHZpc2libGVSZWN0KSkge1xuICAgICAgICAvLyDlr7npvZDkvY3nva7lj43kuItcbiAgICAgICAgdmFyIF9uZXdQb2ludHMgPSBmbGlwKHBvaW50cywgL1t0Yl0vZ2ksIHtcbiAgICAgICAgICB0OiAnYicsXG4gICAgICAgICAgYjogJ3QnXG4gICAgICAgIH0pOyAvLyDlgY/np7vph4/kuZ/lj43kuItcblxuXG4gICAgICAgIHZhciBfbmV3T2Zmc2V0ID0gZmxpcE9mZnNldChvZmZzZXQsIDEpO1xuXG4gICAgICAgIHZhciBfbmV3VGFyZ2V0T2Zmc2V0ID0gZmxpcE9mZnNldCh0YXJnZXRPZmZzZXQsIDEpO1xuXG4gICAgICAgIHZhciBfbmV3RWxGdXR1cmVQb3MgPSBnZXRFbEZ1dHVyZVBvcyhlbFJlZ2lvbiwgdGd0UmVnaW9uLCBfbmV3UG9pbnRzLCBfbmV3T2Zmc2V0LCBfbmV3VGFyZ2V0T2Zmc2V0KTtcblxuICAgICAgICBpZiAoIWlzQ29tcGxldGVGYWlsWShfbmV3RWxGdXR1cmVQb3MsIGVsUmVnaW9uLCB2aXNpYmxlUmVjdCkpIHtcbiAgICAgICAgICBmYWlsID0gMTtcbiAgICAgICAgICBwb2ludHMgPSBfbmV3UG9pbnRzO1xuICAgICAgICAgIG9mZnNldCA9IF9uZXdPZmZzZXQ7XG4gICAgICAgICAgdGFyZ2V0T2Zmc2V0ID0gX25ld1RhcmdldE9mZnNldDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8g5aaC5p6c5aSx6LSl77yM6YeN5paw6K6h566X5b2T5YmN6IqC54K55bCG6KaB6KKr5pS+572u55qE5L2N572uXG5cblxuICAgIGlmIChmYWlsKSB7XG4gICAgICBlbEZ1dHVyZVBvcyA9IGdldEVsRnV0dXJlUG9zKGVsUmVnaW9uLCB0Z3RSZWdpb24sIHBvaW50cywgb2Zmc2V0LCB0YXJnZXRPZmZzZXQpO1xuICAgICAgdXRpbHMubWl4KG5ld0VsUmVnaW9uLCBlbEZ1dHVyZVBvcyk7XG4gICAgfVxuXG4gICAgdmFyIGlzU3RpbGxGYWlsWCA9IGlzRmFpbFgoZWxGdXR1cmVQb3MsIGVsUmVnaW9uLCB2aXNpYmxlUmVjdCk7XG4gICAgdmFyIGlzU3RpbGxGYWlsWSA9IGlzRmFpbFkoZWxGdXR1cmVQb3MsIGVsUmVnaW9uLCB2aXNpYmxlUmVjdCk7IC8vIOajgOafpeWPjeS4i+WQjueahOS9jee9ruaYr+WQpuWPr+S7peaUvuS4i+S6hu+8jOWmguaenOS7jeeEtuaUvuS4jeS4i++8mlxuICAgIC8vIDEuIOWkjeWOn+S/ruaUuei/h+eahOWumuS9jeWPguaVsFxuXG4gICAgaWYgKGlzU3RpbGxGYWlsWCB8fCBpc1N0aWxsRmFpbFkpIHtcbiAgICAgIHZhciBfbmV3UG9pbnRzMiA9IHBvaW50czsgLy8g6YeN572u5a+55bqU6YOo5YiG55qE57+76L2s6YC76L6RXG5cbiAgICAgIGlmIChpc1N0aWxsRmFpbFgpIHtcbiAgICAgICAgX25ld1BvaW50czIgPSBmbGlwKHBvaW50cywgL1tscl0vZ2ksIHtcbiAgICAgICAgICBsOiAncicsXG4gICAgICAgICAgcjogJ2wnXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNTdGlsbEZhaWxZKSB7XG4gICAgICAgIF9uZXdQb2ludHMyID0gZmxpcChwb2ludHMsIC9bdGJdL2dpLCB7XG4gICAgICAgICAgdDogJ2InLFxuICAgICAgICAgIGI6ICd0J1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcG9pbnRzID0gX25ld1BvaW50czI7XG4gICAgICBvZmZzZXQgPSBhbGlnbi5vZmZzZXQgfHwgWzAsIDBdO1xuICAgICAgdGFyZ2V0T2Zmc2V0ID0gYWxpZ24udGFyZ2V0T2Zmc2V0IHx8IFswLCAwXTtcbiAgICB9IC8vIDIuIOWPquacieaMh+WumuS6huWPr+S7peiwg+aVtOW9k+WJjeaWueWQkeaJjeiwg+aVtFxuXG5cbiAgICBuZXdPdmVyZmxvd0NmZy5hZGp1c3RYID0gb3ZlcmZsb3cuYWRqdXN0WCAmJiBpc1N0aWxsRmFpbFg7XG4gICAgbmV3T3ZlcmZsb3dDZmcuYWRqdXN0WSA9IG92ZXJmbG93LmFkanVzdFkgJiYgaXNTdGlsbEZhaWxZOyAvLyDnoa7lrp7opoHosIPmlbTvvIznlJroh7Plj6/og73kvJrosIPmlbTpq5jluqblrr3luqZcblxuICAgIGlmIChuZXdPdmVyZmxvd0NmZy5hZGp1c3RYIHx8IG5ld092ZXJmbG93Q2ZnLmFkanVzdFkpIHtcbiAgICAgIG5ld0VsUmVnaW9uID0gYWRqdXN0Rm9yVmlld3BvcnQoZWxGdXR1cmVQb3MsIGVsUmVnaW9uLCB2aXNpYmxlUmVjdCwgbmV3T3ZlcmZsb3dDZmcpO1xuICAgIH1cbiAgfSAvLyBuZWVkIGp1ZGdlIHRvIGluIGNhc2Ugc2V0IGZpeGVkIHdpdGggaW4gY3NzIG9uIGhlaWdodCBhdXRvIGVsZW1lbnRcblxuXG4gIGlmIChuZXdFbFJlZ2lvbi53aWR0aCAhPT0gZWxSZWdpb24ud2lkdGgpIHtcbiAgICB1dGlscy5jc3Moc291cmNlLCAnd2lkdGgnLCB1dGlscy53aWR0aChzb3VyY2UpICsgbmV3RWxSZWdpb24ud2lkdGggLSBlbFJlZ2lvbi53aWR0aCk7XG4gIH1cblxuICBpZiAobmV3RWxSZWdpb24uaGVpZ2h0ICE9PSBlbFJlZ2lvbi5oZWlnaHQpIHtcbiAgICB1dGlscy5jc3Moc291cmNlLCAnaGVpZ2h0JywgdXRpbHMuaGVpZ2h0KHNvdXJjZSkgKyBuZXdFbFJlZ2lvbi5oZWlnaHQgLSBlbFJlZ2lvbi5oZWlnaHQpO1xuICB9IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9raXNzeXRlYW0va2lzc3kvaXNzdWVzLzE5MFxuICAvLyDnm7jlr7nkuo7lsY/luZXkvY3nva7msqHlj5jvvIzogIwgbGVmdC90b3Ag5Y+Y5LqGXG4gIC8vIOS+i+WmgiA8ZGl2ICdyZWxhdGl2ZSc+PGVsIGFic29sdXRlPjwvZGl2PlxuXG5cbiAgdXRpbHMub2Zmc2V0KHNvdXJjZSwge1xuICAgIGxlZnQ6IG5ld0VsUmVnaW9uLmxlZnQsXG4gICAgdG9wOiBuZXdFbFJlZ2lvbi50b3BcbiAgfSwge1xuICAgIHVzZUNzc1JpZ2h0OiBhbGlnbi51c2VDc3NSaWdodCxcbiAgICB1c2VDc3NCb3R0b206IGFsaWduLnVzZUNzc0JvdHRvbSxcbiAgICB1c2VDc3NUcmFuc2Zvcm06IGFsaWduLnVzZUNzc1RyYW5zZm9ybSxcbiAgICBpZ25vcmVTaGFrZTogYWxpZ24uaWdub3JlU2hha2VcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgcG9pbnRzOiBwb2ludHMsXG4gICAgb2Zmc2V0OiBvZmZzZXQsXG4gICAgdGFyZ2V0T2Zmc2V0OiB0YXJnZXRPZmZzZXQsXG4gICAgb3ZlcmZsb3c6IG5ld092ZXJmbG93Q2ZnXG4gIH07XG59XG4vKipcbiAqICAyMDEyLTA0LTI2IHlpbWluZ2hlQGdtYWlsLmNvbVxuICogICAtIOS8mOWMluaZuuiDveWvuem9kOeul+azlVxuICogICAtIOaFjueUqCByZXNpemVYWFxuICpcbiAqICAyMDExLTA3LTEzIHlpbWluZ2hlQGdtYWlsLmNvbSBub3RlOlxuICogICAtIOWinuWKoOaZuuiDveWvuem9kO+8jOS7peWPiuWkp+Wwj+iwg+aVtOmAiemhuVxuICoqL1xuXG5mdW5jdGlvbiBpc091dE9mVmlzaWJsZVJlY3QodGFyZ2V0LCBhbHdheXNCeVZpZXdwb3J0KSB7XG4gIHZhciB2aXNpYmxlUmVjdCA9IGdldFZpc2libGVSZWN0Rm9yRWxlbWVudCh0YXJnZXQsIGFsd2F5c0J5Vmlld3BvcnQpO1xuICB2YXIgdGFyZ2V0UmVnaW9uID0gZ2V0UmVnaW9uKHRhcmdldCk7XG4gIHJldHVybiAhdmlzaWJsZVJlY3QgfHwgdGFyZ2V0UmVnaW9uLmxlZnQgKyB0YXJnZXRSZWdpb24ud2lkdGggPD0gdmlzaWJsZVJlY3QubGVmdCB8fCB0YXJnZXRSZWdpb24udG9wICsgdGFyZ2V0UmVnaW9uLmhlaWdodCA8PSB2aXNpYmxlUmVjdC50b3AgfHwgdGFyZ2V0UmVnaW9uLmxlZnQgPj0gdmlzaWJsZVJlY3QucmlnaHQgfHwgdGFyZ2V0UmVnaW9uLnRvcCA+PSB2aXNpYmxlUmVjdC5ib3R0b207XG59XG5cbmZ1bmN0aW9uIGFsaWduRWxlbWVudChlbCwgcmVmTm9kZSwgYWxpZ24pIHtcbiAgdmFyIHRhcmdldCA9IGFsaWduLnRhcmdldCB8fCByZWZOb2RlO1xuICB2YXIgcmVmTm9kZVJlZ2lvbiA9IGdldFJlZ2lvbih0YXJnZXQpO1xuICB2YXIgaXNUYXJnZXROb3RPdXRPZlZpc2libGUgPSAhaXNPdXRPZlZpc2libGVSZWN0KHRhcmdldCwgYWxpZ24ub3ZlcmZsb3cgJiYgYWxpZ24ub3ZlcmZsb3cuYWx3YXlzQnlWaWV3cG9ydCk7XG4gIHJldHVybiBkb0FsaWduKGVsLCByZWZOb2RlUmVnaW9uLCBhbGlnbiwgaXNUYXJnZXROb3RPdXRPZlZpc2libGUpO1xufVxuXG5hbGlnbkVsZW1lbnQuX19nZXRPZmZzZXRQYXJlbnQgPSBnZXRPZmZzZXRQYXJlbnQ7XG5hbGlnbkVsZW1lbnQuX19nZXRWaXNpYmxlUmVjdEZvckVsZW1lbnQgPSBnZXRWaXNpYmxlUmVjdEZvckVsZW1lbnQ7XG5cbi8qKlxuICogYHRndFBvaW50YDogeyBwYWdlWCwgcGFnZVkgfSBvciB7IGNsaWVudFgsIGNsaWVudFkgfS5cbiAqIElmIGNsaWVudCBwb3NpdGlvbiBwcm92aWRlZCwgd2lsbCBpbnRlcm5hbCBjb252ZXJ0IHRvIHBhZ2UgcG9zaXRpb24uXG4gKi9cblxuZnVuY3Rpb24gYWxpZ25Qb2ludChlbCwgdGd0UG9pbnQsIGFsaWduKSB7XG4gIHZhciBwYWdlWDtcbiAgdmFyIHBhZ2VZO1xuICB2YXIgZG9jID0gdXRpbHMuZ2V0RG9jdW1lbnQoZWwpO1xuICB2YXIgd2luID0gZG9jLmRlZmF1bHRWaWV3IHx8IGRvYy5wYXJlbnRXaW5kb3c7XG4gIHZhciBzY3JvbGxYID0gdXRpbHMuZ2V0V2luZG93U2Nyb2xsTGVmdCh3aW4pO1xuICB2YXIgc2Nyb2xsWSA9IHV0aWxzLmdldFdpbmRvd1Njcm9sbFRvcCh3aW4pO1xuICB2YXIgdmlld3BvcnRXaWR0aCA9IHV0aWxzLnZpZXdwb3J0V2lkdGgod2luKTtcbiAgdmFyIHZpZXdwb3J0SGVpZ2h0ID0gdXRpbHMudmlld3BvcnRIZWlnaHQod2luKTtcblxuICBpZiAoJ3BhZ2VYJyBpbiB0Z3RQb2ludCkge1xuICAgIHBhZ2VYID0gdGd0UG9pbnQucGFnZVg7XG4gIH0gZWxzZSB7XG4gICAgcGFnZVggPSBzY3JvbGxYICsgdGd0UG9pbnQuY2xpZW50WDtcbiAgfVxuXG4gIGlmICgncGFnZVknIGluIHRndFBvaW50KSB7XG4gICAgcGFnZVkgPSB0Z3RQb2ludC5wYWdlWTtcbiAgfSBlbHNlIHtcbiAgICBwYWdlWSA9IHNjcm9sbFkgKyB0Z3RQb2ludC5jbGllbnRZO1xuICB9XG5cbiAgdmFyIHRndFJlZ2lvbiA9IHtcbiAgICBsZWZ0OiBwYWdlWCxcbiAgICB0b3A6IHBhZ2VZLFxuICAgIHdpZHRoOiAwLFxuICAgIGhlaWdodDogMFxuICB9O1xuICB2YXIgcG9pbnRJblZpZXcgPSBwYWdlWCA+PSAwICYmIHBhZ2VYIDw9IHNjcm9sbFggKyB2aWV3cG9ydFdpZHRoICYmIHBhZ2VZID49IDAgJiYgcGFnZVkgPD0gc2Nyb2xsWSArIHZpZXdwb3J0SGVpZ2h0OyAvLyBQcm92aWRlIGRlZmF1bHQgdGFyZ2V0IHBvaW50XG5cbiAgdmFyIHBvaW50cyA9IFthbGlnbi5wb2ludHNbMF0sICdjYyddO1xuICByZXR1cm4gZG9BbGlnbihlbCwgdGd0UmVnaW9uLCBfb2JqZWN0U3ByZWFkMihfb2JqZWN0U3ByZWFkMih7fSwgYWxpZ24pLCB7fSwge1xuICAgIHBvaW50czogcG9pbnRzXG4gIH0pLCBwb2ludEluVmlldyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFsaWduRWxlbWVudDtcbmV4cG9ydCB7IGFsaWduRWxlbWVudCwgYWxpZ25Qb2ludCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iLCJ2YXIgYmFzZUlzRXF1YWwgPSByZXF1aXJlKCcuL19iYXNlSXNFcXVhbCcpO1xuXG4vKipcbiAqIFBlcmZvcm1zIGEgZGVlcCBjb21wYXJpc29uIGJldHdlZW4gdHdvIHZhbHVlcyB0byBkZXRlcm1pbmUgaWYgdGhleSBhcmVcbiAqIGVxdWl2YWxlbnQuXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIHN1cHBvcnRzIGNvbXBhcmluZyBhcnJheXMsIGFycmF5IGJ1ZmZlcnMsIGJvb2xlYW5zLFxuICogZGF0ZSBvYmplY3RzLCBlcnJvciBvYmplY3RzLCBtYXBzLCBudW1iZXJzLCBgT2JqZWN0YCBvYmplY3RzLCByZWdleGVzLFxuICogc2V0cywgc3RyaW5ncywgc3ltYm9scywgYW5kIHR5cGVkIGFycmF5cy4gYE9iamVjdGAgb2JqZWN0cyBhcmUgY29tcGFyZWRcbiAqIGJ5IHRoZWlyIG93biwgbm90IGluaGVyaXRlZCwgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLiBGdW5jdGlvbnMgYW5kIERPTVxuICogbm9kZXMgYXJlIGNvbXBhcmVkIGJ5IHN0cmljdCBlcXVhbGl0eSwgaS5lLiBgPT09YC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEgfTtcbiAqIHZhciBvdGhlciA9IHsgJ2EnOiAxIH07XG4gKlxuICogXy5pc0VxdWFsKG9iamVjdCwgb3RoZXIpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIG9iamVjdCA9PT0gb3RoZXI7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0VxdWFsKHZhbHVlLCBvdGhlcikge1xuICByZXR1cm4gYmFzZUlzRXF1YWwodmFsdWUsIG90aGVyKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0VxdWFsO1xuIiwiaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgUmVzaXplT2JzZXJ2ZXIgZnJvbSAncmVzaXplLW9ic2VydmVyLXBvbHlmaWxsJztcbmltcG9ydCBjb250YWlucyBmcm9tIFwicmMtdXRpbC9lcy9Eb20vY29udGFpbnNcIjtcbmV4cG9ydCBmdW5jdGlvbiBpc1NhbWVQb2ludChwcmV2LCBuZXh0KSB7XG4gIGlmIChwcmV2ID09PSBuZXh0KSByZXR1cm4gdHJ1ZTtcbiAgaWYgKCFwcmV2IHx8ICFuZXh0KSByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKCdwYWdlWCcgaW4gbmV4dCAmJiAncGFnZVknIGluIG5leHQpIHtcbiAgICByZXR1cm4gcHJldi5wYWdlWCA9PT0gbmV4dC5wYWdlWCAmJiBwcmV2LnBhZ2VZID09PSBuZXh0LnBhZ2VZO1xuICB9XG5cbiAgaWYgKCdjbGllbnRYJyBpbiBuZXh0ICYmICdjbGllbnRZJyBpbiBuZXh0KSB7XG4gICAgcmV0dXJuIHByZXYuY2xpZW50WCA9PT0gbmV4dC5jbGllbnRYICYmIHByZXYuY2xpZW50WSA9PT0gbmV4dC5jbGllbnRZO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlc3RvcmVGb2N1cyhhY3RpdmVFbGVtZW50LCBjb250YWluZXIpIHtcbiAgLy8gRm9jdXMgYmFjayBpZiBpcyBpbiB0aGUgY29udGFpbmVyXG4gIGlmIChhY3RpdmVFbGVtZW50ICE9PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmIGNvbnRhaW5zKGNvbnRhaW5lciwgYWN0aXZlRWxlbWVudCkgJiYgdHlwZW9mIGFjdGl2ZUVsZW1lbnQuZm9jdXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBhY3RpdmVFbGVtZW50LmZvY3VzKCk7XG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBtb25pdG9yUmVzaXplKGVsZW1lbnQsIGNhbGxiYWNrKSB7XG4gIHZhciBwcmV2V2lkdGggPSBudWxsO1xuICB2YXIgcHJldkhlaWdodCA9IG51bGw7XG5cbiAgZnVuY3Rpb24gb25SZXNpemUoX3JlZikge1xuICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDEpLFxuICAgICAgICB0YXJnZXQgPSBfcmVmMlswXS50YXJnZXQ7XG5cbiAgICBpZiAoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyh0YXJnZXQpKSByZXR1cm47XG5cbiAgICB2YXIgX3RhcmdldCRnZXRCb3VuZGluZ0NsID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICB3aWR0aCA9IF90YXJnZXQkZ2V0Qm91bmRpbmdDbC53aWR0aCxcbiAgICAgICAgaGVpZ2h0ID0gX3RhcmdldCRnZXRCb3VuZGluZ0NsLmhlaWdodDtcblxuICAgIHZhciBmaXhlZFdpZHRoID0gTWF0aC5mbG9vcih3aWR0aCk7XG4gICAgdmFyIGZpeGVkSGVpZ2h0ID0gTWF0aC5mbG9vcihoZWlnaHQpO1xuXG4gICAgaWYgKHByZXZXaWR0aCAhPT0gZml4ZWRXaWR0aCB8fCBwcmV2SGVpZ2h0ICE9PSBmaXhlZEhlaWdodCkge1xuICAgICAgLy8gaHR0cHM6Ly93ZWJraXQub3JnL2Jsb2cvOTk5Ny9yZXNpemVvYnNlcnZlci1pbi13ZWJraXQvXG4gICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2FsbGJhY2soe1xuICAgICAgICAgIHdpZHRoOiBmaXhlZFdpZHRoLFxuICAgICAgICAgIGhlaWdodDogZml4ZWRIZWlnaHRcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBwcmV2V2lkdGggPSBmaXhlZFdpZHRoO1xuICAgIHByZXZIZWlnaHQgPSBmaXhlZEhlaWdodDtcbiAgfVxuXG4gIHZhciByZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcihvblJlc2l6ZSk7XG5cbiAgaWYgKGVsZW1lbnQpIHtcbiAgICByZXNpemVPYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQpO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gIH07XG59IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoY2FsbGJhY2ssIGJ1ZmZlcikge1xuICB2YXIgY2FsbGVkUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKTtcbiAgdmFyIHRpbWVvdXRSZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XG5cbiAgZnVuY3Rpb24gY2FuY2VsVHJpZ2dlcigpIHtcbiAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVvdXRSZWYuY3VycmVudCk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmlnZ2VyKGZvcmNlKSB7XG4gICAgaWYgKCFjYWxsZWRSZWYuY3VycmVudCB8fCBmb3JjZSA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKGNhbGxiYWNrKCkgPT09IGZhbHNlKSB7XG4gICAgICAgIC8vIE5vdCBkZWxheSBzaW5jZSBjYWxsYmFjayBjYW5jZWxsZWQgc2VsZlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNhbGxlZFJlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgIGNhbmNlbFRyaWdnZXIoKTtcbiAgICAgIHRpbWVvdXRSZWYuY3VycmVudCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2FsbGVkUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgIH0sIGJ1ZmZlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbmNlbFRyaWdnZXIoKTtcbiAgICAgIHRpbWVvdXRSZWYuY3VycmVudCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2FsbGVkUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgdHJpZ2dlcigpO1xuICAgICAgfSwgYnVmZmVyKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gW3RyaWdnZXIsIGZ1bmN0aW9uICgpIHtcbiAgICBjYWxsZWRSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgIGNhbmNlbFRyaWdnZXIoKTtcbiAgfV07XG59KTsiLCJpbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCBfdHlwZW9mIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2ZcIjtcblxuLyoqXG4gKiBSZW1vdmVkIHByb3BzOlxuICogIC0gY2hpbGRyZW5Qcm9wc1xuICovXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgY29tcG9zZVJlZiB9IGZyb20gXCJyYy11dGlsL2VzL3JlZlwiO1xuaW1wb3J0IGlzVmlzaWJsZSBmcm9tIFwicmMtdXRpbC9lcy9Eb20vaXNWaXNpYmxlXCI7XG5pbXBvcnQgeyBhbGlnbkVsZW1lbnQsIGFsaWduUG9pbnQgfSBmcm9tICdkb20tYWxpZ24nO1xuaW1wb3J0IGFkZEV2ZW50TGlzdGVuZXIgZnJvbSBcInJjLXV0aWwvZXMvRG9tL2FkZEV2ZW50TGlzdGVuZXJcIjtcbmltcG9ydCBpc0VxdWFsIGZyb20gJ2xvZGFzaC9pc0VxdWFsJztcbmltcG9ydCB7IGlzU2FtZVBvaW50LCByZXN0b3JlRm9jdXMsIG1vbml0b3JSZXNpemUgfSBmcm9tICcuL3V0aWwnO1xuaW1wb3J0IHVzZUJ1ZmZlciBmcm9tICcuL2hvb2tzL3VzZUJ1ZmZlcic7XG5cbmZ1bmN0aW9uIGdldEVsZW1lbnQoZnVuYykge1xuICBpZiAodHlwZW9mIGZ1bmMgIT09ICdmdW5jdGlvbicpIHJldHVybiBudWxsO1xuICByZXR1cm4gZnVuYygpO1xufVxuXG5mdW5jdGlvbiBnZXRQb2ludChwb2ludCkge1xuICBpZiAoX3R5cGVvZihwb2ludCkgIT09ICdvYmplY3QnIHx8ICFwb2ludCkgcmV0dXJuIG51bGw7XG4gIHJldHVybiBwb2ludDtcbn1cblxudmFyIEFsaWduID0gZnVuY3Rpb24gQWxpZ24oX3JlZiwgcmVmKSB7XG4gIHZhciBjaGlsZHJlbiA9IF9yZWYuY2hpbGRyZW4sXG4gICAgICBkaXNhYmxlZCA9IF9yZWYuZGlzYWJsZWQsXG4gICAgICB0YXJnZXQgPSBfcmVmLnRhcmdldCxcbiAgICAgIGFsaWduID0gX3JlZi5hbGlnbixcbiAgICAgIG9uQWxpZ24gPSBfcmVmLm9uQWxpZ24sXG4gICAgICBtb25pdG9yV2luZG93UmVzaXplID0gX3JlZi5tb25pdG9yV2luZG93UmVzaXplLFxuICAgICAgX3JlZiRtb25pdG9yQnVmZmVyVGltID0gX3JlZi5tb25pdG9yQnVmZmVyVGltZSxcbiAgICAgIG1vbml0b3JCdWZmZXJUaW1lID0gX3JlZiRtb25pdG9yQnVmZmVyVGltID09PSB2b2lkIDAgPyAwIDogX3JlZiRtb25pdG9yQnVmZmVyVGltO1xuICB2YXIgY2FjaGVSZWYgPSBSZWFjdC51c2VSZWYoe30pO1xuICB2YXIgbm9kZVJlZiA9IFJlYWN0LnVzZVJlZigpO1xuICB2YXIgY2hpbGROb2RlID0gUmVhY3QuQ2hpbGRyZW4ub25seShjaGlsZHJlbik7IC8vID09PT09PT09PT09PT09PT09PT09PSBBbGlnbiA9PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFdlIHNhdmUgdGhlIHByb3BzIGhlcmUgdG8gYXZvaWQgY2xvc3VyZSBtYWtlcyBwcm9wcyBvb2RcblxuICB2YXIgZm9yY2VBbGlnblByb3BzUmVmID0gUmVhY3QudXNlUmVmKHt9KTtcbiAgZm9yY2VBbGlnblByb3BzUmVmLmN1cnJlbnQuZGlzYWJsZWQgPSBkaXNhYmxlZDtcbiAgZm9yY2VBbGlnblByb3BzUmVmLmN1cnJlbnQudGFyZ2V0ID0gdGFyZ2V0O1xuICBmb3JjZUFsaWduUHJvcHNSZWYuY3VycmVudC5hbGlnbiA9IGFsaWduO1xuICBmb3JjZUFsaWduUHJvcHNSZWYuY3VycmVudC5vbkFsaWduID0gb25BbGlnbjtcblxuICB2YXIgX3VzZUJ1ZmZlciA9IHVzZUJ1ZmZlcihmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9mb3JjZUFsaWduUHJvcHNSZWYkYyA9IGZvcmNlQWxpZ25Qcm9wc1JlZi5jdXJyZW50LFxuICAgICAgICBsYXRlc3REaXNhYmxlZCA9IF9mb3JjZUFsaWduUHJvcHNSZWYkYy5kaXNhYmxlZCxcbiAgICAgICAgbGF0ZXN0VGFyZ2V0ID0gX2ZvcmNlQWxpZ25Qcm9wc1JlZiRjLnRhcmdldCxcbiAgICAgICAgbGF0ZXN0QWxpZ24gPSBfZm9yY2VBbGlnblByb3BzUmVmJGMuYWxpZ24sXG4gICAgICAgIGxhdGVzdE9uQWxpZ24gPSBfZm9yY2VBbGlnblByb3BzUmVmJGMub25BbGlnbjtcblxuICAgIGlmICghbGF0ZXN0RGlzYWJsZWQgJiYgbGF0ZXN0VGFyZ2V0KSB7XG4gICAgICB2YXIgc291cmNlID0gbm9kZVJlZi5jdXJyZW50O1xuICAgICAgdmFyIHJlc3VsdDtcbiAgICAgIHZhciBlbGVtZW50ID0gZ2V0RWxlbWVudChsYXRlc3RUYXJnZXQpO1xuICAgICAgdmFyIHBvaW50ID0gZ2V0UG9pbnQobGF0ZXN0VGFyZ2V0KTtcbiAgICAgIGNhY2hlUmVmLmN1cnJlbnQuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICBjYWNoZVJlZi5jdXJyZW50LnBvaW50ID0gcG9pbnQ7XG4gICAgICBjYWNoZVJlZi5jdXJyZW50LmFsaWduID0gbGF0ZXN0QWxpZ247IC8vIElFIGxvc2UgZm9jdXMgYWZ0ZXIgZWxlbWVudCByZWFsaWduXG4gICAgICAvLyBXZSBzaG91bGQgcmVjb3JkIGFjdGl2ZUVsZW1lbnQgYW5kIHJlc3RvcmUgbGF0ZXJcblxuICAgICAgLy8gSUUgbG9zZSBmb2N1cyBhZnRlciBlbGVtZW50IHJlYWxpZ25cbiAgICAgIC8vIFdlIHNob3VsZCByZWNvcmQgYWN0aXZlRWxlbWVudCBhbmQgcmVzdG9yZSBsYXRlclxuICAgICAgdmFyIF9kb2N1bWVudCA9IGRvY3VtZW50LFxuICAgICAgICAgIGFjdGl2ZUVsZW1lbnQgPSBfZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsgLy8gV2Ugb25seSBhbGlnbiB3aGVuIGVsZW1lbnQgaXMgdmlzaWJsZVxuXG4gICAgICAvLyBXZSBvbmx5IGFsaWduIHdoZW4gZWxlbWVudCBpcyB2aXNpYmxlXG4gICAgICBpZiAoZWxlbWVudCAmJiBpc1Zpc2libGUoZWxlbWVudCkpIHtcbiAgICAgICAgcmVzdWx0ID0gYWxpZ25FbGVtZW50KHNvdXJjZSwgZWxlbWVudCwgbGF0ZXN0QWxpZ24pO1xuICAgICAgfSBlbHNlIGlmIChwb2ludCkge1xuICAgICAgICByZXN1bHQgPSBhbGlnblBvaW50KHNvdXJjZSwgcG9pbnQsIGxhdGVzdEFsaWduKTtcbiAgICAgIH1cblxuICAgICAgcmVzdG9yZUZvY3VzKGFjdGl2ZUVsZW1lbnQsIHNvdXJjZSk7XG5cbiAgICAgIGlmIChsYXRlc3RPbkFsaWduICYmIHJlc3VsdCkge1xuICAgICAgICBsYXRlc3RPbkFsaWduKHNvdXJjZSwgcmVzdWx0KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LCBtb25pdG9yQnVmZmVyVGltZSksXG4gICAgICBfdXNlQnVmZmVyMiA9IF9zbGljZWRUb0FycmF5KF91c2VCdWZmZXIsIDIpLFxuICAgICAgX2ZvcmNlQWxpZ24gPSBfdXNlQnVmZmVyMlswXSxcbiAgICAgIGNhbmNlbEZvcmNlQWxpZ24gPSBfdXNlQnVmZmVyMlsxXTsgLy8gPT09PT09PT09PT09PT09PT09PT09IEVmZmVjdCA9PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gTGlzdGVuIGZvciB0YXJnZXQgdXBkYXRlZFxuXG5cbiAgdmFyIHJlc2l6ZU1vbml0b3IgPSBSZWFjdC51c2VSZWYoe1xuICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkge31cbiAgfSk7IC8vIExpc3RlbiBmb3Igc291cmNlIHVwZGF0ZWRcblxuICB2YXIgc291cmNlUmVzaXplTW9uaXRvciA9IFJlYWN0LnVzZVJlZih7XG4gICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7fVxuICB9KTtcbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQodGFyZ2V0KTtcbiAgICB2YXIgcG9pbnQgPSBnZXRQb2ludCh0YXJnZXQpO1xuXG4gICAgaWYgKG5vZGVSZWYuY3VycmVudCAhPT0gc291cmNlUmVzaXplTW9uaXRvci5jdXJyZW50LmVsZW1lbnQpIHtcbiAgICAgIHNvdXJjZVJlc2l6ZU1vbml0b3IuY3VycmVudC5jYW5jZWwoKTtcbiAgICAgIHNvdXJjZVJlc2l6ZU1vbml0b3IuY3VycmVudC5lbGVtZW50ID0gbm9kZVJlZi5jdXJyZW50O1xuICAgICAgc291cmNlUmVzaXplTW9uaXRvci5jdXJyZW50LmNhbmNlbCA9IG1vbml0b3JSZXNpemUobm9kZVJlZi5jdXJyZW50LCBfZm9yY2VBbGlnbik7XG4gICAgfVxuXG4gICAgaWYgKGNhY2hlUmVmLmN1cnJlbnQuZWxlbWVudCAhPT0gZWxlbWVudCB8fCAhaXNTYW1lUG9pbnQoY2FjaGVSZWYuY3VycmVudC5wb2ludCwgcG9pbnQpIHx8ICFpc0VxdWFsKGNhY2hlUmVmLmN1cnJlbnQuYWxpZ24sIGFsaWduKSkge1xuICAgICAgX2ZvcmNlQWxpZ24oKTsgLy8gQWRkIHJlc2l6ZSBvYnNlcnZlclxuXG5cbiAgICAgIGlmIChyZXNpemVNb25pdG9yLmN1cnJlbnQuZWxlbWVudCAhPT0gZWxlbWVudCkge1xuICAgICAgICByZXNpemVNb25pdG9yLmN1cnJlbnQuY2FuY2VsKCk7XG4gICAgICAgIHJlc2l6ZU1vbml0b3IuY3VycmVudC5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgcmVzaXplTW9uaXRvci5jdXJyZW50LmNhbmNlbCA9IG1vbml0b3JSZXNpemUoZWxlbWVudCwgX2ZvcmNlQWxpZ24pO1xuICAgICAgfVxuICAgIH1cbiAgfSk7IC8vIExpc3RlbiBmb3IgZGlzYWJsZWQgY2hhbmdlXG5cbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWRpc2FibGVkKSB7XG4gICAgICBfZm9yY2VBbGlnbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYW5jZWxGb3JjZUFsaWduKCk7XG4gICAgfVxuICB9LCBbZGlzYWJsZWRdKTsgLy8gTGlzdGVuIGZvciB3aW5kb3cgcmVzaXplXG5cbiAgdmFyIHdpblJlc2l6ZVJlZiA9IFJlYWN0LnVzZVJlZihudWxsKTtcbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAobW9uaXRvcldpbmRvd1Jlc2l6ZSkge1xuICAgICAgaWYgKCF3aW5SZXNpemVSZWYuY3VycmVudCkge1xuICAgICAgICB3aW5SZXNpemVSZWYuY3VycmVudCA9IGFkZEV2ZW50TGlzdGVuZXIod2luZG93LCAncmVzaXplJywgX2ZvcmNlQWxpZ24pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAod2luUmVzaXplUmVmLmN1cnJlbnQpIHtcbiAgICAgIHdpblJlc2l6ZVJlZi5jdXJyZW50LnJlbW92ZSgpO1xuICAgICAgd2luUmVzaXplUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgIH1cbiAgfSwgW21vbml0b3JXaW5kb3dSZXNpemVdKTsgLy8gQ2xlYXIgYWxsIGlmIHVubW91bnRcblxuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXNpemVNb25pdG9yLmN1cnJlbnQuY2FuY2VsKCk7XG4gICAgICBzb3VyY2VSZXNpemVNb25pdG9yLmN1cnJlbnQuY2FuY2VsKCk7XG4gICAgICBpZiAod2luUmVzaXplUmVmLmN1cnJlbnQpIHdpblJlc2l6ZVJlZi5jdXJyZW50LnJlbW92ZSgpO1xuICAgICAgY2FuY2VsRm9yY2VBbGlnbigpO1xuICAgIH07XG4gIH0sIFtdKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PSBSZWYgPT09PT09PT09PT09PT09PT09PT09PT1cblxuICBSZWFjdC51c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICBmb3JjZUFsaWduOiBmdW5jdGlvbiBmb3JjZUFsaWduKCkge1xuICAgICAgICByZXR1cm4gX2ZvcmNlQWxpZ24odHJ1ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7IC8vID09PT09PT09PT09PT09PT09PT09PSBSZW5kZXIgPT09PT09PT09PT09PT09PT09PT09XG5cbiAgaWYgKCAvKiNfX1BVUkVfXyovUmVhY3QuaXNWYWxpZEVsZW1lbnQoY2hpbGROb2RlKSkge1xuICAgIGNoaWxkTm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGROb2RlLCB7XG4gICAgICByZWY6IGNvbXBvc2VSZWYoY2hpbGROb2RlLnJlZiwgbm9kZVJlZilcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBjaGlsZE5vZGU7XG59O1xuXG52YXIgUmNBbGlnbiA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKEFsaWduKTtcblJjQWxpZ24uZGlzcGxheU5hbWUgPSAnQWxpZ24nO1xuZXhwb3J0IGRlZmF1bHQgUmNBbGlnbjsiLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbnZhciBydW50aW1lID0gKGZ1bmN0aW9uIChleHBvcnRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBPcCA9IE9iamVjdC5wcm90b3R5cGU7XG4gIHZhciBoYXNPd24gPSBPcC5oYXNPd25Qcm9wZXJ0eTtcbiAgdmFyIHVuZGVmaW5lZDsgLy8gTW9yZSBjb21wcmVzc2libGUgdGhhbiB2b2lkIDAuXG4gIHZhciAkU3ltYm9sID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiID8gU3ltYm9sIDoge307XG4gIHZhciBpdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuaXRlcmF0b3IgfHwgXCJAQGl0ZXJhdG9yXCI7XG4gIHZhciBhc3luY0l0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5hc3luY0l0ZXJhdG9yIHx8IFwiQEBhc3luY0l0ZXJhdG9yXCI7XG4gIHZhciB0b1N0cmluZ1RhZ1N5bWJvbCA9ICRTeW1ib2wudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7XG5cbiAgZnVuY3Rpb24gZGVmaW5lKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIG9ialtrZXldO1xuICB9XG4gIHRyeSB7XG4gICAgLy8gSUUgOCBoYXMgYSBicm9rZW4gT2JqZWN0LmRlZmluZVByb3BlcnR5IHRoYXQgb25seSB3b3JrcyBvbiBET00gb2JqZWN0cy5cbiAgICBkZWZpbmUoe30sIFwiXCIpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBkZWZpbmUgPSBmdW5jdGlvbihvYmosIGtleSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiBvYmpba2V5XSA9IHZhbHVlO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gSWYgb3V0ZXJGbiBwcm92aWRlZCBhbmQgb3V0ZXJGbi5wcm90b3R5cGUgaXMgYSBHZW5lcmF0b3IsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuXG4gICAgdmFyIHByb3RvR2VuZXJhdG9yID0gb3V0ZXJGbiAmJiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvciA/IG91dGVyRm4gOiBHZW5lcmF0b3I7XG4gICAgdmFyIGdlbmVyYXRvciA9IE9iamVjdC5jcmVhdGUocHJvdG9HZW5lcmF0b3IucHJvdG90eXBlKTtcbiAgICB2YXIgY29udGV4dCA9IG5ldyBDb250ZXh0KHRyeUxvY3NMaXN0IHx8IFtdKTtcblxuICAgIC8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMuXG4gICAgZ2VuZXJhdG9yLl9pbnZva2UgPSBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuXG4gICAgcmV0dXJuIGdlbmVyYXRvcjtcbiAgfVxuICBleHBvcnRzLndyYXAgPSB3cmFwO1xuXG4gIC8vIFRyeS9jYXRjaCBoZWxwZXIgdG8gbWluaW1pemUgZGVvcHRpbWl6YXRpb25zLiBSZXR1cm5zIGEgY29tcGxldGlvblxuICAvLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGRcbiAgLy8gaGF2ZSBiZWVuIChhbmQgd2FzIHByZXZpb3VzbHkpIGRlc2lnbmVkIHRvIHRha2UgYSBjbG9zdXJlIHRvIGJlXG4gIC8vIGludm9rZWQgd2l0aG91dCBhcmd1bWVudHMsIGJ1dCBpbiBhbGwgdGhlIGNhc2VzIHdlIGNhcmUgYWJvdXQgd2VcbiAgLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZFxuICAvLyB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0LiBXZSBjYW4gZXZlbiBnZXQgYXdheSB3aXRoIGFzc3VtaW5nXG4gIC8vIHRoZSBtZXRob2QgdGFrZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIHNpbmNlIHRoYXQgaGFwcGVucyB0byBiZSB0cnVlXG4gIC8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZVxuICAvLyBvbmx5IGFkZGl0aW9uYWwgYWxsb2NhdGlvbiByZXF1aXJlZCBpcyB0aGUgY29tcGxldGlvbiByZWNvcmQsIHdoaWNoXG4gIC8vIGhhcyBhIHN0YWJsZSBzaGFwZSBhbmQgc28gaG9wZWZ1bGx5IHNob3VsZCBiZSBjaGVhcCB0byBhbGxvY2F0ZS5cbiAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwibm9ybWFsXCIsIGFyZzogZm4uY2FsbChvYmosIGFyZykgfTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwidGhyb3dcIiwgYXJnOiBlcnIgfTtcbiAgICB9XG4gIH1cblxuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRTdGFydCA9IFwic3VzcGVuZGVkU3RhcnRcIjtcbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSBcInN1c3BlbmRlZFlpZWxkXCI7XG4gIHZhciBHZW5TdGF0ZUV4ZWN1dGluZyA9IFwiZXhlY3V0aW5nXCI7XG4gIHZhciBHZW5TdGF0ZUNvbXBsZXRlZCA9IFwiY29tcGxldGVkXCI7XG5cbiAgLy8gUmV0dXJuaW5nIHRoaXMgb2JqZWN0IGZyb20gdGhlIGlubmVyRm4gaGFzIHRoZSBzYW1lIGVmZmVjdCBhc1xuICAvLyBicmVha2luZyBvdXQgb2YgdGhlIGRpc3BhdGNoIHN3aXRjaCBzdGF0ZW1lbnQuXG4gIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307XG5cbiAgLy8gRHVtbXkgY29uc3RydWN0b3IgZnVuY3Rpb25zIHRoYXQgd2UgdXNlIGFzIHRoZSAuY29uc3RydWN0b3IgYW5kXG4gIC8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvclxuICAvLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91clxuICAvLyBtaW5pZmllciBub3QgdG8gbWFuZ2xlIHRoZSBuYW1lcyBvZiB0aGVzZSB0d28gZnVuY3Rpb25zLlxuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cblxuICAvLyBUaGlzIGlzIGEgcG9seWZpbGwgZm9yICVJdGVyYXRvclByb3RvdHlwZSUgZm9yIGVudmlyb25tZW50cyB0aGF0XG4gIC8vIGRvbid0IG5hdGl2ZWx5IHN1cHBvcnQgaXQuXG4gIHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuICBkZWZpbmUoSXRlcmF0b3JQcm90b3R5cGUsIGl0ZXJhdG9yU3ltYm9sLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pO1xuXG4gIHZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbiAgdmFyIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG8gJiYgZ2V0UHJvdG8oZ2V0UHJvdG8odmFsdWVzKFtdKSkpO1xuICBpZiAoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgJiZcbiAgICAgIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICE9PSBPcCAmJlxuICAgICAgaGFzT3duLmNhbGwoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUsIGl0ZXJhdG9yU3ltYm9sKSkge1xuICAgIC8vIFRoaXMgZW52aXJvbm1lbnQgaGFzIGEgbmF0aXZlICVJdGVyYXRvclByb3RvdHlwZSU7IHVzZSBpdCBpbnN0ZWFkXG4gICAgLy8gb2YgdGhlIHBvbHlmaWxsLlxuICAgIEl0ZXJhdG9yUHJvdG90eXBlID0gTmF0aXZlSXRlcmF0b3JQcm90b3R5cGU7XG4gIH1cblxuICB2YXIgR3AgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPVxuICAgIEdlbmVyYXRvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlKTtcbiAgR2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gIGRlZmluZShHcCwgXCJjb25zdHJ1Y3RvclwiLCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk7XG4gIGRlZmluZShHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgXCJjb25zdHJ1Y3RvclwiLCBHZW5lcmF0b3JGdW5jdGlvbik7XG4gIEdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lID0gZGVmaW5lKFxuICAgIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLFxuICAgIHRvU3RyaW5nVGFnU3ltYm9sLFxuICAgIFwiR2VuZXJhdG9yRnVuY3Rpb25cIlxuICApO1xuXG4gIC8vIEhlbHBlciBmb3IgZGVmaW5pbmcgdGhlIC5uZXh0LCAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMgb2YgdGhlXG4gIC8vIEl0ZXJhdG9yIGludGVyZmFjZSBpbiB0ZXJtcyBvZiBhIHNpbmdsZSAuX2ludm9rZSBtZXRob2QuXG4gIGZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhwcm90b3R5cGUpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgIGRlZmluZShwcm90b3R5cGUsIG1ldGhvZCwgZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UobWV0aG9kLCBhcmcpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICB2YXIgY3RvciA9IHR5cGVvZiBnZW5GdW4gPT09IFwiZnVuY3Rpb25cIiAmJiBnZW5GdW4uY29uc3RydWN0b3I7XG4gICAgcmV0dXJuIGN0b3JcbiAgICAgID8gY3RvciA9PT0gR2VuZXJhdG9yRnVuY3Rpb24gfHxcbiAgICAgICAgLy8gRm9yIHRoZSBuYXRpdmUgR2VuZXJhdG9yRnVuY3Rpb24gY29uc3RydWN0b3IsIHRoZSBiZXN0IHdlIGNhblxuICAgICAgICAvLyBkbyBpcyB0byBjaGVjayBpdHMgLm5hbWUgcHJvcGVydHkuXG4gICAgICAgIChjdG9yLmRpc3BsYXlOYW1lIHx8IGN0b3IubmFtZSkgPT09IFwiR2VuZXJhdG9yRnVuY3Rpb25cIlxuICAgICAgOiBmYWxzZTtcbiAgfTtcblxuICBleHBvcnRzLm1hcmsgPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoZ2VuRnVuLCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdlbkZ1bi5fX3Byb3RvX18gPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgICAgIGRlZmluZShnZW5GdW4sIHRvU3RyaW5nVGFnU3ltYm9sLCBcIkdlbmVyYXRvckZ1bmN0aW9uXCIpO1xuICAgIH1cbiAgICBnZW5GdW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShHcCk7XG4gICAgcmV0dXJuIGdlbkZ1bjtcbiAgfTtcblxuICAvLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG9cbiAgLy8gYHlpZWxkIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh4KWAsIHNvIHRoYXQgdGhlIHJ1bnRpbWUgY2FuIHRlc3RcbiAgLy8gYGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIilgIHRvIGRldGVybWluZSBpZiB0aGUgeWllbGRlZCB2YWx1ZSBpc1xuICAvLyBtZWFudCB0byBiZSBhd2FpdGVkLlxuICBleHBvcnRzLmF3cmFwID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIHsgX19hd2FpdDogYXJnIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihnZW5lcmF0b3IsIFByb21pc2VJbXBsKSB7XG4gICAgZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChnZW5lcmF0b3JbbWV0aG9kXSwgZ2VuZXJhdG9yLCBhcmcpO1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgcmVqZWN0KHJlY29yZC5hcmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJlY29yZC5hcmc7XG4gICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIikpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZS5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJuZXh0XCIsIHZhbHVlLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaW52b2tlKFwidGhyb3dcIiwgZXJyLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24odW53cmFwcGVkKSB7XG4gICAgICAgICAgLy8gV2hlbiBhIHlpZWxkZWQgUHJvbWlzZSBpcyByZXNvbHZlZCwgaXRzIGZpbmFsIHZhbHVlIGJlY29tZXNcbiAgICAgICAgICAvLyB0aGUgLnZhbHVlIG9mIHRoZSBQcm9taXNlPHt2YWx1ZSxkb25lfT4gcmVzdWx0IGZvciB0aGVcbiAgICAgICAgICAvLyBjdXJyZW50IGl0ZXJhdGlvbi5cbiAgICAgICAgICByZXN1bHQudmFsdWUgPSB1bndyYXBwZWQ7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgIC8vIElmIGEgcmVqZWN0ZWQgUHJvbWlzZSB3YXMgeWllbGRlZCwgdGhyb3cgdGhlIHJlamVjdGlvbiBiYWNrXG4gICAgICAgICAgLy8gaW50byB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIHNvIGl0IGNhbiBiZSBoYW5kbGVkIHRoZXJlLlxuICAgICAgICAgIHJldHVybiBpbnZva2UoXCJ0aHJvd1wiLCBlcnJvciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHByZXZpb3VzUHJvbWlzZTtcblxuICAgIGZ1bmN0aW9uIGVucXVldWUobWV0aG9kLCBhcmcpIHtcbiAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2VJbXBsKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwcmV2aW91c1Byb21pc2UgPVxuICAgICAgICAvLyBJZiBlbnF1ZXVlIGhhcyBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gd2Ugd2FudCB0byB3YWl0IHVudGlsXG4gICAgICAgIC8vIGFsbCBwcmV2aW91cyBQcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQgYmVmb3JlIGNhbGxpbmcgaW52b2tlLFxuICAgICAgICAvLyBzbyB0aGF0IHJlc3VsdHMgYXJlIGFsd2F5cyBkZWxpdmVyZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuIElmXG4gICAgICAgIC8vIGVucXVldWUgaGFzIG5vdCBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gaXQgaXMgaW1wb3J0YW50IHRvXG4gICAgICAgIC8vIGNhbGwgaW52b2tlIGltbWVkaWF0ZWx5LCB3aXRob3V0IHdhaXRpbmcgb24gYSBjYWxsYmFjayB0byBmaXJlLFxuICAgICAgICAvLyBzbyB0aGF0IHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gaGFzIHRoZSBvcHBvcnR1bml0eSB0byBkb1xuICAgICAgICAvLyBhbnkgbmVjZXNzYXJ5IHNldHVwIGluIGEgcHJlZGljdGFibGUgd2F5LiBUaGlzIHByZWRpY3RhYmlsaXR5XG4gICAgICAgIC8vIGlzIHdoeSB0aGUgUHJvbWlzZSBjb25zdHJ1Y3RvciBzeW5jaHJvbm91c2x5IGludm9rZXMgaXRzXG4gICAgICAgIC8vIGV4ZWN1dG9yIGNhbGxiYWNrLCBhbmQgd2h5IGFzeW5jIGZ1bmN0aW9ucyBzeW5jaHJvbm91c2x5XG4gICAgICAgIC8vIGV4ZWN1dGUgY29kZSBiZWZvcmUgdGhlIGZpcnN0IGF3YWl0LiBTaW5jZSB3ZSBpbXBsZW1lbnQgc2ltcGxlXG4gICAgICAgIC8vIGFzeW5jIGZ1bmN0aW9ucyBpbiB0ZXJtcyBvZiBhc3luYyBnZW5lcmF0b3JzLCBpdCBpcyBlc3BlY2lhbGx5XG4gICAgICAgIC8vIGltcG9ydGFudCB0byBnZXQgdGhpcyByaWdodCwgZXZlbiB0aG91Z2ggaXQgcmVxdWlyZXMgY2FyZS5cbiAgICAgICAgcHJldmlvdXNQcm9taXNlID8gcHJldmlvdXNQcm9taXNlLnRoZW4oXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsXG4gICAgICAgICAgLy8gQXZvaWQgcHJvcGFnYXRpbmcgZmFpbHVyZXMgdG8gUHJvbWlzZXMgcmV0dXJuZWQgYnkgbGF0ZXJcbiAgICAgICAgICAvLyBpbnZvY2F0aW9ucyBvZiB0aGUgaXRlcmF0b3IuXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmdcbiAgICAgICAgKSA6IGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCk7XG4gICAgfVxuXG4gICAgLy8gRGVmaW5lIHRoZSB1bmlmaWVkIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGltcGxlbWVudCAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIChzZWUgZGVmaW5lSXRlcmF0b3JNZXRob2RzKS5cbiAgICB0aGlzLl9pbnZva2UgPSBlbnF1ZXVlO1xuICB9XG5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKTtcbiAgZGVmaW5lKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlLCBhc3luY0l0ZXJhdG9yU3ltYm9sLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pO1xuICBleHBvcnRzLkFzeW5jSXRlcmF0b3IgPSBBc3luY0l0ZXJhdG9yO1xuXG4gIC8vIE5vdGUgdGhhdCBzaW1wbGUgYXN5bmMgZnVuY3Rpb25zIGFyZSBpbXBsZW1lbnRlZCBvbiB0b3Agb2ZcbiAgLy8gQXN5bmNJdGVyYXRvciBvYmplY3RzOyB0aGV5IGp1c3QgcmV0dXJuIGEgUHJvbWlzZSBmb3IgdGhlIHZhbHVlIG9mXG4gIC8vIHRoZSBmaW5hbCByZXN1bHQgcHJvZHVjZWQgYnkgdGhlIGl0ZXJhdG9yLlxuICBleHBvcnRzLmFzeW5jID0gZnVuY3Rpb24oaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QsIFByb21pc2VJbXBsKSB7XG4gICAgaWYgKFByb21pc2VJbXBsID09PSB2b2lkIDApIFByb21pc2VJbXBsID0gUHJvbWlzZTtcblxuICAgIHZhciBpdGVyID0gbmV3IEFzeW5jSXRlcmF0b3IoXG4gICAgICB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSxcbiAgICAgIFByb21pc2VJbXBsXG4gICAgKTtcblxuICAgIHJldHVybiBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24ob3V0ZXJGbilcbiAgICAgID8gaXRlciAvLyBJZiBvdXRlckZuIGlzIGEgZ2VuZXJhdG9yLCByZXR1cm4gdGhlIGZ1bGwgaXRlcmF0b3IuXG4gICAgICA6IGl0ZXIubmV4dCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC5kb25lID8gcmVzdWx0LnZhbHVlIDogaXRlci5uZXh0KCk7XG4gICAgICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCkge1xuICAgIHZhciBzdGF0ZSA9IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQ7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlRXhlY3V0aW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmdcIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVDb21wbGV0ZWQpIHtcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgdGhyb3cgYXJnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQmUgZm9yZ2l2aW5nLCBwZXIgMjUuMy4zLjMuMyBvZiB0aGUgc3BlYzpcbiAgICAgICAgLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWdlbmVyYXRvcnJlc3VtZVxuICAgICAgICByZXR1cm4gZG9uZVJlc3VsdCgpO1xuICAgICAgfVxuXG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgIGNvbnRleHQuYXJnID0gYXJnO1xuXG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICB2YXIgZGVsZWdhdGUgPSBjb250ZXh0LmRlbGVnYXRlO1xuICAgICAgICBpZiAoZGVsZWdhdGUpIHtcbiAgICAgICAgICB2YXIgZGVsZWdhdGVSZXN1bHQgPSBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcbiAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCA9PT0gQ29udGludWVTZW50aW5lbCkgY29udGludWU7XG4gICAgICAgICAgICByZXR1cm4gZGVsZWdhdGVSZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAgIC8vIFNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICAgICAgY29udGV4dC5zZW50ID0gY29udGV4dC5fc2VudCA9IGNvbnRleHQuYXJnO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydCkge1xuICAgICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuYXJnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgICBjb250ZXh0LmFicnVwdChcInJldHVyblwiLCBjb250ZXh0LmFyZyk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZSA9IEdlblN0YXRlRXhlY3V0aW5nO1xuXG4gICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcbiAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiKSB7XG4gICAgICAgICAgLy8gSWYgYW4gZXhjZXB0aW9uIGlzIHRocm93biBmcm9tIGlubmVyRm4sIHdlIGxlYXZlIHN0YXRlID09PVxuICAgICAgICAgIC8vIEdlblN0YXRlRXhlY3V0aW5nIGFuZCBsb29wIGJhY2sgZm9yIGFub3RoZXIgaW52b2NhdGlvbi5cbiAgICAgICAgICBzdGF0ZSA9IGNvbnRleHQuZG9uZVxuICAgICAgICAgICAgPyBHZW5TdGF0ZUNvbXBsZXRlZFxuICAgICAgICAgICAgOiBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkO1xuXG4gICAgICAgICAgaWYgKHJlY29yZC5hcmcgPT09IENvbnRpbnVlU2VudGluZWwpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogcmVjb3JkLmFyZyxcbiAgICAgICAgICAgIGRvbmU6IGNvbnRleHQuZG9uZVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAvLyBEaXNwYXRjaCB0aGUgZXhjZXB0aW9uIGJ5IGxvb3BpbmcgYmFjayBhcm91bmQgdG8gdGhlXG4gICAgICAgICAgLy8gY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZykgY2FsbCBhYm92ZS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gQ2FsbCBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF0oY29udGV4dC5hcmcpIGFuZCBoYW5kbGUgdGhlXG4gIC8vIHJlc3VsdCwgZWl0aGVyIGJ5IHJldHVybmluZyBhIHsgdmFsdWUsIGRvbmUgfSByZXN1bHQgZnJvbSB0aGVcbiAgLy8gZGVsZWdhdGUgaXRlcmF0b3IsIG9yIGJ5IG1vZGlmeWluZyBjb250ZXh0Lm1ldGhvZCBhbmQgY29udGV4dC5hcmcsXG4gIC8vIHNldHRpbmcgY29udGV4dC5kZWxlZ2F0ZSB0byBudWxsLCBhbmQgcmV0dXJuaW5nIHRoZSBDb250aW51ZVNlbnRpbmVsLlxuICBmdW5jdGlvbiBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KSB7XG4gICAgdmFyIG1ldGhvZCA9IGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXTtcbiAgICBpZiAobWV0aG9kID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIEEgLnRocm93IG9yIC5yZXR1cm4gd2hlbiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIG5vIC50aHJvd1xuICAgICAgLy8gbWV0aG9kIGFsd2F5cyB0ZXJtaW5hdGVzIHRoZSB5aWVsZCogbG9vcC5cbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAvLyBOb3RlOiBbXCJyZXR1cm5cIl0gbXVzdCBiZSB1c2VkIGZvciBFUzMgcGFyc2luZyBjb21wYXRpYmlsaXR5LlxuICAgICAgICBpZiAoZGVsZWdhdGUuaXRlcmF0b3JbXCJyZXR1cm5cIl0pIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIGEgcmV0dXJuIG1ldGhvZCwgZ2l2ZSBpdCBhXG4gICAgICAgICAgLy8gY2hhbmNlIHRvIGNsZWFuIHVwLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcblxuICAgICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAvLyBJZiBtYXliZUludm9rZURlbGVnYXRlKGNvbnRleHQpIGNoYW5nZWQgY29udGV4dC5tZXRob2QgZnJvbVxuICAgICAgICAgICAgLy8gXCJyZXR1cm5cIiB0byBcInRocm93XCIsIGxldCB0aGF0IG92ZXJyaWRlIHRoZSBUeXBlRXJyb3IgYmVsb3cuXG4gICAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgIFwiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAndGhyb3cnIG1ldGhvZFwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKG1ldGhvZCwgZGVsZWdhdGUuaXRlcmF0b3IsIGNvbnRleHQuYXJnKTtcblxuICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIGluZm8gPSByZWNvcmQuYXJnO1xuXG4gICAgaWYgKCEgaW5mbykge1xuICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdFwiKTtcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgaWYgKGluZm8uZG9uZSkge1xuICAgICAgLy8gQXNzaWduIHRoZSByZXN1bHQgb2YgdGhlIGZpbmlzaGVkIGRlbGVnYXRlIHRvIHRoZSB0ZW1wb3JhcnlcbiAgICAgIC8vIHZhcmlhYmxlIHNwZWNpZmllZCBieSBkZWxlZ2F0ZS5yZXN1bHROYW1lIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0W2RlbGVnYXRlLnJlc3VsdE5hbWVdID0gaW5mby52YWx1ZTtcblxuICAgICAgLy8gUmVzdW1lIGV4ZWN1dGlvbiBhdCB0aGUgZGVzaXJlZCBsb2NhdGlvbiAoc2VlIGRlbGVnYXRlWWllbGQpLlxuICAgICAgY29udGV4dC5uZXh0ID0gZGVsZWdhdGUubmV4dExvYztcblxuICAgICAgLy8gSWYgY29udGV4dC5tZXRob2Qgd2FzIFwidGhyb3dcIiBidXQgdGhlIGRlbGVnYXRlIGhhbmRsZWQgdGhlXG4gICAgICAvLyBleGNlcHRpb24sIGxldCB0aGUgb3V0ZXIgZ2VuZXJhdG9yIHByb2NlZWQgbm9ybWFsbHkuIElmXG4gICAgICAvLyBjb250ZXh0Lm1ldGhvZCB3YXMgXCJuZXh0XCIsIGZvcmdldCBjb250ZXh0LmFyZyBzaW5jZSBpdCBoYXMgYmVlblxuICAgICAgLy8gXCJjb25zdW1lZFwiIGJ5IHRoZSBkZWxlZ2F0ZSBpdGVyYXRvci4gSWYgY29udGV4dC5tZXRob2Qgd2FzXG4gICAgICAvLyBcInJldHVyblwiLCBhbGxvdyB0aGUgb3JpZ2luYWwgLnJldHVybiBjYWxsIHRvIGNvbnRpbnVlIGluIHRoZVxuICAgICAgLy8gb3V0ZXIgZ2VuZXJhdG9yLlxuICAgICAgaWYgKGNvbnRleHQubWV0aG9kICE9PSBcInJldHVyblwiKSB7XG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlLXlpZWxkIHRoZSByZXN1bHQgcmV0dXJuZWQgYnkgdGhlIGRlbGVnYXRlIG1ldGhvZC5cbiAgICAgIHJldHVybiBpbmZvO1xuICAgIH1cblxuICAgIC8vIFRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBpcyBmaW5pc2hlZCwgc28gZm9yZ2V0IGl0IGFuZCBjb250aW51ZSB3aXRoXG4gICAgLy8gdGhlIG91dGVyIGdlbmVyYXRvci5cbiAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgfVxuXG4gIC8vIERlZmluZSBHZW5lcmF0b3IucHJvdG90eXBlLntuZXh0LHRocm93LHJldHVybn0gaW4gdGVybXMgb2YgdGhlXG4gIC8vIHVuaWZpZWQgLl9pbnZva2UgaGVscGVyIG1ldGhvZC5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEdwKTtcblxuICBkZWZpbmUoR3AsIHRvU3RyaW5nVGFnU3ltYm9sLCBcIkdlbmVyYXRvclwiKTtcblxuICAvLyBBIEdlbmVyYXRvciBzaG91bGQgYWx3YXlzIHJldHVybiBpdHNlbGYgYXMgdGhlIGl0ZXJhdG9yIG9iamVjdCB3aGVuIHRoZVxuICAvLyBAQGl0ZXJhdG9yIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBpdC4gU29tZSBicm93c2VycycgaW1wbGVtZW50YXRpb25zIG9mIHRoZVxuICAvLyBpdGVyYXRvciBwcm90b3R5cGUgY2hhaW4gaW5jb3JyZWN0bHkgaW1wbGVtZW50IHRoaXMsIGNhdXNpbmcgdGhlIEdlbmVyYXRvclxuICAvLyBvYmplY3QgdG8gbm90IGJlIHJldHVybmVkIGZyb20gdGhpcyBjYWxsLiBUaGlzIGVuc3VyZXMgdGhhdCBkb2Vzbid0IGhhcHBlbi5cbiAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9pc3N1ZXMvMjc0IGZvciBtb3JlIGRldGFpbHMuXG4gIGRlZmluZShHcCwgaXRlcmF0b3JTeW1ib2wsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9KTtcblxuICBkZWZpbmUoR3AsIFwidG9TdHJpbmdcIiwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBHZW5lcmF0b3JdXCI7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHB1c2hUcnlFbnRyeShsb2NzKSB7XG4gICAgdmFyIGVudHJ5ID0geyB0cnlMb2M6IGxvY3NbMF0gfTtcblxuICAgIGlmICgxIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmNhdGNoTG9jID0gbG9jc1sxXTtcbiAgICB9XG5cbiAgICBpZiAoMiBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTtcbiAgICAgIGVudHJ5LmFmdGVyTG9jID0gbG9jc1szXTtcbiAgICB9XG5cbiAgICB0aGlzLnRyeUVudHJpZXMucHVzaChlbnRyeSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFRyeUVudHJ5KGVudHJ5KSB7XG4gICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb24gfHwge307XG4gICAgcmVjb3JkLnR5cGUgPSBcIm5vcm1hbFwiO1xuICAgIGRlbGV0ZSByZWNvcmQuYXJnO1xuICAgIGVudHJ5LmNvbXBsZXRpb24gPSByZWNvcmQ7XG4gIH1cblxuICBmdW5jdGlvbiBDb250ZXh0KHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gVGhlIHJvb3QgZW50cnkgb2JqZWN0IChlZmZlY3RpdmVseSBhIHRyeSBzdGF0ZW1lbnQgd2l0aG91dCBhIGNhdGNoXG4gICAgLy8gb3IgYSBmaW5hbGx5IGJsb2NrKSBnaXZlcyB1cyBhIHBsYWNlIHRvIHN0b3JlIHZhbHVlcyB0aHJvd24gZnJvbVxuICAgIC8vIGxvY2F0aW9ucyB3aGVyZSB0aGVyZSBpcyBubyBlbmNsb3NpbmcgdHJ5IHN0YXRlbWVudC5cbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbeyB0cnlMb2M6IFwicm9vdFwiIH1dO1xuICAgIHRyeUxvY3NMaXN0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKTtcbiAgICB0aGlzLnJlc2V0KHRydWUpO1xuICB9XG5cbiAgZXhwb3J0cy5rZXlzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICB9XG4gICAga2V5cy5yZXZlcnNlKCk7XG5cbiAgICAvLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcFxuICAgIC8vIHRoaW5ncyBzaW1wbGUgYW5kIHJldHVybiB0aGUgbmV4dCBmdW5jdGlvbiBpdHNlbGYuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICB3aGlsZSAoa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXMucG9wKCk7XG4gICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgbmV4dC52YWx1ZSA9IGtleTtcbiAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUbyBhdm9pZCBjcmVhdGluZyBhbiBhZGRpdGlvbmFsIG9iamVjdCwgd2UganVzdCBoYW5nIHRoZSAudmFsdWVcbiAgICAgIC8vIGFuZCAuZG9uZSBwcm9wZXJ0aWVzIG9mZiB0aGUgbmV4dCBmdW5jdGlvbiBvYmplY3QgaXRzZWxmLiBUaGlzXG4gICAgICAvLyBhbHNvIGVuc3VyZXMgdGhhdCB0aGUgbWluaWZpZXIgd2lsbCBub3QgYW5vbnltaXplIHRoZSBmdW5jdGlvbi5cbiAgICAgIG5leHQuZG9uZSA9IHRydWU7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIHZhbHVlcyhpdGVyYWJsZSkge1xuICAgIGlmIChpdGVyYWJsZSkge1xuICAgICAgdmFyIGl0ZXJhdG9yTWV0aG9kID0gaXRlcmFibGVbaXRlcmF0b3JTeW1ib2xdO1xuICAgICAgaWYgKGl0ZXJhdG9yTWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvck1ldGhvZC5jYWxsKGl0ZXJhYmxlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhYmxlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTmFOKGl0ZXJhYmxlLmxlbmd0aCkpIHtcbiAgICAgICAgdmFyIGkgPSAtMSwgbmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgICAgd2hpbGUgKCsraSA8IGl0ZXJhYmxlLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZXJhYmxlLCBpKSkge1xuICAgICAgICAgICAgICBuZXh0LnZhbHVlID0gaXRlcmFibGVbaV07XG4gICAgICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZXh0LnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG5leHQuZG9uZSA9IHRydWU7XG5cbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gbmV4dC5uZXh0ID0gbmV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gYW4gaXRlcmF0b3Igd2l0aCBubyB2YWx1ZXMuXG4gICAgcmV0dXJuIHsgbmV4dDogZG9uZVJlc3VsdCB9O1xuICB9XG4gIGV4cG9ydHMudmFsdWVzID0gdmFsdWVzO1xuXG4gIGZ1bmN0aW9uIGRvbmVSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICB9XG5cbiAgQ29udGV4dC5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbnRleHQsXG5cbiAgICByZXNldDogZnVuY3Rpb24oc2tpcFRlbXBSZXNldCkge1xuICAgICAgdGhpcy5wcmV2ID0gMDtcbiAgICAgIHRoaXMubmV4dCA9IDA7XG4gICAgICAvLyBSZXNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgIHRoaXMuc2VudCA9IHRoaXMuX3NlbnQgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpO1xuXG4gICAgICBpZiAoIXNraXBUZW1wUmVzZXQpIHtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzKSB7XG4gICAgICAgICAgLy8gTm90IHN1cmUgYWJvdXQgdGhlIG9wdGltYWwgb3JkZXIgb2YgdGhlc2UgY29uZGl0aW9uczpcbiAgICAgICAgICBpZiAobmFtZS5jaGFyQXQoMCkgPT09IFwidFwiICYmXG4gICAgICAgICAgICAgIGhhc093bi5jYWxsKHRoaXMsIG5hbWUpICYmXG4gICAgICAgICAgICAgICFpc05hTigrbmFtZS5zbGljZSgxKSkpIHtcbiAgICAgICAgICAgIHRoaXNbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcblxuICAgICAgdmFyIHJvb3RFbnRyeSA9IHRoaXMudHJ5RW50cmllc1swXTtcbiAgICAgIHZhciByb290UmVjb3JkID0gcm9vdEVudHJ5LmNvbXBsZXRpb247XG4gICAgICBpZiAocm9vdFJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcm9vdFJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnJ2YWw7XG4gICAgfSxcblxuICAgIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbihleGNlcHRpb24pIHtcbiAgICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgICAgdGhyb3cgZXhjZXB0aW9uO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29udGV4dCA9IHRoaXM7XG4gICAgICBmdW5jdGlvbiBoYW5kbGUobG9jLCBjYXVnaHQpIHtcbiAgICAgICAgcmVjb3JkLnR5cGUgPSBcInRocm93XCI7XG4gICAgICAgIHJlY29yZC5hcmcgPSBleGNlcHRpb247XG4gICAgICAgIGNvbnRleHQubmV4dCA9IGxvYztcblxuICAgICAgICBpZiAoY2F1Z2h0KSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRpc3BhdGNoZWQgZXhjZXB0aW9uIHdhcyBjYXVnaHQgYnkgYSBjYXRjaCBibG9jayxcbiAgICAgICAgICAvLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gISEgY2F1Z2h0O1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gXCJyb290XCIpIHtcbiAgICAgICAgICAvLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZVxuICAgICAgICAgIC8vIGl0LCBzbyBzZXQgdGhlIGNvbXBsZXRpb24gdmFsdWUgb2YgdGhlIGVudGlyZSBmdW5jdGlvbiB0b1xuICAgICAgICAgIC8vIHRocm93IHRoZSBleGNlcHRpb24uXG4gICAgICAgICAgcmV0dXJuIGhhbmRsZShcImVuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7XG4gICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksIFwiY2F0Y2hMb2NcIik7XG4gICAgICAgICAgdmFyIGhhc0ZpbmFsbHkgPSBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpO1xuXG4gICAgICAgICAgaWYgKGhhc0NhdGNoICYmIGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNDYXRjaCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBhYnJ1cHQ6IGZ1bmN0aW9uKHR5cGUsIGFyZykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2ICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpICYmXG4gICAgICAgICAgICB0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgdmFyIGZpbmFsbHlFbnRyeSA9IGVudHJ5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkgJiZcbiAgICAgICAgICAodHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgIHR5cGUgPT09IFwiY29udGludWVcIikgJiZcbiAgICAgICAgICBmaW5hbGx5RW50cnkudHJ5TG9jIDw9IGFyZyAmJlxuICAgICAgICAgIGFyZyA8PSBmaW5hbGx5RW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAvLyBJZ25vcmUgdGhlIGZpbmFsbHkgZW50cnkgaWYgY29udHJvbCBpcyBub3QganVtcGluZyB0byBhXG4gICAgICAgIC8vIGxvY2F0aW9uIG91dHNpZGUgdGhlIHRyeS9jYXRjaCBibG9jay5cbiAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlY29yZCA9IGZpbmFsbHlFbnRyeSA/IGZpbmFsbHlFbnRyeS5jb21wbGV0aW9uIDoge307XG4gICAgICByZWNvcmQudHlwZSA9IHR5cGU7XG4gICAgICByZWNvcmQuYXJnID0gYXJnO1xuXG4gICAgICBpZiAoZmluYWxseUVudHJ5KSB7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIHRoaXMubmV4dCA9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jO1xuICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGUocmVjb3JkKTtcbiAgICB9LFxuXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlY29yZCwgYWZ0ZXJMb2MpIHtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgcmVjb3JkLnR5cGUgPT09IFwiY29udGludWVcIikge1xuICAgICAgICB0aGlzLm5leHQgPSByZWNvcmQuYXJnO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICB0aGlzLnJ2YWwgPSB0aGlzLmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gXCJlbmRcIjtcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIgJiYgYWZ0ZXJMb2MpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gYWZ0ZXJMb2M7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH0sXG5cbiAgICBmaW5pc2g6IGZ1bmN0aW9uKGZpbmFsbHlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkuZmluYWxseUxvYyA9PT0gZmluYWxseUxvYykge1xuICAgICAgICAgIHRoaXMuY29tcGxldGUoZW50cnkuY29tcGxldGlvbiwgZW50cnkuYWZ0ZXJMb2MpO1xuICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIFwiY2F0Y2hcIjogZnVuY3Rpb24odHJ5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7XG4gICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG4gICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIHZhciB0aHJvd24gPSByZWNvcmQuYXJnO1xuICAgICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aHJvd247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGNvbnRleHQuY2F0Y2ggbWV0aG9kIG11c3Qgb25seSBiZSBjYWxsZWQgd2l0aCBhIGxvY2F0aW9uXG4gICAgICAvLyBhcmd1bWVudCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEga25vd24gY2F0Y2ggYmxvY2suXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIik7XG4gICAgfSxcblxuICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uKGl0ZXJhYmxlLCByZXN1bHROYW1lLCBuZXh0TG9jKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGl0ZXJhYmxlKSxcbiAgICAgICAgcmVzdWx0TmFtZTogcmVzdWx0TmFtZSxcbiAgICAgICAgbmV4dExvYzogbmV4dExvY1xuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAvLyBEZWxpYmVyYXRlbHkgZm9yZ2V0IHRoZSBsYXN0IHNlbnQgdmFsdWUgc28gdGhhdCB3ZSBkb24ndFxuICAgICAgICAvLyBhY2NpZGVudGFsbHkgcGFzcyBpdCBvbiB0byB0aGUgZGVsZWdhdGUuXG4gICAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZVxuICAvLyBvciBub3QsIHJldHVybiB0aGUgcnVudGltZSBvYmplY3Qgc28gdGhhdCB3ZSBjYW4gZGVjbGFyZSB0aGUgdmFyaWFibGVcbiAgLy8gcmVnZW5lcmF0b3JSdW50aW1lIGluIHRoZSBvdXRlciBzY29wZSwgd2hpY2ggYWxsb3dzIHRoaXMgbW9kdWxlIHRvIGJlXG4gIC8vIGluamVjdGVkIGVhc2lseSBieSBgYmluL3JlZ2VuZXJhdG9yIC0taW5jbHVkZS1ydW50aW1lIHNjcmlwdC5qc2AuXG4gIHJldHVybiBleHBvcnRzO1xuXG59KFxuICAvLyBJZiB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGUsIHVzZSBtb2R1bGUuZXhwb3J0c1xuICAvLyBhcyB0aGUgcmVnZW5lcmF0b3JSdW50aW1lIG5hbWVzcGFjZS4gT3RoZXJ3aXNlIGNyZWF0ZSBhIG5ldyBlbXB0eVxuICAvLyBvYmplY3QuIEVpdGhlciB3YXksIHRoZSByZXN1bHRpbmcgb2JqZWN0IHdpbGwgYmUgdXNlZCB0byBpbml0aWFsaXplXG4gIC8vIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgdmFyaWFibGUgYXQgdGhlIHRvcCBvZiB0aGlzIGZpbGUuXG4gIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgPyBtb2R1bGUuZXhwb3J0cyA6IHt9XG4pKTtcblxudHJ5IHtcbiAgcmVnZW5lcmF0b3JSdW50aW1lID0gcnVudGltZTtcbn0gY2F0Y2ggKGFjY2lkZW50YWxTdHJpY3RNb2RlKSB7XG4gIC8vIFRoaXMgbW9kdWxlIHNob3VsZCBub3QgYmUgcnVubmluZyBpbiBzdHJpY3QgbW9kZSwgc28gdGhlIGFib3ZlXG4gIC8vIGFzc2lnbm1lbnQgc2hvdWxkIGFsd2F5cyB3b3JrIHVubGVzcyBzb21ldGhpbmcgaXMgbWlzY29uZmlndXJlZC4gSnVzdFxuICAvLyBpbiBjYXNlIHJ1bnRpbWUuanMgYWNjaWRlbnRhbGx5IHJ1bnMgaW4gc3RyaWN0IG1vZGUsIGluIG1vZGVybiBlbmdpbmVzXG4gIC8vIHdlIGNhbiBleHBsaWNpdGx5IGFjY2VzcyBnbG9iYWxUaGlzLiBJbiBvbGRlciBlbmdpbmVzIHdlIGNhbiBlc2NhcGVcbiAgLy8gc3RyaWN0IG1vZGUgdXNpbmcgYSBnbG9iYWwgRnVuY3Rpb24gY2FsbC4gVGhpcyBjb3VsZCBjb25jZWl2YWJseSBmYWlsXG4gIC8vIGlmIGEgQ29udGVudCBTZWN1cml0eSBQb2xpY3kgZm9yYmlkcyB1c2luZyBGdW5jdGlvbiwgYnV0IGluIHRoYXQgY2FzZVxuICAvLyB0aGUgcHJvcGVyIHNvbHV0aW9uIGlzIHRvIGZpeCB0aGUgYWNjaWRlbnRhbCBzdHJpY3QgbW9kZSBwcm9ibGVtLiBJZlxuICAvLyB5b3UndmUgbWlzY29uZmlndXJlZCB5b3VyIGJ1bmRsZXIgdG8gZm9yY2Ugc3RyaWN0IG1vZGUgYW5kIGFwcGxpZWQgYVxuICAvLyBDU1AgdG8gZm9yYmlkIEZ1bmN0aW9uLCBhbmQgeW91J3JlIG5vdCB3aWxsaW5nIHRvIGZpeCBlaXRoZXIgb2YgdGhvc2VcbiAgLy8gcHJvYmxlbXMsIHBsZWFzZSBkZXRhaWwgeW91ciB1bmlxdWUgcHJlZGljYW1lbnQgaW4gYSBHaXRIdWIgaXNzdWUuXG4gIGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gXCJvYmplY3RcIikge1xuICAgIGdsb2JhbFRoaXMucmVnZW5lcmF0b3JSdW50aW1lID0gcnVudGltZTtcbiAgfSBlbHNlIHtcbiAgICBGdW5jdGlvbihcInJcIiwgXCJyZWdlbmVyYXRvclJ1bnRpbWUgPSByXCIpKHJ1bnRpbWUpO1xuICB9XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWdlbmVyYXRvci1ydW50aW1lXCIpO1xuIiwiZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykge1xuICB0cnkge1xuICAgIHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTtcbiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlamVjdChlcnJvcik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGluZm8uZG9uZSkge1xuICAgIHJlc29sdmUodmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuXG4gICAgICBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwibmV4dFwiLCB2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIF90aHJvdyhlcnIpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcInRocm93XCIsIGVycik7XG4gICAgICB9XG5cbiAgICAgIF9uZXh0KHVuZGVmaW5lZCk7XG4gICAgfSk7XG4gIH07XG59IiwiaW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSBcIkBiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yXCI7XG5pbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3JcIjtcbmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHJhZiBmcm9tIFwicmMtdXRpbC9lcy9yYWZcIjtcbnZhciBTdGF0dXNRdWV1ZSA9IFsnbWVhc3VyZScsICdhbGlnbicsIG51bGwsICdtb3Rpb24nXTtcbmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAodmlzaWJsZSwgZG9NZWFzdXJlKSB7XG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShudWxsKSxcbiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLFxuICAgICAgc3RhdHVzID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNldEludGVybmFsU3RhdHVzID0gX3VzZVN0YXRlMlsxXTtcblxuICB2YXIgcmFmUmVmID0gdXNlUmVmKCk7XG4gIHZhciBkZXN0cm95UmVmID0gdXNlUmVmKGZhbHNlKTtcblxuICBmdW5jdGlvbiBzZXRTdGF0dXMobmV4dFN0YXR1cykge1xuICAgIGlmICghZGVzdHJveVJlZi5jdXJyZW50KSB7XG4gICAgICBzZXRJbnRlcm5hbFN0YXR1cyhuZXh0U3RhdHVzKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWxSYWYoKSB7XG4gICAgcmFmLmNhbmNlbChyYWZSZWYuY3VycmVudCk7XG4gIH1cblxuICBmdW5jdGlvbiBnb05leHRTdGF0dXMoY2FsbGJhY2spIHtcbiAgICBjYW5jZWxSYWYoKTtcbiAgICByYWZSZWYuY3VycmVudCA9IHJhZihmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBPbmx5IGFsaWduIHNob3VsZCBiZSBtYW51YWxseSB0cmlnZ2VyXG4gICAgICBzZXRTdGF0dXMoZnVuY3Rpb24gKHByZXYpIHtcbiAgICAgICAgc3dpdGNoIChzdGF0dXMpIHtcbiAgICAgICAgICBjYXNlICdhbGlnbic6XG4gICAgICAgICAgICByZXR1cm4gJ21vdGlvbic7XG5cbiAgICAgICAgICBjYXNlICdtb3Rpb24nOlxuICAgICAgICAgICAgcmV0dXJuICdzdGFibGUnO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgfSk7XG4gICAgICBjYWxsYmFjayA9PT0gbnVsbCB8fCBjYWxsYmFjayA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2FsbGJhY2soKTtcbiAgICB9KTtcbiAgfSAvLyBJbml0IHN0YXR1c1xuXG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBzZXRTdGF0dXMoJ21lYXN1cmUnKTtcbiAgfSwgW3Zpc2libGVdKTsgLy8gR28gbmV4dCBzdGF0dXNcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgICBjYXNlICdtZWFzdXJlJzpcbiAgICAgICAgZG9NZWFzdXJlKCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgIH1cblxuICAgIGlmIChzdGF0dXMpIHtcbiAgICAgIHJhZlJlZi5jdXJyZW50ID0gcmFmKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHtcbiAgICAgICAgdmFyIGluZGV4LCBuZXh0U3RhdHVzO1xuICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHtcbiAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIGluZGV4ID0gU3RhdHVzUXVldWUuaW5kZXhPZihzdGF0dXMpO1xuICAgICAgICAgICAgICAgIG5leHRTdGF0dXMgPSBTdGF0dXNRdWV1ZVtpbmRleCArIDFdO1xuXG4gICAgICAgICAgICAgICAgaWYgKG5leHRTdGF0dXMgJiYgaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICBzZXRTdGF0dXMobmV4dFN0YXR1cyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LCBfY2FsbGVlKTtcbiAgICAgIH0pKSk7XG4gICAgfVxuICB9LCBbc3RhdHVzXSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRlc3Ryb3lSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICBjYW5jZWxSYWYoKTtcbiAgICB9O1xuICB9LCBbXSk7XG4gIHJldHVybiBbc3RhdHVzLCBnb05leHRTdGF0dXNdO1xufSk7IiwiaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5leHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKHN0cmV0Y2gpIHtcbiAgdmFyIF9SZWFjdCR1c2VTdGF0ZSA9IFJlYWN0LnVzZVN0YXRlKHtcbiAgICB3aWR0aDogMCxcbiAgICBoZWlnaHQ6IDBcbiAgfSksXG4gICAgICBfUmVhY3QkdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlLCAyKSxcbiAgICAgIHRhcmdldFNpemUgPSBfUmVhY3QkdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0VGFyZ2V0U2l6ZSA9IF9SZWFjdCR1c2VTdGF0ZTJbMV07XG5cbiAgZnVuY3Rpb24gbWVhc3VyZVN0cmV0Y2goZWxlbWVudCkge1xuICAgIHNldFRhcmdldFNpemUoe1xuICAgICAgd2lkdGg6IGVsZW1lbnQub2Zmc2V0V2lkdGgsXG4gICAgICBoZWlnaHQ6IGVsZW1lbnQub2Zmc2V0SGVpZ2h0XG4gICAgfSk7XG4gIH0gLy8gTWVyZ2Ugc3RyZXRjaCBzdHlsZVxuXG5cbiAgdmFyIHN0eWxlID0gUmVhY3QudXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNpemVTdHlsZSA9IHt9O1xuXG4gICAgaWYgKHN0cmV0Y2gpIHtcbiAgICAgIHZhciB3aWR0aCA9IHRhcmdldFNpemUud2lkdGgsXG4gICAgICAgICAgaGVpZ2h0ID0gdGFyZ2V0U2l6ZS5oZWlnaHQ7IC8vIFN0cmV0Y2ggd2l0aCB0YXJnZXRcblxuICAgICAgaWYgKHN0cmV0Y2guaW5kZXhPZignaGVpZ2h0JykgIT09IC0xICYmIGhlaWdodCkge1xuICAgICAgICBzaXplU3R5bGUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgfSBlbHNlIGlmIChzdHJldGNoLmluZGV4T2YoJ21pbkhlaWdodCcpICE9PSAtMSAmJiBoZWlnaHQpIHtcbiAgICAgICAgc2l6ZVN0eWxlLm1pbkhlaWdodCA9IGhlaWdodDtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0cmV0Y2guaW5kZXhPZignd2lkdGgnKSAhPT0gLTEgJiYgd2lkdGgpIHtcbiAgICAgICAgc2l6ZVN0eWxlLndpZHRoID0gd2lkdGg7XG4gICAgICB9IGVsc2UgaWYgKHN0cmV0Y2guaW5kZXhPZignbWluV2lkdGgnKSAhPT0gLTEgJiYgd2lkdGgpIHtcbiAgICAgICAgc2l6ZVN0eWxlLm1pbldpZHRoID0gd2lkdGg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNpemVTdHlsZTtcbiAgfSwgW3N0cmV0Y2gsIHRhcmdldFNpemVdKTtcbiAgcmV0dXJuIFtzdHlsZSwgbWVhc3VyZVN0cmV0Y2hdO1xufSk7IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IEFsaWduIGZyb20gJ3JjLWFsaWduJztcbmltcG9ydCBDU1NNb3Rpb24gZnJvbSAncmMtbW90aW9uJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHVzZVZpc2libGVTdGF0dXMgZnJvbSAnLi91c2VWaXNpYmxlU3RhdHVzJztcbmltcG9ydCB7IGdldE1vdGlvbiB9IGZyb20gJy4uL3V0aWxzL2xlZ2FjeVV0aWwnO1xuaW1wb3J0IHVzZVN0cmV0Y2hTdHlsZSBmcm9tICcuL3VzZVN0cmV0Y2hTdHlsZSc7XG52YXIgUG9wdXBJbm5lciA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChwcm9wcywgcmVmKSB7XG4gIHZhciB2aXNpYmxlID0gcHJvcHMudmlzaWJsZSxcbiAgICAgIHByZWZpeENscyA9IHByb3BzLnByZWZpeENscyxcbiAgICAgIGNsYXNzTmFtZSA9IHByb3BzLmNsYXNzTmFtZSxcbiAgICAgIHN0eWxlID0gcHJvcHMuc3R5bGUsXG4gICAgICBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuLFxuICAgICAgekluZGV4ID0gcHJvcHMuekluZGV4LFxuICAgICAgc3RyZXRjaCA9IHByb3BzLnN0cmV0Y2gsXG4gICAgICBkZXN0cm95UG9wdXBPbkhpZGUgPSBwcm9wcy5kZXN0cm95UG9wdXBPbkhpZGUsXG4gICAgICBmb3JjZVJlbmRlciA9IHByb3BzLmZvcmNlUmVuZGVyLFxuICAgICAgYWxpZ24gPSBwcm9wcy5hbGlnbixcbiAgICAgIHBvaW50ID0gcHJvcHMucG9pbnQsXG4gICAgICBnZXRSb290RG9tTm9kZSA9IHByb3BzLmdldFJvb3REb21Ob2RlLFxuICAgICAgZ2V0Q2xhc3NOYW1lRnJvbUFsaWduID0gcHJvcHMuZ2V0Q2xhc3NOYW1lRnJvbUFsaWduLFxuICAgICAgb25BbGlnbiA9IHByb3BzLm9uQWxpZ24sXG4gICAgICBvbk1vdXNlRW50ZXIgPSBwcm9wcy5vbk1vdXNlRW50ZXIsXG4gICAgICBvbk1vdXNlTGVhdmUgPSBwcm9wcy5vbk1vdXNlTGVhdmUsXG4gICAgICBvbk1vdXNlRG93biA9IHByb3BzLm9uTW91c2VEb3duLFxuICAgICAgb25Ub3VjaFN0YXJ0ID0gcHJvcHMub25Ub3VjaFN0YXJ0O1xuICB2YXIgYWxpZ25SZWYgPSB1c2VSZWYoKTtcbiAgdmFyIGVsZW1lbnRSZWYgPSB1c2VSZWYoKTtcblxuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoKSxcbiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLFxuICAgICAgYWxpZ25lZENsYXNzTmFtZSA9IF91c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRBbGlnbmVkQ2xhc3NOYW1lID0gX3VzZVN0YXRlMlsxXTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT0gTWVhc3VyZSA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBfdXNlU3RyZXRjaFN0eWxlID0gdXNlU3RyZXRjaFN0eWxlKHN0cmV0Y2gpLFxuICAgICAgX3VzZVN0cmV0Y2hTdHlsZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RyZXRjaFN0eWxlLCAyKSxcbiAgICAgIHN0cmV0Y2hTdHlsZSA9IF91c2VTdHJldGNoU3R5bGUyWzBdLFxuICAgICAgbWVhc3VyZVN0cmV0Y2hTdHlsZSA9IF91c2VTdHJldGNoU3R5bGUyWzFdO1xuXG4gIGZ1bmN0aW9uIGRvTWVhc3VyZSgpIHtcbiAgICBpZiAoc3RyZXRjaCkge1xuICAgICAgbWVhc3VyZVN0cmV0Y2hTdHlsZShnZXRSb290RG9tTm9kZSgpKTtcbiAgICB9XG4gIH0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09IFN0YXR1cyA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBfdXNlVmlzaWJsZVN0YXR1cyA9IHVzZVZpc2libGVTdGF0dXModmlzaWJsZSwgZG9NZWFzdXJlKSxcbiAgICAgIF91c2VWaXNpYmxlU3RhdHVzMiA9IF9zbGljZWRUb0FycmF5KF91c2VWaXNpYmxlU3RhdHVzLCAyKSxcbiAgICAgIHN0YXR1cyA9IF91c2VWaXNpYmxlU3RhdHVzMlswXSxcbiAgICAgIGdvTmV4dFN0YXR1cyA9IF91c2VWaXNpYmxlU3RhdHVzMlsxXTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09IEFsaWducyA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBwcmVwYXJlUmVzb2x2ZVJlZiA9IHVzZVJlZigpOyAvLyBgdGFyZ2V0YCBvbiBgcmMtYWxpZ25gIGNhbiBhY2NlcHQgYXMgYSBmdW5jdGlvbiB0byBnZXQgdGhlIGJpbmQgZWxlbWVudCBvciBhIHBvaW50LlxuICAvLyByZWY6IGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL3JjLWFsaWduXG5cbiAgZnVuY3Rpb24gZ2V0QWxpZ25UYXJnZXQoKSB7XG4gICAgaWYgKHBvaW50KSB7XG4gICAgICByZXR1cm4gcG9pbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdldFJvb3REb21Ob2RlO1xuICB9XG5cbiAgZnVuY3Rpb24gZm9yY2VBbGlnbigpIHtcbiAgICB2YXIgX2FsaWduUmVmJGN1cnJlbnQ7XG5cbiAgICAoX2FsaWduUmVmJGN1cnJlbnQgPSBhbGlnblJlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCBfYWxpZ25SZWYkY3VycmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FsaWduUmVmJGN1cnJlbnQuZm9yY2VBbGlnbigpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25JbnRlcm5hbEFsaWduKHBvcHVwRG9tTm9kZSwgbWF0Y2hBbGlnbikge1xuICAgIHZhciBuZXh0QWxpZ25lZENsYXNzTmFtZSA9IGdldENsYXNzTmFtZUZyb21BbGlnbihtYXRjaEFsaWduKTtcblxuICAgIGlmIChhbGlnbmVkQ2xhc3NOYW1lICE9PSBuZXh0QWxpZ25lZENsYXNzTmFtZSkge1xuICAgICAgc2V0QWxpZ25lZENsYXNzTmFtZShuZXh0QWxpZ25lZENsYXNzTmFtZSk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gJ2FsaWduJykge1xuICAgICAgLy8gUmVwZWF0IHVudGlsIG5vdCBtb3JlIGFsaWduIG5lZWRlZFxuICAgICAgaWYgKGFsaWduZWRDbGFzc05hbWUgIT09IG5leHRBbGlnbmVkQ2xhc3NOYW1lKSB7XG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGZvcmNlQWxpZ24oKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnb05leHRTdGF0dXMoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBfcHJlcGFyZVJlc29sdmVSZWYkY3U7XG5cbiAgICAgICAgICAoX3ByZXBhcmVSZXNvbHZlUmVmJGN1ID0gcHJlcGFyZVJlc29sdmVSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX3ByZXBhcmVSZXNvbHZlUmVmJGN1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHJlcGFyZVJlc29sdmVSZWYkY3UuY2FsbChwcmVwYXJlUmVzb2x2ZVJlZik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBvbkFsaWduID09PSBudWxsIHx8IG9uQWxpZ24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uQWxpZ24ocG9wdXBEb21Ob2RlLCBtYXRjaEFsaWduKTtcbiAgICB9XG4gIH0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09IE1vdGlvbiA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBtb3Rpb24gPSBfb2JqZWN0U3ByZWFkKHt9LCBnZXRNb3Rpb24ocHJvcHMpKTtcblxuICBbJ29uQXBwZWFyRW5kJywgJ29uRW50ZXJFbmQnLCAnb25MZWF2ZUVuZCddLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50TmFtZSkge1xuICAgIHZhciBvcmlnaW5IYW5kbGVyID0gbW90aW9uW2V2ZW50TmFtZV07XG5cbiAgICBtb3Rpb25bZXZlbnROYW1lXSA9IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudCkge1xuICAgICAgZ29OZXh0U3RhdHVzKCk7XG4gICAgICByZXR1cm4gb3JpZ2luSGFuZGxlciA9PT0gbnVsbCB8fCBvcmlnaW5IYW5kbGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcmlnaW5IYW5kbGVyKGVsZW1lbnQsIGV2ZW50KTtcbiAgICB9O1xuICB9KTtcblxuICBmdW5jdGlvbiBvblNob3dQcmVwYXJlKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgcHJlcGFyZVJlc29sdmVSZWYuY3VycmVudCA9IHJlc29sdmU7XG4gICAgfSk7XG4gIH0gLy8gR28gdG8gc3RhYmxlIGRpcmVjdGx5IHdoZW4gbW90aW9uIG5vdCBwcm92aWRlZFxuXG5cbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIW1vdGlvbi5tb3Rpb25OYW1lICYmIHN0YXR1cyA9PT0gJ21vdGlvbicpIHtcbiAgICAgIGdvTmV4dFN0YXR1cygpO1xuICAgIH1cbiAgfSwgW21vdGlvbi5tb3Rpb25OYW1lLCBzdGF0dXNdKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PSBSZWZzID09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBSZWFjdC51c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICBmb3JjZUFsaWduOiBmb3JjZUFsaWduLFxuICAgICAgZ2V0RWxlbWVudDogZnVuY3Rpb24gZ2V0RWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRSZWYuY3VycmVudDtcbiAgICAgIH1cbiAgICB9O1xuICB9KTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09IFJlbmRlciA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgbWVyZ2VkU3R5bGUgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0cmV0Y2hTdHlsZSksIHt9LCB7XG4gICAgekluZGV4OiB6SW5kZXgsXG4gICAgb3BhY2l0eTogc3RhdHVzID09PSAnbW90aW9uJyB8fCBzdGF0dXMgPT09ICdzdGFibGUnIHx8ICF2aXNpYmxlID8gdW5kZWZpbmVkIDogMCxcbiAgICBwb2ludGVyRXZlbnRzOiBzdGF0dXMgPT09ICdzdGFibGUnID8gdW5kZWZpbmVkIDogJ25vbmUnXG4gIH0sIHN0eWxlKTsgLy8gQWxpZ24gc3RhdHVzXG5cblxuICB2YXIgYWxpZ25EaXNhYmxlZCA9IHRydWU7XG5cbiAgaWYgKChhbGlnbiA9PT0gbnVsbCB8fCBhbGlnbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWxpZ24ucG9pbnRzKSAmJiAoc3RhdHVzID09PSAnYWxpZ24nIHx8IHN0YXR1cyA9PT0gJ3N0YWJsZScpKSB7XG4gICAgYWxpZ25EaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgdmFyIGNoaWxkTm9kZSA9IGNoaWxkcmVuOyAvLyBXcmFwcGVyIHdoZW4gbXVsdGlwbGUgY2hpbGRyZW5cblxuICBpZiAoUmVhY3QuQ2hpbGRyZW4uY291bnQoY2hpbGRyZW4pID4gMSkge1xuICAgIGNoaWxkTm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1jb250ZW50XCIpXG4gICAgfSwgY2hpbGRyZW4pO1xuICB9XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENTU01vdGlvbiwgX2V4dGVuZHMoe1xuICAgIHZpc2libGU6IHZpc2libGUsXG4gICAgcmVmOiBlbGVtZW50UmVmLFxuICAgIGxlYXZlZENsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1oaWRkZW5cIilcbiAgfSwgbW90aW9uLCB7XG4gICAgb25BcHBlYXJQcmVwYXJlOiBvblNob3dQcmVwYXJlLFxuICAgIG9uRW50ZXJQcmVwYXJlOiBvblNob3dQcmVwYXJlLFxuICAgIHJlbW92ZU9uTGVhdmU6IGRlc3Ryb3lQb3B1cE9uSGlkZSxcbiAgICBmb3JjZVJlbmRlcjogZm9yY2VSZW5kZXJcbiAgfSksIGZ1bmN0aW9uIChfcmVmLCBtb3Rpb25SZWYpIHtcbiAgICB2YXIgbW90aW9uQ2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICAgIG1vdGlvblN0eWxlID0gX3JlZi5zdHlsZTtcbiAgICB2YXIgbWVyZ2VkQ2xhc3NOYW1lID0gY2xhc3NOYW1lcyhwcmVmaXhDbHMsIGNsYXNzTmFtZSwgYWxpZ25lZENsYXNzTmFtZSwgbW90aW9uQ2xhc3NOYW1lKTtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQWxpZ24sIHtcbiAgICAgIHRhcmdldDogZ2V0QWxpZ25UYXJnZXQoKSxcbiAgICAgIGtleTogXCJwb3B1cFwiLFxuICAgICAgcmVmOiBhbGlnblJlZixcbiAgICAgIG1vbml0b3JXaW5kb3dSZXNpemU6IHRydWUsXG4gICAgICBkaXNhYmxlZDogYWxpZ25EaXNhYmxlZCxcbiAgICAgIGFsaWduOiBhbGlnbixcbiAgICAgIG9uQWxpZ246IG9uSW50ZXJuYWxBbGlnblxuICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIHJlZjogbW90aW9uUmVmLFxuICAgICAgY2xhc3NOYW1lOiBtZXJnZWRDbGFzc05hbWUsXG4gICAgICBvbk1vdXNlRW50ZXI6IG9uTW91c2VFbnRlcixcbiAgICAgIG9uTW91c2VMZWF2ZTogb25Nb3VzZUxlYXZlLFxuICAgICAgb25Nb3VzZURvd25DYXB0dXJlOiBvbk1vdXNlRG93bixcbiAgICAgIG9uVG91Y2hTdGFydENhcHR1cmU6IG9uVG91Y2hTdGFydCxcbiAgICAgIHN0eWxlOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1vdGlvblN0eWxlKSwgbWVyZ2VkU3R5bGUpXG4gICAgfSwgY2hpbGROb2RlKSk7XG4gIH0pO1xufSk7XG5Qb3B1cElubmVyLmRpc3BsYXlOYW1lID0gJ1BvcHVwSW5uZXInO1xuZXhwb3J0IGRlZmF1bHQgUG9wdXBJbm5lcjsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQ1NTTW90aW9uIGZyb20gJ3JjLW1vdGlvbic7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbnZhciBNb2JpbGVQb3B1cElubmVyID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgdmFyIHByZWZpeENscyA9IHByb3BzLnByZWZpeENscyxcbiAgICAgIHZpc2libGUgPSBwcm9wcy52aXNpYmxlLFxuICAgICAgekluZGV4ID0gcHJvcHMuekluZGV4LFxuICAgICAgY2hpbGRyZW4gPSBwcm9wcy5jaGlsZHJlbixcbiAgICAgIF9wcm9wcyRtb2JpbGUgPSBwcm9wcy5tb2JpbGU7XG4gIF9wcm9wcyRtb2JpbGUgPSBfcHJvcHMkbW9iaWxlID09PSB2b2lkIDAgPyB7fSA6IF9wcm9wcyRtb2JpbGU7XG4gIHZhciBwb3B1cENsYXNzTmFtZSA9IF9wcm9wcyRtb2JpbGUucG9wdXBDbGFzc05hbWUsXG4gICAgICBwb3B1cFN0eWxlID0gX3Byb3BzJG1vYmlsZS5wb3B1cFN0eWxlLFxuICAgICAgX3Byb3BzJG1vYmlsZSRwb3B1cE1vID0gX3Byb3BzJG1vYmlsZS5wb3B1cE1vdGlvbixcbiAgICAgIHBvcHVwTW90aW9uID0gX3Byb3BzJG1vYmlsZSRwb3B1cE1vID09PSB2b2lkIDAgPyB7fSA6IF9wcm9wcyRtb2JpbGUkcG9wdXBNbyxcbiAgICAgIHBvcHVwUmVuZGVyID0gX3Byb3BzJG1vYmlsZS5wb3B1cFJlbmRlcjtcbiAgdmFyIGVsZW1lbnRSZWYgPSBSZWFjdC51c2VSZWYoKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PSBSZWZzID09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBSZWFjdC51c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICBmb3JjZUFsaWduOiBmdW5jdGlvbiBmb3JjZUFsaWduKCkge30sXG4gICAgICBnZXRFbGVtZW50OiBmdW5jdGlvbiBnZXRFbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gZWxlbWVudFJlZi5jdXJyZW50O1xuICAgICAgfVxuICAgIH07XG4gIH0pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT0gUmVuZGVyID09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBtZXJnZWRTdHlsZSA9IF9vYmplY3RTcHJlYWQoe1xuICAgIHpJbmRleDogekluZGV4XG4gIH0sIHBvcHVwU3R5bGUpO1xuXG4gIHZhciBjaGlsZE5vZGUgPSBjaGlsZHJlbjsgLy8gV3JhcHBlciB3aGVuIG11bHRpcGxlIGNoaWxkcmVuXG5cbiAgaWYgKFJlYWN0LkNoaWxkcmVuLmNvdW50KGNoaWxkcmVuKSA+IDEpIHtcbiAgICBjaGlsZE5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItY29udGVudFwiKVxuICAgIH0sIGNoaWxkcmVuKTtcbiAgfSAvLyBNb2JpbGUgc3VwcG9ydCBhZGRpdGlvbmFsIHJlbmRlclxuXG5cbiAgaWYgKHBvcHVwUmVuZGVyKSB7XG4gICAgY2hpbGROb2RlID0gcG9wdXBSZW5kZXIoY2hpbGROb2RlKTtcbiAgfVxuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDU1NNb3Rpb24sIF9leHRlbmRzKHtcbiAgICB2aXNpYmxlOiB2aXNpYmxlLFxuICAgIHJlZjogZWxlbWVudFJlZixcbiAgICByZW1vdmVPbkxlYXZlOiB0cnVlXG4gIH0sIHBvcHVwTW90aW9uKSwgZnVuY3Rpb24gKF9yZWYsIG1vdGlvblJlZikge1xuICAgIHZhciBtb3Rpb25DbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZSxcbiAgICAgICAgbW90aW9uU3R5bGUgPSBfcmVmLnN0eWxlO1xuICAgIHZhciBtZXJnZWRDbGFzc05hbWUgPSBjbGFzc05hbWVzKHByZWZpeENscywgcG9wdXBDbGFzc05hbWUsIG1vdGlvbkNsYXNzTmFtZSk7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIHJlZjogbW90aW9uUmVmLFxuICAgICAgY2xhc3NOYW1lOiBtZXJnZWRDbGFzc05hbWUsXG4gICAgICBzdHlsZTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtb3Rpb25TdHlsZSksIG1lcmdlZFN0eWxlKVxuICAgIH0sIGNoaWxkTm9kZSk7XG4gIH0pO1xufSk7XG5Nb2JpbGVQb3B1cElubmVyLmRpc3BsYXlOYW1lID0gJ01vYmlsZVBvcHVwSW5uZXInO1xuZXhwb3J0IGRlZmF1bHQgTW9iaWxlUG9wdXBJbm5lcjsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzXCI7XG52YXIgX2V4Y2x1ZGVkID0gW1widmlzaWJsZVwiLCBcIm1vYmlsZVwiXTtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgaXNNb2JpbGUgZnJvbSBcInJjLXV0aWwvZXMvaXNNb2JpbGVcIjtcbmltcG9ydCBNYXNrIGZyb20gJy4vTWFzayc7XG5pbXBvcnQgUG9wdXBJbm5lciBmcm9tICcuL1BvcHVwSW5uZXInO1xuaW1wb3J0IE1vYmlsZVBvcHVwSW5uZXIgZnJvbSAnLi9Nb2JpbGVQb3B1cElubmVyJztcbnZhciBQb3B1cCA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChfcmVmLCByZWYpIHtcbiAgdmFyIHZpc2libGUgPSBfcmVmLnZpc2libGUsXG4gICAgICBtb2JpbGUgPSBfcmVmLm1vYmlsZSxcbiAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIF9leGNsdWRlZCk7XG5cbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKHZpc2libGUpLFxuICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgICBpbm5lclZpc2libGUgPSBfdXNlU3RhdGUyWzBdLFxuICAgICAgc2VySW5uZXJWaXNpYmxlID0gX3VzZVN0YXRlMlsxXTtcblxuICB2YXIgX3VzZVN0YXRlMyA9IHVzZVN0YXRlKGZhbHNlKSxcbiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSxcbiAgICAgIGluTW9iaWxlID0gX3VzZVN0YXRlNFswXSxcbiAgICAgIHNldEluTW9iaWxlID0gX3VzZVN0YXRlNFsxXTtcblxuICB2YXIgY2xvbmVQcm9wcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpLCB7fSwge1xuICAgIHZpc2libGU6IGlubmVyVmlzaWJsZVxuICB9KTsgLy8gV2UgY2hlY2sgbW9iaWxlIGluIHZpc2libGUgY2hhbmdlZCBoZXJlLlxuICAvLyBBbmQgdGhpcyBhbHNvIGRlbGF5IHNldCBgaW5uZXJWaXNpYmxlYCB0byBhdm9pZCBwb3B1cCBjb21wb25lbnQgcmVuZGVyIGZsYXNoXG5cblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHNlcklubmVyVmlzaWJsZSh2aXNpYmxlKTtcblxuICAgIGlmICh2aXNpYmxlICYmIG1vYmlsZSkge1xuICAgICAgc2V0SW5Nb2JpbGUoaXNNb2JpbGUoKSk7XG4gICAgfVxuICB9LCBbdmlzaWJsZSwgbW9iaWxlXSk7XG4gIHZhciBwb3B1cE5vZGUgPSBpbk1vYmlsZSA/IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE1vYmlsZVBvcHVwSW5uZXIsIF9leHRlbmRzKHt9LCBjbG9uZVByb3BzLCB7XG4gICAgbW9iaWxlOiBtb2JpbGUsXG4gICAgcmVmOiByZWZcbiAgfSkpIDogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUG9wdXBJbm5lciwgX2V4dGVuZHMoe30sIGNsb25lUHJvcHMsIHtcbiAgICByZWY6IHJlZlxuICB9KSk7IC8vIFdlIGNhbiB1c2UgZnJhZ21lbnQgZGlyZWN0bHkgYnV0IHRoaXMgbWF5IGZhaWxlZCBzb21lIHNlbGVjdG9yIHVzYWdlLiBLZWVwIGFzIG9yaWdpbiBsb2dpY1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChNYXNrLCBjbG9uZVByb3BzKSwgcG9wdXBOb2RlKTtcbn0pO1xuUG9wdXAuZGlzcGxheU5hbWUgPSAnUG9wdXAnO1xuZXhwb3J0IGRlZmF1bHQgUG9wdXA7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xudmFyIFRyaWdnZXJDb250ZXh0ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUNvbnRleHQobnVsbCk7XG5leHBvcnQgZGVmYXVsdCBUcmlnZ2VyQ29udGV4dDsiLCJpbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVja1wiO1xuaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3NcIjtcbmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3NlcnRUaGlzSW5pdGlhbGl6ZWRcIjtcbmltcG9ydCBfaW5oZXJpdHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzXCI7XG5pbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlclwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgcmFmIGZyb20gXCJyYy11dGlsL2VzL3JhZlwiO1xuaW1wb3J0IGNvbnRhaW5zIGZyb20gXCJyYy11dGlsL2VzL0RvbS9jb250YWluc1wiO1xuaW1wb3J0IGZpbmRET01Ob2RlIGZyb20gXCJyYy11dGlsL2VzL0RvbS9maW5kRE9NTm9kZVwiO1xuaW1wb3J0IHsgY29tcG9zZVJlZiwgc3VwcG9ydFJlZiB9IGZyb20gXCJyYy11dGlsL2VzL3JlZlwiO1xuaW1wb3J0IGFkZEV2ZW50TGlzdGVuZXIgZnJvbSBcInJjLXV0aWwvZXMvRG9tL2FkZEV2ZW50TGlzdGVuZXJcIjtcbmltcG9ydCBQb3J0YWwgZnJvbSBcInJjLXV0aWwvZXMvUG9ydGFsXCI7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7IGdldEFsaWduRnJvbVBsYWNlbWVudCwgZ2V0QWxpZ25Qb3B1cENsYXNzTmFtZSB9IGZyb20gJy4vdXRpbHMvYWxpZ25VdGlsJztcbmltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwJztcbmltcG9ydCBUcmlnZ2VyQ29udGV4dCBmcm9tICcuL2NvbnRleHQnO1xuXG5mdW5jdGlvbiBub29wKCkge31cblxuZnVuY3Rpb24gcmV0dXJuRW1wdHlTdHJpbmcoKSB7XG4gIHJldHVybiAnJztcbn1cblxuZnVuY3Rpb24gcmV0dXJuRG9jdW1lbnQoZWxlbWVudCkge1xuICBpZiAoZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50Lm93bmVyRG9jdW1lbnQ7XG4gIH1cblxuICByZXR1cm4gd2luZG93LmRvY3VtZW50O1xufVxuXG52YXIgQUxMX0hBTkRMRVJTID0gWydvbkNsaWNrJywgJ29uTW91c2VEb3duJywgJ29uVG91Y2hTdGFydCcsICdvbk1vdXNlRW50ZXInLCAnb25Nb3VzZUxlYXZlJywgJ29uRm9jdXMnLCAnb25CbHVyJywgJ29uQ29udGV4dE1lbnUnXTtcbi8qKlxuICogSW50ZXJuYWwgdXNhZ2UuIERvIG5vdCB1c2UgaW4geW91ciBjb2RlIHNpbmNlIHRoaXMgd2lsbCBiZSByZW1vdmVkLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVRyaWdnZXIoUG9ydGFsQ29tcG9uZW50KSB7XG4gIHZhciBUcmlnZ2VyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKFRyaWdnZXIsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gICAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihUcmlnZ2VyKTtcblxuICAgIGZ1bmN0aW9uIFRyaWdnZXIocHJvcHMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRyaWdnZXIpO1xuXG4gICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTtcbiAgICAgIF90aGlzLnBvcHVwUmVmID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZVJlZigpO1xuICAgICAgX3RoaXMudHJpZ2dlclJlZiA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVSZWYoKTtcbiAgICAgIF90aGlzLmF0dGFjaElkID0gdm9pZCAwO1xuICAgICAgX3RoaXMuY2xpY2tPdXRzaWRlSGFuZGxlciA9IHZvaWQgMDtcbiAgICAgIF90aGlzLnRvdWNoT3V0c2lkZUhhbmRsZXIgPSB2b2lkIDA7XG4gICAgICBfdGhpcy5jb250ZXh0TWVudU91dHNpZGVIYW5kbGVyMSA9IHZvaWQgMDtcbiAgICAgIF90aGlzLmNvbnRleHRNZW51T3V0c2lkZUhhbmRsZXIyID0gdm9pZCAwO1xuICAgICAgX3RoaXMubW91c2VEb3duVGltZW91dCA9IHZvaWQgMDtcbiAgICAgIF90aGlzLmZvY3VzVGltZSA9IHZvaWQgMDtcbiAgICAgIF90aGlzLnByZUNsaWNrVGltZSA9IHZvaWQgMDtcbiAgICAgIF90aGlzLnByZVRvdWNoVGltZSA9IHZvaWQgMDtcbiAgICAgIF90aGlzLmRlbGF5VGltZXIgPSB2b2lkIDA7XG4gICAgICBfdGhpcy5oYXNQb3B1cE1vdXNlRG93biA9IHZvaWQgMDtcblxuICAgICAgX3RoaXMub25Nb3VzZUVudGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIG1vdXNlRW50ZXJEZWxheSA9IF90aGlzLnByb3BzLm1vdXNlRW50ZXJEZWxheTtcblxuICAgICAgICBfdGhpcy5maXJlRXZlbnRzKCdvbk1vdXNlRW50ZXInLCBlKTtcblxuICAgICAgICBfdGhpcy5kZWxheVNldFBvcHVwVmlzaWJsZSh0cnVlLCBtb3VzZUVudGVyRGVsYXksIG1vdXNlRW50ZXJEZWxheSA/IG51bGwgOiBlKTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLm9uTW91c2VNb3ZlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgX3RoaXMuZmlyZUV2ZW50cygnb25Nb3VzZU1vdmUnLCBlKTtcblxuICAgICAgICBfdGhpcy5zZXRQb2ludChlKTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLm9uTW91c2VMZWF2ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIF90aGlzLmZpcmVFdmVudHMoJ29uTW91c2VMZWF2ZScsIGUpO1xuXG4gICAgICAgIF90aGlzLmRlbGF5U2V0UG9wdXBWaXNpYmxlKGZhbHNlLCBfdGhpcy5wcm9wcy5tb3VzZUxlYXZlRGVsYXkpO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMub25Qb3B1cE1vdXNlRW50ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLmNsZWFyRGVsYXlUaW1lcigpO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMub25Qb3B1cE1vdXNlTGVhdmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgX3RoaXMkcG9wdXBSZWYkY3VycmVuO1xuXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdC1jb21wb25lbnQvdHJpZ2dlci9wdWxsLzEzXG4gICAgICAgIC8vIHJlYWN0IGJ1Zz9cbiAgICAgICAgaWYgKGUucmVsYXRlZFRhcmdldCAmJiAhZS5yZWxhdGVkVGFyZ2V0LnNldFRpbWVvdXQgJiYgY29udGFpbnMoKF90aGlzJHBvcHVwUmVmJGN1cnJlbiA9IF90aGlzLnBvcHVwUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF90aGlzJHBvcHVwUmVmJGN1cnJlbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkcG9wdXBSZWYkY3VycmVuLmdldEVsZW1lbnQoKSwgZS5yZWxhdGVkVGFyZ2V0KSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzLmRlbGF5U2V0UG9wdXBWaXNpYmxlKGZhbHNlLCBfdGhpcy5wcm9wcy5tb3VzZUxlYXZlRGVsYXkpO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMub25Gb2N1cyA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIF90aGlzLmZpcmVFdmVudHMoJ29uRm9jdXMnLCBlKTsgLy8gaW5jYXNlIGZvY3VzaW4gYW5kIGZvY3Vzb3V0XG5cblxuICAgICAgICBfdGhpcy5jbGVhckRlbGF5VGltZXIoKTtcblxuICAgICAgICBpZiAoX3RoaXMuaXNGb2N1c1RvU2hvdygpKSB7XG4gICAgICAgICAgX3RoaXMuZm9jdXNUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgICAgICAgIF90aGlzLmRlbGF5U2V0UG9wdXBWaXNpYmxlKHRydWUsIF90aGlzLnByb3BzLmZvY3VzRGVsYXkpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5vbk1vdXNlRG93biA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIF90aGlzLmZpcmVFdmVudHMoJ29uTW91c2VEb3duJywgZSk7XG5cbiAgICAgICAgX3RoaXMucHJlQ2xpY2tUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLm9uVG91Y2hTdGFydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIF90aGlzLmZpcmVFdmVudHMoJ29uVG91Y2hTdGFydCcsIGUpO1xuXG4gICAgICAgIF90aGlzLnByZVRvdWNoVGltZSA9IERhdGUubm93KCk7XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5vbkJsdXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBfdGhpcy5maXJlRXZlbnRzKCdvbkJsdXInLCBlKTtcblxuICAgICAgICBfdGhpcy5jbGVhckRlbGF5VGltZXIoKTtcblxuICAgICAgICBpZiAoX3RoaXMuaXNCbHVyVG9IaWRlKCkpIHtcbiAgICAgICAgICBfdGhpcy5kZWxheVNldFBvcHVwVmlzaWJsZShmYWxzZSwgX3RoaXMucHJvcHMuYmx1ckRlbGF5KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgX3RoaXMub25Db250ZXh0TWVudSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBfdGhpcy5maXJlRXZlbnRzKCdvbkNvbnRleHRNZW51JywgZSk7XG5cbiAgICAgICAgX3RoaXMuc2V0UG9wdXBWaXNpYmxlKHRydWUsIGUpO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMub25Db250ZXh0TWVudUNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX3RoaXMuaXNDb250ZXh0TWVudVRvU2hvdygpKSB7XG4gICAgICAgICAgX3RoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgX3RoaXMub25DbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBfdGhpcy5maXJlRXZlbnRzKCdvbkNsaWNrJywgZXZlbnQpOyAvLyBmb2N1cyB3aWxsIHRyaWdnZXIgY2xpY2tcblxuXG4gICAgICAgIGlmIChfdGhpcy5mb2N1c1RpbWUpIHtcbiAgICAgICAgICB2YXIgcHJlVGltZTtcblxuICAgICAgICAgIGlmIChfdGhpcy5wcmVDbGlja1RpbWUgJiYgX3RoaXMucHJlVG91Y2hUaW1lKSB7XG4gICAgICAgICAgICBwcmVUaW1lID0gTWF0aC5taW4oX3RoaXMucHJlQ2xpY2tUaW1lLCBfdGhpcy5wcmVUb3VjaFRpbWUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXMucHJlQ2xpY2tUaW1lKSB7XG4gICAgICAgICAgICBwcmVUaW1lID0gX3RoaXMucHJlQ2xpY2tUaW1lO1xuICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXMucHJlVG91Y2hUaW1lKSB7XG4gICAgICAgICAgICBwcmVUaW1lID0gX3RoaXMucHJlVG91Y2hUaW1lO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChNYXRoLmFicyhwcmVUaW1lIC0gX3RoaXMuZm9jdXNUaW1lKSA8IDIwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3RoaXMuZm9jdXNUaW1lID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzLnByZUNsaWNrVGltZSA9IDA7XG4gICAgICAgIF90aGlzLnByZVRvdWNoVGltZSA9IDA7IC8vIE9ubHkgcHJldmVudCBkZWZhdWx0IHdoZW4gYWxsIHRoZSBhY3Rpb24gaXMgY2xpY2suXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbnQtZGVzaWduL2FudC1kZXNpZ24vaXNzdWVzLzE3MDQzXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbnQtZGVzaWduL2FudC1kZXNpZ24vaXNzdWVzLzE3MjkxXG5cbiAgICAgICAgaWYgKF90aGlzLmlzQ2xpY2tUb1Nob3coKSAmJiAoX3RoaXMuaXNDbGlja1RvSGlkZSgpIHx8IF90aGlzLmlzQmx1clRvSGlkZSgpKSAmJiBldmVudCAmJiBldmVudC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbmV4dFZpc2libGUgPSAhX3RoaXMuc3RhdGUucG9wdXBWaXNpYmxlO1xuXG4gICAgICAgIGlmIChfdGhpcy5pc0NsaWNrVG9IaWRlKCkgJiYgIW5leHRWaXNpYmxlIHx8IG5leHRWaXNpYmxlICYmIF90aGlzLmlzQ2xpY2tUb1Nob3coKSkge1xuICAgICAgICAgIF90aGlzLnNldFBvcHVwVmlzaWJsZSghX3RoaXMuc3RhdGUucG9wdXBWaXNpYmxlLCBldmVudCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIF90aGlzLm9uUG9wdXBNb3VzZURvd24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLmhhc1BvcHVwTW91c2VEb3duID0gdHJ1ZTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLm1vdXNlRG93blRpbWVvdXQpO1xuICAgICAgICBfdGhpcy5tb3VzZURvd25UaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzLmhhc1BvcHVwTW91c2VEb3duID0gZmFsc2U7XG4gICAgICAgIH0sIDApO1xuXG4gICAgICAgIGlmIChfdGhpcy5jb250ZXh0KSB7XG4gICAgICAgICAgdmFyIF90aGlzJGNvbnRleHQ7XG5cbiAgICAgICAgICAoX3RoaXMkY29udGV4dCA9IF90aGlzLmNvbnRleHQpLm9uUG9wdXBNb3VzZURvd24uYXBwbHkoX3RoaXMkY29udGV4dCwgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgX3RoaXMub25Eb2N1bWVudENsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmIChfdGhpcy5wcm9wcy5tYXNrICYmICFfdGhpcy5wcm9wcy5tYXNrQ2xvc2FibGUpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuXG4gICAgICAgIHZhciByb290ID0gX3RoaXMuZ2V0Um9vdERvbU5vZGUoKTtcblxuICAgICAgICB2YXIgcG9wdXBOb2RlID0gX3RoaXMuZ2V0UG9wdXBEb21Ob2RlKCk7XG5cbiAgICAgICAgaWYgKCAvLyBtb3VzZWRvd24gb24gdGhlIHRhcmdldCBzaG91bGQgYWxzbyBjbG9zZSBwb3B1cCB3aGVuIGFjdGlvbiBpcyBjb250ZXh0TWVudS5cbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FudC1kZXNpZ24vYW50LWRlc2lnbi9pc3N1ZXMvMjk4NTNcbiAgICAgICAgKCFjb250YWlucyhyb290LCB0YXJnZXQpIHx8IF90aGlzLmlzQ29udGV4dE1lbnVPbmx5KCkpICYmICFjb250YWlucyhwb3B1cE5vZGUsIHRhcmdldCkgJiYgIV90aGlzLmhhc1BvcHVwTW91c2VEb3duKSB7XG4gICAgICAgICAgX3RoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgX3RoaXMuZ2V0Um9vdERvbU5vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBnZXRUcmlnZ2VyRE9NTm9kZSA9IF90aGlzLnByb3BzLmdldFRyaWdnZXJET01Ob2RlO1xuXG4gICAgICAgIGlmIChnZXRUcmlnZ2VyRE9NTm9kZSkge1xuICAgICAgICAgIHJldHVybiBnZXRUcmlnZ2VyRE9NTm9kZShfdGhpcy50cmlnZ2VyUmVmLmN1cnJlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgZG9tTm9kZSA9IGZpbmRET01Ob2RlKF90aGlzLnRyaWdnZXJSZWYuY3VycmVudCk7XG5cbiAgICAgICAgICBpZiAoZG9tTm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIGRvbU5vZGU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHsvLyBEbyBub3RoaW5nXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUmVhY3RET00uZmluZERPTU5vZGUoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMuZ2V0UG9wdXBDbGFzc05hbWVGcm9tQWxpZ24gPSBmdW5jdGlvbiAoYWxpZ24pIHtcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IFtdO1xuICAgICAgICB2YXIgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICAgIHBvcHVwUGxhY2VtZW50ID0gX3RoaXMkcHJvcHMucG9wdXBQbGFjZW1lbnQsXG4gICAgICAgICAgICBidWlsdGluUGxhY2VtZW50cyA9IF90aGlzJHByb3BzLmJ1aWx0aW5QbGFjZW1lbnRzLFxuICAgICAgICAgICAgcHJlZml4Q2xzID0gX3RoaXMkcHJvcHMucHJlZml4Q2xzLFxuICAgICAgICAgICAgYWxpZ25Qb2ludCA9IF90aGlzJHByb3BzLmFsaWduUG9pbnQsXG4gICAgICAgICAgICBnZXRQb3B1cENsYXNzTmFtZUZyb21BbGlnbiA9IF90aGlzJHByb3BzLmdldFBvcHVwQ2xhc3NOYW1lRnJvbUFsaWduO1xuXG4gICAgICAgIGlmIChwb3B1cFBsYWNlbWVudCAmJiBidWlsdGluUGxhY2VtZW50cykge1xuICAgICAgICAgIGNsYXNzTmFtZS5wdXNoKGdldEFsaWduUG9wdXBDbGFzc05hbWUoYnVpbHRpblBsYWNlbWVudHMsIHByZWZpeENscywgYWxpZ24sIGFsaWduUG9pbnQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChnZXRQb3B1cENsYXNzTmFtZUZyb21BbGlnbikge1xuICAgICAgICAgIGNsYXNzTmFtZS5wdXNoKGdldFBvcHVwQ2xhc3NOYW1lRnJvbUFsaWduKGFsaWduKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2xhc3NOYW1lLmpvaW4oJyAnKTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzJHByb3BzMiA9IF90aGlzLnByb3BzLFxuICAgICAgICAgICAgcHJlZml4Q2xzID0gX3RoaXMkcHJvcHMyLnByZWZpeENscyxcbiAgICAgICAgICAgIGRlc3Ryb3lQb3B1cE9uSGlkZSA9IF90aGlzJHByb3BzMi5kZXN0cm95UG9wdXBPbkhpZGUsXG4gICAgICAgICAgICBwb3B1cENsYXNzTmFtZSA9IF90aGlzJHByb3BzMi5wb3B1cENsYXNzTmFtZSxcbiAgICAgICAgICAgIG9uUG9wdXBBbGlnbiA9IF90aGlzJHByb3BzMi5vblBvcHVwQWxpZ24sXG4gICAgICAgICAgICBwb3B1cE1vdGlvbiA9IF90aGlzJHByb3BzMi5wb3B1cE1vdGlvbixcbiAgICAgICAgICAgIHBvcHVwQW5pbWF0aW9uID0gX3RoaXMkcHJvcHMyLnBvcHVwQW5pbWF0aW9uLFxuICAgICAgICAgICAgcG9wdXBUcmFuc2l0aW9uTmFtZSA9IF90aGlzJHByb3BzMi5wb3B1cFRyYW5zaXRpb25OYW1lLFxuICAgICAgICAgICAgcG9wdXBTdHlsZSA9IF90aGlzJHByb3BzMi5wb3B1cFN0eWxlLFxuICAgICAgICAgICAgbWFzayA9IF90aGlzJHByb3BzMi5tYXNrLFxuICAgICAgICAgICAgbWFza0FuaW1hdGlvbiA9IF90aGlzJHByb3BzMi5tYXNrQW5pbWF0aW9uLFxuICAgICAgICAgICAgbWFza1RyYW5zaXRpb25OYW1lID0gX3RoaXMkcHJvcHMyLm1hc2tUcmFuc2l0aW9uTmFtZSxcbiAgICAgICAgICAgIG1hc2tNb3Rpb24gPSBfdGhpcyRwcm9wczIubWFza01vdGlvbixcbiAgICAgICAgICAgIHpJbmRleCA9IF90aGlzJHByb3BzMi56SW5kZXgsXG4gICAgICAgICAgICBwb3B1cCA9IF90aGlzJHByb3BzMi5wb3B1cCxcbiAgICAgICAgICAgIHN0cmV0Y2ggPSBfdGhpcyRwcm9wczIuc3RyZXRjaCxcbiAgICAgICAgICAgIGFsaWduUG9pbnQgPSBfdGhpcyRwcm9wczIuYWxpZ25Qb2ludCxcbiAgICAgICAgICAgIG1vYmlsZSA9IF90aGlzJHByb3BzMi5tb2JpbGUsXG4gICAgICAgICAgICBmb3JjZVJlbmRlciA9IF90aGlzJHByb3BzMi5mb3JjZVJlbmRlcjtcbiAgICAgICAgdmFyIF90aGlzJHN0YXRlID0gX3RoaXMuc3RhdGUsXG4gICAgICAgICAgICBwb3B1cFZpc2libGUgPSBfdGhpcyRzdGF0ZS5wb3B1cFZpc2libGUsXG4gICAgICAgICAgICBwb2ludCA9IF90aGlzJHN0YXRlLnBvaW50O1xuXG4gICAgICAgIHZhciBhbGlnbiA9IF90aGlzLmdldFBvcHVwQWxpZ24oKTtcblxuICAgICAgICB2YXIgbW91c2VQcm9wcyA9IHt9O1xuXG4gICAgICAgIGlmIChfdGhpcy5pc01vdXNlRW50ZXJUb1Nob3coKSkge1xuICAgICAgICAgIG1vdXNlUHJvcHMub25Nb3VzZUVudGVyID0gX3RoaXMub25Qb3B1cE1vdXNlRW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX3RoaXMuaXNNb3VzZUxlYXZlVG9IaWRlKCkpIHtcbiAgICAgICAgICBtb3VzZVByb3BzLm9uTW91c2VMZWF2ZSA9IF90aGlzLm9uUG9wdXBNb3VzZUxlYXZlO1xuICAgICAgICB9XG5cbiAgICAgICAgbW91c2VQcm9wcy5vbk1vdXNlRG93biA9IF90aGlzLm9uUG9wdXBNb3VzZURvd247XG4gICAgICAgIG1vdXNlUHJvcHMub25Ub3VjaFN0YXJ0ID0gX3RoaXMub25Qb3B1cE1vdXNlRG93bjtcbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFBvcHVwLCBfZXh0ZW5kcyh7XG4gICAgICAgICAgcHJlZml4Q2xzOiBwcmVmaXhDbHMsXG4gICAgICAgICAgZGVzdHJveVBvcHVwT25IaWRlOiBkZXN0cm95UG9wdXBPbkhpZGUsXG4gICAgICAgICAgdmlzaWJsZTogcG9wdXBWaXNpYmxlLFxuICAgICAgICAgIHBvaW50OiBhbGlnblBvaW50ICYmIHBvaW50LFxuICAgICAgICAgIGNsYXNzTmFtZTogcG9wdXBDbGFzc05hbWUsXG4gICAgICAgICAgYWxpZ246IGFsaWduLFxuICAgICAgICAgIG9uQWxpZ246IG9uUG9wdXBBbGlnbixcbiAgICAgICAgICBhbmltYXRpb246IHBvcHVwQW5pbWF0aW9uLFxuICAgICAgICAgIGdldENsYXNzTmFtZUZyb21BbGlnbjogX3RoaXMuZ2V0UG9wdXBDbGFzc05hbWVGcm9tQWxpZ25cbiAgICAgICAgfSwgbW91c2VQcm9wcywge1xuICAgICAgICAgIHN0cmV0Y2g6IHN0cmV0Y2gsXG4gICAgICAgICAgZ2V0Um9vdERvbU5vZGU6IF90aGlzLmdldFJvb3REb21Ob2RlLFxuICAgICAgICAgIHN0eWxlOiBwb3B1cFN0eWxlLFxuICAgICAgICAgIG1hc2s6IG1hc2ssXG4gICAgICAgICAgekluZGV4OiB6SW5kZXgsXG4gICAgICAgICAgdHJhbnNpdGlvbk5hbWU6IHBvcHVwVHJhbnNpdGlvbk5hbWUsXG4gICAgICAgICAgbWFza0FuaW1hdGlvbjogbWFza0FuaW1hdGlvbixcbiAgICAgICAgICBtYXNrVHJhbnNpdGlvbk5hbWU6IG1hc2tUcmFuc2l0aW9uTmFtZSxcbiAgICAgICAgICBtYXNrTW90aW9uOiBtYXNrTW90aW9uLFxuICAgICAgICAgIHJlZjogX3RoaXMucG9wdXBSZWYsXG4gICAgICAgICAgbW90aW9uOiBwb3B1cE1vdGlvbixcbiAgICAgICAgICBtb2JpbGU6IG1vYmlsZSxcbiAgICAgICAgICBmb3JjZVJlbmRlcjogZm9yY2VSZW5kZXJcbiAgICAgICAgfSksIHR5cGVvZiBwb3B1cCA9PT0gJ2Z1bmN0aW9uJyA/IHBvcHVwKCkgOiBwb3B1cCk7XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5hdHRhY2hQYXJlbnQgPSBmdW5jdGlvbiAocG9wdXBDb250YWluZXIpIHtcbiAgICAgICAgcmFmLmNhbmNlbChfdGhpcy5hdHRhY2hJZCk7XG4gICAgICAgIHZhciBfdGhpcyRwcm9wczMgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICAgIGdldFBvcHVwQ29udGFpbmVyID0gX3RoaXMkcHJvcHMzLmdldFBvcHVwQ29udGFpbmVyLFxuICAgICAgICAgICAgZ2V0RG9jdW1lbnQgPSBfdGhpcyRwcm9wczMuZ2V0RG9jdW1lbnQ7XG5cbiAgICAgICAgdmFyIGRvbU5vZGUgPSBfdGhpcy5nZXRSb290RG9tTm9kZSgpO1xuXG4gICAgICAgIHZhciBtb3VudE5vZGU7XG5cbiAgICAgICAgaWYgKCFnZXRQb3B1cENvbnRhaW5lcikge1xuICAgICAgICAgIG1vdW50Tm9kZSA9IGdldERvY3VtZW50KF90aGlzLmdldFJvb3REb21Ob2RlKCkpLmJvZHk7XG4gICAgICAgIH0gZWxzZSBpZiAoZG9tTm9kZSB8fCBnZXRQb3B1cENvbnRhaW5lci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAvLyBDb21wYXRpYmxlIGZvciBsZWdhY3kgZ2V0UG9wdXBDb250YWluZXIgd2l0aCBkb21Ob2RlIGFyZ3VtZW50LlxuICAgICAgICAgIC8vIElmIG5vIG5lZWQgYGRvbU5vZGVgIGFyZ3VtZW50LCB3aWxsIGNhbGwgZGlyZWN0bHkuXG4gICAgICAgICAgLy8gaHR0cHM6Ly9jb2Rlc2FuZGJveC5pby9zL2Vsb3F1ZW50LW1jbGVhbi1zczkzbT9maWxlPS9zcmMvQXBwLmpzXG4gICAgICAgICAgbW91bnROb2RlID0gZ2V0UG9wdXBDb250YWluZXIoZG9tTm9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobW91bnROb2RlKSB7XG4gICAgICAgICAgbW91bnROb2RlLmFwcGVuZENoaWxkKHBvcHVwQ29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSZXRyeSBhZnRlciBmcmFtZSByZW5kZXIgaW4gY2FzZSBwYXJlbnQgbm90IHJlYWR5XG4gICAgICAgICAgX3RoaXMuYXR0YWNoSWQgPSByYWYoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuYXR0YWNoUGFyZW50KHBvcHVwQ29udGFpbmVyKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgX3RoaXMuZ2V0Q29udGFpbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZ2V0RG9jdW1lbnQgPSBfdGhpcy5wcm9wcy5nZXREb2N1bWVudDtcbiAgICAgICAgdmFyIHBvcHVwQ29udGFpbmVyID0gZ2V0RG9jdW1lbnQoX3RoaXMuZ2V0Um9vdERvbU5vZGUoKSkuY3JlYXRlRWxlbWVudCgnZGl2Jyk7IC8vIE1ha2Ugc3VyZSBkZWZhdWx0IHBvcHVwIGNvbnRhaW5lciB3aWxsIG5ldmVyIGNhdXNlIHNjcm9sbGJhciBhcHBlYXJpbmdcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0LWNvbXBvbmVudC90cmlnZ2VyL2lzc3Vlcy80MVxuXG4gICAgICAgIHBvcHVwQ29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgcG9wdXBDb250YWluZXIuc3R5bGUudG9wID0gJzAnO1xuICAgICAgICBwb3B1cENvbnRhaW5lci5zdHlsZS5sZWZ0ID0gJzAnO1xuICAgICAgICBwb3B1cENvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcxMDAlJztcblxuICAgICAgICBfdGhpcy5hdHRhY2hQYXJlbnQocG9wdXBDb250YWluZXIpO1xuXG4gICAgICAgIHJldHVybiBwb3B1cENvbnRhaW5lcjtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLnNldFBvaW50ID0gZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICAgIHZhciBhbGlnblBvaW50ID0gX3RoaXMucHJvcHMuYWxpZ25Qb2ludDtcbiAgICAgICAgaWYgKCFhbGlnblBvaW50IHx8ICFwb2ludCkgcmV0dXJuO1xuXG4gICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBwb2ludDoge1xuICAgICAgICAgICAgcGFnZVg6IHBvaW50LnBhZ2VYLFxuICAgICAgICAgICAgcGFnZVk6IHBvaW50LnBhZ2VZXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLmhhbmRsZVBvcnRhbFVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF90aGlzLnN0YXRlLnByZXZQb3B1cFZpc2libGUgIT09IF90aGlzLnN0YXRlLnBvcHVwVmlzaWJsZSkge1xuICAgICAgICAgIF90aGlzLnByb3BzLmFmdGVyUG9wdXBWaXNpYmxlQ2hhbmdlKF90aGlzLnN0YXRlLnBvcHVwVmlzaWJsZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIF90aGlzLnRyaWdnZXJDb250ZXh0VmFsdWUgPSB7XG4gICAgICAgIG9uUG9wdXBNb3VzZURvd246IF90aGlzLm9uUG9wdXBNb3VzZURvd25cbiAgICAgIH07XG5cbiAgICAgIHZhciBfcG9wdXBWaXNpYmxlO1xuXG4gICAgICBpZiAoJ3BvcHVwVmlzaWJsZScgaW4gcHJvcHMpIHtcbiAgICAgICAgX3BvcHVwVmlzaWJsZSA9ICEhcHJvcHMucG9wdXBWaXNpYmxlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3BvcHVwVmlzaWJsZSA9ICEhcHJvcHMuZGVmYXVsdFBvcHVwVmlzaWJsZTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgIHByZXZQb3B1cFZpc2libGU6IF9wb3B1cFZpc2libGUsXG4gICAgICAgIHBvcHVwVmlzaWJsZTogX3BvcHVwVmlzaWJsZVxuICAgICAgfTtcbiAgICAgIEFMTF9IQU5ETEVSUy5mb3JFYWNoKGZ1bmN0aW9uIChoKSB7XG4gICAgICAgIF90aGlzW1wiZmlyZVwiLmNvbmNhdChoKV0gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIF90aGlzLmZpcmVFdmVudHMoaCwgZSk7XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoVHJpZ2dlciwgW3tcbiAgICAgIGtleTogXCJjb21wb25lbnREaWRNb3VudFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB0aGlzLmNvbXBvbmVudERpZFVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJjb21wb25lbnREaWRVcGRhdGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGU7IC8vIFdlIG11c3QgbGlzdGVuIHRvIGBtb3VzZWRvd25gIG9yIGB0b3VjaHN0YXJ0YCwgZWRnZSBjYXNlOlxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW50LWRlc2lnbi9hbnQtZGVzaWduL2lzc3Vlcy81ODA0XG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdC1jb21wb25lbnQvY2FsZW5kYXIvaXNzdWVzLzI1MFxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmVhY3QtY29tcG9uZW50L3RyaWdnZXIvaXNzdWVzLzUwXG5cbiAgICAgICAgaWYgKHN0YXRlLnBvcHVwVmlzaWJsZSkge1xuICAgICAgICAgIHZhciBjdXJyZW50RG9jdW1lbnQ7XG5cbiAgICAgICAgICBpZiAoIXRoaXMuY2xpY2tPdXRzaWRlSGFuZGxlciAmJiAodGhpcy5pc0NsaWNrVG9IaWRlKCkgfHwgdGhpcy5pc0NvbnRleHRNZW51VG9TaG93KCkpKSB7XG4gICAgICAgICAgICBjdXJyZW50RG9jdW1lbnQgPSBwcm9wcy5nZXREb2N1bWVudCh0aGlzLmdldFJvb3REb21Ob2RlKCkpO1xuICAgICAgICAgICAgdGhpcy5jbGlja091dHNpZGVIYW5kbGVyID0gYWRkRXZlbnRMaXN0ZW5lcihjdXJyZW50RG9jdW1lbnQsICdtb3VzZWRvd24nLCB0aGlzLm9uRG9jdW1lbnRDbGljayk7XG4gICAgICAgICAgfSAvLyBhbHdheXMgaGlkZSBvbiBtb2JpbGVcblxuXG4gICAgICAgICAgaWYgKCF0aGlzLnRvdWNoT3V0c2lkZUhhbmRsZXIpIHtcbiAgICAgICAgICAgIGN1cnJlbnREb2N1bWVudCA9IGN1cnJlbnREb2N1bWVudCB8fCBwcm9wcy5nZXREb2N1bWVudCh0aGlzLmdldFJvb3REb21Ob2RlKCkpO1xuICAgICAgICAgICAgdGhpcy50b3VjaE91dHNpZGVIYW5kbGVyID0gYWRkRXZlbnRMaXN0ZW5lcihjdXJyZW50RG9jdW1lbnQsICd0b3VjaHN0YXJ0JywgdGhpcy5vbkRvY3VtZW50Q2xpY2spO1xuICAgICAgICAgIH0gLy8gY2xvc2UgcG9wdXAgd2hlbiB0cmlnZ2VyIHR5cGUgY29udGFpbnMgJ29uQ29udGV4dE1lbnUnIGFuZCBkb2N1bWVudCBpcyBzY3JvbGxpbmcuXG5cblxuICAgICAgICAgIGlmICghdGhpcy5jb250ZXh0TWVudU91dHNpZGVIYW5kbGVyMSAmJiB0aGlzLmlzQ29udGV4dE1lbnVUb1Nob3coKSkge1xuICAgICAgICAgICAgY3VycmVudERvY3VtZW50ID0gY3VycmVudERvY3VtZW50IHx8IHByb3BzLmdldERvY3VtZW50KHRoaXMuZ2V0Um9vdERvbU5vZGUoKSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51T3V0c2lkZUhhbmRsZXIxID0gYWRkRXZlbnRMaXN0ZW5lcihjdXJyZW50RG9jdW1lbnQsICdzY3JvbGwnLCB0aGlzLm9uQ29udGV4dE1lbnVDbG9zZSk7XG4gICAgICAgICAgfSAvLyBjbG9zZSBwb3B1cCB3aGVuIHRyaWdnZXIgdHlwZSBjb250YWlucyAnb25Db250ZXh0TWVudScgYW5kIHdpbmRvdyBpcyBibHVyLlxuXG5cbiAgICAgICAgICBpZiAoIXRoaXMuY29udGV4dE1lbnVPdXRzaWRlSGFuZGxlcjIgJiYgdGhpcy5pc0NvbnRleHRNZW51VG9TaG93KCkpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dE1lbnVPdXRzaWRlSGFuZGxlcjIgPSBhZGRFdmVudExpc3RlbmVyKHdpbmRvdywgJ2JsdXInLCB0aGlzLm9uQ29udGV4dE1lbnVDbG9zZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jbGVhck91dHNpZGVIYW5kbGVyKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHRoaXMuY2xlYXJEZWxheVRpbWVyKCk7XG4gICAgICAgIHRoaXMuY2xlYXJPdXRzaWRlSGFuZGxlcigpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5tb3VzZURvd25UaW1lb3V0KTtcbiAgICAgICAgcmFmLmNhbmNlbCh0aGlzLmF0dGFjaElkKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0UG9wdXBEb21Ob2RlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UG9wdXBEb21Ob2RlKCkge1xuICAgICAgICB2YXIgX3RoaXMkcG9wdXBSZWYkY3VycmVuMjtcblxuICAgICAgICAvLyBmb3IgdGVzdFxuICAgICAgICByZXR1cm4gKChfdGhpcyRwb3B1cFJlZiRjdXJyZW4yID0gdGhpcy5wb3B1cFJlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCBfdGhpcyRwb3B1cFJlZiRjdXJyZW4yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRwb3B1cFJlZiRjdXJyZW4yLmdldEVsZW1lbnQoKSkgfHwgbnVsbDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0UG9wdXBBbGlnblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBvcHVwQWxpZ24oKSB7XG4gICAgICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgICAgIHZhciBwb3B1cFBsYWNlbWVudCA9IHByb3BzLnBvcHVwUGxhY2VtZW50LFxuICAgICAgICAgICAgcG9wdXBBbGlnbiA9IHByb3BzLnBvcHVwQWxpZ24sXG4gICAgICAgICAgICBidWlsdGluUGxhY2VtZW50cyA9IHByb3BzLmJ1aWx0aW5QbGFjZW1lbnRzO1xuXG4gICAgICAgIGlmIChwb3B1cFBsYWNlbWVudCAmJiBidWlsdGluUGxhY2VtZW50cykge1xuICAgICAgICAgIHJldHVybiBnZXRBbGlnbkZyb21QbGFjZW1lbnQoYnVpbHRpblBsYWNlbWVudHMsIHBvcHVwUGxhY2VtZW50LCBwb3B1cEFsaWduKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwb3B1cEFsaWduO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzZXRQb3B1cFZpc2libGVcIixcbiAgICAgIHZhbHVlOlxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0gcG9wdXBWaXNpYmxlICAgIFNob3cgb3Igbm90IHRoZSBwb3B1cCBlbGVtZW50XG4gICAgICAgKiBAcGFyYW0gZXZlbnQgICAgICAgICAgIFN5bnRoZXRpY0V2ZW50LCB1c2VkIGZvciBgcG9pbnRBbGlnbmBcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gc2V0UG9wdXBWaXNpYmxlKHBvcHVwVmlzaWJsZSwgZXZlbnQpIHtcbiAgICAgICAgdmFyIGFsaWduUG9pbnQgPSB0aGlzLnByb3BzLmFsaWduUG9pbnQ7XG4gICAgICAgIHZhciBwcmV2UG9wdXBWaXNpYmxlID0gdGhpcy5zdGF0ZS5wb3B1cFZpc2libGU7XG4gICAgICAgIHRoaXMuY2xlYXJEZWxheVRpbWVyKCk7XG5cbiAgICAgICAgaWYgKHByZXZQb3B1cFZpc2libGUgIT09IHBvcHVwVmlzaWJsZSkge1xuICAgICAgICAgIGlmICghKCdwb3B1cFZpc2libGUnIGluIHRoaXMucHJvcHMpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgcG9wdXBWaXNpYmxlOiBwb3B1cFZpc2libGUsXG4gICAgICAgICAgICAgIHByZXZQb3B1cFZpc2libGU6IHByZXZQb3B1cFZpc2libGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMucHJvcHMub25Qb3B1cFZpc2libGVDaGFuZ2UocG9wdXBWaXNpYmxlKTtcbiAgICAgICAgfSAvLyBBbHdheXMgcmVjb3JkIHRoZSBwb2ludCBwb3NpdGlvbiBzaW5jZSBtb3VzZUVudGVyRGVsYXkgd2lsbCBkZWxheSB0aGUgc2hvd1xuXG5cbiAgICAgICAgaWYgKGFsaWduUG9pbnQgJiYgZXZlbnQgJiYgcG9wdXBWaXNpYmxlKSB7XG4gICAgICAgICAgdGhpcy5zZXRQb2ludChldmVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVsYXlTZXRQb3B1cFZpc2libGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxheVNldFBvcHVwVmlzaWJsZSh2aXNpYmxlLCBkZWxheVMsIGV2ZW50KSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIHZhciBkZWxheSA9IGRlbGF5UyAqIDEwMDA7XG4gICAgICAgIHRoaXMuY2xlYXJEZWxheVRpbWVyKCk7XG5cbiAgICAgICAgaWYgKGRlbGF5KSB7XG4gICAgICAgICAgdmFyIHBvaW50ID0gZXZlbnQgPyB7XG4gICAgICAgICAgICBwYWdlWDogZXZlbnQucGFnZVgsXG4gICAgICAgICAgICBwYWdlWTogZXZlbnQucGFnZVlcbiAgICAgICAgICB9IDogbnVsbDtcbiAgICAgICAgICB0aGlzLmRlbGF5VGltZXIgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpczIuc2V0UG9wdXBWaXNpYmxlKHZpc2libGUsIHBvaW50KTtcblxuICAgICAgICAgICAgX3RoaXMyLmNsZWFyRGVsYXlUaW1lcigpO1xuICAgICAgICAgIH0sIGRlbGF5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNldFBvcHVwVmlzaWJsZSh2aXNpYmxlLCBldmVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY2xlYXJEZWxheVRpbWVyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJEZWxheVRpbWVyKCkge1xuICAgICAgICBpZiAodGhpcy5kZWxheVRpbWVyKSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVsYXlUaW1lcik7XG4gICAgICAgICAgdGhpcy5kZWxheVRpbWVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJjbGVhck91dHNpZGVIYW5kbGVyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJPdXRzaWRlSGFuZGxlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xpY2tPdXRzaWRlSGFuZGxlcikge1xuICAgICAgICAgIHRoaXMuY2xpY2tPdXRzaWRlSGFuZGxlci5yZW1vdmUoKTtcbiAgICAgICAgICB0aGlzLmNsaWNrT3V0c2lkZUhhbmRsZXIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY29udGV4dE1lbnVPdXRzaWRlSGFuZGxlcjEpIHtcbiAgICAgICAgICB0aGlzLmNvbnRleHRNZW51T3V0c2lkZUhhbmRsZXIxLnJlbW92ZSgpO1xuICAgICAgICAgIHRoaXMuY29udGV4dE1lbnVPdXRzaWRlSGFuZGxlcjEgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY29udGV4dE1lbnVPdXRzaWRlSGFuZGxlcjIpIHtcbiAgICAgICAgICB0aGlzLmNvbnRleHRNZW51T3V0c2lkZUhhbmRsZXIyLnJlbW92ZSgpO1xuICAgICAgICAgIHRoaXMuY29udGV4dE1lbnVPdXRzaWRlSGFuZGxlcjIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMudG91Y2hPdXRzaWRlSGFuZGxlcikge1xuICAgICAgICAgIHRoaXMudG91Y2hPdXRzaWRlSGFuZGxlci5yZW1vdmUoKTtcbiAgICAgICAgICB0aGlzLnRvdWNoT3V0c2lkZUhhbmRsZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImNyZWF0ZVR3b0NoYWluc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVR3b0NoYWlucyhldmVudCkge1xuICAgICAgICB2YXIgY2hpbGRQcm9zID0gdGhpcy5wcm9wcy5jaGlsZHJlbi5wcm9wcztcbiAgICAgICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcblxuICAgICAgICBpZiAoY2hpbGRQcm9zW2V2ZW50XSAmJiBwcm9wc1tldmVudF0pIHtcbiAgICAgICAgICByZXR1cm4gdGhpc1tcImZpcmVcIi5jb25jYXQoZXZlbnQpXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjaGlsZFByb3NbZXZlbnRdIHx8IHByb3BzW2V2ZW50XTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiaXNDbGlja1RvU2hvd1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ2xpY2tUb1Nob3coKSB7XG4gICAgICAgIHZhciBfdGhpcyRwcm9wczQgPSB0aGlzLnByb3BzLFxuICAgICAgICAgICAgYWN0aW9uID0gX3RoaXMkcHJvcHM0LmFjdGlvbixcbiAgICAgICAgICAgIHNob3dBY3Rpb24gPSBfdGhpcyRwcm9wczQuc2hvd0FjdGlvbjtcbiAgICAgICAgcmV0dXJuIGFjdGlvbi5pbmRleE9mKCdjbGljaycpICE9PSAtMSB8fCBzaG93QWN0aW9uLmluZGV4T2YoJ2NsaWNrJykgIT09IC0xO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJpc0NvbnRleHRNZW51T25seVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ29udGV4dE1lbnVPbmx5KCkge1xuICAgICAgICB2YXIgYWN0aW9uID0gdGhpcy5wcm9wcy5hY3Rpb247XG4gICAgICAgIHJldHVybiBhY3Rpb24gPT09ICdjb250ZXh0TWVudScgfHwgYWN0aW9uLmxlbmd0aCA9PT0gMSAmJiBhY3Rpb25bMF0gPT09ICdjb250ZXh0TWVudSc7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImlzQ29udGV4dE1lbnVUb1Nob3dcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0NvbnRleHRNZW51VG9TaG93KCkge1xuICAgICAgICB2YXIgX3RoaXMkcHJvcHM1ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICAgIGFjdGlvbiA9IF90aGlzJHByb3BzNS5hY3Rpb24sXG4gICAgICAgICAgICBzaG93QWN0aW9uID0gX3RoaXMkcHJvcHM1LnNob3dBY3Rpb247XG4gICAgICAgIHJldHVybiBhY3Rpb24uaW5kZXhPZignY29udGV4dE1lbnUnKSAhPT0gLTEgfHwgc2hvd0FjdGlvbi5pbmRleE9mKCdjb250ZXh0TWVudScpICE9PSAtMTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiaXNDbGlja1RvSGlkZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ2xpY2tUb0hpZGUoKSB7XG4gICAgICAgIHZhciBfdGhpcyRwcm9wczYgPSB0aGlzLnByb3BzLFxuICAgICAgICAgICAgYWN0aW9uID0gX3RoaXMkcHJvcHM2LmFjdGlvbixcbiAgICAgICAgICAgIGhpZGVBY3Rpb24gPSBfdGhpcyRwcm9wczYuaGlkZUFjdGlvbjtcbiAgICAgICAgcmV0dXJuIGFjdGlvbi5pbmRleE9mKCdjbGljaycpICE9PSAtMSB8fCBoaWRlQWN0aW9uLmluZGV4T2YoJ2NsaWNrJykgIT09IC0xO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJpc01vdXNlRW50ZXJUb1Nob3dcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc01vdXNlRW50ZXJUb1Nob3coKSB7XG4gICAgICAgIHZhciBfdGhpcyRwcm9wczcgPSB0aGlzLnByb3BzLFxuICAgICAgICAgICAgYWN0aW9uID0gX3RoaXMkcHJvcHM3LmFjdGlvbixcbiAgICAgICAgICAgIHNob3dBY3Rpb24gPSBfdGhpcyRwcm9wczcuc2hvd0FjdGlvbjtcbiAgICAgICAgcmV0dXJuIGFjdGlvbi5pbmRleE9mKCdob3ZlcicpICE9PSAtMSB8fCBzaG93QWN0aW9uLmluZGV4T2YoJ21vdXNlRW50ZXInKSAhPT0gLTE7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImlzTW91c2VMZWF2ZVRvSGlkZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzTW91c2VMZWF2ZVRvSGlkZSgpIHtcbiAgICAgICAgdmFyIF90aGlzJHByb3BzOCA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgICBhY3Rpb24gPSBfdGhpcyRwcm9wczguYWN0aW9uLFxuICAgICAgICAgICAgaGlkZUFjdGlvbiA9IF90aGlzJHByb3BzOC5oaWRlQWN0aW9uO1xuICAgICAgICByZXR1cm4gYWN0aW9uLmluZGV4T2YoJ2hvdmVyJykgIT09IC0xIHx8IGhpZGVBY3Rpb24uaW5kZXhPZignbW91c2VMZWF2ZScpICE9PSAtMTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiaXNGb2N1c1RvU2hvd1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzRm9jdXNUb1Nob3coKSB7XG4gICAgICAgIHZhciBfdGhpcyRwcm9wczkgPSB0aGlzLnByb3BzLFxuICAgICAgICAgICAgYWN0aW9uID0gX3RoaXMkcHJvcHM5LmFjdGlvbixcbiAgICAgICAgICAgIHNob3dBY3Rpb24gPSBfdGhpcyRwcm9wczkuc2hvd0FjdGlvbjtcbiAgICAgICAgcmV0dXJuIGFjdGlvbi5pbmRleE9mKCdmb2N1cycpICE9PSAtMSB8fCBzaG93QWN0aW9uLmluZGV4T2YoJ2ZvY3VzJykgIT09IC0xO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJpc0JsdXJUb0hpZGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0JsdXJUb0hpZGUoKSB7XG4gICAgICAgIHZhciBfdGhpcyRwcm9wczEwID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICAgIGFjdGlvbiA9IF90aGlzJHByb3BzMTAuYWN0aW9uLFxuICAgICAgICAgICAgaGlkZUFjdGlvbiA9IF90aGlzJHByb3BzMTAuaGlkZUFjdGlvbjtcbiAgICAgICAgcmV0dXJuIGFjdGlvbi5pbmRleE9mKCdmb2N1cycpICE9PSAtMSB8fCBoaWRlQWN0aW9uLmluZGV4T2YoJ2JsdXInKSAhPT0gLTE7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImZvcmNlUG9wdXBBbGlnblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZvcmNlUG9wdXBBbGlnbigpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucG9wdXBWaXNpYmxlKSB7XG4gICAgICAgICAgdmFyIF90aGlzJHBvcHVwUmVmJGN1cnJlbjM7XG5cbiAgICAgICAgICAoX3RoaXMkcG9wdXBSZWYkY3VycmVuMyA9IHRoaXMucG9wdXBSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX3RoaXMkcG9wdXBSZWYkY3VycmVuMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkcG9wdXBSZWYkY3VycmVuMy5mb3JjZUFsaWduKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZmlyZUV2ZW50c1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpcmVFdmVudHModHlwZSwgZSkge1xuICAgICAgICB2YXIgY2hpbGRDYWxsYmFjayA9IHRoaXMucHJvcHMuY2hpbGRyZW4ucHJvcHNbdHlwZV07XG5cbiAgICAgICAgaWYgKGNoaWxkQ2FsbGJhY2spIHtcbiAgICAgICAgICBjaGlsZENhbGxiYWNrKGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5wcm9wc1t0eXBlXTtcblxuICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICBjYWxsYmFjayhlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJjbG9zZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnNldFBvcHVwVmlzaWJsZShmYWxzZSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInJlbmRlclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgdmFyIHBvcHVwVmlzaWJsZSA9IHRoaXMuc3RhdGUucG9wdXBWaXNpYmxlO1xuICAgICAgICB2YXIgX3RoaXMkcHJvcHMxMSA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgICBjaGlsZHJlbiA9IF90aGlzJHByb3BzMTEuY2hpbGRyZW4sXG4gICAgICAgICAgICBmb3JjZVJlbmRlciA9IF90aGlzJHByb3BzMTEuZm9yY2VSZW5kZXIsXG4gICAgICAgICAgICBhbGlnblBvaW50ID0gX3RoaXMkcHJvcHMxMS5hbGlnblBvaW50LFxuICAgICAgICAgICAgY2xhc3NOYW1lID0gX3RoaXMkcHJvcHMxMS5jbGFzc05hbWUsXG4gICAgICAgICAgICBhdXRvRGVzdHJveSA9IF90aGlzJHByb3BzMTEuYXV0b0Rlc3Ryb3k7XG4gICAgICAgIHZhciBjaGlsZCA9IFJlYWN0LkNoaWxkcmVuLm9ubHkoY2hpbGRyZW4pO1xuICAgICAgICB2YXIgbmV3Q2hpbGRQcm9wcyA9IHtcbiAgICAgICAgICBrZXk6ICd0cmlnZ2VyJ1xuICAgICAgICB9OyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gVmlzaWJsZSBIYW5kbGVycyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLy8gPj4+IENvbnRleHRNZW51XG5cbiAgICAgICAgaWYgKHRoaXMuaXNDb250ZXh0TWVudVRvU2hvdygpKSB7XG4gICAgICAgICAgbmV3Q2hpbGRQcm9wcy5vbkNvbnRleHRNZW51ID0gdGhpcy5vbkNvbnRleHRNZW51O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld0NoaWxkUHJvcHMub25Db250ZXh0TWVudSA9IHRoaXMuY3JlYXRlVHdvQ2hhaW5zKCdvbkNvbnRleHRNZW51Jyk7XG4gICAgICAgIH0gLy8gPj4+IENsaWNrXG5cblxuICAgICAgICBpZiAodGhpcy5pc0NsaWNrVG9IaWRlKCkgfHwgdGhpcy5pc0NsaWNrVG9TaG93KCkpIHtcbiAgICAgICAgICBuZXdDaGlsZFByb3BzLm9uQ2xpY2sgPSB0aGlzLm9uQ2xpY2s7XG4gICAgICAgICAgbmV3Q2hpbGRQcm9wcy5vbk1vdXNlRG93biA9IHRoaXMub25Nb3VzZURvd247XG4gICAgICAgICAgbmV3Q2hpbGRQcm9wcy5vblRvdWNoU3RhcnQgPSB0aGlzLm9uVG91Y2hTdGFydDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdDaGlsZFByb3BzLm9uQ2xpY2sgPSB0aGlzLmNyZWF0ZVR3b0NoYWlucygnb25DbGljaycpO1xuICAgICAgICAgIG5ld0NoaWxkUHJvcHMub25Nb3VzZURvd24gPSB0aGlzLmNyZWF0ZVR3b0NoYWlucygnb25Nb3VzZURvd24nKTtcbiAgICAgICAgICBuZXdDaGlsZFByb3BzLm9uVG91Y2hTdGFydCA9IHRoaXMuY3JlYXRlVHdvQ2hhaW5zKCdvblRvdWNoU3RhcnQnKTtcbiAgICAgICAgfSAvLyA+Pj4gSG92ZXIoZW50ZXIpXG5cblxuICAgICAgICBpZiAodGhpcy5pc01vdXNlRW50ZXJUb1Nob3coKSkge1xuICAgICAgICAgIG5ld0NoaWxkUHJvcHMub25Nb3VzZUVudGVyID0gdGhpcy5vbk1vdXNlRW50ZXI7IC8vIFBvaW50IGFsaWduXG5cbiAgICAgICAgICBpZiAoYWxpZ25Qb2ludCkge1xuICAgICAgICAgICAgbmV3Q2hpbGRQcm9wcy5vbk1vdXNlTW92ZSA9IHRoaXMub25Nb3VzZU1vdmU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld0NoaWxkUHJvcHMub25Nb3VzZUVudGVyID0gdGhpcy5jcmVhdGVUd29DaGFpbnMoJ29uTW91c2VFbnRlcicpO1xuICAgICAgICB9IC8vID4+PiBIb3ZlcihsZWF2ZSlcblxuXG4gICAgICAgIGlmICh0aGlzLmlzTW91c2VMZWF2ZVRvSGlkZSgpKSB7XG4gICAgICAgICAgbmV3Q2hpbGRQcm9wcy5vbk1vdXNlTGVhdmUgPSB0aGlzLm9uTW91c2VMZWF2ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdDaGlsZFByb3BzLm9uTW91c2VMZWF2ZSA9IHRoaXMuY3JlYXRlVHdvQ2hhaW5zKCdvbk1vdXNlTGVhdmUnKTtcbiAgICAgICAgfSAvLyA+Pj4gRm9jdXNcblxuXG4gICAgICAgIGlmICh0aGlzLmlzRm9jdXNUb1Nob3coKSB8fCB0aGlzLmlzQmx1clRvSGlkZSgpKSB7XG4gICAgICAgICAgbmV3Q2hpbGRQcm9wcy5vbkZvY3VzID0gdGhpcy5vbkZvY3VzO1xuICAgICAgICAgIG5ld0NoaWxkUHJvcHMub25CbHVyID0gdGhpcy5vbkJsdXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3Q2hpbGRQcm9wcy5vbkZvY3VzID0gdGhpcy5jcmVhdGVUd29DaGFpbnMoJ29uRm9jdXMnKTtcbiAgICAgICAgICBuZXdDaGlsZFByb3BzLm9uQmx1ciA9IHRoaXMuY3JlYXRlVHdvQ2hhaW5zKCdvbkJsdXInKTtcbiAgICAgICAgfSAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBSZW5kZXIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gICAgICAgIHZhciBjaGlsZHJlbkNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoY2hpbGQgJiYgY2hpbGQucHJvcHMgJiYgY2hpbGQucHJvcHMuY2xhc3NOYW1lLCBjbGFzc05hbWUpO1xuXG4gICAgICAgIGlmIChjaGlsZHJlbkNsYXNzTmFtZSkge1xuICAgICAgICAgIG5ld0NoaWxkUHJvcHMuY2xhc3NOYW1lID0gY2hpbGRyZW5DbGFzc05hbWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY2xvbmVQcm9wcyA9IF9vYmplY3RTcHJlYWQoe30sIG5ld0NoaWxkUHJvcHMpO1xuXG4gICAgICAgIGlmIChzdXBwb3J0UmVmKGNoaWxkKSkge1xuICAgICAgICAgIGNsb25lUHJvcHMucmVmID0gY29tcG9zZVJlZih0aGlzLnRyaWdnZXJSZWYsIGNoaWxkLnJlZik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdHJpZ2dlciA9IC8qI19fUFVSRV9fKi9SZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGQsIGNsb25lUHJvcHMpO1xuICAgICAgICB2YXIgcG9ydGFsOyAvLyBwcmV2ZW50IHVubW91bnRpbmcgYWZ0ZXIgaXQncyByZW5kZXJlZFxuXG4gICAgICAgIGlmIChwb3B1cFZpc2libGUgfHwgdGhpcy5wb3B1cFJlZi5jdXJyZW50IHx8IGZvcmNlUmVuZGVyKSB7XG4gICAgICAgICAgcG9ydGFsID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUG9ydGFsQ29tcG9uZW50LCB7XG4gICAgICAgICAgICBrZXk6IFwicG9ydGFsXCIsXG4gICAgICAgICAgICBnZXRDb250YWluZXI6IHRoaXMuZ2V0Q29udGFpbmVyLFxuICAgICAgICAgICAgZGlkVXBkYXRlOiB0aGlzLmhhbmRsZVBvcnRhbFVwZGF0ZVxuICAgICAgICAgIH0sIHRoaXMuZ2V0Q29tcG9uZW50KCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwb3B1cFZpc2libGUgJiYgYXV0b0Rlc3Ryb3kpIHtcbiAgICAgICAgICBwb3J0YWwgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyaWdnZXJDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgICAgICAgdmFsdWU6IHRoaXMudHJpZ2dlckNvbnRleHRWYWx1ZVxuICAgICAgICB9LCB0cmlnZ2VyLCBwb3J0YWwpO1xuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcImdldERlcml2ZWRTdGF0ZUZyb21Qcm9wc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhfcmVmLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgdmFyIHBvcHVwVmlzaWJsZSA9IF9yZWYucG9wdXBWaXNpYmxlO1xuICAgICAgICB2YXIgbmV3U3RhdGUgPSB7fTtcblxuICAgICAgICBpZiAocG9wdXBWaXNpYmxlICE9PSB1bmRlZmluZWQgJiYgcHJldlN0YXRlLnBvcHVwVmlzaWJsZSAhPT0gcG9wdXBWaXNpYmxlKSB7XG4gICAgICAgICAgbmV3U3RhdGUucG9wdXBWaXNpYmxlID0gcG9wdXBWaXNpYmxlO1xuICAgICAgICAgIG5ld1N0YXRlLnByZXZQb3B1cFZpc2libGUgPSBwcmV2U3RhdGUucG9wdXBWaXNpYmxlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBUcmlnZ2VyO1xuICB9KFJlYWN0LkNvbXBvbmVudCk7XG5cbiAgVHJpZ2dlci5jb250ZXh0VHlwZSA9IFRyaWdnZXJDb250ZXh0O1xuICBUcmlnZ2VyLmRlZmF1bHRQcm9wcyA9IHtcbiAgICBwcmVmaXhDbHM6ICdyYy10cmlnZ2VyLXBvcHVwJyxcbiAgICBnZXRQb3B1cENsYXNzTmFtZUZyb21BbGlnbjogcmV0dXJuRW1wdHlTdHJpbmcsXG4gICAgZ2V0RG9jdW1lbnQ6IHJldHVybkRvY3VtZW50LFxuICAgIG9uUG9wdXBWaXNpYmxlQ2hhbmdlOiBub29wLFxuICAgIGFmdGVyUG9wdXBWaXNpYmxlQ2hhbmdlOiBub29wLFxuICAgIG9uUG9wdXBBbGlnbjogbm9vcCxcbiAgICBwb3B1cENsYXNzTmFtZTogJycsXG4gICAgbW91c2VFbnRlckRlbGF5OiAwLFxuICAgIG1vdXNlTGVhdmVEZWxheTogMC4xLFxuICAgIGZvY3VzRGVsYXk6IDAsXG4gICAgYmx1ckRlbGF5OiAwLjE1LFxuICAgIHBvcHVwU3R5bGU6IHt9LFxuICAgIGRlc3Ryb3lQb3B1cE9uSGlkZTogZmFsc2UsXG4gICAgcG9wdXBBbGlnbjoge30sXG4gICAgZGVmYXVsdFBvcHVwVmlzaWJsZTogZmFsc2UsXG4gICAgbWFzazogZmFsc2UsXG4gICAgbWFza0Nsb3NhYmxlOiB0cnVlLFxuICAgIGFjdGlvbjogW10sXG4gICAgc2hvd0FjdGlvbjogW10sXG4gICAgaGlkZUFjdGlvbjogW10sXG4gICAgYXV0b0Rlc3Ryb3k6IGZhbHNlXG4gIH07XG4gIHJldHVybiBUcmlnZ2VyO1xufVxuZXhwb3J0IGRlZmF1bHQgZ2VuZXJhdGVUcmlnZ2VyKFBvcnRhbCk7IiwidmFyIGF1dG9BZGp1c3RPdmVyZmxvdyA9IHtcbiAgYWRqdXN0WDogMSxcbiAgYWRqdXN0WTogMVxufTtcbmV4cG9ydCB2YXIgcGxhY2VtZW50cyA9IHtcbiAgdG9wTGVmdDoge1xuICAgIHBvaW50czogWydibCcsICd0bCddLFxuICAgIG92ZXJmbG93OiBhdXRvQWRqdXN0T3ZlcmZsb3csXG4gICAgb2Zmc2V0OiBbMCwgLTddXG4gIH0sXG4gIGJvdHRvbUxlZnQ6IHtcbiAgICBwb2ludHM6IFsndGwnLCAnYmwnXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzAsIDddXG4gIH0sXG4gIGxlZnRUb3A6IHtcbiAgICBwb2ludHM6IFsndHInLCAndGwnXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWy00LCAwXVxuICB9LFxuICByaWdodFRvcDoge1xuICAgIHBvaW50czogWyd0bCcsICd0ciddLFxuICAgIG92ZXJmbG93OiBhdXRvQWRqdXN0T3ZlcmZsb3csXG4gICAgb2Zmc2V0OiBbNCwgMF1cbiAgfVxufTtcbmV4cG9ydCB2YXIgcGxhY2VtZW50c1J0bCA9IHtcbiAgdG9wTGVmdDoge1xuICAgIHBvaW50czogWydibCcsICd0bCddLFxuICAgIG92ZXJmbG93OiBhdXRvQWRqdXN0T3ZlcmZsb3csXG4gICAgb2Zmc2V0OiBbMCwgLTddXG4gIH0sXG4gIGJvdHRvbUxlZnQ6IHtcbiAgICBwb2ludHM6IFsndGwnLCAnYmwnXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzAsIDddXG4gIH0sXG4gIHJpZ2h0VG9wOiB7XG4gICAgcG9pbnRzOiBbJ3RyJywgJ3RsJ10sXG4gICAgb3ZlcmZsb3c6IGF1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFstNCwgMF1cbiAgfSxcbiAgbGVmdFRvcDoge1xuICAgIHBvaW50czogWyd0bCcsICd0ciddLFxuICAgIG92ZXJmbG93OiBhdXRvQWRqdXN0T3ZlcmZsb3csXG4gICAgb2Zmc2V0OiBbNCwgMF1cbiAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IHBsYWNlbWVudHM7IiwiZXhwb3J0IGZ1bmN0aW9uIGdldE1vdGlvbihtb2RlLCBtb3Rpb24sIGRlZmF1bHRNb3Rpb25zKSB7XG4gIGlmIChtb3Rpb24pIHtcbiAgICByZXR1cm4gbW90aW9uO1xuICB9XG5cbiAgaWYgKGRlZmF1bHRNb3Rpb25zKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRNb3Rpb25zW21vZGVdIHx8IGRlZmF1bHRNb3Rpb25zLm90aGVyO1xuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn0iLCJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFRyaWdnZXIgZnJvbSAncmMtdHJpZ2dlcic7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCByYWYgZnJvbSBcInJjLXV0aWwvZXMvcmFmXCI7XG5pbXBvcnQgeyBNZW51Q29udGV4dCB9IGZyb20gJy4uL2NvbnRleHQvTWVudUNvbnRleHQnO1xuaW1wb3J0IHsgcGxhY2VtZW50cywgcGxhY2VtZW50c1J0bCB9IGZyb20gJy4uL3BsYWNlbWVudHMnO1xuaW1wb3J0IHsgZ2V0TW90aW9uIH0gZnJvbSAnLi4vdXRpbHMvbW90aW9uVXRpbCc7XG52YXIgcG9wdXBQbGFjZW1lbnRNYXAgPSB7XG4gIGhvcml6b250YWw6ICdib3R0b21MZWZ0JyxcbiAgdmVydGljYWw6ICdyaWdodFRvcCcsXG4gICd2ZXJ0aWNhbC1sZWZ0JzogJ3JpZ2h0VG9wJyxcbiAgJ3ZlcnRpY2FsLXJpZ2h0JzogJ2xlZnRUb3AnXG59O1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUG9wdXBUcmlnZ2VyKF9yZWYpIHtcbiAgdmFyIHByZWZpeENscyA9IF9yZWYucHJlZml4Q2xzLFxuICAgICAgdmlzaWJsZSA9IF9yZWYudmlzaWJsZSxcbiAgICAgIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbixcbiAgICAgIHBvcHVwID0gX3JlZi5wb3B1cCxcbiAgICAgIHBvcHVwQ2xhc3NOYW1lID0gX3JlZi5wb3B1cENsYXNzTmFtZSxcbiAgICAgIHBvcHVwT2Zmc2V0ID0gX3JlZi5wb3B1cE9mZnNldCxcbiAgICAgIGRpc2FibGVkID0gX3JlZi5kaXNhYmxlZCxcbiAgICAgIG1vZGUgPSBfcmVmLm1vZGUsXG4gICAgICBvblZpc2libGVDaGFuZ2UgPSBfcmVmLm9uVmlzaWJsZUNoYW5nZTtcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KE1lbnVDb250ZXh0KSxcbiAgICAgIGdldFBvcHVwQ29udGFpbmVyID0gX1JlYWN0JHVzZUNvbnRleHQuZ2V0UG9wdXBDb250YWluZXIsXG4gICAgICBydGwgPSBfUmVhY3QkdXNlQ29udGV4dC5ydGwsXG4gICAgICBzdWJNZW51T3BlbkRlbGF5ID0gX1JlYWN0JHVzZUNvbnRleHQuc3ViTWVudU9wZW5EZWxheSxcbiAgICAgIHN1Yk1lbnVDbG9zZURlbGF5ID0gX1JlYWN0JHVzZUNvbnRleHQuc3ViTWVudUNsb3NlRGVsYXksXG4gICAgICBidWlsdGluUGxhY2VtZW50cyA9IF9SZWFjdCR1c2VDb250ZXh0LmJ1aWx0aW5QbGFjZW1lbnRzLFxuICAgICAgdHJpZ2dlclN1Yk1lbnVBY3Rpb24gPSBfUmVhY3QkdXNlQ29udGV4dC50cmlnZ2VyU3ViTWVudUFjdGlvbixcbiAgICAgIGZvcmNlU3ViTWVudVJlbmRlciA9IF9SZWFjdCR1c2VDb250ZXh0LmZvcmNlU3ViTWVudVJlbmRlcixcbiAgICAgIG1vdGlvbiA9IF9SZWFjdCR1c2VDb250ZXh0Lm1vdGlvbixcbiAgICAgIGRlZmF1bHRNb3Rpb25zID0gX1JlYWN0JHVzZUNvbnRleHQuZGVmYXVsdE1vdGlvbnM7XG5cbiAgdmFyIF9SZWFjdCR1c2VTdGF0ZSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKSxcbiAgICAgIF9SZWFjdCR1c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfUmVhY3QkdXNlU3RhdGUsIDIpLFxuICAgICAgaW5uZXJWaXNpYmxlID0gX1JlYWN0JHVzZVN0YXRlMlswXSxcbiAgICAgIHNldElubmVyVmlzaWJsZSA9IF9SZWFjdCR1c2VTdGF0ZTJbMV07XG5cbiAgdmFyIHBsYWNlbWVudCA9IHJ0bCA/IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcGxhY2VtZW50c1J0bCksIGJ1aWx0aW5QbGFjZW1lbnRzKSA6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcGxhY2VtZW50cyksIGJ1aWx0aW5QbGFjZW1lbnRzKTtcbiAgdmFyIHBvcHVwUGxhY2VtZW50ID0gcG9wdXBQbGFjZW1lbnRNYXBbbW9kZV07XG4gIHZhciB0YXJnZXRNb3Rpb24gPSBnZXRNb3Rpb24obW9kZSwgbW90aW9uLCBkZWZhdWx0TW90aW9ucyk7XG5cbiAgdmFyIG1lcmdlZE1vdGlvbiA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGFyZ2V0TW90aW9uKSwge30sIHtcbiAgICBsZWF2ZWRDbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItaGlkZGVuXCIpLFxuICAgIHJlbW92ZU9uTGVhdmU6IGZhbHNlLFxuICAgIG1vdGlvbkFwcGVhcjogdHJ1ZVxuICB9KTsgLy8gRGVsYXkgdG8gY2hhbmdlIHZpc2libGVcblxuXG4gIHZhciB2aXNpYmxlUmVmID0gUmVhY3QudXNlUmVmKCk7XG4gIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgdmlzaWJsZVJlZi5jdXJyZW50ID0gcmFmKGZ1bmN0aW9uICgpIHtcbiAgICAgIHNldElubmVyVmlzaWJsZSh2aXNpYmxlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgcmFmLmNhbmNlbCh2aXNpYmxlUmVmLmN1cnJlbnQpO1xuICAgIH07XG4gIH0sIFt2aXNpYmxlXSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmlnZ2VyLCB7XG4gICAgcHJlZml4Q2xzOiBwcmVmaXhDbHMsXG4gICAgcG9wdXBDbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1wb3B1cFwiKSwgX2RlZmluZVByb3BlcnR5KHt9LCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXJ0bFwiKSwgcnRsKSwgcG9wdXBDbGFzc05hbWUpLFxuICAgIHN0cmV0Y2g6IG1vZGUgPT09ICdob3Jpem9udGFsJyA/ICdtaW5XaWR0aCcgOiBudWxsLFxuICAgIGdldFBvcHVwQ29udGFpbmVyOiBnZXRQb3B1cENvbnRhaW5lcixcbiAgICBidWlsdGluUGxhY2VtZW50czogcGxhY2VtZW50LFxuICAgIHBvcHVwUGxhY2VtZW50OiBwb3B1cFBsYWNlbWVudCxcbiAgICBwb3B1cFZpc2libGU6IGlubmVyVmlzaWJsZSxcbiAgICBwb3B1cDogcG9wdXAsXG4gICAgcG9wdXBBbGlnbjogcG9wdXBPZmZzZXQgJiYge1xuICAgICAgb2Zmc2V0OiBwb3B1cE9mZnNldFxuICAgIH0sXG4gICAgYWN0aW9uOiBkaXNhYmxlZCA/IFtdIDogW3RyaWdnZXJTdWJNZW51QWN0aW9uXSxcbiAgICBtb3VzZUVudGVyRGVsYXk6IHN1Yk1lbnVPcGVuRGVsYXksXG4gICAgbW91c2VMZWF2ZURlbGF5OiBzdWJNZW51Q2xvc2VEZWxheSxcbiAgICBvblBvcHVwVmlzaWJsZUNoYW5nZTogb25WaXNpYmxlQ2hhbmdlLFxuICAgIGZvcmNlUmVuZGVyOiBmb3JjZVN1Yk1lbnVSZW5kZXIsXG4gICAgcG9wdXBNb3Rpb246IG1lcmdlZE1vdGlvblxuICB9LCBjaGlsZHJlbik7XG59IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQ1NTTW90aW9uIGZyb20gJ3JjLW1vdGlvbic7XG5pbXBvcnQgeyBnZXRNb3Rpb24gfSBmcm9tICcuLi91dGlscy9tb3Rpb25VdGlsJztcbmltcG9ydCBNZW51Q29udGV4dFByb3ZpZGVyLCB7IE1lbnVDb250ZXh0IH0gZnJvbSAnLi4vY29udGV4dC9NZW51Q29udGV4dCc7XG5pbXBvcnQgU3ViTWVudUxpc3QgZnJvbSAnLi9TdWJNZW51TGlzdCc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBJbmxpbmVTdWJNZW51TGlzdChfcmVmKSB7XG4gIHZhciBpZCA9IF9yZWYuaWQsXG4gICAgICBvcGVuID0gX3JlZi5vcGVuLFxuICAgICAga2V5UGF0aCA9IF9yZWYua2V5UGF0aCxcbiAgICAgIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbjtcbiAgdmFyIGZpeGVkTW9kZSA9ICdpbmxpbmUnO1xuXG4gIHZhciBfUmVhY3QkdXNlQ29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoTWVudUNvbnRleHQpLFxuICAgICAgcHJlZml4Q2xzID0gX1JlYWN0JHVzZUNvbnRleHQucHJlZml4Q2xzLFxuICAgICAgZm9yY2VTdWJNZW51UmVuZGVyID0gX1JlYWN0JHVzZUNvbnRleHQuZm9yY2VTdWJNZW51UmVuZGVyLFxuICAgICAgbW90aW9uID0gX1JlYWN0JHVzZUNvbnRleHQubW90aW9uLFxuICAgICAgZGVmYXVsdE1vdGlvbnMgPSBfUmVhY3QkdXNlQ29udGV4dC5kZWZhdWx0TW90aW9ucyxcbiAgICAgIG1vZGUgPSBfUmVhY3QkdXNlQ29udGV4dC5tb2RlOyAvLyBBbHdheXMgdXNlIGxhdGVzdCBtb2RlIGNoZWNrXG5cblxuICB2YXIgc2FtZU1vZGVSZWYgPSBSZWFjdC51c2VSZWYoZmFsc2UpO1xuICBzYW1lTW9kZVJlZi5jdXJyZW50ID0gbW9kZSA9PT0gZml4ZWRNb2RlOyAvLyBXZSByZWNvcmQgYGRlc3Ryb3lgIG1hcmsgaGVyZSBzaW5jZSB3aGVuIG1vZGUgY2hhbmdlIGZyb20gYGlubGluZWAgdG8gb3RoZXJzLlxuICAvLyBUaGUgaW5saW5lIGxpc3Qgc2hvdWxkIHJlbW92ZSB3aGVuIG1vdGlvbiBlbmQuXG5cbiAgdmFyIF9SZWFjdCR1c2VTdGF0ZSA9IFJlYWN0LnVzZVN0YXRlKCFzYW1lTW9kZVJlZi5jdXJyZW50KSxcbiAgICAgIF9SZWFjdCR1c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfUmVhY3QkdXNlU3RhdGUsIDIpLFxuICAgICAgZGVzdHJveSA9IF9SZWFjdCR1c2VTdGF0ZTJbMF0sXG4gICAgICBzZXREZXN0cm95ID0gX1JlYWN0JHVzZVN0YXRlMlsxXTtcblxuICB2YXIgbWVyZ2VkT3BlbiA9IHNhbWVNb2RlUmVmLmN1cnJlbnQgPyBvcGVuIDogZmFsc2U7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBFZmZlY3QgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFJlc2V0IGRlc3Ryb3kgc3RhdGUgd2hlbiBtb2RlIGNoYW5nZSBiYWNrXG5cbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc2FtZU1vZGVSZWYuY3VycmVudCkge1xuICAgICAgc2V0RGVzdHJveShmYWxzZSk7XG4gICAgfVxuICB9LCBbbW9kZV0pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gUmVuZGVyID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBtZXJnZWRNb3Rpb24gPSBfb2JqZWN0U3ByZWFkKHt9LCBnZXRNb3Rpb24oZml4ZWRNb2RlLCBtb3Rpb24sIGRlZmF1bHRNb3Rpb25zKSk7IC8vIE5vIG5lZWQgYXBwZWFyIHNpbmNlIG5lc3QgaW5saW5lQ29sbGFwc2UgY2hhbmdlZFxuXG5cbiAgaWYgKGtleVBhdGgubGVuZ3RoID4gMSkge1xuICAgIG1lcmdlZE1vdGlvbi5tb3Rpb25BcHBlYXIgPSBmYWxzZTtcbiAgfSAvLyBIaWRlIGlubGluZSBsaXN0IHdoZW4gbW9kZSBjaGFuZ2VkIGFuZCBtb3Rpb24gZW5kXG5cblxuICB2YXIgb3JpZ2luT25WaXNpYmxlQ2hhbmdlZCA9IG1lcmdlZE1vdGlvbi5vblZpc2libGVDaGFuZ2VkO1xuXG4gIG1lcmdlZE1vdGlvbi5vblZpc2libGVDaGFuZ2VkID0gZnVuY3Rpb24gKG5ld1Zpc2libGUpIHtcbiAgICBpZiAoIXNhbWVNb2RlUmVmLmN1cnJlbnQgJiYgIW5ld1Zpc2libGUpIHtcbiAgICAgIHNldERlc3Ryb3kodHJ1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9yaWdpbk9uVmlzaWJsZUNoYW5nZWQgPT09IG51bGwgfHwgb3JpZ2luT25WaXNpYmxlQ2hhbmdlZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3JpZ2luT25WaXNpYmxlQ2hhbmdlZChuZXdWaXNpYmxlKTtcbiAgfTtcblxuICBpZiAoZGVzdHJveSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE1lbnVDb250ZXh0UHJvdmlkZXIsIHtcbiAgICBtb2RlOiBmaXhlZE1vZGUsXG4gICAgbG9ja2VkOiAhc2FtZU1vZGVSZWYuY3VycmVudFxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDU1NNb3Rpb24sIF9leHRlbmRzKHtcbiAgICB2aXNpYmxlOiBtZXJnZWRPcGVuXG4gIH0sIG1lcmdlZE1vdGlvbiwge1xuICAgIGZvcmNlUmVuZGVyOiBmb3JjZVN1Yk1lbnVSZW5kZXIsXG4gICAgcmVtb3ZlT25MZWF2ZTogZmFsc2UsXG4gICAgbGVhdmVkQ2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWhpZGRlblwiKVxuICB9KSwgZnVuY3Rpb24gKF9yZWYyKSB7XG4gICAgdmFyIG1vdGlvbkNsYXNzTmFtZSA9IF9yZWYyLmNsYXNzTmFtZSxcbiAgICAgICAgbW90aW9uU3R5bGUgPSBfcmVmMi5zdHlsZTtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3ViTWVudUxpc3QsIHtcbiAgICAgIGlkOiBpZCxcbiAgICAgIGNsYXNzTmFtZTogbW90aW9uQ2xhc3NOYW1lLFxuICAgICAgc3R5bGU6IG1vdGlvblN0eWxlXG4gICAgfSwgY2hpbGRyZW4pO1xuICB9KSk7XG59IiwiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IE92ZXJmbG93IGZyb20gJ3JjLW92ZXJmbG93JztcbmltcG9ydCB3YXJuaW5nIGZyb20gXCJyYy11dGlsL2VzL3dhcm5pbmdcIjtcbmltcG9ydCBTdWJNZW51TGlzdCBmcm9tICcuL1N1Yk1lbnVMaXN0JztcbmltcG9ydCB7IHBhcnNlQ2hpbGRyZW4gfSBmcm9tICcuLi91dGlscy9ub2RlVXRpbCc7XG5pbXBvcnQgTWVudUNvbnRleHRQcm92aWRlciwgeyBNZW51Q29udGV4dCB9IGZyb20gJy4uL2NvbnRleHQvTWVudUNvbnRleHQnO1xuaW1wb3J0IHVzZU1lbW9DYWxsYmFjayBmcm9tICcuLi9ob29rcy91c2VNZW1vQ2FsbGJhY2snO1xuaW1wb3J0IFBvcHVwVHJpZ2dlciBmcm9tICcuL1BvcHVwVHJpZ2dlcic7XG5pbXBvcnQgSWNvbiBmcm9tICcuLi9JY29uJztcbmltcG9ydCB1c2VBY3RpdmUgZnJvbSAnLi4vaG9va3MvdXNlQWN0aXZlJztcbmltcG9ydCB7IHdhcm5JdGVtUHJvcCB9IGZyb20gJy4uL3V0aWxzL3dhcm5VdGlsJztcbmltcG9ydCB1c2VEaXJlY3Rpb25TdHlsZSBmcm9tICcuLi9ob29rcy91c2VEaXJlY3Rpb25TdHlsZSc7XG5pbXBvcnQgSW5saW5lU3ViTWVudUxpc3QgZnJvbSAnLi9JbmxpbmVTdWJNZW51TGlzdCc7XG5pbXBvcnQgeyBQYXRoVHJhY2tlckNvbnRleHQsIFBhdGhVc2VyQ29udGV4dCwgdXNlRnVsbFBhdGgsIHVzZU1lYXN1cmUgfSBmcm9tICcuLi9jb250ZXh0L1BhdGhDb250ZXh0JztcbmltcG9ydCB7IHVzZU1lbnVJZCB9IGZyb20gJy4uL2NvbnRleHQvSWRDb250ZXh0JztcblxudmFyIEludGVybmFsU3ViTWVudSA9IGZ1bmN0aW9uIEludGVybmFsU3ViTWVudShwcm9wcykge1xuICB2YXIgX2NsYXNzTmFtZXM7XG5cbiAgdmFyIHN0eWxlID0gcHJvcHMuc3R5bGUsXG4gICAgICBjbGFzc05hbWUgPSBwcm9wcy5jbGFzc05hbWUsXG4gICAgICB0aXRsZSA9IHByb3BzLnRpdGxlLFxuICAgICAgZXZlbnRLZXkgPSBwcm9wcy5ldmVudEtleSxcbiAgICAgIHdhcm5LZXkgPSBwcm9wcy53YXJuS2V5LFxuICAgICAgZGlzYWJsZWQgPSBwcm9wcy5kaXNhYmxlZCxcbiAgICAgIGludGVybmFsUG9wdXBDbG9zZSA9IHByb3BzLmludGVybmFsUG9wdXBDbG9zZSxcbiAgICAgIGNoaWxkcmVuID0gcHJvcHMuY2hpbGRyZW4sXG4gICAgICBpdGVtSWNvbiA9IHByb3BzLml0ZW1JY29uLFxuICAgICAgZXhwYW5kSWNvbiA9IHByb3BzLmV4cGFuZEljb24sXG4gICAgICBwb3B1cENsYXNzTmFtZSA9IHByb3BzLnBvcHVwQ2xhc3NOYW1lLFxuICAgICAgcG9wdXBPZmZzZXQgPSBwcm9wcy5wb3B1cE9mZnNldCxcbiAgICAgIG9uQ2xpY2sgPSBwcm9wcy5vbkNsaWNrLFxuICAgICAgb25Nb3VzZUVudGVyID0gcHJvcHMub25Nb3VzZUVudGVyLFxuICAgICAgb25Nb3VzZUxlYXZlID0gcHJvcHMub25Nb3VzZUxlYXZlLFxuICAgICAgb25UaXRsZUNsaWNrID0gcHJvcHMub25UaXRsZUNsaWNrLFxuICAgICAgb25UaXRsZU1vdXNlRW50ZXIgPSBwcm9wcy5vblRpdGxlTW91c2VFbnRlcixcbiAgICAgIG9uVGl0bGVNb3VzZUxlYXZlID0gcHJvcHMub25UaXRsZU1vdXNlTGVhdmUsXG4gICAgICByZXN0UHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMocHJvcHMsIFtcInN0eWxlXCIsIFwiY2xhc3NOYW1lXCIsIFwidGl0bGVcIiwgXCJldmVudEtleVwiLCBcIndhcm5LZXlcIiwgXCJkaXNhYmxlZFwiLCBcImludGVybmFsUG9wdXBDbG9zZVwiLCBcImNoaWxkcmVuXCIsIFwiaXRlbUljb25cIiwgXCJleHBhbmRJY29uXCIsIFwicG9wdXBDbGFzc05hbWVcIiwgXCJwb3B1cE9mZnNldFwiLCBcIm9uQ2xpY2tcIiwgXCJvbk1vdXNlRW50ZXJcIiwgXCJvbk1vdXNlTGVhdmVcIiwgXCJvblRpdGxlQ2xpY2tcIiwgXCJvblRpdGxlTW91c2VFbnRlclwiLCBcIm9uVGl0bGVNb3VzZUxlYXZlXCJdKTtcblxuICB2YXIgZG9tRGF0YUlkID0gdXNlTWVudUlkKGV2ZW50S2V5KTtcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KE1lbnVDb250ZXh0KSxcbiAgICAgIHByZWZpeENscyA9IF9SZWFjdCR1c2VDb250ZXh0LnByZWZpeENscyxcbiAgICAgIG1vZGUgPSBfUmVhY3QkdXNlQ29udGV4dC5tb2RlLFxuICAgICAgb3BlbktleXMgPSBfUmVhY3QkdXNlQ29udGV4dC5vcGVuS2V5cyxcbiAgICAgIGNvbnRleHREaXNhYmxlZCA9IF9SZWFjdCR1c2VDb250ZXh0LmRpc2FibGVkLFxuICAgICAgb3ZlcmZsb3dEaXNhYmxlZCA9IF9SZWFjdCR1c2VDb250ZXh0Lm92ZXJmbG93RGlzYWJsZWQsXG4gICAgICBhY3RpdmVLZXkgPSBfUmVhY3QkdXNlQ29udGV4dC5hY3RpdmVLZXksXG4gICAgICBzZWxlY3RlZEtleXMgPSBfUmVhY3QkdXNlQ29udGV4dC5zZWxlY3RlZEtleXMsXG4gICAgICBjb250ZXh0SXRlbUljb24gPSBfUmVhY3QkdXNlQ29udGV4dC5pdGVtSWNvbixcbiAgICAgIGNvbnRleHRFeHBhbmRJY29uID0gX1JlYWN0JHVzZUNvbnRleHQuZXhwYW5kSWNvbixcbiAgICAgIG9uSXRlbUNsaWNrID0gX1JlYWN0JHVzZUNvbnRleHQub25JdGVtQ2xpY2ssXG4gICAgICBvbk9wZW5DaGFuZ2UgPSBfUmVhY3QkdXNlQ29udGV4dC5vbk9wZW5DaGFuZ2UsXG4gICAgICBvbkFjdGl2ZSA9IF9SZWFjdCR1c2VDb250ZXh0Lm9uQWN0aXZlO1xuXG4gIHZhciBfUmVhY3QkdXNlQ29udGV4dDIgPSBSZWFjdC51c2VDb250ZXh0KFBhdGhVc2VyQ29udGV4dCksXG4gICAgICBpc1N1YlBhdGhLZXkgPSBfUmVhY3QkdXNlQ29udGV4dDIuaXNTdWJQYXRoS2V5O1xuXG4gIHZhciBjb25uZWN0ZWRQYXRoID0gdXNlRnVsbFBhdGgoKTtcbiAgdmFyIHN1Yk1lbnVQcmVmaXhDbHMgPSBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXN1Ym1lbnVcIik7XG4gIHZhciBtZXJnZWREaXNhYmxlZCA9IGNvbnRleHREaXNhYmxlZCB8fCBkaXNhYmxlZDtcbiAgdmFyIGVsZW1lbnRSZWYgPSBSZWFjdC51c2VSZWYoKTtcbiAgdmFyIHBvcHVwUmVmID0gUmVhY3QudXNlUmVmKCk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFdhcm4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuS2V5KSB7XG4gICAgd2FybmluZyhmYWxzZSwgJ1N1Yk1lbnUgc2hvdWxkIG5vdCBsZWF2ZSB1bmRlZmluZWQgYGtleWAuJyk7XG4gIH0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gSWNvbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdmFyIG1lcmdlZEl0ZW1JY29uID0gaXRlbUljb24gfHwgY29udGV4dEl0ZW1JY29uO1xuICB2YXIgbWVyZ2VkRXhwYW5kSWNvbiA9IGV4cGFuZEljb24gfHwgY29udGV4dEV4cGFuZEljb247IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IE9wZW4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgb3JpZ2luT3BlbiA9IG9wZW5LZXlzLmluY2x1ZGVzKGV2ZW50S2V5KTtcbiAgdmFyIG9wZW4gPSAhb3ZlcmZsb3dEaXNhYmxlZCAmJiBvcmlnaW5PcGVuOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFNlbGVjdCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIGNoaWxkcmVuU2VsZWN0ZWQgPSBpc1N1YlBhdGhLZXkoc2VsZWN0ZWRLZXlzLCBldmVudEtleSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQWN0aXZlID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgX3VzZUFjdGl2ZSA9IHVzZUFjdGl2ZShldmVudEtleSwgbWVyZ2VkRGlzYWJsZWQsIG9uVGl0bGVNb3VzZUVudGVyLCBvblRpdGxlTW91c2VMZWF2ZSksXG4gICAgICBhY3RpdmUgPSBfdXNlQWN0aXZlLmFjdGl2ZSxcbiAgICAgIGFjdGl2ZVByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF91c2VBY3RpdmUsIFtcImFjdGl2ZVwiXSk7IC8vIEZhbGxiYWNrIG9mIGFjdGl2ZSBjaGVjayB0byBhdm9pZCBob3ZlciBvbiBtZW51IHRpdGxlIG9yIGRpc2FibGVkIGl0ZW1cblxuXG4gIHZhciBfUmVhY3QkdXNlU3RhdGUgPSBSZWFjdC51c2VTdGF0ZShmYWxzZSksXG4gICAgICBfUmVhY3QkdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlLCAyKSxcbiAgICAgIGNoaWxkcmVuQWN0aXZlID0gX1JlYWN0JHVzZVN0YXRlMlswXSxcbiAgICAgIHNldENoaWxkcmVuQWN0aXZlID0gX1JlYWN0JHVzZVN0YXRlMlsxXTtcblxuICB2YXIgdHJpZ2dlckNoaWxkcmVuQWN0aXZlID0gZnVuY3Rpb24gdHJpZ2dlckNoaWxkcmVuQWN0aXZlKG5ld0FjdGl2ZSkge1xuICAgIGlmICghbWVyZ2VkRGlzYWJsZWQpIHtcbiAgICAgIHNldENoaWxkcmVuQWN0aXZlKG5ld0FjdGl2ZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBvbkludGVybmFsTW91c2VFbnRlciA9IGZ1bmN0aW9uIG9uSW50ZXJuYWxNb3VzZUVudGVyKGRvbUV2ZW50KSB7XG4gICAgdHJpZ2dlckNoaWxkcmVuQWN0aXZlKHRydWUpO1xuICAgIG9uTW91c2VFbnRlciA9PT0gbnVsbCB8fCBvbk1vdXNlRW50ZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uTW91c2VFbnRlcih7XG4gICAgICBrZXk6IGV2ZW50S2V5LFxuICAgICAgZG9tRXZlbnQ6IGRvbUV2ZW50XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIG9uSW50ZXJuYWxNb3VzZUxlYXZlID0gZnVuY3Rpb24gb25JbnRlcm5hbE1vdXNlTGVhdmUoZG9tRXZlbnQpIHtcbiAgICB0cmlnZ2VyQ2hpbGRyZW5BY3RpdmUoZmFsc2UpO1xuICAgIG9uTW91c2VMZWF2ZSA9PT0gbnVsbCB8fCBvbk1vdXNlTGVhdmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uTW91c2VMZWF2ZSh7XG4gICAgICBrZXk6IGV2ZW50S2V5LFxuICAgICAgZG9tRXZlbnQ6IGRvbUV2ZW50XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIG1lcmdlZEFjdGl2ZSA9IFJlYWN0LnVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIGlmIChhY3RpdmUpIHtcbiAgICAgIHJldHVybiBhY3RpdmU7XG4gICAgfVxuXG4gICAgaWYgKG1vZGUgIT09ICdpbmxpbmUnKSB7XG4gICAgICByZXR1cm4gY2hpbGRyZW5BY3RpdmUgfHwgaXNTdWJQYXRoS2V5KFthY3RpdmVLZXldLCBldmVudEtleSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LCBbbW9kZSwgYWN0aXZlLCBhY3RpdmVLZXksIGNoaWxkcmVuQWN0aXZlLCBldmVudEtleSwgaXNTdWJQYXRoS2V5XSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09IERpcmVjdGlvblN0eWxlID09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIGRpcmVjdGlvblN0eWxlID0gdXNlRGlyZWN0aW9uU3R5bGUoY29ubmVjdGVkUGF0aC5sZW5ndGgpOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IEV2ZW50cyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vID4+Pj4gVGl0bGUgY2xpY2tcblxuICB2YXIgb25JbnRlcm5hbFRpdGxlQ2xpY2sgPSBmdW5jdGlvbiBvbkludGVybmFsVGl0bGVDbGljayhlKSB7XG4gICAgLy8gU2tpcCBpZiBkaXNhYmxlZFxuICAgIGlmIChtZXJnZWREaXNhYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG9uVGl0bGVDbGljayA9PT0gbnVsbCB8fCBvblRpdGxlQ2xpY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uVGl0bGVDbGljayh7XG4gICAgICBrZXk6IGV2ZW50S2V5LFxuICAgICAgZG9tRXZlbnQ6IGVcbiAgICB9KTsgLy8gVHJpZ2dlciBvcGVuIGJ5IGNsaWNrIHdoZW4gbW9kZSBpcyBgaW5saW5lYFxuXG4gICAgaWYgKG1vZGUgPT09ICdpbmxpbmUnKSB7XG4gICAgICBvbk9wZW5DaGFuZ2UoZXZlbnRLZXksICFvcmlnaW5PcGVuKTtcbiAgICB9XG4gIH07IC8vID4+Pj4gQ29udGV4dCBmb3IgY2hpbGRyZW4gY2xpY2tcblxuXG4gIHZhciBvbk1lcmdlZEl0ZW1DbGljayA9IHVzZU1lbW9DYWxsYmFjayhmdW5jdGlvbiAoaW5mbykge1xuICAgIG9uQ2xpY2sgPT09IG51bGwgfHwgb25DbGljayA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25DbGljayh3YXJuSXRlbVByb3AoaW5mbykpO1xuICAgIG9uSXRlbUNsaWNrKGluZm8pO1xuICB9KTsgLy8gPj4+Pj4gVmlzaWJsZSBjaGFuZ2VcblxuICB2YXIgb25Qb3B1cFZpc2libGVDaGFuZ2UgPSBmdW5jdGlvbiBvblBvcHVwVmlzaWJsZUNoYW5nZShuZXdWaXNpYmxlKSB7XG4gICAgaWYgKG1vZGUgIT09ICdpbmxpbmUnKSB7XG4gICAgICBvbk9wZW5DaGFuZ2UoZXZlbnRLZXksIG5ld1Zpc2libGUpO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIFVzZWQgZm9yIGFjY2Vzc2liaWxpdHkuIEhlbHBlciB3aWxsIGZvY3VzIGVsZW1lbnQgd2l0aG91dCBrZXkgYm9hcmQuXG4gICAqIFdlIHNob3VsZCBtYW51YWxseSB0cmlnZ2VyIGFuIGFjdGl2ZVxuICAgKi9cblxuXG4gIHZhciBvbkludGVybmFsRm9jdXMgPSBmdW5jdGlvbiBvbkludGVybmFsRm9jdXMoKSB7XG4gICAgb25BY3RpdmUoZXZlbnRLZXkpO1xuICB9OyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFJlbmRlciA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB2YXIgcG9wdXBJZCA9IGRvbURhdGFJZCAmJiBcIlwiLmNvbmNhdChkb21EYXRhSWQsIFwiLXBvcHVwXCIpOyAvLyA+Pj4+PiBUaXRsZVxuXG4gIHZhciB0aXRsZU5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfZXh0ZW5kcyh7XG4gICAgcm9sZTogXCJtZW51aXRlbVwiLFxuICAgIHN0eWxlOiBkaXJlY3Rpb25TdHlsZSxcbiAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHN1Yk1lbnVQcmVmaXhDbHMsIFwiLXRpdGxlXCIpLFxuICAgIHRhYkluZGV4OiBtZXJnZWREaXNhYmxlZCA/IG51bGwgOiAtMSxcbiAgICByZWY6IGVsZW1lbnRSZWYsXG4gICAgdGl0bGU6IHR5cGVvZiB0aXRsZSA9PT0gJ3N0cmluZycgPyB0aXRsZSA6IG51bGwsXG4gICAgXCJkYXRhLW1lbnUtaWRcIjogb3ZlcmZsb3dEaXNhYmxlZCAmJiBkb21EYXRhSWQgPyBudWxsIDogZG9tRGF0YUlkLFxuICAgIFwiYXJpYS1leHBhbmRlZFwiOiBvcGVuLFxuICAgIFwiYXJpYS1oYXNwb3B1cFwiOiB0cnVlLFxuICAgIFwiYXJpYS1jb250cm9sc1wiOiBwb3B1cElkLFxuICAgIFwiYXJpYS1kaXNhYmxlZFwiOiBtZXJnZWREaXNhYmxlZCxcbiAgICBvbkNsaWNrOiBvbkludGVybmFsVGl0bGVDbGljayxcbiAgICBvbkZvY3VzOiBvbkludGVybmFsRm9jdXNcbiAgfSwgYWN0aXZlUHJvcHMpLCB0aXRsZSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSWNvbiwge1xuICAgIGljb246IG1vZGUgIT09ICdob3Jpem9udGFsJyA/IG1lcmdlZEV4cGFuZEljb24gOiBudWxsLFxuICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHByb3BzKSwge30sIHtcbiAgICAgIGlzT3Blbjogb3BlbixcbiAgICAgIC8vIFtMZWdhY3ldIE5vdCBzdXJlIHdoeSBuZWVkIHRoaXMgbWFya1xuICAgICAgaXNTdWJNZW51OiB0cnVlXG4gICAgfSlcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJpXCIsIHtcbiAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHN1Yk1lbnVQcmVmaXhDbHMsIFwiLWFycm93XCIpXG4gIH0pKSk7IC8vIENhY2hlIG1vZGUgaWYgaXQgY2hhbmdlIHRvIGBpbmxpbmVgIHdoaWNoIGRvIG5vdCBoYXZlIHBvcHVwIG1vdGlvblxuXG4gIHZhciB0cmlnZ2VyTW9kZVJlZiA9IFJlYWN0LnVzZVJlZihtb2RlKTtcblxuICBpZiAobW9kZSAhPT0gJ2lubGluZScpIHtcbiAgICB0cmlnZ2VyTW9kZVJlZi5jdXJyZW50ID0gY29ubmVjdGVkUGF0aC5sZW5ndGggPiAxID8gJ3ZlcnRpY2FsJyA6IG1vZGU7XG4gIH1cblxuICBpZiAoIW92ZXJmbG93RGlzYWJsZWQpIHtcbiAgICB2YXIgdHJpZ2dlck1vZGUgPSB0cmlnZ2VyTW9kZVJlZi5jdXJyZW50OyAvLyBTdGlsbCB3cmFwIHdpdGggVHJpZ2dlciBoZXJlIHNpbmNlIHdlIG5lZWQgYXZvaWQgcmVhY3QgcmUtbW91bnQgZG9tIG5vZGVcbiAgICAvLyBXaGljaCBtYWtlcyBtb3Rpb24gZmFpbGVkXG5cbiAgICB0aXRsZU5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQb3B1cFRyaWdnZXIsIHtcbiAgICAgIG1vZGU6IHRyaWdnZXJNb2RlLFxuICAgICAgcHJlZml4Q2xzOiBzdWJNZW51UHJlZml4Q2xzLFxuICAgICAgdmlzaWJsZTogIWludGVybmFsUG9wdXBDbG9zZSAmJiBvcGVuICYmIG1vZGUgIT09ICdpbmxpbmUnLFxuICAgICAgcG9wdXBDbGFzc05hbWU6IHBvcHVwQ2xhc3NOYW1lLFxuICAgICAgcG9wdXBPZmZzZXQ6IHBvcHVwT2Zmc2V0LFxuICAgICAgcG9wdXA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE1lbnVDb250ZXh0UHJvdmlkZXIgLy8gU3BlY2lhbCBoYW5kbGUgb2YgaG9yaXpvbnRhbCBtb2RlXG4gICAgICAsIHtcbiAgICAgICAgbW9kZTogdHJpZ2dlck1vZGUgPT09ICdob3Jpem9udGFsJyA/ICd2ZXJ0aWNhbCcgOiB0cmlnZ2VyTW9kZVxuICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3ViTWVudUxpc3QsIHtcbiAgICAgICAgaWQ6IHBvcHVwSWQsXG4gICAgICAgIHJlZjogcG9wdXBSZWZcbiAgICAgIH0sIGNoaWxkcmVuKSksXG4gICAgICBkaXNhYmxlZDogbWVyZ2VkRGlzYWJsZWQsXG4gICAgICBvblZpc2libGVDaGFuZ2U6IG9uUG9wdXBWaXNpYmxlQ2hhbmdlXG4gICAgfSwgdGl0bGVOb2RlKTtcbiAgfSAvLyA+Pj4+PiBSZW5kZXJcblxuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChNZW51Q29udGV4dFByb3ZpZGVyLCB7XG4gICAgb25JdGVtQ2xpY2s6IG9uTWVyZ2VkSXRlbUNsaWNrLFxuICAgIG1vZGU6IG1vZGUgPT09ICdob3Jpem9udGFsJyA/ICd2ZXJ0aWNhbCcgOiBtb2RlLFxuICAgIGl0ZW1JY29uOiBtZXJnZWRJdGVtSWNvbixcbiAgICBleHBhbmRJY29uOiBtZXJnZWRFeHBhbmRJY29uXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE92ZXJmbG93Lkl0ZW0sIF9leHRlbmRzKHtcbiAgICByb2xlOiBcIm5vbmVcIlxuICB9LCByZXN0UHJvcHMsIHtcbiAgICBjb21wb25lbnQ6IFwibGlcIixcbiAgICBzdHlsZTogc3R5bGUsXG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKHN1Yk1lbnVQcmVmaXhDbHMsIFwiXCIuY29uY2F0KHN1Yk1lbnVQcmVmaXhDbHMsIFwiLVwiKS5jb25jYXQobW9kZSksIGNsYXNzTmFtZSwgKF9jbGFzc05hbWVzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQoc3ViTWVudVByZWZpeENscywgXCItb3BlblwiKSwgb3BlbiksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQoc3ViTWVudVByZWZpeENscywgXCItYWN0aXZlXCIpLCBtZXJnZWRBY3RpdmUpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KHN1Yk1lbnVQcmVmaXhDbHMsIFwiLXNlbGVjdGVkXCIpLCBjaGlsZHJlblNlbGVjdGVkKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCBcIlwiLmNvbmNhdChzdWJNZW51UHJlZml4Q2xzLCBcIi1kaXNhYmxlZFwiKSwgbWVyZ2VkRGlzYWJsZWQpLCBfY2xhc3NOYW1lcykpLFxuICAgIG9uTW91c2VFbnRlcjogb25JbnRlcm5hbE1vdXNlRW50ZXIsXG4gICAgb25Nb3VzZUxlYXZlOiBvbkludGVybmFsTW91c2VMZWF2ZVxuICB9KSwgdGl0bGVOb2RlLCAhb3ZlcmZsb3dEaXNhYmxlZCAmJiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChJbmxpbmVTdWJNZW51TGlzdCwge1xuICAgIGlkOiBwb3B1cElkLFxuICAgIG9wZW46IG9wZW4sXG4gICAga2V5UGF0aDogY29ubmVjdGVkUGF0aFxuICB9LCBjaGlsZHJlbikpKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFN1Yk1lbnUocHJvcHMpIHtcbiAgdmFyIGV2ZW50S2V5ID0gcHJvcHMuZXZlbnRLZXksXG4gICAgICBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuO1xuICB2YXIgY29ubmVjdGVkS2V5UGF0aCA9IHVzZUZ1bGxQYXRoKGV2ZW50S2V5KTtcbiAgdmFyIGNoaWxkTGlzdCA9IHBhcnNlQ2hpbGRyZW4oY2hpbGRyZW4sIGNvbm5lY3RlZEtleVBhdGgpOyAvLyA9PT09PT09PT09PT09PT09PT09PSBSZWNvcmQgS2V5UGF0aCA9PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBtZWFzdXJlID0gdXNlTWVhc3VyZSgpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cblxuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmIChtZWFzdXJlKSB7XG4gICAgICBtZWFzdXJlLnJlZ2lzdGVyUGF0aChldmVudEtleSwgY29ubmVjdGVkS2V5UGF0aCk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBtZWFzdXJlLnVucmVnaXN0ZXJQYXRoKGV2ZW50S2V5LCBjb25uZWN0ZWRLZXlQYXRoKTtcbiAgICAgIH07XG4gICAgfVxuICB9LCBbY29ubmVjdGVkS2V5UGF0aF0pO1xuICB2YXIgcmVuZGVyTm9kZTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09IFJlbmRlciA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBpZiAobWVhc3VyZSkge1xuICAgIHJlbmRlck5vZGUgPSBjaGlsZExpc3Q7XG4gIH0gZWxzZSB7XG4gICAgcmVuZGVyTm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEludGVybmFsU3ViTWVudSwgcHJvcHMsIGNoaWxkTGlzdCk7XG4gIH1cblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUGF0aFRyYWNrZXJDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IGNvbm5lY3RlZEtleVBhdGhcbiAgfSwgcmVuZGVyTm9kZSk7XG59IiwiaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXlcIjtcbmltcG9ydCBpc1Zpc2libGUgZnJvbSAnLi9pc1Zpc2libGUnO1xuXG5mdW5jdGlvbiBmb2N1c2FibGUobm9kZSkge1xuICB2YXIgaW5jbHVkZVBvc2l0aXZlID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTtcblxuICBpZiAoaXNWaXNpYmxlKG5vZGUpKSB7XG4gICAgdmFyIG5vZGVOYW1lID0gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhciBpc0ZvY3VzYWJsZUVsZW1lbnQgPSAvLyBGb2N1c2FibGUgZWxlbWVudFxuICAgIFsnaW5wdXQnLCAnc2VsZWN0JywgJ3RleHRhcmVhJywgJ2J1dHRvbiddLmluY2x1ZGVzKG5vZGVOYW1lKSB8fCAvLyBFZGl0YWJsZSBlbGVtZW50XG4gICAgbm9kZS5pc0NvbnRlbnRFZGl0YWJsZSB8fCAvLyBBbmNob3Igd2l0aCBocmVmIGVsZW1lbnRcbiAgICBub2RlTmFtZSA9PT0gJ2EnICYmICEhbm9kZS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTsgLy8gR2V0IHRhYkluZGV4XG5cbiAgICB2YXIgdGFiSW5kZXhBdHRyID0gbm9kZS5nZXRBdHRyaWJ1dGUoJ3RhYmluZGV4Jyk7XG4gICAgdmFyIHRhYkluZGV4TnVtID0gTnVtYmVyKHRhYkluZGV4QXR0cik7IC8vIFBhcnNlIGFzIG51bWJlciBpZiB2YWxpZGF0ZVxuXG4gICAgdmFyIHRhYkluZGV4ID0gbnVsbDtcblxuICAgIGlmICh0YWJJbmRleEF0dHIgJiYgIU51bWJlci5pc05hTih0YWJJbmRleE51bSkpIHtcbiAgICAgIHRhYkluZGV4ID0gdGFiSW5kZXhOdW07XG4gICAgfSBlbHNlIGlmIChpc0ZvY3VzYWJsZUVsZW1lbnQgJiYgdGFiSW5kZXggPT09IG51bGwpIHtcbiAgICAgIHRhYkluZGV4ID0gMDtcbiAgICB9IC8vIEJsb2NrIGZvY3VzYWJsZSBpZiBkaXNhYmxlZFxuXG5cbiAgICBpZiAoaXNGb2N1c2FibGVFbGVtZW50ICYmIG5vZGUuZGlzYWJsZWQpIHtcbiAgICAgIHRhYkluZGV4ID0gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGFiSW5kZXggIT09IG51bGwgJiYgKHRhYkluZGV4ID49IDAgfHwgaW5jbHVkZVBvc2l0aXZlICYmIHRhYkluZGV4IDwgMCk7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb2N1c05vZGVMaXN0KG5vZGUpIHtcbiAgdmFyIGluY2x1ZGVQb3NpdGl2ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG5cbiAgdmFyIHJlcyA9IF90b0NvbnN1bWFibGVBcnJheShub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJyonKSkuZmlsdGVyKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgIHJldHVybiBmb2N1c2FibGUoY2hpbGQsIGluY2x1ZGVQb3NpdGl2ZSk7XG4gIH0pO1xuXG4gIGlmIChmb2N1c2FibGUobm9kZSwgaW5jbHVkZVBvc2l0aXZlKSkge1xuICAgIHJlcy51bnNoaWZ0KG5vZGUpO1xuICB9XG5cbiAgcmV0dXJuIHJlcztcbn1cbnZhciBsYXN0Rm9jdXNFbGVtZW50ID0gbnVsbDtcbi8qKiBAZGVwcmVjYXRlZCBEbyBub3QgdXNlIHNpbmNlIHRoaXMgbWF5IGZhaWxlZCB3aGVuIHVzZWQgaW4gYXN5bmMgKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVMYXN0Rm9jdXNOb2RlKCkge1xuICBsYXN0Rm9jdXNFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbn1cbi8qKiBAZGVwcmVjYXRlZCBEbyBub3QgdXNlIHNpbmNlIHRoaXMgbWF5IGZhaWxlZCB3aGVuIHVzZWQgaW4gYXN5bmMgKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyTGFzdEZvY3VzTm9kZSgpIHtcbiAgbGFzdEZvY3VzRWxlbWVudCA9IG51bGw7XG59XG4vKiogQGRlcHJlY2F0ZWQgRG8gbm90IHVzZSBzaW5jZSB0aGlzIG1heSBmYWlsZWQgd2hlbiB1c2VkIGluIGFzeW5jICovXG5cbmV4cG9ydCBmdW5jdGlvbiBiYWNrTGFzdEZvY3VzTm9kZSgpIHtcbiAgaWYgKGxhc3RGb2N1c0VsZW1lbnQpIHtcbiAgICB0cnkge1xuICAgICAgLy8g5YWD57Sg5Y+v6IO95bey57uP6KKr56e75Yqo5LqGXG4gICAgICBsYXN0Rm9jdXNFbGVtZW50LmZvY3VzKCk7XG4gICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1lbXB0eSAqL1xuICAgIH0gY2F0Y2ggKGUpIHsvLyBlbXB0eVxuICAgIH1cbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWVtcHR5ICovXG5cbiAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGxpbWl0VGFiUmFuZ2Uobm9kZSwgZSkge1xuICBpZiAoZS5rZXlDb2RlID09PSA5KSB7XG4gICAgdmFyIHRhYk5vZGVMaXN0ID0gZ2V0Rm9jdXNOb2RlTGlzdChub2RlKTtcbiAgICB2YXIgbGFzdFRhYk5vZGUgPSB0YWJOb2RlTGlzdFtlLnNoaWZ0S2V5ID8gMCA6IHRhYk5vZGVMaXN0Lmxlbmd0aCAtIDFdO1xuICAgIHZhciBsZWF2aW5nVGFiID0gbGFzdFRhYk5vZGUgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgfHwgbm9kZSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblxuICAgIGlmIChsZWF2aW5nVGFiKSB7XG4gICAgICB2YXIgdGFyZ2V0ID0gdGFiTm9kZUxpc3RbZS5zaGlmdEtleSA/IHRhYk5vZGVMaXN0Lmxlbmd0aCAtIDEgOiAwXTtcbiAgICAgIHRhcmdldC5mb2N1cygpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxufSIsImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgS2V5Q29kZSBmcm9tIFwicmMtdXRpbC9lcy9LZXlDb2RlXCI7XG5pbXBvcnQgcmFmIGZyb20gXCJyYy11dGlsL2VzL3JhZlwiO1xuaW1wb3J0IHsgZ2V0Rm9jdXNOb2RlTGlzdCB9IGZyb20gXCJyYy11dGlsL2VzL0RvbS9mb2N1c1wiO1xuaW1wb3J0IHsgZ2V0TWVudUlkIH0gZnJvbSAnLi4vY29udGV4dC9JZENvbnRleHQnOyAvLyBkZXN0cnVjdCB0byByZWR1Y2UgbWluaWZ5IHNpemVcblxudmFyIExFRlQgPSBLZXlDb2RlLkxFRlQsXG4gICAgUklHSFQgPSBLZXlDb2RlLlJJR0hULFxuICAgIFVQID0gS2V5Q29kZS5VUCxcbiAgICBET1dOID0gS2V5Q29kZS5ET1dOLFxuICAgIEVOVEVSID0gS2V5Q29kZS5FTlRFUixcbiAgICBFU0MgPSBLZXlDb2RlLkVTQztcbnZhciBBcnJvd0tleXMgPSBbVVAsIERPV04sIExFRlQsIFJJR0hUXTtcblxuZnVuY3Rpb24gZ2V0T2Zmc2V0KG1vZGUsIGlzUm9vdExldmVsLCBpc1J0bCwgd2hpY2gpIHtcbiAgdmFyIF9pbmxpbmUsIF9ob3Jpem9udGFsLCBfdmVydGljYWwsIF9vZmZzZXRzJDtcblxuICB2YXIgcHJldiA9ICdwcmV2JztcbiAgdmFyIG5leHQgPSAnbmV4dCc7XG4gIHZhciBjaGlsZHJlbiA9ICdjaGlsZHJlbic7XG4gIHZhciBwYXJlbnQgPSAncGFyZW50JzsgLy8gSW5saW5lIGVudGVyIGlzIHNwZWNpYWwgdGhhdCB3ZSB1c2UgdW5pcXVlIG9wZXJhdGlvblxuXG4gIGlmIChtb2RlID09PSAnaW5saW5lJyAmJiB3aGljaCA9PT0gRU5URVIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaW5saW5lVHJpZ2dlcjogdHJ1ZVxuICAgIH07XG4gIH1cblxuICB2YXIgaW5saW5lID0gKF9pbmxpbmUgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9pbmxpbmUsIFVQLCBwcmV2KSwgX2RlZmluZVByb3BlcnR5KF9pbmxpbmUsIERPV04sIG5leHQpLCBfaW5saW5lKTtcbiAgdmFyIGhvcml6b250YWwgPSAoX2hvcml6b250YWwgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9ob3Jpem9udGFsLCBMRUZULCBpc1J0bCA/IG5leHQgOiBwcmV2KSwgX2RlZmluZVByb3BlcnR5KF9ob3Jpem9udGFsLCBSSUdIVCwgaXNSdGwgPyBwcmV2IDogbmV4dCksIF9kZWZpbmVQcm9wZXJ0eShfaG9yaXpvbnRhbCwgRE9XTiwgY2hpbGRyZW4pLCBfZGVmaW5lUHJvcGVydHkoX2hvcml6b250YWwsIEVOVEVSLCBjaGlsZHJlbiksIF9ob3Jpem9udGFsKTtcbiAgdmFyIHZlcnRpY2FsID0gKF92ZXJ0aWNhbCA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX3ZlcnRpY2FsLCBVUCwgcHJldiksIF9kZWZpbmVQcm9wZXJ0eShfdmVydGljYWwsIERPV04sIG5leHQpLCBfZGVmaW5lUHJvcGVydHkoX3ZlcnRpY2FsLCBFTlRFUiwgY2hpbGRyZW4pLCBfZGVmaW5lUHJvcGVydHkoX3ZlcnRpY2FsLCBFU0MsIHBhcmVudCksIF9kZWZpbmVQcm9wZXJ0eShfdmVydGljYWwsIExFRlQsIGlzUnRsID8gY2hpbGRyZW4gOiBwYXJlbnQpLCBfZGVmaW5lUHJvcGVydHkoX3ZlcnRpY2FsLCBSSUdIVCwgaXNSdGwgPyBwYXJlbnQgOiBjaGlsZHJlbiksIF92ZXJ0aWNhbCk7XG4gIHZhciBvZmZzZXRzID0ge1xuICAgIGlubGluZTogaW5saW5lLFxuICAgIGhvcml6b250YWw6IGhvcml6b250YWwsXG4gICAgdmVydGljYWw6IHZlcnRpY2FsLFxuICAgIGlubGluZVN1YjogaW5saW5lLFxuICAgIGhvcml6b250YWxTdWI6IHZlcnRpY2FsLFxuICAgIHZlcnRpY2FsU3ViOiB2ZXJ0aWNhbFxuICB9O1xuICB2YXIgdHlwZSA9IChfb2Zmc2V0cyQgPSBvZmZzZXRzW1wiXCIuY29uY2F0KG1vZGUpLmNvbmNhdChpc1Jvb3RMZXZlbCA/ICcnIDogJ1N1YicpXSkgPT09IG51bGwgfHwgX29mZnNldHMkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb2Zmc2V0cyRbd2hpY2hdO1xuXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgcHJldjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG9mZnNldDogLTEsXG4gICAgICAgIHNpYmxpbmc6IHRydWVcbiAgICAgIH07XG5cbiAgICBjYXNlIG5leHQ6XG4gICAgICByZXR1cm4ge1xuICAgICAgICBvZmZzZXQ6IDEsXG4gICAgICAgIHNpYmxpbmc6IHRydWVcbiAgICAgIH07XG5cbiAgICBjYXNlIHBhcmVudDpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG9mZnNldDogLTEsXG4gICAgICAgIHNpYmxpbmc6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgY2FzZSBjaGlsZHJlbjpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG9mZnNldDogMSxcbiAgICAgICAgc2libGluZzogZmFsc2VcbiAgICAgIH07XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZENvbnRhaW5lclVMKGVsZW1lbnQpIHtcbiAgdmFyIGN1cnJlbnQgPSBlbGVtZW50O1xuXG4gIHdoaWxlIChjdXJyZW50KSB7XG4gICAgaWYgKGN1cnJlbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW1lbnUtbGlzdCcpKSB7XG4gICAgICByZXR1cm4gY3VycmVudDtcbiAgICB9XG5cbiAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnRFbGVtZW50O1xuICB9IC8vIE5vcm1hbGx5IHNob3VsZCBub3QgcmVhY2ggdGhpcyBsaW5lXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblxuXG4gIHJldHVybiBudWxsO1xufVxuLyoqXG4gKiBGaW5kIGZvY3VzZWQgZWxlbWVudCB3aXRoaW4gZWxlbWVudCBzZXQgcHJvdmlkZWRcbiAqL1xuXG5cbmZ1bmN0aW9uIGdldEZvY3VzRWxlbWVudChhY3RpdmVFbGVtZW50LCBlbGVtZW50cykge1xuICB2YXIgY3VycmVudCA9IGFjdGl2ZUVsZW1lbnQgfHwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblxuICB3aGlsZSAoY3VycmVudCkge1xuICAgIGlmIChlbGVtZW50cy5oYXMoY3VycmVudCkpIHtcbiAgICAgIHJldHVybiBjdXJyZW50O1xuICAgIH1cblxuICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudEVsZW1lbnQ7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogR2V0IGZvY3VzYWJsZSBlbGVtZW50cyBmcm9tIHRoZSBlbGVtZW50IHNldCB1bmRlciBwcm92aWRlZCBjb250YWluZXJcbiAqL1xuXG5cbmZ1bmN0aW9uIGdldEZvY3VzYWJsZUVsZW1lbnRzKGNvbnRhaW5lciwgZWxlbWVudHMpIHtcbiAgdmFyIGxpc3QgPSBnZXRGb2N1c05vZGVMaXN0KGNvbnRhaW5lciwgdHJ1ZSk7XG4gIHJldHVybiBsaXN0LmZpbHRlcihmdW5jdGlvbiAoZWxlKSB7XG4gICAgcmV0dXJuIGVsZW1lbnRzLmhhcyhlbGUpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0TmV4dEZvY3VzRWxlbWVudChwYXJlbnRRdWVyeUNvbnRhaW5lciwgZWxlbWVudHMsIGZvY3VzTWVudUVsZW1lbnQpIHtcbiAgdmFyIG9mZnNldCA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogMTtcblxuICAvLyBLZXkgb24gdGhlIG1lbnUgaXRlbSB3aWxsIG5vdCBnZXQgdmFsaWRhdGUgcGFyZW50IGNvbnRhaW5lclxuICBpZiAoIXBhcmVudFF1ZXJ5Q29udGFpbmVyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gLy8gTGlzdCBjdXJyZW50IGxldmVsIG1lbnUgaXRlbSBlbGVtZW50c1xuXG5cbiAgdmFyIHNhbWVMZXZlbEZvY3VzYWJsZU1lbnVFbGVtZW50TGlzdCA9IGdldEZvY3VzYWJsZUVsZW1lbnRzKHBhcmVudFF1ZXJ5Q29udGFpbmVyLCBlbGVtZW50cyk7IC8vIEZpbmQgbmV4dCBmb2N1cyBpbmRleFxuXG4gIHZhciBjb3VudCA9IHNhbWVMZXZlbEZvY3VzYWJsZU1lbnVFbGVtZW50TGlzdC5sZW5ndGg7XG4gIHZhciBmb2N1c0luZGV4ID0gc2FtZUxldmVsRm9jdXNhYmxlTWVudUVsZW1lbnRMaXN0LmZpbmRJbmRleChmdW5jdGlvbiAoZWxlKSB7XG4gICAgcmV0dXJuIGZvY3VzTWVudUVsZW1lbnQgPT09IGVsZTtcbiAgfSk7XG5cbiAgaWYgKG9mZnNldCA8IDApIHtcbiAgICBpZiAoZm9jdXNJbmRleCA9PT0gLTEpIHtcbiAgICAgIGZvY3VzSW5kZXggPSBjb3VudCAtIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvY3VzSW5kZXggLT0gMTtcbiAgICB9XG4gIH0gZWxzZSBpZiAob2Zmc2V0ID4gMCkge1xuICAgIGZvY3VzSW5kZXggKz0gMTtcbiAgfVxuXG4gIGZvY3VzSW5kZXggPSAoZm9jdXNJbmRleCArIGNvdW50KSAlIGNvdW50OyAvLyBGb2N1cyBtZW51IGl0ZW1cblxuICByZXR1cm4gc2FtZUxldmVsRm9jdXNhYmxlTWVudUVsZW1lbnRMaXN0W2ZvY3VzSW5kZXhdO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VBY2Nlc3NpYmlsaXR5KG1vZGUsIGFjdGl2ZUtleSwgaXNSdGwsIGlkLCBjb250YWluZXJSZWYsIGdldEtleXMsIGdldEtleVBhdGgsIHRyaWdnZXJBY3RpdmVLZXksIHRyaWdnZXJBY2Nlc3NpYmlsaXR5T3Blbiwgb3JpZ2luT25LZXlEb3duKSB7XG4gIHZhciByYWZSZWYgPSBSZWFjdC51c2VSZWYoKTtcbiAgdmFyIGFjdGl2ZVJlZiA9IFJlYWN0LnVzZVJlZigpO1xuICBhY3RpdmVSZWYuY3VycmVudCA9IGFjdGl2ZUtleTtcblxuICB2YXIgY2xlYW5SYWYgPSBmdW5jdGlvbiBjbGVhblJhZigpIHtcbiAgICByYWYuY2FuY2VsKHJhZlJlZi5jdXJyZW50KTtcbiAgfTtcblxuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBjbGVhblJhZigpO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHdoaWNoID0gZS53aGljaDtcblxuICAgIGlmIChbXS5jb25jYXQoQXJyb3dLZXlzLCBbRU5URVIsIEVTQ10pLmluY2x1ZGVzKHdoaWNoKSkge1xuICAgICAgLy8gQ29udmVydCBrZXkgdG8gZWxlbWVudHNcbiAgICAgIHZhciBlbGVtZW50cztcbiAgICAgIHZhciBrZXkyZWxlbWVudDtcbiAgICAgIHZhciBlbGVtZW50MmtleTsgLy8gPj4+IFdyYXAgYXMgZnVuY3Rpb24gc2luY2Ugd2UgdXNlIHJhZiBmb3Igc29tZSBjYXNlXG5cbiAgICAgIHZhciByZWZyZXNoRWxlbWVudHMgPSBmdW5jdGlvbiByZWZyZXNoRWxlbWVudHMoKSB7XG4gICAgICAgIGVsZW1lbnRzID0gbmV3IFNldCgpO1xuICAgICAgICBrZXkyZWxlbWVudCA9IG5ldyBNYXAoKTtcbiAgICAgICAgZWxlbWVudDJrZXkgPSBuZXcgTWFwKCk7XG4gICAgICAgIHZhciBrZXlzID0gZ2V0S2V5cygpO1xuICAgICAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLW1lbnUtaWQ9J1wiLmNvbmNhdChnZXRNZW51SWQoaWQsIGtleSksIFwiJ11cIikpO1xuXG4gICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnRzLmFkZChlbGVtZW50KTtcbiAgICAgICAgICAgIGVsZW1lbnQya2V5LnNldChlbGVtZW50LCBrZXkpO1xuICAgICAgICAgICAga2V5MmVsZW1lbnQuc2V0KGtleSwgZWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xuICAgICAgfTtcblxuICAgICAgcmVmcmVzaEVsZW1lbnRzKCk7IC8vIEZpcnN0IHdlIHNob3VsZCBmaW5kIGN1cnJlbnQgZm9jdXNlZCBNZW51SXRlbS9TdWJNZW51IGVsZW1lbnRcblxuICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBrZXkyZWxlbWVudC5nZXQoYWN0aXZlS2V5KTtcbiAgICAgIHZhciBmb2N1c01lbnVFbGVtZW50ID0gZ2V0Rm9jdXNFbGVtZW50KGFjdGl2ZUVsZW1lbnQsIGVsZW1lbnRzKTtcbiAgICAgIHZhciBmb2N1c01lbnVLZXkgPSBlbGVtZW50MmtleS5nZXQoZm9jdXNNZW51RWxlbWVudCk7XG4gICAgICB2YXIgb2Zmc2V0T2JqID0gZ2V0T2Zmc2V0KG1vZGUsIGdldEtleVBhdGgoZm9jdXNNZW51S2V5LCB0cnVlKS5sZW5ndGggPT09IDEsIGlzUnRsLCB3aGljaCk7IC8vIFNvbWUgbW9kZSBkbyBub3QgaGF2ZSBmdWxseSBhcnJvdyBvcGVyYXRpb24gbGlrZSBpbmxpbmVcblxuICAgICAgaWYgKCFvZmZzZXRPYmopIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSAvLyBBcnJvdyBwcmV2ZW50IGRlZmF1bHQgdG8gYXZvaWQgcGFnZSBzY3JvbGxcblxuXG4gICAgICBpZiAoQXJyb3dLZXlzLmluY2x1ZGVzKHdoaWNoKSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIHZhciB0cnlGb2N1cyA9IGZ1bmN0aW9uIHRyeUZvY3VzKG1lbnVFbGVtZW50KSB7XG4gICAgICAgIGlmIChtZW51RWxlbWVudCkge1xuICAgICAgICAgIHZhciBmb2N1c1RhcmdldEVsZW1lbnQgPSBtZW51RWxlbWVudDsgLy8gRm9jdXMgdG8gbGluayBpbnN0ZWFkIG9mIG1lbnUgaXRlbSBpZiBwb3NzaWJsZVxuXG4gICAgICAgICAgdmFyIGxpbmsgPSBtZW51RWxlbWVudC5xdWVyeVNlbGVjdG9yKCdhJyk7XG5cbiAgICAgICAgICBpZiAobGluayA9PT0gbnVsbCB8fCBsaW5rID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsaW5rLmdldEF0dHJpYnV0ZSgnaHJlZicpKSB7XG4gICAgICAgICAgICBmb2N1c1RhcmdldEVsZW1lbnQgPSBsaW5rO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciB0YXJnZXRLZXkgPSBlbGVtZW50MmtleS5nZXQobWVudUVsZW1lbnQpO1xuICAgICAgICAgIHRyaWdnZXJBY3RpdmVLZXkodGFyZ2V0S2V5KTtcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBEbyBub3QgYHVzZUVmZmVjdGAgaGVyZSBzaW5jZSBgdHJ5Rm9jdXNgIG1heSB0cmlnZ2VyIGFzeW5jXG4gICAgICAgICAgICogd2hpY2ggbWFrZXMgUmVhY3Qgc3luYyB1cGRhdGUgdGhlIGBhY3RpdmVLZXlgXG4gICAgICAgICAgICogdGhhdCBmb3JjZSByZW5kZXIgYmVmb3JlIGB1c2VSZWZgIHNldCB0aGUgbmV4dCBhY3RpdmVLZXlcbiAgICAgICAgICAgKi9cblxuICAgICAgICAgIGNsZWFuUmFmKCk7XG4gICAgICAgICAgcmFmUmVmLmN1cnJlbnQgPSByYWYoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGFjdGl2ZVJlZi5jdXJyZW50ID09PSB0YXJnZXRLZXkpIHtcbiAgICAgICAgICAgICAgZm9jdXNUYXJnZXRFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGlmIChvZmZzZXRPYmouc2libGluZyB8fCAhZm9jdXNNZW51RWxlbWVudCkge1xuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PSBTaWJsaW5nID09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIC8vIEZpbmQgd2Fsa2FibGUgZm9jdXMgbWVudSBlbGVtZW50IGNvbnRhaW5lclxuICAgICAgICB2YXIgcGFyZW50UXVlcnlDb250YWluZXI7XG5cbiAgICAgICAgaWYgKCFmb2N1c01lbnVFbGVtZW50IHx8IG1vZGUgPT09ICdpbmxpbmUnKSB7XG4gICAgICAgICAgcGFyZW50UXVlcnlDb250YWluZXIgPSBjb250YWluZXJSZWYuY3VycmVudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJlbnRRdWVyeUNvbnRhaW5lciA9IGZpbmRDb250YWluZXJVTChmb2N1c01lbnVFbGVtZW50KTtcbiAgICAgICAgfSAvLyBHZXQgbmV4dCBmb2N1cyBlbGVtZW50XG5cblxuICAgICAgICB2YXIgdGFyZ2V0RWxlbWVudCA9IGdldE5leHRGb2N1c0VsZW1lbnQocGFyZW50UXVlcnlDb250YWluZXIsIGVsZW1lbnRzLCBmb2N1c01lbnVFbGVtZW50LCBvZmZzZXRPYmoub2Zmc2V0KTsgLy8gRm9jdXMgbWVudSBpdGVtXG5cbiAgICAgICAgdHJ5Rm9jdXModGFyZ2V0RWxlbWVudCk7IC8vID09PT09PT09PT09PT09PT09PT09PT09IElubGluZVRyaWdnZXIgPT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgIH0gZWxzZSBpZiAob2Zmc2V0T2JqLmlubGluZVRyaWdnZXIpIHtcbiAgICAgICAgLy8gSW5saW5lIHRyaWdnZXIgbm8gbmVlZCBzd2l0Y2ggdG8gc3ViIG1lbnUgaXRlbVxuICAgICAgICB0cmlnZ2VyQWNjZXNzaWJpbGl0eU9wZW4oZm9jdXNNZW51S2V5KTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09IExldmVsID09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgfSBlbHNlIGlmIChvZmZzZXRPYmoub2Zmc2V0ID4gMCkge1xuICAgICAgICB0cmlnZ2VyQWNjZXNzaWJpbGl0eU9wZW4oZm9jdXNNZW51S2V5LCB0cnVlKTtcbiAgICAgICAgY2xlYW5SYWYoKTtcbiAgICAgICAgcmFmUmVmLmN1cnJlbnQgPSByYWYoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIEFzeW5jIHNob3VsZCByZXN5bmMgZWxlbWVudHNcbiAgICAgICAgICByZWZyZXNoRWxlbWVudHMoKTtcbiAgICAgICAgICB2YXIgY29udHJvbElkID0gZm9jdXNNZW51RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtY29udHJvbHMnKTtcbiAgICAgICAgICB2YXIgc3ViUXVlcnlDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250cm9sSWQpOyAvLyBHZXQgc3ViIGZvY3VzYWJsZSBtZW51IGl0ZW1cblxuICAgICAgICAgIHZhciB0YXJnZXRFbGVtZW50ID0gZ2V0TmV4dEZvY3VzRWxlbWVudChzdWJRdWVyeUNvbnRhaW5lciwgZWxlbWVudHMpOyAvLyBGb2N1cyBtZW51IGl0ZW1cblxuICAgICAgICAgIHRyeUZvY3VzKHRhcmdldEVsZW1lbnQpO1xuICAgICAgICB9LCA1KTtcbiAgICAgIH0gZWxzZSBpZiAob2Zmc2V0T2JqLm9mZnNldCA8IDApIHtcbiAgICAgICAgdmFyIGtleVBhdGggPSBnZXRLZXlQYXRoKGZvY3VzTWVudUtleSwgdHJ1ZSk7XG4gICAgICAgIHZhciBwYXJlbnRLZXkgPSBrZXlQYXRoW2tleVBhdGgubGVuZ3RoIC0gMl07XG4gICAgICAgIHZhciBwYXJlbnRNZW51RWxlbWVudCA9IGtleTJlbGVtZW50LmdldChwYXJlbnRLZXkpOyAvLyBGb2N1cyBtZW51IGl0ZW1cblxuICAgICAgICB0cmlnZ2VyQWNjZXNzaWJpbGl0eU9wZW4ocGFyZW50S2V5LCBmYWxzZSk7XG4gICAgICAgIHRyeUZvY3VzKHBhcmVudE1lbnVFbGVtZW50KTtcbiAgICAgIH1cbiAgICB9IC8vIFBhc3Mgb3JpZ2luIGtleSBkb3duIGV2ZW50XG5cblxuICAgIG9yaWdpbk9uS2V5RG93biA9PT0gbnVsbCB8fCBvcmlnaW5PbktleURvd24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9yaWdpbk9uS2V5RG93bihlKTtcbiAgfTtcbn0iLCJpbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1c2VNZXJnZWRTdGF0ZSBmcm9tIFwicmMtdXRpbC9lcy9ob29rcy91c2VNZXJnZWRTdGF0ZVwiO1xudmFyIHVuaXF1ZVByZWZpeCA9IE1hdGgucmFuZG9tKCkudG9GaXhlZCg1KS50b1N0cmluZygpLnNsaWNlKDIpO1xudmFyIGludGVybmFsSWQgPSAwO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlVVVJRChpZCkge1xuICB2YXIgX3VzZU1lcmdlZFN0YXRlID0gdXNlTWVyZ2VkU3RhdGUoaWQsIHtcbiAgICB2YWx1ZTogaWRcbiAgfSksXG4gICAgICBfdXNlTWVyZ2VkU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZU1lcmdlZFN0YXRlLCAyKSxcbiAgICAgIHV1aWQgPSBfdXNlTWVyZ2VkU3RhdGUyWzBdLFxuICAgICAgc2V0VVVJRCA9IF91c2VNZXJnZWRTdGF0ZTJbMV07XG5cbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpbnRlcm5hbElkICs9IDE7XG4gICAgdmFyIG5ld0lkID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0JyA/ICd0ZXN0JyA6IFwiXCIuY29uY2F0KHVuaXF1ZVByZWZpeCwgXCItXCIpLmNvbmNhdChpbnRlcm5hbElkKTtcbiAgICBzZXRVVUlEKFwicmMtbWVudS11dWlkLVwiLmNvbmNhdChuZXdJZCkpO1xuICB9LCBbXSk7XG4gIHJldHVybiB1dWlkO1xufSIsImV4cG9ydCBmdW5jdGlvbiBuZXh0U2xpY2UoY2FsbGJhY2spIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihjYWxsYmFjayk7XG59IiwiaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXlcIjtcbmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlUmVmLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB3YXJuaW5nIGZyb20gXCJyYy11dGlsL2VzL3dhcm5pbmdcIjtcbmltcG9ydCB7IG5leHRTbGljZSB9IGZyb20gJy4uL3V0aWxzL3RpbWVVdGlsJztcbnZhciBQQVRIX1NQTElUID0gJ19fUkNfVVRJTF9QQVRIX1NQTElUX18nO1xuXG52YXIgZ2V0UGF0aFN0ciA9IGZ1bmN0aW9uIGdldFBhdGhTdHIoa2V5UGF0aCkge1xuICByZXR1cm4ga2V5UGF0aC5qb2luKFBBVEhfU1BMSVQpO1xufTtcblxudmFyIGdldFBhdGhLZXlzID0gZnVuY3Rpb24gZ2V0UGF0aEtleXMoa2V5UGF0aFN0cikge1xuICByZXR1cm4ga2V5UGF0aFN0ci5zcGxpdChQQVRIX1NQTElUKTtcbn07XG5cbmV4cG9ydCB2YXIgT1ZFUkZMT1dfS0VZID0gJ3JjLW1lbnUtbW9yZSc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VLZXlSZWNvcmRzKCkge1xuICB2YXIgX1JlYWN0JHVzZVN0YXRlID0gUmVhY3QudXNlU3RhdGUoe30pLFxuICAgICAgX1JlYWN0JHVzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VTdGF0ZSwgMiksXG4gICAgICBpbnRlcm5hbEZvcmNlVXBkYXRlID0gX1JlYWN0JHVzZVN0YXRlMlsxXTtcblxuICB2YXIga2V5MnBhdGhSZWYgPSB1c2VSZWYobmV3IE1hcCgpKTtcbiAgdmFyIHBhdGgya2V5UmVmID0gdXNlUmVmKG5ldyBNYXAoKSk7XG5cbiAgdmFyIF9SZWFjdCR1c2VTdGF0ZTMgPSBSZWFjdC51c2VTdGF0ZShbXSksXG4gICAgICBfUmVhY3QkdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlMywgMiksXG4gICAgICBvdmVyZmxvd0tleXMgPSBfUmVhY3QkdXNlU3RhdGU0WzBdLFxuICAgICAgc2V0T3ZlcmZsb3dLZXlzID0gX1JlYWN0JHVzZVN0YXRlNFsxXTtcblxuICB2YXIgdXBkYXRlUmVmID0gdXNlUmVmKDApO1xuICB2YXIgZGVzdHJveVJlZiA9IHVzZVJlZihmYWxzZSk7XG5cbiAgdmFyIGZvcmNlVXBkYXRlID0gZnVuY3Rpb24gZm9yY2VVcGRhdGUoKSB7XG4gICAgaWYgKCFkZXN0cm95UmVmLmN1cnJlbnQpIHtcbiAgICAgIGludGVybmFsRm9yY2VVcGRhdGUoe30pO1xuICAgIH1cbiAgfTtcblxuICB2YXIgcmVnaXN0ZXJQYXRoID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGtleSwga2V5UGF0aCkge1xuICAgIC8vIFdhcm5pbmcgZm9yIGludmFsaWRhdGUgb3IgZHVwbGljYXRlZCBga2V5YFxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB3YXJuaW5nKCFrZXkycGF0aFJlZi5jdXJyZW50LmhhcyhrZXkpLCBcIkR1cGxpY2F0ZWQga2V5ICdcIi5jb25jYXQoa2V5LCBcIicgdXNlZCBpbiBNZW51IGJ5IHBhdGggW1wiKS5jb25jYXQoa2V5UGF0aC5qb2luKCcgPiAnKSwgXCJdXCIpKTtcbiAgICB9IC8vIEZpbGwgbWFwXG5cblxuICAgIHZhciBjb25uZWN0ZWRQYXRoID0gZ2V0UGF0aFN0cihrZXlQYXRoKTtcbiAgICBwYXRoMmtleVJlZi5jdXJyZW50LnNldChjb25uZWN0ZWRQYXRoLCBrZXkpO1xuICAgIGtleTJwYXRoUmVmLmN1cnJlbnQuc2V0KGtleSwgY29ubmVjdGVkUGF0aCk7XG4gICAgdXBkYXRlUmVmLmN1cnJlbnQgKz0gMTtcbiAgICB2YXIgaWQgPSB1cGRhdGVSZWYuY3VycmVudDtcbiAgICBuZXh0U2xpY2UoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGlkID09PSB1cGRhdGVSZWYuY3VycmVudCkge1xuICAgICAgICBmb3JjZVVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBbXSk7XG4gIHZhciB1bnJlZ2lzdGVyUGF0aCA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChrZXksIGtleVBhdGgpIHtcbiAgICB2YXIgY29ubmVjdGVkUGF0aCA9IGdldFBhdGhTdHIoa2V5UGF0aCk7XG4gICAgcGF0aDJrZXlSZWYuY3VycmVudC5kZWxldGUoY29ubmVjdGVkUGF0aCk7XG4gICAga2V5MnBhdGhSZWYuY3VycmVudC5kZWxldGUoa2V5KTtcbiAgfSwgW10pO1xuICB2YXIgcmVmcmVzaE92ZXJmbG93S2V5cyA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChrZXlzKSB7XG4gICAgc2V0T3ZlcmZsb3dLZXlzKGtleXMpO1xuICB9LCBbXSk7XG4gIHZhciBnZXRLZXlQYXRoID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGV2ZW50S2V5LCBpbmNsdWRlT3ZlcmZsb3cpIHtcbiAgICB2YXIgZnVsbFBhdGggPSBrZXkycGF0aFJlZi5jdXJyZW50LmdldChldmVudEtleSkgfHwgJyc7XG4gICAgdmFyIGtleXMgPSBnZXRQYXRoS2V5cyhmdWxsUGF0aCk7XG5cbiAgICBpZiAoaW5jbHVkZU92ZXJmbG93ICYmIG92ZXJmbG93S2V5cy5pbmNsdWRlcyhrZXlzWzBdKSkge1xuICAgICAga2V5cy51bnNoaWZ0KE9WRVJGTE9XX0tFWSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGtleXM7XG4gIH0sIFtvdmVyZmxvd0tleXNdKTtcbiAgdmFyIGlzU3ViUGF0aEtleSA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChwYXRoS2V5cywgZXZlbnRLZXkpIHtcbiAgICByZXR1cm4gcGF0aEtleXMuc29tZShmdW5jdGlvbiAocGF0aEtleSkge1xuICAgICAgdmFyIHBhdGhLZXlMaXN0ID0gZ2V0S2V5UGF0aChwYXRoS2V5LCB0cnVlKTtcbiAgICAgIHJldHVybiBwYXRoS2V5TGlzdC5pbmNsdWRlcyhldmVudEtleSk7XG4gICAgfSk7XG4gIH0sIFtnZXRLZXlQYXRoXSk7XG5cbiAgdmFyIGdldEtleXMgPSBmdW5jdGlvbiBnZXRLZXlzKCkge1xuICAgIHZhciBrZXlzID0gX3RvQ29uc3VtYWJsZUFycmF5KGtleTJwYXRoUmVmLmN1cnJlbnQua2V5cygpKTtcblxuICAgIGlmIChvdmVyZmxvd0tleXMubGVuZ3RoKSB7XG4gICAgICBrZXlzLnB1c2goT1ZFUkZMT1dfS0VZKTtcbiAgICB9XG5cbiAgICByZXR1cm4ga2V5cztcbiAgfTtcbiAgLyoqXG4gICAqIEZpbmQgY3VycmVudCBrZXkgcmVsYXRlZCBjaGlsZCBwYXRoIGtleXNcbiAgICovXG5cblxuICB2YXIgZ2V0U3ViUGF0aEtleXMgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIGNvbm5lY3RlZFBhdGggPSBcIlwiLmNvbmNhdChrZXkycGF0aFJlZi5jdXJyZW50LmdldChrZXkpKS5jb25jYXQoUEFUSF9TUExJVCk7XG4gICAgdmFyIHBhdGhLZXlzID0gbmV3IFNldCgpO1xuXG4gICAgX3RvQ29uc3VtYWJsZUFycmF5KHBhdGgya2V5UmVmLmN1cnJlbnQua2V5cygpKS5mb3JFYWNoKGZ1bmN0aW9uIChwYXRoS2V5KSB7XG4gICAgICBpZiAocGF0aEtleS5zdGFydHNXaXRoKGNvbm5lY3RlZFBhdGgpKSB7XG4gICAgICAgIHBhdGhLZXlzLmFkZChwYXRoMmtleVJlZi5jdXJyZW50LmdldChwYXRoS2V5KSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcGF0aEtleXM7XG4gIH0sIFtdKTtcbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgZGVzdHJveVJlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICB9O1xuICB9LCBbXSk7XG4gIHJldHVybiB7XG4gICAgLy8gUmVnaXN0ZXJcbiAgICByZWdpc3RlclBhdGg6IHJlZ2lzdGVyUGF0aCxcbiAgICB1bnJlZ2lzdGVyUGF0aDogdW5yZWdpc3RlclBhdGgsXG4gICAgcmVmcmVzaE92ZXJmbG93S2V5czogcmVmcmVzaE92ZXJmbG93S2V5cyxcbiAgICAvLyBVdGlsXG4gICAgaXNTdWJQYXRoS2V5OiBpc1N1YlBhdGhLZXksXG4gICAgZ2V0S2V5UGF0aDogZ2V0S2V5UGF0aCxcbiAgICBnZXRLZXlzOiBnZXRLZXlzLFxuICAgIGdldFN1YlBhdGhLZXlzOiBnZXRTdWJQYXRoS2V5c1xuICB9O1xufSIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheVwiO1xuaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgc2hhbGxvd0VxdWFsIGZyb20gJ3NoYWxsb3dlcXVhbCc7XG5pbXBvcnQgdXNlTWVyZ2VkU3RhdGUgZnJvbSBcInJjLXV0aWwvZXMvaG9va3MvdXNlTWVyZ2VkU3RhdGVcIjtcbmltcG9ydCB3YXJuaW5nIGZyb20gXCJyYy11dGlsL2VzL3dhcm5pbmdcIjtcbmltcG9ydCBPdmVyZmxvdyBmcm9tICdyYy1vdmVyZmxvdyc7XG5pbXBvcnQgTWVudUl0ZW0gZnJvbSAnLi9NZW51SXRlbSc7XG5pbXBvcnQgeyBwYXJzZUNoaWxkcmVuIH0gZnJvbSAnLi91dGlscy9ub2RlVXRpbCc7XG5pbXBvcnQgTWVudUNvbnRleHRQcm92aWRlciBmcm9tICcuL2NvbnRleHQvTWVudUNvbnRleHQnO1xuaW1wb3J0IHVzZU1lbW9DYWxsYmFjayBmcm9tICcuL2hvb2tzL3VzZU1lbW9DYWxsYmFjayc7XG5pbXBvcnQgeyB3YXJuSXRlbVByb3AgfSBmcm9tICcuL3V0aWxzL3dhcm5VdGlsJztcbmltcG9ydCBTdWJNZW51IGZyb20gJy4vU3ViTWVudSc7XG5pbXBvcnQgdXNlQWNjZXNzaWJpbGl0eSBmcm9tICcuL2hvb2tzL3VzZUFjY2Vzc2liaWxpdHknO1xuaW1wb3J0IHVzZVVVSUQgZnJvbSAnLi9ob29rcy91c2VVVUlEJztcbmltcG9ydCB7IFBhdGhSZWdpc3RlckNvbnRleHQsIFBhdGhVc2VyQ29udGV4dCB9IGZyb20gJy4vY29udGV4dC9QYXRoQ29udGV4dCc7XG5pbXBvcnQgdXNlS2V5UmVjb3JkcywgeyBPVkVSRkxPV19LRVkgfSBmcm9tICcuL2hvb2tzL3VzZUtleVJlY29yZHMnO1xuaW1wb3J0IHsgSWRDb250ZXh0IH0gZnJvbSAnLi9jb250ZXh0L0lkQ29udGV4dCc7XG4vKipcbiAqIE1lbnUgbW9kaWZ5IGFmdGVyIHJlZmFjdG9yOlxuICogIyMgQWRkXG4gKiAtIGRpc2FibGVkXG4gKlxuICogIyMgUmVtb3ZlXG4gKiAtIG9wZW5UcmFuc2l0aW9uTmFtZVxuICogLSBvcGVuQW5pbWF0aW9uXG4gKiAtIG9uRGVzdHJveVxuICogLSBzaWRlckNvbGxhcHNlZDogU2VlbXMgYW50ZCBkbyBub3QgdXNlIHRoaXMgcHJvcCAoTmVlZCB0ZXN0IGluIGFudGQpXG4gKiAtIGNvbGxhcHNlZFdpZHRoOiBTZWVtcyB0aGlzIGxvZ2ljIHNob3VsZCBiZSBoYW5kbGUgYnkgYW50ZCBMYXlvdXQuU2lkZXJcbiAqL1xuLy8gb3B0aW1pemUgZm9yIHJlbmRlclxuXG52YXIgRU1QVFlfTElTVCA9IFtdO1xuXG52YXIgTWVudSA9IGZ1bmN0aW9uIE1lbnUocHJvcHMpIHtcbiAgdmFyIF9jaGlsZExpc3QkLCBfY2xhc3NOYW1lcztcblxuICB2YXIgX3Byb3BzJHByZWZpeENscyA9IHByb3BzLnByZWZpeENscyxcbiAgICAgIHByZWZpeENscyA9IF9wcm9wcyRwcmVmaXhDbHMgPT09IHZvaWQgMCA/ICdyYy1tZW51JyA6IF9wcm9wcyRwcmVmaXhDbHMsXG4gICAgICBzdHlsZSA9IHByb3BzLnN0eWxlLFxuICAgICAgY2xhc3NOYW1lID0gcHJvcHMuY2xhc3NOYW1lLFxuICAgICAgX3Byb3BzJHRhYkluZGV4ID0gcHJvcHMudGFiSW5kZXgsXG4gICAgICB0YWJJbmRleCA9IF9wcm9wcyR0YWJJbmRleCA9PT0gdm9pZCAwID8gMCA6IF9wcm9wcyR0YWJJbmRleCxcbiAgICAgIGNoaWxkcmVuID0gcHJvcHMuY2hpbGRyZW4sXG4gICAgICBkaXJlY3Rpb24gPSBwcm9wcy5kaXJlY3Rpb24sXG4gICAgICBpZCA9IHByb3BzLmlkLFxuICAgICAgX3Byb3BzJG1vZGUgPSBwcm9wcy5tb2RlLFxuICAgICAgbW9kZSA9IF9wcm9wcyRtb2RlID09PSB2b2lkIDAgPyAndmVydGljYWwnIDogX3Byb3BzJG1vZGUsXG4gICAgICBpbmxpbmVDb2xsYXBzZWQgPSBwcm9wcy5pbmxpbmVDb2xsYXBzZWQsXG4gICAgICBkaXNhYmxlZCA9IHByb3BzLmRpc2FibGVkLFxuICAgICAgZGlzYWJsZWRPdmVyZmxvdyA9IHByb3BzLmRpc2FibGVkT3ZlcmZsb3csXG4gICAgICBfcHJvcHMkc3ViTWVudU9wZW5EZWwgPSBwcm9wcy5zdWJNZW51T3BlbkRlbGF5LFxuICAgICAgc3ViTWVudU9wZW5EZWxheSA9IF9wcm9wcyRzdWJNZW51T3BlbkRlbCA9PT0gdm9pZCAwID8gMC4xIDogX3Byb3BzJHN1Yk1lbnVPcGVuRGVsLFxuICAgICAgX3Byb3BzJHN1Yk1lbnVDbG9zZURlID0gcHJvcHMuc3ViTWVudUNsb3NlRGVsYXksXG4gICAgICBzdWJNZW51Q2xvc2VEZWxheSA9IF9wcm9wcyRzdWJNZW51Q2xvc2VEZSA9PT0gdm9pZCAwID8gMC4xIDogX3Byb3BzJHN1Yk1lbnVDbG9zZURlLFxuICAgICAgZm9yY2VTdWJNZW51UmVuZGVyID0gcHJvcHMuZm9yY2VTdWJNZW51UmVuZGVyLFxuICAgICAgZGVmYXVsdE9wZW5LZXlzID0gcHJvcHMuZGVmYXVsdE9wZW5LZXlzLFxuICAgICAgb3BlbktleXMgPSBwcm9wcy5vcGVuS2V5cyxcbiAgICAgIGFjdGl2ZUtleSA9IHByb3BzLmFjdGl2ZUtleSxcbiAgICAgIGRlZmF1bHRBY3RpdmVGaXJzdCA9IHByb3BzLmRlZmF1bHRBY3RpdmVGaXJzdCxcbiAgICAgIF9wcm9wcyRzZWxlY3RhYmxlID0gcHJvcHMuc2VsZWN0YWJsZSxcbiAgICAgIHNlbGVjdGFibGUgPSBfcHJvcHMkc2VsZWN0YWJsZSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9wcm9wcyRzZWxlY3RhYmxlLFxuICAgICAgX3Byb3BzJG11bHRpcGxlID0gcHJvcHMubXVsdGlwbGUsXG4gICAgICBtdWx0aXBsZSA9IF9wcm9wcyRtdWx0aXBsZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcHJvcHMkbXVsdGlwbGUsXG4gICAgICBkZWZhdWx0U2VsZWN0ZWRLZXlzID0gcHJvcHMuZGVmYXVsdFNlbGVjdGVkS2V5cyxcbiAgICAgIHNlbGVjdGVkS2V5cyA9IHByb3BzLnNlbGVjdGVkS2V5cyxcbiAgICAgIG9uU2VsZWN0ID0gcHJvcHMub25TZWxlY3QsXG4gICAgICBvbkRlc2VsZWN0ID0gcHJvcHMub25EZXNlbGVjdCxcbiAgICAgIF9wcm9wcyRpbmxpbmVJbmRlbnQgPSBwcm9wcy5pbmxpbmVJbmRlbnQsXG4gICAgICBpbmxpbmVJbmRlbnQgPSBfcHJvcHMkaW5saW5lSW5kZW50ID09PSB2b2lkIDAgPyAyNCA6IF9wcm9wcyRpbmxpbmVJbmRlbnQsXG4gICAgICBtb3Rpb24gPSBwcm9wcy5tb3Rpb24sXG4gICAgICBkZWZhdWx0TW90aW9ucyA9IHByb3BzLmRlZmF1bHRNb3Rpb25zLFxuICAgICAgX3Byb3BzJHRyaWdnZXJTdWJNZW51ID0gcHJvcHMudHJpZ2dlclN1Yk1lbnVBY3Rpb24sXG4gICAgICB0cmlnZ2VyU3ViTWVudUFjdGlvbiA9IF9wcm9wcyR0cmlnZ2VyU3ViTWVudSA9PT0gdm9pZCAwID8gJ2hvdmVyJyA6IF9wcm9wcyR0cmlnZ2VyU3ViTWVudSxcbiAgICAgIGJ1aWx0aW5QbGFjZW1lbnRzID0gcHJvcHMuYnVpbHRpblBsYWNlbWVudHMsXG4gICAgICBpdGVtSWNvbiA9IHByb3BzLml0ZW1JY29uLFxuICAgICAgZXhwYW5kSWNvbiA9IHByb3BzLmV4cGFuZEljb24sXG4gICAgICBfcHJvcHMkb3ZlcmZsb3dlZEluZGkgPSBwcm9wcy5vdmVyZmxvd2VkSW5kaWNhdG9yLFxuICAgICAgb3ZlcmZsb3dlZEluZGljYXRvciA9IF9wcm9wcyRvdmVyZmxvd2VkSW5kaSA9PT0gdm9pZCAwID8gJy4uLicgOiBfcHJvcHMkb3ZlcmZsb3dlZEluZGksXG4gICAgICBvdmVyZmxvd2VkSW5kaWNhdG9yUG9wdXBDbGFzc05hbWUgPSBwcm9wcy5vdmVyZmxvd2VkSW5kaWNhdG9yUG9wdXBDbGFzc05hbWUsXG4gICAgICBnZXRQb3B1cENvbnRhaW5lciA9IHByb3BzLmdldFBvcHVwQ29udGFpbmVyLFxuICAgICAgb25DbGljayA9IHByb3BzLm9uQ2xpY2ssXG4gICAgICBvbk9wZW5DaGFuZ2UgPSBwcm9wcy5vbk9wZW5DaGFuZ2UsXG4gICAgICBvbktleURvd24gPSBwcm9wcy5vbktleURvd24sXG4gICAgICBvcGVuQW5pbWF0aW9uID0gcHJvcHMub3BlbkFuaW1hdGlvbixcbiAgICAgIG9wZW5UcmFuc2l0aW9uTmFtZSA9IHByb3BzLm9wZW5UcmFuc2l0aW9uTmFtZSxcbiAgICAgIHJlc3RQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhwcm9wcywgW1wicHJlZml4Q2xzXCIsIFwic3R5bGVcIiwgXCJjbGFzc05hbWVcIiwgXCJ0YWJJbmRleFwiLCBcImNoaWxkcmVuXCIsIFwiZGlyZWN0aW9uXCIsIFwiaWRcIiwgXCJtb2RlXCIsIFwiaW5saW5lQ29sbGFwc2VkXCIsIFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZE92ZXJmbG93XCIsIFwic3ViTWVudU9wZW5EZWxheVwiLCBcInN1Yk1lbnVDbG9zZURlbGF5XCIsIFwiZm9yY2VTdWJNZW51UmVuZGVyXCIsIFwiZGVmYXVsdE9wZW5LZXlzXCIsIFwib3BlbktleXNcIiwgXCJhY3RpdmVLZXlcIiwgXCJkZWZhdWx0QWN0aXZlRmlyc3RcIiwgXCJzZWxlY3RhYmxlXCIsIFwibXVsdGlwbGVcIiwgXCJkZWZhdWx0U2VsZWN0ZWRLZXlzXCIsIFwic2VsZWN0ZWRLZXlzXCIsIFwib25TZWxlY3RcIiwgXCJvbkRlc2VsZWN0XCIsIFwiaW5saW5lSW5kZW50XCIsIFwibW90aW9uXCIsIFwiZGVmYXVsdE1vdGlvbnNcIiwgXCJ0cmlnZ2VyU3ViTWVudUFjdGlvblwiLCBcImJ1aWx0aW5QbGFjZW1lbnRzXCIsIFwiaXRlbUljb25cIiwgXCJleHBhbmRJY29uXCIsIFwib3ZlcmZsb3dlZEluZGljYXRvclwiLCBcIm92ZXJmbG93ZWRJbmRpY2F0b3JQb3B1cENsYXNzTmFtZVwiLCBcImdldFBvcHVwQ29udGFpbmVyXCIsIFwib25DbGlja1wiLCBcIm9uT3BlbkNoYW5nZVwiLCBcIm9uS2V5RG93blwiLCBcIm9wZW5BbmltYXRpb25cIiwgXCJvcGVuVHJhbnNpdGlvbk5hbWVcIl0pO1xuXG4gIHZhciBjaGlsZExpc3QgPSBwYXJzZUNoaWxkcmVuKGNoaWxkcmVuLCBFTVBUWV9MSVNUKTtcblxuICB2YXIgX1JlYWN0JHVzZVN0YXRlID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpLFxuICAgICAgX1JlYWN0JHVzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VTdGF0ZSwgMiksXG4gICAgICBtb3VudGVkID0gX1JlYWN0JHVzZVN0YXRlMlswXSxcbiAgICAgIHNldE1vdW50ZWQgPSBfUmVhY3QkdXNlU3RhdGUyWzFdO1xuXG4gIHZhciBjb250YWluZXJSZWYgPSBSZWFjdC51c2VSZWYoKTtcbiAgdmFyIHV1aWQgPSB1c2VVVUlEKGlkKTtcbiAgdmFyIGlzUnRsID0gZGlyZWN0aW9uID09PSAncnRsJzsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PSBXYXJuID09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHdhcm5pbmcoIW9wZW5BbmltYXRpb24gJiYgIW9wZW5UcmFuc2l0aW9uTmFtZSwgJ2BvcGVuQW5pbWF0aW9uYCBhbmQgYG9wZW5UcmFuc2l0aW9uTmFtZWAgaXMgcmVtb3ZlZC4gUGxlYXNlIHVzZSBgbW90aW9uYCBvciBgZGVmYXVsdE1vdGlvbmAgaW5zdGVhZC4nKTtcbiAgfSAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09IE1vZGUgPT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdmFyIF9SZWFjdCR1c2VNZW1vID0gUmVhY3QudXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgaWYgKChtb2RlID09PSAnaW5saW5lJyB8fCBtb2RlID09PSAndmVydGljYWwnKSAmJiBpbmxpbmVDb2xsYXBzZWQpIHtcbiAgICAgIHJldHVybiBbJ3ZlcnRpY2FsJywgaW5saW5lQ29sbGFwc2VkXTtcbiAgICB9XG5cbiAgICByZXR1cm4gW21vZGUsIGZhbHNlXTtcbiAgfSwgW21vZGUsIGlubGluZUNvbGxhcHNlZF0pLFxuICAgICAgX1JlYWN0JHVzZU1lbW8yID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZU1lbW8sIDIpLFxuICAgICAgbWVyZ2VkTW9kZSA9IF9SZWFjdCR1c2VNZW1vMlswXSxcbiAgICAgIG1lcmdlZElubGluZUNvbGxhcHNlZCA9IF9SZWFjdCR1c2VNZW1vMlsxXTsgLy8gPT09PT09PT09PT09PT09PT09PT09PSBSZXNwb25zaXZlID09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBfUmVhY3QkdXNlU3RhdGUzID0gUmVhY3QudXNlU3RhdGUoMCksXG4gICAgICBfUmVhY3QkdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlMywgMiksXG4gICAgICBsYXN0VmlzaWJsZUluZGV4ID0gX1JlYWN0JHVzZVN0YXRlNFswXSxcbiAgICAgIHNldExhc3RWaXNpYmxlSW5kZXggPSBfUmVhY3QkdXNlU3RhdGU0WzFdO1xuXG4gIHZhciBhbGxWaXNpYmxlID0gbGFzdFZpc2libGVJbmRleCA+PSBjaGlsZExpc3QubGVuZ3RoIC0gMSB8fCBtZXJnZWRNb2RlICE9PSAnaG9yaXpvbnRhbCcgfHwgZGlzYWJsZWRPdmVyZmxvdzsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PSBPcGVuID09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgX3VzZU1lcmdlZFN0YXRlID0gdXNlTWVyZ2VkU3RhdGUoZGVmYXVsdE9wZW5LZXlzLCB7XG4gICAgdmFsdWU6IG9wZW5LZXlzLFxuICAgIHBvc3RTdGF0ZTogZnVuY3Rpb24gcG9zdFN0YXRlKGtleXMpIHtcbiAgICAgIHJldHVybiBrZXlzIHx8IEVNUFRZX0xJU1Q7XG4gICAgfVxuICB9KSxcbiAgICAgIF91c2VNZXJnZWRTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlTWVyZ2VkU3RhdGUsIDIpLFxuICAgICAgbWVyZ2VkT3BlbktleXMgPSBfdXNlTWVyZ2VkU3RhdGUyWzBdLFxuICAgICAgc2V0TWVyZ2VkT3BlbktleXMgPSBfdXNlTWVyZ2VkU3RhdGUyWzFdO1xuXG4gIHZhciB0cmlnZ2VyT3BlbktleXMgPSBmdW5jdGlvbiB0cmlnZ2VyT3BlbktleXMoa2V5cykge1xuICAgIHNldE1lcmdlZE9wZW5LZXlzKGtleXMpO1xuICAgIG9uT3BlbkNoYW5nZSA9PT0gbnVsbCB8fCBvbk9wZW5DaGFuZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uT3BlbkNoYW5nZShrZXlzKTtcbiAgfTsgLy8gPj4+Pj4gQ2FjaGUgJiBSZXNldCBvcGVuIGtleXMgd2hlbiBpbmxpbmVDb2xsYXBzZWQgY2hhbmdlZFxuXG5cbiAgdmFyIF9SZWFjdCR1c2VTdGF0ZTUgPSBSZWFjdC51c2VTdGF0ZShtZXJnZWRPcGVuS2V5cyksXG4gICAgICBfUmVhY3QkdXNlU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlNSwgMiksXG4gICAgICBpbmxpbmVDYWNoZU9wZW5LZXlzID0gX1JlYWN0JHVzZVN0YXRlNlswXSxcbiAgICAgIHNldElubGluZUNhY2hlT3BlbktleXMgPSBfUmVhY3QkdXNlU3RhdGU2WzFdO1xuXG4gIHZhciBpc0lubGluZU1vZGUgPSBtZXJnZWRNb2RlID09PSAnaW5saW5lJztcbiAgdmFyIG1vdW50UmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKTsgLy8gQ2FjaGVcblxuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmIChpc0lubGluZU1vZGUpIHtcbiAgICAgIHNldElubGluZUNhY2hlT3BlbktleXMobWVyZ2VkT3BlbktleXMpO1xuICAgIH1cbiAgfSwgW21lcmdlZE9wZW5LZXlzXSk7IC8vIFJlc3RvcmVcblxuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICghbW91bnRSZWYuY3VycmVudCkge1xuICAgICAgbW91bnRSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzSW5saW5lTW9kZSkge1xuICAgICAgc2V0TWVyZ2VkT3BlbktleXMoaW5saW5lQ2FjaGVPcGVuS2V5cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRyaWdnZXIgb3BlbiBldmVudCBpbiBjYXNlIGl0cyBpbiBjb250cm9sXG4gICAgICB0cmlnZ2VyT3BlbktleXMoRU1QVFlfTElTVCk7XG4gICAgfVxuICB9LCBbaXNJbmxpbmVNb2RlXSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT0gUGF0aCA9PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIF91c2VLZXlSZWNvcmRzID0gdXNlS2V5UmVjb3JkcygpLFxuICAgICAgcmVnaXN0ZXJQYXRoID0gX3VzZUtleVJlY29yZHMucmVnaXN0ZXJQYXRoLFxuICAgICAgdW5yZWdpc3RlclBhdGggPSBfdXNlS2V5UmVjb3Jkcy51bnJlZ2lzdGVyUGF0aCxcbiAgICAgIHJlZnJlc2hPdmVyZmxvd0tleXMgPSBfdXNlS2V5UmVjb3Jkcy5yZWZyZXNoT3ZlcmZsb3dLZXlzLFxuICAgICAgaXNTdWJQYXRoS2V5ID0gX3VzZUtleVJlY29yZHMuaXNTdWJQYXRoS2V5LFxuICAgICAgZ2V0S2V5UGF0aCA9IF91c2VLZXlSZWNvcmRzLmdldEtleVBhdGgsXG4gICAgICBnZXRLZXlzID0gX3VzZUtleVJlY29yZHMuZ2V0S2V5cyxcbiAgICAgIGdldFN1YlBhdGhLZXlzID0gX3VzZUtleVJlY29yZHMuZ2V0U3ViUGF0aEtleXM7XG5cbiAgdmFyIHJlZ2lzdGVyUGF0aENvbnRleHQgPSBSZWFjdC51c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVnaXN0ZXJQYXRoOiByZWdpc3RlclBhdGgsXG4gICAgICB1bnJlZ2lzdGVyUGF0aDogdW5yZWdpc3RlclBhdGhcbiAgICB9O1xuICB9LCBbcmVnaXN0ZXJQYXRoLCB1bnJlZ2lzdGVyUGF0aF0pO1xuICB2YXIgcGF0aFVzZXJDb250ZXh0ID0gUmVhY3QudXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzU3ViUGF0aEtleTogaXNTdWJQYXRoS2V5XG4gICAgfTtcbiAgfSwgW2lzU3ViUGF0aEtleV0pO1xuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJlZnJlc2hPdmVyZmxvd0tleXMoYWxsVmlzaWJsZSA/IEVNUFRZX0xJU1QgOiBjaGlsZExpc3Quc2xpY2UobGFzdFZpc2libGVJbmRleCArIDEpLm1hcChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIHJldHVybiBjaGlsZC5rZXk7XG4gICAgfSkpO1xuICB9LCBbbGFzdFZpc2libGVJbmRleCwgYWxsVmlzaWJsZV0pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT0gQWN0aXZlID09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBfdXNlTWVyZ2VkU3RhdGUzID0gdXNlTWVyZ2VkU3RhdGUoYWN0aXZlS2V5IHx8IGRlZmF1bHRBY3RpdmVGaXJzdCAmJiAoKF9jaGlsZExpc3QkID0gY2hpbGRMaXN0WzBdKSA9PT0gbnVsbCB8fCBfY2hpbGRMaXN0JCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NoaWxkTGlzdCQua2V5KSwge1xuICAgIHZhbHVlOiBhY3RpdmVLZXlcbiAgfSksXG4gICAgICBfdXNlTWVyZ2VkU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZU1lcmdlZFN0YXRlMywgMiksXG4gICAgICBtZXJnZWRBY3RpdmVLZXkgPSBfdXNlTWVyZ2VkU3RhdGU0WzBdLFxuICAgICAgc2V0TWVyZ2VkQWN0aXZlS2V5ID0gX3VzZU1lcmdlZFN0YXRlNFsxXTtcblxuICB2YXIgb25BY3RpdmUgPSB1c2VNZW1vQ2FsbGJhY2soZnVuY3Rpb24gKGtleSkge1xuICAgIHNldE1lcmdlZEFjdGl2ZUtleShrZXkpO1xuICB9KTtcbiAgdmFyIG9uSW5hY3RpdmUgPSB1c2VNZW1vQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIHNldE1lcmdlZEFjdGl2ZUtleSh1bmRlZmluZWQpO1xuICB9KTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09IFNlbGVjdCA9PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gPj4+Pj4gU2VsZWN0IGtleXNcblxuICB2YXIgX3VzZU1lcmdlZFN0YXRlNSA9IHVzZU1lcmdlZFN0YXRlKGRlZmF1bHRTZWxlY3RlZEtleXMgfHwgW10sIHtcbiAgICB2YWx1ZTogc2VsZWN0ZWRLZXlzLFxuICAgIC8vIExlZ2FjeSBjb252ZXJ0IGtleSB0byBhcnJheVxuICAgIHBvc3RTdGF0ZTogZnVuY3Rpb24gcG9zdFN0YXRlKGtleXMpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGtleXMpKSB7XG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgfVxuXG4gICAgICBpZiAoa2V5cyA9PT0gbnVsbCB8fCBrZXlzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIEVNUFRZX0xJU1Q7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBba2V5c107XG4gICAgfVxuICB9KSxcbiAgICAgIF91c2VNZXJnZWRTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlTWVyZ2VkU3RhdGU1LCAyKSxcbiAgICAgIG1lcmdlZFNlbGVjdEtleXMgPSBfdXNlTWVyZ2VkU3RhdGU2WzBdLFxuICAgICAgc2V0TWVyZ2VkU2VsZWN0S2V5cyA9IF91c2VNZXJnZWRTdGF0ZTZbMV07IC8vID4+Pj4+IFRyaWdnZXIgc2VsZWN0XG5cblxuICB2YXIgdHJpZ2dlclNlbGVjdGlvbiA9IGZ1bmN0aW9uIHRyaWdnZXJTZWxlY3Rpb24oaW5mbykge1xuICAgIGlmIChzZWxlY3RhYmxlKSB7XG4gICAgICAvLyBJbnNlcnQgb3IgUmVtb3ZlXG4gICAgICB2YXIgdGFyZ2V0S2V5ID0gaW5mby5rZXk7XG4gICAgICB2YXIgZXhpc3QgPSBtZXJnZWRTZWxlY3RLZXlzLmluY2x1ZGVzKHRhcmdldEtleSk7XG4gICAgICB2YXIgbmV3U2VsZWN0S2V5cztcblxuICAgICAgaWYgKG11bHRpcGxlKSB7XG4gICAgICAgIGlmIChleGlzdCkge1xuICAgICAgICAgIG5ld1NlbGVjdEtleXMgPSBtZXJnZWRTZWxlY3RLZXlzLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4ga2V5ICE9PSB0YXJnZXRLZXk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3U2VsZWN0S2V5cyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkobWVyZ2VkU2VsZWN0S2V5cyksIFt0YXJnZXRLZXldKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3U2VsZWN0S2V5cyA9IFt0YXJnZXRLZXldO1xuICAgICAgfVxuXG4gICAgICBzZXRNZXJnZWRTZWxlY3RLZXlzKG5ld1NlbGVjdEtleXMpOyAvLyBUcmlnZ2VyIGV2ZW50XG5cbiAgICAgIHZhciBzZWxlY3RJbmZvID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpbmZvKSwge30sIHtcbiAgICAgICAgc2VsZWN0ZWRLZXlzOiBuZXdTZWxlY3RLZXlzXG4gICAgICB9KTtcblxuICAgICAgaWYgKGV4aXN0KSB7XG4gICAgICAgIG9uRGVzZWxlY3QgPT09IG51bGwgfHwgb25EZXNlbGVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25EZXNlbGVjdChzZWxlY3RJbmZvKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9uU2VsZWN0ID09PSBudWxsIHx8IG9uU2VsZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvblNlbGVjdChzZWxlY3RJbmZvKTtcbiAgICAgIH1cbiAgICB9IC8vIFdoYXRldmVyIHNlbGVjdGFibGUsIGFsd2F5cyBjbG9zZSBpdFxuXG5cbiAgICBpZiAoIW11bHRpcGxlICYmIG1lcmdlZE9wZW5LZXlzLmxlbmd0aCAmJiBtZXJnZWRNb2RlICE9PSAnaW5saW5lJykge1xuICAgICAgdHJpZ2dlck9wZW5LZXlzKEVNUFRZX0xJU1QpO1xuICAgIH1cbiAgfTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PSBPcGVuID09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogQ2xpY2sgZm9yIGl0ZW0uIFN1Yk1lbnUgZG8gbm90IGhhdmUgc2VsZWN0aW9uIHN0YXR1c1xuICAgKi9cblxuXG4gIHZhciBvbkludGVybmFsQ2xpY2sgPSB1c2VNZW1vQ2FsbGJhY2soZnVuY3Rpb24gKGluZm8pIHtcbiAgICBvbkNsaWNrID09PSBudWxsIHx8IG9uQ2xpY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uQ2xpY2sod2Fybkl0ZW1Qcm9wKGluZm8pKTtcbiAgICB0cmlnZ2VyU2VsZWN0aW9uKGluZm8pO1xuICB9KTtcbiAgdmFyIG9uSW50ZXJuYWxPcGVuQ2hhbmdlID0gdXNlTWVtb0NhbGxiYWNrKGZ1bmN0aW9uIChrZXksIG9wZW4pIHtcbiAgICB2YXIgbmV3T3BlbktleXMgPSBtZXJnZWRPcGVuS2V5cy5maWx0ZXIoZnVuY3Rpb24gKGspIHtcbiAgICAgIHJldHVybiBrICE9PSBrZXk7XG4gICAgfSk7XG5cbiAgICBpZiAob3Blbikge1xuICAgICAgbmV3T3BlbktleXMucHVzaChrZXkpO1xuICAgIH0gZWxzZSBpZiAobWVyZ2VkTW9kZSAhPT0gJ2lubGluZScpIHtcbiAgICAgIC8vIFdlIG5lZWQgZmluZCBhbGwgcmVsYXRlZCBwb3B1cCB0byBjbG9zZVxuICAgICAgdmFyIHN1YlBhdGhLZXlzID0gZ2V0U3ViUGF0aEtleXMoa2V5KTtcbiAgICAgIG5ld09wZW5LZXlzID0gbmV3T3BlbktleXMuZmlsdGVyKGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIHJldHVybiAhc3ViUGF0aEtleXMuaGFzKGspO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCFzaGFsbG93RXF1YWwobWVyZ2VkT3BlbktleXMsIG5ld09wZW5LZXlzKSkge1xuICAgICAgdHJpZ2dlck9wZW5LZXlzKG5ld09wZW5LZXlzKTtcbiAgICB9XG4gIH0pO1xuICB2YXIgZ2V0SW50ZXJuYWxQb3B1cENvbnRhaW5lciA9IHVzZU1lbW9DYWxsYmFjayhnZXRQb3B1cENvbnRhaW5lcik7IC8vID09PT09PT09PT09PT09PT09PT09IEFjY2Vzc2liaWxpdHkgPT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIHRyaWdnZXJBY2Nlc3NpYmlsaXR5T3BlbiA9IGZ1bmN0aW9uIHRyaWdnZXJBY2Nlc3NpYmlsaXR5T3BlbihrZXksIG9wZW4pIHtcbiAgICB2YXIgbmV4dE9wZW4gPSBvcGVuICE9PSBudWxsICYmIG9wZW4gIT09IHZvaWQgMCA/IG9wZW4gOiAhbWVyZ2VkT3BlbktleXMuaW5jbHVkZXMoa2V5KTtcbiAgICBvbkludGVybmFsT3BlbkNoYW5nZShrZXksIG5leHRPcGVuKTtcbiAgfTtcblxuICB2YXIgb25JbnRlcm5hbEtleURvd24gPSB1c2VBY2Nlc3NpYmlsaXR5KG1lcmdlZE1vZGUsIG1lcmdlZEFjdGl2ZUtleSwgaXNSdGwsIHV1aWQsIGNvbnRhaW5lclJlZiwgZ2V0S2V5cywgZ2V0S2V5UGF0aCwgc2V0TWVyZ2VkQWN0aXZlS2V5LCB0cmlnZ2VyQWNjZXNzaWJpbGl0eU9wZW4sIG9uS2V5RG93bik7IC8vID09PT09PT09PT09PT09PT09PT09PT09PSBFZmZlY3QgPT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBzZXRNb3VudGVkKHRydWUpO1xuICB9LCBbXSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PSBSZW5kZXIgPT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vID4+Pj4+IENoaWxkcmVuXG5cbiAgdmFyIHdyYXBwZWRDaGlsZExpc3QgPSBtZXJnZWRNb2RlICE9PSAnaG9yaXpvbnRhbCcgfHwgZGlzYWJsZWRPdmVyZmxvdyA/IGNoaWxkTGlzdCA6IC8vIE5lZWQgd3JhcCBmb3Igb3ZlcmZsb3cgZHJvcGRvd24gdGhhdCBkbyBub3QgcmVzcG9uc2UgZm9yIG9wZW5cbiAgY2hpbGRMaXN0Lm1hcChmdW5jdGlvbiAoY2hpbGQsIGluZGV4KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qI19fUFVSRV9fKi9cbiAgICAgIC8vIEFsd2F5cyB3cmFwIHByb3ZpZGVyIHRvIGF2b2lkIHN1YiBub2RlIHJlLW1vdW50XG4gICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KE1lbnVDb250ZXh0UHJvdmlkZXIsIHtcbiAgICAgICAga2V5OiBjaGlsZC5rZXksXG4gICAgICAgIG92ZXJmbG93RGlzYWJsZWQ6IGluZGV4ID4gbGFzdFZpc2libGVJbmRleFxuICAgICAgfSwgY2hpbGQpXG4gICAgKTtcbiAgfSk7IC8vID4+Pj4+IENvbnRhaW5lclxuXG4gIHZhciBjb250YWluZXIgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChPdmVyZmxvdywgX2V4dGVuZHMoe1xuICAgIGlkOiBpZCxcbiAgICByZWY6IGNvbnRhaW5lclJlZixcbiAgICBwcmVmaXhDbHM6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItb3ZlcmZsb3dcIiksXG4gICAgY29tcG9uZW50OiBcInVsXCIsXG4gICAgaXRlbUNvbXBvbmVudDogTWVudUl0ZW0sXG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKHByZWZpeENscywgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1yb290XCIpLCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLVwiKS5jb25jYXQobWVyZ2VkTW9kZSksIGNsYXNzTmFtZSwgKF9jbGFzc05hbWVzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1pbmxpbmUtY29sbGFwc2VkXCIpLCBtZXJnZWRJbmxpbmVDb2xsYXBzZWQpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItcnRsXCIpLCBpc1J0bCksIF9jbGFzc05hbWVzKSksXG4gICAgZGlyOiBkaXJlY3Rpb24sXG4gICAgc3R5bGU6IHN0eWxlLFxuICAgIHJvbGU6IFwibWVudVwiLFxuICAgIHRhYkluZGV4OiB0YWJJbmRleCxcbiAgICBkYXRhOiB3cmFwcGVkQ2hpbGRMaXN0LFxuICAgIHJlbmRlclJhd0l0ZW06IGZ1bmN0aW9uIHJlbmRlclJhd0l0ZW0obm9kZSkge1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfSxcbiAgICByZW5kZXJSYXdSZXN0OiBmdW5jdGlvbiByZW5kZXJSYXdSZXN0KG9taXRJdGVtcykge1xuICAgICAgLy8gV2UgdXNlIG9yaWdpbiBsaXN0IHNpbmNlIHdyYXBwZWQgbGlzdCB1c2UgY29udGV4dCB0byBwcmV2ZW50IG9wZW5cbiAgICAgIHZhciBsZW4gPSBvbWl0SXRlbXMubGVuZ3RoO1xuICAgICAgdmFyIG9yaWdpbk9taXRJdGVtcyA9IGxlbiA/IGNoaWxkTGlzdC5zbGljZSgtbGVuKSA6IG51bGw7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3ViTWVudSwge1xuICAgICAgICBldmVudEtleTogT1ZFUkZMT1dfS0VZLFxuICAgICAgICB0aXRsZTogb3ZlcmZsb3dlZEluZGljYXRvcixcbiAgICAgICAgZGlzYWJsZWQ6IGFsbFZpc2libGUsXG4gICAgICAgIGludGVybmFsUG9wdXBDbG9zZTogbGVuID09PSAwLFxuICAgICAgICBwb3B1cENsYXNzTmFtZTogb3ZlcmZsb3dlZEluZGljYXRvclBvcHVwQ2xhc3NOYW1lXG4gICAgICB9LCBvcmlnaW5PbWl0SXRlbXMpO1xuICAgIH0sXG4gICAgbWF4Q291bnQ6IG1lcmdlZE1vZGUgIT09ICdob3Jpem9udGFsJyB8fCBkaXNhYmxlZE92ZXJmbG93ID8gT3ZlcmZsb3cuSU5WQUxJREFURSA6IE92ZXJmbG93LlJFU1BPTlNJVkUsXG4gICAgc3NyOiBcImZ1bGxcIixcbiAgICBcImRhdGEtbWVudS1saXN0XCI6IHRydWUsXG4gICAgb25WaXNpYmxlQ2hhbmdlOiBmdW5jdGlvbiBvblZpc2libGVDaGFuZ2UobmV3TGFzdEluZGV4KSB7XG4gICAgICBzZXRMYXN0VmlzaWJsZUluZGV4KG5ld0xhc3RJbmRleCk7XG4gICAgfSxcbiAgICBvbktleURvd246IG9uSW50ZXJuYWxLZXlEb3duXG4gIH0sIHJlc3RQcm9wcykpOyAvLyA+Pj4+PiBSZW5kZXJcblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSWRDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHV1aWRcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTWVudUNvbnRleHRQcm92aWRlciwge1xuICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgIG1vZGU6IG1lcmdlZE1vZGUsXG4gICAgb3BlbktleXM6IG1lcmdlZE9wZW5LZXlzLFxuICAgIHJ0bDogaXNSdGwgLy8gRGlzYWJsZWRcbiAgICAsXG4gICAgZGlzYWJsZWQ6IGRpc2FibGVkIC8vIE1vdGlvblxuICAgICxcbiAgICBtb3Rpb246IG1vdW50ZWQgPyBtb3Rpb24gOiBudWxsLFxuICAgIGRlZmF1bHRNb3Rpb25zOiBtb3VudGVkID8gZGVmYXVsdE1vdGlvbnMgOiBudWxsIC8vIEFjdGl2ZVxuICAgICxcbiAgICBhY3RpdmVLZXk6IG1lcmdlZEFjdGl2ZUtleSxcbiAgICBvbkFjdGl2ZTogb25BY3RpdmUsXG4gICAgb25JbmFjdGl2ZTogb25JbmFjdGl2ZSAvLyBTZWxlY3Rpb25cbiAgICAsXG4gICAgc2VsZWN0ZWRLZXlzOiBtZXJnZWRTZWxlY3RLZXlzIC8vIExldmVsXG4gICAgLFxuICAgIGlubGluZUluZGVudDogaW5saW5lSW5kZW50IC8vIFBvcHVwXG4gICAgLFxuICAgIHN1Yk1lbnVPcGVuRGVsYXk6IHN1Yk1lbnVPcGVuRGVsYXksXG4gICAgc3ViTWVudUNsb3NlRGVsYXk6IHN1Yk1lbnVDbG9zZURlbGF5LFxuICAgIGZvcmNlU3ViTWVudVJlbmRlcjogZm9yY2VTdWJNZW51UmVuZGVyLFxuICAgIGJ1aWx0aW5QbGFjZW1lbnRzOiBidWlsdGluUGxhY2VtZW50cyxcbiAgICB0cmlnZ2VyU3ViTWVudUFjdGlvbjogdHJpZ2dlclN1Yk1lbnVBY3Rpb24sXG4gICAgZ2V0UG9wdXBDb250YWluZXI6IGdldEludGVybmFsUG9wdXBDb250YWluZXIgLy8gSWNvblxuICAgICxcbiAgICBpdGVtSWNvbjogaXRlbUljb24sXG4gICAgZXhwYW5kSWNvbjogZXhwYW5kSWNvbiAvLyBFdmVudHNcbiAgICAsXG4gICAgb25JdGVtQ2xpY2s6IG9uSW50ZXJuYWxDbGljayxcbiAgICBvbk9wZW5DaGFuZ2U6IG9uSW50ZXJuYWxPcGVuQ2hhbmdlXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFBhdGhVc2VyQ29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiBwYXRoVXNlckNvbnRleHRcbiAgfSwgY29udGFpbmVyKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIHN0eWxlOiB7XG4gICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICB9LFxuICAgIFwiYXJpYS1oaWRkZW5cIjogdHJ1ZVxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQYXRoUmVnaXN0ZXJDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHJlZ2lzdGVyUGF0aENvbnRleHRcbiAgfSwgY2hpbGRMaXN0KSkpKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE1lbnU7IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgb21pdCBmcm9tIFwicmMtdXRpbC9lcy9vbWl0XCI7XG5pbXBvcnQgeyBwYXJzZUNoaWxkcmVuIH0gZnJvbSAnLi91dGlscy9ub2RlVXRpbCc7XG5pbXBvcnQgeyBNZW51Q29udGV4dCB9IGZyb20gJy4vY29udGV4dC9NZW51Q29udGV4dCc7XG5pbXBvcnQgeyB1c2VGdWxsUGF0aCwgdXNlTWVhc3VyZSB9IGZyb20gJy4vY29udGV4dC9QYXRoQ29udGV4dCc7XG5cbnZhciBJbnRlcm5hbE1lbnVJdGVtR3JvdXAgPSBmdW5jdGlvbiBJbnRlcm5hbE1lbnVJdGVtR3JvdXAoX3JlZikge1xuICB2YXIgY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICB0aXRsZSA9IF9yZWYudGl0bGUsXG4gICAgICBldmVudEtleSA9IF9yZWYuZXZlbnRLZXksXG4gICAgICBjaGlsZHJlbiA9IF9yZWYuY2hpbGRyZW4sXG4gICAgICByZXN0UHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgW1wiY2xhc3NOYW1lXCIsIFwidGl0bGVcIiwgXCJldmVudEtleVwiLCBcImNoaWxkcmVuXCJdKTtcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KE1lbnVDb250ZXh0KSxcbiAgICAgIHByZWZpeENscyA9IF9SZWFjdCR1c2VDb250ZXh0LnByZWZpeENscztcblxuICB2YXIgZ3JvdXBQcmVmaXhDbHMgPSBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWl0ZW0tZ3JvdXBcIik7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImxpXCIsIF9leHRlbmRzKHt9LCByZXN0UHJvcHMsIHtcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgIHJldHVybiBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0sXG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKGdyb3VwUHJlZml4Q2xzLCBjbGFzc05hbWUpXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChncm91cFByZWZpeENscywgXCItdGl0bGVcIiksXG4gICAgdGl0bGU6IHR5cGVvZiB0aXRsZSA9PT0gJ3N0cmluZycgPyB0aXRsZSA6IHVuZGVmaW5lZFxuICB9LCB0aXRsZSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwidWxcIiwge1xuICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQoZ3JvdXBQcmVmaXhDbHMsIFwiLWxpc3RcIilcbiAgfSwgY2hpbGRyZW4pKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1lbnVJdGVtR3JvdXAoX3JlZjIpIHtcbiAgdmFyIGNoaWxkcmVuID0gX3JlZjIuY2hpbGRyZW4sXG4gICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmMiwgW1wiY2hpbGRyZW5cIl0pO1xuXG4gIHZhciBjb25uZWN0ZWRLZXlQYXRoID0gdXNlRnVsbFBhdGgocHJvcHMuZXZlbnRLZXkpO1xuICB2YXIgY2hpbGRMaXN0ID0gcGFyc2VDaGlsZHJlbihjaGlsZHJlbiwgY29ubmVjdGVkS2V5UGF0aCk7XG4gIHZhciBtZWFzdXJlID0gdXNlTWVhc3VyZSgpO1xuXG4gIGlmIChtZWFzdXJlKSB7XG4gICAgcmV0dXJuIGNoaWxkTGlzdDtcbiAgfVxuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChJbnRlcm5hbE1lbnVJdGVtR3JvdXAsIG9taXQocHJvcHMsIFsnd2FybktleSddKSwgY2hpbGRMaXN0KTtcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7IE1lbnVDb250ZXh0IH0gZnJvbSAnLi9jb250ZXh0L01lbnVDb250ZXh0JztcbmltcG9ydCB7IHVzZU1lYXN1cmUgfSBmcm9tICcuL2NvbnRleHQvUGF0aENvbnRleHQnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRGl2aWRlcihfcmVmKSB7XG4gIHZhciBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZSxcbiAgICAgIHN0eWxlID0gX3JlZi5zdHlsZTtcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KE1lbnVDb250ZXh0KSxcbiAgICAgIHByZWZpeENscyA9IF9SZWFjdCR1c2VDb250ZXh0LnByZWZpeENscztcblxuICB2YXIgbWVhc3VyZSA9IHVzZU1lYXN1cmUoKTtcblxuICBpZiAobWVhc3VyZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwibGlcIiwge1xuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWl0ZW0tZGl2aWRlclwiKSwgY2xhc3NOYW1lKSxcbiAgICBzdHlsZTogc3R5bGVcbiAgfSk7XG59IiwiaW1wb3J0IE1lbnUgZnJvbSAnLi9NZW51JztcbmltcG9ydCBNZW51SXRlbSBmcm9tICcuL01lbnVJdGVtJztcbmltcG9ydCBTdWJNZW51IGZyb20gJy4vU3ViTWVudSc7XG5pbXBvcnQgTWVudUl0ZW1Hcm91cCBmcm9tICcuL01lbnVJdGVtR3JvdXAnO1xuaW1wb3J0IHsgdXNlRnVsbFBhdGggYXMgdXNlT3JpZ2luRnVsbFBhdGggfSBmcm9tICcuL2NvbnRleHQvUGF0aENvbnRleHQnO1xuaW1wb3J0IERpdmlkZXIgZnJvbSAnLi9EaXZpZGVyJztcbi8qKiBAcHJpdmF0ZSBPbmx5IHVzZWQgZm9yIGFudGQgaW50ZXJuYWwuIERvIG5vdCB1c2UgaW4geW91ciBwcm9kdWN0aW9uLiAqL1xuXG52YXIgdXNlRnVsbFBhdGggPSB1c2VPcmlnaW5GdWxsUGF0aDtcbmV4cG9ydCB7IFN1Yk1lbnUsIE1lbnVJdGVtIGFzIEl0ZW0sIE1lbnVJdGVtLCBNZW51SXRlbUdyb3VwLCBNZW51SXRlbUdyb3VwIGFzIEl0ZW1Hcm91cCwgRGl2aWRlciwgdXNlRnVsbFBhdGggfTtcbnZhciBFeHBvcnRNZW51ID0gTWVudTtcbkV4cG9ydE1lbnUuSXRlbSA9IE1lbnVJdGVtO1xuRXhwb3J0TWVudS5TdWJNZW51ID0gU3ViTWVudTtcbkV4cG9ydE1lbnUuSXRlbUdyb3VwID0gTWVudUl0ZW1Hcm91cDtcbkV4cG9ydE1lbnUuRGl2aWRlciA9IERpdmlkZXI7XG5leHBvcnQgZGVmYXVsdCBFeHBvcnRNZW51OyIsInZhciBhdXRvQWRqdXN0T3ZlcmZsb3cgPSB7XG4gIGFkanVzdFg6IDEsXG4gIGFkanVzdFk6IDFcbn07XG52YXIgdGFyZ2V0T2Zmc2V0ID0gWzAsIDBdO1xudmFyIHBsYWNlbWVudHMgPSB7XG4gIHRvcExlZnQ6IHtcbiAgICBwb2ludHM6IFsnYmwnLCAndGwnXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzAsIC00XSxcbiAgICB0YXJnZXRPZmZzZXQ6IHRhcmdldE9mZnNldFxuICB9LFxuICB0b3BDZW50ZXI6IHtcbiAgICBwb2ludHM6IFsnYmMnLCAndGMnXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzAsIC00XSxcbiAgICB0YXJnZXRPZmZzZXQ6IHRhcmdldE9mZnNldFxuICB9LFxuICB0b3BSaWdodDoge1xuICAgIHBvaW50czogWydicicsICd0ciddLFxuICAgIG92ZXJmbG93OiBhdXRvQWRqdXN0T3ZlcmZsb3csXG4gICAgb2Zmc2V0OiBbMCwgLTRdLFxuICAgIHRhcmdldE9mZnNldDogdGFyZ2V0T2Zmc2V0XG4gIH0sXG4gIGJvdHRvbUxlZnQ6IHtcbiAgICBwb2ludHM6IFsndGwnLCAnYmwnXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzAsIDRdLFxuICAgIHRhcmdldE9mZnNldDogdGFyZ2V0T2Zmc2V0XG4gIH0sXG4gIGJvdHRvbUNlbnRlcjoge1xuICAgIHBvaW50czogWyd0YycsICdiYyddLFxuICAgIG92ZXJmbG93OiBhdXRvQWRqdXN0T3ZlcmZsb3csXG4gICAgb2Zmc2V0OiBbMCwgNF0sXG4gICAgdGFyZ2V0T2Zmc2V0OiB0YXJnZXRPZmZzZXRcbiAgfSxcbiAgYm90dG9tUmlnaHQ6IHtcbiAgICBwb2ludHM6IFsndHInLCAnYnInXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzAsIDRdLFxuICAgIHRhcmdldE9mZnNldDogdGFyZ2V0T2Zmc2V0XG4gIH1cbn07XG5leHBvcnQgZGVmYXVsdCBwbGFjZW1lbnRzOyIsImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgVHJpZ2dlciBmcm9tICdyYy10cmlnZ2VyJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IFBsYWNlbWVudHMgZnJvbSAnLi9wbGFjZW1lbnRzJztcblxuZnVuY3Rpb24gRHJvcGRvd24ocHJvcHMsIHJlZikge1xuICB2YXIgX3Byb3BzJGFycm93ID0gcHJvcHMuYXJyb3csXG4gICAgICBhcnJvdyA9IF9wcm9wcyRhcnJvdyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcHJvcHMkYXJyb3csXG4gICAgICBfcHJvcHMkcHJlZml4Q2xzID0gcHJvcHMucHJlZml4Q2xzLFxuICAgICAgcHJlZml4Q2xzID0gX3Byb3BzJHByZWZpeENscyA9PT0gdm9pZCAwID8gJ3JjLWRyb3Bkb3duJyA6IF9wcm9wcyRwcmVmaXhDbHMsXG4gICAgICB0cmFuc2l0aW9uTmFtZSA9IHByb3BzLnRyYW5zaXRpb25OYW1lLFxuICAgICAgYW5pbWF0aW9uID0gcHJvcHMuYW5pbWF0aW9uLFxuICAgICAgYWxpZ24gPSBwcm9wcy5hbGlnbixcbiAgICAgIF9wcm9wcyRwbGFjZW1lbnQgPSBwcm9wcy5wbGFjZW1lbnQsXG4gICAgICBwbGFjZW1lbnQgPSBfcHJvcHMkcGxhY2VtZW50ID09PSB2b2lkIDAgPyAnYm90dG9tTGVmdCcgOiBfcHJvcHMkcGxhY2VtZW50LFxuICAgICAgX3Byb3BzJHBsYWNlbWVudHMgPSBwcm9wcy5wbGFjZW1lbnRzLFxuICAgICAgcGxhY2VtZW50cyA9IF9wcm9wcyRwbGFjZW1lbnRzID09PSB2b2lkIDAgPyBQbGFjZW1lbnRzIDogX3Byb3BzJHBsYWNlbWVudHMsXG4gICAgICBnZXRQb3B1cENvbnRhaW5lciA9IHByb3BzLmdldFBvcHVwQ29udGFpbmVyLFxuICAgICAgc2hvd0FjdGlvbiA9IHByb3BzLnNob3dBY3Rpb24sXG4gICAgICBoaWRlQWN0aW9uID0gcHJvcHMuaGlkZUFjdGlvbixcbiAgICAgIG92ZXJsYXlDbGFzc05hbWUgPSBwcm9wcy5vdmVybGF5Q2xhc3NOYW1lLFxuICAgICAgb3ZlcmxheVN0eWxlID0gcHJvcHMub3ZlcmxheVN0eWxlLFxuICAgICAgdmlzaWJsZSA9IHByb3BzLnZpc2libGUsXG4gICAgICBfcHJvcHMkdHJpZ2dlciA9IHByb3BzLnRyaWdnZXIsXG4gICAgICB0cmlnZ2VyID0gX3Byb3BzJHRyaWdnZXIgPT09IHZvaWQgMCA/IFsnaG92ZXInXSA6IF9wcm9wcyR0cmlnZ2VyLFxuICAgICAgb3RoZXJQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhwcm9wcywgW1wiYXJyb3dcIiwgXCJwcmVmaXhDbHNcIiwgXCJ0cmFuc2l0aW9uTmFtZVwiLCBcImFuaW1hdGlvblwiLCBcImFsaWduXCIsIFwicGxhY2VtZW50XCIsIFwicGxhY2VtZW50c1wiLCBcImdldFBvcHVwQ29udGFpbmVyXCIsIFwic2hvd0FjdGlvblwiLCBcImhpZGVBY3Rpb25cIiwgXCJvdmVybGF5Q2xhc3NOYW1lXCIsIFwib3ZlcmxheVN0eWxlXCIsIFwidmlzaWJsZVwiLCBcInRyaWdnZXJcIl0pO1xuXG4gIHZhciBfUmVhY3QkdXNlU3RhdGUgPSBSZWFjdC51c2VTdGF0ZSgpLFxuICAgICAgX1JlYWN0JHVzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VTdGF0ZSwgMiksXG4gICAgICB0cmlnZ2VyVmlzaWJsZSA9IF9SZWFjdCR1c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRUcmlnZ2VyVmlzaWJsZSA9IF9SZWFjdCR1c2VTdGF0ZTJbMV07XG5cbiAgdmFyIG1lcmdlZFZpc2libGUgPSAndmlzaWJsZScgaW4gcHJvcHMgPyB2aXNpYmxlIDogdHJpZ2dlclZpc2libGU7XG4gIHZhciB0cmlnZ2VyUmVmID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICBSZWFjdC51c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0cmlnZ2VyUmVmLmN1cnJlbnQ7XG4gIH0pO1xuXG4gIHZhciBnZXRPdmVybGF5RWxlbWVudCA9IGZ1bmN0aW9uIGdldE92ZXJsYXlFbGVtZW50KCkge1xuICAgIHZhciBvdmVybGF5ID0gcHJvcHMub3ZlcmxheTtcbiAgICB2YXIgb3ZlcmxheUVsZW1lbnQ7XG5cbiAgICBpZiAodHlwZW9mIG92ZXJsYXkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG92ZXJsYXlFbGVtZW50ID0gb3ZlcmxheSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvdmVybGF5RWxlbWVudCA9IG92ZXJsYXk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG92ZXJsYXlFbGVtZW50O1xuICB9O1xuXG4gIHZhciBvbkNsaWNrID0gZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgdmFyIG9uT3ZlcmxheUNsaWNrID0gcHJvcHMub25PdmVybGF5Q2xpY2s7XG4gICAgdmFyIG92ZXJsYXlQcm9wcyA9IGdldE92ZXJsYXlFbGVtZW50KCkucHJvcHM7XG4gICAgc2V0VHJpZ2dlclZpc2libGUoZmFsc2UpO1xuXG4gICAgaWYgKG9uT3ZlcmxheUNsaWNrKSB7XG4gICAgICBvbk92ZXJsYXlDbGljayhlKTtcbiAgICB9XG5cbiAgICBpZiAob3ZlcmxheVByb3BzLm9uQ2xpY2spIHtcbiAgICAgIG92ZXJsYXlQcm9wcy5vbkNsaWNrKGUpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgb25WaXNpYmxlQ2hhbmdlID0gZnVuY3Rpb24gb25WaXNpYmxlQ2hhbmdlKHZpc2libGUpIHtcbiAgICB2YXIgb25WaXNpYmxlQ2hhbmdlID0gcHJvcHMub25WaXNpYmxlQ2hhbmdlO1xuICAgIHNldFRyaWdnZXJWaXNpYmxlKHZpc2libGUpO1xuXG4gICAgaWYgKHR5cGVvZiBvblZpc2libGVDaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9uVmlzaWJsZUNoYW5nZSh2aXNpYmxlKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGdldE1lbnVFbGVtZW50ID0gZnVuY3Rpb24gZ2V0TWVudUVsZW1lbnQoKSB7XG4gICAgdmFyIG92ZXJsYXlFbGVtZW50ID0gZ2V0T3ZlcmxheUVsZW1lbnQoKTtcbiAgICB2YXIgZXh0cmFPdmVybGF5UHJvcHMgPSB7XG4gICAgICBwcmVmaXhDbHM6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItbWVudVwiKSxcbiAgICAgIG9uQ2xpY2s6IG9uQ2xpY2tcbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiBvdmVybGF5RWxlbWVudC50eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgZGVsZXRlIGV4dHJhT3ZlcmxheVByb3BzLnByZWZpeENscztcbiAgICB9XG5cbiAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgYXJyb3cgJiYgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItYXJyb3dcIilcbiAgICB9KSwgUmVhY3QuY2xvbmVFbGVtZW50KG92ZXJsYXlFbGVtZW50LCBleHRyYU92ZXJsYXlQcm9wcykpO1xuICB9O1xuXG4gIHZhciBnZXRNZW51RWxlbWVudE9yTGFtYmRhID0gZnVuY3Rpb24gZ2V0TWVudUVsZW1lbnRPckxhbWJkYSgpIHtcbiAgICB2YXIgb3ZlcmxheSA9IHByb3BzLm92ZXJsYXk7XG5cbiAgICBpZiAodHlwZW9mIG92ZXJsYXkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBnZXRNZW51RWxlbWVudDtcbiAgICB9XG5cbiAgICByZXR1cm4gZ2V0TWVudUVsZW1lbnQoKTtcbiAgfTtcblxuICB2YXIgZ2V0TWluT3ZlcmxheVdpZHRoTWF0Y2hUcmlnZ2VyID0gZnVuY3Rpb24gZ2V0TWluT3ZlcmxheVdpZHRoTWF0Y2hUcmlnZ2VyKCkge1xuICAgIHZhciBtaW5PdmVybGF5V2lkdGhNYXRjaFRyaWdnZXIgPSBwcm9wcy5taW5PdmVybGF5V2lkdGhNYXRjaFRyaWdnZXIsXG4gICAgICAgIGFsaWduUG9pbnQgPSBwcm9wcy5hbGlnblBvaW50O1xuXG4gICAgaWYgKCdtaW5PdmVybGF5V2lkdGhNYXRjaFRyaWdnZXInIGluIHByb3BzKSB7XG4gICAgICByZXR1cm4gbWluT3ZlcmxheVdpZHRoTWF0Y2hUcmlnZ2VyO1xuICAgIH1cblxuICAgIHJldHVybiAhYWxpZ25Qb2ludDtcbiAgfTtcblxuICB2YXIgZ2V0T3BlbkNsYXNzTmFtZSA9IGZ1bmN0aW9uIGdldE9wZW5DbGFzc05hbWUoKSB7XG4gICAgdmFyIG9wZW5DbGFzc05hbWUgPSBwcm9wcy5vcGVuQ2xhc3NOYW1lO1xuXG4gICAgaWYgKG9wZW5DbGFzc05hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIG9wZW5DbGFzc05hbWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItb3BlblwiKTtcbiAgfTtcblxuICB2YXIgcmVuZGVyQ2hpbGRyZW4gPSBmdW5jdGlvbiByZW5kZXJDaGlsZHJlbigpIHtcbiAgICB2YXIgY2hpbGRyZW4gPSBwcm9wcy5jaGlsZHJlbjtcbiAgICB2YXIgY2hpbGRyZW5Qcm9wcyA9IGNoaWxkcmVuLnByb3BzID8gY2hpbGRyZW4ucHJvcHMgOiB7fTtcbiAgICB2YXIgY2hpbGRDbGFzc05hbWUgPSBjbGFzc05hbWVzKGNoaWxkcmVuUHJvcHMuY2xhc3NOYW1lLCBnZXRPcGVuQ2xhc3NOYW1lKCkpO1xuICAgIHJldHVybiB0cmlnZ2VyVmlzaWJsZSAmJiBjaGlsZHJlbiA/IFJlYWN0LmNsb25lRWxlbWVudChjaGlsZHJlbiwge1xuICAgICAgY2xhc3NOYW1lOiBjaGlsZENsYXNzTmFtZVxuICAgIH0pIDogY2hpbGRyZW47XG4gIH07XG5cbiAgdmFyIHRyaWdnZXJIaWRlQWN0aW9uID0gaGlkZUFjdGlvbjtcblxuICBpZiAoIXRyaWdnZXJIaWRlQWN0aW9uICYmIHRyaWdnZXIuaW5kZXhPZignY29udGV4dE1lbnUnKSAhPT0gLTEpIHtcbiAgICB0cmlnZ2VySGlkZUFjdGlvbiA9IFsnY2xpY2snXTtcbiAgfVxuXG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFRyaWdnZXIsIE9iamVjdC5hc3NpZ24oe30sIG90aGVyUHJvcHMsIHtcbiAgICBwcmVmaXhDbHM6IHByZWZpeENscyxcbiAgICByZWY6IHRyaWdnZXJSZWYsXG4gICAgcG9wdXBDbGFzc05hbWU6IGNsYXNzTmFtZXMob3ZlcmxheUNsYXNzTmFtZSwgX2RlZmluZVByb3BlcnR5KHt9LCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXNob3ctYXJyb3dcIiksIGFycm93KSksXG4gICAgcG9wdXBTdHlsZTogb3ZlcmxheVN0eWxlLFxuICAgIGJ1aWx0aW5QbGFjZW1lbnRzOiBwbGFjZW1lbnRzLFxuICAgIGFjdGlvbjogdHJpZ2dlcixcbiAgICBzaG93QWN0aW9uOiBzaG93QWN0aW9uLFxuICAgIGhpZGVBY3Rpb246IHRyaWdnZXJIaWRlQWN0aW9uIHx8IFtdLFxuICAgIHBvcHVwUGxhY2VtZW50OiBwbGFjZW1lbnQsXG4gICAgcG9wdXBBbGlnbjogYWxpZ24sXG4gICAgcG9wdXBUcmFuc2l0aW9uTmFtZTogdHJhbnNpdGlvbk5hbWUsXG4gICAgcG9wdXBBbmltYXRpb246IGFuaW1hdGlvbixcbiAgICBwb3B1cFZpc2libGU6IG1lcmdlZFZpc2libGUsXG4gICAgc3RyZXRjaDogZ2V0TWluT3ZlcmxheVdpZHRoTWF0Y2hUcmlnZ2VyKCkgPyAnbWluV2lkdGgnIDogJycsXG4gICAgcG9wdXA6IGdldE1lbnVFbGVtZW50T3JMYW1iZGEoKSxcbiAgICBvblBvcHVwVmlzaWJsZUNoYW5nZTogb25WaXNpYmxlQ2hhbmdlLFxuICAgIGdldFBvcHVwQ29udGFpbmVyOiBnZXRQb3B1cENvbnRhaW5lclxuICB9KSwgcmVuZGVyQ2hpbGRyZW4oKSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJlYWN0LmZvcndhcmRSZWYoRHJvcGRvd24pOyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuZnVuY3Rpb24gQWRkQnV0dG9uKF9yZWYsIHJlZikge1xuICB2YXIgcHJlZml4Q2xzID0gX3JlZi5wcmVmaXhDbHMsXG4gICAgICBlZGl0YWJsZSA9IF9yZWYuZWRpdGFibGUsXG4gICAgICBsb2NhbGUgPSBfcmVmLmxvY2FsZSxcbiAgICAgIHN0eWxlID0gX3JlZi5zdHlsZTtcblxuICBpZiAoIWVkaXRhYmxlIHx8IGVkaXRhYmxlLnNob3dBZGQgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgIHJlZjogcmVmLFxuICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLW5hdi1hZGRcIiksXG4gICAgc3R5bGU6IHN0eWxlLFxuICAgIFwiYXJpYS1sYWJlbFwiOiAobG9jYWxlID09PSBudWxsIHx8IGxvY2FsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbG9jYWxlLmFkZEFyaWFMYWJlbCkgfHwgJ0FkZCB0YWInLFxuICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHtcbiAgICAgIGVkaXRhYmxlLm9uRWRpdCgnYWRkJywge1xuICAgICAgICBldmVudDogZXZlbnRcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgZWRpdGFibGUuYWRkSWNvbiB8fCAnKycpO1xufVxuXG5leHBvcnQgZGVmYXVsdCAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihBZGRCdXR0b24pOyIsImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBLZXlDb2RlIGZyb20gXCJyYy11dGlsL2VzL0tleUNvZGVcIjtcbmltcG9ydCBNZW51LCB7IE1lbnVJdGVtIH0gZnJvbSAncmMtbWVudSc7XG5pbXBvcnQgRHJvcGRvd24gZnJvbSAncmMtZHJvcGRvd24nO1xuaW1wb3J0IEFkZEJ1dHRvbiBmcm9tICcuL0FkZEJ1dHRvbic7XG5cbmZ1bmN0aW9uIE9wZXJhdGlvbk5vZGUoX3JlZiwgcmVmKSB7XG4gIHZhciBwcmVmaXhDbHMgPSBfcmVmLnByZWZpeENscyxcbiAgICAgIGlkID0gX3JlZi5pZCxcbiAgICAgIHRhYnMgPSBfcmVmLnRhYnMsXG4gICAgICBsb2NhbGUgPSBfcmVmLmxvY2FsZSxcbiAgICAgIG1vYmlsZSA9IF9yZWYubW9iaWxlLFxuICAgICAgX3JlZiRtb3JlSWNvbiA9IF9yZWYubW9yZUljb24sXG4gICAgICBtb3JlSWNvbiA9IF9yZWYkbW9yZUljb24gPT09IHZvaWQgMCA/ICdNb3JlJyA6IF9yZWYkbW9yZUljb24sXG4gICAgICBtb3JlVHJhbnNpdGlvbk5hbWUgPSBfcmVmLm1vcmVUcmFuc2l0aW9uTmFtZSxcbiAgICAgIHN0eWxlID0gX3JlZi5zdHlsZSxcbiAgICAgIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgZWRpdGFibGUgPSBfcmVmLmVkaXRhYmxlLFxuICAgICAgdGFiQmFyR3V0dGVyID0gX3JlZi50YWJCYXJHdXR0ZXIsXG4gICAgICBydGwgPSBfcmVmLnJ0bCxcbiAgICAgIG9uVGFiQ2xpY2sgPSBfcmVmLm9uVGFiQ2xpY2s7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09IERyb3Bkb3duID09PT09PT09PT09PT09PT09PT09PT09PVxuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoZmFsc2UpLFxuICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgICBvcGVuID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNldE9wZW4gPSBfdXNlU3RhdGUyWzFdO1xuXG4gIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUobnVsbCksXG4gICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksXG4gICAgICBzZWxlY3RlZEtleSA9IF91c2VTdGF0ZTRbMF0sXG4gICAgICBzZXRTZWxlY3RlZEtleSA9IF91c2VTdGF0ZTRbMV07XG5cbiAgdmFyIHBvcHVwSWQgPSBcIlwiLmNvbmNhdChpZCwgXCItbW9yZS1wb3B1cFwiKTtcbiAgdmFyIGRyb3Bkb3duUHJlZml4ID0gXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1kcm9wZG93blwiKTtcbiAgdmFyIHNlbGVjdGVkSXRlbUlkID0gc2VsZWN0ZWRLZXkgIT09IG51bGwgPyBcIlwiLmNvbmNhdChwb3B1cElkLCBcIi1cIikuY29uY2F0KHNlbGVjdGVkS2V5KSA6IG51bGw7XG4gIHZhciBkcm9wZG93bkFyaWFMYWJlbCA9IGxvY2FsZSA9PT0gbnVsbCB8fCBsb2NhbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxvY2FsZS5kcm9wZG93bkFyaWFMYWJlbDtcbiAgdmFyIG1lbnUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChNZW51LCB7XG4gICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhfcmVmMikge1xuICAgICAgdmFyIGtleSA9IF9yZWYyLmtleSxcbiAgICAgICAgICBkb21FdmVudCA9IF9yZWYyLmRvbUV2ZW50O1xuICAgICAgb25UYWJDbGljayhrZXksIGRvbUV2ZW50KTtcbiAgICAgIHNldE9wZW4oZmFsc2UpO1xuICAgIH0sXG4gICAgaWQ6IHBvcHVwSWQsXG4gICAgdGFiSW5kZXg6IC0xLFxuICAgIHJvbGU6IFwibGlzdGJveFwiLFxuICAgIFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCI6IHNlbGVjdGVkSXRlbUlkLFxuICAgIHNlbGVjdGVkS2V5czogW3NlbGVjdGVkS2V5XSxcbiAgICBcImFyaWEtbGFiZWxcIjogZHJvcGRvd25BcmlhTGFiZWwgIT09IHVuZGVmaW5lZCA/IGRyb3Bkb3duQXJpYUxhYmVsIDogJ2V4cGFuZGVkIGRyb3Bkb3duJ1xuICB9LCB0YWJzLm1hcChmdW5jdGlvbiAodGFiKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE1lbnVJdGVtLCB7XG4gICAgICBrZXk6IHRhYi5rZXksXG4gICAgICBpZDogXCJcIi5jb25jYXQocG9wdXBJZCwgXCItXCIpLmNvbmNhdCh0YWIua2V5KSxcbiAgICAgIHJvbGU6IFwib3B0aW9uXCIsXG4gICAgICBcImFyaWEtY29udHJvbHNcIjogaWQgJiYgXCJcIi5jb25jYXQoaWQsIFwiLXBhbmVsLVwiKS5jb25jYXQodGFiLmtleSksXG4gICAgICBkaXNhYmxlZDogdGFiLmRpc2FibGVkXG4gICAgfSwgdGFiLnRhYik7XG4gIH0pKTtcblxuICBmdW5jdGlvbiBzZWxlY3RPZmZzZXQob2Zmc2V0KSB7XG4gICAgdmFyIGVuYWJsZWRUYWJzID0gdGFicy5maWx0ZXIoZnVuY3Rpb24gKHRhYikge1xuICAgICAgcmV0dXJuICF0YWIuZGlzYWJsZWQ7XG4gICAgfSk7XG4gICAgdmFyIHNlbGVjdGVkSW5kZXggPSBlbmFibGVkVGFicy5maW5kSW5kZXgoZnVuY3Rpb24gKHRhYikge1xuICAgICAgcmV0dXJuIHRhYi5rZXkgPT09IHNlbGVjdGVkS2V5O1xuICAgIH0pIHx8IDA7XG4gICAgdmFyIGxlbiA9IGVuYWJsZWRUYWJzLmxlbmd0aDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgIHNlbGVjdGVkSW5kZXggPSAoc2VsZWN0ZWRJbmRleCArIG9mZnNldCArIGxlbikgJSBsZW47XG4gICAgICB2YXIgdGFiID0gZW5hYmxlZFRhYnNbc2VsZWN0ZWRJbmRleF07XG5cbiAgICAgIGlmICghdGFiLmRpc2FibGVkKSB7XG4gICAgICAgIHNldFNlbGVjdGVkS2V5KHRhYi5rZXkpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25LZXlEb3duKGUpIHtcbiAgICB2YXIgd2hpY2ggPSBlLndoaWNoO1xuXG4gICAgaWYgKCFvcGVuKSB7XG4gICAgICBpZiAoW0tleUNvZGUuRE9XTiwgS2V5Q29kZS5TUEFDRSwgS2V5Q29kZS5FTlRFUl0uaW5jbHVkZXMod2hpY2gpKSB7XG4gICAgICAgIHNldE9wZW4odHJ1ZSk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN3aXRjaCAod2hpY2gpIHtcbiAgICAgIGNhc2UgS2V5Q29kZS5VUDpcbiAgICAgICAgc2VsZWN0T2Zmc2V0KC0xKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBLZXlDb2RlLkRPV046XG4gICAgICAgIHNlbGVjdE9mZnNldCgxKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBLZXlDb2RlLkVTQzpcbiAgICAgICAgc2V0T3BlbihmYWxzZSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIEtleUNvZGUuU1BBQ0U6XG4gICAgICBjYXNlIEtleUNvZGUuRU5URVI6XG4gICAgICAgIGlmIChzZWxlY3RlZEtleSAhPT0gbnVsbCkgb25UYWJDbGljayhzZWxlY3RlZEtleSwgZSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09IEVmZmVjdCA9PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIC8vIFdlIHVzZSBxdWVyeSBlbGVtZW50IGhlcmUgdG8gYXZvaWQgUmVhY3Qgc3RyaWN0IHdhcm5pbmdcbiAgICB2YXIgZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0ZWRJdGVtSWQpO1xuXG4gICAgaWYgKGVsZSAmJiBlbGUuc2Nyb2xsSW50b1ZpZXcpIHtcbiAgICAgIGVsZS5zY3JvbGxJbnRvVmlldyhmYWxzZSk7XG4gICAgfVxuICB9LCBbc2VsZWN0ZWRLZXldKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIW9wZW4pIHtcbiAgICAgIHNldFNlbGVjdGVkS2V5KG51bGwpO1xuICAgIH1cbiAgfSwgW29wZW5dKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PSBSZW5kZXIgPT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBtb3JlU3R5bGUgPSBfZGVmaW5lUHJvcGVydHkoe30sIHJ0bCA/ICdtYXJnaW5SaWdodCcgOiAnbWFyZ2luTGVmdCcsIHRhYkJhckd1dHRlcik7XG5cbiAgaWYgKCF0YWJzLmxlbmd0aCkge1xuICAgIG1vcmVTdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgbW9yZVN0eWxlLm9yZGVyID0gMTtcbiAgfVxuXG4gIHZhciBvdmVybGF5Q2xhc3NOYW1lID0gY2xhc3NOYW1lcyhfZGVmaW5lUHJvcGVydHkoe30sIFwiXCIuY29uY2F0KGRyb3Bkb3duUHJlZml4LCBcIi1ydGxcIiksIHJ0bCkpO1xuICB2YXIgbW9yZU5vZGUgPSBtb2JpbGUgPyBudWxsIDogLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRHJvcGRvd24sIHtcbiAgICBwcmVmaXhDbHM6IGRyb3Bkb3duUHJlZml4LFxuICAgIG92ZXJsYXk6IG1lbnUsXG4gICAgdHJpZ2dlcjogWydob3ZlciddLFxuICAgIHZpc2libGU6IG9wZW4sXG4gICAgdHJhbnNpdGlvbk5hbWU6IG1vcmVUcmFuc2l0aW9uTmFtZSxcbiAgICBvblZpc2libGVDaGFuZ2U6IHNldE9wZW4sXG4gICAgb3ZlcmxheUNsYXNzTmFtZTogb3ZlcmxheUNsYXNzTmFtZSxcbiAgICBtb3VzZUVudGVyRGVsYXk6IDAuMSxcbiAgICBtb3VzZUxlYXZlRGVsYXk6IDAuMVxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XG4gICAgdHlwZTogXCJidXR0b25cIixcbiAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItbmF2LW1vcmVcIiksXG4gICAgc3R5bGU6IG1vcmVTdHlsZSxcbiAgICB0YWJJbmRleDogLTEsXG4gICAgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIixcbiAgICBcImFyaWEtaGFzcG9wdXBcIjogXCJsaXN0Ym94XCIsXG4gICAgXCJhcmlhLWNvbnRyb2xzXCI6IHBvcHVwSWQsXG4gICAgaWQ6IFwiXCIuY29uY2F0KGlkLCBcIi1tb3JlXCIpLFxuICAgIFwiYXJpYS1leHBhbmRlZFwiOiBvcGVuLFxuICAgIG9uS2V5RG93bjogb25LZXlEb3duXG4gIH0sIG1vcmVJY29uKSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiXCIuY29uY2F0KHByZWZpeENscywgXCItbmF2LW9wZXJhdGlvbnNcIiksIGNsYXNzTmFtZSksXG4gICAgc3R5bGU6IHN0eWxlLFxuICAgIHJlZjogcmVmXG4gIH0sIG1vcmVOb2RlLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChBZGRCdXR0b24sIHtcbiAgICBwcmVmaXhDbHM6IHByZWZpeENscyxcbiAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICBlZGl0YWJsZTogZWRpdGFibGVcbiAgfSkpO1xufVxuXG5leHBvcnQgZGVmYXVsdCAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihPcGVyYXRpb25Ob2RlKTsiLCJpbXBvcnQgeyBjcmVhdGVDb250ZXh0IH0gZnJvbSAncmVhY3QnO1xuZXhwb3J0IGRlZmF1bHQgLyojX19QVVJFX18qL2NyZWF0ZUNvbnRleHQobnVsbCk7IiwiaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xudmFyIE1JTl9TV0lQRV9ESVNUQU5DRSA9IDAuMTtcbnZhciBTVE9QX1NXSVBFX0RJU1RBTkNFID0gMC4wMTtcbnZhciBSRUZSRVNIX0lOVEVSVkFMID0gMjA7XG52YXIgU1BFRURfT0ZGX01VTFRJUExFID0gTWF0aC5wb3coMC45OTUsIFJFRlJFU0hfSU5URVJWQUwpOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gSG9vayA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlVG91Y2hNb3ZlKHJlZiwgb25PZmZzZXQpIHtcbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKCksXG4gICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIHRvdWNoUG9zaXRpb24gPSBfdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0VG91Y2hQb3NpdGlvbiA9IF91c2VTdGF0ZTJbMV07XG5cbiAgdmFyIF91c2VTdGF0ZTMgPSB1c2VTdGF0ZSgwKSxcbiAgICAgIF91c2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUzLCAyKSxcbiAgICAgIGxhc3RUaW1lc3RhbXAgPSBfdXNlU3RhdGU0WzBdLFxuICAgICAgc2V0TGFzdFRpbWVzdGFtcCA9IF91c2VTdGF0ZTRbMV07XG5cbiAgdmFyIF91c2VTdGF0ZTUgPSB1c2VTdGF0ZSgwKSxcbiAgICAgIF91c2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU1LCAyKSxcbiAgICAgIGxhc3RUaW1lRGlmZiA9IF91c2VTdGF0ZTZbMF0sXG4gICAgICBzZXRMYXN0VGltZURpZmYgPSBfdXNlU3RhdGU2WzFdO1xuXG4gIHZhciBfdXNlU3RhdGU3ID0gdXNlU3RhdGUoKSxcbiAgICAgIF91c2VTdGF0ZTggPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU3LCAyKSxcbiAgICAgIGxhc3RPZmZzZXQgPSBfdXNlU3RhdGU4WzBdLFxuICAgICAgc2V0TGFzdE9mZnNldCA9IF91c2VTdGF0ZThbMV07XG5cbiAgdmFyIG1vdGlvblJlZiA9IHVzZVJlZigpOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09IEV2ZW50cyA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vID4+PiBUb3VjaCBldmVudHNcblxuICBmdW5jdGlvbiBvblRvdWNoU3RhcnQoZSkge1xuICAgIHZhciBfZSR0b3VjaGVzJCA9IGUudG91Y2hlc1swXSxcbiAgICAgICAgc2NyZWVuWCA9IF9lJHRvdWNoZXMkLnNjcmVlblgsXG4gICAgICAgIHNjcmVlblkgPSBfZSR0b3VjaGVzJC5zY3JlZW5ZO1xuICAgIHNldFRvdWNoUG9zaXRpb24oe1xuICAgICAgeDogc2NyZWVuWCxcbiAgICAgIHk6IHNjcmVlbllcbiAgICB9KTtcbiAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChtb3Rpb25SZWYuY3VycmVudCk7XG4gIH1cblxuICBmdW5jdGlvbiBvblRvdWNoTW92ZShlKSB7XG4gICAgaWYgKCF0b3VjaFBvc2l0aW9uKSByZXR1cm47XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBfZSR0b3VjaGVzJDIgPSBlLnRvdWNoZXNbMF0sXG4gICAgICAgIHNjcmVlblggPSBfZSR0b3VjaGVzJDIuc2NyZWVuWCxcbiAgICAgICAgc2NyZWVuWSA9IF9lJHRvdWNoZXMkMi5zY3JlZW5ZO1xuICAgIHNldFRvdWNoUG9zaXRpb24oe1xuICAgICAgeDogc2NyZWVuWCxcbiAgICAgIHk6IHNjcmVlbllcbiAgICB9KTtcbiAgICB2YXIgb2Zmc2V0WCA9IHNjcmVlblggLSB0b3VjaFBvc2l0aW9uLng7XG4gICAgdmFyIG9mZnNldFkgPSBzY3JlZW5ZIC0gdG91Y2hQb3NpdGlvbi55O1xuICAgIG9uT2Zmc2V0KG9mZnNldFgsIG9mZnNldFkpO1xuICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuICAgIHNldExhc3RUaW1lc3RhbXAobm93KTtcbiAgICBzZXRMYXN0VGltZURpZmYobm93IC0gbGFzdFRpbWVzdGFtcCk7XG4gICAgc2V0TGFzdE9mZnNldCh7XG4gICAgICB4OiBvZmZzZXRYLFxuICAgICAgeTogb2Zmc2V0WVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Ub3VjaEVuZCgpIHtcbiAgICBpZiAoIXRvdWNoUG9zaXRpb24pIHJldHVybjtcbiAgICBzZXRUb3VjaFBvc2l0aW9uKG51bGwpO1xuICAgIHNldExhc3RPZmZzZXQobnVsbCk7IC8vIFN3aXBlIGlmIG5lZWRlZFxuXG4gICAgaWYgKGxhc3RPZmZzZXQpIHtcbiAgICAgIHZhciBkaXN0YW5jZVggPSBsYXN0T2Zmc2V0LnggLyBsYXN0VGltZURpZmY7XG4gICAgICB2YXIgZGlzdGFuY2VZID0gbGFzdE9mZnNldC55IC8gbGFzdFRpbWVEaWZmO1xuICAgICAgdmFyIGFic1ggPSBNYXRoLmFicyhkaXN0YW5jZVgpO1xuICAgICAgdmFyIGFic1kgPSBNYXRoLmFicyhkaXN0YW5jZVkpOyAvLyBTa2lwIHN3aXBlIGlmIGxvdyBkaXN0YW5jZVxuXG4gICAgICBpZiAoTWF0aC5tYXgoYWJzWCwgYWJzWSkgPCBNSU5fU1dJUEVfRElTVEFOQ0UpIHJldHVybjtcbiAgICAgIHZhciBjdXJyZW50WCA9IGRpc3RhbmNlWDtcbiAgICAgIHZhciBjdXJyZW50WSA9IGRpc3RhbmNlWTtcbiAgICAgIG1vdGlvblJlZi5jdXJyZW50ID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKE1hdGguYWJzKGN1cnJlbnRYKSA8IFNUT1BfU1dJUEVfRElTVEFOQ0UgJiYgTWF0aC5hYnMoY3VycmVudFkpIDwgU1RPUF9TV0lQRV9ESVNUQU5DRSkge1xuICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKG1vdGlvblJlZi5jdXJyZW50KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjdXJyZW50WCAqPSBTUEVFRF9PRkZfTVVMVElQTEU7XG4gICAgICAgIGN1cnJlbnRZICo9IFNQRUVEX09GRl9NVUxUSVBMRTtcbiAgICAgICAgb25PZmZzZXQoY3VycmVudFggKiBSRUZSRVNIX0lOVEVSVkFMLCBjdXJyZW50WSAqIFJFRlJFU0hfSU5URVJWQUwpO1xuICAgICAgfSwgUkVGUkVTSF9JTlRFUlZBTCk7XG4gICAgfVxuICB9IC8vID4+PiBXaGVlbCBldmVudFxuXG5cbiAgdmFyIGxhc3RXaGVlbERpcmVjdGlvblJlZiA9IHVzZVJlZigpO1xuXG4gIGZ1bmN0aW9uIG9uV2hlZWwoZSkge1xuICAgIHZhciBkZWx0YVggPSBlLmRlbHRhWCxcbiAgICAgICAgZGVsdGFZID0gZS5kZWx0YVk7IC8vIENvbnZlcnQgYm90aCB0byB4ICYgeSBzaW5jZSB3aGVlbCBvbmx5IGhhcHBlbmVkIG9uIFBDXG5cbiAgICB2YXIgbWl4ZWQgPSAwO1xuICAgIHZhciBhYnNYID0gTWF0aC5hYnMoZGVsdGFYKTtcbiAgICB2YXIgYWJzWSA9IE1hdGguYWJzKGRlbHRhWSk7XG5cbiAgICBpZiAoYWJzWCA9PT0gYWJzWSkge1xuICAgICAgbWl4ZWQgPSBsYXN0V2hlZWxEaXJlY3Rpb25SZWYuY3VycmVudCA9PT0gJ3gnID8gZGVsdGFYIDogZGVsdGFZO1xuICAgIH0gZWxzZSBpZiAoYWJzWCA+IGFic1kpIHtcbiAgICAgIG1peGVkID0gZGVsdGFYO1xuICAgICAgbGFzdFdoZWVsRGlyZWN0aW9uUmVmLmN1cnJlbnQgPSAneCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1peGVkID0gZGVsdGFZO1xuICAgICAgbGFzdFdoZWVsRGlyZWN0aW9uUmVmLmN1cnJlbnQgPSAneSc7XG4gICAgfVxuXG4gICAgaWYgKG9uT2Zmc2V0KC1taXhlZCwgLW1peGVkKSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfSAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09IEVmZmVjdCA9PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB2YXIgdG91Y2hFdmVudHNSZWYgPSB1c2VSZWYobnVsbCk7XG4gIHRvdWNoRXZlbnRzUmVmLmN1cnJlbnQgPSB7XG4gICAgb25Ub3VjaFN0YXJ0OiBvblRvdWNoU3RhcnQsXG4gICAgb25Ub3VjaE1vdmU6IG9uVG91Y2hNb3ZlLFxuICAgIG9uVG91Y2hFbmQ6IG9uVG91Y2hFbmQsXG4gICAgb25XaGVlbDogb25XaGVlbFxuICB9O1xuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIG9uUHJveHlUb3VjaFN0YXJ0KGUpIHtcbiAgICAgIHRvdWNoRXZlbnRzUmVmLmN1cnJlbnQub25Ub3VjaFN0YXJ0KGUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uUHJveHlUb3VjaE1vdmUoZSkge1xuICAgICAgdG91Y2hFdmVudHNSZWYuY3VycmVudC5vblRvdWNoTW92ZShlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblByb3h5VG91Y2hFbmQoZSkge1xuICAgICAgdG91Y2hFdmVudHNSZWYuY3VycmVudC5vblRvdWNoRW5kKGUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uUHJveHlXaGVlbChlKSB7XG4gICAgICB0b3VjaEV2ZW50c1JlZi5jdXJyZW50Lm9uV2hlZWwoZSk7XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgb25Qcm94eVRvdWNoTW92ZSwge1xuICAgICAgcGFzc2l2ZTogZmFsc2VcbiAgICB9KTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uUHJveHlUb3VjaEVuZCwge1xuICAgICAgcGFzc2l2ZTogZmFsc2VcbiAgICB9KTsgLy8gTm8gbmVlZCB0byBjbGVhbiB1cCBzaW5jZSBlbGVtZW50IHJlbW92ZWRcblxuICAgIHJlZi5jdXJyZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvblByb3h5VG91Y2hTdGFydCwge1xuICAgICAgcGFzc2l2ZTogZmFsc2VcbiAgICB9KTtcbiAgICByZWYuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIG9uUHJveHlXaGVlbCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uUHJveHlUb3VjaE1vdmUpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblByb3h5VG91Y2hFbmQpO1xuICAgIH07XG4gIH0sIFtdKTtcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VSZWZzKCkge1xuICB2YXIgY2FjaGVSZWZzID0gdXNlUmVmKG5ldyBNYXAoKSk7XG5cbiAgZnVuY3Rpb24gZ2V0UmVmKGtleSkge1xuICAgIGlmICghY2FjaGVSZWZzLmN1cnJlbnQuaGFzKGtleSkpIHtcbiAgICAgIGNhY2hlUmVmcy5jdXJyZW50LnNldChrZXksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVSZWYoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhY2hlUmVmcy5jdXJyZW50LmdldChrZXkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlUmVmKGtleSkge1xuICAgIGNhY2hlUmVmcy5jdXJyZW50LmRlbGV0ZShrZXkpO1xuICB9XG5cbiAgcmV0dXJuIFtnZXRSZWYsIHJlbW92ZVJlZl07XG59IiwiaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VTeW5jU3RhdGUoZGVmYXVsdFN0YXRlLCBvbkNoYW5nZSkge1xuICB2YXIgc3RhdGVSZWYgPSBSZWFjdC51c2VSZWYoZGVmYXVsdFN0YXRlKTtcblxuICB2YXIgX1JlYWN0JHVzZVN0YXRlID0gUmVhY3QudXNlU3RhdGUoe30pLFxuICAgICAgX1JlYWN0JHVzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VTdGF0ZSwgMiksXG4gICAgICBmb3JjZVVwZGF0ZSA9IF9SZWFjdCR1c2VTdGF0ZTJbMV07XG5cbiAgZnVuY3Rpb24gc2V0U3RhdGUodXBkYXRlcikge1xuICAgIHZhciBuZXdWYWx1ZSA9IHR5cGVvZiB1cGRhdGVyID09PSAnZnVuY3Rpb24nID8gdXBkYXRlcihzdGF0ZVJlZi5jdXJyZW50KSA6IHVwZGF0ZXI7XG5cbiAgICBpZiAobmV3VmFsdWUgIT09IHN0YXRlUmVmLmN1cnJlbnQpIHtcbiAgICAgIG9uQ2hhbmdlKG5ld1ZhbHVlLCBzdGF0ZVJlZi5jdXJyZW50KTtcbiAgICB9XG5cbiAgICBzdGF0ZVJlZi5jdXJyZW50ID0gbmV3VmFsdWU7XG4gICAgZm9yY2VVcGRhdGUoe30pO1xuICB9XG5cbiAgcmV0dXJuIFtzdGF0ZVJlZi5jdXJyZW50LCBzZXRTdGF0ZV07XG59IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXlcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCBfdHlwZW9mIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2ZcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHJhZiBmcm9tIFwicmMtdXRpbC9lcy9yYWZcIjtcbmltcG9ydCBSZXNpemVPYnNlcnZlciBmcm9tICdyYy1yZXNpemUtb2JzZXJ2ZXInO1xuaW1wb3J0IHVzZVJhZiwgeyB1c2VSYWZTdGF0ZSB9IGZyb20gJy4uL2hvb2tzL3VzZVJhZic7XG5pbXBvcnQgVGFiTm9kZSBmcm9tICcuL1RhYk5vZGUnO1xuaW1wb3J0IHVzZU9mZnNldHMgZnJvbSAnLi4vaG9va3MvdXNlT2Zmc2V0cyc7XG5pbXBvcnQgdXNlVmlzaWJsZVJhbmdlIGZyb20gJy4uL2hvb2tzL3VzZVZpc2libGVSYW5nZSc7XG5pbXBvcnQgT3BlcmF0aW9uTm9kZSBmcm9tICcuL09wZXJhdGlvbk5vZGUnO1xuaW1wb3J0IFRhYkNvbnRleHQgZnJvbSAnLi4vVGFiQ29udGV4dCc7XG5pbXBvcnQgdXNlVG91Y2hNb3ZlIGZyb20gJy4uL2hvb2tzL3VzZVRvdWNoTW92ZSc7XG5pbXBvcnQgdXNlUmVmcyBmcm9tICcuLi9ob29rcy91c2VSZWZzJztcbmltcG9ydCBBZGRCdXR0b24gZnJvbSAnLi9BZGRCdXR0b24nO1xuaW1wb3J0IHVzZVN5bmNTdGF0ZSBmcm9tICcuLi9ob29rcy91c2VTeW5jU3RhdGUnO1xuXG52YXIgRXh0cmFDb250ZW50ID0gZnVuY3Rpb24gRXh0cmFDb250ZW50KF9yZWYpIHtcbiAgdmFyIHBvc2l0aW9uID0gX3JlZi5wb3NpdGlvbixcbiAgICAgIHByZWZpeENscyA9IF9yZWYucHJlZml4Q2xzLFxuICAgICAgZXh0cmEgPSBfcmVmLmV4dHJhO1xuICBpZiAoIWV4dHJhKSByZXR1cm4gbnVsbDtcbiAgdmFyIGNvbnRlbnQ7IC8vIFBhcnNlIGV4dHJhXG5cbiAgdmFyIGFzc2VydEV4dHJhID0ge307XG5cbiAgaWYgKGV4dHJhICYmIF90eXBlb2YoZXh0cmEpID09PSAnb2JqZWN0JyAmJiAhIC8qI19fUFVSRV9fKi9SZWFjdC5pc1ZhbGlkRWxlbWVudChleHRyYSkpIHtcbiAgICBhc3NlcnRFeHRyYSA9IGV4dHJhO1xuICB9IGVsc2Uge1xuICAgIGFzc2VydEV4dHJhLnJpZ2h0ID0gZXh0cmE7XG4gIH1cblxuICBpZiAocG9zaXRpb24gPT09ICdyaWdodCcpIHtcbiAgICBjb250ZW50ID0gYXNzZXJ0RXh0cmEucmlnaHQ7XG4gIH1cblxuICBpZiAocG9zaXRpb24gPT09ICdsZWZ0Jykge1xuICAgIGNvbnRlbnQgPSBhc3NlcnRFeHRyYS5sZWZ0O1xuICB9XG5cbiAgcmV0dXJuIGNvbnRlbnQgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWV4dHJhLWNvbnRlbnRcIilcbiAgfSwgY29udGVudCkgOiBudWxsO1xufTtcblxuZnVuY3Rpb24gVGFiTmF2TGlzdChwcm9wcywgcmVmKSB7XG4gIHZhciBfY2xhc3NOYW1lcztcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KFRhYkNvbnRleHQpLFxuICAgICAgcHJlZml4Q2xzID0gX1JlYWN0JHVzZUNvbnRleHQucHJlZml4Q2xzLFxuICAgICAgdGFicyA9IF9SZWFjdCR1c2VDb250ZXh0LnRhYnM7XG5cbiAgdmFyIGNsYXNzTmFtZSA9IHByb3BzLmNsYXNzTmFtZSxcbiAgICAgIHN0eWxlID0gcHJvcHMuc3R5bGUsXG4gICAgICBpZCA9IHByb3BzLmlkLFxuICAgICAgYW5pbWF0ZWQgPSBwcm9wcy5hbmltYXRlZCxcbiAgICAgIGFjdGl2ZUtleSA9IHByb3BzLmFjdGl2ZUtleSxcbiAgICAgIHJ0bCA9IHByb3BzLnJ0bCxcbiAgICAgIGV4dHJhID0gcHJvcHMuZXh0cmEsXG4gICAgICBlZGl0YWJsZSA9IHByb3BzLmVkaXRhYmxlLFxuICAgICAgbG9jYWxlID0gcHJvcHMubG9jYWxlLFxuICAgICAgdGFiUG9zaXRpb24gPSBwcm9wcy50YWJQb3NpdGlvbixcbiAgICAgIHRhYkJhckd1dHRlciA9IHByb3BzLnRhYkJhckd1dHRlcixcbiAgICAgIGNoaWxkcmVuID0gcHJvcHMuY2hpbGRyZW4sXG4gICAgICBvblRhYkNsaWNrID0gcHJvcHMub25UYWJDbGljayxcbiAgICAgIG9uVGFiU2Nyb2xsID0gcHJvcHMub25UYWJTY3JvbGw7XG4gIHZhciB0YWJzV3JhcHBlclJlZiA9IHVzZVJlZigpO1xuICB2YXIgdGFiTGlzdFJlZiA9IHVzZVJlZigpO1xuICB2YXIgb3BlcmF0aW9uc1JlZiA9IHVzZVJlZigpO1xuICB2YXIgaW5uZXJBZGRCdXR0b25SZWYgPSB1c2VSZWYoKTtcblxuICB2YXIgX3VzZVJlZnMgPSB1c2VSZWZzKCksXG4gICAgICBfdXNlUmVmczIgPSBfc2xpY2VkVG9BcnJheShfdXNlUmVmcywgMiksXG4gICAgICBnZXRCdG5SZWYgPSBfdXNlUmVmczJbMF0sXG4gICAgICByZW1vdmVCdG5SZWYgPSBfdXNlUmVmczJbMV07XG5cbiAgdmFyIHRhYlBvc2l0aW9uVG9wT3JCb3R0b20gPSB0YWJQb3NpdGlvbiA9PT0gJ3RvcCcgfHwgdGFiUG9zaXRpb24gPT09ICdib3R0b20nO1xuXG4gIHZhciBfdXNlU3luY1N0YXRlID0gdXNlU3luY1N0YXRlKDAsIGZ1bmN0aW9uIChuZXh0LCBwcmV2KSB7XG4gICAgaWYgKHRhYlBvc2l0aW9uVG9wT3JCb3R0b20gJiYgb25UYWJTY3JvbGwpIHtcbiAgICAgIG9uVGFiU2Nyb2xsKHtcbiAgICAgICAgZGlyZWN0aW9uOiBuZXh0ID4gcHJldiA/ICdsZWZ0JyA6ICdyaWdodCdcbiAgICAgIH0pO1xuICAgIH1cbiAgfSksXG4gICAgICBfdXNlU3luY1N0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTeW5jU3RhdGUsIDIpLFxuICAgICAgdHJhbnNmb3JtTGVmdCA9IF91c2VTeW5jU3RhdGUyWzBdLFxuICAgICAgc2V0VHJhbnNmb3JtTGVmdCA9IF91c2VTeW5jU3RhdGUyWzFdO1xuXG4gIHZhciBfdXNlU3luY1N0YXRlMyA9IHVzZVN5bmNTdGF0ZSgwLCBmdW5jdGlvbiAobmV4dCwgcHJldikge1xuICAgIGlmICghdGFiUG9zaXRpb25Ub3BPckJvdHRvbSAmJiBvblRhYlNjcm9sbCkge1xuICAgICAgb25UYWJTY3JvbGwoe1xuICAgICAgICBkaXJlY3Rpb246IG5leHQgPiBwcmV2ID8gJ3RvcCcgOiAnYm90dG9tJ1xuICAgICAgfSk7XG4gICAgfVxuICB9KSxcbiAgICAgIF91c2VTeW5jU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN5bmNTdGF0ZTMsIDIpLFxuICAgICAgdHJhbnNmb3JtVG9wID0gX3VzZVN5bmNTdGF0ZTRbMF0sXG4gICAgICBzZXRUcmFuc2Zvcm1Ub3AgPSBfdXNlU3luY1N0YXRlNFsxXTtcblxuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoMCksXG4gICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIHdyYXBwZXJTY3JvbGxXaWR0aCA9IF91c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRXcmFwcGVyU2Nyb2xsV2lkdGggPSBfdXNlU3RhdGUyWzFdO1xuXG4gIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUoMCksXG4gICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksXG4gICAgICB3cmFwcGVyU2Nyb2xsSGVpZ2h0ID0gX3VzZVN0YXRlNFswXSxcbiAgICAgIHNldFdyYXBwZXJTY3JvbGxIZWlnaHQgPSBfdXNlU3RhdGU0WzFdO1xuXG4gIHZhciBfdXNlU3RhdGU1ID0gdXNlU3RhdGUoMCksXG4gICAgICBfdXNlU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNSwgMiksXG4gICAgICB3cmFwcGVyQ29udGVudFdpZHRoID0gX3VzZVN0YXRlNlswXSxcbiAgICAgIHNldFdyYXBwZXJDb250ZW50V2lkdGggPSBfdXNlU3RhdGU2WzFdO1xuXG4gIHZhciBfdXNlU3RhdGU3ID0gdXNlU3RhdGUoMCksXG4gICAgICBfdXNlU3RhdGU4ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNywgMiksXG4gICAgICB3cmFwcGVyQ29udGVudEhlaWdodCA9IF91c2VTdGF0ZThbMF0sXG4gICAgICBzZXRXcmFwcGVyQ29udGVudEhlaWdodCA9IF91c2VTdGF0ZThbMV07XG5cbiAgdmFyIF91c2VTdGF0ZTkgPSB1c2VTdGF0ZShudWxsKSxcbiAgICAgIF91c2VTdGF0ZTEwID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlOSwgMiksXG4gICAgICB3cmFwcGVyV2lkdGggPSBfdXNlU3RhdGUxMFswXSxcbiAgICAgIHNldFdyYXBwZXJXaWR0aCA9IF91c2VTdGF0ZTEwWzFdO1xuXG4gIHZhciBfdXNlU3RhdGUxMSA9IHVzZVN0YXRlKG51bGwpLFxuICAgICAgX3VzZVN0YXRlMTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUxMSwgMiksXG4gICAgICB3cmFwcGVySGVpZ2h0ID0gX3VzZVN0YXRlMTJbMF0sXG4gICAgICBzZXRXcmFwcGVySGVpZ2h0ID0gX3VzZVN0YXRlMTJbMV07XG5cbiAgdmFyIF91c2VTdGF0ZTEzID0gdXNlU3RhdGUoMCksXG4gICAgICBfdXNlU3RhdGUxNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTEzLCAyKSxcbiAgICAgIGFkZFdpZHRoID0gX3VzZVN0YXRlMTRbMF0sXG4gICAgICBzZXRBZGRXaWR0aCA9IF91c2VTdGF0ZTE0WzFdO1xuXG4gIHZhciBfdXNlU3RhdGUxNSA9IHVzZVN0YXRlKDApLFxuICAgICAgX3VzZVN0YXRlMTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUxNSwgMiksXG4gICAgICBhZGRIZWlnaHQgPSBfdXNlU3RhdGUxNlswXSxcbiAgICAgIHNldEFkZEhlaWdodCA9IF91c2VTdGF0ZTE2WzFdO1xuXG4gIHZhciBfdXNlUmFmU3RhdGUgPSB1c2VSYWZTdGF0ZShuZXcgTWFwKCkpLFxuICAgICAgX3VzZVJhZlN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VSYWZTdGF0ZSwgMiksXG4gICAgICB0YWJTaXplcyA9IF91c2VSYWZTdGF0ZTJbMF0sXG4gICAgICBzZXRUYWJTaXplcyA9IF91c2VSYWZTdGF0ZTJbMV07XG5cbiAgdmFyIHRhYk9mZnNldHMgPSB1c2VPZmZzZXRzKHRhYnMsIHRhYlNpemVzLCB3cmFwcGVyU2Nyb2xsV2lkdGgpOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PSBVdGlsID09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgb3BlcmF0aW9uc0hpZGRlbkNsYXNzTmFtZSA9IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItbmF2LW9wZXJhdGlvbnMtaGlkZGVuXCIpO1xuICB2YXIgdHJhbnNmb3JtTWluID0gMDtcbiAgdmFyIHRyYW5zZm9ybU1heCA9IDA7XG5cbiAgaWYgKCF0YWJQb3NpdGlvblRvcE9yQm90dG9tKSB7XG4gICAgdHJhbnNmb3JtTWluID0gTWF0aC5taW4oMCwgd3JhcHBlckhlaWdodCAtIHdyYXBwZXJTY3JvbGxIZWlnaHQpO1xuICAgIHRyYW5zZm9ybU1heCA9IDA7XG4gIH0gZWxzZSBpZiAocnRsKSB7XG4gICAgdHJhbnNmb3JtTWluID0gMDtcbiAgICB0cmFuc2Zvcm1NYXggPSBNYXRoLm1heCgwLCB3cmFwcGVyU2Nyb2xsV2lkdGggLSB3cmFwcGVyV2lkdGgpO1xuICB9IGVsc2Uge1xuICAgIHRyYW5zZm9ybU1pbiA9IE1hdGgubWluKDAsIHdyYXBwZXJXaWR0aCAtIHdyYXBwZXJTY3JvbGxXaWR0aCk7XG4gICAgdHJhbnNmb3JtTWF4ID0gMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFsaWduSW5SYW5nZSh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IHRyYW5zZm9ybU1pbikge1xuICAgICAgcmV0dXJuIHRyYW5zZm9ybU1pbjtcbiAgICB9XG5cbiAgICBpZiAodmFsdWUgPiB0cmFuc2Zvcm1NYXgpIHtcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1NYXg7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlO1xuICB9IC8vID09PT09PT09PT09PT09PT09PT09PT09PT0gTW9iaWxlID09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdmFyIHRvdWNoTW92aW5nUmVmID0gdXNlUmVmKCk7XG5cbiAgdmFyIF91c2VTdGF0ZTE3ID0gdXNlU3RhdGUoKSxcbiAgICAgIF91c2VTdGF0ZTE4ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTcsIDIpLFxuICAgICAgbG9ja0FuaW1hdGlvbiA9IF91c2VTdGF0ZTE4WzBdLFxuICAgICAgc2V0TG9ja0FuaW1hdGlvbiA9IF91c2VTdGF0ZTE4WzFdO1xuXG4gIGZ1bmN0aW9uIGRvTG9ja0FuaW1hdGlvbigpIHtcbiAgICBzZXRMb2NrQW5pbWF0aW9uKERhdGUubm93KCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xlYXJUb3VjaE1vdmluZygpIHtcbiAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRvdWNoTW92aW5nUmVmLmN1cnJlbnQpO1xuICB9XG5cbiAgdXNlVG91Y2hNb3ZlKHRhYnNXcmFwcGVyUmVmLCBmdW5jdGlvbiAob2Zmc2V0WCwgb2Zmc2V0WSkge1xuICAgIGZ1bmN0aW9uIGRvTW92ZShzZXRTdGF0ZSwgb2Zmc2V0KSB7XG4gICAgICBzZXRTdGF0ZShmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIG5ld1ZhbHVlID0gYWxpZ25JblJhbmdlKHZhbHVlICsgb2Zmc2V0KTtcbiAgICAgICAgcmV0dXJuIG5ld1ZhbHVlO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRhYlBvc2l0aW9uVG9wT3JCb3R0b20pIHtcbiAgICAgIC8vIFNraXAgc2Nyb2xsIGlmIHBsYWNlIGlzIGVub3VnaFxuICAgICAgaWYgKHdyYXBwZXJXaWR0aCA+PSB3cmFwcGVyU2Nyb2xsV2lkdGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBkb01vdmUoc2V0VHJhbnNmb3JtTGVmdCwgb2Zmc2V0WCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh3cmFwcGVySGVpZ2h0ID49IHdyYXBwZXJTY3JvbGxIZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBkb01vdmUoc2V0VHJhbnNmb3JtVG9wLCBvZmZzZXRZKTtcbiAgICB9XG5cbiAgICBjbGVhclRvdWNoTW92aW5nKCk7XG4gICAgZG9Mb2NrQW5pbWF0aW9uKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGNsZWFyVG91Y2hNb3ZpbmcoKTtcblxuICAgIGlmIChsb2NrQW5pbWF0aW9uKSB7XG4gICAgICB0b3VjaE1vdmluZ1JlZi5jdXJyZW50ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBzZXRMb2NrQW5pbWF0aW9uKDApO1xuICAgICAgfSwgMTAwKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xlYXJUb3VjaE1vdmluZztcbiAgfSwgW2xvY2tBbmltYXRpb25dKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PSBTY3JvbGwgPT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gc2Nyb2xsVG9UYWIoKSB7XG4gICAgdmFyIGtleSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogYWN0aXZlS2V5O1xuICAgIHZhciB0YWJPZmZzZXQgPSB0YWJPZmZzZXRzLmdldChrZXkpIHx8IHtcbiAgICAgIHdpZHRoOiAwLFxuICAgICAgaGVpZ2h0OiAwLFxuICAgICAgbGVmdDogMCxcbiAgICAgIHJpZ2h0OiAwLFxuICAgICAgdG9wOiAwXG4gICAgfTtcblxuICAgIGlmICh0YWJQb3NpdGlvblRvcE9yQm90dG9tKSB7XG4gICAgICAvLyA9PT09PT09PT09PT0gQWxpZ24gd2l0aCB0b3AgJiBib3R0b20gPT09PT09PT09PT09XG4gICAgICB2YXIgbmV3VHJhbnNmb3JtID0gdHJhbnNmb3JtTGVmdDsgLy8gUlRMXG5cbiAgICAgIGlmIChydGwpIHtcbiAgICAgICAgaWYgKHRhYk9mZnNldC5yaWdodCA8IHRyYW5zZm9ybUxlZnQpIHtcbiAgICAgICAgICBuZXdUcmFuc2Zvcm0gPSB0YWJPZmZzZXQucmlnaHQ7XG4gICAgICAgIH0gZWxzZSBpZiAodGFiT2Zmc2V0LnJpZ2h0ICsgdGFiT2Zmc2V0LndpZHRoID4gdHJhbnNmb3JtTGVmdCArIHdyYXBwZXJXaWR0aCkge1xuICAgICAgICAgIG5ld1RyYW5zZm9ybSA9IHRhYk9mZnNldC5yaWdodCArIHRhYk9mZnNldC53aWR0aCAtIHdyYXBwZXJXaWR0aDtcbiAgICAgICAgfVxuICAgICAgfSAvLyBMVFJcbiAgICAgIGVsc2UgaWYgKHRhYk9mZnNldC5sZWZ0IDwgLXRyYW5zZm9ybUxlZnQpIHtcbiAgICAgICAgbmV3VHJhbnNmb3JtID0gLXRhYk9mZnNldC5sZWZ0O1xuICAgICAgfSBlbHNlIGlmICh0YWJPZmZzZXQubGVmdCArIHRhYk9mZnNldC53aWR0aCA+IC10cmFuc2Zvcm1MZWZ0ICsgd3JhcHBlcldpZHRoKSB7XG4gICAgICAgIG5ld1RyYW5zZm9ybSA9IC0odGFiT2Zmc2V0LmxlZnQgKyB0YWJPZmZzZXQud2lkdGggLSB3cmFwcGVyV2lkdGgpO1xuICAgICAgfVxuXG4gICAgICBzZXRUcmFuc2Zvcm1Ub3AoMCk7XG4gICAgICBzZXRUcmFuc2Zvcm1MZWZ0KGFsaWduSW5SYW5nZShuZXdUcmFuc2Zvcm0pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gPT09PT09PT09PT09IEFsaWduIHdpdGggbGVmdCAmIHJpZ2h0ID09PT09PT09PT09PVxuICAgICAgdmFyIF9uZXdUcmFuc2Zvcm0gPSB0cmFuc2Zvcm1Ub3A7XG5cbiAgICAgIGlmICh0YWJPZmZzZXQudG9wIDwgLXRyYW5zZm9ybVRvcCkge1xuICAgICAgICBfbmV3VHJhbnNmb3JtID0gLXRhYk9mZnNldC50b3A7XG4gICAgICB9IGVsc2UgaWYgKHRhYk9mZnNldC50b3AgKyB0YWJPZmZzZXQuaGVpZ2h0ID4gLXRyYW5zZm9ybVRvcCArIHdyYXBwZXJIZWlnaHQpIHtcbiAgICAgICAgX25ld1RyYW5zZm9ybSA9IC0odGFiT2Zmc2V0LnRvcCArIHRhYk9mZnNldC5oZWlnaHQgLSB3cmFwcGVySGVpZ2h0KTtcbiAgICAgIH1cblxuICAgICAgc2V0VHJhbnNmb3JtTGVmdCgwKTtcbiAgICAgIHNldFRyYW5zZm9ybVRvcChhbGlnbkluUmFuZ2UoX25ld1RyYW5zZm9ybSkpO1xuICAgIH1cbiAgfSAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PSBUYWIgPT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gUmVuZGVyIHRhYiBub2RlICYgY29sbGVjdCB0YWIgb2Zmc2V0XG5cblxuICB2YXIgX3VzZVZpc2libGVSYW5nZSA9IHVzZVZpc2libGVSYW5nZSh0YWJPZmZzZXRzLCB7XG4gICAgd2lkdGg6IHdyYXBwZXJXaWR0aCxcbiAgICBoZWlnaHQ6IHdyYXBwZXJIZWlnaHQsXG4gICAgbGVmdDogdHJhbnNmb3JtTGVmdCxcbiAgICB0b3A6IHRyYW5zZm9ybVRvcFxuICB9LCB7XG4gICAgd2lkdGg6IHdyYXBwZXJDb250ZW50V2lkdGgsXG4gICAgaGVpZ2h0OiB3cmFwcGVyQ29udGVudEhlaWdodFxuICB9LCB7XG4gICAgd2lkdGg6IGFkZFdpZHRoLFxuICAgIGhlaWdodDogYWRkSGVpZ2h0XG4gIH0sIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpLCB7fSwge1xuICAgIHRhYnM6IHRhYnNcbiAgfSkpLFxuICAgICAgX3VzZVZpc2libGVSYW5nZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlVmlzaWJsZVJhbmdlLCAyKSxcbiAgICAgIHZpc2libGVTdGFydCA9IF91c2VWaXNpYmxlUmFuZ2UyWzBdLFxuICAgICAgdmlzaWJsZUVuZCA9IF91c2VWaXNpYmxlUmFuZ2UyWzFdO1xuXG4gIHZhciB0YWJOb2RlU3R5bGUgPSB7fTtcblxuICBpZiAodGFiUG9zaXRpb24gPT09ICd0b3AnIHx8IHRhYlBvc2l0aW9uID09PSAnYm90dG9tJykge1xuICAgIHRhYk5vZGVTdHlsZVtydGwgPyAnbWFyZ2luUmlnaHQnIDogJ21hcmdpbkxlZnQnXSA9IHRhYkJhckd1dHRlcjtcbiAgfSBlbHNlIHtcbiAgICB0YWJOb2RlU3R5bGUubWFyZ2luVG9wID0gdGFiQmFyR3V0dGVyO1xuICB9XG5cbiAgdmFyIHRhYk5vZGVzID0gdGFicy5tYXAoZnVuY3Rpb24gKHRhYiwgaSkge1xuICAgIHZhciBrZXkgPSB0YWIua2V5O1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUYWJOb2RlLCB7XG4gICAgICBpZDogaWQsXG4gICAgICBwcmVmaXhDbHM6IHByZWZpeENscyxcbiAgICAgIGtleToga2V5LFxuICAgICAgdGFiOiB0YWJcbiAgICAgIC8qIGZpcnN0IG5vZGUgc2hvdWxkIG5vdCBoYXZlIG1hcmdpbiBsZWZ0ICovXG4gICAgICAsXG4gICAgICBzdHlsZTogaSA9PT0gMCA/IHVuZGVmaW5lZCA6IHRhYk5vZGVTdHlsZSxcbiAgICAgIGNsb3NhYmxlOiB0YWIuY2xvc2FibGUsXG4gICAgICBlZGl0YWJsZTogZWRpdGFibGUsXG4gICAgICBhY3RpdmU6IGtleSA9PT0gYWN0aXZlS2V5LFxuICAgICAgcmVuZGVyV3JhcHBlcjogY2hpbGRyZW4sXG4gICAgICByZW1vdmVBcmlhTGFiZWw6IGxvY2FsZSA9PT0gbnVsbCB8fCBsb2NhbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxvY2FsZS5yZW1vdmVBcmlhTGFiZWwsXG4gICAgICByZWY6IGdldEJ0blJlZihrZXkpLFxuICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgIG9uVGFiQ2xpY2soa2V5LCBlKTtcbiAgICAgIH0sXG4gICAgICBvblJlbW92ZTogZnVuY3Rpb24gb25SZW1vdmUoKSB7XG4gICAgICAgIHJlbW92ZUJ0blJlZihrZXkpO1xuICAgICAgfSxcbiAgICAgIG9uRm9jdXM6IGZ1bmN0aW9uIG9uRm9jdXMoKSB7XG4gICAgICAgIHNjcm9sbFRvVGFiKGtleSk7XG4gICAgICAgIGRvTG9ja0FuaW1hdGlvbigpO1xuXG4gICAgICAgIGlmICghdGFic1dyYXBwZXJSZWYuY3VycmVudCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAvLyBGb2N1cyBlbGVtZW50IHdpbGwgbWFrZSBzY3JvbGxMZWZ0IGNoYW5nZSB3aGljaCB3ZSBzaG91bGQgcmVzZXQgYmFja1xuXG5cbiAgICAgICAgaWYgKCFydGwpIHtcbiAgICAgICAgICB0YWJzV3JhcHBlclJlZi5jdXJyZW50LnNjcm9sbExlZnQgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFic1dyYXBwZXJSZWYuY3VycmVudC5zY3JvbGxUb3AgPSAwO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgdmFyIG9uTGlzdEhvbGRlclJlc2l6ZSA9IHVzZVJhZihmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF90YWJzV3JhcHBlclJlZiRjdXJyZSwgX3RhYnNXcmFwcGVyUmVmJGN1cnJlMiwgX2lubmVyQWRkQnV0dG9uUmVmJGN1LCBfaW5uZXJBZGRCdXR0b25SZWYkY3UyLCBfb3BlcmF0aW9uc1JlZiRjdXJyZW4sIF9vcGVyYXRpb25zUmVmJGN1cnJlbjIsIF90YWJMaXN0UmVmJGN1cnJlbnQsIF90YWJMaXN0UmVmJGN1cnJlbnQyLCBfb3BlcmF0aW9uc1JlZiRjdXJyZW4zO1xuXG4gICAgLy8gVXBkYXRlIHdyYXBwZXIgcmVjb3Jkc1xuICAgIHZhciBvZmZzZXRXaWR0aCA9ICgoX3RhYnNXcmFwcGVyUmVmJGN1cnJlID0gdGFic1dyYXBwZXJSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX3RhYnNXcmFwcGVyUmVmJGN1cnJlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGFic1dyYXBwZXJSZWYkY3VycmUub2Zmc2V0V2lkdGgpIHx8IDA7XG4gICAgdmFyIG9mZnNldEhlaWdodCA9ICgoX3RhYnNXcmFwcGVyUmVmJGN1cnJlMiA9IHRhYnNXcmFwcGVyUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF90YWJzV3JhcHBlclJlZiRjdXJyZTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90YWJzV3JhcHBlclJlZiRjdXJyZTIub2Zmc2V0SGVpZ2h0KSB8fCAwO1xuICAgIHZhciBuZXdBZGRXaWR0aCA9ICgoX2lubmVyQWRkQnV0dG9uUmVmJGN1ID0gaW5uZXJBZGRCdXR0b25SZWYuY3VycmVudCkgPT09IG51bGwgfHwgX2lubmVyQWRkQnV0dG9uUmVmJGN1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaW5uZXJBZGRCdXR0b25SZWYkY3Uub2Zmc2V0V2lkdGgpIHx8IDA7XG4gICAgdmFyIG5ld0FkZEhlaWdodCA9ICgoX2lubmVyQWRkQnV0dG9uUmVmJGN1MiA9IGlubmVyQWRkQnV0dG9uUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF9pbm5lckFkZEJ1dHRvblJlZiRjdTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pbm5lckFkZEJ1dHRvblJlZiRjdTIub2Zmc2V0SGVpZ2h0KSB8fCAwO1xuICAgIHZhciBuZXdPcGVyYXRpb25XaWR0aCA9ICgoX29wZXJhdGlvbnNSZWYkY3VycmVuID0gb3BlcmF0aW9uc1JlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCBfb3BlcmF0aW9uc1JlZiRjdXJyZW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcGVyYXRpb25zUmVmJGN1cnJlbi5vZmZzZXRXaWR0aCkgfHwgMDtcbiAgICB2YXIgbmV3T3BlcmF0aW9uSGVpZ2h0ID0gKChfb3BlcmF0aW9uc1JlZiRjdXJyZW4yID0gb3BlcmF0aW9uc1JlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCBfb3BlcmF0aW9uc1JlZiRjdXJyZW4yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3BlcmF0aW9uc1JlZiRjdXJyZW4yLm9mZnNldEhlaWdodCkgfHwgMDtcbiAgICBzZXRXcmFwcGVyV2lkdGgob2Zmc2V0V2lkdGgpO1xuICAgIHNldFdyYXBwZXJIZWlnaHQob2Zmc2V0SGVpZ2h0KTtcbiAgICBzZXRBZGRXaWR0aChuZXdBZGRXaWR0aCk7XG4gICAgc2V0QWRkSGVpZ2h0KG5ld0FkZEhlaWdodCk7XG4gICAgdmFyIG5ld1dyYXBwZXJTY3JvbGxXaWR0aCA9ICgoKF90YWJMaXN0UmVmJGN1cnJlbnQgPSB0YWJMaXN0UmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF90YWJMaXN0UmVmJGN1cnJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90YWJMaXN0UmVmJGN1cnJlbnQub2Zmc2V0V2lkdGgpIHx8IDApIC0gbmV3QWRkV2lkdGg7XG4gICAgdmFyIG5ld1dyYXBwZXJTY3JvbGxIZWlnaHQgPSAoKChfdGFiTGlzdFJlZiRjdXJyZW50MiA9IHRhYkxpc3RSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX3RhYkxpc3RSZWYkY3VycmVudDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90YWJMaXN0UmVmJGN1cnJlbnQyLm9mZnNldEhlaWdodCkgfHwgMCkgLSBuZXdBZGRIZWlnaHQ7XG4gICAgc2V0V3JhcHBlclNjcm9sbFdpZHRoKG5ld1dyYXBwZXJTY3JvbGxXaWR0aCk7XG4gICAgc2V0V3JhcHBlclNjcm9sbEhlaWdodChuZXdXcmFwcGVyU2Nyb2xsSGVpZ2h0KTtcbiAgICB2YXIgaXNPcGVyYXRpb25IaWRkZW4gPSAoX29wZXJhdGlvbnNSZWYkY3VycmVuMyA9IG9wZXJhdGlvbnNSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX29wZXJhdGlvbnNSZWYkY3VycmVuMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wZXJhdGlvbnNSZWYkY3VycmVuMy5jbGFzc05hbWUuaW5jbHVkZXMob3BlcmF0aW9uc0hpZGRlbkNsYXNzTmFtZSk7XG4gICAgc2V0V3JhcHBlckNvbnRlbnRXaWR0aChuZXdXcmFwcGVyU2Nyb2xsV2lkdGggLSAoaXNPcGVyYXRpb25IaWRkZW4gPyAwIDogbmV3T3BlcmF0aW9uV2lkdGgpKTtcbiAgICBzZXRXcmFwcGVyQ29udGVudEhlaWdodChuZXdXcmFwcGVyU2Nyb2xsSGVpZ2h0IC0gKGlzT3BlcmF0aW9uSGlkZGVuID8gMCA6IG5ld09wZXJhdGlvbkhlaWdodCkpOyAvLyBVcGRhdGUgYnV0dG9ucyByZWNvcmRzXG5cbiAgICBzZXRUYWJTaXplcyhmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbmV3U2l6ZXMgPSBuZXcgTWFwKCk7XG4gICAgICB0YWJzLmZvckVhY2goZnVuY3Rpb24gKF9yZWYyKSB7XG4gICAgICAgIHZhciBrZXkgPSBfcmVmMi5rZXk7XG4gICAgICAgIHZhciBidG5Ob2RlID0gZ2V0QnRuUmVmKGtleSkuY3VycmVudDtcblxuICAgICAgICBpZiAoYnRuTm9kZSkge1xuICAgICAgICAgIG5ld1NpemVzLnNldChrZXksIHtcbiAgICAgICAgICAgIHdpZHRoOiBidG5Ob2RlLm9mZnNldFdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBidG5Ob2RlLm9mZnNldEhlaWdodCxcbiAgICAgICAgICAgIGxlZnQ6IGJ0bk5vZGUub2Zmc2V0TGVmdCxcbiAgICAgICAgICAgIHRvcDogYnRuTm9kZS5vZmZzZXRUb3BcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gbmV3U2l6ZXM7XG4gICAgfSk7XG4gIH0pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT0gRHJvcGRvd24gPT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgc3RhcnRIaWRkZW5UYWJzID0gdGFicy5zbGljZSgwLCB2aXNpYmxlU3RhcnQpO1xuICB2YXIgZW5kSGlkZGVuVGFicyA9IHRhYnMuc2xpY2UodmlzaWJsZUVuZCArIDEpO1xuICB2YXIgaGlkZGVuVGFicyA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc3RhcnRIaWRkZW5UYWJzKSwgX3RvQ29uc3VtYWJsZUFycmF5KGVuZEhpZGRlblRhYnMpKTsgLy8gPT09PT09PT09PT09PT09PT09PSBMaW5rICYgT3BlcmF0aW9ucyA9PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIF91c2VTdGF0ZTE5ID0gdXNlU3RhdGUoKSxcbiAgICAgIF91c2VTdGF0ZTIwID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTksIDIpLFxuICAgICAgaW5rU3R5bGUgPSBfdXNlU3RhdGUyMFswXSxcbiAgICAgIHNldElua1N0eWxlID0gX3VzZVN0YXRlMjBbMV07XG5cbiAgdmFyIGFjdGl2ZVRhYk9mZnNldCA9IHRhYk9mZnNldHMuZ2V0KGFjdGl2ZUtleSk7IC8vIERlbGF5IHNldCBpbmsgc3R5bGUgdG8gYXZvaWQgcmVtb3ZlIHRhYiBibGlua1xuXG4gIHZhciBpbmtCYXJSYWZSZWYgPSB1c2VSZWYoKTtcblxuICBmdW5jdGlvbiBjbGVhbklua0JhclJhZigpIHtcbiAgICByYWYuY2FuY2VsKGlua0JhclJhZlJlZi5jdXJyZW50KTtcbiAgfVxuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG5ld0lua1N0eWxlID0ge307XG5cbiAgICBpZiAoYWN0aXZlVGFiT2Zmc2V0KSB7XG4gICAgICBpZiAodGFiUG9zaXRpb25Ub3BPckJvdHRvbSkge1xuICAgICAgICBpZiAocnRsKSB7XG4gICAgICAgICAgbmV3SW5rU3R5bGUucmlnaHQgPSBhY3RpdmVUYWJPZmZzZXQucmlnaHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3SW5rU3R5bGUubGVmdCA9IGFjdGl2ZVRhYk9mZnNldC5sZWZ0O1xuICAgICAgICB9XG5cbiAgICAgICAgbmV3SW5rU3R5bGUud2lkdGggPSBhY3RpdmVUYWJPZmZzZXQud2lkdGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdJbmtTdHlsZS50b3AgPSBhY3RpdmVUYWJPZmZzZXQudG9wO1xuICAgICAgICBuZXdJbmtTdHlsZS5oZWlnaHQgPSBhY3RpdmVUYWJPZmZzZXQuaGVpZ2h0O1xuICAgICAgfVxuICAgIH1cblxuICAgIGNsZWFuSW5rQmFyUmFmKCk7XG4gICAgaW5rQmFyUmFmUmVmLmN1cnJlbnQgPSByYWYoZnVuY3Rpb24gKCkge1xuICAgICAgc2V0SW5rU3R5bGUobmV3SW5rU3R5bGUpO1xuICAgIH0pO1xuICAgIHJldHVybiBjbGVhbklua0JhclJhZjtcbiAgfSwgW2FjdGl2ZVRhYk9mZnNldCwgdGFiUG9zaXRpb25Ub3BPckJvdHRvbSwgcnRsXSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT0gRWZmZWN0ID09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgc2Nyb2xsVG9UYWIoKTtcbiAgfSwgW2FjdGl2ZUtleSwgYWN0aXZlVGFiT2Zmc2V0LCB0YWJPZmZzZXRzLCB0YWJQb3NpdGlvblRvcE9yQm90dG9tXSk7IC8vIFNob3VsZCByZWNhbGN1bGF0ZSB3aGVuIHJ0bCBjaGFuZ2VkXG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBvbkxpc3RIb2xkZXJSZXNpemUoKTtcbiAgfSwgW3J0bCwgdGFiQmFyR3V0dGVyLCBhY3RpdmVLZXksIHRhYnMubWFwKGZ1bmN0aW9uICh0YWIpIHtcbiAgICByZXR1cm4gdGFiLmtleTtcbiAgfSkuam9pbignXycpXSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT0gUmVuZGVyID09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBoYXNEcm9wZG93biA9ICEhaGlkZGVuVGFicy5sZW5ndGg7XG4gIHZhciB3cmFwUHJlZml4ID0gXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1uYXYtd3JhcFwiKTtcbiAgdmFyIHBpbmdMZWZ0O1xuICB2YXIgcGluZ1JpZ2h0O1xuICB2YXIgcGluZ1RvcDtcbiAgdmFyIHBpbmdCb3R0b207XG5cbiAgaWYgKHRhYlBvc2l0aW9uVG9wT3JCb3R0b20pIHtcbiAgICBpZiAocnRsKSB7XG4gICAgICBwaW5nUmlnaHQgPSB0cmFuc2Zvcm1MZWZ0ID4gMDtcbiAgICAgIHBpbmdMZWZ0ID0gdHJhbnNmb3JtTGVmdCArIHdyYXBwZXJXaWR0aCA8IHdyYXBwZXJTY3JvbGxXaWR0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgcGluZ0xlZnQgPSB0cmFuc2Zvcm1MZWZ0IDwgMDtcbiAgICAgIHBpbmdSaWdodCA9IC10cmFuc2Zvcm1MZWZ0ICsgd3JhcHBlcldpZHRoIDwgd3JhcHBlclNjcm9sbFdpZHRoO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBwaW5nVG9wID0gdHJhbnNmb3JtVG9wIDwgMDtcbiAgICBwaW5nQm90dG9tID0gLXRyYW5zZm9ybVRvcCArIHdyYXBwZXJIZWlnaHQgPCB3cmFwcGVyU2Nyb2xsSGVpZ2h0O1xuICB9XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICByZWY6IHJlZixcbiAgICByb2xlOiBcInRhYmxpc3RcIixcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1uYXZcIiksIGNsYXNzTmFtZSksXG4gICAgc3R5bGU6IHN0eWxlLFxuICAgIG9uS2V5RG93bjogZnVuY3Rpb24gb25LZXlEb3duKCkge1xuICAgICAgLy8gTm8gbmVlZCBhbmltYXRpb24gd2hlbiB1c2Uga2V5Ym9hcmRcbiAgICAgIGRvTG9ja0FuaW1hdGlvbigpO1xuICAgIH1cbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRXh0cmFDb250ZW50LCB7XG4gICAgcG9zaXRpb246IFwibGVmdFwiLFxuICAgIGV4dHJhOiBleHRyYSxcbiAgICBwcmVmaXhDbHM6IHByZWZpeENsc1xuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVzaXplT2JzZXJ2ZXIsIHtcbiAgICBvblJlc2l6ZTogb25MaXN0SG9sZGVyUmVzaXplXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMod3JhcFByZWZpeCwgKF9jbGFzc05hbWVzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQod3JhcFByZWZpeCwgXCItcGluZy1sZWZ0XCIpLCBwaW5nTGVmdCksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQod3JhcFByZWZpeCwgXCItcGluZy1yaWdodFwiKSwgcGluZ1JpZ2h0KSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCBcIlwiLmNvbmNhdCh3cmFwUHJlZml4LCBcIi1waW5nLXRvcFwiKSwgcGluZ1RvcCksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQod3JhcFByZWZpeCwgXCItcGluZy1ib3R0b21cIiksIHBpbmdCb3R0b20pLCBfY2xhc3NOYW1lcykpLFxuICAgIHJlZjogdGFic1dyYXBwZXJSZWZcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVzaXplT2JzZXJ2ZXIsIHtcbiAgICBvblJlc2l6ZTogb25MaXN0SG9sZGVyUmVzaXplXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICByZWY6IHRhYkxpc3RSZWYsXG4gICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLW5hdi1saXN0XCIpLFxuICAgIHN0eWxlOiB7XG4gICAgICB0cmFuc2Zvcm06IFwidHJhbnNsYXRlKFwiLmNvbmNhdCh0cmFuc2Zvcm1MZWZ0LCBcInB4LCBcIikuY29uY2F0KHRyYW5zZm9ybVRvcCwgXCJweClcIiksXG4gICAgICB0cmFuc2l0aW9uOiBsb2NrQW5pbWF0aW9uID8gJ25vbmUnIDogdW5kZWZpbmVkXG4gICAgfVxuICB9LCB0YWJOb2RlcywgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQWRkQnV0dG9uLCB7XG4gICAgcmVmOiBpbm5lckFkZEJ1dHRvblJlZixcbiAgICBwcmVmaXhDbHM6IHByZWZpeENscyxcbiAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICBlZGl0YWJsZTogZWRpdGFibGUsXG4gICAgc3R5bGU6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGFiTm9kZXMubGVuZ3RoID09PSAwID8gdW5kZWZpbmVkIDogdGFiTm9kZVN0eWxlKSwge30sIHtcbiAgICAgIHZpc2liaWxpdHk6IGhhc0Ryb3Bkb3duID8gJ2hpZGRlbicgOiBudWxsXG4gICAgfSlcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1pbmstYmFyXCIpLCBfZGVmaW5lUHJvcGVydHkoe30sIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItaW5rLWJhci1hbmltYXRlZFwiKSwgYW5pbWF0ZWQuaW5rQmFyKSksXG4gICAgc3R5bGU6IGlua1N0eWxlXG4gIH0pKSkpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoT3BlcmF0aW9uTm9kZSwgX2V4dGVuZHMoe30sIHByb3BzLCB7XG4gICAgcmVmOiBvcGVyYXRpb25zUmVmLFxuICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgIHRhYnM6IGhpZGRlblRhYnMsXG4gICAgY2xhc3NOYW1lOiAhaGFzRHJvcGRvd24gJiYgb3BlcmF0aW9uc0hpZGRlbkNsYXNzTmFtZVxuICB9KSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV4dHJhQ29udGVudCwge1xuICAgIHBvc2l0aW9uOiBcInJpZ2h0XCIsXG4gICAgZXh0cmE6IGV4dHJhLFxuICAgIHByZWZpeENsczogcHJlZml4Q2xzXG4gIH0pKTtcbiAgLyogZXNsaW50LWVuYWJsZSAqL1xufVxuXG5leHBvcnQgZGVmYXVsdCAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihUYWJOYXZMaXN0KTsiLCJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgVGFiQ29udGV4dCBmcm9tICcuLi9UYWJDb250ZXh0JztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFRhYlBhbmVsTGlzdChfcmVmKSB7XG4gIHZhciBpZCA9IF9yZWYuaWQsXG4gICAgICBhY3RpdmVLZXkgPSBfcmVmLmFjdGl2ZUtleSxcbiAgICAgIGFuaW1hdGVkID0gX3JlZi5hbmltYXRlZCxcbiAgICAgIHRhYlBvc2l0aW9uID0gX3JlZi50YWJQb3NpdGlvbixcbiAgICAgIHJ0bCA9IF9yZWYucnRsLFxuICAgICAgZGVzdHJveUluYWN0aXZlVGFiUGFuZSA9IF9yZWYuZGVzdHJveUluYWN0aXZlVGFiUGFuZTtcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KFRhYkNvbnRleHQpLFxuICAgICAgcHJlZml4Q2xzID0gX1JlYWN0JHVzZUNvbnRleHQucHJlZml4Q2xzLFxuICAgICAgdGFicyA9IF9SZWFjdCR1c2VDb250ZXh0LnRhYnM7XG5cbiAgdmFyIHRhYlBhbmVBbmltYXRlZCA9IGFuaW1hdGVkLnRhYlBhbmU7XG4gIHZhciBhY3RpdmVJbmRleCA9IHRhYnMuZmluZEluZGV4KGZ1bmN0aW9uICh0YWIpIHtcbiAgICByZXR1cm4gdGFiLmtleSA9PT0gYWN0aXZlS2V5O1xuICB9KTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1jb250ZW50LWhvbGRlclwiKSlcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWNvbnRlbnRcIiksIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItY29udGVudC1cIikuY29uY2F0KHRhYlBvc2l0aW9uKSwgX2RlZmluZVByb3BlcnR5KHt9LCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWNvbnRlbnQtYW5pbWF0ZWRcIiksIHRhYlBhbmVBbmltYXRlZCkpLFxuICAgIHN0eWxlOiBhY3RpdmVJbmRleCAmJiB0YWJQYW5lQW5pbWF0ZWQgPyBfZGVmaW5lUHJvcGVydHkoe30sIHJ0bCA/ICdtYXJnaW5SaWdodCcgOiAnbWFyZ2luTGVmdCcsIFwiLVwiLmNvbmNhdChhY3RpdmVJbmRleCwgXCIwMCVcIikpIDogbnVsbFxuICB9LCB0YWJzLm1hcChmdW5jdGlvbiAodGFiKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jbG9uZUVsZW1lbnQodGFiLm5vZGUsIHtcbiAgICAgIGtleTogdGFiLmtleSxcbiAgICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgICAgdGFiS2V5OiB0YWIua2V5LFxuICAgICAgaWQ6IGlkLFxuICAgICAgYW5pbWF0ZWQ6IHRhYlBhbmVBbmltYXRlZCxcbiAgICAgIGFjdGl2ZTogdGFiLmtleSA9PT0gYWN0aXZlS2V5LFxuICAgICAgZGVzdHJveUluYWN0aXZlVGFiUGFuZTogZGVzdHJveUluYWN0aXZlVGFiUGFuZVxuICAgIH0pO1xuICB9KSkpO1xufSIsImltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gVGFiUGFuZShfcmVmKSB7XG4gIHZhciBwcmVmaXhDbHMgPSBfcmVmLnByZWZpeENscyxcbiAgICAgIGZvcmNlUmVuZGVyID0gX3JlZi5mb3JjZVJlbmRlcixcbiAgICAgIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgc3R5bGUgPSBfcmVmLnN0eWxlLFxuICAgICAgaWQgPSBfcmVmLmlkLFxuICAgICAgYWN0aXZlID0gX3JlZi5hY3RpdmUsXG4gICAgICBhbmltYXRlZCA9IF9yZWYuYW5pbWF0ZWQsXG4gICAgICBkZXN0cm95SW5hY3RpdmVUYWJQYW5lID0gX3JlZi5kZXN0cm95SW5hY3RpdmVUYWJQYW5lLFxuICAgICAgdGFiS2V5ID0gX3JlZi50YWJLZXksXG4gICAgICBjaGlsZHJlbiA9IF9yZWYuY2hpbGRyZW47XG5cbiAgdmFyIF9SZWFjdCR1c2VTdGF0ZSA9IFJlYWN0LnVzZVN0YXRlKGZvcmNlUmVuZGVyKSxcbiAgICAgIF9SZWFjdCR1c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfUmVhY3QkdXNlU3RhdGUsIDIpLFxuICAgICAgdmlzaXRlZCA9IF9SZWFjdCR1c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRWaXNpdGVkID0gX1JlYWN0JHVzZVN0YXRlMlsxXTtcblxuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmIChhY3RpdmUpIHtcbiAgICAgIHNldFZpc2l0ZWQodHJ1ZSk7XG4gICAgfSBlbHNlIGlmIChkZXN0cm95SW5hY3RpdmVUYWJQYW5lKSB7XG4gICAgICBzZXRWaXNpdGVkKGZhbHNlKTtcbiAgICB9XG4gIH0sIFthY3RpdmUsIGRlc3Ryb3lJbmFjdGl2ZVRhYlBhbmVdKTtcbiAgdmFyIG1lcmdlZFN0eWxlID0ge307XG5cbiAgaWYgKCFhY3RpdmUpIHtcbiAgICBpZiAoYW5pbWF0ZWQpIHtcbiAgICAgIG1lcmdlZFN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgIG1lcmdlZFN0eWxlLmhlaWdodCA9IDA7XG4gICAgICBtZXJnZWRTdHlsZS5vdmVyZmxvd1kgPSAnaGlkZGVuJztcbiAgICB9IGVsc2Uge1xuICAgICAgbWVyZ2VkU3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGlkOiBpZCAmJiBcIlwiLmNvbmNhdChpZCwgXCItcGFuZWwtXCIpLmNvbmNhdCh0YWJLZXkpLFxuICAgIHJvbGU6IFwidGFicGFuZWxcIixcbiAgICB0YWJJbmRleDogYWN0aXZlID8gMCA6IC0xLFxuICAgIFwiYXJpYS1sYWJlbGxlZGJ5XCI6IGlkICYmIFwiXCIuY29uY2F0KGlkLCBcIi10YWItXCIpLmNvbmNhdCh0YWJLZXkpLFxuICAgIFwiYXJpYS1oaWRkZW5cIjogIWFjdGl2ZSxcbiAgICBzdHlsZTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtZXJnZWRTdHlsZSksIHN0eWxlKSxcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi10YWJwYW5lXCIpLCBhY3RpdmUgJiYgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi10YWJwYW5lLWFjdGl2ZVwiKSwgY2xhc3NOYW1lKVxuICB9LCAoYWN0aXZlIHx8IHZpc2l0ZWQgfHwgZm9yY2VSZW5kZXIpICYmIGNoaWxkcmVuKTtcbn0iLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCBfdHlwZW9mIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2ZcIjtcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzXCI7XG5pbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xudmFyIF9leGNsdWRlZCA9IFtcImlkXCIsIFwicHJlZml4Q2xzXCIsIFwiY2xhc3NOYW1lXCIsIFwiY2hpbGRyZW5cIiwgXCJkaXJlY3Rpb25cIiwgXCJhY3RpdmVLZXlcIiwgXCJkZWZhdWx0QWN0aXZlS2V5XCIsIFwiZWRpdGFibGVcIiwgXCJhbmltYXRlZFwiLCBcInRhYlBvc2l0aW9uXCIsIFwidGFiQmFyR3V0dGVyXCIsIFwidGFiQmFyU3R5bGVcIiwgXCJ0YWJCYXJFeHRyYUNvbnRlbnRcIiwgXCJsb2NhbGVcIiwgXCJtb3JlSWNvblwiLCBcIm1vcmVUcmFuc2l0aW9uTmFtZVwiLCBcImRlc3Ryb3lJbmFjdGl2ZVRhYlBhbmVcIiwgXCJyZW5kZXJUYWJCYXJcIiwgXCJvbkNoYW5nZVwiLCBcIm9uVGFiQ2xpY2tcIiwgXCJvblRhYlNjcm9sbFwiXTtcbi8vIEFjY2Vzc2liaWxpdHkgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQWNjZXNzaWJpbGl0eS9BUklBL1JvbGVzL1RhYl9Sb2xlXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgdG9BcnJheSBmcm9tIFwicmMtdXRpbC9lcy9DaGlsZHJlbi90b0FycmF5XCI7XG5pbXBvcnQgaXNNb2JpbGUgZnJvbSBcInJjLXV0aWwvZXMvaXNNb2JpbGVcIjtcbmltcG9ydCB1c2VNZXJnZWRTdGF0ZSBmcm9tIFwicmMtdXRpbC9lcy9ob29rcy91c2VNZXJnZWRTdGF0ZVwiO1xuaW1wb3J0IFRhYk5hdkxpc3QgZnJvbSAnLi9UYWJOYXZMaXN0JztcbmltcG9ydCBUYWJQYW5lbExpc3QgZnJvbSAnLi9UYWJQYW5lbExpc3QnO1xuaW1wb3J0IFRhYlBhbmUgZnJvbSAnLi9UYWJQYW5lbExpc3QvVGFiUGFuZSc7XG5pbXBvcnQgVGFiQ29udGV4dCBmcm9tICcuL1RhYkNvbnRleHQnO1xuLyoqXG4gKiBTaG91bGQgYWRkZWQgYW50ZDpcbiAqIC0gdHlwZVxuICpcbiAqIFJlbW92ZWQ6XG4gKiAtIG9uTmV4dENsaWNrXG4gKiAtIG9uUHJldkNsaWNrXG4gKiAtIGtleWJvYXJkXG4gKi9cbi8vIFVzZWQgZm9yIGFjY2Vzc2liaWxpdHlcblxudmFyIHV1aWQgPSAwO1xuXG5mdW5jdGlvbiBwYXJzZVRhYkxpc3QoY2hpbGRyZW4pIHtcbiAgcmV0dXJuIHRvQXJyYXkoY2hpbGRyZW4pLm1hcChmdW5jdGlvbiAobm9kZSkge1xuICAgIGlmICggLyojX19QVVJFX18qL1JlYWN0LmlzVmFsaWRFbGVtZW50KG5vZGUpKSB7XG4gICAgICB2YXIga2V5ID0gbm9kZS5rZXkgIT09IHVuZGVmaW5lZCA/IFN0cmluZyhub2RlLmtleSkgOiB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHtcbiAgICAgICAga2V5OiBrZXlcbiAgICAgIH0sIG5vZGUucHJvcHMpLCB7fSwge1xuICAgICAgICBub2RlOiBub2RlXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfSkuZmlsdGVyKGZ1bmN0aW9uICh0YWIpIHtcbiAgICByZXR1cm4gdGFiO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gVGFicyhfcmVmLCByZWYpIHtcbiAgdmFyIF9jbGFzc05hbWVzO1xuXG4gIHZhciBpZCA9IF9yZWYuaWQsXG4gICAgICBfcmVmJHByZWZpeENscyA9IF9yZWYucHJlZml4Q2xzLFxuICAgICAgcHJlZml4Q2xzID0gX3JlZiRwcmVmaXhDbHMgPT09IHZvaWQgMCA/ICdyYy10YWJzJyA6IF9yZWYkcHJlZml4Q2xzLFxuICAgICAgY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICBjaGlsZHJlbiA9IF9yZWYuY2hpbGRyZW4sXG4gICAgICBkaXJlY3Rpb24gPSBfcmVmLmRpcmVjdGlvbixcbiAgICAgIGFjdGl2ZUtleSA9IF9yZWYuYWN0aXZlS2V5LFxuICAgICAgZGVmYXVsdEFjdGl2ZUtleSA9IF9yZWYuZGVmYXVsdEFjdGl2ZUtleSxcbiAgICAgIGVkaXRhYmxlID0gX3JlZi5lZGl0YWJsZSxcbiAgICAgIF9yZWYkYW5pbWF0ZWQgPSBfcmVmLmFuaW1hdGVkLFxuICAgICAgYW5pbWF0ZWQgPSBfcmVmJGFuaW1hdGVkID09PSB2b2lkIDAgPyB7XG4gICAgaW5rQmFyOiB0cnVlLFxuICAgIHRhYlBhbmU6IGZhbHNlXG4gIH0gOiBfcmVmJGFuaW1hdGVkLFxuICAgICAgX3JlZiR0YWJQb3NpdGlvbiA9IF9yZWYudGFiUG9zaXRpb24sXG4gICAgICB0YWJQb3NpdGlvbiA9IF9yZWYkdGFiUG9zaXRpb24gPT09IHZvaWQgMCA/ICd0b3AnIDogX3JlZiR0YWJQb3NpdGlvbixcbiAgICAgIHRhYkJhckd1dHRlciA9IF9yZWYudGFiQmFyR3V0dGVyLFxuICAgICAgdGFiQmFyU3R5bGUgPSBfcmVmLnRhYkJhclN0eWxlLFxuICAgICAgdGFiQmFyRXh0cmFDb250ZW50ID0gX3JlZi50YWJCYXJFeHRyYUNvbnRlbnQsXG4gICAgICBsb2NhbGUgPSBfcmVmLmxvY2FsZSxcbiAgICAgIG1vcmVJY29uID0gX3JlZi5tb3JlSWNvbixcbiAgICAgIG1vcmVUcmFuc2l0aW9uTmFtZSA9IF9yZWYubW9yZVRyYW5zaXRpb25OYW1lLFxuICAgICAgZGVzdHJveUluYWN0aXZlVGFiUGFuZSA9IF9yZWYuZGVzdHJveUluYWN0aXZlVGFiUGFuZSxcbiAgICAgIHJlbmRlclRhYkJhciA9IF9yZWYucmVuZGVyVGFiQmFyLFxuICAgICAgb25DaGFuZ2UgPSBfcmVmLm9uQ2hhbmdlLFxuICAgICAgb25UYWJDbGljayA9IF9yZWYub25UYWJDbGljayxcbiAgICAgIG9uVGFiU2Nyb2xsID0gX3JlZi5vblRhYlNjcm9sbCxcbiAgICAgIHJlc3RQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBfZXhjbHVkZWQpO1xuXG4gIHZhciB0YWJzID0gcGFyc2VUYWJMaXN0KGNoaWxkcmVuKTtcbiAgdmFyIHJ0bCA9IGRpcmVjdGlvbiA9PT0gJ3J0bCc7XG4gIHZhciBtZXJnZWRBbmltYXRlZDtcblxuICBpZiAoYW5pbWF0ZWQgPT09IGZhbHNlKSB7XG4gICAgbWVyZ2VkQW5pbWF0ZWQgPSB7XG4gICAgICBpbmtCYXI6IGZhbHNlLFxuICAgICAgdGFiUGFuZTogZmFsc2VcbiAgICB9O1xuICB9IGVsc2UgaWYgKGFuaW1hdGVkID09PSB0cnVlKSB7XG4gICAgbWVyZ2VkQW5pbWF0ZWQgPSB7XG4gICAgICBpbmtCYXI6IHRydWUsXG4gICAgICB0YWJQYW5lOiB0cnVlXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBtZXJnZWRBbmltYXRlZCA9IF9vYmplY3RTcHJlYWQoe1xuICAgICAgaW5rQmFyOiB0cnVlLFxuICAgICAgdGFiUGFuZTogZmFsc2VcbiAgICB9LCBfdHlwZW9mKGFuaW1hdGVkKSA9PT0gJ29iamVjdCcgPyBhbmltYXRlZCA6IHt9KTtcbiAgfSAvLyA9PT09PT09PT09PT09PT09PT09PT09PT0gTW9iaWxlID09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKGZhbHNlKSxcbiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLFxuICAgICAgbW9iaWxlID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNldE1vYmlsZSA9IF91c2VTdGF0ZTJbMV07XG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAvLyBPbmx5IHVwZGF0ZSBvbiB0aGUgY2xpZW50IHNpZGVcbiAgICBzZXRNb2JpbGUoaXNNb2JpbGUoKSk7XG4gIH0sIFtdKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PSBBY3RpdmUgS2V5ID09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgX3VzZU1lcmdlZFN0YXRlID0gdXNlTWVyZ2VkU3RhdGUoZnVuY3Rpb24gKCkge1xuICAgIHZhciBfdGFicyQ7XG5cbiAgICByZXR1cm4gKF90YWJzJCA9IHRhYnNbMF0pID09PSBudWxsIHx8IF90YWJzJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RhYnMkLmtleTtcbiAgfSwge1xuICAgIHZhbHVlOiBhY3RpdmVLZXksXG4gICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0QWN0aXZlS2V5XG4gIH0pLFxuICAgICAgX3VzZU1lcmdlZFN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VNZXJnZWRTdGF0ZSwgMiksXG4gICAgICBtZXJnZWRBY3RpdmVLZXkgPSBfdXNlTWVyZ2VkU3RhdGUyWzBdLFxuICAgICAgc2V0TWVyZ2VkQWN0aXZlS2V5ID0gX3VzZU1lcmdlZFN0YXRlMlsxXTtcblxuICB2YXIgX3VzZVN0YXRlMyA9IHVzZVN0YXRlKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGFicy5maW5kSW5kZXgoZnVuY3Rpb24gKHRhYikge1xuICAgICAgcmV0dXJuIHRhYi5rZXkgPT09IG1lcmdlZEFjdGl2ZUtleTtcbiAgICB9KTtcbiAgfSksXG4gICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksXG4gICAgICBhY3RpdmVJbmRleCA9IF91c2VTdGF0ZTRbMF0sXG4gICAgICBzZXRBY3RpdmVJbmRleCA9IF91c2VTdGF0ZTRbMV07IC8vIFJlc2V0IGFjdGl2ZSBrZXkgaWYgbm90IGV4aXN0IGFueW1vcmVcblxuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG5ld0FjdGl2ZUluZGV4ID0gdGFicy5maW5kSW5kZXgoZnVuY3Rpb24gKHRhYikge1xuICAgICAgcmV0dXJuIHRhYi5rZXkgPT09IG1lcmdlZEFjdGl2ZUtleTtcbiAgICB9KTtcblxuICAgIGlmIChuZXdBY3RpdmVJbmRleCA9PT0gLTEpIHtcbiAgICAgIHZhciBfdGFicyRuZXdBY3RpdmVJbmRleDtcblxuICAgICAgbmV3QWN0aXZlSW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihhY3RpdmVJbmRleCwgdGFicy5sZW5ndGggLSAxKSk7XG4gICAgICBzZXRNZXJnZWRBY3RpdmVLZXkoKF90YWJzJG5ld0FjdGl2ZUluZGV4ID0gdGFic1tuZXdBY3RpdmVJbmRleF0pID09PSBudWxsIHx8IF90YWJzJG5ld0FjdGl2ZUluZGV4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGFicyRuZXdBY3RpdmVJbmRleC5rZXkpO1xuICAgIH1cblxuICAgIHNldEFjdGl2ZUluZGV4KG5ld0FjdGl2ZUluZGV4KTtcbiAgfSwgW3RhYnMubWFwKGZ1bmN0aW9uICh0YWIpIHtcbiAgICByZXR1cm4gdGFiLmtleTtcbiAgfSkuam9pbignXycpLCBtZXJnZWRBY3RpdmVLZXksIGFjdGl2ZUluZGV4XSk7IC8vID09PT09PT09PT09PT09PT09PT09PSBBY2Nlc3NpYmlsaXR5ID09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIF91c2VNZXJnZWRTdGF0ZTMgPSB1c2VNZXJnZWRTdGF0ZShudWxsLCB7XG4gICAgdmFsdWU6IGlkXG4gIH0pLFxuICAgICAgX3VzZU1lcmdlZFN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VNZXJnZWRTdGF0ZTMsIDIpLFxuICAgICAgbWVyZ2VkSWQgPSBfdXNlTWVyZ2VkU3RhdGU0WzBdLFxuICAgICAgc2V0TWVyZ2VkSWQgPSBfdXNlTWVyZ2VkU3RhdGU0WzFdO1xuXG4gIHZhciBtZXJnZWRUYWJQb3NpdGlvbiA9IHRhYlBvc2l0aW9uO1xuXG4gIGlmIChtb2JpbGUgJiYgIVsnbGVmdCcsICdyaWdodCddLmluY2x1ZGVzKHRhYlBvc2l0aW9uKSkge1xuICAgIG1lcmdlZFRhYlBvc2l0aW9uID0gJ3RvcCc7XG4gIH0gLy8gQXN5bmMgZ2VuZXJhdGUgaWQgdG8gYXZvaWQgc3NyIG1hcHBpbmcgZmFpbGVkXG5cblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmICghaWQpIHtcbiAgICAgIHNldE1lcmdlZElkKFwicmMtdGFicy1cIi5jb25jYXQocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0JyA/ICd0ZXN0JyA6IHV1aWQpKTtcbiAgICAgIHV1aWQgKz0gMTtcbiAgICB9XG4gIH0sIFtdKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09IEV2ZW50cyA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBmdW5jdGlvbiBvbkludGVybmFsVGFiQ2xpY2soa2V5LCBlKSB7XG4gICAgb25UYWJDbGljayA9PT0gbnVsbCB8fCBvblRhYkNsaWNrID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvblRhYkNsaWNrKGtleSwgZSk7XG4gICAgc2V0TWVyZ2VkQWN0aXZlS2V5KGtleSk7XG4gICAgb25DaGFuZ2UgPT09IG51bGwgfHwgb25DaGFuZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uQ2hhbmdlKGtleSk7XG4gIH0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09IFJlbmRlciA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBzaGFyZWRQcm9wcyA9IHtcbiAgICBpZDogbWVyZ2VkSWQsXG4gICAgYWN0aXZlS2V5OiBtZXJnZWRBY3RpdmVLZXksXG4gICAgYW5pbWF0ZWQ6IG1lcmdlZEFuaW1hdGVkLFxuICAgIHRhYlBvc2l0aW9uOiBtZXJnZWRUYWJQb3NpdGlvbixcbiAgICBydGw6IHJ0bCxcbiAgICBtb2JpbGU6IG1vYmlsZVxuICB9O1xuICB2YXIgdGFiTmF2QmFyO1xuXG4gIHZhciB0YWJOYXZCYXJQcm9wcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc2hhcmVkUHJvcHMpLCB7fSwge1xuICAgIGVkaXRhYmxlOiBlZGl0YWJsZSxcbiAgICBsb2NhbGU6IGxvY2FsZSxcbiAgICBtb3JlSWNvbjogbW9yZUljb24sXG4gICAgbW9yZVRyYW5zaXRpb25OYW1lOiBtb3JlVHJhbnNpdGlvbk5hbWUsXG4gICAgdGFiQmFyR3V0dGVyOiB0YWJCYXJHdXR0ZXIsXG4gICAgb25UYWJDbGljazogb25JbnRlcm5hbFRhYkNsaWNrLFxuICAgIG9uVGFiU2Nyb2xsOiBvblRhYlNjcm9sbCxcbiAgICBleHRyYTogdGFiQmFyRXh0cmFDb250ZW50LFxuICAgIHN0eWxlOiB0YWJCYXJTdHlsZSxcbiAgICBwYW5lczogY2hpbGRyZW5cbiAgfSk7XG5cbiAgaWYgKHJlbmRlclRhYkJhcikge1xuICAgIHRhYk5hdkJhciA9IHJlbmRlclRhYkJhcih0YWJOYXZCYXJQcm9wcywgVGFiTmF2TGlzdCk7XG4gIH0gZWxzZSB7XG4gICAgdGFiTmF2QmFyID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVGFiTmF2TGlzdCwgdGFiTmF2QmFyUHJvcHMpO1xuICB9XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRhYkNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZToge1xuICAgICAgdGFiczogdGFicyxcbiAgICAgIHByZWZpeENsczogcHJlZml4Q2xzXG4gICAgfVxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfZXh0ZW5kcyh7XG4gICAgcmVmOiByZWYsXG4gICAgaWQ6IGlkLFxuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhwcmVmaXhDbHMsIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItXCIpLmNvbmNhdChtZXJnZWRUYWJQb3NpdGlvbiksIChfY2xhc3NOYW1lcyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItbW9iaWxlXCIpLCBtb2JpbGUpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItZWRpdGFibGVcIiksIGVkaXRhYmxlKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXJ0bFwiKSwgcnRsKSwgX2NsYXNzTmFtZXMpLCBjbGFzc05hbWUpXG4gIH0sIHJlc3RQcm9wcyksIHRhYk5hdkJhciwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVGFiUGFuZWxMaXN0LCBfZXh0ZW5kcyh7XG4gICAgZGVzdHJveUluYWN0aXZlVGFiUGFuZTogZGVzdHJveUluYWN0aXZlVGFiUGFuZVxuICB9LCBzaGFyZWRQcm9wcywge1xuICAgIGFuaW1hdGVkOiBtZXJnZWRBbmltYXRlZFxuICB9KSkpKTtcbn1cblxudmFyIEZvcndhcmRUYWJzID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoVGFicyk7XG5Gb3J3YXJkVGFicy5UYWJQYW5lID0gVGFiUGFuZTtcbmV4cG9ydCBkZWZhdWx0IEZvcndhcmRUYWJzOyIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuZXhwb3J0IHZhciBNaW5pU3RvcmVDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dChudWxsKTtcbnZhciBQcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUHJvdmlkZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgUHJvdmlkZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KE1pbmlTdG9yZUNvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IHRoaXMucHJvcHMuc3RvcmUgfSwgdGhpcy5wcm9wcy5jaGlsZHJlbikpO1xuICAgIH07XG4gICAgcmV0dXJuIFByb3ZpZGVyO1xufShSZWFjdC5Db21wb25lbnQpKTtcbmV4cG9ydCB7IFByb3ZpZGVyIH07XG4iLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgc2hhbGxvd0VxdWFsIGZyb20gJ3NoYWxsb3dlcXVhbCc7XG5pbXBvcnQgaG9pc3RTdGF0aWNzIGZyb20gJ2hvaXN0LW5vbi1yZWFjdC1zdGF0aWNzJztcbmltcG9ydCB7IE1pbmlTdG9yZUNvbnRleHQgfSBmcm9tICcuL1Byb3ZpZGVyJztcbmZ1bmN0aW9uIGdldERpc3BsYXlOYW1lKFdyYXBwZWRDb21wb25lbnQpIHtcbiAgICByZXR1cm4gV3JhcHBlZENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBXcmFwcGVkQ29tcG9uZW50Lm5hbWUgfHwgJ0NvbXBvbmVudCc7XG59XG52YXIgZGVmYXVsdE1hcFN0YXRlVG9Qcm9wcyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICh7fSk7IH07XG5leHBvcnQgZnVuY3Rpb24gY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgIHZhciBzaG91bGRTdWJzY3JpYmUgPSAhIW1hcFN0YXRlVG9Qcm9wcztcbiAgICB2YXIgZmluYWxNYXBTdGF0ZVRvUHJvcHMgPSBtYXBTdGF0ZVRvUHJvcHMgfHwgZGVmYXVsdE1hcFN0YXRlVG9Qcm9wcztcbiAgICByZXR1cm4gZnVuY3Rpb24gd3JhcFdpdGhDb25uZWN0KFdyYXBwZWRDb21wb25lbnQpIHtcbiAgICAgICAgdmFyIENvbm5lY3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgICAgICAgICBfX2V4dGVuZHMoQ29ubmVjdCwgX3N1cGVyKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIENvbm5lY3QocHJvcHMsIGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcywgY29udGV4dCkgfHwgdGhpcztcbiAgICAgICAgICAgICAgICBfdGhpcy51bnN1YnNjcmliZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLnVuc3Vic2NyaWJlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIG5leHRTdGF0ZSA9IGZpbmFsTWFwU3RhdGVUb1Byb3BzKF90aGlzLnN0b3JlLmdldFN0YXRlKCksIF90aGlzLnByb3BzKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBzdWJzY3JpYmVkOiBuZXh0U3RhdGUgfSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBfdGhpcy5zdG9yZSA9IF90aGlzLmNvbnRleHQ7XG4gICAgICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZWQ6IGZpbmFsTWFwU3RhdGVUb1Byb3BzKF90aGlzLnN0b3JlLmdldFN0YXRlKCksIHByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgc3RvcmU6IF90aGlzLnN0b3JlLFxuICAgICAgICAgICAgICAgICAgICBwcm9wczogcHJvcHMsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBDb25uZWN0LmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyA9IGZ1bmN0aW9uIChwcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgICAgICAgICAgLy8gdXNpbmcgb3duUHJvcHNcbiAgICAgICAgICAgICAgICBpZiAobWFwU3RhdGVUb1Byb3BzICYmIG1hcFN0YXRlVG9Qcm9wcy5sZW5ndGggPT09IDIgJiYgcHJvcHMgIT09IHByZXZTdGF0ZS5wcm9wcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlZDogZmluYWxNYXBTdGF0ZVRvUHJvcHMocHJldlN0YXRlLnN0b3JlLmdldFN0YXRlKCksIHByb3BzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzOiBwcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcHJvcHM6IHByb3BzIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgQ29ubmVjdC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cnlTdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBDb25uZWN0LnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyeVVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgQ29ubmVjdC5wcm90b3R5cGUuc2hvdWxkQ29tcG9uZW50VXBkYXRlID0gZnVuY3Rpb24gKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICghc2hhbGxvd0VxdWFsKHRoaXMucHJvcHMsIG5leHRQcm9wcykgfHxcbiAgICAgICAgICAgICAgICAgICAgIXNoYWxsb3dFcXVhbCh0aGlzLnN0YXRlLnN1YnNjcmliZWQsIG5leHRTdGF0ZS5zdWJzY3JpYmVkKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgQ29ubmVjdC5wcm90b3R5cGUudHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChzaG91bGRTdWJzY3JpYmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSA9IHRoaXMuc3RvcmUuc3Vic2NyaWJlKHRoaXMuaGFuZGxlQ2hhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDaGFuZ2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgQ29ubmVjdC5wcm90b3R5cGUudHJ5VW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudW5zdWJzY3JpYmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgQ29ubmVjdC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wcyA9IF9fYXNzaWduKF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLnByb3BzKSwgdGhpcy5zdGF0ZS5zdWJzY3JpYmVkKSwgeyBzdG9yZTogdGhpcy5zdG9yZSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChXcmFwcGVkQ29tcG9uZW50LCBfX2Fzc2lnbih7fSwgcHJvcHMsIHsgcmVmOiB0aGlzLnByb3BzLm1pbmlTdG9yZUZvcndhcmRlZFJlZiB9KSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgQ29ubmVjdC5kaXNwbGF5TmFtZSA9IFwiQ29ubmVjdChcIiArIGdldERpc3BsYXlOYW1lKFdyYXBwZWRDb21wb25lbnQpICsgXCIpXCI7XG4gICAgICAgICAgICBDb25uZWN0LmNvbnRleHRUeXBlID0gTWluaVN0b3JlQ29udGV4dDtcbiAgICAgICAgICAgIHJldHVybiBDb25uZWN0O1xuICAgICAgICB9KFJlYWN0LkNvbXBvbmVudCkpO1xuICAgICAgICBpZiAob3B0aW9ucy5mb3J3YXJkUmVmKSB7XG4gICAgICAgICAgICB2YXIgZm9yd2FyZGVkID0gUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAocHJvcHMsIHJlZikge1xuICAgICAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENvbm5lY3QsIF9fYXNzaWduKHt9LCBwcm9wcywgeyBtaW5pU3RvcmVGb3J3YXJkZWRSZWY6IHJlZiB9KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBob2lzdFN0YXRpY3MoZm9yd2FyZGVkLCBXcmFwcGVkQ29tcG9uZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaG9pc3RTdGF0aWNzKENvbm5lY3QsIFdyYXBwZWRDb21wb25lbnQpO1xuICAgIH07XG59XG4iLCJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZShpbml0aWFsU3RhdGUpIHtcbiAgICB2YXIgc3RhdGUgPSBpbml0aWFsU3RhdGU7XG4gICAgdmFyIGxpc3RlbmVycyA9IFtdO1xuICAgIGZ1bmN0aW9uIHNldFN0YXRlKHBhcnRpYWwpIHtcbiAgICAgICAgc3RhdGUgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgc3RhdGUpLCBwYXJ0aWFsKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxpc3RlbmVyc1tpXSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFN0YXRlKCkge1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN1YnNjcmliZShsaXN0ZW5lcikge1xuICAgICAgICBsaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzZXRTdGF0ZTogc2V0U3RhdGUsXG4gICAgICAgIGdldFN0YXRlOiBnZXRTdGF0ZSxcbiAgICAgICAgc3Vic2NyaWJlOiBzdWJzY3JpYmUsXG4gICAgfTtcbn1cbiIsIi8qKlxuICogU2FmZSBjaGFpbmVkIGZ1bmN0aW9uXG4gKlxuICogV2lsbCBvbmx5IGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBpZiBuZWVkZWQsXG4gKiBvdGhlcndpc2Ugd2lsbCBwYXNzIGJhY2sgZXhpc3RpbmcgZnVuY3Rpb25zIG9yIG51bGwuXG4gKlxuICogQHJldHVybnMge2Z1bmN0aW9ufG51bGx9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZUNoYWluZWRGdW5jdGlvbigpIHtcbiAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG5cbiAgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIGFyZ3NbMF07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gY2hhaW5lZEZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGFyZ3NbaV0gJiYgYXJnc1tpXS5hcHBseSkge1xuICAgICAgICBhcmdzW2ldLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufSIsImltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbi8vIE1JVCBMaWNlbnNlIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2thaW1hbGxlYS9pc01vYmlsZVxudmFyIGFwcGxlUGhvbmUgPSAvaVBob25lL2k7XG52YXIgYXBwbGVJcG9kID0gL2lQb2QvaTtcbnZhciBhcHBsZVRhYmxldCA9IC9pUGFkL2k7XG52YXIgYW5kcm9pZFBob25lID0gL1xcYkFuZHJvaWQoPzouKylNb2JpbGVcXGIvaTsgLy8gTWF0Y2ggJ0FuZHJvaWQnIEFORCAnTW9iaWxlJ1xuXG52YXIgYW5kcm9pZFRhYmxldCA9IC9BbmRyb2lkL2k7XG52YXIgYW1hem9uUGhvbmUgPSAvXFxiQW5kcm9pZCg/Oi4rKVNENDkzMFVSXFxiL2k7XG52YXIgYW1hem9uVGFibGV0ID0gL1xcYkFuZHJvaWQoPzouKykoPzpLRltBLVpdezIsNH0pXFxiL2k7XG52YXIgd2luZG93c1Bob25lID0gL1dpbmRvd3MgUGhvbmUvaTtcbnZhciB3aW5kb3dzVGFibGV0ID0gL1xcYldpbmRvd3MoPzouKylBUk1cXGIvaTsgLy8gTWF0Y2ggJ1dpbmRvd3MnIEFORCAnQVJNJ1xuXG52YXIgb3RoZXJCbGFja2JlcnJ5ID0gL0JsYWNrQmVycnkvaTtcbnZhciBvdGhlckJsYWNrYmVycnkxMCA9IC9CQjEwL2k7XG52YXIgb3RoZXJPcGVyYSA9IC9PcGVyYSBNaW5pL2k7XG52YXIgb3RoZXJDaHJvbWUgPSAvXFxiKENyaU9TfENocm9tZSkoPzouKylNb2JpbGUvaTtcbnZhciBvdGhlckZpcmVmb3ggPSAvTW9iaWxlKD86LispRmlyZWZveFxcYi9pOyAvLyBNYXRjaCAnTW9iaWxlJyBBTkQgJ0ZpcmVmb3gnXG5cbmZ1bmN0aW9uIG1hdGNoKHJlZ2V4LCB1c2VyQWdlbnQpIHtcbiAgcmV0dXJuIHJlZ2V4LnRlc3QodXNlckFnZW50KTtcbn1cblxuZnVuY3Rpb24gaXNNb2JpbGUodXNlckFnZW50KSB7XG4gIHZhciB1YSA9IHVzZXJBZ2VudCB8fCAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgPyBuYXZpZ2F0b3IudXNlckFnZW50IDogJycpOyAvLyBGYWNlYm9vayBtb2JpbGUgYXBwJ3MgaW50ZWdyYXRlZCBicm93c2VyIGFkZHMgYSBidW5jaCBvZiBzdHJpbmdzIHRoYXRcbiAgLy8gbWF0Y2ggZXZlcnl0aGluZy4gU3RyaXAgaXQgb3V0IGlmIGl0IGV4aXN0cy5cblxuICB2YXIgdG1wID0gKHVhIHx8ICcnKS5zcGxpdCgnW0ZCQU4nKTtcblxuICBpZiAodHlwZW9mIHRtcFsxXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgX3RtcCA9IHRtcDtcblxuICAgIHZhciBfdG1wMiA9IF9zbGljZWRUb0FycmF5KF90bXAsIDEpO1xuXG4gICAgdWEgPSBfdG1wMlswXTtcbiAgfSAvLyBUd2l0dGVyIG1vYmlsZSBhcHAncyBpbnRlZ3JhdGVkIGJyb3dzZXIgb24gaVBhZCBhZGRzIGEgXCJUd2l0dGVyIGZvclxuICAvLyBpUGhvbmVcIiBzdHJpbmcuIFNhbWUgcHJvYmFibHkgaGFwcGVucyBvbiBvdGhlciB0YWJsZXQgcGxhdGZvcm1zLlxuICAvLyBUaGlzIHdpbGwgY29uZnVzZSBkZXRlY3Rpb24gc28gc3RyaXAgaXQgb3V0IGlmIGl0IGV4aXN0cy5cblxuXG4gIHRtcCA9IHVhLnNwbGl0KCdUd2l0dGVyJyk7XG5cbiAgaWYgKHR5cGVvZiB0bXBbMV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIF90bXAzID0gdG1wO1xuXG4gICAgdmFyIF90bXA0ID0gX3NsaWNlZFRvQXJyYXkoX3RtcDMsIDEpO1xuXG4gICAgdWEgPSBfdG1wNFswXTtcbiAgfVxuXG4gIHZhciByZXN1bHQgPSB7XG4gICAgYXBwbGU6IHtcbiAgICAgIHBob25lOiBtYXRjaChhcHBsZVBob25lLCB1YSkgJiYgIW1hdGNoKHdpbmRvd3NQaG9uZSwgdWEpLFxuICAgICAgaXBvZDogbWF0Y2goYXBwbGVJcG9kLCB1YSksXG4gICAgICB0YWJsZXQ6ICFtYXRjaChhcHBsZVBob25lLCB1YSkgJiYgbWF0Y2goYXBwbGVUYWJsZXQsIHVhKSAmJiAhbWF0Y2god2luZG93c1Bob25lLCB1YSksXG4gICAgICBkZXZpY2U6IChtYXRjaChhcHBsZVBob25lLCB1YSkgfHwgbWF0Y2goYXBwbGVJcG9kLCB1YSkgfHwgbWF0Y2goYXBwbGVUYWJsZXQsIHVhKSkgJiYgIW1hdGNoKHdpbmRvd3NQaG9uZSwgdWEpXG4gICAgfSxcbiAgICBhbWF6b246IHtcbiAgICAgIHBob25lOiBtYXRjaChhbWF6b25QaG9uZSwgdWEpLFxuICAgICAgdGFibGV0OiAhbWF0Y2goYW1hem9uUGhvbmUsIHVhKSAmJiBtYXRjaChhbWF6b25UYWJsZXQsIHVhKSxcbiAgICAgIGRldmljZTogbWF0Y2goYW1hem9uUGhvbmUsIHVhKSB8fCBtYXRjaChhbWF6b25UYWJsZXQsIHVhKVxuICAgIH0sXG4gICAgYW5kcm9pZDoge1xuICAgICAgcGhvbmU6ICFtYXRjaCh3aW5kb3dzUGhvbmUsIHVhKSAmJiBtYXRjaChhbWF6b25QaG9uZSwgdWEpIHx8ICFtYXRjaCh3aW5kb3dzUGhvbmUsIHVhKSAmJiBtYXRjaChhbmRyb2lkUGhvbmUsIHVhKSxcbiAgICAgIHRhYmxldDogIW1hdGNoKHdpbmRvd3NQaG9uZSwgdWEpICYmICFtYXRjaChhbWF6b25QaG9uZSwgdWEpICYmICFtYXRjaChhbmRyb2lkUGhvbmUsIHVhKSAmJiAobWF0Y2goYW1hem9uVGFibGV0LCB1YSkgfHwgbWF0Y2goYW5kcm9pZFRhYmxldCwgdWEpKSxcbiAgICAgIGRldmljZTogIW1hdGNoKHdpbmRvd3NQaG9uZSwgdWEpICYmIChtYXRjaChhbWF6b25QaG9uZSwgdWEpIHx8IG1hdGNoKGFtYXpvblRhYmxldCwgdWEpIHx8IG1hdGNoKGFuZHJvaWRQaG9uZSwgdWEpIHx8IG1hdGNoKGFuZHJvaWRUYWJsZXQsIHVhKSkgfHwgbWF0Y2goL1xcYm9raHR0cFxcYi9pLCB1YSlcbiAgICB9LFxuICAgIHdpbmRvd3M6IHtcbiAgICAgIHBob25lOiBtYXRjaCh3aW5kb3dzUGhvbmUsIHVhKSxcbiAgICAgIHRhYmxldDogbWF0Y2god2luZG93c1RhYmxldCwgdWEpLFxuICAgICAgZGV2aWNlOiBtYXRjaCh3aW5kb3dzUGhvbmUsIHVhKSB8fCBtYXRjaCh3aW5kb3dzVGFibGV0LCB1YSlcbiAgICB9LFxuICAgIG90aGVyOiB7XG4gICAgICBibGFja2JlcnJ5OiBtYXRjaChvdGhlckJsYWNrYmVycnksIHVhKSxcbiAgICAgIGJsYWNrYmVycnkxMDogbWF0Y2gob3RoZXJCbGFja2JlcnJ5MTAsIHVhKSxcbiAgICAgIG9wZXJhOiBtYXRjaChvdGhlck9wZXJhLCB1YSksXG4gICAgICBmaXJlZm94OiBtYXRjaChvdGhlckZpcmVmb3gsIHVhKSxcbiAgICAgIGNocm9tZTogbWF0Y2gob3RoZXJDaHJvbWUsIHVhKSxcbiAgICAgIGRldmljZTogbWF0Y2gob3RoZXJCbGFja2JlcnJ5LCB1YSkgfHwgbWF0Y2gob3RoZXJCbGFja2JlcnJ5MTAsIHVhKSB8fCBtYXRjaChvdGhlck9wZXJhLCB1YSkgfHwgbWF0Y2gob3RoZXJGaXJlZm94LCB1YSkgfHwgbWF0Y2gob3RoZXJDaHJvbWUsIHVhKVxuICAgIH0sXG4gICAgLy8gQWRkaXRpb25hbFxuICAgIGFueTogbnVsbCxcbiAgICBwaG9uZTogbnVsbCxcbiAgICB0YWJsZXQ6IG51bGxcbiAgfTtcbiAgcmVzdWx0LmFueSA9IHJlc3VsdC5hcHBsZS5kZXZpY2UgfHwgcmVzdWx0LmFuZHJvaWQuZGV2aWNlIHx8IHJlc3VsdC53aW5kb3dzLmRldmljZSB8fCByZXN1bHQub3RoZXIuZGV2aWNlOyAvLyBleGNsdWRlcyAnb3RoZXInIGRldmljZXMgYW5kIGlwb2RzLCB0YXJnZXRpbmcgdG91Y2hzY3JlZW4gcGhvbmVzXG5cbiAgcmVzdWx0LnBob25lID0gcmVzdWx0LmFwcGxlLnBob25lIHx8IHJlc3VsdC5hbmRyb2lkLnBob25lIHx8IHJlc3VsdC53aW5kb3dzLnBob25lO1xuICByZXN1bHQudGFibGV0ID0gcmVzdWx0LmFwcGxlLnRhYmxldCB8fCByZXN1bHQuYW5kcm9pZC50YWJsZXQgfHwgcmVzdWx0LndpbmRvd3MudGFibGV0O1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG52YXIgZGVmYXVsdFJlc3VsdCA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaXNNb2JpbGUoKSksIHt9LCB7XG4gIGlzTW9iaWxlOiBpc01vYmlsZVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGRlZmF1bHRSZXN1bHQ7IiwiaW1wb3J0IF90eXBlb2YgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZlwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGlzTW9iaWxlIGZyb20gJy4vdXRpbHMvaXNNb2JpbGUnO1xuZXhwb3J0IGZ1bmN0aW9uIG5vb3AoKSB7fVxuZXhwb3J0IGZ1bmN0aW9uIGdldEtleUZyb21DaGlsZHJlbkluZGV4KGNoaWxkLCBtZW51RXZlbnRLZXksIGluZGV4KSB7XG4gIHZhciBwcmVmaXggPSBtZW51RXZlbnRLZXkgfHwgJyc7XG4gIHJldHVybiBjaGlsZC5rZXkgfHwgXCJcIi5jb25jYXQocHJlZml4LCBcIml0ZW1fXCIpLmNvbmNhdChpbmRleCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TWVudUlkRnJvbVN1Yk1lbnVFdmVudEtleShldmVudEtleSkge1xuICByZXR1cm4gXCJcIi5jb25jYXQoZXZlbnRLZXksIFwiLW1lbnUtXCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxvb3BNZW51SXRlbShjaGlsZHJlbiwgY2IpIHtcbiAgdmFyIGluZGV4ID0gLTE7XG4gIFJlYWN0LkNoaWxkcmVuLmZvckVhY2goY2hpbGRyZW4sIGZ1bmN0aW9uIChjKSB7XG4gICAgaW5kZXggKz0gMTtcblxuICAgIGlmIChjICYmIGMudHlwZSAmJiBjLnR5cGUuaXNNZW51SXRlbUdyb3VwKSB7XG4gICAgICBSZWFjdC5DaGlsZHJlbi5mb3JFYWNoKGMucHJvcHMuY2hpbGRyZW4sIGZ1bmN0aW9uIChjMikge1xuICAgICAgICBpbmRleCArPSAxO1xuICAgICAgICBjYihjMiwgaW5kZXgpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNiKGMsIGluZGV4KTtcbiAgICB9XG4gIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxvb3BNZW51SXRlbVJlY3Vyc2l2ZWx5KGNoaWxkcmVuLCBrZXlzLCByZXQpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghY2hpbGRyZW4gfHwgcmV0LmZpbmQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBSZWFjdC5DaGlsZHJlbi5mb3JFYWNoKGNoaWxkcmVuLCBmdW5jdGlvbiAoYykge1xuICAgIGlmIChjKSB7XG4gICAgICB2YXIgY29uc3RydWN0ID0gYy50eXBlO1xuXG4gICAgICBpZiAoIWNvbnN0cnVjdCB8fCAhKGNvbnN0cnVjdC5pc1N1Yk1lbnUgfHwgY29uc3RydWN0LmlzTWVudUl0ZW0gfHwgY29uc3RydWN0LmlzTWVudUl0ZW1Hcm91cCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoa2V5cy5pbmRleE9mKGMua2V5KSAhPT0gLTEpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgIHJldC5maW5kID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoYy5wcm9wcy5jaGlsZHJlbikge1xuICAgICAgICBsb29wTWVudUl0ZW1SZWN1cnNpdmVseShjLnByb3BzLmNoaWxkcmVuLCBrZXlzLCByZXQpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5leHBvcnQgdmFyIG1lbnVBbGxQcm9wcyA9IFsnZGVmYXVsdFNlbGVjdGVkS2V5cycsICdzZWxlY3RlZEtleXMnLCAnZGVmYXVsdE9wZW5LZXlzJywgJ29wZW5LZXlzJywgJ21vZGUnLCAnZ2V0UG9wdXBDb250YWluZXInLCAnb25TZWxlY3QnLCAnb25EZXNlbGVjdCcsICdvbkRlc3Ryb3knLCAnb3BlblRyYW5zaXRpb25OYW1lJywgJ29wZW5BbmltYXRpb24nLCAnc3ViTWVudU9wZW5EZWxheScsICdzdWJNZW51Q2xvc2VEZWxheScsICdmb3JjZVN1Yk1lbnVSZW5kZXInLCAndHJpZ2dlclN1Yk1lbnVBY3Rpb24nLCAnbGV2ZWwnLCAnc2VsZWN0YWJsZScsICdtdWx0aXBsZScsICdvbk9wZW5DaGFuZ2UnLCAndmlzaWJsZScsICdmb2N1c2FibGUnLCAnZGVmYXVsdEFjdGl2ZUZpcnN0JywgJ3ByZWZpeENscycsICdpbmxpbmVJbmRlbnQnLCAncGFyZW50TWVudScsICd0aXRsZScsICdyb290UHJlZml4Q2xzJywgJ2V2ZW50S2V5JywgJ2FjdGl2ZScsICdvbkl0ZW1Ib3ZlcicsICdvblRpdGxlTW91c2VFbnRlcicsICdvblRpdGxlTW91c2VMZWF2ZScsICdvblRpdGxlQ2xpY2snLCAncG9wdXBBbGlnbicsICdwb3B1cE9mZnNldCcsICdpc09wZW4nLCAncmVuZGVyTWVudUl0ZW0nLCAnbWFudWFsUmVmJywgJ3N1Yk1lbnVLZXknLCAnZGlzYWJsZWQnLCAnaW5kZXgnLCAnaXNTZWxlY3RlZCcsICdzdG9yZScsICdhY3RpdmVLZXknLCAnYnVpbHRpblBsYWNlbWVudHMnLCAnb3ZlcmZsb3dlZEluZGljYXRvcicsICdtb3Rpb24nLCAvLyB0aGUgZm9sbG93aW5nIGtleXMgZm91bmQgbmVlZCB0byBiZSByZW1vdmVkIGZyb20gdGVzdCByZWdyZXNzaW9uXG4nYXR0cmlidXRlJywgJ3ZhbHVlJywgJ3BvcHVwQ2xhc3NOYW1lJywgJ2lubGluZUNvbGxhcHNlZCcsICdtZW51JywgJ3RoZW1lJywgJ2l0ZW1JY29uJywgJ2V4cGFuZEljb24nXTsgLy8gcmVmOiBodHRwczovL2dpdGh1Yi5jb20vYW50LWRlc2lnbi9hbnQtZGVzaWduL2lzc3Vlcy8xNDAwN1xuLy8gcmVmOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0zNjA4ODlcbi8vIGdldEJvdW5kaW5nQ2xpZW50UmVjdCByZXR1cm4gdGhlIGZ1bGwgcHJlY2lzaW9uIHZhbHVlLCB3aGljaCBpc1xuLy8gbm90IHRoZSBzYW1lIGJlaGF2aW9yIGFzIG9uIGNocm9tZS4gU2V0IHRoZSBwcmVjaXNpb24gdG8gNiB0b1xuLy8gdW5pZnkgdGhlaXIgYmVoYXZpb3JcblxuZXhwb3J0IHZhciBnZXRXaWR0aCA9IGZ1bmN0aW9uIGdldFdpZHRoKGVsZW0pIHtcbiAgdmFyIGluY2x1ZGVNYXJnaW4gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlO1xuICB2YXIgd2lkdGggPSBlbGVtICYmIHR5cGVvZiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCA9PT0gJ2Z1bmN0aW9uJyAmJiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuXG4gIGlmICh3aWR0aCkge1xuICAgIGlmIChpbmNsdWRlTWFyZ2luKSB7XG4gICAgICB2YXIgX2dldENvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW0pLFxuICAgICAgICAgIG1hcmdpbkxlZnQgPSBfZ2V0Q29tcHV0ZWRTdHlsZS5tYXJnaW5MZWZ0LFxuICAgICAgICAgIG1hcmdpblJpZ2h0ID0gX2dldENvbXB1dGVkU3R5bGUubWFyZ2luUmlnaHQ7XG5cbiAgICAgIHdpZHRoICs9ICttYXJnaW5MZWZ0LnJlcGxhY2UoJ3B4JywgJycpICsgK21hcmdpblJpZ2h0LnJlcGxhY2UoJ3B4JywgJycpO1xuICAgIH1cblxuICAgIHdpZHRoID0gK3dpZHRoLnRvRml4ZWQoNik7XG4gIH1cblxuICByZXR1cm4gd2lkdGggfHwgMDtcbn07XG5leHBvcnQgdmFyIHNldFN0eWxlID0gZnVuY3Rpb24gc2V0U3R5bGUoZWxlbSwgc3R5bGVQcm9wZXJ0eSwgdmFsdWUpIHtcbiAgaWYgKGVsZW0gJiYgX3R5cGVvZihlbGVtLnN0eWxlKSA9PT0gJ29iamVjdCcpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBlbGVtLnN0eWxlW3N0eWxlUHJvcGVydHldID0gdmFsdWU7XG4gIH1cbn07XG5leHBvcnQgdmFyIGlzTW9iaWxlRGV2aWNlID0gZnVuY3Rpb24gaXNNb2JpbGVEZXZpY2UoKSB7XG4gIHJldHVybiBpc01vYmlsZS5hbnk7XG59OyIsInZhciBhdXRvQWRqdXN0T3ZlcmZsb3cgPSB7XG4gIGFkanVzdFg6IDEsXG4gIGFkanVzdFk6IDFcbn07XG5leHBvcnQgdmFyIHBsYWNlbWVudHMgPSB7XG4gIHRvcExlZnQ6IHtcbiAgICBwb2ludHM6IFsnYmwnLCAndGwnXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzAsIC03XVxuICB9LFxuICBib3R0b21MZWZ0OiB7XG4gICAgcG9pbnRzOiBbJ3RsJywgJ2JsJ10sXG4gICAgb3ZlcmZsb3c6IGF1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFswLCA3XVxuICB9LFxuICBsZWZ0VG9wOiB7XG4gICAgcG9pbnRzOiBbJ3RyJywgJ3RsJ10sXG4gICAgb3ZlcmZsb3c6IGF1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFstNCwgMF1cbiAgfSxcbiAgcmlnaHRUb3A6IHtcbiAgICBwb2ludHM6IFsndGwnLCAndHInXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzQsIDBdXG4gIH1cbn07XG5leHBvcnQgdmFyIHBsYWNlbWVudHNSdGwgPSB7XG4gIHRvcExlZnQ6IHtcbiAgICBwb2ludHM6IFsnYmwnLCAndGwnXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzAsIC03XVxuICB9LFxuICBib3R0b21MZWZ0OiB7XG4gICAgcG9pbnRzOiBbJ3RsJywgJ2JsJ10sXG4gICAgb3ZlcmZsb3c6IGF1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFswLCA3XVxuICB9LFxuICByaWdodFRvcDoge1xuICAgIHBvaW50czogWyd0cicsICd0bCddLFxuICAgIG92ZXJmbG93OiBhdXRvQWRqdXN0T3ZlcmZsb3csXG4gICAgb2Zmc2V0OiBbLTQsIDBdXG4gIH0sXG4gIGxlZnRUb3A6IHtcbiAgICBwb2ludHM6IFsndGwnLCAndHInXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzQsIDBdXG4gIH1cbn07XG5leHBvcnQgZGVmYXVsdCBwbGFjZW1lbnRzOyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2tcIjtcbmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzXCI7XG5pbXBvcnQgX2Fzc2VydFRoaXNJbml0aWFsaXplZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXNzZXJ0VGhpc0luaXRpYWxpemVkXCI7XG5pbXBvcnQgX2luaGVyaXRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0c1wiO1xuaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXJcIjtcbmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICogYXMgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBUcmlnZ2VyIGZyb20gJ3JjLXRyaWdnZXInO1xuaW1wb3J0IHJhZiBmcm9tIFwicmMtdXRpbC9lcy9yYWZcIjtcbmltcG9ydCBLZXlDb2RlIGZyb20gXCJyYy11dGlsL2VzL0tleUNvZGVcIjtcbmltcG9ydCBDU1NNb3Rpb24gZnJvbSAncmMtbW90aW9uJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ21pbmktc3RvcmUnO1xuaW1wb3J0IFN1YlBvcHVwTWVudSBmcm9tICcuL1N1YlBvcHVwTWVudSc7XG5pbXBvcnQgeyBwbGFjZW1lbnRzLCBwbGFjZW1lbnRzUnRsIH0gZnJvbSAnLi9wbGFjZW1lbnRzJztcbmltcG9ydCB7IG5vb3AsIGxvb3BNZW51SXRlbVJlY3Vyc2l2ZWx5LCBnZXRNZW51SWRGcm9tU3ViTWVudUV2ZW50S2V5LCBtZW51QWxsUHJvcHMgfSBmcm9tICcuL3V0aWwnO1xudmFyIGd1aWQgPSAwO1xudmFyIHBvcHVwUGxhY2VtZW50TWFwID0ge1xuICBob3Jpem9udGFsOiAnYm90dG9tTGVmdCcsXG4gIHZlcnRpY2FsOiAncmlnaHRUb3AnLFxuICAndmVydGljYWwtbGVmdCc6ICdyaWdodFRvcCcsXG4gICd2ZXJ0aWNhbC1yaWdodCc6ICdsZWZ0VG9wJ1xufTtcblxudmFyIHVwZGF0ZURlZmF1bHRBY3RpdmVGaXJzdCA9IGZ1bmN0aW9uIHVwZGF0ZURlZmF1bHRBY3RpdmVGaXJzdChzdG9yZSwgZXZlbnRLZXksIGRlZmF1bHRBY3RpdmVGaXJzdCkge1xuICB2YXIgbWVudUlkID0gZ2V0TWVudUlkRnJvbVN1Yk1lbnVFdmVudEtleShldmVudEtleSk7XG4gIHZhciBzdGF0ZSA9IHN0b3JlLmdldFN0YXRlKCk7XG4gIHN0b3JlLnNldFN0YXRlKHtcbiAgICBkZWZhdWx0QWN0aXZlRmlyc3Q6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUuZGVmYXVsdEFjdGl2ZUZpcnN0KSwge30sIF9kZWZpbmVQcm9wZXJ0eSh7fSwgbWVudUlkLCBkZWZhdWx0QWN0aXZlRmlyc3QpKVxuICB9KTtcbn07XG5cbmV4cG9ydCB2YXIgU3ViTWVudSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoU3ViTWVudSwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihTdWJNZW51KTtcblxuICBmdW5jdGlvbiBTdWJNZW51KHByb3BzKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN1Yk1lbnUpO1xuXG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcyk7XG5cbiAgICBfdGhpcy5vbkRlc3Ryb3kgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBfdGhpcy5wcm9wcy5vbkRlc3Ryb3koa2V5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIG5vdGU6XG4gICAgICogIFRoaXMgbGVnYWN5IGNvZGUgdGhhdCBgb25LZXlEb3duYCBpcyBjYWxsZWQgYnkgcGFyZW50IGluc3RlYWQgb2YgZG9tIHNlbGYuXG4gICAgICogIHdoaWNoIG5lZWQgcmV0dXJuIGNvZGUgdG8gY2hlY2sgaWYgdGhpcyBldmVudCBpcyBoYW5kbGVkXG4gICAgICovXG5cblxuICAgIF90aGlzLm9uS2V5RG93biA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIga2V5Q29kZSA9IGUua2V5Q29kZTtcbiAgICAgIHZhciBtZW51ID0gX3RoaXMubWVudUluc3RhbmNlO1xuICAgICAgdmFyIHN0b3JlID0gX3RoaXMucHJvcHMuc3RvcmU7XG5cbiAgICAgIHZhciB2aXNpYmxlID0gX3RoaXMuZ2V0VmlzaWJsZSgpO1xuXG4gICAgICBpZiAoa2V5Q29kZSA9PT0gS2V5Q29kZS5FTlRFUikge1xuICAgICAgICBfdGhpcy5vblRpdGxlQ2xpY2soZSk7XG5cbiAgICAgICAgdXBkYXRlRGVmYXVsdEFjdGl2ZUZpcnN0KHN0b3JlLCBfdGhpcy5wcm9wcy5ldmVudEtleSwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoa2V5Q29kZSA9PT0gS2V5Q29kZS5SSUdIVCkge1xuICAgICAgICBpZiAodmlzaWJsZSkge1xuICAgICAgICAgIG1lbnUub25LZXlEb3duKGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzLnRyaWdnZXJPcGVuQ2hhbmdlKHRydWUpOyAvLyBuZWVkIHRvIHVwZGF0ZSBjdXJyZW50IG1lbnUncyBkZWZhdWx0QWN0aXZlRmlyc3QgdmFsdWVcblxuXG4gICAgICAgICAgdXBkYXRlRGVmYXVsdEFjdGl2ZUZpcnN0KHN0b3JlLCBfdGhpcy5wcm9wcy5ldmVudEtleSwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGtleUNvZGUgPT09IEtleUNvZGUuTEVGVCkge1xuICAgICAgICB2YXIgaGFuZGxlZDtcblxuICAgICAgICBpZiAodmlzaWJsZSkge1xuICAgICAgICAgIGhhbmRsZWQgPSBtZW51Lm9uS2V5RG93bihlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFoYW5kbGVkKSB7XG4gICAgICAgICAgX3RoaXMudHJpZ2dlck9wZW5DaGFuZ2UoZmFsc2UpO1xuXG4gICAgICAgICAgaGFuZGxlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaGFuZGxlZDtcbiAgICAgIH1cblxuICAgICAgaWYgKHZpc2libGUgJiYgKGtleUNvZGUgPT09IEtleUNvZGUuVVAgfHwga2V5Q29kZSA9PT0gS2V5Q29kZS5ET1dOKSkge1xuICAgICAgICByZXR1cm4gbWVudS5vbktleURvd24oZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcblxuICAgIF90aGlzLm9uT3BlbkNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5wcm9wcy5vbk9wZW5DaGFuZ2UoZSk7XG4gICAgfTtcblxuICAgIF90aGlzLm9uUG9wdXBWaXNpYmxlQ2hhbmdlID0gZnVuY3Rpb24gKHZpc2libGUpIHtcbiAgICAgIF90aGlzLnRyaWdnZXJPcGVuQ2hhbmdlKHZpc2libGUsIHZpc2libGUgPyAnbW91c2VlbnRlcicgOiAnbW91c2VsZWF2ZScpO1xuICAgIH07XG5cbiAgICBfdGhpcy5vbk1vdXNlRW50ZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAga2V5ID0gX3RoaXMkcHJvcHMuZXZlbnRLZXksXG4gICAgICAgICAgb25Nb3VzZUVudGVyID0gX3RoaXMkcHJvcHMub25Nb3VzZUVudGVyLFxuICAgICAgICAgIHN0b3JlID0gX3RoaXMkcHJvcHMuc3RvcmU7XG4gICAgICB1cGRhdGVEZWZhdWx0QWN0aXZlRmlyc3Qoc3RvcmUsIF90aGlzLnByb3BzLmV2ZW50S2V5LCBmYWxzZSk7XG4gICAgICBvbk1vdXNlRW50ZXIoe1xuICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgZG9tRXZlbnQ6IGVcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy5vbk1vdXNlTGVhdmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIF90aGlzJHByb3BzMiA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIHBhcmVudE1lbnUgPSBfdGhpcyRwcm9wczIucGFyZW50TWVudSxcbiAgICAgICAgICBldmVudEtleSA9IF90aGlzJHByb3BzMi5ldmVudEtleSxcbiAgICAgICAgICBvbk1vdXNlTGVhdmUgPSBfdGhpcyRwcm9wczIub25Nb3VzZUxlYXZlO1xuICAgICAgcGFyZW50TWVudS5zdWJNZW51SW5zdGFuY2UgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKTtcbiAgICAgIG9uTW91c2VMZWF2ZSh7XG4gICAgICAgIGtleTogZXZlbnRLZXksXG4gICAgICAgIGRvbUV2ZW50OiBlXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3RoaXMub25UaXRsZU1vdXNlRW50ZXIgPSBmdW5jdGlvbiAoZG9tRXZlbnQpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczMgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICBrZXkgPSBfdGhpcyRwcm9wczMuZXZlbnRLZXksXG4gICAgICAgICAgb25JdGVtSG92ZXIgPSBfdGhpcyRwcm9wczMub25JdGVtSG92ZXIsXG4gICAgICAgICAgb25UaXRsZU1vdXNlRW50ZXIgPSBfdGhpcyRwcm9wczMub25UaXRsZU1vdXNlRW50ZXI7XG4gICAgICBvbkl0ZW1Ib3Zlcih7XG4gICAgICAgIGtleToga2V5LFxuICAgICAgICBob3ZlcjogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBvblRpdGxlTW91c2VFbnRlcih7XG4gICAgICAgIGtleToga2V5LFxuICAgICAgICBkb21FdmVudDogZG9tRXZlbnRcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy5vblRpdGxlTW91c2VMZWF2ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHM0ID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgcGFyZW50TWVudSA9IF90aGlzJHByb3BzNC5wYXJlbnRNZW51LFxuICAgICAgICAgIGV2ZW50S2V5ID0gX3RoaXMkcHJvcHM0LmV2ZW50S2V5LFxuICAgICAgICAgIG9uSXRlbUhvdmVyID0gX3RoaXMkcHJvcHM0Lm9uSXRlbUhvdmVyLFxuICAgICAgICAgIG9uVGl0bGVNb3VzZUxlYXZlID0gX3RoaXMkcHJvcHM0Lm9uVGl0bGVNb3VzZUxlYXZlO1xuICAgICAgcGFyZW50TWVudS5zdWJNZW51SW5zdGFuY2UgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKTtcbiAgICAgIG9uSXRlbUhvdmVyKHtcbiAgICAgICAga2V5OiBldmVudEtleSxcbiAgICAgICAgaG92ZXI6IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIG9uVGl0bGVNb3VzZUxlYXZlKHtcbiAgICAgICAga2V5OiBldmVudEtleSxcbiAgICAgICAgZG9tRXZlbnQ6IGVcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy5vblRpdGxlQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZSA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLFxuICAgICAgICAgIHByb3BzID0gX2Fzc2VydFRoaXNJbml0aWFsaXplLnByb3BzO1xuXG4gICAgICBwcm9wcy5vblRpdGxlQ2xpY2soe1xuICAgICAgICBrZXk6IHByb3BzLmV2ZW50S2V5LFxuICAgICAgICBkb21FdmVudDogZVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChwcm9wcy50cmlnZ2VyU3ViTWVudUFjdGlvbiA9PT0gJ2hvdmVyJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIF90aGlzLnRyaWdnZXJPcGVuQ2hhbmdlKCFfdGhpcy5nZXRWaXNpYmxlKCksICdjbGljaycpO1xuXG4gICAgICB1cGRhdGVEZWZhdWx0QWN0aXZlRmlyc3QocHJvcHMuc3RvcmUsIF90aGlzLnByb3BzLmV2ZW50S2V5LCBmYWxzZSk7XG4gICAgfTtcblxuICAgIF90aGlzLm9uU3ViTWVudUNsaWNrID0gZnVuY3Rpb24gKGluZm8pIHtcbiAgICAgIC8vIGluIHRoZSBjYXNlIG9mIG92ZXJmbG93ZWQgc3VibWVudVxuICAgICAgLy8gb25DbGljayBpcyBub3QgY29waWVkIG92ZXJcbiAgICAgIGlmICh0eXBlb2YgX3RoaXMucHJvcHMub25DbGljayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBfdGhpcy5wcm9wcy5vbkNsaWNrKF90aGlzLmFkZEtleVBhdGgoaW5mbykpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5vblNlbGVjdCA9IGZ1bmN0aW9uIChpbmZvKSB7XG4gICAgICBfdGhpcy5wcm9wcy5vblNlbGVjdChpbmZvKTtcbiAgICB9O1xuXG4gICAgX3RoaXMub25EZXNlbGVjdCA9IGZ1bmN0aW9uIChpbmZvKSB7XG4gICAgICBfdGhpcy5wcm9wcy5vbkRlc2VsZWN0KGluZm8pO1xuICAgIH07XG5cbiAgICBfdGhpcy5nZXRQcmVmaXhDbHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gXCJcIi5jb25jYXQoX3RoaXMucHJvcHMucm9vdFByZWZpeENscywgXCItc3VibWVudVwiKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZ2V0QWN0aXZlQ2xhc3NOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KF90aGlzLmdldFByZWZpeENscygpLCBcIi1hY3RpdmVcIik7XG4gICAgfTtcblxuICAgIF90aGlzLmdldERpc2FibGVkQ2xhc3NOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KF90aGlzLmdldFByZWZpeENscygpLCBcIi1kaXNhYmxlZFwiKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZ2V0U2VsZWN0ZWRDbGFzc05hbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gXCJcIi5jb25jYXQoX3RoaXMuZ2V0UHJlZml4Q2xzKCksIFwiLXNlbGVjdGVkXCIpO1xuICAgIH07XG5cbiAgICBfdGhpcy5nZXRPcGVuQ2xhc3NOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KF90aGlzLnByb3BzLnJvb3RQcmVmaXhDbHMsIFwiLXN1Ym1lbnUtb3BlblwiKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZ2V0VmlzaWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfdGhpcy5zdGF0ZS5pc09wZW47XG4gICAgfTtcblxuICAgIF90aGlzLmdldE1vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMuc3RhdGUubW9kZTtcbiAgICB9O1xuXG4gICAgX3RoaXMuc2F2ZU1lbnVJbnN0YW5jZSA9IGZ1bmN0aW9uIChjKSB7XG4gICAgICAvLyBjaGlsZHJlbiBtZW51IGluc3RhbmNlXG4gICAgICBfdGhpcy5tZW51SW5zdGFuY2UgPSBjO1xuICAgIH07XG5cbiAgICBfdGhpcy5hZGRLZXlQYXRoID0gZnVuY3Rpb24gKGluZm8pIHtcbiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGluZm8pLCB7fSwge1xuICAgICAgICBrZXlQYXRoOiAoaW5mby5rZXlQYXRoIHx8IFtdKS5jb25jYXQoX3RoaXMucHJvcHMuZXZlbnRLZXkpXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3RoaXMudHJpZ2dlck9wZW5DaGFuZ2UgPSBmdW5jdGlvbiAob3BlbiwgdHlwZSkge1xuICAgICAgdmFyIGtleSA9IF90aGlzLnByb3BzLmV2ZW50S2V5O1xuXG4gICAgICB2YXIgb3BlbkNoYW5nZSA9IGZ1bmN0aW9uIG9wZW5DaGFuZ2UoKSB7XG4gICAgICAgIF90aGlzLm9uT3BlbkNoYW5nZSh7XG4gICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgaXRlbTogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksXG4gICAgICAgICAgdHJpZ2dlcjogdHlwZSxcbiAgICAgICAgICBvcGVuOiBvcGVuXG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgaWYgKHR5cGUgPT09ICdtb3VzZWVudGVyJykge1xuICAgICAgICAvLyBtYWtlIHN1cmUgbW91c2VlbnRlciBoYXBwZW4gYWZ0ZXIgb3RoZXIgbWVudSBpdGVtJ3MgbW91c2VsZWF2ZVxuICAgICAgICBfdGhpcy5tb3VzZWVudGVyVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIG9wZW5DaGFuZ2UoKTtcbiAgICAgICAgfSwgMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcGVuQ2hhbmdlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLmlzQ2hpbGRyZW5TZWxlY3RlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciByZXQgPSB7XG4gICAgICAgIGZpbmQ6IGZhbHNlXG4gICAgICB9O1xuICAgICAgbG9vcE1lbnVJdGVtUmVjdXJzaXZlbHkoX3RoaXMucHJvcHMuY2hpbGRyZW4sIF90aGlzLnByb3BzLnNlbGVjdGVkS2V5cywgcmV0KTtcbiAgICAgIHJldHVybiByZXQuZmluZDtcbiAgICB9O1xuXG4gICAgX3RoaXMuaXNJbmxpbmVNb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLmdldE1vZGUoKSA9PT0gJ2lubGluZSc7XG4gICAgfTtcblxuICAgIF90aGlzLmFkanVzdFdpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoIV90aGlzLnN1Yk1lbnVUaXRsZSB8fCAhX3RoaXMubWVudUluc3RhbmNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHBvcHVwTWVudSA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKF90aGlzLm1lbnVJbnN0YW5jZSk7XG5cbiAgICAgIGlmIChwb3B1cE1lbnUub2Zmc2V0V2lkdGggPj0gX3RoaXMuc3ViTWVudVRpdGxlLm9mZnNldFdpZHRoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cblxuICAgICAgcG9wdXBNZW51LnN0eWxlLm1pbldpZHRoID0gXCJcIi5jb25jYXQoX3RoaXMuc3ViTWVudVRpdGxlLm9mZnNldFdpZHRoLCBcInB4XCIpO1xuICAgIH07XG5cbiAgICBfdGhpcy5zYXZlU3ViTWVudVRpdGxlID0gZnVuY3Rpb24gKHN1Yk1lbnVUaXRsZSkge1xuICAgICAgX3RoaXMuc3ViTWVudVRpdGxlID0gc3ViTWVudVRpdGxlO1xuICAgIH07XG5cbiAgICBfdGhpcy5nZXRCYXNlUHJvcHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX2Fzc2VydFRoaXNJbml0aWFsaXplMiA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLFxuICAgICAgICAgIHByb3BzID0gX2Fzc2VydFRoaXNJbml0aWFsaXplMi5wcm9wcztcblxuICAgICAgdmFyIG1lcmdlZE1vZGUgPSBfdGhpcy5nZXRNb2RlKCk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1vZGU6IG1lcmdlZE1vZGUgPT09ICdob3Jpem9udGFsJyA/ICd2ZXJ0aWNhbCcgOiBtZXJnZWRNb2RlLFxuICAgICAgICB2aXNpYmxlOiBfdGhpcy5nZXRWaXNpYmxlKCksXG4gICAgICAgIGxldmVsOiBwcm9wcy5sZXZlbCArIDEsXG4gICAgICAgIGlubGluZUluZGVudDogcHJvcHMuaW5saW5lSW5kZW50LFxuICAgICAgICBmb2N1c2FibGU6IGZhbHNlLFxuICAgICAgICBvbkNsaWNrOiBfdGhpcy5vblN1Yk1lbnVDbGljayxcbiAgICAgICAgb25TZWxlY3Q6IF90aGlzLm9uU2VsZWN0LFxuICAgICAgICBvbkRlc2VsZWN0OiBfdGhpcy5vbkRlc2VsZWN0LFxuICAgICAgICBvbkRlc3Ryb3k6IF90aGlzLm9uRGVzdHJveSxcbiAgICAgICAgc2VsZWN0ZWRLZXlzOiBwcm9wcy5zZWxlY3RlZEtleXMsXG4gICAgICAgIGV2ZW50S2V5OiBcIlwiLmNvbmNhdChwcm9wcy5ldmVudEtleSwgXCItbWVudS1cIiksXG4gICAgICAgIG9wZW5LZXlzOiBwcm9wcy5vcGVuS2V5cyxcbiAgICAgICAgbW90aW9uOiBwcm9wcy5tb3Rpb24sXG4gICAgICAgIG9uT3BlbkNoYW5nZTogX3RoaXMub25PcGVuQ2hhbmdlLFxuICAgICAgICBzdWJNZW51T3BlbkRlbGF5OiBwcm9wcy5zdWJNZW51T3BlbkRlbGF5LFxuICAgICAgICBwYXJlbnRNZW51OiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSxcbiAgICAgICAgc3ViTWVudUNsb3NlRGVsYXk6IHByb3BzLnN1Yk1lbnVDbG9zZURlbGF5LFxuICAgICAgICBmb3JjZVN1Yk1lbnVSZW5kZXI6IHByb3BzLmZvcmNlU3ViTWVudVJlbmRlcixcbiAgICAgICAgdHJpZ2dlclN1Yk1lbnVBY3Rpb246IHByb3BzLnRyaWdnZXJTdWJNZW51QWN0aW9uLFxuICAgICAgICBidWlsdGluUGxhY2VtZW50czogcHJvcHMuYnVpbHRpblBsYWNlbWVudHMsXG4gICAgICAgIGRlZmF1bHRBY3RpdmVGaXJzdDogcHJvcHMuc3RvcmUuZ2V0U3RhdGUoKS5kZWZhdWx0QWN0aXZlRmlyc3RbZ2V0TWVudUlkRnJvbVN1Yk1lbnVFdmVudEtleShwcm9wcy5ldmVudEtleSldLFxuICAgICAgICBtdWx0aXBsZTogcHJvcHMubXVsdGlwbGUsXG4gICAgICAgIHByZWZpeENsczogcHJvcHMucm9vdFByZWZpeENscyxcbiAgICAgICAgaWQ6IF90aGlzLmludGVybmFsTWVudUlkLFxuICAgICAgICBtYW51YWxSZWY6IF90aGlzLnNhdmVNZW51SW5zdGFuY2UsXG4gICAgICAgIGl0ZW1JY29uOiBwcm9wcy5pdGVtSWNvbixcbiAgICAgICAgZXhwYW5kSWNvbjogcHJvcHMuZXhwYW5kSWNvbixcbiAgICAgICAgZGlyZWN0aW9uOiBwcm9wcy5kaXJlY3Rpb25cbiAgICAgIH07XG4gICAgfTtcblxuICAgIF90aGlzLmdldE1vdGlvbiA9IGZ1bmN0aW9uIChtb2RlLCB2aXNpYmxlKSB7XG4gICAgICB2YXIgX2Fzc2VydFRoaXNJbml0aWFsaXplMyA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLFxuICAgICAgICAgIGhhdmVSZW5kZXJlZCA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZTMuaGF2ZVJlbmRlcmVkO1xuXG4gICAgICB2YXIgX3RoaXMkcHJvcHM1ID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgbW90aW9uID0gX3RoaXMkcHJvcHM1Lm1vdGlvbixcbiAgICAgICAgICByb290UHJlZml4Q2xzID0gX3RoaXMkcHJvcHM1LnJvb3RQcmVmaXhDbHM7IC8vIGRvbid0IHNob3cgdHJhbnNpdGlvbiBvbiBmaXJzdCByZW5kZXJpbmcgKG5vIGFuaW1hdGlvbiBmb3Igb3BlbmVkIG1lbnUpXG4gICAgICAvLyBzaG93IGFwcGVhciB0cmFuc2l0aW9uIGlmIGl0J3Mgbm90IHZpc2libGUgKG5vdCBzdXJlIHdoeSlcbiAgICAgIC8vIHNob3cgYXBwZWFyIHRyYW5zaXRpb24gaWYgaXQncyBub3QgaW5saW5lIG1vZGVcblxuICAgICAgdmFyIG1lcmdlZE1vdGlvbiA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbW90aW9uKSwge30sIHtcbiAgICAgICAgbGVhdmVkQ2xhc3NOYW1lOiBcIlwiLmNvbmNhdChyb290UHJlZml4Q2xzLCBcIi1oaWRkZW5cIiksXG4gICAgICAgIHJlbW92ZU9uTGVhdmU6IGZhbHNlLFxuICAgICAgICBtb3Rpb25BcHBlYXI6IGhhdmVSZW5kZXJlZCB8fCAhdmlzaWJsZSB8fCBtb2RlICE9PSAnaW5saW5lJ1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBtZXJnZWRNb3Rpb247XG4gICAgfTtcblxuICAgIHZhciBzdG9yZSA9IHByb3BzLnN0b3JlLFxuICAgICAgICBldmVudEtleSA9IHByb3BzLmV2ZW50S2V5O1xuXG4gICAgdmFyIF9zdG9yZSRnZXRTdGF0ZSA9IHN0b3JlLmdldFN0YXRlKCksXG4gICAgICAgIGRlZmF1bHRBY3RpdmVGaXJzdCA9IF9zdG9yZSRnZXRTdGF0ZS5kZWZhdWx0QWN0aXZlRmlyc3Q7XG5cbiAgICBfdGhpcy5pc1Jvb3RNZW51ID0gZmFsc2U7XG4gICAgdmFyIHZhbHVlID0gZmFsc2U7XG5cbiAgICBpZiAoZGVmYXVsdEFjdGl2ZUZpcnN0KSB7XG4gICAgICB2YWx1ZSA9IGRlZmF1bHRBY3RpdmVGaXJzdFtldmVudEtleV07XG4gICAgfVxuXG4gICAgdXBkYXRlRGVmYXVsdEFjdGl2ZUZpcnN0KHN0b3JlLCBldmVudEtleSwgdmFsdWUpO1xuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgbW9kZTogcHJvcHMubW9kZSxcbiAgICAgIGlzT3BlbjogcHJvcHMuaXNPcGVuXG4gICAgfTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoU3ViTWVudSwgW3tcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkTW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICB0aGlzLmNvbXBvbmVudERpZFVwZGF0ZSgpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnREaWRVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBfdGhpcyRwcm9wczYgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIG1vZGUgPSBfdGhpcyRwcm9wczYubW9kZSxcbiAgICAgICAgICBwYXJlbnRNZW51ID0gX3RoaXMkcHJvcHM2LnBhcmVudE1lbnUsXG4gICAgICAgICAgbWFudWFsUmVmID0gX3RoaXMkcHJvcHM2Lm1hbnVhbFJlZixcbiAgICAgICAgICBpc09wZW4gPSBfdGhpcyRwcm9wczYuaXNPcGVuO1xuXG4gICAgICB2YXIgdXBkYXRlU3RhdGUgPSBmdW5jdGlvbiB1cGRhdGVTdGF0ZSgpIHtcbiAgICAgICAgX3RoaXMyLnNldFN0YXRlKHtcbiAgICAgICAgICBtb2RlOiBtb2RlLFxuICAgICAgICAgIGlzT3BlbjogaXNPcGVuXG4gICAgICAgIH0pO1xuICAgICAgfTsgLy8gRGVsYXkgc3luYyB3aGVuIG1vZGUgY2hhbmdlZCBpbiBjYXNlIG9wZW5LZXlzIGNoYW5nZSBub3Qgc3luY1xuXG5cbiAgICAgIHZhciBpc09wZW5DaGFuZ2VkID0gaXNPcGVuICE9PSB0aGlzLnN0YXRlLmlzT3BlbjtcbiAgICAgIHZhciBpc01vZGVDaGFuZ2VkID0gbW9kZSAhPT0gdGhpcy5zdGF0ZS5tb2RlO1xuXG4gICAgICBpZiAoaXNNb2RlQ2hhbmdlZCB8fCBpc09wZW5DaGFuZ2VkKSB7XG4gICAgICAgIHJhZi5jYW5jZWwodGhpcy51cGRhdGVTdGF0ZVJhZik7XG5cbiAgICAgICAgaWYgKGlzTW9kZUNoYW5nZWQpIHtcbiAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlUmFmID0gcmFmKHVwZGF0ZVN0YXRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cGRhdGVTdGF0ZSgpO1xuICAgICAgICB9XG4gICAgICB9IC8vIGludm9rZSBjdXN0b21pemVkIHJlZiB0byBleHBvc2UgY29tcG9uZW50IHRvIG1peGluXG5cblxuICAgICAgaWYgKG1hbnVhbFJlZikge1xuICAgICAgICBtYW51YWxSZWYodGhpcyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChtb2RlICE9PSAnaG9yaXpvbnRhbCcgfHwgIShwYXJlbnRNZW51ID09PSBudWxsIHx8IHBhcmVudE1lbnUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudE1lbnUuaXNSb290TWVudSkgfHwgIWlzT3Blbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMubWluV2lkdGhUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczIuYWRqdXN0V2lkdGgoKTtcbiAgICAgIH0sIDApO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnRXaWxsVW5tb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczcgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIG9uRGVzdHJveSA9IF90aGlzJHByb3BzNy5vbkRlc3Ryb3ksXG4gICAgICAgICAgZXZlbnRLZXkgPSBfdGhpcyRwcm9wczcuZXZlbnRLZXk7XG5cbiAgICAgIGlmIChvbkRlc3Ryb3kpIHtcbiAgICAgICAgb25EZXN0cm95KGV2ZW50S2V5KTtcbiAgICAgIH1cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXG5cbiAgICAgIGlmICh0aGlzLm1pbldpZHRoVGltZW91dCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5taW5XaWR0aFRpbWVvdXQpO1xuICAgICAgfVxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cblxuICAgICAgaWYgKHRoaXMubW91c2VlbnRlclRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubW91c2VlbnRlclRpbWVvdXQpO1xuICAgICAgfVxuXG4gICAgICByYWYuY2FuY2VsKHRoaXMudXBkYXRlU3RhdGVSYWYpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJQb3B1cE1lbnVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUG9wdXBNZW51KGNsYXNzTmFtZSwgc3R5bGUpIHtcbiAgICAgIHZhciBiYXNlUHJvcHMgPSB0aGlzLmdldEJhc2VQcm9wcygpO1xuICAgICAgLyoqXG4gICAgICAgKiB6b21iaWVqOiBXaHkgU3ViUG9wdXBNZW51IGhlcmU/XG4gICAgICAgKiBTZWVtcyB3aGF0ZXZlciBwb3B1cCBvciBpbmxpbmUgbW9kZSBib3RoIHdpbGwgcmVuZGVyIFN1YlBvcHVwTWVudS5cbiAgICAgICAqIEl0J3MgY29udHJvbGxlZCBieSBUcmlnZ2VyIGZvciBwb3B1cCBvciBub3QuXG4gICAgICAgKi9cblxuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN1YlBvcHVwTWVudSwgX2V4dGVuZHMoe30sIGJhc2VQcm9wcywge1xuICAgICAgICBpZDogdGhpcy5pbnRlcm5hbE1lbnVJZCxcbiAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgIHN0eWxlOiBzdHlsZVxuICAgICAgfSksIHRoaXMucHJvcHMuY2hpbGRyZW4pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJDaGlsZHJlblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJDaGlsZHJlbigpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB2YXIgYmFzZVByb3BzID0gdGhpcy5nZXRCYXNlUHJvcHMoKTtcbiAgICAgIHZhciBtb2RlID0gYmFzZVByb3BzLm1vZGUsXG4gICAgICAgICAgdmlzaWJsZSA9IGJhc2VQcm9wcy52aXNpYmxlLFxuICAgICAgICAgIGZvcmNlU3ViTWVudVJlbmRlciA9IGJhc2VQcm9wcy5mb3JjZVN1Yk1lbnVSZW5kZXIsXG4gICAgICAgICAgZGlyZWN0aW9uID0gYmFzZVByb3BzLmRpcmVjdGlvbjsgLy8gW0xlZ2FjeV0gZ2V0TW90aW9uIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBgaGF2ZVJlbmRlcmVkYFxuXG4gICAgICB2YXIgbWVyZ2VkTW90aW9uID0gdGhpcy5nZXRNb3Rpb24obW9kZSwgdmlzaWJsZSk7XG4gICAgICB0aGlzLmhhdmVSZW5kZXJlZCA9IHRydWU7XG4gICAgICB0aGlzLmhhdmVPcGVuZWQgPSB0aGlzLmhhdmVPcGVuZWQgfHwgdmlzaWJsZSB8fCBmb3JjZVN1Yk1lbnVSZW5kZXI7IC8vIG5ldmVyIHJlbmRlcmVkIG5vdCBwbGFubmluZyB0bywgZG9uJ3QgcmVuZGVyXG5cbiAgICAgIGlmICghdGhpcy5oYXZlT3BlbmVkKSB7XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNoYXJlZENsYXNzTmFtZSA9IGNsYXNzTmFtZXMoXCJcIi5jb25jYXQoYmFzZVByb3BzLnByZWZpeENscywgXCItc3ViXCIpLCBfZGVmaW5lUHJvcGVydHkoe30sIFwiXCIuY29uY2F0KGJhc2VQcm9wcy5wcmVmaXhDbHMsIFwiLXJ0bFwiKSwgZGlyZWN0aW9uID09PSAncnRsJykpO1xuXG4gICAgICBpZiAoIXRoaXMuaXNJbmxpbmVNb2RlKCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyUG9wdXBNZW51KHNoYXJlZENsYXNzTmFtZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDU1NNb3Rpb24sIF9leHRlbmRzKHtcbiAgICAgICAgdmlzaWJsZTogYmFzZVByb3BzLnZpc2libGUsXG4gICAgICAgIGZvcmNlUmVuZGVyOiBmb3JjZVN1Yk1lbnVSZW5kZXJcbiAgICAgIH0sIG1lcmdlZE1vdGlvbiksIGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZSxcbiAgICAgICAgICAgIHN0eWxlID0gX3JlZi5zdHlsZTtcbiAgICAgICAgdmFyIG1lcmdlZENsYXNzTmFtZSA9IGNsYXNzTmFtZXMoc2hhcmVkQ2xhc3NOYW1lLCBjbGFzc05hbWUpO1xuICAgICAgICByZXR1cm4gX3RoaXMzLnJlbmRlclBvcHVwTWVudShtZXJnZWRDbGFzc05hbWUsIHN0eWxlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9jbGFzc05hbWVzMiwgX3Byb3BzJHBhcmVudE1lbnUsIF9jbGFzc05hbWVzMztcblxuICAgICAgdmFyIHByb3BzID0gX29iamVjdFNwcmVhZCh7fSwgdGhpcy5wcm9wcyk7XG5cbiAgICAgIHZhciB2aXNpYmxlID0gdGhpcy5nZXRWaXNpYmxlKCk7XG4gICAgICB2YXIgcHJlZml4Q2xzID0gdGhpcy5nZXRQcmVmaXhDbHMoKTtcbiAgICAgIHZhciBpbmxpbmUgPSB0aGlzLmlzSW5saW5lTW9kZSgpO1xuICAgICAgdmFyIG1lcmdlZE1vZGUgPSB0aGlzLmdldE1vZGUoKTtcbiAgICAgIHZhciBjbGFzc05hbWUgPSBjbGFzc05hbWVzKHByZWZpeENscywgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1cIikuY29uY2F0KG1lcmdlZE1vZGUpLCAoX2NsYXNzTmFtZXMyID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lczIsIHByb3BzLmNsYXNzTmFtZSwgISFwcm9wcy5jbGFzc05hbWUpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMyLCB0aGlzLmdldE9wZW5DbGFzc05hbWUoKSwgdmlzaWJsZSksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lczIsIHRoaXMuZ2V0QWN0aXZlQ2xhc3NOYW1lKCksIHByb3BzLmFjdGl2ZSB8fCB2aXNpYmxlICYmICFpbmxpbmUpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMyLCB0aGlzLmdldERpc2FibGVkQ2xhc3NOYW1lKCksIHByb3BzLmRpc2FibGVkKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzMiwgdGhpcy5nZXRTZWxlY3RlZENsYXNzTmFtZSgpLCB0aGlzLmlzQ2hpbGRyZW5TZWxlY3RlZCgpKSwgX2NsYXNzTmFtZXMyKSk7XG5cbiAgICAgIGlmICghdGhpcy5pbnRlcm5hbE1lbnVJZCkge1xuICAgICAgICBpZiAocHJvcHMuZXZlbnRLZXkpIHtcbiAgICAgICAgICB0aGlzLmludGVybmFsTWVudUlkID0gXCJcIi5jb25jYXQocHJvcHMuZXZlbnRLZXksIFwiJE1lbnVcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZ3VpZCArPSAxO1xuICAgICAgICAgIHRoaXMuaW50ZXJuYWxNZW51SWQgPSBcIiRfXyRcIi5jb25jYXQoZ3VpZCwgXCIkTWVudVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgbW91c2VFdmVudHMgPSB7fTtcbiAgICAgIHZhciB0aXRsZUNsaWNrRXZlbnRzID0ge307XG4gICAgICB2YXIgdGl0bGVNb3VzZUV2ZW50cyA9IHt9O1xuXG4gICAgICBpZiAoIXByb3BzLmRpc2FibGVkKSB7XG4gICAgICAgIG1vdXNlRXZlbnRzID0ge1xuICAgICAgICAgIG9uTW91c2VMZWF2ZTogdGhpcy5vbk1vdXNlTGVhdmUsXG4gICAgICAgICAgb25Nb3VzZUVudGVyOiB0aGlzLm9uTW91c2VFbnRlclxuICAgICAgICB9OyAvLyBvbmx5IHdvcmtzIGluIHRpdGxlLCBub3Qgb3V0ZXIgbGlcblxuICAgICAgICB0aXRsZUNsaWNrRXZlbnRzID0ge1xuICAgICAgICAgIG9uQ2xpY2s6IHRoaXMub25UaXRsZUNsaWNrXG4gICAgICAgIH07XG4gICAgICAgIHRpdGxlTW91c2VFdmVudHMgPSB7XG4gICAgICAgICAgb25Nb3VzZUVudGVyOiB0aGlzLm9uVGl0bGVNb3VzZUVudGVyLFxuICAgICAgICAgIG9uTW91c2VMZWF2ZTogdGhpcy5vblRpdGxlTW91c2VMZWF2ZVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB2YXIgc3R5bGUgPSB7fTtcbiAgICAgIHZhciBkaXJlY3Rpb24gPSBwcm9wcy5kaXJlY3Rpb247XG4gICAgICB2YXIgaXNSVEwgPSBkaXJlY3Rpb24gPT09ICdydGwnO1xuXG4gICAgICBpZiAoaW5saW5lKSB7XG4gICAgICAgIGlmIChpc1JUTCkge1xuICAgICAgICAgIHN0eWxlLnBhZGRpbmdSaWdodCA9IHByb3BzLmlubGluZUluZGVudCAqIHByb3BzLmxldmVsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0eWxlLnBhZGRpbmdMZWZ0ID0gcHJvcHMuaW5saW5lSW5kZW50ICogcHJvcHMubGV2ZWw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGFyaWFPd25zID0ge307IC8vIG9ubHkgc2V0IGFyaWEtb3ducyB3aGVuIG1lbnUgaXMgb3BlblxuICAgICAgLy8gb3RoZXJ3aXNlIGl0IHdvdWxkIGJlIGFuIGludmFsaWQgYXJpYS1vd25zIHZhbHVlXG4gICAgICAvLyBzaW5jZSBjb3JyZXNwb25kaW5nIG5vZGUgY2Fubm90IGJlIGZvdW5kXG5cbiAgICAgIGlmICh0aGlzLmdldFZpc2libGUoKSkge1xuICAgICAgICBhcmlhT3ducyA9IHtcbiAgICAgICAgICAnYXJpYS1vd25zJzogdGhpcy5pbnRlcm5hbE1lbnVJZFxuICAgICAgICB9O1xuICAgICAgfSAvLyBleHBhbmQgY3VzdG9tIGljb24gc2hvdWxkIE5PVCBiZSBkaXNwbGF5ZWQgaW4gbWVudSB3aXRoIGhvcml6b250YWwgbW9kZS5cblxuXG4gICAgICB2YXIgaWNvbiA9IG51bGw7XG5cbiAgICAgIGlmIChtZXJnZWRNb2RlICE9PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgaWNvbiA9IHRoaXMucHJvcHMuZXhwYW5kSWNvbjsgLy8gUmVhY3ROb2RlXG5cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb3BzLmV4cGFuZEljb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBpY29uID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQodGhpcy5wcm9wcy5leHBhbmRJY29uLCBfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLnByb3BzKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIHRpdGxlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX2V4dGVuZHMoe1xuICAgICAgICByZWY6IHRoaXMuc2F2ZVN1Yk1lbnVUaXRsZSxcbiAgICAgICAgc3R5bGU6IHN0eWxlLFxuICAgICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItdGl0bGVcIiksXG4gICAgICAgIHJvbGU6IFwiYnV0dG9uXCJcbiAgICAgIH0sIHRpdGxlTW91c2VFdmVudHMsIHRpdGxlQ2xpY2tFdmVudHMsIHtcbiAgICAgICAgXCJhcmlhLWV4cGFuZGVkXCI6IHZpc2libGVcbiAgICAgIH0sIGFyaWFPd25zLCB7XG4gICAgICAgIFwiYXJpYS1oYXNwb3B1cFwiOiBcInRydWVcIixcbiAgICAgICAgdGl0bGU6IHR5cGVvZiBwcm9wcy50aXRsZSA9PT0gJ3N0cmluZycgPyBwcm9wcy50aXRsZSA6IHVuZGVmaW5lZFxuICAgICAgfSksIHByb3BzLnRpdGxlLCBpY29uIHx8IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiaVwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1hcnJvd1wiKVxuICAgICAgfSkpO1xuICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5yZW5kZXJDaGlsZHJlbigpO1xuICAgICAgdmFyIGdldFBvcHVwQ29udGFpbmVyID0gKChfcHJvcHMkcGFyZW50TWVudSA9IHByb3BzLnBhcmVudE1lbnUpID09PSBudWxsIHx8IF9wcm9wcyRwYXJlbnRNZW51ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHJvcHMkcGFyZW50TWVudS5pc1Jvb3RNZW51KSA/IHByb3BzLnBhcmVudE1lbnUucHJvcHMuZ2V0UG9wdXBDb250YWluZXIgOiBmdW5jdGlvbiAodHJpZ2dlck5vZGUpIHtcbiAgICAgICAgcmV0dXJuIHRyaWdnZXJOb2RlLnBhcmVudE5vZGU7XG4gICAgICB9O1xuICAgICAgdmFyIHBvcHVwUGxhY2VtZW50ID0gcG9wdXBQbGFjZW1lbnRNYXBbbWVyZ2VkTW9kZV07XG4gICAgICB2YXIgcG9wdXBBbGlnbiA9IHByb3BzLnBvcHVwT2Zmc2V0ID8ge1xuICAgICAgICBvZmZzZXQ6IHByb3BzLnBvcHVwT2Zmc2V0XG4gICAgICB9IDoge307XG4gICAgICB2YXIgcG9wdXBDbGFzc05hbWUgPSBjbGFzc05hbWVzKChfY2xhc3NOYW1lczMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzMywgcHJvcHMucG9wdXBDbGFzc05hbWUsIHByb3BzLnBvcHVwQ2xhc3NOYW1lICYmICFpbmxpbmUpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMzLCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXJ0bFwiKSwgaXNSVEwpLCBfY2xhc3NOYW1lczMpKTtcbiAgICAgIHZhciBkaXNhYmxlZCA9IHByb3BzLmRpc2FibGVkLFxuICAgICAgICAgIHRyaWdnZXJTdWJNZW51QWN0aW9uID0gcHJvcHMudHJpZ2dlclN1Yk1lbnVBY3Rpb24sXG4gICAgICAgICAgc3ViTWVudU9wZW5EZWxheSA9IHByb3BzLnN1Yk1lbnVPcGVuRGVsYXksXG4gICAgICAgICAgZm9yY2VTdWJNZW51UmVuZGVyID0gcHJvcHMuZm9yY2VTdWJNZW51UmVuZGVyLFxuICAgICAgICAgIHN1Yk1lbnVDbG9zZURlbGF5ID0gcHJvcHMuc3ViTWVudUNsb3NlRGVsYXksXG4gICAgICAgICAgYnVpbHRpblBsYWNlbWVudHMgPSBwcm9wcy5idWlsdGluUGxhY2VtZW50cztcbiAgICAgIG1lbnVBbGxQcm9wcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIGRlbGV0ZSBwcm9wc1trZXldO1xuICAgICAgfSk7IC8vIFNldCBvbkNsaWNrIHRvIG51bGwsIHRvIGlnbm9yZSBwcm9wYWdhdGVkIG9uQ2xpY2sgZXZlbnRcblxuICAgICAgZGVsZXRlIHByb3BzLm9uQ2xpY2s7XG4gICAgICB2YXIgcGxhY2VtZW50ID0gaXNSVEwgPyBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHBsYWNlbWVudHNSdGwpLCBidWlsdGluUGxhY2VtZW50cykgOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHBsYWNlbWVudHMpLCBidWlsdGluUGxhY2VtZW50cyk7XG4gICAgICBkZWxldGUgcHJvcHMuZGlyZWN0aW9uOyAvLyBbTGVnYWN5XSBJdCdzIGEgZmFzdCBmaXgsXG4gICAgICAvLyBidXQgd2Ugc2hvdWxkIGNoZWNrIGlmIHdlIGNhbiByZWZhY3RvciB0aGlzIHRvIG1ha2UgY29kZSBtb3JlIGVhc3kgdG8gdW5kZXJzdGFuZFxuXG4gICAgICB2YXIgYmFzZVByb3BzID0gdGhpcy5nZXRCYXNlUHJvcHMoKTtcbiAgICAgIHZhciBtZXJnZWRNb3Rpb24gPSBpbmxpbmUgPyBudWxsIDogdGhpcy5nZXRNb3Rpb24oYmFzZVByb3BzLm1vZGUsIGJhc2VQcm9wcy52aXNpYmxlKTtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImxpXCIsIF9leHRlbmRzKHt9LCBwcm9wcywgbW91c2VFdmVudHMsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgIHJvbGU6IFwibWVudWl0ZW1cIlxuICAgICAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyaWdnZXIsIHtcbiAgICAgICAgcHJlZml4Q2xzOiBwcmVmaXhDbHMsXG4gICAgICAgIHBvcHVwQ2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiXCIuY29uY2F0KHByZWZpeENscywgXCItcG9wdXBcIiksIHBvcHVwQ2xhc3NOYW1lKSxcbiAgICAgICAgZ2V0UG9wdXBDb250YWluZXI6IGdldFBvcHVwQ29udGFpbmVyLFxuICAgICAgICBidWlsdGluUGxhY2VtZW50czogcGxhY2VtZW50LFxuICAgICAgICBwb3B1cFBsYWNlbWVudDogcG9wdXBQbGFjZW1lbnQsXG4gICAgICAgIHBvcHVwVmlzaWJsZTogaW5saW5lID8gZmFsc2UgOiB2aXNpYmxlLFxuICAgICAgICBwb3B1cEFsaWduOiBwb3B1cEFsaWduLFxuICAgICAgICBwb3B1cDogaW5saW5lID8gbnVsbCA6IGNoaWxkcmVuLFxuICAgICAgICBhY3Rpb246IGRpc2FibGVkIHx8IGlubGluZSA/IFtdIDogW3RyaWdnZXJTdWJNZW51QWN0aW9uXSxcbiAgICAgICAgbW91c2VFbnRlckRlbGF5OiBzdWJNZW51T3BlbkRlbGF5LFxuICAgICAgICBtb3VzZUxlYXZlRGVsYXk6IHN1Yk1lbnVDbG9zZURlbGF5LFxuICAgICAgICBvblBvcHVwVmlzaWJsZUNoYW5nZTogdGhpcy5vblBvcHVwVmlzaWJsZUNoYW5nZSxcbiAgICAgICAgZm9yY2VSZW5kZXI6IGZvcmNlU3ViTWVudVJlbmRlcixcbiAgICAgICAgcG9wdXBNb3Rpb246IG1lcmdlZE1vdGlvblxuICAgICAgfSwgdGl0bGUpLCBpbmxpbmUgPyBjaGlsZHJlbiA6IG51bGwpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTdWJNZW51O1xufShSZWFjdC5Db21wb25lbnQpO1xuU3ViTWVudS5kZWZhdWx0UHJvcHMgPSB7XG4gIG9uTW91c2VFbnRlcjogbm9vcCxcbiAgb25Nb3VzZUxlYXZlOiBub29wLFxuICBvblRpdGxlTW91c2VFbnRlcjogbm9vcCxcbiAgb25UaXRsZU1vdXNlTGVhdmU6IG5vb3AsXG4gIG9uVGl0bGVDbGljazogbm9vcCxcbiAgbWFudWFsUmVmOiBub29wLFxuICBtb2RlOiAndmVydGljYWwnLFxuICB0aXRsZTogJydcbn07XG52YXIgY29ubmVjdGVkID0gY29ubmVjdChmdW5jdGlvbiAoX3JlZjIsIF9yZWYzKSB7XG4gIHZhciBvcGVuS2V5cyA9IF9yZWYyLm9wZW5LZXlzLFxuICAgICAgYWN0aXZlS2V5ID0gX3JlZjIuYWN0aXZlS2V5LFxuICAgICAgc2VsZWN0ZWRLZXlzID0gX3JlZjIuc2VsZWN0ZWRLZXlzO1xuICB2YXIgZXZlbnRLZXkgPSBfcmVmMy5ldmVudEtleSxcbiAgICAgIHN1Yk1lbnVLZXkgPSBfcmVmMy5zdWJNZW51S2V5O1xuICByZXR1cm4ge1xuICAgIGlzT3Blbjogb3BlbktleXMuaW5kZXhPZihldmVudEtleSkgPiAtMSxcbiAgICBhY3RpdmU6IGFjdGl2ZUtleVtzdWJNZW51S2V5XSA9PT0gZXZlbnRLZXksXG4gICAgc2VsZWN0ZWRLZXlzOiBzZWxlY3RlZEtleXNcbiAgfTtcbn0pKFN1Yk1lbnUpO1xuY29ubmVjdGVkLmlzU3ViTWVudSA9IHRydWU7XG5leHBvcnQgZGVmYXVsdCBjb25uZWN0ZWQ7IiwiaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXlcIjtcbmltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzXCI7XG5pbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVja1wiO1xuaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3NcIjtcbmltcG9ydCBfaW5oZXJpdHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzXCI7XG5pbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlclwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlc2l6ZU9ic2VydmVyIGZyb20gJ3Jlc2l6ZS1vYnNlcnZlci1wb2x5ZmlsbCc7XG5pbXBvcnQgU3ViTWVudSBmcm9tICcuL1N1Yk1lbnUnO1xuaW1wb3J0IHsgZ2V0V2lkdGgsIHNldFN0eWxlLCBtZW51QWxsUHJvcHMgfSBmcm9tICcuL3V0aWwnO1xudmFyIE1FTlVJVEVNX09WRVJGTE9XRURfQ0xBU1NOQU1FID0gJ21lbnVpdGVtLW92ZXJmbG93ZWQnO1xudmFyIEZMT0FUX1BSRUNJU0lPTl9BREpVU1QgPSAwLjU7XG5cbnZhciBET01XcmFwID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhET01XcmFwLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKERPTVdyYXApO1xuXG4gIGZ1bmN0aW9uIERPTVdyYXAoKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERPTVdyYXApO1xuXG4gICAgX3RoaXMgPSBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBfdGhpcy5yZXNpemVPYnNlcnZlciA9IG51bGw7XG4gICAgX3RoaXMubXV0YXRpb25PYnNlcnZlciA9IG51bGw7IC8vIG9yaWdpbmFsIHNjcm9sbCBzaXplIG9mIHRoZSBsaXN0XG5cbiAgICBfdGhpcy5vcmlnaW5hbFRvdGFsV2lkdGggPSAwOyAvLyBjb3B5IG9mIG92ZXJmbG93ZWQgaXRlbXNcblxuICAgIF90aGlzLm92ZXJmbG93ZWRJdGVtcyA9IFtdOyAvLyBjYWNoZSBpdGVtIG9mIHRoZSBvcmlnaW5hbCBpdGVtcyAoc28gd2UgY2FuIHRyYWNrIHRoZSBzaXplIGFuZCBvcmRlcilcblxuICAgIF90aGlzLm1lbnVJdGVtU2l6ZXMgPSBbXTtcbiAgICBfdGhpcy5jYW5jZWxGcmFtZUlkID0gbnVsbDtcbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGxhc3RWaXNpYmxlSW5kZXg6IHVuZGVmaW5lZFxuICAgIH07XG4gICAgX3RoaXMuY2hpbGRSZWYgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlUmVmKCk7IC8vIGdldCBhbGwgdmFsaWQgbWVudUl0ZW0gbm9kZXNcblxuICAgIF90aGlzLmdldE1lbnVJdGVtTm9kZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcHJlZml4Q2xzID0gX3RoaXMucHJvcHMucHJlZml4Q2xzO1xuICAgICAgdmFyIHVsID0gX3RoaXMuY2hpbGRSZWYuY3VycmVudDtcblxuICAgICAgaWYgKCF1bCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9IC8vIGZpbHRlciBvdXQgYWxsIG92ZXJmbG93ZWQgaW5kaWNhdG9yIHBsYWNlaG9sZGVyXG5cblxuICAgICAgcmV0dXJuIFtdLnNsaWNlLmNhbGwodWwuY2hpbGRyZW4pLmZpbHRlcihmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5jbGFzc05hbWUuc3BsaXQoJyAnKS5pbmRleE9mKFwiXCIuY29uY2F0KHByZWZpeENscywgXCItb3ZlcmZsb3dlZC1zdWJtZW51XCIpKSA8IDA7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZ2V0T3ZlcmZsb3dlZFN1Yk1lbnVJdGVtID0gZnVuY3Rpb24gKGtleVByZWZpeCwgb3ZlcmZsb3dlZEl0ZW1zLCByZW5kZXJQbGFjZWhvbGRlcikge1xuICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgb3ZlcmZsb3dlZEluZGljYXRvciA9IF90aGlzJHByb3BzLm92ZXJmbG93ZWRJbmRpY2F0b3IsXG4gICAgICAgICAgbGV2ZWwgPSBfdGhpcyRwcm9wcy5sZXZlbCxcbiAgICAgICAgICBtb2RlID0gX3RoaXMkcHJvcHMubW9kZSxcbiAgICAgICAgICBwcmVmaXhDbHMgPSBfdGhpcyRwcm9wcy5wcmVmaXhDbHMsXG4gICAgICAgICAgdGhlbWUgPSBfdGhpcyRwcm9wcy50aGVtZTtcblxuICAgICAgaWYgKGxldmVsICE9PSAxIHx8IG1vZGUgIT09ICdob3Jpem9udGFsJykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0gLy8gcHV0IGFsbCB0aGUgb3ZlcmZsb3dlZCBpdGVtIGluc2lkZSBhIHN1Ym1lbnVcbiAgICAgIC8vIHdpdGggYSB0aXRsZSBvZiBvdmVyZmxvdyBpbmRpY2F0b3IgKCcuLi4nKVxuXG5cbiAgICAgIHZhciBjb3B5ID0gX3RoaXMucHJvcHMuY2hpbGRyZW5bMF07XG5cbiAgICAgIHZhciBfY29weSRwcm9wcyA9IGNvcHkucHJvcHMsXG4gICAgICAgICAgdGhyb3dBd2F5ID0gX2NvcHkkcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgICAgdGl0bGUgPSBfY29weSRwcm9wcy50aXRsZSxcbiAgICAgICAgICBwcm9wU3R5bGUgPSBfY29weSRwcm9wcy5zdHlsZSxcbiAgICAgICAgICByZXN0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9jb3B5JHByb3BzLCBbXCJjaGlsZHJlblwiLCBcInRpdGxlXCIsIFwic3R5bGVcIl0pO1xuXG4gICAgICB2YXIgc3R5bGUgPSBfb2JqZWN0U3ByZWFkKHt9LCBwcm9wU3R5bGUpO1xuXG4gICAgICB2YXIga2V5ID0gXCJcIi5jb25jYXQoa2V5UHJlZml4LCBcIi1vdmVyZmxvd2VkLWluZGljYXRvclwiKTtcbiAgICAgIHZhciBldmVudEtleSA9IFwiXCIuY29uY2F0KGtleVByZWZpeCwgXCItb3ZlcmZsb3dlZC1pbmRpY2F0b3JcIik7XG5cbiAgICAgIGlmIChvdmVyZmxvd2VkSXRlbXMubGVuZ3RoID09PSAwICYmIHJlbmRlclBsYWNlaG9sZGVyICE9PSB0cnVlKSB7XG4gICAgICAgIHN0eWxlID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdHlsZSksIHt9LCB7XG4gICAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChyZW5kZXJQbGFjZWhvbGRlcikge1xuICAgICAgICBzdHlsZSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3R5bGUpLCB7fSwge1xuICAgICAgICAgIHZpc2liaWxpdHk6ICdoaWRkZW4nLFxuICAgICAgICAgIC8vIHByZXZlbnQgZnJvbSB0YWtpbmcgbm9ybWFsIGRvbSBzcGFjZVxuICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnXG4gICAgICAgIH0pO1xuICAgICAgICBrZXkgPSBcIlwiLmNvbmNhdChrZXksIFwiLXBsYWNlaG9sZGVyXCIpO1xuICAgICAgICBldmVudEtleSA9IFwiXCIuY29uY2F0KGV2ZW50S2V5LCBcIi1wbGFjZWhvbGRlclwiKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHBvcHVwQ2xhc3NOYW1lID0gdGhlbWUgPyBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLVwiKS5jb25jYXQodGhlbWUpIDogJyc7XG4gICAgICB2YXIgcHJvcHMgPSB7fTtcbiAgICAgIG1lbnVBbGxQcm9wcy5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIGlmIChyZXN0W2tdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBwcm9wc1trXSA9IHJlc3Rba107XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN1Yk1lbnUsIF9leHRlbmRzKHtcbiAgICAgICAgdGl0bGU6IG92ZXJmbG93ZWRJbmRpY2F0b3IsXG4gICAgICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1vdmVyZmxvd2VkLXN1Ym1lbnVcIiksXG4gICAgICAgIHBvcHVwQ2xhc3NOYW1lOiBwb3B1cENsYXNzTmFtZVxuICAgICAgfSwgcHJvcHMsIHtcbiAgICAgICAga2V5OiBrZXksXG4gICAgICAgIGV2ZW50S2V5OiBldmVudEtleSxcbiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLFxuICAgICAgICBzdHlsZTogc3R5bGVcbiAgICAgIH0pLCBvdmVyZmxvd2VkSXRlbXMpO1xuICAgIH07IC8vIG1lbW9yaXplIHJlbmRlcmVkIG1lbnVTaXplXG5cblxuICAgIF90aGlzLnNldENoaWxkcmVuV2lkdGhBbmRSZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMubW9kZSAhPT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHVsID0gX3RoaXMuY2hpbGRSZWYuY3VycmVudDtcblxuICAgICAgaWYgKCF1bCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciB1bENoaWxkcmVuTm9kZXMgPSB1bC5jaGlsZHJlbjtcblxuICAgICAgaWYgKCF1bENoaWxkcmVuTm9kZXMgfHwgdWxDaGlsZHJlbk5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBsYXN0T3ZlcmZsb3dlZEluZGljYXRvclBsYWNlaG9sZGVyID0gdWwuY2hpbGRyZW5bdWxDaGlsZHJlbk5vZGVzLmxlbmd0aCAtIDFdOyAvLyBuZWVkIGxhc3Qgb3ZlcmZsb3dlZCBpbmRpY2F0b3IgZm9yIGNhbGN1bGF0aW5nIGxlbmd0aDtcblxuICAgICAgc2V0U3R5bGUobGFzdE92ZXJmbG93ZWRJbmRpY2F0b3JQbGFjZWhvbGRlciwgJ2Rpc3BsYXknLCAnaW5saW5lLWJsb2NrJyk7XG5cbiAgICAgIHZhciBtZW51SXRlbU5vZGVzID0gX3RoaXMuZ2V0TWVudUl0ZW1Ob2RlcygpOyAvLyByZXNldCBkaXNwbGF5IGF0dHJpYnV0ZSBmb3IgYWxsIGhpZGRlbiBlbGVtZW50cyBjYXVzZWQgYnkgb3ZlcmZsb3cgdG8gY2FsY3VsYXRlIHVwZGF0ZWQgd2lkdGhcbiAgICAgIC8vIGFuZCB0aGVuIHJlc2V0IHRvIG9yaWdpbmFsIHN0YXRlIGFmdGVyIHdpZHRoIGNhbGN1bGF0aW9uXG5cblxuICAgICAgdmFyIG92ZXJmbG93ZWRJdGVtcyA9IG1lbnVJdGVtTm9kZXMuZmlsdGVyKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIHJldHVybiBjLmNsYXNzTmFtZS5zcGxpdCgnICcpLmluZGV4T2YoTUVOVUlURU1fT1ZFUkZMT1dFRF9DTEFTU05BTUUpID49IDA7XG4gICAgICB9KTtcbiAgICAgIG92ZXJmbG93ZWRJdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIHNldFN0eWxlKGMsICdkaXNwbGF5JywgJ2lubGluZS1ibG9jaycpO1xuICAgICAgfSk7XG4gICAgICBfdGhpcy5tZW51SXRlbVNpemVzID0gbWVudUl0ZW1Ob2Rlcy5tYXAoZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgcmV0dXJuIGdldFdpZHRoKGMsIHRydWUpO1xuICAgICAgfSk7XG4gICAgICBvdmVyZmxvd2VkSXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICBzZXRTdHlsZShjLCAnZGlzcGxheScsICdub25lJyk7XG4gICAgICB9KTtcbiAgICAgIF90aGlzLm92ZXJmbG93ZWRJbmRpY2F0b3JXaWR0aCA9IGdldFdpZHRoKHVsLmNoaWxkcmVuW3VsLmNoaWxkcmVuLmxlbmd0aCAtIDFdLCB0cnVlKTtcbiAgICAgIF90aGlzLm9yaWdpbmFsVG90YWxXaWR0aCA9IF90aGlzLm1lbnVJdGVtU2l6ZXMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGN1cikge1xuICAgICAgICByZXR1cm4gYWNjICsgY3VyO1xuICAgICAgfSwgMCk7XG5cbiAgICAgIF90aGlzLmhhbmRsZVJlc2l6ZSgpOyAvLyBwcmV2ZW50IHRoZSBvdmVyZmxvd2VkIGluZGljYXRvciBmcm9tIHRha2luZyBzcGFjZTtcblxuXG4gICAgICBzZXRTdHlsZShsYXN0T3ZlcmZsb3dlZEluZGljYXRvclBsYWNlaG9sZGVyLCAnZGlzcGxheScsICdub25lJyk7XG4gICAgfTtcblxuICAgIF90aGlzLmhhbmRsZVJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfdGhpcy5wcm9wcy5tb2RlICE9PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgdWwgPSBfdGhpcy5jaGlsZFJlZi5jdXJyZW50O1xuXG4gICAgICBpZiAoIXVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHdpZHRoID0gZ2V0V2lkdGgodWwpO1xuICAgICAgX3RoaXMub3ZlcmZsb3dlZEl0ZW1zID0gW107XG4gICAgICB2YXIgY3VycmVudFN1bVdpZHRoID0gMDsgLy8gaW5kZXggZm9yIGxhc3QgdmlzaWJsZSBjaGlsZCBpbiBob3Jpem9udGFsIG1vZGVcblxuICAgICAgdmFyIGxhc3RWaXNpYmxlSW5kZXg7IC8vIGZsb2F0IG51bWJlciBjb21wYXJpc29uIGNvdWxkIGJlIHByb2JsZW1hdGljXG4gICAgICAvLyBlLmcuIDAuMSArIDAuMiA+IDAuMyA9PT09PT4gdHJ1ZVxuICAgICAgLy8gdGh1cyB1c2luZyBGTE9BVF9QUkVDSVNJT05fQURKVVNUIGFzIGJ1ZmZlciB0byBoZWxwIHRoZSBzaXR1YXRpb25cblxuICAgICAgaWYgKF90aGlzLm9yaWdpbmFsVG90YWxXaWR0aCA+IHdpZHRoICsgRkxPQVRfUFJFQ0lTSU9OX0FESlVTVCkge1xuICAgICAgICBsYXN0VmlzaWJsZUluZGV4ID0gLTE7XG5cbiAgICAgICAgX3RoaXMubWVudUl0ZW1TaXplcy5mb3JFYWNoKGZ1bmN0aW9uIChsaVdpZHRoKSB7XG4gICAgICAgICAgY3VycmVudFN1bVdpZHRoICs9IGxpV2lkdGg7XG5cbiAgICAgICAgICBpZiAoY3VycmVudFN1bVdpZHRoICsgX3RoaXMub3ZlcmZsb3dlZEluZGljYXRvcldpZHRoIDw9IHdpZHRoKSB7XG4gICAgICAgICAgICBsYXN0VmlzaWJsZUluZGV4ICs9IDE7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBsYXN0VmlzaWJsZUluZGV4OiBsYXN0VmlzaWJsZUluZGV4XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKERPTVdyYXAsIFt7XG4gICAga2V5OiBcImNvbXBvbmVudERpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHRoaXMuc2V0Q2hpbGRyZW5XaWR0aEFuZFJlc2l6ZSgpO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5sZXZlbCA9PT0gMSAmJiB0aGlzLnByb3BzLm1vZGUgPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICB2YXIgbWVudVVsID0gdGhpcy5jaGlsZFJlZi5jdXJyZW50O1xuXG4gICAgICAgIGlmICghbWVudVVsKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcihmdW5jdGlvbiAoZW50cmllcykge1xuICAgICAgICAgIGVudHJpZXMuZm9yRWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY2FuY2VsRnJhbWVJZCA9IF90aGlzMi5jYW5jZWxGcmFtZUlkO1xuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoY2FuY2VsRnJhbWVJZCk7XG4gICAgICAgICAgICBfdGhpczIuY2FuY2VsRnJhbWVJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShfdGhpczIuc2V0Q2hpbGRyZW5XaWR0aEFuZFJlc2l6ZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBbXS5zbGljZS5jYWxsKG1lbnVVbC5jaGlsZHJlbikuY29uY2F0KG1lbnVVbCkuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICBfdGhpczIucmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShlbCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0eXBlb2YgTXV0YXRpb25PYnNlcnZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpczIucmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXG4gICAgICAgICAgICBbXS5zbGljZS5jYWxsKG1lbnVVbC5jaGlsZHJlbikuY29uY2F0KG1lbnVVbCkuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgX3RoaXMyLnJlc2l6ZU9ic2VydmVyLm9ic2VydmUoZWwpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIF90aGlzMi5zZXRDaGlsZHJlbldpZHRoQW5kUmVzaXplKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyLm9ic2VydmUobWVudVVsLCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBmYWxzZSxcbiAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgICAgIHN1YlRyZWU6IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICBpZiAodGhpcy5yZXNpemVPYnNlcnZlcikge1xuICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMubXV0YXRpb25PYnNlcnZlcikge1xuICAgICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgfVxuXG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmNhbmNlbEZyYW1lSWQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJDaGlsZHJlblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJDaGlsZHJlbihjaGlsZHJlbikge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIC8vIG5lZWQgdG8gdGFrZSBjYXJlIG9mIG92ZXJmbG93ZWQgaXRlbXMgaW4gaG9yaXpvbnRhbCBtb2RlXG4gICAgICB2YXIgbGFzdFZpc2libGVJbmRleCA9IHRoaXMuc3RhdGUubGFzdFZpc2libGVJbmRleDtcbiAgICAgIHJldHVybiAoY2hpbGRyZW4gfHwgW10pLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBjaGlsZE5vZGUsIGluZGV4KSB7XG4gICAgICAgIHZhciBpdGVtID0gY2hpbGROb2RlO1xuXG4gICAgICAgIGlmIChfdGhpczMucHJvcHMubW9kZSA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgdmFyIG92ZXJmbG93ZWQgPSBfdGhpczMuZ2V0T3ZlcmZsb3dlZFN1Yk1lbnVJdGVtKGNoaWxkTm9kZS5wcm9wcy5ldmVudEtleSwgW10pO1xuXG4gICAgICAgICAgaWYgKGxhc3RWaXNpYmxlSW5kZXggIT09IHVuZGVmaW5lZCAmJiBfdGhpczMucHJvcHMuY2xhc3NOYW1lLmluZGV4T2YoXCJcIi5jb25jYXQoX3RoaXMzLnByb3BzLnByZWZpeENscywgXCItcm9vdFwiKSkgIT09IC0xKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiBsYXN0VmlzaWJsZUluZGV4KSB7XG4gICAgICAgICAgICAgIGl0ZW0gPSAvKiNfX1BVUkVfXyovUmVhY3QuY2xvbmVFbGVtZW50KGNoaWxkTm9kZSwgLy8g6L+Z6YeM5L+u5pS5IGV2ZW50S2V5IOaYr+S4uuS6humYsuatoumakOiXj+eKtuaAgeS4i+i/mOS8muinpuWPkSBvcGVua2V5cyDkuovku7ZcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGV2ZW50S2V5OiBcIlwiLmNvbmNhdChjaGlsZE5vZGUucHJvcHMuZXZlbnRLZXksIFwiLWhpZGRlblwiKSxcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIExlZ2FjeSBjb2RlLiBIZXJlIGBjbGFzc05hbWVgIG5ldmVyIHVzZWQ6XG4gICAgICAgICAgICAgICAgICogaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0LWNvbXBvbmVudC9tZW51L2NvbW1pdC80Y2Q2YjQ5ZmNlOWQxMTY3MjZmNGVhMDBkZGE4NTMyNWQ2ZjI2NTAwI2RpZmYtZTJmYTQ4Zjc1YzJkZDIzMTgyOTVjZGU0Mjg1NTZhNzZSMjQwXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChNRU5VSVRFTV9PVkVSRkxPV0VEX0NMQVNTTkFNRSlcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gbGFzdFZpc2libGVJbmRleCArIDEpIHtcbiAgICAgICAgICAgICAgX3RoaXMzLm92ZXJmbG93ZWRJdGVtcyA9IGNoaWxkcmVuLnNsaWNlKGxhc3RWaXNpYmxlSW5kZXggKyAxKS5tYXAoZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNsb25lRWxlbWVudChjLCAvLyBjaGlsZHJlbltpbmRleF0ua2V5IHdpbGwgYmVjb21lICcuJGtleScgaW4gY2xvbmUgYnkgZGVmYXVsdCxcbiAgICAgICAgICAgICAgICAvLyB3ZSBoYXZlIHRvIG92ZXJ3cml0ZSB3aXRoIHRoZSBjb3JyZWN0IGtleSBleHBsaWNpdGx5XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiBjLnByb3BzLmV2ZW50S2V5LFxuICAgICAgICAgICAgICAgICAgbW9kZTogJ3ZlcnRpY2FsLWxlZnQnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBvdmVyZmxvd2VkID0gX3RoaXMzLmdldE92ZXJmbG93ZWRTdWJNZW51SXRlbShjaGlsZE5vZGUucHJvcHMuZXZlbnRLZXksIF90aGlzMy5vdmVyZmxvd2VkSXRlbXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciByZXQgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGFjYyksIFtvdmVyZmxvd2VkLCBpdGVtXSk7XG5cbiAgICAgICAgICBpZiAoaW5kZXggPT09IGNoaWxkcmVuLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIC8vIG5lZWQgYSBwbGFjZWhvbGRlciBmb3IgY2FsY3VsYXRpbmcgb3ZlcmZsb3dlZCBpbmRpY2F0b3Igd2lkdGhcbiAgICAgICAgICAgIHJldC5wdXNoKF90aGlzMy5nZXRPdmVyZmxvd2VkU3ViTWVudUl0ZW0oY2hpbGROb2RlLnByb3BzLmV2ZW50S2V5LCBbXSwgdHJ1ZSkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShhY2MpLCBbaXRlbV0pO1xuICAgICAgfSwgW10pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzMiA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgdmlzaWJsZSA9IF90aGlzJHByb3BzMi52aXNpYmxlLFxuICAgICAgICAgIHByZWZpeENscyA9IF90aGlzJHByb3BzMi5wcmVmaXhDbHMsXG4gICAgICAgICAgb3ZlcmZsb3dlZEluZGljYXRvciA9IF90aGlzJHByb3BzMi5vdmVyZmxvd2VkSW5kaWNhdG9yLFxuICAgICAgICAgIG1vZGUgPSBfdGhpcyRwcm9wczIubW9kZSxcbiAgICAgICAgICBsZXZlbCA9IF90aGlzJHByb3BzMi5sZXZlbCxcbiAgICAgICAgICB0YWcgPSBfdGhpcyRwcm9wczIudGFnLFxuICAgICAgICAgIGNoaWxkcmVuID0gX3RoaXMkcHJvcHMyLmNoaWxkcmVuLFxuICAgICAgICAgIHRoZW1lID0gX3RoaXMkcHJvcHMyLnRoZW1lLFxuICAgICAgICAgIHJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3RoaXMkcHJvcHMyLCBbXCJ2aXNpYmxlXCIsIFwicHJlZml4Q2xzXCIsIFwib3ZlcmZsb3dlZEluZGljYXRvclwiLCBcIm1vZGVcIiwgXCJsZXZlbFwiLCBcInRhZ1wiLCBcImNoaWxkcmVuXCIsIFwidGhlbWVcIl0pO1xuXG4gICAgICB2YXIgVGFnID0gdGFnO1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRhZywgX2V4dGVuZHMoe1xuICAgICAgICByZWY6IHRoaXMuY2hpbGRSZWZcbiAgICAgIH0sIHJlc3QpLCB0aGlzLnJlbmRlckNoaWxkcmVuKGNoaWxkcmVuKSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIERPTVdyYXA7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbkRPTVdyYXAuZGVmYXVsdFByb3BzID0ge1xuICB0YWc6ICdkaXYnLFxuICBjbGFzc05hbWU6ICcnXG59O1xuZXhwb3J0IGRlZmF1bHQgRE9NV3JhcDsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrXCI7XG5pbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzc1wiO1xuaW1wb3J0IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2Fzc2VydFRoaXNJbml0aWFsaXplZFwiO1xuaW1wb3J0IF9pbmhlcml0cyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHNcIjtcbmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyXCI7XG5pbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdtaW5pLXN0b3JlJztcbmltcG9ydCBLZXlDb2RlIGZyb20gXCJyYy11dGlsL2VzL0tleUNvZGVcIjtcbmltcG9ydCBjcmVhdGVDaGFpbmVkRnVuY3Rpb24gZnJvbSBcInJjLXV0aWwvZXMvY3JlYXRlQ2hhaW5lZEZ1bmN0aW9uXCI7XG5pbXBvcnQgdG9BcnJheSBmcm9tIFwicmMtdXRpbC9lcy9DaGlsZHJlbi90b0FycmF5XCI7XG5pbXBvcnQgc2hhbGxvd0VxdWFsIGZyb20gJ3NoYWxsb3dlcXVhbCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7IGdldEtleUZyb21DaGlsZHJlbkluZGV4LCBsb29wTWVudUl0ZW0sIG5vb3AsIG1lbnVBbGxQcm9wcywgaXNNb2JpbGVEZXZpY2UgfSBmcm9tICcuL3V0aWwnO1xuaW1wb3J0IERPTVdyYXAgZnJvbSAnLi9ET01XcmFwJztcblxuZnVuY3Rpb24gYWxsRGlzYWJsZWQoYXJyKSB7XG4gIGlmICghYXJyLmxlbmd0aCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGFyci5ldmVyeShmdW5jdGlvbiAoYykge1xuICAgIHJldHVybiAhIWMucHJvcHMuZGlzYWJsZWQ7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVBY3RpdmVLZXkoc3RvcmUsIG1lbnVJZCwgYWN0aXZlS2V5KSB7XG4gIHZhciBzdGF0ZSA9IHN0b3JlLmdldFN0YXRlKCk7XG4gIHN0b3JlLnNldFN0YXRlKHtcbiAgICBhY3RpdmVLZXk6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUuYWN0aXZlS2V5KSwge30sIF9kZWZpbmVQcm9wZXJ0eSh7fSwgbWVudUlkLCBhY3RpdmVLZXkpKVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0RXZlbnRLZXkocHJvcHMpIHtcbiAgLy8gd2hlbiBldmVudEtleSBub3QgYXZhaWxhYmxlICxpdCdzIG1lbnUgYW5kIHJldHVybiBtZW51IGlkICcwLW1lbnUtJ1xuICByZXR1cm4gcHJvcHMuZXZlbnRLZXkgfHwgJzAtbWVudS0nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWN0aXZlS2V5KHByb3BzLCBvcmlnaW5hbEFjdGl2ZUtleSkge1xuICB2YXIgYWN0aXZlS2V5ID0gb3JpZ2luYWxBY3RpdmVLZXk7XG4gIHZhciBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuLFxuICAgICAgZXZlbnRLZXkgPSBwcm9wcy5ldmVudEtleTtcblxuICBpZiAoYWN0aXZlS2V5KSB7XG4gICAgdmFyIGZvdW5kO1xuICAgIGxvb3BNZW51SXRlbShjaGlsZHJlbiwgZnVuY3Rpb24gKGMsIGkpIHtcbiAgICAgIGlmIChjICYmIGMucHJvcHMgJiYgIWMucHJvcHMuZGlzYWJsZWQgJiYgYWN0aXZlS2V5ID09PSBnZXRLZXlGcm9tQ2hpbGRyZW5JbmRleChjLCBldmVudEtleSwgaSkpIHtcbiAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGZvdW5kKSB7XG4gICAgICByZXR1cm4gYWN0aXZlS2V5O1xuICAgIH1cbiAgfVxuXG4gIGFjdGl2ZUtleSA9IG51bGw7XG5cbiAgaWYgKHByb3BzLmRlZmF1bHRBY3RpdmVGaXJzdCkge1xuICAgIGxvb3BNZW51SXRlbShjaGlsZHJlbiwgZnVuY3Rpb24gKGMsIGkpIHtcbiAgICAgIGlmICghYWN0aXZlS2V5ICYmIGMgJiYgIWMucHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgICAgYWN0aXZlS2V5ID0gZ2V0S2V5RnJvbUNoaWxkcmVuSW5kZXgoYywgZXZlbnRLZXksIGkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBhY3RpdmVLZXk7XG4gIH1cblxuICByZXR1cm4gYWN0aXZlS2V5O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVSZWYoYykge1xuICBpZiAoIWMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWludmFsaWQtdGhpcyAqL1xuXG5cbiAgdmFyIGluZGV4ID0gdGhpcy5pbnN0YW5jZUFycmF5LmluZGV4T2YoYyk7XG5cbiAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgIC8vIHVwZGF0ZSBjb21wb25lbnQgaWYgaXQncyBhbHJlYWR5IGluc2lkZSBpbnN0YW5jZUFycmF5XG4gICAgdGhpcy5pbnN0YW5jZUFycmF5W2luZGV4XSA9IGM7XG4gIH0gZWxzZSB7XG4gICAgLy8gYWRkIGNvbXBvbmVudCBpZiBpdCdzIG5vdCBpbiBpbnN0YW5jZUFycmF5IHlldDtcbiAgICB0aGlzLmluc3RhbmNlQXJyYXkucHVzaChjKTtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1pbnZhbGlkLXRoaXMgKi9cblxufVxuZXhwb3J0IHZhciBTdWJQb3B1cE1lbnUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFN1YlBvcHVwTWVudSwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihTdWJQb3B1cE1lbnUpO1xuXG4gIGZ1bmN0aW9uIFN1YlBvcHVwTWVudShwcm9wcykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdWJQb3B1cE1lbnUpO1xuXG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcyk7XG4gICAgLyoqXG4gICAgICogYWxsIGtleWJvYXJkIGV2ZW50cyBjYWxsYmFja3MgcnVuIGZyb20gaGVyZSBhdCBmaXJzdFxuICAgICAqXG4gICAgICogbm90ZTpcbiAgICAgKiAgVGhpcyBsZWdhY3kgY29kZSB0aGF0IGBvbktleURvd25gIGlzIGNhbGxlZCBieSBwYXJlbnQgaW5zdGVhZCBvZiBkb20gc2VsZi5cbiAgICAgKiAgd2hpY2ggbmVlZCByZXR1cm4gY29kZSB0byBjaGVjayBpZiB0aGlzIGV2ZW50IGlzIGhhbmRsZWRcbiAgICAgKi9cblxuICAgIF90aGlzLm9uS2V5RG93biA9IGZ1bmN0aW9uIChlLCBjYWxsYmFjaykge1xuICAgICAgdmFyIGtleUNvZGUgPSBlLmtleUNvZGU7XG4gICAgICB2YXIgaGFuZGxlZDtcblxuICAgICAgX3RoaXMuZ2V0RmxhdEluc3RhbmNlQXJyYXkoKS5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgaWYgKG9iaiAmJiBvYmoucHJvcHMuYWN0aXZlICYmIG9iai5vbktleURvd24pIHtcbiAgICAgICAgICBoYW5kbGVkID0gb2JqLm9uS2V5RG93bihlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChoYW5kbGVkKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuXG4gICAgICB2YXIgYWN0aXZlSXRlbSA9IG51bGw7XG5cbiAgICAgIGlmIChrZXlDb2RlID09PSBLZXlDb2RlLlVQIHx8IGtleUNvZGUgPT09IEtleUNvZGUuRE9XTikge1xuICAgICAgICBhY3RpdmVJdGVtID0gX3RoaXMuc3RlcChrZXlDb2RlID09PSBLZXlDb2RlLlVQID8gLTEgOiAxKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGFjdGl2ZUl0ZW0pIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB1cGRhdGVBY3RpdmVLZXkoX3RoaXMucHJvcHMuc3RvcmUsIGdldEV2ZW50S2V5KF90aGlzLnByb3BzKSwgYWN0aXZlSXRlbS5wcm9wcy5ldmVudEtleSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGNhbGxiYWNrKGFjdGl2ZUl0ZW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcblxuICAgIF90aGlzLm9uSXRlbUhvdmVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBrZXkgPSBlLmtleSxcbiAgICAgICAgICBob3ZlciA9IGUuaG92ZXI7XG4gICAgICB1cGRhdGVBY3RpdmVLZXkoX3RoaXMucHJvcHMuc3RvcmUsIGdldEV2ZW50S2V5KF90aGlzLnByb3BzKSwgaG92ZXIgPyBrZXkgOiBudWxsKTtcbiAgICB9O1xuXG4gICAgX3RoaXMub25EZXNlbGVjdCA9IGZ1bmN0aW9uIChzZWxlY3RJbmZvKSB7XG4gICAgICBfdGhpcy5wcm9wcy5vbkRlc2VsZWN0KHNlbGVjdEluZm8pO1xuICAgIH07XG5cbiAgICBfdGhpcy5vblNlbGVjdCA9IGZ1bmN0aW9uIChzZWxlY3RJbmZvKSB7XG4gICAgICBfdGhpcy5wcm9wcy5vblNlbGVjdChzZWxlY3RJbmZvKTtcbiAgICB9O1xuXG4gICAgX3RoaXMub25DbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5wcm9wcy5vbkNsaWNrKGUpO1xuICAgIH07XG5cbiAgICBfdGhpcy5vbk9wZW5DaGFuZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMucHJvcHMub25PcGVuQ2hhbmdlKGUpO1xuICAgIH07XG5cbiAgICBfdGhpcy5vbkRlc3Ryb3kgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgX3RoaXMucHJvcHMub25EZXN0cm95KGtleSk7XG4gICAgfTtcblxuICAgIF90aGlzLmdldEZsYXRJbnN0YW5jZUFycmF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLmluc3RhbmNlQXJyYXk7XG4gICAgfTtcblxuICAgIF90aGlzLnN0ZXAgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XG4gICAgICB2YXIgY2hpbGRyZW4gPSBfdGhpcy5nZXRGbGF0SW5zdGFuY2VBcnJheSgpO1xuXG4gICAgICB2YXIgYWN0aXZlS2V5ID0gX3RoaXMucHJvcHMuc3RvcmUuZ2V0U3RhdGUoKS5hY3RpdmVLZXlbZ2V0RXZlbnRLZXkoX3RoaXMucHJvcHMpXTtcblxuICAgICAgdmFyIGxlbiA9IGNoaWxkcmVuLmxlbmd0aDtcblxuICAgICAgaWYgKCFsZW4pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmIChkaXJlY3Rpb24gPCAwKSB7XG4gICAgICAgIGNoaWxkcmVuID0gY2hpbGRyZW4uY29uY2F0KCkucmV2ZXJzZSgpO1xuICAgICAgfSAvLyBmaW5kIGN1cnJlbnQgYWN0aXZlSW5kZXhcblxuXG4gICAgICB2YXIgYWN0aXZlSW5kZXggPSAtMTtcbiAgICAgIGNoaWxkcmVuLmV2ZXJ5KGZ1bmN0aW9uIChjLCBjaSkge1xuICAgICAgICBpZiAoYyAmJiBjLnByb3BzLmV2ZW50S2V5ID09PSBhY3RpdmVLZXkpIHtcbiAgICAgICAgICBhY3RpdmVJbmRleCA9IGNpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICghX3RoaXMucHJvcHMuZGVmYXVsdEFjdGl2ZUZpcnN0ICYmIGFjdGl2ZUluZGV4ICE9PSAtMSAmJiBhbGxEaXNhYmxlZChjaGlsZHJlbi5zbGljZShhY3RpdmVJbmRleCwgbGVuIC0gMSkpKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHZhciBzdGFydCA9IChhY3RpdmVJbmRleCArIDEpICUgbGVuO1xuICAgICAgdmFyIGkgPSBzdGFydDtcblxuICAgICAgZG8ge1xuICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcblxuICAgICAgICBpZiAoIWNoaWxkIHx8IGNoaWxkLnByb3BzLmRpc2FibGVkKSB7XG4gICAgICAgICAgaSA9IChpICsgMSkgJSBsZW47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgICB9XG4gICAgICB9IHdoaWxlIChpICE9PSBzdGFydCk7XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICBfdGhpcy5yZW5kZXJDb21tb25NZW51SXRlbSA9IGZ1bmN0aW9uIChjaGlsZCwgaSwgZXh0cmFQcm9wcykge1xuICAgICAgdmFyIHN0YXRlID0gX3RoaXMucHJvcHMuc3RvcmUuZ2V0U3RhdGUoKTtcblxuICAgICAgdmFyIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZSA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLFxuICAgICAgICAgIHByb3BzID0gX2Fzc2VydFRoaXNJbml0aWFsaXplLnByb3BzO1xuXG4gICAgICB2YXIga2V5ID0gZ2V0S2V5RnJvbUNoaWxkcmVuSW5kZXgoY2hpbGQsIHByb3BzLmV2ZW50S2V5LCBpKTtcbiAgICAgIHZhciBjaGlsZFByb3BzID0gY2hpbGQucHJvcHM7IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbnQtZGVzaWduL2FudC1kZXNpZ24vaXNzdWVzLzExNTE3I2lzc3VlY29tbWVudC00Nzc0MDMwNTVcblxuICAgICAgaWYgKCFjaGlsZFByb3BzIHx8IHR5cGVvZiBjaGlsZC50eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICB9XG5cbiAgICAgIHZhciBpc0FjdGl2ZSA9IGtleSA9PT0gc3RhdGUuYWN0aXZlS2V5O1xuXG4gICAgICB2YXIgbmV3Q2hpbGRQcm9wcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7XG4gICAgICAgIG1vZGU6IGNoaWxkUHJvcHMubW9kZSB8fCBwcm9wcy5tb2RlLFxuICAgICAgICBsZXZlbDogcHJvcHMubGV2ZWwsXG4gICAgICAgIGlubGluZUluZGVudDogcHJvcHMuaW5saW5lSW5kZW50LFxuICAgICAgICByZW5kZXJNZW51SXRlbTogX3RoaXMucmVuZGVyTWVudUl0ZW0sXG4gICAgICAgIHJvb3RQcmVmaXhDbHM6IHByb3BzLnByZWZpeENscyxcbiAgICAgICAgaW5kZXg6IGksXG4gICAgICAgIHBhcmVudE1lbnU6IHByb3BzLnBhcmVudE1lbnUsXG4gICAgICAgIC8vIGN1c3RvbWl6ZWQgcmVmIGZ1bmN0aW9uLCBuZWVkIHRvIGJlIGludm9rZWQgbWFudWFsbHkgaW4gY2hpbGQncyBjb21wb25lbnREaWRNb3VudFxuICAgICAgICBtYW51YWxSZWY6IGNoaWxkUHJvcHMuZGlzYWJsZWQgPyB1bmRlZmluZWQgOiBjcmVhdGVDaGFpbmVkRnVuY3Rpb24oY2hpbGQucmVmLCBzYXZlUmVmLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpKSxcbiAgICAgICAgZXZlbnRLZXk6IGtleSxcbiAgICAgICAgYWN0aXZlOiAhY2hpbGRQcm9wcy5kaXNhYmxlZCAmJiBpc0FjdGl2ZSxcbiAgICAgICAgbXVsdGlwbGU6IHByb3BzLm11bHRpcGxlLFxuICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAoY2hpbGRQcm9wcy5vbkNsaWNrIHx8IG5vb3ApKGUpO1xuXG4gICAgICAgICAgX3RoaXMub25DbGljayhlKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25JdGVtSG92ZXI6IF90aGlzLm9uSXRlbUhvdmVyLFxuICAgICAgICBtb3Rpb246IHByb3BzLm1vdGlvbixcbiAgICAgICAgc3ViTWVudU9wZW5EZWxheTogcHJvcHMuc3ViTWVudU9wZW5EZWxheSxcbiAgICAgICAgc3ViTWVudUNsb3NlRGVsYXk6IHByb3BzLnN1Yk1lbnVDbG9zZURlbGF5LFxuICAgICAgICBmb3JjZVN1Yk1lbnVSZW5kZXI6IHByb3BzLmZvcmNlU3ViTWVudVJlbmRlcixcbiAgICAgICAgb25PcGVuQ2hhbmdlOiBfdGhpcy5vbk9wZW5DaGFuZ2UsXG4gICAgICAgIG9uRGVzZWxlY3Q6IF90aGlzLm9uRGVzZWxlY3QsXG4gICAgICAgIG9uU2VsZWN0OiBfdGhpcy5vblNlbGVjdCxcbiAgICAgICAgYnVpbHRpblBsYWNlbWVudHM6IHByb3BzLmJ1aWx0aW5QbGFjZW1lbnRzLFxuICAgICAgICBpdGVtSWNvbjogY2hpbGRQcm9wcy5pdGVtSWNvbiB8fCBfdGhpcy5wcm9wcy5pdGVtSWNvbixcbiAgICAgICAgZXhwYW5kSWNvbjogY2hpbGRQcm9wcy5leHBhbmRJY29uIHx8IF90aGlzLnByb3BzLmV4cGFuZEljb25cbiAgICAgIH0sIGV4dHJhUHJvcHMpLCB7fSwge1xuICAgICAgICBkaXJlY3Rpb246IHByb3BzLmRpcmVjdGlvblxuICAgICAgfSk7IC8vIHJlZjogaHR0cHM6Ly9naXRodWIuY29tL2FudC1kZXNpZ24vYW50LWRlc2lnbi9pc3N1ZXMvMTM5NDNcblxuXG4gICAgICBpZiAocHJvcHMubW9kZSA9PT0gJ2lubGluZScgfHwgaXNNb2JpbGVEZXZpY2UoKSkge1xuICAgICAgICBuZXdDaGlsZFByb3BzLnRyaWdnZXJTdWJNZW51QWN0aW9uID0gJ2NsaWNrJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGQsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbmV3Q2hpbGRQcm9wcyksIHt9LCB7XG4gICAgICAgIGtleToga2V5IHx8IGlcbiAgICAgIH0pKTtcbiAgICB9O1xuXG4gICAgX3RoaXMucmVuZGVyTWVudUl0ZW0gPSBmdW5jdGlvbiAoYywgaSwgc3ViTWVudUtleSkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoIWMpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciBzdGF0ZSA9IF90aGlzLnByb3BzLnN0b3JlLmdldFN0YXRlKCk7XG5cbiAgICAgIHZhciBleHRyYVByb3BzID0ge1xuICAgICAgICBvcGVuS2V5czogc3RhdGUub3BlbktleXMsXG4gICAgICAgIHNlbGVjdGVkS2V5czogc3RhdGUuc2VsZWN0ZWRLZXlzLFxuICAgICAgICB0cmlnZ2VyU3ViTWVudUFjdGlvbjogX3RoaXMucHJvcHMudHJpZ2dlclN1Yk1lbnVBY3Rpb24sXG4gICAgICAgIHN1Yk1lbnVLZXk6IHN1Yk1lbnVLZXlcbiAgICAgIH07XG4gICAgICByZXR1cm4gX3RoaXMucmVuZGVyQ29tbW9uTWVudUl0ZW0oYywgaSwgZXh0cmFQcm9wcyk7XG4gICAgfTtcblxuICAgIHByb3BzLnN0b3JlLnNldFN0YXRlKHtcbiAgICAgIGFjdGl2ZUtleTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcy5zdG9yZS5nZXRTdGF0ZSgpLmFjdGl2ZUtleSksIHt9LCBfZGVmaW5lUHJvcGVydHkoe30sIHByb3BzLmV2ZW50S2V5LCBnZXRBY3RpdmVLZXkocHJvcHMsIHByb3BzLmFjdGl2ZUtleSkpKVxuICAgIH0pO1xuICAgIF90aGlzLmluc3RhbmNlQXJyYXkgPSBbXTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoU3ViUG9wdXBNZW51LCBbe1xuICAgIGtleTogXCJjb21wb25lbnREaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIC8vIGludm9rZSBjdXN0b21pemVkIHJlZiB0byBleHBvc2UgY29tcG9uZW50IHRvIG1peGluXG4gICAgICBpZiAodGhpcy5wcm9wcy5tYW51YWxSZWYpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5tYW51YWxSZWYodGhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNob3VsZENvbXBvbmVudFVwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy52aXNpYmxlIHx8IG5leHRQcm9wcy52aXNpYmxlIHx8IHRoaXMucHJvcHMuY2xhc3NOYW1lICE9PSBuZXh0UHJvcHMuY2xhc3NOYW1lIHx8ICFzaGFsbG93RXF1YWwodGhpcy5wcm9wcy5zdHlsZSwgbmV4dFByb3BzLnN0eWxlKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkVXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgICB2YXIgb3JpZ2luYWxBY3RpdmVLZXkgPSAnYWN0aXZlS2V5JyBpbiBwcm9wcyA/IHByb3BzLmFjdGl2ZUtleSA6IHByb3BzLnN0b3JlLmdldFN0YXRlKCkuYWN0aXZlS2V5W2dldEV2ZW50S2V5KHByb3BzKV07XG4gICAgICB2YXIgYWN0aXZlS2V5ID0gZ2V0QWN0aXZlS2V5KHByb3BzLCBvcmlnaW5hbEFjdGl2ZUtleSk7XG5cbiAgICAgIGlmIChhY3RpdmVLZXkgIT09IG9yaWdpbmFsQWN0aXZlS2V5KSB7XG4gICAgICAgIHVwZGF0ZUFjdGl2ZUtleShwcm9wcy5zdG9yZSwgZ2V0RXZlbnRLZXkocHJvcHMpLCBhY3RpdmVLZXkpO1xuICAgICAgfSBlbHNlIGlmICgnYWN0aXZlS2V5JyBpbiBwcmV2UHJvcHMpIHtcbiAgICAgICAgLy8gSWYgcHJldiBhY3RpdmVLZXkgaXMgbm90IHNhbWUgYXMgY3VycmVudCBhY3RpdmVLZXksXG4gICAgICAgIC8vIHdlIHNob3VsZCBzZXQgaXQuXG4gICAgICAgIHZhciBwcmV2QWN0aXZlS2V5ID0gZ2V0QWN0aXZlS2V5KHByZXZQcm9wcywgcHJldlByb3BzLmFjdGl2ZUtleSk7XG5cbiAgICAgICAgaWYgKGFjdGl2ZUtleSAhPT0gcHJldkFjdGl2ZUtleSkge1xuICAgICAgICAgIHVwZGF0ZUFjdGl2ZUtleShwcm9wcy5zdG9yZSwgZ2V0RXZlbnRLZXkocHJvcHMpLCBhY3RpdmVLZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIHByb3BzID0gX2V4dGVuZHMoe30sIHRoaXMucHJvcHMpO1xuXG4gICAgICB0aGlzLmluc3RhbmNlQXJyYXkgPSBbXTtcbiAgICAgIHZhciBjbGFzc05hbWUgPSBjbGFzc05hbWVzKHByb3BzLnByZWZpeENscywgcHJvcHMuY2xhc3NOYW1lLCBcIlwiLmNvbmNhdChwcm9wcy5wcmVmaXhDbHMsIFwiLVwiKS5jb25jYXQocHJvcHMubW9kZSkpO1xuICAgICAgdmFyIGRvbVByb3BzID0ge1xuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgLy8gcm9sZSBjb3VsZCBiZSAnc2VsZWN0JyBhbmQgYnkgZGVmYXVsdCBzZXQgdG8gbWVudVxuICAgICAgICByb2xlOiBwcm9wcy5yb2xlIHx8ICdtZW51J1xuICAgICAgfTtcblxuICAgICAgaWYgKHByb3BzLmlkKSB7XG4gICAgICAgIGRvbVByb3BzLmlkID0gcHJvcHMuaWQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wcy5mb2N1c2FibGUpIHtcbiAgICAgICAgZG9tUHJvcHMudGFiSW5kZXggPSAwO1xuICAgICAgICBkb21Qcm9wcy5vbktleURvd24gPSB0aGlzLm9uS2V5RG93bjtcbiAgICAgIH1cblxuICAgICAgdmFyIHByZWZpeENscyA9IHByb3BzLnByZWZpeENscyxcbiAgICAgICAgICBldmVudEtleSA9IHByb3BzLmV2ZW50S2V5LFxuICAgICAgICAgIHZpc2libGUgPSBwcm9wcy52aXNpYmxlLFxuICAgICAgICAgIGxldmVsID0gcHJvcHMubGV2ZWwsXG4gICAgICAgICAgbW9kZSA9IHByb3BzLm1vZGUsXG4gICAgICAgICAgb3ZlcmZsb3dlZEluZGljYXRvciA9IHByb3BzLm92ZXJmbG93ZWRJbmRpY2F0b3IsXG4gICAgICAgICAgdGhlbWUgPSBwcm9wcy50aGVtZTtcbiAgICAgIG1lbnVBbGxQcm9wcy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIGRlbGV0ZSBwcm9wc1trZXldO1xuICAgICAgfSk7IC8vIE90aGVyd2lzZSwgdGhlIHByb3BhZ2F0ZWQgY2xpY2sgZXZlbnQgd2lsbCB0cmlnZ2VyIGFub3RoZXIgb25DbGlja1xuXG4gICAgICBkZWxldGUgcHJvcHMub25DbGljaztcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChET01XcmFwLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICAgICAgcHJlZml4Q2xzOiBwcmVmaXhDbHMsXG4gICAgICAgIG1vZGU6IG1vZGUsXG4gICAgICAgIHRhZzogXCJ1bFwiLFxuICAgICAgICBsZXZlbDogbGV2ZWwsXG4gICAgICAgIHRoZW1lOiB0aGVtZSxcbiAgICAgICAgdmlzaWJsZTogdmlzaWJsZSxcbiAgICAgICAgb3ZlcmZsb3dlZEluZGljYXRvcjogb3ZlcmZsb3dlZEluZGljYXRvclxuICAgICAgfSwgZG9tUHJvcHMpLCB0b0FycmF5KHByb3BzLmNoaWxkcmVuKS5tYXAoZnVuY3Rpb24gKGMsIGkpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMi5yZW5kZXJNZW51SXRlbShjLCBpLCBldmVudEtleSB8fCAnMC1tZW51LScpO1xuICAgICAgfSkpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTdWJQb3B1cE1lbnU7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5TdWJQb3B1cE1lbnUuZGVmYXVsdFByb3BzID0ge1xuICBwcmVmaXhDbHM6ICdyYy1tZW51JyxcbiAgY2xhc3NOYW1lOiAnJyxcbiAgbW9kZTogJ3ZlcnRpY2FsJyxcbiAgbGV2ZWw6IDEsXG4gIGlubGluZUluZGVudDogMjQsXG4gIHZpc2libGU6IHRydWUsXG4gIGZvY3VzYWJsZTogdHJ1ZSxcbiAgc3R5bGU6IHt9LFxuICBtYW51YWxSZWY6IG5vb3Bcbn07XG52YXIgY29ubmVjdGVkID0gY29ubmVjdCgpKFN1YlBvcHVwTWVudSk7XG5leHBvcnQgZGVmYXVsdCBjb25uZWN0ZWQ7IiwiaW1wb3J0IF90eXBlb2YgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZlwiO1xuaW1wb3J0IHdhcm5pbmcgZnJvbSBcInJjLXV0aWwvZXMvd2FybmluZ1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1vdGlvbihfcmVmLCBfcmVmMiwgbWVudU1vZGUpIHtcbiAgdmFyIHByZWZpeENscyA9IF9yZWYucHJlZml4Q2xzLFxuICAgICAgbW90aW9uID0gX3JlZi5tb3Rpb24sXG4gICAgICBfcmVmJGRlZmF1bHRNb3Rpb25zID0gX3JlZi5kZWZhdWx0TW90aW9ucyxcbiAgICAgIGRlZmF1bHRNb3Rpb25zID0gX3JlZiRkZWZhdWx0TW90aW9ucyA9PT0gdm9pZCAwID8ge30gOiBfcmVmJGRlZmF1bHRNb3Rpb25zLFxuICAgICAgb3BlbkFuaW1hdGlvbiA9IF9yZWYub3BlbkFuaW1hdGlvbixcbiAgICAgIG9wZW5UcmFuc2l0aW9uTmFtZSA9IF9yZWYub3BlblRyYW5zaXRpb25OYW1lO1xuICB2YXIgc3dpdGNoaW5nTW9kZUZyb21JbmxpbmUgPSBfcmVmMi5zd2l0Y2hpbmdNb2RlRnJvbUlubGluZTtcblxuICBpZiAobW90aW9uKSB7XG4gICAgcmV0dXJuIG1vdGlvbjtcbiAgfVxuXG4gIGlmIChfdHlwZW9mKG9wZW5BbmltYXRpb24pID09PSAnb2JqZWN0JyAmJiBvcGVuQW5pbWF0aW9uKSB7XG4gICAgd2FybmluZyhmYWxzZSwgJ09iamVjdCB0eXBlIG9mIGBvcGVuQW5pbWF0aW9uYCBpcyByZW1vdmVkLiBQbGVhc2UgdXNlIGBtb3Rpb25gIGluc3RlYWQuJyk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG9wZW5BbmltYXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1vdGlvbk5hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItb3Blbi1cIikuY29uY2F0KG9wZW5BbmltYXRpb24pXG4gICAgfTtcbiAgfVxuXG4gIGlmIChvcGVuVHJhbnNpdGlvbk5hbWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbW90aW9uTmFtZTogb3BlblRyYW5zaXRpb25OYW1lXG4gICAgfTtcbiAgfSAvLyBEZWZhdWx0IGxvZ2ljXG5cblxuICB2YXIgZGVmYXVsdE1vdGlvbiA9IGRlZmF1bHRNb3Rpb25zW21lbnVNb2RlXTtcblxuICBpZiAoZGVmYXVsdE1vdGlvbikge1xuICAgIHJldHVybiBkZWZhdWx0TW90aW9uO1xuICB9IC8vIFdoZW4gbW9kZSBzd2l0Y2ggZnJvbSBpbmxpbmVcbiAgLy8gc3VibWVudSBzaG91bGQgaGlkZSB3aXRob3V0IGFuaW1hdGlvblxuXG5cbiAgcmV0dXJuIHN3aXRjaGluZ01vZGVGcm9tSW5saW5lID8gbnVsbCA6IGRlZmF1bHRNb3Rpb25zLm90aGVyO1xufSIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrXCI7XG5pbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzc1wiO1xuaW1wb3J0IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2Fzc2VydFRoaXNJbml0aWFsaXplZFwiO1xuaW1wb3J0IF9pbmhlcml0cyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHNcIjtcbmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBQcm92aWRlciwgY3JlYXRlIH0gZnJvbSAnbWluaS1zdG9yZSc7XG5pbXBvcnQgb21pdCBmcm9tIFwicmMtdXRpbC9lcy9vbWl0XCI7XG5pbXBvcnQgU3ViUG9wdXBNZW51LCB7IGdldEFjdGl2ZUtleSB9IGZyb20gJy4vU3ViUG9wdXBNZW51JztcbmltcG9ydCB7IG5vb3AgfSBmcm9tICcuL3V0aWwnO1xuaW1wb3J0IHsgZ2V0TW90aW9uIH0gZnJvbSAnLi91dGlscy9sZWdhY3lVdGlsJztcblxudmFyIE1lbnUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKE1lbnUsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoTWVudSk7XG5cbiAgZnVuY3Rpb24gTWVudShwcm9wcykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNZW51KTtcblxuICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpO1xuXG4gICAgX3RoaXMub25TZWxlY3QgPSBmdW5jdGlvbiAoc2VsZWN0SW5mbykge1xuICAgICAgdmFyIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZSA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLFxuICAgICAgICAgIHByb3BzID0gX2Fzc2VydFRoaXNJbml0aWFsaXplLnByb3BzO1xuXG4gICAgICBpZiAocHJvcHMuc2VsZWN0YWJsZSkge1xuICAgICAgICAvLyByb290IG1lbnVcbiAgICAgICAgdmFyIF90aGlzJHN0b3JlJGdldFN0YXRlID0gX3RoaXMuc3RvcmUuZ2V0U3RhdGUoKSxcbiAgICAgICAgICAgIF9zZWxlY3RlZEtleXMgPSBfdGhpcyRzdG9yZSRnZXRTdGF0ZS5zZWxlY3RlZEtleXM7XG5cbiAgICAgICAgdmFyIHNlbGVjdGVkS2V5ID0gc2VsZWN0SW5mby5rZXk7XG5cbiAgICAgICAgaWYgKHByb3BzLm11bHRpcGxlKSB7XG4gICAgICAgICAgX3NlbGVjdGVkS2V5cyA9IF9zZWxlY3RlZEtleXMuY29uY2F0KFtzZWxlY3RlZEtleV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9zZWxlY3RlZEtleXMgPSBbc2VsZWN0ZWRLZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEoJ3NlbGVjdGVkS2V5cycgaW4gcHJvcHMpKSB7XG4gICAgICAgICAgX3RoaXMuc3RvcmUuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2VsZWN0ZWRLZXlzOiBfc2VsZWN0ZWRLZXlzXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm9wcy5vblNlbGVjdChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHNlbGVjdEluZm8pLCB7fSwge1xuICAgICAgICAgIHNlbGVjdGVkS2V5czogX3NlbGVjdGVkS2V5c1xuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLm9uQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIG1vZGUgPSBfdGhpcy5nZXRSZWFsTWVudU1vZGUoKTtcblxuICAgICAgdmFyIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZTIgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSxcbiAgICAgICAgICBzdG9yZSA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZTIuc3RvcmUsXG4gICAgICAgICAgb25PcGVuQ2hhbmdlID0gX2Fzc2VydFRoaXNJbml0aWFsaXplMi5wcm9wcy5vbk9wZW5DaGFuZ2U7XG5cbiAgICAgIGlmIChtb2RlICE9PSAnaW5saW5lJyAmJiAhKCdvcGVuS2V5cycgaW4gX3RoaXMucHJvcHMpKSB7XG4gICAgICAgIC8vIGNsb3NpbmcgdmVydGljYWwgcG9wdXAgc3VibWVudSBhZnRlciBjbGljayBpdFxuICAgICAgICBzdG9yZS5zZXRTdGF0ZSh7XG4gICAgICAgICAgb3BlbktleXM6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBvbk9wZW5DaGFuZ2UoW10pO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy5wcm9wcy5vbkNsaWNrKGUpO1xuICAgIH07IC8vIG9uS2V5RG93biBuZWVkcyB0byBiZSBleHBvc2VkIGFzIGEgaW5zdGFuY2UgbWV0aG9kXG4gICAgLy8gZS5nLiwgaW4gcmMtc2VsZWN0LCB3ZSBuZWVkIHRvIG5hdmlnYXRlIG1lbnUgaXRlbSB3aGlsZVxuICAgIC8vIGN1cnJlbnQgYWN0aXZlIGl0ZW0gaXMgcmMtc2VsZWN0IGlucHV0IGJveCByYXRoZXIgdGhhbiB0aGUgbWVudSBpdHNlbGZcblxuXG4gICAgX3RoaXMub25LZXlEb3duID0gZnVuY3Rpb24gKGUsIGNhbGxiYWNrKSB7XG4gICAgICBfdGhpcy5pbm5lck1lbnUuZ2V0V3JhcHBlZEluc3RhbmNlKCkub25LZXlEb3duKGUsIGNhbGxiYWNrKTtcbiAgICB9O1xuXG4gICAgX3RoaXMub25PcGVuQ2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICB2YXIgX2Fzc2VydFRoaXNJbml0aWFsaXplMyA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLFxuICAgICAgICAgIHByb3BzID0gX2Fzc2VydFRoaXNJbml0aWFsaXplMy5wcm9wcztcblxuICAgICAgdmFyIG9wZW5LZXlzID0gX3RoaXMuc3RvcmUuZ2V0U3RhdGUoKS5vcGVuS2V5cy5jb25jYXQoKTtcblxuICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcblxuICAgICAgdmFyIHByb2Nlc3NTaW5nbGUgPSBmdW5jdGlvbiBwcm9jZXNzU2luZ2xlKGUpIHtcbiAgICAgICAgdmFyIG9uZUNoYW5nZWQgPSBmYWxzZTtcblxuICAgICAgICBpZiAoZS5vcGVuKSB7XG4gICAgICAgICAgb25lQ2hhbmdlZCA9IG9wZW5LZXlzLmluZGV4T2YoZS5rZXkpID09PSAtMTtcblxuICAgICAgICAgIGlmIChvbmVDaGFuZ2VkKSB7XG4gICAgICAgICAgICBvcGVuS2V5cy5wdXNoKGUua2V5KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGluZGV4ID0gb3BlbktleXMuaW5kZXhPZihlLmtleSk7XG4gICAgICAgICAgb25lQ2hhbmdlZCA9IGluZGV4ICE9PSAtMTtcblxuICAgICAgICAgIGlmIChvbmVDaGFuZ2VkKSB7XG4gICAgICAgICAgICBvcGVuS2V5cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNoYW5nZWQgPSBjaGFuZ2VkIHx8IG9uZUNoYW5nZWQ7XG4gICAgICB9O1xuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShldmVudCkpIHtcbiAgICAgICAgLy8gYmF0Y2ggY2hhbmdlIGNhbGxcbiAgICAgICAgZXZlbnQuZm9yRWFjaChwcm9jZXNzU2luZ2xlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2Nlc3NTaW5nbGUoZXZlbnQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICBpZiAoISgnb3BlbktleXMnIGluIF90aGlzLnByb3BzKSkge1xuICAgICAgICAgIF90aGlzLnN0b3JlLnNldFN0YXRlKHtcbiAgICAgICAgICAgIG9wZW5LZXlzOiBvcGVuS2V5c1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvcHMub25PcGVuQ2hhbmdlKG9wZW5LZXlzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3RoaXMub25EZXNlbGVjdCA9IGZ1bmN0aW9uIChzZWxlY3RJbmZvKSB7XG4gICAgICB2YXIgX2Fzc2VydFRoaXNJbml0aWFsaXplNCA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLFxuICAgICAgICAgIHByb3BzID0gX2Fzc2VydFRoaXNJbml0aWFsaXplNC5wcm9wcztcblxuICAgICAgaWYgKHByb3BzLnNlbGVjdGFibGUpIHtcbiAgICAgICAgdmFyIF9zZWxlY3RlZEtleXMyID0gX3RoaXMuc3RvcmUuZ2V0U3RhdGUoKS5zZWxlY3RlZEtleXMuY29uY2F0KCk7XG5cbiAgICAgICAgdmFyIHNlbGVjdGVkS2V5ID0gc2VsZWN0SW5mby5rZXk7XG5cbiAgICAgICAgdmFyIGluZGV4ID0gX3NlbGVjdGVkS2V5czIuaW5kZXhPZihzZWxlY3RlZEtleSk7XG5cbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIF9zZWxlY3RlZEtleXMyLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoISgnc2VsZWN0ZWRLZXlzJyBpbiBwcm9wcykpIHtcbiAgICAgICAgICBfdGhpcy5zdG9yZS5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzZWxlY3RlZEtleXM6IF9zZWxlY3RlZEtleXMyXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm9wcy5vbkRlc2VsZWN0KF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc2VsZWN0SW5mbyksIHt9LCB7XG4gICAgICAgICAgc2VsZWN0ZWRLZXlzOiBfc2VsZWN0ZWRLZXlzMlxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfTsgLy8gUmVzdG9yZSB2ZXJ0aWNhbCBtb2RlIHdoZW4gbWVudSBpcyBjb2xsYXBzZWQgcmVzcG9uc2l2ZWx5IHdoZW4gbW91bnRlZFxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbnQtZGVzaWduL2FudC1kZXNpZ24vaXNzdWVzLzEzMTA0XG4gICAgLy8gVE9ETzogbm90IGEgcGVyZmVjdCBzb2x1dGlvbixcbiAgICAvLyBsb29raW5nIGEgbmV3IHdheSB0byBhdm9pZCBzZXR0aW5nIHN3aXRjaGluZ01vZGVGcm9tSW5saW5lIGluIHRoaXMgc2l0dWF0aW9uXG5cblxuICAgIF90aGlzLm9uTW91c2VFbnRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5yZXN0b3JlTW9kZVZlcnRpY2FsRnJvbUlubGluZSgpO1xuXG4gICAgICB2YXIgb25Nb3VzZUVudGVyID0gX3RoaXMucHJvcHMub25Nb3VzZUVudGVyO1xuXG4gICAgICBpZiAob25Nb3VzZUVudGVyKSB7XG4gICAgICAgIG9uTW91c2VFbnRlcihlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3RoaXMub25UcmFuc2l0aW9uRW5kID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIC8vIHdoZW4gaW5saW5lQ29sbGFwc2VkIG1lbnUgd2lkdGggYW5pbWF0aW9uIGZpbmlzaGVkXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW50LWRlc2lnbi9hbnQtZGVzaWduL2lzc3Vlcy8xMjg2NFxuICAgICAgdmFyIHdpZHRoQ29sbGFwc2VkID0gZS5wcm9wZXJ0eU5hbWUgPT09ICd3aWR0aCcgJiYgZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldDsgLy8gRml4IFNWR0VsZW1lbnQgZS50YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YgaXMgbm90IGEgZnVuY3Rpb25cbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbnQtZGVzaWduL2FudC1kZXNpZ24vaXNzdWVzLzE1Njk5XG5cbiAgICAgIHZhciBjbGFzc05hbWUgPSBlLnRhcmdldC5jbGFzc05hbWU7IC8vIFNWR0FuaW1hdGVkU3RyaW5nLmFuaW1WYWwgc2hvdWxkIGJlIGlkZW50aWNhbCB0byBTVkdBbmltYXRlZFN0cmluZy5iYXNlVmFsLFxuICAgICAgLy8gdW5sZXNzIGR1cmluZyBhbiBhbmltYXRpb24uXG5cbiAgICAgIHZhciBjbGFzc05hbWVWYWx1ZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjbGFzc05hbWUpID09PSAnW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ10nID8gY2xhc3NOYW1lLmFuaW1WYWwgOiBjbGFzc05hbWU7IC8vIEZpeCBmb3IgPE1lbnUgc3R5bGU9e3sgd2lkdGg6ICcxMDAlJyB9fSAvPixcbiAgICAgIC8vIHRoZSB3aWR0aCB0cmFuc2l0aW9uIHdvbid0IHRyaWdnZXIgd2hlbiBtZW51IGlzIGNvbGxhcHNlZFxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FudC1kZXNpZ24vYW50LWRlc2lnbi1wcm8vaXNzdWVzLzI3ODNcblxuICAgICAgdmFyIGljb25TY2FsZWQgPSBlLnByb3BlcnR5TmFtZSA9PT0gJ2ZvbnQtc2l6ZScgJiYgY2xhc3NOYW1lVmFsdWUuaW5kZXhPZignYW50aWNvbicpID49IDA7XG5cbiAgICAgIGlmICh3aWR0aENvbGxhcHNlZCB8fCBpY29uU2NhbGVkKSB7XG4gICAgICAgIF90aGlzLnJlc3RvcmVNb2RlVmVydGljYWxGcm9tSW5saW5lKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLnNldElubmVyTWVudSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICBfdGhpcy5pbm5lck1lbnUgPSBub2RlO1xuICAgIH07XG5cbiAgICBfdGhpcy5pc1Jvb3RNZW51ID0gdHJ1ZTtcbiAgICB2YXIgc2VsZWN0ZWRLZXlzID0gcHJvcHMuZGVmYXVsdFNlbGVjdGVkS2V5cztcbiAgICB2YXIgb3BlbktleXMgPSBwcm9wcy5kZWZhdWx0T3BlbktleXM7XG5cbiAgICBpZiAoJ3NlbGVjdGVkS2V5cycgaW4gcHJvcHMpIHtcbiAgICAgIHNlbGVjdGVkS2V5cyA9IHByb3BzLnNlbGVjdGVkS2V5cyB8fCBbXTtcbiAgICB9XG5cbiAgICBpZiAoJ29wZW5LZXlzJyBpbiBwcm9wcykge1xuICAgICAgb3BlbktleXMgPSBwcm9wcy5vcGVuS2V5cyB8fCBbXTtcbiAgICB9XG5cbiAgICBfdGhpcy5zdG9yZSA9IGNyZWF0ZSh7XG4gICAgICBzZWxlY3RlZEtleXM6IHNlbGVjdGVkS2V5cyxcbiAgICAgIG9wZW5LZXlzOiBvcGVuS2V5cyxcbiAgICAgIGFjdGl2ZUtleToge1xuICAgICAgICAnMC1tZW51LSc6IGdldEFjdGl2ZUtleShwcm9wcywgcHJvcHMuYWN0aXZlS2V5KVxuICAgICAgfVxuICAgIH0pO1xuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgc3dpdGNoaW5nTW9kZUZyb21JbmxpbmU6IGZhbHNlLFxuICAgICAgcHJldlByb3BzOiBwcm9wcyxcbiAgICAgIGlubGluZU9wZW5LZXlzOiBbXSxcbiAgICAgIHN0b3JlOiBfdGhpcy5zdG9yZVxuICAgIH07XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKE1lbnUsIFt7XG4gICAga2V5OiBcImNvbXBvbmVudERpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdGhpcy51cGRhdGVNaW5pU3RvcmUoKTtcbiAgICAgIHRoaXMudXBkYXRlTWVudURpc3BsYXkoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkVXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgc2lkZXJDb2xsYXBzZWQgPSBfdGhpcyRwcm9wcy5zaWRlckNvbGxhcHNlZCxcbiAgICAgICAgICBpbmxpbmVDb2xsYXBzZWQgPSBfdGhpcyRwcm9wcy5pbmxpbmVDb2xsYXBzZWQsXG4gICAgICAgICAgb25PcGVuQ2hhbmdlID0gX3RoaXMkcHJvcHMub25PcGVuQ2hhbmdlO1xuXG4gICAgICBpZiAoIXByZXZQcm9wcy5pbmxpbmVDb2xsYXBzZWQgJiYgaW5saW5lQ29sbGFwc2VkIHx8ICFwcmV2UHJvcHMuc2lkZXJDb2xsYXBzZWQgJiYgc2lkZXJDb2xsYXBzZWQpIHtcbiAgICAgICAgb25PcGVuQ2hhbmdlKFtdKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy51cGRhdGVNaW5pU3RvcmUoKTtcbiAgICAgIHRoaXMudXBkYXRlTWVudURpc3BsYXkoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlTWVudURpc3BsYXlcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlTWVudURpc3BsYXkoKSB7XG4gICAgICB2YXIgY29sbGFwc2VkV2lkdGggPSB0aGlzLnByb3BzLmNvbGxhcHNlZFdpZHRoLFxuICAgICAgICAgIHN0b3JlID0gdGhpcy5zdG9yZSxcbiAgICAgICAgICBwcmV2T3BlbktleXMgPSB0aGlzLnByZXZPcGVuS2V5czsgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FudC1kZXNpZ24vYW50LWRlc2lnbi9pc3N1ZXMvODU4N1xuXG4gICAgICB2YXIgaGlkZU1lbnUgPSB0aGlzLmdldElubGluZUNvbGxhcHNlZCgpICYmIChjb2xsYXBzZWRXaWR0aCA9PT0gMCB8fCBjb2xsYXBzZWRXaWR0aCA9PT0gJzAnIHx8IGNvbGxhcHNlZFdpZHRoID09PSAnMHB4Jyk7XG5cbiAgICAgIGlmIChoaWRlTWVudSkge1xuICAgICAgICB0aGlzLnByZXZPcGVuS2V5cyA9IHN0b3JlLmdldFN0YXRlKCkub3BlbktleXMuY29uY2F0KCk7XG4gICAgICAgIHRoaXMuc3RvcmUuc2V0U3RhdGUoe1xuICAgICAgICAgIG9wZW5LZXlzOiBbXVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJldk9wZW5LZXlzKSB7XG4gICAgICAgIHRoaXMuc3RvcmUuc2V0U3RhdGUoe1xuICAgICAgICAgIG9wZW5LZXlzOiBwcmV2T3BlbktleXNcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJldk9wZW5LZXlzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0UmVhbE1lbnVNb2RlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJlYWxNZW51TW9kZSgpIHtcbiAgICAgIHZhciBtb2RlID0gdGhpcy5wcm9wcy5tb2RlO1xuICAgICAgdmFyIHN3aXRjaGluZ01vZGVGcm9tSW5saW5lID0gdGhpcy5zdGF0ZS5zd2l0Y2hpbmdNb2RlRnJvbUlubGluZTtcbiAgICAgIHZhciBpbmxpbmVDb2xsYXBzZWQgPSB0aGlzLmdldElubGluZUNvbGxhcHNlZCgpO1xuXG4gICAgICBpZiAoc3dpdGNoaW5nTW9kZUZyb21JbmxpbmUgJiYgaW5saW5lQ29sbGFwc2VkKSB7XG4gICAgICAgIHJldHVybiAnaW5saW5lJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGlubGluZUNvbGxhcHNlZCA/ICd2ZXJ0aWNhbCcgOiBtb2RlO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRJbmxpbmVDb2xsYXBzZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5saW5lQ29sbGFwc2VkKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzMiA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgaW5saW5lQ29sbGFwc2VkID0gX3RoaXMkcHJvcHMyLmlubGluZUNvbGxhcHNlZCxcbiAgICAgICAgICBzaWRlckNvbGxhcHNlZCA9IF90aGlzJHByb3BzMi5zaWRlckNvbGxhcHNlZDtcblxuICAgICAgaWYgKHNpZGVyQ29sbGFwc2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHNpZGVyQ29sbGFwc2VkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaW5saW5lQ29sbGFwc2VkO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZXN0b3JlTW9kZVZlcnRpY2FsRnJvbUlubGluZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXN0b3JlTW9kZVZlcnRpY2FsRnJvbUlubGluZSgpIHtcbiAgICAgIHZhciBzd2l0Y2hpbmdNb2RlRnJvbUlubGluZSA9IHRoaXMuc3RhdGUuc3dpdGNoaW5nTW9kZUZyb21JbmxpbmU7XG5cbiAgICAgIGlmIChzd2l0Y2hpbmdNb2RlRnJvbUlubGluZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBzd2l0Y2hpbmdNb2RlRnJvbUlubGluZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInVwZGF0ZU1pbmlTdG9yZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVNaW5pU3RvcmUoKSB7XG4gICAgICBpZiAoJ3NlbGVjdGVkS2V5cycgaW4gdGhpcy5wcm9wcykge1xuICAgICAgICB0aGlzLnN0b3JlLnNldFN0YXRlKHtcbiAgICAgICAgICBzZWxlY3RlZEtleXM6IHRoaXMucHJvcHMuc2VsZWN0ZWRLZXlzIHx8IFtdXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoJ29wZW5LZXlzJyBpbiB0aGlzLnByb3BzKSB7XG4gICAgICAgIHRoaXMuc3RvcmUuc2V0U3RhdGUoe1xuICAgICAgICAgIG9wZW5LZXlzOiB0aGlzLnByb3BzLm9wZW5LZXlzIHx8IFtdXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIHByb3BzID0gX29iamVjdFNwcmVhZCh7fSwgb21pdCh0aGlzLnByb3BzLCBbJ2NvbGxhcHNlZFdpZHRoJywgJ3NpZGVyQ29sbGFwc2VkJywgJ2RlZmF1bHRNb3Rpb25zJ10pKTtcblxuICAgICAgdmFyIG1vZGUgPSB0aGlzLmdldFJlYWxNZW51TW9kZSgpO1xuICAgICAgcHJvcHMuY2xhc3NOYW1lICs9IFwiIFwiLmNvbmNhdChwcm9wcy5wcmVmaXhDbHMsIFwiLXJvb3RcIik7XG5cbiAgICAgIGlmIChwcm9wcy5kaXJlY3Rpb24gPT09ICdydGwnKSB7XG4gICAgICAgIHByb3BzLmNsYXNzTmFtZSArPSBcIiBcIi5jb25jYXQocHJvcHMucHJlZml4Q2xzLCBcIi1ydGxcIik7XG4gICAgICB9XG5cbiAgICAgIHByb3BzID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcyksIHt9LCB7XG4gICAgICAgIG1vZGU6IG1vZGUsXG4gICAgICAgIG9uQ2xpY2s6IHRoaXMub25DbGljayxcbiAgICAgICAgb25PcGVuQ2hhbmdlOiB0aGlzLm9uT3BlbkNoYW5nZSxcbiAgICAgICAgb25EZXNlbGVjdDogdGhpcy5vbkRlc2VsZWN0LFxuICAgICAgICBvblNlbGVjdDogdGhpcy5vblNlbGVjdCxcbiAgICAgICAgb25Nb3VzZUVudGVyOiB0aGlzLm9uTW91c2VFbnRlcixcbiAgICAgICAgb25UcmFuc2l0aW9uRW5kOiB0aGlzLm9uVHJhbnNpdGlvbkVuZCxcbiAgICAgICAgcGFyZW50TWVudTogdGhpcyxcbiAgICAgICAgbW90aW9uOiBnZXRNb3Rpb24odGhpcy5wcm9wcywgdGhpcy5zdGF0ZSwgbW9kZSlcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlIHByb3BzLm9wZW5BbmltYXRpb247XG4gICAgICBkZWxldGUgcHJvcHMub3BlblRyYW5zaXRpb25OYW1lO1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFByb3ZpZGVyLCB7XG4gICAgICAgIHN0b3JlOiB0aGlzLnN0b3JlXG4gICAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdWJQb3B1cE1lbnUsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgICAgICByZWY6IHRoaXMuc2V0SW5uZXJNZW51XG4gICAgICB9KSwgdGhpcy5wcm9wcy5jaGlsZHJlbikpO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcImdldERlcml2ZWRTdGF0ZUZyb21Qcm9wc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgIHZhciBwcmV2UHJvcHMgPSBwcmV2U3RhdGUucHJldlByb3BzLFxuICAgICAgICAgIHN0b3JlID0gcHJldlN0YXRlLnN0b3JlO1xuICAgICAgdmFyIHByZXZTdG9yZVN0YXRlID0gc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAgIHZhciBuZXdTdG9yZVN0YXRlID0ge307XG4gICAgICB2YXIgbmV3U3RhdGUgPSB7XG4gICAgICAgIHByZXZQcm9wczogbmV4dFByb3BzXG4gICAgICB9O1xuXG4gICAgICBpZiAocHJldlByb3BzLm1vZGUgPT09ICdpbmxpbmUnICYmIG5leHRQcm9wcy5tb2RlICE9PSAnaW5saW5lJykge1xuICAgICAgICBuZXdTdGF0ZS5zd2l0Y2hpbmdNb2RlRnJvbUlubGluZSA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICgnb3BlbktleXMnIGluIG5leHRQcm9wcykge1xuICAgICAgICBuZXdTdG9yZVN0YXRlLm9wZW5LZXlzID0gbmV4dFByb3BzLm9wZW5LZXlzIHx8IFtdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gW0xlZ2FjeV0gT2xkIGNvZGUgd2lsbCByZXR1cm4gYWZ0ZXIgYG9wZW5LZXlzYCBjaGFuZ2VkLlxuICAgICAgICAvLyBOb3Qgc3VyZSB0aGUgcmVhc29uLCB3ZSBzaG91bGQga2VlcCB0aGlzIGxvZ2ljIHN0aWxsLlxuICAgICAgICBpZiAobmV4dFByb3BzLmlubGluZUNvbGxhcHNlZCAmJiAhcHJldlByb3BzLmlubGluZUNvbGxhcHNlZCB8fCBuZXh0UHJvcHMuc2lkZXJDb2xsYXBzZWQgJiYgIXByZXZQcm9wcy5zaWRlckNvbGxhcHNlZCkge1xuICAgICAgICAgIG5ld1N0YXRlLnN3aXRjaGluZ01vZGVGcm9tSW5saW5lID0gdHJ1ZTtcbiAgICAgICAgICBuZXdTdGF0ZS5pbmxpbmVPcGVuS2V5cyA9IHByZXZTdG9yZVN0YXRlLm9wZW5LZXlzO1xuICAgICAgICAgIG5ld1N0b3JlU3RhdGUub3BlbktleXMgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbmV4dFByb3BzLmlubGluZUNvbGxhcHNlZCAmJiBwcmV2UHJvcHMuaW5saW5lQ29sbGFwc2VkIHx8ICFuZXh0UHJvcHMuc2lkZXJDb2xsYXBzZWQgJiYgcHJldlByb3BzLnNpZGVyQ29sbGFwc2VkKSB7XG4gICAgICAgICAgbmV3U3RvcmVTdGF0ZS5vcGVuS2V5cyA9IHByZXZTdGF0ZS5pbmxpbmVPcGVuS2V5cztcbiAgICAgICAgICBuZXdTdGF0ZS5pbmxpbmVPcGVuS2V5cyA9IFtdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChPYmplY3Qua2V5cyhuZXdTdG9yZVN0YXRlKS5sZW5ndGgpIHtcbiAgICAgICAgc3RvcmUuc2V0U3RhdGUobmV3U3RvcmVTdGF0ZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTWVudTtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuTWVudS5kZWZhdWx0UHJvcHMgPSB7XG4gIHNlbGVjdGFibGU6IHRydWUsXG4gIG9uQ2xpY2s6IG5vb3AsXG4gIG9uU2VsZWN0OiBub29wLFxuICBvbk9wZW5DaGFuZ2U6IG5vb3AsXG4gIG9uRGVzZWxlY3Q6IG5vb3AsXG4gIGRlZmF1bHRTZWxlY3RlZEtleXM6IFtdLFxuICBkZWZhdWx0T3BlbktleXM6IFtdLFxuICBzdWJNZW51T3BlbkRlbGF5OiAwLjEsXG4gIHN1Yk1lbnVDbG9zZURlbGF5OiAwLjEsXG4gIHRyaWdnZXJTdWJNZW51QWN0aW9uOiAnaG92ZXInLFxuICBwcmVmaXhDbHM6ICdyYy1tZW51JyxcbiAgY2xhc3NOYW1lOiAnJyxcbiAgbW9kZTogJ3ZlcnRpY2FsJyxcbiAgc3R5bGU6IHt9LFxuICBidWlsdGluUGxhY2VtZW50czoge30sXG4gIG92ZXJmbG93ZWRJbmRpY2F0b3I6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCBudWxsLCBcIlxceEI3XFx4QjdcXHhCN1wiKVxufTtcbmV4cG9ydCBkZWZhdWx0IE1lbnU7IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrXCI7XG5pbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzc1wiO1xuaW1wb3J0IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2Fzc2VydFRoaXNJbml0aWFsaXplZFwiO1xuaW1wb3J0IF9pbmhlcml0cyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHNcIjtcbmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgS2V5Q29kZSBmcm9tIFwicmMtdXRpbC9lcy9LZXlDb2RlXCI7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBvbWl0IGZyb20gXCJyYy11dGlsL2VzL29taXRcIjtcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdtaW5pLXN0b3JlJztcbmltcG9ydCB7IG5vb3AsIG1lbnVBbGxQcm9wcyB9IGZyb20gJy4vdXRpbCc7XG5leHBvcnQgdmFyIE1lbnVJdGVtID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhNZW51SXRlbSwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihNZW51SXRlbSk7XG5cbiAgZnVuY3Rpb24gTWVudUl0ZW0oKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1lbnVJdGVtKTtcblxuICAgIF90aGlzID0gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICBfdGhpcy5vbktleURvd24gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIGtleUNvZGUgPSBlLmtleUNvZGU7XG5cbiAgICAgIGlmIChrZXlDb2RlID09PSBLZXlDb2RlLkVOVEVSKSB7XG4gICAgICAgIF90aGlzLm9uQ2xpY2soZSk7XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcblxuICAgIF90aGlzLm9uTW91c2VMZWF2ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICBldmVudEtleSA9IF90aGlzJHByb3BzLmV2ZW50S2V5LFxuICAgICAgICAgIG9uSXRlbUhvdmVyID0gX3RoaXMkcHJvcHMub25JdGVtSG92ZXIsXG4gICAgICAgICAgb25Nb3VzZUxlYXZlID0gX3RoaXMkcHJvcHMub25Nb3VzZUxlYXZlO1xuICAgICAgb25JdGVtSG92ZXIoe1xuICAgICAgICBrZXk6IGV2ZW50S2V5LFxuICAgICAgICBob3ZlcjogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgb25Nb3VzZUxlYXZlKHtcbiAgICAgICAga2V5OiBldmVudEtleSxcbiAgICAgICAgZG9tRXZlbnQ6IGVcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy5vbk1vdXNlRW50ZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIF90aGlzJHByb3BzMiA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIGV2ZW50S2V5ID0gX3RoaXMkcHJvcHMyLmV2ZW50S2V5LFxuICAgICAgICAgIG9uSXRlbUhvdmVyID0gX3RoaXMkcHJvcHMyLm9uSXRlbUhvdmVyLFxuICAgICAgICAgIG9uTW91c2VFbnRlciA9IF90aGlzJHByb3BzMi5vbk1vdXNlRW50ZXI7XG4gICAgICBvbkl0ZW1Ib3Zlcih7XG4gICAgICAgIGtleTogZXZlbnRLZXksXG4gICAgICAgIGhvdmVyOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIG9uTW91c2VFbnRlcih7XG4gICAgICAgIGtleTogZXZlbnRLZXksXG4gICAgICAgIGRvbUV2ZW50OiBlXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3RoaXMub25DbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMzID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgZXZlbnRLZXkgPSBfdGhpcyRwcm9wczMuZXZlbnRLZXksXG4gICAgICAgICAgbXVsdGlwbGUgPSBfdGhpcyRwcm9wczMubXVsdGlwbGUsXG4gICAgICAgICAgb25DbGljayA9IF90aGlzJHByb3BzMy5vbkNsaWNrLFxuICAgICAgICAgIG9uU2VsZWN0ID0gX3RoaXMkcHJvcHMzLm9uU2VsZWN0LFxuICAgICAgICAgIG9uRGVzZWxlY3QgPSBfdGhpcyRwcm9wczMub25EZXNlbGVjdCxcbiAgICAgICAgICBpc1NlbGVjdGVkID0gX3RoaXMkcHJvcHMzLmlzU2VsZWN0ZWQ7XG4gICAgICB2YXIgaW5mbyA9IHtcbiAgICAgICAga2V5OiBldmVudEtleSxcbiAgICAgICAga2V5UGF0aDogW2V2ZW50S2V5XSxcbiAgICAgICAgaXRlbTogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksXG4gICAgICAgIGRvbUV2ZW50OiBlXG4gICAgICB9O1xuICAgICAgb25DbGljayhpbmZvKTtcblxuICAgICAgaWYgKG11bHRpcGxlKSB7XG4gICAgICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgb25EZXNlbGVjdChpbmZvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvblNlbGVjdChpbmZvKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghaXNTZWxlY3RlZCkge1xuICAgICAgICBvblNlbGVjdChpbmZvKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3RoaXMuc2F2ZU5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgX3RoaXMubm9kZSA9IG5vZGU7XG4gICAgfTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhNZW51SXRlbSwgW3tcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkTW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAvLyBpbnZva2UgY3VzdG9taXplZCByZWYgdG8gZXhwb3NlIGNvbXBvbmVudCB0byBtaXhpblxuICAgICAgdGhpcy5jYWxsUmVmKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudERpZFVwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICB0aGlzLmNhbGxSZWYoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzO1xuXG4gICAgICBpZiAocHJvcHMub25EZXN0cm95KSB7XG4gICAgICAgIHByb3BzLm9uRGVzdHJveShwcm9wcy5ldmVudEtleSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFByZWZpeENsc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQcmVmaXhDbHMoKSB7XG4gICAgICByZXR1cm4gXCJcIi5jb25jYXQodGhpcy5wcm9wcy5yb290UHJlZml4Q2xzLCBcIi1pdGVtXCIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRBY3RpdmVDbGFzc05hbWVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QWN0aXZlQ2xhc3NOYW1lKCkge1xuICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KHRoaXMuZ2V0UHJlZml4Q2xzKCksIFwiLWFjdGl2ZVwiKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0U2VsZWN0ZWRDbGFzc05hbWVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2VsZWN0ZWRDbGFzc05hbWUoKSB7XG4gICAgICByZXR1cm4gXCJcIi5jb25jYXQodGhpcy5nZXRQcmVmaXhDbHMoKSwgXCItc2VsZWN0ZWRcIik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldERpc2FibGVkQ2xhc3NOYW1lXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldERpc2FibGVkQ2xhc3NOYW1lKCkge1xuICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KHRoaXMuZ2V0UHJlZml4Q2xzKCksIFwiLWRpc2FibGVkXCIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjYWxsUmVmXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNhbGxSZWYoKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5tYW51YWxSZWYpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5tYW51YWxSZWYodGhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX2NsYXNzTmFtZXM7XG5cbiAgICAgIHZhciBwcm9wcyA9IF9vYmplY3RTcHJlYWQoe30sIHRoaXMucHJvcHMpO1xuXG4gICAgICB2YXIgY2xhc3NOYW1lID0gY2xhc3NOYW1lcyh0aGlzLmdldFByZWZpeENscygpLCBwcm9wcy5jbGFzc05hbWUsIChfY2xhc3NOYW1lcyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIHRoaXMuZ2V0QWN0aXZlQ2xhc3NOYW1lKCksICFwcm9wcy5kaXNhYmxlZCAmJiBwcm9wcy5hY3RpdmUpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIHRoaXMuZ2V0U2VsZWN0ZWRDbGFzc05hbWUoKSwgcHJvcHMuaXNTZWxlY3RlZCksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgdGhpcy5nZXREaXNhYmxlZENsYXNzTmFtZSgpLCBwcm9wcy5kaXNhYmxlZCksIF9jbGFzc05hbWVzKSk7XG5cbiAgICAgIHZhciBhdHRycyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcHJvcHMuYXR0cmlidXRlKSwge30sIHtcbiAgICAgICAgdGl0bGU6IHR5cGVvZiBwcm9wcy50aXRsZSA9PT0gJ3N0cmluZycgPyBwcm9wcy50aXRsZSA6IHVuZGVmaW5lZCxcbiAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgIC8vIHNldCB0byBtZW51aXRlbSBieSBkZWZhdWx0XG4gICAgICAgIHJvbGU6IHByb3BzLnJvbGUgfHwgJ21lbnVpdGVtJyxcbiAgICAgICAgJ2FyaWEtZGlzYWJsZWQnOiBwcm9wcy5kaXNhYmxlZFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChwcm9wcy5yb2xlID09PSAnb3B0aW9uJykge1xuICAgICAgICAvLyBvdmVyd3JpdGUgdG8gb3B0aW9uXG4gICAgICAgIGF0dHJzID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBhdHRycyksIHt9LCB7XG4gICAgICAgICAgcm9sZTogJ29wdGlvbicsXG4gICAgICAgICAgJ2FyaWEtc2VsZWN0ZWQnOiBwcm9wcy5pc1NlbGVjdGVkXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChwcm9wcy5yb2xlID09PSBudWxsIHx8IHByb3BzLnJvbGUgPT09ICdub25lJykge1xuICAgICAgICAvLyBzb21ldGltZXMgd2Ugd2FudCB0byBzcGVjaWZ5IHJvbGUgaW5zaWRlIDxsaS8+IGVsZW1lbnRcbiAgICAgICAgLy8gPGxpPjxhIHJvbGU9J21lbnVpdGVtJz5MaW5rPC9hPjwvbGk+IHdvdWxkIGJlIGEgZ29vZCBleGFtcGxlXG4gICAgICAgIC8vIGluIHRoaXMgY2FzZSB0aGUgcm9sZSBvbiA8bGkvPiBzaG91bGQgYmUgXCJub25lXCIgdG9cbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBpbXBsaWVkIGxpc3RpdGVtIHJvbGUuXG4gICAgICAgIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS1wcmFjdGljZXMtMS4xL2V4YW1wbGVzL21lbnViYXIvbWVudWJhci0xL21lbnViYXItMS5odG1sXG4gICAgICAgIGF0dHJzLnJvbGUgPSAnbm9uZSc7XG4gICAgICB9IC8vIEluIGNhc2UgdGhhdCBvbkNsaWNrL29uTW91c2VMZWF2ZS9vbk1vdXNlRW50ZXIgaXMgcGFzc2VkIGRvd24gZnJvbSBvd25lclxuXG5cbiAgICAgIHZhciBtb3VzZUV2ZW50ID0ge1xuICAgICAgICBvbkNsaWNrOiBwcm9wcy5kaXNhYmxlZCA/IG51bGwgOiB0aGlzLm9uQ2xpY2ssXG4gICAgICAgIG9uTW91c2VMZWF2ZTogcHJvcHMuZGlzYWJsZWQgPyBudWxsIDogdGhpcy5vbk1vdXNlTGVhdmUsXG4gICAgICAgIG9uTW91c2VFbnRlcjogcHJvcHMuZGlzYWJsZWQgPyBudWxsIDogdGhpcy5vbk1vdXNlRW50ZXJcbiAgICAgIH07XG5cbiAgICAgIHZhciBzdHlsZSA9IF9vYmplY3RTcHJlYWQoe30sIHByb3BzLnN0eWxlKTtcblxuICAgICAgaWYgKHByb3BzLm1vZGUgPT09ICdpbmxpbmUnKSB7XG4gICAgICAgIGlmIChwcm9wcy5kaXJlY3Rpb24gPT09ICdydGwnKSB7XG4gICAgICAgICAgc3R5bGUucGFkZGluZ1JpZ2h0ID0gcHJvcHMuaW5saW5lSW5kZW50ICogcHJvcHMubGV2ZWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3R5bGUucGFkZGluZ0xlZnQgPSBwcm9wcy5pbmxpbmVJbmRlbnQgKiBwcm9wcy5sZXZlbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW51QWxsUHJvcHMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBkZWxldGUgcHJvcHNba2V5XTtcbiAgICAgIH0pO1xuICAgICAgZGVsZXRlIHByb3BzLmRpcmVjdGlvbjtcbiAgICAgIHZhciBpY29uID0gdGhpcy5wcm9wcy5pdGVtSWNvbjtcblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb3BzLml0ZW1JY29uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIFRPRE86IFRoaXMgaXMgYSBidWcgd2hpY2ggc2hvdWxkIGZpeGVkIGFmdGVyIFRTIHJlZmFjdG9yXG4gICAgICAgIGljb24gPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCh0aGlzLnByb3BzLml0ZW1JY29uLCB0aGlzLnByb3BzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwibGlcIiwgX2V4dGVuZHMoe30sIG9taXQocHJvcHMsIFsnb25DbGljaycsICdvbk1vdXNlRW50ZXInLCAnb25Nb3VzZUxlYXZlJywgJ29uU2VsZWN0J10pLCBhdHRycywgbW91c2VFdmVudCwge1xuICAgICAgICBzdHlsZTogc3R5bGUsXG4gICAgICAgIHJlZjogdGhpcy5zYXZlTm9kZVxuICAgICAgfSksIHByb3BzLmNoaWxkcmVuLCBpY29uKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTWVudUl0ZW07XG59KFJlYWN0LkNvbXBvbmVudCk7XG5NZW51SXRlbS5pc01lbnVJdGVtID0gdHJ1ZTtcbk1lbnVJdGVtLmRlZmF1bHRQcm9wcyA9IHtcbiAgb25TZWxlY3Q6IG5vb3AsXG4gIG9uTW91c2VFbnRlcjogbm9vcCxcbiAgb25Nb3VzZUxlYXZlOiBub29wLFxuICBtYW51YWxSZWY6IG5vb3Bcbn07XG52YXIgY29ubmVjdGVkID0gY29ubmVjdChmdW5jdGlvbiAoX3JlZiwgX3JlZjIpIHtcbiAgdmFyIGFjdGl2ZUtleSA9IF9yZWYuYWN0aXZlS2V5LFxuICAgICAgc2VsZWN0ZWRLZXlzID0gX3JlZi5zZWxlY3RlZEtleXM7XG4gIHZhciBldmVudEtleSA9IF9yZWYyLmV2ZW50S2V5LFxuICAgICAgc3ViTWVudUtleSA9IF9yZWYyLnN1Yk1lbnVLZXk7XG4gIHJldHVybiB7XG4gICAgYWN0aXZlOiBhY3RpdmVLZXlbc3ViTWVudUtleV0gPT09IGV2ZW50S2V5LFxuICAgIC8vIHNlbGVjdGVkS2V5cyBzaG91bGQgYmUgYXJyYXkgaW4gYW55IGNpcmN1bXN0YW5jZVxuICAgIC8vIHdoZW4gaXQgaXMgbm90LCB3ZSBoYXZlIGZhbGxiYWNrIGxvZ2ljIGZvciBodHRwczovL2dpdGh1Yi5jb20vYW50LWRlc2lnbi9hbnQtZGVzaWduL2lzc3Vlcy8yOTQzMFxuICAgIGlzU2VsZWN0ZWQ6IEFycmF5LmlzQXJyYXkoc2VsZWN0ZWRLZXlzKSA/IHNlbGVjdGVkS2V5cy5pbmRleE9mKGV2ZW50S2V5KSAhPT0gLTEgOiBzZWxlY3RlZEtleXMgPT09IGV2ZW50S2V5XG4gIH07XG59KShNZW51SXRlbSk7XG5leHBvcnQgZGVmYXVsdCBjb25uZWN0ZWQ7IiwiZXhwb3J0IGNsYXNzIERyYWdTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoZXZlbnQsIGNvbXBvbmVudCwgaW5pdCA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMucGFnZVggPSAwO1xuICAgICAgICB0aGlzLnBhZ2VZID0gMDtcbiAgICAgICAgdGhpcy5jbGllbnRYID0gMDtcbiAgICAgICAgdGhpcy5jbGllbnRZID0gMDtcbiAgICAgICAgdGhpcy5keCA9IDA7XG4gICAgICAgIHRoaXMuZHkgPSAwO1xuICAgICAgICB0aGlzLmV2ZW50ID0gZXZlbnQ7XG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gY29tcG9uZW50O1xuICAgICAgICB0aGlzLl9pbml0ID0gaW5pdDtcbiAgICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQudHlwZS5zdGFydHNXaXRoKCd0b3VjaCcpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRvdWNoO1xuICAgICAgICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAndG91Y2hlbmQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvdWNoID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b3VjaCA9IGV2ZW50LnRvdWNoZXNbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGFnZVggPSB0b3VjaC5wYWdlWDtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VZID0gdG91Y2gucGFnZVk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGllbnRYID0gdG91Y2guY2xpZW50WDtcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudFkgPSB0b3VjaC5jbGllbnRZO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoJ3BhZ2VYJyBpbiBldmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFnZVggPSBldmVudC5wYWdlWDtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VZID0gZXZlbnQucGFnZVk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGllbnRYID0gZXZlbnQuY2xpZW50WDtcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudFkgPSBldmVudC5jbGllbnRZO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5keCA9ICh0aGlzLnBhZ2VYIC0gY29tcG9uZW50LmJhc2VYKSAqIGNvbXBvbmVudC5zY2FsZVg7XG4gICAgICAgICAgICB0aGlzLmR5ID0gKHRoaXMucGFnZVkgLSBjb21wb25lbnQuYmFzZVkpICogY29tcG9uZW50LnNjYWxlWTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtb3ZlZCgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguYWJzKHRoaXMuZHgpID49IDEgfHwgTWF0aC5hYnModGhpcy5keSkgPj0gMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHJlZkVsZW1lbnQsIHRoZSBlbGVtZW50IGJlaW5nIG1vdmVkXG4gICAgICogQHBhcmFtIGRyYWdnaW5nSHRtbCwgdGhlIGVsZW1lbnQgc2hvdyBpbiB0aGUgZHJhZ2dpbmcgbGF5ZXJcbiAgICAgKi9cbiAgICBzdGFydERyYWcocmVmRWxlbWVudCwgZHJhZ2dpbmdIdG1sKSB7XG4gICAgICAgIGlmICghdGhpcy5faW5pdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdGFydERyYWcgY2FuIG9ubHkgYmUgdXNlZCBpbiBvbkRyYWdTdGFydCBjYWxsYmFjaycpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWZFbGVtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlZkVsZW1lbnQgPSB0aGlzLmNvbXBvbmVudC5lbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIGNyZWF0ZURyYWdnaW5nRWxlbWVudCh0aGlzLCByZWZFbGVtZW50LCBkcmFnZ2luZ0h0bWwpO1xuICAgICAgICB0aGlzLmNvbXBvbmVudC5vd25lckRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnZG9jay1kcmFnZ2luZycpO1xuICAgIH1cbiAgICBzZXREYXRhKGRhdGEsIHNjb3BlKSB7XG4gICAgICAgIGlmICghdGhpcy5faW5pdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzZXREYXRhIGNhbiBvbmx5IGJlIHVzZWQgaW4gb25EcmFnU3RhcnQgY2FsbGJhY2snKTtcbiAgICAgICAgfVxuICAgICAgICBfZGF0YVNjb3BlID0gc2NvcGU7XG4gICAgICAgIF9kYXRhID0gZGF0YTtcbiAgICB9XG4gICAgc3RhdGljIGdldERhdGEoZmllbGQsIHNjb3BlKSB7XG4gICAgICAgIGlmIChzY29wZSA9PT0gX2RhdGFTY29wZSAmJiBfZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIF9kYXRhW2ZpZWxkXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZ2V0IGRyYWdUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQuZHJhZ1R5cGU7XG4gICAgfVxuICAgIGFjY2VwdChtZXNzYWdlID0gJycpIHtcbiAgICAgICAgdGhpcy5hY2NlcHRNZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5yZWplY3RlZCA9IGZhbHNlO1xuICAgIH1cbiAgICByZWplY3QoKSB7XG4gICAgICAgIHRoaXMucmVqZWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgICBfb25Nb3ZlKCkge1xuICAgICAgICBpZiAoX2RhdGEpIHtcbiAgICAgICAgICAgIGxldCBvd25lckRvY3VtZW50ID0gdGhpcy5jb21wb25lbnQub3duZXJEb2N1bWVudDtcbiAgICAgICAgICAgIGxldCBzZWFyY2hFbGVtZW50ID0gb3duZXJEb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHRoaXMuY2xpZW50WCwgdGhpcy5jbGllbnRZKTtcbiAgICAgICAgICAgIGxldCBkcm9wcGluZ0hhbmRsZXJzO1xuICAgICAgICAgICAgd2hpbGUgKHNlYXJjaEVsZW1lbnQgJiYgc2VhcmNoRWxlbWVudCAhPT0gb3duZXJEb2N1bWVudC5ib2R5KSB7XG4gICAgICAgICAgICAgICAgaWYgKF9kcmFnTGlzdGVuZXJzLmhhcyhzZWFyY2hFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaGFuZGxlcnMgPSBfZHJhZ0xpc3RlbmVycy5nZXQoc2VhcmNoRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVycy5vbkRyYWdPdmVyVCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcnMub25EcmFnT3ZlclQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hY2NlcHRNZXNzYWdlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wcGluZ0hhbmRsZXJzID0gaGFuZGxlcnM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2VhcmNoRWxlbWVudCA9IHNlYXJjaEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldERyb3BwaW5nSGFuZGxlcihkcm9wcGluZ0hhbmRsZXJzLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBtb3ZlRHJhZ2dpbmdFbGVtZW50KHRoaXMpO1xuICAgIH1cbiAgICBfb25EcmFnRW5kKGNhbmNlbGVkID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKF9kcm9wcGluZ0hhbmRsZXJzICYmIF9kcm9wcGluZ0hhbmRsZXJzLm9uRHJvcFQgJiYgIWNhbmNlbGVkKSB7XG4gICAgICAgICAgICBfZHJvcHBpbmdIYW5kbGVycy5vbkRyb3BUKHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50LmRyYWdUeXBlID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgLy8gcHJldmVudCB0aGUgbmV4dCBtZW51IGV2ZW50IGlmIGRyb3AgaGFuZGxlciBpcyBjYWxsZWQgb24gcmlnaHQgbW91c2UgYnV0dG9uXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQub3duZXJEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIHByZXZlbnREZWZhdWx0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIHByZXZlbnREZWZhdWx0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkZXN0cm95RHJhZ2dpbmdFbGVtZW50KHRoaXMpO1xuICAgICAgICB0aGlzLmNvbXBvbmVudC5vd25lckRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZG9jay1kcmFnZ2luZycpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbn1cbmxldCBfZGF0YVNjb3BlO1xubGV0IF9kYXRhO1xubGV0IF9kcmFnZ2luZ1N0YXRlO1xuLy8gYXBwbHlpbmcgZHJhZ2dpbmcgc3R5bGVcbmxldCBfcmVmRWxlbWVudDtcbmxldCBfZHJvcHBpbmdIYW5kbGVycztcbmZ1bmN0aW9uIHNldERyb3BwaW5nSGFuZGxlcihoYW5kbGVycywgc3RhdGUpIHtcbiAgICBpZiAoX2Ryb3BwaW5nSGFuZGxlcnMgPT09IGhhbmRsZXJzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKF9kcm9wcGluZ0hhbmRsZXJzICYmIF9kcm9wcGluZ0hhbmRsZXJzLm9uRHJhZ0xlYXZlVCkge1xuICAgICAgICBfZHJvcHBpbmdIYW5kbGVycy5vbkRyYWdMZWF2ZVQoc3RhdGUpO1xuICAgIH1cbiAgICBfZHJvcHBpbmdIYW5kbGVycyA9IGhhbmRsZXJzO1xufVxubGV0IF9kcmFnTGlzdGVuZXJzID0gbmV3IFdlYWtNYXAoKTtcbmV4cG9ydCBmdW5jdGlvbiBpc0RyYWdnaW5nKCkge1xuICAgIHJldHVybiBfZHJhZ2dpbmdTdGF0ZSAhPSBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFkZEhhbmRsZXJzKGVsZW1lbnQsIGhhbmRsZXJzKSB7XG4gICAgX2RyYWdMaXN0ZW5lcnMuc2V0KGVsZW1lbnQsIGhhbmRsZXJzKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVIYW5kbGVycyhlbGVtZW50KSB7XG4gICAgbGV0IGhhbmRsZXJzID0gX2RyYWdMaXN0ZW5lcnMuZ2V0KGVsZW1lbnQpO1xuICAgIGlmIChoYW5kbGVycyA9PT0gX2Ryb3BwaW5nSGFuZGxlcnMpIHtcbiAgICAgICAgX2Ryb3BwaW5nSGFuZGxlcnMgPSBudWxsO1xuICAgIH1cbiAgICBfZHJhZ0xpc3RlbmVycy5kZWxldGUoZWxlbWVudCk7XG59XG5sZXQgX2RyYWdnaW5nRGl2O1xubGV0IF9kcmFnZ2luZ0ljb247XG5mdW5jdGlvbiBfY3JlYXRlRHJhZ2dpbmdEaXYoZG9jKSB7XG4gICAgX2RyYWdnaW5nRGl2ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIF9kcmFnZ2luZ0ljb24gPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgX2RyYWdnaW5nRGl2LmNsYXNzTmFtZSA9ICdkcmFnZ2luZy1sYXllcic7XG4gICAgX2RyYWdnaW5nRGl2LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTsgLy8gcGxhY2UgaG9sZGVyIGZvciBkcmFnZ2luZyBlbGVtZW50XG4gICAgX2RyYWdnaW5nRGl2LmFwcGVuZENoaWxkKF9kcmFnZ2luZ0ljb24pO1xufVxuZnVuY3Rpb24gY3JlYXRlRHJhZ2dpbmdFbGVtZW50KHN0YXRlLCByZWZFbGVtZW50LCBkcmFnZ2luZ0h0bWwpIHtcbiAgICBfZHJhZ2dpbmdTdGF0ZSA9IHN0YXRlO1xuICAgIGlmIChyZWZFbGVtZW50KSB7XG4gICAgICAgIHJlZkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZHJhZ2dpbmcnKTtcbiAgICAgICAgX3JlZkVsZW1lbnQgPSByZWZFbGVtZW50O1xuICAgIH1cbiAgICBfY3JlYXRlRHJhZ2dpbmdEaXYoc3RhdGUuY29tcG9uZW50Lm93bmVyRG9jdW1lbnQpO1xuICAgIHN0YXRlLmNvbXBvbmVudC5vd25lckRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoX2RyYWdnaW5nRGl2KTtcbiAgICBsZXQgZHJhZ2dpbmdXaWR0aCA9IDA7XG4gICAgbGV0IGRyYWdnaW5nSGVpZ2h0ID0gMDtcbiAgICBpZiAoZHJhZ2dpbmdIdG1sID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZHJhZ2dpbmdIdG1sID0gc3RhdGUuY29tcG9uZW50LmVsZW1lbnQ7XG4gICAgfVxuICAgIGlmIChkcmFnZ2luZ0h0bWwgJiYgJ291dGVySFRNTCcgaW4gZHJhZ2dpbmdIdG1sKSB7XG4gICAgICAgIGRyYWdnaW5nV2lkdGggPSBkcmFnZ2luZ0h0bWwub2Zmc2V0V2lkdGg7XG4gICAgICAgIGRyYWdnaW5nSGVpZ2h0ID0gZHJhZ2dpbmdIdG1sLm9mZnNldEhlaWdodDtcbiAgICAgICAgZHJhZ2dpbmdIdG1sID0gZHJhZ2dpbmdIdG1sLm91dGVySFRNTDtcbiAgICB9XG4gICAgaWYgKGRyYWdnaW5nSHRtbCkge1xuICAgICAgICBfZHJhZ2dpbmdEaXYuZmlyc3RFbGVtZW50Q2hpbGQub3V0ZXJIVE1MID0gZHJhZ2dpbmdIdG1sO1xuICAgICAgICBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUoX2RyYWdnaW5nRGl2LmZpcnN0RWxlbWVudENoaWxkKS5iYWNrZ3JvdW5kQ29sb3IgPT09ICdyZ2JhKDAsIDAsIDAsIDApJykge1xuICAgICAgICAgICAgX2RyYWdnaW5nRGl2LmZpcnN0RWxlbWVudENoaWxkLnN0eWxlLmJhY2tncm91bmRDb2xvclxuICAgICAgICAgICAgICAgID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoX2RyYWdnaW5nRGl2KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWRlZmF1bHQtYmFja2dyb3VuZC1jb2xvcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkcmFnZ2luZ1dpZHRoKSB7XG4gICAgICAgICAgICBpZiAoZHJhZ2dpbmdXaWR0aCA+IDQwMClcbiAgICAgICAgICAgICAgICBkcmFnZ2luZ1dpZHRoID0gNDAwO1xuICAgICAgICAgICAgX2RyYWdnaW5nRGl2LmZpcnN0RWxlbWVudENoaWxkLnN0eWxlLndpZHRoID0gYCR7ZHJhZ2dpbmdXaWR0aH1weGA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRyYWdnaW5nSGVpZ2h0KSB7XG4gICAgICAgICAgICBpZiAoZHJhZ2dpbmdIZWlnaHQgPiAzMDApXG4gICAgICAgICAgICAgICAgZHJhZ2dpbmdIZWlnaHQgPSAzMDA7XG4gICAgICAgICAgICBfZHJhZ2dpbmdEaXYuZmlyc3RFbGVtZW50Q2hpbGQuc3R5bGUuaGVpZ2h0ID0gYCR7ZHJhZ2dpbmdIZWlnaHR9cHhgO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGNhbGxiYWNrIG9mIF9kcmFnU3RhdGVMaXN0ZW5lcikge1xuICAgICAgICBpZiAoX2RhdGFTY29wZSkge1xuICAgICAgICAgICAgY2FsbGJhY2soX2RhdGFTY29wZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjYWxsYmFjayh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIG1vdmVEcmFnZ2luZ0VsZW1lbnQoc3RhdGUpIHtcbiAgICBfZHJhZ2dpbmdEaXYuc3R5bGUubGVmdCA9IGAke3N0YXRlLnBhZ2VYfXB4YDtcbiAgICBfZHJhZ2dpbmdEaXYuc3R5bGUudG9wID0gYCR7c3RhdGUucGFnZVl9cHhgO1xuICAgIGlmIChzdGF0ZS5yZWplY3RlZCkge1xuICAgICAgICBfZHJhZ2dpbmdJY29uLmNsYXNzTmFtZSA9ICdkcmFnLWFjY2VwdC1yZWplY3QnO1xuICAgIH1cbiAgICBlbHNlIGlmIChzdGF0ZS5hY2NlcHRNZXNzYWdlKSB7XG4gICAgICAgIF9kcmFnZ2luZ0ljb24uY2xhc3NOYW1lID0gc3RhdGUuYWNjZXB0TWVzc2FnZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIF9kcmFnZ2luZ0ljb24uY2xhc3NOYW1lID0gJyc7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGRlc3Ryb3lEcmFnZ2luZ0VsZW1lbnQoZSkge1xuICAgIGlmIChfcmVmRWxlbWVudCkge1xuICAgICAgICBfcmVmRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnZ2luZycpO1xuICAgICAgICBfcmVmRWxlbWVudCA9IG51bGw7XG4gICAgfVxuICAgIGlmIChfZHJhZ2dpbmdEaXYpIHtcbiAgICAgICAgX2RyYWdnaW5nRGl2LnJlbW92ZSgpO1xuICAgICAgICBfZHJhZ2dpbmdEaXYgPSBudWxsO1xuICAgIH1cbiAgICBfZHJhZ2dpbmdTdGF0ZSA9IG51bGw7XG4gICAgc2V0RHJvcHBpbmdIYW5kbGVyKG51bGwsIGUpO1xuICAgIF9kYXRhU2NvcGUgPSBudWxsO1xuICAgIF9kYXRhID0gbnVsbDtcbiAgICBmb3IgKGxldCBjYWxsYmFjayBvZiBfZHJhZ1N0YXRlTGlzdGVuZXIpIHtcbiAgICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgfVxufVxubGV0IF9kcmFnU3RhdGVMaXN0ZW5lciA9IG5ldyBTZXQoKTtcbmV4cG9ydCBmdW5jdGlvbiBhZGREcmFnU3RhdGVMaXN0ZW5lcihjYWxsYmFjaykge1xuICAgIF9kcmFnU3RhdGVMaXN0ZW5lci5hZGQoY2FsbGJhY2spO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZURyYWdTdGF0ZUxpc3RlbmVyKGNhbGxiYWNrKSB7XG4gICAgX2RyYWdTdGF0ZUxpc3RlbmVyLmRlbGV0ZShjYWxsYmFjayk7XG59XG4vLyB3b3JrIGFyb3VuZCBmb3IgZHJhZyBzY3JvbGwgaXNzdWUgb24gSU9TXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lm5hdmlnYXRvciAmJiB3aW5kb3cubmF2aWdhdG9yLnBsYXRmb3JtICYmIC9pUChhZHxob25lfG9kKS8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnBsYXRmb3JtKSkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIChlKSA9PiB7XG4gICAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoID09PSAxICYmIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdkb2NrLWRyYWdnaW5nJykpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH0sIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG59XG4iLCJleHBvcnQgY2xhc3MgR2VzdHVyZVN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcihldmVudCwgY29tcG9uZW50LCBpbml0ID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5keDEgPSAwO1xuICAgICAgICB0aGlzLmR5MSA9IDA7XG4gICAgICAgIHRoaXMuZHgyID0gMDtcbiAgICAgICAgdGhpcy5keTIgPSAwO1xuICAgICAgICB0aGlzLnNjYWxlID0gMTtcbiAgICAgICAgdGhpcy5yb3RhdGUgPSAwO1xuICAgICAgICB0aGlzLmR4ID0gMDtcbiAgICAgICAgdGhpcy5keSA9IDA7XG4gICAgICAgIHRoaXMuZXZlbnQgPSBldmVudDtcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XG4gICAgICAgIHRoaXMuX2luaXQgPSBpbml0O1xuICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC50b3VjaGVzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgIGxldCB0b3VjaDEgPSBldmVudC50b3VjaGVzWzBdO1xuICAgICAgICAgICAgICAgIGxldCB0b3VjaDIgPSBldmVudC50b3VjaGVzWzFdO1xuICAgICAgICAgICAgICAgIHRoaXMuZHgxID0gKHRvdWNoMS5wYWdlWCAtIGNvbXBvbmVudC5iYXNlWCkgKiBjb21wb25lbnQuc2NhbGVYO1xuICAgICAgICAgICAgICAgIHRoaXMuZHkxID0gKHRvdWNoMS5wYWdlWSAtIGNvbXBvbmVudC5iYXNlWSkgKiBjb21wb25lbnQuc2NhbGVZO1xuICAgICAgICAgICAgICAgIHRoaXMuZHgyID0gKHRvdWNoMi5wYWdlWCAtIGNvbXBvbmVudC5iYXNlWDIpICogY29tcG9uZW50LnNjYWxlWDtcbiAgICAgICAgICAgICAgICB0aGlzLmR5MiA9ICh0b3VjaDIucGFnZVkgLSBjb21wb25lbnQuYmFzZVkyKSAqIGNvbXBvbmVudC5zY2FsZVk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZHgxICogdGhpcy5keDIgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmR4ID0gKHRoaXMuZHgxICsgdGhpcy5keDIpIC8gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZHkxICogdGhpcy5keTIgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmR5ID0gKHRoaXMuZHkxICsgdGhpcy5keTIpIC8gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zY2FsZSA9IE1hdGguc3FydChNYXRoLnBvdyh0b3VjaDIucGFnZVggLSB0b3VjaDEucGFnZVgsIDIpICsgTWF0aC5wb3codG91Y2gyLnBhZ2VZIC0gdG91Y2gxLnBhZ2VZLCAyKSkgLyBjb21wb25lbnQuYmFzZURpcztcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZSA9IE1hdGguYXRhbjIodG91Y2gyLnBhZ2VZIC0gdG91Y2gxLnBhZ2VZLCB0b3VjaDIucGFnZVggLSB0b3VjaDEucGFnZVgpIC0gY29tcG9uZW50LmJhc2VBbmc7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucm90YXRlID4gTWF0aC5QSSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZSAtPSBNYXRoLlBJICogMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5yb3RhdGUgPCAtTWF0aC5QSSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZSArPSBNYXRoLlBJICogMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbW92ZWQoKSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1heChNYXRoLmFicyh0aGlzLmR4MSksIE1hdGguYWJzKHRoaXMuZHgyKSwgTWF0aC5hYnModGhpcy5keTEpLCBNYXRoLmFicyh0aGlzLmR5MikpO1xuICAgIH1cbiAgICBwYWdlQ2VudGVyKCkge1xuICAgICAgICBsZXQgdG91Y2gxID0gdGhpcy5ldmVudC50b3VjaGVzWzBdO1xuICAgICAgICBsZXQgdG91Y2gyID0gdGhpcy5ldmVudC50b3VjaGVzWzFdO1xuICAgICAgICByZXR1cm4gWyh0b3VjaDEucGFnZVggKyB0b3VjaDIucGFnZVgpIC8gMiwgKHRvdWNoMS5wYWdlWSArIHRvdWNoMi5wYWdlWSkgLyAyXTtcbiAgICB9XG4gICAgY2xpZW50Q2VudGVyKCkge1xuICAgICAgICBsZXQgdG91Y2gxID0gdGhpcy5ldmVudC50b3VjaGVzWzBdO1xuICAgICAgICBsZXQgdG91Y2gyID0gdGhpcy5ldmVudC50b3VjaGVzWzFdO1xuICAgICAgICByZXR1cm4gWyh0b3VjaDEuY2xpZW50WCArIHRvdWNoMi5jbGllbnRYKSAvIDIsICh0b3VjaDEuY2xpZW50WSArIHRvdWNoMi5jbGllbnRZKSAvIDJdO1xuICAgIH1cbn1cbiIsInZhciBfX3Jlc3QgPSAodGhpcyAmJiB0aGlzLl9fcmVzdCkgfHwgZnVuY3Rpb24gKHMsIGUpIHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxuICAgICAgICB0W3BdID0gc1twXTtcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcbiAgICAgICAgfVxuICAgIHJldHVybiB0O1xufTtcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAqIGFzIERyYWdNYW5hZ2VyIGZyb20gXCIuL0RyYWdNYW5hZ2VyXCI7XG5pbXBvcnQgeyBHZXN0dXJlU3RhdGUgfSBmcm9tIFwiLi9HZXN0dXJlTWFuYWdlclwiO1xuZXhwb3J0IGNsYXNzIERyYWdEcm9wRGl2IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2dldFJlZiA9IChyKSA9PiB7XG4gICAgICAgICAgICBpZiAociA9PT0gdGhpcy5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHsgZ2V0UmVmLCBvbkRyYWdPdmVyVCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQgJiYgb25EcmFnT3ZlclQpIHtcbiAgICAgICAgICAgICAgICBEcmFnTWFuYWdlci5yZW1vdmVIYW5kbGVycyh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gcjtcbiAgICAgICAgICAgIGlmIChyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vd25lckRvY3VtZW50ID0gci5vd25lckRvY3VtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdldFJlZikge1xuICAgICAgICAgICAgICAgIGdldFJlZihyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyICYmIG9uRHJhZ092ZXJUKSB7XG4gICAgICAgICAgICAgICAgRHJhZ01hbmFnZXIuYWRkSGFuZGxlcnMociwgdGhpcy5wcm9wcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZHJhZ1R5cGUgPSBudWxsO1xuICAgICAgICB0aGlzLndhaXRpbmdNb3ZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMubGlzdGVuaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZ2VzdHVyaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMub25Qb2ludGVyRG93biA9IChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgbmF0aXZlVGFyZ2V0ID0gZS5uYXRpdmVFdmVudC50YXJnZXQ7XG4gICAgICAgICAgICBpZiAobmF0aXZlVGFyZ2V0IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCB8fCBuYXRpdmVUYXJnZXQgaW5zdGFuY2VvZiBIVE1MVGV4dEFyZWFFbGVtZW50IHx8IG5hdGl2ZVRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2RyYWctaWdub3JlJykpIHtcbiAgICAgICAgICAgICAgICAvLyBpZ25vcmUgZHJhZyBmcm9tIGlucHV0IGVsZW1lbnRcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgeyBvbkRyYWdTdGFydFQsIG9uR2VzdHVyZVN0YXJ0VCwgb25HZXN0dXJlTW92ZVQsIHVzZVJpZ2h0QnV0dG9uRHJhZ1QgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICBsZXQgZXZlbnQgPSBlLm5hdGl2ZUV2ZW50O1xuICAgICAgICAgICAgdGhpcy5jYW5jZWwoKTtcbiAgICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAndG91Y2hzdGFydCcpIHtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBzaW5nbGUgb3IgZG91YmxlIGZpbmd1cmUgdG91Y2hcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9uRHJhZ1N0YXJ0VCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRyYWdTdGFydChldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9uR2VzdHVyZVN0YXJ0VCAmJiBvbkdlc3R1cmVNb3ZlVCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkdlc3R1cmVTdGFydChldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvbkRyYWdTdGFydFQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuYnV0dG9uID09PSAyICYmICF1c2VSaWdodEJ1dHRvbkRyYWdUKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5vbkRyYWdTdGFydChldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25Nb3VzZU1vdmUgPSAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHsgb25EcmFnTW92ZVQgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICBpZiAodGhpcy53YWl0aW5nTW92ZSkge1xuICAgICAgICAgICAgICAgIGlmIChEcmFnTWFuYWdlci5pc0RyYWdnaW5nKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRyYWdFbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tGaXJzdE1vdmUoZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBzdGF0ZSA9IG5ldyBEcmFnTWFuYWdlci5EcmFnU3RhdGUoZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgc3RhdGUuX29uTW92ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChvbkRyYWdNb3ZlVCkge1xuICAgICAgICAgICAgICAgICAgICBvbkRyYWdNb3ZlVChzdGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uVG91Y2hNb3ZlID0gKGUpID0+IHtcbiAgICAgICAgICAgIGxldCB7IG9uRHJhZ01vdmVUIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgaWYgKHRoaXMud2FpdGluZ01vdmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoRHJhZ01hbmFnZXIuaXNEcmFnZ2luZygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25EcmFnRW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrRmlyc3RNb3ZlKGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlLnRvdWNoZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkRyYWdFbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBzdGF0ZSA9IG5ldyBEcmFnTWFuYWdlci5EcmFnU3RhdGUoZSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgc3RhdGUuX29uTW92ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChvbkRyYWdNb3ZlVCkge1xuICAgICAgICAgICAgICAgICAgICBvbkRyYWdNb3ZlVChzdGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uRHJhZ0VuZCA9IChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgeyBvbkRyYWdFbmRUIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgbGV0IHN0YXRlID0gbmV3IERyYWdNYW5hZ2VyLkRyYWdTdGF0ZShlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMud2FpdGluZ01vdmUpIHtcbiAgICAgICAgICAgICAgICAvLyBlPW51bGwgbWVhbnMgZHJhZyBpcyBjYW5jZWxlZFxuICAgICAgICAgICAgICAgIHN0YXRlLl9vbkRyYWdFbmQoZSA9PSBudWxsKTtcbiAgICAgICAgICAgICAgICBpZiAob25EcmFnRW5kVCkge1xuICAgICAgICAgICAgICAgICAgICBvbkRyYWdFbmRUKHN0YXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsZWFudXBEcmFnKHN0YXRlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkdlc3R1cmVNb3ZlID0gKGUpID0+IHtcbiAgICAgICAgICAgIGxldCB7IG9uR2VzdHVyZU1vdmVULCBnZXN0dXJlU2Vuc2l0aXZpdHkgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICBsZXQgc3RhdGUgPSBuZXcgR2VzdHVyZVN0YXRlKGUsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKHRoaXMud2FpdGluZ01vdmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShnZXN0dXJlU2Vuc2l0aXZpdHkgPiAwKSkge1xuICAgICAgICAgICAgICAgICAgICBnZXN0dXJlU2Vuc2l0aXZpdHkgPSAxMDsgLy8gZGVmYXVsdCBzZW5zaXRpdml0eVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUubW92ZWQoKSA+IGdlc3R1cmVTZW5zaXRpdml0eSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndhaXRpbmdNb3ZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9uR2VzdHVyZU1vdmVUKSB7XG4gICAgICAgICAgICAgICAgb25HZXN0dXJlTW92ZVQoc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uR2VzdHVyZUVuZCA9IChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgeyBvbkdlc3R1cmVFbmRUIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgbGV0IHN0YXRlID0gbmV3IERyYWdNYW5hZ2VyLkRyYWdTdGF0ZShlLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICBpZiAob25HZXN0dXJlRW5kVCkge1xuICAgICAgICAgICAgICAgIG9uR2VzdHVyZUVuZFQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbktleURvd24gPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIG9uRHJhZ1N0YXJ0KGV2ZW50KSB7XG4gICAgICAgIGlmIChEcmFnTWFuYWdlci5pc0RyYWdnaW5nKCkpIHtcbiAgICAgICAgICAgIC8vIHNhbWUgcG9pbnRlciBldmVudCBzaG91bGRuJ3QgdHJpZ2dlciAyIGRyYWcgc3RhcnRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3RhdGUgPSBuZXcgRHJhZ01hbmFnZXIuRHJhZ1N0YXRlKGV2ZW50LCB0aGlzLCB0cnVlKTtcbiAgICAgICAgdGhpcy5iYXNlWCA9IHN0YXRlLnBhZ2VYO1xuICAgICAgICB0aGlzLmJhc2VZID0gc3RhdGUucGFnZVk7XG4gICAgICAgIGxldCBiYXNlRWxlbWVudCA9IHRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICBsZXQgcmVjdCA9IGJhc2VFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB0aGlzLnNjYWxlWCA9IGJhc2VFbGVtZW50Lm9mZnNldFdpZHRoIC8gTWF0aC5yb3VuZChyZWN0LndpZHRoKTtcbiAgICAgICAgdGhpcy5zY2FsZVkgPSBiYXNlRWxlbWVudC5vZmZzZXRIZWlnaHQgLyBNYXRoLnJvdW5kKHJlY3QuaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5hZGREcmFnTGlzdGVuZXJzKGV2ZW50KTtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuZGlyZWN0RHJhZ1QpIHtcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZUZpcnN0TW92ZShzdGF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkRHJhZ0xpc3RlbmVycyhldmVudCkge1xuICAgICAgICBsZXQgeyBvbkRyYWdTdGFydFQgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmIChldmVudC50eXBlID09PSAndG91Y2hzdGFydCcpIHtcbiAgICAgICAgICAgIHRoaXMub3duZXJEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLm9uVG91Y2hNb3ZlKTtcbiAgICAgICAgICAgIHRoaXMub3duZXJEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25EcmFnRW5kKTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ1R5cGUgPSAndG91Y2gnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xuICAgICAgICAgICAgdGhpcy5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uRHJhZ0VuZCk7XG4gICAgICAgICAgICBpZiAoZXZlbnQuYnV0dG9uID09PSAyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmFnVHlwZSA9ICdyaWdodCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdUeXBlID0gJ2xlZnQnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMud2FpdGluZ01vdmUgPSB0cnVlO1xuICAgICAgICB0aGlzLmxpc3RlbmluZyA9IHRydWU7XG4gICAgfVxuICAgIC8vIHJldHVybiB0cnVlIGZvciBhIHZhbGlkIG1vdmVcbiAgICBjaGVja0ZpcnN0TW92ZShlKSB7XG4gICAgICAgIGxldCBzdGF0ZSA9IG5ldyBEcmFnTWFuYWdlci5EcmFnU3RhdGUoZSwgdGhpcywgdHJ1ZSk7XG4gICAgICAgIGlmICghc3RhdGUubW92ZWQoKSkge1xuICAgICAgICAgICAgLy8gbm90IGEgbW92ZVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmV4ZWN1dGVGaXJzdE1vdmUoc3RhdGUpO1xuICAgIH1cbiAgICBleGVjdXRlRmlyc3RNb3ZlKHN0YXRlKSB7XG4gICAgICAgIGxldCB7IG9uRHJhZ1N0YXJ0VCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgdGhpcy53YWl0aW5nTW92ZSA9IGZhbHNlO1xuICAgICAgICBvbkRyYWdTdGFydFQoc3RhdGUpO1xuICAgICAgICBpZiAoIURyYWdNYW5hZ2VyLmlzRHJhZ2dpbmcoKSkge1xuICAgICAgICAgICAgdGhpcy5vbkRyYWdFbmQoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5fb25Nb3ZlKCk7XG4gICAgICAgIHRoaXMub3duZXJEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbktleURvd24pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgYWRkR2VzdHVyZUxpc3RlbmVycyhldmVudCkge1xuICAgICAgICB0aGlzLm93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5vbkdlc3R1cmVNb3ZlKTtcbiAgICAgICAgdGhpcy5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vbkdlc3R1cmVFbmQpO1xuICAgICAgICB0aGlzLm93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlEb3duKTtcbiAgICAgICAgdGhpcy5nZXN0dXJpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLndhaXRpbmdNb3ZlID0gdHJ1ZTtcbiAgICB9XG4gICAgb25HZXN0dXJlU3RhcnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKCFEcmFnTWFuYWdlci5pc0RyYWdnaW5nKCkpIHtcbiAgICAgICAgICAgIC8vIHNhbWUgcG9pbnRlciBldmVudCBzaG91bGRuJ3QgdHJpZ2dlciAyIGRyYWcgc3RhcnRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgeyBvbkdlc3R1cmVTdGFydFQgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIHRoaXMuYmFzZVggPSBldmVudC50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICB0aGlzLmJhc2VZID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWTtcbiAgICAgICAgdGhpcy5iYXNlWDIgPSBldmVudC50b3VjaGVzWzFdLnBhZ2VYO1xuICAgICAgICB0aGlzLmJhc2VZMiA9IGV2ZW50LnRvdWNoZXNbMV0ucGFnZVk7XG4gICAgICAgIGxldCBiYXNlRWxlbWVudCA9IHRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICBsZXQgcmVjdCA9IGJhc2VFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB0aGlzLnNjYWxlWCA9IGJhc2VFbGVtZW50Lm9mZnNldFdpZHRoIC8gTWF0aC5yb3VuZChyZWN0LndpZHRoKTtcbiAgICAgICAgdGhpcy5zY2FsZVkgPSBiYXNlRWxlbWVudC5vZmZzZXRIZWlnaHQgLyBNYXRoLnJvdW5kKHJlY3QuaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5iYXNlRGlzID0gTWF0aC5zcXJ0KE1hdGgucG93KHRoaXMuYmFzZVggLSB0aGlzLmJhc2VYMiwgMikgKyBNYXRoLnBvdyh0aGlzLmJhc2VZIC0gdGhpcy5iYXNlWTIsIDIpKTtcbiAgICAgICAgdGhpcy5iYXNlQW5nID0gTWF0aC5hdGFuMih0aGlzLmJhc2VZMiAtIHRoaXMuYmFzZVksIHRoaXMuYmFzZVgyIC0gdGhpcy5iYXNlWCk7XG4gICAgICAgIGxldCBzdGF0ZSA9IG5ldyBHZXN0dXJlU3RhdGUoZXZlbnQsIHRoaXMsIHRydWUpO1xuICAgICAgICBpZiAob25HZXN0dXJlU3RhcnRUKHN0YXRlKSkge1xuICAgICAgICAgICAgdGhpcy5hZGRHZXN0dXJlTGlzdGVuZXJzKGV2ZW50KTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2FuY2VsKCkge1xuICAgICAgICBpZiAodGhpcy5saXN0ZW5pbmcpIHtcbiAgICAgICAgICAgIHRoaXMub25EcmFnRW5kKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZ2VzdHVyaW5nKSB7XG4gICAgICAgICAgICB0aGlzLm9uR2VzdHVyZUVuZCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZUxpc3RlbmVycygpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2VzdHVyaW5nKSB7XG4gICAgICAgICAgICB0aGlzLm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5vbkdlc3R1cmVNb3ZlKTtcbiAgICAgICAgICAgIHRoaXMub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25HZXN0dXJlRW5kKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmxpc3RlbmluZykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZHJhZ1R5cGUgPT09ICd0b3VjaCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5vblRvdWNoTW92ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vbkRyYWdFbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xuICAgICAgICAgICAgICAgIHRoaXMub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbkRyYWdFbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbktleURvd24pO1xuICAgICAgICB0aGlzLmxpc3RlbmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdlc3R1cmluZyA9IGZhbHNlO1xuICAgIH1cbiAgICBjbGVhbnVwRHJhZyhzdGF0ZSkge1xuICAgICAgICB0aGlzLmRyYWdUeXBlID0gbnVsbDtcbiAgICAgICAgdGhpcy53YWl0aW5nTW92ZSA9IGZhbHNlO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBfYSA9IHRoaXMucHJvcHMsIHsgZ2V0UmVmLCBjaGlsZHJlbiwgY2xhc3NOYW1lLCBkaXJlY3REcmFnVCwgb25EcmFnU3RhcnRULCBvbkRyYWdNb3ZlVCwgb25EcmFnRW5kVCwgb25EcmFnT3ZlclQsIG9uRHJhZ0xlYXZlVCwgb25Ecm9wVCwgb25HZXN0dXJlU3RhcnRULCBvbkdlc3R1cmVNb3ZlVCwgb25HZXN0dXJlRW5kVCwgdXNlUmlnaHRCdXR0b25EcmFnVCB9ID0gX2EsIG90aGVycyA9IF9fcmVzdChfYSwgW1wiZ2V0UmVmXCIsIFwiY2hpbGRyZW5cIiwgXCJjbGFzc05hbWVcIiwgXCJkaXJlY3REcmFnVFwiLCBcIm9uRHJhZ1N0YXJ0VFwiLCBcIm9uRHJhZ01vdmVUXCIsIFwib25EcmFnRW5kVFwiLCBcIm9uRHJhZ092ZXJUXCIsIFwib25EcmFnTGVhdmVUXCIsIFwib25Ecm9wVFwiLCBcIm9uR2VzdHVyZVN0YXJ0VFwiLCBcIm9uR2VzdHVyZU1vdmVUXCIsIFwib25HZXN0dXJlRW5kVFwiLCBcInVzZVJpZ2h0QnV0dG9uRHJhZ1RcIl0pO1xuICAgICAgICBsZXQgb25Ub3VjaERvd24gPSB0aGlzLm9uUG9pbnRlckRvd247XG4gICAgICAgIGxldCBvbk1vdXNlRG93biA9IHRoaXMub25Qb2ludGVyRG93bjtcbiAgICAgICAgaWYgKCFvbkRyYWdTdGFydFQpIHtcbiAgICAgICAgICAgIG9uTW91c2VEb3duID0gbnVsbDtcbiAgICAgICAgICAgIGlmICghb25HZXN0dXJlU3RhcnRUKSB7XG4gICAgICAgICAgICAgICAgb25Ub3VjaERvd24gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvbkRyYWdTdGFydFQgfHwgb25HZXN0dXJlU3RhcnRUKSB7XG4gICAgICAgICAgICBpZiAoY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gYCR7Y2xhc3NOYW1lfSBkcmFnLWluaXRpYXRvcmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWUgPSAnZHJhZy1pbml0aWF0b3InO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBPYmplY3QuYXNzaWduKHsgcmVmOiB0aGlzLl9nZXRSZWYsIGNsYXNzTmFtZTogY2xhc3NOYW1lIH0sIG90aGVycywgeyBvbk1vdXNlRG93bjogb25Nb3VzZURvd24sIG9uVG91Y2hTdGFydDogb25Ub3VjaERvd24gfSksIGNoaWxkcmVuKSk7XG4gICAgfVxuICAgIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICAgICAgbGV0IHsgb25EcmFnT3ZlclQsIG9uRHJhZ0VuZFQsIG9uRHJhZ0xlYXZlVCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudFxuICAgICAgICAgICAgJiYgKHByZXZQcm9wcy5vbkRyYWdPdmVyVCAhPT0gb25EcmFnT3ZlclRcbiAgICAgICAgICAgICAgICB8fCBwcmV2UHJvcHMub25EcmFnTGVhdmVUICE9PSBvbkRyYWdMZWF2ZVRcbiAgICAgICAgICAgICAgICB8fCBwcmV2UHJvcHMub25EcmFnRW5kVCAhPT0gb25EcmFnRW5kVCkpIHtcbiAgICAgICAgICAgIGlmIChvbkRyYWdPdmVyVCkge1xuICAgICAgICAgICAgICAgIERyYWdNYW5hZ2VyLmFkZEhhbmRsZXJzKHRoaXMuZWxlbWVudCwgdGhpcy5wcm9wcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBEcmFnTWFuYWdlci5yZW1vdmVIYW5kbGVycyh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICBsZXQgeyBvbkRyYWdPdmVyVCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudCAmJiBvbkRyYWdPdmVyVCkge1xuICAgICAgICAgICAgRHJhZ01hbmFnZXIucmVtb3ZlSGFuZGxlcnModGhpcy5lbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbmNlbCgpO1xuICAgIH1cbn1cbiIsInZhciBfX3Jlc3QgPSAodGhpcyAmJiB0aGlzLl9fcmVzdCkgfHwgZnVuY3Rpb24gKHMsIGUpIHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxuICAgICAgICB0W3BdID0gc1twXTtcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcbiAgICAgICAgfVxuICAgIHJldHVybiB0O1xufTtcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IERyYWdEcm9wRGl2IH0gZnJvbSBcIi4vZHJhZ2Ryb3AvRHJhZ0Ryb3BEaXZcIjtcbmltcG9ydCB7IERvY2tDb250ZXh0VHlwZSB9IGZyb20gXCIuL0RvY2tEYXRhXCI7XG4vKipcbiAqIEByZXR1cm4gcmV0dXJucyB0cnVlIGlmIG5hdmlnYXRpb24gaXMgaGFuZGxlZCBpbiBsb2NhbCB0YWIgbW92ZSwgb3RoZXJ3aXNlIHJldHVybnMgZmFsc2VcbiAqL1xuZnVuY3Rpb24gY2hlY2tMb2NhbFRhYk1vdmUoa2V5LCB0YWJiYXIpIHtcbiAgICBpZiAoa2V5ID09PSAnQXJyb3dMZWZ0JyB8fCBrZXkgPT09ICdBcnJvd1JpZ2h0Jykge1xuICAgICAgICBsZXQgdGFicyA9IEFycmF5LmZyb20odGFiYmFyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kb2NrLXRhYi1idG4nKSk7XG4gICAgICAgIGxldCBhY3RpdmVUYWIgPSB0YWJiYXIucXVlcnlTZWxlY3RvcignLmRvY2stdGFiLWFjdGl2ZT4uZG9jay10YWItYnRuJyk7XG4gICAgICAgIGxldCBpID0gdGFicy5pbmRleE9mKGFjdGl2ZVRhYik7XG4gICAgICAgIGlmIChpID49IDApIHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICdBcnJvd0xlZnQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhYnNbaSAtIDFdLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIHRhYnNbaSAtIDFdLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChpIDwgdGFicy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhYnNbaSArIDFdLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIHRhYnNbaSArIDFdLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gRG9ja1RhYkJhcihwcm9wcykge1xuICAgIGNvbnN0IHsgb25EcmFnU3RhcnQsIG9uRHJhZ01vdmUsIG9uRHJhZ0VuZCwgVGFiTmF2TGlzdCwgaXNNYXhpbWl6ZWQgfSA9IHByb3BzLCByZXN0UHJvcHMgPSBfX3Jlc3QocHJvcHMsIFtcIm9uRHJhZ1N0YXJ0XCIsIFwib25EcmFnTW92ZVwiLCBcIm9uRHJhZ0VuZFwiLCBcIlRhYk5hdkxpc3RcIiwgXCJpc01heGltaXplZFwiXSk7XG4gICAgY29uc3QgbGF5b3V0ID0gUmVhY3QudXNlQ29udGV4dChEb2NrQ29udGV4dFR5cGUpO1xuICAgIGNvbnN0IHJlZiA9IFJlYWN0LnVzZVJlZigpO1xuICAgIGNvbnN0IGdldFJlZiA9IChkaXYpID0+IHtcbiAgICAgICAgcmVmLmN1cnJlbnQgPSBkaXY7XG4gICAgfTtcbiAgICBjb25zdCBvbktleURvd24gPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS5rZXkuc3RhcnRzV2l0aCgnQXJyb3cnKSkge1xuICAgICAgICAgICAgaWYgKCFjaGVja0xvY2FsVGFiTW92ZShlLmtleSwgcmVmLmN1cnJlbnQpICYmICFpc01heGltaXplZCkge1xuICAgICAgICAgICAgICAgIGxheW91dC5uYXZpZ2F0ZVRvUGFuZWwocmVmLmN1cnJlbnQsIGUua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChEcmFnRHJvcERpdiwgeyBvbkRyYWdTdGFydFQ6IG9uRHJhZ1N0YXJ0LCBvbkRyYWdNb3ZlVDogb25EcmFnTW92ZSwgb25EcmFnRW5kVDogb25EcmFnRW5kLCByb2xlOiBcInRhYmxpc3RcIiwgY2xhc3NOYW1lOiBcImRvY2stYmFyXCIsIG9uS2V5RG93bjogb25LZXlEb3duLCBnZXRSZWY6IGdldFJlZiwgdGFiSW5kZXg6IC0xIH0sXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGFiTmF2TGlzdCwgT2JqZWN0LmFzc2lnbih7fSwgcmVzdFByb3BzKSkpKTtcbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7IERvY2tDb250ZXh0VHlwZSB9IGZyb20gXCIuL0RvY2tEYXRhXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEb2NrVGFiUGFuZSBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmdldFJlZiA9IChyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9yZWYgPSByO1xuICAgICAgICB9O1xuICAgIH1cbiAgICB1cGRhdGVDYWNoZSgpIHtcbiAgICAgICAgY29uc3QgeyBjYWNoZWQsIGNoaWxkcmVuLCBjYWNoZUlkIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBpZiAodGhpcy5fY2FjaGUpIHtcbiAgICAgICAgICAgIGlmICghY2FjaGVkIHx8IGNhY2hlSWQgIT09IHRoaXMuX2NhY2hlLmlkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnJlbW92ZVRhYkNhY2hlKHRoaXMuX2NhY2hlLmlkLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhY2hlZCAmJiB0aGlzLl9yZWYpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlID0gdGhpcy5jb250ZXh0LmdldFRhYkNhY2hlKGNhY2hlSWQsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5fcmVmLmFwcGVuZENoaWxkKHRoaXMuX2NhY2hlLmRpdik7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQudXBkYXRlVGFiQ2FjaGUodGhpcy5fY2FjaGUuaWQsIGNoaWxkcmVuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgY2FjaGVJZCwgY2FjaGVkLCBwcmVmaXhDbHMsIGZvcmNlUmVuZGVyLCBjbGFzc05hbWUsIHN0eWxlLCBpZCwgYWN0aXZlLCBhbmltYXRlZCwgZGVzdHJveUluYWN0aXZlVGFiUGFuZSwgdGFiS2V5LCBjaGlsZHJlbiwgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmIChhY3RpdmUpIHtcbiAgICAgICAgICAgIHRoaXMudmlzaXRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVzdHJveUluYWN0aXZlVGFiUGFuZSkge1xuICAgICAgICAgICAgdGhpcy52aXNpdGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWVyZ2VkU3R5bGUgPSB7fTtcbiAgICAgICAgaWYgKCFhY3RpdmUpIHtcbiAgICAgICAgICAgIGlmIChhbmltYXRlZCkge1xuICAgICAgICAgICAgICAgIG1lcmdlZFN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgICAgICAgICBtZXJnZWRTdHlsZS5oZWlnaHQgPSAwO1xuICAgICAgICAgICAgICAgIG1lcmdlZFN0eWxlLm92ZXJmbG93WSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVyZ2VkU3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyB3aGVuIGNhY2hlZCA9PSB1bmRlZmluZWQsIGl0IHdpbGwgc3RpbGwgY2FjaGUgdGhlIGNoaWxkcmVuIGluc2lkZSB0YWJzIGNvbXBvbmVudCwgYnV0IG5vdCBhY3Jvc3Mgd2hvbGUgZG9jayBsYXlvdXRcbiAgICAgICAgLy8gd2hlbiBjYWNoZWQgPT0gZmFsc2UsIGNoaWxkcmVuIGFyZSBkZXN0cm95ZWQgd2hlbiBub3QgYWN0aXZlXG4gICAgICAgIGNvbnN0IGlzUmVuZGVyID0gY2FjaGVkID09PSBmYWxzZSA/IGFjdGl2ZSA6IHRoaXMudmlzaXRlZDtcbiAgICAgICAgbGV0IHJlbmRlckNoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICAgICAgcmVuZGVyQ2hpbGRyZW4gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzUmVuZGVyIHx8IGZvcmNlUmVuZGVyKSB7XG4gICAgICAgICAgICByZW5kZXJDaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBnZXRSZWYgPSBjYWNoZWQgPyB0aGlzLmdldFJlZiA6IG51bGw7XG4gICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogZ2V0UmVmLCBpZDogY2FjaGVJZCwgcm9sZTogXCJ0YWJwYW5lbFwiLCBcImFyaWEtbGFiZWxsZWRieVwiOiBpZCAmJiBgJHtpZH0tdGFiLSR7dGFiS2V5fWAsIFwiYXJpYS1oaWRkZW5cIjogIWFjdGl2ZSwgc3R5bGU6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbWVyZ2VkU3R5bGUpLCBzdHlsZSksIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhgJHtwcmVmaXhDbHN9LXRhYnBhbmVgLCBhY3RpdmUgJiYgYCR7cHJlZml4Q2xzfS10YWJwYW5lLWFjdGl2ZWAsIGNsYXNzTmFtZSkgfSwgKGFjdGl2ZSB8fCB0aGlzLnZpc2l0ZWQgfHwgZm9yY2VSZW5kZXIpICYmIHJlbmRlckNoaWxkcmVuKSk7XG4gICAgfVxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUNhY2hlKCk7XG4gICAgfVxuICAgIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSwgc25hcHNob3QpIHtcbiAgICAgICAgdGhpcy51cGRhdGVDYWNoZSgpO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQucmVtb3ZlVGFiQ2FjaGUodGhpcy5fY2FjaGUuaWQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxufVxuRG9ja1RhYlBhbmUuY29udGV4dFR5cGUgPSBEb2NrQ29udGV4dFR5cGU7XG4iLCJpbXBvcnQgeyBtYXhpbWVQbGFjZUhvbGRlcklkLCBwbGFjZUhvbGRlclN0eWxlIH0gZnJvbSBcIi4vRG9ja0RhdGFcIjtcbmxldCBfd2F0Y2hPYmplY3RDaGFuZ2UgPSBuZXcgV2Vha01hcCgpO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFVwZGF0ZWRPYmplY3Qob2JqKSB7XG4gICAgbGV0IHJlc3VsdCA9IF93YXRjaE9iamVjdENoYW5nZS5nZXQob2JqKTtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIHJldHVybiBnZXRVcGRhdGVkT2JqZWN0KHJlc3VsdCk7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG59XG5mdW5jdGlvbiBjbGVhck9iamVjdENhY2hlKCkge1xuICAgIF93YXRjaE9iamVjdENoYW5nZSA9IG5ldyBXZWFrTWFwKCk7XG59XG5mdW5jdGlvbiBjbG9uZSh2YWx1ZSwgZXh0cmEpIHtcbiAgICBsZXQgbmV3VmFsdWUgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHZhbHVlKSwgZXh0cmEpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KG5ld1ZhbHVlLnRhYnMpKSB7XG4gICAgICAgIG5ld1ZhbHVlLnRhYnMgPSBuZXdWYWx1ZS50YWJzLmNvbmNhdCgpO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShuZXdWYWx1ZS5jaGlsZHJlbikpIHtcbiAgICAgICAgbmV3VmFsdWUuY2hpbGRyZW4gPSBuZXdWYWx1ZS5jaGlsZHJlbi5jb25jYXQoKTtcbiAgICB9XG4gICAgX3dhdGNoT2JqZWN0Q2hhbmdlLnNldCh2YWx1ZSwgbmV3VmFsdWUpO1xuICAgIHJldHVybiBuZXdWYWx1ZTtcbn1cbmZ1bmN0aW9uIG1heEZsZXgoY3VycmVudEZsZXgsIG5ld0ZsZXgpIHtcbiAgICBpZiAoY3VycmVudEZsZXggPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbmV3RmxleDtcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWF4KGN1cnJlbnRGbGV4LCBuZXdGbGV4KTtcbn1cbmZ1bmN0aW9uIG1lcmdlRmxleChjdXJyZW50RmxleCwgbmV3RmxleCkge1xuICAgIGlmIChjdXJyZW50RmxleCA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBuZXdGbGV4O1xuICAgIH1cbiAgICBpZiAoY3VycmVudEZsZXggPT09IG5ld0ZsZXgpIHtcbiAgICAgICAgcmV0dXJuIG5ld0ZsZXg7XG4gICAgfVxuICAgIGlmIChjdXJyZW50RmxleCA+PSAxKSB7XG4gICAgICAgIGlmIChuZXdGbGV4IDw9IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBNYXRoLm1pbihjdXJyZW50RmxleCwgbmV3RmxleCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAobmV3RmxleCA+PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoY3VycmVudEZsZXgsIG5ld0ZsZXgpO1xuICAgIH1cbn1cbmxldCBfaWRDb3VudCA9IDA7XG5leHBvcnQgZnVuY3Rpb24gbmV4dElkKCkge1xuICAgICsrX2lkQ291bnQ7XG4gICAgcmV0dXJuIGArJHtfaWRDb3VudH1gO1xufVxubGV0IF96Q291bnQgPSAwO1xuZXhwb3J0IGZ1bmN0aW9uIG5leHRaSW5kZXgoY3VycmVudCkge1xuICAgIGlmIChjdXJyZW50ID09PSBfekNvdW50KSB7XG4gICAgICAgIC8vIGFscmVhZHkgdGhlIHRvcFxuICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICB9XG4gICAgcmV0dXJuICsrX3pDb3VudDtcbn1cbmZ1bmN0aW9uIGZpbmRJblBhbmVsKHBhbmVsLCBpZCwgZmlsdGVyKSB7XG4gICAgaWYgKHBhbmVsLmlkID09PSBpZCAmJiAoZmlsdGVyICYgRmlsdGVyLlBhbmVsKSkge1xuICAgICAgICByZXR1cm4gcGFuZWw7XG4gICAgfVxuICAgIGlmIChmaWx0ZXIgJiBGaWx0ZXIuVGFiKSB7XG4gICAgICAgIGZvciAobGV0IHRhYiBvZiBwYW5lbC50YWJzKSB7XG4gICAgICAgICAgICBpZiAodGFiLmlkID09PSBpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0YWI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBmaW5kSW5Cb3goYm94LCBpZCwgZmlsdGVyKSB7XG4gICAgbGV0IHJlc3VsdDtcbiAgICBpZiAoKGZpbHRlciB8IEZpbHRlci5Cb3gpICYmIGJveC5pZCA9PT0gaWQpIHtcbiAgICAgICAgcmV0dXJuIGJveDtcbiAgICB9XG4gICAgZm9yIChsZXQgY2hpbGQgb2YgYm94LmNoaWxkcmVuKSB7XG4gICAgICAgIGlmICgnY2hpbGRyZW4nIGluIGNoaWxkKSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID0gZmluZEluQm94KGNoaWxkLCBpZCwgZmlsdGVyKSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCd0YWJzJyBpbiBjaGlsZCkge1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9IGZpbmRJblBhbmVsKGNoaWxkLCBpZCwgZmlsdGVyKSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnQgdmFyIEZpbHRlcjtcbihmdW5jdGlvbiAoRmlsdGVyKSB7XG4gICAgRmlsdGVyW0ZpbHRlcltcIlRhYlwiXSA9IDFdID0gXCJUYWJcIjtcbiAgICBGaWx0ZXJbRmlsdGVyW1wiUGFuZWxcIl0gPSAyXSA9IFwiUGFuZWxcIjtcbiAgICBGaWx0ZXJbRmlsdGVyW1wiQm94XCJdID0gNF0gPSBcIkJveFwiO1xuICAgIEZpbHRlcltGaWx0ZXJbXCJEb2NrZWRcIl0gPSA4XSA9IFwiRG9ja2VkXCI7XG4gICAgRmlsdGVyW0ZpbHRlcltcIkZsb2F0ZWRcIl0gPSAxNl0gPSBcIkZsb2F0ZWRcIjtcbiAgICBGaWx0ZXJbRmlsdGVyW1wiV2luZG93ZWRcIl0gPSAzMl0gPSBcIldpbmRvd2VkXCI7XG4gICAgRmlsdGVyW0ZpbHRlcltcIk1heFwiXSA9IDY0XSA9IFwiTWF4XCI7XG4gICAgRmlsdGVyW0ZpbHRlcltcIkV2ZXJ5V2hlcmVcIl0gPSAxMjBdID0gXCJFdmVyeVdoZXJlXCI7XG4gICAgRmlsdGVyW0ZpbHRlcltcIkFueVRhYlwiXSA9IDEyMV0gPSBcIkFueVRhYlwiO1xuICAgIEZpbHRlcltGaWx0ZXJbXCJBbnlQYW5lbFwiXSA9IDEyMl0gPSBcIkFueVBhbmVsXCI7XG4gICAgRmlsdGVyW0ZpbHRlcltcIkFueVRhYlBhbmVsXCJdID0gMTIzXSA9IFwiQW55VGFiUGFuZWxcIjtcbiAgICBGaWx0ZXJbRmlsdGVyW1wiQWxsXCJdID0gMTI3XSA9IFwiQWxsXCI7XG59KShGaWx0ZXIgfHwgKEZpbHRlciA9IHt9KSk7XG5leHBvcnQgZnVuY3Rpb24gZmluZChsYXlvdXQsIGlkLCBmaWx0ZXIgPSBGaWx0ZXIuQW55VGFiUGFuZWwpIHtcbiAgICBsZXQgcmVzdWx0O1xuICAgIGlmIChmaWx0ZXIgJiBGaWx0ZXIuRG9ja2VkKSB7XG4gICAgICAgIHJlc3VsdCA9IGZpbmRJbkJveChsYXlvdXQuZG9ja2JveCwgaWQsIGZpbHRlcik7XG4gICAgfVxuICAgIGlmIChyZXN1bHQpXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgaWYgKGZpbHRlciAmIEZpbHRlci5GbG9hdGVkKSB7XG4gICAgICAgIHJlc3VsdCA9IGZpbmRJbkJveChsYXlvdXQuZmxvYXRib3gsIGlkLCBmaWx0ZXIpO1xuICAgIH1cbiAgICBpZiAocmVzdWx0KVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIGlmIChmaWx0ZXIgJiBGaWx0ZXIuV2luZG93ZWQpIHtcbiAgICAgICAgcmVzdWx0ID0gZmluZEluQm94KGxheW91dC53aW5kb3dib3gsIGlkLCBmaWx0ZXIpO1xuICAgIH1cbiAgICBpZiAocmVzdWx0KVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIGlmIChmaWx0ZXIgJiBGaWx0ZXIuTWF4KSB7XG4gICAgICAgIHJlc3VsdCA9IGZpbmRJbkJveChsYXlvdXQubWF4Ym94LCBpZCwgZmlsdGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhZGROZXh0VG9UYWIobGF5b3V0LCBzb3VyY2UsIHRhcmdldCwgZGlyZWN0aW9uKSB7XG4gICAgbGV0IHBvcyA9IHRhcmdldC5wYXJlbnQudGFicy5pbmRleE9mKHRhcmdldCk7XG4gICAgaWYgKHBvcyA+PSAwKSB7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdhZnRlci10YWInKSB7XG4gICAgICAgICAgICArK3BvcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWRkVGFiVG9QYW5lbChsYXlvdXQsIHNvdXJjZSwgdGFyZ2V0LnBhcmVudCwgcG9zKTtcbiAgICB9XG4gICAgcmV0dXJuIGxheW91dDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhZGRUYWJUb1BhbmVsKGxheW91dCwgc291cmNlLCBwYW5lbCwgaWR4ID0gLTEpIHtcbiAgICBpZiAoaWR4ID09PSAtMSkge1xuICAgICAgICBpZHggPSBwYW5lbC50YWJzLmxlbmd0aDtcbiAgICB9XG4gICAgbGV0IHRhYnM7XG4gICAgbGV0IGFjdGl2ZUlkO1xuICAgIGlmICgndGFicycgaW4gc291cmNlKSB7XG4gICAgICAgIC8vIHNvdXJjZSBpcyBQYW5lbERhdGFcbiAgICAgICAgdGFicyA9IHNvdXJjZS50YWJzO1xuICAgICAgICBhY3RpdmVJZCA9IHNvdXJjZS5hY3RpdmVJZDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIHNvdXJjZSBpcyBUYWJEYXRhXG4gICAgICAgIHRhYnMgPSBbc291cmNlXTtcbiAgICB9XG4gICAgaWYgKHRhYnMubGVuZ3RoKSB7XG4gICAgICAgIGxldCBuZXdQYW5lbCA9IGNsb25lKHBhbmVsKTtcbiAgICAgICAgbmV3UGFuZWwudGFicy5zcGxpY2UoaWR4LCAwLCAuLi50YWJzKTtcbiAgICAgICAgbmV3UGFuZWwuYWN0aXZlSWQgPSB0YWJzW3RhYnMubGVuZ3RoIC0gMV0uaWQ7XG4gICAgICAgIGZvciAobGV0IHRhYiBvZiB0YWJzKSB7XG4gICAgICAgICAgICB0YWIucGFyZW50ID0gbmV3UGFuZWw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFjdGl2ZUlkKSB7XG4gICAgICAgICAgICBuZXdQYW5lbC5hY3RpdmVJZCA9IGFjdGl2ZUlkO1xuICAgICAgICB9XG4gICAgICAgIGxheW91dCA9IHJlcGxhY2VQYW5lbChsYXlvdXQsIHBhbmVsLCBuZXdQYW5lbCk7XG4gICAgfVxuICAgIHJldHVybiBsYXlvdXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gY29udmVyVG9QYW5lbChzb3VyY2UpIHtcbiAgICBpZiAoJ3RhYnMnIGluIHNvdXJjZSkge1xuICAgICAgICAvLyBzb3VyY2UgaXMgYWxyZWFkeSBQYW5lbERhdGFcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBuZXdQYW5lbCA9IHsgdGFiczogW3NvdXJjZV0sIGdyb3VwOiBzb3VyY2UuZ3JvdXAsIGFjdGl2ZUlkOiBzb3VyY2UuaWQgfTtcbiAgICAgICAgc291cmNlLnBhcmVudCA9IG5ld1BhbmVsO1xuICAgICAgICByZXR1cm4gbmV3UGFuZWw7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGRvY2tQYW5lbFRvUGFuZWwobGF5b3V0LCBuZXdQYW5lbCwgcGFuZWwsIGRpcmVjdGlvbikge1xuICAgIGxldCBib3ggPSBwYW5lbC5wYXJlbnQ7XG4gICAgbGV0IGRvY2tNb2RlID0gKGRpcmVjdGlvbiA9PT0gJ2xlZnQnIHx8IGRpcmVjdGlvbiA9PT0gJ3JpZ2h0JykgPyAnaG9yaXpvbnRhbCcgOiAndmVydGljYWwnO1xuICAgIGxldCBhZnRlclBhbmVsID0gKGRpcmVjdGlvbiA9PT0gJ2JvdHRvbScgfHwgZGlyZWN0aW9uID09PSAncmlnaHQnKTtcbiAgICBsZXQgcG9zID0gYm94LmNoaWxkcmVuLmluZGV4T2YocGFuZWwpO1xuICAgIGlmIChwb3MgPj0gMCkge1xuICAgICAgICBsZXQgbmV3Qm94ID0gY2xvbmUoYm94KTtcbiAgICAgICAgaWYgKGRvY2tNb2RlID09PSBib3gubW9kZSkge1xuICAgICAgICAgICAgaWYgKGFmdGVyUGFuZWwpIHtcbiAgICAgICAgICAgICAgICArK3BvcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhbmVsLnNpemUgKj0gMC41O1xuICAgICAgICAgICAgbmV3UGFuZWwuc2l6ZSA9IHBhbmVsLnNpemU7XG4gICAgICAgICAgICBuZXdCb3guY2hpbGRyZW4uc3BsaWNlKHBvcywgMCwgbmV3UGFuZWwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IG5ld0NoaWxkQm94ID0geyBtb2RlOiBkb2NrTW9kZSwgY2hpbGRyZW46IFtdIH07XG4gICAgICAgICAgICBuZXdDaGlsZEJveC5zaXplID0gcGFuZWwuc2l6ZTtcbiAgICAgICAgICAgIGlmIChhZnRlclBhbmVsKSB7XG4gICAgICAgICAgICAgICAgbmV3Q2hpbGRCb3guY2hpbGRyZW4gPSBbcGFuZWwsIG5ld1BhbmVsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld0NoaWxkQm94LmNoaWxkcmVuID0gW25ld1BhbmVsLCBwYW5lbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYW5lbC5wYXJlbnQgPSBuZXdDaGlsZEJveDtcbiAgICAgICAgICAgIHBhbmVsLnNpemUgPSAyMDA7XG4gICAgICAgICAgICBuZXdQYW5lbC5wYXJlbnQgPSBuZXdDaGlsZEJveDtcbiAgICAgICAgICAgIG5ld1BhbmVsLnNpemUgPSAyMDA7XG4gICAgICAgICAgICBuZXdCb3guY2hpbGRyZW5bcG9zXSA9IG5ld0NoaWxkQm94O1xuICAgICAgICAgICAgbmV3Q2hpbGRCb3gucGFyZW50ID0gbmV3Qm94O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXBsYWNlQm94KGxheW91dCwgYm94LCBuZXdCb3gpO1xuICAgIH1cbiAgICByZXR1cm4gbGF5b3V0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRvY2tQYW5lbFRvQm94KGxheW91dCwgbmV3UGFuZWwsIGJveCwgZGlyZWN0aW9uKSB7XG4gICAgbGV0IHBhcmVudEJveCA9IGJveC5wYXJlbnQ7XG4gICAgbGV0IGRvY2tNb2RlID0gKGRpcmVjdGlvbiA9PT0gJ2xlZnQnIHx8IGRpcmVjdGlvbiA9PT0gJ3JpZ2h0JykgPyAnaG9yaXpvbnRhbCcgOiAndmVydGljYWwnO1xuICAgIGxldCBhZnRlclBhbmVsID0gKGRpcmVjdGlvbiA9PT0gJ2JvdHRvbScgfHwgZGlyZWN0aW9uID09PSAncmlnaHQnKTtcbiAgICBpZiAocGFyZW50Qm94KSB7XG4gICAgICAgIGxldCBwb3MgPSBwYXJlbnRCb3guY2hpbGRyZW4uaW5kZXhPZihib3gpO1xuICAgICAgICBpZiAocG9zID49IDApIHtcbiAgICAgICAgICAgIGxldCBuZXdQYXJlbnRCb3ggPSBjbG9uZShwYXJlbnRCb3gpO1xuICAgICAgICAgICAgaWYgKGRvY2tNb2RlID09PSBwYXJlbnRCb3gubW9kZSkge1xuICAgICAgICAgICAgICAgIGlmIChhZnRlclBhbmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICsrcG9zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXdQYW5lbC5zaXplID0gYm94LnNpemUgKiAwLjM7XG4gICAgICAgICAgICAgICAgYm94LnNpemUgKj0gMC43O1xuICAgICAgICAgICAgICAgIG5ld1BhcmVudEJveC5jaGlsZHJlbi5zcGxpY2UocG9zLCAwLCBuZXdQYW5lbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3Q2hpbGRCb3ggPSB7IG1vZGU6IGRvY2tNb2RlLCBjaGlsZHJlbjogW10gfTtcbiAgICAgICAgICAgICAgICBuZXdDaGlsZEJveC5zaXplID0gYm94LnNpemU7XG4gICAgICAgICAgICAgICAgaWYgKGFmdGVyUGFuZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3Q2hpbGRCb3guY2hpbGRyZW4gPSBbYm94LCBuZXdQYW5lbF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdDaGlsZEJveC5jaGlsZHJlbiA9IFtuZXdQYW5lbCwgYm94XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYm94LnBhcmVudCA9IG5ld0NoaWxkQm94O1xuICAgICAgICAgICAgICAgIGJveC5zaXplID0gMjgwO1xuICAgICAgICAgICAgICAgIG5ld1BhbmVsLnBhcmVudCA9IG5ld0NoaWxkQm94O1xuICAgICAgICAgICAgICAgIG5ld1BhbmVsLnNpemUgPSAxMjA7XG4gICAgICAgICAgICAgICAgbmV3UGFyZW50Qm94LmNoaWxkcmVuW3Bvc10gPSBuZXdDaGlsZEJveDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXBsYWNlQm94KGxheW91dCwgcGFyZW50Qm94LCBuZXdQYXJlbnRCb3gpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGJveCA9PT0gbGF5b3V0LmRvY2tib3gpIHtcbiAgICAgICAgbGV0IG5ld0JveCA9IGNsb25lKGJveCk7XG4gICAgICAgIGlmIChkb2NrTW9kZSA9PT0gYm94Lm1vZGUpIHtcbiAgICAgICAgICAgIGxldCBwb3MgPSAwO1xuICAgICAgICAgICAgaWYgKGFmdGVyUGFuZWwpIHtcbiAgICAgICAgICAgICAgICBwb3MgPSBuZXdCb3guY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3UGFuZWwuc2l6ZSA9IGJveC5zaXplICogMC4zO1xuICAgICAgICAgICAgYm94LnNpemUgKj0gMC43O1xuICAgICAgICAgICAgbmV3Qm94LmNoaWxkcmVuLnNwbGljZShwb3MsIDAsIG5ld1BhbmVsKTtcbiAgICAgICAgICAgIHJldHVybiByZXBsYWNlQm94KGxheW91dCwgYm94LCBuZXdCb3gpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gcmVwbGFjZSByb290IGRvY2tib3hcbiAgICAgICAgICAgIGxldCBuZXdEb2NrQm94ID0geyBtb2RlOiBkb2NrTW9kZSwgY2hpbGRyZW46IFtdIH07XG4gICAgICAgICAgICBuZXdEb2NrQm94LnNpemUgPSBib3guc2l6ZTtcbiAgICAgICAgICAgIGlmIChhZnRlclBhbmVsKSB7XG4gICAgICAgICAgICAgICAgbmV3RG9ja0JveC5jaGlsZHJlbiA9IFtuZXdCb3gsIG5ld1BhbmVsXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld0RvY2tCb3guY2hpbGRyZW4gPSBbbmV3UGFuZWwsIG5ld0JveF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdCb3guc2l6ZSA9IDI4MDtcbiAgICAgICAgICAgIG5ld1BhbmVsLnNpemUgPSAxMjA7XG4gICAgICAgICAgICByZXR1cm4gcmVwbGFjZUJveChsYXlvdXQsIGJveCwgbmV3RG9ja0JveCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoYm94ID09PSBsYXlvdXQubWF4Ym94KSB7XG4gICAgICAgIGxldCBuZXdCb3ggPSBjbG9uZShib3gpO1xuICAgICAgICBuZXdCb3guY2hpbGRyZW4ucHVzaChuZXdQYW5lbCk7XG4gICAgICAgIHJldHVybiByZXBsYWNlQm94KGxheW91dCwgYm94LCBuZXdCb3gpO1xuICAgIH1cbiAgICByZXR1cm4gbGF5b3V0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsb2F0UGFuZWwobGF5b3V0LCBuZXdQYW5lbCwgcmVjdCkge1xuICAgIGxldCBuZXdCb3ggPSBjbG9uZShsYXlvdXQuZmxvYXRib3gpO1xuICAgIGlmIChyZWN0KSB7XG4gICAgICAgIG5ld1BhbmVsLnggPSByZWN0LmxlZnQ7XG4gICAgICAgIG5ld1BhbmVsLnkgPSByZWN0LnRvcDtcbiAgICAgICAgbmV3UGFuZWwudyA9IHJlY3Qud2lkdGg7XG4gICAgICAgIG5ld1BhbmVsLmggPSByZWN0LmhlaWdodDtcbiAgICB9XG4gICAgbmV3Qm94LmNoaWxkcmVuLnB1c2gobmV3UGFuZWwpO1xuICAgIHJldHVybiByZXBsYWNlQm94KGxheW91dCwgbGF5b3V0LmZsb2F0Ym94LCBuZXdCb3gpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhbmVsVG9XaW5kb3cobGF5b3V0LCBuZXdQYW5lbCkge1xuICAgIGxldCBuZXdCb3ggPSBjbG9uZShsYXlvdXQud2luZG93Ym94KTtcbiAgICBuZXdCb3guY2hpbGRyZW4ucHVzaChuZXdQYW5lbCk7XG4gICAgcmV0dXJuIHJlcGxhY2VCb3gobGF5b3V0LCBsYXlvdXQud2luZG93Ym94LCBuZXdCb3gpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZyb21MYXlvdXQobGF5b3V0LCBzb3VyY2UpIHtcbiAgICBpZiAoc291cmNlKSB7XG4gICAgICAgIGxldCBwYW5lbERhdGE7XG4gICAgICAgIGlmICgndGFicycgaW4gc291cmNlKSB7XG4gICAgICAgICAgICBwYW5lbERhdGEgPSBzb3VyY2U7XG4gICAgICAgICAgICBsYXlvdXQgPSByZW1vdmVQYW5lbChsYXlvdXQsIHBhbmVsRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYW5lbERhdGEgPSBzb3VyY2UucGFyZW50O1xuICAgICAgICAgICAgbGF5b3V0ID0gcmVtb3ZlVGFiKGxheW91dCwgc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFuZWxEYXRhICYmIHBhbmVsRGF0YS5wYXJlbnQgJiYgcGFuZWxEYXRhLnBhcmVudC5tb2RlID09PSAnbWF4aW1pemUnKSB7XG4gICAgICAgICAgICBsZXQgbmV3UGFuZWwgPSBsYXlvdXQubWF4Ym94LmNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgaWYgKCFuZXdQYW5lbCB8fCAobmV3UGFuZWwudGFicy5sZW5ndGggPT09IDAgJiYgIW5ld1BhbmVsLnBhbmVsTG9jaykpIHtcbiAgICAgICAgICAgICAgICAvLyBtYXggcGFuZWwgaXMgZ29uZSwgcmVtb3ZlIHRoZSBwbGFjZSBob2xkZXJcbiAgICAgICAgICAgICAgICBsZXQgcGxhY2VIb2xkZXIgPSBmaW5kKGxheW91dCwgbWF4aW1lUGxhY2VIb2xkZXJJZCk7XG4gICAgICAgICAgICAgICAgaWYgKHBsYWNlSG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZW1vdmVQYW5lbChsYXlvdXQsIHBsYWNlSG9sZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxheW91dDtcbn1cbmZ1bmN0aW9uIHJlbW92ZVBhbmVsKGxheW91dCwgcGFuZWwpIHtcbiAgICBsZXQgYm94ID0gcGFuZWwucGFyZW50O1xuICAgIGlmIChib3gpIHtcbiAgICAgICAgbGV0IHBvcyA9IGJveC5jaGlsZHJlbi5pbmRleE9mKHBhbmVsKTtcbiAgICAgICAgaWYgKHBvcyA+PSAwKSB7XG4gICAgICAgICAgICBsZXQgbmV3Qm94ID0gY2xvbmUoYm94KTtcbiAgICAgICAgICAgIG5ld0JveC5jaGlsZHJlbi5zcGxpY2UocG9zLCAxKTtcbiAgICAgICAgICAgIHJldHVybiByZXBsYWNlQm94KGxheW91dCwgYm94LCBuZXdCb3gpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsYXlvdXQ7XG59XG5mdW5jdGlvbiByZW1vdmVUYWIobGF5b3V0LCB0YWIpIHtcbiAgICBsZXQgcGFuZWwgPSB0YWIucGFyZW50O1xuICAgIGlmIChwYW5lbCkge1xuICAgICAgICBsZXQgcG9zID0gcGFuZWwudGFicy5pbmRleE9mKHRhYik7XG4gICAgICAgIGlmIChwb3MgPj0gMCkge1xuICAgICAgICAgICAgbGV0IG5ld1BhbmVsID0gY2xvbmUocGFuZWwpO1xuICAgICAgICAgICAgbmV3UGFuZWwudGFicy5zcGxpY2UocG9zLCAxKTtcbiAgICAgICAgICAgIGlmIChuZXdQYW5lbC5hY3RpdmVJZCA9PT0gdGFiLmlkKSB7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHNlbGVjdGlvbiBpZFxuICAgICAgICAgICAgICAgIGlmIChuZXdQYW5lbC50YWJzLmxlbmd0aCA+IHBvcykge1xuICAgICAgICAgICAgICAgICAgICBuZXdQYW5lbC5hY3RpdmVJZCA9IG5ld1BhbmVsLnRhYnNbcG9zXS5pZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobmV3UGFuZWwudGFicy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3UGFuZWwuYWN0aXZlSWQgPSBuZXdQYW5lbC50YWJzWzBdLmlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXBsYWNlUGFuZWwobGF5b3V0LCBwYW5lbCwgbmV3UGFuZWwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsYXlvdXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gbW92ZVRvRnJvbnQobGF5b3V0LCBzb3VyY2UpIHtcbiAgICBpZiAoc291cmNlKSB7XG4gICAgICAgIGxldCBwYW5lbERhdGE7XG4gICAgICAgIGxldCBuZWVkVXBkYXRlID0gZmFsc2U7XG4gICAgICAgIGxldCBjaGFuZ2VzID0ge307XG4gICAgICAgIGlmICgndGFicycgaW4gc291cmNlKSB7XG4gICAgICAgICAgICBwYW5lbERhdGEgPSBzb3VyY2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYW5lbERhdGEgPSBzb3VyY2UucGFyZW50O1xuICAgICAgICAgICAgaWYgKHBhbmVsRGF0YS5hY3RpdmVJZCAhPT0gc291cmNlLmlkKSB7XG4gICAgICAgICAgICAgICAgLy8gbW92ZSB0YWIgdG8gZnJvbnRcbiAgICAgICAgICAgICAgICBjaGFuZ2VzLmFjdGl2ZUlkID0gc291cmNlLmlkO1xuICAgICAgICAgICAgICAgIG5lZWRVcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYW5lbERhdGEgJiYgcGFuZWxEYXRhLnBhcmVudCAmJiBwYW5lbERhdGEucGFyZW50Lm1vZGUgPT09ICdmbG9hdCcpIHtcbiAgICAgICAgICAgIC8vIG1vdmUgZmxvYXQgcGFuZWwgdG8gZnJvbnRcbiAgICAgICAgICAgIGxldCBuZXdaID0gbmV4dFpJbmRleChwYW5lbERhdGEueik7XG4gICAgICAgICAgICBpZiAobmV3WiAhPT0gcGFuZWxEYXRhLnopIHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VzLnogPSBuZXdaO1xuICAgICAgICAgICAgICAgIG5lZWRVcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChuZWVkVXBkYXRlKSB7XG4gICAgICAgICAgICBsYXlvdXQgPSByZXBsYWNlUGFuZWwobGF5b3V0LCBwYW5lbERhdGEsIGNsb25lKHBhbmVsRGF0YSwgY2hhbmdlcykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsYXlvdXQ7XG59XG4vLyBtYXhpbWl6ZSBvciByZXN0b3JlIHRoZSBwYW5lbFxuZXhwb3J0IGZ1bmN0aW9uIG1heGltaXplKGxheW91dCwgc291cmNlKSB7XG4gICAgaWYgKHNvdXJjZSkge1xuICAgICAgICBpZiAoJ3RhYnMnIGluIHNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZS5wYXJlbnQubW9kZSA9PT0gJ21heGltaXplJykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN0b3JlUGFuZWwobGF5b3V0LCBzb3VyY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1heGltaXplUGFuZWwobGF5b3V0LCBzb3VyY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG1heGltaXplVGFiKGxheW91dCwgc291cmNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGF5b3V0O1xufVxuZnVuY3Rpb24gbWF4aW1pemVQYW5lbChsYXlvdXQsIHBhbmVsKSB7XG4gICAgbGV0IG1heGJveCA9IGxheW91dC5tYXhib3g7XG4gICAgaWYgKG1heGJveC5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgLy8gaW52YWxpZCBtYXhpbWl6ZVxuICAgICAgICByZXR1cm4gbGF5b3V0O1xuICAgIH1cbiAgICBsZXQgcGxhY2VIb2RsZXJQYW5lbCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcGFuZWwpLCB7IGlkOiBtYXhpbWVQbGFjZUhvbGRlcklkLCB0YWJzOiBbXSwgcGFuZWxMb2NrOiB7fSB9KTtcbiAgICBsYXlvdXQgPSByZXBsYWNlUGFuZWwobGF5b3V0LCBwYW5lbCwgcGxhY2VIb2RsZXJQYW5lbCk7XG4gICAgbGF5b3V0ID0gZG9ja1BhbmVsVG9Cb3gobGF5b3V0LCBwYW5lbCwgbGF5b3V0Lm1heGJveCwgJ21pZGRsZScpO1xuICAgIHJldHVybiBsYXlvdXQ7XG59XG5mdW5jdGlvbiByZXN0b3JlUGFuZWwobGF5b3V0LCBwYW5lbCkge1xuICAgIGxheW91dCA9IHJlbW92ZVBhbmVsKGxheW91dCwgcGFuZWwpO1xuICAgIGxldCBwbGFjZUhvbGRlciA9IGZpbmQobGF5b3V0LCBtYXhpbWVQbGFjZUhvbGRlcklkKTtcbiAgICBpZiAocGxhY2VIb2xkZXIpIHtcbiAgICAgICAgbGV0IHsgeCwgeSwgeiwgdywgaCB9ID0gcGxhY2VIb2xkZXI7XG4gICAgICAgIHBhbmVsID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwYW5lbCksIHsgeCwgeSwgeiwgdywgaCB9KTtcbiAgICAgICAgcmV0dXJuIHJlcGxhY2VQYW5lbChsYXlvdXQsIHBsYWNlSG9sZGVyLCBwYW5lbCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZG9ja1BhbmVsVG9Cb3gobGF5b3V0LCBwYW5lbCwgbGF5b3V0LmRvY2tib3gsICdyaWdodCcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1heGltaXplVGFiKGxheW91dCwgdGFiKSB7XG4gICAgLy8gVE9ETyB0byBiZSBpbXBsZW1lbnRlZFxuICAgIHJldHVybiBsYXlvdXQ7XG59XG4vLyBtb3ZlIGZsb2F0IHBhbmVsIGludG8gdGhlIHNjcmVlblxuZXhwb3J0IGZ1bmN0aW9uIGZpeEZsb2F0UGFuZWxQb3MobGF5b3V0LCBsYXlvdXRXaWR0aCwgbGF5b3V0SGVpZ2h0KSB7XG4gICAgbGV0IGxheW91dENoYW5nZWQgPSBmYWxzZTtcbiAgICBpZiAobGF5b3V0ICYmIGxheW91dC5mbG9hdGJveCAmJiBsYXlvdXRXaWR0aCA+IDIwMCAmJiBsYXlvdXRIZWlnaHQgPiAyMDApIHtcbiAgICAgICAgbGV0IG5ld0Zsb2F0Q2hpbGRyZW4gPSBsYXlvdXQuZmxvYXRib3guY2hpbGRyZW4uY29uY2F0KCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3RmxvYXRDaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgbGV0IHBhbmVsID0gbmV3RmxvYXRDaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGxldCBwYW5lbENoYW5nZSA9IHt9O1xuICAgICAgICAgICAgaWYgKHBhbmVsLncgPiBsYXlvdXRXaWR0aCkge1xuICAgICAgICAgICAgICAgIHBhbmVsQ2hhbmdlLncgPSBsYXlvdXRXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYW5lbC5oID4gbGF5b3V0SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgcGFuZWxDaGFuZ2UuaCA9IGxheW91dEhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYW5lbC55ID4gbGF5b3V0SGVpZ2h0IC0gMTYpIHtcbiAgICAgICAgICAgICAgICBwYW5lbENoYW5nZS55ID0gTWF0aC5tYXgobGF5b3V0SGVpZ2h0IC0gMTYgLSAocGFuZWwuaCA+PiAxKSwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYW5lbC55IDwgMCkge1xuICAgICAgICAgICAgICAgIHBhbmVsQ2hhbmdlLnkgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhbmVsLnggKyBwYW5lbC53IDwgMTYpIHtcbiAgICAgICAgICAgICAgICBwYW5lbENoYW5nZS54ID0gMTYgLSAocGFuZWwudyA+PiAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhbmVsLnggPiBsYXlvdXRXaWR0aCAtIDE2KSB7XG4gICAgICAgICAgICAgICAgcGFuZWxDaGFuZ2UueCA9IGxheW91dFdpZHRoIC0gMTYgLSAocGFuZWwudyA+PiAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhwYW5lbENoYW5nZSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbmV3RmxvYXRDaGlsZHJlbltpXSA9IGNsb25lKHBhbmVsLCBwYW5lbENoYW5nZSk7XG4gICAgICAgICAgICAgICAgbGF5b3V0Q2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxheW91dENoYW5nZWQpIHtcbiAgICAgICAgICAgIGxldCBuZXdCb3ggPSBjbG9uZShsYXlvdXQuZmxvYXRib3gpO1xuICAgICAgICAgICAgbmV3Qm94LmNoaWxkcmVuID0gbmV3RmxvYXRDaGlsZHJlbjtcbiAgICAgICAgICAgIHJldHVybiByZXBsYWNlQm94KGxheW91dCwgbGF5b3V0LmZsb2F0Ym94LCBuZXdCb3gpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsYXlvdXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gZml4TGF5b3V0RGF0YShsYXlvdXQsIGdyb3VwcywgbG9hZFRhYikge1xuICAgIGZ1bmN0aW9uIGZpeFBhbmVsT3JCb3goZCkge1xuICAgICAgICBpZiAoZC5pZCA9PSBudWxsKSB7XG4gICAgICAgICAgICBkLmlkID0gbmV4dElkKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZC5pZC5zdGFydHNXaXRoKCcrJykpIHtcbiAgICAgICAgICAgIGxldCBpZG51bSA9IE51bWJlcihkLmlkKTtcbiAgICAgICAgICAgIGlmIChpZG51bSA+IF9pZENvdW50KSB7XG4gICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIGdlbmVyYXRlZCBpZCBpcyB1bmlxdWVcbiAgICAgICAgICAgICAgICBfaWRDb3VudCA9IGlkbnVtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghKGQuc2l6ZSA+PSAwKSkge1xuICAgICAgICAgICAgZC5zaXplID0gMjAwO1xuICAgICAgICB9XG4gICAgICAgIGQubWluV2lkdGggPSAwO1xuICAgICAgICBkLm1pbkhlaWdodCA9IDA7XG4gICAgICAgIGQud2lkdGhGbGV4ID0gbnVsbDtcbiAgICAgICAgZC5oZWlnaHRGbGV4ID0gbnVsbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZml4UGFuZWxEYXRhKHBhbmVsKSB7XG4gICAgICAgIGZpeFBhbmVsT3JCb3gocGFuZWwpO1xuICAgICAgICBsZXQgZmluZEFjdGl2ZUlkID0gZmFsc2U7XG4gICAgICAgIGlmIChsb2FkVGFiKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhbmVsLnRhYnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBwYW5lbC50YWJzW2ldID0gbG9hZFRhYihwYW5lbC50YWJzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFuZWwuZ3JvdXAgPT0gbnVsbCAmJiBwYW5lbC50YWJzLmxlbmd0aCkge1xuICAgICAgICAgICAgcGFuZWwuZ3JvdXAgPSBwYW5lbC50YWJzWzBdLmdyb3VwO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0YWJHcm91cCA9IGdyb3VwcyA9PT0gbnVsbCB8fCBncm91cHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdyb3Vwc1twYW5lbC5ncm91cF07XG4gICAgICAgIGlmICh0YWJHcm91cCkge1xuICAgICAgICAgICAgaWYgKHRhYkdyb3VwLndpZHRoRmxleCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcGFuZWwud2lkdGhGbGV4ID0gdGFiR3JvdXAud2lkdGhGbGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhYkdyb3VwLmhlaWdodEZsZXggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBhbmVsLmhlaWdodEZsZXggPSB0YWJHcm91cC5oZWlnaHRGbGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHBhbmVsLnRhYnMpIHtcbiAgICAgICAgICAgIGNoaWxkLnBhcmVudCA9IHBhbmVsO1xuICAgICAgICAgICAgaWYgKGNoaWxkLmlkID09PSBwYW5lbC5hY3RpdmVJZCkge1xuICAgICAgICAgICAgICAgIGZpbmRBY3RpdmVJZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hpbGQubWluV2lkdGggPiBwYW5lbC5taW5XaWR0aClcbiAgICAgICAgICAgICAgICBwYW5lbC5taW5XaWR0aCA9IGNoaWxkLm1pbldpZHRoO1xuICAgICAgICAgICAgaWYgKGNoaWxkLm1pbkhlaWdodCA+IHBhbmVsLm1pbkhlaWdodClcbiAgICAgICAgICAgICAgICBwYW5lbC5taW5IZWlnaHQgPSBjaGlsZC5taW5IZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmaW5kQWN0aXZlSWQgJiYgcGFuZWwudGFicy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHBhbmVsLmFjdGl2ZUlkID0gcGFuZWwudGFic1swXS5pZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFuZWwubWluV2lkdGggPD0gMCkge1xuICAgICAgICAgICAgcGFuZWwubWluV2lkdGggPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYW5lbC5taW5IZWlnaHQgPD0gMCkge1xuICAgICAgICAgICAgcGFuZWwubWluSGVpZ2h0ID0gMTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgeyBwYW5lbExvY2sgfSA9IHBhbmVsO1xuICAgICAgICBpZiAocGFuZWxMb2NrKSB7XG4gICAgICAgICAgICBpZiAocGFuZWwubWluV2lkdGggPCBwYW5lbExvY2subWluV2lkdGgpIHtcbiAgICAgICAgICAgICAgICBwYW5lbC5taW5XaWR0aCA9IHBhbmVsTG9jay5taW5XaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYW5lbC5taW5IZWlnaHQgPCBwYW5lbExvY2subWluSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgcGFuZWwubWluSGVpZ2h0ID0gcGFuZWxMb2NrLm1pbkhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYW5lbC5wYW5lbExvY2sud2lkdGhGbGV4ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBwYW5lbC53aWR0aEZsZXggPSBwYW5lbExvY2sud2lkdGhGbGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhbmVsLnBhbmVsTG9jay5oZWlnaHRGbGV4ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBwYW5lbC5oZWlnaHRGbGV4ID0gcGFuZWxMb2NrLmhlaWdodEZsZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhbmVsLnogPiBfekNvdW50KSB7XG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgbmV4dCB6SW5kZXggaXMgb24gdG9wXG4gICAgICAgICAgICBfekNvdW50ID0gcGFuZWwuejtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFuZWw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZpeEJveERhdGEoYm94KSB7XG4gICAgICAgIGZpeFBhbmVsT3JCb3goYm94KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib3guY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IGJveC5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGNoaWxkLnBhcmVudCA9IGJveDtcbiAgICAgICAgICAgIGlmICgnY2hpbGRyZW4nIGluIGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgZml4Qm94RGF0YShjaGlsZCk7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgYm94IHdpdGggbm8gY2hpbGRcbiAgICAgICAgICAgICAgICAgICAgYm94LmNoaWxkcmVuLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgLS1pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjaGlsZC5jaGlsZHJlbi5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYm94IHdpdGggb25lIGNoaWxkIHNob3VsZCBiZSBtZXJnZWQgYmFjayB0byBwYXJlbnQgYm94XG4gICAgICAgICAgICAgICAgICAgIGxldCBzdWJDaGlsZCA9IGNoaWxkLmNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3ViQ2hpbGQubW9kZSA9PT0gYm94Lm1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN1YiBjaGlsZCBpcyBhbm90aGVyIGJveCB0aGF0IGNhbiBiZSBtZXJnZWQgaW50byBjdXJyZW50IGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRvdGFsU3ViU2l6ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBzdWJzdWJDaGlsZCBvZiBzdWJDaGlsZC5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsU3ViU2l6ZSArPSBzdWJzdWJDaGlsZC5zaXplO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNpemVTY2FsZSA9IGNoaWxkLnNpemUgLyB0b3RhbFN1YlNpemU7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBzdWJzdWJDaGlsZCBvZiBzdWJDaGlsZC5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnN1YkNoaWxkLnNpemUgKj0gc2l6ZVNjYWxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWVyZ2UgY2hpbGRyZW4gdXBcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveC5jaGlsZHJlbi5zcGxpY2UoaSwgMSwgLi4uc3ViQ2hpbGQuY2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3ViIGNoaWxkIGNhbiBiZSBtb3ZlZCB1cCBvbmUgbGF5ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YkNoaWxkLnNpemUgPSBjaGlsZC5zaXplO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm94LmNoaWxkcmVuW2ldID0gc3ViQ2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLS1pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCd0YWJzJyBpbiBjaGlsZCkge1xuICAgICAgICAgICAgICAgIGZpeFBhbmVsRGF0YShjaGlsZCk7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLnRhYnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBwYW5lbCB3aXRoIG5vIHRhYlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoaWxkLnBhbmVsTG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm94LmNoaWxkcmVuLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC0taTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjaGlsZC5ncm91cCA9PT0gcGxhY2VIb2xkZXJTdHlsZSAmJiAoYm94LmNoaWxkcmVuLmxlbmd0aCA+IDEgfHwgYm94LnBhcmVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBwbGFjZUhvbGRlciBHcm91cFxuICAgICAgICAgICAgICAgICAgICAgICAgYm94LmNoaWxkcmVuLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC0taTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG1lcmdlIG1pbiBzaXplXG4gICAgICAgICAgICBzd2l0Y2ggKGJveC5tb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnaG9yaXpvbnRhbCc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5taW5XaWR0aCA+IDApXG4gICAgICAgICAgICAgICAgICAgICAgICBib3gubWluV2lkdGggKz0gY2hpbGQubWluV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5taW5IZWlnaHQgPiBib3gubWluSGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAgICAgYm94Lm1pbkhlaWdodCA9IGNoaWxkLm1pbkhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkLndpZHRoRmxleCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3gud2lkdGhGbGV4ID0gbWF4RmxleChib3gud2lkdGhGbGV4LCBjaGlsZC53aWR0aEZsZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5oZWlnaHRGbGV4ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveC5oZWlnaHRGbGV4ID0gbWVyZ2VGbGV4KGJveC5oZWlnaHRGbGV4LCBjaGlsZC5oZWlnaHRGbGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd2ZXJ0aWNhbCc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5taW5XaWR0aCA+IGJveC5taW5XaWR0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveC5taW5XaWR0aCA9IGNoaWxkLm1pbldpZHRoO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQubWluSGVpZ2h0ID4gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveC5taW5IZWlnaHQgKz0gY2hpbGQubWluSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQuaGVpZ2h0RmxleCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3guaGVpZ2h0RmxleCA9IG1heEZsZXgoYm94LmhlaWdodEZsZXgsIGNoaWxkLmhlaWdodEZsZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC53aWR0aEZsZXggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm94LndpZHRoRmxleCA9IG1lcmdlRmxleChib3gud2lkdGhGbGV4LCBjaGlsZC53aWR0aEZsZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGFkZCBkaXZpZGVyIHNpemVcbiAgICAgICAgaWYgKGJveC5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGJveC5tb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnaG9yaXpvbnRhbCc6XG4gICAgICAgICAgICAgICAgICAgIGJveC5taW5XaWR0aCArPSAoYm94LmNoaWxkcmVuLmxlbmd0aCAtIDEpICogNDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndmVydGljYWwnOlxuICAgICAgICAgICAgICAgICAgICBib3gubWluSGVpZ2h0ICs9IChib3guY2hpbGRyZW4ubGVuZ3RoIC0gMSkgKiA0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYm94O1xuICAgIH1cbiAgICBpZiAobGF5b3V0LmZsb2F0Ym94KSB7XG4gICAgICAgIGxheW91dC5mbG9hdGJveC5tb2RlID0gJ2Zsb2F0JztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxheW91dC5mbG9hdGJveCA9IHsgbW9kZTogJ2Zsb2F0JywgY2hpbGRyZW46IFtdLCBzaXplOiAxIH07XG4gICAgfVxuICAgIGlmIChsYXlvdXQud2luZG93Ym94KSB7XG4gICAgICAgIGxheW91dC53aW5kb3dib3gubW9kZSA9ICd3aW5kb3cnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGF5b3V0LndpbmRvd2JveCA9IHsgbW9kZTogJ3dpbmRvdycsIGNoaWxkcmVuOiBbXSwgc2l6ZTogMSB9O1xuICAgIH1cbiAgICBpZiAobGF5b3V0Lm1heGJveCkge1xuICAgICAgICBsYXlvdXQubWF4Ym94Lm1vZGUgPSAnbWF4aW1pemUnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGF5b3V0Lm1heGJveCA9IHsgbW9kZTogJ21heGltaXplJywgY2hpbGRyZW46IFtdLCBzaXplOiAxIH07XG4gICAgfVxuICAgIGZpeEJveERhdGEobGF5b3V0LmRvY2tib3gpO1xuICAgIGZpeEJveERhdGEobGF5b3V0LmZsb2F0Ym94KTtcbiAgICBmaXhCb3hEYXRhKGxheW91dC53aW5kb3dib3gpO1xuICAgIGZpeEJveERhdGEobGF5b3V0Lm1heGJveCk7XG4gICAgaWYgKGxheW91dC5kb2NrYm94LmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBhZGQgcGxhY2UgaG9sZGVyIHBhbmVsIHdoZW4gcm9vdCBib3ggaXMgZW1wdHlcbiAgICAgICAgbGV0IG5ld1BhbmVsID0geyBpZDogJyswJywgZ3JvdXA6IHBsYWNlSG9sZGVyU3R5bGUsIHBhbmVsTG9jazoge30sIHNpemU6IDIwMCwgdGFiczogW10gfTtcbiAgICAgICAgbmV3UGFuZWwucGFyZW50ID0gbGF5b3V0LmRvY2tib3g7XG4gICAgICAgIGxheW91dC5kb2NrYm94LmNoaWxkcmVuLnB1c2gobmV3UGFuZWwpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gbWVyZ2UgYW5kIHJlcGxhY2Ugcm9vdCBib3ggd2hlbiBib3ggaGFzIG9ubHkgb25lIGNoaWxkXG4gICAgICAgIHdoaWxlIChsYXlvdXQuZG9ja2JveC5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiYgJ2NoaWxkcmVuJyBpbiBsYXlvdXQuZG9ja2JveC5jaGlsZHJlblswXSkge1xuICAgICAgICAgICAgbGV0IG5ld0RvY2tCb3ggPSBjbG9uZShsYXlvdXQuZG9ja2JveC5jaGlsZHJlblswXSk7XG4gICAgICAgICAgICBsYXlvdXQuZG9ja2JveCA9IG5ld0RvY2tCb3g7XG4gICAgICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBuZXdEb2NrQm94LmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgY2hpbGQucGFyZW50ID0gbmV3RG9ja0JveDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsYXlvdXQuZG9ja2JveC5wYXJlbnQgPSBudWxsO1xuICAgIGxheW91dC5mbG9hdGJveC5wYXJlbnQgPSBudWxsO1xuICAgIGxheW91dC53aW5kb3dib3gucGFyZW50ID0gbnVsbDtcbiAgICBsYXlvdXQubWF4Ym94LnBhcmVudCA9IG51bGw7XG4gICAgY2xlYXJPYmplY3RDYWNoZSgpO1xuICAgIHJldHVybiBsYXlvdXQ7XG59XG5mdW5jdGlvbiByZXBsYWNlUGFuZWwobGF5b3V0LCBwYW5lbCwgbmV3UGFuZWwpIHtcbiAgICBmb3IgKGxldCB0YWIgb2YgbmV3UGFuZWwudGFicykge1xuICAgICAgICB0YWIucGFyZW50ID0gbmV3UGFuZWw7XG4gICAgfVxuICAgIGxldCBib3ggPSBwYW5lbC5wYXJlbnQ7XG4gICAgaWYgKGJveCkge1xuICAgICAgICBsZXQgcG9zID0gYm94LmNoaWxkcmVuLmluZGV4T2YocGFuZWwpO1xuICAgICAgICBpZiAocG9zID49IDApIHtcbiAgICAgICAgICAgIGxldCBuZXdCb3ggPSBjbG9uZShib3gpO1xuICAgICAgICAgICAgbmV3Qm94LmNoaWxkcmVuW3Bvc10gPSBuZXdQYW5lbDtcbiAgICAgICAgICAgIHJldHVybiByZXBsYWNlQm94KGxheW91dCwgYm94LCBuZXdCb3gpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsYXlvdXQ7XG59XG5mdW5jdGlvbiByZXBsYWNlQm94KGxheW91dCwgYm94LCBuZXdCb3gpIHtcbiAgICBmb3IgKGxldCBjaGlsZCBvZiBuZXdCb3guY2hpbGRyZW4pIHtcbiAgICAgICAgY2hpbGQucGFyZW50ID0gbmV3Qm94O1xuICAgIH1cbiAgICBsZXQgcGFyZW50Qm94ID0gYm94LnBhcmVudDtcbiAgICBpZiAocGFyZW50Qm94KSB7XG4gICAgICAgIGxldCBwb3MgPSBwYXJlbnRCb3guY2hpbGRyZW4uaW5kZXhPZihib3gpO1xuICAgICAgICBpZiAocG9zID49IDApIHtcbiAgICAgICAgICAgIGxldCBuZXdQYXJlbnRCb3ggPSBjbG9uZShwYXJlbnRCb3gpO1xuICAgICAgICAgICAgbmV3UGFyZW50Qm94LmNoaWxkcmVuW3Bvc10gPSBuZXdCb3g7XG4gICAgICAgICAgICByZXR1cm4gcmVwbGFjZUJveChsYXlvdXQsIHBhcmVudEJveCwgbmV3UGFyZW50Qm94KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKGJveC5pZCA9PT0gbGF5b3V0LmRvY2tib3guaWQgfHwgYm94ID09PSBsYXlvdXQuZG9ja2JveCkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbGF5b3V0KSwgeyBkb2NrYm94OiBuZXdCb3ggfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYm94LmlkID09PSBsYXlvdXQuZmxvYXRib3guaWQgfHwgYm94ID09PSBsYXlvdXQuZmxvYXRib3gpIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxheW91dCksIHsgZmxvYXRib3g6IG5ld0JveCB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChib3guaWQgPT09IGxheW91dC53aW5kb3dib3guaWQgfHwgYm94ID09PSBsYXlvdXQud2luZG93Ym94KSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsYXlvdXQpLCB7IHdpbmRvd2JveDogbmV3Qm94IH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGJveC5pZCA9PT0gbGF5b3V0Lm1heGJveC5pZCB8fCBib3ggPT09IGxheW91dC5tYXhib3gpIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxheW91dCksIHsgbWF4Ym94OiBuZXdCb3ggfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxheW91dDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRGbG9hdFBhbmVsU2l6ZShwYW5lbCwgdGFiR3JvdXApIHtcbiAgICBpZiAoIXBhbmVsKSB7XG4gICAgICAgIHJldHVybiBbMzAwLCAzMDBdO1xuICAgIH1cbiAgICBsZXQgcGFuZWxXaWR0aCA9IHBhbmVsLm9mZnNldFdpZHRoO1xuICAgIGxldCBwYW5lbEhlaWdodCA9IHBhbmVsLm9mZnNldEhlaWdodDtcbiAgICBsZXQgW21pbldpZHRoLCBtYXhXaWR0aF0gPSB0YWJHcm91cC5wcmVmZXJyZWRGbG9hdFdpZHRoIHx8IFsxMDAsIDYwMF07XG4gICAgbGV0IFttaW5IZWlnaHQsIG1heEhlaWdodF0gPSB0YWJHcm91cC5wcmVmZXJyZWRGbG9hdEhlaWdodCB8fCBbNTAsIDUwMF07XG4gICAgaWYgKCEocGFuZWxXaWR0aCA+PSBtaW5XaWR0aCkpIHtcbiAgICAgICAgcGFuZWxXaWR0aCA9IG1pbldpZHRoO1xuICAgIH1cbiAgICBlbHNlIGlmICghKHBhbmVsV2lkdGggPD0gbWF4V2lkdGgpKSB7XG4gICAgICAgIHBhbmVsV2lkdGggPSBtYXhXaWR0aDtcbiAgICB9XG4gICAgaWYgKCEocGFuZWxIZWlnaHQgPj0gbWluSGVpZ2h0KSkge1xuICAgICAgICBwYW5lbEhlaWdodCA9IG1pbkhlaWdodDtcbiAgICB9XG4gICAgZWxzZSBpZiAoIShwYW5lbEhlaWdodCA8PSBtYXhIZWlnaHQpKSB7XG4gICAgICAgIHBhbmVsSGVpZ2h0ID0gbWF4SGVpZ2h0O1xuICAgIH1cbiAgICByZXR1cm4gW3BhbmVsV2lkdGgsIHBhbmVsSGVpZ2h0XTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTmVhcmVzdFBhbmVsKHJlY3RGcm9tLCByZWN0VG8sIGRpcmVjdGlvbikge1xuICAgIGxldCBkaXN0YW5jZSA9IC0xO1xuICAgIGxldCBvdmVybGFwID0gLTE7XG4gICAgbGV0IGFsaWdubWVudCA9IDA7XG4gICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgICAgY2FzZSAnQXJyb3dVcCc6IHtcbiAgICAgICAgICAgIGRpc3RhbmNlID0gcmVjdEZyb20udG9wIC0gcmVjdFRvLmJvdHRvbSArIHJlY3RGcm9tLmhlaWdodDtcbiAgICAgICAgICAgIG92ZXJsYXAgPSBNYXRoLm1pbihyZWN0RnJvbS5yaWdodCwgcmVjdFRvLnJpZ2h0KSAtIE1hdGgubWF4KHJlY3RGcm9tLmxlZnQsIHJlY3RUby5sZWZ0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ0Fycm93RG93bic6IHtcbiAgICAgICAgICAgIGRpc3RhbmNlID0gcmVjdFRvLnRvcCAtIHJlY3RGcm9tLmJvdHRvbSArIHJlY3RGcm9tLmhlaWdodDtcbiAgICAgICAgICAgIG92ZXJsYXAgPSBNYXRoLm1pbihyZWN0RnJvbS5yaWdodCwgcmVjdFRvLnJpZ2h0KSAtIE1hdGgubWF4KHJlY3RGcm9tLmxlZnQsIHJlY3RUby5sZWZ0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ0Fycm93TGVmdCc6IHtcbiAgICAgICAgICAgIGRpc3RhbmNlID0gcmVjdEZyb20ubGVmdCAtIHJlY3RUby5yaWdodCArIHJlY3RGcm9tLndpZHRoO1xuICAgICAgICAgICAgb3ZlcmxhcCA9IE1hdGgubWluKHJlY3RGcm9tLmJvdHRvbSwgcmVjdFRvLmJvdHRvbSkgLSBNYXRoLm1heChyZWN0RnJvbS50b3AsIHJlY3RUby50b3ApO1xuICAgICAgICAgICAgYWxpZ25tZW50ID0gTWF0aC5hYnMocmVjdEZyb20udG9wIC0gcmVjdFRvLnRvcCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdBcnJvd1JpZ2h0Jzoge1xuICAgICAgICAgICAgZGlzdGFuY2UgPSByZWN0VG8ubGVmdCAtIHJlY3RGcm9tLnJpZ2h0ICsgcmVjdEZyb20ud2lkdGg7XG4gICAgICAgICAgICBvdmVybGFwID0gTWF0aC5taW4ocmVjdEZyb20uYm90dG9tLCByZWN0VG8uYm90dG9tKSAtIE1hdGgubWF4KHJlY3RGcm9tLnRvcCwgcmVjdFRvLnRvcCk7XG4gICAgICAgICAgICBhbGlnbm1lbnQgPSBNYXRoLmFicyhyZWN0RnJvbS50b3AgLSByZWN0VG8udG9wKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChkaXN0YW5jZSA8IDAgfHwgb3ZlcmxhcCA8PSAwKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgcmV0dXJuIGRpc3RhbmNlICogKGFsaWdubWVudCArIDEpIC0gb3ZlcmxhcCAqIDAuMDAxO1xufVxuIiwiLy8gTk9URTogdGhpcyBsaXN0IG11c3QgYmUgdXAtdG8tZGF0ZSB3aXRoIGJyb3dzZXJzIGxpc3RlZCBpblxuLy8gdGVzdC9hY2NlcHRhbmNlL3VzZXJhZ2VudHN0cmluZ3MueW1sXG5leHBvcnQgY29uc3QgQlJPV1NFUl9BTElBU0VTX01BUCA9IHtcbiAgJ0FtYXpvbiBTaWxrJzogJ2FtYXpvbl9zaWxrJyxcbiAgJ0FuZHJvaWQgQnJvd3Nlcic6ICdhbmRyb2lkJyxcbiAgQmFkYTogJ2JhZGEnLFxuICBCbGFja0JlcnJ5OiAnYmxhY2tiZXJyeScsXG4gIENocm9tZTogJ2Nocm9tZScsXG4gIENocm9taXVtOiAnY2hyb21pdW0nLFxuICBFbGVjdHJvbjogJ2VsZWN0cm9uJyxcbiAgRXBpcGhhbnk6ICdlcGlwaGFueScsXG4gIEZpcmVmb3g6ICdmaXJlZm94JyxcbiAgRm9jdXM6ICdmb2N1cycsXG4gIEdlbmVyaWM6ICdnZW5lcmljJyxcbiAgJ0dvb2dsZSBTZWFyY2gnOiAnZ29vZ2xlX3NlYXJjaCcsXG4gIEdvb2dsZWJvdDogJ2dvb2dsZWJvdCcsXG4gICdJbnRlcm5ldCBFeHBsb3Jlcic6ICdpZScsXG4gICdLLU1lbGVvbic6ICdrX21lbGVvbicsXG4gIE1heHRob246ICdtYXh0aG9uJyxcbiAgJ01pY3Jvc29mdCBFZGdlJzogJ2VkZ2UnLFxuICAnTVogQnJvd3Nlcic6ICdteicsXG4gICdOQVZFUiBXaGFsZSBCcm93c2VyJzogJ25hdmVyJyxcbiAgT3BlcmE6ICdvcGVyYScsXG4gICdPcGVyYSBDb2FzdCc6ICdvcGVyYV9jb2FzdCcsXG4gIFBoYW50b21KUzogJ3BoYW50b21qcycsXG4gIFB1ZmZpbjogJ3B1ZmZpbicsXG4gIFF1cFppbGxhOiAncXVwemlsbGEnLFxuICBRUTogJ3FxJyxcbiAgUVFMaXRlOiAncXFsaXRlJyxcbiAgU2FmYXJpOiAnc2FmYXJpJyxcbiAgU2FpbGZpc2g6ICdzYWlsZmlzaCcsXG4gICdTYW1zdW5nIEludGVybmV0IGZvciBBbmRyb2lkJzogJ3NhbXN1bmdfaW50ZXJuZXQnLFxuICBTZWFNb25rZXk6ICdzZWFtb25rZXknLFxuICBTbGVpcG5pcjogJ3NsZWlwbmlyJyxcbiAgU3dpbmc6ICdzd2luZycsXG4gIFRpemVuOiAndGl6ZW4nLFxuICAnVUMgQnJvd3Nlcic6ICd1YycsXG4gIFZpdmFsZGk6ICd2aXZhbGRpJyxcbiAgJ1dlYk9TIEJyb3dzZXInOiAnd2Vib3MnLFxuICBXZUNoYXQ6ICd3ZWNoYXQnLFxuICAnWWFuZGV4IEJyb3dzZXInOiAneWFuZGV4JyxcbiAgUm9rdTogJ3Jva3UnLFxufTtcblxuZXhwb3J0IGNvbnN0IEJST1dTRVJfTUFQID0ge1xuICBhbWF6b25fc2lsazogJ0FtYXpvbiBTaWxrJyxcbiAgYW5kcm9pZDogJ0FuZHJvaWQgQnJvd3NlcicsXG4gIGJhZGE6ICdCYWRhJyxcbiAgYmxhY2tiZXJyeTogJ0JsYWNrQmVycnknLFxuICBjaHJvbWU6ICdDaHJvbWUnLFxuICBjaHJvbWl1bTogJ0Nocm9taXVtJyxcbiAgZWxlY3Ryb246ICdFbGVjdHJvbicsXG4gIGVwaXBoYW55OiAnRXBpcGhhbnknLFxuICBmaXJlZm94OiAnRmlyZWZveCcsXG4gIGZvY3VzOiAnRm9jdXMnLFxuICBnZW5lcmljOiAnR2VuZXJpYycsXG4gIGdvb2dsZWJvdDogJ0dvb2dsZWJvdCcsXG4gIGdvb2dsZV9zZWFyY2g6ICdHb29nbGUgU2VhcmNoJyxcbiAgaWU6ICdJbnRlcm5ldCBFeHBsb3JlcicsXG4gIGtfbWVsZW9uOiAnSy1NZWxlb24nLFxuICBtYXh0aG9uOiAnTWF4dGhvbicsXG4gIGVkZ2U6ICdNaWNyb3NvZnQgRWRnZScsXG4gIG16OiAnTVogQnJvd3NlcicsXG4gIG5hdmVyOiAnTkFWRVIgV2hhbGUgQnJvd3NlcicsXG4gIG9wZXJhOiAnT3BlcmEnLFxuICBvcGVyYV9jb2FzdDogJ09wZXJhIENvYXN0JyxcbiAgcGhhbnRvbWpzOiAnUGhhbnRvbUpTJyxcbiAgcHVmZmluOiAnUHVmZmluJyxcbiAgcXVwemlsbGE6ICdRdXBaaWxsYScsXG4gIHFxOiAnUVEgQnJvd3NlcicsXG4gIHFxbGl0ZTogJ1FRIEJyb3dzZXIgTGl0ZScsXG4gIHNhZmFyaTogJ1NhZmFyaScsXG4gIHNhaWxmaXNoOiAnU2FpbGZpc2gnLFxuICBzYW1zdW5nX2ludGVybmV0OiAnU2Ftc3VuZyBJbnRlcm5ldCBmb3IgQW5kcm9pZCcsXG4gIHNlYW1vbmtleTogJ1NlYU1vbmtleScsXG4gIHNsZWlwbmlyOiAnU2xlaXBuaXInLFxuICBzd2luZzogJ1N3aW5nJyxcbiAgdGl6ZW46ICdUaXplbicsXG4gIHVjOiAnVUMgQnJvd3NlcicsXG4gIHZpdmFsZGk6ICdWaXZhbGRpJyxcbiAgd2Vib3M6ICdXZWJPUyBCcm93c2VyJyxcbiAgd2VjaGF0OiAnV2VDaGF0JyxcbiAgeWFuZGV4OiAnWWFuZGV4IEJyb3dzZXInLFxufTtcblxuZXhwb3J0IGNvbnN0IFBMQVRGT1JNU19NQVAgPSB7XG4gIHRhYmxldDogJ3RhYmxldCcsXG4gIG1vYmlsZTogJ21vYmlsZScsXG4gIGRlc2t0b3A6ICdkZXNrdG9wJyxcbiAgdHY6ICd0dicsXG59O1xuXG5leHBvcnQgY29uc3QgT1NfTUFQID0ge1xuICBXaW5kb3dzUGhvbmU6ICdXaW5kb3dzIFBob25lJyxcbiAgV2luZG93czogJ1dpbmRvd3MnLFxuICBNYWNPUzogJ21hY09TJyxcbiAgaU9TOiAnaU9TJyxcbiAgQW5kcm9pZDogJ0FuZHJvaWQnLFxuICBXZWJPUzogJ1dlYk9TJyxcbiAgQmxhY2tCZXJyeTogJ0JsYWNrQmVycnknLFxuICBCYWRhOiAnQmFkYScsXG4gIFRpemVuOiAnVGl6ZW4nLFxuICBMaW51eDogJ0xpbnV4JyxcbiAgQ2hyb21lT1M6ICdDaHJvbWUgT1MnLFxuICBQbGF5U3RhdGlvbjQ6ICdQbGF5U3RhdGlvbiA0JyxcbiAgUm9rdTogJ1Jva3UnLFxufTtcblxuZXhwb3J0IGNvbnN0IEVOR0lORV9NQVAgPSB7XG4gIEVkZ2VIVE1MOiAnRWRnZUhUTUwnLFxuICBCbGluazogJ0JsaW5rJyxcbiAgVHJpZGVudDogJ1RyaWRlbnQnLFxuICBQcmVzdG86ICdQcmVzdG8nLFxuICBHZWNrbzogJ0dlY2tvJyxcbiAgV2ViS2l0OiAnV2ViS2l0Jyxcbn07XG4iLCJpbXBvcnQgeyBCUk9XU0VSX01BUCwgQlJPV1NFUl9BTElBU0VTX01BUCB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXRpbHMge1xuICAvKipcbiAgICogR2V0IGZpcnN0IG1hdGNoZWQgaXRlbSBmb3IgYSBzdHJpbmdcbiAgICogQHBhcmFtIHtSZWdFeHB9IHJlZ2V4cFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdWFcbiAgICogQHJldHVybiB7QXJyYXl8e2luZGV4OiBudW1iZXIsIGlucHV0OiBzdHJpbmd9fCp8Ym9vbGVhbnxzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0Rmlyc3RNYXRjaChyZWdleHAsIHVhKSB7XG4gICAgY29uc3QgbWF0Y2ggPSB1YS5tYXRjaChyZWdleHApO1xuICAgIHJldHVybiAobWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID4gMCAmJiBtYXRjaFsxXSkgfHwgJyc7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHNlY29uZCBtYXRjaGVkIGl0ZW0gZm9yIGEgc3RyaW5nXG4gICAqIEBwYXJhbSByZWdleHBcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVhXG4gICAqIEByZXR1cm4ge0FycmF5fHtpbmRleDogbnVtYmVyLCBpbnB1dDogc3RyaW5nfXwqfGJvb2xlYW58c3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldFNlY29uZE1hdGNoKHJlZ2V4cCwgdWEpIHtcbiAgICBjb25zdCBtYXRjaCA9IHVhLm1hdGNoKHJlZ2V4cCk7XG4gICAgcmV0dXJuIChtYXRjaCAmJiBtYXRjaC5sZW5ndGggPiAxICYmIG1hdGNoWzJdKSB8fCAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXRjaCBhIHJlZ2V4cCBhbmQgcmV0dXJuIGEgY29uc3RhbnQgb3IgdW5kZWZpbmVkXG4gICAqIEBwYXJhbSB7UmVnRXhwfSByZWdleHBcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVhXG4gICAqIEBwYXJhbSB7Kn0gX2NvbnN0IEFueSBjb25zdCB0aGF0IHdpbGwgYmUgcmV0dXJuZWQgaWYgcmVnZXhwIG1hdGNoZXMgdGhlIHN0cmluZ1xuICAgKiBAcmV0dXJuIHsqfVxuICAgKi9cbiAgc3RhdGljIG1hdGNoQW5kUmV0dXJuQ29uc3QocmVnZXhwLCB1YSwgX2NvbnN0KSB7XG4gICAgaWYgKHJlZ2V4cC50ZXN0KHVhKSkge1xuICAgICAgcmV0dXJuIF9jb25zdDtcbiAgICB9XG4gICAgcmV0dXJuIHZvaWQgKDApO1xuICB9XG5cbiAgc3RhdGljIGdldFdpbmRvd3NWZXJzaW9uTmFtZSh2ZXJzaW9uKSB7XG4gICAgc3dpdGNoICh2ZXJzaW9uKSB7XG4gICAgICBjYXNlICdOVCc6IHJldHVybiAnTlQnO1xuICAgICAgY2FzZSAnWFAnOiByZXR1cm4gJ1hQJztcbiAgICAgIGNhc2UgJ05UIDUuMCc6IHJldHVybiAnMjAwMCc7XG4gICAgICBjYXNlICdOVCA1LjEnOiByZXR1cm4gJ1hQJztcbiAgICAgIGNhc2UgJ05UIDUuMic6IHJldHVybiAnMjAwMyc7XG4gICAgICBjYXNlICdOVCA2LjAnOiByZXR1cm4gJ1Zpc3RhJztcbiAgICAgIGNhc2UgJ05UIDYuMSc6IHJldHVybiAnNyc7XG4gICAgICBjYXNlICdOVCA2LjInOiByZXR1cm4gJzgnO1xuICAgICAgY2FzZSAnTlQgNi4zJzogcmV0dXJuICc4LjEnO1xuICAgICAgY2FzZSAnTlQgMTAuMCc6IHJldHVybiAnMTAnO1xuICAgICAgZGVmYXVsdDogcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IG1hY09TIHZlcnNpb24gbmFtZVxuICAgKiAgICAxMC41IC0gTGVvcGFyZFxuICAgKiAgICAxMC42IC0gU25vdyBMZW9wYXJkXG4gICAqICAgIDEwLjcgLSBMaW9uXG4gICAqICAgIDEwLjggLSBNb3VudGFpbiBMaW9uXG4gICAqICAgIDEwLjkgLSBNYXZlcmlja3NcbiAgICogICAgMTAuMTAgLSBZb3NlbWl0ZVxuICAgKiAgICAxMC4xMSAtIEVsIENhcGl0YW5cbiAgICogICAgMTAuMTIgLSBTaWVycmFcbiAgICogICAgMTAuMTMgLSBIaWdoIFNpZXJyYVxuICAgKiAgICAxMC4xNCAtIE1vamF2ZVxuICAgKiAgICAxMC4xNSAtIENhdGFsaW5hXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAgZ2V0TWFjT1NWZXJzaW9uTmFtZShcIjEwLjE0XCIpIC8vICdNb2phdmUnXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ30gdmVyc2lvblxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IHZlcnNpb25OYW1lXG4gICAqL1xuICBzdGF0aWMgZ2V0TWFjT1NWZXJzaW9uTmFtZSh2ZXJzaW9uKSB7XG4gICAgY29uc3QgdiA9IHZlcnNpb24uc3BsaXQoJy4nKS5zcGxpY2UoMCwgMikubWFwKHMgPT4gcGFyc2VJbnQocywgMTApIHx8IDApO1xuICAgIHYucHVzaCgwKTtcbiAgICBpZiAodlswXSAhPT0gMTApIHJldHVybiB1bmRlZmluZWQ7XG4gICAgc3dpdGNoICh2WzFdKSB7XG4gICAgICBjYXNlIDU6IHJldHVybiAnTGVvcGFyZCc7XG4gICAgICBjYXNlIDY6IHJldHVybiAnU25vdyBMZW9wYXJkJztcbiAgICAgIGNhc2UgNzogcmV0dXJuICdMaW9uJztcbiAgICAgIGNhc2UgODogcmV0dXJuICdNb3VudGFpbiBMaW9uJztcbiAgICAgIGNhc2UgOTogcmV0dXJuICdNYXZlcmlja3MnO1xuICAgICAgY2FzZSAxMDogcmV0dXJuICdZb3NlbWl0ZSc7XG4gICAgICBjYXNlIDExOiByZXR1cm4gJ0VsIENhcGl0YW4nO1xuICAgICAgY2FzZSAxMjogcmV0dXJuICdTaWVycmEnO1xuICAgICAgY2FzZSAxMzogcmV0dXJuICdIaWdoIFNpZXJyYSc7XG4gICAgICBjYXNlIDE0OiByZXR1cm4gJ01vamF2ZSc7XG4gICAgICBjYXNlIDE1OiByZXR1cm4gJ0NhdGFsaW5hJztcbiAgICAgIGRlZmF1bHQ6IHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBBbmRyb2lkIHZlcnNpb24gbmFtZVxuICAgKiAgICAxLjUgLSBDdXBjYWtlXG4gICAqICAgIDEuNiAtIERvbnV0XG4gICAqICAgIDIuMCAtIEVjbGFpclxuICAgKiAgICAyLjEgLSBFY2xhaXJcbiAgICogICAgMi4yIC0gRnJveW9cbiAgICogICAgMi54IC0gR2luZ2VyYnJlYWRcbiAgICogICAgMy54IC0gSG9uZXljb21iXG4gICAqICAgIDQuMCAtIEljZSBDcmVhbSBTYW5kd2ljaFxuICAgKiAgICA0LjEgLSBKZWxseSBCZWFuXG4gICAqICAgIDQuNCAtIEtpdEthdFxuICAgKiAgICA1LnggLSBMb2xsaXBvcFxuICAgKiAgICA2LnggLSBNYXJzaG1hbGxvd1xuICAgKiAgICA3LnggLSBOb3VnYXRcbiAgICogICAgOC54IC0gT3Jlb1xuICAgKiAgICA5LnggLSBQaWVcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogICBnZXRBbmRyb2lkVmVyc2lvbk5hbWUoXCI3LjBcIikgLy8gJ05vdWdhdCdcbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSB2ZXJzaW9uXG4gICAqIEByZXR1cm4ge3N0cmluZ30gdmVyc2lvbk5hbWVcbiAgICovXG4gIHN0YXRpYyBnZXRBbmRyb2lkVmVyc2lvbk5hbWUodmVyc2lvbikge1xuICAgIGNvbnN0IHYgPSB2ZXJzaW9uLnNwbGl0KCcuJykuc3BsaWNlKDAsIDIpLm1hcChzID0+IHBhcnNlSW50KHMsIDEwKSB8fCAwKTtcbiAgICB2LnB1c2goMCk7XG4gICAgaWYgKHZbMF0gPT09IDEgJiYgdlsxXSA8IDUpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgaWYgKHZbMF0gPT09IDEgJiYgdlsxXSA8IDYpIHJldHVybiAnQ3VwY2FrZSc7XG4gICAgaWYgKHZbMF0gPT09IDEgJiYgdlsxXSA+PSA2KSByZXR1cm4gJ0RvbnV0JztcbiAgICBpZiAodlswXSA9PT0gMiAmJiB2WzFdIDwgMikgcmV0dXJuICdFY2xhaXInO1xuICAgIGlmICh2WzBdID09PSAyICYmIHZbMV0gPT09IDIpIHJldHVybiAnRnJveW8nO1xuICAgIGlmICh2WzBdID09PSAyICYmIHZbMV0gPiAyKSByZXR1cm4gJ0dpbmdlcmJyZWFkJztcbiAgICBpZiAodlswXSA9PT0gMykgcmV0dXJuICdIb25leWNvbWInO1xuICAgIGlmICh2WzBdID09PSA0ICYmIHZbMV0gPCAxKSByZXR1cm4gJ0ljZSBDcmVhbSBTYW5kd2ljaCc7XG4gICAgaWYgKHZbMF0gPT09IDQgJiYgdlsxXSA8IDQpIHJldHVybiAnSmVsbHkgQmVhbic7XG4gICAgaWYgKHZbMF0gPT09IDQgJiYgdlsxXSA+PSA0KSByZXR1cm4gJ0tpdEthdCc7XG4gICAgaWYgKHZbMF0gPT09IDUpIHJldHVybiAnTG9sbGlwb3AnO1xuICAgIGlmICh2WzBdID09PSA2KSByZXR1cm4gJ01hcnNobWFsbG93JztcbiAgICBpZiAodlswXSA9PT0gNykgcmV0dXJuICdOb3VnYXQnO1xuICAgIGlmICh2WzBdID09PSA4KSByZXR1cm4gJ09yZW8nO1xuICAgIGlmICh2WzBdID09PSA5KSByZXR1cm4gJ1BpZSc7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdmVyc2lvbiBwcmVjaXNpb25zIGNvdW50XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAgZ2V0VmVyc2lvblByZWNpc2lvbihcIjEuMTAuM1wiKSAvLyAzXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ30gdmVyc2lvblxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBzdGF0aWMgZ2V0VmVyc2lvblByZWNpc2lvbih2ZXJzaW9uKSB7XG4gICAgcmV0dXJuIHZlcnNpb24uc3BsaXQoJy4nKS5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIGJyb3dzZXIgdmVyc2lvbiB3ZWlnaHRcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogICBjb21wYXJlVmVyc2lvbnMoJzEuMTAuMi4xJywgICcxLjguMi4xLjkwJykgICAgLy8gMVxuICAgKiAgIGNvbXBhcmVWZXJzaW9ucygnMS4wMTAuMi4xJywgJzEuMDkuMi4xLjkwJyk7ICAvLyAxXG4gICAqICAgY29tcGFyZVZlcnNpb25zKCcxLjEwLjIuMScsICAnMS4xMC4yLjEnKTsgICAgIC8vIDBcbiAgICogICBjb21wYXJlVmVyc2lvbnMoJzEuMTAuMi4xJywgICcxLjA4MDAuMicpOyAgICAgLy8gLTFcbiAgICogICBjb21wYXJlVmVyc2lvbnMoJzEuMTAuMi4xJywgICcxLjEwJywgIHRydWUpOyAgLy8gMFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdmVyc2lvbkEgdmVyc2lvbnMgdmVyc2lvbnMgdG8gY29tcGFyZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdmVyc2lvbkIgdmVyc2lvbnMgdmVyc2lvbnMgdG8gY29tcGFyZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0xvb3NlXSBlbmFibGUgbG9vc2UgY29tcGFyaXNvblxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9IGNvbXBhcmlzb24gcmVzdWx0OiAtMSB3aGVuIHZlcnNpb25BIGlzIGxvd2VyLFxuICAgKiAxIHdoZW4gdmVyc2lvbkEgaXMgYmlnZ2VyLCAwIHdoZW4gYm90aCBlcXVhbFxuICAgKi9cbiAgLyogZXNsaW50IGNvbnNpc3RlbnQtcmV0dXJuOiAxICovXG4gIHN0YXRpYyBjb21wYXJlVmVyc2lvbnModmVyc2lvbkEsIHZlcnNpb25CLCBpc0xvb3NlID0gZmFsc2UpIHtcbiAgICAvLyAxKSBnZXQgY29tbW9uIHByZWNpc2lvbiBmb3IgYm90aCB2ZXJzaW9ucywgZm9yIGV4YW1wbGUgZm9yIFwiMTAuMFwiIGFuZCBcIjlcIiBpdCBzaG91bGQgYmUgMlxuICAgIGNvbnN0IHZlcnNpb25BUHJlY2lzaW9uID0gVXRpbHMuZ2V0VmVyc2lvblByZWNpc2lvbih2ZXJzaW9uQSk7XG4gICAgY29uc3QgdmVyc2lvbkJQcmVjaXNpb24gPSBVdGlscy5nZXRWZXJzaW9uUHJlY2lzaW9uKHZlcnNpb25CKTtcblxuICAgIGxldCBwcmVjaXNpb24gPSBNYXRoLm1heCh2ZXJzaW9uQVByZWNpc2lvbiwgdmVyc2lvbkJQcmVjaXNpb24pO1xuICAgIGxldCBsYXN0UHJlY2lzaW9uID0gMDtcblxuICAgIGNvbnN0IGNodW5rcyA9IFV0aWxzLm1hcChbdmVyc2lvbkEsIHZlcnNpb25CXSwgKHZlcnNpb24pID0+IHtcbiAgICAgIGNvbnN0IGRlbHRhID0gcHJlY2lzaW9uIC0gVXRpbHMuZ2V0VmVyc2lvblByZWNpc2lvbih2ZXJzaW9uKTtcblxuICAgICAgLy8gMikgXCI5XCIgLT4gXCI5LjBcIiAoZm9yIHByZWNpc2lvbiA9IDIpXG4gICAgICBjb25zdCBfdmVyc2lvbiA9IHZlcnNpb24gKyBuZXcgQXJyYXkoZGVsdGEgKyAxKS5qb2luKCcuMCcpO1xuXG4gICAgICAvLyAzKSBcIjkuMFwiIC0+IFtcIjAwMDAwMDAwMFwiXCIsIFwiMDAwMDAwMDA5XCJdXG4gICAgICByZXR1cm4gVXRpbHMubWFwKF92ZXJzaW9uLnNwbGl0KCcuJyksIGNodW5rID0+IG5ldyBBcnJheSgyMCAtIGNodW5rLmxlbmd0aCkuam9pbignMCcpICsgY2h1bmspLnJldmVyc2UoKTtcbiAgICB9KTtcblxuICAgIC8vIGFkanVzdCBwcmVjaXNpb24gZm9yIGxvb3NlIGNvbXBhcmlzb25cbiAgICBpZiAoaXNMb29zZSkge1xuICAgICAgbGFzdFByZWNpc2lvbiA9IHByZWNpc2lvbiAtIE1hdGgubWluKHZlcnNpb25BUHJlY2lzaW9uLCB2ZXJzaW9uQlByZWNpc2lvbik7XG4gICAgfVxuXG4gICAgLy8gaXRlcmF0ZSBpbiByZXZlcnNlIG9yZGVyIGJ5IHJldmVyc2VkIGNodW5rcyBhcnJheVxuICAgIHByZWNpc2lvbiAtPSAxO1xuICAgIHdoaWxlIChwcmVjaXNpb24gPj0gbGFzdFByZWNpc2lvbikge1xuICAgICAgLy8gNCkgY29tcGFyZTogXCIwMDAwMDAwMDlcIiA+IFwiMDAwMDAwMDEwXCIgPSBmYWxzZSAoYnV0IFwiOVwiID4gXCIxMFwiID0gdHJ1ZSlcbiAgICAgIGlmIChjaHVua3NbMF1bcHJlY2lzaW9uXSA+IGNodW5rc1sxXVtwcmVjaXNpb25dKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2h1bmtzWzBdW3ByZWNpc2lvbl0gPT09IGNodW5rc1sxXVtwcmVjaXNpb25dKSB7XG4gICAgICAgIGlmIChwcmVjaXNpb24gPT09IGxhc3RQcmVjaXNpb24pIHtcbiAgICAgICAgICAvLyBhbGwgdmVyc2lvbiBjaHVua3MgYXJlIHNhbWVcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHByZWNpc2lvbiAtPSAxO1xuICAgICAgfSBlbHNlIGlmIChjaHVua3NbMF1bcHJlY2lzaW9uXSA8IGNodW5rc1sxXVtwcmVjaXNpb25dKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEFycmF5OjptYXAgcG9seWZpbGxcbiAgICpcbiAgICogQHBhcmFtICB7QXJyYXl9IGFyclxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gaXRlcmF0b3JcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBzdGF0aWMgbWFwKGFyciwgaXRlcmF0b3IpIHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBsZXQgaTtcbiAgICBpZiAoQXJyYXkucHJvdG90eXBlLm1hcCkge1xuICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChhcnIsIGl0ZXJhdG9yKTtcbiAgICB9XG4gICAgZm9yIChpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgcmVzdWx0LnB1c2goaXRlcmF0b3IoYXJyW2ldKSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQXJyYXk6OmZpbmQgcG9seWZpbGxcbiAgICpcbiAgICogQHBhcmFtICB7QXJyYXl9IGFyclxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gcHJlZGljYXRlXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgc3RhdGljIGZpbmQoYXJyLCBwcmVkaWNhdGUpIHtcbiAgICBsZXQgaTtcbiAgICBsZXQgbDtcbiAgICBpZiAoQXJyYXkucHJvdG90eXBlLmZpbmQpIHtcbiAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuZmluZC5jYWxsKGFyciwgcHJlZGljYXRlKTtcbiAgICB9XG4gICAgZm9yIChpID0gMCwgbCA9IGFyci5sZW5ndGg7IGkgPCBsOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gYXJyW2ldO1xuICAgICAgaWYgKHByZWRpY2F0ZSh2YWx1ZSwgaSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIE9iamVjdDo6YXNzaWduIHBvbHlmaWxsXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gb2JqXG4gICAqIEBwYXJhbSAge09iamVjdH0gLi4ub2Jqc1xuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgYXNzaWduKG9iaiwgLi4uYXNzaWduZXJzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gb2JqO1xuICAgIGxldCBpO1xuICAgIGxldCBsO1xuICAgIGlmIChPYmplY3QuYXNzaWduKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihvYmosIC4uLmFzc2lnbmVycyk7XG4gICAgfVxuICAgIGZvciAoaSA9IDAsIGwgPSBhc3NpZ25lcnMubGVuZ3RoOyBpIDwgbDsgaSArPSAxKSB7XG4gICAgICBjb25zdCBhc3NpZ25lciA9IGFzc2lnbmVyc1tpXTtcbiAgICAgIGlmICh0eXBlb2YgYXNzaWduZXIgPT09ICdvYmplY3QnICYmIGFzc2lnbmVyICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhhc3NpZ25lcik7XG4gICAgICAgIGtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSBhc3NpZ25lcltrZXldO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc2hvcnQgdmVyc2lvbi9hbGlhcyBmb3IgYSBicm93c2VyIG5hbWVcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogICBnZXRCcm93c2VyQWxpYXMoJ01pY3Jvc29mdCBFZGdlJykgLy8gZWRnZVxuICAgKlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGJyb3dzZXJOYW1lXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXRCcm93c2VyQWxpYXMoYnJvd3Nlck5hbWUpIHtcbiAgICByZXR1cm4gQlJPV1NFUl9BTElBU0VTX01BUFticm93c2VyTmFtZV07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHNob3J0IHZlcnNpb24vYWxpYXMgZm9yIGEgYnJvd3NlciBuYW1lXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAgZ2V0QnJvd3NlckFsaWFzKCdlZGdlJykgLy8gTWljcm9zb2Z0IEVkZ2VcbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSBicm93c2VyQWxpYXNcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldEJyb3dzZXJUeXBlQnlBbGlhcyhicm93c2VyQWxpYXMpIHtcbiAgICByZXR1cm4gQlJPV1NFUl9NQVBbYnJvd3NlckFsaWFzXSB8fCAnJztcbiAgfVxufVxuIiwiLyoqXG4gKiBCcm93c2VycycgZGVzY3JpcHRvcnNcbiAqXG4gKiBUaGUgaWRlYSBvZiBkZXNjcmlwdG9ycyBpcyBzaW1wbGUuIFlvdSBzaG91bGQga25vdyBhYm91dCB0aGVtIHR3byBzaW1wbGUgdGhpbmdzOlxuICogMS4gRXZlcnkgZGVzY3JpcHRvciBoYXMgYSBtZXRob2Qgb3IgcHJvcGVydHkgY2FsbGVkIGB0ZXN0YCBhbmQgYSBgZGVzY3JpYmVgIG1ldGhvZC5cbiAqIDIuIE9yZGVyIG9mIGRlc2NyaXB0b3JzIGlzIGltcG9ydGFudC5cbiAqXG4gKiBNb3JlIGRldGFpbHM6XG4gKiAxLiBNZXRob2Qgb3IgcHJvcGVydHkgYHRlc3RgIHNlcnZlcyBhcyBhIHdheSB0byBkZXRlY3Qgd2hldGhlciB0aGUgVUEgc3RyaW5nXG4gKiBtYXRjaGVzIHNvbWUgY2VydGFpbiBicm93c2VyIG9yIG5vdC4gVGhlIGBkZXNjcmliZWAgbWV0aG9kIGhlbHBzIHRvIG1ha2UgYSByZXN1bHRcbiAqIG9iamVjdCB3aXRoIHBhcmFtcyB0aGF0IHNob3cgc29tZSBicm93c2VyLXNwZWNpZmljIHRoaW5nczogbmFtZSwgdmVyc2lvbiwgZXRjLlxuICogMi4gT3JkZXIgb2YgZGVzY3JpcHRvcnMgaXMgaW1wb3J0YW50IGJlY2F1c2UgYSBQYXJzZXIgZ29lcyB0aHJvdWdoIHRoZW0gb25lIGJ5IG9uZVxuICogaW4gY291cnNlLiBGb3IgZXhhbXBsZSwgaWYgeW91IGluc2VydCBDaHJvbWUncyBkZXNjcmlwdG9yIGFzIHRoZSBmaXJzdCBvbmUsXG4gKiBtb3JlIHRoZW4gYSBoYWxmIG9mIGJyb3dzZXJzIHdpbGwgYmUgZGVzY3JpYmVkIGFzIENocm9tZSwgYmVjYXVzZSB0aGV5IHdpbGwgcGFzc1xuICogdGhlIENocm9tZSBkZXNjcmlwdG9yJ3MgdGVzdC5cbiAqXG4gKiBEZXNjcmlwdG9yJ3MgYHRlc3RgIGNvdWxkIGJlIGEgcHJvcGVydHkgd2l0aCBhbiBhcnJheSBvZiBSZWdFeHBzLCB3aGVyZSBldmVyeSBSZWdFeHBcbiAqIHdpbGwgYmUgYXBwbGllZCB0byBhIFVBIHN0cmluZyB0byB0ZXN0IGl0IHdoZXRoZXIgaXQgbWF0Y2hlcyBvciBub3QuXG4gKiBJZiBhIGRlc2NyaXB0b3IgaGFzIHR3byBvciBtb3JlIHJlZ2V4cHMgaW4gdGhlIGB0ZXN0YCBhcnJheSBpdCB0ZXN0cyB0aGVtIG9uZSBieSBvbmVcbiAqIHdpdGggYSBsb2dpY2FsIHN1bSBvcGVyYXRpb24uIFBhcnNlciBzdG9wcyBpZiBpdCBoYXMgZm91bmQgYW55IFJlZ0V4cCB0aGF0IG1hdGNoZXMgdGhlIFVBLlxuICpcbiAqIE9yIGB0ZXN0YCBjb3VsZCBiZSBhIG1ldGhvZC4gSW4gdGhhdCBjYXNlIGl0IGdldHMgYSBQYXJzZXIgaW5zdGFuY2UgYW5kIHNob3VsZFxuICogcmV0dXJuIHRydWUvZmFsc2UgdG8gZ2V0IHRoZSBQYXJzZXIga25vdyBpZiB0aGlzIGJyb3dzZXIgZGVzY3JpcHRvciBtYXRjaGVzIHRoZSBVQSBvciBub3QuXG4gKi9cblxuaW1wb3J0IFV0aWxzIGZyb20gJy4vdXRpbHMuanMnO1xuXG5jb25zdCBjb21tb25WZXJzaW9uSWRlbnRpZmllciA9IC92ZXJzaW9uXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pO1xuXG5jb25zdCBicm93c2Vyc0xpc3QgPSBbXG4gIC8qIEdvb2dsZWJvdCAqL1xuICB7XG4gICAgdGVzdDogWy9nb29nbGVib3QvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdHb29nbGVib3QnLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9nb29nbGVib3RcXC8oXFxkKyhcXC5cXGQrKSkvaSwgdWEpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcblxuICAvKiBPcGVyYSA8IDEzLjAgKi9cbiAge1xuICAgIHRlc3Q6IFsvb3BlcmEvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdPcGVyYScsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpvcGVyYSlbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcblxuICAvKiBPcGVyYSA+IDEzLjAgKi9cbiAge1xuICAgIHRlc3Q6IFsvb3ByXFwvfG9waW9zL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnT3BlcmEnLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpvcHJ8b3Bpb3MpW1xccy9dKFxcUyspL2ksIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL1NhbXN1bmdCcm93c2VyL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnU2Ftc3VuZyBJbnRlcm5ldCBmb3IgQW5kcm9pZCcsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpTYW1zdW5nQnJvd3NlcilbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvV2hhbGUvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdOQVZFUiBXaGFsZSBCcm93c2VyJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdWEpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OndoYWxlKVtcXHMvXShcXGQrKD86XFwuXFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL01aQnJvd3Nlci9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ01aIEJyb3dzZXInLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpNWkJyb3dzZXIpW1xccy9dKFxcZCsoPzpcXC5cXGQrKSspL2ksIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL2ZvY3VzL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnRm9jdXMnLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpmb2N1cylbXFxzL10oXFxkKyg/OlxcLlxcZCspKykvaSwgdWEpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvc3dpbmcvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdTd2luZycsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OnN3aW5nKVtcXHMvXShcXGQrKD86XFwuXFxkKykrKS9pLCB1YSkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy9jb2FzdC9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ09wZXJhIENvYXN0JyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdWEpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OmNvYXN0KVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy9vcHRcXC9cXGQrKD86Lj9fP1xcZCspKy9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ09wZXJhIFRvdWNoJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86b3B0KVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsveWFicm93c2VyL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnWWFuZGV4IEJyb3dzZXInLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzp5YWJyb3dzZXIpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy91Y2Jyb3dzZXIvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdVQyBCcm93c2VyJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdWEpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OnVjYnJvd3NlcilbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvTWF4dGhvbnxteGlvcy9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ01heHRob24nLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86TWF4dGhvbnxteGlvcylbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvZXBpcGhhbnkvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdFcGlwaGFueScsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzplcGlwaGFueSlbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvcHVmZmluL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnUHVmZmluJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdWEpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OnB1ZmZpbilbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvc2xlaXBuaXIvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdTbGVpcG5pcicsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpzbGVpcG5pcilbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvay1tZWxlb24vaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdLLU1lbGVvbicsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzprLW1lbGVvbilbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvbWljcm9tZXNzZW5nZXIvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdXZUNoYXQnLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzptaWNyb21lc3NlbmdlcilbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3FxYnJvd3Nlci9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogKC9xcWJyb3dzZXJsaXRlL2kpLnRlc3QodWEpID8gJ1FRIEJyb3dzZXIgTGl0ZScgOiAnUVEgQnJvd3NlcicsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OnFxYnJvd3NlcmxpdGV8cXFicm93c2VyKVsvXShcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvbXNpZXx0cmlkZW50L2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnSW50ZXJuZXQgRXhwbG9yZXInLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzptc2llIHxydjopKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL1xcc2VkZ1xcLy9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ01pY3Jvc29mdCBFZGdlJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9cXHNlZGdcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvZWRnKFtlYV18aW9zKS9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ01pY3Jvc29mdCBFZGdlJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRTZWNvbmRNYXRjaCgvZWRnKFtlYV18aW9zKVxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy92aXZhbGRpL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnVml2YWxkaScsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL3ZpdmFsZGlcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvc2VhbW9ua2V5L2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnU2VhTW9ua2V5JyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvc2VhbW9ua2V5XFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3NhaWxmaXNoL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnU2FpbGZpc2gnLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL3NhaWxmaXNoXFxzP2Jyb3dzZXJcXC8oXFxkKyhcXC5cXGQrKT8pL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvc2lsay9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ0FtYXpvbiBTaWxrJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvc2lsa1xcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy9waGFudG9tL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnUGhhbnRvbUpTJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvcGhhbnRvbWpzXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3NsaW1lcmpzL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnU2xpbWVySlMnLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9zbGltZXJqc1xcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy9ibGFja2JlcnJ5fFxcYmJiXFxkKy9pLCAvcmltXFxzdGFibGV0L2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnQmxhY2tCZXJyeScsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKC9ibGFja2JlcnJ5W1xcZF0rXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbLyh3ZWJ8aHB3KVtvMF1zL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnV2ViT1MgQnJvd3NlcicsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKC93KD86ZWIpP1tvMF1zYnJvd3NlclxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy9iYWRhL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnQmFkYScsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL2RvbGZpblxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy90aXplbi9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ1RpemVuJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86dGl6ZW5cXHM/KT9icm93c2VyXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy9xdXB6aWxsYS9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ1F1cFppbGxhJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86cXVwemlsbGEpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy9maXJlZm94fGljZXdlYXNlbHxmeGlvcy9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ0ZpcmVmb3gnLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpmaXJlZm94fGljZXdlYXNlbHxmeGlvcylbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvZWxlY3Ryb24vaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdFbGVjdHJvbicsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OmVsZWN0cm9uKVxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy9NaXVpQnJvd3Nlci9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ01pdWknLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpNaXVpQnJvd3NlcilbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvY2hyb21pdW0vaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdDaHJvbWl1bScsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OmNocm9taXVtKVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvY2hyb21lfGNyaW9zfGNybW8vaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdDaHJvbWUnLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpjaHJvbWV8Y3Jpb3N8Y3JtbylcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvR1NBL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnR29vZ2xlIFNlYXJjaCcsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OkdTQSlcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcblxuICAvKiBBbmRyb2lkIEJyb3dzZXIgKi9cbiAge1xuICAgIHRlc3QocGFyc2VyKSB7XG4gICAgICBjb25zdCBub3RMaWtlQW5kcm9pZCA9ICFwYXJzZXIudGVzdCgvbGlrZSBhbmRyb2lkL2kpO1xuICAgICAgY29uc3QgYnV0QW5kcm9pZCA9IHBhcnNlci50ZXN0KC9hbmRyb2lkL2kpO1xuICAgICAgcmV0dXJuIG5vdExpa2VBbmRyb2lkICYmIGJ1dEFuZHJvaWQ7XG4gICAgfSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ0FuZHJvaWQgQnJvd3NlcicsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcblxuICAvKiBQbGF5U3RhdGlvbiA0ICovXG4gIHtcbiAgICB0ZXN0OiBbL3BsYXlzdGF0aW9uIDQvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdQbGF5U3RhdGlvbiA0JyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuXG4gIC8qIFNhZmFyaSAqL1xuICB7XG4gICAgdGVzdDogWy9zYWZhcml8YXBwbGV3ZWJraXQvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdTYWZhcmknLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG5cbiAgLyogU29tZXRoaW5nIGVsc2UgKi9cbiAge1xuICAgIHRlc3Q6IFsvLiovaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIC8qIEhlcmUgd2UgdHJ5IHRvIG1ha2Ugc3VyZSB0aGF0IHRoZXJlIGFyZSBleHBsaWNpdCBkZXRhaWxzIGFib3V0IHRoZSBkZXZpY2VcbiAgICAgICAqIGluIG9yZGVyIHRvIGRlY2lkZSB3aGF0IHJlZ2V4cCBleGFjdGx5IHdlIHdhbnQgdG8gYXBwbHlcbiAgICAgICAqIChhcyB0aGVyZSBpcyBhIHNwZWNpZmljIGRlY2lzaW9uIGJhc2VkIG9uIHRoYXQgY29uY2x1c2lvbilcbiAgICAgICAqL1xuICAgICAgY29uc3QgcmVnZXhwV2l0aG91dERldmljZVNwZWMgPSAvXiguKilcXC8oLiopIC87XG4gICAgICBjb25zdCByZWdleHBXaXRoRGV2aWNlU3BlYyA9IC9eKC4qKVxcLyguKilbIFxcdF1cXCgoLiopLztcbiAgICAgIGNvbnN0IGhhc0RldmljZVNwZWMgPSB1YS5zZWFyY2goJ1xcXFwoJykgIT09IC0xO1xuICAgICAgY29uc3QgcmVnZXhwID0gaGFzRGV2aWNlU3BlYyA/IHJlZ2V4cFdpdGhEZXZpY2VTcGVjIDogcmVnZXhwV2l0aG91dERldmljZVNwZWM7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBVdGlscy5nZXRGaXJzdE1hdGNoKHJlZ2V4cCwgdWEpLFxuICAgICAgICB2ZXJzaW9uOiBVdGlscy5nZXRTZWNvbmRNYXRjaChyZWdleHAsIHVhKSxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcbl07XG5cbmV4cG9ydCBkZWZhdWx0IGJyb3dzZXJzTGlzdDtcbiIsImltcG9ydCBVdGlscyBmcm9tICcuL3V0aWxzLmpzJztcbmltcG9ydCB7IE9TX01BUCB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgW1xuICAvKiBSb2t1ICovXG4gIHtcbiAgICB0ZXN0OiBbL1Jva3VcXC9EVlAvXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL1Jva3VcXC9EVlAtKFxcZCtcXC5cXGQrKS9pLCB1YSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBPU19NQVAuUm9rdSxcbiAgICAgICAgdmVyc2lvbixcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBXaW5kb3dzIFBob25lICovXG4gIHtcbiAgICB0ZXN0OiBbL3dpbmRvd3MgcGhvbmUvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC93aW5kb3dzIHBob25lICg/Om9zKT9cXHM/KFxcZCsoXFwuXFxkKykqKS9pLCB1YSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBPU19NQVAuV2luZG93c1Bob25lLFxuICAgICAgICB2ZXJzaW9uLFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIFdpbmRvd3MgKi9cbiAge1xuICAgIHRlc3Q6IFsvd2luZG93cyAvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9XaW5kb3dzICgoTlR8WFApKCBcXGRcXGQ/LlxcZCk/KS9pLCB1YSk7XG4gICAgICBjb25zdCB2ZXJzaW9uTmFtZSA9IFV0aWxzLmdldFdpbmRvd3NWZXJzaW9uTmFtZSh2ZXJzaW9uKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogT1NfTUFQLldpbmRvd3MsXG4gICAgICAgIHZlcnNpb24sXG4gICAgICAgIHZlcnNpb25OYW1lLFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIEZpcmVmb3ggb24gaVBhZCAqL1xuICB7XG4gICAgdGVzdDogWy9NYWNpbnRvc2goLio/KSBGeGlPUyguKj8pXFwvL10sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogT1NfTUFQLmlPUyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0U2Vjb25kTWF0Y2goLyhWZXJzaW9uXFwvKShcXGRbXFxkLl0rKS8sIHVhKTtcbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIHJlc3VsdC52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcbiAgfSxcblxuICAvKiBtYWNPUyAqL1xuICB7XG4gICAgdGVzdDogWy9tYWNpbnRvc2gvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9tYWMgb3MgeCAoXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKS5yZXBsYWNlKC9bX1xcc10vZywgJy4nKTtcbiAgICAgIGNvbnN0IHZlcnNpb25OYW1lID0gVXRpbHMuZ2V0TWFjT1NWZXJzaW9uTmFtZSh2ZXJzaW9uKTtcblxuICAgICAgY29uc3Qgb3MgPSB7XG4gICAgICAgIG5hbWU6IE9TX01BUC5NYWNPUyxcbiAgICAgICAgdmVyc2lvbixcbiAgICAgIH07XG4gICAgICBpZiAodmVyc2lvbk5hbWUpIHtcbiAgICAgICAgb3MudmVyc2lvbk5hbWUgPSB2ZXJzaW9uTmFtZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvcztcbiAgICB9LFxuICB9LFxuXG4gIC8qIGlPUyAqL1xuICB7XG4gICAgdGVzdDogWy8oaXBvZHxpcGhvbmV8aXBhZCkvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9vcyAoXFxkKyhbX1xcc11cXGQrKSopIGxpa2UgbWFjIG9zIHgvaSwgdWEpLnJlcGxhY2UoL1tfXFxzXS9nLCAnLicpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBPU19NQVAuaU9TLFxuICAgICAgICB2ZXJzaW9uLFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIEFuZHJvaWQgKi9cbiAge1xuICAgIHRlc3QocGFyc2VyKSB7XG4gICAgICBjb25zdCBub3RMaWtlQW5kcm9pZCA9ICFwYXJzZXIudGVzdCgvbGlrZSBhbmRyb2lkL2kpO1xuICAgICAgY29uc3QgYnV0QW5kcm9pZCA9IHBhcnNlci50ZXN0KC9hbmRyb2lkL2kpO1xuICAgICAgcmV0dXJuIG5vdExpa2VBbmRyb2lkICYmIGJ1dEFuZHJvaWQ7XG4gICAgfSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL2FuZHJvaWRbXFxzLy1dKFxcZCsoXFwuXFxkKykqKS9pLCB1YSk7XG4gICAgICBjb25zdCB2ZXJzaW9uTmFtZSA9IFV0aWxzLmdldEFuZHJvaWRWZXJzaW9uTmFtZSh2ZXJzaW9uKTtcbiAgICAgIGNvbnN0IG9zID0ge1xuICAgICAgICBuYW1lOiBPU19NQVAuQW5kcm9pZCxcbiAgICAgICAgdmVyc2lvbixcbiAgICAgIH07XG4gICAgICBpZiAodmVyc2lvbk5hbWUpIHtcbiAgICAgICAgb3MudmVyc2lvbk5hbWUgPSB2ZXJzaW9uTmFtZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvcztcbiAgICB9LFxuICB9LFxuXG4gIC8qIFdlYk9TICovXG4gIHtcbiAgICB0ZXN0OiBbLyh3ZWJ8aHB3KVtvMF1zL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86d2VifGhwdylbbzBdc1xcLyhcXGQrKFxcLlxcZCspKikvaSwgdWEpO1xuICAgICAgY29uc3Qgb3MgPSB7XG4gICAgICAgIG5hbWU6IE9TX01BUC5XZWJPUyxcbiAgICAgIH07XG5cbiAgICAgIGlmICh2ZXJzaW9uICYmIHZlcnNpb24ubGVuZ3RoKSB7XG4gICAgICAgIG9zLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9zO1xuICAgIH0sXG4gIH0sXG5cbiAgLyogQmxhY2tCZXJyeSAqL1xuICB7XG4gICAgdGVzdDogWy9ibGFja2JlcnJ5fFxcYmJiXFxkKy9pLCAvcmltXFxzdGFibGV0L2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvcmltXFxzdGFibGV0XFxzb3NcXHMoXFxkKyhcXC5cXGQrKSopL2ksIHVhKVxuICAgICAgICB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKC9ibGFja2JlcnJ5XFxkK1xcLyhcXGQrKFtfXFxzXVxcZCspKikvaSwgdWEpXG4gICAgICAgIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goL1xcYmJiKFxcZCspL2ksIHVhKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogT1NfTUFQLkJsYWNrQmVycnksXG4gICAgICAgIHZlcnNpb24sXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogQmFkYSAqL1xuICB7XG4gICAgdGVzdDogWy9iYWRhL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvYmFkYVxcLyhcXGQrKFxcLlxcZCspKikvaSwgdWEpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBPU19NQVAuQmFkYSxcbiAgICAgICAgdmVyc2lvbixcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBUaXplbiAqL1xuICB7XG4gICAgdGVzdDogWy90aXplbi9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL3RpemVuWy9cXHNdKFxcZCsoXFwuXFxkKykqKS9pLCB1YSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IE9TX01BUC5UaXplbixcbiAgICAgICAgdmVyc2lvbixcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBMaW51eCAqL1xuICB7XG4gICAgdGVzdDogWy9saW51eC9pXSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IE9TX01BUC5MaW51eCxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBDaHJvbWUgT1MgKi9cbiAge1xuICAgIHRlc3Q6IFsvQ3JPUy9dLFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogT1NfTUFQLkNocm9tZU9TLFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIFBsYXlzdGF0aW9uIDQgKi9cbiAge1xuICAgIHRlc3Q6IFsvUGxheVN0YXRpb24gNC9dLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvUGxheVN0YXRpb24gNFsvXFxzXShcXGQrKFxcLlxcZCspKikvaSwgdWEpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogT1NfTUFQLlBsYXlTdGF0aW9uNCxcbiAgICAgICAgdmVyc2lvbixcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcbl07XG4iLCJpbXBvcnQgVXRpbHMgZnJvbSAnLi91dGlscy5qcyc7XG5pbXBvcnQgeyBQTEFURk9STVNfTUFQIH0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuXG4vKlxuICogVGFibGV0cyBnbyBmaXJzdCBzaW5jZSB1c3VhbGx5IHRoZXkgaGF2ZSBtb3JlIHNwZWNpZmljXG4gKiBzaWducyB0byBkZXRlY3QuXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgW1xuICAvKiBHb29nbGVib3QgKi9cbiAge1xuICAgIHRlc3Q6IFsvZ29vZ2xlYm90L2ldLFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2JvdCcsXG4gICAgICAgIHZlbmRvcjogJ0dvb2dsZScsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogSHVhd2VpICovXG4gIHtcbiAgICB0ZXN0OiBbL2h1YXdlaS9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgbW9kZWwgPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oY2FuLWwwMSkvaSwgdWEpICYmICdOb3ZhJztcbiAgICAgIGNvbnN0IHBsYXRmb3JtID0ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLm1vYmlsZSxcbiAgICAgICAgdmVuZG9yOiAnSHVhd2VpJyxcbiAgICAgIH07XG4gICAgICBpZiAobW9kZWwpIHtcbiAgICAgICAgcGxhdGZvcm0ubW9kZWwgPSBtb2RlbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwbGF0Zm9ybTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIE5leHVzIFRhYmxldCAqL1xuICB7XG4gICAgdGVzdDogWy9uZXh1c1xccyooPzo3fDh8OXwxMCkuKi9pXSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAudGFibGV0LFxuICAgICAgICB2ZW5kb3I6ICdOZXh1cycsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogaVBhZCAqL1xuICB7XG4gICAgdGVzdDogWy9pcGFkL2ldLFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC50YWJsZXQsXG4gICAgICAgIHZlbmRvcjogJ0FwcGxlJyxcbiAgICAgICAgbW9kZWw6ICdpUGFkJyxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBGaXJlZm94IG9uIGlQYWQgKi9cbiAge1xuICAgIHRlc3Q6IFsvTWFjaW50b3NoKC4qPykgRnhpT1MoLio/KVxcLy9dLFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC50YWJsZXQsXG4gICAgICAgIHZlbmRvcjogJ0FwcGxlJyxcbiAgICAgICAgbW9kZWw6ICdpUGFkJyxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBBbWF6b24gS2luZGxlIEZpcmUgKi9cbiAge1xuICAgIHRlc3Q6IFsva2Z0dCBidWlsZC9pXSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAudGFibGV0LFxuICAgICAgICB2ZW5kb3I6ICdBbWF6b24nLFxuICAgICAgICBtb2RlbDogJ0tpbmRsZSBGaXJlIEhEIDcnLFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIEFub3RoZXIgQW1hem9uIFRhYmxldCB3aXRoIFNpbGsgKi9cbiAge1xuICAgIHRlc3Q6IFsvc2lsay9pXSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAudGFibGV0LFxuICAgICAgICB2ZW5kb3I6ICdBbWF6b24nLFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIFRhYmxldCAqL1xuICB7XG4gICAgdGVzdDogWy90YWJsZXQoPyEgcGMpL2ldLFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC50YWJsZXQsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogaVBvZC9pUGhvbmUgKi9cbiAge1xuICAgIHRlc3QocGFyc2VyKSB7XG4gICAgICBjb25zdCBpRGV2aWNlID0gcGFyc2VyLnRlc3QoL2lwb2R8aXBob25lL2kpO1xuICAgICAgY29uc3QgbGlrZUlEZXZpY2UgPSBwYXJzZXIudGVzdCgvbGlrZSAoaXBvZHxpcGhvbmUpL2kpO1xuICAgICAgcmV0dXJuIGlEZXZpY2UgJiYgIWxpa2VJRGV2aWNlO1xuICAgIH0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IG1vZGVsID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKGlwb2R8aXBob25lKS9pLCB1YSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLm1vYmlsZSxcbiAgICAgICAgdmVuZG9yOiAnQXBwbGUnLFxuICAgICAgICBtb2RlbCxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBOZXh1cyBNb2JpbGUgKi9cbiAge1xuICAgIHRlc3Q6IFsvbmV4dXNcXHMqWzAtNl0uKi9pLCAvZ2FsYXh5IG5leHVzL2ldLFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC5tb2JpbGUsXG4gICAgICAgIHZlbmRvcjogJ05leHVzJyxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBNb2JpbGUgKi9cbiAge1xuICAgIHRlc3Q6IFsvW14tXW1vYmkvaV0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLm1vYmlsZSxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBCbGFja0JlcnJ5ICovXG4gIHtcbiAgICB0ZXN0KHBhcnNlcikge1xuICAgICAgcmV0dXJuIHBhcnNlci5nZXRCcm93c2VyTmFtZSh0cnVlKSA9PT0gJ2JsYWNrYmVycnknO1xuICAgIH0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLm1vYmlsZSxcbiAgICAgICAgdmVuZG9yOiAnQmxhY2tCZXJyeScsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogQmFkYSAqL1xuICB7XG4gICAgdGVzdChwYXJzZXIpIHtcbiAgICAgIHJldHVybiBwYXJzZXIuZ2V0QnJvd3Nlck5hbWUodHJ1ZSkgPT09ICdiYWRhJztcbiAgICB9LFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC5tb2JpbGUsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogV2luZG93cyBQaG9uZSAqL1xuICB7XG4gICAgdGVzdChwYXJzZXIpIHtcbiAgICAgIHJldHVybiBwYXJzZXIuZ2V0QnJvd3Nlck5hbWUoKSA9PT0gJ3dpbmRvd3MgcGhvbmUnO1xuICAgIH0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLm1vYmlsZSxcbiAgICAgICAgdmVuZG9yOiAnTWljcm9zb2Z0JyxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBBbmRyb2lkIFRhYmxldCAqL1xuICB7XG4gICAgdGVzdChwYXJzZXIpIHtcbiAgICAgIGNvbnN0IG9zTWFqb3JWZXJzaW9uID0gTnVtYmVyKFN0cmluZyhwYXJzZXIuZ2V0T1NWZXJzaW9uKCkpLnNwbGl0KCcuJylbMF0pO1xuICAgICAgcmV0dXJuIHBhcnNlci5nZXRPU05hbWUodHJ1ZSkgPT09ICdhbmRyb2lkJyAmJiAob3NNYWpvclZlcnNpb24gPj0gMyk7XG4gICAgfSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAudGFibGV0LFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIEFuZHJvaWQgTW9iaWxlICovXG4gIHtcbiAgICB0ZXN0KHBhcnNlcikge1xuICAgICAgcmV0dXJuIHBhcnNlci5nZXRPU05hbWUodHJ1ZSkgPT09ICdhbmRyb2lkJztcbiAgICB9LFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC5tb2JpbGUsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogZGVza3RvcCAqL1xuICB7XG4gICAgdGVzdChwYXJzZXIpIHtcbiAgICAgIHJldHVybiBwYXJzZXIuZ2V0T1NOYW1lKHRydWUpID09PSAnbWFjb3MnO1xuICAgIH0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLmRlc2t0b3AsXG4gICAgICAgIHZlbmRvcjogJ0FwcGxlJyxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBXaW5kb3dzICovXG4gIHtcbiAgICB0ZXN0KHBhcnNlcikge1xuICAgICAgcmV0dXJuIHBhcnNlci5nZXRPU05hbWUodHJ1ZSkgPT09ICd3aW5kb3dzJztcbiAgICB9LFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC5kZXNrdG9wLFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIExpbnV4ICovXG4gIHtcbiAgICB0ZXN0KHBhcnNlcikge1xuICAgICAgcmV0dXJuIHBhcnNlci5nZXRPU05hbWUodHJ1ZSkgPT09ICdsaW51eCc7XG4gICAgfSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAuZGVza3RvcCxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBQbGF5U3RhdGlvbiA0ICovXG4gIHtcbiAgICB0ZXN0KHBhcnNlcikge1xuICAgICAgcmV0dXJuIHBhcnNlci5nZXRPU05hbWUodHJ1ZSkgPT09ICdwbGF5c3RhdGlvbiA0JztcbiAgICB9LFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC50dixcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBSb2t1ICovXG4gIHtcbiAgICB0ZXN0KHBhcnNlcikge1xuICAgICAgcmV0dXJuIHBhcnNlci5nZXRPU05hbWUodHJ1ZSkgPT09ICdyb2t1JztcbiAgICB9LFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC50dixcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcbl07XG4iLCJpbXBvcnQgVXRpbHMgZnJvbSAnLi91dGlscy5qcyc7XG5pbXBvcnQgeyBFTkdJTkVfTUFQIH0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuXG4vKlxuICogTW9yZSBzcGVjaWZpYyBnb2VzIGZpcnN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IFtcbiAgLyogRWRnZUhUTUwgKi9cbiAge1xuICAgIHRlc3QocGFyc2VyKSB7XG4gICAgICByZXR1cm4gcGFyc2VyLmdldEJyb3dzZXJOYW1lKHRydWUpID09PSAnbWljcm9zb2Z0IGVkZ2UnO1xuICAgIH0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGlzQmxpbmtCYXNlZCA9IC9cXHNlZGdcXC8vaS50ZXN0KHVhKTtcblxuICAgICAgLy8gcmV0dXJuIGJsaW5rIGlmIGl0J3MgYmxpbmstYmFzZWQgb25lXG4gICAgICBpZiAoaXNCbGlua0Jhc2VkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbmFtZTogRU5HSU5FX01BUC5CbGluayxcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gb3RoZXJ3aXNlIG1hdGNoIHRoZSB2ZXJzaW9uIGFuZCByZXR1cm4gRWRnZUhUTUxcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9lZGdlXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IEVOR0lORV9NQVAuRWRnZUhUTUwsXG4gICAgICAgIHZlcnNpb24sXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogVHJpZGVudCAqL1xuICB7XG4gICAgdGVzdDogWy90cmlkZW50L2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBlbmdpbmUgPSB7XG4gICAgICAgIG5hbWU6IEVOR0lORV9NQVAuVHJpZGVudCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC90cmlkZW50XFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGVuZ2luZS52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGVuZ2luZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIFByZXN0byAqL1xuICB7XG4gICAgdGVzdChwYXJzZXIpIHtcbiAgICAgIHJldHVybiBwYXJzZXIudGVzdCgvcHJlc3RvL2kpO1xuICAgIH0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGVuZ2luZSA9IHtcbiAgICAgICAgbmFtZTogRU5HSU5FX01BUC5QcmVzdG8sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvcHJlc3RvXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGVuZ2luZS52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGVuZ2luZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIEdlY2tvICovXG4gIHtcbiAgICB0ZXN0KHBhcnNlcikge1xuICAgICAgY29uc3QgaXNHZWNrbyA9IHBhcnNlci50ZXN0KC9nZWNrby9pKTtcbiAgICAgIGNvbnN0IGxpa2VHZWNrbyA9IHBhcnNlci50ZXN0KC9saWtlIGdlY2tvL2kpO1xuICAgICAgcmV0dXJuIGlzR2Vja28gJiYgIWxpa2VHZWNrbztcbiAgICB9LFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBlbmdpbmUgPSB7XG4gICAgICAgIG5hbWU6IEVOR0lORV9NQVAuR2Vja28sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvZ2Vja29cXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgZW5naW5lLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZW5naW5lO1xuICAgIH0sXG4gIH0sXG5cbiAgLyogQmxpbmsgKi9cbiAge1xuICAgIHRlc3Q6IFsvKGFwcGxlKT93ZWJraXRcXC81MzdcXC4zNi9pXSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IEVOR0lORV9NQVAuQmxpbmssXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogV2ViS2l0ICovXG4gIHtcbiAgICB0ZXN0OiBbLyhhcHBsZSk/d2Via2l0L2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBlbmdpbmUgPSB7XG4gICAgICAgIG5hbWU6IEVOR0lORV9NQVAuV2ViS2l0LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL3dlYmtpdFxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBlbmdpbmUudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBlbmdpbmU7XG4gICAgfSxcbiAgfSxcbl07XG4iLCJpbXBvcnQgYnJvd3NlclBhcnNlcnNMaXN0IGZyb20gJy4vcGFyc2VyLWJyb3dzZXJzLmpzJztcbmltcG9ydCBvc1BhcnNlcnNMaXN0IGZyb20gJy4vcGFyc2VyLW9zLmpzJztcbmltcG9ydCBwbGF0Zm9ybVBhcnNlcnNMaXN0IGZyb20gJy4vcGFyc2VyLXBsYXRmb3Jtcy5qcyc7XG5pbXBvcnQgZW5naW5lc1BhcnNlcnNMaXN0IGZyb20gJy4vcGFyc2VyLWVuZ2luZXMuanMnO1xuaW1wb3J0IFV0aWxzIGZyb20gJy4vdXRpbHMuanMnO1xuXG4vKipcbiAqIFRoZSBtYWluIGNsYXNzIHRoYXQgYXJyYW5nZXMgdGhlIHdob2xlIHBhcnNpbmcgcHJvY2Vzcy5cbiAqL1xuY2xhc3MgUGFyc2VyIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBpbnN0YW5jZSBvZiBQYXJzZXJcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IFVBIFVzZXItQWdlbnQgc3RyaW5nXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3NraXBQYXJzaW5nPWZhbHNlXSBwYXJzZXIgY2FuIHNraXAgcGFyc2luZyBpbiBwdXJwb3NlIG9mIHBlcmZvcm1hbmNlXG4gICAqIGltcHJvdmVtZW50cyBpZiB5b3UgbmVlZCB0byBtYWtlIGEgbW9yZSBwYXJ0aWN1bGFyIHBhcnNpbmdcbiAgICogbGlrZSB7QGxpbmsgUGFyc2VyI3BhcnNlQnJvd3Nlcn0gb3Ige0BsaW5rIFBhcnNlciNwYXJzZVBsYXRmb3JtfVxuICAgKlxuICAgKiBAdGhyb3cge0Vycm9yfSBpbiBjYXNlIG9mIGVtcHR5IFVBIFN0cmluZ1xuICAgKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKFVBLCBza2lwUGFyc2luZyA9IGZhbHNlKSB7XG4gICAgaWYgKFVBID09PSB2b2lkICgwKSB8fCBVQSA9PT0gbnVsbCB8fCBVQSA9PT0gJycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXJBZ2VudCBwYXJhbWV0ZXIgY2FuJ3QgYmUgZW1wdHlcIik7XG4gICAgfVxuXG4gICAgdGhpcy5fdWEgPSBVQTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlZGVmIFBhcnNlZFJlc3VsdFxuICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBicm93c2VyXG4gICAgICogQHByb3BlcnR5IHtTdHJpbmd8dW5kZWZpbmVkfSBbYnJvd3Nlci5uYW1lXVxuICAgICAqIEJyb3dzZXIgbmFtZSwgbGlrZSBgXCJDaHJvbWVcImAgb3IgYFwiSW50ZXJuZXQgRXhwbG9yZXJcImBcbiAgICAgKiBAcHJvcGVydHkge1N0cmluZ3x1bmRlZmluZWR9IFticm93c2VyLnZlcnNpb25dIEJyb3dzZXIgdmVyc2lvbiBhcyBhIFN0cmluZyBgXCIxMi4wMS40NTMzNC4xMFwiYFxuICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBvc1xuICAgICAqIEBwcm9wZXJ0eSB7U3RyaW5nfHVuZGVmaW5lZH0gW29zLm5hbWVdIE9TIG5hbWUsIGxpa2UgYFwiV2luZG93c1wiYCBvciBgXCJtYWNPU1wiYFxuICAgICAqIEBwcm9wZXJ0eSB7U3RyaW5nfHVuZGVmaW5lZH0gW29zLnZlcnNpb25dIE9TIHZlcnNpb24sIGxpa2UgYFwiTlQgNS4xXCJgIG9yIGBcIjEwLjExLjFcImBcbiAgICAgKiBAcHJvcGVydHkge1N0cmluZ3x1bmRlZmluZWR9IFtvcy52ZXJzaW9uTmFtZV0gT1MgbmFtZSwgbGlrZSBgXCJYUFwiYCBvciBgXCJIaWdoIFNpZXJyYVwiYFxuICAgICAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBwbGF0Zm9ybVxuICAgICAqIEBwcm9wZXJ0eSB7U3RyaW5nfHVuZGVmaW5lZH0gW3BsYXRmb3JtLnR5cGVdXG4gICAgICogcGxhdGZvcm0gdHlwZSwgY2FuIGJlIGVpdGhlciBgXCJkZXNrdG9wXCJgLCBgXCJ0YWJsZXRcImAgb3IgYFwibW9iaWxlXCJgXG4gICAgICogQHByb3BlcnR5IHtTdHJpbmd8dW5kZWZpbmVkfSBbcGxhdGZvcm0udmVuZG9yXSBWZW5kb3Igb2YgdGhlIGRldmljZSxcbiAgICAgKiBsaWtlIGBcIkFwcGxlXCJgIG9yIGBcIlNhbXN1bmdcImBcbiAgICAgKiBAcHJvcGVydHkge1N0cmluZ3x1bmRlZmluZWR9IFtwbGF0Zm9ybS5tb2RlbF0gRGV2aWNlIG1vZGVsLFxuICAgICAqIGxpa2UgYFwiaVBob25lXCJgIG9yIGBcIktpbmRsZSBGaXJlIEhEIDdcImBcbiAgICAgKiBAcHJvcGVydHkge09iamVjdH0gZW5naW5lXG4gICAgICogQHByb3BlcnR5IHtTdHJpbmd8dW5kZWZpbmVkfSBbZW5naW5lLm5hbWVdXG4gICAgICogQ2FuIGJlIGFueSBvZiB0aGlzOiBgV2ViS2l0YCwgYEJsaW5rYCwgYEdlY2tvYCwgYFRyaWRlbnRgLCBgUHJlc3RvYCwgYEVkZ2VIVE1MYFxuICAgICAqIEBwcm9wZXJ0eSB7U3RyaW5nfHVuZGVmaW5lZH0gW2VuZ2luZS52ZXJzaW9uXSBTdHJpbmcgdmVyc2lvbiBvZiB0aGUgZW5naW5lXG4gICAgICovXG4gICAgdGhpcy5wYXJzZWRSZXN1bHQgPSB7fTtcblxuICAgIGlmIChza2lwUGFyc2luZyAhPT0gdHJ1ZSkge1xuICAgICAgdGhpcy5wYXJzZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgVXNlckFnZW50IHN0cmluZyBvZiBjdXJyZW50IFBhcnNlciBpbnN0YW5jZVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IFVzZXItQWdlbnQgU3RyaW5nIG9mIHRoZSBjdXJyZW50IDxQYXJzZXI+IG9iamVjdFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRVQSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdWE7XG4gIH1cblxuICAvKipcbiAgICogVGVzdCBhIFVBIHN0cmluZyBmb3IgYSByZWdleHBcbiAgICogQHBhcmFtIHtSZWdFeHB9IHJlZ2V4XG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICB0ZXN0KHJlZ2V4KSB7XG4gICAgcmV0dXJuIHJlZ2V4LnRlc3QodGhpcy5fdWEpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwYXJzZWQgYnJvd3NlciBvYmplY3RcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgcGFyc2VCcm93c2VyKCkge1xuICAgIHRoaXMucGFyc2VkUmVzdWx0LmJyb3dzZXIgPSB7fTtcblxuICAgIGNvbnN0IGJyb3dzZXJEZXNjcmlwdG9yID0gVXRpbHMuZmluZChicm93c2VyUGFyc2Vyc0xpc3QsIChfYnJvd3NlcikgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBfYnJvd3Nlci50ZXN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBfYnJvd3Nlci50ZXN0KHRoaXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAoX2Jyb3dzZXIudGVzdCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIHJldHVybiBfYnJvd3Nlci50ZXN0LnNvbWUoY29uZGl0aW9uID0+IHRoaXMudGVzdChjb25kaXRpb24pKTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQnJvd3NlcidzIHRlc3QgZnVuY3Rpb24gaXMgbm90IHZhbGlkXCIpO1xuICAgIH0pO1xuXG4gICAgaWYgKGJyb3dzZXJEZXNjcmlwdG9yKSB7XG4gICAgICB0aGlzLnBhcnNlZFJlc3VsdC5icm93c2VyID0gYnJvd3NlckRlc2NyaXB0b3IuZGVzY3JpYmUodGhpcy5nZXRVQSgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wYXJzZWRSZXN1bHQuYnJvd3NlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcGFyc2VkIGJyb3dzZXIgb2JqZWN0XG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0QnJvd3NlcigpIHtcbiAgICBpZiAodGhpcy5wYXJzZWRSZXN1bHQuYnJvd3Nlcikge1xuICAgICAgcmV0dXJuIHRoaXMucGFyc2VkUmVzdWx0LmJyb3dzZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucGFyc2VCcm93c2VyKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGJyb3dzZXIncyBuYW1lXG4gICAqIEByZXR1cm4ge1N0cmluZ30gQnJvd3NlcidzIG5hbWUgb3IgYW4gZW1wdHkgc3RyaW5nXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldEJyb3dzZXJOYW1lKHRvTG93ZXJDYXNlKSB7XG4gICAgaWYgKHRvTG93ZXJDYXNlKSB7XG4gICAgICByZXR1cm4gU3RyaW5nKHRoaXMuZ2V0QnJvd3NlcigpLm5hbWUpLnRvTG93ZXJDYXNlKCkgfHwgJyc7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmdldEJyb3dzZXIoKS5uYW1lIHx8ICcnO1xuICB9XG5cblxuICAvKipcbiAgICogR2V0IGJyb3dzZXIncyB2ZXJzaW9uXG4gICAqIEByZXR1cm4ge1N0cmluZ30gdmVyc2lvbiBvZiBicm93c2VyXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldEJyb3dzZXJWZXJzaW9uKCkge1xuICAgIHJldHVybiB0aGlzLmdldEJyb3dzZXIoKS52ZXJzaW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBPU1xuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHRoaXMuZ2V0T1MoKTtcbiAgICoge1xuICAgKiAgIG5hbWU6ICdtYWNPUycsXG4gICAqICAgdmVyc2lvbjogJzEwLjExLjEyJ1xuICAgKiB9XG4gICAqL1xuICBnZXRPUygpIHtcbiAgICBpZiAodGhpcy5wYXJzZWRSZXN1bHQub3MpIHtcbiAgICAgIHJldHVybiB0aGlzLnBhcnNlZFJlc3VsdC5vcztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wYXJzZU9TKCk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgT1MgYW5kIHNhdmUgaXQgdG8gdGhpcy5wYXJzZWRSZXN1bHQub3NcbiAgICogQHJldHVybiB7Knx7fX1cbiAgICovXG4gIHBhcnNlT1MoKSB7XG4gICAgdGhpcy5wYXJzZWRSZXN1bHQub3MgPSB7fTtcblxuICAgIGNvbnN0IG9zID0gVXRpbHMuZmluZChvc1BhcnNlcnNMaXN0LCAoX29zKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIF9vcy50ZXN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBfb3MudGVzdCh0aGlzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKF9vcy50ZXN0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIF9vcy50ZXN0LnNvbWUoY29uZGl0aW9uID0+IHRoaXMudGVzdChjb25kaXRpb24pKTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQnJvd3NlcidzIHRlc3QgZnVuY3Rpb24gaXMgbm90IHZhbGlkXCIpO1xuICAgIH0pO1xuXG4gICAgaWYgKG9zKSB7XG4gICAgICB0aGlzLnBhcnNlZFJlc3VsdC5vcyA9IG9zLmRlc2NyaWJlKHRoaXMuZ2V0VUEoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucGFyc2VkUmVzdWx0Lm9zO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBPUyBuYW1lXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3RvTG93ZXJDYXNlXSByZXR1cm4gbG93ZXItY2FzZWQgdmFsdWVcbiAgICogQHJldHVybiB7U3RyaW5nfSBuYW1lIG9mIHRoZSBPUyDigJQgbWFjT1MsIFdpbmRvd3MsIExpbnV4LCBldGMuXG4gICAqL1xuICBnZXRPU05hbWUodG9Mb3dlckNhc2UpIHtcbiAgICBjb25zdCB7IG5hbWUgfSA9IHRoaXMuZ2V0T1MoKTtcblxuICAgIGlmICh0b0xvd2VyQ2FzZSkge1xuICAgICAgcmV0dXJuIFN0cmluZyhuYW1lKS50b0xvd2VyQ2FzZSgpIHx8ICcnO1xuICAgIH1cblxuICAgIHJldHVybiBuYW1lIHx8ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBPUyB2ZXJzaW9uXG4gICAqIEByZXR1cm4ge1N0cmluZ30gZnVsbCB2ZXJzaW9uIHdpdGggZG90cyAoJzEwLjExLjEyJywgJzUuNicsIGV0YylcbiAgICovXG4gIGdldE9TVmVyc2lvbigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRPUygpLnZlcnNpb247XG4gIH1cblxuICAvKipcbiAgICogR2V0IHBhcnNlZCBwbGF0Zm9ybVxuICAgKiBAcmV0dXJuIHt7fX1cbiAgICovXG4gIGdldFBsYXRmb3JtKCkge1xuICAgIGlmICh0aGlzLnBhcnNlZFJlc3VsdC5wbGF0Zm9ybSkge1xuICAgICAgcmV0dXJuIHRoaXMucGFyc2VkUmVzdWx0LnBsYXRmb3JtO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnBhcnNlUGxhdGZvcm0oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcGxhdGZvcm0gbmFtZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt0b0xvd2VyQ2FzZT1mYWxzZV1cbiAgICogQHJldHVybiB7Kn1cbiAgICovXG4gIGdldFBsYXRmb3JtVHlwZSh0b0xvd2VyQ2FzZSA9IGZhbHNlKSB7XG4gICAgY29uc3QgeyB0eXBlIH0gPSB0aGlzLmdldFBsYXRmb3JtKCk7XG5cbiAgICBpZiAodG9Mb3dlckNhc2UpIHtcbiAgICAgIHJldHVybiBTdHJpbmcodHlwZSkudG9Mb3dlckNhc2UoKSB8fCAnJztcbiAgICB9XG5cbiAgICByZXR1cm4gdHlwZSB8fCAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcGFyc2VkIHBsYXRmb3JtXG4gICAqIEByZXR1cm4ge3t9fVxuICAgKi9cbiAgcGFyc2VQbGF0Zm9ybSgpIHtcbiAgICB0aGlzLnBhcnNlZFJlc3VsdC5wbGF0Zm9ybSA9IHt9O1xuXG4gICAgY29uc3QgcGxhdGZvcm0gPSBVdGlscy5maW5kKHBsYXRmb3JtUGFyc2Vyc0xpc3QsIChfcGxhdGZvcm0pID0+IHtcbiAgICAgIGlmICh0eXBlb2YgX3BsYXRmb3JtLnRlc3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIF9wbGF0Zm9ybS50ZXN0KHRoaXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAoX3BsYXRmb3JtLnRlc3QgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICByZXR1cm4gX3BsYXRmb3JtLnRlc3Quc29tZShjb25kaXRpb24gPT4gdGhpcy50ZXN0KGNvbmRpdGlvbikpO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCcm93c2VyJ3MgdGVzdCBmdW5jdGlvbiBpcyBub3QgdmFsaWRcIik7XG4gICAgfSk7XG5cbiAgICBpZiAocGxhdGZvcm0pIHtcbiAgICAgIHRoaXMucGFyc2VkUmVzdWx0LnBsYXRmb3JtID0gcGxhdGZvcm0uZGVzY3JpYmUodGhpcy5nZXRVQSgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wYXJzZWRSZXN1bHQucGxhdGZvcm07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHBhcnNlZCBlbmdpbmVcbiAgICogQHJldHVybiB7e319XG4gICAqL1xuICBnZXRFbmdpbmUoKSB7XG4gICAgaWYgKHRoaXMucGFyc2VkUmVzdWx0LmVuZ2luZSkge1xuICAgICAgcmV0dXJuIHRoaXMucGFyc2VkUmVzdWx0LmVuZ2luZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wYXJzZUVuZ2luZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBlbmdpbmVzJ3MgbmFtZVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IEVuZ2luZXMncyBuYW1lIG9yIGFuIGVtcHR5IHN0cmluZ1xuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRFbmdpbmVOYW1lKHRvTG93ZXJDYXNlKSB7XG4gICAgaWYgKHRvTG93ZXJDYXNlKSB7XG4gICAgICByZXR1cm4gU3RyaW5nKHRoaXMuZ2V0RW5naW5lKCkubmFtZSkudG9Mb3dlckNhc2UoKSB8fCAnJztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZ2V0RW5naW5lKCkubmFtZSB8fCAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcGFyc2VkIHBsYXRmb3JtXG4gICAqIEByZXR1cm4ge3t9fVxuICAgKi9cbiAgcGFyc2VFbmdpbmUoKSB7XG4gICAgdGhpcy5wYXJzZWRSZXN1bHQuZW5naW5lID0ge307XG5cbiAgICBjb25zdCBlbmdpbmUgPSBVdGlscy5maW5kKGVuZ2luZXNQYXJzZXJzTGlzdCwgKF9lbmdpbmUpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgX2VuZ2luZS50ZXN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBfZW5naW5lLnRlc3QodGhpcyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChfZW5naW5lLnRlc3QgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICByZXR1cm4gX2VuZ2luZS50ZXN0LnNvbWUoY29uZGl0aW9uID0+IHRoaXMudGVzdChjb25kaXRpb24pKTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQnJvd3NlcidzIHRlc3QgZnVuY3Rpb24gaXMgbm90IHZhbGlkXCIpO1xuICAgIH0pO1xuXG4gICAgaWYgKGVuZ2luZSkge1xuICAgICAgdGhpcy5wYXJzZWRSZXN1bHQuZW5naW5lID0gZW5naW5lLmRlc2NyaWJlKHRoaXMuZ2V0VUEoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucGFyc2VkUmVzdWx0LmVuZ2luZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBmdWxsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBicm93c2VyXG4gICAqIEByZXR1cm5zIHtQYXJzZXJ9XG4gICAqL1xuICBwYXJzZSgpIHtcbiAgICB0aGlzLnBhcnNlQnJvd3NlcigpO1xuICAgIHRoaXMucGFyc2VPUygpO1xuICAgIHRoaXMucGFyc2VQbGF0Zm9ybSgpO1xuICAgIHRoaXMucGFyc2VFbmdpbmUoKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwYXJzZWQgcmVzdWx0XG4gICAqIEByZXR1cm4ge1BhcnNlZFJlc3VsdH1cbiAgICovXG4gIGdldFJlc3VsdCgpIHtcbiAgICByZXR1cm4gVXRpbHMuYXNzaWduKHt9LCB0aGlzLnBhcnNlZFJlc3VsdCk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgcGFyc2VkIGJyb3dzZXIgbWF0Y2hlcyBjZXJ0YWluIGNvbmRpdGlvbnNcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGNoZWNrVHJlZSBJdCdzIG9uZSBvciB0d28gbGF5ZXJlZCBvYmplY3QsXG4gICAqIHdoaWNoIGNhbiBpbmNsdWRlIGEgcGxhdGZvcm0gb3IgYW4gT1Mgb24gdGhlIGZpcnN0IGxheWVyXG4gICAqIGFuZCBzaG91bGQgaGF2ZSBicm93c2VycyBzcGVjcyBvbiB0aGUgYm90dG9tLWxheWluZyBsYXllclxuICAgKlxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbnx1bmRlZmluZWR9IFdoZXRoZXIgdGhlIGJyb3dzZXIgc2F0aXNmaWVzIHRoZSBzZXQgY29uZGl0aW9ucyBvciBub3QuXG4gICAqIFJldHVybnMgYHVuZGVmaW5lZGAgd2hlbiB0aGUgYnJvd3NlciBpcyBubyBkZXNjcmliZWQgaW4gdGhlIGNoZWNrVHJlZSBvYmplY3QuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IGJyb3dzZXIgPSBCb3dzZXIuZ2V0UGFyc2VyKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICogaWYgKGJyb3dzZXIuc2F0aXNmaWVzKHtjaHJvbWU6ICc+MTE4LjAxLjEzMjInIH0pKVxuICAgKiAvLyBvciB3aXRoIG9zXG4gICAqIGlmIChicm93c2VyLnNhdGlzZmllcyh7d2luZG93czogeyBjaHJvbWU6ICc+MTE4LjAxLjEzMjInIH0gfSkpXG4gICAqIC8vIG9yIHdpdGggcGxhdGZvcm1zXG4gICAqIGlmIChicm93c2VyLnNhdGlzZmllcyh7ZGVza3RvcDogeyBjaHJvbWU6ICc+MTE4LjAxLjEzMjInIH0gfSkpXG4gICAqL1xuICBzYXRpc2ZpZXMoY2hlY2tUcmVlKSB7XG4gICAgY29uc3QgcGxhdGZvcm1zQW5kT1NlcyA9IHt9O1xuICAgIGxldCBwbGF0Zm9ybXNBbmRPU0NvdW50ZXIgPSAwO1xuICAgIGNvbnN0IGJyb3dzZXJzID0ge307XG4gICAgbGV0IGJyb3dzZXJzQ291bnRlciA9IDA7XG5cbiAgICBjb25zdCBhbGxEZWZpbml0aW9ucyA9IE9iamVjdC5rZXlzKGNoZWNrVHJlZSk7XG5cbiAgICBhbGxEZWZpbml0aW9ucy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnREZWZpbml0aW9uID0gY2hlY2tUcmVlW2tleV07XG4gICAgICBpZiAodHlwZW9mIGN1cnJlbnREZWZpbml0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICBicm93c2Vyc1trZXldID0gY3VycmVudERlZmluaXRpb247XG4gICAgICAgIGJyb3dzZXJzQ291bnRlciArPSAxO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY3VycmVudERlZmluaXRpb24gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHBsYXRmb3Jtc0FuZE9TZXNba2V5XSA9IGN1cnJlbnREZWZpbml0aW9uO1xuICAgICAgICBwbGF0Zm9ybXNBbmRPU0NvdW50ZXIgKz0gMTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChwbGF0Zm9ybXNBbmRPU0NvdW50ZXIgPiAwKSB7XG4gICAgICBjb25zdCBwbGF0Zm9ybXNBbmRPU05hbWVzID0gT2JqZWN0LmtleXMocGxhdGZvcm1zQW5kT1Nlcyk7XG4gICAgICBjb25zdCBPU01hdGNoaW5nRGVmaW5pdGlvbiA9IFV0aWxzLmZpbmQocGxhdGZvcm1zQW5kT1NOYW1lcywgbmFtZSA9PiAodGhpcy5pc09TKG5hbWUpKSk7XG5cbiAgICAgIGlmIChPU01hdGNoaW5nRGVmaW5pdGlvbikge1xuICAgICAgICBjb25zdCBvc1Jlc3VsdCA9IHRoaXMuc2F0aXNmaWVzKHBsYXRmb3Jtc0FuZE9TZXNbT1NNYXRjaGluZ0RlZmluaXRpb25dKTtcblxuICAgICAgICBpZiAob3NSZXN1bHQgIT09IHZvaWQgMCkge1xuICAgICAgICAgIHJldHVybiBvc1Jlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBwbGF0Zm9ybU1hdGNoaW5nRGVmaW5pdGlvbiA9IFV0aWxzLmZpbmQoXG4gICAgICAgIHBsYXRmb3Jtc0FuZE9TTmFtZXMsXG4gICAgICAgIG5hbWUgPT4gKHRoaXMuaXNQbGF0Zm9ybShuYW1lKSksXG4gICAgICApO1xuICAgICAgaWYgKHBsYXRmb3JtTWF0Y2hpbmdEZWZpbml0aW9uKSB7XG4gICAgICAgIGNvbnN0IHBsYXRmb3JtUmVzdWx0ID0gdGhpcy5zYXRpc2ZpZXMocGxhdGZvcm1zQW5kT1Nlc1twbGF0Zm9ybU1hdGNoaW5nRGVmaW5pdGlvbl0pO1xuXG4gICAgICAgIGlmIChwbGF0Zm9ybVJlc3VsdCAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgcmV0dXJuIHBsYXRmb3JtUmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGJyb3dzZXJzQ291bnRlciA+IDApIHtcbiAgICAgIGNvbnN0IGJyb3dzZXJOYW1lcyA9IE9iamVjdC5rZXlzKGJyb3dzZXJzKTtcbiAgICAgIGNvbnN0IG1hdGNoaW5nRGVmaW5pdGlvbiA9IFV0aWxzLmZpbmQoYnJvd3Nlck5hbWVzLCBuYW1lID0+ICh0aGlzLmlzQnJvd3NlcihuYW1lLCB0cnVlKSkpO1xuXG4gICAgICBpZiAobWF0Y2hpbmdEZWZpbml0aW9uICE9PSB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZVZlcnNpb24oYnJvd3NlcnNbbWF0Y2hpbmdEZWZpbml0aW9uXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgYnJvd3NlciBuYW1lIGVxdWFscyB0aGUgcGFzc2VkIHN0cmluZ1xuICAgKiBAcGFyYW0gYnJvd3Nlck5hbWUgVGhlIHN0cmluZyB0byBjb21wYXJlIHdpdGggdGhlIGJyb3dzZXIgbmFtZVxuICAgKiBAcGFyYW0gW2luY2x1ZGluZ0FsaWFzPWZhbHNlXSBUaGUgZmxhZyBzaG93aW5nIHdoZXRoZXIgYWxpYXMgd2lsbCBiZSBpbmNsdWRlZCBpbnRvIGNvbXBhcmlzb25cbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBpc0Jyb3dzZXIoYnJvd3Nlck5hbWUsIGluY2x1ZGluZ0FsaWFzID0gZmFsc2UpIHtcbiAgICBjb25zdCBkZWZhdWx0QnJvd3Nlck5hbWUgPSB0aGlzLmdldEJyb3dzZXJOYW1lKCkudG9Mb3dlckNhc2UoKTtcbiAgICBsZXQgYnJvd3Nlck5hbWVMb3dlciA9IGJyb3dzZXJOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgYWxpYXMgPSBVdGlscy5nZXRCcm93c2VyVHlwZUJ5QWxpYXMoYnJvd3Nlck5hbWVMb3dlcik7XG5cbiAgICBpZiAoaW5jbHVkaW5nQWxpYXMgJiYgYWxpYXMpIHtcbiAgICAgIGJyb3dzZXJOYW1lTG93ZXIgPSBhbGlhcy50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbiAgICByZXR1cm4gYnJvd3Nlck5hbWVMb3dlciA9PT0gZGVmYXVsdEJyb3dzZXJOYW1lO1xuICB9XG5cbiAgY29tcGFyZVZlcnNpb24odmVyc2lvbikge1xuICAgIGxldCBleHBlY3RlZFJlc3VsdHMgPSBbMF07XG4gICAgbGV0IGNvbXBhcmFibGVWZXJzaW9uID0gdmVyc2lvbjtcbiAgICBsZXQgaXNMb29zZSA9IGZhbHNlO1xuXG4gICAgY29uc3QgY3VycmVudEJyb3dzZXJWZXJzaW9uID0gdGhpcy5nZXRCcm93c2VyVmVyc2lvbigpO1xuXG4gICAgaWYgKHR5cGVvZiBjdXJyZW50QnJvd3NlclZlcnNpb24gIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cblxuICAgIGlmICh2ZXJzaW9uWzBdID09PSAnPicgfHwgdmVyc2lvblswXSA9PT0gJzwnKSB7XG4gICAgICBjb21wYXJhYmxlVmVyc2lvbiA9IHZlcnNpb24uc3Vic3RyKDEpO1xuICAgICAgaWYgKHZlcnNpb25bMV0gPT09ICc9Jykge1xuICAgICAgICBpc0xvb3NlID0gdHJ1ZTtcbiAgICAgICAgY29tcGFyYWJsZVZlcnNpb24gPSB2ZXJzaW9uLnN1YnN0cigyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGV4cGVjdGVkUmVzdWx0cyA9IFtdO1xuICAgICAgfVxuICAgICAgaWYgKHZlcnNpb25bMF0gPT09ICc+Jykge1xuICAgICAgICBleHBlY3RlZFJlc3VsdHMucHVzaCgxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGV4cGVjdGVkUmVzdWx0cy5wdXNoKC0xKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHZlcnNpb25bMF0gPT09ICc9Jykge1xuICAgICAgY29tcGFyYWJsZVZlcnNpb24gPSB2ZXJzaW9uLnN1YnN0cigxKTtcbiAgICB9IGVsc2UgaWYgKHZlcnNpb25bMF0gPT09ICd+Jykge1xuICAgICAgaXNMb29zZSA9IHRydWU7XG4gICAgICBjb21wYXJhYmxlVmVyc2lvbiA9IHZlcnNpb24uc3Vic3RyKDEpO1xuICAgIH1cblxuICAgIHJldHVybiBleHBlY3RlZFJlc3VsdHMuaW5kZXhPZihcbiAgICAgIFV0aWxzLmNvbXBhcmVWZXJzaW9ucyhjdXJyZW50QnJvd3NlclZlcnNpb24sIGNvbXBhcmFibGVWZXJzaW9uLCBpc0xvb3NlKSxcbiAgICApID4gLTE7XG4gIH1cblxuICBpc09TKG9zTmFtZSkge1xuICAgIHJldHVybiB0aGlzLmdldE9TTmFtZSh0cnVlKSA9PT0gU3RyaW5nKG9zTmFtZSkudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIGlzUGxhdGZvcm0ocGxhdGZvcm1UeXBlKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UGxhdGZvcm1UeXBlKHRydWUpID09PSBTdHJpbmcocGxhdGZvcm1UeXBlKS50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgaXNFbmdpbmUoZW5naW5lTmFtZSkge1xuICAgIHJldHVybiB0aGlzLmdldEVuZ2luZU5hbWUodHJ1ZSkgPT09IFN0cmluZyhlbmdpbmVOYW1lKS50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIElzIGFueXRoaW5nPyBDaGVjayBpZiB0aGUgYnJvd3NlciBpcyBjYWxsZWQgXCJhbnl0aGluZ1wiLFxuICAgKiB0aGUgT1MgY2FsbGVkIFwiYW55dGhpbmdcIiBvciB0aGUgcGxhdGZvcm0gY2FsbGVkIFwiYW55dGhpbmdcIlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYW55dGhpbmdcbiAgICogQHBhcmFtIFtpbmNsdWRpbmdBbGlhcz1mYWxzZV0gVGhlIGZsYWcgc2hvd2luZyB3aGV0aGVyIGFsaWFzIHdpbGwgYmUgaW5jbHVkZWQgaW50byBjb21wYXJpc29uXG4gICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgKi9cbiAgaXMoYW55dGhpbmcsIGluY2x1ZGluZ0FsaWFzID0gZmFsc2UpIHtcbiAgICByZXR1cm4gdGhpcy5pc0Jyb3dzZXIoYW55dGhpbmcsIGluY2x1ZGluZ0FsaWFzKSB8fCB0aGlzLmlzT1MoYW55dGhpbmcpXG4gICAgICB8fCB0aGlzLmlzUGxhdGZvcm0oYW55dGhpbmcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFueSBvZiB0aGUgZ2l2ZW4gdmFsdWVzIHNhdGlzZmllcyB0aGlzLmlzKGFueXRoaW5nKVxuICAgKiBAcGFyYW0ge1N0cmluZ1tdfSBhbnl0aGluZ3NcbiAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAqL1xuICBzb21lKGFueXRoaW5ncyA9IFtdKSB7XG4gICAgcmV0dXJuIGFueXRoaW5ncy5zb21lKGFueXRoaW5nID0+IHRoaXMuaXMoYW55dGhpbmcpKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQYXJzZXI7XG4iLCIvKiFcbiAqIEJvd3NlciAtIGEgYnJvd3NlciBkZXRlY3RvclxuICogaHR0cHM6Ly9naXRodWIuY29tL2xhbmNlZGlrc29uL2Jvd3NlclxuICogTUlUIExpY2Vuc2UgfCAoYykgRHVzdGluIERpYXogMjAxMi0yMDE1XG4gKiBNSVQgTGljZW5zZSB8IChjKSBEZW5pcyBEZW1jaGVua28gMjAxNS0yMDE5XG4gKi9cbmltcG9ydCBQYXJzZXIgZnJvbSAnLi9wYXJzZXIuanMnO1xuaW1wb3J0IHtcbiAgQlJPV1NFUl9NQVAsXG4gIEVOR0lORV9NQVAsXG4gIE9TX01BUCxcbiAgUExBVEZPUk1TX01BUCxcbn0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuXG4vKipcbiAqIEJvd3NlciBjbGFzcy5cbiAqIEtlZXAgaXQgc2ltcGxlIGFzIG11Y2ggYXMgaXQgY2FuIGJlLlxuICogSXQncyBzdXBwb3NlZCB0byB3b3JrIHdpdGggY29sbGVjdGlvbnMgb2Yge0BsaW5rIFBhcnNlcn0gaW5zdGFuY2VzXG4gKiByYXRoZXIgdGhlbiBzb2x2ZSBvbmUtaW5zdGFuY2UgcHJvYmxlbXMuXG4gKiBBbGwgdGhlIG9uZS1pbnN0YW5jZSBzdHVmZiBpcyBsb2NhdGVkIGluIFBhcnNlciBjbGFzcy5cbiAqXG4gKiBAY2xhc3NcbiAqIEBjbGFzc2Rlc2MgQm93c2VyIGlzIGEgc3RhdGljIG9iamVjdCwgdGhhdCBwcm92aWRlcyBhbiBBUEkgdG8gdGhlIFBhcnNlcnNcbiAqIEBoaWRlY29uc3RydWN0b3JcbiAqL1xuY2xhc3MgQm93c2VyIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB7QGxpbmsgUGFyc2VyfSBpbnN0YW5jZVxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gVUEgVXNlckFnZW50IHN0cmluZ1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtza2lwUGFyc2luZz1mYWxzZV0gV2lsbCBtYWtlIHRoZSBQYXJzZXIgcG9zdHBvbmUgcGFyc2luZyB1bnRpbCB5b3UgYXNrIGl0XG4gICAqIGV4cGxpY2l0bHkuIFNhbWUgYXMgYHNraXBQYXJzaW5nYCBmb3Ige0BsaW5rIFBhcnNlcn0uXG4gICAqIEByZXR1cm5zIHtQYXJzZXJ9XG4gICAqIEB0aHJvd3Mge0Vycm9yfSB3aGVuIFVBIGlzIG5vdCBhIFN0cmluZ1xuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBwYXJzZXIgPSBCb3dzZXIuZ2V0UGFyc2VyKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICogY29uc3QgcmVzdWx0ID0gcGFyc2VyLmdldFJlc3VsdCgpO1xuICAgKi9cbiAgc3RhdGljIGdldFBhcnNlcihVQSwgc2tpcFBhcnNpbmcgPSBmYWxzZSkge1xuICAgIGlmICh0eXBlb2YgVUEgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXJBZ2VudCBzaG91bGQgYmUgYSBzdHJpbmcnKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQYXJzZXIoVUEsIHNraXBQYXJzaW5nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEge0BsaW5rIFBhcnNlcn0gaW5zdGFuY2UgYW5kIHJ1bnMge0BsaW5rIFBhcnNlci5nZXRSZXN1bHR9IGltbWVkaWF0ZWx5XG4gICAqXG4gICAqIEBwYXJhbSBVQVxuICAgKiBAcmV0dXJuIHtQYXJzZWRSZXN1bHR9XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IHJlc3VsdCA9IEJvd3Nlci5wYXJzZSh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAqL1xuICBzdGF0aWMgcGFyc2UoVUEpIHtcbiAgICByZXR1cm4gKG5ldyBQYXJzZXIoVUEpKS5nZXRSZXN1bHQoKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQlJPV1NFUl9NQVAoKSB7XG4gICAgcmV0dXJuIEJST1dTRVJfTUFQO1xuICB9XG5cbiAgc3RhdGljIGdldCBFTkdJTkVfTUFQKCkge1xuICAgIHJldHVybiBFTkdJTkVfTUFQO1xuICB9XG5cbiAgc3RhdGljIGdldCBPU19NQVAoKSB7XG4gICAgcmV0dXJuIE9TX01BUDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgUExBVEZPUk1TX01BUCgpIHtcbiAgICByZXR1cm4gUExBVEZPUk1TX01BUDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCb3dzZXI7XG4iLCJpbXBvcnQgQm93c2VyIGZyb20gJ2Jvd3Nlcic7XG5jb25zdCBicm93c2VyID0gdHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgQm93c2VyLmdldFBhcnNlcih3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5leHBvcnQgZnVuY3Rpb24gZ2VyV2luZG93Qm9yZGVyKCkge1xuICAgIHN3aXRjaCAoYnJvd3NlciA9PT0gbnVsbCB8fCBicm93c2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBicm93c2VyLmdldE9TTmFtZSh0cnVlKSkge1xuICAgICAgICBjYXNlICd3aW5kb3dzJzoge1xuICAgICAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgICAgIHN3aXRjaCAoYnJvd3Nlci5nZXRCcm93c2VyTmFtZSh0cnVlKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZpcmVmb3gnOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBbNjgsIDgsIDhdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtaWNyb3NvZnQgZWRnZSc6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFs2MiwgOCwgOF07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIC8vY2FzZSAnY2hyb21lJzpcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBbNjAsIDgsIDhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFswXSAtPSAyO1xuICAgICAgICAgICAgICAgIHJlc3VsdFsxXSAtPSAxO1xuICAgICAgICAgICAgICAgIHJlc3VsdFsyXSAtPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdtYWNvcyc6IHtcbiAgICAgICAgICAgIHN3aXRjaCAoYnJvd3Nlci5nZXRCcm93c2VyTmFtZSh0cnVlKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NhZmFyaSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMjIsIDAsIDBdO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZpcmVmb3gnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzU5LCAwLCAwXTtcbiAgICAgICAgICAgICAgICAvL2Nhc2UgJ2Nocm9tZSc6XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs1MSwgMCwgMF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFs2MCwgOCwgOF07XG59XG5leHBvcnQgY29uc3QgaXNTYWZhcmkgPSAoYnJvd3NlciA9PT0gbnVsbCB8fCBicm93c2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBicm93c2VyLmdldEJyb3dzZXJOYW1lKHRydWUpKSA9PT0gJ3NhZmFyaSc7XG5leHBvcnQgY29uc3QgcG9wdXBTdXBwb3J0ZWQgPSAoYnJvd3NlciA9PT0gbnVsbCB8fCBicm93c2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBicm93c2VyLmdldFBsYXRmb3JtVHlwZSgpKSA9PT0gJ2Rlc2t0b3AnO1xuZXhwb3J0IGNvbnN0IHBvcHVwV2luZG93Qm9yZGVyID0gZ2VyV2luZG93Qm9yZGVyKCk7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoL2RlYm91bmNlJztcbmltcG9ydCB7IGlzU2FmYXJpLCBwb3B1cFN1cHBvcnRlZCwgcG9wdXBXaW5kb3dCb3JkZXIgfSBmcm9tICcuL0Jyb3dzZXJQb3B1cFdpbmRvdyc7XG5jb25zdCBvbk5ld1dpbmRvd1Jlc2l6ZSA9IGRlYm91bmNlKCgpID0+IHtcbiAgICAvLyBhZGQvcmVtb3ZlIGVsZW1lbnQgb24gbWFpbiBkb2N1bWVudCwgZm9yY2UgaXQgdG8gZGlzcGF0Y2ggcmVzaXplIG9ic2VydmVyIGV2ZW50IG9uIHRoZSBwb3B1cCB3aW5kb3dcbiAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmQoZGl2KTtcbiAgICBkaXYucmVtb3ZlKCk7XG4gICAgLy8gVE9ETyB1cGRhdGUgcmVzaXplIGV2ZW50XG59LCAyMDApO1xuLyoqXG4gKiBUaGUgTmV3V2luZG93IGNsYXNzIG9iamVjdC5cbiAqIEBwdWJsaWNcbiAqL1xuY2xhc3MgTmV3V2luZG93IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgLyoqXG4gICAgICogVGhlIE5ld1dpbmRvdyBmdW5jdGlvbiBjb25zdHJ1Y3Rvci5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMucmVsZWFzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHsgbW91bnRlZDogZmFsc2UgfTtcbiAgICAgICAgdGhpcy5vbk1haW5XaW5kb3dVbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy53aW5kb3cpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndpbmRvdy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVsZWFzZSB0aGUgbmV3IHdpbmRvdyBhbmQgYW55dGhpbmcgdGhhdCB3YXMgYm91bmQgdG8gaXQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlbGVhc2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIC8vIFRoaXMgbWV0aG9kIGNhbiBiZSBjYWxsZWQgb25jZS5cbiAgICAgICAgICAgIGlmICh0aGlzLnJlbGVhc2VkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZWxlYXNlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGhpcy53aW5kb3dDaGVja2VySW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMud2luZG93Q2hlY2tlckludGVydmFsKTtcbiAgICAgICAgICAgICAgICB0aGlzLndpbmRvd0NoZWNrZXJJbnRlcnZhbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5vbk1haW5XaW5kb3dVbmxvYWQpO1xuICAgICAgICAgICAgdGhpcy53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5yZWxlYXNlKTtcbiAgICAgICAgICAgIGlmIChldmVudCkge1xuICAgICAgICAgICAgICAgIC8vIENhbGwgYW55IGZ1bmN0aW9uIGJvdW5kIHRvIHRoZSBgb25VbmxvYWRgIHByb3AuXG4gICAgICAgICAgICAgICAgY29uc3QgeyBvbkNsb3NlIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb25DbG9zZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBvbkNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgdGhlIE5ld1dpbmRvdyBjb21wb25lbnQuXG4gICAgICovXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUubW91bnRlZClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gUmVhY3RET00uY3JlYXRlUG9ydGFsKHRoaXMucHJvcHMuY2hpbGRyZW4sIHRoaXMuY29udGFpbmVyKTtcbiAgICB9XG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHRoaXMub3BlbkNoaWxkKCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBtb3VudGVkOiB0cnVlIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIG5ldyB3aW5kb3cgd2hlbiBOZXdXaW5kb3cgY29tcG9uZW50IG1vdW50LlxuICAgICAqL1xuICAgIG9wZW5DaGlsZCgpIHtcbiAgICAgICAgY29uc3QgeyB1cmwsIHRpdGxlLCBuYW1lLCB3aWR0aCwgaGVpZ2h0LCBpbml0UG9wdXBJbm5lclJlY3QsIGluaXRQb3B1cE91dGVyUmVjdCwgb25CbG9jaywgb25PcGVuLCBvbkNsb3NlLCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgbGV0IGZlYXR1cmVzID0geyB3aWR0aCwgaGVpZ2h0IH07XG4gICAgICAgIGlmIChpbml0UG9wdXBPdXRlclJlY3QpIHtcbiAgICAgICAgICAgIGZlYXR1cmVzID0gaW5pdFBvcHVwT3V0ZXJSZWN0KCk7XG4gICAgICAgICAgICBjb25zdCBbdG9wQm9yZGVyLCBzaWRlQm9yZGVyLCBib3R0b21Cb3JkZXJdID0gcG9wdXBXaW5kb3dCb3JkZXI7XG4gICAgICAgICAgICBpZiAoIWlzU2FmYXJpKSB7XG4gICAgICAgICAgICAgICAgZmVhdHVyZXMud2lkdGggLT0gc2lkZUJvcmRlciAqIDI7XG4gICAgICAgICAgICAgICAgZmVhdHVyZXMuaGVpZ2h0IC09IHRvcEJvcmRlciArIGJvdHRvbUJvcmRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbml0UG9wdXBJbm5lclJlY3QpIHtcbiAgICAgICAgICAgIGZlYXR1cmVzID0gaW5pdFBvcHVwSW5uZXJSZWN0KCk7XG4gICAgICAgICAgICBjb25zdCBbdG9wQm9yZGVyLCBzaWRlQm9yZGVyXSA9IHBvcHVwV2luZG93Qm9yZGVyO1xuICAgICAgICAgICAgZmVhdHVyZXMubGVmdCAtPSBzaWRlQm9yZGVyO1xuICAgICAgICAgICAgZmVhdHVyZXMudG9wIC09IHRvcEJvcmRlcjtcbiAgICAgICAgICAgIGlmIChpc1NhZmFyaSkge1xuICAgICAgICAgICAgICAgIGZlYXR1cmVzLmhlaWdodCArPSB0b3BCb3JkZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmZWF0dXJlcy5sZWZ0ID0gd2luZG93LnRvcC5vdXRlcldpZHRoIC8gMiArIHdpbmRvdy50b3Auc2NyZWVuWCAtIHdpZHRoIC8gMjtcbiAgICAgICAgICAgIGZlYXR1cmVzLnRvcCA9IHdpbmRvdy50b3Aub3V0ZXJIZWlnaHQgLyAyICsgd2luZG93LnRvcC5zY3JlZW5ZIC0gaGVpZ2h0IC8gMjtcbiAgICAgICAgfVxuICAgICAgICAvLyBPcGVuIGEgbmV3IHdpbmRvdy5cbiAgICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3cub3Blbih1cmwsIG5hbWUsIHRvV2luZG93RmVhdHVyZXMoZmVhdHVyZXMpKTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIG5ldyB3aW5kb3cgd2FzIHN1Y2Nlc3NmdWxseSBvcGVuZWQuXG4gICAgICAgIGlmICh0aGlzLndpbmRvdykge1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHRoaXMub25NYWluV2luZG93VW5sb2FkKTtcbiAgICAgICAgICAgIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uTmV3V2luZG93UmVzaXplKTtcbiAgICAgICAgICAgIHRoaXMud2luZG93LmRvY3VtZW50LnRpdGxlID0gdGl0bGUgfHwgZG9jdW1lbnQudGl0bGU7XG4gICAgICAgICAgICB0aGlzLndpbmRvdy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgICAgIC8vIElmIHNwZWNpZmllZCwgY29weSBzdHlsZXMgZnJvbSBwYXJlbnQgd2luZG93J3MgZG9jdW1lbnQuXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5jb3B5U3R5bGVzKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBjb3B5U3R5bGVzKGRvY3VtZW50LCB0aGlzLndpbmRvdy5kb2N1bWVudCksIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbk9wZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvbk9wZW4odGhpcy53aW5kb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVybCAmJiBvbkNsb3NlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy53aW5kb3dDaGVja2VySW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy53aW5kb3cgfHwgdGhpcy53aW5kb3cuY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbGVhc2UodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZWxlYXNlIGFueXRoaW5nIGJvdW5kIHRvIHRoaXMgY29tcG9uZW50IGJlZm9yZSB0aGUgbmV3IHdpbmRvdyB1bmxvYWQuXG4gICAgICAgICAgICB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCB0aGlzLnJlbGVhc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gSGFuZGxlIGVycm9yIG9uIG9wZW5pbmcgb2YgbmV3IHdpbmRvdy5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25CbG9jayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG9uQmxvY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignQSBuZXcgd2luZG93IGNvdWxkIG5vdCBiZSBvcGVuZWQuIE1heWJlIGl0IHdhcyBibG9ja2VkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlIHRoZSBvcGVuZWQgd2luZG93IChpZiBhbnkpIHdoZW4gTmV3V2luZG93IHdpbGwgdW5tb3VudC5cbiAgICAgKi9cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgaWYgKHRoaXMud2luZG93KSB7XG4gICAgICAgICAgICB0aGlzLnJlbGVhc2UoKTtcbiAgICAgICAgICAgIHRoaXMud2luZG93LmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5OZXdXaW5kb3cuc3VwcG9ydGVkID0gcG9wdXBTdXBwb3J0ZWQ7XG4vKipcbiAqIE5ld1dpbmRvdyBkZWZhdWx0IHByb3BzLlxuICovXG5OZXdXaW5kb3cuZGVmYXVsdFByb3BzID0ge1xuICAgIHVybDogJycsXG4gICAgbmFtZTogJycsXG4gICAgd2lkdGg6IDY0MCxcbiAgICBoZWlnaHQ6IDQ4MCxcbiAgICBjb3B5U3R5bGVzOiB0cnVlLFxufTtcbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbnMuXG4gKiBAcHJpdmF0ZVxuICovXG4vKipcbiAqIENvcHkgc3R5bGVzIGZyb20gYSBzb3VyY2UgZG9jdW1lbnQgdG8gYSB0YXJnZXQuXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjb3B5U3R5bGVzKHNvdXJjZSwgdGFyZ2V0KSB7XG4gICAgQXJyYXkuZnJvbShzb3VyY2Uuc3R5bGVTaGVldHMpLmZvckVhY2goc3R5bGVTaGVldCA9PiB7XG4gICAgICAgIC8vIEZvciA8c3R5bGU+IGVsZW1lbnRzXG4gICAgICAgIGxldCBydWxlcztcbiAgICAgICAgaWYgKHN0eWxlU2hlZXQuaHJlZikge1xuICAgICAgICAgICAgLy8gZm9yIDxsaW5rPiBlbGVtZW50cyBsb2FkaW5nIENTUyBmcm9tIGEgVVJMXG4gICAgICAgICAgICBjb25zdCBuZXdMaW5rRWwgPSBzb3VyY2UuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICAgICAgICAgICAgbmV3TGlua0VsLnJlbCA9ICdzdHlsZXNoZWV0JztcbiAgICAgICAgICAgIG5ld0xpbmtFbC5ocmVmID0gc3R5bGVTaGVldC5ocmVmO1xuICAgICAgICAgICAgdGFyZ2V0LmhlYWQuYXBwZW5kQ2hpbGQobmV3TGlua0VsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcnVsZXMgPSBzdHlsZVNoZWV0LmNzc1J1bGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIC8vIGNhbid0IGFjY2VzcyBjcm9zc2RvbWFpbiBydWxlc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJ1bGVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3U3R5bGVFbCA9IHNvdXJjZS5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICAgICAgICAgIC8vIFdyaXRlIHRoZSB0ZXh0IG9mIGVhY2ggcnVsZSBpbnRvIHRoZSBib2R5IG9mIHRoZSBzdHlsZSBlbGVtZW50XG4gICAgICAgICAgICAgICAgQXJyYXkuZnJvbShzdHlsZVNoZWV0LmNzc1J1bGVzKS5mb3JFYWNoKGNzc1J1bGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGNzc1RleHQsIHR5cGUgfSA9IGNzc1J1bGU7XG4gICAgICAgICAgICAgICAgICAgIGxldCByZXR1cm5UZXh0ID0gY3NzVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNzc1J1bGUgdHlwZSBpcyBDU1NJbXBvcnRSdWxlICgzKSBvciBDU1NGb250RmFjZVJ1bGUgKDUpIHRvIGhhbmRsZSBsb2NhbCBpbXBvcnRzIG9uIGEgYWJvdXQ6YmxhbmsgcGFnZVxuICAgICAgICAgICAgICAgICAgICAvLyAnL2N1c3RvbS5jc3MnIHR1cm5zIHRvICdodHRwOi8vbXktc2l0ZS5jb20vY3VzdG9tLmNzcydcbiAgICAgICAgICAgICAgICAgICAgaWYgKFszLCA1XS5pbmNsdWRlcyh0eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVGV4dCA9IGNzc1RleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoJ3VybCgnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAobGluZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVbMV0gPT09ICcvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7bGluZS5zbGljZSgwLCAxKX0ke3dpbmRvdy5sb2NhdGlvbi5vcmlnaW59JHtsaW5lLnNsaWNlKDEpfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsaW5lO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbigndXJsKCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5ld1N0eWxlRWwuYXBwZW5kQ2hpbGQoc291cmNlLmNyZWF0ZVRleHROb2RlKHJldHVyblRleHQpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0YXJnZXQuaGVhZC5hcHBlbmRDaGlsZChuZXdTdHlsZUVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBDb252ZXJ0IGZlYXR1cmVzIHByb3BzIHRvIHdpbmRvdyBmZWF0dXJlcyBmb3JtYXQgKG5hbWU9dmFsdWUsb3RoZXI9dmFsdWUpLlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHJldHVybiB7U3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdG9XaW5kb3dGZWF0dXJlcyhvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKVxuICAgICAgICAucmVkdWNlKChmZWF0dXJlcywgbmFtZSkgPT4ge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IG9ialtuYW1lXTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGAke25hbWV9PSR7dmFsdWUgPyAneWVzJyA6ICdubyd9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGAke25hbWV9PSR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZlYXR1cmVzO1xuICAgIH0sIFtdKVxuICAgICAgICAuam9pbignLCcpO1xufVxuLyoqXG4gKiBDb21wb25lbnQgZXhwb3J0LlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGRlZmF1bHQgTmV3V2luZG93O1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgRG9ja0NvbnRleHRUeXBlLCBwbGFjZUhvbGRlclN0eWxlIH0gZnJvbSBcIi4vRG9ja0RhdGFcIjtcbmltcG9ydCB7IERyYWdEcm9wRGl2IH0gZnJvbSBcIi4vZHJhZ2Ryb3AvRHJhZ0Ryb3BEaXZcIjtcbmltcG9ydCB7IERyYWdTdGF0ZSB9IGZyb20gXCIuL2RyYWdkcm9wL0RyYWdNYW5hZ2VyXCI7XG5leHBvcnQgY2xhc3MgRG9ja0Ryb3BTcXVhcmUgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHsgZHJvcHBpbmc6IGZhbHNlIH07XG4gICAgICAgIHRoaXMub25EcmFnT3ZlciA9IChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgeyBwYW5lbEVsZW1lbnQ6IHRhcmdldEVsZW1lbnQsIGRpcmVjdGlvbiwgZGVwdGgsIHBhbmVsRGF0YSB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcm9wcGluZzogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVwdGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnQgPSB0YXJnZXRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFuZWxEYXRhLmdyb3VwID09PSBwbGFjZUhvbGRlclN0eWxlICYmIGRpcmVjdGlvbiAhPT0gJ2Zsb2F0Jykge1xuICAgICAgICAgICAgICAgIC8vIHBsYWNlIGhvbGRlciBwYW5lbCBzaG91bGQgYWx3YXlzIGhhdmUgZnVsbCBzaXplIGRyb3AgcmVjdFxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5zZXREcm9wUmVjdCh0YXJnZXRFbGVtZW50LCAnbWlkZGxlJywgdGhpcywgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgZG9ja0lkID0gdGhpcy5jb250ZXh0LmdldERvY2tJZCgpO1xuICAgICAgICAgICAgICAgIGxldCBwYW5lbFNpemUgPSBEcmFnU3RhdGUuZ2V0RGF0YSgncGFuZWxTaXplJywgZG9ja0lkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuc2V0RHJvcFJlY3QodGFyZ2V0RWxlbWVudCwgZGlyZWN0aW9uLCB0aGlzLCBlLCBwYW5lbFNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5hY2NlcHQoJycpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uRHJhZ0xlYXZlID0gKGUpID0+IHtcbiAgICAgICAgICAgIGxldCB7IHBhbmVsRWxlbWVudCwgZGlyZWN0aW9uIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRyb3BwaW5nOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5zZXREcm9wUmVjdChudWxsLCAncmVtb3ZlJywgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25Ecm9wID0gKGUpID0+IHtcbiAgICAgICAgICAgIGxldCBkb2NrSWQgPSB0aGlzLmNvbnRleHQuZ2V0RG9ja0lkKCk7XG4gICAgICAgICAgICBsZXQgc291cmNlID0gRHJhZ1N0YXRlLmdldERhdGEoJ3RhYicsIGRvY2tJZCk7XG4gICAgICAgICAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHNvdXJjZSA9IERyYWdTdGF0ZS5nZXREYXRhKCdwYW5lbCcsIGRvY2tJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHsgcGFuZWxEYXRhLCBkaXJlY3Rpb24sIGRlcHRoIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgICAgIGxldCB0YXJnZXQgPSBwYW5lbERhdGE7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXB0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5kb2NrTW92ZShzb3VyY2UsIHRhcmdldCwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgeyBkaXJlY3Rpb24sIGRlcHRoIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBsZXQgeyBkcm9wcGluZyB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgbGV0IGNsYXNzZXMgPSBbJ2RvY2stZHJvcC1zcXVhcmUnXTtcbiAgICAgICAgY2xhc3Nlcy5wdXNoKGBkb2NrLWRyb3AtJHtkaXJlY3Rpb259YCk7XG4gICAgICAgIGlmIChkZXB0aCkge1xuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKGBkb2NrLWRyb3AtZGVlcGApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkcm9wcGluZykge1xuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdkb2NrLWRyb3Atc3F1YXJlLWRyb3BwaW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KERyYWdEcm9wRGl2LCB7IGNsYXNzTmFtZTogY2xhc3Nlcy5qb2luKCcgJyksIG9uRHJhZ092ZXJUOiB0aGlzLm9uRHJhZ092ZXIsIG9uRHJhZ0xlYXZlVDogdGhpcy5vbkRyYWdMZWF2ZSwgb25Ecm9wVDogdGhpcy5vbkRyb3AgfSxcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6ICdkb2NrLWRyb3Atc3F1YXJlLWJveCcgfSkpKTtcbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHRoaXMuY29udGV4dC5zZXREcm9wUmVjdChudWxsLCAncmVtb3ZlJywgdGhpcyk7XG4gICAgfVxufVxuRG9ja0Ryb3BTcXVhcmUuY29udGV4dFR5cGUgPSBEb2NrQ29udGV4dFR5cGU7XG5leHBvcnQgY2xhc3MgRG9ja0Ryb3BMYXllciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBhZGREZXB0aFNxdWFyZShjaGlsZHJlbiwgbW9kZSwgcGFuZWxEYXRhLCBwYW5lbEVsZW1lbnQsIGRlcHRoKSB7XG4gICAgICAgIGlmIChtb2RlID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChEb2NrRHJvcFNxdWFyZSwgeyBrZXk6IGB0b3Ake2RlcHRofWAsIGRpcmVjdGlvbjogJ3RvcCcsIGRlcHRoOiBkZXB0aCwgcGFuZWxEYXRhOiBwYW5lbERhdGEsIHBhbmVsRWxlbWVudDogcGFuZWxFbGVtZW50IH0pKTtcbiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChEb2NrRHJvcFNxdWFyZSwgeyBrZXk6IGBib3R0b20ke2RlcHRofWAsIGRpcmVjdGlvbjogJ2JvdHRvbScsIGRlcHRoOiBkZXB0aCwgcGFuZWxEYXRhOiBwYW5lbERhdGEsIHBhbmVsRWxlbWVudDogcGFuZWxFbGVtZW50IH0pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChEb2NrRHJvcFNxdWFyZSwgeyBrZXk6IGBsZWZ0JHtkZXB0aH1gLCBkaXJlY3Rpb246ICdsZWZ0JywgZGVwdGg6IGRlcHRoLCBwYW5lbERhdGE6IHBhbmVsRGF0YSwgcGFuZWxFbGVtZW50OiBwYW5lbEVsZW1lbnQgfSkpO1xuICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChSZWFjdC5jcmVhdGVFbGVtZW50KERvY2tEcm9wU3F1YXJlLCB7IGtleTogYHJpZ2h0JHtkZXB0aH1gLCBkaXJlY3Rpb246ICdyaWdodCcsIGRlcHRoOiBkZXB0aCwgcGFuZWxEYXRhOiBwYW5lbERhdGEsIHBhbmVsRWxlbWVudDogcGFuZWxFbGVtZW50IH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgbGV0IHsgcGFuZWxEYXRhLCBwYW5lbEVsZW1lbnQsIGRyb3BGcm9tUGFuZWwgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCBkb2NrSWQgPSB0aGlzLmNvbnRleHQuZ2V0RG9ja0lkKCk7XG4gICAgICAgIGxldCBjaGlsZHJlbiA9IFtdO1xuICAgICAgICAvLyBjaGVjayBpZiBpdCdzIHdob2xlIHBhbmVsIGRyYWdnaW5nXG4gICAgICAgIGxldCBkcmFnZ2luZ1BhbmVsID0gRHJhZ1N0YXRlLmdldERhdGEoJ3BhbmVsJywgZG9ja0lkKTtcbiAgICAgICAgbGV0IGZyb21Hcm91cCA9IHRoaXMuY29udGV4dC5nZXRHcm91cChkcm9wRnJvbVBhbmVsLmdyb3VwKTtcbiAgICAgICAgaWYgKGZyb21Hcm91cC5mbG9hdGFibGUgIT09IGZhbHNlICYmXG4gICAgICAgICAgICAoIWRyYWdnaW5nUGFuZWwgfHxcbiAgICAgICAgICAgICAgICAoIWRyYWdnaW5nUGFuZWwucGFuZWxMb2NrICYmICgoX2EgPSBkcmFnZ2luZ1BhbmVsLnBhcmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1vZGUpICE9PSAnZmxvYXQnKSkpIHtcbiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChEb2NrRHJvcFNxdWFyZSwgeyBrZXk6ICdmbG9hdCcsIGRpcmVjdGlvbjogJ2Zsb2F0JywgcGFuZWxEYXRhOiBwYW5lbERhdGEsIHBhbmVsRWxlbWVudDogcGFuZWxFbGVtZW50IH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZHJhZ2dpbmdQYW5lbCAhPT0gcGFuZWxEYXRhICYmICFmcm9tR3JvdXAuZGlzYWJsZURvY2spIHsgLy8gZG9uJ3QgZHJvcCBwYW5lbCB0byBpdHNlbGZcbiAgICAgICAgICAgIC8vIDQgZGlyZWN0aW9uIGJhc2UgZHJhZyBzcXVhcmVcbiAgICAgICAgICAgIERvY2tEcm9wTGF5ZXIuYWRkRGVwdGhTcXVhcmUoY2hpbGRyZW4sICdob3Jpem9udGFsJywgcGFuZWxEYXRhLCBwYW5lbEVsZW1lbnQsIDApO1xuICAgICAgICAgICAgRG9ja0Ryb3BMYXllci5hZGREZXB0aFNxdWFyZShjaGlsZHJlbiwgJ3ZlcnRpY2FsJywgcGFuZWxEYXRhLCBwYW5lbEVsZW1lbnQsIDApO1xuICAgICAgICAgICAgaWYgKCEoZHJhZ2dpbmdQYW5lbCA9PT0gbnVsbCB8fCBkcmFnZ2luZ1BhbmVsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkcmFnZ2luZ1BhbmVsLnBhbmVsTG9jaykgJiYgcGFuZWxEYXRhLmdyb3VwID09PSBkcm9wRnJvbVBhbmVsLmdyb3VwICYmIHBhbmVsRGF0YSAhPT0gZHJvcEZyb21QYW5lbCkge1xuICAgICAgICAgICAgICAgIC8vIGRvY2sgdG8gdGFic1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChEb2NrRHJvcFNxdWFyZSwgeyBrZXk6ICdtaWRkbGUnLCBkaXJlY3Rpb246ICdtaWRkbGUnLCBwYW5lbERhdGE6IHBhbmVsRGF0YSwgcGFuZWxFbGVtZW50OiBwYW5lbEVsZW1lbnQgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGJveCA9IHBhbmVsRGF0YS5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAoYm94ICYmIGJveC5jaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgLy8gZGVlcGVyIGRyb3BcbiAgICAgICAgICAgICAgICBEb2NrRHJvcExheWVyLmFkZERlcHRoU3F1YXJlKGNoaWxkcmVuLCBib3gubW9kZSwgcGFuZWxEYXRhLCBwYW5lbEVsZW1lbnQsIDEpO1xuICAgICAgICAgICAgICAgIGlmIChib3gucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIERvY2tEcm9wTGF5ZXIuYWRkRGVwdGhTcXVhcmUoY2hpbGRyZW4sIGJveC5wYXJlbnQubW9kZSwgcGFuZWxEYXRhLCBwYW5lbEVsZW1lbnQsIDIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6ICdkb2NrLWRyb3AtbGF5ZXInIH0sIGNoaWxkcmVuKSk7XG4gICAgfVxufVxuRG9ja0Ryb3BMYXllci5jb250ZXh0VHlwZSA9IERvY2tDb250ZXh0VHlwZTtcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IERvY2tDb250ZXh0VHlwZSB9IGZyb20gXCIuL0RvY2tEYXRhXCI7XG5pbXBvcnQgeyBEcmFnRHJvcERpdiB9IGZyb20gXCIuL2RyYWdkcm9wL0RyYWdEcm9wRGl2XCI7XG5pbXBvcnQgeyBEcmFnU3RhdGUgfSBmcm9tIFwiLi9kcmFnZHJvcC9EcmFnTWFuYWdlclwiO1xuZXhwb3J0IGNsYXNzIERvY2tEcm9wRWRnZSBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmdldFJlZiA9IChyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9yZWYgPSByO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uRHJhZ092ZXIgPSAoZSkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgbGV0IHsgcGFuZWxEYXRhLCBwYW5lbEVsZW1lbnQsIGRyb3BGcm9tUGFuZWwgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICBsZXQgZG9ja0lkID0gdGhpcy5jb250ZXh0LmdldERvY2tJZCgpO1xuICAgICAgICAgICAgbGV0IGRyYWdnaW5nUGFuZWwgPSBEcmFnU3RhdGUuZ2V0RGF0YSgncGFuZWwnLCBkb2NrSWQpO1xuICAgICAgICAgICAgbGV0IGZyb21Hcm91cCA9IHRoaXMuY29udGV4dC5nZXRHcm91cChkcm9wRnJvbVBhbmVsLmdyb3VwKTtcbiAgICAgICAgICAgIGlmIChkcmFnZ2luZ1BhbmVsICYmICgoX2EgPSBkcmFnZ2luZ1BhbmVsLnBhcmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1vZGUpID09PSAnZmxvYXQnKSB7XG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGZsb2F0IHBhbmVsIGluIGVkZ2UgbW9kZVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB7IGRpcmVjdGlvbiwgbW9kZSwgZGVwdGggfSA9IHRoaXMuZ2V0RGlyZWN0aW9uKGUsIGZyb21Hcm91cCwgZHJhZ2dpbmdQYW5lbCA9PT0gcGFuZWxEYXRhKTtcbiAgICAgICAgICAgIGRlcHRoID0gdGhpcy5nZXRBY3R1YWxEZXB0aChkZXB0aCwgbW9kZSwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIGlmICghZGlyZWN0aW9uIHx8IChkaXJlY3Rpb24gPT09ICdmbG9hdCcgJiYgZHJvcEZyb21QYW5lbC5wYW5lbExvY2spKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnNldERyb3BSZWN0KG51bGwsICdyZW1vdmUnLCB0aGlzKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdGFyZ2V0RWxlbWVudCA9IHBhbmVsRWxlbWVudDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVwdGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnQgPSB0YXJnZXRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcGFuZWxTaXplID0gRHJhZ1N0YXRlLmdldERhdGEoJ3BhbmVsU2l6ZScsIGRvY2tJZCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuc2V0RHJvcFJlY3QodGFyZ2V0RWxlbWVudCwgZGlyZWN0aW9uLCB0aGlzLCBlLCBwYW5lbFNpemUpO1xuICAgICAgICAgICAgZS5hY2NlcHQoJycpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uRHJhZ0xlYXZlID0gKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5zZXREcm9wUmVjdChudWxsLCAncmVtb3ZlJywgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25Ecm9wID0gKGUpID0+IHtcbiAgICAgICAgICAgIGxldCB7IHBhbmVsRGF0YSwgZHJvcEZyb21QYW5lbCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIGxldCBkb2NrSWQgPSB0aGlzLmNvbnRleHQuZ2V0RG9ja0lkKCk7XG4gICAgICAgICAgICBsZXQgZnJvbUdyb3VwID0gdGhpcy5jb250ZXh0LmdldEdyb3VwKGRyb3BGcm9tUGFuZWwuZ3JvdXApO1xuICAgICAgICAgICAgbGV0IHNvdXJjZSA9IERyYWdTdGF0ZS5nZXREYXRhKCd0YWInLCBkb2NrSWQpO1xuICAgICAgICAgICAgbGV0IGRyYWdnaW5nUGFuZWwgPSBEcmFnU3RhdGUuZ2V0RGF0YSgncGFuZWwnLCBkb2NrSWQpO1xuICAgICAgICAgICAgaWYgKCFzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2UgPSBkcmFnZ2luZ1BhbmVsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGxldCB7IGRpcmVjdGlvbiwgbW9kZSwgZGVwdGggfSA9IHRoaXMuZ2V0RGlyZWN0aW9uKGUsIGZyb21Hcm91cCwgZHJhZ2dpbmdQYW5lbCA9PT0gcGFuZWxEYXRhKTtcbiAgICAgICAgICAgICAgICBkZXB0aCA9IHRoaXMuZ2V0QWN0dWFsRGVwdGgoZGVwdGgsIG1vZGUsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKCFkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0ID0gcGFuZWxEYXRhO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVwdGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuZG9ja01vdmUoc291cmNlLCB0YXJnZXQsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldERpcmVjdGlvbihlLCBncm91cCwgc2FtZVBhbmVsKSB7XG4gICAgICAgIGxldCByZWN0ID0gdGhpcy5fcmVmLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBsZXQgd2lkdGhSYXRlID0gTWF0aC5taW4ocmVjdC53aWR0aCwgNTAwKTtcbiAgICAgICAgbGV0IGhlaWdodFJhdGUgPSBNYXRoLm1pbihyZWN0LmhlaWdodCwgNTAwKTtcbiAgICAgICAgbGV0IGxlZnQgPSAoZS5jbGllbnRYIC0gcmVjdC5sZWZ0KSAvIHdpZHRoUmF0ZTtcbiAgICAgICAgbGV0IHJpZ2h0ID0gKHJlY3QucmlnaHQgLSBlLmNsaWVudFgpIC8gd2lkdGhSYXRlO1xuICAgICAgICBsZXQgdG9wID0gKGUuY2xpZW50WSAtIHJlY3QudG9wKSAvIGhlaWdodFJhdGU7XG4gICAgICAgIGxldCBib3R0b20gPSAocmVjdC5ib3R0b20gLSBlLmNsaWVudFkpIC8gaGVpZ2h0UmF0ZTtcbiAgICAgICAgbGV0IG1pbiA9IE1hdGgubWluKGxlZnQsIHJpZ2h0LCB0b3AsIGJvdHRvbSk7XG4gICAgICAgIGxldCBkZXB0aCA9IDA7XG4gICAgICAgIGlmIChncm91cC5kaXNhYmxlRG9jayB8fCBzYW1lUGFuZWwpIHtcbiAgICAgICAgICAgIC8vIHVzZSBhbiBpbXBvc3NpYmxlIG1pbiB2YWx1ZSB0byBkaXNhYmxlIGRvY2sgZHJvcFxuICAgICAgICAgICAgbWluID0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWluIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgZGlyZWN0aW9uOiBudWxsLCBkZXB0aDogMCB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1pbiA8IDAuMDc1KSB7XG4gICAgICAgICAgICBkZXB0aCA9IDM7IC8vIGRlcHRoIDMgb3IgNFxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1pbiA8IDAuMTUpIHtcbiAgICAgICAgICAgIGRlcHRoID0gMTsgLy8gZGVwdGggMSBvciAyXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobWluIDwgMC4zKSB7XG4gICAgICAgICAgICAvLyBkZWZhdWx0XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZ3JvdXAuZmxvYXRhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4geyBkaXJlY3Rpb246ICdmbG9hdCcsIG1vZGU6ICdmbG9hdCcsIGRlcHRoOiAwIH07XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChtaW4pIHtcbiAgICAgICAgICAgIGNhc2UgbGVmdDoge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRpcmVjdGlvbjogJ2xlZnQnLCBtb2RlOiAnaG9yaXpvbnRhbCcsIGRlcHRoIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIHJpZ2h0OiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGlyZWN0aW9uOiAncmlnaHQnLCBtb2RlOiAnaG9yaXpvbnRhbCcsIGRlcHRoIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIHRvcDoge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRpcmVjdGlvbjogJ3RvcCcsIG1vZGU6ICd2ZXJ0aWNhbCcsIGRlcHRoIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIGJvdHRvbToge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRpcmVjdGlvbjogJ2JvdHRvbScsIG1vZGU6ICd2ZXJ0aWNhbCcsIGRlcHRoIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gcHJvYmFibHkgYSBpbnZhbGlkIGlucHV0IGNhdXNpbmcgZXZlcnl0aGluZyB0byBiZSBOYU4/XG4gICAgICAgIHJldHVybiB7IGRpcmVjdGlvbjogbnVsbCwgZGVwdGg6IDAgfTtcbiAgICB9XG4gICAgZ2V0QWN0dWFsRGVwdGgoZGVwdGgsIG1vZGUsIGRpcmVjdGlvbikge1xuICAgICAgICBsZXQgYWZ0ZXJQYW5lbCA9IChkaXJlY3Rpb24gPT09ICdib3R0b20nIHx8IGRpcmVjdGlvbiA9PT0gJ3JpZ2h0Jyk7XG4gICAgICAgIGlmICghZGVwdGgpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXB0aDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgeyBwYW5lbERhdGEgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCBwcmV2aW91c1RhcmdldCA9IHBhbmVsRGF0YTtcbiAgICAgICAgbGV0IHRhcmdldEJveCA9IHBhbmVsRGF0YS5wYXJlbnQ7XG4gICAgICAgIGxldCBsYXN0RGVwdGggPSAwO1xuICAgICAgICBpZiAocGFuZWxEYXRhLnBhcmVudC5tb2RlID09PSBtb2RlKSB7XG4gICAgICAgICAgICArK2RlcHRoO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlICh0YXJnZXRCb3ggJiYgbGFzdERlcHRoIDwgZGVwdGgpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXRCb3gubW9kZSA9PT0gbW9kZSkge1xuICAgICAgICAgICAgICAgIGlmIChhZnRlclBhbmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRCb3guY2hpbGRyZW5bdGFyZ2V0Qm94LmNoaWxkcmVuLmxlbmd0aCAtIDFdICE9PSBwcmV2aW91c1RhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9udCBnbyBkZWVwZXIgaWYgY3VycmVudCB0YXJnZXQgaXMgb24gZGlmZmVyZW50IHNpZGUgb2YgdGhlIGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRCb3guY2hpbGRyZW5bMF0gIT09IHByZXZpb3VzVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb250IGdvIGRlZXBlciBpZiBjdXJyZW50IHRhcmdldCBpcyBvbiBkaWZmZXJlbnQgc2lkZSBvZiB0aGUgYm94XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXZpb3VzVGFyZ2V0ID0gdGFyZ2V0Qm94O1xuICAgICAgICAgICAgdGFyZ2V0Qm94ID0gdGFyZ2V0Qm94LnBhcmVudDtcbiAgICAgICAgICAgICsrbGFzdERlcHRoO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChkZXB0aCA+IGxhc3REZXB0aCkge1xuICAgICAgICAgICAgZGVwdGggLT0gMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVwdGg7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KERyYWdEcm9wRGl2LCB7IGdldFJlZjogdGhpcy5nZXRSZWYsIGNsYXNzTmFtZTogJ2RvY2stZHJvcC1lZGdlJywgb25EcmFnT3ZlclQ6IHRoaXMub25EcmFnT3Zlciwgb25EcmFnTGVhdmVUOiB0aGlzLm9uRHJhZ0xlYXZlLCBvbkRyb3BUOiB0aGlzLm9uRHJvcCB9KSk7XG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICB0aGlzLmNvbnRleHQuc2V0RHJvcFJlY3QobnVsbCwgJ3JlbW92ZScsIHRoaXMpO1xuICAgIH1cbn1cbkRvY2tEcm9wRWRnZS5jb250ZXh0VHlwZSA9IERvY2tDb250ZXh0VHlwZTtcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IERvY2tDb250ZXh0VHlwZSB9IGZyb20gXCIuL0RvY2tEYXRhXCI7XG5pbXBvcnQgeyBEb2NrVGFicyB9IGZyb20gXCIuL0RvY2tUYWJzXCI7XG5pbXBvcnQgeyBEcmFnRHJvcERpdiB9IGZyb20gXCIuL2RyYWdkcm9wL0RyYWdEcm9wRGl2XCI7XG5pbXBvcnQgeyBEcmFnU3RhdGUgfSBmcm9tIFwiLi9kcmFnZHJvcC9EcmFnTWFuYWdlclwiO1xuaW1wb3J0IHsgRG9ja0Ryb3BMYXllciB9IGZyb20gXCIuL0RvY2tEcm9wTGF5ZXJcIjtcbmltcG9ydCB7IGdldEZsb2F0UGFuZWxTaXplLCBuZXh0WkluZGV4IH0gZnJvbSBcIi4vQWxnb3JpdGhtXCI7XG5pbXBvcnQgeyBEb2NrRHJvcEVkZ2UgfSBmcm9tIFwiLi9Eb2NrRHJvcEVkZ2VcIjtcbmV4cG9ydCBjbGFzcyBEb2NrUGFuZWwgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5nZXRSZWYgPSAocikgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVmID0gcjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHsgZHJvcEZyb21QYW5lbDogbnVsbCwgZHJhZ2dpbmdIZWFkZXI6IGZhbHNlIH07XG4gICAgICAgIHRoaXMub25EcmFnT3ZlciA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoRG9ja1BhbmVsLl9kcm9wcGluZ1BhbmVsID09PSB0aGlzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHsgcGFuZWxEYXRhIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgbGV0IGRvY2tJZCA9IHRoaXMuY29udGV4dC5nZXREb2NrSWQoKTtcbiAgICAgICAgICAgIGxldCB0YWIgPSBEcmFnU3RhdGUuZ2V0RGF0YSgndGFiJywgZG9ja0lkKTtcbiAgICAgICAgICAgIGxldCBwYW5lbCA9IERyYWdTdGF0ZS5nZXREYXRhKCdwYW5lbCcsIGRvY2tJZCk7XG4gICAgICAgICAgICBpZiAodGFiIHx8IHBhbmVsKSB7XG4gICAgICAgICAgICAgICAgRG9ja1BhbmVsLmRyb3BwaW5nUGFuZWwgPSB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhYikge1xuICAgICAgICAgICAgICAgIGlmICh0YWIucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcm9wRnJvbVBhbmVsOiB0YWIucGFyZW50IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGEgZmFrZSBwYW5lbFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZHJvcEZyb21QYW5lbDogeyBhY3RpdmVJZDogJycsIHRhYnM6IFtdLCBncm91cDogdGFiLmdyb3VwIH0gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFuZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZHJvcEZyb21QYW5lbDogcGFuZWwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIGRyb3AgdG8gbW92ZSBpbiBmbG9hdCBtb2RlXG4gICAgICAgIHRoaXMub25QYW5lbEhlYWRlckRyYWdTdGFydCA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgbGV0IHsgcGFuZWxEYXRhIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgbGV0IHsgcGFyZW50LCB4LCB5LCB6IH0gPSBwYW5lbERhdGE7XG4gICAgICAgICAgICBsZXQgZG9ja0lkID0gdGhpcy5jb250ZXh0LmdldERvY2tJZCgpO1xuICAgICAgICAgICAgaWYgKHBhcmVudCAmJiBwYXJlbnQubW9kZSA9PT0gJ2Zsb2F0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdmluZ1ggPSB4O1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdmluZ1kgPSB5O1xuICAgICAgICAgICAgICAgIC8vIGhpZGUgdGhlIHBhbmVsLCBidXQgbm90IGNyZWF0ZSBkcmFnIGxheWVyIGVsZW1lbnRcbiAgICAgICAgICAgICAgICBldmVudC5zZXREYXRhKHsgcGFuZWw6IHRoaXMucHJvcHMucGFuZWxEYXRhIH0sIGRvY2tJZCk7XG4gICAgICAgICAgICAgICAgZXZlbnQuc3RhcnREcmFnKG51bGwsIG51bGwpO1xuICAgICAgICAgICAgICAgIHRoaXMub25GbG9hdFBvaW50ZXJEb3duKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgdGFiR3JvdXAgPSB0aGlzLmNvbnRleHQuZ2V0R3JvdXAocGFuZWxEYXRhLmdyb3VwKTtcbiAgICAgICAgICAgICAgICBsZXQgW3BhbmVsV2lkdGgsIHBhbmVsSGVpZ2h0XSA9IGdldEZsb2F0UGFuZWxTaXplKHRoaXMuX3JlZiwgdGFiR3JvdXApO1xuICAgICAgICAgICAgICAgIGV2ZW50LnNldERhdGEoeyBwYW5lbDogcGFuZWxEYXRhLCBwYW5lbFNpemU6IFtwYW5lbFdpZHRoLCBwYW5lbEhlaWdodF0gfSwgZG9ja0lkKTtcbiAgICAgICAgICAgICAgICBldmVudC5zdGFydERyYWcobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZHJhZ2dpbmdIZWFkZXI6IHRydWUgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25QYW5lbEhlYWRlckRyYWdNb3ZlID0gKGUpID0+IHtcbiAgICAgICAgICAgIGxldCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuY29udGV4dC5nZXRMYXlvdXRTaXplKCk7XG4gICAgICAgICAgICBsZXQgeyBwYW5lbERhdGEgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICBwYW5lbERhdGEueCA9IHRoaXMuX21vdmluZ1ggKyBlLmR4O1xuICAgICAgICAgICAgcGFuZWxEYXRhLnkgPSB0aGlzLl9tb3ZpbmdZICsgZS5keTtcbiAgICAgICAgICAgIGlmICh3aWR0aCA+IDIwMCAmJiBoZWlnaHQgPiAyMDApIHtcbiAgICAgICAgICAgICAgICBpZiAocGFuZWxEYXRhLnkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhbmVsRGF0YS55ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocGFuZWxEYXRhLnkgPiBoZWlnaHQgLSAxNikge1xuICAgICAgICAgICAgICAgICAgICBwYW5lbERhdGEueSA9IGhlaWdodCAtIDE2O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGFuZWxEYXRhLnggKyBwYW5lbERhdGEudyA8IDE2KSB7XG4gICAgICAgICAgICAgICAgICAgIHBhbmVsRGF0YS54ID0gMTYgLSBwYW5lbERhdGEudztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocGFuZWxEYXRhLnggPiB3aWR0aCAtIDE2KSB7XG4gICAgICAgICAgICAgICAgICAgIHBhbmVsRGF0YS54ID0gd2lkdGggLSAxNjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25QYW5lbEhlYWRlckRyYWdFbmQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl91bm1vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZHJhZ2dpbmdIZWFkZXI6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5vblNpbGVudENoYW5nZSh0aGlzLnByb3BzLnBhbmVsRGF0YS5hY3RpdmVJZCwgJ21vdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblBhbmVsQ29ybmVyRHJhZ1RMID0gKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25QYW5lbENvcm5lckRyYWcoZSwgJ3RsJyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25QYW5lbENvcm5lckRyYWdUUiA9IChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uUGFuZWxDb3JuZXJEcmFnKGUsICd0cicpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uUGFuZWxDb3JuZXJEcmFnQkwgPSAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vblBhbmVsQ29ybmVyRHJhZyhlLCAnYmwnKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblBhbmVsQ29ybmVyRHJhZ0JSID0gKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25QYW5lbENvcm5lckRyYWcoZSwgJ2JyJyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25QYW5lbENvcm5lckRyYWdNb3ZlID0gKGUpID0+IHtcbiAgICAgICAgICAgIGxldCB7IHBhbmVsRGF0YSB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIGxldCB7IGR4LCBkeSB9ID0gZTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9tb3ZpbmdDb3JuZXIuc3RhcnRzV2l0aCgndCcpKSB7XG4gICAgICAgICAgICAgICAgLy8gd2hlbiBtb3ZpbmcgdG9wIGNvcm5lcnMsIGRvbnQgbGV0IGl0IG1vdmUgaGVhZGVyIG91dCBvZiBzY3JlZW5cbiAgICAgICAgICAgICAgICBsZXQgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLmNvbnRleHQuZ2V0TGF5b3V0U2l6ZSgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9tb3ZpbmdZICsgZHkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGR5ID0gLXRoaXMuX21vdmluZ1k7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuX21vdmluZ1kgKyBkeSA+IGhlaWdodCAtIDE2KSB7XG4gICAgICAgICAgICAgICAgICAgIGR5ID0gaGVpZ2h0IC0gMTYgLSB0aGlzLl9tb3ZpbmdZO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5fbW92aW5nQ29ybmVyKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAndGwnOiB7XG4gICAgICAgICAgICAgICAgICAgIHBhbmVsRGF0YS54ID0gdGhpcy5fbW92aW5nWCArIGR4O1xuICAgICAgICAgICAgICAgICAgICBwYW5lbERhdGEudyA9IHRoaXMuX21vdmluZ1cgLSBkeDtcbiAgICAgICAgICAgICAgICAgICAgcGFuZWxEYXRhLnkgPSB0aGlzLl9tb3ZpbmdZICsgZHk7XG4gICAgICAgICAgICAgICAgICAgIHBhbmVsRGF0YS5oID0gdGhpcy5fbW92aW5nSCAtIGR5O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAndHInOiB7XG4gICAgICAgICAgICAgICAgICAgIHBhbmVsRGF0YS53ID0gdGhpcy5fbW92aW5nVyArIGR4O1xuICAgICAgICAgICAgICAgICAgICBwYW5lbERhdGEueSA9IHRoaXMuX21vdmluZ1kgKyBkeTtcbiAgICAgICAgICAgICAgICAgICAgcGFuZWxEYXRhLmggPSB0aGlzLl9tb3ZpbmdIIC0gZHk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdibCc6IHtcbiAgICAgICAgICAgICAgICAgICAgcGFuZWxEYXRhLnggPSB0aGlzLl9tb3ZpbmdYICsgZHg7XG4gICAgICAgICAgICAgICAgICAgIHBhbmVsRGF0YS53ID0gdGhpcy5fbW92aW5nVyAtIGR4O1xuICAgICAgICAgICAgICAgICAgICBwYW5lbERhdGEuaCA9IHRoaXMuX21vdmluZ0ggKyBkeTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2JyJzoge1xuICAgICAgICAgICAgICAgICAgICBwYW5lbERhdGEudyA9IHRoaXMuX21vdmluZ1cgKyBkeDtcbiAgICAgICAgICAgICAgICAgICAgcGFuZWxEYXRhLmggPSB0aGlzLl9tb3ZpbmdIICsgZHk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblBhbmVsQ29ybmVyRHJhZ0VuZCA9IChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQub25TaWxlbnRDaGFuZ2UodGhpcy5wcm9wcy5wYW5lbERhdGEuYWN0aXZlSWQsICdtb3ZlJyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25GbG9hdFBvaW50ZXJEb3duID0gKCkgPT4ge1xuICAgICAgICAgICAgbGV0IHsgcGFuZWxEYXRhIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgbGV0IHsgeiB9ID0gcGFuZWxEYXRhO1xuICAgICAgICAgICAgbGV0IG5ld1ogPSBuZXh0WkluZGV4KHopO1xuICAgICAgICAgICAgaWYgKG5ld1ogIT09IHopIHtcbiAgICAgICAgICAgICAgICBwYW5lbERhdGEueiA9IG5ld1o7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uUGFuZWxDbGlja2VkID0gKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUubmF0aXZlRXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9yZWYuY29udGFpbnModGhpcy5fcmVmLm93bmVyRG9jdW1lbnQuYWN0aXZlRWxlbWVudCkgJiYgdGFyZ2V0IGluc3RhbmNlb2YgTm9kZSAmJiB0aGlzLl9yZWYuY29udGFpbnModGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlZi5xdWVyeVNlbGVjdG9yKCcuZG9jay1iYXInKS5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl91bm1vdW50ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgc3RhdGljIHNldCBkcm9wcGluZ1BhbmVsKHBhbmVsKSB7XG4gICAgICAgIGlmIChEb2NrUGFuZWwuX2Ryb3BwaW5nUGFuZWwgPT09IHBhbmVsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKERvY2tQYW5lbC5fZHJvcHBpbmdQYW5lbCkge1xuICAgICAgICAgICAgRG9ja1BhbmVsLl9kcm9wcGluZ1BhbmVsLm9uRHJhZ092ZXJPdGhlclBhbmVsKCk7XG4gICAgICAgIH1cbiAgICAgICAgRG9ja1BhbmVsLl9kcm9wcGluZ1BhbmVsID0gcGFuZWw7XG4gICAgfVxuICAgIG9uRHJhZ092ZXJPdGhlclBhbmVsKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5kcm9wRnJvbVBhbmVsKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZHJvcEZyb21QYW5lbDogbnVsbCB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvblBhbmVsQ29ybmVyRHJhZyhlLCBjb3JuZXIpIHtcbiAgICAgICAgbGV0IHsgcGFyZW50LCB4LCB5LCB3LCBoIH0gPSB0aGlzLnByb3BzLnBhbmVsRGF0YTtcbiAgICAgICAgaWYgKHBhcmVudCAmJiBwYXJlbnQubW9kZSA9PT0gJ2Zsb2F0Jykge1xuICAgICAgICAgICAgdGhpcy5fbW92aW5nQ29ybmVyID0gY29ybmVyO1xuICAgICAgICAgICAgdGhpcy5fbW92aW5nWCA9IHg7XG4gICAgICAgICAgICB0aGlzLl9tb3ZpbmdZID0geTtcbiAgICAgICAgICAgIHRoaXMuX21vdmluZ1cgPSB3O1xuICAgICAgICAgICAgdGhpcy5fbW92aW5nSCA9IGg7XG4gICAgICAgICAgICBlLnN0YXJ0RHJhZyhudWxsLCBudWxsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7IGRyb3BGcm9tUGFuZWwsIGRyYWdnaW5nSGVhZGVyIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgICBsZXQgeyBwYW5lbERhdGEsIHNpemUgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCB7IG1pbldpZHRoLCBtaW5IZWlnaHQsIGdyb3VwLCBpZCwgcGFyZW50LCBwYW5lbExvY2sgfSA9IHBhbmVsRGF0YTtcbiAgICAgICAgbGV0IHN0eWxlTmFtZSA9IGdyb3VwO1xuICAgICAgICBsZXQgdGFiR3JvdXAgPSB0aGlzLmNvbnRleHQuZ2V0R3JvdXAoZ3JvdXApO1xuICAgICAgICBsZXQgeyB3aWR0aEZsZXgsIGhlaWdodEZsZXggfSA9IHRhYkdyb3VwO1xuICAgICAgICBpZiAocGFuZWxMb2NrKSB7XG4gICAgICAgICAgICBsZXQgeyBwYW5lbFN0eWxlLCB3aWR0aEZsZXg6IHBhbmVsV2lkdGhGbGV4LCBoZWlnaHRGbGV4OiBwYW5lbEhlaWdodEZsZXggfSA9IHBhbmVsTG9jaztcbiAgICAgICAgICAgIGlmIChwYW5lbFN0eWxlKSB7XG4gICAgICAgICAgICAgICAgc3R5bGVOYW1lID0gcGFuZWxTdHlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGFuZWxXaWR0aEZsZXggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgd2lkdGhGbGV4ID0gcGFuZWxXaWR0aEZsZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhbmVsSGVpZ2h0RmxleCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBoZWlnaHRGbGV4ID0gcGFuZWxIZWlnaHRGbGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBwYW5lbENsYXNzO1xuICAgICAgICBpZiAoc3R5bGVOYW1lKSB7XG4gICAgICAgICAgICBwYW5lbENsYXNzID0gc3R5bGVOYW1lXG4gICAgICAgICAgICAgICAgLnNwbGl0KCcgJylcbiAgICAgICAgICAgICAgICAubWFwKChuYW1lKSA9PiBgZG9jay1zdHlsZS0ke25hbWV9YClcbiAgICAgICAgICAgICAgICAuam9pbignICcpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpc01heCA9IChwYXJlbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnQubW9kZSkgPT09ICdtYXhpbWl6ZSc7XG4gICAgICAgIGxldCBpc0Zsb2F0ID0gKHBhcmVudCA9PT0gbnVsbCB8fCBwYXJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudC5tb2RlKSA9PT0gJ2Zsb2F0JztcbiAgICAgICAgbGV0IGlzSEJveCA9IChwYXJlbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnQubW9kZSkgPT09ICdob3Jpem9udGFsJztcbiAgICAgICAgbGV0IGlzVkJveCA9IChwYXJlbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnQubW9kZSkgPT09ICd2ZXJ0aWNhbCc7XG4gICAgICAgIGxldCBwb2ludGVyRG93bkNhbGxiYWNrID0gdGhpcy5vbkZsb2F0UG9pbnRlckRvd247XG4gICAgICAgIGxldCBvblBhbmVsSGVhZGVyRHJhZ1N0YXJ0ID0gdGhpcy5vblBhbmVsSGVhZGVyRHJhZ1N0YXJ0O1xuICAgICAgICBpZiAoIWlzRmxvYXQgfHwgaXNNYXgpIHtcbiAgICAgICAgICAgIHBvaW50ZXJEb3duQ2FsbGJhY2sgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc01heCkge1xuICAgICAgICAgICAgZHJvcEZyb21QYW5lbCA9IG51bGw7XG4gICAgICAgICAgICBvblBhbmVsSGVhZGVyRHJhZ1N0YXJ0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY2xzID0gYGRvY2stcGFuZWwgJHtwYW5lbENsYXNzID8gcGFuZWxDbGFzcyA6ICcnfSR7ZHJvcEZyb21QYW5lbCA/ICcgZG9jay1wYW5lbC1kcm9wcGluZycgOiAnJ30ke2RyYWdnaW5nSGVhZGVyID8gJyBkcmFnZ2luZycgOiAnJ31gO1xuICAgICAgICBsZXQgZmxleCA9IDE7XG4gICAgICAgIGlmIChpc0hCb3ggJiYgd2lkdGhGbGV4ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGZsZXggPSB3aWR0aEZsZXg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNWQm94ICYmIGhlaWdodEZsZXggIT0gbnVsbCkge1xuICAgICAgICAgICAgZmxleCA9IGhlaWdodEZsZXg7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZsZXhHcm93ID0gZmxleCAqIHNpemU7XG4gICAgICAgIGxldCBmbGV4U2hyaW5rID0gZmxleCAqIDEwMDAwMDA7XG4gICAgICAgIGlmIChmbGV4U2hyaW5rIDwgMSkge1xuICAgICAgICAgICAgZmxleFNocmluayA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0eWxlID0geyBtaW5XaWR0aCwgbWluSGVpZ2h0LCBmbGV4OiBgJHtmbGV4R3Jvd30gJHtmbGV4U2hyaW5rfSAke3NpemV9cHhgIH07XG4gICAgICAgIGlmIChpc0Zsb2F0KSB7XG4gICAgICAgICAgICBzdHlsZS5sZWZ0ID0gcGFuZWxEYXRhLng7XG4gICAgICAgICAgICBzdHlsZS50b3AgPSBwYW5lbERhdGEueTtcbiAgICAgICAgICAgIHN0eWxlLndpZHRoID0gcGFuZWxEYXRhLnc7XG4gICAgICAgICAgICBzdHlsZS5oZWlnaHQgPSBwYW5lbERhdGEuaDtcbiAgICAgICAgICAgIHN0eWxlLnpJbmRleCA9IHBhbmVsRGF0YS56O1xuICAgICAgICB9XG4gICAgICAgIGxldCBkcm9wcGluZ0xheWVyO1xuICAgICAgICBpZiAoZHJvcEZyb21QYW5lbCkge1xuICAgICAgICAgICAgbGV0IGRyb3BGcm9tR3JvdXAgPSB0aGlzLmNvbnRleHQuZ2V0R3JvdXAoZHJvcEZyb21QYW5lbC5ncm91cCk7XG4gICAgICAgICAgICBsZXQgZG9ja0lkID0gdGhpcy5jb250ZXh0LmdldERvY2tJZCgpO1xuICAgICAgICAgICAgaWYgKCFkcm9wRnJvbUdyb3VwLnRhYkxvY2tlZCB8fCBEcmFnU3RhdGUuZ2V0RGF0YSgndGFiJywgZG9ja0lkKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gbm90IGFsbG93ZWQgbG9ja2VkIHRhYiB0byBjcmVhdGUgbmV3IHBhbmVsXG4gICAgICAgICAgICAgICAgbGV0IERvY2tEcm9wQ2xhc3MgPSB0aGlzLmNvbnRleHQudXNlRWRnZURyb3AoKSA/IERvY2tEcm9wRWRnZSA6IERvY2tEcm9wTGF5ZXI7XG4gICAgICAgICAgICAgICAgZHJvcHBpbmdMYXllciA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9ja0Ryb3BDbGFzcywgeyBwYW5lbERhdGE6IHBhbmVsRGF0YSwgcGFuZWxFbGVtZW50OiB0aGlzLl9yZWYsIGRyb3BGcm9tUGFuZWw6IGRyb3BGcm9tUGFuZWwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KERyYWdEcm9wRGl2LCB7IGdldFJlZjogdGhpcy5nZXRSZWYsIGNsYXNzTmFtZTogY2xzLCBzdHlsZTogc3R5bGUsIFwiZGF0YS1kb2NraWRcIjogaWQsIG9uTW91c2VEb3duQ2FwdHVyZTogcG9pbnRlckRvd25DYWxsYmFjaywgb25Ub3VjaFN0YXJ0Q2FwdHVyZTogcG9pbnRlckRvd25DYWxsYmFjaywgb25EcmFnT3ZlclQ6IGlzRmxvYXQgPyBudWxsIDogdGhpcy5vbkRyYWdPdmVyLCBvbkNsaWNrOiB0aGlzLm9uUGFuZWxDbGlja2VkIH0sXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERvY2tUYWJzLCB7IHBhbmVsRGF0YTogcGFuZWxEYXRhLCBvblBhbmVsRHJhZ1N0YXJ0OiBvblBhbmVsSGVhZGVyRHJhZ1N0YXJ0LCBvblBhbmVsRHJhZ01vdmU6IHRoaXMub25QYW5lbEhlYWRlckRyYWdNb3ZlLCBvblBhbmVsRHJhZ0VuZDogdGhpcy5vblBhbmVsSGVhZGVyRHJhZ0VuZCB9KSxcbiAgICAgICAgICAgIGlzRmxvYXQgP1xuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEcmFnRHJvcERpdiwgeyBrZXk6IFwiZHJhZy1zaXplLXQtbFwiLCBjbGFzc05hbWU6IFwiZG9jay1wYW5lbC1kcmFnLXNpemUgZG9jay1wYW5lbC1kcmFnLXNpemUtdC1sXCIsIG9uRHJhZ1N0YXJ0VDogdGhpcy5vblBhbmVsQ29ybmVyRHJhZ1RMLCBvbkRyYWdNb3ZlVDogdGhpcy5vblBhbmVsQ29ybmVyRHJhZ01vdmUsIG9uRHJhZ0VuZFQ6IHRoaXMub25QYW5lbENvcm5lckRyYWdFbmQgfSksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJhZ0Ryb3BEaXYsIHsga2V5OiBcImRyYWctc2l6ZS10LXJcIiwgY2xhc3NOYW1lOiBcImRvY2stcGFuZWwtZHJhZy1zaXplIGRvY2stcGFuZWwtZHJhZy1zaXplLXQtclwiLCBvbkRyYWdTdGFydFQ6IHRoaXMub25QYW5lbENvcm5lckRyYWdUUiwgb25EcmFnTW92ZVQ6IHRoaXMub25QYW5lbENvcm5lckRyYWdNb3ZlLCBvbkRyYWdFbmRUOiB0aGlzLm9uUGFuZWxDb3JuZXJEcmFnRW5kIH0pLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERyYWdEcm9wRGl2LCB7IGtleTogXCJkcmFnLXNpemUtYi1sXCIsIGNsYXNzTmFtZTogXCJkb2NrLXBhbmVsLWRyYWctc2l6ZSBkb2NrLXBhbmVsLWRyYWctc2l6ZS1iLWxcIiwgb25EcmFnU3RhcnRUOiB0aGlzLm9uUGFuZWxDb3JuZXJEcmFnQkwsIG9uRHJhZ01vdmVUOiB0aGlzLm9uUGFuZWxDb3JuZXJEcmFnTW92ZSwgb25EcmFnRW5kVDogdGhpcy5vblBhbmVsQ29ybmVyRHJhZ0VuZCB9KSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEcmFnRHJvcERpdiwgeyBrZXk6IFwiZHJhZy1zaXplLWItclwiLCBjbGFzc05hbWU6IFwiZG9jay1wYW5lbC1kcmFnLXNpemUgZG9jay1wYW5lbC1kcmFnLXNpemUtYi1yXCIsIG9uRHJhZ1N0YXJ0VDogdGhpcy5vblBhbmVsQ29ybmVyRHJhZ0JSLCBvbkRyYWdNb3ZlVDogdGhpcy5vblBhbmVsQ29ybmVyRHJhZ01vdmUsIG9uRHJhZ0VuZFQ6IHRoaXMub25QYW5lbENvcm5lckRyYWdFbmQgfSlcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgZHJvcHBpbmdMYXllcikpO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgaWYgKERvY2tQYW5lbC5fZHJvcHBpbmdQYW5lbCA9PT0gdGhpcykge1xuICAgICAgICAgICAgRG9ja1BhbmVsLmRyb3BwaW5nUGFuZWwgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3VubW91bnRlZCA9IHRydWU7XG4gICAgfVxufVxuRG9ja1BhbmVsLmNvbnRleHRUeXBlID0gRG9ja0NvbnRleHRUeXBlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBvcHVwV2luZG93Qm9yZGVyID0gZXhwb3J0cy5wb3B1cFN1cHBvcnRlZCA9IGV4cG9ydHMuaXNTYWZhcmkgPSBleHBvcnRzLmdlcldpbmRvd0JvcmRlciA9IHZvaWQgMDtcbmNvbnN0IGJvd3Nlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJib3dzZXJcIikpO1xuY29uc3QgYnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIGJvd3Nlcl8xLmRlZmF1bHQuZ2V0UGFyc2VyKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtcbmZ1bmN0aW9uIGdlcldpbmRvd0JvcmRlcigpIHtcbiAgICBzd2l0Y2ggKGJyb3dzZXIgPT09IG51bGwgfHwgYnJvd3NlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogYnJvd3Nlci5nZXRPU05hbWUodHJ1ZSkpIHtcbiAgICAgICAgY2FzZSAnd2luZG93cyc6IHtcbiAgICAgICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgICAgICBzd2l0Y2ggKGJyb3dzZXIuZ2V0QnJvd3Nlck5hbWUodHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdmaXJlZm94JzpcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gWzY4LCA4LCA4XTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbWljcm9zb2Z0IGVkZ2UnOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBbNjIsIDgsIDhdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAvL2Nhc2UgJ2Nocm9tZSc6XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gWzYwLCA4LCA4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IDEpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbMF0gLT0gMjtcbiAgICAgICAgICAgICAgICByZXN1bHRbMV0gLT0gMTtcbiAgICAgICAgICAgICAgICByZXN1bHRbMl0gLT0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnbWFjb3MnOiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGJyb3dzZXIuZ2V0QnJvd3Nlck5hbWUodHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzYWZhcmknOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIyLCAwLCAwXTtcbiAgICAgICAgICAgICAgICBjYXNlICdmaXJlZm94JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs1OSwgMCwgMF07XG4gICAgICAgICAgICAgICAgLy9jYXNlICdjaHJvbWUnOlxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNTEsIDAsIDBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbNjAsIDgsIDhdO1xufVxuZXhwb3J0cy5nZXJXaW5kb3dCb3JkZXIgPSBnZXJXaW5kb3dCb3JkZXI7XG5leHBvcnRzLmlzU2FmYXJpID0gKGJyb3dzZXIgPT09IG51bGwgfHwgYnJvd3NlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogYnJvd3Nlci5nZXRCcm93c2VyTmFtZSh0cnVlKSkgPT09ICdzYWZhcmknO1xuZXhwb3J0cy5wb3B1cFN1cHBvcnRlZCA9IChicm93c2VyID09PSBudWxsIHx8IGJyb3dzZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJyb3dzZXIuZ2V0UGxhdGZvcm1UeXBlKCkpID09PSAnZGVza3RvcCc7XG5leHBvcnRzLnBvcHVwV2luZG93Qm9yZGVyID0gZ2VyV2luZG93Qm9yZGVyKCk7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMubWFwV2luZG93VG9FbGVtZW50ID0gZXhwb3J0cy5tYXBFbGVtZW50VG9TY3JlZW5SZWN0ID0gZXhwb3J0cy5lc3RpbWF0ZVdpbmRvd0JvcmRlciA9IGV4cG9ydHMuZXN0aW1hdGVCcm93c2VyWm9vbSA9IHZvaWQgMDtcbmNvbnN0IEJyb3dzZXJQb3B1cFdpbmRvd18xID0gcmVxdWlyZShcIi4vQnJvd3NlclBvcHVwV2luZG93XCIpO1xuZnVuY3Rpb24gZXN0aW1hdGVCcm93c2VyWm9vbShfd2luZG93KSB7XG4gICAgLy8gb25lIG9mIHRoZW0gbWlnaHQgYmUgb2ZmIGJ5IGEgbG90IGR1ZSB0byBkZXZlbG9wZXIgY29uc29sZSBvciBvdGhlciBicm93c2VyIHBsdWdpblxuICAgIGxldCBbdG9wQm9yZGVyLCBzaWRlQm9yZGVyLCBib3R0b21Cb3JkZXJdID0gQnJvd3NlclBvcHVwV2luZG93XzEuZ2VyV2luZG93Qm9yZGVyKCk7XG4gICAgaWYgKF93aW5kb3cub3V0ZXJXaWR0aCA9PT0gX3dpbmRvdy5zY3JlZW4uYXZhaWxXaWR0aCkge1xuICAgICAgICBzaWRlQm9yZGVyID0gMDtcbiAgICAgICAgYm90dG9tQm9yZGVyID0gMDtcbiAgICB9XG4gICAgbGV0IHhSYXRpbyA9IChfd2luZG93Lm91dGVyV2lkdGggLSBzaWRlQm9yZGVyICogMikgLyBfd2luZG93LmlubmVyV2lkdGg7XG4gICAgbGV0IHlSYXRpbyA9IChfd2luZG93Lm91dGVySGVpZ2h0IC0gdG9wQm9yZGVyIC0gYm90dG9tQm9yZGVyKSAvIF93aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgbGV0IHpvb21SYXRpbyA9IE1hdGgubWluKHlSYXRpbywgeFJhdGlvKTtcbiAgICBpZiAoem9vbVJhdGlvID4gMS44KSB7XG4gICAgICAgIHpvb21SYXRpbyA9IE1hdGgucm91bmQoem9vbVJhdGlvKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoem9vbVJhdGlvID4gMC43Mykge1xuICAgICAgICB6b29tUmF0aW8gPSBNYXRoLnJvdW5kKHpvb21SYXRpbyAqIDIwKSAvIDIwO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgem9vbVJhdGlvID0gMiAvIE1hdGgucm91bmQoMiAvIHpvb21SYXRpbyk7XG4gICAgfVxuICAgIHJldHVybiB6b29tUmF0aW87XG59XG5leHBvcnRzLmVzdGltYXRlQnJvd3Nlclpvb20gPSBlc3RpbWF0ZUJyb3dzZXJab29tO1xuZnVuY3Rpb24gZXN0aW1hdGVXaW5kb3dCb3JkZXIoX3dpbmRvdywgYWRkQm9yZGVyID0gZmFsc2UpIHtcbiAgICBsZXQgem9vbSA9IF93aW5kb3cgPyBlc3RpbWF0ZUJyb3dzZXJab29tKF93aW5kb3cpIDogMTtcbiAgICBsZXQgeEJvcmRlciA9IChfd2luZG93Lm91dGVyV2lkdGggLSBfd2luZG93LmlubmVyV2lkdGggKiB6b29tKSA+PiAxO1xuICAgIGxldCB5Qm9yZGVyID0gTWF0aC5yb3VuZChfd2luZG93Lm91dGVySGVpZ2h0IC0gX3dpbmRvdy5pbm5lckhlaWdodCAqIHpvb20pO1xuICAgIGlmICh4Qm9yZGVyID4gMzIpIHtcbiAgICAgICAgLy8gcHJvYmFibHkgYmVjYXVzZSBvZiBkZWJ1Z2dlciBjb25zb2xlLCBhc3N1bWUgaXQncyBpbiB0aGUgcmlnaHQgc2lkZVxuICAgICAgICB4Qm9yZGVyID0gODtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHlCb3JkZXIgLT0geEJvcmRlcjtcbiAgICB9XG4gICAgcmV0dXJuIFt4Qm9yZGVyLCB5Qm9yZGVyLCB6b29tXTtcbn1cbmV4cG9ydHMuZXN0aW1hdGVXaW5kb3dCb3JkZXIgPSBlc3RpbWF0ZVdpbmRvd0JvcmRlcjtcbmNsYXNzIE1hcFJlY3QyRCB7XG4gICAgaW5pdCh4MSwgeTEsIHcxLCBoMSwgeDIsIHkyLCB3MiwgaDIpIHtcbiAgICAgICAgdGhpcy5zY2FsZVggPSB3MiAvIHcxO1xuICAgICAgICB0aGlzLnNjYWxlWSA9IGgyIC8gaDE7XG4gICAgICAgIHRoaXMub2Zmc2V0WCA9IHgyIC0geDEgKiB0aGlzLnNjYWxlWDtcbiAgICAgICAgdGhpcy5vZmZzZXRZID0geTIgLSB5MSAqIHRoaXMuc2NhbGVZO1xuICAgIH1cbiAgICBtYXAocHQpIHtcbiAgICAgICAgcmV0dXJuIHsgeDogcHQueCAqIHRoaXMuc2NhbGVYICsgdGhpcy5vZmZzZXRYLCB5OiBwdC55ICogdGhpcy5zY2FsZVkgKyB0aGlzLm9mZnNldFkgfTtcbiAgICB9XG4gICAgcmV2ZXJ0TWFwKHB0KSB7XG4gICAgICAgIHJldHVybiB7IHg6IChwdC54IC0gdGhpcy5vZmZzZXRYKSAvIHRoaXMuc2NhbGVYLCB5OiAocHQueSAtIHRoaXMub2Zmc2V0WSkgLyB0aGlzLnNjYWxlWSB9O1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1hcEVsZW1lbnRUb1NjcmVlblJlY3QoZWxlbWVudCwgcmVjdCkge1xuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbGV0IGNsaWVudFJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCBtYXBSZWN0ID0gbmV3IE1hcFJlY3QyRCgpO1xuICAgIG1hcFJlY3QuaW5pdCgwLCAwLCBlbGVtZW50Lm9mZnNldFdpZHRoLCBlbGVtZW50Lm9mZnNldEhlaWdodCwgY2xpZW50UmVjdC54LCBjbGllbnRSZWN0LnksIGNsaWVudFJlY3Qud2lkdGgsIGNsaWVudFJlY3QuaGVpZ2h0KTtcbiAgICBsZXQgbWFwcGVkUmVjdDtcbiAgICBpZiAocmVjdCkge1xuICAgICAgICBsZXQgeyB4LCB5IH0gPSBtYXBSZWN0Lm1hcCh7IHg6IHJlY3QubGVmdCwgeTogcmVjdC50b3AgfSk7XG4gICAgICAgIGxldCB7IHg6IHgyLCB5OiB5MiB9ID0gbWFwUmVjdC5tYXAoeyB4OiByZWN0LmxlZnQgKyByZWN0LndpZHRoLCB5OiByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IH0pO1xuICAgICAgICBtYXBwZWRSZWN0ID0geyBsZWZ0OiB4LCB0b3A6IHksIHdpZHRoOiB4MiAtIHgsIGhlaWdodDogeTIgLSB5IH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtYXBwZWRSZWN0ID0ge1xuICAgICAgICAgICAgbGVmdDogY2xpZW50UmVjdC5sZWZ0LFxuICAgICAgICAgICAgdG9wOiBjbGllbnRSZWN0LnRvcCxcbiAgICAgICAgICAgIHdpZHRoOiBjbGllbnRSZWN0LndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBjbGllbnRSZWN0LmhlaWdodCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgbGV0IF9kb2N1bWVudCA9IGVsZW1lbnQub3duZXJEb2N1bWVudDtcbiAgICBsZXQgX3dpbmRvdyA9IF9kb2N1bWVudC5kZWZhdWx0VmlldztcbiAgICBpZiAoIV93aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIGNsaWVudFJlY3Q7XG4gICAgfVxuICAgIC8vIHJlY3Vyc2l2ZWx5IGdldCByZWN0IGlmIGl0J3MgYW4gaWZyYW1lXG4gICAgaWYgKF93aW5kb3cuZnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBtYXBFbGVtZW50VG9TY3JlZW5SZWN0KF93aW5kb3cuZnJhbWVFbGVtZW50LCBtYXBwZWRSZWN0KTtcbiAgICB9XG4gICAgbGV0IFt4Qm9yZGVyLCB5Qm9yZGVyLCB6b29tXSA9IGVzdGltYXRlV2luZG93Qm9yZGVyKF93aW5kb3cpO1xuICAgIGlmICh6b29tICE9PSAxKSB7XG4gICAgICAgIG1hcHBlZFJlY3QubGVmdCAqPSB6b29tO1xuICAgICAgICBtYXBwZWRSZWN0LnRvcCAqPSB6b29tO1xuICAgICAgICBtYXBwZWRSZWN0LndpZHRoICo9IHpvb207XG4gICAgICAgIG1hcHBlZFJlY3QuaGVpZ2h0ICo9IHpvb207XG4gICAgfVxuICAgIG1hcHBlZFJlY3QubGVmdCArPSBfd2luZG93LnNjcmVlblggKyB4Qm9yZGVyO1xuICAgIG1hcHBlZFJlY3QudG9wICs9IF93aW5kb3cuc2NyZWVuWSArIHlCb3JkZXI7XG4gICAgcmV0dXJuIG1hcHBlZFJlY3Q7XG59XG5leHBvcnRzLm1hcEVsZW1lbnRUb1NjcmVlblJlY3QgPSBtYXBFbGVtZW50VG9TY3JlZW5SZWN0O1xuZnVuY3Rpb24gbWFwV2luZG93VG9FbGVtZW50KHRhcmdldEVsZW1lbnQsIGZyb21XaW5kb3csIGZyb21SZWN0LCByZW1vdmVCb3JkZXIgPSB0cnVlKSB7XG4gICAgaWYgKCF0YXJnZXRFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoZnJvbVdpbmRvdykge1xuICAgICAgICBmcm9tUmVjdCA9IHtcbiAgICAgICAgICAgIGxlZnQ6IGZyb21XaW5kb3cuc2NyZWVuWCxcbiAgICAgICAgICAgIHRvcDogZnJvbVdpbmRvdy5zY3JlZW5ZLFxuICAgICAgICAgICAgd2lkdGg6IGZyb21XaW5kb3cub3V0ZXJXaWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogZnJvbVdpbmRvdy5vdXRlckhlaWdodCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHJlbW92ZUJvcmRlcikge1xuICAgICAgICAgICAgY29uc3QgW3RvcEJvcmRlciwgc2lkZUJvcmRlciwgYm90dG9tQm9yZGVyXSA9IEJyb3dzZXJQb3B1cFdpbmRvd18xLnBvcHVwV2luZG93Qm9yZGVyO1xuICAgICAgICAgICAgZnJvbVJlY3QubGVmdCArPSBzaWRlQm9yZGVyO1xuICAgICAgICAgICAgZnJvbVJlY3QudG9wICs9IHRvcEJvcmRlcjtcbiAgICAgICAgICAgIGZyb21SZWN0LndpZHRoIC09IHNpZGVCb3JkZXIgKiAyO1xuICAgICAgICAgICAgZnJvbVJlY3QuaGVpZ2h0IC09IHRvcEJvcmRlciArIGJvdHRvbUJvcmRlcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICghZnJvbVJlY3QpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGxldCBfZG9jdW1lbnQgPSB0YXJnZXRFbGVtZW50Lm93bmVyRG9jdW1lbnQ7XG4gICAgbGV0IF93aW5kb3cgPSBfZG9jdW1lbnQuZGVmYXVsdFZpZXc7XG4gICAgaWYgKCFfd2luZG93KSB7XG4gICAgICAgIHJldHVybiBmcm9tUmVjdDtcbiAgICB9XG4gICAgLy8gcmVjdXJzaXZlbHkgZ2V0IHJlY3QgaWYgaXQncyBhbiBpZnJhbWVcbiAgICBpZiAoX3dpbmRvdy5mcmFtZUVsZW1lbnQpIHtcbiAgICAgICAgZnJvbVJlY3QgPSBtYXBXaW5kb3dUb0VsZW1lbnQoX3dpbmRvdy5mcmFtZUVsZW1lbnQsIG51bGwsIGZyb21SZWN0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBbeEJvcmRlciwgeUJvcmRlciwgem9vbV0gPSBlc3RpbWF0ZVdpbmRvd0JvcmRlcihfd2luZG93KTtcbiAgICAgICAgZnJvbVJlY3QubGVmdCAtPSBfd2luZG93LnNjcmVlblggKyB4Qm9yZGVyO1xuICAgICAgICBmcm9tUmVjdC50b3AgLT0gX3dpbmRvdy5zY3JlZW5ZICsgeUJvcmRlcjtcbiAgICAgICAgaWYgKHpvb20gIT09IDEpIHtcbiAgICAgICAgICAgIGZyb21SZWN0LmxlZnQgLz0gem9vbTtcbiAgICAgICAgICAgIGZyb21SZWN0LnRvcCAvPSB6b29tO1xuICAgICAgICAgICAgZnJvbVJlY3Qud2lkdGggLz0gem9vbTtcbiAgICAgICAgICAgIGZyb21SZWN0LmhlaWdodCAvPSB6b29tO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBjbGllbnRSZWN0ID0gdGFyZ2V0RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgbWFwUmVjdCA9IG5ldyBNYXBSZWN0MkQoKTtcbiAgICBtYXBSZWN0LmluaXQoMCwgMCwgdGFyZ2V0RWxlbWVudC5vZmZzZXRXaWR0aCwgdGFyZ2V0RWxlbWVudC5vZmZzZXRIZWlnaHQsIGNsaWVudFJlY3QueCwgY2xpZW50UmVjdC55LCBjbGllbnRSZWN0LndpZHRoLCBjbGllbnRSZWN0LmhlaWdodCk7XG4gICAgbGV0IG1hcHBlZFJlY3Q7XG4gICAgbGV0IHsgeCwgeSB9ID0gbWFwUmVjdC5yZXZlcnRNYXAoeyB4OiBmcm9tUmVjdC5sZWZ0LCB5OiBmcm9tUmVjdC50b3AgfSk7XG4gICAgbGV0IHsgeDogeDIsIHk6IHkyIH0gPSBtYXBSZWN0LnJldmVydE1hcCh7XG4gICAgICAgIHg6IGZyb21SZWN0LmxlZnQgKyBmcm9tUmVjdC53aWR0aCxcbiAgICAgICAgeTogZnJvbVJlY3QudG9wICsgZnJvbVJlY3QuaGVpZ2h0LFxuICAgIH0pO1xuICAgIG1hcHBlZFJlY3QgPSB7IGxlZnQ6IHgsIHRvcDogeSwgd2lkdGg6IHgyIC0geCwgaGVpZ2h0OiB5MiAtIHkgfTtcbiAgICByZXR1cm4gbWFwcGVkUmVjdDtcbn1cbmV4cG9ydHMubWFwV2luZG93VG9FbGVtZW50ID0gbWFwV2luZG93VG9FbGVtZW50O1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IE5ld1dpbmRvdyBmcm9tIFwicmMtbmV3LXdpbmRvd1wiO1xuaW1wb3J0IHsgRG9ja0NvbnRleHRUeXBlIH0gZnJvbSBcIi4vRG9ja0RhdGFcIjtcbmltcG9ydCB7IERvY2tQYW5lbCB9IGZyb20gXCIuL0RvY2tQYW5lbFwiO1xuaW1wb3J0IHsgbWFwRWxlbWVudFRvU2NyZWVuUmVjdCwgbWFwV2luZG93VG9FbGVtZW50IH0gZnJvbSBcInJjLW5ldy13aW5kb3cvbGliL1NjcmVlblBvc2l0aW9uXCI7XG5leHBvcnQgY2xhc3MgV2luZG93UGFuZWwgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5vbk9wZW4gPSAodykgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl93aW5kb3cgJiYgdykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3dpbmRvdyA9IHc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25VbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgeyBwYW5lbERhdGEgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICBsZXQgbGF5b3V0Um9vdCA9IHRoaXMuY29udGV4dC5nZXRSb290RWxlbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgcmVjdCA9IG1hcFdpbmRvd1RvRWxlbWVudChsYXlvdXRSb290LCB0aGlzLl93aW5kb3cpO1xuICAgICAgICAgICAgaWYgKHJlY3Qud2lkdGggPiAwICYmIHJlY3QuaGVpZ2h0ID4gMCkge1xuICAgICAgICAgICAgICAgIHBhbmVsRGF0YS54ID0gcmVjdC5sZWZ0O1xuICAgICAgICAgICAgICAgIHBhbmVsRGF0YS55ID0gcmVjdC50b3A7XG4gICAgICAgICAgICAgICAgcGFuZWxEYXRhLncgPSByZWN0LndpZHRoO1xuICAgICAgICAgICAgICAgIHBhbmVsRGF0YS5oID0gcmVjdC5oZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuZG9ja01vdmUocGFuZWxEYXRhLCBudWxsLCAnZmxvYXQnKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbml0UG9wdXBJbm5lclJlY3QgPSAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgeyBwYW5lbERhdGEgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICByZXR1cm4gbWFwRWxlbWVudFRvU2NyZWVuUmVjdCh0aGlzLmNvbnRleHQuZ2V0Um9vdEVsZW1lbnQoKSwge1xuICAgICAgICAgICAgICAgIGxlZnQ6IHBhbmVsRGF0YS54LFxuICAgICAgICAgICAgICAgIHRvcDogcGFuZWxEYXRhLnksXG4gICAgICAgICAgICAgICAgd2lkdGg6IHBhbmVsRGF0YS53LFxuICAgICAgICAgICAgICAgIGhlaWdodDogcGFuZWxEYXRhLmhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7IHBhbmVsRGF0YSB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgbGV0IHsgeCwgeSwgdywgaCB9ID0gcGFuZWxEYXRhO1xuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChOZXdXaW5kb3csIHsgY29weVN0eWxlczogdHJ1ZSwgb25PcGVuOiB0aGlzLm9uT3Blbiwgb25DbG9zZTogdGhpcy5vblVubG9hZCwgb25CbG9jazogdGhpcy5vblVubG9hZCwgaW5pdFBvcHVwSW5uZXJSZWN0OiB0aGlzLmluaXRQb3B1cElubmVyUmVjdCwgd2lkdGg6IHcsIGhlaWdodDogaCB9LFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogJ2RvY2std2JveCcgfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERvY2tQYW5lbCwgeyBzaXplOiBwYW5lbERhdGEuc2l6ZSwgcGFuZWxEYXRhOiBwYW5lbERhdGEsIGtleTogcGFuZWxEYXRhLmlkIH0pKSk7XG4gICAgfVxufVxuV2luZG93UGFuZWwuY29udGV4dFR5cGUgPSBEb2NrQ29udGV4dFR5cGU7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBXaW5kb3dQYW5lbCB9IGZyb20gXCIuL1dpbmRvd1BhbmVsXCI7XG5leHBvcnQgY2xhc3MgV2luZG93Qm94IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgeyBjaGlsZHJlbiB9ID0gdGhpcy5wcm9wcy5ib3hEYXRhO1xuICAgICAgICBsZXQgY2hpbGRyZW5SZW5kZXIgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmICgndGFicycgaW4gY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlblJlbmRlci5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoV2luZG93UGFuZWwsIHsga2V5OiBjaGlsZC5pZCwgcGFuZWxEYXRhOiBjaGlsZCB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0LkZyYWdtZW50LCBudWxsLCBjaGlsZHJlblJlbmRlcikpO1xuICAgIH1cbn1cbldpbmRvd0JveC5lbmFibGVkID0gdHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgKCh3aW5kb3cgPT09IG51bGwgfHwgd2luZG93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW5kb3cubmF2aWdhdG9yLnBsYXRmb3JtKSA9PT0gJ1dpbjMyJyB8fCAod2luZG93ID09PSBudWxsIHx8IHdpbmRvdyA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luZG93Lm5hdmlnYXRvci5wbGF0Zm9ybSkgPT09ICdNYWNJbnRlbCcpO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgRG9ja0NvbnRleHRUeXBlIH0gZnJvbSBcIi4vRG9ja0RhdGFcIjtcbmltcG9ydCBUYWJzIGZyb20gJ3JjLXRhYnMnO1xuaW1wb3J0IE1lbnUsIHsgTWVudUl0ZW0gfSBmcm9tICdyYy1tZW51JztcbmltcG9ydCBEcm9wZG93biBmcm9tICdyYy1kcm9wZG93bic7XG5pbXBvcnQgKiBhcyBEcmFnTWFuYWdlciBmcm9tIFwiLi9kcmFnZHJvcC9EcmFnTWFuYWdlclwiO1xuaW1wb3J0IHsgRHJhZ0Ryb3BEaXYgfSBmcm9tIFwiLi9kcmFnZHJvcC9EcmFnRHJvcERpdlwiO1xuaW1wb3J0IHsgRG9ja1RhYkJhciB9IGZyb20gXCIuL0RvY2tUYWJCYXJcIjtcbmltcG9ydCBEb2NrVGFiUGFuZSBmcm9tIFwiLi9Eb2NrVGFiUGFuZVwiO1xuaW1wb3J0IHsgZ2V0RmxvYXRQYW5lbFNpemUgfSBmcm9tIFwiLi9BbGdvcml0aG1cIjtcbmltcG9ydCB7IFdpbmRvd0JveCB9IGZyb20gXCIuL1dpbmRvd0JveFwiO1xuZnVuY3Rpb24gZmluZFBhcmVudFBhbmVsKGVsZW1lbnQpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyArK2kpIHtcbiAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2RvY2stcGFuZWwnKSkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBpc1BvcHVwRGl2KHIpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIHJldHVybiAociA9PSBudWxsIHx8ICgoX2EgPSByLnBhcmVudEVsZW1lbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50YWdOYW1lKSA9PT0gJ0xJJyB8fCAoKF9iID0gci5wYXJlbnRFbGVtZW50KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IucGFyZW50RWxlbWVudC50YWdOYW1lKSA9PT0gJ0xJJyk7XG59XG5leHBvcnQgY2xhc3MgVGFiQ2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5nZXRSZWYgPSAocikgPT4ge1xuICAgICAgICAgICAgaWYgKGlzUG9wdXBEaXYocikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9yZWYgPSByO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldEhpdEFyZWFSZWYgPSAocikgPT4ge1xuICAgICAgICAgICAgaWYgKGlzUG9wdXBEaXYocikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9oaXRBcmVhUmVmID0gcjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkNsb3NlQ2xpY2sgPSAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmRvY2tNb3ZlKHRoaXMuZGF0YSwgbnVsbCwgJ3JlbW92ZScpO1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkRyYWdTdGFydCA9IChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgcGFuZWwgPSB0aGlzLmRhdGEucGFyZW50O1xuICAgICAgICAgICAgaWYgKHBhbmVsLnBhcmVudC5tb2RlID09PSAnZmxvYXQnICYmIHBhbmVsLnRhYnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgLy8gd2hlbiBpdCdzIHRoZSBvbmx5IHRhYiBpbiBhIGZsb2F0IHBhbmVsLCBza2lwIHRoaXMgZHJhZywgbGV0IHBhcmVudCB0YWIgYmFyIGhhbmRsZSBpdFxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBwYW5lbEVsZW1lbnQgPSBmaW5kUGFyZW50UGFuZWwodGhpcy5fcmVmKTtcbiAgICAgICAgICAgIGxldCB0YWJHcm91cCA9IHRoaXMuY29udGV4dC5nZXRHcm91cCh0aGlzLmRhdGEuZ3JvdXApO1xuICAgICAgICAgICAgbGV0IFtwYW5lbFdpZHRoLCBwYW5lbEhlaWdodF0gPSBnZXRGbG9hdFBhbmVsU2l6ZShwYW5lbEVsZW1lbnQsIHRhYkdyb3VwKTtcbiAgICAgICAgICAgIGUuc2V0RGF0YSh7IHRhYjogdGhpcy5kYXRhLCBwYW5lbFNpemU6IFtwYW5lbFdpZHRoLCBwYW5lbEhlaWdodF0gfSwgdGhpcy5jb250ZXh0LmdldERvY2tJZCgpKTtcbiAgICAgICAgICAgIGUuc3RhcnREcmFnKHRoaXMuX3JlZi5wYXJlbnRFbGVtZW50LCB0aGlzLl9yZWYucGFyZW50RWxlbWVudCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25EcmFnT3ZlciA9IChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgZG9ja0lkID0gdGhpcy5jb250ZXh0LmdldERvY2tJZCgpO1xuICAgICAgICAgICAgbGV0IHRhYiA9IERyYWdNYW5hZ2VyLkRyYWdTdGF0ZS5nZXREYXRhKCd0YWInLCBkb2NrSWQpO1xuICAgICAgICAgICAgbGV0IHBhbmVsID0gRHJhZ01hbmFnZXIuRHJhZ1N0YXRlLmdldERhdGEoJ3BhbmVsJywgZG9ja0lkKTtcbiAgICAgICAgICAgIGxldCBncm91cDtcbiAgICAgICAgICAgIGlmICh0YWIpIHtcbiAgICAgICAgICAgICAgICBwYW5lbCA9IHRhYi5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgZ3JvdXAgPSB0YWIuZ3JvdXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBkcmFnIHdob2xlIHBhbmVsXG4gICAgICAgICAgICAgICAgaWYgKCFwYW5lbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwYW5lbCA9PT0gbnVsbCB8fCBwYW5lbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFuZWwucGFuZWxMb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ3JvdXAgPSBwYW5lbC5ncm91cDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChncm91cCAhPT0gdGhpcy5kYXRhLmdyb3VwKSB7XG4gICAgICAgICAgICAgICAgZS5yZWplY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRhYiAmJiB0YWIgIT09IHRoaXMuZGF0YSkge1xuICAgICAgICAgICAgICAgIGxldCBkaXJlY3Rpb24gPSB0aGlzLmdldERyb3BEaXJlY3Rpb24oZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnNldERyb3BSZWN0KHRoaXMuX2hpdEFyZWFSZWYsIGRpcmVjdGlvbiwgdGhpcyk7XG4gICAgICAgICAgICAgICAgZS5hY2NlcHQoJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFuZWwgJiYgcGFuZWwgIT09IHRoaXMuZGF0YS5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZGlyZWN0aW9uID0gdGhpcy5nZXREcm9wRGlyZWN0aW9uKGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5zZXREcm9wUmVjdCh0aGlzLl9oaXRBcmVhUmVmLCBkaXJlY3Rpb24sIHRoaXMpO1xuICAgICAgICAgICAgICAgIGUuYWNjZXB0KCcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkRyYWdMZWF2ZSA9IChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuc2V0RHJvcFJlY3QobnVsbCwgJ3JlbW92ZScsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uRHJvcCA9IChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgZG9ja0lkID0gdGhpcy5jb250ZXh0LmdldERvY2tJZCgpO1xuICAgICAgICAgICAgbGV0IHBhbmVsO1xuICAgICAgICAgICAgbGV0IHRhYiA9IERyYWdNYW5hZ2VyLkRyYWdTdGF0ZS5nZXREYXRhKCd0YWInLCBkb2NrSWQpO1xuICAgICAgICAgICAgaWYgKHRhYikge1xuICAgICAgICAgICAgICAgIHBhbmVsID0gdGFiLnBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhbmVsID0gRHJhZ01hbmFnZXIuRHJhZ1N0YXRlLmdldERhdGEoJ3BhbmVsJywgZG9ja0lkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YWIgJiYgdGFiICE9PSB0aGlzLmRhdGEpIHtcbiAgICAgICAgICAgICAgICBsZXQgZGlyZWN0aW9uID0gdGhpcy5nZXREcm9wRGlyZWN0aW9uKGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5kb2NrTW92ZSh0YWIsIHRoaXMuZGF0YSwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhbmVsICYmIHBhbmVsICE9PSB0aGlzLmRhdGEucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgbGV0IGRpcmVjdGlvbiA9IHRoaXMuZ2V0RHJvcERpcmVjdGlvbihlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuZG9ja01vdmUocGFuZWwsIHRoaXMuZGF0YSwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB9XG4gICAgc2V0RGF0YShkYXRhKSB7XG4gICAgICAgIGlmIChkYXRhICE9PSB0aGlzLmRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXREcm9wRGlyZWN0aW9uKGUpIHtcbiAgICAgICAgbGV0IHJlY3QgPSB0aGlzLl9oaXRBcmVhUmVmLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBsZXQgbWlkeCA9IHJlY3QubGVmdCArIHJlY3Qud2lkdGggKiAwLjU7XG4gICAgICAgIHJldHVybiBlLmNsaWVudFggPiBtaWR4ID8gJ2FmdGVyLXRhYicgOiAnYmVmb3JlLXRhYic7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHsgaWQsIHRpdGxlLCBncm91cCwgY29udGVudCwgY2xvc2FibGUsIGNhY2hlZCwgcGFyZW50IH0gPSB0aGlzLmRhdGE7XG4gICAgICAgIGxldCB7IG9uRHJhZ1N0YXJ0LCBvbkRyYWdPdmVyLCBvbkRyb3AsIG9uRHJhZ0xlYXZlIH0gPSB0aGlzO1xuICAgICAgICBpZiAocGFyZW50LnBhcmVudC5tb2RlID09PSAnd2luZG93Jykge1xuICAgICAgICAgICAgb25EcmFnU3RhcnQgPSBudWxsO1xuICAgICAgICAgICAgb25EcmFnT3ZlciA9IG51bGw7XG4gICAgICAgICAgICBvbkRyb3AgPSBudWxsO1xuICAgICAgICAgICAgb25EcmFnTGVhdmUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0YWJHcm91cCA9IHRoaXMuY29udGV4dC5nZXRHcm91cChncm91cCk7XG4gICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQodGhpcy5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdGFiID0gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJhZ0Ryb3BEaXYsIHsgZ2V0UmVmOiB0aGlzLmdldFJlZiwgb25EcmFnU3RhcnRUOiBvbkRyYWdTdGFydCwgb25EcmFnT3ZlclQ6IG9uRHJhZ092ZXIsIG9uRHJvcFQ6IG9uRHJvcCwgb25EcmFnTGVhdmVUOiBvbkRyYWdMZWF2ZSB9LFxuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICBjbG9zYWJsZSA/XG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJkb2NrLXRhYi1jbG9zZS1idG5cIiwgb25DbGljazogdGhpcy5vbkNsb3NlQ2xpY2sgfSlcbiAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImRvY2stdGFiLWhpdC1hcmVhXCIsIHJlZjogdGhpcy5nZXRIaXRBcmVhUmVmIH0pKSk7XG4gICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChEb2NrVGFiUGFuZSwgeyBrZXk6IGlkLCBjYWNoZUlkOiBpZCwgY2FjaGVkOiBjYWNoZWQsIHRhYjogdGFiIH0sIGNvbnRlbnQpKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgLy8gcGxhY2UgaG9sZGVyXG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIERvY2tUYWJzIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLm9uTWF4aW1pemVDbGljayA9IChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgeyBwYW5lbERhdGEgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuZG9ja01vdmUocGFuZWxEYXRhLCBudWxsLCAnbWF4aW1pemUnKTtcbiAgICAgICAgICAgIC8vIHByZXZlbnQgdGhlIGZvY3VzIGNoYW5nZSBsb2dpY1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbk5ld1dpbmRvd0NsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgbGV0IHsgcGFuZWxEYXRhIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmRvY2tNb3ZlKHBhbmVsRGF0YSwgbnVsbCwgJ25ldy13aW5kb3cnKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZW5kZXJUYWJCYXIgPSAocHJvcHMsIFRhYk5hdkxpc3QpID0+IHtcbiAgICAgICAgICAgIGxldCB7IHBhbmVsRGF0YSwgb25QYW5lbERyYWdTdGFydCwgb25QYW5lbERyYWdNb3ZlLCBvblBhbmVsRHJhZ0VuZCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIGxldCB7IGdyb3VwOiBncm91cE5hbWUsIHBhbmVsTG9jayB9ID0gcGFuZWxEYXRhO1xuICAgICAgICAgICAgbGV0IGdyb3VwID0gdGhpcy5jb250ZXh0LmdldEdyb3VwKGdyb3VwTmFtZSk7XG4gICAgICAgICAgICBsZXQgeyBwYW5lbEV4dHJhIH0gPSBncm91cDtcbiAgICAgICAgICAgIGxldCBtYXhpbWl6YWJsZSA9IGdyb3VwLm1heGltaXphYmxlO1xuICAgICAgICAgICAgaWYgKHBhbmVsRGF0YS5wYXJlbnQubW9kZSA9PT0gJ3dpbmRvdycpIHtcbiAgICAgICAgICAgICAgICBvblBhbmVsRHJhZ1N0YXJ0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBtYXhpbWl6YWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhbmVsTG9jaykge1xuICAgICAgICAgICAgICAgIGlmIChwYW5lbExvY2sucGFuZWxFeHRyYSkge1xuICAgICAgICAgICAgICAgICAgICBwYW5lbEV4dHJhID0gcGFuZWxMb2NrLnBhbmVsRXh0cmE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHNob3dOZXdXaW5kb3dCdXR0b24gPSBncm91cC5uZXdXaW5kb3cgJiYgV2luZG93Qm94LmVuYWJsZWQgJiYgcGFuZWxEYXRhLnBhcmVudC5tb2RlID09PSAnZmxvYXQnO1xuICAgICAgICAgICAgbGV0IHBhbmVsRXh0cmFDb250ZW50O1xuICAgICAgICAgICAgaWYgKHBhbmVsRXh0cmEpIHtcbiAgICAgICAgICAgICAgICBwYW5lbEV4dHJhQ29udGVudCA9IHBhbmVsRXh0cmEocGFuZWxEYXRhLCB0aGlzLmNvbnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobWF4aW1pemFibGUgfHwgc2hvd05ld1dpbmRvd0J1dHRvbikge1xuICAgICAgICAgICAgICAgIHBhbmVsRXh0cmFDb250ZW50ID0gUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJkb2NrLXBhbmVsLW1heC1idG5cIiwgb25DbGljazogbWF4aW1pemFibGUgPyB0aGlzLm9uTWF4aW1pemVDbGljayA6IG51bGwgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHNob3dOZXdXaW5kb3dCdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgcGFuZWxFeHRyYUNvbnRlbnQgPSB0aGlzLmFkZE5ld1dpbmRvd01lbnUocGFuZWxFeHRyYUNvbnRlbnQsICFtYXhpbWl6YWJsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KERvY2tUYWJCYXIsIE9iamVjdC5hc3NpZ24oeyBvbkRyYWdTdGFydDogb25QYW5lbERyYWdTdGFydCwgb25EcmFnTW92ZTogb25QYW5lbERyYWdNb3ZlLCBvbkRyYWdFbmQ6IG9uUGFuZWxEcmFnRW5kLCBUYWJOYXZMaXN0OiBUYWJOYXZMaXN0LCBpc01heGltaXplZDogcGFuZWxEYXRhLnBhcmVudC5tb2RlID09PSAnbWF4aW1pemUnIH0sIHByb3BzLCB7IGV4dHJhOiBwYW5lbEV4dHJhQ29udGVudCB9KSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uVGFiQ2hhbmdlID0gKGFjdGl2ZUlkKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLnBhbmVsRGF0YS5hY3RpdmVJZCA9IGFjdGl2ZUlkO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0Lm9uU2lsZW50Q2hhbmdlKGFjdGl2ZUlkLCAnYWN0aXZlJyk7XG4gICAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHVwZGF0ZVRhYnModGFicykge1xuICAgICAgICBpZiAodGFicyA9PT0gdGhpcy5jYWNoZWRUYWJzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWNoZWRUYWJzID0gdGFicztcbiAgICAgICAgbGV0IG5ld0NhY2hlID0gbmV3IE1hcCgpO1xuICAgICAgICBsZXQgcmV1c2VkID0gMDtcbiAgICAgICAgZm9yIChsZXQgdGFiRGF0YSBvZiB0YWJzKSB7XG4gICAgICAgICAgICBsZXQgeyBpZCB9ID0gdGFiRGF0YTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jYWNoZS5oYXMoaWQpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRhYiA9IHRoaXMuX2NhY2hlLmdldChpZCk7XG4gICAgICAgICAgICAgICAgbmV3Q2FjaGUuc2V0KGlkLCB0YWIpO1xuICAgICAgICAgICAgICAgIHRhYi5zZXREYXRhKHRhYkRhdGEpO1xuICAgICAgICAgICAgICAgICsrcmV1c2VkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHRhYiA9IG5ldyBUYWJDYWNoZSh0aGlzLmNvbnRleHQpO1xuICAgICAgICAgICAgICAgIG5ld0NhY2hlLnNldChpZCwgdGFiKTtcbiAgICAgICAgICAgICAgICB0YWIuc2V0RGF0YSh0YWJEYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocmV1c2VkICE9PSB0aGlzLl9jYWNoZS5zaXplKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBbaWQsIHRhYl0gb2YgdGhpcy5fY2FjaGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5ld0NhY2hlLmhhcyhpZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFiLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXdDYWNoZTtcbiAgICB9XG4gICAgYWRkTmV3V2luZG93TWVudShlbGVtZW50LCBzaG93V2l0aExlZnRDbGljaykge1xuICAgICAgICBjb25zdCBuYXRpdmVNZW51ID0gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoTWVudSwgeyBvbkNsaWNrOiB0aGlzLm9uTmV3V2luZG93Q2xpY2sgfSxcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTWVudUl0ZW0sIG51bGwsIFwiTmV3IFdpbmRvd1wiKSkpO1xuICAgICAgICBsZXQgdHJpZ2dlciA9IHNob3dXaXRoTGVmdENsaWNrID8gWydjb250ZXh0TWVudScsICdjbGljayddIDogWydjb250ZXh0TWVudSddO1xuICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJvcGRvd24sIHsgcHJlZml4Q2xzOiBcImRvY2stZHJvcGRvd25cIiwgb3ZlcmxheTogbmF0aXZlTWVudSwgdHJpZ2dlcjogdHJpZ2dlciwgbW91c2VFbnRlckRlbGF5OiAwLjEsIG1vdXNlTGVhdmVEZWxheTogMC4xIH0sIGVsZW1lbnQpKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgeyBncm91cCwgdGFicywgYWN0aXZlSWQgfSA9IHRoaXMucHJvcHMucGFuZWxEYXRhO1xuICAgICAgICBsZXQgdGFiR3JvdXAgPSB0aGlzLmNvbnRleHQuZ2V0R3JvdXAoZ3JvdXApO1xuICAgICAgICBsZXQgeyBhbmltYXRlZCB9ID0gdGFiR3JvdXA7XG4gICAgICAgIGlmIChhbmltYXRlZCA9PSBudWxsKSB7XG4gICAgICAgICAgICBhbmltYXRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVUYWJzKHRhYnMpO1xuICAgICAgICBsZXQgY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgW2lkLCB0YWJdIG9mIHRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKHRhYi5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoVGFicywgeyBwcmVmaXhDbHM6IFwiZG9ja1wiLCBtb3JlSWNvbjogXCIuLi5cIiwgYW5pbWF0ZWQ6IGFuaW1hdGVkLCByZW5kZXJUYWJCYXI6IHRoaXMucmVuZGVyVGFiQmFyLCBhY3RpdmVLZXk6IGFjdGl2ZUlkLCBvbkNoYW5nZTogdGhpcy5vblRhYkNoYW5nZSB9LCBjaGlsZHJlbikpO1xuICAgIH1cbn1cbkRvY2tUYWJzLmNvbnRleHRUeXBlID0gRG9ja0NvbnRleHRUeXBlO1xuRG9ja1RhYnMucHJvcEtleXMgPSBbJ2dyb3VwJywgJ3RhYnMnLCAnYWN0aXZlSWQnLCAnb25UYWJDaGFuZ2UnXTtcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBEcmFnRHJvcERpdiB9IGZyb20gXCIuL2RyYWdkcm9wL0RyYWdEcm9wRGl2XCI7XG5jbGFzcyBCb3hEYXRhQ2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICAgICAgdGhpcy5iZWZvcmVTaXplID0gMDtcbiAgICAgICAgdGhpcy5iZWZvcmVNaW5TaXplID0gMDtcbiAgICAgICAgdGhpcy5hZnRlclNpemUgPSAwO1xuICAgICAgICB0aGlzLmFmdGVyTWluU2l6ZSA9IDA7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGRhdGEuZWxlbWVudDtcbiAgICAgICAgdGhpcy5iZWZvcmVEaXZpZGVyID0gZGF0YS5iZWZvcmVEaXZpZGVyO1xuICAgICAgICB0aGlzLmFmdGVyRGl2aWRlciA9IGRhdGEuYWZ0ZXJEaXZpZGVyO1xuICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiB0aGlzLmJlZm9yZURpdmlkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlU2l6ZSArPSBjaGlsZC5zaXplO1xuICAgICAgICAgICAgaWYgKGNoaWxkLm1pblNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5iZWZvcmVNaW5TaXplICs9IGNoaWxkLm1pblNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgdGhpcy5hZnRlckRpdmlkZXIpIHtcbiAgICAgICAgICAgIHRoaXMuYWZ0ZXJTaXplICs9IGNoaWxkLnNpemU7XG4gICAgICAgICAgICBpZiAoY2hpbGQubWluU2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFmdGVyTWluU2l6ZSArPSBjaGlsZC5taW5TaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLy8gc3BsaXQgc2l6ZSBhbW9uZyBjaGlsZHJlblxuZnVuY3Rpb24gc3BpbHRTaXplKG5ld1NpemUsIG9sZFNpemUsIGNoaWxkcmVuKSB7XG4gICAgbGV0IHJlc2VydmVkU2l6ZSA9IC0xO1xuICAgIGxldCBzaXplcyA9IFtdO1xuICAgIGxldCByZXF1aXJlZE1pblNpemUgPSAwO1xuICAgIHdoaWxlIChyZXF1aXJlZE1pblNpemUgIT09IHJlc2VydmVkU2l6ZSkge1xuICAgICAgICByZXNlcnZlZFNpemUgPSByZXF1aXJlZE1pblNpemU7XG4gICAgICAgIHJlcXVpcmVkTWluU2l6ZSA9IDA7XG4gICAgICAgIGxldCByYXRpbyA9IChuZXdTaXplIC0gcmVzZXJ2ZWRTaXplKSAvIChvbGRTaXplIC0gcmVzZXJ2ZWRTaXplKTtcbiAgICAgICAgaWYgKCEocmF0aW8gPj0gMCkpIHtcbiAgICAgICAgICAgIC8vIGludmFsaWQgaW5wdXRcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGxldCBzaXplID0gY2hpbGRyZW5baV0uc2l6ZSAqIHJhdGlvO1xuICAgICAgICAgICAgaWYgKHNpemUgPCBjaGlsZHJlbltpXS5taW5TaXplKSB7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IGNoaWxkcmVuW2ldLm1pblNpemU7XG4gICAgICAgICAgICAgICAgcmVxdWlyZWRNaW5TaXplICs9IHNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaXplc1tpXSA9IHNpemU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNpemVzO1xufVxuZXhwb3J0IGNsYXNzIERpdmlkZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5zdGFydERyYWcgPSAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ib3hEYXRhID0gbmV3IEJveERhdGFDYWNoZSh0aGlzLnByb3BzLmdldERpdmlkZXJEYXRhKHRoaXMucHJvcHMuaWR4KSk7XG4gICAgICAgICAgICBlLnN0YXJ0RHJhZyh0aGlzLmJveERhdGEuZWxlbWVudCwgbnVsbCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZHJhZ01vdmUgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUuZXZlbnQuc2hpZnRLZXkgfHwgZS5ldmVudC5jdHJsS2V5IHx8IGUuZXZlbnQuYWx0S2V5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmFnTW92ZUFsbChlLCBlLmR4LCBlLmR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ01vdmUyKGUsIGUuZHgsIGUuZHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRyYWdFbmQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHsgb25EcmFnRW5kIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgdGhpcy5ib3hEYXRhID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChvbkRyYWdFbmQpIHtcbiAgICAgICAgICAgICAgICBvbkRyYWdFbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgZHJhZ01vdmUyKGUsIGR4LCBkeSkge1xuICAgICAgICBsZXQgeyBpc1ZlcnRpY2FsLCBjaGFuZ2VTaXplcyB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgbGV0IHsgYmVmb3JlRGl2aWRlciwgYWZ0ZXJEaXZpZGVyIH0gPSB0aGlzLmJveERhdGE7XG4gICAgICAgIGlmICghKGJlZm9yZURpdmlkZXIubGVuZ3RoICYmIGFmdGVyRGl2aWRlci5sZW5ndGgpKSB7XG4gICAgICAgICAgICAvLyBpbnZhbGlkIGlucHV0XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGQgPSBpc1ZlcnRpY2FsID8gZHkgOiBkeDtcbiAgICAgICAgbGV0IGxlZnRDaGlsZCA9IGJlZm9yZURpdmlkZXJbYmVmb3JlRGl2aWRlci5sZW5ndGggLSAxXTtcbiAgICAgICAgbGV0IHJpZ2h0Q2lsZCA9IGFmdGVyRGl2aWRlclswXTtcbiAgICAgICAgbGV0IGxlZnRTaXplID0gbGVmdENoaWxkLnNpemUgKyBkO1xuICAgICAgICBsZXQgcmlnaHRTaXplID0gcmlnaHRDaWxkLnNpemUgLSBkO1xuICAgICAgICAvLyBjaGVjayBtaW4gc2l6ZVxuICAgICAgICBpZiAoZCA+IDApIHtcbiAgICAgICAgICAgIGlmIChyaWdodFNpemUgPCByaWdodENpbGQubWluU2l6ZSkge1xuICAgICAgICAgICAgICAgIHJpZ2h0U2l6ZSA9IHJpZ2h0Q2lsZC5taW5TaXplO1xuICAgICAgICAgICAgICAgIGxlZnRTaXplID0gbGVmdENoaWxkLnNpemUgKyByaWdodENpbGQuc2l6ZSAtIHJpZ2h0U2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsZWZ0U2l6ZSA8IGxlZnRDaGlsZC5taW5TaXplKSB7XG4gICAgICAgICAgICBsZWZ0U2l6ZSA9IGxlZnRDaGlsZC5taW5TaXplO1xuICAgICAgICAgICAgcmlnaHRTaXplID0gbGVmdENoaWxkLnNpemUgKyByaWdodENpbGQuc2l6ZSAtIGxlZnRTaXplO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzaXplcyA9IGJlZm9yZURpdmlkZXIuY29uY2F0KGFmdGVyRGl2aWRlcikubWFwKChjaGlsZCkgPT4gY2hpbGQuc2l6ZSk7XG4gICAgICAgIHNpemVzW2JlZm9yZURpdmlkZXIubGVuZ3RoIC0gMV0gPSBsZWZ0U2l6ZTtcbiAgICAgICAgc2l6ZXNbYmVmb3JlRGl2aWRlci5sZW5ndGhdID0gcmlnaHRTaXplO1xuICAgICAgICBjaGFuZ2VTaXplcyhzaXplcyk7XG4gICAgfVxuICAgIGRyYWdNb3ZlQWxsKGUsIGR4LCBkeSkge1xuICAgICAgICBsZXQgeyBpc1ZlcnRpY2FsLCBjaGFuZ2VTaXplcyB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgbGV0IHsgYmVmb3JlU2l6ZSwgYmVmb3JlTWluU2l6ZSwgYWZ0ZXJTaXplLCBhZnRlck1pblNpemUsIGJlZm9yZURpdmlkZXIsIGFmdGVyRGl2aWRlciB9ID0gdGhpcy5ib3hEYXRhO1xuICAgICAgICBsZXQgZCA9IGlzVmVydGljYWwgPyBkeSA6IGR4O1xuICAgICAgICBsZXQgbmV3QmVmb3JlU2l6ZSA9IGJlZm9yZVNpemUgKyBkO1xuICAgICAgICBsZXQgbmV3QWZ0ZXJTaXplID0gYWZ0ZXJTaXplIC0gZDtcbiAgICAgICAgLy8gY2hlY2sgdG90YWwgbWluIHNpemVcbiAgICAgICAgaWYgKGQgPiAwKSB7XG4gICAgICAgICAgICBpZiAobmV3QWZ0ZXJTaXplIDwgYWZ0ZXJNaW5TaXplKSB7XG4gICAgICAgICAgICAgICAgbmV3QWZ0ZXJTaXplID0gYWZ0ZXJNaW5TaXplO1xuICAgICAgICAgICAgICAgIG5ld0JlZm9yZVNpemUgPSBiZWZvcmVTaXplICsgYWZ0ZXJTaXplIC0gYWZ0ZXJNaW5TaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5ld0JlZm9yZVNpemUgPCBiZWZvcmVNaW5TaXplKSB7XG4gICAgICAgICAgICBuZXdCZWZvcmVTaXplID0gYmVmb3JlTWluU2l6ZTtcbiAgICAgICAgICAgIG5ld0FmdGVyU2l6ZSA9IGJlZm9yZVNpemUgKyBhZnRlclNpemUgLSBiZWZvcmVNaW5TaXplO1xuICAgICAgICB9XG4gICAgICAgIGNoYW5nZVNpemVzKHNwaWx0U2l6ZShuZXdCZWZvcmVTaXplLCBiZWZvcmVTaXplLCBiZWZvcmVEaXZpZGVyKS5jb25jYXQoc3BpbHRTaXplKG5ld0FmdGVyU2l6ZSwgYWZ0ZXJTaXplLCBhZnRlckRpdmlkZXIpKSk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHsgY2xhc3NOYW1lIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBpZiAoIWNsYXNzTmFtZSkge1xuICAgICAgICAgICAgY2xhc3NOYW1lID0gJ2RvY2stZGl2aWRlcic7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KERyYWdEcm9wRGl2LCB7IGNsYXNzTmFtZTogY2xhc3NOYW1lLCBvbkRyYWdTdGFydFQ6IHRoaXMuc3RhcnREcmFnLCBvbkRyYWdNb3ZlVDogdGhpcy5kcmFnTW92ZSwgb25EcmFnRW5kVDogdGhpcy5kcmFnRW5kIH0pKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBEb2NrQ29udGV4dFR5cGUgfSBmcm9tIFwiLi9Eb2NrRGF0YVwiO1xuaW1wb3J0IHsgRGl2aWRlciB9IGZyb20gXCIuL0RpdmlkZXJcIjtcbmltcG9ydCB7IERvY2tQYW5lbCB9IGZyb20gXCIuL0RvY2tQYW5lbFwiO1xuZXhwb3J0IGNsYXNzIERvY2tCb3ggZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5nZXRSZWYgPSAocikgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVmID0gcjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXREaXZpZGVyRGF0YSA9IChpZHgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9yZWYpIHtcbiAgICAgICAgICAgICAgICBsZXQgeyBjaGlsZHJlbiwgbW9kZSB9ID0gdGhpcy5wcm9wcy5ib3hEYXRhO1xuICAgICAgICAgICAgICAgIGxldCBub2RlcyA9IHRoaXMuX3JlZi5jaGlsZE5vZGVzO1xuICAgICAgICAgICAgICAgIGlmIChub2Rlcy5sZW5ndGggPT09IGNoaWxkcmVuLmxlbmd0aCAqIDIgLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkaXZpZGVyQ2hpbGRyZW4gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXZpZGVyQ2hpbGRyZW4ucHVzaCh7IHNpemU6IG5vZGVzW2kgKiAyXS5vZmZzZXRIZWlnaHQsIG1pblNpemU6IGNoaWxkcmVuW2ldLm1pbkhlaWdodCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdmlkZXJDaGlsZHJlbi5wdXNoKHsgc2l6ZTogbm9kZXNbaSAqIDJdLm9mZnNldFdpZHRoLCBtaW5TaXplOiBjaGlsZHJlbltpXS5taW5XaWR0aCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogdGhpcy5fcmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmVmb3JlRGl2aWRlcjogZGl2aWRlckNoaWxkcmVuLnNsaWNlKDAsIGlkeCksXG4gICAgICAgICAgICAgICAgICAgICAgICBhZnRlckRpdmlkZXI6IGRpdmlkZXJDaGlsZHJlbi5zbGljZShpZHgpXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2hhbmdlU2l6ZXMgPSAoc2l6ZXMpID0+IHtcbiAgICAgICAgICAgIGxldCB7IGNoaWxkcmVuIH0gPSB0aGlzLnByb3BzLmJveERhdGE7XG4gICAgICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID09PSBzaXplcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuW2ldLnNpemUgPSBzaXplc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uRHJhZ0VuZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5vblNpbGVudENoYW5nZShudWxsLCAnbW92ZScpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7IGJveERhdGEgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCB7IG1pbldpZHRoLCBtaW5IZWlnaHQsIHNpemUsIGNoaWxkcmVuLCBtb2RlLCBpZCwgd2lkdGhGbGV4LCBoZWlnaHRGbGV4IH0gPSBib3hEYXRhO1xuICAgICAgICBsZXQgaXNWZXJ0aWNhbCA9IG1vZGUgPT09ICd2ZXJ0aWNhbCc7XG4gICAgICAgIGxldCBjaGlsZHJlblJlbmRlciA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlblJlbmRlci5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGl2aWRlciwgeyBpZHg6IGksIGtleTogaSwgaXNWZXJ0aWNhbDogaXNWZXJ0aWNhbCwgb25EcmFnRW5kOiB0aGlzLm9uRHJhZ0VuZCwgZ2V0RGl2aWRlckRhdGE6IHRoaXMuZ2V0RGl2aWRlckRhdGEsIGNoYW5nZVNpemVzOiB0aGlzLmNoYW5nZVNpemVzIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgaWYgKCd0YWJzJyBpbiBjaGlsZCkge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuUmVuZGVyLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChEb2NrUGFuZWwsIHsgc2l6ZTogY2hpbGQuc2l6ZSwgcGFuZWxEYXRhOiBjaGlsZCwga2V5OiBjaGlsZC5pZCB9KSk7XG4gICAgICAgICAgICAgICAgLy8gcmVuZGVyIERvY2tQYW5lbFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoJ2NoaWxkcmVuJyBpbiBjaGlsZCkge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuUmVuZGVyLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChEb2NrQm94LCB7IHNpemU6IGNoaWxkLnNpemUsIGJveERhdGE6IGNoaWxkLCBrZXk6IGNoaWxkLmlkIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgY2xzO1xuICAgICAgICBsZXQgZmxleCA9IDE7XG4gICAgICAgIGlmIChtb2RlID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgICBjbHMgPSAnZG9jay1ib3ggZG9jay12Ym94JztcbiAgICAgICAgICAgIGlmICh3aWR0aEZsZXggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGZsZXggPSB3aWR0aEZsZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBzaW5jZSBzcGVjaWFsIGJveGVzIGRvbnQgcmV1c2UgdGhpcyByZW5kZXIgZnVuY3Rpb24sIHRoaXMgY2FuIG9ubHkgYmUgaG9yaXpvbnRhbCBib3hcbiAgICAgICAgICAgIGNscyA9ICdkb2NrLWJveCBkb2NrLWhib3gnO1xuICAgICAgICAgICAgaWYgKGhlaWdodEZsZXggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGZsZXggPSBoZWlnaHRGbGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBmbGV4R3JvdyA9IGZsZXggKiBzaXplO1xuICAgICAgICBsZXQgZmxleFNocmluayA9IGZsZXggKiAxMDAwMDAwO1xuICAgICAgICBpZiAoZmxleFNocmluayA8IDEpIHtcbiAgICAgICAgICAgIGZsZXhTaHJpbmsgPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogdGhpcy5nZXRSZWYsIGNsYXNzTmFtZTogY2xzLCBcImRhdGEtZG9ja2lkXCI6IGlkLCBzdHlsZTogeyBtaW5XaWR0aCwgbWluSGVpZ2h0LCBmbGV4OiBgJHtmbGV4R3Jvd30gJHtmbGV4U2hyaW5rfSAke3NpemV9cHhgIH0gfSwgY2hpbGRyZW5SZW5kZXIpKTtcbiAgICB9XG59XG5Eb2NrQm94LmNvbnRleHRUeXBlID0gRG9ja0NvbnRleHRUeXBlO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgRG9ja1BhbmVsIH0gZnJvbSBcIi4vRG9ja1BhbmVsXCI7XG5leHBvcnQgY2xhc3MgRmxvYXRCb3ggZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7IGNoaWxkcmVuIH0gPSB0aGlzLnByb3BzLmJveERhdGE7XG4gICAgICAgIGxldCBjaGlsZHJlblJlbmRlciA9IFtdO1xuICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBjaGlsZHJlbikge1xuICAgICAgICAgICAgaWYgKCd0YWJzJyBpbiBjaGlsZCkge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuUmVuZGVyLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChEb2NrUGFuZWwsIHsgc2l6ZTogY2hpbGQuc2l6ZSwgcGFuZWxEYXRhOiBjaGlsZCwga2V5OiBjaGlsZC5pZCB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiAnZG9jay1ib3ggZG9jay1mYm94JyB9LCBjaGlsZHJlblJlbmRlcikpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IG1heGltZVBsYWNlSG9sZGVySWQgfSBmcm9tIFwiLi9Eb2NrRGF0YVwiO1xuZnVuY3Rpb24gYWRkUGFuZWxUb0NhY2hlKHBhbmVsRGF0YSwgY2FjaGUpIHtcbiAgICBjYWNoZS5wYW5lbHMuc2V0KHBhbmVsRGF0YS5pZCwgcGFuZWxEYXRhKTtcbiAgICBmb3IgKGxldCB0YWIgb2YgcGFuZWxEYXRhLnRhYnMpIHtcbiAgICAgICAgY2FjaGUudGFicy5zZXQodGFiLmlkLCB0YWIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFkZEJveFRvQ2FjaGUoYm94RGF0YSwgY2FjaGUpIHtcbiAgICBmb3IgKGxldCBjaGlsZCBvZiBib3hEYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgIGlmICgndGFicycgaW4gY2hpbGQpIHtcbiAgICAgICAgICAgIGFkZFBhbmVsVG9DYWNoZShjaGlsZCwgY2FjaGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCdjaGlsZHJlbicgaW4gY2hpbGQpIHtcbiAgICAgICAgICAgIGFkZEJveFRvQ2FjaGUoY2hpbGQsIGNhY2hlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVMYXlvdXRDYWNoZShkZWZhdWx0TGF5b3V0KSB7XG4gICAgbGV0IGNhY2hlID0ge1xuICAgICAgICBwYW5lbHM6IG5ldyBNYXAoKSxcbiAgICAgICAgdGFiczogbmV3IE1hcCgpLFxuICAgIH07XG4gICAgaWYgKGRlZmF1bHRMYXlvdXQpIHtcbiAgICAgICAgaWYgKCdjaGlsZHJlbicgaW4gZGVmYXVsdExheW91dCkge1xuICAgICAgICAgICAgLy8gQm94RGF0YVxuICAgICAgICAgICAgYWRkQm94VG9DYWNoZShkZWZhdWx0TGF5b3V0LCBjYWNoZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBMYXlvdXREYXRhXG4gICAgICAgICAgICBpZiAoJ2RvY2tib3gnIGluIGRlZmF1bHRMYXlvdXQpIHtcbiAgICAgICAgICAgICAgICBhZGRCb3hUb0NhY2hlKGRlZmF1bHRMYXlvdXQuZG9ja2JveCwgY2FjaGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCdmbG9hdGJveCcgaW4gZGVmYXVsdExheW91dCkge1xuICAgICAgICAgICAgICAgIGFkZEJveFRvQ2FjaGUoZGVmYXVsdExheW91dC5mbG9hdGJveCwgY2FjaGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjYWNoZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzYXZlTGF5b3V0RGF0YShsYXlvdXQsIHNhdmVUYWIsIGFmdGVyUGFuZWxTYXZlZCkge1xuICAgIGZ1bmN0aW9uIHNhdmVUYWJEYXRhKHRhYkRhdGEpIHtcbiAgICAgICAgaWYgKHNhdmVUYWIpIHtcbiAgICAgICAgICAgIHJldHVybiBzYXZlVGFiKHRhYkRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGlkOiB0YWJEYXRhLmlkIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNhdmVQYW5lbERhdGEocGFuZWxEYXRhKSB7XG4gICAgICAgIGxldCB0YWJzID0gW107XG4gICAgICAgIGZvciAobGV0IHRhYiBvZiBwYW5lbERhdGEudGFicykge1xuICAgICAgICAgICAgbGV0IHNhdmVkVGFiID0gc2F2ZVRhYkRhdGEodGFiKTtcbiAgICAgICAgICAgIGlmIChzYXZlZFRhYikge1xuICAgICAgICAgICAgICAgIHRhYnMucHVzaChzYXZlZFRhYik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHsgaWQsIHNpemUsIGFjdGl2ZUlkIH0gPSBwYW5lbERhdGE7XG4gICAgICAgIGxldCBzYXZlZFBhbmVsO1xuICAgICAgICBpZiAocGFuZWxEYXRhLnBhcmVudC5tb2RlID09PSAnZmxvYXQnIHx8IHBhbmVsRGF0YS5wYXJlbnQubW9kZSA9PT0gJ3dpbmRvdycpIHtcbiAgICAgICAgICAgIGxldCB7IHgsIHksIHosIHcsIGggfSA9IHBhbmVsRGF0YTtcbiAgICAgICAgICAgIHNhdmVkUGFuZWwgPSB7IGlkLCBzaXplLCB0YWJzLCBhY3RpdmVJZCwgeCwgeSwgeiwgdywgaCB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2F2ZWRQYW5lbCA9IHsgaWQsIHNpemUsIHRhYnMsIGFjdGl2ZUlkIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFmdGVyUGFuZWxTYXZlZCkge1xuICAgICAgICAgICAgYWZ0ZXJQYW5lbFNhdmVkKHNhdmVkUGFuZWwsIHBhbmVsRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNhdmVkUGFuZWw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNhdmVCb3hEYXRhKGJveERhdGEpIHtcbiAgICAgICAgbGV0IGNoaWxkcmVuID0gW107XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIGJveERhdGEuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmICgndGFicycgaW4gY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5wdXNoKHNhdmVQYW5lbERhdGEoY2hpbGQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCdjaGlsZHJlbicgaW4gY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5wdXNoKHNhdmVCb3hEYXRhKGNoaWxkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHsgaWQsIHNpemUsIG1vZGUgfSA9IGJveERhdGE7XG4gICAgICAgIHJldHVybiB7IGlkLCBzaXplLCBtb2RlLCBjaGlsZHJlbiB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBkb2NrYm94OiBzYXZlQm94RGF0YShsYXlvdXQuZG9ja2JveCksXG4gICAgICAgIGZsb2F0Ym94OiBzYXZlQm94RGF0YShsYXlvdXQuZmxvYXRib3gpLFxuICAgICAgICB3aW5kb3dib3g6IHNhdmVCb3hEYXRhKGxheW91dC53aW5kb3dib3gpLFxuICAgICAgICBtYXhib3g6IHNhdmVCb3hEYXRhKGxheW91dC5tYXhib3gpLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbG9hZExheW91dERhdGEoc2F2ZWRMYXlvdXQsIGRlZmF1bHRMYXlvdXQsIGxvYWRUYWIsIGFmdGVyUGFuZWxMb2FkZWQpIHtcbiAgICB2YXIgX2EsIF9iLCBfYztcbiAgICBsZXQgY2FjaGUgPSBjcmVhdGVMYXlvdXRDYWNoZShkZWZhdWx0TGF5b3V0KTtcbiAgICBmdW5jdGlvbiBsb2FkVGFiRGF0YShzYXZlZFRhYikge1xuICAgICAgICBpZiAobG9hZFRhYikge1xuICAgICAgICAgICAgcmV0dXJuIGxvYWRUYWIoc2F2ZWRUYWIpO1xuICAgICAgICB9XG4gICAgICAgIGxldCB7IGlkIH0gPSBzYXZlZFRhYjtcbiAgICAgICAgaWYgKGNhY2hlLnRhYnMuaGFzKGlkKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlLnRhYnMuZ2V0KGlkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gbG9hZFBhbmVsRGF0YShzYXZlZFBhbmVsKSB7XG4gICAgICAgIGxldCB7IGlkLCBzaXplLCBhY3RpdmVJZCwgeCwgeSwgeiwgdywgaCB9ID0gc2F2ZWRQYW5lbDtcbiAgICAgICAgbGV0IHRhYnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgc2F2ZWRUYWIgb2Ygc2F2ZWRQYW5lbC50YWJzKSB7XG4gICAgICAgICAgICBsZXQgdGFiRGF0YSA9IGxvYWRUYWJEYXRhKHNhdmVkVGFiKTtcbiAgICAgICAgICAgIGlmICh0YWJEYXRhKSB7XG4gICAgICAgICAgICAgICAgdGFicy5wdXNoKHRhYkRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBwYW5lbERhdGE7XG4gICAgICAgIGlmICh3IHx8IGggfHwgeCB8fCB5IHx8IHopIHtcbiAgICAgICAgICAgIHBhbmVsRGF0YSA9IHsgaWQsIHNpemUsIGFjdGl2ZUlkLCB4LCB5LCB6LCB3LCBoLCB0YWJzIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYW5lbERhdGEgPSB7IGlkLCBzaXplLCBhY3RpdmVJZCwgdGFicyB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChzYXZlZFBhbmVsLmlkID09PSBtYXhpbWVQbGFjZUhvbGRlcklkKSB7XG4gICAgICAgICAgICBwYW5lbERhdGEucGFuZWxMb2NrID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYWZ0ZXJQYW5lbExvYWRlZCkge1xuICAgICAgICAgICAgYWZ0ZXJQYW5lbExvYWRlZChzYXZlZFBhbmVsLCBwYW5lbERhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNhY2hlLnBhbmVscy5oYXMoaWQpKSB7XG4gICAgICAgICAgICBwYW5lbERhdGEgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNhY2hlLnBhbmVscy5nZXQoaWQpKSwgcGFuZWxEYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFuZWxEYXRhO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsb2FkQm94RGF0YShzYXZlZEJveCkge1xuICAgICAgICBpZiAoIXNhdmVkQm94KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2Ygc2F2ZWRCb3guY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmICgndGFicycgaW4gY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5wdXNoKGxvYWRQYW5lbERhdGEoY2hpbGQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCdjaGlsZHJlbicgaW4gY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5wdXNoKGxvYWRCb3hEYXRhKGNoaWxkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHsgaWQsIHNpemUsIG1vZGUgfSA9IHNhdmVkQm94O1xuICAgICAgICByZXR1cm4geyBpZCwgc2l6ZSwgbW9kZSwgY2hpbGRyZW4gfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9ja2JveDogbG9hZEJveERhdGEoc2F2ZWRMYXlvdXQuZG9ja2JveCksXG4gICAgICAgIGZsb2F0Ym94OiBsb2FkQm94RGF0YSgoX2EgPSBzYXZlZExheW91dC5mbG9hdGJveCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogeyBtb2RlOiAnZmxvYXQnLCBjaGlsZHJlbjogW10sIHNpemU6IDAgfSksXG4gICAgICAgIHdpbmRvd2JveDogbG9hZEJveERhdGEoKF9iID0gc2F2ZWRMYXlvdXQud2luZG93Ym94KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB7IG1vZGU6ICd3aW5kb3cnLCBjaGlsZHJlbjogW10sIHNpemU6IDAgfSksXG4gICAgICAgIG1heGJveDogbG9hZEJveERhdGEoKF9jID0gc2F2ZWRMYXlvdXQubWF4Ym94KSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiB7IG1vZGU6ICdtYXhpbWl6ZScsIGNoaWxkcmVuOiBbXSwgc2l6ZTogMSB9KSxcbiAgICB9O1xufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgRG9ja1BhbmVsIH0gZnJvbSBcIi4vRG9ja1BhbmVsXCI7XG5leHBvcnQgY2xhc3MgTWF4Qm94IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgcGFuZWxEYXRhID0gdGhpcy5wcm9wcy5ib3hEYXRhLmNoaWxkcmVuWzBdO1xuICAgICAgICBpZiAocGFuZWxEYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVQYW5lbERhdGEgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHBhbmVsRGF0YSksIHsgaWQ6ICcnLCB0YWJzOiBbXSB9KTtcbiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJkb2NrLWJveCBkb2NrLW1ib3ggZG9jay1tYm94LXNob3dcIiB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9ja1BhbmVsLCB7IHNpemU6IDEwMCwgcGFuZWxEYXRhOiBwYW5lbERhdGEgfSkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmhpZGVQYW5lbERhdGEpIHtcbiAgICAgICAgICAgIC8vIHVzZSB0aGUgaGlkZW4gZGF0YSBvbmx5IG9uY2UsIGRvbnQga2VlcCBpdCBmb3IgdG9vIGxvbmdcbiAgICAgICAgICAgIGxldCBoaWRlUGFuZWxEYXRhID0gdGhpcy5oaWRlUGFuZWxEYXRhO1xuICAgICAgICAgICAgdGhpcy5oaWRlUGFuZWxEYXRhID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJkb2NrLWJveCBkb2NrLW1ib3ggZG9jay1tYm94LWhpZGVcIiB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9ja1BhbmVsLCB7IHNpemU6IDEwMCwgcGFuZWxEYXRhOiBoaWRlUGFuZWxEYXRhIH0pKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZG9jay1ib3ggZG9jay1tYm94IGRvY2stbWJveC1oaWRlXCIgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwidmFyIF9fcmVzdCA9ICh0aGlzICYmIHRoaXMuX19yZXN0KSB8fCBmdW5jdGlvbiAocywgZSkge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXG4gICAgICAgIHRbcF0gPSBzW3BdO1xuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xuICAgICAgICB9XG4gICAgcmV0dXJuIHQ7XG59O1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIjtcbmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2gvZGVib3VuY2UnO1xuaW1wb3J0IHsgZGVmYXVsdEdyb3VwLCBEb2NrQ29udGV4dFByb3ZpZGVyLCBwbGFjZUhvbGRlckdyb3VwLCBwbGFjZUhvbGRlclN0eWxlIH0gZnJvbSBcIi4vRG9ja0RhdGFcIjtcbmltcG9ydCB7IERvY2tCb3ggfSBmcm9tIFwiLi9Eb2NrQm94XCI7XG5pbXBvcnQgeyBGbG9hdEJveCB9IGZyb20gXCIuL0Zsb2F0Qm94XCI7XG5pbXBvcnQgeyBEb2NrUGFuZWwgfSBmcm9tIFwiLi9Eb2NrUGFuZWxcIjtcbmltcG9ydCAqIGFzIEFsZ29yaXRobSBmcm9tIFwiLi9BbGdvcml0aG1cIjtcbmltcG9ydCAqIGFzIFNlcmlhbGl6ZXIgZnJvbSBcIi4vU2VyaWFsaXplclwiO1xuaW1wb3J0ICogYXMgRHJhZ01hbmFnZXIgZnJvbSBcIi4vZHJhZ2Ryb3AvRHJhZ01hbmFnZXJcIjtcbmltcG9ydCB7IE1heEJveCB9IGZyb20gXCIuL01heEJveFwiO1xuaW1wb3J0IHsgV2luZG93Qm94IH0gZnJvbSBcIi4vV2luZG93Qm94XCI7XG5jbGFzcyBEb2NrUG9ydGFsTWFuYWdlciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvKiogQGlnbm9yZSAqL1xuICAgICAgICB0aGlzLl9jYWNoZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuZGVzdHJveVJlbW92ZWRQYW5lID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcGVuZGluZ0Rlc3Ryb3kgPSBudWxsO1xuICAgICAgICAgICAgbGV0IGNhY2hlUmVtb3ZlZCA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yIChsZXQgW2lkLCBjYWNoZV0gb2YgdGhpcy5fY2FjaGVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlLm93bmVyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVzLmRlbGV0ZShpZCk7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlUmVtb3ZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhY2hlUmVtb3ZlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBnZXRUYWJDYWNoZShpZCwgb3duZXIpIHtcbiAgICAgICAgbGV0IGNhY2hlID0gdGhpcy5fY2FjaGVzLmdldChpZCk7XG4gICAgICAgIGlmICghY2FjaGUpIHtcbiAgICAgICAgICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGRpdi5jbGFzc05hbWUgPSAnZG9jay1wYW5lLWNhY2hlJztcbiAgICAgICAgICAgIGNhY2hlID0geyBkaXYsIGlkLCBvd25lciB9O1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVzLnNldChpZCwgY2FjaGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2FjaGUub3duZXIgPSBvd25lcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FjaGU7XG4gICAgfVxuICAgIC8qKiBAaWdub3JlICovXG4gICAgcmVtb3ZlVGFiQ2FjaGUoaWQsIG93bmVyKSB7XG4gICAgICAgIGxldCBjYWNoZSA9IHRoaXMuX2NhY2hlcy5nZXQoaWQpO1xuICAgICAgICBpZiAoY2FjaGUgJiYgY2FjaGUub3duZXIgPT09IG93bmVyKSB7XG4gICAgICAgICAgICBjYWNoZS5vd25lciA9IG51bGw7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3BlbmRpbmdEZXN0cm95KSB7XG4gICAgICAgICAgICAgICAgLy8gaXQgY291bGQgYmUgcmV1c2VkIGJ5IGFub3RoZXIgY29tcG9uZW50LCBzbyBsZXQncyB3YWl0XG4gICAgICAgICAgICAgICAgdGhpcy5fcGVuZGluZ0Rlc3Ryb3kgPSBzZXRUaW1lb3V0KHRoaXMuZGVzdHJveVJlbW92ZWRQYW5lLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIHVwZGF0ZVRhYkNhY2hlKGlkLCBjaGlsZHJlbikge1xuICAgICAgICBsZXQgY2FjaGUgPSB0aGlzLl9jYWNoZXMuZ2V0KGlkKTtcbiAgICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgICAgICBjYWNoZS5wb3J0YWwgPSBSZWFjdERPTS5jcmVhdGVQb3J0YWwoY2hpbGRyZW4sIGNhY2hlLmRpdiwgY2FjaGUuaWQpO1xuICAgICAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIERvY2tMYXlvdXQgZXh0ZW5kcyBEb2NrUG9ydGFsTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICAvKiogQGlnbm9yZSAqL1xuICAgICAgICB0aGlzLmdldFJlZiA9IChyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9yZWYgPSByO1xuICAgICAgICB9O1xuICAgICAgICAvKiogQGlnbm9yZSAqL1xuICAgICAgICB0aGlzLm9uRHJhZ1N0YXRlQ2hhbmdlID0gKGRyYWdnaW5nU2NvcGUpID0+IHtcbiAgICAgICAgICAgIGlmIChkcmFnZ2luZ1Njb3BlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBEb2NrUGFuZWwuZHJvcHBpbmdQYW5lbCA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuZHJvcFJlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRyb3BSZWN0OiBudWxsIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fb25XaW5kb3dSZXNpemUgPSBkZWJvdW5jZSgoKSA9PiB7XG4gICAgICAgICAgICBsZXQgbGF5b3V0ID0gdGhpcy5nZXRMYXlvdXQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9yZWYpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3TGF5b3V0ID0gQWxnb3JpdGhtLmZpeEZsb2F0UGFuZWxQb3MobGF5b3V0LCB0aGlzLl9yZWYub2Zmc2V0V2lkdGgsIHRoaXMuX3JlZi5vZmZzZXRIZWlnaHQpO1xuICAgICAgICAgICAgICAgIGlmIChsYXlvdXQgIT09IG5ld0xheW91dCkge1xuICAgICAgICAgICAgICAgICAgICBuZXdMYXlvdXQgPSBBbGdvcml0aG0uZml4TGF5b3V0RGF0YShuZXdMYXlvdXQsIHRoaXMucHJvcHMuZ3JvdXBzKTsgLy8gcGFuZWwgcGFyZW50IG1pZ2h0IG5lZWQgYSBmaXhcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VMYXlvdXQobmV3TGF5b3V0LCBudWxsLCAnbW92ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgbGV0IHsgbGF5b3V0LCBkZWZhdWx0TGF5b3V0LCBsb2FkVGFiIH0gPSBwcm9wcztcbiAgICAgICAgbGV0IHByZXBhcmVkTGF5b3V0O1xuICAgICAgICBpZiAoZGVmYXVsdExheW91dCkge1xuICAgICAgICAgICAgcHJlcGFyZWRMYXlvdXQgPSB0aGlzLnByZXBhcmVJbml0RGF0YShwcm9wcy5kZWZhdWx0TGF5b3V0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghbG9hZFRhYikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEb2NrTGF5b3V0LmxvYWRUYWIgYW5kIERvY2tMYXlvdXQuZGVmYXVsdExheW91dCBzaG91bGQgbm90IGJvdGggYmUgdW5kZWZpbmVkLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYXlvdXQpIHtcbiAgICAgICAgICAgIC8vIGNvbnRyb2xsZWQgbGF5b3V0XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgICAgIGxheW91dDogRG9ja0xheW91dC5sb2FkTGF5b3V0RGF0YShsYXlvdXQsIHByb3BzKSxcbiAgICAgICAgICAgICAgICBkcm9wUmVjdDogbnVsbCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgICAgIGxheW91dDogcHJlcGFyZWRMYXlvdXQsXG4gICAgICAgICAgICAgICAgZHJvcFJlY3Q6IG51bGwsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIERyYWdNYW5hZ2VyLmFkZERyYWdTdGF0ZUxpc3RlbmVyKHRoaXMub25EcmFnU3RhdGVDaGFuZ2UpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5fb25XaW5kb3dSZXNpemUpO1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIGdldFJvb3RFbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmO1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIHByZXBhcmVJbml0RGF0YShkYXRhKSB7XG4gICAgICAgIGxldCBsYXlvdXQgPSBPYmplY3QuYXNzaWduKHt9LCBkYXRhKTtcbiAgICAgICAgQWxnb3JpdGhtLmZpeExheW91dERhdGEobGF5b3V0LCB0aGlzLnByb3BzLmdyb3VwcywgdGhpcy5wcm9wcy5sb2FkVGFiKTtcbiAgICAgICAgcmV0dXJuIGxheW91dDtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBnZXREb2NrSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLmRvY2tJZCB8fCB0aGlzO1xuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICBnZXRHcm91cChuYW1lKSB7XG4gICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgICBsZXQgeyBncm91cHMgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICBpZiAoZ3JvdXBzICYmIG5hbWUgaW4gZ3JvdXBzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdyb3Vwc1tuYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuYW1lID09PSBwbGFjZUhvbGRlclN0eWxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsYWNlSG9sZGVyR3JvdXA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZmF1bHRHcm91cDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKiBAcGFyYW0gc291cmNlIEBpbmhlcml0RG9jXG4gICAgICogQHBhcmFtIHRhcmdldCBAaW5oZXJpdERvY1xuICAgICAqIEBwYXJhbSBkaXJlY3Rpb24gQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICBkb2NrTW92ZShzb3VyY2UsIHRhcmdldCwgZGlyZWN0aW9uKSB7XG4gICAgICAgIGxldCBsYXlvdXQgPSB0aGlzLmdldExheW91dCgpO1xuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnbWF4aW1pemUnKSB7XG4gICAgICAgICAgICBsYXlvdXQgPSBBbGdvcml0aG0ubWF4aW1pemUobGF5b3V0LCBzb3VyY2UpO1xuICAgICAgICAgICAgdGhpcy5wYW5lbFRvRm9jdXMgPSBzb3VyY2UuaWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnZnJvbnQnKSB7XG4gICAgICAgICAgICBsYXlvdXQgPSBBbGdvcml0aG0ubW92ZVRvRnJvbnQobGF5b3V0LCBzb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGF5b3V0ID0gQWxnb3JpdGhtLnJlbW92ZUZyb21MYXlvdXQobGF5b3V0LCBzb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy5maW5kKHRhcmdldCwgQWxnb3JpdGhtLkZpbHRlci5BbGwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0ID0gQWxnb3JpdGhtLmdldFVwZGF0ZWRPYmplY3QodGFyZ2V0KTsgLy8gdGFyZ2V0IG1pZ2h0IGNoYW5nZSBkdXJpbmcgcmVtb3ZlVGFiXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2Zsb2F0Jykge1xuICAgICAgICAgICAgbGV0IG5ld1BhbmVsID0gQWxnb3JpdGhtLmNvbnZlclRvUGFuZWwoc291cmNlKTtcbiAgICAgICAgICAgIG5ld1BhbmVsLnogPSBBbGdvcml0aG0ubmV4dFpJbmRleChudWxsKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmRyb3BSZWN0KSB7XG4gICAgICAgICAgICAgICAgbGF5b3V0ID0gQWxnb3JpdGhtLmZsb2F0UGFuZWwobGF5b3V0LCBuZXdQYW5lbCwgdGhpcy5zdGF0ZS5kcm9wUmVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsYXlvdXQgPSBBbGdvcml0aG0uZmxvYXRQYW5lbChsYXlvdXQsIG5ld1BhbmVsKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVmKSB7XG4gICAgICAgICAgICAgICAgICAgIGxheW91dCA9IEFsZ29yaXRobS5maXhGbG9hdFBhbmVsUG9zKGxheW91dCwgdGhpcy5fcmVmLm9mZnNldFdpZHRoLCB0aGlzLl9yZWYub2Zmc2V0SGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnbmV3LXdpbmRvdycpIHtcbiAgICAgICAgICAgIGxldCBuZXdQYW5lbCA9IEFsZ29yaXRobS5jb252ZXJUb1BhbmVsKHNvdXJjZSk7XG4gICAgICAgICAgICBsYXlvdXQgPSBBbGdvcml0aG0ucGFuZWxUb1dpbmRvdyhsYXlvdXQsIG5ld1BhbmVsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGlmICgndGFicycgaW4gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgLy8gcGFuZGVsIHRhcmdldFxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdtaWRkbGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGxheW91dCA9IEFsZ29yaXRobS5hZGRUYWJUb1BhbmVsKGxheW91dCwgc291cmNlLCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1BhbmVsID0gQWxnb3JpdGhtLmNvbnZlclRvUGFuZWwoc291cmNlKTtcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ID0gQWxnb3JpdGhtLmRvY2tQYW5lbFRvUGFuZWwobGF5b3V0LCBuZXdQYW5lbCwgdGFyZ2V0LCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCdjaGlsZHJlbicgaW4gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgLy8gYm94IHRhcmdldFxuICAgICAgICAgICAgICAgIGxldCBuZXdQYW5lbCA9IEFsZ29yaXRobS5jb252ZXJUb1BhbmVsKHNvdXJjZSk7XG4gICAgICAgICAgICAgICAgbGF5b3V0ID0gQWxnb3JpdGhtLmRvY2tQYW5lbFRvQm94KGxheW91dCwgbmV3UGFuZWwsIHRhcmdldCwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHRhYiB0YXJnZXRcbiAgICAgICAgICAgICAgICBsYXlvdXQgPSBBbGdvcml0aG0uYWRkTmV4dFRvVGFiKGxheW91dCwgc291cmNlLCB0YXJnZXQsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxheW91dCAhPT0gdGhpcy5nZXRMYXlvdXQoKSkge1xuICAgICAgICAgICAgbGF5b3V0ID0gQWxnb3JpdGhtLmZpeExheW91dERhdGEobGF5b3V0LCB0aGlzLnByb3BzLmdyb3Vwcyk7XG4gICAgICAgICAgICBsZXQgY3VycmVudFRhYklkID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkoJ3RhYnMnKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRUYWJJZCA9IHNvdXJjZS5hY3RpdmVJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHdoZW4gc291cmNlIGlzIHRhYlxuICAgICAgICAgICAgICAgIGN1cnJlbnRUYWJJZCA9IHNvdXJjZS5pZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2hhbmdlTGF5b3V0KGxheW91dCwgY3VycmVudFRhYklkLCBkaXJlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25EcmFnU3RhdGVDaGFuZ2UoZmFsc2UpO1xuICAgIH1cbiAgICAvKiogQGluaGVyaXREb2MgKi9cbiAgICBmaW5kKGlkLCBmaWx0ZXIpIHtcbiAgICAgICAgcmV0dXJuIEFsZ29yaXRobS5maW5kKHRoaXMuZ2V0TGF5b3V0KCksIGlkLCBmaWx0ZXIpO1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIGdldExheW91dFNpemUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZWYpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHdpZHRoOiB0aGlzLl9yZWYub2Zmc2V0V2lkdGgsIGhlaWdodDogdGhpcy5fcmVmLm9mZnNldEhlaWdodCB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHdpZHRoOiAwLCBoZWlnaHQ6IDAgfTtcbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgdXBkYXRlVGFiKGlkLCBuZXdUYWIsIG1ha2VBY3RpdmUgPSB0cnVlKSB7XG4gICAgICAgIGxldCB0YWIgPSB0aGlzLmZpbmQoaWQsIEFsZ29yaXRobS5GaWx0ZXIuQW55VGFiKTtcbiAgICAgICAgaWYgKHRhYikge1xuICAgICAgICAgICAgbGV0IHBhbmVsRGF0YSA9IHRhYi5wYXJlbnQ7XG4gICAgICAgICAgICBsZXQgaWR4ID0gcGFuZWxEYXRhLnRhYnMuaW5kZXhPZih0YWIpO1xuICAgICAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHsgbG9hZFRhYiB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgICAgICBsZXQgbGF5b3V0ID0gdGhpcy5nZXRMYXlvdXQoKTtcbiAgICAgICAgICAgICAgICBsZXQgYWN0aXZlSWQgPSBwYW5lbERhdGEuYWN0aXZlSWQ7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1RhYikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9hZFRhYiAmJiAhKCdjb250ZW50JyBpbiBuZXdUYWIgJiYgJ3RpdGxlJyBpbiBuZXdUYWIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUYWIgPSBsb2FkVGFiKG5ld1RhYik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ID0gQWxnb3JpdGhtLnJlbW92ZUZyb21MYXlvdXQobGF5b3V0LCB0YWIpOyAvLyByZW1vdmUgb2xkIHRhYlxuICAgICAgICAgICAgICAgICAgICBwYW5lbERhdGEgPSBBbGdvcml0aG0uZ2V0VXBkYXRlZE9iamVjdChwYW5lbERhdGEpOyAvLyBwYW5lbERhdGEgbWlnaHQgY2hhbmdlIGR1cmluZyByZW1vdmVUYWJcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0ID0gQWxnb3JpdGhtLmFkZFRhYlRvUGFuZWwobGF5b3V0LCBuZXdUYWIsIHBhbmVsRGF0YSwgaWR4KTsgLy8gYWRkIG5ldyB0YWJcbiAgICAgICAgICAgICAgICAgICAgcGFuZWxEYXRhID0gQWxnb3JpdGhtLmdldFVwZGF0ZWRPYmplY3QocGFuZWxEYXRhKTsgLy8gcGFuZWxEYXRhIG1pZ2h0IGNoYW5nZSBkdXJpbmcgYWRkVGFiVG9QYW5lbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIW1ha2VBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFuZWxEYXRhLmFjdGl2ZUlkID0gYWN0aXZlSWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFuZWxUb0ZvY3VzID0gcGFuZWxEYXRhLmlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsYXlvdXQgPSBBbGdvcml0aG0uZml4TGF5b3V0RGF0YShsYXlvdXQsIHRoaXMucHJvcHMuZ3JvdXBzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZUxheW91dChsYXlvdXQsIG5ld1RhYi5pZCwgJ3VwZGF0ZScpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgbmF2aWdhdGVUb1BhbmVsKGZyb21FbGVtZW50LCBkaXJlY3Rpb24pIHtcbiAgICAgICAgaWYgKCFkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGlmICghZnJvbUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBmcm9tRWxlbWVudCA9IHRoaXMuX3JlZi5xdWVyeVNlbGVjdG9yKCcuZG9jay10YWItYWN0aXZlPi5kb2NrLXRhYi1idG4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZyb21FbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRhcmdldFRhYjtcbiAgICAgICAgLy8gdXNlIHBhbmVsIHJlY3Qgd2hlbiBtb3ZlIGxlZnQvcmlnaHQsIGFuZCB1c2UgdGFiYmFyIHJlY3QgZm9yIHVwL2Rvd25cbiAgICAgICAgbGV0IHNlbGVjdG9yID0gKGRpcmVjdGlvbiA9PT0gJ0Fycm93VXAnIHx8IGRpcmVjdGlvbiA9PT0gJ0Fycm93RG93bicpID9cbiAgICAgICAgICAgICcuZG9jaz4uZG9jay1iYXInIDogJy5kb2NrLWJveD4uZG9jay1wYW5lbCc7XG4gICAgICAgIGxldCBwYW5lbHMgPSBBcnJheS5mcm9tKHRoaXMuX3JlZi5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XG4gICAgICAgIGxldCBjdXJyZW50UGFuZWwgPSBwYW5lbHMuZmluZCgocGFuZWwpID0+IHBhbmVsLmNvbnRhaW5zKGZyb21FbGVtZW50KSk7XG4gICAgICAgIGxldCBjdXJyZW50UmVjdCA9IGN1cnJlbnRQYW5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbGV0IG1hdGNoZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgcGFuZWwgb2YgcGFuZWxzKSB7XG4gICAgICAgICAgICBpZiAocGFuZWwgIT09IGN1cnJlbnRQYW5lbCkge1xuICAgICAgICAgICAgICAgIGxldCByZWN0ID0gcGFuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgbGV0IGRpc3RhbmNlID0gQWxnb3JpdGhtLmZpbmROZWFyZXN0UGFuZWwoY3VycmVudFJlY3QsIHJlY3QsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKHsgcGFuZWwsIHJlY3QsIGRpc3RhbmNlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtYXRjaGVzLnNvcnQoKGEsIGIpID0+IGEuZGlzdGFuY2UgLSBiLmRpc3RhbmNlKTtcbiAgICAgICAgZm9yIChsZXQgbWF0Y2ggb2YgbWF0Y2hlcykge1xuICAgICAgICAgICAgdGFyZ2V0VGFiID0gbWF0Y2gucGFuZWwucXVlcnlTZWxlY3RvcignLmRvY2stdGFiLWFjdGl2ZT4uZG9jay10YWItYnRuJyk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0VGFiKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmdldFRhYikge1xuICAgICAgICAgICAgdGFyZ2V0VGFiLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICB1c2VFZGdlRHJvcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuZHJvcE1vZGUgPT09ICdlZGdlJztcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBzZXREcm9wUmVjdChlbGVtZW50LCBkaXJlY3Rpb24sIHNvdXJjZSwgZXZlbnQsIHBhbmVsU2l6ZSA9IFszMDAsIDMwMF0pIHtcbiAgICAgICAgbGV0IHsgZHJvcFJlY3QgfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGlmIChkcm9wUmVjdCkge1xuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3JlbW92ZScpIHtcbiAgICAgICAgICAgICAgICBpZiAoZHJvcFJlY3Quc291cmNlID09PSBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRyb3BSZWN0OiBudWxsIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkcm9wUmVjdC5lbGVtZW50ID09PSBlbGVtZW50ICYmIGRyb3BSZWN0LmRpcmVjdGlvbiA9PT0gZGlyZWN0aW9uICYmIGRpcmVjdGlvbiAhPT0gJ2Zsb2F0Jykge1xuICAgICAgICAgICAgICAgIC8vIHNraXAgZHVwbGljYXRlZCB1cGRhdGUgZXhjZXB0IGZvciBmbG9hdCBkcmFnZ2luZ1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcm9wUmVjdDogbnVsbCB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbGF5b3V0UmVjdCA9IHRoaXMuX3JlZi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbGV0IHNjYWxlWCA9IHRoaXMuX3JlZi5vZmZzZXRXaWR0aCAvIGxheW91dFJlY3Qud2lkdGg7XG4gICAgICAgIGxldCBzY2FsZVkgPSB0aGlzLl9yZWYub2Zmc2V0SGVpZ2h0IC8gbGF5b3V0UmVjdC5oZWlnaHQ7XG4gICAgICAgIGxldCBlbGVtUmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGxldCBsZWZ0ID0gKGVsZW1SZWN0LmxlZnQgLSBsYXlvdXRSZWN0LmxlZnQpICogc2NhbGVYO1xuICAgICAgICBsZXQgdG9wID0gKGVsZW1SZWN0LnRvcCAtIGxheW91dFJlY3QudG9wKSAqIHNjYWxlWTtcbiAgICAgICAgbGV0IHdpZHRoID0gZWxlbVJlY3Qud2lkdGggKiBzY2FsZVg7XG4gICAgICAgIGxldCBoZWlnaHQgPSBlbGVtUmVjdC5oZWlnaHQgKiBzY2FsZVk7XG4gICAgICAgIGxldCByYXRpbyA9IDAuNTtcbiAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkb2NrLWJveCcpKSB7XG4gICAgICAgICAgICByYXRpbyA9IDAuMztcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgY2FzZSAnZmxvYXQnOiB7XG4gICAgICAgICAgICAgICAgbGV0IHggPSAoZXZlbnQuY2xpZW50WCAtIGxheW91dFJlY3QubGVmdCkgKiBzY2FsZVg7XG4gICAgICAgICAgICAgICAgbGV0IHkgPSAoZXZlbnQuY2xpZW50WSAtIGxheW91dFJlY3QudG9wKSAqIHNjYWxlWTtcbiAgICAgICAgICAgICAgICB0b3AgPSB5IC0gMTU7XG4gICAgICAgICAgICAgICAgd2lkdGggPSBwYW5lbFNpemVbMF07XG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gcGFuZWxTaXplWzFdO1xuICAgICAgICAgICAgICAgIGxlZnQgPSB4IC0gKHdpZHRoID4+IDEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgICAgIGxlZnQgKz0gd2lkdGggKiAoMSAtIHJhdGlvKTtcbiAgICAgICAgICAgIGNhc2UgJ2xlZnQnOiAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lIG5vLXN3aXRjaC1jYXNlLWZhbGwtdGhyb3VnaFxuICAgICAgICAgICAgICAgIHdpZHRoICo9IHJhdGlvO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYm90dG9tJzpcbiAgICAgICAgICAgICAgICB0b3AgKz0gaGVpZ2h0ICogKDEgLSByYXRpbyk7XG4gICAgICAgICAgICBjYXNlICd0b3AnOiAvLyB0c2xpbnQ6ZGlzYWJsZS1saW5lIG5vLXN3aXRjaC1jYXNlLWZhbGwtdGhyb3VnaFxuICAgICAgICAgICAgICAgIGhlaWdodCAqPSByYXRpbztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2FmdGVyLXRhYic6XG4gICAgICAgICAgICAgICAgbGVmdCArPSB3aWR0aCAtIDE1O1xuICAgICAgICAgICAgICAgIHdpZHRoID0gMzA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdiZWZvcmUtdGFiJzpcbiAgICAgICAgICAgICAgICBsZWZ0IC09IDE1O1xuICAgICAgICAgICAgICAgIHdpZHRoID0gMzA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRyb3BSZWN0OiB7IGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCwgZWxlbWVudCwgc291cmNlLCBkaXJlY3Rpb24gfSB9KTtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIC8vIGNsZWFyIHRlbXBMYXlvdXRcbiAgICAgICAgdGhpcy50ZW1wTGF5b3V0ID0gbnVsbDtcbiAgICAgICAgbGV0IHsgc3R5bGUsIG1heGltaXplVG8gfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCB7IGxheW91dCwgZHJvcFJlY3QgfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGxldCBkcm9wUmVjdFN0eWxlO1xuICAgICAgICBpZiAoZHJvcFJlY3QpIHtcbiAgICAgICAgICAgIGxldCB7IGVsZW1lbnQsIGRpcmVjdGlvbiB9ID0gZHJvcFJlY3QsIHJlY3QgPSBfX3Jlc3QoZHJvcFJlY3QsIFtcImVsZW1lbnRcIiwgXCJkaXJlY3Rpb25cIl0pO1xuICAgICAgICAgICAgZHJvcFJlY3RTdHlsZSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVjdCksIHsgZGlzcGxheTogJ2Jsb2NrJyB9KTtcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdmbG9hdCcpIHtcbiAgICAgICAgICAgICAgICBkcm9wUmVjdFN0eWxlLnRyYW5zaXRpb24gPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG1heGltaXplO1xuICAgICAgICAvLyBpZiAobGF5b3V0Lm1heGJveCAmJiBsYXlvdXQubWF4Ym94LmNoaWxkcmVuLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBpZiAobWF4aW1pemVUbykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXhpbWl6ZVRvID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIG1heGltaXplVG8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtYXhpbWl6ZVRvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1heGltaXplID0gUmVhY3RET00uY3JlYXRlUG9ydGFsKFJlYWN0LmNyZWF0ZUVsZW1lbnQoTWF4Qm94LCB7IGJveERhdGE6IGxheW91dC5tYXhib3ggfSksIG1heGltaXplVG8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWF4aW1pemUgPSBSZWFjdC5jcmVhdGVFbGVtZW50KE1heEJveCwgeyBib3hEYXRhOiBsYXlvdXQubWF4Ym94IH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIH1cbiAgICAgICAgbGV0IHBvcnRhbHMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgW2tleSwgY2FjaGVdIG9mIHRoaXMuX2NhY2hlcykge1xuICAgICAgICAgICAgaWYgKGNhY2hlLnBvcnRhbCkge1xuICAgICAgICAgICAgICAgIHBvcnRhbHMucHVzaChjYWNoZS5wb3J0YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogdGhpcy5nZXRSZWYsIGNsYXNzTmFtZTogXCJkb2NrLWxheW91dFwiLCBzdHlsZTogc3R5bGUgfSxcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9ja0NvbnRleHRQcm92aWRlciwgeyB2YWx1ZTogdGhpcyB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9ja0JveCwgeyBzaXplOiAxLCBib3hEYXRhOiBsYXlvdXQuZG9ja2JveCB9KSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEZsb2F0Qm94LCB7IGJveERhdGE6IGxheW91dC5mbG9hdGJveCB9KSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFdpbmRvd0JveCwgeyBib3hEYXRhOiBsYXlvdXQud2luZG93Ym94IH0pLFxuICAgICAgICAgICAgICAgIG1heGltaXplLFxuICAgICAgICAgICAgICAgIHBvcnRhbHMpLFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJkb2NrLWRyb3AtaW5kaWNhdG9yXCIsIHN0eWxlOiBkcm9wUmVjdFN0eWxlIH0pKSk7XG4gICAgfVxuICAgIC8qKiBAaWdub3JlXG4gICAgICogbW92ZSBmb2N1cyB0byBwYW5lbFRvRm9jdXNcbiAgICAgKi9cbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUsIHNuYXBzaG90KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHRoaXMucGFuZWxUb0ZvY3VzKSB7XG4gICAgICAgICAgICBsZXQgcGFuZWwgPSB0aGlzLl9yZWYucXVlcnlTZWxlY3RvcihgLmRvY2stcGFuZWxbZGF0YS1kb2NraWQ9XCIke3RoaXMucGFuZWxUb0ZvY3VzfVwiXWApO1xuICAgICAgICAgICAgaWYgKHBhbmVsICYmICFwYW5lbC5jb250YWlucyh0aGlzLl9yZWYub3duZXJEb2N1bWVudC5hY3RpdmVFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIChfYSA9IHBhbmVsLnF1ZXJ5U2VsZWN0b3IoJy5kb2NrLWJhcicpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFuZWxUb0ZvY3VzID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5fb25XaW5kb3dSZXNpemUpO1xuICAgICAgICBEcmFnTWFuYWdlci5yZW1vdmVEcmFnU3RhdGVMaXN0ZW5lcih0aGlzLm9uRHJhZ1N0YXRlQ2hhbmdlKTtcbiAgICAgICAgdGhpcy5fb25XaW5kb3dSZXNpemUuY2FuY2VsKCk7XG4gICAgfVxuICAgIHNldExheW91dChsYXlvdXQpIHtcbiAgICAgICAgdGhpcy50ZW1wTGF5b3V0ID0gbGF5b3V0O1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgbGF5b3V0IH0pO1xuICAgIH1cbiAgICBnZXRMYXlvdXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlbXBMYXlvdXQgfHwgdGhpcy5zdGF0ZS5sYXlvdXQ7XG4gICAgfVxuICAgIC8qKiBAaWdub3JlXG4gICAgICogY2hhbmdlIGxheW91dFxuICAgICAqL1xuICAgIGNoYW5nZUxheW91dChsYXlvdXREYXRhLCBjdXJyZW50VGFiSWQsIGRpcmVjdGlvbiwgc2lsZW50ID0gZmFsc2UpIHtcbiAgICAgICAgbGV0IHsgbGF5b3V0LCBvbkxheW91dENoYW5nZSB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgbGV0IHNhdmVkTGF5b3V0O1xuICAgICAgICBpZiAob25MYXlvdXRDaGFuZ2UpIHtcbiAgICAgICAgICAgIHNhdmVkTGF5b3V0ID0gU2VyaWFsaXplci5zYXZlTGF5b3V0RGF0YShsYXlvdXREYXRhLCB0aGlzLnByb3BzLnNhdmVUYWIsIHRoaXMucHJvcHMuYWZ0ZXJQYW5lbFNhdmVkKTtcbiAgICAgICAgICAgIGxheW91dERhdGEubG9hZGVkRnJvbSA9IHNhdmVkTGF5b3V0O1xuICAgICAgICAgICAgb25MYXlvdXRDaGFuZ2Uoc2F2ZWRMYXlvdXQsIGN1cnJlbnRUYWJJZCwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIGlmIChsYXlvdXQpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBsYXlvdXQgcHJvcCBpcyBkZWZpbmVkLCB3ZSBuZWVkIHRvIGZvcmNlIGFuIHVwZGF0ZSB0byBtYWtlIHN1cmUgaXQncyBlaXRoZXIgdXBkYXRlZCBvciByZXZlcnRlZCBiYWNrXG4gICAgICAgICAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghbGF5b3V0ICYmICFzaWxlbnQpIHtcbiAgICAgICAgICAgIC8vIHVuY29udHJvbGxlZCBsYXlvdXQgd2hlbiBQcm9wcy5sYXlvdXQgaXMgbm90IGRlZmluZWRcbiAgICAgICAgICAgIHRoaXMuc2V0TGF5b3V0KGxheW91dERhdGEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaWdub3JlXG4gICAgICogc29tZSBsYXlvdXQgY2hhbmdlIHdlcmUgaGFuZGxlZCBieSBjb21wb25lbnQgc2lsZW50bHlcbiAgICAgKiBidXQgdGhleSBzaG91bGQgc3RpbGwgY2FsbCB0aGlzIGZ1bmN0aW9uIHRvIHRyaWdnZXIgb25MYXlvdXRDaGFuZ2VcbiAgICAgKi9cbiAgICBvblNpbGVudENoYW5nZShjdXJyZW50VGFiSWQgPSBudWxsLCBkaXJlY3Rpb24pIHtcbiAgICAgICAgbGV0IHsgb25MYXlvdXRDaGFuZ2UgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmIChvbkxheW91dENoYW5nZSkge1xuICAgICAgICAgICAgbGV0IGxheW91dCA9IHRoaXMuZ2V0TGF5b3V0KCk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZUxheW91dChsYXlvdXQsIGN1cnJlbnRUYWJJZCwgZGlyZWN0aW9uLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBwdWJsaWMgYXBpXG4gICAgc2F2ZUxheW91dCgpIHtcbiAgICAgICAgcmV0dXJuIFNlcmlhbGl6ZXIuc2F2ZUxheW91dERhdGEodGhpcy5nZXRMYXlvdXQoKSwgdGhpcy5wcm9wcy5zYXZlVGFiLCB0aGlzLnByb3BzLmFmdGVyUGFuZWxTYXZlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGxvYWQgbGF5b3V0XG4gICAgICogY2FsbGluZyB0aGlzIGFwaSB3b24ndCB0cmlnZ2VyIHRoZSBbW0xheW91dFByb3BzLm9uTGF5b3V0Q2hhbmdlXV0gY2FsbGJhY2tcbiAgICAgKi9cbiAgICBsb2FkTGF5b3V0KHNhdmVkTGF5b3V0KSB7XG4gICAgICAgIHRoaXMuc2V0TGF5b3V0KERvY2tMYXlvdXQubG9hZExheW91dERhdGEoc2F2ZWRMYXlvdXQsIHRoaXMucHJvcHMsIHRoaXMuX3JlZi5vZmZzZXRXaWR0aCwgdGhpcy5fcmVmLm9mZnNldEhlaWdodCkpO1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIHN0YXRpYyBsb2FkTGF5b3V0RGF0YShzYXZlZExheW91dCwgcHJvcHMsIHdpZHRoID0gMCwgaGVpZ2h0ID0gMCkge1xuICAgICAgICBsZXQgeyBkZWZhdWx0TGF5b3V0LCBsb2FkVGFiLCBhZnRlclBhbmVsTG9hZGVkLCBncm91cHMgfSA9IHByb3BzO1xuICAgICAgICBsZXQgbGF5b3V0ID0gU2VyaWFsaXplci5sb2FkTGF5b3V0RGF0YShzYXZlZExheW91dCwgZGVmYXVsdExheW91dCwgbG9hZFRhYiwgYWZ0ZXJQYW5lbExvYWRlZCk7XG4gICAgICAgIGxheW91dCA9IEFsZ29yaXRobS5maXhGbG9hdFBhbmVsUG9zKGxheW91dCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIGxheW91dCA9IEFsZ29yaXRobS5maXhMYXlvdXREYXRhKGxheW91dCwgZ3JvdXBzKTtcbiAgICAgICAgbGF5b3V0LmxvYWRlZEZyb20gPSBzYXZlZExheW91dDtcbiAgICAgICAgcmV0dXJuIGxheW91dDtcbiAgICB9XG4gICAgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhwcm9wcywgc3RhdGUpIHtcbiAgICAgICAgbGV0IHsgbGF5b3V0OiBsYXlvdXRUb0xvYWQgfSA9IHByb3BzO1xuICAgICAgICBsZXQgeyBsYXlvdXQ6IGN1cnJlbnRMYXlvdXQgfSA9IHN0YXRlO1xuICAgICAgICBpZiAobGF5b3V0VG9Mb2FkICYmIGxheW91dFRvTG9hZCAhPT0gY3VycmVudExheW91dC5sb2FkZWRGcm9tKSB7XG4gICAgICAgICAgICAvLyBhdXRvIHJlbG9hZCBvbiBsYXlvdXQgcHJvcCBjaGFuZ2VcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbGF5b3V0OiBEb2NrTGF5b3V0LmxvYWRMYXlvdXREYXRhKGxheW91dFRvTG9hZCwgcHJvcHMpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4iLCJ2YXIgX19yZXN0ID0gKHRoaXMgJiYgdGhpcy5fX3Jlc3QpIHx8IGZ1bmN0aW9uIChzLCBlKSB7XG4gICAgdmFyIHQgPSB7fTtcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcbiAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XG4gICAgICAgIH1cbiAgICByZXR1cm4gdDtcbn07XG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBEb2NrQ29udGV4dFR5cGUgfSBmcm9tIFwiLi9Eb2NrRGF0YVwiO1xuaW1wb3J0IHsgRGl2aWRlciB9IGZyb20gXCIuL0RpdmlkZXJcIjtcbmV4cG9ydCBjbGFzcyBEaXZpZGVyQm94IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuZ2V0UmVmID0gKHIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3JlZiA9IHI7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0RGl2aWRlckRhdGEgPSAoaWR4KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5fcmVmKSB7XG4gICAgICAgICAgICAgICAgbGV0IHsgY2hpbGRyZW4sIG1vZGUgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICAgICAgbGV0IG5vZGVzID0gdGhpcy5fcmVmLmNoaWxkTm9kZXM7XG4gICAgICAgICAgICAgICAgbGV0IGxlbmd0aCA9IDE7XG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IGNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gbGVuZ3RoICogMiAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRpdmlkZXJDaGlsZHJlbiA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdmlkZXJDaGlsZHJlbi5wdXNoKHsgc2l6ZTogbm9kZXNbaSAqIDJdLm9mZnNldEhlaWdodCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdmlkZXJDaGlsZHJlbi5wdXNoKHsgc2l6ZTogbm9kZXNbaSAqIDJdLm9mZnNldFdpZHRoIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiB0aGlzLl9yZWYsXG4gICAgICAgICAgICAgICAgICAgICAgICBiZWZvcmVEaXZpZGVyOiBkaXZpZGVyQ2hpbGRyZW4uc2xpY2UoMCwgaWR4KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyRGl2aWRlcjogZGl2aWRlckNoaWxkcmVuLnNsaWNlKGlkeClcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jaGFuZ2VTaXplcyA9IChzaXplcykgPT4ge1xuICAgICAgICAgICAgbGV0IHsgbW9kZSB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIGxldCBub2RlcyA9IHRoaXMuX3JlZi5jaGlsZE5vZGVzO1xuICAgICAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gc2l6ZXMubGVuZ3RoICogMiAtIDEpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2Rlc1tpICogMl0uc3R5bGUuaGVpZ2h0ID0gYCR7c2l6ZXNbaV19cHhgO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXNbaSAqIDJdLnN0eWxlLndpZHRoID0gYCR7c2l6ZXNbaV19cHhgO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgX2EgPSB0aGlzLnByb3BzLCB7IGNoaWxkcmVuLCBtb2RlLCBjbGFzc05hbWUgfSA9IF9hLCBvdGhlcnMgPSBfX3Jlc3QoX2EsIFtcImNoaWxkcmVuXCIsIFwibW9kZVwiLCBcImNsYXNzTmFtZVwiXSk7XG4gICAgICAgIGxldCBpc1ZlcnRpY2FsID0gbW9kZSA9PT0gJ3ZlcnRpY2FsJztcbiAgICAgICAgbGV0IGNoaWxkcmVuUmVuZGVyID0gW107XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KChjaGlsZHJlbikpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuUmVuZGVyLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChEaXZpZGVyLCB7IGlkeDogaSwga2V5OiBpLCBpc1ZlcnRpY2FsOiBpc1ZlcnRpY2FsLCBnZXREaXZpZGVyRGF0YTogdGhpcy5nZXREaXZpZGVyRGF0YSwgY2hhbmdlU2l6ZXM6IHRoaXMuY2hhbmdlU2l6ZXMgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjaGlsZHJlblJlbmRlci5wdXNoKGNoaWxkcmVuW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNoaWxkcmVuUmVuZGVyID0gY2hpbGRyZW47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNscztcbiAgICAgICAgaWYgKG1vZGUgPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgICAgIGNscyA9ICdkaXZpZGVyLWJveCBkb2NrLXZib3gnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2xzID0gJ2RpdmlkZXItYm94IGRvY2staGJveCc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgY2xzID0gYCR7Y2xzfSAke2NsYXNzTmFtZX1gO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBPYmplY3QuYXNzaWduKHsgcmVmOiB0aGlzLmdldFJlZiwgY2xhc3NOYW1lOiBjbHMgfSwgb3RoZXJzKSwgY2hpbGRyZW5SZW5kZXIpKTtcbiAgICB9XG59XG5EaXZpZGVyQm94LmNvbnRleHRUeXBlID0gRG9ja0NvbnRleHRUeXBlO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBmaW5kVGFiYmFibGVEZXNjZW5kYW50cztcbi8qIVxuICogQWRhcHRlZCBmcm9tIGpRdWVyeSBVSSBjb3JlXG4gKlxuICogaHR0cDovL2pxdWVyeXVpLmNvbVxuICpcbiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9jYXRlZ29yeS91aS1jb3JlL1xuICovXG5cbnZhciB0YWJiYWJsZU5vZGUgPSAvaW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QvO1xuXG5mdW5jdGlvbiBoaWRlc0NvbnRlbnRzKGVsZW1lbnQpIHtcbiAgdmFyIHplcm9TaXplID0gZWxlbWVudC5vZmZzZXRXaWR0aCA8PSAwICYmIGVsZW1lbnQub2Zmc2V0SGVpZ2h0IDw9IDA7XG5cbiAgLy8gSWYgdGhlIG5vZGUgaXMgZW1wdHksIHRoaXMgaXMgZ29vZCBlbm91Z2hcbiAgaWYgKHplcm9TaXplICYmICFlbGVtZW50LmlubmVySFRNTCkgcmV0dXJuIHRydWU7XG5cbiAgdHJ5IHtcbiAgICAvLyBPdGhlcndpc2Ugd2UgbmVlZCB0byBjaGVjayBzb21lIHN0eWxlc1xuICAgIHZhciBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICAgIHJldHVybiB6ZXJvU2l6ZSA/IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoXCJvdmVyZmxvd1wiKSAhPT0gXCJ2aXNpYmxlXCIgfHxcbiAgICAvLyBpZiAnb3ZlcmZsb3c6IHZpc2libGUnIHNldCwgY2hlY2sgaWYgdGhlcmUgaXMgYWN0dWFsbHkgYW55IG92ZXJmbG93XG4gICAgZWxlbWVudC5zY3JvbGxXaWR0aCA8PSAwICYmIGVsZW1lbnQuc2Nyb2xsSGVpZ2h0IDw9IDAgOiBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwiZGlzcGxheVwiKSA9PSBcIm5vbmVcIjtcbiAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW5zcGVjdCBlbGVtZW50IHN0eWxlXCIpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiB2aXNpYmxlKGVsZW1lbnQpIHtcbiAgdmFyIHBhcmVudEVsZW1lbnQgPSBlbGVtZW50O1xuICB3aGlsZSAocGFyZW50RWxlbWVudCkge1xuICAgIGlmIChwYXJlbnRFbGVtZW50ID09PSBkb2N1bWVudC5ib2R5KSBicmVhaztcbiAgICBpZiAoaGlkZXNDb250ZW50cyhwYXJlbnRFbGVtZW50KSkgcmV0dXJuIGZhbHNlO1xuICAgIHBhcmVudEVsZW1lbnQgPSBwYXJlbnRFbGVtZW50LnBhcmVudE5vZGU7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGZvY3VzYWJsZShlbGVtZW50LCBpc1RhYkluZGV4Tm90TmFOKSB7XG4gIHZhciBub2RlTmFtZSA9IGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgdmFyIHJlcyA9IHRhYmJhYmxlTm9kZS50ZXN0KG5vZGVOYW1lKSAmJiAhZWxlbWVudC5kaXNhYmxlZCB8fCAobm9kZU5hbWUgPT09IFwiYVwiID8gZWxlbWVudC5ocmVmIHx8IGlzVGFiSW5kZXhOb3ROYU4gOiBpc1RhYkluZGV4Tm90TmFOKTtcbiAgcmV0dXJuIHJlcyAmJiB2aXNpYmxlKGVsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiB0YWJiYWJsZShlbGVtZW50KSB7XG4gIHZhciB0YWJJbmRleCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGFiaW5kZXhcIik7XG4gIGlmICh0YWJJbmRleCA9PT0gbnVsbCkgdGFiSW5kZXggPSB1bmRlZmluZWQ7XG4gIHZhciBpc1RhYkluZGV4TmFOID0gaXNOYU4odGFiSW5kZXgpO1xuICByZXR1cm4gKGlzVGFiSW5kZXhOYU4gfHwgdGFiSW5kZXggPj0gMCkgJiYgZm9jdXNhYmxlKGVsZW1lbnQsICFpc1RhYkluZGV4TmFOKTtcbn1cblxuZnVuY3Rpb24gZmluZFRhYmJhYmxlRGVzY2VuZGFudHMoZWxlbWVudCkge1xuICByZXR1cm4gW10uc2xpY2UuY2FsbChlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIqXCIpLCAwKS5maWx0ZXIodGFiYmFibGUpO1xufVxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzW1wiZGVmYXVsdFwiXTsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMucmVzZXRTdGF0ZSA9IHJlc2V0U3RhdGU7XG5leHBvcnRzLmxvZyA9IGxvZztcbmV4cG9ydHMuaGFuZGxlQmx1ciA9IGhhbmRsZUJsdXI7XG5leHBvcnRzLmhhbmRsZUZvY3VzID0gaGFuZGxlRm9jdXM7XG5leHBvcnRzLm1hcmtGb3JGb2N1c0xhdGVyID0gbWFya0ZvckZvY3VzTGF0ZXI7XG5leHBvcnRzLnJldHVybkZvY3VzID0gcmV0dXJuRm9jdXM7XG5leHBvcnRzLnBvcFdpdGhvdXRGb2N1cyA9IHBvcFdpdGhvdXRGb2N1cztcbmV4cG9ydHMuc2V0dXBTY29wZWRGb2N1cyA9IHNldHVwU2NvcGVkRm9jdXM7XG5leHBvcnRzLnRlYXJkb3duU2NvcGVkRm9jdXMgPSB0ZWFyZG93blNjb3BlZEZvY3VzO1xuXG52YXIgX3RhYmJhYmxlID0gcmVxdWlyZShcIi4uL2hlbHBlcnMvdGFiYmFibGVcIik7XG5cbnZhciBfdGFiYmFibGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGFiYmFibGUpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgZm9jdXNMYXRlckVsZW1lbnRzID0gW107XG52YXIgbW9kYWxFbGVtZW50ID0gbnVsbDtcbnZhciBuZWVkVG9Gb2N1cyA9IGZhbHNlO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gcmVzZXRTdGF0ZSgpIHtcbiAgZm9jdXNMYXRlckVsZW1lbnRzID0gW107XG59XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBsb2coKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHJldHVybjtcbiAgY29uc29sZS5sb2coXCJmb2N1c01hbmFnZXIgLS0tLS0tLS0tLVwiKTtcbiAgZm9jdXNMYXRlckVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGYpIHtcbiAgICB2YXIgY2hlY2sgPSBmIHx8IHt9O1xuICAgIGNvbnNvbGUubG9nKGNoZWNrLm5vZGVOYW1lLCBjaGVjay5jbGFzc05hbWUsIGNoZWNrLmlkKTtcbiAgfSk7XG4gIGNvbnNvbGUubG9nKFwiZW5kIGZvY3VzTWFuYWdlciAtLS0tLS0tLS0tXCIpO1xufVxuLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovXG5cbmZ1bmN0aW9uIGhhbmRsZUJsdXIoKSB7XG4gIG5lZWRUb0ZvY3VzID0gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRm9jdXMoKSB7XG4gIGlmIChuZWVkVG9Gb2N1cykge1xuICAgIG5lZWRUb0ZvY3VzID0gZmFsc2U7XG4gICAgaWYgKCFtb2RhbEVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gbmVlZCB0byBzZWUgaG93IGpRdWVyeSBzaGltcyBkb2N1bWVudC5vbignZm9jdXNpbicpIHNvIHdlIGRvbid0IG5lZWQgdGhlXG4gICAgLy8gc2V0VGltZW91dCwgZmlyZWZveCBkb2Vzbid0IHN1cHBvcnQgZm9jdXNpbiwgaWYgaXQgZGlkLCB3ZSBjb3VsZCBmb2N1c1xuICAgIC8vIHRoZSBlbGVtZW50IG91dHNpZGUgb2YgYSBzZXRUaW1lb3V0LiBTaWRlLWVmZmVjdCBvZiB0aGlzIGltcGxlbWVudGF0aW9uXG4gICAgLy8gaXMgdGhhdCB0aGUgZG9jdW1lbnQuYm9keSBnZXRzIGZvY3VzLCBhbmQgdGhlbiB3ZSBmb2N1cyBvdXIgZWxlbWVudCByaWdodFxuICAgIC8vIGFmdGVyLCBzZWVtcyBmaW5lLlxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKG1vZGFsRWxlbWVudC5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgZWwgPSAoMCwgX3RhYmJhYmxlMi5kZWZhdWx0KShtb2RhbEVsZW1lbnQpWzBdIHx8IG1vZGFsRWxlbWVudDtcbiAgICAgIGVsLmZvY3VzKCk7XG4gICAgfSwgMCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWFya0ZvckZvY3VzTGF0ZXIoKSB7XG4gIGZvY3VzTGF0ZXJFbGVtZW50cy5wdXNoKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXG5mdW5jdGlvbiByZXR1cm5Gb2N1cygpIHtcbiAgdmFyIHByZXZlbnRTY3JvbGwgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlO1xuXG4gIHZhciB0b0ZvY3VzID0gbnVsbDtcbiAgdHJ5IHtcbiAgICBpZiAoZm9jdXNMYXRlckVsZW1lbnRzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgdG9Gb2N1cyA9IGZvY3VzTGF0ZXJFbGVtZW50cy5wb3AoKTtcbiAgICAgIHRvRm9jdXMuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiBwcmV2ZW50U2Nyb2xsIH0pO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLndhcm4oW1wiWW91IHRyaWVkIHRvIHJldHVybiBmb2N1cyB0b1wiLCB0b0ZvY3VzLCBcImJ1dCBpdCBpcyBub3QgaW4gdGhlIERPTSBhbnltb3JlXCJdLmpvaW4oXCIgXCIpKTtcbiAgfVxufVxuLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovXG5cbmZ1bmN0aW9uIHBvcFdpdGhvdXRGb2N1cygpIHtcbiAgZm9jdXNMYXRlckVsZW1lbnRzLmxlbmd0aCA+IDAgJiYgZm9jdXNMYXRlckVsZW1lbnRzLnBvcCgpO1xufVxuXG5mdW5jdGlvbiBzZXR1cFNjb3BlZEZvY3VzKGVsZW1lbnQpIHtcbiAgbW9kYWxFbGVtZW50ID0gZWxlbWVudDtcblxuICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgaGFuZGxlQmx1ciwgZmFsc2UpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBoYW5kbGVGb2N1cywgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93LmF0dGFjaEV2ZW50KFwib25CbHVyXCIsIGhhbmRsZUJsdXIpO1xuICAgIGRvY3VtZW50LmF0dGFjaEV2ZW50KFwib25Gb2N1c1wiLCBoYW5kbGVGb2N1cyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdGVhcmRvd25TY29wZWRGb2N1cygpIHtcbiAgbW9kYWxFbGVtZW50ID0gbnVsbDtcblxuICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgaGFuZGxlQmx1cik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIGhhbmRsZUZvY3VzKTtcbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cuZGV0YWNoRXZlbnQoXCJvbkJsdXJcIiwgaGFuZGxlQmx1cik7XG4gICAgZG9jdW1lbnQuZGV0YWNoRXZlbnQoXCJvbkZvY3VzXCIsIGhhbmRsZUZvY3VzKTtcbiAgfVxufSIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gc2NvcGVUYWI7XG5cbnZhciBfdGFiYmFibGUgPSByZXF1aXJlKFwiLi90YWJiYWJsZVwiKTtcblxudmFyIF90YWJiYWJsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90YWJiYWJsZSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIHNjb3BlVGFiKG5vZGUsIGV2ZW50KSB7XG4gIHZhciB0YWJiYWJsZSA9ICgwLCBfdGFiYmFibGUyLmRlZmF1bHQpKG5vZGUpO1xuXG4gIGlmICghdGFiYmFibGUubGVuZ3RoKSB7XG4gICAgLy8gRG8gbm90aGluZywgc2luY2UgdGhlcmUgYXJlIG5vIGVsZW1lbnRzIHRoYXQgY2FuIHJlY2VpdmUgZm9jdXMuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgdGFyZ2V0ID0gdm9pZCAwO1xuXG4gIHZhciBzaGlmdEtleSA9IGV2ZW50LnNoaWZ0S2V5O1xuICB2YXIgaGVhZCA9IHRhYmJhYmxlWzBdO1xuICB2YXIgdGFpbCA9IHRhYmJhYmxlW3RhYmJhYmxlLmxlbmd0aCAtIDFdO1xuXG4gIC8vIHByb2NlZWQgd2l0aCBkZWZhdWx0IGJyb3dzZXIgYmVoYXZpb3Igb24gdGFiLlxuICAvLyBGb2N1cyBvbiBsYXN0IGVsZW1lbnQgb24gc2hpZnQgKyB0YWIuXG4gIGlmIChub2RlID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7XG4gICAgaWYgKCFzaGlmdEtleSkgcmV0dXJuO1xuICAgIHRhcmdldCA9IHRhaWw7XG4gIH1cblxuICBpZiAodGFpbCA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiAhc2hpZnRLZXkpIHtcbiAgICB0YXJnZXQgPSBoZWFkO1xuICB9XG5cbiAgaWYgKGhlYWQgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgc2hpZnRLZXkpIHtcbiAgICB0YXJnZXQgPSB0YWlsO1xuICB9XG5cbiAgaWYgKHRhcmdldCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGFyZ2V0LmZvY3VzKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gU2FmYXJpIHJhZGlvIGlzc3VlLlxuICAvL1xuICAvLyBTYWZhcmkgZG9lcyBub3QgbW92ZSB0aGUgZm9jdXMgdG8gdGhlIHJhZGlvIGJ1dHRvbixcbiAgLy8gc28gd2UgbmVlZCB0byBmb3JjZSBpdCB0byByZWFsbHkgd2FsayB0aHJvdWdoIGFsbCBlbGVtZW50cy5cbiAgLy9cbiAgLy8gVGhpcyBpcyB2ZXJ5IGVycm9yIHByb25lLCBzaW5jZSB3ZSBhcmUgdHJ5aW5nIHRvIGd1ZXNzXG4gIC8vIGlmIGl0IGlzIGEgc2FmYXJpIGJyb3dzZXIgZnJvbSB0aGUgZmlyc3Qgb2NjdXJlbmNlIGJldHdlZW5cbiAgLy8gY2hyb21lIG9yIHNhZmFyaS5cbiAgLy9cbiAgLy8gVGhlIGNocm9tZSB1c2VyIGFnZW50IGNvbnRhaW5zIHRoZSBmaXJzdCBvY3VycmVuY2VcbiAgLy8gYXMgdGhlICdjaHJvbWUvdmVyc2lvbicgYW5kIGxhdGVyIHRoZSAnc2FmYXJpL3ZlcnNpb24nLlxuICB2YXIgY2hlY2tTYWZhcmkgPSAvKFxcYkNocm9tZVxcYnxcXGJTYWZhcmlcXGIpXFwvLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICB2YXIgaXNTYWZhcmlEZXNrdG9wID0gY2hlY2tTYWZhcmkgIT0gbnVsbCAmJiBjaGVja1NhZmFyaVsxXSAhPSBcIkNocm9tZVwiICYmIC9cXGJpUG9kXFxifFxcYmlQYWRcXGIvZy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpID09IG51bGw7XG5cbiAgLy8gSWYgd2UgYXJlIG5vdCBpbiBzYWZhcmkgZGVza3RvcCwgbGV0IHRoZSBicm93c2VyIGNvbnRyb2xcbiAgLy8gdGhlIGZvY3VzXG4gIGlmICghaXNTYWZhcmlEZXNrdG9wKSByZXR1cm47XG5cbiAgdmFyIHggPSB0YWJiYWJsZS5pbmRleE9mKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xuXG4gIGlmICh4ID4gLTEpIHtcbiAgICB4ICs9IHNoaWZ0S2V5ID8gLTEgOiAxO1xuICB9XG5cbiAgdGFyZ2V0ID0gdGFiYmFibGVbeF07XG5cbiAgLy8gSWYgdGhlIHRhYmJhYmxlIGVsZW1lbnQgZG9lcyBub3QgZXhpc3QsXG4gIC8vIGZvY3VzIGhlYWQvdGFpbCBiYXNlZCBvbiBzaGlmdEtleVxuICBpZiAodHlwZW9mIHRhcmdldCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGFyZ2V0ID0gc2hpZnRLZXkgPyB0YWlsIDogaGVhZDtcbiAgICB0YXJnZXQuZm9jdXMoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIHRhcmdldC5mb2N1cygpO1xufVxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzW1wiZGVmYXVsdFwiXTsiLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBTaW1pbGFyIHRvIGludmFyaWFudCBidXQgb25seSBsb2dzIGEgd2FybmluZyBpZiB0aGUgY29uZGl0aW9uIGlzIG5vdCBtZXQuXG4gKiBUaGlzIGNhbiBiZSB1c2VkIHRvIGxvZyBpc3N1ZXMgaW4gZGV2ZWxvcG1lbnQgZW52aXJvbm1lbnRzIGluIGNyaXRpY2FsXG4gKiBwYXRocy4gUmVtb3ZpbmcgdGhlIGxvZ2dpbmcgY29kZSBmb3IgcHJvZHVjdGlvbiBlbnZpcm9ubWVudHMgd2lsbCBrZWVwIHRoZVxuICogc2FtZSBsb2dpYyBhbmQgZm9sbG93IHRoZSBzYW1lIGNvZGUgcGF0aHMuXG4gKi9cblxudmFyIF9fREVWX18gPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nO1xuXG52YXIgd2FybmluZyA9IGZ1bmN0aW9uKCkge307XG5cbmlmIChfX0RFVl9fKSB7XG4gIHZhciBwcmludFdhcm5pbmcgPSBmdW5jdGlvbiBwcmludFdhcm5pbmcoZm9ybWF0LCBhcmdzKSB7XG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgYXJncyA9IG5ldyBBcnJheShsZW4gPiAxID8gbGVuIC0gMSA6IDApO1xuICAgIGZvciAodmFyIGtleSA9IDE7IGtleSA8IGxlbjsga2V5KyspIHtcbiAgICAgIGFyZ3Nba2V5IC0gMV0gPSBhcmd1bWVudHNba2V5XTtcbiAgICB9XG4gICAgdmFyIGFyZ0luZGV4ID0gMDtcbiAgICB2YXIgbWVzc2FnZSA9ICdXYXJuaW5nOiAnICtcbiAgICAgIGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107XG4gICAgICB9KTtcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgLy8gLS0tIFdlbGNvbWUgdG8gZGVidWdnaW5nIFJlYWN0IC0tLVxuICAgICAgLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCB5b3UgY2FuIHVzZSB0aGlzIHN0YWNrXG4gICAgICAvLyB0byBmaW5kIHRoZSBjYWxsc2l0ZSB0aGF0IGNhdXNlZCB0aGlzIHdhcm5pbmcgdG8gZmlyZS5cbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9IGNhdGNoICh4KSB7fVxuICB9XG5cbiAgd2FybmluZyA9IGZ1bmN0aW9uKGNvbmRpdGlvbiwgZm9ybWF0LCBhcmdzKSB7XG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgYXJncyA9IG5ldyBBcnJheShsZW4gPiAyID8gbGVuIC0gMiA6IDApO1xuICAgIGZvciAodmFyIGtleSA9IDI7IGtleSA8IGxlbjsga2V5KyspIHtcbiAgICAgIGFyZ3Nba2V5IC0gMl0gPSBhcmd1bWVudHNba2V5XTtcbiAgICB9XG4gICAgaWYgKGZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ2B3YXJuaW5nKGNvbmRpdGlvbiwgZm9ybWF0LCAuLi5hcmdzKWAgcmVxdWlyZXMgYSB3YXJuaW5nICcgK1xuICAgICAgICAgICdtZXNzYWdlIGFyZ3VtZW50J1xuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgIHByaW50V2FybmluZy5hcHBseShudWxsLCBbZm9ybWF0XS5jb25jYXQoYXJncykpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB3YXJuaW5nO1xuIiwiLyohXG4gIENvcHlyaWdodCAoYykgMjAxNSBKZWQgV2F0c29uLlxuICBCYXNlZCBvbiBjb2RlIHRoYXQgaXMgQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAgQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgY2FuVXNlRE9NID0gISEoXG5cdFx0dHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcblx0XHR3aW5kb3cuZG9jdW1lbnQgJiZcblx0XHR3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudFxuXHQpO1xuXG5cdHZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHtcblxuXHRcdGNhblVzZURPTTogY2FuVXNlRE9NLFxuXG5cdFx0Y2FuVXNlV29ya2VyczogdHlwZW9mIFdvcmtlciAhPT0gJ3VuZGVmaW5lZCcsXG5cblx0XHRjYW5Vc2VFdmVudExpc3RlbmVyczpcblx0XHRcdGNhblVzZURPTSAmJiAhISh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciB8fCB3aW5kb3cuYXR0YWNoRXZlbnQpLFxuXG5cdFx0Y2FuVXNlVmlld3BvcnQ6IGNhblVzZURPTSAmJiAhIXdpbmRvdy5zY3JlZW5cblxuXHR9O1xuXG5cdGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0ZGVmaW5lKGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBFeGVjdXRpb25FbnZpcm9ubWVudDtcblx0XHR9KTtcblx0fSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gRXhlY3V0aW9uRW52aXJvbm1lbnQ7XG5cdH0gZWxzZSB7XG5cdFx0d2luZG93LkV4ZWN1dGlvbkVudmlyb25tZW50ID0gRXhlY3V0aW9uRW52aXJvbm1lbnQ7XG5cdH1cblxufSgpKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5jYW5Vc2VET00gPSBleHBvcnRzLlNhZmVOb2RlTGlzdCA9IGV4cG9ydHMuU2FmZUhUTUxDb2xsZWN0aW9uID0gdW5kZWZpbmVkO1xuXG52YXIgX2V4ZW52ID0gcmVxdWlyZShcImV4ZW52XCIpO1xuXG52YXIgX2V4ZW52MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZW52KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIEVFID0gX2V4ZW52Mi5kZWZhdWx0O1xuXG52YXIgU2FmZUhUTUxFbGVtZW50ID0gRUUuY2FuVXNlRE9NID8gd2luZG93LkhUTUxFbGVtZW50IDoge307XG5cbnZhciBTYWZlSFRNTENvbGxlY3Rpb24gPSBleHBvcnRzLlNhZmVIVE1MQ29sbGVjdGlvbiA9IEVFLmNhblVzZURPTSA/IHdpbmRvdy5IVE1MQ29sbGVjdGlvbiA6IHt9O1xuXG52YXIgU2FmZU5vZGVMaXN0ID0gZXhwb3J0cy5TYWZlTm9kZUxpc3QgPSBFRS5jYW5Vc2VET00gPyB3aW5kb3cuTm9kZUxpc3QgOiB7fTtcblxudmFyIGNhblVzZURPTSA9IGV4cG9ydHMuY2FuVXNlRE9NID0gRUUuY2FuVXNlRE9NO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBTYWZlSFRNTEVsZW1lbnQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLnJlc2V0U3RhdGUgPSByZXNldFN0YXRlO1xuZXhwb3J0cy5sb2cgPSBsb2c7XG5leHBvcnRzLmFzc2VydE5vZGVMaXN0ID0gYXNzZXJ0Tm9kZUxpc3Q7XG5leHBvcnRzLnNldEVsZW1lbnQgPSBzZXRFbGVtZW50O1xuZXhwb3J0cy52YWxpZGF0ZUVsZW1lbnQgPSB2YWxpZGF0ZUVsZW1lbnQ7XG5leHBvcnRzLmhpZGUgPSBoaWRlO1xuZXhwb3J0cy5zaG93ID0gc2hvdztcbmV4cG9ydHMuZG9jdW1lbnROb3RSZWFkeU9yU1NSVGVzdGluZyA9IGRvY3VtZW50Tm90UmVhZHlPclNTUlRlc3Rpbmc7XG5cbnZhciBfd2FybmluZyA9IHJlcXVpcmUoXCJ3YXJuaW5nXCIpO1xuXG52YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cbnZhciBfc2FmZUhUTUxFbGVtZW50ID0gcmVxdWlyZShcIi4vc2FmZUhUTUxFbGVtZW50XCIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgZ2xvYmFsRWxlbWVudCA9IG51bGw7XG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiByZXNldFN0YXRlKCkge1xuICBpZiAoZ2xvYmFsRWxlbWVudCkge1xuICAgIGlmIChnbG9iYWxFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSkge1xuICAgICAgZ2xvYmFsRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiKTtcbiAgICB9IGVsc2UgaWYgKGdsb2JhbEVsZW1lbnQubGVuZ3RoICE9IG51bGwpIHtcbiAgICAgIGdsb2JhbEVsZW1lbnQuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGdsb2JhbEVsZW1lbnQpLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIik7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgZ2xvYmFsRWxlbWVudCA9IG51bGw7XG59XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBsb2coKSB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIpIHJldHVybjtcbiAgdmFyIGNoZWNrID0gZ2xvYmFsRWxlbWVudCB8fCB7fTtcbiAgY29uc29sZS5sb2coXCJhcmlhQXBwSGlkZXIgLS0tLS0tLS0tLVwiKTtcbiAgY29uc29sZS5sb2coY2hlY2subm9kZU5hbWUsIGNoZWNrLmNsYXNzTmFtZSwgY2hlY2suaWQpO1xuICBjb25zb2xlLmxvZyhcImVuZCBhcmlhQXBwSGlkZXIgLS0tLS0tLS0tLVwiKTtcbn1cbi8qIGVzbGludC1lbmFibGUgbm8tY29uc29sZSAqL1xuXG5mdW5jdGlvbiBhc3NlcnROb2RlTGlzdChub2RlTGlzdCwgc2VsZWN0b3IpIHtcbiAgaWYgKCFub2RlTGlzdCB8fCAhbm9kZUxpc3QubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwicmVhY3QtbW9kYWw6IE5vIGVsZW1lbnRzIHdlcmUgZm91bmQgZm9yIHNlbGVjdG9yIFwiICsgc2VsZWN0b3IgKyBcIi5cIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0RWxlbWVudChlbGVtZW50KSB7XG4gIHZhciB1c2VFbGVtZW50ID0gZWxlbWVudDtcbiAgaWYgKHR5cGVvZiB1c2VFbGVtZW50ID09PSBcInN0cmluZ1wiICYmIF9zYWZlSFRNTEVsZW1lbnQuY2FuVXNlRE9NKSB7XG4gICAgdmFyIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh1c2VFbGVtZW50KTtcbiAgICBhc3NlcnROb2RlTGlzdChlbCwgdXNlRWxlbWVudCk7XG4gICAgdXNlRWxlbWVudCA9IGVsO1xuICB9XG4gIGdsb2JhbEVsZW1lbnQgPSB1c2VFbGVtZW50IHx8IGdsb2JhbEVsZW1lbnQ7XG4gIHJldHVybiBnbG9iYWxFbGVtZW50O1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZUVsZW1lbnQoYXBwRWxlbWVudCkge1xuICB2YXIgZWwgPSBhcHBFbGVtZW50IHx8IGdsb2JhbEVsZW1lbnQ7XG4gIGlmIChlbCkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGVsKSB8fCBlbCBpbnN0YW5jZW9mIEhUTUxDb2xsZWN0aW9uIHx8IGVsIGluc3RhbmNlb2YgTm9kZUxpc3QgPyBlbCA6IFtlbF07XG4gIH0gZWxzZSB7XG4gICAgKDAsIF93YXJuaW5nMi5kZWZhdWx0KShmYWxzZSwgW1wicmVhY3QtbW9kYWw6IEFwcCBlbGVtZW50IGlzIG5vdCBkZWZpbmVkLlwiLCBcIlBsZWFzZSB1c2UgYE1vZGFsLnNldEFwcEVsZW1lbnQoZWwpYCBvciBzZXQgYGFwcEVsZW1lbnQ9e2VsfWAuXCIsIFwiVGhpcyBpcyBuZWVkZWQgc28gc2NyZWVuIHJlYWRlcnMgZG9uJ3Qgc2VlIG1haW4gY29udGVudFwiLCBcIndoZW4gbW9kYWwgaXMgb3BlbmVkLiBJdCBpcyBub3QgcmVjb21tZW5kZWQsIGJ1dCB5b3UgY2FuIG9wdC1vdXRcIiwgXCJieSBzZXR0aW5nIGBhcmlhSGlkZUFwcD17ZmFsc2V9YC5cIl0uam9pbihcIiBcIikpO1xuXG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhpZGUoYXBwRWxlbWVudCkge1xuICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgdHJ5IHtcbiAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSB2YWxpZGF0ZUVsZW1lbnQoYXBwRWxlbWVudClbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG4gICAgICB2YXIgZWwgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgZWwuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgXCJ0cnVlXCIpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlO1xuICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc2hvdyhhcHBFbGVtZW50KSB7XG4gIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWU7XG4gIHZhciBfZGlkSXRlcmF0b3JFcnJvcjIgPSBmYWxzZTtcbiAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDtcblxuICB0cnkge1xuICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSB2YWxpZGF0ZUVsZW1lbnQoYXBwRWxlbWVudClbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgIHZhciBlbCA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIik7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlO1xuICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xuICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IyKSB7XG4gICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZG9jdW1lbnROb3RSZWFkeU9yU1NSVGVzdGluZygpIHtcbiAgZ2xvYmFsRWxlbWVudCA9IG51bGw7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLnJlc2V0U3RhdGUgPSByZXNldFN0YXRlO1xuZXhwb3J0cy5sb2cgPSBsb2c7XG52YXIgaHRtbENsYXNzTGlzdCA9IHt9O1xudmFyIGRvY0JvZHlDbGFzc0xpc3QgPSB7fTtcblxuLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIHJlbW92ZUNsYXNzKGF0LCBjbHMpIHtcbiAgYXQuY2xhc3NMaXN0LnJlbW92ZShjbHMpO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gcmVzZXRTdGF0ZSgpIHtcbiAgdmFyIGh0bWxFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJodG1sXCIpWzBdO1xuICBmb3IgKHZhciBjbHMgaW4gaHRtbENsYXNzTGlzdCkge1xuICAgIHJlbW92ZUNsYXNzKGh0bWxFbGVtZW50LCBodG1sQ2xhc3NMaXN0W2Nsc10pO1xuICB9XG5cbiAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICBmb3IgKHZhciBfY2xzIGluIGRvY0JvZHlDbGFzc0xpc3QpIHtcbiAgICByZW1vdmVDbGFzcyhib2R5LCBkb2NCb2R5Q2xhc3NMaXN0W19jbHNdKTtcbiAgfVxuXG4gIGh0bWxDbGFzc0xpc3QgPSB7fTtcbiAgZG9jQm9keUNsYXNzTGlzdCA9IHt9O1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gbG9nKCkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiKSByZXR1cm47XG5cbiAgdmFyIGNsYXNzZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImh0bWxcIilbMF0uY2xhc3NOYW1lO1xuICB2YXIgYnVmZmVyID0gXCJTaG93IHRyYWNrZWQgY2xhc3NlczpcXG5cXG5cIjtcblxuICBidWZmZXIgKz0gXCI8aHRtbCAvPiAoXCIgKyBjbGFzc2VzICsgXCIpOlxcblwiO1xuICBmb3IgKHZhciB4IGluIGh0bWxDbGFzc0xpc3QpIHtcbiAgICBidWZmZXIgKz0gXCIgIFwiICsgeCArIFwiIFwiICsgaHRtbENsYXNzTGlzdFt4XSArIFwiXFxuXCI7XG4gIH1cblxuICBjbGFzc2VzID0gZG9jdW1lbnQuYm9keS5jbGFzc05hbWU7XG5cbiAgYnVmZmVyICs9IFwiXFxuXFxuZG9jLmJvZHkgKFwiICsgY2xhc3NlcyArIFwiKTpcXG5cIjtcbiAgZm9yICh2YXIgX3ggaW4gZG9jQm9keUNsYXNzTGlzdCkge1xuICAgIGJ1ZmZlciArPSBcIiAgXCIgKyBfeCArIFwiIFwiICsgZG9jQm9keUNsYXNzTGlzdFtfeF0gKyBcIlxcblwiO1xuICB9XG5cbiAgYnVmZmVyICs9IFwiXFxuXCI7XG5cbiAgY29uc29sZS5sb2coYnVmZmVyKTtcbn1cbi8qIGVzbGludC1lbmFibGUgbm8tY29uc29sZSAqL1xuXG4vKipcbiAqIFRyYWNrIHRoZSBudW1iZXIgb2YgcmVmZXJlbmNlIG9mIGEgY2xhc3MuXG4gKiBAcGFyYW0ge29iamVjdH0gcG9sbCBUaGUgcG9sbCB0byByZWNlaXZlIHRoZSByZWZlcmVuY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lIFRoZSBjbGFzcyBuYW1lLlxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG52YXIgaW5jcmVtZW50UmVmZXJlbmNlID0gZnVuY3Rpb24gaW5jcmVtZW50UmVmZXJlbmNlKHBvbGwsIGNsYXNzTmFtZSkge1xuICBpZiAoIXBvbGxbY2xhc3NOYW1lXSkge1xuICAgIHBvbGxbY2xhc3NOYW1lXSA9IDA7XG4gIH1cbiAgcG9sbFtjbGFzc05hbWVdICs9IDE7XG4gIHJldHVybiBjbGFzc05hbWU7XG59O1xuXG4vKipcbiAqIERyb3AgdGhlIHJlZmVyZW5jZSBvZiBhIGNsYXNzLlxuICogQHBhcmFtIHtvYmplY3R9IHBvbGwgVGhlIHBvbGwgdG8gcmVjZWl2ZSB0aGUgcmVmZXJlbmNlLlxuICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZSBUaGUgY2xhc3MgbmFtZS5cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xudmFyIGRlY3JlbWVudFJlZmVyZW5jZSA9IGZ1bmN0aW9uIGRlY3JlbWVudFJlZmVyZW5jZShwb2xsLCBjbGFzc05hbWUpIHtcbiAgaWYgKHBvbGxbY2xhc3NOYW1lXSkge1xuICAgIHBvbGxbY2xhc3NOYW1lXSAtPSAxO1xuICB9XG4gIHJldHVybiBjbGFzc05hbWU7XG59O1xuXG4vKipcbiAqIFRyYWNrIGEgY2xhc3MgYW5kIGFkZCB0byB0aGUgZ2l2ZW4gY2xhc3MgbGlzdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjbGFzc0xpc3RSZWYgQSBjbGFzcyBsaXN0IG9mIGFuIGVsZW1lbnQuXG4gKiBAcGFyYW0ge09iamVjdH0gcG9sbCAgICAgICAgIFRoZSBwb2xsIHRvIGJlIHVzZWQuXG4gKiBAcGFyYW0ge0FycmF5fSAgY2xhc3NlcyAgICAgIFRoZSBsaXN0IG9mIGNsYXNzZXMgdG8gYmUgdHJhY2tlZC5cbiAqL1xudmFyIHRyYWNrQ2xhc3MgPSBmdW5jdGlvbiB0cmFja0NsYXNzKGNsYXNzTGlzdFJlZiwgcG9sbCwgY2xhc3Nlcykge1xuICBjbGFzc2VzLmZvckVhY2goZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAgIGluY3JlbWVudFJlZmVyZW5jZShwb2xsLCBjbGFzc05hbWUpO1xuICAgIGNsYXNzTGlzdFJlZi5hZGQoY2xhc3NOYW1lKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIFVudHJhY2sgYSBjbGFzcyBhbmQgcmVtb3ZlIGZyb20gdGhlIGdpdmVuIGNsYXNzIGxpc3QgaWYgdGhlIHJlZmVyZW5jZVxuICogcmVhY2hlcyAwLlxuICogQHBhcmFtIHtPYmplY3R9IGNsYXNzTGlzdFJlZiBBIGNsYXNzIGxpc3Qgb2YgYW4gZWxlbWVudC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBwb2xsICAgICAgICAgVGhlIHBvbGwgdG8gYmUgdXNlZC5cbiAqIEBwYXJhbSB7QXJyYXl9ICBjbGFzc2VzICAgICAgVGhlIGxpc3Qgb2YgY2xhc3NlcyB0byBiZSB1bnRyYWNrZWQuXG4gKi9cbnZhciB1bnRyYWNrQ2xhc3MgPSBmdW5jdGlvbiB1bnRyYWNrQ2xhc3MoY2xhc3NMaXN0UmVmLCBwb2xsLCBjbGFzc2VzKSB7XG4gIGNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG4gICAgZGVjcmVtZW50UmVmZXJlbmNlKHBvbGwsIGNsYXNzTmFtZSk7XG4gICAgcG9sbFtjbGFzc05hbWVdID09PSAwICYmIGNsYXNzTGlzdFJlZi5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIFB1YmxpYyBpbmZlcmZhY2UgdG8gYWRkIGNsYXNzZXMgdG8gdGhlIGRvY3VtZW50LmJvZHkuXG4gKiBAcGFyYW0ge3N0cmluZ30gYm9keUNsYXNzIFRoZSBjbGFzcyBzdHJpbmcgdG8gYmUgYWRkZWQuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIEl0IG1heSBjb250YWluIG1vcmUgdGhlbiBvbmUgY2xhc3NcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCAnICcgYXMgc2VwYXJhdG9yLlxuICovXG52YXIgYWRkID0gZXhwb3J0cy5hZGQgPSBmdW5jdGlvbiBhZGQoZWxlbWVudCwgY2xhc3NTdHJpbmcpIHtcbiAgcmV0dXJuIHRyYWNrQ2xhc3MoZWxlbWVudC5jbGFzc0xpc3QsIGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PSBcImh0bWxcIiA/IGh0bWxDbGFzc0xpc3QgOiBkb2NCb2R5Q2xhc3NMaXN0LCBjbGFzc1N0cmluZy5zcGxpdChcIiBcIikpO1xufTtcblxuLyoqXG4gKiBQdWJsaWMgaW5mZXJmYWNlIHRvIHJlbW92ZSBjbGFzc2VzIGZyb20gdGhlIGRvY3VtZW50LmJvZHkuXG4gKiBAcGFyYW0ge3N0cmluZ30gYm9keUNsYXNzIFRoZSBjbGFzcyBzdHJpbmcgdG8gYmUgYWRkZWQuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIEl0IG1heSBjb250YWluIG1vcmUgdGhlbiBvbmUgY2xhc3NcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCAnICcgYXMgc2VwYXJhdG9yLlxuICovXG52YXIgcmVtb3ZlID0gZXhwb3J0cy5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoZWxlbWVudCwgY2xhc3NTdHJpbmcpIHtcbiAgcmV0dXJuIHVudHJhY2tDbGFzcyhlbGVtZW50LmNsYXNzTGlzdCwgZWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09IFwiaHRtbFwiID8gaHRtbENsYXNzTGlzdCA6IGRvY0JvZHlDbGFzc0xpc3QsIGNsYXNzU3RyaW5nLnNwbGl0KFwiIFwiKSk7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5sb2cgPSBsb2c7XG5leHBvcnRzLnJlc2V0U3RhdGUgPSByZXNldFN0YXRlO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vLyBUcmFja3MgcG9ydGFscyB0aGF0IGFyZSBvcGVuIGFuZCBlbWl0cyBldmVudHMgdG8gc3Vic2NyaWJlcnNcblxudmFyIFBvcnRhbE9wZW5JbnN0YW5jZXMgPSBmdW5jdGlvbiBQb3J0YWxPcGVuSW5zdGFuY2VzKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQb3J0YWxPcGVuSW5zdGFuY2VzKTtcblxuICB0aGlzLnJlZ2lzdGVyID0gZnVuY3Rpb24gKG9wZW5JbnN0YW5jZSkge1xuICAgIGlmIChfdGhpcy5vcGVuSW5zdGFuY2VzLmluZGV4T2Yob3Blbkluc3RhbmNlKSAhPT0gLTEpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS53YXJuKFwiUmVhY3QtTW9kYWw6IENhbm5vdCByZWdpc3RlciBtb2RhbCBpbnN0YW5jZSB0aGF0J3MgYWxyZWFkeSBvcGVuXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfdGhpcy5vcGVuSW5zdGFuY2VzLnB1c2gob3Blbkluc3RhbmNlKTtcbiAgICBfdGhpcy5lbWl0KFwicmVnaXN0ZXJcIik7XG4gIH07XG5cbiAgdGhpcy5kZXJlZ2lzdGVyID0gZnVuY3Rpb24gKG9wZW5JbnN0YW5jZSkge1xuICAgIHZhciBpbmRleCA9IF90aGlzLm9wZW5JbnN0YW5jZXMuaW5kZXhPZihvcGVuSW5zdGFuY2UpO1xuICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS53YXJuKFwiUmVhY3QtTW9kYWw6IFVuYWJsZSB0byBkZXJlZ2lzdGVyIFwiICsgb3Blbkluc3RhbmNlICsgXCIgYXMgXCIgKyBcIml0IHdhcyBuZXZlciByZWdpc3RlcmVkXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfdGhpcy5vcGVuSW5zdGFuY2VzLnNwbGljZShpbmRleCwgMSk7XG4gICAgX3RoaXMuZW1pdChcImRlcmVnaXN0ZXJcIik7XG4gIH07XG5cbiAgdGhpcy5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICBfdGhpcy5zdWJzY3JpYmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgfTtcblxuICB0aGlzLmVtaXQgPSBmdW5jdGlvbiAoZXZlbnRUeXBlKSB7XG4gICAgX3RoaXMuc3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgcmV0dXJuIHN1YnNjcmliZXIoZXZlbnRUeXBlLFxuICAgICAgLy8gc2hhbGxvdyBjb3B5IHRvIGF2b2lkIGFjY2lkZW50YWwgbXV0YXRpb25cbiAgICAgIF90aGlzLm9wZW5JbnN0YW5jZXMuc2xpY2UoKSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5vcGVuSW5zdGFuY2VzID0gW107XG4gIHRoaXMuc3Vic2NyaWJlcnMgPSBbXTtcbn07XG5cbnZhciBwb3J0YWxPcGVuSW5zdGFuY2VzID0gbmV3IFBvcnRhbE9wZW5JbnN0YW5jZXMoKTtcblxuLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIGxvZygpIHtcbiAgY29uc29sZS5sb2coXCJwb3J0YWxPcGVuSW5zdGFuY2VzIC0tLS0tLS0tLS1cIik7XG4gIGNvbnNvbGUubG9nKHBvcnRhbE9wZW5JbnN0YW5jZXMub3Blbkluc3RhbmNlcy5sZW5ndGgpO1xuICBwb3J0YWxPcGVuSW5zdGFuY2VzLm9wZW5JbnN0YW5jZXMuZm9yRWFjaChmdW5jdGlvbiAocCkge1xuICAgIHJldHVybiBjb25zb2xlLmxvZyhwKTtcbiAgfSk7XG4gIGNvbnNvbGUubG9nKFwiZW5kIHBvcnRhbE9wZW5JbnN0YW5jZXMgLS0tLS0tLS0tLVwiKTtcbn1cblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIHJlc2V0U3RhdGUoKSB7XG4gIHBvcnRhbE9wZW5JbnN0YW5jZXMgPSBuZXcgUG9ydGFsT3Blbkluc3RhbmNlcygpO1xufVxuLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovXG5cbmV4cG9ydHMuZGVmYXVsdCA9IHBvcnRhbE9wZW5JbnN0YW5jZXM7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLnJlc2V0U3RhdGUgPSByZXNldFN0YXRlO1xuZXhwb3J0cy5sb2cgPSBsb2c7XG5cbnZhciBfcG9ydGFsT3Blbkluc3RhbmNlcyA9IHJlcXVpcmUoXCIuL3BvcnRhbE9wZW5JbnN0YW5jZXNcIik7XG5cbnZhciBfcG9ydGFsT3Blbkluc3RhbmNlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3J0YWxPcGVuSW5zdGFuY2VzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLy8gQm9keSBmb2N1cyB0cmFwIHNlZSBJc3N1ZSAjNzQyXG5cbnZhciBiZWZvcmUgPSB2b2lkIDAsXG4gICAgYWZ0ZXIgPSB2b2lkIDAsXG4gICAgaW5zdGFuY2VzID0gW107XG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiByZXNldFN0YXRlKCkge1xuICB2YXIgX2FyciA9IFtiZWZvcmUsIGFmdGVyXTtcblxuICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgX2Fyci5sZW5ndGg7IF9pKyspIHtcbiAgICB2YXIgaXRlbSA9IF9hcnJbX2ldO1xuICAgIGlmICghaXRlbSkgY29udGludWU7XG4gICAgaXRlbS5wYXJlbnROb2RlICYmIGl0ZW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpdGVtKTtcbiAgfVxuICBiZWZvcmUgPSBhZnRlciA9IG51bGw7XG4gIGluc3RhbmNlcyA9IFtdO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gbG9nKCkge1xuICBjb25zb2xlLmxvZyhcImJvZHlUcmFwIC0tLS0tLS0tLS1cIik7XG4gIGNvbnNvbGUubG9nKGluc3RhbmNlcy5sZW5ndGgpO1xuICB2YXIgX2FycjIgPSBbYmVmb3JlLCBhZnRlcl07XG4gIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IF9hcnIyLmxlbmd0aDsgX2kyKyspIHtcbiAgICB2YXIgaXRlbSA9IF9hcnIyW19pMl07XG4gICAgdmFyIGNoZWNrID0gaXRlbSB8fCB7fTtcbiAgICBjb25zb2xlLmxvZyhjaGVjay5ub2RlTmFtZSwgY2hlY2suY2xhc3NOYW1lLCBjaGVjay5pZCk7XG4gIH1cbiAgY29uc29sZS5sb2coXCJlZG4gYm9keVRyYXAgLS0tLS0tLS0tLVwiKTtcbn1cbi8qIGVzbGludC1lbmFibGUgbm8tY29uc29sZSAqL1xuXG5mdW5jdGlvbiBmb2N1c0NvbnRlbnQoKSB7XG4gIGlmIChpbnN0YW5jZXMubGVuZ3RoID09PSAwKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihcIlJlYWN0LU1vZGFsOiBPcGVuIGluc3RhbmNlcyA+IDAgZXhwZWN0ZWRcIik7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBpbnN0YW5jZXNbaW5zdGFuY2VzLmxlbmd0aCAtIDFdLmZvY3VzQ29udGVudCgpO1xufVxuXG5mdW5jdGlvbiBib2R5VHJhcChldmVudFR5cGUsIG9wZW5JbnN0YW5jZXMpIHtcbiAgaWYgKCFiZWZvcmUgJiYgIWFmdGVyKSB7XG4gICAgYmVmb3JlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBiZWZvcmUuc2V0QXR0cmlidXRlKFwiZGF0YS1yZWFjdC1tb2RhbC1ib2R5LXRyYXBcIiwgXCJcIik7XG4gICAgYmVmb3JlLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIGJlZm9yZS5zdHlsZS5vcGFjaXR5ID0gXCIwXCI7XG4gICAgYmVmb3JlLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsIFwiMFwiKTtcbiAgICBiZWZvcmUuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIGZvY3VzQ29udGVudCk7XG4gICAgYWZ0ZXIgPSBiZWZvcmUuY2xvbmVOb2RlKCk7XG4gICAgYWZ0ZXIuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIGZvY3VzQ29udGVudCk7XG4gIH1cblxuICBpbnN0YW5jZXMgPSBvcGVuSW5zdGFuY2VzO1xuXG4gIGlmIChpbnN0YW5jZXMubGVuZ3RoID4gMCkge1xuICAgIC8vIEFkZCBmb2N1cyB0cmFwXG4gICAgaWYgKGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCAhPT0gYmVmb3JlKSB7XG4gICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShiZWZvcmUsIGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIGlmIChkb2N1bWVudC5ib2R5Lmxhc3RDaGlsZCAhPT0gYWZ0ZXIpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYWZ0ZXIpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBSZW1vdmUgZm9jdXMgdHJhcFxuICAgIGlmIChiZWZvcmUucGFyZW50RWxlbWVudCkge1xuICAgICAgYmVmb3JlLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoYmVmb3JlKTtcbiAgICB9XG4gICAgaWYgKGFmdGVyLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgIGFmdGVyLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoYWZ0ZXIpO1xuICAgIH1cbiAgfVxufVxuXG5fcG9ydGFsT3Blbkluc3RhbmNlczIuZGVmYXVsdC5zdWJzY3JpYmUoYm9keVRyYXApOyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKFwicmVhY3RcIik7XG5cbnZhciBfcHJvcFR5cGVzID0gcmVxdWlyZShcInByb3AtdHlwZXNcIik7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfZm9jdXNNYW5hZ2VyID0gcmVxdWlyZShcIi4uL2hlbHBlcnMvZm9jdXNNYW5hZ2VyXCIpO1xuXG52YXIgZm9jdXNNYW5hZ2VyID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2ZvY3VzTWFuYWdlcik7XG5cbnZhciBfc2NvcGVUYWIgPSByZXF1aXJlKFwiLi4vaGVscGVycy9zY29wZVRhYlwiKTtcblxudmFyIF9zY29wZVRhYjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zY29wZVRhYik7XG5cbnZhciBfYXJpYUFwcEhpZGVyID0gcmVxdWlyZShcIi4uL2hlbHBlcnMvYXJpYUFwcEhpZGVyXCIpO1xuXG52YXIgYXJpYUFwcEhpZGVyID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2FyaWFBcHBIaWRlcik7XG5cbnZhciBfY2xhc3NMaXN0ID0gcmVxdWlyZShcIi4uL2hlbHBlcnMvY2xhc3NMaXN0XCIpO1xuXG52YXIgY2xhc3NMaXN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2NsYXNzTGlzdCk7XG5cbnZhciBfc2FmZUhUTUxFbGVtZW50ID0gcmVxdWlyZShcIi4uL2hlbHBlcnMvc2FmZUhUTUxFbGVtZW50XCIpO1xuXG52YXIgX3NhZmVIVE1MRWxlbWVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zYWZlSFRNTEVsZW1lbnQpO1xuXG52YXIgX3BvcnRhbE9wZW5JbnN0YW5jZXMgPSByZXF1aXJlKFwiLi4vaGVscGVycy9wb3J0YWxPcGVuSW5zdGFuY2VzXCIpO1xuXG52YXIgX3BvcnRhbE9wZW5JbnN0YW5jZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9ydGFsT3Blbkluc3RhbmNlcyk7XG5cbnJlcXVpcmUoXCIuLi9oZWxwZXJzL2JvZHlUcmFwXCIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbi8vIHNvIHRoYXQgb3VyIENTUyBpcyBzdGF0aWNhbGx5IGFuYWx5emFibGVcbnZhciBDTEFTU19OQU1FUyA9IHtcbiAgb3ZlcmxheTogXCJSZWFjdE1vZGFsX19PdmVybGF5XCIsXG4gIGNvbnRlbnQ6IFwiUmVhY3RNb2RhbF9fQ29udGVudFwiXG59O1xuXG52YXIgVEFCX0tFWSA9IDk7XG52YXIgRVNDX0tFWSA9IDI3O1xuXG52YXIgYXJpYUhpZGRlbkluc3RhbmNlcyA9IDA7XG5cbnZhciBNb2RhbFBvcnRhbCA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhNb2RhbFBvcnRhbCwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gTW9kYWxQb3J0YWwocHJvcHMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTW9kYWxQb3J0YWwpO1xuXG4gICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE1vZGFsUG9ydGFsLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTW9kYWxQb3J0YWwpKS5jYWxsKHRoaXMsIHByb3BzKSk7XG5cbiAgICBfdGhpcy5zZXRPdmVybGF5UmVmID0gZnVuY3Rpb24gKG92ZXJsYXkpIHtcbiAgICAgIF90aGlzLm92ZXJsYXkgPSBvdmVybGF5O1xuICAgICAgX3RoaXMucHJvcHMub3ZlcmxheVJlZiAmJiBfdGhpcy5wcm9wcy5vdmVybGF5UmVmKG92ZXJsYXkpO1xuICAgIH07XG5cbiAgICBfdGhpcy5zZXRDb250ZW50UmVmID0gZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgIF90aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuICAgICAgX3RoaXMucHJvcHMuY29udGVudFJlZiAmJiBfdGhpcy5wcm9wcy5jb250ZW50UmVmKGNvbnRlbnQpO1xuICAgIH07XG5cbiAgICBfdGhpcy5hZnRlckNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgYXBwRWxlbWVudCA9IF90aGlzJHByb3BzLmFwcEVsZW1lbnQsXG4gICAgICAgICAgYXJpYUhpZGVBcHAgPSBfdGhpcyRwcm9wcy5hcmlhSGlkZUFwcCxcbiAgICAgICAgICBodG1sT3BlbkNsYXNzTmFtZSA9IF90aGlzJHByb3BzLmh0bWxPcGVuQ2xhc3NOYW1lLFxuICAgICAgICAgIGJvZHlPcGVuQ2xhc3NOYW1lID0gX3RoaXMkcHJvcHMuYm9keU9wZW5DbGFzc05hbWU7XG5cbiAgICAgIC8vIFJlbW92ZSBjbGFzc2VzLlxuXG4gICAgICBib2R5T3BlbkNsYXNzTmFtZSAmJiBjbGFzc0xpc3QucmVtb3ZlKGRvY3VtZW50LmJvZHksIGJvZHlPcGVuQ2xhc3NOYW1lKTtcblxuICAgICAgaHRtbE9wZW5DbGFzc05hbWUgJiYgY2xhc3NMaXN0LnJlbW92ZShkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImh0bWxcIilbMF0sIGh0bWxPcGVuQ2xhc3NOYW1lKTtcblxuICAgICAgLy8gUmVzZXQgYXJpYS1oaWRkZW4gYXR0cmlidXRlIGlmIGFsbCBtb2RhbHMgaGF2ZSBiZWVuIHJlbW92ZWRcbiAgICAgIGlmIChhcmlhSGlkZUFwcCAmJiBhcmlhSGlkZGVuSW5zdGFuY2VzID4gMCkge1xuICAgICAgICBhcmlhSGlkZGVuSW5zdGFuY2VzIC09IDE7XG5cbiAgICAgICAgaWYgKGFyaWFIaWRkZW5JbnN0YW5jZXMgPT09IDApIHtcbiAgICAgICAgICBhcmlhQXBwSGlkZXIuc2hvdyhhcHBFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoX3RoaXMucHJvcHMuc2hvdWxkRm9jdXNBZnRlclJlbmRlcikge1xuICAgICAgICBpZiAoX3RoaXMucHJvcHMuc2hvdWxkUmV0dXJuRm9jdXNBZnRlckNsb3NlKSB7XG4gICAgICAgICAgZm9jdXNNYW5hZ2VyLnJldHVybkZvY3VzKF90aGlzLnByb3BzLnByZXZlbnRTY3JvbGwpO1xuICAgICAgICAgIGZvY3VzTWFuYWdlci50ZWFyZG93blNjb3BlZEZvY3VzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9jdXNNYW5hZ2VyLnBvcFdpdGhvdXRGb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChfdGhpcy5wcm9wcy5vbkFmdGVyQ2xvc2UpIHtcbiAgICAgICAgX3RoaXMucHJvcHMub25BZnRlckNsb3NlKCk7XG4gICAgICB9XG5cbiAgICAgIF9wb3J0YWxPcGVuSW5zdGFuY2VzMi5kZWZhdWx0LmRlcmVnaXN0ZXIoX3RoaXMpO1xuICAgIH07XG5cbiAgICBfdGhpcy5vcGVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuYmVmb3JlT3BlbigpO1xuICAgICAgaWYgKF90aGlzLnN0YXRlLmFmdGVyT3BlbiAmJiBfdGhpcy5zdGF0ZS5iZWZvcmVDbG9zZSkge1xuICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMuY2xvc2VUaW1lcik7XG4gICAgICAgIF90aGlzLnNldFN0YXRlKHsgYmVmb3JlQ2xvc2U6IGZhbHNlIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKF90aGlzLnByb3BzLnNob3VsZEZvY3VzQWZ0ZXJSZW5kZXIpIHtcbiAgICAgICAgICBmb2N1c01hbmFnZXIuc2V0dXBTY29wZWRGb2N1cyhfdGhpcy5ub2RlKTtcbiAgICAgICAgICBmb2N1c01hbmFnZXIubWFya0ZvckZvY3VzTGF0ZXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzLnNldFN0YXRlKHsgaXNPcGVuOiB0cnVlIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpcy5vcGVuQW5pbWF0aW9uRnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBhZnRlck9wZW46IHRydWUgfSk7XG5cbiAgICAgICAgICAgIGlmIChfdGhpcy5wcm9wcy5pc09wZW4gJiYgX3RoaXMucHJvcHMub25BZnRlck9wZW4pIHtcbiAgICAgICAgICAgICAgX3RoaXMucHJvcHMub25BZnRlck9wZW4oe1xuICAgICAgICAgICAgICAgIG92ZXJsYXlFbDogX3RoaXMub3ZlcmxheSxcbiAgICAgICAgICAgICAgICBjb250ZW50RWw6IF90aGlzLmNvbnRlbnRcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfdGhpcy5wcm9wcy5jbG9zZVRpbWVvdXRNUyA+IDApIHtcbiAgICAgICAgX3RoaXMuY2xvc2VXaXRoVGltZW91dCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3RoaXMuY2xvc2VXaXRob3V0VGltZW91dCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5mb2N1c0NvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMuY29udGVudCAmJiAhX3RoaXMuY29udGVudEhhc0ZvY3VzKCkgJiYgX3RoaXMuY29udGVudC5mb2N1cyh7IHByZXZlbnRTY3JvbGw6IHRydWUgfSk7XG4gICAgfTtcblxuICAgIF90aGlzLmNsb3NlV2l0aFRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY2xvc2VzQXQgPSBEYXRlLm5vdygpICsgX3RoaXMucHJvcHMuY2xvc2VUaW1lb3V0TVM7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7IGJlZm9yZUNsb3NlOiB0cnVlLCBjbG9zZXNBdDogY2xvc2VzQXQgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5jbG9zZVRpbWVyID0gc2V0VGltZW91dChfdGhpcy5jbG9zZVdpdGhvdXRUaW1lb3V0LCBfdGhpcy5zdGF0ZS5jbG9zZXNBdCAtIERhdGUubm93KCkpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF90aGlzLmNsb3NlV2l0aG91dFRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGJlZm9yZUNsb3NlOiBmYWxzZSxcbiAgICAgICAgaXNPcGVuOiBmYWxzZSxcbiAgICAgICAgYWZ0ZXJPcGVuOiBmYWxzZSxcbiAgICAgICAgY2xvc2VzQXQ6IG51bGxcbiAgICAgIH0sIF90aGlzLmFmdGVyQ2xvc2UpO1xuICAgIH07XG5cbiAgICBfdGhpcy5oYW5kbGVLZXlEb3duID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gVEFCX0tFWSkge1xuICAgICAgICAoMCwgX3Njb3BlVGFiMi5kZWZhdWx0KShfdGhpcy5jb250ZW50LCBldmVudCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChfdGhpcy5wcm9wcy5zaG91bGRDbG9zZU9uRXNjICYmIGV2ZW50LmtleUNvZGUgPT09IEVTQ19LRVkpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIF90aGlzLnJlcXVlc3RDbG9zZShldmVudCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLmhhbmRsZU92ZXJsYXlPbkNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoX3RoaXMuc2hvdWxkQ2xvc2UgPT09IG51bGwpIHtcbiAgICAgICAgX3RoaXMuc2hvdWxkQ2xvc2UgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoX3RoaXMuc2hvdWxkQ2xvc2UgJiYgX3RoaXMucHJvcHMuc2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGljaykge1xuICAgICAgICBpZiAoX3RoaXMub3duZXJIYW5kbGVzQ2xvc2UoKSkge1xuICAgICAgICAgIF90aGlzLnJlcXVlc3RDbG9zZShldmVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3RoaXMuZm9jdXNDb250ZW50KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIF90aGlzLnNob3VsZENsb3NlID0gbnVsbDtcbiAgICB9O1xuXG4gICAgX3RoaXMuaGFuZGxlQ29udGVudE9uTW91c2VVcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnNob3VsZENsb3NlID0gZmFsc2U7XG4gICAgfTtcblxuICAgIF90aGlzLmhhbmRsZU92ZXJsYXlPbk1vdXNlRG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKCFfdGhpcy5wcm9wcy5zaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrICYmIGV2ZW50LnRhcmdldCA9PSBfdGhpcy5vdmVybGF5KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLmhhbmRsZUNvbnRlbnRPbkNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc2hvdWxkQ2xvc2UgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgX3RoaXMuaGFuZGxlQ29udGVudE9uTW91c2VEb3duID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc2hvdWxkQ2xvc2UgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgX3RoaXMucmVxdWVzdENsb3NlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICByZXR1cm4gX3RoaXMub3duZXJIYW5kbGVzQ2xvc2UoKSAmJiBfdGhpcy5wcm9wcy5vblJlcXVlc3RDbG9zZShldmVudCk7XG4gICAgfTtcblxuICAgIF90aGlzLm93bmVySGFuZGxlc0Nsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLnByb3BzLm9uUmVxdWVzdENsb3NlO1xuICAgIH07XG5cbiAgICBfdGhpcy5zaG91bGRCZUNsb3NlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAhX3RoaXMuc3RhdGUuaXNPcGVuICYmICFfdGhpcy5zdGF0ZS5iZWZvcmVDbG9zZTtcbiAgICB9O1xuXG4gICAgX3RoaXMuY29udGVudEhhc0ZvY3VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IF90aGlzLmNvbnRlbnQgfHwgX3RoaXMuY29udGVudC5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcbiAgICB9O1xuXG4gICAgX3RoaXMuYnVpbGRDbGFzc05hbWUgPSBmdW5jdGlvbiAod2hpY2gsIGFkZGl0aW9uYWwpIHtcbiAgICAgIHZhciBjbGFzc05hbWVzID0gKHR5cGVvZiBhZGRpdGlvbmFsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoYWRkaXRpb25hbCkpID09PSBcIm9iamVjdFwiID8gYWRkaXRpb25hbCA6IHtcbiAgICAgICAgYmFzZTogQ0xBU1NfTkFNRVNbd2hpY2hdLFxuICAgICAgICBhZnRlck9wZW46IENMQVNTX05BTUVTW3doaWNoXSArIFwiLS1hZnRlci1vcGVuXCIsXG4gICAgICAgIGJlZm9yZUNsb3NlOiBDTEFTU19OQU1FU1t3aGljaF0gKyBcIi0tYmVmb3JlLWNsb3NlXCJcbiAgICAgIH07XG4gICAgICB2YXIgY2xhc3NOYW1lID0gY2xhc3NOYW1lcy5iYXNlO1xuICAgICAgaWYgKF90aGlzLnN0YXRlLmFmdGVyT3Blbikge1xuICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUgKyBcIiBcIiArIGNsYXNzTmFtZXMuYWZ0ZXJPcGVuO1xuICAgICAgfVxuICAgICAgaWYgKF90aGlzLnN0YXRlLmJlZm9yZUNsb3NlKSB7XG4gICAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZSArIFwiIFwiICsgY2xhc3NOYW1lcy5iZWZvcmVDbG9zZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0eXBlb2YgYWRkaXRpb25hbCA9PT0gXCJzdHJpbmdcIiAmJiBhZGRpdGlvbmFsID8gY2xhc3NOYW1lICsgXCIgXCIgKyBhZGRpdGlvbmFsIDogY2xhc3NOYW1lO1xuICAgIH07XG5cbiAgICBfdGhpcy5hdHRyaWJ1dGVzRnJvbU9iamVjdCA9IGZ1bmN0aW9uIChwcmVmaXgsIGl0ZW1zKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMoaXRlbXMpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBuYW1lKSB7XG4gICAgICAgIGFjY1twcmVmaXggKyBcIi1cIiArIG5hbWVdID0gaXRlbXNbbmFtZV07XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9LCB7fSk7XG4gICAgfTtcblxuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgYWZ0ZXJPcGVuOiBmYWxzZSxcbiAgICAgIGJlZm9yZUNsb3NlOiBmYWxzZVxuICAgIH07XG5cbiAgICBfdGhpcy5zaG91bGRDbG9zZSA9IG51bGw7XG4gICAgX3RoaXMubW92ZUZyb21Db250ZW50VG9PdmVybGF5ID0gbnVsbDtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTW9kYWxQb3J0YWwsIFt7XG4gICAga2V5OiBcImNvbXBvbmVudERpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuaXNPcGVuKSB7XG4gICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnREaWRVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgIGlmIChwcmV2UHJvcHMuYm9keU9wZW5DbGFzc05hbWUgIT09IHRoaXMucHJvcHMuYm9keU9wZW5DbGFzc05hbWUpIHtcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgIGNvbnNvbGUud2FybignUmVhY3QtTW9kYWw6IFwiYm9keU9wZW5DbGFzc05hbWVcIiBwcm9wIGhhcyBiZWVuIG1vZGlmaWVkLiAnICsgXCJUaGlzIG1heSBjYXVzZSB1bmV4cGVjdGVkIGJlaGF2aW9yIHdoZW4gbXVsdGlwbGUgbW9kYWxzIGFyZSBvcGVuLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJldlByb3BzLmh0bWxPcGVuQ2xhc3NOYW1lICE9PSB0aGlzLnByb3BzLmh0bWxPcGVuQ2xhc3NOYW1lKSB7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1JlYWN0LU1vZGFsOiBcImh0bWxPcGVuQ2xhc3NOYW1lXCIgcHJvcCBoYXMgYmVlbiBtb2RpZmllZC4gJyArIFwiVGhpcyBtYXkgY2F1c2UgdW5leHBlY3RlZCBiZWhhdmlvciB3aGVuIG11bHRpcGxlIG1vZGFscyBhcmUgb3Blbi5cIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMucHJvcHMuaXNPcGVuICYmICFwcmV2UHJvcHMuaXNPcGVuKSB7XG4gICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgfSBlbHNlIGlmICghdGhpcy5wcm9wcy5pc09wZW4gJiYgcHJldlByb3BzLmlzT3Blbikge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZvY3VzIG9ubHkgbmVlZHMgdG8gYmUgc2V0IG9uY2Ugd2hlbiB0aGUgbW9kYWwgaXMgYmVpbmcgb3BlbmVkXG4gICAgICBpZiAodGhpcy5wcm9wcy5zaG91bGRGb2N1c0FmdGVyUmVuZGVyICYmIHRoaXMuc3RhdGUuaXNPcGVuICYmICFwcmV2U3RhdGUuaXNPcGVuKSB7XG4gICAgICAgIHRoaXMuZm9jdXNDb250ZW50KCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgaWYgKHRoaXMuc3RhdGUuaXNPcGVuKSB7XG4gICAgICAgIHRoaXMuYWZ0ZXJDbG9zZSgpO1xuICAgICAgfVxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY2xvc2VUaW1lcik7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLm9wZW5BbmltYXRpb25GcmFtZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImJlZm9yZU9wZW5cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYmVmb3JlT3BlbigpIHtcbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGFwcEVsZW1lbnQgPSBfcHJvcHMuYXBwRWxlbWVudCxcbiAgICAgICAgICBhcmlhSGlkZUFwcCA9IF9wcm9wcy5hcmlhSGlkZUFwcCxcbiAgICAgICAgICBodG1sT3BlbkNsYXNzTmFtZSA9IF9wcm9wcy5odG1sT3BlbkNsYXNzTmFtZSxcbiAgICAgICAgICBib2R5T3BlbkNsYXNzTmFtZSA9IF9wcm9wcy5ib2R5T3BlbkNsYXNzTmFtZTtcblxuICAgICAgLy8gQWRkIGNsYXNzZXMuXG5cbiAgICAgIGJvZHlPcGVuQ2xhc3NOYW1lICYmIGNsYXNzTGlzdC5hZGQoZG9jdW1lbnQuYm9keSwgYm9keU9wZW5DbGFzc05hbWUpO1xuXG4gICAgICBodG1sT3BlbkNsYXNzTmFtZSAmJiBjbGFzc0xpc3QuYWRkKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaHRtbFwiKVswXSwgaHRtbE9wZW5DbGFzc05hbWUpO1xuXG4gICAgICBpZiAoYXJpYUhpZGVBcHApIHtcbiAgICAgICAgYXJpYUhpZGRlbkluc3RhbmNlcyArPSAxO1xuICAgICAgICBhcmlhQXBwSGlkZXIuaGlkZShhcHBFbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgX3BvcnRhbE9wZW5JbnN0YW5jZXMyLmRlZmF1bHQucmVnaXN0ZXIodGhpcyk7XG4gICAgfVxuXG4gICAgLy8gRG9uJ3Qgc3RlYWwgZm9jdXMgZnJvbSBpbm5lciBlbGVtZW50c1xuXG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfcHJvcHMyID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBpZCA9IF9wcm9wczIuaWQsXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3Byb3BzMi5jbGFzc05hbWUsXG4gICAgICAgICAgb3ZlcmxheUNsYXNzTmFtZSA9IF9wcm9wczIub3ZlcmxheUNsYXNzTmFtZSxcbiAgICAgICAgICBkZWZhdWx0U3R5bGVzID0gX3Byb3BzMi5kZWZhdWx0U3R5bGVzLFxuICAgICAgICAgIGNoaWxkcmVuID0gX3Byb3BzMi5jaGlsZHJlbjtcblxuICAgICAgdmFyIGNvbnRlbnRTdHlsZXMgPSBjbGFzc05hbWUgPyB7fSA6IGRlZmF1bHRTdHlsZXMuY29udGVudDtcbiAgICAgIHZhciBvdmVybGF5U3R5bGVzID0gb3ZlcmxheUNsYXNzTmFtZSA/IHt9IDogZGVmYXVsdFN0eWxlcy5vdmVybGF5O1xuXG4gICAgICBpZiAodGhpcy5zaG91bGRCZUNsb3NlZCgpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgb3ZlcmxheVByb3BzID0ge1xuICAgICAgICByZWY6IHRoaXMuc2V0T3ZlcmxheVJlZixcbiAgICAgICAgY2xhc3NOYW1lOiB0aGlzLmJ1aWxkQ2xhc3NOYW1lKFwib3ZlcmxheVwiLCBvdmVybGF5Q2xhc3NOYW1lKSxcbiAgICAgICAgc3R5bGU6IF9leHRlbmRzKHt9LCBvdmVybGF5U3R5bGVzLCB0aGlzLnByb3BzLnN0eWxlLm92ZXJsYXkpLFxuICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZU92ZXJsYXlPbkNsaWNrLFxuICAgICAgICBvbk1vdXNlRG93bjogdGhpcy5oYW5kbGVPdmVybGF5T25Nb3VzZURvd25cbiAgICAgIH07XG5cbiAgICAgIHZhciBjb250ZW50UHJvcHMgPSBfZXh0ZW5kcyh7XG4gICAgICAgIGlkOiBpZCxcbiAgICAgICAgcmVmOiB0aGlzLnNldENvbnRlbnRSZWYsXG4gICAgICAgIHN0eWxlOiBfZXh0ZW5kcyh7fSwgY29udGVudFN0eWxlcywgdGhpcy5wcm9wcy5zdHlsZS5jb250ZW50KSxcbiAgICAgICAgY2xhc3NOYW1lOiB0aGlzLmJ1aWxkQ2xhc3NOYW1lKFwiY29udGVudFwiLCBjbGFzc05hbWUpLFxuICAgICAgICB0YWJJbmRleDogXCItMVwiLFxuICAgICAgICBvbktleURvd246IHRoaXMuaGFuZGxlS2V5RG93bixcbiAgICAgICAgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlQ29udGVudE9uTW91c2VEb3duLFxuICAgICAgICBvbk1vdXNlVXA6IHRoaXMuaGFuZGxlQ29udGVudE9uTW91c2VVcCxcbiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVDb250ZW50T25DbGljayxcbiAgICAgICAgcm9sZTogdGhpcy5wcm9wcy5yb2xlLFxuICAgICAgICBcImFyaWEtbGFiZWxcIjogdGhpcy5wcm9wcy5jb250ZW50TGFiZWxcbiAgICAgIH0sIHRoaXMuYXR0cmlidXRlc0Zyb21PYmplY3QoXCJhcmlhXCIsIF9leHRlbmRzKHsgbW9kYWw6IHRydWUgfSwgdGhpcy5wcm9wcy5hcmlhKSksIHRoaXMuYXR0cmlidXRlc0Zyb21PYmplY3QoXCJkYXRhXCIsIHRoaXMucHJvcHMuZGF0YSB8fCB7fSksIHtcbiAgICAgICAgXCJkYXRhLXRlc3RpZFwiOiB0aGlzLnByb3BzLnRlc3RJZFxuICAgICAgfSk7XG5cbiAgICAgIHZhciBjb250ZW50RWxlbWVudCA9IHRoaXMucHJvcHMuY29udGVudEVsZW1lbnQoY29udGVudFByb3BzLCBjaGlsZHJlbik7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5vdmVybGF5RWxlbWVudChvdmVybGF5UHJvcHMsIGNvbnRlbnRFbGVtZW50KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTW9kYWxQb3J0YWw7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5Nb2RhbFBvcnRhbC5kZWZhdWx0UHJvcHMgPSB7XG4gIHN0eWxlOiB7XG4gICAgb3ZlcmxheToge30sXG4gICAgY29udGVudDoge31cbiAgfSxcbiAgZGVmYXVsdFN0eWxlczoge31cbn07XG5Nb2RhbFBvcnRhbC5wcm9wVHlwZXMgPSB7XG4gIGlzT3BlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLmlzUmVxdWlyZWQsXG4gIGRlZmF1bHRTdHlsZXM6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc2hhcGUoe1xuICAgIGNvbnRlbnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAgIG92ZXJsYXk6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0XG4gIH0pLFxuICBzdHlsZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zaGFwZSh7XG4gICAgY29udGVudDogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gICAgb3ZlcmxheTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3RcbiAgfSksXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vbmVPZlR5cGUoW19wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLCBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdF0pLFxuICBvdmVybGF5Q2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9uZU9mVHlwZShbX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsIF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0XSksXG4gIGJvZHlPcGVuQ2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgaHRtbE9wZW5DbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBhcmlhSGlkZUFwcDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBhcHBFbGVtZW50OiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9uZU9mVHlwZShbX3Byb3BUeXBlczIuZGVmYXVsdC5pbnN0YW5jZU9mKF9zYWZlSFRNTEVsZW1lbnQyLmRlZmF1bHQpLCBfcHJvcFR5cGVzMi5kZWZhdWx0Lmluc3RhbmNlT2YoX3NhZmVIVE1MRWxlbWVudC5TYWZlSFRNTENvbGxlY3Rpb24pLCBfcHJvcFR5cGVzMi5kZWZhdWx0Lmluc3RhbmNlT2YoX3NhZmVIVE1MRWxlbWVudC5TYWZlTm9kZUxpc3QpLCBfcHJvcFR5cGVzMi5kZWZhdWx0LmFycmF5T2YoX3Byb3BUeXBlczIuZGVmYXVsdC5pbnN0YW5jZU9mKF9zYWZlSFRNTEVsZW1lbnQyLmRlZmF1bHQpKV0pLFxuICBvbkFmdGVyT3BlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBvbkFmdGVyQ2xvc2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgb25SZXF1ZXN0Q2xvc2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgY2xvc2VUaW1lb3V0TVM6IF9wcm9wVHlwZXMyLmRlZmF1bHQubnVtYmVyLFxuICBzaG91bGRGb2N1c0FmdGVyUmVuZGVyOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIHNob3VsZENsb3NlT25PdmVybGF5Q2xpY2s6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgc2hvdWxkUmV0dXJuRm9jdXNBZnRlckNsb3NlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIHByZXZlbnRTY3JvbGw6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgcm9sZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGNvbnRlbnRMYWJlbDogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGFyaWE6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBkYXRhOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgY2hpbGRyZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQubm9kZSxcbiAgc2hvdWxkQ2xvc2VPbkVzYzogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBvdmVybGF5UmVmOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIGNvbnRlbnRSZWY6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgaWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBvdmVybGF5RWxlbWVudDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBjb250ZW50RWxlbWVudDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICB0ZXN0SWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nXG59O1xuZXhwb3J0cy5kZWZhdWx0ID0gTW9kYWxQb3J0YWw7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdOyIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAvLyBDYWxsIHRoaXMuY29uc3RydWN0b3IuZ0RTRlAgdG8gc3VwcG9ydCBzdWItY2xhc3Nlcy5cbiAgdmFyIHN0YXRlID0gdGhpcy5jb25zdHJ1Y3Rvci5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHModGhpcy5wcm9wcywgdGhpcy5zdGF0ZSk7XG4gIGlmIChzdGF0ZSAhPT0gbnVsbCAmJiBzdGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgLy8gQ2FsbCB0aGlzLmNvbnN0cnVjdG9yLmdEU0ZQIHRvIHN1cHBvcnQgc3ViLWNsYXNzZXMuXG4gIC8vIFVzZSB0aGUgc2V0U3RhdGUoKSB1cGRhdGVyIHRvIGVuc3VyZSBzdGF0ZSBpc24ndCBzdGFsZSBpbiBjZXJ0YWluIGVkZ2UgY2FzZXMuXG4gIGZ1bmN0aW9uIHVwZGF0ZXIocHJldlN0YXRlKSB7XG4gICAgdmFyIHN0YXRlID0gdGhpcy5jb25zdHJ1Y3Rvci5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpO1xuICAgIHJldHVybiBzdGF0ZSAhPT0gbnVsbCAmJiBzdGF0ZSAhPT0gdW5kZWZpbmVkID8gc3RhdGUgOiBudWxsO1xuICB9XG4gIC8vIEJpbmRpbmcgXCJ0aGlzXCIgaXMgaW1wb3J0YW50IGZvciBzaGFsbG93IHJlbmRlcmVyIHN1cHBvcnQuXG4gIHRoaXMuc2V0U3RhdGUodXBkYXRlci5iaW5kKHRoaXMpKTtcbn1cblxuZnVuY3Rpb24gY29tcG9uZW50V2lsbFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICB0cnkge1xuICAgIHZhciBwcmV2UHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIHZhciBwcmV2U3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgIHRoaXMucHJvcHMgPSBuZXh0UHJvcHM7XG4gICAgdGhpcy5zdGF0ZSA9IG5leHRTdGF0ZTtcbiAgICB0aGlzLl9fcmVhY3RJbnRlcm5hbFNuYXBzaG90RmxhZyA9IHRydWU7XG4gICAgdGhpcy5fX3JlYWN0SW50ZXJuYWxTbmFwc2hvdCA9IHRoaXMuZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUoXG4gICAgICBwcmV2UHJvcHMsXG4gICAgICBwcmV2U3RhdGVcbiAgICApO1xuICB9IGZpbmFsbHkge1xuICAgIHRoaXMucHJvcHMgPSBwcmV2UHJvcHM7XG4gICAgdGhpcy5zdGF0ZSA9IHByZXZTdGF0ZTtcbiAgfVxufVxuXG4vLyBSZWFjdCBtYXkgd2FybiBhYm91dCBjV00vY1dSUC9jV1UgbWV0aG9kcyBiZWluZyBkZXByZWNhdGVkLlxuLy8gQWRkIGEgZmxhZyB0byBzdXBwcmVzcyB0aGVzZSB3YXJuaW5ncyBmb3IgdGhpcyBzcGVjaWFsIGNhc2UuXG5jb21wb25lbnRXaWxsTW91bnQuX19zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZyA9IHRydWU7XG5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzLl9fc3VwcHJlc3NEZXByZWNhdGlvbldhcm5pbmcgPSB0cnVlO1xuY29tcG9uZW50V2lsbFVwZGF0ZS5fX3N1cHByZXNzRGVwcmVjYXRpb25XYXJuaW5nID0gdHJ1ZTtcblxuZnVuY3Rpb24gcG9seWZpbGwoQ29tcG9uZW50KSB7XG4gIHZhciBwcm90b3R5cGUgPSBDb21wb25lbnQucHJvdG90eXBlO1xuXG4gIGlmICghcHJvdG90eXBlIHx8ICFwcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2FuIG9ubHkgcG9seWZpbGwgY2xhc3MgY29tcG9uZW50cycpO1xuICB9XG5cbiAgaWYgKFxuICAgIHR5cGVvZiBDb21wb25lbnQuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzICE9PSAnZnVuY3Rpb24nICYmXG4gICAgdHlwZW9mIHByb3RvdHlwZS5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSAhPT0gJ2Z1bmN0aW9uJ1xuICApIHtcbiAgICByZXR1cm4gQ29tcG9uZW50O1xuICB9XG5cbiAgLy8gSWYgbmV3IGNvbXBvbmVudCBBUElzIGFyZSBkZWZpbmVkLCBcInVuc2FmZVwiIGxpZmVjeWNsZXMgd29uJ3QgYmUgY2FsbGVkLlxuICAvLyBFcnJvciBpZiBhbnkgb2YgdGhlc2UgbGlmZWN5Y2xlcyBhcmUgcHJlc2VudCxcbiAgLy8gQmVjYXVzZSB0aGV5IHdvdWxkIHdvcmsgZGlmZmVyZW50bHkgYmV0d2VlbiBvbGRlciBhbmQgbmV3ZXIgKDE2LjMrKSB2ZXJzaW9ucyBvZiBSZWFjdC5cbiAgdmFyIGZvdW5kV2lsbE1vdW50TmFtZSA9IG51bGw7XG4gIHZhciBmb3VuZFdpbGxSZWNlaXZlUHJvcHNOYW1lID0gbnVsbDtcbiAgdmFyIGZvdW5kV2lsbFVwZGF0ZU5hbWUgPSBudWxsO1xuICBpZiAodHlwZW9mIHByb3RvdHlwZS5jb21wb25lbnRXaWxsTW91bnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBmb3VuZFdpbGxNb3VudE5hbWUgPSAnY29tcG9uZW50V2lsbE1vdW50JztcbiAgfSBlbHNlIGlmICh0eXBlb2YgcHJvdG90eXBlLlVOU0FGRV9jb21wb25lbnRXaWxsTW91bnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICBmb3VuZFdpbGxNb3VudE5hbWUgPSAnVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudCc7XG4gIH1cbiAgaWYgKHR5cGVvZiBwcm90b3R5cGUuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGZvdW5kV2lsbFJlY2VpdmVQcm9wc05hbWUgPSAnY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyc7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHByb3RvdHlwZS5VTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGZvdW5kV2lsbFJlY2VpdmVQcm9wc05hbWUgPSAnVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnO1xuICB9XG4gIGlmICh0eXBlb2YgcHJvdG90eXBlLmNvbXBvbmVudFdpbGxVcGRhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBmb3VuZFdpbGxVcGRhdGVOYW1lID0gJ2NvbXBvbmVudFdpbGxVcGRhdGUnO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBwcm90b3R5cGUuVU5TQUZFX2NvbXBvbmVudFdpbGxVcGRhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBmb3VuZFdpbGxVcGRhdGVOYW1lID0gJ1VOU0FGRV9jb21wb25lbnRXaWxsVXBkYXRlJztcbiAgfVxuICBpZiAoXG4gICAgZm91bmRXaWxsTW91bnROYW1lICE9PSBudWxsIHx8XG4gICAgZm91bmRXaWxsUmVjZWl2ZVByb3BzTmFtZSAhPT0gbnVsbCB8fFxuICAgIGZvdW5kV2lsbFVwZGF0ZU5hbWUgIT09IG51bGxcbiAgKSB7XG4gICAgdmFyIGNvbXBvbmVudE5hbWUgPSBDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWU7XG4gICAgdmFyIG5ld0FwaU5hbWUgPVxuICAgICAgdHlwZW9mIENvbXBvbmVudC5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyAnZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKCknXG4gICAgICAgIDogJ2dldFNuYXBzaG90QmVmb3JlVXBkYXRlKCknO1xuXG4gICAgdGhyb3cgRXJyb3IoXG4gICAgICAnVW5zYWZlIGxlZ2FjeSBsaWZlY3ljbGVzIHdpbGwgbm90IGJlIGNhbGxlZCBmb3IgY29tcG9uZW50cyB1c2luZyBuZXcgY29tcG9uZW50IEFQSXMuXFxuXFxuJyArXG4gICAgICAgIGNvbXBvbmVudE5hbWUgK1xuICAgICAgICAnIHVzZXMgJyArXG4gICAgICAgIG5ld0FwaU5hbWUgK1xuICAgICAgICAnIGJ1dCBhbHNvIGNvbnRhaW5zIHRoZSBmb2xsb3dpbmcgbGVnYWN5IGxpZmVjeWNsZXM6JyArXG4gICAgICAgIChmb3VuZFdpbGxNb3VudE5hbWUgIT09IG51bGwgPyAnXFxuICAnICsgZm91bmRXaWxsTW91bnROYW1lIDogJycpICtcbiAgICAgICAgKGZvdW5kV2lsbFJlY2VpdmVQcm9wc05hbWUgIT09IG51bGxcbiAgICAgICAgICA/ICdcXG4gICcgKyBmb3VuZFdpbGxSZWNlaXZlUHJvcHNOYW1lXG4gICAgICAgICAgOiAnJykgK1xuICAgICAgICAoZm91bmRXaWxsVXBkYXRlTmFtZSAhPT0gbnVsbCA/ICdcXG4gICcgKyBmb3VuZFdpbGxVcGRhdGVOYW1lIDogJycpICtcbiAgICAgICAgJ1xcblxcblRoZSBhYm92ZSBsaWZlY3ljbGVzIHNob3VsZCBiZSByZW1vdmVkLiBMZWFybiBtb3JlIGFib3V0IHRoaXMgd2FybmluZyBoZXJlOlxcbicgK1xuICAgICAgICAnaHR0cHM6Ly9mYi5tZS9yZWFjdC1hc3luYy1jb21wb25lbnQtbGlmZWN5Y2xlLWhvb2tzJ1xuICAgICk7XG4gIH1cblxuICAvLyBSZWFjdCA8PSAxNi4yIGRvZXMgbm90IHN1cHBvcnQgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcy5cbiAgLy8gQXMgYSB3b3JrYXJvdW5kLCB1c2UgY1dNIGFuZCBjV1JQIHRvIGludm9rZSB0aGUgbmV3IHN0YXRpYyBsaWZlY3ljbGUuXG4gIC8vIE5ld2VyIHZlcnNpb25zIG9mIFJlYWN0IHdpbGwgaWdub3JlIHRoZXNlIGxpZmVjeWNsZXMgaWYgZ0RTRlAgZXhpc3RzLlxuICBpZiAodHlwZW9mIENvbXBvbmVudC5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBwcm90b3R5cGUuY29tcG9uZW50V2lsbE1vdW50ID0gY29tcG9uZW50V2lsbE1vdW50O1xuICAgIHByb3RvdHlwZS5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcztcbiAgfVxuXG4gIC8vIFJlYWN0IDw9IDE2LjIgZG9lcyBub3Qgc3VwcG9ydCBnZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZS5cbiAgLy8gQXMgYSB3b3JrYXJvdW5kLCB1c2UgY1dVIHRvIGludm9rZSB0aGUgbmV3IGxpZmVjeWNsZS5cbiAgLy8gTmV3ZXIgdmVyc2lvbnMgb2YgUmVhY3Qgd2lsbCBpZ25vcmUgdGhhdCBsaWZlY3ljbGUgaWYgZ1NCVSBleGlzdHMuXG4gIGlmICh0eXBlb2YgcHJvdG90eXBlLmdldFNuYXBzaG90QmVmb3JlVXBkYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgaWYgKHR5cGVvZiBwcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdDYW5ub3QgcG9seWZpbGwgZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUoKSBmb3IgY29tcG9uZW50cyB0aGF0IGRvIG5vdCBkZWZpbmUgY29tcG9uZW50RGlkVXBkYXRlKCkgb24gdGhlIHByb3RvdHlwZSdcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcHJvdG90eXBlLmNvbXBvbmVudFdpbGxVcGRhdGUgPSBjb21wb25lbnRXaWxsVXBkYXRlO1xuXG4gICAgdmFyIGNvbXBvbmVudERpZFVwZGF0ZSA9IHByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGU7XG5cbiAgICBwcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlUG9seWZpbGwoXG4gICAgICBwcmV2UHJvcHMsXG4gICAgICBwcmV2U3RhdGUsXG4gICAgICBtYXliZVNuYXBzaG90XG4gICAgKSB7XG4gICAgICAvLyAxNi4zKyB3aWxsIG5vdCBleGVjdXRlIG91ciB3aWxsLXVwZGF0ZSBtZXRob2Q7XG4gICAgICAvLyBJdCB3aWxsIHBhc3MgYSBzbmFwc2hvdCB2YWx1ZSB0byBkaWQtdXBkYXRlIHRob3VnaC5cbiAgICAgIC8vIE9sZGVyIHZlcnNpb25zIHdpbGwgcmVxdWlyZSBvdXIgcG9seWZpbGxlZCB3aWxsLXVwZGF0ZSB2YWx1ZS5cbiAgICAgIC8vIFdlIG5lZWQgdG8gaGFuZGxlIGJvdGggY2FzZXMsIGJ1dCBjYW4ndCBqdXN0IGNoZWNrIGZvciB0aGUgcHJlc2VuY2Ugb2YgXCJtYXliZVNuYXBzaG90XCIsXG4gICAgICAvLyBCZWNhdXNlIGZvciA8PSAxNS54IHZlcnNpb25zIHRoaXMgbWlnaHQgYmUgYSBcInByZXZDb250ZXh0XCIgb2JqZWN0LlxuICAgICAgLy8gV2UgYWxzbyBjYW4ndCBqdXN0IGNoZWNrIFwiX19yZWFjdEludGVybmFsU25hcHNob3RcIixcbiAgICAgIC8vIEJlY2F1c2UgZ2V0LXNuYXBzaG90IG1pZ2h0IHJldHVybiBhIGZhbHN5IHZhbHVlLlxuICAgICAgLy8gU28gY2hlY2sgZm9yIHRoZSBleHBsaWNpdCBfX3JlYWN0SW50ZXJuYWxTbmFwc2hvdEZsYWcgZmxhZyB0byBkZXRlcm1pbmUgYmVoYXZpb3IuXG4gICAgICB2YXIgc25hcHNob3QgPSB0aGlzLl9fcmVhY3RJbnRlcm5hbFNuYXBzaG90RmxhZ1xuICAgICAgICA/IHRoaXMuX19yZWFjdEludGVybmFsU25hcHNob3RcbiAgICAgICAgOiBtYXliZVNuYXBzaG90O1xuXG4gICAgICBjb21wb25lbnREaWRVcGRhdGUuY2FsbCh0aGlzLCBwcmV2UHJvcHMsIHByZXZTdGF0ZSwgc25hcHNob3QpO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gQ29tcG9uZW50O1xufVxuXG5leHBvcnQgeyBwb2x5ZmlsbCB9O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmJvZHlPcGVuQ2xhc3NOYW1lID0gZXhwb3J0cy5wb3J0YWxDbGFzc05hbWUgPSB1bmRlZmluZWQ7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKFwicmVhY3RcIik7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX3JlYWN0RG9tID0gcmVxdWlyZShcInJlYWN0LWRvbVwiKTtcblxudmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cbnZhciBfcHJvcFR5cGVzID0gcmVxdWlyZShcInByb3AtdHlwZXNcIik7XG5cbnZhciBfcHJvcFR5cGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3BUeXBlcyk7XG5cbnZhciBfTW9kYWxQb3J0YWwgPSByZXF1aXJlKFwiLi9Nb2RhbFBvcnRhbFwiKTtcblxudmFyIF9Nb2RhbFBvcnRhbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Nb2RhbFBvcnRhbCk7XG5cbnZhciBfYXJpYUFwcEhpZGVyID0gcmVxdWlyZShcIi4uL2hlbHBlcnMvYXJpYUFwcEhpZGVyXCIpO1xuXG52YXIgYXJpYUFwcEhpZGVyID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX2FyaWFBcHBIaWRlcik7XG5cbnZhciBfc2FmZUhUTUxFbGVtZW50ID0gcmVxdWlyZShcIi4uL2hlbHBlcnMvc2FmZUhUTUxFbGVtZW50XCIpO1xuXG52YXIgX3NhZmVIVE1MRWxlbWVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zYWZlSFRNTEVsZW1lbnQpO1xuXG52YXIgX3JlYWN0TGlmZWN5Y2xlc0NvbXBhdCA9IHJlcXVpcmUoXCJyZWFjdC1saWZlY3ljbGVzLWNvbXBhdFwiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgcG9ydGFsQ2xhc3NOYW1lID0gZXhwb3J0cy5wb3J0YWxDbGFzc05hbWUgPSBcIlJlYWN0TW9kYWxQb3J0YWxcIjtcbnZhciBib2R5T3BlbkNsYXNzTmFtZSA9IGV4cG9ydHMuYm9keU9wZW5DbGFzc05hbWUgPSBcIlJlYWN0TW9kYWxfX0JvZHktLW9wZW5cIjtcblxudmFyIGlzUmVhY3QxNiA9IF9zYWZlSFRNTEVsZW1lbnQuY2FuVXNlRE9NICYmIF9yZWFjdERvbTIuZGVmYXVsdC5jcmVhdGVQb3J0YWwgIT09IHVuZGVmaW5lZDtcblxudmFyIGNyZWF0ZUhUTUxFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlSFRNTEVsZW1lbnQobmFtZSkge1xuICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKTtcbn07XG5cbnZhciBnZXRDcmVhdGVQb3J0YWwgPSBmdW5jdGlvbiBnZXRDcmVhdGVQb3J0YWwoKSB7XG4gIHJldHVybiBpc1JlYWN0MTYgPyBfcmVhY3REb20yLmRlZmF1bHQuY3JlYXRlUG9ydGFsIDogX3JlYWN0RG9tMi5kZWZhdWx0LnVuc3RhYmxlX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyO1xufTtcblxuZnVuY3Rpb24gZ2V0UGFyZW50RWxlbWVudChwYXJlbnRTZWxlY3Rvcikge1xuICByZXR1cm4gcGFyZW50U2VsZWN0b3IoKTtcbn1cblxudmFyIE1vZGFsID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKE1vZGFsLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBNb2RhbCgpIHtcbiAgICB2YXIgX3JlZjtcblxuICAgIHZhciBfdGVtcCwgX3RoaXMsIF9yZXQ7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTW9kYWwpO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX3JlZiA9IE1vZGFsLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTW9kYWwpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5yZW1vdmVQb3J0YWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAhaXNSZWFjdDE2ICYmIF9yZWFjdERvbTIuZGVmYXVsdC51bm1vdW50Q29tcG9uZW50QXROb2RlKF90aGlzLm5vZGUpO1xuICAgICAgdmFyIHBhcmVudCA9IGdldFBhcmVudEVsZW1lbnQoX3RoaXMucHJvcHMucGFyZW50U2VsZWN0b3IpO1xuICAgICAgaWYgKHBhcmVudCAmJiBwYXJlbnQuY29udGFpbnMoX3RoaXMubm9kZSkpIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKF90aGlzLm5vZGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS53YXJuKCdSZWFjdC1Nb2RhbDogXCJwYXJlbnRTZWxlY3RvclwiIHByb3AgZGlkIG5vdCByZXR1cm5lZCBhbnkgRE9NICcgKyBcImVsZW1lbnQuIE1ha2Ugc3VyZSB0aGF0IHRoZSBwYXJlbnQgZWxlbWVudCBpcyB1bm1vdW50ZWQgdG8gXCIgKyBcImF2b2lkIGFueSBtZW1vcnkgbGVha3MuXCIpO1xuICAgICAgfVxuICAgIH0sIF90aGlzLnBvcnRhbFJlZiA9IGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgIF90aGlzLnBvcnRhbCA9IHJlZjtcbiAgICB9LCBfdGhpcy5yZW5kZXJQb3J0YWwgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICAgIHZhciBjcmVhdGVQb3J0YWwgPSBnZXRDcmVhdGVQb3J0YWwoKTtcbiAgICAgIHZhciBwb3J0YWwgPSBjcmVhdGVQb3J0YWwoX3RoaXMsIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Nb2RhbFBvcnRhbDIuZGVmYXVsdCwgX2V4dGVuZHMoeyBkZWZhdWx0U3R5bGVzOiBNb2RhbC5kZWZhdWx0U3R5bGVzIH0sIHByb3BzKSksIF90aGlzLm5vZGUpO1xuICAgICAgX3RoaXMucG9ydGFsUmVmKHBvcnRhbCk7XG4gICAgfSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTW9kYWwsIFt7XG4gICAga2V5OiBcImNvbXBvbmVudERpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgaWYgKCFfc2FmZUhUTUxFbGVtZW50LmNhblVzZURPTSkgcmV0dXJuO1xuXG4gICAgICBpZiAoIWlzUmVhY3QxNikge1xuICAgICAgICB0aGlzLm5vZGUgPSBjcmVhdGVIVE1MRWxlbWVudChcImRpdlwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubm9kZS5jbGFzc05hbWUgPSB0aGlzLnByb3BzLnBvcnRhbENsYXNzTmFtZTtcblxuICAgICAgdmFyIHBhcmVudCA9IGdldFBhcmVudEVsZW1lbnQodGhpcy5wcm9wcy5wYXJlbnRTZWxlY3Rvcik7XG4gICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcblxuICAgICAgIWlzUmVhY3QxNiAmJiB0aGlzLnJlbmRlclBvcnRhbCh0aGlzLnByb3BzKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0U25hcHNob3RCZWZvcmVVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUocHJldlByb3BzKSB7XG4gICAgICB2YXIgcHJldlBhcmVudCA9IGdldFBhcmVudEVsZW1lbnQocHJldlByb3BzLnBhcmVudFNlbGVjdG9yKTtcbiAgICAgIHZhciBuZXh0UGFyZW50ID0gZ2V0UGFyZW50RWxlbWVudCh0aGlzLnByb3BzLnBhcmVudFNlbGVjdG9yKTtcbiAgICAgIHJldHVybiB7IHByZXZQYXJlbnQ6IHByZXZQYXJlbnQsIG5leHRQYXJlbnQ6IG5leHRQYXJlbnQgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkVXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIF8sIHNuYXBzaG90KSB7XG4gICAgICBpZiAoIV9zYWZlSFRNTEVsZW1lbnQuY2FuVXNlRE9NKSByZXR1cm47XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBpc09wZW4gPSBfcHJvcHMuaXNPcGVuLFxuICAgICAgICAgIHBvcnRhbENsYXNzTmFtZSA9IF9wcm9wcy5wb3J0YWxDbGFzc05hbWU7XG5cblxuICAgICAgaWYgKHByZXZQcm9wcy5wb3J0YWxDbGFzc05hbWUgIT09IHBvcnRhbENsYXNzTmFtZSkge1xuICAgICAgICB0aGlzLm5vZGUuY2xhc3NOYW1lID0gcG9ydGFsQ2xhc3NOYW1lO1xuICAgICAgfVxuXG4gICAgICB2YXIgcHJldlBhcmVudCA9IHNuYXBzaG90LnByZXZQYXJlbnQsXG4gICAgICAgICAgbmV4dFBhcmVudCA9IHNuYXBzaG90Lm5leHRQYXJlbnQ7XG5cbiAgICAgIGlmIChuZXh0UGFyZW50ICE9PSBwcmV2UGFyZW50KSB7XG4gICAgICAgIHByZXZQYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy5ub2RlKTtcbiAgICAgICAgbmV4dFBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpO1xuICAgICAgfVxuXG4gICAgICAvLyBTdG9wIHVubmVjZXNzYXJ5IHJlbmRlcnMgaWYgbW9kYWwgaXMgcmVtYWluaW5nIGNsb3NlZFxuICAgICAgaWYgKCFwcmV2UHJvcHMuaXNPcGVuICYmICFpc09wZW4pIHJldHVybjtcblxuICAgICAgIWlzUmVhY3QxNiAmJiB0aGlzLnJlbmRlclBvcnRhbCh0aGlzLnByb3BzKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICBpZiAoIV9zYWZlSFRNTEVsZW1lbnQuY2FuVXNlRE9NIHx8ICF0aGlzLm5vZGUgfHwgIXRoaXMucG9ydGFsKSByZXR1cm47XG5cbiAgICAgIHZhciBzdGF0ZSA9IHRoaXMucG9ydGFsLnN0YXRlO1xuICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XG4gICAgICB2YXIgY2xvc2VzQXQgPSBzdGF0ZS5pc09wZW4gJiYgdGhpcy5wcm9wcy5jbG9zZVRpbWVvdXRNUyAmJiAoc3RhdGUuY2xvc2VzQXQgfHwgbm93ICsgdGhpcy5wcm9wcy5jbG9zZVRpbWVvdXRNUyk7XG5cbiAgICAgIGlmIChjbG9zZXNBdCkge1xuICAgICAgICBpZiAoIXN0YXRlLmJlZm9yZUNsb3NlKSB7XG4gICAgICAgICAgdGhpcy5wb3J0YWwuY2xvc2VXaXRoVGltZW91dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0VGltZW91dCh0aGlzLnJlbW92ZVBvcnRhbCwgY2xvc2VzQXQgLSBub3cpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZW1vdmVQb3J0YWwoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIGlmICghX3NhZmVIVE1MRWxlbWVudC5jYW5Vc2VET00gfHwgIWlzUmVhY3QxNikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLm5vZGUgJiYgaXNSZWFjdDE2KSB7XG4gICAgICAgIHRoaXMubm9kZSA9IGNyZWF0ZUhUTUxFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgfVxuXG4gICAgICB2YXIgY3JlYXRlUG9ydGFsID0gZ2V0Q3JlYXRlUG9ydGFsKCk7XG4gICAgICByZXR1cm4gY3JlYXRlUG9ydGFsKF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9Nb2RhbFBvcnRhbDIuZGVmYXVsdCwgX2V4dGVuZHMoe1xuICAgICAgICByZWY6IHRoaXMucG9ydGFsUmVmLFxuICAgICAgICBkZWZhdWx0U3R5bGVzOiBNb2RhbC5kZWZhdWx0U3R5bGVzXG4gICAgICB9LCB0aGlzLnByb3BzKSksIHRoaXMubm9kZSk7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6IFwic2V0QXBwRWxlbWVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBcHBFbGVtZW50KGVsZW1lbnQpIHtcbiAgICAgIGFyaWFBcHBIaWRlci5zZXRFbGVtZW50KGVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8qIGVzbGludC1kaXNhYmxlIHJlYWN0L25vLXVudXNlZC1wcm9wLXR5cGVzICovXG5cbiAgICAvKiBlc2xpbnQtZW5hYmxlIHJlYWN0L25vLXVudXNlZC1wcm9wLXR5cGVzICovXG5cbiAgfV0pO1xuXG4gIHJldHVybiBNb2RhbDtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbk1vZGFsLnByb3BUeXBlcyA9IHtcbiAgaXNPcGVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wuaXNSZXF1aXJlZCxcbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc2hhcGUoe1xuICAgIGNvbnRlbnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAgIG92ZXJsYXk6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0XG4gIH0pLFxuICBwb3J0YWxDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBib2R5T3BlbkNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGh0bWxPcGVuQ2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9uZU9mVHlwZShbX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsIF9wcm9wVHlwZXMyLmRlZmF1bHQuc2hhcGUoe1xuICAgIGJhc2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgYWZ0ZXJPcGVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIGJlZm9yZUNsb3NlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZy5pc1JlcXVpcmVkXG4gIH0pXSksXG4gIG92ZXJsYXlDbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub25lT2ZUeXBlKFtfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZywgX3Byb3BUeXBlczIuZGVmYXVsdC5zaGFwZSh7XG4gICAgYmFzZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBhZnRlck9wZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgYmVmb3JlQ2xvc2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLmlzUmVxdWlyZWRcbiAgfSldKSxcbiAgYXBwRWxlbWVudDogX3Byb3BUeXBlczIuZGVmYXVsdC5vbmVPZlR5cGUoW19wcm9wVHlwZXMyLmRlZmF1bHQuaW5zdGFuY2VPZihfc2FmZUhUTUxFbGVtZW50Mi5kZWZhdWx0KSwgX3Byb3BUeXBlczIuZGVmYXVsdC5pbnN0YW5jZU9mKF9zYWZlSFRNTEVsZW1lbnQuU2FmZUhUTUxDb2xsZWN0aW9uKSwgX3Byb3BUeXBlczIuZGVmYXVsdC5pbnN0YW5jZU9mKF9zYWZlSFRNTEVsZW1lbnQuU2FmZU5vZGVMaXN0KSwgX3Byb3BUeXBlczIuZGVmYXVsdC5hcnJheU9mKF9wcm9wVHlwZXMyLmRlZmF1bHQuaW5zdGFuY2VPZihfc2FmZUhUTUxFbGVtZW50Mi5kZWZhdWx0KSldKSxcbiAgb25BZnRlck9wZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgb25SZXF1ZXN0Q2xvc2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgY2xvc2VUaW1lb3V0TVM6IF9wcm9wVHlwZXMyLmRlZmF1bHQubnVtYmVyLFxuICBhcmlhSGlkZUFwcDogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBzaG91bGRGb2N1c0FmdGVyUmVuZGVyOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIHNob3VsZENsb3NlT25PdmVybGF5Q2xpY2s6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgc2hvdWxkUmV0dXJuRm9jdXNBZnRlckNsb3NlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIHByZXZlbnRTY3JvbGw6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgcGFyZW50U2VsZWN0b3I6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgYXJpYTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGRhdGE6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICByb2xlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgY29udGVudExhYmVsOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgc2hvdWxkQ2xvc2VPbkVzYzogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBvdmVybGF5UmVmOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIGNvbnRlbnRSZWY6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgaWQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBvdmVybGF5RWxlbWVudDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBjb250ZW50RWxlbWVudDogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jXG59O1xuTW9kYWwuZGVmYXVsdFByb3BzID0ge1xuICBpc09wZW46IGZhbHNlLFxuICBwb3J0YWxDbGFzc05hbWU6IHBvcnRhbENsYXNzTmFtZSxcbiAgYm9keU9wZW5DbGFzc05hbWU6IGJvZHlPcGVuQ2xhc3NOYW1lLFxuICByb2xlOiBcImRpYWxvZ1wiLFxuICBhcmlhSGlkZUFwcDogdHJ1ZSxcbiAgY2xvc2VUaW1lb3V0TVM6IDAsXG4gIHNob3VsZEZvY3VzQWZ0ZXJSZW5kZXI6IHRydWUsXG4gIHNob3VsZENsb3NlT25Fc2M6IHRydWUsXG4gIHNob3VsZENsb3NlT25PdmVybGF5Q2xpY2s6IHRydWUsXG4gIHNob3VsZFJldHVybkZvY3VzQWZ0ZXJDbG9zZTogdHJ1ZSxcbiAgcHJldmVudFNjcm9sbDogZmFsc2UsXG4gIHBhcmVudFNlbGVjdG9yOiBmdW5jdGlvbiBwYXJlbnRTZWxlY3RvcigpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuYm9keTtcbiAgfSxcbiAgb3ZlcmxheUVsZW1lbnQ6IGZ1bmN0aW9uIG92ZXJsYXlFbGVtZW50KHByb3BzLCBjb250ZW50RWwpIHtcbiAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICBcImRpdlwiLFxuICAgICAgcHJvcHMsXG4gICAgICBjb250ZW50RWxcbiAgICApO1xuICB9LFxuICBjb250ZW50RWxlbWVudDogZnVuY3Rpb24gY29udGVudEVsZW1lbnQocHJvcHMsIGNoaWxkcmVuKSB7XG4gICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgXCJkaXZcIixcbiAgICAgIHByb3BzLFxuICAgICAgY2hpbGRyZW5cbiAgICApO1xuICB9XG59O1xuTW9kYWwuZGVmYXVsdFN0eWxlcyA9IHtcbiAgb3ZlcmxheToge1xuICAgIHBvc2l0aW9uOiBcImZpeGVkXCIsXG4gICAgdG9wOiAwLFxuICAgIGxlZnQ6IDAsXG4gICAgcmlnaHQ6IDAsXG4gICAgYm90dG9tOiAwLFxuICAgIGJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNzUpXCJcbiAgfSxcbiAgY29udGVudDoge1xuICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgdG9wOiBcIjQwcHhcIixcbiAgICBsZWZ0OiBcIjQwcHhcIixcbiAgICByaWdodDogXCI0MHB4XCIsXG4gICAgYm90dG9tOiBcIjQwcHhcIixcbiAgICBib3JkZXI6IFwiMXB4IHNvbGlkICNjY2NcIixcbiAgICBiYWNrZ3JvdW5kOiBcIiNmZmZcIixcbiAgICBvdmVyZmxvdzogXCJhdXRvXCIsXG4gICAgV2Via2l0T3ZlcmZsb3dTY3JvbGxpbmc6IFwidG91Y2hcIixcbiAgICBib3JkZXJSYWRpdXM6IFwiNHB4XCIsXG4gICAgb3V0bGluZTogXCJub25lXCIsXG4gICAgcGFkZGluZzogXCIyMHB4XCJcbiAgfVxufTtcblxuXG4oMCwgX3JlYWN0TGlmZWN5Y2xlc0NvbXBhdC5wb2x5ZmlsbCkoTW9kYWwpO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gIE1vZGFsLnNldENyZWF0ZUhUTUxFbGVtZW50ID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUhUTUxFbGVtZW50ID0gZm47XG4gIH07XG59XG5cbmV4cG9ydHMuZGVmYXVsdCA9IE1vZGFsOyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX01vZGFsID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9Nb2RhbFwiKTtcblxudmFyIF9Nb2RhbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Nb2RhbCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmV4cG9ydHMuZGVmYXVsdCA9IF9Nb2RhbDIuZGVmYXVsdDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07IiwiaW1wb3J0IHsgUHJvamVjdE1hbmFnZXIgfSBmcm9tICcuLi9tYW5hZ2Vycy9Qcm9qZWN0TWFuYWdlcidcblxuLyoqXG4gKiBnZXRTY2VuZSB1c2VkIHRvIENhbGxpbmcgYXBpIHRvIGdldCBzY2VuZSBkYXRhIHVzaW5nIGlkLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBhdXRob3IgQWJoaXNoZWsgUGF0aGFrXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRTY2VuZSA9IGFzeW5jIChzY2VuZUlkKTogUHJvbWlzZTxKU09OPiA9PiB7XG4gIGxldCBqc29uXG4gIHRyeSB7XG4gICAganNvbiA9IGF3YWl0IFByb2plY3RNYW5hZ2VyLmluc3RhbmNlLmZlYXRoZXJzQ2xpZW50LnNlcnZpY2UoJ3Byb2plY3QnKS5nZXQoc2NlbmVJZClcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhcIkNhbid0IGdldCBVUkwgZnJvbSBpZFwiICsgZXJyb3IpXG4gICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKVxuICB9XG4gIHJldHVybiBqc29uLnNjZW5lc1swXVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuXG4vKipcbiAqIGluaXRpYWxpemluZyBkZWZhdWx0U2V0dGluZ3Mgd2l0aCBlbXB0eSBjb250ZXh0LlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbmV4cG9ydCBjb25zdCBkZWZhdWx0U2V0dGluZ3MgPSB7fVxuXG4vKipcbiAqIFNldHRpbmdzQ29udGV4dCBjcmVhdGluZyByZWFjdCBjb250ZXh0LlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqL1xuY29uc3QgU2V0dGluZ3NDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dCh7XG4gIHNldHRpbmdzOiBkZWZhdWx0U2V0dGluZ3MsXG4gIHVwZGF0ZVNldHRpbmc6ICgpID0+IHt9XG59KVxuXG4vKipcbiAqIFNldHRpbmdzQ29udGV4dFByb3ZpZGVyIHByb3ZpZGVzIGNvbXBvbmVudCBjb250ZXh0IHZhbHVlLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqL1xuZXhwb3J0IGNvbnN0IFNldHRpbmdzQ29udGV4dFByb3ZpZGVyID0gU2V0dGluZ3NDb250ZXh0LlByb3ZpZGVyXG5cbi8qKlxuICogd2l0aFNldHRpbmdzIHNldHRpbmcgY29tcG9uZW50IGNvbnRleHQgdmFsdWUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gd2l0aFNldHRpbmdzKENvbXBvbmVudCkge1xuICByZXR1cm4gZnVuY3Rpb24gU2V0dGluZ3NDb250ZXh0Q29tcG9uZW50KHByb3BzKSB7XG4gICAgcmV0dXJuIDxTZXR0aW5nc0NvbnRleHQuQ29uc3VtZXI+eyhjdHgpID0+IDxDb21wb25lbnQgey4uLnByb3BzfSB7Li4uY3R4fSAvPn08L1NldHRpbmdzQ29udGV4dC5Db25zdW1lcj5cbiAgfVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IERpYWxvZyBmcm9tICcuL0RpYWxvZydcblxuLyoqXG4gKiBEZWNsYXJpbmcgcHJvcHMgZm9yIENvbmZpcm1EaWFsb2cgY29tcG9uZW50LlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtpbnRlcmZhY2V9XG4gKi9cbmludGVyZmFjZSBQcm9wcyB7XG4gIHRpdGxlP1xuICBtZXNzYWdlP1xuICB0YWc/XG4gIG9uQ2FuY2VsP1xuICBjYW5jZWxMYWJlbD9cbiAgb25Db25maXJtP1xuICBjb25maXJtTGFiZWw/XG4gIGJvdHRvbU5hdj9cbn1cblxuLyoqXG4gKiBDb25maXJtRGlhbG9nIGZ1bmN0aW9uIGNvbXBvbmVudCB1c2VkIHRvIHNob3cgZGlhbG9nLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAgICAgICB7aW50ZXJmYWNlfSBwcm9wc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBDb25maXJtRGlhbG9nKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7IG1lc3NhZ2UgfSA9IHByb3BzXG4gIHJldHVybiA8RGlhbG9nIHsuLi5wcm9wc30+e21lc3NhZ2V9PC9EaWFsb2c+XG59XG5Db25maXJtRGlhbG9nLmRlZmF1bHRQcm9wcyA9IHtcbiAgdGl0bGU6ICdDb25maXJtJyxcbiAgbWVzc2FnZTogJ0NvbmZpcm0gYWN0aW9uPydcbn1cbmV4cG9ydCBkZWZhdWx0IENvbmZpcm1EaWFsb2dcbiIsImltcG9ydCBSZWFjdCwgeyBSZWFjdE5vZGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnXG5cbi8qKlxuICogQmxvY2tGb3JtRmllbGQgdXNlZCB0byBwcm92aWRlIHN0eWxlcyBmb3IgYmxvY2sgRm9ybUZpZWxkIGRpdi5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7c3R5bGVkIGNvbXBvbmVudH1cbiAqL1xuY29uc3QgQmxvY2tGb3JtRmllbGQgPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuXG4gIGxhYmVsIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gIH1cbmBcblxuLyoqXG4gKiBJbmxpbmVGb3JtRmllbGQgdXNlZCB0byBwcm92aWRlIHN0eWxlcyBmb3IgaW5saW5lIEZvcm1GaWVsZCBkaXYuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge3N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IElubGluZUZvcm1GaWVsZCA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcblxuICAmID4gKiB7XG4gICAgbWFyZ2luLWxlZnQ6IDMwcHg7XG4gICAgYWxpZ24tc2VsZjogY2VudGVyO1xuICB9XG5cbiAgJiA+IDpmaXJzdC1jaGlsZCB7XG4gICAgbWFyZ2luLWxlZnQ6IDA7XG4gIH1cbmBcblxuaW50ZXJmYWNlIEZvcm1GaWVsZFByb3Age1xuICBpbmxpbmU/OiBhbnlcbiAgY2hpbGRyZW4/OiBSZWFjdE5vZGVcbn1cblxuLyoqXG4gKiBGb3JtRmllbGQgZnVuY3Rpb24gY29tcG9uZW50IHVzZWQgdG8gcmVuZGVyIGZvcm0gZmllbGRzLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAgICAgICB7Ym9vbGVhbn0gaW5saW5lXG4gKiBAcGFyYW0gICAgICAge3N0cmluZ30gY2hpbGRyZW5cbiAqIEBwYXJhbSAgICAgICB7YW55fSByZXN0XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEZvcm1GaWVsZCh7IGlubGluZSwgY2hpbGRyZW4sIC4uLnJlc3QgfTogRm9ybUZpZWxkUHJvcCkge1xuICBpZiAoaW5saW5lKSB7XG4gICAgcmV0dXJuIDxJbmxpbmVGb3JtRmllbGQgey4uLnJlc3R9PntjaGlsZHJlbn08L0lubGluZUZvcm1GaWVsZD5cbiAgfVxuXG4gIHJldHVybiA8QmxvY2tGb3JtRmllbGQgey4uLnJlc3R9PntjaGlsZHJlbn08L0Jsb2NrRm9ybUZpZWxkPlxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtRmllbGRcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBCb29sZWFuSW5wdXQgZnJvbSAnLi4vaW5wdXRzL0Jvb2xlYW5JbnB1dCdcbmltcG9ydCBGb3JtRmllbGQgZnJvbSAnLi4vaW5wdXRzL0Zvcm1GaWVsZCdcbmltcG9ydCBEaWFsb2cgZnJvbSAnLi9EaWFsb2cnXG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJ1xuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tICdyZWFjdC1pMThuZXh0J1xuXG4vKipcbiAqIEZvcm1Db250YWluZXIgdXNlZCBhcyBhIHdyYXBwZXIgZWxlbWVudCBmb3IgRm9ybUZpZWxkcy5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7U3R5bGVkIENvbXBvbmVudH1cbiAqL1xuY29uc3QgRm9ybUNvbnRhaW5lciA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGZsZXg6IDE7XG5gXG5cbi8qKlxuICogRXhwb3J0UHJvamVjdERpYWxvZyB1c2VkIHRvIHByb3ZpZGUgdmlldyBjb250YWluaW5nIEZvcm1GaWVsZHMuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHBhcmFtICAgICAgIHtPYmplY3R9IGRlZmF1bHRPcHRpb25zXG4gKiBAcGFyYW0gICAgICAge2Z1bmN0aW9ufSBvbkNvbmZpcm1cbiAqIEBwYXJhbSAgICAgICB7ZnVuY3Rpb259IG9uQ2FuY2VsXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEV4cG9ydFByb2plY3REaWFsb2coeyBkZWZhdWx0T3B0aW9ucywgb25Db25maXJtLCBvbkNhbmNlbCB9KSB7XG4gIGNvbnN0IHsgdCB9ID0gdXNlVHJhbnNsYXRpb24oKVxuXG4gIC8vIGluaXRpYWxpemluZyBvcHRpb25zIHVzaW5nIGRlZmF1bHRPcHRpb25zXG4gIGNvbnN0IFtvcHRpb25zLCBzZXRPcHRpb25zXSA9IHVzZVN0YXRlKGRlZmF1bHRPcHRpb25zKVxuXG4gIC8vY2FsbGJhY2sgZnVuY3Rpb24gdXNlZCB0byBoYW5kbGUgY2hhbmdlcyBpbiBvcHRpb25zLmNvbWJpbmVkTWVzaCBwcm9wZXJ0eVxuICBjb25zdCBvbkNoYW5nZUNvbWJpbmVNZXNoZXMgPSB1c2VDYWxsYmFjayhcbiAgICAoY29tYmluZU1lc2hlcykgPT4ge1xuICAgICAgc2V0T3B0aW9ucyh7IC4uLm9wdGlvbnMsIGNvbWJpbmVNZXNoZXMgfSlcbiAgICB9LFxuICAgIFtvcHRpb25zLCBzZXRPcHRpb25zXVxuICApXG5cbiAgLy8gY2FsbGJhY2sgZnVuY3Rpb24gdXNlZCB0byBoYW5kbGUgY2hhbmdlIGluIG9wdGlvbnMucmVtb3ZlVW51c2VkT2JqZWN0cyBwcm9wZXJ0eVxuICBjb25zdCBvbkNoYW5nZVJlbW92ZVVudXNlZE9iamVjdHMgPSB1c2VDYWxsYmFjayhcbiAgICAocmVtb3ZlVW51c2VkT2JqZWN0cykgPT4ge1xuICAgICAgc2V0T3B0aW9ucyh7IC4uLm9wdGlvbnMsIHJlbW92ZVVudXNlZE9iamVjdHMgfSlcbiAgICB9LFxuICAgIFtvcHRpb25zLCBzZXRPcHRpb25zXVxuICApXG5cbiAgLy8gY2FsbGJhY2sgZnVuY3Rpb24gdXNlZCB0byBoYW5kbGUgY29uZmlybWF0aW9uIG9uIGRpYWxvZy5cbiAgY29uc3Qgb25Db25maXJtQ2FsbGJhY2sgPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBvbkNvbmZpcm0ob3B0aW9ucylcbiAgICB9LFxuICAgIFtvcHRpb25zLCBvbkNvbmZpcm1dXG4gIClcblxuICAvLyBjYWxsYmFjayBmdW5jdGlvbnRvIGhhbmRsZSBjYW5jZWwgb2YgY29uZmlybWF0aW9uIGRpYWxvZy5cbiAgY29uc3Qgb25DYW5jZWxDYWxsYmFjayA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgIG9uQ2FuY2VsKClcbiAgICB9LFxuICAgIFtvbkNhbmNlbF1cbiAgKVxuXG4gIC8vIHJldHVybmluZyB2aWV3IGNvbnRhaW5pbmcgRm9ybUZpZWxkc1xuICByZXR1cm4gKFxuICAgIDxEaWFsb2dcbiAgICAgIHRpdGxlPXt0KCdlZGl0b3I6ZGlhbG9nLmV4cG9ydFByb2plY3QudGl0bGUnKX1cbiAgICAgIG9uQ29uZmlybT17b25Db25maXJtQ2FsbGJhY2t9XG4gICAgICBvbkNhbmNlbD17b25DYW5jZWxDYWxsYmFja31cbiAgICAgIGNvbmZpcm1MYWJlbD17dCgnZWRpdG9yOmRpYWxvZy5leHBvcnRQcm9qZWN0LmxibC1jb25maXJtJyl9XG4gICAgPlxuICAgICAgPEZvcm1Db250YWluZXI+XG4gICAgICAgIDxGb3JtRmllbGQ+XG4gICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJjb21iaW5lTWVzaGVzXCI+e3QoJ2VkaXRvcjpkaWFsb2cuZXhwb3J0UHJvamVjdC5sYmwtY29tYmluZU1lc2gnKX08L2xhYmVsPlxuICAgICAgICAgIDxCb29sZWFuSW5wdXQgaWQ9XCJjb21iaW5lTWVzaGVzXCIgdmFsdWU9e29wdGlvbnMuY29tYmluZU1lc2hlc30gb25DaGFuZ2U9e29uQ2hhbmdlQ29tYmluZU1lc2hlc30gLz5cbiAgICAgICAgPC9Gb3JtRmllbGQ+XG4gICAgICAgIDxGb3JtRmllbGQ+XG4gICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJyZW1vdmVVbnVzZWRPYmplY3RzXCI+e3QoJ2VkaXRvcjpkaWFsb2cuZXhwb3J0UHJvamVjdC5sYmwtcmVtb3ZlVW51c2VkJyl9PC9sYWJlbD5cbiAgICAgICAgICA8Qm9vbGVhbklucHV0XG4gICAgICAgICAgICBpZD1cInJlbW92ZVVudXNlZE9iamVjdHNcIlxuICAgICAgICAgICAgdmFsdWU9e29wdGlvbnMucmVtb3ZlVW51c2VkT2JqZWN0c31cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZVJlbW92ZVVudXNlZE9iamVjdHN9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9Gb3JtRmllbGQ+XG4gICAgICA8L0Zvcm1Db250YWluZXI+XG4gICAgPC9EaWFsb2c+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgRXhwb3J0UHJvamVjdERpYWxvZ1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IERpYWxvZyBmcm9tICcuL0RpYWxvZydcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnXG5cbi8qKlxuICogTGVmdENvbnRlbnQgdXNlZCB0byBwcm92aWRlIHN0eWxlcyBmb3IgbGVmdCBkaXYuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IExlZnRDb250ZW50ID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgd2lkdGg6IDM2MHB4O1xuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiBpbmhlcml0O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwYWRkaW5nOiAzMHB4O1xuXG4gIGltZyB7XG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICB9XG5gXG5cbi8qKlxuICogUmlnaHRDb250ZW50IHVzZWQgdG8gcHJvdmlkZSBzdHlsZXMgdG8gUmlnaHQgZGl2LlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtTdHlsZWQgY29tcG9uZW50fVxuICovXG5jb25zdCBSaWdodENvbnRlbnQgPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBmbGV4OiAxO1xuICBwYWRkaW5nOiAzMHB4IDMwcHg7XG5gXG5cbi8qKlxuICogUHJldmlld0RpYWxvZyBwcm92aWRlcyB0aGUgZGlhbG9nIGNvbnRhaW5pbmcgaW1hZ2Ugb24gbGVmdCBzaWRlIGFuZCBjb250ZW50IG9uIHJpZ2h0IHNpZGUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHBhcmFtICAgICAgIHtTdHJpbmd9IGltYWdlU3JjXG4gKiBAcGFyYW0gICAgICAge25vZGV9IGNoaWxkcmVuIFtjb250YWlucyBjb21wb25lbnQgd2l0aCBtZXNzYWdlIGNvbnRlbnRdXG4gKiBAcGFyYW0gICAgICAge2FueX0gcHJvcHNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgZnVuY3Rpb24gUHJldmlld0RpYWxvZyh7IGltYWdlU3JjLCBjaGlsZHJlbiwgLi4ucHJvcHMgfSkge1xuICByZXR1cm4gKFxuICAgIDxEaWFsb2cgey4uLnByb3BzfT5cbiAgICAgIDxMZWZ0Q29udGVudD5cbiAgICAgICAgPGltZyBzcmM9e2ltYWdlU3JjfSAvPlxuICAgICAgPC9MZWZ0Q29udGVudD5cbiAgICAgIDxSaWdodENvbnRlbnQ+e2NoaWxkcmVufTwvUmlnaHRDb250ZW50PlxuICAgIDwvRGlhbG9nPlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IFByZXZpZXdEaWFsb2dcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBTdHJpbmdJbnB1dCBmcm9tICcuLi9pbnB1dHMvU3RyaW5nSW5wdXQnXG5pbXBvcnQgRm9ybUZpZWxkIGZyb20gJy4uL2lucHV0cy9Gb3JtRmllbGQnXG5pbXBvcnQgUHJldmlld0RpYWxvZyBmcm9tICcuL1ByZXZpZXdEaWFsb2cnXG5pbXBvcnQgeyB1c2VUcmFuc2xhdGlvbiB9IGZyb20gJ3JlYWN0LWkxOG5leHQnXG5cbi8qKlxuICogU2F2ZU5ld1Byb2plY3REaWFsb2cgdXNlZCB0byBzaG93IGRpYWxvZyB3aGVuIHRvIHNhdmUgbmV3IHByb2plY3QuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHBhcmFtICAgICAgIHtzdHJpbmd9IHRodW1ibmFpbFVybFxuICogQHBhcmFtICAgICAgIHtzdHJpbmd9IGluaXRpYWxOYW1lXG4gKiBAcGFyYW0gICAgICAge2Z1bmN0aW9ufSBvbkNvbmZpcm1cbiAqIEBwYXJhbSAgICAgICB7ZnVuY3Rpb259IG9uQ2FuY2VsXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFNhdmVOZXdQcm9qZWN0RGlhbG9nKHsgdGh1bWJuYWlsVXJsLCBpbml0aWFsTmFtZSwgb25Db25maXJtLCBvbkNhbmNlbCB9KSB7XG4gIGNvbnN0IFtuYW1lLCBzZXROYW1lXSA9IHVzZVN0YXRlKGluaXRpYWxOYW1lKVxuICBjb25zdCB7IHQgfSA9IHVzZVRyYW5zbGF0aW9uKClcblxuICBjb25zdCBvbkNoYW5nZU5hbWUgPSB1c2VDYWxsYmFjayhcbiAgICAodmFsdWUpID0+IHtcbiAgICAgIHNldE5hbWUodmFsdWUpXG4gICAgfSxcbiAgICBbc2V0TmFtZV1cbiAgKVxuXG4gIC8qKlxuICAgKiBvbkNvbmZpcm1DYWxsYmFjayBjYWxsYmFjayBmdW5jdGlvbiBpcyB1c2VkIGhhbmRsZSBjb25maXJtIGRpYWxvZy5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBjb25zdCBvbkNvbmZpcm1DYWxsYmFjayA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgIG9uQ29uZmlybSh7IG5hbWUgfSlcbiAgICB9LFxuICAgIFtuYW1lLCBvbkNvbmZpcm1dXG4gIClcblxuICAvKipcbiAgICogb25DYW5jZWxDYWxsYmFjayBjYWxsYmFjayBmdW5jdGlvbiB1c2VkIHRvIGhhbmRsZSBjYW5jZWwgb2YgZGlhbG9nLlxuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIGNvbnN0IG9uQ2FuY2VsQ2FsbGJhY2sgPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBvbkNhbmNlbCgpXG4gICAgfSxcbiAgICBbb25DYW5jZWxdXG4gIClcblxuICAvL3JldHVybmluZyB2aWV3IGZvciBkaWFsb2cgdmlldy5cbiAgcmV0dXJuIChcbiAgICA8UHJldmlld0RpYWxvZ1xuICAgICAgaW1hZ2VTcmM9e3RodW1ibmFpbFVybH1cbiAgICAgIHRpdGxlPXt0KCdlZGl0b3I6ZGlhbG9nLnNhdmVOZXdQcm9qZWN0LnRpdGxlJyl9XG4gICAgICBvbkNvbmZpcm09e29uQ29uZmlybUNhbGxiYWNrfVxuICAgICAgb25DYW5jZWw9e29uQ2FuY2VsQ2FsbGJhY2t9XG4gICAgICBjb25maXJtTGFiZWw9e3QoJ2VkaXRvcjpkaWFsb2cuc2F2ZU5ld1Byb2plY3QubGJsLWNvbmZpcm0nKX1cbiAgICA+XG4gICAgICA8Rm9ybUZpZWxkPlxuICAgICAgICA8bGFiZWwgaHRtbEZvcj1cIm5hbWVcIj57dCgnZWRpdG9yOmRpYWxvZy5zYXZlTmV3UHJvamVjdC5sYmwtbmFtZScpfTwvbGFiZWw+XG4gICAgICAgIDxTdHJpbmdJbnB1dFxuICAgICAgICAgIGlkPVwibmFtZVwiXG4gICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICBwYXR0ZXJuPXsnW0EtWmEtejAtOS1cXCc6XCIhQCMkJV4mKigpLC4/fiBdezQsNjR9J31cbiAgICAgICAgICB0aXRsZT17dCgnZWRpdG9yOmRpYWxvZy5zYXZlTmV3UHJvamVjdC5pbmZvLW5hbWUnKX1cbiAgICAgICAgICB2YWx1ZT17bmFtZX1cbiAgICAgICAgICBvbkNoYW5nZT17b25DaGFuZ2VOYW1lfVxuICAgICAgICAvPlxuICAgICAgPC9Gb3JtRmllbGQ+XG4gICAgPC9QcmV2aWV3RGlhbG9nPlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IFNhdmVOZXdQcm9qZWN0RGlhbG9nXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VEcmFnTGF5ZXIgfSBmcm9tICdyZWFjdC1kbmQnXG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJ1xuaW1wb3J0IHsgSXRlbVR5cGVzIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL0Fzc2V0VHlwZXMnXG5pbXBvcnQgeyB1c2VUcmFuc2xhdGlvbiB9IGZyb20gJ3JlYWN0LWkxOG5leHQnXG5cbi8qKlxuICogRHJhZ0xheWVyQ29udGFpbmVyIHVzZWQgYXMgd3JhcHBlciBmb3IgRHJhZ1ByZXZpZXdDb250YWluZXIuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IERyYWdMYXllckNvbnRhaW5lciA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIHotaW5kZXg6IDk5OTk5O1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgdG9wOiAwO1xuICBib3R0b206IDA7XG5gXG5cbi8qKlxuICogRHJhZ1ByZXZpZXdDb250YWluZXIgdXNlZCB0byBwcm92aWRlIHN0eWxlcyB0byBwcmV2aWV3IG9iamVjdCBpbiBlZGl0b3Igdmlldy5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7U3R5bGVkIGNvbXBvbmVudH1cbiAqL1xuY29uc3QgRHJhZ1ByZXZpZXdDb250YWluZXIgPSAoc3R5bGVkIGFzIGFueSkuZGl2LmF0dHJzKChwcm9wcykgPT4gKHtcbiAgc3R5bGU6IHtcbiAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtwcm9wcy5vZmZzZXQueH1weCwgJHtwcm9wcy5vZmZzZXQueX1weClgXG4gIH1cbn0pKWBcbiAgYmFja2dyb3VuZC1jb2xvcjogJHsocHJvcHMpID0+IHByb3BzLnRoZW1lLmJsdWV9O1xuICBvcGFjaXR5OiAwLjM7XG4gIGNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMudGhlbWUudGV4dH07XG4gIHBhZGRpbmc6IDRweDtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG5gXG5cbi8qKlxuICogRHJhZ0xheWVyIGNvbXBvbmVudCB1c2VkIHRvIHByb3ZpZGUgYXJlYSBpbiBlZGl0b3Igd2hlcmUgd2UgY2FuIGRyYWcgYW5kIGRyb3AgZWxlbWVudHMuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERyYWdMYXllcigpIHtcbiAgY29uc3QgeyB0IH0gPSB1c2VUcmFuc2xhdGlvbigpXG5cbiAgLy9pbml0aWFsaXppbmcgaXRlbSwgaXRlbVR5cGUsIGN1cnJlbnRPZmZzZXQsIGlzRHJhZ2dpbmcgdXNpbmcgbW9uaXRvciBwcm9wZXJ0aWVzXG4gIGNvbnN0IHsgaXRlbSwgaXRlbVR5cGUsIGN1cnJlbnRPZmZzZXQsIGlzRHJhZ2dpbmcgfSA9IHVzZURyYWdMYXllcigobW9uaXRvcikgPT4gKHtcbiAgICBpdGVtOiBtb25pdG9yLmdldEl0ZW0oKSxcbiAgICBpdGVtVHlwZTogbW9uaXRvci5nZXRJdGVtVHlwZSgpLFxuICAgIGN1cnJlbnRPZmZzZXQ6IG1vbml0b3IuZ2V0Q2xpZW50T2Zmc2V0KCksXG4gICAgaXNEcmFnZ2luZzogbW9uaXRvci5pc0RyYWdnaW5nKClcbiAgfSkpXG5cbiAgLy9jaGVjayBpZiBub3QgaXNEaXNhYmxlZCBhbmQgbm90IGN1cnJlbnRPZmZzZXQgdGhlbiByZXR1cm4gbnVsbFxuICBpZiAoIWlzRHJhZ2dpbmcgfHwgIWN1cnJlbnRPZmZzZXQpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgLy8gRGVjbGFyaW5nIHZhcmlhYmxlIHByZXZpZXdcbiAgbGV0IHByZXZpZXdcblxuICAvL2NoZWNrIGlmIGl0ZW1UeXBlIG9mIE5vZGUgaXRlbSB0eXBlXG4gIGlmIChpdGVtVHlwZSA9PT0gSXRlbVR5cGVzLk5vZGUpIHtcbiAgICAvLyBpZiBtdWx0aXBsZSBpdGVtcyB0aGVuIHNob3cgaXRlbSBsZW5ndGggZWxzZSBzaG93IG5hbWUgb2YgaXRlbVxuICAgIGlmIChpdGVtLm11bHRpcGxlKSB7XG4gICAgICBwcmV2aWV3ID0gPGRpdj57dCgnZWRpdG9yOmRuZC5ub2RlcycsIHsgY291bnQ6IGl0ZW0udmFsdWUubGVuZ3RoIH0pfTwvZGl2PlxuICAgIH0gZWxzZSB7XG4gICAgICBwcmV2aWV3ID0gPGRpdj57aXRlbS52YWx1ZS5uYW1lfTwvZGl2PlxuICAgIH1cbiAgfSBlbHNlIGlmIChpdGVtVHlwZSA9PT0gSXRlbVR5cGVzLk1vZGVsKSB7XG4gICAgLy9jaGVjayBpdGVtIG9mIE1vZGVsIHR5cGVcbiAgICBpZiAoaXRlbS5tdWx0aXBsZSkge1xuICAgICAgLy9jaGVjayBpZiBpdGVtIGNvbnRhaW5zIG11bHRpcGxlIHRoZW4gc2hvd2luZyBsZW5ndGggb2Ygc2VsZWN0ZWQgbW9kZWxzXG4gICAgICBwcmV2aWV3ID0gPGRpdj57dCgnZWRpdG9yOmRuZC5tb2RlbHMnLCB7IGNvdW50OiBpdGVtLnZhbHVlLmxlbmd0aCB9KX08L2Rpdj5cbiAgICB9IGVsc2Uge1xuICAgICAgLy9zaG93aW5nIGxhYmVsIG9mIHRoZSBpdGVtXG4gICAgICBwcmV2aWV3ID0gPGRpdj57aXRlbS52YWx1ZS5sYWJlbH08L2Rpdj5cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXRlbVR5cGUgPT09IEl0ZW1UeXBlcy5JbWFnZSkge1xuICAgIC8vY2hlY2sgZm9yIGltYWdlIHR5cGVzXG4gICAgaWYgKGl0ZW0ubXVsdGlwbGUpIHtcbiAgICAgIHByZXZpZXcgPSA8ZGl2Pnt0KCdlZGl0b3I6ZG5kLmltYWdlcycsIHsgY291bnQ6IGl0ZW0udmFsdWUubGVuZ3RoIH0pfTwvZGl2PlxuICAgIH0gZWxzZSB7XG4gICAgICBwcmV2aWV3ID0gPGRpdj57aXRlbS52YWx1ZS5sYWJlbH08L2Rpdj5cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXRlbVR5cGUgPT09IEl0ZW1UeXBlcy5WaWRlbykge1xuICAgIC8vY2hlY2sgZm9yIHZpZGVvIHR5cGVzXG4gICAgaWYgKGl0ZW0ubXVsdGlwbGUpIHtcbiAgICAgIHByZXZpZXcgPSA8ZGl2Pnt0KCdlZGl0b3I6ZG5kLnZpZGVvcycsIHsgY291bnQ6IGl0ZW0udmFsdWUubGVuZ3RoIH0pfTwvZGl2PlxuICAgIH0gZWxzZSB7XG4gICAgICBwcmV2aWV3ID0gPGRpdj57aXRlbS52YWx1ZS5sYWJlbH08L2Rpdj5cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXRlbVR5cGUgPT09IEl0ZW1UeXBlcy5BdWRpbykge1xuICAgIC8vY2hlY2sgZm9yIGF1ZGlvIHR5cGVzXG4gICAgaWYgKGl0ZW0ubXVsdGlwbGUpIHtcbiAgICAgIHByZXZpZXcgPSA8ZGl2Pnt0KCdlZGl0b3I6ZG5kLmF1ZGlvJywgeyBjb3VudDogaXRlbS52YWx1ZS5sZW5ndGggfSl9PC9kaXY+XG4gICAgfSBlbHNlIHtcbiAgICAgIHByZXZpZXcgPSA8ZGl2PntpdGVtLnZhbHVlLmxhYmVsfTwvZGl2PlxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBzaG93aW5nIGl0ZW0gdHlwZVxuICAgIHByZXZpZXcgPSA8ZGl2PntpdGVtLnR5cGV9PC9kaXY+XG4gIH1cblxuICAvLyByZXR1cm5pbmcgRHJhZ0xheWVyIHZpZXdcbiAgcmV0dXJuIChcbiAgICA8RHJhZ0xheWVyQ29udGFpbmVyPlxuICAgICAgPERyYWdQcmV2aWV3Q29udGFpbmVyIG9mZnNldD17Y3VycmVudE9mZnNldH0+e3ByZXZpZXd9PC9EcmFnUHJldmlld0NvbnRhaW5lcj5cbiAgICA8L0RyYWdMYXllckNvbnRhaW5lcj5cbiAgKVxufVxuIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IE5vZGVFZGl0b3IgZnJvbSAnLi9Ob2RlRWRpdG9yJ1xuXG50eXBlIERlZmF1bHROb2RlRWRpdG9yUHJvcHMgPSB7XG4gIG5vZGU/OiBvYmplY3Rcbn1cblxuLyoqXG4gKiBEZWZhdWx0Tm9kZUVkaXRvciAgdXNlZCB0byByZW5kZXIgdmlldyB3aGVuIG5vIGVsZW1lbnQgaXMgc2VsZWN0ZWRcbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWZhdWx0Tm9kZUVkaXRvciBleHRlbmRzIENvbXBvbmVudDxEZWZhdWx0Tm9kZUVkaXRvclByb3BzLCB7fT4ge1xuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIDxOb2RlRWRpdG9yIHsuLi50aGlzLnByb3BzfSAvPlxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERlZmF1bHROb2RlRWRpdG9yXG4iLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kcyc7XG5pbXBvcnQgX2luaGVyaXRzTG9vc2UgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHNMb29zZSc7XG5pbXBvcnQgX2Fzc2VydFRoaXNJbml0aWFsaXplZCBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQnO1xuaW1wb3J0IG1lbW9pemVPbmUgZnJvbSAnbWVtb2l6ZS1vbmUnO1xuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgUHVyZUNvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSBmcm9tICdAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlJztcblxuLy8gQW5pbWF0aW9uIGZyYW1lIGJhc2VkIGltcGxlbWVudGF0aW9uIG9mIHNldFRpbWVvdXQuXG4vLyBJbnNwaXJlZCBieSBKb2UgTGFtYmVydCwgaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vam9lbGFtYmVydC8xMDAyMTE2I2ZpbGUtcmVxdWVzdHRpbWVvdXQtanNcbnZhciBoYXNOYXRpdmVQZXJmb3JtYW5jZU5vdyA9IHR5cGVvZiBwZXJmb3JtYW5jZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHBlcmZvcm1hbmNlLm5vdyA9PT0gJ2Z1bmN0aW9uJztcbnZhciBub3cgPSBoYXNOYXRpdmVQZXJmb3JtYW5jZU5vdyA/IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHBlcmZvcm1hbmNlLm5vdygpO1xufSA6IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIERhdGUubm93KCk7XG59O1xuZnVuY3Rpb24gY2FuY2VsVGltZW91dCh0aW1lb3V0SUQpIHtcbiAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGltZW91dElELmlkKTtcbn1cbmZ1bmN0aW9uIHJlcXVlc3RUaW1lb3V0KGNhbGxiYWNrLCBkZWxheSkge1xuICB2YXIgc3RhcnQgPSBub3coKTtcblxuICBmdW5jdGlvbiB0aWNrKCkge1xuICAgIGlmIChub3coKSAtIHN0YXJ0ID49IGRlbGF5KSB7XG4gICAgICBjYWxsYmFjay5jYWxsKG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aW1lb3V0SUQuaWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljayk7XG4gICAgfVxuICB9XG5cbiAgdmFyIHRpbWVvdXRJRCA9IHtcbiAgICBpZDogcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spXG4gIH07XG4gIHJldHVybiB0aW1lb3V0SUQ7XG59XG5cbnZhciBzaXplID0gLTE7IC8vIFRoaXMgdXRpbGl0eSBjb3BpZWQgZnJvbSBcImRvbS1oZWxwZXJzXCIgcGFja2FnZS5cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsYmFyU2l6ZShyZWNhbGN1bGF0ZSkge1xuICBpZiAocmVjYWxjdWxhdGUgPT09IHZvaWQgMCkge1xuICAgIHJlY2FsY3VsYXRlID0gZmFsc2U7XG4gIH1cblxuICBpZiAoc2l6ZSA9PT0gLTEgfHwgcmVjYWxjdWxhdGUpIHtcbiAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdmFyIHN0eWxlID0gZGl2LnN0eWxlO1xuICAgIHN0eWxlLndpZHRoID0gJzUwcHgnO1xuICAgIHN0eWxlLmhlaWdodCA9ICc1MHB4JztcbiAgICBzdHlsZS5vdmVyZmxvdyA9ICdzY3JvbGwnO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICBzaXplID0gZGl2Lm9mZnNldFdpZHRoIC0gZGl2LmNsaWVudFdpZHRoO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZGl2KTtcbiAgfVxuXG4gIHJldHVybiBzaXplO1xufVxudmFyIGNhY2hlZFJUTFJlc3VsdCA9IG51bGw7IC8vIFRSSUNLWSBBY2NvcmRpbmcgdG8gdGhlIHNwZWMsIHNjcm9sbExlZnQgc2hvdWxkIGJlIG5lZ2F0aXZlIGZvciBSVEwgYWxpZ25lZCBlbGVtZW50cy5cbi8vIENocm9tZSBkb2VzIG5vdCBzZWVtIHRvIGFkaGVyZTsgaXRzIHNjcm9sbExlZnQgdmFsdWVzIGFyZSBwb3NpdGl2ZSAobWVhc3VyZWQgcmVsYXRpdmUgdG8gdGhlIGxlZnQpLlxuLy8gU2FmYXJpJ3MgZWxhc3RpYyBib3VuY2UgbWFrZXMgZGV0ZWN0aW5nIHRoaXMgZXZlbiBtb3JlIGNvbXBsaWNhdGVkIHdydCBwb3RlbnRpYWwgZmFsc2UgcG9zaXRpdmVzLlxuLy8gVGhlIHNhZmVzdCB3YXkgdG8gY2hlY2sgdGhpcyBpcyB0byBpbnRlbnRpb25hbGx5IHNldCBhIG5lZ2F0aXZlIG9mZnNldCxcbi8vIGFuZCB0aGVuIHZlcmlmeSB0aGF0IHRoZSBzdWJzZXF1ZW50IFwic2Nyb2xsXCIgZXZlbnQgbWF0Y2hlcyB0aGUgbmVnYXRpdmUgb2Zmc2V0LlxuLy8gSWYgaXQgZG9lcyBub3QgbWF0Y2gsIHRoZW4gd2UgY2FuIGFzc3VtZSBhIG5vbi1zdGFuZGFyZCBSVEwgc2Nyb2xsIGltcGxlbWVudGF0aW9uLlxuXG5mdW5jdGlvbiBnZXRSVExPZmZzZXRUeXBlKHJlY2FsY3VsYXRlKSB7XG4gIGlmIChyZWNhbGN1bGF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgcmVjYWxjdWxhdGUgPSBmYWxzZTtcbiAgfVxuXG4gIGlmIChjYWNoZWRSVExSZXN1bHQgPT09IG51bGwgfHwgcmVjYWxjdWxhdGUpIHtcbiAgICB2YXIgb3V0ZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB2YXIgb3V0ZXJTdHlsZSA9IG91dGVyRGl2LnN0eWxlO1xuICAgIG91dGVyU3R5bGUud2lkdGggPSAnNTBweCc7XG4gICAgb3V0ZXJTdHlsZS5oZWlnaHQgPSAnNTBweCc7XG4gICAgb3V0ZXJTdHlsZS5vdmVyZmxvdyA9ICdzY3JvbGwnO1xuICAgIG91dGVyU3R5bGUuZGlyZWN0aW9uID0gJ3J0bCc7XG4gICAgdmFyIGlubmVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdmFyIGlubmVyU3R5bGUgPSBpbm5lckRpdi5zdHlsZTtcbiAgICBpbm5lclN0eWxlLndpZHRoID0gJzEwMHB4JztcbiAgICBpbm5lclN0eWxlLmhlaWdodCA9ICcxMDBweCc7XG4gICAgb3V0ZXJEaXYuYXBwZW5kQ2hpbGQoaW5uZXJEaXYpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3V0ZXJEaXYpO1xuXG4gICAgaWYgKG91dGVyRGl2LnNjcm9sbExlZnQgPiAwKSB7XG4gICAgICBjYWNoZWRSVExSZXN1bHQgPSAncG9zaXRpdmUtZGVzY2VuZGluZyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dGVyRGl2LnNjcm9sbExlZnQgPSAxO1xuXG4gICAgICBpZiAob3V0ZXJEaXYuc2Nyb2xsTGVmdCA9PT0gMCkge1xuICAgICAgICBjYWNoZWRSVExSZXN1bHQgPSAnbmVnYXRpdmUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FjaGVkUlRMUmVzdWx0ID0gJ3Bvc2l0aXZlLWFzY2VuZGluZyc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdXRlckRpdik7XG4gICAgcmV0dXJuIGNhY2hlZFJUTFJlc3VsdDtcbiAgfVxuXG4gIHJldHVybiBjYWNoZWRSVExSZXN1bHQ7XG59XG5cbnZhciBJU19TQ1JPTExJTkdfREVCT1VOQ0VfSU5URVJWQUwgPSAxNTA7XG5cbnZhciBkZWZhdWx0SXRlbUtleSA9IGZ1bmN0aW9uIGRlZmF1bHRJdGVtS2V5KF9yZWYpIHtcbiAgdmFyIGNvbHVtbkluZGV4ID0gX3JlZi5jb2x1bW5JbmRleCxcbiAgICAgIGRhdGEgPSBfcmVmLmRhdGEsXG4gICAgICByb3dJbmRleCA9IF9yZWYucm93SW5kZXg7XG4gIHJldHVybiByb3dJbmRleCArIFwiOlwiICsgY29sdW1uSW5kZXg7XG59OyAvLyBJbiBERVYgbW9kZSwgdGhpcyBTZXQgaGVscHMgdXMgb25seSBsb2cgYSB3YXJuaW5nIG9uY2UgcGVyIGNvbXBvbmVudCBpbnN0YW5jZS5cbi8vIFRoaXMgYXZvaWRzIHNwYW1taW5nIHRoZSBjb25zb2xlIGV2ZXJ5IHRpbWUgYSByZW5kZXIgaGFwcGVucy5cblxuXG52YXIgZGV2V2FybmluZ3NPdmVyc2NhbkNvdW50ID0gbnVsbDtcbnZhciBkZXZXYXJuaW5nc092ZXJzY2FuUm93c0NvbHVtbnNDb3VudCA9IG51bGw7XG52YXIgZGV2V2FybmluZ3NUYWdOYW1lID0gbnVsbDtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuV2Vha1NldCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBkZXZXYXJuaW5nc092ZXJzY2FuQ291bnQgPVxuICAgIC8qI19fUFVSRV9fKi9cbiAgICBuZXcgV2Vha1NldCgpO1xuICAgIGRldldhcm5pbmdzT3ZlcnNjYW5Sb3dzQ29sdW1uc0NvdW50ID1cbiAgICAvKiNfX1BVUkVfXyovXG4gICAgbmV3IFdlYWtTZXQoKTtcbiAgICBkZXZXYXJuaW5nc1RhZ05hbWUgPVxuICAgIC8qI19fUFVSRV9fKi9cbiAgICBuZXcgV2Vha1NldCgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUdyaWRDb21wb25lbnQoX3JlZjIpIHtcbiAgdmFyIF9jbGFzcywgX3RlbXA7XG5cbiAgdmFyIGdldENvbHVtbk9mZnNldCA9IF9yZWYyLmdldENvbHVtbk9mZnNldCxcbiAgICAgIGdldENvbHVtblN0YXJ0SW5kZXhGb3JPZmZzZXQgPSBfcmVmMi5nZXRDb2x1bW5TdGFydEluZGV4Rm9yT2Zmc2V0LFxuICAgICAgZ2V0Q29sdW1uU3RvcEluZGV4Rm9yU3RhcnRJbmRleCA9IF9yZWYyLmdldENvbHVtblN0b3BJbmRleEZvclN0YXJ0SW5kZXgsXG4gICAgICBnZXRDb2x1bW5XaWR0aCA9IF9yZWYyLmdldENvbHVtbldpZHRoLFxuICAgICAgZ2V0RXN0aW1hdGVkVG90YWxIZWlnaHQgPSBfcmVmMi5nZXRFc3RpbWF0ZWRUb3RhbEhlaWdodCxcbiAgICAgIGdldEVzdGltYXRlZFRvdGFsV2lkdGggPSBfcmVmMi5nZXRFc3RpbWF0ZWRUb3RhbFdpZHRoLFxuICAgICAgZ2V0T2Zmc2V0Rm9yQ29sdW1uQW5kQWxpZ25tZW50ID0gX3JlZjIuZ2V0T2Zmc2V0Rm9yQ29sdW1uQW5kQWxpZ25tZW50LFxuICAgICAgZ2V0T2Zmc2V0Rm9yUm93QW5kQWxpZ25tZW50ID0gX3JlZjIuZ2V0T2Zmc2V0Rm9yUm93QW5kQWxpZ25tZW50LFxuICAgICAgZ2V0Um93SGVpZ2h0ID0gX3JlZjIuZ2V0Um93SGVpZ2h0LFxuICAgICAgZ2V0Um93T2Zmc2V0ID0gX3JlZjIuZ2V0Um93T2Zmc2V0LFxuICAgICAgZ2V0Um93U3RhcnRJbmRleEZvck9mZnNldCA9IF9yZWYyLmdldFJvd1N0YXJ0SW5kZXhGb3JPZmZzZXQsXG4gICAgICBnZXRSb3dTdG9wSW5kZXhGb3JTdGFydEluZGV4ID0gX3JlZjIuZ2V0Um93U3RvcEluZGV4Rm9yU3RhcnRJbmRleCxcbiAgICAgIGluaXRJbnN0YW5jZVByb3BzID0gX3JlZjIuaW5pdEluc3RhbmNlUHJvcHMsXG4gICAgICBzaG91bGRSZXNldFN0eWxlQ2FjaGVPbkl0ZW1TaXplQ2hhbmdlID0gX3JlZjIuc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZSxcbiAgICAgIHZhbGlkYXRlUHJvcHMgPSBfcmVmMi52YWxpZGF0ZVByb3BzO1xuICByZXR1cm4gX3RlbXAgPSBfY2xhc3MgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0c0xvb3NlKEdyaWQsIF9QdXJlQ29tcG9uZW50KTtcblxuICAgIC8vIEFsd2F5cyB1c2UgZXhwbGljaXQgY29uc3RydWN0b3IgZm9yIFJlYWN0IGNvbXBvbmVudHMuXG4gICAgLy8gSXQgcHJvZHVjZXMgbGVzcyBjb2RlIGFmdGVyIHRyYW5zcGlsYXRpb24uICgjMjYpXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtY29uc3RydWN0b3JcbiAgICBmdW5jdGlvbiBHcmlkKHByb3BzKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF90aGlzID0gX1B1cmVDb21wb25lbnQuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgIF90aGlzLl9pbnN0YW5jZVByb3BzID0gaW5pdEluc3RhbmNlUHJvcHMoX3RoaXMucHJvcHMsIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpKTtcbiAgICAgIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkID0gbnVsbDtcbiAgICAgIF90aGlzLl9vdXRlclJlZiA9IHZvaWQgMDtcbiAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICBpbnN0YW5jZTogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksXG4gICAgICAgIGlzU2Nyb2xsaW5nOiBmYWxzZSxcbiAgICAgICAgaG9yaXpvbnRhbFNjcm9sbERpcmVjdGlvbjogJ2ZvcndhcmQnLFxuICAgICAgICBzY3JvbGxMZWZ0OiB0eXBlb2YgX3RoaXMucHJvcHMuaW5pdGlhbFNjcm9sbExlZnQgPT09ICdudW1iZXInID8gX3RoaXMucHJvcHMuaW5pdGlhbFNjcm9sbExlZnQgOiAwLFxuICAgICAgICBzY3JvbGxUb3A6IHR5cGVvZiBfdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsVG9wID09PSAnbnVtYmVyJyA/IF90aGlzLnByb3BzLmluaXRpYWxTY3JvbGxUb3AgOiAwLFxuICAgICAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQ6IGZhbHNlLFxuICAgICAgICB2ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbjogJ2ZvcndhcmQnXG4gICAgICB9O1xuICAgICAgX3RoaXMuX2NhbGxPbkl0ZW1zUmVuZGVyZWQgPSB2b2lkIDA7XG4gICAgICBfdGhpcy5fY2FsbE9uSXRlbXNSZW5kZXJlZCA9IG1lbW9pemVPbmUoZnVuY3Rpb24gKG92ZXJzY2FuQ29sdW1uU3RhcnRJbmRleCwgb3ZlcnNjYW5Db2x1bW5TdG9wSW5kZXgsIG92ZXJzY2FuUm93U3RhcnRJbmRleCwgb3ZlcnNjYW5Sb3dTdG9wSW5kZXgsIHZpc2libGVDb2x1bW5TdGFydEluZGV4LCB2aXNpYmxlQ29sdW1uU3RvcEluZGV4LCB2aXNpYmxlUm93U3RhcnRJbmRleCwgdmlzaWJsZVJvd1N0b3BJbmRleCkge1xuICAgICAgICByZXR1cm4gX3RoaXMucHJvcHMub25JdGVtc1JlbmRlcmVkKHtcbiAgICAgICAgICBvdmVyc2NhbkNvbHVtblN0YXJ0SW5kZXg6IG92ZXJzY2FuQ29sdW1uU3RhcnRJbmRleCxcbiAgICAgICAgICBvdmVyc2NhbkNvbHVtblN0b3BJbmRleDogb3ZlcnNjYW5Db2x1bW5TdG9wSW5kZXgsXG4gICAgICAgICAgb3ZlcnNjYW5Sb3dTdGFydEluZGV4OiBvdmVyc2NhblJvd1N0YXJ0SW5kZXgsXG4gICAgICAgICAgb3ZlcnNjYW5Sb3dTdG9wSW5kZXg6IG92ZXJzY2FuUm93U3RvcEluZGV4LFxuICAgICAgICAgIHZpc2libGVDb2x1bW5TdGFydEluZGV4OiB2aXNpYmxlQ29sdW1uU3RhcnRJbmRleCxcbiAgICAgICAgICB2aXNpYmxlQ29sdW1uU3RvcEluZGV4OiB2aXNpYmxlQ29sdW1uU3RvcEluZGV4LFxuICAgICAgICAgIHZpc2libGVSb3dTdGFydEluZGV4OiB2aXNpYmxlUm93U3RhcnRJbmRleCxcbiAgICAgICAgICB2aXNpYmxlUm93U3RvcEluZGV4OiB2aXNpYmxlUm93U3RvcEluZGV4XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBfdGhpcy5fY2FsbE9uU2Nyb2xsID0gdm9pZCAwO1xuICAgICAgX3RoaXMuX2NhbGxPblNjcm9sbCA9IG1lbW9pemVPbmUoZnVuY3Rpb24gKHNjcm9sbExlZnQsIHNjcm9sbFRvcCwgaG9yaXpvbnRhbFNjcm9sbERpcmVjdGlvbiwgdmVydGljYWxTY3JvbGxEaXJlY3Rpb24sIHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZCkge1xuICAgICAgICByZXR1cm4gX3RoaXMucHJvcHMub25TY3JvbGwoe1xuICAgICAgICAgIGhvcml6b250YWxTY3JvbGxEaXJlY3Rpb246IGhvcml6b250YWxTY3JvbGxEaXJlY3Rpb24sXG4gICAgICAgICAgc2Nyb2xsTGVmdDogc2Nyb2xsTGVmdCxcbiAgICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbFRvcCxcbiAgICAgICAgICB2ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbjogdmVydGljYWxTY3JvbGxEaXJlY3Rpb24sXG4gICAgICAgICAgc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkOiBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWRcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIF90aGlzLl9nZXRJdGVtU3R5bGUgPSB2b2lkIDA7XG5cbiAgICAgIF90aGlzLl9nZXRJdGVtU3R5bGUgPSBmdW5jdGlvbiAocm93SW5kZXgsIGNvbHVtbkluZGV4KSB7XG4gICAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgICAgY29sdW1uV2lkdGggPSBfdGhpcyRwcm9wcy5jb2x1bW5XaWR0aCxcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IF90aGlzJHByb3BzLmRpcmVjdGlvbixcbiAgICAgICAgICAgIHJvd0hlaWdodCA9IF90aGlzJHByb3BzLnJvd0hlaWdodDtcblxuICAgICAgICB2YXIgaXRlbVN0eWxlQ2FjaGUgPSBfdGhpcy5fZ2V0SXRlbVN0eWxlQ2FjaGUoc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZSAmJiBjb2x1bW5XaWR0aCwgc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZSAmJiBkaXJlY3Rpb24sIHNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2UgJiYgcm93SGVpZ2h0KTtcblxuICAgICAgICB2YXIga2V5ID0gcm93SW5kZXggKyBcIjpcIiArIGNvbHVtbkluZGV4O1xuICAgICAgICB2YXIgc3R5bGU7XG5cbiAgICAgICAgaWYgKGl0ZW1TdHlsZUNhY2hlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBzdHlsZSA9IGl0ZW1TdHlsZUNhY2hlW2tleV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIF9vZmZzZXQgPSBnZXRDb2x1bW5PZmZzZXQoX3RoaXMucHJvcHMsIGNvbHVtbkluZGV4LCBfdGhpcy5faW5zdGFuY2VQcm9wcyk7XG5cbiAgICAgICAgICB2YXIgaXNSdGwgPSBkaXJlY3Rpb24gPT09ICdydGwnO1xuICAgICAgICAgIGl0ZW1TdHlsZUNhY2hlW2tleV0gPSBzdHlsZSA9IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgbGVmdDogaXNSdGwgPyB1bmRlZmluZWQgOiBfb2Zmc2V0LFxuICAgICAgICAgICAgcmlnaHQ6IGlzUnRsID8gX29mZnNldCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRvcDogZ2V0Um93T2Zmc2V0KF90aGlzLnByb3BzLCByb3dJbmRleCwgX3RoaXMuX2luc3RhbmNlUHJvcHMpLFxuICAgICAgICAgICAgaGVpZ2h0OiBnZXRSb3dIZWlnaHQoX3RoaXMucHJvcHMsIHJvd0luZGV4LCBfdGhpcy5faW5zdGFuY2VQcm9wcyksXG4gICAgICAgICAgICB3aWR0aDogZ2V0Q29sdW1uV2lkdGgoX3RoaXMucHJvcHMsIGNvbHVtbkluZGV4LCBfdGhpcy5faW5zdGFuY2VQcm9wcylcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMuX2dldEl0ZW1TdHlsZUNhY2hlID0gdm9pZCAwO1xuICAgICAgX3RoaXMuX2dldEl0ZW1TdHlsZUNhY2hlID0gbWVtb2l6ZU9uZShmdW5jdGlvbiAoXywgX18sIF9fXykge1xuICAgICAgICByZXR1cm4ge307XG4gICAgICB9KTtcblxuICAgICAgX3RoaXMuX29uU2Nyb2xsID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBfZXZlbnQkY3VycmVudFRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQsXG4gICAgICAgICAgICBjbGllbnRIZWlnaHQgPSBfZXZlbnQkY3VycmVudFRhcmdldC5jbGllbnRIZWlnaHQsXG4gICAgICAgICAgICBjbGllbnRXaWR0aCA9IF9ldmVudCRjdXJyZW50VGFyZ2V0LmNsaWVudFdpZHRoLFxuICAgICAgICAgICAgc2Nyb2xsTGVmdCA9IF9ldmVudCRjdXJyZW50VGFyZ2V0LnNjcm9sbExlZnQsXG4gICAgICAgICAgICBzY3JvbGxUb3AgPSBfZXZlbnQkY3VycmVudFRhcmdldC5zY3JvbGxUb3AsXG4gICAgICAgICAgICBzY3JvbGxIZWlnaHQgPSBfZXZlbnQkY3VycmVudFRhcmdldC5zY3JvbGxIZWlnaHQsXG4gICAgICAgICAgICBzY3JvbGxXaWR0aCA9IF9ldmVudCRjdXJyZW50VGFyZ2V0LnNjcm9sbFdpZHRoO1xuXG4gICAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChwcmV2U3RhdGUpIHtcbiAgICAgICAgICBpZiAocHJldlN0YXRlLnNjcm9sbExlZnQgPT09IHNjcm9sbExlZnQgJiYgcHJldlN0YXRlLnNjcm9sbFRvcCA9PT0gc2Nyb2xsVG9wKSB7XG4gICAgICAgICAgICAvLyBTY3JvbGwgcG9zaXRpb24gbWF5IGhhdmUgYmVlbiB1cGRhdGVkIGJ5IGNETS9jRFUsXG4gICAgICAgICAgICAvLyBJbiB3aGljaCBjYXNlIHdlIGRvbid0IG5lZWQgdG8gdHJpZ2dlciBhbm90aGVyIHJlbmRlcixcbiAgICAgICAgICAgIC8vIEFuZCB3ZSBkb24ndCB3YW50IHRvIHVwZGF0ZSBzdGF0ZS5pc1Njcm9sbGluZy5cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBfdGhpcy5wcm9wcy5kaXJlY3Rpb247IC8vIFRSSUNLWSBBY2NvcmRpbmcgdG8gdGhlIHNwZWMsIHNjcm9sbExlZnQgc2hvdWxkIGJlIG5lZ2F0aXZlIGZvciBSVEwgYWxpZ25lZCBlbGVtZW50cy5cbiAgICAgICAgICAvLyBUaGlzIGlzIG5vdCB0aGUgY2FzZSBmb3IgYWxsIGJyb3dzZXJzIHRob3VnaCAoZS5nLiBDaHJvbWUgcmVwb3J0cyB2YWx1ZXMgYXMgcG9zaXRpdmUsIG1lYXN1cmVkIHJlbGF0aXZlIHRvIHRoZSBsZWZ0KS5cbiAgICAgICAgICAvLyBJdCdzIGFsc28gZWFzaWVyIGZvciB0aGlzIGNvbXBvbmVudCBpZiB3ZSBjb252ZXJ0IG9mZnNldHMgdG8gdGhlIHNhbWUgZm9ybWF0IGFzIHRoZXkgd291bGQgYmUgaW4gZm9yIGx0ci5cbiAgICAgICAgICAvLyBTbyB0aGUgc2ltcGxlc3Qgc29sdXRpb24gaXMgdG8gZGV0ZXJtaW5lIHdoaWNoIGJyb3dzZXIgYmVoYXZpb3Igd2UncmUgZGVhbGluZyB3aXRoLCBhbmQgY29udmVydCBiYXNlZCBvbiBpdC5cblxuICAgICAgICAgIHZhciBjYWxjdWxhdGVkU2Nyb2xsTGVmdCA9IHNjcm9sbExlZnQ7XG5cbiAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAncnRsJykge1xuICAgICAgICAgICAgc3dpdGNoIChnZXRSVExPZmZzZXRUeXBlKCkpIHtcbiAgICAgICAgICAgICAgY2FzZSAnbmVnYXRpdmUnOlxuICAgICAgICAgICAgICAgIGNhbGN1bGF0ZWRTY3JvbGxMZWZ0ID0gLXNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAncG9zaXRpdmUtZGVzY2VuZGluZyc6XG4gICAgICAgICAgICAgICAgY2FsY3VsYXRlZFNjcm9sbExlZnQgPSBzY3JvbGxXaWR0aCAtIGNsaWVudFdpZHRoIC0gc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IC8vIFByZXZlbnQgU2FmYXJpJ3MgZWxhc3RpYyBzY3JvbGxpbmcgZnJvbSBjYXVzaW5nIHZpc3VhbCBzaGFraW5nIHdoZW4gc2Nyb2xsaW5nIHBhc3QgYm91bmRzLlxuXG5cbiAgICAgICAgICBjYWxjdWxhdGVkU2Nyb2xsTGVmdCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGNhbGN1bGF0ZWRTY3JvbGxMZWZ0LCBzY3JvbGxXaWR0aCAtIGNsaWVudFdpZHRoKSk7XG4gICAgICAgICAgdmFyIGNhbGN1bGF0ZWRTY3JvbGxUb3AgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihzY3JvbGxUb3AsIHNjcm9sbEhlaWdodCAtIGNsaWVudEhlaWdodCkpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc1Njcm9sbGluZzogdHJ1ZSxcbiAgICAgICAgICAgIGhvcml6b250YWxTY3JvbGxEaXJlY3Rpb246IHByZXZTdGF0ZS5zY3JvbGxMZWZ0IDwgc2Nyb2xsTGVmdCA/ICdmb3J3YXJkJyA6ICdiYWNrd2FyZCcsXG4gICAgICAgICAgICBzY3JvbGxMZWZ0OiBjYWxjdWxhdGVkU2Nyb2xsTGVmdCxcbiAgICAgICAgICAgIHNjcm9sbFRvcDogY2FsY3VsYXRlZFNjcm9sbFRvcCxcbiAgICAgICAgICAgIHZlcnRpY2FsU2Nyb2xsRGlyZWN0aW9uOiBwcmV2U3RhdGUuc2Nyb2xsVG9wIDwgc2Nyb2xsVG9wID8gJ2ZvcndhcmQnIDogJ2JhY2t3YXJkJyxcbiAgICAgICAgICAgIHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZDogZmFsc2VcbiAgICAgICAgICB9O1xuICAgICAgICB9LCBfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ0RlYm91bmNlZCk7XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5fb3V0ZXJSZWZTZXR0ZXIgPSBmdW5jdGlvbiAocmVmKSB7XG4gICAgICAgIHZhciBvdXRlclJlZiA9IF90aGlzLnByb3BzLm91dGVyUmVmO1xuICAgICAgICBfdGhpcy5fb3V0ZXJSZWYgPSByZWY7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBvdXRlclJlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIG91dGVyUmVmKHJlZik7XG4gICAgICAgIH0gZWxzZSBpZiAob3V0ZXJSZWYgIT0gbnVsbCAmJiB0eXBlb2Ygb3V0ZXJSZWYgPT09ICdvYmplY3QnICYmIG91dGVyUmVmLmhhc093blByb3BlcnR5KCdjdXJyZW50JykpIHtcbiAgICAgICAgICBvdXRlclJlZi5jdXJyZW50ID0gcmVmO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ0RlYm91bmNlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF90aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkICE9PSBudWxsKSB7XG4gICAgICAgICAgY2FuY2VsVGltZW91dChfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCA9IHJlcXVlc3RUaW1lb3V0KF90aGlzLl9yZXNldElzU2Nyb2xsaW5nLCBJU19TQ1JPTExJTkdfREVCT1VOQ0VfSU5URVJWQUwpO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkID0gbnVsbDtcblxuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgaXNTY3JvbGxpbmc6IGZhbHNlXG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvLyBDbGVhciBzdHlsZSBjYWNoZSBhZnRlciBzdGF0ZSB1cGRhdGUgaGFzIGJlZW4gY29tbWl0dGVkLlxuICAgICAgICAgIC8vIFRoaXMgd2F5IHdlIGRvbid0IGJyZWFrIHB1cmUgc0NVIGZvciBpdGVtcyB0aGF0IGRvbid0IHVzZSBpc1Njcm9sbGluZyBwYXJhbS5cbiAgICAgICAgICBfdGhpcy5fZ2V0SXRlbVN0eWxlQ2FjaGUoLTEpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBHcmlkLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyA9IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXh0UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgdmFsaWRhdGVTaGFyZWRQcm9wcyhuZXh0UHJvcHMsIHByZXZTdGF0ZSk7XG4gICAgICB2YWxpZGF0ZVByb3BzKG5leHRQcm9wcyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgdmFyIF9wcm90byA9IEdyaWQucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLnNjcm9sbFRvID0gZnVuY3Rpb24gc2Nyb2xsVG8oX3JlZjMpIHtcbiAgICAgIHZhciBzY3JvbGxMZWZ0ID0gX3JlZjMuc2Nyb2xsTGVmdCxcbiAgICAgICAgICBzY3JvbGxUb3AgPSBfcmVmMy5zY3JvbGxUb3A7XG5cbiAgICAgIGlmIChzY3JvbGxMZWZ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2Nyb2xsTGVmdCA9IE1hdGgubWF4KDAsIHNjcm9sbExlZnQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2Nyb2xsVG9wICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2Nyb2xsVG9wID0gTWF0aC5tYXgoMCwgc2Nyb2xsVG9wKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAocHJldlN0YXRlKSB7XG4gICAgICAgIGlmIChzY3JvbGxMZWZ0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzY3JvbGxMZWZ0ID0gcHJldlN0YXRlLnNjcm9sbExlZnQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2Nyb2xsVG9wID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzY3JvbGxUb3AgPSBwcmV2U3RhdGUuc2Nyb2xsVG9wO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByZXZTdGF0ZS5zY3JvbGxMZWZ0ID09PSBzY3JvbGxMZWZ0ICYmIHByZXZTdGF0ZS5zY3JvbGxUb3AgPT09IHNjcm9sbFRvcCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBob3Jpem9udGFsU2Nyb2xsRGlyZWN0aW9uOiBwcmV2U3RhdGUuc2Nyb2xsTGVmdCA8IHNjcm9sbExlZnQgPyAnZm9yd2FyZCcgOiAnYmFja3dhcmQnLFxuICAgICAgICAgIHNjcm9sbExlZnQ6IHNjcm9sbExlZnQsXG4gICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxUb3AsXG4gICAgICAgICAgc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkOiB0cnVlLFxuICAgICAgICAgIHZlcnRpY2FsU2Nyb2xsRGlyZWN0aW9uOiBwcmV2U3RhdGUuc2Nyb2xsVG9wIDwgc2Nyb2xsVG9wID8gJ2ZvcndhcmQnIDogJ2JhY2t3YXJkJ1xuICAgICAgICB9O1xuICAgICAgfSwgdGhpcy5fcmVzZXRJc1Njcm9sbGluZ0RlYm91bmNlZCk7XG4gICAgfTtcblxuICAgIF9wcm90by5zY3JvbGxUb0l0ZW0gPSBmdW5jdGlvbiBzY3JvbGxUb0l0ZW0oX3JlZjQpIHtcbiAgICAgIHZhciBfcmVmNCRhbGlnbiA9IF9yZWY0LmFsaWduLFxuICAgICAgICAgIGFsaWduID0gX3JlZjQkYWxpZ24gPT09IHZvaWQgMCA/ICdhdXRvJyA6IF9yZWY0JGFsaWduLFxuICAgICAgICAgIGNvbHVtbkluZGV4ID0gX3JlZjQuY29sdW1uSW5kZXgsXG4gICAgICAgICAgcm93SW5kZXggPSBfcmVmNC5yb3dJbmRleDtcbiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGNvbHVtbkNvdW50ID0gX3RoaXMkcHJvcHMyLmNvbHVtbkNvdW50LFxuICAgICAgICAgIGhlaWdodCA9IF90aGlzJHByb3BzMi5oZWlnaHQsXG4gICAgICAgICAgcm93Q291bnQgPSBfdGhpcyRwcm9wczIucm93Q291bnQsXG4gICAgICAgICAgd2lkdGggPSBfdGhpcyRwcm9wczIud2lkdGg7XG4gICAgICB2YXIgX3RoaXMkc3RhdGUgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgIHNjcm9sbExlZnQgPSBfdGhpcyRzdGF0ZS5zY3JvbGxMZWZ0LFxuICAgICAgICAgIHNjcm9sbFRvcCA9IF90aGlzJHN0YXRlLnNjcm9sbFRvcDtcbiAgICAgIHZhciBzY3JvbGxiYXJTaXplID0gZ2V0U2Nyb2xsYmFyU2l6ZSgpO1xuXG4gICAgICBpZiAoY29sdW1uSW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb2x1bW5JbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGNvbHVtbkluZGV4LCBjb2x1bW5Db3VudCAtIDEpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJvd0luZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcm93SW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihyb3dJbmRleCwgcm93Q291bnQgLSAxKSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBlc3RpbWF0ZWRUb3RhbEhlaWdodCA9IGdldEVzdGltYXRlZFRvdGFsSGVpZ2h0KHRoaXMucHJvcHMsIHRoaXMuX2luc3RhbmNlUHJvcHMpO1xuICAgICAgdmFyIGVzdGltYXRlZFRvdGFsV2lkdGggPSBnZXRFc3RpbWF0ZWRUb3RhbFdpZHRoKHRoaXMucHJvcHMsIHRoaXMuX2luc3RhbmNlUHJvcHMpOyAvLyBUaGUgc2Nyb2xsYmFyIHNpemUgc2hvdWxkIGJlIGNvbnNpZGVyZWQgd2hlbiBzY3JvbGxpbmcgYW4gaXRlbSBpbnRvIHZpZXcsXG4gICAgICAvLyB0byBlbnN1cmUgaXQncyBmdWxseSB2aXNpYmxlLlxuICAgICAgLy8gQnV0IHdlIG9ubHkgbmVlZCB0byBhY2NvdW50IGZvciBpdHMgc2l6ZSB3aGVuIGl0J3MgYWN0dWFsbHkgdmlzaWJsZS5cblxuICAgICAgdmFyIGhvcml6b250YWxTY3JvbGxiYXJTaXplID0gZXN0aW1hdGVkVG90YWxXaWR0aCA+IHdpZHRoID8gc2Nyb2xsYmFyU2l6ZSA6IDA7XG4gICAgICB2YXIgdmVydGljYWxTY3JvbGxiYXJTaXplID0gZXN0aW1hdGVkVG90YWxIZWlnaHQgPiBoZWlnaHQgPyBzY3JvbGxiYXJTaXplIDogMDtcbiAgICAgIHRoaXMuc2Nyb2xsVG8oe1xuICAgICAgICBzY3JvbGxMZWZ0OiBjb2x1bW5JbmRleCAhPT0gdW5kZWZpbmVkID8gZ2V0T2Zmc2V0Rm9yQ29sdW1uQW5kQWxpZ25tZW50KHRoaXMucHJvcHMsIGNvbHVtbkluZGV4LCBhbGlnbiwgc2Nyb2xsTGVmdCwgdGhpcy5faW5zdGFuY2VQcm9wcywgdmVydGljYWxTY3JvbGxiYXJTaXplKSA6IHNjcm9sbExlZnQsXG4gICAgICAgIHNjcm9sbFRvcDogcm93SW5kZXggIT09IHVuZGVmaW5lZCA/IGdldE9mZnNldEZvclJvd0FuZEFsaWdubWVudCh0aGlzLnByb3BzLCByb3dJbmRleCwgYWxpZ24sIHNjcm9sbFRvcCwgdGhpcy5faW5zdGFuY2VQcm9wcywgaG9yaXpvbnRhbFNjcm9sbGJhclNpemUpIDogc2Nyb2xsVG9wXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBpbml0aWFsU2Nyb2xsTGVmdCA9IF90aGlzJHByb3BzMy5pbml0aWFsU2Nyb2xsTGVmdCxcbiAgICAgICAgICBpbml0aWFsU2Nyb2xsVG9wID0gX3RoaXMkcHJvcHMzLmluaXRpYWxTY3JvbGxUb3A7XG5cbiAgICAgIGlmICh0aGlzLl9vdXRlclJlZiAhPSBudWxsKSB7XG4gICAgICAgIHZhciBvdXRlclJlZiA9IHRoaXMuX291dGVyUmVmO1xuXG4gICAgICAgIGlmICh0eXBlb2YgaW5pdGlhbFNjcm9sbExlZnQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsTGVmdCA9IGluaXRpYWxTY3JvbGxMZWZ0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBpbml0aWFsU2Nyb2xsVG9wID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIG91dGVyUmVmLnNjcm9sbFRvcCA9IGluaXRpYWxTY3JvbGxUb3A7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5fY2FsbFByb3BzQ2FsbGJhY2tzKCk7XG4gICAgfTtcblxuICAgIF9wcm90by5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5wcm9wcy5kaXJlY3Rpb247XG4gICAgICB2YXIgX3RoaXMkc3RhdGUyID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICBzY3JvbGxMZWZ0ID0gX3RoaXMkc3RhdGUyLnNjcm9sbExlZnQsXG4gICAgICAgICAgc2Nyb2xsVG9wID0gX3RoaXMkc3RhdGUyLnNjcm9sbFRvcCxcbiAgICAgICAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQgPSBfdGhpcyRzdGF0ZTIuc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkO1xuXG4gICAgICBpZiAoc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkICYmIHRoaXMuX291dGVyUmVmICE9IG51bGwpIHtcbiAgICAgICAgLy8gVFJJQ0tZIEFjY29yZGluZyB0byB0aGUgc3BlYywgc2Nyb2xsTGVmdCBzaG91bGQgYmUgbmVnYXRpdmUgZm9yIFJUTCBhbGlnbmVkIGVsZW1lbnRzLlxuICAgICAgICAvLyBUaGlzIGlzIG5vdCB0aGUgY2FzZSBmb3IgYWxsIGJyb3dzZXJzIHRob3VnaCAoZS5nLiBDaHJvbWUgcmVwb3J0cyB2YWx1ZXMgYXMgcG9zaXRpdmUsIG1lYXN1cmVkIHJlbGF0aXZlIHRvIHRoZSBsZWZ0KS5cbiAgICAgICAgLy8gU28gd2UgbmVlZCB0byBkZXRlcm1pbmUgd2hpY2ggYnJvd3NlciBiZWhhdmlvciB3ZSdyZSBkZWFsaW5nIHdpdGgsIGFuZCBtaW1pYyBpdC5cbiAgICAgICAgdmFyIG91dGVyUmVmID0gdGhpcy5fb3V0ZXJSZWY7XG5cbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3J0bCcpIHtcbiAgICAgICAgICBzd2l0Y2ggKGdldFJUTE9mZnNldFR5cGUoKSkge1xuICAgICAgICAgICAgY2FzZSAnbmVnYXRpdmUnOlxuICAgICAgICAgICAgICBvdXRlclJlZi5zY3JvbGxMZWZ0ID0gLXNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdwb3NpdGl2ZS1hc2NlbmRpbmcnOlxuICAgICAgICAgICAgICBvdXRlclJlZi5zY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHZhciBjbGllbnRXaWR0aCA9IG91dGVyUmVmLmNsaWVudFdpZHRoLFxuICAgICAgICAgICAgICAgICAgc2Nyb2xsV2lkdGggPSBvdXRlclJlZi5zY3JvbGxXaWR0aDtcbiAgICAgICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsTGVmdCA9IHNjcm9sbFdpZHRoIC0gY2xpZW50V2lkdGggLSBzY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsTGVmdCA9IE1hdGgubWF4KDAsIHNjcm9sbExlZnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsVG9wID0gTWF0aC5tYXgoMCwgc2Nyb2xsVG9wKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fY2FsbFByb3BzQ2FsbGJhY2tzKCk7XG4gICAgfTtcblxuICAgIF9wcm90by5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgaWYgKHRoaXMuX3Jlc2V0SXNTY3JvbGxpbmdUaW1lb3V0SWQgIT09IG51bGwpIHtcbiAgICAgICAgY2FuY2VsVGltZW91dCh0aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczQgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGNoaWxkcmVuID0gX3RoaXMkcHJvcHM0LmNoaWxkcmVuLFxuICAgICAgICAgIGNsYXNzTmFtZSA9IF90aGlzJHByb3BzNC5jbGFzc05hbWUsXG4gICAgICAgICAgY29sdW1uQ291bnQgPSBfdGhpcyRwcm9wczQuY29sdW1uQ291bnQsXG4gICAgICAgICAgZGlyZWN0aW9uID0gX3RoaXMkcHJvcHM0LmRpcmVjdGlvbixcbiAgICAgICAgICBoZWlnaHQgPSBfdGhpcyRwcm9wczQuaGVpZ2h0LFxuICAgICAgICAgIGlubmVyUmVmID0gX3RoaXMkcHJvcHM0LmlubmVyUmVmLFxuICAgICAgICAgIGlubmVyRWxlbWVudFR5cGUgPSBfdGhpcyRwcm9wczQuaW5uZXJFbGVtZW50VHlwZSxcbiAgICAgICAgICBpbm5lclRhZ05hbWUgPSBfdGhpcyRwcm9wczQuaW5uZXJUYWdOYW1lLFxuICAgICAgICAgIGl0ZW1EYXRhID0gX3RoaXMkcHJvcHM0Lml0ZW1EYXRhLFxuICAgICAgICAgIF90aGlzJHByb3BzNCRpdGVtS2V5ID0gX3RoaXMkcHJvcHM0Lml0ZW1LZXksXG4gICAgICAgICAgaXRlbUtleSA9IF90aGlzJHByb3BzNCRpdGVtS2V5ID09PSB2b2lkIDAgPyBkZWZhdWx0SXRlbUtleSA6IF90aGlzJHByb3BzNCRpdGVtS2V5LFxuICAgICAgICAgIG91dGVyRWxlbWVudFR5cGUgPSBfdGhpcyRwcm9wczQub3V0ZXJFbGVtZW50VHlwZSxcbiAgICAgICAgICBvdXRlclRhZ05hbWUgPSBfdGhpcyRwcm9wczQub3V0ZXJUYWdOYW1lLFxuICAgICAgICAgIHJvd0NvdW50ID0gX3RoaXMkcHJvcHM0LnJvd0NvdW50LFxuICAgICAgICAgIHN0eWxlID0gX3RoaXMkcHJvcHM0LnN0eWxlLFxuICAgICAgICAgIHVzZUlzU2Nyb2xsaW5nID0gX3RoaXMkcHJvcHM0LnVzZUlzU2Nyb2xsaW5nLFxuICAgICAgICAgIHdpZHRoID0gX3RoaXMkcHJvcHM0LndpZHRoO1xuICAgICAgdmFyIGlzU2Nyb2xsaW5nID0gdGhpcy5zdGF0ZS5pc1Njcm9sbGluZztcblxuICAgICAgdmFyIF90aGlzJF9nZXRIb3Jpem9udGFsUiA9IHRoaXMuX2dldEhvcml6b250YWxSYW5nZVRvUmVuZGVyKCksXG4gICAgICAgICAgY29sdW1uU3RhcnRJbmRleCA9IF90aGlzJF9nZXRIb3Jpem9udGFsUlswXSxcbiAgICAgICAgICBjb2x1bW5TdG9wSW5kZXggPSBfdGhpcyRfZ2V0SG9yaXpvbnRhbFJbMV07XG5cbiAgICAgIHZhciBfdGhpcyRfZ2V0VmVydGljYWxSYW4gPSB0aGlzLl9nZXRWZXJ0aWNhbFJhbmdlVG9SZW5kZXIoKSxcbiAgICAgICAgICByb3dTdGFydEluZGV4ID0gX3RoaXMkX2dldFZlcnRpY2FsUmFuWzBdLFxuICAgICAgICAgIHJvd1N0b3BJbmRleCA9IF90aGlzJF9nZXRWZXJ0aWNhbFJhblsxXTtcblxuICAgICAgdmFyIGl0ZW1zID0gW107XG5cbiAgICAgIGlmIChjb2x1bW5Db3VudCA+IDAgJiYgcm93Q291bnQpIHtcbiAgICAgICAgZm9yICh2YXIgX3Jvd0luZGV4ID0gcm93U3RhcnRJbmRleDsgX3Jvd0luZGV4IDw9IHJvd1N0b3BJbmRleDsgX3Jvd0luZGV4KyspIHtcbiAgICAgICAgICBmb3IgKHZhciBfY29sdW1uSW5kZXggPSBjb2x1bW5TdGFydEluZGV4OyBfY29sdW1uSW5kZXggPD0gY29sdW1uU3RvcEluZGV4OyBfY29sdW1uSW5kZXgrKykge1xuICAgICAgICAgICAgaXRlbXMucHVzaChjcmVhdGVFbGVtZW50KGNoaWxkcmVuLCB7XG4gICAgICAgICAgICAgIGNvbHVtbkluZGV4OiBfY29sdW1uSW5kZXgsXG4gICAgICAgICAgICAgIGRhdGE6IGl0ZW1EYXRhLFxuICAgICAgICAgICAgICBpc1Njcm9sbGluZzogdXNlSXNTY3JvbGxpbmcgPyBpc1Njcm9sbGluZyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAga2V5OiBpdGVtS2V5KHtcbiAgICAgICAgICAgICAgICBjb2x1bW5JbmRleDogX2NvbHVtbkluZGV4LFxuICAgICAgICAgICAgICAgIGRhdGE6IGl0ZW1EYXRhLFxuICAgICAgICAgICAgICAgIHJvd0luZGV4OiBfcm93SW5kZXhcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIHJvd0luZGV4OiBfcm93SW5kZXgsXG4gICAgICAgICAgICAgIHN0eWxlOiB0aGlzLl9nZXRJdGVtU3R5bGUoX3Jvd0luZGV4LCBfY29sdW1uSW5kZXgpXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IC8vIFJlYWQgdGhpcyB2YWx1ZSBBRlRFUiBpdGVtcyBoYXZlIGJlZW4gY3JlYXRlZCxcbiAgICAgIC8vIFNvIHRoZWlyIGFjdHVhbCBzaXplcyAoaWYgdmFyaWFibGUpIGFyZSB0YWtlbiBpbnRvIGNvbnNpZGVyYXRpb24uXG5cblxuICAgICAgdmFyIGVzdGltYXRlZFRvdGFsSGVpZ2h0ID0gZ2V0RXN0aW1hdGVkVG90YWxIZWlnaHQodGhpcy5wcm9wcywgdGhpcy5faW5zdGFuY2VQcm9wcyk7XG4gICAgICB2YXIgZXN0aW1hdGVkVG90YWxXaWR0aCA9IGdldEVzdGltYXRlZFRvdGFsV2lkdGgodGhpcy5wcm9wcywgdGhpcy5faW5zdGFuY2VQcm9wcyk7XG4gICAgICByZXR1cm4gY3JlYXRlRWxlbWVudChvdXRlckVsZW1lbnRUeXBlIHx8IG91dGVyVGFnTmFtZSB8fCAnZGl2Jywge1xuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgb25TY3JvbGw6IHRoaXMuX29uU2Nyb2xsLFxuICAgICAgICByZWY6IHRoaXMuX291dGVyUmVmU2V0dGVyLFxuICAgICAgICBzdHlsZTogX2V4dGVuZHMoe1xuICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICBvdmVyZmxvdzogJ2F1dG8nLFxuICAgICAgICAgIFdlYmtpdE92ZXJmbG93U2Nyb2xsaW5nOiAndG91Y2gnLFxuICAgICAgICAgIHdpbGxDaGFuZ2U6ICd0cmFuc2Zvcm0nLFxuICAgICAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uXG4gICAgICAgIH0sIHN0eWxlKVxuICAgICAgfSwgY3JlYXRlRWxlbWVudChpbm5lckVsZW1lbnRUeXBlIHx8IGlubmVyVGFnTmFtZSB8fCAnZGl2Jywge1xuICAgICAgICBjaGlsZHJlbjogaXRlbXMsXG4gICAgICAgIHJlZjogaW5uZXJSZWYsXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgaGVpZ2h0OiBlc3RpbWF0ZWRUb3RhbEhlaWdodCxcbiAgICAgICAgICBwb2ludGVyRXZlbnRzOiBpc1Njcm9sbGluZyA/ICdub25lJyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICB3aWR0aDogZXN0aW1hdGVkVG90YWxXaWR0aFxuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgfTtcblxuICAgIF9wcm90by5fY2FsbFByb3BzQ2FsbGJhY2tzID0gZnVuY3Rpb24gX2NhbGxQcm9wc0NhbGxiYWNrcygpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczUgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGNvbHVtbkNvdW50ID0gX3RoaXMkcHJvcHM1LmNvbHVtbkNvdW50LFxuICAgICAgICAgIG9uSXRlbXNSZW5kZXJlZCA9IF90aGlzJHByb3BzNS5vbkl0ZW1zUmVuZGVyZWQsXG4gICAgICAgICAgb25TY3JvbGwgPSBfdGhpcyRwcm9wczUub25TY3JvbGwsXG4gICAgICAgICAgcm93Q291bnQgPSBfdGhpcyRwcm9wczUucm93Q291bnQ7XG5cbiAgICAgIGlmICh0eXBlb2Ygb25JdGVtc1JlbmRlcmVkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGlmIChjb2x1bW5Db3VudCA+IDAgJiYgcm93Q291bnQgPiAwKSB7XG4gICAgICAgICAgdmFyIF90aGlzJF9nZXRIb3Jpem9udGFsUjIgPSB0aGlzLl9nZXRIb3Jpem9udGFsUmFuZ2VUb1JlbmRlcigpLFxuICAgICAgICAgICAgICBfb3ZlcnNjYW5Db2x1bW5TdGFydEluZGV4ID0gX3RoaXMkX2dldEhvcml6b250YWxSMlswXSxcbiAgICAgICAgICAgICAgX292ZXJzY2FuQ29sdW1uU3RvcEluZGV4ID0gX3RoaXMkX2dldEhvcml6b250YWxSMlsxXSxcbiAgICAgICAgICAgICAgX3Zpc2libGVDb2x1bW5TdGFydEluZGV4ID0gX3RoaXMkX2dldEhvcml6b250YWxSMlsyXSxcbiAgICAgICAgICAgICAgX3Zpc2libGVDb2x1bW5TdG9wSW5kZXggPSBfdGhpcyRfZ2V0SG9yaXpvbnRhbFIyWzNdO1xuXG4gICAgICAgICAgdmFyIF90aGlzJF9nZXRWZXJ0aWNhbFJhbjIgPSB0aGlzLl9nZXRWZXJ0aWNhbFJhbmdlVG9SZW5kZXIoKSxcbiAgICAgICAgICAgICAgX292ZXJzY2FuUm93U3RhcnRJbmRleCA9IF90aGlzJF9nZXRWZXJ0aWNhbFJhbjJbMF0sXG4gICAgICAgICAgICAgIF9vdmVyc2NhblJvd1N0b3BJbmRleCA9IF90aGlzJF9nZXRWZXJ0aWNhbFJhbjJbMV0sXG4gICAgICAgICAgICAgIF92aXNpYmxlUm93U3RhcnRJbmRleCA9IF90aGlzJF9nZXRWZXJ0aWNhbFJhbjJbMl0sXG4gICAgICAgICAgICAgIF92aXNpYmxlUm93U3RvcEluZGV4ID0gX3RoaXMkX2dldFZlcnRpY2FsUmFuMlszXTtcblxuICAgICAgICAgIHRoaXMuX2NhbGxPbkl0ZW1zUmVuZGVyZWQoX292ZXJzY2FuQ29sdW1uU3RhcnRJbmRleCwgX292ZXJzY2FuQ29sdW1uU3RvcEluZGV4LCBfb3ZlcnNjYW5Sb3dTdGFydEluZGV4LCBfb3ZlcnNjYW5Sb3dTdG9wSW5kZXgsIF92aXNpYmxlQ29sdW1uU3RhcnRJbmRleCwgX3Zpc2libGVDb2x1bW5TdG9wSW5kZXgsIF92aXNpYmxlUm93U3RhcnRJbmRleCwgX3Zpc2libGVSb3dTdG9wSW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygb25TY3JvbGwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIF90aGlzJHN0YXRlMyA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICBfaG9yaXpvbnRhbFNjcm9sbERpcmVjdGlvbiA9IF90aGlzJHN0YXRlMy5ob3Jpem9udGFsU2Nyb2xsRGlyZWN0aW9uLFxuICAgICAgICAgICAgX3Njcm9sbExlZnQgPSBfdGhpcyRzdGF0ZTMuc2Nyb2xsTGVmdCxcbiAgICAgICAgICAgIF9zY3JvbGxUb3AgPSBfdGhpcyRzdGF0ZTMuc2Nyb2xsVG9wLFxuICAgICAgICAgICAgX3Njcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZCA9IF90aGlzJHN0YXRlMy5zY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQsXG4gICAgICAgICAgICBfdmVydGljYWxTY3JvbGxEaXJlY3Rpb24gPSBfdGhpcyRzdGF0ZTMudmVydGljYWxTY3JvbGxEaXJlY3Rpb247XG5cbiAgICAgICAgdGhpcy5fY2FsbE9uU2Nyb2xsKF9zY3JvbGxMZWZ0LCBfc2Nyb2xsVG9wLCBfaG9yaXpvbnRhbFNjcm9sbERpcmVjdGlvbiwgX3ZlcnRpY2FsU2Nyb2xsRGlyZWN0aW9uLCBfc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkKTtcbiAgICAgIH1cbiAgICB9OyAvLyBMYXppbHkgY3JlYXRlIGFuZCBjYWNoZSBpdGVtIHN0eWxlcyB3aGlsZSBzY3JvbGxpbmcsXG4gICAgLy8gU28gdGhhdCBwdXJlIGNvbXBvbmVudCBzQ1Ugd2lsbCBwcmV2ZW50IHJlLXJlbmRlcnMuXG4gICAgLy8gV2UgbWFpbnRhaW4gdGhpcyBjYWNoZSwgYW5kIHBhc3MgYSBzdHlsZSBwcm9wIHJhdGhlciB0aGFuIGluZGV4LFxuICAgIC8vIFNvIHRoYXQgTGlzdCBjYW4gY2xlYXIgY2FjaGVkIHN0eWxlcyBhbmQgZm9yY2UgaXRlbSByZS1yZW5kZXIgaWYgbmVjZXNzYXJ5LlxuXG5cbiAgICBfcHJvdG8uX2dldEhvcml6b250YWxSYW5nZVRvUmVuZGVyID0gZnVuY3Rpb24gX2dldEhvcml6b250YWxSYW5nZVRvUmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzNiA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgY29sdW1uQ291bnQgPSBfdGhpcyRwcm9wczYuY29sdW1uQ291bnQsXG4gICAgICAgICAgb3ZlcnNjYW5Db2x1bW5Db3VudCA9IF90aGlzJHByb3BzNi5vdmVyc2NhbkNvbHVtbkNvdW50LFxuICAgICAgICAgIG92ZXJzY2FuQ29sdW1uc0NvdW50ID0gX3RoaXMkcHJvcHM2Lm92ZXJzY2FuQ29sdW1uc0NvdW50LFxuICAgICAgICAgIG92ZXJzY2FuQ291bnQgPSBfdGhpcyRwcm9wczYub3ZlcnNjYW5Db3VudCxcbiAgICAgICAgICByb3dDb3VudCA9IF90aGlzJHByb3BzNi5yb3dDb3VudDtcbiAgICAgIHZhciBfdGhpcyRzdGF0ZTQgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgIGhvcml6b250YWxTY3JvbGxEaXJlY3Rpb24gPSBfdGhpcyRzdGF0ZTQuaG9yaXpvbnRhbFNjcm9sbERpcmVjdGlvbixcbiAgICAgICAgICBpc1Njcm9sbGluZyA9IF90aGlzJHN0YXRlNC5pc1Njcm9sbGluZyxcbiAgICAgICAgICBzY3JvbGxMZWZ0ID0gX3RoaXMkc3RhdGU0LnNjcm9sbExlZnQ7XG4gICAgICB2YXIgb3ZlcnNjYW5Db3VudFJlc29sdmVkID0gb3ZlcnNjYW5Db2x1bW5Db3VudCB8fCBvdmVyc2NhbkNvbHVtbnNDb3VudCB8fCBvdmVyc2NhbkNvdW50IHx8IDE7XG5cbiAgICAgIGlmIChjb2x1bW5Db3VudCA9PT0gMCB8fCByb3dDb3VudCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gWzAsIDAsIDAsIDBdO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3RhcnRJbmRleCA9IGdldENvbHVtblN0YXJ0SW5kZXhGb3JPZmZzZXQodGhpcy5wcm9wcywgc2Nyb2xsTGVmdCwgdGhpcy5faW5zdGFuY2VQcm9wcyk7XG4gICAgICB2YXIgc3RvcEluZGV4ID0gZ2V0Q29sdW1uU3RvcEluZGV4Rm9yU3RhcnRJbmRleCh0aGlzLnByb3BzLCBzdGFydEluZGV4LCBzY3JvbGxMZWZ0LCB0aGlzLl9pbnN0YW5jZVByb3BzKTsgLy8gT3ZlcnNjYW4gYnkgb25lIGl0ZW0gaW4gZWFjaCBkaXJlY3Rpb24gc28gdGhhdCB0YWIvZm9jdXMgd29ya3MuXG4gICAgICAvLyBJZiB0aGVyZSBpc24ndCBhdCBsZWFzdCBvbmUgZXh0cmEgaXRlbSwgdGFiIGxvb3BzIGJhY2sgYXJvdW5kLlxuXG4gICAgICB2YXIgb3ZlcnNjYW5CYWNrd2FyZCA9ICFpc1Njcm9sbGluZyB8fCBob3Jpem9udGFsU2Nyb2xsRGlyZWN0aW9uID09PSAnYmFja3dhcmQnID8gTWF0aC5tYXgoMSwgb3ZlcnNjYW5Db3VudFJlc29sdmVkKSA6IDE7XG4gICAgICB2YXIgb3ZlcnNjYW5Gb3J3YXJkID0gIWlzU2Nyb2xsaW5nIHx8IGhvcml6b250YWxTY3JvbGxEaXJlY3Rpb24gPT09ICdmb3J3YXJkJyA/IE1hdGgubWF4KDEsIG92ZXJzY2FuQ291bnRSZXNvbHZlZCkgOiAxO1xuICAgICAgcmV0dXJuIFtNYXRoLm1heCgwLCBzdGFydEluZGV4IC0gb3ZlcnNjYW5CYWNrd2FyZCksIE1hdGgubWF4KDAsIE1hdGgubWluKGNvbHVtbkNvdW50IC0gMSwgc3RvcEluZGV4ICsgb3ZlcnNjYW5Gb3J3YXJkKSksIHN0YXJ0SW5kZXgsIHN0b3BJbmRleF07XG4gICAgfTtcblxuICAgIF9wcm90by5fZ2V0VmVydGljYWxSYW5nZVRvUmVuZGVyID0gZnVuY3Rpb24gX2dldFZlcnRpY2FsUmFuZ2VUb1JlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczcgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGNvbHVtbkNvdW50ID0gX3RoaXMkcHJvcHM3LmNvbHVtbkNvdW50LFxuICAgICAgICAgIG92ZXJzY2FuQ291bnQgPSBfdGhpcyRwcm9wczcub3ZlcnNjYW5Db3VudCxcbiAgICAgICAgICBvdmVyc2NhblJvd0NvdW50ID0gX3RoaXMkcHJvcHM3Lm92ZXJzY2FuUm93Q291bnQsXG4gICAgICAgICAgb3ZlcnNjYW5Sb3dzQ291bnQgPSBfdGhpcyRwcm9wczcub3ZlcnNjYW5Sb3dzQ291bnQsXG4gICAgICAgICAgcm93Q291bnQgPSBfdGhpcyRwcm9wczcucm93Q291bnQ7XG4gICAgICB2YXIgX3RoaXMkc3RhdGU1ID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICBpc1Njcm9sbGluZyA9IF90aGlzJHN0YXRlNS5pc1Njcm9sbGluZyxcbiAgICAgICAgICB2ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbiA9IF90aGlzJHN0YXRlNS52ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbixcbiAgICAgICAgICBzY3JvbGxUb3AgPSBfdGhpcyRzdGF0ZTUuc2Nyb2xsVG9wO1xuICAgICAgdmFyIG92ZXJzY2FuQ291bnRSZXNvbHZlZCA9IG92ZXJzY2FuUm93Q291bnQgfHwgb3ZlcnNjYW5Sb3dzQ291bnQgfHwgb3ZlcnNjYW5Db3VudCB8fCAxO1xuXG4gICAgICBpZiAoY29sdW1uQ291bnQgPT09IDAgfHwgcm93Q291bnQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFswLCAwLCAwLCAwXTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0YXJ0SW5kZXggPSBnZXRSb3dTdGFydEluZGV4Rm9yT2Zmc2V0KHRoaXMucHJvcHMsIHNjcm9sbFRvcCwgdGhpcy5faW5zdGFuY2VQcm9wcyk7XG4gICAgICB2YXIgc3RvcEluZGV4ID0gZ2V0Um93U3RvcEluZGV4Rm9yU3RhcnRJbmRleCh0aGlzLnByb3BzLCBzdGFydEluZGV4LCBzY3JvbGxUb3AsIHRoaXMuX2luc3RhbmNlUHJvcHMpOyAvLyBPdmVyc2NhbiBieSBvbmUgaXRlbSBpbiBlYWNoIGRpcmVjdGlvbiBzbyB0aGF0IHRhYi9mb2N1cyB3b3Jrcy5cbiAgICAgIC8vIElmIHRoZXJlIGlzbid0IGF0IGxlYXN0IG9uZSBleHRyYSBpdGVtLCB0YWIgbG9vcHMgYmFjayBhcm91bmQuXG5cbiAgICAgIHZhciBvdmVyc2NhbkJhY2t3YXJkID0gIWlzU2Nyb2xsaW5nIHx8IHZlcnRpY2FsU2Nyb2xsRGlyZWN0aW9uID09PSAnYmFja3dhcmQnID8gTWF0aC5tYXgoMSwgb3ZlcnNjYW5Db3VudFJlc29sdmVkKSA6IDE7XG4gICAgICB2YXIgb3ZlcnNjYW5Gb3J3YXJkID0gIWlzU2Nyb2xsaW5nIHx8IHZlcnRpY2FsU2Nyb2xsRGlyZWN0aW9uID09PSAnZm9yd2FyZCcgPyBNYXRoLm1heCgxLCBvdmVyc2NhbkNvdW50UmVzb2x2ZWQpIDogMTtcbiAgICAgIHJldHVybiBbTWF0aC5tYXgoMCwgc3RhcnRJbmRleCAtIG92ZXJzY2FuQmFja3dhcmQpLCBNYXRoLm1heCgwLCBNYXRoLm1pbihyb3dDb3VudCAtIDEsIHN0b3BJbmRleCArIG92ZXJzY2FuRm9yd2FyZCkpLCBzdGFydEluZGV4LCBzdG9wSW5kZXhdO1xuICAgIH07XG5cbiAgICByZXR1cm4gR3JpZDtcbiAgfShQdXJlQ29tcG9uZW50KSwgX2NsYXNzLmRlZmF1bHRQcm9wcyA9IHtcbiAgICBkaXJlY3Rpb246ICdsdHInLFxuICAgIGl0ZW1EYXRhOiB1bmRlZmluZWQsXG4gICAgdXNlSXNTY3JvbGxpbmc6IGZhbHNlXG4gIH0sIF90ZW1wO1xufVxuXG52YXIgdmFsaWRhdGVTaGFyZWRQcm9wcyA9IGZ1bmN0aW9uIHZhbGlkYXRlU2hhcmVkUHJvcHMoX3JlZjUsIF9yZWY2KSB7XG4gIHZhciBjaGlsZHJlbiA9IF9yZWY1LmNoaWxkcmVuLFxuICAgICAgZGlyZWN0aW9uID0gX3JlZjUuZGlyZWN0aW9uLFxuICAgICAgaGVpZ2h0ID0gX3JlZjUuaGVpZ2h0LFxuICAgICAgaW5uZXJUYWdOYW1lID0gX3JlZjUuaW5uZXJUYWdOYW1lLFxuICAgICAgb3V0ZXJUYWdOYW1lID0gX3JlZjUub3V0ZXJUYWdOYW1lLFxuICAgICAgb3ZlcnNjYW5Db2x1bW5zQ291bnQgPSBfcmVmNS5vdmVyc2NhbkNvbHVtbnNDb3VudCxcbiAgICAgIG92ZXJzY2FuQ291bnQgPSBfcmVmNS5vdmVyc2NhbkNvdW50LFxuICAgICAgb3ZlcnNjYW5Sb3dzQ291bnQgPSBfcmVmNS5vdmVyc2NhblJvd3NDb3VudCxcbiAgICAgIHdpZHRoID0gX3JlZjUud2lkdGg7XG4gIHZhciBpbnN0YW5jZSA9IF9yZWY2Lmluc3RhbmNlO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKHR5cGVvZiBvdmVyc2NhbkNvdW50ID09PSAnbnVtYmVyJykge1xuICAgICAgaWYgKGRldldhcm5pbmdzT3ZlcnNjYW5Db3VudCAmJiAhZGV2V2FybmluZ3NPdmVyc2NhbkNvdW50LmhhcyhpbnN0YW5jZSkpIHtcbiAgICAgICAgZGV2V2FybmluZ3NPdmVyc2NhbkNvdW50LmFkZChpbnN0YW5jZSk7XG4gICAgICAgIGNvbnNvbGUud2FybignVGhlIG92ZXJzY2FuQ291bnQgcHJvcCBoYXMgYmVlbiBkZXByZWNhdGVkLiAnICsgJ1BsZWFzZSB1c2UgdGhlIG92ZXJzY2FuQ29sdW1uQ291bnQgYW5kIG92ZXJzY2FuUm93Q291bnQgcHJvcHMgaW5zdGVhZC4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG92ZXJzY2FuQ29sdW1uc0NvdW50ID09PSAnbnVtYmVyJyB8fCB0eXBlb2Ygb3ZlcnNjYW5Sb3dzQ291bnQgPT09ICdudW1iZXInKSB7XG4gICAgICBpZiAoZGV2V2FybmluZ3NPdmVyc2NhblJvd3NDb2x1bW5zQ291bnQgJiYgIWRldldhcm5pbmdzT3ZlcnNjYW5Sb3dzQ29sdW1uc0NvdW50LmhhcyhpbnN0YW5jZSkpIHtcbiAgICAgICAgZGV2V2FybmluZ3NPdmVyc2NhblJvd3NDb2x1bW5zQ291bnQuYWRkKGluc3RhbmNlKTtcbiAgICAgICAgY29uc29sZS53YXJuKCdUaGUgb3ZlcnNjYW5Db2x1bW5zQ291bnQgYW5kIG92ZXJzY2FuUm93c0NvdW50IHByb3BzIGhhdmUgYmVlbiBkZXByZWNhdGVkLiAnICsgJ1BsZWFzZSB1c2UgdGhlIG92ZXJzY2FuQ29sdW1uQ291bnQgYW5kIG92ZXJzY2FuUm93Q291bnQgcHJvcHMgaW5zdGVhZC4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaW5uZXJUYWdOYW1lICE9IG51bGwgfHwgb3V0ZXJUYWdOYW1lICE9IG51bGwpIHtcbiAgICAgIGlmIChkZXZXYXJuaW5nc1RhZ05hbWUgJiYgIWRldldhcm5pbmdzVGFnTmFtZS5oYXMoaW5zdGFuY2UpKSB7XG4gICAgICAgIGRldldhcm5pbmdzVGFnTmFtZS5hZGQoaW5zdGFuY2UpO1xuICAgICAgICBjb25zb2xlLndhcm4oJ1RoZSBpbm5lclRhZ05hbWUgYW5kIG91dGVyVGFnTmFtZSBwcm9wcyBoYXZlIGJlZW4gZGVwcmVjYXRlZC4gJyArICdQbGVhc2UgdXNlIHRoZSBpbm5lckVsZW1lbnRUeXBlIGFuZCBvdXRlckVsZW1lbnRUeXBlIHByb3BzIGluc3RlYWQuJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcbiAgICAgIHRocm93IEVycm9yKCdBbiBpbnZhbGlkIFwiY2hpbGRyZW5cIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdWYWx1ZSBzaG91bGQgYmUgYSBSZWFjdCBjb21wb25lbnQuICcgKyAoXCJcXFwiXCIgKyAoY2hpbGRyZW4gPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgY2hpbGRyZW4pICsgXCJcXFwiIHdhcyBzcGVjaWZpZWQuXCIpKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgY2FzZSAnbHRyJzpcbiAgICAgIGNhc2UgJ3J0bCc6XG4gICAgICAgIC8vIFZhbGlkIHZhbHVlc1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJkaXJlY3Rpb25cIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdWYWx1ZSBzaG91bGQgYmUgZWl0aGVyIFwibHRyXCIgb3IgXCJydGxcIi4gJyArIChcIlxcXCJcIiArIGRpcmVjdGlvbiArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB3aWR0aCAhPT0gJ251bWJlcicpIHtcbiAgICAgIHRocm93IEVycm9yKCdBbiBpbnZhbGlkIFwid2lkdGhcIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdHcmlkcyBtdXN0IHNwZWNpZnkgYSBudW1iZXIgZm9yIHdpZHRoLiAnICsgKFwiXFxcIlwiICsgKHdpZHRoID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIHdpZHRoKSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBoZWlnaHQgIT09ICdudW1iZXInKSB7XG4gICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcImhlaWdodFwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ0dyaWRzIG11c3Qgc3BlY2lmeSBhIG51bWJlciBmb3IgaGVpZ2h0LiAnICsgKFwiXFxcIlwiICsgKGhlaWdodCA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBoZWlnaHQpICsgXCJcXFwiIHdhcyBzcGVjaWZpZWQuXCIpKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBERUZBVUxUX0VTVElNQVRFRF9JVEVNX1NJWkUgPSA1MDtcblxudmFyIGdldEVzdGltYXRlZFRvdGFsSGVpZ2h0ID0gZnVuY3Rpb24gZ2V0RXN0aW1hdGVkVG90YWxIZWlnaHQoX3JlZiwgX3JlZjIpIHtcbiAgdmFyIHJvd0NvdW50ID0gX3JlZi5yb3dDb3VudDtcbiAgdmFyIHJvd01ldGFkYXRhTWFwID0gX3JlZjIucm93TWV0YWRhdGFNYXAsXG4gICAgICBlc3RpbWF0ZWRSb3dIZWlnaHQgPSBfcmVmMi5lc3RpbWF0ZWRSb3dIZWlnaHQsXG4gICAgICBsYXN0TWVhc3VyZWRSb3dJbmRleCA9IF9yZWYyLmxhc3RNZWFzdXJlZFJvd0luZGV4O1xuICB2YXIgdG90YWxTaXplT2ZNZWFzdXJlZFJvd3MgPSAwOyAvLyBFZGdlIGNhc2UgY2hlY2sgZm9yIHdoZW4gdGhlIG51bWJlciBvZiBpdGVtcyBkZWNyZWFzZXMgd2hpbGUgYSBzY3JvbGwgaXMgaW4gcHJvZ3Jlc3MuXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9idmF1Z2huL3JlYWN0LXdpbmRvdy9wdWxsLzEzOFxuXG4gIGlmIChsYXN0TWVhc3VyZWRSb3dJbmRleCA+PSByb3dDb3VudCkge1xuICAgIGxhc3RNZWFzdXJlZFJvd0luZGV4ID0gcm93Q291bnQgLSAxO1xuICB9XG5cbiAgaWYgKGxhc3RNZWFzdXJlZFJvd0luZGV4ID49IDApIHtcbiAgICB2YXIgaXRlbU1ldGFkYXRhID0gcm93TWV0YWRhdGFNYXBbbGFzdE1lYXN1cmVkUm93SW5kZXhdO1xuICAgIHRvdGFsU2l6ZU9mTWVhc3VyZWRSb3dzID0gaXRlbU1ldGFkYXRhLm9mZnNldCArIGl0ZW1NZXRhZGF0YS5zaXplO1xuICB9XG5cbiAgdmFyIG51bVVubWVhc3VyZWRJdGVtcyA9IHJvd0NvdW50IC0gbGFzdE1lYXN1cmVkUm93SW5kZXggLSAxO1xuICB2YXIgdG90YWxTaXplT2ZVbm1lYXN1cmVkSXRlbXMgPSBudW1Vbm1lYXN1cmVkSXRlbXMgKiBlc3RpbWF0ZWRSb3dIZWlnaHQ7XG4gIHJldHVybiB0b3RhbFNpemVPZk1lYXN1cmVkUm93cyArIHRvdGFsU2l6ZU9mVW5tZWFzdXJlZEl0ZW1zO1xufTtcblxudmFyIGdldEVzdGltYXRlZFRvdGFsV2lkdGggPSBmdW5jdGlvbiBnZXRFc3RpbWF0ZWRUb3RhbFdpZHRoKF9yZWYzLCBfcmVmNCkge1xuICB2YXIgY29sdW1uQ291bnQgPSBfcmVmMy5jb2x1bW5Db3VudDtcbiAgdmFyIGNvbHVtbk1ldGFkYXRhTWFwID0gX3JlZjQuY29sdW1uTWV0YWRhdGFNYXAsXG4gICAgICBlc3RpbWF0ZWRDb2x1bW5XaWR0aCA9IF9yZWY0LmVzdGltYXRlZENvbHVtbldpZHRoLFxuICAgICAgbGFzdE1lYXN1cmVkQ29sdW1uSW5kZXggPSBfcmVmNC5sYXN0TWVhc3VyZWRDb2x1bW5JbmRleDtcbiAgdmFyIHRvdGFsU2l6ZU9mTWVhc3VyZWRSb3dzID0gMDsgLy8gRWRnZSBjYXNlIGNoZWNrIGZvciB3aGVuIHRoZSBudW1iZXIgb2YgaXRlbXMgZGVjcmVhc2VzIHdoaWxlIGEgc2Nyb2xsIGlzIGluIHByb2dyZXNzLlxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vYnZhdWdobi9yZWFjdC13aW5kb3cvcHVsbC8xMzhcblxuICBpZiAobGFzdE1lYXN1cmVkQ29sdW1uSW5kZXggPj0gY29sdW1uQ291bnQpIHtcbiAgICBsYXN0TWVhc3VyZWRDb2x1bW5JbmRleCA9IGNvbHVtbkNvdW50IC0gMTtcbiAgfVxuXG4gIGlmIChsYXN0TWVhc3VyZWRDb2x1bW5JbmRleCA+PSAwKSB7XG4gICAgdmFyIGl0ZW1NZXRhZGF0YSA9IGNvbHVtbk1ldGFkYXRhTWFwW2xhc3RNZWFzdXJlZENvbHVtbkluZGV4XTtcbiAgICB0b3RhbFNpemVPZk1lYXN1cmVkUm93cyA9IGl0ZW1NZXRhZGF0YS5vZmZzZXQgKyBpdGVtTWV0YWRhdGEuc2l6ZTtcbiAgfVxuXG4gIHZhciBudW1Vbm1lYXN1cmVkSXRlbXMgPSBjb2x1bW5Db3VudCAtIGxhc3RNZWFzdXJlZENvbHVtbkluZGV4IC0gMTtcbiAgdmFyIHRvdGFsU2l6ZU9mVW5tZWFzdXJlZEl0ZW1zID0gbnVtVW5tZWFzdXJlZEl0ZW1zICogZXN0aW1hdGVkQ29sdW1uV2lkdGg7XG4gIHJldHVybiB0b3RhbFNpemVPZk1lYXN1cmVkUm93cyArIHRvdGFsU2l6ZU9mVW5tZWFzdXJlZEl0ZW1zO1xufTtcblxudmFyIGdldEl0ZW1NZXRhZGF0YSA9IGZ1bmN0aW9uIGdldEl0ZW1NZXRhZGF0YShpdGVtVHlwZSwgcHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKSB7XG4gIHZhciBpdGVtTWV0YWRhdGFNYXAsIGl0ZW1TaXplLCBsYXN0TWVhc3VyZWRJbmRleDtcblxuICBpZiAoaXRlbVR5cGUgPT09ICdjb2x1bW4nKSB7XG4gICAgaXRlbU1ldGFkYXRhTWFwID0gaW5zdGFuY2VQcm9wcy5jb2x1bW5NZXRhZGF0YU1hcDtcbiAgICBpdGVtU2l6ZSA9IHByb3BzLmNvbHVtbldpZHRoO1xuICAgIGxhc3RNZWFzdXJlZEluZGV4ID0gaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRDb2x1bW5JbmRleDtcbiAgfSBlbHNlIHtcbiAgICBpdGVtTWV0YWRhdGFNYXAgPSBpbnN0YW5jZVByb3BzLnJvd01ldGFkYXRhTWFwO1xuICAgIGl0ZW1TaXplID0gcHJvcHMucm93SGVpZ2h0O1xuICAgIGxhc3RNZWFzdXJlZEluZGV4ID0gaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRSb3dJbmRleDtcbiAgfVxuXG4gIGlmIChpbmRleCA+IGxhc3RNZWFzdXJlZEluZGV4KSB7XG4gICAgdmFyIG9mZnNldCA9IDA7XG5cbiAgICBpZiAobGFzdE1lYXN1cmVkSW5kZXggPj0gMCkge1xuICAgICAgdmFyIGl0ZW1NZXRhZGF0YSA9IGl0ZW1NZXRhZGF0YU1hcFtsYXN0TWVhc3VyZWRJbmRleF07XG4gICAgICBvZmZzZXQgPSBpdGVtTWV0YWRhdGEub2Zmc2V0ICsgaXRlbU1ldGFkYXRhLnNpemU7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IGxhc3RNZWFzdXJlZEluZGV4ICsgMTsgaSA8PSBpbmRleDsgaSsrKSB7XG4gICAgICB2YXIgc2l6ZSA9IGl0ZW1TaXplKGkpO1xuICAgICAgaXRlbU1ldGFkYXRhTWFwW2ldID0ge1xuICAgICAgICBvZmZzZXQ6IG9mZnNldCxcbiAgICAgICAgc2l6ZTogc2l6ZVxuICAgICAgfTtcbiAgICAgIG9mZnNldCArPSBzaXplO1xuICAgIH1cblxuICAgIGlmIChpdGVtVHlwZSA9PT0gJ2NvbHVtbicpIHtcbiAgICAgIGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkQ29sdW1uSW5kZXggPSBpbmRleDtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRSb3dJbmRleCA9IGluZGV4O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpdGVtTWV0YWRhdGFNYXBbaW5kZXhdO1xufTtcblxudmFyIGZpbmROZWFyZXN0SXRlbSA9IGZ1bmN0aW9uIGZpbmROZWFyZXN0SXRlbShpdGVtVHlwZSwgcHJvcHMsIGluc3RhbmNlUHJvcHMsIG9mZnNldCkge1xuICB2YXIgaXRlbU1ldGFkYXRhTWFwLCBsYXN0TWVhc3VyZWRJbmRleDtcblxuICBpZiAoaXRlbVR5cGUgPT09ICdjb2x1bW4nKSB7XG4gICAgaXRlbU1ldGFkYXRhTWFwID0gaW5zdGFuY2VQcm9wcy5jb2x1bW5NZXRhZGF0YU1hcDtcbiAgICBsYXN0TWVhc3VyZWRJbmRleCA9IGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkQ29sdW1uSW5kZXg7XG4gIH0gZWxzZSB7XG4gICAgaXRlbU1ldGFkYXRhTWFwID0gaW5zdGFuY2VQcm9wcy5yb3dNZXRhZGF0YU1hcDtcbiAgICBsYXN0TWVhc3VyZWRJbmRleCA9IGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkUm93SW5kZXg7XG4gIH1cblxuICB2YXIgbGFzdE1lYXN1cmVkSXRlbU9mZnNldCA9IGxhc3RNZWFzdXJlZEluZGV4ID4gMCA/IGl0ZW1NZXRhZGF0YU1hcFtsYXN0TWVhc3VyZWRJbmRleF0ub2Zmc2V0IDogMDtcblxuICBpZiAobGFzdE1lYXN1cmVkSXRlbU9mZnNldCA+PSBvZmZzZXQpIHtcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IG1lYXN1cmVkIGl0ZW1zIHdpdGhpbiB0aGlzIHJhbmdlIGp1c3QgdXNlIGEgYmluYXJ5IHNlYXJjaCBhcyBpdCdzIGZhc3Rlci5cbiAgICByZXR1cm4gZmluZE5lYXJlc3RJdGVtQmluYXJ5U2VhcmNoKGl0ZW1UeXBlLCBwcm9wcywgaW5zdGFuY2VQcm9wcywgbGFzdE1lYXN1cmVkSW5kZXgsIDAsIG9mZnNldCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gSWYgd2UgaGF2ZW4ndCB5ZXQgbWVhc3VyZWQgdGhpcyBoaWdoLCBmYWxsYmFjayB0byBhbiBleHBvbmVudGlhbCBzZWFyY2ggd2l0aCBhbiBpbm5lciBiaW5hcnkgc2VhcmNoLlxuICAgIC8vIFRoZSBleHBvbmVudGlhbCBzZWFyY2ggYXZvaWRzIHByZS1jb21wdXRpbmcgc2l6ZXMgZm9yIHRoZSBmdWxsIHNldCBvZiBpdGVtcyBhcyBhIGJpbmFyeSBzZWFyY2ggd291bGQuXG4gICAgLy8gVGhlIG92ZXJhbGwgY29tcGxleGl0eSBmb3IgdGhpcyBhcHByb2FjaCBpcyBPKGxvZyBuKS5cbiAgICByZXR1cm4gZmluZE5lYXJlc3RJdGVtRXhwb25lbnRpYWxTZWFyY2goaXRlbVR5cGUsIHByb3BzLCBpbnN0YW5jZVByb3BzLCBNYXRoLm1heCgwLCBsYXN0TWVhc3VyZWRJbmRleCksIG9mZnNldCk7XG4gIH1cbn07XG5cbnZhciBmaW5kTmVhcmVzdEl0ZW1CaW5hcnlTZWFyY2ggPSBmdW5jdGlvbiBmaW5kTmVhcmVzdEl0ZW1CaW5hcnlTZWFyY2goaXRlbVR5cGUsIHByb3BzLCBpbnN0YW5jZVByb3BzLCBoaWdoLCBsb3csIG9mZnNldCkge1xuICB3aGlsZSAobG93IDw9IGhpZ2gpIHtcbiAgICB2YXIgbWlkZGxlID0gbG93ICsgTWF0aC5mbG9vcigoaGlnaCAtIGxvdykgLyAyKTtcbiAgICB2YXIgY3VycmVudE9mZnNldCA9IGdldEl0ZW1NZXRhZGF0YShpdGVtVHlwZSwgcHJvcHMsIG1pZGRsZSwgaW5zdGFuY2VQcm9wcykub2Zmc2V0O1xuXG4gICAgaWYgKGN1cnJlbnRPZmZzZXQgPT09IG9mZnNldCkge1xuICAgICAgcmV0dXJuIG1pZGRsZTtcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRPZmZzZXQgPCBvZmZzZXQpIHtcbiAgICAgIGxvdyA9IG1pZGRsZSArIDE7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50T2Zmc2V0ID4gb2Zmc2V0KSB7XG4gICAgICBoaWdoID0gbWlkZGxlIC0gMTtcbiAgICB9XG4gIH1cblxuICBpZiAobG93ID4gMCkge1xuICAgIHJldHVybiBsb3cgLSAxO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAwO1xuICB9XG59O1xuXG52YXIgZmluZE5lYXJlc3RJdGVtRXhwb25lbnRpYWxTZWFyY2ggPSBmdW5jdGlvbiBmaW5kTmVhcmVzdEl0ZW1FeHBvbmVudGlhbFNlYXJjaChpdGVtVHlwZSwgcHJvcHMsIGluc3RhbmNlUHJvcHMsIGluZGV4LCBvZmZzZXQpIHtcbiAgdmFyIGl0ZW1Db3VudCA9IGl0ZW1UeXBlID09PSAnY29sdW1uJyA/IHByb3BzLmNvbHVtbkNvdW50IDogcHJvcHMucm93Q291bnQ7XG4gIHZhciBpbnRlcnZhbCA9IDE7XG5cbiAgd2hpbGUgKGluZGV4IDwgaXRlbUNvdW50ICYmIGdldEl0ZW1NZXRhZGF0YShpdGVtVHlwZSwgcHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKS5vZmZzZXQgPCBvZmZzZXQpIHtcbiAgICBpbmRleCArPSBpbnRlcnZhbDtcbiAgICBpbnRlcnZhbCAqPSAyO1xuICB9XG5cbiAgcmV0dXJuIGZpbmROZWFyZXN0SXRlbUJpbmFyeVNlYXJjaChpdGVtVHlwZSwgcHJvcHMsIGluc3RhbmNlUHJvcHMsIE1hdGgubWluKGluZGV4LCBpdGVtQ291bnQgLSAxKSwgTWF0aC5mbG9vcihpbmRleCAvIDIpLCBvZmZzZXQpO1xufTtcblxudmFyIGdldE9mZnNldEZvckluZGV4QW5kQWxpZ25tZW50ID0gZnVuY3Rpb24gZ2V0T2Zmc2V0Rm9ySW5kZXhBbmRBbGlnbm1lbnQoaXRlbVR5cGUsIHByb3BzLCBpbmRleCwgYWxpZ24sIHNjcm9sbE9mZnNldCwgaW5zdGFuY2VQcm9wcywgc2Nyb2xsYmFyU2l6ZSkge1xuICB2YXIgc2l6ZSA9IGl0ZW1UeXBlID09PSAnY29sdW1uJyA/IHByb3BzLndpZHRoIDogcHJvcHMuaGVpZ2h0O1xuICB2YXIgaXRlbU1ldGFkYXRhID0gZ2V0SXRlbU1ldGFkYXRhKGl0ZW1UeXBlLCBwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpOyAvLyBHZXQgZXN0aW1hdGVkIHRvdGFsIHNpemUgYWZ0ZXIgSXRlbU1ldGFkYXRhIGlzIGNvbXB1dGVkLFxuICAvLyBUbyBlbnN1cmUgaXQgcmVmbGVjdHMgYWN0dWFsIG1lYXN1cmVtZW50cyBpbnN0ZWFkIG9mIGp1c3QgZXN0aW1hdGVzLlxuXG4gIHZhciBlc3RpbWF0ZWRUb3RhbFNpemUgPSBpdGVtVHlwZSA9PT0gJ2NvbHVtbicgPyBnZXRFc3RpbWF0ZWRUb3RhbFdpZHRoKHByb3BzLCBpbnN0YW5jZVByb3BzKSA6IGdldEVzdGltYXRlZFRvdGFsSGVpZ2h0KHByb3BzLCBpbnN0YW5jZVByb3BzKTtcbiAgdmFyIG1heE9mZnNldCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGVzdGltYXRlZFRvdGFsU2l6ZSAtIHNpemUsIGl0ZW1NZXRhZGF0YS5vZmZzZXQpKTtcbiAgdmFyIG1pbk9mZnNldCA9IE1hdGgubWF4KDAsIGl0ZW1NZXRhZGF0YS5vZmZzZXQgLSBzaXplICsgc2Nyb2xsYmFyU2l6ZSArIGl0ZW1NZXRhZGF0YS5zaXplKTtcblxuICBpZiAoYWxpZ24gPT09ICdzbWFydCcpIHtcbiAgICBpZiAoc2Nyb2xsT2Zmc2V0ID49IG1pbk9mZnNldCAtIHNpemUgJiYgc2Nyb2xsT2Zmc2V0IDw9IG1heE9mZnNldCArIHNpemUpIHtcbiAgICAgIGFsaWduID0gJ2F1dG8nO1xuICAgIH0gZWxzZSB7XG4gICAgICBhbGlnbiA9ICdjZW50ZXInO1xuICAgIH1cbiAgfVxuXG4gIHN3aXRjaCAoYWxpZ24pIHtcbiAgICBjYXNlICdzdGFydCc6XG4gICAgICByZXR1cm4gbWF4T2Zmc2V0O1xuXG4gICAgY2FzZSAnZW5kJzpcbiAgICAgIHJldHVybiBtaW5PZmZzZXQ7XG5cbiAgICBjYXNlICdjZW50ZXInOlxuICAgICAgcmV0dXJuIE1hdGgucm91bmQobWluT2Zmc2V0ICsgKG1heE9mZnNldCAtIG1pbk9mZnNldCkgLyAyKTtcblxuICAgIGNhc2UgJ2F1dG8nOlxuICAgIGRlZmF1bHQ6XG4gICAgICBpZiAoc2Nyb2xsT2Zmc2V0ID49IG1pbk9mZnNldCAmJiBzY3JvbGxPZmZzZXQgPD0gbWF4T2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiBzY3JvbGxPZmZzZXQ7XG4gICAgICB9IGVsc2UgaWYgKG1pbk9mZnNldCA+IG1heE9mZnNldCkge1xuICAgICAgICAvLyBCZWNhdXNlIHdlIG9ubHkgdGFrZSBpbnRvIGFjY291bnQgdGhlIHNjcm9sbGJhciBzaXplIHdoZW4gY2FsY3VsYXRpbmcgbWluT2Zmc2V0XG4gICAgICAgIC8vIHRoaXMgdmFsdWUgY2FuIGJlIGxhcmdlciB0aGFuIG1heE9mZnNldCB3aGVuIGF0IHRoZSBlbmQgb2YgdGhlIGxpc3RcbiAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcbiAgICAgIH0gZWxzZSBpZiAoc2Nyb2xsT2Zmc2V0IDwgbWluT2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiBtaW5PZmZzZXQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbWF4T2Zmc2V0O1xuICAgICAgfVxuXG4gIH1cbn07XG5cbnZhciBWYXJpYWJsZVNpemVHcmlkID1cbi8qI19fUFVSRV9fKi9cbmNyZWF0ZUdyaWRDb21wb25lbnQoe1xuICBnZXRDb2x1bW5PZmZzZXQ6IGZ1bmN0aW9uIGdldENvbHVtbk9mZnNldChwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpIHtcbiAgICByZXR1cm4gZ2V0SXRlbU1ldGFkYXRhKCdjb2x1bW4nLCBwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpLm9mZnNldDtcbiAgfSxcbiAgZ2V0Q29sdW1uU3RhcnRJbmRleEZvck9mZnNldDogZnVuY3Rpb24gZ2V0Q29sdW1uU3RhcnRJbmRleEZvck9mZnNldChwcm9wcywgc2Nyb2xsTGVmdCwgaW5zdGFuY2VQcm9wcykge1xuICAgIHJldHVybiBmaW5kTmVhcmVzdEl0ZW0oJ2NvbHVtbicsIHByb3BzLCBpbnN0YW5jZVByb3BzLCBzY3JvbGxMZWZ0KTtcbiAgfSxcbiAgZ2V0Q29sdW1uU3RvcEluZGV4Rm9yU3RhcnRJbmRleDogZnVuY3Rpb24gZ2V0Q29sdW1uU3RvcEluZGV4Rm9yU3RhcnRJbmRleChwcm9wcywgc3RhcnRJbmRleCwgc2Nyb2xsTGVmdCwgaW5zdGFuY2VQcm9wcykge1xuICAgIHZhciBjb2x1bW5Db3VudCA9IHByb3BzLmNvbHVtbkNvdW50LFxuICAgICAgICB3aWR0aCA9IHByb3BzLndpZHRoO1xuICAgIHZhciBpdGVtTWV0YWRhdGEgPSBnZXRJdGVtTWV0YWRhdGEoJ2NvbHVtbicsIHByb3BzLCBzdGFydEluZGV4LCBpbnN0YW5jZVByb3BzKTtcbiAgICB2YXIgbWF4T2Zmc2V0ID0gc2Nyb2xsTGVmdCArIHdpZHRoO1xuICAgIHZhciBvZmZzZXQgPSBpdGVtTWV0YWRhdGEub2Zmc2V0ICsgaXRlbU1ldGFkYXRhLnNpemU7XG4gICAgdmFyIHN0b3BJbmRleCA9IHN0YXJ0SW5kZXg7XG5cbiAgICB3aGlsZSAoc3RvcEluZGV4IDwgY29sdW1uQ291bnQgLSAxICYmIG9mZnNldCA8IG1heE9mZnNldCkge1xuICAgICAgc3RvcEluZGV4Kys7XG4gICAgICBvZmZzZXQgKz0gZ2V0SXRlbU1ldGFkYXRhKCdjb2x1bW4nLCBwcm9wcywgc3RvcEluZGV4LCBpbnN0YW5jZVByb3BzKS5zaXplO1xuICAgIH1cblxuICAgIHJldHVybiBzdG9wSW5kZXg7XG4gIH0sXG4gIGdldENvbHVtbldpZHRoOiBmdW5jdGlvbiBnZXRDb2x1bW5XaWR0aChwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpIHtcbiAgICByZXR1cm4gaW5zdGFuY2VQcm9wcy5jb2x1bW5NZXRhZGF0YU1hcFtpbmRleF0uc2l6ZTtcbiAgfSxcbiAgZ2V0RXN0aW1hdGVkVG90YWxIZWlnaHQ6IGdldEVzdGltYXRlZFRvdGFsSGVpZ2h0LFxuICBnZXRFc3RpbWF0ZWRUb3RhbFdpZHRoOiBnZXRFc3RpbWF0ZWRUb3RhbFdpZHRoLFxuICBnZXRPZmZzZXRGb3JDb2x1bW5BbmRBbGlnbm1lbnQ6IGZ1bmN0aW9uIGdldE9mZnNldEZvckNvbHVtbkFuZEFsaWdubWVudChwcm9wcywgaW5kZXgsIGFsaWduLCBzY3JvbGxPZmZzZXQsIGluc3RhbmNlUHJvcHMsIHNjcm9sbGJhclNpemUpIHtcbiAgICByZXR1cm4gZ2V0T2Zmc2V0Rm9ySW5kZXhBbmRBbGlnbm1lbnQoJ2NvbHVtbicsIHByb3BzLCBpbmRleCwgYWxpZ24sIHNjcm9sbE9mZnNldCwgaW5zdGFuY2VQcm9wcywgc2Nyb2xsYmFyU2l6ZSk7XG4gIH0sXG4gIGdldE9mZnNldEZvclJvd0FuZEFsaWdubWVudDogZnVuY3Rpb24gZ2V0T2Zmc2V0Rm9yUm93QW5kQWxpZ25tZW50KHByb3BzLCBpbmRleCwgYWxpZ24sIHNjcm9sbE9mZnNldCwgaW5zdGFuY2VQcm9wcywgc2Nyb2xsYmFyU2l6ZSkge1xuICAgIHJldHVybiBnZXRPZmZzZXRGb3JJbmRleEFuZEFsaWdubWVudCgncm93JywgcHJvcHMsIGluZGV4LCBhbGlnbiwgc2Nyb2xsT2Zmc2V0LCBpbnN0YW5jZVByb3BzLCBzY3JvbGxiYXJTaXplKTtcbiAgfSxcbiAgZ2V0Um93T2Zmc2V0OiBmdW5jdGlvbiBnZXRSb3dPZmZzZXQocHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKSB7XG4gICAgcmV0dXJuIGdldEl0ZW1NZXRhZGF0YSgncm93JywgcHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKS5vZmZzZXQ7XG4gIH0sXG4gIGdldFJvd0hlaWdodDogZnVuY3Rpb24gZ2V0Um93SGVpZ2h0KHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykge1xuICAgIHJldHVybiBpbnN0YW5jZVByb3BzLnJvd01ldGFkYXRhTWFwW2luZGV4XS5zaXplO1xuICB9LFxuICBnZXRSb3dTdGFydEluZGV4Rm9yT2Zmc2V0OiBmdW5jdGlvbiBnZXRSb3dTdGFydEluZGV4Rm9yT2Zmc2V0KHByb3BzLCBzY3JvbGxUb3AsIGluc3RhbmNlUHJvcHMpIHtcbiAgICByZXR1cm4gZmluZE5lYXJlc3RJdGVtKCdyb3cnLCBwcm9wcywgaW5zdGFuY2VQcm9wcywgc2Nyb2xsVG9wKTtcbiAgfSxcbiAgZ2V0Um93U3RvcEluZGV4Rm9yU3RhcnRJbmRleDogZnVuY3Rpb24gZ2V0Um93U3RvcEluZGV4Rm9yU3RhcnRJbmRleChwcm9wcywgc3RhcnRJbmRleCwgc2Nyb2xsVG9wLCBpbnN0YW5jZVByb3BzKSB7XG4gICAgdmFyIHJvd0NvdW50ID0gcHJvcHMucm93Q291bnQsXG4gICAgICAgIGhlaWdodCA9IHByb3BzLmhlaWdodDtcbiAgICB2YXIgaXRlbU1ldGFkYXRhID0gZ2V0SXRlbU1ldGFkYXRhKCdyb3cnLCBwcm9wcywgc3RhcnRJbmRleCwgaW5zdGFuY2VQcm9wcyk7XG4gICAgdmFyIG1heE9mZnNldCA9IHNjcm9sbFRvcCArIGhlaWdodDtcbiAgICB2YXIgb2Zmc2V0ID0gaXRlbU1ldGFkYXRhLm9mZnNldCArIGl0ZW1NZXRhZGF0YS5zaXplO1xuICAgIHZhciBzdG9wSW5kZXggPSBzdGFydEluZGV4O1xuXG4gICAgd2hpbGUgKHN0b3BJbmRleCA8IHJvd0NvdW50IC0gMSAmJiBvZmZzZXQgPCBtYXhPZmZzZXQpIHtcbiAgICAgIHN0b3BJbmRleCsrO1xuICAgICAgb2Zmc2V0ICs9IGdldEl0ZW1NZXRhZGF0YSgncm93JywgcHJvcHMsIHN0b3BJbmRleCwgaW5zdGFuY2VQcm9wcykuc2l6ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RvcEluZGV4O1xuICB9LFxuICBpbml0SW5zdGFuY2VQcm9wczogZnVuY3Rpb24gaW5pdEluc3RhbmNlUHJvcHMocHJvcHMsIGluc3RhbmNlKSB7XG4gICAgdmFyIF9yZWY1ID0gcHJvcHMsXG4gICAgICAgIGVzdGltYXRlZENvbHVtbldpZHRoID0gX3JlZjUuZXN0aW1hdGVkQ29sdW1uV2lkdGgsXG4gICAgICAgIGVzdGltYXRlZFJvd0hlaWdodCA9IF9yZWY1LmVzdGltYXRlZFJvd0hlaWdodDtcbiAgICB2YXIgaW5zdGFuY2VQcm9wcyA9IHtcbiAgICAgIGNvbHVtbk1ldGFkYXRhTWFwOiB7fSxcbiAgICAgIGVzdGltYXRlZENvbHVtbldpZHRoOiBlc3RpbWF0ZWRDb2x1bW5XaWR0aCB8fCBERUZBVUxUX0VTVElNQVRFRF9JVEVNX1NJWkUsXG4gICAgICBlc3RpbWF0ZWRSb3dIZWlnaHQ6IGVzdGltYXRlZFJvd0hlaWdodCB8fCBERUZBVUxUX0VTVElNQVRFRF9JVEVNX1NJWkUsXG4gICAgICBsYXN0TWVhc3VyZWRDb2x1bW5JbmRleDogLTEsXG4gICAgICBsYXN0TWVhc3VyZWRSb3dJbmRleDogLTEsXG4gICAgICByb3dNZXRhZGF0YU1hcDoge31cbiAgICB9O1xuXG4gICAgaW5zdGFuY2UucmVzZXRBZnRlckNvbHVtbkluZGV4ID0gZnVuY3Rpb24gKGNvbHVtbkluZGV4LCBzaG91bGRGb3JjZVVwZGF0ZSkge1xuICAgICAgaWYgKHNob3VsZEZvcmNlVXBkYXRlID09PSB2b2lkIDApIHtcbiAgICAgICAgc2hvdWxkRm9yY2VVcGRhdGUgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpbnN0YW5jZS5yZXNldEFmdGVySW5kaWNlcyh7XG4gICAgICAgIGNvbHVtbkluZGV4OiBjb2x1bW5JbmRleCxcbiAgICAgICAgc2hvdWxkRm9yY2VVcGRhdGU6IHNob3VsZEZvcmNlVXBkYXRlXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgaW5zdGFuY2UucmVzZXRBZnRlclJvd0luZGV4ID0gZnVuY3Rpb24gKHJvd0luZGV4LCBzaG91bGRGb3JjZVVwZGF0ZSkge1xuICAgICAgaWYgKHNob3VsZEZvcmNlVXBkYXRlID09PSB2b2lkIDApIHtcbiAgICAgICAgc2hvdWxkRm9yY2VVcGRhdGUgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpbnN0YW5jZS5yZXNldEFmdGVySW5kaWNlcyh7XG4gICAgICAgIHJvd0luZGV4OiByb3dJbmRleCxcbiAgICAgICAgc2hvdWxkRm9yY2VVcGRhdGU6IHNob3VsZEZvcmNlVXBkYXRlXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgaW5zdGFuY2UucmVzZXRBZnRlckluZGljZXMgPSBmdW5jdGlvbiAoX3JlZjYpIHtcbiAgICAgIHZhciBjb2x1bW5JbmRleCA9IF9yZWY2LmNvbHVtbkluZGV4LFxuICAgICAgICAgIHJvd0luZGV4ID0gX3JlZjYucm93SW5kZXgsXG4gICAgICAgICAgX3JlZjYkc2hvdWxkRm9yY2VVcGRhID0gX3JlZjYuc2hvdWxkRm9yY2VVcGRhdGUsXG4gICAgICAgICAgc2hvdWxkRm9yY2VVcGRhdGUgPSBfcmVmNiRzaG91bGRGb3JjZVVwZGEgPT09IHZvaWQgMCA/IHRydWUgOiBfcmVmNiRzaG91bGRGb3JjZVVwZGE7XG5cbiAgICAgIGlmICh0eXBlb2YgY29sdW1uSW5kZXggPT09ICdudW1iZXInKSB7XG4gICAgICAgIGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkQ29sdW1uSW5kZXggPSBNYXRoLm1pbihpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZENvbHVtbkluZGV4LCBjb2x1bW5JbmRleCAtIDEpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHJvd0luZGV4ID09PSAnbnVtYmVyJykge1xuICAgICAgICBpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZFJvd0luZGV4ID0gTWF0aC5taW4oaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRSb3dJbmRleCwgcm93SW5kZXggLSAxKTtcbiAgICAgIH0gLy8gV2UgY291bGQgcG90ZW50aWFsbHkgb3B0aW1pemUgZnVydGhlciBieSBvbmx5IGV2aWN0aW5nIHN0eWxlcyBhZnRlciB0aGlzIGluZGV4LFxuICAgICAgLy8gQnV0IHNpbmNlIHN0eWxlcyBhcmUgb25seSBjYWNoZWQgd2hpbGUgc2Nyb2xsaW5nIGlzIGluIHByb2dyZXNzLVxuICAgICAgLy8gSXQgc2VlbXMgYW4gdW5uZWNlc3Nhcnkgb3B0aW1pemF0aW9uLlxuICAgICAgLy8gSXQncyB1bmxpa2VseSB0aGF0IHJlc2V0QWZ0ZXJJbmRleCgpIHdpbGwgYmUgY2FsbGVkIHdoaWxlIGEgdXNlciBpcyBzY3JvbGxpbmcuXG5cblxuICAgICAgaW5zdGFuY2UuX2dldEl0ZW1TdHlsZUNhY2hlKC0xKTtcblxuICAgICAgaWYgKHNob3VsZEZvcmNlVXBkYXRlKSB7XG4gICAgICAgIGluc3RhbmNlLmZvcmNlVXBkYXRlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBpbnN0YW5jZVByb3BzO1xuICB9LFxuICBzaG91bGRSZXNldFN0eWxlQ2FjaGVPbkl0ZW1TaXplQ2hhbmdlOiBmYWxzZSxcbiAgdmFsaWRhdGVQcm9wczogZnVuY3Rpb24gdmFsaWRhdGVQcm9wcyhfcmVmNykge1xuICAgIHZhciBjb2x1bW5XaWR0aCA9IF9yZWY3LmNvbHVtbldpZHRoLFxuICAgICAgICByb3dIZWlnaHQgPSBfcmVmNy5yb3dIZWlnaHQ7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKHR5cGVvZiBjb2x1bW5XaWR0aCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcImNvbHVtbldpZHRoXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmFsdWUgc2hvdWxkIGJlIGEgZnVuY3Rpb24uICcgKyAoXCJcXFwiXCIgKyAoY29sdW1uV2lkdGggPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgY29sdW1uV2lkdGgpICsgXCJcXFwiIHdhcyBzcGVjaWZpZWQuXCIpKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJvd0hlaWdodCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcInJvd0hlaWdodFwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ1ZhbHVlIHNob3VsZCBiZSBhIGZ1bmN0aW9uLiAnICsgKFwiXFxcIlwiICsgKHJvd0hlaWdodCA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiByb3dIZWlnaHQpICsgXCJcXFwiIHdhcyBzcGVjaWZpZWQuXCIpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pO1xuXG52YXIgSVNfU0NST0xMSU5HX0RFQk9VTkNFX0lOVEVSVkFMJDEgPSAxNTA7XG5cbnZhciBkZWZhdWx0SXRlbUtleSQxID0gZnVuY3Rpb24gZGVmYXVsdEl0ZW1LZXkoaW5kZXgsIGRhdGEpIHtcbiAgcmV0dXJuIGluZGV4O1xufTsgLy8gSW4gREVWIG1vZGUsIHRoaXMgU2V0IGhlbHBzIHVzIG9ubHkgbG9nIGEgd2FybmluZyBvbmNlIHBlciBjb21wb25lbnQgaW5zdGFuY2UuXG4vLyBUaGlzIGF2b2lkcyBzcGFtbWluZyB0aGUgY29uc29sZSBldmVyeSB0aW1lIGEgcmVuZGVyIGhhcHBlbnMuXG5cblxudmFyIGRldldhcm5pbmdzRGlyZWN0aW9uID0gbnVsbDtcbnZhciBkZXZXYXJuaW5nc1RhZ05hbWUkMSA9IG51bGw7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LldlYWtTZXQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgZGV2V2FybmluZ3NEaXJlY3Rpb24gPVxuICAgIC8qI19fUFVSRV9fKi9cbiAgICBuZXcgV2Vha1NldCgpO1xuICAgIGRldldhcm5pbmdzVGFnTmFtZSQxID1cbiAgICAvKiNfX1BVUkVfXyovXG4gICAgbmV3IFdlYWtTZXQoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVMaXN0Q29tcG9uZW50KF9yZWYpIHtcbiAgdmFyIF9jbGFzcywgX3RlbXA7XG5cbiAgdmFyIGdldEl0ZW1PZmZzZXQgPSBfcmVmLmdldEl0ZW1PZmZzZXQsXG4gICAgICBnZXRFc3RpbWF0ZWRUb3RhbFNpemUgPSBfcmVmLmdldEVzdGltYXRlZFRvdGFsU2l6ZSxcbiAgICAgIGdldEl0ZW1TaXplID0gX3JlZi5nZXRJdGVtU2l6ZSxcbiAgICAgIGdldE9mZnNldEZvckluZGV4QW5kQWxpZ25tZW50ID0gX3JlZi5nZXRPZmZzZXRGb3JJbmRleEFuZEFsaWdubWVudCxcbiAgICAgIGdldFN0YXJ0SW5kZXhGb3JPZmZzZXQgPSBfcmVmLmdldFN0YXJ0SW5kZXhGb3JPZmZzZXQsXG4gICAgICBnZXRTdG9wSW5kZXhGb3JTdGFydEluZGV4ID0gX3JlZi5nZXRTdG9wSW5kZXhGb3JTdGFydEluZGV4LFxuICAgICAgaW5pdEluc3RhbmNlUHJvcHMgPSBfcmVmLmluaXRJbnN0YW5jZVByb3BzLFxuICAgICAgc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZSA9IF9yZWYuc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZSxcbiAgICAgIHZhbGlkYXRlUHJvcHMgPSBfcmVmLnZhbGlkYXRlUHJvcHM7XG4gIHJldHVybiBfdGVtcCA9IF9jbGFzcyA9XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKF9QdXJlQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzTG9vc2UoTGlzdCwgX1B1cmVDb21wb25lbnQpO1xuXG4gICAgLy8gQWx3YXlzIHVzZSBleHBsaWNpdCBjb25zdHJ1Y3RvciBmb3IgUmVhY3QgY29tcG9uZW50cy5cbiAgICAvLyBJdCBwcm9kdWNlcyBsZXNzIGNvZGUgYWZ0ZXIgdHJhbnNwaWxhdGlvbi4gKCMyNilcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlbGVzcy1jb25zdHJ1Y3RvclxuICAgIGZ1bmN0aW9uIExpc3QocHJvcHMpIHtcbiAgICAgIHZhciBfdGhpcztcblxuICAgICAgX3RoaXMgPSBfUHVyZUNvbXBvbmVudC5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgICAgX3RoaXMuX2luc3RhbmNlUHJvcHMgPSBpbml0SW5zdGFuY2VQcm9wcyhfdGhpcy5wcm9wcywgX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSkpO1xuICAgICAgX3RoaXMuX291dGVyUmVmID0gdm9pZCAwO1xuICAgICAgX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdUaW1lb3V0SWQgPSBudWxsO1xuICAgICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICAgIGluc3RhbmNlOiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSxcbiAgICAgICAgaXNTY3JvbGxpbmc6IGZhbHNlLFxuICAgICAgICBzY3JvbGxEaXJlY3Rpb246ICdmb3J3YXJkJyxcbiAgICAgICAgc2Nyb2xsT2Zmc2V0OiB0eXBlb2YgX3RoaXMucHJvcHMuaW5pdGlhbFNjcm9sbE9mZnNldCA9PT0gJ251bWJlcicgPyBfdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsT2Zmc2V0IDogMCxcbiAgICAgICAgc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkOiBmYWxzZVxuICAgICAgfTtcbiAgICAgIF90aGlzLl9jYWxsT25JdGVtc1JlbmRlcmVkID0gdm9pZCAwO1xuICAgICAgX3RoaXMuX2NhbGxPbkl0ZW1zUmVuZGVyZWQgPSBtZW1vaXplT25lKGZ1bmN0aW9uIChvdmVyc2NhblN0YXJ0SW5kZXgsIG92ZXJzY2FuU3RvcEluZGV4LCB2aXNpYmxlU3RhcnRJbmRleCwgdmlzaWJsZVN0b3BJbmRleCkge1xuICAgICAgICByZXR1cm4gX3RoaXMucHJvcHMub25JdGVtc1JlbmRlcmVkKHtcbiAgICAgICAgICBvdmVyc2NhblN0YXJ0SW5kZXg6IG92ZXJzY2FuU3RhcnRJbmRleCxcbiAgICAgICAgICBvdmVyc2NhblN0b3BJbmRleDogb3ZlcnNjYW5TdG9wSW5kZXgsXG4gICAgICAgICAgdmlzaWJsZVN0YXJ0SW5kZXg6IHZpc2libGVTdGFydEluZGV4LFxuICAgICAgICAgIHZpc2libGVTdG9wSW5kZXg6IHZpc2libGVTdG9wSW5kZXhcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIF90aGlzLl9jYWxsT25TY3JvbGwgPSB2b2lkIDA7XG4gICAgICBfdGhpcy5fY2FsbE9uU2Nyb2xsID0gbWVtb2l6ZU9uZShmdW5jdGlvbiAoc2Nyb2xsRGlyZWN0aW9uLCBzY3JvbGxPZmZzZXQsIHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZCkge1xuICAgICAgICByZXR1cm4gX3RoaXMucHJvcHMub25TY3JvbGwoe1xuICAgICAgICAgIHNjcm9sbERpcmVjdGlvbjogc2Nyb2xsRGlyZWN0aW9uLFxuICAgICAgICAgIHNjcm9sbE9mZnNldDogc2Nyb2xsT2Zmc2V0LFxuICAgICAgICAgIHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZDogc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBfdGhpcy5fZ2V0SXRlbVN0eWxlID0gdm9pZCAwO1xuXG4gICAgICBfdGhpcy5fZ2V0SXRlbVN0eWxlID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgICAgZGlyZWN0aW9uID0gX3RoaXMkcHJvcHMuZGlyZWN0aW9uLFxuICAgICAgICAgICAgaXRlbVNpemUgPSBfdGhpcyRwcm9wcy5pdGVtU2l6ZSxcbiAgICAgICAgICAgIGxheW91dCA9IF90aGlzJHByb3BzLmxheW91dDtcblxuICAgICAgICB2YXIgaXRlbVN0eWxlQ2FjaGUgPSBfdGhpcy5fZ2V0SXRlbVN0eWxlQ2FjaGUoc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZSAmJiBpdGVtU2l6ZSwgc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZSAmJiBsYXlvdXQsIHNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2UgJiYgZGlyZWN0aW9uKTtcblxuICAgICAgICB2YXIgc3R5bGU7XG5cbiAgICAgICAgaWYgKGl0ZW1TdHlsZUNhY2hlLmhhc093blByb3BlcnR5KGluZGV4KSkge1xuICAgICAgICAgIHN0eWxlID0gaXRlbVN0eWxlQ2FjaGVbaW5kZXhdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBfb2Zmc2V0ID0gZ2V0SXRlbU9mZnNldChfdGhpcy5wcm9wcywgaW5kZXgsIF90aGlzLl9pbnN0YW5jZVByb3BzKTtcblxuICAgICAgICAgIHZhciBzaXplID0gZ2V0SXRlbVNpemUoX3RoaXMucHJvcHMsIGluZGV4LCBfdGhpcy5faW5zdGFuY2VQcm9wcyk7IC8vIFRPRE8gRGVwcmVjYXRlIGRpcmVjdGlvbiBcImhvcml6b250YWxcIlxuXG4gICAgICAgICAgdmFyIGlzSG9yaXpvbnRhbCA9IGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnIHx8IGxheW91dCA9PT0gJ2hvcml6b250YWwnO1xuICAgICAgICAgIHZhciBpc1J0bCA9IGRpcmVjdGlvbiA9PT0gJ3J0bCc7XG4gICAgICAgICAgdmFyIG9mZnNldEhvcml6b250YWwgPSBpc0hvcml6b250YWwgPyBfb2Zmc2V0IDogMDtcbiAgICAgICAgICBpdGVtU3R5bGVDYWNoZVtpbmRleF0gPSBzdHlsZSA9IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgbGVmdDogaXNSdGwgPyB1bmRlZmluZWQgOiBvZmZzZXRIb3Jpem9udGFsLFxuICAgICAgICAgICAgcmlnaHQ6IGlzUnRsID8gb2Zmc2V0SG9yaXpvbnRhbCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRvcDogIWlzSG9yaXpvbnRhbCA/IF9vZmZzZXQgOiAwLFxuICAgICAgICAgICAgaGVpZ2h0OiAhaXNIb3Jpem9udGFsID8gc2l6ZSA6ICcxMDAlJyxcbiAgICAgICAgICAgIHdpZHRoOiBpc0hvcml6b250YWwgPyBzaXplIDogJzEwMCUnXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLl9nZXRJdGVtU3R5bGVDYWNoZSA9IHZvaWQgMDtcbiAgICAgIF90aGlzLl9nZXRJdGVtU3R5bGVDYWNoZSA9IG1lbW9pemVPbmUoZnVuY3Rpb24gKF8sIF9fLCBfX18pIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgfSk7XG5cbiAgICAgIF90aGlzLl9vblNjcm9sbEhvcml6b250YWwgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIF9ldmVudCRjdXJyZW50VGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCxcbiAgICAgICAgICAgIGNsaWVudFdpZHRoID0gX2V2ZW50JGN1cnJlbnRUYXJnZXQuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICBzY3JvbGxMZWZ0ID0gX2V2ZW50JGN1cnJlbnRUYXJnZXQuc2Nyb2xsTGVmdCxcbiAgICAgICAgICAgIHNjcm9sbFdpZHRoID0gX2V2ZW50JGN1cnJlbnRUYXJnZXQuc2Nyb2xsV2lkdGg7XG5cbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHByZXZTdGF0ZSkge1xuICAgICAgICAgIGlmIChwcmV2U3RhdGUuc2Nyb2xsT2Zmc2V0ID09PSBzY3JvbGxMZWZ0KSB7XG4gICAgICAgICAgICAvLyBTY3JvbGwgcG9zaXRpb24gbWF5IGhhdmUgYmVlbiB1cGRhdGVkIGJ5IGNETS9jRFUsXG4gICAgICAgICAgICAvLyBJbiB3aGljaCBjYXNlIHdlIGRvbid0IG5lZWQgdG8gdHJpZ2dlciBhbm90aGVyIHJlbmRlcixcbiAgICAgICAgICAgIC8vIEFuZCB3ZSBkb24ndCB3YW50IHRvIHVwZGF0ZSBzdGF0ZS5pc1Njcm9sbGluZy5cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBfdGhpcy5wcm9wcy5kaXJlY3Rpb247XG4gICAgICAgICAgdmFyIHNjcm9sbE9mZnNldCA9IHNjcm9sbExlZnQ7XG5cbiAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAncnRsJykge1xuICAgICAgICAgICAgLy8gVFJJQ0tZIEFjY29yZGluZyB0byB0aGUgc3BlYywgc2Nyb2xsTGVmdCBzaG91bGQgYmUgbmVnYXRpdmUgZm9yIFJUTCBhbGlnbmVkIGVsZW1lbnRzLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBub3QgdGhlIGNhc2UgZm9yIGFsbCBicm93c2VycyB0aG91Z2ggKGUuZy4gQ2hyb21lIHJlcG9ydHMgdmFsdWVzIGFzIHBvc2l0aXZlLCBtZWFzdXJlZCByZWxhdGl2ZSB0byB0aGUgbGVmdCkuXG4gICAgICAgICAgICAvLyBJdCdzIGFsc28gZWFzaWVyIGZvciB0aGlzIGNvbXBvbmVudCBpZiB3ZSBjb252ZXJ0IG9mZnNldHMgdG8gdGhlIHNhbWUgZm9ybWF0IGFzIHRoZXkgd291bGQgYmUgaW4gZm9yIGx0ci5cbiAgICAgICAgICAgIC8vIFNvIHRoZSBzaW1wbGVzdCBzb2x1dGlvbiBpcyB0byBkZXRlcm1pbmUgd2hpY2ggYnJvd3NlciBiZWhhdmlvciB3ZSdyZSBkZWFsaW5nIHdpdGgsIGFuZCBjb252ZXJ0IGJhc2VkIG9uIGl0LlxuICAgICAgICAgICAgc3dpdGNoIChnZXRSVExPZmZzZXRUeXBlKCkpIHtcbiAgICAgICAgICAgICAgY2FzZSAnbmVnYXRpdmUnOlxuICAgICAgICAgICAgICAgIHNjcm9sbE9mZnNldCA9IC1zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgJ3Bvc2l0aXZlLWRlc2NlbmRpbmcnOlxuICAgICAgICAgICAgICAgIHNjcm9sbE9mZnNldCA9IHNjcm9sbFdpZHRoIC0gY2xpZW50V2lkdGggLSBzY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gLy8gUHJldmVudCBTYWZhcmkncyBlbGFzdGljIHNjcm9sbGluZyBmcm9tIGNhdXNpbmcgdmlzdWFsIHNoYWtpbmcgd2hlbiBzY3JvbGxpbmcgcGFzdCBib3VuZHMuXG5cblxuICAgICAgICAgIHNjcm9sbE9mZnNldCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHNjcm9sbE9mZnNldCwgc2Nyb2xsV2lkdGggLSBjbGllbnRXaWR0aCkpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc1Njcm9sbGluZzogdHJ1ZSxcbiAgICAgICAgICAgIHNjcm9sbERpcmVjdGlvbjogcHJldlN0YXRlLnNjcm9sbE9mZnNldCA8IHNjcm9sbExlZnQgPyAnZm9yd2FyZCcgOiAnYmFja3dhcmQnLFxuICAgICAgICAgICAgc2Nyb2xsT2Zmc2V0OiBzY3JvbGxPZmZzZXQsXG4gICAgICAgICAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQ6IGZhbHNlXG4gICAgICAgICAgfTtcbiAgICAgICAgfSwgX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdEZWJvdW5jZWQpO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMuX29uU2Nyb2xsVmVydGljYWwgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIF9ldmVudCRjdXJyZW50VGFyZ2V0MiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQsXG4gICAgICAgICAgICBjbGllbnRIZWlnaHQgPSBfZXZlbnQkY3VycmVudFRhcmdldDIuY2xpZW50SGVpZ2h0LFxuICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0ID0gX2V2ZW50JGN1cnJlbnRUYXJnZXQyLnNjcm9sbEhlaWdodCxcbiAgICAgICAgICAgIHNjcm9sbFRvcCA9IF9ldmVudCRjdXJyZW50VGFyZ2V0Mi5zY3JvbGxUb3A7XG5cbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHByZXZTdGF0ZSkge1xuICAgICAgICAgIGlmIChwcmV2U3RhdGUuc2Nyb2xsT2Zmc2V0ID09PSBzY3JvbGxUb3ApIHtcbiAgICAgICAgICAgIC8vIFNjcm9sbCBwb3NpdGlvbiBtYXkgaGF2ZSBiZWVuIHVwZGF0ZWQgYnkgY0RNL2NEVSxcbiAgICAgICAgICAgIC8vIEluIHdoaWNoIGNhc2Ugd2UgZG9uJ3QgbmVlZCB0byB0cmlnZ2VyIGFub3RoZXIgcmVuZGVyLFxuICAgICAgICAgICAgLy8gQW5kIHdlIGRvbid0IHdhbnQgdG8gdXBkYXRlIHN0YXRlLmlzU2Nyb2xsaW5nLlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfSAvLyBQcmV2ZW50IFNhZmFyaSdzIGVsYXN0aWMgc2Nyb2xsaW5nIGZyb20gY2F1c2luZyB2aXN1YWwgc2hha2luZyB3aGVuIHNjcm9sbGluZyBwYXN0IGJvdW5kcy5cblxuXG4gICAgICAgICAgdmFyIHNjcm9sbE9mZnNldCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHNjcm9sbFRvcCwgc2Nyb2xsSGVpZ2h0IC0gY2xpZW50SGVpZ2h0KSk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzU2Nyb2xsaW5nOiB0cnVlLFxuICAgICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uOiBwcmV2U3RhdGUuc2Nyb2xsT2Zmc2V0IDwgc2Nyb2xsT2Zmc2V0ID8gJ2ZvcndhcmQnIDogJ2JhY2t3YXJkJyxcbiAgICAgICAgICAgIHNjcm9sbE9mZnNldDogc2Nyb2xsT2Zmc2V0LFxuICAgICAgICAgICAgc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkOiBmYWxzZVxuICAgICAgICAgIH07XG4gICAgICAgIH0sIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nRGVib3VuY2VkKTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLl9vdXRlclJlZlNldHRlciA9IGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgICAgdmFyIG91dGVyUmVmID0gX3RoaXMucHJvcHMub3V0ZXJSZWY7XG4gICAgICAgIF90aGlzLl9vdXRlclJlZiA9IHJlZjtcblxuICAgICAgICBpZiAodHlwZW9mIG91dGVyUmVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgb3V0ZXJSZWYocmVmKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdXRlclJlZiAhPSBudWxsICYmIHR5cGVvZiBvdXRlclJlZiA9PT0gJ29iamVjdCcgJiYgb3V0ZXJSZWYuaGFzT3duUHJvcGVydHkoJ2N1cnJlbnQnKSkge1xuICAgICAgICAgIG91dGVyUmVmLmN1cnJlbnQgPSByZWY7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nRGVib3VuY2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdUaW1lb3V0SWQgIT09IG51bGwpIHtcbiAgICAgICAgICBjYW5jZWxUaW1lb3V0KF90aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkID0gcmVxdWVzdFRpbWVvdXQoX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmcsIElTX1NDUk9MTElOR19ERUJPVU5DRV9JTlRFUlZBTCQxKTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCA9IG51bGw7XG5cbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGlzU2Nyb2xsaW5nOiBmYWxzZVxuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gQ2xlYXIgc3R5bGUgY2FjaGUgYWZ0ZXIgc3RhdGUgdXBkYXRlIGhhcyBiZWVuIGNvbW1pdHRlZC5cbiAgICAgICAgICAvLyBUaGlzIHdheSB3ZSBkb24ndCBicmVhayBwdXJlIHNDVSBmb3IgaXRlbXMgdGhhdCBkb24ndCB1c2UgaXNTY3JvbGxpbmcgcGFyYW0uXG4gICAgICAgICAgX3RoaXMuX2dldEl0ZW1TdHlsZUNhY2hlKC0xLCBudWxsKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgTGlzdC5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMgPSBmdW5jdGlvbiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgIHZhbGlkYXRlU2hhcmVkUHJvcHMkMShuZXh0UHJvcHMsIHByZXZTdGF0ZSk7XG4gICAgICB2YWxpZGF0ZVByb3BzKG5leHRQcm9wcyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgdmFyIF9wcm90byA9IExpc3QucHJvdG90eXBlO1xuXG4gICAgX3Byb3RvLnNjcm9sbFRvID0gZnVuY3Rpb24gc2Nyb2xsVG8oc2Nyb2xsT2Zmc2V0KSB7XG4gICAgICBzY3JvbGxPZmZzZXQgPSBNYXRoLm1heCgwLCBzY3JvbGxPZmZzZXQpO1xuICAgICAgdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAocHJldlN0YXRlKSB7XG4gICAgICAgIGlmIChwcmV2U3RhdGUuc2Nyb2xsT2Zmc2V0ID09PSBzY3JvbGxPZmZzZXQpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uOiBwcmV2U3RhdGUuc2Nyb2xsT2Zmc2V0IDwgc2Nyb2xsT2Zmc2V0ID8gJ2ZvcndhcmQnIDogJ2JhY2t3YXJkJyxcbiAgICAgICAgICBzY3JvbGxPZmZzZXQ6IHNjcm9sbE9mZnNldCxcbiAgICAgICAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQ6IHRydWVcbiAgICAgICAgfTtcbiAgICAgIH0sIHRoaXMuX3Jlc2V0SXNTY3JvbGxpbmdEZWJvdW5jZWQpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uc2Nyb2xsVG9JdGVtID0gZnVuY3Rpb24gc2Nyb2xsVG9JdGVtKGluZGV4LCBhbGlnbikge1xuICAgICAgaWYgKGFsaWduID09PSB2b2lkIDApIHtcbiAgICAgICAgYWxpZ24gPSAnYXV0byc7XG4gICAgICB9XG5cbiAgICAgIHZhciBpdGVtQ291bnQgPSB0aGlzLnByb3BzLml0ZW1Db3VudDtcbiAgICAgIHZhciBzY3JvbGxPZmZzZXQgPSB0aGlzLnN0YXRlLnNjcm9sbE9mZnNldDtcbiAgICAgIGluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oaW5kZXgsIGl0ZW1Db3VudCAtIDEpKTtcbiAgICAgIHRoaXMuc2Nyb2xsVG8oZ2V0T2Zmc2V0Rm9ySW5kZXhBbmRBbGlnbm1lbnQodGhpcy5wcm9wcywgaW5kZXgsIGFsaWduLCBzY3JvbGxPZmZzZXQsIHRoaXMuX2luc3RhbmNlUHJvcHMpKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMyID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBkaXJlY3Rpb24gPSBfdGhpcyRwcm9wczIuZGlyZWN0aW9uLFxuICAgICAgICAgIGluaXRpYWxTY3JvbGxPZmZzZXQgPSBfdGhpcyRwcm9wczIuaW5pdGlhbFNjcm9sbE9mZnNldCxcbiAgICAgICAgICBsYXlvdXQgPSBfdGhpcyRwcm9wczIubGF5b3V0O1xuXG4gICAgICBpZiAodHlwZW9mIGluaXRpYWxTY3JvbGxPZmZzZXQgPT09ICdudW1iZXInICYmIHRoaXMuX291dGVyUmVmICE9IG51bGwpIHtcbiAgICAgICAgdmFyIG91dGVyUmVmID0gdGhpcy5fb3V0ZXJSZWY7IC8vIFRPRE8gRGVwcmVjYXRlIGRpcmVjdGlvbiBcImhvcml6b250YWxcIlxuXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJyB8fCBsYXlvdXQgPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgIG91dGVyUmVmLnNjcm9sbExlZnQgPSBpbml0aWFsU2Nyb2xsT2Zmc2V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dGVyUmVmLnNjcm9sbFRvcCA9IGluaXRpYWxTY3JvbGxPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5fY2FsbFByb3BzQ2FsbGJhY2tzKCk7XG4gICAgfTtcblxuICAgIF9wcm90by5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBkaXJlY3Rpb24gPSBfdGhpcyRwcm9wczMuZGlyZWN0aW9uLFxuICAgICAgICAgIGxheW91dCA9IF90aGlzJHByb3BzMy5sYXlvdXQ7XG4gICAgICB2YXIgX3RoaXMkc3RhdGUgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgIHNjcm9sbE9mZnNldCA9IF90aGlzJHN0YXRlLnNjcm9sbE9mZnNldCxcbiAgICAgICAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQgPSBfdGhpcyRzdGF0ZS5zY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQ7XG5cbiAgICAgIGlmIChzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQgJiYgdGhpcy5fb3V0ZXJSZWYgIT0gbnVsbCkge1xuICAgICAgICB2YXIgb3V0ZXJSZWYgPSB0aGlzLl9vdXRlclJlZjsgLy8gVE9ETyBEZXByZWNhdGUgZGlyZWN0aW9uIFwiaG9yaXpvbnRhbFwiXG5cbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnIHx8IGxheW91dCA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3J0bCcpIHtcbiAgICAgICAgICAgIC8vIFRSSUNLWSBBY2NvcmRpbmcgdG8gdGhlIHNwZWMsIHNjcm9sbExlZnQgc2hvdWxkIGJlIG5lZ2F0aXZlIGZvciBSVEwgYWxpZ25lZCBlbGVtZW50cy5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgbm90IHRoZSBjYXNlIGZvciBhbGwgYnJvd3NlcnMgdGhvdWdoIChlLmcuIENocm9tZSByZXBvcnRzIHZhbHVlcyBhcyBwb3NpdGl2ZSwgbWVhc3VyZWQgcmVsYXRpdmUgdG8gdGhlIGxlZnQpLlxuICAgICAgICAgICAgLy8gU28gd2UgbmVlZCB0byBkZXRlcm1pbmUgd2hpY2ggYnJvd3NlciBiZWhhdmlvciB3ZSdyZSBkZWFsaW5nIHdpdGgsIGFuZCBtaW1pYyBpdC5cbiAgICAgICAgICAgIHN3aXRjaCAoZ2V0UlRMT2Zmc2V0VHlwZSgpKSB7XG4gICAgICAgICAgICAgIGNhc2UgJ25lZ2F0aXZlJzpcbiAgICAgICAgICAgICAgICBvdXRlclJlZi5zY3JvbGxMZWZ0ID0gLXNjcm9sbE9mZnNldDtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlICdwb3NpdGl2ZS1hc2NlbmRpbmcnOlxuICAgICAgICAgICAgICAgIG91dGVyUmVmLnNjcm9sbExlZnQgPSBzY3JvbGxPZmZzZXQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB2YXIgY2xpZW50V2lkdGggPSBvdXRlclJlZi5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsV2lkdGggPSBvdXRlclJlZi5zY3JvbGxXaWR0aDtcbiAgICAgICAgICAgICAgICBvdXRlclJlZi5zY3JvbGxMZWZ0ID0gc2Nyb2xsV2lkdGggLSBjbGllbnRXaWR0aCAtIHNjcm9sbE9mZnNldDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsTGVmdCA9IHNjcm9sbE9mZnNldDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsVG9wID0gc2Nyb2xsT2Zmc2V0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NhbGxQcm9wc0NhbGxiYWNrcygpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIGlmICh0aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkICE9PSBudWxsKSB7XG4gICAgICAgIGNhbmNlbFRpbWVvdXQodGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHM0ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBjaGlsZHJlbiA9IF90aGlzJHByb3BzNC5jaGlsZHJlbixcbiAgICAgICAgICBjbGFzc05hbWUgPSBfdGhpcyRwcm9wczQuY2xhc3NOYW1lLFxuICAgICAgICAgIGRpcmVjdGlvbiA9IF90aGlzJHByb3BzNC5kaXJlY3Rpb24sXG4gICAgICAgICAgaGVpZ2h0ID0gX3RoaXMkcHJvcHM0LmhlaWdodCxcbiAgICAgICAgICBpbm5lclJlZiA9IF90aGlzJHByb3BzNC5pbm5lclJlZixcbiAgICAgICAgICBpbm5lckVsZW1lbnRUeXBlID0gX3RoaXMkcHJvcHM0LmlubmVyRWxlbWVudFR5cGUsXG4gICAgICAgICAgaW5uZXJUYWdOYW1lID0gX3RoaXMkcHJvcHM0LmlubmVyVGFnTmFtZSxcbiAgICAgICAgICBpdGVtQ291bnQgPSBfdGhpcyRwcm9wczQuaXRlbUNvdW50LFxuICAgICAgICAgIGl0ZW1EYXRhID0gX3RoaXMkcHJvcHM0Lml0ZW1EYXRhLFxuICAgICAgICAgIF90aGlzJHByb3BzNCRpdGVtS2V5ID0gX3RoaXMkcHJvcHM0Lml0ZW1LZXksXG4gICAgICAgICAgaXRlbUtleSA9IF90aGlzJHByb3BzNCRpdGVtS2V5ID09PSB2b2lkIDAgPyBkZWZhdWx0SXRlbUtleSQxIDogX3RoaXMkcHJvcHM0JGl0ZW1LZXksXG4gICAgICAgICAgbGF5b3V0ID0gX3RoaXMkcHJvcHM0LmxheW91dCxcbiAgICAgICAgICBvdXRlckVsZW1lbnRUeXBlID0gX3RoaXMkcHJvcHM0Lm91dGVyRWxlbWVudFR5cGUsXG4gICAgICAgICAgb3V0ZXJUYWdOYW1lID0gX3RoaXMkcHJvcHM0Lm91dGVyVGFnTmFtZSxcbiAgICAgICAgICBzdHlsZSA9IF90aGlzJHByb3BzNC5zdHlsZSxcbiAgICAgICAgICB1c2VJc1Njcm9sbGluZyA9IF90aGlzJHByb3BzNC51c2VJc1Njcm9sbGluZyxcbiAgICAgICAgICB3aWR0aCA9IF90aGlzJHByb3BzNC53aWR0aDtcbiAgICAgIHZhciBpc1Njcm9sbGluZyA9IHRoaXMuc3RhdGUuaXNTY3JvbGxpbmc7IC8vIFRPRE8gRGVwcmVjYXRlIGRpcmVjdGlvbiBcImhvcml6b250YWxcIlxuXG4gICAgICB2YXIgaXNIb3Jpem9udGFsID0gZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcgfHwgbGF5b3V0ID09PSAnaG9yaXpvbnRhbCc7XG4gICAgICB2YXIgb25TY3JvbGwgPSBpc0hvcml6b250YWwgPyB0aGlzLl9vblNjcm9sbEhvcml6b250YWwgOiB0aGlzLl9vblNjcm9sbFZlcnRpY2FsO1xuXG4gICAgICB2YXIgX3RoaXMkX2dldFJhbmdlVG9SZW5kID0gdGhpcy5fZ2V0UmFuZ2VUb1JlbmRlcigpLFxuICAgICAgICAgIHN0YXJ0SW5kZXggPSBfdGhpcyRfZ2V0UmFuZ2VUb1JlbmRbMF0sXG4gICAgICAgICAgc3RvcEluZGV4ID0gX3RoaXMkX2dldFJhbmdlVG9SZW5kWzFdO1xuXG4gICAgICB2YXIgaXRlbXMgPSBbXTtcblxuICAgICAgaWYgKGl0ZW1Db3VudCA+IDApIHtcbiAgICAgICAgZm9yICh2YXIgX2luZGV4ID0gc3RhcnRJbmRleDsgX2luZGV4IDw9IHN0b3BJbmRleDsgX2luZGV4KyspIHtcbiAgICAgICAgICBpdGVtcy5wdXNoKGNyZWF0ZUVsZW1lbnQoY2hpbGRyZW4sIHtcbiAgICAgICAgICAgIGRhdGE6IGl0ZW1EYXRhLFxuICAgICAgICAgICAga2V5OiBpdGVtS2V5KF9pbmRleCwgaXRlbURhdGEpLFxuICAgICAgICAgICAgaW5kZXg6IF9pbmRleCxcbiAgICAgICAgICAgIGlzU2Nyb2xsaW5nOiB1c2VJc1Njcm9sbGluZyA/IGlzU2Nyb2xsaW5nIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMuX2dldEl0ZW1TdHlsZShfaW5kZXgpXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9IC8vIFJlYWQgdGhpcyB2YWx1ZSBBRlRFUiBpdGVtcyBoYXZlIGJlZW4gY3JlYXRlZCxcbiAgICAgIC8vIFNvIHRoZWlyIGFjdHVhbCBzaXplcyAoaWYgdmFyaWFibGUpIGFyZSB0YWtlbiBpbnRvIGNvbnNpZGVyYXRpb24uXG5cblxuICAgICAgdmFyIGVzdGltYXRlZFRvdGFsU2l6ZSA9IGdldEVzdGltYXRlZFRvdGFsU2l6ZSh0aGlzLnByb3BzLCB0aGlzLl9pbnN0YW5jZVByb3BzKTtcbiAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KG91dGVyRWxlbWVudFR5cGUgfHwgb3V0ZXJUYWdOYW1lIHx8ICdkaXYnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICBvblNjcm9sbDogb25TY3JvbGwsXG4gICAgICAgIHJlZjogdGhpcy5fb3V0ZXJSZWZTZXR0ZXIsXG4gICAgICAgIHN0eWxlOiBfZXh0ZW5kcyh7XG4gICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgIG92ZXJmbG93OiAnYXV0bycsXG4gICAgICAgICAgV2Via2l0T3ZlcmZsb3dTY3JvbGxpbmc6ICd0b3VjaCcsXG4gICAgICAgICAgd2lsbENoYW5nZTogJ3RyYW5zZm9ybScsXG4gICAgICAgICAgZGlyZWN0aW9uOiBkaXJlY3Rpb25cbiAgICAgICAgfSwgc3R5bGUpXG4gICAgICB9LCBjcmVhdGVFbGVtZW50KGlubmVyRWxlbWVudFR5cGUgfHwgaW5uZXJUYWdOYW1lIHx8ICdkaXYnLCB7XG4gICAgICAgIGNoaWxkcmVuOiBpdGVtcyxcbiAgICAgICAgcmVmOiBpbm5lclJlZixcbiAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICBoZWlnaHQ6IGlzSG9yaXpvbnRhbCA/ICcxMDAlJyA6IGVzdGltYXRlZFRvdGFsU2l6ZSxcbiAgICAgICAgICBwb2ludGVyRXZlbnRzOiBpc1Njcm9sbGluZyA/ICdub25lJyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICB3aWR0aDogaXNIb3Jpem9udGFsID8gZXN0aW1hdGVkVG90YWxTaXplIDogJzEwMCUnXG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9jYWxsUHJvcHNDYWxsYmFja3MgPSBmdW5jdGlvbiBfY2FsbFByb3BzQ2FsbGJhY2tzKCkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb3BzLm9uSXRlbXNSZW5kZXJlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB2YXIgaXRlbUNvdW50ID0gdGhpcy5wcm9wcy5pdGVtQ291bnQ7XG5cbiAgICAgICAgaWYgKGl0ZW1Db3VudCA+IDApIHtcbiAgICAgICAgICB2YXIgX3RoaXMkX2dldFJhbmdlVG9SZW5kMiA9IHRoaXMuX2dldFJhbmdlVG9SZW5kZXIoKSxcbiAgICAgICAgICAgICAgX292ZXJzY2FuU3RhcnRJbmRleCA9IF90aGlzJF9nZXRSYW5nZVRvUmVuZDJbMF0sXG4gICAgICAgICAgICAgIF9vdmVyc2NhblN0b3BJbmRleCA9IF90aGlzJF9nZXRSYW5nZVRvUmVuZDJbMV0sXG4gICAgICAgICAgICAgIF92aXNpYmxlU3RhcnRJbmRleCA9IF90aGlzJF9nZXRSYW5nZVRvUmVuZDJbMl0sXG4gICAgICAgICAgICAgIF92aXNpYmxlU3RvcEluZGV4ID0gX3RoaXMkX2dldFJhbmdlVG9SZW5kMlszXTtcblxuICAgICAgICAgIHRoaXMuX2NhbGxPbkl0ZW1zUmVuZGVyZWQoX292ZXJzY2FuU3RhcnRJbmRleCwgX292ZXJzY2FuU3RvcEluZGV4LCBfdmlzaWJsZVN0YXJ0SW5kZXgsIF92aXNpYmxlU3RvcEluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHRoaXMucHJvcHMub25TY3JvbGwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIF90aGlzJHN0YXRlMiA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICBfc2Nyb2xsRGlyZWN0aW9uID0gX3RoaXMkc3RhdGUyLnNjcm9sbERpcmVjdGlvbixcbiAgICAgICAgICAgIF9zY3JvbGxPZmZzZXQgPSBfdGhpcyRzdGF0ZTIuc2Nyb2xsT2Zmc2V0LFxuICAgICAgICAgICAgX3Njcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZCA9IF90aGlzJHN0YXRlMi5zY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQ7XG5cbiAgICAgICAgdGhpcy5fY2FsbE9uU2Nyb2xsKF9zY3JvbGxEaXJlY3Rpb24sIF9zY3JvbGxPZmZzZXQsIF9zY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQpO1xuICAgICAgfVxuICAgIH07IC8vIExhemlseSBjcmVhdGUgYW5kIGNhY2hlIGl0ZW0gc3R5bGVzIHdoaWxlIHNjcm9sbGluZyxcbiAgICAvLyBTbyB0aGF0IHB1cmUgY29tcG9uZW50IHNDVSB3aWxsIHByZXZlbnQgcmUtcmVuZGVycy5cbiAgICAvLyBXZSBtYWludGFpbiB0aGlzIGNhY2hlLCBhbmQgcGFzcyBhIHN0eWxlIHByb3AgcmF0aGVyIHRoYW4gaW5kZXgsXG4gICAgLy8gU28gdGhhdCBMaXN0IGNhbiBjbGVhciBjYWNoZWQgc3R5bGVzIGFuZCBmb3JjZSBpdGVtIHJlLXJlbmRlciBpZiBuZWNlc3NhcnkuXG5cblxuICAgIF9wcm90by5fZ2V0UmFuZ2VUb1JlbmRlciA9IGZ1bmN0aW9uIF9nZXRSYW5nZVRvUmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzNSA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgaXRlbUNvdW50ID0gX3RoaXMkcHJvcHM1Lml0ZW1Db3VudCxcbiAgICAgICAgICBvdmVyc2NhbkNvdW50ID0gX3RoaXMkcHJvcHM1Lm92ZXJzY2FuQ291bnQ7XG4gICAgICB2YXIgX3RoaXMkc3RhdGUzID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICBpc1Njcm9sbGluZyA9IF90aGlzJHN0YXRlMy5pc1Njcm9sbGluZyxcbiAgICAgICAgICBzY3JvbGxEaXJlY3Rpb24gPSBfdGhpcyRzdGF0ZTMuc2Nyb2xsRGlyZWN0aW9uLFxuICAgICAgICAgIHNjcm9sbE9mZnNldCA9IF90aGlzJHN0YXRlMy5zY3JvbGxPZmZzZXQ7XG5cbiAgICAgIGlmIChpdGVtQ291bnQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFswLCAwLCAwLCAwXTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0YXJ0SW5kZXggPSBnZXRTdGFydEluZGV4Rm9yT2Zmc2V0KHRoaXMucHJvcHMsIHNjcm9sbE9mZnNldCwgdGhpcy5faW5zdGFuY2VQcm9wcyk7XG4gICAgICB2YXIgc3RvcEluZGV4ID0gZ2V0U3RvcEluZGV4Rm9yU3RhcnRJbmRleCh0aGlzLnByb3BzLCBzdGFydEluZGV4LCBzY3JvbGxPZmZzZXQsIHRoaXMuX2luc3RhbmNlUHJvcHMpOyAvLyBPdmVyc2NhbiBieSBvbmUgaXRlbSBpbiBlYWNoIGRpcmVjdGlvbiBzbyB0aGF0IHRhYi9mb2N1cyB3b3Jrcy5cbiAgICAgIC8vIElmIHRoZXJlIGlzbid0IGF0IGxlYXN0IG9uZSBleHRyYSBpdGVtLCB0YWIgbG9vcHMgYmFjayBhcm91bmQuXG5cbiAgICAgIHZhciBvdmVyc2NhbkJhY2t3YXJkID0gIWlzU2Nyb2xsaW5nIHx8IHNjcm9sbERpcmVjdGlvbiA9PT0gJ2JhY2t3YXJkJyA/IE1hdGgubWF4KDEsIG92ZXJzY2FuQ291bnQpIDogMTtcbiAgICAgIHZhciBvdmVyc2NhbkZvcndhcmQgPSAhaXNTY3JvbGxpbmcgfHwgc2Nyb2xsRGlyZWN0aW9uID09PSAnZm9yd2FyZCcgPyBNYXRoLm1heCgxLCBvdmVyc2NhbkNvdW50KSA6IDE7XG4gICAgICByZXR1cm4gW01hdGgubWF4KDAsIHN0YXJ0SW5kZXggLSBvdmVyc2NhbkJhY2t3YXJkKSwgTWF0aC5tYXgoMCwgTWF0aC5taW4oaXRlbUNvdW50IC0gMSwgc3RvcEluZGV4ICsgb3ZlcnNjYW5Gb3J3YXJkKSksIHN0YXJ0SW5kZXgsIHN0b3BJbmRleF07XG4gICAgfTtcblxuICAgIHJldHVybiBMaXN0O1xuICB9KFB1cmVDb21wb25lbnQpLCBfY2xhc3MuZGVmYXVsdFByb3BzID0ge1xuICAgIGRpcmVjdGlvbjogJ2x0cicsXG4gICAgaXRlbURhdGE6IHVuZGVmaW5lZCxcbiAgICBsYXlvdXQ6ICd2ZXJ0aWNhbCcsXG4gICAgb3ZlcnNjYW5Db3VudDogMixcbiAgICB1c2VJc1Njcm9sbGluZzogZmFsc2VcbiAgfSwgX3RlbXA7XG59IC8vIE5PVEU6IEkgY29uc2lkZXJlZCBmdXJ0aGVyIHdyYXBwaW5nIGluZGl2aWR1YWwgaXRlbXMgd2l0aCBhIHB1cmUgTGlzdEl0ZW0gY29tcG9uZW50LlxuLy8gVGhpcyB3b3VsZCBhdm9pZCBldmVyIGNhbGxpbmcgdGhlIHJlbmRlciBmdW5jdGlvbiBmb3IgdGhlIHNhbWUgaW5kZXggbW9yZSB0aGFuIG9uY2UsXG4vLyBCdXQgaXQgd291bGQgYWxzbyBhZGQgdGhlIG92ZXJoZWFkIG9mIGEgbG90IG9mIGNvbXBvbmVudHMvZmliZXJzLlxuLy8gSSBhc3N1bWUgcGVvcGxlIGFscmVhZHkgZG8gdGhpcyAocmVuZGVyIGZ1bmN0aW9uIHJldHVybmluZyBhIGNsYXNzIGNvbXBvbmVudCksXG4vLyBTbyBteSBkb2luZyBpdCB3b3VsZCBqdXN0IHVubmVjZXNzYXJpbHkgZG91YmxlIHRoZSB3cmFwcGVycy5cblxudmFyIHZhbGlkYXRlU2hhcmVkUHJvcHMkMSA9IGZ1bmN0aW9uIHZhbGlkYXRlU2hhcmVkUHJvcHMoX3JlZjIsIF9yZWYzKSB7XG4gIHZhciBjaGlsZHJlbiA9IF9yZWYyLmNoaWxkcmVuLFxuICAgICAgZGlyZWN0aW9uID0gX3JlZjIuZGlyZWN0aW9uLFxuICAgICAgaGVpZ2h0ID0gX3JlZjIuaGVpZ2h0LFxuICAgICAgbGF5b3V0ID0gX3JlZjIubGF5b3V0LFxuICAgICAgaW5uZXJUYWdOYW1lID0gX3JlZjIuaW5uZXJUYWdOYW1lLFxuICAgICAgb3V0ZXJUYWdOYW1lID0gX3JlZjIub3V0ZXJUYWdOYW1lLFxuICAgICAgd2lkdGggPSBfcmVmMi53aWR0aDtcbiAgdmFyIGluc3RhbmNlID0gX3JlZjMuaW5zdGFuY2U7XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoaW5uZXJUYWdOYW1lICE9IG51bGwgfHwgb3V0ZXJUYWdOYW1lICE9IG51bGwpIHtcbiAgICAgIGlmIChkZXZXYXJuaW5nc1RhZ05hbWUkMSAmJiAhZGV2V2FybmluZ3NUYWdOYW1lJDEuaGFzKGluc3RhbmNlKSkge1xuICAgICAgICBkZXZXYXJuaW5nc1RhZ05hbWUkMS5hZGQoaW5zdGFuY2UpO1xuICAgICAgICBjb25zb2xlLndhcm4oJ1RoZSBpbm5lclRhZ05hbWUgYW5kIG91dGVyVGFnTmFtZSBwcm9wcyBoYXZlIGJlZW4gZGVwcmVjYXRlZC4gJyArICdQbGVhc2UgdXNlIHRoZSBpbm5lckVsZW1lbnRUeXBlIGFuZCBvdXRlckVsZW1lbnRUeXBlIHByb3BzIGluc3RlYWQuJyk7XG4gICAgICB9XG4gICAgfSAvLyBUT0RPIERlcHJlY2F0ZSBkaXJlY3Rpb24gXCJob3Jpem9udGFsXCJcblxuXG4gICAgdmFyIGlzSG9yaXpvbnRhbCA9IGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnIHx8IGxheW91dCA9PT0gJ2hvcml6b250YWwnO1xuXG4gICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2hvcml6b250YWwnOlxuICAgICAgY2FzZSAndmVydGljYWwnOlxuICAgICAgICBpZiAoZGV2V2FybmluZ3NEaXJlY3Rpb24gJiYgIWRldldhcm5pbmdzRGlyZWN0aW9uLmhhcyhpbnN0YW5jZSkpIHtcbiAgICAgICAgICBkZXZXYXJuaW5nc0RpcmVjdGlvbi5hZGQoaW5zdGFuY2UpO1xuICAgICAgICAgIGNvbnNvbGUud2FybignVGhlIGRpcmVjdGlvbiBwcm9wIHNob3VsZCBiZSBlaXRoZXIgXCJsdHJcIiAoZGVmYXVsdCkgb3IgXCJydGxcIi4gJyArICdQbGVhc2UgdXNlIHRoZSBsYXlvdXQgcHJvcCB0byBzcGVjaWZ5IFwidmVydGljYWxcIiAoZGVmYXVsdCkgb3IgXCJob3Jpem9udGFsXCIgb3JpZW50YXRpb24uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnbHRyJzpcbiAgICAgIGNhc2UgJ3J0bCc6XG4gICAgICAgIC8vIFZhbGlkIHZhbHVlc1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJkaXJlY3Rpb25cIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdWYWx1ZSBzaG91bGQgYmUgZWl0aGVyIFwibHRyXCIgb3IgXCJydGxcIi4gJyArIChcIlxcXCJcIiArIGRpcmVjdGlvbiArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgfVxuXG4gICAgc3dpdGNoIChsYXlvdXQpIHtcbiAgICAgIGNhc2UgJ2hvcml6b250YWwnOlxuICAgICAgY2FzZSAndmVydGljYWwnOlxuICAgICAgICAvLyBWYWxpZCB2YWx1ZXNcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IEVycm9yKCdBbiBpbnZhbGlkIFwibGF5b3V0XCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmFsdWUgc2hvdWxkIGJlIGVpdGhlciBcImhvcml6b250YWxcIiBvciBcInZlcnRpY2FsXCIuICcgKyAoXCJcXFwiXCIgKyBsYXlvdXQgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgIH1cblxuICAgIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcImNoaWxkcmVuXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmFsdWUgc2hvdWxkIGJlIGEgUmVhY3QgY29tcG9uZW50LiAnICsgKFwiXFxcIlwiICsgKGNoaWxkcmVuID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIGNoaWxkcmVuKSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgfVxuXG4gICAgaWYgKGlzSG9yaXpvbnRhbCAmJiB0eXBlb2Ygd2lkdGggIT09ICdudW1iZXInKSB7XG4gICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcIndpZHRoXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnSG9yaXpvbnRhbCBsaXN0cyBtdXN0IHNwZWNpZnkgYSBudW1iZXIgZm9yIHdpZHRoLiAnICsgKFwiXFxcIlwiICsgKHdpZHRoID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIHdpZHRoKSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgfSBlbHNlIGlmICghaXNIb3Jpem9udGFsICYmIHR5cGVvZiBoZWlnaHQgIT09ICdudW1iZXInKSB7XG4gICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcImhlaWdodFwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ1ZlcnRpY2FsIGxpc3RzIG11c3Qgc3BlY2lmeSBhIG51bWJlciBmb3IgaGVpZ2h0LiAnICsgKFwiXFxcIlwiICsgKGhlaWdodCA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBoZWlnaHQpICsgXCJcXFwiIHdhcyBzcGVjaWZpZWQuXCIpKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBERUZBVUxUX0VTVElNQVRFRF9JVEVNX1NJWkUkMSA9IDUwO1xuXG52YXIgZ2V0SXRlbU1ldGFkYXRhJDEgPSBmdW5jdGlvbiBnZXRJdGVtTWV0YWRhdGEocHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKSB7XG4gIHZhciBfcmVmID0gcHJvcHMsXG4gICAgICBpdGVtU2l6ZSA9IF9yZWYuaXRlbVNpemU7XG4gIHZhciBpdGVtTWV0YWRhdGFNYXAgPSBpbnN0YW5jZVByb3BzLml0ZW1NZXRhZGF0YU1hcCxcbiAgICAgIGxhc3RNZWFzdXJlZEluZGV4ID0gaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRJbmRleDtcblxuICBpZiAoaW5kZXggPiBsYXN0TWVhc3VyZWRJbmRleCkge1xuICAgIHZhciBvZmZzZXQgPSAwO1xuXG4gICAgaWYgKGxhc3RNZWFzdXJlZEluZGV4ID49IDApIHtcbiAgICAgIHZhciBpdGVtTWV0YWRhdGEgPSBpdGVtTWV0YWRhdGFNYXBbbGFzdE1lYXN1cmVkSW5kZXhdO1xuICAgICAgb2Zmc2V0ID0gaXRlbU1ldGFkYXRhLm9mZnNldCArIGl0ZW1NZXRhZGF0YS5zaXplO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSBsYXN0TWVhc3VyZWRJbmRleCArIDE7IGkgPD0gaW5kZXg7IGkrKykge1xuICAgICAgdmFyIHNpemUgPSBpdGVtU2l6ZShpKTtcbiAgICAgIGl0ZW1NZXRhZGF0YU1hcFtpXSA9IHtcbiAgICAgICAgb2Zmc2V0OiBvZmZzZXQsXG4gICAgICAgIHNpemU6IHNpemVcbiAgICAgIH07XG4gICAgICBvZmZzZXQgKz0gc2l6ZTtcbiAgICB9XG5cbiAgICBpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZEluZGV4ID0gaW5kZXg7XG4gIH1cblxuICByZXR1cm4gaXRlbU1ldGFkYXRhTWFwW2luZGV4XTtcbn07XG5cbnZhciBmaW5kTmVhcmVzdEl0ZW0kMSA9IGZ1bmN0aW9uIGZpbmROZWFyZXN0SXRlbShwcm9wcywgaW5zdGFuY2VQcm9wcywgb2Zmc2V0KSB7XG4gIHZhciBpdGVtTWV0YWRhdGFNYXAgPSBpbnN0YW5jZVByb3BzLml0ZW1NZXRhZGF0YU1hcCxcbiAgICAgIGxhc3RNZWFzdXJlZEluZGV4ID0gaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRJbmRleDtcbiAgdmFyIGxhc3RNZWFzdXJlZEl0ZW1PZmZzZXQgPSBsYXN0TWVhc3VyZWRJbmRleCA+IDAgPyBpdGVtTWV0YWRhdGFNYXBbbGFzdE1lYXN1cmVkSW5kZXhdLm9mZnNldCA6IDA7XG5cbiAgaWYgKGxhc3RNZWFzdXJlZEl0ZW1PZmZzZXQgPj0gb2Zmc2V0KSB7XG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSBtZWFzdXJlZCBpdGVtcyB3aXRoaW4gdGhpcyByYW5nZSBqdXN0IHVzZSBhIGJpbmFyeSBzZWFyY2ggYXMgaXQncyBmYXN0ZXIuXG4gICAgcmV0dXJuIGZpbmROZWFyZXN0SXRlbUJpbmFyeVNlYXJjaCQxKHByb3BzLCBpbnN0YW5jZVByb3BzLCBsYXN0TWVhc3VyZWRJbmRleCwgMCwgb2Zmc2V0KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBJZiB3ZSBoYXZlbid0IHlldCBtZWFzdXJlZCB0aGlzIGhpZ2gsIGZhbGxiYWNrIHRvIGFuIGV4cG9uZW50aWFsIHNlYXJjaCB3aXRoIGFuIGlubmVyIGJpbmFyeSBzZWFyY2guXG4gICAgLy8gVGhlIGV4cG9uZW50aWFsIHNlYXJjaCBhdm9pZHMgcHJlLWNvbXB1dGluZyBzaXplcyBmb3IgdGhlIGZ1bGwgc2V0IG9mIGl0ZW1zIGFzIGEgYmluYXJ5IHNlYXJjaCB3b3VsZC5cbiAgICAvLyBUaGUgb3ZlcmFsbCBjb21wbGV4aXR5IGZvciB0aGlzIGFwcHJvYWNoIGlzIE8obG9nIG4pLlxuICAgIHJldHVybiBmaW5kTmVhcmVzdEl0ZW1FeHBvbmVudGlhbFNlYXJjaCQxKHByb3BzLCBpbnN0YW5jZVByb3BzLCBNYXRoLm1heCgwLCBsYXN0TWVhc3VyZWRJbmRleCksIG9mZnNldCk7XG4gIH1cbn07XG5cbnZhciBmaW5kTmVhcmVzdEl0ZW1CaW5hcnlTZWFyY2gkMSA9IGZ1bmN0aW9uIGZpbmROZWFyZXN0SXRlbUJpbmFyeVNlYXJjaChwcm9wcywgaW5zdGFuY2VQcm9wcywgaGlnaCwgbG93LCBvZmZzZXQpIHtcbiAgd2hpbGUgKGxvdyA8PSBoaWdoKSB7XG4gICAgdmFyIG1pZGRsZSA9IGxvdyArIE1hdGguZmxvb3IoKGhpZ2ggLSBsb3cpIC8gMik7XG4gICAgdmFyIGN1cnJlbnRPZmZzZXQgPSBnZXRJdGVtTWV0YWRhdGEkMShwcm9wcywgbWlkZGxlLCBpbnN0YW5jZVByb3BzKS5vZmZzZXQ7XG5cbiAgICBpZiAoY3VycmVudE9mZnNldCA9PT0gb2Zmc2V0KSB7XG4gICAgICByZXR1cm4gbWlkZGxlO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudE9mZnNldCA8IG9mZnNldCkge1xuICAgICAgbG93ID0gbWlkZGxlICsgMTtcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRPZmZzZXQgPiBvZmZzZXQpIHtcbiAgICAgIGhpZ2ggPSBtaWRkbGUgLSAxO1xuICAgIH1cbiAgfVxuXG4gIGlmIChsb3cgPiAwKSB7XG4gICAgcmV0dXJuIGxvdyAtIDE7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbn07XG5cbnZhciBmaW5kTmVhcmVzdEl0ZW1FeHBvbmVudGlhbFNlYXJjaCQxID0gZnVuY3Rpb24gZmluZE5lYXJlc3RJdGVtRXhwb25lbnRpYWxTZWFyY2gocHJvcHMsIGluc3RhbmNlUHJvcHMsIGluZGV4LCBvZmZzZXQpIHtcbiAgdmFyIGl0ZW1Db3VudCA9IHByb3BzLml0ZW1Db3VudDtcbiAgdmFyIGludGVydmFsID0gMTtcblxuICB3aGlsZSAoaW5kZXggPCBpdGVtQ291bnQgJiYgZ2V0SXRlbU1ldGFkYXRhJDEocHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKS5vZmZzZXQgPCBvZmZzZXQpIHtcbiAgICBpbmRleCArPSBpbnRlcnZhbDtcbiAgICBpbnRlcnZhbCAqPSAyO1xuICB9XG5cbiAgcmV0dXJuIGZpbmROZWFyZXN0SXRlbUJpbmFyeVNlYXJjaCQxKHByb3BzLCBpbnN0YW5jZVByb3BzLCBNYXRoLm1pbihpbmRleCwgaXRlbUNvdW50IC0gMSksIE1hdGguZmxvb3IoaW5kZXggLyAyKSwgb2Zmc2V0KTtcbn07XG5cbnZhciBnZXRFc3RpbWF0ZWRUb3RhbFNpemUgPSBmdW5jdGlvbiBnZXRFc3RpbWF0ZWRUb3RhbFNpemUoX3JlZjIsIF9yZWYzKSB7XG4gIHZhciBpdGVtQ291bnQgPSBfcmVmMi5pdGVtQ291bnQ7XG4gIHZhciBpdGVtTWV0YWRhdGFNYXAgPSBfcmVmMy5pdGVtTWV0YWRhdGFNYXAsXG4gICAgICBlc3RpbWF0ZWRJdGVtU2l6ZSA9IF9yZWYzLmVzdGltYXRlZEl0ZW1TaXplLFxuICAgICAgbGFzdE1lYXN1cmVkSW5kZXggPSBfcmVmMy5sYXN0TWVhc3VyZWRJbmRleDtcbiAgdmFyIHRvdGFsU2l6ZU9mTWVhc3VyZWRJdGVtcyA9IDA7IC8vIEVkZ2UgY2FzZSBjaGVjayBmb3Igd2hlbiB0aGUgbnVtYmVyIG9mIGl0ZW1zIGRlY3JlYXNlcyB3aGlsZSBhIHNjcm9sbCBpcyBpbiBwcm9ncmVzcy5cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2J2YXVnaG4vcmVhY3Qtd2luZG93L3B1bGwvMTM4XG5cbiAgaWYgKGxhc3RNZWFzdXJlZEluZGV4ID49IGl0ZW1Db3VudCkge1xuICAgIGxhc3RNZWFzdXJlZEluZGV4ID0gaXRlbUNvdW50IC0gMTtcbiAgfVxuXG4gIGlmIChsYXN0TWVhc3VyZWRJbmRleCA+PSAwKSB7XG4gICAgdmFyIGl0ZW1NZXRhZGF0YSA9IGl0ZW1NZXRhZGF0YU1hcFtsYXN0TWVhc3VyZWRJbmRleF07XG4gICAgdG90YWxTaXplT2ZNZWFzdXJlZEl0ZW1zID0gaXRlbU1ldGFkYXRhLm9mZnNldCArIGl0ZW1NZXRhZGF0YS5zaXplO1xuICB9XG5cbiAgdmFyIG51bVVubWVhc3VyZWRJdGVtcyA9IGl0ZW1Db3VudCAtIGxhc3RNZWFzdXJlZEluZGV4IC0gMTtcbiAgdmFyIHRvdGFsU2l6ZU9mVW5tZWFzdXJlZEl0ZW1zID0gbnVtVW5tZWFzdXJlZEl0ZW1zICogZXN0aW1hdGVkSXRlbVNpemU7XG4gIHJldHVybiB0b3RhbFNpemVPZk1lYXN1cmVkSXRlbXMgKyB0b3RhbFNpemVPZlVubWVhc3VyZWRJdGVtcztcbn07XG5cbnZhciBWYXJpYWJsZVNpemVMaXN0ID1cbi8qI19fUFVSRV9fKi9cbmNyZWF0ZUxpc3RDb21wb25lbnQoe1xuICBnZXRJdGVtT2Zmc2V0OiBmdW5jdGlvbiBnZXRJdGVtT2Zmc2V0KHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykge1xuICAgIHJldHVybiBnZXRJdGVtTWV0YWRhdGEkMShwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpLm9mZnNldDtcbiAgfSxcbiAgZ2V0SXRlbVNpemU6IGZ1bmN0aW9uIGdldEl0ZW1TaXplKHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykge1xuICAgIHJldHVybiBpbnN0YW5jZVByb3BzLml0ZW1NZXRhZGF0YU1hcFtpbmRleF0uc2l6ZTtcbiAgfSxcbiAgZ2V0RXN0aW1hdGVkVG90YWxTaXplOiBnZXRFc3RpbWF0ZWRUb3RhbFNpemUsXG4gIGdldE9mZnNldEZvckluZGV4QW5kQWxpZ25tZW50OiBmdW5jdGlvbiBnZXRPZmZzZXRGb3JJbmRleEFuZEFsaWdubWVudChwcm9wcywgaW5kZXgsIGFsaWduLCBzY3JvbGxPZmZzZXQsIGluc3RhbmNlUHJvcHMpIHtcbiAgICB2YXIgZGlyZWN0aW9uID0gcHJvcHMuZGlyZWN0aW9uLFxuICAgICAgICBoZWlnaHQgPSBwcm9wcy5oZWlnaHQsXG4gICAgICAgIGxheW91dCA9IHByb3BzLmxheW91dCxcbiAgICAgICAgd2lkdGggPSBwcm9wcy53aWR0aDsgLy8gVE9ETyBEZXByZWNhdGUgZGlyZWN0aW9uIFwiaG9yaXpvbnRhbFwiXG5cbiAgICB2YXIgaXNIb3Jpem9udGFsID0gZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcgfHwgbGF5b3V0ID09PSAnaG9yaXpvbnRhbCc7XG4gICAgdmFyIHNpemUgPSBpc0hvcml6b250YWwgPyB3aWR0aCA6IGhlaWdodDtcbiAgICB2YXIgaXRlbU1ldGFkYXRhID0gZ2V0SXRlbU1ldGFkYXRhJDEocHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKTsgLy8gR2V0IGVzdGltYXRlZCB0b3RhbCBzaXplIGFmdGVyIEl0ZW1NZXRhZGF0YSBpcyBjb21wdXRlZCxcbiAgICAvLyBUbyBlbnN1cmUgaXQgcmVmbGVjdHMgYWN0dWFsIG1lYXN1cmVtZW50cyBpbnN0ZWFkIG9mIGp1c3QgZXN0aW1hdGVzLlxuXG4gICAgdmFyIGVzdGltYXRlZFRvdGFsU2l6ZSA9IGdldEVzdGltYXRlZFRvdGFsU2l6ZShwcm9wcywgaW5zdGFuY2VQcm9wcyk7XG4gICAgdmFyIG1heE9mZnNldCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGVzdGltYXRlZFRvdGFsU2l6ZSAtIHNpemUsIGl0ZW1NZXRhZGF0YS5vZmZzZXQpKTtcbiAgICB2YXIgbWluT2Zmc2V0ID0gTWF0aC5tYXgoMCwgaXRlbU1ldGFkYXRhLm9mZnNldCAtIHNpemUgKyBpdGVtTWV0YWRhdGEuc2l6ZSk7XG5cbiAgICBpZiAoYWxpZ24gPT09ICdzbWFydCcpIHtcbiAgICAgIGlmIChzY3JvbGxPZmZzZXQgPj0gbWluT2Zmc2V0IC0gc2l6ZSAmJiBzY3JvbGxPZmZzZXQgPD0gbWF4T2Zmc2V0ICsgc2l6ZSkge1xuICAgICAgICBhbGlnbiA9ICdhdXRvJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsaWduID0gJ2NlbnRlcic7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc3dpdGNoIChhbGlnbikge1xuICAgICAgY2FzZSAnc3RhcnQnOlxuICAgICAgICByZXR1cm4gbWF4T2Zmc2V0O1xuXG4gICAgICBjYXNlICdlbmQnOlxuICAgICAgICByZXR1cm4gbWluT2Zmc2V0O1xuXG4gICAgICBjYXNlICdjZW50ZXInOlxuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChtaW5PZmZzZXQgKyAobWF4T2Zmc2V0IC0gbWluT2Zmc2V0KSAvIDIpO1xuXG4gICAgICBjYXNlICdhdXRvJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChzY3JvbGxPZmZzZXQgPj0gbWluT2Zmc2V0ICYmIHNjcm9sbE9mZnNldCA8PSBtYXhPZmZzZXQpIHtcbiAgICAgICAgICByZXR1cm4gc2Nyb2xsT2Zmc2V0O1xuICAgICAgICB9IGVsc2UgaWYgKHNjcm9sbE9mZnNldCA8IG1pbk9mZnNldCkge1xuICAgICAgICAgIHJldHVybiBtaW5PZmZzZXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG1heE9mZnNldDtcbiAgICAgICAgfVxuXG4gICAgfVxuICB9LFxuICBnZXRTdGFydEluZGV4Rm9yT2Zmc2V0OiBmdW5jdGlvbiBnZXRTdGFydEluZGV4Rm9yT2Zmc2V0KHByb3BzLCBvZmZzZXQsIGluc3RhbmNlUHJvcHMpIHtcbiAgICByZXR1cm4gZmluZE5lYXJlc3RJdGVtJDEocHJvcHMsIGluc3RhbmNlUHJvcHMsIG9mZnNldCk7XG4gIH0sXG4gIGdldFN0b3BJbmRleEZvclN0YXJ0SW5kZXg6IGZ1bmN0aW9uIGdldFN0b3BJbmRleEZvclN0YXJ0SW5kZXgocHJvcHMsIHN0YXJ0SW5kZXgsIHNjcm9sbE9mZnNldCwgaW5zdGFuY2VQcm9wcykge1xuICAgIHZhciBkaXJlY3Rpb24gPSBwcm9wcy5kaXJlY3Rpb24sXG4gICAgICAgIGhlaWdodCA9IHByb3BzLmhlaWdodCxcbiAgICAgICAgaXRlbUNvdW50ID0gcHJvcHMuaXRlbUNvdW50LFxuICAgICAgICBsYXlvdXQgPSBwcm9wcy5sYXlvdXQsXG4gICAgICAgIHdpZHRoID0gcHJvcHMud2lkdGg7IC8vIFRPRE8gRGVwcmVjYXRlIGRpcmVjdGlvbiBcImhvcml6b250YWxcIlxuXG4gICAgdmFyIGlzSG9yaXpvbnRhbCA9IGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnIHx8IGxheW91dCA9PT0gJ2hvcml6b250YWwnO1xuICAgIHZhciBzaXplID0gaXNIb3Jpem9udGFsID8gd2lkdGggOiBoZWlnaHQ7XG4gICAgdmFyIGl0ZW1NZXRhZGF0YSA9IGdldEl0ZW1NZXRhZGF0YSQxKHByb3BzLCBzdGFydEluZGV4LCBpbnN0YW5jZVByb3BzKTtcbiAgICB2YXIgbWF4T2Zmc2V0ID0gc2Nyb2xsT2Zmc2V0ICsgc2l6ZTtcbiAgICB2YXIgb2Zmc2V0ID0gaXRlbU1ldGFkYXRhLm9mZnNldCArIGl0ZW1NZXRhZGF0YS5zaXplO1xuICAgIHZhciBzdG9wSW5kZXggPSBzdGFydEluZGV4O1xuXG4gICAgd2hpbGUgKHN0b3BJbmRleCA8IGl0ZW1Db3VudCAtIDEgJiYgb2Zmc2V0IDwgbWF4T2Zmc2V0KSB7XG4gICAgICBzdG9wSW5kZXgrKztcbiAgICAgIG9mZnNldCArPSBnZXRJdGVtTWV0YWRhdGEkMShwcm9wcywgc3RvcEluZGV4LCBpbnN0YW5jZVByb3BzKS5zaXplO1xuICAgIH1cblxuICAgIHJldHVybiBzdG9wSW5kZXg7XG4gIH0sXG4gIGluaXRJbnN0YW5jZVByb3BzOiBmdW5jdGlvbiBpbml0SW5zdGFuY2VQcm9wcyhwcm9wcywgaW5zdGFuY2UpIHtcbiAgICB2YXIgX3JlZjQgPSBwcm9wcyxcbiAgICAgICAgZXN0aW1hdGVkSXRlbVNpemUgPSBfcmVmNC5lc3RpbWF0ZWRJdGVtU2l6ZTtcbiAgICB2YXIgaW5zdGFuY2VQcm9wcyA9IHtcbiAgICAgIGl0ZW1NZXRhZGF0YU1hcDoge30sXG4gICAgICBlc3RpbWF0ZWRJdGVtU2l6ZTogZXN0aW1hdGVkSXRlbVNpemUgfHwgREVGQVVMVF9FU1RJTUFURURfSVRFTV9TSVpFJDEsXG4gICAgICBsYXN0TWVhc3VyZWRJbmRleDogLTFcbiAgICB9O1xuXG4gICAgaW5zdGFuY2UucmVzZXRBZnRlckluZGV4ID0gZnVuY3Rpb24gKGluZGV4LCBzaG91bGRGb3JjZVVwZGF0ZSkge1xuICAgICAgaWYgKHNob3VsZEZvcmNlVXBkYXRlID09PSB2b2lkIDApIHtcbiAgICAgICAgc2hvdWxkRm9yY2VVcGRhdGUgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZEluZGV4ID0gTWF0aC5taW4oaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRJbmRleCwgaW5kZXggLSAxKTsgLy8gV2UgY291bGQgcG90ZW50aWFsbHkgb3B0aW1pemUgZnVydGhlciBieSBvbmx5IGV2aWN0aW5nIHN0eWxlcyBhZnRlciB0aGlzIGluZGV4LFxuICAgICAgLy8gQnV0IHNpbmNlIHN0eWxlcyBhcmUgb25seSBjYWNoZWQgd2hpbGUgc2Nyb2xsaW5nIGlzIGluIHByb2dyZXNzLVxuICAgICAgLy8gSXQgc2VlbXMgYW4gdW5uZWNlc3Nhcnkgb3B0aW1pemF0aW9uLlxuICAgICAgLy8gSXQncyB1bmxpa2VseSB0aGF0IHJlc2V0QWZ0ZXJJbmRleCgpIHdpbGwgYmUgY2FsbGVkIHdoaWxlIGEgdXNlciBpcyBzY3JvbGxpbmcuXG5cbiAgICAgIGluc3RhbmNlLl9nZXRJdGVtU3R5bGVDYWNoZSgtMSk7XG5cbiAgICAgIGlmIChzaG91bGRGb3JjZVVwZGF0ZSkge1xuICAgICAgICBpbnN0YW5jZS5mb3JjZVVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gaW5zdGFuY2VQcm9wcztcbiAgfSxcbiAgc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZTogZmFsc2UsXG4gIHZhbGlkYXRlUHJvcHM6IGZ1bmN0aW9uIHZhbGlkYXRlUHJvcHMoX3JlZjUpIHtcbiAgICB2YXIgaXRlbVNpemUgPSBfcmVmNS5pdGVtU2l6ZTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW1TaXplICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IEVycm9yKCdBbiBpbnZhbGlkIFwiaXRlbVNpemVcIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdWYWx1ZSBzaG91bGQgYmUgYSBmdW5jdGlvbi4gJyArIChcIlxcXCJcIiArIChpdGVtU2l6ZSA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBpdGVtU2l6ZSkgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5cbnZhciBGaXhlZFNpemVHcmlkID1cbi8qI19fUFVSRV9fKi9cbmNyZWF0ZUdyaWRDb21wb25lbnQoe1xuICBnZXRDb2x1bW5PZmZzZXQ6IGZ1bmN0aW9uIGdldENvbHVtbk9mZnNldChfcmVmLCBpbmRleCkge1xuICAgIHZhciBjb2x1bW5XaWR0aCA9IF9yZWYuY29sdW1uV2lkdGg7XG4gICAgcmV0dXJuIGluZGV4ICogY29sdW1uV2lkdGg7XG4gIH0sXG4gIGdldENvbHVtbldpZHRoOiBmdW5jdGlvbiBnZXRDb2x1bW5XaWR0aChfcmVmMiwgaW5kZXgpIHtcbiAgICB2YXIgY29sdW1uV2lkdGggPSBfcmVmMi5jb2x1bW5XaWR0aDtcbiAgICByZXR1cm4gY29sdW1uV2lkdGg7XG4gIH0sXG4gIGdldFJvd09mZnNldDogZnVuY3Rpb24gZ2V0Um93T2Zmc2V0KF9yZWYzLCBpbmRleCkge1xuICAgIHZhciByb3dIZWlnaHQgPSBfcmVmMy5yb3dIZWlnaHQ7XG4gICAgcmV0dXJuIGluZGV4ICogcm93SGVpZ2h0O1xuICB9LFxuICBnZXRSb3dIZWlnaHQ6IGZ1bmN0aW9uIGdldFJvd0hlaWdodChfcmVmNCwgaW5kZXgpIHtcbiAgICB2YXIgcm93SGVpZ2h0ID0gX3JlZjQucm93SGVpZ2h0O1xuICAgIHJldHVybiByb3dIZWlnaHQ7XG4gIH0sXG4gIGdldEVzdGltYXRlZFRvdGFsSGVpZ2h0OiBmdW5jdGlvbiBnZXRFc3RpbWF0ZWRUb3RhbEhlaWdodChfcmVmNSkge1xuICAgIHZhciByb3dDb3VudCA9IF9yZWY1LnJvd0NvdW50LFxuICAgICAgICByb3dIZWlnaHQgPSBfcmVmNS5yb3dIZWlnaHQ7XG4gICAgcmV0dXJuIHJvd0hlaWdodCAqIHJvd0NvdW50O1xuICB9LFxuICBnZXRFc3RpbWF0ZWRUb3RhbFdpZHRoOiBmdW5jdGlvbiBnZXRFc3RpbWF0ZWRUb3RhbFdpZHRoKF9yZWY2KSB7XG4gICAgdmFyIGNvbHVtbkNvdW50ID0gX3JlZjYuY29sdW1uQ291bnQsXG4gICAgICAgIGNvbHVtbldpZHRoID0gX3JlZjYuY29sdW1uV2lkdGg7XG4gICAgcmV0dXJuIGNvbHVtbldpZHRoICogY29sdW1uQ291bnQ7XG4gIH0sXG4gIGdldE9mZnNldEZvckNvbHVtbkFuZEFsaWdubWVudDogZnVuY3Rpb24gZ2V0T2Zmc2V0Rm9yQ29sdW1uQW5kQWxpZ25tZW50KF9yZWY3LCBjb2x1bW5JbmRleCwgYWxpZ24sIHNjcm9sbExlZnQsIGluc3RhbmNlUHJvcHMsIHNjcm9sbGJhclNpemUpIHtcbiAgICB2YXIgY29sdW1uQ291bnQgPSBfcmVmNy5jb2x1bW5Db3VudCxcbiAgICAgICAgY29sdW1uV2lkdGggPSBfcmVmNy5jb2x1bW5XaWR0aCxcbiAgICAgICAgd2lkdGggPSBfcmVmNy53aWR0aDtcbiAgICB2YXIgbGFzdENvbHVtbk9mZnNldCA9IE1hdGgubWF4KDAsIGNvbHVtbkNvdW50ICogY29sdW1uV2lkdGggLSB3aWR0aCk7XG4gICAgdmFyIG1heE9mZnNldCA9IE1hdGgubWluKGxhc3RDb2x1bW5PZmZzZXQsIGNvbHVtbkluZGV4ICogY29sdW1uV2lkdGgpO1xuICAgIHZhciBtaW5PZmZzZXQgPSBNYXRoLm1heCgwLCBjb2x1bW5JbmRleCAqIGNvbHVtbldpZHRoIC0gd2lkdGggKyBzY3JvbGxiYXJTaXplICsgY29sdW1uV2lkdGgpO1xuXG4gICAgaWYgKGFsaWduID09PSAnc21hcnQnKSB7XG4gICAgICBpZiAoc2Nyb2xsTGVmdCA+PSBtaW5PZmZzZXQgLSB3aWR0aCAmJiBzY3JvbGxMZWZ0IDw9IG1heE9mZnNldCArIHdpZHRoKSB7XG4gICAgICAgIGFsaWduID0gJ2F1dG8nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxpZ24gPSAnY2VudGVyJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzd2l0Y2ggKGFsaWduKSB7XG4gICAgICBjYXNlICdzdGFydCc6XG4gICAgICAgIHJldHVybiBtYXhPZmZzZXQ7XG5cbiAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgIHJldHVybiBtaW5PZmZzZXQ7XG5cbiAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICAgIC8vIFwiQ2VudGVyZWRcIiBvZmZzZXQgaXMgdXN1YWxseSB0aGUgYXZlcmFnZSBvZiB0aGUgbWluIGFuZCBtYXguXG4gICAgICAgIC8vIEJ1dCBuZWFyIHRoZSBlZGdlcyBvZiB0aGUgbGlzdCwgdGhpcyBkb2Vzbid0IGhvbGQgdHJ1ZS5cbiAgICAgICAgdmFyIG1pZGRsZU9mZnNldCA9IE1hdGgucm91bmQobWluT2Zmc2V0ICsgKG1heE9mZnNldCAtIG1pbk9mZnNldCkgLyAyKTtcblxuICAgICAgICBpZiAobWlkZGxlT2Zmc2V0IDwgTWF0aC5jZWlsKHdpZHRoIC8gMikpIHtcbiAgICAgICAgICByZXR1cm4gMDsgLy8gbmVhciB0aGUgYmVnaW5uaW5nXG4gICAgICAgIH0gZWxzZSBpZiAobWlkZGxlT2Zmc2V0ID4gbGFzdENvbHVtbk9mZnNldCArIE1hdGguZmxvb3Iod2lkdGggLyAyKSkge1xuICAgICAgICAgIHJldHVybiBsYXN0Q29sdW1uT2Zmc2V0OyAvLyBuZWFyIHRoZSBlbmRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbWlkZGxlT2Zmc2V0O1xuICAgICAgICB9XG5cbiAgICAgIGNhc2UgJ2F1dG8nOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKHNjcm9sbExlZnQgPj0gbWluT2Zmc2V0ICYmIHNjcm9sbExlZnQgPD0gbWF4T2Zmc2V0KSB7XG4gICAgICAgICAgcmV0dXJuIHNjcm9sbExlZnQ7XG4gICAgICAgIH0gZWxzZSBpZiAobWluT2Zmc2V0ID4gbWF4T2Zmc2V0KSB7XG4gICAgICAgICAgLy8gQmVjYXVzZSB3ZSBvbmx5IHRha2UgaW50byBhY2NvdW50IHRoZSBzY3JvbGxiYXIgc2l6ZSB3aGVuIGNhbGN1bGF0aW5nIG1pbk9mZnNldFxuICAgICAgICAgIC8vIHRoaXMgdmFsdWUgY2FuIGJlIGxhcmdlciB0aGFuIG1heE9mZnNldCB3aGVuIGF0IHRoZSBlbmQgb2YgdGhlIGxpc3RcbiAgICAgICAgICByZXR1cm4gbWluT2Zmc2V0O1xuICAgICAgICB9IGVsc2UgaWYgKHNjcm9sbExlZnQgPCBtaW5PZmZzZXQpIHtcbiAgICAgICAgICByZXR1cm4gbWluT2Zmc2V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBtYXhPZmZzZXQ7XG4gICAgICAgIH1cblxuICAgIH1cbiAgfSxcbiAgZ2V0T2Zmc2V0Rm9yUm93QW5kQWxpZ25tZW50OiBmdW5jdGlvbiBnZXRPZmZzZXRGb3JSb3dBbmRBbGlnbm1lbnQoX3JlZjgsIHJvd0luZGV4LCBhbGlnbiwgc2Nyb2xsVG9wLCBpbnN0YW5jZVByb3BzLCBzY3JvbGxiYXJTaXplKSB7XG4gICAgdmFyIHJvd0hlaWdodCA9IF9yZWY4LnJvd0hlaWdodCxcbiAgICAgICAgaGVpZ2h0ID0gX3JlZjguaGVpZ2h0LFxuICAgICAgICByb3dDb3VudCA9IF9yZWY4LnJvd0NvdW50O1xuICAgIHZhciBsYXN0Um93T2Zmc2V0ID0gTWF0aC5tYXgoMCwgcm93Q291bnQgKiByb3dIZWlnaHQgLSBoZWlnaHQpO1xuICAgIHZhciBtYXhPZmZzZXQgPSBNYXRoLm1pbihsYXN0Um93T2Zmc2V0LCByb3dJbmRleCAqIHJvd0hlaWdodCk7XG4gICAgdmFyIG1pbk9mZnNldCA9IE1hdGgubWF4KDAsIHJvd0luZGV4ICogcm93SGVpZ2h0IC0gaGVpZ2h0ICsgc2Nyb2xsYmFyU2l6ZSArIHJvd0hlaWdodCk7XG5cbiAgICBpZiAoYWxpZ24gPT09ICdzbWFydCcpIHtcbiAgICAgIGlmIChzY3JvbGxUb3AgPj0gbWluT2Zmc2V0IC0gaGVpZ2h0ICYmIHNjcm9sbFRvcCA8PSBtYXhPZmZzZXQgKyBoZWlnaHQpIHtcbiAgICAgICAgYWxpZ24gPSAnYXV0byc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGlnbiA9ICdjZW50ZXInO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAoYWxpZ24pIHtcbiAgICAgIGNhc2UgJ3N0YXJ0JzpcbiAgICAgICAgcmV0dXJuIG1heE9mZnNldDtcblxuICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcblxuICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgICAgLy8gXCJDZW50ZXJlZFwiIG9mZnNldCBpcyB1c3VhbGx5IHRoZSBhdmVyYWdlIG9mIHRoZSBtaW4gYW5kIG1heC5cbiAgICAgICAgLy8gQnV0IG5lYXIgdGhlIGVkZ2VzIG9mIHRoZSBsaXN0LCB0aGlzIGRvZXNuJ3QgaG9sZCB0cnVlLlxuICAgICAgICB2YXIgbWlkZGxlT2Zmc2V0ID0gTWF0aC5yb3VuZChtaW5PZmZzZXQgKyAobWF4T2Zmc2V0IC0gbWluT2Zmc2V0KSAvIDIpO1xuXG4gICAgICAgIGlmIChtaWRkbGVPZmZzZXQgPCBNYXRoLmNlaWwoaGVpZ2h0IC8gMikpIHtcbiAgICAgICAgICByZXR1cm4gMDsgLy8gbmVhciB0aGUgYmVnaW5uaW5nXG4gICAgICAgIH0gZWxzZSBpZiAobWlkZGxlT2Zmc2V0ID4gbGFzdFJvd09mZnNldCArIE1hdGguZmxvb3IoaGVpZ2h0IC8gMikpIHtcbiAgICAgICAgICByZXR1cm4gbGFzdFJvd09mZnNldDsgLy8gbmVhciB0aGUgZW5kXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG1pZGRsZU9mZnNldDtcbiAgICAgICAgfVxuXG4gICAgICBjYXNlICdhdXRvJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChzY3JvbGxUb3AgPj0gbWluT2Zmc2V0ICYmIHNjcm9sbFRvcCA8PSBtYXhPZmZzZXQpIHtcbiAgICAgICAgICByZXR1cm4gc2Nyb2xsVG9wO1xuICAgICAgICB9IGVsc2UgaWYgKG1pbk9mZnNldCA+IG1heE9mZnNldCkge1xuICAgICAgICAgIC8vIEJlY2F1c2Ugd2Ugb25seSB0YWtlIGludG8gYWNjb3VudCB0aGUgc2Nyb2xsYmFyIHNpemUgd2hlbiBjYWxjdWxhdGluZyBtaW5PZmZzZXRcbiAgICAgICAgICAvLyB0aGlzIHZhbHVlIGNhbiBiZSBsYXJnZXIgdGhhbiBtYXhPZmZzZXQgd2hlbiBhdCB0aGUgZW5kIG9mIHRoZSBsaXN0XG4gICAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcbiAgICAgICAgfSBlbHNlIGlmIChzY3JvbGxUb3AgPCBtaW5PZmZzZXQpIHtcbiAgICAgICAgICByZXR1cm4gbWluT2Zmc2V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBtYXhPZmZzZXQ7XG4gICAgICAgIH1cblxuICAgIH1cbiAgfSxcbiAgZ2V0Q29sdW1uU3RhcnRJbmRleEZvck9mZnNldDogZnVuY3Rpb24gZ2V0Q29sdW1uU3RhcnRJbmRleEZvck9mZnNldChfcmVmOSwgc2Nyb2xsTGVmdCkge1xuICAgIHZhciBjb2x1bW5XaWR0aCA9IF9yZWY5LmNvbHVtbldpZHRoLFxuICAgICAgICBjb2x1bW5Db3VudCA9IF9yZWY5LmNvbHVtbkNvdW50O1xuICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbihjb2x1bW5Db3VudCAtIDEsIE1hdGguZmxvb3Ioc2Nyb2xsTGVmdCAvIGNvbHVtbldpZHRoKSkpO1xuICB9LFxuICBnZXRDb2x1bW5TdG9wSW5kZXhGb3JTdGFydEluZGV4OiBmdW5jdGlvbiBnZXRDb2x1bW5TdG9wSW5kZXhGb3JTdGFydEluZGV4KF9yZWYxMCwgc3RhcnRJbmRleCwgc2Nyb2xsTGVmdCkge1xuICAgIHZhciBjb2x1bW5XaWR0aCA9IF9yZWYxMC5jb2x1bW5XaWR0aCxcbiAgICAgICAgY29sdW1uQ291bnQgPSBfcmVmMTAuY29sdW1uQ291bnQsXG4gICAgICAgIHdpZHRoID0gX3JlZjEwLndpZHRoO1xuICAgIHZhciBsZWZ0ID0gc3RhcnRJbmRleCAqIGNvbHVtbldpZHRoO1xuICAgIHZhciBudW1WaXNpYmxlQ29sdW1ucyA9IE1hdGguY2VpbCgod2lkdGggKyBzY3JvbGxMZWZ0IC0gbGVmdCkgLyBjb2x1bW5XaWR0aCk7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKGNvbHVtbkNvdW50IC0gMSwgc3RhcnRJbmRleCArIG51bVZpc2libGVDb2x1bW5zIC0gMSAvLyAtMSBpcyBiZWNhdXNlIHN0b3AgaW5kZXggaXMgaW5jbHVzaXZlXG4gICAgKSk7XG4gIH0sXG4gIGdldFJvd1N0YXJ0SW5kZXhGb3JPZmZzZXQ6IGZ1bmN0aW9uIGdldFJvd1N0YXJ0SW5kZXhGb3JPZmZzZXQoX3JlZjExLCBzY3JvbGxUb3ApIHtcbiAgICB2YXIgcm93SGVpZ2h0ID0gX3JlZjExLnJvd0hlaWdodCxcbiAgICAgICAgcm93Q291bnQgPSBfcmVmMTEucm93Q291bnQ7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKHJvd0NvdW50IC0gMSwgTWF0aC5mbG9vcihzY3JvbGxUb3AgLyByb3dIZWlnaHQpKSk7XG4gIH0sXG4gIGdldFJvd1N0b3BJbmRleEZvclN0YXJ0SW5kZXg6IGZ1bmN0aW9uIGdldFJvd1N0b3BJbmRleEZvclN0YXJ0SW5kZXgoX3JlZjEyLCBzdGFydEluZGV4LCBzY3JvbGxUb3ApIHtcbiAgICB2YXIgcm93SGVpZ2h0ID0gX3JlZjEyLnJvd0hlaWdodCxcbiAgICAgICAgcm93Q291bnQgPSBfcmVmMTIucm93Q291bnQsXG4gICAgICAgIGhlaWdodCA9IF9yZWYxMi5oZWlnaHQ7XG4gICAgdmFyIHRvcCA9IHN0YXJ0SW5kZXggKiByb3dIZWlnaHQ7XG4gICAgdmFyIG51bVZpc2libGVSb3dzID0gTWF0aC5jZWlsKChoZWlnaHQgKyBzY3JvbGxUb3AgLSB0b3ApIC8gcm93SGVpZ2h0KTtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4ocm93Q291bnQgLSAxLCBzdGFydEluZGV4ICsgbnVtVmlzaWJsZVJvd3MgLSAxIC8vIC0xIGlzIGJlY2F1c2Ugc3RvcCBpbmRleCBpcyBpbmNsdXNpdmVcbiAgICApKTtcbiAgfSxcbiAgaW5pdEluc3RhbmNlUHJvcHM6IGZ1bmN0aW9uIGluaXRJbnN0YW5jZVByb3BzKHByb3BzKSB7Ly8gTm9vcFxuICB9LFxuICBzaG91bGRSZXNldFN0eWxlQ2FjaGVPbkl0ZW1TaXplQ2hhbmdlOiB0cnVlLFxuICB2YWxpZGF0ZVByb3BzOiBmdW5jdGlvbiB2YWxpZGF0ZVByb3BzKF9yZWYxMykge1xuICAgIHZhciBjb2x1bW5XaWR0aCA9IF9yZWYxMy5jb2x1bW5XaWR0aCxcbiAgICAgICAgcm93SGVpZ2h0ID0gX3JlZjEzLnJvd0hlaWdodDtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAodHlwZW9mIGNvbHVtbldpZHRoICE9PSAnbnVtYmVyJykge1xuICAgICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcImNvbHVtbldpZHRoXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmFsdWUgc2hvdWxkIGJlIGEgbnVtYmVyLiAnICsgKFwiXFxcIlwiICsgKGNvbHVtbldpZHRoID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIGNvbHVtbldpZHRoKSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygcm93SGVpZ2h0ICE9PSAnbnVtYmVyJykge1xuICAgICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcInJvd0hlaWdodFwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ1ZhbHVlIHNob3VsZCBiZSBhIG51bWJlci4gJyArIChcIlxcXCJcIiArIChyb3dIZWlnaHQgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2Ygcm93SGVpZ2h0KSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxudmFyIEZpeGVkU2l6ZUxpc3QgPVxuLyojX19QVVJFX18qL1xuY3JlYXRlTGlzdENvbXBvbmVudCh7XG4gIGdldEl0ZW1PZmZzZXQ6IGZ1bmN0aW9uIGdldEl0ZW1PZmZzZXQoX3JlZiwgaW5kZXgpIHtcbiAgICB2YXIgaXRlbVNpemUgPSBfcmVmLml0ZW1TaXplO1xuICAgIHJldHVybiBpbmRleCAqIGl0ZW1TaXplO1xuICB9LFxuICBnZXRJdGVtU2l6ZTogZnVuY3Rpb24gZ2V0SXRlbVNpemUoX3JlZjIsIGluZGV4KSB7XG4gICAgdmFyIGl0ZW1TaXplID0gX3JlZjIuaXRlbVNpemU7XG4gICAgcmV0dXJuIGl0ZW1TaXplO1xuICB9LFxuICBnZXRFc3RpbWF0ZWRUb3RhbFNpemU6IGZ1bmN0aW9uIGdldEVzdGltYXRlZFRvdGFsU2l6ZShfcmVmMykge1xuICAgIHZhciBpdGVtQ291bnQgPSBfcmVmMy5pdGVtQ291bnQsXG4gICAgICAgIGl0ZW1TaXplID0gX3JlZjMuaXRlbVNpemU7XG4gICAgcmV0dXJuIGl0ZW1TaXplICogaXRlbUNvdW50O1xuICB9LFxuICBnZXRPZmZzZXRGb3JJbmRleEFuZEFsaWdubWVudDogZnVuY3Rpb24gZ2V0T2Zmc2V0Rm9ySW5kZXhBbmRBbGlnbm1lbnQoX3JlZjQsIGluZGV4LCBhbGlnbiwgc2Nyb2xsT2Zmc2V0KSB7XG4gICAgdmFyIGRpcmVjdGlvbiA9IF9yZWY0LmRpcmVjdGlvbixcbiAgICAgICAgaGVpZ2h0ID0gX3JlZjQuaGVpZ2h0LFxuICAgICAgICBpdGVtQ291bnQgPSBfcmVmNC5pdGVtQ291bnQsXG4gICAgICAgIGl0ZW1TaXplID0gX3JlZjQuaXRlbVNpemUsXG4gICAgICAgIGxheW91dCA9IF9yZWY0LmxheW91dCxcbiAgICAgICAgd2lkdGggPSBfcmVmNC53aWR0aDtcbiAgICAvLyBUT0RPIERlcHJlY2F0ZSBkaXJlY3Rpb24gXCJob3Jpem9udGFsXCJcbiAgICB2YXIgaXNIb3Jpem9udGFsID0gZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcgfHwgbGF5b3V0ID09PSAnaG9yaXpvbnRhbCc7XG4gICAgdmFyIHNpemUgPSBpc0hvcml6b250YWwgPyB3aWR0aCA6IGhlaWdodDtcbiAgICB2YXIgbGFzdEl0ZW1PZmZzZXQgPSBNYXRoLm1heCgwLCBpdGVtQ291bnQgKiBpdGVtU2l6ZSAtIHNpemUpO1xuICAgIHZhciBtYXhPZmZzZXQgPSBNYXRoLm1pbihsYXN0SXRlbU9mZnNldCwgaW5kZXggKiBpdGVtU2l6ZSk7XG4gICAgdmFyIG1pbk9mZnNldCA9IE1hdGgubWF4KDAsIGluZGV4ICogaXRlbVNpemUgLSBzaXplICsgaXRlbVNpemUpO1xuXG4gICAgaWYgKGFsaWduID09PSAnc21hcnQnKSB7XG4gICAgICBpZiAoc2Nyb2xsT2Zmc2V0ID49IG1pbk9mZnNldCAtIHNpemUgJiYgc2Nyb2xsT2Zmc2V0IDw9IG1heE9mZnNldCArIHNpemUpIHtcbiAgICAgICAgYWxpZ24gPSAnYXV0byc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGlnbiA9ICdjZW50ZXInO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAoYWxpZ24pIHtcbiAgICAgIGNhc2UgJ3N0YXJ0JzpcbiAgICAgICAgcmV0dXJuIG1heE9mZnNldDtcblxuICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcblxuICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgICAge1xuICAgICAgICAgIC8vIFwiQ2VudGVyZWRcIiBvZmZzZXQgaXMgdXN1YWxseSB0aGUgYXZlcmFnZSBvZiB0aGUgbWluIGFuZCBtYXguXG4gICAgICAgICAgLy8gQnV0IG5lYXIgdGhlIGVkZ2VzIG9mIHRoZSBsaXN0LCB0aGlzIGRvZXNuJ3QgaG9sZCB0cnVlLlxuICAgICAgICAgIHZhciBtaWRkbGVPZmZzZXQgPSBNYXRoLnJvdW5kKG1pbk9mZnNldCArIChtYXhPZmZzZXQgLSBtaW5PZmZzZXQpIC8gMik7XG5cbiAgICAgICAgICBpZiAobWlkZGxlT2Zmc2V0IDwgTWF0aC5jZWlsKHNpemUgLyAyKSkge1xuICAgICAgICAgICAgcmV0dXJuIDA7IC8vIG5lYXIgdGhlIGJlZ2lubmluZ1xuICAgICAgICAgIH0gZWxzZSBpZiAobWlkZGxlT2Zmc2V0ID4gbGFzdEl0ZW1PZmZzZXQgKyBNYXRoLmZsb29yKHNpemUgLyAyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGxhc3RJdGVtT2Zmc2V0OyAvLyBuZWFyIHRoZSBlbmRcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG1pZGRsZU9mZnNldDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgY2FzZSAnYXV0byc6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoc2Nyb2xsT2Zmc2V0ID49IG1pbk9mZnNldCAmJiBzY3JvbGxPZmZzZXQgPD0gbWF4T2Zmc2V0KSB7XG4gICAgICAgICAgcmV0dXJuIHNjcm9sbE9mZnNldDtcbiAgICAgICAgfSBlbHNlIGlmIChzY3JvbGxPZmZzZXQgPCBtaW5PZmZzZXQpIHtcbiAgICAgICAgICByZXR1cm4gbWluT2Zmc2V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBtYXhPZmZzZXQ7XG4gICAgICAgIH1cblxuICAgIH1cbiAgfSxcbiAgZ2V0U3RhcnRJbmRleEZvck9mZnNldDogZnVuY3Rpb24gZ2V0U3RhcnRJbmRleEZvck9mZnNldChfcmVmNSwgb2Zmc2V0KSB7XG4gICAgdmFyIGl0ZW1Db3VudCA9IF9yZWY1Lml0ZW1Db3VudCxcbiAgICAgICAgaXRlbVNpemUgPSBfcmVmNS5pdGVtU2l6ZTtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oaXRlbUNvdW50IC0gMSwgTWF0aC5mbG9vcihvZmZzZXQgLyBpdGVtU2l6ZSkpKTtcbiAgfSxcbiAgZ2V0U3RvcEluZGV4Rm9yU3RhcnRJbmRleDogZnVuY3Rpb24gZ2V0U3RvcEluZGV4Rm9yU3RhcnRJbmRleChfcmVmNiwgc3RhcnRJbmRleCwgc2Nyb2xsT2Zmc2V0KSB7XG4gICAgdmFyIGRpcmVjdGlvbiA9IF9yZWY2LmRpcmVjdGlvbixcbiAgICAgICAgaGVpZ2h0ID0gX3JlZjYuaGVpZ2h0LFxuICAgICAgICBpdGVtQ291bnQgPSBfcmVmNi5pdGVtQ291bnQsXG4gICAgICAgIGl0ZW1TaXplID0gX3JlZjYuaXRlbVNpemUsXG4gICAgICAgIGxheW91dCA9IF9yZWY2LmxheW91dCxcbiAgICAgICAgd2lkdGggPSBfcmVmNi53aWR0aDtcbiAgICAvLyBUT0RPIERlcHJlY2F0ZSBkaXJlY3Rpb24gXCJob3Jpem9udGFsXCJcbiAgICB2YXIgaXNIb3Jpem9udGFsID0gZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcgfHwgbGF5b3V0ID09PSAnaG9yaXpvbnRhbCc7XG4gICAgdmFyIG9mZnNldCA9IHN0YXJ0SW5kZXggKiBpdGVtU2l6ZTtcbiAgICB2YXIgc2l6ZSA9IGlzSG9yaXpvbnRhbCA/IHdpZHRoIDogaGVpZ2h0O1xuICAgIHZhciBudW1WaXNpYmxlSXRlbXMgPSBNYXRoLmNlaWwoKHNpemUgKyBzY3JvbGxPZmZzZXQgLSBvZmZzZXQpIC8gaXRlbVNpemUpO1xuICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbihpdGVtQ291bnQgLSAxLCBzdGFydEluZGV4ICsgbnVtVmlzaWJsZUl0ZW1zIC0gMSAvLyAtMSBpcyBiZWNhdXNlIHN0b3AgaW5kZXggaXMgaW5jbHVzaXZlXG4gICAgKSk7XG4gIH0sXG4gIGluaXRJbnN0YW5jZVByb3BzOiBmdW5jdGlvbiBpbml0SW5zdGFuY2VQcm9wcyhwcm9wcykgey8vIE5vb3BcbiAgfSxcbiAgc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZTogdHJ1ZSxcbiAgdmFsaWRhdGVQcm9wczogZnVuY3Rpb24gdmFsaWRhdGVQcm9wcyhfcmVmNykge1xuICAgIHZhciBpdGVtU2l6ZSA9IF9yZWY3Lml0ZW1TaXplO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmICh0eXBlb2YgaXRlbVNpemUgIT09ICdudW1iZXInKSB7XG4gICAgICAgIHRocm93IEVycm9yKCdBbiBpbnZhbGlkIFwiaXRlbVNpemVcIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdWYWx1ZSBzaG91bGQgYmUgYSBudW1iZXIuICcgKyAoXCJcXFwiXCIgKyAoaXRlbVNpemUgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgaXRlbVNpemUpICsgXCJcXFwiIHdhcyBzcGVjaWZpZWQuXCIpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pO1xuXG4vLyBQdWxsZWQgZnJvbSByZWFjdC1jb21wYXRcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kZXZlbG9waXQvcHJlYWN0LWNvbXBhdC9ibG9iLzdjNWRlMDBlN2M4NWUyZmZkMDExYmYzYWYwMjg5OWI2M2Y2OTlkM2Evc3JjL2luZGV4LmpzI0wzNDlcbmZ1bmN0aW9uIHNoYWxsb3dEaWZmZXJzKHByZXYsIG5leHQpIHtcbiAgZm9yICh2YXIgYXR0cmlidXRlIGluIHByZXYpIHtcbiAgICBpZiAoIShhdHRyaWJ1dGUgaW4gbmV4dCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGZvciAodmFyIF9hdHRyaWJ1dGUgaW4gbmV4dCkge1xuICAgIGlmIChwcmV2W19hdHRyaWJ1dGVdICE9PSBuZXh0W19hdHRyaWJ1dGVdKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIEl0IGtub3dzIHRvIGNvbXBhcmUgaW5kaXZpZHVhbCBzdHlsZSBwcm9wcyBhbmQgaWdub3JlIHRoZSB3cmFwcGVyIG9iamVjdC5cbi8vIFNlZSBodHRwczovL3JlYWN0anMub3JnL2RvY3MvcmVhY3QtYXBpLmh0bWwjcmVhY3RtZW1vXG5cbmZ1bmN0aW9uIGFyZUVxdWFsKHByZXZQcm9wcywgbmV4dFByb3BzKSB7XG4gIHZhciBwcmV2U3R5bGUgPSBwcmV2UHJvcHMuc3R5bGUsXG4gICAgICBwcmV2UmVzdCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHByZXZQcm9wcywgW1wic3R5bGVcIl0pO1xuXG4gIHZhciBuZXh0U3R5bGUgPSBuZXh0UHJvcHMuc3R5bGUsXG4gICAgICBuZXh0UmVzdCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKG5leHRQcm9wcywgW1wic3R5bGVcIl0pO1xuXG4gIHJldHVybiAhc2hhbGxvd0RpZmZlcnMocHJldlN0eWxlLCBuZXh0U3R5bGUpICYmICFzaGFsbG93RGlmZmVycyhwcmV2UmVzdCwgbmV4dFJlc3QpO1xufVxuXG4vLyBJdCBrbm93cyB0byBjb21wYXJlIGluZGl2aWR1YWwgc3R5bGUgcHJvcHMgYW5kIGlnbm9yZSB0aGUgd3JhcHBlciBvYmplY3QuXG4vLyBTZWUgaHR0cHM6Ly9yZWFjdGpzLm9yZy9kb2NzL3JlYWN0LWNvbXBvbmVudC5odG1sI3Nob3VsZGNvbXBvbmVudHVwZGF0ZVxuXG5mdW5jdGlvbiBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcbiAgcmV0dXJuICFhcmVFcXVhbCh0aGlzLnByb3BzLCBuZXh0UHJvcHMpIHx8IHNoYWxsb3dEaWZmZXJzKHRoaXMuc3RhdGUsIG5leHRTdGF0ZSk7XG59XG5cbmV4cG9ydCB7IFZhcmlhYmxlU2l6ZUdyaWQsIFZhcmlhYmxlU2l6ZUxpc3QsIEZpeGVkU2l6ZUdyaWQsIEZpeGVkU2l6ZUxpc3QsIGFyZUVxdWFsLCBzaG91bGRDb21wb25lbnRVcGRhdGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQsIFB1cmVDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5cbnZhciBjbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59O1xuXG52YXIgY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgICByZXR1cm4gQ29uc3RydWN0b3I7XG4gIH07XG59KCk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59O1xuXG52YXIgaW5oZXJpdHMgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpO1xuICB9XG5cbiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7XG4gICAgY29uc3RydWN0b3I6IHtcbiAgICAgIHZhbHVlOiBzdWJDbGFzcyxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuICBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG59O1xuXG52YXIgcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiA9IGZ1bmN0aW9uIChzZWxmLCBjYWxsKSB7XG4gIGlmICghc2VsZikge1xuICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcbiAgfVxuXG4gIHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO1xufTtcblxudmFyIHNsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7XG4gICAgdmFyIF9hcnIgPSBbXTtcbiAgICB2YXIgX24gPSB0cnVlO1xuICAgIHZhciBfZCA9IGZhbHNlO1xuICAgIHZhciBfZSA9IHVuZGVmaW5lZDtcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7XG4gICAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7XG5cbiAgICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgX2QgPSB0cnVlO1xuICAgICAgX2UgPSBlcnI7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoX2QpIHRocm93IF9lO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBfYXJyO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgICByZXR1cm4gYXJyO1xuICAgIH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7XG4gICAgICByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTtcbiAgICB9XG4gIH07XG59KCk7XG5cbi8qKlxuICogRGV0ZWN0IEVsZW1lbnQgUmVzaXplLlxuICogaHR0cHM6Ly9naXRodWIuY29tL3NkZWNpbWEvamF2YXNjcmlwdC1kZXRlY3QtZWxlbWVudC1yZXNpemVcbiAqIFNlYmFzdGlhbiBEZWNpbWFcbiAqXG4gKiBGb3JrZWQgZnJvbSB2ZXJzaW9uIDAuNS4zOyBpbmNsdWRlcyB0aGUgZm9sbG93aW5nIG1vZGlmaWNhdGlvbnM6XG4gKiAxKcKgR3VhcmQgYWdhaW5zdCB1bnNhZmUgJ3dpbmRvdycgYW5kICdkb2N1bWVudCcgcmVmZXJlbmNlcyAodG8gc3VwcG9ydCBTU1IpLlxuICogMinCoERlZmVyIGluaXRpYWxpemF0aW9uIGNvZGUgdmlhIGEgdG9wLWxldmVsIGZ1bmN0aW9uIHdyYXBwZXIgKHRvIHN1cHBvcnQgU1NSKS5cbiAqIDMpIEF2b2lkIHVubmVjZXNzYXJ5IHJlZmxvd3MgYnkgbm90IG1lYXN1cmluZyBzaXplIGZvciBzY3JvbGwgZXZlbnRzIGJ1YmJsaW5nIGZyb20gY2hpbGRyZW4uXG4gKiA0KSBBZGQgbm9uY2UgZm9yIHN0eWxlIGVsZW1lbnQuXG4gKiovXG5cbi8vIENoZWNrIGBkb2N1bWVudGAgYW5kIGB3aW5kb3dgIGluIGNhc2Ugb2Ygc2VydmVyLXNpZGUgcmVuZGVyaW5nXG52YXIgd2luZG93T2JqZWN0ID0gdm9pZCAwO1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIHdpbmRvd09iamVjdCA9IHdpbmRvdztcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG59IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gIHdpbmRvd09iamVjdCA9IHNlbGY7XG59IGVsc2Uge1xuICB3aW5kb3dPYmplY3QgPSBnbG9iYWw7XG59XG5cbnZhciBjYW5jZWxGcmFtZSA9IG51bGw7XG52YXIgcmVxdWVzdEZyYW1lID0gbnVsbDtcblxudmFyIFRJTUVPVVRfRFVSQVRJT04gPSAyMDtcblxudmFyIGNsZWFyVGltZW91dEZuID0gd2luZG93T2JqZWN0LmNsZWFyVGltZW91dDtcbnZhciBzZXRUaW1lb3V0Rm4gPSB3aW5kb3dPYmplY3Quc2V0VGltZW91dDtcblxudmFyIGNhbmNlbEFuaW1hdGlvbkZyYW1lRm4gPSB3aW5kb3dPYmplY3QuY2FuY2VsQW5pbWF0aW9uRnJhbWUgfHwgd2luZG93T2JqZWN0Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvd09iamVjdC53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZTtcblxudmFyIHJlcXVlc3RBbmltYXRpb25GcmFtZUZuID0gd2luZG93T2JqZWN0LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3dPYmplY3QubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvd09iamVjdC53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG5cbmlmIChjYW5jZWxBbmltYXRpb25GcmFtZUZuID09IG51bGwgfHwgcmVxdWVzdEFuaW1hdGlvbkZyYW1lRm4gPT0gbnVsbCkge1xuICAvLyBGb3IgZW52aXJvbm1lbnRzIHRoYXQgZG9uJ3Qgc3VwcG9ydCBhbmltYXRpb24gZnJhbWUsXG4gIC8vIGZhbGxiYWNrIHRvIGEgc2V0VGltZW91dCBiYXNlZCBhcHByb2FjaC5cbiAgY2FuY2VsRnJhbWUgPSBjbGVhclRpbWVvdXRGbjtcbiAgcmVxdWVzdEZyYW1lID0gZnVuY3Rpb24gcmVxdWVzdEFuaW1hdGlvbkZyYW1lVmlhU2V0VGltZW91dChjYWxsYmFjaykge1xuICAgIHJldHVybiBzZXRUaW1lb3V0Rm4oY2FsbGJhY2ssIFRJTUVPVVRfRFVSQVRJT04pO1xuICB9O1xufSBlbHNlIHtcbiAgLy8gQ291bnRlciBpbnR1aXRpdmVseSwgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBhbmltYXRpb24gZnJhbWVzIGNhbiBiZSB0cmlja2llci5cbiAgLy8gQ2hyb21lJ3MgXCJUaHJvdHRsZSBub24tdmlzaWJsZSBjcm9zcy1vcmlnaW4gaWZyYW1lc1wiIGZsYWcgY2FuIHByZXZlbnQgckFGcyBmcm9tIGJlaW5nIGNhbGxlZC5cbiAgLy8gSW4gdGhpcyBjYXNlLCB3ZSBzaG91bGQgZmFsbGJhY2sgdG8gYSBzZXRUaW1lb3V0KCkgaW1wbGVtZW50YXRpb24uXG4gIGNhbmNlbEZyYW1lID0gZnVuY3Rpb24gY2FuY2VsRnJhbWUoX3JlZikge1xuICAgIHZhciBfcmVmMiA9IHNsaWNlZFRvQXJyYXkoX3JlZiwgMiksXG4gICAgICAgIGFuaW1hdGlvbkZyYW1lSUQgPSBfcmVmMlswXSxcbiAgICAgICAgdGltZW91dElEID0gX3JlZjJbMV07XG5cbiAgICBjYW5jZWxBbmltYXRpb25GcmFtZUZuKGFuaW1hdGlvbkZyYW1lSUQpO1xuICAgIGNsZWFyVGltZW91dEZuKHRpbWVvdXRJRCk7XG4gIH07XG4gIHJlcXVlc3RGcmFtZSA9IGZ1bmN0aW9uIHJlcXVlc3RBbmltYXRpb25GcmFtZVdpdGhTZXRUaW1lb3V0RmFsbGJhY2soY2FsbGJhY2spIHtcbiAgICB2YXIgYW5pbWF0aW9uRnJhbWVJRCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZUZuKGZ1bmN0aW9uIGFuaW1hdGlvbkZyYW1lQ2FsbGJhY2soKSB7XG4gICAgICBjbGVhclRpbWVvdXRGbih0aW1lb3V0SUQpO1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9KTtcblxuICAgIHZhciB0aW1lb3V0SUQgPSBzZXRUaW1lb3V0Rm4oZnVuY3Rpb24gdGltZW91dENhbGxiYWNrKCkge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWVGbihhbmltYXRpb25GcmFtZUlEKTtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfSwgVElNRU9VVF9EVVJBVElPTik7XG5cbiAgICByZXR1cm4gW2FuaW1hdGlvbkZyYW1lSUQsIHRpbWVvdXRJRF07XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURldGVjdEVsZW1lbnRSZXNpemUobm9uY2UpIHtcbiAgdmFyIGFuaW1hdGlvbktleWZyYW1lcyA9IHZvaWQgMDtcbiAgdmFyIGFuaW1hdGlvbk5hbWUgPSB2b2lkIDA7XG4gIHZhciBhbmltYXRpb25TdGFydEV2ZW50ID0gdm9pZCAwO1xuICB2YXIgYW5pbWF0aW9uU3R5bGUgPSB2b2lkIDA7XG4gIHZhciBjaGVja1RyaWdnZXJzID0gdm9pZCAwO1xuICB2YXIgcmVzZXRUcmlnZ2VycyA9IHZvaWQgMDtcbiAgdmFyIHNjcm9sbExpc3RlbmVyID0gdm9pZCAwO1xuXG4gIHZhciBhdHRhY2hFdmVudCA9IHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuYXR0YWNoRXZlbnQ7XG4gIGlmICghYXR0YWNoRXZlbnQpIHtcbiAgICByZXNldFRyaWdnZXJzID0gZnVuY3Rpb24gcmVzZXRUcmlnZ2VycyhlbGVtZW50KSB7XG4gICAgICB2YXIgdHJpZ2dlcnMgPSBlbGVtZW50Ll9fcmVzaXplVHJpZ2dlcnNfXyxcbiAgICAgICAgICBleHBhbmQgPSB0cmlnZ2Vycy5maXJzdEVsZW1lbnRDaGlsZCxcbiAgICAgICAgICBjb250cmFjdCA9IHRyaWdnZXJzLmxhc3RFbGVtZW50Q2hpbGQsXG4gICAgICAgICAgZXhwYW5kQ2hpbGQgPSBleHBhbmQuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICBjb250cmFjdC5zY3JvbGxMZWZ0ID0gY29udHJhY3Quc2Nyb2xsV2lkdGg7XG4gICAgICBjb250cmFjdC5zY3JvbGxUb3AgPSBjb250cmFjdC5zY3JvbGxIZWlnaHQ7XG4gICAgICBleHBhbmRDaGlsZC5zdHlsZS53aWR0aCA9IGV4cGFuZC5vZmZzZXRXaWR0aCArIDEgKyAncHgnO1xuICAgICAgZXhwYW5kQ2hpbGQuc3R5bGUuaGVpZ2h0ID0gZXhwYW5kLm9mZnNldEhlaWdodCArIDEgKyAncHgnO1xuICAgICAgZXhwYW5kLnNjcm9sbExlZnQgPSBleHBhbmQuc2Nyb2xsV2lkdGg7XG4gICAgICBleHBhbmQuc2Nyb2xsVG9wID0gZXhwYW5kLnNjcm9sbEhlaWdodDtcbiAgICB9O1xuXG4gICAgY2hlY2tUcmlnZ2VycyA9IGZ1bmN0aW9uIGNoZWNrVHJpZ2dlcnMoZWxlbWVudCkge1xuICAgICAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0V2lkdGggIT09IGVsZW1lbnQuX19yZXNpemVMYXN0X18ud2lkdGggfHwgZWxlbWVudC5vZmZzZXRIZWlnaHQgIT09IGVsZW1lbnQuX19yZXNpemVMYXN0X18uaGVpZ2h0O1xuICAgIH07XG5cbiAgICBzY3JvbGxMaXN0ZW5lciA9IGZ1bmN0aW9uIHNjcm9sbExpc3RlbmVyKGUpIHtcbiAgICAgIC8vIERvbid0IG1lYXN1cmUgKHdoaWNoIGZvcmNlcykgcmVmbG93IGZvciBzY3JvbGxzIHRoYXQgaGFwcGVuIGluc2lkZSBvZiBjaGlsZHJlbiFcbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc05hbWUgJiYgdHlwZW9mIGUudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mID09PSAnZnVuY3Rpb24nICYmIGUudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCdjb250cmFjdC10cmlnZ2VyJykgPCAwICYmIGUudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCdleHBhbmQtdHJpZ2dlcicpIDwgMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBlbGVtZW50ID0gdGhpcztcbiAgICAgIHJlc2V0VHJpZ2dlcnModGhpcyk7XG4gICAgICBpZiAodGhpcy5fX3Jlc2l6ZVJBRl9fKSB7XG4gICAgICAgIGNhbmNlbEZyYW1lKHRoaXMuX19yZXNpemVSQUZfXyk7XG4gICAgICB9XG4gICAgICB0aGlzLl9fcmVzaXplUkFGX18gPSByZXF1ZXN0RnJhbWUoZnVuY3Rpb24gYW5pbWF0aW9uRnJhbWUoKSB7XG4gICAgICAgIGlmIChjaGVja1RyaWdnZXJzKGVsZW1lbnQpKSB7XG4gICAgICAgICAgZWxlbWVudC5fX3Jlc2l6ZUxhc3RfXy53aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgZWxlbWVudC5fX3Jlc2l6ZUxhc3RfXy5oZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICBlbGVtZW50Ll9fcmVzaXplTGlzdGVuZXJzX18uZm9yRWFjaChmdW5jdGlvbiBmb3JFYWNoUmVzaXplTGlzdGVuZXIoZm4pIHtcbiAgICAgICAgICAgIGZuLmNhbGwoZWxlbWVudCwgZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKiBEZXRlY3QgQ1NTIEFuaW1hdGlvbnMgc3VwcG9ydCB0byBkZXRlY3QgZWxlbWVudCBkaXNwbGF5L3JlLWF0dGFjaCAqL1xuICAgIHZhciBhbmltYXRpb24gPSBmYWxzZTtcbiAgICB2YXIga2V5ZnJhbWVwcmVmaXggPSAnJztcbiAgICBhbmltYXRpb25TdGFydEV2ZW50ID0gJ2FuaW1hdGlvbnN0YXJ0JztcbiAgICB2YXIgZG9tUHJlZml4ZXMgPSAnV2Via2l0IE1veiBPIG1zJy5zcGxpdCgnICcpO1xuICAgIHZhciBzdGFydEV2ZW50cyA9ICd3ZWJraXRBbmltYXRpb25TdGFydCBhbmltYXRpb25zdGFydCBvQW5pbWF0aW9uU3RhcnQgTVNBbmltYXRpb25TdGFydCcuc3BsaXQoJyAnKTtcbiAgICB2YXIgcGZ4ID0gJyc7XG4gICAge1xuICAgICAgdmFyIGVsbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zha2VlbGVtZW50Jyk7XG4gICAgICBpZiAoZWxtLnN0eWxlLmFuaW1hdGlvbk5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhbmltYXRpb24gPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoYW5pbWF0aW9uID09PSBmYWxzZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvbVByZWZpeGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGVsbS5zdHlsZVtkb21QcmVmaXhlc1tpXSArICdBbmltYXRpb25OYW1lJ10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGZ4ID0gZG9tUHJlZml4ZXNbaV07XG4gICAgICAgICAgICBrZXlmcmFtZXByZWZpeCA9ICctJyArIHBmeC50b0xvd2VyQ2FzZSgpICsgJy0nO1xuICAgICAgICAgICAgYW5pbWF0aW9uU3RhcnRFdmVudCA9IHN0YXJ0RXZlbnRzW2ldO1xuICAgICAgICAgICAgYW5pbWF0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGFuaW1hdGlvbk5hbWUgPSAncmVzaXplYW5pbSc7XG4gICAgYW5pbWF0aW9uS2V5ZnJhbWVzID0gJ0AnICsga2V5ZnJhbWVwcmVmaXggKyAna2V5ZnJhbWVzICcgKyBhbmltYXRpb25OYW1lICsgJyB7IGZyb20geyBvcGFjaXR5OiAwOyB9IHRvIHsgb3BhY2l0eTogMDsgfSB9ICc7XG4gICAgYW5pbWF0aW9uU3R5bGUgPSBrZXlmcmFtZXByZWZpeCArICdhbmltYXRpb246IDFtcyAnICsgYW5pbWF0aW9uTmFtZSArICc7ICc7XG4gIH1cblxuICB2YXIgY3JlYXRlU3R5bGVzID0gZnVuY3Rpb24gY3JlYXRlU3R5bGVzKGRvYykge1xuICAgIGlmICghZG9jLmdldEVsZW1lbnRCeUlkKCdkZXRlY3RFbGVtZW50UmVzaXplJykpIHtcbiAgICAgIC8vb3BhY2l0eTowIHdvcmtzIGFyb3VuZCBhIGNocm9tZSBidWcgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTI4NjM2MFxuICAgICAgdmFyIGNzcyA9IChhbmltYXRpb25LZXlmcmFtZXMgPyBhbmltYXRpb25LZXlmcmFtZXMgOiAnJykgKyAnLnJlc2l6ZS10cmlnZ2VycyB7ICcgKyAoYW5pbWF0aW9uU3R5bGUgPyBhbmltYXRpb25TdHlsZSA6ICcnKSArICd2aXNpYmlsaXR5OiBoaWRkZW47IG9wYWNpdHk6IDA7IH0gJyArICcucmVzaXplLXRyaWdnZXJzLCAucmVzaXplLXRyaWdnZXJzID4gZGl2LCAuY29udHJhY3QtdHJpZ2dlcjpiZWZvcmUgeyBjb250ZW50OiBcIiBcIjsgZGlzcGxheTogYmxvY2s7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyBoZWlnaHQ6IDEwMCU7IHdpZHRoOiAxMDAlOyBvdmVyZmxvdzogaGlkZGVuOyB6LWluZGV4OiAtMTsgfSAucmVzaXplLXRyaWdnZXJzID4gZGl2IHsgYmFja2dyb3VuZDogI2VlZTsgb3ZlcmZsb3c6IGF1dG87IH0gLmNvbnRyYWN0LXRyaWdnZXI6YmVmb3JlIHsgd2lkdGg6IDIwMCU7IGhlaWdodDogMjAwJTsgfScsXG4gICAgICAgICAgaGVhZCA9IGRvYy5oZWFkIHx8IGRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLFxuICAgICAgICAgIHN0eWxlID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cbiAgICAgIHN0eWxlLmlkID0gJ2RldGVjdEVsZW1lbnRSZXNpemUnO1xuICAgICAgc3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG5cbiAgICAgIGlmIChub25jZSAhPSBudWxsKSB7XG4gICAgICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbm9uY2UnLCBub25jZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvYy5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgICAgIH1cblxuICAgICAgaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBhZGRSZXNpemVMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZFJlc2l6ZUxpc3RlbmVyKGVsZW1lbnQsIGZuKSB7XG4gICAgaWYgKGF0dGFjaEV2ZW50KSB7XG4gICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KCdvbnJlc2l6ZScsIGZuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFlbGVtZW50Ll9fcmVzaXplVHJpZ2dlcnNfXykge1xuICAgICAgICB2YXIgZG9jID0gZWxlbWVudC5vd25lckRvY3VtZW50O1xuICAgICAgICB2YXIgZWxlbWVudFN0eWxlID0gd2luZG93T2JqZWN0LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgICAgIGlmIChlbGVtZW50U3R5bGUgJiYgZWxlbWVudFN0eWxlLnBvc2l0aW9uID09PSAnc3RhdGljJykge1xuICAgICAgICAgIGVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgICB9XG4gICAgICAgIGNyZWF0ZVN0eWxlcyhkb2MpO1xuICAgICAgICBlbGVtZW50Ll9fcmVzaXplTGFzdF9fID0ge307XG4gICAgICAgIGVsZW1lbnQuX19yZXNpemVMaXN0ZW5lcnNfXyA9IFtdO1xuICAgICAgICAoZWxlbWVudC5fX3Jlc2l6ZVRyaWdnZXJzX18gPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2JykpLmNsYXNzTmFtZSA9ICdyZXNpemUtdHJpZ2dlcnMnO1xuICAgICAgICB2YXIgZXhwYW5kVHJpZ2dlciA9IGRvYy5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZXhwYW5kVHJpZ2dlci5jbGFzc05hbWUgPSAnZXhwYW5kLXRyaWdnZXInO1xuICAgICAgICBleHBhbmRUcmlnZ2VyLmFwcGVuZENoaWxkKGRvYy5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XG4gICAgICAgIHZhciBjb250cmFjdFRyaWdnZXIgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnRyYWN0VHJpZ2dlci5jbGFzc05hbWUgPSAnY29udHJhY3QtdHJpZ2dlcic7XG4gICAgICAgIGVsZW1lbnQuX19yZXNpemVUcmlnZ2Vyc19fLmFwcGVuZENoaWxkKGV4cGFuZFRyaWdnZXIpO1xuICAgICAgICBlbGVtZW50Ll9fcmVzaXplVHJpZ2dlcnNfXy5hcHBlbmRDaGlsZChjb250cmFjdFRyaWdnZXIpO1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGVsZW1lbnQuX19yZXNpemVUcmlnZ2Vyc19fKTtcbiAgICAgICAgcmVzZXRUcmlnZ2VycyhlbGVtZW50KTtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxMaXN0ZW5lciwgdHJ1ZSk7XG5cbiAgICAgICAgLyogTGlzdGVuIGZvciBhIGNzcyBhbmltYXRpb24gdG8gZGV0ZWN0IGVsZW1lbnQgZGlzcGxheS9yZS1hdHRhY2ggKi9cbiAgICAgICAgaWYgKGFuaW1hdGlvblN0YXJ0RXZlbnQpIHtcbiAgICAgICAgICBlbGVtZW50Ll9fcmVzaXplVHJpZ2dlcnNfXy5fX2FuaW1hdGlvbkxpc3RlbmVyX18gPSBmdW5jdGlvbiBhbmltYXRpb25MaXN0ZW5lcihlKSB7XG4gICAgICAgICAgICBpZiAoZS5hbmltYXRpb25OYW1lID09PSBhbmltYXRpb25OYW1lKSB7XG4gICAgICAgICAgICAgIHJlc2V0VHJpZ2dlcnMoZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBlbGVtZW50Ll9fcmVzaXplVHJpZ2dlcnNfXy5hZGRFdmVudExpc3RlbmVyKGFuaW1hdGlvblN0YXJ0RXZlbnQsIGVsZW1lbnQuX19yZXNpemVUcmlnZ2Vyc19fLl9fYW5pbWF0aW9uTGlzdGVuZXJfXyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsZW1lbnQuX19yZXNpemVMaXN0ZW5lcnNfXy5wdXNoKGZuKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHJlbW92ZVJlc2l6ZUxpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlUmVzaXplTGlzdGVuZXIoZWxlbWVudCwgZm4pIHtcbiAgICBpZiAoYXR0YWNoRXZlbnQpIHtcbiAgICAgIGVsZW1lbnQuZGV0YWNoRXZlbnQoJ29ucmVzaXplJywgZm4pO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50Ll9fcmVzaXplTGlzdGVuZXJzX18uc3BsaWNlKGVsZW1lbnQuX19yZXNpemVMaXN0ZW5lcnNfXy5pbmRleE9mKGZuKSwgMSk7XG4gICAgICBpZiAoIWVsZW1lbnQuX19yZXNpemVMaXN0ZW5lcnNfXy5sZW5ndGgpIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxMaXN0ZW5lciwgdHJ1ZSk7XG4gICAgICAgIGlmIChlbGVtZW50Ll9fcmVzaXplVHJpZ2dlcnNfXy5fX2FuaW1hdGlvbkxpc3RlbmVyX18pIHtcbiAgICAgICAgICBlbGVtZW50Ll9fcmVzaXplVHJpZ2dlcnNfXy5yZW1vdmVFdmVudExpc3RlbmVyKGFuaW1hdGlvblN0YXJ0RXZlbnQsIGVsZW1lbnQuX19yZXNpemVUcmlnZ2Vyc19fLl9fYW5pbWF0aW9uTGlzdGVuZXJfXyk7XG4gICAgICAgICAgZWxlbWVudC5fX3Jlc2l6ZVRyaWdnZXJzX18uX19hbmltYXRpb25MaXN0ZW5lcl9fID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGVsZW1lbnQuX19yZXNpemVUcmlnZ2Vyc19fID0gIWVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5fX3Jlc2l6ZVRyaWdnZXJzX18pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gUHJlYWN0IGNvbXBhdDsgc2VlIGRldmVsb3BpdC9wcmVhY3QtY29tcGF0L2lzc3Vlcy8yMjhcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGFkZFJlc2l6ZUxpc3RlbmVyOiBhZGRSZXNpemVMaXN0ZW5lcixcbiAgICByZW1vdmVSZXNpemVMaXN0ZW5lcjogcmVtb3ZlUmVzaXplTGlzdGVuZXJcbiAgfTtcbn1cblxudmFyIEF1dG9TaXplciA9IGZ1bmN0aW9uIChfUmVhY3QkUHVyZUNvbXBvbmVudCkge1xuICBpbmhlcml0cyhBdXRvU2l6ZXIsIF9SZWFjdCRQdXJlQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBBdXRvU2l6ZXIoKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgQXV0b1NpemVyKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX3JlZiA9IEF1dG9TaXplci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEF1dG9TaXplcikpLmNhbGwuYXBwbHkoX3JlZiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLnN0YXRlID0ge1xuICAgICAgaGVpZ2h0OiBfdGhpcy5wcm9wcy5kZWZhdWx0SGVpZ2h0IHx8IDAsXG4gICAgICB3aWR0aDogX3RoaXMucHJvcHMuZGVmYXVsdFdpZHRoIHx8IDBcbiAgICB9LCBfdGhpcy5fb25SZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICBkaXNhYmxlSGVpZ2h0ID0gX3RoaXMkcHJvcHMuZGlzYWJsZUhlaWdodCxcbiAgICAgICAgICBkaXNhYmxlV2lkdGggPSBfdGhpcyRwcm9wcy5kaXNhYmxlV2lkdGgsXG4gICAgICAgICAgb25SZXNpemUgPSBfdGhpcyRwcm9wcy5vblJlc2l6ZTtcblxuXG4gICAgICBpZiAoX3RoaXMuX3BhcmVudE5vZGUpIHtcbiAgICAgICAgLy8gR3VhcmQgYWdhaW5zdCBBdXRvU2l6ZXIgY29tcG9uZW50IGJlaW5nIHJlbW92ZWQgZnJvbSB0aGUgRE9NIGltbWVkaWF0ZWx5IGFmdGVyIGJlaW5nIGFkZGVkLlxuICAgICAgICAvLyBUaGlzIGNhbiByZXN1bHQgaW4gaW52YWxpZCBzdHlsZSB2YWx1ZXMgd2hpY2ggY2FuIHJlc3VsdCBpbiBOYU4gdmFsdWVzIGlmIHdlIGRvbid0IGhhbmRsZSB0aGVtLlxuICAgICAgICAvLyBTZWUgaXNzdWUgIzE1MCBmb3IgbW9yZSBjb250ZXh0LlxuXG4gICAgICAgIHZhciBfaGVpZ2h0ID0gX3RoaXMuX3BhcmVudE5vZGUub2Zmc2V0SGVpZ2h0IHx8IDA7XG4gICAgICAgIHZhciBfd2lkdGggPSBfdGhpcy5fcGFyZW50Tm9kZS5vZmZzZXRXaWR0aCB8fCAwO1xuXG4gICAgICAgIHZhciBfc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShfdGhpcy5fcGFyZW50Tm9kZSkgfHwge307XG4gICAgICAgIHZhciBwYWRkaW5nTGVmdCA9IHBhcnNlSW50KF9zdHlsZS5wYWRkaW5nTGVmdCwgMTApIHx8IDA7XG4gICAgICAgIHZhciBwYWRkaW5nUmlnaHQgPSBwYXJzZUludChfc3R5bGUucGFkZGluZ1JpZ2h0LCAxMCkgfHwgMDtcbiAgICAgICAgdmFyIHBhZGRpbmdUb3AgPSBwYXJzZUludChfc3R5bGUucGFkZGluZ1RvcCwgMTApIHx8IDA7XG4gICAgICAgIHZhciBwYWRkaW5nQm90dG9tID0gcGFyc2VJbnQoX3N0eWxlLnBhZGRpbmdCb3R0b20sIDEwKSB8fCAwO1xuXG4gICAgICAgIHZhciBuZXdIZWlnaHQgPSBfaGVpZ2h0IC0gcGFkZGluZ1RvcCAtIHBhZGRpbmdCb3R0b207XG4gICAgICAgIHZhciBuZXdXaWR0aCA9IF93aWR0aCAtIHBhZGRpbmdMZWZ0IC0gcGFkZGluZ1JpZ2h0O1xuXG4gICAgICAgIGlmICghZGlzYWJsZUhlaWdodCAmJiBfdGhpcy5zdGF0ZS5oZWlnaHQgIT09IG5ld0hlaWdodCB8fCAhZGlzYWJsZVdpZHRoICYmIF90aGlzLnN0YXRlLndpZHRoICE9PSBuZXdXaWR0aCkge1xuICAgICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGhlaWdodDogX2hlaWdodCAtIHBhZGRpbmdUb3AgLSBwYWRkaW5nQm90dG9tLFxuICAgICAgICAgICAgd2lkdGg6IF93aWR0aCAtIHBhZGRpbmdMZWZ0IC0gcGFkZGluZ1JpZ2h0XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBvblJlc2l6ZSh7IGhlaWdodDogX2hlaWdodCwgd2lkdGg6IF93aWR0aCB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIF90aGlzLl9zZXRSZWYgPSBmdW5jdGlvbiAoYXV0b1NpemVyKSB7XG4gICAgICBfdGhpcy5fYXV0b1NpemVyID0gYXV0b1NpemVyO1xuICAgIH0sIF90ZW1wKSwgcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gIH1cblxuICBjcmVhdGVDbGFzcyhBdXRvU2l6ZXIsIFt7XG4gICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHZhciBub25jZSA9IHRoaXMucHJvcHMubm9uY2U7XG5cbiAgICAgIGlmICh0aGlzLl9hdXRvU2l6ZXIgJiYgdGhpcy5fYXV0b1NpemVyLnBhcmVudE5vZGUgJiYgdGhpcy5fYXV0b1NpemVyLnBhcmVudE5vZGUub3duZXJEb2N1bWVudCAmJiB0aGlzLl9hdXRvU2l6ZXIucGFyZW50Tm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3ICYmIHRoaXMuX2F1dG9TaXplci5wYXJlbnROb2RlIGluc3RhbmNlb2YgdGhpcy5fYXV0b1NpemVyLnBhcmVudE5vZGUub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5IVE1MRWxlbWVudCkge1xuICAgICAgICAvLyBEZWxheSBhY2Nlc3Mgb2YgcGFyZW50Tm9kZSB1bnRpbCBtb3VudC5cbiAgICAgICAgLy8gVGhpcyBoYW5kbGVzIGVkZ2UtY2FzZXMgd2hlcmUgdGhlIGNvbXBvbmVudCBoYXMgYWxyZWFkeSBiZWVuIHVubW91bnRlZCBiZWZvcmUgaXRzIHJlZiBoYXMgYmVlbiBzZXQsXG4gICAgICAgIC8vIEFzIHdlbGwgYXMgbGlicmFyaWVzIGxpa2UgcmVhY3QtbGl0ZSB3aGljaCBoYXZlIGEgc2xpZ2h0bHkgZGlmZmVyZW50IGxpZmVjeWNsZS5cbiAgICAgICAgdGhpcy5fcGFyZW50Tm9kZSA9IHRoaXMuX2F1dG9TaXplci5wYXJlbnROb2RlO1xuXG4gICAgICAgIC8vIERlZmVyIHJlcXVpcmluZyByZXNpemUgaGFuZGxlciBpbiBvcmRlciB0byBzdXBwb3J0IHNlcnZlci1zaWRlIHJlbmRlcmluZy5cbiAgICAgICAgLy8gU2VlIGlzc3VlICM0MVxuICAgICAgICB0aGlzLl9kZXRlY3RFbGVtZW50UmVzaXplID0gY3JlYXRlRGV0ZWN0RWxlbWVudFJlc2l6ZShub25jZSk7XG4gICAgICAgIHRoaXMuX2RldGVjdEVsZW1lbnRSZXNpemUuYWRkUmVzaXplTGlzdGVuZXIodGhpcy5fcGFyZW50Tm9kZSwgdGhpcy5fb25SZXNpemUpO1xuXG4gICAgICAgIHRoaXMuX29uUmVzaXplKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbFVubW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIGlmICh0aGlzLl9kZXRlY3RFbGVtZW50UmVzaXplICYmIHRoaXMuX3BhcmVudE5vZGUpIHtcbiAgICAgICAgdGhpcy5fZGV0ZWN0RWxlbWVudFJlc2l6ZS5yZW1vdmVSZXNpemVMaXN0ZW5lcih0aGlzLl9wYXJlbnROb2RlLCB0aGlzLl9vblJlc2l6ZSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgY2hpbGRyZW4gPSBfcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3Byb3BzLmNsYXNzTmFtZSxcbiAgICAgICAgICBkaXNhYmxlSGVpZ2h0ID0gX3Byb3BzLmRpc2FibGVIZWlnaHQsXG4gICAgICAgICAgZGlzYWJsZVdpZHRoID0gX3Byb3BzLmRpc2FibGVXaWR0aCxcbiAgICAgICAgICBzdHlsZSA9IF9wcm9wcy5zdHlsZTtcbiAgICAgIHZhciBfc3RhdGUgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgIGhlaWdodCA9IF9zdGF0ZS5oZWlnaHQsXG4gICAgICAgICAgd2lkdGggPSBfc3RhdGUud2lkdGg7XG5cbiAgICAgIC8vIE91dGVyIGRpdiBzaG91bGQgbm90IGZvcmNlIHdpZHRoL2hlaWdodCBzaW5jZSB0aGF0IG1heSBwcmV2ZW50IGNvbnRhaW5lcnMgZnJvbSBzaHJpbmtpbmcuXG4gICAgICAvLyBJbm5lciBjb21wb25lbnQgc2hvdWxkIG92ZXJmbG93IGFuZCB1c2UgY2FsY3VsYXRlZCB3aWR0aC9oZWlnaHQuXG4gICAgICAvLyBTZWUgaXNzdWUgIzY4IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuXG4gICAgICB2YXIgb3V0ZXJTdHlsZSA9IHsgb3ZlcmZsb3c6ICd2aXNpYmxlJyB9O1xuICAgICAgdmFyIGNoaWxkUGFyYW1zID0ge307XG5cbiAgICAgIC8vIEF2b2lkIHJlbmRlcmluZyBjaGlsZHJlbiBiZWZvcmUgdGhlIGluaXRpYWwgbWVhc3VyZW1lbnRzIGhhdmUgYmVlbiBjb2xsZWN0ZWQuXG4gICAgICAvLyBBdCBiZXN0IHRoaXMgd291bGQganVzdCBiZSB3YXN0aW5nIGN5Y2xlcy5cbiAgICAgIHZhciBiYWlsb3V0T25DaGlsZHJlbiA9IGZhbHNlO1xuXG4gICAgICBpZiAoIWRpc2FibGVIZWlnaHQpIHtcbiAgICAgICAgaWYgKGhlaWdodCA9PT0gMCkge1xuICAgICAgICAgIGJhaWxvdXRPbkNoaWxkcmVuID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBvdXRlclN0eWxlLmhlaWdodCA9IDA7XG4gICAgICAgIGNoaWxkUGFyYW1zLmhlaWdodCA9IGhlaWdodDtcbiAgICAgIH1cblxuICAgICAgaWYgKCFkaXNhYmxlV2lkdGgpIHtcbiAgICAgICAgaWYgKHdpZHRoID09PSAwKSB7XG4gICAgICAgICAgYmFpbG91dE9uQ2hpbGRyZW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG91dGVyU3R5bGUud2lkdGggPSAwO1xuICAgICAgICBjaGlsZFBhcmFtcy53aWR0aCA9IHdpZHRoO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHtcbiAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgICByZWY6IHRoaXMuX3NldFJlZixcbiAgICAgICAgICBzdHlsZTogX2V4dGVuZHMoe30sIG91dGVyU3R5bGUsIHN0eWxlKVxuICAgICAgICB9LFxuICAgICAgICAhYmFpbG91dE9uQ2hpbGRyZW4gJiYgY2hpbGRyZW4oY2hpbGRQYXJhbXMpXG4gICAgICApO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gQXV0b1NpemVyO1xufShQdXJlQ29tcG9uZW50KTtcblxuQXV0b1NpemVyLmRlZmF1bHRQcm9wcyA9IHtcbiAgb25SZXNpemU6IGZ1bmN0aW9uIG9uUmVzaXplKCkge30sXG4gIGRpc2FibGVIZWlnaHQ6IGZhbHNlLFxuICBkaXNhYmxlV2lkdGg6IGZhbHNlLFxuICBzdHlsZToge31cbn07XG5cbmV4cG9ydCBkZWZhdWx0IEF1dG9TaXplcjtcbiIsImltcG9ydCB7IENvbW1hbmRNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vbWFuYWdlcnMvQ29tbWFuZE1hbmFnZXInXG5pbXBvcnQgRWRpdG9yQ29tbWFuZHMgZnJvbSAnLi4vLi4vY29uc3RhbnRzL0VkaXRvckNvbW1hbmRzJ1xuaW1wb3J0IHsgU2NlbmVNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vbWFuYWdlcnMvU2NlbmVNYW5hZ2VyJ1xuaW1wb3J0IHsgaXNBc3NldCB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9Bc3NldFR5cGVzJ1xuXG4vKipcbiAqIGFkZEFzc2V0T25Ecm9wIHVzZWQgdG8gYWRkaW5nIGFzc2V0cyB0byB0aGUgZWRpdG9yIHNjZW5lLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSB7T2JqZWN0fSBpdGVtXG4gKiBAcGFyYW0ge09iamVjdH0gcGFyZW50XG4gKiBAcGFyYW0ge09iamVjdH0gYmVmb3JlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRBc3NldE9uRHJvcChpdGVtLCBwYXJlbnQ/LCBiZWZvcmU/KSB7XG4gIGlmIChpc0Fzc2V0KGl0ZW0pKSB7XG4gICAgY29uc3QgeyBub2RlQ2xhc3MsIGluaXRpYWxQcm9wcyB9ID0gaXRlbVxuICAgIGNvbnN0IG5vZGUgPSBuZXcgbm9kZUNsYXNzKClcbiAgICBpZiAoaW5pdGlhbFByb3BzKSB7XG4gICAgICBPYmplY3QuYXNzaWduKG5vZGUsIGluaXRpYWxQcm9wcylcbiAgICB9XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuZXhlY3V0ZUNvbW1hbmRXaXRoSGlzdG9yeShFZGl0b3JDb21tYW5kcy5BRERfT0JKRUNUUywgbm9kZSwge1xuICAgICAgcGFyZW50czogcGFyZW50LFxuICAgICAgYmVmb3JlczogYmVmb3JlXG4gICAgfSlcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG4gIHJldHVybiBmYWxzZVxufVxuXG4vKipcbiAqIGFkZEFzc2V0QXRDdXJzb3JQb3NpdGlvbk9uRHJvcCB1c2VkIHRvIGFkZCBlbGVtZW50IG9uIGVkaXRvciBzY2VuZSBwb3NpdGlvbiB1c2luZyBjdXJzb3IuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHBhcmFtIHtPYmplY3R9IGl0ZW1cbiAqIEBwYXJhbSB7T2JqZWN0fSBtb3VzZVBvc1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQXNzZXRBdEN1cnNvclBvc2l0aW9uT25Ecm9wKGl0ZW0sIG1vdXNlUG9zKSB7XG4gIGlmIChpc0Fzc2V0KGl0ZW0pKSB7XG4gICAgY29uc3QgeyBub2RlQ2xhc3MsIGluaXRpYWxQcm9wcyB9ID0gaXRlbVxuICAgIGNvbnN0IG5vZGUgPSBuZXcgbm9kZUNsYXNzKClcbiAgICBpZiAoaW5pdGlhbFByb3BzKSB7XG4gICAgICBPYmplY3QuYXNzaWduKG5vZGUsIGluaXRpYWxQcm9wcylcbiAgICB9XG4gICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLmdldEN1cnNvclNwYXduUG9zaXRpb24obW91c2VQb3MsIG5vZGUucG9zaXRpb24pXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuZXhlY3V0ZUNvbW1hbmRXaXRoSGlzdG9yeShFZGl0b3JDb21tYW5kcy5BRERfT0JKRUNUUywgbm9kZSlcblxuICAgIHJldHVybiB0cnVlXG4gIH1cbiAgcmV0dXJuIGZhbHNlXG59XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUNvbnRleHQsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCdcbmltcG9ydCBzdHlsZWQsIHsgVGhlbWVDb250ZXh0IH0gZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnXG5pbXBvcnQgeyBFeGNsYW1hdGlvblRyaWFuZ2xlIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9FeGNsYW1hdGlvblRyaWFuZ2xlJ1xuaW1wb3J0IFRvb2x0aXAgZnJvbSAnLi4vbGF5b3V0L1Rvb2x0aXAnXG5pbXBvcnQgeyB1c2VUcmFuc2xhdGlvbiB9IGZyb20gJ3JlYWN0LWkxOG5leHQnXG5cbi8qKlxuICogSXNzdWVzVG9vbHRpcENvbnRhaW5lciB1c2VkIHRvIHByb3ZpZGUgc3R5bGVzIGFuZCBzaG93aW5nIGlzc3VlcyBsaXN0LlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtzdHlsZWQgY29tcG9uZW50fVxuICovXG5jb25zdCBJc3N1ZXNUb29sdGlwQ29udGFpbmVyID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyMSwgMjMsIDI3LCAwLjkpO1xuICBib3JkZXItcmFkaXVzOiAzcHg7XG4gIHBhZGRpbmc6IDhweDtcbiAgbWF4LXdpZHRoOiAzMjBweDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgb3ZlcmZsb3ctd3JhcDogYnJlYWstd29yZDtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG5cbiAgaDYge1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgfVxuXG4gIHVsIHtcbiAgICBtYXJnaW4tdG9wOiA0cHg7XG4gIH1cblxuICBsaSB7XG4gICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgIG1hcmdpbi1sZWZ0OiA0cHg7XG4gICAgZm9udC1mYW1pbHk6IFwiTHVjaWRhIENvbnNvbGVcIiwgTW9uYWNvLCBtb25vc3BhY2U7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICB9XG5gXG5cbi8qKlxuICogSXNzdWVJY29uIHVzZWQgdG8gcHJvdmlkZSBzdHlsZXMgdG8gaXNzdWUgaWNvbi5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAcGFyYW0ge3N0eWxlZCBjb21wb25lbnR9IHN0eWxlZFxuICovXG5jb25zdCBJc3N1ZUljb24gPSAoc3R5bGVkIGFzIGFueSkoRXhjbGFtYXRpb25UcmlhbmdsZSlgXG4gIGNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMuY29sb3J9O1xuYFxuXG4vKipcbiAqIE5vZGVJc3N1ZXNJY29uIGZ1bmN0aW9uIGNvbXBvbmVudCB1c2VkIHRvIHByb3ZpZGUgdmlldyBvZiBpc3N1ZXMgbGlzdC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAcGFyYW0gICAgICAge2Z1bmN0aW9uIGNvbXBvbmVudH0gbm9kZVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBOb2RlSXNzdWVzSWNvbih7IG5vZGUgfSkge1xuICBjb25zdCB0aGVtZSA9IHVzZUNvbnRleHQoVGhlbWVDb250ZXh0KSBhcyBhbnlcbiAgY29uc3QgeyB0IH0gPSB1c2VUcmFuc2xhdGlvbigpXG5cbiAgY29uc3Qgc2V2ZXJpdHlUb0NvbG9yID0gdXNlTWVtbyhcbiAgICAoKSA9PiAoe1xuICAgICAgd2FybmluZzogdGhlbWUueWVsbG93LFxuICAgICAgZXJyb3I6IHRoZW1lLnJlZFxuICAgIH0pLFxuICAgIFt0aGVtZV1cbiAgKVxuXG4gIC8qKlxuICAgKiByZW5kZXJJbmZvIGZ1bmN0aW9uIHVzZWQgdG8gcmV0dXJuIHZpZXcuXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3QgcmVuZGVySW5mbyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPElzc3Vlc1Rvb2x0aXBDb250YWluZXI+XG4gICAgICAgIDxoNj57dCgnZWRpdG9yOmhpZXJhcmNoeS5pc3NldXMnKX08L2g2PlxuICAgICAgICA8dWw+XG4gICAgICAgICAge25vZGUuaXNzdWVzLm1hcCgoaXNzdWUsIGkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxsaSBrZXk9e2l9PlxuICAgICAgICAgICAgICAgIDxJc3N1ZUljb24gc2l6ZT17MTJ9IGNvbG9yPXtzZXZlcml0eVRvQ29sb3JbaXNzdWUuc2V2ZXJpdHldfSAvPiB7aXNzdWUubWVzc2FnZX1cbiAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KX1cbiAgICAgICAgPC91bD5cbiAgICAgIDwvSXNzdWVzVG9vbHRpcENvbnRhaW5lcj5cbiAgICApXG4gIH0sIFtub2RlLCBzZXZlcml0eVRvQ29sb3JdKVxuXG4gIGxldCBtYXhTZXZlcml0eSA9ICd3YXJuaW5nJ1xuXG4gIGZvciAoY29uc3QgaXNzdWUgb2Ygbm9kZS5pc3N1ZXMpIHtcbiAgICBpZiAoaXNzdWUuc2V2ZXJpdHkgPT09ICdlcnJvcicpIHtcbiAgICAgIG1heFNldmVyaXR5ID0gJ2Vycm9yJ1xuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxUb29sdGlwIHJlbmRlckNvbnRlbnQ9e3JlbmRlckluZm99PlxuICAgICAgPElzc3VlSWNvbiBzaXplPXsxNH0gY29sb3I9e3NldmVyaXR5VG9Db2xvclttYXhTZXZlcml0eV19IC8+XG4gICAgPC9Ub29sdGlwPlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IE5vZGVJc3N1ZXNJY29uXG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2ssIG1lbW8sIEZyYWdtZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJ1xuaW1wb3J0IERlZmF1bHROb2RlRWRpdG9yIGZyb20gJy4uL3Byb3BlcnRpZXMvRGVmYXVsdE5vZGVFZGl0b3InXG5pbXBvcnQgeyBDb250ZXh0TWVudSwgTWVudUl0ZW0sIENvbnRleHRNZW51VHJpZ2dlciB9IGZyb20gJy4uL2xheW91dC9Db250ZXh0TWVudSdcbmltcG9ydCB7IHVzZURyYWcsIHVzZURyb3AgfSBmcm9tICdyZWFjdC1kbmQnXG5pbXBvcnQgeyBnZXRFbXB0eUltYWdlIH0gZnJvbSAncmVhY3QtZG5kLWh0bWw1LWJhY2tlbmQnXG5pbXBvcnQgeyBGaXhlZFNpemVMaXN0LCBhcmVFcXVhbCB9IGZyb20gJ3JlYWN0LXdpbmRvdydcbmltcG9ydCBBdXRvU2l6ZXIgZnJvbSAncmVhY3QtdmlydHVhbGl6ZWQtYXV0by1zaXplcidcbmltcG9ydCB7IGFkZEFzc2V0T25Ecm9wIH0gZnJvbSAnLi4vZG5kJ1xuaW1wb3J0IHsgQ2FyZXRSaWdodCB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvZmEtc29saWQvQ2FyZXRSaWdodCdcbmltcG9ydCB7IENhcmV0RG93biB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvZmEtc29saWQvQ2FyZXREb3duJ1xuaW1wb3J0IHVzZVVwbG9hZCBmcm9tICcuLi9hc3NldHMvdXNlVXBsb2FkJ1xuaW1wb3J0IHsgQWxsRmlsZVR5cGVzIH0gZnJvbSAnQHhyZW5naW5lL2VuZ2luZS9zcmMvYXNzZXRzL2NvbnN0YW50cy9maWxlVHlwZXMnXG5pbXBvcnQgTm9kZUlzc3Vlc0ljb24gZnJvbSAnLi9Ob2RlSXNzdWVzSWNvbidcbmltcG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSAncmVhY3QtaTE4bmV4dCdcbmltcG9ydCB7IGNtZE9yQ3RybFN0cmluZyB9IGZyb20gJy4uLy4uL2Z1bmN0aW9ucy91dGlscydcbmltcG9ydCB0cmF2ZXJzZUVhcmx5T3V0IGZyb20gJy4uLy4uL2Z1bmN0aW9ucy90cmF2ZXJzZUVhcmx5T3V0J1xuaW1wb3J0IEVkaXRvckV2ZW50cyBmcm9tICcuLi8uLi9jb25zdGFudHMvRWRpdG9yRXZlbnRzJ1xuaW1wb3J0IHsgQ29tbWFuZE1hbmFnZXIgfSBmcm9tICcuLi8uLi9tYW5hZ2Vycy9Db21tYW5kTWFuYWdlcidcbmltcG9ydCBFZGl0b3JDb21tYW5kcyBmcm9tICcuLi8uLi9jb25zdGFudHMvRWRpdG9yQ29tbWFuZHMnXG5pbXBvcnQgeyBOb2RlTWFuYWdlciB9IGZyb20gJy4uLy4uL21hbmFnZXJzL05vZGVNYW5hZ2VyJ1xuaW1wb3J0IHsgU2NlbmVNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vbWFuYWdlcnMvU2NlbmVNYW5hZ2VyJ1xuaW1wb3J0IHsgQ29udHJvbE1hbmFnZXIgfSBmcm9tICcuLi8uLi9tYW5hZ2Vycy9Db250cm9sTWFuYWdlcidcbmltcG9ydCB7IEFzc2V0VHlwZXMsIGlzQXNzZXQsIEl0ZW1UeXBlcyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9Bc3NldFR5cGVzJ1xuXG4vKipcbiAqIHVwbG9hZE9wdGlvbiBpbml0aWFsaXppbmcgb2JqZWN0IGNvbnRhaW5pbmcgUHJvcGVydGllcyBtdWx0aXBsZSwgYWNjZXB0cy5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5cbmNvbnN0IHVwbG9hZE9wdGlvbnMgPSB7XG4gIG11bHRpcGxlOiB0cnVlLFxuICBhY2NlcHRzOiBBbGxGaWxlVHlwZXNcbn1cblxuLyoqXG4gKiBmdW5jdGlvbiBwcm92aWRlcyBub2RlIG1lbnUgcHJvcGVydGllcy5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAcGFyYW0gIHtvYmplY3R9IG5vZGVcbiAqIEByZXR1cm4ge29iamVjdH1cbiAqL1xuZnVuY3Rpb24gY29sbGVjdE5vZGVNZW51UHJvcHMoeyBub2RlIH0pIHtcbiAgcmV0dXJuIG5vZGVcbn1cblxuLyoqXG4gKiBQYW5lbENvbnRhaW5lciB1c2VkIGFzIHdyYXBwZXIgZWxlbWVudCBmb3IgICBwZW5hbCBjb250ZW50LlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtTdHlsZWQgY29tcG9uZW50fVxuICovXG5jb25zdCBQYW5lbENvbnRhaW5lciA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIG91dGxpbmU6IG5vbmU7XG4gIHVzZXItc2VsZWN0OiBub25lO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMudGhlbWUudGV4dDJ9O1xuYFxuXG4vKipcbiAqIFRyZWVEZXB0aENvbnRhaW5lciB1c2VkIHRvIHByb3ZpZGUgdGhlIHN0eWxlcyBmb3IgaGllcmFyY2h5IHRyZWUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IFRyZWVEZXB0aENvbnRhaW5lciA9IChzdHlsZWQgYXMgYW55KS5saWBgXG5cbi8qKlxuICogdHJlZU5vZGVCYWNrZ3JvdW5kQ29sb3IgZnVuY3Rpb24gdXNlZCB0byBwcm92aWRlIGJhY2tncm91bmQgY29sb3IgZm9yIHRyZWUgbm9kZXMuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHBhcmFtICB7Ym9vbGVhbn0gcm9vdFxuICogQHBhcmFtICB7Ym9vbGVhbn0gc2VsZWN0ZWRcbiAqIEBwYXJhbSAge2Jvb2xlYW59IGFjdGl2ZVxuICogQHBhcmFtICB7b2JqZWN0fSB0aGVtZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiB0cmVlTm9kZUJhY2tncm91bmRDb2xvcih7IHJvb3QsIHNlbGVjdGVkLCBhY3RpdmUsIHRoZW1lIH0pIHtcbiAgaWYgKHNlbGVjdGVkKSB7XG4gICAgaWYgKGFjdGl2ZSkge1xuICAgICAgcmV0dXJuIHRoZW1lLmJsdWVQcmVzc2VkXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGVtZS5zZWxlY3RlZFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAocm9vdCkge1xuICAgICAgcmV0dXJuIHRoZW1lLnBhbmVsMlxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhlbWUucGFuZWxcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBnZXROb2RlS2V5IGZ1bmN0aW9uIHVzZWQgdG8gZ2V0IG9iamVjdCBpZCBhdCBnaXZlbiBpbmRleC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAcGFyYW0gIHtudW1iZXJ9IGluZGV4IFtpbmRleCBvZiB0aGUgbm9kZSB0byBnZXQgb2JqZWN0IGlkXVxuICogQHBhcmFtICB7b2JqZWN0fSBkYXRhXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldE5vZGVLZXkoaW5kZXgsIGRhdGEpIHtcbiAgcmV0dXJuIGRhdGEubm9kZXNbaW5kZXhdLm9iamVjdC5pZFxufVxuXG4vKipcbiAqIGdldE5vZGVFbElkIGZ1bmN0aW9uIHByb3ZpZGVzIGlkIGZvciBub2RlLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAge29iamVjdH0gbm9kZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBnZXROb2RlRWxJZChub2RlKSB7XG4gIHJldHVybiAnaGllcmFyY2h5LW5vZGUtJyArIG5vZGUuaWRcbn1cblxuLyoqXG4gKiBUcmVlTm9kZUNvbnRhaW5lciB1c2VkIHRvIHByb3ZpZGUgc3R5bGVzIHRvIG5vZGUgdHJlZS5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7U3R5bGVkIGNvbXBvbmVudH1cbiAqL1xuY29uc3QgVHJlZU5vZGVDb250YWluZXIgPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBvdXRsaW5lOiBub25lO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuXG4gIGJhY2tncm91bmQtY29sb3I6ICR7dHJlZU5vZGVCYWNrZ3JvdW5kQ29sb3J9O1xuICBib3JkZXItYm90dG9tOiAkeyhwcm9wcykgPT4gKHByb3BzLnJvb3QgPyBwcm9wcy50aGVtZS5ib3JkZXJTdHlsZSA6ICdub25lJyl9O1xuXG4gIGNvbG9yOiAkeyhwcm9wcykgPT4gKHByb3BzLnNlbGVjdGVkIHx8IHByb3BzLmZvY3VzZWQgPyBwcm9wcy50aGVtZS50ZXh0IDogcHJvcHMudGhlbWUudGV4dDIpfTtcblxuICA6aG92ZXIsXG4gIDpmb2N1cyB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogJHsocHJvcHMpID0+IChwcm9wcy5zZWxlY3RlZCA/IHByb3BzLnRoZW1lLmJsdWVIb3ZlciA6IHByb3BzLnRoZW1lLmhvdmVyKX07XG4gICAgY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS50ZXh0fTtcbiAgfVxuXG4gIDphY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS5ibHVlUHJlc3NlZH07XG4gICAgY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS50ZXh0fTtcbiAgfVxuYFxuXG4vKipcbiAqIFRyZWVOb2RlU2VsZWN0VGFyZ2V0IHVzZWQgdG8gcHJvdmlkZSBzdHlsZXMgZm9yIG5vZGUgaW5zaWRlIGhpZXJhcmNoeSBjb250YWluZXIuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IFRyZWVOb2RlU2VsZWN0VGFyZ2V0ID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleDogMTtcbiAgcGFkZGluZzogMnB4IDRweCAycHggMDtcbmBcblxuLyoqXG4gKiBUcmVlTm9kZUxhYmVsQ29udGFpbmVyIHVzZWQgdG8gcHJvdmlkZSBzdHlsZXMgZm9yIGxhYmVsIHRleHQgb24gaGllcmFyY2h5IG5vZGUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IFRyZWVOb2RlTGFiZWxDb250YWluZXIgPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4OiAxO1xuYFxuXG4vKipcbiAqIFRyZWVOb2RlQ29udGVudCB1c2VkIHRvIHByb3ZpZGUgc3R5bGVzIGZvciBjb250YWluZXIgZWxlbWVudCBvZiBUcmVlTm9kZUljb24gVHJlZU5vZGVMYWJlbC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7U3R5bGVkIENvbXBvbmVudH1cbiAqL1xuY29uc3QgVHJlZU5vZGVDb250ZW50ID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgb3V0bGluZTogbm9uZTtcbiAgZGlzcGxheTogZmxleDtcbiAgcGFkZGluZy1yaWdodDogOHB4O1xuICBwYWRkaW5nLWxlZnQ6ICR7KHByb3BzKSA9PiBwcm9wcy5kZXB0aCAqIDggKyAyICsgJ3B4J307XG5gXG5cbi8qKlxuICogVHJlZU5vZGVUb2dnbGUgY3JlYXRlcyBlbGVtZW50IHVzZWQgdG8gdG9nZ2xlIG5vZGUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IFRyZWVOb2RlVG9nZ2xlID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgcGFkZGluZzogMnB4IDRweDtcbiAgbWFyZ2luOiAwIDRweDtcblxuICA6aG92ZXIge1xuICAgIGNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMudGhlbWUudGV4dH07XG4gICAgYmFja2dyb3VuZC1jb2xvcjogJHsocHJvcHMpID0+IHByb3BzLnRoZW1lLmhvdmVyMn07XG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICB9XG5gXG5cbi8qKlxuICogVHJlZU5vZGVMZWFmU3BhY2VyIHVzZWQgdG8gY3JlYXRlIHNwYWNlIGJldHdlZW4gbGVhZiBub2RlLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtTdHlsZWQgY29tcG9uZW50fVxuICovXG5jb25zdCBUcmVlTm9kZUxlYWZTcGFjZXIgPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICB3aWR0aDogMjBweDtcbmBcblxuLyoqXG4gKiBUcmVlTm9kZUljb24gdXNlZCBwcm92aWRlIHN0eWxlIGZvciBpY29uIGluc2lkZSB0cmVlIG5vZGUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IFRyZWVOb2RlSWNvbiA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIHdpZHRoOiAxMnB4O1xuICBoZWlnaHQ6IDEycHg7XG4gIG1hcmdpbjogMnB4IDRweDtcbmBcblxuLyoqXG4gKiBUcmVlTm9kZUxhYmVsIHVzZWQgdG8gcHJvdmlkZSBzdHlsZXMgZm9yIGxhYmVsIGNvbnRlbnQgb2YgdHJlZSBub2RlLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtTdHlsZWQgY29tcG9uZW50fVxuICovXG5jb25zdCBUcmVlTm9kZUxhYmVsID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgYmFja2dyb3VuZC1jb2xvcjogJHsocHJvcHMpID0+IChwcm9wcy5pc092ZXIgJiYgcHJvcHMuY2FuRHJvcCA/ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMyknIDogJ3RyYW5zcGFyZW50Jyl9O1xuICBjb2xvcjogJHsocHJvcHMpID0+IChwcm9wcy5pc092ZXIgJiYgcHJvcHMuY2FuRHJvcCA/IHByb3BzLnRoZW1lLnRleHQgOiAnaW5oZXJpdCcpfTtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBwYWRkaW5nOiAwIDJweDtcbmBcblxuLyoqXG4gKiBib3JkZXJTdHlsZSBmdW5jdGlvbiB1c2VkIHRvIHByb3ZpZGUgc3R5bGVzIGZvciBib3JkZXIuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHBhcmFtICB7Qm9vbGVhbn0gaXNPdmVyXG4gKiBAcGFyYW0gIHtCb29sZWFufSAgY2FuRHJvcFxuICogQHBhcmFtICB7c3RyaW5nfSAgcG9zaXRpb25cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gYm9yZGVyU3R5bGUoeyBpc092ZXIsIGNhbkRyb3AsIHBvc2l0aW9uIH0pIHtcbiAgaWYgKGlzT3ZlciAmJiBjYW5Ecm9wKSB7XG4gICAgcmV0dXJuIGBib3JkZXItJHtwb3NpdGlvbiA9PT0gJ2JlZm9yZScgPyAndG9wJyA6ICdib3R0b20nfTogMnB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKWBcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gJydcbiAgfVxufVxuXG4vKipcbiAqIFRyZWVOb2RlRHJvcFRhcmdldCB1c2VkIHRvIHByb3ZpZGUgc3R5bGVzIHRvIGRyb3AgdGFyZ2V0IG5vZGUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IFRyZWVOb2RlRHJvcFRhcmdldCA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIGhlaWdodDogNHB4O1xuICBib3gtc2l6aW5nOiBjb250ZW50LWJveDtcbiAgJHtib3JkZXJTdHlsZX07XG4gIG1hcmdpbi1sZWZ0OiAkeyhwcm9wcykgPT4gKHByb3BzLmRlcHRoID4gMCA/IHByb3BzLmRlcHRoICogOCArIDIwIDogMCl9cHg7XG5gXG5cbi8qKlxuICogVHJlZU5vZGVSZW5hbWVJbnB1dCB1c2VkIHRvIHByb3ZpZGVzIHN0eWxlcyBmb3IgcmVuYW1lIGlucHV0IG9mIG5vZGUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBDb21wb25lbnR9XG4gKi9cbmNvbnN0IFRyZWVOb2RlUmVuYW1lSW5wdXQgPSAoc3R5bGVkIGFzIGFueSkuaW5wdXRgXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAtM3B4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMudGhlbWUuaW5wdXRCYWNrZ3JvdW5kfTtcbiAgY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS50ZXh0fTtcbiAgYm9yZGVyOiAkeyhwcm9wcykgPT4gcHJvcHMudGhlbWUuYm9yZGVyU3R5bGV9O1xuICBwYWRkaW5nOiAycHggNHB4O1xuYFxuXG4vKipcbiAqIFRyZWVOb2RlUmVuYW1lSW5wdXRDb250YWluZXIgdXNlZCB0byBwcm92aWRlIHN0eWxlcyBmb3IgcmVuYW1lIGlucHV0IGNvbnRhaW5lciBvZiB0cmVlIG5vZGUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IFRyZWVOb2RlUmVuYW1lSW5wdXRDb250YWluZXIgPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGhlaWdodDogMTVweDtcbmBcblxuLyoqXG4gKiBpc0FuY2VzdG9yIHVzZWQgdG8gY2hlY2sgaWYgb2JqZWN0IGNvbnRhaW5zIGxlYWYgbm9kZXMgb3Igbm90LlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAge29iamVjdH0gIG9iamVjdFxuICogQHBhcmFtICB7b2JqZWN0fSAgb3RoZXJPYmplY3RcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzQW5jZXN0b3Iob2JqZWN0LCBvdGhlck9iamVjdCkge1xuICByZXR1cm4gIXRyYXZlcnNlRWFybHlPdXQob2JqZWN0LCAoY2hpbGQpID0+IGNoaWxkICE9PSBvdGhlck9iamVjdClcbn1cblxuLyoqXG4gKiBUcmVlTm9kZSBmdW5jdGlvbiBwcm92aWRlcyB0cmVlIG5vZGUgaGllcmFyY2h5IHZpZXcuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHBhcmFtICAgICAgIHtudW1iZXJ9IGluZGV4XG4gKiBAcGFyYW0gICAgICAge29iamVjdH0gZGF0YVxuICogQHBhcmFtICAgICAgIHtvYmplY3R9IHJlbmFtaW5nTm9kZVxuICogQHBhcmFtICAgICAgIHtmdW5jdGlvbn0gb25Ub2dnbGVcbiAqIEBwYXJhbSAgICAgICB7ZnVuY3Rpb259IG9uS2V5RG93blxuICogQHBhcmFtICAgICAgIHtmdW5jdGlvbn0gb25Nb3VzZURvd25cbiAqIEBwYXJhbSAgICAgICB7ZnVuY3Rpb259IG9uQ2xpY2tcbiAqIEBwYXJhbSAgICAgICB7ZnVuY3Rpb259IG9uQ2hhbmdlTmFtZVxuICogQHBhcmFtICAgICAgIHtmdW5jdGlvbn0gb25SZW5hbWVTdWJtaXRcbiAqIEBwYXJhbSAgICAgICB7ZnVuY3Rpb259IG9uVXBsb2FkXG4gKiBAcGFyYW0gICAgICAge29iamVjdH0gc3R5bGVcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBUcmVlTm9kZSh7XG4gIGluZGV4LFxuICBkYXRhOiB7IG5vZGVzLCByZW5hbWluZ05vZGUsIG9uVG9nZ2xlLCBvbktleURvd24sIG9uTW91c2VEb3duLCBvbkNsaWNrLCBvbkNoYW5nZU5hbWUsIG9uUmVuYW1lU3VibWl0LCBvblVwbG9hZCB9LFxuICBzdHlsZVxufSkge1xuICAvL2luaXRpYWxpemluZyBub2RlIGZyb20gbm9kZXMgYXJyYXkgYXQgc3BlY2lmaWMgaW5kZXhcbiAgY29uc3Qgbm9kZSA9IG5vZGVzW2luZGV4XVxuXG4gIC8vaW5pdGlhbGl6aW5nIHZhcmlhYmxlcyB1c2luZyBub2RlLlxuICBjb25zdCB7IGlzTGVhZiwgb2JqZWN0LCBkZXB0aCwgc2VsZWN0ZWQsIGFjdGl2ZSwgaWNvbkNvbXBvbmVudCwgaXNDb2xsYXBzZWQsIGNoaWxkSW5kZXgsIGxhc3RDaGlsZCB9ID0gbm9kZVxuXG4gIC8vY2FsbGJhY2sgZnVuY3Rpb24gdG8gaGFuZGxlIGNsaWNrIG9uIG5vZGUgb2YgaGllcmFyY2h5IHBhbmVsXG4gIGNvbnN0IG9uQ2xpY2tUb2dnbGUgPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgICBpZiAob25Ub2dnbGUpIHtcbiAgICAgICAgb25Ub2dnbGUoZSwgbm9kZSlcbiAgICAgIH1cbiAgICB9LFxuICAgIFtvblRvZ2dsZSwgbm9kZV1cbiAgKVxuXG4gIC8vY2FsbGJhY2sgZnVuY3Rpb24gdXNlZCB0byBoYW5kbGUgS2V5RG93biBldmVudCBvbiBub2RlXG4gIGNvbnN0IG9uTm9kZUtleURvd24gPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgICBpZiAob25LZXlEb3duKSB7XG4gICAgICAgIG9uS2V5RG93bihlLCBub2RlKVxuICAgICAgfVxuICAgIH0sXG4gICAgW29uS2V5RG93biwgbm9kZV1cbiAgKVxuXG4gIC8qKlxuICAgKiBvbktleURvd25OYW1lSW5wdXQgY2FsbGJhY2sgZnVuY3Rpb24gdG8gaGFuZGxlIGtleSBkb3duIGV2ZW50IG9uIG5hbWUgaW5wdXQuXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3Qgb25LZXlEb3duTmFtZUlucHV0ID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgb25SZW5hbWVTdWJtaXQobm9kZSwgbnVsbClcbiAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgb25SZW5hbWVTdWJtaXQobm9kZSwgZS50YXJnZXQudmFsdWUpXG4gICAgICB9XG4gICAgfSxcbiAgICBbb25SZW5hbWVTdWJtaXQsIG5vZGVdXG4gIClcblxuICAvKipcbiAgICogb25DbGlja05vZGUgY2FsbGJhY2sgZnVuY3Rpb24gdXNlZCB0byBoYW5sZGUgY2xpY2sgbm9kZSBpbnNpZGUgaGllcmFyY2h5IHBhbmVsLlxuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIGNvbnN0IG9uQ2xpY2tOb2RlID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIG9uQ2xpY2soZSwgbm9kZSlcbiAgICB9LFxuICAgIFtub2RlLCBvbkNsaWNrXVxuICApXG5cbiAgLyoqXG4gICAqIG9uTW91c2VEb3duTm9kZSBjYWxsYmFjayBmdW5jdGlvbiB1c2VkIHRvIGhhbmRsZSBtb3VzZSBkb3duIGV2ZW50IG9uIG5vZGUuXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3Qgb25Nb3VzZURvd25Ob2RlID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIG9uTW91c2VEb3duKGUsIG5vZGUpXG4gICAgfSxcbiAgICBbbm9kZSwgb25Nb3VzZURvd25dXG4gIClcblxuICAvKipcbiAgICogb25DaGFuZ2VOb2RlTmFtZSBjYWxsYmFjayBmdW5jdGlvbiB1c2VkIHRvIGhhbmRsZSBjaGFuZ2UgaW4gbmFtZSBvZiBub2RlLlxuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIGNvbnN0IG9uQ2hhbmdlTm9kZU5hbWUgPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgb25DaGFuZ2VOYW1lKG5vZGUsIGUudGFyZ2V0LnZhbHVlKVxuICAgIH0sXG4gICAgW25vZGUsIG9uQ2hhbmdlTmFtZV1cbiAgKVxuXG4gIC8qKlxuICAgKiBvblN1Ym1pdE5vZGVOYW1lIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGhhbmRsZSBzdWJtaXQgb3IgcmVuYW1lIG5hZGUgaW5wdXQuXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3Qgb25TdWJtaXROb2RlTmFtZSA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBvblJlbmFtZVN1Ym1pdChub2RlLCBlLnRhcmdldC52YWx1ZSlcbiAgICB9LFxuICAgIFtvblJlbmFtZVN1Ym1pdCwgbm9kZV1cbiAgKVxuXG4gIC8qKlxuICAgKiBpbml0aWFsaXppbmcgcmVuYW1pbmcgc2V0dGluZyByZW5hbWluZyB0cnVlIGlmIHJlbmFtaW5nTm9kZSBpZCBlcXVhbHMgbm9kZSBpZC5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIGNvbnN0IHJlbmFtaW5nID0gcmVuYW1pbmdOb2RlICYmIHJlbmFtaW5nTm9kZS5pZCA9PT0gbm9kZS5pZFxuXG4gIC8vaW5pdGlhbGl6aW5nIF9kcmFnUHJvcHMsIGRyYWcsIHByZXZpZXdcbiAgY29uc3QgW19kcmFnUHJvcHMsIGRyYWcsIHByZXZpZXddID0gdXNlRHJhZyh7XG4gICAgdHlwZTogSXRlbVR5cGVzLk5vZGUsXG4gICAgaXRlbSgpIHtcbiAgICAgIGNvbnN0IG11bHRpcGxlID0gQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2VsZWN0ZWQubGVuZ3RoID4gMVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogSXRlbVR5cGVzLk5vZGUsXG4gICAgICAgIG11bHRpcGxlLFxuICAgICAgICB2YWx1ZTogbXVsdGlwbGUgPyBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5zZWxlY3RlZCA6IENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnNlbGVjdGVkWzBdXG4gICAgICB9XG4gICAgfSxcbiAgICBjYW5EcmFnKCkge1xuICAgICAgcmV0dXJuICFDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5zZWxlY3RlZC5zb21lKChzZWxlY3RlZE9iaikgPT4gIXNlbGVjdGVkT2JqLnBhcmVudClcbiAgICB9LFxuICAgIGNvbGxlY3Q6IChtb25pdG9yKSA9PiAoe1xuICAgICAgaXNEcmFnZ2luZzogISFtb25pdG9yLmlzRHJhZ2dpbmcoKVxuICAgIH0pXG4gIH0pXG5cbiAgLy9jYWxsaW5nIHByZXZpZXcgZnVuY3Rpb24gd2l0aCBjaGFuZ2UgaW4gcHJvcGVydHlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBwcmV2aWV3KGdldEVtcHR5SW1hZ2UoKSwgeyBjYXB0dXJlRHJhZ2dpbmdTdGF0ZTogdHJ1ZSB9KVxuICB9LCBbcHJldmlld10pXG5cbiAgLy9pbml0aWFsaXppbmcgY2FuRHJvcEJlZm9yZSBhbmQgaXNPdmVyQmVmb3JlXG4gIGNvbnN0IFt7IGNhbkRyb3BCZWZvcmUsIGlzT3ZlckJlZm9yZSB9LCBiZWZvcmVEcm9wVGFyZ2V0XSA9IHVzZURyb3Aoe1xuICAgIC8vaW5pdGlhbGl6aW5nIGFjY2VwdCB0eXBlIHdpdGggYXJyYXkgY29udGFpbmluZyBub2RlIGl0ZW1UeXBlcywgZmlsZSBJdGVtVHlwZXMgYW5kIGFzc2V0IHR5cGVzXG4gICAgYWNjZXB0OiBbSXRlbVR5cGVzLk5vZGUsIEl0ZW1UeXBlcy5GaWxlLCAuLi5Bc3NldFR5cGVzXSxcblxuICAgIC8vZnVuY3Rpb24gdXNlZCB0byBkcm9wIGl0ZW1zXG4gICAgZHJvcChpdGVtOiBhbnkpIHtcbiAgICAgIC8vY2hlY2sgaWYgaXRlbSBjb250YWluIGZpbGVzXG4gICAgICBpZiAoaXRlbS5maWxlcykge1xuICAgICAgICAvL3VwbG9hZGluZyBmaWxlcyB0aGVuIGFkZGluZyBhcyBtZWRpYSB0byB0aGUgZWRpdG9yXG4gICAgICAgIG9uVXBsb2FkKGl0ZW0uZmlsZXMpLnRoZW4oKGFzc2V0cykgPT4ge1xuICAgICAgICAgIGlmIChhc3NldHMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYXNzZXQgb2YgYXNzZXRzKSB7XG4gICAgICAgICAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmFkZE1lZGlhKHsgdXJsOiBhc3NldC51cmwgfSwgb2JqZWN0LnBhcmVudCwgb2JqZWN0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vY2hlY2sgaWYgYWRkQXNzZXRPbkRyb3AgcmV0dXJucyB0cnVlIHRoZW4gcmV0dXJuXG4gICAgICBpZiAoYWRkQXNzZXRPbkRyb3AoaXRlbSwgb2JqZWN0LnBhcmVudCwgb2JqZWN0KSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmV4ZWN1dGVDb21tYW5kV2l0aEhpc3RvcnkoRWRpdG9yQ29tbWFuZHMuUkVQQVJFTlQsIGl0ZW0udmFsdWUsIHtcbiAgICAgICAgICBwYXJlbnRzOiBvYmplY3QucGFyZW50LFxuICAgICAgICAgIGJlZm9yZXM6IG9iamVjdFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sXG4gICAgY2FuRHJvcChpdGVtLCBtb25pdG9yKSB7XG4gICAgICAvL3VzZWQgdG8gY2hlY2sgaXRlbSB0aGF0IGl0ZW0gaXMgZHJvcGFibGUgb3Igbm90XG5cbiAgICAgIC8vY2hlY2sgaWYgbW9uaXRvciBpcyBvdmVyIG9yIG9iamVjdCBpcyBub3QgcGFyZW50IGVsZW1lbnRcbiAgICAgIGlmICghbW9uaXRvci5pc092ZXIoKSB8fCAhb2JqZWN0LnBhcmVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cblxuICAgICAgLy9jaGVjayBpdGVtIGlzIGFzc2V0XG4gICAgICBpZiAoaXNBc3NldChpdGVtKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuXG4gICAgICAvL2NoZWNrIGlmIGl0ZW0gdHlwZSBpcyBlcXVhbHMgdG8gbm9kZVxuICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gSXRlbVR5cGVzLk5vZGUpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBvYmplY3QucGFyZW50ICYmXG4gICAgICAgICAgIShpdGVtLm11bHRpcGxlXG4gICAgICAgICAgICA/IGl0ZW0udmFsdWUuc29tZSgob3RoZXJPYmplY3QpID0+IGlzQW5jZXN0b3Iob3RoZXJPYmplY3QsIG9iamVjdCkpXG4gICAgICAgICAgICA6IGlzQW5jZXN0b3IoaXRlbS52YWx1ZSwgb2JqZWN0KSlcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG4gICAgY29sbGVjdDogKG1vbml0b3IpID0+ICh7XG4gICAgICBjYW5Ecm9wQmVmb3JlOiBtb25pdG9yLmNhbkRyb3AoKSxcbiAgICAgIGlzT3ZlckJlZm9yZTogbW9uaXRvci5pc092ZXIoKVxuICAgIH0pXG4gIH0pXG5cbiAgLyoqXG4gICAqIGluaXRpYWxpemluZyB2YXJpYWJsZSB1c2luZyB1c2VEcm9wLlxuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqL1xuICBjb25zdCBbeyBjYW5Ecm9wQWZ0ZXIsIGlzT3ZlckFmdGVyIH0sIGFmdGVyRHJvcFRhcmdldF0gPSB1c2VEcm9wKHtcbiAgICAvLyBpbml0aWFsaXppbmcgYWNjZXB0IHdpdGggYXJyYXkgY29udGFpbmluZyB0eXBlc1xuICAgIGFjY2VwdDogW0l0ZW1UeXBlcy5Ob2RlLCBJdGVtVHlwZXMuRmlsZSwgLi4uQXNzZXRUeXBlc10sXG4gICAgZHJvcChpdGVtOiBhbnkpIHtcbiAgICAgIC8vIGluaXRpYWxpemluZyBuZXh0IGFuZCBpcyB0cnVlIGlmIG5vdCBsYXN0IGNoaWxkIGFuZCBvYmplY3QgcGFyZW50IGNvbnRhaW5zIGNoaWxkcmVuIHByb3BlcnR5IGFuZCBjb250YWluIGNoaWxkSW5kZXhcbiAgICAgIGNvbnN0IG5leHQgPSAhbGFzdENoaWxkICYmIG9iamVjdC5wYXJlbnQuY2hpbGRyZW5bY2hpbGRJbmRleCArIDFdXG5cbiAgICAgIC8vY2hlY2sgaWYgaXRlbSBjb250YWlucyBmaWxlc1xuICAgICAgaWYgKGl0ZW0uZmlsZXMpIHtcbiAgICAgICAgLy91cGxvYWRpbmcgZmlsZXMgdGhlbiBhZGRpbmcgYXNzZXRzIHRvIGVkaXRvciBtZWRpYVxuICAgICAgICBvblVwbG9hZChpdGVtLmZpbGVzKS50aGVuKChhc3NldHMpID0+IHtcbiAgICAgICAgICBpZiAoYXNzZXRzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFzc2V0IG9mIGFzc2V0cykge1xuICAgICAgICAgICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRNZWRpYSh7IHVybDogYXNzZXQudXJsIH0sIG9iamVjdC5wYXJlbnQsIG5leHQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKGFkZEFzc2V0T25Ecm9wKGl0ZW0sIG9iamVjdC5wYXJlbnQsIG5leHQpKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuZXhlY3V0ZUNvbW1hbmRXaXRoSGlzdG9yeShFZGl0b3JDb21tYW5kcy5SRVBBUkVOVCwgaXRlbS52YWx1ZSwge1xuICAgICAgICAgIHBhcmVudHM6IG9iamVjdC5wYXJlbnQsXG4gICAgICAgICAgYmVmb3JlczogbmV4dFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBjYW5Ecm9wIHVzZWQgdG8gY2hlY2sgaXRlbSBpcyBkcm9wYWJsZSBvciBub3QuXG4gICAgICpcbiAgICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBpdGVtXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBtb25pdG9yXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBjYW5Ecm9wKGl0ZW0sIG1vbml0b3IpIHtcbiAgICAgIGlmICghbW9uaXRvci5pc092ZXIoKSB8fCAhb2JqZWN0LnBhcmVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cblxuICAgICAgLy8gY2hlY2sgaWYgaXRlbSBpcyBhc3NldFxuICAgICAgaWYgKGlzQXNzZXQoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cblxuICAgICAgLy9jaGVjayBpZiBpdGVtIGlzIG9mIG5vZGUgdHlwZVxuICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gSXRlbVR5cGVzLk5vZGUpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBvYmplY3QucGFyZW50ICYmXG4gICAgICAgICAgIShpdGVtLm11bHRpcGxlXG4gICAgICAgICAgICA/IGl0ZW0udmFsdWUuc29tZSgob3RoZXJPYmplY3QpID0+IGlzQW5jZXN0b3Iob3RoZXJPYmplY3QsIG9iamVjdCkpXG4gICAgICAgICAgICA6IGlzQW5jZXN0b3IoaXRlbS52YWx1ZSwgb2JqZWN0KSlcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG4gICAgY29sbGVjdDogKG1vbml0b3IpID0+ICh7XG4gICAgICBjYW5Ecm9wQWZ0ZXI6IG1vbml0b3IuY2FuRHJvcCgpLFxuICAgICAgaXNPdmVyQWZ0ZXI6IG1vbml0b3IuaXNPdmVyKClcbiAgICB9KVxuICB9KVxuXG4gIGNvbnN0IFt7IGNhbkRyb3BPbiwgaXNPdmVyT24gfSwgb25Ecm9wVGFyZ2V0XSA9IHVzZURyb3Aoe1xuICAgIC8vaW5pdGlhbGl6aW5nIGFjY2VwdCB3aXRoIGFycmF5IGNvbnRhaW5pbmcgdHlwZXNcbiAgICBhY2NlcHQ6IFtJdGVtVHlwZXMuTm9kZSwgSXRlbVR5cGVzLkZpbGUsIC4uLkFzc2V0VHlwZXNdLFxuICAgIGRyb3AoaXRlbTogYW55KSB7XG4gICAgICAvLyBjaGVjayBpZiBpdGVtIGNvbnRhaW4gZmlsZXNcbiAgICAgIGlmIChpdGVtLmZpbGVzKSB7XG4gICAgICAgIC8vdXBsb2FkaW5nIGZpbGVzIHRoZW4gYWRkaW5nIGFzc2V0cyB0byBlZGl0b3IgbWVkaWFcbiAgICAgICAgb25VcGxvYWQoaXRlbS5maWxlcykudGhlbigoYXNzZXRzKSA9PiB7XG4gICAgICAgICAgaWYgKGFzc2V0cykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBhc3NldCBvZiBhc3NldHMpIHtcbiAgICAgICAgICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTWVkaWEoeyB1cmw6IGFzc2V0LnVybCB9LCBvYmplY3QpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKGFkZEFzc2V0T25Ecm9wKGl0ZW0sIG9iamVjdCkpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5leGVjdXRlQ29tbWFuZFdpdGhIaXN0b3J5KEVkaXRvckNvbW1hbmRzLlJFUEFSRU5ULCBpdGVtLnZhbHVlLCB7IHBhcmVudHM6IG9iamVjdCB9KVxuICAgICAgfVxuICAgIH0sXG4gICAgY2FuRHJvcChpdGVtLCBtb25pdG9yKSB7XG4gICAgICAvLyBjaGVjayBpZiBtb25pdG9yIGlzIG5vdCBvdmVyXG4gICAgICBpZiAoIW1vbml0b3IuaXNPdmVyKCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG5cbiAgICAgIC8vY2hlY2sgaXRlbSBpcyBhc3NldFxuICAgICAgaWYgKGlzQXNzZXQoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cblxuICAgICAgLy8gY2hlY2sgaWYgaXRlbSBpcyBvZiBub2RlIHR5cGVcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09IEl0ZW1UeXBlcy5Ob2RlKSB7XG4gICAgICAgIHJldHVybiAhKGl0ZW0ubXVsdGlwbGVcbiAgICAgICAgICA/IGl0ZW0udmFsdWUuc29tZSgob3RoZXJPYmplY3QpID0+IGlzQW5jZXN0b3Iob3RoZXJPYmplY3QsIG9iamVjdCkpXG4gICAgICAgICAgOiBpc0FuY2VzdG9yKGl0ZW0udmFsdWUsIG9iamVjdCkpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcbiAgICBjb2xsZWN0OiAobW9uaXRvcikgPT4gKHtcbiAgICAgIGNhbkRyb3BPbjogbW9uaXRvci5jYW5Ecm9wKCksXG4gICAgICBpc092ZXJPbjogbW9uaXRvci5pc092ZXIoKVxuICAgIH0pXG4gIH0pXG5cbiAgLy9yZXR1cm5pbmcgdHJlZSB2aWV3IGZvciBoaWVyYXJjaHkgcGFuZWxcbiAgcmV0dXJuIChcbiAgICA8VHJlZURlcHRoQ29udGFpbmVyIHN0eWxlPXtzdHlsZX0+XG4gICAgICA8Q29udGV4dE1lbnVUcmlnZ2VyIGhvbGRUb0Rpc3BsYXk9ey0xfSBpZD1cImhpZXJhcmNoeS1ub2RlLW1lbnVcIiBub2RlPXtub2RlfSBjb2xsZWN0PXtjb2xsZWN0Tm9kZU1lbnVQcm9wc30+XG4gICAgICAgIDxUcmVlTm9kZUNvbnRhaW5lclxuICAgICAgICAgIHJlZj17ZHJhZ31cbiAgICAgICAgICBpZD17Z2V0Tm9kZUVsSWQobm9kZSl9XG4gICAgICAgICAgb25Nb3VzZURvd249e29uTW91c2VEb3duTm9kZX1cbiAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrTm9kZX1cbiAgICAgICAgICB0YWJJbmRleD1cIjBcIlxuICAgICAgICAgIG9uS2V5RG93bj17b25Ob2RlS2V5RG93bn1cbiAgICAgICAgICByb290PXtkZXB0aCA9PT0gMH1cbiAgICAgICAgICBzZWxlY3RlZD17c2VsZWN0ZWR9XG4gICAgICAgICAgYWN0aXZlPXthY3RpdmV9XG4gICAgICAgID5cbiAgICAgICAgICA8VHJlZU5vZGVEcm9wVGFyZ2V0XG4gICAgICAgICAgICByZWY9e2JlZm9yZURyb3BUYXJnZXR9XG4gICAgICAgICAgICBkZXB0aD17ZGVwdGh9XG4gICAgICAgICAgICBwb3NpdGlvbj1cImJlZm9yZVwiXG4gICAgICAgICAgICBjYW5Ecm9wPXtjYW5Ecm9wQmVmb3JlfVxuICAgICAgICAgICAgaXNPdmVyPXtpc092ZXJCZWZvcmV9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8VHJlZU5vZGVDb250ZW50IGRlcHRoPXtkZXB0aH0gcmVmPXtvbkRyb3BUYXJnZXR9PlxuICAgICAgICAgICAge2lzTGVhZiA/IChcbiAgICAgICAgICAgICAgPFRyZWVOb2RlTGVhZlNwYWNlciAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPFRyZWVOb2RlVG9nZ2xlIGNvbGxhcHNlZD17aXNDb2xsYXBzZWR9IG9uQ2xpY2s9e29uQ2xpY2tUb2dnbGV9PlxuICAgICAgICAgICAgICAgIHtpc0NvbGxhcHNlZCA/IDxDYXJldFJpZ2h0IHNpemU9ezEyfSAvPiA6IDxDYXJldERvd24gc2l6ZT17MTJ9IC8+fVxuICAgICAgICAgICAgICA8L1RyZWVOb2RlVG9nZ2xlPlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgPFRyZWVOb2RlU2VsZWN0VGFyZ2V0PlxuICAgICAgICAgICAgICA8VHJlZU5vZGVJY29uIGFzPXtpY29uQ29tcG9uZW50fSAvPlxuICAgICAgICAgICAgICA8VHJlZU5vZGVMYWJlbENvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICB7cmVuYW1pbmcgPyAoXG4gICAgICAgICAgICAgICAgICA8VHJlZU5vZGVSZW5hbWVJbnB1dENvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgICAgPFRyZWVOb2RlUmVuYW1lSW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlTm9kZU5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXtvbktleURvd25OYW1lSW5wdXR9XG4gICAgICAgICAgICAgICAgICAgICAgb25CbHVyPXtvblN1Ym1pdE5vZGVOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtyZW5hbWluZ05vZGUubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICBhdXRvRm9jdXNcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvVHJlZU5vZGVSZW5hbWVJbnB1dENvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPFRyZWVOb2RlTGFiZWwgY2FuRHJvcD17Y2FuRHJvcE9ufSBpc092ZXI9e2lzT3Zlck9ufT5cbiAgICAgICAgICAgICAgICAgICAge29iamVjdC5uYW1lfVxuICAgICAgICAgICAgICAgICAgPC9UcmVlTm9kZUxhYmVsPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvVHJlZU5vZGVMYWJlbENvbnRhaW5lcj5cbiAgICAgICAgICAgICAge25vZGUub2JqZWN0Lmlzc3VlcyAmJiBub2RlLm9iamVjdC5pc3N1ZXMubGVuZ3RoID4gMCAmJiA8Tm9kZUlzc3Vlc0ljb24gbm9kZT17bm9kZS5vYmplY3R9IC8+fVxuICAgICAgICAgICAgPC9UcmVlTm9kZVNlbGVjdFRhcmdldD5cbiAgICAgICAgICA8L1RyZWVOb2RlQ29udGVudD5cblxuICAgICAgICAgIDxUcmVlTm9kZURyb3BUYXJnZXRcbiAgICAgICAgICAgIGRlcHRoPXtkZXB0aH1cbiAgICAgICAgICAgIHJlZj17YWZ0ZXJEcm9wVGFyZ2V0fVxuICAgICAgICAgICAgcG9zaXRpb249XCJhZnRlclwiXG4gICAgICAgICAgICBjYW5Ecm9wPXtjYW5Ecm9wQWZ0ZXJ9XG4gICAgICAgICAgICBpc092ZXI9e2lzT3ZlckFmdGVyfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvVHJlZU5vZGVDb250YWluZXI+XG4gICAgICA8L0NvbnRleHRNZW51VHJpZ2dlcj5cbiAgICA8L1RyZWVEZXB0aENvbnRhaW5lcj5cbiAgKVxufVxuXG4vKipcbiAqIGluaXRpYWxpemluZyBNZW1vVHJlZU5vZGUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICovXG5jb25zdCBNZW1vVHJlZU5vZGUgPSBtZW1vKFRyZWVOb2RlLCBhcmVFcXVhbClcblxuLyoqXG4gKiB0cmVlV2Fsa2VyIGZ1bmN0aW9uIHVzZWQgdG8gaGFuZGxlIHRyZWUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHBhcmFtICB7b2JqZWN0fSAgICBjb2xsYXBzZWROb2Rlc1xuICovXG5mdW5jdGlvbiogdHJlZVdhbGtlcihjb2xsYXBzZWROb2Rlcykge1xuICBjb25zdCBzdGFjayA9IFtdXG5cbiAgaWYgKCFTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmUpIHJldHVyblxuXG4gIHN0YWNrLnB1c2goe1xuICAgIGRlcHRoOiAwLFxuICAgIG9iamVjdDogU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lLFxuICAgIGNoaWxkSW5kZXg6IDAsXG4gICAgbGFzdENoaWxkOiB0cnVlXG4gIH0pXG5cbiAgd2hpbGUgKHN0YWNrLmxlbmd0aCAhPT0gMCkge1xuICAgIGNvbnN0IHsgZGVwdGgsIG9iamVjdCwgY2hpbGRJbmRleCwgbGFzdENoaWxkIH0gPSBzdGFjay5wb3AoKVxuXG4gICAgY29uc3QgTm9kZUVkaXRvciA9IE5vZGVNYW5hZ2VyLmluc3RhbmNlLmdldEVkaXRvckZyb21Ob2RlKG9iamVjdCkgfHwgRGVmYXVsdE5vZGVFZGl0b3JcbiAgICBjb25zdCBpY29uQ29tcG9uZW50ID0gTm9kZUVkaXRvci5XcmFwcGVkQ29tcG9uZW50XG4gICAgICA/IE5vZGVFZGl0b3IuV3JhcHBlZENvbXBvbmVudC5pY29uQ29tcG9uZW50XG4gICAgICA6IE5vZGVFZGl0b3IuaWNvbkNvbXBvbmVudFxuXG4gICAgY29uc3QgaXNDb2xsYXBzZWQgPSBjb2xsYXBzZWROb2Rlc1tvYmplY3QuaWRdXG5cbiAgICB5aWVsZCB7XG4gICAgICBpZDogb2JqZWN0LmlkLFxuICAgICAgaXNMZWFmOiBvYmplY3QuY2hpbGRyZW4uZmlsdGVyKChjKSA9PiBjLmlzTm9kZSkubGVuZ3RoID09PSAwLFxuICAgICAgaXNDb2xsYXBzZWQsXG4gICAgICBkZXB0aCxcbiAgICAgIG9iamVjdCxcbiAgICAgIGljb25Db21wb25lbnQsXG4gICAgICBzZWxlY3RlZDogQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2VsZWN0ZWQuaW5kZXhPZihvYmplY3QpICE9PSAtMSxcbiAgICAgIGFjdGl2ZTpcbiAgICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2VsZWN0ZWQubGVuZ3RoID4gMCAmJlxuICAgICAgICBvYmplY3QgPT09IENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnNlbGVjdGVkW0NvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnNlbGVjdGVkLmxlbmd0aCAtIDFdLFxuICAgICAgY2hpbGRJbmRleCxcbiAgICAgIGxhc3RDaGlsZFxuICAgIH1cblxuICAgIGlmIChvYmplY3QuY2hpbGRyZW4ubGVuZ3RoICE9PSAwICYmICFpc0NvbGxhcHNlZCkge1xuICAgICAgZm9yIChsZXQgaSA9IG9iamVjdC5jaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBjb25zdCBjaGlsZCA9IG9iamVjdC5jaGlsZHJlbltpXVxuXG4gICAgICAgIGlmIChjaGlsZC5pc05vZGUpIHtcbiAgICAgICAgICBzdGFjay5wdXNoKHtcbiAgICAgICAgICAgIGRlcHRoOiBkZXB0aCArIDEsXG4gICAgICAgICAgICBvYmplY3Q6IGNoaWxkLFxuICAgICAgICAgICAgY2hpbGRJbmRleDogaSxcbiAgICAgICAgICAgIGxhc3RDaGlsZDogaSA9PT0gMFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBIaWVyYXJjaHlQYW5lbCBmdW5jdGlvbiBjb21wb25lbnQgcHJvdmlkZXMgdmlldyBmb3IgaGllcmFyY2h5IHRyZWUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEhpZXJhcmNoeVBhbmVsKCkge1xuICBjb25zdCBvblVwbG9hZCA9IHVzZVVwbG9hZCh1cGxvYWRPcHRpb25zKVxuICBjb25zdCBbcmVuYW1pbmdOb2RlLCBzZXRSZW5hbWluZ05vZGVdID0gdXNlU3RhdGUobnVsbClcbiAgY29uc3QgW2NvbGxhcHNlZE5vZGVzLCBzZXRDb2xsYXBzZWROb2Rlc10gPSB1c2VTdGF0ZSh7fSlcbiAgY29uc3QgW25vZGVzLCBzZXROb2Rlc10gPSB1c2VTdGF0ZShbXSlcbiAgY29uc3QgdXBkYXRlTm9kZUhpZXJhcmNoeSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBub2RlcyA9IEFycmF5LmZyb20odHJlZVdhbGtlcihjb2xsYXBzZWROb2RlcykpXG4gICAgc2V0Tm9kZXMobm9kZXMpXG4gIH0sIFtjb2xsYXBzZWROb2Rlc10pXG4gIGNvbnN0IHsgdCB9ID0gdXNlVHJhbnNsYXRpb24oKVxuXG4gIC8qKlxuICAgKiBleHBhbmROb2RlIGNhbGxiYWNrIGZ1bmN0aW9uIHVzZWQgdG8gZXhwYW5kIG5vZGUuXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3QgZXhwYW5kTm9kZSA9IHVzZUNhbGxiYWNrKFxuICAgIChub2RlKSA9PiB7XG4gICAgICBkZWxldGUgY29sbGFwc2VkTm9kZXNbbm9kZS5pZF1cbiAgICAgIHNldENvbGxhcHNlZE5vZGVzKHsgLi4uY29sbGFwc2VkTm9kZXMgfSlcbiAgICB9LFxuICAgIFtjb2xsYXBzZWROb2Rlc11cbiAgKVxuXG4gIC8qKlxuICAgKiBjb2xsYXBzZU5vZGUgZnVuY3Rpb24gdXNlZCB0byBjb2xsYXBzZSBub2RlLlxuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIGNvbnN0IGNvbGxhcHNlTm9kZSA9IHVzZUNhbGxiYWNrKFxuICAgIChub2RlKSA9PiB7XG4gICAgICBzZXRDb2xsYXBzZWROb2Rlcyh7IC4uLmNvbGxhcHNlZE5vZGVzLCBbbm9kZS5pZF06IHRydWUgfSlcbiAgICB9LFxuICAgIFtzZXRDb2xsYXBzZWROb2RlcywgY29sbGFwc2VkTm9kZXNdXG4gIClcblxuICAvKipcbiAgICogZXhwYW5kQ2hpbGRyZW4gZnVuY3Rpb24gdXNlZCB0byBleHBhbmQgY2hpbGRyZW4uXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3QgZXhwYW5kQ2hpbGRyZW4gPSB1c2VDYWxsYmFjayhcbiAgICAobm9kZSkgPT4ge1xuICAgICAgbm9kZS5vYmplY3QudHJhdmVyc2UoKGNoaWxkKSA9PiB7XG4gICAgICAgIGlmIChjaGlsZC5pc05vZGUpIHtcbiAgICAgICAgICBkZWxldGUgY29sbGFwc2VkTm9kZXNbY2hpbGQuaWRdXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBzZXRDb2xsYXBzZWROb2Rlcyh7IC4uLmNvbGxhcHNlZE5vZGVzIH0pXG4gICAgfSxcbiAgICBbc2V0Q29sbGFwc2VkTm9kZXMsIGNvbGxhcHNlZE5vZGVzXVxuICApXG5cbiAgLyoqXG4gICAqIGNvbGxhcHNlQ2hpbGRyZW4gZnVuY3Rpb24gdXNlZCB0byBjb2xsYXBzZSBjaGlsZHJlbi5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBjb25zdCBjb2xsYXBzZUNoaWxkcmVuID0gdXNlQ2FsbGJhY2soXG4gICAgKG5vZGUpID0+IHtcbiAgICAgIG5vZGUub2JqZWN0LnRyYXZlcnNlKChjaGlsZCkgPT4ge1xuICAgICAgICBpZiAoY2hpbGQuaXNOb2RlKSB7XG4gICAgICAgICAgY29sbGFwc2VkTm9kZXNbY2hpbGQuaWRdID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgc2V0Q29sbGFwc2VkTm9kZXMoeyAuLi5jb2xsYXBzZWROb2RlcyB9KVxuICAgIH0sXG4gICAgW3NldENvbGxhcHNlZE5vZGVzLCBjb2xsYXBzZWROb2Rlc11cbiAgKVxuXG4gIC8qKlxuICAgKiBmdW5jdGlvbiB1c2VkIHRvIGV4cGFuZCBhbGwgbm9kZS5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBjb25zdCBvbkV4cGFuZEFsbE5vZGVzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldENvbGxhcHNlZE5vZGVzKHt9KVxuICB9LCBbc2V0Q29sbGFwc2VkTm9kZXNdKVxuXG4gIC8qKlxuICAgKiBmdW5jdGlvbiB1c2VkIHRvIGNvbGxhcHNlIGFsbCBub2Rlcy5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBjb25zdCBvbkNvbGxhcHNlQWxsTm9kZXMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgbmV3Q29sbGFwc2VkTm9kZXMgPSB7fVxuICAgIFNjZW5lTWFuYWdlci5pbnN0YW5jZS5zY2VuZS50cmF2ZXJzZSgoY2hpbGQpID0+IHtcbiAgICAgIGlmIChjaGlsZC5pc05vZGUpIHtcbiAgICAgICAgbmV3Q29sbGFwc2VkTm9kZXNbY2hpbGQuaWRdID0gdHJ1ZVxuICAgICAgfVxuICAgIH0pXG4gICAgc2V0Q29sbGFwc2VkTm9kZXMobmV3Q29sbGFwc2VkTm9kZXMpXG4gIH0sIFtzZXRDb2xsYXBzZWROb2Rlc10pXG5cbiAgLyoqXG4gICAqIG9uT2JqZWN0Q2hhbmdlZCBjYWxsYmFjayBmdW5jdGlvbiB1c2VkIHRvIGhhbmRsZSBjaGFuZ2VzIG9uIG9iamVjdC5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBjb25zdCBvbk9iamVjdENoYW5nZWQgPSB1c2VDYWxsYmFjayhcbiAgICAob2JqZWN0cywgcHJvcGVydHlOYW1lKSA9PiB7XG4gICAgICBpZiAocHJvcGVydHlOYW1lID09PSAnbmFtZScgfHwgIXByb3BlcnR5TmFtZSkge1xuICAgICAgICB1cGRhdGVOb2RlSGllcmFyY2h5KClcbiAgICAgIH1cbiAgICB9LFxuICAgIFt1cGRhdGVOb2RlSGllcmFyY2h5XVxuICApXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuU0NFTkVfR1JBUEhfQ0hBTkdFRC50b1N0cmluZygpLCB1cGRhdGVOb2RlSGllcmFyY2h5KVxuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmFkZExpc3RlbmVyKEVkaXRvckV2ZW50cy5TRUxFQ1RJT05fQ0hBTkdFRC50b1N0cmluZygpLCB1cGRhdGVOb2RlSGllcmFyY2h5KVxuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmFkZExpc3RlbmVyKEVkaXRvckV2ZW50cy5PQkpFQ1RTX0NIQU5HRUQudG9TdHJpbmcoKSwgb25PYmplY3RDaGFuZ2VkKVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5TQ0VORV9HUkFQSF9DSEFOR0VELnRvU3RyaW5nKCksIHVwZGF0ZU5vZGVIaWVyYXJjaHkpXG4gICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihFZGl0b3JFdmVudHMuU0VMRUNUSU9OX0NIQU5HRUQudG9TdHJpbmcoKSwgdXBkYXRlTm9kZUhpZXJhcmNoeSlcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5PQkpFQ1RTX0NIQU5HRUQudG9TdHJpbmcoKSwgb25PYmplY3RDaGFuZ2VkKVxuICAgIH1cbiAgfSwgW3VwZGF0ZU5vZGVIaWVyYXJjaHksIG9uT2JqZWN0Q2hhbmdlZF0pXG5cbiAgLyoqXG4gICAqIG9uTW91c2VEb3duIGNhbGxiYWNrIGZ1bmN0aW9uIHVzZWQgdG8gaGFuZGxlIG1vdXNlIGRvd24gZXZlbnQuXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3Qgb25Nb3VzZURvd24gPSB1c2VDYWxsYmFjaygoZSwgbm9kZSkgPT4ge1xuICAgIGlmIChlLmRldGFpbCA9PT0gMSkge1xuICAgICAgaWYgKGUuc2hpZnRLZXkpIHtcbiAgICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuZXhlY3V0ZUNvbW1hbmRXaXRoSGlzdG9yeShFZGl0b3JDb21tYW5kcy5UT0dHTEVfU0VMRUNUSU9OLCBub2RlLm9iamVjdClcbiAgICAgIH0gZWxzZSBpZiAoIW5vZGUuc2VsZWN0ZWQpIHtcbiAgICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuZXhlY3V0ZUNvbW1hbmRXaXRoSGlzdG9yeShFZGl0b3JDb21tYW5kcy5SRVBMQUNFX1NFTEVDVElPTiwgbm9kZS5vYmplY3QpXG4gICAgICB9XG4gICAgfVxuICB9LCBbXSlcblxuICAvKipcbiAgICogb25DbGljayBjYWxsYmFjayBmdW5jdGlvbiBmb3IgaGFuZGxpbmcgb25DbGljayBldmVudCBvbiBoaWVyYXJjaHkgcGVuYWwgaXRlbS5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBjb25zdCBvbkNsaWNrID0gdXNlQ2FsbGJhY2soKGUsIG5vZGUpID0+IHtcbiAgICBpZiAoZS5kZXRhaWwgPT09IDIpIHtcbiAgICAgIENvbnRyb2xNYW5hZ2VyLmluc3RhbmNlLmVkaXRvckNvbnRyb2xzLmZvY3VzKFtub2RlLm9iamVjdF0pXG4gICAgfVxuICB9LCBbXSlcblxuICAvKipcbiAgICogb25Ub2dnbGUgZnVuY3Rpb24gdXNlZCB0byBoYW5kbGUgdG9nZ2xlIG9uIGhpZXJhcmNoeSBwZW5hbCBpdGVtLlxuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIGNvbnN0IG9uVG9nZ2xlID0gdXNlQ2FsbGJhY2soXG4gICAgKF9lLCBub2RlKSA9PiB7XG4gICAgICBpZiAoY29sbGFwc2VkTm9kZXNbbm9kZS5pZF0pIHtcbiAgICAgICAgZXhwYW5kTm9kZShub2RlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29sbGFwc2VOb2RlKG5vZGUpXG4gICAgICB9XG4gICAgfSxcbiAgICBbY29sbGFwc2VkTm9kZXMsIGV4cGFuZE5vZGUsIGNvbGxhcHNlTm9kZV1cbiAgKVxuXG4gIC8qKlxuICAgKiBvbktleURvd24gY2FsbGJhY2sgZnVuY3Rpb24gdG8gaGFuZGxlIG9uS2V5RG93biBldmVudCBvbiBoaWVyYXJjaHkgcGVuYWwgaXRlbS5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBjb25zdCBvbktleURvd24gPSB1c2VDYWxsYmFjayhcbiAgICAoZSwgbm9kZSkgPT4ge1xuICAgICAgLy8gY2hlY2sgaWYga2V5IGVxdWFscyB0byBBcnJvd0Rvd25cbiAgICAgIGlmIChlLmtleSA9PT0gJ0Fycm93RG93bicpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAgICAgLy8gaW5pdGlhbGl6aW5nIG5vZGVJbmRleCB1c2luZyBub2RlcyBhcnJheVxuICAgICAgICBjb25zdCBub2RlSW5kZXggPSBub2Rlcy5pbmRleE9mKG5vZGUpXG5cbiAgICAgICAgLy8gaW5pdGlhbGl6aW5nIG5leHROb2RlIHVzaW5nIG5vZGVzIGFycmF5XG4gICAgICAgIGNvbnN0IG5leHROb2RlID0gbm9kZUluZGV4ICE9PSAtMSAmJiBub2Rlc1tub2RlSW5kZXggKyAxXVxuXG4gICAgICAgIC8vIGNoZWNrIGlmIG5leHROb2RlIGlzIG5vdCBFbXB0eVxuICAgICAgICBpZiAobmV4dE5vZGUpIHtcbiAgICAgICAgICBpZiAoZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuZXhlY3V0ZUNvbW1hbmRXaXRoSGlzdG9yeShFZGl0b3JDb21tYW5kcy5BRERfVE9fU0VMRUNUSU9OLCBuZXh0Tm9kZS5vYmplY3QpXG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGluaXRpYWxpemluZyBuZXh0Tm9kZUVsIHVzaW5nIG5leHROb2RlIGVsZW1lbnQgaWRcbiAgICAgICAgICBjb25zdCBuZXh0Tm9kZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZ2V0Tm9kZUVsSWQobmV4dE5vZGUpKVxuXG4gICAgICAgICAgLy9jaGVjayBpZiBuZXh0Tm9kZUVsIGlzIG5vdCBlbXB0eVxuICAgICAgICAgIGlmIChuZXh0Tm9kZUVsKSB7XG4gICAgICAgICAgICBuZXh0Tm9kZUVsLmZvY3VzKClcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvL2NoZWNrIGlmIHByZXNzZWQga2V5IGVxdWFscyB0byBBcnJvd1VwXG4gICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnQXJyb3dVcCcpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAgICAgLy8gaW5pdGlhbGl6aW5nIG5vZGVJbmRleCAgdXNpbmcgbm9kZXMgYXJyYXlcbiAgICAgICAgY29uc3Qgbm9kZUluZGV4ID0gbm9kZXMuaW5kZXhPZihub2RlKVxuXG4gICAgICAgIC8vIGluaXRpYWxpemluZyBwcmV2Tm9kZSB1c2luZyBub2RlcyBhcnJheSBjdXJyZW50IG5vZGVJbmRleCAtMVxuICAgICAgICBjb25zdCBwcmV2Tm9kZSA9IG5vZGVJbmRleCAhPT0gLTEgJiYgbm9kZXNbbm9kZUluZGV4IC0gMV1cblxuICAgICAgICAvLyBpZiBwcmV2Tm9kZSBpcyBub3QgZW1wdHlcbiAgICAgICAgaWYgKHByZXZOb2RlKSB7XG4gICAgICAgICAgaWYgKGUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmV4ZWN1dGVDb21tYW5kV2l0aEhpc3RvcnkoRWRpdG9yQ29tbWFuZHMuQUREX1RPX1NFTEVDVElPTiwgcHJldk5vZGUub2JqZWN0KVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGluaXRpYWxpemluZyBwcmV2Tm9kZUVsIHVzaW5nIHByZXZOb2RlIElkXG4gICAgICAgICAgY29uc3QgcHJldk5vZGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGdldE5vZGVFbElkKHByZXZOb2RlKSlcblxuICAgICAgICAgIC8vY2hlY2sgaWYgcHJldk5vZGVFbCBpcyBub3QgZW1wdHlcbiAgICAgICAgICBpZiAocHJldk5vZGVFbCkge1xuICAgICAgICAgICAgcHJldk5vZGVFbC5mb2N1cygpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIGlmIHByZXNzZWQga2V5IGVxdWFscyB0byBsZWZ0IGFycm93IGFuZCBub2RlIG9iamVjdCBjaGlsZHJlbiBub2RlIGxlbmd0aCBpcyBncmVhdG9yIHRoZW4gMFxuICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0Fycm93TGVmdCcgJiYgbm9kZS5vYmplY3QuY2hpbGRyZW4uZmlsdGVyKChvKSA9PiBvLmlzTm9kZSkubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoZS5zaGlmdEtleSkge1xuICAgICAgICAgIGNvbGxhcHNlQ2hpbGRyZW4obm9kZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb2xsYXBzZU5vZGUobm9kZSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vY2hlY2sgaWYgcHJlc3NlZCBrZXkgZXF1YWxzIHRvIGFycm93IHJpZ2h0XG4gICAgICAgIC8vYW5kIG5vZGUgcHJvcGVydHkgb2JqZWN0IGNoaWxkcmVuIG5vZGUgbGVuZ3RoIGl1cyBncmVhdG9yIHRoZW4gemVyby5cbiAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1JpZ2h0JyAmJiBub2RlLm9iamVjdC5jaGlsZHJlbi5maWx0ZXIoKG8pID0+IG8uaXNOb2RlKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgZXhwYW5kQ2hpbGRyZW4obm9kZSlcbiAgICAgICAgfSBlbHNlIGlmIChub2RlLm9iamVjdC5jaGlsZHJlbi5maWx0ZXIoKG8pID0+IG8uaXNOb2RlKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZXhwYW5kTm9kZShub2RlKVxuICAgICAgICB9XG5cbiAgICAgICAgLy9jaGVjayBpZiBwcmVzc2VkIGtleSBlcXVhbHMgdG8gZW50ZXJcbiAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgaWYgKGUuc2hpZnRLZXkpIHtcbiAgICAgICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5leGVjdXRlQ29tbWFuZFdpdGhIaXN0b3J5KEVkaXRvckNvbW1hbmRzLlRPR0dMRV9TRUxFQ1RJT04sIG5vZGUub2JqZWN0KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmV4ZWN1dGVDb21tYW5kV2l0aEhpc3RvcnkoRWRpdG9yQ29tbWFuZHMuUkVQTEFDRV9TRUxFQ1RJT04sIG5vZGUub2JqZWN0KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBbbm9kZXMsIGV4cGFuZE5vZGUsIGNvbGxhcHNlTm9kZSwgZXhwYW5kQ2hpbGRyZW4sIGNvbGxhcHNlQ2hpbGRyZW5dXG4gIClcblxuICAvKipcbiAgICogb25EZWxldGVOb2RlIGNhbGxiYWNrIGZ1bmN0aW9uIHVzZWQgdG8gaGFuZGxlIGRlbGV0ZSBvbiBub2RlLlxuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIGNvbnN0IG9uRGVsZXRlTm9kZSA9IHVzZUNhbGxiYWNrKChlLCBub2RlKSA9PiB7XG4gICAgbGV0IG9ianMgPSBub2RlLnNlbGVjdGVkID8gQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2VsZWN0ZWQgOiBub2RlLm9iamVjdFxuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmV4ZWN1dGVDb21tYW5kV2l0aEhpc3RvcnkoRWRpdG9yQ29tbWFuZHMuUkVNT1ZFX09CSkVDVFMsIG9ianMpXG4gIH0sIFtdKVxuXG4gIC8qKlxuICAgKiBvbkR1cGxpY2F0ZU5vZGUgY2FsbGJhY2sgZnVuY3Rpb24gdG8gaGFuZGxlIER1cGxpY2F0aW9uIG9mIG5vZGUuXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3Qgb25EdXBsaWNhdGVOb2RlID0gdXNlQ2FsbGJhY2soKGUsIG5vZGUpID0+IHtcbiAgICBsZXQgb2JqcyA9IG5vZGUuc2VsZWN0ZWQgPyBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5zZWxlY3RlZCA6IG5vZGUub2JqZWN0XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuZXhlY3V0ZUNvbW1hbmRXaXRoSGlzdG9yeShFZGl0b3JDb21tYW5kcy5EVVBMSUNBVEVfT0JKRUNUUywgb2JqcylcbiAgfSwgW10pXG5cbiAgLyoqXG4gICAqIG9uR3JvdXBOb2RlcyBjYWxsYmFjayBmdW5jdGlvbiB1c2VkIHRvIGhhbmRsZSBncm91cGluZyBvZiBub2Rlcy5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBjb25zdCBvbkdyb3VwTm9kZXMgPSB1c2VDYWxsYmFjaygoZSwgbm9kZSkgPT4ge1xuICAgIGNvbnN0IG9ianMgPSBub2RlLnNlbGVjdGVkID8gQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2VsZWN0ZWQgOiBub2RlLm9iamVjdFxuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmV4ZWN1dGVDb21tYW5kV2l0aEhpc3RvcnkoRWRpdG9yQ29tbWFuZHMuR1JPVVAsIG9ianMpXG4gIH0sIFtdKVxuXG4gIC8qKlxuICAgKiBvblJlbmFtZU5vZGUgY2FsbGJhY2sgZnVuY3Rpb24gdG8gaGFuZGxlIHJlbmFtZSBub2RlLlxuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIGNvbnN0IG9uUmVuYW1lTm9kZSA9IHVzZUNhbGxiYWNrKFxuICAgIChlLCBub2RlKSA9PiB7XG4gICAgICBzZXRSZW5hbWluZ05vZGUoeyBpZDogbm9kZS5pZCwgbmFtZTogbm9kZS5vYmplY3QubmFtZSB9KVxuICAgIH0sXG4gICAgW3NldFJlbmFtaW5nTm9kZV1cbiAgKVxuXG4gIC8qKlxuICAgKiBvbkNoYW5nZU5hbWUgY2FsbGJhY2sgIGZ1bmN0aW9uIHVzZWQgdG8gaGFuZGxlIGNoYW5nZXMgaW4gbmFtZS5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBjb25zdCBvbkNoYW5nZU5hbWUgPSB1c2VDYWxsYmFjayhcbiAgICAobm9kZSwgbmFtZSkgPT4ge1xuICAgICAgc2V0UmVuYW1pbmdOb2RlKHsgaWQ6IG5vZGUuaWQsIG5hbWUgfSlcbiAgICB9LFxuICAgIFtzZXRSZW5hbWluZ05vZGVdXG4gIClcblxuICAvKipcbiAgICogb25SZW5hbWVTdWJtaXQgY2FsbGJhY2sgZnVuY3Rpb24gdXNlZCB0byBoYW5kbGUgcmVuYW1lIGlucHV0IHN1Ym1pdC5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBjb25zdCBvblJlbmFtZVN1Ym1pdCA9IHVzZUNhbGxiYWNrKChub2RlLCBuYW1lKSA9PiB7XG4gICAgaWYgKG5hbWUgIT09IG51bGwpIHtcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmV4ZWN1dGVDb21tYW5kKEVkaXRvckNvbW1hbmRzLk1PRElGWV9QUk9QRVJUWSwgbm9kZS5vYmplY3QsIHsgcHJvcGVydGllczogeyBuYW1lIH0gfSlcbiAgICB9XG4gICAgc2V0UmVuYW1pbmdOb2RlKG51bGwpXG4gIH0sIFtdKVxuXG4gIC8qKlxuICAgKiBpbml0aWFsaXppbmcgdHJlZUNvbnRhaW5lckRyb3BUYXJnZXQuXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge0FycmF5fVxuICAgKi9cbiAgY29uc3QgWywgdHJlZUNvbnRhaW5lckRyb3BUYXJnZXRdID0gdXNlRHJvcCh7XG4gICAgLy8gaW5pdGlhbGl6aW5nIGFjY2VwdCB1c2luZyBhcnJheSBvZiAgdHlwZXNcbiAgICBhY2NlcHQ6IFtJdGVtVHlwZXMuTm9kZSwgSXRlbVR5cGVzLkZpbGUsIC4uLkFzc2V0VHlwZXNdLFxuICAgIGRyb3AoaXRlbTogYW55LCBtb25pdG9yKSB7XG4gICAgICBpZiAobW9uaXRvci5kaWREcm9wKCkpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIGNoZWNrIGlmIGl0ZW0gY29udGFpbnMgZmlsZXNcbiAgICAgIGlmIChpdGVtLmZpbGVzKSB7XG4gICAgICAgIC8vdXBsb2FkaW5nIGZpbGVzIHRoZW4gYWRkaW5nIHRvIGVkaXRvciBtZWRpYVxuICAgICAgICBvblVwbG9hZChpdGVtLmZpbGVzKS50aGVuKChhc3NldHMpID0+IHtcbiAgICAgICAgICBpZiAoYXNzZXRzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFzc2V0IG9mIGFzc2V0cykge1xuICAgICAgICAgICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRNZWRpYSh7IHVybDogYXNzZXQudXJsIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKGFkZEFzc2V0T25Ecm9wKGl0ZW0pKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5leGVjdXRlQ29tbWFuZFdpdGhIaXN0b3J5KEVkaXRvckNvbW1hbmRzLlJFUEFSRU5ULCBpdGVtLnZhbHVlLCB7XG4gICAgICAgIHBhcmVudHM6IFNjZW5lTWFuYWdlci5pbnN0YW5jZS5zY2VuZVxuICAgICAgfSlcbiAgICB9LFxuICAgIGNhbkRyb3AoaXRlbSwgbW9uaXRvcikge1xuICAgICAgaWYgKCFtb25pdG9yLmlzT3Zlcih7IHNoYWxsb3c6IHRydWUgfSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICAvLyBjaGVjayBpZiBpdGVtIGlzIGFzc2V0XG4gICAgICBpZiAoaXNBc3NldChpdGVtKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgLy8gY2hlY2sgaWYgaXRlbSBpcyBvZiBub2RlIHR5cGVcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09IEl0ZW1UeXBlcy5Ob2RlKSB7XG4gICAgICAgIHJldHVybiAhKGl0ZW0ubXVsdGlwbGVcbiAgICAgICAgICA/IGl0ZW0udmFsdWUuc29tZSgob3RoZXJPYmplY3QpID0+IGlzQW5jZXN0b3Iob3RoZXJPYmplY3QsIFNjZW5lTWFuYWdlci5pbnN0YW5jZS5zY2VuZSkpXG4gICAgICAgICAgOiBpc0FuY2VzdG9yKGl0ZW0udmFsdWUsIFNjZW5lTWFuYWdlci5pbnN0YW5jZS5zY2VuZSkpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9KVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdXBkYXRlTm9kZUhpZXJhcmNoeSgpXG4gIH0sIFtjb2xsYXBzZWROb2RlcywgdXBkYXRlTm9kZUhpZXJhcmNoeV0pXG5cbiAgLy9yZXR1cm5pbmcgaGllcmFyY2h5IHBlbmFsIHZpZXdcbiAgcmV0dXJuIChcbiAgICA8RnJhZ21lbnQ+XG4gICAgICA8UGFuZWxDb250YWluZXI+XG4gICAgICAgIHtTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmUgJiYgKFxuICAgICAgICAgIDxBdXRvU2l6ZXI+XG4gICAgICAgICAgICB7KHsgaGVpZ2h0LCB3aWR0aCB9KSA9PiAoXG4gICAgICAgICAgICAgIDxGaXhlZFNpemVMaXN0XG4gICAgICAgICAgICAgICAgaGVpZ2h0PXtoZWlnaHR9XG4gICAgICAgICAgICAgICAgd2lkdGg9e3dpZHRofVxuICAgICAgICAgICAgICAgIGl0ZW1TaXplPXszMn1cbiAgICAgICAgICAgICAgICBpdGVtQ291bnQ9e25vZGVzLmxlbmd0aH1cbiAgICAgICAgICAgICAgICBpdGVtRGF0YT17e1xuICAgICAgICAgICAgICAgICAgcmVuYW1pbmdOb2RlLFxuICAgICAgICAgICAgICAgICAgbm9kZXMsXG4gICAgICAgICAgICAgICAgICBvbktleURvd24sXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZU5hbWUsXG4gICAgICAgICAgICAgICAgICBvblJlbmFtZVN1Ym1pdCxcbiAgICAgICAgICAgICAgICAgIG9uTW91c2VEb3duLFxuICAgICAgICAgICAgICAgICAgb25DbGljayxcbiAgICAgICAgICAgICAgICAgIG9uVG9nZ2xlLFxuICAgICAgICAgICAgICAgICAgb25VcGxvYWRcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGl0ZW1LZXk9e2dldE5vZGVLZXl9XG4gICAgICAgICAgICAgICAgb3V0ZXJSZWY9e3RyZWVDb250YWluZXJEcm9wVGFyZ2V0fVxuICAgICAgICAgICAgICAgIGlubmVyRWxlbWVudFR5cGU9XCJ1bFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7TWVtb1RyZWVOb2RlfVxuICAgICAgICAgICAgICA8L0ZpeGVkU2l6ZUxpc3Q+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvQXV0b1NpemVyPlxuICAgICAgICApfVxuICAgICAgPC9QYW5lbENvbnRhaW5lcj5cbiAgICAgIDxDb250ZXh0TWVudSBpZD1cImhpZXJhcmNoeS1ub2RlLW1lbnVcIj5cbiAgICAgICAgPE1lbnVJdGVtIG9uQ2xpY2s9e29uUmVuYW1lTm9kZX0+e3QoJ2VkaXRvcjpoaWVyYXJjaHkubGJsLXJlbmFtZScpfTwvTWVudUl0ZW0+XG4gICAgICAgIDxNZW51SXRlbSBvbkNsaWNrPXtvbkR1cGxpY2F0ZU5vZGV9PlxuICAgICAgICAgIHt0KCdlZGl0b3I6aGllcmFyY2h5LmxibC1kdXBsaWNhdGUnKX1cbiAgICAgICAgICA8ZGl2PntjbWRPckN0cmxTdHJpbmcgKyAnKyBEJ308L2Rpdj5cbiAgICAgICAgPC9NZW51SXRlbT5cbiAgICAgICAgPE1lbnVJdGVtIG9uQ2xpY2s9e29uR3JvdXBOb2Rlc30+XG4gICAgICAgICAge3QoJ2VkaXRvcjpoaWVyYXJjaHkubGJsLWdyb3VwJyl9XG4gICAgICAgICAgPGRpdj57Y21kT3JDdHJsU3RyaW5nICsgJysgRyd9PC9kaXY+XG4gICAgICAgIDwvTWVudUl0ZW0+XG4gICAgICAgIDxNZW51SXRlbSBvbkNsaWNrPXtvbkRlbGV0ZU5vZGV9Pnt0KCdlZGl0b3I6aGllcmFyY2h5LmxibC1kZWxldGUnKX08L01lbnVJdGVtPlxuICAgICAgICA8TWVudUl0ZW0gb25DbGljaz17b25FeHBhbmRBbGxOb2Rlc30+e3QoJ2VkaXRvcjpoaWVyYXJjaHkubGJsLWV4cGFuZEFsbCcpfTwvTWVudUl0ZW0+XG4gICAgICAgIDxNZW51SXRlbSBvbkNsaWNrPXtvbkNvbGxhcHNlQWxsTm9kZXN9Pnt0KCdlZGl0b3I6aGllcmFyY2h5LmxibC1jb2xsYXBzZUFsbCcpfTwvTWVudUl0ZW0+XG4gICAgICA8L0NvbnRleHRNZW51PlxuICAgIDwvRnJhZ21lbnQ+XG4gIClcbn1cbiIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnXG5cbi8qKlxuICpcbiAqICBAYXV0aG9yIEhhbnpsYSAgTWF0ZWVuXG4gKi9cbmV4cG9ydCBjb25zdCBQYW5lbERyYWdDb250YWluZXIgPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4OiAxO1xuICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuYFxuXG4vKipcbiAqXG4gKiAgQGF1dGhvciBSb2JlcnQgTG9uZ1xuICovXG5leHBvcnQgY29uc3QgUGFuZWxDb250YWluZXIgPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXg6IDE7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogJHsocHJvcHMpID0+IHByb3BzLnRoZW1lLnBhbmVsfTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG5gXG4vKipcbiAqXG4gKiAgQGF1dGhvciBSb2JlcnQgTG9uZ1xuICovXG5leHBvcnQgY29uc3QgUGFuZWxUb29sYmFyID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgcGFkZGluZzogNHB4O1xuICBoZWlnaHQ6IDI0cHg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMik7XG5gXG5cbi8qKlxuICpcbiAqICBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbmV4cG9ydCBjb25zdCBQYW5lbEljb24gPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICBtYXJnaW4tcmlnaHQ6IDhweDtcbmBcblxuLyoqXG4gKlxuICogIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqL1xuZXhwb3J0IGNvbnN0IFBhbmVsVGl0bGUgPSAoc3R5bGVkIGFzIGFueSkuZGl2YGBcblxuLyoqXG4gKlxuICogIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqL1xuZXhwb3J0IGNvbnN0IFBhbmVsQ29udGVudCA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXg6IDE7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbmBcblxuLyoqXG4gKlxuICogIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqL1xuZXhwb3J0IGNsYXNzIFBhbmVsIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgaWNvbiwgdGl0bGUsIGNoaWxkcmVuLCB0b29sYmFyQ29udGVudCwgLi4ucmVzdCB9ID0gdGhpcy5wcm9wcyBhcyBhbnlcblxuICAgIHJldHVybiAoXG4gICAgICA8UGFuZWxDb250YWluZXIgey4uLnJlc3R9PlxuICAgICAgICA8UGFuZWxUb29sYmFyIGNsYXNzTmFtZT1cInRvb2xiYXJcIj5cbiAgICAgICAgICB7aWNvbiAmJiA8UGFuZWxJY29uIGFzPXtpY29ufSBzaXplPXsxMn0gLz59XG4gICAgICAgICAgPFBhbmVsVGl0bGU+e3RpdGxlfTwvUGFuZWxUaXRsZT5cbiAgICAgICAgICB7dG9vbGJhckNvbnRlbnR9XG4gICAgICAgIDwvUGFuZWxUb29sYmFyPlxuICAgICAgICA8UGFuZWxDb250ZW50PntjaGlsZHJlbn08L1BhbmVsQ29udGVudD5cbiAgICAgIDwvUGFuZWxDb250YWluZXI+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBhbmVsXG4iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgUHJvcGVydHlHcm91cCBmcm9tICcuL1Byb3BlcnR5R3JvdXAnXG5pbXBvcnQgSW5wdXRHcm91cCBmcm9tICcuLi9pbnB1dHMvSW5wdXRHcm91cCdcbmltcG9ydCBWZWN0b3IzSW5wdXQgZnJvbSAnLi4vaW5wdXRzL1ZlY3RvcjNJbnB1dCdcbmltcG9ydCBFdWxlcklucHV0IGZyb20gJy4uL2lucHV0cy9FdWxlcklucHV0J1xuaW1wb3J0IGkxOG4gZnJvbSAnaTE4bmV4dCdcbmltcG9ydCB7IHdpdGhUcmFuc2xhdGlvbiB9IGZyb20gJ3JlYWN0LWkxOG5leHQnXG5pbXBvcnQgeyBDb21tYW5kTWFuYWdlciB9IGZyb20gJy4uLy4uL21hbmFnZXJzL0NvbW1hbmRNYW5hZ2VyJ1xuaW1wb3J0IEVkaXRvckNvbW1hbmRzIGZyb20gJy4uLy4uL2NvbnN0YW50cy9FZGl0b3JDb21tYW5kcydcbmltcG9ydCBFZGl0b3JFdmVudHMgZnJvbSAnLi4vLi4vY29uc3RhbnRzL0VkaXRvckV2ZW50cydcblxuLyoqXG4gKiBUcmFuc2Zvcm1Qcm9wZXJ0eUdyb3VwUHJvcHMgZGVjbGFyaW5nIHByb3BlcnRpZXMgZm9yIFRyYW5zZm9ybVByb3BlcnR5R3JvdXAuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge09iamVjdH1cbiAqL1xudHlwZSBUcmFuc2Zvcm1Qcm9wZXJ0eUdyb3VwUHJvcHMgPSB7XG4gIG5vZGU/OiBvYmplY3RcbiAgdDogRnVuY3Rpb25cbn1cblxuLyoqXG4gKiBUcmFuc2Zvcm1Qcm9wZXJ0eUdyb3VwIGNvbXBvbmVudCBpcyB1c2VkIHRvIHJlbmRlciBlZGl0b3IgdmlldyB0byBjdXN0b21pemUgcHJvcGVydGllcy5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7Y2xhc3MgY29tcG9uZW50fVxuICovXG5leHBvcnQgY2xhc3MgVHJhbnNmb3JtUHJvcGVydHlHcm91cCBleHRlbmRzIENvbXBvbmVudDxUcmFuc2Zvcm1Qcm9wZXJ0eUdyb3VwUHJvcHMsIHt9PiB7XG4gIC8vc2V0dGluZyB0aGUgcHJvcGVydGllcyBhbmQgdHJhbnNsYXRpb24gb2YgY29tcG9uZW50XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBhbnkpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICB0aGlzLnRyYW5zbGF0aW9uID0gbmV3IFZlY3RvcjMoKVxuICB9XG5cbiAgLy9hZGRpbmcgbGlzdGVuZXIgd2hlbiBjb21wb25lbnQgZ2V0IG1vdW50ZWRcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLk9CSkVDVFNfQ0hBTkdFRC50b1N0cmluZygpLCB0aGlzLm9uT2JqZWN0c0NoYW5nZWQpXG4gIH1cblxuICAvL3VwZGF0aW5nIGNoYW5nZXMgaW4gcHJvcGVydGllc1xuICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzKSB7XG4gICAgcmV0dXJuIG5leHRQcm9wcy5ub2RlICE9PSB0aGlzLnByb3BzLm5vZGVcbiAgfVxuXG4gIC8vcmVtb3ZpbmcgbGlzdGVuZXIgd2hlbiBjb21wb25lbnQgZ2V0IHVubW91bnRcbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoRWRpdG9yRXZlbnRzLk9CSkVDVFNfQ0hBTkdFRC50b1N0cmluZygpLCB0aGlzLm9uT2JqZWN0c0NoYW5nZWQpXG4gIH1cblxuICAvL3NldHRpbmcgdHJhbnNsYXRpb25cbiAgdHJhbnNsYXRpb246IFZlY3RvcjNcblxuICAvL2Z1bmN0aW9uIHRvIGhhbmRsZSBjaGFuZ2VzIGluIHByb3BlcnR5IGFuZCBmb3JjZSB1cGRhdGVcbiAgb25PYmplY3RzQ2hhbmdlZCA9IChvYmplY3RzLCBwcm9wZXJ0eSkgPT4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JqZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKFxuICAgICAgICBvYmplY3RzW2ldID09PSB0aGlzLnByb3BzLm5vZGUgJiZcbiAgICAgICAgKHByb3BlcnR5ID09PSAncG9zaXRpb24nIHx8XG4gICAgICAgICAgcHJvcGVydHkgPT09ICdyb3RhdGlvbicgfHxcbiAgICAgICAgICBwcm9wZXJ0eSA9PT0gJ3NjYWxlJyB8fFxuICAgICAgICAgIHByb3BlcnR5ID09PSAnbWF0cml4JyB8fFxuICAgICAgICAgIHByb3BlcnR5ID09IG51bGwpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vZnVuY3Rpb24gdG8gaGFuZGxlIHRoZSBwb3NpdGlvbiBwcm9wZXJ0aWVzXG4gIG9uQ2hhbmdlUG9zaXRpb24gPSAodmFsdWUpID0+IHtcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5leGVjdXRlQ29tbWFuZFdpdGhIaXN0b3J5T25TZWxlY3Rpb24oRWRpdG9yQ29tbWFuZHMuUE9TSVRJT04sIHsgcG9zaXRpb25zOiB2YWx1ZSB9KVxuICB9XG5cbiAgLy9mdW5jdGlvbiB0byBoYW5kbGUgY2hhbmdlcyByb3RhdGlvbiBwcm9wZXJ0aWVzXG4gIG9uQ2hhbmdlUm90YXRpb24gPSAodmFsdWUpID0+IHtcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5leGVjdXRlQ29tbWFuZFdpdGhIaXN0b3J5T25TZWxlY3Rpb24oRWRpdG9yQ29tbWFuZHMuUk9UQVRJT04sIHsgcm90YXRpb25zOiB2YWx1ZSB9KVxuICB9XG5cbiAgLy9mdW5jdGlvbiB0byBoYW5kbGUgY2hhbmdlcyBpbiBzY2FsZSBwcm9wZXJ0aWVzXG4gIG9uQ2hhbmdlU2NhbGUgPSAodmFsdWUpID0+IHtcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5leGVjdXRlQ29tbWFuZFdpdGhIaXN0b3J5T25TZWxlY3Rpb24oRWRpdG9yQ29tbWFuZHMuU0NBTEUsIHtcbiAgICAgIHNjYWxlczogdmFsdWUsXG4gICAgICBvdmVycmlkZVNjYWxlOiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIC8vcmVuZGVyaW5nIGVkaXRvciB2aWV3IGZvciBUcmFuc2Zvcm0gcHJvcGVydGllc1xuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBub2RlIH0gPSB0aGlzLnByb3BzIGFzIGFueVxuICAgIHJldHVybiAoXG4gICAgICA8UHJvcGVydHlHcm91cCBuYW1lPXt0aGlzLnByb3BzLnQoJ2VkaXRvcjpwcm9wZXJ0aWVzLnRyYW5zZm9ybS50aXRsZScpfT5cbiAgICAgICAgPElucHV0R3JvdXAgbmFtZT1cIlBvc2l0aW9uXCIgbGFiZWw9e3RoaXMucHJvcHMudCgnZWRpdG9yOnByb3BlcnRpZXMudHJhbnNmb3JtLmxibC1wb3N0aXRpb24nKX0+XG4gICAgICAgICAgPFZlY3RvcjNJbnB1dFxuICAgICAgICAgICAgdmFsdWU9e25vZGUucG9zaXRpb259XG4gICAgICAgICAgICBzbWFsbFN0ZXA9ezAuMDF9XG4gICAgICAgICAgICBtZWRpdW1TdGVwPXswLjF9XG4gICAgICAgICAgICBsYXJnZVN0ZXA9ezF9XG4gICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZVBvc2l0aW9ufVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvSW5wdXRHcm91cD5cbiAgICAgICAgPElucHV0R3JvdXAgbmFtZT1cIlJvdGF0aW9uXCIgbGFiZWw9e3RoaXMucHJvcHMudCgnZWRpdG9yOnByb3BlcnRpZXMudHJhbnNmb3JtLmxibC1yb3RhdGlvbicpfT5cbiAgICAgICAgICA8RXVsZXJJbnB1dCB2YWx1ZT17bm9kZS5yb3RhdGlvbn0gb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VSb3RhdGlvbn0gdW5pdD1cIsKwXCIgLz5cbiAgICAgICAgPC9JbnB1dEdyb3VwPlxuICAgICAgICA8SW5wdXRHcm91cCBuYW1lPVwiU2NhbGVcIiBsYWJlbD17dGhpcy5wcm9wcy50KCdlZGl0b3I6cHJvcGVydGllcy50cmFuc2Zvcm0ubGJsLXNjYWxlJyl9PlxuICAgICAgICAgIDxWZWN0b3IzSW5wdXRcbiAgICAgICAgICAgIHVuaWZvcm1TY2FsaW5nXG4gICAgICAgICAgICBzbWFsbFN0ZXA9ezAuMDF9XG4gICAgICAgICAgICBtZWRpdW1TdGVwPXswLjF9XG4gICAgICAgICAgICBsYXJnZVN0ZXA9ezF9XG4gICAgICAgICAgICB2YWx1ZT17bm9kZS5zY2FsZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlU2NhbGV9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9JbnB1dEdyb3VwPlxuICAgICAgPC9Qcm9wZXJ0eUdyb3VwPlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoVHJhbnNsYXRpb24oKShUcmFuc2Zvcm1Qcm9wZXJ0eUdyb3VwKVxuIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IElucHV0R3JvdXAgZnJvbSAnLi4vaW5wdXRzL0lucHV0R3JvdXAnXG5pbXBvcnQgU3RyaW5nSW5wdXQgZnJvbSAnLi4vaW5wdXRzL1N0cmluZ0lucHV0J1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cydcbmltcG9ydCB7IHdpdGhUcmFuc2xhdGlvbiB9IGZyb20gJ3JlYWN0LWkxOG5leHQnXG5pbXBvcnQgeyBDb21tYW5kTWFuYWdlciB9IGZyb20gJy4uLy4uL21hbmFnZXJzL0NvbW1hbmRNYW5hZ2VyJ1xuXG4vKipcbiAqIENyZWF0aW5nIHN0eWxlZCBjb21wb25lbnQgdXNpbmcgSW5wdXRHcm91cCBjb21wb25lbnQuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBDb21wb25lbnR9XG4gKi9cbmNvbnN0IFN0eWxlZE5hbWVJbnB1dEdyb3VwID0gKHN0eWxlZCBhcyBhbnkpKElucHV0R3JvdXApYFxuICBsYWJlbCB7XG4gICAgd2lkdGg6IGF1dG8gIWltcG9ydGFudDtcbiAgICBwYWRkaW5nLXJpZ2h0OiA4cHg7XG4gIH1cbmBcblxudHlwZSBUeXBlcyA9IHtcbiAgbm9kZTogYW55XG4gIHQ6IEZ1bmN0aW9uXG59XG5cbi8qKlxuICogTmFtZUlucHV0R3JvdXAgaXMgdXNlZCB0byByZW5kZXIgaW5wdXQgZ3JvdXAgUHJvcGVydGllc1BhbmVsQ29udGFpbmVyLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtjbGFzcyBjb21wb25lbnR9XG4gKi9cbmV4cG9ydCBjbGFzcyBOYW1lSW5wdXRHcm91cCBleHRlbmRzIENvbXBvbmVudDxUeXBlcz4ge1xuICAvLyB1cGRhdGluZyBzdGF0ZSBhbmQgcHJvcGVydGllc1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG5hbWU6ICgodGhpcy5wcm9wcyBhcyBhbnkpLm5vZGUgYXMgYW55KS5uYW1lLFxuICAgICAgZm9jdXNlZE5vZGU6IG51bGxcbiAgICB9XG5cbiAgICB0aGlzLnQgPSB0aGlzLnByb3BzLnRcbiAgfVxuXG4gIHQ6IEZ1bmN0aW9uXG5cbiAgLy9mdW5jdGlvbiB0byBoYW5kbGUgY2hhbmdlIGluIG5hbWUgcHJvcGVydHlcbiAgb25VcGRhdGVOYW1lID0gKG5hbWUpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgbmFtZSB9KVxuICB9XG5cbiAgLy9mdW5jdGlvbiBjYWxsZWQgd2hlbiBlbGVtZW50IGdldCBmb2N1c2VkXG4gIC8vVXBkYXRpbmcgc3RhdGUgb2YgY29tcG9uZW50XG4gIG9uRm9jdXMgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBmb2N1c2VkTm9kZTogKHRoaXMucHJvcHMgYXMgYW55KS5ub2RlLFxuICAgICAgbmFtZTogKCh0aGlzLnByb3BzIGFzIGFueSkubm9kZSBhcyBhbnkpLm5hbWVcbiAgICB9KVxuICB9XG5cbiAgLy9mdW5jdGlvbiB0byBoYW5kbGUgb25CbHVyIGV2ZW50IG9uIG5hbWUgcHJvcGVydHlcbiAgb25CbHVyTmFtZSA9ICgpID0+IHtcbiAgICAvLyBDaGVjayB0aGF0IHRoZSBmb2N1c2VkIG5vZGUgaXMgY3VycmVudCBub2RlIGJlZm9yZSBzZXR0aW5nIHRoZSBwcm9wZXJ0eS5cbiAgICAvLyBUaGlzIGNhbiBoYXBwZW4gd2hlbiBjbGlja2luZyBvbiBhbm90aGVyIG5vZGUgaW4gdGhlIEhpZXJhcmNoeVBhbmVsXG4gICAgaWYgKFxuICAgICAgKCh0aGlzLnByb3BzIGFzIGFueSkubm9kZSBhcyBhbnkpLm5hbWUgIT09ICh0aGlzLnN0YXRlIGFzIGFueSkubmFtZSAmJlxuICAgICAgKHRoaXMucHJvcHMgYXMgYW55KS5ub2RlID09PSAodGhpcy5zdGF0ZSBhcyBhbnkpLmZvY3VzZWROb2RlXG4gICAgKSB7XG4gICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5zZXRQcm9wZXJ0eU9uU2VsZWN0aW9uKCduYW1lJywgKHRoaXMuc3RhdGUgYXMgYW55KS5uYW1lKVxuICAgIH1cblxuICAgIHRoaXMuc2V0U3RhdGUoeyBmb2N1c2VkTm9kZTogbnVsbCB9KVxuICB9XG5cbiAgLy9mdW5jdGlvbiB0byBoYW5kbGUga2V5VXAgZXZlbnQgb24gbmFtZSBwcm9wZXJ0eVxuICBvbktleVVwTmFtZSA9IChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnNldFByb3BlcnR5T25TZWxlY3Rpb24oJ25hbWUnLCAodGhpcy5zdGF0ZSBhcyBhbnkpLm5hbWUpXG4gICAgfVxuICB9XG5cbiAgLy9yZW5kZXJpbmcgdmlldyBOYW1lSW5wdXRHcm91cCBjb21wb25lbnRcbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IG5hbWUgPSAodGhpcy5zdGF0ZSBhcyBhbnkpLmZvY3VzZWROb2RlID8gKHRoaXMuc3RhdGUgYXMgYW55KS5uYW1lIDogKCh0aGlzLnByb3BzIGFzIGFueSkubm9kZSBhcyBhbnkpLm5hbWVcbiAgICByZXR1cm4gKFxuICAgICAgPFN0eWxlZE5hbWVJbnB1dEdyb3VwIG5hbWU9XCJOYW1lXCIgbGFiZWw9e3RoaXMudCgnZWRpdG9yOnByb3BlcnRpZXMubmFtZS5sYmwtbmFtZScpfT5cbiAgICAgICAgPFN0cmluZ0lucHV0XG4gICAgICAgICAgdmFsdWU9e25hbWV9XG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25VcGRhdGVOYW1lfVxuICAgICAgICAgIG9uRm9jdXM9e3RoaXMub25Gb2N1c31cbiAgICAgICAgICBvbkJsdXI9e3RoaXMub25CbHVyTmFtZX1cbiAgICAgICAgICBvbktleVVwPXt0aGlzLm9uS2V5VXBOYW1lfVxuICAgICAgICAvPlxuICAgICAgPC9TdHlsZWROYW1lSW5wdXRHcm91cD5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgd2l0aFRyYW5zbGF0aW9uKCkoTmFtZUlucHV0R3JvdXApXG4iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgRGVmYXVsdE5vZGVFZGl0b3IgZnJvbSAnLi9EZWZhdWx0Tm9kZUVkaXRvcidcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnXG5pbXBvcnQgVHJhbnNmb3JtUHJvcGVydHlHcm91cCBmcm9tICcuL1RyYW5zZm9ybVByb3BlcnR5R3JvdXAnXG5pbXBvcnQgTmFtZUlucHV0R3JvdXAgZnJvbSAnLi9OYW1lSW5wdXRHcm91cCdcbmltcG9ydCBJbnB1dEdyb3VwIGZyb20gJy4uL2lucHV0cy9JbnB1dEdyb3VwJ1xuaW1wb3J0IEJvb2xlYW5JbnB1dCBmcm9tICcuLi9pbnB1dHMvQm9vbGVhbklucHV0J1xuaW1wb3J0IHsgd2l0aFRyYW5zbGF0aW9uIH0gZnJvbSAncmVhY3QtaTE4bmV4dCdcbmltcG9ydCBFZGl0b3JFdmVudHMgZnJvbSAnLi4vLi4vY29uc3RhbnRzL0VkaXRvckV2ZW50cydcbmltcG9ydCB7IENvbW1hbmRNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vbWFuYWdlcnMvQ29tbWFuZE1hbmFnZXInXG5pbXBvcnQgeyBOb2RlTWFuYWdlciB9IGZyb20gJy4uLy4uL21hbmFnZXJzL05vZGVNYW5hZ2VyJ1xuXG4vKipcbiAqIFN0eWxlZE5vZGVFZGl0b3IgdXNlZCBhcyB3cmFwcGVyIGNvbnRhaW5lciBlbGVtZW50IHByb3BlcnRpZXMgY29udGFpbmVyLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtzdHlsZWQgY29tcG9uZW50fVxuICovXG5jb25zdCBTdHlsZWROb2RlRWRpdG9yID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleDogMTtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbmBcblxuLyoqXG4gKiBQcm9wZXJ0aWVzSGVhZGVyIHVzZWQgYXMgYSB3cmFwcGVyIGZvciBOYW1lSW5wdXRHcm91cENvbnRhaW5lciBjb21wb25lbnQuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICovXG5jb25zdCBQcm9wZXJ0aWVzSGVhZGVyID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgYmFja2dyb3VuZC1jb2xvcjogJHsocHJvcHMpID0+IHByb3BzLnRoZW1lLnBhbmVsMn07XG4gIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50O1xuICBwYWRkaW5nLWJvdHRvbTogMCAhaW1wb3J0YW50O1xuYFxuXG4vKipcbiAqIE5hbWVJbnB1dEdyb3VwQ29udGFpbmVyIHVzZWQgdG8gcHJvdmlkZXMgc3R5bGVzIGFuZCBjb250YWlucyBOYW1lSW5wdXRHcm91cCBhbmQgVmlzaWJsZUlucHV0R3JvdXAuXG4gKlxuICogIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqICBAdHlwZSB7U3R5bGVkIENvbXBvbmVudH1cbiAqL1xuY29uc3QgTmFtZUlucHV0R3JvdXBDb250YWluZXIgPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWZsb3c6IHJvdyB3cmFwO1xuICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgcGFkZGluZzogOHB4IDA7XG5gXG4vKipcbiAqIFN0eWxlZCBjb21wb25lbnQgdXNlZCB0byBwcm92aWRlIHN0eWxlcyBmb3IgdmlzaWJsaXR5IGNoZWNrYm94LlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqL1xuY29uc3QgVmlzaWJsZUlucHV0R3JvdXAgPSAoc3R5bGVkIGFzIGFueSkoSW5wdXRHcm91cClgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXg6IDA7XG5cbiAgJiA+IGxhYmVsIHtcbiAgICB3aWR0aDogYXV0byAhaW1wb3J0YW50O1xuICAgIHBhZGRpbmctcmlnaHQ6IDhweDtcbiAgfVxuYFxuXG4vKipcbiAqIFN0eWxlZCBjb21wb25lbnQgdXNlZCB0byBwcm92aWRlIHN0eWxlcyBmb3IgdmlzaWJsaXR5IGNoZWNrYm94LlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqL1xuY29uc3QgUGVyc2lzdElucHV0R3JvdXAgPSAoc3R5bGVkIGFzIGFueSkoSW5wdXRHcm91cClgXG4gZGlzcGxheTogZmxleDtcbiBmbGV4OiAwO1xuXG4gJiA+IGxhYmVsIHtcbiAgIHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7XG4gICBwYWRkaW5nLXJpZ2h0OiA4cHg7XG4gfVxuYFxuXG4vKipcbiAqIFByb3BlcnRpZXNQYW5lbENvbnRlbnQgdXNlZCBhcyBjb250YWluZXIgZWxlbWVudCBjb250YWlucyBjb250ZW50IG9mIGVkaXRvciB2aWV3LlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtTdHlsZWQgQ29tcG9uZW50fVxuICovXG5jb25zdCBQcm9wZXJ0aWVzUGFuZWxDb250ZW50ID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgZmxleDogMTtcbiAgb3ZlcmZsb3cteTogYXV0bztcbiAgaGVpZ2h0OiAxMDAlO1xuYFxuXG4vKipcbiAqIE5vTm9kZVNlbGVjdGVkTWVzc2FnZSB1c2VkIHRvIHNob3cgdGhlIG1lc3NhZ2Ugd2hlbiBubyBzZWxlY3RlZCBubyBpcyB0aGVyZS5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7U3R5bGVkIGNvbXBvbmVudH1cbiAqL1xuY29uc3QgTm9Ob2RlU2VsZWN0ZWRNZXNzYWdlID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGhlaWdodDogMTAwJTtcbmBcblxuLyoqXG4gKiBQcm9wZXJ0aWVzUGFuZWxDb250YWluZXIgdXNlZCB0byByZW5kZXIgZWRpdG9yIHZpZXcgdG8gY3VzdG9taXplIHByb3BlcnR5IG9mIHNlbGVjdGVkIGVsZW1lbnQuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQGV4dGVuZHMgQ29tcG9uZW50XG4gKi9cbmNsYXNzIFByb3BlcnRpZXNQYW5lbENvbnRhaW5lciBleHRlbmRzIENvbXBvbmVudDx7IHQ6IEZ1bmN0aW9uIH0+IHtcbiAgLy9zZXR0aW5nIHRoZSBwcm9wcyBhbmQgc3RhdGVcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzZWxlY3RlZDogQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2VsZWN0ZWRcbiAgICB9XG4gIH1cblxuICAvLyBhZGRpbmcgbGlzdGVuZXJzIHdoZW4gY29tcG9uZW50IGdldCBtb3VudGVkXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmFkZExpc3RlbmVyKEVkaXRvckV2ZW50cy5TRUxFQ1RJT05fQ0hBTkdFRC50b1N0cmluZygpLCB0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlZClcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuT0JKRUNUU19DSEFOR0VELnRvU3RyaW5nKCksIHRoaXMub25PYmplY3RzQ2hhbmdlZClcbiAgfVxuXG4gIC8vIHJlbW92aW5nIGxpc3RlbmVycyB3aGVuIGNvbXBvbmVudHMgZ2V0IHVubW91bnRlZFxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihFZGl0b3JFdmVudHMuU0VMRUNUSU9OX0NIQU5HRUQudG9TdHJpbmcoKSwgdGhpcy5vblNlbGVjdGlvbkNoYW5nZWQpXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoRWRpdG9yRXZlbnRzLk9CSkVDVFNfQ0hBTkdFRC50b1N0cmluZygpLCB0aGlzLm9uT2JqZWN0c0NoYW5nZWQpXG4gIH1cblxuICAvLyB1cGRhdGluZyBzdGF0ZSB3aGVuIHNlbGVjdGlvbiBvZiBlbGVtZW50IGdldCBjaGFuZ2VkXG4gIG9uU2VsZWN0aW9uQ2hhbmdlZCA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgc2VsZWN0ZWQ6IENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnNlbGVjdGVkIH0pXG4gIH1cblxuICAvL2Z1bmN0aW9uIHRvIGhhbmRsZSB0aGUgY2hhbmdlcyBvYmplY3QgcHJvcGVydGllc1xuICBvbk9iamVjdHNDaGFuZ2VkID0gKG9iamVjdHMsIHByb3BlcnR5KSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0ZWQgPSBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5zZWxlY3RlZFxuXG4gICAgaWYgKHByb3BlcnR5ID09PSAncG9zaXRpb24nIHx8IHByb3BlcnR5ID09PSAncm90YXRpb24nIHx8IHByb3BlcnR5ID09PSAnc2NhbGUnIHx8IHByb3BlcnR5ID09PSAnbWF0cml4Jykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvYmplY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoc2VsZWN0ZWQuaW5kZXhPZihvYmplY3RzW2ldKSAhPT0gLTEpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNlbGVjdGVkOiBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5zZWxlY3RlZCB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBmdW5jdGlvbiB0byBoYW5kbGUgdGhlIGNoYW5nZXMgcHJvcGVydHkgdmlzaWJsZVxuICBvbkNoYW5nZVZpc2libGUgPSAodmFsdWUpID0+IHtcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5zZXRQcm9wZXJ0eU9uU2VsZWN0aW9uKCd2aXNpYmxlJywgdmFsdWUpXG4gIH1cblxuICBvbkNoYW5nZUJha2VTdGF0aWMgPSAodmFsdWUpID0+IHtcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5zZXRQcm9wZXJ0eU9uU2VsZWN0aW9uKCdpbmNsdWRlSW5DdWJlbWFwQmFrZScsIHZhbHVlKVxuICB9XG5cbiAgb25DaGFuZ2VQZXJzaXN0ID0gKHZhbHVlKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2V0UHJvcGVydHlPblNlbGVjdGlvbigncGVyc2lzdCcsIHZhbHVlKVxuICB9XG5cbiAgLy9yZW5kZXJpbmcgZWRpdG9yIHZpZXdzIGZvciBjdXN0b21pemF0aW9uIG9mIGVsZW1lbnQgcHJvcGVydGllc1xuICByZW5kZXIoKSB7XG4gICAgY29uc3Qgc2VsZWN0ZWQgPSBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5zZWxlY3RlZFxuXG4gICAgbGV0IGNvbnRlbnRcblxuICAgIGlmIChzZWxlY3RlZC5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnRlbnQgPSA8Tm9Ob2RlU2VsZWN0ZWRNZXNzYWdlPnt0aGlzLnByb3BzLnQoJ2VkaXRvcjpwcm9wZXJ0aWVzLm5vTm9kZVNlbGVjdGVkJyl9PC9Ob05vZGVTZWxlY3RlZE1lc3NhZ2U+XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGFjdGl2ZU5vZGUgPSBzZWxlY3RlZFtzZWxlY3RlZC5sZW5ndGggLSAxXVxuICAgICAgY29uc3QgTm9kZUVkaXRvciA9IE5vZGVNYW5hZ2VyLmluc3RhbmNlLmdldEVkaXRvckZyb21Ob2RlKGFjdGl2ZU5vZGUpIHx8IERlZmF1bHROb2RlRWRpdG9yXG5cbiAgICAgIGNvbnN0IG11bHRpRWRpdCA9IHNlbGVjdGVkLmxlbmd0aCA+IDFcblxuICAgICAgbGV0IHNob3dOb2RlRWRpdG9yID0gdHJ1ZVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdGVkLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICBpZiAoTm9kZU1hbmFnZXIuaW5zdGFuY2UuZ2V0RWRpdG9yRnJvbU5vZGUoc2VsZWN0ZWRbaV0pICE9PSBOb2RlRWRpdG9yKSB7XG4gICAgICAgICAgc2hvd05vZGVFZGl0b3IgPSBmYWxzZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGV0IG5vZGVFZGl0b3JcblxuICAgICAgaWYgKHNob3dOb2RlRWRpdG9yKSB7XG4gICAgICAgIG5vZGVFZGl0b3IgPSA8Tm9kZUVkaXRvciBtdWx0aUVkaXQ9e211bHRpRWRpdH0gbm9kZT17YWN0aXZlTm9kZX0gLz5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGVFZGl0b3IgPSAoXG4gICAgICAgICAgPE5vTm9kZVNlbGVjdGVkTWVzc2FnZT57dGhpcy5wcm9wcy50KCdlZGl0b3I6cHJvcGVydGllcy5tdWx0aXBsZU5vZGVTZWxlY3RlZCcpfTwvTm9Ob2RlU2VsZWN0ZWRNZXNzYWdlPlxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRpc2FibGVUcmFuc2Zvcm0gPSBzZWxlY3RlZC5zb21lKChub2RlKSA9PiBub2RlLmRpc2FibGVUcmFuc2Zvcm0pXG4gICAgICBjb25zdCBoYXZlU3RhdGljVGFncyA9IHNlbGVjdGVkLnNvbWUoKG5vZGUpID0+IG5vZGUuaGF2ZVN0YXRpY1RhZ3MpXG5cbiAgICAgIGNvbnRlbnQgPSAoXG4gICAgICAgIDxTdHlsZWROb2RlRWRpdG9yPlxuICAgICAgICAgIDxQcm9wZXJ0aWVzSGVhZGVyPlxuICAgICAgICAgICAgPE5hbWVJbnB1dEdyb3VwQ29udGFpbmVyPlxuICAgICAgICAgICAgICA8TmFtZUlucHV0R3JvdXAgbm9kZT17YWN0aXZlTm9kZX0gLz5cbiAgICAgICAgICAgICAge2FjdGl2ZU5vZGUubm9kZU5hbWUgIT09ICdTY2VuZScgJiYgKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICA8VmlzaWJsZUlucHV0R3JvdXAgbmFtZT1cIlZpc2libGVcIiBsYWJlbD17dGhpcy5wcm9wcy50KCdlZGl0b3I6cHJvcGVydGllcy5sYmwtdmlzaWJsZScpfT5cbiAgICAgICAgICAgICAgICAgICAgPEJvb2xlYW5JbnB1dCB2YWx1ZT17YWN0aXZlTm9kZS52aXNpYmxlfSBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZVZpc2libGV9IC8+XG4gICAgICAgICAgICAgICAgICA8L1Zpc2libGVJbnB1dEdyb3VwPlxuICAgICAgICAgICAgICAgICAge2hhdmVTdGF0aWNUYWdzICYmIChcbiAgICAgICAgICAgICAgICAgICAgPFZpc2libGVJbnB1dEdyb3VwIG5hbWU9XCJCYWtlIFN0YXRpY1wiIGxhYmVsPVwiQmFrZSBTdGF0aWNcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8Qm9vbGVhbklucHV0IHZhbHVlPXthY3RpdmVOb2RlLmluY2x1ZGVJbkN1YmVtYXBCYWtlfSBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZUJha2VTdGF0aWN9IC8+XG4gICAgICAgICAgICAgICAgICAgIDwvVmlzaWJsZUlucHV0R3JvdXA+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9OYW1lSW5wdXRHcm91cENvbnRhaW5lcj5cbiAgICAgICAgICAgIDxQZXJzaXN0SW5wdXRHcm91cCBuYW1lPVwiUGVyc2lzdFwiIGxhYmVsPXt0aGlzLnByb3BzLnQoJ2VkaXRvcjpwcm9wZXJ0aWVzLmxibC1wZXJzaXN0Jyl9PlxuICAgICAgICAgICAgICA8Qm9vbGVhbklucHV0IHZhbHVlPXthY3RpdmVOb2RlLnBlcnNpc3R9IG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlUGVyc2lzdH0gLz5cbiAgICAgICAgICAgIDwvUGVyc2lzdElucHV0R3JvdXA+XG4gICAgICAgICAgICB7IWRpc2FibGVUcmFuc2Zvcm0gJiYgPFRyYW5zZm9ybVByb3BlcnR5R3JvdXAgbm9kZT17YWN0aXZlTm9kZX0gLz59XG4gICAgICAgICAgPC9Qcm9wZXJ0aWVzSGVhZGVyPlxuICAgICAgICAgIHtub2RlRWRpdG9yfVxuICAgICAgICA8L1N0eWxlZE5vZGVFZGl0b3I+XG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIDxQcm9wZXJ0aWVzUGFuZWxDb250ZW50Pntjb250ZW50fTwvUHJvcGVydGllc1BhbmVsQ29udGVudD5cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoVHJhbnNsYXRpb24oKShQcm9wZXJ0aWVzUGFuZWxDb250YWluZXIpXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJ1xuaW1wb3J0IHsgSW5mb1Rvb2x0aXAgfSBmcm9tICcuLi9sYXlvdXQvVG9vbHRpcCdcblxuLyoqXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICovXG5jb25zdCBTdHlsZWRUb29sQnV0dG9uID0gKHN0eWxlZCBhcyBhbnkpLmJ1dHRvbmBcbiAgd2lkdGg6IDQwcHg7XG4gIGhlaWdodDogNDBweDtcbiAgYm9yZGVyOiBub25lO1xuICBjb2xvcjogJHsocHJvcHMpID0+IHByb3BzLnRoZW1lLndoaXRlfTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG5cbiAgYmFja2dyb3VuZC1jb2xvcjogJHsocHJvcHMpID0+IChwcm9wcy5pc1NlbGVjdGVkID8gcHJvcHMudGhlbWUuYmx1ZSA6IHByb3BzLnRoZW1lLnRvb2xiYXIpfTtcblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkeyhwcm9wcykgPT4gKHByb3BzLmlzU2VsZWN0ZWQgPyBwcm9wcy50aGVtZS5ibHVlSG92ZXIgOiBwcm9wcy50aGVtZS5wYW5lbCl9O1xuICB9XG5gXG5cbi8qKlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqL1xuY29uc3QgSWNvbiA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIHdpZHRoOiAxNHB4O1xuICBoZWlnaHQ6IDE0cHg7XG4gIGZvbnQtc2l6ZTogMTRweDtcbmBcblxuaW50ZXJmYWNlIFRvb2xCdXR0b25Qcm9wIHtcbiAgaWQ6IHN0cmluZyB8IG51bWJlclxuICBpY29uPzogYW55XG4gIG9uQ2xpY2s6IEZ1bmN0aW9uXG4gIGlzU2VsZWN0ZWQ/OiBib29sZWFuXG4gIHRvb2x0aXA/OiBzdHJpbmdcbn1cblxuLyoqXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHBhcmFtIHthbnl9IGlkXG4gKiBAcGFyYW0ge2FueX0gaWNvblxuICogQHBhcmFtIHthbnl9IG9uQ2xpY2tcbiAqIEBwYXJhbSB7YW55fSBpc1NlbGVjdGVkXG4gKiBAcGFyYW0ge2FueX0gdG9vbHRpcFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFRvb2xCdXR0b24oeyBpZCwgaWNvbiwgb25DbGljaywgaXNTZWxlY3RlZCwgdG9vbHRpcCB9OiBUb29sQnV0dG9uUHJvcCkge1xuICByZXR1cm4gKFxuICAgIDxJbmZvVG9vbHRpcCBpZD17aWR9IGluZm89e3Rvb2x0aXB9IHBvc2l0aW9uPVwiYm90dG9tXCI+XG4gICAgICA8U3R5bGVkVG9vbEJ1dHRvbiBpc1NlbGVjdGVkPXtpc1NlbGVjdGVkfSBvbkNsaWNrPXtvbkNsaWNrfT5cbiAgICAgICAgPEljb24gYXM9e2ljb259IC8+XG4gICAgICA8L1N0eWxlZFRvb2xCdXR0b24+XG4gICAgPC9JbmZvVG9vbHRpcD5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBUb29sQnV0dG9uXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBCYXJzIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9CYXJzJ1xuaW1wb3J0IFRvb2xCdXR0b24gZnJvbSAnLi4vdG9vbGJhci9Ub29sQnV0dG9uJ1xuaW1wb3J0IHsgQ29udGV4dE1lbnUsIE1lbnVJdGVtLCBTdWJNZW51LCBzaG93TWVudSB9IGZyb20gJy4uL2xheW91dC9Db250ZXh0TWVudSdcbmltcG9ydCB7IHdpdGhUcmFuc2xhdGlvbiwgVEZ1bmN0aW9uIH0gZnJvbSAncmVhY3QtaTE4bmV4dCdcblxuaW50ZXJmYWNlIENvbW1hbmQge1xuICBuYW1lOiBzdHJpbmdcbiAgYWN0aW9uOiBGdW5jdGlvblxuICBob3RrZXk/OiBzdHJpbmdcbiAgc3ViQ29tbW5hZHM/OiBDb21tYW5kW11cbn1cblxuaW50ZXJmYWNlIE1haW5NZW51UHJvcCB7XG4gIGNvbW1hbmRzOiBDb21tYW5kW11cbiAgdDogVEZ1bmN0aW9uXG59XG5cbmludGVyZmFjZSBNYWluTWVudVN0YXRlIHtcbiAgaXNNZW51T3BlbjogYm9vbGVhblxufVxuXG5jbGFzcyBNYWluTWVudSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxNYWluTWVudVByb3AsIE1haW5NZW51U3RhdGU+IHtcbiAgY29uc3RydWN0b3IocHJvcHM6IE1haW5NZW51UHJvcCkge1xuICAgIHN1cGVyKHByb3BzKVxuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGlzTWVudU9wZW46IGZhbHNlXG4gICAgfVxuXG4gICAgdGhpcy50ID0gdGhpcy5wcm9wcy50XG4gIH1cblxuICB0OiBURnVuY3Rpb25cblxuICB0b2dnbGVNZW51ID0gKGUpOiB2b2lkID0+IHtcbiAgICBpZiAodGhpcy5zdGF0ZS5pc01lbnVPcGVuKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgaXNNZW51T3BlbjogZmFsc2UgfSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHggPSAwXG4gICAgY29uc3QgeSA9IGUuY3VycmVudFRhcmdldC5vZmZzZXRIZWlnaHRcbiAgICBzaG93TWVudSh7XG4gICAgICBwb3NpdGlvbjogeyB4LCB5IH0sXG4gICAgICB0YXJnZXQ6IGUuY3VycmVudFRhcmdldCxcbiAgICAgIGlkOiAnbWVudSdcbiAgICB9KVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGlzTWVudU9wZW46IHRydWUgfSlcbiAgfVxuXG4gIHJlbmRlck1lbnUgPSAoY29tbWFuZDogQ29tbWFuZCkgPT4ge1xuICAgIGlmICghY29tbWFuZC5zdWJDb21tbmFkcyB8fCBjb21tYW5kLnN1YkNvbW1uYWRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPE1lbnVJdGVtIGtleT17Y29tbWFuZC5uYW1lfSBvbkNsaWNrPXtjb21tYW5kLmFjdGlvbn0+XG4gICAgICAgICAge2NvbW1hbmQubmFtZX1cbiAgICAgICAgICB7Y29tbWFuZC5ob3RrZXkgJiYgPGRpdj57Y29tbWFuZC5ob3RrZXl9PC9kaXY+fVxuICAgICAgICA8L01lbnVJdGVtPlxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8U3ViTWVudSBrZXk9e2NvbW1hbmQubmFtZX0gdGl0bGU9e2NvbW1hbmQubmFtZX0gaG92ZXJEZWxheT17MH0+XG4gICAgICAgICAge2NvbW1hbmQuc3ViQ29tbW5hZHMubWFwKChzdWJjb21tYW5kKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJNZW51KHN1YmNvbW1hbmQpXG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvU3ViTWVudT5cbiAgICAgIClcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDw+XG4gICAgICAgIDxUb29sQnV0dG9uIGljb249e0JhcnN9IG9uQ2xpY2s9e3RoaXMudG9nZ2xlTWVudX0gaXNTZWxlY3RlZD17dGhpcy5zdGF0ZS5pc01lbnVPcGVufSBpZD1cIm1lbnVcIiAvPlxuICAgICAgICA8Q29udGV4dE1lbnUgaWQ9XCJtZW51XCIgb25IaWRlPXsoKSA9PiB0aGlzLnNldFN0YXRlKHsgaXNNZW51T3BlbjogZmFsc2UgfSl9PlxuICAgICAgICAgIHt0aGlzLnByb3BzLmNvbW1hbmRzLm1hcCgoY29tbWFuZDogQ29tbWFuZCkgPT4gdGhpcy5yZW5kZXJNZW51KGNvbW1hbmQpKX1cbiAgICAgICAgPC9Db250ZXh0TWVudT5cbiAgICAgIDwvPlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoVHJhbnNsYXRpb24oKShNYWluTWVudSlcbiIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHlsZWRJY29uQmFzZSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvc3R5bGVkLWljb24nO1xuZXhwb3J0IHZhciBHcmlkID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgdmFyIGF0dHJzID0ge1xuICAgIFwiZmlsbFwiOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIFwieG1sbnNcIjogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRJY29uQmFzZSwgX2V4dGVuZHMoe1xuICAgIGljb25BdHRyczogYXR0cnMsXG4gICAgaWNvblZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgaWNvblZpZXdCb3g6IFwiMCAwIDI0IDI0XCJcbiAgfSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk0xNSAzSDQuOTg0Yy0xLjEwMyAwLTIgLjg5Ny0yIDJ2MTQuMDE2YzAgMS4xMDMuODk3IDIgMiAySDE5YzEuMTAzIDAgMi0uODk3IDItMlY1YzAtMS4xMDMtLjg5Ny0yLTItMmgtNHptNCA1aC0zVjVoM3Yzek00Ljk4NCAxMGgzdjQuMDE2aC0zVjEwem01IDBIMTR2NC4wMTZIOS45ODRWMTB6TTE2IDEwaDN2NC4wMTZoLTNWMTB6bS0yLTV2M0g5Ljk4NFY1SDE0ek03Ljk4NCA1djNoLTNWNWgzem0tMyAxMS4wMTZoM3YzaC0zdi0zem01IDN2LTNIMTR2M0g5Ljk4NHptNi4wMTYgMHYtM2gzLjAwMXYzSDE2elwiXG4gIH0pKTtcbn0pO1xuR3JpZC5kaXNwbGF5TmFtZSA9ICdHcmlkJztcbmV4cG9ydCB2YXIgR3JpZERpbWVuc2lvbnMgPSB7XG4gIGhlaWdodDogMjQsXG4gIHdpZHRoOiAyNFxufTsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU3R5bGVkSWNvbkJhc2UgfSBmcm9tICdAc3R5bGVkLWljb25zL3N0eWxlZC1pY29uJztcbmV4cG9ydCB2YXIgQ2FyZXRMZWZ0ID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgdmFyIGF0dHJzID0ge1xuICAgIFwiZmlsbFwiOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIFwieG1sbnNcIjogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRJY29uQmFzZSwgX2V4dGVuZHMoe1xuICAgIGljb25BdHRyczogYXR0cnMsXG4gICAgaWNvblZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgaWNvblZpZXdCb3g6IFwiMCAwIDI0IDI0XCJcbiAgfSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk0xNSAxOVY1bC04IDd6XCJcbiAgfSkpO1xufSk7XG5DYXJldExlZnQuZGlzcGxheU5hbWUgPSAnQ2FyZXRMZWZ0JztcbmV4cG9ydCB2YXIgQ2FyZXRMZWZ0RGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiAyNCxcbiAgd2lkdGg6IDI0XG59OyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHlsZWRJY29uQmFzZSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvc3R5bGVkLWljb24nO1xuZXhwb3J0IHZhciBDYXJldFJpZ2h0ID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgdmFyIGF0dHJzID0ge1xuICAgIFwiZmlsbFwiOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIFwieG1sbnNcIjogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRJY29uQmFzZSwgX2V4dGVuZHMoe1xuICAgIGljb25BdHRyczogYXR0cnMsXG4gICAgaWNvblZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgaWNvblZpZXdCb3g6IFwiMCAwIDI0IDI0XCJcbiAgfSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIm05IDE5IDgtNy04LTd6XCJcbiAgfSkpO1xufSk7XG5DYXJldFJpZ2h0LmRpc3BsYXlOYW1lID0gJ0NhcmV0UmlnaHQnO1xuZXhwb3J0IHZhciBDYXJldFJpZ2h0RGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiAyNCxcbiAgd2lkdGg6IDI0XG59OyIsImltcG9ydCBSZWFjdCwgeyB1c2VSZWYsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgTnVtZXJpY0lucHV0IGZyb20gJy4vTnVtZXJpY0lucHV0J1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cydcbmltcG9ydCB7IENhcmV0TGVmdCB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvYm94aWNvbnMtcmVndWxhci9DYXJldExlZnQnXG5pbXBvcnQgeyBDYXJldFJpZ2h0IH0gZnJvbSAnQHN0eWxlZC1pY29ucy9ib3hpY29ucy1yZWd1bGFyL0NhcmV0UmlnaHQnXG5pbXBvcnQgeyBJbmZvVG9vbHRpcCB9IGZyb20gJy4uL2xheW91dC9Ub29sdGlwJ1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbmNvbnN0IFN0ZXBwZXJJbnB1dENvbnRhaW5lciA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXg6IDE7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDI0cHg7XG5cbiAgaW5wdXQge1xuICAgIGJvcmRlci1sZWZ0LXdpZHRoOiAwO1xuICAgIGJvcmRlci1yaWdodC13aWR0aDogMDtcbiAgICBib3JkZXItcmFkaXVzOiAwO1xuICB9XG5gXG5cbi8qKlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqL1xuY29uc3QgU3RlcHBlckJ1dHRvbiA9IChzdHlsZWQgYXMgYW55KS5idXR0b25gXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAkeyhwcm9wcykgPT4gKHByb3BzLnZhbHVlID8gcHJvcHMudGhlbWUuYmx1ZSA6IHByb3BzLnRoZW1lLnRvb2xiYXIpfTtcblxuICBib3JkZXI6IDFweCBzb2xpZCAkeyhwcm9wcykgPT4gcHJvcHMudGhlbWUuYm9yZGVyfTtcbiAgY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS50ZXh0fTtcblxuICB3aWR0aDogMjBweDtcbiAgcGFkZGluZzogMDtcblxuICAkeyhwcm9wcykgPT5cbiAgICBwcm9wcy5sZWZ0XG4gICAgICA/IGBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA0cHg7IGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDtgXG4gICAgICA6IGBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNHB4OyBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogNHB4O2B9XG5cbiAgOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMudGhlbWUuYmx1ZUhvdmVyfTtcbiAgfVxuXG4gIDphY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS5ibHVlfTtcbiAgfVxuYFxuXG4vKipcbiAqXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHBhcmFtIHthbnl9IHN0eWxlXG4gKiBAcGFyYW0ge2FueX0gY2xhc3NOYW1lXG4gKiBAcGFyYW0ge2FueX0gZGVjcmVtZW50VG9vbHRpcFxuICogQHBhcmFtIHthbnl9IGluY3JlbWVudFRvb2x0aXBcbiAqIEBwYXJhbSB7YW55fSByZXN0XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gTnVtZXJpY1N0ZXBwZXJJbnB1dCh7IHN0eWxlLCBjbGFzc05hbWUsIGRlY3JlbWVudFRvb2x0aXAsIGluY3JlbWVudFRvb2x0aXAsIC4uLnJlc3QgfTogYW55KSB7XG4gIGNvbnN0IGlucHV0UmVmID0gdXNlUmVmKCkgYXMgYW55XG5cbiAgY29uc3Qgb25EZWNyZW1lbnQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaW5wdXRSZWYuY3VycmVudC5kZWNyZW1lbnQoKVxuICB9LCBbaW5wdXRSZWZdKVxuXG4gIGNvbnN0IG9uSW5jcmVtZW50ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlucHV0UmVmLmN1cnJlbnQuaW5jcmVtZW50KClcbiAgfSwgW2lucHV0UmVmXSlcblxuICByZXR1cm4gKFxuICAgIDxTdGVwcGVySW5wdXRDb250YWluZXIgc3R5bGU9e3N0eWxlfSBjbGFzc05hbWU9e2NsYXNzTmFtZX0+XG4gICAgICA8SW5mb1Rvb2x0aXAgaW5mbz17ZGVjcmVtZW50VG9vbHRpcH0gcG9zaXRpb249XCJib3R0b21cIj5cbiAgICAgICAgPFN0ZXBwZXJCdXR0b24gbGVmdCBvbkNsaWNrPXtvbkRlY3JlbWVudH0+XG4gICAgICAgICAgPENhcmV0TGVmdCBzaXplPXsxNn0gLz5cbiAgICAgICAgPC9TdGVwcGVyQnV0dG9uPlxuICAgICAgPC9JbmZvVG9vbHRpcD5cbiAgICAgIDxOdW1lcmljSW5wdXQgcmVmPXtpbnB1dFJlZn0gey4uLnJlc3R9IC8+XG4gICAgICA8SW5mb1Rvb2x0aXAgaW5mbz17aW5jcmVtZW50VG9vbHRpcH0gcG9zaXRpb249XCJib3R0b21cIj5cbiAgICAgICAgPFN0ZXBwZXJCdXR0b24gcmlnaHQgb25DbGljaz17b25JbmNyZW1lbnR9PlxuICAgICAgICAgIDxDYXJldFJpZ2h0IHNpemU9ezE2fSAvPlxuICAgICAgICA8L1N0ZXBwZXJCdXR0b24+XG4gICAgICA8L0luZm9Ub29sdGlwPlxuICAgIDwvU3RlcHBlcklucHV0Q29udGFpbmVyPlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IE51bWVyaWNTdGVwcGVySW5wdXRcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBHcmlkIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9ib3hpY29ucy1yZWd1bGFyL0dyaWQnXG5pbXBvcnQgKiBhcyBzdHlsZXMgZnJvbSAnLi4vc3R5bGVzLm1vZHVsZS5zY3NzJ1xuaW1wb3J0IHsgSW5mb1Rvb2x0aXAgfSBmcm9tICcuLi8uLi9sYXlvdXQvVG9vbHRpcCdcbmltcG9ydCBOdW1lcmljU3RlcHBlcklucHV0IGZyb20gJy4uLy4uL2lucHV0cy9OdW1lcmljU3RlcHBlcklucHV0J1xuaW1wb3J0IEVkaXRvckV2ZW50cyBmcm9tICcuLi8uLi8uLi9jb25zdGFudHMvRWRpdG9yRXZlbnRzJ1xuaW1wb3J0IHsgU2NlbmVNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vLi4vbWFuYWdlcnMvU2NlbmVNYW5hZ2VyJ1xuaW1wb3J0IHsgQ29tbWFuZE1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9tYW5hZ2Vycy9Db21tYW5kTWFuYWdlcidcblxuY29uc3QgR3JpZFRvb2wgPSAoKSA9PiB7XG4gIGNvbnN0IFtpc0dyaWRWaXNpYmxlLCBzZXRHcmlkVmlzaWJsZV0gPSB1c2VTdGF0ZSh0cnVlKVxuICBjb25zdCBbZ3JpZEhlaWdodCwgc2V0R3JpZEhlaWdodF0gPSB1c2VTdGF0ZSgwKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLkdSSURfSEVJR0hUX0NIQU5HRUQudG9TdHJpbmcoKSwgdXBkYXRlR3JpZEhlaWdodClcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuR1JJRF9WSVNJQklMSVRZX0NIQU5HRUQudG9TdHJpbmcoKSwgdXBkYXRlR3JpZFZpc2liaWxpdHkpXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoRWRpdG9yRXZlbnRzLkdSSURfSEVJR0hUX0NIQU5HRUQudG9TdHJpbmcoKSwgdXBkYXRlR3JpZEhlaWdodClcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5HUklEX1ZJU0lCSUxJVFlfQ0hBTkdFRC50b1N0cmluZygpLCB1cGRhdGVHcmlkVmlzaWJpbGl0eSlcbiAgICB9XG4gIH0sIFtdKVxuXG4gIGNvbnN0IHVwZGF0ZUdyaWRWaXNpYmlsaXR5ID0gKCkgPT4ge1xuICAgIHNldEdyaWRWaXNpYmxlKFNjZW5lTWFuYWdlci5pbnN0YW5jZS5ncmlkLnZpc2libGUpXG4gIH1cblxuICBjb25zdCB1cGRhdGVHcmlkSGVpZ2h0ID0gKCkgPT4ge1xuICAgIHNldEdyaWRIZWlnaHQoU2NlbmVNYW5hZ2VyLmluc3RhbmNlLmdyaWQucG9zaXRpb24ueSlcbiAgfVxuXG4gIGNvbnN0IG9uVG9nZ2xlR3JpZFZpc2libGUgPSAoKSA9PiB7XG4gICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLmdyaWQudG9nZ2xlR3JpZFZpc2libGUoKVxuICB9XG5cbiAgY29uc3Qgb25DaGFuZ2VHcmlkSGVpZ2h0ID0gKHZhbHVlKSA9PiB7XG4gICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLmdyaWQuc2V0R3JpZEhlaWdodCh2YWx1ZSlcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBpZD1cInRyYW5zZm9ybS1ncmlkXCIgY2xhc3NOYW1lPXtzdHlsZXMudG9vbGJhcklucHV0R3JvdXB9PlxuICAgICAgPEluZm9Ub29sdGlwIGluZm89XCJUb2dnbGUgR3JpZCBWaXNpYmlsaXR5XCI+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBvbkNsaWNrPXtvblRvZ2dsZUdyaWRWaXNpYmxlfVxuICAgICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLnRvb2xCdXR0b24gKyAnICcgKyAoaXNHcmlkVmlzaWJsZSA/IHN0eWxlcy5zZWxlY3RlZCA6ICcnKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxHcmlkIHNpemU9ezE2fSAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvSW5mb1Rvb2x0aXA+XG4gICAgICA8TnVtZXJpY1N0ZXBwZXJJbnB1dFxuICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy50b29sYmFyTnVtZXJpY1N0ZXBwZXJJbnB1dH1cbiAgICAgICAgdmFsdWU9e2dyaWRIZWlnaHR9XG4gICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZUdyaWRIZWlnaHR9XG4gICAgICAgIHByZWNpc2lvbj17MC4wMX1cbiAgICAgICAgc21hbGxTdGVwPXswLjV9XG4gICAgICAgIG1lZGl1bVN0ZXA9ezF9XG4gICAgICAgIGxhcmdlU3RlcD17NX1cbiAgICAgICAgdW5pdD1cIm1cIlxuICAgICAgICBpbmNyZW1lbnRUb29sdGlwPVwiWy1dIEluY3JlbWVudCBHcmlkIEhlaWdodFwiXG4gICAgICAgIGRlY3JlbWVudFRvb2x0aXA9XCJbPV0gRGVjcmVtZW50IEdyaWQgSGVpZ2h0XCJcbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgR3JpZFRvb2xcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBBcnJvd3NBbHQgfSBmcm9tICdAc3R5bGVkLWljb25zL2ZhLXNvbGlkL0Fycm93c0FsdCdcbmltcG9ydCB7IEFycm93c0FsdFYgfSBmcm9tICdAc3R5bGVkLWljb25zL2ZhLXNvbGlkL0Fycm93c0FsdFYnXG5pbXBvcnQgeyBTeW5jQWx0IH0gZnJvbSAnQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9TeW5jQWx0J1xuaW1wb3J0IHsgVHJhbnNmb3JtTW9kZSB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL3NjZW5lL2NvbnN0YW50cy90cmFuc2Zvcm1Db25zdGFudHMnXG5cbmltcG9ydCAqIGFzIHN0eWxlcyBmcm9tICcuLi9zdHlsZXMubW9kdWxlLnNjc3MnXG5pbXBvcnQgeyBDb250cm9sTWFuYWdlciB9IGZyb20gJy4uLy4uLy4uL21hbmFnZXJzL0NvbnRyb2xNYW5hZ2VyJ1xuaW1wb3J0IHsgQ29tbWFuZE1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9tYW5hZ2Vycy9Db21tYW5kTWFuYWdlcidcbmltcG9ydCBFZGl0b3JFdmVudHMgZnJvbSAnLi4vLi4vLi4vY29uc3RhbnRzL0VkaXRvckV2ZW50cydcbmltcG9ydCB7IEluZm9Ub29sdGlwIH0gZnJvbSAnLi4vLi4vbGF5b3V0L1Rvb2x0aXAnXG5cbmNvbnN0IFRyYW5zZm9ybVRvb2wgPSAoKSA9PiB7XG4gIGNvbnN0IFt0cmFuc2Zvcm1Nb2RlLCBzZXRUcmFuc2Zvcm1Nb2RlXSA9IHVzZVN0YXRlKFRyYW5zZm9ybU1vZGUuVHJhbnNsYXRlKVxuICBjb25zdCBlZGl0b3JDb250cm9scyA9IENvbnRyb2xNYW5hZ2VyLmluc3RhbmNlLmVkaXRvckNvbnRyb2xzXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuVFJBTlNGUk9NX01PREVfQ0hBTkdFRC50b1N0cmluZygpLCB1cGRhdGVUcmFuc2Zvcm1Nb2RlKVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5UUkFOU0ZST01fTU9ERV9DSEFOR0VELnRvU3RyaW5nKCksIHVwZGF0ZVRyYW5zZm9ybU1vZGUpXG4gICAgfVxuICB9LCBbXSlcblxuICBjb25zdCB1cGRhdGVUcmFuc2Zvcm1Nb2RlID0gKCkgPT4ge1xuICAgIHNldFRyYW5zZm9ybU1vZGUoZWRpdG9yQ29udHJvbHMudHJhbnNmb3JtTW9kZSlcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy50b29sYmFySW5wdXRHcm91cH0+XG4gICAgICA8SW5mb1Rvb2x0aXAgaWQ9XCJ0cmFuc2xhdGUtYnV0dG9uXCIgaW5mbz1cIltUXSBUcmFuc2xhdGVcIiBwb3NpdGlvbj1cImJvdHRvbVwiPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMudG9vbEJ1dHRvbiArICcgJyArICh0cmFuc2Zvcm1Nb2RlID09PSBUcmFuc2Zvcm1Nb2RlLlRyYW5zbGF0ZSA/IHN0eWxlcy5zZWxlY3RlZCA6ICcnKX1cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBlZGl0b3JDb250cm9scy5zZXRUcmFuc2Zvcm1Nb2RlKFRyYW5zZm9ybU1vZGUuVHJhbnNsYXRlKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxBcnJvd3NBbHQgc2l6ZT17MTJ9IC8+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9JbmZvVG9vbHRpcD5cbiAgICAgIDxJbmZvVG9vbHRpcCBpZD1cInJvdGF0ZS1idXR0b25cIiBpbmZvPVwiW1JdIFJvdGF0ZVwiIHBvc2l0aW9uPVwiYm90dG9tXCI+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy50b29sQnV0dG9uICsgJyAnICsgKHRyYW5zZm9ybU1vZGUgPT09IFRyYW5zZm9ybU1vZGUuUm90YXRlID8gc3R5bGVzLnNlbGVjdGVkIDogJycpfVxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGVkaXRvckNvbnRyb2xzLnNldFRyYW5zZm9ybU1vZGUoVHJhbnNmb3JtTW9kZS5Sb3RhdGUpfVxuICAgICAgICA+XG4gICAgICAgICAgPFN5bmNBbHQgc2l6ZT17MTJ9IC8+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9JbmZvVG9vbHRpcD5cbiAgICAgIDxJbmZvVG9vbHRpcCBpZD1cInNjYWxlLWJ1dHRvblwiIGluZm89XCJbWV0gU2NhbGVcIiBwb3NpdGlvbj1cImJvdHRvbVwiPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMudG9vbEJ1dHRvbiArICcgJyArICh0cmFuc2Zvcm1Nb2RlID09PSBUcmFuc2Zvcm1Nb2RlLlNjYWxlID8gc3R5bGVzLnNlbGVjdGVkIDogJycpfVxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGVkaXRvckNvbnRyb2xzLnNldFRyYW5zZm9ybU1vZGUoVHJhbnNmb3JtTW9kZS5TY2FsZSl9XG4gICAgICAgID5cbiAgICAgICAgICA8QXJyb3dzQWx0ViBzaXplPXsxMn0gLz5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L0luZm9Ub29sdGlwPlxuICAgIDwvZGl2PlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IFRyYW5zZm9ybVRvb2xcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBCdWxsc2V5ZSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvZmEtc29saWQvQnVsbHNleWUnXG5pbXBvcnQgeyBUcmFuc2Zvcm1QaXZvdCB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL3NjZW5lL2NvbnN0YW50cy90cmFuc2Zvcm1Db25zdGFudHMnXG5pbXBvcnQgeyBDb250cm9sTWFuYWdlciB9IGZyb20gJy4uLy4uLy4uL21hbmFnZXJzL0NvbnRyb2xNYW5hZ2VyJ1xuaW1wb3J0IHsgQ29tbWFuZE1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9tYW5hZ2Vycy9Db21tYW5kTWFuYWdlcidcbmltcG9ydCBFZGl0b3JFdmVudHMgZnJvbSAnLi4vLi4vLi4vY29uc3RhbnRzL0VkaXRvckV2ZW50cydcbmltcG9ydCB7IEluZm9Ub29sdGlwIH0gZnJvbSAnLi4vLi4vbGF5b3V0L1Rvb2x0aXAnXG5pbXBvcnQgU2VsZWN0SW5wdXQgZnJvbSAnLi4vLi4vaW5wdXRzL1NlbGVjdElucHV0J1xuaW1wb3J0ICogYXMgc3R5bGVzIGZyb20gJy4uL3N0eWxlcy5tb2R1bGUuc2NzcydcblxuLyoqXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICovXG5jb25zdCB0cmFuc2Zvcm1QaXZvdE9wdGlvbnMgPSBbXG4gIHsgbGFiZWw6ICdTZWxlY3Rpb24nLCB2YWx1ZTogVHJhbnNmb3JtUGl2b3QuU2VsZWN0aW9uIH0sXG4gIHsgbGFiZWw6ICdDZW50ZXInLCB2YWx1ZTogVHJhbnNmb3JtUGl2b3QuQ2VudGVyIH0sXG4gIHsgbGFiZWw6ICdCb3R0b20nLCB2YWx1ZTogVHJhbnNmb3JtUGl2b3QuQm90dG9tIH1cbl1cblxuY29uc3QgVHJhbnNmb3JtUGl2b3RUb29sID0gKCkgPT4ge1xuICBjb25zdCBbdHJhbnNmb3JtUGl2b3QsIHNldFRyYW5zZm9ybVBpdm90XSA9IHVzZVN0YXRlKFRyYW5zZm9ybVBpdm90LlNlbGVjdGlvbilcbiAgY29uc3QgZWRpdG9yQ29udHJvbHMgPSBDb250cm9sTWFuYWdlci5pbnN0YW5jZS5lZGl0b3JDb250cm9sc1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlRSQU5TRk9STV9QSVZPVF9DSEFOR0VELnRvU3RyaW5nKCksIHVwZGF0ZVRyYW5zZm9ybVBpdm90KVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5UUkFOU0ZPUk1fUElWT1RfQ0hBTkdFRC50b1N0cmluZygpLCB1cGRhdGVUcmFuc2Zvcm1QaXZvdClcbiAgICB9XG4gIH0sIFtdKVxuXG4gIGNvbnN0IHVwZGF0ZVRyYW5zZm9ybVBpdm90ID0gKCkgPT4ge1xuICAgIHNldFRyYW5zZm9ybVBpdm90KGVkaXRvckNvbnRyb2xzLnRyYW5zZm9ybVBpdm90KVxuICB9XG5cbiAgY29uc3Qgb25DaGFuZ2VUcmFuc2Zvcm1QaXZvdCA9ICh0cmFuc2Zvcm1QaXZvdCkgPT4ge1xuICAgIGVkaXRvckNvbnRyb2xzLnNldFRyYW5zZm9ybVBpdm90KHRyYW5zZm9ybVBpdm90KVxuICB9XG5cbiAgY29uc3Qgb25Ub2dnbGVUcmFuc2Zvcm1QaXZvdCA9ICgpID0+IHtcbiAgICBlZGl0b3JDb250cm9scy5jaGFuZ2VUcmFuc2Zvcm1QaXZvdCgpXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMudG9vbGJhcklucHV0R3JvdXB9IGlkPVwidHJhbnNmb3JtLXBpdm90XCI+XG4gICAgICA8SW5mb1Rvb2x0aXAgaW5mbz1cIltYXSBUb2dnbGUgVHJhbnNmb3JtIFBpdm90XCI+XG4gICAgICAgIDxidXR0b24gb25DbGljaz17b25Ub2dnbGVUcmFuc2Zvcm1QaXZvdH0gY2xhc3NOYW1lPXtzdHlsZXMudG9vbEJ1dHRvbn0+XG4gICAgICAgICAgPEJ1bGxzZXllIHNpemU9ezEyfSAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvSW5mb1Rvb2x0aXA+XG4gICAgICA8U2VsZWN0SW5wdXRcbiAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMuc2VsZWN0SW5wdXR9XG4gICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZVRyYW5zZm9ybVBpdm90fVxuICAgICAgICBvcHRpb25zPXt0cmFuc2Zvcm1QaXZvdE9wdGlvbnN9XG4gICAgICAgIHZhbHVlPXt0cmFuc2Zvcm1QaXZvdH1cbiAgICAgICAgY3JlYXRhYmxlPXtmYWxzZX1cbiAgICAgICAgaXNTZWFyY2hhYmxlPXtmYWxzZX1cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgVHJhbnNmb3JtUGl2b3RUb29sXG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgR2xvYmUgfSBmcm9tICdAc3R5bGVkLWljb25zL2ZhLXNvbGlkL0dsb2JlJ1xuaW1wb3J0IHsgQ29udHJvbE1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9tYW5hZ2Vycy9Db250cm9sTWFuYWdlcidcbmltcG9ydCB7IENvbW1hbmRNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vLi4vbWFuYWdlcnMvQ29tbWFuZE1hbmFnZXInXG5pbXBvcnQgRWRpdG9yRXZlbnRzIGZyb20gJy4uLy4uLy4uL2NvbnN0YW50cy9FZGl0b3JFdmVudHMnXG5pbXBvcnQgeyBJbmZvVG9vbHRpcCB9IGZyb20gJy4uLy4uL2xheW91dC9Ub29sdGlwJ1xuaW1wb3J0IFNlbGVjdElucHV0IGZyb20gJy4uLy4uL2lucHV0cy9TZWxlY3RJbnB1dCdcbmltcG9ydCAqIGFzIHN0eWxlcyBmcm9tICcuLi9zdHlsZXMubW9kdWxlLnNjc3MnXG5pbXBvcnQgeyBUcmFuc2Zvcm1TcGFjZSB9IGZyb20gJy4uLy4uLy4uL2NvbnN0YW50cy9UcmFuc2Zvcm1TcGFjZSdcblxuLyoqXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICovXG5jb25zdCB0cmFuc2Zvcm1TcGFjZU9wdGlvbnMgPSBbXG4gIHsgbGFiZWw6ICdTZWxlY3Rpb24nLCB2YWx1ZTogVHJhbnNmb3JtU3BhY2UuTG9jYWxTZWxlY3Rpb24gfSxcbiAgeyBsYWJlbDogJ1dvcmxkJywgdmFsdWU6IFRyYW5zZm9ybVNwYWNlLldvcmxkIH1cbl1cblxuY29uc3QgVHJhbnNmb3JtU3BhY2VUb29sID0gKCkgPT4ge1xuICBjb25zdCBbdHJhbnNmb3JtU3BhY2UsIHNldFRyYW5zZm9ybVNwYWNlXSA9IHVzZVN0YXRlKFRyYW5zZm9ybVNwYWNlLldvcmxkKVxuICBjb25zdCBlZGl0b3JDb250cm9scyA9IENvbnRyb2xNYW5hZ2VyLmluc3RhbmNlLmVkaXRvckNvbnRyb2xzXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuVFJBTlNGT1JNX1NQQUNFX0NIQU5HRUQudG9TdHJpbmcoKSwgdXBkYXRlVHJhbnNmb3JtU3BhY2UpXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlRSQU5TRk9STV9TUEFDRV9DSEFOR0VELnRvU3RyaW5nKCksIHVwZGF0ZVRyYW5zZm9ybVNwYWNlKVxuICAgIH1cbiAgfSwgW10pXG5cbiAgY29uc3QgdXBkYXRlVHJhbnNmb3JtU3BhY2UgPSAoKSA9PiB7XG4gICAgc2V0VHJhbnNmb3JtU3BhY2UoZWRpdG9yQ29udHJvbHMudHJhbnNmb3JtU3BhY2UpXG4gIH1cblxuICBjb25zdCBvbkNoYW5nZVRyYW5zZm9ybVNwYWNlID0gKHRyYW5zZm9ybVNwYWNlKSA9PiB7XG4gICAgZWRpdG9yQ29udHJvbHMuc2V0VHJhbnNmb3JtU3BhY2UodHJhbnNmb3JtU3BhY2UpXG4gIH1cblxuICBjb25zdCBvblRvZ2dsZVRyYW5zZm9ybVNwYWNlID0gKCkgPT4ge1xuICAgIGVkaXRvckNvbnRyb2xzLnRvZ2dsZVRyYW5zZm9ybVNwYWNlKClcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy50b29sYmFySW5wdXRHcm91cH0gaWQ9XCJ0cmFuc2Zvcm0tc3BhY2VcIj5cbiAgICAgIDxJbmZvVG9vbHRpcCBpbmZvPVwiW1pdIFRvZ2dsZSBUcmFuc2Zvcm0gU3BhY2VcIj5cbiAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvblRvZ2dsZVRyYW5zZm9ybVNwYWNlfSBjbGFzc05hbWU9e3N0eWxlcy50b29sQnV0dG9ufT5cbiAgICAgICAgICA8R2xvYmUgc2l6ZT17MTJ9IC8+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9JbmZvVG9vbHRpcD5cbiAgICAgIDxTZWxlY3RJbnB1dFxuICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5zZWxlY3RJbnB1dH1cbiAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlVHJhbnNmb3JtU3BhY2V9XG4gICAgICAgIG9wdGlvbnM9e3RyYW5zZm9ybVNwYWNlT3B0aW9uc31cbiAgICAgICAgdmFsdWU9e3RyYW5zZm9ybVNwYWNlfVxuICAgICAgICBjcmVhdGFibGU9e2ZhbHNlfVxuICAgICAgICBpc1NlYXJjaGFibGU9e2ZhbHNlfVxuICAgICAgLz5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBUcmFuc2Zvcm1TcGFjZVRvb2xcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBNYWduZXQgfSBmcm9tICdAc3R5bGVkLWljb25zL2ZhLXNvbGlkL01hZ25ldCdcbmltcG9ydCB7IENvbnRyb2xNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vLi4vbWFuYWdlcnMvQ29udHJvbE1hbmFnZXInXG5pbXBvcnQgeyBDb21tYW5kTWFuYWdlciB9IGZyb20gJy4uLy4uLy4uL21hbmFnZXJzL0NvbW1hbmRNYW5hZ2VyJ1xuaW1wb3J0IEVkaXRvckV2ZW50cyBmcm9tICcuLi8uLi8uLi9jb25zdGFudHMvRWRpdG9yRXZlbnRzJ1xuaW1wb3J0IHsgSW5mb1Rvb2x0aXAgfSBmcm9tICcuLi8uLi9sYXlvdXQvVG9vbHRpcCdcbmltcG9ydCBTZWxlY3RJbnB1dCBmcm9tICcuLi8uLi9pbnB1dHMvU2VsZWN0SW5wdXQnXG5pbXBvcnQgKiBhcyBzdHlsZXMgZnJvbSAnLi4vc3R5bGVzLm1vZHVsZS5zY3NzJ1xuaW1wb3J0IHsgU25hcE1vZGUgfSBmcm9tICcuLi8uLi8uLi9jb250cm9scy9FZGl0b3JDb250cm9scydcblxuLyoqXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICovXG5jb25zdCB0cmFuc2xhdGlvblNuYXBPcHRpb25zID0gW1xuICB7IGxhYmVsOiAnMC4xbScsIHZhbHVlOiAwLjEgfSxcbiAgeyBsYWJlbDogJzAuMTI1bScsIHZhbHVlOiAwLjEyNSB9LFxuICB7IGxhYmVsOiAnMC4yNW0nLCB2YWx1ZTogMC4yNSB9LFxuICB7IGxhYmVsOiAnMC41bScsIHZhbHVlOiAwLjUgfSxcbiAgeyBsYWJlbDogJzFtJywgdmFsdWU6IDEgfSxcbiAgeyBsYWJlbDogJzJtJywgdmFsdWU6IDIgfSxcbiAgeyBsYWJlbDogJzRtJywgdmFsdWU6IDQgfVxuXVxuXG4vKipcbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbmNvbnN0IHJvdGF0aW9uU25hcE9wdGlvbnMgPSBbXG4gIHsgbGFiZWw6ICcxwrAnLCB2YWx1ZTogMSB9LFxuICB7IGxhYmVsOiAnNcKwJywgdmFsdWU6IDUgfSxcbiAgeyBsYWJlbDogJzEwwrAnLCB2YWx1ZTogMTAgfSxcbiAgeyBsYWJlbDogJzE1wrAnLCB2YWx1ZTogMTUgfSxcbiAgeyBsYWJlbDogJzMwwrAnLCB2YWx1ZTogMzAgfSxcbiAgeyBsYWJlbDogJzQ1wrAnLCB2YWx1ZTogNDUgfSxcbiAgeyBsYWJlbDogJzkwwrAnLCB2YWx1ZTogOTAgfVxuXVxuXG5jb25zdCBkZWZhdWx0U25hcFNldHRpbmcgPSB7XG4gIG1vZGU6IFNuYXBNb2RlLkdyaWQsXG4gIHRyYW5zbGF0aW9uU25hcDogMC41LFxuICByb3RhdGlvblNuYXA6IDEwXG59XG5cbmNvbnN0IFRyYW5zZm9ybVNuYXBUb29sID0gKCkgPT4ge1xuICBjb25zdCBbc25hcFNldHRpbmcsIHNldFNuYXBTZXR0aW5nXSA9IHVzZVN0YXRlKGRlZmF1bHRTbmFwU2V0dGluZylcbiAgY29uc3QgZWRpdG9yQ29udHJvbHMgPSBDb250cm9sTWFuYWdlci5pbnN0YW5jZS5lZGl0b3JDb250cm9sc1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlNOQVBfU0VUVElOR1NfQ0hBTkdFRC50b1N0cmluZygpLCB1cGRhdGVTbmFwU2V0dGluZ3MpXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlNOQVBfU0VUVElOR1NfQ0hBTkdFRC50b1N0cmluZygpLCB1cGRhdGVTbmFwU2V0dGluZ3MpXG4gICAgfVxuICB9LCBbXSlcblxuICBjb25zdCB1cGRhdGVTbmFwU2V0dGluZ3MgPSAoKSA9PiB7XG4gICAgc2V0U25hcFNldHRpbmcoe1xuICAgICAgbW9kZTogZWRpdG9yQ29udHJvbHMuc25hcE1vZGUsXG4gICAgICB0cmFuc2xhdGlvblNuYXA6IGVkaXRvckNvbnRyb2xzLnRyYW5zbGF0aW9uU25hcCxcbiAgICAgIHJvdGF0aW9uU25hcDogZWRpdG9yQ29udHJvbHMucm90YXRpb25TbmFwXG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IG9uQ2hhbmdlVHJhbnNsYXRpb25TbmFwID0gKHNuYXBWYWx1ZTogbnVtYmVyKSA9PiB7XG4gICAgZWRpdG9yQ29udHJvbHMuc2V0VHJhbnNsYXRpb25TbmFwKHNuYXBWYWx1ZSlcbiAgICBlZGl0b3JDb250cm9scy5zZXRTbmFwTW9kZShTbmFwTW9kZS5HcmlkKVxuICB9XG5cbiAgY29uc3Qgb25DaGFuZ2VSb3RhdGlvblNuYXAgPSAoc25hcFZhbHVlOiBudW1iZXIpID0+IHtcbiAgICBlZGl0b3JDb250cm9scy5zZXRSb3RhdGlvblNuYXAoc25hcFZhbHVlKVxuICAgIGVkaXRvckNvbnRyb2xzLnNldFNuYXBNb2RlKFNuYXBNb2RlLkdyaWQpXG4gIH1cblxuICAvLyBjb25zdCBvbkNoYW5nZVNjYWxlU25hcCA9IChzbmFwVmFsdWU6IG51bWJlcikgPT4ge1xuICAvLyAgIGVkaXRvckNvbnRyb2xzLnNldFNjYWxlU25hcChzbmFwVmFsdWUpXG4gIC8vICAgZWRpdG9yQ29udHJvbHMuc2V0U25hcE1vZGUoU25hcE1vZGUuR3JpZClcbiAgLy8gfVxuXG4gIGNvbnN0IG9uVG9nZ2xlU25hcCA9ICgpID0+IHtcbiAgICBlZGl0b3JDb250cm9scy50b2dnbGVTbmFwTW9kZSgpXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMudG9vbGJhcklucHV0R3JvdXB9IGlkPVwidHJhbnNmb3JtLXNuYXBcIj5cbiAgICAgIDxJbmZvVG9vbHRpcCBpbmZvPVwiW0NdIFRvZ2dsZSBTbmFwIE1vZGVcIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2s9e29uVG9nZ2xlU25hcH1cbiAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy50b29sQnV0dG9uICsgJyAnICsgKHNuYXBTZXR0aW5nLm1vZGUgPT09IFNuYXBNb2RlLkdyaWQgPyBzdHlsZXMuc2VsZWN0ZWQgOiAnJyl9XG4gICAgICAgID5cbiAgICAgICAgICA8TWFnbmV0IHNpemU9ezEyfSAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvSW5mb1Rvb2x0aXA+XG4gICAgICA8U2VsZWN0SW5wdXRcbiAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMuc2VsZWN0SW5wdXR9XG4gICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZVRyYW5zbGF0aW9uU25hcH1cbiAgICAgICAgb3B0aW9ucz17dHJhbnNsYXRpb25TbmFwT3B0aW9uc31cbiAgICAgICAgdmFsdWU9e3NuYXBTZXR0aW5nLnRyYW5zbGF0aW9uU25hcH1cbiAgICAgICAgY3JlYXRhYmxlPXtmYWxzZX1cbiAgICAgICAgaXNTZWFyY2hhYmxlPXtmYWxzZX1cbiAgICAgIC8+XG4gICAgICA8U2VsZWN0SW5wdXRcbiAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMuc2VsZWN0SW5wdXR9XG4gICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZVJvdGF0aW9uU25hcH1cbiAgICAgICAgb3B0aW9ucz17cm90YXRpb25TbmFwT3B0aW9uc31cbiAgICAgICAgdmFsdWU9e3NuYXBTZXR0aW5nLnJvdGF0aW9uU25hcH1cbiAgICAgICAgY3JlYXRhYmxlPXtmYWxzZX1cbiAgICAgICAgaXNTZWFyY2hhYmxlPXtmYWxzZX1cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgVHJhbnNmb3JtU25hcFRvb2xcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBQYXVzZSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvZmEtc29saWQvUGF1c2UnXG5pbXBvcnQgeyBQbGF5IH0gZnJvbSAnQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9QbGF5J1xuaW1wb3J0IHsgQ29udHJvbE1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9tYW5hZ2Vycy9Db250cm9sTWFuYWdlcidcbmltcG9ydCB7IENvbW1hbmRNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vLi4vbWFuYWdlcnMvQ29tbWFuZE1hbmFnZXInXG5pbXBvcnQgRWRpdG9yRXZlbnRzIGZyb20gJy4uLy4uLy4uL2NvbnN0YW50cy9FZGl0b3JFdmVudHMnXG5pbXBvcnQgeyBJbmZvVG9vbHRpcCB9IGZyb20gJy4uLy4uL2xheW91dC9Ub29sdGlwJ1xuaW1wb3J0ICogYXMgc3R5bGVzIGZyb20gJy4uL3N0eWxlcy5tb2R1bGUuc2NzcydcblxuY29uc3QgUGxheU1vZGVUb29sID0gKCkgPT4ge1xuICBjb25zdCBbaXNJblBsYXlNb2RlLCBzZXRJblBsYXlNb2RlXSA9IHVzZVN0YXRlKGZhbHNlKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlBMQVlfTU9ERV9DSEFOR0VELnRvU3RyaW5nKCksIHVwZGF0ZVBsYXlNb2RlU2V0dGluZylcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihFZGl0b3JFdmVudHMuUExBWV9NT0RFX0NIQU5HRUQudG9TdHJpbmcoKSwgdXBkYXRlUGxheU1vZGVTZXR0aW5nKVxuICAgIH1cbiAgfSwgW10pXG5cbiAgY29uc3QgdXBkYXRlUGxheU1vZGVTZXR0aW5nID0gKCkgPT4ge1xuICAgIHNldEluUGxheU1vZGUoQ29udHJvbE1hbmFnZXIuaW5zdGFuY2UuaXNJblBsYXlNb2RlKVxuICB9XG5cbiAgY29uc3Qgb25Ub2dnbGVQbGF5TW9kZSA9ICgpID0+IHtcbiAgICBpZiAoaXNJblBsYXlNb2RlKSB7XG4gICAgICBDb250cm9sTWFuYWdlci5pbnN0YW5jZS5sZWF2ZVBsYXlNb2RlKClcbiAgICB9IGVsc2Uge1xuICAgICAgQ29udHJvbE1hbmFnZXIuaW5zdGFuY2UuZW50ZXJQbGF5TW9kZSgpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnRvb2xiYXJJbnB1dEdyb3VwICsgJyAnICsgc3R5bGVzLnBsYXlCdXR0b25Db250YWluZXJ9IGlkPVwicHJldmlld1wiPlxuICAgICAgPEluZm9Ub29sdGlwIGluZm89e2lzSW5QbGF5TW9kZSA/ICdTdG9wIFByZXZpZXdpbmcgU2NlbmUnIDogJ1ByZXZpZXcgU2NlbmUnfT5cbiAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvblRvZ2dsZVBsYXlNb2RlfSBjbGFzc05hbWU9e3N0eWxlcy50b29sQnV0dG9uICsgJyAnICsgKGlzSW5QbGF5TW9kZSA/IHN0eWxlcy5zZWxlY3RlZCA6ICcnKX0+XG4gICAgICAgICAge2lzSW5QbGF5TW9kZSA/IDxQYXVzZSBzaXplPXsxNn0gLz4gOiA8UGxheSBzaXplPXsxNn0gLz59XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9JbmZvVG9vbHRpcD5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBQbGF5TW9kZVRvb2xcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VUcmFuc2xhdGlvbiB9IGZyb20gJ3JlYWN0LWkxOG5leHQnXG5pbXBvcnQgeyBDaGFydEFyZWEgfSBmcm9tICdAc3R5bGVkLWljb25zL2ZhLXNvbGlkL0NoYXJ0QXJlYSdcbmltcG9ydCB7IFNjZW5lTWFuYWdlciB9IGZyb20gJy4uLy4uLy4uL21hbmFnZXJzL1NjZW5lTWFuYWdlcidcbmltcG9ydCB7IEluZm9Ub29sdGlwIH0gZnJvbSAnLi4vLi4vbGF5b3V0L1Rvb2x0aXAnXG5pbXBvcnQgc3R5bGVzIGZyb20gJy4uL3N0eWxlcy5tb2R1bGUuc2NzcydcblxuLyoqXG4gKiBTdGF0cyB1c2VkIHRvIHNob3cgc3RhdHMgb2YgIG1lbW9yeSBhbmQgIHJlbmRlci5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuY29uc3QgU3RhdHNUb29sID0gKCkgPT4ge1xuICBjb25zdCBbaW5mbywgc2V0SW5mb10gPSB1c2VTdGF0ZTxhbnk+KHt9KVxuICBjb25zdCBbaXNWaXNpYmxlLCBzZXRWaXNpYmxlXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCB7IHQgfSA9IHVzZVRyYW5zbGF0aW9uKClcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIFNjZW5lTWFuYWdlci5pbnN0YW5jZS5yZW5kZXJlci5vblVwZGF0ZVN0YXRzID0gKGluZm8pID0+IHtcbiAgICAgIGlmIChpbmZvLnJlbmRlci5mcmFtZSAlIDMgPT09IDApIHtcbiAgICAgICAgc2V0SW5mbyh7XG4gICAgICAgICAgZ2VvbWV0cmllczogaW5mby5tZW1vcnkuZ2VvbWV0cmllcyxcbiAgICAgICAgICB0ZXh0dXJlczogaW5mby5tZW1vcnkudGV4dHVyZXMsXG4gICAgICAgICAgZnBzOiAoaW5mby5yZW5kZXIgYXMgYW55KS5mcHMsXG4gICAgICAgICAgZnJhbWVUaW1lOiAoaW5mby5yZW5kZXIgYXMgYW55KS5mcmFtZVRpbWUsXG4gICAgICAgICAgY2FsbHM6IGluZm8ucmVuZGVyLmNhbGxzLFxuICAgICAgICAgIHRyaWFuZ2xlczogaW5mby5yZW5kZXIudHJpYW5nbGVzLFxuICAgICAgICAgIHBvaW50czogaW5mby5yZW5kZXIucG9pbnRzLFxuICAgICAgICAgIGxpbmVzOiBpbmZvLnJlbmRlci5saW5lc1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBTY2VuZU1hbmFnZXIuaW5zdGFuY2UucmVuZGVyZXIub25VcGRhdGVTdGF0cyA9IHVuZGVmaW5lZFxuICAgIH1cbiAgfSwgW10pXG5cbiAgY29uc3QgdG9nZ2xlU3RhdHMgPSAoKSA9PiB7XG4gICAgc2V0VmlzaWJsZSghaXNWaXNpYmxlKVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcmluZyBzdGF0cyB2aWV3IGluIFZpZXdwb3J0VG9vbGJhciBhbmQgc2hvd3Mgd2hlbiBjbGljayBvbiB0b2dnbGVTdGF0c1xuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqL1xuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnRvb2xiYXJJbnB1dEdyb3VwICsgJyAnICsgc3R5bGVzLnBsYXlCdXR0b25Db250YWluZXJ9IGlkPVwic3RhdHNcIj5cbiAgICAgICAgPEluZm9Ub29sdGlwIGluZm89XCJUb2dnbGUgU3RhdHNcIj5cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RvZ2dsZVN0YXRzfSBjbGFzc05hbWU9e3N0eWxlcy50b29sQnV0dG9uICsgJyAnICsgKGlzVmlzaWJsZSA/IHN0eWxlcy5zZWxlY3RlZCA6ICcnKX0+XG4gICAgICAgICAgICA8Q2hhcnRBcmVhIHNpemU9ezEyfSAvPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L0luZm9Ub29sdGlwPlxuICAgICAgPC9kaXY+XG4gICAgICB7aXNWaXNpYmxlICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5zdGF0c0NvbnRhaW5lcn0+XG4gICAgICAgICAgPGgzPnt0KCdlZGl0b3I6dmlld3BvcnQuc3RhdGUuaGVhZGVyJyl9PC9oMz5cbiAgICAgICAgICB7aW5mbyAmJiAoXG4gICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICB7dCgnZWRpdG9yOnZpZXdwb3J0LnN0YXRlLm1lbW9yeScpfVxuICAgICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAge3QoJ2VkaXRvcjp2aWV3cG9ydC5zdGF0ZS5nZW9tZXRyaWVzJyl9OiB7KGluZm8gYXMgYW55KS5nZW9tZXRyaWVzfVxuICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAge3QoJ2VkaXRvcjp2aWV3cG9ydC5zdGF0ZS50ZXh0dXJlcycpfTogeyhpbmZvIGFzIGFueSkudGV4dHVyZXN9XG4gICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICB7dCgnZWRpdG9yOnZpZXdwb3J0LnN0YXRlLnJlbmRlcicpfTpcbiAgICAgICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdlZGl0b3I6dmlld3BvcnQuc3RhdGUuRlBTJyl9OiB7TWF0aC5yb3VuZCgoaW5mbyBhcyBhbnkpLmZwcyl9XG4gICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICB7dCgnZWRpdG9yOnZpZXdwb3J0LnN0YXRlLmZyYW1lVGltZScpfToge01hdGgucm91bmQoKGluZm8gYXMgYW55KS5mcmFtZVRpbWUpfW1zXG4gICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICB7dCgnZWRpdG9yOnZpZXdwb3J0LnN0YXRlLmNhbGxzJyl9OiB7KGluZm8gYXMgYW55KS5jYWxsc31cbiAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdlZGl0b3I6dmlld3BvcnQuc3RhdGUudHJpYW5nbGVzJyl9OiB7KGluZm8gYXMgYW55KS50cmlhbmdsZXN9XG4gICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICB7dCgnZWRpdG9yOnZpZXdwb3J0LnN0YXRlLnBvaW50cycpfTogeyhpbmZvIGFzIGFueSkucG9pbnRzfVxuICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAge3QoJ2VkaXRvcjp2aWV3cG9ydC5zdGF0ZS5saW5lcycpfTogeyhpbmZvIGFzIGFueSkubGluZXN9XG4gICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8Lz5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBTdGF0c1Rvb2xcbiIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHlsZWRJY29uQmFzZSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvc3R5bGVkLWljb24nO1xuZXhwb3J0IHZhciBTdW4gPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAocHJvcHMsIHJlZikge1xuICB2YXIgYXR0cnMgPSB7XG4gICAgXCJmaWxsXCI6IFwiY3VycmVudENvbG9yXCIsXG4gICAgXCJ4bWxuc1wiOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZEljb25CYXNlLCBfZXh0ZW5kcyh7XG4gICAgaWNvbkF0dHJzOiBhdHRycyxcbiAgICBpY29uVmVydGljYWxBbGlnbjogXCJtaWRkbGVcIixcbiAgICBpY29uVmlld0JveDogXCIwIDAgMjQgMjRcIlxuICB9LCBwcm9wcywge1xuICAgIHJlZjogcmVmXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTYuOTkzIDEyYzAgMi43NjEgMi4yNDYgNS4wMDcgNS4wMDcgNS4wMDdzNS4wMDctMi4yNDYgNS4wMDctNS4wMDdTMTQuNzYxIDYuOTkzIDEyIDYuOTkzIDYuOTkzIDkuMjM5IDYuOTkzIDEyek0xMiA4Ljk5M2MxLjY1OCAwIDMuMDA3IDEuMzQ5IDMuMDA3IDMuMDA3UzEzLjY1OCAxNS4wMDcgMTIgMTUuMDA3IDguOTkzIDEzLjY1OCA4Ljk5MyAxMiAxMC4zNDIgOC45OTMgMTIgOC45OTN6TTEwLjk5OCAxOWgydjNoLTJ6bTAtMTdoMnYzaC0yem0tOSA5aDN2MmgtM3ptMTcgMGgzdjJoLTN6TTQuMjE5IDE4LjM2M2wyLjEyLTIuMTIyIDEuNDE1IDEuNDE0LTIuMTIgMi4xMjJ6TTE2LjI0IDYuMzQ0bDIuMTIyLTIuMTIyIDEuNDE0IDEuNDE0LTIuMTIyIDIuMTIyek02LjM0MiA3Ljc1OSA0LjIyIDUuNjM3bDEuNDE1LTEuNDE0IDIuMTIgMi4xMjJ6bTEzLjQzNCAxMC42MDUtMS40MTQgMS40MTQtMi4xMjItMi4xMjIgMS40MTQtMS40MTR6XCJcbiAgfSkpO1xufSk7XG5TdW4uZGlzcGxheU5hbWUgPSAnU3VuJztcbmV4cG9ydCB2YXIgU3VuRGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiAyNCxcbiAgd2lkdGg6IDI0XG59OyIsImltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgU3VuIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9ib3hpY29ucy1yZWd1bGFyL1N1bidcbmltcG9ydCB7IENvbW1hbmRNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vLi4vbWFuYWdlcnMvQ29tbWFuZE1hbmFnZXInXG5pbXBvcnQgRWRpdG9yRXZlbnRzIGZyb20gJy4uLy4uLy4uL2NvbnN0YW50cy9FZGl0b3JFdmVudHMnXG5pbXBvcnQgU2VsZWN0SW5wdXQgZnJvbSAnLi4vLi4vaW5wdXRzL1NlbGVjdElucHV0J1xuaW1wb3J0ICogYXMgc3R5bGVzIGZyb20gJy4uL3N0eWxlcy5tb2R1bGUuc2NzcydcbmltcG9ydCB7IFJlbmRlck1vZGVzLCBSZW5kZXJNb2Rlc1R5cGUgfSBmcm9tICcuLi8uLi8uLi9jb25zdGFudHMvUmVuZGVyTW9kZXMnXG5pbXBvcnQgeyBTY2VuZU1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9tYW5hZ2Vycy9TY2VuZU1hbmFnZXInXG5pbXBvcnQgeyBJbmZvVG9vbHRpcCB9IGZyb20gJy4uLy4uL2xheW91dC9Ub29sdGlwJ1xuXG5jb25zdCBSZW5kZXJNb2RlVG9vbCA9ICgpID0+IHtcbiAgY29uc3QgW3JlbmRlck1vZGUsIHNldFJlbmRlck1vZGVdID0gdXNlU3RhdGU8UmVuZGVyTW9kZXNUeXBlPihSZW5kZXJNb2Rlcy5VTkxJVClcblxuICBjb25zdCBvcHRpb25zID0gW11cblxuICBmb3IgKGxldCBrZXkgb2YgT2JqZWN0LmtleXMoUmVuZGVyTW9kZXMpKSB7XG4gICAgb3B0aW9ucy5wdXNoKHtcbiAgICAgIGxhYmVsOiBSZW5kZXJNb2Rlc1trZXldLFxuICAgICAgdmFsdWU6IFJlbmRlck1vZGVzW2tleV1cbiAgICB9KVxuICB9XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuUkVOREVSX01PREVfQ0hBTkdFRC50b1N0cmluZygpLCBjaGFuZ2VSZW5kZXJNb2RlKVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5SRU5ERVJfTU9ERV9DSEFOR0VELnRvU3RyaW5nKCksIGNoYW5nZVJlbmRlck1vZGUpXG4gICAgfVxuICB9LCBbXSlcblxuICBjb25zdCBvbkNoYW5nZVJlbmRlck1vZGUgPSB1c2VDYWxsYmFjaygobW9kZSkgPT4gU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnJlbmRlcmVyLmNoYW5nZVJlbmRlck1vZGUobW9kZSksIFtdKVxuICBjb25zdCBjaGFuZ2VSZW5kZXJNb2RlID0gdXNlQ2FsbGJhY2soKCkgPT4gc2V0UmVuZGVyTW9kZShTY2VuZU1hbmFnZXIuaW5zdGFuY2UucmVuZGVyZXIucmVuZGVyTW9kZSksIFtdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy50b29sYmFySW5wdXRHcm91cH0gaWQ9XCJ0cmFuc2Zvcm0tcGl2b3RcIj5cbiAgICAgIDxJbmZvVG9vbHRpcCBpbmZvPVwiUmVuZGVyIE1vZGVcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy50b29sSWNvbn0+XG4gICAgICAgICAgPFN1biBzaXplPXsxNn0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0luZm9Ub29sdGlwPlxuICAgICAgPFNlbGVjdElucHV0XG4gICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLnNlbGVjdElucHV0fVxuICAgICAgICBvbkNoYW5nZT17b25DaGFuZ2VSZW5kZXJNb2RlfVxuICAgICAgICBvcHRpb25zPXtvcHRpb25zfVxuICAgICAgICB2YWx1ZT17cmVuZGVyTW9kZX1cbiAgICAgICAgY3JlYXRhYmxlPXtmYWxzZX1cbiAgICAgICAgaXNTZWFyY2hhYmxlPXtmYWxzZX1cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVuZGVyTW9kZVRvb2xcbiIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBFZGl0b3JFdmVudHMgZnJvbSAnLi4vLi4vY29uc3RhbnRzL0VkaXRvckV2ZW50cydcbmltcG9ydCBNYWluTWVudSBmcm9tICcuLi9tYWluTWVudSdcbmltcG9ydCBHcmlkVG9vbCBmcm9tICcuL3Rvb2xzL0dyaWRUb29sJ1xuaW1wb3J0IHsgQ29tbWFuZE1hbmFnZXIgfSBmcm9tICcuLi8uLi9tYW5hZ2Vycy9Db21tYW5kTWFuYWdlcidcbmltcG9ydCAqIGFzIHN0eWxlcyBmcm9tICcuL3N0eWxlcy5tb2R1bGUuc2NzcydcbmltcG9ydCBUcmFuc2Zvcm1Ub29sIGZyb20gJy4vdG9vbHMvVHJhbnNmb3JtVG9vbCdcbmltcG9ydCBUcmFuc2Zvcm1QaXZvdFRvb2wgZnJvbSAnLi90b29scy9UcmFuc2Zvcm1QaXZvdFRvb2wnXG5pbXBvcnQgVHJhbnNmb3JtU3BhY2VUb29sIGZyb20gJy4vdG9vbHMvVHJhbnNmb3JtU3BhY2VUb29sJ1xuaW1wb3J0IFRyYW5zZm9ybVNuYXBUb29sIGZyb20gJy4vdG9vbHMvVHJhbnNmb3JtU25hcFRvb2wnXG5pbXBvcnQgUGxheU1vZGVUb29sIGZyb20gJy4vdG9vbHMvUGxheU1vZGVUb29sJ1xuaW1wb3J0IFN0YXRzVG9vbCBmcm9tICcuL3Rvb2xzL1N0YXRzVG9vbCdcbmltcG9ydCBSZW5kZXJNb2RlVG9vbCBmcm9tICcuL3Rvb2xzL1JlbmRlck1vZGVUb29sJ1xuXG50eXBlIFRvb2xCYXJQcm9wcyA9IHtcbiAgbWVudT86IGFueVxufVxuXG4vKipcbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbnR5cGUgVG9vbEJhclN0YXRlID0ge1xuICBlZGl0b3JJbml0aWFsaXplZDogYm9vbGVhblxufVxuXG4vKipcbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sQmFyIGV4dGVuZHMgQ29tcG9uZW50PFRvb2xCYXJQcm9wcywgVG9vbEJhclN0YXRlPiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgZWRpdG9ySW5pdGlhbGl6ZWQ6IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlJFTkRFUkVSX0lOSVRJQUxJWkVELnRvU3RyaW5nKCksIHRoaXMub25SZW5kZXJlckluaXRpYWxpemVkKVxuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmFkZExpc3RlbmVyKEVkaXRvckV2ZW50cy5TRVRUSU5HU19DSEFOR0VELnRvU3RyaW5nKCksIHRoaXMub25Gb3JjZVVwZGF0ZSlcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5TRVRUSU5HU19DSEFOR0VELnRvU3RyaW5nKCksIHRoaXMub25Gb3JjZVVwZGF0ZSlcbiAgfVxuXG4gIG9uUmVuZGVyZXJJbml0aWFsaXplZCA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgZWRpdG9ySW5pdGlhbGl6ZWQ6IHRydWUgfSlcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihFZGl0b3JFdmVudHMuUkVOREVSRVJfSU5JVElBTElaRUQudG9TdHJpbmcoKSwgdGhpcy5vblJlbmRlcmVySW5pdGlhbGl6ZWQpXG4gIH1cblxuICBvbkZvcmNlVXBkYXRlID0gKCkgPT4ge1xuICAgIHRoaXMuZm9yY2VVcGRhdGUoKVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgZWRpdG9ySW5pdGlhbGl6ZWQgfSA9IHRoaXMuc3RhdGUgYXMgYW55XG5cbiAgICBpZiAoIWVkaXRvckluaXRpYWxpemVkKSB7XG4gICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e3N0eWxlcy50b29sYmFyQ29udGFpbmVyfSAvPlxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnRvb2xiYXJDb250YWluZXJ9PlxuICAgICAgICA8TWFpbk1lbnUgY29tbWFuZHM9e3RoaXMucHJvcHMubWVudX0gLz5cbiAgICAgICAgPFRyYW5zZm9ybVRvb2wgLz5cbiAgICAgICAgPFRyYW5zZm9ybVNwYWNlVG9vbCAvPlxuICAgICAgICA8VHJhbnNmb3JtUGl2b3RUb29sIC8+XG4gICAgICAgIDxUcmFuc2Zvcm1TbmFwVG9vbCAvPlxuICAgICAgICA8R3JpZFRvb2wgLz5cbiAgICAgICAgPFJlbmRlck1vZGVUb29sIC8+XG4gICAgICAgIDxQbGF5TW9kZVRvb2wgLz5cbiAgICAgICAgPFN0YXRzVG9vbCAvPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRvb2xCYXJcbiIsImltcG9ydCB7IFRoZXJtb21ldGVyUXVhcnRlciB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvZmEtc29saWQnXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5cbi8qKlxuICogdGhlbWUgaXMgY29tbW9uIGNvbXBvbmVudCB1c2VkIGZvciBwcm92aWRpbmcgY29tbW9uIFVJIHByb3BlcnRpZXMuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge09iamVjdH1cbiAqL1xuY29uc3QgZWRpdG9yVGhlbWUgPSB7XG4gIGE6ICcnLFxuICBsYXRvOiBcIidMYXRvJywgc2Fucy1zZXJpZlwiLFxuICB6aWxsYTogXCInWmlsbGEgU2xhYicsIHNhbnMtc2VyaWZcIixcbiAgYmFja2dyb3VuZDogJ3JnYmEoMCwwLDAsMCknLFxuICBpbnB1dEJhY2tncm91bmQ6ICcjMDcwODA5JyxcbiAgYm9yZGVyOiAnIzVENjQ2QycsXG4gIHBhbmVsOiAnIzI4MkMzMScsXG4gIHBhbmVsMjogJyMzQTQwNDgnLFxuICBzZWxlY3RlZDogJyMwMDZFRkYnLFxuICBzZWxlY3RlZFRleHQ6ICcjZmZmJyxcbiAgaG92ZXI6ICcjNEI1NTYyJyxcbiAgaG92ZXIyOiAnIzYzNkY4MCcsXG4gIHRleHQ6ICcjRkZGRkZGJyxcbiAgdGV4dDI6ICcjOUZBNEI1JyxcbiAgZHJvcGRvd246ICcjMDAwMDAwJyxcbiAgcmVkOiAnI0Y0NDMzNicsXG4gIHBpbms6ICcjRTkxRTYzJyxcbiAgcHVycGxlOiAnIzlDMjdCMCcsXG4gIGRlZXBQdXJwbGU6ICcjNjczQUI3JyxcbiAgaW5kaWdvOiAnIzNGNTFCNScsXG4gIGJsdWU6ICcjMDA2RUZGJyxcbiAgbGlnaHRCbHVlOiAnIzAzQTlGNCcsXG4gIGN5YW46ICcjMDBCQ0Q0JyxcbiAgdGVhbDogJyMwMDk2ODgnLFxuICBncmVlbjogJyM0Q0FGNTAnLFxuICBsaWdodEdyZWVuOiAnIzhCQzM0QScsXG4gIGxpbWU6ICcjQ0REQzM5JyxcbiAgeWVsbG93OiAnI0ZGRUIzQicsXG4gIGFtYmVyOiAnI0ZGQzEwNycsXG4gIG9yYW5nZTogJyNGRjk4MDAnLFxuICBkZWVwT3JhbmdlOiAnI0ZGNTcyMicsXG4gIGJyb3duOiAnIzc5NTU0OCcsXG4gIGJsdWVIb3ZlcjogJyM0RDkzRjEnLFxuICBibHVlUHJlc3NlZDogJyMwNTU0QkMnLFxuICBkaXNhYmxlZDogJyMyMjIyMjInLFxuICBkaXNhYmxlZFRleHQ6ICdncmV5JyxcbiAgZGVlbXBoYXNpemVkOiAnZ3JleScsXG4gIHRvb2xiYXI6ICdyZ2JhKDAsIDAsIDAsIDAuMCknLFxuICB0b29sYmFyMjogJ3JnYmEoMCwgMCwgMCwgMC4wKScsXG4gIGhlYWRlcjogJyMxYjFiMWInLFxuICB3aGl0ZTogJyNmZmYnLFxuICBzaGFkb3cxNTogJzBweCA0cHggNHB4ICByZ2JhKDAsIDAsIDAsIDAuMTUpJyxcbiAgc2hhZG93MzA6ICcwcHggNHB4IDRweCAgcmdiYSgwLCAwLCAwLCAwLjMpJyxcbiAgYm9yZGVyU3R5bGU6ICcxcHggc29saWQgIzVENjQ2Qydcbn1cblxuLyoqXG4gKiB0aGVtZSBjcmVhdGluZyBjb2xvciBjaGFydCBmb3IgYXBwbGljYXRpb24uXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge09iamVjdH1cbiAqL1xuZWRpdG9yVGhlbWVbJ2NoYXJ0Q29sb3JzJ10gPSBbXG4gIGVkaXRvclRoZW1lLnJlZCxcbiAgZWRpdG9yVGhlbWUucGluayxcbiAgZWRpdG9yVGhlbWUucHVycGxlLFxuICBlZGl0b3JUaGVtZS5kZWVwUHVycGxlLFxuICBlZGl0b3JUaGVtZS5pbmRpZ28sXG4gIGVkaXRvclRoZW1lLmJsdWUsXG4gIGVkaXRvclRoZW1lLmxpZ2h0Qmx1ZSxcbiAgZWRpdG9yVGhlbWUuY3lhbixcbiAgZWRpdG9yVGhlbWUudGVhbCxcbiAgZWRpdG9yVGhlbWUuZ3JlZW4sXG4gIGVkaXRvclRoZW1lLmxpZ2h0R3JlZW4sXG4gIGVkaXRvclRoZW1lLmxpbWUsXG4gIGVkaXRvclRoZW1lLnllbGxvdyxcbiAgZWRpdG9yVGhlbWUuYW1iZXIsXG4gIGVkaXRvclRoZW1lLm9yYW5nZSxcbiAgZWRpdG9yVGhlbWUuZGVlcE9yYW5nZSxcbiAgZWRpdG9yVGhlbWUuYnJvd25cbl1cblxuZXhwb3J0IGNvbnN0IFRoZW1lQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoZWRpdG9yVGhlbWUpXG5cbmV4cG9ydCB0eXBlIEVkaXRvclRoZW1lID0gdHlwZW9mIGVkaXRvclRoZW1lXG5cbmV4cG9ydCBkZWZhdWx0IGVkaXRvclRoZW1lXG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlRHJvcCB9IGZyb20gJ3JlYWN0LWRuZCdcbmltcG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSAncmVhY3QtaTE4bmV4dCdcbmltcG9ydCB7IFRyYW5zZm9ybU1vZGUgfSBmcm9tICdAeHJlbmdpbmUvZW5naW5lL3NyYy9zY2VuZS9jb25zdGFudHMvdHJhbnNmb3JtQ29uc3RhbnRzJ1xuaW1wb3J0IEFzc2V0RHJvcFpvbmUgZnJvbSAnLi4vYXNzZXRzL0Fzc2V0RHJvcFpvbmUnXG5pbXBvcnQgeyBhZGRBc3NldEF0Q3Vyc29yUG9zaXRpb25PbkRyb3AgfSBmcm9tICcuLi9kbmQnXG5pbXBvcnQgKiBhcyBzdHlsZXMgZnJvbSAnLi9WaWV3cG9ydC5tb2R1bGUuc2NzcydcbmltcG9ydCBlZGl0b3JUaGVtZSBmcm9tICcuLi90aGVtZSdcbmltcG9ydCBFZGl0b3JFdmVudHMgZnJvbSAnLi4vLi4vY29uc3RhbnRzL0VkaXRvckV2ZW50cydcbmltcG9ydCB7IENvbW1hbmRNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vbWFuYWdlcnMvQ29tbWFuZE1hbmFnZXInXG5pbXBvcnQgeyBTY2VuZU1hbmFnZXIgfSBmcm9tICcuLi8uLi9tYW5hZ2Vycy9TY2VuZU1hbmFnZXInXG5pbXBvcnQgeyBDb250cm9sTWFuYWdlciB9IGZyb20gJy4uLy4uL21hbmFnZXJzL0NvbnRyb2xNYW5hZ2VyJ1xuaW1wb3J0IHsgQXNzZXRUeXBlcywgSXRlbVR5cGVzIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL0Fzc2V0VHlwZXMnXG5cbi8qKlxuICogVmlld3BvcnRQYW5lbENvbnRhaW5lciB1c2VkIHRvIHJlbmRlciB2aWV3cG9ydC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFZpZXdwb3J0UGFuZWxDb250YWluZXIoKSB7XG4gIGNvbnN0IGNhbnZhc1JlZiA9IHVzZVJlZjxIVE1MQ2FudmFzRWxlbWVudD4oKVxuICBjb25zdCBbZmx5TW9kZUVuYWJsZWQsIHNldEZseU1vZGVFbmFibGVkXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbb2JqZWN0U2VsZWN0ZWQsIHNldE9iamVjdFNlbGVjdGVkXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbdHJhbnNmb3JtTW9kZSwgc2V0VHJhbnNmb3JtTW9kZV0gPSB1c2VTdGF0ZShudWxsKVxuICAvLyBjb25zdCBbc2hvd1N0YXRzLCBzZXRTaG93U3RhdHNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCB7IHQgfSA9IHVzZVRyYW5zbGF0aW9uKClcblxuICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZWQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0T2JqZWN0U2VsZWN0ZWQoQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2VsZWN0ZWQubGVuZ3RoID4gMClcbiAgfSwgW10pXG5cbiAgY29uc3Qgb25GbHlNb2RlQ2hhbmdlZCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRGbHlNb2RlRW5hYmxlZChDb250cm9sTWFuYWdlci5pbnN0YW5jZS5mbHlDb250cm9scy5lbmFibGVkKVxuICB9LCBbXSlcblxuICBjb25zdCBvblRyYW5zZm9ybU1vZGVDaGFuZ2VkID0gdXNlQ2FsbGJhY2soKG1vZGUpID0+IHtcbiAgICBzZXRUcmFuc2Zvcm1Nb2RlKG1vZGUpXG4gIH0sIFtdKVxuXG4gIGNvbnN0IG9uRWRpdG9ySW5pdGlhbGl6ZWQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlNFTEVDVElPTl9DSEFOR0VELnRvU3RyaW5nKCksIG9uU2VsZWN0aW9uQ2hhbmdlZClcbiAgICBDb250cm9sTWFuYWdlci5pbnN0YW5jZS5lZGl0b3JDb250cm9scy5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuRkxZX01PREVfQ0hBTkdFRC50b1N0cmluZygpLCBvbkZseU1vZGVDaGFuZ2VkKVxuICAgIENvbnRyb2xNYW5hZ2VyLmluc3RhbmNlLmVkaXRvckNvbnRyb2xzLmFkZExpc3RlbmVyKFxuICAgICAgRWRpdG9yRXZlbnRzLlRSQU5TRlJPTV9NT0RFX0NIQU5HRUQudG9TdHJpbmcoKSxcbiAgICAgIG9uVHJhbnNmb3JtTW9kZUNoYW5nZWRcbiAgICApXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlJFTkRFUkVSX0lOSVRJQUxJWkVELnRvU3RyaW5nKCksIG9uRWRpdG9ySW5pdGlhbGl6ZWQpXG4gIH0sIFtdKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaW5pdFJlbmRlcmVyID0gKCkgPT4ge1xuICAgICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLmluaXRpYWxpemVSZW5kZXJlcihjYW52YXNSZWYuY3VycmVudClcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmFkZExpc3RlbmVyKEVkaXRvckV2ZW50cy5QUk9KRUNUX0xPQURFRC50b1N0cmluZygpLCBpbml0UmVuZGVyZXIpXG4gICAgfVxuXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlJFTkRFUkVSX0lOSVRJQUxJWkVELnRvU3RyaW5nKCksIG9uRWRpdG9ySW5pdGlhbGl6ZWQpXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlBST0pFQ1RfTE9BREVELnRvU3RyaW5nKCksIGluaXRSZW5kZXJlcilcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihFZGl0b3JFdmVudHMuU0VMRUNUSU9OX0NIQU5HRUQudG9TdHJpbmcoKSwgb25TZWxlY3Rpb25DaGFuZ2VkKVxuXG4gICAgICBpZiAoQ29udHJvbE1hbmFnZXIuaW5zdGFuY2UuZWRpdG9yQ29udHJvbHMpIHtcbiAgICAgICAgQ29udHJvbE1hbmFnZXIuaW5zdGFuY2UuZWRpdG9yQ29udHJvbHMucmVtb3ZlTGlzdGVuZXIoXG4gICAgICAgICAgRWRpdG9yRXZlbnRzLkZMWV9NT0RFX0NIQU5HRUQudG9TdHJpbmcoKSxcbiAgICAgICAgICBvbkZseU1vZGVDaGFuZ2VkXG4gICAgICAgIClcbiAgICAgICAgQ29udHJvbE1hbmFnZXIuaW5zdGFuY2UuZWRpdG9yQ29udHJvbHMucmVtb3ZlTGlzdGVuZXIoXG4gICAgICAgICAgRWRpdG9yRXZlbnRzLlRSQU5TRlJPTV9NT0RFX0NIQU5HRUQudG9TdHJpbmcoKSxcbiAgICAgICAgICBvblRyYW5zZm9ybU1vZGVDaGFuZ2VkXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgaWYgKFNjZW5lTWFuYWdlci5pbnN0YW5jZS5yZW5kZXJlcikge1xuICAgICAgICBTY2VuZU1hbmFnZXIuaW5zdGFuY2UucmVuZGVyZXIuZGlzcG9zZSgpXG4gICAgICB9XG4gICAgfVxuICB9LCBbXSlcblxuICBjb25zdCBbeyBjYW5Ecm9wLCBpc092ZXIgfSwgZHJvcFJlZl0gPSB1c2VEcm9wKHtcbiAgICBhY2NlcHQ6IFtJdGVtVHlwZXMuTm9kZSwgLi4uQXNzZXRUeXBlc10sXG4gICAgZHJvcChpdGVtOiBhbnksIG1vbml0b3IpIHtcbiAgICAgIGNvbnN0IG1vdXNlUG9zID0gbW9uaXRvci5nZXRDbGllbnRPZmZzZXQoKVxuXG4gICAgICBpZiAoaXRlbS50eXBlID09PSBJdGVtVHlwZXMuTm9kZSkge1xuICAgICAgICBpZiAoaXRlbS5tdWx0aXBsZSkge1xuICAgICAgICAgIFNjZW5lTWFuYWdlci5pbnN0YW5jZS5yZXBhcmVudFRvU2NlbmVBdEN1cnNvclBvc2l0aW9uKGl0ZW0udmFsdWUsIG1vdXNlUG9zKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIFNjZW5lTWFuYWdlci5pbnN0YW5jZS5yZXBhcmVudFRvU2NlbmVBdEN1cnNvclBvc2l0aW9uKFtpdGVtLnZhbHVlXSwgbW91c2VQb3MpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGFkZEFzc2V0QXRDdXJzb3JQb3NpdGlvbk9uRHJvcChpdGVtLCBtb3VzZVBvcylcbiAgICB9LFxuICAgIGNvbGxlY3Q6IChtb25pdG9yKSA9PiAoe1xuICAgICAgY2FuRHJvcDogbW9uaXRvci5jYW5Ecm9wKCksXG4gICAgICBpc092ZXI6IG1vbml0b3IuaXNPdmVyKClcbiAgICB9KVxuICB9KVxuXG4gIGNvbnN0IG9uQWZ0ZXJVcGxvYWRBc3NldHMgPSB1c2VDYWxsYmFjaygoYXNzZXRzKSA9PiB7XG4gICAgUHJvbWlzZS5hbGwoXG4gICAgICBhc3NldHMubWFwKCh7IHVybCwgbmFtZSwgaWQgfSkgPT4ge1xuICAgICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRNZWRpYSh7IHVybCwgbmFtZSwgaWQgfSlcbiAgICAgIH0pXG4gICAgKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5lbWl0RXZlbnQoRWRpdG9yRXZlbnRzLkVSUk9SLCBlcnIpXG4gICAgfSlcbiAgfSwgW10pXG5cbiAgbGV0IGNvbnRyb2xzVGV4dFxuXG4gIGlmIChmbHlNb2RlRW5hYmxlZCkge1xuICAgIGNvbnRyb2xzVGV4dCA9XG4gICAgICAnW1ddW0FdW1NdW0RdICcgKyB0KCdlZGl0b3I6dmlld3BvcnQuY29tbWFuZC5tb3ZlY2FtZXJhJykgKyAnIHwgW1NoaWZ0XSAnICsgdCgnZWRpdG9yOnZpZXdwb3J0LmNvbW1hbmQuZmx5RmFzdCcpXG4gIH0gZWxzZSB7XG4gICAgY29udHJvbHNUZXh0ID1cbiAgICAgICdbTE1CXSAnICtcbiAgICAgIHQoJ2VkaXRvcjp2aWV3cG9ydC5jb21tYW5kLm9yYml0JykgK1xuICAgICAgJyB8IFtNTUJdICcgK1xuICAgICAgdCgnZWRpdG9yOnZpZXdwb3J0LmNvbW1hbmQucGFuJykgK1xuICAgICAgJyB8IFtSTUJdICcgK1xuICAgICAgdCgnZWRpdG9yOnZpZXdwb3J0LmNvbW1hbmQuZmx5JylcbiAgfVxuXG4gIGlmIChvYmplY3RTZWxlY3RlZCkge1xuICAgIGNvbnRyb2xzVGV4dCArPVxuICAgICAgJyB8IFtGXSAnICtcbiAgICAgIHQoJ2VkaXRvcjp2aWV3cG9ydC5jb21tYW5kLmZvY3VzJykgK1xuICAgICAgJyB8IFtRXSAnICtcbiAgICAgIHQoJ2VkaXRvcjp2aWV3cG9ydC5jb21tYW5kLnJvdGF0ZUxlZnQnKSArXG4gICAgICAnIHwgW0VdICcgK1xuICAgICAgdCgnZWRpdG9yOnZpZXdwb3J0LmNvbW1hbmQucm90YXRlUmlnaHQnKVxuICB9XG5cbiAgaWYgKHRyYW5zZm9ybU1vZGUgPT09IFRyYW5zZm9ybU1vZGUuUGxhY2VtZW50KSB7XG4gICAgY29udHJvbHNUZXh0ICs9ICcgfCBbRVNDIC8gR10gJyArIHQoJ2VkaXRvcjp2aWV3cG9ydC5jb21tYW5kLmNhbmNlbFBsYWNlbWVudCcpXG4gIH0gZWxzZSBpZiAodHJhbnNmb3JtTW9kZSA9PT0gVHJhbnNmb3JtTW9kZS5HcmFiKSB7XG4gICAgY29udHJvbHNUZXh0ICs9XG4gICAgICAnIHwgW1NoaWZ0ICsgQ2xpY2tdICcgK1xuICAgICAgdCgnZWRpdG9yOnZpZXdwb3J0LmNvbW1hbmQucGxhY2VEdXBsaWNhdGUnKSArXG4gICAgICAnIHwgW0VTQyAvIEddICcgK1xuICAgICAgdCgnZWRpdG9yOnZpZXdwb3J0LmNvbW1hbmQuY2FuY2VsR3JhYicpXG4gIH0gZWxzZSBpZiAob2JqZWN0U2VsZWN0ZWQpIHtcbiAgICBjb250cm9sc1RleHQgKz1cbiAgICAgICd8IFtHXSAnICsgdCgnZWRpdG9yOnZpZXdwb3J0LmNvbW1hbmQuZ3JhYicpICsgJyB8IFtFU0NdICcgKyB0KCdlZGl0b3I6dmlld3BvcnQuY29tbWFuZC5kZXNlbGVjdEFsbCcpXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17c3R5bGVzLnZpZXdwb3J0Q29udGFpbmVyfVxuICAgICAgc3R5bGU9e3tcbiAgICAgICAgYm9yZGVyQ29sb3I6IGlzT3ZlciA/IChjYW5Ecm9wID8gZWRpdG9yVGhlbWUuYmx1ZSA6IGVkaXRvclRoZW1lLnJlZCkgOiAndHJhbnNwYXJlbnQnXG4gICAgICB9fVxuICAgICAgcmVmPXtkcm9wUmVmfVxuICAgID5cbiAgICAgIDxjYW52YXMgY2xhc3NOYW1lPXtzdHlsZXMudmlld3BvcnRDYW52YXN9IHJlZj17Y2FudmFzUmVmfSB0YWJJbmRleD17LTF9IGlkPVwidmlld3BvcnQtY2FudmFzXCIgLz5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuY29udHJvbHNUZXh0fT57Y29udHJvbHNUZXh0fTwvZGl2PlxuICAgICAgPEFzc2V0RHJvcFpvbmUgYWZ0ZXJVcGxvYWQ9e29uQWZ0ZXJVcGxvYWRBc3NldHN9IC8+XG4gICAgPC9kaXY+XG4gIClcbn1cbmV4cG9ydCBkZWZhdWx0IFZpZXdwb3J0UGFuZWxDb250YWluZXJcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgc3R5bGVkLCB7IFRoZW1lQ29udGV4dCB9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJ1xuaW1wb3J0IERpYWxvZyBmcm9tICcuL0RpYWxvZydcbmltcG9ydCB7IGJ5dGVzVG9TaXplIH0gZnJvbSAnLi4vLi4vZnVuY3Rpb25zL3V0aWxzJ1xuaW1wb3J0IGkxOG4gZnJvbSAnaTE4bmV4dCdcbmltcG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSAncmVhY3QtaTE4bmV4dCdcblxuLyoqXG4gKiBDb2xvcmVkVGV4dCB1c2VkIHRvIHByb3ZpZGUgY29sb3IgcHJvcGVydHkgRHluYW1pY2FsbHkuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IENvbG9yZWRUZXh0ID0gKHN0eWxlZCBhcyBhbnkpLnNwYW5gXG4gIGNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMuY29sb3J9O1xuYFxuXG4vKipcbiAqIFBlcmZvcm1hbmNlSXRlbUNvbnRhaW5lciB1c2VkIGFzIHdyYXBwZXIgZWxlbWVudCBmb3IgUGVyZm9ybWFuY2Ugc2NvcmUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IFBlcmZvcm1hbmNlSXRlbUNvbnRhaW5lciA9IChzdHlsZWQgYXMgYW55KS5saWBcbiAgZGlzcGxheTogZmxleDtcbiAgbWluLWhlaWdodDogMTAwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS50b29sYmFyfTtcbiAgYm9yZGVyOiAxcHggc29saWQgJHsocHJvcHMpID0+IHByb3BzLnRoZW1lLnBhbmVsfTtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBtYXJnaW46IDRweDtcbiAgY29sb3I6IHdoaXRlO1xuICBtYXgtd2lkdGg6IDU2MHB4O1xuXG4gICYgPiA6Zmlyc3QtY2hpbGQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHdpZHRoOiAxMDBweDtcbiAgfVxuXG4gICYgPiA6bGFzdC1jaGlsZCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGZsZXg6IDE7XG4gICAgcGFkZGluZzogMTJweDtcbiAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS5wYW5lbDJ9O1xuICB9XG5cbiAgaDUge1xuICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgfVxuXG4gIGg2IHtcbiAgICBmb250LXNpemU6IDE2cHg7XG4gIH1cblxuICBhIHtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIGNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMudGhlbWUuYmx1ZX07XG4gIH1cblxuICBwIHtcbiAgICBtYXJnaW46IDA7XG4gIH1cbmBcblxuLyoqXG4gKiBQZXJmb3JtYW5jZUNoZWNrSXRlbSB1c2VkIHRvIHJlbmRlciB2aWV3IGZvciBQZXJmb3JtYW5jZUNoZWNrRGlhbG9nLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAgICAgICB7U3RyaW5nfSBzY29yZVxuICogQHBhcmFtICAgICAgIHtTdHJpbmd9IHNjb3JlQ29sb3JcbiAqIEBwYXJhbSAgICAgICB7U3RyaW5nfSB0aXRsZVxuICogQHBhcmFtICAgICAgIHtTdHJpbmd9IGRlc2NyaXB0aW9uXG4gKiBAcGFyYW0gICAgICAge1N0cmluZ30gbGVhcm5Nb3JlVXJsXG4gKiBAcGFyYW0gICAgICAge25vZGV9IGNoaWxkcmVuXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gUGVyZm9ybWFuY2VDaGVja0l0ZW0oeyBzY29yZSwgc2NvcmVDb2xvciwgdGl0bGUsIGRlc2NyaXB0aW9uLCBsZWFybk1vcmVVcmwsIGNoaWxkcmVuIH0pIHtcbiAgY29uc3QgeyB0IH0gPSB1c2VUcmFuc2xhdGlvbigpXG4gIHJldHVybiAoXG4gICAgPFBlcmZvcm1hbmNlSXRlbUNvbnRhaW5lcj5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxDb2xvcmVkVGV4dCBhcz1cImg1XCIgY29sb3I9e3Njb3JlQ29sb3J9PlxuICAgICAgICAgIHtzY29yZX1cbiAgICAgICAgPC9Db2xvcmVkVGV4dD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdj5cbiAgICAgICAgPGg2PlxuICAgICAgICAgIHt0aXRsZX06IHtjaGlsZHJlbn1cbiAgICAgICAgPC9oNj5cbiAgICAgICAgPHA+XG4gICAgICAgICAge2Rlc2NyaXB0aW9ufXsnICd9XG4gICAgICAgICAgPGEgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9e2xlYXJuTW9yZVVybH0+XG4gICAgICAgICAgICB7dCgnZWRpdG9yOmRpYWxvZy5wZXJmb3JtYW5jZS5sZWFybk1vcmUnKX1cbiAgICAgICAgICA8L2E+XG4gICAgICAgIDwvcD5cbiAgICAgIDwvZGl2PlxuICAgIDwvUGVyZm9ybWFuY2VJdGVtQ29udGFpbmVyPlxuICApXG59XG5cbi8qKlxuICogaW5pdGlhbGl6aW5nIHNjb3JlVG9WYWx1ZSB3aXRoIG9iamVjdCBjb250YWluaW5nIExvdyBNZWRpdW0gSGlnaC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5jb25zdCBzY29yZVRvVmFsdWUgPSB7XG4gIExvdzogMCxcbiAgTWVkaXVtOiAxLFxuICBIaWdoOiAyXG59XG5cbi8qKlxuICogUGVyZm9ybWFuY2VDaGVja0RpYWxvZyB1c2VkIHJlbmRlciB2aWV3IGNvbnRhaW5pbmcgUGVyZm9ybWFuY2Ugc2NvcmVzLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAgICAgICB7U3RyaW5nfSBzY29yZXNcbiAqIEBwYXJhbSAgICAgICB7YW55fSByZXN0XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFBlcmZvcm1hbmNlQ2hlY2tEaWFsb2coeyBzY29yZXMsIC4uLnJlc3QgfSkge1xuICBjb25zdCB0aGVtZTogYW55ID0gdXNlQ29udGV4dChUaGVtZUNvbnRleHQpXG4gIGNvbnN0IHsgdCB9ID0gdXNlVHJhbnNsYXRpb24oKVxuXG4gIC8vaW5pdGlhbGl6aW5nIHNjb3JlVG9Db2xvciB1c2luZyB0aGVtZVxuICBjb25zdCBzY29yZVRvQ29sb3IgPSB7XG4gICAgTG93OiB0aGVtZS5ncmVlbixcbiAgICBNZWRpdW06IHRoZW1lLnllbGxvdyxcbiAgICBIaWdoOiB0aGVtZS5yZWRcbiAgfVxuXG4gIC8vIGluaXRpYWxpemluZyB0ZXh0dXJlc1Njb3JlIHVzaW5nIHNjb3Jlcy50ZXh0dXJlcy5sYXJnZVRleHR1cmVzU2NvcmUgaWYgc2NvcmVUb1ZhbHVlIGNvbnRhaW5zIHNjb3Jlcy50ZXh0dXJlcy5sYXJnZVRleHR1cmVzU2NvcmVcbiAgLy8gZWxzZSBzZXR0aW5nIHNjb3Jlcy50ZXh0dXJlcy5zY29yZVxuICBjb25zdCB0ZXh0dXJlc1Njb3JlID1cbiAgICBzY29yZVRvVmFsdWVbc2NvcmVzLnRleHR1cmVzLmxhcmdlVGV4dHVyZXNTY29yZV0gPiBzY29yZVRvVmFsdWVbc2NvcmVzLnRleHR1cmVzLnNjb3JlXVxuICAgICAgPyBzY29yZXMudGV4dHVyZXMubGFyZ2VUZXh0dXJlc1Njb3JlXG4gICAgICA6IHNjb3Jlcy50ZXh0dXJlcy5zY29yZVxuICAvLyByZXR1cmluZyB2aWV3IGNvbnRhaW5pbmcgUGVyZm9ybWFuY2VcbiAgcmV0dXJuIChcbiAgICA8RGlhbG9nIHsuLi5yZXN0fT5cbiAgICAgIDx1bD5cbiAgICAgICAgPFBlcmZvcm1hbmNlQ2hlY2tJdGVtXG4gICAgICAgICAgdGl0bGU9e3QoJ2VkaXRvcjpkaWFsb2cucGVyZm9ybWFuY2UubGJsLXBvbHljb3VudCcpfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdlZGl0b3I6ZGlhbG9nLnBlcmZvcm1hbmNlLmluZm8tcG9seWNvdW50Jyl9XG4gICAgICAgICAgbGVhcm5Nb3JlVXJsPVwiaHR0czovL3hyZW5naW5lLmRldi9kb2NzL2VkaXRvci1vcHRpbWl6YXRpb24uaHRtbFwiXG4gICAgICAgICAgc2NvcmU9e3Njb3Jlcy5wb2x5Z29ucy5zY29yZX1cbiAgICAgICAgICBzY29yZUNvbG9yPXtzY29yZVRvQ29sb3Jbc2NvcmVzLnBvbHlnb25zLnNjb3JlXX1cbiAgICAgICAgPlxuICAgICAgICAgIDxDb2xvcmVkVGV4dCBjb2xvcj17c2NvcmVUb0NvbG9yW3Njb3Jlcy5wb2x5Z29ucy5zY29yZV19PlxuICAgICAgICAgICAge3QoJ2VkaXRvcjpkaWFsb2cucGVyZm9ybWFuY2UudHh0LXBvbHljb3VudCcsIHsgY291bnQ6IHNjb3Jlcy5wb2x5Z29ucy52YWx1ZS50b0xvY2FsZVN0cmluZygpIH0pfVxuICAgICAgICAgIDwvQ29sb3JlZFRleHQ+XG4gICAgICAgIDwvUGVyZm9ybWFuY2VDaGVja0l0ZW0+XG4gICAgICAgIDxQZXJmb3JtYW5jZUNoZWNrSXRlbVxuICAgICAgICAgIHRpdGxlPXt0KCdlZGl0b3I6ZGlhbG9nLnBlcmZvcm1hbmNlLmxibC1tYXRlcmlhbCcpfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdlZGl0b3I6ZGlhbG9nLnBlcmZvcm1hbmNlLmluZm8tbWF0ZXJpYWwnKX1cbiAgICAgICAgICBsZWFybk1vcmVVcmw9XCJodHRzOi8veHJlbmdpbmUuZGV2L2RvY3MvZWRpdG9yLW9wdGltaXphdGlvbi5odG1sXCJcbiAgICAgICAgICBzY29yZT17c2NvcmVzLm1hdGVyaWFscy5zY29yZX1cbiAgICAgICAgICBzY29yZUNvbG9yPXtzY29yZVRvQ29sb3Jbc2NvcmVzLm1hdGVyaWFscy5zY29yZV19XG4gICAgICAgID5cbiAgICAgICAgICA8Q29sb3JlZFRleHQgY29sb3I9e3Njb3JlVG9Db2xvcltzY29yZXMubWF0ZXJpYWxzLnNjb3JlXX0+XG4gICAgICAgICAgICB7dCgnZWRpdG9yOmRpYWxvZy5wZXJmb3JtYW5jZS50eHQtbWF0ZXJpYWwnLCB7IGNvdW50OiBzY29yZXMubWF0ZXJpYWxzLnZhbHVlIH0pfVxuICAgICAgICAgIDwvQ29sb3JlZFRleHQ+XG4gICAgICAgIDwvUGVyZm9ybWFuY2VDaGVja0l0ZW0+XG4gICAgICAgIDxQZXJmb3JtYW5jZUNoZWNrSXRlbVxuICAgICAgICAgIHRpdGxlPXt0KCdlZGl0b3I6ZGlhbG9nLnBlcmZvcm1hbmNlLmxibC10ZXh0dXJlJyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoJ2VkaXRvcjpkaWFsb2cucGVyZm9ybWFuY2UuaW5mby10ZXh0dXJlJyl9XG4gICAgICAgICAgbGVhcm5Nb3JlVXJsPVwiaHR0czovL3hyZW5naW5lLmRldi9kb2NzL2VkaXRvci1vcHRpbWl6YXRpb24uaHRtbFwiXG4gICAgICAgICAgc2NvcmU9e3RleHR1cmVzU2NvcmV9XG4gICAgICAgICAgc2NvcmVDb2xvcj17c2NvcmVUb0NvbG9yW3RleHR1cmVzU2NvcmVdfVxuICAgICAgICA+XG4gICAgICAgICAgPENvbG9yZWRUZXh0IGNvbG9yPXtzY29yZVRvQ29sb3Jbc2NvcmVzLnRleHR1cmVzLnNjb3JlXX0+XG4gICAgICAgICAgICB7dCgnZWRpdG9yOmRpYWxvZy5wZXJmb3JtYW5jZS50eHQtcmFtJywgeyBjb3VudDogYnl0ZXNUb1NpemUoc2NvcmVzLnRleHR1cmVzLnZhbHVlKSBhcyBhbnkgfSl9XG4gICAgICAgICAgPC9Db2xvcmVkVGV4dD5cbiAgICAgICAgICAseycgJ31cbiAgICAgICAgICA8Q29sb3JlZFRleHQgY29sb3I9e3Njb3JlVG9Db2xvcltzY29yZXMudGV4dHVyZXMubGFyZ2VUZXh0dXJlc1Njb3JlXX0+XG4gICAgICAgICAgICB7dCgnZWRpdG9yOmRpYWxvZy5wZXJmb3JtYW5jZS50eHQtdGV4dHVyZScsIHsgY291bnQ6IHNjb3Jlcy50ZXh0dXJlcy5sYXJnZVRleHR1cmVzVmFsdWUgfSl9XG4gICAgICAgICAgPC9Db2xvcmVkVGV4dD5cbiAgICAgICAgPC9QZXJmb3JtYW5jZUNoZWNrSXRlbT5cbiAgICAgICAgPFBlcmZvcm1hbmNlQ2hlY2tJdGVtXG4gICAgICAgICAgdGl0bGU9e3QoJ2VkaXRvcjpkaWFsb2cucGVyZm9ybWFuY2UubGJsLWxpZ2h0cycpfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdlZGl0b3I6ZGlhbG9nLnBlcmZvcm1hbmNlLmluZm8tbGlnaHRzJyl9XG4gICAgICAgICAgbGVhcm5Nb3JlVXJsPVwiaHR0czovL3hyZW5naW5lLmRldi9kb2NzL2VkaXRvci1vcHRpbWl6YXRpb24uaHRtbFwiXG4gICAgICAgICAgc2NvcmU9e3Njb3Jlcy5saWdodHMuc2NvcmV9XG4gICAgICAgICAgc2NvcmVDb2xvcj17c2NvcmVUb0NvbG9yW3Njb3Jlcy5saWdodHMuc2NvcmVdfVxuICAgICAgICA+XG4gICAgICAgICAgPENvbG9yZWRUZXh0IGNvbG9yPXtzY29yZVRvQ29sb3Jbc2NvcmVzLmxpZ2h0cy5zY29yZV19PlxuICAgICAgICAgICAge3QoJ2VkaXRvcjpkaWFsb2cucGVyZm9ybWFuY2UudHh0LWxpZ2h0cycsIHsgY291bnQ6IHNjb3Jlcy5saWdodHMudmFsdWUgfSl9XG4gICAgICAgICAgPC9Db2xvcmVkVGV4dD5cbiAgICAgICAgPC9QZXJmb3JtYW5jZUNoZWNrSXRlbT5cbiAgICAgICAgPFBlcmZvcm1hbmNlQ2hlY2tJdGVtXG4gICAgICAgICAgdGl0bGU9e3QoJ2VkaXRvcjpkaWFsb2cucGVyZm9ybWFuY2UubGJsLWZpbGVTaXplJyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoJ2VkaXRvcjpkaWFsb2cucGVyZm9ybWFuY2UuaW5mby1maWxlU2l6ZScpfVxuICAgICAgICAgIGxlYXJuTW9yZVVybD1cImh0dHM6Ly94cmVuZ2luZS5kZXYvZG9jcy9lZGl0b3Itb3B0aW1pemF0aW9uLmh0bWxcIlxuICAgICAgICAgIHNjb3JlPXtzY29yZXMuZmlsZVNpemUuc2NvcmV9XG4gICAgICAgICAgc2NvcmVDb2xvcj17c2NvcmVUb0NvbG9yW3Njb3Jlcy5maWxlU2l6ZS5zY29yZV19XG4gICAgICAgID5cbiAgICAgICAgICA8Q29sb3JlZFRleHQgY29sb3I9e3Njb3JlVG9Db2xvcltzY29yZXMuZmlsZVNpemUuc2NvcmVdfT57Ynl0ZXNUb1NpemUoc2NvcmVzLmZpbGVTaXplLnZhbHVlKX08L0NvbG9yZWRUZXh0PlxuICAgICAgICA8L1BlcmZvcm1hbmNlQ2hlY2tJdGVtPlxuICAgICAgPC91bD5cbiAgICA8L0RpYWxvZz5cbiAgKVxufVxuXG5QZXJmb3JtYW5jZUNoZWNrRGlhbG9nLmRlZmF1bHRQcm9wcyA9IHtcbiAgdGFnOiAnZGl2JyxcbiAgdGl0bGU6IGkxOG4udCgnZWRpdG9yOmRpYWxvZy5wZXJmb3JtYW5jZS5pbmZvLWZpbGVTaXplJykgfHwgJ1BlcmZvcm1hbmNlIENoZWNrJyxcbiAgY29uZmlybUxhYmVsOiBpMThuLnQoJ2VkaXRvcjpkaWFsb2cucGVyZm9ybWFuY2UuaW5mby1maWxlU2l6ZScpIHx8ICdQdWJsaXNoIFNjZW5lJ1xufVxuXG5leHBvcnQgZGVmYXVsdCBQZXJmb3JtYW5jZUNoZWNrRGlhbG9nXG4iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB3aXRoVHJhbnNsYXRpb24gfSBmcm9tICdyZWFjdC1pMThuZXh0J1xuaW1wb3J0IEZvcm1GaWVsZCBmcm9tICcuLi9pbnB1dHMvRm9ybUZpZWxkJ1xuaW1wb3J0IFN0cmluZ0lucHV0IGZyb20gJy4uL2lucHV0cy9TdHJpbmdJbnB1dCdcbmltcG9ydCBQcmV2aWV3RGlhbG9nIGZyb20gJy4vUHJldmlld0RpYWxvZydcblxuLyoqXG4gKiBQdWJsaXNoRGlhbG9nIHVzZWQgdG8gc2hvdyB0aGUgZGlhbG9nIHdoZW4gd2UgYXJlIGdvaW5nIHRvIHB1Ymxpc2ggc2NlbmUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge2NsYXNzIGNvbXBvbmVudH1cbiAqL1xuZXhwb3J0IGNsYXNzIFB1Ymxpc2hEaWFsb2cgZXh0ZW5kcyBDb21wb25lbnQ8eyB0OiBGdW5jdGlvbiB9PiB7XG4gIC8vaW5pdGlhbGl6aW5nIHN0YXRlIHdoZW4gb2JqZWN0IG9mIGNsYXNzIGdldCBpbnZva2VkLlxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBuYW1lOiAnJyxcbiAgICAgIC4uLnByb3BzLmluaXRpYWxTY2VuZVBhcmFtc1xuICAgIH1cbiAgfVxuXG4gIC8vc2V0dGluZyBzdGF0ZSB3aGVuIHRoZXJlIGlzIGNoYW5nZSBpbiBuYW1lLlxuICBvbkNoYW5nZU5hbWUgPSAobmFtZSkgPT4gdGhpcy5zZXRTdGF0ZSh7IG5hbWUgfSlcblxuICAvL2Z1bmN0aW9uIHRvIGhhbmRsZSB0aGUgY29uZmlybWF0aW9uIG9mIHB1Ymxpc2hEaWFsb2dcbiAgb25Db25maXJtID0gKCkgPT4ge1xuICAgIGNvbnN0IHB1Ymxpc2hTdGF0ZSA9IHsgLi4udGhpcy5zdGF0ZSB9IGFzIGFueVxuICAgIHB1Ymxpc2hTdGF0ZS5uYW1lID0gcHVibGlzaFN0YXRlLm5hbWUudHJpbSgpXG4gICAgOyh0aGlzLnByb3BzIGFzIGFueSkub25QdWJsaXNoKHB1Ymxpc2hTdGF0ZSlcbiAgfVxuXG4gIC8vIGNyZWF0aW5nIGFuZCByZW5kZXJpbmcgUHJldmlld0RpYWxvZyB2aWV3LlxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBvbkNhbmNlbCwgc2NyZWVuc2hvdFVybCB9ID0gdGhpcy5wcm9wcyBhcyBhbnlcbiAgICBjb25zdCB7IG5hbWUgfSA9IHRoaXMuc3RhdGUgYXMgYW55XG4gICAgcmV0dXJuIChcbiAgICAgIDxQcmV2aWV3RGlhbG9nXG4gICAgICAgIGltYWdlU3JjPXtzY3JlZW5zaG90VXJsfVxuICAgICAgICB0aXRsZT17dGhpcy5wcm9wcy50KCdlZGl0b3I6ZGlhbG9nLnB1Ymxpc2gudGl0bGUnKX1cbiAgICAgICAgb25Db25maXJtPXt0aGlzLm9uQ29uZmlybX1cbiAgICAgICAgb25DYW5jZWw9e29uQ2FuY2VsfVxuICAgICAgICBjb25maXJtTGFiZWw9e3RoaXMucHJvcHMudCgnZWRpdG9yOmRpYWxvZy5wdWJsaXNoLmxibC1jb25maXJtJyl9XG4gICAgICA+XG4gICAgICAgIDxGb3JtRmllbGQ+XG4gICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJzY2VuZU5hbWVcIj57dGhpcy5wcm9wcy50KCdlZGl0b3I6ZGlhbG9nLnB1Ymxpc2gubGJsLW5hbWUnKX08L2xhYmVsPlxuICAgICAgICAgIDxTdHJpbmdJbnB1dFxuICAgICAgICAgICAgaWQ9XCJzY2VuZU5hbWVcIlxuICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgIHBhdHRlcm49eydbQS1aYS16MC05LVxcJzpcIiFAIyQlXiYqKCksLj9+IF17NCw2NH0nfVxuICAgICAgICAgICAgdGl0bGU9e3RoaXMucHJvcHMudCgnZWRpdG9yOmRpYWxvZy5wdWJsaXNoLmluZm8tbmFtZScpfVxuICAgICAgICAgICAgdmFsdWU9e25hbWV9XG4gICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZU5hbWV9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9Gb3JtRmllbGQ+XG4gICAgICA8L1ByZXZpZXdEaWFsb2c+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhUcmFuc2xhdGlvbigpKFB1Ymxpc2hEaWFsb2cpXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgUHJldmlld0RpYWxvZyBmcm9tICcuL1ByZXZpZXdEaWFsb2cnXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICcuLi9pbnB1dHMvQnV0dG9uJ1xuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tICdyZWFjdC1pMThuZXh0J1xuXG4vKipcbiAqIFB1Ymxpc2hlZFNjZW5lRGlhbG9nIHVzZWQgdG8gc2hvdyBkaWFsb2cgd2hlbiBzY2VuZSBnZXQgcHVibGlzaGVkLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAgICAgICB7ZnVuY3Rpb259IG9uQ2FuY2VsXG4gKiBAcGFyYW0gICAgICAge3N0cmluZ30gc2NlbmVOYW1lXG4gKiBAcGFyYW0gICAgICAge3N0cmluZ30gc2NlbmVVcmxcbiAqIEBwYXJhbSAgICAgICB7c3RyaW5nfSBzY3JlZW5zaG90VXJsXG4gKiBAcGFyYW0gICAgICAge2FueX0gcHJvcHNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgZnVuY3Rpb24gUHVibGlzaGVkU2NlbmVEaWFsb2coeyBvbkNhbmNlbCwgc2NlbmVOYW1lLCBzY2VuZVVybCwgc2NyZWVuc2hvdFVybCwgLi4ucHJvcHMgfSkge1xuICBjb25zdCB7IHQgfSA9IHVzZVRyYW5zbGF0aW9uKClcbiAgcmV0dXJuIChcbiAgICA8UHJldmlld0RpYWxvZyBpbWFnZVNyYz17c2NyZWVuc2hvdFVybH0gdGl0bGU9e3QoJ2VkaXRvcjpkaWFsb2cucHVibGlzaGVkLnRpdGxlJyl9IHsuLi5wcm9wc30+XG4gICAgICA8aDE+e3NjZW5lTmFtZX08L2gxPlxuICAgICAgPHA+e3QoJ2VkaXRvcjpkaWFsb2cucHVibGlzaGVkLmhlYWRlcicpfTwvcD5cbiAgICAgIDxCdXR0b24gYXM9XCJhXCIgaHJlZj17c2NlbmVVcmx9IHRhcmdldD1cIl9ibGFua1wiPlxuICAgICAgICB7dCgnZWRpdG9yOmRpYWxvZy5wdWJsaXNoZWQubGJsLXZpZXcnKX1cbiAgICAgIDwvQnV0dG9uPlxuICAgIDwvUHJldmlld0RpYWxvZz5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBQdWJsaXNoZWRTY2VuZURpYWxvZ1xuIiwiaW1wb3J0IHsgUHJvamVjdE1hbmFnZXIgfSBmcm9tICcuLi9tYW5hZ2Vycy9Qcm9qZWN0TWFuYWdlcidcblxuLyoqXG4gKiBnZXRVcmxGcm9tSWQgaXMgdXNlZCB0byBnZXQgdXJsIG9mIHRoZSBzdGF0aWMgcmVzb3VyY2UgZnJvbSBpdHMgSURcbiAqIEBhdXRob3IgQWJoaXNoZWsgUGF0aGFrXG4gKiBAcGFyYW0ge2FueX0gY29udGVudElEXG4gKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAqL1xuZXhwb3J0IGNvbnN0IGdldFVybEZyb21JZCA9IGFzeW5jIChjb250ZW50SUQpOiBQcm9taXNlPGFueT4gPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUHJvamVjdE1hbmFnZXIuaW5zdGFuY2UuZmVhdGhlcnNDbGllbnQuc2VydmljZSgnc3RhdGljLXJlc291cmNlLXVybCcpLmdldChjb250ZW50SUQpXG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coXCJDYW4ndCBnZXQgVVJMIGZyb20gaWRcIiArIGVycm9yKVxuICAgIHRocm93IG5ldyBFcnJvcihlcnJvcilcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBnZXQgVVJMIGZyb20gaWRcIilcbn1cbiIsImltcG9ydCB7IGZldGNoQ29udGVudFR5cGUgfSBmcm9tICcuL2ZldGNoQ29udGVudFR5cGUnXG5pbXBvcnQgeyBndWVzc0NvbnRlbnRUeXBlIH0gZnJvbSAnLi9ndWVzc0NvbnRlbnRUeXBlJ1xuXG4vKipcbiAqICBnZXRDb250ZW50VHlwZSBpcyB1c2VkIHRvIGdldCBjb250ZW50IHR5cGUgdXJsLlxuICogQGF1dGhvciBBYmhpc2hlayBQYXRoYWtcbiAqIEBwYXJhbSAge2FueX0gIGNvbnRlbnRVcmxcbiAqIEByZXR1cm4ge1Byb21pc2V9XG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDb250ZW50VHlwZSA9IGFzeW5jIChjb250ZW50VXJsKTogUHJvbWlzZTxhbnk+ID0+IHtcbiAgcmV0dXJuIGd1ZXNzQ29udGVudFR5cGUoY29udGVudFVybCkgfHwgKGF3YWl0IGZldGNoQ29udGVudFR5cGUoY29udGVudFVybCkpXG59XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBBc3NldHNQYW5lbENvbnRhaW5lciB9IGZyb20gJy4uL2xheW91dC9GbGV4J1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHN0eWxlcyBmcm9tICcuL3N0eWxlcy5tb2R1bGUuc2NzcydcbmltcG9ydCB7IHVzZUFzc2V0U2VhcmNoIH0gZnJvbSAnLi91c2VBc3NldFNlYXJjaCdcbmltcG9ydCB7IEFzc2V0UGFuZWxDb250ZW50Q29udGFpbmVyIH0gZnJvbSAnLi9Bc3NldHNQYW5lbCdcbmltcG9ydCBBc3NldEdyaWQgZnJvbSAnLi9Bc3NldEdyaWQnXG5pbXBvcnQgU2VsZWN0SW5wdXQgZnJvbSAnLi4vaW5wdXRzL1NlbGVjdElucHV0J1xuaW1wb3J0IElucHV0R3JvdXAgZnJvbSAnLi4vaW5wdXRzL0lucHV0R3JvdXAnXG5pbXBvcnQgeyBVcGxvYWRGaWxlVHlwZSB9IGZyb20gJy4vc291cmNlcy9NeUFzc2V0c1NvdXJjZSdcbmltcG9ydCB7IGdldFVybEZyb21JZCB9IGZyb20gJy4uLy4uL2Z1bmN0aW9ucy9nZXRVcmxGcm9tSWQnXG5pbXBvcnQgeyBnZXRDb250ZW50VHlwZSB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL3NjZW5lL2Z1bmN0aW9ucy9nZXRDb250ZW50VHlwZSdcbmltcG9ydCB7IE5vZGVNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vbWFuYWdlcnMvTm9kZU1hbmFnZXInXG5pbXBvcnQgRWRpdG9yRXZlbnRzIGZyb20gJy4uLy4uL2NvbnN0YW50cy9FZGl0b3JFdmVudHMnXG5pbXBvcnQgeyBTb3VyY2VNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vbWFuYWdlcnMvU291cmNlTWFuYWdlcidcbmltcG9ydCB7IENvbW1hbmRNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vbWFuYWdlcnMvQ29tbWFuZE1hbmFnZXInXG5pbXBvcnQgeyBQcm9qZWN0TWFuYWdlciB9IGZyb20gJy4uLy4uL21hbmFnZXJzL1Byb2plY3RNYW5hZ2VyJ1xuXG4vKipcbiAqIEZpbGVCcm93c2VyUGFuZWwgdXNlZCB0byByZW5kZXIgdmlldyBmb3IgQXNzZXRzUGFuZWwuXG4gKiBAYXV0aG9yIEFiaGlzaGVrIFBhdGhha1xuICogQGNvbnN0cnVjdG9yXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRmlsZUJyb3dzZXJDb250ZW50UGFuZWwoeyBvblNlbGVjdGlvbkNoYW5nZWQgfSkge1xuICAvL2luaXRpYWxpemluZyBzb3VyY2VzXG4gIGNvbnN0IFtzb3VyY2VzLCBzZXRTb3VyY2VzXSA9IHVzZVN0YXRlKFNvdXJjZU1hbmFnZXIuaW5zdGFuY2Uuc291cmNlcylcblxuICAvL2luaXRpYWxpemluZyBzZWxlY3RlZFNvdXJjZSBhcyB0aGUgZmlyc3QgZWxlbWVudCBvZiBzb3VyY2VzIGFycmF5XG4gIGNvbnN0IFtzZWxlY3RlZFNvdXJjZSwgc2V0U2VsZWN0ZWRTb3VyY2VdID0gdXNlU3RhdGUoc291cmNlcy5sZW5ndGggPiAwID8gc291cmNlc1sxXSA6IG51bGwpXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBmdW5jdGlvbiB0byBzZXQgc2VsZWN0ZWQgc291cmNlc1xuICAgIGNvbnN0IG9uU2V0U291cmNlID0gKHNvdXJjZUlkKSA9PiB7XG4gICAgICBzZXRTZWxlY3RlZFNvdXJjZShzb3VyY2VzLmZpbmQoKHMpID0+IHMuaWQgPT09IHNvdXJjZUlkKSlcbiAgICB9XG5cbiAgICAvLyBmdW5jdGlvbiB0byBoYW5kbGUgY2hhbmdlcyBpbiBhdXRoZW50aWNhdGlvblxuICAgIGNvbnN0IG9uU2V0dGluZ3NDaGFuZ2VkID0gKCkgPT4ge1xuICAgICAgY29uc3QgbmV4dFNvdXJjZXMgPSBTb3VyY2VNYW5hZ2VyLmluc3RhbmNlLnNvdXJjZXNcbiAgICAgIHNldFNvdXJjZXMobmV4dFNvdXJjZXMpXG4gICAgfVxuXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlNFVFRJTkdTX0NIQU5HRUQudG9TdHJpbmcoKSwgb25TZXR0aW5nc0NoYW5nZWQpXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlNPVVJDRV9DSEFOR0VELnRvU3RyaW5nKCksIG9uU2V0U291cmNlKVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5TT1VSQ0VfQ0hBTkdFRC50b1N0cmluZygpLCBvblNldFNvdXJjZSlcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5TRVRUSU5HU19DSEFOR0VELnRvU3RyaW5nKCksIG9uU2V0dGluZ3NDaGFuZ2VkKVxuICAgIH1cbiAgfSwgW3NldFNlbGVjdGVkU291cmNlLCBzb3VyY2VzLCBzZXRTb3VyY2VzLCBzZWxlY3RlZFNvdXJjZV0pXG5cbiAgY29uc3QgeyBsb2FkTW9yZSwgaGFzTW9yZSwgcmVzdWx0cyB9ID0gdXNlQXNzZXRTZWFyY2goc2VsZWN0ZWRTb3VyY2UpXG5cbiAgY29uc3QgY3VycmVudFByb2plY3QgPSB7XG4gICAgbmFtZTogJ0N1cnJlbnQnLFxuICAgIHNpZDogJycsXG4gICAgb3duZWRGaWxlSWRzOiB7fVxuICB9XG5cbiAgY29uc3QgcHJvamVjdHMgPSBbXVxuICBwcm9qZWN0cy5wdXNoKGN1cnJlbnRQcm9qZWN0KVxuICByZXN1bHRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICBwcm9qZWN0cy5wdXNoKGVsZW1lbnQucHJvamVjdClcbiAgfSlcblxuICBjb25zdCBvblNlbGVjdCA9IChwcm9wcykgPT4ge1xuICAgIG9uU2VsZWN0aW9uQ2hhbmdlZCh7IHJlc291cmNlVXJsOiBwcm9wcy5kZXNjcmlwdGlvbiwgbmFtZTogcHJvcHMuaWQsIGNvbnRlbnRUeXBlOiBwcm9wcy5jb250ZW50VHlwZSB9KVxuICB9XG5cbiAgY29uc3QgY3JlYXRlUHJvamVjdCA9IChwcm9qZWN0cykgPT4ge1xuICAgIGNvbnN0IHNlbGVjdFR5cGUgPSBbXVxuICAgIHByb2plY3RzLmZvckVhY2goKGVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoZWxlbWVudC5zaWQgIT09IGdsb2JhbFRoaXMuY3VycmVudFByb2plY3RJRClcbiAgICAgICAgc2VsZWN0VHlwZS5wdXNoKHtcbiAgICAgICAgICBsYWJlbDogZWxlbWVudC5uYW1lLFxuICAgICAgICAgIHZhbHVlOiBpbmRleFxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICByZXR1cm4gc2VsZWN0VHlwZVxuICB9XG4gIGNvbnN0IHByb2plY3RTZWxlY3RUeXBlcyA9IGNyZWF0ZVByb2plY3QocHJvamVjdHMpXG5cbiAgY29uc3QgW3NlbGVjdGVkUHJvamVjdEluZGV4LCBzZXRTZWxlY3RlZFByb2plY3RJbmRleF0gPSB1c2VTdGF0ZSgwKVxuXG4gIGNvbnN0IFtzZWxlY3RlZFByb2plY3RGaWxlcywgc2V0U2VsZWN0ZWRQcm9qZWN0RmlsZXNdID0gdXNlU3RhdGUoW10pXG5cbiAgY29uc3QgcHJvamVjdElEUmVmID0gdXNlUmVmKHNlbGVjdGVkUHJvamVjdEluZGV4KVxuXG4gIGNvbnN0IHJlbmRlclByb2plY3RGaWxlcyA9IGFzeW5jIChpbmRleCkgPT4ge1xuICAgIGNvbnN0IG93bmVkSWRzID0ge31cbiAgICBPYmplY3QuYXNzaWduKG93bmVkSWRzLCBQcm9qZWN0TWFuYWdlci5pbnN0YW5jZS5vd25lZEZpbGVJZHMpXG4gICAgT2JqZWN0LmFzc2lnbihvd25lZElkcywgUHJvamVjdE1hbmFnZXIuaW5zdGFuY2UuY3VycmVudE93bmVkRmlsZUlkcylcbiAgICBwcm9qZWN0c1swXS5vd25lZEZpbGVJZHMgPSBKU09OLnN0cmluZ2lmeShvd25lZElkcylcbiAgICBwcm9qZWN0c1swXS5zaWQgPSBnbG9iYWxUaGlzLmN1cnJlbnRQcm9qZWN0SURcbiAgICBjb25zdCBvd25lZEZpbGVJZHNTdHJpbmcgPSBwcm9qZWN0c1tpbmRleF0/Lm93bmVkRmlsZUlkc1xuICAgIGNvbnN0IG93bmVkRmlsZUlkcyA9ICEhb3duZWRGaWxlSWRzU3RyaW5nID8gSlNPTi5wYXJzZShvd25lZEZpbGVJZHNTdHJpbmcpIDoge31cbiAgICBjb25zdCByZXR1cm5pbmdPYmplY3RzID0gW11cbiAgICBmb3IgKGxldCBlbGVtZW50IG9mIE9iamVjdC5rZXlzKG93bmVkRmlsZUlkcykpIHtcbiAgICAgIGlmIChlbGVtZW50ICE9PSAndGh1bWJuYWlsT3duZWRGaWxlSWQnKSB7XG4gICAgICAgIGNvbnN0IGZpbGVJZCA9IG93bmVkRmlsZUlkc1tlbGVtZW50XVxuICAgICAgICBjb25zdCB7IHVybCB9ID0gYXdhaXQgZ2V0VXJsRnJvbUlkKGZpbGVJZClcbiAgICAgICAgaWYgKCF1cmwpIGNvbnRpbnVlXG4gICAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gYXdhaXQgZ2V0Q29udGVudFR5cGUobmV3IFVSTCh1cmwpKVxuICAgICAgICBjb25zdCBub2RlQ2xhc3MgPSBVcGxvYWRGaWxlVHlwZVtjb250ZW50VHlwZV1cbiAgICAgICAgY29uc3Qgbm9kZUVkaXRvciA9IE5vZGVNYW5hZ2VyLmluc3RhbmNlLmdldEVkaXRvckZyb21DbGFzcyhub2RlQ2xhc3MpXG4gICAgICAgIGNvbnN0IHJldHVybmluZ09iamVjdCA9IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogdXJsLFxuICAgICAgICAgIGZpbGVJZDogZmlsZUlkLFxuICAgICAgICAgIHByb2plY3RJZDogcHJvamVjdHNbaW5kZXhdLnNpZCxcbiAgICAgICAgICBpZDogZWxlbWVudCxcbiAgICAgICAgICBsYWJlbDogZWxlbWVudCxcbiAgICAgICAgICBub2RlQ2xhc3M6IG5vZGVDbGFzcyxcbiAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICB0eXBlOiAnRWxlbWVudCcsXG4gICAgICAgICAgY29udGVudFR5cGU6IGNvbnRlbnRUeXBlLFxuICAgICAgICAgIGluaXRpYWxQcm9wczogeyBzcmM6IG5ldyBVUkwodXJsKSB9LFxuICAgICAgICAgIGljb25Db21wb25lbnQ6IG5vZGVFZGl0b3IuV3JhcHBlZENvbXBvbmVudFxuICAgICAgICAgICAgPyBub2RlRWRpdG9yLldyYXBwZWRDb21wb25lbnQuaWNvbkNvbXBvbmVudFxuICAgICAgICAgICAgOiBub2RlRWRpdG9yLmljb25Db21wb25lbnRcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5pbmdPYmplY3RzLnB1c2gocmV0dXJuaW5nT2JqZWN0KVxuICAgICAgfVxuICAgIH1cbiAgICBzZXRTZWxlY3RlZFByb2plY3RGaWxlcyhyZXR1cm5pbmdPYmplY3RzKVxuICB9XG5cbiAgY29uc3Qgb25DaGFuZ2VTZWxlY3RlZFByb2plY3QgPSAoaW5kZXgpID0+IHtcbiAgICBwcm9qZWN0SURSZWYuY3VycmVudCA9IGluZGV4XG4gICAgc2V0U2VsZWN0ZWRQcm9qZWN0SW5kZXgoaW5kZXgpXG4gIH1cblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJlbmRlclByb2plY3RGaWxlcyhzZWxlY3RlZFByb2plY3RJbmRleClcbiAgfSwgW3NlbGVjdGVkUHJvamVjdEluZGV4XSlcblxuICBjb25zdCBvbkZpbGVVcGxvYWRlZCA9IChpbmRleCkgPT4ge1xuICAgIGlmIChwcm9qZWN0SURSZWYuY3VycmVudCA9PT0gMCkge1xuICAgICAgcmVuZGVyUHJvamVjdEZpbGVzKHNlbGVjdGVkUHJvamVjdEluZGV4KVxuICAgIH1cbiAgfVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLkZJTEVfVVBMT0FERUQudG9TdHJpbmcoKSwgb25GaWxlVXBsb2FkZWQpXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5GSUxFX1VQTE9BREVELnRvU3RyaW5nKCksIG9uRmlsZVVwbG9hZGVkKVxuICAgIH1cbiAgfSwgW10pXG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgey8qIEB0cy1pZ25vcmUgKi99XG4gICAgICA8SW5wdXRHcm91cCBuYW1lPVwiUHJvamVjdCBOYW1lXCIgbGFiZWw9XCJQcm9qZWN0IE5hbWVcIj5cbiAgICAgICAgey8qIEB0cy1pZ25vcmUgKi99XG4gICAgICAgIDxTZWxlY3RJbnB1dCBvcHRpb25zPXtwcm9qZWN0U2VsZWN0VHlwZXN9IG9uQ2hhbmdlPXtvbkNoYW5nZVNlbGVjdGVkUHJvamVjdH0gdmFsdWU9e3NlbGVjdGVkUHJvamVjdEluZGV4fSAvPlxuICAgICAgPC9JbnB1dEdyb3VwPlxuXG4gICAgICA8QXNzZXRzUGFuZWxDb250YWluZXIgaWQ9XCJmaWxlLWJyb3dzZXItcGFuZWxcIiBjbGFzc05hbWU9e3N0eWxlcy5hc3NldHNQYW5lbH0+XG4gICAgICAgIDxBc3NldFBhbmVsQ29udGVudENvbnRhaW5lcj5cbiAgICAgICAgICA8QXNzZXRHcmlkXG4gICAgICAgICAgICBzb3VyY2U9e3NlbGVjdGVkU291cmNlfVxuICAgICAgICAgICAgaXRlbXM9e3NlbGVjdGVkUHJvamVjdEZpbGVzfVxuICAgICAgICAgICAgb25Mb2FkTW9yZT17bG9hZE1vcmV9XG4gICAgICAgICAgICBoYXNNb3JlPXtoYXNNb3JlfVxuICAgICAgICAgICAgb25TZWxlY3Q9e29uU2VsZWN0fVxuICAgICAgICAgICAgaXNMb2FkaW5nPXtmYWxzZX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L0Fzc2V0UGFuZWxDb250ZW50Q29udGFpbmVyPlxuICAgICAgPC9Bc3NldHNQYW5lbENvbnRhaW5lcj5cbiAgICA8Lz5cbiAgKVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cydcblxuLyoqXG4gKiBAYXV0aG9yIEFiaGlzaGVrIFBhdGhha1xuICovXG5jb25zdCBBdWRpb1ByZXZpZXcgPSBzdHlsZWQuYXVkaW9gXG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICBtYXJnaW4tdG9wOjMwMHB4XG4gIG1heC13aWR0aDo1MDBweFxuYFxuXG4vKipcbiAqIEBhdXRob3IgQWJoaXNoZWsgUGF0aGFrIDxhYmhpLnBhdGhhazQwMUBnbWFpbC5jb20+XG4gKiBAcGFyYW0gcHJvcHNcbiAqIEByZXR1cm5zXG4gKi9cblxuZXhwb3J0IGNvbnN0IEF1ZGlvUHJldmlld1BhbmVsID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IHVybCA9IHByb3BzLnJlc291cmNlUHJvcHMucmVzb3VyY2VVcmxcblxuICByZXR1cm4gKFxuICAgIDxBdWRpb1ByZXZpZXcgc3JjPXt1cmx9IGNvbnRyb2xzPXt0cnVlfT5cbiAgICAgIFlvdXIgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgQXVkaW9cbiAgICA8L0F1ZGlvUHJldmlldz5cbiAgKVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cydcblxuLyoqXG4gKiBAYXV0aG9yIEFiaGlzaGVrIFBhdGhha1xuICovXG5jb25zdCBJbWFnZVByZXZpZXcgPSBzdHlsZWQuaW1nYFxuICBkaXNwbGF5OiBibG9jaztcbiAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gIG1hcmdpbi1yaWdodDogYXV0bztcbmBcblxuLyoqXG4gKiBAYXV0aG9yIEFiaGlzaGVrIFBhdGhhayA8YWJoaS5wYXRoYWs0MDFAZ21haWwuY29tPlxuICogQHBhcmFtIHByb3BzXG4gKi9cblxuZXhwb3J0IGNvbnN0IEltYWdlUHJldmlld1BhbmVsID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IHVybCA9IHByb3BzLnJlc291cmNlUHJvcHMucmVzb3VyY2VVcmxcbiAgcmV0dXJuIDxJbWFnZVByZXZpZXcgc3JjPXt1cmx9IC8+XG59XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IEFtYmllbnRMaWdodCwgQm94MywgUGVyc3BlY3RpdmVDYW1lcmEsIFNjZW5lLCBXZWJHTFJlbmRlcmVyIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBHTFRGTG9hZGVyIH0gZnJvbSAnQHhyZW5naW5lL2VuZ2luZS9zcmMvYXNzZXRzL2xvYWRlcnMvZ2x0Zi9HTFRGTG9hZGVyJ1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cydcbmltcG9ydCB7IFNjZW5lTWFuYWdlciB9IGZyb20gJy4uLy4uLy4uL21hbmFnZXJzL1NjZW5lTWFuYWdlcidcbmltcG9ydCB7IENvbnRyb2xNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vLi4vbWFuYWdlcnMvQ29udHJvbE1hbmFnZXInXG5pbXBvcnQgRWRpdG9yRXZlbnRzIGZyb20gJy4uLy4uLy4uL2NvbnN0YW50cy9FZGl0b3JFdmVudHMnXG5pbXBvcnQgeyBQcm9qZWN0TWFuYWdlciB9IGZyb20gJy4uLy4uLy4uL21hbmFnZXJzL1Byb2plY3RNYW5hZ2VyJ1xuaW1wb3J0IHsgQ29tbWFuZE1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9tYW5hZ2Vycy9Db21tYW5kTWFuYWdlcidcblxuLyoqXG4gKiBAYXV0aG9yIEFiaGlzaGVrIFBhdGhha1xuICovXG5cbmNvbnN0IE1vZGVsUHJldmlldyA9IChzdHlsZWQgYXMgYW55KS5jYW52YXNgXG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG5gXG5cbi8qKlxuICogQGF1dGhvciBBYmhpc2hlayBQYXRoYWsgPGFiaGkucGF0aGFrNDAxQGdtYWlsLmNvbT5cbiAqIEBwYXJhbSBwcm9wc1xuICogQHJldHVybnNcbiAqL1xuXG5leHBvcnQgY29uc3QgTW9kZWxQcmV2aWV3UGFuZWwgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgdXJsID0gcHJvcHMucmVzb3VyY2VQcm9wcy5yZXNvdXJjZVVybFxuICBjb25zdCBhc3Nlc3RQYW5lbFJlZiA9IFJlYWN0LmNyZWF0ZVJlZjxIVE1MQ2FudmFzRWxlbWVudD4oKVxuXG4gIGNvbnN0IHNjZW5lID0gbmV3IFNjZW5lKClcbiAgY29uc3QgY2FtZXJhID0gbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKDc1KVxuICAvLyBjb25zdCBlZGl0b3IgPSBuZXcgRWRpdG9yKG51bGwsIHsgY2FtZXJhLCBzY2VuZSB9KVxuXG4gIGNvbnN0IFtmbHlNb2RlRW5hYmxlZCwgc2V0Rmx5TW9kZUVuYWJsZWRdID0gdXNlU3RhdGUoZmFsc2UpXG5cbiAgY29uc3QgcmVuZGVyU2NlbmUgPSAoKSA9PiB7XG4gICAgY29uc3QgY2FudmFzID0gYXNzZXN0UGFuZWxSZWYuY3VycmVudCBhcyBhbnlcbiAgICBjb25zdCByZW5kZXJlciA9IG5ldyBXZWJHTFJlbmRlcmVyKHtcbiAgICAgIGNhbnZhczogY2FudmFzXG4gICAgfSlcblxuICAgIHJlbmRlcmVyLnNldFNpemUoY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxuXG4gICAgY29uc3QgbGlnaHQgPSBuZXcgQW1iaWVudExpZ2h0KDB4NDA0MDQwKVxuICAgIHNjZW5lLmFkZChsaWdodClcblxuICAgIGNhbWVyYS5hc3BlY3QgPSBjYW52YXMud2lkdGggLyBjYW52YXMud2lkdGhcbiAgICBzY2VuZS5hZGQoY2FtZXJhKVxuICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKVxuXG4gICAgbmV3IEdMVEZMb2FkZXIoKS5sb2FkKFxuICAgICAgdXJsLFxuICAgICAgKGdsdGYpID0+IHtcbiAgICAgICAgc2NlbmUuYWRkKGdsdGYuc2NlbmUpXG4gICAgICAgIGNvbnN0IGJib3ggPSBuZXcgQm94MygpLnNldEZyb21PYmplY3QoZ2x0Zi5zY2VuZSlcbiAgICAgICAgYmJveC5nZXRDZW50ZXIoY2FtZXJhLnBvc2l0aW9uKVxuICAgICAgICBjYW1lcmEucG9zaXRpb24ueiA9IGJib3gubWF4LnogKyAxXG4gICAgICB9LFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgTG9hZGluZyBHTFRGIEZyb20gVVJsJylcbiAgICAgIH1cbiAgICApXG4gIH1cblxuICBjb25zdCBvbkZseU1vZGVDaGFuZ2VkID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldEZseU1vZGVFbmFibGVkKENvbnRyb2xNYW5hZ2VyLmluc3RhbmNlLmZseUNvbnRyb2xzLmVuYWJsZWQpXG4gIH0sIFtzZXRGbHlNb2RlRW5hYmxlZF0pXG5cbiAgY29uc3Qgb25FZGl0b3JJbml0aWFsaXplZCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBDb250cm9sTWFuYWdlci5pbnN0YW5jZS5lZGl0b3JDb250cm9scy5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuRkxZX01PREVfQ0hBTkdFRC50b1N0cmluZygpLCBvbkZseU1vZGVDaGFuZ2VkKVxuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5SRU5ERVJFUl9JTklUSUFMSVpFRC50b1N0cmluZygpLCBvbkVkaXRvckluaXRpYWxpemVkKVxuICB9LCBbb25GbHlNb2RlQ2hhbmdlZF0pXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuUkVOREVSRVJfSU5JVElBTElaRUQudG9TdHJpbmcoKSwgb25FZGl0b3JJbml0aWFsaXplZClcbiAgICBQcm9qZWN0TWFuYWdlci5pbnN0YW5jZS5pbml0KClcbiAgICBTY2VuZU1hbmFnZXIuaW5zdGFuY2UuaW5pdGlhbGl6ZVJlbmRlcmVyKGFzc2VzdFBhbmVsUmVmLmN1cnJlbnQpXG4gICAgcmVuZGVyU2NlbmUoKVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoQ29udHJvbE1hbmFnZXIuaW5zdGFuY2UuZWRpdG9yQ29udHJvbHMpIHtcbiAgICAgICAgQ29udHJvbE1hbmFnZXIuaW5zdGFuY2UuZWRpdG9yQ29udHJvbHMucmVtb3ZlTGlzdGVuZXIoXG4gICAgICAgICAgRWRpdG9yRXZlbnRzLkZMWV9NT0RFX0NIQU5HRUQudG9TdHJpbmcoKSxcbiAgICAgICAgICBvbkZseU1vZGVDaGFuZ2VkXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChTY2VuZU1hbmFnZXIuaW5zdGFuY2UucmVuZGVyZXIpIHtcbiAgICAgICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnJlbmRlcmVyLmRpc3Bvc2UoKVxuICAgICAgfVxuICAgICAgUHJvamVjdE1hbmFnZXIuaW5zdGFuY2UuZGlzcG9zZSgpXG4gICAgfVxuICB9LCBbXSlcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8ZGl2PlxuICAgICAgICA8TW9kZWxQcmV2aWV3IHJlZj17YXNzZXN0UGFuZWxSZWZ9IC8+XG4gICAgICA8L2Rpdj5cbiAgICA8Lz5cbiAgKVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuXG4vKipcbiAqIEBhdXRob3IgQWJoaXNoZWsgUGF0aGFrIDxhYmhpLnBhdGhhazQwMUBnbWFpbC5jb20+XG4gKiBAcGFyYW0gcHJvcHNcbiAqIEByZXR1cm5zXG4gKi9cblxuZXhwb3J0IGNvbnN0IFByZXZpZXdVbmF2YWlsYWJsZSA9IChwcm9wcykgPT4ge1xuICBjb25zdCB1cmwgPSBwcm9wcy5yZXNvdXJjZVByb3BzLnJlc291cmNlVXJsXG5cbiAgcmV0dXJuIDxkaXY+UHJldmlldyBvZiB0aGlzIEFzc2V0IGlzIHVuYXZhaWxhYmxlPC9kaXY+XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJ1xuXG4vKipcbiAqIEBhdXRob3IgQWJoaXNoZWsgUGF0aGFrXG4gKi9cbmNvbnN0IFZlZGlvUHJldmlldyA9IHN0eWxlZC52aWRlb2BcbiAgZGlzcGxheTogYmxvY2s7XG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gIG1heC13aWR0aDogNTAwcHg7XG5gXG5cbi8qKlxuICogQGF1dGhvciBBYmhpc2hlayBQYXRoYWsgPGFiaGkucGF0aGFrNDAxQGdtYWlsLmNvbT5cbiAqIEBwYXJhbSBwcm9wc1xuICogQHJldHVybnNcbiAqL1xuXG5leHBvcnQgY29uc3QgVmVkaW9QcmV2aWV3UGFuZWwgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgdXJsID0gcHJvcHMucmVzb3VyY2VQcm9wcy5yZXNvdXJjZVVybFxuXG4gIHJldHVybiAoXG4gICAgPFZlZGlvUHJldmlldyBzcmM9e3VybH0gY29udHJvbHM9e3RydWV9PlxuICAgICAgWW91ciBCcm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBWaWRlb1xuICAgIDwvVmVkaW9QcmV2aWV3PlxuICApXG59XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlSW1wZXJhdGl2ZUhhbmRsZSwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnXG5pbXBvcnQgeyBBdWRpb1ByZXZpZXdQYW5lbCB9IGZyb20gJy4vQXNzZXRQcmV2aWV3UGFuZWxzL0F1ZGlvUHJldmlld1BhbmVsJ1xuaW1wb3J0IHsgSW1hZ2VQcmV2aWV3UGFuZWwgfSBmcm9tICcuL0Fzc2V0UHJldmlld1BhbmVscy9JbWFnZVByZXZpZXdQYW5lbCdcbmltcG9ydCB7IE1vZGVsUHJldmlld1BhbmVsIH0gZnJvbSAnLi9Bc3NldFByZXZpZXdQYW5lbHMvTW9kZWxQcmV2aWV3UGFuZWwnXG5pbXBvcnQgeyBQcmV2aWV3VW5hdmFpbGFibGUgfSBmcm9tICcuL0Fzc2V0UHJldmlld1BhbmVscy9QcmV2aWV3VW5hdmFpbGFibGUnXG5pbXBvcnQgeyBWZWRpb1ByZXZpZXdQYW5lbCB9IGZyb20gJy4vQXNzZXRQcmV2aWV3UGFuZWxzL1ZlZGlvUHJldmlld1BhbmVsJ1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIEFiaGlzaGVrIFBhdGhha1xuICovXG5cbmNvbnN0IEFzc2V0SGVhZGluZyA9IHN0eWxlZC5kaXZgXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgZm9udC1zaXplOiAxNTAlO1xuICBwYWRkaW5nLWJvdHRvbTogMjBweDtcbmBcblxuLyoqXG4gKiBVc2VkIHRvIHNlZSB0aGUgUHJldmlldyBvZiB0aGUgQXNzZXQgaW4gdGhlIEZpbGVCcm93c2VyIFBhbmVsXG4gKlxuICogQGF1dGhvciBBYmhpc2hlayBQYXRoYWsgPGFiaGkucGF0aGFrNDAxQGdtYWlsLmNvbT5cbiAqL1xuXG5leHBvcnQgY29uc3QgQXNzZXRzUHJldmlld1BhbmVsID0gUmVhY3QuZm9yd2FyZFJlZigocHJvcHMsIHJlZikgPT4ge1xuICB1c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgKCkgPT4gKHsgb25MYXlvdXRDaGFuZ2VkLCBvblNlbGVjdGlvbkNoYW5nZWQgfSkpXG4gIGNvbnN0IFtsYXlvdXRTdGF0ZUNoYW5nZWQsIHVzZUxheW91dFN0YXRlQ2hhbmdlZF0gPSB1c2VTdGF0ZSgwKVxuICBjb25zdCBbcHJldmlld1BhbmVsLCB1c2VQcmV2aWV3UGFuZWxdID0gdXNlU3RhdGUoe1xuICAgIFByZXZpZXdTb3VyY2U6IG51bGwsXG4gICAgcmVzb3VyY2VQcm9wczogeyByZXNvdXJjZVVybDogJycsIG5hbWU6ICcnIH1cbiAgfSlcblxuICBjb25zdCBvbkxheW91dENoYW5nZWQgPSAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ0xheW91dCBpcyBDaGFuZ2VkOicpXG4gIH1cblxuICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZWQgPSAocHJvcHMpID0+IHtcbiAgICByZW5kZXJQcmV2aWV3KHByb3BzKVxuICB9XG5cbiAgY29uc3QgcmVuZGVyUHJldmlldyA9IChwcm9wcykgPT4ge1xuICAgIHN3aXRjaCAocHJvcHMuY29udGVudFR5cGUpIHtcbiAgICAgIGNhc2UgJ21vZGVsL2dsdGYnOlxuICAgICAgY2FzZSAnbW9kZWwvZ2x0Zi1iaW5hcnknOlxuICAgICAgICBjb25zdCBtb2RlbFByZXZpZXdQYW5lbCA9IHtcbiAgICAgICAgICBQcmV2aWV3U291cmNlOiBNb2RlbFByZXZpZXdQYW5lbCxcbiAgICAgICAgICByZXNvdXJjZVByb3BzOiB7IHJlc291cmNlVXJsOiBwcm9wcy5yZXNvdXJjZVVybCwgbmFtZTogcHJvcHMubmFtZSB9XG4gICAgICAgIH1cbiAgICAgICAgdXNlUHJldmlld1BhbmVsKG1vZGVsUHJldmlld1BhbmVsKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnaW1hZ2UvcG5nJzpcbiAgICAgIGNhc2UgJ2ltYWdlL2pwZWcnOlxuICAgICAgICBjb25zdCBpbWFnZVByZXZpZXdQYW5lbCA9IHtcbiAgICAgICAgICBQcmV2aWV3U291cmNlOiBJbWFnZVByZXZpZXdQYW5lbCxcbiAgICAgICAgICByZXNvdXJjZVByb3BzOiB7IHJlc291cmNlVXJsOiBwcm9wcy5yZXNvdXJjZVVybCwgbmFtZTogcHJvcHMubmFtZSB9XG4gICAgICAgIH1cbiAgICAgICAgdXNlUHJldmlld1BhbmVsKGltYWdlUHJldmlld1BhbmVsKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICd2aWRlby9tcDQnOlxuICAgICAgICBjb25zdCB2ZWRpb1ByZXZpZXdQYW5lbCA9IHtcbiAgICAgICAgICBQcmV2aWV3U291cmNlOiBWZWRpb1ByZXZpZXdQYW5lbCxcbiAgICAgICAgICByZXNvdXJjZVByb3BzOiB7IHJlc291cmNlVXJsOiBwcm9wcy5yZXNvdXJjZVVybCwgbmFtZTogcHJvcHMubmFtZSB9XG4gICAgICAgIH1cbiAgICAgICAgdXNlUHJldmlld1BhbmVsKHZlZGlvUHJldmlld1BhbmVsKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnYXVkaW8vbXBlZyc6XG4gICAgICAgIGNvbnN0IGF1ZGlvUHJldmlld1BhbmVsID0ge1xuICAgICAgICAgIFByZXZpZXdTb3VyY2U6IEF1ZGlvUHJldmlld1BhbmVsLFxuICAgICAgICAgIHJlc291cmNlUHJvcHM6IHsgcmVzb3VyY2VVcmw6IHByb3BzLnJlc291cmNlVXJsLCBuYW1lOiBwcm9wcy5uYW1lIH1cbiAgICAgICAgfVxuICAgICAgICB1c2VQcmV2aWV3UGFuZWwoYXVkaW9QcmV2aWV3UGFuZWwpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnN0IHVuYXZhaWxhYmxlID0ge1xuICAgICAgICAgIFByZXZpZXdTb3VyY2U6IFByZXZpZXdVbmF2YWlsYWJsZSxcbiAgICAgICAgICByZXNvdXJjZVByb3BzOiB7IHJlc291cmNlVXJsOiBwcm9wcy5yZXNvdXJjZVVybCwgbmFtZTogcHJvcHMubmFtZSB9XG4gICAgICAgIH1cbiAgICAgICAgdXNlUHJldmlld1BhbmVsKHVuYXZhaWxhYmxlKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxBc3NldEhlYWRpbmc+e3ByZXZpZXdQYW5lbC5yZXNvdXJjZVByb3BzLm5hbWV9PC9Bc3NldEhlYWRpbmc+XG4gICAgICA8L2Rpdj5cbiAgICAgIHtwcmV2aWV3UGFuZWwuUHJldmlld1NvdXJjZSAmJiA8cHJldmlld1BhbmVsLlByZXZpZXdTb3VyY2UgcmVzb3VyY2VQcm9wcz17cHJldmlld1BhbmVsLnJlc291cmNlUHJvcHN9IC8+fVxuICAgIDwvPlxuICApXG59KVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IERvY2tMYXlvdXQsIHsgRG9ja01vZGUgfSBmcm9tICdyYy1kb2NrJ1xuaW1wb3J0IEZpbGVCcm93c2VyQ29udGVudFBhbmVsIGZyb20gJy4vRmlsZUJyb3dzZXJDb250ZW50UGFuZWwnXG5pbXBvcnQgeyBBc3NldHNQcmV2aWV3UGFuZWwgfSBmcm9tICcuL0Fzc2V0c1ByZXZpZXdQYW5lbCdcblxuLyoqXG4gKiBGaWxlQnJvd3NlclBhbmVsIHVzZWQgdG8gcmVuZGVyIHZpZXcgZm9yIEFzc2V0c1BhbmVsLlxuICogQGF1dGhvciBBYmhpc2hlayBQYXRoYWtcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEZpbGVCcm93c2VyUGFuZWwoKSB7XG4gIGNvbnN0IGFzc2V0c1ByZXZpZXdQYW5lbFJlZiA9IFJlYWN0LnVzZVJlZigpXG5cbiAgY29uc3Qgb25MYXlvdXRDaGFuZ2VkQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgOyhhc3NldHNQcmV2aWV3UGFuZWxSZWYgYXMgYW55KS5jdXJyZW50Py5vbkxheW91dENoYW5nZWQ/LigpXG4gIH1cblxuICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZWQgPSAocHJvcHMpID0+IHtcbiAgICA7KGFzc2V0c1ByZXZpZXdQYW5lbFJlZiBhcyBhbnkpLmN1cnJlbnQ/Lm9uU2VsZWN0aW9uQ2hhbmdlZD8uKHByb3BzKVxuICB9XG5cbiAgbGV0IGRlZmF1bHRMYXlvdXQgPSB7XG4gICAgZG9ja2JveDoge1xuICAgICAgbW9kZTogJ3ZlcnRpY2FsJyBhcyBEb2NrTW9kZSxcbiAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBzaXplOiA1LFxuICAgICAgICAgIHRhYnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdwcm9qZWN0RmlsZXNQYW5lbCcsXG4gICAgICAgICAgICAgIHRpdGxlOiAnUHJvamVjdCBGaWxlcycsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IDxGaWxlQnJvd3NlckNvbnRlbnRQYW5lbCBvblNlbGVjdGlvbkNoYW5nZWQ9e29uU2VsZWN0aW9uQ2hhbmdlZH0gLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBzaXplOiA1LFxuICAgICAgICAgIHRhYnM6IFt7IGlkOiAncHJldmlld1BhbmVsJywgdGl0bGU6ICdQcmV2aWV3JywgY29udGVudDogPEFzc2V0c1ByZXZpZXdQYW5lbCByZWY9e2Fzc2V0c1ByZXZpZXdQYW5lbFJlZn0gLz4gfV1cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxEb2NrTGF5b3V0XG4gICAgICAgIGRlZmF1bHRMYXlvdXQ9e2RlZmF1bHRMYXlvdXR9XG4gICAgICAgIHN0eWxlPXt7IHBvaW50ZXJFdmVudHM6ICdub25lJywgcG9zaXRpb246ICdhYnNvbHV0ZScsIGxlZnQ6IDAsIHRvcDogNSwgcmlnaHQ6IDUsIGJvdHRvbTogNSB9fVxuICAgICAgICBvbkxheW91dENoYW5nZT17b25MYXlvdXRDaGFuZ2VkQ2FsbGJhY2t9XG4gICAgICAvPlxuICAgIDwvPlxuICApXG59XG4iLCJpbXBvcnQgeyBDb25maWcgfSBmcm9tICdAeHJlbmdpbmUvY29tbW9uL3NyYy9jb25maWcnXG5cbi8qKlxuICogUmVhZCBjb25maWdzIGZyb20gbWV0YSB0YWdzIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZSB0aGUgcHJvY2Vzcy5lbnYgaW5qZWN0ZWQgZnJvbSBidWlsZC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAcGFyYW0gIChPYmplY3QpIFByb3ZpZGVzIGFwcGxjYXRpb24gY29uZmlncy5cbiAqL1xuY29uc3QgY29uZmlncyA9IHtcbiAgbmFtZTogKCk6IHN0cmluZyA9PiAnU2NlbmUgRWRpdG9yJyxcbiAgbG9uZ05hbWU6ICgpOiBzdHJpbmcgPT4gJ1NjZW5lIEVkaXRvcicsXG4gIFNFUlZFUl9VUkw6IENvbmZpZy5wdWJsaWNSdW50aW1lQ29uZmlnLmFwaVNlcnZlcixcbiAgQVBQX1VSTDogQ29uZmlnLnB1YmxpY1J1bnRpbWVDb25maWcuYXBwU2VydmVyLFxuICBGRUFUSEVSU19TVE9SRV9LRVk6IENvbmZpZy5wdWJsaWNSdW50aW1lQ29uZmlnLmZlYXRoZXJzU3RvcmVLZXksXG4gIFJPT1RfUkVESVJFQ1Q6IENvbmZpZy5wdWJsaWNSdW50aW1lQ29uZmlnLnJvb3RSZWRpcmVjdFxufVxuXG5leHBvcnQgZGVmYXVsdCBjb25maWdzXG4iLCJpbXBvcnQgeyBBcmNoaXZlLCBQcm9qZWN0RGlhZ3JhbSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvZmEtc29saWQnXG5pbXBvcnQgeyB3aXRoUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSdcbmltcG9ydCB7IFNsaWRlcnNIIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9TbGlkZXJzSCdcbmltcG9ydCB7IExvY2F0aW9uU2VydmljZSB9IGZyb20gJ0B4cmVuZ2luZS9jbGllbnQtY29yZS9zcmMvYWRtaW4vcmVkdWNlcnMvYWRtaW4vbG9jYXRpb24vTG9jYXRpb25TZXJ2aWNlJ1xuaW1wb3J0IHsgRG9ja0xheW91dCwgRG9ja01vZGUgfSBmcm9tICdyYy1kb2NrJ1xuaW1wb3J0ICdyYy1kb2NrL2Rpc3QvcmMtZG9jay5jc3MnXG5pbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBEbmRQcm92aWRlciB9IGZyb20gJ3JlYWN0LWRuZCdcbmltcG9ydCB7IEhUTUw1QmFja2VuZCB9IGZyb20gJ3JlYWN0LWRuZC1odG1sNS1iYWNrZW5kJ1xuaW1wb3J0IHsgd2l0aFRyYW5zbGF0aW9uIH0gZnJvbSAncmVhY3QtaTE4bmV4dCdcbmltcG9ydCBNb2RhbCBmcm9tICdyZWFjdC1tb2RhbCdcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnXG5pbXBvcnQgeyBjcmVhdGVQcm9qZWN0LCBnZXRQcm9qZWN0LCBzYXZlUHJvamVjdCB9IGZyb20gJy4uL2Z1bmN0aW9ucy9wcm9qZWN0RnVuY3Rpb25zJ1xuaW1wb3J0IHsgZ2V0U2NlbmUgfSBmcm9tICcuLi9mdW5jdGlvbnMvZ2V0U2NlbmUnXG5pbXBvcnQgQXNzZXRzUGFuZWwgZnJvbSAnLi9hc3NldHMvQXNzZXRzUGFuZWwnXG5pbXBvcnQgeyBEaWFsb2dDb250ZXh0UHJvdmlkZXIgfSBmcm9tICcuL2NvbnRleHRzL0RpYWxvZ0NvbnRleHQnXG5pbXBvcnQgeyBkZWZhdWx0U2V0dGluZ3MsIFNldHRpbmdzQ29udGV4dFByb3ZpZGVyIH0gZnJvbSAnLi9jb250ZXh0cy9TZXR0aW5nc0NvbnRleHQnXG5pbXBvcnQgQ29uZmlybURpYWxvZyBmcm9tICcuL2RpYWxvZ3MvQ29uZmlybURpYWxvZydcbmltcG9ydCBFcnJvckRpYWxvZyBmcm9tICcuL2RpYWxvZ3MvRXJyb3JEaWFsb2cnXG5pbXBvcnQgRXhwb3J0UHJvamVjdERpYWxvZyBmcm9tICcuL2RpYWxvZ3MvRXhwb3J0UHJvamVjdERpYWxvZydcbmltcG9ydCB7IFByb2dyZXNzRGlhbG9nIH0gZnJvbSAnLi9kaWFsb2dzL1Byb2dyZXNzRGlhbG9nJ1xuaW1wb3J0IFNhdmVOZXdQcm9qZWN0RGlhbG9nIGZyb20gJy4vZGlhbG9ncy9TYXZlTmV3UHJvamVjdERpYWxvZydcbmltcG9ydCBEcmFnTGF5ZXIgZnJvbSAnLi9kbmQvRHJhZ0xheWVyJ1xuaW1wb3J0IEhpZXJhcmNoeVBhbmVsQ29udGFpbmVyIGZyb20gJy4vaGllcmFyY2h5L0hpZXJhcmNoeVBhbmVsQ29udGFpbmVyJ1xuaW1wb3J0IHsgUGFuZWxEcmFnQ29udGFpbmVyLCBQYW5lbEljb24sIFBhbmVsVGl0bGUgfSBmcm9tICcuL2xheW91dC9QYW5lbCdcbmltcG9ydCBQcm9wZXJ0aWVzUGFuZWxDb250YWluZXIgZnJvbSAnLi9wcm9wZXJ0aWVzL1Byb3BlcnRpZXNQYW5lbENvbnRhaW5lcidcbmltcG9ydCBkZWZhdWx0VGVtcGxhdGVVcmwgZnJvbSAnLi90ZW1wbGF0ZXMvY3JhdGVyLmpzb24nXG5pbXBvcnQgdHV0b3JpYWxUZW1wbGF0ZVVybCBmcm9tICcuL3RlbXBsYXRlcy90dXRvcmlhbC5qc29uJ1xuaW1wb3J0IFRvb2xCYXIgZnJvbSAnLi90b29sYmFyL1Rvb2xCYXInXG5pbXBvcnQgVmlld3BvcnRQYW5lbENvbnRhaW5lciBmcm9tICcuL3ZpZXdwb3J0L1ZpZXdwb3J0UGFuZWxDb250YWluZXInXG5pbXBvcnQgUGVyZm9ybWFuY2VDaGVja0RpYWxvZyBmcm9tICcuL2RpYWxvZ3MvUGVyZm9ybWFuY2VDaGVja0RpYWxvZydcbmltcG9ydCBQdWJsaXNoRGlhbG9nIGZyb20gJy4vZGlhbG9ncy9QdWJsaXNoRGlhbG9nJ1xuaW1wb3J0IFB1Ymxpc2hlZFNjZW5lRGlhbG9nIGZyb20gJy4vZGlhbG9ncy9QdWJsaXNoZWRTY2VuZURpYWxvZydcbmltcG9ydCBpMThuIGZyb20gJ2kxOG5leHQnXG5pbXBvcnQgRmlsZUJyb3dzZXJQYW5lbCBmcm9tICcuL2Fzc2V0cy9GaWxlQnJvd3NlclBhbmVsJ1xuaW1wb3J0IHsgY21kT3JDdHJsU3RyaW5nIH0gZnJvbSAnLi4vZnVuY3Rpb25zL3V0aWxzJ1xuaW1wb3J0IGNvbmZpZ3MgZnJvbSAnLi9jb25maWdzJ1xuaW1wb3J0IHsgYWNjZXNzTG9jYXRpb25TdGF0ZSB9IGZyb20gJ0B4cmVuZ2luZS9jbGllbnQtY29yZS9zcmMvYWRtaW4vcmVkdWNlcnMvYWRtaW4vbG9jYXRpb24vTG9jYXRpb25TdGF0ZSdcbmltcG9ydCB7IGFjY2Vzc1NjZW5lU3RhdGUgfSBmcm9tICdAeHJlbmdpbmUvY2xpZW50LWNvcmUvc3JjL2FkbWluL3JlZHVjZXJzL2FkbWluL3NjZW5lL1NjZW5lU3RhdGUnXG5pbXBvcnQgeyBTY2VuZVNlcnZpY2UgfSBmcm9tICdAeHJlbmdpbmUvY2xpZW50LWNvcmUvc3JjL2FkbWluL3JlZHVjZXJzL2FkbWluL3NjZW5lL1NjZW5lU2VydmljZSdcbmltcG9ydCB7IHVwbG9hZCB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL3NjZW5lL2Z1bmN0aW9ucy91cGxvYWQnXG5pbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL3NjZW5lL2Z1bmN0aW9ucy9nZXRUb2tlbidcbmltcG9ydCB7IENvbW1hbmRNYW5hZ2VyIH0gZnJvbSAnLi4vbWFuYWdlcnMvQ29tbWFuZE1hbmFnZXInXG5pbXBvcnQgRWRpdG9yQ29tbWFuZHMgZnJvbSAnLi4vY29uc3RhbnRzL0VkaXRvckNvbW1hbmRzJ1xuaW1wb3J0IEVkaXRvckV2ZW50cyBmcm9tICcuLi9jb25zdGFudHMvRWRpdG9yRXZlbnRzJ1xuaW1wb3J0IHsgU2NlbmVNYW5hZ2VyIH0gZnJvbSAnLi4vbWFuYWdlcnMvU2NlbmVNYW5hZ2VyJ1xuaW1wb3J0IHsgQ29udHJvbE1hbmFnZXIgfSBmcm9tICcuLi9tYW5hZ2Vycy9Db250cm9sTWFuYWdlcidcbmltcG9ydCB7IE5vZGVNYW5hZ2VyLCByZWdpc3RlclByZWRlZmluZWROb2RlcyB9IGZyb20gJy4uL21hbmFnZXJzL05vZGVNYW5hZ2VyJ1xuaW1wb3J0IHsgcmVnaXN0ZXJQcmVkZWZpbmVkU291cmNlcywgU291cmNlTWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzL1NvdXJjZU1hbmFnZXInXG5pbXBvcnQgeyBDYWNoZU1hbmFnZXIgfSBmcm9tICcuLi9tYW5hZ2Vycy9DYWNoZU1hbmFnZXInXG5pbXBvcnQgeyBQcm9qZWN0TWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzL1Byb2plY3RNYW5hZ2VyJ1xuaW1wb3J0IFN0b3JlIGZyb20gJ0B4cmVuZ2luZS9jbGllbnQtY29yZS9zcmMvc3RvcmUnXG5cbmNvbnN0IG1heFVwbG9hZFNpemUgPSAyNVxuXG4vKipcbiAqIGdldFNjZW5lVXJsIHVzZWQgdG8gY3JlYXRlIHVybCBmb3IgdGhlIHNjZW5lLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAge2FueX0gc2NlbmVJZFxuICogQHJldHVybiB7c3RyaW5nfSAgICAgICAgIFt1cmxdXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRTY2VuZVVybCA9IChzY2VuZUlkKTogc3RyaW5nID0+IGAke2NvbmZpZ3MuQVBQX1VSTH0vc2NlbmVzLyR7c2NlbmVJZH1gXG5cbi8qKlxuICogcHVibGlzaFByb2plY3QgaXMgdXNlZCB0byBwdWJsaXNoIHByb2plY3QsIGZpcnN0bHkgd2Ugc2F2ZSB0aGUgcHJvamVjdCB0aGUgcHVibGlzaC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAcGFyYW0gIHthbnl9ICBwcm9qZWN0XG4gKiBAcGFyYW0gIHthbnl9ICBzaG93RGlhbG9nXG4gKiBAcGFyYW0gIHthbnl9ICBoaWRlRGlhbG9nXG4gKiBAcmV0dXJuIHtQcm9taXNlfSAgICAgICAgICAgIFtyZXR1cm5zIHB1Ymxpc2hlZCBwcm9qZWN0IGRhdGFdXG4gKi9cbmV4cG9ydCBjb25zdCBwdWJsaXNoUHJvamVjdCA9IGFzeW5jIChwcm9qZWN0LCBzaG93RGlhbG9nLCBoaWRlRGlhbG9nPyk6IFByb21pc2U8YW55PiA9PiB7XG4gIGxldCBzY3JlZW5zaG90VXJsXG4gIHRyeSB7XG4gICAgY29uc3Qgc2NlbmUgPSBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmVcblxuICAgIGNvbnN0IGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKVxuICAgIGNvbnN0IHNpZ25hbCA9IGFib3J0Q29udHJvbGxlci5zaWduYWxcblxuICAgIC8vIFNhdmUgdGhlIHNjZW5lIGlmIGl0IGhhcyBiZWVuIG1vZGlmaWVkLlxuICAgIGlmIChTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmVNb2RpZmllZCkge1xuICAgICAgc2hvd0RpYWxvZyhQcm9ncmVzc0RpYWxvZywge1xuICAgICAgICB0aXRsZTogaTE4bi50KCdlZGl0b3I6c2F2aW5nJyksXG4gICAgICAgIG1lc3NhZ2U6IGkxOG4udCgnZWRpdG9yOnNhdmluZ01zZycpLFxuICAgICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgICBvbkNhbmNlbDogKCkgPT4ge1xuICAgICAgICAgIGFib3J0Q29udHJvbGxlci5hYm9ydCgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAvLyBzYXZpbmcgcHJvamVjdC5cbiAgICAgIHByb2plY3QgPSBhd2FpdCBzYXZlUHJvamVjdChwcm9qZWN0LnByb2plY3RfaWQsIHNpZ25hbClcblxuICAgICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGkxOG4udCgnZWRpdG9yOmVycm9ycy5wdWJsaXNoUHJvamVjdEFib3J0ZWQnKSlcbiAgICAgICAgZXJyb3JbJ2Fib3J0ZWQnXSA9IHRydWVcbiAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaG93RGlhbG9nKFByb2dyZXNzRGlhbG9nLCB7XG4gICAgICB0aXRsZTogaTE4bi50KCdlZGl0b3I6Z2VuZXJhdGVTY3JlZW5zaG90JyksXG4gICAgICBtZXNzYWdlOiBpMThuLnQoJ2VkaXRvcjpnZW5lcmF0ZVNjcmVlbnNob3RNc2cnKVxuICAgIH0pXG5cbiAgICAvLyBXYWl0IGZvciA1bXMgc28gdGhhdCB0aGUgUHJvZ3Jlc3NEaWFsb2cgc2hvd3MgdXAuXG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNSkpXG5cbiAgICAvLyBUYWtlIGEgc2NyZWVuc2hvdCBvZiB0aGUgc2NlbmUgZnJvbSB0aGUgY3VycmVudCBjYW1lcmEgcG9zaXRpb24gdG8gdXNlIGFzIHRoZSB0aHVtYm5haWxcbiAgICBjb25zdCBzY3JlZW5zaG90ID0gYXdhaXQgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnRha2VTY3JlZW5zaG90KClcbiAgICBjb25zb2xlLmxvZygnU2NyZWVuc2hvdCBpcycpXG4gICAgY29uc29sZS5sb2coc2NyZWVuc2hvdClcbiAgICBjb25zdCB7IGJsb2I6IHNjcmVlbnNob3RCbG9iLCBjYW1lcmFUcmFuc2Zvcm06IHNjcmVlbnNob3RDYW1lcmFUcmFuc2Zvcm0gfSA9IHNjcmVlbnNob3RcbiAgICBjb25zb2xlLmxvZygnc2NyZWVuc2hvdEJsb2IgaXMnKVxuICAgIGNvbnNvbGUubG9nKHNjcmVlbnNob3RCbG9iKVxuXG4gICAgc2NyZWVuc2hvdFVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoc2NyZWVuc2hvdEJsb2IpXG5cbiAgICBjb25zb2xlLmxvZygnU2NyZWVuc2hvdCB1cmwgaXMnLCBzY3JlZW5zaG90VXJsKVxuXG4gICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihpMThuLnQoJ2VkaXRvcjplcnJvcnMucHVibGlzaFByb2plY3RBYm9ydGVkJykpXG4gICAgICBlcnJvclsnYWJvcnRlZCddID0gdHJ1ZVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG5cbiAgICBsZXQgeyBuYW1lIH0gPSBzY2VuZS5tZXRhZGF0YVxuXG4gICAgbmFtZSA9IChwcm9qZWN0LnNjZW5lICYmIHByb2plY3Quc2NlbmUubmFtZSkgfHwgbmFtZSB8fCBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmUubmFtZVxuXG4gICAgLy8gRGlzcGxheSB0aGUgcHVibGlzaCBkaWFsb2cgYW5kIHdhaXQgZm9yIHRoZSB1c2VyIHRvIHN1Ym1pdCAvIGNhbmNlbFxuICAgIGNvbnN0IHB1Ymxpc2hQYXJhbXM6IGFueSA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBzaG93RGlhbG9nKFB1Ymxpc2hEaWFsb2csIHtcbiAgICAgICAgc2NyZWVuc2hvdFVybCxcbiAgICAgICAgaW5pdGlhbFNjZW5lUGFyYW1zOiB7XG4gICAgICAgICAgbmFtZVxuICAgICAgICB9LFxuICAgICAgICBvbkNhbmNlbDogKCkgPT4gcmVzb2x2ZShudWxsKSxcbiAgICAgICAgb25QdWJsaXNoOiByZXNvbHZlXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICAvLyBVc2VyIGNsaWNrZWQgY2FuY2VsXG4gICAgaWYgKCFwdWJsaXNoUGFyYW1zKSB7XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHNjcmVlbnNob3RVcmwpXG4gICAgICBoaWRlRGlhbG9nKClcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGkxOG4udCgnZWRpdG9yOmVycm9ycy5wdWJsaXNoUHJvamVjdEFib3J0ZWQnKSlcbiAgICAgIGVycm9yWydhYm9ydGVkJ10gPSB0cnVlXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgc2NlbmUgd2l0aCB0aGUgbWV0YWRhdGEgZnJvbSB0aGUgcHVibGlzaERpYWxvZ1xuICAgIHNjZW5lLnNldE1ldGFkYXRhKHtcbiAgICAgIG5hbWU6IHB1Ymxpc2hQYXJhbXMubmFtZSxcbiAgICAgIHByZXZpZXdDYW1lcmFUcmFuc2Zvcm06IHNjcmVlbnNob3RDYW1lcmFUcmFuc2Zvcm1cbiAgICB9KVxuXG4gICAgc2hvd0RpYWxvZyhQcm9ncmVzc0RpYWxvZywge1xuICAgICAgdGl0bGU6IGkxOG4udCgnZWRpdG9yOnB1Ymxpc2hpbmdTY2VuZScpLFxuICAgICAgbWVzc2FnZTogaTE4bi50KCdlZGl0b3I6cHVibGlzaGluZ1NjZW5lTXNnJyksXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgb25DYW5jZWw6ICgpID0+IHtcbiAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gQ2xvbmUgdGhlIGV4aXN0aW5nIHNjZW5lLCBwcm9jZXNzIGl0IGZvciBleHBvcnRpbmcsIGFuZCB0aGVuIGV4cG9ydCBhcyBhIGdsYiBibG9iXG4gICAgY29uc3QgeyBnbGJCbG9iLCBjaHVua3MgfSA9IGF3YWl0IFNjZW5lTWFuYWdlci5pbnN0YW5jZS5leHBvcnRTY2VuZSh7IHNjb3JlczogdHJ1ZSB9KVxuXG4gICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihpMThuLnQoJ2VkaXRvcjplcnJvcnMucHVibGlzaFByb2plY3RBYm9ydGVkJykpXG4gICAgICBlcnJvclsnYWJvcnRlZCddID0gdHJ1ZVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG5cbiAgICBjb25zdCBwZXJmb3JtYW5jZUNoZWNrUmVzdWx0ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHNob3dEaWFsb2coUGVyZm9ybWFuY2VDaGVja0RpYWxvZywge1xuICAgICAgICBjaHVua3MsXG4gICAgICAgIG9uQ2FuY2VsOiAoKSA9PiByZXNvbHZlKGZhbHNlKSxcbiAgICAgICAgb25Db25maXJtOiAoKSA9PiByZXNvbHZlKHRydWUpXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpZiAoIXBlcmZvcm1hbmNlQ2hlY2tSZXN1bHQpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGkxOG4udCgnZWRpdG9yOmVycm9ycy5wdWJsaXNoUHJvamVjdEFib3J0ZWQnKSlcbiAgICAgIGVycm9yWydhYm9ydGVkJ10gPSB0cnVlXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cblxuICAgIC8vIFNlcmlhbGl6ZSBFZGl0b3Igc2NlbmVcbiAgICBjb25zdCBzZXJpYWxpemVkU2NlbmUgPSBhd2FpdCBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmUuc2VyaWFsaXplKHByb2plY3QucHJvamVjdF9pZClcbiAgICBjb25zdCBzY2VuZUJsb2IgPSBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkoc2VyaWFsaXplZFNjZW5lKV0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nIH0pXG5cbiAgICBzaG93RGlhbG9nKFByb2dyZXNzRGlhbG9nLCB7XG4gICAgICB0aXRsZTogaTE4bi50KCdlZGl0b3I6cHVibGlzaGluZ1NjZW5lJyksXG4gICAgICBtZXNzYWdlOiBpMThuLnQoJ2VkaXRvcjpwdWJsaXNoaW5nU2NlbmVNc2cnKSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgICBvbkNhbmNlbDogKCkgPT4ge1xuICAgICAgICBhYm9ydENvbnRyb2xsZXIuYWJvcnQoKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zdCBzaXplID0gZ2xiQmxvYi5zaXplIC8gMTAyNCAvIDEwMjRcbiAgICBjb25zdCBtYXhTaXplID0gbWF4VXBsb2FkU2l6ZVxuICAgIGlmIChzaXplID4gbWF4U2l6ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGkxOG4udCgnZWRpdG9yOmVycm9ycy5zY2VuZVRvb0xhcmdlJywgeyBzaXplOiBzaXplLnRvRml4ZWQoMiksIG1heFNpemUgfSkpXG4gICAgfVxuXG4gICAgc2hvd0RpYWxvZyhQcm9ncmVzc0RpYWxvZywge1xuICAgICAgdGl0bGU6IGkxOG4udCgnZWRpdG9yOnB1Ymxpc2hpbmdTY2VuZScpLFxuICAgICAgbWVzc2FnZTogaTE4bi50KCdlZGl0b3I6dXBsb2FkaW5nVGh1bWJuYWlsTXNnJyksXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgb25DYW5jZWw6ICgpID0+IHtcbiAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gVXBsb2FkIHRoZSBzY3JlZW5zaG90IGZpbGVcbiAgICBjb25zdCB7XG4gICAgICBmaWxlX2lkOiBzY3JlZW5zaG90SWQsXG4gICAgICBtZXRhOiB7IGFjY2Vzc190b2tlbjogc2NyZWVuc2hvdFRva2VuIH1cbiAgICB9ID0gKGF3YWl0IHVwbG9hZChzY3JlZW5zaG90QmxvYiwgdW5kZWZpbmVkLCBhYm9ydENvbnRyb2xsZXIuc2lnbmFsKSkgYXMgYW55XG5cbiAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGkxOG4udCgnZWRpdG9yOmVycm9ycy5wdWJsaXNoUHJvamVjdEFib3J0ZWQnKSlcbiAgICAgIGVycm9yWydhYm9ydGVkJ10gPSB0cnVlXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cblxuICAgIGNvbnN0IHtcbiAgICAgIGZpbGVfaWQ6IGdsYklkLFxuICAgICAgbWV0YTogeyBhY2Nlc3NfdG9rZW46IGdsYlRva2VuIH1cbiAgICB9OiBhbnkgPSBhd2FpdCB1cGxvYWQoZ2xiQmxvYiwgKHVwbG9hZFByb2dyZXNzKSA9PiB7XG4gICAgICBzaG93RGlhbG9nKFxuICAgICAgICBQcm9ncmVzc0RpYWxvZyxcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBpMThuLnQoJ2VkaXRvcjpwdWJsaXNoaW5nU2NlbmUnKSxcbiAgICAgICAgICBtZXNzYWdlOiBpMThuLnQoJ2VkaXRvcjp1cGxvYWRpbmdTY2VuZU1zZycsIHsgcGVyY2VudGFnZTogTWF0aC5mbG9vcih1cGxvYWRQcm9ncmVzcyAqIDEwMCkgfSksXG4gICAgICAgICAgb25DYW5jZWw6ICgpID0+IHtcbiAgICAgICAgICAgIGFib3J0Q29udHJvbGxlci5hYm9ydCgpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhYm9ydENvbnRyb2xsZXIuc2lnbmFsXG4gICAgICApXG4gICAgfSlcblxuICAgIGlmIChzaWduYWwuYWJvcnRlZCkge1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoaTE4bi50KCdlZGl0b3I6ZXJyb3JzLnB1Ymxpc2hQcm9qZWN0QWJvcnRlZCcpKVxuICAgICAgZXJyb3JbJ2Fib3J0ZWQnXSA9IHRydWVcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuXG4gICAgY29uc3Qge1xuICAgICAgZmlsZV9pZDogc2NlbmVGaWxlSWQsXG4gICAgICBtZXRhOiB7IGFjY2Vzc190b2tlbjogc2NlbmVGaWxlVG9rZW4gfVxuICAgIH0gPSAoYXdhaXQgdXBsb2FkKHNjZW5lQmxvYiwgdW5kZWZpbmVkLCBhYm9ydENvbnRyb2xsZXIuc2lnbmFsKSkgYXMgYW55XG5cbiAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGkxOG4udCgnZWRpdG9yOmVycm9ycy5wdWJsaXNoUHJvamVjdEFib3J0ZWQnKSlcbiAgICAgIGVycm9yWydhYm9ydGVkJ10gPSB0cnVlXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cblxuICAgIGNvbnN0IHNjZW5lUGFyYW1zID0ge1xuICAgICAgc2NyZWVuc2hvdF9maWxlX2lkOiBzY3JlZW5zaG90SWQsXG4gICAgICBzY3JlZW5zaG90X2ZpbGVfdG9rZW46IHNjcmVlbnNob3RUb2tlbixcbiAgICAgIG1vZGVsX2ZpbGVfaWQ6IGdsYklkLFxuICAgICAgbW9kZWxfZmlsZV90b2tlbjogZ2xiVG9rZW4sXG4gICAgICBzY2VuZV9maWxlX2lkOiBzY2VuZUZpbGVJZCxcbiAgICAgIHNjZW5lX2ZpbGVfdG9rZW46IHNjZW5lRmlsZVRva2VuLFxuICAgICAgbmFtZTogcHVibGlzaFBhcmFtcy5uYW1lXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHByb2plY3QgPSBhd2FpdCBQcm9qZWN0TWFuYWdlci5pbnN0YW5jZS5mZWF0aGVyc0NsaWVudFxuICAgICAgICAuc2VydmljZShgL3B1Ymxpc2gtcHJvamVjdC8ke3Byb2plY3QucHJvamVjdF9pZH1gKVxuICAgICAgICAuY3JlYXRlKHsgc2NlbmU6IHNjZW5lUGFyYW1zIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcilcbiAgICB9XG5cbiAgICBzaG93RGlhbG9nKFB1Ymxpc2hlZFNjZW5lRGlhbG9nLCB7XG4gICAgICBzY2VuZU5hbWU6IHNjZW5lUGFyYW1zLm5hbWUsXG4gICAgICBzY3JlZW5zaG90VXJsLFxuICAgICAgc2NlbmVVcmw6IGdldFNjZW5lVXJsKHByb2plY3Quc2NlbmUuc2NlbmVfaWQpLFxuICAgICAgb25Db25maXJtOiAoKSA9PiB7XG4gICAgICAgIGhpZGVEaWFsb2coKVxuICAgICAgfVxuICAgIH0pXG4gIH0gZmluYWxseSB7XG4gICAgaWYgKHNjcmVlbnNob3RVcmwpIHtcbiAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoc2NyZWVuc2hvdFVybClcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcHJvamVjdFxufVxuXG4vKipcbiAqIFN0eWxlZEVkaXRvckNvbnRhaW5lciBjb21wb25lbnQgaXMgdXNlZCBhcyByb290IGVsZW1lbnQgb2YgbmV3IHByb2plY3QgcGFnZS5cbiAqIE9uIHRoaXMgcGFnZSB3ZSBoYXZlIGFuIGVkaXRvciB0byBjcmVhdGUgYSBuZXcgb3IgbW9kaWZpbmcgYW4gZXhpc3RpbmcgcHJvamVjdC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7U3R5bGVkIGNvbXBvbmVudH1cbiAqL1xuY29uc3QgU3R5bGVkRWRpdG9yQ29udGFpbmVyID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleDogMTtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgcG9zaXRpb246IGZpeGVkO1xuYFxuXG4vKipcbiAqU3R5bGVkIGNvbXBvbmVudCB1c2VkIGFzIHdvcmtzcGFjZSBjb250YWluZXIuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge3R5cGV9XG4gKi9cbmNvbnN0IFdvcmtzcGFjZUNvbnRhaW5lciA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXg6IDE7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIG1hcmdpbjogMHB4O1xuYFxuXG4vKipcbiAqU3R5bGVkIGNvbXBvbmVudCB1c2VkIGFzIGRvY2sgY29udGFpbmVyLlxuICpcbiAqIEBhdXRob3IgSGFuemxhIE1hdGVlblxuICogQHR5cGUge3R5cGV9XG4gKi9cbmNvbnN0IERvY2tDb250YWluZXIgPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICAuZG9jay1wYW5lbCB7XG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgb3BhY2l0eTogMC44O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgfVxuICAuZG9jay1wYW5lbDpmaXJzdC1jaGlsZCB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHotaW5kZXg6IDk5O1xuICB9XG4gIC5kb2NrLXBhbmVsW2RhdGEtZG9ja2lkPVwiKzNcIl0ge1xuICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgfVxuICAuZG9jay1kaXZpZGVyIHtcbiAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgfVxuICAuZG9jayB7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGJhY2tncm91bmQ6ICMyODJDMzE7XG4gIH1cbiAgLmRvY2stdG9wIC5kb2NrLWJhciB7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsMCwwLDAuMik7XG4gICAgYmFja2dyb3VuZDogIzI4MkMzMTtcbiAgfVxuICAuZG9jay10YWIge1xuICAgIGJhY2tncm91bmQ6ICMyODJDMzE7IFxuICAgIGJvcmRlci1ib3R0b206IG5vbmU7XG4gIH1cbiAgLmRvY2stdGFiOmhvdmVyLCAuZG9jay10YWItYWN0aXZlLCAuZG9jay10YWItYWN0aXZlOmhvdmVyIHtcbiAgICBjb2xvcjogI2ZmZmZmZjsgXG4gIH1cbiAgLmRvY2staW5rLWJhciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsgXG4gIH1cbmBcblxudHlwZSBFZGl0b3JDb250YWluZXJQcm9wcyA9IHtcbiAgdDogYW55XG4gIG1hdGNoOiBhbnlcbiAgbG9jYXRpb246IGFueVxuICBoaXN0b3J5OiBhbnlcbn1cbnR5cGUgRWRpdG9yQ29udGFpbmVyU3RhdGUgPSB7XG4gIHByb2plY3Q6IGFueVxuICBwYXJlbnRTY2VuZUlkOiBudWxsXG4gIC8vIHRlbXBsYXRlVXJsOiBhbnk7XG4gIHNldHRpbmdzQ29udGV4dDogYW55XG4gIC8vIGVycm9yOiBudWxsO1xuICBjcmVhdGluZ1Byb2plY3Q6IGFueVxuICBEaWFsb2dDb21wb25lbnQ6IGFueVxuICBwYXRoUGFyYW1zOiBNYXA8c3RyaW5nLCB1bmtub3duPlxuICBxdWVyeVBhcmFtczogTWFwPHN0cmluZywgc3RyaW5nPlxuICBkaWFsb2dQcm9wczoge31cbiAgbW9kaWZpZWQ6IGJvb2xlYW5cbn1cblxuLyoqXG4gKiBFZGl0b3JDb250YWluZXIgY2xhc3MgdXNlZCBmb3IgY3JlYXRpbmcgY29udGFpbmVyIGZvciBFZGl0b3JcbiAqXG4gKiAgQGF1dGhvciBSb2JlcnQgTG9uZ1xuICovXG5jbGFzcyBFZGl0b3JDb250YWluZXIgZXh0ZW5kcyBDb21wb25lbnQ8RWRpdG9yQ29udGFpbmVyUHJvcHMsIEVkaXRvckNvbnRhaW5lclN0YXRlPiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgbGV0IHNldHRpbmdzID0gZGVmYXVsdFNldHRpbmdzXG4gICAgY29uc3Qgc3RvcmVkU2V0dGluZ3MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWRpdG9yLXNldHRpbmdzJylcbiAgICBpZiAoc3RvcmVkU2V0dGluZ3MpIHtcbiAgICAgIHNldHRpbmdzID0gSlNPTi5wYXJzZShzdG9yZWRTZXR0aW5ncylcbiAgICB9XG5cbiAgICBQcm9qZWN0TWFuYWdlci5idWlsZFByb2plY3RNYW5hZ2VyKHNldHRpbmdzKVxuICAgIENvbW1hbmRNYW5hZ2VyLmJ1aWxkQ29tbWFuZE1hbmFnZXIoKVxuICAgIFNjZW5lTWFuYWdlci5idWlsZFNjZW5lTWFuYWdlcigpXG4gICAgQ29udHJvbE1hbmFnZXIuYnVpbGRDb250cm9sTWFuYWdlcigpXG4gICAgTm9kZU1hbmFnZXIuYnVpbGROb2RlTWFuYWdlcihTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmUpXG4gICAgU291cmNlTWFuYWdlci5idWlsZFNvdXJjZU1hbmFnZXIoKVxuICAgIENhY2hlTWFuYWdlci5pbml0KClcblxuICAgIHJlZ2lzdGVyUHJlZGVmaW5lZE5vZGVzKClcbiAgICByZWdpc3RlclByZWRlZmluZWRTb3VyY2VzKClcblxuICAgIFByb2plY3RNYW5hZ2VyLmluc3RhbmNlLmluaXRpYWxpemVGZWF0aGVyc0NsaWVudChnZXRUb2tlbigpKVxuXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlJFTkRFUkVSX0lOSVRJQUxJWkVELnRvU3RyaW5nKCksIHRoaXMuc2V0RGVidWdpbmZvKVxuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmFkZExpc3RlbmVyKEVkaXRvckV2ZW50cy5QUk9KRUNUX0xPQURFRC50b1N0cmluZygpLCB0aGlzLm9uUHJvamVjdExvYWRlZClcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuRVJST1IudG9TdHJpbmcoKSwgdGhpcy5vbkVkaXRvckVycm9yKVxuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmFkZExpc3RlbmVyKEVkaXRvckV2ZW50cy5TQVZFX1BST0pFQ1QudG9TdHJpbmcoKSwgdGhpcy5vblNhdmVQcm9qZWN0KVxuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIC8vIGVycm9yOiBudWxsLFxuICAgICAgcHJvamVjdDogbnVsbCxcbiAgICAgIHBhcmVudFNjZW5lSWQ6IG51bGwsXG4gICAgICBwYXRoUGFyYW1zOiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKHByb3BzLm1hdGNoLnBhcmFtcykpLFxuICAgICAgcXVlcnlQYXJhbXM6IG5ldyBNYXAobmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKS5lbnRyaWVzKCkpLFxuICAgICAgc2V0dGluZ3NDb250ZXh0OiB7XG4gICAgICAgIHNldHRpbmdzLFxuICAgICAgICB1cGRhdGVTZXR0aW5nOiB0aGlzLnVwZGF0ZVNldHRpbmdcbiAgICAgIH0sXG4gICAgICBjcmVhdGluZ1Byb2plY3Q6IG51bGwsXG4gICAgICAvLyB0ZW1wbGF0ZVVybDogZGVmYXVsdFRlbXBsYXRlVXJsLFxuICAgICAgRGlhbG9nQ29tcG9uZW50OiBudWxsLFxuICAgICAgZGlhbG9nUHJvcHM6IHt9LFxuICAgICAgbW9kaWZpZWQ6IGZhbHNlXG4gICAgfVxuXG4gICAgdGhpcy50ID0gdGhpcy5wcm9wcy50XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBjb25zdCBkaXNwYXRjaCA9IFN0b3JlLnN0b3JlLmRpc3BhdGNoXG4gICAgaWYgKGFjY2Vzc0xvY2F0aW9uU3RhdGUoKS5sb2NhdGlvbnMudXBkYXRlTmVlZGVkLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBkaXNwYXRjaChMb2NhdGlvblNlcnZpY2UuZmV0Y2hBZG1pbkxvY2F0aW9ucygpKVxuICAgIH1cbiAgICBpZiAoYWNjZXNzU2NlbmVTdGF0ZSgpLnNjZW5lcy51cGRhdGVOZWVkZWQudmFsdWUgPT09IHRydWUpIHtcbiAgICAgIGRpc3BhdGNoKFNjZW5lU2VydmljZS5mZXRjaEFkbWluU2NlbmVzKCkpXG4gICAgfVxuICAgIGlmIChhY2Nlc3NMb2NhdGlvblN0YXRlKCkubG9jYXRpb25UeXBlcy51cGRhdGVOZWVkZWQudmFsdWUgPT09IHRydWUpIHtcbiAgICAgIGRpc3BhdGNoKExvY2F0aW9uU2VydmljZS5mZXRjaExvY2F0aW9uVHlwZXMoKSlcbiAgICB9XG4gICAgY29uc3QgcGF0aFBhcmFtcyA9IHRoaXMuc3RhdGUucGF0aFBhcmFtc1xuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gdGhpcy5zdGF0ZS5xdWVyeVBhcmFtc1xuICAgIGNvbnN0IHByb2plY3RJZCA9IHBhdGhQYXJhbXMuZ2V0KCdwcm9qZWN0SWQnKVxuXG4gICAgaWYgKHByb2plY3RJZCA9PT0gJ25ldycpIHtcbiAgICAgIGlmIChxdWVyeVBhcmFtcy5oYXMoJ3RlbXBsYXRlJykpIHtcbiAgICAgICAgdGhpcy5sb2FkUHJvamVjdFRlbXBsYXRlKHF1ZXJ5UGFyYW1zLmdldCgndGVtcGxhdGUnKSlcbiAgICAgIH0gZWxzZSBpZiAocXVlcnlQYXJhbXMuaGFzKCdzY2VuZUlkJykpIHtcbiAgICAgICAgdGhpcy5sb2FkU2NlbmUocXVlcnlQYXJhbXMuZ2V0KCdzY2VuZUlkJykpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxvYWRQcm9qZWN0VGVtcGxhdGUoZGVmYXVsdFRlbXBsYXRlVXJsKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocHJvamVjdElkID09PSAndHV0b3JpYWwnKSB7XG4gICAgICB0aGlzLmxvYWRQcm9qZWN0VGVtcGxhdGUodHV0b3JpYWxUZW1wbGF0ZVVybClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sb2FkUHJvamVjdChwcm9qZWN0SWQpXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogRWRpdG9yQ29udGFpbmVyUHJvcHMpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5sb2NhdGlvbi5wYXRobmFtZSAhPT0gcHJldlByb3BzLmxvY2F0aW9uLnBhdGhuYW1lICYmICF0aGlzLnN0YXRlLmNyZWF0aW5nUHJvamVjdCkge1xuICAgICAgLy8gY29uc3QgeyBwcm9qZWN0SWQgfSA9IHRoaXMucHJvcHMubWF0Y2gucGFyYW1zO1xuICAgICAgY29uc3QgcHJldlByb2plY3RJZCA9IHByZXZQcm9wcy5tYXRjaC5wYXJhbXMucHJvamVjdElkXG4gICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBNYXAobmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKS5lbnRyaWVzKCkpXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgcXVlcnlQYXJhbXNcbiAgICAgIH0pXG4gICAgICBjb25zdCBwYXRoUGFyYW1zID0gdGhpcy5zdGF0ZS5wYXRoUGFyYW1zXG4gICAgICBjb25zdCBwcm9qZWN0SWQgPSBwYXRoUGFyYW1zLmdldCgncHJvamVjdElkJylcbiAgICAgIGxldCB0ZW1wbGF0ZVVybCA9IG51bGxcblxuICAgICAgaWYgKHByb2plY3RJZCA9PT0gJ25ldycgJiYgIXF1ZXJ5UGFyYW1zLmhhcygnc2NlbmVJZCcpKSB7XG4gICAgICAgIHRlbXBsYXRlVXJsID0gcXVlcnlQYXJhbXMuZ2V0KCd0ZW1wbGF0ZScpIHx8IGRlZmF1bHRUZW1wbGF0ZVVybFxuICAgICAgfSBlbHNlIGlmIChwcm9qZWN0SWQgPT09ICd0dXRvcmlhbCcpIHtcbiAgICAgICAgdGVtcGxhdGVVcmwgPSB0dXRvcmlhbFRlbXBsYXRlVXJsXG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9qZWN0SWQgPT09ICduZXcnIHx8IHByb2plY3RJZCA9PT0gJ3R1dG9yaWFsJykge1xuICAgICAgICB0aGlzLmxvYWRQcm9qZWN0VGVtcGxhdGUodGVtcGxhdGVVcmwpXG4gICAgICB9IGVsc2UgaWYgKHByZXZQcm9qZWN0SWQgIT09ICd0dXRvcmlhbCcgJiYgcHJldlByb2plY3RJZCAhPT0gJ25ldycpIHtcbiAgICAgICAgdGhpcy5sb2FkUHJvamVjdChwcm9qZWN0SWQpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlNBVkVfUFJPSkVDVC50b1N0cmluZygpLCB0aGlzLm9uU2F2ZVByb2plY3QpXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoRWRpdG9yRXZlbnRzLkVSUk9SLnRvU3RyaW5nKCksIHRoaXMub25FZGl0b3JFcnJvcilcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihFZGl0b3JFdmVudHMuUFJPSkVDVF9MT0FERUQudG9TdHJpbmcoKSwgdGhpcy5vblByb2plY3RMb2FkZWQpXG4gICAgUHJvamVjdE1hbmFnZXIuaW5zdGFuY2UuZGlzcG9zZSgpXG4gIH1cblxuICB0OiBGdW5jdGlvblxuXG4gIGFzeW5jIGxvYWRQcm9qZWN0VGVtcGxhdGUodGVtcGxhdGVGaWxlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBwcm9qZWN0OiBudWxsLFxuICAgICAgcGFyZW50U2NlbmVJZDogbnVsbFxuICAgICAgLy8gdGVtcGxhdGVVcmxcbiAgICB9KVxuXG4gICAgdGhpcy5zaG93RGlhbG9nKFByb2dyZXNzRGlhbG9nLCB7XG4gICAgICB0aXRsZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZycpLCAvLyBcIkxvYWRpbmcgUHJvamVjdFwiLFxuICAgICAgbWVzc2FnZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZ01zZycpXG4gICAgfSlcblxuICAgIHRyeSB7XG4gICAgICBpZiAodGVtcGxhdGVGaWxlLm1ldGFkYXRhKSB7XG4gICAgICAgIGRlbGV0ZSB0ZW1wbGF0ZUZpbGUubWV0YWRhdGEuc2NlbmVVcmxcbiAgICAgICAgZGVsZXRlIHRlbXBsYXRlRmlsZS5tZXRhZGF0YS5zY2VuZUlkXG4gICAgICB9XG5cbiAgICAgIGF3YWl0IFByb2plY3RNYW5hZ2VyLmluc3RhbmNlLmxvYWRQcm9qZWN0KHRlbXBsYXRlRmlsZSlcblxuICAgICAgdGhpcy5oaWRlRGlhbG9nKClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcblxuICAgICAgdGhpcy5zaG93RGlhbG9nKEVycm9yRGlhbG9nLCB7XG4gICAgICAgIHRpdGxlOiB0aGlzLnQoJ2VkaXRvcjpsb2FkaW5nRXJyb3InKSxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCB0aGlzLnQoJ2VkaXRvcjpsb2FkaW5nRXJyb3JNc2cnKSxcbiAgICAgICAgZXJyb3JcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZFNjZW5lKHNjZW5lSWQpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHByb2plY3Q6IG51bGwsXG4gICAgICBwYXJlbnRTY2VuZUlkOiBzY2VuZUlkXG4gICAgICAvLyB0ZW1wbGF0ZVVybDogbnVsbCxcbiAgICB9KVxuXG4gICAgdGhpcy5zaG93RGlhbG9nKFByb2dyZXNzRGlhbG9nLCB7XG4gICAgICB0aXRsZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZycpLFxuICAgICAgbWVzc2FnZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZ01zZycpXG4gICAgfSlcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzY2VuZTogYW55ID0gYXdhaXQgZ2V0U2NlbmUoc2NlbmVJZClcbiAgICAgIGNvbnNvbGUud2FybignbG9hZFNjZW5lOnNjZW5lJywgc2NlbmUpXG4gICAgICBjb25zdCBwcm9qZWN0RmlsZSA9IHNjZW5lLmRhdGFcblxuICAgICAgYXdhaXQgUHJvamVjdE1hbmFnZXIuaW5zdGFuY2UubG9hZFByb2plY3QocHJvamVjdEZpbGUpXG5cbiAgICAgIHRoaXMuaGlkZURpYWxvZygpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG5cbiAgICAgIHRoaXMuc2hvd0RpYWxvZyhFcnJvckRpYWxvZywge1xuICAgICAgICB0aXRsZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZ0Vycm9yJyksXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgdGhpcy50KCdlZGl0b3I6bG9hZGluZ0Vycm9yTXNnJyksXG4gICAgICAgIGVycm9yXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGltcG9ydFByb2plY3QocHJvamVjdEZpbGUpIHtcbiAgICBjb25zdCBwcm9qZWN0ID0gdGhpcy5zdGF0ZS5wcm9qZWN0XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHByb2plY3Q6IG51bGwsXG4gICAgICBwYXJlbnRTY2VuZUlkOiBudWxsXG4gICAgICAvLyB0ZW1wbGF0ZVVybDogbnVsbCxcbiAgICB9KVxuXG4gICAgdGhpcy5zaG93RGlhbG9nKFByb2dyZXNzRGlhbG9nLCB7XG4gICAgICB0aXRsZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZycpLFxuICAgICAgbWVzc2FnZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZ01zZycpXG4gICAgfSlcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBQcm9qZWN0TWFuYWdlci5pbnN0YW5jZS5sb2FkUHJvamVjdChwcm9qZWN0RmlsZSlcblxuICAgICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lTW9kaWZpZWQgPSB0cnVlXG4gICAgICB0aGlzLnVwZGF0ZU1vZGlmaWVkU3RhdGUoKVxuXG4gICAgICB0aGlzLmhpZGVEaWFsb2coKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxuXG4gICAgICB0aGlzLnNob3dEaWFsb2coRXJyb3JEaWFsb2csIHtcbiAgICAgICAgdGl0bGU6IHRoaXMudCgnZWRpdG9yOmxvYWRpbmdFcnJvcicpLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIHx8IHRoaXMudCgnZWRpdG9yOmxvYWRpbmdFcnJvck1zZycpLFxuICAgICAgICBlcnJvclxuICAgICAgfSlcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKHByb2plY3QpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgcHJvamVjdFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGxvYWRQcm9qZWN0KHByb2plY3RJZCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgcHJvamVjdDogbnVsbCxcbiAgICAgIHBhcmVudFNjZW5lSWQ6IG51bGxcbiAgICB9KVxuXG4gICAgdGhpcy5zaG93RGlhbG9nKFByb2dyZXNzRGlhbG9nLCB7XG4gICAgICB0aXRsZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZycpLFxuICAgICAgbWVzc2FnZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZ01zZycpXG4gICAgfSlcblxuICAgIGxldCBwcm9qZWN0XG5cbiAgICB0cnkge1xuICAgICAgcHJvamVjdCA9IGF3YWl0IGdldFByb2plY3QocHJvamVjdElkKVxuICAgICAgUHJvamVjdE1hbmFnZXIuaW5zdGFuY2Uub3duZWRGaWxlSWRzID0gSlNPTi5wYXJzZShwcm9qZWN0Lm93bmVkRmlsZUlkcylcbiAgICAgIGdsb2JhbFRoaXMuY3VycmVudFByb2plY3RJRCA9IHByb2plY3QucHJvamVjdF9pZFxuXG4gICAgICBjb25zdCBwcm9qZWN0SW5kZXggPSBwcm9qZWN0LnByb2plY3RfdXJsLnNwbGl0KCdjb2xsZWN0aW9uLycpWzFdXG4gICAgICBjb25zdCBwcm9qZWN0RmlsZSA9IGF3YWl0IFByb2plY3RNYW5hZ2VyLmluc3RhbmNlLmZlYXRoZXJzQ2xpZW50LnNlcnZpY2UoYGNvbGxlY3Rpb25gKS5nZXQocHJvamVjdEluZGV4LCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IFByb2plY3RNYW5hZ2VyLmluc3RhbmNlLmxvYWRQcm9qZWN0KHByb2plY3RGaWxlKVxuXG4gICAgICB0aGlzLmhpZGVEaWFsb2coKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxuXG4gICAgICB0aGlzLnNob3dEaWFsb2coRXJyb3JEaWFsb2csIHtcbiAgICAgICAgdGl0bGU6IHRoaXMudCgnZWRpdG9yOmxvYWRpbmdFcnJvcicpLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIHx8IHRoaXMudCgnZWRpdG9yOmxvYWRpbmdFcnJvck1zZycpLFxuICAgICAgICBlcnJvclxuICAgICAgfSlcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKHByb2plY3QpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgcHJvamVjdFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZU1vZGlmaWVkU3RhdGUodGhlbj8pIHtcbiAgICBjb25zdCBuZXh0TW9kaWZpZWQgPSBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmVNb2RpZmllZCAmJiAhdGhpcy5zdGF0ZS5jcmVhdGluZ1Byb2plY3RcblxuICAgIGlmIChuZXh0TW9kaWZpZWQgIT09IHRoaXMuc3RhdGUubW9kaWZpZWQpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBtb2RpZmllZDogbmV4dE1vZGlmaWVkIH0sIHRoZW4pXG4gICAgfSBlbHNlIGlmICh0aGVuKSB7XG4gICAgICB0aGVuKClcbiAgICB9XG4gIH1cblxuICBnZW5lcmF0ZVRvb2xiYXJNZW51ID0gKCkgPT4ge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6IHRoaXMudCgnZWRpdG9yOm1lbnViYXIubmV3UHJvamVjdCcpLFxuICAgICAgICBhY3Rpb246IHRoaXMub25OZXdQcm9qZWN0XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiB0aGlzLnQoJ2VkaXRvcjptZW51YmFyLnNhdmVQcm9qZWN0JyksXG4gICAgICAgIGhvdGtleTogYCR7Y21kT3JDdHJsU3RyaW5nfSArIFNgLFxuICAgICAgICBhY3Rpb246IHRoaXMub25TYXZlUHJvamVjdFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogdGhpcy50KCdlZGl0b3I6bWVudWJhci5zYXZlQXMnKSxcbiAgICAgICAgYWN0aW9uOiB0aGlzLm9uRHVwbGljYXRlUHJvamVjdFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogdGhpcy50KCdlZGl0b3I6bWVudWJhci5leHBvcnRHTEInKSwgLy8gVE9ETzogRGlzYWJsZWQgdGVtcG9yYXJpbHkgdGlsbCB3b3JrZXJzIGFyZSB3b3JraW5nXG4gICAgICAgIGFjdGlvbjogdGhpcy5vbkV4cG9ydFByb2plY3RcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6IHRoaXMudCgnZWRpdG9yOm1lbnViYXIuaW1wb3J0UHJvamVjdCcpLFxuICAgICAgICBhY3Rpb246IHRoaXMub25JbXBvcnRMZWdhY3lQcm9qZWN0XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiB0aGlzLnQoJ2VkaXRvcjptZW51YmFyLmV4cG9ydFByb2plY3QnKSxcbiAgICAgICAgYWN0aW9uOiB0aGlzLm9uRXhwb3J0TGVnYWN5UHJvamVjdFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogdGhpcy50KCdlZGl0b3I6bWVudWJhci5xdWl0JyksXG4gICAgICAgIGFjdGlvbjogdGhpcy5vbk9wZW5Qcm9qZWN0XG4gICAgICB9XG4gICAgXVxuICB9XG5cbiAgc2V0RGVidWdpbmZvID0gKCkgPT4ge1xuICAgIGNvbnN0IGdsID0gU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnJlbmRlcmVyLndlYmdsUmVuZGVyZXIuZ2V0Q29udGV4dCgpXG5cbiAgICBjb25zdCBkZWJ1Z0luZm8gPSBnbC5nZXRFeHRlbnNpb24oJ1dFQkdMX2RlYnVnX3JlbmRlcmVyX2luZm8nKVxuXG4gICAgbGV0IHdlYmdsVmVuZG9yID0gJ1Vua25vd24nXG4gICAgbGV0IHdlYmdsUmVuZGVyZXIgPSAnVW5rbm93bidcblxuICAgIGlmIChkZWJ1Z0luZm8pIHtcbiAgICAgIHdlYmdsVmVuZG9yID0gZ2wuZ2V0UGFyYW1ldGVyKGRlYnVnSW5mby5VTk1BU0tFRF9WRU5ET1JfV0VCR0wpXG4gICAgICB3ZWJnbFJlbmRlcmVyID0gZ2wuZ2V0UGFyYW1ldGVyKGRlYnVnSW5mby5VTk1BU0tFRF9SRU5ERVJFUl9XRUJHTClcbiAgICB9XG5cbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihFZGl0b3JFdmVudHMuUkVOREVSRVJfSU5JVElBTElaRUQudG9TdHJpbmcoKSwgdGhpcy5zZXREZWJ1Z2luZm8pXG4gIH1cblxuICAvKipcbiAgICogIERpYWxvZyBDb250ZXh0XG4gICAqL1xuXG4gIHNob3dEaWFsb2cgPSAoRGlhbG9nQ29tcG9uZW50LCBkaWFsb2dQcm9wcyA9IHt9KSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBEaWFsb2dDb21wb25lbnQsXG4gICAgICBkaWFsb2dQcm9wc1xuICAgIH0pXG4gIH1cblxuICBoaWRlRGlhbG9nID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgRGlhbG9nQ29tcG9uZW50OiBudWxsLFxuICAgICAgZGlhbG9nUHJvcHM6IHt9XG4gICAgfSlcbiAgfVxuXG4gIGRpYWxvZ0NvbnRleHQgPSB7XG4gICAgc2hvd0RpYWxvZzogdGhpcy5zaG93RGlhbG9nLFxuICAgIGhpZGVEaWFsb2c6IHRoaXMuaGlkZURpYWxvZ1xuICB9XG5cbiAgLyoqXG4gICAqIFNjZW5lIEV2ZW50IEhhbmRsZXJzXG4gICAqL1xuXG4gIG9uRWRpdG9yRXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICBpZiAoZXJyb3JbJ2Fib3J0ZWQnXSkge1xuICAgICAgdGhpcy5oaWRlRGlhbG9nKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG5cbiAgICB0aGlzLnNob3dEaWFsb2coRXJyb3JEaWFsb2csIHtcbiAgICAgIHRpdGxlOiBlcnJvci50aXRsZSB8fCB0aGlzLnQoJ2VkaXRvcjplcnJvcicpLFxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCB0aGlzLnQoJ2VkaXRvcjplcnJvck1zZycpLFxuICAgICAgZXJyb3JcbiAgICB9KVxuICB9XG5cbiAgb25Qcm9qZWN0TG9hZGVkID0gKCkgPT4ge1xuICAgIHRoaXMudXBkYXRlTW9kaWZpZWRTdGF0ZSgpXG4gIH1cblxuICB1cGRhdGVTZXR0aW5nKGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCBzZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24odGhpcy5zdGF0ZS5zZXR0aW5nc0NvbnRleHQuc2V0dGluZ3MsIHsgW2tleV06IHZhbHVlIH0pXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VkaXRvci1zZXR0aW5ncycsIEpTT04uc3RyaW5naWZ5KHNldHRpbmdzKSlcbiAgICBQcm9qZWN0TWFuYWdlci5pbnN0YW5jZS5zZXR0aW5ncyA9IHNldHRpbmdzXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuZW1pdEV2ZW50KEVkaXRvckV2ZW50cy5TRVRUSU5HU19DSEFOR0VEKVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2V0dGluZ3NDb250ZXh0OiB7XG4gICAgICAgIC4uLnRoaXMuc3RhdGUuc2V0dGluZ3NDb250ZXh0LFxuICAgICAgICBzZXR0aW5nc1xuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogIFByb2plY3QgQWN0aW9uc1xuICAgKi9cblxuICBjcmVhdGVQcm9qZWN0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgcGFyZW50U2NlbmVJZCB9ID0gdGhpcy5zdGF0ZSBhcyBhbnlcbiAgICB0aGlzLnNob3dEaWFsb2coUHJvZ3Jlc3NEaWFsb2csIHtcbiAgICAgIHRpdGxlOiB0aGlzLnQoJ2VkaXRvcjpnZW5lcmF0ZVNjcmVlbnNob3QnKSxcbiAgICAgIG1lc3NhZ2U6IHRoaXMudCgnZWRpdG9yOmdlbmVyYXRlU2NyZWVuc2hvdE1zZycpXG4gICAgfSlcblxuICAgIC8vIFdhaXQgZm9yIDVtcyBzbyB0aGF0IHRoZSBQcm9ncmVzc0RpYWxvZyBzaG93cyB1cC5cbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1KSlcblxuICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBTY2VuZU1hbmFnZXIuaW5zdGFuY2UudGFrZVNjcmVlbnNob3QoNTEyLCAzMjApXG5cbiAgICBjb25zdCByZXN1bHQ6IGFueSA9IChhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5zaG93RGlhbG9nKFNhdmVOZXdQcm9qZWN0RGlhbG9nLCB7XG4gICAgICAgIHRodW1ibmFpbFVybDogVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKSxcbiAgICAgICAgaW5pdGlhbE5hbWU6IFNjZW5lTWFuYWdlci5pbnN0YW5jZS5zY2VuZS5uYW1lLFxuICAgICAgICBvbkNvbmZpcm06IHJlc29sdmUsXG4gICAgICAgIG9uQ2FuY2VsOiByZXNvbHZlXG4gICAgICB9KVxuICAgIH0pKSBhcyBhbnlcblxuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICB0aGlzLmhpZGVEaWFsb2coKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICBjb25zdCBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKClcblxuICAgIHRoaXMuc2hvd0RpYWxvZyhQcm9ncmVzc0RpYWxvZywge1xuICAgICAgdGl0bGU6IHRoaXMudCgnZWRpdG9yOnNhdmluZycpLFxuICAgICAgbWVzc2FnZTogdGhpcy50KCdlZGl0b3I6c2F2aW5nTXNnJyksXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgb25DYW5jZWw6ICgpID0+IHtcbiAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KClcbiAgICAgICAgdGhpcy5oaWRlRGlhbG9nKClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuZXhlY3V0ZUNvbW1hbmQoRWRpdG9yQ29tbWFuZHMuTU9ESUZZX1BST1BFUlRZLCBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmUsIHtcbiAgICAgIHByb3BlcnRpZXM6IHsgbmFtZTogcmVzdWx0Lm5hbWUgfVxuICAgIH0pXG4gICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lLnNldE1ldGFkYXRhKHsgbmFtZTogcmVzdWx0Lm5hbWUgfSlcblxuICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBjcmVhdGVQcm9qZWN0KFxuICAgICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lLFxuICAgICAgcGFyZW50U2NlbmVJZCxcbiAgICAgIGJsb2IsXG4gICAgICBhYm9ydENvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgdGhpcy5zaG93RGlhbG9nLFxuICAgICAgdGhpcy5oaWRlRGlhbG9nXG4gICAgKVxuXG4gICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lTW9kaWZpZWQgPSBmYWxzZVxuICAgIGdsb2JhbFRoaXMuY3VycmVudFByb2plY3RJRCA9IHByb2plY3QucHJvamVjdF9pZFxuXG4gICAgY29uc3QgcGF0aFBhcmFtcyA9IHRoaXMuc3RhdGUucGF0aFBhcmFtc1xuICAgIHBhdGhQYXJhbXMuc2V0KCdwcm9qZWN0SWQnLCBwcm9qZWN0LnByb2plY3RfaWQpXG4gICAgdGhpcy51cGRhdGVNb2RpZmllZFN0YXRlKCgpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBjcmVhdGluZ1Byb2plY3Q6IHRydWUsIHByb2plY3QsIHBhdGhQYXJhbXMgfSwgKCkgPT4ge1xuICAgICAgICB0aGlzLnByb3BzLmhpc3RvcnkucmVwbGFjZShgL2VkaXRvci9wcm9qZWN0cy8ke3Byb2plY3QucHJvamVjdF9pZH1gKVxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgY3JlYXRpbmdQcm9qZWN0OiBmYWxzZSB9KVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgcmV0dXJuIHByb2plY3RcbiAgfVxuXG4gIG9uTmV3UHJvamVjdCA9IGFzeW5jICgpID0+IHtcbiAgICB0aGlzLnByb3BzLmhpc3RvcnkucHVzaCgnL2VkaXRvci9wcm9qZWN0cy9uZXcnKVxuICB9XG5cbiAgb25PcGVuUHJvamVjdCA9ICgpID0+IHtcbiAgICB0aGlzLnByb3BzLmhpc3RvcnkucHVzaCgnL2VkaXRvci9wcm9qZWN0cycpXG4gIH1cblxuICBvbkR1cGxpY2F0ZVByb2plY3QgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpXG4gICAgdGhpcy5zaG93RGlhbG9nKFByb2dyZXNzRGlhbG9nLCB7XG4gICAgICB0aXRsZTogdGhpcy50KCdlZGl0b3I6ZHVwbGljYXRpbmcnKSxcbiAgICAgIG1lc3NhZ2U6IHRoaXMudCgnZWRpdG9yOmR1cGxpY2F0aW5nTXNnJyksXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgb25DYW5jZWw6ICgpID0+IHtcbiAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KClcbiAgICAgICAgdGhpcy5oaWRlRGlhbG9nKClcbiAgICAgIH1cbiAgICB9KVxuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUpKVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBuZXdQcm9qZWN0ID0gYXdhaXQgdGhpcy5jcmVhdGVQcm9qZWN0KClcbiAgICAgIFNjZW5lTWFuYWdlci5pbnN0YW5jZS5zY2VuZU1vZGlmaWVkID0gZmFsc2VcbiAgICAgIHRoaXMudXBkYXRlTW9kaWZpZWRTdGF0ZSgpXG5cbiAgICAgIHRoaXMuaGlkZURpYWxvZygpXG4gICAgICBjb25zdCBwYXRoUGFyYW1zID0gdGhpcy5zdGF0ZS5wYXRoUGFyYW1zXG4gICAgICBwYXRoUGFyYW1zLnNldCgncHJvamVjdElkJywgbmV3UHJvamVjdC5wcm9qZWN0X2lkKVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHBhdGhQYXJhbXM6IHBhdGhQYXJhbXMgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcblxuICAgICAgdGhpcy5zaG93RGlhbG9nKEVycm9yRGlhbG9nLCB7XG4gICAgICAgIHRpdGxlOiB0aGlzLnQoJ2VkaXRvcjpzYXZpbmdFcnJvcicpLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIHx8IHRoaXMudCgnZWRpdG9yOnNhdmluZ0Vycm9yTXNnJylcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgb25FeHBvcnRQcm9qZWN0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5zaG93RGlhbG9nKEV4cG9ydFByb2plY3REaWFsb2csIHtcbiAgICAgICAgZGVmYXVsdE9wdGlvbnM6IE9iamVjdC5hc3NpZ24oe30sIFNjZW5lTWFuYWdlci5EZWZhdWx0RXhwb3J0T3B0aW9ucyksXG4gICAgICAgIG9uQ29uZmlybTogcmVzb2x2ZSxcbiAgICAgICAgb25DYW5jZWw6IHJlc29sdmVcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgdGhpcy5oaWRlRGlhbG9nKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKVxuXG4gICAgdGhpcy5zaG93RGlhbG9nKFByb2dyZXNzRGlhbG9nLCB7XG4gICAgICB0aXRsZTogdGhpcy50KCdlZGl0b3I6ZXhwb3J0aW5nJyksXG4gICAgICBtZXNzYWdlOiB0aGlzLnQoJ2VkaXRvcjpleHBvcnRpbmdNc2cnKSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgICBvbkNhbmNlbDogKCkgPT4gYWJvcnRDb250cm9sbGVyLmFib3J0KClcbiAgICB9KVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZ2xiQmxvYiB9ID0gYXdhaXQgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLmV4cG9ydFNjZW5lKG9wdGlvbnMpXG5cbiAgICAgIHRoaXMuaGlkZURpYWxvZygpXG5cbiAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gICAgICBlbC5kb3dubG9hZCA9IFNjZW5lTWFuYWdlci5pbnN0YW5jZS5zY2VuZS5uYW1lICsgJy5nbGInXG4gICAgICBlbC5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChnbGJCbG9iKVxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbClcbiAgICAgIGVsLmNsaWNrKClcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWwpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvclsnYWJvcnRlZCddKSB7XG4gICAgICAgIHRoaXMuaGlkZURpYWxvZygpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxuXG4gICAgICB0aGlzLnNob3dEaWFsb2coRXJyb3JEaWFsb2csIHtcbiAgICAgICAgdGl0bGU6IHRoaXMudCgnZWRpdG9yOmV4cG9ydGluZ0Vycm9yJyksXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgdGhpcy50KCdlZGl0b3I6ZXhwb3J0aW5nRXJyb3JNc2cnKSxcbiAgICAgICAgZXJyb3JcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgb25JbXBvcnRMZWdhY3lQcm9qZWN0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGNvbmZpcm0gPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5zaG93RGlhbG9nKENvbmZpcm1EaWFsb2csIHtcbiAgICAgICAgdGl0bGU6IHRoaXMudCgnZWRpdG9yOmltcG9ydExlZ2FjeScpLFxuICAgICAgICBtZXNzYWdlOiB0aGlzLnQoJ2VkaXRvcjppbXBvcnRMZWdhY3lNc2cnKSxcbiAgICAgICAgb25Db25maXJtOiAoKSA9PiByZXNvbHZlKHRydWUpLFxuICAgICAgICBvbkNhbmNlbDogKCkgPT4gcmVzb2x2ZShmYWxzZSlcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHRoaXMuaGlkZURpYWxvZygpXG5cbiAgICBpZiAoIWNvbmZpcm0pIHJldHVyblxuXG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXG4gICAgZWwudHlwZSA9ICdmaWxlJ1xuICAgIGVsLmFjY2VwdCA9ICcud29ybGQnXG4gICAgZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIGVsLm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgaWYgKGVsLmZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgZmlsZVJlYWRlcjogYW55ID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZSgoZmlsZVJlYWRlciBhcyBhbnkpLnJlc3VsdClcblxuICAgICAgICAgIGlmIChqc29uLm1ldGFkYXRhKSB7XG4gICAgICAgICAgICBkZWxldGUganNvbi5tZXRhZGF0YS5zY2VuZVVybFxuICAgICAgICAgICAgZGVsZXRlIGpzb24ubWV0YWRhdGEuc2NlbmVJZFxuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuaW1wb3J0UHJvamVjdChqc29uKVxuICAgICAgICB9XG4gICAgICAgIGZpbGVSZWFkZXIucmVhZEFzVGV4dChlbC5maWxlc1swXSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWwuY2xpY2soKVxuICB9XG5cbiAgb25FeHBvcnRMZWdhY3lQcm9qZWN0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgcHJvamVjdCB9ID0gdGhpcy5zdGF0ZVxuICAgIGNvbnN0IHByb2plY3RGaWxlID0gYXdhaXQgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lLnNlcmlhbGl6ZShwcm9qZWN0LnByb2plY3RfaWQpXG5cbiAgICBpZiAocHJvamVjdEZpbGUubWV0YWRhdGEpIHtcbiAgICAgIGRlbGV0ZSBwcm9qZWN0RmlsZS5tZXRhZGF0YS5zY2VuZVVybFxuICAgICAgZGVsZXRlIHByb2plY3RGaWxlLm1ldGFkYXRhLnNjZW5lSWRcbiAgICB9XG5cbiAgICBjb25zdCBwcm9qZWN0SnNvbiA9IEpTT04uc3RyaW5naWZ5KHByb2plY3RGaWxlKVxuICAgIGNvbnN0IHByb2plY3RCbG9iID0gbmV3IEJsb2IoW3Byb2plY3RKc29uXSlcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxuICAgIGNvbnN0IGZpbGVOYW1lID0gU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lLm5hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICctJylcbiAgICBlbC5kb3dubG9hZCA9IGZpbGVOYW1lICsgJy53b3JsZCdcbiAgICBlbC5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChwcm9qZWN0QmxvYilcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsKVxuICAgIGVsLmNsaWNrKClcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsKVxuICB9XG5cbiAgb25TYXZlUHJvamVjdCA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKClcblxuICAgIHRoaXMuc2hvd0RpYWxvZyhQcm9ncmVzc0RpYWxvZywge1xuICAgICAgdGl0bGU6IHRoaXMudCgnZWRpdG9yOnNhdmluZycpLFxuICAgICAgbWVzc2FnZTogdGhpcy50KCdlZGl0b3I6c2F2aW5nTXNnJyksXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgb25DYW5jZWw6ICgpID0+IHtcbiAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KClcbiAgICAgICAgdGhpcy5oaWRlRGlhbG9nKClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gV2FpdCBmb3IgNW1zIHNvIHRoYXQgdGhlIFByb2dyZXNzRGlhbG9nIHNob3dzIHVwLlxuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUpKVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgcHJvamVjdCB9ID0gdGhpcy5zdGF0ZVxuICAgICAgaWYgKHByb2plY3QpIHtcbiAgICAgICAgY29uc3QgbmV3UHJvamVjdCA9IGF3YWl0IHNhdmVQcm9qZWN0KHByb2plY3QucHJvamVjdF9pZCwgYWJvcnRDb250cm9sbGVyLnNpZ25hbClcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgcHJvamVjdDogbmV3UHJvamVjdCB9KVxuICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0gdGhpcy5zdGF0ZS5wYXRoUGFyYW1zXG4gICAgICAgIHBhdGhQYXJhbXMuc2V0KCdwcm9qZWN0SWQnLCBuZXdQcm9qZWN0LnByb2plY3RfaWQpXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBwYXRoUGFyYW1zOiBwYXRoUGFyYW1zIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZVByb2plY3QoKVxuICAgICAgfVxuXG4gICAgICBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmVNb2RpZmllZCA9IGZhbHNlXG4gICAgICB0aGlzLnVwZGF0ZU1vZGlmaWVkU3RhdGUoKVxuXG4gICAgICB0aGlzLmhpZGVEaWFsb2coKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxuXG4gICAgICB0aGlzLnNob3dEaWFsb2coRXJyb3JEaWFsb2csIHtcbiAgICAgICAgdGl0bGU6IHRoaXMudCgnZWRpdG9yOnNhdmluZ0Vycm9yJyksXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgdGhpcy50KCdlZGl0b3I6c2F2aW5nRXJyb3JNc2cnKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvLyBDdXJyZW50bHkgZG9lc24ndCB3b3JrXG4gIG9uUHVibGlzaFByb2plY3QgPSBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBwcm9qZWN0ID0gdGhpcy5zdGF0ZS5wcm9qZWN0XG5cbiAgICAgIGlmICghcHJvamVjdCkge1xuICAgICAgICBwcm9qZWN0ID0gYXdhaXQgdGhpcy5jcmVhdGVQcm9qZWN0KClcbiAgICAgIH1cblxuICAgICAgaWYgKCFwcm9qZWN0KSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBwcm9qZWN0ID0gYXdhaXQgcHVibGlzaFByb2plY3QocHJvamVjdCwgdGhpcy5zaG93RGlhbG9nLCB0aGlzLmhpZGVEaWFsb2cpXG5cbiAgICAgIGlmICghcHJvamVjdCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lTW9kaWZpZWQgPSBmYWxzZVxuICAgICAgdGhpcy51cGRhdGVNb2RpZmllZFN0YXRlKClcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHByb2plY3QgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yWydhYm9ydGVkc2V0dGluZ3NDb250ZXh0J10pIHtcbiAgICAgICAgdGhpcy5oaWRlRGlhbG9nKClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG4gICAgICB0aGlzLnNob3dEaWFsb2coRXJyb3JEaWFsb2csIHtcbiAgICAgICAgdGl0bGU6IHRoaXMudCgnZWRpdG9yOnB1Ymxpc2hpbmdFcnJvcicpLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIHx8IHRoaXMudCgnZWRpdG9yOnB1Ymxpc2hpbmdFcnJvck1zZycpLFxuICAgICAgICBlcnJvclxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBnZXRTY2VuZUlkKCkge1xuICAgIGNvbnN0IHsgcHJvamVjdCB9ID0gdGhpcy5zdGF0ZSBhcyBhbnlcbiAgICByZXR1cm4gKFxuICAgICAgKHByb2plY3QgJiYgcHJvamVjdC5zY2VuZSAmJiBwcm9qZWN0LnNjZW5lLnNjZW5lX2lkKSB8fFxuICAgICAgKFNjZW5lTWFuYWdlci5pbnN0YW5jZS5zY2VuZSAmJlxuICAgICAgICBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmUubWV0YWRhdGEgJiZcbiAgICAgICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lLm1ldGFkYXRhLnNjZW5lSWQpXG4gICAgKVxuICB9XG5cbiAgb25PcGVuU2NlbmUgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2NlbmVJZCA9IHRoaXMuZ2V0U2NlbmVJZCgpXG5cbiAgICBpZiAoc2NlbmVJZCkge1xuICAgICAgY29uc3QgdXJsID0gZ2V0U2NlbmVVcmwoc2NlbmVJZClcbiAgICAgIHdpbmRvdy5vcGVuKHVybClcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBEaWFsb2dDb21wb25lbnQsIGRpYWxvZ1Byb3BzLCBzZXR0aW5nc0NvbnRleHQgfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCB0b29sYmFyTWVudSA9IHRoaXMuZ2VuZXJhdGVUb29sYmFyTWVudSgpXG4gICAgLy8gY29uc3QgaXNQdWJsaXNoZWRTY2VuZSA9ICEhdGhpcy5nZXRTY2VuZUlkKClcbiAgICAvLyBjb25zdCBsb2NhdGlvbnMgPSB1c2VMb2NhdGlvblN0YXRlKCkubG9jYXRpb25zLmxvY2F0aW9ucy52YWx1ZVxuICAgIC8vIGxldCBhc3NpZ25lZVNjZW5lXG4gICAgLy8gaWYgKGxvY2F0aW9ucykge1xuICAgIC8vICAgbG9jYXRpb25zLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAvLyAgICAgaWYgKGVsZW1lbnQuc2NlbmVJZCA9PT0gdGhpcy5zdGF0ZS5xdWVyeVBhcmFtcy5nZXQoJ3Byb2plY3RJZCcpKSB7XG4gICAgLy8gICAgICAgYXNzaWduZWVTY2VuZSA9IGVsZW1lbnRcbiAgICAvLyAgICAgfVxuICAgIC8vICAgfSlcbiAgICAvLyB9XG5cbiAgICBsZXQgZGVmYXVsdExheW91dCA9IHtcbiAgICAgIGRvY2tib3g6IHtcbiAgICAgICAgbW9kZTogJ2hvcml6b250YWwnIGFzIERvY2tNb2RlLFxuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1vZGU6ICd2ZXJ0aWNhbCcgYXMgRG9ja01vZGUsXG4gICAgICAgICAgICBzaXplOiA4LFxuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRhYnM6IFt7IGlkOiAndmlld1BhbmVsJywgdGl0bGU6ICdWaWV3cG9ydCcsIGNvbnRlbnQ6IDxkaXYgLz4gfV0sXG4gICAgICAgICAgICAgICAgc2l6ZTogMVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtb2RlOiAndmVydGljYWwnIGFzIERvY2tNb2RlLFxuICAgICAgICAgICAgc2l6ZTogMixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0YWJzOiBbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAnaGllcmFyY2h5UGFuZWwnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogKFxuICAgICAgICAgICAgICAgICAgICAgIDxQYW5lbERyYWdDb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxJY29uIGFzPXtQcm9qZWN0RGlhZ3JhbX0gc2l6ZT17MTJ9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxUaXRsZT5IaWVyYXJjaHk8L1BhbmVsVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9QYW5lbERyYWdDb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IDxIaWVyYXJjaHlQYW5lbENvbnRhaW5lciAvPlxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRhYnM6IFtcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdwcm9wZXJ0aWVzUGFuZWwnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogKFxuICAgICAgICAgICAgICAgICAgICAgIDxQYW5lbERyYWdDb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxJY29uIGFzPXtTbGlkZXJzSH0gc2l6ZT17MTJ9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxUaXRsZT5Qcm9wZXJ0aWVzPC9QYW5lbFRpdGxlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvUGFuZWxEcmFnQ29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiA8UHJvcGVydGllc1BhbmVsQ29udGFpbmVyIC8+XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZDogJ2Fzc2V0c1BhbmVsJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdFbGVtZW50cycsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IDxBc3NldHNQYW5lbCAvPlxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdmaWxlQnJvd3NlclBhbmVsJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IChcbiAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxEcmFnQ29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFBhbmVsSWNvbiBhcz17QXJjaGl2ZX0gc2l6ZT17MTJ9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxUaXRsZT5GaWxlIEJyb3dzZXI8L1BhbmVsVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9QYW5lbERyYWdDb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IDxGaWxlQnJvd3NlclBhbmVsIC8+XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxTdHlsZWRFZGl0b3JDb250YWluZXIgaWQ9XCJlZGl0b3ItY29udGFpbmVyXCI+XG4gICAgICAgIDxTZXR0aW5nc0NvbnRleHRQcm92aWRlciB2YWx1ZT17c2V0dGluZ3NDb250ZXh0fT5cbiAgICAgICAgICA8RGlhbG9nQ29udGV4dFByb3ZpZGVyIHZhbHVlPXt0aGlzLmRpYWxvZ0NvbnRleHR9PlxuICAgICAgICAgICAgPERuZFByb3ZpZGVyIGJhY2tlbmQ9e0hUTUw1QmFja2VuZH0+XG4gICAgICAgICAgICAgIDxEcmFnTGF5ZXIgLz5cbiAgICAgICAgICAgICAge3Rvb2xiYXJNZW51ICYmIDxUb29sQmFyIG1lbnU9e3Rvb2xiYXJNZW51fSAvPn1cbiAgICAgICAgICAgICAgPFdvcmtzcGFjZUNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICA8Vmlld3BvcnRQYW5lbENvbnRhaW5lciAvPlxuICAgICAgICAgICAgICAgIDxEb2NrQ29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgPERvY2tMYXlvdXRcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdExheW91dD17ZGVmYXVsdExheW91dH1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgcG9pbnRlckV2ZW50czogJ25vbmUnLCBwb3NpdGlvbjogJ2Fic29sdXRlJywgbGVmdDogNSwgdG9wOiA1NSwgcmlnaHQ6IDUsIGJvdHRvbTogNSB9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0RvY2tDb250YWluZXI+XG4gICAgICAgICAgICAgIDwvV29ya3NwYWNlQ29udGFpbmVyPlxuICAgICAgICAgICAgICA8TW9kYWxcbiAgICAgICAgICAgICAgICBhcmlhSGlkZUFwcD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgaXNPcGVuPXshIURpYWxvZ0NvbXBvbmVudH1cbiAgICAgICAgICAgICAgICBvblJlcXVlc3RDbG9zZT17dGhpcy5oaWRlRGlhbG9nfVxuICAgICAgICAgICAgICAgIHNob3VsZENsb3NlT25PdmVybGF5Q2xpY2s9e2ZhbHNlfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIk1vZGFsXCJcbiAgICAgICAgICAgICAgICBvdmVybGF5Q2xhc3NOYW1lPVwiT3ZlcmxheVwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7RGlhbG9nQ29tcG9uZW50ICYmIChcbiAgICAgICAgICAgICAgICAgIDxEaWFsb2dDb21wb25lbnQgb25Db25maXJtPXt0aGlzLmhpZGVEaWFsb2d9IG9uQ2FuY2VsPXt0aGlzLmhpZGVEaWFsb2d9IHsuLi5kaWFsb2dQcm9wc30gLz5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L01vZGFsPlxuICAgICAgICAgICAgPC9EbmRQcm92aWRlcj5cbiAgICAgICAgICA8L0RpYWxvZ0NvbnRleHRQcm92aWRlcj5cbiAgICAgICAgPC9TZXR0aW5nc0NvbnRleHRQcm92aWRlcj5cbiAgICAgIDwvU3R5bGVkRWRpdG9yQ29udGFpbmVyPlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoVHJhbnNsYXRpb24oKSh3aXRoUm91dGVyKEVkaXRvckNvbnRhaW5lcikpXG4iXSwibmFtZXMiOlsiX3R5cGVvZiIsInZlcmlmeUludmFyaWFudHMiLCJvd25LZXlzIiwiX2RlZmluZVByb3BlcnR5IiwiX29iamVjdFNwcmVhZCIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwiX2NsYXNzQ2FsbENoZWNrIiwiX2NyZWF0ZUNsYXNzIiwiaW5pdGlhbFN0YXRlIiwid2l0aG91dCIsImRpcnR5SGFuZGxlcklkcyIsImRyYWdPZmZzZXQiLCJyZWZDb3VudCIsImRyYWdPcGVyYXRpb24iLCJzdGF0ZUlkIiwiX2dldFNvdXJjZUNsaWVudE9mZnNldCIsIl9nZXREaWZmZXJlbmNlRnJvbUluaXRpYWxPZmZzZXQiLCJpbmRleCIsIl9hcnJheVdpdGhIb2xlcyIsIl9pdGVyYWJsZVRvQXJyYXlMaW1pdCIsIl91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSIsIl9ub25JdGVyYWJsZVJlc3QiLCJfYXJyYXlMaWtlVG9BcnJheSIsIl9zbGljZWRUb0FycmF5IiwiX2FkZFNvdXJjZSIsIl9hZGRUYXJnZXQiLCJfcmVtb3ZlU291cmNlIiwiX3JlbW92ZVRhcmdldCIsIl9leGNsdWRlZCIsIm1lbW8iLCJ1c2VFZmZlY3QiLCJfanN4IiwiaXNTYWZhcmkiLCJOYXRpdmVUeXBlcy5GSUxFIiwiTmF0aXZlVHlwZXMuSFRNTCIsIk5hdGl2ZVR5cGVzLlVSTCIsIk5hdGl2ZVR5cGVzLlRFWFQiLCJSZWFjdC5mb3J3YXJkUmVmIiwiUmVhY3QuY3JlYXRlRWxlbWVudCIsIl9leHRlbmRzIiwiQ2FyZXRSaWdodCIsImlzRnJhZ21lbnQiLCJSZWFjdC51c2VTdGF0ZSIsIlJlYWN0LnVzZVJlZiIsIlJlYWN0LnVzZUVmZmVjdCIsImlzTWVtbyIsIl9pbmhlcml0cyIsIlJlc2l6ZU9ic2VydmVyIiwid2FybmluZyIsIlJlYWN0LmlzVmFsaWRFbGVtZW50IiwiUmVhY3QuY2xvbmVFbGVtZW50IiwiUmVhY3QuQ29tcG9uZW50IiwidXNlUmVmIiwicmFmIiwidXNlU3RhdGUiLCJERUZBVUxUX1NJWkUiLCJ1c2VNZW1vIiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIiwiUmVhY3QudXNlQ29udGV4dCIsIlJlYWN0LmNyZWF0ZUNvbnRleHQiLCJSZWFjdC51c2VNZW1vIiwidXNlQ2FsbGJhY2siLCJSZWFjdC51c2VMYXlvdXRFZmZlY3QiLCJPdmVyZmxvdyIsIkljb24iLCJSZWFjdC51c2VDYWxsYmFjayIsImZvcndhcmRSZWYiLCJ1c2VJbXBlcmF0aXZlSGFuZGxlIiwiY2FuVXNlRE9NIiwidXNlTGF5b3V0RWZmZWN0IiwiZ2V0VHJhbnNpdGlvbk5hbWUiLCJnZXRNb3Rpb24iLCJMRUZUIiwiZ2V0T2Zmc2V0IiwicmVxdWlyZSQkMCIsImlzRXF1YWwiLCJhZGRFdmVudExpc3RlbmVyIiwidW5kZWZpbmVkIiwiX3JlZ2VuZXJhdG9yUnVudGltZSIsIlJlYWN0LnVzZUltcGVyYXRpdmVIYW5kbGUiLCJSZWFjdC5DaGlsZHJlbiIsIkFsaWduIiwiaXNNb2JpbGUiLCJSZWFjdC5jcmVhdGVSZWYiLCJub29wIiwiYXV0b0FkanVzdE92ZXJmbG93IiwicGxhY2VtZW50cyIsInBsYWNlbWVudHNSdGwiLCJwb3B1cFBsYWNlbWVudE1hcCIsIk1lbnVDb250ZXh0UHJvdmlkZXIiLCJ1c2VNZXJnZWRTdGF0ZSIsIk1lbnUiLCJNZW51SXRlbSIsIlN1Yk1lbnUiLCJEaXZpZGVyIiwiUGxhY2VtZW50cyIsIlJlYWN0LkZyYWdtZW50IiwiRHJvcGRvd24iLCJBZGRCdXR0b24iLCJjcmVhdGVDb250ZXh0IiwiVGFiTm9kZSIsIk9wZXJhdGlvbk5vZGUiLCJUYWJOYXZMaXN0IiwiX19leHRlbmRzIiwiX19hc3NpZ24iLCJob2lzdFN0YXRpY3MiLCJSZWFjdERPTS5maW5kRE9NTm9kZSIsIlN1YlBvcHVwTWVudSIsImNvbm5lY3RlZCIsIl9fcmVzdCIsIkRyYWdNYW5hZ2VyLnJlbW92ZUhhbmRsZXJzIiwiRHJhZ01hbmFnZXIuYWRkSGFuZGxlcnMiLCJEcmFnTWFuYWdlci5pc0RyYWdnaW5nIiwiRHJhZ01hbmFnZXIuRHJhZ1N0YXRlIiwiYnJvd3NlclBhcnNlcnNMaXN0IiwiYnJvd3NlciIsImdlcldpbmRvd0JvcmRlciIsImRlYm91bmNlIiwidGhpcyIsIm1hcFdpbmRvd1RvRWxlbWVudCIsIm1hcEVsZW1lbnRUb1NjcmVlblJlY3QiLCJUYWJzIiwiQWxnb3JpdGhtLmZpeEZsb2F0UGFuZWxQb3MiLCJBbGdvcml0aG0uZml4TGF5b3V0RGF0YSIsIkRyYWdNYW5hZ2VyLmFkZERyYWdTdGF0ZUxpc3RlbmVyIiwiQWxnb3JpdGhtLm1heGltaXplIiwiQWxnb3JpdGhtLm1vdmVUb0Zyb250IiwiQWxnb3JpdGhtLnJlbW92ZUZyb21MYXlvdXQiLCJBbGdvcml0aG0uRmlsdGVyIiwiQWxnb3JpdGhtLmdldFVwZGF0ZWRPYmplY3QiLCJBbGdvcml0aG0uY29udmVyVG9QYW5lbCIsIkFsZ29yaXRobS5uZXh0WkluZGV4IiwiQWxnb3JpdGhtLmZsb2F0UGFuZWwiLCJBbGdvcml0aG0ucGFuZWxUb1dpbmRvdyIsIkFsZ29yaXRobS5hZGRUYWJUb1BhbmVsIiwiQWxnb3JpdGhtLmRvY2tQYW5lbFRvUGFuZWwiLCJBbGdvcml0aG0uZG9ja1BhbmVsVG9Cb3giLCJBbGdvcml0aG0uYWRkTmV4dFRvVGFiIiwiQWxnb3JpdGhtLmZpbmQiLCJBbGdvcml0aG0uZmluZE5lYXJlc3RQYW5lbCIsIkRyYWdNYW5hZ2VyLnJlbW92ZURyYWdTdGF0ZUxpc3RlbmVyIiwiU2VyaWFsaXplci5zYXZlTGF5b3V0RGF0YSIsIlNlcmlhbGl6ZXIubG9hZExheW91dERhdGEiLCJyZXNldFN0YXRlIiwibG9nIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsImFyaWFBcHBIaWRlciIsIl9zYWZlSFRNTEVsZW1lbnQiLCJyZXF1aXJlJCQxIiwicG9ydGFsT3Blbkluc3RhbmNlc18xIiwiYm9keVRyYXBfMSIsInJlcXVpcmUkJDIiLCJmb2N1c01hbmFnZXIiLCJyZXF1aXJlJCQzIiwicmVxdWlyZSQkNCIsInJlcXVpcmUkJDUiLCJjbGFzc0xpc3QiLCJyZXF1aXJlJCQ2IiwicmVxdWlyZSQkNyIsIk1vZGFsXzEiLCJNb2RhbCIsIkNvbXBvbmVudCIsImNyZWF0ZUVsZW1lbnQiLCJQdXJlQ29tcG9uZW50IiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UiLCJ1c2VDb250ZXh0IiwiVGhlbWVDb250ZXh0IiwiRnJhZ21lbnQiLCJOYW1lSW5wdXRHcm91cCIsIlRyYW5zZm9ybVByb3BlcnR5R3JvdXAiLCJzdHlsZXMudG9vbGJhcklucHV0R3JvdXAiLCJzdHlsZXMudG9vbEJ1dHRvbiIsInN0eWxlcy5zZWxlY3RlZCIsInN0eWxlcy50b29sYmFyTnVtZXJpY1N0ZXBwZXJJbnB1dCIsInN0eWxlcy5zZWxlY3RJbnB1dCIsInN0eWxlcy5wbGF5QnV0dG9uQ29udGFpbmVyIiwic3R5bGVzLnRvb2xJY29uIiwic3R5bGVzLnRvb2xiYXJDb250YWluZXIiLCJNYWluTWVudSIsImNvbnRyb2xzVGV4dCIsInN0eWxlcy52aWV3cG9ydENvbnRhaW5lciIsInN0eWxlcy52aWV3cG9ydENhbnZhcyIsInN0eWxlcy5jb250cm9sc1RleHQiLCJpMThuIiwic3R5bGVzIiwiUHVibGlzaERpYWxvZyIsIkhpZXJhcmNoeVBhbmVsQ29udGFpbmVyIiwiUHJvcGVydGllc1BhbmVsQ29udGFpbmVyIl0sIm1hcHBpbmdzIjoiNjdEQUFPLEdBQUksSUFFWCxBQUFDLFVBQVUsRUFBYSxDQUN0QixFQUFZLE9BQVksU0FDeEIsRUFBWSxPQUFZLFdBQ3ZCLElBQWdCLElBQWMsS0NMMUIsR0FBSSxJQUFjLHVCQUNkLEdBQWEsc0JBQ2IsR0FBc0IsK0JBQ3RCLEdBQVEsaUJBQ1IsR0FBTyxnQkFDUCxHQUFXLG9CQ0pmLFlBQXlCLEVBQWMsRUFBb0IsQ0FDaEUsTUFBTyxDQUNMLEtBQU0sR0FDTixRQUFTLENBQ1AsbUJBQW9CLEdBQXNCLEtBQzFDLGFBQWMsR0FBZ0IsT0NOcEMsWUFBaUIsRUFBSyxDQUE2QixNQUFJLE9BQU8sU0FBVyxZQUFjLE1BQU8sUUFBTyxVQUFhLFNBQVlBLEdBQVUsU0FBaUIsRUFBSyxDQUFFLE1BQU8sT0FBTyxJQUFpQkEsR0FBVSxTQUFpQixFQUFLLENBQUUsTUFBTyxJQUFPLE1BQU8sU0FBVyxZQUFjLEVBQUksY0FBZ0IsUUFBVSxJQUFRLE9BQU8sVUFBWSxTQUFXLE1BQU8sSUFBaUJBLEdBQVEsR0FVNVcsWUFBYSxFQUFLLEVBQU0sRUFBYyxDQUMzQyxNQUFPLEdBQUssTUFBTSxLQUFLLE9BQU8sU0FBVSxFQUFHLEVBQUcsQ0FDNUMsTUFBTyxJQUFLLEVBQUUsR0FBSyxFQUFFLEdBQUssR0FBZ0IsTUFDekMsR0FNRSxZQUFpQixFQUFPLEVBQU0sQ0FDbkMsTUFBTyxHQUFNLE9BQU8sU0FBVSxFQUFHLENBQy9CLE1BQU8sS0FBTSxJQWdCVixZQUFrQixFQUFPLENBQzlCLE1BQU9BLElBQVEsS0FBVyxTQVFyQixZQUFhLEVBQVEsRUFBUSxDQUNsQyxHQUFJLEdBQU0sR0FBSSxLQUVWLEVBQWEsU0FBb0IsRUFBTSxDQUN6QyxFQUFJLElBQUksRUFBTSxFQUFJLElBQUksR0FBUSxFQUFJLElBQUksR0FBUSxFQUFJ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
