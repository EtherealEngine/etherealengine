import{I as Cr,O as We,D as en,T as Pr,F as Qe,B as Pe,a as Kn,U as Xn,b as tn,c as Dr,d as Fr,e as Br,f as kr,g as De,L as nn,h as st,C as $n,i as Fe,j as ee,k as Yn,l as _t,m as sn,M as Be,n as rn,o as Ee,p as on,q as Ur,r as Nr,N as Gr,t as Jn,u as jr,v as Hr,w as qr,x as Zn,y as an,z as Vr,R as rt,A as es,E as zr,H as Wr,J as ln,K as Qr,X as Kr,Y as Xr,Z as $r,_ as ts,$ as ns,a0 as ss,s as Et,a1 as it,a2 as St,a3 as It,a4 as rs,a5 as Yr,a6 as is,a7 as Jr,a8 as Zr,G as ke,P as os,a9 as re,aa as as,ab as cn,ac as un,ad as ls,ae as Rt,af as Ue,ag as V,ah as pn,ai as ei,aj as Mt,ak as ti,V as _,al as ni,am as cs,an as Lt,ao as si,ap as Ke,aq as hn,ar as ri,as as ii,at as oi,Q as j,au as ai,av as us,aw as li,ax as ci,ay as ps,az as hs}from"./three.module.0404e109.js";import{_ as ui}from"./index.0040ebb6.js";import{f as pi,n as hi}from"./vendor.c8b8cc93.js";const Xe=typeof process!="object"||typeof process.versions!="object"||typeof process.versions.node=="undefined",fi={RESET_ENGINE:"CORE_RESET_ENGINE",INITIALIZED_ENGINE:"CORE_INITIALIZED_ENGINE",CONNECT_TO_WORLD:"CORE_CONNECT_TO_WORLD",CONNECT_TO_WORLD_TIMEOUT:"CORE_CONNECT_TO_WORLD_TIMEOUT",JOINED_WORLD:"CORE_JOINED_WORLD",LEAVE_WORLD:"CORE_LEAVE_WORLD",SCENE_LOADED:"CORE_SCENE_LOADED",ENABLE_SCENE:"CORE_ENABLE_SCENE",USER_ENGAGE:"CORE_USER_ENGAGE",WINDOW_FOCUS:"CORE_WINDOW_FOCUS",ENTITY_DEBUG_DATA:"CORE_ENTITY_DEBUG_DATA",OBJECT_HOVER:"INTERACTIVE_SYSTEM_OBJECT_HOVER",OBJECT_ACTIVATION:"INTERACTIVE_SYSTEM_OBJECT_ACTIVATION",PORTAL_REDIRECT_EVENT:"PHYSICS_SYSTEM_PORTAL_REDIRECT",XR_START:"WEBXR_RENDERER_SYSTEM_XR_START",XR_SESSION:"WEBXR_RENDERER_SYSTEM_XR_SESSION",XR_END:"WEBXR_RENDERER_SYSTEM_XR_END",CONNECT:"NETWORK_CONNECT",CONNECTION_LOST:"CORE_CONNECTION_LOST",AVATAR_DEBUG:"CORE_AVATAR_DEBUG",PHYSICS_DEBUG:"CORE_PHYSICS_DEBUG",START_SUSPENDED_CONTEXTS:"POSITIONAL_AUDIO_START_SUSPENDED_CONTEXTS",SUSPEND_POSITIONAL_AUDIO:"POSITIONAL_AUDIO_SUSPEND_POSITIONAL_AUDIO",BROWSER_NOT_SUPPORTED:"BROWSER_NOT_SUPPORTED"};class ne{static instance=new ne;static EVENTS=fi;_listeners={};reset(){Object.keys(ne.instance._listeners).forEach(e=>{delete ne.instance._listeners[e]})}once(e,t,...n){const s=r=>{ne.instance.removeEventListener(e,s),t(r)};ne.instance.addEventListener(e,s)}addEventListener(e,t,...n){const s=ne.instance._listeners;s[e]===void 0&&(s[e]=[]),s[e].indexOf(t)===-1&&s[e].push(t)}hasEventListener(e,t,...n){return ne.instance._listeners[e]!==void 0&&ne.instance._listeners[e].indexOf(t)!==-1}removeEventListener(e,t,...n){const s=ne.instance._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}removeAllListenersForEvent(e,t,...n){t?delete ne.instance._listeners[e]:ne.instance._listeners[e]=[]}dispatchEvent(e,...t){const n=ne.instance._listeners[e.type];if(n!==void 0){const s=n.slice(0);for(let r=0;r<s.length;r++)s[r].call(ne.instance,e,...t)}}}var Se={i8:"i8",ui8:"ui8",ui8c:"ui8c",i16:"i16",ui16:"ui16",i32:"i32",ui32:"ui32",f32:"f32",f64:"f64",eid:"eid"},Ot={i8:"Int8",ui8:"Uint8",ui8c:"Uint8Clamped",i16:"Int16",ui16:"Uint16",i32:"Int32",ui32:"Uint32",eid:"Uint32",f32:"Float32",f64:"Float64"},me={i8:Int8Array,ui8:Uint8Array,ui8c:Uint8ClampedArray,i16:Int16Array,ui16:Uint16Array,i32:Int32Array,ui32:Uint32Array,f32:Float32Array,f64:Float64Array,eid:Uint32Array},Ct={uint8:2**8,uint16:2**16,uint32:2**32},di=i=>e=>Math.ceil(e/i)*i,fs=di(4),mi=Symbol("storeRef"),ot=Symbol("storeSize"),yi=Symbol("storeMaps"),ye=Symbol("storeFlattened"),Pt=Symbol("storeBase"),ds=Symbol("storeType"),fn=Symbol("storeArrayCount"),we=Symbol("storeSubarrays"),at=Symbol("subarrayCursors"),ms=Symbol("subarray"),dn=Symbol("subarrayFrom"),mn=Symbol("subarrayTo"),yn=Symbol("subStore"),gn=Symbol("tagStore"),Dt=Symbol("indexType"),Ft=Symbol("indexBytes"),ys=Symbol("isEidType"),be={},gs=(i,e)=>{const t=new ArrayBuffer(e*i.BYTES_PER_ELEMENT),n=new i.constructor(t);return n.set(i,0),n},gi=(i,e)=>{if(ArrayBuffer.isView(i))i[e]=i.slice(0);else{const t=i[yn].slice(0);i[e]=i.map((n,s)=>{const r=i[s][dn],o=i[s][mn];return t.subarray(r,o)})}},wi=(i,e,t)=>{const n=i[at];let s=e[ds];const r=e[0].length,o=r<=Ct.uint8?Se.ui8:r<=Ct.uint16?Se.ui16:Se.ui32;if(n[s]===0){const c=i[fn][s],p=Array(c).fill(0).reduce((h,f)=>h+r,0),u=new me[s](fs(p*t));u.set(i[we][s]),i[we][s]=u,u[Dt]=Ot[o],u[Ft]=me[o].BYTES_PER_ELEMENT}const a=n[s];let l=0;for(let c=0;c<t;c++){const p=n[s]+c*r,u=p+r;e[c]=i[we][s].subarray(p,u),e[c][dn]=p,e[c][mn]=u,e[c][ms]=!0,e[c][Dt]=Ot[o],e[c][Ft]=me[o].BYTES_PER_ELEMENT,l=u}n[s]=l,e[yn]=i[we][s].subarray(a,l)},ws=(i,e,t)=>{Object.keys(e).forEach(n=>{const s=e[n];Array.isArray(s)?(wi(i,s,t),e[ye].push(s)):ArrayBuffer.isView(s)?(e[n]=gs(s,t),e[ye].push(e[n])):typeof s=="object"&&ws(i,e[n],t)})},bs=(i,e)=>{i[gn]||(i[ot]=e,i[ye].length=0,Object.keys(i[at]).forEach(t=>{i[at][t]=0}),ws(i,i,e))},vs=(i,e)=>{i[ye]&&i[ye].forEach(t=>{ArrayBuffer.isView(t)?t[e]=0:t[e].fill(0)})},bi=(i,e)=>{const t=e*me[i].BYTES_PER_ELEMENT,n=new ArrayBuffer(t),s=new me[i](n);return s[ys]=i===Se.eid,s},vi=(i,e,t)=>{const n=i[ot],s=Array(n).fill(0);s[ds]=e,s[ys]=e===Se.eid;const r=i[at],o=t<=Ct.uint8?Se.ui8:t<=Ct.uint16?Se.ui16:Se.ui32;if(!t)throw new Error("bitECS - Must define component array length");if(!me[e])throw new Error(`bitECS - Invalid component array property type ${e}`);if(!i[we][e]){const c=i[fn][e],p=Array(c).fill(0).reduce((h,f)=>h+t,0),u=new me[e](fs(p*n));i[we][e]=u,u[Dt]=Ot[o],u[Ft]=me[o].BYTES_PER_ELEMENT}const a=r[e];let l=0;for(let c=0;c<n;c++){const p=r[e]+c*t,u=p+t;s[c]=i[we][e].subarray(p,u),s[c][dn]=p,s[c][mn]=u,s[c][ms]=!0,s[c][Dt]=Ot[o],s[c][Ft]=me[o].BYTES_PER_ELEMENT,l=u}return r[e]=l,s[yn]=i[we][e].subarray(a,l),s},Ts=i=>Array.isArray(i)&&typeof i[0]=="string"&&typeof i[1]=="number",Ti=(i,e)=>{const t=Symbol("store");if(!i||!Object.keys(i).length)return be[t]={[ot]:e,[gn]:!0,[Pt]:()=>be[t]},be[t];i=JSON.parse(JSON.stringify(i));const n={},s=o=>{const a=Object.keys(o);for(const l of a)Ts(o[l])?(n[o[l][0]]||(n[o[l][0]]=0),n[o[l][0]]++):o[l]instanceof Object&&s(o[l])};s(i);const r={[ot]:e,[yi]:{},[we]:{},[mi]:t,[at]:Object.keys(me).reduce((o,a)=>({...o,[a]:0}),{}),[ye]:[],[fn]:n};if(i instanceof Object&&Object.keys(i).length){const o=(a,l)=>{if(typeof a[l]=="string")a[l]=bi(a[l],e),a[l][Pt]=()=>be[t],r[ye].push(a[l]);else if(Ts(a[l])){const[c,p]=a[l];a[l]=vi(r,c,p),a[l][Pt]=()=>be[t],r[ye].push(a[l])}else a[l]instanceof Object&&(a[l]=Object.keys(a[l]).reduce(o,a[l]));return a};return be[t]=Object.assign(Object.keys(i).reduce(o,i),r),be[t][Pt]=()=>be[t],be[t]}},Ne=()=>{const i=[],e=[];i.sort=function(r){const o=Array.prototype.sort.call(this,r);for(let a=0;a<i.length;a++)e[i[a]]=a;return o};const t=r=>i[e[r]]===r;return{add:r=>{t(r)||(e[r]=i.push(r)-1)},remove:r=>{if(!t(r))return;const o=e[r],a=i.pop();a!==r&&(i[o]=a,e[a]=o)},has:t,sparse:e,dense:i}},le=Symbol("entityMasks"),$e=Symbol("entityComponents"),Ie=Symbol("entitySparseSet"),lt=Symbol("entityArray"),xi=1e5,wn=0,ct=xi,Ai=()=>ct-ct/5,Bt=()=>ct,bn=[],_i=()=>wn,Ei=new Map,ka=i=>{if(wn>=Ai()){const t=ct,n=Math.ceil(t/2/4)*4,s=t+n;ct=s,qi(s),Bi(s),console.info(`\u{1F47E} bitECS - resizing all data stores from ${t} to ${s}`)}const e=bn.length>0?bn.shift():wn++;return i[Ie].add(e),Ei.set(e,i),i[vn].forEach(t=>{Ut(i,t,e)&&Nt(t,e)}),i[$e].set(e,new Set),e},Si=(i,e)=>{if(!!i[Ie].has(e)){i[kt].forEach(t=>{xn(i,t,e)}),bn.push(e),i[Ie].remove(e),i[$e].delete(e),i[Es].delete(i[En].get(e)),i[En].delete(e);for(let t=0;t<i[le].length;t++)i[le][t][e]=0}},xs=(i,e)=>Array.from(i[$e].get(e));function Ua(i){return()=>[i,"not"]}var kt=Symbol("queries"),vn=Symbol("notQueries"),Ii=Symbol("queryAny"),Ri=Symbol("queryAll"),Mi=Symbol("queryNone"),Re=Symbol("queryMap"),ut=Symbol("$dirtyQueries"),As=Symbol("queryComponents"),Li=i=>e=>{e[Re].has(i)||Tn(e,i);const t=e[Re].get(i),n=t.entered.dense.slice();return t.entered=Ne(),n},Oi=i=>e=>{e[Re].has(i)||Tn(e,i);const t=e[Re].get(i),n=t.exited.dense.slice();return t.exited=Ne(),n},Tn=(i,e)=>{const t=[],n=[],s=[];e[As].forEach(x=>{if(typeof x=="function"){const[S,M]=x();i[ge].has(S)||An(i,S),M==="not"&&n.push(S),M==="changed"&&(s.push(S),t.push(S))}else i[ge].has(x)||An(i,x),t.push(x)});const r=x=>i[ge].get(x),o=t.concat(n).map(r),a=Ne(),l=[],c=[],p=Ne(),u=Ne(),h=Ne(),f=o.map(x=>x.generationId).reduce((x,S)=>(x.includes(S)||x.push(S),x),[]),d=(x,S)=>(x[S.generationId]||(x[S.generationId]=0),x[S.generationId]|=S.bitflag,x),m=t.map(r).reduce(d,{}),w=n.map(r).reduce(d,{}),y=o.reduce(d,{}),b=t.filter(x=>!x[gn]).map(x=>Object.getOwnPropertySymbols(x).includes(ye)?x[ye]:[x]).reduce((x,S)=>x.concat(S),[]),E=b.map(x=>{const S=Symbol();return gi(x,S),x[S]},[]),R=Object.assign(a,{archetypes:l,changed:c,components:t,notComponents:n,changedComponents:s,allComponents:o,masks:m,notMasks:w,hasMasks:y,generations:f,flatProps:b,toRemove:p,entered:u,exited:h,shadows:E});i[Re].set(e,R),i[kt].add(R),o.forEach(x=>{x.queries.add(R)}),n.length&&i[vn].add(R);for(let x=0;x<_i();x++){if(!i[Ie].has(x))continue;Ut(i,R,x)&&Nt(R,x)}},Ci=(i,e)=>{e&&(i.changed=[]);const{flatProps:t,shadows:n}=i;for(let s=0;s<i.dense.length;s++){const r=i.dense[s];let o=!1;for(let a=0;a<t.length;a++){const l=t[a],c=n[a];if(ArrayBuffer.isView(l[r])){for(let p=0;p<l[r].length;p++)if(l[r][p]!==c[r][p]){o=!0;break}c[r].set(l[r])}else l[r]!==c[r]&&(o=!0,c[r]=l[r])}o&&i.changed.push(r)}return i.changed},Pi=(...i)=>{let e,t,n,s;if(Array.isArray(i[0])&&(e=i[0]),e===void 0||e[ge]!==void 0)return o=>o?o[lt]:e[lt];const r=function(o,a=!0){o[Re].has(r)||Tn(o,r);const l=o[Re].get(r);return Fi(o),l.changedComponents.length?Ci(l,a):l.dense};return r[As]=e,r[Ii]=t,r[Ri]=n,r[Mi]=s,r},Ut=(i,e,t)=>{const{masks:n,notMasks:s,generations:r}=e;for(let o=0;o<r.length;o++){const a=r[o],l=n[a],c=s[a],p=i[le][a][t];if(c&&(p&c)!=0||l&&(p&l)!==l)return!1}return!0},Nt=(i,e)=>{i.has(e)||(i.add(e),i.entered.add(e))},Di=i=>{for(let e=i.toRemove.dense.length-1;e>=0;e--){const t=i.toRemove.dense[e];i.toRemove.remove(t),i.remove(t)}},Fi=i=>{!i[ut].size||(i[ut].forEach(Di),i[ut].clear())},xn=(i,e,t)=>{!e.has(t)||e.toRemove.has(t)||(e.toRemove.add(t),i[ut].add(e),e.exited.add(t))},ge=Symbol("componentMap"),_s=[],Bi=i=>{_s.forEach(e=>bs(e,i))},ki=i=>{const e=Ti(i,Bt());return i&&Object.keys(i).length&&_s.push(e),e},Ui=i=>{i[ht]*=2,i[ht]>=2**31&&(i[ht]=1,i[le].push(new Uint32Array(i[pt])))},An=(i,e)=>{if(!e)throw new Error("bitECS - Cannot register null or undefined component");const t=new Set,n=new Set,s=new Set;i[kt].forEach(r=>{r.allComponents.includes(e)&&t.add(r)}),i[ge].set(e,{generationId:i[le].length-1,bitflag:i[ht],store:e,queries:t,notQueries:n,changedQueries:s}),e[ot]<Bt()&&bs(e,Bt()),Ui(i)},_n=(i,e,t)=>{const n=i[ge].get(e);if(!n)return!1;const{generationId:s,bitflag:r}=n;return(i[le][s][t]&r)===r},Ni=(i,e,t,n=!0)=>{if(t===void 0)throw new Error("bitECS - entity is undefined.");if(!i[Ie].has(t))throw new Error("bitECS - entity does not exist in the world.");if(i[ge].has(e)||An(i,e),_n(i,e,t))return;const s=i[ge].get(e),{generationId:r,bitflag:o,queries:a,notQueries:l}=s;i[le][r][t]|=o,a.forEach(c=>{c.toRemove.has(t)&&c.toRemove.remove(t);const p=Ut(i,c,t);p&&Nt(c,t),p||xn(i,c,t)}),i[$e].get(t).add(e),n&&vs(e,t)},Gi=(i,e,t,n=!1)=>{if(t===void 0)throw new Error("bitECS - entity is undefined.");if(!i[Ie].has(t))throw new Error("bitECS - entity does not exist in the world.");if(!_n(i,e,t))return;const s=i[ge].get(e),{generationId:r,bitflag:o,queries:a}=s;i[le][r][t]&=~o,a.forEach(l=>{l.toRemove.has(t)&&l.toRemove.remove(t);const c=Ut(i,l,t);c&&Nt(l,t),c||xn(i,l,t)}),i[$e].get(t).delete(e),n&&vs(e,t)},pt=Symbol("size"),ji=Symbol("resizeThreshold"),ht=Symbol("bitflag"),Hi=Symbol("archetypes"),Es=Symbol("localEntities"),En=Symbol("localEntityLookp"),Ss=[],qi=i=>{Ss.forEach(e=>{e[pt]=i;for(let t=0;t<e[le].length;t++){const n=e[le][t];e[le][t]=gs(n,i)}e[ji]=e[pt]-e[pt]/5})},Na=(i={})=>{const e=i;return Vi(e),Ss.push(e),e},Vi=i=>{const e=Bt();return i[pt]=e,i[lt]&&i[lt].forEach(t=>Si(i,t)),i[le]=[new Uint32Array(e)],i[$e]=new Map,i[Hi]=[],i[Ie]=Ne(),i[lt]=i[Ie].dense,i[ht]=1,i[ge]=new Map,i[Re]=new Map,i[kt]=new Set,i[vn]=new Set,i[ut]=new Set,i[Es]=new Map,i[En]=new Map,i},Ga=(...i)=>e=>{let t=e;for(let n=0;n<i.length;n++)t=i[n](t);return t};class Ge{static userId;static initOptions;static engineTimer=null;static xrSupported=!1;static isBot=!1;static offlineMode=!1;static isHMD=!1;static isExecuting=!1;static physicsFrameRate=60;static physxWorker=null;static accumulator;static justExecuted;static params;static timeScaleTarget=1;static defaultWorld=null;static currentWorld=null;static worlds=[];static renderer=null;static effectComposer=null;static xrRenderer=null;static xrSession=null;static context=null;static csm=null;static scene=null;static sceneLoaded=!1;static camera=null;static activeCameraEntity;static activeCameraFollowTarget;static cameraTransform;static audioListener=null;static enabled=!0;static tick=0;static useAudioSystem=!1;static inputState=new Map;static prevInputState=new Map;static isInitialized=!1;static hasJoinedWorld=!1;static publicPath;static workers=[];static simpleMaterials=!1;static hasEngaged=!1;static mouseInputEnabled=!0;static keyboardInputEnabled=!0;static xrFrame;static spatialAudio=!1;static xrControllerModel=!0;static getEntityComponents=xs}class zi{name="EXT_remove_materials";parser;constructor(e){this.parser=e}async beforeRoot(){const t=this.parser.json;t.images=[],t.textures=[],t.materials=[],t.samplers=[],t.meshes.forEach(n=>{n.primitives.forEach(s=>{delete s.material})})}loadImage(){return null}loadMaterial(){return null}loadTexture(){return null}}class Wi{name="EXT_mesh_gpu_instancing";parser;constructor(e){this.parser=e}createNodeMesh(e){const n=this.parser.json.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=n.extensions[this.name].attributes,o=[],a={};o.push(this.parser.createNodeMesh(e));for(const l in r)o.push(this.parser.getDependency("accessor",r[l]).then(c=>(a[l]=c,a[l])));return Promise.all(o).then(l=>{const c=l[0];if(!c.isMesh)return c;const u=l[1].count,h=c.matrix.clone(),f=c.position.clone().set(0,0,0),d=c.quaternion.clone().set(0,0,0,1),m=c.scale.clone().set(1,1,1),w=new Cr(c.geometry,c.material,u);for(let y=0;y<u;y++)a.TRANSLATION&&f.fromBufferAttribute(a.TRANSLATION,y),a.ROTATION&&d.fromBufferAttribute(a.ROTATION,y),a.SCALE&&m.fromBufferAttribute(a.SCALE,y),w.setMatrixAt(y,h.compose(f,d,m));return We.prototype.copy.call(w,c),w.frustumCulled=!1,this.parser.assignFinalMaterial(w),w})}loadImage(){return null}loadMaterial(){return null}loadTexture(){return null}}let Gt;const ja=async()=>{if(typeof Gt=="undefined"){const{default:i}=await ui(()=>import("./draco3dgltf.898bbf9c.js").then(function(e){return e.d}),["assets/draco3dgltf.898bbf9c.js","assets/vendor.c8b8cc93.js","assets/___vite-browser-external_commonjs-proxy.5bbecace.js","assets/__vite-browser-external.b6126e45.js"]);Gt=await i.createDecoderModule()}};class Qi{constructor(e){this.timeLoaded=0,this.manager=e||en,this.materials=null,this.verbosity=0,this.attributeOptions={},this.drawMode=Pr,this.nativeAttributeMap={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.dispose=()=>{}}load(e,t,n,s){var r=this,o=new Qe(r.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.load(e,function(a){r.decodeDracoFile(a,t)},n,s)}setPath(e){return this.path=e,this}setVerbosity(e){return this.verbosity=e,this}setDrawMode(e){return this.drawMode=e,this}setSkipDequantization(e,t){var n=!0;return typeof t!="undefined"&&(n=t),this.getAttributeOptions(e).skipDequantization=n,this}decodeDracoFile(e,t,n,s){this.decodeDracoFileInternal(e,Gt,t,n,s)}decodeDracoFileInternal(e,t,n,s,r){var o=new t.DecoderBuffer;o.Init(new Int8Array(e),e.byteLength);var a=new t.Decoder,l=a.GetEncodedGeometryType(o);if(l==t.TRIANGULAR_MESH)this.verbosity>0&&console.log("Loaded a mesh.");else if(l==t.POINT_CLOUD)this.verbosity>0&&console.log("Loaded a point cloud.");else{var c="NodeDRACOLoader: Unknown geometry type.";throw console.error(c),new Error(c)}n(this.convertDracoGeometryTo3JS(t,a,l,o,s,r))}addAttributeToGeometry(e,t,n,s,r,o,a,l){if(o.ptr===0){var c="NodeDRACOLoader: No attribute "+s;throw console.error(c),new Error(c)}var p=o.num_components(),u=n.num_points(),h=u*p,f,d;switch(r){case Float32Array:f=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(n,o,f),l[s]=new Float32Array(h),d=De;break;case Int8Array:f=new e.DracoInt8Array,t.GetAttributeInt8ForAllPoints(n,o,f),l[s]=new Int8Array(h),d=kr;break;case Int16Array:f=new e.DracoInt16Array,t.GetAttributeInt16ForAllPoints(n,o,f),l[s]=new Int16Array(h),d=Br;break;case Int32Array:f=new e.DracoInt32Array,t.GetAttributeInt32ForAllPoints(n,o,f),l[s]=new Int32Array(h),d=Fr;break;case Uint8Array:f=new e.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(n,o,f),l[s]=new Uint8Array(h),d=Dr;break;case Uint16Array:f=new e.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(n,o,f),l[s]=new Uint16Array(h),d=tn;break;case Uint32Array:f=new e.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(n,o,f),l[s]=new Uint32Array(h),d=Xn;break;default:var c="NodeDRACOLoader: Unexpected attribute type.";throw console.error(c),new Error(c)}for(var m=0;m<h;m++)l[s][m]=f.GetValue(m);a.setAttribute(s,new d(l[s],p)),e.destroy(f)}convertDracoGeometryTo3JS(e,t,n,s,r,o){this.getAttributeOptions("position").skipDequantization===!0&&t.SkipAttributeTransform(e.POSITION);var a,l;if(n===e.TRIANGULAR_MESH?(a=new e.Mesh,l=t.DecodeBufferToMesh(s,a)):(a=new e.PointCloud,l=t.DecodeBufferToPointCloud(s,a)),!l.ok()||a.ptr==0){var c="NodeDRACOLoader: Decoding failed: ";throw c+=l.error_msg(),console.error(c),e.destroy(t),e.destroy(a),new Error(c)}e.destroy(s);var p;n==e.TRIANGULAR_MESH?(p=a.num_faces(),this.verbosity>0&&console.log("Number of faces loaded: "+p.toString())):p=0;var u=a.num_points(),h=a.num_attributes();this.verbosity>0&&(console.log("Number of points loaded: "+u.toString()),console.log("Number of attributes loaded: "+h.toString()));var f=t.GetAttributeId(a,e.POSITION);if(f==-1){var c="NodeDRACOLoader: No position attribute found.";throw console.error(c),e.destroy(t),e.destroy(a),new Error(c)}var d=t.GetAttribute(a,f),m={},w=new Pe;if(r)for(var y in r){var b=o[y],E=r[y],R=t.GetAttributeByUniqueId(a,E);this.addAttributeToGeometry(e,t,a,y,b,R,w,m)}else for(var y in this.nativeAttributeMap){var x=t.GetAttributeId(a,e[this.nativeAttributeMap[y]]);if(x!==-1){this.verbosity>0&&console.log("Loaded "+y+" attribute.");var R=t.GetAttribute(a,x);this.addAttributeToGeometry(e,t,a,y,Float32Array,R,w,m)}}if(n==e.TRIANGULAR_MESH)if(this.drawMode===Kn){var S=new e.DracoInt32Array;t.GetTriangleStripsFromMesh(a,S),m.indices=new Uint32Array(S.size());for(var M=0;M<S.size();++M)m.indices[M]=S.GetValue(M);e.destroy(S)}else{var D=p*3;m.indices=new Uint32Array(D);for(var F=new e.DracoInt32Array,M=0;M<p;++M){t.GetFaceFromMesh(a,M,F);var k=M*3;m.indices[k]=F.GetValue(0),m.indices[k+1]=F.GetValue(1),m.indices[k+2]=F.GetValue(2)}e.destroy(F)}w.drawMode=this.drawMode,n==e.TRIANGULAR_MESH&&w.setIndex(new(m.indices.length>65535?Xn:tn)(m.indices,1));var H=new e.AttributeQuantizationTransform;if(H.InitFromAttribute(d)){w.attributes.position.isQuantized=!0,w.attributes.position.maxRange=H.range(),w.attributes.position.numQuantizationBits=H.quantization_bits(),w.attributes.position.minValues=new Float32Array(3);for(var M=0;M<3;++M)w.attributes.position.minValues[M]=H.min_value(M)}return e.destroy(H),e.destroy(t),e.destroy(a),w}isVersionSupported(e,t){t(Gt.isVersionSupported(e))}getAttributeOptions(e){return typeof this.attributeOptions[e]=="undefined"&&(this.attributeOptions[e]={}),this.attributeOptions[e]}}const Sn=new WeakMap;class Ki extends nn{constructor(e){super(e);this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,s){const r=new Qe(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(s)},n,s)}decodeDracoFile(e,t,n,s){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const n=JSON.stringify(t);if(Sn.has(e)){const l=Sn.get(e);if(l.key===n)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(r,o).then(l=>(s=l,new Promise((c,p)=>{s._callbacks[r]={resolve:c,reject:p},s.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),Sn.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new Pe;e.index&&t.setIndex(new st(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const s=e.attributes[n],r=s.name,o=s.array,a=s.itemSize;t.setAttribute(r,new st(o,a))}return t}_loadLibrary(e,t){const n=new Qe(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((s,r)=>{n.load(e,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const s=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const r=Xi.toString(),o=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const o=r.data;switch(o.type){case"decode":s._callbacks[o.id].resolve(o);break;case"error":s._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Xi(){let i,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":i=a.decoderConfig,e=new Promise(function(p){i.onModuleLoaded=function(u){p({draco:u})},DracoDecoderModule(i)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(p=>{const u=p.draco,h=new u.Decoder,f=new u.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{const d=t(u,h,f,c),m=d.attributes.map(w=>w.array.buffer);d.index&&m.push(d.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:d},m)}catch(d){console.error(d),self.postMessage({type:"error",id:a.id,error:d.message})}finally{u.destroy(f),u.destroy(h)}});break}};function t(o,a,l,c){const p=c.attributeIDs,u=c.attributeTypes;let h,f;const d=a.GetEncodedGeometryType(l);if(d===o.TRIANGULAR_MESH)h=new o.Mesh,f=a.DecodeBufferToMesh(l,h);else if(d===o.POINT_CLOUD)h=new o.PointCloud,f=a.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const m={index:null,attributes:[]};for(const w in p){const y=self[u[w]];let b,E;if(c.useUniqueIDs)E=p[w],b=a.GetAttributeByUniqueId(h,E);else{if(E=a.GetAttributeId(h,o[p[w]]),E===-1)continue;b=a.GetAttribute(h,E)}m.attributes.push(s(o,a,h,w,y,b))}return d===o.TRIANGULAR_MESH&&(m.index=n(o,a,h)),o.destroy(h),m}function n(o,a,l){const p=l.num_faces()*3,u=p*4,h=o._malloc(u);a.GetTrianglesUInt32Array(l,u,h);const f=new Uint32Array(o.HEAPF32.buffer,h,p).slice();return o._free(h),{array:f,itemSize:1}}function s(o,a,l,c,p,u){const h=u.num_components(),d=l.num_points()*h,m=d*p.BYTES_PER_ELEMENT,w=r(o,p),y=o._malloc(m);a.GetAttributeDataArrayForAllPoints(l,u,w,m,y);const b=new p(o.HEAPF32.buffer,y,d).slice();return o._free(y),{name:c,array:b,itemSize:h}}function r(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}var In={exports:{}};(function(i,e){var t=typeof self!="undefined"?self:hi,n=function(){function r(){this.fetch=!1,this.DOMException=t.DOMException}return r.prototype=t,new r}();(function(r){(function(o){var a={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(g){return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};function l(g){return g&&DataView.prototype.isPrototypeOf(g)}if(a.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=ArrayBuffer.isView||function(g){return g&&c.indexOf(Object.prototype.toString.call(g))>-1};function u(g){if(typeof g!="string"&&(g=String(g)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(g))throw new TypeError("Invalid character in header field name");return g.toLowerCase()}function h(g){return typeof g!="string"&&(g=String(g)),g}function f(g){var v={next:function(){var C=g.shift();return{done:C===void 0,value:C}}};return a.iterable&&(v[Symbol.iterator]=function(){return v}),v}function d(g){this.map={},g instanceof d?g.forEach(function(v,C){this.append(C,v)},this):Array.isArray(g)?g.forEach(function(v){this.append(v[0],v[1])},this):g&&Object.getOwnPropertyNames(g).forEach(function(v){this.append(v,g[v])},this)}d.prototype.append=function(g,v){g=u(g),v=h(v);var C=this.map[g];this.map[g]=C?C+", "+v:v},d.prototype.delete=function(g){delete this.map[u(g)]},d.prototype.get=function(g){return g=u(g),this.has(g)?this.map[g]:null},d.prototype.has=function(g){return this.map.hasOwnProperty(u(g))},d.prototype.set=function(g,v){this.map[u(g)]=h(v)},d.prototype.forEach=function(g,v){for(var C in this.map)this.map.hasOwnProperty(C)&&g.call(v,this.map[C],C,this)},d.prototype.keys=function(){var g=[];return this.forEach(function(v,C){g.push(C)}),f(g)},d.prototype.values=function(){var g=[];return this.forEach(function(v){g.push(v)}),f(g)},d.prototype.entries=function(){var g=[];return this.forEach(function(v,C){g.push([C,v])}),f(g)},a.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function m(g){if(g.bodyUsed)return Promise.reject(new TypeError("Already read"));g.bodyUsed=!0}function w(g){return new Promise(function(v,C){g.onload=function(){v(g.result)},g.onerror=function(){C(g.error)}})}function y(g){var v=new FileReader,C=w(v);return v.readAsArrayBuffer(g),C}function b(g){var v=new FileReader,C=w(v);return v.readAsText(g),C}function E(g){for(var v=new Uint8Array(g),C=new Array(v.length),X=0;X<v.length;X++)C[X]=String.fromCharCode(v[X]);return C.join("")}function R(g){if(g.slice)return g.slice(0);var v=new Uint8Array(g.byteLength);return v.set(new Uint8Array(g)),v.buffer}function x(){return this.bodyUsed=!1,this._initBody=function(g){this._bodyInit=g,g?typeof g=="string"?this._bodyText=g:a.blob&&Blob.prototype.isPrototypeOf(g)?this._bodyBlob=g:a.formData&&FormData.prototype.isPrototypeOf(g)?this._bodyFormData=g:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)?this._bodyText=g.toString():a.arrayBuffer&&a.blob&&l(g)?(this._bodyArrayBuffer=R(g.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(g)||p(g))?this._bodyArrayBuffer=R(g):this._bodyText=g=Object.prototype.toString.call(g):this._bodyText="",this.headers.get("content-type")||(typeof g=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var g=m(this);if(g)return g;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var g=m(this);if(g)return g;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(F)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function M(g){var v=g.toUpperCase();return S.indexOf(v)>-1?v:g}function D(g,v){v=v||{};var C=v.body;if(g instanceof D){if(g.bodyUsed)throw new TypeError("Already read");this.url=g.url,this.credentials=g.credentials,v.headers||(this.headers=new d(g.headers)),this.method=g.method,this.mode=g.mode,this.signal=g.signal,!C&&g._bodyInit!=null&&(C=g._bodyInit,g.bodyUsed=!0)}else this.url=String(g);if(this.credentials=v.credentials||this.credentials||"same-origin",(v.headers||!this.headers)&&(this.headers=new d(v.headers)),this.method=M(v.method||this.method||"GET"),this.mode=v.mode||this.mode||null,this.signal=v.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&C)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(C)}D.prototype.clone=function(){return new D(this,{body:this._bodyInit})};function F(g){var v=new FormData;return g.trim().split("&").forEach(function(C){if(C){var X=C.split("="),$=X.shift().replace(/\+/g," "),T=X.join("=").replace(/\+/g," ");v.append(decodeURIComponent($),decodeURIComponent(T))}}),v}function k(g){var v=new d,C=g.replace(/\r?\n[\t ]+/g," ");return C.split(/\r?\n/).forEach(function(X){var $=X.split(":"),T=$.shift().trim();if(T){var Q=$.join(":").trim();v.append(T,Q)}}),v}x.call(D.prototype);function H(g,v){v||(v={}),this.type="default",this.status=v.status===void 0?200:v.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in v?v.statusText:"OK",this.headers=new d(v.headers),this.url=v.url||"",this._initBody(g)}x.call(H.prototype),H.prototype.clone=function(){return new H(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},H.error=function(){var g=new H(null,{status:0,statusText:""});return g.type="error",g};var ae=[301,302,303,307,308];H.redirect=function(g,v){if(ae.indexOf(v)===-1)throw new RangeError("Invalid status code");return new H(null,{status:v,headers:{location:g}})},o.DOMException=r.DOMException;try{new o.DOMException}catch(g){o.DOMException=function(v,C){this.message=v,this.name=C;var X=Error(v);this.stack=X.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function J(g,v){return new Promise(function(C,X){var $=new D(g,v);if($.signal&&$.signal.aborted)return X(new o.DOMException("Aborted","AbortError"));var T=new XMLHttpRequest;function Q(){T.abort()}T.onload=function(){var N={status:T.status,statusText:T.statusText,headers:k(T.getAllResponseHeaders()||"")};N.url="responseURL"in T?T.responseURL:N.headers.get("X-Request-URL");var G="response"in T?T.response:T.responseText;C(new H(G,N))},T.onerror=function(){X(new TypeError("Network request failed"))},T.ontimeout=function(){X(new TypeError("Network request failed"))},T.onabort=function(){X(new o.DOMException("Aborted","AbortError"))},T.open($.method,$.url,!0),$.credentials==="include"?T.withCredentials=!0:$.credentials==="omit"&&(T.withCredentials=!1),"responseType"in T&&a.blob&&(T.responseType="blob"),$.headers.forEach(function(N,G){T.setRequestHeader(G,N)}),$.signal&&($.signal.addEventListener("abort",Q),T.onreadystatechange=function(){T.readyState===4&&$.signal.removeEventListener("abort",Q)}),T.send(typeof $._bodyInit=="undefined"?null:$._bodyInit)})}return J.polyfill=!0,r.fetch||(r.fetch=J,r.Headers=d,r.Request=D,r.Response=H),o.Headers=d,o.Request=D,o.Response=H,o.fetch=J,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=n;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,i.exports=e})(In,In.exports);var $i=pi(In.exports);const Me={};class Is extends nn{constructor(e){super(e)}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=$n.get(e);if(o!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;if(Me[e]!==void 0){Me[e].push({onLoad:t,onProgress:n,onError:s});return}const a=/^data:(.*?)(;base64)?,(.*)$/,l=e.match(a);if(l){const c=l[1],p=!!l[2];let u=l[3];u=decodeURIComponent(u),p&&(u=atob(u));try{let h;const f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":const d=new Uint8Array(u.length);for(let w=0;w<u.length;w++)d[w]=u.charCodeAt(w);f==="blob"?h=new Blob([d.buffer],{type:c}):h=d.buffer;break;case"document":h=new DOMParser().parseFromString(u,c);break;case"json":h=JSON.parse(u);break;default:h=u;break}setTimeout(function(){t&&t(h),r.manager.itemEnd(e)},0)}catch(h){setTimeout(function(){s&&s(h),r.manager.itemError(e),r.manager.itemEnd(e)},0)}}else Me[e]=[],Me[e].push({onLoad:t,onProgress:n,onError:s}),$i(e).then(c=>c.blob()).then(async c=>{const p=await c.arrayBuffer(),u=Me[e];r.manager.itemStart(e),delete Me[e],c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),$n.add(e,c);for(let h=0,f=u.length;h<f;h++){const d=u[h];d.onLoad&&d.onLoad(p)}r.manager.itemEnd(e)}).catch(c=>{const p=Me[e];delete Me[e];for(let u=0,h=p.length;u<h;u++){const f=p[u];f.onError&&f.onError(c)}r.manager.itemError(e),r.manager.itemEnd(e)})}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Yi extends nn{constructor(e){super(e);this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new to(t)}),this.register(function(t){return new so(t)}),this.register(function(t){return new ro(t)}),this.register(function(t){return new no(t)}),this.register(function(t){return new Zi(t)}),this.register(function(t){return new io(t)})}load(e,t,n,s){const r=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=Fe.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){s?s(c):console.error(c),r.manager.itemError(e),r.manager.itemEnd(e)},l=new Is(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{r.parse(c,o,function(p){t(p),r.manager.itemEnd(e)},a)}catch(p){a(p)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,s){let r;const o={},a={};if(typeof e=="string")r=e;else if(Fe.decodeText(new Uint8Array(e,0,4))===Rs){try{o[U.KHR_BINARY_GLTF]=new oo(e)}catch(u){s&&s(u);return}r=o[U.KHR_BINARY_GLTF].content}else r=Fe.decodeText(new Uint8Array(e));const l=JSON.parse(r);if(l.asset===void 0||l.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new go(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const u=this.pluginCallbacks[p](c);a[u.name]=u,o[u.name]=!0}if(l.extensionsUsed)for(let p=0;p<l.extensionsUsed.length;++p){const u=l.extensionsUsed[p],h=l.extensionsRequired||[];switch(u){case U.KHR_MATERIALS_UNLIT:o[u]=new eo;break;case U.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[u]=new co;break;case U.KHR_DRACO_MESH_COMPRESSION:o[u]=new ao(l,this.dracoLoader);break;case U.KHR_TEXTURE_TRANSFORM:o[u]=new lo;break;case U.KHR_MESH_QUANTIZATION:o[u]=new uo;break;default:h.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,s)}}function Ji(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const U={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class Zi{constructor(e){this.parser=e,this.name=U.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,s=t.length;n<s;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let s=t.cache.get(n);if(s)return s;const r=t.json,l=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let c;const p=new ee(16777215);l.color!==void 0&&p.fromArray(l.color);const u=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new sn(p),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new _t(p),c.distance=u;break;case"spot":c=new Yn(p),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),s=Promise.resolve(c),t.cache.add(n,s),s}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return n._getNodeRef(t.cache,a,l)})}}class eo{constructor(){this.name=U.KHR_MATERIALS_UNLIT}getMaterialType(){return Be}extendParams(e,t,n){const s=[];e.color=new ee(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}r.baseColorTexture!==void 0&&s.push(n.assignTexture(e,"map",r.baseColorTexture))}return Promise.all(s)}}class to{constructor(e){this.parser=e,this.name=U.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:rn}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ee(a,-a)}return Promise.all(r)}}class no{constructor(e){this.parser=e,this.name=U.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:rn}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class so{constructor(e){this.parser=e,this.name=U.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,s=n.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=n.images[r.source],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,a)}}class ro{constructor(e){this.parser=e,this.name=U.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,a,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class io{constructor(e){this.name=U.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const s=n.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([r,o.ready]).then(function(a){const l=s.byteOffset||0,c=s.byteLength||0,p=s.count,u=s.byteStride,h=new ArrayBuffer(p*u),f=new Uint8Array(a[0],l,c);return o.decodeGltfBuffer(new Uint8Array(h),p,u,f,s.mode,s.filter),h})}else return null}}const Rs="glTF",ft=12,Ms={JSON:1313821514,BIN:5130562};class oo{constructor(e){this.name=U.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,ft);if(this.header={magic:Fe.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Rs)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-ft,s=new DataView(e,ft);let r=0;for(;r<n;){const o=s.getUint32(r,!0);r+=4;const a=s.getUint32(r,!0);if(r+=4,a===Ms.JSON){const l=new Uint8Array(e,ft+r,o);this.content=Fe.decodeText(l)}else if(a===Ms.BIN){const l=ft+r;this.body=e.slice(l,l+o)}r+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class ao{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=U.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const p in o){const u=Mn[p]||p.toLowerCase();a[u]=o[p]}for(const p in e.attributes){const u=Mn[p]||p.toLowerCase();if(o[p]!==void 0){const h=n.accessors[e.attributes[p]],f=dt[h.componentType];c[u]=f,l[u]=h.normalized===!0}}return t.getDependency("bufferView",r).then(function(p){return new Promise(function(u){s.decodeDracoFile(p,function(h){for(const f in h.attributes){const d=h.attributes[f],m=l[f];m!==void 0&&(d.normalized=m)}u(h)},a,c)})})}}class lo{constructor(){this.name=U.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Rn extends on{constructor(e){super();this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),n=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),s=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),a={specular:{value:new ee().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const c in a)l.uniforms[c]=a[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",s).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class co{constructor(){this.name=U.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return Rn}extendParams(e,t,n){const s=t.extensions[this.name];e.color=new ee(1,1,1),e.opacity=1;const r=[];if(Array.isArray(s.diffuseFactor)){const o=s.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(s.diffuseTexture!==void 0&&r.push(n.assignTexture(e,"map",s.diffuseTexture)),e.emissive=new ee(0,0,0),e.glossiness=s.glossinessFactor!==void 0?s.glossinessFactor:1,e.specular=new ee(1,1,1),Array.isArray(s.specularFactor)&&e.specular.fromArray(s.specularFactor),s.specularGlossinessTexture!==void 0){const o=s.specularGlossinessTexture;r.push(n.assignTexture(e,"glossinessMap",o)),r.push(n.assignTexture(e,"specularMap",o))}return Promise.all(r)}createMaterial(e){const t=new Rn(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=Ur,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class uo{constructor(){this.name=U.KHR_MESH_QUANTIZATION}}class Ye extends Nr{constructor(e,t,n,s){super(e,t,n,s)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)t[o]=n[r+o];return t}}Ye.prototype.beforeStart_=Ye.prototype.copySampleValue_;Ye.prototype.afterEnd_=Ye.prototype.copySampleValue_;Ye.prototype.interpolate_=function(i,e,t,n){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=o*2,l=o*3,c=n-e,p=(t-e)/c,u=p*p,h=u*p,f=i*l,d=f-l,m=-2*h+3*u,w=h-u,y=1-m,b=w-u+p;for(let E=0;E!==o;E++){const R=r[d+E+o],x=r[d+E+a]*c,S=r[f+E+o],M=r[f+E]*c;s[E]=y*R+b*x+m*S+w*M}return s};const ve={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},dt={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Ls={9728:Gr,9729:Jn,9984:jr,9985:Hr,9986:qr,9987:Zn},Os={33071:an,33648:Vr,10497:rt},Cs={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Mn={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Le={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},po={CUBICSPLINE:void 0,LINEAR:es,STEP:zr},Ln={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Ps(i,e){return typeof i!="string"||i===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(i)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(i)||/^data:.*,.*$/i.test(i)||/^blob:.*$/i.test(i)?i:e+i)}function ho(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new on({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ei})),i.DefaultMaterial}function mt(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function je(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function fo(i,e,t){let n=!1,s=!1;for(let a=0,l=e.length;a<l;a++){const c=e[a];if(c.POSITION!==void 0&&(n=!0),c.NORMAL!==void 0&&(s=!0),n&&s)break}if(!n&&!s)return Promise.resolve(i);const r=[],o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];if(n){const p=c.POSITION!==void 0?t.getDependency("accessor",c.POSITION):i.attributes.position;r.push(p)}if(s){const p=c.NORMAL!==void 0?t.getDependency("accessor",c.NORMAL):i.attributes.normal;o.push(p)}}return Promise.all([Promise.all(r),Promise.all(o)]).then(function(a){const l=a[0],c=a[1];return n&&(i.morphAttributes.position=l),s&&(i.morphAttributes.normal=c),i.morphTargetsRelative=!0,i})}function mo(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,s=t.length;n<s;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function yo(i){const e=i.extensions&&i.extensions[U.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+Ds(e.attributes):t=i.indices+":"+Ds(i.attributes)+":"+i.mode,t}function Ds(i){let e="";const t=Object.keys(i).sort();for(let n=0,s=t.length;n<s;n++)e+=t[n]+":"+i[t[n]]+";";return e}function On(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class go{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Ji,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap!="undefined"&&/Firefox/.test(navigator.userAgent)===!1?this.textureLoader=new Wr(this.options.manager):this.textureLoader=new ln(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Is(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,s=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:n,userData:{}};mt(r,a,s),je(a,s),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const o=t[s].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const o=e[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const s=n.clone();return s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const s=e(t[n]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let s=this.cache.get(n);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this.loadNode(t);break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this.loadAnimation(t);break;case"camera":s=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[U.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){n.load(Ps(t.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const s=t.byteLength||0,r=t.byteOffset||0;return n.slice(r,r+s)})}loadAccessor(e){const t=this,n=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0)return Promise.resolve(null);const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const a=o[0],l=Cs[s.type],c=dt[s.componentType],p=c.BYTES_PER_ELEMENT,u=p*l,h=s.byteOffset||0,f=s.bufferView!==void 0?n.bufferViews[s.bufferView].byteStride:void 0,d=s.normalized===!0;let m,w;if(f&&f!==u){const y=Math.floor(h/f),b="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+y+":"+s.count;let E=t.cache.get(b);E||(m=new c(a,y*f,s.count*f/p),E=new Qr(m,f/p),t.cache.add(b,E)),w=new Kr(E,l,h%f/p,d)}else a===null?m=new c(s.count*l):m=new c(a,h,s.count*l),w=new st(m,l,d);if(s.sparse!==void 0){const y=Cs.SCALAR,b=dt[s.sparse.indices.componentType],E=s.sparse.indices.byteOffset||0,R=s.sparse.values.byteOffset||0,x=new b(o[1],E,s.sparse.count*y),S=new c(o[2],R,s.sparse.count*l);a!==null&&(w=new st(w.array.slice(),w.itemSize,w.normalized));for(let M=0,D=x.length;M<D;M++){const F=x[M];if(w.setX(F,S[M*l]),l>=2&&w.setY(F,S[M*l+1]),l>=3&&w.setZ(F,S[M*l+2]),l>=4&&w.setW(F,S[M*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return w})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e],r=t.images[s.source];let o=this.textureLoader;if(r.uri){const a=n.manager.getHandler(r.uri);a!==null&&(o=a)}return this.loadTextureImage(e,r,o)}loadTextureImage(e,t,n){const s=this,r=this.json,o=this.options,a=r.textures[e],l=(t.uri||t.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=self.URL||self.webkitURL;let p=t.uri||"",u=!1,h=!0;const f=p.search(/\.jpe?g($|\?)/i)>0||p.search(/^data\:image\/jpeg/)===0;if((t.mimeType==="image/jpeg"||f)&&(h=!1),t.bufferView!==void 0)p=s.getDependency("bufferView",t.bufferView).then(function(m){if(t.mimeType==="image/png"){const y=new DataView(m,25,1).getUint8(0,!1);h=y===6||y===4||y===3}u=!0;const w=new Blob([m],{type:t.mimeType});return p=c.createObjectURL(w),p});else if(t.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(p).then(function(m){return new Promise(function(w,y){let b=w;n.isImageBitmapLoader===!0&&(b=function(E){const R=new Mt(E);R.needsUpdate=!0,w(R)}),n.load(Ps(m,o.path),b,void 0,y)})}).then(function(m){u===!0&&c.revokeObjectURL(p),m.flipY=!1,a.name&&(m.name=a.name),h||(m.format=Xr);const y=(r.samplers||{})[a.sampler]||{};return m.magFilter=Ls[y.magFilter]||Jn,m.minFilter=Ls[y.minFilter]||Zn,m.wrapS=Os[y.wrapS]||rt,m.wrapT=Os[y.wrapT]||rt,s.associations.set(m,{type:"textures",index:e}),m}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",p),null});return this.textureCache[l]=d,d}assignTexture(e,t,n){const s=this;return this.getDependency("texture",n.index).then(function(r){if(n.texCoord!==void 0&&n.texCoord!=0&&!(t==="aoMap"&&n.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),s.extensions[U.KHR_TEXTURE_TRANSFORM]){const o=n.extensions!==void 0?n.extensions[U.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const a=s.associations.get(r);r=s.extensions[U.KHR_TEXTURE_TRANSFORM].extendTexture(r,o),s.associations.set(r,a)}}e[t]=r})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const s=t.attributes.tangent!==void 0,r=t.attributes.color!==void 0,o=t.attributes.normal===void 0,a=Object.keys(t.morphAttributes).length>0,l=a&&t.morphAttributes.normal!==void 0;if(e.isPoints){const c="PointsMaterial:"+n.uuid;let p=this.cache.get(c);p||(p=new $r,ts.prototype.copy.call(p,n),p.color.copy(n.color),p.map=n.map,p.sizeAttenuation=!1,this.cache.add(c,p)),n=p}else if(e.isLine){const c="LineBasicMaterial:"+n.uuid;let p=this.cache.get(c);p||(p=new ns,ts.prototype.copy.call(p,n),p.color.copy(n.color),this.cache.add(c,p)),n=p}if(s||r||o||a){let c="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(c+="specular-glossiness:"),s&&(c+="vertex-tangents:"),r&&(c+="vertex-colors:"),o&&(c+="flat-shading:"),a&&(c+="morph-targets:"),l&&(c+="morph-normals:");let p=this.cache.get(c);p||(p=n.clone(),r&&(p.vertexColors=!0),o&&(p.flatShading=!0),a&&(p.morphTargets=!0),l&&(p.morphNormals=!0),s&&(p.vertexTangents=!0,p.normalScale&&(p.normalScale.y*=-1),p.clearcoatNormalScale&&(p.clearcoatNormalScale.y*=-1)),this.cache.add(c,p),this.associations.set(p,this.associations.get(n))),n=p}n.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return on}loadMaterial(e){const t=this,n=this.json,s=this.extensions,r=n.materials[e];let o;const a={},l=r.extensions||{},c=[];if(l[U.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const u=s[U.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=u.getMaterialType(),c.push(u.extendParams(a,r,t))}else if(l[U.KHR_MATERIALS_UNLIT]){const u=s[U.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),c.push(u.extendParams(a,r,t))}else{const u=r.pbrMetallicRoughness||{};if(a.color=new ee(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const h=u.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}u.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",u.baseColorTexture)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}r.doubleSided===!0&&(a.side=ss);const p=r.alphaMode||Ln.OPAQUE;return p===Ln.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,p===Ln.MASK&&(a.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==Be&&(c.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new Ee(1,-1),r.normalTexture.scale!==void 0&&a.normalScale.set(r.normalTexture.scale,-r.normalTexture.scale)),r.occlusionTexture!==void 0&&o!==Be&&(c.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==Be&&(a.emissive=new ee().fromArray(r.emissiveFactor)),r.emissiveTexture!==void 0&&o!==Be&&c.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture)),Promise.all(c).then(function(){let u;return o===Rn?u=s[U.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):u=new o(a),r.name&&(u.name=r.name),u.map&&(u.map.encoding=Et),u.emissiveMap&&(u.emissiveMap.encoding=Et),je(u,r),t.associations.set(u,{type:"materials",index:e}),r.extensions&&mt(s,u,r),u})}createUniqueName(e){const t=it.sanitizeNodeName(e||"");let n=t;for(let s=1;this.nodeNamesUsed[n];++s)n=t+"_"+s;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,s=this.primitiveCache;function r(a){return n[U.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return Bs(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],p=yo(c),u=s[p];if(u)o.push(u.promise);else{let h;c.extensions&&c.extensions[U.KHR_DRACO_MESH_COMPRESSION]?h=r(c):h=Bs(new Pe,c,t),s[p]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,s=this.extensions,r=n.meshes[e],o=r.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const p=o[l].material===void 0?ho(this.cache):this.getDependency("material",o[l].material);a.push(p)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),p=l[l.length-1],u=[];for(let f=0,d=p.length;f<d;f++){const m=p[f],w=o[f];let y;const b=c[f];if(w.mode===ve.TRIANGLES||w.mode===ve.TRIANGLE_STRIP||w.mode===ve.TRIANGLE_FAN||w.mode===void 0)y=r.isSkinnedMesh===!0?new St(m,b):new It(m,b),y.isSkinnedMesh===!0&&!y.geometry.attributes.skinWeight.normalized&&y.normalizeSkinWeights(),w.mode===ve.TRIANGLE_STRIP?y.geometry=ks(y.geometry,Kn):w.mode===ve.TRIANGLE_FAN&&(y.geometry=ks(y.geometry,rs));else if(w.mode===ve.LINES)y=new Yr(m,b);else if(w.mode===ve.LINE_STRIP)y=new is(m,b);else if(w.mode===ve.LINE_LOOP)y=new Jr(m,b);else if(w.mode===ve.POINTS)y=new Zr(m,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+w.mode);Object.keys(y.geometry.morphAttributes).length>0&&mo(y,r),y.name=t.createUniqueName(r.name||"mesh_"+e),je(y,r),w.extensions&&mt(s,y,w),t.assignFinalMaterial(y),u.push(y)}if(u.length===1)return u[0];const h=new ke;for(let f=0,d=u.length;f<d;f++)h.add(u[f]);return h})}loadCamera(e){let t;const n=this.json.cameras[e],s=n[n.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new os(re.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):n.type==="orthographic"&&(t=new as(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),je(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(s){return n.inverseBindMatrices=s,n})}loadAnimation(e){const n=this.json.animations[e],s=[],r=[],o=[],a=[],l=[];for(let c=0,p=n.channels.length;c<p;c++){const u=n.channels[c],h=n.samplers[u.sampler],f=u.target,d=f.node!==void 0?f.node:f.id,m=n.parameters!==void 0?n.parameters[h.input]:h.input,w=n.parameters!==void 0?n.parameters[h.output]:h.output;s.push(this.getDependency("node",d)),r.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",w)),a.push(h),l.push(f)}return Promise.all([Promise.all(s),Promise.all(r),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const p=c[0],u=c[1],h=c[2],f=c[3],d=c[4],m=[];for(let y=0,b=p.length;y<b;y++){const E=p[y],R=u[y],x=h[y],S=f[y],M=d[y];if(E===void 0)continue;E.updateMatrix(),E.matrixAutoUpdate=!0;let D;switch(Le[M.path]){case Le.weights:D=ls;break;case Le.rotation:D=un;break;case Le.position:case Le.scale:default:D=cn;break}const F=E.name?E.name:E.uuid,k=S.interpolation!==void 0?po[S.interpolation]:es,H=[];Le[M.path]===Le.weights?E.traverse(function(J){J.isMesh===!0&&J.morphTargetInfluences&&H.push(J.name?J.name:J.uuid)}):H.push(F);let ae=x.array;if(x.normalized){const J=On(ae.constructor),g=new Float32Array(ae.length);for(let v=0,C=ae.length;v<C;v++)g[v]=ae[v]*J;ae=g}for(let J=0,g=H.length;J<g;J++){const v=new D(H[J]+"."+Le[M.path],R.array,ae,k);S.interpolation==="CUBICSPLINE"&&(v.createInterpolant=function(X){return new Ye(this.times,this.values,this.getValueSize()/3,X)},v.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(v)}}const w=n.name?n.name:"animation_"+e;return new Rt(w,void 0,m)})}createNodeMesh(e){const t=this.json,n=this,s=t.nodes[e];return s.mesh===void 0?null:n.getDependency("mesh",s.mesh).then(function(r){const o=n._getNodeRef(n.meshCache,s.mesh,r);return s.weights!==void 0&&o.traverse(function(a){if(!!a.isMesh)for(let l=0,c=s.weights.length;l<c;l++)a.morphTargetInfluences[l]=s.weights[l]}),o})}loadNode(e){const t=this.json,n=this.extensions,s=this,r=t.nodes[e],o=r.name?s.createUniqueName(r.name):"";return function(){const a=[],l=s._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),r.camera!==void 0&&a.push(s.getDependency("camera",r.camera).then(function(c){return s._getNodeRef(s.cameraCache,r.camera,c)})),s._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),Promise.all(a)}().then(function(a){let l;if(r.isBone===!0?l=new Ue:a.length>1?l=new ke:a.length===1?l=a[0]:l=new We,l!==a[0])for(let c=0,p=a.length;c<p;c++)l.add(a[c]);if(r.name&&(l.userData.name=r.name,l.name=o),je(l,r),r.extensions&&mt(n,l,r),r.matrix!==void 0){const c=new V;c.fromArray(r.matrix),l.applyMatrix4(c)}else r.translation!==void 0&&l.position.fromArray(r.translation),r.rotation!==void 0&&l.quaternion.fromArray(r.rotation),r.scale!==void 0&&l.scale.fromArray(r.scale);return s.associations.set(l,{type:"nodes",index:e}),l})}loadScene(e){const t=this.json,n=this.extensions,s=this.json.scenes[e],r=this,o=new ke;s.name&&(o.name=r.createUniqueName(s.name)),je(o,s),s.extensions&&mt(n,o,s);const a=s.nodes||[],l=[];for(let c=0,p=a.length;c<p;c++)l.push(Fs(a[c],o,t,r));return Promise.all(l).then(function(){return o})}}function Fs(i,e,t,n){const s=t.nodes[i];return n.getDependency("node",i).then(function(r){if(s.skin===void 0)return r;let o;return n.getDependency("skin",s.skin).then(function(a){o=a;const l=[];for(let c=0,p=o.joints.length;c<p;c++)l.push(n.getDependency("node",o.joints[c]));return Promise.all(l)}).then(function(a){return r.traverse(function(l){if(!l.isMesh)return;const c=[],p=[];for(let u=0,h=a.length;u<h;u++){const f=a[u];if(f){c.push(f);const d=new V;o.inverseBindMatrices!==void 0&&d.fromArray(o.inverseBindMatrices.array,u*16),p.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[u])}l.bind(new pn(c,p),l.matrixWorld)}),r})}).then(function(r){e.add(r);const o=[];if(s.children){const a=s.children;for(let l=0,c=a.length;l<c;l++){const p=a[l];o.push(Fs(p,r,t,n))}}return Promise.all(o)})}function wo(i,e,t){const n=e.attributes,s=new ti;if(n.POSITION!==void 0){const a=t.json.accessors[n.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(s.set(new _(l[0],l[1],l[2]),new _(c[0],c[1],c[2])),a.normalized){const p=On(dt[a.componentType]);s.min.multiplyScalar(p),s.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const a=new _,l=new _;for(let c=0,p=r.length;c<p;c++){const u=r[c];if(u.POSITION!==void 0){const h=t.json.accessors[u.POSITION],f=h.min,d=h.max;if(f!==void 0&&d!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(d[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(d[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(d[2]))),h.normalized){const m=On(dt[h.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(a)}i.boundingBox=s;const o=new ni;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,i.boundingSphere=o}function Bs(i,e,t){const n=e.attributes,s=[];function r(o,a){return t.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=Mn[o]||o.toLowerCase();a in i.attributes||s.push(r(n[o],a))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(a){i.setIndex(a)});s.push(o)}return je(i,e),wo(i,e,t),Promise.all(s).then(function(){return e.targets!==void 0?fo(i,e.targets,t):i})}function ks(i,e){let t=i.getIndex();if(t===null){const o=[],a=i.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,s=[];if(e===rs)for(let o=1;o<=n;o++)s.push(t.getX(0)),s.push(t.getX(o)),s.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2==0?(s.push(t.getX(o)),s.push(t.getX(o+1)),s.push(t.getX(o+2))):(s.push(t.getX(o+2)),s.push(t.getX(o+1)),s.push(t.getX(o)));s.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=i.clone();return r.setIndex(s),r}const jt=new Yi;Xe||jt.register(i=>new zi(i));jt.register(i=>new Wi(i));const Ht=Xe?new Ki:new Qi;Xe?Ht.setDecoderPath("/loader_decoders/"):(Ht.getDecoderModule=()=>{},Ht.preload=()=>{});jt.setDRACOLoader(Ht);function qt(){return jt}async function Ha(i){return await new Promise((e,t)=>{qt().load(i,n=>{n.scene.traverse(s=>{s.name=s.name.replace("mixamorig","")}),Us(n),e({animations:n.animations,scene:n.scene,json:{},stats:{}})},null,n=>{console.log(n),t(n)})})}const Us=i=>{bo(i.parser),vo(i)},bo=i=>{const e=async t=>{const n=i.json.materials[t].extensions.MOZ_lightmap,[s,r]=await Promise.all([i.getDependency("material",t),i.getDependency("texture",n.index)]);return s.lightMap=r,s.lightMapIntensity=n.intensity!==void 0?n.intensity:1,s.needsUpdate=!0,r};for(let t=0;t<i.json.materials?.length;t++){const n=i.json.materials[t];!n.extensions||n.extensions.MOZ_lightmap&&e(t)}},vo=i=>{if(i.parser.json?.extensions?.MOZ_hubs_components?.MOZ_hubs_components?.version===3){const e=[];i.scene.traverse(t=>{if(t.userData.gltfExtensions&&t.userData.gltfExtensions.MOZ_hubs_components){let n;switch(Object.keys(t.userData.gltfExtensions.MOZ_hubs_components)[0]){case"directional-light":n=To(t);break;case"point-light":n=xo(t);break;case"ambient-light":n=Ao(t);break}n&&(n.position.copy(t.position),n.quaternion.copy(t.quaternion),t.parent.add(n),e.push(t),console.log(n))}});for(const t of e)t.parent.remove(t)}},Ns=(i,e)=>{typeof e.castShadow!="undefined"&&(i.castShadow=e.castShadow),typeof e.shadowResolution!="undefined"&&i.shadow.mapSize.set(e.shadowResolution[0],e.shadowResolution[1]),typeof e.shadowBias!="undefined"&&(i.shadow.bias=e.shadowBias),typeof e.shadowRadius!="undefined"&&(i.shadow.radius=e.shadowRadius)},To=i=>{if(!Ge.csm)return;const e=i.userData.gltfExtensions.MOZ_hubs_components["directional-light"],t=new sn(e.color,e.intensity);return Ns(t,e),t},xo=i=>{const e=i.userData.gltfExtensions.MOZ_hubs_components["point-light"],t=new _t(e.color,e.intensity,e.distance,e.decay);return Ns(t,e),t},Ao=i=>{const e=i.userData.gltfExtensions.MOZ_hubs_components["ambient-light"];return new cs(e.color,e.intensity)};class Gs{path;manager;constructor(){this.manager=this.manager!==void 0?this.manager:en}load(e,t,n,s){const r=new Mt,o=new Qe(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(e,a=>{r.image=this.parse(a),r.needsUpdate=!0,t!==void 0&&t(r)},n,s),r}parse(e){function t(T){switch(T.image_type){case h:case m:(T.colormap_length>256||T.colormap_size!==24||T.colormap_type!==1)&&console.error("TGALoader: Invalid type colormap data for indexed type.");break;case f:case d:case w:case y:T.colormap_type&&console.error("TGALoader: Invalid type colormap data for colormap type.");break;case u:console.error("TGALoader: No data.");default:console.error('TGALoader: Invalid type "%s".',T.image_type)}(T.width<=0||T.height<=0)&&console.error("TGALoader: Invalid image size."),T.pixel_size!==8&&T.pixel_size!==16&&T.pixel_size!==24&&T.pixel_size!==32&&console.error('TGALoader: Invalid pixel size "%s".',T.pixel_size)}function n(T,Q,N,G,Z){let q,z;const B=N.pixel_size>>3,P=N.width*N.height*B;if(Q&&(z=Z.subarray(G,G+=N.colormap_length*(N.colormap_size>>3))),T){q=new Uint8Array(P);let L,I,O,K=0;const de=new Uint8Array(B);for(;K<P;)if(L=Z[G++],I=(L&127)+1,L&128){for(O=0;O<B;++O)de[O]=Z[G++];for(O=0;O<I;++O)q.set(de,K+O*B);K+=B*I}else{for(I*=B,O=0;O<I;++O)q[K+O]=Z[G++];K+=I}}else q=Z.subarray(G,G+=Q?N.width*N.height:P);return{pixel_data:q,palettes:z}}function s(T,Q,N,G,Z,q,z,B,P){const L=P;let I,O=0,K,de;const At=k.width;for(de=Q;de!==G;de+=N)for(K=Z;K!==z;K+=q,O++)I=B[O],T[(K+At*de)*4+3]=255,T[(K+At*de)*4+2]=L[I*3+0],T[(K+At*de)*4+1]=L[I*3+1],T[(K+At*de)*4+0]=L[I*3+2];return T}function r(T,Q,N,G,Z,q,z,B){let P,L=0,I,O;const K=k.width;for(O=Q;O!==G;O+=N)for(I=Z;I!==z;I+=q,L+=2)P=B[L+0]+(B[L+1]<<8),T[(I+K*O)*4+0]=(P&31744)>>7,T[(I+K*O)*4+1]=(P&992)>>2,T[(I+K*O)*4+2]=(P&31)>>3,T[(I+K*O)*4+3]=P&32768?0:255;return T}function o(T,Q,N,G,Z,q,z,B){let P=0,L,I;const O=k.width;for(I=Q;I!==G;I+=N)for(L=Z;L!==z;L+=q,P+=3)T[(L+O*I)*4+3]=255,T[(L+O*I)*4+2]=B[P+0],T[(L+O*I)*4+1]=B[P+1],T[(L+O*I)*4+0]=B[P+2];return T}function a(T,Q,N,G,Z,q,z,B){let P=0,L,I;const O=k.width;for(I=Q;I!==G;I+=N)for(L=Z;L!==z;L+=q,P+=4)T[(L+O*I)*4+2]=B[P+0],T[(L+O*I)*4+1]=B[P+1],T[(L+O*I)*4+0]=B[P+2],T[(L+O*I)*4+3]=B[P+3];return T}function l(T,Q,N,G,Z,q,z,B){let P,L=0,I,O;const K=k.width;for(O=Q;O!==G;O+=N)for(I=Z;I!==z;I+=q,L++)P=B[L],T[(I+K*O)*4+0]=P,T[(I+K*O)*4+1]=P,T[(I+K*O)*4+2]=P,T[(I+K*O)*4+3]=255;return T}function c(T,Q,N,G,Z,q,z,B){let P=0,L,I;const O=k.width;for(I=Q;I!==G;I+=N)for(L=Z;L!==z;L+=q,P+=2)T[(L+O*I)*4+0]=B[P+0],T[(L+O*I)*4+1]=B[P+0],T[(L+O*I)*4+2]=B[P+0],T[(L+O*I)*4+3]=B[P+1];return T}function p(T,Q,N,G,Z){let q,z,B,P,L,I;switch((k.flags&b)>>E){default:case S:q=0,B=1,L=Q,z=0,P=1,I=N;break;case R:q=0,B=1,L=Q,z=N-1,P=-1,I=-1;break;case M:q=Q-1,B=-1,L=-1,z=0,P=1,I=N;break;case x:q=Q-1,B=-1,L=-1,z=N-1,P=-1,I=-1;break}if(J)switch(k.pixel_size){case 8:l(T,z,P,I,q,B,L,G);break;case 16:c(T,z,P,I,q,B,L,G);break;default:console.error("TGALoader: Format not supported.");break}else switch(k.pixel_size){case 8:s(T,z,P,I,q,B,L,G,Z);break;case 16:r(T,z,P,I,q,B,L,G);break;case 24:o(T,z,P,I,q,B,L,G);break;case 32:a(T,z,P,I,q,B,L,G);break;default:console.error("TGALoader: Format not supported.");break}return T}const u=0,h=1,f=2,d=3,m=9,w=10,y=11,b=48,E=4,R=0,x=1,S=2,M=3;e.length<19&&console.error("TGALoader: Not enough data to contain header.");const D=new Uint8Array(e);let F=0;const k={id_length:D[F++],colormap_type:D[F++],image_type:D[F++],colormap_index:D[F++]|D[F++]<<8,colormap_length:D[F++]|D[F++]<<8,colormap_size:D[F++],origin:[D[F++]|D[F++]<<8,D[F++]|D[F++]<<8],width:D[F++]|D[F++]<<8,height:D[F++]|D[F++]<<8,pixel_size:D[F++],flags:D[F++]};t(k),k.id_length+F>e.length&&console.error("TGALoader: No data."),F+=k.id_length;let H=!1,ae=!1,J=!1;switch(k.image_type){case m:H=!0,ae=!0;break;case h:ae=!0;break;case w:H=!0;break;case f:break;case y:H=!0,J=!0;break;case d:J=!0;break}const g=typeof OffscreenCanvas!="undefined",v=g?new OffscreenCanvas(k.width,k.height):document.createElement("canvas");v.width=k.width,v.height=k.height;const C=v.getContext("2d"),X=C.createImageData(k.width,k.height),$=n(H,ae,k,F,D);return p(X.data,k.width,k.height,$.pixel_data,$.palettes),C.putImageData(X,0,0),g?v.transferToImageBitmap():v}setPath(e){return this.path=e,this}}function js(i,e,t){const n=t.length-i-1;if(e>=t[n])return n-1;if(e<=t[i])return i;let s=i,r=n,o=Math.floor((s+r)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?r=o:s=o,o=Math.floor((s+r)/2);return o}function _o(i,e,t,n){const s=[],r=[],o=[];s[0]=1;for(let a=1;a<=t;++a){r[a]=e-n[i+1-a],o[a]=n[i+a]-e;let l=0;for(let c=0;c<a;++c){const p=o[c+1],u=r[a-c],h=s[c]/(p+u);s[c]=l+p*h,l=u*h}s[a]=l}return s}function Eo(i,e,t,n){const s=js(i,n,e),r=_o(s,n,i,e),o=new Lt(0,0,0,0);for(let a=0;a<=i;++a){const l=t[s-i+a],c=r[a],p=l.w*c;o.x+=l.x*p,o.y+=l.y*p,o.z+=l.z*p,o.w+=l.w*c}return o}function So(i,e,t,n,s){const r=[];for(let u=0;u<=t;++u)r[u]=0;const o=[];for(let u=0;u<=n;++u)o[u]=r.slice(0);const a=[];for(let u=0;u<=t;++u)a[u]=r.slice(0);a[0][0]=1;const l=r.slice(0),c=r.slice(0);for(let u=1;u<=t;++u){l[u]=e-s[i+1-u],c[u]=s[i+u]-e;let h=0;for(let f=0;f<u;++f){const d=c[f+1],m=l[u-f];a[u][f]=d+m;const w=a[f][u-1]/a[u][f];a[f][u]=h+d*w,h=m*w}a[u][u]=h}for(let u=0;u<=t;++u)o[0][u]=a[u][t];for(let u=0;u<=t;++u){let h=0,f=1;const d=[];for(let m=0;m<=t;++m)d[m]=r.slice(0);d[0][0]=1;for(let m=1;m<=n;++m){let w=0;const y=u-m,b=t-m;u>=m&&(d[f][0]=d[h][0]/a[b+1][y],w=d[f][0]*a[y][b]);const E=y>=-1?1:-y,R=u-1<=b?m-1:t-u;for(let S=E;S<=R;++S)d[f][S]=(d[h][S]-d[h][S-1])/a[b+1][y+S],w+=d[f][S]*a[y+S][b];u<=b&&(d[f][m]=-d[h][m-1]/a[b+1][u],w+=d[f][m]*a[u][b]),o[m][u]=w;const x=h;h=f,f=x}}let p=t;for(let u=1;u<=n;++u){for(let h=0;h<=t;++h)o[u][h]*=p;p*=t-u}return o}function Io(i,e,t,n,s){const r=s<i?s:i,o=[],a=js(i,n,e),l=So(a,n,i,r,e),c=[];for(let p=0;p<t.length;++p){const u=t[p].clone(),h=u.w;u.x*=h,u.y*=h,u.z*=h,c[p]=u}for(let p=0;p<=r;++p){const u=c[a-i].clone().multiplyScalar(l[p][0]);for(let h=1;h<=i;++h)u.add(c[a-i+h].clone().multiplyScalar(l[p][h]));o[p]=u}for(let p=r+1;p<=s+1;++p)o[p]=new Lt(0,0,0);return o}function Ro(i,e){let t=1;for(let s=2;s<=i;++s)t*=s;let n=1;for(let s=2;s<=e;++s)n*=s;for(let s=2;s<=i-e;++s)n*=s;return t/n}function Mo(i){const e=i.length,t=[],n=[];for(let r=0;r<e;++r){const o=i[r];t[r]=new _(o.x,o.y,o.z),n[r]=o.w}const s=[];for(let r=0;r<e;++r){const o=t[r].clone();for(let a=1;a<=r;++a)o.sub(s[r-a].clone().multiplyScalar(Ro(r,a)*n[a]));s[r]=o.divideScalar(n[0])}return s}function Lo(i,e,t,n,s){const r=Io(i,e,t,n,s);return Mo(r)}class Oo extends si{degree;knots;controlPoints;startKnot;endKnot;constructor(e,t,n,s,r){super();this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=s||0,this.endKnot=r||this.knots.length-1;for(let o=0;o<n.length;++o){const a=n[o];this.controlPoints[o]=new Lt(a.x,a.y,a.z,a.w)}}getPoint(e,t){const n=t||new _,s=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),r=Eo(this.degree,this.knots,this.controlPoints,s);return r.w!=1&&r.divideScalar(r.w),n.set(r.x,r.y,r.z)}getTangent(e,t){const n=t||new _,s=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),r=Lo(this.degree,this.knots,this.controlPoints,s,1);return n.copy(r[1]).normalize(),n}}/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var Hs={},ie=void 0,Co=Hs;function Cn(i,e){var t=i.split("."),n=Co;!(t[0]in n)&&n.execScript&&n.execScript("var "+t[0]);for(var s;t.length&&(s=t.shift());)!t.length&&e!==ie?n[s]=e:n=n[s]?n[s]:n[s]={}}var W=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined"&&typeof DataView!="undefined";function He(i){var e=i.length,t=0,n=Number.POSITIVE_INFINITY,s,r,o,a,l,c,p,u,h,f;for(u=0;u<e;++u)i[u]>t&&(t=i[u]),i[u]<n&&(n=i[u]);for(s=1<<t,r=new(W?Uint32Array:Array)(s),o=1,a=0,l=2;o<=t;){for(u=0;u<e;++u)if(i[u]===o){for(c=0,p=a,h=0;h<o;++h)c=c<<1|p&1,p>>=1;for(f=o<<16|u,h=c;h<s;h+=l)r[h]=f;++a}++o,a<<=1,l<<=1}return[r,t,n]}function Oe(i,e){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=W?new Uint8Array(i):i,this.m=!1,this.i=Vt,this.r=!1,(e||!(e={}))&&(e.index&&(this.a=e.index),e.bufferSize&&(this.h=e.bufferSize),e.bufferType&&(this.i=e.bufferType),e.resize&&(this.r=e.resize)),this.i){case Pn:this.b=32768,this.c=new(W?Uint8Array:Array)(32768+this.h+258);break;case Vt:this.b=0,this.c=new(W?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var Pn=0,Vt=1,qs={t:Pn,s:Vt};Oe.prototype.k=function(){for(;!this.m;){var i=ce(this,3);switch(i&1&&(this.m=!0),i>>>=1,i){case 0:var e=this.input,t=this.a,n=this.c,s=this.b,r=e.length,o=ie,a=ie,l=n.length,c=ie;if(this.d=this.f=0,t+1>=r)throw Error("invalid uncompressed block header: LEN");if(o=e[t++]|e[t++]<<8,t+1>=r)throw Error("invalid uncompressed block header: NLEN");if(a=e[t++]|e[t++]<<8,o===~a)throw Error("invalid uncompressed block header: length verify");if(t+o>e.length)throw Error("input buffer is broken");switch(this.i){case Pn:for(;s+o>n.length;){if(c=l-s,o-=c,W)n.set(e.subarray(t,t+c),s),s+=c,t+=c;else for(;c--;)n[s++]=e[t++];this.b=s,n=this.e(),s=this.b}break;case Vt:for(;s+o>n.length;)n=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(W)n.set(e.subarray(t,t+o),s),s+=o,t+=o;else for(;o--;)n[s++]=e[t++];this.a=t,this.b=s,this.c=n;break;case 1:this.j(Po,Do);break;case 2:for(var p=ce(this,5)+257,u=ce(this,5)+1,h=ce(this,4)+4,f=new(W?Uint8Array:Array)(Dn.length),d=ie,m=ie,w=ie,y=ie,b=ie,E=ie,R=ie,x=ie,S=ie,x=0;x<h;++x)f[Dn[x]]=ce(this,3);if(!W)for(x=h,h=f.length;x<h;++x)f[Dn[x]]=0;for(d=He(f),y=new(W?Uint8Array:Array)(p+u),x=0,S=p+u;x<S;)switch(b=yt(this,d),b){case 16:for(R=3+ce(this,2);R--;)y[x++]=E;break;case 17:for(R=3+ce(this,3);R--;)y[x++]=0;E=0;break;case 18:for(R=11+ce(this,7);R--;)y[x++]=0;E=0;break;default:E=y[x++]=b}m=He(W?y.subarray(0,p):y.slice(0,p)),w=He(W?y.subarray(p):y.slice(p)),this.j(m,w);break;default:throw Error("unknown BTYPE: "+i)}}return this.n()};var Vs=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Dn=W?new Uint16Array(Vs):Vs,zs=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],Ws=W?new Uint16Array(zs):zs,Qs=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],zt=W?new Uint8Array(Qs):Qs,Ks=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Xs=W?new Uint16Array(Ks):Ks,$s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Wt=W?new Uint8Array($s):$s,Fn=new(W?Uint8Array:Array)(288),qe,Ys;qe=0;for(Ys=Fn.length;qe<Ys;++qe)Fn[qe]=143>=qe?8:255>=qe?9:279>=qe?7:8;var Po=He(Fn),Bn=new(W?Uint8Array:Array)(30),Qt,Js;Qt=0;for(Js=Bn.length;Qt<Js;++Qt)Bn[Qt]=5;var Do=He(Bn);function ce(i,e){for(var t=i.f,n=i.d,s=i.input,r=i.a,o=s.length,a;n<e;){if(r>=o)throw Error("input buffer is broken");t|=s[r++]<<n,n+=8}return a=t&(1<<e)-1,i.f=t>>>e,i.d=n-e,i.a=r,a}function yt(i,e){for(var t=i.f,n=i.d,s=i.input,r=i.a,o=s.length,a=e[0],l=e[1],c,p;n<l&&!(r>=o);)t|=s[r++]<<n,n+=8;if(c=a[t&(1<<l)-1],p=c>>>16,p>n)throw Error("invalid code length: "+p);return i.f=t>>p,i.d=n-p,i.a=r,c&65535}Oe.prototype.j=function(i,e){var t=this.c,n=this.b;this.o=i;for(var s=t.length-258,r,o,a,l;(r=yt(this,i))!==256;)if(256>r)n>=s&&(this.b=n,t=this.e(),n=this.b),t[n++]=r;else for(o=r-257,l=Ws[o],0<zt[o]&&(l+=ce(this,zt[o])),r=yt(this,e),a=Xs[r],0<Wt[r]&&(a+=ce(this,Wt[r])),n>=s&&(this.b=n,t=this.e(),n=this.b);l--;)t[n]=t[n++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=n};Oe.prototype.w=function(i,e){var t=this.c,n=this.b;this.o=i;for(var s=t.length,r,o,a,l;(r=yt(this,i))!==256;)if(256>r)n>=s&&(t=this.e(),s=t.length),t[n++]=r;else for(o=r-257,l=Ws[o],0<zt[o]&&(l+=ce(this,zt[o])),r=yt(this,e),a=Xs[r],0<Wt[r]&&(a+=ce(this,Wt[r])),n+l>s&&(t=this.e(),s=t.length);l--;)t[n]=t[n++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=n};Oe.prototype.e=function(){var i=new(W?Uint8Array:Array)(this.b-32768),e=this.b-32768,t,n,s=this.c;if(W)i.set(s.subarray(32768,i.length));else for(t=0,n=i.length;t<n;++t)i[t]=s[t+32768];if(this.g.push(i),this.l+=i.length,W)s.set(s.subarray(e,e+32768));else for(t=0;32768>t;++t)s[t]=s[e+t];return this.b=32768,s};Oe.prototype.z=function(i){var e,t=this.input.length/this.a+1|0,n,s,r,o=this.input,a=this.c;return i&&(typeof i.p=="number"&&(t=i.p),typeof i.u=="number"&&(t+=i.u)),2>t?(n=(o.length-this.a)/this.o[2],r=258*(n/2)|0,s=r<a.length?a.length+r:a.length<<1):s=a.length*t,W?(e=new Uint8Array(s),e.set(a)):e=a,this.c=e};Oe.prototype.n=function(){var i=0,e=this.c,t=this.g,n,s=new(W?Uint8Array:Array)(this.l+(this.b-32768)),r,o,a,l;if(t.length===0)return W?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(r=0,o=t.length;r<o;++r)for(n=t[r],a=0,l=n.length;a<l;++a)s[i++]=n[a];for(r=32768,o=this.b;r<o;++r)s[i++]=e[r];return this.g=[],this.buffer=s};Oe.prototype.v=function(){var i,e=this.b;return W?this.r?(i=new Uint8Array(e),i.set(this.c.subarray(0,e))):i=this.c.subarray(0,e):(this.c.length>e&&(this.c.length=e),i=this.c),this.buffer=i};function kn(i,e){var t,n;switch(this.input=i,this.a=0,(e||!(e={}))&&(e.index&&(this.a=e.index),e.verify&&(this.A=e.verify)),t=i[this.a++],n=i[this.a++],t&15){case Zs:this.method=Zs;break;default:throw Error("unsupported compression method")}if(((t<<8)+n)%31!=0)throw Error("invalid fcheck flag:"+((t<<8)+n)%31);if(n&32)throw Error("fdict flag is not supported");this.q=new Oe(i,{index:this.a,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})}kn.prototype.k=function(){var i=this.input,e,t;if(e=this.q.k(),this.a=this.q.a,this.A){t=(i[this.a++]<<24|i[this.a++]<<16|i[this.a++]<<8|i[this.a++])>>>0;var n=e;if(typeof n=="string"){var s=n.split(""),r,o;for(r=0,o=s.length;r<o;r++)s[r]=(s[r].charCodeAt(0)&255)>>>0;n=s}for(var a=1,l=0,c=n.length,p,u=0;0<c;){p=1024<c?1024:c,c-=p;do a+=n[u++],l+=a;while(--p);a%=65521,l%=65521}if(t!==(l<<16|a)>>>0)throw Error("invalid adler-32 checksum")}return e};var Zs=8;Cn("Zlib.Inflate",kn);Cn("Zlib.Inflate.prototype.decompress",kn.prototype.k);var Un={ADAPTIVE:qs.s,BLOCK:qs.t},gt,wt,Je,er;if(Object.keys)gt=Object.keys(Un);else for(wt in gt=[],Je=0,Un)gt[Je++]=wt;Je=0;for(er=gt.length;Je<er;++Je)wt=gt[Je],Cn("Zlib.Inflate.BufferType."+wt,Un[wt]);var tr=Hs.Zlib.Inflate,Fo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Inflate:tr});class A{static fbxTree;static sceneGraph;static connections;static serverUrl;crossOrigin;resourcePath;path;manager;constructor(e){this.manager=e||en}load(e,t,n,s){const r=e.split("/").pop();A.serverUrl=e.split(r)[0];const o="",a=new Qe(this.manager);a.setPath(o),a.setResponseType("arraybuffer"),a.load(e,l=>{try{t(this.parse(l,o))}catch(c){setTimeout(()=>{s&&s(c),this.manager.itemError(e),console.log("load error",c)},0)}},n,s)}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setCrossOrigin(e){return this.crossOrigin=e,this}parse(e,t){if(jo(e))A.fbxTree=new Go().parse(e);else{const s=ar(e);if(!Ho(s))throw new Error("FBXLoader: Unknown format.");if(rr(s)<7e3)throw new Error("FBXLoader: FBX version not supported, FileVersion: "+rr(s));A.fbxTree=new No().parse(s)}const n=new ln(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Bo(n).parse(A.fbxTree)}}class Bo{textureLoader;constructor(e){this.textureLoader=e}parse(e){A.connections=this.parseConnections();const t=this.parseImages(),n=this.parseTextures(t),s=this.parseMaterials(n),r=this.parseDeformers(),o=new ko().parse(r);return this.parseScene(r,o,s),A.sceneGraph}parseConnections(){const e=new Map;return"Connections"in A.fbxTree&&A.fbxTree.Connections.connections.forEach(n=>{const s=n[0],r=n[1],o=n[2];e.has(s)||e.set(s,{parents:[],children:[]});const a={ID:r,relationship:o};e.get(s).parents.push(a),e.has(r)||e.set(r,{parents:[],children:[]});const l={ID:s,relationship:o};e.get(r).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in A.fbxTree.Objects){const n=A.fbxTree.Objects.Video;for(const s in n){const r=n[s],o=parseInt(s),a=r.RelativeFilename.split("\\").pop()||r.Filename.split("\\").pop();if(e[o]=`${A.serverUrl}${a}`,"Content"in r){const l=r.Content instanceof ArrayBuffer&&r.Content.byteLength>0,c=typeof r.Content=="string"&&r.Content!=="";if(l||c){const p=this.parseImage(n[s]);t[r.RelativeFilename||r.Filename]=p}}}}for(const n in e){const s=e[n];t[s]!==void 0?e[n]=t[s]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,s=n.slice(n.lastIndexOf(".")+1).toLowerCase();let r;switch(s){case"bmp":r="image/bmp";break;case"jpg":case"jpeg":r="image/jpeg";break;case"png":r="image/png";break;case"tif":r="image/tiff";break;case"tga":if(typeof new Gs!="function"){console.warn("FBXLoader: TGALoader is required to load TGA textures");return}else{if(this.textureLoader.manager.getHandler(".tga")===null){const o=new Gs;o.setPath(this.textureLoader.path),this.textureLoader.manager.addHandler(/\.tga$/i,o)}r="image/tga";break}default:console.warn('FBXLoader: Image type "'+s+'" is not supported.');return}if(typeof t=="string")return"data:"+r+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:r}))}}parseTextures(e){const t=new Map;if("Texture"in A.fbxTree.Objects){const n=A.fbxTree.Objects.Texture;for(const s in n){const r=this.parseTexture(n[s],e);t.set(parseInt(s),r)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const s=e.WrapModeU,r=e.WrapModeV,o=s!==void 0?s.value:0,a=r!==void 0?r.value:0;if(n.wrapS=o===0?rt:an,n.wrapT=a===0?rt:an,"Scaling"in e){const l=e.Scaling.value;n.repeat.x=l[0],n.repeat.y=l[1]}return n}loadTexture(e,t){let n;const s=this.textureLoader.path,r=A.connections.get(e.id).children;r!==void 0&&r.length>0&&t[r[0].ID]!==void 0&&(n=t[r[0].ID],(n.indexOf("blob:")===0||n.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.textureLoader.getHandler(".tga");l===null?(console.warn("FBXLoader: TGALoader not found, creating empty placeholder texture for",n),o=new Mt):o=l.load(n)}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating empty placeholder texture for",n),o=new Mt):o=this.textureLoader.load(n);return this.textureLoader.setPath(s),o}parseMaterials(e){const t=new Map;if("Material"in A.fbxTree.Objects){const n=A.fbxTree.Objects.Material;for(const s in n){const r=this.parseMaterial(n[s],e);r!==null&&t.set(parseInt(s),r)}}return t}parseMaterial(e,t){const n=e.id,s=e.attrName;let r=e.ShadingModel;if(typeof r=="object"&&(r=r.value),!A.connections.has(n))return null;const o=this.parseParameters(e,t,n);let a;switch(r.toLowerCase()){case"phong":a=new hn;break;case"lambert":a=new ri;break;default:console.warn('FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',r),a=new hn;break}return a.setValues(o),a.name=s,a}parseParameters(e,t,n){const s={};return e.BumpFactor&&(s.bumpScale=e.BumpFactor.value),e.Diffuse?s.color=new ee().fromArray(e.Diffuse.value):e.DiffuseColor&&e.DiffuseColor.type==="Color"&&(s.color=new ee().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(s.displacementScale=e.DisplacementFactor.value),e.Emissive?s.emissive=new ee().fromArray(e.Emissive.value):e.EmissiveColor&&e.EmissiveColor.type==="Color"&&(s.emissive=new ee().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(s.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(s.opacity=parseFloat(e.Opacity.value)),s.opacity<1&&(s.transparent=!0),e.ReflectionFactor&&(s.reflectivity=e.ReflectionFactor.value),e.Shininess&&(s.shininess=e.Shininess.value),e.Specular?s.specular=new ee().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(s.specular=new ee().fromArray(e.SpecularColor.value)),A.connections.get(n).children.forEach(r=>{const o=r.relationship;switch(o){case"Bump":s.bumpMap=this.getTexture(t,r.ID);break;case"Maya|TEX_ao_map":s.aoMap=this.getTexture(t,r.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":s.map=this.getTexture(t,r.ID);break;case"DisplacementColor":s.displacementMap=this.getTexture(t,r.ID);break;case"EmissiveColor":s.emissiveMap=this.getTexture(t,r.ID);break;case"NormalMap":case"Maya|TEX_normal_map":s.normalMap=this.getTexture(t,r.ID);break;case"ReflectionColor":s.envMap=this.getTexture(t,r.ID),s.envMap.mapping=ii;break;case"SpecularColor":s.specularMap=this.getTexture(t,r.ID);break;case"TransparentColor":s.alphaMap=this.getTexture(t,r.ID),s.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("FBXLoader: %s map is not supported in js, skipping texture.",o);break}}),s}getTexture(e,t){return"LayeredTexture"in A.fbxTree.Objects&&t in A.fbxTree.Objects.LayeredTexture&&(console.warn("FBXLoader: layered textures are not supported in js. Discarding all but first layer."),t=A.connections.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in A.fbxTree.Objects){const n=A.fbxTree.Objects.Deformer;for(const s in n){const r=n[s],o=A.connections.get(parseInt(s));if(r.attrType==="Skin"){const a=this.parseSkeleton(o,n);a.ID=s,o.parents.length>1&&console.warn("FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[s]=a}else if(r.attrType==="BlendShape"){const a={id:s};a.rawTargets=this.parseMorphTargets(o,n),a.id=s,o.parents.length>1&&console.warn("FBXLoader: morph target attached to more than one geometry is not supported."),t[s]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach(s=>{const r=t[s.ID];if(r.attrType!=="Cluster")return;const o={ID:s.ID,indices:[],weights:[],transformLink:new V().fromArray(r.TransformLink.a)};"Indexes"in r&&(o.indices=r.Indexes.a,o.weights=r.Weights.a),n.push(o)}),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let s=0;s<e.children.length;s++){const r=e.children[s],o=t[r.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=A.connections.get(parseInt(r.ID)).children.filter(l=>l.relationship===void 0)[0].ID,n.push(a)}return n}parseScene(e,t,n){A.sceneGraph=new ke;const s=this.parseModels(e.skeletons,t,n),r=A.fbxTree.Objects.Model;s.forEach(a=>{const l=r[a.ID];this.setLookAtProperties(a,l),A.connections.get(a.ID).parents.forEach(p=>{const u=s.get(p.ID);u!==void 0&&u.add(a)}),a.parent===null&&A.sceneGraph.add(a)}),this.bindSkeleton(e.skeletons,t,s),this.createAmbientLight(),this.setupMorphMaterials(),A.sceneGraph.traverse(a=>{if(a.userData.transformData){a.parent&&(a.userData.transformData.parentMatrixWorld=a.parent.matrix);const l=ir(a.userData.transformData);a.applyMatrix(l)}});const o=new Uo().parse();A.sceneGraph.children.length===1&&A.sceneGraph.children[0].isGroup&&(A.sceneGraph.children[0].animations=o,A.sceneGraph=A.sceneGraph.children[0]),A.sceneGraph.animations=o}parseModels(e,t,n){const s=new Map,r=A.fbxTree.Objects.Model;for(const o in r){const a=parseInt(o),l=r[o],c=A.connections.get(a);let p=this.buildSkeleton(c,e,a,l.attrName);if(!p){switch(l.attrType){case"Camera":p=this.createCamera(c);break;case"Light":p=this.createLight(c);break;case"Mesh":p=this.createMesh(c,t,n);break;case"NurbsCurve":p=this.createCurve(c,t);break;case"LimbNode":case"Root":p=new Ue;break;case"Null":default:p=new ke;break}p.name=it.sanitizeNodeName(l.attrName),p.ID=a}this.getTransformData(p,l),s.set(a,p)}return s}buildSkeleton(e,t,n,s){let r=null;return e.parents.forEach(o=>{for(const a in t){const l=t[a];l.rawBones.forEach((c,p)=>{if(c.ID===o.ID){const u=r;r=new Ue,r.matrixWorld.copy(c.transformLink),r.name=it.sanitizeNodeName(s),r.ID=n,l.bones[p]=r,u!==null&&r.add(u)}})}}),r}createCamera(e){let t,n;if(e.children.forEach(s=>{const r=A.fbxTree.Objects.NodeAttribute[s.ID];r!==void 0&&(n=r)}),n===void 0)t=new We;else{let s=0;n.CameraProjectionType!==void 0&&n.CameraProjectionType.value===1&&(s=1);let r=1;n.NearPlane!==void 0&&(r=n.NearPlane.value/1e3);let o=1e3;n.FarPlane!==void 0&&(o=n.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;n.AspectWidth!==void 0&&n.AspectHeight!==void 0&&(a=n.AspectWidth.value,l=n.AspectHeight.value);const c=a/l;let p=45;n.FieldOfView!==void 0&&(p=n.FieldOfView.value);const u=n.FocalLength?n.FocalLength.value:null;switch(s){case 0:t=new os(p,c,r,o),u!==null&&t.setFocalLength(u);break;case 1:t=new as(-a/2,a/2,l/2,-l/2,r,o);break;default:console.warn("FBXLoader: Unknown camera type "+s+"."),t=new We;break}}return t}createLight(e){let t,n;if(e.children.forEach(s=>{const r=A.fbxTree.Objects.NodeAttribute[s.ID];r!==void 0&&(n=r)}),n===void 0)t=new We;else{let s;n.LightType===void 0?s=0:s=n.LightType.value;let r=16777215;n.Color!==void 0&&(r=new ee().fromArray(n.Color.value));let o=n.Intensity===void 0?1:n.Intensity.value/100;n.CastLightOnObject!==void 0&&n.CastLightOnObject.value===0&&(o=0);let a=0;n.FarAttenuationEnd!==void 0&&(n.EnableFarAttenuation!==void 0&&n.EnableFarAttenuation.value===0?a=0:a=n.FarAttenuationEnd.value);const l=1;switch(s){case 0:t=new _t(r,o,a,l);break;case 1:t=new sn(r,o);break;case 2:let c=Math.PI/3;n.InnerAngle!==void 0&&(c=re.degToRad(n.InnerAngle.value));let p=0;n.OuterAngle!==void 0&&(p=re.degToRad(n.OuterAngle.value),p=Math.max(p,1)),t=new Yn(r,o,a,c,p,l);break;default:console.warn("FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new _t(r,o);break}n.CastShadows!==void 0&&n.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,n){let s,r=null,o=null;const a=[];return e.children.forEach(l=>{t.has(l.ID)&&(r=t.get(l.ID)),n.has(l.ID)&&a.push(n.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new hn({color:13421772}),a.push(o)),"color"in r.attributes&&a.forEach(l=>{}),r.FBX_Deformer?(a.forEach(l=>{l.skinning=!0}),s=new St(r,o),s.normalizeSkinWeights()):s=new It(r,o),s}createCurve(e,t){const n=e.children.reduce((r,o)=>(t.has(o.ID)&&(r=t.get(o.ID)),r),null),s=new ns({color:3342591,linewidth:1});return new is(n,s)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?n.eulerOrder=or(t.RotationOrder.value):n.eulerOrder="ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){"LookAtProperty"in t&&A.connections.get(e.ID).children.forEach(s=>{if(s.relationship==="LookAtProperty"){const r=A.fbxTree.Objects.Model[s.ID];if("Lcl_Translation"in r){const o=r.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),A.sceneGraph.add(e.target)):e.lookAt(new _().fromArray(o))}}})}bindSkeleton(e,t,n){const s=this.parsePoseNodes();for(const r in e){const o=e[r];A.connections.get(parseInt(o.ID)).parents.forEach(l=>{if(t.has(l.ID)){const c=l.ID;A.connections.get(c).parents.forEach(u=>{n.has(u.ID)&&n.get(u.ID).bind(new pn(o.bones),s[u.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in A.fbxTree.Objects){const t=A.fbxTree.Objects.Pose;for(const n in t)if(t[n].attrType==="BindPose"){const s=t[n].PoseNode;Array.isArray(s)?s.forEach(r=>{e[r.Node]=new V().fromArray(r.Matrix.a)}):e[s.Node]=new V().fromArray(s.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in A.fbxTree&&"AmbientColor"in A.fbxTree.GlobalSettings){const e=A.fbxTree.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],s=e[2];if(t!==0||n!==0||s!==0){const r=new ee(t,n,s);A.sceneGraph.add(new cs(r,1))}}}setupMorphMaterials(){A.sceneGraph.traverse(e=>{e.isMesh&&e.geometry.morphAttributes.position&&e.geometry.morphAttributes.position.length&&(Array.isArray(e.material)?e.material.forEach((t,n)=>{this.setupMorphMaterial(e,t,n)}):this.setupMorphMaterial(e,e.material))})}setupMorphMaterial(e,t,n){const s=e.uuid,r=t.uuid;let o=!1;if(A.sceneGraph.traverse(a=>{a.isMesh&&(Array.isArray(a.material)?a.material.forEach(l=>{l.uuid===r&&a.uuid!==s&&(o=!0)}):a.material.uuid===r&&a.uuid!==s&&(o=!0))}),o){const a=t.clone();a.morphTargets=!0,n===void 0?e.material=a:e.material[n]=a}else t.morphTargets=!0}}class ko{constructor(){}parse(e){const t=new Map;if("Geometry"in A.fbxTree.Objects){const n=A.fbxTree.Objects.Geometry;for(const s in n){const r=A.connections.get(parseInt(s)),o=this.parseGeometry(r,n[s],e);t.set(parseInt(s),o)}}return t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const s=n.skeletons,r=n.morphTargets,o=e.parents.map(h=>A.fbxTree.Objects.Model[h.ID]);if(o.length===0)return;const a=e.children.reduce((h,f)=>(s[f.ID]!==void 0&&(h=s[f.ID]),h),null),l=e.children.reduce((h,f)=>(r[f.ID]!==void 0&&(h=r[f.ID]),h),null),c=o[0],p={};"RotationOrder"in c&&(p.eulerOrder=or(c.RotationOrder.value)),"InheritType"in c&&(p.inheritType=parseInt(c.InheritType.value)),"GeometricTranslation"in c&&(p.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(p.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(p.scale=c.GeometricScaling.value);const u=ir(p);return this.genGeometry(t,a,l,u)}genGeometry(e,t,n,s){const r=new Pe;e.attrName&&(r.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new De(a.vertex,3);if(s.applyToBufferAttribute(l),r.addAttribute("position",l),a.colors.length>0&&r.addAttribute("color",new De(a.colors,3)),t&&(r.addAttribute("skinIndex",new tn(a.weightsIndices,4)),r.addAttribute("skinWeight",new De(a.vertexWeights,4)),r.FBX_Deformer=t),a.normal.length>0){const c=new De(a.normal,3),p=new oi().getNormalMatrix(s);c.applyMatrix3(p),r.addAttribute("normal",c)}if(a.uvs.forEach((c,p)=>{let u="uv"+(p+1).toString();p===0&&(u="uv"),r.addAttribute(u,new De(a.uvs[p],2))}),o.material&&o.material.mappingType!=="AllSame"){let c=a.materialIndex[0],p=0;if(a.materialIndex.forEach((u,h)=>{u!==c&&(r.addGroup(p,h-p,c),c=u,p=h)}),r.groups.length>0){const u=r.groups[r.groups.length-1],h=u.start+u.count;h!==a.materialIndex.length&&r.addGroup(h,a.materialIndex.length-h,c)}r.groups.length===0&&r.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(r,e,n,s),r}parseGeoNode(e,t){const n={};if(n.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],n.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let s=0;for(;e.LayerElementUV[s];)n.uv.push(this.parseUVs(e.LayerElementUV[s])),s++}return n.weightTable={},t!==null&&(n.skeleton=t,t.rawBones.forEach((s,r)=>{s.indices.forEach((o,a)=>{n.weightTable[o]===void 0&&(n.weightTable[o]=[]),n.weightTable[o].push({id:r,weight:s.weights[a]})})})),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n,s=0,r=0,o=!1,a=[],l=[],c=[],p=[],u=[],h=[];return e.vertexIndices.forEach((f,d)=>{let m=!1;f<0&&(f=f^-1,m=!0);let w=[],y=[];if(a.push(f*3,f*3+1,f*3+2),e.color){const b=Kt(d,s,f,e.color);c.push(b[0],b[1],b[2])}if(e.skeleton){if(e.weightTable[f]!==void 0&&e.weightTable[f].forEach(b=>{y.push(b.weight),w.push(b.id)}),y.length>4){o||(console.warn("FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);const b=[0,0,0,0],E=[0,0,0,0];y.forEach((R,x)=>{let S=R,M=w[x];E.forEach((D,F,k)=>{if(S>D){k[F]=S,S=D;const H=b[F];b[F]=M,M=H}})}),w=b,y=E}for(;y.length<4;)y.push(0),w.push(0);for(let b=0;b<4;++b)u.push(y[b]),h.push(w[b])}if(e.normal){const b=Kt(d,s,f,e.normal);l.push(b[0],b[1],b[2])}e.material&&e.material.mappingType!=="AllSame"&&Kt(d,s,f,e.material)[0],e.uv&&e.uv.forEach((b,E)=>{const R=Kt(d,s,f,b);p[E]===void 0&&(p[E]=[]),p[E].push(R[0]),p[E].push(R[1])}),r++,m&&(this.genFace(t,e,a,n,l,c,p,u,h,r),s++,r=0,a=[],l=[],c=[],p=[],u=[],h=[])}),t}genFace(e,t,n,s,r,o,a,l,c,p){for(let u=2;u<p;u++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[(u-1)*3]]),e.vertex.push(t.vertexPositions[n[(u-1)*3+1]]),e.vertex.push(t.vertexPositions[n[(u-1)*3+2]]),e.vertex.push(t.vertexPositions[n[u*3]]),e.vertex.push(t.vertexPositions[n[u*3+1]]),e.vertex.push(t.vertexPositions[n[u*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(u-1)*4]),e.vertexWeights.push(l[(u-1)*4+1]),e.vertexWeights.push(l[(u-1)*4+2]),e.vertexWeights.push(l[(u-1)*4+3]),e.vertexWeights.push(l[u*4]),e.vertexWeights.push(l[u*4+1]),e.vertexWeights.push(l[u*4+2]),e.vertexWeights.push(l[u*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(u-1)*4]),e.weightsIndices.push(c[(u-1)*4+1]),e.weightsIndices.push(c[(u-1)*4+2]),e.weightsIndices.push(c[(u-1)*4+3]),e.weightsIndices.push(c[u*4]),e.weightsIndices.push(c[u*4+1]),e.weightsIndices.push(c[u*4+2]),e.weightsIndices.push(c[u*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(u-1)*3]),e.colors.push(o[(u-1)*3+1]),e.colors.push(o[(u-1)*3+2]),e.colors.push(o[u*3]),e.colors.push(o[u*3+1]),e.colors.push(o[u*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(s),e.materialIndex.push(s),e.materialIndex.push(s)),t.normal&&(e.normal.push(r[0]),e.normal.push(r[1]),e.normal.push(r[2]),e.normal.push(r[(u-1)*3]),e.normal.push(r[(u-1)*3+1]),e.normal.push(r[(u-1)*3+2]),e.normal.push(r[u*3]),e.normal.push(r[u*3+1]),e.normal.push(r[u*3+2])),t.uv&&t.uv.forEach((h,f)=>{e.uvs[f]===void 0&&(e.uvs[f]=[]),e.uvs[f].push(a[f][0]),e.uvs[f].push(a[f][1]),e.uvs[f].push(a[f][(u-1)*2]),e.uvs[f].push(a[f][(u-1)*2+1]),e.uvs[f].push(a[f][u*2]),e.uvs[f].push(a[f][u*2+1])})}addMorphTargets(e,t,n,s){n!==null&&(e.morphAttributes.position=[],n.rawTargets.forEach(r=>{const o=A.fbxTree.Objects.Geometry[r.geoID];o!==void 0&&this.genMorphGeometry(e,t,o,s,r.name)}))}genMorphGeometry(e,t,n,s,r){const o=new Pe;n.attrName&&(o.name=n.attrName);const a=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],l=t.Vertices!==void 0?t.Vertices.a.slice():[],c=n.Vertices!==void 0?n.Vertices.a:[],p=n.Indexes!==void 0?n.Indexes.a:[];for(let d=0;d<p.length;d++){const m=p[d]*3;l[m]+=c[d*3],l[m+1]+=c[d*3+1],l[m+2]+=c[d*3+2]}const u={vertexIndices:a,vertexPositions:l},h=this.genBuffers(u),f=new De(h.vertex,3);f.name=r||n.attrName,s.applyToBufferAttribute(f),e.morphAttributes.position.push(f)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,s=e.Normals.a;let r=[];return n==="IndexToDirect"&&("NormalIndex"in e?r=e.NormalIndex.a:"NormalsIndex"in e&&(r=e.NormalsIndex.a)),{dataSize:3,buffer:s,indices:r,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,s=e.UV.a;let r=[];return n==="IndexToDirect"&&(r=e.UVIndex.a),{dataSize:2,buffer:s,indices:r,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,s=e.Colors.a;let r=[];return n==="IndexToDirect"&&(r=e.ColorIndex.a),{dataSize:4,buffer:s,indices:r,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const s=e.Materials.a,r=[];for(let o=0;o<s.length;++o)r.push(o);return{dataSize:1,buffer:s,indices:r,mappingType:t,referenceType:n}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Pe;const n=t-1,s=e.KnotVector.a,r=[],o=e.Points.a;for(let f=0,d=o.length;f<d;f+=4)r.push(new Lt().fromArray(o,f));let a,l;if(e.Form==="Closed")r.push(r[0]);else if(e.Form==="Periodic"){a=n,l=s.length-1-a;for(let f=0;f<n;++f)r.push(r[f])}const p=new Oo(n,s,r,a,l).getPoint(r.length*7),u=new Float32Array(Number(p.length)*3),h=new Pe;return h.addAttribute("position",new st(u,3)),h}}class Uo{constructor(){}parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const n in t){const s=t[n],r=this.addClip(s);e.push(r)}return e}parseClips(){if(A.fbxTree.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=A.fbxTree.Objects.AnimationCurveNode,t=new Map;for(const n in e){const s=e[n];if(s.attrName.match(/S|R|T|DeformPercent/)!==null){const r={id:s.id,attr:s.attrName,curves:{}};t.set(r.id,r)}}return t}parseAnimationCurves(e){const t=A.fbxTree.Objects.AnimationCurve;for(const n in t){const s={id:t[n].id,times:t[n].KeyTime.a.map(qo),values:t[n].KeyValueFloat.a},r=A.connections.get(s.id);if(r!==void 0){const o=r.parents[0].ID,a=r.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=s:a.match(/Y/)?e.get(o).curves.y=s:a.match(/Z/)?e.get(o).curves.z=s:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=s)}}}parseAnimationLayers(e){const t=A.fbxTree.Objects.AnimationLayer,n=new Map;for(const s in t){const r=[],o=A.connections.get(parseInt(s));o!==void 0&&(o.children.forEach((l,c)=>{if(e.has(l.ID)){const p=e.get(l.ID);if(p.curves.x!==void 0||p.curves.y!==void 0||p.curves.z!==void 0){if(r[c]===void 0){const u=A.connections.get(l.ID).parents.filter(h=>h.relationship!==void 0)[0].ID;if(u!==void 0){const h=A.fbxTree.Objects.Model[u.toString()],f={modelName:it.sanitizeNodeName(h.attrName),ID:h.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};A.sceneGraph.traverse(d=>{d.ID===h.id&&(f.transform=d.matrix,d.userData.transformData&&(f.eulerOrder=d.userData.transformData.eulerOrder))}),f.transform||(f.transform=new V),"PreRotation"in h&&(f.preRotation=h.PreRotation.value),"PostRotation"in h&&(f.postRotation=h.PostRotation.value),r[c]=f}}r[c]&&(r[c][p.attr]=p)}else if(p.curves.morph!==void 0){if(r[c]===void 0){const u=A.connections.get(l.ID).parents.filter(y=>y.relationship!==void 0)[0].ID,h=A.connections.get(u).parents[0].ID,f=A.connections.get(h).parents[0].ID,d=A.connections.get(f).parents[0].ID,m=A.fbxTree.Objects.Model[d],w={modelName:it.sanitizeNodeName(m.attrName),morphName:A.fbxTree.Objects.Deformer[u].attrName};r[c]=w}r[c][p.attr]=p}}}),n.set(parseInt(s),r))}return n}parseAnimStacks(e){const t=A.fbxTree.Objects.AnimationStack,n={};for(const s in t){const r=A.connections.get(parseInt(s)).children;r.length>1&&console.warn("FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(r[0].ID);n[s]={name:t[s].attrName,layer:o}}return n}addClip(e){let t=[];return e.layer.forEach(n=>{t=t.concat(this.generateTracks(n))}),new Rt(e.name,-1,t)}generateTracks(e){const t=[];let n=new _,s=new j,r=new _;if(e.transform&&e.transform.decompose(n,s,r),n=n.toArray(),s=new Ke().setFromQuaternion(s,e.eulerOrder).toArray(),r=r.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,s,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,r,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,n,s){const r=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(r,t,n);return new cn(e+"."+s,r,o)}generateRotationTrack(e,t,n,s,r,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(re.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(re.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(re.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,n);s!==void 0&&(s=s.map(re.degToRad),s.push(o),s=new Ke().fromArray(s),s=new j().setFromEuler(s)),r!==void 0&&(r=r.map(re.degToRad),r.push(o),r=new Ke().fromArray(r),r=new j().setFromEuler(r).inverse());const c=new j,p=new Ke,u=[];for(let h=0;h<l.length;h+=3)p.set(l[h],l[h+1],l[h+2],o),c.setFromEuler(p),s!==void 0&&c.premultiply(s),r!==void 0&&c.multiply(r),c.toArray(u,h/3*4);return new un(e+".quaternion",a,u)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map(r=>r/100),s=A.sceneGraph.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new ls(e.modelName+".morphTargetInfluences["+s+"]",t.times,n)}getTimesForAllAxes(e){let t=[];return e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort((n,s)=>n-s).filter((n,s,r)=>r.indexOf(n)==s),t}getKeyframeTrackValues(e,t,n){const s=n,r=[];let o=-1,a=-1,l=-1;return e.forEach(c=>{if(t.x&&(o=t.x.times.indexOf(c)),t.y&&(a=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),o!==-1){const p=t.x.values[o];r.push(p),s[0]=p}else r.push(s[0]);if(a!==-1){const p=t.y.values[a];r.push(p),s[1]=p}else r.push(s[1]);if(l!==-1){const p=t.z.values[l];r.push(p),s[2]=p}else r.push(s[2])}),r}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const n=e.values[t-1],s=e.values[t]-n,r=Math.abs(s);if(r>=180){const o=r/180,a=s/o;let l=n+a;const c=e.times[t-1],u=(e.times[t]-c)/o;let h=c+u;const f=[],d=[];for(;h<e.times[t];)f.push(h),h+=u,d.push(l),l+=a;e.times=lr(e.times,t,f),e.values=lr(e.values,t,d)}}}}class No{allNodes;currentPropName;currentProp;currentIndent;nodeStack;constructor(){}getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new sr,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=e.split(/[\r\n]+/);return t.forEach((n,s)=>{const r=n.match(/^[\s\t]*;/),o=n.match(/^[\s\t]*$/);if(r||o)return;const a=n.match("^\\t{"+this.currentIndent+"}(\\w+):(.*){",""),l=n.match("^\\t{"+this.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=n.match("^\\t{"+(this.currentIndent-1)+"}}");a?this.parseNodeBegin(n,a):l?this.parseNodeProperty(n,l,t[++s]):c?this.popStack():n.match(/^[^\s\t}]/)&&this.parseNodePropertyContinued(n)}),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),s=t[2].split(",").map(l=>l.trim().replace(/^"/,"").replace(/"$/,"")),r={name:n},o=this.parseNodeAttr(s),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(n,r):n in a?(n==="PoseNode"?a.PoseNode.push(r):a[n].id!==void 0&&(a[n]={},a[n][a[n].id]=a[n]),o.id!==""&&(a[n][o.id]=r)):typeof o.id=="number"?(a[n]={},a[n][o.id]=r):n!=="Properties70"&&(n==="PoseNode"?a[n]=[r]:a[n]=r),typeof o.id=="number"&&(r.id=o.id),o.name!==""&&(r.attrName=o.name),o.type!==""&&(r.attrType=o.type),this.pushStack(r)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",s="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),s=e[2]),{id:t,name:n,type:s}}parseNodeProperty(e,t,n){let s=t[1].replace(/^"/,"").replace(/"$/,"").trim(),r=t[2].replace(/^"/,"").replace(/"$/,"").trim();s==="Content"&&r===","&&(r=n.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,s,r);return}if(s==="C"){const l=r.split(",").slice(1),c=parseInt(l[0]),p=parseInt(l[1]);let u=r.split(",").slice(3);u=u.map(h=>h.trim().replace(/^"/,"")),s="connections",r=[c,p],zo(r,u),o[s]===void 0&&(o[s]=[])}s==="Node"&&(o.id=r),s in o&&Array.isArray(o[s])?o[s].push(r):s!=="a"?o[s]=r:o.a=r,this.setCurrentProp(o,s),s==="a"&&r.slice(-1)!==","&&(o.a=Gn(r))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=Gn(t.a))}parseNodeSpecialProperty(e,t,n){const s=n.split('",').map(p=>p.trim().replace(/^\"/,"").replace(/\s/,"_")),r=s[0],o=s[1],a=s[2],l=s[3];let c=s[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=Gn(c);break}this.getPrevNode()[r]={type:o,type2:a,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),r)}}class Go{constructor(){}parse(e){const t=new nr(e);t.skip(23);const n=t.getUint32();console.log("FBXLoader: FBX binary version: "+n);const s=new sr;for(;!this.endOfContent(t);){const r=this.parseNode(t,n);r!==null&&s.add(r.name,r)}return s}endOfContent(e){return e.size()%16==0?(e.getOffset()+160+16&~15)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},s=t>=7500?e.getUint64():e.getUint32(),r=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(s===0)return null;const l=[];for(let h=0;h<r;h++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",p=l.length>1?l[1]:"",u=l.length>2?l[2]:"";for(n.singleProperty=r===1&&e.getOffset()===s;s>e.getOffset();){const h=this.parseNode(e,t);h!==null&&this.parseSubNode(a,n,h)}return n.propertyList=l,typeof c=="number"&&(n.id=c),p!==""&&(n.attrName=p),u!==""&&(n.attrType=u),a!==""&&(n.name=a),n}parseSubNode(e,t,n){if(n.singleProperty===!0){const s=n.propertyList[0];Array.isArray(s)?(t[n.name]=n,n.a=s):t[n.name]=s}else if(e==="Connections"&&n.name==="C"){const s=[];n.propertyList.forEach((r,o)=>{o!==0&&s.push(r)}),t.connections===void 0&&(t.connections=[]),t.connections.push(s)}else if(n.name==="Properties70")Object.keys(n).forEach(r=>{t[r]=n[r]});else if(e==="Properties70"&&n.name==="P"){let s=n.propertyList[0],r=n.propertyList[1];const o=n.propertyList[2],a=n.propertyList[3];let l;s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),r==="Color"||r==="ColorRGB"||r==="Vector"||r==="Vector3D"||r.indexOf("Lcl_")===0?l=[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:l=n.propertyList[4],t[s]={type:r,type2:o,flag:a,value:l}}else t[n.name]===void 0?typeof n.id=="number"?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:n.name==="PoseNode"?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):t[n.name][n.id]===void 0&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":const n=e.getUint32();return e.getArrayBuffer(n);case"S":const s=e.getUint32();return e.getString(s);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),o=e.getUint32(),a=e.getUint32();if(o===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}typeof Fo=="undefined"&&console.error("FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");const l=new tr(new Uint8Array(e.getArrayBuffer(a))),c=new nr(l.decompress().buffer);switch(t){case"b":case"c":return c.getBooleanArray(r);case"d":return c.getFloat64Array(r);case"f":return c.getFloat32Array(r);case"i":return c.getInt32Array(r);case"l":return c.getInt64Array(r)}default:throw new Error("FBXLoader: Unknown property type "+t)}}}class nr{littleEndian;offset;dv;constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)==1}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let s=0;s<e;s++)t[s]=this.getUint8();const n=t.indexOf(0);return n>=0&&(t=t.slice(0,n)),Fe.decodeText(new Uint8Array(t))}}class sr{constructor(){}add(e,t){this[e]=t}}function jo(i){const e="Kaydara FBX Binary  \0";return i.byteLength>=e.length&&e===ar(i,0,e.length)}function Ho(i){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function n(s){const r=i[s-1];return i=i.slice(t+s),t++,r}for(let s=0;s<e.length;++s)if(n(1)===e[s])return!1;return!0}function rr(i){const e=/FBXVersion: (\d+)/,t=i.match(e);if(t)return parseInt(t[1]);throw new Error("FBXLoader: Cannot find the version number for the file given.")}function qo(i){return i/46186158e3}const Vo=[];function Kt(i,e,t,n){let s;switch(n.mappingType){case"ByPolygonVertex":s=i;break;case"ByPolygon":s=e;break;case"ByVertice":s=t;break;case"AllSame":s=n.indices[0];break;default:console.warn("FBXLoader: unknown attribute mapping type "+n.mappingType)}n.referenceType==="IndexToDirect"&&(s=n.indices[s]);const r=s*n.dataSize,o=r+n.dataSize;return Wo(Vo,n.buffer,r,o)}const Nn=new Ke,Ze=new _;function ir(i){const e=new V,t=new V,n=new V,s=new V,r=new V,o=new V,a=new V,l=new V,c=new V;let p=new V;const u=new V,h=i.inheritType?i.inheritType:0;if(i.translation&&e.setPosition(Ze.fromArray(i.translation)),i.preRotation){const M=i.preRotation.map(re.degToRad);M.push(i.eulerOrder),t.makeRotationFromEuler(Nn.fromArray(M))}if(i.rotation){const M=i.rotation.map(re.degToRad);M.push(i.eulerOrder),n.makeRotationFromEuler(Nn.fromArray(M))}if(i.postRotation){const M=i.postRotation.map(re.degToRad);M.push(i.eulerOrder),s.makeRotationFromEuler(Nn.fromArray(M))}i.scale&&r.scale(Ze.fromArray(i.scale)),i.scalingOffset&&a.setPosition(Ze.fromArray(i.scalingOffset)),i.scalingPivot&&o.setPosition(Ze.fromArray(i.scalingPivot)),i.rotationOffset&&l.setPosition(Ze.fromArray(i.rotationOffset)),i.rotationPivot&&c.setPosition(Ze.fromArray(i.rotationPivot)),i.parentMatrixWorld&&(p=i.parentMatrixWorld);const f=t.multiply(n).multiply(s),d=new V;p.extractRotation(d);const m=new V;m.copyPosition(p);const w=m.invert().multiply(p),y=d.invert().multiply(w),b=r;let E;if(h===0)E=d.multiply(f).multiply(y).multiply(b);else if(h===1)E=d.multiply(y).multiply(f).multiply(b);else{const M=new V().copy(r),D=y.multiply(M.invert());E=d.multiply(f).multiply(D).multiply(b)}let R=e.multiply(l).multiply(c).multiply(t).multiply(n).multiply(s).multiply(c.invert()).multiply(a).multiply(o).multiply(r).multiply(o.invert());const x=new V().copyPosition(R),S=p.multiply(x);return u.copyPosition(S),R=u.multiply(E),R}function or(i){i=i||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return i===6?(console.warn("FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[i]}function Gn(i){return i.split(",").map(t=>parseFloat(t))}function ar(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=i.byteLength),Fe.decodeText(new Uint8Array(i,e,t))}function zo(i,e){for(let t=0,n=i.length,s=e.length;t<s;t++,n++)i[n]=e[t]}function Wo(i,e,t,n){for(let s=t,r=0;s<n;s++,r++)i[r]=e[s];return i}function lr(i,e,t){return i.slice(0,e).concat(t).concat(i.slice(e))}var se;(function(i){i[i.glTF=0]="glTF",i[i.FBX=1]="FBX",i[i.OBJ=2]="OBJ",i[i.VRM=3]="VRM",i[i.PNG=4]="PNG",i[i.JPEG=5]="JPEG",i[i.MP4=6]="MP4",i[i.TS=7]="TS",i[i.MKV=8]="MKV",i[i.MP3=9]="MP3",i[i.OGG=10]="OGG",i[i.AAC=11]="AAC",i[i.CSV=12]="CSV",i[i.PlainText=13]="PlainText",i[i.DOC=14]="DOC",i[i.XLS=15]="XLS",i[i.Script=16]="Script"})(se||(se={}));var bt;(function(i){i[i.Model=0]="Model",i[i.Image=1]="Image",i[i.Video=2]="Video",i[i.Audio=3]="Audio",i[i.Document=4]="Document",i[i.Text=5]="Text",i[i.Script=6]="Script"})(bt||(bt={}));const Qo=new RegExp("(?:^[a-z][a-z0-9+.-]*:|//)"),cr=i=>Qo.test(i),Ko={"0":5,"1":15,"2":30},ur=new RegExp(/^(.*)_LOD(\d+)$/),Xo=(i,e)=>{const t=new Map;i.traverse(n=>{if(!!n.isMesh){if(typeof e.receiveShadow!="undefined"&&(n.receiveShadow=e.receiveShadow),typeof e.castShadow!="undefined"&&(n.castShadow=e.castShadow),t.has(n.material))n.material=t.get(n.material);else if(n.material?.userData?.gltfExtensions?.KHR_materials_clearcoat){const s=new rn({});s.setValues(n.material),s.clearcoat=n.material.userData.gltfExtensions.KHR_materials_clearcoat.clearcoatFactor,s.clearcoatRoughness=n.material.userData.gltfExtensions.KHR_materials_clearcoat.clearcoatRoughnessFactor,s.defines={STANDARD:"",PHYSICAL:""},t.set(n.material,s),n.material=s}}}),t.clear(),pr(i),i.children.length&&i.children.forEach(n=>pr(n))},pr=i=>{if(!!!i.children?.find(n=>String(n.name).match(ur)))return i;const t=new Map;return i.children.forEach(n=>{const s=n.name.match(ur);if(!s)return;const[r,o,a]=s;!o||!a||(t.has(o)||t.set(o,[]),t.get(o)?.push({object:n,level:a}))}),t.forEach((n,s)=>{const r=new ai;r.name=s,n[0].object.parent?.add(r),n.forEach(({level:o,object:a})=>{r.addLevel(a,Te.LOD_DISTANCES[o])})}),i},$o=i=>/\.(?:gltf|glb)$/.test(i)?se.glTF:/\.(?:fbx)$/.test(i)?se.FBX:/\.(?:vrm)$/.test(i)?se.VRM:/\.(?:png)$/.test(i)?se.PNG:/\.(?:jpg|jpeg|)$/.test(i)?se.JPEG:null,Yo=i=>/\.(?:gltf|glb|vrm|fbx|obj)$/.test(i)?bt.Model:/\.png|jpg|jpeg$/.test(i)?bt.Image:null,Jo=new A,Zo=new ln,ea=new Qe,ta=i=>{switch(i){case se.glTF:case se.VRM:return qt();case se.FBX:return Jo;case se.PNG:case se.JPEG:return Zo;default:return ea}},hr=(i,e=s=>{},t=s=>{},n=s=>{})=>{if(!i.url){n(new Error("URL is empty"));return}const s=cr(i.url)?i.url:Ge.publicPath+i.url;Te.Cache.has(s)&&e(Te.Cache.get(s));const r=$o(s),o=Yo(s);ta(r).load(s,l=>{(r===se.glTF||r===se.VRM)&&Us(l),o===bt.Model&&Xo(l.scene,i),Te.Cache.set(s,l),e(l)},t,n)};class Te{static Cache=new Map;static loaders=new Map;static LOD_DISTANCES=Ko;assetType;assetClass;result;static load(e,t=r=>{},n=r=>{},s=r=>{}){hr(e,t,n,s)}static async loadAsync(e){return new Promise((t,n)=>{hr(e,t,()=>{},t)})}static getFromCache(e){return Te.Cache.get(cr(e)?e:Ge.publicPath+e)}}function Ve(){let i=Ge.currentWorld;return i||(i=Ge.defaultWorld),i}const na=new Map,xe=(i,e)=>{const t=ki(e),n=new Map;return e&&Object.defineProperty(t,"_schema",{value:e}),Object.defineProperty(t,"_map",{value:n}),Object.defineProperty(t,"_name",{value:i,enumerable:!0}),Object.defineProperty(t,"get",{value:function(s){return n.get(s)}}),Object.defineProperty(t,"set",{value:function(s,r){return e&&Object.defineProperties(r,Object.keys(e).reduce((o,a)=>(o[a]={get(){return t[a][s]},set(l){t[a][s]=l}},o),{})),n.set(s,r)}}),Object.defineProperty(t,"delete",{value:function(s){return n.delete(s)}}),na.set(i,t),t},he=(i,e)=>{if(typeof i=="undefined")throw new Error("[getComponent]: entity is undefined");return e.get(i)},et=(i,e,t,n=Ve())=>{if(typeof i=="undefined")throw new Error("[addComponent]: entity is undefined");if(Ni(n,e,i),e._schema)for(const[s]of Object.entries(e._schema))e[s][i]=t[s];return n._removedComponents.get(i)?.delete(e),e.set(i,t),e.get(i)},qa=(i,e,t=Ve())=>{if(typeof i=="undefined")throw new Error("[hasComponent]: entity is undefined");return _n(t,e,i)},sa=(i,e,t=Ve())=>{if(typeof i=="undefined"){console.warn("[removeComponent]: entity is undefined");return}const n=e.get(i),s=t._removedComponents.get(i)??new Set;return t._removedComponents.set(i,s.add(e)),Gi(t,e,i),n},Va=(i,e=Ve())=>{for(const t of xs(e,i))sa(i,t,e)};function za(i){const e=Pi(i),t=Li(e),n=Oi(e),s=(r=Ve())=>e(r);return s.enter=(r=Ve())=>t(r),s.exit=(r=Ve())=>n(r),s}class Xt{static instance=new Xt;_animations;_defaultModel;_defaultSkeleton;getAnimationDuration(e){const t=this._animations.find(n=>n.name===e);return t?t.duration:0}getAnimations(){return new Promise(e=>{this._animations&&e(this._animations),Xe||e([]),qt().load(Ge.publicPath+"/models/avatars/Animations.glb",t=>{t.scene.traverse(n=>{n.type==="SkinnedMesh"&&!this._defaultSkeleton&&(this._defaultSkeleton=n)}),this._defaultSkeleton||(this._defaultSkeleton=Or()),this._animations=t.animations,this._animations?.forEach(n=>{n.tracks=n.tracks.filter(s=>!s.name.match(/^CC_Base_/))}),e(this._animations)},console.log,console.error)})}getDefaultModel(){return new Promise(e=>{this._defaultModel&&e(this._defaultModel),Xe||e(new ke),qt().load(Ge.publicPath+"/models/avatars/Razer1.glb",t=>{this._defaultModel=t.scene,this._defaultModel.traverse(n=>{n.material&&(n.material.transparent=!0,n.material.opacity=.5)}),e(this._defaultModel)},console.log,console.error)})}}const fr=xe("AnimationComponent"),jn=xe("AvatarComponent");class $t{static retarget(e,t,n){n||(n={preserveMatrix:!0,preservePosition:!0,preserveHipPosition:!1,useTargetMatrix:!1,hip:"hip",names:{}});const s=new _,r=new j,o=new _,a=new V,l=new V,c=new V;n.preserveMatrix=n.preserveMatrix!==void 0?n.preserveMatrix:!0,n.preservePosition=n.preservePosition!==void 0?n.preservePosition:!0,n.preserveHipPosition=n.preserveHipPosition!==void 0?n.preserveHipPosition:!1,n.useTargetMatrix=n.useTargetMatrix!==void 0?n.useTargetMatrix:!1,n.hip=n.hip!==void 0?n.hip:"hip",n.names=n.names||{};const p=t.isObject3D?t.skeleton.bones:this.getBones(t),u=e.isObject3D?e.skeleton.bones:this.getBones(e);let h,f,d,m,w;if(e.isObject3D?e.skeleton.pose():(n.useTargetMatrix=!0,n.preserveMatrix=!1),n.preservePosition){w=[];for(let y=0;y<u.length;y++)w.push(u[y].position.clone())}if(n.preserveMatrix){e.updateMatrixWorld(),e.matrixWorld.identity();for(let y=0;y<e.children.length;++y)e.children[y].updateMatrixWorld(!0)}if(n.offsets){h=[];for(let y=0;y<u.length;++y)f=u[y],d=n.names[f.name]||f.name,n.offsets&&n.offsets[d]&&(f.matrix.multiply(n.offsets[d]),f.matrix.decompose(f.position,f.quaternion,f.scale),f.updateMatrixWorld()),h.push(f.matrixWorld.clone())}for(let y=0;y<u.length;++y){if(f=u[y],d=n.names[f.name]||f.name,m=this.getBoneByName(d,p),c.copy(f.matrixWorld),m){if(m.updateMatrixWorld(),n.useTargetMatrix?l.copy(m.matrixWorld):(l.copy(e.matrixWorld).invert(),l.multiply(m.matrixWorld)),o.setFromMatrixScale(l),l.scale(o.set(1/o.x,1/o.y,1/o.z)),c.makeRotationFromQuaternion(r.setFromRotationMatrix(l)),e.isObject3D){const b=u.indexOf(f),E=h?h[b]:a.copy(e.skeleton.boneInverses[b]).invert();c.multiply(E)}c.copyPosition(l)}f.parent&&f.parent.isBone?(f.matrix.copy(f.parent.matrixWorld).invert(),f.matrix.multiply(c)):f.matrix.copy(c),n.preserveHipPosition&&d===n.hip&&f.matrix.setPosition(s.set(0,f.position.y,0)),f.matrix.decompose(f.position,f.quaternion,f.scale),f.updateMatrixWorld()}if(n.preservePosition)for(let y=0;y<u.length;++y)f=u[y],d=n.names[f.name]||f.name,d!==n.hip&&f.position.copy(w[y]);n.preserveMatrix&&e.updateMatrixWorld(!0)}static retargetClip(e,t,n,s={}){s.useFirstFramePosition=s.useFirstFramePosition!==void 0?s.useFirstFramePosition:!1,s.fps=s.fps!==void 0?s.fps:30,s.names=s.names||[],t.isObject3D||(t=this.getHelperFromSkeleton(t));const r=Math.round(n.duration*(s.fps/1e3)*1e3),o=1/s.fps,a=[],l=new us(t),c=this.getBones(e.skeleton),p=[];let u,h,f,d,m;l.clipAction(n).play(),l.update(0),t.updateMatrixWorld();for(let w=0;w<r;++w){const y=w*o;this.retarget(e,t,s);for(let b=0;b<c.length;++b)m=s.names[c[b].name]||c[b].name,f=this.getBoneByName(m,t.skeleton),f&&(h=c[b],d=p[b]=p[b]||{bone:h},s.hip===m&&(d.pos||(d.pos={times:new Float32Array(r),values:new Float32Array(r*3)}),s.useFirstFramePosition&&(w===0&&(u=h.position.clone()),h.position.sub(u)),d.pos.times[w]=y,h.position.toArray(d.pos.values,w*3)),d.quat||(d.quat={times:new Float32Array(r),values:new Float32Array(r*4)}),d.quat.times[w]=y,h.quaternion.toArray(d.quat.values,w*4));l.update(o),t.updateMatrixWorld()}for(let w=0;w<p.length;++w)d=p[w],d&&(d.pos&&a.push(new cn(".bones["+d.bone.name+"].position",d.pos.times,d.pos.values)),a.push(new un(".bones["+d.bone.name+"].quaternion",d.quat.times,d.quat.values)));return l.uncacheAction(n),new Rt(n.name,-1,a)}static getHelperFromSkeleton(e){const t=new li(e.bones[0]);return t.skeleton=e,t}static getSkeletonOffsets(e,t,n={}){const s=new _,r=new _,o=new _,a=new _,l=new Ee,c=new Ee;n.hip=n.hip!==void 0?n.hip:"hip",n.names=n.names||{},t.isObject3D||(t=this.getHelperFromSkeleton(t));const p=Object.keys(n.names),u=Object.values(n.names),h=t.isObject3D?t.skeleton.bones:this.getBones(t),f=e.isObject3D?e.skeleton.bones:this.getBones(e),d=[];let m,w,y,b;for(e.skeleton.pose(),b=0;b<f.length;++b)if(m=f[b],y=n.names[m.name]||m.name,w=this.getBoneByName(y,h),w&&y!==n.hip){const E=this.getNearestBone(m.parent,p),R=this.getNearestBone(w.parent,u);E.updateMatrixWorld(),R.updateMatrixWorld(),s.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(m.matrixWorld),o.setFromMatrixPosition(R.matrixWorld),a.setFromMatrixPosition(w.matrixWorld),l.subVectors(new Ee(r.x,r.y),new Ee(s.x,s.y)).normalize(),c.subVectors(new Ee(a.x,a.y),new Ee(o.x,o.y)).normalize();const x=l.angle()-c.angle(),S=new V().makeRotationFromEuler(new Ke(0,0,x));m.matrix.multiply(S),m.matrix.decompose(m.position,m.quaternion,m.scale),m.updateMatrixWorld(),d[y]=S}return d}static renameBones(e,t){const n=this.getBones(e);for(let s=0;s<n.length;++s){const r=n[s];t[r.name]&&(r.name=t[r.name])}return this}static getBones(e){return Array.isArray(e)?e:e.bones}static getBoneByName(e,t){for(let n=0,s=this.getBones(t);n<s.length;n++)if(e===s[n].name)return s[n]}static getNearestBone(e,t){for(;e.isBone;){if(t.indexOf(e.name)!==-1)return e;e=e.parent}}static findBoneTrackData(e,t){const n=/\[(.*)\]\.(.*)/,s={name:e};for(let r=0;r<t.length;++r){const o=n.exec(t[r].name);o&&e===o[1]&&(s[o[2]]=r)}return s}static getEqualsBonesNames(e,t){const n=this.getBones(e),s=this.getBones(t),r=[];e:for(let o=0;o<n.length;o++){const a=n[o].name;for(let l=0;l<s.length;l++)if(a===s[l].name){r.push(a);continue e}}return r}static clone(e){const t=new Map,n=new Map,s=e.clone();return dr(e,s,(r,o)=>{t.set(o,r),n.set(r,o)}),s.traverse(r=>{if(!r.isSkinnedMesh)return;const o=r,a=t.get(r),l=a.skeleton.bones;o.skeleton=a.skeleton.clone(),o.bindMatrix.copy(a.bindMatrix),o.skeleton.bones=l.map(c=>(n.has(c)||console.warn("Bone was not cloned",c,". Common reason is that bones parent is out of clone source",e),n.get(c))),o.bind(o.skeleton,o.bindMatrix)}),s}}function dr(i,e,t){t(i,e);for(let n=0;n<i.children.length;n++)dr(i.children[n],e.children[n],t)}const tt=xe("AvatarAnimationComponent");class ra{static render=(e,t)=>{const n=this.updateCurrentState(e,t),s=this.unmountPreviousState(e,t);this.renderIdleWeight(e,n,s)};static mountCurrentState=e=>{const t=he(e,tt),n=he(e,fr);t.currentState.timeElapsedSinceUpdate=0,t.currentState.animations.forEach(s=>{!s.clip&&(s.clip=Rt.findByName(Xt.instance._animations,s.name),!s.clip)||(s.action=n.mixer.clipAction(s.clip),s.decorateAction&&s.decorateAction(s.action))})};static updateCurrentState=(e,t)=>{const n=he(e,tt);let s=0;const r=n.currentState;return r.timeElapsedSinceUpdate+=t,r.animations.forEach(o=>{if(!!o.clip){if(r.weightParams?.interpolate&&o.weight!==o.transitionEndWeight&&(o.weight=this.interpolateWeight(r.timeElapsedSinceUpdate,r.transitionDuration,o.transitionStartWeight,o.transitionEndWeight)),s+=o.weight,o.action.setEffectiveWeight(o.weight),o.action.setEffectiveTimeScale(o.timeScale||1),o.weight>0&&(o.action.play(),r.syncActions)){for(let a=0;a<r.animations.length;a++)if(r.animations[a].action&&r.animations[a].weight>0){o.action.syncWith(r.animations[a].action);break}}r.weightParams?.resetAnimation&&o.weight<=0&&o.action.reset()}}),s};static unmountPreviousState=(e,t,n)=>{const s=he(e,tt);let r=0;return s.prevState&&(s.prevState.timeElapsedSinceUpdate+=t,s.prevState.animations.forEach(o=>{o.weight=n?0:this.interpolateWeight(s.prevState.timeElapsedSinceUpdate,s.prevState.transitionDuration,o.transitionStartWeight,o.transitionEndWeight),o.action.setEffectiveWeight(o.weight),r+=o.weight,o.weight<=0&&(o.action.reset(),o.action.isRunning()&&o.action.stop())}),s.prevState.name!==s.animationGraph.defaultState.name&&r<=0&&this.resetPreviousState(e,!0)),r};static renderIdleWeight=(e,t,n)=>{const s=he(e,tt),r=s.animationGraph.defaultState;r.animations[0].weight=Math.max(1-(n+t),0),s.currentState.name===r.name&&r.animations[0].weight<1&&(r.animations[0].weight=1),r.animations[0].action&&r.animations[0].action.setEffectiveWeight(r.animations[0].weight)};static interpolateWeight=(e,t,n,s)=>re.clamp(re.mapLinear(e,0,t,n,s),0,1);static resetPreviousState=(e,t)=>{const n=he(e,tt);n.prevState.timeElapsedSinceUpdate=0,n.prevState.animations.forEach(s=>{s.transitionStartWeight=s.weight,s.transitionEndWeight=0}),t&&(n.prevState=null)}}const ia=xe("AvatarPendingComponent"),oa=xe("AvatarEffectComponent");class aa{time=0;object;maxHeight=1;minHeight=0;step=.001;constructor(e,t,n){e.traverse(s=>{s.material&&(s.visible=!0)}),this.object=e,this.minHeight=t-1,this.maxHeight=n+1,this.step=(this.maxHeight-this.minHeight)/150,this.time=this.minHeight}dispose(){}update(e){return this.time<=this.maxHeight?(this.object.traverse(t=>{t.material&&t.name!=="light_obj"&&t.name!=="plate_obj"&&t.material.uniforms&&(t.material.uniforms.time.value=this.time)}),this.time+=this.step,!1):(this.dispose(),!0)}static getDissolveTexture(e){const t=["varying float posY;","varying vec2 vUv;","#include <skinning_pars_vertex>","void main() {","#include <skinbase_vertex>","#include <begin_vertex>","#include <skinning_vertex>","#include <project_vertex>","vec2 clipSpace = gl_Position.xy / gl_Position.w;","vUv = clipSpace * 0.5 + 0.5;","posY = position.y;","}"].join(`
`),n=["varying vec2 vUv;","varying float posY;","#include <skinning_pars_vertex>","void main() {","#include <skinbase_vertex>","#include <begin_vertex>","#include <skinning_vertex>","#include <project_vertex>","vUv = uv;","posY = position.y;","}"].join(`
`),s=["uniform vec3 color;","varying vec2 vUv;","varying float posY;","uniform float time;","uniform sampler2D texture_dissolve;","float rand(float co) { return fract(sin(co*(91.3458)) * 47453.5453); }","void main() {","	gl_FragColor = vec4(color.r, color.g, color.b, 1.0);","	float offset = posY - time;"," if(offset > (-0.01 - rand(time) * 0.3)){","   gl_FragColor.r = 0.0;","   gl_FragColor.g = 1.0;","   gl_FragColor.b = 0.0;"," }"," if(offset > 0.0){","   discard;"," }","}"].join(`
`),r=["uniform vec3 color;","varying vec2 vUv;","varying float posY;","uniform float time;","uniform sampler2D texture_dissolve;","uniform sampler2D origin_texture;","float rand(float co) { return fract(sin(co*(91.3458)) * 47453.5453); }","void main() {","	gl_FragColor = texture2D(origin_texture, vUv);","	float offset = posY - time;"," if(offset > (-0.01 - rand(time) * 0.3)){","   gl_FragColor.r = 0.0;","   gl_FragColor.g = 1.0;","   gl_FragColor.b = 0.0;"," }"," if(offset > 0.0){","   discard;"," }","}"].join(`
`),o=e.geometry.hasAttribute("uv"),a=e.material.map!==null;return new ci({uniforms:{color:{value:e.material.color},origin_texture:{value:e.material.map},time:{value:-200}},vertexShader:o?n:t,fragmentShader:a?r:s})}}const mr={None:0,Avatar:1,Portal:2,Scene:3},yr=[{name:"Hips",parentIndex:null,position:[21209638824798676e-34,1.0495057106018066,.025098741054534912],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"Spine",parentIndex:0,position:[9234152287262987e-23,.10181593894958496,.0013151764869689941],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"Spine1",parentIndex:1,position:[25193997998940176e-25,.10083436965942383,-.010008037090301514],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"Spine2",parentIndex:2,position:[34574867413539323e-25,.09100031852722168,-.013734161853790283],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"Neck",parentIndex:3,position:[633428953733528e-23,.1667165756225586,-.025161653757095337],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"Head",parentIndex:4,position:[-42423238255651086e-25,.09617877006530762,.01685008406639099],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"HeadTop_End",parentIndex:5,position:[-6508244609904068e-24,.17815160751342773,.02584981918334961],quaternion:[21604543576358992e-23,0,0,1],scale:[1,1,1]},{name:"LeftEye",parentIndex:5,position:[.030675604939460754,.06409502029418945,.09283554553985596],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"RightEye",parentIndex:5,position:[-.030675504356622696,.06409502029418945,.09283548593521118],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftShoulder",parentIndex:3,position:[.04570446163415909,.10945963859558105,-.026279866695404053],quaternion:[-.7071068286895752,-.7071068286895752,-5338508302088485e-23,5338508302088485e-23],scale:[1,1,1]},{name:"LeftArm",parentIndex:9,position:[-.005245692562311888,.10592369735240936,.022321192547678947],quaternion:[0,-31786505871878035e-24,0,1],scale:[1,1,1]},{name:"LeftForeArm",parentIndex:10,position:[-957689508140902e-21,.2784152626991272,-3577546863198222e-22],quaternion:[0,-3552713678800501e-30,0,1],scale:[1,1,1]},{name:"LeftHand",parentIndex:11,position:[-24243377083621453e-23,.28328830003738403,-3875570087075175e-22],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandThumb1",parentIndex:12,position:[-.01575041003525257,.02466142177581787,-.02682414837181568],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandThumb2",parentIndex:13,position:[-.018646955490112305,.03229802846908569,-.018646808341145515],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandThumb3",parentIndex:14,position:[-.015314816497266293,.026525676250457764,-.015314699150621891],quaternion:[0,-3552713678800501e-30,0,1],scale:[1,1,1]},{name:"LeftHandIndex1",parentIndex:12,position:[-.005170824006199837,.09109306335449219,-.02260074019432068],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandIndex2",parentIndex:16,position:[-2039360236238963e-24,.03676408529281616,-2986021172546316e-22],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandIndex3",parentIndex:17,position:[23637917934138386e-23,.028830647468566895,44645597085946065e-23],quaternion:[0,0,0,1],scale:[1,.9999999403953552,1]},{name:"LeftHandMiddle1",parentIndex:12,position:[-24243377083621453e-23,.095333993434906,-14913847223851917e-23],quaternion:[0,-3552713678800501e-30,0,1],scale:[1,1,1]},{name:"LeftHandMiddle2",parentIndex:19,position:[-40151766356189e-22,.03698235750198364,-17894079462621448e-23],quaternion:[0,3552713678800501e-30,0,1],scale:[1,1,1]},{name:"LeftHandMiddle3",parentIndex:20,position:[-480852349937777e-21,.029509305953979492,-14913851487108332e-23],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandRing1",parentIndex:12,position:[-.0004394110874272883,.0910453200340271,.018650829792022705],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandRing2",parentIndex:22,position:[-5645705680734636e-24,.03154021501541138,-895722109817143e-22],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandRing3",parentIndex:23,position:[-4824828465643805e-22,.029376745223999023,8924168071189342e-23],quaternion:[0,-3552713678800501e-30,0,1],scale:[1,1,1]},{name:"LeftHandPinky1",parentIndex:12,position:[-.004886634647846222,.08077782392501831,.038060665130615234],quaternion:[0,0,0,1],scale:[1,.9999999403953552,1]},{name:"LeftHandPinky2",parentIndex:25,position:[-7342598529191946e-24,.03600031137466431,2676668486856215e-22],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandPinky3",parentIndex:26,position:[-7342598529191946e-24,.021142184734344482,-5540385927815805e-25],quaternion:[7542257662862539e-22,-7240569175337441e-22,-6033837507857243e-21,1],scale:[1,1,1]},{name:"RightShoulder",parentIndex:3,position:[-.04569969326257706,.10946178436279297,-.02628016471862793],quaternion:[0,0,.7071068286895752,.7071068286895752],scale:[.9999998807907104,.9999998807907104,1]},{name:"RightArm",parentIndex:28,position:[-.005247950553894043,.1059284508228302,-.022320985794067383],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightForeArm",parentIndex:29,position:[-35762786865234375e-23,.2784152030944824,11548399925231934e-23],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightHand",parentIndex:30,position:[11920928955078125e-23,.2832883298397064,562518835067749e-21],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightHandPinky1",parentIndex:31,position:[-.004884481430053711,.08076684921979904,-.03806009516119957],quaternion:[0,0,-3552713678800501e-30,1],scale:[1,1,1]},{name:"RightHandPinky2",parentIndex:32,position:[11920928955078125e-23,.03600042313337326,5140900611877441e-22],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"RightHandPinky3",parentIndex:33,position:[11920928955078125e-23,.021142177283763885,1564621925354004e-22],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"RightHandRing1",parentIndex:31,position:[-.00043904781341552734,.09103595465421677,-.01865074411034584],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightHandRing2",parentIndex:35,position:[5960464477539062e-22,.03154020756483078,4991888999938965e-22],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightHandRing3",parentIndex:36,position:[-35762786865234375e-23,.02937679924070835,-3948807716369629e-22],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightHandMiddle1",parentIndex:31,position:[0,.09532522410154343,14901161193847656e-23],quaternion:[0,0,-3552713678800501e-30,1],scale:[1,1,1]},{name:"RightHandMiddle2",parentIndex:38,position:[-11920928955078125e-23,.036982350051403046,-20489096641540527e-23],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"RightHandMiddle3",parentIndex:39,position:[-11920928955078125e-23,.02950924076139927,3725310282476357e-24],quaternion:[-8470329472543003e-37,8413088892211817e-23,6018531076210112e-51,1],scale:[1,1,1]},{name:"RightHandIndex1",parentIndex:31,position:[-.005167722702026367,.09108298271894455,.022601155564188957],quaternion:[0,0,-3552713678800501e-30,1],scale:[1,1,1]},{name:"RightHandIndex2",parentIndex:41,position:[-11920928955078125e-23,.036764077842235565,32782554626464844e-23],quaternion:[0,0,0,1],scale:[.9999999403953552,.9999998807907104,1]},{name:"RightHandIndex3",parentIndex:42,position:[-5960464477539062e-22,.028830699622631073,38743019104003906e-23],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightHandThumb1",parentIndex:31,position:[-.015726923942565918,.024648122489452362,.02682625874876976],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightHandThumb2",parentIndex:44,position:[-.018647074699401855,.032297778874635696,.01864716224372387],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightHandThumb3",parentIndex:45,position:[-.015314221382141113,.02652602083981037,.015314459800720215],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"LeftUpLeg",parentIndex:0,position:[.08207781612873077,-.0675172209739685,-.015995562076568604],quaternion:[-1,0,-7549790126404332e-23,13433127321604843e-23],scale:[1,1,1]},{name:"LeftLeg",parentIndex:47,position:[-5646270118120356e-24,.44370466470718384,-.0028464184142649174],quaternion:[-13438216228678357e-23,-31786509424591713e-24,-5701752733014908e-30,1],scale:[1,.9999999403953552,1]},{name:"LeftFoot",parentIndex:48,position:[5888123766339959e-24,.4442787170410156,.02982190251350403],quaternion:[-.7071068286895752,-3090862676913275e-23,-3090862321641907e-23,.7071068286895752],scale:[1,1,1]},{name:"LeftToeBase",parentIndex:49,position:[-29802322387695312e-24,.10710558295249939,.08728671818971634],quaternion:[0,3552714525833448e-30,6162975822039155e-48,1],scale:[1,1,1]},{name:"RightUpLeg",parentIndex:0,position:[-.08207795768976212,-.06751662492752075,-.01599562168121338],quaternion:[1,0,7549790126404332e-23,0],scale:[1,1,1]},{name:"RightLeg",parentIndex:51,position:[18066163010033165e-25,.44370537996292114,-.002861559623852372],quaternion:[6692968668176036e-23,-3178651297730539e-23,7970505494763608e-30,1],scale:[1,1,1]},{name:"RightFoot",parentIndex:52,position:[5888049603441914e-24,.444277286529541,.029837876558303833],quaternion:[-.7071067094802856,-30908619663705394e-24,-30908619663705394e-24,.7071068286895752],scale:[1,1,1]},{name:"RightToeBase",parentIndex:53,position:[-14901161193847656e-24,.10710566490888596,.08728665858507156],quaternion:[4015134891233174e-23,-521080354294037e-29,-11930843402178038e-38,1],scale:[1,1,1]}],gr=xe("IKObj"),oe=new _(0,1,0),vt=new _(0,-1,0),Hn=new _(1,0,0),wr=new _(-1,0,0),Y=new _(0,0,1),br=new _(0,0,-1);new _(0,0,0);const vr=new _,Tr=new _;class la{end_idx;chainBones;length;cnt;altForward;altUp;ikSolver;constructor(){this.chainBones=[],this.length=0,this.cnt=0,this.end_idx=null,this.altForward=Y.clone(),this.altUp=oe.clone()}first(){return this.chainBones[0].index}last(){return this.chainBones[this.cnt-1].index}index(e){return this.chainBones[e].index}setOffsets(e,t,n){const r=n.bones[this.chainBones[0].index].world.quaternion.clone().invert();return this.altForward=new _().copy(e).applyQuaternion(r).normalize(),this.altUp=new _().copy(t).applyQuaternion(r).normalize(),this}computeLengthFromBones(e){const t=this.cnt-1;let n=0,s,r,o;for(o=0;o<t;o++)r=e[this.chainBones[o].index],vr.copy(e[this.chainBones[o].index].world.position),Tr.copy(e[this.chainBones[o+1].index].world.position),r.length=vr.distanceTo(Tr),this.chainBones[o].length=r.length,n+=r.length;return this.end_idx!==null&&this.end_idx>-1?(s=this.chainBones[t],s.length=e[this.end_idx].world.position.distanceTo(e[this.chainBones[t].index].world.position),e[this.chainBones[t].index].length=s.length,n+=s.length):console.warn("Recompute Chain Len, End Index is missing"),this.length=n,this}}const ca=xe("IKRigComponent"),ua=xe("IKRigTargetComponent");var Ae;(function(i){i[i.MIXAMO=0]="MIXAMO",i[i.TREX=1]="TREX"})(Ae||(Ae={}));const pa=new j,ha=new j,Yt=new j;new _;function fa(i,e,t,n,s,r){let o=e.bones[i.chainBones[0].index],a=e.bones[i.chainBones[1].index],l=t.bones[i.chainBones[0].index],c=t.bones[i.chainBones[1].index],p=o.length,u=a.length,h=pa,f;Ar(i,e,n,r,h);const d=ha.copy(h),m={aLen:p,cLen:s,bLen:u};f=xt(p,s,u);const w=f;return h.premultiply(Yt.setFromAxisAngle(n.x,-f)).premultiply(Yt.copy(r.quaternion).invert()),t.setBone(o.idx,h),l.world.position.copy(r.position),l.world.quaternion.copy(r.quaternion),l.world.scale.copy(r.scale),nt(l.world,{quaternion:h,position:o.local.position,scale:o.local.scale}),f=Math.PI-xt(p,u,s),h.copy(l.world.quaternion).multiply(a.local.quaternion).premultiply(Yt.setFromAxisAngle(n.x,f)).premultiply(Yt.copy(l.world.quaternion).invert()),t.setBone(a.idx,h),c.world.position.copy(l.world.position),c.world.quaternion.copy(l.world.quaternion),c.world.scale.copy(l.world.scale),nt(c.world,{quaternion:h,position:a.local.position,scale:a.local.scale}),{rotAfterAim:d,acbLen:m,firstRad:w}}function xr(i,e,t,n,s,r){let o=e.bones[i.chainBones[0].index],a=e.bones[i.chainBones[1].index],l=e.bones[i.chainBones[2].index],c=t.bones[i.chainBones[0].index],p=t.bones[i.chainBones[1].index],u=t.bones[i.chainBones[2].index],h=o.length,f=a.length,d=l.length,m=a.length*.5,w=(h+m)/(h+f+d),y=s*w,b=s-y,E=new j,R;Ar(i,e,n,r,E),R=xt(h,y,m),E.premultiply(new j().setFromAxisAngle(n.x,-R)).premultiply(r.quaternion.clone().invert()),t.setBone(o.idx,E),c.world.position.copy(r.position),c.world.quaternion.copy(r.quaternion),c.world.scale.copy(r.scale),nt(c.world,{...o.local,quaternion:E}),R=Math.PI-xt(h,m,y),E.copy(c.world.quaternion).multiply(a.local.quaternion).premultiply(new j().setFromAxisAngle(n.x,R)).premultiply(c.world.quaternion.clone().invert()),t.setBone(a.idx,E),p.world.position.copy(c.world.position),p.world.quaternion.copy(c.world.quaternion),p.world.scale.copy(c.world.scale),nt(p.world,{...a.local,quaternion:E}),R=Math.PI-xt(d,m,b),E.copy(p.world.quaternion).multiply(l.local.quaternion).premultiply(new j().setFromAxisAngle(n.x,-R)).premultiply(p.world.quaternion.invert()),t.setBone(l.idx,E),u.world.position.copy(p.world.position),u.world.quaternion.copy(p.world.quaternion),u.world.scale.copy(p.world.scale),nt(u.world,{...l.local,quaternion:E})}function nt(i,e){i.position.add(e.position.clone().multiply(i.scale).applyQuaternion(i.quaternion)),e.scale&&i.scale.multiply(e.scale),i.quaternion.multiply(e.quaternion)}function Ar(i,e,t,n,s){const r=new j;e.bones[i.first()].bone.getWorldQuaternion(r);const o=i.altForward.clone().applyQuaternion(r);let a=new j().setFromUnitVectors(o,t.z);s.copy(a).multiply(r),o.copy(i.altUp).applyQuaternion(s);let l=o.angleTo(t.y);l<=.00017453292?l=0:(o.crossVectors(o,t.z),o.dot(t.y)>=0&&(l=-l)),s.premultiply(new j().setFromAxisAngle(t.z,l))}const _r=new V,ue=new j,Ce=new j,te=new _,fe=new _,Tt=new _,qn=new _;function xt(i,e,t){let n=(i*i+e*e-t*t)/(2*i*e);return n<-1?n=-1:n>1&&(n=1),Math.acos(n)}function da(i){i.points={},i.chains={},pe(i,"hip","Hips"),pe(i,"head","Head"),pe(i,"neck","Neck"),pe(i,"chest","Spine2"),pe(i,"foot_l","LeftFoot"),pe(i,"foot_r","RightFoot"),_e(i,"arm_r",["RightArm","RightForeArm"],"RightHand"),_e(i,"arm_l",["LeftArm","LeftForeArm"],"LeftHand"),_e(i,"leg_r",["RightUpLeg","RightLeg"],"RightFoot"),_e(i,"leg_l",["LeftUpLeg","LeftLeg"],"LeftFoot"),_e(i,"spine",["Spine","Spine1","Spine2"]),i.chains.leg_l.computeLengthFromBones(i.tpose.bones),i.chains.leg_r.computeLengthFromBones(i.tpose.bones),i.chains.arm_l.computeLengthFromBones(i.tpose.bones),i.chains.arm_r.computeLengthFromBones(i.tpose.bones),i.chains.leg_l.setOffsets(vt,Y,i.tpose),i.chains.leg_r.setOffsets(vt,Y,i.tpose),i.chains.arm_r.setOffsets(wr,br,i.tpose),i.chains.arm_l.setOffsets(Hn,br,i.tpose)}function ma(i){i.points={},i.chains={},pe(i,"hip","hip"),pe(i,"head","face_joint"),pe(i,"foot_l","LeftFoot"),pe(i,"foot_r","RightFoot"),pe(i,"wing_l","left_wing"),pe(i,"wing_r","right_wing"),_e(i,"leg_r",["RightUpLeg","RightKnee","RightShin"],"RightFoot",xr),_e(i,"leg_l",["LeftUpLeg","LeftKnee","LeftShin"],"LeftFoot",xr),_e(i,"spine",["Spine","Spine1"]),_e(i,"tail",["tail_1","tail_2","tail_3","tail_4","tail_5","tail_6","tail_7"]),i.chains.leg_l.computeLengthFromBones(i.tpose.bones),i.chains.leg_r.computeLengthFromBones(i.tpose.bones),i.chains.leg_l.setOffsets(vt,Y,i.tpose),i.chains.leg_r.setOffsets(vt,Y,i.tpose)}function Wa(i,e){ya(i),ga(i,e),Jt(i.pose,i.chains.leg_l,e.leg_l),Jt(i.pose,i.chains.leg_r,e.leg_r),Vn(i,i.points.foot_l,e.foot_l,Y,oe),Vn(i,i.points.foot_r,e.foot_r,Y,oe),wa(i,i.chains.spine,e,oe,Y),Jt(i.pose,i.chains.arm_l,e.arm_l),Jt(i.pose,i.chains.arm_r,e.arm_r),Vn(i,i.points.head,e.head,Y,oe)}const ze={position:new _,quaternion:new j,invQuaternion:new j,scale:new _,reset:function(){this.position.setScalar(0),this.quaternion.identity(),this.invQuaternion.identity(),this.scale.setScalar(0)}};function ya(i){ze.reset();const e=i.pose.skeleton.bones.find(t=>!(t.parent instanceof Ue));e.parent&&(e.parent.getWorldPosition(ze.position),e.parent.getWorldQuaternion(ze.quaternion),e.parent.getWorldScale(ze.scale),ze.invQuaternion.copy(ze.quaternion).invert());for(let t=0;t<i.pose.skeleton.bones.length;t++){const n=i.pose.skeleton.bones[t],s=i.pose.bones[t];n.getWorldPosition(s.world.position),n.getWorldQuaternion(s.world.quaternion),n.getWorldScale(s.world.scale),Ir(s.world.position,s.world.quaternion,s.world.scale,ze),s.local.position.copy(n.position),s.local.quaternion.copy(n.quaternion),s.local.scale.copy(n.scale)}}function ga(i,e){const t=i.points.hip,n=i.pose.bones[t.index],s=i.tpose.bones[t.index],r=s.world.invQuaternion,o=te.copy(Y).applyQuaternion(r),a=fe.copy(oe).applyQuaternion(r),l=Tt.copy(o).applyQuaternion(n.world.quaternion),c=qn.copy(a).applyQuaternion(n.world.quaternion),p=te.copy(Y).applyQuaternion(s.world.quaternion),u=ue.setFromUnitVectors(p,l).multiply(s.world.quaternion),h=fe.copy(oe).applyQuaternion(u);let f=h.angleTo(c);h.cross(l).dot(c)>=0&&(f=-f),e.hip.bind_height=s.local.position.y,e.hip.movement.copy(n.world.position).sub(s.world.position),e.hip.dir.copy(l),e.hip.twist=f}function Jt(i,e,t){const n=i.bones[e.first()],s=i.bones[e.end_idx],r=te.subVectors(s.world.position,n.world.position);t.lengthScale=r.length()/e.length,t.dir.copy(r).normalize();const o=fe.copy(e.altUp).applyQuaternion(n.world.quaternion).cross(r);t.jointDirection.copy(r).cross(o).normalize()}function Vn(i,e,t,n,s){const r=i.pose.bones[e.index],a=i.tpose.bones[e.index].world.invQuaternion,l=te.copy(n).applyQuaternion(a),c=fe.copy(s).applyQuaternion(a);t.lookDirection.copy(l).applyQuaternion(r.world.quaternion),t.twistDirection.copy(c).applyQuaternion(r.world.quaternion)}function wa(i,e,t,n,s){const r=[e.first(),e.last()],o=te,a=fe;let l=0,c,p;for(const u of r){p=i.tpose.bones[u],c=i.pose.bones[u];const h=p.world.invQuaternion;o.copy(n).applyQuaternion(h).applyQuaternion(c.world.quaternion),a.copy(s).applyQuaternion(h).applyQuaternion(c.world.quaternion),t.spine[l].lookDirection.copy(o),t.spine[l].twistDirection.copy(a),l++}}function Qa(i,e){va(e,i),Zt(e,i,i.chains.leg_l,e.leg_l),Zt(e,i,i.chains.leg_r,e.leg_r),zn(e,i,"foot_l",Y,oe),zn(e,i,"foot_r",Y,oe),Aa(e,i,i.chains.spine,e.spine,oe,Y),i.chains.arm_l&&Zt(e,i,i.chains.arm_l,e.arm_l),i.chains.arm_r&&Zt(e,i,i.chains.arm_r,e.arm_r),zn(e,i,"head",Y,oe),ba(i)}function ba(i){for(let e=0;e<i.pose.bones.length;e++){const t=i.pose.bones[e],n=t.bone;n.position.copy(t.local.position),n.quaternion.copy(t.local.quaternion),n.scale.copy(t.local.scale)}i.pose.skeleton.update()}function va(i,e){const t=e.points.hip,n=e.tpose.bones[t.index],s=e.tpose.getParentRotation(t.index),r=ue.setFromUnitVectors(Y,i.hip.dir).multiply(n.world.quaternion);i.hip.twist!=0&&r.premultiply(Ce.setFromAxisAngle(i.hip.dir,i.hip.twist)),r.premultiply(Ce.copy(s).invert());const o=n.world.position.y/i.hip.bind_height,a=te.copy(i.hip.movement).multiplyScalar(o).add(n.world.position),l=e.pose.bones[t.index];l.local.quaternion.copy(r),l.local.position.copy(a),l.world.position.copy(e.pose.bones[t.index].local.position),l.world.quaternion.copy(e.pose.bones[t.index].local.quaternion)}function Zt(i,e,t,n,s=0){const o=e.pose.bones[t.first()].bone,a={position:te,quaternion:ue,scale:fe},l={position:Tt,quaternion:Ce,scale:qn};o.parent.getWorldPosition(a.position),o.parent.getWorldQuaternion(a.quaternion),o.parent.getWorldScale(a.scale),o.getWorldPosition(l.position),o.getWorldQuaternion(l.quaternion),o.getWorldScale(l.scale),e.pose.get_parent_world(t.first(),a,l);let c=t.length*n.lengthScale;Ta(i,l.position,n.dir,n.jointDirection,c),s&&xa(i,s),t.ikSolver(t,e.tpose,e.pose,i.axis,i.length,a),t.chainBones.forEach(({index:p})=>{const u=e.pose.bones[p];u.bone.position.copy(u.local.position),u.bone.quaternion.copy(u.local.quaternion),u.bone.scale.copy(u.local.scale)})}function Ta(i,e,t,n,s){i.startPosition.copy(e),i.endPosition.copy(t).multiplyScalar(s).add(e);const r=i.startPosition.distanceToSquared(i.endPosition);i.length=Math.sqrt(r),i.axis.fromDirection(t,n)}function zn(i,e,t,n,s){const r=e.points[t],o=i[t],a=e.tpose.bones[r.index],l=e.pose.getParentRotation(r.index),c=ue.copy(l).multiply(a.local.quaternion),p=a.world.invQuaternion,u=te.copy(n).applyQuaternion(p),h=fe.copy(s).applyQuaternion(p),f=Tt.copy(u).applyQuaternion(c),d=Ce.setFromUnitVectors(f,o.lookDirection);d.multiply(c);const m=h.applyQuaternion(d),w=ue.setFromUnitVectors(m,o.twistDirection);d.premultiply(w),d.premultiply(ue.copy(l).invert()),e.pose.setBone(r.index,d)}function xa(i,e){const t=i.startPosition,n=i.endPosition,s=(e-t.y)/(n.y-t.y);i.endPosition.set((n.x-t.x)*s+t.x,e,(n.z-t.z)*s+t.z);const r=i.startPosition.distanceTo(i.endPosition);i.length=r}function Aa(i,e,t,n,s,r){const o=e.pose.bones[t.first()],a=e.pose.bones[o.p_idx];i.spineParentPosition.copy(a.local.position),i.spineChildPosition.copy(o.local.position),i.spineParentQuaternion.copy(a.local.quaternion),i.spineChildQuaternion.copy(o.local.quaternion),i.spineParentScale.copy(a.local.scale),i.spineChildScale.copy(o.local.scale);const l=t.cnt-1;for(let c=0;c<=l;c++){const p=t.chainBones[c].index,u=e.tpose.bones[p],h=c/l,f=te.copy(i.spineParentScale).multiply(u.local.position).applyQuaternion(i.spineParentQuaternion);i.spineChildPosition.copy(i.spineParentPosition).add(f),i.spineChildScale.copy(i.spineParentScale).multiply(u.local.scale),i.spineChildQuaternion.copy(i.spineParentQuaternion).multiply(u.local.quaternion);const d=u.world.invQuaternion,m=Tt.copy(s).applyQuaternion(d),w=qn.copy(r).applyQuaternion(d),y=m.applyQuaternion(i.spineChildQuaternion),b=te.lerpVectors(n[0].lookDirection,n[1].lookDirection,h),E=fe.lerpVectors(n[0].twistDirection,n[1].twistDirection,h),R=Ce.setFromUnitVectors(y,b).multiply(i.spineChildQuaternion),x=w.applyQuaternion(R),S=ue.setFromUnitVectors(x,E);R.premultiply(S);const M=ue.copy(i.spineParentQuaternion).invert();if(R.premultiply(M),e.pose.setBone(p,R),h!=1){const D=te.copy(i.spineParentScale).multiply(u.local.position).applyQuaternion(i.spineParentQuaternion);i.spineParentPosition.copy(i.spineParentPosition).add(D),i.spineParentScale.multiply(u.local.scale),i.spineParentQuaternion.multiply(R)}}}function Wn(i,e,t){const n=t.length-1;for(let s=0;s<=n;s++){let r=i.skeleton.bones.find(h=>h.name=t[s]);const o=ue;r.getWorldQuaternion(o);const a=te.copy(Y).applyQuaternion(o),l=fe.crossVectors(c,a).normalize();a.crossVectors(l,c).normalize();const c=Tt.copy(e),p=Ce;_r.makeBasis(l,c,a),p.setFromRotationMatrix(_r),p.dot(o)<0&&_a(p);const u=ue;if(r.getWorldQuaternion(u),Qn(p,u),r.setRotationFromQuaternion(p),s!=n){const h=te;r.getWorldScale(h),h.multiply(r.scale),u.multiply(p);const f=fe;r.getWorldPosition(f),r=i.bones.find(d=>d.name=t[s+1]).bone,r.position.copy(f),r.quaternion.copy(u),r.scale.copy(h)}}i.skeleton.update()}function Qn(i,e){let t=e.x,n=e.y,s=e.z,r=e.w;const o=t*t+n*n+s*s+r*r;if(o==0)t=n=s=r=0;else{const u=1/o;t=-t*u,n=-n*u,s=-s*u,r=r*u}const a=i.x,l=i.y,c=i.z,p=i.w;i.x=t*p+r*a+n*c-s*l,i.y=n*p+r*l+s*a-t*c,i.z=s*p+r*c+t*l-n*a,i.w=r*p-t*a-n*l-s*c}function _a(i){return i.x=-i.x,i.y=-i.y,i.z=-i.z,i.w=-i.w,i}function Er(i,e){console.warn("spin_bone_forward is not tested");const t=te,n=ue,s=i.getBone(e),r=s.bone,o=Ce;r.parent.getWorldQuaternion(o),r.position.copy(t).add(fe.set(0,s.length,0)),t.multiply(scl),t.applyQuaternion(rot),t.x=0,t.normalize(),n.setFromUnitVectors(t,Y),n.multiply(r.quaternion),Qn(n,r.quaternion),i.setBone(s.idx,n)}function Sr(i,e){console.warn("spin_bone_forward is not tested");const t=te,n=ue,s=i.getBone(e),r=s.bone,o=Ce;r.parent.getWorldQuaternion(o),Ea(t,r.quaternion,oe),n.setFromUnitVectors(t,Y),n.multiply(r.quaternion),Qn(n,o),i.setBone(s.idx,n)}function Ea(i,e,t){const n=e.x,s=e.y,r=e.z,o=e.w,a=t.x,l=t.y,c=t.z,p=s*c-r*l,u=r*a-n*c,h=n*l-s*a,f=o*p+s*h-r*u,d=o*u+r*p-n*h,m=o*h+n*u-s*p;return i.x=a+2*f,i.y=l+2*d,i.z=c+2*m,i}function Ir(i,e,t,n){const s=n.invQuaternion;i.sub(n.position).applyQuaternion(s).divide(n.scale),e.premultiply(s),t.divide(n.scale)}class Rr{static ROTATION=1;static POSITION=2;static SCALE=4;entity;skeleton;bones;rootOffset={quaternion:new j,position:new _(0,0,0),scale:new _(1,1,1)};helper;align_leg(e){return Wn(this,vt,e),this}align_arm_left(e){return Wn(this,Hn,e),this}align_arm_right(e){return Wn(this,wr,e),this}align_foot(e){return Er(this,e),Sr(this,e),this}spin_bone_forward(e){return Er(this,e),this}align_bone_forward(e){return Sr(this,e),this}constructor(e,t=!1){this.bones=[];const n=t?$t.clone(e):e;if(this.skeleton=this.get_skeleton(n),!this.skeleton.bones[0])debugger;this.rootOffset=new We;const s={position:new _,quaternion:new j,invQuaternion:new j,scale:new _},r=this.skeleton.bones.find(o=>!(o.parent instanceof Ue));r.parent&&(r.parent.getWorldPosition(s.position),r.parent.getWorldQuaternion(s.quaternion),r.parent.getWorldScale(s.scale),s.invQuaternion.copy(s.quaternion).invert());for(let o=0;o<this.skeleton.bones.length;o++){const a=this.skeleton.bones[o];let l,c;a.parent&&a.parent instanceof Ue&&(l=this.skeleton.bones.indexOf(a.parent),c=a.parent);const p={bone:a,parent:c,chg_state:0,idx:o,p_idx:l,length:.1,name:a.name,local:{position:a.position.clone(),quaternion:a.quaternion.clone(),scale:a.scale.clone()},world:{position:new _,quaternion:new j,invQuaternion:new j,scale:new _}};a.getWorldPosition(p.world.position),a.getWorldQuaternion(p.world.quaternion),a.getWorldScale(p.world.scale),Ir(p.world.position,p.world.quaternion,p.world.scale,s),p.world.invQuaternion.copy(p.world.quaternion).invert(),a.children.length>0&&(p.length=a.children[0].position.length()),this.bones[o]=p}this.skeleton.update()}get_skeleton(e){let t=null;return e.traverse(n=>{if(n instanceof St&&n.skeleton!=null){if(t&&t.bones.length>n.skeleton.bones.length)return;t=n.skeleton}}),t}setOffset(e,t,n){return this.rootOffset.quaternion.copy(e),this.rootOffset.position.copy(t),this.rootOffset.scale.copy(n),this}setBone(e,t,n,s){return t&&this.bones[e].local.quaternion.copy(t),n&&this.bones[e].local.position.copy(n),s&&this.bones[e].local.scale.copy(s),this}getBone(e){return this.bones.find(t=>t.name===e)}apply(){let e,t;for(let n=0;n<this.skeleton.bones.length;n++)e=this.bones[n],t=this.skeleton.bones[n],t.quaternion.copy(e.local.quaternion),t.position.copy(e.local.position),t.scale.copy(e.local.scale);return this.skeleton.update(),this}parentQuaternion=new j;parentScale=new _(1,1,1);parentPosition=new _(0,0,0);childQuaternion=new j;childScale=new _(1,1,1);childPosition=new _(0,0,0);setChildFromParent(e,t){console.log("parent, child",e,t);const n=new _().copy(e.scale).multiply(t.position).applyQuaternion(e.quaternion);return this.childPosition=new _().copy(e.position).add(n),console.log("v is",n),console.log("this.childPosition",this.childPosition),this.childScale=new _().copy(e.scale).multiply(t.scale),this.childQuaternion=new j().copy(e.quaternion).multiply(t.quaternion),this}getParentRotation(e){const t=this.bones[e],n=new j;if(t.p_idx==null)n.identity();else{let s=this.bones[t.p_idx];for(n.copy(s.local.quaternion);s.p_idx!=null;)s=this.bones[s.p_idx],n.premultiply(s.local.quaternion)}return n.premultiply(this.rootOffset.quaternion),n}transformAdd_rev(e,t){e.position.multiply(t.scale).applyQuaternion(t.quaternion).add(t.position),e.scale.multiply(t.scale),e.quaternion.premultiply(t.quaternion)}get_parent_world(e,t=null,n=null,s=null){const r=this.bones[e];if(r.p_idx==null)t.position.set(0,0,0),t.scale.set(0,0,0),t.quaternion.set(0,0,0,0);else{let o=this.bones[r.p_idx];for(t.position.copy(o.local.position),t.scale.copy(o.local.scale),t.quaternion.copy(o.local.quaternion);o.p_idx!=null;)o=this.bones[o.p_idx],this.transformAdd_rev(t,o.local)}return this.transformAdd_rev(t,this.rootOffset),s&&this.transformAdd_rev(t,s),n&&(n.position.copy(t.position),n.scale.copy(t.scale),n.quaternion.copy(t.quaternion),nt(n,r.local)),t}}function Sa(i,e,t=null,n=!1,s=Ae.MIXAMO){return Mr(ca,i,e,t,n,s)}function Ia(i,e,t=null,n=!1,s=Ae.MIXAMO){return Mr(ua,i,e,t,n,s)}function Mr(i,e,t,n=null,s=!1,r=Ae.MIXAMO){const o=t.getObjectByProperty("type","SkinnedMesh");et(e,gr,{ref:o});const a=et(e,i,{tpose:new Rr(t,!0),pose:new Rr(t,!1),chains:null,points:null});switch(r){case Ae.MIXAMO:da(a);break;case Ae.TREX:ma(a);break;default:console.error("Unsupported rig type",r)}if(a.tpose.apply(),!Object.keys(a.chains).length||!Object.keys(a.points).length)debugger;return a}function pe(i,e,t){const n=i.tpose.bones;i.points[e]={index:n.findIndex(s=>s.name.includes(t))}}function _e(i,e,t,n=null,s=null){let r;const o=i.tpose.bones,a=new la;for(r of t){const l=o.findIndex(h=>h.name.includes(r));if(l===-1){console.warn("addChain: Bone [%s] not found in armature",r,o);continue}const c=o[l].bone;let p=0;c.children.length>0&&(p=c.children[0].position.length());const u={index:l,ref:c,length:p};a.chainBones.push(u),a.cnt++,a.length+=p}n&&(a.end_idx=o.findIndex(l=>l.name.toLowerCase().includes(n.toLowerCase()))),a.ikSolver=s??fa,i.chains[e]=a}class Ra{x;y;z;constructor(){this.x=new _().copy(Hn),this.y=new _().copy(oe),this.z=new _().copy(Y)}set(e,t,n,s=!1){return this.x.copy(e),this.y.copy(t),this.z.copy(n),s&&(this.x.normalize(),this.y.normalize(),this.z.normalize()),this}fromDirection(e,t){return this.z.copy(e).normalize(),this.x.copy(t).cross(this.z).normalize(),this.y.copy(this.z).cross(this.x).normalize(),this}rotate(e,t="x",n=null){n=n||this;const s=Math.sin(e),r=Math.cos(e);let o,a,l;switch(t){case"y":o=this.x[0],l=this.x[2],this.x[0]=l*s+o*r,this.x[2]=l*r-o*s,o=this.z[0],l=this.z[2],this.z[0]=l*s+o*r,this.z[2]=l*r-o*s;break;case"x":a=this.y[1],l=this.y[2],this.y[1]=a*r-l*s,this.y[2]=a*s+l*r,a=this.z[1],l=this.z[2],this.z[1]=a*r-l*s,this.z[2]=a*s+l*r;break;case"z":o=this.x[0],a=this.x[1],this.x[0]=o*r-a*s,this.x[1]=o*s+a*r,o=this.y[0],a=this.y[1],this.y[0]=o*r-a*s,this.y[1]=o*s+a*r;break}return n}}const Ma=function(){return{startPosition:new _,endPosition:new _,axis:new Ra,length:0,spineParentQuaternion:new j,spineParentPosition:new _,spineParentScale:new _,spineChildQuaternion:new j,spineChildPosition:new _,spineChildScale:new _,hip:{bind_height:0,movement:new _,dir:new _,twist:0},foot_l:{lookDirection:new _,twistDirection:new _},foot_r:{lookDirection:new _,twistDirection:new _},leg_l:{lengthScale:0,dir:new _,jointDirection:new _},leg_r:{lengthScale:0,dir:new _,jointDirection:new _},arm_l:{lengthScale:0,dir:new _,jointDirection:new _},arm_r:{lengthScale:0,dir:new _,jointDirection:new _},spine:[{lookDirection:new _,twistDirection:new _},{lookDirection:new _,twistDirection:new _}],head:{lookDirection:new _,twistDirection:new _}}},La=xe("IKPoseComponent"),Ka=(i,e,t)=>{const n=he(i,jn);n&&(n.avatarId=e,n.avatarURL=t),Oa(i)},Oa=i=>{if(!Xe)return;const e=he(i,jn)?.avatarURL;e?Te.load({url:e,castShadow:!0,receiveShadow:!0},t=>{console.log(t.scene),Lr(i,$t.clone(t.scene),e)}):Lr(i,$t.clone(Xt.instance._defaultModel))},Ca=i=>{i.layers.disable(mr.Scene),i.layers.enable(mr.Avatar)},Lr=(i,e,t)=>{const n=he(i,jn),s=he(i,fr),r=he(i,tt);let o=e;e.traverse(d=>{d.name?.includes("mixamorig")&&(d.name=d.name.replace("mixamorig","")),d.name?.toLowerCase().includes("hips")&&(o=d)});const a=[];o.traverse(d=>a.push(d.name)),s.mixer.stopAllAction(),n.modelContainer.children.forEach(d=>d.removeFromParent());let l=[];e.traverse(d=>{Ca(d),typeof d.material!="undefined"&&(l.push({id:d.uuid,material:d.material.clone()}),d.material=aa.getDissolveTexture(d))}),e.children.forEach(d=>n.modelContainer.add(d));const c=n.modelContainer.getObjectByProperty("type","SkinnedMesh"),p=c.skeleton.bones.find(d=>d.parent.type!=="Bone");et(i,gr,{ref:c});const u=t?.includes("trex")?Ae.TREX:Ae.MIXAMO;Ia(i,p?.parent,null,!1,u),et(i,La,Ma());const h=$t.clone(Or().parent);Sa(i,h),s.mixer=new us(h);const f=[];h.traverse(d=>{d.name&&d.name.length&&f.push(d.name)}),f.forEach(d=>{a.includes(d)||console.warn(`[Avatar Loader]: Bone '${d}' not found`)}),a.forEach(d=>{f.includes(d)||console.warn(`[Avatar Loader]: Bone '${d}' not supported`)}),r.currentState&&ra.mountCurrentState(i),s.mixer.update(1/60),Pa(i,l)},Pa=async(i,e)=>{const t=Te.getFromCache("/itemLight.png"),n=Te.getFromCache("/itemPlate.png"),s=new It(new ps(.04,3.2),new Be({transparent:!0,map:t,blending:hs,depthWrite:!1,side:ss})),r=new It(new ps(1.6,1.6),new Be({transparent:!1,map:n,blending:hs,depthWrite:!1}));s.geometry.computeBoundingSphere(),r.geometry.computeBoundingSphere(),s.name="light_obj",r.name="plate_obj",t.encoding=Et,t.needsUpdate=!0,n.encoding=Et,n.needsUpdate=!0,et(i,ia,{light:s,plate:r}),et(i,oa,{opacityMultiplier:0,originMaterials:e})};function Or(){const i=[];yr.forEach(s=>{const r=new Ue;r.name=s.name,r.position.fromArray(s.position),r.quaternion.fromArray(s.quaternion),r.scale.fromArray(s.scale),i.push(r)}),yr.forEach((s,r)=>{s.parentIndex!==null&&i[s.parentIndex].add(i[r])});const e=new ke,t=new St,n=new pn(i);return t.bind(n),e.add(t),e.add(i[0]),t}export{jn as A,oa as B,mr as C,ia as D,Ge as E,aa as F,Yi as G,Oa as H,La as I,Pi as J,Ha as L,Ua as N,Gs as T,et as a,ne as b,xe as c,za as d,fr as e,tt as f,he as g,qa as h,Xe as i,ra as j,ka as k,Va as l,Si as m,Na as n,ja as o,Xt as p,Ga as q,sa as r,Ka as s,Te as t,Ve as u,ca as v,ua as w,Wa as x,Qa as y,yr as z};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXZhdGFyRnVuY3Rpb25zLmM3YTBlMjczLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9lbmdpbmUvc3JjL2NvbW1vbi9mdW5jdGlvbnMvaXNDbGllbnQudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2Vjcy9jbGFzc2VzL0VuZ2luZUV2ZW50cy50cyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9iaXRlY3MvZGlzdC9pbmRleC5tanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2Vjcy9jbGFzc2VzL0VuZ2luZS50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYXNzZXRzL2NsYXNzZXMvR0xURlJlbW92ZU1hdGVyaWFsc0V4dGVuc2lvbi50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYXNzZXRzL2NsYXNzZXMvR0xURkluc3RhbmNpbmdFeHRlbnNpb24udHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2Fzc2V0cy9sb2FkZXJzL2dsdGYvTm9kZURyYWNvTG9hZGVyLmpzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hc3NldHMvbG9hZGVycy9nbHRmL0RSQUNPTG9hZGVyLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nyb3NzLWZldGNoL2Rpc3QvYnJvd3Nlci1wb255ZmlsbC5qcyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYXNzZXRzL2xvYWRlcnMvZ2x0Zi9GaWxlTG9hZGVyLmpzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hc3NldHMvbG9hZGVycy9nbHRmL0dMVEZMb2FkZXIuanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2Fzc2V0cy9mdW5jdGlvbnMvTG9hZEdMVEYudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2Fzc2V0cy9sb2FkZXJzL3RnYS9UR0FMb2FkZXIudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2Fzc2V0cy9sb2FkZXJzL2ZieC9OVVJCU1V0aWxzLnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hc3NldHMvbG9hZGVycy9mYngvTlVSQlNDdXJ2ZS50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYXNzZXRzL2xvYWRlcnMvZmJ4L2luZmxhdGUubW9kdWxlLm1pbi5qcyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYXNzZXRzL2xvYWRlcnMvZmJ4L0ZCWExvYWRlci50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYXNzZXRzL2VudW0vQXNzZXRUeXBlLnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hc3NldHMvZW51bS9Bc3NldENsYXNzLnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9jb21tb24vZnVuY3Rpb25zL2lzQWJzb2x1dGVQYXRoLnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hc3NldHMvY29uc3RhbnRzL0xvYWRlckNvbnN0YW50cy50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYXNzZXRzL2NsYXNzZXMvQXNzZXRMb2FkZXIudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2Vjcy9mdW5jdGlvbnMvU3lzdGVtSG9va3MudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2Vjcy9mdW5jdGlvbnMvQ29tcG9uZW50RnVuY3Rpb25zLnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hdmF0YXIvQW5pbWF0aW9uTWFuYWdlci50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYXZhdGFyL2NvbXBvbmVudHMvQW5pbWF0aW9uQ29tcG9uZW50LnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hdmF0YXIvY29tcG9uZW50cy9BdmF0YXJDb21wb25lbnQudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2F2YXRhci9Ta2VsZXRvblV0aWxzLnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hdmF0YXIvY29tcG9uZW50cy9BdmF0YXJBbmltYXRpb25Db21wb25lbnQudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2F2YXRhci9hbmltYXRpb25zL0FuaW1hdGlvblJlbmRlcmVyLnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hdmF0YXIvY29tcG9uZW50cy9BdmF0YXJQZW5kaW5nQ29tcG9uZW50LnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hdmF0YXIvY29tcG9uZW50cy9BdmF0YXJFZmZlY3RDb21wb25lbnQudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2F2YXRhci9EaXNzb2x2ZUVmZmVjdC50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvY2FtZXJhL2NvbnN0YW50cy9DYW1lcmFMYXllcnMudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2F2YXRhci9EZWZhdWx0U2tlbGV0b25Cb25lcy50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvaWtyaWcvY29tcG9uZW50cy9JS09iai50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvaWtyaWcvY29uc3RhbnRzL1ZlY3RvcjNDb25zdGFudHMudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2lrcmlnL2NsYXNzZXMvQ2hhaW4udHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2lrcmlnL2NvbXBvbmVudHMvSUtSaWdDb21wb25lbnQudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2lrcmlnL2VudW1zL0FybWF0dXJlVHlwZS50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvaWtyaWcvZnVuY3Rpb25zL0lLU29sdmVycy50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvaWtyaWcvZnVuY3Rpb25zL0lLRnVuY3Rpb25zLnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9pa3JpZy9jbGFzc2VzL1Bvc2UudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2lrcmlnL2Z1bmN0aW9ucy9SaWdGdW5jdGlvbnMudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2lrcmlnL2NsYXNzZXMvQXhpcy50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvaWtyaWcvY29tcG9uZW50cy9JS1Bvc2VDb21wb25lbnQudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2F2YXRhci9mdW5jdGlvbnMvYXZhdGFyRnVuY3Rpb25zLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3lzdGVtIGlzIGNsaWVudCBvciBub3QuICovXG5leHBvcnQgY29uc3QgaXNDbGllbnQgPVxuICB0eXBlb2YgcHJvY2VzcyAhPT0gJ29iamVjdCcgfHwgdHlwZW9mIHByb2Nlc3MudmVyc2lvbnMgIT09ICdvYmplY3QnIHx8IHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zLm5vZGUgPT09ICd1bmRlZmluZWQnXG4iLCIvKipcbiAqXG4gKiBAYXV0aG9yIEpvc2ggRmllbGQgPGdpdGh1Yi5jb20vSGV4YUZpZWxkPlxuICovXG5cbmNvbnN0IEVWRU5UUyA9IHtcbiAgLy8gVE9ETzogYWRkIGRvYyBmb3JtYXR0aW5nIHRvIHRoZXNlXG5cbiAgLy8gSU5JVEFMSVpBVElPTlxuICBSRVNFVF9FTkdJTkU6ICdDT1JFX1JFU0VUX0VOR0lORScsXG4gIElOSVRJQUxJWkVEX0VOR0lORTogJ0NPUkVfSU5JVElBTElaRURfRU5HSU5FJywgLy8geyB9XG4gIENPTk5FQ1RfVE9fV09STEQ6ICdDT1JFX0NPTk5FQ1RfVE9fV09STEQnLCAvLyB7IH1cbiAgQ09OTkVDVF9UT19XT1JMRF9USU1FT1VUOiAnQ09SRV9DT05ORUNUX1RPX1dPUkxEX1RJTUVPVVQnLCAvLyB7IH1cbiAgSk9JTkVEX1dPUkxEOiAnQ09SRV9KT0lORURfV09STEQnLCAvLyB7IH1cbiAgTEVBVkVfV09STEQ6ICdDT1JFX0xFQVZFX1dPUkxEJywgLy8geyB9XG4gIFNDRU5FX0xPQURFRDogJ0NPUkVfU0NFTkVfTE9BREVEJywgLy8geyB9XG5cbiAgLy8gU3RhcnQgb3Igc3RvcCBjbGllbnQgc2lkZSBwaHlzaWNzICYgcmVuZGVyaW5nXG4gIEVOQUJMRV9TQ0VORTogJ0NPUkVfRU5BQkxFX1NDRU5FJywgLy8geyByZW5kZXJlcjogYm9vbGVhbiwgcGh5c2ljczogYm9vbGVhbiB9XG5cbiAgLy8gTUlTQ1xuICBVU0VSX0VOR0FHRTogJ0NPUkVfVVNFUl9FTkdBR0UnLCAvLyB7IH1cbiAgV0lORE9XX0ZPQ1VTOiAnQ09SRV9XSU5ET1dfRk9DVVMnLCAvLyAgeyBmb2N1c2VkOiBib29sZWFuIH1cbiAgRU5USVRZX0RFQlVHX0RBVEE6ICdDT1JFX0VOVElUWV9ERUJVR19EQVRBJywgLy8gVE9ETzogdG8gcGlwZSBvZmZzY3JlZW4gZW50aXR5IGRhdGEgdG8gVUlcblxuICBPQkpFQ1RfSE9WRVI6ICdJTlRFUkFDVElWRV9TWVNURU1fT0JKRUNUX0hPVkVSJyxcbiAgT0JKRUNUX0FDVElWQVRJT046ICdJTlRFUkFDVElWRV9TWVNURU1fT0JKRUNUX0FDVElWQVRJT04nLFxuXG4gIFBPUlRBTF9SRURJUkVDVF9FVkVOVDogJ1BIWVNJQ1NfU1lTVEVNX1BPUlRBTF9SRURJUkVDVCcsXG5cbiAgWFJfU1RBUlQ6ICdXRUJYUl9SRU5ERVJFUl9TWVNURU1fWFJfU1RBUlQnLFxuICBYUl9TRVNTSU9OOiAnV0VCWFJfUkVOREVSRVJfU1lTVEVNX1hSX1NFU1NJT04nLFxuICBYUl9FTkQ6ICdXRUJYUl9SRU5ERVJFUl9TWVNURU1fWFJfRU5EJyxcblxuICBDT05ORUNUOiAnTkVUV09SS19DT05ORUNUJyxcbiAgQ09OTkVDVElPTl9MT1NUOiAnQ09SRV9DT05ORUNUSU9OX0xPU1QnLFxuXG4gIEFWQVRBUl9ERUJVRzogJ0NPUkVfQVZBVEFSX0RFQlVHJyxcbiAgUEhZU0lDU19ERUJVRzogJ0NPUkVfUEhZU0lDU19ERUJVRycsXG5cbiAgU1RBUlRfU1VTUEVOREVEX0NPTlRFWFRTOiAnUE9TSVRJT05BTF9BVURJT19TVEFSVF9TVVNQRU5ERURfQ09OVEVYVFMnLFxuICBTVVNQRU5EX1BPU0lUSU9OQUxfQVVESU86ICdQT1NJVElPTkFMX0FVRElPX1NVU1BFTkRfUE9TSVRJT05BTF9BVURJTycsXG5cbiAgQlJPV1NFUl9OT1RfU1VQUE9SVEVEOiAnQlJPV1NFUl9OT1RfU1VQUE9SVEVEJ1xufVxuXG4vKipcbiAqXG4gKiBAYXV0aG9yIEpvc2ggRmllbGQgPGdpdGh1Yi5jb20vSGV4YUZpZWxkPlxuICovXG5leHBvcnQgY2xhc3MgRW5naW5lRXZlbnRzIHtcbiAgcHVibGljIHN0YXRpYyBpbnN0YW5jZTogRW5naW5lRXZlbnRzID0gbmV3IEVuZ2luZUV2ZW50cygpXG4gIHN0YXRpYyBFVkVOVFMgPSBFVkVOVFNcbiAgX2xpc3RlbmVycyA9IHt9XG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICBPYmplY3Qua2V5cyhFbmdpbmVFdmVudHMuaW5zdGFuY2UuX2xpc3RlbmVycykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBkZWxldGUgRW5naW5lRXZlbnRzLmluc3RhbmNlLl9saXN0ZW5lcnNba2V5XVxuICAgIH0pXG4gIH1cbiAgb25jZShldmVudE5hbWU6IHN0cmluZyB8IG51bWJlciwgbGlzdGVuZXI6IEZ1bmN0aW9uLCAuLi5hcmdzOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBvbkV2ZW50ID0gKGV2KSA9PiB7XG4gICAgICBFbmdpbmVFdmVudHMuaW5zdGFuY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIG9uRXZlbnQpXG4gICAgICBsaXN0ZW5lcihldilcbiAgICB9XG4gICAgRW5naW5lRXZlbnRzLmluc3RhbmNlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBvbkV2ZW50KVxuICB9XG4gIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lOiBzdHJpbmcgfCBudW1iZXIsIGxpc3RlbmVyOiBGdW5jdGlvbiwgLi4uYXJnczogYW55KTogdm9pZCB7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gRW5naW5lRXZlbnRzLmluc3RhbmNlLl9saXN0ZW5lcnNcbiAgICBpZiAobGlzdGVuZXJzW2V2ZW50TmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgbGlzdGVuZXJzW2V2ZW50TmFtZV0gPSBbXVxuICAgIH1cblxuICAgIGlmIChsaXN0ZW5lcnNbZXZlbnROYW1lXS5pbmRleE9mKGxpc3RlbmVyKSA9PT0gLTEpIHtcbiAgICAgIGxpc3RlbmVyc1tldmVudE5hbWVdLnB1c2gobGlzdGVuZXIpXG4gICAgfVxuICB9XG4gIGhhc0V2ZW50TGlzdGVuZXIoZXZlbnROYW1lOiBzdHJpbmcgfCBudW1iZXIsIGxpc3RlbmVyOiBGdW5jdGlvbiwgLi4uYXJnczogYW55KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIEVuZ2luZUV2ZW50cy5pbnN0YW5jZS5fbGlzdGVuZXJzW2V2ZW50TmFtZV0gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgRW5naW5lRXZlbnRzLmluc3RhbmNlLl9saXN0ZW5lcnNbZXZlbnROYW1lXS5pbmRleE9mKGxpc3RlbmVyKSAhPT0gLTFcbiAgICApXG4gIH1cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWU6IHN0cmluZyB8IG51bWJlciwgbGlzdGVuZXI6IEZ1bmN0aW9uLCAuLi5hcmdzOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBsaXN0ZW5lckFycmF5ID0gRW5naW5lRXZlbnRzLmluc3RhbmNlLl9saXN0ZW5lcnNbZXZlbnROYW1lXVxuICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJBcnJheS5pbmRleE9mKGxpc3RlbmVyKVxuICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICBsaXN0ZW5lckFycmF5LnNwbGljZShpbmRleCwgMSlcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmVtb3ZlQWxsTGlzdGVuZXJzRm9yRXZlbnQoZXZlbnROYW1lOiBzdHJpbmcsIGRlbGV0ZUV2ZW50PzogYm9vbGVhbiwgLi4uYXJnczogYW55KSB7XG4gICAgaWYgKGRlbGV0ZUV2ZW50KSB7XG4gICAgICBkZWxldGUgRW5naW5lRXZlbnRzLmluc3RhbmNlLl9saXN0ZW5lcnNbZXZlbnROYW1lXVxuICAgIH0gZWxzZSB7XG4gICAgICBFbmdpbmVFdmVudHMuaW5zdGFuY2UuX2xpc3RlbmVyc1tldmVudE5hbWVdID0gW11cbiAgICB9XG4gIH1cbiAgZGlzcGF0Y2hFdmVudChldmVudDogeyB0eXBlOiBzdHJpbmc7IFthdHRhY2htZW50OiBzdHJpbmddOiBhbnkgfSwgLi4uYXJnczogYW55KTogdm9pZCB7XG4gICAgY29uc3QgbGlzdGVuZXJBcnJheSA9IEVuZ2luZUV2ZW50cy5pbnN0YW5jZS5fbGlzdGVuZXJzW2V2ZW50LnR5cGVdXG4gICAgaWYgKGxpc3RlbmVyQXJyYXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgYXJyYXkgPSBsaXN0ZW5lckFycmF5LnNsaWNlKDApXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFycmF5W2ldLmNhbGwoRW5naW5lRXZlbnRzLmluc3RhbmNlLCBldmVudCwgLi4uYXJncylcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8vIHNyYy9Db25zdGFudHMuanNcbnZhciBUWVBFU19FTlVNID0ge1xuICBpODogXCJpOFwiLFxuICB1aTg6IFwidWk4XCIsXG4gIHVpOGM6IFwidWk4Y1wiLFxuICBpMTY6IFwiaTE2XCIsXG4gIHVpMTY6IFwidWkxNlwiLFxuICBpMzI6IFwiaTMyXCIsXG4gIHVpMzI6IFwidWkzMlwiLFxuICBmMzI6IFwiZjMyXCIsXG4gIGY2NDogXCJmNjRcIixcbiAgZWlkOiBcImVpZFwiXG59O1xudmFyIFRZUEVTX05BTUVTID0ge1xuICBpODogXCJJbnQ4XCIsXG4gIHVpODogXCJVaW50OFwiLFxuICB1aThjOiBcIlVpbnQ4Q2xhbXBlZFwiLFxuICBpMTY6IFwiSW50MTZcIixcbiAgdWkxNjogXCJVaW50MTZcIixcbiAgaTMyOiBcIkludDMyXCIsXG4gIHVpMzI6IFwiVWludDMyXCIsXG4gIGVpZDogXCJVaW50MzJcIixcbiAgZjMyOiBcIkZsb2F0MzJcIixcbiAgZjY0OiBcIkZsb2F0NjRcIlxufTtcbnZhciBUWVBFUyA9IHtcbiAgaTg6IEludDhBcnJheSxcbiAgdWk4OiBVaW50OEFycmF5LFxuICB1aThjOiBVaW50OENsYW1wZWRBcnJheSxcbiAgaTE2OiBJbnQxNkFycmF5LFxuICB1aTE2OiBVaW50MTZBcnJheSxcbiAgaTMyOiBJbnQzMkFycmF5LFxuICB1aTMyOiBVaW50MzJBcnJheSxcbiAgZjMyOiBGbG9hdDMyQXJyYXksXG4gIGY2NDogRmxvYXQ2NEFycmF5LFxuICBlaWQ6IFVpbnQzMkFycmF5XG59O1xudmFyIFVOU0lHTkVEX01BWCA9IHtcbiAgdWludDg6IDIgKiogOCxcbiAgdWludDE2OiAyICoqIDE2LFxuICB1aW50MzI6IDIgKiogMzJcbn07XG5cbi8vIHNyYy9TdG9yYWdlLmpzXG52YXIgcm91bmRUb011bHRpcGxlID0gKG11bCkgPT4gKHgpID0+IE1hdGguY2VpbCh4IC8gbXVsKSAqIG11bDtcbnZhciByb3VuZFRvTXVsdGlwbGU0ID0gcm91bmRUb011bHRpcGxlKDQpO1xudmFyICRzdG9yZVJlZiA9IFN5bWJvbChcInN0b3JlUmVmXCIpO1xudmFyICRzdG9yZVNpemUgPSBTeW1ib2woXCJzdG9yZVNpemVcIik7XG52YXIgJHN0b3JlTWFwcyA9IFN5bWJvbChcInN0b3JlTWFwc1wiKTtcbnZhciAkc3RvcmVGbGF0dGVuZWQgPSBTeW1ib2woXCJzdG9yZUZsYXR0ZW5lZFwiKTtcbnZhciAkc3RvcmVCYXNlID0gU3ltYm9sKFwic3RvcmVCYXNlXCIpO1xudmFyICRzdG9yZVR5cGUgPSBTeW1ib2woXCJzdG9yZVR5cGVcIik7XG52YXIgJHN0b3JlQXJyYXlDb3VudHMgPSBTeW1ib2woXCJzdG9yZUFycmF5Q291bnRcIik7XG52YXIgJHN0b3JlU3ViYXJyYXlzID0gU3ltYm9sKFwic3RvcmVTdWJhcnJheXNcIik7XG52YXIgJHN1YmFycmF5Q3Vyc29ycyA9IFN5bWJvbChcInN1YmFycmF5Q3Vyc29yc1wiKTtcbnZhciAkc3ViYXJyYXkgPSBTeW1ib2woXCJzdWJhcnJheVwiKTtcbnZhciAkc3ViYXJyYXlGcm9tID0gU3ltYm9sKFwic3ViYXJyYXlGcm9tXCIpO1xudmFyICRzdWJhcnJheVRvID0gU3ltYm9sKFwic3ViYXJyYXlUb1wiKTtcbnZhciAkcGFyZW50QXJyYXkgPSBTeW1ib2woXCJzdWJTdG9yZVwiKTtcbnZhciAkdGFnU3RvcmUgPSBTeW1ib2woXCJ0YWdTdG9yZVwiKTtcbnZhciAkcXVlcnlTaGFkb3cgPSBTeW1ib2woXCJxdWVyeVNoYWRvd1wiKTtcbnZhciAkc2VyaWFsaXplU2hhZG93ID0gU3ltYm9sKFwic2VyaWFsaXplU2hhZG93XCIpO1xudmFyICRpbmRleFR5cGUgPSBTeW1ib2woXCJpbmRleFR5cGVcIik7XG52YXIgJGluZGV4Qnl0ZXMgPSBTeW1ib2woXCJpbmRleEJ5dGVzXCIpO1xudmFyICRpc0VpZFR5cGUgPSBTeW1ib2woXCJpc0VpZFR5cGVcIik7XG52YXIgc3RvcmVzID0ge307XG52YXIgcmVzaXplID0gKHRhLCBzaXplKSA9PiB7XG4gIGNvbnN0IG5ld0J1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihzaXplICogdGEuQllURVNfUEVSX0VMRU1FTlQpO1xuICBjb25zdCBuZXdUYSA9IG5ldyB0YS5jb25zdHJ1Y3RvcihuZXdCdWZmZXIpO1xuICBuZXdUYS5zZXQodGEsIDApO1xuICByZXR1cm4gbmV3VGE7XG59O1xudmFyIGNyZWF0ZVNoYWRvdyA9IChzdG9yZSwga2V5KSA9PiB7XG4gIGlmICghQXJyYXlCdWZmZXIuaXNWaWV3KHN0b3JlKSkge1xuICAgIGNvbnN0IHNoYWRvd1N0b3JlID0gc3RvcmVbJHBhcmVudEFycmF5XS5zbGljZSgwKTtcbiAgICBzdG9yZVtrZXldID0gc3RvcmUubWFwKChfLCBlaWQpID0+IHtcbiAgICAgIGNvbnN0IGZyb20gPSBzdG9yZVtlaWRdWyRzdWJhcnJheUZyb21dO1xuICAgICAgY29uc3QgdG8gPSBzdG9yZVtlaWRdWyRzdWJhcnJheVRvXTtcbiAgICAgIHJldHVybiBzaGFkb3dTdG9yZS5zdWJhcnJheShmcm9tLCB0byk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgc3RvcmVba2V5XSA9IHN0b3JlLnNsaWNlKDApO1xuICB9XG59O1xudmFyIHJlc2l6ZVN1YmFycmF5ID0gKG1ldGFkYXRhLCBzdG9yZSwgc2l6ZSkgPT4ge1xuICBjb25zdCBjdXJzb3JzID0gbWV0YWRhdGFbJHN1YmFycmF5Q3Vyc29yc107XG4gIGxldCB0eXBlID0gc3RvcmVbJHN0b3JlVHlwZV07XG4gIGNvbnN0IGxlbmd0aCA9IHN0b3JlWzBdLmxlbmd0aDtcbiAgY29uc3QgaW5kZXhUeXBlID0gbGVuZ3RoIDw9IFVOU0lHTkVEX01BWC51aW50OCA/IFRZUEVTX0VOVU0udWk4IDogbGVuZ3RoIDw9IFVOU0lHTkVEX01BWC51aW50MTYgPyBUWVBFU19FTlVNLnVpMTYgOiBUWVBFU19FTlVNLnVpMzI7XG4gIGlmIChjdXJzb3JzW3R5cGVdID09PSAwKSB7XG4gICAgY29uc3QgYXJyYXlDb3VudCA9IG1ldGFkYXRhWyRzdG9yZUFycmF5Q291bnRzXVt0eXBlXTtcbiAgICBjb25zdCBzdW1tZWRMZW5ndGggPSBBcnJheShhcnJheUNvdW50KS5maWxsKDApLnJlZHVjZSgoYSwgcCkgPT4gYSArIGxlbmd0aCwgMCk7XG4gICAgY29uc3QgYXJyYXkgPSBuZXcgVFlQRVNbdHlwZV0ocm91bmRUb011bHRpcGxlNChzdW1tZWRMZW5ndGggKiBzaXplKSk7XG4gICAgYXJyYXkuc2V0KG1ldGFkYXRhWyRzdG9yZVN1YmFycmF5c11bdHlwZV0pO1xuICAgIG1ldGFkYXRhWyRzdG9yZVN1YmFycmF5c11bdHlwZV0gPSBhcnJheTtcbiAgICBhcnJheVskaW5kZXhUeXBlXSA9IFRZUEVTX05BTUVTW2luZGV4VHlwZV07XG4gICAgYXJyYXlbJGluZGV4Qnl0ZXNdID0gVFlQRVNbaW5kZXhUeXBlXS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgfVxuICBjb25zdCBzdGFydCA9IGN1cnNvcnNbdHlwZV07XG4gIGxldCBlbmQgPSAwO1xuICBmb3IgKGxldCBlaWQgPSAwOyBlaWQgPCBzaXplOyBlaWQrKykge1xuICAgIGNvbnN0IGZyb20gPSBjdXJzb3JzW3R5cGVdICsgZWlkICogbGVuZ3RoO1xuICAgIGNvbnN0IHRvID0gZnJvbSArIGxlbmd0aDtcbiAgICBzdG9yZVtlaWRdID0gbWV0YWRhdGFbJHN0b3JlU3ViYXJyYXlzXVt0eXBlXS5zdWJhcnJheShmcm9tLCB0byk7XG4gICAgc3RvcmVbZWlkXVskc3ViYXJyYXlGcm9tXSA9IGZyb207XG4gICAgc3RvcmVbZWlkXVskc3ViYXJyYXlUb10gPSB0bztcbiAgICBzdG9yZVtlaWRdWyRzdWJhcnJheV0gPSB0cnVlO1xuICAgIHN0b3JlW2VpZF1bJGluZGV4VHlwZV0gPSBUWVBFU19OQU1FU1tpbmRleFR5cGVdO1xuICAgIHN0b3JlW2VpZF1bJGluZGV4Qnl0ZXNdID0gVFlQRVNbaW5kZXhUeXBlXS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgICBlbmQgPSB0bztcbiAgfVxuICBjdXJzb3JzW3R5cGVdID0gZW5kO1xuICBzdG9yZVskcGFyZW50QXJyYXldID0gbWV0YWRhdGFbJHN0b3JlU3ViYXJyYXlzXVt0eXBlXS5zdWJhcnJheShzdGFydCwgZW5kKTtcbn07XG52YXIgcmVzaXplUmVjdXJzaXZlID0gKG1ldGFkYXRhLCBzdG9yZSwgc2l6ZSkgPT4ge1xuICBPYmplY3Qua2V5cyhzdG9yZSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgY29uc3QgdGEgPSBzdG9yZVtrZXldO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHRhKSkge1xuICAgICAgcmVzaXplU3ViYXJyYXkobWV0YWRhdGEsIHRhLCBzaXplKTtcbiAgICAgIHN0b3JlWyRzdG9yZUZsYXR0ZW5lZF0ucHVzaCh0YSk7XG4gICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcodGEpKSB7XG4gICAgICBzdG9yZVtrZXldID0gcmVzaXplKHRhLCBzaXplKTtcbiAgICAgIHN0b3JlWyRzdG9yZUZsYXR0ZW5lZF0ucHVzaChzdG9yZVtrZXldKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0YSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgcmVzaXplUmVjdXJzaXZlKG1ldGFkYXRhLCBzdG9yZVtrZXldLCBzaXplKTtcbiAgICB9XG4gIH0pO1xufTtcbnZhciByZXNpemVTdG9yZSA9IChzdG9yZSwgc2l6ZSkgPT4ge1xuICBpZiAoc3RvcmVbJHRhZ1N0b3JlXSlcbiAgICByZXR1cm47XG4gIHN0b3JlWyRzdG9yZVNpemVdID0gc2l6ZTtcbiAgc3RvcmVbJHN0b3JlRmxhdHRlbmVkXS5sZW5ndGggPSAwO1xuICBPYmplY3Qua2V5cyhzdG9yZVskc3ViYXJyYXlDdXJzb3JzXSkuZm9yRWFjaCgoaykgPT4ge1xuICAgIHN0b3JlWyRzdWJhcnJheUN1cnNvcnNdW2tdID0gMDtcbiAgfSk7XG4gIHJlc2l6ZVJlY3Vyc2l2ZShzdG9yZSwgc3RvcmUsIHNpemUpO1xufTtcbnZhciByZXNldFN0b3JlRm9yID0gKHN0b3JlLCBlaWQpID0+IHtcbiAgaWYgKHN0b3JlWyRzdG9yZUZsYXR0ZW5lZF0pIHtcbiAgICBzdG9yZVskc3RvcmVGbGF0dGVuZWRdLmZvckVhY2goKHRhKSA9PiB7XG4gICAgICBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KHRhKSlcbiAgICAgICAgdGFbZWlkXSA9IDA7XG4gICAgICBlbHNlXG4gICAgICAgIHRhW2VpZF0uZmlsbCgwKTtcbiAgICB9KTtcbiAgfVxufTtcbnZhciBjcmVhdGVUeXBlU3RvcmUgPSAodHlwZSwgbGVuZ3RoKSA9PiB7XG4gIGNvbnN0IHRvdGFsQnl0ZXMgPSBsZW5ndGggKiBUWVBFU1t0eXBlXS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgY29uc3QgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHRvdGFsQnl0ZXMpO1xuICBjb25zdCBzdG9yZSA9IG5ldyBUWVBFU1t0eXBlXShidWZmZXIpO1xuICBzdG9yZVskaXNFaWRUeXBlXSA9IHR5cGUgPT09IFRZUEVTX0VOVU0uZWlkO1xuICByZXR1cm4gc3RvcmU7XG59O1xudmFyIHBhcmVudEFycmF5ID0gKHN0b3JlKSA9PiBzdG9yZVskcGFyZW50QXJyYXldO1xudmFyIGNyZWF0ZUFycmF5U3RvcmUgPSAobWV0YWRhdGEsIHR5cGUsIGxlbmd0aCkgPT4ge1xuICBjb25zdCBzaXplID0gbWV0YWRhdGFbJHN0b3JlU2l6ZV07XG4gIGNvbnN0IHN0b3JlID0gQXJyYXkoc2l6ZSkuZmlsbCgwKTtcbiAgc3RvcmVbJHN0b3JlVHlwZV0gPSB0eXBlO1xuICBzdG9yZVskaXNFaWRUeXBlXSA9IHR5cGUgPT09IFRZUEVTX0VOVU0uZWlkO1xuICBjb25zdCBjdXJzb3JzID0gbWV0YWRhdGFbJHN1YmFycmF5Q3Vyc29yc107XG4gIGNvbnN0IGluZGV4VHlwZSA9IGxlbmd0aCA8PSBVTlNJR05FRF9NQVgudWludDggPyBUWVBFU19FTlVNLnVpOCA6IGxlbmd0aCA8PSBVTlNJR05FRF9NQVgudWludDE2ID8gVFlQRVNfRU5VTS51aTE2IDogVFlQRVNfRU5VTS51aTMyO1xuICBpZiAoIWxlbmd0aClcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJiaXRFQ1MgLSBNdXN0IGRlZmluZSBjb21wb25lbnQgYXJyYXkgbGVuZ3RoXCIpO1xuICBpZiAoIVRZUEVTW3R5cGVdKVxuICAgIHRocm93IG5ldyBFcnJvcihgYml0RUNTIC0gSW52YWxpZCBjb21wb25lbnQgYXJyYXkgcHJvcGVydHkgdHlwZSAke3R5cGV9YCk7XG4gIGlmICghbWV0YWRhdGFbJHN0b3JlU3ViYXJyYXlzXVt0eXBlXSkge1xuICAgIGNvbnN0IGFycmF5Q291bnQgPSBtZXRhZGF0YVskc3RvcmVBcnJheUNvdW50c11bdHlwZV07XG4gICAgY29uc3Qgc3VtbWVkTGVuZ3RoID0gQXJyYXkoYXJyYXlDb3VudCkuZmlsbCgwKS5yZWR1Y2UoKGEsIHApID0+IGEgKyBsZW5ndGgsIDApO1xuICAgIGNvbnN0IGFycmF5ID0gbmV3IFRZUEVTW3R5cGVdKHJvdW5kVG9NdWx0aXBsZTQoc3VtbWVkTGVuZ3RoICogc2l6ZSkpO1xuICAgIG1ldGFkYXRhWyRzdG9yZVN1YmFycmF5c11bdHlwZV0gPSBhcnJheTtcbiAgICBhcnJheVskaW5kZXhUeXBlXSA9IFRZUEVTX05BTUVTW2luZGV4VHlwZV07XG4gICAgYXJyYXlbJGluZGV4Qnl0ZXNdID0gVFlQRVNbaW5kZXhUeXBlXS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgfVxuICBjb25zdCBzdGFydCA9IGN1cnNvcnNbdHlwZV07XG4gIGxldCBlbmQgPSAwO1xuICBmb3IgKGxldCBlaWQgPSAwOyBlaWQgPCBzaXplOyBlaWQrKykge1xuICAgIGNvbnN0IGZyb20gPSBjdXJzb3JzW3R5cGVdICsgZWlkICogbGVuZ3RoO1xuICAgIGNvbnN0IHRvID0gZnJvbSArIGxlbmd0aDtcbiAgICBzdG9yZVtlaWRdID0gbWV0YWRhdGFbJHN0b3JlU3ViYXJyYXlzXVt0eXBlXS5zdWJhcnJheShmcm9tLCB0byk7XG4gICAgc3RvcmVbZWlkXVskc3ViYXJyYXlGcm9tXSA9IGZyb207XG4gICAgc3RvcmVbZWlkXVskc3ViYXJyYXlUb10gPSB0bztcbiAgICBzdG9yZVtlaWRdWyRzdWJhcnJheV0gPSB0cnVlO1xuICAgIHN0b3JlW2VpZF1bJGluZGV4VHlwZV0gPSBUWVBFU19OQU1FU1tpbmRleFR5cGVdO1xuICAgIHN0b3JlW2VpZF1bJGluZGV4Qnl0ZXNdID0gVFlQRVNbaW5kZXhUeXBlXS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgICBlbmQgPSB0bztcbiAgfVxuICBjdXJzb3JzW3R5cGVdID0gZW5kO1xuICBzdG9yZVskcGFyZW50QXJyYXldID0gbWV0YWRhdGFbJHN0b3JlU3ViYXJyYXlzXVt0eXBlXS5zdWJhcnJheShzdGFydCwgZW5kKTtcbiAgcmV0dXJuIHN0b3JlO1xufTtcbnZhciBpc0FycmF5VHlwZSA9ICh4KSA9PiBBcnJheS5pc0FycmF5KHgpICYmIHR5cGVvZiB4WzBdID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiB4WzFdID09PSBcIm51bWJlclwiO1xudmFyIGNyZWF0ZVN0b3JlID0gKHNjaGVtYSwgc2l6ZSkgPT4ge1xuICBjb25zdCAkc3RvcmUgPSBTeW1ib2woXCJzdG9yZVwiKTtcbiAgaWYgKCFzY2hlbWEgfHwgIU9iamVjdC5rZXlzKHNjaGVtYSkubGVuZ3RoKSB7XG4gICAgc3RvcmVzWyRzdG9yZV0gPSB7XG4gICAgICBbJHN0b3JlU2l6ZV06IHNpemUsXG4gICAgICBbJHRhZ1N0b3JlXTogdHJ1ZSxcbiAgICAgIFskc3RvcmVCYXNlXTogKCkgPT4gc3RvcmVzWyRzdG9yZV1cbiAgICB9O1xuICAgIHJldHVybiBzdG9yZXNbJHN0b3JlXTtcbiAgfVxuICBzY2hlbWEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHNjaGVtYSkpO1xuICBjb25zdCBhcnJheUNvdW50cyA9IHt9O1xuICBjb25zdCBjb2xsZWN0QXJyYXlDb3VudHMgPSAocykgPT4ge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhzKTtcbiAgICBmb3IgKGNvbnN0IGsgb2Yga2V5cykge1xuICAgICAgaWYgKGlzQXJyYXlUeXBlKHNba10pKSB7XG4gICAgICAgIGlmICghYXJyYXlDb3VudHNbc1trXVswXV0pXG4gICAgICAgICAgYXJyYXlDb3VudHNbc1trXVswXV0gPSAwO1xuICAgICAgICBhcnJheUNvdW50c1tzW2tdWzBdXSsrO1xuICAgICAgfSBlbHNlIGlmIChzW2tdIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgIGNvbGxlY3RBcnJheUNvdW50cyhzW2tdKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbGxlY3RBcnJheUNvdW50cyhzY2hlbWEpO1xuICBjb25zdCBtZXRhZGF0YSA9IHtcbiAgICBbJHN0b3JlU2l6ZV06IHNpemUsXG4gICAgWyRzdG9yZU1hcHNdOiB7fSxcbiAgICBbJHN0b3JlU3ViYXJyYXlzXToge30sXG4gICAgWyRzdG9yZVJlZl06ICRzdG9yZSxcbiAgICBbJHN1YmFycmF5Q3Vyc29yc106IE9iamVjdC5rZXlzKFRZUEVTKS5yZWR1Y2UoKGEsIHR5cGUpID0+ICh7IC4uLmEsIFt0eXBlXTogMCB9KSwge30pLFxuICAgIFskc3RvcmVGbGF0dGVuZWRdOiBbXSxcbiAgICBbJHN0b3JlQXJyYXlDb3VudHNdOiBhcnJheUNvdW50c1xuICB9O1xuICBpZiAoc2NoZW1hIGluc3RhbmNlb2YgT2JqZWN0ICYmIE9iamVjdC5rZXlzKHNjaGVtYSkubGVuZ3RoKSB7XG4gICAgY29uc3QgcmVjdXJzaXZlVHJhbnNmb3JtID0gKGEsIGspID0+IHtcbiAgICAgIGlmICh0eXBlb2YgYVtrXSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBhW2tdID0gY3JlYXRlVHlwZVN0b3JlKGFba10sIHNpemUpO1xuICAgICAgICBhW2tdWyRzdG9yZUJhc2VdID0gKCkgPT4gc3RvcmVzWyRzdG9yZV07XG4gICAgICAgIG1ldGFkYXRhWyRzdG9yZUZsYXR0ZW5lZF0ucHVzaChhW2tdKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNBcnJheVR5cGUoYVtrXSkpIHtcbiAgICAgICAgY29uc3QgW3R5cGUsIGxlbmd0aF0gPSBhW2tdO1xuICAgICAgICBhW2tdID0gY3JlYXRlQXJyYXlTdG9yZShtZXRhZGF0YSwgdHlwZSwgbGVuZ3RoKTtcbiAgICAgICAgYVtrXVskc3RvcmVCYXNlXSA9ICgpID0+IHN0b3Jlc1skc3RvcmVdO1xuICAgICAgICBtZXRhZGF0YVskc3RvcmVGbGF0dGVuZWRdLnB1c2goYVtrXSk7XG4gICAgICB9IGVsc2UgaWYgKGFba10gaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgYVtrXSA9IE9iamVjdC5rZXlzKGFba10pLnJlZHVjZShyZWN1cnNpdmVUcmFuc2Zvcm0sIGFba10pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGE7XG4gICAgfTtcbiAgICBzdG9yZXNbJHN0b3JlXSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmtleXMoc2NoZW1hKS5yZWR1Y2UocmVjdXJzaXZlVHJhbnNmb3JtLCBzY2hlbWEpLCBtZXRhZGF0YSk7XG4gICAgc3RvcmVzWyRzdG9yZV1bJHN0b3JlQmFzZV0gPSAoKSA9PiBzdG9yZXNbJHN0b3JlXTtcbiAgICByZXR1cm4gc3RvcmVzWyRzdG9yZV07XG4gIH1cbn07XG5cbi8vIHNyYy9VdGlsLmpzXG52YXIgU3BhcnNlU2V0ID0gKCkgPT4ge1xuICBjb25zdCBkZW5zZSA9IFtdO1xuICBjb25zdCBzcGFyc2UgPSBbXTtcbiAgZGVuc2Uuc29ydCA9IGZ1bmN0aW9uKGNvbXBhcmF0b3IpIHtcbiAgICBjb25zdCByZXN1bHQgPSBBcnJheS5wcm90b3R5cGUuc29ydC5jYWxsKHRoaXMsIGNvbXBhcmF0b3IpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVuc2UubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNwYXJzZVtkZW5zZVtpXV0gPSBpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBjb25zdCBoYXMgPSAodmFsKSA9PiBkZW5zZVtzcGFyc2VbdmFsXV0gPT09IHZhbDtcbiAgY29uc3QgYWRkID0gKHZhbCkgPT4ge1xuICAgIGlmIChoYXModmFsKSlcbiAgICAgIHJldHVybjtcbiAgICBzcGFyc2VbdmFsXSA9IGRlbnNlLnB1c2godmFsKSAtIDE7XG4gIH07XG4gIGNvbnN0IHJlbW92ZSA9ICh2YWwpID0+IHtcbiAgICBpZiAoIWhhcyh2YWwpKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGluZGV4ID0gc3BhcnNlW3ZhbF07XG4gICAgY29uc3Qgc3dhcHBlZCA9IGRlbnNlLnBvcCgpO1xuICAgIGlmIChzd2FwcGVkICE9PSB2YWwpIHtcbiAgICAgIGRlbnNlW2luZGV4XSA9IHN3YXBwZWQ7XG4gICAgICBzcGFyc2Vbc3dhcHBlZF0gPSBpbmRleDtcbiAgICB9XG4gIH07XG4gIHJldHVybiB7XG4gICAgYWRkLFxuICAgIHJlbW92ZSxcbiAgICBoYXMsXG4gICAgc3BhcnNlLFxuICAgIGRlbnNlXG4gIH07XG59O1xuXG4vLyBzcmMvU2VyaWFsaXplLmpzXG52YXIgREVTRVJJQUxJWkVfTU9ERSA9IHtcbiAgUkVQTEFDRTogMCxcbiAgQVBQRU5EOiAxLFxuICBNQVA6IDJcbn07XG52YXIgcmVzaXplZCA9IGZhbHNlO1xudmFyIHNldFNlcmlhbGl6YXRpb25SZXNpemVkID0gKHYpID0+IHtcbiAgcmVzaXplZCA9IHY7XG59O1xudmFyIGNhbm9uaWNhbGl6ZSA9ICh0YXJnZXQpID0+IHtcbiAgbGV0IGNvbXBvbmVudFByb3BzID0gW107XG4gIGxldCBjaGFuZ2VkUHJvcHMgPSBuZXcgTWFwKCk7XG4gIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkpIHtcbiAgICBjb21wb25lbnRQcm9wcyA9IHRhcmdldC5tYXAoKHApID0+IHtcbiAgICAgIGlmICghcClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYml0RUNTIC0gQ2Fubm90IHNlcmlhbGl6ZSB1bmRlZmluZWQgY29tcG9uZW50XCIpO1xuICAgICAgaWYgKHR5cGVvZiBwID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY29uc3QgW2MsIG1vZF0gPSBwKCk7XG4gICAgICAgIGlmIChtb2QgPT09IFwiY2hhbmdlZFwiKSB7XG4gICAgICAgICAgY1skc3RvcmVGbGF0dGVuZWRdLmZvckVhY2goKHByb3ApID0+IHtcbiAgICAgICAgICAgIGNvbnN0ICQgPSBTeW1ib2woKTtcbiAgICAgICAgICAgIGNyZWF0ZVNoYWRvdyhwcm9wLCAkKTtcbiAgICAgICAgICAgIGNoYW5nZWRQcm9wcy5zZXQocHJvcCwgJCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIGNbJHN0b3JlRmxhdHRlbmVkXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocCkuaW5jbHVkZXMoJHN0b3JlRmxhdHRlbmVkKSkge1xuICAgICAgICByZXR1cm4gcFskc3RvcmVGbGF0dGVuZWRdO1xuICAgICAgfVxuICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocCkuaW5jbHVkZXMoJHN0b3JlQmFzZSkpIHtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgICB9XG4gICAgfSkucmVkdWNlKChhLCB2KSA9PiBhLmNvbmNhdCh2KSwgW10pO1xuICB9XG4gIHJldHVybiBbY29tcG9uZW50UHJvcHMsIGNoYW5nZWRQcm9wc107XG59O1xudmFyIGRlZmluZVNlcmlhbGl6ZXIgPSAodGFyZ2V0LCBtYXhCeXRlcyA9IDJlNykgPT4ge1xuICBjb25zdCBpc1dvcmxkID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0YXJnZXQpLmluY2x1ZGVzKCRjb21wb25lbnRNYXApO1xuICBsZXQgY29tcG9uZW50UHJvcHMsIGNoYW5nZWRQcm9wcztcbiAgbGV0IGxhenlJbml0ID0gZmFsc2U7XG4gIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihtYXhCeXRlcyk7XG4gIGNvbnN0IHZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcbiAgcmV0dXJuIChlbnRzKSA9PiB7XG4gICAgaWYgKCFsYXp5SW5pdCkge1xuICAgICAgW2NvbXBvbmVudFByb3BzLCBjaGFuZ2VkUHJvcHNdID0gY2Fub25pY2FsaXplKHRhcmdldCk7XG4gICAgICBsYXp5SW5pdCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChyZXNpemVkKSB7XG4gICAgICBbY29tcG9uZW50UHJvcHMsIGNoYW5nZWRQcm9wc10gPSBjYW5vbmljYWxpemUodGFyZ2V0KTtcbiAgICAgIHJlc2l6ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGlzV29ybGQpIHtcbiAgICAgIGNvbXBvbmVudFByb3BzID0gW107XG4gICAgICB0YXJnZXRbJGNvbXBvbmVudE1hcF0uZm9yRWFjaCgoYywgY29tcG9uZW50KSA9PiB7XG4gICAgICAgIGlmIChjb21wb25lbnRbJHN0b3JlRmxhdHRlbmVkXSlcbiAgICAgICAgICBjb21wb25lbnRQcm9wcy5wdXNoKC4uLmNvbXBvbmVudFskc3RvcmVGbGF0dGVuZWRdKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIGNvbXBvbmVudFByb3BzLnB1c2goY29tcG9uZW50KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBsZXQgd29ybGQ7XG4gICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZW50cykuaW5jbHVkZXMoJGNvbXBvbmVudE1hcCkpIHtcbiAgICAgIHdvcmxkID0gZW50cztcbiAgICAgIGVudHMgPSBlbnRzWyRlbnRpdHlBcnJheV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHdvcmxkID0gZWlkVG9Xb3JsZC5nZXQoZW50c1swXSk7XG4gICAgfVxuICAgIGxldCB3aGVyZSA9IDA7XG4gICAgaWYgKCFlbnRzLmxlbmd0aClcbiAgICAgIHJldHVybiBidWZmZXIuc2xpY2UoMCwgd2hlcmUpO1xuICAgIGZvciAobGV0IHBpZCA9IDA7IHBpZCA8IGNvbXBvbmVudFByb3BzLmxlbmd0aDsgcGlkKyspIHtcbiAgICAgIGNvbnN0IHByb3AgPSBjb21wb25lbnRQcm9wc1twaWRdO1xuICAgICAgY29uc3QgJGRpZmYgPSBjaGFuZ2VkUHJvcHMuZ2V0KHByb3ApO1xuICAgICAgdmlldy5zZXRVaW50OCh3aGVyZSwgcGlkKTtcbiAgICAgIHdoZXJlICs9IDE7XG4gICAgICBjb25zdCBjb3VudFdoZXJlID0gd2hlcmU7XG4gICAgICB3aGVyZSArPSA0O1xuICAgICAgbGV0IHdyaXRlQ291bnQgPSAwO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGVpZCA9IGVudHNbaV07XG4gICAgICAgIGlmICghaGFzQ29tcG9uZW50KHdvcmxkLCBwcm9wWyRzdG9yZUJhc2VdKCksIGVpZCkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXdpbmRXaGVyZSA9IHdoZXJlO1xuICAgICAgICB2aWV3LnNldFVpbnQzMih3aGVyZSwgZWlkKTtcbiAgICAgICAgd2hlcmUgKz0gNDtcbiAgICAgICAgaWYgKHByb3BbJHRhZ1N0b3JlXSkge1xuICAgICAgICAgIHdyaXRlQ291bnQrKztcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KHByb3BbZWlkXSkpIHtcbiAgICAgICAgICBjb25zdCB0eXBlID0gcHJvcFtlaWRdLmNvbnN0cnVjdG9yLm5hbWUucmVwbGFjZShcIkFycmF5XCIsIFwiXCIpO1xuICAgICAgICAgIGNvbnN0IGluZGV4VHlwZSA9IHByb3BbZWlkXVskaW5kZXhUeXBlXTtcbiAgICAgICAgICBjb25zdCBpbmRleEJ5dGVzID0gcHJvcFtlaWRdWyRpbmRleEJ5dGVzXTtcbiAgICAgICAgICBjb25zdCBjb3VudFdoZXJlMiA9IHdoZXJlO1xuICAgICAgICAgIHdoZXJlICs9IGluZGV4Qnl0ZXM7XG4gICAgICAgICAgbGV0IGFycmF5V3JpdGVDb3VudCA9IDA7XG4gICAgICAgICAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IHByb3BbZWlkXS5sZW5ndGg7IGkyKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcHJvcFtlaWRdW2kyXTtcbiAgICAgICAgICAgIGlmICgkZGlmZiAmJiBwcm9wW2VpZF1baTJdID09PSBwcm9wWyRkaWZmXVtlaWRdW2kyXSkge1xuICAgICAgICAgICAgICBwcm9wWyRkaWZmXVtlaWRdW2kyXSA9IHByb3BbZWlkXVtpMl07XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCRkaWZmKVxuICAgICAgICAgICAgICBwcm9wWyRkaWZmXVtlaWRdW2kyXSA9IHByb3BbZWlkXVtpMl07XG4gICAgICAgICAgICB2aWV3W2BzZXQke2luZGV4VHlwZX1gXSh3aGVyZSwgaTIpO1xuICAgICAgICAgICAgd2hlcmUgKz0gaW5kZXhCeXRlcztcbiAgICAgICAgICAgIHZpZXdbYHNldCR7dHlwZX1gXSh3aGVyZSwgdmFsdWUpO1xuICAgICAgICAgICAgd2hlcmUgKz0gcHJvcFtlaWRdLkJZVEVTX1BFUl9FTEVNRU5UO1xuICAgICAgICAgICAgYXJyYXlXcml0ZUNvdW50Kys7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChhcnJheVdyaXRlQ291bnQgPiAwKSB7XG4gICAgICAgICAgICB2aWV3W2BzZXQke2luZGV4VHlwZX1gXShjb3VudFdoZXJlMiwgYXJyYXlXcml0ZUNvdW50KTtcbiAgICAgICAgICAgIHdyaXRlQ291bnQrKztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2hlcmUgPSByZXdpbmRXaGVyZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCRkaWZmICYmIHByb3BbJGRpZmZdW2VpZF0gIT09IHByb3BbZWlkXSkge1xuICAgICAgICAgICAgd2hlcmUgPSByZXdpbmRXaGVyZTtcbiAgICAgICAgICAgIHByb3BbJGRpZmZdW2VpZF0gPSBwcm9wW2VpZF07XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCRkaWZmKVxuICAgICAgICAgICAgcHJvcFskZGlmZl1bZWlkXSA9IHByb3BbZWlkXTtcbiAgICAgICAgICBjb25zdCB0eXBlID0gcHJvcC5jb25zdHJ1Y3Rvci5uYW1lLnJlcGxhY2UoXCJBcnJheVwiLCBcIlwiKTtcbiAgICAgICAgICB2aWV3W2BzZXQke3R5cGV9YF0od2hlcmUsIHByb3BbZWlkXSk7XG4gICAgICAgICAgd2hlcmUgKz0gcHJvcC5CWVRFU19QRVJfRUxFTUVOVDtcbiAgICAgICAgICB3cml0ZUNvdW50Kys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh3cml0ZUNvdW50ID4gMCkge1xuICAgICAgICB2aWV3LnNldFVpbnQzMihjb3VudFdoZXJlLCB3cml0ZUNvdW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdoZXJlIC09IDU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBidWZmZXIuc2xpY2UoMCwgd2hlcmUpO1xuICB9O1xufTtcbnZhciBuZXdFbnRpdGllcyA9IG5ldyBNYXAoKTtcbnZhciBkZWZpbmVEZXNlcmlhbGl6ZXIgPSAodGFyZ2V0KSA9PiB7XG4gIGNvbnN0IGlzV29ybGQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHRhcmdldCkuaW5jbHVkZXMoJGNvbXBvbmVudE1hcCk7XG4gIGxldCBbY29tcG9uZW50UHJvcHNdID0gY2Fub25pY2FsaXplKHRhcmdldCk7XG4gIHJldHVybiAod29ybGQsIHBhY2tldCwgbW9kZSA9IDApID0+IHtcbiAgICBuZXdFbnRpdGllcy5jbGVhcigpO1xuICAgIGlmIChyZXNpemVkKSB7XG4gICAgICBbY29tcG9uZW50UHJvcHNdID0gY2Fub25pY2FsaXplKHRhcmdldCk7XG4gICAgICByZXNpemVkID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChpc1dvcmxkKSB7XG4gICAgICBjb21wb25lbnRQcm9wcyA9IFtdO1xuICAgICAgdGFyZ2V0WyRjb21wb25lbnRNYXBdLmZvckVhY2goKGMsIGNvbXBvbmVudCkgPT4ge1xuICAgICAgICBpZiAoY29tcG9uZW50WyRzdG9yZUZsYXR0ZW5lZF0pXG4gICAgICAgICAgY29tcG9uZW50UHJvcHMucHVzaCguLi5jb21wb25lbnRbJHN0b3JlRmxhdHRlbmVkXSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBjb21wb25lbnRQcm9wcy5wdXNoKGNvbXBvbmVudCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgbG9jYWxFbnRpdGllcyA9IHdvcmxkWyRsb2NhbEVudGl0aWVzXTtcbiAgICBjb25zdCBsb2NhbEVudGl0eUxvb2t1cCA9IHdvcmxkWyRsb2NhbEVudGl0eUxvb2t1cF07XG4gICAgY29uc3QgdmlldyA9IG5ldyBEYXRhVmlldyhwYWNrZXQpO1xuICAgIGxldCB3aGVyZSA9IDA7XG4gICAgd2hpbGUgKHdoZXJlIDwgcGFja2V0LmJ5dGVMZW5ndGgpIHtcbiAgICAgIGNvbnN0IHBpZCA9IHZpZXcuZ2V0VWludDgod2hlcmUpO1xuICAgICAgd2hlcmUgKz0gMTtcbiAgICAgIGNvbnN0IGVudGl0eUNvdW50ID0gdmlldy5nZXRVaW50MzIod2hlcmUpO1xuICAgICAgd2hlcmUgKz0gNDtcbiAgICAgIGNvbnN0IHByb3AgPSBjb21wb25lbnRQcm9wc1twaWRdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRpdHlDb3VudDsgaSsrKSB7XG4gICAgICAgIGxldCBlaWQgPSB2aWV3LmdldFVpbnQzMih3aGVyZSk7XG4gICAgICAgIHdoZXJlICs9IDQ7XG4gICAgICAgIGlmIChtb2RlID09PSBERVNFUklBTElaRV9NT0RFLk1BUCkge1xuICAgICAgICAgIGlmIChsb2NhbEVudGl0aWVzLmhhcyhlaWQpKSB7XG4gICAgICAgICAgICBlaWQgPSBsb2NhbEVudGl0aWVzLmdldChlaWQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAobmV3RW50aXRpZXMuaGFzKGVpZCkpIHtcbiAgICAgICAgICAgIGVpZCA9IG5ld0VudGl0aWVzLmdldChlaWQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBuZXdFaWQgPSBhZGRFbnRpdHkod29ybGQpO1xuICAgICAgICAgICAgbG9jYWxFbnRpdGllcy5zZXQoZWlkLCBuZXdFaWQpO1xuICAgICAgICAgICAgbG9jYWxFbnRpdHlMb29rdXAuc2V0KG5ld0VpZCwgZWlkKTtcbiAgICAgICAgICAgIG5ld0VudGl0aWVzLnNldChlaWQsIG5ld0VpZCk7XG4gICAgICAgICAgICBlaWQgPSBuZXdFaWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtb2RlID09PSBERVNFUklBTElaRV9NT0RFLkFQUEVORCB8fCBtb2RlID09PSBERVNFUklBTElaRV9NT0RFLlJFUExBQ0UgJiYgIXdvcmxkWyRlbnRpdHlTcGFyc2VTZXRdLmhhcyhlaWQpKSB7XG4gICAgICAgICAgY29uc3QgbmV3RWlkID0gbmV3RW50aXRpZXMuZ2V0KGVpZCkgfHwgYWRkRW50aXR5KHdvcmxkKTtcbiAgICAgICAgICBuZXdFbnRpdGllcy5zZXQoZWlkLCBuZXdFaWQpO1xuICAgICAgICAgIGVpZCA9IG5ld0VpZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBwcm9wWyRzdG9yZUJhc2VdKCk7XG4gICAgICAgIGlmICghaGFzQ29tcG9uZW50KHdvcmxkLCBjb21wb25lbnQsIGVpZCkpIHtcbiAgICAgICAgICBhZGRDb21wb25lbnQod29ybGQsIGNvbXBvbmVudCwgZWlkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tcG9uZW50WyR0YWdTdG9yZV0pIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KHByb3BbZWlkXSkpIHtcbiAgICAgICAgICBjb25zdCBhcnJheSA9IHByb3BbZWlkXTtcbiAgICAgICAgICBjb25zdCBjb3VudCA9IHZpZXdbYGdldCR7YXJyYXlbJGluZGV4VHlwZV19YF0od2hlcmUpO1xuICAgICAgICAgIHdoZXJlICs9IGFycmF5WyRpbmRleEJ5dGVzXTtcbiAgICAgICAgICBmb3IgKGxldCBpMiA9IDA7IGkyIDwgY291bnQ7IGkyKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdmlld1tgZ2V0JHthcnJheVskaW5kZXhUeXBlXX1gXSh3aGVyZSk7XG4gICAgICAgICAgICB3aGVyZSArPSBhcnJheVskaW5kZXhCeXRlc107XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHZpZXdbYGdldCR7YXJyYXkuY29uc3RydWN0b3IubmFtZS5yZXBsYWNlKFwiQXJyYXlcIiwgXCJcIil9YF0od2hlcmUpO1xuICAgICAgICAgICAgd2hlcmUgKz0gYXJyYXkuQllURVNfUEVSX0VMRU1FTlQ7XG4gICAgICAgICAgICBpZiAocHJvcFskaXNFaWRUeXBlXSkge1xuICAgICAgICAgICAgICBsZXQgbG9jYWxFaWQgPSBsb2NhbEVudGl0aWVzLmdldCh2YWx1ZSk7XG4gICAgICAgICAgICAgIGlmICghd29ybGRbJGVudGl0eVNwYXJzZVNldF0uaGFzKGxvY2FsRWlkKSlcbiAgICAgICAgICAgICAgICBsb2NhbEVpZCA9IGFkZEVudGl0eSh3b3JsZCk7XG4gICAgICAgICAgICAgIHByb3BbZWlkXVtpbmRleF0gPSBsb2NhbEVpZDtcbiAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICBwcm9wW2VpZF1baW5kZXhdID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmlld1tgZ2V0JHtwcm9wLmNvbnN0cnVjdG9yLm5hbWUucmVwbGFjZShcIkFycmF5XCIsIFwiXCIpfWBdKHdoZXJlKTtcbiAgICAgICAgICB3aGVyZSArPSBwcm9wLkJZVEVTX1BFUl9FTEVNRU5UO1xuICAgICAgICAgIGlmIChwcm9wWyRpc0VpZFR5cGVdKSB7XG4gICAgICAgICAgICBsZXQgbG9jYWxFaWQgPSBsb2NhbEVudGl0aWVzLmdldCh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAoIXdvcmxkWyRlbnRpdHlTcGFyc2VTZXRdLmhhcyhsb2NhbEVpZCkpXG4gICAgICAgICAgICAgIGxvY2FsRWlkID0gYWRkRW50aXR5KHdvcmxkKTtcbiAgICAgICAgICAgIHByb3BbZWlkXSA9IGxvY2FsRWlkO1xuICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgcHJvcFtlaWRdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuXG4vLyBzcmMvRW50aXR5LmpzXG52YXIgJGVudGl0eU1hc2tzID0gU3ltYm9sKFwiZW50aXR5TWFza3NcIik7XG52YXIgJGVudGl0eUNvbXBvbmVudHMgPSBTeW1ib2woXCJlbnRpdHlDb21wb25lbnRzXCIpO1xudmFyICRlbnRpdHlTcGFyc2VTZXQgPSBTeW1ib2woXCJlbnRpdHlTcGFyc2VTZXRcIik7XG52YXIgJGVudGl0eUFycmF5ID0gU3ltYm9sKFwiZW50aXR5QXJyYXlcIik7XG52YXIgJGVudGl0eUluZGljZXMgPSBTeW1ib2woXCJlbnRpdHlJbmRpY2VzXCIpO1xudmFyICRyZW1vdmVkRW50aXRpZXMgPSBTeW1ib2woXCJyZW1vdmVkRW50aXRpZXNcIik7XG52YXIgZGVmYXVsdFNpemUgPSAxZTU7XG52YXIgZ2xvYmFsRW50aXR5Q3Vyc29yID0gMDtcbnZhciBnbG9iYWxTaXplID0gZGVmYXVsdFNpemU7XG52YXIgcmVzaXplVGhyZXNob2xkID0gKCkgPT4gZ2xvYmFsU2l6ZSAtIGdsb2JhbFNpemUgLyA1O1xudmFyIGdldEdsb2JhbFNpemUgPSAoKSA9PiBnbG9iYWxTaXplO1xudmFyIHJlbW92ZWQgPSBbXTtcbnZhciByZXNldEdsb2JhbHMgPSAoKSA9PiB7XG4gIGdsb2JhbFNpemUgPSBkZWZhdWx0U2l6ZTtcbiAgZ2xvYmFsRW50aXR5Q3Vyc29yID0gMDtcbiAgcmVtb3ZlZC5sZW5ndGggPSAwO1xufTtcbnZhciBzZXREZWZhdWx0U2l6ZSA9IChzaXplKSA9PiB7XG4gIGRlZmF1bHRTaXplID0gc2l6ZTtcbiAgcmVzZXRHbG9iYWxzKCk7XG59O1xudmFyIGdldEVudGl0eUN1cnNvciA9ICgpID0+IGdsb2JhbEVudGl0eUN1cnNvcjtcbnZhciBlaWRUb1dvcmxkID0gbmV3IE1hcCgpO1xudmFyIGFkZEVudGl0eSA9ICh3b3JsZCkgPT4ge1xuICBpZiAoZ2xvYmFsRW50aXR5Q3Vyc29yID49IHJlc2l6ZVRocmVzaG9sZCgpKSB7XG4gICAgY29uc3Qgc2l6ZSA9IGdsb2JhbFNpemU7XG4gICAgY29uc3QgYW1vdW50ID0gTWF0aC5jZWlsKHNpemUgLyAyIC8gNCkgKiA0O1xuICAgIGNvbnN0IG5ld1NpemUgPSBzaXplICsgYW1vdW50O1xuICAgIGdsb2JhbFNpemUgPSBuZXdTaXplO1xuICAgIHJlc2l6ZVdvcmxkcyhuZXdTaXplKTtcbiAgICByZXNpemVDb21wb25lbnRzKG5ld1NpemUpO1xuICAgIHNldFNlcmlhbGl6YXRpb25SZXNpemVkKHRydWUpO1xuICAgIGNvbnNvbGUuaW5mbyhgXFx1ezFGNDdFfSBiaXRFQ1MgLSByZXNpemluZyBhbGwgZGF0YSBzdG9yZXMgZnJvbSAke3NpemV9IHRvICR7bmV3U2l6ZX1gKTtcbiAgfVxuICBjb25zdCBlaWQgPSByZW1vdmVkLmxlbmd0aCA+IDAgPyByZW1vdmVkLnNoaWZ0KCkgOiBnbG9iYWxFbnRpdHlDdXJzb3IrKztcbiAgd29ybGRbJGVudGl0eVNwYXJzZVNldF0uYWRkKGVpZCk7XG4gIGVpZFRvV29ybGQuc2V0KGVpZCwgd29ybGQpO1xuICB3b3JsZFskbm90UXVlcmllc10uZm9yRWFjaCgocSkgPT4ge1xuICAgIGNvbnN0IG1hdGNoID0gcXVlcnlDaGVja0VudGl0eSh3b3JsZCwgcSwgZWlkKTtcbiAgICBpZiAobWF0Y2gpXG4gICAgICBxdWVyeUFkZEVudGl0eShxLCBlaWQpO1xuICB9KTtcbiAgd29ybGRbJGVudGl0eUNvbXBvbmVudHNdLnNldChlaWQsIG5ldyBTZXQoKSk7XG4gIHJldHVybiBlaWQ7XG59O1xudmFyIHJlbW92ZUVudGl0eSA9ICh3b3JsZCwgZWlkKSA9PiB7XG4gIGlmICghd29ybGRbJGVudGl0eVNwYXJzZVNldF0uaGFzKGVpZCkpXG4gICAgcmV0dXJuO1xuICB3b3JsZFskcXVlcmllc10uZm9yRWFjaCgocSkgPT4ge1xuICAgIHF1ZXJ5UmVtb3ZlRW50aXR5KHdvcmxkLCBxLCBlaWQpO1xuICB9KTtcbiAgcmVtb3ZlZC5wdXNoKGVpZCk7XG4gIHdvcmxkWyRlbnRpdHlTcGFyc2VTZXRdLnJlbW92ZShlaWQpO1xuICB3b3JsZFskZW50aXR5Q29tcG9uZW50c10uZGVsZXRlKGVpZCk7XG4gIHdvcmxkWyRsb2NhbEVudGl0aWVzXS5kZWxldGUod29ybGRbJGxvY2FsRW50aXR5TG9va3VwXS5nZXQoZWlkKSk7XG4gIHdvcmxkWyRsb2NhbEVudGl0eUxvb2t1cF0uZGVsZXRlKGVpZCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgd29ybGRbJGVudGl0eU1hc2tzXS5sZW5ndGg7IGkrKylcbiAgICB3b3JsZFskZW50aXR5TWFza3NdW2ldW2VpZF0gPSAwO1xufTtcbnZhciBnZXRFbnRpdHlDb21wb25lbnRzID0gKHdvcmxkLCBlaWQpID0+IEFycmF5LmZyb20od29ybGRbJGVudGl0eUNvbXBvbmVudHNdLmdldChlaWQpKTtcblxuLy8gc3JjL1F1ZXJ5LmpzXG5mdW5jdGlvbiBOb3QoYykge1xuICByZXR1cm4gKCkgPT4gW2MsIFwibm90XCJdO1xufVxuZnVuY3Rpb24gQ2hhbmdlZChjKSB7XG4gIHJldHVybiAoKSA9PiBbYywgXCJjaGFuZ2VkXCJdO1xufVxuZnVuY3Rpb24gQW55KC4uLmNvbXBzKSB7XG4gIHJldHVybiBmdW5jdGlvbiBRdWVyeUFueSgpIHtcbiAgICByZXR1cm4gY29tcHM7XG4gIH07XG59XG5mdW5jdGlvbiBBbGwoLi4uY29tcHMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIFF1ZXJ5QWxsKCkge1xuICAgIHJldHVybiBjb21wcztcbiAgfTtcbn1cbmZ1bmN0aW9uIE5vbmUoLi4uY29tcHMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIFF1ZXJ5Tm9uZSgpIHtcbiAgICByZXR1cm4gY29tcHM7XG4gIH07XG59XG52YXIgJHF1ZXJpZXMgPSBTeW1ib2woXCJxdWVyaWVzXCIpO1xudmFyICRub3RRdWVyaWVzID0gU3ltYm9sKFwibm90UXVlcmllc1wiKTtcbnZhciAkcXVlcnlBbnkgPSBTeW1ib2woXCJxdWVyeUFueVwiKTtcbnZhciAkcXVlcnlBbGwgPSBTeW1ib2woXCJxdWVyeUFsbFwiKTtcbnZhciAkcXVlcnlOb25lID0gU3ltYm9sKFwicXVlcnlOb25lXCIpO1xudmFyICRxdWVyeU1hcCA9IFN5bWJvbChcInF1ZXJ5TWFwXCIpO1xudmFyICRkaXJ0eVF1ZXJpZXMgPSBTeW1ib2woXCIkZGlydHlRdWVyaWVzXCIpO1xudmFyICRxdWVyeUNvbXBvbmVudHMgPSBTeW1ib2woXCJxdWVyeUNvbXBvbmVudHNcIik7XG52YXIgJGVudGVyUXVlcnkgPSBTeW1ib2woXCJlbnRlclF1ZXJ5XCIpO1xudmFyICRleGl0UXVlcnkgPSBTeW1ib2woXCJleGl0UXVlcnlcIik7XG52YXIgZW50ZXJRdWVyeSA9IChxdWVyeSkgPT4gKHdvcmxkKSA9PiB7XG4gIGlmICghd29ybGRbJHF1ZXJ5TWFwXS5oYXMocXVlcnkpKVxuICAgIHJlZ2lzdGVyUXVlcnkod29ybGQsIHF1ZXJ5KTtcbiAgY29uc3QgcSA9IHdvcmxkWyRxdWVyeU1hcF0uZ2V0KHF1ZXJ5KTtcbiAgY29uc3QgZW50ZXJlZCA9IHEuZW50ZXJlZC5kZW5zZS5zbGljZSgpO1xuICBxLmVudGVyZWQgPSBTcGFyc2VTZXQoKTtcbiAgcmV0dXJuIGVudGVyZWQ7XG59O1xudmFyIGV4aXRRdWVyeSA9IChxdWVyeSkgPT4gKHdvcmxkKSA9PiB7XG4gIGlmICghd29ybGRbJHF1ZXJ5TWFwXS5oYXMocXVlcnkpKVxuICAgIHJlZ2lzdGVyUXVlcnkod29ybGQsIHF1ZXJ5KTtcbiAgY29uc3QgcSA9IHdvcmxkWyRxdWVyeU1hcF0uZ2V0KHF1ZXJ5KTtcbiAgY29uc3QgZXhpdGVkID0gcS5leGl0ZWQuZGVuc2Uuc2xpY2UoKTtcbiAgcS5leGl0ZWQgPSBTcGFyc2VTZXQoKTtcbiAgcmV0dXJuIGV4aXRlZDtcbn07XG52YXIgcmVnaXN0ZXJRdWVyeSA9ICh3b3JsZCwgcXVlcnkpID0+IHtcbiAgY29uc3QgY29tcG9uZW50czIgPSBbXTtcbiAgY29uc3Qgbm90Q29tcG9uZW50cyA9IFtdO1xuICBjb25zdCBjaGFuZ2VkQ29tcG9uZW50cyA9IFtdO1xuICBxdWVyeVskcXVlcnlDb21wb25lbnRzXS5mb3JFYWNoKChjKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBjID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGNvbnN0IFtjb21wLCBtb2RdID0gYygpO1xuICAgICAgaWYgKCF3b3JsZFskY29tcG9uZW50TWFwXS5oYXMoY29tcCkpXG4gICAgICAgIHJlZ2lzdGVyQ29tcG9uZW50KHdvcmxkLCBjb21wKTtcbiAgICAgIGlmIChtb2QgPT09IFwibm90XCIpIHtcbiAgICAgICAgbm90Q29tcG9uZW50cy5wdXNoKGNvbXApO1xuICAgICAgfVxuICAgICAgaWYgKG1vZCA9PT0gXCJjaGFuZ2VkXCIpIHtcbiAgICAgICAgY2hhbmdlZENvbXBvbmVudHMucHVzaChjb21wKTtcbiAgICAgICAgY29tcG9uZW50czIucHVzaChjb21wKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCF3b3JsZFskY29tcG9uZW50TWFwXS5oYXMoYykpXG4gICAgICAgIHJlZ2lzdGVyQ29tcG9uZW50KHdvcmxkLCBjKTtcbiAgICAgIGNvbXBvbmVudHMyLnB1c2goYyk7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgbWFwQ29tcG9uZW50cyA9IChjKSA9PiB3b3JsZFskY29tcG9uZW50TWFwXS5nZXQoYyk7XG4gIGNvbnN0IGFsbENvbXBvbmVudHMgPSBjb21wb25lbnRzMi5jb25jYXQobm90Q29tcG9uZW50cykubWFwKG1hcENvbXBvbmVudHMpO1xuICBjb25zdCBzcGFyc2VTZXQgPSBTcGFyc2VTZXQoKTtcbiAgY29uc3QgYXJjaGV0eXBlcyA9IFtdO1xuICBjb25zdCBjaGFuZ2VkID0gW107XG4gIGNvbnN0IHRvUmVtb3ZlID0gU3BhcnNlU2V0KCk7XG4gIGNvbnN0IGVudGVyZWQgPSBTcGFyc2VTZXQoKTtcbiAgY29uc3QgZXhpdGVkID0gU3BhcnNlU2V0KCk7XG4gIGNvbnN0IGdlbmVyYXRpb25zID0gYWxsQ29tcG9uZW50cy5tYXAoKGMpID0+IGMuZ2VuZXJhdGlvbklkKS5yZWR1Y2UoKGEsIHYpID0+IHtcbiAgICBpZiAoYS5pbmNsdWRlcyh2KSlcbiAgICAgIHJldHVybiBhO1xuICAgIGEucHVzaCh2KTtcbiAgICByZXR1cm4gYTtcbiAgfSwgW10pO1xuICBjb25zdCByZWR1Y2VCaXRmbGFncyA9IChhLCBjKSA9PiB7XG4gICAgaWYgKCFhW2MuZ2VuZXJhdGlvbklkXSlcbiAgICAgIGFbYy5nZW5lcmF0aW9uSWRdID0gMDtcbiAgICBhW2MuZ2VuZXJhdGlvbklkXSB8PSBjLmJpdGZsYWc7XG4gICAgcmV0dXJuIGE7XG4gIH07XG4gIGNvbnN0IG1hc2tzID0gY29tcG9uZW50czIubWFwKG1hcENvbXBvbmVudHMpLnJlZHVjZShyZWR1Y2VCaXRmbGFncywge30pO1xuICBjb25zdCBub3RNYXNrcyA9IG5vdENvbXBvbmVudHMubWFwKG1hcENvbXBvbmVudHMpLnJlZHVjZShyZWR1Y2VCaXRmbGFncywge30pO1xuICBjb25zdCBoYXNNYXNrcyA9IGFsbENvbXBvbmVudHMucmVkdWNlKHJlZHVjZUJpdGZsYWdzLCB7fSk7XG4gIGNvbnN0IGZsYXRQcm9wcyA9IGNvbXBvbmVudHMyLmZpbHRlcigoYykgPT4gIWNbJHRhZ1N0b3JlXSkubWFwKChjKSA9PiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGMpLmluY2x1ZGVzKCRzdG9yZUZsYXR0ZW5lZCkgPyBjWyRzdG9yZUZsYXR0ZW5lZF0gOiBbY10pLnJlZHVjZSgoYSwgdikgPT4gYS5jb25jYXQodiksIFtdKTtcbiAgY29uc3Qgc2hhZG93cyA9IGZsYXRQcm9wcy5tYXAoKHByb3ApID0+IHtcbiAgICBjb25zdCAkID0gU3ltYm9sKCk7XG4gICAgY3JlYXRlU2hhZG93KHByb3AsICQpO1xuICAgIHJldHVybiBwcm9wWyRdO1xuICB9LCBbXSk7XG4gIGNvbnN0IHEgPSBPYmplY3QuYXNzaWduKHNwYXJzZVNldCwge1xuICAgIGFyY2hldHlwZXMsXG4gICAgY2hhbmdlZCxcbiAgICBjb21wb25lbnRzOiBjb21wb25lbnRzMixcbiAgICBub3RDb21wb25lbnRzLFxuICAgIGNoYW5nZWRDb21wb25lbnRzLFxuICAgIGFsbENvbXBvbmVudHMsXG4gICAgbWFza3MsXG4gICAgbm90TWFza3MsXG4gICAgaGFzTWFza3MsXG4gICAgZ2VuZXJhdGlvbnMsXG4gICAgZmxhdFByb3BzLFxuICAgIHRvUmVtb3ZlLFxuICAgIGVudGVyZWQsXG4gICAgZXhpdGVkLFxuICAgIHNoYWRvd3NcbiAgfSk7XG4gIHdvcmxkWyRxdWVyeU1hcF0uc2V0KHF1ZXJ5LCBxKTtcbiAgd29ybGRbJHF1ZXJpZXNdLmFkZChxKTtcbiAgYWxsQ29tcG9uZW50cy5mb3JFYWNoKChjKSA9PiB7XG4gICAgYy5xdWVyaWVzLmFkZChxKTtcbiAgfSk7XG4gIGlmIChub3RDb21wb25lbnRzLmxlbmd0aClcbiAgICB3b3JsZFskbm90UXVlcmllc10uYWRkKHEpO1xuICBmb3IgKGxldCBlaWQgPSAwOyBlaWQgPCBnZXRFbnRpdHlDdXJzb3IoKTsgZWlkKyspIHtcbiAgICBpZiAoIXdvcmxkWyRlbnRpdHlTcGFyc2VTZXRdLmhhcyhlaWQpKVxuICAgICAgY29udGludWU7XG4gICAgY29uc3QgbWF0Y2ggPSBxdWVyeUNoZWNrRW50aXR5KHdvcmxkLCBxLCBlaWQpO1xuICAgIGlmIChtYXRjaClcbiAgICAgIHF1ZXJ5QWRkRW50aXR5KHEsIGVpZCk7XG4gIH1cbn07XG52YXIgZGlmZiA9IChxLCBjbGVhckRpZmYpID0+IHtcbiAgaWYgKGNsZWFyRGlmZilcbiAgICBxLmNoYW5nZWQgPSBbXTtcbiAgY29uc3QgeyBmbGF0UHJvcHMsIHNoYWRvd3MgfSA9IHE7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcS5kZW5zZS5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGVpZCA9IHEuZGVuc2VbaV07XG4gICAgbGV0IGRpcnR5ID0gZmFsc2U7XG4gICAgZm9yIChsZXQgcGlkID0gMDsgcGlkIDwgZmxhdFByb3BzLmxlbmd0aDsgcGlkKyspIHtcbiAgICAgIGNvbnN0IHByb3AgPSBmbGF0UHJvcHNbcGlkXTtcbiAgICAgIGNvbnN0IHNoYWRvdyA9IHNoYWRvd3NbcGlkXTtcbiAgICAgIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcocHJvcFtlaWRdKSkge1xuICAgICAgICBmb3IgKGxldCBpMiA9IDA7IGkyIDwgcHJvcFtlaWRdLmxlbmd0aDsgaTIrKykge1xuICAgICAgICAgIGlmIChwcm9wW2VpZF1baTJdICE9PSBzaGFkb3dbZWlkXVtpMl0pIHtcbiAgICAgICAgICAgIGRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzaGFkb3dbZWlkXS5zZXQocHJvcFtlaWRdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChwcm9wW2VpZF0gIT09IHNoYWRvd1tlaWRdKSB7XG4gICAgICAgICAgZGlydHkgPSB0cnVlO1xuICAgICAgICAgIHNoYWRvd1tlaWRdID0gcHJvcFtlaWRdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChkaXJ0eSlcbiAgICAgIHEuY2hhbmdlZC5wdXNoKGVpZCk7XG4gIH1cbiAgcmV0dXJuIHEuY2hhbmdlZDtcbn07XG52YXIgZmxhdHRlbiA9IChhLCB2KSA9PiBhLmNvbmNhdCh2KTtcbnZhciBhZ2dyZWdhdGVDb21wb25lbnRzRm9yID0gKG1vZCkgPT4gKHgpID0+IHguZmlsdGVyKChmKSA9PiBmLm5hbWUgPT09IG1vZCgpLmNvbnN0cnVjdG9yLm5hbWUpLnJlZHVjZShmbGF0dGVuKTtcbnZhciBnZXRBbnlDb21wb25lbnRzID0gYWdncmVnYXRlQ29tcG9uZW50c0ZvcihBbnkpO1xudmFyIGdldEFsbENvbXBvbmVudHMgPSBhZ2dyZWdhdGVDb21wb25lbnRzRm9yKEFsbCk7XG52YXIgZ2V0Tm9uZUNvbXBvbmVudHMgPSBhZ2dyZWdhdGVDb21wb25lbnRzRm9yKE5vbmUpO1xudmFyIGRlZmluZVF1ZXJ5ID0gKC4uLmFyZ3MpID0+IHtcbiAgbGV0IGNvbXBvbmVudHMyO1xuICBsZXQgYW55LCBhbGwsIG5vbmU7XG4gIGlmIChBcnJheS5pc0FycmF5KGFyZ3NbMF0pKSB7XG4gICAgY29tcG9uZW50czIgPSBhcmdzWzBdO1xuICB9IGVsc2Uge1xuICB9XG4gIGlmIChjb21wb25lbnRzMiA9PT0gdm9pZCAwIHx8IGNvbXBvbmVudHMyWyRjb21wb25lbnRNYXBdICE9PSB2b2lkIDApIHtcbiAgICByZXR1cm4gKHdvcmxkKSA9PiB3b3JsZCA/IHdvcmxkWyRlbnRpdHlBcnJheV0gOiBjb21wb25lbnRzMlskZW50aXR5QXJyYXldO1xuICB9XG4gIGNvbnN0IHF1ZXJ5ID0gZnVuY3Rpb24od29ybGQsIGNsZWFyRGlmZiA9IHRydWUpIHtcbiAgICBpZiAoIXdvcmxkWyRxdWVyeU1hcF0uaGFzKHF1ZXJ5KSlcbiAgICAgIHJlZ2lzdGVyUXVlcnkod29ybGQsIHF1ZXJ5KTtcbiAgICBjb25zdCBxID0gd29ybGRbJHF1ZXJ5TWFwXS5nZXQocXVlcnkpO1xuICAgIGNvbW1pdFJlbW92YWxzKHdvcmxkKTtcbiAgICBpZiAocS5jaGFuZ2VkQ29tcG9uZW50cy5sZW5ndGgpXG4gICAgICByZXR1cm4gZGlmZihxLCBjbGVhckRpZmYpO1xuICAgIHJldHVybiBxLmRlbnNlO1xuICB9O1xuICBxdWVyeVskcXVlcnlDb21wb25lbnRzXSA9IGNvbXBvbmVudHMyO1xuICBxdWVyeVskcXVlcnlBbnldID0gYW55O1xuICBxdWVyeVskcXVlcnlBbGxdID0gYWxsO1xuICBxdWVyeVskcXVlcnlOb25lXSA9IG5vbmU7XG4gIHJldHVybiBxdWVyeTtcbn07XG52YXIgcXVlcnlDaGVja0VudGl0eSA9ICh3b3JsZCwgcSwgZWlkKSA9PiB7XG4gIGNvbnN0IHsgbWFza3MsIG5vdE1hc2tzLCBnZW5lcmF0aW9ucyB9ID0gcTtcbiAgbGV0IG9yID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBnZW5lcmF0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGdlbmVyYXRpb25JZCA9IGdlbmVyYXRpb25zW2ldO1xuICAgIGNvbnN0IHFNYXNrID0gbWFza3NbZ2VuZXJhdGlvbklkXTtcbiAgICBjb25zdCBxTm90TWFzayA9IG5vdE1hc2tzW2dlbmVyYXRpb25JZF07XG4gICAgY29uc3QgZU1hc2sgPSB3b3JsZFskZW50aXR5TWFza3NdW2dlbmVyYXRpb25JZF1bZWlkXTtcbiAgICBpZiAocU5vdE1hc2sgJiYgKGVNYXNrICYgcU5vdE1hc2spICE9PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChxTWFzayAmJiAoZU1hc2sgJiBxTWFzaykgIT09IHFNYXNrKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufTtcbnZhciBxdWVyeUFkZEVudGl0eSA9IChxLCBlaWQpID0+IHtcbiAgaWYgKHEuaGFzKGVpZCkpXG4gICAgcmV0dXJuO1xuICBxLmFkZChlaWQpO1xuICBxLmVudGVyZWQuYWRkKGVpZCk7XG59O1xudmFyIHF1ZXJ5Q29tbWl0UmVtb3ZhbHMgPSAocSkgPT4ge1xuICBmb3IgKGxldCBpID0gcS50b1JlbW92ZS5kZW5zZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGNvbnN0IGVpZCA9IHEudG9SZW1vdmUuZGVuc2VbaV07XG4gICAgcS50b1JlbW92ZS5yZW1vdmUoZWlkKTtcbiAgICBxLnJlbW92ZShlaWQpO1xuICB9XG59O1xudmFyIGNvbW1pdFJlbW92YWxzID0gKHdvcmxkKSA9PiB7XG4gIGlmICghd29ybGRbJGRpcnR5UXVlcmllc10uc2l6ZSlcbiAgICByZXR1cm47XG4gIHdvcmxkWyRkaXJ0eVF1ZXJpZXNdLmZvckVhY2gocXVlcnlDb21taXRSZW1vdmFscyk7XG4gIHdvcmxkWyRkaXJ0eVF1ZXJpZXNdLmNsZWFyKCk7XG59O1xudmFyIHF1ZXJ5UmVtb3ZlRW50aXR5ID0gKHdvcmxkLCBxLCBlaWQpID0+IHtcbiAgaWYgKCFxLmhhcyhlaWQpIHx8IHEudG9SZW1vdmUuaGFzKGVpZCkpXG4gICAgcmV0dXJuO1xuICBxLnRvUmVtb3ZlLmFkZChlaWQpO1xuICB3b3JsZFskZGlydHlRdWVyaWVzXS5hZGQocSk7XG4gIHEuZXhpdGVkLmFkZChlaWQpO1xufTtcbnZhciByZXNldENoYW5nZWRRdWVyeSA9ICh3b3JsZCwgcXVlcnkpID0+IHtcbiAgY29uc3QgcSA9IHdvcmxkWyRxdWVyeU1hcF0uZ2V0KHF1ZXJ5KTtcbiAgcS5jaGFuZ2VkID0gW107XG59O1xudmFyIHJlbW92ZVF1ZXJ5ID0gKHdvcmxkLCBxdWVyeSkgPT4ge1xuICBjb25zdCBxID0gd29ybGRbJHF1ZXJ5TWFwXS5nZXQocXVlcnkpO1xuICB3b3JsZFskcXVlcmllc10uZGVsZXRlKHEpO1xuICB3b3JsZFskcXVlcnlNYXBdLmRlbGV0ZShxdWVyeSk7XG59O1xuXG4vLyBzcmMvQ29tcG9uZW50LmpzXG52YXIgJGNvbXBvbmVudE1hcCA9IFN5bWJvbChcImNvbXBvbmVudE1hcFwiKTtcbnZhciBjb21wb25lbnRzID0gW107XG52YXIgcmVzaXplQ29tcG9uZW50cyA9IChzaXplKSA9PiB7XG4gIGNvbXBvbmVudHMuZm9yRWFjaCgoY29tcG9uZW50KSA9PiByZXNpemVTdG9yZShjb21wb25lbnQsIHNpemUpKTtcbn07XG52YXIgZGVmaW5lQ29tcG9uZW50ID0gKHNjaGVtYSkgPT4ge1xuICBjb25zdCBjb21wb25lbnQgPSBjcmVhdGVTdG9yZShzY2hlbWEsIGdldEdsb2JhbFNpemUoKSk7XG4gIGlmIChzY2hlbWEgJiYgT2JqZWN0LmtleXMoc2NoZW1hKS5sZW5ndGgpXG4gICAgY29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XG4gIHJldHVybiBjb21wb25lbnQ7XG59O1xudmFyIGluY3JlbWVudEJpdGZsYWcgPSAod29ybGQpID0+IHtcbiAgd29ybGRbJGJpdGZsYWddICo9IDI7XG4gIGlmICh3b3JsZFskYml0ZmxhZ10gPj0gMiAqKiAzMSkge1xuICAgIHdvcmxkWyRiaXRmbGFnXSA9IDE7XG4gICAgd29ybGRbJGVudGl0eU1hc2tzXS5wdXNoKG5ldyBVaW50MzJBcnJheSh3b3JsZFskc2l6ZV0pKTtcbiAgfVxufTtcbnZhciByZWdpc3RlckNvbXBvbmVudCA9ICh3b3JsZCwgY29tcG9uZW50KSA9PiB7XG4gIGlmICghY29tcG9uZW50KVxuICAgIHRocm93IG5ldyBFcnJvcihgYml0RUNTIC0gQ2Fubm90IHJlZ2lzdGVyIG51bGwgb3IgdW5kZWZpbmVkIGNvbXBvbmVudGApO1xuICBjb25zdCBxdWVyaWVzID0gbmV3IFNldCgpO1xuICBjb25zdCBub3RRdWVyaWVzID0gbmV3IFNldCgpO1xuICBjb25zdCBjaGFuZ2VkUXVlcmllcyA9IG5ldyBTZXQoKTtcbiAgd29ybGRbJHF1ZXJpZXNdLmZvckVhY2goKHEpID0+IHtcbiAgICBpZiAocS5hbGxDb21wb25lbnRzLmluY2x1ZGVzKGNvbXBvbmVudCkpIHtcbiAgICAgIHF1ZXJpZXMuYWRkKHEpO1xuICAgIH1cbiAgfSk7XG4gIHdvcmxkWyRjb21wb25lbnRNYXBdLnNldChjb21wb25lbnQsIHtcbiAgICBnZW5lcmF0aW9uSWQ6IHdvcmxkWyRlbnRpdHlNYXNrc10ubGVuZ3RoIC0gMSxcbiAgICBiaXRmbGFnOiB3b3JsZFskYml0ZmxhZ10sXG4gICAgc3RvcmU6IGNvbXBvbmVudCxcbiAgICBxdWVyaWVzLFxuICAgIG5vdFF1ZXJpZXMsXG4gICAgY2hhbmdlZFF1ZXJpZXNcbiAgfSk7XG4gIGlmIChjb21wb25lbnRbJHN0b3JlU2l6ZV0gPCBnZXRHbG9iYWxTaXplKCkpIHtcbiAgICByZXNpemVTdG9yZShjb21wb25lbnQsIGdldEdsb2JhbFNpemUoKSk7XG4gIH1cbiAgaW5jcmVtZW50Qml0ZmxhZyh3b3JsZCk7XG59O1xudmFyIHJlZ2lzdGVyQ29tcG9uZW50cyA9ICh3b3JsZCwgY29tcG9uZW50czIpID0+IHtcbiAgY29tcG9uZW50czIuZm9yRWFjaCgoYykgPT4gcmVnaXN0ZXJDb21wb25lbnQod29ybGQsIGMpKTtcbn07XG52YXIgaGFzQ29tcG9uZW50ID0gKHdvcmxkLCBjb21wb25lbnQsIGVpZCkgPT4ge1xuICBjb25zdCByZWdpc3RlcmVkQ29tcG9uZW50ID0gd29ybGRbJGNvbXBvbmVudE1hcF0uZ2V0KGNvbXBvbmVudCk7XG4gIGlmICghcmVnaXN0ZXJlZENvbXBvbmVudClcbiAgICByZXR1cm4gZmFsc2U7XG4gIGNvbnN0IHsgZ2VuZXJhdGlvbklkLCBiaXRmbGFnIH0gPSByZWdpc3RlcmVkQ29tcG9uZW50O1xuICBjb25zdCBtYXNrID0gd29ybGRbJGVudGl0eU1hc2tzXVtnZW5lcmF0aW9uSWRdW2VpZF07XG4gIHJldHVybiAobWFzayAmIGJpdGZsYWcpID09PSBiaXRmbGFnO1xufTtcbnZhciBhZGRDb21wb25lbnQgPSAod29ybGQsIGNvbXBvbmVudCwgZWlkLCByZXNldCA9IHRydWUpID0+IHtcbiAgaWYgKGVpZCA9PT0gdm9pZCAwKVxuICAgIHRocm93IG5ldyBFcnJvcihcImJpdEVDUyAtIGVudGl0eSBpcyB1bmRlZmluZWQuXCIpO1xuICBpZiAoIXdvcmxkWyRlbnRpdHlTcGFyc2VTZXRdLmhhcyhlaWQpKVxuICAgIHRocm93IG5ldyBFcnJvcihcImJpdEVDUyAtIGVudGl0eSBkb2VzIG5vdCBleGlzdCBpbiB0aGUgd29ybGQuXCIpO1xuICBpZiAoIXdvcmxkWyRjb21wb25lbnRNYXBdLmhhcyhjb21wb25lbnQpKVxuICAgIHJlZ2lzdGVyQ29tcG9uZW50KHdvcmxkLCBjb21wb25lbnQpO1xuICBpZiAoaGFzQ29tcG9uZW50KHdvcmxkLCBjb21wb25lbnQsIGVpZCkpXG4gICAgcmV0dXJuO1xuICBjb25zdCBjID0gd29ybGRbJGNvbXBvbmVudE1hcF0uZ2V0KGNvbXBvbmVudCk7XG4gIGNvbnN0IHsgZ2VuZXJhdGlvbklkLCBiaXRmbGFnLCBxdWVyaWVzLCBub3RRdWVyaWVzIH0gPSBjO1xuICB3b3JsZFskZW50aXR5TWFza3NdW2dlbmVyYXRpb25JZF1bZWlkXSB8PSBiaXRmbGFnO1xuICBxdWVyaWVzLmZvckVhY2goKHEpID0+IHtcbiAgICBpZiAocS50b1JlbW92ZS5oYXMoZWlkKSlcbiAgICAgIHEudG9SZW1vdmUucmVtb3ZlKGVpZCk7XG4gICAgY29uc3QgbWF0Y2ggPSBxdWVyeUNoZWNrRW50aXR5KHdvcmxkLCBxLCBlaWQpO1xuICAgIGlmIChtYXRjaClcbiAgICAgIHF1ZXJ5QWRkRW50aXR5KHEsIGVpZCk7XG4gICAgaWYgKCFtYXRjaClcbiAgICAgIHF1ZXJ5UmVtb3ZlRW50aXR5KHdvcmxkLCBxLCBlaWQpO1xuICB9KTtcbiAgd29ybGRbJGVudGl0eUNvbXBvbmVudHNdLmdldChlaWQpLmFkZChjb21wb25lbnQpO1xuICBpZiAocmVzZXQpXG4gICAgcmVzZXRTdG9yZUZvcihjb21wb25lbnQsIGVpZCk7XG59O1xudmFyIHJlbW92ZUNvbXBvbmVudCA9ICh3b3JsZCwgY29tcG9uZW50LCBlaWQsIHJlc2V0ID0gZmFsc2UpID0+IHtcbiAgaWYgKGVpZCA9PT0gdm9pZCAwKVxuICAgIHRocm93IG5ldyBFcnJvcihcImJpdEVDUyAtIGVudGl0eSBpcyB1bmRlZmluZWQuXCIpO1xuICBpZiAoIXdvcmxkWyRlbnRpdHlTcGFyc2VTZXRdLmhhcyhlaWQpKVxuICAgIHRocm93IG5ldyBFcnJvcihcImJpdEVDUyAtIGVudGl0eSBkb2VzIG5vdCBleGlzdCBpbiB0aGUgd29ybGQuXCIpO1xuICBpZiAoIWhhc0NvbXBvbmVudCh3b3JsZCwgY29tcG9uZW50LCBlaWQpKVxuICAgIHJldHVybjtcbiAgY29uc3QgYyA9IHdvcmxkWyRjb21wb25lbnRNYXBdLmdldChjb21wb25lbnQpO1xuICBjb25zdCB7IGdlbmVyYXRpb25JZCwgYml0ZmxhZywgcXVlcmllcyB9ID0gYztcbiAgd29ybGRbJGVudGl0eU1hc2tzXVtnZW5lcmF0aW9uSWRdW2VpZF0gJj0gfmJpdGZsYWc7XG4gIHF1ZXJpZXMuZm9yRWFjaCgocSkgPT4ge1xuICAgIGlmIChxLnRvUmVtb3ZlLmhhcyhlaWQpKVxuICAgICAgcS50b1JlbW92ZS5yZW1vdmUoZWlkKTtcbiAgICBjb25zdCBtYXRjaCA9IHF1ZXJ5Q2hlY2tFbnRpdHkod29ybGQsIHEsIGVpZCk7XG4gICAgaWYgKG1hdGNoKVxuICAgICAgcXVlcnlBZGRFbnRpdHkocSwgZWlkKTtcbiAgICBpZiAoIW1hdGNoKVxuICAgICAgcXVlcnlSZW1vdmVFbnRpdHkod29ybGQsIHEsIGVpZCk7XG4gIH0pO1xuICB3b3JsZFskZW50aXR5Q29tcG9uZW50c10uZ2V0KGVpZCkuZGVsZXRlKGNvbXBvbmVudCk7XG4gIGlmIChyZXNldClcbiAgICByZXNldFN0b3JlRm9yKGNvbXBvbmVudCwgZWlkKTtcbn07XG5cbi8vIHNyYy9Xb3JsZC5qc1xudmFyICRzaXplID0gU3ltYm9sKFwic2l6ZVwiKTtcbnZhciAkcmVzaXplVGhyZXNob2xkID0gU3ltYm9sKFwicmVzaXplVGhyZXNob2xkXCIpO1xudmFyICRiaXRmbGFnID0gU3ltYm9sKFwiYml0ZmxhZ1wiKTtcbnZhciAkYXJjaGV0eXBlcyA9IFN5bWJvbChcImFyY2hldHlwZXNcIik7XG52YXIgJGxvY2FsRW50aXRpZXMgPSBTeW1ib2woXCJsb2NhbEVudGl0aWVzXCIpO1xudmFyICRsb2NhbEVudGl0eUxvb2t1cCA9IFN5bWJvbChcImxvY2FsRW50aXR5TG9va3BcIik7XG52YXIgd29ybGRzID0gW107XG52YXIgcmVzaXplV29ybGRzID0gKHNpemUpID0+IHtcbiAgd29ybGRzLmZvckVhY2goKHdvcmxkKSA9PiB7XG4gICAgd29ybGRbJHNpemVdID0gc2l6ZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmxkWyRlbnRpdHlNYXNrc10ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG1hc2tzID0gd29ybGRbJGVudGl0eU1hc2tzXVtpXTtcbiAgICAgIHdvcmxkWyRlbnRpdHlNYXNrc11baV0gPSByZXNpemUobWFza3MsIHNpemUpO1xuICAgIH1cbiAgICB3b3JsZFskcmVzaXplVGhyZXNob2xkXSA9IHdvcmxkWyRzaXplXSAtIHdvcmxkWyRzaXplXSAvIDU7XG4gIH0pO1xufTtcbnZhciBjcmVhdGVXb3JsZCA9IChvYmogPSB7fSkgPT4ge1xuICBjb25zdCB3b3JsZCA9IG9iajtcbiAgcmVzZXRXb3JsZCh3b3JsZCk7XG4gIHdvcmxkcy5wdXNoKHdvcmxkKTtcbiAgcmV0dXJuIHdvcmxkO1xufTtcbnZhciByZXNldFdvcmxkID0gKHdvcmxkKSA9PiB7XG4gIGNvbnN0IHNpemUgPSBnZXRHbG9iYWxTaXplKCk7XG4gIHdvcmxkWyRzaXplXSA9IHNpemU7XG4gIGlmICh3b3JsZFskZW50aXR5QXJyYXldKVxuICAgIHdvcmxkWyRlbnRpdHlBcnJheV0uZm9yRWFjaCgoZWlkKSA9PiByZW1vdmVFbnRpdHkod29ybGQsIGVpZCkpO1xuICB3b3JsZFskZW50aXR5TWFza3NdID0gW25ldyBVaW50MzJBcnJheShzaXplKV07XG4gIHdvcmxkWyRlbnRpdHlDb21wb25lbnRzXSA9IG5ldyBNYXAoKTtcbiAgd29ybGRbJGFyY2hldHlwZXNdID0gW107XG4gIHdvcmxkWyRlbnRpdHlTcGFyc2VTZXRdID0gU3BhcnNlU2V0KCk7XG4gIHdvcmxkWyRlbnRpdHlBcnJheV0gPSB3b3JsZFskZW50aXR5U3BhcnNlU2V0XS5kZW5zZTtcbiAgd29ybGRbJGJpdGZsYWddID0gMTtcbiAgd29ybGRbJGNvbXBvbmVudE1hcF0gPSBuZXcgTWFwKCk7XG4gIHdvcmxkWyRxdWVyeU1hcF0gPSBuZXcgTWFwKCk7XG4gIHdvcmxkWyRxdWVyaWVzXSA9IG5ldyBTZXQoKTtcbiAgd29ybGRbJG5vdFF1ZXJpZXNdID0gbmV3IFNldCgpO1xuICB3b3JsZFskZGlydHlRdWVyaWVzXSA9IG5ldyBTZXQoKTtcbiAgd29ybGRbJGxvY2FsRW50aXRpZXNdID0gbmV3IE1hcCgpO1xuICB3b3JsZFskbG9jYWxFbnRpdHlMb29rdXBdID0gbmV3IE1hcCgpO1xuICByZXR1cm4gd29ybGQ7XG59O1xudmFyIGRlbGV0ZVdvcmxkID0gKHdvcmxkKSA9PiB7XG4gIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMod29ybGQpLmZvckVhY2goKCQpID0+IHtcbiAgICBkZWxldGUgd29ybGRbJF07XG4gIH0pO1xuICBPYmplY3Qua2V5cyh3b3JsZCkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgZGVsZXRlIHdvcmxkW2tleV07XG4gIH0pO1xuICB3b3JsZHMuc3BsaWNlKHdvcmxkcy5pbmRleE9mKHdvcmxkKSwgMSk7XG59O1xuXG4vLyBzcmMvU3lzdGVtLmpzXG52YXIgZGVmaW5lU3lzdGVtID0gKHVwZGF0ZSkgPT4gKHdvcmxkLCAuLi5hcmdzKSA9PiB7XG4gIHVwZGF0ZSh3b3JsZCwgLi4uYXJncyk7XG4gIHJldHVybiB3b3JsZDtcbn07XG5cbi8vIHNyYy9pbmRleC5qc1xudmFyIHBpcGUgPSAoLi4uZm5zKSA9PiAoaW5wdXQpID0+IHtcbiAgbGV0IHRtcCA9IGlucHV0O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGZucy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGZuID0gZm5zW2ldO1xuICAgIHRtcCA9IGZuKHRtcCk7XG4gIH1cbiAgcmV0dXJuIHRtcDtcbn07XG52YXIgVHlwZXMgPSBUWVBFU19FTlVNO1xuZXhwb3J0IHtcbiAgQ2hhbmdlZCxcbiAgREVTRVJJQUxJWkVfTU9ERSxcbiAgTm90LFxuICBUeXBlcyxcbiAgYWRkQ29tcG9uZW50LFxuICBhZGRFbnRpdHksXG4gIGNvbW1pdFJlbW92YWxzLFxuICBjcmVhdGVXb3JsZCxcbiAgZGVmaW5lQ29tcG9uZW50LFxuICBkZWZpbmVEZXNlcmlhbGl6ZXIsXG4gIGRlZmluZVF1ZXJ5LFxuICBkZWZpbmVTZXJpYWxpemVyLFxuICBkZWZpbmVTeXN0ZW0sXG4gIGRlbGV0ZVdvcmxkLFxuICBlbnRlclF1ZXJ5LFxuICBleGl0UXVlcnksXG4gIGdldEVudGl0eUNvbXBvbmVudHMsXG4gIGhhc0NvbXBvbmVudCxcbiAgcGFyZW50QXJyYXksXG4gIHBpcGUsXG4gIHJlZ2lzdGVyQ29tcG9uZW50LFxuICByZWdpc3RlckNvbXBvbmVudHMsXG4gIHJlbW92ZUNvbXBvbmVudCxcbiAgcmVtb3ZlRW50aXR5LFxuICByZW1vdmVRdWVyeSxcbiAgcmVzZXRDaGFuZ2VkUXVlcnksXG4gIHJlc2V0V29ybGQsXG4gIHNldERlZmF1bHRTaXplXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcFxuIiwiLyoqXG4gKiBUaGlzIGZpbGUgY29uc3RhaW5zIGRlY2xhcmF0aW9uIG9mIEVuZ2luZSBDbGFzcy5cbiAqXG4gKiBAYXV0aG9yIEZlcm5hbmRvIFNlcnJhbm8sIFJvYmVydCBMb25nXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqL1xuXG5pbXBvcnQgeyBQZXJzcGVjdGl2ZUNhbWVyYSwgU2NlbmUsIFdlYkdMUmVuZGVyZXIsIFhSRnJhbWUsIFhSU2Vzc2lvbiB9IGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgVHJhbnNmb3JtQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vdHJhbnNmb3JtL2NvbXBvbmVudHMvVHJhbnNmb3JtQ29tcG9uZW50J1xuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnLi9FbnRpdHknXG5pbXBvcnQgeyBJbnB1dFZhbHVlIH0gZnJvbSAnLi4vLi4vaW5wdXQvaW50ZXJmYWNlcy9JbnB1dFZhbHVlJ1xuaW1wb3J0IHsgRW5naW5lRXZlbnRzIH0gZnJvbSAnLi9FbmdpbmVFdmVudHMnXG5pbXBvcnQgeyBJbml0aWFsaXplT3B0aW9ucyB9IGZyb20gJy4uLy4uL2luaXRpYWxpemF0aW9uT3B0aW9ucydcbmltcG9ydCB7IENTTSB9IGZyb20gJy4uLy4uL2Fzc2V0cy9jc20vQ1NNJ1xuaW1wb3J0IHsgRWZmZWN0Q29tcG9zZXJXaXRoU2NoZW1hIH0gZnJvbSAnLi4vLi4vcmVuZGVyZXIvV2ViR0xSZW5kZXJlclN5c3RlbSdcbmltcG9ydCB7IE9ydGhvZ3JhcGhpY0NhbWVyYSB9IGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgV29ybGQgfSBmcm9tICcuLi9jbGFzc2VzL1dvcmxkJ1xuaW1wb3J0IHsgVXNlcklkIH0gZnJvbSAnQHhyZW5naW5lL2NvbW1vbi9zcmMvaW50ZXJmYWNlcy9Vc2VySWQnXG5pbXBvcnQgeyBnZXRFbnRpdHlDb21wb25lbnRzIH0gZnJvbSAnYml0ZWNzJ1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIGJhc2UgY2xhc3Mgd2hpY2ggaG9sZHMgYWxsIHRoZSBkYXRhIHJlbGF0ZWQgdG8gdGhlIHNjZW5lLCBjYW1lcmEsc3lzdGVtIGV0Yy5cbiAqIERhdGEgaXMgaG9sZGVkIHN0YXRpY2FsbHkgaGVuY2Ugd2lsbCBiZSBhdmFpbGFibGUgZXZlcnl3aGVyZS5cbiAqXG4gKiBAYXV0aG9yIFNoYXcsIEpvc2gsIFZ5YWNoZXNsYXYsIEdoZXJpYyBhbmQgdGhlIFhSRW5naW5lIFRlYW1cbiAqL1xuZXhwb3J0IGNsYXNzIEVuZ2luZSB7XG4gIC8qKiBUaGUgdXVpZCBvZiB0aGUgbG9nZ2VkLWluIHVzZXIgKi9cbiAgcHVibGljIHN0YXRpYyB1c2VySWQ6IFVzZXJJZFxuXG4gIHB1YmxpYyBzdGF0aWMgaW5pdE9wdGlvbnM6IEluaXRpYWxpemVPcHRpb25zXG4gIHB1YmxpYyBzdGF0aWMgZW5naW5lVGltZXI6IHsgc3RhcnQ6IEZ1bmN0aW9uOyBzdG9wOiBGdW5jdGlvbjsgY2xlYXI6IEZ1bmN0aW9uIH0gPSBudWxsIVxuXG4gIHB1YmxpYyBzdGF0aWMgeHJTdXBwb3J0ZWQgPSBmYWxzZVxuICBwdWJsaWMgc3RhdGljIGlzQm90ID0gZmFsc2VcblxuICBwdWJsaWMgc3RhdGljIG9mZmxpbmVNb2RlID0gZmFsc2VcbiAgcHVibGljIHN0YXRpYyBpc0hNRCA9IGZhbHNlXG5cbiAgLy9wdWJsaWMgc3RhdGljIHN0YXRzOiBTdGF0c1xuICAvLyBNb3ZlIGZvciBzdXJlXG4gIC8vIHB1YmxpYyBzdGF0aWMgc2t5OiBTa3k7XG5cbiAgLyoqIEluZGljYXRlcyB3aGV0aGVyIGVuZ2luZSBpcyBjdXJyZW50bHkgZXhlY3V0aW5nIG9yIG5vdC4gKi9cbiAgcHVibGljIHN0YXRpYyBpc0V4ZWN1dGluZyA9IGZhbHNlXG5cbiAgLyoqXG4gICAqIEZyYW1lIHJhdGUgZm9yIHBoeXNpY3Mgc3lzdGVtLlxuICAgKlxuICAgKiBAZGVmYXVsdCA2MFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBwaHlzaWNzRnJhbWVSYXRlID0gNjBcbiAgcHVibGljIHN0YXRpYyBwaHlzeFdvcmtlcjogV29ya2VyID0gbnVsbCFcblxuICAvKipcbiAgICogRnJhbWUgcmF0ZSBmb3IgbmV0d29yayBzeXN0ZW0uXG4gICAqXG4gICAqIEBkZWZhdWx0IDIwXG4gICAqL1xuXG4gIHB1YmxpYyBzdGF0aWMgYWNjdW11bGF0b3I6IG51bWJlclxuICBwdWJsaWMgc3RhdGljIGp1c3RFeGVjdXRlZDogYm9vbGVhblxuICBwdWJsaWMgc3RhdGljIHBhcmFtczogYW55XG4gIC8qKlxuICAgKiBAZGVmYXVsdCAxXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHRpbWVTY2FsZVRhcmdldCA9IDFcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgd29ybGRcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZGVmYXVsdFdvcmxkOiBXb3JsZCA9IG51bGwhXG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50bHkgZXhlY3V0aW5nIHdvcmxkXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGN1cnJlbnRXb3JsZDogV29ybGQgfCBudWxsID0gbnVsbFxuXG4gIC8qKlxuICAgKiBBbGwgd29ybGRzIHRoYXQgYXJlIGN1cnJlbnRseSBpbnN0YW50aWF0ZWRcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgd29ybGRzOiBXb3JsZFtdID0gW11cblxuICAvKipcbiAgICogUmVmZXJlbmNlIHRvIHRoZSB0aHJlZS5qcyByZW5kZXJlciBvYmplY3QuXG4gICAqIFRoaXMgaXMgc2V0IGluIHtAbGluayBpbml0aWFsaXplLmluaXRpYWxpemVFbmdpbmUgfCBpbml0aWFsaXplRW5naW5lKCl9LlxuICAgKi9cbiAgc3RhdGljIHJlbmRlcmVyOiBXZWJHTFJlbmRlcmVyID0gbnVsbCFcbiAgc3RhdGljIGVmZmVjdENvbXBvc2VyOiBFZmZlY3RDb21wb3NlcldpdGhTY2hlbWEgPSBudWxsIVxuICBzdGF0aWMgeHJSZW5kZXJlciA9IG51bGwhIGFzIGFueVxuICBzdGF0aWMgeHJTZXNzaW9uOiBYUlNlc3Npb24gPSBudWxsIVxuICBzdGF0aWMgY29udGV4dCA9IG51bGwhXG4gIHN0YXRpYyBjc206IENTTSA9IG51bGwhXG4gIC8qKlxuICAgKiBSZWZlcmVuY2UgdG8gdGhlIHRocmVlLmpzIHNjZW5lIG9iamVjdC5cbiAgICogVGhpcyBpcyBzZXQgaW4ge0BsaW5rIGluaXRpYWxpemUuaW5pdGlhbGl6ZUVuZ2luZSB8IGluaXRpYWxpemVFbmdpbmUoKX0uXG4gICAqL1xuICBzdGF0aWMgc2NlbmU6IFNjZW5lID0gbnVsbCFcbiAgc3RhdGljIHNjZW5lTG9hZGVkID0gZmFsc2VcblxuICAvKipcbiAgICogUmVmZXJlbmNlIHRvIHRoZSB0aHJlZS5qcyBwZXJzcGVjdGl2ZSBjYW1lcmEgb2JqZWN0LlxuICAgKiBUaGlzIGlzIHNldCBpbiB7QGxpbmsgaW5pdGlhbGl6ZS5pbml0aWFsaXplRW5naW5lIHwgaW5pdGlhbGl6ZUVuZ2luZSgpfS5cbiAgICovXG4gIHN0YXRpYyBjYW1lcmE6IFBlcnNwZWN0aXZlQ2FtZXJhIHwgT3J0aG9ncmFwaGljQ2FtZXJhID0gbnVsbCFcbiAgc3RhdGljIGFjdGl2ZUNhbWVyYUVudGl0eTogRW50aXR5XG4gIHN0YXRpYyBhY3RpdmVDYW1lcmFGb2xsb3dUYXJnZXQ6IEVudGl0eSB8IG51bGxcblxuICAvKipcbiAgICogUmVmZXJlbmNlIHRvIHRoZSBUcmFuc2Zvcm0gY29tcG9uZW50IG9mIHRoZSB0aHJlZS5qcyBjYW1lcmEgb2JqZWN0LlxuICAgKiBUaGlzIGhvbGRzIGRhdGEgcmVsYXRlZCB0byBjYW1lcmEgcG9zaXRpb24sIGFuZ2xlIGV0Yy5cbiAgICogVGhpcyBpcyBzZXQgaW4ge0BsaW5rIGluaXRpYWxpemUuaW5pdGlhbGl6ZUVuZ2luZSB8IGluaXRpYWxpemVFbmdpbmUoKX0uXG4gICAqL1xuICBzdGF0aWMgY2FtZXJhVHJhbnNmb3JtOiB0eXBlb2YgVHJhbnNmb3JtQ29tcG9uZW50XG5cbiAgLyoqXG4gICAqIFJlZmVyZW5jZSB0byB0aGUgYXVkaW9MaXN0ZW5lci5cbiAgICogVGhpcyBpcyBhIHZpcnR1YWwgbGlzdG5lciBmb3IgYWxsIHBvc2l0aW9uYWwgYW5kIG5vbi1wb3NpdGlvbmFsIGF1ZGlvLlxuICAgKi9cbiAgc3RhdGljIGF1ZGlvTGlzdGVuZXI6IGFueSA9IG51bGxcblxuICAvKipcbiAgICogQ29udHJvbHMgd2hldGhlciBlbmdpbmUgc2hvdWxkIGV4ZWN1dGUgdGhpcyBmcmFtZS5cbiAgICogRW5naW5lIGNhbiBiZSBwYXVzZWQgYnkgc2V0dGluZyBlbmFibGVkIHRvIGZhbHNlLlxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICBzdGF0aWMgZW5hYmxlZCA9IHRydWVcblxuICBzdGF0aWMgdGljayA9IDBcblxuICBzdGF0aWMgdXNlQXVkaW9TeXN0ZW0gPSBmYWxzZVxuXG4gIHN0YXRpYyBpbnB1dFN0YXRlID0gbmV3IE1hcDxhbnksIElucHV0VmFsdWU+KClcbiAgc3RhdGljIHByZXZJbnB1dFN0YXRlID0gbmV3IE1hcDxhbnksIElucHV0VmFsdWU+KClcblxuICBzdGF0aWMgaXNJbml0aWFsaXplZCA9IGZhbHNlXG5cbiAgc3RhdGljIGhhc0pvaW5lZFdvcmxkID0gZmFsc2VcblxuICBzdGF0aWMgcHVibGljUGF0aDogc3RyaW5nXG5cbiAgc3RhdGljIHdvcmtlcnMgPSBbXSBhcyBhbnlbXVxuICBzdGF0aWMgc2ltcGxlTWF0ZXJpYWxzID0gZmFsc2VcblxuICBzdGF0aWMgaGFzRW5nYWdlZCA9IGZhbHNlXG4gIHN0YXRpYyBtb3VzZUlucHV0RW5hYmxlZCA9IHRydWVcbiAgc3RhdGljIGtleWJvYXJkSW5wdXRFbmFibGVkID0gdHJ1ZVxuXG4gIHN0YXRpYyB4ckZyYW1lOiBYUkZyYW1lXG4gIHN0YXRpYyBzcGF0aWFsQXVkaW8gPSBmYWxzZVxuICBzdGF0aWMgeHJDb250cm9sbGVyTW9kZWwgPSB0cnVlXG5cbiAgc3RhdGljIGdldEVudGl0eUNvbXBvbmVudHMgPSBnZXRFbnRpdHlDb21wb25lbnRzXG59XG5cbmV4cG9ydCBjb25zdCBhd2FpdEVuZ2luZUxvYWRlZCA9ICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgaWYgKEVuZ2luZS5pc0luaXRpYWxpemVkKSByZXNvbHZlKClcbiAgICBFbmdpbmVFdmVudHMuaW5zdGFuY2UuYWRkRXZlbnRMaXN0ZW5lcihFbmdpbmVFdmVudHMuRVZFTlRTLklOSVRJQUxJWkVEX0VOR0lORSwgcmVzb2x2ZSlcbiAgfSlcbn1cblxuZXhwb3J0IGNvbnN0IGF3YWl0RW5nYWdlZCA9ICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlKSA9PiB7XG4gICAgaWYgKEVuZ2luZS5oYXNFbmdhZ2VkKSByZXNvbHZlKClcbiAgICBFbmdpbmVFdmVudHMuaW5zdGFuY2UuYWRkRXZlbnRMaXN0ZW5lcihFbmdpbmVFdmVudHMuRVZFTlRTLlVTRVJfRU5HQUdFLCByZXNvbHZlKVxuICB9KVxufVxuIiwiaW1wb3J0IHR5cGUgeyBHTFRGUGFyc2VyIH0gZnJvbSAnLi4vbG9hZGVycy9nbHRmL0dMVEZMb2FkZXInXG5cbmV4cG9ydCBjbGFzcyBHTFRGUmVtb3ZlTWF0ZXJpYWxzRXh0ZW5zaW9uIHtcbiAgbmFtZSA9ICdFWFRfcmVtb3ZlX21hdGVyaWFscydcbiAgcGFyc2VyOiBHTFRGUGFyc2VyXG4gIGNvbnN0cnVjdG9yKHBhcnNlcikge1xuICAgIHRoaXMucGFyc2VyID0gcGFyc2VyXG4gIH1cbiAgYXN5bmMgYmVmb3JlUm9vdCgpIHtcbiAgICBjb25zdCBwYXJzZXIgPSB0aGlzLnBhcnNlclxuICAgIGNvbnN0IGpzb24gPSBwYXJzZXIuanNvblxuICAgIGpzb24uaW1hZ2VzID0gW11cbiAgICBqc29uLnRleHR1cmVzID0gW11cbiAgICBqc29uLm1hdGVyaWFscyA9IFtdXG4gICAganNvbi5zYW1wbGVycyA9IFtdXG4gICAganNvbi5tZXNoZXMuZm9yRWFjaCgobWVzaCkgPT4ge1xuICAgICAgbWVzaC5wcmltaXRpdmVzLmZvckVhY2goKHByaW1pdGl2ZSkgPT4ge1xuICAgICAgICBkZWxldGUgcHJpbWl0aXZlLm1hdGVyaWFsXG4gICAgICB9KVxuICAgIH0pXG4gIH1cbiAgbG9hZEltYWdlKCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgbG9hZE1hdGVyaWFsKCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgbG9hZFRleHR1cmUoKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuIiwiLyoqXG4gKiBHUFUgSW5zdGFuY2luZyBFeHRlbnNpb25cbiAqXG4gKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvZXh0ZW5zaW9ucy8yLjAvVmVuZG9yL0VYVF9tZXNoX2dwdV9pbnN0YW5jaW5nXG4gKlxuICovXG5cbmltcG9ydCB0eXBlIHsgR0xURlBhcnNlciB9IGZyb20gJy4uL2xvYWRlcnMvZ2x0Zi9HTFRGTG9hZGVyJ1xuaW1wb3J0IHsgSW5zdGFuY2VkTWVzaCwgT2JqZWN0M0QgfSBmcm9tICd0aHJlZSdcblxuZXhwb3J0IGNsYXNzIEdMVEZJbnN0YW5jaW5nRXh0ZW5zaW9uIHtcbiAgbmFtZSA9ICdFWFRfbWVzaF9ncHVfaW5zdGFuY2luZydcbiAgcGFyc2VyOiBHTFRGUGFyc2VyXG4gIGNvbnN0cnVjdG9yKHBhcnNlcikge1xuICAgIHRoaXMucGFyc2VyID0gcGFyc2VyXG4gIH1cblxuICBjcmVhdGVOb2RlTWVzaChub2RlSW5kZXgpIHtcbiAgICBjb25zdCBqc29uID0gdGhpcy5wYXJzZXIuanNvblxuICAgIGNvbnN0IG5vZGVEZWYgPSBqc29uLm5vZGVzW25vZGVJbmRleF1cblxuICAgIGlmICghbm9kZURlZi5leHRlbnNpb25zIHx8ICFub2RlRGVmLmV4dGVuc2lvbnNbdGhpcy5uYW1lXSB8fCBub2RlRGVmLm1lc2ggPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICBjb25zdCBleHRlbnNpb25EZWYgPSBub2RlRGVmLmV4dGVuc2lvbnNbdGhpcy5uYW1lXVxuICAgIGNvbnN0IGF0dHJpYnV0ZXNEZWYgPSBleHRlbnNpb25EZWYuYXR0cmlidXRlc1xuXG4gICAgLy8gQFRPRE86IFNob3VsZCB3ZSBkaXJlY3RseSBjcmVhdGUgSW5zdGFuY2VkTWVzaCwgbm90IGZyb20gcmVndWxhciBNZXNoP1xuICAgIC8vIEBUT0RPOiBDYW4gd2Ugc3VwcG9ydCBJbnN0YW5jZWRNZXNoICsgU2tpbm5lZE1lc2g/XG4gICAgY29uc3QgcGVuZGluZyA9IFtdIGFzIGFueVxuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB7fSBhcyBhbnlcbiAgICBwZW5kaW5nLnB1c2godGhpcy5wYXJzZXIuY3JlYXRlTm9kZU1lc2gobm9kZUluZGV4KSlcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhdHRyaWJ1dGVzRGVmKSB7XG4gICAgICBwZW5kaW5nLnB1c2goXG4gICAgICAgIHRoaXMucGFyc2VyLmdldERlcGVuZGVuY3koJ2FjY2Vzc29yJywgYXR0cmlidXRlc0RlZltrZXldKS50aGVuKChhY2Nlc3NvcikgPT4ge1xuICAgICAgICAgIGF0dHJpYnV0ZXNba2V5XSA9IGFjY2Vzc29yXG4gICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXNba2V5XVxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLmFsbChwZW5kaW5nKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICBjb25zdCBtZXNoID0gcmVzdWx0c1swXSBhcyBhbnlcblxuICAgICAgLy8gQFRPRE86IEZpeCBtZS4gU3VwcG9ydCBHcm91cCAoPSBnbFRGIG11bHRpcGxlIG1lc2gucHJpbWl0aXZlcykuXG4gICAgICBpZiAoIW1lc2guaXNNZXNoKSB7XG4gICAgICAgIHJldHVybiBtZXNoXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdF8xID0gcmVzdWx0c1sxXSBhcyBhbnlcbiAgICAgIGNvbnN0IGNvdW50ID0gcmVzdWx0XzEuY291bnQgLy8gQWxsIGF0dHJpYnV0ZSBjb3VudHMgc2hvdWxkIGJlIHNhbWVcblxuICAgICAgLy8gRm9yIFdvcmtpbmdcbiAgICAgIGNvbnN0IG0gPSBtZXNoLm1hdHJpeC5jbG9uZSgpXG4gICAgICBjb25zdCBwID0gbWVzaC5wb3NpdGlvbi5jbG9uZSgpLnNldCgwLCAwLCAwKVxuICAgICAgY29uc3QgcSA9IG1lc2gucXVhdGVybmlvbi5jbG9uZSgpLnNldCgwLCAwLCAwLCAxKVxuICAgICAgY29uc3QgcyA9IG1lc2guc2NhbGUuY2xvbmUoKS5zZXQoMSwgMSwgMSlcblxuICAgICAgY29uc3QgaW5zdGFuY2VkTWVzaCA9IG5ldyBJbnN0YW5jZWRNZXNoKG1lc2guZ2VvbWV0cnksIG1lc2gubWF0ZXJpYWwsIGNvdW50KVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgIGlmIChhdHRyaWJ1dGVzLlRSQU5TTEFUSU9OKSB7XG4gICAgICAgICAgcC5mcm9tQnVmZmVyQXR0cmlidXRlKGF0dHJpYnV0ZXMuVFJBTlNMQVRJT04sIGkpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dHJpYnV0ZXMuUk9UQVRJT04pIHtcbiAgICAgICAgICBxLmZyb21CdWZmZXJBdHRyaWJ1dGUoYXR0cmlidXRlcy5ST1RBVElPTiwgaSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0cmlidXRlcy5TQ0FMRSkge1xuICAgICAgICAgIHMuZnJvbUJ1ZmZlckF0dHJpYnV0ZShhdHRyaWJ1dGVzLlNDQUxFLCBpKVxuICAgICAgICB9XG4gICAgICAgIC8vIEBUT0RPOiBTdXBwb3J0IF9JRCBhbmQgb3RoZXJzXG4gICAgICAgIGluc3RhbmNlZE1lc2guc2V0TWF0cml4QXQoaSwgbS5jb21wb3NlKHAsIHEsIHMpKVxuICAgICAgfVxuXG4gICAgICAvLyBKdXN0IGluIGNhc2VcbiAgICAgIE9iamVjdDNELnByb3RvdHlwZS5jb3B5LmNhbGwoaW5zdGFuY2VkTWVzaCwgbWVzaClcblxuICAgICAgaW5zdGFuY2VkTWVzaC5mcnVzdHVtQ3VsbGVkID0gZmFsc2VcbiAgICAgIHRoaXMucGFyc2VyLmFzc2lnbkZpbmFsTWF0ZXJpYWwoaW5zdGFuY2VkTWVzaClcbiAgICAgIHJldHVybiBpbnN0YW5jZWRNZXNoXG4gICAgfSlcbiAgfVxuXG4gIGxvYWRJbWFnZSgpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIGxvYWRNYXRlcmlhbCgpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIGxvYWRUZXh0dXJlKCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDE2IFRoZSBEcmFjbyBBdXRob3JzLlxuLy9cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vXG4vLyAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuLy9cbi8vIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbi8vIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbi8vIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuLy8gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuLy8gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4vL1xuLy8gJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgeyBGaWxlTG9hZGVyLCBCdWZmZXJHZW9tZXRyeSwgRGVmYXVsdExvYWRpbmdNYW5hZ2VyLCBGbG9hdDMyQnVmZmVyQXR0cmlidXRlLCBJbnQxNkJ1ZmZlckF0dHJpYnV0ZSwgSW50MzJCdWZmZXJBdHRyaWJ1dGUsIEludDhCdWZmZXJBdHRyaWJ1dGUsIFRyaWFuZ2xlc0RyYXdNb2RlLCBUcmlhbmdsZVN0cmlwRHJhd01vZGUsIFVpbnQxNkJ1ZmZlckF0dHJpYnV0ZSwgVWludDMyQnVmZmVyQXR0cmlidXRlLCBVaW50OEJ1ZmZlckF0dHJpYnV0ZSB9IGZyb20gXCJ0aHJlZVwiO1xuXG5sZXQgRFJBQ09fREVDT0RFUlxuXG5leHBvcnQgY29uc3QgbG9hZERSQUNPRGVjb2RlciA9IGFzeW5jICgpID0+IHtcbiAgaWYgKHR5cGVvZiBEUkFDT19ERUNPREVSID09PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnN0IHsgZGVmYXVsdDogZHJhY28zZGdsdGYgfSA9IGF3YWl0IGltcG9ydCgnZHJhY28zZGdsdGYnKTtcbiAgICBEUkFDT19ERUNPREVSID0gYXdhaXQgZHJhY28zZGdsdGYuY3JlYXRlRGVjb2Rlck1vZHVsZSgpXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE5vZGVEUkFDT0xvYWRlciB7XG4gIGNvbnN0cnVjdG9yKG1hbmFnZXIpIHtcbiAgICB0aGlzLnRpbWVMb2FkZWQgPSAwO1xuICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXIgfHwgRGVmYXVsdExvYWRpbmdNYW5hZ2VyO1xuICAgIHRoaXMubWF0ZXJpYWxzID0gbnVsbDtcbiAgICB0aGlzLnZlcmJvc2l0eSA9IDA7XG4gICAgdGhpcy5hdHRyaWJ1dGVPcHRpb25zID0ge307XG4gICAgdGhpcy5kcmF3TW9kZSA9IFRyaWFuZ2xlc0RyYXdNb2RlO1xuICAgIC8vIE5hdGl2ZSBEcmFjbyBhdHRyaWJ1dGUgdHlwZSB0byBKUyBhdHRyaWJ1dGUgdHlwZS5cbiAgICB0aGlzLm5hdGl2ZUF0dHJpYnV0ZU1hcCA9IHtcbiAgICAgICdwb3NpdGlvbic6ICdQT1NJVElPTicsXG4gICAgICAnbm9ybWFsJzogJ05PUk1BTCcsXG4gICAgICAnY29sb3InOiAnQ09MT1InLFxuICAgICAgJ3V2JzogJ1RFWF9DT09SRCdcbiAgICB9O1xuICAgIHRoaXMuZGlzcG9zZSA9ICgpID0+IHsgfVxuICB9XG5cblxuICBsb2FkKHVybCwgb25Mb2FkLCBvblByb2dyZXNzLCBvbkVycm9yKSB7XG4gICAgdmFyIHNjb3BlID0gdGhpcztcbiAgICB2YXIgbG9hZGVyID0gbmV3IEZpbGVMb2FkZXIoc2NvcGUubWFuYWdlcik7XG4gICAgbG9hZGVyLnNldFBhdGgodGhpcy5wYXRoKTtcbiAgICBsb2FkZXIuc2V0UmVzcG9uc2VUeXBlKCdhcnJheWJ1ZmZlcicpO1xuICAgIGxvYWRlci5sb2FkKHVybCwgZnVuY3Rpb24gKGJsb2IpIHtcbiAgICAgIHNjb3BlLmRlY29kZURyYWNvRmlsZShibG9iLCBvbkxvYWQpO1xuICAgIH0sIG9uUHJvZ3Jlc3MsIG9uRXJyb3IpO1xuICB9XG5cbiAgc2V0UGF0aCh2YWx1ZSkge1xuICAgIHRoaXMucGF0aCA9IHZhbHVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgc2V0VmVyYm9zaXR5KGxldmVsKSB7XG4gICAgdGhpcy52ZXJib3NpdHkgPSBsZXZlbDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiAgU2V0cyBkZXNpcmVkIG1vZGUgZm9yIGdlbmVyYXRlZCBnZW9tZXRyeSBpbmRpY2VzLlxuICAgKiAgQ2FuIGJlIGVpdGhlcjpcbiAgICogICAgICBUcmlhbmdsZXNEcmF3TW9kZVxuICAgKiAgICAgIFRyaWFuZ2xlU3RyaXBEcmF3TW9kZVxuICAgKi9cbiAgc2V0RHJhd01vZGUoZHJhd01vZGUpIHtcbiAgICB0aGlzLmRyYXdNb2RlID0gZHJhd01vZGU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2tpcHMgZGVxdWFudGl6YXRpb24gZm9yIGEgc3BlY2lmaWMgYXR0cmlidXRlLlxuICAgKiB8YXR0cmlidXRlTmFtZXwgaXMgdGhlIGpzIG5hbWUgb2YgdGhlIGdpdmVuIGF0dHJpYnV0ZSB0eXBlLlxuICAgKiBUaGUgb25seSBjdXJyZW50bHkgc3VwcG9ydGVkIHxhdHRyaWJ1dGVOYW1lfCBpcyAncG9zaXRpb24nLCBtb3JlIG1heSBiZVxuICAgKiBhZGRlZCBpbiBmdXR1cmUuXG4gICAqL1xuICBzZXRTa2lwRGVxdWFudGl6YXRpb24oYXR0cmlidXRlTmFtZSwgc2tpcCkge1xuICAgIHZhciBza2lwRGVxdWFudGl6YXRpb24gPSB0cnVlO1xuICAgIGlmICh0eXBlb2Ygc2tpcCAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICBza2lwRGVxdWFudGl6YXRpb24gPSBza2lwO1xuICAgIHRoaXMuZ2V0QXR0cmlidXRlT3B0aW9ucyhhdHRyaWJ1dGVOYW1lKS5za2lwRGVxdWFudGl6YXRpb24gPVxuICAgICAgc2tpcERlcXVhbnRpemF0aW9uO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY29tcHJlc3NlcyBhIERyYWNvIGJ1ZmZlci4gTmFtZXMgb2YgYXR0cmlidXRlcyAoZm9yIElEIGFuZCB0eXBlIG1hcHMpXG4gICAqIG11c3QgYmUgb25lIG9mIHRoZSBzdXBwb3J0ZWQganMgdHlwZXMsIGluY2x1ZGluZzogcG9zaXRpb24sIGNvbG9yLFxuICAgKiBub3JtYWwsIHV2LCB1djIsIHNraW5JbmRleCwgc2tpbldlaWdodC5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gcmF3QnVmZmVyXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAqIEBwYXJhbSB7T2JqZWN0fHVuZGVmaW5lZH0gYXR0cmlidXRlVW5pcXVlSWRNYXAgUHJvdmlkZXMgYSBwcmUtZGVmaW5lZCBJRFxuICAgKiAgICAgZm9yIGVhY2ggYXR0cmlidXRlIGluIHRoZSBnZW9tZXRyeSB0byBiZSBkZWNvZGVkLiBJZiBnaXZlbixcbiAgICogICAgIGBhdHRyaWJ1dGVUeXBlTWFwYCBpcyByZXF1aXJlZCBhbmQgYG5hdGl2ZUF0dHJpYnV0ZU1hcGAgd2lsbCBiZVxuICAgKiAgICAgaWdub3JlZC5cbiAgICogQHBhcmFtIHtPYmplY3R8dW5kZWZpbmVkfSBhdHRyaWJ1dGVUeXBlTWFwIFByb3ZpZGVzIGEgcHJlZGVmaW5lZCBkYXRhXG4gICAqICAgICB0eXBlIChhcyBhIHR5cGVkIGFycmF5IGNvbnN0cnVjdG9yKSBmb3IgZWFjaCBhdHRyaWJ1dGUgaW4gdGhlXG4gICAqICAgICBnZW9tZXRyeSB0byBiZSBkZWNvZGVkLlxuICAgKi9cbiAgZGVjb2RlRHJhY29GaWxlKHJhd0J1ZmZlciwgY2FsbGJhY2ssIGF0dHJpYnV0ZVVuaXF1ZUlkTWFwLCBhdHRyaWJ1dGVUeXBlTWFwKSB7XG4gICAgdGhpcy5kZWNvZGVEcmFjb0ZpbGVJbnRlcm5hbChyYXdCdWZmZXIsIERSQUNPX0RFQ09ERVIsIGNhbGxiYWNrLCBhdHRyaWJ1dGVVbmlxdWVJZE1hcCwgYXR0cmlidXRlVHlwZU1hcCk7XG4gIH1cblxuICBkZWNvZGVEcmFjb0ZpbGVJbnRlcm5hbChyYXdCdWZmZXIsIGRyYWNvRGVjb2RlciwgY2FsbGJhY2ssIGF0dHJpYnV0ZVVuaXF1ZUlkTWFwLCBhdHRyaWJ1dGVUeXBlTWFwKSB7XG4gICAgLypcbiAgICAgICogSGVyZSBpcyBob3cgdG8gdXNlIERyYWNvIEphdmFzY3JpcHQgZGVjb2RlciBhbmQgZ2V0IHRoZSBnZW9tZXRyeS5cbiAgICAgICovXG4gICAgdmFyIGJ1ZmZlciA9IG5ldyBkcmFjb0RlY29kZXIuRGVjb2RlckJ1ZmZlcigpO1xuICAgIGJ1ZmZlci5Jbml0KG5ldyBJbnQ4QXJyYXkocmF3QnVmZmVyKSwgcmF3QnVmZmVyLmJ5dGVMZW5ndGgpO1xuICAgIHZhciBkZWNvZGVyID0gbmV3IGRyYWNvRGVjb2Rlci5EZWNvZGVyKCk7XG5cbiAgICAvKlxuICAgICAgKiBEZXRlcm1pbmUgd2hhdCB0eXBlIGlzIHRoaXMgZmlsZTogbWVzaCBvciBwb2ludCBjbG91ZC5cbiAgICAgICovXG4gICAgdmFyIGdlb21ldHJ5VHlwZSA9IGRlY29kZXIuR2V0RW5jb2RlZEdlb21ldHJ5VHlwZShidWZmZXIpO1xuICAgIGlmIChnZW9tZXRyeVR5cGUgPT0gZHJhY29EZWNvZGVyLlRSSUFOR1VMQVJfTUVTSCkge1xuICAgICAgaWYgKHRoaXMudmVyYm9zaXR5ID4gMCkge1xuICAgICAgICBjb25zb2xlLmxvZygnTG9hZGVkIGEgbWVzaC4nKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGdlb21ldHJ5VHlwZSA9PSBkcmFjb0RlY29kZXIuUE9JTlRfQ0xPVUQpIHtcbiAgICAgIGlmICh0aGlzLnZlcmJvc2l0eSA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0xvYWRlZCBhIHBvaW50IGNsb3VkLicpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZXJyb3JNc2cgPSAnTm9kZURSQUNPTG9hZGVyOiBVbmtub3duIGdlb21ldHJ5IHR5cGUuJztcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JNc2cpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTXNnKTtcbiAgICB9XG4gICAgY2FsbGJhY2sodGhpcy5jb252ZXJ0RHJhY29HZW9tZXRyeVRvM0pTKGRyYWNvRGVjb2RlciwgZGVjb2RlcixcbiAgICAgIGdlb21ldHJ5VHlwZSwgYnVmZmVyLCBhdHRyaWJ1dGVVbmlxdWVJZE1hcCwgYXR0cmlidXRlVHlwZU1hcCkpO1xuICB9XG5cbiAgYWRkQXR0cmlidXRlVG9HZW9tZXRyeShkcmFjb0RlY29kZXIsIGRlY29kZXIsIGRyYWNvR2VvbWV0cnksXG4gICAgYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVHlwZSwgYXR0cmlidXRlLFxuICAgIGdlb21ldHJ5LCBnZW9tZXRyeUJ1ZmZlcikge1xuICAgIGlmIChhdHRyaWJ1dGUucHRyID09PSAwKSB7XG4gICAgICB2YXIgZXJyb3JNc2cgPSAnTm9kZURSQUNPTG9hZGVyOiBObyBhdHRyaWJ1dGUgJyArIGF0dHJpYnV0ZU5hbWU7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yTXNnKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1zZyk7XG4gICAgfVxuXG4gICAgdmFyIG51bUNvbXBvbmVudHMgPSBhdHRyaWJ1dGUubnVtX2NvbXBvbmVudHMoKTtcbiAgICB2YXIgbnVtUG9pbnRzID0gZHJhY29HZW9tZXRyeS5udW1fcG9pbnRzKCk7XG4gICAgdmFyIG51bVZhbHVlcyA9IG51bVBvaW50cyAqIG51bUNvbXBvbmVudHM7XG4gICAgdmFyIGF0dHJpYnV0ZURhdGE7XG4gICAgdmFyIFR5cGVkQnVmZmVyQXR0cmlidXRlO1xuXG4gICAgc3dpdGNoIChhdHRyaWJ1dGVUeXBlKSB7XG5cbiAgICAgIGNhc2UgRmxvYXQzMkFycmF5OlxuICAgICAgICBhdHRyaWJ1dGVEYXRhID0gbmV3IGRyYWNvRGVjb2Rlci5EcmFjb0Zsb2F0MzJBcnJheSgpO1xuICAgICAgICBkZWNvZGVyLkdldEF0dHJpYnV0ZUZsb2F0Rm9yQWxsUG9pbnRzKFxuICAgICAgICAgIGRyYWNvR2VvbWV0cnksIGF0dHJpYnV0ZSwgYXR0cmlidXRlRGF0YSk7XG4gICAgICAgIGdlb21ldHJ5QnVmZmVyW2F0dHJpYnV0ZU5hbWVdID0gbmV3IEZsb2F0MzJBcnJheShudW1WYWx1ZXMpO1xuICAgICAgICBUeXBlZEJ1ZmZlckF0dHJpYnV0ZSA9IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGU7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIEludDhBcnJheTpcbiAgICAgICAgYXR0cmlidXRlRGF0YSA9IG5ldyBkcmFjb0RlY29kZXIuRHJhY29JbnQ4QXJyYXkoKTtcbiAgICAgICAgZGVjb2Rlci5HZXRBdHRyaWJ1dGVJbnQ4Rm9yQWxsUG9pbnRzKFxuICAgICAgICAgIGRyYWNvR2VvbWV0cnksIGF0dHJpYnV0ZSwgYXR0cmlidXRlRGF0YSk7XG4gICAgICAgIGdlb21ldHJ5QnVmZmVyW2F0dHJpYnV0ZU5hbWVdID0gbmV3IEludDhBcnJheShudW1WYWx1ZXMpO1xuICAgICAgICBUeXBlZEJ1ZmZlckF0dHJpYnV0ZSA9IEludDhCdWZmZXJBdHRyaWJ1dGU7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIEludDE2QXJyYXk6XG4gICAgICAgIGF0dHJpYnV0ZURhdGEgPSBuZXcgZHJhY29EZWNvZGVyLkRyYWNvSW50MTZBcnJheSgpO1xuICAgICAgICBkZWNvZGVyLkdldEF0dHJpYnV0ZUludDE2Rm9yQWxsUG9pbnRzKFxuICAgICAgICAgIGRyYWNvR2VvbWV0cnksIGF0dHJpYnV0ZSwgYXR0cmlidXRlRGF0YSk7XG4gICAgICAgIGdlb21ldHJ5QnVmZmVyW2F0dHJpYnV0ZU5hbWVdID0gbmV3IEludDE2QXJyYXkobnVtVmFsdWVzKTtcbiAgICAgICAgVHlwZWRCdWZmZXJBdHRyaWJ1dGUgPSBJbnQxNkJ1ZmZlckF0dHJpYnV0ZTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgSW50MzJBcnJheTpcbiAgICAgICAgYXR0cmlidXRlRGF0YSA9IG5ldyBkcmFjb0RlY29kZXIuRHJhY29JbnQzMkFycmF5KCk7XG4gICAgICAgIGRlY29kZXIuR2V0QXR0cmlidXRlSW50MzJGb3JBbGxQb2ludHMoXG4gICAgICAgICAgZHJhY29HZW9tZXRyeSwgYXR0cmlidXRlLCBhdHRyaWJ1dGVEYXRhKTtcbiAgICAgICAgZ2VvbWV0cnlCdWZmZXJbYXR0cmlidXRlTmFtZV0gPSBuZXcgSW50MzJBcnJheShudW1WYWx1ZXMpO1xuICAgICAgICBUeXBlZEJ1ZmZlckF0dHJpYnV0ZSA9IEludDMyQnVmZmVyQXR0cmlidXRlO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBVaW50OEFycmF5OlxuICAgICAgICBhdHRyaWJ1dGVEYXRhID0gbmV3IGRyYWNvRGVjb2Rlci5EcmFjb1VJbnQ4QXJyYXkoKTtcbiAgICAgICAgZGVjb2Rlci5HZXRBdHRyaWJ1dGVVSW50OEZvckFsbFBvaW50cyhcbiAgICAgICAgICBkcmFjb0dlb21ldHJ5LCBhdHRyaWJ1dGUsIGF0dHJpYnV0ZURhdGEpO1xuICAgICAgICBnZW9tZXRyeUJ1ZmZlclthdHRyaWJ1dGVOYW1lXSA9IG5ldyBVaW50OEFycmF5KG51bVZhbHVlcyk7XG4gICAgICAgIFR5cGVkQnVmZmVyQXR0cmlidXRlID0gVWludDhCdWZmZXJBdHRyaWJ1dGU7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFVpbnQxNkFycmF5OlxuICAgICAgICBhdHRyaWJ1dGVEYXRhID0gbmV3IGRyYWNvRGVjb2Rlci5EcmFjb1VJbnQxNkFycmF5KCk7XG4gICAgICAgIGRlY29kZXIuR2V0QXR0cmlidXRlVUludDE2Rm9yQWxsUG9pbnRzKFxuICAgICAgICAgIGRyYWNvR2VvbWV0cnksIGF0dHJpYnV0ZSwgYXR0cmlidXRlRGF0YSk7XG4gICAgICAgIGdlb21ldHJ5QnVmZmVyW2F0dHJpYnV0ZU5hbWVdID0gbmV3IFVpbnQxNkFycmF5KG51bVZhbHVlcyk7XG4gICAgICAgIFR5cGVkQnVmZmVyQXR0cmlidXRlID0gVWludDE2QnVmZmVyQXR0cmlidXRlO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBVaW50MzJBcnJheTpcbiAgICAgICAgYXR0cmlidXRlRGF0YSA9IG5ldyBkcmFjb0RlY29kZXIuRHJhY29VSW50MzJBcnJheSgpO1xuICAgICAgICBkZWNvZGVyLkdldEF0dHJpYnV0ZVVJbnQzMkZvckFsbFBvaW50cyhcbiAgICAgICAgICBkcmFjb0dlb21ldHJ5LCBhdHRyaWJ1dGUsIGF0dHJpYnV0ZURhdGEpO1xuICAgICAgICBnZW9tZXRyeUJ1ZmZlclthdHRyaWJ1dGVOYW1lXSA9IG5ldyBVaW50MzJBcnJheShudW1WYWx1ZXMpO1xuICAgICAgICBUeXBlZEJ1ZmZlckF0dHJpYnV0ZSA9IFVpbnQzMkJ1ZmZlckF0dHJpYnV0ZTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHZhciBlcnJvck1zZyA9ICdOb2RlRFJBQ09Mb2FkZXI6IFVuZXhwZWN0ZWQgYXR0cmlidXRlIHR5cGUuJztcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvck1zZyk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1zZyk7XG5cbiAgICB9XG5cbiAgICAvLyBDb3B5IGRhdGEgZnJvbSBkZWNvZGVyLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtVmFsdWVzOyBpKyspIHtcbiAgICAgIGdlb21ldHJ5QnVmZmVyW2F0dHJpYnV0ZU5hbWVdW2ldID0gYXR0cmlidXRlRGF0YS5HZXRWYWx1ZShpKTtcbiAgICB9XG4gICAgLy8gQWRkIGF0dHJpYnV0ZSB0byBUSFJFRUpTIGdlb21ldHJ5IGZvciByZW5kZXJpbmcuXG4gICAgZ2VvbWV0cnkuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsXG4gICAgICBuZXcgVHlwZWRCdWZmZXJBdHRyaWJ1dGUoZ2VvbWV0cnlCdWZmZXJbYXR0cmlidXRlTmFtZV0sXG4gICAgICAgIG51bUNvbXBvbmVudHMpKTtcbiAgICBkcmFjb0RlY29kZXIuZGVzdHJveShhdHRyaWJ1dGVEYXRhKTtcbiAgfVxuXG4gIGNvbnZlcnREcmFjb0dlb21ldHJ5VG8zSlMoZHJhY29EZWNvZGVyLCBkZWNvZGVyLCBnZW9tZXRyeVR5cGUsXG4gICAgYnVmZmVyLCBhdHRyaWJ1dGVVbmlxdWVJZE1hcCxcbiAgICBhdHRyaWJ1dGVUeXBlTWFwKSB7XG4gICAgLy8gVE9ETzogU2hvdWxkIG5vdCBhc3N1bWUgbmF0aXZlIERyYWNvIGF0dHJpYnV0ZSBJRHMgYXBwbHkuXG4gICAgaWYgKHRoaXMuZ2V0QXR0cmlidXRlT3B0aW9ucygncG9zaXRpb24nKS5za2lwRGVxdWFudGl6YXRpb24gPT09IHRydWUpIHtcbiAgICAgIGRlY29kZXIuU2tpcEF0dHJpYnV0ZVRyYW5zZm9ybShkcmFjb0RlY29kZXIuUE9TSVRJT04pO1xuICAgIH1cbiAgICB2YXIgZHJhY29HZW9tZXRyeTtcbiAgICB2YXIgZGVjb2RpbmdTdGF0dXM7XG4gICAgLy8gdmFyIHN0YXJ0X3RpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBpZiAoZ2VvbWV0cnlUeXBlID09PSBkcmFjb0RlY29kZXIuVFJJQU5HVUxBUl9NRVNIKSB7XG4gICAgICBkcmFjb0dlb21ldHJ5ID0gbmV3IGRyYWNvRGVjb2Rlci5NZXNoKCk7XG4gICAgICBkZWNvZGluZ1N0YXR1cyA9IGRlY29kZXIuRGVjb2RlQnVmZmVyVG9NZXNoKGJ1ZmZlciwgZHJhY29HZW9tZXRyeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRyYWNvR2VvbWV0cnkgPSBuZXcgZHJhY29EZWNvZGVyLlBvaW50Q2xvdWQoKTtcbiAgICAgIGRlY29kaW5nU3RhdHVzID1cbiAgICAgICAgZGVjb2Rlci5EZWNvZGVCdWZmZXJUb1BvaW50Q2xvdWQoYnVmZmVyLCBkcmFjb0dlb21ldHJ5KTtcbiAgICB9XG4gICAgaWYgKCFkZWNvZGluZ1N0YXR1cy5vaygpIHx8IGRyYWNvR2VvbWV0cnkucHRyID09IDApIHtcbiAgICAgIHZhciBlcnJvck1zZyA9ICdOb2RlRFJBQ09Mb2FkZXI6IERlY29kaW5nIGZhaWxlZDogJztcbiAgICAgIGVycm9yTXNnICs9IGRlY29kaW5nU3RhdHVzLmVycm9yX21zZygpO1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvck1zZyk7XG4gICAgICBkcmFjb0RlY29kZXIuZGVzdHJveShkZWNvZGVyKTtcbiAgICAgIGRyYWNvRGVjb2Rlci5kZXN0cm95KGRyYWNvR2VvbWV0cnkpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTXNnKTtcbiAgICB9XG5cbiAgICAvLyB2YXIgZGVjb2RlX2VuZCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIGRyYWNvRGVjb2Rlci5kZXN0cm95KGJ1ZmZlcik7XG4gICAgLypcbiAgICAgICogRXhhbXBsZSBvbiBob3cgdG8gcmV0cmlldmUgbWVzaCBhbmQgYXR0cmlidXRlcy5cbiAgICAgICovXG4gICAgdmFyIG51bUZhY2VzO1xuICAgIGlmIChnZW9tZXRyeVR5cGUgPT0gZHJhY29EZWNvZGVyLlRSSUFOR1VMQVJfTUVTSCkge1xuICAgICAgbnVtRmFjZXMgPSBkcmFjb0dlb21ldHJ5Lm51bV9mYWNlcygpO1xuICAgICAgaWYgKHRoaXMudmVyYm9zaXR5ID4gMCkge1xuICAgICAgICBjb25zb2xlLmxvZygnTnVtYmVyIG9mIGZhY2VzIGxvYWRlZDogJyArIG51bUZhY2VzLnRvU3RyaW5nKCkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBudW1GYWNlcyA9IDA7XG4gICAgfVxuXG4gICAgdmFyIG51bVBvaW50cyA9IGRyYWNvR2VvbWV0cnkubnVtX3BvaW50cygpO1xuICAgIHZhciBudW1BdHRyaWJ1dGVzID0gZHJhY29HZW9tZXRyeS5udW1fYXR0cmlidXRlcygpO1xuICAgIGlmICh0aGlzLnZlcmJvc2l0eSA+IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKCdOdW1iZXIgb2YgcG9pbnRzIGxvYWRlZDogJyArIG51bVBvaW50cy50b1N0cmluZygpKTtcbiAgICAgIGNvbnNvbGUubG9nKCdOdW1iZXIgb2YgYXR0cmlidXRlcyBsb2FkZWQ6ICcgK1xuICAgICAgICBudW1BdHRyaWJ1dGVzLnRvU3RyaW5nKCkpO1xuICAgIH1cblxuICAgIC8vIFZlcmlmeSBpZiB0aGVyZSBpcyBwb3NpdGlvbiBhdHRyaWJ1dGUuXG4gICAgLy8gVE9ETzogU2hvdWxkIG5vdCBhc3N1bWUgbmF0aXZlIERyYWNvIGF0dHJpYnV0ZSBJRHMgYXBwbHkuXG4gICAgdmFyIHBvc0F0dElkID0gZGVjb2Rlci5HZXRBdHRyaWJ1dGVJZChkcmFjb0dlb21ldHJ5LFxuICAgICAgZHJhY29EZWNvZGVyLlBPU0lUSU9OKTtcbiAgICBpZiAocG9zQXR0SWQgPT0gLTEpIHtcbiAgICAgIHZhciBlcnJvck1zZyA9ICdOb2RlRFJBQ09Mb2FkZXI6IE5vIHBvc2l0aW9uIGF0dHJpYnV0ZSBmb3VuZC4nO1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvck1zZyk7XG4gICAgICBkcmFjb0RlY29kZXIuZGVzdHJveShkZWNvZGVyKTtcbiAgICAgIGRyYWNvRGVjb2Rlci5kZXN0cm95KGRyYWNvR2VvbWV0cnkpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTXNnKTtcbiAgICB9XG4gICAgdmFyIHBvc0F0dHJpYnV0ZSA9IGRlY29kZXIuR2V0QXR0cmlidXRlKGRyYWNvR2VvbWV0cnksIHBvc0F0dElkKTtcblxuICAgIC8vIFN0cnVjdHVyZSBmb3IgY29udmVydGluZyB0byBUSFJFRUpTIGdlb21ldHJ5IGxhdGVyLlxuICAgIHZhciBnZW9tZXRyeUJ1ZmZlciA9IHt9O1xuICAgIC8vIEltcG9ydCBkYXRhIHRvIFRocmVlIEpTIGdlb21ldHJ5LlxuICAgIHZhciBnZW9tZXRyeSA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpO1xuXG4gICAgLy8gRG8gbm90IHVzZSBib3RoIHRoZSBuYXRpdmUgYXR0cmlidXRlIG1hcCBhbmQgYSBwcm92aWRlZCAoZS5nLiBnbFRGKSBtYXAuXG4gICAgaWYgKGF0dHJpYnV0ZVVuaXF1ZUlkTWFwKSB7XG5cbiAgICAgIC8vIEFkZCBhdHRyaWJ1dGVzIG9mIHVzZXIgc3BlY2lmaWVkIHVuaXF1ZSBpZC4gRS5nLiBHTFRGIG1vZGVscy5cbiAgICAgIGZvciAodmFyIGF0dHJpYnV0ZU5hbWUgaW4gYXR0cmlidXRlVW5pcXVlSWRNYXApIHtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZVR5cGUgPSBhdHRyaWJ1dGVUeXBlTWFwW2F0dHJpYnV0ZU5hbWVdO1xuICAgICAgICB2YXIgYXR0cmlidXRlSWQgPSBhdHRyaWJ1dGVVbmlxdWVJZE1hcFthdHRyaWJ1dGVOYW1lXTtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IGRlY29kZXIuR2V0QXR0cmlidXRlQnlVbmlxdWVJZChkcmFjb0dlb21ldHJ5LFxuICAgICAgICAgIGF0dHJpYnV0ZUlkKTtcbiAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGVUb0dlb21ldHJ5KGRyYWNvRGVjb2RlciwgZGVjb2RlciwgZHJhY29HZW9tZXRyeSxcbiAgICAgICAgICBhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVUeXBlLCBhdHRyaWJ1dGUsIGdlb21ldHJ5LCBnZW9tZXRyeUJ1ZmZlcik7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuXG4gICAgICAvLyBBZGQgbmF0aXZlIERyYWNvIGF0dHJpYnV0ZSB0eXBlIHRvIGdlb21ldHJ5LlxuICAgICAgZm9yICh2YXIgYXR0cmlidXRlTmFtZSBpbiB0aGlzLm5hdGl2ZUF0dHJpYnV0ZU1hcCkge1xuICAgICAgICB2YXIgYXR0SWQgPSBkZWNvZGVyLkdldEF0dHJpYnV0ZUlkKGRyYWNvR2VvbWV0cnksXG4gICAgICAgICAgZHJhY29EZWNvZGVyW3RoaXMubmF0aXZlQXR0cmlidXRlTWFwW2F0dHJpYnV0ZU5hbWVdXSk7XG4gICAgICAgIGlmIChhdHRJZCAhPT0gLTEpIHtcbiAgICAgICAgICBpZiAodGhpcy52ZXJib3NpdHkgPiAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTG9hZGVkICcgKyBhdHRyaWJ1dGVOYW1lICsgJyBhdHRyaWJ1dGUuJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBhdHRyaWJ1dGUgPSBkZWNvZGVyLkdldEF0dHJpYnV0ZShkcmFjb0dlb21ldHJ5LCBhdHRJZCk7XG4gICAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGVUb0dlb21ldHJ5KGRyYWNvRGVjb2RlciwgZGVjb2RlciwgZHJhY29HZW9tZXRyeSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWUsIEZsb2F0MzJBcnJheSwgYXR0cmlidXRlLCBnZW9tZXRyeSwgZ2VvbWV0cnlCdWZmZXIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICAvLyBGb3IgbWVzaCwgd2UgbmVlZCB0byBnZW5lcmF0ZSB0aGUgZmFjZXMuXG4gICAgaWYgKGdlb21ldHJ5VHlwZSA9PSBkcmFjb0RlY29kZXIuVFJJQU5HVUxBUl9NRVNIKSB7XG4gICAgICBpZiAodGhpcy5kcmF3TW9kZSA9PT0gVHJpYW5nbGVTdHJpcERyYXdNb2RlKSB7XG4gICAgICAgIHZhciBzdHJpcHNBcnJheSA9IG5ldyBkcmFjb0RlY29kZXIuRHJhY29JbnQzMkFycmF5KCk7XG4gICAgICAgIHZhciBudW1TdHJpcHMgPSBkZWNvZGVyLkdldFRyaWFuZ2xlU3RyaXBzRnJvbU1lc2goXG4gICAgICAgICAgZHJhY29HZW9tZXRyeSwgc3RyaXBzQXJyYXkpO1xuICAgICAgICBnZW9tZXRyeUJ1ZmZlci5pbmRpY2VzID0gbmV3IFVpbnQzMkFycmF5KHN0cmlwc0FycmF5LnNpemUoKSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaXBzQXJyYXkuc2l6ZSgpOyArK2kpIHtcbiAgICAgICAgICBnZW9tZXRyeUJ1ZmZlci5pbmRpY2VzW2ldID0gc3RyaXBzQXJyYXkuR2V0VmFsdWUoaSk7XG4gICAgICAgIH1cbiAgICAgICAgZHJhY29EZWNvZGVyLmRlc3Ryb3koc3RyaXBzQXJyYXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG51bUluZGljZXMgPSBudW1GYWNlcyAqIDM7XG4gICAgICAgIGdlb21ldHJ5QnVmZmVyLmluZGljZXMgPSBuZXcgVWludDMyQXJyYXkobnVtSW5kaWNlcyk7XG4gICAgICAgIHZhciBpYSA9IG5ldyBkcmFjb0RlY29kZXIuRHJhY29JbnQzMkFycmF5KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtRmFjZXM7ICsraSkge1xuICAgICAgICAgIGRlY29kZXIuR2V0RmFjZUZyb21NZXNoKGRyYWNvR2VvbWV0cnksIGksIGlhKTtcbiAgICAgICAgICB2YXIgaW5kZXggPSBpICogMztcbiAgICAgICAgICBnZW9tZXRyeUJ1ZmZlci5pbmRpY2VzW2luZGV4XSA9IGlhLkdldFZhbHVlKDApO1xuICAgICAgICAgIGdlb21ldHJ5QnVmZmVyLmluZGljZXNbaW5kZXggKyAxXSA9IGlhLkdldFZhbHVlKDEpO1xuICAgICAgICAgIGdlb21ldHJ5QnVmZmVyLmluZGljZXNbaW5kZXggKyAyXSA9IGlhLkdldFZhbHVlKDIpO1xuICAgICAgICB9XG4gICAgICAgIGRyYWNvRGVjb2Rlci5kZXN0cm95KGlhKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBnZW9tZXRyeS5kcmF3TW9kZSA9IHRoaXMuZHJhd01vZGU7XG4gICAgaWYgKGdlb21ldHJ5VHlwZSA9PSBkcmFjb0RlY29kZXIuVFJJQU5HVUxBUl9NRVNIKSB7XG4gICAgICBnZW9tZXRyeS5zZXRJbmRleChuZXcgKGdlb21ldHJ5QnVmZmVyLmluZGljZXMubGVuZ3RoID4gNjU1MzUgP1xuICAgICAgICBVaW50MzJCdWZmZXJBdHRyaWJ1dGUgOiBVaW50MTZCdWZmZXJBdHRyaWJ1dGUpXG4gICAgICAgIChnZW9tZXRyeUJ1ZmZlci5pbmRpY2VzLCAxKSk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogU2hvdWxkIG5vdCBhc3N1bWUgbmF0aXZlIERyYWNvIGF0dHJpYnV0ZSBJRHMgYXBwbHkuXG4gICAgLy8gVE9ETzogQ2FuIG90aGVyIGF0dHJpYnV0ZSB0eXBlcyBiZSBxdWFudGl6ZWQ/XG4gICAgdmFyIHBvc1RyYW5zZm9ybSA9IG5ldyBkcmFjb0RlY29kZXIuQXR0cmlidXRlUXVhbnRpemF0aW9uVHJhbnNmb3JtKCk7XG4gICAgaWYgKHBvc1RyYW5zZm9ybS5Jbml0RnJvbUF0dHJpYnV0ZShwb3NBdHRyaWJ1dGUpKSB7XG4gICAgICAvLyBRdWFudGl6ZWQgYXR0cmlidXRlLiBTdG9yZSB0aGUgcXVhbnRpemF0aW9uIHBhcmFtZXRlcnMgaW50byB0aGVcbiAgICAgIC8vIGpzIGF0dHJpYnV0ZS5cbiAgICAgIGdlb21ldHJ5LmF0dHJpYnV0ZXNbJ3Bvc2l0aW9uJ10uaXNRdWFudGl6ZWQgPSB0cnVlO1xuICAgICAgZ2VvbWV0cnkuYXR0cmlidXRlc1sncG9zaXRpb24nXS5tYXhSYW5nZSA9IHBvc1RyYW5zZm9ybS5yYW5nZSgpO1xuICAgICAgZ2VvbWV0cnkuYXR0cmlidXRlc1sncG9zaXRpb24nXS5udW1RdWFudGl6YXRpb25CaXRzID1cbiAgICAgICAgcG9zVHJhbnNmb3JtLnF1YW50aXphdGlvbl9iaXRzKCk7XG4gICAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzWydwb3NpdGlvbiddLm1pblZhbHVlcyA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7ICsraSkge1xuICAgICAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzWydwb3NpdGlvbiddLm1pblZhbHVlc1tpXSA9XG4gICAgICAgICAgcG9zVHJhbnNmb3JtLm1pbl92YWx1ZShpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZHJhY29EZWNvZGVyLmRlc3Ryb3kocG9zVHJhbnNmb3JtKTtcbiAgICBkcmFjb0RlY29kZXIuZGVzdHJveShkZWNvZGVyKTtcbiAgICBkcmFjb0RlY29kZXIuZGVzdHJveShkcmFjb0dlb21ldHJ5KTtcblxuICAgIC8vIHRoaXMuZGVjb2RlX3RpbWUgPSBkZWNvZGVfZW5kIC0gc3RhcnRfdGltZTtcbiAgICAvLyB0aGlzLmltcG9ydF90aW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBkZWNvZGVfZW5kO1xuXG4gICAgLy8gaWYgKHRoaXMudmVyYm9zaXR5ID4gMCkge1xuICAgIC8vICAgY29uc29sZS5sb2coJ0RlY29kZSB0aW1lOiAnICsgdGhpcy5kZWNvZGVfdGltZSk7XG4gICAgLy8gICBjb25zb2xlLmxvZygnSW1wb3J0IHRpbWU6ICcgKyB0aGlzLmltcG9ydF90aW1lKTtcbiAgICAvLyB9XG4gICAgcmV0dXJuIGdlb21ldHJ5O1xuICB9XG5cbiAgaXNWZXJzaW9uU3VwcG9ydGVkKHZlcnNpb24sIGNhbGxiYWNrKSB7XG4gICAgY2FsbGJhY2soRFJBQ09fREVDT0RFUi5pc1ZlcnNpb25TdXBwb3J0ZWQodmVyc2lvbikpO1xuICB9XG5cbiAgZ2V0QXR0cmlidXRlT3B0aW9ucyhhdHRyaWJ1dGVOYW1lKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmF0dHJpYnV0ZU9wdGlvbnNbYXR0cmlidXRlTmFtZV0gPT09ICd1bmRlZmluZWQnKVxuICAgICAgdGhpcy5hdHRyaWJ1dGVPcHRpb25zW2F0dHJpYnV0ZU5hbWVdID0ge307XG4gICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlT3B0aW9uc1thdHRyaWJ1dGVOYW1lXTtcbiAgfVxufVxuIiwiaW1wb3J0IHtcblx0QnVmZmVyQXR0cmlidXRlLFxuXHRCdWZmZXJHZW9tZXRyeSxcblx0RmlsZUxvYWRlcixcblx0TG9hZGVyXG59IGZyb20gJ3RocmVlJztcblxuY29uc3QgX3Rhc2tDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5cbmNsYXNzIERSQUNPTG9hZGVyIGV4dGVuZHMgTG9hZGVyIHtcblxuXHRjb25zdHJ1Y3RvciggbWFuYWdlciApIHtcblxuXHRcdHN1cGVyKCBtYW5hZ2VyICk7XG5cblx0XHR0aGlzLmRlY29kZXJQYXRoID0gJyc7XG5cdFx0dGhpcy5kZWNvZGVyQ29uZmlnID0ge307XG5cdFx0dGhpcy5kZWNvZGVyQmluYXJ5ID0gbnVsbDtcblx0XHR0aGlzLmRlY29kZXJQZW5kaW5nID0gbnVsbDtcblxuXHRcdHRoaXMud29ya2VyTGltaXQgPSA0O1xuXHRcdHRoaXMud29ya2VyUG9vbCA9IFtdO1xuXHRcdHRoaXMud29ya2VyTmV4dFRhc2tJRCA9IDE7XG5cdFx0dGhpcy53b3JrZXJTb3VyY2VVUkwgPSAnJztcblxuXHRcdHRoaXMuZGVmYXVsdEF0dHJpYnV0ZUlEcyA9IHtcblx0XHRcdHBvc2l0aW9uOiAnUE9TSVRJT04nLFxuXHRcdFx0bm9ybWFsOiAnTk9STUFMJyxcblx0XHRcdGNvbG9yOiAnQ09MT1InLFxuXHRcdFx0dXY6ICdURVhfQ09PUkQnXG5cdFx0fTtcblx0XHR0aGlzLmRlZmF1bHRBdHRyaWJ1dGVUeXBlcyA9IHtcblx0XHRcdHBvc2l0aW9uOiAnRmxvYXQzMkFycmF5Jyxcblx0XHRcdG5vcm1hbDogJ0Zsb2F0MzJBcnJheScsXG5cdFx0XHRjb2xvcjogJ0Zsb2F0MzJBcnJheScsXG5cdFx0XHR1djogJ0Zsb2F0MzJBcnJheSdcblx0XHR9O1xuXG5cdH1cblxuXHRzZXREZWNvZGVyUGF0aCggcGF0aCApIHtcblxuXHRcdHRoaXMuZGVjb2RlclBhdGggPSBwYXRoO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fVxuXG5cdHNldERlY29kZXJDb25maWcoIGNvbmZpZyApIHtcblxuXHRcdHRoaXMuZGVjb2RlckNvbmZpZyA9IGNvbmZpZztcblxuXHRcdHJldHVybiB0aGlzO1xuXG5cdH1cblxuXHRzZXRXb3JrZXJMaW1pdCggd29ya2VyTGltaXQgKSB7XG5cblx0XHR0aGlzLndvcmtlckxpbWl0ID0gd29ya2VyTGltaXQ7XG5cblx0XHRyZXR1cm4gdGhpcztcblxuXHR9XG5cblx0bG9hZCggdXJsLCBvbkxvYWQsIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKSB7XG5cblx0XHRjb25zdCBsb2FkZXIgPSBuZXcgRmlsZUxvYWRlciggdGhpcy5tYW5hZ2VyICk7XG5cblx0XHRsb2FkZXIuc2V0UGF0aCggdGhpcy5wYXRoICk7XG5cdFx0bG9hZGVyLnNldFJlc3BvbnNlVHlwZSggJ2FycmF5YnVmZmVyJyApO1xuXHRcdGxvYWRlci5zZXRSZXF1ZXN0SGVhZGVyKCB0aGlzLnJlcXVlc3RIZWFkZXIgKTtcblx0XHRsb2FkZXIuc2V0V2l0aENyZWRlbnRpYWxzKCB0aGlzLndpdGhDcmVkZW50aWFscyApO1xuXG5cdFx0bG9hZGVyLmxvYWQoIHVybCwgKCBidWZmZXIgKSA9PiB7XG5cblx0XHRcdGNvbnN0IHRhc2tDb25maWcgPSB7XG5cdFx0XHRcdGF0dHJpYnV0ZUlEczogdGhpcy5kZWZhdWx0QXR0cmlidXRlSURzLFxuXHRcdFx0XHRhdHRyaWJ1dGVUeXBlczogdGhpcy5kZWZhdWx0QXR0cmlidXRlVHlwZXMsXG5cdFx0XHRcdHVzZVVuaXF1ZUlEczogZmFsc2Vcblx0XHRcdH07XG5cblx0XHRcdHRoaXMuZGVjb2RlR2VvbWV0cnkoIGJ1ZmZlciwgdGFza0NvbmZpZyApXG5cdFx0XHRcdC50aGVuKCBvbkxvYWQgKVxuXHRcdFx0XHQuY2F0Y2goIG9uRXJyb3IgKTtcblxuXHRcdH0sIG9uUHJvZ3Jlc3MsIG9uRXJyb3IgKTtcblxuXHR9XG5cblx0LyoqIEBkZXByZWNhdGVkIEtlcHQgZm9yIGJhY2t3YXJkLWNvbXBhdGliaWxpdHkgd2l0aCBwcmV2aW91cyBEUkFDT0xvYWRlciB2ZXJzaW9ucy4gKi9cblx0ZGVjb2RlRHJhY29GaWxlKCBidWZmZXIsIGNhbGxiYWNrLCBhdHRyaWJ1dGVJRHMsIGF0dHJpYnV0ZVR5cGVzICkge1xuXG5cdFx0Y29uc3QgdGFza0NvbmZpZyA9IHtcblx0XHRcdGF0dHJpYnV0ZUlEczogYXR0cmlidXRlSURzIHx8IHRoaXMuZGVmYXVsdEF0dHJpYnV0ZUlEcyxcblx0XHRcdGF0dHJpYnV0ZVR5cGVzOiBhdHRyaWJ1dGVUeXBlcyB8fCB0aGlzLmRlZmF1bHRBdHRyaWJ1dGVUeXBlcyxcblx0XHRcdHVzZVVuaXF1ZUlEczogISEgYXR0cmlidXRlSURzXG5cdFx0fTtcblxuXHRcdHRoaXMuZGVjb2RlR2VvbWV0cnkoIGJ1ZmZlciwgdGFza0NvbmZpZyApLnRoZW4oIGNhbGxiYWNrICk7XG5cblx0fVxuXG5cdGRlY29kZUdlb21ldHJ5KCBidWZmZXIsIHRhc2tDb25maWcgKSB7XG5cblx0XHQvLyBUT0RPOiBGb3IgYmFja3dhcmQtY29tcGF0aWJpbGl0eSwgc3VwcG9ydCAnYXR0cmlidXRlVHlwZXMnIG9iamVjdHMgY29udGFpbmluZ1xuXHRcdC8vIHJlZmVyZW5jZXMgKHJhdGhlciB0aGFuIG5hbWVzKSB0byB0eXBlZCBhcnJheSBjb25zdHJ1Y3RvcnMuIFRoZXNlIG11c3QgYmVcblx0XHQvLyBzZXJpYWxpemVkIGJlZm9yZSBzZW5kaW5nIHRoZW0gdG8gdGhlIHdvcmtlci5cblx0XHRmb3IgKCBjb25zdCBhdHRyaWJ1dGUgaW4gdGFza0NvbmZpZy5hdHRyaWJ1dGVUeXBlcyApIHtcblxuXHRcdFx0Y29uc3QgdHlwZSA9IHRhc2tDb25maWcuYXR0cmlidXRlVHlwZXNbIGF0dHJpYnV0ZSBdO1xuXG5cdFx0XHRpZiAoIHR5cGUuQllURVNfUEVSX0VMRU1FTlQgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHR0YXNrQ29uZmlnLmF0dHJpYnV0ZVR5cGVzWyBhdHRyaWJ1dGUgXSA9IHR5cGUubmFtZTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0Ly9cblxuXHRcdGNvbnN0IHRhc2tLZXkgPSBKU09OLnN0cmluZ2lmeSggdGFza0NvbmZpZyApO1xuXG5cdFx0Ly8gQ2hlY2sgZm9yIGFuIGV4aXN0aW5nIHRhc2sgdXNpbmcgdGhpcyBidWZmZXIuIEEgdHJhbnNmZXJyZWQgYnVmZmVyIGNhbm5vdCBiZSB0cmFuc2ZlcnJlZFxuXHRcdC8vIGFnYWluIGZyb20gdGhpcyB0aHJlYWQuXG5cdFx0aWYgKCBfdGFza0NhY2hlLmhhcyggYnVmZmVyICkgKSB7XG5cblx0XHRcdGNvbnN0IGNhY2hlZFRhc2sgPSBfdGFza0NhY2hlLmdldCggYnVmZmVyICk7XG5cblx0XHRcdGlmICggY2FjaGVkVGFzay5rZXkgPT09IHRhc2tLZXkgKSB7XG5cblx0XHRcdFx0cmV0dXJuIGNhY2hlZFRhc2sucHJvbWlzZTtcblxuXHRcdFx0fSBlbHNlIGlmICggYnVmZmVyLmJ5dGVMZW5ndGggPT09IDAgKSB7XG5cblx0XHRcdFx0Ly8gVGVjaG5pY2FsbHksIGl0IHdvdWxkIGJlIHBvc3NpYmxlIHRvIHdhaXQgZm9yIHRoZSBwcmV2aW91cyB0YXNrIHRvIGNvbXBsZXRlLFxuXHRcdFx0XHQvLyB0cmFuc2ZlciB0aGUgYnVmZmVyIGJhY2ssIGFuZCBkZWNvZGUgYWdhaW4gd2l0aCB0aGUgc2Vjb25kIGNvbmZpZ3VyYXRpb24uIFRoYXRcblx0XHRcdFx0Ly8gaXMgY29tcGxleCwgYW5kIEkgZG9uJ3Qga25vdyBvZiBhbnkgcmVhc29uIHRvIGRlY29kZSBhIERyYWNvIGJ1ZmZlciB0d2ljZSBpblxuXHRcdFx0XHQvLyBkaWZmZXJlbnQgd2F5cywgc28gdGhpcyBpcyBsZWZ0IHVuaW1wbGVtZW50ZWQuXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcblxuXHRcdFx0XHRcdCdUSFJFRS5EUkFDT0xvYWRlcjogVW5hYmxlIHRvIHJlLWRlY29kZSBhIGJ1ZmZlciB3aXRoIGRpZmZlcmVudCAnICtcblx0XHRcdFx0XHQnc2V0dGluZ3MuIEJ1ZmZlciBoYXMgYWxyZWFkeSBiZWVuIHRyYW5zZmVycmVkLidcblxuXHRcdFx0XHQpO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHQvL1xuXG5cdFx0bGV0IHdvcmtlcjtcblx0XHRjb25zdCB0YXNrSUQgPSB0aGlzLndvcmtlck5leHRUYXNrSUQgKys7XG5cdFx0Y29uc3QgdGFza0Nvc3QgPSBidWZmZXIuYnl0ZUxlbmd0aDtcblxuXHRcdC8vIE9idGFpbiBhIHdvcmtlciBhbmQgYXNzaWduIGEgdGFzaywgYW5kIGNvbnN0cnVjdCBhIGdlb21ldHJ5IGluc3RhbmNlXG5cdFx0Ly8gd2hlbiB0aGUgdGFzayBjb21wbGV0ZXMuXG5cdFx0Y29uc3QgZ2VvbWV0cnlQZW5kaW5nID0gdGhpcy5fZ2V0V29ya2VyKCB0YXNrSUQsIHRhc2tDb3N0IClcblx0XHRcdC50aGVuKCAoIF93b3JrZXIgKSA9PiB7XG5cblx0XHRcdFx0d29ya2VyID0gX3dvcmtlcjtcblxuXHRcdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoICggcmVzb2x2ZSwgcmVqZWN0ICkgPT4ge1xuXG5cdFx0XHRcdFx0d29ya2VyLl9jYWxsYmFja3NbIHRhc2tJRCBdID0geyByZXNvbHZlLCByZWplY3QgfTtcblxuXHRcdFx0XHRcdHdvcmtlci5wb3N0TWVzc2FnZSggeyB0eXBlOiAnZGVjb2RlJywgaWQ6IHRhc2tJRCwgdGFza0NvbmZpZywgYnVmZmVyIH0sIFsgYnVmZmVyIF0gKTtcblxuXHRcdFx0XHRcdC8vIHRoaXMuZGVidWcoKTtcblxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH0gKVxuXHRcdFx0LnRoZW4oICggbWVzc2FnZSApID0+IHRoaXMuX2NyZWF0ZUdlb21ldHJ5KCBtZXNzYWdlLmdlb21ldHJ5ICkgKTtcblxuXHRcdC8vIFJlbW92ZSB0YXNrIGZyb20gdGhlIHRhc2sgbGlzdC5cblx0XHQvLyBOb3RlOiByZXBsYWNlZCAnLmZpbmFsbHkoKScgd2l0aCAnLmNhdGNoKCkudGhlbigpJyBibG9jayAtIGlPUyAxMSBzdXBwb3J0ICgjMTk0MTYpXG5cdFx0Z2VvbWV0cnlQZW5kaW5nXG5cdFx0XHQuY2F0Y2goICgpID0+IHRydWUgKVxuXHRcdFx0LnRoZW4oICgpID0+IHtcblxuXHRcdFx0XHRpZiAoIHdvcmtlciAmJiB0YXNrSUQgKSB7XG5cblx0XHRcdFx0XHR0aGlzLl9yZWxlYXNlVGFzayggd29ya2VyLCB0YXNrSUQgKTtcblxuXHRcdFx0XHRcdC8vIHRoaXMuZGVidWcoKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gKTtcblxuXHRcdC8vIENhY2hlIHRoZSB0YXNrIHJlc3VsdC5cblx0XHRfdGFza0NhY2hlLnNldCggYnVmZmVyLCB7XG5cblx0XHRcdGtleTogdGFza0tleSxcblx0XHRcdHByb21pc2U6IGdlb21ldHJ5UGVuZGluZ1xuXG5cdFx0fSApO1xuXG5cdFx0cmV0dXJuIGdlb21ldHJ5UGVuZGluZztcblxuXHR9XG5cblx0X2NyZWF0ZUdlb21ldHJ5KCBnZW9tZXRyeURhdGEgKSB7XG5cblx0XHRjb25zdCBnZW9tZXRyeSA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpO1xuXG5cdFx0aWYgKCBnZW9tZXRyeURhdGEuaW5kZXggKSB7XG5cblx0XHRcdGdlb21ldHJ5LnNldEluZGV4KCBuZXcgQnVmZmVyQXR0cmlidXRlKCBnZW9tZXRyeURhdGEuaW5kZXguYXJyYXksIDEgKSApO1xuXG5cdFx0fVxuXG5cdFx0Zm9yICggbGV0IGkgPSAwOyBpIDwgZ2VvbWV0cnlEYXRhLmF0dHJpYnV0ZXMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHRjb25zdCBhdHRyaWJ1dGUgPSBnZW9tZXRyeURhdGEuYXR0cmlidXRlc1sgaSBdO1xuXHRcdFx0Y29uc3QgbmFtZSA9IGF0dHJpYnV0ZS5uYW1lO1xuXHRcdFx0Y29uc3QgYXJyYXkgPSBhdHRyaWJ1dGUuYXJyYXk7XG5cdFx0XHRjb25zdCBpdGVtU2l6ZSA9IGF0dHJpYnV0ZS5pdGVtU2l6ZTtcblxuXHRcdFx0Z2VvbWV0cnkuc2V0QXR0cmlidXRlKCBuYW1lLCBuZXcgQnVmZmVyQXR0cmlidXRlKCBhcnJheSwgaXRlbVNpemUgKSApO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGdlb21ldHJ5O1xuXG5cdH1cblxuXHRfbG9hZExpYnJhcnkoIHVybCwgcmVzcG9uc2VUeXBlICkge1xuXG5cdFx0Y29uc3QgbG9hZGVyID0gbmV3IEZpbGVMb2FkZXIoIHRoaXMubWFuYWdlciApO1xuXHRcdGxvYWRlci5zZXRQYXRoKCB0aGlzLmRlY29kZXJQYXRoICk7XG5cdFx0bG9hZGVyLnNldFJlc3BvbnNlVHlwZSggcmVzcG9uc2VUeXBlICk7XG5cdFx0bG9hZGVyLnNldFdpdGhDcmVkZW50aWFscyggdGhpcy53aXRoQ3JlZGVudGlhbHMgKTtcblxuXHRcdHJldHVybiBuZXcgUHJvbWlzZSggKCByZXNvbHZlLCByZWplY3QgKSA9PiB7XG5cblx0XHRcdGxvYWRlci5sb2FkKCB1cmwsIHJlc29sdmUsIHVuZGVmaW5lZCwgcmVqZWN0ICk7XG5cblx0XHR9ICk7XG5cblx0fVxuXG5cdHByZWxvYWQoKSB7XG5cblx0XHR0aGlzLl9pbml0RGVjb2RlcigpO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fVxuXG5cdF9pbml0RGVjb2RlcigpIHtcblxuXHRcdGlmICggdGhpcy5kZWNvZGVyUGVuZGluZyApIHJldHVybiB0aGlzLmRlY29kZXJQZW5kaW5nO1xuXG5cdFx0Y29uc3QgdXNlSlMgPSB0eXBlb2YgV2ViQXNzZW1ibHkgIT09ICdvYmplY3QnIHx8IHRoaXMuZGVjb2RlckNvbmZpZy50eXBlID09PSAnanMnO1xuXHRcdGNvbnN0IGxpYnJhcmllc1BlbmRpbmcgPSBbXTtcblxuXHRcdGlmICggdXNlSlMgKSB7XG5cblx0XHRcdGxpYnJhcmllc1BlbmRpbmcucHVzaCggdGhpcy5fbG9hZExpYnJhcnkoICdkcmFjb19kZWNvZGVyLmpzJywgJ3RleHQnICkgKTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdGxpYnJhcmllc1BlbmRpbmcucHVzaCggdGhpcy5fbG9hZExpYnJhcnkoICdkcmFjb193YXNtX3dyYXBwZXIuanMnLCAndGV4dCcgKSApO1xuXHRcdFx0bGlicmFyaWVzUGVuZGluZy5wdXNoKCB0aGlzLl9sb2FkTGlicmFyeSggJ2RyYWNvX2RlY29kZXIud2FzbScsICdhcnJheWJ1ZmZlcicgKSApO1xuXG5cdFx0fVxuXG5cdFx0dGhpcy5kZWNvZGVyUGVuZGluZyA9IFByb21pc2UuYWxsKCBsaWJyYXJpZXNQZW5kaW5nIClcblx0XHRcdC50aGVuKCAoIGxpYnJhcmllcyApID0+IHtcblxuXHRcdFx0XHRjb25zdCBqc0NvbnRlbnQgPSBsaWJyYXJpZXNbIDAgXTtcblxuXHRcdFx0XHRpZiAoICEgdXNlSlMgKSB7XG5cblx0XHRcdFx0XHR0aGlzLmRlY29kZXJDb25maWcud2FzbUJpbmFyeSA9IGxpYnJhcmllc1sgMSBdO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBmbiA9IERSQUNPV29ya2VyLnRvU3RyaW5nKCk7XG5cblx0XHRcdFx0Y29uc3QgYm9keSA9IFtcblx0XHRcdFx0XHQnLyogZHJhY28gZGVjb2RlciAqLycsXG5cdFx0XHRcdFx0anNDb250ZW50LFxuXHRcdFx0XHRcdCcnLFxuXHRcdFx0XHRcdCcvKiB3b3JrZXIgKi8nLFxuXHRcdFx0XHRcdGZuLnN1YnN0cmluZyggZm4uaW5kZXhPZiggJ3snICkgKyAxLCBmbi5sYXN0SW5kZXhPZiggJ30nICkgKVxuXHRcdFx0XHRdLmpvaW4oICdcXG4nICk7XG5cblx0XHRcdFx0dGhpcy53b3JrZXJTb3VyY2VVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKCBuZXcgQmxvYiggWyBib2R5IF0gKSApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHRyZXR1cm4gdGhpcy5kZWNvZGVyUGVuZGluZztcblxuXHR9XG5cblx0X2dldFdvcmtlciggdGFza0lELCB0YXNrQ29zdCApIHtcblxuXHRcdHJldHVybiB0aGlzLl9pbml0RGVjb2RlcigpLnRoZW4oICgpID0+IHtcblxuXHRcdFx0aWYgKCB0aGlzLndvcmtlclBvb2wubGVuZ3RoIDwgdGhpcy53b3JrZXJMaW1pdCApIHtcblxuXHRcdFx0XHRjb25zdCB3b3JrZXIgPSBuZXcgV29ya2VyKCB0aGlzLndvcmtlclNvdXJjZVVSTCApO1xuXG5cdFx0XHRcdHdvcmtlci5fY2FsbGJhY2tzID0ge307XG5cdFx0XHRcdHdvcmtlci5fdGFza0Nvc3RzID0ge307XG5cdFx0XHRcdHdvcmtlci5fdGFza0xvYWQgPSAwO1xuXG5cdFx0XHRcdHdvcmtlci5wb3N0TWVzc2FnZSggeyB0eXBlOiAnaW5pdCcsIGRlY29kZXJDb25maWc6IHRoaXMuZGVjb2RlckNvbmZpZyB9ICk7XG5cblx0XHRcdFx0d29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uICggZSApIHtcblxuXHRcdFx0XHRcdGNvbnN0IG1lc3NhZ2UgPSBlLmRhdGE7XG5cblx0XHRcdFx0XHRzd2l0Y2ggKCBtZXNzYWdlLnR5cGUgKSB7XG5cblx0XHRcdFx0XHRcdGNhc2UgJ2RlY29kZSc6XG5cdFx0XHRcdFx0XHRcdHdvcmtlci5fY2FsbGJhY2tzWyBtZXNzYWdlLmlkIF0ucmVzb2x2ZSggbWVzc2FnZSApO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSAnZXJyb3InOlxuXHRcdFx0XHRcdFx0XHR3b3JrZXIuX2NhbGxiYWNrc1sgbWVzc2FnZS5pZCBdLnJlamVjdCggbWVzc2FnZSApO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvciggJ1RIUkVFLkRSQUNPTG9hZGVyOiBVbmV4cGVjdGVkIG1lc3NhZ2UsIFwiJyArIG1lc3NhZ2UudHlwZSArICdcIicgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdHRoaXMud29ya2VyUG9vbC5wdXNoKCB3b3JrZXIgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHR0aGlzLndvcmtlclBvb2wuc29ydCggZnVuY3Rpb24gKCBhLCBiICkge1xuXG5cdFx0XHRcdFx0cmV0dXJuIGEuX3Rhc2tMb2FkID4gYi5fdGFza0xvYWQgPyAtIDEgOiAxO1xuXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCB3b3JrZXIgPSB0aGlzLndvcmtlclBvb2xbIHRoaXMud29ya2VyUG9vbC5sZW5ndGggLSAxIF07XG5cdFx0XHR3b3JrZXIuX3Rhc2tDb3N0c1sgdGFza0lEIF0gPSB0YXNrQ29zdDtcblx0XHRcdHdvcmtlci5fdGFza0xvYWQgKz0gdGFza0Nvc3Q7XG5cdFx0XHRyZXR1cm4gd29ya2VyO1xuXG5cdFx0fSApO1xuXG5cdH1cblxuXHRfcmVsZWFzZVRhc2soIHdvcmtlciwgdGFza0lEICkge1xuXG5cdFx0d29ya2VyLl90YXNrTG9hZCAtPSB3b3JrZXIuX3Rhc2tDb3N0c1sgdGFza0lEIF07XG5cdFx0ZGVsZXRlIHdvcmtlci5fY2FsbGJhY2tzWyB0YXNrSUQgXTtcblx0XHRkZWxldGUgd29ya2VyLl90YXNrQ29zdHNbIHRhc2tJRCBdO1xuXG5cdH1cblxuXHRkZWJ1ZygpIHtcblxuXHRcdGNvbnNvbGUubG9nKCAnVGFzayBsb2FkOiAnLCB0aGlzLndvcmtlclBvb2wubWFwKCAoIHdvcmtlciApID0+IHdvcmtlci5fdGFza0xvYWQgKSApO1xuXG5cdH1cblxuXHRkaXNwb3NlKCkge1xuXG5cdFx0Zm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy53b3JrZXJQb29sLmxlbmd0aDsgKysgaSApIHtcblxuXHRcdFx0dGhpcy53b3JrZXJQb29sWyBpIF0udGVybWluYXRlKCk7XG5cblx0XHR9XG5cblx0XHR0aGlzLndvcmtlclBvb2wubGVuZ3RoID0gMDtcblxuXHRcdHJldHVybiB0aGlzO1xuXG5cdH1cblxufVxuXG4vKiBXRUIgV09SS0VSICovXG5cbmZ1bmN0aW9uIERSQUNPV29ya2VyKCkge1xuXG5cdGxldCBkZWNvZGVyQ29uZmlnO1xuXHRsZXQgZGVjb2RlclBlbmRpbmc7XG5cblx0b25tZXNzYWdlID0gZnVuY3Rpb24gKCBlICkge1xuXG5cdFx0Y29uc3QgbWVzc2FnZSA9IGUuZGF0YTtcblxuXHRcdHN3aXRjaCAoIG1lc3NhZ2UudHlwZSApIHtcblxuXHRcdFx0Y2FzZSAnaW5pdCc6XG5cdFx0XHRcdGRlY29kZXJDb25maWcgPSBtZXNzYWdlLmRlY29kZXJDb25maWc7XG5cdFx0XHRcdGRlY29kZXJQZW5kaW5nID0gbmV3IFByb21pc2UoIGZ1bmN0aW9uICggcmVzb2x2ZS8qLCByZWplY3QqLyApIHtcblxuXHRcdFx0XHRcdGRlY29kZXJDb25maWcub25Nb2R1bGVMb2FkZWQgPSBmdW5jdGlvbiAoIGRyYWNvICkge1xuXG5cdFx0XHRcdFx0XHQvLyBNb2R1bGUgaXMgUHJvbWlzZS1saWtlLiBXcmFwIGJlZm9yZSByZXNvbHZpbmcgdG8gYXZvaWQgbG9vcC5cblx0XHRcdFx0XHRcdHJlc29sdmUoIHsgZHJhY286IGRyYWNvIH0gKTtcblxuXHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHREcmFjb0RlY29kZXJNb2R1bGUoIGRlY29kZXJDb25maWcgKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuXG5cdFx0XHRcdH0gKTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgJ2RlY29kZSc6XG5cdFx0XHRcdGNvbnN0IGJ1ZmZlciA9IG1lc3NhZ2UuYnVmZmVyO1xuXHRcdFx0XHRjb25zdCB0YXNrQ29uZmlnID0gbWVzc2FnZS50YXNrQ29uZmlnO1xuXHRcdFx0XHRkZWNvZGVyUGVuZGluZy50aGVuKCAoIG1vZHVsZSApID0+IHtcblxuXHRcdFx0XHRcdGNvbnN0IGRyYWNvID0gbW9kdWxlLmRyYWNvO1xuXHRcdFx0XHRcdGNvbnN0IGRlY29kZXIgPSBuZXcgZHJhY28uRGVjb2RlcigpO1xuXHRcdFx0XHRcdGNvbnN0IGRlY29kZXJCdWZmZXIgPSBuZXcgZHJhY28uRGVjb2RlckJ1ZmZlcigpO1xuXHRcdFx0XHRcdGRlY29kZXJCdWZmZXIuSW5pdCggbmV3IEludDhBcnJheSggYnVmZmVyICksIGJ1ZmZlci5ieXRlTGVuZ3RoICk7XG5cblx0XHRcdFx0XHR0cnkge1xuXG5cdFx0XHRcdFx0XHRjb25zdCBnZW9tZXRyeSA9IGRlY29kZUdlb21ldHJ5KCBkcmFjbywgZGVjb2RlciwgZGVjb2RlckJ1ZmZlciwgdGFza0NvbmZpZyApO1xuXG5cdFx0XHRcdFx0XHRjb25zdCBidWZmZXJzID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5tYXAoICggYXR0ciApID0+IGF0dHIuYXJyYXkuYnVmZmVyICk7XG5cblx0XHRcdFx0XHRcdGlmICggZ2VvbWV0cnkuaW5kZXggKSBidWZmZXJzLnB1c2goIGdlb21ldHJ5LmluZGV4LmFycmF5LmJ1ZmZlciApO1xuXG5cdFx0XHRcdFx0XHRzZWxmLnBvc3RNZXNzYWdlKCB7IHR5cGU6ICdkZWNvZGUnLCBpZDogbWVzc2FnZS5pZCwgZ2VvbWV0cnkgfSwgYnVmZmVycyApO1xuXG5cdFx0XHRcdFx0fSBjYXRjaCAoIGVycm9yICkge1xuXG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCBlcnJvciApO1xuXG5cdFx0XHRcdFx0XHRzZWxmLnBvc3RNZXNzYWdlKCB7IHR5cGU6ICdlcnJvcicsIGlkOiBtZXNzYWdlLmlkLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9ICk7XG5cblx0XHRcdFx0XHR9IGZpbmFsbHkge1xuXG5cdFx0XHRcdFx0XHRkcmFjby5kZXN0cm95KCBkZWNvZGVyQnVmZmVyICk7XG5cdFx0XHRcdFx0XHRkcmFjby5kZXN0cm95KCBkZWNvZGVyICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSApO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdH1cblxuXHR9O1xuXG5cdGZ1bmN0aW9uIGRlY29kZUdlb21ldHJ5KCBkcmFjbywgZGVjb2RlciwgZGVjb2RlckJ1ZmZlciwgdGFza0NvbmZpZyApIHtcblxuXHRcdGNvbnN0IGF0dHJpYnV0ZUlEcyA9IHRhc2tDb25maWcuYXR0cmlidXRlSURzO1xuXHRcdGNvbnN0IGF0dHJpYnV0ZVR5cGVzID0gdGFza0NvbmZpZy5hdHRyaWJ1dGVUeXBlcztcblxuXHRcdGxldCBkcmFjb0dlb21ldHJ5O1xuXHRcdGxldCBkZWNvZGluZ1N0YXR1cztcblxuXHRcdGNvbnN0IGdlb21ldHJ5VHlwZSA9IGRlY29kZXIuR2V0RW5jb2RlZEdlb21ldHJ5VHlwZSggZGVjb2RlckJ1ZmZlciApO1xuXG5cdFx0aWYgKCBnZW9tZXRyeVR5cGUgPT09IGRyYWNvLlRSSUFOR1VMQVJfTUVTSCApIHtcblxuXHRcdFx0ZHJhY29HZW9tZXRyeSA9IG5ldyBkcmFjby5NZXNoKCk7XG5cdFx0XHRkZWNvZGluZ1N0YXR1cyA9IGRlY29kZXIuRGVjb2RlQnVmZmVyVG9NZXNoKCBkZWNvZGVyQnVmZmVyLCBkcmFjb0dlb21ldHJ5ICk7XG5cblx0XHR9IGVsc2UgaWYgKCBnZW9tZXRyeVR5cGUgPT09IGRyYWNvLlBPSU5UX0NMT1VEICkge1xuXG5cdFx0XHRkcmFjb0dlb21ldHJ5ID0gbmV3IGRyYWNvLlBvaW50Q2xvdWQoKTtcblx0XHRcdGRlY29kaW5nU3RhdHVzID0gZGVjb2Rlci5EZWNvZGVCdWZmZXJUb1BvaW50Q2xvdWQoIGRlY29kZXJCdWZmZXIsIGRyYWNvR2VvbWV0cnkgKTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkRSQUNPTG9hZGVyOiBVbmV4cGVjdGVkIGdlb21ldHJ5IHR5cGUuJyApO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCAhIGRlY29kaW5nU3RhdHVzLm9rKCkgfHwgZHJhY29HZW9tZXRyeS5wdHIgPT09IDAgKSB7XG5cblx0XHRcdHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkRSQUNPTG9hZGVyOiBEZWNvZGluZyBmYWlsZWQ6ICcgKyBkZWNvZGluZ1N0YXR1cy5lcnJvcl9tc2coKSApO1xuXG5cdFx0fVxuXG5cdFx0Y29uc3QgZ2VvbWV0cnkgPSB7IGluZGV4OiBudWxsLCBhdHRyaWJ1dGVzOiBbXSB9O1xuXG5cdFx0Ly8gR2F0aGVyIGFsbCB2ZXJ0ZXggYXR0cmlidXRlcy5cblx0XHRmb3IgKCBjb25zdCBhdHRyaWJ1dGVOYW1lIGluIGF0dHJpYnV0ZUlEcyApIHtcblxuXHRcdFx0Y29uc3QgYXR0cmlidXRlVHlwZSA9IHNlbGZbIGF0dHJpYnV0ZVR5cGVzWyBhdHRyaWJ1dGVOYW1lIF0gXTtcblxuXHRcdFx0bGV0IGF0dHJpYnV0ZTtcblx0XHRcdGxldCBhdHRyaWJ1dGVJRDtcblxuXHRcdFx0Ly8gQSBEcmFjbyBmaWxlIG1heSBiZSBjcmVhdGVkIHdpdGggZGVmYXVsdCB2ZXJ0ZXggYXR0cmlidXRlcywgd2hvc2UgYXR0cmlidXRlIElEc1xuXHRcdFx0Ly8gYXJlIG1hcHBlZCAxOjEgZnJvbSB0aGVpciBzZW1hbnRpYyBuYW1lIChQT1NJVElPTiwgTk9STUFMLCAuLi4pLiBBbHRlcm5hdGl2ZWx5LFxuXHRcdFx0Ly8gYSBEcmFjbyBmaWxlIG1heSBjb250YWluIGEgY3VzdG9tIHNldCBvZiBhdHRyaWJ1dGVzLCBpZGVudGlmaWVkIGJ5IGtub3duIHVuaXF1ZVxuXHRcdFx0Ly8gSURzLiBnbFRGIGZpbGVzIGFsd2F5cyBkbyB0aGUgbGF0dGVyLCBhbmQgYC5kcmNgIGZpbGVzIHR5cGljYWxseSBkbyB0aGUgZm9ybWVyLlxuXHRcdFx0aWYgKCB0YXNrQ29uZmlnLnVzZVVuaXF1ZUlEcyApIHtcblxuXHRcdFx0XHRhdHRyaWJ1dGVJRCA9IGF0dHJpYnV0ZUlEc1sgYXR0cmlidXRlTmFtZSBdO1xuXHRcdFx0XHRhdHRyaWJ1dGUgPSBkZWNvZGVyLkdldEF0dHJpYnV0ZUJ5VW5pcXVlSWQoIGRyYWNvR2VvbWV0cnksIGF0dHJpYnV0ZUlEICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0YXR0cmlidXRlSUQgPSBkZWNvZGVyLkdldEF0dHJpYnV0ZUlkKCBkcmFjb0dlb21ldHJ5LCBkcmFjb1sgYXR0cmlidXRlSURzWyBhdHRyaWJ1dGVOYW1lIF0gXSApO1xuXG5cdFx0XHRcdGlmICggYXR0cmlidXRlSUQgPT09IC0gMSApIGNvbnRpbnVlO1xuXG5cdFx0XHRcdGF0dHJpYnV0ZSA9IGRlY29kZXIuR2V0QXR0cmlidXRlKCBkcmFjb0dlb21ldHJ5LCBhdHRyaWJ1dGVJRCApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGdlb21ldHJ5LmF0dHJpYnV0ZXMucHVzaCggZGVjb2RlQXR0cmlidXRlKCBkcmFjbywgZGVjb2RlciwgZHJhY29HZW9tZXRyeSwgYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVHlwZSwgYXR0cmlidXRlICkgKTtcblxuXHRcdH1cblxuXHRcdC8vIEFkZCBpbmRleC5cblx0XHRpZiAoIGdlb21ldHJ5VHlwZSA9PT0gZHJhY28uVFJJQU5HVUxBUl9NRVNIICkge1xuXG5cdFx0XHRnZW9tZXRyeS5pbmRleCA9IGRlY29kZUluZGV4KCBkcmFjbywgZGVjb2RlciwgZHJhY29HZW9tZXRyeSApO1xuXG5cdFx0fVxuXG5cdFx0ZHJhY28uZGVzdHJveSggZHJhY29HZW9tZXRyeSApO1xuXG5cdFx0cmV0dXJuIGdlb21ldHJ5O1xuXG5cdH1cblxuXHRmdW5jdGlvbiBkZWNvZGVJbmRleCggZHJhY28sIGRlY29kZXIsIGRyYWNvR2VvbWV0cnkgKSB7XG5cblx0XHRjb25zdCBudW1GYWNlcyA9IGRyYWNvR2VvbWV0cnkubnVtX2ZhY2VzKCk7XG5cdFx0Y29uc3QgbnVtSW5kaWNlcyA9IG51bUZhY2VzICogMztcblx0XHRjb25zdCBieXRlTGVuZ3RoID0gbnVtSW5kaWNlcyAqIDQ7XG5cblx0XHRjb25zdCBwdHIgPSBkcmFjby5fbWFsbG9jKCBieXRlTGVuZ3RoICk7XG5cdFx0ZGVjb2Rlci5HZXRUcmlhbmdsZXNVSW50MzJBcnJheSggZHJhY29HZW9tZXRyeSwgYnl0ZUxlbmd0aCwgcHRyICk7XG5cdFx0Y29uc3QgaW5kZXggPSBuZXcgVWludDMyQXJyYXkoIGRyYWNvLkhFQVBGMzIuYnVmZmVyLCBwdHIsIG51bUluZGljZXMgKS5zbGljZSgpO1xuXHRcdGRyYWNvLl9mcmVlKCBwdHIgKTtcblxuXHRcdHJldHVybiB7IGFycmF5OiBpbmRleCwgaXRlbVNpemU6IDEgfTtcblxuXHR9XG5cblx0ZnVuY3Rpb24gZGVjb2RlQXR0cmlidXRlKCBkcmFjbywgZGVjb2RlciwgZHJhY29HZW9tZXRyeSwgYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVHlwZSwgYXR0cmlidXRlICkge1xuXG5cdFx0Y29uc3QgbnVtQ29tcG9uZW50cyA9IGF0dHJpYnV0ZS5udW1fY29tcG9uZW50cygpO1xuXHRcdGNvbnN0IG51bVBvaW50cyA9IGRyYWNvR2VvbWV0cnkubnVtX3BvaW50cygpO1xuXHRcdGNvbnN0IG51bVZhbHVlcyA9IG51bVBvaW50cyAqIG51bUNvbXBvbmVudHM7XG5cdFx0Y29uc3QgYnl0ZUxlbmd0aCA9IG51bVZhbHVlcyAqIGF0dHJpYnV0ZVR5cGUuQllURVNfUEVSX0VMRU1FTlQ7XG5cdFx0Y29uc3QgZGF0YVR5cGUgPSBnZXREcmFjb0RhdGFUeXBlKCBkcmFjbywgYXR0cmlidXRlVHlwZSApO1xuXG5cdFx0Y29uc3QgcHRyID0gZHJhY28uX21hbGxvYyggYnl0ZUxlbmd0aCApO1xuXHRcdGRlY29kZXIuR2V0QXR0cmlidXRlRGF0YUFycmF5Rm9yQWxsUG9pbnRzKCBkcmFjb0dlb21ldHJ5LCBhdHRyaWJ1dGUsIGRhdGFUeXBlLCBieXRlTGVuZ3RoLCBwdHIgKTtcblx0XHRjb25zdCBhcnJheSA9IG5ldyBhdHRyaWJ1dGVUeXBlKCBkcmFjby5IRUFQRjMyLmJ1ZmZlciwgcHRyLCBudW1WYWx1ZXMgKS5zbGljZSgpO1xuXHRcdGRyYWNvLl9mcmVlKCBwdHIgKTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRuYW1lOiBhdHRyaWJ1dGVOYW1lLFxuXHRcdFx0YXJyYXk6IGFycmF5LFxuXHRcdFx0aXRlbVNpemU6IG51bUNvbXBvbmVudHNcblx0XHR9O1xuXG5cdH1cblxuXHRmdW5jdGlvbiBnZXREcmFjb0RhdGFUeXBlKCBkcmFjbywgYXR0cmlidXRlVHlwZSApIHtcblxuXHRcdHN3aXRjaCAoIGF0dHJpYnV0ZVR5cGUgKSB7XG5cblx0XHRcdGNhc2UgRmxvYXQzMkFycmF5OiByZXR1cm4gZHJhY28uRFRfRkxPQVQzMjtcblx0XHRcdGNhc2UgSW50OEFycmF5OiByZXR1cm4gZHJhY28uRFRfSU5UODtcblx0XHRcdGNhc2UgSW50MTZBcnJheTogcmV0dXJuIGRyYWNvLkRUX0lOVDE2O1xuXHRcdFx0Y2FzZSBJbnQzMkFycmF5OiByZXR1cm4gZHJhY28uRFRfSU5UMzI7XG5cdFx0XHRjYXNlIFVpbnQ4QXJyYXk6IHJldHVybiBkcmFjby5EVF9VSU5UODtcblx0XHRcdGNhc2UgVWludDE2QXJyYXk6IHJldHVybiBkcmFjby5EVF9VSU5UMTY7XG5cdFx0XHRjYXNlIFVpbnQzMkFycmF5OiByZXR1cm4gZHJhY28uRFRfVUlOVDMyO1xuXG5cdFx0fVxuXG5cdH1cblxufVxuXG5leHBvcnQgeyBEUkFDT0xvYWRlciB9OyIsInZhciBnbG9iYWwgPSB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcztcbnZhciBfX3NlbGZfXyA9IChmdW5jdGlvbiAoKSB7XG5mdW5jdGlvbiBGKCkge1xudGhpcy5mZXRjaCA9IGZhbHNlO1xudGhpcy5ET01FeGNlcHRpb24gPSBnbG9iYWwuRE9NRXhjZXB0aW9uXG59XG5GLnByb3RvdHlwZSA9IGdsb2JhbDtcbnJldHVybiBuZXcgRigpO1xufSkoKTtcbihmdW5jdGlvbihzZWxmKSB7XG5cbnZhciBpcnJlbGV2YW50ID0gKGZ1bmN0aW9uIChleHBvcnRzKSB7XG5cbiAgdmFyIHN1cHBvcnQgPSB7XG4gICAgc2VhcmNoUGFyYW1zOiAnVVJMU2VhcmNoUGFyYW1zJyBpbiBzZWxmLFxuICAgIGl0ZXJhYmxlOiAnU3ltYm9sJyBpbiBzZWxmICYmICdpdGVyYXRvcicgaW4gU3ltYm9sLFxuICAgIGJsb2I6XG4gICAgICAnRmlsZVJlYWRlcicgaW4gc2VsZiAmJlxuICAgICAgJ0Jsb2InIGluIHNlbGYgJiZcbiAgICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBuZXcgQmxvYigpO1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSkoKSxcbiAgICBmb3JtRGF0YTogJ0Zvcm1EYXRhJyBpbiBzZWxmLFxuICAgIGFycmF5QnVmZmVyOiAnQXJyYXlCdWZmZXInIGluIHNlbGZcbiAgfTtcblxuICBmdW5jdGlvbiBpc0RhdGFWaWV3KG9iaikge1xuICAgIHJldHVybiBvYmogJiYgRGF0YVZpZXcucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yob2JqKVxuICB9XG5cbiAgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIpIHtcbiAgICB2YXIgdmlld0NsYXNzZXMgPSBbXG4gICAgICAnW29iamVjdCBJbnQ4QXJyYXldJyxcbiAgICAgICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcbiAgICAgICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgICAnW29iamVjdCBJbnQxNkFycmF5XScsXG4gICAgICAnW29iamVjdCBVaW50MTZBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgVWludDMyQXJyYXldJyxcbiAgICAgICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgRmxvYXQ2NEFycmF5XSdcbiAgICBdO1xuXG4gICAgdmFyIGlzQXJyYXlCdWZmZXJWaWV3ID1cbiAgICAgIEFycmF5QnVmZmVyLmlzVmlldyB8fFxuICAgICAgZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogJiYgdmlld0NsYXNzZXMuaW5kZXhPZihPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSkgPiAtMVxuICAgICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZU5hbWUobmFtZSkge1xuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIG5hbWUgPSBTdHJpbmcobmFtZSk7XG4gICAgfVxuICAgIGlmICgvW15hLXowLTlcXC0jJCUmJyorLl5fYHx+XS9pLnRlc3QobmFtZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lJylcbiAgICB9XG4gICAgcmV0dXJuIG5hbWUudG9Mb3dlckNhc2UoKVxuICB9XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIC8vIEJ1aWxkIGEgZGVzdHJ1Y3RpdmUgaXRlcmF0b3IgZm9yIHRoZSB2YWx1ZSBsaXN0XG4gIGZ1bmN0aW9uIGl0ZXJhdG9yRm9yKGl0ZW1zKSB7XG4gICAgdmFyIGl0ZXJhdG9yID0ge1xuICAgICAgbmV4dDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGl0ZW1zLnNoaWZ0KCk7XG4gICAgICAgIHJldHVybiB7ZG9uZTogdmFsdWUgPT09IHVuZGVmaW5lZCwgdmFsdWU6IHZhbHVlfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuICAgICAgaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGl0ZXJhdG9yXG4gIH1cblxuICBmdW5jdGlvbiBIZWFkZXJzKGhlYWRlcnMpIHtcbiAgICB0aGlzLm1hcCA9IHt9O1xuXG4gICAgaWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSB7XG4gICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgdmFsdWUpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGhlYWRlcnMpKSB7XG4gICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24oaGVhZGVyKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKGhlYWRlclswXSwgaGVhZGVyWzFdKTtcbiAgICAgIH0sIHRoaXMpO1xuICAgIH0gZWxzZSBpZiAoaGVhZGVycykge1xuICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIGhlYWRlcnNbbmFtZV0pO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICBuYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKTtcbiAgICB2YWx1ZSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKTtcbiAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLm1hcFtuYW1lXTtcbiAgICB0aGlzLm1hcFtuYW1lXSA9IG9sZFZhbHVlID8gb2xkVmFsdWUgKyAnLCAnICsgdmFsdWUgOiB2YWx1ZTtcbiAgfTtcblxuICBIZWFkZXJzLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldO1xuICB9O1xuXG4gIEhlYWRlcnMucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBuYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKTtcbiAgICByZXR1cm4gdGhpcy5oYXMobmFtZSkgPyB0aGlzLm1hcFtuYW1lXSA6IG51bGxcbiAgfTtcblxuICBIZWFkZXJzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwLmhhc093blByb3BlcnR5KG5vcm1hbGl6ZU5hbWUobmFtZSkpXG4gIH07XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKTtcbiAgfTtcblxuICBIZWFkZXJzLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24oY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMubWFwKSB7XG4gICAgICBpZiAodGhpcy5tYXAuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB0aGlzLm1hcFtuYW1lXSwgbmFtZSwgdGhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIEhlYWRlcnMucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXRlbXMgPSBbXTtcbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgIGl0ZW1zLnB1c2gobmFtZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9O1xuXG4gIEhlYWRlcnMucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpdGVtcyA9IFtdO1xuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaXRlbXMucHVzaCh2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9O1xuXG4gIEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXRlbXMgPSBbXTtcbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgIGl0ZW1zLnB1c2goW25hbWUsIHZhbHVlXSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9O1xuXG4gIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gICAgSGVhZGVycy5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXM7XG4gIH1cblxuICBmdW5jdGlvbiBjb25zdW1lZChib2R5KSB7XG4gICAgaWYgKGJvZHkuYm9keVVzZWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKSlcbiAgICB9XG4gICAgYm9keS5ib2R5VXNlZCA9IHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQpO1xuICAgICAgfTtcbiAgICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChyZWFkZXIuZXJyb3IpO1xuICAgICAgfTtcbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICB2YXIgcHJvbWlzZSA9IGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpO1xuICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKTtcbiAgICByZXR1cm4gcHJvbWlzZVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIHZhciBwcm9taXNlID0gZmlsZVJlYWRlclJlYWR5KHJlYWRlcik7XG4gICAgcmVhZGVyLnJlYWRBc1RleHQoYmxvYik7XG4gICAgcmV0dXJuIHByb21pc2VcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRBcnJheUJ1ZmZlckFzVGV4dChidWYpIHtcbiAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1Zik7XG4gICAgdmFyIGNoYXJzID0gbmV3IEFycmF5KHZpZXcubGVuZ3RoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgY2hhcnNbaV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHZpZXdbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY2hhcnMuam9pbignJylcbiAgfVxuXG4gIGZ1bmN0aW9uIGJ1ZmZlckNsb25lKGJ1Zikge1xuICAgIGlmIChidWYuc2xpY2UpIHtcbiAgICAgIHJldHVybiBidWYuc2xpY2UoMClcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHZpZXcgPSBuZXcgVWludDhBcnJheShidWYuYnl0ZUxlbmd0aCk7XG4gICAgICB2aWV3LnNldChuZXcgVWludDhBcnJheShidWYpKTtcbiAgICAgIHJldHVybiB2aWV3LmJ1ZmZlclxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIEJvZHkoKSB7XG4gICAgdGhpcy5ib2R5VXNlZCA9IGZhbHNlO1xuXG4gICAgdGhpcy5faW5pdEJvZHkgPSBmdW5jdGlvbihib2R5KSB7XG4gICAgICB0aGlzLl9ib2R5SW5pdCA9IGJvZHk7XG4gICAgICBpZiAoIWJvZHkpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSAnJztcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keTtcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5ibG9iICYmIEJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUJsb2IgPSBib2R5O1xuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmZvcm1EYXRhICYmIEZvcm1EYXRhLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlGb3JtRGF0YSA9IGJvZHk7XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuc2VhcmNoUGFyYW1zICYmIFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHkudG9TdHJpbmcoKTtcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiBzdXBwb3J0LmJsb2IgJiYgaXNEYXRhVmlldyhib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIgPSBidWZmZXJDbG9uZShib2R5LmJ1ZmZlcik7XG4gICAgICAgIC8vIElFIDEwLTExIGNhbid0IGhhbmRsZSBhIERhdGFWaWV3IGJvZHkuXG4gICAgICAgIHRoaXMuX2JvZHlJbml0ID0gbmV3IEJsb2IoW3RoaXMuX2JvZHlBcnJheUJ1ZmZlcl0pO1xuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIChBcnJheUJ1ZmZlci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSB8fCBpc0FycmF5QnVmZmVyVmlldyhib2R5KSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyID0gYnVmZmVyQ2xvbmUoYm9keSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHkgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYm9keSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsICd0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLTgnKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QmxvYiAmJiB0aGlzLl9ib2R5QmxvYi50eXBlKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgdGhpcy5fYm9keUJsb2IudHlwZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHN1cHBvcnQuYmxvYikge1xuICAgICAgdGhpcy5ibG9iID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpO1xuICAgICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUJsb2IpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSkpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIGJsb2InKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHRoaXMuYXJyYXlCdWZmZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikge1xuICAgICAgICAgIHJldHVybiBjb25zdW1lZCh0aGlzKSB8fCBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUFycmF5QnVmZmVyKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0aGlzLmJsb2IoKS50aGVuKHJlYWRCbG9iQXNBcnJheUJ1ZmZlcilcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpO1xuICAgICAgaWYgKHJlamVjdGVkKSB7XG4gICAgICAgIHJldHVybiByZWplY3RlZFxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcbiAgICAgICAgcmV0dXJuIHJlYWRCbG9iQXNUZXh0KHRoaXMuX2JvZHlCbG9iKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZWFkQXJyYXlCdWZmZXJBc1RleHQodGhpcy5fYm9keUFycmF5QnVmZmVyKSlcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyB0ZXh0JylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpXG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmIChzdXBwb3J0LmZvcm1EYXRhKSB7XG4gICAgICB0aGlzLmZvcm1EYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKGRlY29kZSlcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdGhpcy5qc29uID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKVxuICAgIH07XG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLy8gSFRUUCBtZXRob2RzIHdob3NlIGNhcGl0YWxpemF0aW9uIHNob3VsZCBiZSBub3JtYWxpemVkXG4gIHZhciBtZXRob2RzID0gWydERUxFVEUnLCAnR0VUJywgJ0hFQUQnLCAnT1BUSU9OUycsICdQT1NUJywgJ1BVVCddO1xuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZU1ldGhvZChtZXRob2QpIHtcbiAgICB2YXIgdXBjYXNlZCA9IG1ldGhvZC50b1VwcGVyQ2FzZSgpO1xuICAgIHJldHVybiBtZXRob2RzLmluZGV4T2YodXBjYXNlZCkgPiAtMSA/IHVwY2FzZWQgOiBtZXRob2RcbiAgfVxuXG4gIGZ1bmN0aW9uIFJlcXVlc3QoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgYm9keSA9IG9wdGlvbnMuYm9keTtcblxuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFJlcXVlc3QpIHtcbiAgICAgIGlmIChpbnB1dC5ib2R5VXNlZCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKVxuICAgICAgfVxuICAgICAgdGhpcy51cmwgPSBpbnB1dC51cmw7XG4gICAgICB0aGlzLmNyZWRlbnRpYWxzID0gaW5wdXQuY3JlZGVudGlhbHM7XG4gICAgICBpZiAoIW9wdGlvbnMuaGVhZGVycykge1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhpbnB1dC5oZWFkZXJzKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubWV0aG9kID0gaW5wdXQubWV0aG9kO1xuICAgICAgdGhpcy5tb2RlID0gaW5wdXQubW9kZTtcbiAgICAgIHRoaXMuc2lnbmFsID0gaW5wdXQuc2lnbmFsO1xuICAgICAgaWYgKCFib2R5ICYmIGlucHV0Ll9ib2R5SW5pdCAhPSBudWxsKSB7XG4gICAgICAgIGJvZHkgPSBpbnB1dC5fYm9keUluaXQ7XG4gICAgICAgIGlucHV0LmJvZHlVc2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cmwgPSBTdHJpbmcoaW5wdXQpO1xuICAgIH1cblxuICAgIHRoaXMuY3JlZGVudGlhbHMgPSBvcHRpb25zLmNyZWRlbnRpYWxzIHx8IHRoaXMuY3JlZGVudGlhbHMgfHwgJ3NhbWUtb3JpZ2luJztcbiAgICBpZiAob3B0aW9ucy5oZWFkZXJzIHx8ICF0aGlzLmhlYWRlcnMpIHtcbiAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycyk7XG4gICAgfVxuICAgIHRoaXMubWV0aG9kID0gbm9ybWFsaXplTWV0aG9kKG9wdGlvbnMubWV0aG9kIHx8IHRoaXMubWV0aG9kIHx8ICdHRVQnKTtcbiAgICB0aGlzLm1vZGUgPSBvcHRpb25zLm1vZGUgfHwgdGhpcy5tb2RlIHx8IG51bGw7XG4gICAgdGhpcy5zaWduYWwgPSBvcHRpb25zLnNpZ25hbCB8fCB0aGlzLnNpZ25hbDtcbiAgICB0aGlzLnJlZmVycmVyID0gbnVsbDtcblxuICAgIGlmICgodGhpcy5tZXRob2QgPT09ICdHRVQnIHx8IHRoaXMubWV0aG9kID09PSAnSEVBRCcpICYmIGJvZHkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzJylcbiAgICB9XG4gICAgdGhpcy5faW5pdEJvZHkoYm9keSk7XG4gIH1cblxuICBSZXF1ZXN0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUmVxdWVzdCh0aGlzLCB7Ym9keTogdGhpcy5fYm9keUluaXR9KVxuICB9O1xuXG4gIGZ1bmN0aW9uIGRlY29kZShib2R5KSB7XG4gICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcbiAgICBib2R5XG4gICAgICAudHJpbSgpXG4gICAgICAuc3BsaXQoJyYnKVxuICAgICAgLmZvckVhY2goZnVuY3Rpb24oYnl0ZXMpIHtcbiAgICAgICAgaWYgKGJ5dGVzKSB7XG4gICAgICAgICAgdmFyIHNwbGl0ID0gYnl0ZXMuc3BsaXQoJz0nKTtcbiAgICAgICAgICB2YXIgbmFtZSA9IHNwbGl0LnNoaWZ0KCkucmVwbGFjZSgvXFwrL2csICcgJyk7XG4gICAgICAgICAgdmFyIHZhbHVlID0gc3BsaXQuam9pbignPScpLnJlcGxhY2UoL1xcKy9nLCAnICcpO1xuICAgICAgICAgIGZvcm0uYXBwZW5kKGRlY29kZVVSSUNvbXBvbmVudChuYW1lKSwgZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIHJldHVybiBmb3JtXG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZUhlYWRlcnMocmF3SGVhZGVycykge1xuICAgIHZhciBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICAvLyBSZXBsYWNlIGluc3RhbmNlcyBvZiBcXHJcXG4gYW5kIFxcbiBmb2xsb3dlZCBieSBhdCBsZWFzdCBvbmUgc3BhY2Ugb3IgaG9yaXpvbnRhbCB0YWIgd2l0aCBhIHNwYWNlXG4gICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzcyMzAjc2VjdGlvbi0zLjJcbiAgICB2YXIgcHJlUHJvY2Vzc2VkSGVhZGVycyA9IHJhd0hlYWRlcnMucmVwbGFjZSgvXFxyP1xcbltcXHQgXSsvZywgJyAnKTtcbiAgICBwcmVQcm9jZXNzZWRIZWFkZXJzLnNwbGl0KC9cXHI/XFxuLykuZm9yRWFjaChmdW5jdGlvbihsaW5lKSB7XG4gICAgICB2YXIgcGFydHMgPSBsaW5lLnNwbGl0KCc6Jyk7XG4gICAgICB2YXIga2V5ID0gcGFydHMuc2hpZnQoKS50cmltKCk7XG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHBhcnRzLmpvaW4oJzonKS50cmltKCk7XG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBoZWFkZXJzXG4gIH1cblxuICBCb2R5LmNhbGwoUmVxdWVzdC5wcm90b3R5cGUpO1xuXG4gIGZ1bmN0aW9uIFJlc3BvbnNlKGJvZHlJbml0LCBvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgdGhpcy50eXBlID0gJ2RlZmF1bHQnO1xuICAgIHRoaXMuc3RhdHVzID0gb3B0aW9ucy5zdGF0dXMgPT09IHVuZGVmaW5lZCA/IDIwMCA6IG9wdGlvbnMuc3RhdHVzO1xuICAgIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDA7XG4gICAgdGhpcy5zdGF0dXNUZXh0ID0gJ3N0YXR1c1RleHQnIGluIG9wdGlvbnMgPyBvcHRpb25zLnN0YXR1c1RleHQgOiAnT0snO1xuICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycyk7XG4gICAgdGhpcy51cmwgPSBvcHRpb25zLnVybCB8fCAnJztcbiAgICB0aGlzLl9pbml0Qm9keShib2R5SW5pdCk7XG4gIH1cblxuICBCb2R5LmNhbGwoUmVzcG9uc2UucHJvdG90eXBlKTtcblxuICBSZXNwb25zZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKHRoaXMuX2JvZHlJbml0LCB7XG4gICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxuICAgICAgc3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0LFxuICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKSxcbiAgICAgIHVybDogdGhpcy51cmxcbiAgICB9KVxuICB9O1xuXG4gIFJlc3BvbnNlLmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IDAsIHN0YXR1c1RleHQ6ICcnfSk7XG4gICAgcmVzcG9uc2UudHlwZSA9ICdlcnJvcic7XG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH07XG5cbiAgdmFyIHJlZGlyZWN0U3RhdHVzZXMgPSBbMzAxLCAzMDIsIDMwMywgMzA3LCAzMDhdO1xuXG4gIFJlc3BvbnNlLnJlZGlyZWN0ID0gZnVuY3Rpb24odXJsLCBzdGF0dXMpIHtcbiAgICBpZiAocmVkaXJlY3RTdGF0dXNlcy5pbmRleE9mKHN0YXR1cykgPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBzdGF0dXMgY29kZScpXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiBzdGF0dXMsIGhlYWRlcnM6IHtsb2NhdGlvbjogdXJsfX0pXG4gIH07XG5cbiAgZXhwb3J0cy5ET01FeGNlcHRpb24gPSBzZWxmLkRPTUV4Y2VwdGlvbjtcbiAgdHJ5IHtcbiAgICBuZXcgZXhwb3J0cy5ET01FeGNlcHRpb24oKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZXhwb3J0cy5ET01FeGNlcHRpb24gPSBmdW5jdGlvbihtZXNzYWdlLCBuYW1lKSB7XG4gICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgIHZhciBlcnJvciA9IEVycm9yKG1lc3NhZ2UpO1xuICAgICAgdGhpcy5zdGFjayA9IGVycm9yLnN0YWNrO1xuICAgIH07XG4gICAgZXhwb3J0cy5ET01FeGNlcHRpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuICAgIGV4cG9ydHMuRE9NRXhjZXB0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGV4cG9ydHMuRE9NRXhjZXB0aW9uO1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2goaW5wdXQsIGluaXQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGlucHV0LCBpbml0KTtcblxuICAgICAgaWYgKHJlcXVlc3Quc2lnbmFsICYmIHJlcXVlc3Quc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgZXhwb3J0cy5ET01FeGNlcHRpb24oJ0Fib3J0ZWQnLCAnQWJvcnRFcnJvcicpKVxuICAgICAgfVxuXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgIGZ1bmN0aW9uIGFib3J0WGhyKCkge1xuICAgICAgICB4aHIuYWJvcnQoKTtcbiAgICAgIH1cblxuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICBzdGF0dXM6IHhoci5zdGF0dXMsXG4gICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHQsXG4gICAgICAgICAgaGVhZGVyczogcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSB8fCAnJylcbiAgICAgICAgfTtcbiAgICAgICAgb3B0aW9ucy51cmwgPSAncmVzcG9uc2VVUkwnIGluIHhociA/IHhoci5yZXNwb25zZVVSTCA6IG9wdGlvbnMuaGVhZGVycy5nZXQoJ1gtUmVxdWVzdC1VUkwnKTtcbiAgICAgICAgdmFyIGJvZHkgPSAncmVzcG9uc2UnIGluIHhociA/IHhoci5yZXNwb25zZSA6IHhoci5yZXNwb25zZVRleHQ7XG4gICAgICAgIHJlc29sdmUobmV3IFJlc3BvbnNlKGJvZHksIG9wdGlvbnMpKTtcbiAgICAgIH07XG5cbiAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKTtcbiAgICAgIH07XG5cbiAgICAgIHhoci5vbmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgZXhwb3J0cy5ET01FeGNlcHRpb24oJ0Fib3J0ZWQnLCAnQWJvcnRFcnJvcicpKTtcbiAgICAgIH07XG5cbiAgICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCwgdHJ1ZSk7XG5cbiAgICAgIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAnaW5jbHVkZScpIHtcbiAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdvbWl0Jykge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmICgncmVzcG9uc2VUeXBlJyBpbiB4aHIgJiYgc3VwcG9ydC5ibG9iKSB7XG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYic7XG4gICAgICB9XG5cbiAgICAgIHJlcXVlc3QuaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHZhbHVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVxdWVzdC5zaWduYWwpIHtcbiAgICAgICAgcmVxdWVzdC5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhYm9ydFhocik7XG5cbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIERPTkUgKHN1Y2Nlc3Mgb3IgZmFpbHVyZSlcbiAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgIHJlcXVlc3Quc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgYWJvcnRYaHIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgeGhyLnNlbmQodHlwZW9mIHJlcXVlc3QuX2JvZHlJbml0ID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiByZXF1ZXN0Ll9ib2R5SW5pdCk7XG4gICAgfSlcbiAgfVxuXG4gIGZldGNoLnBvbHlmaWxsID0gdHJ1ZTtcblxuICBpZiAoIXNlbGYuZmV0Y2gpIHtcbiAgICBzZWxmLmZldGNoID0gZmV0Y2g7XG4gICAgc2VsZi5IZWFkZXJzID0gSGVhZGVycztcbiAgICBzZWxmLlJlcXVlc3QgPSBSZXF1ZXN0O1xuICAgIHNlbGYuUmVzcG9uc2UgPSBSZXNwb25zZTtcbiAgfVxuXG4gIGV4cG9ydHMuSGVhZGVycyA9IEhlYWRlcnM7XG4gIGV4cG9ydHMuUmVxdWVzdCA9IFJlcXVlc3Q7XG4gIGV4cG9ydHMuUmVzcG9uc2UgPSBSZXNwb25zZTtcbiAgZXhwb3J0cy5mZXRjaCA9IGZldGNoO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbiAgcmV0dXJuIGV4cG9ydHM7XG5cbn0oe30pKTtcbn0pKF9fc2VsZl9fKTtcbl9fc2VsZl9fLmZldGNoLnBvbnlmaWxsID0gdHJ1ZTtcbi8vIFJlbW92ZSBcInBvbHlmaWxsXCIgcHJvcGVydHkgYWRkZWQgYnkgd2hhdHdnLWZldGNoXG5kZWxldGUgX19zZWxmX18uZmV0Y2gucG9seWZpbGw7XG4vLyBDaG9vc2UgYmV0d2VlbiBuYXRpdmUgaW1wbGVtZW50YXRpb24gKGdsb2JhbCkgb3IgY3VzdG9tIGltcGxlbWVudGF0aW9uIChfX3NlbGZfXylcbi8vIHZhciBjdHggPSBnbG9iYWwuZmV0Y2ggPyBnbG9iYWwgOiBfX3NlbGZfXztcbnZhciBjdHggPSBfX3NlbGZfXzsgLy8gdGhpcyBsaW5lIGRpc2FibGUgc2VydmljZSB3b3JrZXIgc3VwcG9ydCB0ZW1wb3JhcmlseVxuZXhwb3J0cyA9IGN0eC5mZXRjaCAvLyBUbyBlbmFibGU6IGltcG9ydCBmZXRjaCBmcm9tICdjcm9zcy1mZXRjaCdcbmV4cG9ydHMuZGVmYXVsdCA9IGN0eC5mZXRjaCAvLyBGb3IgVHlwZVNjcmlwdCBjb25zdW1lcnMgd2l0aG91dCBlc01vZHVsZUludGVyb3AuXG5leHBvcnRzLmZldGNoID0gY3R4LmZldGNoIC8vIFRvIGVuYWJsZTogaW1wb3J0IHtmZXRjaH0gZnJvbSAnY3Jvc3MtZmV0Y2gnXG5leHBvcnRzLkhlYWRlcnMgPSBjdHguSGVhZGVyc1xuZXhwb3J0cy5SZXF1ZXN0ID0gY3R4LlJlcXVlc3RcbmV4cG9ydHMuUmVzcG9uc2UgPSBjdHguUmVzcG9uc2Vcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1xuIiwiaW1wb3J0IHsgQ2FjaGUsIExvYWRlciB9IGZyb20gJ3RocmVlJztcbmltcG9ydCBmZXRjaCBmcm9tIFwiY3Jvc3MtZmV0Y2hcIlxuXG5jb25zdCBsb2FkaW5nID0ge307XG5cbmNsYXNzIEZpbGVMb2FkZXIgZXh0ZW5kcyBMb2FkZXIge1xuXG5cdGNvbnN0cnVjdG9yKG1hbmFnZXIpIHtcbiAgICBzdXBlcihtYW5hZ2VyKVxuICB9XG5cblx0bG9hZCh1cmwsIG9uTG9hZCwgb25Qcm9ncmVzcywgb25FcnJvcikge1xuXG5cdFx0aWYgKHVybCA9PT0gdW5kZWZpbmVkKSB1cmwgPSAnJztcblxuXHRcdGlmICh0aGlzLnBhdGggIT09IHVuZGVmaW5lZCkgdXJsID0gdGhpcy5wYXRoICsgdXJsO1xuXG5cdFx0dXJsID0gdGhpcy5tYW5hZ2VyLnJlc29sdmVVUkwodXJsKTtcblxuXHRcdGNvbnN0IHNjb3BlID0gdGhpcztcblxuXHRcdGNvbnN0IGNhY2hlZCA9IENhY2hlLmdldCh1cmwpO1xuXG5cdFx0aWYgKGNhY2hlZCAhPT0gdW5kZWZpbmVkKSB7XG5cblx0XHRcdHNjb3BlLm1hbmFnZXIuaXRlbVN0YXJ0KHVybCk7XG5cblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdGlmIChvbkxvYWQpIG9uTG9hZChjYWNoZWQpO1xuXG5cdFx0XHRcdHNjb3BlLm1hbmFnZXIuaXRlbUVuZCh1cmwpO1xuXG5cdFx0XHR9LCAwKTtcblxuXHRcdFx0cmV0dXJuIGNhY2hlZDtcblxuXHRcdH1cblxuXHRcdC8vIENoZWNrIGlmIHJlcXVlc3QgaXMgZHVwbGljYXRlXG5cblx0XHRpZiAobG9hZGluZ1t1cmxdICE9PSB1bmRlZmluZWQpIHtcblxuXHRcdFx0bG9hZGluZ1t1cmxdLnB1c2goe1xuXG5cdFx0XHRcdG9uTG9hZDogb25Mb2FkLFxuXHRcdFx0XHRvblByb2dyZXNzOiBvblByb2dyZXNzLFxuXHRcdFx0XHRvbkVycm9yOiBvbkVycm9yXG5cblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm47XG5cblx0XHR9XG5cblx0XHQvLyBDaGVjayBmb3IgZGF0YTogVVJJXG5cdFx0Y29uc3QgZGF0YVVyaVJlZ2V4ID0gL15kYXRhOiguKj8pKDtiYXNlNjQpPywoLiopJC87XG5cdFx0Y29uc3QgZGF0YVVyaVJlZ2V4UmVzdWx0ID0gdXJsLm1hdGNoKGRhdGFVcmlSZWdleCk7XG5cblx0XHQvLyBTYWZhcmkgY2FuIG5vdCBoYW5kbGUgRGF0YSBVUklzIHRocm91Z2ggWE1MSHR0cFJlcXVlc3Qgc28gcHJvY2VzcyBtYW51YWxseVxuXHRcdGlmIChkYXRhVXJpUmVnZXhSZXN1bHQpIHtcblxuXHRcdFx0Y29uc3QgbWltZVR5cGUgPSBkYXRhVXJpUmVnZXhSZXN1bHRbMV07XG5cdFx0XHRjb25zdCBpc0Jhc2U2NCA9ICEhZGF0YVVyaVJlZ2V4UmVzdWx0WzJdO1xuXG5cdFx0XHRsZXQgZGF0YSA9IGRhdGFVcmlSZWdleFJlc3VsdFszXTtcblx0XHRcdGRhdGEgPSBkZWNvZGVVUklDb21wb25lbnQoZGF0YSk7XG5cblx0XHRcdGlmIChpc0Jhc2U2NCkgZGF0YSA9IGF0b2IoZGF0YSk7XG5cblx0XHRcdHRyeSB7XG5cblx0XHRcdFx0bGV0IHJlc3BvbnNlO1xuXHRcdFx0XHRjb25zdCByZXNwb25zZVR5cGUgPSAodGhpcy5yZXNwb25zZVR5cGUgfHwgJycpLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRcdFx0c3dpdGNoIChyZXNwb25zZVR5cGUpIHtcblxuXHRcdFx0XHRcdGNhc2UgJ2FycmF5YnVmZmVyJzpcblx0XHRcdFx0XHRjYXNlICdibG9iJzpcblxuXHRcdFx0XHRcdFx0Y29uc3QgdmlldyA9IG5ldyBVaW50OEFycmF5KGRhdGEubGVuZ3RoKTtcblxuXHRcdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG5cblx0XHRcdFx0XHRcdFx0dmlld1tpXSA9IGRhdGEuY2hhckNvZGVBdChpKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAocmVzcG9uc2VUeXBlID09PSAnYmxvYicpIHtcblxuXHRcdFx0XHRcdFx0XHRyZXNwb25zZSA9IG5ldyBCbG9iKFt2aWV3LmJ1ZmZlcl0sIHsgdHlwZTogbWltZVR5cGUgfSk7XG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0cmVzcG9uc2UgPSB2aWV3LmJ1ZmZlcjtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ2RvY3VtZW50JzpcblxuXHRcdFx0XHRcdFx0Y29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xuXHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKGRhdGEsIG1pbWVUeXBlKTtcblxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdqc29uJzpcblxuXHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBKU09OLnBhcnNlKGRhdGEpO1xuXG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGRlZmF1bHQ6IC8vICd0ZXh0JyBvciBvdGhlclxuXG5cdFx0XHRcdFx0XHRyZXNwb25zZSA9IGRhdGE7XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBXYWl0IGZvciBuZXh0IGJyb3dzZXIgdGljayBsaWtlIHN0YW5kYXJkIFhNTEh0dHBSZXF1ZXN0IGV2ZW50IGRpc3BhdGNoaW5nIGRvZXNcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRpZiAob25Mb2FkKSBvbkxvYWQocmVzcG9uc2UpO1xuXG5cdFx0XHRcdFx0c2NvcGUubWFuYWdlci5pdGVtRW5kKHVybCk7XG5cblx0XHRcdFx0fSwgMCk7XG5cblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cblx0XHRcdFx0Ly8gV2FpdCBmb3IgbmV4dCBicm93c2VyIHRpY2sgbGlrZSBzdGFuZGFyZCBYTUxIdHRwUmVxdWVzdCBldmVudCBkaXNwYXRjaGluZyBkb2VzXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0aWYgKG9uRXJyb3IpIG9uRXJyb3IoZXJyb3IpO1xuXG5cdFx0XHRcdFx0c2NvcGUubWFuYWdlci5pdGVtRXJyb3IodXJsKTtcblx0XHRcdFx0XHRzY29wZS5tYW5hZ2VyLml0ZW1FbmQodXJsKTtcblxuXHRcdFx0XHR9LCAwKTtcblxuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gSW5pdGlhbGlzZSBhcnJheSBmb3IgZHVwbGljYXRlIHJlcXVlc3RzXG5cblx0XHRcdGxvYWRpbmdbdXJsXSA9IFtdO1xuXG5cdFx0XHRsb2FkaW5nW3VybF0ucHVzaCh7XG5cblx0XHRcdFx0b25Mb2FkOiBvbkxvYWQsXG5cdFx0XHRcdG9uUHJvZ3Jlc3M6IG9uUHJvZ3Jlc3MsXG5cdFx0XHRcdG9uRXJyb3I6IG9uRXJyb3JcblxuXHRcdFx0fSk7XG5cblxuXHRcdFx0ZmV0Y2godXJsKS50aGVuKHJlcyA9PiByZXMuYmxvYigpKS50aGVuKGFzeW5jIChyZXMpID0+IHtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCIqKioqKioqKioqKioqKioqKiBVUkwgSVNcIiwgdXJsKTtcblx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXMuYXJyYXlCdWZmZXIoKTtcblxuXHRcdFx0XHRjb25zdCBjYWxsYmFja3MgPSBsb2FkaW5nW3VybF07XG5cdFx0XHRcdHNjb3BlLm1hbmFnZXIuaXRlbVN0YXJ0KHVybCk7XG5cblx0XHRcdFx0ZGVsZXRlIGxvYWRpbmdbdXJsXTtcblxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIioqKioqKioqKiBGaWxlTG9hZGVyIExPQURFRFwiKVxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhyZXMpO1xuXG5cdFx0XHRcdC8vIFNvbWUgYnJvd3NlcnMgcmV0dXJuIEhUVFAgU3RhdHVzIDAgd2hlbiB1c2luZyBub24taHR0cCBwcm90b2NvbFxuXHRcdFx0XHQvLyBlLmcuICdmaWxlOi8vJyBvciAnZGF0YTovLycuIEhhbmRsZSBhcyBzdWNjZXNzLlxuXG5cdFx0XHRcdGlmIChyZXMuc3RhdHVzID09PSAwKSBjb25zb2xlLndhcm4oJ1RIUkVFLkZpbGVMb2FkZXI6IEhUVFAgU3RhdHVzIDAgcmVjZWl2ZWQuJyk7XG5cblx0XHRcdFx0Ly8gQWRkIHRvIGNhY2hlIG9ubHkgb24gSFRUUCBzdWNjZXNzLCBzbyB0aGF0IHdlIGRvIG5vdCBjYWNoZVxuXHRcdFx0XHQvLyBlcnJvciByZXNwb25zZSBib2RpZXMgYXMgcHJvcGVyIHJlc3BvbnNlcyB0byByZXF1ZXN0cy5cblx0XHRcdFx0Q2FjaGUuYWRkKHVybCwgcmVzKTtcblxuXHRcdFx0XHRmb3IgKGxldCBpID0gMCwgaWwgPSBjYWxsYmFja3MubGVuZ3RoOyBpIDwgaWw7IGkrKykge1xuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiKioqKioqKioqKioqKioqIENBTExCQUNLXCIpXG5cblx0XHRcdFx0XHRjb25zdCBjYWxsYmFjayA9IGNhbGxiYWNrc1tpXTtcblx0XHRcdFx0XHRpZiAoY2FsbGJhY2sub25Mb2FkKSBjYWxsYmFjay5vbkxvYWQocmVzcG9uc2UpO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzY29wZS5tYW5hZ2VyLml0ZW1FbmQodXJsKTtcblx0XHRcdH0pLmNhdGNoKChldmVudCkgPT4ge1xuXHRcdFx0XHRjb25zdCBjYWxsYmFja3MgPSBsb2FkaW5nW3VybF07XG5cblx0XHRcdFx0ZGVsZXRlIGxvYWRpbmdbdXJsXTtcblxuXHRcdFx0XHRmb3IgKGxldCBpID0gMCwgaWwgPSBjYWxsYmFja3MubGVuZ3RoOyBpIDwgaWw7IGkrKykge1xuXG5cdFx0XHRcdFx0Y29uc3QgY2FsbGJhY2sgPSBjYWxsYmFja3NbaV07XG5cdFx0XHRcdFx0aWYgKGNhbGxiYWNrLm9uRXJyb3IpIGNhbGxiYWNrLm9uRXJyb3IoZXZlbnQpO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzY29wZS5tYW5hZ2VyLml0ZW1FcnJvcih1cmwpO1xuXHRcdFx0XHRzY29wZS5tYW5hZ2VyLml0ZW1FbmQodXJsKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHNldFJlc3BvbnNlVHlwZSAodmFsdWUpIHtcblxuXHRcdHRoaXMucmVzcG9uc2VUeXBlID0gdmFsdWU7XG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fVxuXG5cdHNldE1pbWVUeXBlICh2YWx1ZSkge1xuXG5cdFx0dGhpcy5taW1lVHlwZSA9IHZhbHVlO1xuXHRcdHJldHVybiB0aGlzO1xuXG5cdH1cblxufVxuXG5cbmV4cG9ydCB7IEZpbGVMb2FkZXIgfTtcbiIsImltcG9ydCB7XG5cdEFuaW1hdGlvbkNsaXAsXG5cdEJvbmUsXG5cdEJveDMsXG5cdEJ1ZmZlckF0dHJpYnV0ZSxcblx0QnVmZmVyR2VvbWV0cnksXG5cdENsYW1wVG9FZGdlV3JhcHBpbmcsXG5cdENvbG9yLFxuXHREaXJlY3Rpb25hbExpZ2h0LFxuXHREb3VibGVTaWRlLFxuXHRGcm9udFNpZGUsXG5cdEdyb3VwLFxuXHRJbWFnZUJpdG1hcExvYWRlcixcblx0SW50ZXJsZWF2ZWRCdWZmZXIsXG5cdEludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlLFxuXHRJbnRlcnBvbGFudCxcblx0SW50ZXJwb2xhdGVEaXNjcmV0ZSxcblx0SW50ZXJwb2xhdGVMaW5lYXIsXG5cdExpbmUsXG5cdExpbmVCYXNpY01hdGVyaWFsLFxuXHRMaW5lTG9vcCxcblx0TGluZVNlZ21lbnRzLFxuXHRMaW5lYXJGaWx0ZXIsXG5cdExpbmVhck1pcG1hcExpbmVhckZpbHRlcixcblx0TGluZWFyTWlwbWFwTmVhcmVzdEZpbHRlcixcblx0TG9hZGVyLFxuXHRMb2FkZXJVdGlscyxcblx0TWF0ZXJpYWwsXG5cdE1hdGhVdGlscyxcblx0TWF0cml4NCxcblx0TWVzaCxcblx0TWVzaEJhc2ljTWF0ZXJpYWwsXG5cdE1lc2hQaHlzaWNhbE1hdGVyaWFsLFxuXHRNZXNoU3RhbmRhcmRNYXRlcmlhbCxcblx0TWlycm9yZWRSZXBlYXRXcmFwcGluZyxcblx0TmVhcmVzdEZpbHRlcixcblx0TmVhcmVzdE1pcG1hcExpbmVhckZpbHRlcixcblx0TmVhcmVzdE1pcG1hcE5lYXJlc3RGaWx0ZXIsXG5cdE51bWJlcktleWZyYW1lVHJhY2ssXG5cdE9iamVjdDNELFxuXHRPcnRob2dyYXBoaWNDYW1lcmEsXG5cdFBlcnNwZWN0aXZlQ2FtZXJhLFxuXHRQb2ludExpZ2h0LFxuXHRQb2ludHMsXG5cdFBvaW50c01hdGVyaWFsLFxuXHRQcm9wZXJ0eUJpbmRpbmcsXG5cdFF1YXRlcm5pb25LZXlmcmFtZVRyYWNrLFxuXHRSR0JGb3JtYXQsXG5cdFJlcGVhdFdyYXBwaW5nLFxuXHRTa2VsZXRvbixcblx0U2tpbm5lZE1lc2gsXG5cdFNwaGVyZSxcblx0U3BvdExpZ2h0LFxuXHRUYW5nZW50U3BhY2VOb3JtYWxNYXAsXG5cdFRleHR1cmUsXG5cdFRleHR1cmVMb2FkZXIsXG5cdFRyaWFuZ2xlRmFuRHJhd01vZGUsXG5cdFRyaWFuZ2xlU3RyaXBEcmF3TW9kZSxcblx0VmVjdG9yMixcblx0VmVjdG9yMyxcblx0VmVjdG9yS2V5ZnJhbWVUcmFjayxcblx0c1JHQkVuY29kaW5nXG59IGZyb20gJ3RocmVlJztcblxuaW1wb3J0IHsgRmlsZUxvYWRlciB9IGZyb20gJy4vRmlsZUxvYWRlcic7XG5cbmNsYXNzIEdMVEZMb2FkZXIgZXh0ZW5kcyBMb2FkZXIge1xuXG5cdGNvbnN0cnVjdG9yKCBtYW5hZ2VyICkge1xuXG5cdFx0c3VwZXIoIG1hbmFnZXIgKTtcblxuXHRcdHRoaXMuZHJhY29Mb2FkZXIgPSBudWxsO1xuXHRcdHRoaXMua3R4MkxvYWRlciA9IG51bGw7XG5cdFx0dGhpcy5tZXNob3B0RGVjb2RlciA9IG51bGw7XG5cblx0XHR0aGlzLnBsdWdpbkNhbGxiYWNrcyA9IFtdO1xuXG5cdFx0dGhpcy5yZWdpc3RlciggZnVuY3Rpb24gKCBwYXJzZXIgKSB7XG5cblx0XHRcdHJldHVybiBuZXcgR0xURk1hdGVyaWFsc0NsZWFyY29hdEV4dGVuc2lvbiggcGFyc2VyICk7XG5cblx0XHR9ICk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyKCBmdW5jdGlvbiAoIHBhcnNlciApIHtcblxuXHRcdFx0cmV0dXJuIG5ldyBHTFRGVGV4dHVyZUJhc2lzVUV4dGVuc2lvbiggcGFyc2VyICk7XG5cblx0XHR9ICk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyKCBmdW5jdGlvbiAoIHBhcnNlciApIHtcblxuXHRcdFx0cmV0dXJuIG5ldyBHTFRGVGV4dHVyZVdlYlBFeHRlbnNpb24oIHBhcnNlciApO1xuXG5cdFx0fSApO1xuXG5cdFx0dGhpcy5yZWdpc3RlciggZnVuY3Rpb24gKCBwYXJzZXIgKSB7XG5cblx0XHRcdHJldHVybiBuZXcgR0xURk1hdGVyaWFsc1RyYW5zbWlzc2lvbkV4dGVuc2lvbiggcGFyc2VyICk7XG5cblx0XHR9ICk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyKCBmdW5jdGlvbiAoIHBhcnNlciApIHtcblxuXHRcdFx0cmV0dXJuIG5ldyBHTFRGTGlnaHRzRXh0ZW5zaW9uKCBwYXJzZXIgKTtcblxuXHRcdH0gKTtcblxuXHRcdHRoaXMucmVnaXN0ZXIoIGZ1bmN0aW9uICggcGFyc2VyICkge1xuXG5cdFx0XHRyZXR1cm4gbmV3IEdMVEZNZXNob3B0Q29tcHJlc3Npb24oIHBhcnNlciApO1xuXG5cdFx0fSApO1xuXG5cdH1cblxuXHRsb2FkKCB1cmwsIG9uTG9hZCwgb25Qcm9ncmVzcywgb25FcnJvciApIHtcblxuXHRcdGNvbnN0IHNjb3BlID0gdGhpcztcblxuXHRcdGxldCByZXNvdXJjZVBhdGg7XG5cblx0XHRpZiAoIHRoaXMucmVzb3VyY2VQYXRoICE9PSAnJyApIHtcblxuXHRcdFx0cmVzb3VyY2VQYXRoID0gdGhpcy5yZXNvdXJjZVBhdGg7XG5cblx0XHR9IGVsc2UgaWYgKCB0aGlzLnBhdGggIT09ICcnICkge1xuXG5cdFx0XHRyZXNvdXJjZVBhdGggPSB0aGlzLnBhdGg7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRyZXNvdXJjZVBhdGggPSBMb2FkZXJVdGlscy5leHRyYWN0VXJsQmFzZSggdXJsICk7XG5cblx0XHR9XG5cblx0XHQvLyBUZWxscyB0aGUgTG9hZGluZ01hbmFnZXIgdG8gdHJhY2sgYW4gZXh0cmEgaXRlbSwgd2hpY2ggcmVzb2x2ZXMgYWZ0ZXJcblx0XHQvLyB0aGUgbW9kZWwgaXMgZnVsbHkgbG9hZGVkLiBUaGlzIG1lYW5zIHRoZSBjb3VudCBvZiBpdGVtcyBsb2FkZWQgd2lsbFxuXHRcdC8vIGJlIGluY29ycmVjdCwgYnV0IGVuc3VyZXMgbWFuYWdlci5vbkxvYWQoKSBkb2VzIG5vdCBmaXJlIGVhcmx5LlxuXHRcdHRoaXMubWFuYWdlci5pdGVtU3RhcnQoIHVybCApO1xuXG5cdFx0Y29uc3QgX29uRXJyb3IgPSBmdW5jdGlvbiAoIGUgKSB7XG5cblx0XHRcdGlmICggb25FcnJvciApIHtcblxuXHRcdFx0XHRvbkVycm9yKCBlICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Y29uc29sZS5lcnJvciggZSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHNjb3BlLm1hbmFnZXIuaXRlbUVycm9yKCB1cmwgKTtcblx0XHRcdHNjb3BlLm1hbmFnZXIuaXRlbUVuZCggdXJsICk7XG5cblx0XHR9O1xuXG5cdFx0Y29uc3QgbG9hZGVyID0gbmV3IEZpbGVMb2FkZXIoIHRoaXMubWFuYWdlciApO1xuXG5cdFx0bG9hZGVyLnNldFBhdGgoIHRoaXMucGF0aCApO1xuXHRcdGxvYWRlci5zZXRSZXNwb25zZVR5cGUoICdhcnJheWJ1ZmZlcicgKTtcblx0XHRsb2FkZXIuc2V0UmVxdWVzdEhlYWRlciggdGhpcy5yZXF1ZXN0SGVhZGVyICk7XG5cdFx0bG9hZGVyLnNldFdpdGhDcmVkZW50aWFscyggdGhpcy53aXRoQ3JlZGVudGlhbHMgKTtcblxuXHRcdGxvYWRlci5sb2FkKCB1cmwsIGZ1bmN0aW9uICggZGF0YSApIHtcblxuXHRcdFx0dHJ5IHtcblxuXHRcdFx0XHRzY29wZS5wYXJzZSggZGF0YSwgcmVzb3VyY2VQYXRoLCBmdW5jdGlvbiAoIGdsdGYgKSB7XG5cblx0XHRcdFx0XHRvbkxvYWQoIGdsdGYgKTtcblxuXHRcdFx0XHRcdHNjb3BlLm1hbmFnZXIuaXRlbUVuZCggdXJsICk7XG5cblx0XHRcdFx0fSwgX29uRXJyb3IgKTtcblxuXHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cblx0XHRcdFx0X29uRXJyb3IoIGUgKTtcblxuXHRcdFx0fVxuXG5cdFx0fSwgb25Qcm9ncmVzcywgX29uRXJyb3IgKTtcblxuXHR9XG5cblx0c2V0RFJBQ09Mb2FkZXIoIGRyYWNvTG9hZGVyICkge1xuXG5cdFx0dGhpcy5kcmFjb0xvYWRlciA9IGRyYWNvTG9hZGVyO1xuXHRcdHJldHVybiB0aGlzO1xuXG5cdH1cblxuXHRzZXRERFNMb2FkZXIoKSB7XG5cblx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cblx0XHRcdCdUSFJFRS5HTFRGTG9hZGVyOiBcIk1TRlRfdGV4dHVyZV9kZHNcIiBubyBsb25nZXIgc3VwcG9ydGVkLiBQbGVhc2UgdXBkYXRlIHRvIFwiS0hSX3RleHR1cmVfYmFzaXN1XCIuJ1xuXG5cdFx0KTtcblxuXHR9XG5cblx0c2V0S1RYMkxvYWRlcigga3R4MkxvYWRlciApIHtcblxuXHRcdHRoaXMua3R4MkxvYWRlciA9IGt0eDJMb2FkZXI7XG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fVxuXG5cdHNldE1lc2hvcHREZWNvZGVyKCBtZXNob3B0RGVjb2RlciApIHtcblxuXHRcdHRoaXMubWVzaG9wdERlY29kZXIgPSBtZXNob3B0RGVjb2Rlcjtcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9XG5cblx0cmVnaXN0ZXIoIGNhbGxiYWNrICkge1xuXG5cdFx0aWYgKCB0aGlzLnBsdWdpbkNhbGxiYWNrcy5pbmRleE9mKCBjYWxsYmFjayApID09PSAtIDEgKSB7XG5cblx0XHRcdHRoaXMucGx1Z2luQ2FsbGJhY2tzLnB1c2goIGNhbGxiYWNrICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblxuXHR9XG5cblx0dW5yZWdpc3RlciggY2FsbGJhY2sgKSB7XG5cblx0XHRpZiAoIHRoaXMucGx1Z2luQ2FsbGJhY2tzLmluZGV4T2YoIGNhbGxiYWNrICkgIT09IC0gMSApIHtcblxuXHRcdFx0dGhpcy5wbHVnaW5DYWxsYmFja3Muc3BsaWNlKCB0aGlzLnBsdWdpbkNhbGxiYWNrcy5pbmRleE9mKCBjYWxsYmFjayApLCAxICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblxuXHR9XG5cblx0cGFyc2UoIGRhdGEsIHBhdGgsIG9uTG9hZCwgb25FcnJvciApIHtcblxuXHRcdGxldCBjb250ZW50O1xuXHRcdGNvbnN0IGV4dGVuc2lvbnMgPSB7fTtcblx0XHRjb25zdCBwbHVnaW5zID0ge307XG5cblx0XHRpZiAoIHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJyApIHtcblxuXHRcdFx0Y29udGVudCA9IGRhdGE7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRjb25zdCBtYWdpYyA9IExvYWRlclV0aWxzLmRlY29kZVRleHQoIG5ldyBVaW50OEFycmF5KCBkYXRhLCAwLCA0ICkgKTtcblxuXHRcdFx0aWYgKCBtYWdpYyA9PT0gQklOQVJZX0VYVEVOU0lPTl9IRUFERVJfTUFHSUMgKSB7XG5cblx0XHRcdFx0dHJ5IHtcblxuXHRcdFx0XHRcdGV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX0JJTkFSWV9HTFRGIF0gPSBuZXcgR0xURkJpbmFyeUV4dGVuc2lvbiggZGF0YSApO1xuXG5cdFx0XHRcdH0gY2F0Y2ggKCBlcnJvciApIHtcblxuXHRcdFx0XHRcdGlmICggb25FcnJvciApIG9uRXJyb3IoIGVycm9yICk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb250ZW50ID0gZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfQklOQVJZX0dMVEYgXS5jb250ZW50O1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdGNvbnRlbnQgPSBMb2FkZXJVdGlscy5kZWNvZGVUZXh0KCBuZXcgVWludDhBcnJheSggZGF0YSApICk7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKCBjb250ZW50ICk7XG5cblx0XHRpZiAoIGpzb24uYXNzZXQgPT09IHVuZGVmaW5lZCB8fCBqc29uLmFzc2V0LnZlcnNpb25bIDAgXSA8IDIgKSB7XG5cblx0XHRcdGlmICggb25FcnJvciApIG9uRXJyb3IoIG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IFVuc3VwcG9ydGVkIGFzc2V0LiBnbFRGIHZlcnNpb25zID49Mi4wIGFyZSBzdXBwb3J0ZWQuJyApICk7XG5cdFx0XHRyZXR1cm47XG5cblx0XHR9XG5cblx0XHRjb25zdCBwYXJzZXIgPSBuZXcgR0xURlBhcnNlcigganNvbiwge1xuXG5cdFx0XHRwYXRoOiBwYXRoIHx8IHRoaXMucmVzb3VyY2VQYXRoIHx8ICcnLFxuXHRcdFx0Y3Jvc3NPcmlnaW46IHRoaXMuY3Jvc3NPcmlnaW4sXG5cdFx0XHRyZXF1ZXN0SGVhZGVyOiB0aGlzLnJlcXVlc3RIZWFkZXIsXG5cdFx0XHRtYW5hZ2VyOiB0aGlzLm1hbmFnZXIsXG5cdFx0XHRrdHgyTG9hZGVyOiB0aGlzLmt0eDJMb2FkZXIsXG5cdFx0XHRtZXNob3B0RGVjb2RlcjogdGhpcy5tZXNob3B0RGVjb2RlclxuXG5cdFx0fSApO1xuXG5cdFx0cGFyc2VyLmZpbGVMb2FkZXIuc2V0UmVxdWVzdEhlYWRlciggdGhpcy5yZXF1ZXN0SGVhZGVyICk7XG5cblx0XHRmb3IgKCBsZXQgaSA9IDA7IGkgPCB0aGlzLnBsdWdpbkNhbGxiYWNrcy5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdGNvbnN0IHBsdWdpbiA9IHRoaXMucGx1Z2luQ2FsbGJhY2tzWyBpIF0oIHBhcnNlciApO1xuXHRcdFx0cGx1Z2luc1sgcGx1Z2luLm5hbWUgXSA9IHBsdWdpbjtcblxuXHRcdFx0Ly8gV29ya2Fyb3VuZCB0byBhdm9pZCBkZXRlcm1pbmluZyBhcyB1bmtub3duIGV4dGVuc2lvblxuXHRcdFx0Ly8gaW4gYWRkVW5rbm93bkV4dGVuc2lvbnNUb1VzZXJEYXRhKCkuXG5cdFx0XHQvLyBSZW1vdmUgdGhpcyB3b3JrYXJvdW5kIGlmIHdlIG1vdmUgYWxsIHRoZSBleGlzdGluZ1xuXHRcdFx0Ly8gZXh0ZW5zaW9uIGhhbmRsZXJzIHRvIHBsdWdpbiBzeXN0ZW1cblx0XHRcdGV4dGVuc2lvbnNbIHBsdWdpbi5uYW1lIF0gPSB0cnVlO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBqc29uLmV4dGVuc2lvbnNVc2VkICkge1xuXG5cdFx0XHRmb3IgKCBsZXQgaSA9IDA7IGkgPCBqc29uLmV4dGVuc2lvbnNVc2VkLmxlbmd0aDsgKysgaSApIHtcblxuXHRcdFx0XHRjb25zdCBleHRlbnNpb25OYW1lID0ganNvbi5leHRlbnNpb25zVXNlZFsgaSBdO1xuXHRcdFx0XHRjb25zdCBleHRlbnNpb25zUmVxdWlyZWQgPSBqc29uLmV4dGVuc2lvbnNSZXF1aXJlZCB8fCBbXTtcblxuXHRcdFx0XHRzd2l0Y2ggKCBleHRlbnNpb25OYW1lICkge1xuXG5cdFx0XHRcdFx0Y2FzZSBFWFRFTlNJT05TLktIUl9NQVRFUklBTFNfVU5MSVQ6XG5cdFx0XHRcdFx0XHRleHRlbnNpb25zWyBleHRlbnNpb25OYW1lIF0gPSBuZXcgR0xURk1hdGVyaWFsc1VubGl0RXh0ZW5zaW9uKCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1BCUl9TUEVDVUxBUl9HTE9TU0lORVNTOlxuXHRcdFx0XHRcdFx0ZXh0ZW5zaW9uc1sgZXh0ZW5zaW9uTmFtZSBdID0gbmV3IEdMVEZNYXRlcmlhbHNQYnJTcGVjdWxhckdsb3NzaW5lc3NFeHRlbnNpb24oKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSBFWFRFTlNJT05TLktIUl9EUkFDT19NRVNIX0NPTVBSRVNTSU9OOlxuXHRcdFx0XHRcdFx0ZXh0ZW5zaW9uc1sgZXh0ZW5zaW9uTmFtZSBdID0gbmV3IEdMVEZEcmFjb01lc2hDb21wcmVzc2lvbkV4dGVuc2lvbigganNvbiwgdGhpcy5kcmFjb0xvYWRlciApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlIEVYVEVOU0lPTlMuS0hSX1RFWFRVUkVfVFJBTlNGT1JNOlxuXHRcdFx0XHRcdFx0ZXh0ZW5zaW9uc1sgZXh0ZW5zaW9uTmFtZSBdID0gbmV3IEdMVEZUZXh0dXJlVHJhbnNmb3JtRXh0ZW5zaW9uKCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgRVhURU5TSU9OUy5LSFJfTUVTSF9RVUFOVElaQVRJT046XG5cdFx0XHRcdFx0XHRleHRlbnNpb25zWyBleHRlbnNpb25OYW1lIF0gPSBuZXcgR0xURk1lc2hRdWFudGl6YXRpb25FeHRlbnNpb24oKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0ZGVmYXVsdDpcblxuXHRcdFx0XHRcdFx0aWYgKCBleHRlbnNpb25zUmVxdWlyZWQuaW5kZXhPZiggZXh0ZW5zaW9uTmFtZSApID49IDAgJiYgcGx1Z2luc1sgZXh0ZW5zaW9uTmFtZSBdID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuR0xURkxvYWRlcjogVW5rbm93biBleHRlbnNpb24gXCInICsgZXh0ZW5zaW9uTmFtZSArICdcIi4nICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHBhcnNlci5zZXRFeHRlbnNpb25zKCBleHRlbnNpb25zICk7XG5cdFx0cGFyc2VyLnNldFBsdWdpbnMoIHBsdWdpbnMgKTtcbiAgICBwYXJzZXIucGFyc2UoIG9uTG9hZCwgb25FcnJvciApO1xuXG5cdH1cblxufVxuXG4vKiBHTFRGUkVHSVNUUlkgKi9cblxuZnVuY3Rpb24gR0xURlJlZ2lzdHJ5KCkge1xuXG5cdGxldCBvYmplY3RzID0ge307XG5cblx0cmV0dXJuXHR7XG5cblx0XHRnZXQ6IGZ1bmN0aW9uICgga2V5ICkge1xuXG5cdFx0XHRyZXR1cm4gb2JqZWN0c1sga2V5IF07XG5cblx0XHR9LFxuXG5cdFx0YWRkOiBmdW5jdGlvbiAoIGtleSwgb2JqZWN0ICkge1xuXG5cdFx0XHRvYmplY3RzWyBrZXkgXSA9IG9iamVjdDtcblxuXHRcdH0sXG5cblx0XHRyZW1vdmU6IGZ1bmN0aW9uICgga2V5ICkge1xuXG5cdFx0XHRkZWxldGUgb2JqZWN0c1sga2V5IF07XG5cblx0XHR9LFxuXG5cdFx0cmVtb3ZlQWxsOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdG9iamVjdHMgPSB7fTtcblxuXHRcdH1cblxuXHR9O1xuXG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqKioqKiBFWFRFTlNJT05TICoqKioqKioqKioqL1xuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuY29uc3QgRVhURU5TSU9OUyA9IHtcblx0S0hSX0JJTkFSWV9HTFRGOiAnS0hSX2JpbmFyeV9nbFRGJyxcblx0S0hSX0RSQUNPX01FU0hfQ09NUFJFU1NJT046ICdLSFJfZHJhY29fbWVzaF9jb21wcmVzc2lvbicsXG5cdEtIUl9MSUdIVFNfUFVOQ1RVQUw6ICdLSFJfbGlnaHRzX3B1bmN0dWFsJyxcblx0S0hSX01BVEVSSUFMU19DTEVBUkNPQVQ6ICdLSFJfbWF0ZXJpYWxzX2NsZWFyY29hdCcsXG5cdEtIUl9NQVRFUklBTFNfUEJSX1NQRUNVTEFSX0dMT1NTSU5FU1M6ICdLSFJfbWF0ZXJpYWxzX3BiclNwZWN1bGFyR2xvc3NpbmVzcycsXG5cdEtIUl9NQVRFUklBTFNfVFJBTlNNSVNTSU9OOiAnS0hSX21hdGVyaWFsc190cmFuc21pc3Npb24nLFxuXHRLSFJfTUFURVJJQUxTX1VOTElUOiAnS0hSX21hdGVyaWFsc191bmxpdCcsXG5cdEtIUl9URVhUVVJFX0JBU0lTVTogJ0tIUl90ZXh0dXJlX2Jhc2lzdScsXG5cdEtIUl9URVhUVVJFX1RSQU5TRk9STTogJ0tIUl90ZXh0dXJlX3RyYW5zZm9ybScsXG5cdEtIUl9NRVNIX1FVQU5USVpBVElPTjogJ0tIUl9tZXNoX3F1YW50aXphdGlvbicsXG5cdEVYVF9URVhUVVJFX1dFQlA6ICdFWFRfdGV4dHVyZV93ZWJwJyxcblx0RVhUX01FU0hPUFRfQ09NUFJFU1NJT046ICdFWFRfbWVzaG9wdF9jb21wcmVzc2lvbidcbn07XG5cbi8qKlxuICogUHVuY3R1YWwgTGlnaHRzIEV4dGVuc2lvblxuICpcbiAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9leHRlbnNpb25zLzIuMC9LaHJvbm9zL0tIUl9saWdodHNfcHVuY3R1YWxcbiAqL1xuY2xhc3MgR0xURkxpZ2h0c0V4dGVuc2lvbiB7XG5cblx0Y29uc3RydWN0b3IoIHBhcnNlciApIHtcblxuXHRcdHRoaXMucGFyc2VyID0gcGFyc2VyO1xuXHRcdHRoaXMubmFtZSA9IEVYVEVOU0lPTlMuS0hSX0xJR0hUU19QVU5DVFVBTDtcblxuXHRcdC8vIE9iamVjdDNEIGluc3RhbmNlIGNhY2hlc1xuXHRcdHRoaXMuY2FjaGUgPSB7IHJlZnM6IHt9LCB1c2VzOiB7fSB9O1xuXG5cdH1cblxuXHRfbWFya0RlZnMoKSB7XG5cblx0XHRjb25zdCBwYXJzZXIgPSB0aGlzLnBhcnNlcjtcblx0XHRjb25zdCBub2RlRGVmcyA9IHRoaXMucGFyc2VyLmpzb24ubm9kZXMgfHwgW107XG5cblx0XHRmb3IgKCBsZXQgbm9kZUluZGV4ID0gMCwgbm9kZUxlbmd0aCA9IG5vZGVEZWZzLmxlbmd0aDsgbm9kZUluZGV4IDwgbm9kZUxlbmd0aDsgbm9kZUluZGV4ICsrICkge1xuXG5cdFx0XHRjb25zdCBub2RlRGVmID0gbm9kZURlZnNbIG5vZGVJbmRleCBdO1xuXG5cdFx0XHRpZiAoIG5vZGVEZWYuZXh0ZW5zaW9uc1xuXHRcdFx0XHRcdCYmIG5vZGVEZWYuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF1cblx0XHRcdFx0XHQmJiBub2RlRGVmLmV4dGVuc2lvbnNbIHRoaXMubmFtZSBdLmxpZ2h0ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0cGFyc2VyLl9hZGROb2RlUmVmKCB0aGlzLmNhY2hlLCBub2RlRGVmLmV4dGVuc2lvbnNbIHRoaXMubmFtZSBdLmxpZ2h0ICk7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHR9XG5cblx0X2xvYWRMaWdodCggbGlnaHRJbmRleCApIHtcblxuXHRcdGNvbnN0IHBhcnNlciA9IHRoaXMucGFyc2VyO1xuXHRcdGNvbnN0IGNhY2hlS2V5ID0gJ2xpZ2h0OicgKyBsaWdodEluZGV4O1xuXHRcdGxldCBkZXBlbmRlbmN5ID0gcGFyc2VyLmNhY2hlLmdldCggY2FjaGVLZXkgKTtcblxuXHRcdGlmICggZGVwZW5kZW5jeSApIHJldHVybiBkZXBlbmRlbmN5O1xuXG5cdFx0Y29uc3QganNvbiA9IHBhcnNlci5qc29uO1xuXHRcdGNvbnN0IGV4dGVuc2lvbnMgPSAoIGpzb24uZXh0ZW5zaW9ucyAmJiBqc29uLmV4dGVuc2lvbnNbIHRoaXMubmFtZSBdICkgfHwge307XG5cdFx0Y29uc3QgbGlnaHREZWZzID0gZXh0ZW5zaW9ucy5saWdodHMgfHwgW107XG5cdFx0Y29uc3QgbGlnaHREZWYgPSBsaWdodERlZnNbIGxpZ2h0SW5kZXggXTtcblx0XHRsZXQgbGlnaHROb2RlO1xuXG5cdFx0Y29uc3QgY29sb3IgPSBuZXcgQ29sb3IoIDB4ZmZmZmZmICk7XG5cblx0XHRpZiAoIGxpZ2h0RGVmLmNvbG9yICE9PSB1bmRlZmluZWQgKSBjb2xvci5mcm9tQXJyYXkoIGxpZ2h0RGVmLmNvbG9yICk7XG5cblx0XHRjb25zdCByYW5nZSA9IGxpZ2h0RGVmLnJhbmdlICE9PSB1bmRlZmluZWQgPyBsaWdodERlZi5yYW5nZSA6IDA7XG5cblx0XHRzd2l0Y2ggKCBsaWdodERlZi50eXBlICkge1xuXG5cdFx0XHRjYXNlICdkaXJlY3Rpb25hbCc6XG5cdFx0XHRcdGxpZ2h0Tm9kZSA9IG5ldyBEaXJlY3Rpb25hbExpZ2h0KCBjb2xvciApO1xuXHRcdFx0XHRsaWdodE5vZGUudGFyZ2V0LnBvc2l0aW9uLnNldCggMCwgMCwgLSAxICk7XG5cdFx0XHRcdGxpZ2h0Tm9kZS5hZGQoIGxpZ2h0Tm9kZS50YXJnZXQgKTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgJ3BvaW50Jzpcblx0XHRcdFx0bGlnaHROb2RlID0gbmV3IFBvaW50TGlnaHQoIGNvbG9yICk7XG5cdFx0XHRcdGxpZ2h0Tm9kZS5kaXN0YW5jZSA9IHJhbmdlO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAnc3BvdCc6XG5cdFx0XHRcdGxpZ2h0Tm9kZSA9IG5ldyBTcG90TGlnaHQoIGNvbG9yICk7XG5cdFx0XHRcdGxpZ2h0Tm9kZS5kaXN0YW5jZSA9IHJhbmdlO1xuXHRcdFx0XHQvLyBIYW5kbGUgc3BvdGxpZ2h0IHByb3BlcnRpZXMuXG5cdFx0XHRcdGxpZ2h0RGVmLnNwb3QgPSBsaWdodERlZi5zcG90IHx8IHt9O1xuXHRcdFx0XHRsaWdodERlZi5zcG90LmlubmVyQ29uZUFuZ2xlID0gbGlnaHREZWYuc3BvdC5pbm5lckNvbmVBbmdsZSAhPT0gdW5kZWZpbmVkID8gbGlnaHREZWYuc3BvdC5pbm5lckNvbmVBbmdsZSA6IDA7XG5cdFx0XHRcdGxpZ2h0RGVmLnNwb3Qub3V0ZXJDb25lQW5nbGUgPSBsaWdodERlZi5zcG90Lm91dGVyQ29uZUFuZ2xlICE9PSB1bmRlZmluZWQgPyBsaWdodERlZi5zcG90Lm91dGVyQ29uZUFuZ2xlIDogTWF0aC5QSSAvIDQuMDtcblx0XHRcdFx0bGlnaHROb2RlLmFuZ2xlID0gbGlnaHREZWYuc3BvdC5vdXRlckNvbmVBbmdsZTtcblx0XHRcdFx0bGlnaHROb2RlLnBlbnVtYnJhID0gMS4wIC0gbGlnaHREZWYuc3BvdC5pbm5lckNvbmVBbmdsZSAvIGxpZ2h0RGVmLnNwb3Qub3V0ZXJDb25lQW5nbGU7XG5cdFx0XHRcdGxpZ2h0Tm9kZS50YXJnZXQucG9zaXRpb24uc2V0KCAwLCAwLCAtIDEgKTtcblx0XHRcdFx0bGlnaHROb2RlLmFkZCggbGlnaHROb2RlLnRhcmdldCApO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuR0xURkxvYWRlcjogVW5leHBlY3RlZCBsaWdodCB0eXBlOiAnICsgbGlnaHREZWYudHlwZSApO1xuXG5cdFx0fVxuXG5cdFx0Ly8gU29tZSBsaWdodHMgKGUuZy4gc3BvdCkgZGVmYXVsdCB0byBhIHBvc2l0aW9uIG90aGVyIHRoYW4gdGhlIG9yaWdpbi4gUmVzZXQgdGhlIHBvc2l0aW9uXG5cdFx0Ly8gaGVyZSwgYmVjYXVzZSBub2RlLWxldmVsIHBhcnNpbmcgd2lsbCBvbmx5IG92ZXJyaWRlIHBvc2l0aW9uIGlmIGV4cGxpY2l0bHkgc3BlY2lmaWVkLlxuXHRcdGxpZ2h0Tm9kZS5wb3NpdGlvbi5zZXQoIDAsIDAsIDAgKTtcblxuXHRcdGxpZ2h0Tm9kZS5kZWNheSA9IDI7XG5cblx0XHRpZiAoIGxpZ2h0RGVmLmludGVuc2l0eSAhPT0gdW5kZWZpbmVkICkgbGlnaHROb2RlLmludGVuc2l0eSA9IGxpZ2h0RGVmLmludGVuc2l0eTtcblxuXHRcdGxpZ2h0Tm9kZS5uYW1lID0gcGFyc2VyLmNyZWF0ZVVuaXF1ZU5hbWUoIGxpZ2h0RGVmLm5hbWUgfHwgKCAnbGlnaHRfJyArIGxpZ2h0SW5kZXggKSApO1xuXG5cdFx0ZGVwZW5kZW5jeSA9IFByb21pc2UucmVzb2x2ZSggbGlnaHROb2RlICk7XG5cblx0XHRwYXJzZXIuY2FjaGUuYWRkKCBjYWNoZUtleSwgZGVwZW5kZW5jeSApO1xuXG5cdFx0cmV0dXJuIGRlcGVuZGVuY3k7XG5cblx0fVxuXG5cdGNyZWF0ZU5vZGVBdHRhY2htZW50KCBub2RlSW5kZXggKSB7XG5cblx0XHRjb25zdCBzZWxmID0gdGhpcztcblx0XHRjb25zdCBwYXJzZXIgPSB0aGlzLnBhcnNlcjtcblx0XHRjb25zdCBqc29uID0gcGFyc2VyLmpzb247XG5cdFx0Y29uc3Qgbm9kZURlZiA9IGpzb24ubm9kZXNbIG5vZGVJbmRleCBdO1xuXHRcdGNvbnN0IGxpZ2h0RGVmID0gKCBub2RlRGVmLmV4dGVuc2lvbnMgJiYgbm9kZURlZi5leHRlbnNpb25zWyB0aGlzLm5hbWUgXSApIHx8IHt9O1xuXHRcdGNvbnN0IGxpZ2h0SW5kZXggPSBsaWdodERlZi5saWdodDtcblxuXHRcdGlmICggbGlnaHRJbmRleCA9PT0gdW5kZWZpbmVkICkgcmV0dXJuIG51bGw7XG5cblx0XHRyZXR1cm4gdGhpcy5fbG9hZExpZ2h0KCBsaWdodEluZGV4ICkudGhlbiggZnVuY3Rpb24gKCBsaWdodCApIHtcblxuXHRcdFx0cmV0dXJuIHBhcnNlci5fZ2V0Tm9kZVJlZiggc2VsZi5jYWNoZSwgbGlnaHRJbmRleCwgbGlnaHQgKTtcblxuXHRcdH0gKTtcblxuXHR9XG5cbn1cblxuLyoqXG4gKiBVbmxpdCBNYXRlcmlhbHMgRXh0ZW5zaW9uXG4gKlxuICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX21hdGVyaWFsc191bmxpdFxuICovXG5jbGFzcyBHTFRGTWF0ZXJpYWxzVW5saXRFeHRlbnNpb24ge1xuXG5cdGNvbnN0cnVjdG9yKCkge1xuXG5cdFx0dGhpcy5uYW1lID0gRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1VOTElUO1xuXG5cdH1cblxuXHRnZXRNYXRlcmlhbFR5cGUoKSB7XG5cblx0XHRyZXR1cm4gTWVzaEJhc2ljTWF0ZXJpYWw7XG5cblx0fVxuXG5cdGV4dGVuZFBhcmFtcyggbWF0ZXJpYWxQYXJhbXMsIG1hdGVyaWFsRGVmLCBwYXJzZXIgKSB7XG5cblx0XHRjb25zdCBwZW5kaW5nID0gW107XG5cblx0XHRtYXRlcmlhbFBhcmFtcy5jb2xvciA9IG5ldyBDb2xvciggMS4wLCAxLjAsIDEuMCApO1xuXHRcdG1hdGVyaWFsUGFyYW1zLm9wYWNpdHkgPSAxLjA7XG5cblx0XHRjb25zdCBtZXRhbGxpY1JvdWdobmVzcyA9IG1hdGVyaWFsRGVmLnBick1ldGFsbGljUm91Z2huZXNzO1xuXG5cdFx0aWYgKCBtZXRhbGxpY1JvdWdobmVzcyApIHtcblxuXHRcdFx0aWYgKCBBcnJheS5pc0FycmF5KCBtZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JGYWN0b3IgKSApIHtcblxuXHRcdFx0XHRjb25zdCBhcnJheSA9IG1ldGFsbGljUm91Z2huZXNzLmJhc2VDb2xvckZhY3RvcjtcblxuXHRcdFx0XHRtYXRlcmlhbFBhcmFtcy5jb2xvci5mcm9tQXJyYXkoIGFycmF5ICk7XG5cdFx0XHRcdG1hdGVyaWFsUGFyYW1zLm9wYWNpdHkgPSBhcnJheVsgMyBdO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggbWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yVGV4dHVyZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAnbWFwJywgbWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yVGV4dHVyZSApICk7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHJldHVybiBQcm9taXNlLmFsbCggcGVuZGluZyApO1xuXG5cdH1cblxufVxuXG4vKipcbiAqIENsZWFyY29hdCBNYXRlcmlhbHMgRXh0ZW5zaW9uXG4gKlxuICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX21hdGVyaWFsc19jbGVhcmNvYXRcbiAqL1xuY2xhc3MgR0xURk1hdGVyaWFsc0NsZWFyY29hdEV4dGVuc2lvbiB7XG5cblx0Y29uc3RydWN0b3IoIHBhcnNlciApIHtcblxuXHRcdHRoaXMucGFyc2VyID0gcGFyc2VyO1xuXHRcdHRoaXMubmFtZSA9IEVYVEVOU0lPTlMuS0hSX01BVEVSSUFMU19DTEVBUkNPQVQ7XG5cblx0fVxuXG5cdGdldE1hdGVyaWFsVHlwZSggbWF0ZXJpYWxJbmRleCApIHtcblxuXHRcdGNvbnN0IHBhcnNlciA9IHRoaXMucGFyc2VyO1xuXHRcdGNvbnN0IG1hdGVyaWFsRGVmID0gcGFyc2VyLmpzb24ubWF0ZXJpYWxzWyBtYXRlcmlhbEluZGV4IF07XG5cblx0XHRpZiAoICEgbWF0ZXJpYWxEZWYuZXh0ZW5zaW9ucyB8fCAhIG1hdGVyaWFsRGVmLmV4dGVuc2lvbnNbIHRoaXMubmFtZSBdICkgcmV0dXJuIG51bGw7XG5cblx0XHRyZXR1cm4gTWVzaFBoeXNpY2FsTWF0ZXJpYWw7XG5cblx0fVxuXG5cdGV4dGVuZE1hdGVyaWFsUGFyYW1zKCBtYXRlcmlhbEluZGV4LCBtYXRlcmlhbFBhcmFtcyApIHtcblxuXHRcdGNvbnN0IHBhcnNlciA9IHRoaXMucGFyc2VyO1xuXHRcdGNvbnN0IG1hdGVyaWFsRGVmID0gcGFyc2VyLmpzb24ubWF0ZXJpYWxzWyBtYXRlcmlhbEluZGV4IF07XG5cblx0XHRpZiAoICEgbWF0ZXJpYWxEZWYuZXh0ZW5zaW9ucyB8fCAhIG1hdGVyaWFsRGVmLmV4dGVuc2lvbnNbIHRoaXMubmFtZSBdICkge1xuXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG5cblx0XHR9XG5cblx0XHRjb25zdCBwZW5kaW5nID0gW107XG5cblx0XHRjb25zdCBleHRlbnNpb24gPSBtYXRlcmlhbERlZi5leHRlbnNpb25zWyB0aGlzLm5hbWUgXTtcblxuXHRcdGlmICggZXh0ZW5zaW9uLmNsZWFyY29hdEZhY3RvciAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRtYXRlcmlhbFBhcmFtcy5jbGVhcmNvYXQgPSBleHRlbnNpb24uY2xlYXJjb2F0RmFjdG9yO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBleHRlbnNpb24uY2xlYXJjb2F0VGV4dHVyZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBtYXRlcmlhbFBhcmFtcywgJ2NsZWFyY29hdE1hcCcsIGV4dGVuc2lvbi5jbGVhcmNvYXRUZXh0dXJlICkgKTtcblxuXHRcdH1cblxuXHRcdGlmICggZXh0ZW5zaW9uLmNsZWFyY29hdFJvdWdobmVzc0ZhY3RvciAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRtYXRlcmlhbFBhcmFtcy5jbGVhcmNvYXRSb3VnaG5lc3MgPSBleHRlbnNpb24uY2xlYXJjb2F0Um91Z2huZXNzRmFjdG9yO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBleHRlbnNpb24uY2xlYXJjb2F0Um91Z2huZXNzVGV4dHVyZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBtYXRlcmlhbFBhcmFtcywgJ2NsZWFyY29hdFJvdWdobmVzc01hcCcsIGV4dGVuc2lvbi5jbGVhcmNvYXRSb3VnaG5lc3NUZXh0dXJlICkgKTtcblxuXHRcdH1cblxuXHRcdGlmICggZXh0ZW5zaW9uLmNsZWFyY29hdE5vcm1hbFRleHR1cmUgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdjbGVhcmNvYXROb3JtYWxNYXAnLCBleHRlbnNpb24uY2xlYXJjb2F0Tm9ybWFsVGV4dHVyZSApICk7XG5cblx0XHRcdGlmICggZXh0ZW5zaW9uLmNsZWFyY29hdE5vcm1hbFRleHR1cmUuc2NhbGUgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRjb25zdCBzY2FsZSA9IGV4dGVuc2lvbi5jbGVhcmNvYXROb3JtYWxUZXh0dXJlLnNjYWxlO1xuXG5cdFx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2IvdGhyZWUuanMvaXNzdWVzLzExNDM4I2lzc3VlY29tbWVudC01MDcwMDM5OTVcblx0XHRcdFx0bWF0ZXJpYWxQYXJhbXMuY2xlYXJjb2F0Tm9ybWFsU2NhbGUgPSBuZXcgVmVjdG9yMiggc2NhbGUsIC0gc2NhbGUgKTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKCBwZW5kaW5nICk7XG5cblx0fVxuXG59XG5cbi8qKlxuICogVHJhbnNtaXNzaW9uIE1hdGVyaWFscyBFeHRlbnNpb25cbiAqXG4gKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfbWF0ZXJpYWxzX3RyYW5zbWlzc2lvblxuICogRHJhZnQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9wdWxsLzE2OThcbiAqL1xuY2xhc3MgR0xURk1hdGVyaWFsc1RyYW5zbWlzc2lvbkV4dGVuc2lvbiB7XG5cblx0Y29uc3RydWN0b3IoIHBhcnNlciApIHtcblxuXHRcdHRoaXMucGFyc2VyID0gcGFyc2VyO1xuXHRcdHRoaXMubmFtZSA9IEVYVEVOU0lPTlMuS0hSX01BVEVSSUFMU19UUkFOU01JU1NJT047XG5cblx0fVxuXG5cdGdldE1hdGVyaWFsVHlwZSggbWF0ZXJpYWxJbmRleCApIHtcblxuXHRcdGNvbnN0IHBhcnNlciA9IHRoaXMucGFyc2VyO1xuXHRcdGNvbnN0IG1hdGVyaWFsRGVmID0gcGFyc2VyLmpzb24ubWF0ZXJpYWxzWyBtYXRlcmlhbEluZGV4IF07XG5cblx0XHRpZiAoICEgbWF0ZXJpYWxEZWYuZXh0ZW5zaW9ucyB8fCAhIG1hdGVyaWFsRGVmLmV4dGVuc2lvbnNbIHRoaXMubmFtZSBdICkgcmV0dXJuIG51bGw7XG5cblx0XHRyZXR1cm4gTWVzaFBoeXNpY2FsTWF0ZXJpYWw7XG5cblx0fVxuXG5cdGV4dGVuZE1hdGVyaWFsUGFyYW1zKCBtYXRlcmlhbEluZGV4LCBtYXRlcmlhbFBhcmFtcyApIHtcblxuXHRcdGNvbnN0IHBhcnNlciA9IHRoaXMucGFyc2VyO1xuXHRcdGNvbnN0IG1hdGVyaWFsRGVmID0gcGFyc2VyLmpzb24ubWF0ZXJpYWxzWyBtYXRlcmlhbEluZGV4IF07XG5cblx0XHRpZiAoICEgbWF0ZXJpYWxEZWYuZXh0ZW5zaW9ucyB8fCAhIG1hdGVyaWFsRGVmLmV4dGVuc2lvbnNbIHRoaXMubmFtZSBdICkge1xuXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG5cblx0XHR9XG5cblx0XHRjb25zdCBwZW5kaW5nID0gW107XG5cblx0XHRjb25zdCBleHRlbnNpb24gPSBtYXRlcmlhbERlZi5leHRlbnNpb25zWyB0aGlzLm5hbWUgXTtcblxuXHRcdGlmICggZXh0ZW5zaW9uLnRyYW5zbWlzc2lvbkZhY3RvciAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRtYXRlcmlhbFBhcmFtcy50cmFuc21pc3Npb24gPSBleHRlbnNpb24udHJhbnNtaXNzaW9uRmFjdG9yO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBleHRlbnNpb24udHJhbnNtaXNzaW9uVGV4dHVyZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBtYXRlcmlhbFBhcmFtcywgJ3RyYW5zbWlzc2lvbk1hcCcsIGV4dGVuc2lvbi50cmFuc21pc3Npb25UZXh0dXJlICkgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBQcm9taXNlLmFsbCggcGVuZGluZyApO1xuXG5cdH1cblxufVxuXG4vKipcbiAqIEJhc2lzVSBUZXh0dXJlIEV4dGVuc2lvblxuICpcbiAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9leHRlbnNpb25zLzIuMC9LaHJvbm9zL0tIUl90ZXh0dXJlX2Jhc2lzdVxuICovXG5jbGFzcyBHTFRGVGV4dHVyZUJhc2lzVUV4dGVuc2lvbiB7XG5cblx0Y29uc3RydWN0b3IoIHBhcnNlciApIHtcblxuXHRcdHRoaXMucGFyc2VyID0gcGFyc2VyO1xuXHRcdHRoaXMubmFtZSA9IEVYVEVOU0lPTlMuS0hSX1RFWFRVUkVfQkFTSVNVO1xuXG5cdH1cblxuXHRsb2FkVGV4dHVyZSggdGV4dHVyZUluZGV4ICkge1xuXG5cdFx0Y29uc3QgcGFyc2VyID0gdGhpcy5wYXJzZXI7XG5cdFx0Y29uc3QganNvbiA9IHBhcnNlci5qc29uO1xuXG5cdFx0Y29uc3QgdGV4dHVyZURlZiA9IGpzb24udGV4dHVyZXNbIHRleHR1cmVJbmRleCBdO1xuXG5cdFx0aWYgKCAhIHRleHR1cmVEZWYuZXh0ZW5zaW9ucyB8fCAhIHRleHR1cmVEZWYuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF0gKSB7XG5cblx0XHRcdHJldHVybiBudWxsO1xuXG5cdFx0fVxuXG5cdFx0Y29uc3QgZXh0ZW5zaW9uID0gdGV4dHVyZURlZi5leHRlbnNpb25zWyB0aGlzLm5hbWUgXTtcblx0XHRjb25zdCBzb3VyY2UgPSBqc29uLmltYWdlc1sgZXh0ZW5zaW9uLnNvdXJjZSBdO1xuXHRcdGNvbnN0IGxvYWRlciA9IHBhcnNlci5vcHRpb25zLmt0eDJMb2FkZXI7XG5cblx0XHRpZiAoICEgbG9hZGVyICkge1xuXG5cdFx0XHRpZiAoIGpzb24uZXh0ZW5zaW9uc1JlcXVpcmVkICYmIGpzb24uZXh0ZW5zaW9uc1JlcXVpcmVkLmluZGV4T2YoIHRoaXMubmFtZSApID49IDAgKSB7XG5cblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuR0xURkxvYWRlcjogc2V0S1RYMkxvYWRlciBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgbG9hZGluZyBLVFgyIHRleHR1cmVzJyApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIEFzc3VtZXMgdGhhdCB0aGUgZXh0ZW5zaW9uIGlzIG9wdGlvbmFsIGFuZCB0aGF0IGEgZmFsbGJhY2sgdGV4dHVyZSBpcyBwcmVzZW50XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gcGFyc2VyLmxvYWRUZXh0dXJlSW1hZ2UoIHRleHR1cmVJbmRleCwgc291cmNlLCBsb2FkZXIgKTtcblxuXHR9XG5cbn1cblxuLyoqXG4gKiBXZWJQIFRleHR1cmUgRXh0ZW5zaW9uXG4gKlxuICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL2V4dGVuc2lvbnMvMi4wL1ZlbmRvci9FWFRfdGV4dHVyZV93ZWJwXG4gKi9cbmNsYXNzIEdMVEZUZXh0dXJlV2ViUEV4dGVuc2lvbiB7XG5cblx0Y29uc3RydWN0b3IoIHBhcnNlciApIHtcblxuXHRcdHRoaXMucGFyc2VyID0gcGFyc2VyO1xuXHRcdHRoaXMubmFtZSA9IEVYVEVOU0lPTlMuRVhUX1RFWFRVUkVfV0VCUDtcblx0XHR0aGlzLmlzU3VwcG9ydGVkID0gbnVsbDtcblxuXHR9XG5cblx0bG9hZFRleHR1cmUoIHRleHR1cmVJbmRleCApIHtcblxuXHRcdGNvbnN0IG5hbWUgPSB0aGlzLm5hbWU7XG5cdFx0Y29uc3QgcGFyc2VyID0gdGhpcy5wYXJzZXI7XG5cdFx0Y29uc3QganNvbiA9IHBhcnNlci5qc29uO1xuXG5cdFx0Y29uc3QgdGV4dHVyZURlZiA9IGpzb24udGV4dHVyZXNbIHRleHR1cmVJbmRleCBdO1xuXG5cdFx0aWYgKCAhIHRleHR1cmVEZWYuZXh0ZW5zaW9ucyB8fCAhIHRleHR1cmVEZWYuZXh0ZW5zaW9uc1sgbmFtZSBdICkge1xuXG5cdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdH1cblxuXHRcdGNvbnN0IGV4dGVuc2lvbiA9IHRleHR1cmVEZWYuZXh0ZW5zaW9uc1sgbmFtZSBdO1xuXHRcdGNvbnN0IHNvdXJjZSA9IGpzb24uaW1hZ2VzWyBleHRlbnNpb24uc291cmNlIF07XG5cblx0XHRsZXQgbG9hZGVyID0gcGFyc2VyLnRleHR1cmVMb2FkZXI7XG5cdFx0aWYgKCBzb3VyY2UudXJpICkge1xuXG5cdFx0XHRjb25zdCBoYW5kbGVyID0gcGFyc2VyLm9wdGlvbnMubWFuYWdlci5nZXRIYW5kbGVyKCBzb3VyY2UudXJpICk7XG5cdFx0XHRpZiAoIGhhbmRsZXIgIT09IG51bGwgKSBsb2FkZXIgPSBoYW5kbGVyO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZGV0ZWN0U3VwcG9ydCgpLnRoZW4oIGZ1bmN0aW9uICggaXNTdXBwb3J0ZWQgKSB7XG5cblx0XHRcdGlmICggaXNTdXBwb3J0ZWQgKSByZXR1cm4gcGFyc2VyLmxvYWRUZXh0dXJlSW1hZ2UoIHRleHR1cmVJbmRleCwgc291cmNlLCBsb2FkZXIgKTtcblxuXHRcdFx0aWYgKCBqc29uLmV4dGVuc2lvbnNSZXF1aXJlZCAmJiBqc29uLmV4dGVuc2lvbnNSZXF1aXJlZC5pbmRleE9mKCBuYW1lICkgPj0gMCApIHtcblxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBXZWJQIHJlcXVpcmVkIGJ5IGFzc2V0IGJ1dCB1bnN1cHBvcnRlZC4nICk7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gRmFsbCBiYWNrIHRvIFBORyBvciBKUEVHLlxuXHRcdFx0cmV0dXJuIHBhcnNlci5sb2FkVGV4dHVyZSggdGV4dHVyZUluZGV4ICk7XG5cblx0XHR9ICk7XG5cblx0fVxuXG5cdGRldGVjdFN1cHBvcnQoKSB7XG5cblx0XHRpZiAoICEgdGhpcy5pc1N1cHBvcnRlZCApIHtcblxuXHRcdFx0dGhpcy5pc1N1cHBvcnRlZCA9IG5ldyBQcm9taXNlKCBmdW5jdGlvbiAoIHJlc29sdmUgKSB7XG5cblx0XHRcdFx0Y29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcblxuXHRcdFx0XHQvLyBMb3NzeSB0ZXN0IGltYWdlLiBTdXBwb3J0IGZvciBsb3NzeSBpbWFnZXMgZG9lc24ndCBndWFyYW50ZWUgc3VwcG9ydCBmb3IgYWxsXG5cdFx0XHRcdC8vIFdlYlAgaW1hZ2VzLCB1bmZvcnR1bmF0ZWx5LlxuXHRcdFx0XHRpbWFnZS5zcmMgPSAnZGF0YTppbWFnZS93ZWJwO2Jhc2U2NCxVa2xHUmlJQUFBQlhSVUpRVmxBNElCWUFBQUF3QVFDZEFTb0JBQUVBRHNEK0phUUFBM0FBQUFBQSc7XG5cblx0XHRcdFx0aW1hZ2Uub25sb2FkID0gaW1hZ2Uub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdHJlc29sdmUoIGltYWdlLmhlaWdodCA9PT0gMSApO1xuXG5cdFx0XHRcdH07XG5cblx0XHRcdH0gKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmlzU3VwcG9ydGVkO1xuXG5cdH1cblxufVxuXG4vKipcbiAqIG1lc2hvcHQgQnVmZmVyVmlldyBDb21wcmVzc2lvbiBFeHRlbnNpb25cbiAqXG4gKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvZXh0ZW5zaW9ucy8yLjAvVmVuZG9yL0VYVF9tZXNob3B0X2NvbXByZXNzaW9uXG4gKi9cbmNsYXNzIEdMVEZNZXNob3B0Q29tcHJlc3Npb24ge1xuXG5cdGNvbnN0cnVjdG9yKCBwYXJzZXIgKSB7XG5cblx0XHR0aGlzLm5hbWUgPSBFWFRFTlNJT05TLkVYVF9NRVNIT1BUX0NPTVBSRVNTSU9OO1xuXHRcdHRoaXMucGFyc2VyID0gcGFyc2VyO1xuXG5cdH1cblxuXHRsb2FkQnVmZmVyVmlldyggaW5kZXggKSB7XG5cblx0XHRjb25zdCBqc29uID0gdGhpcy5wYXJzZXIuanNvbjtcblx0XHRjb25zdCBidWZmZXJWaWV3ID0ganNvbi5idWZmZXJWaWV3c1sgaW5kZXggXTtcblxuXHRcdGlmICggYnVmZmVyVmlldy5leHRlbnNpb25zICYmIGJ1ZmZlclZpZXcuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF0gKSB7XG5cblx0XHRcdGNvbnN0IGV4dGVuc2lvbkRlZiA9IGJ1ZmZlclZpZXcuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF07XG5cblx0XHRcdGNvbnN0IGJ1ZmZlciA9IHRoaXMucGFyc2VyLmdldERlcGVuZGVuY3koICdidWZmZXInLCBleHRlbnNpb25EZWYuYnVmZmVyICk7XG5cdFx0XHRjb25zdCBkZWNvZGVyID0gdGhpcy5wYXJzZXIub3B0aW9ucy5tZXNob3B0RGVjb2RlcjtcblxuXHRcdFx0aWYgKCAhIGRlY29kZXIgfHwgISBkZWNvZGVyLnN1cHBvcnRlZCApIHtcblxuXHRcdFx0XHRpZiAoIGpzb24uZXh0ZW5zaW9uc1JlcXVpcmVkICYmIGpzb24uZXh0ZW5zaW9uc1JlcXVpcmVkLmluZGV4T2YoIHRoaXMubmFtZSApID49IDAgKSB7XG5cblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBzZXRNZXNob3B0RGVjb2RlciBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgbG9hZGluZyBjb21wcmVzc2VkIGZpbGVzJyApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHQvLyBBc3N1bWVzIHRoYXQgdGhlIGV4dGVuc2lvbiBpcyBvcHRpb25hbCBhbmQgdGhhdCBmYWxsYmFjayBidWZmZXIgZGF0YSBpcyBwcmVzZW50XG5cdFx0XHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBQcm9taXNlLmFsbCggWyBidWZmZXIsIGRlY29kZXIucmVhZHkgXSApLnRoZW4oIGZ1bmN0aW9uICggcmVzICkge1xuXG5cdFx0XHRcdGNvbnN0IGJ5dGVPZmZzZXQgPSBleHRlbnNpb25EZWYuYnl0ZU9mZnNldCB8fCAwO1xuXHRcdFx0XHRjb25zdCBieXRlTGVuZ3RoID0gZXh0ZW5zaW9uRGVmLmJ5dGVMZW5ndGggfHwgMDtcblxuXHRcdFx0XHRjb25zdCBjb3VudCA9IGV4dGVuc2lvbkRlZi5jb3VudDtcblx0XHRcdFx0Y29uc3Qgc3RyaWRlID0gZXh0ZW5zaW9uRGVmLmJ5dGVTdHJpZGU7XG5cblx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gbmV3IEFycmF5QnVmZmVyKCBjb3VudCAqIHN0cmlkZSApO1xuXHRcdFx0XHRjb25zdCBzb3VyY2UgPSBuZXcgVWludDhBcnJheSggcmVzWyAwIF0sIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGggKTtcblxuXHRcdFx0XHRkZWNvZGVyLmRlY29kZUdsdGZCdWZmZXIoIG5ldyBVaW50OEFycmF5KCByZXN1bHQgKSwgY291bnQsIHN0cmlkZSwgc291cmNlLCBleHRlbnNpb25EZWYubW9kZSwgZXh0ZW5zaW9uRGVmLmZpbHRlciApO1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXG5cdFx0XHR9ICk7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdH1cblxuXHR9XG5cbn1cblxuLyogQklOQVJZIEVYVEVOU0lPTiAqL1xuY29uc3QgQklOQVJZX0VYVEVOU0lPTl9IRUFERVJfTUFHSUMgPSAnZ2xURic7XG5jb25zdCBCSU5BUllfRVhURU5TSU9OX0hFQURFUl9MRU5HVEggPSAxMjtcbmNvbnN0IEJJTkFSWV9FWFRFTlNJT05fQ0hVTktfVFlQRVMgPSB7IEpTT046IDB4NEU0RjUzNEEsIEJJTjogMHgwMDRFNDk0MiB9O1xuXG5jbGFzcyBHTFRGQmluYXJ5RXh0ZW5zaW9uIHtcblxuXHRjb25zdHJ1Y3RvciggZGF0YSApIHtcblxuXHRcdHRoaXMubmFtZSA9IEVYVEVOU0lPTlMuS0hSX0JJTkFSWV9HTFRGO1xuXHRcdHRoaXMuY29udGVudCA9IG51bGw7XG5cdFx0dGhpcy5ib2R5ID0gbnVsbDtcblxuXHRcdGNvbnN0IGhlYWRlclZpZXcgPSBuZXcgRGF0YVZpZXcoIGRhdGEsIDAsIEJJTkFSWV9FWFRFTlNJT05fSEVBREVSX0xFTkdUSCApO1xuXG5cdFx0dGhpcy5oZWFkZXIgPSB7XG5cdFx0XHRtYWdpYzogTG9hZGVyVXRpbHMuZGVjb2RlVGV4dCggbmV3IFVpbnQ4QXJyYXkoIGRhdGEuc2xpY2UoIDAsIDQgKSApICksXG5cdFx0XHR2ZXJzaW9uOiBoZWFkZXJWaWV3LmdldFVpbnQzMiggNCwgdHJ1ZSApLFxuXHRcdFx0bGVuZ3RoOiBoZWFkZXJWaWV3LmdldFVpbnQzMiggOCwgdHJ1ZSApXG5cdFx0fTtcblxuXHRcdGlmICggdGhpcy5oZWFkZXIubWFnaWMgIT09IEJJTkFSWV9FWFRFTlNJT05fSEVBREVSX01BR0lDICkge1xuXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBVbnN1cHBvcnRlZCBnbFRGLUJpbmFyeSBoZWFkZXIuJyApO1xuXG5cdFx0fSBlbHNlIGlmICggdGhpcy5oZWFkZXIudmVyc2lvbiA8IDIuMCApIHtcblxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuR0xURkxvYWRlcjogTGVnYWN5IGJpbmFyeSBmaWxlIGRldGVjdGVkLicgKTtcblxuXHRcdH1cblxuXHRcdGNvbnN0IGNodW5rQ29udGVudHNMZW5ndGggPSB0aGlzLmhlYWRlci5sZW5ndGggLSBCSU5BUllfRVhURU5TSU9OX0hFQURFUl9MRU5HVEg7XG5cdFx0Y29uc3QgY2h1bmtWaWV3ID0gbmV3IERhdGFWaWV3KCBkYXRhLCBCSU5BUllfRVhURU5TSU9OX0hFQURFUl9MRU5HVEggKTtcblx0XHRsZXQgY2h1bmtJbmRleCA9IDA7XG5cblx0XHR3aGlsZSAoIGNodW5rSW5kZXggPCBjaHVua0NvbnRlbnRzTGVuZ3RoICkge1xuXG5cdFx0XHRjb25zdCBjaHVua0xlbmd0aCA9IGNodW5rVmlldy5nZXRVaW50MzIoIGNodW5rSW5kZXgsIHRydWUgKTtcblx0XHRcdGNodW5rSW5kZXggKz0gNDtcblxuXHRcdFx0Y29uc3QgY2h1bmtUeXBlID0gY2h1bmtWaWV3LmdldFVpbnQzMiggY2h1bmtJbmRleCwgdHJ1ZSApO1xuXHRcdFx0Y2h1bmtJbmRleCArPSA0O1xuXG5cdFx0XHRpZiAoIGNodW5rVHlwZSA9PT0gQklOQVJZX0VYVEVOU0lPTl9DSFVOS19UWVBFUy5KU09OICkge1xuXG5cdFx0XHRcdGNvbnN0IGNvbnRlbnRBcnJheSA9IG5ldyBVaW50OEFycmF5KCBkYXRhLCBCSU5BUllfRVhURU5TSU9OX0hFQURFUl9MRU5HVEggKyBjaHVua0luZGV4LCBjaHVua0xlbmd0aCApO1xuXHRcdFx0XHR0aGlzLmNvbnRlbnQgPSBMb2FkZXJVdGlscy5kZWNvZGVUZXh0KCBjb250ZW50QXJyYXkgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggY2h1bmtUeXBlID09PSBCSU5BUllfRVhURU5TSU9OX0NIVU5LX1RZUEVTLkJJTiApIHtcblxuXHRcdFx0XHRjb25zdCBieXRlT2Zmc2V0ID0gQklOQVJZX0VYVEVOU0lPTl9IRUFERVJfTEVOR1RIICsgY2h1bmtJbmRleDtcblx0XHRcdFx0dGhpcy5ib2R5ID0gZGF0YS5zbGljZSggYnl0ZU9mZnNldCwgYnl0ZU9mZnNldCArIGNodW5rTGVuZ3RoICk7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2xpZW50cyBtdXN0IGlnbm9yZSBjaHVua3Mgd2l0aCB1bmtub3duIHR5cGVzLlxuXG5cdFx0XHRjaHVua0luZGV4ICs9IGNodW5rTGVuZ3RoO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzLmNvbnRlbnQgPT09IG51bGwgKSB7XG5cblx0XHRcdHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IEpTT04gY29udGVudCBub3QgZm91bmQuJyApO1xuXG5cdFx0fVxuXG5cdH1cblxufVxuXG4vKipcbiAqIERSQUNPIE1lc2ggQ29tcHJlc3Npb24gRXh0ZW5zaW9uXG4gKlxuICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX2RyYWNvX21lc2hfY29tcHJlc3Npb25cbiAqL1xuY2xhc3MgR0xURkRyYWNvTWVzaENvbXByZXNzaW9uRXh0ZW5zaW9uIHtcblxuXHRjb25zdHJ1Y3RvcigganNvbiwgZHJhY29Mb2FkZXIgKSB7XG5cblx0XHRpZiAoICEgZHJhY29Mb2FkZXIgKSB7XG5cblx0XHRcdHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IE5vIERSQUNPTG9hZGVyIGluc3RhbmNlIHByb3ZpZGVkLicgKTtcblxuXHRcdH1cblxuXHRcdHRoaXMubmFtZSA9IEVYVEVOU0lPTlMuS0hSX0RSQUNPX01FU0hfQ09NUFJFU1NJT047XG5cdFx0dGhpcy5qc29uID0ganNvbjtcblx0XHR0aGlzLmRyYWNvTG9hZGVyID0gZHJhY29Mb2FkZXI7XG5cdFx0dGhpcy5kcmFjb0xvYWRlci5wcmVsb2FkKCk7XG5cblx0fVxuXG5cdGRlY29kZVByaW1pdGl2ZSggcHJpbWl0aXZlLCBwYXJzZXIgKSB7XG5cblx0XHRjb25zdCBqc29uID0gdGhpcy5qc29uO1xuXHRcdGNvbnN0IGRyYWNvTG9hZGVyID0gdGhpcy5kcmFjb0xvYWRlcjtcblx0XHRjb25zdCBidWZmZXJWaWV3SW5kZXggPSBwcmltaXRpdmUuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF0uYnVmZmVyVmlldztcblx0XHRjb25zdCBnbHRmQXR0cmlidXRlTWFwID0gcHJpbWl0aXZlLmV4dGVuc2lvbnNbIHRoaXMubmFtZSBdLmF0dHJpYnV0ZXM7XG5cdFx0Y29uc3QgdGhyZWVBdHRyaWJ1dGVNYXAgPSB7fTtcblx0XHRjb25zdCBhdHRyaWJ1dGVOb3JtYWxpemVkTWFwID0ge307XG5cdFx0Y29uc3QgYXR0cmlidXRlVHlwZU1hcCA9IHt9O1xuXG5cdFx0Zm9yICggY29uc3QgYXR0cmlidXRlTmFtZSBpbiBnbHRmQXR0cmlidXRlTWFwICkge1xuXG5cdFx0XHRjb25zdCB0aHJlZUF0dHJpYnV0ZU5hbWUgPSBBVFRSSUJVVEVTWyBhdHRyaWJ1dGVOYW1lIF0gfHwgYXR0cmlidXRlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0XHR0aHJlZUF0dHJpYnV0ZU1hcFsgdGhyZWVBdHRyaWJ1dGVOYW1lIF0gPSBnbHRmQXR0cmlidXRlTWFwWyBhdHRyaWJ1dGVOYW1lIF07XG5cblx0XHR9XG5cblx0XHRmb3IgKCBjb25zdCBhdHRyaWJ1dGVOYW1lIGluIHByaW1pdGl2ZS5hdHRyaWJ1dGVzICkge1xuXG5cdFx0XHRjb25zdCB0aHJlZUF0dHJpYnV0ZU5hbWUgPSBBVFRSSUJVVEVTWyBhdHRyaWJ1dGVOYW1lIF0gfHwgYXR0cmlidXRlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0XHRpZiAoIGdsdGZBdHRyaWJ1dGVNYXBbIGF0dHJpYnV0ZU5hbWUgXSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdGNvbnN0IGFjY2Vzc29yRGVmID0ganNvbi5hY2Nlc3NvcnNbIHByaW1pdGl2ZS5hdHRyaWJ1dGVzWyBhdHRyaWJ1dGVOYW1lIF0gXTtcblx0XHRcdFx0Y29uc3QgY29tcG9uZW50VHlwZSA9IFdFQkdMX0NPTVBPTkVOVF9UWVBFU1sgYWNjZXNzb3JEZWYuY29tcG9uZW50VHlwZSBdO1xuXG5cdFx0XHRcdGF0dHJpYnV0ZVR5cGVNYXBbIHRocmVlQXR0cmlidXRlTmFtZSBdID0gY29tcG9uZW50VHlwZTtcblx0XHRcdFx0YXR0cmlidXRlTm9ybWFsaXplZE1hcFsgdGhyZWVBdHRyaWJ1dGVOYW1lIF0gPSBhY2Nlc3NvckRlZi5ub3JtYWxpemVkID09PSB0cnVlO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gcGFyc2VyLmdldERlcGVuZGVuY3koICdidWZmZXJWaWV3JywgYnVmZmVyVmlld0luZGV4ICkudGhlbiggZnVuY3Rpb24gKCBidWZmZXJWaWV3ICkge1xuXG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoIGZ1bmN0aW9uICggcmVzb2x2ZSApIHtcblxuXHRcdFx0XHRkcmFjb0xvYWRlci5kZWNvZGVEcmFjb0ZpbGUoIGJ1ZmZlclZpZXcsIGZ1bmN0aW9uICggZ2VvbWV0cnkgKSB7XG5cblx0XHRcdFx0XHRmb3IgKCBjb25zdCBhdHRyaWJ1dGVOYW1lIGluIGdlb21ldHJ5LmF0dHJpYnV0ZXMgKSB7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGF0dHJpYnV0ZSA9IGdlb21ldHJ5LmF0dHJpYnV0ZXNbIGF0dHJpYnV0ZU5hbWUgXTtcblx0XHRcdFx0XHRcdGNvbnN0IG5vcm1hbGl6ZWQgPSBhdHRyaWJ1dGVOb3JtYWxpemVkTWFwWyBhdHRyaWJ1dGVOYW1lIF07XG5cblx0XHRcdFx0XHRcdGlmICggbm9ybWFsaXplZCAhPT0gdW5kZWZpbmVkICkgYXR0cmlidXRlLm5vcm1hbGl6ZWQgPSBub3JtYWxpemVkO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmVzb2x2ZSggZ2VvbWV0cnkgKTtcblxuXHRcdFx0XHR9LCB0aHJlZUF0dHJpYnV0ZU1hcCwgYXR0cmlidXRlVHlwZU1hcCApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHR9ICk7XG5cblx0fVxuXG59XG5cbi8qKlxuICogVGV4dHVyZSBUcmFuc2Zvcm0gRXh0ZW5zaW9uXG4gKlxuICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX3RleHR1cmVfdHJhbnNmb3JtXG4gKi9cbmNsYXNzIEdMVEZUZXh0dXJlVHJhbnNmb3JtRXh0ZW5zaW9uIHtcblxuXHRjb25zdHJ1Y3RvcigpIHtcblxuXHRcdHRoaXMubmFtZSA9IEVYVEVOU0lPTlMuS0hSX1RFWFRVUkVfVFJBTlNGT1JNO1xuXG5cdH1cblxuXHRleHRlbmRUZXh0dXJlKCB0ZXh0dXJlLCB0cmFuc2Zvcm0gKSB7XG5cblx0XHRpZiAoIHRyYW5zZm9ybS50ZXhDb29yZCAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5HTFRGTG9hZGVyOiBDdXN0b20gVVYgc2V0cyBpbiBcIicgKyB0aGlzLm5hbWUgKyAnXCIgZXh0ZW5zaW9uIG5vdCB5ZXQgc3VwcG9ydGVkLicgKTtcblxuXHRcdH1cblxuXHRcdGlmICggdHJhbnNmb3JtLm9mZnNldCA9PT0gdW5kZWZpbmVkICYmIHRyYW5zZm9ybS5yb3RhdGlvbiA9PT0gdW5kZWZpbmVkICYmIHRyYW5zZm9ybS5zY2FsZSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHQvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9pc3N1ZXMvMjE4MTkuXG5cdFx0XHRyZXR1cm4gdGV4dHVyZTtcblxuXHRcdH1cblxuXHRcdHRleHR1cmUgPSB0ZXh0dXJlLmNsb25lKCk7XG5cblx0XHRpZiAoIHRyYW5zZm9ybS5vZmZzZXQgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0dGV4dHVyZS5vZmZzZXQuZnJvbUFycmF5KCB0cmFuc2Zvcm0ub2Zmc2V0ICk7XG5cblx0XHR9XG5cblx0XHRpZiAoIHRyYW5zZm9ybS5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHR0ZXh0dXJlLnJvdGF0aW9uID0gdHJhbnNmb3JtLnJvdGF0aW9uO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCB0cmFuc2Zvcm0uc2NhbGUgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0dGV4dHVyZS5yZXBlYXQuZnJvbUFycmF5KCB0cmFuc2Zvcm0uc2NhbGUgKTtcblxuXHRcdH1cblxuXHRcdHRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xuXG5cdFx0cmV0dXJuIHRleHR1cmU7XG5cblx0fVxuXG59XG5cbi8qKlxuICogU3BlY3VsYXItR2xvc3NpbmVzcyBFeHRlbnNpb25cbiAqXG4gKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfbWF0ZXJpYWxzX3BiclNwZWN1bGFyR2xvc3NpbmVzc1xuICovXG5cbi8qKlxuICogQSBzdWIgY2xhc3Mgb2YgU3RhbmRhcmRNYXRlcmlhbCB3aXRoIHNvbWUgb2YgdGhlIGZ1bmN0aW9uYWxpdHlcbiAqIGNoYW5nZWQgdmlhIHRoZSBgb25CZWZvcmVDb21waWxlYCBjYWxsYmFja1xuICogQHBhaWxoZWFkXG4gKi9cbmNsYXNzIEdMVEZNZXNoU3RhbmRhcmRTR01hdGVyaWFsIGV4dGVuZHMgTWVzaFN0YW5kYXJkTWF0ZXJpYWwge1xuXG5cdGNvbnN0cnVjdG9yKCBwYXJhbXMgKSB7XG5cblx0XHRzdXBlcigpO1xuXG5cdFx0dGhpcy5pc0dMVEZTcGVjdWxhckdsb3NzaW5lc3NNYXRlcmlhbCA9IHRydWU7XG5cblx0XHQvL3ZhcmlvdXMgY2h1bmtzIHRoYXQgbmVlZCByZXBsYWNpbmdcblx0XHRjb25zdCBzcGVjdWxhck1hcFBhcnNGcmFnbWVudENodW5rID0gW1xuXHRcdFx0JyNpZmRlZiBVU0VfU1BFQ1VMQVJNQVAnLFxuXHRcdFx0J1x0dW5pZm9ybSBzYW1wbGVyMkQgc3BlY3VsYXJNYXA7Jyxcblx0XHRcdCcjZW5kaWYnXG5cdFx0XS5qb2luKCAnXFxuJyApO1xuXG5cdFx0Y29uc3QgZ2xvc3NpbmVzc01hcFBhcnNGcmFnbWVudENodW5rID0gW1xuXHRcdFx0JyNpZmRlZiBVU0VfR0xPU1NJTkVTU01BUCcsXG5cdFx0XHQnXHR1bmlmb3JtIHNhbXBsZXIyRCBnbG9zc2luZXNzTWFwOycsXG5cdFx0XHQnI2VuZGlmJ1xuXHRcdF0uam9pbiggJ1xcbicgKTtcblxuXHRcdGNvbnN0IHNwZWN1bGFyTWFwRnJhZ21lbnRDaHVuayA9IFtcblx0XHRcdCd2ZWMzIHNwZWN1bGFyRmFjdG9yID0gc3BlY3VsYXI7Jyxcblx0XHRcdCcjaWZkZWYgVVNFX1NQRUNVTEFSTUFQJyxcblx0XHRcdCdcdHZlYzQgdGV4ZWxTcGVjdWxhciA9IHRleHR1cmUyRCggc3BlY3VsYXJNYXAsIHZVdiApOycsXG5cdFx0XHQnXHR0ZXhlbFNwZWN1bGFyID0gc1JHQlRvTGluZWFyKCB0ZXhlbFNwZWN1bGFyICk7Jyxcblx0XHRcdCdcdC8vIHJlYWRzIGNoYW5uZWwgUkdCLCBjb21wYXRpYmxlIHdpdGggYSBnbFRGIFNwZWN1bGFyLUdsb3NzaW5lc3MgKFJHQkEpIHRleHR1cmUnLFxuXHRcdFx0J1x0c3BlY3VsYXJGYWN0b3IgKj0gdGV4ZWxTcGVjdWxhci5yZ2I7Jyxcblx0XHRcdCcjZW5kaWYnXG5cdFx0XS5qb2luKCAnXFxuJyApO1xuXG5cdFx0Y29uc3QgZ2xvc3NpbmVzc01hcEZyYWdtZW50Q2h1bmsgPSBbXG5cdFx0XHQnZmxvYXQgZ2xvc3NpbmVzc0ZhY3RvciA9IGdsb3NzaW5lc3M7Jyxcblx0XHRcdCcjaWZkZWYgVVNFX0dMT1NTSU5FU1NNQVAnLFxuXHRcdFx0J1x0dmVjNCB0ZXhlbEdsb3NzaW5lc3MgPSB0ZXh0dXJlMkQoIGdsb3NzaW5lc3NNYXAsIHZVdiApOycsXG5cdFx0XHQnXHQvLyByZWFkcyBjaGFubmVsIEEsIGNvbXBhdGlibGUgd2l0aCBhIGdsVEYgU3BlY3VsYXItR2xvc3NpbmVzcyAoUkdCQSkgdGV4dHVyZScsXG5cdFx0XHQnXHRnbG9zc2luZXNzRmFjdG9yICo9IHRleGVsR2xvc3NpbmVzcy5hOycsXG5cdFx0XHQnI2VuZGlmJ1xuXHRcdF0uam9pbiggJ1xcbicgKTtcblxuXHRcdGNvbnN0IGxpZ2h0UGh5c2ljYWxGcmFnbWVudENodW5rID0gW1xuXHRcdFx0J1BoeXNpY2FsTWF0ZXJpYWwgbWF0ZXJpYWw7Jyxcblx0XHRcdCdtYXRlcmlhbC5kaWZmdXNlQ29sb3IgPSBkaWZmdXNlQ29sb3IucmdiICogKCAxLiAtIG1heCggc3BlY3VsYXJGYWN0b3IuciwgbWF4KCBzcGVjdWxhckZhY3Rvci5nLCBzcGVjdWxhckZhY3Rvci5iICkgKSApOycsXG5cdFx0XHQndmVjMyBkeHkgPSBtYXgoIGFicyggZEZkeCggZ2VvbWV0cnlOb3JtYWwgKSApLCBhYnMoIGRGZHkoIGdlb21ldHJ5Tm9ybWFsICkgKSApOycsXG5cdFx0XHQnZmxvYXQgZ2VvbWV0cnlSb3VnaG5lc3MgPSBtYXgoIG1heCggZHh5LngsIGR4eS55ICksIGR4eS56ICk7Jyxcblx0XHRcdCdtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyA9IG1heCggMS4wIC0gZ2xvc3NpbmVzc0ZhY3RvciwgMC4wNTI1ICk7IC8vIDAuMDUyNSBjb3JyZXNwb25kcyB0byB0aGUgYmFzZSBtaXAgb2YgYSAyNTYgY3ViZW1hcC4nLFxuXHRcdFx0J21hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzICs9IGdlb21ldHJ5Um91Z2huZXNzOycsXG5cdFx0XHQnbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgPSBtaW4oIG1hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzLCAxLjAgKTsnLFxuXHRcdFx0J21hdGVyaWFsLnNwZWN1bGFyQ29sb3IgPSBzcGVjdWxhckZhY3RvcjsnLFxuXHRcdF0uam9pbiggJ1xcbicgKTtcblxuXHRcdGNvbnN0IHVuaWZvcm1zID0ge1xuXHRcdFx0c3BlY3VsYXI6IHsgdmFsdWU6IG5ldyBDb2xvcigpLnNldEhleCggMHhmZmZmZmYgKSB9LFxuXHRcdFx0Z2xvc3NpbmVzczogeyB2YWx1ZTogMSB9LFxuXHRcdFx0c3BlY3VsYXJNYXA6IHsgdmFsdWU6IG51bGwgfSxcblx0XHRcdGdsb3NzaW5lc3NNYXA6IHsgdmFsdWU6IG51bGwgfVxuXHRcdH07XG5cblx0XHR0aGlzLl9leHRyYVVuaWZvcm1zID0gdW5pZm9ybXM7XG5cblx0XHR0aGlzLm9uQmVmb3JlQ29tcGlsZSA9IGZ1bmN0aW9uICggc2hhZGVyICkge1xuXG5cdFx0XHRmb3IgKCBjb25zdCB1bmlmb3JtTmFtZSBpbiB1bmlmb3JtcyApIHtcblxuXHRcdFx0XHRzaGFkZXIudW5pZm9ybXNbIHVuaWZvcm1OYW1lIF0gPSB1bmlmb3Jtc1sgdW5pZm9ybU5hbWUgXTtcblxuXHRcdFx0fVxuXG5cdFx0XHRzaGFkZXIuZnJhZ21lbnRTaGFkZXIgPSBzaGFkZXIuZnJhZ21lbnRTaGFkZXJcblx0XHRcdFx0LnJlcGxhY2UoICd1bmlmb3JtIGZsb2F0IHJvdWdobmVzczsnLCAndW5pZm9ybSB2ZWMzIHNwZWN1bGFyOycgKVxuXHRcdFx0XHQucmVwbGFjZSggJ3VuaWZvcm0gZmxvYXQgbWV0YWxuZXNzOycsICd1bmlmb3JtIGZsb2F0IGdsb3NzaW5lc3M7JyApXG5cdFx0XHRcdC5yZXBsYWNlKCAnI2luY2x1ZGUgPHJvdWdobmVzc21hcF9wYXJzX2ZyYWdtZW50PicsIHNwZWN1bGFyTWFwUGFyc0ZyYWdtZW50Q2h1bmsgKVxuXHRcdFx0XHQucmVwbGFjZSggJyNpbmNsdWRlIDxtZXRhbG5lc3NtYXBfcGFyc19mcmFnbWVudD4nLCBnbG9zc2luZXNzTWFwUGFyc0ZyYWdtZW50Q2h1bmsgKVxuXHRcdFx0XHQucmVwbGFjZSggJyNpbmNsdWRlIDxyb3VnaG5lc3NtYXBfZnJhZ21lbnQ+Jywgc3BlY3VsYXJNYXBGcmFnbWVudENodW5rIClcblx0XHRcdFx0LnJlcGxhY2UoICcjaW5jbHVkZSA8bWV0YWxuZXNzbWFwX2ZyYWdtZW50PicsIGdsb3NzaW5lc3NNYXBGcmFnbWVudENodW5rIClcblx0XHRcdFx0LnJlcGxhY2UoICcjaW5jbHVkZSA8bGlnaHRzX3BoeXNpY2FsX2ZyYWdtZW50PicsIGxpZ2h0UGh5c2ljYWxGcmFnbWVudENodW5rICk7XG5cblx0XHR9O1xuXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoIHRoaXMsIHtcblxuXHRcdFx0c3BlY3VsYXI6IHtcblx0XHRcdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRyZXR1cm4gdW5pZm9ybXMuc3BlY3VsYXIudmFsdWU7XG5cblx0XHRcdFx0fSxcblx0XHRcdFx0c2V0OiBmdW5jdGlvbiAoIHYgKSB7XG5cblx0XHRcdFx0XHR1bmlmb3Jtcy5zcGVjdWxhci52YWx1ZSA9IHY7XG5cblx0XHRcdFx0fVxuXHRcdFx0fSxcblxuXHRcdFx0c3BlY3VsYXJNYXA6IHtcblx0XHRcdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRyZXR1cm4gdW5pZm9ybXMuc3BlY3VsYXJNYXAudmFsdWU7XG5cblx0XHRcdFx0fSxcblx0XHRcdFx0c2V0OiBmdW5jdGlvbiAoIHYgKSB7XG5cblx0XHRcdFx0XHR1bmlmb3Jtcy5zcGVjdWxhck1hcC52YWx1ZSA9IHY7XG5cblx0XHRcdFx0XHRpZiAoIHYgKSB7XG5cblx0XHRcdFx0XHRcdHRoaXMuZGVmaW5lcy5VU0VfU1BFQ1VMQVJNQVAgPSAnJzsgLy8gVVNFX1VWIGlzIHNldCBieSB0aGUgcmVuZGVyZXIgZm9yIHNwZWN1bGFyIG1hcHNcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdGRlbGV0ZSB0aGlzLmRlZmluZXMuVVNFX1NQRUNVTEFSTUFQO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdGdsb3NzaW5lc3M6IHtcblx0XHRcdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRyZXR1cm4gdW5pZm9ybXMuZ2xvc3NpbmVzcy52YWx1ZTtcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzZXQ6IGZ1bmN0aW9uICggdiApIHtcblxuXHRcdFx0XHRcdHVuaWZvcm1zLmdsb3NzaW5lc3MudmFsdWUgPSB2O1xuXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdGdsb3NzaW5lc3NNYXA6IHtcblx0XHRcdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRyZXR1cm4gdW5pZm9ybXMuZ2xvc3NpbmVzc01hcC52YWx1ZTtcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzZXQ6IGZ1bmN0aW9uICggdiApIHtcblxuXHRcdFx0XHRcdHVuaWZvcm1zLmdsb3NzaW5lc3NNYXAudmFsdWUgPSB2O1xuXG5cdFx0XHRcdFx0aWYgKCB2ICkge1xuXG5cdFx0XHRcdFx0XHR0aGlzLmRlZmluZXMuVVNFX0dMT1NTSU5FU1NNQVAgPSAnJztcblx0XHRcdFx0XHRcdHRoaXMuZGVmaW5lcy5VU0VfVVYgPSAnJztcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdGRlbGV0ZSB0aGlzLmRlZmluZXMuVVNFX0dMT1NTSU5FU1NNQVA7XG5cdFx0XHRcdFx0XHRkZWxldGUgdGhpcy5kZWZpbmVzLlVTRV9VVjtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHR9ICk7XG5cblx0XHRkZWxldGUgdGhpcy5tZXRhbG5lc3M7XG5cdFx0ZGVsZXRlIHRoaXMucm91Z2huZXNzO1xuXHRcdGRlbGV0ZSB0aGlzLm1ldGFsbmVzc01hcDtcblx0XHRkZWxldGUgdGhpcy5yb3VnaG5lc3NNYXA7XG5cblx0XHR0aGlzLnNldFZhbHVlcyggcGFyYW1zICk7XG5cblx0fVxuXG5cdGNvcHkoIHNvdXJjZSApIHtcblxuXHRcdHN1cGVyLmNvcHkoIHNvdXJjZSApO1xuXG5cdFx0dGhpcy5zcGVjdWxhck1hcCA9IHNvdXJjZS5zcGVjdWxhck1hcDtcblx0XHR0aGlzLnNwZWN1bGFyLmNvcHkoIHNvdXJjZS5zcGVjdWxhciApO1xuXHRcdHRoaXMuZ2xvc3NpbmVzc01hcCA9IHNvdXJjZS5nbG9zc2luZXNzTWFwO1xuXHRcdHRoaXMuZ2xvc3NpbmVzcyA9IHNvdXJjZS5nbG9zc2luZXNzO1xuXHRcdGRlbGV0ZSB0aGlzLm1ldGFsbmVzcztcblx0XHRkZWxldGUgdGhpcy5yb3VnaG5lc3M7XG5cdFx0ZGVsZXRlIHRoaXMubWV0YWxuZXNzTWFwO1xuXHRcdGRlbGV0ZSB0aGlzLnJvdWdobmVzc01hcDtcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9XG5cbn1cblxuXG5jbGFzcyBHTFRGTWF0ZXJpYWxzUGJyU3BlY3VsYXJHbG9zc2luZXNzRXh0ZW5zaW9uIHtcblxuXHRjb25zdHJ1Y3RvcigpIHtcblxuXHRcdHRoaXMubmFtZSA9IEVYVEVOU0lPTlMuS0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTUztcblxuXHRcdHRoaXMuc3BlY3VsYXJHbG9zc2luZXNzUGFyYW1zID0gW1xuXHRcdFx0J2NvbG9yJyxcblx0XHRcdCdtYXAnLFxuXHRcdFx0J2xpZ2h0TWFwJyxcblx0XHRcdCdsaWdodE1hcEludGVuc2l0eScsXG5cdFx0XHQnYW9NYXAnLFxuXHRcdFx0J2FvTWFwSW50ZW5zaXR5Jyxcblx0XHRcdCdlbWlzc2l2ZScsXG5cdFx0XHQnZW1pc3NpdmVJbnRlbnNpdHknLFxuXHRcdFx0J2VtaXNzaXZlTWFwJyxcblx0XHRcdCdidW1wTWFwJyxcblx0XHRcdCdidW1wU2NhbGUnLFxuXHRcdFx0J25vcm1hbE1hcCcsXG5cdFx0XHQnbm9ybWFsTWFwVHlwZScsXG5cdFx0XHQnZGlzcGxhY2VtZW50TWFwJyxcblx0XHRcdCdkaXNwbGFjZW1lbnRTY2FsZScsXG5cdFx0XHQnZGlzcGxhY2VtZW50QmlhcycsXG5cdFx0XHQnc3BlY3VsYXJNYXAnLFxuXHRcdFx0J3NwZWN1bGFyJyxcblx0XHRcdCdnbG9zc2luZXNzTWFwJyxcblx0XHRcdCdnbG9zc2luZXNzJyxcblx0XHRcdCdhbHBoYU1hcCcsXG5cdFx0XHQnZW52TWFwJyxcblx0XHRcdCdlbnZNYXBJbnRlbnNpdHknLFxuXHRcdFx0J3JlZnJhY3Rpb25SYXRpbycsXG5cdFx0XTtcblxuXHR9XG5cblx0Z2V0TWF0ZXJpYWxUeXBlKCkge1xuXG5cdFx0cmV0dXJuIEdMVEZNZXNoU3RhbmRhcmRTR01hdGVyaWFsO1xuXG5cdH1cblxuXHRleHRlbmRQYXJhbXMoIG1hdGVyaWFsUGFyYW1zLCBtYXRlcmlhbERlZiwgcGFyc2VyICkge1xuXG5cdFx0Y29uc3QgcGJyU3BlY3VsYXJHbG9zc2luZXNzID0gbWF0ZXJpYWxEZWYuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF07XG5cblx0XHRtYXRlcmlhbFBhcmFtcy5jb2xvciA9IG5ldyBDb2xvciggMS4wLCAxLjAsIDEuMCApO1xuXHRcdG1hdGVyaWFsUGFyYW1zLm9wYWNpdHkgPSAxLjA7XG5cblx0XHRjb25zdCBwZW5kaW5nID0gW107XG5cblx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIHBiclNwZWN1bGFyR2xvc3NpbmVzcy5kaWZmdXNlRmFjdG9yICkgKSB7XG5cblx0XHRcdGNvbnN0IGFycmF5ID0gcGJyU3BlY3VsYXJHbG9zc2luZXNzLmRpZmZ1c2VGYWN0b3I7XG5cblx0XHRcdG1hdGVyaWFsUGFyYW1zLmNvbG9yLmZyb21BcnJheSggYXJyYXkgKTtcblx0XHRcdG1hdGVyaWFsUGFyYW1zLm9wYWNpdHkgPSBhcnJheVsgMyBdO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBwYnJTcGVjdWxhckdsb3NzaW5lc3MuZGlmZnVzZVRleHR1cmUgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdtYXAnLCBwYnJTcGVjdWxhckdsb3NzaW5lc3MuZGlmZnVzZVRleHR1cmUgKSApO1xuXG5cdFx0fVxuXG5cdFx0bWF0ZXJpYWxQYXJhbXMuZW1pc3NpdmUgPSBuZXcgQ29sb3IoIDAuMCwgMC4wLCAwLjAgKTtcblx0XHRtYXRlcmlhbFBhcmFtcy5nbG9zc2luZXNzID0gcGJyU3BlY3VsYXJHbG9zc2luZXNzLmdsb3NzaW5lc3NGYWN0b3IgIT09IHVuZGVmaW5lZCA/IHBiclNwZWN1bGFyR2xvc3NpbmVzcy5nbG9zc2luZXNzRmFjdG9yIDogMS4wO1xuXHRcdG1hdGVyaWFsUGFyYW1zLnNwZWN1bGFyID0gbmV3IENvbG9yKCAxLjAsIDEuMCwgMS4wICk7XG5cblx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIHBiclNwZWN1bGFyR2xvc3NpbmVzcy5zcGVjdWxhckZhY3RvciApICkge1xuXG5cdFx0XHRtYXRlcmlhbFBhcmFtcy5zcGVjdWxhci5mcm9tQXJyYXkoIHBiclNwZWN1bGFyR2xvc3NpbmVzcy5zcGVjdWxhckZhY3RvciApO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBwYnJTcGVjdWxhckdsb3NzaW5lc3Muc3BlY3VsYXJHbG9zc2luZXNzVGV4dHVyZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRjb25zdCBzcGVjR2xvc3NNYXBEZWYgPSBwYnJTcGVjdWxhckdsb3NzaW5lc3Muc3BlY3VsYXJHbG9zc2luZXNzVGV4dHVyZTtcblx0XHRcdHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAnZ2xvc3NpbmVzc01hcCcsIHNwZWNHbG9zc01hcERlZiApICk7XG5cdFx0XHRwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBtYXRlcmlhbFBhcmFtcywgJ3NwZWN1bGFyTWFwJywgc3BlY0dsb3NzTWFwRGVmICkgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBQcm9taXNlLmFsbCggcGVuZGluZyApO1xuXG5cdH1cblxuXHRjcmVhdGVNYXRlcmlhbCggbWF0ZXJpYWxQYXJhbXMgKSB7XG5cblx0XHRjb25zdCBtYXRlcmlhbCA9IG5ldyBHTFRGTWVzaFN0YW5kYXJkU0dNYXRlcmlhbCggbWF0ZXJpYWxQYXJhbXMgKTtcblx0XHRtYXRlcmlhbC5mb2cgPSB0cnVlO1xuXG5cdFx0bWF0ZXJpYWwuY29sb3IgPSBtYXRlcmlhbFBhcmFtcy5jb2xvcjtcblxuXHRcdG1hdGVyaWFsLm1hcCA9IG1hdGVyaWFsUGFyYW1zLm1hcCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IG1hdGVyaWFsUGFyYW1zLm1hcDtcblxuXHRcdG1hdGVyaWFsLmxpZ2h0TWFwID0gbnVsbDtcblx0XHRtYXRlcmlhbC5saWdodE1hcEludGVuc2l0eSA9IDEuMDtcblxuXHRcdG1hdGVyaWFsLmFvTWFwID0gbWF0ZXJpYWxQYXJhbXMuYW9NYXAgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBtYXRlcmlhbFBhcmFtcy5hb01hcDtcblx0XHRtYXRlcmlhbC5hb01hcEludGVuc2l0eSA9IDEuMDtcblxuXHRcdG1hdGVyaWFsLmVtaXNzaXZlID0gbWF0ZXJpYWxQYXJhbXMuZW1pc3NpdmU7XG5cdFx0bWF0ZXJpYWwuZW1pc3NpdmVJbnRlbnNpdHkgPSAxLjA7XG5cdFx0bWF0ZXJpYWwuZW1pc3NpdmVNYXAgPSBtYXRlcmlhbFBhcmFtcy5lbWlzc2l2ZU1hcCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IG1hdGVyaWFsUGFyYW1zLmVtaXNzaXZlTWFwO1xuXG5cdFx0bWF0ZXJpYWwuYnVtcE1hcCA9IG1hdGVyaWFsUGFyYW1zLmJ1bXBNYXAgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBtYXRlcmlhbFBhcmFtcy5idW1wTWFwO1xuXHRcdG1hdGVyaWFsLmJ1bXBTY2FsZSA9IDE7XG5cblx0XHRtYXRlcmlhbC5ub3JtYWxNYXAgPSBtYXRlcmlhbFBhcmFtcy5ub3JtYWxNYXAgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBtYXRlcmlhbFBhcmFtcy5ub3JtYWxNYXA7XG5cdFx0bWF0ZXJpYWwubm9ybWFsTWFwVHlwZSA9IFRhbmdlbnRTcGFjZU5vcm1hbE1hcDtcblxuXHRcdGlmICggbWF0ZXJpYWxQYXJhbXMubm9ybWFsU2NhbGUgKSBtYXRlcmlhbC5ub3JtYWxTY2FsZSA9IG1hdGVyaWFsUGFyYW1zLm5vcm1hbFNjYWxlO1xuXG5cdFx0bWF0ZXJpYWwuZGlzcGxhY2VtZW50TWFwID0gbnVsbDtcblx0XHRtYXRlcmlhbC5kaXNwbGFjZW1lbnRTY2FsZSA9IDE7XG5cdFx0bWF0ZXJpYWwuZGlzcGxhY2VtZW50QmlhcyA9IDA7XG5cblx0XHRtYXRlcmlhbC5zcGVjdWxhck1hcCA9IG1hdGVyaWFsUGFyYW1zLnNwZWN1bGFyTWFwID09PSB1bmRlZmluZWQgPyBudWxsIDogbWF0ZXJpYWxQYXJhbXMuc3BlY3VsYXJNYXA7XG5cdFx0bWF0ZXJpYWwuc3BlY3VsYXIgPSBtYXRlcmlhbFBhcmFtcy5zcGVjdWxhcjtcblxuXHRcdG1hdGVyaWFsLmdsb3NzaW5lc3NNYXAgPSBtYXRlcmlhbFBhcmFtcy5nbG9zc2luZXNzTWFwID09PSB1bmRlZmluZWQgPyBudWxsIDogbWF0ZXJpYWxQYXJhbXMuZ2xvc3NpbmVzc01hcDtcblx0XHRtYXRlcmlhbC5nbG9zc2luZXNzID0gbWF0ZXJpYWxQYXJhbXMuZ2xvc3NpbmVzcztcblxuXHRcdG1hdGVyaWFsLmFscGhhTWFwID0gbnVsbDtcblxuXHRcdG1hdGVyaWFsLmVudk1hcCA9IG1hdGVyaWFsUGFyYW1zLmVudk1hcCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IG1hdGVyaWFsUGFyYW1zLmVudk1hcDtcblx0XHRtYXRlcmlhbC5lbnZNYXBJbnRlbnNpdHkgPSAxLjA7XG5cblx0XHRtYXRlcmlhbC5yZWZyYWN0aW9uUmF0aW8gPSAwLjk4O1xuXG5cdFx0cmV0dXJuIG1hdGVyaWFsO1xuXG5cdH1cblxufVxuXG4vKipcbiAqIE1lc2ggUXVhbnRpemF0aW9uIEV4dGVuc2lvblxuICpcbiAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9leHRlbnNpb25zLzIuMC9LaHJvbm9zL0tIUl9tZXNoX3F1YW50aXphdGlvblxuICovXG5jbGFzcyBHTFRGTWVzaFF1YW50aXphdGlvbkV4dGVuc2lvbiB7XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cblx0XHR0aGlzLm5hbWUgPSBFWFRFTlNJT05TLktIUl9NRVNIX1FVQU5USVpBVElPTjtcblxuXHR9XG5cbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKioqKioqIElOVEVSUE9MQVRJT04gKioqKioqKiovXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vLyBTcGxpbmUgSW50ZXJwb2xhdGlvblxuLy8gU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wL1JFQURNRS5tZCNhcHBlbmRpeC1jLXNwbGluZS1pbnRlcnBvbGF0aW9uXG5jbGFzcyBHTFRGQ3ViaWNTcGxpbmVJbnRlcnBvbGFudCBleHRlbmRzIEludGVycG9sYW50IHtcblxuXHRjb25zdHJ1Y3RvciggcGFyYW1ldGVyUG9zaXRpb25zLCBzYW1wbGVWYWx1ZXMsIHNhbXBsZVNpemUsIHJlc3VsdEJ1ZmZlciApIHtcblxuXHRcdHN1cGVyKCBwYXJhbWV0ZXJQb3NpdGlvbnMsIHNhbXBsZVZhbHVlcywgc2FtcGxlU2l6ZSwgcmVzdWx0QnVmZmVyICk7XG5cblx0fVxuXG5cdGNvcHlTYW1wbGVWYWx1ZV8oIGluZGV4ICkge1xuXG5cdFx0Ly8gQ29waWVzIGEgc2FtcGxlIHZhbHVlIHRvIHRoZSByZXN1bHQgYnVmZmVyLiBTZWUgZGVzY3JpcHRpb24gb2YgZ2xURlxuXHRcdC8vIENVQklDU1BMSU5FIHZhbHVlcyBsYXlvdXQgaW4gaW50ZXJwb2xhdGVfKCkgZnVuY3Rpb24gYmVsb3cuXG5cblx0XHRjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdEJ1ZmZlcixcblx0XHRcdHZhbHVlcyA9IHRoaXMuc2FtcGxlVmFsdWVzLFxuXHRcdFx0dmFsdWVTaXplID0gdGhpcy52YWx1ZVNpemUsXG5cdFx0XHRvZmZzZXQgPSBpbmRleCAqIHZhbHVlU2l6ZSAqIDMgKyB2YWx1ZVNpemU7XG5cblx0XHRmb3IgKCBsZXQgaSA9IDA7IGkgIT09IHZhbHVlU2l6ZTsgaSArKyApIHtcblxuXHRcdFx0cmVzdWx0WyBpIF0gPSB2YWx1ZXNbIG9mZnNldCArIGkgXTtcblxuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHQ7XG5cblx0fVxuXG59XG5cbkdMVEZDdWJpY1NwbGluZUludGVycG9sYW50LnByb3RvdHlwZS5iZWZvcmVTdGFydF8gPSBHTFRGQ3ViaWNTcGxpbmVJbnRlcnBvbGFudC5wcm90b3R5cGUuY29weVNhbXBsZVZhbHVlXztcblxuR0xURkN1YmljU3BsaW5lSW50ZXJwb2xhbnQucHJvdG90eXBlLmFmdGVyRW5kXyA9IEdMVEZDdWJpY1NwbGluZUludGVycG9sYW50LnByb3RvdHlwZS5jb3B5U2FtcGxlVmFsdWVfO1xuXG5HTFRGQ3ViaWNTcGxpbmVJbnRlcnBvbGFudC5wcm90b3R5cGUuaW50ZXJwb2xhdGVfID0gZnVuY3Rpb24gKCBpMSwgdDAsIHQsIHQxICkge1xuXG5cdGNvbnN0IHJlc3VsdCA9IHRoaXMucmVzdWx0QnVmZmVyO1xuXHRjb25zdCB2YWx1ZXMgPSB0aGlzLnNhbXBsZVZhbHVlcztcblx0Y29uc3Qgc3RyaWRlID0gdGhpcy52YWx1ZVNpemU7XG5cblx0Y29uc3Qgc3RyaWRlMiA9IHN0cmlkZSAqIDI7XG5cdGNvbnN0IHN0cmlkZTMgPSBzdHJpZGUgKiAzO1xuXG5cdGNvbnN0IHRkID0gdDEgLSB0MDtcblxuXHRjb25zdCBwID0gKCB0IC0gdDAgKSAvIHRkO1xuXHRjb25zdCBwcCA9IHAgKiBwO1xuXHRjb25zdCBwcHAgPSBwcCAqIHA7XG5cblx0Y29uc3Qgb2Zmc2V0MSA9IGkxICogc3RyaWRlMztcblx0Y29uc3Qgb2Zmc2V0MCA9IG9mZnNldDEgLSBzdHJpZGUzO1xuXG5cdGNvbnN0IHMyID0gLSAyICogcHBwICsgMyAqIHBwO1xuXHRjb25zdCBzMyA9IHBwcCAtIHBwO1xuXHRjb25zdCBzMCA9IDEgLSBzMjtcblx0Y29uc3QgczEgPSBzMyAtIHBwICsgcDtcblxuXHQvLyBMYXlvdXQgb2Yga2V5ZnJhbWUgb3V0cHV0IHZhbHVlcyBmb3IgQ1VCSUNTUExJTkUgYW5pbWF0aW9uczpcblx0Ly8gICBbIGluVGFuZ2VudF8xLCBzcGxpbmVWZXJ0ZXhfMSwgb3V0VGFuZ2VudF8xLCBpblRhbmdlbnRfMiwgc3BsaW5lVmVydGV4XzIsIC4uLiBdXG5cdGZvciAoIGxldCBpID0gMDsgaSAhPT0gc3RyaWRlOyBpICsrICkge1xuXG5cdFx0Y29uc3QgcDAgPSB2YWx1ZXNbIG9mZnNldDAgKyBpICsgc3RyaWRlIF07IC8vIHNwbGluZVZlcnRleF9rXG5cdFx0Y29uc3QgbTAgPSB2YWx1ZXNbIG9mZnNldDAgKyBpICsgc3RyaWRlMiBdICogdGQ7IC8vIG91dFRhbmdlbnRfayAqICh0X2srMSAtIHRfaylcblx0XHRjb25zdCBwMSA9IHZhbHVlc1sgb2Zmc2V0MSArIGkgKyBzdHJpZGUgXTsgLy8gc3BsaW5lVmVydGV4X2srMVxuXHRcdGNvbnN0IG0xID0gdmFsdWVzWyBvZmZzZXQxICsgaSBdICogdGQ7IC8vIGluVGFuZ2VudF9rKzEgKiAodF9rKzEgLSB0X2spXG5cblx0XHRyZXN1bHRbIGkgXSA9IHMwICogcDAgKyBzMSAqIG0wICsgczIgKiBwMSArIHMzICogbTE7XG5cblx0fVxuXG5cdHJldHVybiByZXN1bHQ7XG5cbn07XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqKioqKiBJTlRFUk5BTFMgKioqKioqKioqKioqL1xuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyogQ09OU1RBTlRTICovXG5cbmNvbnN0IFdFQkdMX0NPTlNUQU5UUyA9IHtcblx0RkxPQVQ6IDUxMjYsXG5cdC8vRkxPQVRfTUFUMjogMzU2NzQsXG5cdEZMT0FUX01BVDM6IDM1Njc1LFxuXHRGTE9BVF9NQVQ0OiAzNTY3Nixcblx0RkxPQVRfVkVDMjogMzU2NjQsXG5cdEZMT0FUX1ZFQzM6IDM1NjY1LFxuXHRGTE9BVF9WRUM0OiAzNTY2Nixcblx0TElORUFSOiA5NzI5LFxuXHRSRVBFQVQ6IDEwNDk3LFxuXHRTQU1QTEVSXzJEOiAzNTY3OCxcblx0UE9JTlRTOiAwLFxuXHRMSU5FUzogMSxcblx0TElORV9MT09QOiAyLFxuXHRMSU5FX1NUUklQOiAzLFxuXHRUUklBTkdMRVM6IDQsXG5cdFRSSUFOR0xFX1NUUklQOiA1LFxuXHRUUklBTkdMRV9GQU46IDYsXG5cdFVOU0lHTkVEX0JZVEU6IDUxMjEsXG5cdFVOU0lHTkVEX1NIT1JUOiA1MTIzXG59O1xuXG5jb25zdCBXRUJHTF9DT01QT05FTlRfVFlQRVMgPSB7XG5cdDUxMjA6IEludDhBcnJheSxcblx0NTEyMTogVWludDhBcnJheSxcblx0NTEyMjogSW50MTZBcnJheSxcblx0NTEyMzogVWludDE2QXJyYXksXG5cdDUxMjU6IFVpbnQzMkFycmF5LFxuXHQ1MTI2OiBGbG9hdDMyQXJyYXlcbn07XG5cbmNvbnN0IFdFQkdMX0ZJTFRFUlMgPSB7XG5cdDk3Mjg6IE5lYXJlc3RGaWx0ZXIsXG5cdDk3Mjk6IExpbmVhckZpbHRlcixcblx0OTk4NDogTmVhcmVzdE1pcG1hcE5lYXJlc3RGaWx0ZXIsXG5cdDk5ODU6IExpbmVhck1pcG1hcE5lYXJlc3RGaWx0ZXIsXG5cdDk5ODY6IE5lYXJlc3RNaXBtYXBMaW5lYXJGaWx0ZXIsXG5cdDk5ODc6IExpbmVhck1pcG1hcExpbmVhckZpbHRlclxufTtcblxuY29uc3QgV0VCR0xfV1JBUFBJTkdTID0ge1xuXHQzMzA3MTogQ2xhbXBUb0VkZ2VXcmFwcGluZyxcblx0MzM2NDg6IE1pcnJvcmVkUmVwZWF0V3JhcHBpbmcsXG5cdDEwNDk3OiBSZXBlYXRXcmFwcGluZ1xufTtcblxuY29uc3QgV0VCR0xfVFlQRV9TSVpFUyA9IHtcblx0J1NDQUxBUic6IDEsXG5cdCdWRUMyJzogMixcblx0J1ZFQzMnOiAzLFxuXHQnVkVDNCc6IDQsXG5cdCdNQVQyJzogNCxcblx0J01BVDMnOiA5LFxuXHQnTUFUNCc6IDE2XG59O1xuXG5jb25zdCBBVFRSSUJVVEVTID0ge1xuXHRQT1NJVElPTjogJ3Bvc2l0aW9uJyxcblx0Tk9STUFMOiAnbm9ybWFsJyxcblx0VEFOR0VOVDogJ3RhbmdlbnQnLFxuXHRURVhDT09SRF8wOiAndXYnLFxuXHRURVhDT09SRF8xOiAndXYyJyxcblx0Q09MT1JfMDogJ2NvbG9yJyxcblx0V0VJR0hUU18wOiAnc2tpbldlaWdodCcsXG5cdEpPSU5UU18wOiAnc2tpbkluZGV4Jyxcbn07XG5cbmNvbnN0IFBBVEhfUFJPUEVSVElFUyA9IHtcblx0c2NhbGU6ICdzY2FsZScsXG5cdHRyYW5zbGF0aW9uOiAncG9zaXRpb24nLFxuXHRyb3RhdGlvbjogJ3F1YXRlcm5pb24nLFxuXHR3ZWlnaHRzOiAnbW9ycGhUYXJnZXRJbmZsdWVuY2VzJ1xufTtcblxuY29uc3QgSU5URVJQT0xBVElPTiA9IHtcblx0Q1VCSUNTUExJTkU6IHVuZGVmaW5lZCwgLy8gV2UgdXNlIGEgY3VzdG9tIGludGVycG9sYW50IChHTFRGQ3ViaWNTcGxpbmVJbnRlcnBvbGF0aW9uKSBmb3IgQ1VCSUNTUExJTkUgdHJhY2tzLiBFYWNoXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8ga2V5ZnJhbWUgdHJhY2sgd2lsbCBiZSBpbml0aWFsaXplZCB3aXRoIGEgZGVmYXVsdCBpbnRlcnBvbGF0aW9uIHR5cGUsIHRoZW4gbW9kaWZpZWQuXG5cdExJTkVBUjogSW50ZXJwb2xhdGVMaW5lYXIsXG5cdFNURVA6IEludGVycG9sYXRlRGlzY3JldGVcbn07XG5cbmNvbnN0IEFMUEhBX01PREVTID0ge1xuXHRPUEFRVUU6ICdPUEFRVUUnLFxuXHRNQVNLOiAnTUFTSycsXG5cdEJMRU5EOiAnQkxFTkQnXG59O1xuXG4vKiBVVElMSVRZIEZVTkNUSU9OUyAqL1xuXG5mdW5jdGlvbiByZXNvbHZlVVJMKCB1cmwsIHBhdGggKSB7XG5cblx0Ly8gSW52YWxpZCBVUkxcblx0aWYgKCB0eXBlb2YgdXJsICE9PSAnc3RyaW5nJyB8fCB1cmwgPT09ICcnICkgcmV0dXJuICcnO1xuXG5cdC8vIEhvc3QgUmVsYXRpdmUgVVJMXG5cdGlmICggL15odHRwcz86XFwvXFwvL2kudGVzdCggcGF0aCApICYmIC9eXFwvLy50ZXN0KCB1cmwgKSApIHtcblxuXHRcdHBhdGggPSBwYXRoLnJlcGxhY2UoIC8oXmh0dHBzPzpcXC9cXC9bXlxcL10rKS4qL2ksICckMScgKTtcblxuXHR9XG5cblx0Ly8gQWJzb2x1dGUgVVJMIGh0dHA6Ly8saHR0cHM6Ly8sLy9cblx0aWYgKCAvXihodHRwcz86KT9cXC9cXC8vaS50ZXN0KCB1cmwgKSApIHJldHVybiB1cmw7XG5cblx0Ly8gRGF0YSBVUklcblx0aWYgKCAvXmRhdGE6LiosLiokL2kudGVzdCggdXJsICkgKSByZXR1cm4gdXJsO1xuXG5cdC8vIEJsb2IgVVJMXG5cdGlmICggL15ibG9iOi4qJC9pLnRlc3QoIHVybCApICkgcmV0dXJuIHVybDtcblxuXHQvLyBSZWxhdGl2ZSBVUkxcblx0cmV0dXJuIHBhdGggKyB1cmw7XG5cbn1cblxuLyoqXG4gKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAvUkVBRE1FLm1kI2RlZmF1bHQtbWF0ZXJpYWxcbiAqL1xuZnVuY3Rpb24gY3JlYXRlRGVmYXVsdE1hdGVyaWFsKCBjYWNoZSApIHtcblxuXHRpZiAoIGNhY2hlWyAnRGVmYXVsdE1hdGVyaWFsJyBdID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRjYWNoZVsgJ0RlZmF1bHRNYXRlcmlhbCcgXSA9IG5ldyBNZXNoU3RhbmRhcmRNYXRlcmlhbCgge1xuXHRcdFx0Y29sb3I6IDB4RkZGRkZGLFxuXHRcdFx0ZW1pc3NpdmU6IDB4MDAwMDAwLFxuXHRcdFx0bWV0YWxuZXNzOiAxLFxuXHRcdFx0cm91Z2huZXNzOiAxLFxuXHRcdFx0dHJhbnNwYXJlbnQ6IGZhbHNlLFxuXHRcdFx0ZGVwdGhUZXN0OiB0cnVlLFxuXHRcdFx0c2lkZTogRnJvbnRTaWRlXG5cdFx0fSApO1xuXG5cdH1cblxuXHRyZXR1cm4gY2FjaGVbICdEZWZhdWx0TWF0ZXJpYWwnIF07XG5cbn1cblxuZnVuY3Rpb24gYWRkVW5rbm93bkV4dGVuc2lvbnNUb1VzZXJEYXRhKCBrbm93bkV4dGVuc2lvbnMsIG9iamVjdCwgb2JqZWN0RGVmICkge1xuXG5cdC8vIEFkZCB1bmtub3duIGdsVEYgZXh0ZW5zaW9ucyB0byBhbiBvYmplY3QncyB1c2VyRGF0YS5cblxuXHRmb3IgKCBjb25zdCBuYW1lIGluIG9iamVjdERlZi5leHRlbnNpb25zICkge1xuXG5cdFx0aWYgKCBrbm93bkV4dGVuc2lvbnNbIG5hbWUgXSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRvYmplY3QudXNlckRhdGEuZ2x0ZkV4dGVuc2lvbnMgPSBvYmplY3QudXNlckRhdGEuZ2x0ZkV4dGVuc2lvbnMgfHwge307XG5cdFx0XHRvYmplY3QudXNlckRhdGEuZ2x0ZkV4dGVuc2lvbnNbIG5hbWUgXSA9IG9iamVjdERlZi5leHRlbnNpb25zWyBuYW1lIF07XG5cblx0XHR9XG5cblx0fVxuXG59XG5cbi8qKlxuICogQHBhcmFtIHtPYmplY3QzRHxNYXRlcmlhbHxCdWZmZXJHZW9tZXRyeX0gb2JqZWN0XG4gKiBAcGFyYW0ge0dMVEYuZGVmaW5pdGlvbn0gZ2x0ZkRlZlxuICovXG5mdW5jdGlvbiBhc3NpZ25FeHRyYXNUb1VzZXJEYXRhKCBvYmplY3QsIGdsdGZEZWYgKSB7XG5cblx0aWYgKCBnbHRmRGVmLmV4dHJhcyAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0aWYgKCB0eXBlb2YgZ2x0ZkRlZi5leHRyYXMgPT09ICdvYmplY3QnICkge1xuXG5cdFx0XHRPYmplY3QuYXNzaWduKCBvYmplY3QudXNlckRhdGEsIGdsdGZEZWYuZXh0cmFzICk7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5HTFRGTG9hZGVyOiBJZ25vcmluZyBwcmltaXRpdmUgdHlwZSAuZXh0cmFzLCAnICsgZ2x0ZkRlZi5leHRyYXMgKTtcblxuXHRcdH1cblxuXHR9XG5cbn1cblxuLyoqXG4gKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAvUkVBRE1FLm1kI21vcnBoLXRhcmdldHNcbiAqXG4gKiBAcGFyYW0ge0J1ZmZlckdlb21ldHJ5fSBnZW9tZXRyeVxuICogQHBhcmFtIHtBcnJheTxHTFRGLlRhcmdldD59IHRhcmdldHNcbiAqIEBwYXJhbSB7R0xURlBhcnNlcn0gcGFyc2VyXG4gKiBAcmV0dXJuIHtQcm9taXNlPEJ1ZmZlckdlb21ldHJ5Pn1cbiAqL1xuZnVuY3Rpb24gYWRkTW9ycGhUYXJnZXRzKCBnZW9tZXRyeSwgdGFyZ2V0cywgcGFyc2VyICkge1xuXG5cdGxldCBoYXNNb3JwaFBvc2l0aW9uID0gZmFsc2U7XG5cdGxldCBoYXNNb3JwaE5vcm1hbCA9IGZhbHNlO1xuXG5cdGZvciAoIGxldCBpID0gMCwgaWwgPSB0YXJnZXRzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0Y29uc3QgdGFyZ2V0ID0gdGFyZ2V0c1sgaSBdO1xuXG5cdFx0aWYgKCB0YXJnZXQuUE9TSVRJT04gIT09IHVuZGVmaW5lZCApIGhhc01vcnBoUG9zaXRpb24gPSB0cnVlO1xuXHRcdGlmICggdGFyZ2V0Lk5PUk1BTCAhPT0gdW5kZWZpbmVkICkgaGFzTW9ycGhOb3JtYWwgPSB0cnVlO1xuXG5cdFx0aWYgKCBoYXNNb3JwaFBvc2l0aW9uICYmIGhhc01vcnBoTm9ybWFsICkgYnJlYWs7XG5cblx0fVxuXG5cdGlmICggISBoYXNNb3JwaFBvc2l0aW9uICYmICEgaGFzTW9ycGhOb3JtYWwgKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCBnZW9tZXRyeSApO1xuXG5cdGNvbnN0IHBlbmRpbmdQb3NpdGlvbkFjY2Vzc29ycyA9IFtdO1xuXHRjb25zdCBwZW5kaW5nTm9ybWFsQWNjZXNzb3JzID0gW107XG5cblx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IHRhcmdldHMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRjb25zdCB0YXJnZXQgPSB0YXJnZXRzWyBpIF07XG5cblx0XHRpZiAoIGhhc01vcnBoUG9zaXRpb24gKSB7XG5cblx0XHRcdGNvbnN0IHBlbmRpbmdBY2Nlc3NvciA9IHRhcmdldC5QT1NJVElPTiAhPT0gdW5kZWZpbmVkXG5cdFx0XHRcdD8gcGFyc2VyLmdldERlcGVuZGVuY3koICdhY2Nlc3NvcicsIHRhcmdldC5QT1NJVElPTiApXG5cdFx0XHRcdDogZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbjtcblxuXHRcdFx0cGVuZGluZ1Bvc2l0aW9uQWNjZXNzb3JzLnB1c2goIHBlbmRpbmdBY2Nlc3NvciApO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBoYXNNb3JwaE5vcm1hbCApIHtcblxuXHRcdFx0Y29uc3QgcGVuZGluZ0FjY2Vzc29yID0gdGFyZ2V0Lk5PUk1BTCAhPT0gdW5kZWZpbmVkXG5cdFx0XHRcdD8gcGFyc2VyLmdldERlcGVuZGVuY3koICdhY2Nlc3NvcicsIHRhcmdldC5OT1JNQUwgKVxuXHRcdFx0XHQ6IGdlb21ldHJ5LmF0dHJpYnV0ZXMubm9ybWFsO1xuXG5cdFx0XHRwZW5kaW5nTm9ybWFsQWNjZXNzb3JzLnB1c2goIHBlbmRpbmdBY2Nlc3NvciApO1xuXG5cdFx0fVxuXG5cdH1cblxuXHRyZXR1cm4gUHJvbWlzZS5hbGwoIFtcblx0XHRQcm9taXNlLmFsbCggcGVuZGluZ1Bvc2l0aW9uQWNjZXNzb3JzICksXG5cdFx0UHJvbWlzZS5hbGwoIHBlbmRpbmdOb3JtYWxBY2Nlc3NvcnMgKVxuXHRdICkudGhlbiggZnVuY3Rpb24gKCBhY2Nlc3NvcnMgKSB7XG5cblx0XHRjb25zdCBtb3JwaFBvc2l0aW9ucyA9IGFjY2Vzc29yc1sgMCBdO1xuXHRcdGNvbnN0IG1vcnBoTm9ybWFscyA9IGFjY2Vzc29yc1sgMSBdO1xuXG5cdFx0aWYgKCBoYXNNb3JwaFBvc2l0aW9uICkgZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uID0gbW9ycGhQb3NpdGlvbnM7XG5cdFx0aWYgKCBoYXNNb3JwaE5vcm1hbCApIGdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5ub3JtYWwgPSBtb3JwaE5vcm1hbHM7XG5cdFx0Z2VvbWV0cnkubW9ycGhUYXJnZXRzUmVsYXRpdmUgPSB0cnVlO1xuXG5cdFx0cmV0dXJuIGdlb21ldHJ5O1xuXG5cdH0gKTtcblxufVxuXG4vKipcbiAqIEBwYXJhbSB7TWVzaH0gbWVzaFxuICogQHBhcmFtIHtHTFRGLk1lc2h9IG1lc2hEZWZcbiAqL1xuZnVuY3Rpb24gdXBkYXRlTW9ycGhUYXJnZXRzKCBtZXNoLCBtZXNoRGVmICkge1xuXG5cdG1lc2gudXBkYXRlTW9ycGhUYXJnZXRzKCk7XG5cblx0aWYgKCBtZXNoRGVmLndlaWdodHMgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdGZvciAoIGxldCBpID0gMCwgaWwgPSBtZXNoRGVmLndlaWdodHMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRcdG1lc2gubW9ycGhUYXJnZXRJbmZsdWVuY2VzWyBpIF0gPSBtZXNoRGVmLndlaWdodHNbIGkgXTtcblxuXHRcdH1cblxuXHR9XG5cblx0Ly8gLmV4dHJhcyBoYXMgdXNlci1kZWZpbmVkIGRhdGEsIHNvIGNoZWNrIHRoYXQgLmV4dHJhcy50YXJnZXROYW1lcyBpcyBhbiBhcnJheS5cblx0aWYgKCBtZXNoRGVmLmV4dHJhcyAmJiBBcnJheS5pc0FycmF5KCBtZXNoRGVmLmV4dHJhcy50YXJnZXROYW1lcyApICkge1xuXG5cdFx0Y29uc3QgdGFyZ2V0TmFtZXMgPSBtZXNoRGVmLmV4dHJhcy50YXJnZXROYW1lcztcblxuXHRcdGlmICggbWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXMubGVuZ3RoID09PSB0YXJnZXROYW1lcy5sZW5ndGggKSB7XG5cblx0XHRcdG1lc2gubW9ycGhUYXJnZXREaWN0aW9uYXJ5ID0ge307XG5cblx0XHRcdGZvciAoIGxldCBpID0gMCwgaWwgPSB0YXJnZXROYW1lcy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0XHRtZXNoLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVsgdGFyZ2V0TmFtZXNbIGkgXSBdID0gaTtcblxuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuR0xURkxvYWRlcjogSW52YWxpZCBleHRyYXMudGFyZ2V0TmFtZXMgbGVuZ3RoLiBJZ25vcmluZyBuYW1lcy4nICk7XG5cblx0XHR9XG5cblx0fVxuXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVByaW1pdGl2ZUtleSggcHJpbWl0aXZlRGVmICkge1xuXG5cdGNvbnN0IGRyYWNvRXh0ZW5zaW9uID0gcHJpbWl0aXZlRGVmLmV4dGVuc2lvbnMgJiYgcHJpbWl0aXZlRGVmLmV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX0RSQUNPX01FU0hfQ09NUFJFU1NJT04gXTtcblx0bGV0IGdlb21ldHJ5S2V5O1xuXG5cdGlmICggZHJhY29FeHRlbnNpb24gKSB7XG5cblx0XHRnZW9tZXRyeUtleSA9ICdkcmFjbzonICsgZHJhY29FeHRlbnNpb24uYnVmZmVyVmlld1xuXHRcdFx0XHQrICc6JyArIGRyYWNvRXh0ZW5zaW9uLmluZGljZXNcblx0XHRcdFx0KyAnOicgKyBjcmVhdGVBdHRyaWJ1dGVzS2V5KCBkcmFjb0V4dGVuc2lvbi5hdHRyaWJ1dGVzICk7XG5cblx0fSBlbHNlIHtcblxuXHRcdGdlb21ldHJ5S2V5ID0gcHJpbWl0aXZlRGVmLmluZGljZXMgKyAnOicgKyBjcmVhdGVBdHRyaWJ1dGVzS2V5KCBwcmltaXRpdmVEZWYuYXR0cmlidXRlcyApICsgJzonICsgcHJpbWl0aXZlRGVmLm1vZGU7XG5cblx0fVxuXG5cdHJldHVybiBnZW9tZXRyeUtleTtcblxufVxuXG5mdW5jdGlvbiBjcmVhdGVBdHRyaWJ1dGVzS2V5KCBhdHRyaWJ1dGVzICkge1xuXG5cdGxldCBhdHRyaWJ1dGVzS2V5ID0gJyc7XG5cblx0Y29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKCBhdHRyaWJ1dGVzICkuc29ydCgpO1xuXG5cdGZvciAoIGxldCBpID0gMCwgaWwgPSBrZXlzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0YXR0cmlidXRlc0tleSArPSBrZXlzWyBpIF0gKyAnOicgKyBhdHRyaWJ1dGVzWyBrZXlzWyBpIF0gXSArICc7JztcblxuXHR9XG5cblx0cmV0dXJuIGF0dHJpYnV0ZXNLZXk7XG5cbn1cblxuZnVuY3Rpb24gZ2V0Tm9ybWFsaXplZENvbXBvbmVudFNjYWxlKCBjb25zdHJ1Y3RvciApIHtcblxuXHQvLyBSZWZlcmVuY2U6XG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9leHRlbnNpb25zLzIuMC9LaHJvbm9zL0tIUl9tZXNoX3F1YW50aXphdGlvbiNlbmNvZGluZy1xdWFudGl6ZWQtZGF0YVxuXG5cdHN3aXRjaCAoIGNvbnN0cnVjdG9yICkge1xuXG5cdFx0Y2FzZSBJbnQ4QXJyYXk6XG5cdFx0XHRyZXR1cm4gMSAvIDEyNztcblxuXHRcdGNhc2UgVWludDhBcnJheTpcblx0XHRcdHJldHVybiAxIC8gMjU1O1xuXG5cdFx0Y2FzZSBJbnQxNkFycmF5OlxuXHRcdFx0cmV0dXJuIDEgLyAzMjc2NztcblxuXHRcdGNhc2UgVWludDE2QXJyYXk6XG5cdFx0XHRyZXR1cm4gMSAvIDY1NTM1O1xuXG5cdFx0ZGVmYXVsdDpcblx0XHRcdHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IFVuc3VwcG9ydGVkIG5vcm1hbGl6ZWQgYWNjZXNzb3IgY29tcG9uZW50IHR5cGUuJyApO1xuXG5cdH1cblxufVxuXG4vKiBHTFRGIFBBUlNFUiAqL1xuXG5jbGFzcyBHTFRGUGFyc2VyIHtcblxuXHRjb25zdHJ1Y3RvcigganNvbiA9IHt9LCBvcHRpb25zID0ge30gKSB7XG5cblx0XHR0aGlzLmpzb24gPSBqc29uO1xuXHRcdHRoaXMuZXh0ZW5zaW9ucyA9IHt9O1xuXHRcdHRoaXMucGx1Z2lucyA9IHt9O1xuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cblx0XHQvLyBsb2FkZXIgb2JqZWN0IGNhY2hlXG5cdFx0dGhpcy5jYWNoZSA9IG5ldyBHTFRGUmVnaXN0cnkoKTtcblxuXHRcdC8vIGFzc29jaWF0aW9ucyBiZXR3ZWVuIFRocmVlLmpzIG9iamVjdHMgYW5kIGdsVEYgZWxlbWVudHNcblx0XHR0aGlzLmFzc29jaWF0aW9ucyA9IG5ldyBNYXAoKTtcblxuXHRcdC8vIEJ1ZmZlckdlb21ldHJ5IGNhY2hpbmdcblx0XHR0aGlzLnByaW1pdGl2ZUNhY2hlID0ge307XG5cblx0XHQvLyBPYmplY3QzRCBpbnN0YW5jZSBjYWNoZXNcblx0XHR0aGlzLm1lc2hDYWNoZSA9IHsgcmVmczoge30sIHVzZXM6IHt9IH07XG5cdFx0dGhpcy5jYW1lcmFDYWNoZSA9IHsgcmVmczoge30sIHVzZXM6IHt9IH07XG5cdFx0dGhpcy5saWdodENhY2hlID0geyByZWZzOiB7fSwgdXNlczoge30gfTtcblxuXHRcdHRoaXMudGV4dHVyZUNhY2hlID0ge307XG5cblx0XHQvLyBUcmFjayBub2RlIG5hbWVzLCB0byBlbnN1cmUgbm8gZHVwbGljYXRlc1xuXHRcdHRoaXMubm9kZU5hbWVzVXNlZCA9IHt9O1xuXG5cdFx0Ly8gVXNlIGFuIEltYWdlQml0bWFwTG9hZGVyIGlmIGltYWdlQml0bWFwcyBhcmUgc3VwcG9ydGVkLiBNb3ZlcyBtdWNoIG9mIHRoZVxuXHRcdC8vIGV4cGVuc2l2ZSB3b3JrIG9mIHVwbG9hZGluZyBhIHRleHR1cmUgdG8gdGhlIEdQVSBvZmYgdGhlIG1haW4gdGhyZWFkLlxuXHRcdGlmICggdHlwZW9mIGNyZWF0ZUltYWdlQml0bWFwICE9PSAndW5kZWZpbmVkJyAmJiAvRmlyZWZveC8udGVzdCggbmF2aWdhdG9yLnVzZXJBZ2VudCApID09PSBmYWxzZSApIHtcblxuXHRcdFx0dGhpcy50ZXh0dXJlTG9hZGVyID0gbmV3IEltYWdlQml0bWFwTG9hZGVyKCB0aGlzLm9wdGlvbnMubWFuYWdlciApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0dGhpcy50ZXh0dXJlTG9hZGVyID0gbmV3IFRleHR1cmVMb2FkZXIoIHRoaXMub3B0aW9ucy5tYW5hZ2VyICk7XG5cblx0XHR9XG5cblx0XHR0aGlzLnRleHR1cmVMb2FkZXIuc2V0Q3Jvc3NPcmlnaW4oIHRoaXMub3B0aW9ucy5jcm9zc09yaWdpbiApO1xuXHRcdHRoaXMudGV4dHVyZUxvYWRlci5zZXRSZXF1ZXN0SGVhZGVyKCB0aGlzLm9wdGlvbnMucmVxdWVzdEhlYWRlciApO1xuXG5cdFx0dGhpcy5maWxlTG9hZGVyID0gbmV3IEZpbGVMb2FkZXIoIHRoaXMub3B0aW9ucy5tYW5hZ2VyICk7XG5cdFx0dGhpcy5maWxlTG9hZGVyLnNldFJlc3BvbnNlVHlwZSggJ2FycmF5YnVmZmVyJyApO1xuXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuY3Jvc3NPcmlnaW4gPT09ICd1c2UtY3JlZGVudGlhbHMnICkge1xuXG5cdFx0XHR0aGlzLmZpbGVMb2FkZXIuc2V0V2l0aENyZWRlbnRpYWxzKCB0cnVlICk7XG5cblx0XHR9XG5cblx0fVxuXG5cdHNldEV4dGVuc2lvbnMoIGV4dGVuc2lvbnMgKSB7XG5cblx0XHR0aGlzLmV4dGVuc2lvbnMgPSBleHRlbnNpb25zO1xuXG5cdH1cblxuXHRzZXRQbHVnaW5zKCBwbHVnaW5zICkge1xuXG5cdFx0dGhpcy5wbHVnaW5zID0gcGx1Z2lucztcblxuXHR9XG5cblx0cGFyc2UoIG9uTG9hZCwgb25FcnJvciApIHtcblxuXHRcdGNvbnN0IHBhcnNlciA9IHRoaXM7XG5cdFx0Y29uc3QganNvbiA9IHRoaXMuanNvbjtcblx0XHRjb25zdCBleHRlbnNpb25zID0gdGhpcy5leHRlbnNpb25zO1xuXG5cdFx0Ly8gQ2xlYXIgdGhlIGxvYWRlciBjYWNoZVxuXHRcdHRoaXMuY2FjaGUucmVtb3ZlQWxsKCk7XG5cblx0XHQvLyBNYXJrIHRoZSBzcGVjaWFsIG5vZGVzL21lc2hlcyBpbiBqc29uIGZvciBlZmZpY2llbnQgcGFyc2Vcblx0XHR0aGlzLl9pbnZva2VBbGwoIGZ1bmN0aW9uICggZXh0ICkge1xuXG5cdFx0XHRyZXR1cm4gZXh0Ll9tYXJrRGVmcyAmJiBleHQuX21hcmtEZWZzKCk7XG5cblx0XHR9ICk7XG5cblx0XHRQcm9taXNlLmFsbCggdGhpcy5faW52b2tlQWxsKCBmdW5jdGlvbiAoIGV4dCApIHtcblxuXHRcdFx0cmV0dXJuIGV4dC5iZWZvcmVSb290ICYmIGV4dC5iZWZvcmVSb290KCk7XG5cblx0XHR9ICkgKS50aGVuKCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHJldHVybiBQcm9taXNlLmFsbCggW1xuXG5cdFx0XHRcdHBhcnNlci5nZXREZXBlbmRlbmNpZXMoICdzY2VuZScgKSxcblx0XHRcdFx0cGFyc2VyLmdldERlcGVuZGVuY2llcyggJ2FuaW1hdGlvbicgKSxcblx0XHRcdFx0cGFyc2VyLmdldERlcGVuZGVuY2llcyggJ2NhbWVyYScgKSxcblxuXHRcdFx0XSApO1xuXG5cdFx0fSApLnRoZW4oIGZ1bmN0aW9uICggZGVwZW5kZW5jaWVzICkge1xuXG5cdFx0XHRjb25zdCByZXN1bHQgPSB7XG5cdFx0XHRcdHNjZW5lOiBkZXBlbmRlbmNpZXNbIDAgXVsganNvbi5zY2VuZSB8fCAwIF0sXG5cdFx0XHRcdHNjZW5lczogZGVwZW5kZW5jaWVzWyAwIF0sXG5cdFx0XHRcdGFuaW1hdGlvbnM6IGRlcGVuZGVuY2llc1sgMSBdLFxuXHRcdFx0XHRjYW1lcmFzOiBkZXBlbmRlbmNpZXNbIDIgXSxcblx0XHRcdFx0YXNzZXQ6IGpzb24uYXNzZXQsXG5cdFx0XHRcdHBhcnNlcjogcGFyc2VyLFxuXHRcdFx0XHR1c2VyRGF0YToge31cblx0XHRcdH07XG5cblx0XHRcdGFkZFVua25vd25FeHRlbnNpb25zVG9Vc2VyRGF0YSggZXh0ZW5zaW9ucywgcmVzdWx0LCBqc29uICk7XG5cblx0XHRcdGFzc2lnbkV4dHJhc1RvVXNlckRhdGEoIHJlc3VsdCwganNvbiApO1xuXG5cdFx0XHRQcm9taXNlLmFsbCggcGFyc2VyLl9pbnZva2VBbGwoIGZ1bmN0aW9uICggZXh0ICkge1xuXG5cdFx0XHRcdHJldHVybiBleHQuYWZ0ZXJSb290ICYmIGV4dC5hZnRlclJvb3QoIHJlc3VsdCApO1xuXG5cdFx0XHR9ICkgKS50aGVuKCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0b25Mb2FkKCByZXN1bHQgKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0fSApLmNhdGNoKCBvbkVycm9yICk7XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBNYXJrcyB0aGUgc3BlY2lhbCBub2Rlcy9tZXNoZXMgaW4ganNvbiBmb3IgZWZmaWNpZW50IHBhcnNlLlxuXHQgKi9cblx0X21hcmtEZWZzKCkge1xuXG5cdFx0Y29uc3Qgbm9kZURlZnMgPSB0aGlzLmpzb24ubm9kZXMgfHwgW107XG5cdFx0Y29uc3Qgc2tpbkRlZnMgPSB0aGlzLmpzb24uc2tpbnMgfHwgW107XG5cdFx0Y29uc3QgbWVzaERlZnMgPSB0aGlzLmpzb24ubWVzaGVzIHx8IFtdO1xuXG5cdFx0Ly8gTm90aGluZyBpbiB0aGUgbm9kZSBkZWZpbml0aW9uIGluZGljYXRlcyB3aGV0aGVyIGl0IGlzIGEgQm9uZSBvciBhblxuXHRcdC8vIE9iamVjdDNELiBVc2UgdGhlIHNraW5zJyBqb2ludCByZWZlcmVuY2VzIHRvIG1hcmsgYm9uZXMuXG5cdFx0Zm9yICggbGV0IHNraW5JbmRleCA9IDAsIHNraW5MZW5ndGggPSBza2luRGVmcy5sZW5ndGg7IHNraW5JbmRleCA8IHNraW5MZW5ndGg7IHNraW5JbmRleCArKyApIHtcblxuXHRcdFx0Y29uc3Qgam9pbnRzID0gc2tpbkRlZnNbIHNraW5JbmRleCBdLmpvaW50cztcblxuXHRcdFx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IGpvaW50cy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0XHRub2RlRGVmc1sgam9pbnRzWyBpIF0gXS5pc0JvbmUgPSB0cnVlO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHQvLyBJdGVyYXRlIG92ZXIgYWxsIG5vZGVzLCBtYXJraW5nIHJlZmVyZW5jZXMgdG8gc2hhcmVkIHJlc291cmNlcyxcblx0XHQvLyBhcyB3ZWxsIGFzIHNrZWxldG9uIGpvaW50cy5cblx0XHRmb3IgKCBsZXQgbm9kZUluZGV4ID0gMCwgbm9kZUxlbmd0aCA9IG5vZGVEZWZzLmxlbmd0aDsgbm9kZUluZGV4IDwgbm9kZUxlbmd0aDsgbm9kZUluZGV4ICsrICkge1xuXG5cdFx0XHRjb25zdCBub2RlRGVmID0gbm9kZURlZnNbIG5vZGVJbmRleCBdO1xuXG5cdFx0XHRpZiAoIG5vZGVEZWYubWVzaCAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdHRoaXMuX2FkZE5vZGVSZWYoIHRoaXMubWVzaENhY2hlLCBub2RlRGVmLm1lc2ggKTtcblxuXHRcdFx0XHQvLyBOb3RoaW5nIGluIHRoZSBtZXNoIGRlZmluaXRpb24gaW5kaWNhdGVzIHdoZXRoZXIgaXQgaXNcblx0XHRcdFx0Ly8gYSBTa2lubmVkTWVzaCBvciBNZXNoLiBVc2UgdGhlIG5vZGUncyBtZXNoIHJlZmVyZW5jZVxuXHRcdFx0XHQvLyB0byBtYXJrIFNraW5uZWRNZXNoIGlmIG5vZGUgaGFzIHNraW4uXG5cdFx0XHRcdGlmICggbm9kZURlZi5za2luICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRtZXNoRGVmc1sgbm9kZURlZi5tZXNoIF0uaXNTa2lubmVkTWVzaCA9IHRydWU7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggbm9kZURlZi5jYW1lcmEgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHR0aGlzLl9hZGROb2RlUmVmKCB0aGlzLmNhbWVyYUNhY2hlLCBub2RlRGVmLmNhbWVyYSApO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBDb3VudHMgcmVmZXJlbmNlcyB0byBzaGFyZWQgbm9kZSAvIE9iamVjdDNEIHJlc291cmNlcy4gVGhlc2UgcmVzb3VyY2VzXG5cdCAqIGNhbiBiZSByZXVzZWQsIG9yIFwiaW5zdGFudGlhdGVkXCIsIGF0IG11bHRpcGxlIG5vZGVzIGluIHRoZSBzY2VuZVxuXHQgKiBoaWVyYXJjaHkuIE1lc2gsIENhbWVyYSwgYW5kIExpZ2h0IGluc3RhbmNlcyBhcmUgaW5zdGFudGlhdGVkIGFuZCBtdXN0XG5cdCAqIGJlIG1hcmtlZC4gTm9uLXNjZW5lZ3JhcGggcmVzb3VyY2VzIChsaWtlIE1hdGVyaWFscywgR2VvbWV0cmllcywgYW5kXG5cdCAqIFRleHR1cmVzKSBjYW4gYmUgcmV1c2VkIGRpcmVjdGx5IGFuZCBhcmUgbm90IG1hcmtlZCBoZXJlLlxuXHQgKlxuXHQgKiBFeGFtcGxlOiBDZXNpdW1NaWxrVHJ1Y2sgc2FtcGxlIG1vZGVsIHJldXNlcyBcIldoZWVsXCIgbWVzaGVzLlxuXHQgKi9cblx0X2FkZE5vZGVSZWYoIGNhY2hlLCBpbmRleCApIHtcblxuXHRcdGlmICggaW5kZXggPT09IHVuZGVmaW5lZCApIHJldHVybjtcblxuXHRcdGlmICggY2FjaGUucmVmc1sgaW5kZXggXSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRjYWNoZS5yZWZzWyBpbmRleCBdID0gY2FjaGUudXNlc1sgaW5kZXggXSA9IDA7XG5cblx0XHR9XG5cblx0XHRjYWNoZS5yZWZzWyBpbmRleCBdICsrO1xuXG5cdH1cblxuXHQvKiogUmV0dXJucyBhIHJlZmVyZW5jZSB0byBhIHNoYXJlZCByZXNvdXJjZSwgY2xvbmluZyBpdCBpZiBuZWNlc3NhcnkuICovXG5cdF9nZXROb2RlUmVmKCBjYWNoZSwgaW5kZXgsIG9iamVjdCApIHtcblxuXHRcdGlmICggY2FjaGUucmVmc1sgaW5kZXggXSA8PSAxICkgcmV0dXJuIG9iamVjdDtcblxuXHRcdGNvbnN0IHJlZiA9IG9iamVjdC5jbG9uZSgpO1xuXG5cdFx0cmVmLm5hbWUgKz0gJ19pbnN0YW5jZV8nICsgKCBjYWNoZS51c2VzWyBpbmRleCBdICsrICk7XG5cblx0XHRyZXR1cm4gcmVmO1xuXG5cdH1cblxuXHRfaW52b2tlT25lKCBmdW5jICkge1xuXG5cdFx0Y29uc3QgZXh0ZW5zaW9ucyA9IE9iamVjdC52YWx1ZXMoIHRoaXMucGx1Z2lucyApO1xuXHRcdGV4dGVuc2lvbnMucHVzaCggdGhpcyApO1xuXG5cdFx0Zm9yICggbGV0IGkgPSAwOyBpIDwgZXh0ZW5zaW9ucy5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdGNvbnN0IHJlc3VsdCA9IGZ1bmMoIGV4dGVuc2lvbnNbIGkgXSApO1xuXG5cdFx0XHRpZiAoIHJlc3VsdCApIHJldHVybiByZXN1bHQ7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblxuXHR9XG5cblx0X2ludm9rZUFsbCggZnVuYyApIHtcblxuXHRcdGNvbnN0IGV4dGVuc2lvbnMgPSBPYmplY3QudmFsdWVzKCB0aGlzLnBsdWdpbnMgKTtcblx0XHRleHRlbnNpb25zLnVuc2hpZnQoIHRoaXMgKTtcblxuXHRcdGNvbnN0IHBlbmRpbmcgPSBbXTtcblxuXHRcdGZvciAoIGxldCBpID0gMDsgaSA8IGV4dGVuc2lvbnMubGVuZ3RoOyBpICsrICkge1xuXG5cdFx0XHRjb25zdCByZXN1bHQgPSBmdW5jKCBleHRlbnNpb25zWyBpIF0gKTtcblxuXHRcdFx0aWYgKCByZXN1bHQgKSBwZW5kaW5nLnB1c2goIHJlc3VsdCApO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHBlbmRpbmc7XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBSZXF1ZXN0cyB0aGUgc3BlY2lmaWVkIGRlcGVuZGVuY3kgYXN5bmNocm9ub3VzbHksIHdpdGggY2FjaGluZy5cblx0ICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcblx0ICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG5cdCAqIEByZXR1cm4ge1Byb21pc2U8T2JqZWN0M0R8TWF0ZXJpYWx8VEhSRUUuVGV4dHVyZXxBbmltYXRpb25DbGlwfEFycmF5QnVmZmVyfE9iamVjdD59XG5cdCAqL1xuXHRnZXREZXBlbmRlbmN5KCB0eXBlLCBpbmRleCApIHtcblxuXHRcdGNvbnN0IGNhY2hlS2V5ID0gdHlwZSArICc6JyArIGluZGV4O1xuXHRcdGxldCBkZXBlbmRlbmN5ID0gdGhpcy5jYWNoZS5nZXQoIGNhY2hlS2V5ICk7XG5cblx0XHRpZiAoICEgZGVwZW5kZW5jeSApIHtcblxuXHRcdFx0c3dpdGNoICggdHlwZSApIHtcblxuXHRcdFx0XHRjYXNlICdzY2VuZSc6XG5cdFx0XHRcdFx0ZGVwZW5kZW5jeSA9IHRoaXMubG9hZFNjZW5lKCBpbmRleCApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ25vZGUnOlxuXHRcdFx0XHRcdGRlcGVuZGVuY3kgPSB0aGlzLmxvYWROb2RlKCBpbmRleCApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ21lc2gnOlxuXHRcdFx0XHRcdGRlcGVuZGVuY3kgPSB0aGlzLl9pbnZva2VPbmUoIGZ1bmN0aW9uICggZXh0ICkge1xuXG5cdFx0XHRcdFx0XHRyZXR1cm4gZXh0LmxvYWRNZXNoICYmIGV4dC5sb2FkTWVzaCggaW5kZXggKTtcblxuXHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdhY2Nlc3Nvcic6XG5cdFx0XHRcdFx0ZGVwZW5kZW5jeSA9IHRoaXMubG9hZEFjY2Vzc29yKCBpbmRleCApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ2J1ZmZlclZpZXcnOlxuXHRcdFx0XHRcdGRlcGVuZGVuY3kgPSB0aGlzLl9pbnZva2VPbmUoIGZ1bmN0aW9uICggZXh0ICkge1xuXG5cdFx0XHRcdFx0XHRyZXR1cm4gZXh0LmxvYWRCdWZmZXJWaWV3ICYmIGV4dC5sb2FkQnVmZmVyVmlldyggaW5kZXggKTtcblxuXHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdidWZmZXInOlxuXHRcdFx0XHRcdGRlcGVuZGVuY3kgPSB0aGlzLmxvYWRCdWZmZXIoIGluZGV4ICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnbWF0ZXJpYWwnOlxuXHRcdFx0XHRcdGRlcGVuZGVuY3kgPSB0aGlzLl9pbnZva2VPbmUoIGZ1bmN0aW9uICggZXh0ICkge1xuXG5cdFx0XHRcdFx0XHRyZXR1cm4gZXh0LmxvYWRNYXRlcmlhbCAmJiBleHQubG9hZE1hdGVyaWFsKCBpbmRleCApO1xuXG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ3RleHR1cmUnOlxuICAgICAgICAgIGRlcGVuZGVuY3kgPSB0aGlzLl9pbnZva2VPbmUoIGZ1bmN0aW9uICggZXh0ICkge1xuXG5cdFx0XHRcdFx0XHRyZXR1cm4gZXh0LmxvYWRUZXh0dXJlICYmIGV4dC5sb2FkVGV4dHVyZSggaW5kZXggKTtcblxuXHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdza2luJzpcblx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gdGhpcy5sb2FkU2tpbiggaW5kZXggKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdhbmltYXRpb24nOlxuXHRcdFx0XHRcdGRlcGVuZGVuY3kgPSB0aGlzLmxvYWRBbmltYXRpb24oIGluZGV4ICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnY2FtZXJhJzpcblx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gdGhpcy5sb2FkQ2FtZXJhKCBpbmRleCApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCAnVW5rbm93biB0eXBlOiAnICsgdHlwZSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHRoaXMuY2FjaGUuYWRkKCBjYWNoZUtleSwgZGVwZW5kZW5jeSApO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlcGVuZGVuY3k7XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBSZXF1ZXN0cyBhbGwgZGVwZW5kZW5jaWVzIG9mIHRoZSBzcGVjaWZpZWQgdHlwZSBhc3luY2hyb25vdXNseSwgd2l0aCBjYWNoaW5nLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuXHQgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5PE9iamVjdD4+fVxuXHQgKi9cblx0Z2V0RGVwZW5kZW5jaWVzKCB0eXBlICkge1xuXG5cdFx0bGV0IGRlcGVuZGVuY2llcyA9IHRoaXMuY2FjaGUuZ2V0KCB0eXBlICk7XG5cblx0XHRpZiAoICEgZGVwZW5kZW5jaWVzICkge1xuXG5cdFx0XHRjb25zdCBwYXJzZXIgPSB0aGlzO1xuXHRcdFx0Y29uc3QgZGVmcyA9IHRoaXMuanNvblsgdHlwZSArICggdHlwZSA9PT0gJ21lc2gnID8gJ2VzJyA6ICdzJyApIF0gfHwgW107XG5cblx0XHRcdGRlcGVuZGVuY2llcyA9IFByb21pc2UuYWxsKCBkZWZzLm1hcCggZnVuY3Rpb24gKCBkZWYsIGluZGV4ICkge1xuXG5cdFx0XHRcdHJldHVybiBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggdHlwZSwgaW5kZXggKTtcblxuXHRcdFx0fSApICk7XG5cblx0XHRcdHRoaXMuY2FjaGUuYWRkKCB0eXBlLCBkZXBlbmRlbmNpZXMgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBkZXBlbmRlbmNpZXM7XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAvUkVBRE1FLm1kI2J1ZmZlcnMtYW5kLWJ1ZmZlci12aWV3c1xuXHQgKiBAcGFyYW0ge251bWJlcn0gYnVmZmVySW5kZXhcblx0ICogQHJldHVybiB7UHJvbWlzZTxBcnJheUJ1ZmZlcj59XG5cdCAqL1xuXHRsb2FkQnVmZmVyKCBidWZmZXJJbmRleCApIHtcblxuXHRcdGNvbnN0IGJ1ZmZlckRlZiA9IHRoaXMuanNvbi5idWZmZXJzWyBidWZmZXJJbmRleCBdO1xuXHRcdGNvbnN0IGxvYWRlciA9IHRoaXMuZmlsZUxvYWRlcjtcblxuXHRcdGlmICggYnVmZmVyRGVmLnR5cGUgJiYgYnVmZmVyRGVmLnR5cGUgIT09ICdhcnJheWJ1ZmZlcicgKSB7XG5cblx0XHRcdHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6ICcgKyBidWZmZXJEZWYudHlwZSArICcgYnVmZmVyIHR5cGUgaXMgbm90IHN1cHBvcnRlZC4nICk7XG5cblx0XHR9XG5cblx0XHQvLyBJZiBwcmVzZW50LCBHTEIgY29udGFpbmVyIGlzIHJlcXVpcmVkIHRvIGJlIHRoZSBmaXJzdCBidWZmZXIuXG5cdFx0aWYgKCBidWZmZXJEZWYudXJpID09PSB1bmRlZmluZWQgJiYgYnVmZmVySW5kZXggPT09IDAgKSB7XG5cblx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoIHRoaXMuZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfQklOQVJZX0dMVEYgXS5ib2R5ICk7XG5cblx0XHR9XG5cblx0XHRjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKCBmdW5jdGlvbiAoIHJlc29sdmUsIHJlamVjdCApIHtcblxuXHRcdFx0bG9hZGVyLmxvYWQoIHJlc29sdmVVUkwoIGJ1ZmZlckRlZi51cmksIG9wdGlvbnMucGF0aCApLCByZXNvbHZlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRyZWplY3QoIG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IEZhaWxlZCB0byBsb2FkIGJ1ZmZlciBcIicgKyBidWZmZXJEZWYudXJpICsgJ1wiLicgKSApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHR9ICk7XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAvUkVBRE1FLm1kI2J1ZmZlcnMtYW5kLWJ1ZmZlci12aWV3c1xuXHQgKiBAcGFyYW0ge251bWJlcn0gYnVmZmVyVmlld0luZGV4XG5cdCAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXlCdWZmZXI+fVxuXHQgKi9cblx0bG9hZEJ1ZmZlclZpZXcoIGJ1ZmZlclZpZXdJbmRleCApIHtcblxuXHRcdGNvbnN0IGJ1ZmZlclZpZXdEZWYgPSB0aGlzLmpzb24uYnVmZmVyVmlld3NbIGJ1ZmZlclZpZXdJbmRleCBdO1xuXG5cdFx0cmV0dXJuIHRoaXMuZ2V0RGVwZW5kZW5jeSggJ2J1ZmZlcicsIGJ1ZmZlclZpZXdEZWYuYnVmZmVyICkudGhlbiggZnVuY3Rpb24gKCBidWZmZXIgKSB7XG5cblx0XHRcdGNvbnN0IGJ5dGVMZW5ndGggPSBidWZmZXJWaWV3RGVmLmJ5dGVMZW5ndGggfHwgMDtcblx0XHRcdGNvbnN0IGJ5dGVPZmZzZXQgPSBidWZmZXJWaWV3RGVmLmJ5dGVPZmZzZXQgfHwgMDtcblx0XHRcdHJldHVybiBidWZmZXIuc2xpY2UoIGJ5dGVPZmZzZXQsIGJ5dGVPZmZzZXQgKyBieXRlTGVuZ3RoICk7XG5cblx0XHR9ICk7XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAvUkVBRE1FLm1kI2FjY2Vzc29yc1xuXHQgKiBAcGFyYW0ge251bWJlcn0gYWNjZXNzb3JJbmRleFxuXHQgKiBAcmV0dXJuIHtQcm9taXNlPEJ1ZmZlckF0dHJpYnV0ZXxJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZT59XG5cdCAqL1xuXHRsb2FkQWNjZXNzb3IoIGFjY2Vzc29ySW5kZXggKSB7XG5cblx0XHRjb25zdCBwYXJzZXIgPSB0aGlzO1xuXHRcdGNvbnN0IGpzb24gPSB0aGlzLmpzb247XG5cblx0XHRjb25zdCBhY2Nlc3NvckRlZiA9IHRoaXMuanNvbi5hY2Nlc3NvcnNbIGFjY2Vzc29ySW5kZXggXTtcblxuXHRcdGlmICggYWNjZXNzb3JEZWYuYnVmZmVyVmlldyA9PT0gdW5kZWZpbmVkICYmIGFjY2Vzc29yRGVmLnNwYXJzZSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHQvLyBJZ25vcmUgZW1wdHkgYWNjZXNzb3JzLCB3aGljaCBtYXkgYmUgdXNlZCB0byBkZWNsYXJlIHJ1bnRpbWVcblx0XHRcdC8vIGluZm9ybWF0aW9uIGFib3V0IGF0dHJpYnV0ZXMgY29taW5nIGZyb20gYW5vdGhlciBzb3VyY2UgKGUuZy4gRHJhY29cblx0XHRcdC8vIGNvbXByZXNzaW9uIGV4dGVuc2lvbikuXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCBudWxsICk7XG5cblx0XHR9XG5cblx0XHRjb25zdCBwZW5kaW5nQnVmZmVyVmlld3MgPSBbXTtcblxuXHRcdGlmICggYWNjZXNzb3JEZWYuYnVmZmVyVmlldyAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRwZW5kaW5nQnVmZmVyVmlld3MucHVzaCggdGhpcy5nZXREZXBlbmRlbmN5KCAnYnVmZmVyVmlldycsIGFjY2Vzc29yRGVmLmJ1ZmZlclZpZXcgKSApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0cGVuZGluZ0J1ZmZlclZpZXdzLnB1c2goIG51bGwgKTtcblxuXHRcdH1cblxuXHRcdGlmICggYWNjZXNzb3JEZWYuc3BhcnNlICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdHBlbmRpbmdCdWZmZXJWaWV3cy5wdXNoKCB0aGlzLmdldERlcGVuZGVuY3koICdidWZmZXJWaWV3JywgYWNjZXNzb3JEZWYuc3BhcnNlLmluZGljZXMuYnVmZmVyVmlldyApICk7XG5cdFx0XHRwZW5kaW5nQnVmZmVyVmlld3MucHVzaCggdGhpcy5nZXREZXBlbmRlbmN5KCAnYnVmZmVyVmlldycsIGFjY2Vzc29yRGVmLnNwYXJzZS52YWx1ZXMuYnVmZmVyVmlldyApICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoIHBlbmRpbmdCdWZmZXJWaWV3cyApLnRoZW4oIGZ1bmN0aW9uICggYnVmZmVyVmlld3MgKSB7XG5cblx0XHRcdGNvbnN0IGJ1ZmZlclZpZXcgPSBidWZmZXJWaWV3c1sgMCBdO1xuXG5cdFx0XHRjb25zdCBpdGVtU2l6ZSA9IFdFQkdMX1RZUEVfU0laRVNbIGFjY2Vzc29yRGVmLnR5cGUgXTtcblx0XHRcdGNvbnN0IFR5cGVkQXJyYXkgPSBXRUJHTF9DT01QT05FTlRfVFlQRVNbIGFjY2Vzc29yRGVmLmNvbXBvbmVudFR5cGUgXTtcblxuXHRcdFx0Ly8gRm9yIFZFQzM6IGl0ZW1TaXplIGlzIDMsIGVsZW1lbnRCeXRlcyBpcyA0LCBpdGVtQnl0ZXMgaXMgMTIuXG5cdFx0XHRjb25zdCBlbGVtZW50Qnl0ZXMgPSBUeXBlZEFycmF5LkJZVEVTX1BFUl9FTEVNRU5UO1xuXHRcdFx0Y29uc3QgaXRlbUJ5dGVzID0gZWxlbWVudEJ5dGVzICogaXRlbVNpemU7XG5cdFx0XHRjb25zdCBieXRlT2Zmc2V0ID0gYWNjZXNzb3JEZWYuYnl0ZU9mZnNldCB8fCAwO1xuXHRcdFx0Y29uc3QgYnl0ZVN0cmlkZSA9IGFjY2Vzc29yRGVmLmJ1ZmZlclZpZXcgIT09IHVuZGVmaW5lZCA/IGpzb24uYnVmZmVyVmlld3NbIGFjY2Vzc29yRGVmLmJ1ZmZlclZpZXcgXS5ieXRlU3RyaWRlIDogdW5kZWZpbmVkO1xuXHRcdFx0Y29uc3Qgbm9ybWFsaXplZCA9IGFjY2Vzc29yRGVmLm5vcm1hbGl6ZWQgPT09IHRydWU7XG5cdFx0XHRsZXQgYXJyYXksIGJ1ZmZlckF0dHJpYnV0ZTtcblxuXHRcdFx0Ly8gVGhlIGJ1ZmZlciBpcyBub3QgaW50ZXJsZWF2ZWQgaWYgdGhlIHN0cmlkZSBpcyB0aGUgaXRlbSBzaXplIGluIGJ5dGVzLlxuXHRcdFx0aWYgKCBieXRlU3RyaWRlICYmIGJ5dGVTdHJpZGUgIT09IGl0ZW1CeXRlcyApIHtcblxuXHRcdFx0XHQvLyBFYWNoIFwic2xpY2VcIiBvZiB0aGUgYnVmZmVyLCBhcyBkZWZpbmVkIGJ5ICdjb3VudCcgZWxlbWVudHMgb2YgJ2J5dGVTdHJpZGUnIGJ5dGVzLCBnZXRzIGl0cyBvd24gSW50ZXJsZWF2ZWRCdWZmZXJcblx0XHRcdFx0Ly8gVGhpcyBtYWtlcyBzdXJlIHRoYXQgSUJBLmNvdW50IHJlZmxlY3RzIGFjY2Vzc29yLmNvdW50IHByb3Blcmx5XG5cdFx0XHRcdGNvbnN0IGliU2xpY2UgPSBNYXRoLmZsb29yKCBieXRlT2Zmc2V0IC8gYnl0ZVN0cmlkZSApO1xuXHRcdFx0XHRjb25zdCBpYkNhY2hlS2V5ID0gJ0ludGVybGVhdmVkQnVmZmVyOicgKyBhY2Nlc3NvckRlZi5idWZmZXJWaWV3ICsgJzonICsgYWNjZXNzb3JEZWYuY29tcG9uZW50VHlwZSArICc6JyArIGliU2xpY2UgKyAnOicgKyBhY2Nlc3NvckRlZi5jb3VudDtcblx0XHRcdFx0bGV0IGliID0gcGFyc2VyLmNhY2hlLmdldCggaWJDYWNoZUtleSApO1xuXG5cdFx0XHRcdGlmICggISBpYiApIHtcblxuXHRcdFx0XHRcdGFycmF5ID0gbmV3IFR5cGVkQXJyYXkoIGJ1ZmZlclZpZXcsIGliU2xpY2UgKiBieXRlU3RyaWRlLCBhY2Nlc3NvckRlZi5jb3VudCAqIGJ5dGVTdHJpZGUgLyBlbGVtZW50Qnl0ZXMgKTtcblxuXHRcdFx0XHRcdC8vIEludGVnZXIgcGFyYW1ldGVycyB0byBJQi9JQkEgYXJlIGluIGFycmF5IGVsZW1lbnRzLCBub3QgYnl0ZXMuXG5cdFx0XHRcdFx0aWIgPSBuZXcgSW50ZXJsZWF2ZWRCdWZmZXIoIGFycmF5LCBieXRlU3RyaWRlIC8gZWxlbWVudEJ5dGVzICk7XG5cblx0XHRcdFx0XHRwYXJzZXIuY2FjaGUuYWRkKCBpYkNhY2hlS2V5LCBpYiApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRidWZmZXJBdHRyaWJ1dGUgPSBuZXcgSW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUoIGliLCBpdGVtU2l6ZSwgKCBieXRlT2Zmc2V0ICUgYnl0ZVN0cmlkZSApIC8gZWxlbWVudEJ5dGVzLCBub3JtYWxpemVkICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0aWYgKCBidWZmZXJWaWV3ID09PSBudWxsICkge1xuXG5cdFx0XHRcdFx0YXJyYXkgPSBuZXcgVHlwZWRBcnJheSggYWNjZXNzb3JEZWYuY291bnQgKiBpdGVtU2l6ZSApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRhcnJheSA9IG5ldyBUeXBlZEFycmF5KCBidWZmZXJWaWV3LCBieXRlT2Zmc2V0LCBhY2Nlc3NvckRlZi5jb3VudCAqIGl0ZW1TaXplICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGJ1ZmZlckF0dHJpYnV0ZSA9IG5ldyBCdWZmZXJBdHRyaWJ1dGUoIGFycmF5LCBpdGVtU2l6ZSwgbm9ybWFsaXplZCApO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjc3BhcnNlLWFjY2Vzc29yc1xuXHRcdFx0aWYgKCBhY2Nlc3NvckRlZi5zcGFyc2UgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRjb25zdCBpdGVtU2l6ZUluZGljZXMgPSBXRUJHTF9UWVBFX1NJWkVTLlNDQUxBUjtcblx0XHRcdFx0Y29uc3QgVHlwZWRBcnJheUluZGljZXMgPSBXRUJHTF9DT01QT05FTlRfVFlQRVNbIGFjY2Vzc29yRGVmLnNwYXJzZS5pbmRpY2VzLmNvbXBvbmVudFR5cGUgXTtcblxuXHRcdFx0XHRjb25zdCBieXRlT2Zmc2V0SW5kaWNlcyA9IGFjY2Vzc29yRGVmLnNwYXJzZS5pbmRpY2VzLmJ5dGVPZmZzZXQgfHwgMDtcblx0XHRcdFx0Y29uc3QgYnl0ZU9mZnNldFZhbHVlcyA9IGFjY2Vzc29yRGVmLnNwYXJzZS52YWx1ZXMuYnl0ZU9mZnNldCB8fCAwO1xuXG5cdFx0XHRcdGNvbnN0IHNwYXJzZUluZGljZXMgPSBuZXcgVHlwZWRBcnJheUluZGljZXMoIGJ1ZmZlclZpZXdzWyAxIF0sIGJ5dGVPZmZzZXRJbmRpY2VzLCBhY2Nlc3NvckRlZi5zcGFyc2UuY291bnQgKiBpdGVtU2l6ZUluZGljZXMgKTtcblx0XHRcdFx0Y29uc3Qgc3BhcnNlVmFsdWVzID0gbmV3IFR5cGVkQXJyYXkoIGJ1ZmZlclZpZXdzWyAyIF0sIGJ5dGVPZmZzZXRWYWx1ZXMsIGFjY2Vzc29yRGVmLnNwYXJzZS5jb3VudCAqIGl0ZW1TaXplICk7XG5cblx0XHRcdFx0aWYgKCBidWZmZXJWaWV3ICE9PSBudWxsICkge1xuXG5cdFx0XHRcdFx0Ly8gQXZvaWQgbW9kaWZ5aW5nIHRoZSBvcmlnaW5hbCBBcnJheUJ1ZmZlciwgaWYgdGhlIGJ1ZmZlclZpZXcgd2Fzbid0IGluaXRpYWxpemVkIHdpdGggemVyb2VzLlxuXHRcdFx0XHRcdGJ1ZmZlckF0dHJpYnV0ZSA9IG5ldyBCdWZmZXJBdHRyaWJ1dGUoIGJ1ZmZlckF0dHJpYnV0ZS5hcnJheS5zbGljZSgpLCBidWZmZXJBdHRyaWJ1dGUuaXRlbVNpemUsIGJ1ZmZlckF0dHJpYnV0ZS5ub3JtYWxpemVkICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGZvciAoIGxldCBpID0gMCwgaWwgPSBzcGFyc2VJbmRpY2VzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0XHRcdFx0Y29uc3QgaW5kZXggPSBzcGFyc2VJbmRpY2VzWyBpIF07XG5cblx0XHRcdFx0XHRidWZmZXJBdHRyaWJ1dGUuc2V0WCggaW5kZXgsIHNwYXJzZVZhbHVlc1sgaSAqIGl0ZW1TaXplIF0gKTtcblx0XHRcdFx0XHRpZiAoIGl0ZW1TaXplID49IDIgKSBidWZmZXJBdHRyaWJ1dGUuc2V0WSggaW5kZXgsIHNwYXJzZVZhbHVlc1sgaSAqIGl0ZW1TaXplICsgMSBdICk7XG5cdFx0XHRcdFx0aWYgKCBpdGVtU2l6ZSA+PSAzICkgYnVmZmVyQXR0cmlidXRlLnNldFooIGluZGV4LCBzcGFyc2VWYWx1ZXNbIGkgKiBpdGVtU2l6ZSArIDIgXSApO1xuXHRcdFx0XHRcdGlmICggaXRlbVNpemUgPj0gNCApIGJ1ZmZlckF0dHJpYnV0ZS5zZXRXKCBpbmRleCwgc3BhcnNlVmFsdWVzWyBpICogaXRlbVNpemUgKyAzIF0gKTtcblx0XHRcdFx0XHRpZiAoIGl0ZW1TaXplID49IDUgKSB0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBVbnN1cHBvcnRlZCBpdGVtU2l6ZSBpbiBzcGFyc2UgQnVmZmVyQXR0cmlidXRlLicgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGJ1ZmZlckF0dHJpYnV0ZTtcblxuXHRcdH0gKTtcblxuXHR9XG5cblx0LyoqXG5cdCAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMCN0ZXh0dXJlc1xuXHQgKiBAcGFyYW0ge251bWJlcn0gdGV4dHVyZUluZGV4XG5cdCAqIEByZXR1cm4ge1Byb21pc2U8VEhSRUUuVGV4dHVyZT59XG5cdCAqL1xuXHRsb2FkVGV4dHVyZSggdGV4dHVyZUluZGV4ICkge1xuXG5cdFx0Y29uc3QganNvbiA9IHRoaXMuanNvbjtcblx0XHRjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXHRcdGNvbnN0IHRleHR1cmVEZWYgPSBqc29uLnRleHR1cmVzWyB0ZXh0dXJlSW5kZXggXTtcblx0XHRjb25zdCBzb3VyY2UgPSBqc29uLmltYWdlc1sgdGV4dHVyZURlZi5zb3VyY2UgXTtcblxuXHRcdGxldCBsb2FkZXIgPSB0aGlzLnRleHR1cmVMb2FkZXI7XG5cblx0XHRpZiAoIHNvdXJjZS51cmkgKSB7XG5cblx0XHRcdGNvbnN0IGhhbmRsZXIgPSBvcHRpb25zLm1hbmFnZXIuZ2V0SGFuZGxlciggc291cmNlLnVyaSApO1xuXHRcdFx0aWYgKCBoYW5kbGVyICE9PSBudWxsICkgbG9hZGVyID0gaGFuZGxlcjtcblxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmxvYWRUZXh0dXJlSW1hZ2UoIHRleHR1cmVJbmRleCwgc291cmNlLCBsb2FkZXIgKTtcblxuXHR9XG5cblx0bG9hZFRleHR1cmVJbWFnZSggdGV4dHVyZUluZGV4LCBzb3VyY2UsIGxvYWRlciApIHtcblxuXHRcdGNvbnN0IHBhcnNlciA9IHRoaXM7XG5cdFx0Y29uc3QganNvbiA9IHRoaXMuanNvbjtcblx0XHRjb25zdCBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXG5cdFx0Y29uc3QgdGV4dHVyZURlZiA9IGpzb24udGV4dHVyZXNbIHRleHR1cmVJbmRleCBdO1xuXG5cdFx0Y29uc3QgY2FjaGVLZXkgPSAoIHNvdXJjZS51cmkgfHwgc291cmNlLmJ1ZmZlclZpZXcgKSArICc6JyArIHRleHR1cmVEZWYuc2FtcGxlcjtcblxuXHRcdGlmICggdGhpcy50ZXh0dXJlQ2FjaGVbIGNhY2hlS2V5IF0gKSB7XG5cblx0XHRcdC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL3RocmVlLmpzL2lzc3Vlcy8yMTU1OS5cblx0XHRcdHJldHVybiB0aGlzLnRleHR1cmVDYWNoZVsgY2FjaGVLZXkgXTtcblxuXHRcdH1cblxuXHRcdGNvbnN0IFVSTCA9IHNlbGYuVVJMIHx8IHNlbGYud2Via2l0VVJMO1xuXG5cdFx0bGV0IHNvdXJjZVVSSSA9IHNvdXJjZS51cmkgfHwgJyc7XG5cdFx0bGV0IGlzT2JqZWN0VVJMID0gZmFsc2U7XG5cdFx0bGV0IGhhc0FscGhhID0gdHJ1ZTtcblxuXHRcdGNvbnN0IGlzSlBFRyA9IHNvdXJjZVVSSS5zZWFyY2goIC9cXC5qcGU/ZygkfFxcPykvaSApID4gMCB8fCBzb3VyY2VVUkkuc2VhcmNoKCAvXmRhdGFcXDppbWFnZVxcL2pwZWcvICkgPT09IDA7XG5cblx0XHRpZiAoIHNvdXJjZS5taW1lVHlwZSA9PT0gJ2ltYWdlL2pwZWcnIHx8IGlzSlBFRyApIGhhc0FscGhhID0gZmFsc2U7XG5cblx0XHRpZiAoIHNvdXJjZS5idWZmZXJWaWV3ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdC8vIExvYWQgYmluYXJ5IGltYWdlIGRhdGEgZnJvbSBidWZmZXJWaWV3LCBpZiBwcm92aWRlZC5cblxuXHRcdFx0c291cmNlVVJJID0gcGFyc2VyLmdldERlcGVuZGVuY3koICdidWZmZXJWaWV3Jywgc291cmNlLmJ1ZmZlclZpZXcgKS50aGVuKCBmdW5jdGlvbiAoIGJ1ZmZlclZpZXcgKSB7XG5cblx0XHRcdFx0aWYgKCBzb3VyY2UubWltZVR5cGUgPT09ICdpbWFnZS9wbmcnICkge1xuXG5cdFx0XHRcdFx0Ly8gSW5zcGVjdCB0aGUgUE5HICdJSERSJyBjaHVuayB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgaW1hZ2UgY291bGQgaGF2ZSBhblxuXHRcdFx0XHRcdC8vIGFscGhhIGNoYW5uZWwuIFRoaXMgY2hlY2sgaXMgY29uc2VydmF0aXZlIOKAlCB0aGUgaW1hZ2UgY291bGQgaGF2ZSBhbiBhbHBoYVxuXHRcdFx0XHRcdC8vIGNoYW5uZWwgd2l0aCBhbGwgdmFsdWVzID09IDEsIGFuZCB0aGUgaW5kZXhlZCB0eXBlIChjb2xvclR5cGUgPT0gMykgb25seVxuXHRcdFx0XHRcdC8vIHNvbWV0aW1lcyBjb250YWlucyBhbHBoYS5cblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdC8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1BvcnRhYmxlX05ldHdvcmtfR3JhcGhpY3MjRmlsZV9oZWFkZXJcblx0XHRcdFx0XHRjb25zdCBjb2xvclR5cGUgPSBuZXcgRGF0YVZpZXcoIGJ1ZmZlclZpZXcsIDI1LCAxICkuZ2V0VWludDgoIDAsIGZhbHNlICk7XG5cdFx0XHRcdFx0aGFzQWxwaGEgPSBjb2xvclR5cGUgPT09IDYgfHwgY29sb3JUeXBlID09PSA0IHx8IGNvbG9yVHlwZSA9PT0gMztcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aXNPYmplY3RVUkwgPSB0cnVlO1xuXHRcdFx0XHRjb25zdCBibG9iID0gbmV3IEJsb2IoIFsgYnVmZmVyVmlldyBdLCB7IHR5cGU6IHNvdXJjZS5taW1lVHlwZSB9ICk7XG5cdFx0XHRcdHNvdXJjZVVSSSA9IFVSTC5jcmVhdGVPYmplY3RVUkwoIGJsb2IgKTtcblx0XHRcdFx0cmV0dXJuIHNvdXJjZVVSSTtcblxuXHRcdFx0fSApO1xuXG5cdFx0fSBlbHNlIGlmICggc291cmNlLnVyaSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBJbWFnZSAnICsgdGV4dHVyZUluZGV4ICsgJyBpcyBtaXNzaW5nIFVSSSBhbmQgYnVmZmVyVmlldycgKTtcblxuXHRcdH1cblxuXHRcdGNvbnN0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoIHNvdXJjZVVSSSApLnRoZW4oIGZ1bmN0aW9uICggc291cmNlVVJJICkge1xuXG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoIGZ1bmN0aW9uICggcmVzb2x2ZSwgcmVqZWN0ICkge1xuXG5cdFx0XHRcdGxldCBvbkxvYWQgPSByZXNvbHZlO1xuXG5cdFx0XHRcdGlmICggbG9hZGVyLmlzSW1hZ2VCaXRtYXBMb2FkZXIgPT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHRvbkxvYWQgPSBmdW5jdGlvbiAoIGltYWdlQml0bWFwICkge1xuXG5cdFx0XHRcdFx0XHRjb25zdCB0ZXh0dXJlID0gbmV3IFRleHR1cmUoIGltYWdlQml0bWFwICk7XG5cdFx0XHRcdFx0XHR0ZXh0dXJlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcblxuXHRcdFx0XHRcdFx0cmVzb2x2ZSggdGV4dHVyZSApO1xuXG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0bG9hZGVyLmxvYWQoIHJlc29sdmVVUkwoIHNvdXJjZVVSSSwgb3B0aW9ucy5wYXRoICksIG9uTG9hZCwgdW5kZWZpbmVkLCByZWplY3QgKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0fSApLnRoZW4oIGZ1bmN0aW9uICggdGV4dHVyZSApIHtcblxuXHRcdFx0Ly8gQ2xlYW4gdXAgcmVzb3VyY2VzIGFuZCBjb25maWd1cmUgVGV4dHVyZS5cblxuXHRcdFx0aWYgKCBpc09iamVjdFVSTCA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRVUkwucmV2b2tlT2JqZWN0VVJMKCBzb3VyY2VVUkkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHR0ZXh0dXJlLmZsaXBZID0gZmFsc2U7XG5cblx0XHRcdGlmICggdGV4dHVyZURlZi5uYW1lICkgdGV4dHVyZS5uYW1lID0gdGV4dHVyZURlZi5uYW1lO1xuXG5cdFx0XHQvLyBXaGVuIHRoZXJlIGlzIGRlZmluaXRlbHkgbm8gYWxwaGEgY2hhbm5lbCBpbiB0aGUgdGV4dHVyZSwgc2V0IFJHQkZvcm1hdCB0byBzYXZlIHNwYWNlLlxuXHRcdFx0aWYgKCAhIGhhc0FscGhhICkgdGV4dHVyZS5mb3JtYXQgPSBSR0JGb3JtYXQ7XG5cblx0XHRcdGNvbnN0IHNhbXBsZXJzID0ganNvbi5zYW1wbGVycyB8fCB7fTtcblx0XHRcdGNvbnN0IHNhbXBsZXIgPSBzYW1wbGVyc1sgdGV4dHVyZURlZi5zYW1wbGVyIF0gfHwge307XG5cblx0XHRcdHRleHR1cmUubWFnRmlsdGVyID0gV0VCR0xfRklMVEVSU1sgc2FtcGxlci5tYWdGaWx0ZXIgXSB8fCBMaW5lYXJGaWx0ZXI7XG5cdFx0XHR0ZXh0dXJlLm1pbkZpbHRlciA9IFdFQkdMX0ZJTFRFUlNbIHNhbXBsZXIubWluRmlsdGVyIF0gfHwgTGluZWFyTWlwbWFwTGluZWFyRmlsdGVyO1xuXHRcdFx0dGV4dHVyZS53cmFwUyA9IFdFQkdMX1dSQVBQSU5HU1sgc2FtcGxlci53cmFwUyBdIHx8IFJlcGVhdFdyYXBwaW5nO1xuXHRcdFx0dGV4dHVyZS53cmFwVCA9IFdFQkdMX1dSQVBQSU5HU1sgc2FtcGxlci53cmFwVCBdIHx8IFJlcGVhdFdyYXBwaW5nO1xuXG5cdFx0XHRwYXJzZXIuYXNzb2NpYXRpb25zLnNldCggdGV4dHVyZSwge1xuXHRcdFx0XHR0eXBlOiAndGV4dHVyZXMnLFxuXHRcdFx0XHRpbmRleDogdGV4dHVyZUluZGV4XG5cdFx0XHR9ICk7XG5cblx0XHRcdHJldHVybiB0ZXh0dXJlO1xuXG5cdFx0fSApLmNhdGNoKCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdGNvbnNvbGUuZXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBDb3VsZG5cXCd0IGxvYWQgdGV4dHVyZScsIHNvdXJjZVVSSSApO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHR9ICk7XG5cblx0XHR0aGlzLnRleHR1cmVDYWNoZVsgY2FjaGVLZXkgXSA9IHByb21pc2U7XG5cblx0XHRyZXR1cm4gcHJvbWlzZTtcblxuXHR9XG5cblx0LyoqXG5cdCAqIEFzeW5jaHJvbm91c2x5IGFzc2lnbnMgYSB0ZXh0dXJlIHRvIHRoZSBnaXZlbiBtYXRlcmlhbCBwYXJhbWV0ZXJzLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gbWF0ZXJpYWxQYXJhbXNcblx0ICogQHBhcmFtIHtzdHJpbmd9IG1hcE5hbWVcblx0ICogQHBhcmFtIHtPYmplY3R9IG1hcERlZlxuXHQgKiBAcmV0dXJuIHtQcm9taXNlfVxuXHQgKi9cblx0YXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsIG1hcE5hbWUsIG1hcERlZiApIHtcblxuXHRcdGNvbnN0IHBhcnNlciA9IHRoaXM7XG5cblx0XHRyZXR1cm4gdGhpcy5nZXREZXBlbmRlbmN5KCAndGV4dHVyZScsIG1hcERlZi5pbmRleCApLnRoZW4oIGZ1bmN0aW9uICggdGV4dHVyZSApIHtcblxuXHRcdFx0Ly8gTWF0ZXJpYWxzIHNhbXBsZSBhb01hcCBmcm9tIFVWIHNldCAxIGFuZCBvdGhlciBtYXBzIGZyb20gVVYgc2V0IDAgLSB0aGlzIGNhbid0IGJlIGNvbmZpZ3VyZWRcblx0XHRcdC8vIEhvd2V2ZXIsIHdlIHdpbGwgY29weSBVViBzZXQgMCB0byBVViBzZXQgMSBvbiBkZW1hbmQgZm9yIGFvTWFwXG5cdFx0XHRpZiAoIG1hcERlZi50ZXhDb29yZCAhPT0gdW5kZWZpbmVkICYmIG1hcERlZi50ZXhDb29yZCAhPSAwICYmICEgKCBtYXBOYW1lID09PSAnYW9NYXAnICYmIG1hcERlZi50ZXhDb29yZCA9PSAxICkgKSB7XG5cblx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuR0xURkxvYWRlcjogQ3VzdG9tIFVWIHNldCAnICsgbWFwRGVmLnRleENvb3JkICsgJyBmb3IgdGV4dHVyZSAnICsgbWFwTmFtZSArICcgbm90IHlldCBzdXBwb3J0ZWQuJyApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggcGFyc2VyLmV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX1RFWFRVUkVfVFJBTlNGT1JNIF0gKSB7XG5cblx0XHRcdFx0Y29uc3QgdHJhbnNmb3JtID0gbWFwRGVmLmV4dGVuc2lvbnMgIT09IHVuZGVmaW5lZCA/IG1hcERlZi5leHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9URVhUVVJFX1RSQU5TRk9STSBdIDogdW5kZWZpbmVkO1xuXG5cdFx0XHRcdGlmICggdHJhbnNmb3JtICkge1xuXG5cdFx0XHRcdFx0Y29uc3QgZ2x0ZlJlZmVyZW5jZSA9IHBhcnNlci5hc3NvY2lhdGlvbnMuZ2V0KCB0ZXh0dXJlICk7XG5cdFx0XHRcdFx0dGV4dHVyZSA9IHBhcnNlci5leHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9URVhUVVJFX1RSQU5TRk9STSBdLmV4dGVuZFRleHR1cmUoIHRleHR1cmUsIHRyYW5zZm9ybSApO1xuXHRcdFx0XHRcdHBhcnNlci5hc3NvY2lhdGlvbnMuc2V0KCB0ZXh0dXJlLCBnbHRmUmVmZXJlbmNlICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdG1hdGVyaWFsUGFyYW1zWyBtYXBOYW1lIF0gPSB0ZXh0dXJlO1xuXG5cdFx0fSApO1xuXG5cdH1cblxuXHQvKipcblx0ICogQXNzaWducyBmaW5hbCBtYXRlcmlhbCB0byBhIE1lc2gsIExpbmUsIG9yIFBvaW50cyBpbnN0YW5jZS4gVGhlIGluc3RhbmNlXG5cdCAqIGFscmVhZHkgaGFzIGEgbWF0ZXJpYWwgKGdlbmVyYXRlZCBmcm9tIHRoZSBnbFRGIG1hdGVyaWFsIG9wdGlvbnMgYWxvbmUpXG5cdCAqIGJ1dCByZXVzZSBvZiB0aGUgc2FtZSBnbFRGIG1hdGVyaWFsIG1heSByZXF1aXJlIG11bHRpcGxlIHRocmVlanMgbWF0ZXJpYWxzXG5cdCAqIHRvIGFjY29tbW9kYXRlIGRpZmZlcmVudCBwcmltaXRpdmUgdHlwZXMsIGRlZmluZXMsIGV0Yy4gTmV3IG1hdGVyaWFscyB3aWxsXG5cdCAqIGJlIGNyZWF0ZWQgaWYgbmVjZXNzYXJ5LCBhbmQgcmV1c2VkIGZyb20gYSBjYWNoZS5cblx0ICogQHBhcmFtICB7T2JqZWN0M0R9IG1lc2ggTWVzaCwgTGluZSwgb3IgUG9pbnRzIGluc3RhbmNlLlxuXHQgKi9cblx0YXNzaWduRmluYWxNYXRlcmlhbCggbWVzaCApIHtcblxuXHRcdGNvbnN0IGdlb21ldHJ5ID0gbWVzaC5nZW9tZXRyeTtcblx0XHRsZXQgbWF0ZXJpYWwgPSBtZXNoLm1hdGVyaWFsO1xuXG5cdFx0Y29uc3QgdXNlVmVydGV4VGFuZ2VudHMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLnRhbmdlbnQgIT09IHVuZGVmaW5lZDtcblx0XHRjb25zdCB1c2VWZXJ0ZXhDb2xvcnMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLmNvbG9yICE9PSB1bmRlZmluZWQ7XG5cdFx0Y29uc3QgdXNlRmxhdFNoYWRpbmcgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLm5vcm1hbCA9PT0gdW5kZWZpbmVkO1xuXHRcdGNvbnN0IHVzZU1vcnBoVGFyZ2V0cyA9IE9iamVjdC5rZXlzKCBnZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMgKS5sZW5ndGggPiAwO1xuXHRcdGNvbnN0IHVzZU1vcnBoTm9ybWFscyA9IHVzZU1vcnBoVGFyZ2V0cyAmJiBnZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMubm9ybWFsICE9PSB1bmRlZmluZWQ7XG5cblx0XHRpZiAoIG1lc2guaXNQb2ludHMgKSB7XG5cblx0XHRcdGNvbnN0IGNhY2hlS2V5ID0gJ1BvaW50c01hdGVyaWFsOicgKyBtYXRlcmlhbC51dWlkO1xuXG5cdFx0XHRsZXQgcG9pbnRzTWF0ZXJpYWwgPSB0aGlzLmNhY2hlLmdldCggY2FjaGVLZXkgKTtcblxuXHRcdFx0aWYgKCAhIHBvaW50c01hdGVyaWFsICkge1xuXG5cdFx0XHRcdHBvaW50c01hdGVyaWFsID0gbmV3IFBvaW50c01hdGVyaWFsKCk7XG5cdFx0XHRcdE1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwoIHBvaW50c01hdGVyaWFsLCBtYXRlcmlhbCApO1xuXHRcdFx0XHRwb2ludHNNYXRlcmlhbC5jb2xvci5jb3B5KCBtYXRlcmlhbC5jb2xvciApO1xuXHRcdFx0XHRwb2ludHNNYXRlcmlhbC5tYXAgPSBtYXRlcmlhbC5tYXA7XG5cdFx0XHRcdHBvaW50c01hdGVyaWFsLnNpemVBdHRlbnVhdGlvbiA9IGZhbHNlOyAvLyBnbFRGIHNwZWMgc2F5cyBwb2ludHMgc2hvdWxkIGJlIDFweFxuXG5cdFx0XHRcdHRoaXMuY2FjaGUuYWRkKCBjYWNoZUtleSwgcG9pbnRzTWF0ZXJpYWwgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRtYXRlcmlhbCA9IHBvaW50c01hdGVyaWFsO1xuXG5cdFx0fSBlbHNlIGlmICggbWVzaC5pc0xpbmUgKSB7XG5cblx0XHRcdGNvbnN0IGNhY2hlS2V5ID0gJ0xpbmVCYXNpY01hdGVyaWFsOicgKyBtYXRlcmlhbC51dWlkO1xuXG5cdFx0XHRsZXQgbGluZU1hdGVyaWFsID0gdGhpcy5jYWNoZS5nZXQoIGNhY2hlS2V5ICk7XG5cblx0XHRcdGlmICggISBsaW5lTWF0ZXJpYWwgKSB7XG5cblx0XHRcdFx0bGluZU1hdGVyaWFsID0gbmV3IExpbmVCYXNpY01hdGVyaWFsKCk7XG5cdFx0XHRcdE1hdGVyaWFsLnByb3RvdHlwZS5jb3B5LmNhbGwoIGxpbmVNYXRlcmlhbCwgbWF0ZXJpYWwgKTtcblx0XHRcdFx0bGluZU1hdGVyaWFsLmNvbG9yLmNvcHkoIG1hdGVyaWFsLmNvbG9yICk7XG5cblx0XHRcdFx0dGhpcy5jYWNoZS5hZGQoIGNhY2hlS2V5LCBsaW5lTWF0ZXJpYWwgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRtYXRlcmlhbCA9IGxpbmVNYXRlcmlhbDtcblxuXHRcdH1cblxuXHRcdC8vIENsb25lIHRoZSBtYXRlcmlhbCBpZiBpdCB3aWxsIGJlIG1vZGlmaWVkXG5cdFx0aWYgKCB1c2VWZXJ0ZXhUYW5nZW50cyB8fCB1c2VWZXJ0ZXhDb2xvcnMgfHwgdXNlRmxhdFNoYWRpbmcgfHwgdXNlTW9ycGhUYXJnZXRzICkge1xuXG5cdFx0XHRsZXQgY2FjaGVLZXkgPSAnQ2xvbmVkTWF0ZXJpYWw6JyArIG1hdGVyaWFsLnV1aWQgKyAnOic7XG5cblx0XHRcdGlmICggbWF0ZXJpYWwuaXNHTFRGU3BlY3VsYXJHbG9zc2luZXNzTWF0ZXJpYWwgKSBjYWNoZUtleSArPSAnc3BlY3VsYXItZ2xvc3NpbmVzczonO1xuXHRcdFx0aWYgKCB1c2VWZXJ0ZXhUYW5nZW50cyApIGNhY2hlS2V5ICs9ICd2ZXJ0ZXgtdGFuZ2VudHM6Jztcblx0XHRcdGlmICggdXNlVmVydGV4Q29sb3JzICkgY2FjaGVLZXkgKz0gJ3ZlcnRleC1jb2xvcnM6Jztcblx0XHRcdGlmICggdXNlRmxhdFNoYWRpbmcgKSBjYWNoZUtleSArPSAnZmxhdC1zaGFkaW5nOic7XG5cdFx0XHRpZiAoIHVzZU1vcnBoVGFyZ2V0cyApIGNhY2hlS2V5ICs9ICdtb3JwaC10YXJnZXRzOic7XG5cdFx0XHRpZiAoIHVzZU1vcnBoTm9ybWFscyApIGNhY2hlS2V5ICs9ICdtb3JwaC1ub3JtYWxzOic7XG5cblx0XHRcdGxldCBjYWNoZWRNYXRlcmlhbCA9IHRoaXMuY2FjaGUuZ2V0KCBjYWNoZUtleSApO1xuXG5cdFx0XHRpZiAoICEgY2FjaGVkTWF0ZXJpYWwgKSB7XG5cblx0XHRcdFx0Y2FjaGVkTWF0ZXJpYWwgPSBtYXRlcmlhbC5jbG9uZSgpO1xuXG5cdFx0XHRcdGlmICggdXNlVmVydGV4Q29sb3JzICkgY2FjaGVkTWF0ZXJpYWwudmVydGV4Q29sb3JzID0gdHJ1ZTtcblx0XHRcdFx0aWYgKCB1c2VGbGF0U2hhZGluZyApIGNhY2hlZE1hdGVyaWFsLmZsYXRTaGFkaW5nID0gdHJ1ZTtcblx0XHRcdFx0aWYgKCB1c2VNb3JwaFRhcmdldHMgKSBjYWNoZWRNYXRlcmlhbC5tb3JwaFRhcmdldHMgPSB0cnVlO1xuXHRcdFx0XHRpZiAoIHVzZU1vcnBoTm9ybWFscyApIGNhY2hlZE1hdGVyaWFsLm1vcnBoTm9ybWFscyA9IHRydWU7XG5cblx0XHRcdFx0aWYgKCB1c2VWZXJ0ZXhUYW5nZW50cyApIHtcblxuXHRcdFx0XHRcdGNhY2hlZE1hdGVyaWFsLnZlcnRleFRhbmdlbnRzID0gdHJ1ZTtcblxuXHRcdFx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2IvdGhyZWUuanMvaXNzdWVzLzExNDM4I2lzc3VlY29tbWVudC01MDcwMDM5OTVcblx0XHRcdFx0XHRpZiAoIGNhY2hlZE1hdGVyaWFsLm5vcm1hbFNjYWxlICkgY2FjaGVkTWF0ZXJpYWwubm9ybWFsU2NhbGUueSAqPSAtIDE7XG5cdFx0XHRcdFx0aWYgKCBjYWNoZWRNYXRlcmlhbC5jbGVhcmNvYXROb3JtYWxTY2FsZSApIGNhY2hlZE1hdGVyaWFsLmNsZWFyY29hdE5vcm1hbFNjYWxlLnkgKj0gLSAxO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLmNhY2hlLmFkZCggY2FjaGVLZXksIGNhY2hlZE1hdGVyaWFsICk7XG5cblx0XHRcdFx0dGhpcy5hc3NvY2lhdGlvbnMuc2V0KCBjYWNoZWRNYXRlcmlhbCwgdGhpcy5hc3NvY2lhdGlvbnMuZ2V0KCBtYXRlcmlhbCApICk7XG5cblx0XHRcdH1cblxuXHRcdFx0bWF0ZXJpYWwgPSBjYWNoZWRNYXRlcmlhbDtcblxuXHRcdH1cblxuXHRcdC8vIHdvcmthcm91bmRzIGZvciBtZXNoIGFuZCBnZW9tZXRyeVxuXG5cdFx0aWYgKCBtYXRlcmlhbC5hb01hcCAmJiBnZW9tZXRyeS5hdHRyaWJ1dGVzLnV2MiA9PT0gdW5kZWZpbmVkICYmIGdlb21ldHJ5LmF0dHJpYnV0ZXMudXYgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0Z2VvbWV0cnkuc2V0QXR0cmlidXRlKCAndXYyJywgZ2VvbWV0cnkuYXR0cmlidXRlcy51diApO1xuXG5cdFx0fVxuXG5cdFx0bWVzaC5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuXG5cdH1cblxuXHRnZXRNYXRlcmlhbFR5cGUoIC8qIG1hdGVyaWFsSW5kZXggKi8gKSB7XG5cblx0XHRyZXR1cm4gTWVzaFN0YW5kYXJkTWF0ZXJpYWw7XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAvUkVBRE1FLm1kI21hdGVyaWFsc1xuXHQgKiBAcGFyYW0ge251bWJlcn0gbWF0ZXJpYWxJbmRleFxuXHQgKiBAcmV0dXJuIHtQcm9taXNlPE1hdGVyaWFsPn1cblx0ICovXG5cdGxvYWRNYXRlcmlhbCggbWF0ZXJpYWxJbmRleCApIHtcblxuXHRcdGNvbnN0IHBhcnNlciA9IHRoaXM7XG5cdFx0Y29uc3QganNvbiA9IHRoaXMuanNvbjtcblx0XHRjb25zdCBleHRlbnNpb25zID0gdGhpcy5leHRlbnNpb25zO1xuXHRcdGNvbnN0IG1hdGVyaWFsRGVmID0ganNvbi5tYXRlcmlhbHNbIG1hdGVyaWFsSW5kZXggXTtcblxuXHRcdGxldCBtYXRlcmlhbFR5cGU7XG5cdFx0Y29uc3QgbWF0ZXJpYWxQYXJhbXMgPSB7fTtcblx0XHRjb25zdCBtYXRlcmlhbEV4dGVuc2lvbnMgPSBtYXRlcmlhbERlZi5leHRlbnNpb25zIHx8IHt9O1xuXG5cdFx0Y29uc3QgcGVuZGluZyA9IFtdO1xuXG5cdFx0aWYgKCBtYXRlcmlhbEV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTUyBdICkge1xuXG5cdFx0XHRjb25zdCBzZ0V4dGVuc2lvbiA9IGV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTUyBdO1xuXHRcdFx0bWF0ZXJpYWxUeXBlID0gc2dFeHRlbnNpb24uZ2V0TWF0ZXJpYWxUeXBlKCk7XG5cdFx0XHRwZW5kaW5nLnB1c2goIHNnRXh0ZW5zaW9uLmV4dGVuZFBhcmFtcyggbWF0ZXJpYWxQYXJhbXMsIG1hdGVyaWFsRGVmLCBwYXJzZXIgKSApO1xuXG5cdFx0fSBlbHNlIGlmICggbWF0ZXJpYWxFeHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9NQVRFUklBTFNfVU5MSVQgXSApIHtcblxuXHRcdFx0Y29uc3Qga211RXh0ZW5zaW9uID0gZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1VOTElUIF07XG5cdFx0XHRtYXRlcmlhbFR5cGUgPSBrbXVFeHRlbnNpb24uZ2V0TWF0ZXJpYWxUeXBlKCk7XG5cdFx0XHRwZW5kaW5nLnB1c2goIGttdUV4dGVuc2lvbi5leHRlbmRQYXJhbXMoIG1hdGVyaWFsUGFyYW1zLCBtYXRlcmlhbERlZiwgcGFyc2VyICkgKTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIFNwZWNpZmljYXRpb246XG5cdFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAjbWV0YWxsaWMtcm91Z2huZXNzLW1hdGVyaWFsXG5cblx0XHRcdGNvbnN0IG1ldGFsbGljUm91Z2huZXNzID0gbWF0ZXJpYWxEZWYucGJyTWV0YWxsaWNSb3VnaG5lc3MgfHwge307XG5cblx0XHRcdG1hdGVyaWFsUGFyYW1zLmNvbG9yID0gbmV3IENvbG9yKCAxLjAsIDEuMCwgMS4wICk7XG5cdFx0XHRtYXRlcmlhbFBhcmFtcy5vcGFjaXR5ID0gMS4wO1xuXG5cdFx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIG1ldGFsbGljUm91Z2huZXNzLmJhc2VDb2xvckZhY3RvciApICkge1xuXG5cdFx0XHRcdGNvbnN0IGFycmF5ID0gbWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yRmFjdG9yO1xuXG5cdFx0XHRcdG1hdGVyaWFsUGFyYW1zLmNvbG9yLmZyb21BcnJheSggYXJyYXkgKTtcblx0XHRcdFx0bWF0ZXJpYWxQYXJhbXMub3BhY2l0eSA9IGFycmF5WyAzIF07XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBtZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JUZXh0dXJlICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdtYXAnLCBtZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JUZXh0dXJlICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRtYXRlcmlhbFBhcmFtcy5tZXRhbG5lc3MgPSBtZXRhbGxpY1JvdWdobmVzcy5tZXRhbGxpY0ZhY3RvciAhPT0gdW5kZWZpbmVkID8gbWV0YWxsaWNSb3VnaG5lc3MubWV0YWxsaWNGYWN0b3IgOiAxLjA7XG5cdFx0XHRtYXRlcmlhbFBhcmFtcy5yb3VnaG5lc3MgPSBtZXRhbGxpY1JvdWdobmVzcy5yb3VnaG5lc3NGYWN0b3IgIT09IHVuZGVmaW5lZCA/IG1ldGFsbGljUm91Z2huZXNzLnJvdWdobmVzc0ZhY3RvciA6IDEuMDtcblxuXHRcdFx0aWYgKCBtZXRhbGxpY1JvdWdobmVzcy5tZXRhbGxpY1JvdWdobmVzc1RleHR1cmUgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBtYXRlcmlhbFBhcmFtcywgJ21ldGFsbmVzc01hcCcsIG1ldGFsbGljUm91Z2huZXNzLm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSApICk7XG5cdFx0XHRcdHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAncm91Z2huZXNzTWFwJywgbWV0YWxsaWNSb3VnaG5lc3MubWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRtYXRlcmlhbFR5cGUgPSB0aGlzLl9pbnZva2VPbmUoIGZ1bmN0aW9uICggZXh0ICkge1xuXG5cdFx0XHRcdHJldHVybiBleHQuZ2V0TWF0ZXJpYWxUeXBlICYmIGV4dC5nZXRNYXRlcmlhbFR5cGUoIG1hdGVyaWFsSW5kZXggKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0XHRwZW5kaW5nLnB1c2goIFByb21pc2UuYWxsKCB0aGlzLl9pbnZva2VBbGwoIGZ1bmN0aW9uICggZXh0ICkge1xuXG5cdFx0XHRcdHJldHVybiBleHQuZXh0ZW5kTWF0ZXJpYWxQYXJhbXMgJiYgZXh0LmV4dGVuZE1hdGVyaWFsUGFyYW1zKCBtYXRlcmlhbEluZGV4LCBtYXRlcmlhbFBhcmFtcyApO1xuXG5cdFx0XHR9ICkgKSApO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBtYXRlcmlhbERlZi5kb3VibGVTaWRlZCA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0bWF0ZXJpYWxQYXJhbXMuc2lkZSA9IERvdWJsZVNpZGU7XG5cblx0XHR9XG5cblx0XHRjb25zdCBhbHBoYU1vZGUgPSBtYXRlcmlhbERlZi5hbHBoYU1vZGUgfHwgQUxQSEFfTU9ERVMuT1BBUVVFO1xuXG5cdFx0aWYgKCBhbHBoYU1vZGUgPT09IEFMUEhBX01PREVTLkJMRU5EICkge1xuXG5cdFx0XHRtYXRlcmlhbFBhcmFtcy50cmFuc3BhcmVudCA9IHRydWU7XG5cblx0XHRcdC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9pc3N1ZXMvMTc3MDZcblx0XHRcdG1hdGVyaWFsUGFyYW1zLmRlcHRoV3JpdGUgPSBmYWxzZTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdG1hdGVyaWFsUGFyYW1zLnRyYW5zcGFyZW50ID0gZmFsc2U7XG5cblx0XHRcdGlmICggYWxwaGFNb2RlID09PSBBTFBIQV9NT0RFUy5NQVNLICkge1xuXG5cdFx0XHRcdG1hdGVyaWFsUGFyYW1zLmFscGhhVGVzdCA9IG1hdGVyaWFsRGVmLmFscGhhQ3V0b2ZmICE9PSB1bmRlZmluZWQgPyBtYXRlcmlhbERlZi5hbHBoYUN1dG9mZiA6IDAuNTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0aWYgKCBtYXRlcmlhbERlZi5ub3JtYWxUZXh0dXJlICE9PSB1bmRlZmluZWQgJiYgbWF0ZXJpYWxUeXBlICE9PSBNZXNoQmFzaWNNYXRlcmlhbCApIHtcblxuXHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdub3JtYWxNYXAnLCBtYXRlcmlhbERlZi5ub3JtYWxUZXh0dXJlICkgKTtcblxuXHRcdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9pc3N1ZXMvMTE0MzgjaXNzdWVjb21tZW50LTUwNzAwMzk5NVxuXHRcdFx0bWF0ZXJpYWxQYXJhbXMubm9ybWFsU2NhbGUgPSBuZXcgVmVjdG9yMiggMSwgLSAxICk7XG5cblx0XHRcdGlmICggbWF0ZXJpYWxEZWYubm9ybWFsVGV4dHVyZS5zY2FsZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdG1hdGVyaWFsUGFyYW1zLm5vcm1hbFNjYWxlLnNldCggbWF0ZXJpYWxEZWYubm9ybWFsVGV4dHVyZS5zY2FsZSwgLSBtYXRlcmlhbERlZi5ub3JtYWxUZXh0dXJlLnNjYWxlICk7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGlmICggbWF0ZXJpYWxEZWYub2NjbHVzaW9uVGV4dHVyZSAhPT0gdW5kZWZpbmVkICYmIG1hdGVyaWFsVHlwZSAhPT0gTWVzaEJhc2ljTWF0ZXJpYWwgKSB7XG5cblx0XHRcdHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAnYW9NYXAnLCBtYXRlcmlhbERlZi5vY2NsdXNpb25UZXh0dXJlICkgKTtcblxuXHRcdFx0aWYgKCBtYXRlcmlhbERlZi5vY2NsdXNpb25UZXh0dXJlLnN0cmVuZ3RoICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0bWF0ZXJpYWxQYXJhbXMuYW9NYXBJbnRlbnNpdHkgPSBtYXRlcmlhbERlZi5vY2NsdXNpb25UZXh0dXJlLnN0cmVuZ3RoO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRpZiAoIG1hdGVyaWFsRGVmLmVtaXNzaXZlRmFjdG9yICE9PSB1bmRlZmluZWQgJiYgbWF0ZXJpYWxUeXBlICE9PSBNZXNoQmFzaWNNYXRlcmlhbCApIHtcblxuXHRcdFx0bWF0ZXJpYWxQYXJhbXMuZW1pc3NpdmUgPSBuZXcgQ29sb3IoKS5mcm9tQXJyYXkoIG1hdGVyaWFsRGVmLmVtaXNzaXZlRmFjdG9yICk7XG5cblx0XHR9XG5cblx0XHRpZiAoIG1hdGVyaWFsRGVmLmVtaXNzaXZlVGV4dHVyZSAhPT0gdW5kZWZpbmVkICYmIG1hdGVyaWFsVHlwZSAhPT0gTWVzaEJhc2ljTWF0ZXJpYWwgKSB7XG5cblx0XHRcdHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAnZW1pc3NpdmVNYXAnLCBtYXRlcmlhbERlZi5lbWlzc2l2ZVRleHR1cmUgKSApO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKCBwZW5kaW5nICkudGhlbiggZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRsZXQgbWF0ZXJpYWw7XG5cblx0XHRcdGlmICggbWF0ZXJpYWxUeXBlID09PSBHTFRGTWVzaFN0YW5kYXJkU0dNYXRlcmlhbCApIHtcblxuXHRcdFx0XHRtYXRlcmlhbCA9IGV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTUyBdLmNyZWF0ZU1hdGVyaWFsKCBtYXRlcmlhbFBhcmFtcyApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdG1hdGVyaWFsID0gbmV3IG1hdGVyaWFsVHlwZSggbWF0ZXJpYWxQYXJhbXMgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIG1hdGVyaWFsRGVmLm5hbWUgKSBtYXRlcmlhbC5uYW1lID0gbWF0ZXJpYWxEZWYubmFtZTtcblxuXHRcdFx0Ly8gYmFzZUNvbG9yVGV4dHVyZSwgZW1pc3NpdmVUZXh0dXJlLCBhbmQgc3BlY3VsYXJHbG9zc2luZXNzVGV4dHVyZSB1c2Ugc1JHQiBlbmNvZGluZy5cblx0XHRcdGlmICggbWF0ZXJpYWwubWFwICkgbWF0ZXJpYWwubWFwLmVuY29kaW5nID0gc1JHQkVuY29kaW5nO1xuXHRcdFx0aWYgKCBtYXRlcmlhbC5lbWlzc2l2ZU1hcCApIG1hdGVyaWFsLmVtaXNzaXZlTWFwLmVuY29kaW5nID0gc1JHQkVuY29kaW5nO1xuXG5cdFx0XHRhc3NpZ25FeHRyYXNUb1VzZXJEYXRhKCBtYXRlcmlhbCwgbWF0ZXJpYWxEZWYgKTtcblxuXHRcdFx0cGFyc2VyLmFzc29jaWF0aW9ucy5zZXQoIG1hdGVyaWFsLCB7IHR5cGU6ICdtYXRlcmlhbHMnLCBpbmRleDogbWF0ZXJpYWxJbmRleCB9ICk7XG5cblx0XHRcdGlmICggbWF0ZXJpYWxEZWYuZXh0ZW5zaW9ucyApIGFkZFVua25vd25FeHRlbnNpb25zVG9Vc2VyRGF0YSggZXh0ZW5zaW9ucywgbWF0ZXJpYWwsIG1hdGVyaWFsRGVmICk7XG5cblx0XHRcdHJldHVybiBtYXRlcmlhbDtcblxuXHRcdH0gKTtcblxuXHR9XG5cblx0LyoqIFdoZW4gT2JqZWN0M0QgaW5zdGFuY2VzIGFyZSB0YXJnZXRlZCBieSBhbmltYXRpb24sIHRoZXkgbmVlZCB1bmlxdWUgbmFtZXMuICovXG5cdGNyZWF0ZVVuaXF1ZU5hbWUoIG9yaWdpbmFsTmFtZSApIHtcblxuXHRcdGNvbnN0IHNhbml0aXplZE5hbWUgPSBQcm9wZXJ0eUJpbmRpbmcuc2FuaXRpemVOb2RlTmFtZSggb3JpZ2luYWxOYW1lIHx8ICcnICk7XG5cblx0XHRsZXQgbmFtZSA9IHNhbml0aXplZE5hbWU7XG5cblx0XHRmb3IgKCBsZXQgaSA9IDE7IHRoaXMubm9kZU5hbWVzVXNlZFsgbmFtZSBdOyArKyBpICkge1xuXG5cdFx0XHRuYW1lID0gc2FuaXRpemVkTmFtZSArICdfJyArIGk7XG5cblx0XHR9XG5cblx0XHR0aGlzLm5vZGVOYW1lc1VzZWRbIG5hbWUgXSA9IHRydWU7XG5cblx0XHRyZXR1cm4gbmFtZTtcblxuXHR9XG5cblx0LyoqXG5cdCAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjZ2VvbWV0cnlcblx0ICpcblx0ICogQ3JlYXRlcyBCdWZmZXJHZW9tZXRyaWVzIGZyb20gcHJpbWl0aXZlcy5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheTxHTFRGLlByaW1pdGl2ZT59IHByaW1pdGl2ZXNcblx0ICogQHJldHVybiB7UHJvbWlzZTxBcnJheTxCdWZmZXJHZW9tZXRyeT4+fVxuXHQgKi9cblx0bG9hZEdlb21ldHJpZXMoIHByaW1pdGl2ZXMgKSB7XG5cblx0XHRjb25zdCBwYXJzZXIgPSB0aGlzO1xuXHRcdGNvbnN0IGV4dGVuc2lvbnMgPSB0aGlzLmV4dGVuc2lvbnM7XG5cdFx0Y29uc3QgY2FjaGUgPSB0aGlzLnByaW1pdGl2ZUNhY2hlO1xuXG5cdFx0ZnVuY3Rpb24gY3JlYXRlRHJhY29QcmltaXRpdmUoIHByaW1pdGl2ZSApIHtcblxuXHRcdFx0cmV0dXJuIGV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX0RSQUNPX01FU0hfQ09NUFJFU1NJT04gXVxuXHRcdFx0XHQuZGVjb2RlUHJpbWl0aXZlKCBwcmltaXRpdmUsIHBhcnNlciApXG5cdFx0XHRcdC50aGVuKCBmdW5jdGlvbiAoIGdlb21ldHJ5ICkge1xuXG5cdFx0XHRcdFx0cmV0dXJuIGFkZFByaW1pdGl2ZUF0dHJpYnV0ZXMoIGdlb21ldHJ5LCBwcmltaXRpdmUsIHBhcnNlciApO1xuXG5cdFx0XHRcdH0gKTtcblxuXHRcdH1cblxuXHRcdGNvbnN0IHBlbmRpbmcgPSBbXTtcblxuXHRcdGZvciAoIGxldCBpID0gMCwgaWwgPSBwcmltaXRpdmVzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0XHRjb25zdCBwcmltaXRpdmUgPSBwcmltaXRpdmVzWyBpIF07XG5cdFx0XHRjb25zdCBjYWNoZUtleSA9IGNyZWF0ZVByaW1pdGl2ZUtleSggcHJpbWl0aXZlICk7XG5cblx0XHRcdC8vIFNlZSBpZiB3ZSd2ZSBhbHJlYWR5IGNyZWF0ZWQgdGhpcyBnZW9tZXRyeVxuXHRcdFx0Y29uc3QgY2FjaGVkID0gY2FjaGVbIGNhY2hlS2V5IF07XG5cblx0XHRcdGlmICggY2FjaGVkICkge1xuXG5cdFx0XHRcdC8vIFVzZSB0aGUgY2FjaGVkIGdlb21ldHJ5IGlmIGl0IGV4aXN0c1xuXHRcdFx0XHRwZW5kaW5nLnB1c2goIGNhY2hlZC5wcm9taXNlICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0bGV0IGdlb21ldHJ5UHJvbWlzZTtcblxuXHRcdFx0XHRpZiAoIHByaW1pdGl2ZS5leHRlbnNpb25zICYmIHByaW1pdGl2ZS5leHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9EUkFDT19NRVNIX0NPTVBSRVNTSU9OIF0gKSB7XG5cblx0XHRcdFx0XHQvLyBVc2UgRFJBQ08gZ2VvbWV0cnkgaWYgYXZhaWxhYmxlXG5cdFx0XHRcdFx0Z2VvbWV0cnlQcm9taXNlID0gY3JlYXRlRHJhY29QcmltaXRpdmUoIHByaW1pdGl2ZSApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHQvLyBPdGhlcndpc2UgY3JlYXRlIGEgbmV3IGdlb21ldHJ5XG5cdFx0XHRcdFx0Z2VvbWV0cnlQcm9taXNlID0gYWRkUHJpbWl0aXZlQXR0cmlidXRlcyggbmV3IEJ1ZmZlckdlb21ldHJ5KCksIHByaW1pdGl2ZSwgcGFyc2VyICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENhY2hlIHRoaXMgZ2VvbWV0cnlcblx0XHRcdFx0Y2FjaGVbIGNhY2hlS2V5IF0gPSB7IHByaW1pdGl2ZTogcHJpbWl0aXZlLCBwcm9taXNlOiBnZW9tZXRyeVByb21pc2UgfTtcblxuXHRcdFx0XHRwZW5kaW5nLnB1c2goIGdlb21ldHJ5UHJvbWlzZSApO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoIHBlbmRpbmcgKTtcblxuXHR9XG5cblx0LyoqXG5cdCAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjbWVzaGVzXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBtZXNoSW5kZXhcblx0ICogQHJldHVybiB7UHJvbWlzZTxHcm91cHxNZXNofFNraW5uZWRNZXNoPn1cblx0ICovXG5cdGxvYWRNZXNoKCBtZXNoSW5kZXggKSB7XG5cblx0XHRjb25zdCBwYXJzZXIgPSB0aGlzO1xuXHRcdGNvbnN0IGpzb24gPSB0aGlzLmpzb247XG5cdFx0Y29uc3QgZXh0ZW5zaW9ucyA9IHRoaXMuZXh0ZW5zaW9ucztcblxuXHRcdGNvbnN0IG1lc2hEZWYgPSBqc29uLm1lc2hlc1sgbWVzaEluZGV4IF07XG5cdFx0Y29uc3QgcHJpbWl0aXZlcyA9IG1lc2hEZWYucHJpbWl0aXZlcztcblxuXHRcdGNvbnN0IHBlbmRpbmcgPSBbXTtcblxuXHRcdGZvciAoIGxldCBpID0gMCwgaWwgPSBwcmltaXRpdmVzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0XHRjb25zdCBtYXRlcmlhbCA9IHByaW1pdGl2ZXNbIGkgXS5tYXRlcmlhbCA9PT0gdW5kZWZpbmVkXG5cdFx0XHRcdD8gY3JlYXRlRGVmYXVsdE1hdGVyaWFsKCB0aGlzLmNhY2hlIClcblx0XHRcdFx0OiB0aGlzLmdldERlcGVuZGVuY3koICdtYXRlcmlhbCcsIHByaW1pdGl2ZXNbIGkgXS5tYXRlcmlhbCApO1xuXG5cdFx0XHRwZW5kaW5nLnB1c2goIG1hdGVyaWFsICk7XG5cblx0XHR9XG5cblx0XHRwZW5kaW5nLnB1c2goIHBhcnNlci5sb2FkR2VvbWV0cmllcyggcHJpbWl0aXZlcyApICk7XG5cblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoIHBlbmRpbmcgKS50aGVuKCBmdW5jdGlvbiAoIHJlc3VsdHMgKSB7XG5cblx0XHRcdGNvbnN0IG1hdGVyaWFscyA9IHJlc3VsdHMuc2xpY2UoIDAsIHJlc3VsdHMubGVuZ3RoIC0gMSApO1xuXHRcdFx0Y29uc3QgZ2VvbWV0cmllcyA9IHJlc3VsdHNbIHJlc3VsdHMubGVuZ3RoIC0gMSBdO1xuXG5cdFx0XHRjb25zdCBtZXNoZXMgPSBbXTtcblxuXHRcdFx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IGdlb21ldHJpZXMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRcdFx0Y29uc3QgZ2VvbWV0cnkgPSBnZW9tZXRyaWVzWyBpIF07XG5cdFx0XHRcdGNvbnN0IHByaW1pdGl2ZSA9IHByaW1pdGl2ZXNbIGkgXTtcblxuXHRcdFx0XHQvLyAxLiBjcmVhdGUgTWVzaFxuXG5cdFx0XHRcdGxldCBtZXNoO1xuXG5cdFx0XHRcdGNvbnN0IG1hdGVyaWFsID0gbWF0ZXJpYWxzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLlRSSUFOR0xFUyB8fFxuXHRcdFx0XHRcdFx0cHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5UUklBTkdMRV9TVFJJUCB8fFxuXHRcdFx0XHRcdFx0cHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5UUklBTkdMRV9GQU4gfHxcblx0XHRcdFx0XHRcdHByaW1pdGl2ZS5tb2RlID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHQvLyAuaXNTa2lubmVkTWVzaCBpc24ndCBpbiBnbFRGIHNwZWMuIFNlZSAuX21hcmtEZWZzKClcblx0XHRcdFx0XHRtZXNoID0gbWVzaERlZi5pc1NraW5uZWRNZXNoID09PSB0cnVlXG5cdFx0XHRcdFx0XHQ/IG5ldyBTa2lubmVkTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsIClcblx0XHRcdFx0XHRcdDogbmV3IE1lc2goIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xuXG5cdFx0XHRcdFx0aWYgKCBtZXNoLmlzU2tpbm5lZE1lc2ggPT09IHRydWUgJiYgISBtZXNoLmdlb21ldHJ5LmF0dHJpYnV0ZXMuc2tpbldlaWdodC5ub3JtYWxpemVkICkge1xuXG5cdFx0XHRcdFx0XHQvLyB3ZSBub3JtYWxpemUgZmxvYXRpbmcgcG9pbnQgc2tpbiB3ZWlnaHQgYXJyYXkgdG8gZml4IG1hbGZvcm1lZCBhc3NldHMgKHNlZSAjMTUzMTkpXG5cdFx0XHRcdFx0XHQvLyBpdCdzIGltcG9ydGFudCB0byBza2lwIHRoaXMgZm9yIG5vbi1mbG9hdDMyIGRhdGEgc2luY2Ugbm9ybWFsaXplU2tpbldlaWdodHMgYXNzdW1lcyBub24tbm9ybWFsaXplZCBpbnB1dHNcblx0XHRcdFx0XHRcdG1lc2gubm9ybWFsaXplU2tpbldlaWdodHMoKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICggcHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5UUklBTkdMRV9TVFJJUCApIHtcblxuXHRcdFx0XHRcdFx0bWVzaC5nZW9tZXRyeSA9IHRvVHJpYW5nbGVzRHJhd01vZGUoIG1lc2guZ2VvbWV0cnksIFRyaWFuZ2xlU3RyaXBEcmF3TW9kZSApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggcHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5UUklBTkdMRV9GQU4gKSB7XG5cblx0XHRcdFx0XHRcdG1lc2guZ2VvbWV0cnkgPSB0b1RyaWFuZ2xlc0RyYXdNb2RlKCBtZXNoLmdlb21ldHJ5LCBUcmlhbmdsZUZhbkRyYXdNb2RlICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSBlbHNlIGlmICggcHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5MSU5FUyApIHtcblxuXHRcdFx0XHRcdG1lc2ggPSBuZXcgTGluZVNlZ21lbnRzKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKCBwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLkxJTkVfU1RSSVAgKSB7XG5cblx0XHRcdFx0XHRtZXNoID0gbmV3IExpbmUoIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xuXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHByaW1pdGl2ZS5tb2RlID09PSBXRUJHTF9DT05TVEFOVFMuTElORV9MT09QICkge1xuXG5cdFx0XHRcdFx0bWVzaCA9IG5ldyBMaW5lTG9vcCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG5cblx0XHRcdFx0fSBlbHNlIGlmICggcHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5QT0lOVFMgKSB7XG5cblx0XHRcdFx0XHRtZXNoID0gbmV3IFBvaW50cyggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IFByaW1pdGl2ZSBtb2RlIHVuc3VwcG9ydGVkOiAnICsgcHJpbWl0aXZlLm1vZGUgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBPYmplY3Qua2V5cyggbWVzaC5nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMgKS5sZW5ndGggPiAwICkge1xuXG5cdFx0XHRcdFx0dXBkYXRlTW9ycGhUYXJnZXRzKCBtZXNoLCBtZXNoRGVmICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdG1lc2gubmFtZSA9IHBhcnNlci5jcmVhdGVVbmlxdWVOYW1lKCBtZXNoRGVmLm5hbWUgfHwgKCAnbWVzaF8nICsgbWVzaEluZGV4ICkgKTtcblxuXHRcdFx0XHRhc3NpZ25FeHRyYXNUb1VzZXJEYXRhKCBtZXNoLCBtZXNoRGVmICk7XG5cblx0XHRcdFx0aWYgKCBwcmltaXRpdmUuZXh0ZW5zaW9ucyApIGFkZFVua25vd25FeHRlbnNpb25zVG9Vc2VyRGF0YSggZXh0ZW5zaW9ucywgbWVzaCwgcHJpbWl0aXZlICk7XG5cblx0XHRcdFx0cGFyc2VyLmFzc2lnbkZpbmFsTWF0ZXJpYWwoIG1lc2ggKTtcblxuXHRcdFx0XHRtZXNoZXMucHVzaCggbWVzaCApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggbWVzaGVzLmxlbmd0aCA9PT0gMSApIHtcblxuXHRcdFx0XHRyZXR1cm4gbWVzaGVzWyAwIF07XG5cblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgZ3JvdXAgPSBuZXcgR3JvdXAoKTtcblxuXHRcdFx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IG1lc2hlcy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0XHRncm91cC5hZGQoIG1lc2hlc1sgaSBdICk7XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGdyb3VwO1xuXG5cdFx0fSApO1xuXG5cdH1cblxuXHQvKipcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wI2NhbWVyYXNcblx0ICogQHBhcmFtIHtudW1iZXJ9IGNhbWVyYUluZGV4XG5cdCAqIEByZXR1cm4ge1Byb21pc2U8VEhSRUUuQ2FtZXJhPn1cblx0ICovXG5cdGxvYWRDYW1lcmEoIGNhbWVyYUluZGV4ICkge1xuXG5cdFx0bGV0IGNhbWVyYTtcblx0XHRjb25zdCBjYW1lcmFEZWYgPSB0aGlzLmpzb24uY2FtZXJhc1sgY2FtZXJhSW5kZXggXTtcblx0XHRjb25zdCBwYXJhbXMgPSBjYW1lcmFEZWZbIGNhbWVyYURlZi50eXBlIF07XG5cblx0XHRpZiAoICEgcGFyYW1zICkge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5HTFRGTG9hZGVyOiBNaXNzaW5nIGNhbWVyYSBwYXJhbWV0ZXJzLicgKTtcblx0XHRcdHJldHVybjtcblxuXHRcdH1cblxuXHRcdGlmICggY2FtZXJhRGVmLnR5cGUgPT09ICdwZXJzcGVjdGl2ZScgKSB7XG5cblx0XHRcdGNhbWVyYSA9IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYSggTWF0aFV0aWxzLnJhZFRvRGVnKCBwYXJhbXMueWZvdiApLCBwYXJhbXMuYXNwZWN0UmF0aW8gfHwgMSwgcGFyYW1zLnpuZWFyIHx8IDEsIHBhcmFtcy56ZmFyIHx8IDJlNiApO1xuXG5cdFx0fSBlbHNlIGlmICggY2FtZXJhRGVmLnR5cGUgPT09ICdvcnRob2dyYXBoaWMnICkge1xuXG5cdFx0XHRjYW1lcmEgPSBuZXcgT3J0aG9ncmFwaGljQ2FtZXJhKCAtIHBhcmFtcy54bWFnLCBwYXJhbXMueG1hZywgcGFyYW1zLnltYWcsIC0gcGFyYW1zLnltYWcsIHBhcmFtcy56bmVhciwgcGFyYW1zLnpmYXIgKTtcblxuXHRcdH1cblxuXHRcdGlmICggY2FtZXJhRGVmLm5hbWUgKSBjYW1lcmEubmFtZSA9IHRoaXMuY3JlYXRlVW5pcXVlTmFtZSggY2FtZXJhRGVmLm5hbWUgKTtcblxuXHRcdGFzc2lnbkV4dHJhc1RvVXNlckRhdGEoIGNhbWVyYSwgY2FtZXJhRGVmICk7XG5cblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCBjYW1lcmEgKTtcblxuXHR9XG5cblx0LyoqXG5cdCAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMCNza2luc1xuXHQgKiBAcGFyYW0ge251bWJlcn0gc2tpbkluZGV4XG5cdCAqIEByZXR1cm4ge1Byb21pc2U8T2JqZWN0Pn1cblx0ICovXG5cdGxvYWRTa2luKCBza2luSW5kZXggKSB7XG5cblx0XHRjb25zdCBza2luRGVmID0gdGhpcy5qc29uLnNraW5zWyBza2luSW5kZXggXTtcblxuXHRcdGNvbnN0IHNraW5FbnRyeSA9IHsgam9pbnRzOiBza2luRGVmLmpvaW50cyB9O1xuXG5cdFx0aWYgKCBza2luRGVmLmludmVyc2VCaW5kTWF0cmljZXMgPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSggc2tpbkVudHJ5ICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5nZXREZXBlbmRlbmN5KCAnYWNjZXNzb3InLCBza2luRGVmLmludmVyc2VCaW5kTWF0cmljZXMgKS50aGVuKCBmdW5jdGlvbiAoIGFjY2Vzc29yICkge1xuXG5cdFx0XHRza2luRW50cnkuaW52ZXJzZUJpbmRNYXRyaWNlcyA9IGFjY2Vzc29yO1xuXG5cdFx0XHRyZXR1cm4gc2tpbkVudHJ5O1xuXG5cdFx0fSApO1xuXG5cdH1cblxuXHQvKipcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wI2FuaW1hdGlvbnNcblx0ICogQHBhcmFtIHtudW1iZXJ9IGFuaW1hdGlvbkluZGV4XG5cdCAqIEByZXR1cm4ge1Byb21pc2U8QW5pbWF0aW9uQ2xpcD59XG5cdCAqL1xuXHRsb2FkQW5pbWF0aW9uKCBhbmltYXRpb25JbmRleCApIHtcblxuXHRcdGNvbnN0IGpzb24gPSB0aGlzLmpzb247XG5cblx0XHRjb25zdCBhbmltYXRpb25EZWYgPSBqc29uLmFuaW1hdGlvbnNbIGFuaW1hdGlvbkluZGV4IF07XG5cblx0XHRjb25zdCBwZW5kaW5nTm9kZXMgPSBbXTtcblx0XHRjb25zdCBwZW5kaW5nSW5wdXRBY2Nlc3NvcnMgPSBbXTtcblx0XHRjb25zdCBwZW5kaW5nT3V0cHV0QWNjZXNzb3JzID0gW107XG5cdFx0Y29uc3QgcGVuZGluZ1NhbXBsZXJzID0gW107XG5cdFx0Y29uc3QgcGVuZGluZ1RhcmdldHMgPSBbXTtcblxuXHRcdGZvciAoIGxldCBpID0gMCwgaWwgPSBhbmltYXRpb25EZWYuY2hhbm5lbHMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRcdGNvbnN0IGNoYW5uZWwgPSBhbmltYXRpb25EZWYuY2hhbm5lbHNbIGkgXTtcblx0XHRcdGNvbnN0IHNhbXBsZXIgPSBhbmltYXRpb25EZWYuc2FtcGxlcnNbIGNoYW5uZWwuc2FtcGxlciBdO1xuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gY2hhbm5lbC50YXJnZXQ7XG5cdFx0XHRjb25zdCBuYW1lID0gdGFyZ2V0Lm5vZGUgIT09IHVuZGVmaW5lZCA/IHRhcmdldC5ub2RlIDogdGFyZ2V0LmlkOyAvLyBOT1RFOiB0YXJnZXQuaWQgaXMgZGVwcmVjYXRlZC5cblx0XHRcdGNvbnN0IGlucHV0ID0gYW5pbWF0aW9uRGVmLnBhcmFtZXRlcnMgIT09IHVuZGVmaW5lZCA/IGFuaW1hdGlvbkRlZi5wYXJhbWV0ZXJzWyBzYW1wbGVyLmlucHV0IF0gOiBzYW1wbGVyLmlucHV0O1xuXHRcdFx0Y29uc3Qgb3V0cHV0ID0gYW5pbWF0aW9uRGVmLnBhcmFtZXRlcnMgIT09IHVuZGVmaW5lZCA/IGFuaW1hdGlvbkRlZi5wYXJhbWV0ZXJzWyBzYW1wbGVyLm91dHB1dCBdIDogc2FtcGxlci5vdXRwdXQ7XG5cblx0XHRcdHBlbmRpbmdOb2Rlcy5wdXNoKCB0aGlzLmdldERlcGVuZGVuY3koICdub2RlJywgbmFtZSApICk7XG5cdFx0XHRwZW5kaW5nSW5wdXRBY2Nlc3NvcnMucHVzaCggdGhpcy5nZXREZXBlbmRlbmN5KCAnYWNjZXNzb3InLCBpbnB1dCApICk7XG5cdFx0XHRwZW5kaW5nT3V0cHV0QWNjZXNzb3JzLnB1c2goIHRoaXMuZ2V0RGVwZW5kZW5jeSggJ2FjY2Vzc29yJywgb3V0cHV0ICkgKTtcblx0XHRcdHBlbmRpbmdTYW1wbGVycy5wdXNoKCBzYW1wbGVyICk7XG5cdFx0XHRwZW5kaW5nVGFyZ2V0cy5wdXNoKCB0YXJnZXQgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBQcm9taXNlLmFsbCggW1xuXG5cdFx0XHRQcm9taXNlLmFsbCggcGVuZGluZ05vZGVzICksXG5cdFx0XHRQcm9taXNlLmFsbCggcGVuZGluZ0lucHV0QWNjZXNzb3JzICksXG5cdFx0XHRQcm9taXNlLmFsbCggcGVuZGluZ091dHB1dEFjY2Vzc29ycyApLFxuXHRcdFx0UHJvbWlzZS5hbGwoIHBlbmRpbmdTYW1wbGVycyApLFxuXHRcdFx0UHJvbWlzZS5hbGwoIHBlbmRpbmdUYXJnZXRzIClcblxuXHRcdF0gKS50aGVuKCBmdW5jdGlvbiAoIGRlcGVuZGVuY2llcyApIHtcblxuXHRcdFx0Y29uc3Qgbm9kZXMgPSBkZXBlbmRlbmNpZXNbIDAgXTtcblx0XHRcdGNvbnN0IGlucHV0QWNjZXNzb3JzID0gZGVwZW5kZW5jaWVzWyAxIF07XG5cdFx0XHRjb25zdCBvdXRwdXRBY2Nlc3NvcnMgPSBkZXBlbmRlbmNpZXNbIDIgXTtcblx0XHRcdGNvbnN0IHNhbXBsZXJzID0gZGVwZW5kZW5jaWVzWyAzIF07XG5cdFx0XHRjb25zdCB0YXJnZXRzID0gZGVwZW5kZW5jaWVzWyA0IF07XG5cblx0XHRcdGNvbnN0IHRyYWNrcyA9IFtdO1xuXG5cdFx0XHRmb3IgKCBsZXQgaSA9IDAsIGlsID0gbm9kZXMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRcdFx0Y29uc3Qgbm9kZSA9IG5vZGVzWyBpIF07XG5cdFx0XHRcdGNvbnN0IGlucHV0QWNjZXNzb3IgPSBpbnB1dEFjY2Vzc29yc1sgaSBdO1xuXHRcdFx0XHRjb25zdCBvdXRwdXRBY2Nlc3NvciA9IG91dHB1dEFjY2Vzc29yc1sgaSBdO1xuXHRcdFx0XHRjb25zdCBzYW1wbGVyID0gc2FtcGxlcnNbIGkgXTtcblx0XHRcdFx0Y29uc3QgdGFyZ2V0ID0gdGFyZ2V0c1sgaSBdO1xuXG5cdFx0XHRcdGlmICggbm9kZSA9PT0gdW5kZWZpbmVkICkgY29udGludWU7XG5cblx0XHRcdFx0bm9kZS51cGRhdGVNYXRyaXgoKTtcblx0XHRcdFx0bm9kZS5tYXRyaXhBdXRvVXBkYXRlID0gdHJ1ZTtcblxuXHRcdFx0XHRsZXQgVHlwZWRLZXlmcmFtZVRyYWNrO1xuXG5cdFx0XHRcdHN3aXRjaCAoIFBBVEhfUFJPUEVSVElFU1sgdGFyZ2V0LnBhdGggXSApIHtcblxuXHRcdFx0XHRcdGNhc2UgUEFUSF9QUk9QRVJUSUVTLndlaWdodHM6XG5cblx0XHRcdFx0XHRcdFR5cGVkS2V5ZnJhbWVUcmFjayA9IE51bWJlcktleWZyYW1lVHJhY2s7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgUEFUSF9QUk9QRVJUSUVTLnJvdGF0aW9uOlxuXG5cdFx0XHRcdFx0XHRUeXBlZEtleWZyYW1lVHJhY2sgPSBRdWF0ZXJuaW9uS2V5ZnJhbWVUcmFjaztcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSBQQVRIX1BST1BFUlRJRVMucG9zaXRpb246XG5cdFx0XHRcdFx0Y2FzZSBQQVRIX1BST1BFUlRJRVMuc2NhbGU6XG5cdFx0XHRcdFx0ZGVmYXVsdDpcblxuXHRcdFx0XHRcdFx0VHlwZWRLZXlmcmFtZVRyYWNrID0gVmVjdG9yS2V5ZnJhbWVUcmFjaztcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCB0YXJnZXROYW1lID0gbm9kZS5uYW1lID8gbm9kZS5uYW1lIDogbm9kZS51dWlkO1xuXG5cdFx0XHRcdGNvbnN0IGludGVycG9sYXRpb24gPSBzYW1wbGVyLmludGVycG9sYXRpb24gIT09IHVuZGVmaW5lZCA/IElOVEVSUE9MQVRJT05bIHNhbXBsZXIuaW50ZXJwb2xhdGlvbiBdIDogSW50ZXJwb2xhdGVMaW5lYXI7XG5cblx0XHRcdFx0Y29uc3QgdGFyZ2V0TmFtZXMgPSBbXTtcblxuXHRcdFx0XHRpZiAoIFBBVEhfUFJPUEVSVElFU1sgdGFyZ2V0LnBhdGggXSA9PT0gUEFUSF9QUk9QRVJUSUVTLndlaWdodHMgKSB7XG5cblx0XHRcdFx0XHQvLyBOb2RlIG1heSBiZSBhIEdyb3VwIChnbFRGIG1lc2ggd2l0aCBzZXZlcmFsIHByaW1pdGl2ZXMpIG9yIGEgTWVzaC5cblx0XHRcdFx0XHRub2RlLnRyYXZlcnNlKCBmdW5jdGlvbiAoIG9iamVjdCApIHtcblxuXHRcdFx0XHRcdFx0aWYgKCBvYmplY3QuaXNNZXNoID09PSB0cnVlICYmIG9iamVjdC5tb3JwaFRhcmdldEluZmx1ZW5jZXMgKSB7XG5cblx0XHRcdFx0XHRcdFx0dGFyZ2V0TmFtZXMucHVzaCggb2JqZWN0Lm5hbWUgPyBvYmplY3QubmFtZSA6IG9iamVjdC51dWlkICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH0gKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0dGFyZ2V0TmFtZXMucHVzaCggdGFyZ2V0TmFtZSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRsZXQgb3V0cHV0QXJyYXkgPSBvdXRwdXRBY2Nlc3Nvci5hcnJheTtcblxuXHRcdFx0XHRpZiAoIG91dHB1dEFjY2Vzc29yLm5vcm1hbGl6ZWQgKSB7XG5cblx0XHRcdFx0XHRjb25zdCBzY2FsZSA9IGdldE5vcm1hbGl6ZWRDb21wb25lbnRTY2FsZSggb3V0cHV0QXJyYXkuY29uc3RydWN0b3IgKTtcblx0XHRcdFx0XHRjb25zdCBzY2FsZWQgPSBuZXcgRmxvYXQzMkFycmF5KCBvdXRwdXRBcnJheS5sZW5ndGggKTtcblxuXHRcdFx0XHRcdGZvciAoIGxldCBqID0gMCwgamwgPSBvdXRwdXRBcnJheS5sZW5ndGg7IGogPCBqbDsgaiArKyApIHtcblxuXHRcdFx0XHRcdFx0c2NhbGVkWyBqIF0gPSBvdXRwdXRBcnJheVsgaiBdICogc2NhbGU7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRvdXRwdXRBcnJheSA9IHNjYWxlZDtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Zm9yICggbGV0IGogPSAwLCBqbCA9IHRhcmdldE5hbWVzLmxlbmd0aDsgaiA8IGpsOyBqICsrICkge1xuXG5cdFx0XHRcdFx0Y29uc3QgdHJhY2sgPSBuZXcgVHlwZWRLZXlmcmFtZVRyYWNrKFxuXHRcdFx0XHRcdFx0dGFyZ2V0TmFtZXNbIGogXSArICcuJyArIFBBVEhfUFJPUEVSVElFU1sgdGFyZ2V0LnBhdGggXSxcblx0XHRcdFx0XHRcdGlucHV0QWNjZXNzb3IuYXJyYXksXG5cdFx0XHRcdFx0XHRvdXRwdXRBcnJheSxcblx0XHRcdFx0XHRcdGludGVycG9sYXRpb25cblx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0Ly8gT3ZlcnJpZGUgaW50ZXJwb2xhdGlvbiB3aXRoIGN1c3RvbSBmYWN0b3J5IG1ldGhvZC5cblx0XHRcdFx0XHRpZiAoIHNhbXBsZXIuaW50ZXJwb2xhdGlvbiA9PT0gJ0NVQklDU1BMSU5FJyApIHtcblxuXHRcdFx0XHRcdFx0dHJhY2suY3JlYXRlSW50ZXJwb2xhbnQgPSBmdW5jdGlvbiBJbnRlcnBvbGFudEZhY3RvcnlNZXRob2RHTFRGQ3ViaWNTcGxpbmUoIHJlc3VsdCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBBIENVQklDU1BMSU5FIGtleWZyYW1lIGluIGdsVEYgaGFzIHRocmVlIG91dHB1dCB2YWx1ZXMgZm9yIGVhY2ggaW5wdXQgdmFsdWUsXG5cdFx0XHRcdFx0XHRcdC8vIHJlcHJlc2VudGluZyBpblRhbmdlbnQsIHNwbGluZVZlcnRleCwgYW5kIG91dFRhbmdlbnQuIEFzIGEgcmVzdWx0LCB0cmFjay5nZXRWYWx1ZVNpemUoKVxuXHRcdFx0XHRcdFx0XHQvLyBtdXN0IGJlIGRpdmlkZWQgYnkgdGhyZWUgdG8gZ2V0IHRoZSBpbnRlcnBvbGFudCdzIHNhbXBsZVNpemUgYXJndW1lbnQuXG5cblx0XHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBHTFRGQ3ViaWNTcGxpbmVJbnRlcnBvbGFudCggdGhpcy50aW1lcywgdGhpcy52YWx1ZXMsIHRoaXMuZ2V0VmFsdWVTaXplKCkgLyAzLCByZXN1bHQgKTtcblxuXHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0Ly8gTWFyayBhcyBDVUJJQ1NQTElORS4gYHRyYWNrLmdldEludGVycG9sYXRpb24oKWAgZG9lc24ndCBzdXBwb3J0IGN1c3RvbSBpbnRlcnBvbGFudHMuXG5cdFx0XHRcdFx0XHR0cmFjay5jcmVhdGVJbnRlcnBvbGFudC5pc0ludGVycG9sYW50RmFjdG9yeU1ldGhvZEdMVEZDdWJpY1NwbGluZSA9IHRydWU7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR0cmFja3MucHVzaCggdHJhY2sgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgbmFtZSA9IGFuaW1hdGlvbkRlZi5uYW1lID8gYW5pbWF0aW9uRGVmLm5hbWUgOiAnYW5pbWF0aW9uXycgKyBhbmltYXRpb25JbmRleDtcblxuXHRcdFx0cmV0dXJuIG5ldyBBbmltYXRpb25DbGlwKCBuYW1lLCB1bmRlZmluZWQsIHRyYWNrcyApO1xuXG5cdFx0fSApO1xuXG5cdH1cblxuXHRjcmVhdGVOb2RlTWVzaCggbm9kZUluZGV4ICkge1xuXG5cdFx0Y29uc3QganNvbiA9IHRoaXMuanNvbjtcblx0XHRjb25zdCBwYXJzZXIgPSB0aGlzO1xuXHRcdGNvbnN0IG5vZGVEZWYgPSBqc29uLm5vZGVzWyBub2RlSW5kZXggXTtcblxuXHRcdGlmICggbm9kZURlZi5tZXNoID09PSB1bmRlZmluZWQgKSByZXR1cm4gbnVsbDtcblxuXHRcdHJldHVybiBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ21lc2gnLCBub2RlRGVmLm1lc2ggKS50aGVuKCBmdW5jdGlvbiAoIG1lc2ggKSB7XG5cblx0XHRcdGNvbnN0IG5vZGUgPSBwYXJzZXIuX2dldE5vZGVSZWYoIHBhcnNlci5tZXNoQ2FjaGUsIG5vZGVEZWYubWVzaCwgbWVzaCApO1xuXG5cdFx0XHQvLyBpZiB3ZWlnaHRzIGFyZSBwcm92aWRlZCBvbiB0aGUgbm9kZSwgb3ZlcnJpZGUgd2VpZ2h0cyBvbiB0aGUgbWVzaC5cblx0XHRcdGlmICggbm9kZURlZi53ZWlnaHRzICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0bm9kZS50cmF2ZXJzZSggZnVuY3Rpb24gKCBvICkge1xuXG5cdFx0XHRcdFx0aWYgKCAhIG8uaXNNZXNoICkgcmV0dXJuO1xuXG5cdFx0XHRcdFx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IG5vZGVEZWYud2VpZ2h0cy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdFx0by5tb3JwaFRhcmdldEluZmx1ZW5jZXNbIGkgXSA9IG5vZGVEZWYud2VpZ2h0c1sgaSBdO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbm9kZTtcblxuXHRcdH0gKTtcblxuXHR9XG5cblx0LyoqXG5cdCAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMCNub2Rlcy1hbmQtaGllcmFyY2h5XG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBub2RlSW5kZXhcblx0ICogQHJldHVybiB7UHJvbWlzZTxPYmplY3QzRD59XG5cdCAqL1xuXHRsb2FkTm9kZSggbm9kZUluZGV4ICkge1xuXG5cdFx0Y29uc3QganNvbiA9IHRoaXMuanNvbjtcblx0XHRjb25zdCBleHRlbnNpb25zID0gdGhpcy5leHRlbnNpb25zO1xuXHRcdGNvbnN0IHBhcnNlciA9IHRoaXM7XG5cblx0XHRjb25zdCBub2RlRGVmID0ganNvbi5ub2Rlc1sgbm9kZUluZGV4IF07XG5cblx0XHQvLyByZXNlcnZlIG5vZGUncyBuYW1lIGJlZm9yZSBpdHMgZGVwZW5kZW5jaWVzLCBzbyB0aGUgcm9vdCBoYXMgdGhlIGludGVuZGVkIG5hbWUuXG5cdFx0Y29uc3Qgbm9kZU5hbWUgPSBub2RlRGVmLm5hbWUgPyBwYXJzZXIuY3JlYXRlVW5pcXVlTmFtZSggbm9kZURlZi5uYW1lICkgOiAnJztcblxuXHRcdHJldHVybiAoIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0Y29uc3QgcGVuZGluZyA9IFtdO1xuXG5cdFx0XHRjb25zdCBtZXNoUHJvbWlzZSA9IHBhcnNlci5faW52b2tlT25lKCBmdW5jdGlvbiAoIGV4dCApIHtcblxuXHRcdFx0XHRyZXR1cm4gZXh0LmNyZWF0ZU5vZGVNZXNoICYmIGV4dC5jcmVhdGVOb2RlTWVzaCggbm9kZUluZGV4ICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdFx0aWYgKCBtZXNoUHJvbWlzZSApIHtcblxuXHRcdFx0XHRwZW5kaW5nLnB1c2goIG1lc2hQcm9taXNlICk7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBub2RlRGVmLmNhbWVyYSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdHBlbmRpbmcucHVzaCggcGFyc2VyLmdldERlcGVuZGVuY3koICdjYW1lcmEnLCBub2RlRGVmLmNhbWVyYSApLnRoZW4oIGZ1bmN0aW9uICggY2FtZXJhICkge1xuXG5cdFx0XHRcdFx0cmV0dXJuIHBhcnNlci5fZ2V0Tm9kZVJlZiggcGFyc2VyLmNhbWVyYUNhY2hlLCBub2RlRGVmLmNhbWVyYSwgY2FtZXJhICk7XG5cblx0XHRcdFx0fSApICk7XG5cblx0XHRcdH1cblxuXHRcdFx0cGFyc2VyLl9pbnZva2VBbGwoIGZ1bmN0aW9uICggZXh0ICkge1xuXG5cdFx0XHRcdHJldHVybiBleHQuY3JlYXRlTm9kZUF0dGFjaG1lbnQgJiYgZXh0LmNyZWF0ZU5vZGVBdHRhY2htZW50KCBub2RlSW5kZXggKTtcblxuXHRcdFx0fSApLmZvckVhY2goIGZ1bmN0aW9uICggcHJvbWlzZSApIHtcblxuXHRcdFx0XHRwZW5kaW5nLnB1c2goIHByb21pc2UgKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoIHBlbmRpbmcgKTtcblxuXHRcdH0oKSApLnRoZW4oIGZ1bmN0aW9uICggb2JqZWN0cyApIHtcblxuXHRcdFx0bGV0IG5vZGU7XG5cblx0XHRcdC8vIC5pc0JvbmUgaXNuJ3QgaW4gZ2xURiBzcGVjLiBTZWUgLl9tYXJrRGVmc1xuXHRcdFx0aWYgKCBub2RlRGVmLmlzQm9uZSA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRub2RlID0gbmV3IEJvbmUoKTtcblxuXHRcdFx0fSBlbHNlIGlmICggb2JqZWN0cy5sZW5ndGggPiAxICkge1xuXG5cdFx0XHRcdG5vZGUgPSBuZXcgR3JvdXAoKTtcblxuXHRcdFx0fSBlbHNlIGlmICggb2JqZWN0cy5sZW5ndGggPT09IDEgKSB7XG5cblx0XHRcdFx0bm9kZSA9IG9iamVjdHNbIDAgXTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRub2RlID0gbmV3IE9iamVjdDNEKCk7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBub2RlICE9PSBvYmplY3RzWyAwIF0gKSB7XG5cblx0XHRcdFx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IG9iamVjdHMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRub2RlLmFkZCggb2JqZWN0c1sgaSBdICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggbm9kZURlZi5uYW1lICkge1xuXG5cdFx0XHRcdG5vZGUudXNlckRhdGEubmFtZSA9IG5vZGVEZWYubmFtZTtcblx0XHRcdFx0bm9kZS5uYW1lID0gbm9kZU5hbWU7XG5cblx0XHRcdH1cblxuXHRcdFx0YXNzaWduRXh0cmFzVG9Vc2VyRGF0YSggbm9kZSwgbm9kZURlZiApO1xuXG5cdFx0XHRpZiAoIG5vZGVEZWYuZXh0ZW5zaW9ucyApIGFkZFVua25vd25FeHRlbnNpb25zVG9Vc2VyRGF0YSggZXh0ZW5zaW9ucywgbm9kZSwgbm9kZURlZiApO1xuXG5cdFx0XHRpZiAoIG5vZGVEZWYubWF0cml4ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0Y29uc3QgbWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcblx0XHRcdFx0bWF0cml4LmZyb21BcnJheSggbm9kZURlZi5tYXRyaXggKTtcblx0XHRcdFx0bm9kZS5hcHBseU1hdHJpeDQoIG1hdHJpeCApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdGlmICggbm9kZURlZi50cmFuc2xhdGlvbiAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0bm9kZS5wb3NpdGlvbi5mcm9tQXJyYXkoIG5vZGVEZWYudHJhbnNsYXRpb24gKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBub2RlRGVmLnJvdGF0aW9uICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRub2RlLnF1YXRlcm5pb24uZnJvbUFycmF5KCBub2RlRGVmLnJvdGF0aW9uICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggbm9kZURlZi5zY2FsZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0bm9kZS5zY2FsZS5mcm9tQXJyYXkoIG5vZGVEZWYuc2NhbGUgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cGFyc2VyLmFzc29jaWF0aW9ucy5zZXQoIG5vZGUsIHsgdHlwZTogJ25vZGVzJywgaW5kZXg6IG5vZGVJbmRleCB9ICk7XG5cblx0XHRcdHJldHVybiBub2RlO1xuXG5cdFx0fSApO1xuXG5cdH1cblxuXHQvKipcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wI3NjZW5lc1xuXHQgKiBAcGFyYW0ge251bWJlcn0gc2NlbmVJbmRleFxuXHQgKiBAcmV0dXJuIHtQcm9taXNlPEdyb3VwPn1cblx0ICovXG5cdGxvYWRTY2VuZSggc2NlbmVJbmRleCApIHtcblxuXHRcdGNvbnN0IGpzb24gPSB0aGlzLmpzb247XG5cdFx0Y29uc3QgZXh0ZW5zaW9ucyA9IHRoaXMuZXh0ZW5zaW9ucztcblx0XHRjb25zdCBzY2VuZURlZiA9IHRoaXMuanNvbi5zY2VuZXNbIHNjZW5lSW5kZXggXTtcblx0XHRjb25zdCBwYXJzZXIgPSB0aGlzO1xuXG5cdFx0Ly8gTG9hZGVyIHJldHVybnMgR3JvdXAsIG5vdCBTY2VuZS5cblx0XHQvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2IvdGhyZWUuanMvaXNzdWVzLzE4MzQyI2lzc3VlY29tbWVudC01Nzg5ODExNzJcblx0XHRjb25zdCBzY2VuZSA9IG5ldyBHcm91cCgpO1xuXHRcdGlmICggc2NlbmVEZWYubmFtZSApIHNjZW5lLm5hbWUgPSBwYXJzZXIuY3JlYXRlVW5pcXVlTmFtZSggc2NlbmVEZWYubmFtZSApO1xuXG5cdFx0YXNzaWduRXh0cmFzVG9Vc2VyRGF0YSggc2NlbmUsIHNjZW5lRGVmICk7XG5cblx0XHRpZiAoIHNjZW5lRGVmLmV4dGVuc2lvbnMgKSBhZGRVbmtub3duRXh0ZW5zaW9uc1RvVXNlckRhdGEoIGV4dGVuc2lvbnMsIHNjZW5lLCBzY2VuZURlZiApO1xuXG5cdFx0Y29uc3Qgbm9kZUlkcyA9IHNjZW5lRGVmLm5vZGVzIHx8IFtdO1xuXG5cdFx0Y29uc3QgcGVuZGluZyA9IFtdO1xuXG5cdFx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IG5vZGVJZHMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRcdHBlbmRpbmcucHVzaCggYnVpbGROb2RlSGllcmFjaHkoIG5vZGVJZHNbIGkgXSwgc2NlbmUsIGpzb24sIHBhcnNlciApICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoIHBlbmRpbmcgKS50aGVuKCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHJldHVybiBzY2VuZTtcblxuXHRcdH0gKTtcblxuXHR9XG5cbn1cblxuZnVuY3Rpb24gYnVpbGROb2RlSGllcmFjaHkoIG5vZGVJZCwgcGFyZW50T2JqZWN0LCBqc29uLCBwYXJzZXIgKSB7XG5cblx0Y29uc3Qgbm9kZURlZiA9IGpzb24ubm9kZXNbIG5vZGVJZCBdO1xuXG5cdHJldHVybiBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ25vZGUnLCBub2RlSWQgKS50aGVuKCBmdW5jdGlvbiAoIG5vZGUgKSB7XG5cblx0XHRpZiAoIG5vZGVEZWYuc2tpbiA9PT0gdW5kZWZpbmVkICkgcmV0dXJuIG5vZGU7XG5cblx0XHQvLyBidWlsZCBza2VsZXRvbiBoZXJlIGFzIHdlbGxcblxuXHRcdGxldCBza2luRW50cnk7XG5cblx0XHRyZXR1cm4gcGFyc2VyLmdldERlcGVuZGVuY3koICdza2luJywgbm9kZURlZi5za2luICkudGhlbiggZnVuY3Rpb24gKCBza2luICkge1xuXG5cdFx0XHRza2luRW50cnkgPSBza2luO1xuXG5cdFx0XHRjb25zdCBwZW5kaW5nSm9pbnRzID0gW107XG5cblx0XHRcdGZvciAoIGxldCBpID0gMCwgaWwgPSBza2luRW50cnkuam9pbnRzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0XHRcdHBlbmRpbmdKb2ludHMucHVzaCggcGFyc2VyLmdldERlcGVuZGVuY3koICdub2RlJywgc2tpbkVudHJ5LmpvaW50c1sgaSBdICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoIHBlbmRpbmdKb2ludHMgKTtcblxuXHRcdH0gKS50aGVuKCBmdW5jdGlvbiAoIGpvaW50Tm9kZXMgKSB7XG5cblx0XHRcdG5vZGUudHJhdmVyc2UoIGZ1bmN0aW9uICggbWVzaCApIHtcblxuXHRcdFx0XHRpZiAoICEgbWVzaC5pc01lc2ggKSByZXR1cm47XG5cblx0XHRcdFx0Y29uc3QgYm9uZXMgPSBbXTtcblx0XHRcdFx0Y29uc3QgYm9uZUludmVyc2VzID0gW107XG5cblx0XHRcdFx0Zm9yICggbGV0IGogPSAwLCBqbCA9IGpvaW50Tm9kZXMubGVuZ3RoOyBqIDwgamw7IGogKysgKSB7XG5cblx0XHRcdFx0XHRjb25zdCBqb2ludE5vZGUgPSBqb2ludE5vZGVzWyBqIF07XG5cblx0XHRcdFx0XHRpZiAoIGpvaW50Tm9kZSApIHtcblxuXHRcdFx0XHRcdFx0Ym9uZXMucHVzaCggam9pbnROb2RlICk7XG5cblx0XHRcdFx0XHRcdGNvbnN0IG1hdCA9IG5ldyBNYXRyaXg0KCk7XG5cblx0XHRcdFx0XHRcdGlmICggc2tpbkVudHJ5LmludmVyc2VCaW5kTWF0cmljZXMgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdFx0XHRtYXQuZnJvbUFycmF5KCBza2luRW50cnkuaW52ZXJzZUJpbmRNYXRyaWNlcy5hcnJheSwgaiAqIDE2ICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ym9uZUludmVyc2VzLnB1c2goIG1hdCApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuR0xURkxvYWRlcjogSm9pbnQgXCIlc1wiIGNvdWxkIG5vdCBiZSBmb3VuZC4nLCBza2luRW50cnkuam9pbnRzWyBqIF0gKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0bWVzaC5iaW5kKCBuZXcgU2tlbGV0b24oIGJvbmVzLCBib25lSW52ZXJzZXMgKSwgbWVzaC5tYXRyaXhXb3JsZCApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHRcdHJldHVybiBub2RlO1xuXG5cdFx0fSApO1xuXG5cdH0gKS50aGVuKCBmdW5jdGlvbiAoIG5vZGUgKSB7XG5cblx0XHQvLyBidWlsZCBub2RlIGhpZXJhY2h5XG5cblx0XHRwYXJlbnRPYmplY3QuYWRkKCBub2RlICk7XG5cblx0XHRjb25zdCBwZW5kaW5nID0gW107XG5cblx0XHRpZiAoIG5vZGVEZWYuY2hpbGRyZW4gKSB7XG5cblx0XHRcdGNvbnN0IGNoaWxkcmVuID0gbm9kZURlZi5jaGlsZHJlbjtcblxuXHRcdFx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0XHRcdGNvbnN0IGNoaWxkID0gY2hpbGRyZW5bIGkgXTtcblx0XHRcdFx0cGVuZGluZy5wdXNoKCBidWlsZE5vZGVIaWVyYWNoeSggY2hpbGQsIG5vZGUsIGpzb24sIHBhcnNlciApICk7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHJldHVybiBQcm9taXNlLmFsbCggcGVuZGluZyApO1xuXG5cdH0gKTtcblxufVxuXG4vKipcbiAqIEBwYXJhbSB7QnVmZmVyR2VvbWV0cnl9IGdlb21ldHJ5XG4gKiBAcGFyYW0ge0dMVEYuUHJpbWl0aXZlfSBwcmltaXRpdmVEZWZcbiAqIEBwYXJhbSB7R0xURlBhcnNlcn0gcGFyc2VyXG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVCb3VuZHMoIGdlb21ldHJ5LCBwcmltaXRpdmVEZWYsIHBhcnNlciApIHtcblxuXHRjb25zdCBhdHRyaWJ1dGVzID0gcHJpbWl0aXZlRGVmLmF0dHJpYnV0ZXM7XG5cblx0Y29uc3QgYm94ID0gbmV3IEJveDMoKTtcblxuXHRpZiAoIGF0dHJpYnV0ZXMuUE9TSVRJT04gIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdGNvbnN0IGFjY2Vzc29yID0gcGFyc2VyLmpzb24uYWNjZXNzb3JzWyBhdHRyaWJ1dGVzLlBPU0lUSU9OIF07XG5cblx0XHRjb25zdCBtaW4gPSBhY2Nlc3Nvci5taW47XG5cdFx0Y29uc3QgbWF4ID0gYWNjZXNzb3IubWF4O1xuXG5cdFx0Ly8gZ2xURiByZXF1aXJlcyAnbWluJyBhbmQgJ21heCcsIGJ1dCBWUk0gKHdoaWNoIGV4dGVuZHMgZ2xURikgY3VycmVudGx5IGlnbm9yZXMgdGhhdCByZXF1aXJlbWVudC5cblxuXHRcdGlmICggbWluICE9PSB1bmRlZmluZWQgJiYgbWF4ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdGJveC5zZXQoXG5cdFx0XHRcdG5ldyBWZWN0b3IzKCBtaW5bIDAgXSwgbWluWyAxIF0sIG1pblsgMiBdICksXG5cdFx0XHRcdG5ldyBWZWN0b3IzKCBtYXhbIDAgXSwgbWF4WyAxIF0sIG1heFsgMiBdIClcblx0XHRcdCk7XG5cblx0XHRcdGlmICggYWNjZXNzb3Iubm9ybWFsaXplZCApIHtcblxuXHRcdFx0XHRjb25zdCBib3hTY2FsZSA9IGdldE5vcm1hbGl6ZWRDb21wb25lbnRTY2FsZSggV0VCR0xfQ09NUE9ORU5UX1RZUEVTWyBhY2Nlc3Nvci5jb21wb25lbnRUeXBlIF0gKTtcblx0XHRcdFx0Ym94Lm1pbi5tdWx0aXBseVNjYWxhciggYm94U2NhbGUgKTtcblx0XHRcdFx0Ym94Lm1heC5tdWx0aXBseVNjYWxhciggYm94U2NhbGUgKTtcblxuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuR0xURkxvYWRlcjogTWlzc2luZyBtaW4vbWF4IHByb3BlcnRpZXMgZm9yIGFjY2Vzc29yIFBPU0lUSU9OLicgKTtcblxuXHRcdFx0cmV0dXJuO1xuXG5cdFx0fVxuXG5cdH0gZWxzZSB7XG5cblx0XHRyZXR1cm47XG5cblx0fVxuXG5cdGNvbnN0IHRhcmdldHMgPSBwcmltaXRpdmVEZWYudGFyZ2V0cztcblxuXHRpZiAoIHRhcmdldHMgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdGNvbnN0IG1heERpc3BsYWNlbWVudCA9IG5ldyBWZWN0b3IzKCk7XG5cdFx0Y29uc3QgdmVjdG9yID0gbmV3IFZlY3RvcjMoKTtcblxuXHRcdGZvciAoIGxldCBpID0gMCwgaWwgPSB0YXJnZXRzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0XHRjb25zdCB0YXJnZXQgPSB0YXJnZXRzWyBpIF07XG5cblx0XHRcdGlmICggdGFyZ2V0LlBPU0lUSU9OICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0Y29uc3QgYWNjZXNzb3IgPSBwYXJzZXIuanNvbi5hY2Nlc3NvcnNbIHRhcmdldC5QT1NJVElPTiBdO1xuXHRcdFx0XHRjb25zdCBtaW4gPSBhY2Nlc3Nvci5taW47XG5cdFx0XHRcdGNvbnN0IG1heCA9IGFjY2Vzc29yLm1heDtcblxuXHRcdFx0XHQvLyBnbFRGIHJlcXVpcmVzICdtaW4nIGFuZCAnbWF4JywgYnV0IFZSTSAod2hpY2ggZXh0ZW5kcyBnbFRGKSBjdXJyZW50bHkgaWdub3JlcyB0aGF0IHJlcXVpcmVtZW50LlxuXG5cdFx0XHRcdGlmICggbWluICE9PSB1bmRlZmluZWQgJiYgbWF4ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHQvLyB3ZSBuZWVkIHRvIGdldCBtYXggb2YgYWJzb2x1dGUgY29tcG9uZW50cyBiZWNhdXNlIHRhcmdldCB3ZWlnaHQgaXMgWy0xLDFdXG5cdFx0XHRcdFx0dmVjdG9yLnNldFgoIE1hdGgubWF4KCBNYXRoLmFicyggbWluWyAwIF0gKSwgTWF0aC5hYnMoIG1heFsgMCBdICkgKSApO1xuXHRcdFx0XHRcdHZlY3Rvci5zZXRZKCBNYXRoLm1heCggTWF0aC5hYnMoIG1pblsgMSBdICksIE1hdGguYWJzKCBtYXhbIDEgXSApICkgKTtcblx0XHRcdFx0XHR2ZWN0b3Iuc2V0WiggTWF0aC5tYXgoIE1hdGguYWJzKCBtaW5bIDIgXSApLCBNYXRoLmFicyggbWF4WyAyIF0gKSApICk7XG5cblxuXHRcdFx0XHRcdGlmICggYWNjZXNzb3Iubm9ybWFsaXplZCApIHtcblxuXHRcdFx0XHRcdFx0Y29uc3QgYm94U2NhbGUgPSBnZXROb3JtYWxpemVkQ29tcG9uZW50U2NhbGUoIFdFQkdMX0NPTVBPTkVOVF9UWVBFU1sgYWNjZXNzb3IuY29tcG9uZW50VHlwZSBdICk7XG5cdFx0XHRcdFx0XHR2ZWN0b3IubXVsdGlwbHlTY2FsYXIoIGJveFNjYWxlICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBOb3RlOiB0aGlzIGFzc3VtZXMgdGhhdCB0aGUgc3VtIG9mIGFsbCB3ZWlnaHRzIGlzIGF0IG1vc3QgMS4gVGhpcyBpc24ndCBxdWl0ZSBjb3JyZWN0IC0gaXQncyBtb3JlIGNvbnNlcnZhdGl2ZVxuXHRcdFx0XHRcdC8vIHRvIGFzc3VtZSB0aGF0IGVhY2ggdGFyZ2V0IGNhbiBoYXZlIGEgbWF4IHdlaWdodCBvZiAxLiBIb3dldmVyLCBmb3Igc29tZSB1c2UgY2FzZXMgLSBub3RhYmx5LCB3aGVuIG1vcnBoIHRhcmdldHNcblx0XHRcdFx0XHQvLyBhcmUgdXNlZCB0byBpbXBsZW1lbnQga2V5LWZyYW1lIGFuaW1hdGlvbnMgYW5kIGFzIHN1Y2ggb25seSB0d28gYXJlIGFjdGl2ZSBhdCBhIHRpbWUgLSB0aGlzIHJlc3VsdHMgaW4gdmVyeSBsYXJnZVxuXHRcdFx0XHRcdC8vIGJveGVzLiBTbyBmb3Igbm93IHdlIG1ha2UgYSBib3ggdGhhdCdzIHNvbWV0aW1lcyBhIHRvdWNoIHRvbyBzbWFsbCBidXQgaXMgaG9wZWZ1bGx5IG1vc3RseSBvZiByZWFzb25hYmxlIHNpemUuXG5cdFx0XHRcdFx0bWF4RGlzcGxhY2VtZW50Lm1heCggdmVjdG9yICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLkdMVEZMb2FkZXI6IE1pc3NpbmcgbWluL21heCBwcm9wZXJ0aWVzIGZvciBhY2Nlc3NvciBQT1NJVElPTi4nICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHQvLyBBcyBwZXIgY29tbWVudCBhYm92ZSB0aGlzIGJveCBpc24ndCBjb25zZXJ2YXRpdmUsIGJ1dCBoYXMgYSByZWFzb25hYmxlIHNpemUgZm9yIGEgdmVyeSBsYXJnZSBudW1iZXIgb2YgbW9ycGggdGFyZ2V0cy5cblx0XHRib3guZXhwYW5kQnlWZWN0b3IoIG1heERpc3BsYWNlbWVudCApO1xuXG5cdH1cblxuXHRnZW9tZXRyeS5ib3VuZGluZ0JveCA9IGJveDtcblxuXHRjb25zdCBzcGhlcmUgPSBuZXcgU3BoZXJlKCk7XG5cblx0Ym94LmdldENlbnRlciggc3BoZXJlLmNlbnRlciApO1xuXHRzcGhlcmUucmFkaXVzID0gYm94Lm1pbi5kaXN0YW5jZVRvKCBib3gubWF4ICkgLyAyO1xuXG5cdGdlb21ldHJ5LmJvdW5kaW5nU3BoZXJlID0gc3BoZXJlO1xuXG59XG5cbi8qKlxuICogQHBhcmFtIHtCdWZmZXJHZW9tZXRyeX0gZ2VvbWV0cnlcbiAqIEBwYXJhbSB7R0xURi5QcmltaXRpdmV9IHByaW1pdGl2ZURlZlxuICogQHBhcmFtIHtHTFRGUGFyc2VyfSBwYXJzZXJcbiAqIEByZXR1cm4ge1Byb21pc2U8QnVmZmVyR2VvbWV0cnk+fVxuICovXG5mdW5jdGlvbiBhZGRQcmltaXRpdmVBdHRyaWJ1dGVzKCBnZW9tZXRyeSwgcHJpbWl0aXZlRGVmLCBwYXJzZXIgKSB7XG5cblx0Y29uc3QgYXR0cmlidXRlcyA9IHByaW1pdGl2ZURlZi5hdHRyaWJ1dGVzO1xuXG5cdGNvbnN0IHBlbmRpbmcgPSBbXTtcblxuXHRmdW5jdGlvbiBhc3NpZ25BdHRyaWJ1dGVBY2Nlc3NvciggYWNjZXNzb3JJbmRleCwgYXR0cmlidXRlTmFtZSApIHtcblxuXHRcdHJldHVybiBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ2FjY2Vzc29yJywgYWNjZXNzb3JJbmRleCApXG5cdFx0XHQudGhlbiggZnVuY3Rpb24gKCBhY2Nlc3NvciApIHtcblxuXHRcdFx0XHRnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoIGF0dHJpYnV0ZU5hbWUsIGFjY2Vzc29yICk7XG5cblx0XHRcdH0gKTtcblxuXHR9XG5cblx0Zm9yICggY29uc3QgZ2x0ZkF0dHJpYnV0ZU5hbWUgaW4gYXR0cmlidXRlcyApIHtcblxuXHRcdGNvbnN0IHRocmVlQXR0cmlidXRlTmFtZSA9IEFUVFJJQlVURVNbIGdsdGZBdHRyaWJ1dGVOYW1lIF0gfHwgZ2x0ZkF0dHJpYnV0ZU5hbWUudG9Mb3dlckNhc2UoKTtcblxuXHRcdC8vIFNraXAgYXR0cmlidXRlcyBhbHJlYWR5IHByb3ZpZGVkIGJ5IGUuZy4gRHJhY28gZXh0ZW5zaW9uLlxuXHRcdGlmICggdGhyZWVBdHRyaWJ1dGVOYW1lIGluIGdlb21ldHJ5LmF0dHJpYnV0ZXMgKSBjb250aW51ZTtcblxuXHRcdHBlbmRpbmcucHVzaCggYXNzaWduQXR0cmlidXRlQWNjZXNzb3IoIGF0dHJpYnV0ZXNbIGdsdGZBdHRyaWJ1dGVOYW1lIF0sIHRocmVlQXR0cmlidXRlTmFtZSApICk7XG5cblx0fVxuXG5cdGlmICggcHJpbWl0aXZlRGVmLmluZGljZXMgIT09IHVuZGVmaW5lZCAmJiAhIGdlb21ldHJ5LmluZGV4ICkge1xuXG5cdFx0Y29uc3QgYWNjZXNzb3IgPSBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ2FjY2Vzc29yJywgcHJpbWl0aXZlRGVmLmluZGljZXMgKS50aGVuKCBmdW5jdGlvbiAoIGFjY2Vzc29yICkge1xuXG5cdFx0XHRnZW9tZXRyeS5zZXRJbmRleCggYWNjZXNzb3IgKTtcblxuXHRcdH0gKTtcblxuXHRcdHBlbmRpbmcucHVzaCggYWNjZXNzb3IgKTtcblxuXHR9XG5cblx0YXNzaWduRXh0cmFzVG9Vc2VyRGF0YSggZ2VvbWV0cnksIHByaW1pdGl2ZURlZiApO1xuXG5cdGNvbXB1dGVCb3VuZHMoIGdlb21ldHJ5LCBwcmltaXRpdmVEZWYsIHBhcnNlciApO1xuXG5cdHJldHVybiBQcm9taXNlLmFsbCggcGVuZGluZyApLnRoZW4oIGZ1bmN0aW9uICgpIHtcblxuXHRcdHJldHVybiBwcmltaXRpdmVEZWYudGFyZ2V0cyAhPT0gdW5kZWZpbmVkXG5cdFx0XHQ/IGFkZE1vcnBoVGFyZ2V0cyggZ2VvbWV0cnksIHByaW1pdGl2ZURlZi50YXJnZXRzLCBwYXJzZXIgKVxuXHRcdFx0OiBnZW9tZXRyeTtcblxuXHR9ICk7XG5cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0J1ZmZlckdlb21ldHJ5fSBnZW9tZXRyeVxuICogQHBhcmFtIHtOdW1iZXJ9IGRyYXdNb2RlXG4gKiBAcmV0dXJuIHtCdWZmZXJHZW9tZXRyeX1cbiAqL1xuZnVuY3Rpb24gdG9UcmlhbmdsZXNEcmF3TW9kZSggZ2VvbWV0cnksIGRyYXdNb2RlICkge1xuXG5cdGxldCBpbmRleCA9IGdlb21ldHJ5LmdldEluZGV4KCk7XG5cblx0Ly8gZ2VuZXJhdGUgaW5kZXggaWYgbm90IHByZXNlbnRcblxuXHRpZiAoIGluZGV4ID09PSBudWxsICkge1xuXG5cdFx0Y29uc3QgaW5kaWNlcyA9IFtdO1xuXG5cdFx0Y29uc3QgcG9zaXRpb24gPSBnZW9tZXRyeS5nZXRBdHRyaWJ1dGUoICdwb3NpdGlvbicgKTtcblxuXHRcdGlmICggcG9zaXRpb24gIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0Zm9yICggbGV0IGkgPSAwOyBpIDwgcG9zaXRpb24uY291bnQ7IGkgKysgKSB7XG5cblx0XHRcdFx0aW5kaWNlcy5wdXNoKCBpICk7XG5cblx0XHRcdH1cblxuXHRcdFx0Z2VvbWV0cnkuc2V0SW5kZXgoIGluZGljZXMgKTtcblx0XHRcdGluZGV4ID0gZ2VvbWV0cnkuZ2V0SW5kZXgoKTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdGNvbnNvbGUuZXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyLnRvVHJpYW5nbGVzRHJhd01vZGUoKTogVW5kZWZpbmVkIHBvc2l0aW9uIGF0dHJpYnV0ZS4gUHJvY2Vzc2luZyBub3QgcG9zc2libGUuJyApO1xuXHRcdFx0cmV0dXJuIGdlb21ldHJ5O1xuXG5cdFx0fVxuXG5cdH1cblxuXHQvL1xuXG5cdGNvbnN0IG51bWJlck9mVHJpYW5nbGVzID0gaW5kZXguY291bnQgLSAyO1xuXHRjb25zdCBuZXdJbmRpY2VzID0gW107XG5cblx0aWYgKCBkcmF3TW9kZSA9PT0gVHJpYW5nbGVGYW5EcmF3TW9kZSApIHtcblxuXHRcdC8vIGdsLlRSSUFOR0xFX0ZBTlxuXG5cdFx0Zm9yICggbGV0IGkgPSAxOyBpIDw9IG51bWJlck9mVHJpYW5nbGVzOyBpICsrICkge1xuXG5cdFx0XHRuZXdJbmRpY2VzLnB1c2goIGluZGV4LmdldFgoIDAgKSApO1xuXHRcdFx0bmV3SW5kaWNlcy5wdXNoKCBpbmRleC5nZXRYKCBpICkgKTtcblx0XHRcdG5ld0luZGljZXMucHVzaCggaW5kZXguZ2V0WCggaSArIDEgKSApO1xuXG5cdFx0fVxuXG5cdH0gZWxzZSB7XG5cblx0XHQvLyBnbC5UUklBTkdMRV9TVFJJUFxuXG5cdFx0Zm9yICggbGV0IGkgPSAwOyBpIDwgbnVtYmVyT2ZUcmlhbmdsZXM7IGkgKysgKSB7XG5cblx0XHRcdGlmICggaSAlIDIgPT09IDAgKSB7XG5cblx0XHRcdFx0bmV3SW5kaWNlcy5wdXNoKCBpbmRleC5nZXRYKCBpICkgKTtcblx0XHRcdFx0bmV3SW5kaWNlcy5wdXNoKCBpbmRleC5nZXRYKCBpICsgMSApICk7XG5cdFx0XHRcdG5ld0luZGljZXMucHVzaCggaW5kZXguZ2V0WCggaSArIDIgKSApO1xuXG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0bmV3SW5kaWNlcy5wdXNoKCBpbmRleC5nZXRYKCBpICsgMiApICk7XG5cdFx0XHRcdG5ld0luZGljZXMucHVzaCggaW5kZXguZ2V0WCggaSArIDEgKSApO1xuXHRcdFx0XHRuZXdJbmRpY2VzLnB1c2goIGluZGV4LmdldFgoIGkgKSApO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0fVxuXG5cdGlmICggKCBuZXdJbmRpY2VzLmxlbmd0aCAvIDMgKSAhPT0gbnVtYmVyT2ZUcmlhbmdsZXMgKSB7XG5cblx0XHRjb25zb2xlLmVycm9yKCAnVEhSRUUuR0xURkxvYWRlci50b1RyaWFuZ2xlc0RyYXdNb2RlKCk6IFVuYWJsZSB0byBnZW5lcmF0ZSBjb3JyZWN0IGFtb3VudCBvZiB0cmlhbmdsZXMuJyApO1xuXG5cdH1cblxuXHQvLyBidWlsZCBmaW5hbCBnZW9tZXRyeVxuXG5cdGNvbnN0IG5ld0dlb21ldHJ5ID0gZ2VvbWV0cnkuY2xvbmUoKTtcblx0bmV3R2VvbWV0cnkuc2V0SW5kZXgoIG5ld0luZGljZXMgKTtcblxuXHRyZXR1cm4gbmV3R2VvbWV0cnk7XG5cbn1cblxuZXhwb3J0IHsgR0xURkxvYWRlciB9OyIsImltcG9ydCB7IEFtYmllbnRMaWdodCwgQW5pbWF0aW9uQ2xpcCwgRGlyZWN0aW9uYWxMaWdodCwgT2JqZWN0M0QsIFBvaW50TGlnaHQsIEdyb3VwLCBNZXNoIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBpc0NsaWVudCB9IGZyb20gJy4uLy4uL2NvbW1vbi9mdW5jdGlvbnMvaXNDbGllbnQnXG5pbXBvcnQgeyBFbmdpbmUgfSBmcm9tICcuLi8uLi9lY3MvY2xhc3Nlcy9FbmdpbmUnXG5pbXBvcnQgeyBHTFRGUmVtb3ZlTWF0ZXJpYWxzRXh0ZW5zaW9uIH0gZnJvbSAnLi4vY2xhc3Nlcy9HTFRGUmVtb3ZlTWF0ZXJpYWxzRXh0ZW5zaW9uJ1xuaW1wb3J0IHsgR0xURkluc3RhbmNpbmdFeHRlbnNpb24gfSBmcm9tICcuLi9jbGFzc2VzL0dMVEZJbnN0YW5jaW5nRXh0ZW5zaW9uJ1xuaW1wb3J0IHsgTm9kZURSQUNPTG9hZGVyIH0gZnJvbSAnLi4vbG9hZGVycy9nbHRmL05vZGVEcmFjb0xvYWRlcidcbmltcG9ydCB7IERSQUNPTG9hZGVyIH0gZnJvbSAnLi4vbG9hZGVycy9nbHRmL0RSQUNPTG9hZGVyJ1xuaW1wb3J0IHsgR0xURkxvYWRlciB9IGZyb20gJy4uL2xvYWRlcnMvZ2x0Zi9HTFRGTG9hZGVyJ1xuXG4vKipcbiAqIEludGVyZmFjZSBmb3IgcmVzdWx0IG9mIHRoZSBHTFRGIEFzc2V0IGxvYWQuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTG9hZEdMVEZSZXN1bHRJbnRlcmZhY2Uge1xuICBhbmltYXRpb25zOiBBbmltYXRpb25DbGlwW11cbiAgc2NlbmU6IE9iamVjdDNEIHwgR3JvdXAgfCBNZXNoXG4gIGpzb246IGFueVxuICBzdGF0czogYW55XG59XG5cbmNvbnN0IGxvYWRlciA9IG5ldyBHTFRGTG9hZGVyKClcblxuaWYgKCFpc0NsaWVudCkge1xuICBsb2FkZXIucmVnaXN0ZXIoKHBhcnNlcikgPT4gbmV3IEdMVEZSZW1vdmVNYXRlcmlhbHNFeHRlbnNpb24ocGFyc2VyKSlcbn1cblxubG9hZGVyLnJlZ2lzdGVyKChwYXJzZXIpID0+IG5ldyBHTFRGSW5zdGFuY2luZ0V4dGVuc2lvbihwYXJzZXIpKVxuXG5jb25zdCBkcmFjb0xvYWRlcjogYW55ID0gaXNDbGllbnQgPyBuZXcgRFJBQ09Mb2FkZXIoKSA6IG5ldyBOb2RlRFJBQ09Mb2FkZXIoKVxuLy8gY29uc3QgZHJhY29Mb2FkZXIgPSBuZXcgRFJBQ09Mb2FkZXIoKVxuaWYgKGlzQ2xpZW50KSB7XG4gIGRyYWNvTG9hZGVyLnNldERlY29kZXJQYXRoKCcvbG9hZGVyX2RlY29kZXJzLycpXG59IGVsc2Uge1xuICA7KGRyYWNvTG9hZGVyIGFzIGFueSkuZ2V0RGVjb2Rlck1vZHVsZSA9ICgpID0+IHt9XG4gIDsoZHJhY29Mb2FkZXIgYXMgYW55KS5wcmVsb2FkID0gKCkgPT4ge31cbn1cbjsobG9hZGVyIGFzIGFueSkuc2V0RFJBQ09Mb2FkZXIoZHJhY29Mb2FkZXIpXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2FkZXIoKTogYW55IHtcbiAgcmV0dXJuIGxvYWRlclxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzcG9zZURyYWNvTG9hZGVyV29ya2VycygpOiB2b2lkIHtcbiAgbG9hZGVyLmRyYWNvTG9hZGVyPy5kaXNwb3NlKClcbn1cblxuLyoqXG4gKiBMb2FkcyBhbiBBc3NldCB3aGljaCBpcyBpbiBHTFRGIGZvcm1hdC5cbiAqXG4gKiBAcGFyYW0gdXJsIFVSTCBvZiB0aGUgYXNzZXQuXG4gKiBAcmV0dXJucyBhIHByb21pc2Ugb2Yge0BsaW5rIExvYWRHTFRGUmVzdWx0SW50ZXJmYWNlfS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIExvYWRHTFRGKHVybDogc3RyaW5nKTogUHJvbWlzZTxMb2FkR0xURlJlc3VsdEludGVyZmFjZT4ge1xuICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2U8TG9hZEdMVEZSZXN1bHRJbnRlcmZhY2U+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBnZXRMb2FkZXIoKS5sb2FkKFxuICAgICAgdXJsLFxuICAgICAgKGdsdGYpID0+IHtcbiAgICAgICAgLy8gVE9ETzogUmVtb3ZlIG1lIHdoZW4gd2UgYWRkIHJldGFyZ2V0aW5nXG4gICAgICAgIGdsdGYuc2NlbmUudHJhdmVyc2UoKG8pID0+IHtcbiAgICAgICAgICBvLm5hbWUgPSBvLm5hbWUucmVwbGFjZSgnbWl4YW1vcmlnJywgJycpXG4gICAgICAgIH0pXG5cbiAgICAgICAgbG9hZEV4dGVudGlvbnMoZ2x0ZilcbiAgICAgICAgcmVzb2x2ZSh7IGFuaW1hdGlvbnM6IGdsdGYuYW5pbWF0aW9ucywgc2NlbmU6IGdsdGYuc2NlbmUsIGpzb246IHt9LCBzdGF0czoge30gfSlcbiAgICAgIH0sXG4gICAgICBudWxsLFxuICAgICAgKGUpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICAgICAgcmVqZWN0KGUpXG4gICAgICB9XG4gICAgKVxuICB9KVxufVxuXG5leHBvcnQgY29uc3QgbG9hZEV4dGVudGlvbnMgPSAoZ2x0ZikgPT4ge1xuICBsb2FkTGlnaHRtYXBzKGdsdGYucGFyc2VyKVxuICBsb2FkTGlnaHRzKGdsdGYpXG59XG5cbmNvbnN0IGxvYWRMaWdodG1hcHMgPSAocGFyc2VyKSA9PiB7XG4gIGNvbnN0IGxvYWRMaWdodG1hcCA9IGFzeW5jIChtYXRlcmlhbEluZGV4KSA9PiB7XG4gICAgY29uc3QgbGlnaHRtYXBEZWYgPSBwYXJzZXIuanNvbi5tYXRlcmlhbHNbbWF0ZXJpYWxJbmRleF0uZXh0ZW5zaW9ucy5NT1pfbGlnaHRtYXBcbiAgICBjb25zdCBbbWF0ZXJpYWwsIGxpZ2h0TWFwXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIHBhcnNlci5nZXREZXBlbmRlbmN5KCdtYXRlcmlhbCcsIG1hdGVyaWFsSW5kZXgpLFxuICAgICAgcGFyc2VyLmdldERlcGVuZGVuY3koJ3RleHR1cmUnLCBsaWdodG1hcERlZi5pbmRleClcbiAgICBdKVxuICAgIG1hdGVyaWFsLmxpZ2h0TWFwID0gbGlnaHRNYXBcbiAgICBtYXRlcmlhbC5saWdodE1hcEludGVuc2l0eSA9IGxpZ2h0bWFwRGVmLmludGVuc2l0eSAhPT0gdW5kZWZpbmVkID8gbGlnaHRtYXBEZWYuaW50ZW5zaXR5IDogMVxuICAgIG1hdGVyaWFsLm5lZWRzVXBkYXRlID0gdHJ1ZVxuICAgIHJldHVybiBsaWdodE1hcFxuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyc2VyLmpzb24ubWF0ZXJpYWxzPy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IG1hdGVyaWFsTm9kZSA9IHBhcnNlci5qc29uLm1hdGVyaWFsc1tpXVxuXG4gICAgaWYgKCFtYXRlcmlhbE5vZGUuZXh0ZW5zaW9ucykgY29udGludWVcblxuICAgIGlmIChtYXRlcmlhbE5vZGUuZXh0ZW5zaW9ucy5NT1pfbGlnaHRtYXApIHtcbiAgICAgIGxvYWRMaWdodG1hcChpKVxuICAgIH1cbiAgfVxufVxuXG4vLyB0aGlzIGlzbid0IHRoZSBiZXN0IHNvbHV0aW9uLiBpbnN0ZWFkIHdlIHNob3VsZCBleHBvc2UgdGhlIHBsdWdpbi9leHRlbnNpb24gcmVnaXN0ZXIgaW4gR0xURkxvYWRlci5qc1xuXG5jb25zdCBsb2FkTGlnaHRzID0gKGdsdGYpID0+IHtcbiAgaWYgKGdsdGYucGFyc2VyLmpzb24/LmV4dGVuc2lvbnM/Lk1PWl9odWJzX2NvbXBvbmVudHM/Lk1PWl9odWJzX2NvbXBvbmVudHM/LnZlcnNpb24gPT09IDMpIHtcbiAgICBjb25zdCBvYmpzVG9SZW1vdmU6IGFueVtdID0gW11cbiAgICBnbHRmLnNjZW5lLnRyYXZlcnNlKChvYmopID0+IHtcbiAgICAgIGlmIChvYmoudXNlckRhdGEuZ2x0ZkV4dGVuc2lvbnMgJiYgb2JqLnVzZXJEYXRhLmdsdGZFeHRlbnNpb25zLk1PWl9odWJzX2NvbXBvbmVudHMpIHtcbiAgICAgICAgbGV0IHJlcGxhY2VtZW50XG4gICAgICAgIHN3aXRjaCAoT2JqZWN0LmtleXMob2JqLnVzZXJEYXRhLmdsdGZFeHRlbnNpb25zLk1PWl9odWJzX2NvbXBvbmVudHMpWzBdKSB7XG4gICAgICAgICAgY2FzZSAnZGlyZWN0aW9uYWwtbGlnaHQnOlxuICAgICAgICAgICAgcmVwbGFjZW1lbnQgPSBfZGlyZWN0aW9uYWwob2JqKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdwb2ludC1saWdodCc6XG4gICAgICAgICAgICByZXBsYWNlbWVudCA9IF9wb2ludChvYmopXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ2FtYmllbnQtbGlnaHQnOlxuICAgICAgICAgICAgcmVwbGFjZW1lbnQgPSBfYW1iaWVudChvYmopXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXBsYWNlbWVudCkge1xuICAgICAgICAgIHJlcGxhY2VtZW50LnBvc2l0aW9uLmNvcHkob2JqLnBvc2l0aW9uKVxuICAgICAgICAgIHJlcGxhY2VtZW50LnF1YXRlcm5pb24uY29weShvYmoucXVhdGVybmlvbilcbiAgICAgICAgICBvYmoucGFyZW50LmFkZChyZXBsYWNlbWVudClcbiAgICAgICAgICBvYmpzVG9SZW1vdmUucHVzaChvYmopXG4gICAgICAgICAgY29uc29sZS5sb2cocmVwbGFjZW1lbnQpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIGZvciAoY29uc3Qgb2JqIG9mIG9ianNUb1JlbW92ZSkge1xuICAgICAgb2JqLnBhcmVudC5yZW1vdmUob2JqKVxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBfc2hhZG93ID0gKGxpZ2h0LCBsaWdodERhdGEpID0+IHtcbiAgaWYgKHR5cGVvZiBsaWdodERhdGEuY2FzdFNoYWRvdyAhPT0gJ3VuZGVmaW5lZCcpIGxpZ2h0LmNhc3RTaGFkb3cgPSBsaWdodERhdGEuY2FzdFNoYWRvd1xuICBpZiAodHlwZW9mIGxpZ2h0RGF0YS5zaGFkb3dSZXNvbHV0aW9uICE9PSAndW5kZWZpbmVkJylcbiAgICBsaWdodC5zaGFkb3cubWFwU2l6ZS5zZXQobGlnaHREYXRhLnNoYWRvd1Jlc29sdXRpb25bMF0sIGxpZ2h0RGF0YS5zaGFkb3dSZXNvbHV0aW9uWzFdKVxuICBpZiAodHlwZW9mIGxpZ2h0RGF0YS5zaGFkb3dCaWFzICE9PSAndW5kZWZpbmVkJykgbGlnaHQuc2hhZG93LmJpYXMgPSBsaWdodERhdGEuc2hhZG93Qmlhc1xuICBpZiAodHlwZW9mIGxpZ2h0RGF0YS5zaGFkb3dSYWRpdXMgIT09ICd1bmRlZmluZWQnKSBsaWdodC5zaGFkb3cucmFkaXVzID0gbGlnaHREYXRhLnNoYWRvd1JhZGl1c1xufVxuXG5jb25zdCBfZGlyZWN0aW9uYWwgPSAob2JqKSA9PiB7XG4gIGlmICghRW5naW5lLmNzbSkgcmV0dXJuIC8vIGN1cnJlbnRseSB0aGlzIGJyZWFrcyBDU01cbiAgY29uc3QgbGlnaHREYXRhID0gb2JqLnVzZXJEYXRhLmdsdGZFeHRlbnNpb25zLk1PWl9odWJzX2NvbXBvbmVudHNbJ2RpcmVjdGlvbmFsLWxpZ2h0J11cbiAgY29uc3QgbGlnaHQgPSBuZXcgRGlyZWN0aW9uYWxMaWdodChsaWdodERhdGEuY29sb3IsIGxpZ2h0RGF0YS5pbnRlbnNpdHkpXG4gIF9zaGFkb3cobGlnaHQsIGxpZ2h0RGF0YSlcbiAgcmV0dXJuIGxpZ2h0XG59XG5cbmNvbnN0IF9wb2ludCA9IChvYmopID0+IHtcbiAgY29uc3QgbGlnaHREYXRhID0gb2JqLnVzZXJEYXRhLmdsdGZFeHRlbnNpb25zLk1PWl9odWJzX2NvbXBvbmVudHNbJ3BvaW50LWxpZ2h0J11cbiAgY29uc3QgbGlnaHQgPSBuZXcgUG9pbnRMaWdodChsaWdodERhdGEuY29sb3IsIGxpZ2h0RGF0YS5pbnRlbnNpdHksIGxpZ2h0RGF0YS5kaXN0YW5jZSwgbGlnaHREYXRhLmRlY2F5KVxuICBfc2hhZG93KGxpZ2h0LCBsaWdodERhdGEpXG4gIHJldHVybiBsaWdodFxufVxuXG5jb25zdCBfYW1iaWVudCA9IChvYmopID0+IHtcbiAgY29uc3QgbGlnaHREYXRhID0gb2JqLnVzZXJEYXRhLmdsdGZFeHRlbnNpb25zLk1PWl9odWJzX2NvbXBvbmVudHNbJ2FtYmllbnQtbGlnaHQnXVxuICBjb25zdCBsaWdodCA9IG5ldyBBbWJpZW50TGlnaHQobGlnaHREYXRhLmNvbG9yLCBsaWdodERhdGEuaW50ZW5zaXR5KVxuICByZXR1cm4gbGlnaHRcbn1cbiIsImltcG9ydCB7IERlZmF1bHRMb2FkaW5nTWFuYWdlciwgVGV4dHVyZSwgRmlsZUxvYWRlciB9IGZyb20gJ3RocmVlJ1xuXG5kZWNsYXJlIGNvbnN0IE9mZnNjcmVlbkNhbnZhczoge1xuICBwcm90b3R5cGU6IGFueVxuICBuZXcgKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogYW55XG59XG5cbi8qKiBMb2FkZXIgY2xhc3MgZm9yIFRHQSBhc3NldC4gKi9cbmV4cG9ydCBjbGFzcyBUR0FMb2FkZXIge1xuICAvKiogUGF0aCBvZiB0aGUgYXNzZXQuICovXG4gIHBhdGg6IGFueVxuICAvKiogTG9hZGluZyBtYW5hZ2VyIGZvciBUR0EgYXNzZXQuICovXG4gIG1hbmFnZXI6IGFueVxuXG4gIC8qKiBDb25zdHJ1Y3RzIFRHQSBMb2FkZXIuICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubWFuYWdlciA9IHRoaXMubWFuYWdlciAhPT0gdW5kZWZpbmVkID8gdGhpcy5tYW5hZ2VyIDogRGVmYXVsdExvYWRpbmdNYW5hZ2VyXG4gIH1cblxuICAvKiogTG9hZCBUR0EgdGV4dHVyZS4gKi9cbiAgbG9hZCh1cmwsIG9uTG9hZCwgb25Qcm9ncmVzcywgb25FcnJvcik6IFRleHR1cmUge1xuICAgIGNvbnN0IHRleHR1cmUgPSBuZXcgVGV4dHVyZSgpXG5cbiAgICBjb25zdCBsb2FkZXIgPSBuZXcgRmlsZUxvYWRlcih0aGlzLm1hbmFnZXIpXG4gICAgbG9hZGVyLnNldFJlc3BvbnNlVHlwZSgnYXJyYXlidWZmZXInKVxuICAgIGxvYWRlci5zZXRQYXRoKHRoaXMucGF0aClcblxuICAgIGxvYWRlci5sb2FkKFxuICAgICAgdXJsLFxuICAgICAgKGJ1ZmZlcikgPT4ge1xuICAgICAgICB0ZXh0dXJlLmltYWdlID0gdGhpcy5wYXJzZShidWZmZXIpXG4gICAgICAgIHRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlXG5cbiAgICAgICAgaWYgKG9uTG9hZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgb25Mb2FkKHRleHR1cmUpXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvblByb2dyZXNzLFxuICAgICAgb25FcnJvclxuICAgIClcblxuICAgIHJldHVybiB0ZXh0dXJlXG4gIH1cblxuICAvKiogUGFyc2UgdGhlIGFzc2V0LiAqL1xuICBwYXJzZShidWZmZXIpIHtcbiAgICAvLyByZWZlcmVuY2UgZnJvbSB2dGhpYmF1bHQsIGh0dHBzOi8vZ2l0aHViLmNvbS92dGhpYmF1bHQvcm9Ccm93c2VyL2Jsb2IvbWFzdGVyL3NyYy9Mb2FkZXJzL1RhcmdhLmpzXG5cbiAgICBmdW5jdGlvbiB0Z2FDaGVja0hlYWRlcihoZWFkZXIpIHtcbiAgICAgIHN3aXRjaCAoaGVhZGVyLmltYWdlX3R5cGUpIHtcbiAgICAgICAgLy8gY2hlY2sgaW5kZXhlZCB0eXBlXG5cbiAgICAgICAgY2FzZSBUR0FfVFlQRV9JTkRFWEVEOlxuICAgICAgICBjYXNlIFRHQV9UWVBFX1JMRV9JTkRFWEVEOlxuICAgICAgICAgIGlmIChoZWFkZXIuY29sb3JtYXBfbGVuZ3RoID4gMjU2IHx8IGhlYWRlci5jb2xvcm1hcF9zaXplICE9PSAyNCB8fCBoZWFkZXIuY29sb3JtYXBfdHlwZSAhPT0gMSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVEdBTG9hZGVyOiBJbnZhbGlkIHR5cGUgY29sb3JtYXAgZGF0YSBmb3IgaW5kZXhlZCB0eXBlLicpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgLy8gY2hlY2sgY29sb3JtYXAgdHlwZVxuXG4gICAgICAgIGNhc2UgVEdBX1RZUEVfUkdCOlxuICAgICAgICBjYXNlIFRHQV9UWVBFX0dSRVk6XG4gICAgICAgIGNhc2UgVEdBX1RZUEVfUkxFX1JHQjpcbiAgICAgICAgY2FzZSBUR0FfVFlQRV9STEVfR1JFWTpcbiAgICAgICAgICBpZiAoaGVhZGVyLmNvbG9ybWFwX3R5cGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RHQUxvYWRlcjogSW52YWxpZCB0eXBlIGNvbG9ybWFwIGRhdGEgZm9yIGNvbG9ybWFwIHR5cGUuJylcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICAvLyBXaGF0IHRoZSBuZWVkIG9mIGEgZmlsZSB3aXRob3V0IGRhdGEgP1xuXG4gICAgICAgIGNhc2UgVEdBX1RZUEVfTk9fREFUQTpcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdUR0FMb2FkZXI6IE5vIGRhdGEuJylcblxuICAgICAgICAvLyBJbnZhbGlkIHR5cGUgP1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29uc29sZS5lcnJvcignVEdBTG9hZGVyOiBJbnZhbGlkIHR5cGUgXCIlc1wiLicsIGhlYWRlci5pbWFnZV90eXBlKVxuICAgICAgfVxuXG4gICAgICAvLyBjaGVjayBpbWFnZSB3aWR0aCBhbmQgaGVpZ2h0XG5cbiAgICAgIGlmIChoZWFkZXIud2lkdGggPD0gMCB8fCBoZWFkZXIuaGVpZ2h0IDw9IDApIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignVEdBTG9hZGVyOiBJbnZhbGlkIGltYWdlIHNpemUuJylcbiAgICAgIH1cblxuICAgICAgLy8gY2hlY2sgaW1hZ2UgcGl4ZWwgc2l6ZVxuXG4gICAgICBpZiAoaGVhZGVyLnBpeGVsX3NpemUgIT09IDggJiYgaGVhZGVyLnBpeGVsX3NpemUgIT09IDE2ICYmIGhlYWRlci5waXhlbF9zaXplICE9PSAyNCAmJiBoZWFkZXIucGl4ZWxfc2l6ZSAhPT0gMzIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignVEdBTG9hZGVyOiBJbnZhbGlkIHBpeGVsIHNpemUgXCIlc1wiLicsIGhlYWRlci5waXhlbF9zaXplKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHBhcnNlIHRnYSBpbWFnZSBidWZmZXJcblxuICAgIGZ1bmN0aW9uIHRnYVBhcnNlKHVzZV9ybGUsIHVzZV9wYWwsIGhlYWRlciwgb2Zmc2V0LCBkYXRhKSB7XG4gICAgICBsZXQgcGl4ZWxfZGF0YSwgcGFsZXR0ZXNcblxuICAgICAgY29uc3QgcGl4ZWxfc2l6ZSA9IGhlYWRlci5waXhlbF9zaXplID4+IDNcbiAgICAgIGNvbnN0IHBpeGVsX3RvdGFsID0gaGVhZGVyLndpZHRoICogaGVhZGVyLmhlaWdodCAqIHBpeGVsX3NpemVcblxuICAgICAgLy8gcmVhZCBwYWxldHRlc1xuXG4gICAgICBpZiAodXNlX3BhbCkge1xuICAgICAgICBwYWxldHRlcyA9IGRhdGEuc3ViYXJyYXkob2Zmc2V0LCAob2Zmc2V0ICs9IGhlYWRlci5jb2xvcm1hcF9sZW5ndGggKiAoaGVhZGVyLmNvbG9ybWFwX3NpemUgPj4gMykpKVxuICAgICAgfVxuXG4gICAgICAvLyByZWFkIFJMRVxuXG4gICAgICBpZiAodXNlX3JsZSkge1xuICAgICAgICBwaXhlbF9kYXRhID0gbmV3IFVpbnQ4QXJyYXkocGl4ZWxfdG90YWwpXG5cbiAgICAgICAgbGV0IGMsIGNvdW50LCBpXG4gICAgICAgIGxldCBzaGlmdCA9IDBcbiAgICAgICAgY29uc3QgcGl4ZWxzID0gbmV3IFVpbnQ4QXJyYXkocGl4ZWxfc2l6ZSlcblxuICAgICAgICB3aGlsZSAoc2hpZnQgPCBwaXhlbF90b3RhbCkge1xuICAgICAgICAgIGMgPSBkYXRhW29mZnNldCsrXVxuICAgICAgICAgIGNvdW50ID0gKGMgJiAweDdmKSArIDFcblxuICAgICAgICAgIC8vIFJMRSBwaXhlbHNcblxuICAgICAgICAgIGlmIChjICYgMHg4MCkge1xuICAgICAgICAgICAgLy8gYmluZCBwaXhlbCB0bXAgYXJyYXlcblxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHBpeGVsX3NpemU7ICsraSkge1xuICAgICAgICAgICAgICBwaXhlbHNbaV0gPSBkYXRhW29mZnNldCsrXVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBjb3B5IHBpeGVsIGFycmF5XG5cbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgICAgICAgIHBpeGVsX2RhdGEuc2V0KHBpeGVscywgc2hpZnQgKyBpICogcGl4ZWxfc2l6ZSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2hpZnQgKz0gcGl4ZWxfc2l6ZSAqIGNvdW50XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHJhdyBwaXhlbHNcblxuICAgICAgICAgICAgY291bnQgKj0gcGl4ZWxfc2l6ZVxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgICAgICAgcGl4ZWxfZGF0YVtzaGlmdCArIGldID0gZGF0YVtvZmZzZXQrK11cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNoaWZ0ICs9IGNvdW50XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyByYXcgcGl4ZWxzXG5cbiAgICAgICAgcGl4ZWxfZGF0YSA9IGRhdGEuc3ViYXJyYXkob2Zmc2V0LCAob2Zmc2V0ICs9IHVzZV9wYWwgPyBoZWFkZXIud2lkdGggKiBoZWFkZXIuaGVpZ2h0IDogcGl4ZWxfdG90YWwpKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwaXhlbF9kYXRhOiBwaXhlbF9kYXRhLFxuICAgICAgICBwYWxldHRlczogcGFsZXR0ZXNcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0Z2FHZXRJbWFnZURhdGE4Yml0cyhpbWFnZURhdGEsIHlfc3RhcnQsIHlfc3RlcCwgeV9lbmQsIHhfc3RhcnQsIHhfc3RlcCwgeF9lbmQsIGltYWdlLCBwYWxldHRlcykge1xuICAgICAgY29uc3QgY29sb3JtYXAgPSBwYWxldHRlc1xuICAgICAgbGV0IGNvbG9yLFxuICAgICAgICBpID0gMCxcbiAgICAgICAgeCxcbiAgICAgICAgeVxuICAgICAgY29uc3Qgd2lkdGggPSBoZWFkZXIud2lkdGhcblxuICAgICAgZm9yICh5ID0geV9zdGFydDsgeSAhPT0geV9lbmQ7IHkgKz0geV9zdGVwKSB7XG4gICAgICAgIGZvciAoeCA9IHhfc3RhcnQ7IHggIT09IHhfZW5kOyB4ICs9IHhfc3RlcCwgaSsrKSB7XG4gICAgICAgICAgY29sb3IgPSBpbWFnZVtpXVxuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgM10gPSAyNTVcbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDJdID0gY29sb3JtYXBbY29sb3IgKiAzICsgMF1cbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDFdID0gY29sb3JtYXBbY29sb3IgKiAzICsgMV1cbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDBdID0gY29sb3JtYXBbY29sb3IgKiAzICsgMl1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaW1hZ2VEYXRhXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdGdhR2V0SW1hZ2VEYXRhMTZiaXRzKGltYWdlRGF0YSwgeV9zdGFydCwgeV9zdGVwLCB5X2VuZCwgeF9zdGFydCwgeF9zdGVwLCB4X2VuZCwgaW1hZ2UpIHtcbiAgICAgIGxldCBjb2xvcixcbiAgICAgICAgaSA9IDAsXG4gICAgICAgIHgsXG4gICAgICAgIHlcbiAgICAgIGNvbnN0IHdpZHRoID0gaGVhZGVyLndpZHRoXG5cbiAgICAgIGZvciAoeSA9IHlfc3RhcnQ7IHkgIT09IHlfZW5kOyB5ICs9IHlfc3RlcCkge1xuICAgICAgICBmb3IgKHggPSB4X3N0YXJ0OyB4ICE9PSB4X2VuZDsgeCArPSB4X3N0ZXAsIGkgKz0gMikge1xuICAgICAgICAgIGNvbG9yID0gaW1hZ2VbaSArIDBdICsgKGltYWdlW2kgKyAxXSA8PCA4KSAvLyBJbnZlcnNlZCA/XG4gICAgICAgICAgaW1hZ2VEYXRhWyh4ICsgd2lkdGggKiB5KSAqIDQgKyAwXSA9IChjb2xvciAmIDB4N2MwMCkgPj4gN1xuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgMV0gPSAoY29sb3IgJiAweDAzZTApID4+IDJcbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDJdID0gKGNvbG9yICYgMHgwMDFmKSA+PiAzXG4gICAgICAgICAgaW1hZ2VEYXRhWyh4ICsgd2lkdGggKiB5KSAqIDQgKyAzXSA9IGNvbG9yICYgMHg4MDAwID8gMCA6IDI1NVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbWFnZURhdGFcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0Z2FHZXRJbWFnZURhdGEyNGJpdHMoaW1hZ2VEYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSkge1xuICAgICAgbGV0IGkgPSAwLFxuICAgICAgICB4LFxuICAgICAgICB5XG4gICAgICBjb25zdCB3aWR0aCA9IGhlYWRlci53aWR0aFxuXG4gICAgICBmb3IgKHkgPSB5X3N0YXJ0OyB5ICE9PSB5X2VuZDsgeSArPSB5X3N0ZXApIHtcbiAgICAgICAgZm9yICh4ID0geF9zdGFydDsgeCAhPT0geF9lbmQ7IHggKz0geF9zdGVwLCBpICs9IDMpIHtcbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDNdID0gMjU1XG4gICAgICAgICAgaW1hZ2VEYXRhWyh4ICsgd2lkdGggKiB5KSAqIDQgKyAyXSA9IGltYWdlW2kgKyAwXVxuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgMV0gPSBpbWFnZVtpICsgMV1cbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDBdID0gaW1hZ2VbaSArIDJdXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGltYWdlRGF0YVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRnYUdldEltYWdlRGF0YTMyYml0cyhpbWFnZURhdGEsIHlfc3RhcnQsIHlfc3RlcCwgeV9lbmQsIHhfc3RhcnQsIHhfc3RlcCwgeF9lbmQsIGltYWdlKSB7XG4gICAgICBsZXQgaSA9IDAsXG4gICAgICAgIHgsXG4gICAgICAgIHlcbiAgICAgIGNvbnN0IHdpZHRoID0gaGVhZGVyLndpZHRoXG5cbiAgICAgIGZvciAoeSA9IHlfc3RhcnQ7IHkgIT09IHlfZW5kOyB5ICs9IHlfc3RlcCkge1xuICAgICAgICBmb3IgKHggPSB4X3N0YXJ0OyB4ICE9PSB4X2VuZDsgeCArPSB4X3N0ZXAsIGkgKz0gNCkge1xuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgMl0gPSBpbWFnZVtpICsgMF1cbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDFdID0gaW1hZ2VbaSArIDFdXG4gICAgICAgICAgaW1hZ2VEYXRhWyh4ICsgd2lkdGggKiB5KSAqIDQgKyAwXSA9IGltYWdlW2kgKyAyXVxuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgM10gPSBpbWFnZVtpICsgM11cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaW1hZ2VEYXRhXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdGdhR2V0SW1hZ2VEYXRhR3JleThiaXRzKGltYWdlRGF0YSwgeV9zdGFydCwgeV9zdGVwLCB5X2VuZCwgeF9zdGFydCwgeF9zdGVwLCB4X2VuZCwgaW1hZ2UpIHtcbiAgICAgIGxldCBjb2xvcixcbiAgICAgICAgaSA9IDAsXG4gICAgICAgIHgsXG4gICAgICAgIHlcbiAgICAgIGNvbnN0IHdpZHRoID0gaGVhZGVyLndpZHRoXG5cbiAgICAgIGZvciAoeSA9IHlfc3RhcnQ7IHkgIT09IHlfZW5kOyB5ICs9IHlfc3RlcCkge1xuICAgICAgICBmb3IgKHggPSB4X3N0YXJ0OyB4ICE9PSB4X2VuZDsgeCArPSB4X3N0ZXAsIGkrKykge1xuICAgICAgICAgIGNvbG9yID0gaW1hZ2VbaV1cbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDBdID0gY29sb3JcbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDFdID0gY29sb3JcbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDJdID0gY29sb3JcbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDNdID0gMjU1XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGltYWdlRGF0YVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRnYUdldEltYWdlRGF0YUdyZXkxNmJpdHMoaW1hZ2VEYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSkge1xuICAgICAgbGV0IGkgPSAwLFxuICAgICAgICB4LFxuICAgICAgICB5XG4gICAgICBjb25zdCB3aWR0aCA9IGhlYWRlci53aWR0aFxuXG4gICAgICBmb3IgKHkgPSB5X3N0YXJ0OyB5ICE9PSB5X2VuZDsgeSArPSB5X3N0ZXApIHtcbiAgICAgICAgZm9yICh4ID0geF9zdGFydDsgeCAhPT0geF9lbmQ7IHggKz0geF9zdGVwLCBpICs9IDIpIHtcbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDBdID0gaW1hZ2VbaSArIDBdXG4gICAgICAgICAgaW1hZ2VEYXRhWyh4ICsgd2lkdGggKiB5KSAqIDQgKyAxXSA9IGltYWdlW2kgKyAwXVxuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgMl0gPSBpbWFnZVtpICsgMF1cbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDNdID0gaW1hZ2VbaSArIDFdXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGltYWdlRGF0YVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFRnYVJHQkEoZGF0YSwgd2lkdGgsIGhlaWdodCwgaW1hZ2UsIHBhbGV0dGUpIHtcbiAgICAgIGxldCB4X3N0YXJ0LCB5X3N0YXJ0LCB4X3N0ZXAsIHlfc3RlcCwgeF9lbmQsIHlfZW5kXG5cbiAgICAgIHN3aXRjaCAoKGhlYWRlci5mbGFncyAmIFRHQV9PUklHSU5fTUFTSykgPj4gVEdBX09SSUdJTl9TSElGVCkge1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICBjYXNlIFRHQV9PUklHSU5fVUw6XG4gICAgICAgICAgeF9zdGFydCA9IDBcbiAgICAgICAgICB4X3N0ZXAgPSAxXG4gICAgICAgICAgeF9lbmQgPSB3aWR0aFxuICAgICAgICAgIHlfc3RhcnQgPSAwXG4gICAgICAgICAgeV9zdGVwID0gMVxuICAgICAgICAgIHlfZW5kID0gaGVpZ2h0XG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlIFRHQV9PUklHSU5fQkw6XG4gICAgICAgICAgeF9zdGFydCA9IDBcbiAgICAgICAgICB4X3N0ZXAgPSAxXG4gICAgICAgICAgeF9lbmQgPSB3aWR0aFxuICAgICAgICAgIHlfc3RhcnQgPSBoZWlnaHQgLSAxXG4gICAgICAgICAgeV9zdGVwID0gLTFcbiAgICAgICAgICB5X2VuZCA9IC0xXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlIFRHQV9PUklHSU5fVVI6XG4gICAgICAgICAgeF9zdGFydCA9IHdpZHRoIC0gMVxuICAgICAgICAgIHhfc3RlcCA9IC0xXG4gICAgICAgICAgeF9lbmQgPSAtMVxuICAgICAgICAgIHlfc3RhcnQgPSAwXG4gICAgICAgICAgeV9zdGVwID0gMVxuICAgICAgICAgIHlfZW5kID0gaGVpZ2h0XG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlIFRHQV9PUklHSU5fQlI6XG4gICAgICAgICAgeF9zdGFydCA9IHdpZHRoIC0gMVxuICAgICAgICAgIHhfc3RlcCA9IC0xXG4gICAgICAgICAgeF9lbmQgPSAtMVxuICAgICAgICAgIHlfc3RhcnQgPSBoZWlnaHQgLSAxXG4gICAgICAgICAgeV9zdGVwID0gLTFcbiAgICAgICAgICB5X2VuZCA9IC0xXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgaWYgKHVzZV9ncmV5KSB7XG4gICAgICAgIHN3aXRjaCAoaGVhZGVyLnBpeGVsX3NpemUpIHtcbiAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICB0Z2FHZXRJbWFnZURhdGFHcmV5OGJpdHMoZGF0YSwgeV9zdGFydCwgeV9zdGVwLCB5X2VuZCwgeF9zdGFydCwgeF9zdGVwLCB4X2VuZCwgaW1hZ2UpXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAxNjpcbiAgICAgICAgICAgIHRnYUdldEltYWdlRGF0YUdyZXkxNmJpdHMoZGF0YSwgeV9zdGFydCwgeV9zdGVwLCB5X2VuZCwgeF9zdGFydCwgeF9zdGVwLCB4X2VuZCwgaW1hZ2UpXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RHQUxvYWRlcjogRm9ybWF0IG5vdCBzdXBwb3J0ZWQuJylcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN3aXRjaCAoaGVhZGVyLnBpeGVsX3NpemUpIHtcbiAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICB0Z2FHZXRJbWFnZURhdGE4Yml0cyhkYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSwgcGFsZXR0ZSlcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlIDE2OlxuICAgICAgICAgICAgdGdhR2V0SW1hZ2VEYXRhMTZiaXRzKGRhdGEsIHlfc3RhcnQsIHlfc3RlcCwgeV9lbmQsIHhfc3RhcnQsIHhfc3RlcCwgeF9lbmQsIGltYWdlKVxuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgMjQ6XG4gICAgICAgICAgICB0Z2FHZXRJbWFnZURhdGEyNGJpdHMoZGF0YSwgeV9zdGFydCwgeV9zdGVwLCB5X2VuZCwgeF9zdGFydCwgeF9zdGVwLCB4X2VuZCwgaW1hZ2UpXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICAgIHRnYUdldEltYWdlRGF0YTMyYml0cyhkYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSlcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVEdBTG9hZGVyOiBGb3JtYXQgbm90IHN1cHBvcnRlZC4nKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBMb2FkIGltYWdlIGRhdGEgYWNjb3JkaW5nIHRvIHNwZWNpZmljIG1ldGhvZFxuICAgICAgLy8gY29uc3QgZnVuYyA9ICd0Z2FHZXRJbWFnZURhdGEnICsgKHVzZV9ncmV5ID8gJ0dyZXknIDogJycpICsgKGhlYWRlci5waXhlbF9zaXplKSArICdiaXRzJztcbiAgICAgIC8vIGZ1bmMoZGF0YSwgeV9zdGFydCwgeV9zdGVwLCB5X2VuZCwgeF9zdGFydCwgeF9zdGVwLCB4X2VuZCwgd2lkdGgsIGltYWdlLCBwYWxldHRlICk7XG4gICAgICByZXR1cm4gZGF0YVxuICAgIH1cblxuICAgIC8vIFRHQSBjb25zdGFudHNcblxuICAgIGNvbnN0IFRHQV9UWVBFX05PX0RBVEEgPSAwLFxuICAgICAgVEdBX1RZUEVfSU5ERVhFRCA9IDEsXG4gICAgICBUR0FfVFlQRV9SR0IgPSAyLFxuICAgICAgVEdBX1RZUEVfR1JFWSA9IDMsXG4gICAgICBUR0FfVFlQRV9STEVfSU5ERVhFRCA9IDksXG4gICAgICBUR0FfVFlQRV9STEVfUkdCID0gMTAsXG4gICAgICBUR0FfVFlQRV9STEVfR1JFWSA9IDExLFxuICAgICAgVEdBX09SSUdJTl9NQVNLID0gMHgzMCxcbiAgICAgIFRHQV9PUklHSU5fU0hJRlQgPSAweDA0LFxuICAgICAgVEdBX09SSUdJTl9CTCA9IDB4MDAsXG4gICAgICBUR0FfT1JJR0lOX0JSID0gMHgwMSxcbiAgICAgIFRHQV9PUklHSU5fVUwgPSAweDAyLFxuICAgICAgVEdBX09SSUdJTl9VUiA9IDB4MDNcblxuICAgIGlmIChidWZmZXIubGVuZ3RoIDwgMTkpIGNvbnNvbGUuZXJyb3IoJ1RHQUxvYWRlcjogTm90IGVub3VnaCBkYXRhIHRvIGNvbnRhaW4gaGVhZGVyLicpXG5cbiAgICBjb25zdCBjb250ZW50ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKVxuICAgIGxldCBvZmZzZXQgPSAwXG4gICAgY29uc3QgaGVhZGVyID0ge1xuICAgICAgaWRfbGVuZ3RoOiBjb250ZW50W29mZnNldCsrXSxcbiAgICAgIGNvbG9ybWFwX3R5cGU6IGNvbnRlbnRbb2Zmc2V0KytdLFxuICAgICAgaW1hZ2VfdHlwZTogY29udGVudFtvZmZzZXQrK10sXG4gICAgICBjb2xvcm1hcF9pbmRleDogY29udGVudFtvZmZzZXQrK10gfCAoY29udGVudFtvZmZzZXQrK10gPDwgOCksXG4gICAgICBjb2xvcm1hcF9sZW5ndGg6IGNvbnRlbnRbb2Zmc2V0KytdIHwgKGNvbnRlbnRbb2Zmc2V0KytdIDw8IDgpLFxuICAgICAgY29sb3JtYXBfc2l6ZTogY29udGVudFtvZmZzZXQrK10sXG4gICAgICBvcmlnaW46IFtjb250ZW50W29mZnNldCsrXSB8IChjb250ZW50W29mZnNldCsrXSA8PCA4KSwgY29udGVudFtvZmZzZXQrK10gfCAoY29udGVudFtvZmZzZXQrK10gPDwgOCldLFxuICAgICAgd2lkdGg6IGNvbnRlbnRbb2Zmc2V0KytdIHwgKGNvbnRlbnRbb2Zmc2V0KytdIDw8IDgpLFxuICAgICAgaGVpZ2h0OiBjb250ZW50W29mZnNldCsrXSB8IChjb250ZW50W29mZnNldCsrXSA8PCA4KSxcbiAgICAgIHBpeGVsX3NpemU6IGNvbnRlbnRbb2Zmc2V0KytdLFxuICAgICAgZmxhZ3M6IGNvbnRlbnRbb2Zmc2V0KytdXG4gICAgfVxuXG4gICAgLy8gY2hlY2sgdGdhIGlmIGl0IGlzIHZhbGlkIGZvcm1hdFxuXG4gICAgdGdhQ2hlY2tIZWFkZXIoaGVhZGVyKVxuXG4gICAgaWYgKGhlYWRlci5pZF9sZW5ndGggKyBvZmZzZXQgPiBidWZmZXIubGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdUR0FMb2FkZXI6IE5vIGRhdGEuJylcbiAgICB9XG5cbiAgICAvLyBza2lwIHRoZSBuZWVkbid0IGRhdGFcblxuICAgIG9mZnNldCArPSBoZWFkZXIuaWRfbGVuZ3RoXG5cbiAgICAvLyBnZXQgdGFyZ2EgaW5mb3JtYXRpb24gYWJvdXQgUkxFIGNvbXByZXNzaW9uIGFuZCBwYWxldHRlXG5cbiAgICBsZXQgdXNlX3JsZSA9IGZhbHNlLFxuICAgICAgdXNlX3BhbCA9IGZhbHNlLFxuICAgICAgdXNlX2dyZXkgPSBmYWxzZVxuXG4gICAgc3dpdGNoIChoZWFkZXIuaW1hZ2VfdHlwZSkge1xuICAgICAgY2FzZSBUR0FfVFlQRV9STEVfSU5ERVhFRDpcbiAgICAgICAgdXNlX3JsZSA9IHRydWVcbiAgICAgICAgdXNlX3BhbCA9IHRydWVcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBUR0FfVFlQRV9JTkRFWEVEOlxuICAgICAgICB1c2VfcGFsID0gdHJ1ZVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIFRHQV9UWVBFX1JMRV9SR0I6XG4gICAgICAgIHVzZV9ybGUgPSB0cnVlXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgVEdBX1RZUEVfUkdCOlxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIFRHQV9UWVBFX1JMRV9HUkVZOlxuICAgICAgICB1c2VfcmxlID0gdHJ1ZVxuICAgICAgICB1c2VfZ3JleSA9IHRydWVcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBUR0FfVFlQRV9HUkVZOlxuICAgICAgICB1c2VfZ3JleSA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICAvL1xuXG4gICAgY29uc3QgdXNlT2Zmc2NyZWVuID0gdHlwZW9mIE9mZnNjcmVlbkNhbnZhcyAhPT0gJ3VuZGVmaW5lZCdcblxuICAgIGNvbnN0IGNhbnZhcyA9IHVzZU9mZnNjcmVlbiA/IG5ldyBPZmZzY3JlZW5DYW52YXMoaGVhZGVyLndpZHRoLCBoZWFkZXIuaGVpZ2h0KSA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpXG4gICAgY2FudmFzLndpZHRoID0gaGVhZGVyLndpZHRoXG4gICAgY2FudmFzLmhlaWdodCA9IGhlYWRlci5oZWlnaHRcblxuICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxuICAgIGNvbnN0IGltYWdlRGF0YSA9IGNvbnRleHQuY3JlYXRlSW1hZ2VEYXRhKGhlYWRlci53aWR0aCwgaGVhZGVyLmhlaWdodClcblxuICAgIGNvbnN0IHJlc3VsdCA9IHRnYVBhcnNlKHVzZV9ybGUsIHVzZV9wYWwsIGhlYWRlciwgb2Zmc2V0LCBjb250ZW50KVxuICAgIGNvbnN0IHJnYmFEYXRhID0gZ2V0VGdhUkdCQShpbWFnZURhdGEuZGF0YSwgaGVhZGVyLndpZHRoLCBoZWFkZXIuaGVpZ2h0LCByZXN1bHQucGl4ZWxfZGF0YSwgcmVzdWx0LnBhbGV0dGVzKVxuXG4gICAgY29udGV4dC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKVxuXG4gICAgcmV0dXJuIHVzZU9mZnNjcmVlbiA/IGNhbnZhcy50cmFuc2ZlclRvSW1hZ2VCaXRtYXAoKSA6IGNhbnZhc1xuICB9XG5cbiAgLyoqIFNldHRlciBtZXRob2QgZm9yIHBhdGggUHJvcGVydHkuICovXG4gIHNldFBhdGgodmFsdWUpOiBUR0FMb2FkZXIge1xuICAgIHRoaXMucGF0aCA9IHZhbHVlXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxufVxuIiwiLy8gQHRzLW5vY2hlY2tcbmltcG9ydCB7IFZlY3RvcjMsIFZlY3RvcjQgfSBmcm9tICd0aHJlZSdcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKlx0TlVSQlMgVXRpbHNcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLypcbkZpbmRzIGtub3QgdmVjdG9yIHNwYW4uXG5wIDogZGVncmVlXG51IDogcGFyYW1ldHJpYyB2YWx1ZVxuVSA6IGtub3QgdmVjdG9yXG5yZXR1cm5zIHRoZSBzcGFuXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRTcGFuKHA6IG51bWJlciwgdTogbnVtYmVyLCBVOiBudW1iZXJbXSk6IG51bWJlciB7XG4gIGNvbnN0IG4gPSBVLmxlbmd0aCAtIHAgLSAxXG5cbiAgaWYgKHUgPj0gVVtuXSkge1xuICAgIHJldHVybiBuIC0gMVxuICB9XG5cbiAgaWYgKHUgPD0gVVtwXSkge1xuICAgIHJldHVybiBwXG4gIH1cblxuICBsZXQgbG93ID0gcFxuICBsZXQgaGlnaCA9IG5cbiAgbGV0IG1pZCA9IE1hdGguZmxvb3IoKGxvdyArIGhpZ2gpIC8gMilcblxuICB3aGlsZSAodSA8IFVbbWlkXSB8fCB1ID49IFVbbWlkICsgMV0pIHtcbiAgICBpZiAodSA8IFVbbWlkXSkge1xuICAgICAgaGlnaCA9IG1pZFxuICAgIH0gZWxzZSB7XG4gICAgICBsb3cgPSBtaWRcbiAgICB9XG5cbiAgICBtaWQgPSBNYXRoLmZsb29yKChsb3cgKyBoaWdoKSAvIDIpXG4gIH1cblxuICByZXR1cm4gbWlkXG59XG5cbi8qXG5DYWxjdWxhdGUgYmFzaXMgZnVuY3Rpb25zLiBTZWUgVGhlIE5VUkJTIEJvb2ssIHBhZ2UgNzAsIGFsZ29yaXRobSBBMi4yXG5zcGFuIDogc3BhbiBpbiB3aGljaCB1IGxpZXNcbnUgICAgOiBwYXJhbWV0cmljIHBvaW50XG5wICAgIDogZGVncmVlXG5VICAgIDoga25vdCB2ZWN0b3JcbnJldHVybnMgYXJyYXlbcCsxXSB3aXRoIGJhc2lzIGZ1bmN0aW9ucyB2YWx1ZXMuXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGNCYXNpc0Z1bmN0aW9ucyhzcGFuOiBudW1iZXIsIHU6IG51bWJlciwgcDogbnVtYmVyLCBVOiBudW1iZXJbXSk6IG51bWJlcltdIHtcbiAgY29uc3QgTiA9IFtdXG4gIGNvbnN0IGxlZnQgPSBbXVxuICBjb25zdCByaWdodCA9IFtdXG4gIE5bMF0gPSAxLjBcblxuICBmb3IgKGxldCBqID0gMTsgaiA8PSBwOyArK2opIHtcbiAgICBsZWZ0W2pdID0gdSAtIFVbc3BhbiArIDEgLSBqXVxuICAgIHJpZ2h0W2pdID0gVVtzcGFuICsgal0gLSB1XG5cbiAgICBsZXQgc2F2ZWQgPSAwLjBcblxuICAgIGZvciAobGV0IHIgPSAwOyByIDwgajsgKytyKSB7XG4gICAgICBjb25zdCBydiA9IHJpZ2h0W3IgKyAxXVxuICAgICAgY29uc3QgbHYgPSBsZWZ0W2ogLSByXVxuICAgICAgY29uc3QgdGVtcCA9IE5bcl0gLyAocnYgKyBsdilcbiAgICAgIE5bcl0gPSBzYXZlZCArIHJ2ICogdGVtcFxuICAgICAgc2F2ZWQgPSBsdiAqIHRlbXBcbiAgICB9XG5cbiAgICBOW2pdID0gc2F2ZWRcbiAgfVxuXG4gIHJldHVybiBOXG59XG5cbi8qXG5DYWxjdWxhdGUgQi1TcGxpbmUgY3VydmUgcG9pbnRzLiBTZWUgVGhlIE5VUkJTIEJvb2ssIHBhZ2UgODIsIGFsZ29yaXRobSBBMy4xLlxucCA6IGRlZ3JlZSBvZiBCLVNwbGluZVxuVSA6IGtub3QgdmVjdG9yXG5QIDogY29udHJvbCBwb2ludHMgKHgsIHksIHosIHcpXG51IDogcGFyYW1ldHJpYyBwb2ludFxucmV0dXJucyBwb2ludCBmb3IgZ2l2ZW4gdVxuKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjQlNwbGluZVBvaW50KHA6IG51bWJlciwgVTogbnVtYmVyW10sIFA6IFZlY3RvcjRbXSwgdTogbnVtYmVyKTogVmVjdG9yNCB7XG4gIGNvbnN0IHNwYW4gPSBmaW5kU3BhbihwLCB1LCBVKVxuICBjb25zdCBOID0gY2FsY0Jhc2lzRnVuY3Rpb25zKHNwYW4sIHUsIHAsIFUpXG4gIGNvbnN0IEMgPSBuZXcgVmVjdG9yNCgwLCAwLCAwLCAwKVxuXG4gIGZvciAobGV0IGogPSAwOyBqIDw9IHA7ICsraikge1xuICAgIGNvbnN0IHBvaW50ID0gUFtzcGFuIC0gcCArIGpdXG4gICAgY29uc3QgTmogPSBOW2pdXG4gICAgY29uc3Qgd05qID0gcG9pbnQudyAqIE5qXG4gICAgQy54ICs9IHBvaW50LnggKiB3TmpcbiAgICBDLnkgKz0gcG9pbnQueSAqIHdOalxuICAgIEMueiArPSBwb2ludC56ICogd05qXG4gICAgQy53ICs9IHBvaW50LncgKiBOalxuICB9XG5cbiAgcmV0dXJuIENcbn1cblxuLypcbkNhbGN1bGF0ZSBiYXNpcyBmdW5jdGlvbnMgZGVyaXZhdGl2ZXMuIFNlZSBUaGUgTlVSQlMgQm9vaywgcGFnZSA3MiwgYWxnb3JpdGhtIEEyLjMuXG5zcGFuIDogc3BhbiBpbiB3aGljaCB1IGxpZXNcbnUgICAgOiBwYXJhbWV0cmljIHBvaW50XG5wICAgIDogZGVncmVlXG5uICAgIDogbnVtYmVyIG9mIGRlcml2YXRpdmVzIHRvIGNhbGN1bGF0ZVxuVSAgICA6IGtub3QgdmVjdG9yXG5yZXR1cm5zIGFycmF5W24rMV1bcCsxXSB3aXRoIGJhc2lzIGZ1bmN0aW9ucyBkZXJpdmF0aXZlc1xuKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjQmFzaXNGdW5jdGlvbkRlcml2YXRpdmVzKHNwYW46IG51bWJlciwgdTogbnVtYmVyLCBwOiBudW1iZXIsIG46IG51bWJlciwgVTogbnVtYmVyW10pOiBudW1iZXJbXVtdIHtcbiAgY29uc3QgemVyb0FyciA9IFtdXG4gIGZvciAobGV0IGkgPSAwOyBpIDw9IHA7ICsraSkgemVyb0FycltpXSA9IDAuMFxuXG4gIGNvbnN0IGRlcnMgPSBbXVxuICBmb3IgKGxldCBpID0gMDsgaSA8PSBuOyArK2kpIGRlcnNbaV0gPSB6ZXJvQXJyLnNsaWNlKDApXG5cbiAgY29uc3QgbmR1ID0gW11cbiAgZm9yIChsZXQgaSA9IDA7IGkgPD0gcDsgKytpKSBuZHVbaV0gPSB6ZXJvQXJyLnNsaWNlKDApXG5cbiAgbmR1WzBdWzBdID0gMS4wXG5cbiAgY29uc3QgbGVmdCA9IHplcm9BcnIuc2xpY2UoMClcbiAgY29uc3QgcmlnaHQgPSB6ZXJvQXJyLnNsaWNlKDApXG5cbiAgZm9yIChsZXQgaiA9IDE7IGogPD0gcDsgKytqKSB7XG4gICAgbGVmdFtqXSA9IHUgLSBVW3NwYW4gKyAxIC0gal1cbiAgICByaWdodFtqXSA9IFVbc3BhbiArIGpdIC0gdVxuXG4gICAgbGV0IHNhdmVkID0gMC4wXG5cbiAgICBmb3IgKGxldCByID0gMDsgciA8IGo7ICsrcikge1xuICAgICAgY29uc3QgcnYgPSByaWdodFtyICsgMV1cbiAgICAgIGNvbnN0IGx2ID0gbGVmdFtqIC0gcl1cbiAgICAgIG5kdVtqXVtyXSA9IHJ2ICsgbHZcblxuICAgICAgY29uc3QgdGVtcCA9IG5kdVtyXVtqIC0gMV0gLyBuZHVbal1bcl1cbiAgICAgIG5kdVtyXVtqXSA9IHNhdmVkICsgcnYgKiB0ZW1wXG4gICAgICBzYXZlZCA9IGx2ICogdGVtcFxuICAgIH1cblxuICAgIG5kdVtqXVtqXSA9IHNhdmVkXG4gIH1cblxuICBmb3IgKGxldCBqID0gMDsgaiA8PSBwOyArK2opIHtcbiAgICBkZXJzWzBdW2pdID0gbmR1W2pdW3BdXG4gIH1cblxuICBmb3IgKGxldCByID0gMDsgciA8PSBwOyArK3IpIHtcbiAgICBsZXQgczEgPSAwXG4gICAgbGV0IHMyID0gMVxuXG4gICAgY29uc3QgYSA9IFtdXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gcDsgKytpKSB7XG4gICAgICBhW2ldID0gemVyb0Fyci5zbGljZSgwKVxuICAgIH1cbiAgICBhWzBdWzBdID0gMS4wXG5cbiAgICBmb3IgKGxldCBrID0gMTsgayA8PSBuOyArK2spIHtcbiAgICAgIGxldCBkID0gMC4wXG4gICAgICBjb25zdCByayA9IHIgLSBrXG4gICAgICBjb25zdCBwayA9IHAgLSBrXG5cbiAgICAgIGlmIChyID49IGspIHtcbiAgICAgICAgYVtzMl1bMF0gPSBhW3MxXVswXSAvIG5kdVtwayArIDFdW3JrXVxuICAgICAgICBkID0gYVtzMl1bMF0gKiBuZHVbcmtdW3BrXVxuICAgICAgfVxuXG4gICAgICBjb25zdCBqMSA9IHJrID49IC0xID8gMSA6IC1ya1xuICAgICAgY29uc3QgajIgPSByIC0gMSA8PSBwayA/IGsgLSAxIDogcCAtIHJcblxuICAgICAgZm9yIChsZXQgaiA9IGoxOyBqIDw9IGoyOyArK2opIHtcbiAgICAgICAgYVtzMl1bal0gPSAoYVtzMV1bal0gLSBhW3MxXVtqIC0gMV0pIC8gbmR1W3BrICsgMV1bcmsgKyBqXVxuICAgICAgICBkICs9IGFbczJdW2pdICogbmR1W3JrICsgal1bcGtdXG4gICAgICB9XG5cbiAgICAgIGlmIChyIDw9IHBrKSB7XG4gICAgICAgIGFbczJdW2tdID0gLWFbczFdW2sgLSAxXSAvIG5kdVtwayArIDFdW3JdXG4gICAgICAgIGQgKz0gYVtzMl1ba10gKiBuZHVbcl1bcGtdXG4gICAgICB9XG5cbiAgICAgIGRlcnNba11bcl0gPSBkXG5cbiAgICAgIGNvbnN0IGogPSBzMVxuICAgICAgczEgPSBzMlxuICAgICAgczIgPSBqXG4gICAgfVxuICB9XG5cbiAgbGV0IHIgPSBwXG5cbiAgZm9yIChsZXQgayA9IDE7IGsgPD0gbjsgKytrKSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPD0gcDsgKytqKSB7XG4gICAgICBkZXJzW2tdW2pdICo9IHJcbiAgICB9XG4gICAgciAqPSBwIC0ga1xuICB9XG5cbiAgcmV0dXJuIGRlcnNcbn1cblxuLypcblx0Q2FsY3VsYXRlIGRlcml2YXRpdmVzIG9mIGEgQi1TcGxpbmUuIFNlZSBUaGUgTlVSQlMgQm9vaywgcGFnZSA5MywgYWxnb3JpdGhtIEEzLjIuXG5cdHAgIDogZGVncmVlXG5cdFUgIDoga25vdCB2ZWN0b3Jcblx0UCAgOiBjb250cm9sIHBvaW50c1xuXHR1ICA6IFBhcmFtZXRyaWMgcG9pbnRzXG5cdG5kIDogbnVtYmVyIG9mIGRlcml2YXRpdmVzXG5cdHJldHVybnMgYXJyYXlbZCsxXSB3aXRoIGRlcml2YXRpdmVzXG5cdCovXG5leHBvcnQgZnVuY3Rpb24gY2FsY0JTcGxpbmVEZXJpdmF0aXZlcyhwOiBudW1iZXIsIFU6IG51bWJlcltdLCBQOiBWZWN0b3I0W10sIHU6IG51bWJlciwgbmQ6IG51bWJlcik6IFZlY3RvcjRbXSB7XG4gIGNvbnN0IGR1ID0gbmQgPCBwID8gbmQgOiBwXG4gIGNvbnN0IENLID0gW11cbiAgY29uc3Qgc3BhbiA9IGZpbmRTcGFuKHAsIHUsIFUpXG4gIGNvbnN0IG5kZXJzID0gY2FsY0Jhc2lzRnVuY3Rpb25EZXJpdmF0aXZlcyhzcGFuLCB1LCBwLCBkdSwgVSlcbiAgY29uc3QgUHcgPSBbXVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgUC5sZW5ndGg7ICsraSkge1xuICAgIGNvbnN0IHBvaW50ID0gUFtpXS5jbG9uZSgpXG4gICAgY29uc3QgdyA9IHBvaW50LndcblxuICAgIHBvaW50LnggKj0gd1xuICAgIHBvaW50LnkgKj0gd1xuICAgIHBvaW50LnogKj0gd1xuXG4gICAgUHdbaV0gPSBwb2ludFxuICB9XG4gIGZvciAobGV0IGsgPSAwOyBrIDw9IGR1OyArK2spIHtcbiAgICBjb25zdCBwb2ludCA9IFB3W3NwYW4gLSBwXS5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKG5kZXJzW2tdWzBdKVxuXG4gICAgZm9yIChsZXQgaiA9IDE7IGogPD0gcDsgKytqKSB7XG4gICAgICBwb2ludC5hZGQoUHdbc3BhbiAtIHAgKyBqXS5jbG9uZSgpLm11bHRpcGx5U2NhbGFyKG5kZXJzW2tdW2pdKSlcbiAgICB9XG5cbiAgICBDS1trXSA9IHBvaW50XG4gIH1cblxuICBmb3IgKGxldCBrID0gZHUgKyAxOyBrIDw9IG5kICsgMTsgKytrKSB7XG4gICAgQ0tba10gPSBuZXcgVmVjdG9yNCgwLCAwLCAwKVxuICB9XG5cbiAgcmV0dXJuIENLXG59XG5cbi8qXG5DYWxjdWxhdGUgXCJLIG92ZXIgSVwiXG5yZXR1cm5zIGshLyhpIShrLWkpISlcbiovXG5leHBvcnQgZnVuY3Rpb24gY2FsY0tvdmVySShrOiBudW1iZXIsIGk6IG51bWJlcik6IG51bWJlciB7XG4gIGxldCBub20gPSAxXG5cbiAgZm9yIChsZXQgaiA9IDI7IGogPD0gazsgKytqKSB7XG4gICAgbm9tICo9IGpcbiAgfVxuXG4gIGxldCBkZW5vbSA9IDFcblxuICBmb3IgKGxldCBqID0gMjsgaiA8PSBpOyArK2opIHtcbiAgICBkZW5vbSAqPSBqXG4gIH1cblxuICBmb3IgKGxldCBqID0gMjsgaiA8PSBrIC0gaTsgKytqKSB7XG4gICAgZGVub20gKj0galxuICB9XG5cbiAgcmV0dXJuIG5vbSAvIGRlbm9tXG59XG5cbi8qXG5DYWxjdWxhdGUgZGVyaXZhdGl2ZXMgKDAtbmQpIG9mIHJhdGlvbmFsIGN1cnZlLiBTZWUgVGhlIE5VUkJTIEJvb2ssIHBhZ2UgMTI3LCBhbGdvcml0aG0gQTQuMi5cblBkZXJzIDogcmVzdWx0IG9mIGZ1bmN0aW9uIGNhbGNCU3BsaW5lRGVyaXZhdGl2ZXNcbnJldHVybnMgYXJyYXkgd2l0aCBkZXJpdmF0aXZlcyBmb3IgcmF0aW9uYWwgY3VydmUuXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGNSYXRpb25hbEN1cnZlRGVyaXZhdGl2ZXMoUGRlcnM6IFZlY3RvcjRbXSk6IFZlY3RvcjNbXSB7XG4gIGNvbnN0IG5kID0gUGRlcnMubGVuZ3RoXG4gIGNvbnN0IEFkZXJzID0gW11cbiAgY29uc3Qgd2RlcnMgPSBbXVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbmQ7ICsraSkge1xuICAgIGNvbnN0IHBvaW50ID0gUGRlcnNbaV1cbiAgICBBZGVyc1tpXSA9IG5ldyBWZWN0b3IzKHBvaW50LngsIHBvaW50LnksIHBvaW50LnopXG4gICAgd2RlcnNbaV0gPSBwb2ludC53XG4gIH1cblxuICBjb25zdCBDSyA9IFtdXG5cbiAgZm9yIChsZXQgayA9IDA7IGsgPCBuZDsgKytrKSB7XG4gICAgY29uc3QgdiA9IEFkZXJzW2tdLmNsb25lKClcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IGs7ICsraSkge1xuICAgICAgdi5zdWIoQ0tbayAtIGldLmNsb25lKCkubXVsdGlwbHlTY2FsYXIoY2FsY0tvdmVySShrLCBpKSAqIHdkZXJzW2ldKSlcbiAgICB9XG5cbiAgICBDS1trXSA9IHYuZGl2aWRlU2NhbGFyKHdkZXJzWzBdKVxuICB9XG5cbiAgcmV0dXJuIENLXG59XG5cbi8qXG5DYWxjdWxhdGUgTlVSQlMgY3VydmUgZGVyaXZhdGl2ZXMuIFNlZSBUaGUgTlVSQlMgQm9vaywgcGFnZSAxMjcsIGFsZ29yaXRobSBBNC4yLlxucCAgOiBkZWdyZWVcblUgIDoga25vdCB2ZWN0b3JcblAgIDogY29udHJvbCBwb2ludHMgaW4gaG9tb2dlbmVvdXMgc3BhY2VcbnUgIDogcGFyYW1ldHJpYyBwb2ludHNcbm5kIDogbnVtYmVyIG9mIGRlcml2YXRpdmVzXG5yZXR1cm5zIGFycmF5IHdpdGggZGVyaXZhdGl2ZXMuXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGNOVVJCU0Rlcml2YXRpdmVzKHA6IG51bWJlciwgVTogbnVtYmVyW10sIFA6IFZlY3RvcjRbXSwgdTogbnVtYmVyLCBuZDogbnVtYmVyKTogVmVjdG9yM1tdIHtcbiAgY29uc3QgUGRlcnMgPSBjYWxjQlNwbGluZURlcml2YXRpdmVzKHAsIFUsIFAsIHUsIG5kKVxuICByZXR1cm4gY2FsY1JhdGlvbmFsQ3VydmVEZXJpdmF0aXZlcyhQZGVycylcbn1cblxuLypcbkNhbGN1bGF0ZSByYXRpb25hbCBCLVNwbGluZSBzdXJmYWNlIHBvaW50LiBTZWUgVGhlIE5VUkJTIEJvb2ssIHBhZ2UgMTM0LCBhbGdvcml0aG0gQTQuMy5cbnAxLCBwMiA6IGRlZ3JlZXMgb2YgQi1TcGxpbmUgc3VyZmFjZVxuVTEsIFUyIDoga25vdCB2ZWN0b3JzXG5QICAgICAgOiBjb250cm9sIHBvaW50cyAoeCwgeSwgeiwgdylcbnUsIHYgICA6IHBhcmFtZXRyaWMgdmFsdWVzXG5yZXR1cm5zIHBvaW50IGZvciBnaXZlbiAodSwgdilcbiovXG5leHBvcnQgZnVuY3Rpb24gY2FsY1N1cmZhY2VQb2ludChcbiAgcDogbnVtYmVyLFxuICBxOiBudW1iZXIsXG4gIFU6IG51bWJlcltdLFxuICBWOiBudW1iZXJbXSxcbiAgUDogVmVjdG9yNFtdLFxuICB1OiBudW1iZXIsXG4gIHY6IG51bWJlcixcbiAgdGFyZ2V0OiBWZWN0b3IzXG4pIHtcbiAgY29uc3QgdXNwYW4gPSBmaW5kU3BhbihwLCB1LCBVKVxuICBjb25zdCB2c3BhbiA9IGZpbmRTcGFuKHEsIHYsIFYpXG4gIGNvbnN0IE51ID0gY2FsY0Jhc2lzRnVuY3Rpb25zKHVzcGFuLCB1LCBwLCBVKVxuICBjb25zdCBOdiA9IGNhbGNCYXNpc0Z1bmN0aW9ucyh2c3BhbiwgdiwgcSwgVilcbiAgY29uc3QgdGVtcCA9IFtdXG5cbiAgZm9yIChsZXQgbCA9IDA7IGwgPD0gcTsgKytsKSB7XG4gICAgdGVtcFtsXSA9IG5ldyBWZWN0b3I0KDAsIDAsIDAsIDApXG4gICAgZm9yIChsZXQgayA9IDA7IGsgPD0gcDsgKytrKSB7XG4gICAgICBjb25zdCBwb2ludCA9IFBbdXNwYW4gLSBwICsga11bdnNwYW4gLSBxICsgbF0uY2xvbmUoKVxuICAgICAgY29uc3QgdyA9IHBvaW50LndcbiAgICAgIHBvaW50LnggKj0gd1xuICAgICAgcG9pbnQueSAqPSB3XG4gICAgICBwb2ludC56ICo9IHdcbiAgICAgIHRlbXBbbF0uYWRkKHBvaW50Lm11bHRpcGx5U2NhbGFyKE51W2tdKSlcbiAgICB9XG4gIH1cblxuICBjb25zdCBTdyA9IG5ldyBWZWN0b3I0KDAsIDAsIDAsIDApXG4gIGZvciAobGV0IGwgPSAwOyBsIDw9IHE7ICsrbCkge1xuICAgIFN3LmFkZCh0ZW1wW2xdLm11bHRpcGx5U2NhbGFyKE52W2xdKSlcbiAgfVxuXG4gIFN3LmRpdmlkZVNjYWxhcihTdy53KVxuICB0YXJnZXQuc2V0KFN3LngsIFN3LnksIFN3LnopXG59XG4iLCJpbXBvcnQgeyBDdXJ2ZSwgVmVjdG9yMiwgVmVjdG9yMywgVmVjdG9yNCB9IGZyb20gJ3RocmVlJ1xuaW1wb3J0ICogYXMgTlVSQlNVdGlscyBmcm9tICcuL05VUkJTVXRpbHMnXG4vKipcbiAqIE5VUkJTIGN1cnZlIG9iamVjdFxuICpcbiAqIERlcml2ZXMgZnJvbSBDdXJ2ZSwgb3ZlcnJpZGluZyBnZXRQb2ludCBhbmQgZ2V0VGFuZ2VudC5cbiAqXG4gKiBJbXBsZW1lbnRhdGlvbiBpcyBiYXNlZCBvbiAoeCwgeSBbLCB6PTAgWywgdz0xXV0pIGNvbnRyb2wgcG9pbnRzIHdpdGggdz13ZWlnaHQuXG4gKlxuICoqL1xuXG5leHBvcnQgY2xhc3MgTlVSQlNDdXJ2ZSBleHRlbmRzIEN1cnZlPFZlY3RvcjM+IHtcbiAgZGVncmVlOiBudW1iZXJcbiAga25vdHM6IG51bWJlcltdXG4gIGNvbnRyb2xQb2ludHM6IGFueVtdXG4gIHN0YXJ0S25vdDogbnVtYmVyXG4gIGVuZEtub3Q6IG51bWJlclxuXG4gIGNvbnN0cnVjdG9yKGRlZ3JlZTogbnVtYmVyLCBrbm90czogbnVtYmVyW10sIGNvbnRyb2xQb2ludHM6IFZlY3RvcjRbXSwgc3RhcnRLbm90OiBudW1iZXIsIGVuZEtub3Q6IG51bWJlcikge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLmRlZ3JlZSA9IGRlZ3JlZVxuICAgIHRoaXMua25vdHMgPSBrbm90c1xuICAgIHRoaXMuY29udHJvbFBvaW50cyA9IFtdXG4gICAgLy8gVXNlZCBieSBwZXJpb2RpYyBOVVJCUyB0byByZW1vdmUgaGlkZGVuIHNwYW5zXG4gICAgdGhpcy5zdGFydEtub3QgPSBzdGFydEtub3QgfHwgMFxuICAgIHRoaXMuZW5kS25vdCA9IGVuZEtub3QgfHwgdGhpcy5rbm90cy5sZW5ndGggLSAxXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb250cm9sUG9pbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAvLyBlbnN1cmUgVmVjdG9yNCBmb3IgY29udHJvbCBwb2ludHNcbiAgICAgIGNvbnN0IHBvaW50ID0gY29udHJvbFBvaW50c1tpXSBhcyBWZWN0b3I0XG4gICAgICB0aGlzLmNvbnRyb2xQb2ludHNbaV0gPSBuZXcgVmVjdG9yNChwb2ludC54LCBwb2ludC55LCBwb2ludC56LCBwb2ludC53KVxuICAgIH1cbiAgfVxuXG4gIGdldFBvaW50KHQsIG9wdGlvbmFsVGFyZ2V0Pykge1xuICAgIGNvbnN0IHBvaW50ID0gb3B0aW9uYWxUYXJnZXQgfHwgbmV3IFZlY3RvcjMoKVxuXG4gICAgY29uc3QgdSA9IHRoaXMua25vdHNbdGhpcy5zdGFydEtub3RdICsgdCAqICh0aGlzLmtub3RzW3RoaXMuZW5kS25vdF0gLSB0aGlzLmtub3RzW3RoaXMuc3RhcnRLbm90XSkgLy8gbGluZWFyIG1hcHBpbmcgdC0+dVxuXG4gICAgLy8gZm9sbG93aW5nIHJlc3VsdHMgaW4gKHd4LCB3eSwgd3osIHcpIGhvbW9nZW5lb3VzIHBvaW50XG4gICAgY29uc3QgaHBvaW50OiBhbnkgPSBOVVJCU1V0aWxzLmNhbGNCU3BsaW5lUG9pbnQodGhpcy5kZWdyZWUsIHRoaXMua25vdHMsIHRoaXMuY29udHJvbFBvaW50cywgdSlcblxuICAgIGlmIChocG9pbnQudyAhPSAxLjApIHtcbiAgICAgIC8vIHByb2plY3QgdG8gM0Qgc3BhY2U6ICh3eCwgd3ksIHd6LCB3KSAtPiAoeCwgeSwgeiwgMSlcbiAgICAgIGhwb2ludC5kaXZpZGVTY2FsYXIoaHBvaW50LncpXG4gICAgfVxuXG4gICAgcmV0dXJuIHBvaW50LnNldChocG9pbnQueCwgaHBvaW50LnksIGhwb2ludC56KVxuICB9XG5cbiAgZ2V0VGFuZ2VudCh0LCBvcHRpb25hbFRhcmdldD8pIHtcbiAgICBjb25zdCB0YW5nZW50ID0gb3B0aW9uYWxUYXJnZXQgfHwgbmV3IFZlY3RvcjMoKVxuXG4gICAgY29uc3QgdSA9IHRoaXMua25vdHNbMF0gKyB0ICogKHRoaXMua25vdHNbdGhpcy5rbm90cy5sZW5ndGggLSAxXSAtIHRoaXMua25vdHNbMF0pXG4gICAgY29uc3QgZGVycyA9IE5VUkJTVXRpbHMuY2FsY05VUkJTRGVyaXZhdGl2ZXModGhpcy5kZWdyZWUsIHRoaXMua25vdHMsIHRoaXMuY29udHJvbFBvaW50cywgdSwgMSlcbiAgICB0YW5nZW50LmNvcHkoZGVyc1sxXSkubm9ybWFsaXplKClcblxuICAgIHJldHVybiB0YW5nZW50XG4gIH1cbn1cbiIsIi8qKiBAbGljZW5zZSB6bGliLmpzIDIwMTIgLSBpbWF5YSBbIGh0dHBzOi8vZ2l0aHViLmNvbS9pbWF5YS96bGliLmpzIF0gVGhlIE1JVCBMaWNlbnNlICovdmFyIG1vZD17fSwgbD12b2lkIDAsYWE9bW9kO2Z1bmN0aW9uIHIoYyxkKXt2YXIgYT1jLnNwbGl0KFwiLlwiKSxiPWFhOyEoYVswXWluIGIpJiZiLmV4ZWNTY3JpcHQmJmIuZXhlY1NjcmlwdChcInZhciBcIithWzBdKTtmb3IodmFyIGU7YS5sZW5ndGgmJihlPWEuc2hpZnQoKSk7KSFhLmxlbmd0aCYmZCE9PWw/YltlXT1kOmI9YltlXT9iW2VdOmJbZV09e319O3ZhciB0PVwidW5kZWZpbmVkXCIhPT10eXBlb2YgVWludDhBcnJheSYmXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBVaW50MTZBcnJheSYmXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBVaW50MzJBcnJheSYmXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBEYXRhVmlldztmdW5jdGlvbiB2KGMpe3ZhciBkPWMubGVuZ3RoLGE9MCxiPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSxlLGYsZyxoLGssbSxuLHAscyx4O2ZvcihwPTA7cDxkOysrcCljW3BdPmEmJihhPWNbcF0pLGNbcF08YiYmKGI9Y1twXSk7ZT0xPDxhO2Y9bmV3ICh0P1VpbnQzMkFycmF5OkFycmF5KShlKTtnPTE7aD0wO2ZvcihrPTI7Zzw9YTspe2ZvcihwPTA7cDxkOysrcClpZihjW3BdPT09Zyl7bT0wO249aDtmb3Iocz0wO3M8ZzsrK3MpbT1tPDwxfG4mMSxuPj49MTt4PWc8PDE2fHA7Zm9yKHM9bTtzPGU7cys9aylmW3NdPXg7KytofSsrZztoPDw9MTtrPDw9MX1yZXR1cm5bZixhLGJdfTtmdW5jdGlvbiB3KGMsZCl7dGhpcy5nPVtdO3RoaXMuaD0zMjc2ODt0aGlzLmQ9dGhpcy5mPXRoaXMuYT10aGlzLmw9MDt0aGlzLmlucHV0PXQ/bmV3IFVpbnQ4QXJyYXkoYyk6Yzt0aGlzLm09ITE7dGhpcy5pPXk7dGhpcy5yPSExO2lmKGR8fCEoZD17fSkpZC5pbmRleCYmKHRoaXMuYT1kLmluZGV4KSxkLmJ1ZmZlclNpemUmJih0aGlzLmg9ZC5idWZmZXJTaXplKSxkLmJ1ZmZlclR5cGUmJih0aGlzLmk9ZC5idWZmZXJUeXBlKSxkLnJlc2l6ZSYmKHRoaXMucj1kLnJlc2l6ZSk7c3dpdGNoKHRoaXMuaSl7Y2FzZSBBOnRoaXMuYj0zMjc2ODt0aGlzLmM9bmV3ICh0P1VpbnQ4QXJyYXk6QXJyYXkpKDMyNzY4K3RoaXMuaCsyNTgpO2JyZWFrO2Nhc2UgeTp0aGlzLmI9MDt0aGlzLmM9bmV3ICh0P1VpbnQ4QXJyYXk6QXJyYXkpKHRoaXMuaCk7dGhpcy5lPXRoaXMuejt0aGlzLm49dGhpcy52O3RoaXMuaj10aGlzLnc7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcImludmFsaWQgaW5mbGF0ZSBtb2RlXCIpO1xufX12YXIgQT0wLHk9MSxCPXt0OkEsczp5fTtcbncucHJvdG90eXBlLms9ZnVuY3Rpb24oKXtmb3IoOyF0aGlzLm07KXt2YXIgYz1DKHRoaXMsMyk7YyYxJiYodGhpcy5tPSEwKTtjPj4+PTE7c3dpdGNoKGMpe2Nhc2UgMDp2YXIgZD10aGlzLmlucHV0LGE9dGhpcy5hLGI9dGhpcy5jLGU9dGhpcy5iLGY9ZC5sZW5ndGgsZz1sLGg9bCxrPWIubGVuZ3RoLG09bDt0aGlzLmQ9dGhpcy5mPTA7aWYoYSsxPj1mKXRocm93IEVycm9yKFwiaW52YWxpZCB1bmNvbXByZXNzZWQgYmxvY2sgaGVhZGVyOiBMRU5cIik7Zz1kW2ErK118ZFthKytdPDw4O2lmKGErMT49Zil0aHJvdyBFcnJvcihcImludmFsaWQgdW5jb21wcmVzc2VkIGJsb2NrIGhlYWRlcjogTkxFTlwiKTtoPWRbYSsrXXxkW2ErK108PDg7aWYoZz09PX5oKXRocm93IEVycm9yKFwiaW52YWxpZCB1bmNvbXByZXNzZWQgYmxvY2sgaGVhZGVyOiBsZW5ndGggdmVyaWZ5XCIpO2lmKGErZz5kLmxlbmd0aCl0aHJvdyBFcnJvcihcImlucHV0IGJ1ZmZlciBpcyBicm9rZW5cIik7c3dpdGNoKHRoaXMuaSl7Y2FzZSBBOmZvcig7ZStcbmc+Yi5sZW5ndGg7KXttPWstZTtnLT1tO2lmKHQpYi5zZXQoZC5zdWJhcnJheShhLGErbSksZSksZSs9bSxhKz1tO2Vsc2UgZm9yKDttLS07KWJbZSsrXT1kW2ErK107dGhpcy5iPWU7Yj10aGlzLmUoKTtlPXRoaXMuYn1icmVhaztjYXNlIHk6Zm9yKDtlK2c+Yi5sZW5ndGg7KWI9dGhpcy5lKHtwOjJ9KTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiaW52YWxpZCBpbmZsYXRlIG1vZGVcIik7fWlmKHQpYi5zZXQoZC5zdWJhcnJheShhLGErZyksZSksZSs9ZyxhKz1nO2Vsc2UgZm9yKDtnLS07KWJbZSsrXT1kW2ErK107dGhpcy5hPWE7dGhpcy5iPWU7dGhpcy5jPWI7YnJlYWs7Y2FzZSAxOnRoaXMuaihiYSxjYSk7YnJlYWs7Y2FzZSAyOmZvcih2YXIgbj1DKHRoaXMsNSkrMjU3LHA9Qyh0aGlzLDUpKzEscz1DKHRoaXMsNCkrNCx4PW5ldyAodD9VaW50OEFycmF5OkFycmF5KShELmxlbmd0aCksUz1sLFQ9bCxVPWwsdT1sLE09bCxGPWwsej1sLHE9bCxWPWwscT0wO3E8czsrK3EpeFtEW3FdXT1cbkModGhpcywzKTtpZighdCl7cT1zO2ZvcihzPXgubGVuZ3RoO3E8czsrK3EpeFtEW3FdXT0wfVM9dih4KTt1PW5ldyAodD9VaW50OEFycmF5OkFycmF5KShuK3ApO3E9MDtmb3IoVj1uK3A7cTxWOylzd2l0Y2goTT1FKHRoaXMsUyksTSl7Y2FzZSAxNjpmb3Ioej0zK0ModGhpcywyKTt6LS07KXVbcSsrXT1GO2JyZWFrO2Nhc2UgMTc6Zm9yKHo9MytDKHRoaXMsMyk7ei0tOyl1W3ErK109MDtGPTA7YnJlYWs7Y2FzZSAxODpmb3Ioej0xMStDKHRoaXMsNyk7ei0tOyl1W3ErK109MDtGPTA7YnJlYWs7ZGVmYXVsdDpGPXVbcSsrXT1NfVQ9dD92KHUuc3ViYXJyYXkoMCxuKSk6dih1LnNsaWNlKDAsbikpO1U9dD92KHUuc3ViYXJyYXkobikpOnYodS5zbGljZShuKSk7dGhpcy5qKFQsVSk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcInVua25vd24gQlRZUEU6IFwiK2MpO319cmV0dXJuIHRoaXMubigpfTtcbnZhciBHPVsxNiwxNywxOCwwLDgsNyw5LDYsMTAsNSwxMSw0LDEyLDMsMTMsMiwxNCwxLDE1XSxEPXQ/bmV3IFVpbnQxNkFycmF5KEcpOkcsSD1bMyw0LDUsNiw3LDgsOSwxMCwxMSwxMywxNSwxNywxOSwyMywyNywzMSwzNSw0Myw1MSw1OSw2Nyw4Myw5OSwxMTUsMTMxLDE2MywxOTUsMjI3LDI1OCwyNTgsMjU4XSxJPXQ/bmV3IFVpbnQxNkFycmF5KEgpOkgsSj1bMCwwLDAsMCwwLDAsMCwwLDEsMSwxLDEsMiwyLDIsMiwzLDMsMywzLDQsNCw0LDQsNSw1LDUsNSwwLDAsMF0sSz10P25ldyBVaW50OEFycmF5KEopOkosTD1bMSwyLDMsNCw1LDcsOSwxMywxNywyNSwzMyw0OSw2NSw5NywxMjksMTkzLDI1NywzODUsNTEzLDc2OSwxMDI1LDE1MzcsMjA0OSwzMDczLDQwOTcsNjE0NSw4MTkzLDEyMjg5LDE2Mzg1LDI0NTc3XSxkYT10P25ldyBVaW50MTZBcnJheShMKTpMLGVhPVswLDAsMCwwLDEsMSwyLDIsMywzLDQsNCw1LDUsNiw2LDcsNyw4LDgsOSw5LDEwLDEwLDExLDExLDEyLDEyLFxuMTMsMTNdLE49dD9uZXcgVWludDhBcnJheShlYSk6ZWEsTz1uZXcgKHQ/VWludDhBcnJheTpBcnJheSkoMjg4KSxQLGZhO1A9MDtmb3IoZmE9Ty5sZW5ndGg7UDxmYTsrK1ApT1tQXT0xNDM+PVA/ODoyNTU+PVA/OToyNzk+PVA/Nzo4O3ZhciBiYT12KE8pLFE9bmV3ICh0P1VpbnQ4QXJyYXk6QXJyYXkpKDMwKSxSLGdhO1I9MDtmb3IoZ2E9US5sZW5ndGg7UjxnYTsrK1IpUVtSXT01O3ZhciBjYT12KFEpO2Z1bmN0aW9uIEMoYyxkKXtmb3IodmFyIGE9Yy5mLGI9Yy5kLGU9Yy5pbnB1dCxmPWMuYSxnPWUubGVuZ3RoLGg7YjxkOyl7aWYoZj49Zyl0aHJvdyBFcnJvcihcImlucHV0IGJ1ZmZlciBpcyBicm9rZW5cIik7YXw9ZVtmKytdPDxiO2IrPTh9aD1hJigxPDxkKS0xO2MuZj1hPj4+ZDtjLmQ9Yi1kO2MuYT1mO3JldHVybiBofVxuZnVuY3Rpb24gRShjLGQpe2Zvcih2YXIgYT1jLmYsYj1jLmQsZT1jLmlucHV0LGY9Yy5hLGc9ZS5sZW5ndGgsaD1kWzBdLGs9ZFsxXSxtLG47YjxrJiYhKGY+PWcpOylhfD1lW2YrK108PGIsYis9ODttPWhbYSYoMTw8ayktMV07bj1tPj4+MTY7aWYobj5iKXRocm93IEVycm9yKFwiaW52YWxpZCBjb2RlIGxlbmd0aDogXCIrbik7Yy5mPWE+Pm47Yy5kPWItbjtjLmE9ZjtyZXR1cm4gbSY2NTUzNX1cbncucHJvdG90eXBlLmo9ZnVuY3Rpb24oYyxkKXt2YXIgYT10aGlzLmMsYj10aGlzLmI7dGhpcy5vPWM7Zm9yKHZhciBlPWEubGVuZ3RoLTI1OCxmLGcsaCxrOzI1NiE9PShmPUUodGhpcyxjKSk7KWlmKDI1Nj5mKWI+PWUmJih0aGlzLmI9YixhPXRoaXMuZSgpLGI9dGhpcy5iKSxhW2IrK109ZjtlbHNle2c9Zi0yNTc7az1JW2ddOzA8S1tnXSYmKGsrPUModGhpcyxLW2ddKSk7Zj1FKHRoaXMsZCk7aD1kYVtmXTswPE5bZl0mJihoKz1DKHRoaXMsTltmXSkpO2I+PWUmJih0aGlzLmI9YixhPXRoaXMuZSgpLGI9dGhpcy5iKTtmb3IoO2stLTspYVtiXT1hW2IrKy1oXX1mb3IoOzg8PXRoaXMuZDspdGhpcy5kLT04LHRoaXMuYS0tO3RoaXMuYj1ifTtcbncucHJvdG90eXBlLnc9ZnVuY3Rpb24oYyxkKXt2YXIgYT10aGlzLmMsYj10aGlzLmI7dGhpcy5vPWM7Zm9yKHZhciBlPWEubGVuZ3RoLGYsZyxoLGs7MjU2IT09KGY9RSh0aGlzLGMpKTspaWYoMjU2PmYpYj49ZSYmKGE9dGhpcy5lKCksZT1hLmxlbmd0aCksYVtiKytdPWY7ZWxzZXtnPWYtMjU3O2s9SVtnXTswPEtbZ10mJihrKz1DKHRoaXMsS1tnXSkpO2Y9RSh0aGlzLGQpO2g9ZGFbZl07MDxOW2ZdJiYoaCs9Qyh0aGlzLE5bZl0pKTtiK2s+ZSYmKGE9dGhpcy5lKCksZT1hLmxlbmd0aCk7Zm9yKDtrLS07KWFbYl09YVtiKystaF19Zm9yKDs4PD10aGlzLmQ7KXRoaXMuZC09OCx0aGlzLmEtLTt0aGlzLmI9Yn07XG53LnByb3RvdHlwZS5lPWZ1bmN0aW9uKCl7dmFyIGM9bmV3ICh0P1VpbnQ4QXJyYXk6QXJyYXkpKHRoaXMuYi0zMjc2OCksZD10aGlzLmItMzI3NjgsYSxiLGU9dGhpcy5jO2lmKHQpYy5zZXQoZS5zdWJhcnJheSgzMjc2OCxjLmxlbmd0aCkpO2Vsc2V7YT0wO2ZvcihiPWMubGVuZ3RoO2E8YjsrK2EpY1thXT1lW2ErMzI3NjhdfXRoaXMuZy5wdXNoKGMpO3RoaXMubCs9Yy5sZW5ndGg7aWYodCllLnNldChlLnN1YmFycmF5KGQsZCszMjc2OCkpO2Vsc2UgZm9yKGE9MDszMjc2OD5hOysrYSllW2FdPWVbZCthXTt0aGlzLmI9MzI3Njg7cmV0dXJuIGV9O1xudy5wcm90b3R5cGUuej1mdW5jdGlvbihjKXt2YXIgZCxhPXRoaXMuaW5wdXQubGVuZ3RoL3RoaXMuYSsxfDAsYixlLGYsZz10aGlzLmlucHV0LGg9dGhpcy5jO2MmJihcIm51bWJlclwiPT09dHlwZW9mIGMucCYmKGE9Yy5wKSxcIm51bWJlclwiPT09dHlwZW9mIGMudSYmKGErPWMudSkpOzI+YT8oYj0oZy5sZW5ndGgtdGhpcy5hKS90aGlzLm9bMl0sZj0yNTgqKGIvMil8MCxlPWY8aC5sZW5ndGg/aC5sZW5ndGgrZjpoLmxlbmd0aDw8MSk6ZT1oLmxlbmd0aCphO3Q/KGQ9bmV3IFVpbnQ4QXJyYXkoZSksZC5zZXQoaCkpOmQ9aDtyZXR1cm4gdGhpcy5jPWR9O1xudy5wcm90b3R5cGUubj1mdW5jdGlvbigpe3ZhciBjPTAsZD10aGlzLmMsYT10aGlzLmcsYixlPW5ldyAodD9VaW50OEFycmF5OkFycmF5KSh0aGlzLmwrKHRoaXMuYi0zMjc2OCkpLGYsZyxoLGs7aWYoMD09PWEubGVuZ3RoKXJldHVybiB0P3RoaXMuYy5zdWJhcnJheSgzMjc2OCx0aGlzLmIpOnRoaXMuYy5zbGljZSgzMjc2OCx0aGlzLmIpO2Y9MDtmb3IoZz1hLmxlbmd0aDtmPGc7KytmKXtiPWFbZl07aD0wO2ZvcihrPWIubGVuZ3RoO2g8azsrK2gpZVtjKytdPWJbaF19Zj0zMjc2ODtmb3IoZz10aGlzLmI7ZjxnOysrZillW2MrK109ZFtmXTt0aGlzLmc9W107cmV0dXJuIHRoaXMuYnVmZmVyPWV9O1xudy5wcm90b3R5cGUudj1mdW5jdGlvbigpe3ZhciBjLGQ9dGhpcy5iO3Q/dGhpcy5yPyhjPW5ldyBVaW50OEFycmF5KGQpLGMuc2V0KHRoaXMuYy5zdWJhcnJheSgwLGQpKSk6Yz10aGlzLmMuc3ViYXJyYXkoMCxkKToodGhpcy5jLmxlbmd0aD5kJiYodGhpcy5jLmxlbmd0aD1kKSxjPXRoaXMuYyk7cmV0dXJuIHRoaXMuYnVmZmVyPWN9O2Z1bmN0aW9uIFcoYyxkKXt2YXIgYSxiO3RoaXMuaW5wdXQ9Yzt0aGlzLmE9MDtpZihkfHwhKGQ9e30pKWQuaW5kZXgmJih0aGlzLmE9ZC5pbmRleCksZC52ZXJpZnkmJih0aGlzLkE9ZC52ZXJpZnkpO2E9Y1t0aGlzLmErK107Yj1jW3RoaXMuYSsrXTtzd2l0Y2goYSYxNSl7Y2FzZSBoYTp0aGlzLm1ldGhvZD1oYTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwidW5zdXBwb3J0ZWQgY29tcHJlc3Npb24gbWV0aG9kXCIpO31pZigwIT09KChhPDw4KStiKSUzMSl0aHJvdyBFcnJvcihcImludmFsaWQgZmNoZWNrIGZsYWc6XCIrKChhPDw4KStiKSUzMSk7aWYoYiYzMil0aHJvdyBFcnJvcihcImZkaWN0IGZsYWcgaXMgbm90IHN1cHBvcnRlZFwiKTt0aGlzLnE9bmV3IHcoYyx7aW5kZXg6dGhpcy5hLGJ1ZmZlclNpemU6ZC5idWZmZXJTaXplLGJ1ZmZlclR5cGU6ZC5idWZmZXJUeXBlLHJlc2l6ZTpkLnJlc2l6ZX0pfVxuVy5wcm90b3R5cGUuaz1mdW5jdGlvbigpe3ZhciBjPXRoaXMuaW5wdXQsZCxhO2Q9dGhpcy5xLmsoKTt0aGlzLmE9dGhpcy5xLmE7aWYodGhpcy5BKXthPShjW3RoaXMuYSsrXTw8MjR8Y1t0aGlzLmErK108PDE2fGNbdGhpcy5hKytdPDw4fGNbdGhpcy5hKytdKT4+PjA7dmFyIGI9ZDtpZihcInN0cmluZ1wiPT09dHlwZW9mIGIpe3ZhciBlPWIuc3BsaXQoXCJcIiksZixnO2Y9MDtmb3IoZz1lLmxlbmd0aDtmPGc7ZisrKWVbZl09KGVbZl0uY2hhckNvZGVBdCgwKSYyNTUpPj4+MDtiPWV9Zm9yKHZhciBoPTEsaz0wLG09Yi5sZW5ndGgsbixwPTA7MDxtOyl7bj0xMDI0PG0/MTAyNDptO20tPW47ZG8gaCs9YltwKytdLGsrPWg7d2hpbGUoLS1uKTtoJT02NTUyMTtrJT02NTUyMX1pZihhIT09KGs8PDE2fGgpPj4+MCl0aHJvdyBFcnJvcihcImludmFsaWQgYWRsZXItMzIgY2hlY2tzdW1cIik7fXJldHVybiBkfTt2YXIgaGE9ODtyKFwiWmxpYi5JbmZsYXRlXCIsVyk7cihcIlpsaWIuSW5mbGF0ZS5wcm90b3R5cGUuZGVjb21wcmVzc1wiLFcucHJvdG90eXBlLmspO3ZhciBYPXtBREFQVElWRTpCLnMsQkxPQ0s6Qi50fSxZLFosJCxpYTtpZihPYmplY3Qua2V5cylZPU9iamVjdC5rZXlzKFgpO2Vsc2UgZm9yKFogaW4gWT1bXSwkPTAsWClZWyQrK109WjskPTA7Zm9yKGlhPVkubGVuZ3RoOyQ8aWE7KyskKVo9WVskXSxyKFwiWmxpYi5JbmZsYXRlLkJ1ZmZlclR5cGUuXCIrWixYW1pdKTtcbnZhciBJbmZsYXRlPW1vZC5abGliLkluZmxhdGU7XG5leHBvcnQgeyBJbmZsYXRlIH07XG4iLCJpbXBvcnQge1xuICBRdWF0ZXJuaW9uLFxuICBBbWJpZW50TGlnaHQsXG4gIEFuaW1hdGlvbkNsaXAsXG4gIEJvbmUsXG4gIEJ1ZmZlckF0dHJpYnV0ZSxcbiAgQnVmZmVyR2VvbWV0cnksXG4gIENsYW1wVG9FZGdlV3JhcHBpbmcsXG4gIENvbG9yLFxuICBEZWZhdWx0TG9hZGluZ01hbmFnZXIsXG4gIE1hdGhVdGlscyxcbiAgRGlyZWN0aW9uYWxMaWdodCxcbiAgRXF1aXJlY3Rhbmd1bGFyUmVmbGVjdGlvbk1hcHBpbmcsXG4gIEV1bGVyLFxuICBGaWxlTG9hZGVyLFxuICBGbG9hdDMyQnVmZmVyQXR0cmlidXRlLFxuICBHcm91cCxcbiAgTGluZSxcbiAgTGluZUJhc2ljTWF0ZXJpYWwsXG4gIExvYWRlcixcbiAgTG9hZGVyVXRpbHMsXG4gIE1hdHJpeDMsXG4gIE1hdHJpeDQsXG4gIE1lc2gsXG4gIE1lc2hMYW1iZXJ0TWF0ZXJpYWwsXG4gIE1lc2hQaG9uZ01hdGVyaWFsLFxuICBOdW1iZXJLZXlmcmFtZVRyYWNrLFxuICBPYmplY3QzRCxcbiAgT3J0aG9ncmFwaGljQ2FtZXJhLFxuICBQZXJzcGVjdGl2ZUNhbWVyYSxcbiAgUG9pbnRMaWdodCxcbiAgUHJvcGVydHlCaW5kaW5nLFxuICBRdWF0ZXJuaW9uS2V5ZnJhbWVUcmFjayxcbiAgUmVwZWF0V3JhcHBpbmcsXG4gIFNrZWxldG9uLFxuICBTa2lubmVkTWVzaCxcbiAgU3BvdExpZ2h0LFxuICBUZXh0dXJlLFxuICBUZXh0dXJlTG9hZGVyLFxuICBVaW50MTZCdWZmZXJBdHRyaWJ1dGUsXG4gIFZlY3RvcjMsXG4gIFZlY3RvcjQsXG4gIFZlY3RvcktleWZyYW1lVHJhY2ssXG4gIExvYWRpbmdNYW5hZ2VyXG59IGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgVEdBTG9hZGVyIH0gZnJvbSAnLi4vdGdhL1RHQUxvYWRlcidcbmltcG9ydCB7IE5VUkJTQ3VydmUgfSBmcm9tICcuL05VUkJTQ3VydmUnXG5pbXBvcnQgKiBhcyBabGliIGZyb20gJy4vaW5mbGF0ZS5tb2R1bGUubWluLmpzJ1xuXG5leHBvcnQgY2xhc3MgRkJYTG9hZGVyIHtcbiAgc3RhdGljIGZieFRyZWU6IGFueVxuICBzdGF0aWMgc2NlbmVHcmFwaDogYW55XG4gIHN0YXRpYyBjb25uZWN0aW9uczogYW55XG4gIHN0YXRpYyBzZXJ2ZXJVcmw6IHN0cmluZ1xuICBjcm9zc09yaWdpbjogYW55XG4gIHJlc291cmNlUGF0aDogYW55XG4gIHBhdGg6IGFueVxuICBtYW5hZ2VyOiBhbnlcblxuICBjb25zdHJ1Y3RvcihtYW5hZ2VyPzogTG9hZGluZ01hbmFnZXIpIHtcbiAgICB0aGlzLm1hbmFnZXIgPSBtYW5hZ2VyIHx8IERlZmF1bHRMb2FkaW5nTWFuYWdlclxuICB9XG5cbiAgbG9hZCh1cmwsIG9uTG9hZCwgb25Qcm9ncmVzcz8sIG9uRXJyb3I/KSB7XG4gICAgLy8gY29uc3QgcGF0aCA9XG4gICAgLy8gICB0aGlzLnBhdGggPT09IHVuZGVmaW5lZFxuICAgIC8vICAgICA/IExvYWRlclV0aWxzLmV4dHJhY3RVcmxCYXNlKHVybClcbiAgICAvLyAgICAgOiB0aGlzLnBhdGhcblxuICAgIGNvbnN0IHVybFBvcCA9IHVybC5zcGxpdCgnLycpLnBvcCgpXG5cbiAgICBGQlhMb2FkZXIuc2VydmVyVXJsID0gdXJsLnNwbGl0KHVybFBvcClbMF1cblxuICAgIC8vIHRocmVlIOyXkOyEnCBwYXRoICsgdXJsIOuhnCDtmLjstpztlahcbiAgICBjb25zdCBwYXRoID0gJydcblxuICAgIGNvbnN0IGxvYWRlciA9IG5ldyBGaWxlTG9hZGVyKHRoaXMubWFuYWdlcilcbiAgICBsb2FkZXIuc2V0UGF0aChwYXRoKVxuICAgIGxvYWRlci5zZXRSZXNwb25zZVR5cGUoJ2FycmF5YnVmZmVyJylcblxuICAgIGxvYWRlci5sb2FkKFxuICAgICAgdXJsLFxuICAgICAgKGJ1ZmZlcikgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIG9uTG9hZCh0aGlzLnBhcnNlKGJ1ZmZlciwgcGF0aCkpXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAob25FcnJvcikgb25FcnJvcihlcnJvcilcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5pdGVtRXJyb3IodXJsKVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvYWQgZXJyb3InLCBlcnJvcilcbiAgICAgICAgICB9LCAwKVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25Qcm9ncmVzcyxcbiAgICAgIG9uRXJyb3JcbiAgICApXG4gIH1cblxuICBzZXRQYXRoKHZhbHVlKSB7XG4gICAgdGhpcy5wYXRoID0gdmFsdWVcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgc2V0UmVzb3VyY2VQYXRoKHZhbHVlKSB7XG4gICAgdGhpcy5yZXNvdXJjZVBhdGggPSB2YWx1ZVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBzZXRDcm9zc09yaWdpbih2YWx1ZSkge1xuICAgIHRoaXMuY3Jvc3NPcmlnaW4gPSB2YWx1ZVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBwYXJzZShGQlhCdWZmZXIsIHBhdGgpIHtcbiAgICBpZiAoaXNGYnhGb3JtYXRCaW5hcnkoRkJYQnVmZmVyKSkge1xuICAgICAgRkJYTG9hZGVyLmZieFRyZWUgPSBuZXcgQmluYXJ5UGFyc2VyKCkucGFyc2UoRkJYQnVmZmVyKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBGQlhUZXh0ID0gY29udmVydEFycmF5QnVmZmVyVG9TdHJpbmcoRkJYQnVmZmVyKVxuXG4gICAgICBpZiAoIWlzRmJ4Rm9ybWF0QVNDSUkoRkJYVGV4dCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGQlhMb2FkZXI6IFVua25vd24gZm9ybWF0LicpXG4gICAgICB9XG5cbiAgICAgIGlmIChnZXRGYnhWZXJzaW9uKEZCWFRleHQpIDwgNzAwMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZCWExvYWRlcjogRkJYIHZlcnNpb24gbm90IHN1cHBvcnRlZCwgRmlsZVZlcnNpb246ICcgKyBnZXRGYnhWZXJzaW9uKEZCWFRleHQpKVxuICAgICAgfVxuXG4gICAgICBGQlhMb2FkZXIuZmJ4VHJlZSA9IG5ldyBUZXh0UGFyc2VyKCkucGFyc2UoRkJYVGV4dClcbiAgICB9XG5cbiAgICBjb25zdCB0ZXh0dXJlTG9hZGVyID0gbmV3IFRleHR1cmVMb2FkZXIodGhpcy5tYW5hZ2VyKVxuICAgICAgLnNldFBhdGgodGhpcy5yZXNvdXJjZVBhdGggfHwgcGF0aClcbiAgICAgIC5zZXRDcm9zc09yaWdpbih0aGlzLmNyb3NzT3JpZ2luKVxuXG4gICAgcmV0dXJuIG5ldyBGQlhUcmVlUGFyc2VyKHRleHR1cmVMb2FkZXIpLnBhcnNlKEZCWExvYWRlci5mYnhUcmVlKVxuICB9XG59XG5cbmludGVyZmFjZSBGQlhUcmVlUGFyc2VySW50ZXJmYWNlIHtcbiAgdGV4dHVyZUxvYWRlcjogYW55XG59XG5cbmNsYXNzIEZCWFRyZWVQYXJzZXI8RkJYVHJlZVBhcnNlckludGVyZmFjZT4ge1xuICB0ZXh0dXJlTG9hZGVyOiBhbnlcbiAgY29uc3RydWN0b3IodGV4dHVyZUxvYWRlcikge1xuICAgIHRoaXMudGV4dHVyZUxvYWRlciA9IHRleHR1cmVMb2FkZXJcbiAgfVxuXG4gIHBhcnNlKGZieFRyZWUpIHtcbiAgICBGQlhMb2FkZXIuY29ubmVjdGlvbnMgPSB0aGlzLnBhcnNlQ29ubmVjdGlvbnMoKVxuXG4gICAgY29uc3QgaW1hZ2VzID0gdGhpcy5wYXJzZUltYWdlcygpXG4gICAgY29uc3QgdGV4dHVyZXMgPSB0aGlzLnBhcnNlVGV4dHVyZXMoaW1hZ2VzKVxuICAgIGNvbnN0IG1hdGVyaWFscyA9IHRoaXMucGFyc2VNYXRlcmlhbHModGV4dHVyZXMpXG4gICAgY29uc3QgZGVmb3JtZXJzID0gdGhpcy5wYXJzZURlZm9ybWVycygpXG4gICAgY29uc3QgZ2VvbWV0cnlNYXAgPSBuZXcgR2VvbWV0cnlQYXJzZXIoKS5wYXJzZShkZWZvcm1lcnMpXG5cbiAgICB0aGlzLnBhcnNlU2NlbmUoZGVmb3JtZXJzLCBnZW9tZXRyeU1hcCwgbWF0ZXJpYWxzKVxuXG4gICAgcmV0dXJuIEZCWExvYWRlci5zY2VuZUdyYXBoXG4gIH1cblxuICBwYXJzZUNvbm5lY3Rpb25zKCkge1xuICAgIGNvbnN0IGNvbm5lY3Rpb25NYXAgPSBuZXcgTWFwKClcblxuICAgIGlmICgnQ29ubmVjdGlvbnMnIGluIEZCWExvYWRlci5mYnhUcmVlKSB7XG4gICAgICBjb25zdCByYXdDb25uZWN0aW9ucyA9IEZCWExvYWRlci5mYnhUcmVlLkNvbm5lY3Rpb25zLmNvbm5lY3Rpb25zXG5cbiAgICAgIHJhd0Nvbm5lY3Rpb25zLmZvckVhY2goKHJhd0Nvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgY29uc3QgZnJvbUlEID0gcmF3Q29ubmVjdGlvblswXVxuICAgICAgICBjb25zdCB0b0lEID0gcmF3Q29ubmVjdGlvblsxXVxuICAgICAgICBjb25zdCByZWxhdGlvbnNoaXAgPSByYXdDb25uZWN0aW9uWzJdXG5cbiAgICAgICAgaWYgKCFjb25uZWN0aW9uTWFwLmhhcyhmcm9tSUQpKSB7XG4gICAgICAgICAgY29ubmVjdGlvbk1hcC5zZXQoZnJvbUlELCB7XG4gICAgICAgICAgICBwYXJlbnRzOiBbXSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXJlbnRSZWxhdGlvbnNoaXAgPSB7IElEOiB0b0lELCByZWxhdGlvbnNoaXA6IHJlbGF0aW9uc2hpcCB9XG4gICAgICAgIGNvbm5lY3Rpb25NYXAuZ2V0KGZyb21JRCkucGFyZW50cy5wdXNoKHBhcmVudFJlbGF0aW9uc2hpcClcblxuICAgICAgICBpZiAoIWNvbm5lY3Rpb25NYXAuaGFzKHRvSUQpKSB7XG4gICAgICAgICAgY29ubmVjdGlvbk1hcC5zZXQodG9JRCwge1xuICAgICAgICAgICAgcGFyZW50czogW10sXG4gICAgICAgICAgICBjaGlsZHJlbjogW11cbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2hpbGRSZWxhdGlvbnNoaXAgPSB7IElEOiBmcm9tSUQsIHJlbGF0aW9uc2hpcDogcmVsYXRpb25zaGlwIH1cbiAgICAgICAgY29ubmVjdGlvbk1hcC5nZXQodG9JRCkuY2hpbGRyZW4ucHVzaChjaGlsZFJlbGF0aW9uc2hpcClcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbm5lY3Rpb25NYXBcbiAgfVxuXG4gIHBhcnNlSW1hZ2VzKCkge1xuICAgIGNvbnN0IGltYWdlcyA9IHt9XG4gICAgY29uc3QgYmxvYnMgPSB7fVxuXG4gICAgaWYgKCdWaWRlbycgaW4gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cykge1xuICAgICAgY29uc3QgdmlkZW9Ob2RlcyA9IEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMuVmlkZW9cblxuICAgICAgZm9yIChjb25zdCBub2RlSUQgaW4gdmlkZW9Ob2Rlcykge1xuICAgICAgICBjb25zdCB2aWRlb05vZGUgPSB2aWRlb05vZGVzW25vZGVJRF1cblxuICAgICAgICBjb25zdCBpZCA9IHBhcnNlSW50KG5vZGVJRClcblxuICAgICAgICBjb25zdCBpdGVtTmFtZSA9IHZpZGVvTm9kZS5SZWxhdGl2ZUZpbGVuYW1lLnNwbGl0KCdcXFxcJykucG9wKCkgfHwgdmlkZW9Ob2RlLkZpbGVuYW1lLnNwbGl0KCdcXFxcJykucG9wKClcblxuICAgICAgICBpbWFnZXNbaWRdID0gYCR7RkJYTG9hZGVyLnNlcnZlclVybH0ke2l0ZW1OYW1lfWBcblxuICAgICAgICAvLyByYXcgaW1hZ2UgZGF0YSBpcyBpbiB2aWRlb05vZGUuQ29udGVudFxuICAgICAgICBpZiAoJ0NvbnRlbnQnIGluIHZpZGVvTm9kZSkge1xuICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyQ29udGVudCA9IHZpZGVvTm9kZS5Db250ZW50IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgJiYgdmlkZW9Ob2RlLkNvbnRlbnQuYnl0ZUxlbmd0aCA+IDBcbiAgICAgICAgICBjb25zdCBiYXNlNjRDb250ZW50ID0gdHlwZW9mIHZpZGVvTm9kZS5Db250ZW50ID09PSAnc3RyaW5nJyAmJiB2aWRlb05vZGUuQ29udGVudCAhPT0gJydcblxuICAgICAgICAgIGlmIChhcnJheUJ1ZmZlckNvbnRlbnQgfHwgYmFzZTY0Q29udGVudCkge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSB0aGlzLnBhcnNlSW1hZ2UodmlkZW9Ob2Rlc1tub2RlSURdKVxuXG4gICAgICAgICAgICBibG9ic1t2aWRlb05vZGUuUmVsYXRpdmVGaWxlbmFtZSB8fCB2aWRlb05vZGUuRmlsZW5hbWVdID0gaW1hZ2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGlkIGluIGltYWdlcykge1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSBpbWFnZXNbaWRdXG5cbiAgICAgIGlmIChibG9ic1tmaWxlbmFtZV0gIT09IHVuZGVmaW5lZCkgaW1hZ2VzW2lkXSA9IGJsb2JzW2ZpbGVuYW1lXVxuICAgICAgZWxzZSBpbWFnZXNbaWRdID0gaW1hZ2VzW2lkXS5zcGxpdCgnXFxcXCcpLnBvcCgpXG4gICAgfVxuXG4gICAgcmV0dXJuIGltYWdlc1xuICB9XG5cbiAgcGFyc2VJbWFnZSh2aWRlb05vZGUpIHtcbiAgICBjb25zdCBjb250ZW50ID0gdmlkZW9Ob2RlLkNvbnRlbnRcbiAgICBjb25zdCBmaWxlTmFtZSA9IHZpZGVvTm9kZS5SZWxhdGl2ZUZpbGVuYW1lIHx8IHZpZGVvTm9kZS5GaWxlbmFtZVxuICAgIGNvbnN0IGV4dGVuc2lvbiA9IGZpbGVOYW1lLnNsaWNlKGZpbGVOYW1lLmxhc3RJbmRleE9mKCcuJykgKyAxKS50b0xvd2VyQ2FzZSgpXG5cbiAgICBsZXQgdHlwZVxuXG4gICAgc3dpdGNoIChleHRlbnNpb24pIHtcbiAgICAgIGNhc2UgJ2JtcCc6XG4gICAgICAgIHR5cGUgPSAnaW1hZ2UvYm1wJ1xuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdqcGcnOlxuICAgICAgY2FzZSAnanBlZyc6XG4gICAgICAgIHR5cGUgPSAnaW1hZ2UvanBlZydcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAncG5nJzpcbiAgICAgICAgdHlwZSA9ICdpbWFnZS9wbmcnXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3RpZic6XG4gICAgICAgIHR5cGUgPSAnaW1hZ2UvdGlmZidcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAndGdhJzpcbiAgICAgICAgaWYgKHR5cGVvZiBuZXcgVEdBTG9hZGVyKCkgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0ZCWExvYWRlcjogVEdBTG9hZGVyIGlzIHJlcXVpcmVkIHRvIGxvYWQgVEdBIHRleHR1cmVzJylcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy50ZXh0dXJlTG9hZGVyLm1hbmFnZXIuZ2V0SGFuZGxlcignLnRnYScpID09PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCB0Z2FMb2FkZXIgPSBuZXcgVEdBTG9hZGVyKClcbiAgICAgICAgICAgIHRnYUxvYWRlci5zZXRQYXRoKHRoaXMudGV4dHVyZUxvYWRlci5wYXRoKVxuXG4gICAgICAgICAgICB0aGlzLnRleHR1cmVMb2FkZXIubWFuYWdlci5hZGRIYW5kbGVyKC9cXC50Z2EkL2ksIHRnYUxvYWRlcilcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0eXBlID0gJ2ltYWdlL3RnYSdcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnNvbGUud2FybignRkJYTG9hZGVyOiBJbWFnZSB0eXBlIFwiJyArIGV4dGVuc2lvbiArICdcIiBpcyBub3Qgc3VwcG9ydGVkLicpXG4gICAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIEFTQ0lJIGZvcm1hdFxuICAgICAgcmV0dXJuICdkYXRhOicgKyB0eXBlICsgJztiYXNlNjQsJyArIGNvbnRlbnRcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQmluYXJ5IEZvcm1hdFxuICAgICAgY29uc3QgYXJyYXkgPSBuZXcgVWludDhBcnJheShjb250ZW50KVxuICAgICAgcmV0dXJuIHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFthcnJheV0sIHsgdHlwZTogdHlwZSB9KSlcbiAgICB9XG4gIH1cblxuICBwYXJzZVRleHR1cmVzKGltYWdlcykge1xuICAgIGNvbnN0IHRleHR1cmVNYXAgPSBuZXcgTWFwKClcblxuICAgIGlmICgnVGV4dHVyZScgaW4gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cykge1xuICAgICAgY29uc3QgdGV4dHVyZU5vZGVzID0gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cy5UZXh0dXJlXG4gICAgICBmb3IgKGNvbnN0IG5vZGVJRCBpbiB0ZXh0dXJlTm9kZXMpIHtcbiAgICAgICAgY29uc3QgdGV4dHVyZSA9IHRoaXMucGFyc2VUZXh0dXJlKHRleHR1cmVOb2Rlc1tub2RlSURdLCBpbWFnZXMpXG4gICAgICAgIHRleHR1cmVNYXAuc2V0KHBhcnNlSW50KG5vZGVJRCksIHRleHR1cmUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHR1cmVNYXBcbiAgfVxuXG4gIHBhcnNlVGV4dHVyZSh0ZXh0dXJlTm9kZSwgaW1hZ2VzKSB7XG4gICAgY29uc3QgdGV4dHVyZSA9IHRoaXMubG9hZFRleHR1cmUodGV4dHVyZU5vZGUsIGltYWdlcylcblxuICAgIHRleHR1cmUuSUQgPSB0ZXh0dXJlTm9kZS5pZFxuXG4gICAgdGV4dHVyZS5uYW1lID0gdGV4dHVyZU5vZGUuYXR0ck5hbWVcblxuICAgIGNvbnN0IHdyYXBNb2RlVSA9IHRleHR1cmVOb2RlLldyYXBNb2RlVVxuICAgIGNvbnN0IHdyYXBNb2RlViA9IHRleHR1cmVOb2RlLldyYXBNb2RlVlxuXG4gICAgY29uc3QgdmFsdWVVID0gd3JhcE1vZGVVICE9PSB1bmRlZmluZWQgPyB3cmFwTW9kZVUudmFsdWUgOiAwXG4gICAgY29uc3QgdmFsdWVWID0gd3JhcE1vZGVWICE9PSB1bmRlZmluZWQgPyB3cmFwTW9kZVYudmFsdWUgOiAwXG5cbiAgICAvLyBodHRwOi8vZG93bmxvYWQuYXV0b2Rlc2suY29tL3VzL2ZieC9TREtkb2NzL0ZCWF9TREtfSGVscC9maWxlcy9mYnhzZGtyZWYvY2xhc3Nfa19mYnhfdGV4dHVyZS5odG1sIzg4OTY0MGU2M2UyZTY4MTI1OWVhODEwNjFiODUxNDNhXG4gICAgLy8gMDogcmVwZWF0KGRlZmF1bHQpLCAxOiBjbGFtcFxuXG4gICAgdGV4dHVyZS53cmFwUyA9IHZhbHVlVSA9PT0gMCA/IFJlcGVhdFdyYXBwaW5nIDogQ2xhbXBUb0VkZ2VXcmFwcGluZ1xuICAgIHRleHR1cmUud3JhcFQgPSB2YWx1ZVYgPT09IDAgPyBSZXBlYXRXcmFwcGluZyA6IENsYW1wVG9FZGdlV3JhcHBpbmdcblxuICAgIGlmICgnU2NhbGluZycgaW4gdGV4dHVyZU5vZGUpIHtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IHRleHR1cmVOb2RlLlNjYWxpbmcudmFsdWVcblxuICAgICAgdGV4dHVyZS5yZXBlYXQueCA9IHZhbHVlc1swXVxuICAgICAgdGV4dHVyZS5yZXBlYXQueSA9IHZhbHVlc1sxXVxuICAgIH1cblxuICAgIHJldHVybiB0ZXh0dXJlXG4gIH1cblxuICBsb2FkVGV4dHVyZSh0ZXh0dXJlTm9kZSwgaW1hZ2VzKSB7XG4gICAgbGV0IGZpbGVOYW1lXG4gICAgY29uc3QgY3VycmVudFBhdGggPSB0aGlzLnRleHR1cmVMb2FkZXIucGF0aFxuICAgIGNvbnN0IGNoaWxkcmVuID0gRkJYTG9hZGVyLmNvbm5lY3Rpb25zLmdldCh0ZXh0dXJlTm9kZS5pZCkuY2hpbGRyZW5cblxuICAgIGlmIChjaGlsZHJlbiAhPT0gdW5kZWZpbmVkICYmIGNoaWxkcmVuLmxlbmd0aCA+IDAgJiYgaW1hZ2VzW2NoaWxkcmVuWzBdLklEXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBmaWxlTmFtZSA9IGltYWdlc1tjaGlsZHJlblswXS5JRF1cblxuICAgICAgaWYgKGZpbGVOYW1lLmluZGV4T2YoJ2Jsb2I6JykgPT09IDAgfHwgZmlsZU5hbWUuaW5kZXhPZignZGF0YTonKSA9PT0gMCkge1xuICAgICAgICB0aGlzLnRleHR1cmVMb2FkZXIuc2V0UGF0aCh1bmRlZmluZWQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHRleHR1cmVcblxuICAgIGNvbnN0IGV4dGVuc2lvbiA9IHRleHR1cmVOb2RlLkZpbGVOYW1lLnNsaWNlKC0zKS50b0xvd2VyQ2FzZSgpXG5cbiAgICBpZiAoZXh0ZW5zaW9uID09PSAndGdhJykge1xuICAgICAgY29uc3QgbG9hZGVyID0gdGhpcy50ZXh0dXJlTG9hZGVyLmdldEhhbmRsZXIoJy50Z2EnKVxuXG4gICAgICBpZiAobG9hZGVyID09PSBudWxsKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignRkJYTG9hZGVyOiBUR0FMb2FkZXIgbm90IGZvdW5kLCBjcmVhdGluZyBlbXB0eSBwbGFjZWhvbGRlciB0ZXh0dXJlIGZvcicsIGZpbGVOYW1lKVxuICAgICAgICB0ZXh0dXJlID0gbmV3IFRleHR1cmUoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGV4dHVyZSA9IGxvYWRlci5sb2FkKGZpbGVOYW1lKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZXh0ZW5zaW9uID09PSAncHNkJykge1xuICAgICAgY29uc29sZS53YXJuKCdGQlhMb2FkZXI6IFBTRCB0ZXh0dXJlcyBhcmUgbm90IHN1cHBvcnRlZCwgY3JlYXRpbmcgZW1wdHkgcGxhY2Vob2xkZXIgdGV4dHVyZSBmb3InLCBmaWxlTmFtZSlcbiAgICAgIHRleHR1cmUgPSBuZXcgVGV4dHVyZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRleHR1cmUgPSB0aGlzLnRleHR1cmVMb2FkZXIubG9hZChmaWxlTmFtZSlcbiAgICB9XG5cbiAgICB0aGlzLnRleHR1cmVMb2FkZXIuc2V0UGF0aChjdXJyZW50UGF0aClcblxuICAgIHJldHVybiB0ZXh0dXJlXG4gIH1cblxuICBwYXJzZU1hdGVyaWFscyh0ZXh0dXJlTWFwKSB7XG4gICAgY29uc3QgbWF0ZXJpYWxNYXAgPSBuZXcgTWFwKClcblxuICAgIGlmICgnTWF0ZXJpYWwnIGluIEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMpIHtcbiAgICAgIGNvbnN0IG1hdGVyaWFsTm9kZXMgPSBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzLk1hdGVyaWFsXG5cbiAgICAgIGZvciAoY29uc3Qgbm9kZUlEIGluIG1hdGVyaWFsTm9kZXMpIHtcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSB0aGlzLnBhcnNlTWF0ZXJpYWwobWF0ZXJpYWxOb2Rlc1tub2RlSURdLCB0ZXh0dXJlTWFwKVxuXG4gICAgICAgIGlmIChtYXRlcmlhbCAhPT0gbnVsbCkgbWF0ZXJpYWxNYXAuc2V0KHBhcnNlSW50KG5vZGVJRCksIG1hdGVyaWFsKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtYXRlcmlhbE1hcFxuICB9XG5cbiAgcGFyc2VNYXRlcmlhbChtYXRlcmlhbE5vZGUsIHRleHR1cmVNYXApIHtcbiAgICBjb25zdCBJRCA9IG1hdGVyaWFsTm9kZS5pZFxuICAgIGNvbnN0IG5hbWUgPSBtYXRlcmlhbE5vZGUuYXR0ck5hbWVcbiAgICBsZXQgdHlwZSA9IG1hdGVyaWFsTm9kZS5TaGFkaW5nTW9kZWxcblxuICAgIC8vIENhc2Ugd2hlcmUgRkJYIHdyYXBzIHNoYWRpbmcgbW9kZWwgaW4gcHJvcGVydHkgb2JqZWN0LlxuICAgIGlmICh0eXBlb2YgdHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHR5cGUgPSB0eXBlLnZhbHVlXG4gICAgfVxuXG4gICAgLy8gSWdub3JlIHVudXNlZCBtYXRlcmlhbHMgd2hpY2ggZG9uJ3QgaGF2ZSBhbnkgY29ubmVjdGlvbnMuXG4gICAgaWYgKCFGQlhMb2FkZXIuY29ubmVjdGlvbnMuaGFzKElEKSkgcmV0dXJuIG51bGxcblxuICAgIGNvbnN0IHBhcmFtZXRlcnMgPSB0aGlzLnBhcnNlUGFyYW1ldGVycyhtYXRlcmlhbE5vZGUsIHRleHR1cmVNYXAsIElEKVxuXG4gICAgbGV0IG1hdGVyaWFsXG5cbiAgICBzd2l0Y2ggKHR5cGUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSAncGhvbmcnOlxuICAgICAgICBtYXRlcmlhbCA9IG5ldyBNZXNoUGhvbmdNYXRlcmlhbCgpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdsYW1iZXJ0JzpcbiAgICAgICAgbWF0ZXJpYWwgPSBuZXcgTWVzaExhbWJlcnRNYXRlcmlhbCgpXG4gICAgICAgIGJyZWFrXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjb25zb2xlLndhcm4oJ0ZCWExvYWRlcjogdW5rbm93biBtYXRlcmlhbCB0eXBlIFwiJXNcIi4gRGVmYXVsdGluZyB0byBNZXNoUGhvbmdNYXRlcmlhbC4nLCB0eXBlKVxuICAgICAgICBtYXRlcmlhbCA9IG5ldyBNZXNoUGhvbmdNYXRlcmlhbCgpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgbWF0ZXJpYWwuc2V0VmFsdWVzKHBhcmFtZXRlcnMpXG4gICAgbWF0ZXJpYWwubmFtZSA9IG5hbWVcblxuICAgIHJldHVybiBtYXRlcmlhbFxuICB9XG5cbiAgcGFyc2VQYXJhbWV0ZXJzKG1hdGVyaWFsTm9kZSwgdGV4dHVyZU1hcCwgSUQpIHtcbiAgICBjb25zdCBwYXJhbWV0ZXJzOiBhbnkgPSB7fVxuXG4gICAgaWYgKG1hdGVyaWFsTm9kZS5CdW1wRmFjdG9yKSB7XG4gICAgICBwYXJhbWV0ZXJzLmJ1bXBTY2FsZSA9IG1hdGVyaWFsTm9kZS5CdW1wRmFjdG9yLnZhbHVlXG4gICAgfVxuICAgIGlmIChtYXRlcmlhbE5vZGUuRGlmZnVzZSkge1xuICAgICAgcGFyYW1ldGVycy5jb2xvciA9IG5ldyBDb2xvcigpLmZyb21BcnJheShtYXRlcmlhbE5vZGUuRGlmZnVzZS52YWx1ZSlcbiAgICB9IGVsc2UgaWYgKG1hdGVyaWFsTm9kZS5EaWZmdXNlQ29sb3IgJiYgbWF0ZXJpYWxOb2RlLkRpZmZ1c2VDb2xvci50eXBlID09PSAnQ29sb3InKSB7XG4gICAgICAvLyBUaGUgYmxlbmRlciBleHBvcnRlciBleHBvcnRzIGRpZmZ1c2UgaGVyZSBpbnN0ZWFkIG9mIGluIG1hdGVyaWFsTm9kZS5EaWZmdXNlXG4gICAgICBwYXJhbWV0ZXJzLmNvbG9yID0gbmV3IENvbG9yKCkuZnJvbUFycmF5KG1hdGVyaWFsTm9kZS5EaWZmdXNlQ29sb3IudmFsdWUpXG4gICAgfVxuXG4gICAgaWYgKG1hdGVyaWFsTm9kZS5EaXNwbGFjZW1lbnRGYWN0b3IpIHtcbiAgICAgIHBhcmFtZXRlcnMuZGlzcGxhY2VtZW50U2NhbGUgPSBtYXRlcmlhbE5vZGUuRGlzcGxhY2VtZW50RmFjdG9yLnZhbHVlXG4gICAgfVxuXG4gICAgaWYgKG1hdGVyaWFsTm9kZS5FbWlzc2l2ZSkge1xuICAgICAgcGFyYW1ldGVycy5lbWlzc2l2ZSA9IG5ldyBDb2xvcigpLmZyb21BcnJheShtYXRlcmlhbE5vZGUuRW1pc3NpdmUudmFsdWUpXG4gICAgfSBlbHNlIGlmIChtYXRlcmlhbE5vZGUuRW1pc3NpdmVDb2xvciAmJiBtYXRlcmlhbE5vZGUuRW1pc3NpdmVDb2xvci50eXBlID09PSAnQ29sb3InKSB7XG4gICAgICAvLyBUaGUgYmxlbmRlciBleHBvcnRlciBleHBvcnRzIGVtaXNzaXZlIGNvbG9yIGhlcmUgaW5zdGVhZCBvZiBpbiBtYXRlcmlhbE5vZGUuRW1pc3NpdmVcbiAgICAgIHBhcmFtZXRlcnMuZW1pc3NpdmUgPSBuZXcgQ29sb3IoKS5mcm9tQXJyYXkobWF0ZXJpYWxOb2RlLkVtaXNzaXZlQ29sb3IudmFsdWUpXG4gICAgfVxuXG4gICAgaWYgKG1hdGVyaWFsTm9kZS5FbWlzc2l2ZUZhY3Rvcikge1xuICAgICAgcGFyYW1ldGVycy5lbWlzc2l2ZUludGVuc2l0eSA9IHBhcnNlRmxvYXQobWF0ZXJpYWxOb2RlLkVtaXNzaXZlRmFjdG9yLnZhbHVlKVxuICAgIH1cblxuICAgIGlmIChtYXRlcmlhbE5vZGUuT3BhY2l0eSkge1xuICAgICAgcGFyYW1ldGVycy5vcGFjaXR5ID0gcGFyc2VGbG9hdChtYXRlcmlhbE5vZGUuT3BhY2l0eS52YWx1ZSlcbiAgICB9XG5cbiAgICBpZiAocGFyYW1ldGVycy5vcGFjaXR5IDwgMS4wKSB7XG4gICAgICBwYXJhbWV0ZXJzLnRyYW5zcGFyZW50ID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmIChtYXRlcmlhbE5vZGUuUmVmbGVjdGlvbkZhY3Rvcikge1xuICAgICAgcGFyYW1ldGVycy5yZWZsZWN0aXZpdHkgPSBtYXRlcmlhbE5vZGUuUmVmbGVjdGlvbkZhY3Rvci52YWx1ZVxuICAgIH1cblxuICAgIGlmIChtYXRlcmlhbE5vZGUuU2hpbmluZXNzKSB7XG4gICAgICBwYXJhbWV0ZXJzLnNoaW5pbmVzcyA9IG1hdGVyaWFsTm9kZS5TaGluaW5lc3MudmFsdWVcbiAgICB9XG5cbiAgICBpZiAobWF0ZXJpYWxOb2RlLlNwZWN1bGFyKSB7XG4gICAgICBwYXJhbWV0ZXJzLnNwZWN1bGFyID0gbmV3IENvbG9yKCkuZnJvbUFycmF5KG1hdGVyaWFsTm9kZS5TcGVjdWxhci52YWx1ZSlcbiAgICB9IGVsc2UgaWYgKG1hdGVyaWFsTm9kZS5TcGVjdWxhckNvbG9yICYmIG1hdGVyaWFsTm9kZS5TcGVjdWxhckNvbG9yLnR5cGUgPT09ICdDb2xvcicpIHtcbiAgICAgIC8vIFRoZSBibGVuZGVyIGV4cG9ydGVyIGV4cG9ydHMgc3BlY3VsYXIgY29sb3IgaGVyZSBpbnN0ZWFkIG9mIGluIG1hdGVyaWFsTm9kZS5TcGVjdWxhclxuICAgICAgcGFyYW1ldGVycy5zcGVjdWxhciA9IG5ldyBDb2xvcigpLmZyb21BcnJheShtYXRlcmlhbE5vZGUuU3BlY3VsYXJDb2xvci52YWx1ZSlcbiAgICB9XG5cbiAgICBGQlhMb2FkZXIuY29ubmVjdGlvbnMuZ2V0KElEKS5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgY29uc3QgdHlwZSA9IGNoaWxkLnJlbGF0aW9uc2hpcFxuXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnQnVtcCc6XG4gICAgICAgICAgcGFyYW1ldGVycy5idW1wTWFwID0gdGhpcy5nZXRUZXh0dXJlKHRleHR1cmVNYXAsIGNoaWxkLklEKVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnTWF5YXxURVhfYW9fbWFwJzpcbiAgICAgICAgICBwYXJhbWV0ZXJzLmFvTWFwID0gdGhpcy5nZXRUZXh0dXJlKHRleHR1cmVNYXAsIGNoaWxkLklEKVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnRGlmZnVzZUNvbG9yJzpcbiAgICAgICAgY2FzZSAnTWF5YXxURVhfY29sb3JfbWFwJzpcbiAgICAgICAgICBwYXJhbWV0ZXJzLm1hcCA9IHRoaXMuZ2V0VGV4dHVyZSh0ZXh0dXJlTWFwLCBjaGlsZC5JRClcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ0Rpc3BsYWNlbWVudENvbG9yJzpcbiAgICAgICAgICBwYXJhbWV0ZXJzLmRpc3BsYWNlbWVudE1hcCA9IHRoaXMuZ2V0VGV4dHVyZSh0ZXh0dXJlTWFwLCBjaGlsZC5JRClcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ0VtaXNzaXZlQ29sb3InOlxuICAgICAgICAgIHBhcmFtZXRlcnMuZW1pc3NpdmVNYXAgPSB0aGlzLmdldFRleHR1cmUodGV4dHVyZU1hcCwgY2hpbGQuSUQpXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdOb3JtYWxNYXAnOlxuICAgICAgICBjYXNlICdNYXlhfFRFWF9ub3JtYWxfbWFwJzpcbiAgICAgICAgICBwYXJhbWV0ZXJzLm5vcm1hbE1hcCA9IHRoaXMuZ2V0VGV4dHVyZSh0ZXh0dXJlTWFwLCBjaGlsZC5JRClcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ1JlZmxlY3Rpb25Db2xvcic6XG4gICAgICAgICAgcGFyYW1ldGVycy5lbnZNYXAgPSB0aGlzLmdldFRleHR1cmUodGV4dHVyZU1hcCwgY2hpbGQuSUQpXG4gICAgICAgICAgcGFyYW1ldGVycy5lbnZNYXAubWFwcGluZyA9IEVxdWlyZWN0YW5ndWxhclJlZmxlY3Rpb25NYXBwaW5nXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdTcGVjdWxhckNvbG9yJzpcbiAgICAgICAgICBwYXJhbWV0ZXJzLnNwZWN1bGFyTWFwID0gdGhpcy5nZXRUZXh0dXJlKHRleHR1cmVNYXAsIGNoaWxkLklEKVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnVHJhbnNwYXJlbnRDb2xvcic6XG4gICAgICAgICAgcGFyYW1ldGVycy5hbHBoYU1hcCA9IHRoaXMuZ2V0VGV4dHVyZSh0ZXh0dXJlTWFwLCBjaGlsZC5JRClcbiAgICAgICAgICBwYXJhbWV0ZXJzLnRyYW5zcGFyZW50ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnQW1iaWVudENvbG9yJzpcbiAgICAgICAgY2FzZSAnU2hpbmluZXNzRXhwb25lbnQnOiAvLyBBS0EgZ2xvc3NpbmVzcyBtYXBcbiAgICAgICAgY2FzZSAnU3BlY3VsYXJGYWN0b3InOiAvLyBBS0Egc3BlY3VsYXJMZXZlbFxuICAgICAgICBjYXNlICdWZWN0b3JEaXNwbGFjZW1lbnRDb2xvcic6IC8vIE5PVEU6IFNlZW1zIHRvIGJlIGEgY29weSBvZiBEaXNwbGFjZW1lbnRDb2xvclxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGNvbnNvbGUud2FybignRkJYTG9hZGVyOiAlcyBtYXAgaXMgbm90IHN1cHBvcnRlZCBpbiBqcywgc2tpcHBpbmcgdGV4dHVyZS4nLCB0eXBlKVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiBwYXJhbWV0ZXJzXG4gIH1cblxuICBnZXRUZXh0dXJlKHRleHR1cmVNYXAsIGlkKSB7XG4gICAgLy8gaWYgdGhlIHRleHR1cmUgaXMgYSBsYXllcmVkIHRleHR1cmUsIGp1c3QgdXNlIHRoZSBmaXJzdCBsYXllciBhbmQgaXNzdWUgYSB3YXJuaW5nXG4gICAgaWYgKCdMYXllcmVkVGV4dHVyZScgaW4gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cyAmJiBpZCBpbiBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzLkxheWVyZWRUZXh0dXJlKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0ZCWExvYWRlcjogbGF5ZXJlZCB0ZXh0dXJlcyBhcmUgbm90IHN1cHBvcnRlZCBpbiBqcy4gRGlzY2FyZGluZyBhbGwgYnV0IGZpcnN0IGxheWVyLicpXG4gICAgICBpZCA9IEZCWExvYWRlci5jb25uZWN0aW9ucy5nZXQoaWQpLmNoaWxkcmVuWzBdLklEXG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHR1cmVNYXAuZ2V0KGlkKVxuICB9XG5cbiAgcGFyc2VEZWZvcm1lcnMoKSB7XG4gICAgY29uc3Qgc2tlbGV0b25zOiBhbnkgPSB7fVxuICAgIGNvbnN0IG1vcnBoVGFyZ2V0czogYW55ID0ge31cblxuICAgIGlmICgnRGVmb3JtZXInIGluIEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMpIHtcbiAgICAgIGNvbnN0IERlZm9ybWVyTm9kZXMgPSBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzLkRlZm9ybWVyXG5cbiAgICAgIGZvciAoY29uc3Qgbm9kZUlEIGluIERlZm9ybWVyTm9kZXMpIHtcbiAgICAgICAgY29uc3QgZGVmb3JtZXJOb2RlID0gRGVmb3JtZXJOb2Rlc1tub2RlSURdXG5cbiAgICAgICAgY29uc3QgcmVsYXRpb25zaGlwcyA9IEZCWExvYWRlci5jb25uZWN0aW9ucy5nZXQocGFyc2VJbnQobm9kZUlEKSlcblxuICAgICAgICBpZiAoZGVmb3JtZXJOb2RlLmF0dHJUeXBlID09PSAnU2tpbicpIHtcbiAgICAgICAgICBjb25zdCBza2VsZXRvbjogYW55ID0gdGhpcy5wYXJzZVNrZWxldG9uKHJlbGF0aW9uc2hpcHMsIERlZm9ybWVyTm9kZXMpXG4gICAgICAgICAgc2tlbGV0b24uSUQgPSBub2RlSURcblxuICAgICAgICAgIGlmIChyZWxhdGlvbnNoaXBzLnBhcmVudHMubGVuZ3RoID4gMSlcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRkJYTG9hZGVyOiBza2VsZXRvbiBhdHRhY2hlZCB0byBtb3JlIHRoYW4gb25lIGdlb21ldHJ5IGlzIG5vdCBzdXBwb3J0ZWQuJylcbiAgICAgICAgICBza2VsZXRvbi5nZW9tZXRyeUlEID0gcmVsYXRpb25zaGlwcy5wYXJlbnRzWzBdLklEXG5cbiAgICAgICAgICBza2VsZXRvbnNbbm9kZUlEXSA9IHNrZWxldG9uXG4gICAgICAgIH0gZWxzZSBpZiAoZGVmb3JtZXJOb2RlLmF0dHJUeXBlID09PSAnQmxlbmRTaGFwZScpIHtcbiAgICAgICAgICBjb25zdCBtb3JwaFRhcmdldDogYW55ID0ge1xuICAgICAgICAgICAgaWQ6IG5vZGVJRFxuICAgICAgICAgIH1cblxuICAgICAgICAgIG1vcnBoVGFyZ2V0LnJhd1RhcmdldHMgPSB0aGlzLnBhcnNlTW9ycGhUYXJnZXRzKHJlbGF0aW9uc2hpcHMsIERlZm9ybWVyTm9kZXMpXG4gICAgICAgICAgbW9ycGhUYXJnZXQuaWQgPSBub2RlSURcblxuICAgICAgICAgIGlmIChyZWxhdGlvbnNoaXBzLnBhcmVudHMubGVuZ3RoID4gMSlcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignRkJYTG9hZGVyOiBtb3JwaCB0YXJnZXQgYXR0YWNoZWQgdG8gbW9yZSB0aGFuIG9uZSBnZW9tZXRyeSBpcyBub3Qgc3VwcG9ydGVkLicpXG5cbiAgICAgICAgICBtb3JwaFRhcmdldHNbbm9kZUlEXSA9IG1vcnBoVGFyZ2V0XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgc2tlbGV0b25zOiBza2VsZXRvbnMsXG4gICAgICBtb3JwaFRhcmdldHM6IG1vcnBoVGFyZ2V0c1xuICAgIH1cbiAgfVxuXG4gIHBhcnNlU2tlbGV0b24ocmVsYXRpb25zaGlwcywgZGVmb3JtZXJOb2Rlcykge1xuICAgIGNvbnN0IHJhd0JvbmVzOiBhbnkgPSBbXVxuXG4gICAgcmVsYXRpb25zaGlwcy5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgY29uc3QgYm9uZU5vZGUgPSBkZWZvcm1lck5vZGVzW2NoaWxkLklEXVxuXG4gICAgICBpZiAoYm9uZU5vZGUuYXR0clR5cGUgIT09ICdDbHVzdGVyJykgcmV0dXJuXG5cbiAgICAgIGNvbnN0IHJhd0JvbmUgPSB7XG4gICAgICAgIElEOiBjaGlsZC5JRCxcbiAgICAgICAgaW5kaWNlczogW10sXG4gICAgICAgIHdlaWdodHM6IFtdLFxuICAgICAgICB0cmFuc2Zvcm1MaW5rOiBuZXcgTWF0cml4NCgpLmZyb21BcnJheShib25lTm9kZS5UcmFuc2Zvcm1MaW5rLmEpXG4gICAgICAgIC8vIHRyYW5zZm9ybTogbmV3IE1hdHJpeDQoKS5mcm9tQXJyYXkoIGJvbmVOb2RlLlRyYW5zZm9ybS5hICksXG4gICAgICAgIC8vIGxpbmtNb2RlOiBib25lTm9kZS5Nb2RlLFxuICAgICAgfVxuXG4gICAgICBpZiAoJ0luZGV4ZXMnIGluIGJvbmVOb2RlKSB7XG4gICAgICAgIHJhd0JvbmUuaW5kaWNlcyA9IGJvbmVOb2RlLkluZGV4ZXMuYVxuICAgICAgICByYXdCb25lLndlaWdodHMgPSBib25lTm9kZS5XZWlnaHRzLmFcbiAgICAgIH1cblxuICAgICAgcmF3Qm9uZXMucHVzaChyYXdCb25lKVxuICAgIH0pXG5cbiAgICByZXR1cm4ge1xuICAgICAgcmF3Qm9uZXM6IHJhd0JvbmVzLFxuICAgICAgYm9uZXM6IFtdXG4gICAgfVxuICB9XG5cbiAgcGFyc2VNb3JwaFRhcmdldHMocmVsYXRpb25zaGlwcywgZGVmb3JtZXJOb2Rlcykge1xuICAgIGNvbnN0IHJhd01vcnBoVGFyZ2V0czogYW55ID0gW11cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVsYXRpb25zaGlwcy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hpbGQgPSByZWxhdGlvbnNoaXBzLmNoaWxkcmVuW2ldXG5cbiAgICAgIGNvbnN0IG1vcnBoVGFyZ2V0Tm9kZSA9IGRlZm9ybWVyTm9kZXNbY2hpbGQuSURdXG5cbiAgICAgIGNvbnN0IHJhd01vcnBoVGFyZ2V0OiBhbnkgPSB7XG4gICAgICAgIG5hbWU6IG1vcnBoVGFyZ2V0Tm9kZS5hdHRyTmFtZSxcbiAgICAgICAgaW5pdGlhbFdlaWdodDogbW9ycGhUYXJnZXROb2RlLkRlZm9ybVBlcmNlbnQsXG4gICAgICAgIGlkOiBtb3JwaFRhcmdldE5vZGUuaWQsXG4gICAgICAgIGZ1bGxXZWlnaHRzOiBtb3JwaFRhcmdldE5vZGUuRnVsbFdlaWdodHMuYVxuICAgICAgfVxuXG4gICAgICBpZiAobW9ycGhUYXJnZXROb2RlLmF0dHJUeXBlICE9PSAnQmxlbmRTaGFwZUNoYW5uZWwnKSByZXR1cm5cblxuICAgICAgcmF3TW9ycGhUYXJnZXQuZ2VvSUQgPSBGQlhMb2FkZXIuY29ubmVjdGlvbnMuZ2V0KHBhcnNlSW50KGNoaWxkLklEKSkuY2hpbGRyZW4uZmlsdGVyKChjaGlsZCkgPT4ge1xuICAgICAgICByZXR1cm4gY2hpbGQucmVsYXRpb25zaGlwID09PSB1bmRlZmluZWRcbiAgICAgIH0pWzBdLklEXG5cbiAgICAgIHJhd01vcnBoVGFyZ2V0cy5wdXNoKHJhd01vcnBoVGFyZ2V0KVxuICAgIH1cblxuICAgIHJldHVybiByYXdNb3JwaFRhcmdldHNcbiAgfVxuXG4gIHBhcnNlU2NlbmUoZGVmb3JtZXJzLCBnZW9tZXRyeU1hcCwgbWF0ZXJpYWxNYXApIHtcbiAgICBGQlhMb2FkZXIuc2NlbmVHcmFwaCA9IG5ldyBHcm91cCgpXG5cbiAgICBjb25zdCBtb2RlbE1hcCA9IHRoaXMucGFyc2VNb2RlbHMoZGVmb3JtZXJzLnNrZWxldG9ucywgZ2VvbWV0cnlNYXAsIG1hdGVyaWFsTWFwKVxuXG4gICAgY29uc3QgbW9kZWxOb2RlcyA9IEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMuTW9kZWxcblxuICAgIG1vZGVsTWFwLmZvckVhY2goKG1vZGVsKSA9PiB7XG4gICAgICBjb25zdCBtb2RlbE5vZGUgPSBtb2RlbE5vZGVzW21vZGVsLklEXVxuICAgICAgdGhpcy5zZXRMb29rQXRQcm9wZXJ0aWVzKG1vZGVsLCBtb2RlbE5vZGUpXG5cbiAgICAgIGNvbnN0IHBhcmVudENvbm5lY3Rpb25zID0gRkJYTG9hZGVyLmNvbm5lY3Rpb25zLmdldChtb2RlbC5JRCkucGFyZW50c1xuXG4gICAgICBwYXJlbnRDb25uZWN0aW9ucy5mb3JFYWNoKChjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IG1vZGVsTWFwLmdldChjb25uZWN0aW9uLklEKVxuICAgICAgICBpZiAocGFyZW50ICE9PSB1bmRlZmluZWQpIHBhcmVudC5hZGQobW9kZWwpXG4gICAgICB9KVxuXG4gICAgICBpZiAobW9kZWwucGFyZW50ID09PSBudWxsKSB7XG4gICAgICAgIEZCWExvYWRlci5zY2VuZUdyYXBoLmFkZChtb2RlbClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGhpcy5iaW5kU2tlbGV0b24oZGVmb3JtZXJzLnNrZWxldG9ucywgZ2VvbWV0cnlNYXAsIG1vZGVsTWFwKVxuXG4gICAgdGhpcy5jcmVhdGVBbWJpZW50TGlnaHQoKVxuXG4gICAgdGhpcy5zZXR1cE1vcnBoTWF0ZXJpYWxzKClcblxuICAgIEZCWExvYWRlci5zY2VuZUdyYXBoLnRyYXZlcnNlKChub2RlKSA9PiB7XG4gICAgICBpZiAobm9kZS51c2VyRGF0YS50cmFuc2Zvcm1EYXRhKSB7XG4gICAgICAgIGlmIChub2RlLnBhcmVudCkgbm9kZS51c2VyRGF0YS50cmFuc2Zvcm1EYXRhLnBhcmVudE1hdHJpeFdvcmxkID0gbm9kZS5wYXJlbnQubWF0cml4XG5cbiAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gZ2VuZXJhdGVUcmFuc2Zvcm0obm9kZS51c2VyRGF0YS50cmFuc2Zvcm1EYXRhKVxuXG4gICAgICAgIG5vZGUuYXBwbHlNYXRyaXgodHJhbnNmb3JtKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zdCBhbmltYXRpb25zID0gbmV3IEFuaW1hdGlvblBhcnNlcigpLnBhcnNlKClcblxuICAgIC8vIGlmIGFsbCB0aGUgbW9kZWxzIHdoZXJlIGFscmVhZHkgY29tYmluZWQgaW4gYSBzaW5nbGUgZ3JvdXAsIGp1c3QgcmV0dXJuIHRoYXRcbiAgICBpZiAoRkJYTG9hZGVyLnNjZW5lR3JhcGguY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmIEZCWExvYWRlci5zY2VuZUdyYXBoLmNoaWxkcmVuWzBdLmlzR3JvdXApIHtcbiAgICAgIEZCWExvYWRlci5zY2VuZUdyYXBoLmNoaWxkcmVuWzBdLmFuaW1hdGlvbnMgPSBhbmltYXRpb25zXG4gICAgICBGQlhMb2FkZXIuc2NlbmVHcmFwaCA9IEZCWExvYWRlci5zY2VuZUdyYXBoLmNoaWxkcmVuWzBdXG4gICAgfVxuXG4gICAgRkJYTG9hZGVyLnNjZW5lR3JhcGguYW5pbWF0aW9ucyA9IGFuaW1hdGlvbnNcbiAgfVxuXG4gIC8vIHBhcnNlIG5vZGVzIGluIEZCWFRyZWUuT2JqZWN0cy5Nb2RlbFxuICBwYXJzZU1vZGVscyhza2VsZXRvbnMsIGdlb21ldHJ5TWFwLCBtYXRlcmlhbE1hcCkge1xuICAgIGNvbnN0IG1vZGVsTWFwID0gbmV3IE1hcCgpXG4gICAgY29uc3QgbW9kZWxOb2RlcyA9IEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMuTW9kZWxcblxuICAgIGZvciAoY29uc3Qgbm9kZUlEIGluIG1vZGVsTm9kZXMpIHtcbiAgICAgIGNvbnN0IGlkID0gcGFyc2VJbnQobm9kZUlEKVxuICAgICAgY29uc3Qgbm9kZSA9IG1vZGVsTm9kZXNbbm9kZUlEXVxuICAgICAgY29uc3QgcmVsYXRpb25zaGlwcyA9IEZCWExvYWRlci5jb25uZWN0aW9ucy5nZXQoaWQpXG5cbiAgICAgIGxldCBtb2RlbCA9IHRoaXMuYnVpbGRTa2VsZXRvbihyZWxhdGlvbnNoaXBzLCBza2VsZXRvbnMsIGlkLCBub2RlLmF0dHJOYW1lKVxuXG4gICAgICBpZiAoIW1vZGVsKSB7XG4gICAgICAgIHN3aXRjaCAobm9kZS5hdHRyVHlwZSkge1xuICAgICAgICAgIGNhc2UgJ0NhbWVyYSc6XG4gICAgICAgICAgICBtb2RlbCA9IHRoaXMuY3JlYXRlQ2FtZXJhKHJlbGF0aW9uc2hpcHMpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ0xpZ2h0JzpcbiAgICAgICAgICAgIG1vZGVsID0gdGhpcy5jcmVhdGVMaWdodChyZWxhdGlvbnNoaXBzKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdNZXNoJzpcbiAgICAgICAgICAgIG1vZGVsID0gdGhpcy5jcmVhdGVNZXNoKHJlbGF0aW9uc2hpcHMsIGdlb21ldHJ5TWFwLCBtYXRlcmlhbE1hcClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnTnVyYnNDdXJ2ZSc6XG4gICAgICAgICAgICBtb2RlbCA9IHRoaXMuY3JlYXRlQ3VydmUocmVsYXRpb25zaGlwcywgZ2VvbWV0cnlNYXApXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ0xpbWJOb2RlJzpcbiAgICAgICAgICBjYXNlICdSb290JzpcbiAgICAgICAgICAgIG1vZGVsID0gbmV3IEJvbmUoKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdOdWxsJzpcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbW9kZWwgPSBuZXcgR3JvdXAoKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vZGVsLm5hbWUgPSBQcm9wZXJ0eUJpbmRpbmdbJ3Nhbml0aXplTm9kZU5hbWUnXShub2RlLmF0dHJOYW1lKVxuICAgICAgICBtb2RlbC5JRCA9IGlkXG4gICAgICB9XG5cbiAgICAgIHRoaXMuZ2V0VHJhbnNmb3JtRGF0YShtb2RlbCwgbm9kZSlcbiAgICAgIG1vZGVsTWFwLnNldChpZCwgbW9kZWwpXG4gICAgfVxuXG4gICAgcmV0dXJuIG1vZGVsTWFwXG4gIH1cblxuICBidWlsZFNrZWxldG9uKHJlbGF0aW9uc2hpcHMsIHNrZWxldG9ucywgaWQsIG5hbWUpIHtcbiAgICBsZXQgYm9uZTogYW55ID0gbnVsbFxuXG4gICAgcmVsYXRpb25zaGlwcy5wYXJlbnRzLmZvckVhY2goKHBhcmVudCkgPT4ge1xuICAgICAgZm9yIChjb25zdCBJRCBpbiBza2VsZXRvbnMpIHtcbiAgICAgICAgY29uc3Qgc2tlbGV0b24gPSBza2VsZXRvbnNbSURdXG5cbiAgICAgICAgc2tlbGV0b24ucmF3Qm9uZXMuZm9yRWFjaCgocmF3Qm9uZSwgaSkgPT4ge1xuICAgICAgICAgIGlmIChyYXdCb25lLklEID09PSBwYXJlbnQuSUQpIHtcbiAgICAgICAgICAgIGNvbnN0IHN1YkJvbmUgPSBib25lXG4gICAgICAgICAgICBib25lID0gbmV3IEJvbmUoKVxuXG4gICAgICAgICAgICBib25lLm1hdHJpeFdvcmxkLmNvcHkocmF3Qm9uZS50cmFuc2Zvcm1MaW5rKVxuXG4gICAgICAgICAgICAvLyBzZXQgbmFtZSBhbmQgaWQgaGVyZSAtIG90aGVyd2lzZSBpbiBjYXNlcyB3aGVyZSBcInN1YkJvbmVcIiBpcyBjcmVhdGVkIGl0IHdpbGwgbm90IGhhdmUgYSBuYW1lIC8gaWRcbiAgICAgICAgICAgIGJvbmUubmFtZSA9IFByb3BlcnR5QmluZGluZ1snc2FuaXRpemVOb2RlTmFtZSddKG5hbWUpXG4gICAgICAgICAgICBib25lLklEID0gaWRcblxuICAgICAgICAgICAgc2tlbGV0b24uYm9uZXNbaV0gPSBib25lXG5cbiAgICAgICAgICAgIC8vIEluIGNhc2VzIHdoZXJlIGEgYm9uZSBpcyBzaGFyZWQgYmV0d2VlbiBtdWx0aXBsZSBtZXNoZXNcbiAgICAgICAgICAgIC8vIGR1cGxpY2F0ZSB0aGUgYm9uZSBoZXJlIGFuZCBhbmQgaXQgYXMgYSBjaGlsZCBvZiB0aGUgZmlyc3QgYm9uZVxuICAgICAgICAgICAgaWYgKHN1YkJvbmUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgYm9uZS5hZGQoc3ViQm9uZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiBib25lXG4gIH1cblxuICAvLyBjcmVhdGUgYSBQZXJzcGVjdGl2ZUNhbWVyYSBvciBPcnRob2dyYXBoaWNDYW1lcmFcbiAgY3JlYXRlQ2FtZXJhKHJlbGF0aW9uc2hpcHMpIHtcbiAgICBsZXQgbW9kZWxcbiAgICBsZXQgY2FtZXJhQXR0cmlidXRlXG5cbiAgICByZWxhdGlvbnNoaXBzLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICBjb25zdCBhdHRyID0gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cy5Ob2RlQXR0cmlidXRlW2NoaWxkLklEXVxuXG4gICAgICBpZiAoYXR0ciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNhbWVyYUF0dHJpYnV0ZSA9IGF0dHJcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYgKGNhbWVyYUF0dHJpYnV0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBtb2RlbCA9IG5ldyBPYmplY3QzRCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB0eXBlID0gMFxuICAgICAgaWYgKGNhbWVyYUF0dHJpYnV0ZS5DYW1lcmFQcm9qZWN0aW9uVHlwZSAhPT0gdW5kZWZpbmVkICYmIGNhbWVyYUF0dHJpYnV0ZS5DYW1lcmFQcm9qZWN0aW9uVHlwZS52YWx1ZSA9PT0gMSkge1xuICAgICAgICB0eXBlID0gMVxuICAgICAgfVxuXG4gICAgICBsZXQgbmVhckNsaXBwaW5nUGxhbmUgPSAxXG4gICAgICBpZiAoY2FtZXJhQXR0cmlidXRlLk5lYXJQbGFuZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5lYXJDbGlwcGluZ1BsYW5lID0gY2FtZXJhQXR0cmlidXRlLk5lYXJQbGFuZS52YWx1ZSAvIDEwMDBcbiAgICAgIH1cblxuICAgICAgbGV0IGZhckNsaXBwaW5nUGxhbmUgPSAxMDAwXG4gICAgICBpZiAoY2FtZXJhQXR0cmlidXRlLkZhclBsYW5lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZmFyQ2xpcHBpbmdQbGFuZSA9IGNhbWVyYUF0dHJpYnV0ZS5GYXJQbGFuZS52YWx1ZSAvIDEwMDBcbiAgICAgIH1cblxuICAgICAgbGV0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGhcbiAgICAgIGxldCBoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHRcblxuICAgICAgaWYgKGNhbWVyYUF0dHJpYnV0ZS5Bc3BlY3RXaWR0aCAhPT0gdW5kZWZpbmVkICYmIGNhbWVyYUF0dHJpYnV0ZS5Bc3BlY3RIZWlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB3aWR0aCA9IGNhbWVyYUF0dHJpYnV0ZS5Bc3BlY3RXaWR0aC52YWx1ZVxuICAgICAgICBoZWlnaHQgPSBjYW1lcmFBdHRyaWJ1dGUuQXNwZWN0SGVpZ2h0LnZhbHVlXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGFzcGVjdCA9IHdpZHRoIC8gaGVpZ2h0XG5cbiAgICAgIGxldCBmb3YgPSA0NVxuICAgICAgaWYgKGNhbWVyYUF0dHJpYnV0ZS5GaWVsZE9mVmlldyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZvdiA9IGNhbWVyYUF0dHJpYnV0ZS5GaWVsZE9mVmlldy52YWx1ZVxuICAgICAgfVxuXG4gICAgICBjb25zdCBmb2NhbExlbmd0aCA9IGNhbWVyYUF0dHJpYnV0ZS5Gb2NhbExlbmd0aCA/IGNhbWVyYUF0dHJpYnV0ZS5Gb2NhbExlbmd0aC52YWx1ZSA6IG51bGxcblxuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgMDogLy8gUGVyc3BlY3RpdmVcbiAgICAgICAgICBtb2RlbCA9IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYShmb3YsIGFzcGVjdCwgbmVhckNsaXBwaW5nUGxhbmUsIGZhckNsaXBwaW5nUGxhbmUpXG4gICAgICAgICAgaWYgKGZvY2FsTGVuZ3RoICE9PSBudWxsKSBtb2RlbC5zZXRGb2NhbExlbmd0aChmb2NhbExlbmd0aClcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgMTogLy8gT3J0aG9ncmFwaGljXG4gICAgICAgICAgbW9kZWwgPSBuZXcgT3J0aG9ncmFwaGljQ2FtZXJhKFxuICAgICAgICAgICAgLXdpZHRoIC8gMixcbiAgICAgICAgICAgIHdpZHRoIC8gMixcbiAgICAgICAgICAgIGhlaWdodCAvIDIsXG4gICAgICAgICAgICAtaGVpZ2h0IC8gMixcbiAgICAgICAgICAgIG5lYXJDbGlwcGluZ1BsYW5lLFxuICAgICAgICAgICAgZmFyQ2xpcHBpbmdQbGFuZVxuICAgICAgICAgIClcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29uc29sZS53YXJuKCdGQlhMb2FkZXI6IFVua25vd24gY2FtZXJhIHR5cGUgJyArIHR5cGUgKyAnLicpXG4gICAgICAgICAgbW9kZWwgPSBuZXcgT2JqZWN0M0QoKVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1vZGVsXG4gIH1cblxuICAvLyBDcmVhdGUgYSBEaXJlY3Rpb25hbExpZ2h0LCBQb2ludExpZ2h0IG9yIFNwb3RMaWdodFxuICBjcmVhdGVMaWdodChyZWxhdGlvbnNoaXBzKSB7XG4gICAgbGV0IG1vZGVsXG4gICAgbGV0IGxpZ2h0QXR0cmlidXRlXG5cbiAgICByZWxhdGlvbnNoaXBzLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICBjb25zdCBhdHRyID0gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cy5Ob2RlQXR0cmlidXRlW2NoaWxkLklEXVxuXG4gICAgICBpZiAoYXR0ciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGxpZ2h0QXR0cmlidXRlID0gYXR0clxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZiAobGlnaHRBdHRyaWJ1dGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgbW9kZWwgPSBuZXcgT2JqZWN0M0QoKVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgdHlwZVxuXG4gICAgICAvLyBMaWdodFR5cGUgY2FuIGJlIHVuZGVmaW5lZCBmb3IgUG9pbnQgbGlnaHRzXG4gICAgICBpZiAobGlnaHRBdHRyaWJ1dGUuTGlnaHRUeXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdHlwZSA9IDBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHR5cGUgPSBsaWdodEF0dHJpYnV0ZS5MaWdodFR5cGUudmFsdWVcbiAgICAgIH1cblxuICAgICAgbGV0IGNvbG9yOiBhbnkgPSAweGZmZmZmZlxuXG4gICAgICBpZiAobGlnaHRBdHRyaWJ1dGUuQ29sb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb2xvciA9IG5ldyBDb2xvcigpLmZyb21BcnJheShsaWdodEF0dHJpYnV0ZS5Db2xvci52YWx1ZSlcbiAgICAgIH1cblxuICAgICAgbGV0IGludGVuc2l0eSA9IGxpZ2h0QXR0cmlidXRlLkludGVuc2l0eSA9PT0gdW5kZWZpbmVkID8gMSA6IGxpZ2h0QXR0cmlidXRlLkludGVuc2l0eS52YWx1ZSAvIDEwMFxuXG4gICAgICAvLyBsaWdodCBkaXNhYmxlZFxuICAgICAgaWYgKGxpZ2h0QXR0cmlidXRlLkNhc3RMaWdodE9uT2JqZWN0ICE9PSB1bmRlZmluZWQgJiYgbGlnaHRBdHRyaWJ1dGUuQ2FzdExpZ2h0T25PYmplY3QudmFsdWUgPT09IDApIHtcbiAgICAgICAgaW50ZW5zaXR5ID0gMFxuICAgICAgfVxuXG4gICAgICBsZXQgZGlzdGFuY2UgPSAwXG4gICAgICBpZiAobGlnaHRBdHRyaWJ1dGUuRmFyQXR0ZW51YXRpb25FbmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAobGlnaHRBdHRyaWJ1dGUuRW5hYmxlRmFyQXR0ZW51YXRpb24gIT09IHVuZGVmaW5lZCAmJiBsaWdodEF0dHJpYnV0ZS5FbmFibGVGYXJBdHRlbnVhdGlvbi52YWx1ZSA9PT0gMCkge1xuICAgICAgICAgIGRpc3RhbmNlID0gMFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpc3RhbmNlID0gbGlnaHRBdHRyaWJ1dGUuRmFyQXR0ZW51YXRpb25FbmQudmFsdWVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUT0RPOiBjb3VsZCB0aGlzIGJlIGNhbGN1bGF0ZWQgbGluZWFybHkgZnJvbSBGYXJBdHRlbnVhdGlvblN0YXJ0IHRvIEZhckF0dGVudWF0aW9uRW5kP1xuICAgICAgY29uc3QgZGVjYXkgPSAxXG5cbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIDA6IC8vIFBvaW50XG4gICAgICAgICAgbW9kZWwgPSBuZXcgUG9pbnRMaWdodChjb2xvciwgaW50ZW5zaXR5LCBkaXN0YW5jZSwgZGVjYXkpXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlIDE6IC8vIERpcmVjdGlvbmFsXG4gICAgICAgICAgbW9kZWwgPSBuZXcgRGlyZWN0aW9uYWxMaWdodChjb2xvciwgaW50ZW5zaXR5KVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAyOiAvLyBTcG90XG4gICAgICAgICAgbGV0IGFuZ2xlID0gTWF0aC5QSSAvIDNcblxuICAgICAgICAgIGlmIChsaWdodEF0dHJpYnV0ZS5Jbm5lckFuZ2xlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGFuZ2xlID0gTWF0aFV0aWxzLmRlZ1RvUmFkKGxpZ2h0QXR0cmlidXRlLklubmVyQW5nbGUudmFsdWUpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IHBlbnVtYnJhID0gMFxuICAgICAgICAgIGlmIChsaWdodEF0dHJpYnV0ZS5PdXRlckFuZ2xlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IHRoaXMgaXMgbm90IGNvcnJlY3QgLSBGQlggY2FsY3VsYXRlcyBvdXRlciBhbmQgaW5uZXIgYW5nbGUgaW4gZGVncmVlc1xuICAgICAgICAgICAgLy8gd2l0aCBPdXRlckFuZ2xlID4gSW5uZXJBbmdsZSAmJiBPdXRlckFuZ2xlIDw9IE1hdGguUElcbiAgICAgICAgICAgIC8vIHdoaWxlIGpzIHVzZXMgYSBwZW51bWJyYSBiZXR3ZWVuICgwLCAxKSB0byBhdHRlbnVhdGUgdGhlIGlubmVyIGFuZ2xlXG4gICAgICAgICAgICBwZW51bWJyYSA9IE1hdGhVdGlscy5kZWdUb1JhZChsaWdodEF0dHJpYnV0ZS5PdXRlckFuZ2xlLnZhbHVlKVxuICAgICAgICAgICAgcGVudW1icmEgPSBNYXRoLm1heChwZW51bWJyYSwgMSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBtb2RlbCA9IG5ldyBTcG90TGlnaHQoY29sb3IsIGludGVuc2l0eSwgZGlzdGFuY2UsIGFuZ2xlLCBwZW51bWJyYSwgZGVjYXkpXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICdGQlhMb2FkZXI6IFVua25vd24gbGlnaHQgdHlwZSAnICsgbGlnaHRBdHRyaWJ1dGUuTGlnaHRUeXBlLnZhbHVlICsgJywgZGVmYXVsdGluZyB0byBhIFBvaW50TGlnaHQuJ1xuICAgICAgICAgIClcbiAgICAgICAgICBtb2RlbCA9IG5ldyBQb2ludExpZ2h0KGNvbG9yLCBpbnRlbnNpdHkpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgaWYgKGxpZ2h0QXR0cmlidXRlLkNhc3RTaGFkb3dzICE9PSB1bmRlZmluZWQgJiYgbGlnaHRBdHRyaWJ1dGUuQ2FzdFNoYWRvd3MudmFsdWUgPT09IDEpIHtcbiAgICAgICAgbW9kZWwuY2FzdFNoYWRvdyA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbW9kZWxcbiAgfVxuXG4gIGNyZWF0ZU1lc2gocmVsYXRpb25zaGlwcywgZ2VvbWV0cnlNYXAsIG1hdGVyaWFsTWFwKSB7XG4gICAgbGV0IG1vZGVsXG4gICAgbGV0IGdlb21ldHJ5OiBhbnkgPSBudWxsXG4gICAgbGV0IG1hdGVyaWFsOiBhbnkgPSBudWxsXG4gICAgY29uc3QgbWF0ZXJpYWxzOiBhbnkgPSBbXVxuXG4gICAgLy8gZ2V0IGdlb21ldHJ5IGFuZCBtYXRlcmlhbHMocykgZnJvbSBjb25uZWN0aW9uc1xuICAgIHJlbGF0aW9uc2hpcHMuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgIGlmIChnZW9tZXRyeU1hcC5oYXMoY2hpbGQuSUQpKSB7XG4gICAgICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnlNYXAuZ2V0KGNoaWxkLklEKVxuICAgICAgfVxuXG4gICAgICBpZiAobWF0ZXJpYWxNYXAuaGFzKGNoaWxkLklEKSkge1xuICAgICAgICBtYXRlcmlhbHMucHVzaChtYXRlcmlhbE1hcC5nZXQoY2hpbGQuSUQpKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZiAobWF0ZXJpYWxzLmxlbmd0aCA+IDEpIHtcbiAgICAgIG1hdGVyaWFsID0gbWF0ZXJpYWxzXG4gICAgfSBlbHNlIGlmIChtYXRlcmlhbHMubGVuZ3RoID4gMCkge1xuICAgICAgbWF0ZXJpYWwgPSBtYXRlcmlhbHNbMF1cbiAgICB9IGVsc2Uge1xuICAgICAgbWF0ZXJpYWwgPSBuZXcgTWVzaFBob25nTWF0ZXJpYWwoeyBjb2xvcjogMHhjY2NjY2MgfSlcbiAgICAgIG1hdGVyaWFscy5wdXNoKG1hdGVyaWFsKVxuICAgIH1cblxuICAgIGlmICgnY29sb3InIGluIGdlb21ldHJ5LmF0dHJpYnV0ZXMpIHtcbiAgICAgIG1hdGVyaWFscy5mb3JFYWNoKChtYXRlcmlhbCkgPT4ge1xuICAgICAgICAvLyBtYXRlcmlhbC52ZXJ0ZXhDb2xvcnMgPSBWZXJ0ZXhDb2xvcnM7XG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChnZW9tZXRyeS5GQlhfRGVmb3JtZXIpIHtcbiAgICAgIG1hdGVyaWFscy5mb3JFYWNoKChtYXRlcmlhbCkgPT4ge1xuICAgICAgICBtYXRlcmlhbC5za2lubmluZyA9IHRydWVcbiAgICAgIH0pXG5cbiAgICAgIG1vZGVsID0gbmV3IFNraW5uZWRNZXNoKGdlb21ldHJ5LCBtYXRlcmlhbClcbiAgICAgIG1vZGVsLm5vcm1hbGl6ZVNraW5XZWlnaHRzKClcbiAgICB9IGVsc2Uge1xuICAgICAgbW9kZWwgPSBuZXcgTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpXG4gICAgfVxuXG4gICAgcmV0dXJuIG1vZGVsXG4gIH1cblxuICBjcmVhdGVDdXJ2ZShyZWxhdGlvbnNoaXBzLCBnZW9tZXRyeU1hcCkge1xuICAgIGNvbnN0IGdlb21ldHJ5ID0gcmVsYXRpb25zaGlwcy5jaGlsZHJlbi5yZWR1Y2UoKGdlbywgY2hpbGQpID0+IHtcbiAgICAgIGlmIChnZW9tZXRyeU1hcC5oYXMoY2hpbGQuSUQpKSBnZW8gPSBnZW9tZXRyeU1hcC5nZXQoY2hpbGQuSUQpXG5cbiAgICAgIHJldHVybiBnZW9cbiAgICB9LCBudWxsKVxuXG4gICAgLy8gRkJYIGRvZXMgbm90IGxpc3QgbWF0ZXJpYWxzIGZvciBOdXJicyBsaW5lcywgc28gd2UnbGwganVzdCBwdXQgb3VyIG93biBpbiBoZXJlLlxuICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IExpbmVCYXNpY01hdGVyaWFsKHsgY29sb3I6IDB4MzMwMGZmLCBsaW5ld2lkdGg6IDEgfSlcbiAgICByZXR1cm4gbmV3IExpbmUoZ2VvbWV0cnksIG1hdGVyaWFsKVxuICB9XG5cbiAgLy8gcGFyc2UgdGhlIG1vZGVsIG5vZGUgZm9yIHRyYW5zZm9ybSBkYXRhXG4gIGdldFRyYW5zZm9ybURhdGEobW9kZWwsIG1vZGVsTm9kZSkge1xuICAgIGNvbnN0IHRyYW5zZm9ybURhdGE6IGFueSA9IHt9XG5cbiAgICBpZiAoJ0luaGVyaXRUeXBlJyBpbiBtb2RlbE5vZGUpIHRyYW5zZm9ybURhdGEuaW5oZXJpdFR5cGUgPSBwYXJzZUludChtb2RlbE5vZGUuSW5oZXJpdFR5cGUudmFsdWUpXG5cbiAgICBpZiAoJ1JvdGF0aW9uT3JkZXInIGluIG1vZGVsTm9kZSkgdHJhbnNmb3JtRGF0YS5ldWxlck9yZGVyID0gZ2V0RXVsZXJPcmRlcihtb2RlbE5vZGUuUm90YXRpb25PcmRlci52YWx1ZSlcbiAgICBlbHNlIHRyYW5zZm9ybURhdGEuZXVsZXJPcmRlciA9ICdaWVgnXG5cbiAgICBpZiAoJ0xjbF9UcmFuc2xhdGlvbicgaW4gbW9kZWxOb2RlKSB0cmFuc2Zvcm1EYXRhLnRyYW5zbGF0aW9uID0gbW9kZWxOb2RlLkxjbF9UcmFuc2xhdGlvbi52YWx1ZVxuXG4gICAgaWYgKCdQcmVSb3RhdGlvbicgaW4gbW9kZWxOb2RlKSB0cmFuc2Zvcm1EYXRhLnByZVJvdGF0aW9uID0gbW9kZWxOb2RlLlByZVJvdGF0aW9uLnZhbHVlXG4gICAgaWYgKCdMY2xfUm90YXRpb24nIGluIG1vZGVsTm9kZSkgdHJhbnNmb3JtRGF0YS5yb3RhdGlvbiA9IG1vZGVsTm9kZS5MY2xfUm90YXRpb24udmFsdWVcbiAgICBpZiAoJ1Bvc3RSb3RhdGlvbicgaW4gbW9kZWxOb2RlKSB0cmFuc2Zvcm1EYXRhLnBvc3RSb3RhdGlvbiA9IG1vZGVsTm9kZS5Qb3N0Um90YXRpb24udmFsdWVcblxuICAgIGlmICgnTGNsX1NjYWxpbmcnIGluIG1vZGVsTm9kZSkgdHJhbnNmb3JtRGF0YS5zY2FsZSA9IG1vZGVsTm9kZS5MY2xfU2NhbGluZy52YWx1ZVxuXG4gICAgaWYgKCdTY2FsaW5nT2Zmc2V0JyBpbiBtb2RlbE5vZGUpIHRyYW5zZm9ybURhdGEuc2NhbGluZ09mZnNldCA9IG1vZGVsTm9kZS5TY2FsaW5nT2Zmc2V0LnZhbHVlXG4gICAgaWYgKCdTY2FsaW5nUGl2b3QnIGluIG1vZGVsTm9kZSkgdHJhbnNmb3JtRGF0YS5zY2FsaW5nUGl2b3QgPSBtb2RlbE5vZGUuU2NhbGluZ1Bpdm90LnZhbHVlXG5cbiAgICBpZiAoJ1JvdGF0aW9uT2Zmc2V0JyBpbiBtb2RlbE5vZGUpIHRyYW5zZm9ybURhdGEucm90YXRpb25PZmZzZXQgPSBtb2RlbE5vZGUuUm90YXRpb25PZmZzZXQudmFsdWVcbiAgICBpZiAoJ1JvdGF0aW9uUGl2b3QnIGluIG1vZGVsTm9kZSkgdHJhbnNmb3JtRGF0YS5yb3RhdGlvblBpdm90ID0gbW9kZWxOb2RlLlJvdGF0aW9uUGl2b3QudmFsdWVcblxuICAgIG1vZGVsLnVzZXJEYXRhLnRyYW5zZm9ybURhdGEgPSB0cmFuc2Zvcm1EYXRhXG4gIH1cblxuICBzZXRMb29rQXRQcm9wZXJ0aWVzKG1vZGVsLCBtb2RlbE5vZGUpIHtcbiAgICBpZiAoJ0xvb2tBdFByb3BlcnR5JyBpbiBtb2RlbE5vZGUpIHtcbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gRkJYTG9hZGVyLmNvbm5lY3Rpb25zLmdldChtb2RlbC5JRCkuY2hpbGRyZW5cblxuICAgICAgY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgICAgaWYgKGNoaWxkLnJlbGF0aW9uc2hpcCA9PT0gJ0xvb2tBdFByb3BlcnR5Jykge1xuICAgICAgICAgIGNvbnN0IGxvb2tBdFRhcmdldCA9IEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMuTW9kZWxbY2hpbGQuSURdXG5cbiAgICAgICAgICBpZiAoJ0xjbF9UcmFuc2xhdGlvbicgaW4gbG9va0F0VGFyZ2V0KSB7XG4gICAgICAgICAgICBjb25zdCBwb3MgPSBsb29rQXRUYXJnZXQuTGNsX1RyYW5zbGF0aW9uLnZhbHVlXG5cbiAgICAgICAgICAgIC8vIERpcmVjdGlvbmFsTGlnaHQsIFNwb3RMaWdodFxuICAgICAgICAgICAgaWYgKG1vZGVsLnRhcmdldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIG1vZGVsLnRhcmdldC5wb3NpdGlvbi5mcm9tQXJyYXkocG9zKVxuICAgICAgICAgICAgICBGQlhMb2FkZXIuc2NlbmVHcmFwaC5hZGQobW9kZWwudGFyZ2V0KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gQ2FtZXJhcyBhbmQgb3RoZXIgT2JqZWN0M0RzXG5cbiAgICAgICAgICAgICAgbW9kZWwubG9va0F0KG5ldyBWZWN0b3IzKCkuZnJvbUFycmF5KHBvcykpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGJpbmRTa2VsZXRvbihza2VsZXRvbnMsIGdlb21ldHJ5TWFwLCBtb2RlbE1hcCkge1xuICAgIGNvbnN0IGJpbmRNYXRyaWNlcyA9IHRoaXMucGFyc2VQb3NlTm9kZXMoKVxuXG4gICAgZm9yIChjb25zdCBJRCBpbiBza2VsZXRvbnMpIHtcbiAgICAgIGNvbnN0IHNrZWxldG9uID0gc2tlbGV0b25zW0lEXVxuXG4gICAgICBjb25zdCBwYXJlbnRzID0gRkJYTG9hZGVyLmNvbm5lY3Rpb25zLmdldChwYXJzZUludChza2VsZXRvbi5JRCkpLnBhcmVudHNcblxuICAgICAgcGFyZW50cy5mb3JFYWNoKChwYXJlbnQpID0+IHtcbiAgICAgICAgaWYgKGdlb21ldHJ5TWFwLmhhcyhwYXJlbnQuSUQpKSB7XG4gICAgICAgICAgY29uc3QgZ2VvSUQgPSBwYXJlbnQuSURcbiAgICAgICAgICBjb25zdCBnZW9SZWxhdGlvbnNoaXBzID0gRkJYTG9hZGVyLmNvbm5lY3Rpb25zLmdldChnZW9JRClcblxuICAgICAgICAgIGdlb1JlbGF0aW9uc2hpcHMucGFyZW50cy5mb3JFYWNoKChnZW9Db25uUGFyZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAobW9kZWxNYXAuaGFzKGdlb0Nvbm5QYXJlbnQuSUQpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG1vZGVsID0gbW9kZWxNYXAuZ2V0KGdlb0Nvbm5QYXJlbnQuSUQpXG5cbiAgICAgICAgICAgICAgbW9kZWwuYmluZChuZXcgU2tlbGV0b24oc2tlbGV0b24uYm9uZXMpLCBiaW5kTWF0cmljZXNbZ2VvQ29ublBhcmVudC5JRF0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBwYXJzZVBvc2VOb2RlcygpIHtcbiAgICBjb25zdCBiaW5kTWF0cmljZXMgPSB7fVxuXG4gICAgaWYgKCdQb3NlJyBpbiBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzKSB7XG4gICAgICBjb25zdCBCaW5kUG9zZU5vZGUgPSBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzLlBvc2VcblxuICAgICAgZm9yIChjb25zdCBub2RlSUQgaW4gQmluZFBvc2VOb2RlKSB7XG4gICAgICAgIGlmIChCaW5kUG9zZU5vZGVbbm9kZUlEXS5hdHRyVHlwZSA9PT0gJ0JpbmRQb3NlJykge1xuICAgICAgICAgIGNvbnN0IHBvc2VOb2RlcyA9IEJpbmRQb3NlTm9kZVtub2RlSURdLlBvc2VOb2RlXG5cbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwb3NlTm9kZXMpKSB7XG4gICAgICAgICAgICBwb3NlTm9kZXMuZm9yRWFjaCgocG9zZU5vZGUpID0+IHtcbiAgICAgICAgICAgICAgYmluZE1hdHJpY2VzW3Bvc2VOb2RlLk5vZGVdID0gbmV3IE1hdHJpeDQoKS5mcm9tQXJyYXkocG9zZU5vZGUuTWF0cml4LmEpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBiaW5kTWF0cmljZXNbcG9zZU5vZGVzLk5vZGVdID0gbmV3IE1hdHJpeDQoKS5mcm9tQXJyYXkocG9zZU5vZGVzLk1hdHJpeC5hKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBiaW5kTWF0cmljZXNcbiAgfVxuXG4gIC8vIFBhcnNlIGFtYmllbnQgY29sb3IgaW4gRkJYVHJlZS5HbG9iYWxTZXR0aW5ncyAtIGlmIGl0J3Mgbm90IHNldCB0byBibGFjayAoZGVmYXVsdCksIGNyZWF0ZSBhbiBhbWJpZW50IGxpZ2h0XG4gIGNyZWF0ZUFtYmllbnRMaWdodCgpIHtcbiAgICBpZiAoJ0dsb2JhbFNldHRpbmdzJyBpbiBGQlhMb2FkZXIuZmJ4VHJlZSAmJiAnQW1iaWVudENvbG9yJyBpbiBGQlhMb2FkZXIuZmJ4VHJlZS5HbG9iYWxTZXR0aW5ncykge1xuICAgICAgY29uc3QgYW1iaWVudENvbG9yID0gRkJYTG9hZGVyLmZieFRyZWUuR2xvYmFsU2V0dGluZ3MuQW1iaWVudENvbG9yLnZhbHVlXG4gICAgICBjb25zdCByID0gYW1iaWVudENvbG9yWzBdXG4gICAgICBjb25zdCBnID0gYW1iaWVudENvbG9yWzFdXG4gICAgICBjb25zdCBiID0gYW1iaWVudENvbG9yWzJdXG5cbiAgICAgIGlmIChyICE9PSAwIHx8IGcgIT09IDAgfHwgYiAhPT0gMCkge1xuICAgICAgICBjb25zdCBjb2xvciA9IG5ldyBDb2xvcihyLCBnLCBiKVxuICAgICAgICBGQlhMb2FkZXIuc2NlbmVHcmFwaC5hZGQobmV3IEFtYmllbnRMaWdodChjb2xvciwgMSkpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0dXBNb3JwaE1hdGVyaWFscygpIHtcbiAgICBGQlhMb2FkZXIuc2NlbmVHcmFwaC50cmF2ZXJzZSgoY2hpbGQpID0+IHtcbiAgICAgIGlmIChjaGlsZC5pc01lc2gpIHtcbiAgICAgICAgaWYgKGNoaWxkLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbiAmJiBjaGlsZC5nZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24ubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGQubWF0ZXJpYWwpKSB7XG4gICAgICAgICAgICBjaGlsZC5tYXRlcmlhbC5mb3JFYWNoKChtYXRlcmlhbCwgaSkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnNldHVwTW9ycGhNYXRlcmlhbChjaGlsZCwgbWF0ZXJpYWwsIGkpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldHVwTW9ycGhNYXRlcmlhbChjaGlsZCwgY2hpbGQubWF0ZXJpYWwpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHNldHVwTW9ycGhNYXRlcmlhbChjaGlsZCwgbWF0ZXJpYWwsIGluZGV4Pykge1xuICAgIGNvbnN0IHV1aWQgPSBjaGlsZC51dWlkXG4gICAgY29uc3QgbWF0VXVpZCA9IG1hdGVyaWFsLnV1aWRcblxuICAgIC8vIGlmIGEgZ2VvbWV0cnkgaGFzIG1vcnBoIHRhcmdldHMsIGl0IGNhbm5vdCBzaGFyZSB0aGUgbWF0ZXJpYWwgd2l0aCBvdGhlciBnZW9tZXRyaWVzXG4gICAgbGV0IHNoYXJlZE1hdCA9IGZhbHNlXG5cbiAgICBGQlhMb2FkZXIuc2NlbmVHcmFwaC50cmF2ZXJzZSgobm9kZSkgPT4ge1xuICAgICAgaWYgKG5vZGUuaXNNZXNoKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vZGUubWF0ZXJpYWwpKSB7XG4gICAgICAgICAgbm9kZS5tYXRlcmlhbC5mb3JFYWNoKChtYXQpID0+IHtcbiAgICAgICAgICAgIGlmIChtYXQudXVpZCA9PT0gbWF0VXVpZCAmJiBub2RlLnV1aWQgIT09IHV1aWQpIHNoYXJlZE1hdCA9IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2UgaWYgKG5vZGUubWF0ZXJpYWwudXVpZCA9PT0gbWF0VXVpZCAmJiBub2RlLnV1aWQgIT09IHV1aWQpIHNoYXJlZE1hdCA9IHRydWVcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYgKHNoYXJlZE1hdCkge1xuICAgICAgY29uc3QgY2xvbmVkTWF0ID0gbWF0ZXJpYWwuY2xvbmUoKVxuICAgICAgY2xvbmVkTWF0Lm1vcnBoVGFyZ2V0cyA9IHRydWVcblxuICAgICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIGNoaWxkLm1hdGVyaWFsID0gY2xvbmVkTWF0XG4gICAgICBlbHNlIGNoaWxkLm1hdGVyaWFsW2luZGV4XSA9IGNsb25lZE1hdFxuICAgIH0gZWxzZSBtYXRlcmlhbC5tb3JwaFRhcmdldHMgPSB0cnVlXG4gIH1cbn1cblxuY2xhc3MgR2VvbWV0cnlQYXJzZXIge1xuICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgcGFyc2UoZGVmb3JtZXJzKSB7XG4gICAgY29uc3QgZ2VvbWV0cnlNYXAgPSBuZXcgTWFwKClcblxuICAgIGlmICgnR2VvbWV0cnknIGluIEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMpIHtcbiAgICAgIGNvbnN0IGdlb05vZGVzID0gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cy5HZW9tZXRyeVxuXG4gICAgICBmb3IgKGNvbnN0IG5vZGVJRCBpbiBnZW9Ob2Rlcykge1xuICAgICAgICBjb25zdCByZWxhdGlvbnNoaXBzID0gRkJYTG9hZGVyLmNvbm5lY3Rpb25zLmdldChwYXJzZUludChub2RlSUQpKVxuICAgICAgICBjb25zdCBnZW8gPSB0aGlzLnBhcnNlR2VvbWV0cnkocmVsYXRpb25zaGlwcywgZ2VvTm9kZXNbbm9kZUlEXSwgZGVmb3JtZXJzKVxuXG4gICAgICAgIGdlb21ldHJ5TWFwLnNldChwYXJzZUludChub2RlSUQpLCBnZW8pXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGdlb21ldHJ5TWFwXG4gIH1cblxuICAvLyBQYXJzZSBzaW5nbGUgbm9kZSBpbiBGQlhUcmVlLk9iamVjdHMuR2VvbWV0cnlcbiAgcGFyc2VHZW9tZXRyeShyZWxhdGlvbnNoaXBzLCBnZW9Ob2RlLCBkZWZvcm1lcnMpIHtcbiAgICBzd2l0Y2ggKGdlb05vZGUuYXR0clR5cGUpIHtcbiAgICAgIGNhc2UgJ01lc2gnOlxuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZU1lc2hHZW9tZXRyeShyZWxhdGlvbnNoaXBzLCBnZW9Ob2RlLCBkZWZvcm1lcnMpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ051cmJzQ3VydmUnOlxuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZU51cmJzR2VvbWV0cnkoZ2VvTm9kZSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICAvLyBQYXJzZSBzaW5nbGUgbm9kZSBtZXNoIGdlb21ldHJ5IGluIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeVxuICBwYXJzZU1lc2hHZW9tZXRyeShyZWxhdGlvbnNoaXBzLCBnZW9Ob2RlLCBkZWZvcm1lcnMpIHtcbiAgICBjb25zdCBza2VsZXRvbnMgPSBkZWZvcm1lcnMuc2tlbGV0b25zXG4gICAgY29uc3QgbW9ycGhUYXJnZXRzID0gZGVmb3JtZXJzLm1vcnBoVGFyZ2V0c1xuXG4gICAgY29uc3QgbW9kZWxOb2RlcyA9IHJlbGF0aW9uc2hpcHMucGFyZW50cy5tYXAoKHBhcmVudCkgPT4ge1xuICAgICAgcmV0dXJuIEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMuTW9kZWxbcGFyZW50LklEXVxuICAgIH0pXG5cbiAgICAvLyBkb24ndCBjcmVhdGUgZ2VvbWV0cnkgaWYgaXQgaXMgbm90IGFzc29jaWF0ZWQgd2l0aCBhbnkgbW9kZWxzXG4gICAgaWYgKG1vZGVsTm9kZXMubGVuZ3RoID09PSAwKSByZXR1cm5cblxuICAgIGNvbnN0IHNrZWxldG9uID0gcmVsYXRpb25zaGlwcy5jaGlsZHJlbi5yZWR1Y2UoKHNrZWxldG9uLCBjaGlsZCkgPT4ge1xuICAgICAgaWYgKHNrZWxldG9uc1tjaGlsZC5JRF0gIT09IHVuZGVmaW5lZCkgc2tlbGV0b24gPSBza2VsZXRvbnNbY2hpbGQuSURdXG5cbiAgICAgIHJldHVybiBza2VsZXRvblxuICAgIH0sIG51bGwpXG5cbiAgICBjb25zdCBtb3JwaFRhcmdldCA9IHJlbGF0aW9uc2hpcHMuY2hpbGRyZW4ucmVkdWNlKChtb3JwaFRhcmdldCwgY2hpbGQpID0+IHtcbiAgICAgIGlmIChtb3JwaFRhcmdldHNbY2hpbGQuSURdICE9PSB1bmRlZmluZWQpIG1vcnBoVGFyZ2V0ID0gbW9ycGhUYXJnZXRzW2NoaWxkLklEXVxuXG4gICAgICByZXR1cm4gbW9ycGhUYXJnZXRcbiAgICB9LCBudWxsKVxuXG4gICAgLy8gQXNzdW1lIG9uZSBtb2RlbCBhbmQgZ2V0IHRoZSBwcmVSb3RhdGlvbiBmcm9tIHRoYXRcbiAgICAvLyBpZiB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIG1vZGVsIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2VvbWV0cnkgdGhpcyBtYXkgY2F1c2UgcHJvYmxlbXNcbiAgICBjb25zdCBtb2RlbE5vZGUgPSBtb2RlbE5vZGVzWzBdXG5cbiAgICBjb25zdCB0cmFuc2Zvcm1EYXRhOiBhbnkgPSB7fVxuXG4gICAgaWYgKCdSb3RhdGlvbk9yZGVyJyBpbiBtb2RlbE5vZGUpIHRyYW5zZm9ybURhdGEuZXVsZXJPcmRlciA9IGdldEV1bGVyT3JkZXIobW9kZWxOb2RlLlJvdGF0aW9uT3JkZXIudmFsdWUpXG4gICAgaWYgKCdJbmhlcml0VHlwZScgaW4gbW9kZWxOb2RlKSB0cmFuc2Zvcm1EYXRhLmluaGVyaXRUeXBlID0gcGFyc2VJbnQobW9kZWxOb2RlLkluaGVyaXRUeXBlLnZhbHVlKVxuXG4gICAgaWYgKCdHZW9tZXRyaWNUcmFuc2xhdGlvbicgaW4gbW9kZWxOb2RlKSB0cmFuc2Zvcm1EYXRhLnRyYW5zbGF0aW9uID0gbW9kZWxOb2RlLkdlb21ldHJpY1RyYW5zbGF0aW9uLnZhbHVlXG4gICAgaWYgKCdHZW9tZXRyaWNSb3RhdGlvbicgaW4gbW9kZWxOb2RlKSB0cmFuc2Zvcm1EYXRhLnJvdGF0aW9uID0gbW9kZWxOb2RlLkdlb21ldHJpY1JvdGF0aW9uLnZhbHVlXG4gICAgaWYgKCdHZW9tZXRyaWNTY2FsaW5nJyBpbiBtb2RlbE5vZGUpIHRyYW5zZm9ybURhdGEuc2NhbGUgPSBtb2RlbE5vZGUuR2VvbWV0cmljU2NhbGluZy52YWx1ZVxuXG4gICAgY29uc3QgdHJhbnNmb3JtID0gZ2VuZXJhdGVUcmFuc2Zvcm0odHJhbnNmb3JtRGF0YSlcblxuICAgIHJldHVybiB0aGlzLmdlbkdlb21ldHJ5KGdlb05vZGUsIHNrZWxldG9uLCBtb3JwaFRhcmdldCwgdHJhbnNmb3JtKVxuICB9XG5cbiAgLy8gR2VuZXJhdGUgYSBCdWZmZXJHZW9tZXRyeSBmcm9tIGEgbm9kZSBpbiBGQlhUcmVlLk9iamVjdHMuR2VvbWV0cnlcbiAgZ2VuR2VvbWV0cnkoZ2VvTm9kZSwgc2tlbGV0b24sIG1vcnBoVGFyZ2V0LCBwcmVUcmFuc2Zvcm0pIHtcbiAgICBjb25zdCBnZW86IGFueSA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpXG4gICAgaWYgKGdlb05vZGUuYXR0ck5hbWUpIGdlby5uYW1lID0gZ2VvTm9kZS5hdHRyTmFtZVxuXG4gICAgY29uc3QgZ2VvSW5mbzogYW55ID0gdGhpcy5wYXJzZUdlb05vZGUoZ2VvTm9kZSwgc2tlbGV0b24pXG4gICAgY29uc3QgYnVmZmVyczogYW55ID0gdGhpcy5nZW5CdWZmZXJzKGdlb0luZm8pXG5cbiAgICBjb25zdCBwb3NpdGlvbkF0dHJpYnV0ZSA9IG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKGJ1ZmZlcnMudmVydGV4LCAzKVxuXG4gICAgcHJlVHJhbnNmb3JtLmFwcGx5VG9CdWZmZXJBdHRyaWJ1dGUocG9zaXRpb25BdHRyaWJ1dGUpXG5cbiAgICBnZW8uYWRkQXR0cmlidXRlKCdwb3NpdGlvbicsIHBvc2l0aW9uQXR0cmlidXRlKVxuXG4gICAgaWYgKGJ1ZmZlcnMuY29sb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgIGdlby5hZGRBdHRyaWJ1dGUoJ2NvbG9yJywgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoYnVmZmVycy5jb2xvcnMsIDMpKVxuICAgIH1cblxuICAgIGlmIChza2VsZXRvbikge1xuICAgICAgZ2VvLmFkZEF0dHJpYnV0ZSgnc2tpbkluZGV4JywgbmV3IFVpbnQxNkJ1ZmZlckF0dHJpYnV0ZShidWZmZXJzLndlaWdodHNJbmRpY2VzLCA0KSlcblxuICAgICAgZ2VvLmFkZEF0dHJpYnV0ZSgnc2tpbldlaWdodCcsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKGJ1ZmZlcnMudmVydGV4V2VpZ2h0cywgNCkpXG5cbiAgICAgIC8vIHVzZWQgbGF0ZXIgdG8gYmluZCB0aGUgc2tlbGV0b24gdG8gdGhlIG1vZGVsXG4gICAgICBnZW8uRkJYX0RlZm9ybWVyID0gc2tlbGV0b25cbiAgICB9XG5cbiAgICBpZiAoYnVmZmVycy5ub3JtYWwubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgbm9ybWFsQXR0cmlidXRlID0gbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoYnVmZmVycy5ub3JtYWwsIDMpXG5cbiAgICAgIGNvbnN0IG5vcm1hbE1hdHJpeCA9IG5ldyBNYXRyaXgzKCkuZ2V0Tm9ybWFsTWF0cml4KHByZVRyYW5zZm9ybSlcbiAgICAgIG5vcm1hbEF0dHJpYnV0ZS5hcHBseU1hdHJpeDMobm9ybWFsTWF0cml4KVxuXG4gICAgICBnZW8uYWRkQXR0cmlidXRlKCdub3JtYWwnLCBub3JtYWxBdHRyaWJ1dGUpXG4gICAgfVxuXG4gICAgYnVmZmVycy51dnMuZm9yRWFjaCgodXZCdWZmZXIsIGkpID0+IHtcbiAgICAgIC8vIHN1YnNlcXVlbnQgdXYgYnVmZmVycyBhcmUgY2FsbGVkICd1djEnLCAndXYyJywgLi4uXG4gICAgICBsZXQgbmFtZSA9ICd1dicgKyAoaSArIDEpLnRvU3RyaW5nKClcblxuICAgICAgLy8gdGhlIGZpcnN0IHV2IGJ1ZmZlciBpcyBqdXN0IGNhbGxlZCAndXYnXG4gICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICBuYW1lID0gJ3V2J1xuICAgICAgfVxuXG4gICAgICBnZW8uYWRkQXR0cmlidXRlKG5hbWUsIG5ldyBGbG9hdDMyQnVmZmVyQXR0cmlidXRlKGJ1ZmZlcnMudXZzW2ldLCAyKSlcbiAgICB9KVxuXG4gICAgaWYgKGdlb0luZm8ubWF0ZXJpYWwgJiYgZ2VvSW5mby5tYXRlcmlhbC5tYXBwaW5nVHlwZSAhPT0gJ0FsbFNhbWUnKSB7XG4gICAgICAvLyBDb252ZXJ0IHRoZSBtYXRlcmlhbCBpbmRpY2VzIG9mIGVhY2ggdmVydGV4IGludG8gcmVuZGVyaW5nIGdyb3VwcyBvbiB0aGUgZ2VvbWV0cnkuXG4gICAgICBsZXQgcHJldk1hdGVyaWFsSW5kZXggPSBidWZmZXJzLm1hdGVyaWFsSW5kZXhbMF1cbiAgICAgIGxldCBzdGFydEluZGV4ID0gMFxuXG4gICAgICBidWZmZXJzLm1hdGVyaWFsSW5kZXguZm9yRWFjaCgoY3VycmVudEluZGV4LCBpKSA9PiB7XG4gICAgICAgIGlmIChjdXJyZW50SW5kZXggIT09IHByZXZNYXRlcmlhbEluZGV4KSB7XG4gICAgICAgICAgZ2VvLmFkZEdyb3VwKHN0YXJ0SW5kZXgsIGkgLSBzdGFydEluZGV4LCBwcmV2TWF0ZXJpYWxJbmRleClcblxuICAgICAgICAgIHByZXZNYXRlcmlhbEluZGV4ID0gY3VycmVudEluZGV4XG4gICAgICAgICAgc3RhcnRJbmRleCA9IGlcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgLy8gdGhlIGxvb3AgYWJvdmUgZG9lc24ndCBhZGQgdGhlIGxhc3QgZ3JvdXAsIGRvIHRoYXQgaGVyZS5cbiAgICAgIGlmIChnZW8uZ3JvdXBzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgbGFzdEdyb3VwID0gZ2VvLmdyb3Vwc1tnZW8uZ3JvdXBzLmxlbmd0aCAtIDFdXG4gICAgICAgIGNvbnN0IGxhc3RJbmRleCA9IGxhc3RHcm91cC5zdGFydCArIGxhc3RHcm91cC5jb3VudFxuXG4gICAgICAgIGlmIChsYXN0SW5kZXggIT09IGJ1ZmZlcnMubWF0ZXJpYWxJbmRleC5sZW5ndGgpIHtcbiAgICAgICAgICBnZW8uYWRkR3JvdXAobGFzdEluZGV4LCBidWZmZXJzLm1hdGVyaWFsSW5kZXgubGVuZ3RoIC0gbGFzdEluZGV4LCBwcmV2TWF0ZXJpYWxJbmRleClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBjYXNlIHdoZXJlIHRoZXJlIGFyZSBtdWx0aXBsZSBtYXRlcmlhbHMgYnV0IHRoZSB3aG9sZSBnZW9tZXRyeSBpcyBvbmx5XG4gICAgICAvLyB1c2luZyBvbmUgb2YgdGhlbVxuICAgICAgaWYgKGdlby5ncm91cHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGdlby5hZGRHcm91cCgwLCBidWZmZXJzLm1hdGVyaWFsSW5kZXgubGVuZ3RoLCBidWZmZXJzLm1hdGVyaWFsSW5kZXhbMF0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5hZGRNb3JwaFRhcmdldHMoZ2VvLCBnZW9Ob2RlLCBtb3JwaFRhcmdldCwgcHJlVHJhbnNmb3JtKVxuXG4gICAgcmV0dXJuIGdlb1xuICB9XG5cbiAgcGFyc2VHZW9Ob2RlKGdlb05vZGUsIHNrZWxldG9uKSB7XG4gICAgY29uc3QgZ2VvSW5mbzogYW55ID0ge31cblxuICAgIGdlb0luZm8udmVydGV4UG9zaXRpb25zID0gZ2VvTm9kZS5WZXJ0aWNlcyAhPT0gdW5kZWZpbmVkID8gZ2VvTm9kZS5WZXJ0aWNlcy5hIDogW11cbiAgICBnZW9JbmZvLnZlcnRleEluZGljZXMgPSBnZW9Ob2RlLlBvbHlnb25WZXJ0ZXhJbmRleCAhPT0gdW5kZWZpbmVkID8gZ2VvTm9kZS5Qb2x5Z29uVmVydGV4SW5kZXguYSA6IFtdXG5cbiAgICBpZiAoZ2VvTm9kZS5MYXllckVsZW1lbnRDb2xvcikge1xuICAgICAgZ2VvSW5mby5jb2xvciA9IHRoaXMucGFyc2VWZXJ0ZXhDb2xvcnMoZ2VvTm9kZS5MYXllckVsZW1lbnRDb2xvclswXSlcbiAgICB9XG5cbiAgICBpZiAoZ2VvTm9kZS5MYXllckVsZW1lbnRNYXRlcmlhbCkge1xuICAgICAgZ2VvSW5mby5tYXRlcmlhbCA9IHRoaXMucGFyc2VNYXRlcmlhbEluZGljZXMoZ2VvTm9kZS5MYXllckVsZW1lbnRNYXRlcmlhbFswXSlcbiAgICB9XG5cbiAgICBpZiAoZ2VvTm9kZS5MYXllckVsZW1lbnROb3JtYWwpIHtcbiAgICAgIGdlb0luZm8ubm9ybWFsID0gdGhpcy5wYXJzZU5vcm1hbHMoZ2VvTm9kZS5MYXllckVsZW1lbnROb3JtYWxbMF0pXG4gICAgfVxuXG4gICAgaWYgKGdlb05vZGUuTGF5ZXJFbGVtZW50VVYpIHtcbiAgICAgIGdlb0luZm8udXYgPSBbXVxuXG4gICAgICBsZXQgaSA9IDBcbiAgICAgIHdoaWxlIChnZW9Ob2RlLkxheWVyRWxlbWVudFVWW2ldKSB7XG4gICAgICAgIGdlb0luZm8udXYucHVzaCh0aGlzLnBhcnNlVVZzKGdlb05vZGUuTGF5ZXJFbGVtZW50VVZbaV0pKVxuICAgICAgICBpKytcbiAgICAgIH1cbiAgICB9XG5cbiAgICBnZW9JbmZvLndlaWdodFRhYmxlID0ge31cblxuICAgIGlmIChza2VsZXRvbiAhPT0gbnVsbCkge1xuICAgICAgZ2VvSW5mby5za2VsZXRvbiA9IHNrZWxldG9uXG5cbiAgICAgIHNrZWxldG9uLnJhd0JvbmVzLmZvckVhY2goKHJhd0JvbmUsIGkpID0+IHtcbiAgICAgICAgLy8gbG9vcCBvdmVyIHRoZSBib25lJ3MgdmVydGV4IGluZGljZXMgYW5kIHdlaWdodHNcbiAgICAgICAgcmF3Qm9uZS5pbmRpY2VzLmZvckVhY2goKGluZGV4LCBqKSA9PiB7XG4gICAgICAgICAgaWYgKGdlb0luZm8ud2VpZ2h0VGFibGVbaW5kZXhdID09PSB1bmRlZmluZWQpIGdlb0luZm8ud2VpZ2h0VGFibGVbaW5kZXhdID0gW11cblxuICAgICAgICAgIGdlb0luZm8ud2VpZ2h0VGFibGVbaW5kZXhdLnB1c2goe1xuICAgICAgICAgICAgaWQ6IGksXG4gICAgICAgICAgICB3ZWlnaHQ6IHJhd0JvbmUud2VpZ2h0c1tqXVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBnZW9JbmZvXG4gIH1cblxuICBnZW5CdWZmZXJzKGdlb0luZm8pIHtcbiAgICBjb25zdCBidWZmZXJzOiBhbnkgPSB7XG4gICAgICB2ZXJ0ZXg6IFtdLFxuICAgICAgbm9ybWFsOiBbXSxcbiAgICAgIGNvbG9yczogW10sXG4gICAgICB1dnM6IFtdLFxuICAgICAgbWF0ZXJpYWxJbmRleDogW10sXG4gICAgICB2ZXJ0ZXhXZWlnaHRzOiBbXSxcbiAgICAgIHdlaWdodHNJbmRpY2VzOiBbXVxuICAgIH1cblxuICAgIGxldCBtYXRlcmlhbEluZGV4XG4gICAgbGV0IHBvbHlnb25JbmRleCA9IDBcbiAgICBsZXQgZmFjZUxlbmd0aCA9IDBcbiAgICBsZXQgZGlzcGxheWVkV2VpZ2h0c1dhcm5pbmcgPSBmYWxzZVxuXG4gICAgLy8gdGhlc2Ugd2lsbCBob2xkIGRhdGEgZm9yIGEgc2luZ2xlIGZhY2VcbiAgICBsZXQgZmFjZVBvc2l0aW9uSW5kZXhlczogYW55ID0gW11cbiAgICBsZXQgZmFjZU5vcm1hbHM6IGFueSA9IFtdXG4gICAgbGV0IGZhY2VDb2xvcnM6IGFueSA9IFtdXG4gICAgbGV0IGZhY2VVVnM6IGFueSA9IFtdXG4gICAgbGV0IGZhY2VXZWlnaHRzOiBhbnkgPSBbXVxuICAgIGxldCBmYWNlV2VpZ2h0SW5kaWNlczogYW55ID0gW11cblxuICAgIGdlb0luZm8udmVydGV4SW5kaWNlcy5mb3JFYWNoKCh2ZXJ0ZXhJbmRleCwgcG9seWdvblZlcnRleEluZGV4KSA9PiB7XG4gICAgICBsZXQgZW5kT2ZGYWNlID0gZmFsc2VcblxuICAgICAgLy8gRmFjZSBpbmRleCBhbmQgdmVydGV4IGluZGV4IGFycmF5cyBhcmUgY29tYmluZWQgaW4gYSBzaW5nbGUgYXJyYXlcbiAgICAgIC8vIEEgY3ViZSB3aXRoIHF1YWQgZmFjZXMgbG9va3MgbGlrZSB0aGlzOlxuICAgICAgLy8gUG9seWdvblZlcnRleEluZGV4OiAqMjQge1xuICAgICAgLy8gIGE6IDAsIDEsIDMsIC0zLCAyLCAzLCA1LCAtNSwgNCwgNSwgNywgLTcsIDYsIDcsIDEsIC0xLCAxLCA3LCA1LCAtNCwgNiwgMCwgMiwgLTVcbiAgICAgIC8vICB9XG4gICAgICAvLyBOZWdhdGl2ZSBudW1iZXJzIG1hcmsgdGhlIGVuZCBvZiBhIGZhY2UgLSBmaXJzdCBmYWNlIGhlcmUgaXMgMCwgMSwgMywgLTNcbiAgICAgIC8vIHRvIGZpbmQgaW5kZXggb2YgbGFzdCB2ZXJ0ZXggYml0IHNoaWZ0IHRoZSBpbmRleDogXiAtIDFcbiAgICAgIGlmICh2ZXJ0ZXhJbmRleCA8IDApIHtcbiAgICAgICAgdmVydGV4SW5kZXggPSB2ZXJ0ZXhJbmRleCBeIC0xIC8vIGVxdWl2YWxlbnQgdG8gKCB4ICogLTEgKSAtIDFcbiAgICAgICAgZW5kT2ZGYWNlID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBsZXQgd2VpZ2h0SW5kaWNlczogYW55ID0gW11cbiAgICAgIGxldCB3ZWlnaHRzOiBhbnkgPSBbXVxuXG4gICAgICBmYWNlUG9zaXRpb25JbmRleGVzLnB1c2godmVydGV4SW5kZXggKiAzLCB2ZXJ0ZXhJbmRleCAqIDMgKyAxLCB2ZXJ0ZXhJbmRleCAqIDMgKyAyKVxuXG4gICAgICBpZiAoZ2VvSW5mby5jb2xvcikge1xuICAgICAgICBjb25zdCBkYXRhID0gZ2V0RGF0YShwb2x5Z29uVmVydGV4SW5kZXgsIHBvbHlnb25JbmRleCwgdmVydGV4SW5kZXgsIGdlb0luZm8uY29sb3IpXG5cbiAgICAgICAgZmFjZUNvbG9ycy5wdXNoKGRhdGFbMF0sIGRhdGFbMV0sIGRhdGFbMl0pXG4gICAgICB9XG5cbiAgICAgIGlmIChnZW9JbmZvLnNrZWxldG9uKSB7XG4gICAgICAgIGlmIChnZW9JbmZvLndlaWdodFRhYmxlW3ZlcnRleEluZGV4XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgZ2VvSW5mby53ZWlnaHRUYWJsZVt2ZXJ0ZXhJbmRleF0uZm9yRWFjaCgod3QpID0+IHtcbiAgICAgICAgICAgIHdlaWdodHMucHVzaCh3dC53ZWlnaHQpXG4gICAgICAgICAgICB3ZWlnaHRJbmRpY2VzLnB1c2god3QuaWQpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3ZWlnaHRzLmxlbmd0aCA+IDQpIHtcbiAgICAgICAgICBpZiAoIWRpc3BsYXllZFdlaWdodHNXYXJuaW5nKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICdGQlhMb2FkZXI6IFZlcnRleCBoYXMgbW9yZSB0aGFuIDQgc2tpbm5pbmcgd2VpZ2h0cyBhc3NpZ25lZCB0byB2ZXJ0ZXguIERlbGV0aW5nIGFkZGl0aW9uYWwgd2VpZ2h0cy4nXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBkaXNwbGF5ZWRXZWlnaHRzV2FybmluZyA9IHRydWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCB3SW5kZXggPSBbMCwgMCwgMCwgMF1cbiAgICAgICAgICBjb25zdCBXZWlnaHQgPSBbMCwgMCwgMCwgMF1cblxuICAgICAgICAgIHdlaWdodHMuZm9yRWFjaCgod2VpZ2h0LCB3ZWlnaHRJbmRleCkgPT4ge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRXZWlnaHQgPSB3ZWlnaHRcbiAgICAgICAgICAgIGxldCBjdXJyZW50SW5kZXggPSB3ZWlnaHRJbmRpY2VzW3dlaWdodEluZGV4XVxuXG4gICAgICAgICAgICBXZWlnaHQuZm9yRWFjaCgoY29tcGFyZWRXZWlnaHQsIGNvbXBhcmVkV2VpZ2h0SW5kZXgsIGNvbXBhcmVkV2VpZ2h0QXJyYXkpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGN1cnJlbnRXZWlnaHQgPiBjb21wYXJlZFdlaWdodCkge1xuICAgICAgICAgICAgICAgIGNvbXBhcmVkV2VpZ2h0QXJyYXlbY29tcGFyZWRXZWlnaHRJbmRleF0gPSBjdXJyZW50V2VpZ2h0XG4gICAgICAgICAgICAgICAgY3VycmVudFdlaWdodCA9IGNvbXBhcmVkV2VpZ2h0XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0bXAgPSB3SW5kZXhbY29tcGFyZWRXZWlnaHRJbmRleF1cbiAgICAgICAgICAgICAgICB3SW5kZXhbY29tcGFyZWRXZWlnaHRJbmRleF0gPSBjdXJyZW50SW5kZXhcbiAgICAgICAgICAgICAgICBjdXJyZW50SW5kZXggPSB0bXBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgd2VpZ2h0SW5kaWNlcyA9IHdJbmRleFxuICAgICAgICAgIHdlaWdodHMgPSBXZWlnaHRcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHRoZSB3ZWlnaHQgYXJyYXkgaXMgc2hvcnRlciB0aGFuIDQgcGFkIHdpdGggMHNcbiAgICAgICAgd2hpbGUgKHdlaWdodHMubGVuZ3RoIDwgNCkge1xuICAgICAgICAgIHdlaWdodHMucHVzaCgwKVxuICAgICAgICAgIHdlaWdodEluZGljZXMucHVzaCgwKVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyArK2kpIHtcbiAgICAgICAgICBmYWNlV2VpZ2h0cy5wdXNoKHdlaWdodHNbaV0pXG4gICAgICAgICAgZmFjZVdlaWdodEluZGljZXMucHVzaCh3ZWlnaHRJbmRpY2VzW2ldKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChnZW9JbmZvLm5vcm1hbCkge1xuICAgICAgICBjb25zdCBkYXRhID0gZ2V0RGF0YShwb2x5Z29uVmVydGV4SW5kZXgsIHBvbHlnb25JbmRleCwgdmVydGV4SW5kZXgsIGdlb0luZm8ubm9ybWFsKVxuXG4gICAgICAgIGZhY2VOb3JtYWxzLnB1c2goZGF0YVswXSwgZGF0YVsxXSwgZGF0YVsyXSlcbiAgICAgIH1cblxuICAgICAgaWYgKGdlb0luZm8ubWF0ZXJpYWwgJiYgZ2VvSW5mby5tYXRlcmlhbC5tYXBwaW5nVHlwZSAhPT0gJ0FsbFNhbWUnKSB7XG4gICAgICAgIGNvbnN0IG1hdGVyaWFsSW5kZXggPSBnZXREYXRhKHBvbHlnb25WZXJ0ZXhJbmRleCwgcG9seWdvbkluZGV4LCB2ZXJ0ZXhJbmRleCwgZ2VvSW5mby5tYXRlcmlhbClbMF1cbiAgICAgIH1cblxuICAgICAgaWYgKGdlb0luZm8udXYpIHtcbiAgICAgICAgZ2VvSW5mby51di5mb3JFYWNoKCh1diwgaSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBnZXREYXRhKHBvbHlnb25WZXJ0ZXhJbmRleCwgcG9seWdvbkluZGV4LCB2ZXJ0ZXhJbmRleCwgdXYpXG5cbiAgICAgICAgICBpZiAoZmFjZVVWc1tpXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmYWNlVVZzW2ldID0gW11cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmYWNlVVZzW2ldLnB1c2goZGF0YVswXSlcbiAgICAgICAgICBmYWNlVVZzW2ldLnB1c2goZGF0YVsxXSlcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgZmFjZUxlbmd0aCsrXG5cbiAgICAgIGlmIChlbmRPZkZhY2UpIHtcbiAgICAgICAgdGhpcy5nZW5GYWNlKFxuICAgICAgICAgIGJ1ZmZlcnMsXG4gICAgICAgICAgZ2VvSW5mbyxcbiAgICAgICAgICBmYWNlUG9zaXRpb25JbmRleGVzLFxuICAgICAgICAgIG1hdGVyaWFsSW5kZXgsXG4gICAgICAgICAgZmFjZU5vcm1hbHMsXG4gICAgICAgICAgZmFjZUNvbG9ycyxcbiAgICAgICAgICBmYWNlVVZzLFxuICAgICAgICAgIGZhY2VXZWlnaHRzLFxuICAgICAgICAgIGZhY2VXZWlnaHRJbmRpY2VzLFxuICAgICAgICAgIGZhY2VMZW5ndGhcbiAgICAgICAgKVxuXG4gICAgICAgIHBvbHlnb25JbmRleCsrXG4gICAgICAgIGZhY2VMZW5ndGggPSAwXG5cbiAgICAgICAgLy8gcmVzZXQgYXJyYXlzIGZvciB0aGUgbmV4dCBmYWNlXG4gICAgICAgIGZhY2VQb3NpdGlvbkluZGV4ZXMgPSBbXVxuICAgICAgICBmYWNlTm9ybWFscyA9IFtdXG4gICAgICAgIGZhY2VDb2xvcnMgPSBbXVxuICAgICAgICBmYWNlVVZzID0gW11cbiAgICAgICAgZmFjZVdlaWdodHMgPSBbXVxuICAgICAgICBmYWNlV2VpZ2h0SW5kaWNlcyA9IFtdXG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiBidWZmZXJzXG4gIH1cblxuICAvLyBHZW5lcmF0ZSBkYXRhIGZvciBhIHNpbmdsZSBmYWNlIGluIGEgZ2VvbWV0cnkuIElmIHRoZSBmYWNlIGlzIGEgcXVhZCB0aGVuIHNwbGl0IGl0IGludG8gMiB0cmlzXG4gIGdlbkZhY2UoXG4gICAgYnVmZmVycyxcbiAgICBnZW9JbmZvLFxuICAgIGZhY2VQb3NpdGlvbkluZGV4ZXMsXG4gICAgbWF0ZXJpYWxJbmRleCxcbiAgICBmYWNlTm9ybWFscyxcbiAgICBmYWNlQ29sb3JzLFxuICAgIGZhY2VVVnMsXG4gICAgZmFjZVdlaWdodHMsXG4gICAgZmFjZVdlaWdodEluZGljZXMsXG4gICAgZmFjZUxlbmd0aFxuICApIHtcbiAgICBmb3IgKGxldCBpID0gMjsgaSA8IGZhY2VMZW5ndGg7IGkrKykge1xuICAgICAgYnVmZmVycy52ZXJ0ZXgucHVzaChnZW9JbmZvLnZlcnRleFBvc2l0aW9uc1tmYWNlUG9zaXRpb25JbmRleGVzWzBdXSlcbiAgICAgIGJ1ZmZlcnMudmVydGV4LnB1c2goZ2VvSW5mby52ZXJ0ZXhQb3NpdGlvbnNbZmFjZVBvc2l0aW9uSW5kZXhlc1sxXV0pXG4gICAgICBidWZmZXJzLnZlcnRleC5wdXNoKGdlb0luZm8udmVydGV4UG9zaXRpb25zW2ZhY2VQb3NpdGlvbkluZGV4ZXNbMl1dKVxuXG4gICAgICBidWZmZXJzLnZlcnRleC5wdXNoKGdlb0luZm8udmVydGV4UG9zaXRpb25zW2ZhY2VQb3NpdGlvbkluZGV4ZXNbKGkgLSAxKSAqIDNdXSlcbiAgICAgIGJ1ZmZlcnMudmVydGV4LnB1c2goZ2VvSW5mby52ZXJ0ZXhQb3NpdGlvbnNbZmFjZVBvc2l0aW9uSW5kZXhlc1soaSAtIDEpICogMyArIDFdXSlcbiAgICAgIGJ1ZmZlcnMudmVydGV4LnB1c2goZ2VvSW5mby52ZXJ0ZXhQb3NpdGlvbnNbZmFjZVBvc2l0aW9uSW5kZXhlc1soaSAtIDEpICogMyArIDJdXSlcblxuICAgICAgYnVmZmVycy52ZXJ0ZXgucHVzaChnZW9JbmZvLnZlcnRleFBvc2l0aW9uc1tmYWNlUG9zaXRpb25JbmRleGVzW2kgKiAzXV0pXG4gICAgICBidWZmZXJzLnZlcnRleC5wdXNoKGdlb0luZm8udmVydGV4UG9zaXRpb25zW2ZhY2VQb3NpdGlvbkluZGV4ZXNbaSAqIDMgKyAxXV0pXG4gICAgICBidWZmZXJzLnZlcnRleC5wdXNoKGdlb0luZm8udmVydGV4UG9zaXRpb25zW2ZhY2VQb3NpdGlvbkluZGV4ZXNbaSAqIDMgKyAyXV0pXG5cbiAgICAgIGlmIChnZW9JbmZvLnNrZWxldG9uKSB7XG4gICAgICAgIGJ1ZmZlcnMudmVydGV4V2VpZ2h0cy5wdXNoKGZhY2VXZWlnaHRzWzBdKVxuICAgICAgICBidWZmZXJzLnZlcnRleFdlaWdodHMucHVzaChmYWNlV2VpZ2h0c1sxXSlcbiAgICAgICAgYnVmZmVycy52ZXJ0ZXhXZWlnaHRzLnB1c2goZmFjZVdlaWdodHNbMl0pXG4gICAgICAgIGJ1ZmZlcnMudmVydGV4V2VpZ2h0cy5wdXNoKGZhY2VXZWlnaHRzWzNdKVxuXG4gICAgICAgIGJ1ZmZlcnMudmVydGV4V2VpZ2h0cy5wdXNoKGZhY2VXZWlnaHRzWyhpIC0gMSkgKiA0XSlcbiAgICAgICAgYnVmZmVycy52ZXJ0ZXhXZWlnaHRzLnB1c2goZmFjZVdlaWdodHNbKGkgLSAxKSAqIDQgKyAxXSlcbiAgICAgICAgYnVmZmVycy52ZXJ0ZXhXZWlnaHRzLnB1c2goZmFjZVdlaWdodHNbKGkgLSAxKSAqIDQgKyAyXSlcbiAgICAgICAgYnVmZmVycy52ZXJ0ZXhXZWlnaHRzLnB1c2goZmFjZVdlaWdodHNbKGkgLSAxKSAqIDQgKyAzXSlcblxuICAgICAgICBidWZmZXJzLnZlcnRleFdlaWdodHMucHVzaChmYWNlV2VpZ2h0c1tpICogNF0pXG4gICAgICAgIGJ1ZmZlcnMudmVydGV4V2VpZ2h0cy5wdXNoKGZhY2VXZWlnaHRzW2kgKiA0ICsgMV0pXG4gICAgICAgIGJ1ZmZlcnMudmVydGV4V2VpZ2h0cy5wdXNoKGZhY2VXZWlnaHRzW2kgKiA0ICsgMl0pXG4gICAgICAgIGJ1ZmZlcnMudmVydGV4V2VpZ2h0cy5wdXNoKGZhY2VXZWlnaHRzW2kgKiA0ICsgM10pXG5cbiAgICAgICAgYnVmZmVycy53ZWlnaHRzSW5kaWNlcy5wdXNoKGZhY2VXZWlnaHRJbmRpY2VzWzBdKVxuICAgICAgICBidWZmZXJzLndlaWdodHNJbmRpY2VzLnB1c2goZmFjZVdlaWdodEluZGljZXNbMV0pXG4gICAgICAgIGJ1ZmZlcnMud2VpZ2h0c0luZGljZXMucHVzaChmYWNlV2VpZ2h0SW5kaWNlc1syXSlcbiAgICAgICAgYnVmZmVycy53ZWlnaHRzSW5kaWNlcy5wdXNoKGZhY2VXZWlnaHRJbmRpY2VzWzNdKVxuXG4gICAgICAgIGJ1ZmZlcnMud2VpZ2h0c0luZGljZXMucHVzaChmYWNlV2VpZ2h0SW5kaWNlc1soaSAtIDEpICogNF0pXG4gICAgICAgIGJ1ZmZlcnMud2VpZ2h0c0luZGljZXMucHVzaChmYWNlV2VpZ2h0SW5kaWNlc1soaSAtIDEpICogNCArIDFdKVxuICAgICAgICBidWZmZXJzLndlaWdodHNJbmRpY2VzLnB1c2goZmFjZVdlaWdodEluZGljZXNbKGkgLSAxKSAqIDQgKyAyXSlcbiAgICAgICAgYnVmZmVycy53ZWlnaHRzSW5kaWNlcy5wdXNoKGZhY2VXZWlnaHRJbmRpY2VzWyhpIC0gMSkgKiA0ICsgM10pXG5cbiAgICAgICAgYnVmZmVycy53ZWlnaHRzSW5kaWNlcy5wdXNoKGZhY2VXZWlnaHRJbmRpY2VzW2kgKiA0XSlcbiAgICAgICAgYnVmZmVycy53ZWlnaHRzSW5kaWNlcy5wdXNoKGZhY2VXZWlnaHRJbmRpY2VzW2kgKiA0ICsgMV0pXG4gICAgICAgIGJ1ZmZlcnMud2VpZ2h0c0luZGljZXMucHVzaChmYWNlV2VpZ2h0SW5kaWNlc1tpICogNCArIDJdKVxuICAgICAgICBidWZmZXJzLndlaWdodHNJbmRpY2VzLnB1c2goZmFjZVdlaWdodEluZGljZXNbaSAqIDQgKyAzXSlcbiAgICAgIH1cblxuICAgICAgaWYgKGdlb0luZm8uY29sb3IpIHtcbiAgICAgICAgYnVmZmVycy5jb2xvcnMucHVzaChmYWNlQ29sb3JzWzBdKVxuICAgICAgICBidWZmZXJzLmNvbG9ycy5wdXNoKGZhY2VDb2xvcnNbMV0pXG4gICAgICAgIGJ1ZmZlcnMuY29sb3JzLnB1c2goZmFjZUNvbG9yc1syXSlcblxuICAgICAgICBidWZmZXJzLmNvbG9ycy5wdXNoKGZhY2VDb2xvcnNbKGkgLSAxKSAqIDNdKVxuICAgICAgICBidWZmZXJzLmNvbG9ycy5wdXNoKGZhY2VDb2xvcnNbKGkgLSAxKSAqIDMgKyAxXSlcbiAgICAgICAgYnVmZmVycy5jb2xvcnMucHVzaChmYWNlQ29sb3JzWyhpIC0gMSkgKiAzICsgMl0pXG5cbiAgICAgICAgYnVmZmVycy5jb2xvcnMucHVzaChmYWNlQ29sb3JzW2kgKiAzXSlcbiAgICAgICAgYnVmZmVycy5jb2xvcnMucHVzaChmYWNlQ29sb3JzW2kgKiAzICsgMV0pXG4gICAgICAgIGJ1ZmZlcnMuY29sb3JzLnB1c2goZmFjZUNvbG9yc1tpICogMyArIDJdKVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2VvSW5mby5tYXRlcmlhbCAmJiBnZW9JbmZvLm1hdGVyaWFsLm1hcHBpbmdUeXBlICE9PSAnQWxsU2FtZScpIHtcbiAgICAgICAgYnVmZmVycy5tYXRlcmlhbEluZGV4LnB1c2gobWF0ZXJpYWxJbmRleClcbiAgICAgICAgYnVmZmVycy5tYXRlcmlhbEluZGV4LnB1c2gobWF0ZXJpYWxJbmRleClcbiAgICAgICAgYnVmZmVycy5tYXRlcmlhbEluZGV4LnB1c2gobWF0ZXJpYWxJbmRleClcbiAgICAgIH1cblxuICAgICAgaWYgKGdlb0luZm8ubm9ybWFsKSB7XG4gICAgICAgIGJ1ZmZlcnMubm9ybWFsLnB1c2goZmFjZU5vcm1hbHNbMF0pXG4gICAgICAgIGJ1ZmZlcnMubm9ybWFsLnB1c2goZmFjZU5vcm1hbHNbMV0pXG4gICAgICAgIGJ1ZmZlcnMubm9ybWFsLnB1c2goZmFjZU5vcm1hbHNbMl0pXG5cbiAgICAgICAgYnVmZmVycy5ub3JtYWwucHVzaChmYWNlTm9ybWFsc1soaSAtIDEpICogM10pXG4gICAgICAgIGJ1ZmZlcnMubm9ybWFsLnB1c2goZmFjZU5vcm1hbHNbKGkgLSAxKSAqIDMgKyAxXSlcbiAgICAgICAgYnVmZmVycy5ub3JtYWwucHVzaChmYWNlTm9ybWFsc1soaSAtIDEpICogMyArIDJdKVxuXG4gICAgICAgIGJ1ZmZlcnMubm9ybWFsLnB1c2goZmFjZU5vcm1hbHNbaSAqIDNdKVxuICAgICAgICBidWZmZXJzLm5vcm1hbC5wdXNoKGZhY2VOb3JtYWxzW2kgKiAzICsgMV0pXG4gICAgICAgIGJ1ZmZlcnMubm9ybWFsLnB1c2goZmFjZU5vcm1hbHNbaSAqIDMgKyAyXSlcbiAgICAgIH1cblxuICAgICAgaWYgKGdlb0luZm8udXYpIHtcbiAgICAgICAgZ2VvSW5mby51di5mb3JFYWNoKCh1diwgaikgPT4ge1xuICAgICAgICAgIGlmIChidWZmZXJzLnV2c1tqXSA9PT0gdW5kZWZpbmVkKSBidWZmZXJzLnV2c1tqXSA9IFtdXG5cbiAgICAgICAgICBidWZmZXJzLnV2c1tqXS5wdXNoKGZhY2VVVnNbal1bMF0pXG4gICAgICAgICAgYnVmZmVycy51dnNbal0ucHVzaChmYWNlVVZzW2pdWzFdKVxuXG4gICAgICAgICAgYnVmZmVycy51dnNbal0ucHVzaChmYWNlVVZzW2pdWyhpIC0gMSkgKiAyXSlcbiAgICAgICAgICBidWZmZXJzLnV2c1tqXS5wdXNoKGZhY2VVVnNbal1bKGkgLSAxKSAqIDIgKyAxXSlcblxuICAgICAgICAgIGJ1ZmZlcnMudXZzW2pdLnB1c2goZmFjZVVWc1tqXVtpICogMl0pXG4gICAgICAgICAgYnVmZmVycy51dnNbal0ucHVzaChmYWNlVVZzW2pdW2kgKiAyICsgMV0pXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYWRkTW9ycGhUYXJnZXRzKHBhcmVudEdlbywgcGFyZW50R2VvTm9kZSwgbW9ycGhUYXJnZXQsIHByZVRyYW5zZm9ybSkge1xuICAgIGlmIChtb3JwaFRhcmdldCA9PT0gbnVsbCkgcmV0dXJuXG5cbiAgICBwYXJlbnRHZW8ubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uID0gW11cbiAgICAvLyBwYXJlbnRHZW8ubW9ycGhBdHRyaWJ1dGVzLm5vcm1hbCA9IFtdOyAvLyBub3QgaW1wbGVtZW50ZWRcblxuICAgIG1vcnBoVGFyZ2V0LnJhd1RhcmdldHMuZm9yRWFjaCgocmF3VGFyZ2V0KSA9PiB7XG4gICAgICBjb25zdCBtb3JwaEdlb05vZGUgPSBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzLkdlb21ldHJ5W3Jhd1RhcmdldC5nZW9JRF1cblxuICAgICAgaWYgKG1vcnBoR2VvTm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuZ2VuTW9ycGhHZW9tZXRyeShwYXJlbnRHZW8sIHBhcmVudEdlb05vZGUsIG1vcnBoR2VvTm9kZSwgcHJlVHJhbnNmb3JtLCByYXdUYXJnZXQubmFtZSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgLy8gYSBtb3JwaCBnZW9tZXRyeSBub2RlIGlzIHNpbWlsYXIgdG8gYSBzdGFuZGFyZCAgbm9kZSwgYW5kIHRoZSBub2RlIGlzIGFsc28gY29udGFpbmVkXG4gIC8vIGluIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeSwgaG93ZXZlciBpdCBjYW4gb25seSBoYXZlIGF0dHJpYnV0ZXMgZm9yIHBvc2l0aW9uLCBub3JtYWxcbiAgLy8gYW5kIGEgc3BlY2lhbCBhdHRyaWJ1dGUgSW5kZXggZGVmaW5pbmcgd2hpY2ggdmVydGljZXMgb2YgdGhlIG9yaWdpbmFsIGdlb21ldHJ5IGFyZSBhZmZlY3RlZFxuICAvLyBOb3JtYWwgYW5kIHBvc2l0aW9uIGF0dHJpYnV0ZXMgb25seSBoYXZlIGRhdGEgZm9yIHRoZSB2ZXJ0aWNlcyB0aGF0IGFyZSBhZmZlY3RlZCBieSB0aGUgbW9ycGhcbiAgZ2VuTW9ycGhHZW9tZXRyeShwYXJlbnRHZW8sIHBhcmVudEdlb05vZGUsIG1vcnBoR2VvTm9kZSwgcHJlVHJhbnNmb3JtLCBuYW1lKSB7XG4gICAgY29uc3QgbW9ycGhHZW8gPSBuZXcgQnVmZmVyR2VvbWV0cnkoKVxuICAgIGlmIChtb3JwaEdlb05vZGUuYXR0ck5hbWUpIG1vcnBoR2VvLm5hbWUgPSBtb3JwaEdlb05vZGUuYXR0ck5hbWVcblxuICAgIGNvbnN0IHZlcnRleEluZGljZXMgPSBwYXJlbnRHZW9Ob2RlLlBvbHlnb25WZXJ0ZXhJbmRleCAhPT0gdW5kZWZpbmVkID8gcGFyZW50R2VvTm9kZS5Qb2x5Z29uVmVydGV4SW5kZXguYSA6IFtdXG5cbiAgICAvLyBtYWtlIGEgY29weSBvZiB0aGUgcGFyZW50J3MgdmVydGV4IHBvc2l0aW9uc1xuICAgIGNvbnN0IHZlcnRleFBvc2l0aW9ucyA9IHBhcmVudEdlb05vZGUuVmVydGljZXMgIT09IHVuZGVmaW5lZCA/IHBhcmVudEdlb05vZGUuVmVydGljZXMuYS5zbGljZSgpIDogW11cblxuICAgIGNvbnN0IG1vcnBoUG9zaXRpb25zID0gbW9ycGhHZW9Ob2RlLlZlcnRpY2VzICE9PSB1bmRlZmluZWQgPyBtb3JwaEdlb05vZGUuVmVydGljZXMuYSA6IFtdXG4gICAgY29uc3QgaW5kaWNlcyA9IG1vcnBoR2VvTm9kZS5JbmRleGVzICE9PSB1bmRlZmluZWQgPyBtb3JwaEdlb05vZGUuSW5kZXhlcy5hIDogW11cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5kaWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbW9ycGhJbmRleCA9IGluZGljZXNbaV0gKiAzXG5cbiAgICAgIC8vIEZCWCBmb3JtYXQgdXNlcyBibGVuZCBzaGFwZXMgcmF0aGVyIHRoYW4gbW9ycGggdGFyZ2V0cy4gVGhpcyBjYW4gYmUgY29udmVydGVkXG4gICAgICAvLyBieSBhZGRpdGl2ZWx5IGNvbWJpbmluZyB0aGUgYmxlbmQgc2hhcGUgcG9zaXRpb25zIHdpdGggdGhlIG9yaWdpbmFsIGdlb21ldHJ5J3MgcG9zaXRpb25zXG4gICAgICB2ZXJ0ZXhQb3NpdGlvbnNbbW9ycGhJbmRleF0gKz0gbW9ycGhQb3NpdGlvbnNbaSAqIDNdXG4gICAgICB2ZXJ0ZXhQb3NpdGlvbnNbbW9ycGhJbmRleCArIDFdICs9IG1vcnBoUG9zaXRpb25zW2kgKiAzICsgMV1cbiAgICAgIHZlcnRleFBvc2l0aW9uc1ttb3JwaEluZGV4ICsgMl0gKz0gbW9ycGhQb3NpdGlvbnNbaSAqIDMgKyAyXVxuICAgIH1cblxuICAgIC8vIFRPRE86IGFkZCBtb3JwaCBub3JtYWwgc3VwcG9ydFxuICAgIGNvbnN0IG1vcnBoR2VvSW5mbyA9IHtcbiAgICAgIHZlcnRleEluZGljZXM6IHZlcnRleEluZGljZXMsXG4gICAgICB2ZXJ0ZXhQb3NpdGlvbnM6IHZlcnRleFBvc2l0aW9uc1xuICAgIH1cblxuICAgIGNvbnN0IG1vcnBoQnVmZmVycyA9IHRoaXMuZ2VuQnVmZmVycyhtb3JwaEdlb0luZm8pXG5cbiAgICBjb25zdCBwb3NpdGlvbkF0dHJpYnV0ZTogYW55ID0gbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUobW9ycGhCdWZmZXJzLnZlcnRleCwgMylcbiAgICBwb3NpdGlvbkF0dHJpYnV0ZS5uYW1lID0gbmFtZSB8fCBtb3JwaEdlb05vZGUuYXR0ck5hbWVcblxuICAgIHByZVRyYW5zZm9ybS5hcHBseVRvQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9uQXR0cmlidXRlKVxuXG4gICAgcGFyZW50R2VvLm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbi5wdXNoKHBvc2l0aW9uQXR0cmlidXRlKVxuICB9XG5cbiAgLy8gUGFyc2Ugbm9ybWFsIGZyb20gRkJYVHJlZS5PYmplY3RzLkdlb21ldHJ5LkxheWVyRWxlbWVudE5vcm1hbCBpZiBpdCBleGlzdHNcbiAgcGFyc2VOb3JtYWxzKE5vcm1hbE5vZGUpIHtcbiAgICBjb25zdCBtYXBwaW5nVHlwZSA9IE5vcm1hbE5vZGUuTWFwcGluZ0luZm9ybWF0aW9uVHlwZVxuICAgIGNvbnN0IHJlZmVyZW5jZVR5cGUgPSBOb3JtYWxOb2RlLlJlZmVyZW5jZUluZm9ybWF0aW9uVHlwZVxuICAgIGNvbnN0IGJ1ZmZlciA9IE5vcm1hbE5vZGUuTm9ybWFscy5hXG4gICAgbGV0IGluZGV4QnVmZmVyOiBhbnkgPSBbXVxuICAgIGlmIChyZWZlcmVuY2VUeXBlID09PSAnSW5kZXhUb0RpcmVjdCcpIHtcbiAgICAgIGlmICgnTm9ybWFsSW5kZXgnIGluIE5vcm1hbE5vZGUpIHtcbiAgICAgICAgaW5kZXhCdWZmZXIgPSBOb3JtYWxOb2RlLk5vcm1hbEluZGV4LmFcbiAgICAgIH0gZWxzZSBpZiAoJ05vcm1hbHNJbmRleCcgaW4gTm9ybWFsTm9kZSkge1xuICAgICAgICBpbmRleEJ1ZmZlciA9IE5vcm1hbE5vZGUuTm9ybWFsc0luZGV4LmFcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZGF0YVNpemU6IDMsXG4gICAgICBidWZmZXI6IGJ1ZmZlcixcbiAgICAgIGluZGljZXM6IGluZGV4QnVmZmVyLFxuICAgICAgbWFwcGluZ1R5cGU6IG1hcHBpbmdUeXBlLFxuICAgICAgcmVmZXJlbmNlVHlwZTogcmVmZXJlbmNlVHlwZVxuICAgIH1cbiAgfVxuXG4gIC8vIFBhcnNlIFVWcyBmcm9tIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeS5MYXllckVsZW1lbnRVViBpZiBpdCBleGlzdHNcbiAgcGFyc2VVVnMoVVZOb2RlKSB7XG4gICAgY29uc3QgbWFwcGluZ1R5cGUgPSBVVk5vZGUuTWFwcGluZ0luZm9ybWF0aW9uVHlwZVxuICAgIGNvbnN0IHJlZmVyZW5jZVR5cGUgPSBVVk5vZGUuUmVmZXJlbmNlSW5mb3JtYXRpb25UeXBlXG4gICAgY29uc3QgYnVmZmVyID0gVVZOb2RlLlVWLmFcbiAgICBsZXQgaW5kZXhCdWZmZXIgPSBbXVxuICAgIGlmIChyZWZlcmVuY2VUeXBlID09PSAnSW5kZXhUb0RpcmVjdCcpIHtcbiAgICAgIGluZGV4QnVmZmVyID0gVVZOb2RlLlVWSW5kZXguYVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhU2l6ZTogMixcbiAgICAgIGJ1ZmZlcjogYnVmZmVyLFxuICAgICAgaW5kaWNlczogaW5kZXhCdWZmZXIsXG4gICAgICBtYXBwaW5nVHlwZTogbWFwcGluZ1R5cGUsXG4gICAgICByZWZlcmVuY2VUeXBlOiByZWZlcmVuY2VUeXBlXG4gICAgfVxuICB9XG5cbiAgLy8gUGFyc2UgVmVydGV4IENvbG9ycyBmcm9tIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeS5MYXllckVsZW1lbnRDb2xvciBpZiBpdCBleGlzdHNcbiAgcGFyc2VWZXJ0ZXhDb2xvcnMoQ29sb3JOb2RlKSB7XG4gICAgY29uc3QgbWFwcGluZ1R5cGUgPSBDb2xvck5vZGUuTWFwcGluZ0luZm9ybWF0aW9uVHlwZVxuICAgIGNvbnN0IHJlZmVyZW5jZVR5cGUgPSBDb2xvck5vZGUuUmVmZXJlbmNlSW5mb3JtYXRpb25UeXBlXG4gICAgY29uc3QgYnVmZmVyID0gQ29sb3JOb2RlLkNvbG9ycy5hXG4gICAgbGV0IGluZGV4QnVmZmVyID0gW11cbiAgICBpZiAocmVmZXJlbmNlVHlwZSA9PT0gJ0luZGV4VG9EaXJlY3QnKSB7XG4gICAgICBpbmRleEJ1ZmZlciA9IENvbG9yTm9kZS5Db2xvckluZGV4LmFcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZGF0YVNpemU6IDQsXG4gICAgICBidWZmZXI6IGJ1ZmZlcixcbiAgICAgIGluZGljZXM6IGluZGV4QnVmZmVyLFxuICAgICAgbWFwcGluZ1R5cGU6IG1hcHBpbmdUeXBlLFxuICAgICAgcmVmZXJlbmNlVHlwZTogcmVmZXJlbmNlVHlwZVxuICAgIH1cbiAgfVxuXG4gIC8vIFBhcnNlIG1hcHBpbmcgYW5kIG1hdGVyaWFsIGRhdGEgaW4gRkJYVHJlZS5PYmplY3RzLkdlb21ldHJ5LkxheWVyRWxlbWVudE1hdGVyaWFsIGlmIGl0IGV4aXN0c1xuICBwYXJzZU1hdGVyaWFsSW5kaWNlcyhNYXRlcmlhbE5vZGUpIHtcbiAgICBjb25zdCBtYXBwaW5nVHlwZSA9IE1hdGVyaWFsTm9kZS5NYXBwaW5nSW5mb3JtYXRpb25UeXBlXG4gICAgY29uc3QgcmVmZXJlbmNlVHlwZSA9IE1hdGVyaWFsTm9kZS5SZWZlcmVuY2VJbmZvcm1hdGlvblR5cGVcblxuICAgIGlmIChtYXBwaW5nVHlwZSA9PT0gJ05vTWFwcGluZ0luZm9ybWF0aW9uJykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YVNpemU6IDEsXG4gICAgICAgIGJ1ZmZlcjogWzBdLFxuICAgICAgICBpbmRpY2VzOiBbMF0sXG4gICAgICAgIG1hcHBpbmdUeXBlOiAnQWxsU2FtZScsXG4gICAgICAgIHJlZmVyZW5jZVR5cGU6IHJlZmVyZW5jZVR5cGVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBtYXRlcmlhbEluZGV4QnVmZmVyID0gTWF0ZXJpYWxOb2RlLk1hdGVyaWFscy5hXG5cbiAgICAvLyBTaW5jZSBtYXRlcmlhbHMgYXJlIHN0b3JlZCBhcyBpbmRpY2VzLCB0aGVyZSdzIGEgYml0IG9mIGEgbWlzbWF0Y2ggYmV0d2VlbiBGQlggYW5kIHdoYXRcbiAgICAvLyB3ZSBleHBlY3QuU28gd2UgY3JlYXRlIGFuIGludGVybWVkaWF0ZSBidWZmZXIgdGhhdCBwb2ludHMgdG8gdGhlIGluZGV4IGluIHRoZSBidWZmZXIsXG4gICAgLy8gZm9yIGNvbmZvcm1pbmcgd2l0aCB0aGUgb3RoZXIgZnVuY3Rpb25zIHdlJ3ZlIHdyaXR0ZW4gZm9yIG90aGVyIGRhdGEuXG4gICAgY29uc3QgbWF0ZXJpYWxJbmRpY2VzOiBhbnkgPSBbXVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXRlcmlhbEluZGV4QnVmZmVyLmxlbmd0aDsgKytpKSB7XG4gICAgICBtYXRlcmlhbEluZGljZXMucHVzaChpKVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhU2l6ZTogMSxcbiAgICAgIGJ1ZmZlcjogbWF0ZXJpYWxJbmRleEJ1ZmZlcixcbiAgICAgIGluZGljZXM6IG1hdGVyaWFsSW5kaWNlcyxcbiAgICAgIG1hcHBpbmdUeXBlOiBtYXBwaW5nVHlwZSxcbiAgICAgIHJlZmVyZW5jZVR5cGU6IHJlZmVyZW5jZVR5cGVcbiAgICB9XG4gIH1cblxuICAvLyBHZW5lcmF0ZSBhIE51cmJHZW9tZXRyeSBmcm9tIGEgbm9kZSBpbiBGQlhUcmVlLk9iamVjdHMuR2VvbWV0cnlcbiAgcGFyc2VOdXJic0dlb21ldHJ5KGdlb05vZGUpIHtcbiAgICAvLyBpZiAoIE5VUkJTQ3VydmUgPT09IHVuZGVmaW5lZCApIHtcblxuICAgIC8vICAgY29uc29sZS5lcnJvciggJ0ZCWExvYWRlcjogVGhlIGxvYWRlciByZWxpZXMgb24gTlVSQlNDdXJ2ZSBmb3IgYW55IG51cmJzIHByZXNlbnQgaW4gdGhlIG1vZGVsLiBOdXJicyB3aWxsIHNob3cgdXAgYXMgZW1wdHkgZ2VvbWV0cnkuJyApO1xuICAgIC8vICAgcmV0dXJuIG5ldyBCdWZmZXJHZW9tZXRyeSgpO1xuXG4gICAgLy8gfVxuXG4gICAgY29uc3Qgb3JkZXIgPSBwYXJzZUludChnZW9Ob2RlLk9yZGVyKVxuXG4gICAgaWYgKGlzTmFOKG9yZGVyKSkge1xuICAgICAgY29uc29sZS5lcnJvcignRkJYTG9hZGVyOiBJbnZhbGlkIE9yZGVyICVzIGdpdmVuIGZvciBnZW9tZXRyeSBJRDogJXMnLCBnZW9Ob2RlLk9yZGVyLCBnZW9Ob2RlLmlkKVxuICAgICAgcmV0dXJuIG5ldyBCdWZmZXJHZW9tZXRyeSgpXG4gICAgfVxuXG4gICAgY29uc3QgZGVncmVlID0gb3JkZXIgLSAxXG5cbiAgICBjb25zdCBrbm90cyA9IGdlb05vZGUuS25vdFZlY3Rvci5hXG4gICAgY29uc3QgY29udHJvbFBvaW50czogYW55ID0gW11cbiAgICBjb25zdCBwb2ludHNWYWx1ZXMgPSBnZW9Ob2RlLlBvaW50cy5hXG5cbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IHBvaW50c1ZhbHVlcy5sZW5ndGg7IGkgPCBsOyBpICs9IDQpIHtcbiAgICAgIGNvbnRyb2xQb2ludHMucHVzaChuZXcgVmVjdG9yNCgpLmZyb21BcnJheShwb2ludHNWYWx1ZXMsIGkpKVxuICAgIH1cblxuICAgIGxldCBzdGFydEtub3QsIGVuZEtub3RcblxuICAgIGlmIChnZW9Ob2RlLkZvcm0gPT09ICdDbG9zZWQnKSB7XG4gICAgICBjb250cm9sUG9pbnRzLnB1c2goY29udHJvbFBvaW50c1swXSlcbiAgICB9IGVsc2UgaWYgKGdlb05vZGUuRm9ybSA9PT0gJ1BlcmlvZGljJykge1xuICAgICAgc3RhcnRLbm90ID0gZGVncmVlXG4gICAgICBlbmRLbm90ID0ga25vdHMubGVuZ3RoIC0gMSAtIHN0YXJ0S25vdFxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlZ3JlZTsgKytpKSB7XG4gICAgICAgIGNvbnRyb2xQb2ludHMucHVzaChjb250cm9sUG9pbnRzW2ldKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGN1cnZlID0gbmV3IE5VUkJTQ3VydmUoZGVncmVlLCBrbm90cywgY29udHJvbFBvaW50cywgc3RhcnRLbm90LCBlbmRLbm90KVxuICAgIGNvbnN0IHZlcnRpY2VzID0gY3VydmUuZ2V0UG9pbnQoY29udHJvbFBvaW50cy5sZW5ndGggKiA3KVxuXG4gICAgY29uc3QgcG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheShOdW1iZXIodmVydGljZXMubGVuZ3RoKSAqIDMpXG5cbiAgICAvLyB2ZXJ0aWNlcy5mb3JFYWNoKCAoIHZlcnRleCwgaSApID0+IHtcblxuICAgIC8vICAgdmVydGV4LnRvQXJyYXkoIHBvc2l0aW9ucywgaSAqIDMgKTtcblxuICAgIC8vIH0gKTtcblxuICAgIGNvbnN0IGdlb21ldHJ5ID0gbmV3IEJ1ZmZlckdlb21ldHJ5KClcbiAgICBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgbmV3IEJ1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbnMsIDMpKVxuXG4gICAgcmV0dXJuIGdlb21ldHJ5XG4gIH1cbn1cblxuY2xhc3MgQW5pbWF0aW9uUGFyc2VyIHtcbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIHBhcnNlKCkge1xuICAgIGNvbnN0IGFuaW1hdGlvbkNsaXBzOiBhbnkgPSBbXVxuXG4gICAgY29uc3QgcmF3Q2xpcHMgPSB0aGlzLnBhcnNlQ2xpcHMoKVxuXG4gICAgaWYgKHJhd0NsaXBzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHJhd0NsaXBzKSB7XG4gICAgICAgIGNvbnN0IHJhd0NsaXAgPSByYXdDbGlwc1trZXldXG5cbiAgICAgICAgY29uc3QgY2xpcCA9IHRoaXMuYWRkQ2xpcChyYXdDbGlwKVxuXG4gICAgICAgIGFuaW1hdGlvbkNsaXBzLnB1c2goY2xpcClcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYW5pbWF0aW9uQ2xpcHNcbiAgfVxuXG4gIHBhcnNlQ2xpcHMoKSB7XG4gICAgLy8gc2luY2UgdGhlIGFjdHVhbCB0cmFuc2Zvcm1hdGlvbiBkYXRhIGlzIHN0b3JlZCBpbiBGQlhUcmVlLk9iamVjdHMuQW5pbWF0aW9uQ3VydmUsXG4gICAgLy8gaWYgdGhpcyBpcyB1bmRlZmluZWQgd2UgY2FuIHNhZmVseSBhc3N1bWUgdGhlcmUgYXJlIG5vIGFuaW1hdGlvbnNcbiAgICBpZiAoRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cy5BbmltYXRpb25DdXJ2ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdW5kZWZpbmVkXG5cbiAgICBjb25zdCBjdXJ2ZU5vZGVzTWFwID0gdGhpcy5wYXJzZUFuaW1hdGlvbkN1cnZlTm9kZXMoKVxuXG4gICAgdGhpcy5wYXJzZUFuaW1hdGlvbkN1cnZlcyhjdXJ2ZU5vZGVzTWFwKVxuXG4gICAgY29uc3QgbGF5ZXJzTWFwID0gdGhpcy5wYXJzZUFuaW1hdGlvbkxheWVycyhjdXJ2ZU5vZGVzTWFwKVxuICAgIGNvbnN0IHJhd0NsaXBzID0gdGhpcy5wYXJzZUFuaW1TdGFja3MobGF5ZXJzTWFwKVxuXG4gICAgcmV0dXJuIHJhd0NsaXBzXG4gIH1cblxuICAvLyBwYXJzZSBub2RlcyBpbiBGQlhUcmVlLk9iamVjdHMuQW5pbWF0aW9uQ3VydmVOb2RlXG4gIC8vIGVhY2ggQW5pbWF0aW9uQ3VydmVOb2RlIGhvbGRzIGRhdGEgZm9yIGFuIGFuaW1hdGlvbiB0cmFuc2Zvcm0gZm9yIGEgbW9kZWwgKGUuZy4gbGVmdCBhcm0gcm90YXRpb24gKVxuICAvLyBhbmQgaXMgcmVmZXJlbmNlZCBieSBhbiBBbmltYXRpb25MYXllclxuICBwYXJzZUFuaW1hdGlvbkN1cnZlTm9kZXMoKSB7XG4gICAgY29uc3QgcmF3Q3VydmVOb2RlcyA9IEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMuQW5pbWF0aW9uQ3VydmVOb2RlXG5cbiAgICBjb25zdCBjdXJ2ZU5vZGVzTWFwID0gbmV3IE1hcCgpXG5cbiAgICBmb3IgKGNvbnN0IG5vZGVJRCBpbiByYXdDdXJ2ZU5vZGVzKSB7XG4gICAgICBjb25zdCByYXdDdXJ2ZU5vZGUgPSByYXdDdXJ2ZU5vZGVzW25vZGVJRF1cblxuICAgICAgaWYgKHJhd0N1cnZlTm9kZS5hdHRyTmFtZS5tYXRjaCgvU3xSfFR8RGVmb3JtUGVyY2VudC8pICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGN1cnZlTm9kZSA9IHtcbiAgICAgICAgICBpZDogcmF3Q3VydmVOb2RlLmlkLFxuICAgICAgICAgIGF0dHI6IHJhd0N1cnZlTm9kZS5hdHRyTmFtZSxcbiAgICAgICAgICBjdXJ2ZXM6IHt9XG4gICAgICAgIH1cblxuICAgICAgICBjdXJ2ZU5vZGVzTWFwLnNldChjdXJ2ZU5vZGUuaWQsIGN1cnZlTm9kZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY3VydmVOb2Rlc01hcFxuICB9XG5cbiAgLy8gcGFyc2Ugbm9kZXMgaW4gRkJYVHJlZS5PYmplY3RzLkFuaW1hdGlvbkN1cnZlIGFuZCBjb25uZWN0IHRoZW0gdXAgdG9cbiAgLy8gcHJldmlvdXNseSBwYXJzZWQgQW5pbWF0aW9uQ3VydmVOb2Rlcy4gRWFjaCBBbmltYXRpb25DdXJ2ZSBob2xkcyBkYXRhIGZvciBhIHNpbmdsZSBhbmltYXRlZFxuICAvLyBheGlzICggZS5nLiB0aW1lcyBhbmQgdmFsdWVzIG9mIHggcm90YXRpb24pXG4gIHBhcnNlQW5pbWF0aW9uQ3VydmVzKGN1cnZlTm9kZXNNYXApIHtcbiAgICBjb25zdCByYXdDdXJ2ZXMgPSBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzLkFuaW1hdGlvbkN1cnZlXG5cbiAgICAvLyBUT0RPOiBNYW55IHZhbHVlcyBhcmUgaWRlbnRpY2FsIHVwIHRvIHJvdW5kb2ZmIGVycm9yLCBidXQgd29uJ3QgYmUgb3B0aW1pc2VkXG4gICAgLy8gZS5nLiBwb3NpdGlvbiB0aW1lczogWzAsIDAuNCwgMC4gOF1cbiAgICAvLyBwb3NpdGlvbiB2YWx1ZXM6IFs3LjIzNTM4MzM1MDIzNDc3ZS03LCA5My42NzUxODYxNTcyMjY1NiwgLTAuOTk4MjY5NTU3OTUyODgwOSwgNy4yMzUzODMzNTAyMzQ3N2UtNywgOTMuNjc1MTg2MTU3MjI2NTYsIC0wLjk5ODI2OTU1Nzk1Mjg4MDksIDcuMjM1Mzg0NDg3MTAzMTQ3ZS03LCA5My42NzUyMDkwNDU0MTAxNiwgLTAuOTk4MjY5NTU3OTUyODgwOV1cbiAgICAvLyBjbGVhcmx5LCB0aGlzIHNob3VsZCBiZSBvcHRpbWlzZWQgdG9cbiAgICAvLyB0aW1lczogWzBdLCBwb3NpdGlvbnMgWzcuMjM1MzgzMzUwMjM0NzdlLTcsIDkzLjY3NTE4NjE1NzIyNjU2LCAtMC45OTgyNjk1NTc5NTI4ODA5XVxuICAgIC8vIHRoaXMgc2hvd3MgdXAgaW4gbmVhcmx5IGV2ZXJ5IEZCWCBmaWxlLCBhbmQgZ2VuZXJhbGx5IHRpbWUgYXJyYXkgaXMgbGVuZ3RoID4gMTAwXG5cbiAgICBmb3IgKGNvbnN0IG5vZGVJRCBpbiByYXdDdXJ2ZXMpIHtcbiAgICAgIGNvbnN0IGFuaW1hdGlvbkN1cnZlID0ge1xuICAgICAgICBpZDogcmF3Q3VydmVzW25vZGVJRF0uaWQsXG4gICAgICAgIHRpbWVzOiByYXdDdXJ2ZXNbbm9kZUlEXS5LZXlUaW1lLmEubWFwKGNvbnZlcnRGQlhUaW1lVG9TZWNvbmRzKSxcbiAgICAgICAgdmFsdWVzOiByYXdDdXJ2ZXNbbm9kZUlEXS5LZXlWYWx1ZUZsb2F0LmFcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVsYXRpb25zaGlwcyA9IEZCWExvYWRlci5jb25uZWN0aW9ucy5nZXQoYW5pbWF0aW9uQ3VydmUuaWQpXG5cbiAgICAgIGlmIChyZWxhdGlvbnNoaXBzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgYW5pbWF0aW9uQ3VydmVJRCA9IHJlbGF0aW9uc2hpcHMucGFyZW50c1swXS5JRFxuICAgICAgICBjb25zdCBhbmltYXRpb25DdXJ2ZVJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcHMucGFyZW50c1swXS5yZWxhdGlvbnNoaXBcblxuICAgICAgICBpZiAoYW5pbWF0aW9uQ3VydmVSZWxhdGlvbnNoaXAubWF0Y2goL1gvKSkge1xuICAgICAgICAgIGN1cnZlTm9kZXNNYXAuZ2V0KGFuaW1hdGlvbkN1cnZlSUQpLmN1cnZlc1sneCddID0gYW5pbWF0aW9uQ3VydmVcbiAgICAgICAgfSBlbHNlIGlmIChhbmltYXRpb25DdXJ2ZVJlbGF0aW9uc2hpcC5tYXRjaCgvWS8pKSB7XG4gICAgICAgICAgY3VydmVOb2Rlc01hcC5nZXQoYW5pbWF0aW9uQ3VydmVJRCkuY3VydmVzWyd5J10gPSBhbmltYXRpb25DdXJ2ZVxuICAgICAgICB9IGVsc2UgaWYgKGFuaW1hdGlvbkN1cnZlUmVsYXRpb25zaGlwLm1hdGNoKC9aLykpIHtcbiAgICAgICAgICBjdXJ2ZU5vZGVzTWFwLmdldChhbmltYXRpb25DdXJ2ZUlEKS5jdXJ2ZXNbJ3onXSA9IGFuaW1hdGlvbkN1cnZlXG4gICAgICAgIH0gZWxzZSBpZiAoYW5pbWF0aW9uQ3VydmVSZWxhdGlvbnNoaXAubWF0Y2goL2R8RGVmb3JtUGVyY2VudC8pICYmIGN1cnZlTm9kZXNNYXAuaGFzKGFuaW1hdGlvbkN1cnZlSUQpKSB7XG4gICAgICAgICAgY3VydmVOb2Rlc01hcC5nZXQoYW5pbWF0aW9uQ3VydmVJRCkuY3VydmVzWydtb3JwaCddID0gYW5pbWF0aW9uQ3VydmVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIHBhcnNlIG5vZGVzIGluIEZCWFRyZWUuT2JqZWN0cy5BbmltYXRpb25MYXllci4gRWFjaCBsYXllcnMgaG9sZHMgcmVmZXJlbmNlc1xuICAvLyB0byBjb25zdGlvdXMgQW5pbWF0aW9uQ3VydmVOb2RlcyBhbmQgaXMgcmVmZXJlbmNlZCBieSBhbiBBbmltYXRpb25TdGFjayBub2RlXG4gIC8vIG5vdGU6IHRoZW9yZXRpY2FsbHkgYSBzdGFjayBjYW4gaGF2ZSBtdWx0aXBsZSBsYXllcnMsIGhvd2V2ZXIgaW4gcHJhY3RpY2UgdGhlcmUgYWx3YXlzIHNlZW1zIHRvIGJlIG9uZSBwZXIgc3RhY2tcbiAgcGFyc2VBbmltYXRpb25MYXllcnMoY3VydmVOb2Rlc01hcCkge1xuICAgIGNvbnN0IHJhd0xheWVycyA9IEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMuQW5pbWF0aW9uTGF5ZXJcblxuICAgIGNvbnN0IGxheWVyc01hcCA9IG5ldyBNYXAoKVxuXG4gICAgZm9yIChjb25zdCBub2RlSUQgaW4gcmF3TGF5ZXJzKSB7XG4gICAgICBjb25zdCBsYXllckN1cnZlTm9kZXM6IGFueSA9IFtdXG5cbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBGQlhMb2FkZXIuY29ubmVjdGlvbnMuZ2V0KHBhcnNlSW50KG5vZGVJRCkpXG5cbiAgICAgIGlmIChjb25uZWN0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gYWxsIHRoZSBhbmltYXRpb25DdXJ2ZU5vZGVzIHVzZWQgaW4gdGhlIGxheWVyXG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gY29ubmVjdGlvbi5jaGlsZHJlblxuXG4gICAgICAgIGNoaWxkcmVuLmZvckVhY2goKGNoaWxkLCBpKSA9PiB7XG4gICAgICAgICAgaWYgKGN1cnZlTm9kZXNNYXAuaGFzKGNoaWxkLklEKSkge1xuICAgICAgICAgICAgY29uc3QgY3VydmVOb2RlID0gY3VydmVOb2Rlc01hcC5nZXQoY2hpbGQuSUQpXG5cbiAgICAgICAgICAgIC8vIGNoZWNrIHRoYXQgdGhlIGN1cnZlcyBhcmUgZGVmaW5lZCBmb3IgYXQgbGVhc3Qgb25lIGF4aXMsIG90aGVyd2lzZSBpZ25vcmUgdGhlIGN1cnZlTm9kZVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBjdXJ2ZU5vZGUuY3VydmVzLnggIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICBjdXJ2ZU5vZGUuY3VydmVzLnkgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICBjdXJ2ZU5vZGUuY3VydmVzLnogIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGlmIChsYXllckN1cnZlTm9kZXNbaV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVsSUQgPSBGQlhMb2FkZXIuY29ubmVjdGlvbnMuZ2V0KGNoaWxkLklEKS5wYXJlbnRzLmZpbHRlcigocGFyZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gcGFyZW50LnJlbGF0aW9uc2hpcCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfSlbMF0uSURcblxuICAgICAgICAgICAgICAgIGlmIChtb2RlbElEICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJhd01vZGVsID0gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cy5Nb2RlbFttb2RlbElELnRvU3RyaW5nKCldXG5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGU6IGFueSA9IHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxOYW1lOiBQcm9wZXJ0eUJpbmRpbmdbJ3Nhbml0aXplTm9kZU5hbWUnXShyYXdNb2RlbC5hdHRyTmFtZSksXG4gICAgICAgICAgICAgICAgICAgIElEOiByYXdNb2RlbC5pZCxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFBvc2l0aW9uOiBbMCwgMCwgMF0sXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxSb3RhdGlvbjogWzAsIDAsIDBdLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsU2NhbGU6IFsxLCAxLCAxXVxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBGQlhMb2FkZXIuc2NlbmVHcmFwaC50cmF2ZXJzZSgoY2hpbGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkLklEID09PSByYXdNb2RlbC5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgIG5vZGUudHJhbnNmb3JtID0gY2hpbGQubWF0cml4XG5cbiAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQudXNlckRhdGEudHJhbnNmb3JtRGF0YSkgbm9kZS5ldWxlck9yZGVyID0gY2hpbGQudXNlckRhdGEudHJhbnNmb3JtRGF0YS5ldWxlck9yZGVyXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgIGlmICghbm9kZS50cmFuc2Zvcm0pIG5vZGUudHJhbnNmb3JtID0gbmV3IE1hdHJpeDQoKVxuXG4gICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgYW5pbWF0ZWQgbW9kZWwgaXMgcHJlIHJvdGF0ZWQsIHdlJ2xsIGhhdmUgdG8gYXBwbHkgdGhlIHByZSByb3RhdGlvbnMgdG8gZXZlcnlcbiAgICAgICAgICAgICAgICAgIC8vIGFuaW1hdGlvbiB2YWx1ZSBhcyB3ZWxsXG4gICAgICAgICAgICAgICAgICBpZiAoJ1ByZVJvdGF0aW9uJyBpbiByYXdNb2RlbCkgbm9kZS5wcmVSb3RhdGlvbiA9IHJhd01vZGVsLlByZVJvdGF0aW9uLnZhbHVlXG4gICAgICAgICAgICAgICAgICBpZiAoJ1Bvc3RSb3RhdGlvbicgaW4gcmF3TW9kZWwpIG5vZGUucG9zdFJvdGF0aW9uID0gcmF3TW9kZWwuUG9zdFJvdGF0aW9uLnZhbHVlXG5cbiAgICAgICAgICAgICAgICAgIGxheWVyQ3VydmVOb2Rlc1tpXSA9IG5vZGVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAobGF5ZXJDdXJ2ZU5vZGVzW2ldKSBsYXllckN1cnZlTm9kZXNbaV1bY3VydmVOb2RlLmF0dHJdID0gY3VydmVOb2RlXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnZlTm9kZS5jdXJ2ZXMubW9ycGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBpZiAobGF5ZXJDdXJ2ZU5vZGVzW2ldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWZvcm1lcklEID0gRkJYTG9hZGVyLmNvbm5lY3Rpb25zLmdldChjaGlsZC5JRCkucGFyZW50cy5maWx0ZXIoKHBhcmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcmVudC5yZWxhdGlvbnNoaXAgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIH0pWzBdLklEXG5cbiAgICAgICAgICAgICAgICBjb25zdCBtb3JwaGVySUQgPSBGQlhMb2FkZXIuY29ubmVjdGlvbnMuZ2V0KGRlZm9ybWVySUQpLnBhcmVudHNbMF0uSURcbiAgICAgICAgICAgICAgICBjb25zdCBnZW9JRCA9IEZCWExvYWRlci5jb25uZWN0aW9ucy5nZXQobW9ycGhlcklEKS5wYXJlbnRzWzBdLklEXG5cbiAgICAgICAgICAgICAgICAvLyBhc3N1bWluZyBnZW9tZXRyeSBpcyBub3QgdXNlZCBpbiBtb3JlIHRoYW4gb25lIG1vZGVsXG4gICAgICAgICAgICAgICAgY29uc3QgbW9kZWxJRCA9IEZCWExvYWRlci5jb25uZWN0aW9ucy5nZXQoZ2VvSUQpLnBhcmVudHNbMF0uSURcblxuICAgICAgICAgICAgICAgIGNvbnN0IHJhd01vZGVsID0gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cy5Nb2RlbFttb2RlbElEXVxuXG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHtcbiAgICAgICAgICAgICAgICAgIG1vZGVsTmFtZTogUHJvcGVydHlCaW5kaW5nWydzYW5pdGl6ZU5vZGVOYW1lJ10ocmF3TW9kZWwuYXR0ck5hbWUpLFxuICAgICAgICAgICAgICAgICAgbW9ycGhOYW1lOiBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzLkRlZm9ybWVyW2RlZm9ybWVySURdLmF0dHJOYW1lXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGF5ZXJDdXJ2ZU5vZGVzW2ldID0gbm9kZVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgbGF5ZXJDdXJ2ZU5vZGVzW2ldW2N1cnZlTm9kZS5hdHRyXSA9IGN1cnZlTm9kZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBsYXllcnNNYXAuc2V0KHBhcnNlSW50KG5vZGVJRCksIGxheWVyQ3VydmVOb2RlcylcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbGF5ZXJzTWFwXG4gIH1cblxuICAvLyBwYXJzZSBub2RlcyBpbiBGQlhUcmVlLk9iamVjdHMuQW5pbWF0aW9uU3RhY2suIFRoZXNlIGFyZSB0aGUgdG9wIGxldmVsIG5vZGUgaW4gdGhlIGFuaW1hdGlvblxuICAvLyBoaWVyYXJjaHkuIEVhY2ggU3RhY2sgbm9kZSB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlIGEgQW5pbWF0aW9uQ2xpcFxuICBwYXJzZUFuaW1TdGFja3MobGF5ZXJzTWFwKSB7XG4gICAgY29uc3QgcmF3U3RhY2tzID0gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cy5BbmltYXRpb25TdGFja1xuXG4gICAgLy8gY29ubmVjdCB0aGUgc3RhY2tzIChjbGlwcykgdXAgdG8gdGhlIGxheWVyc1xuICAgIGNvbnN0IHJhd0NsaXBzID0ge31cblxuICAgIGZvciAoY29uc3Qgbm9kZUlEIGluIHJhd1N0YWNrcykge1xuICAgICAgY29uc3QgY2hpbGRyZW4gPSBGQlhMb2FkZXIuY29ubmVjdGlvbnMuZ2V0KHBhcnNlSW50KG5vZGVJRCkpLmNoaWxkcmVuXG5cbiAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPiAxKSB7XG4gICAgICAgIC8vIGl0IHNlZW1zIGxpa2Ugc3RhY2tzIHdpbGwgYWx3YXlzIGJlIGFzc29jaWF0ZWQgd2l0aCBhIHNpbmdsZSBsYXllci4gQnV0IGp1c3QgaW4gY2FzZSB0aGVyZSBhcmUgZmlsZXNcbiAgICAgICAgLy8gd2hlcmUgdGhlcmUgYXJlIG11bHRpcGxlIGxheWVycyBwZXIgc3RhY2ssIHdlJ2xsIGRpc3BsYXkgYSB3YXJuaW5nXG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAnRkJYTG9hZGVyOiBFbmNvdW50ZXJlZCBhbiBhbmltYXRpb24gc3RhY2sgd2l0aCBtdWx0aXBsZSBsYXllcnMsIHRoaXMgaXMgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWQuIElnbm9yaW5nIHN1YnNlcXVlbnQgbGF5ZXJzLidcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBsYXllciA9IGxheWVyc01hcC5nZXQoY2hpbGRyZW5bMF0uSUQpXG5cbiAgICAgIHJhd0NsaXBzW25vZGVJRF0gPSB7XG4gICAgICAgIG5hbWU6IHJhd1N0YWNrc1tub2RlSURdLmF0dHJOYW1lLFxuICAgICAgICBsYXllcjogbGF5ZXJcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmF3Q2xpcHNcbiAgfVxuXG4gIGFkZENsaXAocmF3Q2xpcCkge1xuICAgIGxldCB0cmFja3MgPSBbXVxuXG4gICAgcmF3Q2xpcC5sYXllci5mb3JFYWNoKChyYXdUcmFja3MpID0+IHtcbiAgICAgIHRyYWNrcyA9IHRyYWNrcy5jb25jYXQodGhpcy5nZW5lcmF0ZVRyYWNrcyhyYXdUcmFja3MpKVxuICAgIH0pXG5cbiAgICByZXR1cm4gbmV3IEFuaW1hdGlvbkNsaXAocmF3Q2xpcC5uYW1lLCAtMSwgdHJhY2tzKVxuICB9XG5cbiAgZ2VuZXJhdGVUcmFja3MocmF3VHJhY2tzKSB7XG4gICAgY29uc3QgdHJhY2tzOiBhbnkgPSBbXVxuXG4gICAgbGV0IGluaXRpYWxQb3NpdGlvbjogYW55ID0gbmV3IFZlY3RvcjMoKVxuICAgIGxldCBpbml0aWFsUm90YXRpb246IGFueSA9IG5ldyBRdWF0ZXJuaW9uKClcbiAgICBsZXQgaW5pdGlhbFNjYWxlOiBhbnkgPSBuZXcgVmVjdG9yMygpXG5cbiAgICBpZiAocmF3VHJhY2tzLnRyYW5zZm9ybSkgcmF3VHJhY2tzLnRyYW5zZm9ybS5kZWNvbXBvc2UoaW5pdGlhbFBvc2l0aW9uLCBpbml0aWFsUm90YXRpb24sIGluaXRpYWxTY2FsZSlcblxuICAgIGluaXRpYWxQb3NpdGlvbiA9IGluaXRpYWxQb3NpdGlvbi50b0FycmF5KClcbiAgICBpbml0aWFsUm90YXRpb24gPSBuZXcgRXVsZXIoKS5zZXRGcm9tUXVhdGVybmlvbihpbml0aWFsUm90YXRpb24sIHJhd1RyYWNrcy5ldWxlck9yZGVyKS50b0FycmF5KClcbiAgICBpbml0aWFsU2NhbGUgPSBpbml0aWFsU2NhbGUudG9BcnJheSgpXG5cbiAgICBpZiAocmF3VHJhY2tzLlQgIT09IHVuZGVmaW5lZCAmJiBPYmplY3Qua2V5cyhyYXdUcmFja3MuVC5jdXJ2ZXMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uVHJhY2sgPSB0aGlzLmdlbmVyYXRlVmVjdG9yVHJhY2soXG4gICAgICAgIHJhd1RyYWNrcy5tb2RlbE5hbWUsXG4gICAgICAgIHJhd1RyYWNrcy5ULmN1cnZlcyxcbiAgICAgICAgaW5pdGlhbFBvc2l0aW9uLFxuICAgICAgICAncG9zaXRpb24nXG4gICAgICApXG4gICAgICBpZiAocG9zaXRpb25UcmFjayAhPT0gdW5kZWZpbmVkKSB0cmFja3MucHVzaChwb3NpdGlvblRyYWNrKVxuICAgIH1cblxuICAgIGlmIChyYXdUcmFja3MuUiAhPT0gdW5kZWZpbmVkICYmIE9iamVjdC5rZXlzKHJhd1RyYWNrcy5SLmN1cnZlcykubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgcm90YXRpb25UcmFjayA9IHRoaXMuZ2VuZXJhdGVSb3RhdGlvblRyYWNrKFxuICAgICAgICByYXdUcmFja3MubW9kZWxOYW1lLFxuICAgICAgICByYXdUcmFja3MuUi5jdXJ2ZXMsXG4gICAgICAgIGluaXRpYWxSb3RhdGlvbixcbiAgICAgICAgcmF3VHJhY2tzLnByZVJvdGF0aW9uLFxuICAgICAgICByYXdUcmFja3MucG9zdFJvdGF0aW9uLFxuICAgICAgICByYXdUcmFja3MuZXVsZXJPcmRlclxuICAgICAgKVxuICAgICAgaWYgKHJvdGF0aW9uVHJhY2sgIT09IHVuZGVmaW5lZCkgdHJhY2tzLnB1c2gocm90YXRpb25UcmFjaylcbiAgICB9XG5cbiAgICBpZiAocmF3VHJhY2tzLlMgIT09IHVuZGVmaW5lZCAmJiBPYmplY3Qua2V5cyhyYXdUcmFja3MuUy5jdXJ2ZXMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHNjYWxlVHJhY2sgPSB0aGlzLmdlbmVyYXRlVmVjdG9yVHJhY2socmF3VHJhY2tzLm1vZGVsTmFtZSwgcmF3VHJhY2tzLlMuY3VydmVzLCBpbml0aWFsU2NhbGUsICdzY2FsZScpXG4gICAgICBpZiAoc2NhbGVUcmFjayAhPT0gdW5kZWZpbmVkKSB0cmFja3MucHVzaChzY2FsZVRyYWNrKVxuICAgIH1cblxuICAgIGlmIChyYXdUcmFja3MuRGVmb3JtUGVyY2VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBtb3JwaFRyYWNrID0gdGhpcy5nZW5lcmF0ZU1vcnBoVHJhY2socmF3VHJhY2tzKVxuICAgICAgaWYgKG1vcnBoVHJhY2sgIT09IHVuZGVmaW5lZCkgdHJhY2tzLnB1c2gobW9ycGhUcmFjaylcbiAgICB9XG5cbiAgICByZXR1cm4gdHJhY2tzXG4gIH1cblxuICBnZW5lcmF0ZVZlY3RvclRyYWNrKG1vZGVsTmFtZSwgY3VydmVzLCBpbml0aWFsVmFsdWUsIHR5cGUpIHtcbiAgICBjb25zdCB0aW1lcyA9IHRoaXMuZ2V0VGltZXNGb3JBbGxBeGVzKGN1cnZlcylcbiAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLmdldEtleWZyYW1lVHJhY2tWYWx1ZXModGltZXMsIGN1cnZlcywgaW5pdGlhbFZhbHVlKVxuXG4gICAgcmV0dXJuIG5ldyBWZWN0b3JLZXlmcmFtZVRyYWNrKG1vZGVsTmFtZSArICcuJyArIHR5cGUsIHRpbWVzLCB2YWx1ZXMpXG4gIH1cblxuICBnZW5lcmF0ZVJvdGF0aW9uVHJhY2sobW9kZWxOYW1lLCBjdXJ2ZXMsIGluaXRpYWxWYWx1ZSwgcHJlUm90YXRpb24sIHBvc3RSb3RhdGlvbiwgZXVsZXJPcmRlcikge1xuICAgIGlmIChjdXJ2ZXMueCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmludGVycG9sYXRlUm90YXRpb25zKGN1cnZlcy54KVxuICAgICAgY3VydmVzLngudmFsdWVzID0gY3VydmVzLngudmFsdWVzLm1hcChNYXRoVXRpbHMuZGVnVG9SYWQpXG4gICAgfVxuICAgIGlmIChjdXJ2ZXMueSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmludGVycG9sYXRlUm90YXRpb25zKGN1cnZlcy55KVxuICAgICAgY3VydmVzLnkudmFsdWVzID0gY3VydmVzLnkudmFsdWVzLm1hcChNYXRoVXRpbHMuZGVnVG9SYWQpXG4gICAgfVxuICAgIGlmIChjdXJ2ZXMueiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmludGVycG9sYXRlUm90YXRpb25zKGN1cnZlcy56KVxuICAgICAgY3VydmVzLnoudmFsdWVzID0gY3VydmVzLnoudmFsdWVzLm1hcChNYXRoVXRpbHMuZGVnVG9SYWQpXG4gICAgfVxuXG4gICAgY29uc3QgdGltZXMgPSB0aGlzLmdldFRpbWVzRm9yQWxsQXhlcyhjdXJ2ZXMpXG4gICAgY29uc3QgdmFsdWVzID0gdGhpcy5nZXRLZXlmcmFtZVRyYWNrVmFsdWVzKHRpbWVzLCBjdXJ2ZXMsIGluaXRpYWxWYWx1ZSlcblxuICAgIGlmIChwcmVSb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBwcmVSb3RhdGlvbiA9IHByZVJvdGF0aW9uLm1hcChNYXRoVXRpbHMuZGVnVG9SYWQpXG4gICAgICBwcmVSb3RhdGlvbi5wdXNoKGV1bGVyT3JkZXIpXG5cbiAgICAgIHByZVJvdGF0aW9uID0gbmV3IEV1bGVyKCkuZnJvbUFycmF5KHByZVJvdGF0aW9uKVxuICAgICAgcHJlUm90YXRpb24gPSBuZXcgUXVhdGVybmlvbigpLnNldEZyb21FdWxlcihwcmVSb3RhdGlvbilcbiAgICB9XG5cbiAgICBpZiAocG9zdFJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHBvc3RSb3RhdGlvbiA9IHBvc3RSb3RhdGlvbi5tYXAoTWF0aFV0aWxzLmRlZ1RvUmFkKVxuICAgICAgcG9zdFJvdGF0aW9uLnB1c2goZXVsZXJPcmRlcilcblxuICAgICAgcG9zdFJvdGF0aW9uID0gbmV3IEV1bGVyKCkuZnJvbUFycmF5KHBvc3RSb3RhdGlvbilcbiAgICAgIHBvc3RSb3RhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCkuc2V0RnJvbUV1bGVyKHBvc3RSb3RhdGlvbikuaW52ZXJzZSgpXG4gICAgfVxuXG4gICAgY29uc3QgcXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKClcbiAgICBjb25zdCBldWxlciA9IG5ldyBFdWxlcigpXG5cbiAgICBjb25zdCBxdWF0ZXJuaW9uVmFsdWVzID0gW11cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICBldWxlci5zZXQodmFsdWVzW2ldLCB2YWx1ZXNbaSArIDFdLCB2YWx1ZXNbaSArIDJdLCBldWxlck9yZGVyKVxuXG4gICAgICBxdWF0ZXJuaW9uLnNldEZyb21FdWxlcihldWxlcilcblxuICAgICAgaWYgKHByZVJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHF1YXRlcm5pb24ucHJlbXVsdGlwbHkocHJlUm90YXRpb24pXG4gICAgICBpZiAocG9zdFJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHF1YXRlcm5pb24ubXVsdGlwbHkocG9zdFJvdGF0aW9uKVxuXG4gICAgICBxdWF0ZXJuaW9uLnRvQXJyYXkocXVhdGVybmlvblZhbHVlcywgKGkgLyAzKSAqIDQpXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBRdWF0ZXJuaW9uS2V5ZnJhbWVUcmFjayhtb2RlbE5hbWUgKyAnLnF1YXRlcm5pb24nLCB0aW1lcywgcXVhdGVybmlvblZhbHVlcylcbiAgfVxuXG4gIGdlbmVyYXRlTW9ycGhUcmFjayhyYXdUcmFja3MpIHtcbiAgICBjb25zdCBjdXJ2ZXMgPSByYXdUcmFja3MuRGVmb3JtUGVyY2VudC5jdXJ2ZXMubW9ycGhcbiAgICBjb25zdCB2YWx1ZXMgPSBjdXJ2ZXMudmFsdWVzLm1hcCgodmFsKSA9PiB7XG4gICAgICByZXR1cm4gdmFsIC8gMTAwXG4gICAgfSlcblxuICAgIGNvbnN0IG1vcnBoTnVtID0gRkJYTG9hZGVyLnNjZW5lR3JhcGguZ2V0T2JqZWN0QnlOYW1lKHJhd1RyYWNrcy5tb2RlbE5hbWUpLm1vcnBoVGFyZ2V0RGljdGlvbmFyeVtcbiAgICAgIHJhd1RyYWNrcy5tb3JwaE5hbWVcbiAgICBdXG5cbiAgICByZXR1cm4gbmV3IE51bWJlcktleWZyYW1lVHJhY2soXG4gICAgICByYXdUcmFja3MubW9kZWxOYW1lICsgJy5tb3JwaFRhcmdldEluZmx1ZW5jZXNbJyArIG1vcnBoTnVtICsgJ10nLFxuICAgICAgY3VydmVzLnRpbWVzLFxuICAgICAgdmFsdWVzXG4gICAgKVxuICB9XG5cbiAgLy8gRm9yIGFsbCBhbmltYXRlZCBvYmplY3RzLCB0aW1lcyBhcmUgZGVmaW5lZCBzZXBhcmF0ZWx5IGZvciBlYWNoIGF4aXNcbiAgLy8gSGVyZSB3ZSdsbCBjb21iaW5lIHRoZSB0aW1lcyBpbnRvIG9uZSBzb3J0ZWQgYXJyYXkgd2l0aG91dCBkdXBsaWNhdGVzXG4gIGdldFRpbWVzRm9yQWxsQXhlcyhjdXJ2ZXMpIHtcbiAgICBsZXQgdGltZXMgPSBbXVxuXG4gICAgLy8gZmlyc3Qgam9pbiB0b2dldGhlciB0aGUgdGltZXMgZm9yIGVhY2ggYXhpcywgaWYgZGVmaW5lZFxuICAgIGlmIChjdXJ2ZXMueCAhPT0gdW5kZWZpbmVkKSB0aW1lcyA9IHRpbWVzLmNvbmNhdChjdXJ2ZXMueC50aW1lcylcbiAgICBpZiAoY3VydmVzLnkgIT09IHVuZGVmaW5lZCkgdGltZXMgPSB0aW1lcy5jb25jYXQoY3VydmVzLnkudGltZXMpXG4gICAgaWYgKGN1cnZlcy56ICE9PSB1bmRlZmluZWQpIHRpbWVzID0gdGltZXMuY29uY2F0KGN1cnZlcy56LnRpbWVzKVxuXG4gICAgLy8gdGhlbiBzb3J0IHRoZW0gYW5kIHJlbW92ZSBkdXBsaWNhdGVzXG4gICAgdGltZXMgPSB0aW1lc1xuICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgcmV0dXJuIGEgLSBiXG4gICAgICB9KVxuICAgICAgLmZpbHRlcigoZWxlbSwgaW5kZXgsIGFycmF5KSA9PiB7XG4gICAgICAgIHJldHVybiBhcnJheS5pbmRleE9mKGVsZW0pID09IGluZGV4XG4gICAgICB9KVxuXG4gICAgcmV0dXJuIHRpbWVzXG4gIH1cblxuICBnZXRLZXlmcmFtZVRyYWNrVmFsdWVzKHRpbWVzLCBjdXJ2ZXMsIGluaXRpYWxWYWx1ZSkge1xuICAgIGNvbnN0IHByZXZWYWx1ZSA9IGluaXRpYWxWYWx1ZVxuXG4gICAgY29uc3QgdmFsdWVzOiBhbnkgPSBbXVxuXG4gICAgbGV0IHhJbmRleCA9IC0xXG4gICAgbGV0IHlJbmRleCA9IC0xXG4gICAgbGV0IHpJbmRleCA9IC0xXG5cbiAgICB0aW1lcy5mb3JFYWNoKCh0aW1lKSA9PiB7XG4gICAgICBpZiAoY3VydmVzLngpIHhJbmRleCA9IGN1cnZlcy54LnRpbWVzLmluZGV4T2YodGltZSlcbiAgICAgIGlmIChjdXJ2ZXMueSkgeUluZGV4ID0gY3VydmVzLnkudGltZXMuaW5kZXhPZih0aW1lKVxuICAgICAgaWYgKGN1cnZlcy56KSB6SW5kZXggPSBjdXJ2ZXMuei50aW1lcy5pbmRleE9mKHRpbWUpXG5cbiAgICAgIC8vIGlmIHRoZXJlIGlzIGFuIHggdmFsdWUgZGVmaW5lZCBmb3IgdGhpcyBmcmFtZSwgdXNlIHRoYXRcbiAgICAgIGlmICh4SW5kZXggIT09IC0xKSB7XG4gICAgICAgIGNvbnN0IHhWYWx1ZSA9IGN1cnZlcy54LnZhbHVlc1t4SW5kZXhdXG4gICAgICAgIHZhbHVlcy5wdXNoKHhWYWx1ZSlcbiAgICAgICAgcHJldlZhbHVlWzBdID0geFZhbHVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBvdGhlcndpc2UgdXNlIHRoZSB4IHZhbHVlIGZyb20gdGhlIHByZXZpb3VzIGZyYW1lXG4gICAgICAgIHZhbHVlcy5wdXNoKHByZXZWYWx1ZVswXSlcbiAgICAgIH1cblxuICAgICAgaWYgKHlJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgY29uc3QgeVZhbHVlID0gY3VydmVzLnkudmFsdWVzW3lJbmRleF1cbiAgICAgICAgdmFsdWVzLnB1c2goeVZhbHVlKVxuICAgICAgICBwcmV2VmFsdWVbMV0gPSB5VmFsdWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlcy5wdXNoKHByZXZWYWx1ZVsxXSlcbiAgICAgIH1cblxuICAgICAgaWYgKHpJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgY29uc3QgelZhbHVlID0gY3VydmVzLnoudmFsdWVzW3pJbmRleF1cbiAgICAgICAgdmFsdWVzLnB1c2goelZhbHVlKVxuICAgICAgICBwcmV2VmFsdWVbMl0gPSB6VmFsdWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlcy5wdXNoKHByZXZWYWx1ZVsyXSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIHZhbHVlc1xuICB9XG5cbiAgLy8gUm90YXRpb25zIGFyZSBkZWZpbmVkIGFzIEV1bGVyIGFuZ2xlcyB3aGljaCBjYW4gaGF2ZSB2YWx1ZXMgIG9mIGFueSBzaXplXG4gIC8vIFRoZXNlIHdpbGwgYmUgY29udmVydGVkIHRvIHF1YXRlcm5pb25zIHdoaWNoIGRvbid0IHN1cHBvcnQgdmFsdWVzIGdyZWF0ZXIgdGhhblxuICAvLyBQSSwgc28gd2UnbGwgaW50ZXJwb2xhdGUgbGFyZ2Ugcm90YXRpb25zXG4gIGludGVycG9sYXRlUm90YXRpb25zKGN1cnZlKSB7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBjdXJ2ZS52YWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGluaXRpYWxWYWx1ZSA9IGN1cnZlLnZhbHVlc1tpIC0gMV1cbiAgICAgIGNvbnN0IHZhbHVlc1NwYW4gPSBjdXJ2ZS52YWx1ZXNbaV0gLSBpbml0aWFsVmFsdWVcblxuICAgICAgY29uc3QgYWJzb2x1dGVTcGFuID0gTWF0aC5hYnModmFsdWVzU3BhbilcblxuICAgICAgaWYgKGFic29sdXRlU3BhbiA+PSAxODApIHtcbiAgICAgICAgY29uc3QgbnVtU3ViSW50ZXJ2YWxzID0gYWJzb2x1dGVTcGFuIC8gMTgwXG5cbiAgICAgICAgY29uc3Qgc3RlcCA9IHZhbHVlc1NwYW4gLyBudW1TdWJJbnRlcnZhbHNcbiAgICAgICAgbGV0IG5leHRWYWx1ZSA9IGluaXRpYWxWYWx1ZSArIHN0ZXBcblxuICAgICAgICBjb25zdCBpbml0aWFsVGltZSA9IGN1cnZlLnRpbWVzW2kgLSAxXVxuICAgICAgICBjb25zdCB0aW1lU3BhbiA9IGN1cnZlLnRpbWVzW2ldIC0gaW5pdGlhbFRpbWVcbiAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSB0aW1lU3BhbiAvIG51bVN1YkludGVydmFsc1xuICAgICAgICBsZXQgbmV4dFRpbWUgPSBpbml0aWFsVGltZSArIGludGVydmFsXG5cbiAgICAgICAgY29uc3QgaW50ZXJwb2xhdGVkVGltZXM6IGFueSA9IFtdXG4gICAgICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlczogYW55ID0gW11cblxuICAgICAgICB3aGlsZSAobmV4dFRpbWUgPCBjdXJ2ZS50aW1lc1tpXSkge1xuICAgICAgICAgIGludGVycG9sYXRlZFRpbWVzLnB1c2gobmV4dFRpbWUpXG4gICAgICAgICAgbmV4dFRpbWUgKz0gaW50ZXJ2YWxcblxuICAgICAgICAgIGludGVycG9sYXRlZFZhbHVlcy5wdXNoKG5leHRWYWx1ZSlcbiAgICAgICAgICBuZXh0VmFsdWUgKz0gc3RlcFxuICAgICAgICB9XG5cbiAgICAgICAgY3VydmUudGltZXMgPSBpbmplY3QoY3VydmUudGltZXMsIGksIGludGVycG9sYXRlZFRpbWVzKVxuICAgICAgICBjdXJ2ZS52YWx1ZXMgPSBpbmplY3QoY3VydmUudmFsdWVzLCBpLCBpbnRlcnBvbGF0ZWRWYWx1ZXMpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIFRleHRQYXJzZXIge1xuICBhbGxOb2RlczogYW55XG4gIGN1cnJlbnRQcm9wTmFtZTogYW55XG4gIGN1cnJlbnRQcm9wOiBhbnlcbiAgY3VycmVudEluZGVudDogYW55XG4gIG5vZGVTdGFjazogYW55XG4gIGNvbnN0cnVjdG9yKCkge31cblxuICBnZXRQcmV2Tm9kZSgpIHtcbiAgICByZXR1cm4gdGhpcy5ub2RlU3RhY2tbdGhpcy5jdXJyZW50SW5kZW50IC0gMl1cbiAgfVxuXG4gIGdldEN1cnJlbnROb2RlKCkge1xuICAgIHJldHVybiB0aGlzLm5vZGVTdGFja1t0aGlzLmN1cnJlbnRJbmRlbnQgLSAxXVxuICB9XG5cbiAgZ2V0Q3VycmVudFByb3AoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudFByb3BcbiAgfVxuXG4gIHB1c2hTdGFjayhub2RlKSB7XG4gICAgdGhpcy5ub2RlU3RhY2sucHVzaChub2RlKVxuICAgIHRoaXMuY3VycmVudEluZGVudCArPSAxXG4gIH1cblxuICBwb3BTdGFjaygpIHtcbiAgICB0aGlzLm5vZGVTdGFjay5wb3AoKVxuICAgIHRoaXMuY3VycmVudEluZGVudCAtPSAxXG4gIH1cblxuICBzZXRDdXJyZW50UHJvcCh2YWwsIG5hbWUpIHtcbiAgICB0aGlzLmN1cnJlbnRQcm9wID0gdmFsXG4gICAgdGhpcy5jdXJyZW50UHJvcE5hbWUgPSBuYW1lXG4gIH1cblxuICBwYXJzZSh0ZXh0KSB7XG4gICAgdGhpcy5jdXJyZW50SW5kZW50ID0gMFxuXG4gICAgdGhpcy5hbGxOb2RlcyA9IG5ldyBGQlhUcmVlKClcbiAgICB0aGlzLm5vZGVTdGFjayA9IFtdXG4gICAgdGhpcy5jdXJyZW50UHJvcCA9IFtdXG4gICAgdGhpcy5jdXJyZW50UHJvcE5hbWUgPSAnJ1xuXG4gICAgY29uc3Qgc3BsaXQgPSB0ZXh0LnNwbGl0KC9bXFxyXFxuXSsvKVxuXG4gICAgc3BsaXQuZm9yRWFjaCgobGluZSwgaSkgPT4ge1xuICAgICAgY29uc3QgbWF0Y2hDb21tZW50ID0gbGluZS5tYXRjaCgvXltcXHNcXHRdKjsvKVxuICAgICAgY29uc3QgbWF0Y2hFbXB0eSA9IGxpbmUubWF0Y2goL15bXFxzXFx0XSokLylcblxuICAgICAgaWYgKG1hdGNoQ29tbWVudCB8fCBtYXRjaEVtcHR5KSByZXR1cm5cblxuICAgICAgY29uc3QgbWF0Y2hCZWdpbm5pbmcgPSBsaW5lLm1hdGNoKCdeXFxcXHR7JyArIHRoaXMuY3VycmVudEluZGVudCArICd9KFxcXFx3Kyk6KC4qKXsnLCAnJylcbiAgICAgIGNvbnN0IG1hdGNoUHJvcGVydHkgPSBsaW5lLm1hdGNoKCdeXFxcXHR7JyArIHRoaXMuY3VycmVudEluZGVudCArICd9KFxcXFx3Kyk6W1xcXFxzXFxcXHRcXFxcclxcXFxuXSguKiknKVxuICAgICAgY29uc3QgbWF0Y2hFbmQgPSBsaW5lLm1hdGNoKCdeXFxcXHR7JyArICh0aGlzLmN1cnJlbnRJbmRlbnQgLSAxKSArICd9fScpXG5cbiAgICAgIGlmIChtYXRjaEJlZ2lubmluZykge1xuICAgICAgICB0aGlzLnBhcnNlTm9kZUJlZ2luKGxpbmUsIG1hdGNoQmVnaW5uaW5nKVxuICAgICAgfSBlbHNlIGlmIChtYXRjaFByb3BlcnR5KSB7XG4gICAgICAgIHRoaXMucGFyc2VOb2RlUHJvcGVydHkobGluZSwgbWF0Y2hQcm9wZXJ0eSwgc3BsaXRbKytpXSlcbiAgICAgIH0gZWxzZSBpZiAobWF0Y2hFbmQpIHtcbiAgICAgICAgdGhpcy5wb3BTdGFjaygpXG4gICAgICB9IGVsc2UgaWYgKGxpbmUubWF0Y2goL15bXlxcc1xcdH1dLykpIHtcbiAgICAgICAgLy8gbGFyZ2UgYXJyYXlzIGFyZSBzcGxpdCBvdmVyIG11bHRpcGxlIGxpbmVzIHRlcm1pbmF0ZWQgd2l0aCBhICcsJyBjaGFyYWN0ZXJcbiAgICAgICAgLy8gaWYgdGhpcyBpcyBlbmNvdW50ZXJlZCB0aGUgbGluZSBuZWVkcyB0byBiZSBqb2luZWQgdG8gdGhlIHByZXZpb3VzIGxpbmVcbiAgICAgICAgdGhpcy5wYXJzZU5vZGVQcm9wZXJ0eUNvbnRpbnVlZChsaW5lKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gdGhpcy5hbGxOb2Rlc1xuICB9XG5cbiAgcGFyc2VOb2RlQmVnaW4obGluZSwgcHJvcGVydHkpIHtcbiAgICBjb25zdCBub2RlTmFtZSA9IHByb3BlcnR5WzFdLnRyaW0oKS5yZXBsYWNlKC9eXCIvLCAnJykucmVwbGFjZSgvXCIkLywgJycpXG5cbiAgICBjb25zdCBub2RlQXR0cnMgPSBwcm9wZXJ0eVsyXS5zcGxpdCgnLCcpLm1hcCgoYXR0cikgPT4ge1xuICAgICAgcmV0dXJuIGF0dHIudHJpbSgpLnJlcGxhY2UoL15cIi8sICcnKS5yZXBsYWNlKC9cIiQvLCAnJylcbiAgICB9KVxuXG4gICAgY29uc3Qgbm9kZTogYW55ID0geyBuYW1lOiBub2RlTmFtZSB9XG4gICAgY29uc3QgYXR0cnMgPSB0aGlzLnBhcnNlTm9kZUF0dHIobm9kZUF0dHJzKVxuXG4gICAgY29uc3QgY3VycmVudE5vZGUgPSB0aGlzLmdldEN1cnJlbnROb2RlKClcblxuICAgIC8vIGEgdG9wIG5vZGVcbiAgICBpZiAodGhpcy5jdXJyZW50SW5kZW50ID09PSAwKSB7XG4gICAgICB0aGlzLmFsbE5vZGVzLmFkZChub2RlTmFtZSwgbm9kZSlcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gYSBzdWJub2RlXG5cbiAgICAgIC8vIGlmIHRoZSBzdWJub2RlIGFscmVhZHkgZXhpc3RzLCBhcHBlbmQgaXRcbiAgICAgIGlmIChub2RlTmFtZSBpbiBjdXJyZW50Tm9kZSkge1xuICAgICAgICAvLyBzcGVjaWFsIGNhc2UgUG9zZSBuZWVkcyBQb3NlTm9kZXMgYXMgYW4gYXJyYXlcbiAgICAgICAgaWYgKG5vZGVOYW1lID09PSAnUG9zZU5vZGUnKSB7XG4gICAgICAgICAgY3VycmVudE5vZGUuUG9zZU5vZGUucHVzaChub2RlKVxuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnROb2RlW25vZGVOYW1lXS5pZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY3VycmVudE5vZGVbbm9kZU5hbWVdID0ge31cbiAgICAgICAgICBjdXJyZW50Tm9kZVtub2RlTmFtZV1bY3VycmVudE5vZGVbbm9kZU5hbWVdLmlkXSA9IGN1cnJlbnROb2RlW25vZGVOYW1lXVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGF0dHJzLmlkICE9PSAnJykgY3VycmVudE5vZGVbbm9kZU5hbWVdW2F0dHJzLmlkXSA9IG5vZGVcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGF0dHJzLmlkID09PSAnbnVtYmVyJykge1xuICAgICAgICBjdXJyZW50Tm9kZVtub2RlTmFtZV0gPSB7fVxuICAgICAgICBjdXJyZW50Tm9kZVtub2RlTmFtZV1bYXR0cnMuaWRdID0gbm9kZVxuICAgICAgfSBlbHNlIGlmIChub2RlTmFtZSAhPT0gJ1Byb3BlcnRpZXM3MCcpIHtcbiAgICAgICAgaWYgKG5vZGVOYW1lID09PSAnUG9zZU5vZGUnKSBjdXJyZW50Tm9kZVtub2RlTmFtZV0gPSBbbm9kZV1cbiAgICAgICAgZWxzZSBjdXJyZW50Tm9kZVtub2RlTmFtZV0gPSBub2RlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBhdHRycy5pZCA9PT0gJ251bWJlcicpIG5vZGUuaWQgPSBhdHRycy5pZFxuICAgIGlmIChhdHRycy5uYW1lICE9PSAnJykgbm9kZS5hdHRyTmFtZSA9IGF0dHJzLm5hbWVcbiAgICBpZiAoYXR0cnMudHlwZSAhPT0gJycpIG5vZGUuYXR0clR5cGUgPSBhdHRycy50eXBlXG5cbiAgICB0aGlzLnB1c2hTdGFjayhub2RlKVxuICB9XG5cbiAgcGFyc2VOb2RlQXR0cihhdHRycykge1xuICAgIGxldCBpZCA9IGF0dHJzWzBdXG5cbiAgICBpZiAoYXR0cnNbMF0gIT09ICcnKSB7XG4gICAgICBpZCA9IHBhcnNlSW50KGF0dHJzWzBdKVxuXG4gICAgICBpZiAoaXNOYU4oaWQpKSB7XG4gICAgICAgIGlkID0gYXR0cnNbMF1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgbmFtZSA9ICcnLFxuICAgICAgdHlwZSA9ICcnXG5cbiAgICBpZiAoYXR0cnMubGVuZ3RoID4gMSkge1xuICAgICAgbmFtZSA9IGF0dHJzWzFdLnJlcGxhY2UoL14oXFx3Kyk6Oi8sICcnKVxuICAgICAgdHlwZSA9IGF0dHJzWzJdXG4gICAgfVxuXG4gICAgcmV0dXJuIHsgaWQ6IGlkLCBuYW1lOiBuYW1lLCB0eXBlOiB0eXBlIH1cbiAgfVxuXG4gIHBhcnNlTm9kZVByb3BlcnR5KGxpbmUsIHByb3BlcnR5LCBjb250ZW50TGluZSkge1xuICAgIGxldCBwcm9wTmFtZSA9IHByb3BlcnR5WzFdLnJlcGxhY2UoL15cIi8sICcnKS5yZXBsYWNlKC9cIiQvLCAnJykudHJpbSgpXG4gICAgbGV0IHByb3BWYWx1ZSA9IHByb3BlcnR5WzJdLnJlcGxhY2UoL15cIi8sICcnKS5yZXBsYWNlKC9cIiQvLCAnJykudHJpbSgpXG5cbiAgICAvLyBmb3Igc3BlY2lhbCBjYXNlOiBiYXNlNjQgaW1hZ2UgZGF0YSBmb2xsb3dzIFwiQ29udGVudDogLFwiIGxpbmVcbiAgICAvL1x0Q29udGVudDogLFxuICAgIC8vXHQgXCIvOWovNFJEYVJYaHBaZ0FBVFUwQS4uLlwiXG4gICAgaWYgKHByb3BOYW1lID09PSAnQ29udGVudCcgJiYgcHJvcFZhbHVlID09PSAnLCcpIHtcbiAgICAgIHByb3BWYWx1ZSA9IGNvbnRlbnRMaW5lLnJlcGxhY2UoL1wiL2csICcnKS5yZXBsYWNlKC8sJC8sICcnKS50cmltKClcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50Tm9kZSA9IHRoaXMuZ2V0Q3VycmVudE5vZGUoKVxuICAgIGNvbnN0IHBhcmVudE5hbWUgPSBjdXJyZW50Tm9kZS5uYW1lXG5cbiAgICBpZiAocGFyZW50TmFtZSA9PT0gJ1Byb3BlcnRpZXM3MCcpIHtcbiAgICAgIHRoaXMucGFyc2VOb2RlU3BlY2lhbFByb3BlcnR5KGxpbmUsIHByb3BOYW1lLCBwcm9wVmFsdWUpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBDb25uZWN0aW9uc1xuICAgIGlmIChwcm9wTmFtZSA9PT0gJ0MnKSB7XG4gICAgICBjb25zdCBjb25uUHJvcHMgPSBwcm9wVmFsdWUuc3BsaXQoJywnKS5zbGljZSgxKVxuICAgICAgY29uc3QgZnJvbSA9IHBhcnNlSW50KGNvbm5Qcm9wc1swXSlcbiAgICAgIGNvbnN0IHRvID0gcGFyc2VJbnQoY29ublByb3BzWzFdKVxuXG4gICAgICBsZXQgcmVzdCA9IHByb3BWYWx1ZS5zcGxpdCgnLCcpLnNsaWNlKDMpXG5cbiAgICAgIHJlc3QgPSByZXN0Lm1hcCgoZWxlbSkgPT4ge1xuICAgICAgICByZXR1cm4gZWxlbS50cmltKCkucmVwbGFjZSgvXlwiLywgJycpXG4gICAgICB9KVxuXG4gICAgICBwcm9wTmFtZSA9ICdjb25uZWN0aW9ucydcbiAgICAgIHByb3BWYWx1ZSA9IFtmcm9tLCB0b11cbiAgICAgIGFwcGVuZChwcm9wVmFsdWUsIHJlc3QpXG5cbiAgICAgIGlmIChjdXJyZW50Tm9kZVtwcm9wTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjdXJyZW50Tm9kZVtwcm9wTmFtZV0gPSBbXVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5vZGVcbiAgICBpZiAocHJvcE5hbWUgPT09ICdOb2RlJykgY3VycmVudE5vZGUuaWQgPSBwcm9wVmFsdWVcblxuICAgIC8vIGNvbm5lY3Rpb25zXG4gICAgaWYgKHByb3BOYW1lIGluIGN1cnJlbnROb2RlICYmIEFycmF5LmlzQXJyYXkoY3VycmVudE5vZGVbcHJvcE5hbWVdKSkge1xuICAgICAgY3VycmVudE5vZGVbcHJvcE5hbWVdLnB1c2gocHJvcFZhbHVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocHJvcE5hbWUgIT09ICdhJykgY3VycmVudE5vZGVbcHJvcE5hbWVdID0gcHJvcFZhbHVlXG4gICAgICBlbHNlIGN1cnJlbnROb2RlLmEgPSBwcm9wVmFsdWVcbiAgICB9XG5cbiAgICB0aGlzLnNldEN1cnJlbnRQcm9wKGN1cnJlbnROb2RlLCBwcm9wTmFtZSlcblxuICAgIC8vIGNvbnZlcnQgc3RyaW5nIHRvIGFycmF5LCB1bmxlc3MgaXQgZW5kcyBpbiAnLCcgaW4gd2hpY2ggY2FzZSBtb3JlIHdpbGwgYmUgYWRkZWQgdG8gaXRcbiAgICBpZiAocHJvcE5hbWUgPT09ICdhJyAmJiBwcm9wVmFsdWUuc2xpY2UoLTEpICE9PSAnLCcpIHtcbiAgICAgIGN1cnJlbnROb2RlLmEgPSBwYXJzZU51bWJlckFycmF5KHByb3BWYWx1ZSlcbiAgICB9XG4gIH1cblxuICBwYXJzZU5vZGVQcm9wZXJ0eUNvbnRpbnVlZChsaW5lKSB7XG4gICAgY29uc3QgY3VycmVudE5vZGUgPSB0aGlzLmdldEN1cnJlbnROb2RlKClcblxuICAgIGN1cnJlbnROb2RlLmEgKz0gbGluZVxuXG4gICAgLy8gaWYgdGhlIGxpbmUgZG9lc24ndCBlbmQgaW4gJywnIHdlIGhhdmUgcmVhY2hlZCB0aGUgZW5kIG9mIHRoZSBwcm9wZXJ0eSB2YWx1ZVxuICAgIC8vIHNvIGNvbnZlcnQgdGhlIHN0cmluZyB0byBhbiBhcnJheVxuICAgIGlmIChsaW5lLnNsaWNlKC0xKSAhPT0gJywnKSB7XG4gICAgICBjdXJyZW50Tm9kZS5hID0gcGFyc2VOdW1iZXJBcnJheShjdXJyZW50Tm9kZS5hKVxuICAgIH1cbiAgfVxuXG4gIC8vIHBhcnNlIFwiUHJvcGVydHk3MFwiXG4gIHBhcnNlTm9kZVNwZWNpYWxQcm9wZXJ0eShsaW5lLCBwcm9wTmFtZSwgcHJvcFZhbHVlKSB7XG4gICAgLy8gc3BsaXQgdGhpc1xuICAgIC8vIFA6IFwiTGNsIFNjYWxpbmdcIiwgXCJMY2wgU2NhbGluZ1wiLCBcIlwiLCBcIkFcIiwxLDEsMVxuICAgIC8vIGludG8gYXJyYXkgbGlrZSBiZWxvd1xuICAgIC8vIFtcIkxjbCBTY2FsaW5nXCIsIFwiTGNsIFNjYWxpbmdcIiwgXCJcIiwgXCJBXCIsIFwiMSwxLDFcIiBdXG4gICAgY29uc3QgcHJvcHMgPSBwcm9wVmFsdWUuc3BsaXQoJ1wiLCcpLm1hcCgocHJvcCkgPT4ge1xuICAgICAgcmV0dXJuIHByb3AudHJpbSgpLnJlcGxhY2UoL15cXFwiLywgJycpLnJlcGxhY2UoL1xccy8sICdfJylcbiAgICB9KVxuXG4gICAgY29uc3QgaW5uZXJQcm9wTmFtZSA9IHByb3BzWzBdXG4gICAgY29uc3QgaW5uZXJQcm9wVHlwZTEgPSBwcm9wc1sxXVxuICAgIGNvbnN0IGlubmVyUHJvcFR5cGUyID0gcHJvcHNbMl1cbiAgICBjb25zdCBpbm5lclByb3BGbGFnID0gcHJvcHNbM11cbiAgICBsZXQgaW5uZXJQcm9wVmFsdWUgPSBwcm9wc1s0XVxuXG4gICAgLy8gY2FzdCB2YWx1ZXMgd2hlcmUgbmVlZGVkLCBvdGhlcndpc2UgbGVhdmUgYXMgc3RyaW5nc1xuICAgIHN3aXRjaCAoaW5uZXJQcm9wVHlwZTEpIHtcbiAgICAgIGNhc2UgJ2ludCc6XG4gICAgICBjYXNlICdlbnVtJzpcbiAgICAgIGNhc2UgJ2Jvb2wnOlxuICAgICAgY2FzZSAnVUxvbmdMb25nJzpcbiAgICAgIGNhc2UgJ2RvdWJsZSc6XG4gICAgICBjYXNlICdOdW1iZXInOlxuICAgICAgY2FzZSAnRmllbGRPZlZpZXcnOlxuICAgICAgICBpbm5lclByb3BWYWx1ZSA9IHBhcnNlRmxvYXQoaW5uZXJQcm9wVmFsdWUpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ0NvbG9yJzpcbiAgICAgIGNhc2UgJ0NvbG9yUkdCJzpcbiAgICAgIGNhc2UgJ1ZlY3RvcjNEJzpcbiAgICAgIGNhc2UgJ0xjbF9UcmFuc2xhdGlvbic6XG4gICAgICBjYXNlICdMY2xfUm90YXRpb24nOlxuICAgICAgY2FzZSAnTGNsX1NjYWxpbmcnOlxuICAgICAgICBpbm5lclByb3BWYWx1ZSA9IHBhcnNlTnVtYmVyQXJyYXkoaW5uZXJQcm9wVmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgLy8gQ0FVVElPTjogdGhlc2UgcHJvcHMgbXVzdCBhcHBlbmQgdG8gcGFyZW50J3MgcGFyZW50XG4gICAgdGhpcy5nZXRQcmV2Tm9kZSgpW2lubmVyUHJvcE5hbWVdID0ge1xuICAgICAgdHlwZTogaW5uZXJQcm9wVHlwZTEsXG4gICAgICB0eXBlMjogaW5uZXJQcm9wVHlwZTIsXG4gICAgICBmbGFnOiBpbm5lclByb3BGbGFnLFxuICAgICAgdmFsdWU6IGlubmVyUHJvcFZhbHVlXG4gICAgfVxuXG4gICAgdGhpcy5zZXRDdXJyZW50UHJvcCh0aGlzLmdldFByZXZOb2RlKCksIGlubmVyUHJvcE5hbWUpXG4gIH1cbn1cblxuY2xhc3MgQmluYXJ5UGFyc2VyIHtcbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIHBhcnNlKGJ1ZmZlcikge1xuICAgIGNvbnN0IHJlYWRlciA9IG5ldyBCaW5hcnlSZWFkZXIoYnVmZmVyKVxuICAgIHJlYWRlci5za2lwKDIzKSAvLyBza2lwIG1hZ2ljIDIzIGJ5dGVzXG5cbiAgICBjb25zdCB2ZXJzaW9uID0gcmVhZGVyLmdldFVpbnQzMigpXG5cbiAgICBjb25zb2xlLmxvZygnRkJYTG9hZGVyOiBGQlggYmluYXJ5IHZlcnNpb246ICcgKyB2ZXJzaW9uKVxuXG4gICAgY29uc3QgYWxsTm9kZXMgPSBuZXcgRkJYVHJlZSgpXG5cbiAgICB3aGlsZSAoIXRoaXMuZW5kT2ZDb250ZW50KHJlYWRlcikpIHtcbiAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLnBhcnNlTm9kZShyZWFkZXIsIHZlcnNpb24pXG4gICAgICBpZiAobm9kZSAhPT0gbnVsbCkgYWxsTm9kZXMuYWRkKG5vZGUubmFtZSwgbm9kZSlcbiAgICB9XG5cbiAgICByZXR1cm4gYWxsTm9kZXNcbiAgfVxuXG4gIC8vIENoZWNrIGlmIHJlYWRlciBoYXMgcmVhY2hlZCB0aGUgZW5kIG9mIGNvbnRlbnQuXG4gIGVuZE9mQ29udGVudChyZWFkZXIpIHtcbiAgICAvLyBmb290ZXIgc2l6ZTogMTYwYnl0ZXMgKyAxNi1ieXRlIGFsaWdubWVudCBwYWRkaW5nXG4gICAgLy8gLSAxNmJ5dGVzOiBtYWdpY1xuICAgIC8vIC0gcGFkZGluZyB0aWwgMTYtYnl0ZSBhbGlnbm1lbnQgKGF0IGxlYXN0IDFieXRlPylcbiAgICAvL1x0KHNlZW1zIGxpa2Ugc29tZSBleHBvcnRlcnMgZW1iZWQgZml4ZWQgMTUgb3IgMTZieXRlcz8pXG4gICAgLy8gLSA0Ynl0ZXM6IG1hZ2ljXG4gICAgLy8gLSA0Ynl0ZXM6IHZlcnNpb25cbiAgICAvLyAtIDEyMGJ5dGVzOiB6ZXJvXG4gICAgLy8gLSAxNmJ5dGVzOiBtYWdpY1xuICAgIGlmIChyZWFkZXIuc2l6ZSgpICUgMTYgPT09IDApIHtcbiAgICAgIHJldHVybiAoKHJlYWRlci5nZXRPZmZzZXQoKSArIDE2MCArIDE2KSAmIH4weGYpID49IHJlYWRlci5zaXplKClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJlYWRlci5nZXRPZmZzZXQoKSArIDE2MCArIDE2ID49IHJlYWRlci5zaXplKClcbiAgICB9XG4gIH1cblxuICAvLyByZWN1cnNpdmVseSBwYXJzZSBub2RlcyB1bnRpbCB0aGUgZW5kIG9mIHRoZSBmaWxlIGlzIHJlYWNoZWRcbiAgcGFyc2VOb2RlKHJlYWRlciwgdmVyc2lvbikge1xuICAgIGNvbnN0IG5vZGU6IGFueSA9IHt9XG5cbiAgICAvLyBUaGUgZmlyc3QgdGhyZWUgZGF0YSBzaXplcyBkZXBlbmRzIG9uIHZlcnNpb24uXG4gICAgY29uc3QgZW5kT2Zmc2V0ID0gdmVyc2lvbiA+PSA3NTAwID8gcmVhZGVyLmdldFVpbnQ2NCgpIDogcmVhZGVyLmdldFVpbnQzMigpXG4gICAgY29uc3QgbnVtUHJvcGVydGllcyA9IHZlcnNpb24gPj0gNzUwMCA/IHJlYWRlci5nZXRVaW50NjQoKSA6IHJlYWRlci5nZXRVaW50MzIoKVxuXG4gICAgLy8gbm90ZTogZG8gbm90IHJlbW92ZSB0aGlzIGV2ZW4gaWYgeW91IGdldCBhIGxpbnRlciB3YXJuaW5nIGFzIGl0IG1vdmVzIHRoZSBidWZmZXIgZm9yd2FyZFxuICAgIGNvbnN0IHByb3BlcnR5TGlzdExlbiA9IHZlcnNpb24gPj0gNzUwMCA/IHJlYWRlci5nZXRVaW50NjQoKSA6IHJlYWRlci5nZXRVaW50MzIoKVxuXG4gICAgY29uc3QgbmFtZUxlbiA9IHJlYWRlci5nZXRVaW50OCgpXG4gICAgY29uc3QgbmFtZSA9IHJlYWRlci5nZXRTdHJpbmcobmFtZUxlbilcblxuICAgIC8vIFJlZ2FyZHMgdGhpcyBub2RlIGFzIE5VTEwtcmVjb3JkIGlmIGVuZE9mZnNldCBpcyB6ZXJvXG4gICAgaWYgKGVuZE9mZnNldCA9PT0gMCkgcmV0dXJuIG51bGxcblxuICAgIGNvbnN0IHByb3BlcnR5TGlzdDogYW55ID0gW11cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtUHJvcGVydGllczsgaSsrKSB7XG4gICAgICBwcm9wZXJ0eUxpc3QucHVzaCh0aGlzLnBhcnNlUHJvcGVydHkocmVhZGVyKSlcbiAgICB9XG5cbiAgICAvLyBSZWdhcmRzIHRoZSBmaXJzdCB0aHJlZSBlbGVtZW50cyBpbiBwcm9wZXJ0eUxpc3QgYXMgaWQsIGF0dHJOYW1lLCBhbmQgYXR0clR5cGVcbiAgICBjb25zdCBpZCA9IHByb3BlcnR5TGlzdC5sZW5ndGggPiAwID8gcHJvcGVydHlMaXN0WzBdIDogJydcbiAgICBjb25zdCBhdHRyTmFtZSA9IHByb3BlcnR5TGlzdC5sZW5ndGggPiAxID8gcHJvcGVydHlMaXN0WzFdIDogJydcbiAgICBjb25zdCBhdHRyVHlwZSA9IHByb3BlcnR5TGlzdC5sZW5ndGggPiAyID8gcHJvcGVydHlMaXN0WzJdIDogJydcblxuICAgIC8vIGNoZWNrIGlmIHRoaXMgbm9kZSByZXByZXNlbnRzIGp1c3QgYSBzaW5nbGUgcHJvcGVydHlcbiAgICAvLyBsaWtlIChuYW1lLCAwKSBzZXQgb3IgKG5hbWUyLCBbMCwgMSwgMl0pIHNldCBvZiB7bmFtZTogMCwgbmFtZTI6IFswLCAxLCAyXX1cbiAgICBub2RlLnNpbmdsZVByb3BlcnR5ID0gbnVtUHJvcGVydGllcyA9PT0gMSAmJiByZWFkZXIuZ2V0T2Zmc2V0KCkgPT09IGVuZE9mZnNldCA/IHRydWUgOiBmYWxzZVxuXG4gICAgd2hpbGUgKGVuZE9mZnNldCA+IHJlYWRlci5nZXRPZmZzZXQoKSkge1xuICAgICAgY29uc3Qgc3ViTm9kZSA9IHRoaXMucGFyc2VOb2RlKHJlYWRlciwgdmVyc2lvbilcblxuICAgICAgaWYgKHN1Yk5vZGUgIT09IG51bGwpIHRoaXMucGFyc2VTdWJOb2RlKG5hbWUsIG5vZGUsIHN1Yk5vZGUpXG4gICAgfVxuXG4gICAgbm9kZS5wcm9wZXJ0eUxpc3QgPSBwcm9wZXJ0eUxpc3QgLy8gcmF3IHByb3BlcnR5IGxpc3QgdXNlZCBieSBwYXJlbnRcblxuICAgIGlmICh0eXBlb2YgaWQgPT09ICdudW1iZXInKSBub2RlLmlkID0gaWRcbiAgICBpZiAoYXR0ck5hbWUgIT09ICcnKSBub2RlLmF0dHJOYW1lID0gYXR0ck5hbWVcbiAgICBpZiAoYXR0clR5cGUgIT09ICcnKSBub2RlLmF0dHJUeXBlID0gYXR0clR5cGVcbiAgICBpZiAobmFtZSAhPT0gJycpIG5vZGUubmFtZSA9IG5hbWVcblxuICAgIHJldHVybiBub2RlXG4gIH1cblxuICBwYXJzZVN1Yk5vZGUobmFtZSwgbm9kZSwgc3ViTm9kZSkge1xuICAgIC8vIHNwZWNpYWwgY2FzZTogY2hpbGQgbm9kZSBpcyBzaW5nbGUgcHJvcGVydHlcbiAgICBpZiAoc3ViTm9kZS5zaW5nbGVQcm9wZXJ0eSA9PT0gdHJ1ZSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBzdWJOb2RlLnByb3BlcnR5TGlzdFswXVxuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgbm9kZVtzdWJOb2RlLm5hbWVdID0gc3ViTm9kZVxuXG4gICAgICAgIHN1Yk5vZGUuYSA9IHZhbHVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlW3N1Yk5vZGUubmFtZV0gPSB2YWx1ZVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ0Nvbm5lY3Rpb25zJyAmJiBzdWJOb2RlLm5hbWUgPT09ICdDJykge1xuICAgICAgY29uc3QgYXJyYXk6IGFueSA9IFtdXG5cbiAgICAgIHN1Yk5vZGUucHJvcGVydHlMaXN0LmZvckVhY2goKHByb3BlcnR5LCBpKSA9PiB7XG4gICAgICAgIC8vIGZpcnN0IENvbm5lY3Rpb24gaXMgRkJYIHR5cGUgKE9PLCBPUCwgZXRjLikuIFdlJ2xsIGRpc2NhcmQgdGhlc2VcbiAgICAgICAgaWYgKGkgIT09IDApIGFycmF5LnB1c2gocHJvcGVydHkpXG4gICAgICB9KVxuXG4gICAgICBpZiAobm9kZS5jb25uZWN0aW9ucyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5vZGUuY29ubmVjdGlvbnMgPSBbXVxuICAgICAgfVxuXG4gICAgICBub2RlLmNvbm5lY3Rpb25zLnB1c2goYXJyYXkpXG4gICAgfSBlbHNlIGlmIChzdWJOb2RlLm5hbWUgPT09ICdQcm9wZXJ0aWVzNzAnKSB7XG4gICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoc3ViTm9kZSlcblxuICAgICAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgbm9kZVtrZXldID0gc3ViTm9kZVtrZXldXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ1Byb3BlcnRpZXM3MCcgJiYgc3ViTm9kZS5uYW1lID09PSAnUCcpIHtcbiAgICAgIGxldCBpbm5lclByb3BOYW1lID0gc3ViTm9kZS5wcm9wZXJ0eUxpc3RbMF1cbiAgICAgIGxldCBpbm5lclByb3BUeXBlMSA9IHN1Yk5vZGUucHJvcGVydHlMaXN0WzFdXG4gICAgICBjb25zdCBpbm5lclByb3BUeXBlMiA9IHN1Yk5vZGUucHJvcGVydHlMaXN0WzJdXG4gICAgICBjb25zdCBpbm5lclByb3BGbGFnID0gc3ViTm9kZS5wcm9wZXJ0eUxpc3RbM11cbiAgICAgIGxldCBpbm5lclByb3BWYWx1ZVxuXG4gICAgICBpZiAoaW5uZXJQcm9wTmFtZS5pbmRleE9mKCdMY2wgJykgPT09IDApIGlubmVyUHJvcE5hbWUgPSBpbm5lclByb3BOYW1lLnJlcGxhY2UoJ0xjbCAnLCAnTGNsXycpXG4gICAgICBpZiAoaW5uZXJQcm9wVHlwZTEuaW5kZXhPZignTGNsICcpID09PSAwKSBpbm5lclByb3BUeXBlMSA9IGlubmVyUHJvcFR5cGUxLnJlcGxhY2UoJ0xjbCAnLCAnTGNsXycpXG5cbiAgICAgIGlmIChcbiAgICAgICAgaW5uZXJQcm9wVHlwZTEgPT09ICdDb2xvcicgfHxcbiAgICAgICAgaW5uZXJQcm9wVHlwZTEgPT09ICdDb2xvclJHQicgfHxcbiAgICAgICAgaW5uZXJQcm9wVHlwZTEgPT09ICdWZWN0b3InIHx8XG4gICAgICAgIGlubmVyUHJvcFR5cGUxID09PSAnVmVjdG9yM0QnIHx8XG4gICAgICAgIGlubmVyUHJvcFR5cGUxLmluZGV4T2YoJ0xjbF8nKSA9PT0gMFxuICAgICAgKSB7XG4gICAgICAgIGlubmVyUHJvcFZhbHVlID0gW3N1Yk5vZGUucHJvcGVydHlMaXN0WzRdLCBzdWJOb2RlLnByb3BlcnR5TGlzdFs1XSwgc3ViTm9kZS5wcm9wZXJ0eUxpc3RbNl1dXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbm5lclByb3BWYWx1ZSA9IHN1Yk5vZGUucHJvcGVydHlMaXN0WzRdXG4gICAgICB9XG5cbiAgICAgIC8vIHRoaXMgd2lsbCBiZSBjb3BpZWQgdG8gcGFyZW50LCBzZWUgYWJvdmVcbiAgICAgIG5vZGVbaW5uZXJQcm9wTmFtZV0gPSB7XG4gICAgICAgIHR5cGU6IGlubmVyUHJvcFR5cGUxLFxuICAgICAgICB0eXBlMjogaW5uZXJQcm9wVHlwZTIsXG4gICAgICAgIGZsYWc6IGlubmVyUHJvcEZsYWcsXG4gICAgICAgIHZhbHVlOiBpbm5lclByb3BWYWx1ZVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobm9kZVtzdWJOb2RlLm5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICh0eXBlb2Ygc3ViTm9kZS5pZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgbm9kZVtzdWJOb2RlLm5hbWVdID0ge31cbiAgICAgICAgbm9kZVtzdWJOb2RlLm5hbWVdW3N1Yk5vZGUuaWRdID0gc3ViTm9kZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZVtzdWJOb2RlLm5hbWVdID0gc3ViTm9kZVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoc3ViTm9kZS5uYW1lID09PSAnUG9zZU5vZGUnKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShub2RlW3N1Yk5vZGUubmFtZV0pKSB7XG4gICAgICAgICAgbm9kZVtzdWJOb2RlLm5hbWVdID0gW25vZGVbc3ViTm9kZS5uYW1lXV1cbiAgICAgICAgfVxuXG4gICAgICAgIG5vZGVbc3ViTm9kZS5uYW1lXS5wdXNoKHN1Yk5vZGUpXG4gICAgICB9IGVsc2UgaWYgKG5vZGVbc3ViTm9kZS5uYW1lXVtzdWJOb2RlLmlkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5vZGVbc3ViTm9kZS5uYW1lXVtzdWJOb2RlLmlkXSA9IHN1Yk5vZGVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwYXJzZVByb3BlcnR5KHJlYWRlcikge1xuICAgIGNvbnN0IHR5cGUgPSByZWFkZXIuZ2V0U3RyaW5nKDEpXG5cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ0MnOlxuICAgICAgICByZXR1cm4gcmVhZGVyLmdldEJvb2xlYW4oKVxuXG4gICAgICBjYXNlICdEJzpcbiAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRGbG9hdDY0KClcblxuICAgICAgY2FzZSAnRic6XG4gICAgICAgIHJldHVybiByZWFkZXIuZ2V0RmxvYXQzMigpXG5cbiAgICAgIGNhc2UgJ0knOlxuICAgICAgICByZXR1cm4gcmVhZGVyLmdldEludDMyKClcblxuICAgICAgY2FzZSAnTCc6XG4gICAgICAgIHJldHVybiByZWFkZXIuZ2V0SW50NjQoKVxuXG4gICAgICBjYXNlICdSJzpcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gcmVhZGVyLmdldFVpbnQzMigpXG4gICAgICAgIHJldHVybiByZWFkZXIuZ2V0QXJyYXlCdWZmZXIobGVuZ3RoKVxuXG4gICAgICBjYXNlICdTJzpcbiAgICAgICAgY29uc3QgbGVuZ3RoMiA9IHJlYWRlci5nZXRVaW50MzIoKVxuICAgICAgICByZXR1cm4gcmVhZGVyLmdldFN0cmluZyhsZW5ndGgyKVxuXG4gICAgICBjYXNlICdZJzpcbiAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRJbnQxNigpXG5cbiAgICAgIGNhc2UgJ2InOlxuICAgICAgY2FzZSAnYyc6XG4gICAgICBjYXNlICdkJzpcbiAgICAgIGNhc2UgJ2YnOlxuICAgICAgY2FzZSAnaSc6XG4gICAgICBjYXNlICdsJzpcbiAgICAgICAgY29uc3QgYXJyYXlMZW5ndGggPSByZWFkZXIuZ2V0VWludDMyKClcbiAgICAgICAgY29uc3QgZW5jb2RpbmcgPSByZWFkZXIuZ2V0VWludDMyKCkgLy8gMDogbm9uLWNvbXByZXNzZWQsIDE6IGNvbXByZXNzZWRcbiAgICAgICAgY29uc3QgY29tcHJlc3NlZExlbmd0aCA9IHJlYWRlci5nZXRVaW50MzIoKVxuXG4gICAgICAgIGlmIChlbmNvZGluZyA9PT0gMCkge1xuICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnYic6XG4gICAgICAgICAgICBjYXNlICdjJzpcbiAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRCb29sZWFuQXJyYXkoYXJyYXlMZW5ndGgpXG5cbiAgICAgICAgICAgIGNhc2UgJ2QnOlxuICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLmdldEZsb2F0NjRBcnJheShhcnJheUxlbmd0aClcblxuICAgICAgICAgICAgY2FzZSAnZic6XG4gICAgICAgICAgICAgIHJldHVybiByZWFkZXIuZ2V0RmxvYXQzMkFycmF5KGFycmF5TGVuZ3RoKVxuXG4gICAgICAgICAgICBjYXNlICdpJzpcbiAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRJbnQzMkFycmF5KGFycmF5TGVuZ3RoKVxuXG4gICAgICAgICAgICBjYXNlICdsJzpcbiAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRJbnQ2NEFycmF5KGFycmF5TGVuZ3RoKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgWmxpYiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgJ0ZCWExvYWRlcjogRXh0ZXJuYWwgbGlicmFyeSBJbmZsYXRlLm1pbi5qcyByZXF1aXJlZCwgb2J0YWluIG9yIGltcG9ydCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9pbWF5YS96bGliLmpzJ1xuICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGluZmxhdGUgPSBuZXcgWmxpYi5JbmZsYXRlKG5ldyBVaW50OEFycmF5KHJlYWRlci5nZXRBcnJheUJ1ZmZlcihjb21wcmVzc2VkTGVuZ3RoKSkpIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcbiAgICAgICAgY29uc3QgcmVhZGVyMiA9IG5ldyBCaW5hcnlSZWFkZXIoaW5mbGF0ZS5kZWNvbXByZXNzKCkuYnVmZmVyKVxuXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2InOlxuICAgICAgICAgIGNhc2UgJ2MnOlxuICAgICAgICAgICAgcmV0dXJuIHJlYWRlcjIuZ2V0Qm9vbGVhbkFycmF5KGFycmF5TGVuZ3RoKVxuXG4gICAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgICAgICByZXR1cm4gcmVhZGVyMi5nZXRGbG9hdDY0QXJyYXkoYXJyYXlMZW5ndGgpXG5cbiAgICAgICAgICBjYXNlICdmJzpcbiAgICAgICAgICAgIHJldHVybiByZWFkZXIyLmdldEZsb2F0MzJBcnJheShhcnJheUxlbmd0aClcblxuICAgICAgICAgIGNhc2UgJ2knOlxuICAgICAgICAgICAgcmV0dXJuIHJlYWRlcjIuZ2V0SW50MzJBcnJheShhcnJheUxlbmd0aClcblxuICAgICAgICAgIGNhc2UgJ2wnOlxuICAgICAgICAgICAgcmV0dXJuIHJlYWRlcjIuZ2V0SW50NjRBcnJheShhcnJheUxlbmd0aClcbiAgICAgICAgfVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZCWExvYWRlcjogVW5rbm93biBwcm9wZXJ0eSB0eXBlICcgKyB0eXBlKVxuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBCaW5hcnlSZWFkZXIge1xuICBsaXR0bGVFbmRpYW46IGFueVxuICBvZmZzZXQ6IG51bWJlclxuICBkdjogRGF0YVZpZXdcbiAgY29uc3RydWN0b3IoYnVmZmVyLCBsaXR0bGVFbmRpYW4/KSB7XG4gICAgdGhpcy5kdiA9IG5ldyBEYXRhVmlldyhidWZmZXIpXG4gICAgdGhpcy5vZmZzZXQgPSAwXG4gICAgdGhpcy5saXR0bGVFbmRpYW4gPSBsaXR0bGVFbmRpYW4gIT09IHVuZGVmaW5lZCA/IGxpdHRsZUVuZGlhbiA6IHRydWVcbiAgfVxuXG4gIGdldE9mZnNldCgpIHtcbiAgICByZXR1cm4gdGhpcy5vZmZzZXRcbiAgfVxuXG4gIHNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZHYuYnVmZmVyLmJ5dGVMZW5ndGhcbiAgfVxuXG4gIHNraXAobGVuZ3RoKSB7XG4gICAgdGhpcy5vZmZzZXQgKz0gbGVuZ3RoXG4gIH1cblxuICAvLyBzZWVtcyBsaWtlIHRydWUvZmFsc2UgcmVwcmVzZW50YXRpb24gZGVwZW5kcyBvbiBleHBvcnRlci5cbiAgLy8gdHJ1ZTogMSBvciAnWScoPTB4NTkpLCBmYWxzZTogMCBvciAnVCcoPTB4NTQpXG4gIC8vIHRoZW4gc2VlcyBMU0IuXG4gIGdldEJvb2xlYW4oKSB7XG4gICAgcmV0dXJuICh0aGlzLmdldFVpbnQ4KCkgJiAxKSA9PT0gMVxuICB9XG5cbiAgZ2V0Qm9vbGVhbkFycmF5KHNpemUpIHtcbiAgICBjb25zdCBhOiBhbnkgPSBbXVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgIGEucHVzaCh0aGlzLmdldEJvb2xlYW4oKSlcbiAgICB9XG5cbiAgICByZXR1cm4gYVxuICB9XG5cbiAgZ2V0VWludDgoKSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLmR2LmdldFVpbnQ4KHRoaXMub2Zmc2V0KVxuICAgIHRoaXMub2Zmc2V0ICs9IDFcbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIGdldEludDE2KCkge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5kdi5nZXRJbnQxNih0aGlzLm9mZnNldCwgdGhpcy5saXR0bGVFbmRpYW4pXG4gICAgdGhpcy5vZmZzZXQgKz0gMlxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgZ2V0SW50MzIoKSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLmR2LmdldEludDMyKHRoaXMub2Zmc2V0LCB0aGlzLmxpdHRsZUVuZGlhbilcbiAgICB0aGlzLm9mZnNldCArPSA0XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICBnZXRJbnQzMkFycmF5KHNpemUpIHtcbiAgICBjb25zdCBhOiBhbnkgPSBbXVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgIGEucHVzaCh0aGlzLmdldEludDMyKCkpXG4gICAgfVxuXG4gICAgcmV0dXJuIGFcbiAgfVxuXG4gIGdldFVpbnQzMigpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZHYuZ2V0VWludDMyKHRoaXMub2Zmc2V0LCB0aGlzLmxpdHRsZUVuZGlhbilcbiAgICB0aGlzLm9mZnNldCArPSA0XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICAvLyBKYXZhU2NyaXB0IGRvZXNuJ3Qgc3VwcG9ydCA2NC1iaXQgaW50ZWdlciBzbyBjYWxjdWxhdGUgdGhpcyBoZXJlXG4gIC8vIDEgPDwgMzIgd2lsbCByZXR1cm4gMSBzbyB1c2luZyBtdWx0aXBseSBvcGVyYXRpb24gaW5zdGVhZCBoZXJlLlxuICAvLyBUaGVyZSdzIGEgcG9zc2liaWxpdHkgdGhhdCB0aGlzIG1ldGhvZCByZXR1cm5zIHdyb25nIHZhbHVlIGlmIHRoZSB2YWx1ZVxuICAvLyBpcyBvdXQgb2YgdGhlIHJhbmdlIGJldHdlZW4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgYW5kIE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLlxuICAvLyBUT0RPOiBzYWZlbHkgaGFuZGxlIDY0LWJpdCBpbnRlZ2VyXG4gIGdldEludDY0KCkge1xuICAgIGxldCBsb3csIGhpZ2hcblxuICAgIGlmICh0aGlzLmxpdHRsZUVuZGlhbikge1xuICAgICAgbG93ID0gdGhpcy5nZXRVaW50MzIoKVxuICAgICAgaGlnaCA9IHRoaXMuZ2V0VWludDMyKClcbiAgICB9IGVsc2Uge1xuICAgICAgaGlnaCA9IHRoaXMuZ2V0VWludDMyKClcbiAgICAgIGxvdyA9IHRoaXMuZ2V0VWludDMyKClcbiAgICB9XG5cbiAgICAvLyBjYWxjdWxhdGUgbmVnYXRpdmUgdmFsdWVcbiAgICBpZiAoaGlnaCAmIDB4ODAwMDAwMDApIHtcbiAgICAgIGhpZ2ggPSB+aGlnaCAmIDB4ZmZmZmZmZmZcbiAgICAgIGxvdyA9IH5sb3cgJiAweGZmZmZmZmZmXG5cbiAgICAgIGlmIChsb3cgPT09IDB4ZmZmZmZmZmYpIGhpZ2ggPSAoaGlnaCArIDEpICYgMHhmZmZmZmZmZlxuXG4gICAgICBsb3cgPSAobG93ICsgMSkgJiAweGZmZmZmZmZmXG5cbiAgICAgIHJldHVybiAtKGhpZ2ggKiAweDEwMDAwMDAwMCArIGxvdylcbiAgICB9XG5cbiAgICByZXR1cm4gaGlnaCAqIDB4MTAwMDAwMDAwICsgbG93XG4gIH1cblxuICBnZXRJbnQ2NEFycmF5KHNpemUpIHtcbiAgICBjb25zdCBhOiBhbnkgPSBbXVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgIGEucHVzaCh0aGlzLmdldEludDY0KCkpXG4gICAgfVxuXG4gICAgcmV0dXJuIGFcbiAgfVxuXG4gIC8vIE5vdGU6IHNlZSBnZXRJbnQ2NCgpIGNvbW1lbnRcbiAgZ2V0VWludDY0KCkge1xuICAgIGxldCBsb3csIGhpZ2hcblxuICAgIGlmICh0aGlzLmxpdHRsZUVuZGlhbikge1xuICAgICAgbG93ID0gdGhpcy5nZXRVaW50MzIoKVxuICAgICAgaGlnaCA9IHRoaXMuZ2V0VWludDMyKClcbiAgICB9IGVsc2Uge1xuICAgICAgaGlnaCA9IHRoaXMuZ2V0VWludDMyKClcbiAgICAgIGxvdyA9IHRoaXMuZ2V0VWludDMyKClcbiAgICB9XG5cbiAgICByZXR1cm4gaGlnaCAqIDB4MTAwMDAwMDAwICsgbG93XG4gIH1cblxuICBnZXRGbG9hdDMyKCkge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5kdi5nZXRGbG9hdDMyKHRoaXMub2Zmc2V0LCB0aGlzLmxpdHRsZUVuZGlhbilcbiAgICB0aGlzLm9mZnNldCArPSA0XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICBnZXRGbG9hdDMyQXJyYXkoc2l6ZSkge1xuICAgIGNvbnN0IGE6IGFueSA9IFtdXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgYS5wdXNoKHRoaXMuZ2V0RmxvYXQzMigpKVxuICAgIH1cblxuICAgIHJldHVybiBhXG4gIH1cblxuICBnZXRGbG9hdDY0KCkge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5kdi5nZXRGbG9hdDY0KHRoaXMub2Zmc2V0LCB0aGlzLmxpdHRsZUVuZGlhbilcbiAgICB0aGlzLm9mZnNldCArPSA4XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICBnZXRGbG9hdDY0QXJyYXkoc2l6ZSkge1xuICAgIGNvbnN0IGE6IGFueSA9IFtdXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgYS5wdXNoKHRoaXMuZ2V0RmxvYXQ2NCgpKVxuICAgIH1cblxuICAgIHJldHVybiBhXG4gIH1cblxuICBnZXRBcnJheUJ1ZmZlcihzaXplKSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLmR2LmJ1ZmZlci5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5vZmZzZXQgKyBzaXplKVxuICAgIHRoaXMub2Zmc2V0ICs9IHNpemVcbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIGdldFN0cmluZyhzaXplKSB7XG4gICAgLy8gbm90ZTogc2FmYXJpIDkgZG9lc24ndCBzdXBwb3J0IFVpbnQ4QXJyYXkuaW5kZXhPZjsgY3JlYXRlIGludGVybWVkaWF0ZSBhcnJheSBpbnN0ZWFkXG4gICAgbGV0IGE6IGFueSA9IFtdXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgYVtpXSA9IHRoaXMuZ2V0VWludDgoKVxuICAgIH1cblxuICAgIGNvbnN0IG51bGxCeXRlID0gYS5pbmRleE9mKDApXG4gICAgaWYgKG51bGxCeXRlID49IDApIGEgPSBhLnNsaWNlKDAsIG51bGxCeXRlKVxuXG4gICAgcmV0dXJuIExvYWRlclV0aWxzLmRlY29kZVRleHQobmV3IFVpbnQ4QXJyYXkoYSkpXG4gIH1cbn1cblxuY2xhc3MgRkJYVHJlZSB7XG4gIGNvbnN0cnVjdG9yKCkge31cblxuICBhZGQoa2V5LCB2YWwpIHtcbiAgICB0aGlzW2tleV0gPSB2YWxcbiAgfVxufVxuXG5mdW5jdGlvbiBpc0ZieEZvcm1hdEJpbmFyeShidWZmZXIpIHtcbiAgY29uc3QgQ09SUkVDVCA9ICdLYXlkYXJhIEZCWCBCaW5hcnkgIFxcMCdcblxuICByZXR1cm4gYnVmZmVyLmJ5dGVMZW5ndGggPj0gQ09SUkVDVC5sZW5ndGggJiYgQ09SUkVDVCA9PT0gY29udmVydEFycmF5QnVmZmVyVG9TdHJpbmcoYnVmZmVyLCAwLCBDT1JSRUNULmxlbmd0aClcbn1cblxuZnVuY3Rpb24gaXNGYnhGb3JtYXRBU0NJSSh0ZXh0KSB7XG4gIGNvbnN0IENPUlJFQ1QgPSBbXG4gICAgJ0snLFxuICAgICdhJyxcbiAgICAneScsXG4gICAgJ2QnLFxuICAgICdhJyxcbiAgICAncicsXG4gICAgJ2EnLFxuICAgICdcXFxcJyxcbiAgICAnRicsXG4gICAgJ0InLFxuICAgICdYJyxcbiAgICAnXFxcXCcsXG4gICAgJ0InLFxuICAgICdpJyxcbiAgICAnbicsXG4gICAgJ2EnLFxuICAgICdyJyxcbiAgICAneScsXG4gICAgJ1xcXFwnLFxuICAgICdcXFxcJ1xuICBdXG5cbiAgbGV0IGN1cnNvciA9IDBcblxuICBmdW5jdGlvbiByZWFkKG9mZnNldCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRleHRbb2Zmc2V0IC0gMV1cbiAgICB0ZXh0ID0gdGV4dC5zbGljZShjdXJzb3IgKyBvZmZzZXQpXG4gICAgY3Vyc29yKytcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IENPUlJFQ1QubGVuZ3RoOyArK2kpIHtcbiAgICBjb25zdCBudW0gPSByZWFkKDEpXG4gICAgaWYgKG51bSA9PT0gQ09SUkVDVFtpXSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWVcbn1cblxuZnVuY3Rpb24gZ2V0RmJ4VmVyc2lvbih0ZXh0KSB7XG4gIGNvbnN0IHZlcnNpb25SZWdFeHAgPSAvRkJYVmVyc2lvbjogKFxcZCspL1xuICBjb25zdCBtYXRjaCA9IHRleHQubWF0Y2godmVyc2lvblJlZ0V4cClcbiAgaWYgKG1hdGNoKSB7XG4gICAgY29uc3QgdmVyc2lvbiA9IHBhcnNlSW50KG1hdGNoWzFdKVxuICAgIHJldHVybiB2ZXJzaW9uXG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKCdGQlhMb2FkZXI6IENhbm5vdCBmaW5kIHRoZSB2ZXJzaW9uIG51bWJlciBmb3IgdGhlIGZpbGUgZ2l2ZW4uJylcbn1cblxuLy8gQ29udmVydHMgRkJYIHRpY2tzIGludG8gcmVhbCB0aW1lIHNlY29uZHMuXG5mdW5jdGlvbiBjb252ZXJ0RkJYVGltZVRvU2Vjb25kcyh0aW1lKSB7XG4gIHJldHVybiB0aW1lIC8gNDYxODYxNTgwMDBcbn1cblxuY29uc3QgZGF0YUFycmF5ID0gW11cblxuLy8gZXh0cmFjdHMgdGhlIGRhdGEgZnJvbSB0aGUgY29ycmVjdCBwb3NpdGlvbiBpbiB0aGUgRkJYIGFycmF5IGJhc2VkIG9uIGluZGV4aW5nIHR5cGVcbmZ1bmN0aW9uIGdldERhdGEocG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCBpbmZvT2JqZWN0KSB7XG4gIGxldCBpbmRleFxuXG4gIHN3aXRjaCAoaW5mb09iamVjdC5tYXBwaW5nVHlwZSkge1xuICAgIGNhc2UgJ0J5UG9seWdvblZlcnRleCc6XG4gICAgICBpbmRleCA9IHBvbHlnb25WZXJ0ZXhJbmRleFxuICAgICAgYnJlYWtcbiAgICBjYXNlICdCeVBvbHlnb24nOlxuICAgICAgaW5kZXggPSBwb2x5Z29uSW5kZXhcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnQnlWZXJ0aWNlJzpcbiAgICAgIGluZGV4ID0gdmVydGV4SW5kZXhcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnQWxsU2FtZSc6XG4gICAgICBpbmRleCA9IGluZm9PYmplY3QuaW5kaWNlc1swXVxuICAgICAgYnJlYWtcbiAgICBkZWZhdWx0OlxuICAgICAgY29uc29sZS53YXJuKCdGQlhMb2FkZXI6IHVua25vd24gYXR0cmlidXRlIG1hcHBpbmcgdHlwZSAnICsgaW5mb09iamVjdC5tYXBwaW5nVHlwZSlcbiAgfVxuXG4gIGlmIChpbmZvT2JqZWN0LnJlZmVyZW5jZVR5cGUgPT09ICdJbmRleFRvRGlyZWN0JykgaW5kZXggPSBpbmZvT2JqZWN0LmluZGljZXNbaW5kZXhdXG5cbiAgY29uc3QgZnJvbSA9IGluZGV4ICogaW5mb09iamVjdC5kYXRhU2l6ZVxuICBjb25zdCB0byA9IGZyb20gKyBpbmZvT2JqZWN0LmRhdGFTaXplXG5cbiAgcmV0dXJuIHNsaWNlKGRhdGFBcnJheSwgaW5mb09iamVjdC5idWZmZXIsIGZyb20sIHRvKVxufVxuXG5jb25zdCB0ZW1wRXVsZXIgPSBuZXcgRXVsZXIoKVxuY29uc3QgdGVtcFZlYyA9IG5ldyBWZWN0b3IzKClcblxuLy8gZ2VuZXJhdGUgdHJhbnNmb3JtYXRpb24gZnJvbSBGQlggdHJhbnNmb3JtIGRhdGFcbi8vIHJlZjogaHR0cHM6Ly9oZWxwLmF1dG9kZXNrLmNvbS92aWV3L0ZCWC8yMDE3L0VOVS8/Z3VpZD1fX2ZpbGVzX0dVSURfMTBDREQ2M0NfNzlDMV80RjJEX0JCMjhfQUQyQkU2NUEwMkVEX2h0bVxuLy8gcmVmOiBodHRwOi8vZG9jcy5hdXRvZGVzay5jb20vRkJYLzIwMTQvRU5VL0ZCWC1TREstRG9jdW1lbnRhdGlvbi9pbmRleC5odG1sP3VybD1jcHBfcmVmL190cmFuc2Zvcm1hdGlvbnNfMm1haW5fOGN4eC1leGFtcGxlLmh0bWwsdG9waWNOdW1iZXI9Y3BwX3JlZl9fdHJhbnNmb3JtYXRpb25zXzJtYWluXzhjeHhfZXhhbXBsZV9odG1sZmMxMGExZTEtYjE4ZC00ZTcyLTlkYzAtNzBkMGYxOTU5ZjVlXG5mdW5jdGlvbiBnZW5lcmF0ZVRyYW5zZm9ybSh0cmFuc2Zvcm1EYXRhKSB7XG4gIGNvbnN0IGxUcmFuc2xhdGlvbk0gPSBuZXcgTWF0cml4NCgpXG4gIGNvbnN0IGxQcmVSb3RhdGlvbk0gPSBuZXcgTWF0cml4NCgpXG4gIGNvbnN0IGxSb3RhdGlvbk0gPSBuZXcgTWF0cml4NCgpXG4gIGNvbnN0IGxQb3N0Um90YXRpb25NID0gbmV3IE1hdHJpeDQoKVxuXG4gIGNvbnN0IGxTY2FsaW5nTSA9IG5ldyBNYXRyaXg0KClcbiAgY29uc3QgbFNjYWxpbmdQaXZvdE0gPSBuZXcgTWF0cml4NCgpXG4gIGNvbnN0IGxTY2FsaW5nT2Zmc2V0TSA9IG5ldyBNYXRyaXg0KClcbiAgY29uc3QgbFJvdGF0aW9uT2Zmc2V0TSA9IG5ldyBNYXRyaXg0KClcbiAgY29uc3QgbFJvdGF0aW9uUGl2b3RNID0gbmV3IE1hdHJpeDQoKVxuXG4gIGxldCBsUGFyZW50R1ggPSBuZXcgTWF0cml4NCgpXG4gIGNvbnN0IGxHbG9iYWxUID0gbmV3IE1hdHJpeDQoKVxuXG4gIGNvbnN0IGluaGVyaXRUeXBlID0gdHJhbnNmb3JtRGF0YS5pbmhlcml0VHlwZSA/IHRyYW5zZm9ybURhdGEuaW5oZXJpdFR5cGUgOiAwXG5cbiAgaWYgKHRyYW5zZm9ybURhdGEudHJhbnNsYXRpb24pIGxUcmFuc2xhdGlvbk0uc2V0UG9zaXRpb24odGVtcFZlYy5mcm9tQXJyYXkodHJhbnNmb3JtRGF0YS50cmFuc2xhdGlvbikpXG5cbiAgaWYgKHRyYW5zZm9ybURhdGEucHJlUm90YXRpb24pIHtcbiAgICBjb25zdCBhcnJheSA9IHRyYW5zZm9ybURhdGEucHJlUm90YXRpb24ubWFwKE1hdGhVdGlscy5kZWdUb1JhZClcbiAgICBhcnJheS5wdXNoKHRyYW5zZm9ybURhdGEuZXVsZXJPcmRlcilcbiAgICBsUHJlUm90YXRpb25NLm1ha2VSb3RhdGlvbkZyb21FdWxlcih0ZW1wRXVsZXIuZnJvbUFycmF5KGFycmF5KSlcbiAgfVxuXG4gIGlmICh0cmFuc2Zvcm1EYXRhLnJvdGF0aW9uKSB7XG4gICAgY29uc3QgYXJyYXkgPSB0cmFuc2Zvcm1EYXRhLnJvdGF0aW9uLm1hcChNYXRoVXRpbHMuZGVnVG9SYWQpXG4gICAgYXJyYXkucHVzaCh0cmFuc2Zvcm1EYXRhLmV1bGVyT3JkZXIpXG4gICAgbFJvdGF0aW9uTS5tYWtlUm90YXRpb25Gcm9tRXVsZXIodGVtcEV1bGVyLmZyb21BcnJheShhcnJheSkpXG4gIH1cblxuICBpZiAodHJhbnNmb3JtRGF0YS5wb3N0Um90YXRpb24pIHtcbiAgICBjb25zdCBhcnJheSA9IHRyYW5zZm9ybURhdGEucG9zdFJvdGF0aW9uLm1hcChNYXRoVXRpbHMuZGVnVG9SYWQpXG4gICAgYXJyYXkucHVzaCh0cmFuc2Zvcm1EYXRhLmV1bGVyT3JkZXIpXG4gICAgbFBvc3RSb3RhdGlvbk0ubWFrZVJvdGF0aW9uRnJvbUV1bGVyKHRlbXBFdWxlci5mcm9tQXJyYXkoYXJyYXkpKVxuICB9XG5cbiAgaWYgKHRyYW5zZm9ybURhdGEuc2NhbGUpIGxTY2FsaW5nTS5zY2FsZSh0ZW1wVmVjLmZyb21BcnJheSh0cmFuc2Zvcm1EYXRhLnNjYWxlKSlcblxuICAvLyBQaXZvdHMgYW5kIG9mZnNldHNcbiAgaWYgKHRyYW5zZm9ybURhdGEuc2NhbGluZ09mZnNldCkgbFNjYWxpbmdPZmZzZXRNLnNldFBvc2l0aW9uKHRlbXBWZWMuZnJvbUFycmF5KHRyYW5zZm9ybURhdGEuc2NhbGluZ09mZnNldCkpXG4gIGlmICh0cmFuc2Zvcm1EYXRhLnNjYWxpbmdQaXZvdCkgbFNjYWxpbmdQaXZvdE0uc2V0UG9zaXRpb24odGVtcFZlYy5mcm9tQXJyYXkodHJhbnNmb3JtRGF0YS5zY2FsaW5nUGl2b3QpKVxuICBpZiAodHJhbnNmb3JtRGF0YS5yb3RhdGlvbk9mZnNldCkgbFJvdGF0aW9uT2Zmc2V0TS5zZXRQb3NpdGlvbih0ZW1wVmVjLmZyb21BcnJheSh0cmFuc2Zvcm1EYXRhLnJvdGF0aW9uT2Zmc2V0KSlcbiAgaWYgKHRyYW5zZm9ybURhdGEucm90YXRpb25QaXZvdCkgbFJvdGF0aW9uUGl2b3RNLnNldFBvc2l0aW9uKHRlbXBWZWMuZnJvbUFycmF5KHRyYW5zZm9ybURhdGEucm90YXRpb25QaXZvdCkpXG5cbiAgLy8gcGFyZW50IHRyYW5zZm9ybVxuICBpZiAodHJhbnNmb3JtRGF0YS5wYXJlbnRNYXRyaXhXb3JsZCkgbFBhcmVudEdYID0gdHJhbnNmb3JtRGF0YS5wYXJlbnRNYXRyaXhXb3JsZFxuXG4gIC8vIEdsb2JhbCBSb3RhdGlvblxuICBjb25zdCBsTFJNID0gbFByZVJvdGF0aW9uTS5tdWx0aXBseShsUm90YXRpb25NKS5tdWx0aXBseShsUG9zdFJvdGF0aW9uTSlcbiAgY29uc3QgbFBhcmVudEdSTSA9IG5ldyBNYXRyaXg0KClcbiAgbFBhcmVudEdYLmV4dHJhY3RSb3RhdGlvbihsUGFyZW50R1JNKVxuXG4gIC8vIEdsb2JhbCBTaGVhcipTY2FsaW5nXG4gIGNvbnN0IGxQYXJlbnRUTSA9IG5ldyBNYXRyaXg0KClcbiAgbFBhcmVudFRNLmNvcHlQb3NpdGlvbihsUGFyZW50R1gpXG4gIGNvbnN0IGxQYXJlbnRHUlNNID0gbFBhcmVudFRNLmludmVydCgpLm11bHRpcGx5KGxQYXJlbnRHWClcbiAgY29uc3QgbFBhcmVudEdTTSA9IGxQYXJlbnRHUk0uaW52ZXJ0KCkubXVsdGlwbHkobFBhcmVudEdSU00pXG4gIGNvbnN0IGxMU00gPSBsU2NhbGluZ01cblxuICBsZXQgbEdsb2JhbFJTXG4gIGlmIChpbmhlcml0VHlwZSA9PT0gMCkge1xuICAgIGxHbG9iYWxSUyA9IGxQYXJlbnRHUk0ubXVsdGlwbHkobExSTSkubXVsdGlwbHkobFBhcmVudEdTTSkubXVsdGlwbHkobExTTSlcbiAgfSBlbHNlIGlmIChpbmhlcml0VHlwZSA9PT0gMSkge1xuICAgIGxHbG9iYWxSUyA9IGxQYXJlbnRHUk0ubXVsdGlwbHkobFBhcmVudEdTTSkubXVsdGlwbHkobExSTSkubXVsdGlwbHkobExTTSlcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBsUGFyZW50TFNNID0gbmV3IE1hdHJpeDQoKS5jb3B5KGxTY2FsaW5nTSlcblxuICAgIGNvbnN0IGxQYXJlbnRHU01fbm9Mb2NhbCA9IGxQYXJlbnRHU00ubXVsdGlwbHkobFBhcmVudExTTS5pbnZlcnQoKSlcblxuICAgIGxHbG9iYWxSUyA9IGxQYXJlbnRHUk0ubXVsdGlwbHkobExSTSkubXVsdGlwbHkobFBhcmVudEdTTV9ub0xvY2FsKS5tdWx0aXBseShsTFNNKVxuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIHRoZSBsb2NhbCB0cmFuc2Zvcm0gbWF0cml4XG4gIGxldCBsVHJhbnNmb3JtID0gbFRyYW5zbGF0aW9uTVxuICAgIC5tdWx0aXBseShsUm90YXRpb25PZmZzZXRNKVxuICAgIC5tdWx0aXBseShsUm90YXRpb25QaXZvdE0pXG4gICAgLm11bHRpcGx5KGxQcmVSb3RhdGlvbk0pXG4gICAgLm11bHRpcGx5KGxSb3RhdGlvbk0pXG4gICAgLm11bHRpcGx5KGxQb3N0Um90YXRpb25NKVxuICAgIC5tdWx0aXBseShsUm90YXRpb25QaXZvdE0uaW52ZXJ0KCkpXG4gICAgLm11bHRpcGx5KGxTY2FsaW5nT2Zmc2V0TSlcbiAgICAubXVsdGlwbHkobFNjYWxpbmdQaXZvdE0pXG4gICAgLm11bHRpcGx5KGxTY2FsaW5nTSlcbiAgICAubXVsdGlwbHkobFNjYWxpbmdQaXZvdE0uaW52ZXJ0KCkpXG5cbiAgY29uc3QgbExvY2FsVFdpdGhBbGxQaXZvdEFuZE9mZnNldEluZm8gPSBuZXcgTWF0cml4NCgpLmNvcHlQb3NpdGlvbihsVHJhbnNmb3JtKVxuXG4gIGNvbnN0IGxHbG9iYWxUcmFuc2xhdGlvbiA9IGxQYXJlbnRHWC5tdWx0aXBseShsTG9jYWxUV2l0aEFsbFBpdm90QW5kT2Zmc2V0SW5mbylcbiAgbEdsb2JhbFQuY29weVBvc2l0aW9uKGxHbG9iYWxUcmFuc2xhdGlvbilcblxuICBsVHJhbnNmb3JtID0gbEdsb2JhbFQubXVsdGlwbHkobEdsb2JhbFJTKVxuXG4gIHJldHVybiBsVHJhbnNmb3JtXG59XG5cbi8vIFJldHVybnMgdGhlIGpzIGludHJpbnNpYyBFdWxlciBvcmRlciBjb3JyZXNwb25kaW5nIHRvIEZCWCBleHRyaW5zaWMgRXVsZXIgb3JkZXJcbi8vIHJlZjogaHR0cDovL2hlbHAuYXV0b2Rlc2suY29tL3ZpZXcvRkJYLzIwMTcvRU5VLz9ndWlkPV9fY3BwX3JlZl9jbGFzc19mYnhfZXVsZXJfaHRtbFxuZnVuY3Rpb24gZ2V0RXVsZXJPcmRlcihvcmRlcikge1xuICBvcmRlciA9IG9yZGVyIHx8IDBcblxuICBjb25zdCBlbnVtcyA9IFtcbiAgICAnWllYJywgLy8gLT4gWFlaIGV4dHJpbnNpY1xuICAgICdZWlgnLCAvLyAtPiBYWlkgZXh0cmluc2ljXG4gICAgJ1haWScsIC8vIC0+IFlaWCBleHRyaW5zaWNcbiAgICAnWlhZJywgLy8gLT4gWVhaIGV4dHJpbnNpY1xuICAgICdZWFonLCAvLyAtPiBaWFkgZXh0cmluc2ljXG4gICAgJ1hZWicgLy8gLT4gWllYIGV4dHJpbnNpY1xuICAgIC8vJ1NwaGVyaWNYWVonLCAvLyBub3QgcG9zc2libGUgdG8gc3VwcG9ydFxuICBdXG5cbiAgaWYgKG9yZGVyID09PSA2KSB7XG4gICAgY29uc29sZS53YXJuKCdGQlhMb2FkZXI6IHVuc3VwcG9ydGVkIEV1bGVyIE9yZGVyOiBTcGhlcmljYWwgWFlaLiBBbmltYXRpb25zIGFuZCByb3RhdGlvbnMgbWF5IGJlIGluY29ycmVjdC4nKVxuICAgIHJldHVybiBlbnVtc1swXVxuICB9XG5cbiAgcmV0dXJuIGVudW1zW29yZGVyXVxufVxuXG4vLyBQYXJzZXMgY29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgbnVtYmVycyBhbmQgcmV0dXJucyB0aGVtIGFuIGFycmF5LlxuLy8gVXNlZCBpbnRlcm5hbGx5IGJ5IHRoZSBUZXh0UGFyc2VyXG5mdW5jdGlvbiBwYXJzZU51bWJlckFycmF5KHZhbHVlKSB7XG4gIGNvbnN0IGFycmF5ID0gdmFsdWUuc3BsaXQoJywnKS5tYXAoKHZhbCkgPT4ge1xuICAgIHJldHVybiBwYXJzZUZsb2F0KHZhbClcbiAgfSlcblxuICByZXR1cm4gYXJyYXlcbn1cblxuZnVuY3Rpb24gY29udmVydEFycmF5QnVmZmVyVG9TdHJpbmcoYnVmZmVyLCBmcm9tPywgdG8/KSB7XG4gIGlmIChmcm9tID09PSB1bmRlZmluZWQpIGZyb20gPSAwXG4gIGlmICh0byA9PT0gdW5kZWZpbmVkKSB0byA9IGJ1ZmZlci5ieXRlTGVuZ3RoXG5cbiAgcmV0dXJuIExvYWRlclV0aWxzLmRlY29kZVRleHQobmV3IFVpbnQ4QXJyYXkoYnVmZmVyLCBmcm9tLCB0bykpXG59XG5cbmZ1bmN0aW9uIGFwcGVuZChhLCBiKSB7XG4gIGZvciAobGV0IGkgPSAwLCBqID0gYS5sZW5ndGgsIGwgPSBiLmxlbmd0aDsgaSA8IGw7IGkrKywgaisrKSB7XG4gICAgYVtqXSA9IGJbaV1cbiAgfVxufVxuXG5mdW5jdGlvbiBzbGljZShhLCBiLCBmcm9tLCB0bykge1xuICBmb3IgKGxldCBpID0gZnJvbSwgaiA9IDA7IGkgPCB0bzsgaSsrLCBqKyspIHtcbiAgICBhW2pdID0gYltpXVxuICB9XG5cbiAgcmV0dXJuIGFcbn1cblxuLy8gaW5qZWN0IGFycmF5IGEyIGludG8gYXJyYXkgYTEgYXQgaW5kZXhcbmZ1bmN0aW9uIGluamVjdChhMSwgaW5kZXgsIGEyKSB7XG4gIHJldHVybiBhMS5zbGljZSgwLCBpbmRleCkuY29uY2F0KGEyKS5jb25jYXQoYTEuc2xpY2UoaW5kZXgpKVxufVxuXG5leHBvcnQgZGVmYXVsdCBGQlhMb2FkZXJcbiIsIi8qKiBMaXN0IG9mIEFzc2V0IFR5cGVzLiAqL1xuZXhwb3J0IGVudW0gQXNzZXRUeXBlIHtcbiAgZ2xURixcbiAgRkJYLFxuICBPQkosXG4gIFZSTSxcbiAgUE5HLFxuICBKUEVHLFxuICBNUDQsXG4gIFRTLFxuICBNS1YsXG4gIE1QMyxcbiAgT0dHLFxuICBBQUMsXG4gIENTVixcbiAgUGxhaW5UZXh0LFxuICBET0MsXG4gIFhMUyxcbiAgU2NyaXB0XG59XG4iLCIvKiogTGlzdCBvZiBBc3NldCBDbGFzc2VzLiAqL1xuZXhwb3J0IGVudW0gQXNzZXRDbGFzcyB7XG4gIE1vZGVsLFxuICBJbWFnZSxcbiAgVmlkZW8sXG4gIEF1ZGlvLFxuICBEb2N1bWVudCxcbiAgVGV4dCxcbiAgU2NyaXB0XG59XG4iLCJjb25zdCBpc0Fic29sdXRlID0gbmV3IFJlZ0V4cChgKD86XlthLXpdW2EtejAtOSsuLV0qOnxcXC9cXC8pYClcbmV4cG9ydCBjb25zdCBpc0Fic29sdXRlUGF0aCA9IChwYXRoKSA9PiB7XG4gIHJldHVybiBpc0Fic29sdXRlLnRlc3QocGF0aClcbn1cbiIsImV4cG9ydCBjb25zdCBERUZBVUxUX0xPRF9ESVNUQU5DRVMgPSB7XG4gICcwJzogNSxcbiAgJzEnOiAxNSxcbiAgJzInOiAzMFxufVxuXG5leHBvcnQgY29uc3QgTE9EU19SRUdFWFAgPSBuZXcgUmVnRXhwKC9eKC4qKV9MT0QoXFxkKykkLylcblxuZXhwb3J0IGNvbnN0IExPQURFUl9TVEFUVVMgPSB7XG4gIExPQURFRDogMCxcbiAgTE9BRElORzogMSxcbiAgRVJST1I6IDJcbn1cbiIsImltcG9ydCB7IEZpbGVMb2FkZXIsIE1lc2hQaHlzaWNhbE1hdGVyaWFsLCBPYmplY3QzRCwgTE9ELCBUZXh0dXJlTG9hZGVyIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBnZXRMb2FkZXIgYXMgZ2V0R0xURkxvYWRlciwgbG9hZEV4dGVudGlvbnMgfSBmcm9tICcuLi9mdW5jdGlvbnMvTG9hZEdMVEYnXG5pbXBvcnQgeyBGQlhMb2FkZXIgfSBmcm9tICcuLi9sb2FkZXJzL2ZieC9GQlhMb2FkZXInXG5pbXBvcnQgeyBBc3NldFR5cGUgfSBmcm9tICcuLi9lbnVtL0Fzc2V0VHlwZSdcbmltcG9ydCB7IEFzc2V0Q2xhc3MgfSBmcm9tICcuLi9lbnVtL0Fzc2V0Q2xhc3MnXG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tICcuLi8uLi9lY3MvY2xhc3Nlcy9FbnRpdHknXG5pbXBvcnQgeyBpc0Fic29sdXRlUGF0aCB9IGZyb20gJy4uLy4uL2NvbW1vbi9mdW5jdGlvbnMvaXNBYnNvbHV0ZVBhdGgnXG5pbXBvcnQgeyBFbmdpbmUgfSBmcm9tICcuLi8uLi9lY3MvY2xhc3Nlcy9FbmdpbmUnXG5pbXBvcnQgeyBMT0RTX1JFR0VYUCwgREVGQVVMVF9MT0RfRElTVEFOQ0VTIH0gZnJvbSAnLi4vY29uc3RhbnRzL0xvYWRlckNvbnN0YW50cydcblxuZXhwb3J0IGNvbnN0IHByb2Nlc3NNb2RlbEFzc2V0ID0gKGFzc2V0OiBhbnksIHBhcmFtczogQXNzZXRMb2FkZXJQYXJhbVR5cGUpOiB2b2lkID0+IHtcbiAgY29uc3QgcmVwbGFjZWRNYXRlcmlhbHMgPSBuZXcgTWFwKClcbiAgYXNzZXQudHJhdmVyc2UoKGNoaWxkKSA9PiB7XG4gICAgaWYgKCFjaGlsZC5pc01lc2gpIHJldHVyblxuXG4gICAgaWYgKHR5cGVvZiBwYXJhbXMucmVjZWl2ZVNoYWRvdyAhPT0gJ3VuZGVmaW5lZCcpIGNoaWxkLnJlY2VpdmVTaGFkb3cgPSBwYXJhbXMucmVjZWl2ZVNoYWRvd1xuICAgIGlmICh0eXBlb2YgcGFyYW1zLmNhc3RTaGFkb3cgIT09ICd1bmRlZmluZWQnKSBjaGlsZC5jYXN0U2hhZG93ID0gcGFyYW1zLmNhc3RTaGFkb3dcblxuICAgIGlmIChyZXBsYWNlZE1hdGVyaWFscy5oYXMoY2hpbGQubWF0ZXJpYWwpKSB7XG4gICAgICBjaGlsZC5tYXRlcmlhbCA9IHJlcGxhY2VkTWF0ZXJpYWxzLmdldChjaGlsZC5tYXRlcmlhbClcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGNoaWxkLm1hdGVyaWFsPy51c2VyRGF0YT8uZ2x0ZkV4dGVuc2lvbnM/LktIUl9tYXRlcmlhbHNfY2xlYXJjb2F0KSB7XG4gICAgICAgIGNvbnN0IG5ld01hdGVyaWFsID0gbmV3IE1lc2hQaHlzaWNhbE1hdGVyaWFsKHt9KVxuICAgICAgICBuZXdNYXRlcmlhbC5zZXRWYWx1ZXMoY2hpbGQubWF0ZXJpYWwpIC8vIHRvIGNvcHkgcHJvcGVydGllcyBvZiBvcmlnaW5hbCBtYXRlcmlhbFxuICAgICAgICBuZXdNYXRlcmlhbC5jbGVhcmNvYXQgPSBjaGlsZC5tYXRlcmlhbC51c2VyRGF0YS5nbHRmRXh0ZW5zaW9ucy5LSFJfbWF0ZXJpYWxzX2NsZWFyY29hdC5jbGVhcmNvYXRGYWN0b3JcbiAgICAgICAgbmV3TWF0ZXJpYWwuY2xlYXJjb2F0Um91Z2huZXNzID1cbiAgICAgICAgICBjaGlsZC5tYXRlcmlhbC51c2VyRGF0YS5nbHRmRXh0ZW5zaW9ucy5LSFJfbWF0ZXJpYWxzX2NsZWFyY29hdC5jbGVhcmNvYXRSb3VnaG5lc3NGYWN0b3JcbiAgICAgICAgbmV3TWF0ZXJpYWwuZGVmaW5lcyA9IHsgU1RBTkRBUkQ6ICcnLCBQSFlTSUNBTDogJycgfSAvLyBvdmVycmlkZSBpZiBpdCdzIHJlcGxhY2VkIGJ5IG5vbiBQSFlTSUNBTCBkZWZpbmVzIG9mIGNoaWxkLm1hdGVyaWFsXG5cbiAgICAgICAgcmVwbGFjZWRNYXRlcmlhbHMuc2V0KGNoaWxkLm1hdGVyaWFsLCBuZXdNYXRlcmlhbClcbiAgICAgICAgY2hpbGQubWF0ZXJpYWwgPSBuZXdNYXRlcmlhbFxuICAgICAgfVxuICAgIH1cbiAgfSlcbiAgcmVwbGFjZWRNYXRlcmlhbHMuY2xlYXIoKVxuXG4gIGhhbmRsZUxPRHMoYXNzZXQpXG5cbiAgaWYgKGFzc2V0LmNoaWxkcmVuLmxlbmd0aCkge1xuICAgIGFzc2V0LmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiBoYW5kbGVMT0RzKGNoaWxkKSlcbiAgfVxufVxuXG4vKipcbiAqIEhhbmRsZXMgTGV2ZWwgb2YgRGV0YWlsIGZvciBhc3NldC5cbiAqIEBwYXJhbSBhc3NldCBBc3NldCBvbiB3aGljaCBMT0Qgd2lsbCBhcHBseS5cbiAqIEByZXR1cm5zIExPRCBoYW5kbGVkIGFzc2V0LlxuICovXG5leHBvcnQgY29uc3QgaGFuZGxlTE9EcyA9IChhc3NldDogT2JqZWN0M0QpOiBPYmplY3QzRCA9PiB7XG4gIGNvbnN0IGhhdmVBbnlMT0RzID0gISFhc3NldC5jaGlsZHJlbj8uZmluZCgoYykgPT4gU3RyaW5nKGMubmFtZSkubWF0Y2goTE9EU19SRUdFWFApKVxuICBpZiAoIWhhdmVBbnlMT0RzKSB7XG4gICAgcmV0dXJuIGFzc2V0XG4gIH1cblxuICBjb25zdCBMT0RzID0gbmV3IE1hcDxzdHJpbmcsIHsgb2JqZWN0OiBPYmplY3QzRDsgbGV2ZWw6IHN0cmluZyB9W10+KClcbiAgYXNzZXQuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICBjb25zdCBjaGlsZE1hdGNoID0gY2hpbGQubmFtZS5tYXRjaChMT0RTX1JFR0VYUClcbiAgICBpZiAoIWNoaWxkTWF0Y2gpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBbXywgbmFtZSwgbGV2ZWxdOiBzdHJpbmdbXSA9IGNoaWxkTWF0Y2hcbiAgICBpZiAoIW5hbWUgfHwgIWxldmVsKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoIUxPRHMuaGFzKG5hbWUpKSB7XG4gICAgICBMT0RzLnNldChuYW1lLCBbXSlcbiAgICB9XG5cbiAgICBMT0RzLmdldChuYW1lKT8ucHVzaCh7IG9iamVjdDogY2hpbGQsIGxldmVsIH0pXG4gIH0pXG5cbiAgTE9Ecy5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgY29uc3QgbG9kID0gbmV3IExPRCgpXG4gICAgbG9kLm5hbWUgPSBrZXlcbiAgICB2YWx1ZVswXS5vYmplY3QucGFyZW50Py5hZGQobG9kKVxuXG4gICAgdmFsdWUuZm9yRWFjaCgoeyBsZXZlbCwgb2JqZWN0IH0pID0+IHtcbiAgICAgIGxvZC5hZGRMZXZlbChvYmplY3QsIEFzc2V0TG9hZGVyLkxPRF9ESVNUQU5DRVNbbGV2ZWxdKVxuICAgIH0pXG4gIH0pXG5cbiAgcmV0dXJuIGFzc2V0XG59XG5cbi8qKlxuICogR2V0IGFzc2V0IHR5cGUgZnJvbSB0aGUgYXNzZXQgZmlsZSBleHRlbnNpb24uXG4gKiBAcGFyYW0gYXNzZXRGaWxlTmFtZSBOYW1lIG9mIHRoZSBBc3NldCBmaWxlLlxuICogQHJldHVybnMgQXNzZXQgdHlwZSBvZiB0aGUgZmlsZS5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldEFzc2V0VHlwZSA9IChhc3NldEZpbGVOYW1lOiBzdHJpbmcpOiBBc3NldFR5cGUgPT4ge1xuICBpZiAoL1xcLig/OmdsdGZ8Z2xiKSQvLnRlc3QoYXNzZXRGaWxlTmFtZSkpIHJldHVybiBBc3NldFR5cGUuZ2xURlxuICBlbHNlIGlmICgvXFwuKD86ZmJ4KSQvLnRlc3QoYXNzZXRGaWxlTmFtZSkpIHJldHVybiBBc3NldFR5cGUuRkJYXG4gIGVsc2UgaWYgKC9cXC4oPzp2cm0pJC8udGVzdChhc3NldEZpbGVOYW1lKSkgcmV0dXJuIEFzc2V0VHlwZS5WUk1cbiAgZWxzZSBpZiAoL1xcLig/OnBuZykkLy50ZXN0KGFzc2V0RmlsZU5hbWUpKSByZXR1cm4gQXNzZXRUeXBlLlBOR1xuICBlbHNlIGlmICgvXFwuKD86anBnfGpwZWd8KSQvLnRlc3QoYXNzZXRGaWxlTmFtZSkpIHJldHVybiBBc3NldFR5cGUuSlBFR1xuICByZXR1cm4gbnVsbCFcbn1cblxuLyoqXG4gKiBHZXQgYXNzZXQgY2xhc3MgZnJvbSB0aGUgYXNzZXQgZmlsZSBleHRlbnNpb24uXG4gKiBAcGFyYW0gYXNzZXRGaWxlTmFtZSBOYW1lIG9mIHRoZSBBc3NldCBmaWxlLlxuICogQHJldHVybnMgQXNzZXQgY2xhc3Mgb2YgdGhlIGZpbGUuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRBc3NldENsYXNzID0gKGFzc2V0RmlsZU5hbWU6IHN0cmluZyk6IEFzc2V0Q2xhc3MgPT4ge1xuICBpZiAoL1xcLig/OmdsdGZ8Z2xifHZybXxmYnh8b2JqKSQvLnRlc3QoYXNzZXRGaWxlTmFtZSkpIHtcbiAgICByZXR1cm4gQXNzZXRDbGFzcy5Nb2RlbFxuICB9IGVsc2UgaWYgKC9cXC5wbmd8anBnfGpwZWckLy50ZXN0KGFzc2V0RmlsZU5hbWUpKSB7XG4gICAgcmV0dXJuIEFzc2V0Q2xhc3MuSW1hZ2VcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbCFcbiAgfVxufVxuXG5jb25zdCBmYnhMb2FkZXIgPSBuZXcgRkJYTG9hZGVyKClcbmNvbnN0IHRleHR1cmVMb2FkZXIgPSBuZXcgVGV4dHVyZUxvYWRlcigpXG5jb25zdCBmaWxlTG9hZGVyID0gbmV3IEZpbGVMb2FkZXIoKVxuXG5jb25zdCBnZXRMb2FkZXIgPSAoYXNzZXRUeXBlOiBBc3NldFR5cGUpID0+IHtcbiAgc3dpdGNoIChhc3NldFR5cGUpIHtcbiAgICBjYXNlIEFzc2V0VHlwZS5nbFRGOlxuICAgIGNhc2UgQXNzZXRUeXBlLlZSTTpcbiAgICAgIHJldHVybiBnZXRHTFRGTG9hZGVyKClcbiAgICBjYXNlIEFzc2V0VHlwZS5GQlg6XG4gICAgICByZXR1cm4gZmJ4TG9hZGVyXG4gICAgY2FzZSBBc3NldFR5cGUuUE5HOlxuICAgIGNhc2UgQXNzZXRUeXBlLkpQRUc6XG4gICAgICByZXR1cm4gdGV4dHVyZUxvYWRlclxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmlsZUxvYWRlclxuICB9XG59XG5cbnR5cGUgQXNzZXRMb2FkZXJQYXJhbVR5cGUgPSB7XG4gIHVybDogc3RyaW5nXG4gIGNhc3RTaGFkb3c/OiBib29sZWFuXG4gIHJlY2VpdmVTaGFkb3c/OiBib29sZWFuXG4gIFtrZXk6IHN0cmluZ106IGFueVxufVxuXG5jb25zdCBsb2FkID0gKFxuICBwYXJhbXM6IEFzc2V0TG9hZGVyUGFyYW1UeXBlLFxuICBvbkxvYWQgPSAocmVzcG9uc2U6IGFueSkgPT4ge30sXG4gIG9uUHJvZ3Jlc3MgPSAocmVxdWVzdDogUHJvZ3Jlc3NFdmVudCkgPT4ge30sXG4gIG9uRXJyb3IgPSAoZXZlbnQ6IEVycm9yRXZlbnQgfCBFcnJvcikgPT4ge31cbikgPT4ge1xuICBpZiAoIXBhcmFtcy51cmwpIHtcbiAgICBvbkVycm9yKG5ldyBFcnJvcignVVJMIGlzIGVtcHR5JykpXG4gICAgcmV0dXJuXG4gIH1cbiAgY29uc3QgdXJsID0gaXNBYnNvbHV0ZVBhdGgocGFyYW1zLnVybCkgPyBwYXJhbXMudXJsIDogRW5naW5lLnB1YmxpY1BhdGggKyBwYXJhbXMudXJsXG5cbiAgaWYgKEFzc2V0TG9hZGVyLkNhY2hlLmhhcyh1cmwpKSB7XG4gICAgb25Mb2FkKEFzc2V0TG9hZGVyLkNhY2hlLmdldCh1cmwpKVxuICB9XG5cbiAgY29uc3QgYXNzZXRUeXBlID0gZ2V0QXNzZXRUeXBlKHVybClcbiAgY29uc3QgYXNzZXRDbGFzcyA9IGdldEFzc2V0Q2xhc3ModXJsKVxuXG4gIGNvbnN0IGxvYWRlciA9IGdldExvYWRlcihhc3NldFR5cGUpXG5cbiAgbG9hZGVyLmxvYWQoXG4gICAgdXJsLFxuICAgIChhc3NldCkgPT4ge1xuICAgICAgaWYgKGFzc2V0VHlwZSA9PT0gQXNzZXRUeXBlLmdsVEYgfHwgYXNzZXRUeXBlID09PSBBc3NldFR5cGUuVlJNKSB7XG4gICAgICAgIGxvYWRFeHRlbnRpb25zKGFzc2V0KVxuICAgICAgfVxuXG4gICAgICBpZiAoYXNzZXRDbGFzcyA9PT0gQXNzZXRDbGFzcy5Nb2RlbCkge1xuICAgICAgICBwcm9jZXNzTW9kZWxBc3NldChhc3NldC5zY2VuZSwgcGFyYW1zKVxuICAgICAgfVxuXG4gICAgICBBc3NldExvYWRlci5DYWNoZS5zZXQodXJsLCBhc3NldClcblxuICAgICAgb25Mb2FkKGFzc2V0KVxuICAgIH0sXG4gICAgb25Qcm9ncmVzcyxcbiAgICBvbkVycm9yXG4gIClcbn1cblxuZXhwb3J0IGNsYXNzIEFzc2V0TG9hZGVyIHtcbiAgc3RhdGljIENhY2hlID0gbmV3IE1hcDxzdHJpbmcsIGFueT4oKVxuICBzdGF0aWMgbG9hZGVycyA9IG5ldyBNYXA8bnVtYmVyLCBhbnk+KClcbiAgc3RhdGljIExPRF9ESVNUQU5DRVMgPSBERUZBVUxUX0xPRF9ESVNUQU5DRVNcblxuICBhc3NldFR5cGU6IEFzc2V0VHlwZVxuICBhc3NldENsYXNzOiBBc3NldENsYXNzXG4gIHJlc3VsdDogYW55XG5cbiAgc3RhdGljIGxvYWQoXG4gICAgcGFyYW1zOiBBc3NldExvYWRlclBhcmFtVHlwZSxcbiAgICBvbkxvYWQgPSAocmVzcG9uc2U6IGFueSkgPT4ge30sXG4gICAgb25Qcm9ncmVzcyA9IChyZXF1ZXN0OiBQcm9ncmVzc0V2ZW50KSA9PiB7fSxcbiAgICBvbkVycm9yID0gKGV2ZW50OiBFcnJvckV2ZW50IHwgRXJyb3IpID0+IHt9XG4gICkge1xuICAgIGxvYWQocGFyYW1zLCBvbkxvYWQsIG9uUHJvZ3Jlc3MsIG9uRXJyb3IpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbG9hZEFzeW5jKHBhcmFtczogQXNzZXRMb2FkZXJQYXJhbVR5cGUpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsb2FkKHBhcmFtcywgcmVzb2x2ZSwgKCkgPT4ge30sIHJlc29sdmUpXG4gICAgfSlcbiAgfVxuXG4gIC8vIFRPRE86IHdlIGFyZSByZXBsY2lhdGluZyBjb2RlIGhlcmUsIHdlIHNob3VsZCByZWZhY3RvciBBc3NldExvYWRlciB0byBiZSBlbnRpcmVseSBmdW5jdGlvbmFsXG4gIHN0YXRpYyBnZXRGcm9tQ2FjaGUodXJsOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gQXNzZXRMb2FkZXIuQ2FjaGUuZ2V0KGlzQWJzb2x1dGVQYXRoKHVybCkgPyB1cmwgOiBFbmdpbmUucHVibGljUGF0aCArIHVybClcbiAgfVxufVxuIiwiaW1wb3J0IHsgRW5naW5lIH0gZnJvbSAnLi4vY2xhc3Nlcy9FbmdpbmUnXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VXb3JsZCgpIHtcbiAgbGV0IGN1cnJlbnRXb3JsZCA9IEVuZ2luZS5jdXJyZW50V29ybGRcbiAgaWYgKCFjdXJyZW50V29ybGQpIHtcbiAgICAvLyBjb25zb2xlLnRyYWNlKCdXYXJuaW5nOiBBc3N1bWluZyBkZWZhdWx0IHdvcmxkLiAoSXQgaXMgYWR2aXNhYmxlIHRvIG9ubHkgY2FsbCBFQ1MgZnVuY3Rpb25zIGluc2lkZSBhIHN5c3RlbSknKVxuICAgIGN1cnJlbnRXb3JsZCA9IEVuZ2luZS5kZWZhdWx0V29ybGRcbiAgfVxuICByZXR1cm4gY3VycmVudFdvcmxkIVxufVxuIiwiaW1wb3J0ICogYXMgYml0RUNTIGZyb20gJ2JpdGVjcydcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gJy4uL2NsYXNzZXMvRW50aXR5J1xuaW1wb3J0IHsgdXNlV29ybGQgfSBmcm9tICcuL1N5c3RlbUhvb2tzJ1xuXG5leHBvcnQgY29uc3QgQ29tcG9uZW50TWFwID0gbmV3IE1hcDxzdHJpbmcsIENvbXBvbmVudFR5cGU8YW55Pj4oKVxuXG4vLyBUT0RPOiBiZW5jaG1hcmsgbWFwIHZzIGFycmF5IGZvciBjb21wb25lbnRNYXBcbmV4cG9ydCBjb25zdCBjcmVhdGVNYXBwZWRDb21wb25lbnQgPSA8VCBleHRlbmRzIHt9LCBTIGV4dGVuZHMgYml0RUNTLklTY2hlbWEgPSBiaXRFQ1MuSVNjaGVtYT4oXG4gIG5hbWU6IHN0cmluZyxcbiAgc2NoZW1hPzogU1xuKSA9PiB7XG4gIGNvbnN0IGNvbXBvbmVudCA9IGJpdEVDUy5kZWZpbmVDb21wb25lbnQoc2NoZW1hKVxuICBjb25zdCBjb21wb25lbnRNYXAgPSBuZXcgTWFwPG51bWJlciwgVCAmIFNvQVByb3h5PFM+PigpXG4gIC8vIGNvbnN0IGNvbXBvbmVudE1hcCA9IFtdXG5cbiAgaWYgKHNjaGVtYSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb21wb25lbnQsICdfc2NoZW1hJywge1xuICAgICAgdmFsdWU6IHNjaGVtYVxuICAgIH0pXG4gIH1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvbXBvbmVudCwgJ19tYXAnLCB7XG4gICAgdmFsdWU6IGNvbXBvbmVudE1hcFxuICB9KVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29tcG9uZW50LCAnX25hbWUnLCB7XG4gICAgdmFsdWU6IG5hbWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9KVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29tcG9uZW50LCAnZ2V0Jywge1xuICAgIHZhbHVlOiBmdW5jdGlvbiAoZWlkOiBudW1iZXIpIHtcbiAgICAgIC8vIHJldHVybiBjb21wb25lbnRNYXBbZWlkXVxuICAgICAgcmV0dXJuIGNvbXBvbmVudE1hcC5nZXQoZWlkKVxuICAgIH1cbiAgfSlcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvbXBvbmVudCwgJ3NldCcsIHtcbiAgICB2YWx1ZTogZnVuY3Rpb24gKGVpZDogbnVtYmVyLCB2YWx1ZTogYW55KSB7XG4gICAgICBpZiAoc2NoZW1hKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFxuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIE9iamVjdC5rZXlzKHNjaGVtYSkucmVkdWNlKChhLCBrKSA9PiB7XG4gICAgICAgICAgICBhW2tdID0ge1xuICAgICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudFtrXVtlaWRdXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHNldCh2YWwpIHtcbiAgICAgICAgICAgICAgICBjb21wb25lbnRba11bZWlkXSA9IHZhbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYVxuICAgICAgICAgIH0sIHt9KVxuICAgICAgICApXG4gICAgICB9XG4gICAgICAvLyBjb21wb25lbnRNYXBbZWlkXSA9IHZhbHVlXG4gICAgICByZXR1cm4gY29tcG9uZW50TWFwLnNldChlaWQsIHZhbHVlKVxuICAgIH1cbiAgfSlcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvbXBvbmVudCwgJ2RlbGV0ZScsIHtcbiAgICB2YWx1ZTogZnVuY3Rpb24gKGVpZDogbnVtYmVyKSB7XG4gICAgICAvLyBjb21wb25lbnRNYXBbZWlkXSA9IHVuZGVmaW5lZFxuICAgICAgcmV0dXJuIGNvbXBvbmVudE1hcC5kZWxldGUoZWlkKVxuICAgIH1cbiAgfSlcblxuICBDb21wb25lbnRNYXAuc2V0KG5hbWUsIGNvbXBvbmVudClcblxuICByZXR1cm4gY29tcG9uZW50IGFzIE1hcHBlZENvbXBvbmVudDxULCBTPlxufVxuXG5leHBvcnQgdHlwZSBTb0FQcm94eTxTIGV4dGVuZHMgYml0RUNTLklTY2hlbWE+ID0ge1xuICBba2V5IGluIGtleW9mIFNdOiBTW2tleV0gZXh0ZW5kcyBiaXRFQ1MuVHlwZVxuICAgID8gbnVtYmVyXG4gICAgOiBTW2tleV0gZXh0ZW5kcyBbaW5mZXIgUlQsIG51bWJlcl1cbiAgICA/IFJUIGV4dGVuZHMgYml0RUNTLlR5cGVcbiAgICAgID8gQXJyYXk8bnVtYmVyPlxuICAgICAgOiB1bmtub3duXG4gICAgOiBTW2tleV0gZXh0ZW5kcyBiaXRFQ1MuSVNjaGVtYVxuICAgID8gU29BUHJveHk8U1trZXldPlxuICAgIDogdW5rbm93blxufVxuXG5leHBvcnQgdHlwZSBNYXBwZWRDb21wb25lbnQ8VCwgUyBleHRlbmRzIGJpdEVDUy5JU2NoZW1hPiA9IGJpdEVDUy5Db21wb25lbnRUeXBlPFM+ICYge1xuICBnZXQ6IChlbnRpdHk6IG51bWJlcikgPT4gVCAmIFNvQVByb3h5PFM+XG4gIHNldDogKGVudGl0eTogbnVtYmVyLCB2YWx1ZTogVCAmIFNvQVByb3h5PFM+KSA9PiB2b2lkXG4gIGRlbGV0ZTogKGVudGl0eTogbnVtYmVyKSA9PiB2b2lkXG59XG5cbmV4cG9ydCB0eXBlIENvbXBvbmVudENvbnN0cnVjdG9yPFQsIFMgZXh0ZW5kcyBiaXRFQ1MuSVNjaGVtYT4gPSBNYXBwZWRDb21wb25lbnQ8VCwgUz5cbmV4cG9ydCB0eXBlIENvbXBvbmVudFR5cGU8QyBleHRlbmRzIE1hcHBlZENvbXBvbmVudDxhbnksIGFueT4+ID0gUmV0dXJuVHlwZTxDWydnZXQnXT5cblxuZXhwb3J0IGNvbnN0IGdldENvbXBvbmVudCA9IDxULCBTIGV4dGVuZHMgYml0RUNTLklTY2hlbWE+KFxuICBlbnRpdHk6IEVudGl0eSxcbiAgY29tcG9uZW50OiBNYXBwZWRDb21wb25lbnQ8VCwgUz5cbiAgLy8gZ2V0UmVtb3ZlZCA9IGZhbHNlLFxuICAvLyB3b3JsZCA9IHVzZVdvcmxkKClcbik6IFQgJiBTb0FQcm94eTxTPiA9PiB7XG4gIGlmICh0eXBlb2YgZW50aXR5ID09PSAndW5kZWZpbmVkJykge1xuICAgIHRocm93IG5ldyBFcnJvcignW2dldENvbXBvbmVudF06IGVudGl0eSBpcyB1bmRlZmluZWQnKVxuICB9XG4gIHJldHVybiBjb21wb25lbnQuZ2V0KGVudGl0eSlcbiAgLy8gaWYgKGdldFJlbW92ZWQgfHwgaGFzQ29tcG9uZW50KGVudGl0eSwgY29tcG9uZW50LCB3b3JsZCkpIHJldHVybiBjb21wb25lbnQuZ2V0KGVudGl0eSlcbn1cblxuZXhwb3J0IGNvbnN0IGFkZENvbXBvbmVudCA9IDxULCBTIGV4dGVuZHMgYml0RUNTLklTY2hlbWE+KFxuICBlbnRpdHk6IEVudGl0eSxcbiAgY29tcG9uZW50OiBNYXBwZWRDb21wb25lbnQ8VCwgUz4sXG4gIGFyZ3M6IFQgJiBQYXJ0aWFsPFNvQVByb3h5PFM+PixcbiAgd29ybGQgPSB1c2VXb3JsZCgpXG4pID0+IHtcbiAgaWYgKHR5cGVvZiBlbnRpdHkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdbYWRkQ29tcG9uZW50XTogZW50aXR5IGlzIHVuZGVmaW5lZCcpXG4gIH1cbiAgYml0RUNTLmFkZENvbXBvbmVudCh3b3JsZCwgY29tcG9uZW50LCBlbnRpdHkpXG4gIGlmICgoY29tcG9uZW50IGFzIGFueSkuX3NjaGVtYSkge1xuICAgIGZvciAoY29uc3QgW2tleV0gb2YgT2JqZWN0LmVudHJpZXMoKGNvbXBvbmVudCBhcyBhbnkpLl9zY2hlbWEgYXMgYW55KSkge1xuICAgICAgY29tcG9uZW50W2tleV1bZW50aXR5XSA9IGFyZ3Nba2V5XVxuICAgIH1cbiAgfVxuICB3b3JsZC5fcmVtb3ZlZENvbXBvbmVudHMuZ2V0KGVudGl0eSk/LmRlbGV0ZShjb21wb25lbnQpXG4gIGNvbXBvbmVudC5zZXQoZW50aXR5LCBhcmdzIGFzIFQgJiBTb0FQcm94eTxTPilcbiAgcmV0dXJuIGNvbXBvbmVudC5nZXQoZW50aXR5KVxufVxuXG5leHBvcnQgY29uc3QgaGFzQ29tcG9uZW50ID0gPFQsIFMgZXh0ZW5kcyBiaXRFQ1MuSVNjaGVtYT4oXG4gIGVudGl0eTogRW50aXR5LFxuICBjb21wb25lbnQ6IE1hcHBlZENvbXBvbmVudDxULCBTPixcbiAgd29ybGQgPSB1c2VXb3JsZCgpXG4pID0+IHtcbiAgaWYgKHR5cGVvZiBlbnRpdHkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdbaGFzQ29tcG9uZW50XTogZW50aXR5IGlzIHVuZGVmaW5lZCcpXG4gIH1cbiAgLy8gcmV0dXJuIHR5cGVvZiBjb21wb25lbnQuZ2V0KGVudGl0eSkgIT09ICd1bmRlZmluZWQnXG4gIHJldHVybiBiaXRFQ1MuaGFzQ29tcG9uZW50KHdvcmxkLCBjb21wb25lbnQsIGVudGl0eSlcbn1cblxuZXhwb3J0IGNvbnN0IHJlbW92ZUNvbXBvbmVudCA9IDxULCBTIGV4dGVuZHMgYml0RUNTLklTY2hlbWE+KFxuICBlbnRpdHk6IEVudGl0eSxcbiAgY29tcG9uZW50OiBNYXBwZWRDb21wb25lbnQ8VCwgUz4sXG4gIHdvcmxkID0gdXNlV29ybGQoKVxuKSA9PiB7XG4gIGlmICh0eXBlb2YgZW50aXR5ID09PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnNvbGUud2FybignW3JlbW92ZUNvbXBvbmVudF06IGVudGl0eSBpcyB1bmRlZmluZWQnKVxuICAgIHJldHVyblxuICB9XG4gIGNvbnN0IGNvbXBvbmVudFJlZiA9IGNvbXBvbmVudC5nZXQoZW50aXR5KVxuICBjb25zdCByZW1vdmVkID0gd29ybGQuX3JlbW92ZWRDb21wb25lbnRzLmdldChlbnRpdHkpID8/IG5ldyBTZXQoKVxuICB3b3JsZC5fcmVtb3ZlZENvbXBvbmVudHMuc2V0KGVudGl0eSwgcmVtb3ZlZC5hZGQoY29tcG9uZW50KSlcbiAgYml0RUNTLnJlbW92ZUNvbXBvbmVudCh3b3JsZCwgY29tcG9uZW50LCBlbnRpdHkpXG4gIHJldHVybiBjb21wb25lbnRSZWZcbn1cblxuZXhwb3J0IGNvbnN0IGdldEFsbENvbXBvbmVudHNPZlR5cGUgPSA8VCwgUyBleHRlbmRzIGJpdEVDUy5JU2NoZW1hPihcbiAgY29tcG9uZW50OiBNYXBwZWRDb21wb25lbnQ8VCwgUz4sXG4gIHdvcmxkID0gdXNlV29ybGQoKVxuKTogVFtdID0+IHtcbiAgY29uc3QgcXVlcnkgPSBkZWZpbmVRdWVyeShbY29tcG9uZW50XSlcbiAgY29uc3QgZW50aXRpZXMgPSBxdWVyeSh3b3JsZClcbiAgcmV0dXJuIGVudGl0aWVzLm1hcCgoZSkgPT4ge1xuICAgIHJldHVybiBnZXRDb21wb25lbnQoZSwgY29tcG9uZW50KSFcbiAgfSlcbn1cblxuZXhwb3J0IGNvbnN0IGdldEFsbEVudGl0aWVzV2l0aENvbXBvbmVudCA9IDxULCBTIGV4dGVuZHMgYml0RUNTLklTY2hlbWE+KFxuICBjb21wb25lbnQ6IE1hcHBlZENvbXBvbmVudDxULCBTPixcbiAgd29ybGQgPSB1c2VXb3JsZCgpXG4pOiBFbnRpdHlbXSA9PiB7XG4gIGNvbnN0IHF1ZXJ5ID0gZGVmaW5lUXVlcnkoW2NvbXBvbmVudF0pXG4gIHJldHVybiBxdWVyeSh3b3JsZClcbn1cblxuZXhwb3J0IGNvbnN0IHJlbW92ZUFsbENvbXBvbmVudHMgPSAoZW50aXR5OiBFbnRpdHksIHdvcmxkID0gdXNlV29ybGQoKSkgPT4ge1xuICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBiaXRFQ1MuZ2V0RW50aXR5Q29tcG9uZW50cyh3b3JsZCwgZW50aXR5KSkge1xuICAgIHJlbW92ZUNvbXBvbmVudChlbnRpdHksIGNvbXBvbmVudCBhcyBNYXBwZWRDb21wb25lbnQ8YW55LCBhbnk+LCB3b3JsZClcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lUXVlcnkoY29tcG9uZW50czogKGJpdEVDUy5Db21wb25lbnQgfCBiaXRFQ1MuUXVlcnlNb2RpZmllcilbXSkge1xuICBjb25zdCBxdWVyeSA9IGJpdEVDUy5kZWZpbmVRdWVyeShjb21wb25lbnRzKSBhcyBiaXRFQ1MuUXVlcnlcbiAgY29uc3QgZW50ZXJRdWVyeSA9IGJpdEVDUy5lbnRlclF1ZXJ5KHF1ZXJ5KVxuICBjb25zdCBleGl0UXVlcnkgPSBiaXRFQ1MuZXhpdFF1ZXJ5KHF1ZXJ5KVxuICBjb25zdCB3cmFwcGVkUXVlcnkgPSAod29ybGQgPSB1c2VXb3JsZCgpKSA9PiBxdWVyeSh3b3JsZCkgYXMgRW50aXR5W11cbiAgd3JhcHBlZFF1ZXJ5LmVudGVyID0gKHdvcmxkID0gdXNlV29ybGQoKSkgPT4gZW50ZXJRdWVyeSh3b3JsZCkgYXMgRW50aXR5W11cbiAgd3JhcHBlZFF1ZXJ5LmV4aXQgPSAod29ybGQgPSB1c2VXb3JsZCgpKSA9PiBleGl0UXVlcnkod29ybGQpIGFzIEVudGl0eVtdXG4gIHJldHVybiB3cmFwcGVkUXVlcnlcbn1cblxuZXhwb3J0IHR5cGUgUXVlcnkgPSBSZXR1cm5UeXBlPHR5cGVvZiBkZWZpbmVRdWVyeT5cbiIsImltcG9ydCB7IEFuaW1hdGlvbkNsaXAsIEdyb3VwLCBNYXRlcmlhbCwgTWVzaCwgU2tlbGV0b24sIEJvbmUsIFNraW5uZWRNZXNoLCBWZWN0b3IzIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBnZXRMb2FkZXIgfSBmcm9tICcuLi9hc3NldHMvZnVuY3Rpb25zL0xvYWRHTFRGJ1xuaW1wb3J0IHsgaXNDbGllbnQgfSBmcm9tICcuLi9jb21tb24vZnVuY3Rpb25zL2lzQ2xpZW50J1xuaW1wb3J0IHsgRW5naW5lIH0gZnJvbSAnLi4vZWNzL2NsYXNzZXMvRW5naW5lJ1xuaW1wb3J0IHsgZ2V0RGVmYXVsdFNrZWxldG9uIH0gZnJvbSAnLi9mdW5jdGlvbnMvYXZhdGFyRnVuY3Rpb25zJ1xuXG5leHBvcnQgY2xhc3MgQW5pbWF0aW9uTWFuYWdlciB7XG4gIHN0YXRpYyBpbnN0YW5jZTogQW5pbWF0aW9uTWFuYWdlciA9IG5ldyBBbmltYXRpb25NYW5hZ2VyKClcblxuICBfYW5pbWF0aW9uczogQW5pbWF0aW9uQ2xpcFtdXG4gIF9kZWZhdWx0TW9kZWw6IEdyb3VwXG4gIF9kZWZhdWx0U2tlbGV0b246IFNraW5uZWRNZXNoXG5cbiAgZ2V0QW5pbWF0aW9uRHVyYXRpb24obmFtZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCBhbmltYXRpb24gPSB0aGlzLl9hbmltYXRpb25zLmZpbmQoKGEpID0+IGEubmFtZSA9PT0gbmFtZSlcbiAgICByZXR1cm4gYW5pbWF0aW9uID8gYW5pbWF0aW9uLmR1cmF0aW9uIDogMFxuICB9XG5cbiAgZ2V0QW5pbWF0aW9ucygpOiBQcm9taXNlPEFuaW1hdGlvbkNsaXBbXT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgaWYgKHRoaXMuX2FuaW1hdGlvbnMpIHtcbiAgICAgICAgcmVzb2x2ZSh0aGlzLl9hbmltYXRpb25zKVxuICAgICAgfVxuICAgICAgaWYgKCFpc0NsaWVudCkge1xuICAgICAgICByZXNvbHZlKFtdKVxuICAgICAgfVxuICAgICAgZ2V0TG9hZGVyKCkubG9hZChcbiAgICAgICAgRW5naW5lLnB1YmxpY1BhdGggKyAnL21vZGVscy9hdmF0YXJzL0FuaW1hdGlvbnMuZ2xiJyxcbiAgICAgICAgKGdsdGYpID0+IHtcbiAgICAgICAgICBnbHRmLnNjZW5lLnRyYXZlcnNlKChjaGlsZCkgPT4ge1xuICAgICAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09ICdTa2lubmVkTWVzaCcgJiYgIXRoaXMuX2RlZmF1bHRTa2VsZXRvbikge1xuICAgICAgICAgICAgICB0aGlzLl9kZWZhdWx0U2tlbGV0b24gPSBjaGlsZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICBpZiAoIXRoaXMuX2RlZmF1bHRTa2VsZXRvbikge1xuICAgICAgICAgICAgLy8gcmVjb25zdHJ1Y3Qgc2tlbGV0b24gZnJvbSBzdG9yZWQgZGF0YVxuICAgICAgICAgICAgdGhpcy5fZGVmYXVsdFNrZWxldG9uID0gZ2V0RGVmYXVsdFNrZWxldG9uKClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLl9hbmltYXRpb25zID0gZ2x0Zi5hbmltYXRpb25zXG4gICAgICAgICAgdGhpcy5fYW5pbWF0aW9ucz8uZm9yRWFjaCgoY2xpcCkgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETzogbWFrZSBsaXN0IG9mIG1vcnBoIHRhcmdldHMgbmFtZXNcbiAgICAgICAgICAgIGNsaXAudHJhY2tzID0gY2xpcC50cmFja3MuZmlsdGVyKCh0cmFjaykgPT4gIXRyYWNrLm5hbWUubWF0Y2goL15DQ19CYXNlXy8pKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgcmVzb2x2ZSh0aGlzLl9hbmltYXRpb25zKVxuICAgICAgICB9LFxuICAgICAgICBjb25zb2xlLmxvZyxcbiAgICAgICAgY29uc29sZS5lcnJvclxuICAgICAgKVxuICAgIH0pXG4gIH1cbiAgZ2V0RGVmYXVsdE1vZGVsKCk6IFByb21pc2U8R3JvdXA+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIGlmICh0aGlzLl9kZWZhdWx0TW9kZWwpIHtcbiAgICAgICAgcmVzb2x2ZSh0aGlzLl9kZWZhdWx0TW9kZWwpXG4gICAgICB9XG4gICAgICBpZiAoIWlzQ2xpZW50KSB7XG4gICAgICAgIHJlc29sdmUobmV3IEdyb3VwKCkpXG4gICAgICB9XG4gICAgICBnZXRMb2FkZXIoKS5sb2FkKFxuICAgICAgICBFbmdpbmUucHVibGljUGF0aCArICcvbW9kZWxzL2F2YXRhcnMvUmF6ZXIxLmdsYicsXG4gICAgICAgIChnbHRmKSA9PiB7XG4gICAgICAgICAgdGhpcy5fZGVmYXVsdE1vZGVsID0gZ2x0Zi5zY2VuZVxuICAgICAgICAgIHRoaXMuX2RlZmF1bHRNb2RlbC50cmF2ZXJzZSgob2JqOiBNZXNoKSA9PiB7XG4gICAgICAgICAgICBpZiAob2JqLm1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgIDsob2JqLm1hdGVyaWFsIGFzIE1hdGVyaWFsKS50cmFuc3BhcmVudCA9IHRydWVcbiAgICAgICAgICAgICAgOyhvYmoubWF0ZXJpYWwgYXMgTWF0ZXJpYWwpLm9wYWNpdHkgPSAwLjVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIHJlc29sdmUodGhpcy5fZGVmYXVsdE1vZGVsKVxuICAgICAgICB9LFxuICAgICAgICBjb25zb2xlLmxvZyxcbiAgICAgICAgY29uc29sZS5lcnJvclxuICAgICAgKVxuICAgIH0pXG4gIH1cbn1cbiIsImltcG9ydCB7IEFuaW1hdGlvbkNsaXAsIEFuaW1hdGlvbk1peGVyIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBjcmVhdGVNYXBwZWRDb21wb25lbnQgfSBmcm9tICcuLi8uLi9lY3MvZnVuY3Rpb25zL0NvbXBvbmVudEZ1bmN0aW9ucydcblxudHlwZSBBbmltYXRpb25Db21wb25lbnRUeXBlID0ge1xuICBtaXhlcjogQW5pbWF0aW9uTWl4ZXJcbiAgYW5pbWF0aW9uczogQW5pbWF0aW9uQ2xpcFtdXG4gIGFuaW1hdGlvblNwZWVkOiBudW1iZXJcbn1cblxuZXhwb3J0IGNvbnN0IEFuaW1hdGlvbkNvbXBvbmVudCA9IGNyZWF0ZU1hcHBlZENvbXBvbmVudDxBbmltYXRpb25Db21wb25lbnRUeXBlPignQW5pbWF0aW9uQ29tcG9uZW50JylcbiIsImltcG9ydCB7IEdyb3VwIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBjcmVhdGVNYXBwZWRDb21wb25lbnQgfSBmcm9tICcuLi8uLi9lY3MvZnVuY3Rpb25zL0NvbXBvbmVudEZ1bmN0aW9ucydcblxuZXhwb3J0IHR5cGUgQXZhdGFyQ29tcG9uZW50VHlwZSA9IHtcbiAgLyoqXG4gICAqIEBwcm9wZXJ0eSB7R3JvdXB9IG1vZGVsQ29udGFpbmVyIGlzIGEgZ3JvdXAgdGhhdCBob2xkcyB0aGUgbW9kZWwgc3VjaCB0aGF0IHRoZSBhbmltYXRpb25zICYgSUsgY2FuIG1vdmUgc2VwZXJhdGUgZnJvbSB0aGUgdHJhbnNmb3JtICYgY29sbGlkZXJcbiAgICogSXQncyBjZW50ZXIgaXMgYXQgdGhlIGNlbnRlciBvZiB0aGUgY29sbGlkZXIsIGV4Y2VwdCB3aXRoIHkgc2l0dGluZyBhdCB0aGUgYm90dG9tIG9mIHRoZSBjb2xsaWRlciwgZmx1c2ggd2l0aCB0aGUgZ3JvdW5kXG4gICAqL1xuICBtb2RlbENvbnRhaW5lcjogR3JvdXBcbiAgaXNHcm91bmRlZDogYm9vbGVhblxuICBhdmF0YXJJZDogc3RyaW5nXG4gIHRodW1ibmFpbFVSTD86IHN0cmluZ1xuICBhdmF0YXJVUkw/OiBzdHJpbmdcbiAgYXZhdGFySGVpZ2h0OiBudW1iZXJcbiAgYXZhdGFySGFsZkhlaWdodDogbnVtYmVyXG59XG5cbmV4cG9ydCBjb25zdCBBdmF0YXJDb21wb25lbnQgPSBjcmVhdGVNYXBwZWRDb21wb25lbnQ8QXZhdGFyQ29tcG9uZW50VHlwZT4oJ0F2YXRhckNvbXBvbmVudCcpXG4iLCJpbXBvcnQge1xuICBBbmltYXRpb25DbGlwLFxuICBBbmltYXRpb25NaXhlcixcbiAgRXVsZXIsXG4gIE1hdHJpeDQsXG4gIFF1YXRlcm5pb24sXG4gIFF1YXRlcm5pb25LZXlmcmFtZVRyYWNrLFxuICBTa2VsZXRvbkhlbHBlcixcbiAgVmVjdG9yMixcbiAgVmVjdG9yMyxcbiAgVmVjdG9yS2V5ZnJhbWVUcmFja1xufSBmcm9tICd0aHJlZSdcblxuaW50ZXJmYWNlIFNob3J0T3B0aW9ucyB7XG4gIG5hbWVzPzogYW55XG4gIGhpcD86IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgUmV0YXJnZXRPcHRpb25zIHtcbiAgdXNlRmlyc3RGcmFtZVBvc2l0aW9uPzogYm9vbGVhblxuICBmcHM/OiBudW1iZXJcbiAgbmFtZXM/OiBhbnlcbiAgaGlwPzogc3RyaW5nXG59XG5cbmludGVyZmFjZSBPcHRpb25zIHtcbiAgcHJlc2VydmVNYXRyaXg/OiBib29sZWFuXG4gIHByZXNlcnZlUG9zaXRpb24/OiBib29sZWFuXG4gIHByZXNlcnZlSGlwUG9zaXRpb24/OiBib29sZWFuXG4gIHVzZVRhcmdldE1hdHJpeD86IGJvb2xlYW5cbiAgaGlwPzogc3RyaW5nXG4gIG5hbWVzPzogYW55XG4gIG9mZnNldHM/OiBhbnlcbn1cblxuY2xhc3MgU2tlbGV0b25VdGlscyB7XG4gIHN0YXRpYyByZXRhcmdldCh0YXJnZXQsIHNvdXJjZSwgb3B0aW9uczogT3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucylcbiAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgIHByZXNlcnZlTWF0cml4OiB0cnVlLFxuICAgICAgICBwcmVzZXJ2ZVBvc2l0aW9uOiB0cnVlLFxuICAgICAgICBwcmVzZXJ2ZUhpcFBvc2l0aW9uOiBmYWxzZSxcbiAgICAgICAgdXNlVGFyZ2V0TWF0cml4OiBmYWxzZSxcbiAgICAgICAgaGlwOiAnaGlwJyxcbiAgICAgICAgbmFtZXM6IHt9XG4gICAgICB9XG4gICAgY29uc3QgcG9zID0gbmV3IFZlY3RvcjMoKSxcbiAgICAgIHF1YXQgPSBuZXcgUXVhdGVybmlvbigpLFxuICAgICAgc2NhbGUgPSBuZXcgVmVjdG9yMygpLFxuICAgICAgYmluZEJvbmVNYXRyaXggPSBuZXcgTWF0cml4NCgpLFxuICAgICAgcmVsYXRpdmVNYXRyaXggPSBuZXcgTWF0cml4NCgpLFxuICAgICAgZ2xvYmFsTWF0cml4ID0gbmV3IE1hdHJpeDQoKVxuXG4gICAgb3B0aW9ucy5wcmVzZXJ2ZU1hdHJpeCA9IG9wdGlvbnMucHJlc2VydmVNYXRyaXggIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucHJlc2VydmVNYXRyaXggOiB0cnVlXG4gICAgb3B0aW9ucy5wcmVzZXJ2ZVBvc2l0aW9uID0gb3B0aW9ucy5wcmVzZXJ2ZVBvc2l0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnByZXNlcnZlUG9zaXRpb24gOiB0cnVlXG4gICAgb3B0aW9ucy5wcmVzZXJ2ZUhpcFBvc2l0aW9uID0gb3B0aW9ucy5wcmVzZXJ2ZUhpcFBvc2l0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnByZXNlcnZlSGlwUG9zaXRpb24gOiBmYWxzZVxuICAgIG9wdGlvbnMudXNlVGFyZ2V0TWF0cml4ID0gb3B0aW9ucy51c2VUYXJnZXRNYXRyaXggIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudXNlVGFyZ2V0TWF0cml4IDogZmFsc2VcbiAgICBvcHRpb25zLmhpcCA9IG9wdGlvbnMuaGlwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmhpcCA6ICdoaXAnXG4gICAgb3B0aW9ucy5uYW1lcyA9IG9wdGlvbnMubmFtZXMgfHwge31cblxuICAgIGNvbnN0IHNvdXJjZUJvbmVzID0gc291cmNlLmlzT2JqZWN0M0QgPyBzb3VyY2Uuc2tlbGV0b24uYm9uZXMgOiB0aGlzLmdldEJvbmVzKHNvdXJjZSksXG4gICAgICBib25lcyA9IHRhcmdldC5pc09iamVjdDNEID8gdGFyZ2V0LnNrZWxldG9uLmJvbmVzIDogdGhpcy5nZXRCb25lcyh0YXJnZXQpXG5cbiAgICBsZXQgYmluZEJvbmVzLCBib25lLCBuYW1lLCBib25lVG8sIGJvbmVzUG9zaXRpb25cblxuICAgIC8vIHJlc2V0IGJvbmVzXG5cbiAgICBpZiAodGFyZ2V0LmlzT2JqZWN0M0QpIHtcbiAgICAgIHRhcmdldC5za2VsZXRvbi5wb3NlKClcbiAgICB9IGVsc2Uge1xuICAgICAgb3B0aW9ucy51c2VUYXJnZXRNYXRyaXggPSB0cnVlXG4gICAgICBvcHRpb25zLnByZXNlcnZlTWF0cml4ID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5wcmVzZXJ2ZVBvc2l0aW9uKSB7XG4gICAgICBib25lc1Bvc2l0aW9uID0gW11cblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib25lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBib25lc1Bvc2l0aW9uLnB1c2goYm9uZXNbaV0ucG9zaXRpb24uY2xvbmUoKSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5wcmVzZXJ2ZU1hdHJpeCkge1xuICAgICAgLy8gcmVzZXQgbWF0cml4XG5cbiAgICAgIHRhcmdldC51cGRhdGVNYXRyaXhXb3JsZCgpXG5cbiAgICAgIHRhcmdldC5tYXRyaXhXb3JsZC5pZGVudGl0eSgpXG5cbiAgICAgIC8vIHJlc2V0IGNoaWxkcmVuIG1hdHJpeFxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhcmdldC5jaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICB0YXJnZXQuY2hpbGRyZW5baV0udXBkYXRlTWF0cml4V29ybGQodHJ1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5vZmZzZXRzKSB7XG4gICAgICBiaW5kQm9uZXMgPSBbXVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGJvbmUgPSBib25lc1tpXVxuICAgICAgICBuYW1lID0gb3B0aW9ucy5uYW1lc1tib25lLm5hbWVdIHx8IGJvbmUubmFtZVxuXG4gICAgICAgIGlmIChvcHRpb25zLm9mZnNldHMgJiYgb3B0aW9ucy5vZmZzZXRzW25hbWVdKSB7XG4gICAgICAgICAgYm9uZS5tYXRyaXgubXVsdGlwbHkob3B0aW9ucy5vZmZzZXRzW25hbWVdKVxuXG4gICAgICAgICAgYm9uZS5tYXRyaXguZGVjb21wb3NlKGJvbmUucG9zaXRpb24sIGJvbmUucXVhdGVybmlvbiwgYm9uZS5zY2FsZSlcblxuICAgICAgICAgIGJvbmUudXBkYXRlTWF0cml4V29ybGQoKVxuICAgICAgICB9XG5cbiAgICAgICAgYmluZEJvbmVzLnB1c2goYm9uZS5tYXRyaXhXb3JsZC5jbG9uZSgpKVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9uZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGJvbmUgPSBib25lc1tpXVxuICAgICAgbmFtZSA9IG9wdGlvbnMubmFtZXNbYm9uZS5uYW1lXSB8fCBib25lLm5hbWVcblxuICAgICAgYm9uZVRvID0gdGhpcy5nZXRCb25lQnlOYW1lKG5hbWUsIHNvdXJjZUJvbmVzKVxuXG4gICAgICBnbG9iYWxNYXRyaXguY29weShib25lLm1hdHJpeFdvcmxkKVxuXG4gICAgICBpZiAoYm9uZVRvKSB7XG4gICAgICAgIGJvbmVUby51cGRhdGVNYXRyaXhXb3JsZCgpXG5cbiAgICAgICAgaWYgKG9wdGlvbnMudXNlVGFyZ2V0TWF0cml4KSB7XG4gICAgICAgICAgcmVsYXRpdmVNYXRyaXguY29weShib25lVG8ubWF0cml4V29ybGQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVsYXRpdmVNYXRyaXguY29weSh0YXJnZXQubWF0cml4V29ybGQpLmludmVydCgpXG4gICAgICAgICAgcmVsYXRpdmVNYXRyaXgubXVsdGlwbHkoYm9uZVRvLm1hdHJpeFdvcmxkKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWdub3JlIHNjYWxlIHRvIGV4dHJhY3Qgcm90YXRpb25cblxuICAgICAgICBzY2FsZS5zZXRGcm9tTWF0cml4U2NhbGUocmVsYXRpdmVNYXRyaXgpXG4gICAgICAgIHJlbGF0aXZlTWF0cml4LnNjYWxlKHNjYWxlLnNldCgxIC8gc2NhbGUueCwgMSAvIHNjYWxlLnksIDEgLyBzY2FsZS56KSlcblxuICAgICAgICAvLyBhcHBseSB0byBnbG9iYWwgbWF0cml4XG5cbiAgICAgICAgZ2xvYmFsTWF0cml4Lm1ha2VSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHF1YXQuc2V0RnJvbVJvdGF0aW9uTWF0cml4KHJlbGF0aXZlTWF0cml4KSlcblxuICAgICAgICBpZiAodGFyZ2V0LmlzT2JqZWN0M0QpIHtcbiAgICAgICAgICBjb25zdCBib25lSW5kZXggPSBib25lcy5pbmRleE9mKGJvbmUpLFxuICAgICAgICAgICAgd0JpbmRNYXRyaXggPSBiaW5kQm9uZXNcbiAgICAgICAgICAgICAgPyBiaW5kQm9uZXNbYm9uZUluZGV4XVxuICAgICAgICAgICAgICA6IGJpbmRCb25lTWF0cml4LmNvcHkodGFyZ2V0LnNrZWxldG9uLmJvbmVJbnZlcnNlc1tib25lSW5kZXhdKS5pbnZlcnQoKVxuXG4gICAgICAgICAgZ2xvYmFsTWF0cml4Lm11bHRpcGx5KHdCaW5kTWF0cml4KVxuICAgICAgICB9XG5cbiAgICAgICAgZ2xvYmFsTWF0cml4LmNvcHlQb3NpdGlvbihyZWxhdGl2ZU1hdHJpeClcbiAgICAgIH1cblxuICAgICAgaWYgKGJvbmUucGFyZW50ICYmIGJvbmUucGFyZW50LmlzQm9uZSkge1xuICAgICAgICBib25lLm1hdHJpeC5jb3B5KGJvbmUucGFyZW50Lm1hdHJpeFdvcmxkKS5pbnZlcnQoKVxuICAgICAgICBib25lLm1hdHJpeC5tdWx0aXBseShnbG9iYWxNYXRyaXgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBib25lLm1hdHJpeC5jb3B5KGdsb2JhbE1hdHJpeClcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMucHJlc2VydmVIaXBQb3NpdGlvbiAmJiBuYW1lID09PSBvcHRpb25zLmhpcCkge1xuICAgICAgICBib25lLm1hdHJpeC5zZXRQb3NpdGlvbihwb3Muc2V0KDAsIGJvbmUucG9zaXRpb24ueSwgMCkpXG4gICAgICB9XG5cbiAgICAgIGJvbmUubWF0cml4LmRlY29tcG9zZShib25lLnBvc2l0aW9uLCBib25lLnF1YXRlcm5pb24sIGJvbmUuc2NhbGUpXG5cbiAgICAgIGJvbmUudXBkYXRlTWF0cml4V29ybGQoKVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnByZXNlcnZlUG9zaXRpb24pIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9uZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgYm9uZSA9IGJvbmVzW2ldXG4gICAgICAgIG5hbWUgPSBvcHRpb25zLm5hbWVzW2JvbmUubmFtZV0gfHwgYm9uZS5uYW1lXG5cbiAgICAgICAgaWYgKG5hbWUgIT09IG9wdGlvbnMuaGlwKSB7XG4gICAgICAgICAgYm9uZS5wb3NpdGlvbi5jb3B5KGJvbmVzUG9zaXRpb25baV0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5wcmVzZXJ2ZU1hdHJpeCkge1xuICAgICAgLy8gcmVzdG9yZSBtYXRyaXhcblxuICAgICAgdGFyZ2V0LnVwZGF0ZU1hdHJpeFdvcmxkKHRydWUpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHJldGFyZ2V0Q2xpcCh0YXJnZXQsIHNvdXJjZSwgY2xpcCwgb3B0aW9uczogUmV0YXJnZXRPcHRpb25zID0ge30pIHtcbiAgICBvcHRpb25zLnVzZUZpcnN0RnJhbWVQb3NpdGlvbiA9IG9wdGlvbnMudXNlRmlyc3RGcmFtZVBvc2l0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnVzZUZpcnN0RnJhbWVQb3NpdGlvbiA6IGZhbHNlXG4gICAgb3B0aW9ucy5mcHMgPSBvcHRpb25zLmZwcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5mcHMgOiAzMFxuICAgIG9wdGlvbnMubmFtZXMgPSBvcHRpb25zLm5hbWVzIHx8IFtdXG5cbiAgICBpZiAoIXNvdXJjZS5pc09iamVjdDNEKSB7XG4gICAgICBzb3VyY2UgPSB0aGlzLmdldEhlbHBlckZyb21Ta2VsZXRvbihzb3VyY2UpXG4gICAgfVxuXG4gICAgY29uc3QgbnVtRnJhbWVzID0gTWF0aC5yb3VuZChjbGlwLmR1cmF0aW9uICogKG9wdGlvbnMuZnBzIC8gMTAwMCkgKiAxMDAwKSxcbiAgICAgIGRlbHRhID0gMSAvIG9wdGlvbnMuZnBzLFxuICAgICAgY29udmVydGVkVHJhY2tzOiAoVmVjdG9yS2V5ZnJhbWVUcmFjayB8IFF1YXRlcm5pb25LZXlmcmFtZVRyYWNrKVtdID0gW10sXG4gICAgICBtaXhlciA9IG5ldyBBbmltYXRpb25NaXhlcihzb3VyY2UpLFxuICAgICAgYm9uZXMgPSB0aGlzLmdldEJvbmVzKHRhcmdldC5za2VsZXRvbiksXG4gICAgICBib25lRGF0YXMgPSBbXVxuICAgIGxldCBwb3NpdGlvbk9mZnNldCwgYm9uZSwgYm9uZVRvLCBib25lRGF0YSwgbmFtZVxuXG4gICAgbWl4ZXIuY2xpcEFjdGlvbihjbGlwKS5wbGF5KClcbiAgICBtaXhlci51cGRhdGUoMClcblxuICAgIHNvdXJjZS51cGRhdGVNYXRyaXhXb3JsZCgpXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZyYW1lczsgKytpKSB7XG4gICAgICBjb25zdCB0aW1lID0gaSAqIGRlbHRhXG5cbiAgICAgIHRoaXMucmV0YXJnZXQodGFyZ2V0LCBzb3VyY2UsIG9wdGlvbnMpXG5cbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYm9uZXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgbmFtZSA9IG9wdGlvbnMubmFtZXNbYm9uZXNbal0ubmFtZV0gfHwgYm9uZXNbal0ubmFtZVxuXG4gICAgICAgIGJvbmVUbyA9IHRoaXMuZ2V0Qm9uZUJ5TmFtZShuYW1lLCBzb3VyY2Uuc2tlbGV0b24pXG5cbiAgICAgICAgaWYgKGJvbmVUbykge1xuICAgICAgICAgIGJvbmUgPSBib25lc1tqXVxuICAgICAgICAgIGJvbmVEYXRhID0gYm9uZURhdGFzW2pdID0gYm9uZURhdGFzW2pdIHx8IHsgYm9uZTogYm9uZSB9XG5cbiAgICAgICAgICBpZiAob3B0aW9ucy5oaXAgPT09IG5hbWUpIHtcbiAgICAgICAgICAgIGlmICghYm9uZURhdGEucG9zKSB7XG4gICAgICAgICAgICAgIGJvbmVEYXRhLnBvcyA9IHtcbiAgICAgICAgICAgICAgICB0aW1lczogbmV3IEZsb2F0MzJBcnJheShudW1GcmFtZXMpLFxuICAgICAgICAgICAgICAgIHZhbHVlczogbmV3IEZsb2F0MzJBcnJheShudW1GcmFtZXMgKiAzKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZUZpcnN0RnJhbWVQb3NpdGlvbikge1xuICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uT2Zmc2V0ID0gYm9uZS5wb3NpdGlvbi5jbG9uZSgpXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBib25lLnBvc2l0aW9uLnN1Yihwb3NpdGlvbk9mZnNldClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYm9uZURhdGEucG9zLnRpbWVzW2ldID0gdGltZVxuXG4gICAgICAgICAgICBib25lLnBvc2l0aW9uLnRvQXJyYXkoYm9uZURhdGEucG9zLnZhbHVlcywgaSAqIDMpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFib25lRGF0YS5xdWF0KSB7XG4gICAgICAgICAgICBib25lRGF0YS5xdWF0ID0ge1xuICAgICAgICAgICAgICB0aW1lczogbmV3IEZsb2F0MzJBcnJheShudW1GcmFtZXMpLFxuICAgICAgICAgICAgICB2YWx1ZXM6IG5ldyBGbG9hdDMyQXJyYXkobnVtRnJhbWVzICogNClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBib25lRGF0YS5xdWF0LnRpbWVzW2ldID0gdGltZVxuXG4gICAgICAgICAgYm9uZS5xdWF0ZXJuaW9uLnRvQXJyYXkoYm9uZURhdGEucXVhdC52YWx1ZXMsIGkgKiA0KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1peGVyLnVwZGF0ZShkZWx0YSlcblxuICAgICAgc291cmNlLnVwZGF0ZU1hdHJpeFdvcmxkKClcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvbmVEYXRhcy5sZW5ndGg7ICsraSkge1xuICAgICAgYm9uZURhdGEgPSBib25lRGF0YXNbaV1cblxuICAgICAgaWYgKGJvbmVEYXRhKSB7XG4gICAgICAgIGlmIChib25lRGF0YS5wb3MpIHtcbiAgICAgICAgICBjb252ZXJ0ZWRUcmFja3MucHVzaChcbiAgICAgICAgICAgIG5ldyBWZWN0b3JLZXlmcmFtZVRyYWNrKFxuICAgICAgICAgICAgICAnLmJvbmVzWycgKyBib25lRGF0YS5ib25lLm5hbWUgKyAnXS5wb3NpdGlvbicsXG4gICAgICAgICAgICAgIGJvbmVEYXRhLnBvcy50aW1lcyxcbiAgICAgICAgICAgICAgYm9uZURhdGEucG9zLnZhbHVlc1xuICAgICAgICAgICAgKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnZlcnRlZFRyYWNrcy5wdXNoKFxuICAgICAgICAgIG5ldyBRdWF0ZXJuaW9uS2V5ZnJhbWVUcmFjayhcbiAgICAgICAgICAgICcuYm9uZXNbJyArIGJvbmVEYXRhLmJvbmUubmFtZSArICddLnF1YXRlcm5pb24nLFxuICAgICAgICAgICAgYm9uZURhdGEucXVhdC50aW1lcyxcbiAgICAgICAgICAgIGJvbmVEYXRhLnF1YXQudmFsdWVzXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgbWl4ZXIudW5jYWNoZUFjdGlvbihjbGlwKVxuXG4gICAgcmV0dXJuIG5ldyBBbmltYXRpb25DbGlwKGNsaXAubmFtZSwgLTEsIGNvbnZlcnRlZFRyYWNrcylcbiAgfVxuXG4gIHN0YXRpYyBnZXRIZWxwZXJGcm9tU2tlbGV0b24oc2tlbGV0b24pIHtcbiAgICBjb25zdCBzb3VyY2UgPSBuZXcgU2tlbGV0b25IZWxwZXIoc2tlbGV0b24uYm9uZXNbMF0pXG4gICAgOyhzb3VyY2UgYXMgYW55KS5za2VsZXRvbiA9IHNrZWxldG9uXG5cbiAgICByZXR1cm4gc291cmNlXG4gIH1cblxuICBzdGF0aWMgZ2V0U2tlbGV0b25PZmZzZXRzKHRhcmdldCwgc291cmNlLCBvcHRpb25zOiBTaG9ydE9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHRhcmdldFBhcmVudFBvcyA9IG5ldyBWZWN0b3IzKCksXG4gICAgICB0YXJnZXRQb3MgPSBuZXcgVmVjdG9yMygpLFxuICAgICAgc291cmNlUGFyZW50UG9zID0gbmV3IFZlY3RvcjMoKSxcbiAgICAgIHNvdXJjZVBvcyA9IG5ldyBWZWN0b3IzKCksXG4gICAgICB0YXJnZXREaXIgPSBuZXcgVmVjdG9yMigpLFxuICAgICAgc291cmNlRGlyID0gbmV3IFZlY3RvcjIoKVxuXG4gICAgb3B0aW9ucy5oaXAgPSBvcHRpb25zLmhpcCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5oaXAgOiAnaGlwJ1xuICAgIG9wdGlvbnMubmFtZXMgPSBvcHRpb25zLm5hbWVzIHx8IHt9XG5cbiAgICBpZiAoIXNvdXJjZS5pc09iamVjdDNEKSB7XG4gICAgICBzb3VyY2UgPSB0aGlzLmdldEhlbHBlckZyb21Ta2VsZXRvbihzb3VyY2UpXG4gICAgfVxuXG4gICAgY29uc3QgbmFtZUtleXMgPSBPYmplY3Qua2V5cyhvcHRpb25zLm5hbWVzKSxcbiAgICAgIG5hbWVWYWx1ZXMgPSBPYmplY3QudmFsdWVzKG9wdGlvbnMubmFtZXMpLFxuICAgICAgc291cmNlQm9uZXMgPSBzb3VyY2UuaXNPYmplY3QzRCA/IHNvdXJjZS5za2VsZXRvbi5ib25lcyA6IHRoaXMuZ2V0Qm9uZXMoc291cmNlKSxcbiAgICAgIGJvbmVzID0gdGFyZ2V0LmlzT2JqZWN0M0QgPyB0YXJnZXQuc2tlbGV0b24uYm9uZXMgOiB0aGlzLmdldEJvbmVzKHRhcmdldCksXG4gICAgICBvZmZzZXRzOiBNYXRyaXg0W10gPSBbXVxuXG4gICAgbGV0IGJvbmUsIGJvbmVUbywgbmFtZSwgaVxuXG4gICAgdGFyZ2V0LnNrZWxldG9uLnBvc2UoKVxuXG4gICAgZm9yIChpID0gMDsgaSA8IGJvbmVzLmxlbmd0aDsgKytpKSB7XG4gICAgICBib25lID0gYm9uZXNbaV1cbiAgICAgIG5hbWUgPSBvcHRpb25zLm5hbWVzW2JvbmUubmFtZV0gfHwgYm9uZS5uYW1lXG5cbiAgICAgIGJvbmVUbyA9IHRoaXMuZ2V0Qm9uZUJ5TmFtZShuYW1lLCBzb3VyY2VCb25lcylcblxuICAgICAgaWYgKGJvbmVUbyAmJiBuYW1lICE9PSBvcHRpb25zLmhpcCkge1xuICAgICAgICBjb25zdCBib25lUGFyZW50ID0gdGhpcy5nZXROZWFyZXN0Qm9uZShib25lLnBhcmVudCwgbmFtZUtleXMpLFxuICAgICAgICAgIGJvbmVUb1BhcmVudCA9IHRoaXMuZ2V0TmVhcmVzdEJvbmUoYm9uZVRvLnBhcmVudCwgbmFtZVZhbHVlcylcblxuICAgICAgICBib25lUGFyZW50LnVwZGF0ZU1hdHJpeFdvcmxkKClcbiAgICAgICAgYm9uZVRvUGFyZW50LnVwZGF0ZU1hdHJpeFdvcmxkKClcblxuICAgICAgICB0YXJnZXRQYXJlbnRQb3Muc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGJvbmVQYXJlbnQubWF0cml4V29ybGQpXG4gICAgICAgIHRhcmdldFBvcy5zZXRGcm9tTWF0cml4UG9zaXRpb24oYm9uZS5tYXRyaXhXb3JsZClcblxuICAgICAgICBzb3VyY2VQYXJlbnRQb3Muc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGJvbmVUb1BhcmVudC5tYXRyaXhXb3JsZClcbiAgICAgICAgc291cmNlUG9zLnNldEZyb21NYXRyaXhQb3NpdGlvbihib25lVG8ubWF0cml4V29ybGQpXG5cbiAgICAgICAgdGFyZ2V0RGlyXG4gICAgICAgICAgLnN1YlZlY3RvcnMobmV3IFZlY3RvcjIodGFyZ2V0UG9zLngsIHRhcmdldFBvcy55KSwgbmV3IFZlY3RvcjIodGFyZ2V0UGFyZW50UG9zLngsIHRhcmdldFBhcmVudFBvcy55KSlcbiAgICAgICAgICAubm9ybWFsaXplKClcblxuICAgICAgICBzb3VyY2VEaXJcbiAgICAgICAgICAuc3ViVmVjdG9ycyhuZXcgVmVjdG9yMihzb3VyY2VQb3MueCwgc291cmNlUG9zLnkpLCBuZXcgVmVjdG9yMihzb3VyY2VQYXJlbnRQb3MueCwgc291cmNlUGFyZW50UG9zLnkpKVxuICAgICAgICAgIC5ub3JtYWxpemUoKVxuXG4gICAgICAgIGNvbnN0IGxhdGVyaWFsQW5nbGUgPSB0YXJnZXREaXIuYW5nbGUoKSAtIHNvdXJjZURpci5hbmdsZSgpXG5cbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gbmV3IE1hdHJpeDQoKS5tYWtlUm90YXRpb25Gcm9tRXVsZXIobmV3IEV1bGVyKDAsIDAsIGxhdGVyaWFsQW5nbGUpKVxuXG4gICAgICAgIGJvbmUubWF0cml4Lm11bHRpcGx5KG9mZnNldClcblxuICAgICAgICBib25lLm1hdHJpeC5kZWNvbXBvc2UoYm9uZS5wb3NpdGlvbiwgYm9uZS5xdWF0ZXJuaW9uLCBib25lLnNjYWxlKVxuXG4gICAgICAgIGJvbmUudXBkYXRlTWF0cml4V29ybGQoKVxuXG4gICAgICAgIG9mZnNldHNbbmFtZV0gPSBvZmZzZXRcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb2Zmc2V0c1xuICB9XG5cbiAgc3RhdGljIHJlbmFtZUJvbmVzKHNrZWxldG9uLCBuYW1lcykge1xuICAgIGNvbnN0IGJvbmVzID0gdGhpcy5nZXRCb25lcyhza2VsZXRvbilcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9uZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvbnN0IGJvbmUgPSBib25lc1tpXVxuXG4gICAgICBpZiAobmFtZXNbYm9uZS5uYW1lXSkge1xuICAgICAgICBib25lLm5hbWUgPSBuYW1lc1tib25lLm5hbWVdXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHN0YXRpYyBnZXRCb25lcyhza2VsZXRvbikge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHNrZWxldG9uKSA/IHNrZWxldG9uIDogc2tlbGV0b24uYm9uZXNcbiAgfVxuXG4gIHN0YXRpYyBnZXRCb25lQnlOYW1lKG5hbWUsIHNrZWxldG9uKSB7XG4gICAgZm9yIChsZXQgaSA9IDAsIGJvbmVzID0gdGhpcy5nZXRCb25lcyhza2VsZXRvbik7IGkgPCBib25lcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKG5hbWUgPT09IGJvbmVzW2ldLm5hbWUpIHJldHVybiBib25lc1tpXVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXROZWFyZXN0Qm9uZShib25lLCBuYW1lcykge1xuICAgIHdoaWxlIChib25lLmlzQm9uZSkge1xuICAgICAgaWYgKG5hbWVzLmluZGV4T2YoYm9uZS5uYW1lKSAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGJvbmVcbiAgICAgIH1cblxuICAgICAgYm9uZSA9IGJvbmUucGFyZW50XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGZpbmRCb25lVHJhY2tEYXRhKG5hbWUsIHRyYWNrcykge1xuICAgIGNvbnN0IHJlZ2V4cCA9IC9cXFsoLiopXFxdXFwuKC4qKS8sXG4gICAgICByZXN1bHQgPSB7IG5hbWU6IG5hbWUgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmFja3MubGVuZ3RoOyArK2kpIHtcbiAgICAgIC8vIDEgaXMgdHJhY2sgbmFtZVxuICAgICAgLy8gMiBpcyB0cmFjayB0eXBlXG4gICAgICBjb25zdCB0cmFja0RhdGEgPSByZWdleHAuZXhlYyh0cmFja3NbaV0ubmFtZSlcblxuICAgICAgaWYgKHRyYWNrRGF0YSAmJiBuYW1lID09PSB0cmFja0RhdGFbMV0pIHtcbiAgICAgICAgcmVzdWx0W3RyYWNrRGF0YVsyXV0gPSBpXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgc3RhdGljIGdldEVxdWFsc0JvbmVzTmFtZXMoc2tlbGV0b24sIHRhcmdldFNrZWxldG9uKSB7XG4gICAgY29uc3Qgc291cmNlQm9uZXMgPSB0aGlzLmdldEJvbmVzKHNrZWxldG9uKSxcbiAgICAgIHRhcmdldEJvbmVzID0gdGhpcy5nZXRCb25lcyh0YXJnZXRTa2VsZXRvbiksXG4gICAgICBib25lczogYW55ID0gW11cblxuICAgIHNlYXJjaDogZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2VCb25lcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYm9uZU5hbWUgPSBzb3VyY2VCb25lc1tpXS5uYW1lXG5cbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGFyZ2V0Qm9uZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKGJvbmVOYW1lID09PSB0YXJnZXRCb25lc1tqXS5uYW1lKSB7XG4gICAgICAgICAgYm9uZXMucHVzaChib25lTmFtZSlcblxuICAgICAgICAgIGNvbnRpbnVlIHNlYXJjaFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGJvbmVzXG4gIH1cblxuICBzdGF0aWMgY2xvbmUoc291cmNlKSB7XG4gICAgY29uc3Qgc291cmNlTG9va3VwID0gbmV3IE1hcCgpXG4gICAgY29uc3QgY2xvbmVMb29rdXAgPSBuZXcgTWFwKClcblxuICAgIGNvbnN0IGNsb25lID0gc291cmNlLmNsb25lKClcblxuICAgIHBhcmFsbGVsVHJhdmVyc2Uoc291cmNlLCBjbG9uZSwgKHNvdXJjZU5vZGUsIGNsb25lZE5vZGUpID0+IHtcbiAgICAgIHNvdXJjZUxvb2t1cC5zZXQoY2xvbmVkTm9kZSwgc291cmNlTm9kZSlcbiAgICAgIGNsb25lTG9va3VwLnNldChzb3VyY2VOb2RlLCBjbG9uZWROb2RlKVxuICAgIH0pXG5cbiAgICBjbG9uZS50cmF2ZXJzZSgobm9kZSkgPT4ge1xuICAgICAgaWYgKCFub2RlLmlzU2tpbm5lZE1lc2gpIHJldHVyblxuXG4gICAgICBjb25zdCBjbG9uZWRNZXNoID0gbm9kZVxuICAgICAgY29uc3Qgc291cmNlTWVzaCA9IHNvdXJjZUxvb2t1cC5nZXQobm9kZSlcbiAgICAgIGNvbnN0IHNvdXJjZUJvbmVzID0gc291cmNlTWVzaC5za2VsZXRvbi5ib25lc1xuXG4gICAgICBjbG9uZWRNZXNoLnNrZWxldG9uID0gc291cmNlTWVzaC5za2VsZXRvbi5jbG9uZSgpXG4gICAgICBjbG9uZWRNZXNoLmJpbmRNYXRyaXguY29weShzb3VyY2VNZXNoLmJpbmRNYXRyaXgpXG5cbiAgICAgIGNsb25lZE1lc2guc2tlbGV0b24uYm9uZXMgPSBzb3VyY2VCb25lcy5tYXAoKGJvbmUpID0+IHtcbiAgICAgICAgaWYgKCFjbG9uZUxvb2t1cC5oYXMoYm9uZSkpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAnQm9uZSB3YXMgbm90IGNsb25lZCcsXG4gICAgICAgICAgICBib25lLFxuICAgICAgICAgICAgJy4gQ29tbW9uIHJlYXNvbiBpcyB0aGF0IGJvbmVzIHBhcmVudCBpcyBvdXQgb2YgY2xvbmUgc291cmNlJyxcbiAgICAgICAgICAgIHNvdXJjZVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xvbmVMb29rdXAuZ2V0KGJvbmUpXG4gICAgICB9KVxuXG4gICAgICBjbG9uZWRNZXNoLmJpbmQoY2xvbmVkTWVzaC5za2VsZXRvbiwgY2xvbmVkTWVzaC5iaW5kTWF0cml4KVxuICAgIH0pXG5cbiAgICByZXR1cm4gY2xvbmVcbiAgfVxufVxuXG5mdW5jdGlvbiBwYXJhbGxlbFRyYXZlcnNlKGEsIGIsIGNhbGxiYWNrKSB7XG4gIGNhbGxiYWNrKGEsIGIpXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgcGFyYWxsZWxUcmF2ZXJzZShhLmNoaWxkcmVuW2ldLCBiLmNoaWxkcmVuW2ldLCBjYWxsYmFjaylcbiAgfVxufVxuXG5leHBvcnQgeyBTa2VsZXRvblV0aWxzIH1cbiIsImltcG9ydCB7IFZlY3RvcjMgfSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IGNyZWF0ZU1hcHBlZENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2Vjcy9mdW5jdGlvbnMvQ29tcG9uZW50RnVuY3Rpb25zJ1xuaW1wb3J0IHsgQW5pbWF0aW9uR3JhcGggfSBmcm9tICcuLi9hbmltYXRpb25zL0FuaW1hdGlvbkdyYXBoJ1xuaW1wb3J0IHsgQW5pbWF0aW9uU3RhdGUgfSBmcm9tICcuLi9hbmltYXRpb25zL0FuaW1hdGlvblN0YXRlJ1xuXG5leHBvcnQgdHlwZSBBdmF0YXJBbmltYXRpb25Db21wb25lbnRUeXBlID0ge1xuICAvKiogQW5pbWFpdG9uIGdyYXBoIG9mIHRoaXMgZW50aXR5ICovXG4gIGFuaW1hdGlvbkdyYXBoOiBBbmltYXRpb25HcmFwaFxuXG4gIC8qKiBDdXJyZW50IGFuaW1hdGlvbiBzdGF0ZSAqL1xuICBjdXJyZW50U3RhdGU6IEFuaW1hdGlvblN0YXRlXG5cbiAgLyoqIFByZXZpb3VzIGFuaW1hdGlvbiBzdGF0ZSAqL1xuICBwcmV2U3RhdGU6IEFuaW1hdGlvblN0YXRlXG5cbiAgLyoqIFByZXZpb3VzIHZlbG9jaXR5IG9mIHRoZSBhdmF0YXIgKi9cbiAgcHJldlZlbG9jaXR5OiBWZWN0b3IzXG59XG5cbmV4cG9ydCBjb25zdCBBdmF0YXJBbmltYXRpb25Db21wb25lbnQgPSBjcmVhdGVNYXBwZWRDb21wb25lbnQ8QXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50VHlwZT4oJ0F2YXRhckFuaW1hdGlvbkNvbXBvbmVudCcpXG4iLCJpbXBvcnQgeyBBbmltYXRpb25DbGlwLCBNYXRoVXRpbHMgfSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gJy4uLy4uL2Vjcy9jbGFzc2VzL0VudGl0eSdcbmltcG9ydCB7IGdldENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2Vjcy9mdW5jdGlvbnMvQ29tcG9uZW50RnVuY3Rpb25zJ1xuaW1wb3J0IHsgQW5pbWF0aW9uTWFuYWdlciB9IGZyb20gJy4uL0FuaW1hdGlvbk1hbmFnZXInXG5pbXBvcnQgeyBBbmltYXRpb25Db21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL0FuaW1hdGlvbkNvbXBvbmVudCdcbmltcG9ydCB7IEF2YXRhckFuaW1hdGlvbkNvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvQXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50J1xuaW1wb3J0IHsgQW5pbWF0aW9uIH0gZnJvbSAnLi9VdGlsJ1xuXG4vKiogQ2xhc3MgdG8gaGFuZGxlIHJlbmRlcmluZyBvZiBhbiBhbmltYXRpb24gYW5kIHNtb290aG91dCB0aGUgdHJhbnNpdGlvbiBvZiB0aGUgYW5pbWF0aW9uIGZyb20gb25lIHN0YXRlIHRvIGFub3RoZXIgKi9cbmV4cG9ydCBjbGFzcyBBbmltYXRpb25SZW5kZXJlciB7XG4gIC8qKiBSZW5kZXJzIGN1cnJlbnQgc3RhdGUgYW5pbWF0aW9ucywgdW5tb3VudHMgcHJldmlvdXMgc3RhdGUgYW5pbWF0aW9ucyBhbmQgYWxzbyByZW5kZXJzIGlkbGUgd2VpZ2h0IHdpdGggZGVmYXVsdCBhbmltYXRpb25cbiAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eVxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgVGltZSBzaW5jZSBsYXN0IGZyYW1lXG4gICAqL1xuICBzdGF0aWMgcmVuZGVyID0gKGVudGl0eTogRW50aXR5LCBkZWx0YTogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgY3VycmVudFN0YXRlV2VpZ2h0cyA9IHRoaXMudXBkYXRlQ3VycmVudFN0YXRlKGVudGl0eSwgZGVsdGEpXG4gICAgY29uc3QgcHJldlN0YXRlV2VpZ2h0cyA9IHRoaXMudW5tb3VudFByZXZpb3VzU3RhdGUoZW50aXR5LCBkZWx0YSlcbiAgICB0aGlzLnJlbmRlcklkbGVXZWlnaHQoZW50aXR5LCBjdXJyZW50U3RhdGVXZWlnaHRzLCBwcmV2U3RhdGVXZWlnaHRzKVxuICB9XG5cbiAgLyoqXG4gICAqIE1vdW50cyBjdXJyZW50IHN0YXRlIGJ5IHNldHRpbmcgYW5kIGNvbmZpZ3VyaW5nIGFjdGlvbiBmb3IgYW5pbWF0aW9uXG4gICAqIEBwYXJhbSB7RW50aXR5fSBlbnRpdHlcbiAgICovXG4gIHN0YXRpYyBtb3VudEN1cnJlbnRTdGF0ZSA9IChlbnRpdHk6IEVudGl0eSkgPT4ge1xuICAgIGNvbnN0IGF2YXRhckFuaW1hdGlvbkNvbXBvbmVudCA9IGdldENvbXBvbmVudChlbnRpdHksIEF2YXRhckFuaW1hdGlvbkNvbXBvbmVudClcbiAgICBjb25zdCBhbmltYXRpb25Db21wb25lbnQgPSBnZXRDb21wb25lbnQoZW50aXR5LCBBbmltYXRpb25Db21wb25lbnQpXG4gICAgLy8gUmVzZXQgdXBkYXRlIHRpbWVcbiAgICBhdmF0YXJBbmltYXRpb25Db21wb25lbnQuY3VycmVudFN0YXRlLnRpbWVFbGFwc2VkU2luY2VVcGRhdGUgPSAwXG5cbiAgICBhdmF0YXJBbmltYXRpb25Db21wb25lbnQuY3VycmVudFN0YXRlLmFuaW1hdGlvbnMuZm9yRWFjaCgoYW5pbWF0aW9uKSA9PiB7XG4gICAgICAvLyBUYWtlIHRoZSBjbGlwIGZyb20gdGhlIGxvYWRlZCBhbmltYXRpb25zXG4gICAgICBpZiAoIWFuaW1hdGlvbi5jbGlwKSB7XG4gICAgICAgIGFuaW1hdGlvbi5jbGlwID0gQW5pbWF0aW9uQ2xpcC5maW5kQnlOYW1lKEFuaW1hdGlvbk1hbmFnZXIuaW5zdGFuY2UuX2FuaW1hdGlvbnMsIGFuaW1hdGlvbi5uYW1lKVxuXG4gICAgICAgIGlmICghYW5pbWF0aW9uLmNsaXApIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBnZXQgYWN0aW9uIGZyb20gdGhlIGFuaW1hdGlvbiBtaXhlclxuICAgICAgYW5pbWF0aW9uLmFjdGlvbiA9IGFuaW1hdGlvbkNvbXBvbmVudC5taXhlci5jbGlwQWN0aW9uKGFuaW1hdGlvbi5jbGlwKVxuXG4gICAgICAvLyBBcHBseSBzdGF0ZSBzcGVjaWZpYyBkZWNvcmF0aW9ucyB0byB0aGUgYWN0aW9uXG4gICAgICBpZiAoYW5pbWF0aW9uLmRlY29yYXRlQWN0aW9uKSBhbmltYXRpb24uZGVjb3JhdGVBY3Rpb24oYW5pbWF0aW9uLmFjdGlvbilcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYW5pbWF0aW9uIG9mIGN1cnJlbnQgc3RhdGUgYW5kIGFwcGx5IGludGVycG9sYXRpb24gaWYgcmVxdWlyZWQgdG8gbWFrZSBzbW9vdGggdHJhbnNpdGlvbiBmb3IgYW5pbWF0aW9uc1xuICAgKiBAcGFyYW0gYXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50IEFuaW1hdGlvbiBjb21wb25lbnQgd2hpY2ggaG9sZHMgYW5pbWF0aW9uIGRldGFpbHNcbiAgICogQHBhcmFtIGRlbHRhIFRpbWUgc2luY2UgbGFzdCBmcmFtZVxuICAgKiBAcmV0dXJucyBUb3RhbCB3ZWlnaHRzIG9mIGN1cnJlbnRseSBtb3VudGVkIHN0YXRlJ3MgYW5pbWF0aW9uc1xuICAgKi9cbiAgc3RhdGljIHVwZGF0ZUN1cnJlbnRTdGF0ZSA9IChlbnRpdHk6IEVudGl0eSwgZGVsdGE6IG51bWJlcik6IG51bWJlciA9PiB7XG4gICAgY29uc3QgYXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50ID0gZ2V0Q29tcG9uZW50KGVudGl0eSwgQXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50KVxuICAgIGxldCBjdXJyZW50U3RhdGVXZWlnaHQgPSAwXG4gICAgY29uc3QgY3VyclN0YXRlID0gYXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50LmN1cnJlbnRTdGF0ZVxuXG4gICAgLy8gQWR2YW5jZXMgdGhlIGVsYXBzZWQgdGltZVxuICAgIGN1cnJTdGF0ZS50aW1lRWxhcHNlZFNpbmNlVXBkYXRlICs9IGRlbHRhXG5cbiAgICBjdXJyU3RhdGUuYW5pbWF0aW9ucy5mb3JFYWNoKChhbmltYXRpb246IEFuaW1hdGlvbik6IHZvaWQgPT4ge1xuICAgICAgaWYgKCFhbmltYXRpb24uY2xpcCkgcmV0dXJuXG5cbiAgICAgIC8vIElGIGludGVycG9sYXRpb24gaXMgcmV1cWlyZWQgYW5kIGFuaW1hdGlvbiB3ZWlnaHQgaXMgbm90IGZpbmFsIHdlaWdodCB0aGVuIGludGVycG9sYXRlXG4gICAgICBpZiAoY3VyclN0YXRlLndlaWdodFBhcmFtcz8uaW50ZXJwb2xhdGUgJiYgYW5pbWF0aW9uLndlaWdodCAhPT0gYW5pbWF0aW9uLnRyYW5zaXRpb25FbmRXZWlnaHQpIHtcbiAgICAgICAgYW5pbWF0aW9uLndlaWdodCA9IHRoaXMuaW50ZXJwb2xhdGVXZWlnaHQoXG4gICAgICAgICAgY3VyclN0YXRlLnRpbWVFbGFwc2VkU2luY2VVcGRhdGUsXG4gICAgICAgICAgY3VyclN0YXRlLnRyYW5zaXRpb25EdXJhdGlvbixcbiAgICAgICAgICBhbmltYXRpb24udHJhbnNpdGlvblN0YXJ0V2VpZ2h0LFxuICAgICAgICAgIGFuaW1hdGlvbi50cmFuc2l0aW9uRW5kV2VpZ2h0XG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgY3VycmVudFN0YXRlV2VpZ2h0ICs9IGFuaW1hdGlvbi53ZWlnaHRcbiAgICAgIGFuaW1hdGlvbi5hY3Rpb24uc2V0RWZmZWN0aXZlV2VpZ2h0KGFuaW1hdGlvbi53ZWlnaHQpXG4gICAgICBhbmltYXRpb24uYWN0aW9uLnNldEVmZmVjdGl2ZVRpbWVTY2FsZShhbmltYXRpb24udGltZVNjYWxlIHx8IDEpXG5cbiAgICAgIC8vIFRPRE86IFNvbXRoaW5nIGFyb3VuZCBoZXJlIGlzIGhhdmluZyBhIHN0cmFuZ2UgaW1wYWN0IG9uIHRoZSBsb29waW5nXG4gICAgICAvLyBXZSBzaG91bGQgZmlndXJlIG91dCBob3cvd2h5IHRoaXMgaXMgYWZmZWN0aW5nIHRoZSB3YWxrIGFuaW1hdGlvbnMsIGFuZCB3aHkgaXQncyBkaWZmZXJlbnQgZnJvbSBydW4gYW5pbXNcblxuICAgICAgaWYgKGFuaW1hdGlvbi53ZWlnaHQgPiAwKSB7XG4gICAgICAgIGFuaW1hdGlvbi5hY3Rpb24ucGxheSgpXG4gICAgICAgIGlmIChjdXJyU3RhdGUuc3luY0FjdGlvbnMpIHtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJTdGF0ZS5hbmltYXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY3VyclN0YXRlLmFuaW1hdGlvbnNbaV0uYWN0aW9uKSB7XG4gICAgICAgICAgICAgIGlmIChjdXJyU3RhdGUuYW5pbWF0aW9uc1tpXS53ZWlnaHQgPiAwKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLmFjdGlvbi5zeW5jV2l0aChjdXJyU3RhdGUuYW5pbWF0aW9uc1tpXS5hY3Rpb24pXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZXNldCBhbmltYXRpb24gaW4gaW50cmEgc3RhdGUgdHJhbnNpdGlvblxuICAgICAgaWYgKGN1cnJTdGF0ZS53ZWlnaHRQYXJhbXM/LnJlc2V0QW5pbWF0aW9uICYmIGFuaW1hdGlvbi53ZWlnaHQgPD0gMCkge1xuICAgICAgICBhbmltYXRpb24uYWN0aW9uLnJlc2V0KClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIGN1cnJlbnRTdGF0ZVdlaWdodFxuICB9XG5cbiAgLyoqXG4gICAqIFVubW91bnRzIHByZXZpb3VzdCBzdGF0ZSBpZiBhbnlcbiAgICogQHBhcmFtIGF2YXRhckFuaW1hdGlvbkNvbXBvbmVudCBBbmltYXRpb24gY29tcG9uZW50IHdoaWNoIGhvbGRzIGFuaW1hdGlvbiBkZXRhaWxzXG4gICAqIEBwYXJhbSBkZWx0YSBUaW1lIHNpbmNlIGxhc3QgZnJhbWVcbiAgICogQHBhcmFtIHN0b3BJbW1lZGlhdGVseSBXaGV0aGVyIHRvIHN0b3AgaW1tZWRpYXRlbHkgd2l0aG91dCBzbW9vdGggdHJhbnNpdGlvblxuICAgKiBAcmV0dXJucyBUb3RhbCB3ZWlnaHQgb2YgcHJldmlvdXMgc3RhdGUncyBhbmltYXRpb25zXG4gICAqL1xuICBzdGF0aWMgdW5tb3VudFByZXZpb3VzU3RhdGUgPSAoZW50aXR5OiBFbnRpdHksIGRlbHRhOiBudW1iZXIsIHN0b3BJbW1lZGlhdGVseT86IGJvb2xlYW4pOiBudW1iZXIgPT4ge1xuICAgIGNvbnN0IGF2YXRhckFuaW1hdGlvbkNvbXBvbmVudCA9IGdldENvbXBvbmVudChlbnRpdHksIEF2YXRhckFuaW1hdGlvbkNvbXBvbmVudClcbiAgICBsZXQgcHJldlN0YXRlV2VpZ2h0ID0gMFxuXG4gICAgaWYgKCFhdmF0YXJBbmltYXRpb25Db21wb25lbnQucHJldlN0YXRlKSB7XG4gICAgICByZXR1cm4gcHJldlN0YXRlV2VpZ2h0XG4gICAgfVxuXG4gICAgLy8gQWR2YW5jZXMgdGhlIGVsYXBzZWQgdGltZVxuICAgIGF2YXRhckFuaW1hdGlvbkNvbXBvbmVudC5wcmV2U3RhdGUudGltZUVsYXBzZWRTaW5jZVVwZGF0ZSArPSBkZWx0YVxuXG4gICAgYXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50LnByZXZTdGF0ZS5hbmltYXRpb25zLmZvckVhY2goKGFuaW1hdGlvbikgPT4ge1xuICAgICAgLy8gR2V0IHRoZSBpbnRlcnBvbGF0ZWQgd2VpZ2h0IGFuZCBhcHBseSB0byB0aGUgYWN0aW9uXG4gICAgICBhbmltYXRpb24ud2VpZ2h0ID0gc3RvcEltbWVkaWF0ZWx5XG4gICAgICAgID8gMFxuICAgICAgICA6IHRoaXMuaW50ZXJwb2xhdGVXZWlnaHQoXG4gICAgICAgICAgICBhdmF0YXJBbmltYXRpb25Db21wb25lbnQucHJldlN0YXRlLnRpbWVFbGFwc2VkU2luY2VVcGRhdGUsXG4gICAgICAgICAgICBhdmF0YXJBbmltYXRpb25Db21wb25lbnQucHJldlN0YXRlLnRyYW5zaXRpb25EdXJhdGlvbixcbiAgICAgICAgICAgIGFuaW1hdGlvbi50cmFuc2l0aW9uU3RhcnRXZWlnaHQsXG4gICAgICAgICAgICBhbmltYXRpb24udHJhbnNpdGlvbkVuZFdlaWdodFxuICAgICAgICAgIClcblxuICAgICAgYW5pbWF0aW9uLmFjdGlvbi5zZXRFZmZlY3RpdmVXZWlnaHQoYW5pbWF0aW9uLndlaWdodClcbiAgICAgIHByZXZTdGF0ZVdlaWdodCArPSBhbmltYXRpb24ud2VpZ2h0XG5cbiAgICAgIGlmIChhbmltYXRpb24ud2VpZ2h0IDw9IDApIHtcbiAgICAgICAgLy8gUmVzZXQgdGhlIGFuaW1hdGlvbiBvZiB0aGUgYWN0aW9uXG5cbiAgICAgICAgYW5pbWF0aW9uLmFjdGlvbi5yZXNldCgpXG5cbiAgICAgICAgLy8gU3RvcCB0aGUgYWN0aW9uXG4gICAgICAgIGlmIChhbmltYXRpb24uYWN0aW9uLmlzUnVubmluZygpKSB7XG4gICAgICAgICAgYW5pbWF0aW9uLmFjdGlvbi5zdG9wKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZiAoYXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50LnByZXZTdGF0ZS5uYW1lICE9PSBhdmF0YXJBbmltYXRpb25Db21wb25lbnQuYW5pbWF0aW9uR3JhcGguZGVmYXVsdFN0YXRlLm5hbWUpIHtcbiAgICAgIC8vIElmIHRoZXJlIGlzIG5vIHdlaWdodCBpbiB0aGUgcHJldlN0YXRlIGFuaW1hdGlvbnMgdGhlbiByZW1vdmUgaXQuXG4gICAgICBpZiAocHJldlN0YXRlV2VpZ2h0IDw9IDApIHtcbiAgICAgICAgdGhpcy5yZXNldFByZXZpb3VzU3RhdGUoZW50aXR5LCB0cnVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwcmV2U3RhdGVXZWlnaHRcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXJzIGlkbGUgd2VpZ2h0IHdpdGggZGVmYXVsdCBhbmltYXRpb24gdG8gcHJldmVudCBUIHBvc2UgYmVpbmcgcmVuZGVyZWRcbiAgICogQHBhcmFtIGF2YXRhckFuaW1hdGlvbkNvbXBvbmVudCBBbmltYXRpb24gY29tcG9uZW50IHdoaWNoIGhvbGRzIGFuaW1hdGlvbiBkZXRhaWxzXG4gICAqIEBwYXJhbSBjdXJyZW50U3RhdGVXZWlnaHQgV2VpZ2h0IG9mIHRoZSBjdXJyZW50IHN0YXRlXG4gICAqIEBwYXJhbSBwcmV2U3RhdGVXZWlnaHQgV2VpZ2h0IG9mIHRoZSBwcmV2aW91cyBzdGF0ZVxuICAgKi9cbiAgc3RhdGljIHJlbmRlcklkbGVXZWlnaHQgPSAoZW50aXR5OiBFbnRpdHksIGN1cnJlbnRTdGF0ZVdlaWdodDogbnVtYmVyLCBwcmV2U3RhdGVXZWlnaHQ6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IGF2YXRhckFuaW1hdGlvbkNvbXBvbmVudCA9IGdldENvbXBvbmVudChlbnRpdHksIEF2YXRhckFuaW1hdGlvbkNvbXBvbmVudClcbiAgICBjb25zdCBkZWZhdWx0U3RhdGUgPSBhdmF0YXJBbmltYXRpb25Db21wb25lbnQuYW5pbWF0aW9uR3JhcGguZGVmYXVsdFN0YXRlXG4gICAgZGVmYXVsdFN0YXRlLmFuaW1hdGlvbnNbMF0ud2VpZ2h0ID0gTWF0aC5tYXgoMSAtIChwcmV2U3RhdGVXZWlnaHQgKyBjdXJyZW50U3RhdGVXZWlnaHQpLCAwKVxuXG4gICAgLy8gSWYgY3VycmVuIHN0YXRlIGlzIGRlZmF1bHQgc3RhdGUgdGhlbiBhc3NpZ24gYWxsIHRoZSB3ZWlnaHQgdG8gaXQgdG8gcHJldmVudCBwYXJ0aWFsIFQgcG9zZVxuICAgIGlmIChhdmF0YXJBbmltYXRpb25Db21wb25lbnQuY3VycmVudFN0YXRlLm5hbWUgPT09IGRlZmF1bHRTdGF0ZS5uYW1lICYmIGRlZmF1bHRTdGF0ZS5hbmltYXRpb25zWzBdLndlaWdodCA8IDEpIHtcbiAgICAgIGRlZmF1bHRTdGF0ZS5hbmltYXRpb25zWzBdLndlaWdodCA9IDFcbiAgICB9XG5cbiAgICBpZiAoZGVmYXVsdFN0YXRlLmFuaW1hdGlvbnNbMF0uYWN0aW9uKSB7XG4gICAgICBkZWZhdWx0U3RhdGUuYW5pbWF0aW9uc1swXS5hY3Rpb24uc2V0RWZmZWN0aXZlV2VpZ2h0KGRlZmF1bHRTdGF0ZS5hbmltYXRpb25zWzBdLndlaWdodClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW50ZXJwb2xhdGVzIHdlaWdodCBiZXR3ZWVuIHN0YXJ0IGFuZCBlbmQgd2VpZ2h0IGZvciBlbGFwc2VkIHRpbWVcbiAgICogQHBhcmFtIGVsYXBzZWRUaW1lIFRpbWUgZWxhcHNlZCBzaW5jZSB0cmFuc2l0aW9uIHN0YXJ0ZWRcbiAgICogQHBhcmFtIGR1cmF0aW9uIEFuaW1haXRvbiB0cmFuc2l0aW9uIGR1cmF0aW9uXG4gICAqIEBwYXJhbSBzdGFydFdlaWdodCBTdGFydCB3ZWlnaHQgZnJvbSB3aGljaCBpbnRlcnBvbGF0ZWQgd2VpZ2ggd2lsbCBiZSBjYWxjdWxhdGVkXG4gICAqIEBwYXJhbSBlbmR3ZWlnaHQgZW5kIHdlaWdodCB0b3dhcmRzIHdoaWNoIGludGVycG9sYXRlZCB3ZWlnaCB3aWxsIGJlIGNhbGN1bGF0ZWRcbiAgICogQHJldHVybnMgSW50ZXJwb2xhdGVkIHdlaWdodFxuICAgKi9cbiAgc3RhdGljIGludGVycG9sYXRlV2VpZ2h0ID0gKFxuICAgIGVsYXBzZWRUaW1lOiBudW1iZXIsXG4gICAgZHVyYXRpb246IG51bWJlcixcbiAgICBzdGFydFdlaWdodDogbnVtYmVyLFxuICAgIGVuZHdlaWdodDogbnVtYmVyXG4gICk6IG51bWJlciA9PiB7XG4gICAgcmV0dXJuIE1hdGhVdGlscy5jbGFtcChNYXRoVXRpbHMubWFwTGluZWFyKGVsYXBzZWRUaW1lLCAwLCBkdXJhdGlvbiwgc3RhcnRXZWlnaHQsIGVuZHdlaWdodCksIDAsIDEpXG4gIH1cblxuICAvKipcbiAgICogUmVzZXRzIHRoZSBwcmV2aW91c2Ugc3RhdGVcbiAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVtcHR5UHJldlN0YXRlIFdoZXRlcmggdG8gbWFrZSBwcmV2aW91cyBzdGF0ZSBudWxsIGFmdGVyIHJlc2V0XG4gICAqL1xuICBzdGF0aWMgcmVzZXRQcmV2aW91c1N0YXRlID0gKGVudGl0eTogRW50aXR5LCBlbXB0eVByZXZTdGF0ZT86IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgICBjb25zdCBhdmF0YXJBbmltYXRpb25Db21wb25lbnQgPSBnZXRDb21wb25lbnQoZW50aXR5LCBBdmF0YXJBbmltYXRpb25Db21wb25lbnQpXG4gICAgYXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50LnByZXZTdGF0ZS50aW1lRWxhcHNlZFNpbmNlVXBkYXRlID0gMFxuICAgIGF2YXRhckFuaW1hdGlvbkNvbXBvbmVudC5wcmV2U3RhdGUuYW5pbWF0aW9ucy5mb3JFYWNoKChhKSA9PiB7XG4gICAgICBhLnRyYW5zaXRpb25TdGFydFdlaWdodCA9IGEud2VpZ2h0XG4gICAgICBhLnRyYW5zaXRpb25FbmRXZWlnaHQgPSAwXG4gICAgfSlcblxuICAgIGlmIChlbXB0eVByZXZTdGF0ZSkge1xuICAgICAgYXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50LnByZXZTdGF0ZSA9IG51bGwhXG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBNZXNoIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBjcmVhdGVNYXBwZWRDb21wb25lbnQgfSBmcm9tICcuLi8uLi9lY3MvZnVuY3Rpb25zL0NvbXBvbmVudEZ1bmN0aW9ucydcblxuZXhwb3J0IHR5cGUgQXZhdGFyUGVuZGluZ0NvbXBvbmVudFR5cGUgPSB7XG4gIGxpZ2h0OiBNZXNoXG4gIHBsYXRlOiBNZXNoXG59XG5cbmV4cG9ydCBjb25zdCBBdmF0YXJQZW5kaW5nQ29tcG9uZW50ID0gY3JlYXRlTWFwcGVkQ29tcG9uZW50PEF2YXRhclBlbmRpbmdDb21wb25lbnRUeXBlPignQXZhdGFyUGVuZGluZ0NvbXBvbmVudCcpXG4iLCJpbXBvcnQgeyBNYXRlcmlhbCB9IGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgY3JlYXRlTWFwcGVkQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vZWNzL2Z1bmN0aW9ucy9Db21wb25lbnRGdW5jdGlvbnMnXG5cbmV4cG9ydCB0eXBlIE1hdGVyaWFsTWFwID0ge1xuICBpZDogc3RyaW5nXG4gIG1hdGVyaWFsOiBNYXRlcmlhbFxufVxuXG5leHBvcnQgdHlwZSBBdmF0YXJFZmZlY3RDb21wb25lbnRUeXBlID0ge1xuICBvcGFjaXR5TXVsdGlwbGllcjogbnVtYmVyXG4gIG9yaWdpbk1hdGVyaWFsczogQXJyYXk8TWF0ZXJpYWxNYXA+XG59XG5cbmV4cG9ydCBjb25zdCBBdmF0YXJFZmZlY3RDb21wb25lbnQgPSBjcmVhdGVNYXBwZWRDb21wb25lbnQ8QXZhdGFyRWZmZWN0Q29tcG9uZW50VHlwZT4oJ0F2YXRhckVmZmVjdENvbXBvbmVudCcpXG4iLCJpbXBvcnQgeyBNYXRlcmlhbCwgU2hhZGVyTWF0ZXJpYWwsIEJ1ZmZlckF0dHJpYnV0ZSwgUmVwZWF0V3JhcHBpbmcsIERvdWJsZVNpZGUsIE9iamVjdDNELCBNZXNoIH0gZnJvbSAndGhyZWUnXG5cbmV4cG9ydCBjbGFzcyBEaXNzb2x2ZUVmZmVjdCB7XG4gIHRpbWUgPSAwXG4gIG9iamVjdFxuICBtYXhIZWlnaHQgPSAxXG4gIG1pbkhlaWdodCA9IDBcbiAgc3RlcCA9IDAuMDAxXG5cbiAgY29uc3RydWN0b3Iob2JqZWN0OiBPYmplY3QzRCwgbWluSGVpZ2h0OiBudW1iZXIsIG1heEhlaWdodDogbnVtYmVyKSB7XG4gICAgb2JqZWN0LnRyYXZlcnNlKChjaGlsZCkgPT4ge1xuICAgICAgaWYgKGNoaWxkWydtYXRlcmlhbCddKSB7XG4gICAgICAgIGNoaWxkLnZpc2libGUgPSB0cnVlXG4gICAgICB9XG4gICAgfSlcbiAgICB0aGlzLm9iamVjdCA9IG9iamVjdFxuICAgIHRoaXMubWluSGVpZ2h0ID0gbWluSGVpZ2h0IC0gMVxuICAgIHRoaXMubWF4SGVpZ2h0ID0gbWF4SGVpZ2h0ICsgMVxuICAgIHRoaXMuc3RlcCA9ICh0aGlzLm1heEhlaWdodCAtIHRoaXMubWluSGVpZ2h0KSAvIDE1MFxuICAgIHRoaXMudGltZSA9IHRoaXMubWluSGVpZ2h0XG4gIH1cblxuICBkaXNwb3NlKCkge31cblxuICB1cGRhdGUoZHQpIHtcbiAgICBpZiAodGhpcy50aW1lIDw9IHRoaXMubWF4SGVpZ2h0KSB7XG4gICAgICB0aGlzLm9iamVjdC50cmF2ZXJzZSgoY2hpbGQpID0+IHtcbiAgICAgICAgaWYgKGNoaWxkWydtYXRlcmlhbCddICYmIGNoaWxkLm5hbWUgIT09ICdsaWdodF9vYmonICYmIGNoaWxkLm5hbWUgIT09ICdwbGF0ZV9vYmonKSB7XG4gICAgICAgICAgaWYgKGNoaWxkLm1hdGVyaWFsLnVuaWZvcm1zKSBjaGlsZC5tYXRlcmlhbC51bmlmb3Jtcy50aW1lLnZhbHVlID0gdGhpcy50aW1lXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIHRoaXMudGltZSArPSB0aGlzLnN0ZXBcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICB0aGlzLmRpc3Bvc2UoKVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBzdGF0aWMgZ2V0RGlzc29sdmVUZXh0dXJlKG9iamVjdDogTWVzaCk6IFNoYWRlck1hdGVyaWFsIHtcbiAgICBjb25zdCB2ZXJ0ZXhOb25VVlNoYWRlciA9IFtcbiAgICAgICd2YXJ5aW5nIGZsb2F0IHBvc1k7JyxcbiAgICAgICd2YXJ5aW5nIHZlYzIgdlV2OycsXG4gICAgICAnI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PicsXG4gICAgICAndm9pZCBtYWluKCkgeycsXG4gICAgICAnI2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD4nLFxuICAgICAgJyNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+JyxcbiAgICAgICcjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PicsXG4gICAgICAnI2luY2x1ZGUgPHByb2plY3RfdmVydGV4PicsXG4gICAgICAndmVjMiBjbGlwU3BhY2UgPSBnbF9Qb3NpdGlvbi54eSAvIGdsX1Bvc2l0aW9uLnc7JyxcbiAgICAgICd2VXYgPSBjbGlwU3BhY2UgKiAwLjUgKyAwLjU7JyxcbiAgICAgICdwb3NZID0gcG9zaXRpb24ueTsnLFxuICAgICAgJ30nXG4gICAgXS5qb2luKCdcXG4nKVxuXG4gICAgY29uc3QgdmVydGV4VVZTaGFkZXIgPSBbXG4gICAgICAndmFyeWluZyB2ZWMyIHZVdjsnLFxuICAgICAgJ3ZhcnlpbmcgZmxvYXQgcG9zWTsnLFxuICAgICAgJyNpbmNsdWRlIDxza2lubmluZ19wYXJzX3ZlcnRleD4nLFxuICAgICAgJ3ZvaWQgbWFpbigpIHsnLFxuICAgICAgJyNpbmNsdWRlIDxza2luYmFzZV92ZXJ0ZXg+JyxcbiAgICAgICcjaW5jbHVkZSA8YmVnaW5fdmVydGV4PicsXG4gICAgICAnI2luY2x1ZGUgPHNraW5uaW5nX3ZlcnRleD4nLFxuICAgICAgJyNpbmNsdWRlIDxwcm9qZWN0X3ZlcnRleD4nLFxuICAgICAgJ3ZVdiA9IHV2OycsXG4gICAgICAncG9zWSA9IHBvc2l0aW9uLnk7JyxcbiAgICAgICd9J1xuICAgIF0uam9pbignXFxuJylcblxuICAgIGNvbnN0IGZyYWdtZW50Q29sb3JTaGFkZXIgPSBbXG4gICAgICAndW5pZm9ybSB2ZWMzIGNvbG9yOycsXG4gICAgICAndmFyeWluZyB2ZWMyIHZVdjsnLFxuICAgICAgJ3ZhcnlpbmcgZmxvYXQgcG9zWTsnLFxuICAgICAgJ3VuaWZvcm0gZmxvYXQgdGltZTsnLFxuICAgICAgJ3VuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmVfZGlzc29sdmU7JyxcbiAgICAgICdmbG9hdCByYW5kKGZsb2F0IGNvKSB7IHJldHVybiBmcmFjdChzaW4oY28qKDkxLjM0NTgpKSAqIDQ3NDUzLjU0NTMpOyB9JyxcbiAgICAgICd2b2lkIG1haW4oKSB7JyxcbiAgICAgIC8vICcgdmVjNCBkaXNzb2x2ZURhdGEgPSB0ZXh0dXJlMkQoIHRleHR1cmVfZGlzc29sdmUsIHZVdiApOycsXG4gICAgICAvLyAnIGZsb2F0IGdyZXlWYWx1ZSA9IGRpc3NvbHZlRGF0YS5nOycsXG4gICAgICAvLyAnIGZsb2F0IGRpZmZlcmVuY2UgPSBncmV5VmFsdWUgLSB0aW1lOycsXG4gICAgICAnXHRnbF9GcmFnQ29sb3IgPSB2ZWM0KGNvbG9yLnIsIGNvbG9yLmcsIGNvbG9yLmIsIDEuMCk7JyxcbiAgICAgICdcdGZsb2F0IG9mZnNldCA9IHBvc1kgLSB0aW1lOycsXG4gICAgICAnIGlmKG9mZnNldCA+ICgtMC4wMSAtIHJhbmQodGltZSkgKiAwLjMpKXsnLFxuICAgICAgJyAgIGdsX0ZyYWdDb2xvci5yID0gMC4wOycsXG4gICAgICAnICAgZ2xfRnJhZ0NvbG9yLmcgPSAxLjA7JyxcbiAgICAgICcgICBnbF9GcmFnQ29sb3IuYiA9IDAuMDsnLFxuICAgICAgJyB9JyxcbiAgICAgICcgaWYob2Zmc2V0ID4gMC4wKXsnLFxuICAgICAgJyAgIGRpc2NhcmQ7JyxcbiAgICAgICcgfScsXG4gICAgICAnfSdcbiAgICBdLmpvaW4oJ1xcbicpXG5cbiAgICBjb25zdCBmcmFnbWVudFRleHR1cmVTaGFkZXIgPSBbXG4gICAgICAndW5pZm9ybSB2ZWMzIGNvbG9yOycsXG4gICAgICAndmFyeWluZyB2ZWMyIHZVdjsnLFxuICAgICAgJ3ZhcnlpbmcgZmxvYXQgcG9zWTsnLFxuICAgICAgJ3VuaWZvcm0gZmxvYXQgdGltZTsnLFxuICAgICAgJ3VuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmVfZGlzc29sdmU7JyxcbiAgICAgICd1bmlmb3JtIHNhbXBsZXIyRCBvcmlnaW5fdGV4dHVyZTsnLFxuICAgICAgJ2Zsb2F0IHJhbmQoZmxvYXQgY28pIHsgcmV0dXJuIGZyYWN0KHNpbihjbyooOTEuMzQ1OCkpICogNDc0NTMuNTQ1Myk7IH0nLFxuICAgICAgJ3ZvaWQgbWFpbigpIHsnLFxuICAgICAgLy8gJyB2ZWM0IGRpc3NvbHZlRGF0YSA9IHRleHR1cmUyRCggdGV4dHVyZV9kaXNzb2x2ZSwgdlV2ICk7JyxcbiAgICAgIC8vICcgZmxvYXQgZ3JleVZhbHVlID0gZGlzc29sdmVEYXRhLmc7JyxcbiAgICAgIC8vICcgZmxvYXQgZGlmZmVyZW5jZSA9IGdyZXlWYWx1ZSAtIHRpbWU7JyxcbiAgICAgICdcdGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRChvcmlnaW5fdGV4dHVyZSwgdlV2KTsnLFxuICAgICAgJ1x0ZmxvYXQgb2Zmc2V0ID0gcG9zWSAtIHRpbWU7JyxcbiAgICAgICcgaWYob2Zmc2V0ID4gKC0wLjAxIC0gcmFuZCh0aW1lKSAqIDAuMykpeycsXG4gICAgICAnICAgZ2xfRnJhZ0NvbG9yLnIgPSAwLjA7JyxcbiAgICAgICcgICBnbF9GcmFnQ29sb3IuZyA9IDEuMDsnLFxuICAgICAgJyAgIGdsX0ZyYWdDb2xvci5iID0gMC4wOycsXG4gICAgICAnIH0nLFxuICAgICAgJyBpZihvZmZzZXQgPiAwLjApeycsXG4gICAgICAnICAgZGlzY2FyZDsnLFxuICAgICAgJyB9JyxcbiAgICAgICd9J1xuICAgIF0uam9pbignXFxuJylcblxuICAgIGNvbnN0IGhhc1VWID0gb2JqZWN0Lmdlb21ldHJ5Lmhhc0F0dHJpYnV0ZSgndXYnKVxuICAgIGNvbnN0IGhhc1RleHR1cmUgPSAoPGFueT5vYmplY3QubWF0ZXJpYWwpLm1hcCAhPT0gbnVsbFxuXG4gICAgY29uc3QgbWF0ID0gbmV3IFNoYWRlck1hdGVyaWFsKHtcbiAgICAgIHVuaWZvcm1zOiB7XG4gICAgICAgIGNvbG9yOiB7XG4gICAgICAgICAgdmFsdWU6ICg8YW55Pm9iamVjdC5tYXRlcmlhbCkuY29sb3JcbiAgICAgICAgfSxcbiAgICAgICAgb3JpZ2luX3RleHR1cmU6IHtcbiAgICAgICAgICB2YWx1ZTogKDxhbnk+b2JqZWN0Lm1hdGVyaWFsKS5tYXBcbiAgICAgICAgfSxcbiAgICAgICAgLy8gdGV4dHVyZV9kaXNzb2x2ZToge1xuICAgICAgICAvLyAgIHZhbHVlOiB0ZXh0dXJlTm9pc2VcbiAgICAgICAgLy8gfSxcbiAgICAgICAgdGltZToge1xuICAgICAgICAgIHZhbHVlOiAtMjAwXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB2ZXJ0ZXhTaGFkZXI6IGhhc1VWID8gdmVydGV4VVZTaGFkZXIgOiB2ZXJ0ZXhOb25VVlNoYWRlcixcbiAgICAgIGZyYWdtZW50U2hhZGVyOiBoYXNUZXh0dXJlID8gZnJhZ21lbnRUZXh0dXJlU2hhZGVyIDogZnJhZ21lbnRDb2xvclNoYWRlclxuICAgIH0pXG5cbiAgICByZXR1cm4gbWF0XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBDYW1lcmFMYXllcnMgPSB7XG4gIE5vbmU6IDAsXG4gIEF2YXRhcjogMSxcbiAgUG9ydGFsOiAyLFxuICBTY2VuZTogM1xufVxuIiwiLy8gdHBvc2VcbmV4cG9ydCBjb25zdCBib25lc0RhdGEgPSBbXG4gIHtcbiAgICBuYW1lOiAnSGlwcycsXG4gICAgcGFyZW50SW5kZXg6IG51bGwsXG4gICAgcG9zaXRpb246IFstMS42NTQzNjEyMjUxMDYwNTUzZS0yNCwgMC45OTY3MjA5Njk2NzY5NzE0LCA0LjM1NjgwNTQwNTMzNjY3MmUtOF0sXG4gICAgcXVhdGVybmlvbjogWy0wLjA2MDQ3ODc2MTc5MjE4MjkyLCAxLjI5Nzk4NjQyOTQ0OTMzODJlLTgsIDQuNDE4MDAzMjQzMjQ1MDM5ZS03LCAwLjk5ODE2OTQ4MTc1NDMwM10sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1NwaW5lJyxcbiAgICBwYXJlbnRJbmRleDogMCxcbiAgICBwb3NpdGlvbjogWzEuMTM2ODg5OTI1NzM0MzM4NGUtMTMsIDAuMDk5OTkwODU5NjI3NzIzNywgLTAuMDAwMjAxOTc1OTI2NzU2ODU4ODNdLFxuICAgIHF1YXRlcm5pb246IFstMC4wMDA3NTMyMDU1NjA2MTM0MjM2LCAxLjM0MzA2OTIxMTQwMTM3MWUtOCwgLTQuNDE3ODU5NzEzNjEyNDE1NGUtNywgMC45OTk5OTk3MDE5NzY3NzYxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnU3BpbmUxJyxcbiAgICBwYXJlbnRJbmRleDogMSxcbiAgICBwb3NpdGlvbjogWy05Ljk5OTk5OTk3NDc1MjQyN2UtNywgMC4xMTczMTkzMDA3NzA3NTk1OCwgMC4wMDAxMTc5ODczOTQzMzI4ODU3NF0sXG4gICAgcXVhdGVybmlvbjogWy0wLjAwMTMwNjE1Njc0NDI0OTE2NSwgNC4xNjcxNzQ3NTY4NDgxMTQ2ZS0xNCwgLTYuODIxNzYwNDk1ODk5NDk4ZS0xMywgMC45OTk5OTkxNjU1MzQ5NzMxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnU3BpbmUyJyxcbiAgICBwYXJlbnRJbmRleDogMixcbiAgICBwb3NpdGlvbjogWzkuOTk5OTk5OTc0NzUyNDI3ZS03LCAwLjEzNDU4NzM5MjIxMDk2MDQsIDAuMDAwNTM4OTMxNTc3NDY2NDI4M10sXG4gICAgcXVhdGVybmlvbjogWzAuMDg0MjEzNzcwOTI1OTk4NjksIC0yLjA2NzIxNjAwMjM4MTg4N2UtMTcsIC0zLjc5NzcyNTk4NTc1NDQ3MTVlLTE4LCAwLjk5NjQ0Nzc0MTk4NTMyMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ05lY2snLFxuICAgIHBhcmVudEluZGV4OiAzLFxuICAgIHBvc2l0aW9uOiBbNy4wOTk3MDg2MTQ2NTc2MTQ0ZS0xNSwgMC4xNTA1Mjc3NjAzODY0NjY5OCwgMC4wMDEzODc4NjgwNzY1NjI4ODE1XSxcbiAgICBxdWF0ZXJuaW9uOiBbMC4xMjk5NzgyNTQ0Mzc0NDY2LCAtMS4yNjgyMDI1NDY2OTQ0OTNlLTE0LCAtMi4zMTAwMzk2Mzc4NzQ3MzllLTEzLCAwLjk5MTUxNjk0Nzc0NjI3NjldLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdIZWFkJyxcbiAgICBwYXJlbnRJbmRleDogNCxcbiAgICBwb3NpdGlvbjogWzkuNjc5NDE3MzA1OTYwMjMzZS0xOSwgMC4xMDc4OTE0MjU0OTAzNzkzMywgLTAuMDAwOTMyNTQ0NzAyNjY0MDE3N10sXG4gICAgcXVhdGVybmlvbjogWy0wLjE1MTQ5OTk4NjY0ODU1OTU3LCAtNy4xOTMxNTE4NTM0MTMxNjVlLTE4LCAtNS44NDE2NjE5ODI0MTI3ODllLTE4LCAwLjk4ODQ1NzI2MjUxNjAyMTddLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdIZWFkVG9wX0VuZCcsXG4gICAgcGFyZW50SW5kZXg6IDUsXG4gICAgcG9zaXRpb246IFswLjAwMDAwMTk5OTk5OTk5NDk1MDQ4NTQsIDAuMTg0NzQ2OTgwNjY3MTE0MjYsIDAuMDY2MzYzOTk3NzU3NDM0ODRdLFxuICAgIHF1YXRlcm5pb246IFsyLjUyODY3MTMxNjc4MTU4MzNlLTgsIC0xLjc4OTMyNDQyNzQ0MDUxMzZlLTE4LCAxLjY3OTgzMTM0OTcxNjI0OTJlLTI1LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEV5ZScsXG4gICAgcGFyZW50SW5kZXg6IDUsXG4gICAgcG9zaXRpb246IFswLjAyOTQ3ODk5ODg1NDc1NjM1NSwgMC4wNzY4MTcwNDMxMjU2Mjk0MywgMC4wOTEyMDY5OTc2MzI5ODAzNV0sXG4gICAgcXVhdGVybmlvbjogWzAuNzA3OTU4NTc5MDYzNDE1NSwgMC4wMDAwMDk0Mjk1MzQ2NTcxMDE2MTMsIDAuMDAwMDA5NDUyMjkyOTQzMDI0MDc3LCAwLjcwNjI1NDAwNTQzMjEyODldLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEV5ZScsXG4gICAgcGFyZW50SW5kZXg6IDUsXG4gICAgcG9zaXRpb246IFstMC4wMjk0NDQ5OTgxMzAyMDIyOTMsIDAuMDc2ODE3MDQzMTI1NjI5NDMsIDAuMDkxMjA0OTkzNDI2Nzk5NzddLFxuICAgIHF1YXRlcm5pb246IFswLjcwNzk1ODYzODY2ODA2MDMsIDAuMDAwMDA0Nzk4OTYxOTgxNTc4MDMxNiwgMC4wMDAwMDQ4MTA1NDMwMzIzNjMwNTcsIDAuNzA2MjUzOTQ1ODI3NDg0MV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRTaG91bGRlcicsXG4gICAgcGFyZW50SW5kZXg6IDMsXG4gICAgcG9zaXRpb246IFswLjA2MTA1Nzk5OTczMDExMDE3LCAwLjA5MTMyNDgxMzY2Mzk1OTUsIDAuMDAzMDg5NjQwMjg5NTQ1MDU5XSxcbiAgICBxdWF0ZXJuaW9uOiBbMC43MDY5Mzk3NTY4NzAyNjk4LCAwLjcwNjkzOTY5NzI2NTYyNSwgLTAuMDE1MzcwMTg3MzQ5NjE3NDgxLCAwLjAxNTM3MDI1MTYxMDg3NTEzXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEFybScsXG4gICAgcGFyZW50SW5kZXg6IDksXG4gICAgcG9zaXRpb246IFstMC4wMDI2NTg5Nzc4NzE3NjA3MjYsIDAuMTI2NTQ5OTg4OTg1MDYxNjUsIDAuMDI2MDA4OTk3MTEyNTEyNTldLFxuICAgIHF1YXRlcm5pb246IFs0LjQ3MDM0ODM1ODE1NDI5N2UtOCwgMy43NzQ4OTQ3MDc5MzA3OThlLTgsIC00LjQ3MDM0ODM1ODE1NDI5N2UtOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRGb3JlQXJtJyxcbiAgICBwYXJlbnRJbmRleDogMTAsXG4gICAgcG9zaXRpb246IFstMS45MzczMDIyMjk3NDg2Mzg2ZS04LCAwLjI3NDA0Njk1NzQ5MjgyODM3LCAtMy41MTYwMjEyNTE5MjU4NDk0ZS05XSxcbiAgICBxdWF0ZXJuaW9uOiBbLTUuOTYwNDY0MTIyMjY3Njk0NmUtOCwgMy45MDA4NjU4NTI1NTc0NDVlLTksIC00LjM0NTY2MjgzMTIxODc4NWUtMTgsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZCcsXG4gICAgcGFyZW50SW5kZXg6IDExLFxuICAgIHBvc2l0aW9uOiBbLTEuOTM3MzIxNDE0NDAyNTA0ZS04LCAwLjI3NjE0NTEwMDU5MzU2NjksIC0zLjUxNjAyMTI1MTkyNTg0OTRlLTldLFxuICAgIHF1YXRlcm5pb246IFsyLjk4MDIzMjA2MTEzMzg0NzNlLTgsIDAuMDAwMDI1NzY0MTA3NzA0MTYyNTk4LCAxLjU0OTg3ODI4MTI3MDYyMjRlLTEyLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRNaWRkbGUxJyxcbiAgICBwYXJlbnRJbmRleDogMTIsXG4gICAgcG9zaXRpb246IFsxLjM3NTA4Nzc3Njk3ODAzNDVlLTgsIDAuMTI3NzU0OTg2Mjg2MTYzMzMsIC00LjExODE5MjAwOTYyNzgxOWUtOV0sXG4gICAgcXVhdGVybmlvbjogWzEuNDkwMTE1OTQxNzQ5MDgxN2UtOCwgNC40Njk5ODQ5MTU1NDQ5NTU2ZS04LCAtMi45ODA0NjQ5NDE1MTU0OTNlLTgsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZE1pZGRsZTInLFxuICAgIHBhcmVudEluZGV4OiAxMyxcbiAgICBwb3NpdGlvbjogWzEuMzc1MDg3Nzc2OTc4MDM0NWUtOCwgMC4wMzYxNDAwMjQ2NjIwMTc4MiwgLTQuMTE4MTkyMDA5NjI3ODE5ZS05XSxcbiAgICBxdWF0ZXJuaW9uOiBbLTEuNDkwMTE2Mjk3MDIwNDQ5NmUtOCwgLTEuNDkwMjk4MTk1OTYwODA0ZS04LCA3Ljc2MjY3OTkzMDI4MDE4MWUtMTMsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZE1pZGRsZTMnLFxuICAgIHBhcmVudEluZGV4OiAxNCxcbiAgICBwb3NpdGlvbjogWzEuMzc1MDg3Nzc2OTc4MDM0NWUtOCwgMC4wMzQ1OTc4NzM2ODc3NDQxNCwgLTMuOTI5MDE3MTExNjU5MDVlLTEwXSxcbiAgICBxdWF0ZXJuaW9uOiBbLTUuNTMzOTAzNDEzNjM3NTc1ZS0xNSwgMS44MTg5ODk0MDM1NDU4NTY1ZS0xMiwgMS40OTAxMTYxMTkzODQ3NjU2ZS04LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRUaHVtYjEnLFxuICAgIHBhcmVudEluZGV4OiAxMixcbiAgICBwb3NpdGlvbjogWy0wLjAyMTY3MDE5MDYxNzQ0MjEzLCAwLjAzNzg4ODAwNTM3NTg2MjEyLCAtMC4wMzAwMzA5NzMyNTU2MzQzMDhdLFxuICAgIHF1YXRlcm5pb246IFstMC4yMjM1MzQyNzExMjEwMjUwOSwgLTAuMDYwMTcyOTExNzMzMzg4OSwgMC4yNTE3MDM1MzA1NTAwMDMwNSwgMC45Mzk3MTExNTM1MDcyMzI3XSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRUaHVtYjInLFxuICAgIHBhcmVudEluZGV4OiAxNixcbiAgICBwb3NpdGlvbjogWy0wLjAwMDAxMzEwMTMyMzkyOTczMTczNCwgMC4wNDc0NDg4OTIxNDYzNDg5NSwgMC4wMDAxNjgzNDk1NTAyMjIwNDY2N10sXG4gICAgcXVhdGVybmlvbjogWzAuMDAwMzE4Mzg3NTgxNTAxMTU2MSwgMC4wMDA0OTg2NjM5MjUxMDAxMTc5LCAwLjAwMDMzMDg5MjE4Nzc3NjA0NCwgMC45OTk5OTk3NjE1ODE0MjA5XSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRUaHVtYjMnLFxuICAgIHBhcmVudEluZGV4OiAxNyxcbiAgICBwb3NpdGlvbjogWzAuMDAwMDE3MTMzNzUyNDA3OTcxNzcsIDAuMDQzODIxMDIxOTE0NDgyMTIsIDAuMDAwMTI3NjAxMjkxNzUxNDg5MDRdLFxuICAgIHF1YXRlcm5pb246IFswLjAwMDYxNjU4Nzg3MzA4MjYwOCwgLTAuMDAwMzU2NjAxNjk2Njk0MjY5OCwgMC4wMDAwMDg5MzUxMzA2MDg3MzM3NDMsIDAuOTk5OTk5NzYxNTgxNDIwOV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kSW5kZXgxJyxcbiAgICBwYXJlbnRJbmRleDogMTIsXG4gICAgcG9zaXRpb246IFstMC4wMDIzMTcwMjIwNjY1NjMzNjgsIDAuMTIyNjY2MDYwOTI0NTMwMDMsIC0wLjAyODIyMTAwNTU3Mzg2ODc1XSxcbiAgICBxdWF0ZXJuaW9uOiBbNy40NTA1ODEzMDc0NjY1NjRlLTgsIC0xLjgxODk4OTYyMDM4NjI5MWUtMTIsIDEuNDkwMTE2MTE5Mzg0NzY1NmUtOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kSW5kZXgyJyxcbiAgICBwYXJlbnRJbmRleDogMTksXG4gICAgcG9zaXRpb246IFsxLjY4MDAyNjU3MTE5MzU5MzZlLTcsIDAuMDM4OTE5OTg1Mjk0MzQyMDQsIC0xLjQzMzM2MzY0OTk5NDEzNWUtOV0sXG4gICAgcXVhdGVybmlvbjogWy0xLjA0MzA4MTI4MzU2OTMzNmUtNywgLTEuNDkwMjk4MTk1OTYwODA0ZS04LCA3Ljc0OTM1NzI1Mzk4NDY3OWUtMTMsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZEluZGV4MycsXG4gICAgcGFyZW50SW5kZXg6IDIwLFxuICAgIHBvc2l0aW9uOiBbMS42ODAwMjY1NzExOTM1OTM2ZS03LCAwLjAzNDE1MjAzMDk0NDgyNDIyLCAtMS40MzMzNjM2NDk5OTQxMzVlLTldLFxuICAgIHF1YXRlcm5pb246IFszLjU0ODgzNzY1NjAzMzg2NTNlLTE1LCAtMS40ODk5MzQzOTgwODAwOTVlLTgsIDUuOTYwNTQyNjM3MjM5OTk2ZS04LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRSaW5nMScsXG4gICAgcGFyZW50SW5kZXg6IDEyLFxuICAgIHBvc2l0aW9uOiBbMC4wMDAwOTg4NzkyMzA3OTA3NzE1NCwgMC4xMjE0NzAwMzQxMjI0NjcwNCwgMC4wMjIxNjU5ODk1MDMyNjQ0MjddLFxuICAgIHF1YXRlcm5pb246IFsyLjk4MDIzMjIzODc2OTUzMTJlLTgsIDIuOTgwMDUwNjk1MTAwNTQ0NWUtOCwgLTEuNDkwMjcxMDE3NzAxMTYxM2UtOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kUmluZzInLFxuICAgIHBhcmVudEluZGV4OiAyMixcbiAgICBwb3NpdGlvbjogWzUuNDczMDIwNzkyMTIzODYxNmUtOCwgMC4wMzYwMTE5OTM4ODUwNDAyOCwgMS4wNjIyODk4MTE2NzA3ODAyZS05XSxcbiAgICBxdWF0ZXJuaW9uOiBbLTIuOTgwMjMyMDYxMTMzODQ3M2UtOCwgLTIuOTgwMjMyNTk0MDQwODk5ZS04LCA0LjQ3MDUwMjU0NTkyNzk1N2UtOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kUmluZzMnLFxuICAgIHBhcmVudEluZGV4OiAyMyxcbiAgICBwb3NpdGlvbjogWzUuNDczMDIwNzkyMTIzODYxNmUtOCwgMC4wMzMwNzI5NDg0NTU4MTA1NSwgMS4wNjIyODk4MTE2NzA3ODAyZS05XSxcbiAgICBxdWF0ZXJuaW9uOiBbNS45NjA0NjQxMjIyNjc2OTQ2ZS04LCAxLjQ4OTkzNDM5ODA4MDA5NWUtOCwgLTEuNDkwMTkzMjEzMjcxNTk1NmUtOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kUGlua3kxJyxcbiAgICBwYXJlbnRJbmRleDogMTIsXG4gICAgcG9zaXRpb246IFstMC4wMDIyNjM5NTk5NjI4NzQ2NTEsIDAuMTA5MDgyMDQzMTcwOTI4OTYsIDAuMDQ3MjU3OTg5NjQ1MDA0MjddLFxuICAgIHF1YXRlcm5pb246IFsyLjk4MDIzMjIzODc2OTUzMTJlLTgsIDEuNDg5OTM0Mzk4MDgwMDk1ZS04LCAxLjQ5MDAzODg0Nzg2MjI1MTdlLTgsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZFBpbmt5MicsXG4gICAgcGFyZW50SW5kZXg6IDI1LFxuICAgIHBvc2l0aW9uOiBbLTUuNjI0OTk3MzU2NzkwMTE4ZS04LCAwLjA0MTM2NzA1Mzk4NTU5NTcsIDUuMjQ1OTY1NDM5ODI2MjVlLTldLFxuICAgIHF1YXRlcm5pb246IFsyLjk4MDIzMjIzODc2OTUzMTJlLTgsIDEuNDkwMjk4MDE4MzI1MTIwMmUtOCwgLTEuNDkwMTkzNTY4NTQyOTYzNWUtOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kUGlua3kzJyxcbiAgICBwYXJlbnRJbmRleDogMjYsXG4gICAgcG9zaXRpb246IFstNS42MjQ5OTczNTY3OTAxMThlLTgsIDAuMDI1OTQ4MTA3MjQyNTg0MjMsIDUuMjQ1OTY1NDM5ODI2MjVlLTldLFxuICAgIHF1YXRlcm5pb246IFstNS45NjA0NjQ0Nzc1MzkwNjNlLTgsIDIuOTgwNTk2MDM2NjUwMjQwNGUtOCwgMi45ODAwNzczNDA0NTMxMzU1ZS04LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRTaG91bGRlcicsXG4gICAgcGFyZW50SW5kZXg6IDMsXG4gICAgcG9zaXRpb246IFstMC4wNjEwNTY5OTc2MjcwMTk4OCwgMC4wOTEzMjU4ODY1NDc1NjU0NiwgMC4wMDMwODk1OTU1ODYwNjE0Nzc3XSxcbiAgICBxdWF0ZXJuaW9uOiBbLTAuMDE1MzcwMjk5MTA4MzI2NDM1LCAwLjAxNTM3MDI3OTU1MDU1MjM2OCwgMC43MDY5Mzk3NTY4NzAyNjk4LCAwLjcwNjkzOTY5NzI2NTYyNV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0QXJtJyxcbiAgICBwYXJlbnRJbmRleDogMjgsXG4gICAgcG9zaXRpb246IFstMC4wMDI2NjAwMzg2NDgxNzMyMTMsIDAuMTI2NTUwMDAzODg2MjIyODQsIC0wLjAyNjAwODk5NzExMjUxMjU5XSxcbiAgICBxdWF0ZXJuaW9uOiBbMS40OTAxMTYwMzA1NjY5MjM3ZS04LCAtMS4zNjY1OTc1MDE4Mjg0MzdlLTksIC00LjQ3MDM0ODcxMzQyNTY2NWUtOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0Rm9yZUFybScsXG4gICAgcGFyZW50SW5kZXg6IDI5LFxuICAgIHBvc2l0aW9uOiBbLTIuNjk3NjAyMTQxNjY1ODExNGUtOSwgMC4yNzQwNDY5NTc0OTI4MjgzNywgMy42ODM0MTA5MDk2MTYyMTM4ZS05XSxcbiAgICBxdWF0ZXJuaW9uOiBbLTUuOTYwNDYzNzY2OTk2MzI3ZS04LCAtMy45MDA4NjE4NTU3NTQ1NTZlLTksIDMuMDkyMTUzNzAxNTMyODQxNmUtMTUsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmQnLFxuICAgIHBhcmVudEluZGV4OiAzMCxcbiAgICBwb3NpdGlvbjogWy0yLjY5Nzc5NTc2NDU2MTMwNmUtOSwgMC4yNzYxNDUxNjAxOTgyMTE2NywgMy42ODM0MTA5MDk2MTYyMTM4ZS05XSxcbiAgICBxdWF0ZXJuaW9uOiBbMi45ODAyMzIwNjExMzM4NDczZS04LCAtMC4wMDAwMjU5NDI5MjM0NTc0NzgxNzMsIC0xLjU0NDU1Nzg4NDM2OTgwMTZlLTEyLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kTWlkZGxlMScsXG4gICAgcGFyZW50SW5kZXg6IDMxLFxuICAgIHBvc2l0aW9uOiBbOC4zNTU1Mjc4MjUxODc4OTJlLTksIDAuMTI3NzU0OTg2Mjg2MTYzMzMsIDUuMzc2OTMyNjc2ODgxNTUyZS05XSxcbiAgICBxdWF0ZXJuaW9uOiBbMS40OTAxMTU5NDE3NDkwODE3ZS04LCAtNC40Njk5ODQ5MTU1NDQ5NTU2ZS04LCAyLjk4MDQ2NTI5Njc4Njg2MDZlLTgsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRNaWRkbGUyJyxcbiAgICBwYXJlbnRJbmRleDogMzIsXG4gICAgcG9zaXRpb246IFsxLjI3NTY0ODE3Mzc1OTY5MTRlLTcsIDAuMDM2MTM5OTY1MDU3MzczMDUsIDUuMzc2OTMyNjc2ODgxNTUyZS05XSxcbiAgICBxdWF0ZXJuaW9uOiBbLTEuNDkwMTE2Mjk3MDIwNDQ5NmUtOCwgMS40OTAyOTgxOTU5NjA4MDRlLTgsIC03Ljc2MjY3OTkzMDI4MDE4MWUtMTMsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRNaWRkbGUzJyxcbiAgICBwYXJlbnRJbmRleDogMzMsXG4gICAgcG9zaXRpb246IFsxLjI3NTY0ODE3Mzc1OTY5MTRlLTcsIDAuMDM0NTk3OTMzMjkyMzg4OTE2LCA1LjM3NjkzMjY3Njg4MTU1MmUtOV0sXG4gICAgcXVhdGVybmlvbjogWzUuOTYwNDY0NDc3NTM5MDYzZS04LCAtMi45ODAyMzI1OTQwNDA4OTllLTgsIC00LjQ3MDE5NDE3MDM4MDYzN2UtOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZFRodW1iMScsXG4gICAgcGFyZW50SW5kZXg6IDMxLFxuICAgIHBvc2l0aW9uOiBbLTAuMDIxNjcwMDM5NzQzMTg1MDQzLCAwLjAzNzg4Nzk3NTU3MzUzOTczNCwgMC4wMzAwMzA5Mjg1NTIxNTA3MjZdLFxuICAgIHF1YXRlcm5pb246IFswLjIyMjEyNzY3NjAxMDEzMTg0LCAwLjA1OTU5MTU2OTAwNjQ0MzAyNCwgMC4yNTIxNTAzMjY5NjcyMzk0LCAwLjkzOTk2MTkxMDI0NzgwMjddLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRUaHVtYjInLFxuICAgIHBhcmVudEluZGV4OiAzNSxcbiAgICBwb3NpdGlvbjogWzAuMDAwMDI1MTU3NDA3NDM1NDcyMTIzLCAwLjA0NzQ0OTM0MjkwNjQ3NTA3LCAtMC4wMDAwMjEyMTI0MjMyMzQ4Mjg3NDhdLFxuICAgIHF1YXRlcm5pb246IFswLjAwMjU4MjIxMjIxMTU2NDE4MzIsIDAuMDAwNzU3NzkzMTk3NDA4MzE4NSwgMC4wMDE1MTA2MzE5OTE1NTAzMjYzLCAwLjk5OTk5NTIzMTYyODQxOF0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZFRodW1iMycsXG4gICAgcGFyZW50SW5kZXg6IDM2LFxuICAgIHBvc2l0aW9uOiBbMC4wMDAxNTU4NjU4NDA0OTc0MjY3LCAwLjA0MzgyMDQ4OTE5Nzk2OTQ0LCAtMC4wMDAyNDU2NzM1NTI4NTM5ODY2XSxcbiAgICBxdWF0ZXJuaW9uOiBbMC4wMDA3NzM1NjI0Njc2NTcwMjk2LCAtMC4wMDAyMjM3NjgxNjE5NTkwMTQ4MywgLTAuMDAwNDM5NTAyNDczNDU0OTIyNDQsIDAuOTk5OTk5NTgyNzY3NDg2Nl0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZEluZGV4MScsXG4gICAgcGFyZW50SW5kZXg6IDMxLFxuICAgIHBvc2l0aW9uOiBbLTAuMDAyMzE3MDI1MDkzMzYxNzM1MywgMC4xMjI2NjYwMDEzMTk4ODUyNSwgMC4wMjgyMjEwMDc0MzY1MTM5XSxcbiAgICBxdWF0ZXJuaW9uOiBbMS40OTAxMTYxMTkzODQ3NjU2ZS04LCAxLjgxODk4OTYyMDM4NjI5MWUtMTIsIC0xLjQ5MDExNjAzMDU2NjkyMzdlLTgsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRJbmRleDInLFxuICAgIHBhcmVudEluZGV4OiAzOCxcbiAgICBwb3NpdGlvbjogWzQuNTg2NTI0OTM3NjIyMDE2ZS04LCAwLjAzODkxOTk4NTI5NDM0MjA0LCAtOC4zNjczNTEyNTYzMTA5NGUtMTBdLFxuICAgIHF1YXRlcm5pb246IFstNC40NzAzNDkwNjg2OTcwMzI2ZS04LCAxLjQ5MDI5ODE5NTk2MDgwNGUtOCwgLTcuNzQwNDc1NDY5Nzg3Njc4ZS0xMywgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZEluZGV4MycsXG4gICAgcGFyZW50SW5kZXg6IDM5LFxuICAgIHBvc2l0aW9uOiBbNC41ODY1MjQ5Mzc2MjIwMTZlLTgsIDAuMDM0MTUyMDkwNTQ5NDY4OTk0LCAtOC4zNjczNTEyNTYzMTA5NGUtMTBdLFxuICAgIHF1YXRlcm5pb246IFsyLjk4MDIzMjIzODc2OTUzMTJlLTgsIC0xLjQ5MDExNjI5NzAyMDQ0OTZlLTgsIC0yLjk4MDE1NTMyMjUxODM4NTJlLTgsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRSaW5nMScsXG4gICAgcGFyZW50SW5kZXg6IDMxLFxuICAgIHBvc2l0aW9uOiBbMC4wMDAwOTg4NzE4OTY2MjU0OTY0NSwgMC4xMjE0NzAwMzQxMjI0NjcwNCwgLTAuMDIyMTY1OTg3NjQwNjE5Mjc4XSxcbiAgICBxdWF0ZXJuaW9uOiBbMi45ODAyMzIwNjExMzM4NDczZS04LCAtMi45ODAwNTA2OTUxMDA1NDQ1ZS04LCAxLjQ5MDI3MDY2MjQyOTc5MzRlLTgsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRSaW5nMicsXG4gICAgcGFyZW50SW5kZXg6IDQxLFxuICAgIHBvc2l0aW9uOiBbMS42NjYwNjI0MTY5MTYyNDc1ZS03LCAwLjAzNjAxMTkzNDI4MDM5NTUxLCAxLjgxODk4OTQwMzU0NTg1NjVlLTEwXSxcbiAgICBxdWF0ZXJuaW9uOiBbLTIuOTgwMjMxODgzNDk4MTYzNGUtOCwgMi45ODAyMzI1OTQwNDA4OTllLTgsIC00LjQ3MDUwMjU0NTkyNzk1N2UtOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZFJpbmczJyxcbiAgICBwYXJlbnRJbmRleDogNDIsXG4gICAgcG9zaXRpb246IFs0LjczOTY5NTIxNDA4NDM0OTZlLTgsIDAuMDMzMDczMDY3NjY1MTAwMSwgMS44MTg5ODk0MDM1NDU4NTY1ZS0xMF0sXG4gICAgcXVhdGVybmlvbjogWzUuOTYwNDYzNzY2OTk2MzI3ZS04LCAtMS40ODk1NzA2MDAxOTkzODU4ZS04LCA3LjQ1MDY1NzMzNTUzOTI5ZS04LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kUGlua3kxJyxcbiAgICBwYXJlbnRJbmRleDogMzEsXG4gICAgcG9zaXRpb246IFstMC4wMDIyNjM5Njk1MDg5MzEwNDA4LCAwLjEwOTA4MjA0MzE3MDkyODk2LCAtMC4wNDcyNTc5ODk2NDUwMDQyN10sXG4gICAgcXVhdGVybmlvbjogWzcuNDUwNTgxMzA3NDY2NTY0ZS04LCAxLjgxODk4OTYyMDM4NjI5MWUtMTIsIC0xLjQ5MDExNTk0MTc0OTA4MTdlLTgsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRQaW5reTInLFxuICAgIHBhcmVudEluZGV4OiA0NCxcbiAgICBwb3NpdGlvbjogWy02LjU3NzY5MzA1Njg5NzI2ZS04LCAwLjA0MTM2Njk5NDM4MDk1MDkzLCAtMy43OTgwNDk4NzQ2MDM3NDhlLTldLFxuICAgIHF1YXRlcm5pb246IFstMS40OTAxMTYxMTkzODQ3NjU2ZS04LCAtMi45ODA1OTYwMzY2NTAyNDA0ZS04LCAxLjQ5MDI3MDg0MDA2NTQ3NzRlLTgsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRQaW5reTMnLFxuICAgIHBhcmVudEluZGV4OiA0NSxcbiAgICBwb3NpdGlvbjogWzUuMzQzMTkwNDIzNDQ1Nzc2ZS04LCAwLjAyNTk0ODEwNzI0MjU4NDIzLCAtMy43OTgwNDk4NzQ2MDM3NDhlLTldLFxuICAgIHF1YXRlcm5pb246IFstOC45NDA2OTY3MTYzMDg1OTRlLTgsIDAsIDEuMzM5MzY5MTUzNzc5OTY4ZS0xNSwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0VXBMZWcnLFxuICAgIHBhcmVudEluZGV4OiAwLFxuICAgIHBvc2l0aW9uOiBbLTAuMDkxMjQ0OTk1NTk0MDI0NjYsIC0wLjA2NjAxMDIyOTI4OTUzMTcxLCAtMC4wMDg1ODY2NDY5ODg5ODc5MjNdLFxuICAgIHF1YXRlcm5pb246IFstMC45OTgxNjk2NjA1NjgyMzczLCAtNC4zMTY1NTIyMzU2NTAzMDZlLTcsIC0xLjE1NDY0ODUwMTI1NTkwNmUtNywgMC4wNjA0NzYwODMzMDg0NTgzM10sXG4gICAgc2NhbGU6IFsxLCAxLCAwLjk5OTk5MzAyNjI1NjU2MTNdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRMZWcnLFxuICAgIHBhcmVudEluZGV4OiA0NyxcbiAgICBwb3NpdGlvbjogWy0wLjAwMjQ0NzAxMDAxNzkzMTQ2MTMsIDAuNDA1OTU0MDYyOTM4NjkwMiwgMC4wMDUxNDUwMzY2MTU0MzEzMDldLFxuICAgIHF1YXRlcm5pb246IFswLjAyMzc5NjI3ODk4MzM1NDU3LCAtMS4wNzcyMzc1ODgwMjA4MDc0ZS04LCAzLjM2MjA2NTczNjkyMjY1OWUtOSwgMC45OTk3MTY5Mzc1NDE5NjE3XSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRGb290JyxcbiAgICBwYXJlbnRJbmRleDogNDgsXG4gICAgcG9zaXRpb246IFswLjAwMjQ0NzAyMTE5MzgwMjM1NjcsIDAuNDIwOTgyOTg2Njg4NjEzOSwgMC4wMDA1NzgzMjE5MjM5Njc0NTA5XSxcbiAgICBxdWF0ZXJuaW9uOiBbLTAuNDQ1OTUzMDExNTEyNzU2MzUsIDEuNTM4OTY0NjUzNDkxMzQ4MWUtNywgLTEuMTk4NTA3MTA2ODkyMDY2ZS03LCAwLjg5NTA1NjM2NjkyMDQ3MTJdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodFRvZUJhc2UnLFxuICAgIHBhcmVudEluZGV4OiA0OSxcbiAgICBwb3NpdGlvbjogWy0wLjAwMzczMzk5MjM0Mzc2ODQ3NzQsIDAuMTY0Mjc4Nzc1NDUzNTY3NSwgLTAuMDAwMTg1MDkwMTE3MTU2NTA1NThdLFxuICAgIHF1YXRlcm5pb246IFstMC4zNDAwMzYzMDI4MDQ5NDY5LCAtMS44MzAwODk3ODYzODA5OTVlLTcsIC05LjU4NjQ4NDEzOTg0NTE5N2UtOCwgMC45NDA0MTIzNDI1NDgzNzA0XSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRUb2VfRW5kJyxcbiAgICBwYXJlbnRJbmRleDogNTAsXG4gICAgcG9zaXRpb246IFstOS42MjcwMjE0MDIyODA4ODllLTExLCAwLjA5OTkyNTY5Njg0OTgyMywgLTMuNzg1MTQ5OTcxMjM2MDI0ZS0xMV0sXG4gICAgcXVhdGVybmlvbjogWzIuMjEzNTM0Nzc3Njk1MjU4NWUtOCwgLTcuMDk1NzkzMjA0ODU4OTMxNGUtMTUsIC0yLjExODY0MzEwODE3MzIyMzhlLTExLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdFVwTGVnJyxcbiAgICBwYXJlbnRJbmRleDogMCxcbiAgICBwb3NpdGlvbjogWzAuMDkxMjQ0OTk1NTk0MDI0NjYsIC0wLjA2NjAxMDIyOTI4OTUzMTcxLCAtMC4wMDg1ODY2NDY5ODg5ODc5MjNdLFxuICAgIHF1YXRlcm5pb246IFstMC45OTgxNzA0OTUwMzMyNjQyLCAtNC4zMTg4NjIzNTIxOTI4MDkzZS03LCAtMS4xNTQ3MDEwODE0MTgzNTIzZS03LCAwLjA2MDQ2MjAzMTUxMzQ1MjUzXSxcbiAgICBzY2FsZTogWzEsIDEsIDAuOTk5OTc2MDk4NTM3NDQ1MV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0TGVnJyxcbiAgICBwYXJlbnRJbmRleDogNTIsXG4gICAgcG9zaXRpb246IFswLjAwMjQ0NzAwODE1NTI4NjMxMiwgMC40MDU5NTM5NzM1MzE3MjMsIDAuMDA1MTcwMTE4OTk1MDEwODUzXSxcbiAgICBxdWF0ZXJuaW9uOiBbMC4wMjM4MjU2NzMzODY0NTQ1ODIsIC0xLjIxMjM1NDg3NDI2OTI5NDdlLTcsIC0zLjQ1NjQ2OTc3NzA2MzM3NTdlLTksIDAuOTk5NzE2MjIyMjg2MjI0NF0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRGb290JyxcbiAgICBwYXJlbnRJbmRleDogNTMsXG4gICAgcG9zaXRpb246IFstMC4wMDI0NDY5ODk1Mjg4MzQ4MiwgMC40MjA5ODI4Mzc2NzcwMDE5NSwgMC4wMDA1NTIzMDIyODQ2MzE4NzgxXSxcbiAgICBxdWF0ZXJuaW9uOiBbLTAuNDQ1OTcwNTk0ODgyOTY1MSwgMS42MTkyMzg1MDMyODA5Mzk4ZS03LCAtMS4xNzg3MTM1ODg5NTYyNzA1ZS03LCAwLjg5NTA0NzcyNDI0Njk3ODhdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0VG9lQmFzZScsXG4gICAgcGFyZW50SW5kZXg6IDU0LFxuICAgIHBvc2l0aW9uOiBbMC4wMDM3MzQwMDAyNjAwMTAzNjE3LCAwLjE2NDI4MDI4MDQ3MDg0ODA4LCAtMC4wMDAxODUwOTcxNjAyODM0NzYxMV0sXG4gICAgcXVhdGVybmlvbjogWy0wLjM0MDAzMjkwNTM0MDE5NDcsIC03LjE1MjMwNTQxNDU5Mjc3NGUtOCwgLTUuNjg5MTAxNDU2NTk2MjkwNWUtOCwgMC45NDA0MTM1MzQ2NDEyNjU5XSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdFRvZV9FbmQnLFxuICAgIHBhcmVudEluZGV4OiA1NSxcbiAgICBwb3NpdGlvbjogWy0zLjAxOTIzODQ3MDM0NzU3NGUtMTAsIDAuMDk5OTI3NDE3OTMzOTQwODksIDEuMjk5MTMxOTEzMTU3MjI1NGUtMTBdLFxuICAgIHF1YXRlcm5pb246IFs3LjIzMzc0MjQ5Mzg5NTA3OWUtOSwgMS4zNDg3NzAzNzI0NjE1NDM0ZS0xNCwgNC45MjYzODkyOTY1MDAxMzNlLTEwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH1cbl1cblxuLy8geHJlbmdpbmUgdHBvc2UgYm9uZXMgZnJvbSBBbmltYXRpb25zLmdsYlxuZXhwb3J0IGNvbnN0IGJvbmVzRGF0YTIgPSBbXG4gIHtcbiAgICBuYW1lOiAnSGlwcycsXG4gICAgcGFyZW50SW5kZXg6IG51bGwsXG4gICAgcG9zaXRpb246IFsyLjEyMDk2Mzg4MjQ3OTg2NzZlLTE4LCAxLjA0OTUwNTcxMDYwMTgwNjYsIDAuMDI1MDk4NzQxMDU0NTM0OTEyXSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1NwaW5lJyxcbiAgICBwYXJlbnRJbmRleDogMCxcbiAgICBwb3NpdGlvbjogWzkuMjM0MTUyMjg3MjYyOTg3ZS04LCAwLjEwMTgxNTkzODk0OTU4NDk2LCAwLjAwMTMxNTE3NjQ4Njk2ODk5NDFdLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnU3BpbmUxJyxcbiAgICBwYXJlbnRJbmRleDogMSxcbiAgICBwb3NpdGlvbjogWzIuNTE5Mzk5Nzk5ODk0MDE3NmUtOSwgMC4xMDA4MzQzNjk2NTk0MjM4MywgLTAuMDEwMDA4MDM3MDkwMzAxNTE0XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1NwaW5lMicsXG4gICAgcGFyZW50SW5kZXg6IDIsXG4gICAgcG9zaXRpb246IFszLjQ1NzQ4Njc0MTM1MzkzMjNlLTksIDAuMDkxMDAwMzE4NTI3MjIxNjgsIC0wLjAxMzczNDE2MTg1Mzc5MDI4M10sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdOZWNrJyxcbiAgICBwYXJlbnRJbmRleDogMyxcbiAgICBwb3NpdGlvbjogWzYuMzM0Mjg5NTM3MzM1MjhlLTksIDAuMTY2NzE2NTc1NjIyNTU4NiwgLTAuMDI1MTYxNjUzNzU3MDk1MzM3XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0hlYWQnLFxuICAgIHBhcmVudEluZGV4OiA0LFxuICAgIHBvc2l0aW9uOiBbLTQuMjQyMzIzODI1NTY1MTA4NmUtOSwgMC4wOTYxNzg3NzAwNjUzMDc2MiwgMC4wMTY4NTAwODQwNjYzOTA5OV0sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdIZWFkVG9wX0VuZCcsXG4gICAgcGFyZW50SW5kZXg6IDUsXG4gICAgcG9zaXRpb246IFstNi41MDgyNDQ2MDk5MDQwNjhlLTksIDAuMTc4MTUxNjA3NTEzNDI3NzMsIDAuMDI1ODQ5ODE5MTgzMzQ5NjFdLFxuICAgIHF1YXRlcm5pb246IFsyLjE2MDQ1NDM1NzYzNTg5OTJlLTcsIDAsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0RXllJyxcbiAgICBwYXJlbnRJbmRleDogNSxcbiAgICBwb3NpdGlvbjogWzAuMDMwNjc1NjA0OTM5NDYwNzU0LCAwLjA2NDA5NTAyMDI5NDE4OTQ1LCAwLjA5MjgzNTU0NTUzOTg1NTk2XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0RXllJyxcbiAgICBwYXJlbnRJbmRleDogNSxcbiAgICBwb3NpdGlvbjogWy0wLjAzMDY3NTUwNDM1NjYyMjY5NiwgMC4wNjQwOTUwMjAyOTQxODk0NSwgMC4wOTI4MzU0ODU5MzUyMTExOF0sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0U2hvdWxkZXInLFxuICAgIHBhcmVudEluZGV4OiAzLFxuICAgIHBvc2l0aW9uOiBbMC4wNDU3MDQ0NjE2MzQxNTkwOSwgMC4xMDk0NTk2Mzg1OTU1ODEwNSwgLTAuMDI2Mjc5ODY2Njk1NDA0MDUzXSxcbiAgICBxdWF0ZXJuaW9uOiBbLTAuNzA3MTA2ODI4Njg5NTc1MiwgLTAuNzA3MTA2ODI4Njg5NTc1MiwgLTUuMzM4NTA4MzAyMDg4NDg1ZS04LCA1LjMzODUwODMwMjA4ODQ4NWUtOF0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRBcm0nLFxuICAgIHBhcmVudEluZGV4OiA5LFxuICAgIHBvc2l0aW9uOiBbLTAuMDA1MjQ1NjkyNTYyMzExODg4LCAwLjEwNTkyMzY5NzM1MjQwOTM2LCAwLjAyMjMyMTE5MjU0NzY3ODk0N10sXG4gICAgcXVhdGVybmlvbjogWzAsIC0zLjE3ODY1MDU4NzE4NzgwMzVlLTgsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0Rm9yZUFybScsXG4gICAgcGFyZW50SW5kZXg6IDEwLFxuICAgIHBvc2l0aW9uOiBbLTkuNTc2ODk1MDgxNDA5MDJlLTcsIDAuMjc4NDE1MjYyNjk5MTI3MiwgLTMuNTc3NTQ2ODYzMTk4MjIyZS03XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgLTMuNTUyNzEzNjc4ODAwNTAxZS0xNSwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kJyxcbiAgICBwYXJlbnRJbmRleDogMTEsXG4gICAgcG9zaXRpb246IFstMi40MjQzMzc3MDgzNjIxNDUzZS03LCAwLjI4MzI4ODMwMDAzNzM4NDAzLCAtMy44NzU1NzAwODcwNzUxNzVlLTddLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRUaHVtYjEnLFxuICAgIHBhcmVudEluZGV4OiAxMixcbiAgICBwb3NpdGlvbjogWy0wLjAxNTc1MDQxMDAzNTI1MjU3LCAwLjAyNDY2MTQyMTc3NTgxNzg3LCAtMC4wMjY4MjQxNDgzNzE4MTU2OF0sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZFRodW1iMicsXG4gICAgcGFyZW50SW5kZXg6IDEzLFxuICAgIHBvc2l0aW9uOiBbLTAuMDE4NjQ2OTU1NDkwMTEyMzA1LCAwLjAzMjI5ODAyODQ2OTA4NTY5LCAtMC4wMTg2NDY4MDgzNDExNDU1MTVdLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRUaHVtYjMnLFxuICAgIHBhcmVudEluZGV4OiAxNCxcbiAgICBwb3NpdGlvbjogWy0wLjAxNTMxNDgxNjQ5NzI2NjI5MywgMC4wMjY1MjU2NzYyNTA0NTc3NjQsIC0wLjAxNTMxNDY5OTE1MDYyMTg5MV0sXG4gICAgcXVhdGVybmlvbjogWzAsIC0zLjU1MjcxMzY3ODgwMDUwMWUtMTUsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZEluZGV4MScsXG4gICAgcGFyZW50SW5kZXg6IDEyLFxuICAgIHBvc2l0aW9uOiBbLTAuMDA1MTcwODI0MDA2MTk5ODM3LCAwLjA5MTA5MzA2MzM1NDQ5MjE5LCAtMC4wMjI2MDA3NDAxOTQzMjA2OF0sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZEluZGV4MicsXG4gICAgcGFyZW50SW5kZXg6IDE2LFxuICAgIHBvc2l0aW9uOiBbLTIuMDM5MzYwMjM2MjM4OTYzZS05LCAwLjAzNjc2NDA4NTI5MjgxNjE2LCAtMi45ODYwMjExNzI1NDYzMTZlLTddLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRJbmRleDMnLFxuICAgIHBhcmVudEluZGV4OiAxNyxcbiAgICBwb3NpdGlvbjogWzIuMzYzNzkxNzkzNDEzODM4NmUtNywgMC4wMjg4MzA2NDc0Njg1NjY4OTUsIDQuNDY0NTU5NzA4NTk0NjA2NWUtN10sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMC45OTk5OTk5NDAzOTUzNTUyLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kTWlkZGxlMScsXG4gICAgcGFyZW50SW5kZXg6IDEyLFxuICAgIHBvc2l0aW9uOiBbLTIuNDI0MzM3NzA4MzYyMTQ1M2UtNywgMC4wOTUzMzM5OTM0MzQ5MDYsIC0xLjQ5MTM4NDcyMjM4NTE5MTdlLTddLFxuICAgIHF1YXRlcm5pb246IFswLCAtMy41NTI3MTM2Nzg4MDA1MDFlLTE1LCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRNaWRkbGUyJyxcbiAgICBwYXJlbnRJbmRleDogMTksXG4gICAgcG9zaXRpb246IFstNC4wMTUxNzY2MzU2MTg5ZS05LCAwLjAzNjk4MjM1NzUwMTk4MzY0LCAtMS43ODk0MDc5NDYyNjIxNDQ4ZS03XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMy41NTI3MTM2Nzg4MDA1MDFlLTE1LCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRNaWRkbGUzJyxcbiAgICBwYXJlbnRJbmRleDogMjAsXG4gICAgcG9zaXRpb246IFstNC44MDg1MjM0OTkzNzc3N2UtNywgMC4wMjk1MDkzMDU5NTM5Nzk0OTIsIC0xLjQ5MTM4NTE0ODcxMDgzMzJlLTddLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRSaW5nMScsXG4gICAgcGFyZW50SW5kZXg6IDEyLFxuICAgIHBvc2l0aW9uOiBbLTAuMDAwNDM5NDExMDg3NDI3Mjg4MywgMC4wOTEwNDUzMjAwMzQwMjcxLCAwLjAxODY1MDgyOTc5MjAyMjcwNV0sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZFJpbmcyJyxcbiAgICBwYXJlbnRJbmRleDogMjIsXG4gICAgcG9zaXRpb246IFstNS42NDU3MDU2ODA3MzQ2MzZlLTksIDAuMDMxNTQwMjE1MDE1NDExMzgsIC04Ljk1NzIyMTA5ODE3MTQzZS04XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kUmluZzMnLFxuICAgIHBhcmVudEluZGV4OiAyMyxcbiAgICBwb3NpdGlvbjogWy00LjgyNDgyODQ2NTY0MzgwNWUtNywgMC4wMjkzNzY3NDUyMjM5OTkwMjMsIDguOTI0MTY4MDcxMTg5MzQyZS04XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgLTMuNTUyNzEzNjc4ODAwNTAxZS0xNSwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kUGlua3kxJyxcbiAgICBwYXJlbnRJbmRleDogMTIsXG4gICAgcG9zaXRpb246IFstMC4wMDQ4ODY2MzQ2NDc4NDYyMjIsIDAuMDgwNzc3ODIzOTI1MDE4MzEsIDAuMDM4MDYwNjY1MTMwNjE1MjM0XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAwLjk5OTk5OTk0MDM5NTM1NTIsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRQaW5reTInLFxuICAgIHBhcmVudEluZGV4OiAyNSxcbiAgICBwb3NpdGlvbjogWy03LjM0MjU5ODUyOTE5MTk0NmUtOSwgMC4wMzYwMDAzMTEzNzQ2NjQzMSwgMi42NzY2Njg0ODY4NTYyMTVlLTddLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRQaW5reTMnLFxuICAgIHBhcmVudEluZGV4OiAyNixcbiAgICBwb3NpdGlvbjogWy03LjM0MjU5ODUyOTE5MTk0NmUtOSwgMC4wMjExNDIxODQ3MzQzNDQ0ODIsIC01LjU0MDM4NTkyNzgxNTgwNWUtMTBdLFxuICAgIHF1YXRlcm5pb246IFs3LjU0MjI1NzY2Mjg2MjUzOWUtNywgLTcuMjQwNTY5MTc1MzM3NDQxZS03LCAtMC4wMDAwMDYwMzM4Mzc1MDc4NTcyNDMsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodFNob3VsZGVyJyxcbiAgICBwYXJlbnRJbmRleDogMyxcbiAgICBwb3NpdGlvbjogWy0wLjA0NTY5OTY5MzI2MjU3NzA2LCAwLjEwOTQ2MTc4NDM2Mjc5Mjk3LCAtMC4wMjYyODAxNjQ3MTg2Mjc5M10sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIDAuNzA3MTA2ODI4Njg5NTc1MiwgMC43MDcxMDY4Mjg2ODk1NzUyXSxcbiAgICBzY2FsZTogWzAuOTk5OTk5ODgwNzkwNzEwNCwgMC45OTk5OTk4ODA3OTA3MTA0LCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0QXJtJyxcbiAgICBwYXJlbnRJbmRleDogMjgsXG4gICAgcG9zaXRpb246IFstMC4wMDUyNDc5NTA1NTM4OTQwNDMsIDAuMTA1OTI4NDUwODIyODMwMiwgLTAuMDIyMzIwOTg1Nzk0MDY3MzgzXSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgLTMuNTUyNzEzNjc4ODAwNTAxZS0xNSwgMV0sXG4gICAgc2NhbGU6IFswLjk5OTk5OTk0MDM5NTM1NTIsIDAuOTk5OTk5OTQwMzk1MzU1MiwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEZvcmVBcm0nLFxuICAgIHBhcmVudEluZGV4OiAyOSxcbiAgICBwb3NpdGlvbjogWy0zLjU3NjI3ODY4NjUyMzQzNzVlLTcsIDAuMjc4NDE1MjAzMDk0NDgyNCwgMS4xNTQ4Mzk5OTI1MjMxOTM0ZS03XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgLTMuNTUyNzEzNjc4ODAwNTAxZS0xNSwgMV0sXG4gICAgc2NhbGU6IFswLjk5OTk5OTk0MDM5NTM1NTIsIDAuOTk5OTk5OTQwMzk1MzU1MiwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmQnLFxuICAgIHBhcmVudEluZGV4OiAzMCxcbiAgICBwb3NpdGlvbjogWzEuMTkyMDkyODk1NTA3ODEyNWUtNywgMC4yODMyODgzMjk4Mzk3MDY0LCA1LjYyNTE4ODM1MDY3NzQ5ZS03XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgLTMuNTUyNzEzNjc4ODAwNTAxZS0xNSwgMV0sXG4gICAgc2NhbGU6IFswLjk5OTk5OTk0MDM5NTM1NTIsIDAuOTk5OTk5OTQwMzk1MzU1MiwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRQaW5reTEnLFxuICAgIHBhcmVudEluZGV4OiAzMSxcbiAgICBwb3NpdGlvbjogWy0wLjAwNDg4NDQ4MTQzMDA1MzcxMSwgMC4wODA3NjY4NDkyMTk3OTkwNCwgLTAuMDM4MDYwMDk1MTYxMTk5NTddLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAtMy41NTI3MTM2Nzg4MDA1MDFlLTE1LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kUGlua3kyJyxcbiAgICBwYXJlbnRJbmRleDogMzIsXG4gICAgcG9zaXRpb246IFsxLjE5MjA5Mjg5NTUwNzgxMjVlLTcsIDAuMDM2MDAwNDIzMTMzMzczMjYsIDUuMTQwOTAwNjExODc3NDQxZS03XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZFBpbmt5MycsXG4gICAgcGFyZW50SW5kZXg6IDMzLFxuICAgIHBvc2l0aW9uOiBbMS4xOTIwOTI4OTU1MDc4MTI1ZS03LCAwLjAyMTE0MjE3NzI4Mzc2Mzg4NSwgMS41NjQ2MjE5MjUzNTQwMDRlLTddLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kUmluZzEnLFxuICAgIHBhcmVudEluZGV4OiAzMSxcbiAgICBwb3NpdGlvbjogWy0wLjAwMDQzOTA0NzgxMzQxNTUyNzM0LCAwLjA5MTAzNTk1NDY1NDIxNjc3LCAtMC4wMTg2NTA3NDQxMTAzNDU4NF0sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIC0zLjU1MjcxMzY3ODgwMDUwMWUtMTUsIDFdLFxuICAgIHNjYWxlOiBbMC45OTk5OTk5NDAzOTUzNTUyLCAwLjk5OTk5OTk0MDM5NTM1NTIsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kUmluZzInLFxuICAgIHBhcmVudEluZGV4OiAzNSxcbiAgICBwb3NpdGlvbjogWzUuOTYwNDY0NDc3NTM5MDYyZS03LCAwLjAzMTU0MDIwNzU2NDgzMDc4LCA0Ljk5MTg4ODk5OTkzODk2NWUtN10sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIC0zLjU1MjcxMzY3ODgwMDUwMWUtMTUsIDFdLFxuICAgIHNjYWxlOiBbMC45OTk5OTk5NDAzOTUzNTUyLCAwLjk5OTk5OTk0MDM5NTM1NTIsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kUmluZzMnLFxuICAgIHBhcmVudEluZGV4OiAzNixcbiAgICBwb3NpdGlvbjogWy0zLjU3NjI3ODY4NjUyMzQzNzVlLTcsIDAuMDI5Mzc2Nzk5MjQwNzA4MzUsIC0zLjk0ODgwNzcxNjM2OTYyOWUtN10sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIC0zLjU1MjcxMzY3ODgwMDUwMWUtMTUsIDFdLFxuICAgIHNjYWxlOiBbMC45OTk5OTk5NDAzOTUzNTUyLCAwLjk5OTk5OTk0MDM5NTM1NTIsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kTWlkZGxlMScsXG4gICAgcGFyZW50SW5kZXg6IDMxLFxuICAgIHBvc2l0aW9uOiBbMCwgMC4wOTUzMjUyMjQxMDE1NDM0MywgMS40OTAxMTYxMTkzODQ3NjU2ZS03XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgLTMuNTUyNzEzNjc4ODAwNTAxZS0xNSwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZE1pZGRsZTInLFxuICAgIHBhcmVudEluZGV4OiAzOCxcbiAgICBwb3NpdGlvbjogWy0xLjE5MjA5Mjg5NTUwNzgxMjVlLTcsIDAuMDM2OTgyMzUwMDUxNDAzMDQ2LCAtMi4wNDg5MDk2NjQxNTQwNTI3ZS03XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZE1pZGRsZTMnLFxuICAgIHBhcmVudEluZGV4OiAzOSxcbiAgICBwb3NpdGlvbjogWy0xLjE5MjA5Mjg5NTUwNzgxMjVlLTcsIDAuMDI5NTA5MjQwNzYxMzk5MjcsIDMuNzI1MzEwMjgyNDc2MzU3ZS05XSxcbiAgICBxdWF0ZXJuaW9uOiBbLTguNDcwMzI5NDcyNTQzMDAzZS0yMiwgOC40MTMwODg4OTIyMTE4MTdlLTgsIDYuMDE4NTMxMDc2MjEwMTEyZS0zNiwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZEluZGV4MScsXG4gICAgcGFyZW50SW5kZXg6IDMxLFxuICAgIHBvc2l0aW9uOiBbLTAuMDA1MTY3NzIyNzAyMDI2MzY3LCAwLjA5MTA4Mjk4MjcxODk0NDU1LCAwLjAyMjYwMTE1NTU2NDE4ODk1N10sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIC0zLjU1MjcxMzY3ODgwMDUwMWUtMTUsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRJbmRleDInLFxuICAgIHBhcmVudEluZGV4OiA0MSxcbiAgICBwb3NpdGlvbjogWy0xLjE5MjA5Mjg5NTUwNzgxMjVlLTcsIDAuMDM2NzY0MDc3ODQyMjM1NTY1LCAzLjI3ODI1NTQ2MjY0NjQ4NDRlLTddLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAwLCAxXSxcbiAgICBzY2FsZTogWzAuOTk5OTk5OTQwMzk1MzU1MiwgMC45OTk5OTk4ODA3OTA3MTA0LCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZEluZGV4MycsXG4gICAgcGFyZW50SW5kZXg6IDQyLFxuICAgIHBvc2l0aW9uOiBbLTUuOTYwNDY0NDc3NTM5MDYyZS03LCAwLjAyODgzMDY5OTYyMjYzMTA3MywgMy44NzQzMDE5MTA0MDAzOTA2ZS03XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgLTMuNTUyNzEzNjc4ODAwNTAxZS0xNSwgMV0sXG4gICAgc2NhbGU6IFswLjk5OTk5OTk0MDM5NTM1NTIsIDAuOTk5OTk5OTQwMzk1MzU1MiwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRUaHVtYjEnLFxuICAgIHBhcmVudEluZGV4OiAzMSxcbiAgICBwb3NpdGlvbjogWy0wLjAxNTcyNjkyMzk0MjU2NTkxOCwgMC4wMjQ2NDgxMjI0ODk0NTIzNjIsIDAuMDI2ODI2MjU4NzQ4NzY5NzZdLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAtMy41NTI3MTM2Nzg4MDA1MDFlLTE1LCAxXSxcbiAgICBzY2FsZTogWzAuOTk5OTk5OTQwMzk1MzU1MiwgMC45OTk5OTk5NDAzOTUzNTUyLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZFRodW1iMicsXG4gICAgcGFyZW50SW5kZXg6IDQ0LFxuICAgIHBvc2l0aW9uOiBbLTAuMDE4NjQ3MDc0Njk5NDAxODU1LCAwLjAzMjI5Nzc3ODg3NDYzNTY5NiwgMC4wMTg2NDcxNjIyNDM3MjM4N10sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIC0zLjU1MjcxMzY3ODgwMDUwMWUtMTUsIDFdLFxuICAgIHNjYWxlOiBbMC45OTk5OTk5NDAzOTUzNTUyLCAwLjk5OTk5OTk0MDM5NTM1NTIsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kVGh1bWIzJyxcbiAgICBwYXJlbnRJbmRleDogNDUsXG4gICAgcG9zaXRpb246IFstMC4wMTUzMTQyMjEzODIxNDExMTMsIDAuMDI2NTI2MDIwODM5ODEwMzcsIDAuMDE1MzE0NDU5ODAwNzIwMjE1XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgLTMuNTUyNzEzNjc4ODAwNTAxZS0xNSwgMV0sXG4gICAgc2NhbGU6IFswLjk5OTk5OTk0MDM5NTM1NTIsIDAuOTk5OTk5OTQwMzk1MzU1MiwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0VXBMZWcnLFxuICAgIHBhcmVudEluZGV4OiAwLFxuICAgIHBvc2l0aW9uOiBbMC4wODIwNzc4MTYxMjg3MzA3NywgLTAuMDY3NTE3MjIwOTczOTY4NSwgLTAuMDE1OTk1NTYyMDc2NTY4NjA0XSxcbiAgICBxdWF0ZXJuaW9uOiBbLTEsIDAsIC03LjU0OTc5MDEyNjQwNDMzMmUtOCwgMS4zNDMzMTI3MzIxNjA0ODQzZS03XSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdExlZycsXG4gICAgcGFyZW50SW5kZXg6IDQ3LFxuICAgIHBvc2l0aW9uOiBbLTUuNjQ2MjcwMTE4MTIwMzU2ZS05LCAwLjQ0MzcwNDY2NDcwNzE4Mzg0LCAtMC4wMDI4NDY0MTg0MTQyNjQ5MTc0XSxcbiAgICBxdWF0ZXJuaW9uOiBbLTEuMzQzODIxNjIyODY3ODM1N2UtNywgLTMuMTc4NjUwOTQyNDU5MTcxM2UtOCwgLTUuNzAxNzUyNzMzMDE0OTA4ZS0xNSwgMV0sXG4gICAgc2NhbGU6IFsxLCAwLjk5OTk5OTk0MDM5NTM1NTIsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEZvb3QnLFxuICAgIHBhcmVudEluZGV4OiA0OCxcbiAgICBwb3NpdGlvbjogWzUuODg4MTIzNzY2MzM5OTU5ZS05LCAwLjQ0NDI3ODcxNzA0MTAxNTYsIDAuMDI5ODIxOTAyNTEzNTA0MDNdLFxuICAgIHF1YXRlcm5pb246IFstMC43MDcxMDY4Mjg2ODk1NzUyLCAtMy4wOTA4NjI2NzY5MTMyNzVlLTgsIC0zLjA5MDg2MjMyMTY0MTkwN2UtOCwgMC43MDcxMDY4Mjg2ODk1NzUyXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdFRvZUJhc2UnLFxuICAgIHBhcmVudEluZGV4OiA0OSxcbiAgICBwb3NpdGlvbjogWy0yLjk4MDIzMjIzODc2OTUzMTJlLTgsIDAuMTA3MTA1NTgyOTUyNDk5MzksIDAuMDg3Mjg2NzE4MTg5NzE2MzRdLFxuICAgIHF1YXRlcm5pb246IFswLCAzLjU1MjcxNDUyNTgzMzQ0OGUtMTUsIDYuMTYyOTc1ODIyMDM5MTU1ZS0zMywgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0VXBMZWcnLFxuICAgIHBhcmVudEluZGV4OiAwLFxuICAgIHBvc2l0aW9uOiBbLTAuMDgyMDc3OTU3Njg5NzYyMTIsIC0wLjA2NzUxNjYyNDkyNzUyMDc1LCAtMC4wMTU5OTU2MjE2ODEyMTMzOF0sXG4gICAgcXVhdGVybmlvbjogWzEsIDAsIDcuNTQ5NzkwMTI2NDA0MzMyZS04LCAwXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRMZWcnLFxuICAgIHBhcmVudEluZGV4OiA1MSxcbiAgICBwb3NpdGlvbjogWzEuODA2NjE2MzAxMDAzMzE2NWUtOSwgMC40NDM3MDUzNzk5NjI5MjExNCwgLTAuMDAyODYxNTU5NjIzODUyMzcyXSxcbiAgICBxdWF0ZXJuaW9uOiBbNi42OTI5Njg2NjgxNzYwMzZlLTgsIC0zLjE3ODY1MTI5NzczMDUzOWUtOCwgNy45NzA1MDU0OTQ3NjM2MDhlLTE1LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRGb290JyxcbiAgICBwYXJlbnRJbmRleDogNTIsXG4gICAgcG9zaXRpb246IFs1Ljg4ODA0OTYwMzQ0MTkxNGUtOSwgMC40NDQyNzcyODY1Mjk1NDEsIDAuMDI5ODM3ODc2NTU4MzAzODMzXSxcbiAgICBxdWF0ZXJuaW9uOiBbLTAuNzA3MTA2NzA5NDgwMjg1NiwgLTMuMDkwODYxOTY2MzcwNTM5NGUtOCwgLTMuMDkwODYxOTY2MzcwNTM5NGUtOCwgMC43MDcxMDY4Mjg2ODk1NzUyXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRUb2VCYXNlJyxcbiAgICBwYXJlbnRJbmRleDogNTMsXG4gICAgcG9zaXRpb246IFstMS40OTAxMTYxMTkzODQ3NjU2ZS04LCAwLjEwNzEwNTY2NDkwODg4NTk2LCAwLjA4NzI4NjY1ODU4NTA3MTU2XSxcbiAgICBxdWF0ZXJuaW9uOiBbNC4wMTUxMzQ4OTEyMzMxNzRlLTgsIC01LjIxMDgwMzU0Mjk0MDM3ZS0xNSwgLTEuMTkzMDg0MzQwMjE3ODAzOGUtMjIsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfVxuXVxuIiwiaW1wb3J0IHsgU2tpbm5lZE1lc2ggfSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IGNyZWF0ZU1hcHBlZENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2Vjcy9mdW5jdGlvbnMvQ29tcG9uZW50RnVuY3Rpb25zJ1xuXG50eXBlIElLT2JqVHlwZSA9IHtcbiAgcmVmOiBTa2lubmVkTWVzaFxufVxuXG5leHBvcnQgY29uc3QgSUtPYmogPSBjcmVhdGVNYXBwZWRDb21wb25lbnQ8SUtPYmpUeXBlPignSUtPYmonKVxuIiwiLy8gQ09OU1RBTlRTXG5cbmltcG9ydCB7IFZlY3RvcjMgfSBmcm9tICd0aHJlZSdcblxuZXhwb3J0IGNvbnN0IFVQID0gbmV3IFZlY3RvcjMoMCwgMSwgMClcbmV4cG9ydCBjb25zdCBET1dOID0gbmV3IFZlY3RvcjMoMCwgLTEsIDApXG5leHBvcnQgY29uc3QgTEVGVCA9IG5ldyBWZWN0b3IzKDEsIDAsIDApXG5leHBvcnQgY29uc3QgUklHSFQgPSBuZXcgVmVjdG9yMygtMSwgMCwgMClcbmV4cG9ydCBjb25zdCBGT1JXQVJEID0gbmV3IFZlY3RvcjMoMCwgMCwgMSlcbmV4cG9ydCBjb25zdCBCQUNLID0gbmV3IFZlY3RvcjMoMCwgMCwgLTEpXG5leHBvcnQgY29uc3QgWkVSTyA9IG5ldyBWZWN0b3IzKDAsIDAsIDApXG4iLCJpbXBvcnQgeyBCb25lLCBRdWF0ZXJuaW9uLCBWZWN0b3IzIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgUG9zZSwgeyBQb3NlQm9uZUxvY2FsU3RhdGUgfSBmcm9tICcuL1Bvc2UnXG5pbXBvcnQgeyBGT1JXQVJELCBVUCB9IGZyb20gJy4uL2NvbnN0YW50cy9WZWN0b3IzQ29uc3RhbnRzJ1xuaW1wb3J0IHsgSUtTb2x2ZXJGdW5jdGlvbiB9IGZyb20gJy4uL2Z1bmN0aW9ucy9JS1NvbHZlcnMnXG5cbnR5cGUgQ2hhaW5Cb25lRGF0YSA9IHsgaW5kZXg6IG51bWJlcjsgcmVmOiBCb25lOyBsZW5ndGg6IG51bWJlciB9XG5cbmNvbnN0IGJvbmVXb3JsZFBvc2l0aW9uID0gbmV3IFZlY3RvcjMoKSxcbiAgY2hpbGRXb3JsZFBvc2l0aW9uID0gbmV3IFZlY3RvcjMoKVxuZXhwb3J0IGNsYXNzIENoYWluIHtcbiAgZW5kX2lkeDogbnVtYmVyIHwgbnVsbFxuICBjaGFpbkJvbmVzOiBDaGFpbkJvbmVEYXRhW11cbiAgbGVuZ3RoOiBudW1iZXJcbiAgY250OiBudW1iZXJcbiAgYWx0Rm9yd2FyZDogVmVjdG9yM1xuICBhbHRVcDogVmVjdG9yM1xuICBpa1NvbHZlcjogSUtTb2x2ZXJGdW5jdGlvblxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY2hhaW5Cb25lcyA9IFtdIC8vIEluZGV4IHRvIGEgYm9uZSBpbiBhbiBhcm1hdHVyZSAvIHBvc2VcbiAgICB0aGlzLmxlbmd0aCA9IDAgLy8gQ2hhaW4gTGVuZ3RoXG4gICAgdGhpcy5jbnQgPSAwIC8vIEhvdyBtYW55IEJvbmVzIGluIHRoZSBjaGFpblxuXG4gICAgLy90aGlzLmFsaWduX2F4aXNcdD0gYXhpcztcdFx0XHQvLyBDaGFpbiBpcyBhbGlnbmVkIHRvIHdoaWNoIGF4aXNcbiAgICB0aGlzLmVuZF9pZHggPSBudWxsIC8vIEpvaW50IHRoYXQgTWFya3MgdGhlIHRydWUgZW5kIG9mIHRoZSBjaGFpblxuXG4gICAgdGhpcy5hbHRGb3J3YXJkID0gRk9SV0FSRC5jbG9uZSgpXG4gICAgdGhpcy5hbHRVcCA9IFVQLmNsb25lKClcbiAgfVxuXG4gIC8vIEdldCBTa2VsZXRvbiBJbmRleCBvZiBCb25lc1xuICBmaXJzdCgpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpbkJvbmVzWzBdLmluZGV4XG4gIH1cbiAgbGFzdCgpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpbkJvbmVzW3RoaXMuY250IC0gMV0uaW5kZXhcbiAgfVxuICBpbmRleChpKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hhaW5Cb25lc1tpXS5pbmRleFxuICB9XG5cbiAgc2V0T2Zmc2V0cyhmd2Q6IFZlY3RvcjMsIHVwOiBWZWN0b3IzLCB0cG9zZTogUG9zZSkge1xuICAgIC8vIE9SSUdJTkFMIENPREVcbiAgICAvLyBcdGxldCBiID0gdHBvc2UuYm9uZXNbIHRoaXMuYm9uZXNbIDAgXS5pZHggXSxcbiAgICAvLyBcdHEgPSBRdWF0LmludmVydCggYi53b3JsZC5yb3QgKTtcdC8vIEludmVydCBXb3JsZCBTcGFjZSBSb3RhdGlvblxuXG4gICAgLy8gdGhpcy5hbHRfZndkLmZyb21fcXVhdCggcSwgZndkICk7XHQvLyBVc2UgaW52ZXJ0IHRvIGdldCBkaXJlY3Rpb24gdGhhdCB3aWxsIFJlY3JlYXRlIHRoZSByZWFsIGRpcmVjdGlvblxuICAgIC8vIHRoaXMuYWx0X3VwLmZyb21fcXVhdCggcSwgdXAgKTtcbiAgICBjb25zdCBiID0gdHBvc2UuYm9uZXNbdGhpcy5jaGFpbkJvbmVzWzBdLmluZGV4XVxuXG4gICAgY29uc3QgcSA9IGIud29ybGQucXVhdGVybmlvbi5jbG9uZSgpLmludmVydCgpIC8vIEludmVydCBXb3JsZCBTcGFjZSBSb3RhdGlvblxuICAgIHRoaXMuYWx0Rm9yd2FyZCA9IG5ldyBWZWN0b3IzKCkuY29weShmd2QpLmFwcGx5UXVhdGVybmlvbihxKS5ub3JtYWxpemUoKSAvLyBVc2UgaW52ZXJ0IHRvIGdldCBkaXJlY3Rpb24gdGhhdCB3aWxsIFJlY3JlYXRlIHRoZSByZWFsIGRpcmVjdGlvblxuICAgIHRoaXMuYWx0VXAgPSBuZXcgVmVjdG9yMygpLmNvcHkodXApLmFwcGx5UXVhdGVybmlvbihxKS5ub3JtYWxpemUoKVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIGNvbXB1dGVMZW5ndGhGcm9tQm9uZXMoYm9uZXM6IFBvc2VCb25lTG9jYWxTdGF0ZVtdKSB7XG4gICAgLy8gUmVjb21wdXRlIHRoZSBMZW5ndGggb2YgdGhlIGJvbmVzIGZvciBlYWNoIGNoYWluLiBNb3N0IG9mdGVuIHRoaXNcbiAgICAvLyBpcyBhIHJlc3VsdCBvZiBzY2FsZSBiZWluZyBhcHBsaWVkIHRvIHRoZSBhcm1hdHVyZSBvYmplY3QgdGhhdCBjYW5cbiAgICAvLyBvbmx5IGJlIGNvbXB1dGVkIGFmdGVyIHRoZSByaWcgaXMgc2V0dXBcblxuICAgIGNvbnN0IGVuZCA9IHRoaXMuY250IC0gMVxuICAgIGxldCBzdW0gPSAwLFxuICAgICAgYmQ6IENoYWluQm9uZURhdGEsXG4gICAgICBiczogUG9zZUJvbmVMb2NhbFN0YXRlLFxuICAgICAgaTogbnVtYmVyXG5cbiAgICAvLyBMb29wIEV2ZXJ5IEJvbmUgRXhjZXB0IExhc3Qgb25lXG4gICAgZm9yIChpID0gMDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICBicyA9IGJvbmVzW3RoaXMuY2hhaW5Cb25lc1tpXS5pbmRleF1cblxuICAgICAgYm9uZVdvcmxkUG9zaXRpb24uY29weShib25lc1t0aGlzLmNoYWluQm9uZXNbaV0uaW5kZXhdLndvcmxkLnBvc2l0aW9uKVxuICAgICAgY2hpbGRXb3JsZFBvc2l0aW9uLmNvcHkoYm9uZXNbdGhpcy5jaGFpbkJvbmVzW2kgKyAxXS5pbmRleF0ud29ybGQucG9zaXRpb24pXG4gICAgICAvL3RoaXMuY2hhaW5Cb25lc1tpICsgMV0ucmVmLmdldFdvcmxkUG9zaXRpb24oY2hpbGRXb3JsZFBvc2l0aW9uKVxuXG4gICAgICBicy5sZW5ndGggPSBib25lV29ybGRQb3NpdGlvbi5kaXN0YW5jZVRvKGNoaWxkV29ybGRQb3NpdGlvbilcbiAgICAgIHRoaXMuY2hhaW5Cb25lc1tpXS5sZW5ndGggPSBicy5sZW5ndGhcblxuICAgICAgc3VtICs9IGJzLmxlbmd0aFxuICAgIH1cblxuICAgIC8vIElmIEVuZCBQb2ludCBleGlzdHMsIENhbiBjYWxjdWxhdGUgdGhlIGZpbmFsIGJvbmUncyBsZW5ndGhcbiAgICBpZiAodGhpcy5lbmRfaWR4ICE9PSBudWxsICYmIHRoaXMuZW5kX2lkeCA+IC0xKSB7XG4gICAgICBiZCA9IHRoaXMuY2hhaW5Cb25lc1tlbmRdXG4gICAgICBiZC5sZW5ndGggPSBib25lc1t0aGlzLmVuZF9pZHhdLndvcmxkLnBvc2l0aW9uLmRpc3RhbmNlVG8oYm9uZXNbdGhpcy5jaGFpbkJvbmVzW2VuZF0uaW5kZXhdLndvcmxkLnBvc2l0aW9uKVxuICAgICAgYm9uZXNbdGhpcy5jaGFpbkJvbmVzW2VuZF0uaW5kZXhdLmxlbmd0aCA9IGJkLmxlbmd0aFxuICAgICAgc3VtICs9IGJkLmxlbmd0aFxuICAgIH0gZWxzZSBjb25zb2xlLndhcm4oJ1JlY29tcHV0ZSBDaGFpbiBMZW4sIEVuZCBJbmRleCBpcyBtaXNzaW5nJylcblxuICAgIHRoaXMubGVuZ3RoID0gc3VtXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlTWFwcGVkQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vZWNzL2Z1bmN0aW9ucy9Db21wb25lbnRGdW5jdGlvbnMnXG5pbXBvcnQgUG9zZSBmcm9tICcuLi9jbGFzc2VzL1Bvc2UnXG5pbXBvcnQgeyBDaGFpbiB9IGZyb20gJy4uL2NsYXNzZXMvQ2hhaW4nXG5cbmV4cG9ydCB0eXBlIFBvaW50RGF0YSA9IHsgaW5kZXg6IG51bWJlciB9XG5cbmV4cG9ydCB0eXBlIElLUmlnQ29tcG9uZW50VHlwZSA9IHtcbiAgdHBvc2U/OiBQb3NlIC8vIFN0YXJ0aW5nIHBvc2UgdG8gY2FsY3VsYXRlIHZhbHVlcyBmcm9tXG4gIHBvc2U/OiBQb3NlIC8vIFdvcmtpbmcgcG9zZSB0byBhcHBseSBtYXRoIHRvIGFuZCBjb3B5IGJhY2sgdG8gYm9uZXNcbiAgY2hhaW5zPzogUmVjb3JkPHN0cmluZywgQ2hhaW4+IC8vIElLIENoYWluc1xuICBwb2ludHM/OiBSZWNvcmQ8c3RyaW5nLCBQb2ludERhdGE+IC8vIEluZGl2aWR1YWwgSUsgcG9pbnRzIChoYW5kcywgaGVhZCwgZmVldClcbn1cblxuZXhwb3J0IGNvbnN0IElLUmlnQ29tcG9uZW50ID0gY3JlYXRlTWFwcGVkQ29tcG9uZW50PElLUmlnQ29tcG9uZW50VHlwZT4oJ0lLUmlnQ29tcG9uZW50JylcbmV4cG9ydCBjb25zdCBJS1JpZ1RhcmdldENvbXBvbmVudCA9IGNyZWF0ZU1hcHBlZENvbXBvbmVudDxJS1JpZ0NvbXBvbmVudFR5cGU+KCdJS1JpZ1RhcmdldENvbXBvbmVudCcpXG4iLCJleHBvcnQgZW51bSBBcm1hdHVyZVR5cGUge1xuICBNSVhBTU8sXG4gIFRSRVhcbn1cbiIsImltcG9ydCB7IENoYWluIH0gZnJvbSAnLi4vY2xhc3Nlcy9DaGFpbidcbmltcG9ydCBQb3NlLCB7IFBvc2VCb25lVHJhbnNmb3JtIH0gZnJvbSAnLi4vY2xhc3Nlcy9Qb3NlJ1xuaW1wb3J0IHsgUXVhdGVybmlvbiwgVmVjdG9yMyB9IGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgQXhpcyB9IGZyb20gJy4uL2NsYXNzZXMvQXhpcydcbmltcG9ydCB7IGNvc1NTUyB9IGZyb20gJy4vSUtGdW5jdGlvbnMnXG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIE11bHRpIEJvbmUgU29sdmVyc1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5leHBvcnQgdHlwZSBJS1NvbHZlckZ1bmN0aW9uID0gKFxuICBjaGFpbjogQ2hhaW4sXG4gIHRwb3NlOiBQb3NlLFxuICBwb3NlOiBQb3NlLFxuICBheGlzOiBBeGlzLFxuICBjTGVuOiBudW1iZXIsXG4gIHBfd3Q6IFBvc2VCb25lVHJhbnNmb3JtXG4pID0+IHZvaWRcblxuY29uc3QgdGVtcFF1YXQxID0gbmV3IFF1YXRlcm5pb24oKVxuY29uc3QgdGVtcFF1YXQyID0gbmV3IFF1YXRlcm5pb24oKVxuY29uc3QgdGVtcFF1YXQzID0gbmV3IFF1YXRlcm5pb24oKVxuY29uc3QgdGVtcFZlYzEgPSBuZXcgVmVjdG9yMygpXG5cbi8qKlxuICpcbiAqIEBwYXJhbSBjaGFpblxuICogQHBhcmFtIHRwb3NlXG4gKiBAcGFyYW0gcG9zZVxuICogQHBhcmFtIGF4aXMgSUtQb3NlLnRhcmdldC5heGlzXG4gKiBAcGFyYW0gY0xlbiBJS1Bvc2UudGFyZ2V0LmxlblxuICogQHBhcmFtIHBfd3QgcGFyZW50IHdvcmxkIHRyYW5zZm9ybVxuICovXG5leHBvcnQgZnVuY3Rpb24gc29sdmVMaW1iKGNoYWluOiBDaGFpbiwgdHBvc2U6IFBvc2UsIHBvc2U6IFBvc2UsIGF4aXM6IEF4aXMsIGNMZW46IG51bWJlciwgcF93dDogUG9zZUJvbmVUcmFuc2Zvcm0pIHtcbiAgLy9+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flxuICAvLyBVc2luZyBsYXcgb2YgY29zIFNTUywgd2UgbmVlZCB0aGUgbGVuZ3RoIG9mIGFsbCBzaWRlcyBvZiB0aGUgdHJpYW5nbGVcbiAgbGV0IGJpbmRBID0gdHBvc2UuYm9uZXNbY2hhaW4uY2hhaW5Cb25lc1swXS5pbmRleF0sIC8vIEJvbmUgUmVmZXJlbmNlIGZyb20gQmluZFxuICAgIGJpbmRCID0gdHBvc2UuYm9uZXNbY2hhaW4uY2hhaW5Cb25lc1sxXS5pbmRleF0sXG4gICAgcG9zZUEgPSBwb3NlLmJvbmVzW2NoYWluLmNoYWluQm9uZXNbMF0uaW5kZXhdLCAvLyBCb25lIFJlZmVyZW5jZSBmcm9tIFBvc2VcbiAgICBwb3NlQiA9IHBvc2UuYm9uZXNbY2hhaW4uY2hhaW5Cb25lc1sxXS5pbmRleF0sXG4gICAgYUxlbiA9IGJpbmRBLmxlbmd0aCxcbiAgICBiTGVuID0gYmluZEIubGVuZ3RoLFxuICAgIHJvdCA9IHRlbXBRdWF0MSxcbiAgICByYWQ6IG51bWJlclxuXG4gIC8vfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5cbiAgLy8gRklSU1QgQk9ORSAtIEFpbSB0aGVuIHJvdGF0ZSBieSB0aGUgYW5nbGUuXG4gIF9haW1fYm9uZTIoY2hhaW4sIHRwb3NlLCBheGlzLCBwX3d0LCByb3QpIC8vIEFpbSB0aGUgZmlyc3QgYm9uZSB0b3dhcmQgdGhlIHRhcmdldCBvcmllbnRlZCB3aXRoIHRoZSBiZW5kIGRpcmVjdGlvbi5cblxuICBjb25zdCByb3RBZnRlckFpbSA9IHRlbXBRdWF0Mi5jb3B5KHJvdClcbiAgY29uc3QgYWNiTGVuID0geyBhTGVuLCBjTGVuLCBiTGVuIH1cblxuICByYWQgPSBjb3NTU1MoYUxlbiwgY0xlbiwgYkxlbikgLy8gR2V0IHRoZSBBbmdsZSBiZXR3ZWVuIEZpcnN0IEJvbmUgYW5kIFRhcmdldC5cblxuICBjb25zdCBmaXJzdFJhZCA9IHJhZFxuXG4gIHJvdFxuICAgIC5wcmVtdWx0aXBseSh0ZW1wUXVhdDMuc2V0RnJvbUF4aXNBbmdsZShheGlzLngsIC1yYWQpKSAvLyBVc2UgdGhlIFRhcmdldCdzIFggYXhpcyBmb3Igcm90YXRpb24gYWxvbmcgd2l0aCB0aGUgYW5nbGUgZnJvbSBTU1NcbiAgICAucHJlbXVsdGlwbHkodGVtcFF1YXQzLmNvcHkocF93dC5xdWF0ZXJuaW9uKS5pbnZlcnQoKSkgLy8gQ29udmVydCB0byBCb25lJ3MgTG9jYWwgU3BhY2UgYnkgbXVsIGludmVydCBvZiBwYXJlbnQgYm9uZSByb3RhdGlvblxuXG4gIHBvc2Uuc2V0Qm9uZShiaW5kQS5pZHgsIHJvdCkgLy8gU2F2ZSByZXN1bHQgdG8gYm9uZS5cbiAgLy8gVXBkYXRlIFdvcmxkIERhdGEgZm9yIGZ1dHVyZSB1c2VcblxuICBwb3NlQS53b3JsZC5wb3NpdGlvbi5jb3B5KHBfd3QucG9zaXRpb24pXG4gIHBvc2VBLndvcmxkLnF1YXRlcm5pb24uY29weShwX3d0LnF1YXRlcm5pb24pXG4gIHBvc2VBLndvcmxkLnNjYWxlLmNvcHkocF93dC5zY2FsZSlcbiAgdHJhbnNmb3JtQWRkKFxuICAgIC8vIHRyYW5zZm9ybVxuICAgIHBvc2VBLndvcmxkLFxuICAgIC8vIGFkZFxuICAgIHtcbiAgICAgIHF1YXRlcm5pb246IHJvdCxcbiAgICAgIHBvc2l0aW9uOiBiaW5kQS5sb2NhbC5wb3NpdGlvbixcbiAgICAgIHNjYWxlOiBiaW5kQS5sb2NhbC5zY2FsZVxuICAgIH1cbiAgKVxuXG4gIC8vfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5cbiAgLy8gU0VDT05EIEJPTkVcbiAgLy8gTmVlZCB0byByb3RhdGUgZnJvbSBSaWdodCB0byBMZWZ0LCBTbyB0YWtlIHRoZSBhbmdsZSBhbmQgc3VidHJhY3QgaXQgZnJvbSAxODAgdG8gcm90YXRlIGZyb21cbiAgLy8gdGhlIG90aGVyIGRpcmVjdGlvbi4gRXguIEwtPlIgNzAgZGVncmVlcyA9PSBSLT5MIDExMCBkZWdyZWVzXG4gIHJhZCA9IE1hdGguUEkgLSBjb3NTU1MoYUxlbiwgYkxlbiwgY0xlbilcblxuICByb3RcbiAgICAuY29weShwb3NlQS53b3JsZC5xdWF0ZXJuaW9uKVxuICAgIC5tdWx0aXBseShiaW5kQi5sb2NhbC5xdWF0ZXJuaW9uKSAvLyBBZGQgQm9uZSAyJ3MgTG9jYWwgQmluZCBSb3RhdGlvbiB0byBCb25lIDEncyBuZXcgV29ybGQgUm90YXRpb24uXG4gICAgLnByZW11bHRpcGx5KHRlbXBRdWF0My5zZXRGcm9tQXhpc0FuZ2xlKGF4aXMueCwgcmFkKSkgLy8gUm90YXRlIGl0IGJ5IHRoZSB0YXJnZXQncyB4LWF4aXNcbiAgICAucHJlbXVsdGlwbHkodGVtcFF1YXQzLmNvcHkocG9zZUEud29ybGQucXVhdGVybmlvbikuaW52ZXJ0KCkpIC8vIENvbnZlcnQgdG8gQm9uZSdzIExvY2FsIFNwYWNlXG5cbiAgcG9zZS5zZXRCb25lKGJpbmRCLmlkeCwgcm90KSAvLyBTYXZlIHJlc3VsdCB0byBib25lLlxuXG4gIC8vIFVwZGF0ZSBXb3JsZCBEYXRhIGZvciBmdXR1cmUgdXNlXG4gIHBvc2VCLndvcmxkLnBvc2l0aW9uLmNvcHkocG9zZUEud29ybGQucG9zaXRpb24pXG4gIHBvc2VCLndvcmxkLnF1YXRlcm5pb24uY29weShwb3NlQS53b3JsZC5xdWF0ZXJuaW9uKVxuICBwb3NlQi53b3JsZC5zY2FsZS5jb3B5KHBvc2VBLndvcmxkLnNjYWxlKVxuICB0cmFuc2Zvcm1BZGQoXG4gICAgLy8gdHJhbnNmb3JtXG4gICAgcG9zZUIud29ybGQsXG4gICAgLy8gYWRkXG4gICAge1xuICAgICAgcXVhdGVybmlvbjogcm90LFxuICAgICAgcG9zaXRpb246IGJpbmRCLmxvY2FsLnBvc2l0aW9uLFxuICAgICAgc2NhbGU6IGJpbmRCLmxvY2FsLnNjYWxlXG4gICAgfVxuICApXG5cbiAgLy8gVE9ETzogQmVjYXVzZSBvZiB0aGUgcXVhdGVybmlvbiBvYmplY3QgcHJvcCwgaXQgaXMgYmV0dGVyIHRvXG4gIC8vIEFjY2VwdCBhbiBvdXRwdXQgb2JqZWN0IHBhcmFtZXRlciBpbnN0ZWFkIG9mIHJldHVybmluZyBuZXcgb2JqZWN0XG4gIC8vIGFuZCBwdXNoIHRoZSBvYmplY3QgY29uc3RydWN0aW9uIHVwIHRoZSBjaGFpblxuICByZXR1cm4ge1xuICAgIHJvdEFmdGVyQWltLFxuICAgIGFjYkxlbixcbiAgICBmaXJzdFJhZFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzb2x2ZVRocmVlQm9uZShcbiAgY2hhaW46IENoYWluLFxuICB0cG9zZTogUG9zZSxcbiAgcG9zZTogUG9zZSxcbiAgYXhpczogQXhpcyxcbiAgY0xlbjogbnVtYmVyLFxuICBwX3d0OiBQb3NlQm9uZVRyYW5zZm9ybVxuKSB7XG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIEdldCB0aGUgbGVuZ3RoIG9mIHRoZSBib25lcywgdGhlIGNhbGN1bGF0ZSB0aGUgcmF0aW8gbGVuZ3RoIGZvciB0aGUgYm9uZXMgYmFzZWQgb24gdGhlIGNoYWluIGxlbmd0aFxuICAvLyBUaGUgMyBib25lcyB3aGVuIHBsYWNlZCBpbiBhIHppZy16YWcgcGF0dGVybiBjcmVhdGVzIGEgUGFyYWxsZWxvZ3JhbSBzaGFwZS4gV2UgY2FuIGJyZWFrIHRoZSBzaGFwZSBkb3duIGludG8gdHdvIHRyaWFuZ2xlc1xuICAvLyBCeSB1c2luZyB0aGUgcmF0aW8gb2YgdGhlIFRhcmdldCBsZW5ndGggZGl2aWRlZCBiZXR3ZWVuIHRoZSAyIHRyaWFuZ2xlcywgdGhlbiB1c2luZyB0aGUgZmlyc3QgYm9uZSArIGhhbGYgb2YgdGhlIHNlY29uZCBib3VuZFxuICAvLyB0byBzb2x2ZSBmb3IgdGhlIHRvcCAyIGpvaW50cywgdGhlbiB1aW5nIHRoZSBoYWxmIG9mIHRoZSBzZWNvbmQgYm9uZSArIDNyZCBib25lIHRvIHNvbHZlIGZvciB0aGUgYm90dG9tIGpvaW50LlxuICAvLyBJZiBhbGwgYm9uZXMgYXJlIGVxdWFsIGxlbmd0aCwgIHRoZW4gd2Ugb25seSBuZWVkIHRvIHVzZSBoYWxmIG9mIHRoZSB0YXJnZXQgbGVuZ3RoIGFuZCBvbmx5IHRlc3Qgb25lIHRyaWFuZ2xlIGFuZCB1c2UgdGhhdCBmb3JcbiAgLy8gYm90aCB0cmlhbmdsZXMsIGJ1dCBpZiBib25lcyBhcmUgdW5ldmVuLCB0aGVuIHdlIG5lZWQgdG8gc29sdmUgYW4gYW5nbGUgZm9yIGVhY2ggdHJpYW5nbGUgd2hpY2ggdGhpcyBmdW5jdGlvbiBkb2VzLlxuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGxldCBiaW5kX2EgPSB0cG9zZS5ib25lc1tjaGFpbi5jaGFpbkJvbmVzWzBdLmluZGV4XSwgLy8gQm9uZSBSZWZlcmVuY2UgZnJvbSBCaW5kXG4gICAgYmluZF9iID0gdHBvc2UuYm9uZXNbY2hhaW4uY2hhaW5Cb25lc1sxXS5pbmRleF0sXG4gICAgYmluZF9jID0gdHBvc2UuYm9uZXNbY2hhaW4uY2hhaW5Cb25lc1syXS5pbmRleF0sXG4gICAgcG9zZV9hID0gcG9zZS5ib25lc1tjaGFpbi5jaGFpbkJvbmVzWzBdLmluZGV4XSwgLy8gQm9uZSBSZWZlcmVuY2UgZnJvbSBQb3NlXG4gICAgcG9zZV9iID0gcG9zZS5ib25lc1tjaGFpbi5jaGFpbkJvbmVzWzFdLmluZGV4XSxcbiAgICBwb3NlX2MgPSBwb3NlLmJvbmVzW2NoYWluLmNoYWluQm9uZXNbMl0uaW5kZXhdLFxuICAgIGFfbGVuID0gYmluZF9hLmxlbmd0aCwgLy8gRmlyc3QgQm9uZSBsZW5ndGhcbiAgICBiX2xlbiA9IGJpbmRfYi5sZW5ndGgsIC8vIFNlY29uZCBCb25lIExlbmd0aFxuICAgIGNfbGVuID0gYmluZF9jLmxlbmd0aCwgLy8gVGhpcmQgQm9uZSBMZW5ndGhcbiAgICBiaF9sZW4gPSBiaW5kX2IubGVuZ3RoICogMC41LCAvLyBIb3cgTXVjaCBvZiBCb25lIDIgdG8gdXNlIHdpdGggQm9uZSAxXG4gICAgdF9yYXRpbyA9IChhX2xlbiArIGJoX2xlbikgLyAoYV9sZW4gKyBiX2xlbiArIGNfbGVuKSwgLy8gSG93IG11Y2ggdG8gc3ViZGl2aWRlIHRoZSBUYXJnZXQgbGVuZ3RoIGJldHdlZW4gdGhlIHR3byB0cmlhbmdsZXNcbiAgICB0YV9sZW4gPSBjTGVuICogdF9yYXRpbywgLy8gR29lcyB3aXRoIEEgJiBCXG4gICAgdGJfbGVuID0gY0xlbiAtIHRhX2xlbiwgLy8gR29lcyB3aXRoIEIgJiBDXG4gICAgcm90ID0gbmV3IFF1YXRlcm5pb24oKSxcbiAgICByYWRcblxuICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flxuICAvLyBCb25lIEFcbiAgX2FpbV9ib25lMihjaGFpbiwgdHBvc2UsIGF4aXMsIHBfd3QsIHJvdCkgLy8gQWltIHRoZSBmaXJzdCBib25lIHRvd2FyZCB0aGUgdGFyZ2V0IG9yaWVudGVkIHdpdGggdGhlIGJlbmQgZGlyZWN0aW9uLlxuXG4gIHJhZCA9IGNvc1NTUyhhX2xlbiwgdGFfbGVuLCBiaF9sZW4pIC8vIEdldCB0aGUgQW5nbGUgYmV0d2VlbiBGaXJzdCBCb25lIGFuZCBUYXJnZXQuXG4gIHJvdFxuICAgIC5wcmVtdWx0aXBseShuZXcgUXVhdGVybmlvbigpLnNldEZyb21BeGlzQW5nbGUoYXhpcy54LCAtcmFkKSkgLy8gUm90YXRlIHRoZSB0aGUgYWltZWQgYm9uZSBieSB0aGUgYW5nbGUgZnJvbSBTU1NcbiAgICAucHJlbXVsdGlwbHkocF93dC5xdWF0ZXJuaW9uLmNsb25lKCkuaW52ZXJ0KCkpIC8vIENvbnZlcnQgdG8gQm9uZSdzIExvY2FsIFNwYWNlIGJ5IG11bCBpbnZlcnQgb2YgcGFyZW50IGJvbmUgcm90YXRpb25cblxuICBwb3NlLnNldEJvbmUoYmluZF9hLmlkeCwgcm90KVxuXG4gIHBvc2VfYS53b3JsZC5wb3NpdGlvbi5jb3B5KHBfd3QucG9zaXRpb24pXG4gIHBvc2VfYS53b3JsZC5xdWF0ZXJuaW9uLmNvcHkocF93dC5xdWF0ZXJuaW9uKVxuICBwb3NlX2Eud29ybGQuc2NhbGUuY29weShwX3d0LnNjYWxlKVxuXG4gIHRyYW5zZm9ybUFkZChwb3NlX2Eud29ybGQsIHsgLi4uYmluZF9hLmxvY2FsLCBxdWF0ZXJuaW9uOiByb3QgfSlcblxuICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flxuICAvLyBCb25lIEJcbiAgcmFkID0gTWF0aC5QSSAtIGNvc1NTUyhhX2xlbiwgYmhfbGVuLCB0YV9sZW4pXG5cbiAgcm90XG4gICAgLmNvcHkocG9zZV9hLndvcmxkLnF1YXRlcm5pb24pXG4gICAgLm11bHRpcGx5KGJpbmRfYi5sb2NhbC5xdWF0ZXJuaW9uKSAvLyBBZGQgQm9uZSBMb2NhbCB0byBnZXQgaXRzIFdTIHJvdFxuICAgIC5wcmVtdWx0aXBseShuZXcgUXVhdGVybmlvbigpLnNldEZyb21BeGlzQW5nbGUoYXhpcy54LCByYWQpKSAvLyBSb3RhdGUgaXQgYnkgdGhlIHRhcmdldCdzIHgtYXhpcyAucG11bCggdG1wLmZyb21fYXhpc19hbmdsZSggdGhpcy5heGlzLngsIHJhZCApIClcbiAgICAucHJlbXVsdGlwbHkocG9zZV9hLndvcmxkLnF1YXRlcm5pb24uY2xvbmUoKS5pbnZlcnQoKSkgLy8gQ29udmVydCB0byBMb2NhbCBTcGFjZSBpbiB0ZW1wIHRvIHNhdmUgV1Mgcm90IGZvciBuZXh0IGJvbmUuXG5cbiAgcG9zZS5zZXRCb25lKGJpbmRfYi5pZHgsIHJvdClcblxuICBwb3NlX2Iud29ybGQucG9zaXRpb24uY29weShwb3NlX2Eud29ybGQucG9zaXRpb24pXG4gIHBvc2VfYi53b3JsZC5xdWF0ZXJuaW9uLmNvcHkocG9zZV9hLndvcmxkLnF1YXRlcm5pb24pXG4gIHBvc2VfYi53b3JsZC5zY2FsZS5jb3B5KHBvc2VfYS53b3JsZC5zY2FsZSlcblxuICB0cmFuc2Zvcm1BZGQocG9zZV9iLndvcmxkLCB7IC4uLmJpbmRfYi5sb2NhbCwgcXVhdGVybmlvbjogcm90IH0pXG5cbiAgLy9+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5cbiAgLy8gQm9uZSBDXG4gIHJhZCA9IE1hdGguUEkgLSBjb3NTU1MoY19sZW4sIGJoX2xlbiwgdGJfbGVuKVxuICByb3RcbiAgICAuY29weShwb3NlX2Iud29ybGQucXVhdGVybmlvbilcbiAgICAubXVsdGlwbHkoYmluZF9jLmxvY2FsLnF1YXRlcm5pb24pIC8vIFN0aWxsIGNvbnRhaW5zIFdTIGZyb20gcHJldmlvdXMgYm9uZSwgQWRkIG5leHQgYm9uZSdzIGxvY2FsXG4gICAgLnByZW11bHRpcGx5KG5ldyBRdWF0ZXJuaW9uKCkuc2V0RnJvbUF4aXNBbmdsZShheGlzLngsIC1yYWQpKSAvLyBSb3RhdGUgaXQgYnkgdGhlIHRhcmdldCdzIHgtYXhpc1xuICAgIC5wcmVtdWx0aXBseShwb3NlX2Iud29ybGQucXVhdGVybmlvbi5pbnZlcnQoKSkgLy8gQ29udmVydCB0byBCb25lJ3MgTG9jYWwgU3BhY2VcblxuICBwb3NlLnNldEJvbmUoYmluZF9jLmlkeCwgcm90KVxuXG4gIHBvc2VfYy53b3JsZC5wb3NpdGlvbi5jb3B5KHBvc2VfYi53b3JsZC5wb3NpdGlvbilcbiAgcG9zZV9jLndvcmxkLnF1YXRlcm5pb24uY29weShwb3NlX2Iud29ybGQucXVhdGVybmlvbilcbiAgcG9zZV9jLndvcmxkLnNjYWxlLmNvcHkocG9zZV9iLndvcmxkLnNjYWxlKVxuXG4gIHRyYW5zZm9ybUFkZChwb3NlX2Mud29ybGQsIHsgLi4uYmluZF9jLmxvY2FsLCBxdWF0ZXJuaW9uOiByb3QgfSlcbn1cblxuLy8gQ29tcHV0aW5nIFRyYW5zZm9ybXMsIFBhcmVudCAtPiBDaGlsZFxuLyoqXG4gKlxuICogQHBhcmFtIHRhcmdldCB0YXJnZXQgdHJhbnNmb3JtICh3aWxsIGJlIG1vZGlmaWVkKVxuICogQHBhcmFtIHNvdXJjZSBzb3VyY2UgdHJhbnNmb3JtXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1BZGQodGFyZ2V0OiBQb3NlQm9uZVRyYW5zZm9ybSwgc291cmNlOiBQb3NlQm9uZVRyYW5zZm9ybSkge1xuICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG4gIC8vIFBPU0lUSU9OIC0gcGFyZW50LnBvc2l0aW9uICsgKCBwYXJlbnQucm90YXRpb24gKiAoIHBhcmVudC5zY2FsZSAqIGNoaWxkLnBvc2l0aW9uICkgKVxuICAvLyBwb3MuYWRkKCBWZWMzLm11bCggdGhpcy5zY2wsIGNwICkudHJhbnNmb3JtX3F1YXQoIHRoaXMucm90ICkgKTtcbiAgdGFyZ2V0LnBvc2l0aW9uLmFkZChzb3VyY2UucG9zaXRpb24uY2xvbmUoKS5tdWx0aXBseSh0YXJnZXQuc2NhbGUpLmFwcGx5UXVhdGVybmlvbih0YXJnZXQucXVhdGVybmlvbikpXG5cbiAgLy9+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flxuICAvLyBTQ0FMRSAtIHBhcmVudC5zY2FsZSAqIGNoaWxkLnNjYWxlXG4gIGlmIChzb3VyY2Uuc2NhbGUpIHRhcmdldC5zY2FsZS5tdWx0aXBseShzb3VyY2Uuc2NhbGUpXG5cbiAgLy9+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flxuICAvLyBST1RBVElPTiAtIHBhcmVudC5yb3RhdGlvbiAqIGNoaWxkLnJvdGF0aW9uXG4gIHRhcmdldC5xdWF0ZXJuaW9uLm11bHRpcGx5KHNvdXJjZS5xdWF0ZXJuaW9uKVxufVxuXG4vLy8vIGhlbHBlcnNcblxuZnVuY3Rpb24gX2FpbV9ib25lMihjaGFpbjogQ2hhaW4sIHRwb3NlOiBQb3NlLCBheGlzOiBBeGlzLCBwX3d0OiBQb3NlQm9uZVRyYW5zZm9ybSwgb3V0OiBRdWF0ZXJuaW9uKSB7XG4gIGNvbnN0IHJvdCA9IG5ldyBRdWF0ZXJuaW9uKClcbiAgdHBvc2UuYm9uZXNbY2hhaW4uZmlyc3QoKV0uYm9uZS5nZXRXb3JsZFF1YXRlcm5pb24ocm90KSAvLyBHZXQgV29ybGQgU3BhY2UgUm90YXRpb24gZm9yIEJvbmVcbiAgY29uc3QgZGlyID0gY2hhaW4uYWx0Rm9yd2FyZC5jbG9uZSgpLmFwcGx5UXVhdGVybmlvbihyb3QpIC8vIEdldCBCb25lJ3MgV1MgRm9yd2FyZCBEaXJcblxuICAvL1N3aW5nXG4gIGxldCBxID0gbmV3IFF1YXRlcm5pb24oKS5zZXRGcm9tVW5pdFZlY3RvcnMoZGlyLCBheGlzLnopXG4gIG91dC5jb3B5KHEpLm11bHRpcGx5KHJvdClcblxuICAvLyBUd2lzdFxuICAvLyBsZXQgdV9kaXIgPSBjaGFpbi5hbHRVcC5jbG9uZSgpLmFwcGx5UXVhdGVybmlvbihvdXQpXG4gIC8vIGxldCB0d2lzdHggPSB1X2Rpci5hbmdsZVRvKGF4aXMueSlcbiAgLy9BcHAuRGVidWcubG4oIGN0LnBvcywgVmVjMy5hZGQoIGN0LnBvcywgdV9kaXIpLCBcIndoaXRlXCIgKTtcblxuICBkaXIuY29weShjaGFpbi5hbHRVcCkuYXBwbHlRdWF0ZXJuaW9uKG91dCkgLy8gQWZ0ZXIgU3dpbmcsIFdoYXRzIHRoZSBVUCBEaXJlY3Rpb25cbiAgbGV0IHR3aXN0ID0gZGlyLmFuZ2xlVG8oYXhpcy55KSAvLyBHZXQgZGlmZmVyZW5jZSBiZXR3ZWVuIFN3aW5nIFVwIGFuZCBUYXJnZXQgVXBcblxuICBpZiAodHdpc3QgPD0gMC4wMDAxNzQ1MzI5MikgdHdpc3QgPSAwXG4gIGVsc2Uge1xuICAgIC8vbGV0IGxfZGlyICBcdD0gVmVjMy5jcm9zcyggZGlyLCB0aGlzLmF4aXMueiApO1xuICAgIGRpci5jcm9zc1ZlY3RvcnMoZGlyLCBheGlzLnopIC8vIEdldCBTd2luZyBMRUZULCB1c2VkIHRvIHRlc3QgaWYgdHdpc3QgaXMgb24gdGhlIG5lZ2F0aXZlIHNpZGUuXG4gICAgLy9BcHAuRGVidWcubG4oIGN0LnBvcywgVmVjMy5hZGQoIGN0LnBvcywgbF9kaXIpLCBcImJsYWNrXCIgKTtcblxuICAgIGlmIChkaXIuZG90KGF4aXMueSkgPj0gMCkgdHdpc3QgPSAtdHdpc3RcbiAgfVxuXG4gIG91dC5wcmVtdWx0aXBseShuZXcgUXVhdGVybmlvbigpLnNldEZyb21BeGlzQW5nbGUoYXhpcy56LCB0d2lzdCkpIC8vIEFwcGx5IFR3aXN0XG59XG4iLCIvLyBSZWZlcmVuY2VzOlxuLy8gaHR0cHM6Ly95b3V0dS5iZS9PTW1YbzNKZWp4a1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL3NrZXRjaHB1bmsvRnVuV2l0aFdlYkdMMi90cmVlL21hc3Rlci9sZXNzb25fMTM3X2lrX3JpZ3NcblxuLy8gQHRzLW5vY2hlY2tcbmltcG9ydCB7IElLUmlnQ29tcG9uZW50VHlwZSB9IGZyb20gJy4uL2NvbXBvbmVudHMvSUtSaWdDb21wb25lbnQnXG5pbXBvcnQgeyBCb25lLCBPYmplY3QzRCwgUXVhdGVybmlvbiwgVmVjdG9yMywgTWF0cml4NCB9IGZyb20gJ3RocmVlJ1xuaW1wb3J0IHtcbiAgSUtQb3NlQ29tcG9uZW50LFxuICBJS1Bvc2VDb21wb25lbnRUeXBlLFxuICBJS1Bvc2VMaW1iRGF0YSxcbiAgSUtQb3NlTG9va1R3aXN0LFxuICBJS1Bvc2VTcGluZURhdGFcbn0gZnJvbSAnLi4vY29tcG9uZW50cy9JS1Bvc2VDb21wb25lbnQnXG5pbXBvcnQgeyBCQUNLLCBET1dOLCBVUCwgRk9SV0FSRCwgTEVGVCwgUklHSFQgfSBmcm9tICcuLi8uLi9pa3JpZy9jb25zdGFudHMvVmVjdG9yM0NvbnN0YW50cydcbmltcG9ydCB7IGFkZENoYWluLCBhZGRQb2ludCB9IGZyb20gJy4vUmlnRnVuY3Rpb25zJ1xuaW1wb3J0IFBvc2UsIHsgUG9zZUJvbmVMb2NhbFN0YXRlIH0gZnJvbSAnLi4vY2xhc3Nlcy9Qb3NlJ1xuaW1wb3J0IHsgQ2hhaW4gfSBmcm9tICcuLi9jbGFzc2VzL0NoYWluJ1xuaW1wb3J0IHsgc29sdmVUaHJlZUJvbmUgfSBmcm9tICcuL0lLU29sdmVycydcblxuY29uc3QgdGVtcE1hdCA9IG5ldyBNYXRyaXg0KClcbmNvbnN0IHRlbXBRdWF0MSA9IG5ldyBRdWF0ZXJuaW9uKClcbmNvbnN0IHRlbXBRdWF0MiA9IG5ldyBRdWF0ZXJuaW9uKClcbmNvbnN0IHRlbXBWZWMxID0gbmV3IFZlY3RvcjMoKVxuY29uc3QgdGVtcFZlYzIgPSBuZXcgVmVjdG9yMygpXG5jb25zdCB0ZW1wVmVjMyA9IG5ldyBWZWN0b3IzKClcbmNvbnN0IHRlbXBWZWM0ID0gbmV3IFZlY3RvcjMoKVxuXG4vKipcbiAqIFVzZWQgd2hlbiB3ZSBrbm93IHRocmVlIHNpZGVzIG9mIHRoZSB0cmlhbmdsZSwgYW5kIHdhbnQgdG8gZmluZCB0aGUgbWlzc2luZyBhbmdsZS5cbiAqIGNvcyhDKSA9IChhXjIgKyBiXjIgLSBjXjIpIC8gMmFiXG4gKiBAcGFyYW0gYUxlbiBMZW5ndGggb2Ygc2lkZSBhXG4gKiBAcGFyYW0gYkxlbiBMZW5ndGggb2Ygc2lkZSBiXG4gKiBAcGFyYW0gY0xlbiBMZW5ndGggb2Ygc2lkZSBjXG4gKiBAcmV0dXJucyBBbmdsZSBDIGluIHJhZGlhbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvc1NTUyhhTGVuOiBudW1iZXIsIGJMZW46IG51bWJlciwgY0xlbjogbnVtYmVyKTogbnVtYmVyIHtcbiAgLy8gVGhlIEFuZ2xlIGJldHdlZW4gQSBhbmQgQiB3aXRoIEMgYmVpbmcgdGhlIG9wcG9zaXRlIGxlbmd0aCBvZiB0aGUgYW5nbGUuXG4gIGxldCB2ID0gKGFMZW4gKiBhTGVuICsgYkxlbiAqIGJMZW4gLSBjTGVuICogY0xlbikgLyAoMiAqIGFMZW4gKiBiTGVuKVxuICBpZiAodiA8IC0xKSB2ID0gLTFcbiAgLy8gQ2xhbXAgdG8gcHJldmVudCBOYU4gRXJyb3JzXG4gIGVsc2UgaWYgKHYgPiAxKSB2ID0gMVxuICByZXR1cm4gTWF0aC5hY29zKHYpXG59XG5cbi8qKlxuICogQXV0byBTZXR1cCB0aGUgUG9pbnRzIGFuZCBDaGFpbnMgYmFzZWQgb24gS25vd24gU2tlbGV0b24gU3RydWN0dXJlcy5cbiAqIEBwYXJhbSByaWdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldHVwTWl4YW1vSUtSaWcocmlnOiBJS1JpZ0NvbXBvbmVudFR5cGUpOiB2b2lkIHtcbiAgcmlnLnBvaW50cyA9IHt9XG4gIHJpZy5jaGFpbnMgPSB7fVxuXG4gIGFkZFBvaW50KHJpZywgJ2hpcCcsICdIaXBzJylcbiAgYWRkUG9pbnQocmlnLCAnaGVhZCcsICdIZWFkJylcbiAgYWRkUG9pbnQocmlnLCAnbmVjaycsICdOZWNrJylcbiAgYWRkUG9pbnQocmlnLCAnY2hlc3QnLCAnU3BpbmUyJylcbiAgYWRkUG9pbnQocmlnLCAnZm9vdF9sJywgJ0xlZnRGb290JylcbiAgYWRkUG9pbnQocmlnLCAnZm9vdF9yJywgJ1JpZ2h0Rm9vdCcpXG4gIGFkZENoYWluKHJpZywgJ2FybV9yJywgWydSaWdodEFybScsICdSaWdodEZvcmVBcm0nXSwgJ1JpZ2h0SGFuZCcpIC8vXCJ4XCIsXG4gIGFkZENoYWluKHJpZywgJ2FybV9sJywgWydMZWZ0QXJtJywgJ0xlZnRGb3JlQXJtJ10sICdMZWZ0SGFuZCcpIC8vXCJ4XCIsXG4gIGFkZENoYWluKHJpZywgJ2xlZ19yJywgWydSaWdodFVwTGVnJywgJ1JpZ2h0TGVnJ10sICdSaWdodEZvb3QnKSAvL1wielwiLFxuICBhZGRDaGFpbihyaWcsICdsZWdfbCcsIFsnTGVmdFVwTGVnJywgJ0xlZnRMZWcnXSwgJ0xlZnRGb290JykgLy9cInpcIixcbiAgYWRkQ2hhaW4ocmlnLCAnc3BpbmUnLCBbJ1NwaW5lJywgJ1NwaW5lMScsICdTcGluZTInXSkgLy8sIFwieVwiXG5cbiAgcmlnLmNoYWlucy5sZWdfbC5jb21wdXRlTGVuZ3RoRnJvbUJvbmVzKHJpZy50cG9zZS5ib25lcylcbiAgcmlnLmNoYWlucy5sZWdfci5jb21wdXRlTGVuZ3RoRnJvbUJvbmVzKHJpZy50cG9zZS5ib25lcylcbiAgcmlnLmNoYWlucy5hcm1fbC5jb21wdXRlTGVuZ3RoRnJvbUJvbmVzKHJpZy50cG9zZS5ib25lcylcbiAgcmlnLmNoYWlucy5hcm1fci5jb21wdXRlTGVuZ3RoRnJvbUJvbmVzKHJpZy50cG9zZS5ib25lcylcbiAgcmlnLmNoYWlucy5sZWdfbC5zZXRPZmZzZXRzKERPV04sIEZPUldBUkQsIHJpZy50cG9zZSlcbiAgcmlnLmNoYWlucy5sZWdfci5zZXRPZmZzZXRzKERPV04sIEZPUldBUkQsIHJpZy50cG9zZSlcbiAgcmlnLmNoYWlucy5hcm1fci5zZXRPZmZzZXRzKFJJR0hULCBCQUNLLCByaWcudHBvc2UpXG4gIHJpZy5jaGFpbnMuYXJtX2wuc2V0T2Zmc2V0cyhMRUZULCBCQUNLLCByaWcudHBvc2UpXG59XG5cbi8qKlxuICogQXV0byBTZXR1cCB0aGUgUG9pbnRzIGFuZCBDaGFpbnMgYmFzZWQgb24gS25vd24gU2tlbGV0b24gU3RydWN0dXJlcy5cbiAqIEBwYXJhbSByaWdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldHVwVFJleElLUmlnKHJpZzogSUtSaWdDb21wb25lbnRUeXBlKTogdm9pZCB7XG4gIHJpZy5wb2ludHMgPSB7fVxuICByaWcuY2hhaW5zID0ge31cbiAgLy8gVE9ETzpGaXhcblxuICBhZGRQb2ludChyaWcsICdoaXAnLCAnaGlwJylcbiAgYWRkUG9pbnQocmlnLCAnaGVhZCcsICdmYWNlX2pvaW50JylcbiAgYWRkUG9pbnQocmlnLCAnZm9vdF9sJywgJ0xlZnRGb290JylcbiAgYWRkUG9pbnQocmlnLCAnZm9vdF9yJywgJ1JpZ2h0Rm9vdCcpXG5cbiAgYWRkUG9pbnQocmlnLCAnd2luZ19sJywgJ2xlZnRfd2luZycpXG4gIGFkZFBvaW50KHJpZywgJ3dpbmdfcicsICdyaWdodF93aW5nJylcblxuICBhZGRDaGFpbihyaWcsICdsZWdfcicsIFsnUmlnaHRVcExlZycsICdSaWdodEtuZWUnLCAnUmlnaHRTaGluJ10sICdSaWdodEZvb3QnLCBzb2x2ZVRocmVlQm9uZSlcbiAgYWRkQ2hhaW4ocmlnLCAnbGVnX2wnLCBbJ0xlZnRVcExlZycsICdMZWZ0S25lZScsICdMZWZ0U2hpbiddLCAnTGVmdEZvb3QnLCBzb2x2ZVRocmVlQm9uZSlcbiAgYWRkQ2hhaW4ocmlnLCAnc3BpbmUnLCBbJ1NwaW5lJywgJ1NwaW5lMSddKVxuICBhZGRDaGFpbihyaWcsICd0YWlsJywgWyd0YWlsXzEnLCAndGFpbF8yJywgJ3RhaWxfMycsICd0YWlsXzQnLCAndGFpbF81JywgJ3RhaWxfNicsICd0YWlsXzcnXSlcbiAgLy8gVE9ETzogY3JlYXRlIHNldF9sZWdfbG10IGFuZCBhcHBseT9cbiAgLy8gc2V0X2xlZ19sbXQoZW50aXR5LCBudWxsLCAtMC4xIClcblxuICByaWcuY2hhaW5zLmxlZ19sLmNvbXB1dGVMZW5ndGhGcm9tQm9uZXMocmlnLnRwb3NlLmJvbmVzKVxuICByaWcuY2hhaW5zLmxlZ19yLmNvbXB1dGVMZW5ndGhGcm9tQm9uZXMocmlnLnRwb3NlLmJvbmVzKVxuICByaWcuY2hhaW5zLmxlZ19sLnNldE9mZnNldHMoRE9XTiwgRk9SV0FSRCwgcmlnLnRwb3NlKVxuICByaWcuY2hhaW5zLmxlZ19yLnNldE9mZnNldHMoRE9XTiwgRk9SV0FSRCwgcmlnLnRwb3NlKVxufVxuXG4vKipcbiAqIENvbXB1dGUgdGhlIElLIHBvc2UgYmFzZWQgb24gdGhlIG9yaWdpbmFsIHBvc2VcbiAqIEBwYXJhbSByaWdcbiAqIEBwYXJhbSBpa1Bvc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVJS1Bvc2UocmlnOiBJS1JpZ0NvbXBvbmVudFR5cGUsIGlrUG9zZTogSUtQb3NlQ29tcG9uZW50VHlwZSk6IHZvaWQge1xuICB1cGRhdGVQb3NlQm9uZXNGcm9tU2tlbGV0b24ocmlnKVxuXG4gIGNvbXB1dGVIaXAocmlnLCBpa1Bvc2UpXG5cbiAgY29tcHV0ZUxpbWIocmlnLnBvc2UsIHJpZy5jaGFpbnMubGVnX2wsIGlrUG9zZS5sZWdfbClcbiAgY29tcHV0ZUxpbWIocmlnLnBvc2UsIHJpZy5jaGFpbnMubGVnX3IsIGlrUG9zZS5sZWdfcilcblxuICBjb21wdXRlTG9va1R3aXN0KHJpZywgcmlnLnBvaW50cy5mb290X2wsIGlrUG9zZS5mb290X2wsIEZPUldBUkQsIFVQKSAvLyBMb29rID0gRndkLCBUd2lzdCA9IFVwXG4gIGNvbXB1dGVMb29rVHdpc3QocmlnLCByaWcucG9pbnRzLmZvb3RfciwgaWtQb3NlLmZvb3RfciwgRk9SV0FSRCwgVVApXG5cbiAgY29tcHV0ZVNwaW5lKHJpZywgcmlnLmNoYWlucy5zcGluZSwgaWtQb3NlLCBVUCwgRk9SV0FSRClcblxuICBjb21wdXRlTGltYihyaWcucG9zZSwgcmlnLmNoYWlucy5hcm1fbCwgaWtQb3NlLmFybV9sKVxuICBjb21wdXRlTGltYihyaWcucG9zZSwgcmlnLmNoYWlucy5hcm1fciwgaWtQb3NlLmFybV9yKVxuXG4gIGNvbXB1dGVMb29rVHdpc3QocmlnLCByaWcucG9pbnRzLmhlYWQsIGlrUG9zZS5oZWFkLCBGT1JXQVJELCBVUClcbn1cblxuY29uc3Qgc2tlbGV0b25UcmFuc2Zvcm0gPSB7XG4gIHBvc2l0aW9uOiBuZXcgVmVjdG9yMygpLFxuICBxdWF0ZXJuaW9uOiBuZXcgUXVhdGVybmlvbigpLFxuICBpbnZRdWF0ZXJuaW9uOiBuZXcgUXVhdGVybmlvbigpLFxuICBzY2FsZTogbmV3IFZlY3RvcjMoKSxcblxuICByZXNldDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucG9zaXRpb24uc2V0U2NhbGFyKDApXG4gICAgdGhpcy5xdWF0ZXJuaW9uLmlkZW50aXR5KClcbiAgICB0aGlzLmludlF1YXRlcm5pb24uaWRlbnRpdHkoKVxuICAgIHRoaXMuc2NhbGUuc2V0U2NhbGFyKDApXG4gIH1cbn1cblxuLyoqXG4gKiBVcGRhdGUgcG9zZSBib25lcyBmcm9tIGFuaW1hdGVkIHNrZWxldG9uIGJvbmVzXG4gKiBAcGFyYW0gcmlnXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZVBvc2VCb25lc0Zyb21Ta2VsZXRvbihyaWc6IElLUmlnQ29tcG9uZW50VHlwZSk6IHZvaWQge1xuICBza2VsZXRvblRyYW5zZm9ybS5yZXNldCgpXG5cbiAgY29uc3Qgcm9vdEJvbmUgPSByaWcucG9zZS5za2VsZXRvbi5ib25lcy5maW5kKChiKSA9PiAhKGIucGFyZW50IGluc3RhbmNlb2YgQm9uZSkpXG5cbiAgaWYgKHJvb3RCb25lLnBhcmVudCkge1xuICAgIHJvb3RCb25lLnBhcmVudC5nZXRXb3JsZFBvc2l0aW9uKHNrZWxldG9uVHJhbnNmb3JtLnBvc2l0aW9uKVxuICAgIHJvb3RCb25lLnBhcmVudC5nZXRXb3JsZFF1YXRlcm5pb24oc2tlbGV0b25UcmFuc2Zvcm0ucXVhdGVybmlvbilcbiAgICByb290Qm9uZS5wYXJlbnQuZ2V0V29ybGRTY2FsZShza2VsZXRvblRyYW5zZm9ybS5zY2FsZSlcbiAgICBza2VsZXRvblRyYW5zZm9ybS5pbnZRdWF0ZXJuaW9uLmNvcHkoc2tlbGV0b25UcmFuc2Zvcm0ucXVhdGVybmlvbikuaW52ZXJ0KClcbiAgfVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcmlnLnBvc2Uuc2tlbGV0b24uYm9uZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBib25lID0gcmlnLnBvc2Uuc2tlbGV0b24uYm9uZXNbaV1cbiAgICBjb25zdCBwb3NlID0gcmlnLnBvc2UuYm9uZXNbaV1cblxuICAgIGJvbmUuZ2V0V29ybGRQb3NpdGlvbihwb3NlLndvcmxkLnBvc2l0aW9uKVxuICAgIGJvbmUuZ2V0V29ybGRRdWF0ZXJuaW9uKHBvc2Uud29ybGQucXVhdGVybmlvbilcbiAgICBib25lLmdldFdvcmxkU2NhbGUocG9zZS53b3JsZC5zY2FsZSlcblxuICAgIHdvcmxkVG9Nb2RlbChwb3NlLndvcmxkLnBvc2l0aW9uLCBwb3NlLndvcmxkLnF1YXRlcm5pb24sIHBvc2Uud29ybGQuc2NhbGUsIHNrZWxldG9uVHJhbnNmb3JtKVxuXG4gICAgcG9zZS5sb2NhbC5wb3NpdGlvbi5jb3B5KGJvbmUucG9zaXRpb24pXG4gICAgcG9zZS5sb2NhbC5xdWF0ZXJuaW9uLmNvcHkoYm9uZS5xdWF0ZXJuaW9uKVxuICAgIHBvc2UubG9jYWwuc2NhbGUuY29weShib25lLnNjYWxlKVxuICB9XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgSGlwIElLIGFuZCBzdG9yZXMgaXQgaW4gdGhlIGlrUG9zZVxuICogQHBhcmFtIHJpZyBTa2VsZXRvbiByaWcgZGF0YVxuICogQHBhcmFtIGlrUG9zZSBQb3NlIHRvIHNhdmUgY29tcHV0ZWQgZGF0YSBpbnRvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlSGlwKHJpZzogSUtSaWdDb21wb25lbnRUeXBlLCBpa1Bvc2U6IElLUG9zZUNvbXBvbmVudFR5cGUpIHtcbiAgLy8gRmlyc3QgdGhpbmcgd2UgbmVlZCBpcyB0aGUgSGlwIGJvbmUgZnJvbSB0aGUgQW5pbWF0ZWQgUG9zZVxuICAvLyBQbHVzIHdoYXQgdGhlIGhpcCdzIEJpbmQgUG9zZSBhcyB3ZWxsLlxuICAvLyBXZSB1c2UgdGhlc2UgdHdvIHN0YXRlcyB0byBkZXRlcm1pbmUgd2hhdCBjaGFuZ2UgdGhlIGFuaW1hdGlvbiBkaWQgdG8gdGhlIHRwb3NlLlxuXG4gIGNvbnN0IGJvbmVJbmZvID0gcmlnLnBvaW50cy5oaXAsIC8vIFJpZyBIaXAgSW5mb1xuICAgIHBvc2VCb25lSW5mbyA9IHJpZy5wb3NlLmJvbmVzW2JvbmVJbmZvLmluZGV4XSwgLy8gQW5pbWF0ZWQgUG9zZSBCb25lXG4gICAgYmluZEJvbmVJbmZvID0gcmlnLnRwb3NlLmJvbmVzW2JvbmVJbmZvLmluZGV4XSAvLyBUUG9zZSBCb25lXG5cbiAgLy8gTGV0cyBjcmVhdGUgdGhlIFF1YXRlcm5pb24gSW52ZXJzZSBEaXJlY3Rpb24gYmFzZWQgb24gdGhlXG4gIC8vIFRCb25lJ3MgV29ybGQgU3BhY2Ugcm90YXRpb24uIFdlIGRvbid0IHJlYWxseSBrbm93IHRoZSBvcmllbnRhdGlvblxuICAvLyBvZiB0aGUgYm9uZSdzIHN0YXJ0aW5nIHJvdGF0aW9uIGFuZCBvdXIgdGFyZ2V0cyB3aWxsIGhhdmUgdGhlaXIgb3duXG4gIC8vIG9yaWVudGF0aW9uLCBzbyBieSBkb2luZyB0aGlzIHdlIGNhbiBlYXNpbHkgc2F5IG5vIG1hdHRlciB3aGF0IHRoZVxuICAvLyBkZWZhdWx0IGRpcmVjdGlvbiBvZiB0aGUgaGlwLCB3ZSB3YW50IHRvIHNheSBhbGwgaGlwcyBib25lcyBwb2ludFxuICAvLyBhdCB0aGUgRk9SV0FSRCBheGlzIGFuZCB0aGUgdGFpbCBvZiB0aGUgYm9uZSBwb2ludHMgVVAuXG5cbiAgY29uc3QgcXVhdEludmVyc2UgPSBiaW5kQm9uZUluZm8ud29ybGQuaW52UXVhdGVybmlvblxuICBjb25zdCBhbHRGb3J3YXJkID0gdGVtcFZlYzEuY29weShGT1JXQVJEKS5hcHBseVF1YXRlcm5pb24ocXVhdEludmVyc2UpXG4gIGNvbnN0IGFsdFVwID0gdGVtcFZlYzIuY29weShVUCkuYXBwbHlRdWF0ZXJuaW9uKHF1YXRJbnZlcnNlKVxuICBjb25zdCBwb3NlRm9yd2FyZCA9IHRlbXBWZWMzLmNvcHkoYWx0Rm9yd2FyZCkuYXBwbHlRdWF0ZXJuaW9uKHBvc2VCb25lSW5mby53b3JsZC5xdWF0ZXJuaW9uKVxuICBjb25zdCBwb3NlVXAgPSB0ZW1wVmVjNC5jb3B5KGFsdFVwKS5hcHBseVF1YXRlcm5pb24ocG9zZUJvbmVJbmZvLndvcmxkLnF1YXRlcm5pb24pXG5cbiAgLy8gV2l0aCBvdXIgZGlyZWN0aW9ucyBrbm93biBiZXR3ZWVuIG91ciBUUG9zZSBhbmQgQW5pbWF0ZWQgUG9zZSwgTmV4dCB3ZVxuICAvLyBzdGFydCB0byBjYWxjdWxhdGUgdGhlIFN3aW5nIGFuZCBUd2lzdCBWYWx1ZXMgdG8gc3dpbmcgb3VyIFRQb3NlIGludG9cbiAgLy8gVGhlIGFuaW1hdGlvbiBkaXJlY3Rpb25cblxuICBjb25zdCBiaW5kRndkID0gdGVtcFZlYzEuY29weShGT1JXQVJEKS5hcHBseVF1YXRlcm5pb24oYmluZEJvbmVJbmZvLndvcmxkLnF1YXRlcm5pb24pXG5cbiAgY29uc3Qgc3dpbmcgPSB0ZW1wUXVhdDFcbiAgICAuc2V0RnJvbVVuaXRWZWN0b3JzKGJpbmRGd2QsIHBvc2VGb3J3YXJkKSAvLyBGaXJzdCB3ZSBjcmVhdGUgYSBzd2luZyByb3RhdGlvbiBmcm9tIG9uZSBkaXIgdG8gdGhlIG90aGVyLlxuICAgIC5tdWx0aXBseShiaW5kQm9uZUluZm8ud29ybGQucXVhdGVybmlvbikgLy8gVGhlbiB3ZSBhcHBseSBpdCB0byB0aGUgVEJvbmUgUm90YXRpb24sIHRoaXMgd2lsbCBkbyBhIEZXRCBTd2luZyB3aGljaCB3aWxsIGNyZWF0ZVxuXG4gIC8vIEEgbmV3IFVwIGRpcmVjdGlvbiBiYXNlZCBvbiBvbmx5IHN3aW5nLlxuICBjb25zdCBzd2luZ1VwID0gdGVtcFZlYzIuY29weShVUCkuYXBwbHlRdWF0ZXJuaW9uKHN3aW5nKVxuICBsZXQgdHdpc3QgPSBzd2luZ1VwLmFuZ2xlVG8ocG9zZVVwKSAvLyBTd2luZyArIFBvc2UgaGF2ZSBzYW1lIEZ3ZCwgVXNlIEFuZ2xlIGJldHdlZW4gYm90aCBVUHMgZm9yIHR3aXN0XG5cbiAgLy8gVGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBQb3NlIFVQIGFuZCBTd2luZyBVUCBpcyB3aGF0IG1ha2VzIHVwIG91ciB0d2lzdCBzaW5jZSB0aGV5IGJvdGhcbiAgLy8gc2hhcmUgdGhlIHNhbWUgZm9yd2FyZCBhY2Nlc3MuIFRoZSBpc3N1ZSBpcyB0aGF0IHdlIGRvIG5vdCBrbm93IGlmIHRoYXQgdHdpc3QgaXMgaW4gdGhlIE5lZ2F0aXZlIGRpcmVjdGlvblxuICAvLyBvciBwb3NpdGl2ZS4gU28gYnkgY29tcHV0aW5nIHRoZSBTd2luZyBMZWZ0IERpcmVjdGlvbiwgd2UgY2FuIHVzZSB0aGUgRG90IFByb2R1Y3QgdG8gZGV0ZXJtaW5lXG4gIC8vIGlmIHN3aW5nIFVQIGlzIE92ZXIgOTAgRGVncmVlcywgaWYgc28gdGhlbiBpdHMgYSBwb3NpdGl2ZSB0d2lzdCBlbHNlIGl0cyBuZWdhdGl2ZS5cbiAgY29uc3QgZG90ID0gc3dpbmdVcC5jcm9zcyhwb3NlRm9yd2FyZCkuZG90KHBvc2VVcClcbiAgaWYgKGRvdCA+PSAwKSB0d2lzdCA9IC10d2lzdFxuXG4gIC8vIFNhdmUgYWxsIHRoZSBpbmZvIHdlIG5lZWQgdG8gb3VyIElLIFBvc2UuXG4gIGlrUG9zZS5oaXAuYmluZF9oZWlnaHQgPSBiaW5kQm9uZUluZm8ubG9jYWwucG9zaXRpb24ueSAvLyBUaGUgQmluZCBQb3NlIEhlaWdodCBvZiB0aGUgSGlwLCBIZWxwcyB3aXRoIHNjYWxpbmcuXG4gIGlrUG9zZS5oaXAubW92ZW1lbnQuY29weShwb3NlQm9uZUluZm8ud29ybGQucG9zaXRpb24pLnN1YihiaW5kQm9uZUluZm8ud29ybGQucG9zaXRpb24pIC8vIEhvdyBtdWNoIG1vdmVtZW50IGRpZCB0aGUgaGlwIGRvIGJldHdlZW4gQmluZCBhbmQgQW5pbWF0ZWQuXG4gIGlrUG9zZS5oaXAuZGlyLmNvcHkocG9zZUZvcndhcmQpIC8vIFBvc2UgRm9yd2FyZCBpcyB0aGUgZGlyZWN0aW9uIHdlIHdhbnQgdGhlIEhpcCB0byBQb2ludCB0by5cbiAgaWtQb3NlLmhpcC50d2lzdCA9IHR3aXN0IC8vIEhvdyBNdWNoIFR3aXN0aW5nIHRvIEFwcGx5IGFmdGVyIHBvaW50aW5nIGluIHRoZSBjb3JyZWN0IGRpcmVjdGlvbi5cbn1cblxuLyoqXG4gKiBDb21wdXRlcyBMaW1icyBJS1xuICogQHBhcmFtIHBvc2VcbiAqIEBwYXJhbSBjaGFpblxuICogQHBhcmFtIGlrTGltYlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZUxpbWIocG9zZTogUG9zZSwgY2hhaW46IENoYWluLCBpa0xpbWIpIHtcbiAgLy8gTGltYiBJSyB0ZW5kcyB0byBiZSBmYWlybHkgZWFzeSB0byBkZXRlcm1pbmUuIFdoYXQgeW91IG5lZWQgaXMgdGhlIGRpcmVjdGlvbiB0aGUgZW5kIGVmZmVjdG9yIGlzIGluXG4gIC8vIHJlbGF0aW9uIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGxpbWIgY2hhaW4sIGxpa2UgdGhlIFNob3VsZGVyIGZvciBhbiBhcm0gY2hhaW4uIEFmdGVyIHlvdSBoYXZlIHRoZVxuICAvLyBkaXJlY3Rpb24sIHlvdSBjYW4gdXNlIGl0IHRvIGdldCB0aGUgZGlzdGFuY2UuIERpc3RhbmNlIGlzIGltcG9ydGFudCB0byBjcmVhdGUgYSBzY2FsZSB2YWx1ZSBiYXNlZCBvblxuICAvLyB0aGUgbGVuZ3RoIG9mIHRoZSBjaGFpbi4gU2luY2UgYW4gYXJtIG9yIGxlZydzIGxlbmd0aCBjYW4gdmFyeSBiZXR3ZWVuIG1vZGVscywgaWYgeW91IG5vcm1hbGl6ZSB0aGVcbiAgLy8gZGlzdGFuY2UsIGl0IGJlY29tZXMgZWFzeSB0byB0cmFuc2xhdGUgaXQgdG8gb3RoZXIgbW9kZWxzLiBUaGUgbGFzdCBiaXQgb2YgaW5mbyBpcyB3ZSBuZWVkIHRoZSBkaXJlY3Rpb25cbiAgLy8gdGhhdCB0aGUgam9pbnQgbmVlZHMgdG8gcG9pbnQuIEluIHRoaXMgZXhhbXBsZSwgd2UgcHJlY29tcHV0ZSB0aGUgUXVhdGVybmlvbiBJbnZlcnNlIERpciBmb3IgZWFjaCBjaGFpblxuICAvLyBiYXNlZCBvbiB0aGUgYmluZCBwb3NlLiBXZSBjYW4gdHJhbnNmb3JtIHRoYXQgZGlyZWN0aW9uIHdpdGggdGhlIEFuaW1hdGVkIHJvdGF0aW9uIHRvIGdpdmUgdXMgd2hlcmUgdGhlXG4gIC8vIGpvaW50IGRpcmVjdGlvbiBoYXMgbW92ZWQgdG8uXG5cbiAgLy8gVE9ETzogT3VyIGJvbmVzIGFyZSBnZXR0aW5nIGZ1cnRoZXIgYXBhcnQsIHNvIHdlIG5lZWQgdG8gZmlndXJlIG91dCB3aHlcbiAgY29uc3QgYm9uZUEgPSBwb3NlLmJvbmVzW2NoYWluLmZpcnN0KCldLCAvLyBGaXJzdCBCb25lXG4gICAgYm9uZUIgPSBwb3NlLmJvbmVzW2NoYWluLmVuZF9pZHhdIC8vIEVORCBCb25lLCB3aGljaCBpcyBub3QgcGFydCBvZiB0aGUgY2hhaW4gKEhhbmQsRm9vdClcblxuICBjb25zdCBhVG9CVmVjdG9yID0gdGVtcFZlYzEuc3ViVmVjdG9ycyhib25lQi53b3JsZC5wb3NpdGlvbiwgYm9uZUEud29ybGQucG9zaXRpb24pIC8vIERpcmVjdGlvbiBmcm9tIEZpcnN0IEJvbmUgdG8gRmluYWwgQm9uZSAoIElLIERpcmVjdGlvbiApXG5cbiAgLy8gQ29tcHV0ZSB0aGUgZmluYWwgSUsgSW5mb3JtYXRpb24gbmVlZGVkIGZvciB0aGUgTGltYlxuICBpa0xpbWIubGVuZ3RoU2NhbGUgPSBhVG9CVmVjdG9yLmxlbmd0aCgpIC8gY2hhaW4ubGVuZ3RoIC8vIE5vcm1hbGl6ZSB0aGUgZGlzdGFuY2UgYmFzZSBvbiB0aGUgbGVuZ3RoIG9mIHRoZSBDaGFpbi5cbiAgaWtMaW1iLmRpci5jb3B5KGFUb0JWZWN0b3IpLm5vcm1hbGl6ZSgpIC8vIFdlIGFsc28gbm9ybWFsaXplIHRoZSBkaXJlY3Rpb24gdG8gdGhlIGVuZCBlZmZlY3Rvci5cblxuICAvLyBXZSB1c2UgdGhlIGZpcnN0IGJvbmUgb2YgdGhlIGNoYWluIHBsdXMgdGhlIFByZSBjb21wdXRlZCBBTFQgVVAgdG8gZWFzaWx5IGdldCB0aGUgZGlyZWN0aW9uIG9mIHRoZSBqb2ludFxuICBjb25zdCBsZWZ0RGlyID0gdGVtcFZlYzIuY29weShjaGFpbi5hbHRVcCkuYXBwbHlRdWF0ZXJuaW9uKGJvbmVBLndvcmxkLnF1YXRlcm5pb24pLmNyb3NzKGFUb0JWZWN0b3IpIC8vIFdlIG5lZWQgbGVmdCB0byByZWFsaWduIHVwXG4gIGlrTGltYi5qb2ludERpcmVjdGlvbi5jb3B5KGFUb0JWZWN0b3IpLmNyb3NzKGxlZnREaXIpLm5vcm1hbGl6ZSgpIC8vIFJlY2FsYyBVcCwgbWFrZSBpdCBvcnRob2dvbmFsIHRvIExFRlQgYW5kIEZXRFxufVxuXG4vKipcbiAqIENvbXB1dGVzIHR3aXN0IGZvciB0aGUgZmVldCBhbmQgaGVhZCBib25lc1xuICogQHBhcmFtIHJpZ1xuICogQHBhcmFtIGJvbmVJbmZvXG4gKiBAcGFyYW0gaWtcbiAqIEBwYXJhbSBsb29rRGlyZWN0aW9uXG4gKiBAcGFyYW0gdHdpc3REaXJlY3Rpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVMb29rVHdpc3QocmlnOiBJS1JpZ0NvbXBvbmVudFR5cGUsIGJvbmVJbmZvLCBpaywgbG9va0RpcmVjdGlvbiwgdHdpc3REaXJlY3Rpb24pIHtcbiAgY29uc3QgcG9zZSA9IHJpZy5wb3NlLmJvbmVzW2JvbmVJbmZvLmluZGV4XSxcbiAgICBiaW5kID0gcmlnLnRwb3NlLmJvbmVzW2JvbmVJbmZvLmluZGV4XSAvLyBUUG9zZSBCb25lXG5cbiAgLy8gRmlyc3QgY29tcHV0ZSB0aGUgUXVhdGVybmlvbiBJbnZlcnQgRGlyZWN0aW9ucyBiYXNlZCBvbiB0aGUgRGVmaW5lZFxuICAvLyBEaXJlY3Rpb25zIHRoYXQgd2FzIHBhc3NlZCBpbnRvIHRoZSBmdW5jdGlvbi4gTW9zdCBvZnRlbiwgeW91ciBsb29rXG4gIC8vIGRpcmVjdGlvbiBpcyBGT1JXQVJEIGFuZCB0aGUgRGlyZWN0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lIHR3aXN0IGlzIFVQLlxuICAvLyBCdXQgdGhlcmUgYXJlIHRpbWVzIHdlIG5lZWQgdGhlIGRpcmVjdGlvbnMgdG8gYmUgZGlmZmVyZW50IGRlcGVuZGluZ1xuICAvLyBvbiBob3cgd2UgdmlldyB0aGUgYm9uZSBpbiBjZXJ0YWluIHNpdHVhdGlvbnMuXG5cbiAgY29uc3QgaW52UXVhdCA9IGJpbmQud29ybGQuaW52UXVhdGVybmlvblxuICBjb25zdCBhbHRMb29rRGlyZWN0aW9uID0gdGVtcFZlYzEuY29weShsb29rRGlyZWN0aW9uKS5hcHBseVF1YXRlcm5pb24oaW52UXVhdCksXG4gICAgYWx0VHdpc3REaXJlY3Rpb24gPSB0ZW1wVmVjMi5jb3B5KHR3aXN0RGlyZWN0aW9uKS5hcHBseVF1YXRlcm5pb24oaW52UXVhdClcblxuICBpay5sb29rRGlyZWN0aW9uLmNvcHkoYWx0TG9va0RpcmVjdGlvbikuYXBwbHlRdWF0ZXJuaW9uKHBvc2Uud29ybGQucXVhdGVybmlvbilcbiAgaWsudHdpc3REaXJlY3Rpb24uY29weShhbHRUd2lzdERpcmVjdGlvbikuYXBwbHlRdWF0ZXJuaW9uKHBvc2Uud29ybGQucXVhdGVybmlvbilcbn1cblxuLyoqXG4gKiBDb21wdXRlcyBzcGluZSBJSyBwb3NlXG4gKiBAcGFyYW0gcmlnXG4gKiBAcGFyYW0gY2hhaW5cbiAqIEBwYXJhbSBpa1Bvc2VcbiAqIEBwYXJhbSBsb29rRGlyZWN0aW9uXG4gKiBAcGFyYW0gdHdpc3REaXJlY3Rpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVTcGluZShcbiAgcmlnOiBJS1JpZ0NvbXBvbmVudFR5cGUsXG4gIGNoYWluOiBDaGFpbixcbiAgaWtQb3NlOiBJS1Bvc2VDb21wb25lbnRUeXBlLFxuICBsb29rRGlyZWN0aW9uOiBWZWN0b3IzLFxuICB0d2lzdERpcmVjdGlvbjogVmVjdG9yM1xuKTogdm9pZCB7XG4gIGNvbnN0IGlkeF9hcnkgPSBbY2hhaW4uZmlyc3QoKSwgY2hhaW4ubGFzdCgpXSxcbiAgICBsb29rRGlyID0gdGVtcFZlYzEsXG4gICAgdHdpc3REaXIgPSB0ZW1wVmVjMlxuXG4gIGxldCBqID0gMCxcbiAgICBwb3NlQm9uZTogUG9zZUJvbmVMb2NhbFN0YXRlLFxuICAgIGJpbmRCb25lOiBQb3NlQm9uZUxvY2FsU3RhdGVcblxuICBmb3IgKGNvbnN0IGkgb2YgaWR4X2FyeSkge1xuICAgIC8vIEZpcnN0IGdldCByZWZlcmVuY2UgdG8gdGhlIEJvbmVzXG4gICAgYmluZEJvbmUgPSByaWcudHBvc2UuYm9uZXNbaV1cbiAgICBwb3NlQm9uZSA9IHJpZy5wb3NlLmJvbmVzW2ldXG5cbiAgICAvLyBDcmVhdGUgUXVhdCBJbnZlcnNlIERpcmVjdGlvblxuICAgIC8vIFRyYW5zZm9ybSB0aGUgSW52IERpciBieSB0aGUgQW5pbWF0ZWQgUG9zZSB0byBnZXQgdGhlaXIgZGlyZWN0aW9uXG5cbiAgICBjb25zdCBxdWF0SW52ZXJzZSA9IGJpbmRCb25lLndvcmxkLmludlF1YXRlcm5pb25cbiAgICBsb29rRGlyLmNvcHkobG9va0RpcmVjdGlvbikuYXBwbHlRdWF0ZXJuaW9uKHF1YXRJbnZlcnNlKS5hcHBseVF1YXRlcm5pb24ocG9zZUJvbmUud29ybGQucXVhdGVybmlvbilcbiAgICB0d2lzdERpci5jb3B5KHR3aXN0RGlyZWN0aW9uKS5hcHBseVF1YXRlcm5pb24ocXVhdEludmVyc2UpLmFwcGx5UXVhdGVybmlvbihwb3NlQm9uZS53b3JsZC5xdWF0ZXJuaW9uKVxuXG4gICAgLy8gU2F2ZSBJS1xuICAgIGlrUG9zZS5zcGluZVtqXS5sb29rRGlyZWN0aW9uLmNvcHkobG9va0RpcilcbiAgICBpa1Bvc2Uuc3BpbmVbal0udHdpc3REaXJlY3Rpb24uY29weSh0d2lzdERpcilcbiAgICBqKytcbiAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgdXBkYXRlZCBwb3NlIHRvIGdpdmVuIHJpZ1xuICogQHBhcmFtIHRhcmdldFJpZyB3aWxsIGJlIG1vZGlmaWVkXG4gKiBAcGFyYW0gaWtQb3NlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseUlLUG9zZVRvSUtSaWcodGFyZ2V0UmlnOiBJS1JpZ0NvbXBvbmVudFR5cGUsIGlrUG9zZTogSUtQb3NlQ29tcG9uZW50VHlwZSk6IHZvaWQge1xuICBhcHBseUhpcChpa1Bvc2UsIHRhcmdldFJpZylcblxuICBhcHBseUxpbWIoaWtQb3NlLCB0YXJnZXRSaWcsIHRhcmdldFJpZy5jaGFpbnMubGVnX2wsIGlrUG9zZS5sZWdfbClcbiAgYXBwbHlMaW1iKGlrUG9zZSwgdGFyZ2V0UmlnLCB0YXJnZXRSaWcuY2hhaW5zLmxlZ19yLCBpa1Bvc2UubGVnX3IpXG5cbiAgYXBwbHlMb29rVHdpc3QoaWtQb3NlLCB0YXJnZXRSaWcsICdmb290X2wnLCBGT1JXQVJELCBVUClcbiAgYXBwbHlMb29rVHdpc3QoaWtQb3NlLCB0YXJnZXRSaWcsICdmb290X3InLCBGT1JXQVJELCBVUClcbiAgYXBwbHlTcGluZShpa1Bvc2UsIHRhcmdldFJpZywgdGFyZ2V0UmlnLmNoYWlucy5zcGluZSwgaWtQb3NlLnNwaW5lLCBVUCwgRk9SV0FSRClcblxuICBpZiAodGFyZ2V0UmlnLmNoYWlucy5hcm1fbCkgYXBwbHlMaW1iKGlrUG9zZSwgdGFyZ2V0UmlnLCB0YXJnZXRSaWcuY2hhaW5zLmFybV9sLCBpa1Bvc2UuYXJtX2wpXG4gIGlmICh0YXJnZXRSaWcuY2hhaW5zLmFybV9yKSBhcHBseUxpbWIoaWtQb3NlLCB0YXJnZXRSaWcsIHRhcmdldFJpZy5jaGFpbnMuYXJtX3IsIGlrUG9zZS5hcm1fcilcblxuICBhcHBseUxvb2tUd2lzdChpa1Bvc2UsIHRhcmdldFJpZywgJ2hlYWQnLCBGT1JXQVJELCBVUClcblxuICAvLyB1cGRhdGUgcmVhbCBib25lcyB3aXRoIGNhbGN1bGF0ZWRcbiAgYXBwbHlQb3NlVG9SaWcodGFyZ2V0UmlnKVxufVxuXG4vKipcbiAqIHVwZGF0ZSBza2VsZXRvbiBib25lcyBieSBwb3NlIGJvbmVzIHN0YXRlc1xuICogQHBhcmFtIHRhcmdldFJpZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlQb3NlVG9SaWcodGFyZ2V0UmlnOiBJS1JpZ0NvbXBvbmVudFR5cGUpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXRSaWcucG9zZS5ib25lcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHBvc2VCb25lID0gdGFyZ2V0UmlnLnBvc2UuYm9uZXNbaV1cbiAgICBjb25zdCBhcm1hdHVyZUJvbmUgPSBwb3NlQm9uZS5ib25lXG5cbiAgICBhcm1hdHVyZUJvbmUucG9zaXRpb24uY29weShwb3NlQm9uZS5sb2NhbC5wb3NpdGlvbilcbiAgICBhcm1hdHVyZUJvbmUucXVhdGVybmlvbi5jb3B5KHBvc2VCb25lLmxvY2FsLnF1YXRlcm5pb24pXG4gICAgYXJtYXR1cmVCb25lLnNjYWxlLmNvcHkocG9zZUJvbmUubG9jYWwuc2NhbGUpXG4gIH1cbiAgdGFyZ2V0UmlnLnBvc2Uuc2tlbGV0b24udXBkYXRlKClcbn1cblxuLyoqXG4gKiBBcHBsaWVzIGhpcCBvZiB0aGUgaWsgcG9zZSB0byBpayByaWdcbiAqIEBwYXJhbSBpa1Bvc2VcbiAqIEBwYXJhbSByaWdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5SGlwKGlrUG9zZTogUmV0dXJuVHlwZTx0eXBlb2YgSUtQb3NlQ29tcG9uZW50LmdldD4sIHJpZzogSUtSaWdDb21wb25lbnRUeXBlKSB7XG4gIC8vIEZpcnN0IHN0ZXAgaXMgd2UgbmVlZCB0byBnZXQgYWNjZXNzIHRvIHRoZSBSaWcncyBUUG9zZSBhbmQgUG9zZSBIaXAgQm9uZS5cbiAgLy8gVGhlIGlkZWEgaXMgdG8gdHJhbnNmb3JtIG91ciBCaW5kIFBvc2UgaW50byBhIE5ldyBQb3NlIGJhc2VkIG9uIElLIERhdGFcbiAgY29uc3QgYm9uZUluZm8gPSByaWcucG9pbnRzLmhpcFxuICBjb25zdCBiaW5kID0gcmlnLnRwb3NlLmJvbmVzW2JvbmVJbmZvLmluZGV4XVxuXG4gIC8vIEFwcGx5IElLIFN3aW5nICYgVHdpc3QgKCBIQU5ETEUgUk9UQVRJT04gKVxuICAvLyBXaGVuIHdlIGNvbXB1dGUgdGhlIElLIEhpcCwgV2UgdXNlZCBxdWF0ZXJuaW9uIGludmVydCBkaXJlY3Rpb24gYW5kIGRlZmluZWQgdGhhdFxuICAvLyB0aGUgaGlwIGFsd2F5cyBwb2ludHMgaW4gdGhlIEZPUldBUkQgQXhpcywgc28gV2UgY2FuIHVzZSB0aGF0IHRvIHF1aWNreSBnZXQgU3dpbmcgUm90YXRpb25cbiAgLy8gVGFrZSBub3RlIHRoYXQgdmVnZXRhIGFuZCByb2JvcmV4J3MgSGlwcyBhcmUgY29tcGxldGVseSBkaWZmZXJlbnQgYnV0IGJ5IHVzaW5nIHRoYXQgaW52ZXJzZVxuICAvLyBkaXJlY3Rpb24gdHJpY2ssIHdlIGFyZSBlYXNpbHkgYWJsZSB0byBhcHBseSB0aGUgc2FtZSBtb3ZlbWVudCB0byBib3RoLlxuXG4gIGNvbnN0IHBhcmVudFJvdGF0aW9uID0gcmlnLnRwb3NlLmdldFBhcmVudFJvdGF0aW9uKGJvbmVJbmZvLmluZGV4KVxuXG4gIGNvbnN0IHEgPSB0ZW1wUXVhdDFcbiAgICAuc2V0RnJvbVVuaXRWZWN0b3JzKEZPUldBUkQsIGlrUG9zZS5oaXAuZGlyKSAvLyBDcmVhdGUgU3dpbmcgUm90YXRpb25cbiAgICAubXVsdGlwbHkoYmluZC53b3JsZC5xdWF0ZXJuaW9uKSAvLyBBcHBseSBpdCB0byBvdXIgV1MgUm90YXRpb25cblxuICAvLyBJZiBUaGVyZSBpcyBhIFR3aXN0IFZhbHVlLCBBcHBseSB0aGF0IGFzIGEgUHJlTXVsdGlwbGljYXRpb24uXG4gIGlmIChpa1Bvc2UuaGlwLnR3aXN0ICE9IDApIHEucHJlbXVsdGlwbHkodGVtcFF1YXQyLnNldEZyb21BeGlzQW5nbGUoaWtQb3NlLmhpcC5kaXIsIGlrUG9zZS5oaXAudHdpc3QpKVxuXG4gIC8vIEluIHRoZSBlbmQsIHdlIG5lZWQgdG8gY29udmVydCB0byBsb2NhbCBzcGFjZS4gU2ltcGx5IHByZW11bCBieSB0aGUgaW52ZXJzZSBvZiB0aGUgcGFyZW50XG4gIC8vIHBtdWxfaW52ZXJ0KHEsIHBhcmVudFJvdGF0aW9uKVxuICBxLnByZW11bHRpcGx5KHRlbXBRdWF0Mi5jb3B5KHBhcmVudFJvdGF0aW9uKS5pbnZlcnQoKSlcblxuICAvLyBUUkFOU0xBVElPTlxuICBjb25zdCBoX3NjbCA9IGJpbmQud29ybGQucG9zaXRpb24ueSAvIGlrUG9zZS5oaXAuYmluZF9oZWlnaHQgLy8gQ3JlYXRlIFNjYWxlIHZhbHVlIGZyb20gU3JjJ3MgSGlwIEhlaWdodCBhbmQgVGFyZ2V0J3MgSGlwIEhlaWdodFxuICBjb25zdCBwb3NpdGlvbiA9IHRlbXBWZWMxXG4gICAgLmNvcHkoaWtQb3NlLmhpcC5tb3ZlbWVudClcbiAgICAubXVsdGlwbHlTY2FsYXIoaF9zY2wpIC8vIFNjYWxlIHRoZSBUcmFuc2xhdGlvbiBEaWZmZXJuY2UgdG8gTWF0Y2ggdGhpcyBNb2RlbHMgU2NhbGVcbiAgICAuYWRkKGJpbmQud29ybGQucG9zaXRpb24pIC8vIFRoZW4gQWRkIHRoYXQgY2hhbmdlIHRvIHRoZSBUUG9zZSBQb3NpdGlvblxuXG4gIC8vIE1BWUJFIHdlIHdhbnQgdG8ga2VlcCB0aGUgc3RyaWRlIGRpc3RhbmNlIGV4YWN0LCB3ZSBjYW4gcmVzZXQgdGhlIFhaIHBvc2l0aW9uc1xuICAvLyBCVVQgd2UgbmVlZCB0byBrZWVwIHRoZSBZIE1vdmVtZW50IHNjYWxlZCwgZWxzZSBvdXIgbGVnIElLIHdvbid0IHdvcmsgd2VsbCBzaW5jZVxuICAvLyBvdXIgc291cmNlIGlzIHRhbGxlciB0aGVuIG91ciB0YXJnZXRzLCB0aGlzIHdpbGwgY2F1c2Ugb3VyIHRhcmdldCBsZWdzIHRvIGFsd2F5c1xuICAvLyBzdHJhaWdodGVuIG91dC5cbiAgLy8gcG9zaXRpb24ueCA9IGlrUG9zZS5oaXAubW92ZW1lbnQueDtcbiAgLy8gcG9zaXRpb24ueiA9IGlrUG9zZS5oaXAubW92ZW1lbnQuejtcblxuICBjb25zdCBwb3NlID0gcmlnLnBvc2UuYm9uZXNbYm9uZUluZm8uaW5kZXhdXG4gIHBvc2UubG9jYWwucXVhdGVybmlvbi5jb3B5KHEpIC8vIFNhdmUgTFMgcm90YXRpb24gdG8gcG9zZVxuICBwb3NlLmxvY2FsLnBvc2l0aW9uLmNvcHkocG9zaXRpb24pIC8vIFNhdmUgTFMgcm90YXRpb24gdG8gcG9zZVxuXG4gIHBvc2Uud29ybGQucG9zaXRpb24uY29weShyaWcucG9zZS5ib25lc1tib25lSW5mby5pbmRleF0ubG9jYWwucG9zaXRpb24pXG4gIHBvc2Uud29ybGQucXVhdGVybmlvbi5jb3B5KHJpZy5wb3NlLmJvbmVzW2JvbmVJbmZvLmluZGV4XS5sb2NhbC5xdWF0ZXJuaW9uKVxufVxuXG4vKipcbiAqIEFwcGxpZXMgbGltYnMgb2YgdGhlIGlrIHBvc2UgdG8gaWsgcmlnXG4gKiBAcGFyYW0gaWtQb3NlXG4gKiBAcGFyYW0gcmlnXG4gKiBAcGFyYW0gY2hhaW5cbiAqIEBwYXJhbSBsaW1iXG4gKiBAcGFyYW0gZ3JvdW5kaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseUxpbWIoXG4gIGlrUG9zZTogUmV0dXJuVHlwZTx0eXBlb2YgSUtQb3NlQ29tcG9uZW50LmdldD4sXG4gIHJpZzogSUtSaWdDb21wb25lbnRUeXBlLFxuICBjaGFpbjogQ2hhaW4sXG4gIGxpbWI6IElLUG9zZUxpbWJEYXRhLFxuICBncm91bmRpbmcgPSAwXG4pIHtcbiAgLy8gU2V0dXAgSUsgVGFyZ2V0XG4gIGNvbnN0IGJpbmRCb25lRGF0YSA9IHJpZy5wb3NlLmJvbmVzW2NoYWluLmZpcnN0KCldXG4gIGNvbnN0IGJpbmRCb25lID0gYmluZEJvbmVEYXRhLmJvbmVcblxuICBjb25zdCBwYXJlbnRUcmFuc2Zvcm0gPSB7XG4gICAgcG9zaXRpb246IHRlbXBWZWMxLFxuICAgIHF1YXRlcm5pb246IHRlbXBRdWF0MSxcbiAgICBzY2FsZTogdGVtcFZlYzJcbiAgfVxuICBjb25zdCBjaGlsZFRyYW5zZm9ybSA9IHtcbiAgICBwb3NpdGlvbjogdGVtcFZlYzMsXG4gICAgcXVhdGVybmlvbjogdGVtcFF1YXQyLFxuICAgIHNjYWxlOiB0ZW1wVmVjNFxuICB9XG5cbiAgYmluZEJvbmUucGFyZW50LmdldFdvcmxkUG9zaXRpb24ocGFyZW50VHJhbnNmb3JtLnBvc2l0aW9uKVxuICBiaW5kQm9uZS5wYXJlbnQuZ2V0V29ybGRRdWF0ZXJuaW9uKHBhcmVudFRyYW5zZm9ybS5xdWF0ZXJuaW9uKVxuICBiaW5kQm9uZS5wYXJlbnQuZ2V0V29ybGRTY2FsZShwYXJlbnRUcmFuc2Zvcm0uc2NhbGUpXG4gIGJpbmRCb25lLmdldFdvcmxkUG9zaXRpb24oY2hpbGRUcmFuc2Zvcm0ucG9zaXRpb24pXG4gIGJpbmRCb25lLmdldFdvcmxkUXVhdGVybmlvbihjaGlsZFRyYW5zZm9ybS5xdWF0ZXJuaW9uKVxuICBiaW5kQm9uZS5nZXRXb3JsZFNjYWxlKGNoaWxkVHJhbnNmb3JtLnNjYWxlKVxuXG4gIHJpZy5wb3NlLmdldF9wYXJlbnRfd29ybGQoY2hhaW4uZmlyc3QoKSwgcGFyZW50VHJhbnNmb3JtLCBjaGlsZFRyYW5zZm9ybSlcblxuICAvLyBIb3cgbXVjaCBvZiB0aGUgQ2hhaW4gbGVuZ3RoIHRvIHVzZSB0byBjYWxjIEVuZCBFZmZlY3RvclxuICAvLyBsZXQgbGVuID0gKHJpZy5sZWdfbGVuX2xtdCB8fCBjaGFpbi5sZW4pICogbGltYi5sZW5fc2NhbGVcbiAgbGV0IGxlbiA9IGNoYWluLmxlbmd0aCAqIGxpbWIubGVuZ3RoU2NhbGVcblxuICAvLyB0aGlzLnRhcmdldC5mcm9tX3Bvc19kaXIoIGNfdHJhbi5wb3MsIGxpbWIuZGlyLCBsaW1iLmpvaW50X2RpciwgbGVuICk7XHQvLyBTZXR1cCBJSyBUYXJnZXRcbiAgdGFyZ2V0RnJvbVBvc0Rpcihpa1Bvc2UsIGNoaWxkVHJhbnNmb3JtLnBvc2l0aW9uLCBsaW1iLmRpciwgbGltYi5qb2ludERpcmVjdGlvbiwgbGVuKVxuXG4gIC8vLy8vLy8vLy9cblxuICAvLyBUT0RPOiB0ZXN0IGl0LCBjdXJyZW50bHkgbm90IHVzZWQgaW4gYXBwbHkgKHNhbWUgYXMgaW4gb3JpZ2luYWwgbGliIGV4YW1wbGUpXG4gIGlmIChncm91bmRpbmcpIGFwcGx5R3JvdW5kaW5nKGlrUG9zZSwgZ3JvdW5kaW5nKVxuXG4gIC8vIC0tLS0tLS0tLSBJSyBTb2x2ZXJcbiAgY2hhaW4uaWtTb2x2ZXIoY2hhaW4sIHJpZy50cG9zZSwgcmlnLnBvc2UsIGlrUG9zZS5heGlzLCBpa1Bvc2UubGVuZ3RoLCBwYXJlbnRUcmFuc2Zvcm0pXG5cbiAgLy8gYXBwbHkgY2FsY3VsYXRlZCBwb3NpdGlvbnMgdG8gXCJyZWFsXCIgYm9uZXNcbiAgY2hhaW4uY2hhaW5Cb25lcy5mb3JFYWNoKCh7IGluZGV4OiBib25lSW5kZXggfSkgPT4ge1xuICAgIGNvbnN0IHBvc2VCb25lID0gcmlnLnBvc2UuYm9uZXNbYm9uZUluZGV4XVxuXG4gICAgcG9zZUJvbmUuYm9uZS5wb3NpdGlvbi5jb3B5KHBvc2VCb25lLmxvY2FsLnBvc2l0aW9uKVxuICAgIHBvc2VCb25lLmJvbmUucXVhdGVybmlvbi5jb3B5KHBvc2VCb25lLmxvY2FsLnF1YXRlcm5pb24pXG4gICAgcG9zZUJvbmUuYm9uZS5zY2FsZS5jb3B5KHBvc2VCb25lLmxvY2FsLnNjYWxlKVxuICB9KVxufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gaWtQb3NlIHdpbGwgYmUgbW9kaWZpZWRcbiAqIEBwYXJhbSBwb3NcbiAqIEBwYXJhbSBkaXJcbiAqIEBwYXJhbSB1cF9kaXJcbiAqIEBwYXJhbSBsZW5fc2NsXG4gKi9cbmZ1bmN0aW9uIHRhcmdldEZyb21Qb3NEaXIoXG4gIGlrUG9zZTogSUtQb3NlQ29tcG9uZW50VHlwZSxcbiAgcG9zOiBWZWN0b3IzLFxuICBkaXI6IFZlY3RvcjMsXG4gIHVwX2RpcjogVmVjdG9yMyxcbiAgbGVuX3NjbDogbnVtYmVyXG4pOiB2b2lkIHtcbiAgaWtQb3NlLnN0YXJ0UG9zaXRpb24uY29weShwb3MpXG4gIGlrUG9zZS5lbmRQb3NpdGlvblxuICAgIC5jb3B5KGRpcilcbiAgICAubXVsdGlwbHlTY2FsYXIobGVuX3NjbCkgLy8gQ29tcHV0ZSBFbmQgRWZmZWN0b3JcbiAgICAuYWRkKHBvcylcblxuICBjb25zdCBsZW5fc3FyID0gaWtQb3NlLnN0YXJ0UG9zaXRpb24uZGlzdGFuY2VUb1NxdWFyZWQoaWtQb3NlLmVuZFBvc2l0aW9uKVxuICBpa1Bvc2UubGVuZ3RoID0gTWF0aC5zcXJ0KGxlbl9zcXIpXG5cbiAgaWtQb3NlLmF4aXMuZnJvbURpcmVjdGlvbihkaXIsIHVwX2RpcikgLy8gVGFyZ2V0IEF4aXNcbn1cblxuLyoqXG4gKiBBcHBseSBsb29rL3R3aXN0IHBhcnQgb2YgdGhlIHBvc2UgdG8gdGhlIHRhcmdldCByaWdcbiAqIEBwYXJhbSBpa1Bvc2VcbiAqIEBwYXJhbSByaWcgYXBwbHkgdGhlIHBvc2UgdG8gdGhpcyByaWdcbiAqIEBwYXJhbSBib25lTmFtZVxuICogQHBhcmFtIGxvb2tEaXJlY3Rpb25cbiAqIEBwYXJhbSB0d2lzdERpcmVjdGlvblxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5TG9va1R3aXN0KFxuICBpa1Bvc2U6IElLUG9zZUNvbXBvbmVudFR5cGUsXG4gIHJpZzogSUtSaWdDb21wb25lbnRUeXBlLFxuICBib25lTmFtZTogc3RyaW5nLFxuICBsb29rRGlyZWN0aW9uOiBWZWN0b3IzLFxuICB0d2lzdERpcmVjdGlvbjogVmVjdG9yM1xuKSB7XG4gIC8vIEZpcnN0IHdlIG5lZWQgdG8gZ2V0IHRoZSBXUyBSb3RhdGlvbiBvZiB0aGUgcGFyZW50IHRvIHRoZSBGb290XG4gIC8vIFRoZW4gQWRkIHRoZSBGb290J3MgTFMgQmluZCByb3RhdGlvbi4gVGhlIGlkZWEgaXMgdG8gc2VlIHdoZXJlXG4gIC8vIHRoZSBmb290IHdpbGwgY3VycmVudGx5IGJlIGlmIGl0IGhhcyB5ZXQgdG8gaGF2ZSBhbnkgcm90YXRpb25cbiAgLy8gYXBwbGllZCB0byBpdC5cbiAgY29uc3QgYm9uZUluZm8gPSByaWcucG9pbnRzW2JvbmVOYW1lXSxcbiAgICBpazogSUtQb3NlTG9va1R3aXN0ID0gaWtQb3NlW2JvbmVOYW1lXVxuXG4gIGNvbnN0IGJpbmQgPSByaWcudHBvc2UuYm9uZXNbYm9uZUluZm8uaW5kZXhdXG5cbiAgY29uc3Qgcm9vdFF1YXRlcm5pb24gPSByaWcucG9zZS5nZXRQYXJlbnRSb3RhdGlvbihib25lSW5mby5pbmRleClcbiAgY29uc3QgY2hpbGRSb3RhdGlvbiA9IHRlbXBRdWF0MS5jb3B5KHJvb3RRdWF0ZXJuaW9uKS5tdWx0aXBseShiaW5kLmxvY2FsLnF1YXRlcm5pb24pXG5cbiAgLy8gTmV4dCB3ZSBuZWVkIHRvIGdldCB0aGUgRm9vdCdzIFF1YXRlcm5pb24gSW52ZXJzZSBEaXJlY3Rpb25cbiAgLy8gV2hpY2ggbWF0Y2hlcyB1cCB3aXRoIHRoZSBzYW1lIERpcmVjdGlvbnMgdXNlZCB0byBjYWxjdWxhdGUgdGhlIElLXG4gIC8vIGluZm9ybWF0aW9uLlxuICBjb25zdCBxdWF0SW52ZXJzZSA9IGJpbmQud29ybGQuaW52UXVhdGVybmlvblxuXG4gIGNvbnN0IGFsdExvb2tEaXJlY3Rpb24gPSB0ZW1wVmVjMS5jb3B5KGxvb2tEaXJlY3Rpb24pLmFwcGx5UXVhdGVybmlvbihxdWF0SW52ZXJzZSksXG4gICAgYWx0VHdpc3REaXJlY3Rpb24gPSB0ZW1wVmVjMi5jb3B5KHR3aXN0RGlyZWN0aW9uKS5hcHBseVF1YXRlcm5pb24ocXVhdEludmVyc2UpXG5cbiAgLy8gQWZ0ZXIgdGhlIEhJUCB3YXMgbW92ZWQgYW5kIFRoZSBMaW1iIElLIGlzIGNvbXBsZXRlLCBUaGlzIGlzIHdoZXJlXG4gIC8vIHRoZSBBTFQgTG9vayBEaXJlY3Rpb24gY3VycmVudGx5IHBvaW50cyB0by5cbiAgY29uc3QgY3VycmVudExvb2tEaXJlY3Rpb24gPSB0ZW1wVmVjMy5jb3B5KGFsdExvb2tEaXJlY3Rpb24pLmFwcGx5UXVhdGVybmlvbihjaGlsZFJvdGF0aW9uKVxuXG4gIC8vIE5vdyB3ZSBzdGFydCBidWlsZGluZyBvdXQgZmluYWwgcm90YXRpb24gdGhhdCB3ZVxuICAvLyB3YW50IHRvIGFwcGx5IHRvIHRoZSBib25lIHRvIGdldCBpdCBwb2ludGluZyBhdCB0aGVcbiAgLy8gcmlnaHQgZGlyZWN0aW9uIGFuZCB0d2lzdGVkIHRvIG1hdGNoIHRoZSBvcmlnaW5hbCBhbmltYXRpb24uXG4gIGNvbnN0IHJvdGF0aW9uID0gdGVtcFF1YXQyLnNldEZyb21Vbml0VmVjdG9ycyhjdXJyZW50TG9va0RpcmVjdGlvbiwgaWsubG9va0RpcmVjdGlvbikgLy8gQ3JlYXRlIG91ciBTd2luZyBSb3RhdGlvblxuICByb3RhdGlvbi5tdWx0aXBseShjaGlsZFJvdGF0aW9uKSAvLyBUaGVuIEFwcGx5IHRvIG91ciBmb290XG5cbiAgLy8gTm93IHdlIG5lZWQgdG8ga25vdyB3aGVyZSB0aGUgVHdpc3QgRGlyZWN0aW9uIHBvaW50cyB0byBhZnRlclxuICAvLyBzd2luZyByb3RhdGlvbiBoYXMgYmVlbiBhcHBsaWVkLiBUaGVuIHVzZSBpdCB0byBjb21wdXRlIG91ciB0d2lzdCByb3RhdGlvbi5cbiAgY29uc3QgY3VycmVudFR3aXN0RGlyZWN0aW9uID0gYWx0VHdpc3REaXJlY3Rpb24uYXBwbHlRdWF0ZXJuaW9uKHJvdGF0aW9uKVxuICBjb25zdCB0d2lzdCA9IHRlbXBRdWF0MS5zZXRGcm9tVW5pdFZlY3RvcnMoY3VycmVudFR3aXN0RGlyZWN0aW9uLCBpay50d2lzdERpcmVjdGlvbilcbiAgcm90YXRpb24ucHJlbXVsdGlwbHkodHdpc3QpIC8vIEFwcGx5IFR3aXN0XG5cbiAgcm90YXRpb24ucHJlbXVsdGlwbHkodGVtcFF1YXQxLmNvcHkocm9vdFF1YXRlcm5pb24pLmludmVydCgpKSAvLyBUbyBMb2NhbCBTcGFjZVxuXG4gIHJpZy5wb3NlLnNldEJvbmUoYm9uZUluZm8uaW5kZXgsIHJvdGF0aW9uKSAvLyBTYXZlIHRvIHBvc2UuXG59XG5cbi8qKlxuICogS2VlcCB0aGUgZmVldCBvbiB0aGUgZ3JvdW5kXG4gKiBAcGFyYW0gaWtQb3NlXG4gKiBAcGFyYW0geUxpbWl0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseUdyb3VuZGluZyhpa1Bvc2U6IElLUG9zZUNvbXBvbmVudFR5cGUsIHlMaW1pdDogbnVtYmVyKTogdm9pZCB7XG4gIC8vIE9uY2Ugd2UgaGF2ZSBvdXQgSUsgVGFyZ2V0IHNldHVwLCBXZSBjYW4gdXNlIGl0cyBkYXRhIHRvIHRlc3QgdmFyaW91cyB0aGluZ3NcbiAgLy8gRmlyc3Qgd2UgY2FuIHRlc3QgaWYgdGhlIGVuZCBlZmZlY3RvciBpcyBiZWxvdyB0aGUgaGVpZ2h0IGxpbWl0LiBFYWNoIGZvb3RcbiAgLy8gbWF5IG5lZWQgYSBkaWZmZXJlbnQgb2ZmIHRoZSBncm91bmQgb2Zmc2V0IHNpbmNlIHRoZSBib25lcyByYXJlbHkgdG91Y2ggdGhlIGZsb29yXG4gIC8vIHBlcmZlY3RseS5cblxuICAvLyBXaGVyZSBvbiB0aGUgbGluZSBiZXR3ZWVuIHRoZSBTdGFydCBhbmQgZW5kIFBvaW50cyB3b3VsZCB3b3JrIGZvciBvdXJcbiAgLy8gWSBMaW1pdC4gQW4gZWFzeSBzb2x1dGlvbiBpcyB0byBmaW5kIHRoZSBTQ0FMRSBiYXNlZCBvbiBkb2luZyBhIDFEIFNjYWxlXG4gIC8vb3BlcmF0aW9uIG9uIHRoZSBZIFZhbHVlcyBvbmx5LiBXaGF0ZXZlciBzY2FsZSB2YWx1ZSB3ZSBnZXQgd2l0aCBZIHdlIGNhbiB1c2Ugb24gWCBhbmQgWlxuICBjb25zdCBhID0gaWtQb3NlLnN0YXJ0UG9zaXRpb24sXG4gICAgYiA9IGlrUG9zZS5lbmRQb3NpdGlvbixcbiAgICBzID0gKHlMaW1pdCAtIGEueSkgLyAoYi55IC0gYS55KSAvLyBOb3JtYWxpemUgTGltaXQgVmFsdWUgaW4gdGhlIE1heC9NaW4gUmFuZ2Ugb2YgWS5cblxuICAvLyBDaGFuZ2UgdGhlIGVuZCBlZmZlY3RvciBvZiBvdXIgdGFyZ2V0XG4gIGlrUG9zZS5lbmRQb3NpdGlvbi5zZXQoKGIueCAtIGEueCkgKiBzICsgYS54LCB5TGltaXQsIChiLnogLSBhLnopICogcyArIGEueilcblxuICAvLyBTaW5jZSB3ZSBjaGFuZ2VkIHRoZSBlbmQgZWZmZWN0b3IsIGxldHMgdXBkYXRlIHRoZSBTcXIgTGVuZ3RoIGFuZCBMZW5ndGggb2Ygb3VyIHRhcmdldFxuICAvLyBUaGlzIGlzIG5vcm1hbGx5IGNvbXB1dGVkIGJ5IG91ciBJSyBUYXJnZXQgd2hlbiB3ZSBzZXQgaXQsIGJ1dCBzaW5jZSBJIGRpZG4ndCBib3RoZXJcbiAgLy8gdG8gY3JlYXRlIGEgbWV0aG9kIHRvIHVwZGF0ZSB0aGUgZW5kIGVmZmVjdG9yLCB3ZSBuZWVkIHRvIGRvIHRoZXNlIGV4dHJhIHVwZGF0ZXMuXG4gIGNvbnN0IGRpc3RhbmNlID0gaWtQb3NlLnN0YXJ0UG9zaXRpb24uZGlzdGFuY2VUbyhpa1Bvc2UuZW5kUG9zaXRpb24pXG4gIGlrUG9zZS5sZW5ndGggPSBkaXN0YW5jZVxufVxuXG4vKipcbiAqIEFwcGx5IHRoZSBwb3NlIHRvIHRoZSB0YXJnZXQgcmlnXG4gKiBAcGFyYW0gaWtQb3NlXG4gKiBAcGFyYW0gcmlnXG4gKiBAcGFyYW0gY2hhaW5cbiAqIEBwYXJhbSBpa1xuICogQHBhcmFtIGxvb2tEaXJlY3Rpb25cbiAqIEBwYXJhbSB0d2lzdERpcmVjdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlTcGluZShcbiAgaWtQb3NlOiBJS1Bvc2VDb21wb25lbnRUeXBlLFxuICByaWc6IElLUmlnQ29tcG9uZW50VHlwZSxcbiAgY2hhaW46IENoYWluLFxuICBpazogSUtQb3NlU3BpbmVEYXRhLFxuICBsb29rRGlyZWN0aW9uOiBWZWN0b3IzLFxuICB0d2lzdERpcmVjdGlvbjogVmVjdG9yM1xuKSB7XG4gIC8vIEZvciB0aGUgc3BpbmUsIHdlIGhhdmUgdGhlIHN0YXJ0IGFuZCBlbmQgSUsgZGlyZWN0aW9ucy4gU2luY2Ugc3BpbmVzIGNhbiBoYXZlIHZhcmlvdXNcbiAgLy8gYW1vdW50IG9mIGJvbmVzLCB0aGUgc2ltcGxlc3Qgc29sdXRpb24gaXMgdG8gbGVycCBmcm9tIHN0YXJ0IHRvIGZpbmlzaC4gVGhlIGZpcnN0XG4gIC8vIHNwaW5lIGJvbmUgaXMgaW1wb3J0YW50IHRvIGNvbnRyb2wgb2Zmc2V0cyBmcm9tIHRoZSBoaXBzLCBhbmQgdGhlIGZpbmFsIG9uZSB1c3VhbGx5XG4gIC8vIGNvbnRyb2xzIHRoZSBjaGVzdCB3aGljaCBkaWN0YXRlcyB3aGVyZSB0aGUgYXJtcyBhbmQgaGVhZCBhcmUgZ29pbmcgdG8gYmUgbG9jYXRlZC5cbiAgLy8gQW55dGhpbmcgYmV0d2VlbiBpcyBob3cgdGhlIHNwaW5lIHdvdWxkIGtpbmQgb2YgcmVhY3QuXG4gIC8vIFNpbmNlIHdlIGFyZSBidWlsZGluZyB1cCB0aGUgU2tlbGV0b24sIFdlIGxvb2sgYXQgdGhlIHBvc2Ugb2JqZWN0IHRvIGtub3cgd2hlcmUgdGhlIEhpcHNcbiAgLy8gY3VycmVudGx5IGV4aXN0IGluIFdvcmxkIFNwYWNlLlxuXG4gIGNvbnN0IGJvbmVJbmZvID0gcmlnLnBvc2UuYm9uZXNbY2hhaW4uZmlyc3QoKV1cbiAgY29uc3QgcGFyZW50SW5mbyA9IHJpZy5wb3NlLmJvbmVzW2JvbmVJbmZvLnBfaWR4XVxuXG4gIC8vIFRPRE86IHJpZy5wb3NlLmdldF9wYXJlbnRfd29ybGQoIGNoYWluLmZpcnN0KCkgKVxuXG4gIC8vIENvcHkgYm9uZSB0byBvdXIgdHJhbnNmb3JtIHZhcmlhYmxlcyB0byB3b3JrIG9uIHRoZW1cbiAgaWtQb3NlLnNwaW5lUGFyZW50UG9zaXRpb24uY29weShwYXJlbnRJbmZvLmxvY2FsLnBvc2l0aW9uKVxuICBpa1Bvc2Uuc3BpbmVDaGlsZFBvc2l0aW9uLmNvcHkoYm9uZUluZm8ubG9jYWwucG9zaXRpb24pXG5cbiAgaWtQb3NlLnNwaW5lUGFyZW50UXVhdGVybmlvbi5jb3B5KHBhcmVudEluZm8ubG9jYWwucXVhdGVybmlvbilcbiAgaWtQb3NlLnNwaW5lQ2hpbGRRdWF0ZXJuaW9uLmNvcHkoYm9uZUluZm8ubG9jYWwucXVhdGVybmlvbilcblxuICBpa1Bvc2Uuc3BpbmVQYXJlbnRTY2FsZS5jb3B5KHBhcmVudEluZm8ubG9jYWwuc2NhbGUpXG4gIGlrUG9zZS5zcGluZUNoaWxkU2NhbGUuY29weShib25lSW5mby5sb2NhbC5zY2FsZSlcblxuICBjb25zdCBjbnQgPSBjaGFpbi5jbnQgLSAxXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPD0gY250OyBpKyspIHtcbiAgICAvLyBQcmVwYXJlIGZvciB0aGUgSXRlcmF0aW9uXG4gICAgY29uc3QgYm9uZUluZGV4ID0gY2hhaW4uY2hhaW5Cb25lc1tpXS5pbmRleCAvLyBCb25lIEluZGV4XG4gICAgY29uc3QgYm9uZUJpbmQgPSByaWcudHBvc2UuYm9uZXNbYm9uZUluZGV4XSAvLyBCaW5kIFZhbHVlcyBvZiB0aGUgQm9uZVxuICAgIGNvbnN0IHQgPSBpIC8gY250IC8vICoqIDI7XHRcdC8vIFRoZSBMZXJwIFRpbWUsIGJlIDAgb24gZmlyc3QgYm9uZSwgMSBhdCBmaW5hbCBib25lLCBDYW4gdXNlIGN1cnZlcyB0byBkaXN0cmlidXRlIHRoZSBsZXJwIGRpZmZlcmVudGx5XG5cbiAgICAvLyBHZXQgYm9uZSBpbiBXUyB0aGF0IGhhcyB5ZXQgdG8gaGF2ZSBhbnkgcm90YXRpb24gYXBwbGllZFxuICAgIC8vIGNoaWxkVHJhbnNmb3JtLnNldEZyb21BZGQocGFyZW50VHJhbnNmb3JtLCBiaW5kKTtcblxuICAgIC8vIFBPU0lUSU9OIC0gcGFyZW50LnBvc2l0aW9uICsgKCBwYXJlbnQucXVhdGVybmlvbiAqICggcGFyZW50LnNjYWxlICogY2hpbGQucG9zaXRpb24gKSApXG4gICAgY29uc3QgdiA9IHRlbXBWZWMxXG4gICAgICAuY29weShpa1Bvc2Uuc3BpbmVQYXJlbnRTY2FsZSlcbiAgICAgIC5tdWx0aXBseShib25lQmluZC5sb2NhbC5wb3NpdGlvbikgLy8gcGFyZW50LnNjYWxlICogY2hpbGQucG9zaXRpb247XG4gICAgICAuYXBwbHlRdWF0ZXJuaW9uKGlrUG9zZS5zcGluZVBhcmVudFF1YXRlcm5pb24pIC8vVmVjMy50cmFuc2Zvcm1RdWF0KCB2LCB0cC5xdWF0ZXJuaW9uLCB2ICk7XG4gICAgaWtQb3NlLnNwaW5lQ2hpbGRQb3NpdGlvbi5jb3B5KGlrUG9zZS5zcGluZVBhcmVudFBvc2l0aW9uKS5hZGQodikgLy8gVmVjMy5hZGQoIHRwLnBvc2l0aW9uLCB2LCB0aGlzLnBvc2l0aW9uICk7XG5cbiAgICAvLyBTQ0FMRSAtIHBhcmVudC5zY2FsZSAqIGNoaWxkLnNjYWxlXG4gICAgaWtQb3NlLnNwaW5lQ2hpbGRTY2FsZS5jb3B5KGlrUG9zZS5zcGluZVBhcmVudFNjYWxlKS5tdWx0aXBseShib25lQmluZC5sb2NhbC5zY2FsZSlcblxuICAgIC8vIFJPVEFUSU9OIC0gcGFyZW50LnF1YXRlcm5pb24gKiBjaGlsZC5xdWF0ZXJuaW9uXG4gICAgaWtQb3NlLnNwaW5lQ2hpbGRRdWF0ZXJuaW9uLmNvcHkoaWtQb3NlLnNwaW5lUGFyZW50UXVhdGVybmlvbikubXVsdGlwbHkoYm9uZUJpbmQubG9jYWwucXVhdGVybmlvbilcblxuICAgIC8vIENvbXB1dGUgb3VyIFF1YXQgSW52ZXJzZSBEaXJlY3Rpb24sIHVzaW5nIHRoZSBEZWZpbmVkIExvb2smVHdpc3QgRGlyZWN0aW9uXG4gICAgY29uc3QgaW52UXVhdCA9IGJvbmVCaW5kLndvcmxkLmludlF1YXRlcm5pb25cbiAgICBjb25zdCBhbHRMb29rID0gdGVtcFZlYzMuY29weShsb29rRGlyZWN0aW9uKS5hcHBseVF1YXRlcm5pb24oaW52UXVhdClcbiAgICBjb25zdCBhbHRUd2lzdCA9IHRlbXBWZWM0LmNvcHkodHdpc3REaXJlY3Rpb24pLmFwcGx5UXVhdGVybmlvbihpbnZRdWF0KVxuXG4gICAgY29uc3QgY3VycmVudExvb2sgPSBhbHRMb29rLmFwcGx5UXVhdGVybmlvbihpa1Bvc2Uuc3BpbmVDaGlsZFF1YXRlcm5pb24pIC8vIFdoYXQgZGlyZWN0aW9uIGlzIHRoZSBib25lIHBvaW50IGxvb2tpbmcgbm93LCB3aXRob3V0IGFueSBleHRyYSByb3RhdGlvblxuXG4gICAgLy8gTGVycCBvdXIgVGFyZ2V0IElLIERpcmVjdGlvbnMgZm9yIHRoaXMgYm9uZVxuICAgIGNvbnN0IGlrTG9vayA9IHRlbXBWZWMxLmxlcnBWZWN0b3JzKGlrWzBdLmxvb2tEaXJlY3Rpb24sIGlrWzFdLmxvb2tEaXJlY3Rpb24sIHQpXG4gICAgY29uc3QgaWtUd2lzdCA9IHRlbXBWZWMyLmxlcnBWZWN0b3JzKGlrWzBdLnR3aXN0RGlyZWN0aW9uLCBpa1sxXS50d2lzdERpcmVjdGlvbiwgdClcblxuICAgIGNvbnN0IHJvdGF0aW9uID0gdGVtcFF1YXQyXG4gICAgICAuc2V0RnJvbVVuaXRWZWN0b3JzKGN1cnJlbnRMb29rLCBpa0xvb2spIC8vIENyZWF0ZSBvdXIgU3dpbmcgUm90YXRpb25cbiAgICAgIC5tdWx0aXBseShpa1Bvc2Uuc3BpbmVDaGlsZFF1YXRlcm5pb24pIC8vIFRoZW4gQXBwbHkgdG8gb3VyIEJvbmUsIHNvIGl0cyBub3cgc3dvbmcgdG8gbWF0Y2ggdGhlIHN3aW5nIGRpcmVjdGlvbi5cblxuICAgIGNvbnN0IGN1cnJlbnRUd2lzdCA9IGFsdFR3aXN0LmFwcGx5UXVhdGVybmlvbihyb3RhdGlvbikgLy8gR2V0IG91ciBDdXJyZW50IFR3aXN0IERpcmVjdGlvbiBmcm9tIE91ciBTd2luZyBSb3RhdGlvblxuICAgIGNvbnN0IHF1YXQgPSB0ZW1wUXVhdDEuc2V0RnJvbVVuaXRWZWN0b3JzKGN1cnJlbnRUd2lzdCwgaWtUd2lzdCkgLy8gQ3JlYXRlIG91ciB0d2lzdCByb3RhdGlvblxuICAgIHJvdGF0aW9uLnByZW11bHRpcGx5KHF1YXQpIC8vIEFwcGx5IFR3aXN0IHNvIG5vdyBpdCBtYXRjaGVzIG91ciBJSyBUd2lzdCBkaXJlY3Rpb25cblxuICAgIGNvbnN0IHNwaW5lUGFyZW50UXVhdGVybmlvbkludmVyc2UgPSB0ZW1wUXVhdDEuY29weShpa1Bvc2Uuc3BpbmVQYXJlbnRRdWF0ZXJuaW9uKS5pbnZlcnQoKVxuXG4gICAgcm90YXRpb24ucHJlbXVsdGlwbHkoc3BpbmVQYXJlbnRRdWF0ZXJuaW9uSW52ZXJzZSkgLy8gVG8gTG9jYWwgU3BhY2VcblxuICAgIHJpZy5wb3NlLnNldEJvbmUoYm9uZUluZGV4LCByb3RhdGlvbikgLy8gU2F2ZSByZXN1bHQgdG8gYm9uZS5cbiAgICAvLyByaWcucG9zZS5ib25lc1tib25lSW5kZXhdLmJvbmUuc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbihyb3RhdGlvbikgLy8gU2F2ZSByZXN1bHQgdG8gYm9uZS5cbiAgICAvLyByaWcucG9zZS5ib25lc1tib25lSW5kZXhdLmxvY2FsLnF1YXRlcm5pb24uY29weShyb3RhdGlvbikgLy8gU2F2ZSByZXN1bHQgdG8gYm9uZS5cblxuICAgIGlmICh0ICE9IDEpIHtcbiAgICAgIC8vIE9SSUdJTkFMIENPREUgaXNcbiAgICAgIC8vIHRoaXMuYWRkKGlrUG9zZS5zcGluZVBhcmVudFF1YXRlcm5pb24sIHJvdGF0aW9uLCBib25lQmluZFZhbHVlLnBvc2l0aW9uLCBib25lQmluZFZhbHVlLnNjYWxlKTsgLy8gQ29tcHV0ZSB0aGUgV1MgVHJhbnNmb3JtIGZvciB0aGUgbmV4dCBib25lIGluIHRoZSBjaGFpbi5cbiAgICAgIGNvbnN0IHBhcmVudFNjYWxlQ2hpbGRQb3NpdGlvbiA9IHRlbXBWZWMxXG4gICAgICAgIC5jb3B5KGlrUG9zZS5zcGluZVBhcmVudFNjYWxlKVxuICAgICAgICAubXVsdGlwbHkoYm9uZUJpbmQubG9jYWwucG9zaXRpb24pXG4gICAgICAgIC5hcHBseVF1YXRlcm5pb24oaWtQb3NlLnNwaW5lUGFyZW50UXVhdGVybmlvbilcbiAgICAgIC8vIFBPU0lUSU9OIC0gcGFyZW50LnBvc2l0aW9uICsgKCBwYXJlbnQucXVhdGVybmlvbiAqICggcGFyZW50LnNjYWxlICogY2hpbGQucG9zaXRpb24gKSApXG4gICAgICAvLyBUT0RPOiBNdWx0aXBsaWVkIGluIHByb3BlciBvcmRlcj9cbiAgICAgIGlrUG9zZS5zcGluZVBhcmVudFBvc2l0aW9uLmNvcHkoaWtQb3NlLnNwaW5lUGFyZW50UG9zaXRpb24pLmFkZChwYXJlbnRTY2FsZUNoaWxkUG9zaXRpb24pXG4gICAgICAvLyBTQ0FMRSAtIHBhcmVudC5zY2FsZSAqIGNoaWxkLnNjYWxlXG4gICAgICBpa1Bvc2Uuc3BpbmVQYXJlbnRTY2FsZS5tdWx0aXBseShib25lQmluZC5sb2NhbC5zY2FsZSlcbiAgICAgIC8vIFJPVEFUSU9OIC0gcGFyZW50LnF1YXRlcm5pb24gKiBjaGlsZC5xdWF0ZXJuaW9uXG4gICAgICBpa1Bvc2Uuc3BpbmVQYXJlbnRRdWF0ZXJuaW9uLm11bHRpcGx5KHJvdGF0aW9uKVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gcG9zZVxuICogQHBhcmFtIGRpclxuICogQHBhcmFtIGJvbmVOYW1lc1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWxpZ25DaGFpbihwb3NlOiBQb3NlLCBkaXI6IFZlY3RvcjMsIGJvbmVOYW1lczogc3RyaW5nW10pIHtcbiAgY29uc3QgYUVuZCA9IGJvbmVOYW1lcy5sZW5ndGggLSAxIC8vIEVuZCBJbmRleFxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDw9IGFFbmQ7IGkrKykge1xuICAgIGxldCBib25lOiBPYmplY3QzRCA9IHBvc2Uuc2tlbGV0b24uYm9uZXMuZmluZCgoYm9uZSkgPT4gKGJvbmUubmFtZSA9IGJvbmVOYW1lc1tpXSkpIC8vIEJvbmUgUmVmZXJlbmNlXG5cbiAgICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG4gICAgLy8gVXAgZGlyZWN0aW9uIGlzIHdoZXJlIHdlIG5lZWQgdGhlIGJvbmUgdG8gcG9pbnQgdG8uXG4gICAgLy8gV2UgdGhlbiBnZXQgdGhlIGJvbmUncyBjdXJyZW50IGZvcndhcmQgZGlyZWN0aW9uLCB1c2UgaXRcbiAgICAvLyB0byBnZXQgaXRzIGxlZnQsIHRoZW4gZmluaXNoIGl0IG9mZiBieSByZWNhbGN1bGF0aW5nXG4gICAgLy8gZndkIHRvIG1ha2UgaXQgb3J0aG9nb25hbC4gV2FudCB0byB0cnkgdG8ga2VlcCB0aGUgb3JpZW50YXRpb25cbiAgICAvLyB3aGlsZSAoIGZ3ZCwgbGZ0ICkgcmVhbGlnbmluZyB0aGUgdXAgZGlyZWN0aW9uLlxuICAgIGNvbnN0IGNoaWxkV29ybGRRID0gdGVtcFF1YXQxXG4gICAgYm9uZS5nZXRXb3JsZFF1YXRlcm5pb24oY2hpbGRXb3JsZFEpXG5cbiAgICBjb25zdCBmb3J3YXJkRGlyID0gdGVtcFZlYzEuY29weShGT1JXQVJEKS5hcHBseVF1YXRlcm5pb24oY2hpbGRXb3JsZFEpIC8vIEZpbmQgQm9uZSdzIEZvcndhcmQgV29ybGQgRGlyZWN0aW9uXG4gICAgY29uc3QgbGVmdERpciA9IHRlbXBWZWMyLmNyb3NzVmVjdG9ycyh1cERpciwgZm9yd2FyZERpcikubm9ybWFsaXplKCkgLy8gR2V0IFdvcmxkIExlZnRcbiAgICBmb3J3YXJkRGlyLmNyb3NzVmVjdG9ycyhsZWZ0RGlyLCB1cERpcikubm9ybWFsaXplKCkgLy8gUmVhbGlnbiBGb3J3YXJkXG4gICAgY29uc3QgdXBEaXIgPSB0ZW1wVmVjMy5jb3B5KGRpcilcblxuICAgIGNvbnN0IGZpbmFsUm90YXRpb24gPSB0ZW1wUXVhdDJcbiAgICB0ZW1wTWF0Lm1ha2VCYXNpcyhsZWZ0RGlyLCB1cERpciwgZm9yd2FyZERpcilcbiAgICBmaW5hbFJvdGF0aW9uLnNldEZyb21Sb3RhdGlvbk1hdHJpeCh0ZW1wTWF0KSAvLyBDcmVhdGUgUm90YXRpb24gZnJvbSByb3QgTWF0cml4XG5cbiAgICBpZiAoZmluYWxSb3RhdGlvbi5kb3QoY2hpbGRXb3JsZFEpIDwgMCkgbmVnYXRlUXVhdChmaW5hbFJvdGF0aW9uKSAvLyBEbyBhIEludmVydGVkIHJvdGF0aW9uIGNoZWNrLCBuZWdhdGUgaXQgaWYgdW5kZXIgemVyby5cblxuICAgIGNvbnN0IHBhcmVudFdvcmxkUSA9IHRlbXBRdWF0MVxuICAgIGJvbmUuZ2V0V29ybGRRdWF0ZXJuaW9uKHBhcmVudFdvcmxkUSlcblxuICAgIC8vci5wbXVsKCBxLmZyb21faW52ZXJ0KCBwdC5yb3QgKSApO1x0XHQvLyBNb3ZlIHJvdGF0aW9uIHRvIGxvY2FsIHNwYWNlXG4gICAgcG11bEludmVydChmaW5hbFJvdGF0aW9uLCBwYXJlbnRXb3JsZFEpIC8vIE1vdmUgcm90YXRpb24gdG8gbG9jYWwgc3BhY2VcbiAgICAvLyBwb3NlLnNldF9ib25lKCBib25lLmlkeCwgZmluYWxSb3RhdGlvbiApO1x0XHRcdFx0XHQvLyBVcGRhdGUgUG9zZSB3aXRoIG5ldyBscyByb3RhdGlvblxuICAgIGJvbmUuc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbihmaW5hbFJvdGF0aW9uKVxuXG4gICAgLy9+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flxuICAgIC8vIElmIG5vdCB0aGUgbGFzdCBib25lLCB0YWtlIHRoZW4gdGhlIG5ldyByb3RhdGlvbiB0byBjYWxjIHRoZSBuZXh0IHBhcmVudHNcbiAgICAvLyB3b3JsZCBzcGFjZSB0cmFuc2Zvcm0gZm9yIHRoZSBuZXh0IGJvbmUgb24gdGhlIGxpc3QuXG4gICAgaWYgKGkgIT0gYUVuZCkge1xuICAgICAgLy8gcHQuYWRkKCBmaW5hbFJvdGF0aW9uLCBib25lLmxvY2FsLnBvcywgYm9uZS5sb2NhbC5zY2wgKTtcbiAgICAgIC8vfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5cbiAgICAgIC8vIFBPU0lUSU9OIC0gcGFyZW50LnBvc2l0aW9uICsgKCBwYXJlbnQucm90YXRpb24gKiAoIHBhcmVudC5zY2FsZSAqIGNoaWxkLnBvc2l0aW9uICkgKVxuICAgICAgLy8gY29uc3QgdCA9IG5ldyBWZWN0b3IzKCkuY29weShjaGlsZFdvcmxkUCkuYWRkKG5ldyBWZWN0b3IzKCkuY29weShjaGlsZFdvcmxkUykubXVsdGlwbHkoYm9uZS5wb3NpdGlvbikpXG4gICAgICAvLyB0cmFuc2Zvcm1RdWF0KHQsIGNoaWxkV29ybGRRKVxuXG4gICAgICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG4gICAgICAvLyBTQ0FMRSAtIHBhcmVudC5zY2FsZSAqIGNoaWxkLnNjYWxlXG4gICAgICBjb25zdCBwYXJlbnRXb3JsZFMgPSB0ZW1wVmVjMVxuICAgICAgYm9uZS5nZXRXb3JsZFNjYWxlKHBhcmVudFdvcmxkUylcbiAgICAgIHBhcmVudFdvcmxkUy5tdWx0aXBseShib25lLnNjYWxlKVxuXG4gICAgICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG4gICAgICAvLyBST1RBVElPTiAtIHBhcmVudC5yb3RhdGlvbiAqIGNoaWxkLnJvdGF0aW9uXG4gICAgICBwYXJlbnRXb3JsZFEubXVsdGlwbHkoZmluYWxSb3RhdGlvbilcbiAgICAgIGNvbnN0IHBhcmVudFdvcmxkUCA9IHRlbXBWZWMyXG4gICAgICBib25lLmdldFdvcmxkUG9zaXRpb24ocGFyZW50V29ybGRQKVxuXG4gICAgICBib25lID0gcG9zZS5ib25lcy5maW5kKChib25lKSA9PiAoYm9uZS5uYW1lID0gYm9uZU5hbWVzW2kgKyAxXSkpLmJvbmUgYXMgT2JqZWN0M0QgLy8gQm9uZSBSZWZlcmVuY2VcbiAgICAgIGJvbmUucG9zaXRpb24uY29weShwYXJlbnRXb3JsZFApXG4gICAgICBib25lLnF1YXRlcm5pb24uY29weShwYXJlbnRXb3JsZFEpXG4gICAgICBib25lLnNjYWxlLmNvcHkocGFyZW50V29ybGRTKVxuICAgIH1cbiAgfVxuICBwb3NlLnNrZWxldG9uLnVwZGF0ZSgpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwbXVsSW52ZXJ0KHFPdXQ6IFF1YXRlcm5pb24sIHE6IFF1YXRlcm5pb24pIHtcbiAgLy9+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flxuICAvLyBxLmludmVydCgpXG4gIGxldCBheCA9IHEueCxcbiAgICBheSA9IHEueSxcbiAgICBheiA9IHEueixcbiAgICBhdyA9IHEud1xuICBjb25zdCBkb3QgPSBheCAqIGF4ICsgYXkgKiBheSArIGF6ICogYXogKyBhdyAqIGF3XG5cbiAgaWYgKGRvdCA9PSAwKSB7XG4gICAgYXggPSBheSA9IGF6ID0gYXcgPSAwXG4gIH0gZWxzZSB7XG4gICAgY29uc3QgZG90SW52ID0gMS4wIC8gZG90XG4gICAgYXggPSAtYXggKiBkb3RJbnZcbiAgICBheSA9IC1heSAqIGRvdEludlxuICAgIGF6ID0gLWF6ICogZG90SW52XG4gICAgYXcgPSBhdyAqIGRvdEludlxuICB9XG5cbiAgLy9+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flxuICAvLyBRdWF0Lm11bCggYSwgYiApO1xuICBjb25zdCBieCA9IHFPdXQueCxcbiAgICBieSA9IHFPdXQueSxcbiAgICBieiA9IHFPdXQueixcbiAgICBidyA9IHFPdXQud1xuICBxT3V0LnggPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5XG4gIHFPdXQueSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYnpcbiAgcU91dC56ID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieFxuICBxT3V0LncgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuZWdhdGVRdWF0KHE6IFF1YXRlcm5pb24pOiBRdWF0ZXJuaW9uIHtcbiAgcS54ID0gLXEueFxuICBxLnkgPSAtcS55XG4gIHEueiA9IC1xLnpcbiAgcS53ID0gLXEud1xuICByZXR1cm4gcVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3BpbkJvbmVGb3J3YXJkKHBvc2U6IFBvc2UsIGZvb3Q6IHN0cmluZykge1xuICAvLyBUT0RPOiBjaGVjayBpZiB0aGlzIGZ1bmN0aW9uIGlzIHVzZWRcbiAgY29uc29sZS53YXJuKCdzcGluX2JvbmVfZm9yd2FyZCBpcyBub3QgdGVzdGVkJylcbiAgY29uc3QgdiA9IHRlbXBWZWMxLFxuICAgIHEgPSB0ZW1wUXVhdDEsXG4gICAgYm9uZVN0YXRlID0gcG9zZS5nZXRCb25lKGZvb3QpXG4gIGNvbnN0IGIgPSBib25lU3RhdGUuYm9uZVxuXG4gIGNvbnN0IHBhcmVudFdvcmxkUXVhdGVybmlvbiA9IHRlbXBRdWF0MlxuICBiLnBhcmVudC5nZXRXb3JsZFF1YXRlcm5pb24ocGFyZW50V29ybGRRdWF0ZXJuaW9uKVxuXG4gIGIucG9zaXRpb24uY29weSh2KS5hZGQodGVtcFZlYzIuc2V0KDAsIGJvbmVTdGF0ZS5sZW5ndGgsIDApKVxuXG4gIHYubXVsdGlwbHkoc2NsKVxuICB2LmFwcGx5UXVhdGVybmlvbihyb3QpXG5cbiAgLy8gdi5zdWIoIGIucG9zaXRpb24gKTtcdFx0XHRcdFx0XHRcdC8vIEdldCBUaGUgZGlyZWN0aW9uIHRvIHRoZSB0YWlsXG4gIHYueCA9IDAgLy8gRmxhdHRlbiB2ZWN0b3IgdG8gMkQgYnkgcmVtb3ZpbmcgWSBQb3NpdGlvblxuICB2Lm5vcm1hbGl6ZSgpIC8vIE1ha2UgaXQgYSB1bml0IHZlY3RvclxuICBxLnNldEZyb21Vbml0VmVjdG9ycyh2LCBGT1JXQVJEKSAvLyBSb3RhdGlvbiBuZWVkZWQgdG8gcG9pbnQgdGhlIGZvb3QgZm9yd2FyZC5cbiAgcS5tdWx0aXBseShiLnF1YXRlcm5pb24pIC8vIE1vdmUgV1MgRm9vdCB0byBwb2ludCBmb3J3YXJkXG4gIHBtdWxJbnZlcnQocSwgYi5xdWF0ZXJuaW9uKSAvLyBUbyBMb2NhbCBTcGFjZVxuICBwb3NlLnNldEJvbmUoYm9uZVN0YXRlLmlkeCwgcSkgLy8gU2F2ZSB0byBQb3NlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwbXVsQXhpc0FuZ2xlKG91dCwgYXhpcywgYW5nbGUpIHtcbiAgY29uc3QgaGFsZiA9IGFuZ2xlICogMC41LFxuICAgIHMgPSBNYXRoLnNpbihoYWxmKSxcbiAgICBheCA9IGF4aXMueCAqIHMsIC8vIEEgUXVhdCBiYXNlZCBvbiBBeGlzIEFuZ2xlXG4gICAgYXkgPSBheGlzLnkgKiBzLFxuICAgIGF6ID0gYXhpcy56ICogcyxcbiAgICBhdyA9IE1hdGguY29zKGhhbGYpLFxuICAgIGJ4ID0gb3V0LngsIC8vIEIgb2YgbXVsXG4gICAgYnkgPSBvdXQueSxcbiAgICBieiA9IG91dC56LFxuICAgIGJ3ID0gb3V0LndcblxuICAvLyBRdWF0Lm11bCggYSwgYiApO1xuICBvdXQueCA9IGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnlcbiAgb3V0LnkgPSBheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6XG4gIG91dC56ID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieFxuICBvdXQudyA9IGF3ICogYncgLSBheCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYnpcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFsaWduQm9uZUZvcndhcmQocG9zZTogUG9zZSwgYl9uYW1lOiBzdHJpbmcpIHtcbiAgLy8gVE9ETzogY2hlY2sgaWYgdGhpcyBmdW5jdGlvbiBpcyB1c2VkXG4gIGNvbnNvbGUud2Fybignc3Bpbl9ib25lX2ZvcndhcmQgaXMgbm90IHRlc3RlZCcpXG4gIGNvbnN0IHYgPSB0ZW1wVmVjMSxcbiAgICBxID0gdGVtcFF1YXQxLFxuICAgIGJvbmVTdGF0ZSA9IHBvc2UuZ2V0Qm9uZShiX25hbWUpXG4gIGNvbnN0IGIgPSBib25lU3RhdGUuYm9uZVxuXG4gIGNvbnN0IHBhcmVudFdvcmxkUXVhdGVybmlvbiA9IHRlbXBRdWF0MlxuICBiLnBhcmVudC5nZXRXb3JsZFF1YXRlcm5pb24ocGFyZW50V29ybGRRdWF0ZXJuaW9uKVxuXG4gIGZyb21RdWF0KHYsIGIucXVhdGVybmlvbiwgVVApIC8vIEdldCBCb25lJ3MgV1MgVVAgRGlyZWN0aW9uXG5cbiAgcS5zZXRGcm9tVW5pdFZlY3RvcnModiwgRk9SV0FSRCkgLy8gRGlmZmVyZW5jZSBiZXR3ZWVuIEN1cnJlbnQgVVAgYW5kIFdTIEZvcndhcmRcbiAgcS5tdWx0aXBseShiLnF1YXRlcm5pb24pIC8vIFByZU11bCBEaWZmZXJlbmNlIHRvIEN1cnJlbnQgUm90YXRpb25cbiAgcG11bEludmVydChxLCBwYXJlbnRXb3JsZFF1YXRlcm5pb24pIC8vIENvbnZlcnQgdG8gTG9jYWwgU3BhY2VcblxuICBwb3NlLnNldEJvbmUoYm9uZVN0YXRlLmlkeCwgcSkgLy8gU2F2ZSB0byBQb3NlXG59XG5cbmZ1bmN0aW9uIGZyb21RdWF0KG91dDogVmVjdG9yMywgcTogUXVhdGVybmlvbiwgdjogVmVjdG9yMykge1xuICBjb25zdCBxeCA9IHEueCxcbiAgICBxeSA9IHEueSxcbiAgICBxeiA9IHEueixcbiAgICBxdyA9IHEudyxcbiAgICB2eCA9IHYueCxcbiAgICB2eSA9IHYueSxcbiAgICB2eiA9IHYueixcbiAgICB4MSA9IHF5ICogdnogLSBxeiAqIHZ5LFxuICAgIHkxID0gcXogKiB2eCAtIHF4ICogdnosXG4gICAgejEgPSBxeCAqIHZ5IC0gcXkgKiB2eCxcbiAgICB4MiA9IHF3ICogeDEgKyBxeSAqIHoxIC0gcXogKiB5MSxcbiAgICB5MiA9IHF3ICogeTEgKyBxeiAqIHgxIC0gcXggKiB6MSxcbiAgICB6MiA9IHF3ICogejEgKyBxeCAqIHkxIC0gcXkgKiB4MVxuXG4gIG91dC54ID0gdnggKyAyICogeDJcbiAgb3V0LnkgPSB2eSArIDIgKiB5MlxuICBvdXQueiA9IHZ6ICsgMiAqIHoyXG4gIHJldHVybiBvdXRcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBzd2luZy90d2lzdCBjb21wb25lbnRzIGJhc2VkIG9uIHRoZSBnaXZlbiBpbnB1dCBxdWF0ZXJuaW9uc1xuICogUmVmOiBodHRwOi8vYWxsZW5jaG91Lm5ldC8yMDE4LzA1L2dhbWUtbWF0aC1zd2luZy10d2lzdC1pbnRlcnBvbGF0aW9uLXN0ZXJwL1xuICogQHBhcmFtIHNvdXJjZVxuICogQHBhcmFtIHRhcmdldFxuICogQHBhcmFtIGZvcndhcmRcbiAqIEBwYXJhbSB1cFxuICogQHBhcmFtIG91dCB7c3dpbmc6IFF1YXRlcm5pb24sIHR3aXN0OiBudW1iZXJ9XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZVN3aW5nQW5kVHdpc3Qoc291cmNlOiBRdWF0ZXJuaW9uLCB0YXJnZXQ6IFF1YXRlcm5pb24sIGZvcndhcmQ6IFZlY3RvcjMsIHVwOiBWZWN0b3IzLCBvdXQ6IGFueSkge1xuICBjb25zdCBxdWF0SW52ZXJzZSA9IHRlbXBRdWF0MS5jb3B5KHRhcmdldCkuaW52ZXJ0KCksXG4gICAgYWx0Rm9yd2FyZCA9IHRlbXBWZWMxLmNvcHkoZm9yd2FyZCkuYXBwbHlRdWF0ZXJuaW9uKHF1YXRJbnZlcnNlKSxcbiAgICBhbHRVcCA9IHRlbXBWZWMyLmNvcHkodXApLmFwcGx5UXVhdGVybmlvbihxdWF0SW52ZXJzZSlcblxuICBjb25zdCBwb3NlRm9yd2FyZCA9IGFsdEZvcndhcmQuYXBwbHlRdWF0ZXJuaW9uKHNvdXJjZSksXG4gICAgcG9zZVVwID0gYWx0VXAuYXBwbHlRdWF0ZXJuaW9uKHNvdXJjZSlcblxuICBjb25zdCBzd2luZyA9IHRlbXBRdWF0MVxuICAgIC5zZXRGcm9tVW5pdFZlY3RvcnMoZm9yd2FyZCwgcG9zZUZvcndhcmQpIC8vIEZpcnN0IHdlIGNyZWF0ZSBhIHN3aW5nIHJvdGF0aW9uIGZyb20gb25lIGRpciB0byB0aGUgb3RoZXIuXG4gICAgLm11bHRpcGx5KHRhcmdldCkgLy8gVGhlbiB3ZSBhcHBseSBpdCB0byB0aGUgVEJvbmUgUm90YXRpb24sIHRoaXMgd2lsbCBkbyBhIEZXRCBTd2luZyB3aGljaCB3aWxsIGNyZWF0ZVxuXG4gIC8vIGEgbmV3IFVwIGRpcmVjdGlvbiBiYXNlZCBvbiBvbmx5IHN3aW5nLlxuICBjb25zdCBzd2luZ1VwID0gdGVtcFZlYzMuY29weSh1cCkuYXBwbHlRdWF0ZXJuaW9uKHN3aW5nKVxuICBsZXQgdHdpc3QgPSBzd2luZ1VwLmFuZ2xlVG8ocG9zZVVwKVxuXG4gIGNvbnN0IHZlYzNEb3QgPSBzd2luZ1VwLmNyb3NzKHBvc2VGb3J3YXJkKS5kb3QocG9zZVVwKVxuICBpZiAodmVjM0RvdCA+PSAwKSB0d2lzdCA9IC10d2lzdFxuXG4gIG91dC5zd2luZy5jb3B5KHN3aW5nKVxuICBvdXQudHdpc3QgPSB0d2lzdFxufVxuXG4vKipcbiAqIEFwcGxpZXMgc3dpbmcvdHdpc3Qgcm90YXRpb24gdG8gdGhlIHRhcmdldCBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0gdGFyZ2V0XG4gKiBAcGFyYW0gc3dpbmdcbiAqIEBwYXJhbSB0d2lzdFxuICogQHBhcmFtIG9yaWdpbmFsRm9yd2FyZFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlTd2luZ0FuZFR3aXN0KHRhcmdldDogUXVhdGVybmlvbiwgc3dpbmc6IFF1YXRlcm5pb24sIHR3aXN0OiBudW1iZXIsIG9yaWdpbmFsRm9yd2FyZDogVmVjdG9yMykge1xuICBjb25zdCBwID0gdGVtcFF1YXQxLmNvcHkodGFyZ2V0KVxuICB0YXJnZXQucHJlbXVsdGlwbHkoc3dpbmcpIC8vIFByZU11bHRpcGx5IG91ciBzd2luZyByb3RhdGlvbiB0byBvdXIgdGFyZ2V0J3MgY3VycmVudCByb3RhdGlvbi5cblxuICB0YXJnZXQucHJlbXVsdGlwbHkodGVtcFF1YXQyLnNldEZyb21BeGlzQW5nbGUob3JpZ2luYWxGb3J3YXJkLCB0d2lzdCkpXG5cbiAgcG11bEludmVydCh0YXJnZXQsIHApXG59XG5cbi8qKlxuICogQ29udmVydCB3b3JsZCBjb29yZGluYXRlcyB0byBtb2RlbCBjb29yZGluYXRlcyB3aXRoIHJvb3QgdHJhbnNmb3JtXG4gKiBAcGFyYW0gcG9zaXRpb24gd2lsbCBiZSBtb2RpZmllZFxuICogQHBhcmFtIHF1YXRlcm5pb24gd2lsbCBiZSBtb2RpZmllZFxuICogQHBhcmFtIHNjYWxlIHdpbGwgYmUgbW9kaWZpZWRcbiAqIEBwYXJhbSByb290VHJhbnNmb3JtXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3b3JsZFRvTW9kZWwoXG4gIHBvc2l0aW9uOiBWZWN0b3IzLFxuICBxdWF0ZXJuaW9uOiBRdWF0ZXJuaW9uLFxuICBzY2FsZTogVmVjdG9yMyxcbiAgcm9vdFRyYW5zZm9ybTogeyBwb3NpdGlvbjogVmVjdG9yMzsgcXVhdGVybmlvbjogUXVhdGVybmlvbjsgaW52UXVhdGVybmlvbjogUXVhdGVybmlvbjsgc2NhbGU6IFZlY3RvcjMgfVxuKTogdm9pZCB7XG4gIGNvbnN0IHJvb3RSb3RhdGlvbkludmVydGVkID0gcm9vdFRyYW5zZm9ybS5pbnZRdWF0ZXJuaW9uXG4gIHBvc2l0aW9uLnN1Yihyb290VHJhbnNmb3JtLnBvc2l0aW9uKS5hcHBseVF1YXRlcm5pb24ocm9vdFJvdGF0aW9uSW52ZXJ0ZWQpLmRpdmlkZShyb290VHJhbnNmb3JtLnNjYWxlKVxuICBxdWF0ZXJuaW9uLnByZW11bHRpcGx5KHJvb3RSb3RhdGlvbkludmVydGVkKVxuICBzY2FsZS5kaXZpZGUocm9vdFRyYW5zZm9ybS5zY2FsZSlcbn1cbiIsIi8vIEB0cy1ub2NoZWNrXG5pbXBvcnQgeyBCb25lLCBTa2lubmVkTWVzaCB9IGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgT2JqZWN0M0QsIFF1YXRlcm5pb24sIFNrZWxldG9uLCBWZWN0b3IzIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBTa2VsZXRvblV0aWxzIH0gZnJvbSAnLi4vLi4vYXZhdGFyL1NrZWxldG9uVXRpbHMnXG5pbXBvcnQgeyBET1dOLCBMRUZULCBSSUdIVCB9IGZyb20gJy4uL2NvbnN0YW50cy9WZWN0b3IzQ29uc3RhbnRzJ1xuaW1wb3J0IHsgc3BpbkJvbmVGb3J3YXJkLCBhbGlnbkNoYWluLCBhbGlnbkJvbmVGb3J3YXJkLCB3b3JsZFRvTW9kZWwgfSBmcm9tICcuLi9mdW5jdGlvbnMvSUtGdW5jdGlvbnMnXG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tICcuLi8uLi9lY3MvY2xhc3Nlcy9FbnRpdHknXG5pbXBvcnQgeyB0cmFuc2Zvcm1BZGQgfSBmcm9tICcuLi9mdW5jdGlvbnMvSUtTb2x2ZXJzJ1xuXG5leHBvcnQgdHlwZSBQb3NlQm9uZVRyYW5zZm9ybSA9IHtcbiAgcG9zaXRpb246IFZlY3RvcjNcbiAgcXVhdGVybmlvbjogUXVhdGVybmlvblxuICBzY2FsZTogVmVjdG9yM1xufVxuXG5leHBvcnQgdHlwZSBQb3NlQm9uZUxvY2FsU3RhdGUgPSB7XG4gIGJvbmU6IEJvbmVcbiAgcGFyZW50OiBCb25lIHwgbnVsbFxuICBjaGdfc3RhdGU6IG51bWJlciAvLyBJZiBMb2NhbCBIYXMgQmVlbiBVcGRhdGVkXG4gIGlkeDogbnVtYmVyIC8vIEJvbmUgSW5kZXggaW4gQXJtYXR1cmVcbiAgcF9pZHg6IG51bWJlciB8IG51bGwgLy8gUGFyZW50IEJvbmUgSW5kZXggaW4gQXJtYXR1cmVcbiAgbGVuZ3RoOiBudW1iZXIgLy8gTGVuZ3RoIG9mIEJvbmVcbiAgbmFtZTogc3RyaW5nXG4gIGxvY2FsOiBQb3NlQm9uZVRyYW5zZm9ybSAvLyBMb2NhbCBUcmFuc2Zvcm0sIHVzZSBCaW5kIHBvc2UgYXMgZGVmYXVsdFxuICB3b3JsZDogUG9zZUJvbmVUcmFuc2Zvcm0gLy8gTW9kZWwgU3BhY2UgVHJhbnNmb3JtXG59XG5cbmNsYXNzIFBvc2Uge1xuICBzdGF0aWMgUk9UQVRJT04gPSAxXG4gIHN0YXRpYyBQT1NJVElPTiA9IDJcbiAgc3RhdGljIFNDQUxFID0gNFxuXG4gIGVudGl0eTogRW50aXR5XG4gIHNrZWxldG9uOiBTa2VsZXRvblxuICBib25lczogUG9zZUJvbmVMb2NhbFN0YXRlW11cbiAgcm9vdE9mZnNldCA9IHtcbiAgICBxdWF0ZXJuaW9uOiBuZXcgUXVhdGVybmlvbigpLFxuICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMygwLCAwLCAwKSxcbiAgICBzY2FsZTogbmV3IFZlY3RvcjMoMSwgMSwgMSlcbiAgfVxuICBoZWxwZXI6IGFueVxuXG4gIGFsaWduX2xlZyhiX25hbWVzOiBzdHJpbmdbXSkge1xuICAgIGFsaWduQ2hhaW4odGhpcywgRE9XTiwgYl9uYW1lcylcbiAgICByZXR1cm4gdGhpc1xuICB9XG4gIGFsaWduX2FybV9sZWZ0KGJfbmFtZXM6IHN0cmluZ1tdKSB7XG4gICAgYWxpZ25DaGFpbih0aGlzLCBMRUZULCBiX25hbWVzKVxuICAgIHJldHVybiB0aGlzXG4gIH1cbiAgYWxpZ25fYXJtX3JpZ2h0KGJfbmFtZXM6IHN0cmluZ1tdKSB7XG4gICAgYWxpZ25DaGFpbih0aGlzLCBSSUdIVCwgYl9uYW1lcylcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgYWxpZ25fZm9vdChiX25hbWU6IHN0cmluZykge1xuICAgIHNwaW5Cb25lRm9yd2FyZCh0aGlzLCBiX25hbWUpXG4gICAgYWxpZ25Cb25lRm9yd2FyZCh0aGlzLCBiX25hbWUpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHNwaW5fYm9uZV9mb3J3YXJkKGJfbmFtZTogc3RyaW5nKSB7XG4gICAgc3BpbkJvbmVGb3J3YXJkKHRoaXMsIGJfbmFtZSlcbiAgICByZXR1cm4gdGhpc1xuICB9XG4gIGFsaWduX2JvbmVfZm9yd2FyZChiX25hbWU6IHN0cmluZykge1xuICAgIGFsaWduQm9uZUZvcndhcmQodGhpcywgYl9uYW1lKVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHJvb3RPYmplY3Qgb2JqZWN0IGNvbnRhaW5pbmcgc2tpbm5lZE1lc2ggYW5kIGl0J3MgYm9uZXNcbiAgICogQHBhcmFtIGNsb25lIG1ha2UgYSBjbG9uZWQgdmVyc2lvbiBvZiBza2VsZXRvblxuICAgKi9cbiAgY29uc3RydWN0b3Iocm9vdE9iamVjdDogT2JqZWN0M0QsIGNsb25lID0gZmFsc2UpIHtcbiAgICB0aGlzLmJvbmVzID0gW11cbiAgICBjb25zdCBwYXJlbnQ6IE9iamVjdDNEID0gY2xvbmUgPyBTa2VsZXRvblV0aWxzLmNsb25lKHJvb3RPYmplY3QpIDogcm9vdE9iamVjdFxuICAgIHRoaXMuc2tlbGV0b24gPSB0aGlzLmdldF9za2VsZXRvbihwYXJlbnQpIC8vIFJlY3JlYXRpb24gb2YgQm9uZSBIaWVyYXJjaHlcblxuICAgIGlmICghdGhpcy5za2VsZXRvbi5ib25lc1swXSkge1xuICAgICAgZGVidWdnZXJcbiAgICB9XG5cbiAgICAvLyB0aGlzLmJvbmVzID0gdGhpcy5za2VsZXRvbi5ib25lc1xuICAgIHRoaXMucm9vdE9mZnNldCA9IG5ldyBPYmplY3QzRCgpIC8vIFBhcmVudCBUcmFuc2Zvcm0gZm9yIFJvb3QgQm9uZSAoIFNrZWxldG9ucyBmcm9tIEZCWCBpbXBvcnRzIG5lZWQgdGhpcyB0byByZW5kZXIgcmlnaHQgKVxuXG4gICAgLy9+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG4gICAgLy8gQ3JlYXRlIEJvbmUgVHJhbnNmb3JtIEhpZXJhcmNoeSB0byBkbyB0cmFuc2Zvcm1hdGlvbnNcbiAgICAvLyB3aXRob3V0IGNoYW5naW5nIHRoZSBhY3R1YWwgYXJtYXR1cmUuXG4gICAgY29uc3Qgc2tlbGV0b25UcmFuc2Zvcm0gPSB7XG4gICAgICBwb3NpdGlvbjogbmV3IFZlY3RvcjMoKSxcbiAgICAgIHF1YXRlcm5pb246IG5ldyBRdWF0ZXJuaW9uKCksXG4gICAgICBpbnZRdWF0ZXJuaW9uOiBuZXcgUXVhdGVybmlvbigpLFxuICAgICAgc2NhbGU6IG5ldyBWZWN0b3IzKClcbiAgICB9XG5cbiAgICBjb25zdCByb290Qm9uZSA9IHRoaXMuc2tlbGV0b24uYm9uZXMuZmluZCgoYikgPT4gIShiLnBhcmVudCBpbnN0YW5jZW9mIEJvbmUpKVxuICAgIGlmIChyb290Qm9uZS5wYXJlbnQpIHtcbiAgICAgIHJvb3RCb25lLnBhcmVudC5nZXRXb3JsZFBvc2l0aW9uKHNrZWxldG9uVHJhbnNmb3JtLnBvc2l0aW9uKVxuICAgICAgcm9vdEJvbmUucGFyZW50LmdldFdvcmxkUXVhdGVybmlvbihza2VsZXRvblRyYW5zZm9ybS5xdWF0ZXJuaW9uKVxuICAgICAgcm9vdEJvbmUucGFyZW50LmdldFdvcmxkU2NhbGUoc2tlbGV0b25UcmFuc2Zvcm0uc2NhbGUpXG4gICAgICBza2VsZXRvblRyYW5zZm9ybS5pbnZRdWF0ZXJuaW9uLmNvcHkoc2tlbGV0b25UcmFuc2Zvcm0ucXVhdGVybmlvbikuaW52ZXJ0KClcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2tlbGV0b24uYm9uZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGIgPSB0aGlzLnNrZWxldG9uLmJvbmVzW2ldXG4gICAgICBsZXQgcF9pZHgsIGJvbmVQYXJlbnRcbiAgICAgIGlmIChiLnBhcmVudCAmJiBiLnBhcmVudCBpbnN0YW5jZW9mIEJvbmUpIHtcbiAgICAgICAgcF9pZHggPSB0aGlzLnNrZWxldG9uLmJvbmVzLmluZGV4T2YoYi5wYXJlbnQpXG4gICAgICAgIGJvbmVQYXJlbnQgPSBiLnBhcmVudFxuICAgICAgfVxuXG4gICAgICBjb25zdCBib25lRGF0YSA9IHtcbiAgICAgICAgYm9uZTogYixcbiAgICAgICAgcGFyZW50OiBib25lUGFyZW50LFxuICAgICAgICBjaGdfc3RhdGU6IDAsIC8vIElmIExvY2FsIEhhcyBCZWVuIFVwZGF0ZWRcbiAgICAgICAgaWR4OiBpLCAvLyBCb25lIEluZGV4IGluIEFybWF0dXJlXG4gICAgICAgIHBfaWR4OiBwX2lkeCwgLy8gUGFyZW50IEJvbmUgSW5kZXggaW4gQXJtYXR1cmVcbiAgICAgICAgbGVuZ3RoOiAwLjEsIC8vIExlbmd0aCBvZiBCb25lXG4gICAgICAgIG5hbWU6IGIubmFtZSxcbiAgICAgICAgbG9jYWw6IHtcbiAgICAgICAgICBwb3NpdGlvbjogYi5wb3NpdGlvbi5jbG9uZSgpLFxuICAgICAgICAgIHF1YXRlcm5pb246IGIucXVhdGVybmlvbi5jbG9uZSgpLFxuICAgICAgICAgIHNjYWxlOiBiLnNjYWxlLmNsb25lKClcbiAgICAgICAgfSwgLy8gTG9jYWwgVHJhbnNmb3JtLCB1c2UgQmluZCBwb3NlIGFzIGRlZmF1bHRcbiAgICAgICAgd29ybGQ6IHtcbiAgICAgICAgICBwb3NpdGlvbjogbmV3IFZlY3RvcjMoKSxcbiAgICAgICAgICBxdWF0ZXJuaW9uOiBuZXcgUXVhdGVybmlvbigpLFxuICAgICAgICAgIGludlF1YXRlcm5pb246IG5ldyBRdWF0ZXJuaW9uKCksXG4gICAgICAgICAgc2NhbGU6IG5ldyBWZWN0b3IzKClcbiAgICAgICAgfSAvLyBNb2RlbCBTcGFjZSBUcmFuc2Zvcm1cbiAgICAgIH1cblxuICAgICAgYi5nZXRXb3JsZFBvc2l0aW9uKGJvbmVEYXRhLndvcmxkLnBvc2l0aW9uKVxuICAgICAgYi5nZXRXb3JsZFF1YXRlcm5pb24oYm9uZURhdGEud29ybGQucXVhdGVybmlvbilcbiAgICAgIGIuZ2V0V29ybGRTY2FsZShib25lRGF0YS53b3JsZC5zY2FsZSlcblxuICAgICAgLy8gY29udmVydCB0byBtb2RlbCBzcGFjZVxuICAgICAgd29ybGRUb01vZGVsKGJvbmVEYXRhLndvcmxkLnBvc2l0aW9uLCBib25lRGF0YS53b3JsZC5xdWF0ZXJuaW9uLCBib25lRGF0YS53b3JsZC5zY2FsZSwgc2tlbGV0b25UcmFuc2Zvcm0pXG4gICAgICAvLyBDYWxjdWxhdGUgdGhpcyBvbmNlIGZvciB0cG9zZVxuICAgICAgYm9uZURhdGEud29ybGQuaW52UXVhdGVybmlvbi5jb3B5KGJvbmVEYXRhLndvcmxkLnF1YXRlcm5pb24pLmludmVydCgpXG5cbiAgICAgIC8vYlsnaW5kZXgnXSA9IGlcbiAgICAgIGlmIChiLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gYi5nZXRXb3JsZFBvc2l0aW9uKGJXb3JsZFBvc2l0aW9uKVxuICAgICAgICAvLyBiLmNoaWxkcmVuWzBdLmdldFdvcmxkUG9zaXRpb24oYkNoaWxkV29ybGRQb3NpdGlvbilcbiAgICAgICAgLy8gYldvcmxkUG9zaXRpb24uZGl2aWRlKHNrZWxldG9uVHJhbnNmb3JtLnNjYWxlKVxuICAgICAgICAvLyBiQ2hpbGRXb3JsZFBvc2l0aW9uLmRpdmlkZShza2VsZXRvblRyYW5zZm9ybS5zY2FsZSlcblxuICAgICAgICBib25lRGF0YS5sZW5ndGggPSBiLmNoaWxkcmVuWzBdLnBvc2l0aW9uLmxlbmd0aCgpXG4gICAgICB9XG5cbiAgICAgIHRoaXMuYm9uZXNbaV0gPSBib25lRGF0YVxuICAgIH1cblxuICAgIHRoaXMuc2tlbGV0b24udXBkYXRlKClcbiAgfVxuXG4gIGdldF9za2VsZXRvbihyb290T2JqZWN0OiBPYmplY3QzRCk6IFNrZWxldG9uIHwgbnVsbCB7XG4gICAgbGV0IHNrZWxldG9uOiBTa2VsZXRvbiA9IG51bGxcblxuICAgIHJvb3RPYmplY3QudHJhdmVyc2UoKG9iamVjdCkgPT4ge1xuICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mIFNraW5uZWRNZXNoICYmIG9iamVjdC5za2VsZXRvbiAhPSBudWxsKSB7XG4gICAgICAgIGlmIChza2VsZXRvbiAmJiBza2VsZXRvbi5ib25lcy5sZW5ndGggPiBvYmplY3Quc2tlbGV0b24uYm9uZXMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgc2tlbGV0b24gPSBvYmplY3Quc2tlbGV0b25cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIHNrZWxldG9uXG4gIH1cblxuICBzZXRPZmZzZXQocXVhdGVybmlvbjogUXVhdGVybmlvbiwgcG9zaXRpb246IFZlY3RvcjMsIHNjYWxlOiBWZWN0b3IzKSB7XG4gICAgdGhpcy5yb290T2Zmc2V0LnF1YXRlcm5pb24uY29weShxdWF0ZXJuaW9uKVxuICAgIHRoaXMucm9vdE9mZnNldC5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKVxuICAgIHRoaXMucm9vdE9mZnNldC5zY2FsZS5jb3B5KHNjYWxlKVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBzZXRCb25lKGluZGV4OiBudW1iZXIsIHF1YXRlcm5pb24/OiBRdWF0ZXJuaW9uLCBwb3NpdGlvbj86IFZlY3RvcjMsIHNjYWxlPzogVmVjdG9yMykge1xuICAgIC8vIFRPRE86IGNoZWNrIHRoaXMgb3V0LCB0aGV5IHN0b3JlIHRoaXMgaW4gc2VwYXJhdGUgc3RydWN0dXJlIHRoYXQgZG9lcyBub3QgY2hhbmdlIG9yaWdpbmFsIGJvbmUgZGF0YVxuICAgIGlmIChxdWF0ZXJuaW9uKSB0aGlzLmJvbmVzW2luZGV4XS5sb2NhbC5xdWF0ZXJuaW9uLmNvcHkocXVhdGVybmlvbilcbiAgICBpZiAocG9zaXRpb24pIHRoaXMuYm9uZXNbaW5kZXhdLmxvY2FsLnBvc2l0aW9uLmNvcHkocG9zaXRpb24pXG4gICAgaWYgKHNjYWxlKSB0aGlzLmJvbmVzW2luZGV4XS5sb2NhbC5zY2FsZS5jb3B5KHNjYWxlKVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBnZXRCb25lKG5hbWU6IHN0cmluZyk6IFBvc2VCb25lTG9jYWxTdGF0ZSB7XG4gICAgLy8gVE9ETzogcmVwbGFjZSB3aXRoIE1hcD9cbiAgICByZXR1cm4gdGhpcy5ib25lcy5maW5kKChiKSA9PiBiLm5hbWUgPT09IG5hbWUpXG4gIH1cblxuICBhcHBseSgpOiBQb3NlIHtcbiAgICAvLyBDb3BpZXMgbW9kaWZpZWQgTHF1YXRJbnZlcnNlb2NhbCBUcmFuc2Zvcm1zIG9mIHRoZSBQb3NlIHRvIHRoZSBCb25lIEVudGl0aWVzLlxuICAgIC8vIGNvbnN0IHRhcmdldFNrZWxldG9uOiBTa2VsZXRvbiA9IGdldENvbXBvbmVudCh0aGlzLmVudGl0eSwgSUtPYmopLnJlZi5za2VsZXRvblxuXG4gICAgbGV0IHBiOiBQb3NlQm9uZUxvY2FsU3RhdGUsIC8vIFBvc2UgQm9uZVxuICAgICAgbzogQm9uZSAvLyBCb25lIE9iamVjdFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5za2VsZXRvbi5ib25lcy5sZW5ndGg7IGkrKykge1xuICAgICAgcGIgPSB0aGlzLmJvbmVzW2ldXG5cbiAgICAgIC8vIENoZWNrIGlmIGJvbmUgaGFzIGJlZW4gbW9kaWZpZWQgaW4gdGhlIHBvc2VcbiAgICAgIG8gPSB0aGlzLnNrZWxldG9uLmJvbmVzW2ldXG4gICAgICAvLyBDb3B5IGNoYW5nZXMgdG8gQm9uZSBFbnRpdHlcbiAgICAgIC8vIG8uc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbihwYi5xdWF0ZXJuaW9uKVxuXG4gICAgICBvLnF1YXRlcm5pb24uY29weShwYi5sb2NhbC5xdWF0ZXJuaW9uKVxuICAgICAgby5wb3NpdGlvbi5jb3B5KHBiLmxvY2FsLnBvc2l0aW9uKVxuICAgICAgby5zY2FsZS5jb3B5KHBiLmxvY2FsLnNjYWxlKVxuICAgIH1cbiAgICB0aGlzLnNrZWxldG9uLnVwZGF0ZSgpXG4gICAgLy8gdGFyZ2V0U2tlbGV0b24udXBkYXRlKClcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLy8gSWYgdGhlc2UgYXJlIHRlbXAgdmFycyBva2F5LCBidXQgdGhlc2UgbWlnaHQgbmVlZCB0byBtb3ZlIHRvIHRoZSBib25lcz8/IERvIHdlIG5lZWQgdGhlc2UgaWYgd2UgaGF2ZSB3b3JsZCBwb3NlcyBvbiBib25lcz9cbiAgcGFyZW50UXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKClcbiAgcGFyZW50U2NhbGUgPSBuZXcgVmVjdG9yMygxLCAxLCAxKVxuICBwYXJlbnRQb3NpdGlvbiA9IG5ldyBWZWN0b3IzKDAsIDAsIDApXG5cbiAgY2hpbGRRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKVxuICBjaGlsZFNjYWxlID0gbmV3IFZlY3RvcjMoMSwgMSwgMSlcbiAgY2hpbGRQb3NpdGlvbiA9IG5ldyBWZWN0b3IzKDAsIDAsIDApXG5cbiAgLy8gTWFrZSBzdXJlIHRoaXMgaXMgcHJvcGVybHkgbmFtZWRcbiAgc2V0Q2hpbGRGcm9tUGFyZW50KHBhcmVudDogT2JqZWN0M0QsIGNoaWxkOiBPYmplY3QzRCk6IFBvc2Uge1xuICAgIGNvbnNvbGUubG9nKCdwYXJlbnQsIGNoaWxkJywgcGFyZW50LCBjaGlsZClcblxuICAgIC8vIFBPU0lUSU9OIC0gcGFyZW50LnBvc2l0aW9uICsgKCBwYXJlbnQucXVhdGVybmlvbiAqICggcGFyZW50LnNjYWxlICogY2hpbGQucG9zaXRpb24gKSApXG4gICAgLy8gVE9ETzogTWFrZSBzdXJlIHRoaXMgbWF0cml4IGlzbid0IGZsaXBwZWRcbiAgICBjb25zdCB2OiBWZWN0b3IzID0gbmV3IFZlY3RvcjMoKVxuICAgICAgLmNvcHkocGFyZW50LnNjYWxlKVxuICAgICAgLm11bHRpcGx5KGNoaWxkLnBvc2l0aW9uKSAvLyBwYXJlbnQuc2NhbGUgKiBjaGlsZC5wb3NpdGlvbjtcbiAgICAgIC5hcHBseVF1YXRlcm5pb24ocGFyZW50LnF1YXRlcm5pb24pIC8vVmVjMy50cmFuc2Zvcm1RdWF0KCB2LCB0cC5xdWF0ZXJuaW9uLCB2ICk7XG4gICAgdGhpcy5jaGlsZFBvc2l0aW9uID0gbmV3IFZlY3RvcjMoKS5jb3B5KHBhcmVudC5wb3NpdGlvbikuYWRkKHYpIC8vIFZlYzMuYWRkKCB0cC5wb3NpdGlvbiwgdiwgdGhpcy5wb3NpdGlvbiApO1xuXG4gICAgY29uc29sZS5sb2coJ3YgaXMnLCB2KVxuICAgIGNvbnNvbGUubG9nKCd0aGlzLmNoaWxkUG9zaXRpb24nLCB0aGlzLmNoaWxkUG9zaXRpb24pXG5cbiAgICAvLyBTQ0FMRSAtIHBhcmVudC5zY2FsZSAqIGNoaWxkLnNjYWxlXG4gICAgLy8gVE9ETzogbm90IGZsaXBwZWQsIHJpZ2h0P1xuICAgIHRoaXMuY2hpbGRTY2FsZSA9IG5ldyBWZWN0b3IzKCkuY29weShwYXJlbnQuc2NhbGUpLm11bHRpcGx5KGNoaWxkLnNjYWxlKVxuXG4gICAgLy8gUk9UQVRJT04gLSBwYXJlbnQucXVhdGVybmlvbiAqIGNoaWxkLnF1YXRlcm5pb25cbiAgICB0aGlzLmNoaWxkUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCkuY29weShwYXJlbnQucXVhdGVybmlvbikubXVsdGlwbHkoY2hpbGQucXVhdGVybmlvbilcblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBnZXRQYXJlbnRSb3RhdGlvbihib25lSW5kZXg6IG51bWJlcik6IFF1YXRlcm5pb24ge1xuICAgIC8vIC8vIE9SSUdJTkFMIENPREVcbiAgICAvLyAvLyBnZXRfcGFyZW50X3JvdCggYl9pZHgsIHE9bnVsbCApe1xuICAgIC8vIC8vIFx0bGV0IGNib25lID0gdGhpcy5ib25lc1sgYl9pZHggXTtcbiAgICAvLyAvLyBcdHEgPSBxIHx8IG5ldyBRdWF0KCk7XG4gICAgLy9cbiAgICAvLyBjb25zdCBib25lID0gdGhpcy5za2VsZXRvbi5ib25lc1t0aGlzLmJvbmVzW2JvbmVJbmRleF0uaWR4XVxuICAgIC8vIGNvbnN0IHEgPSBuZXcgUXVhdGVybmlvbigpXG4gICAgLy9cbiAgICAvLyAvLyBPUklHSU5BTCBDT0RFXG4gICAgLy8gLy9pZiggY2JvbmUucF9pZHggPT0gbnVsbCApIHEucmVzZXQoKTtcbiAgICAvLyAvLyBDaGlsZCBpcyBhIFJvb3QgQm9uZSwganVzdCByZXNldCBzaW5jZSB0aGVyZSBpcyBubyBwYXJlbnQuXG4gICAgLy8gaWYgKGJvbmUucGFyZW50ID09IG51bGwpIHEuaWRlbnRpdHkoKVxuICAgIC8vIGVsc2Uge1xuICAgIC8vICAgLy8gT1JJR0lOQUwgQ09ERVxuICAgIC8vICAgLy8gbGV0IGIgPSB0aGlzLmJvbmVzWyBjYm9uZS5wX2lkeCBdO1xuICAgIC8vICAgLy8gXHRxLmNvcHkoIGIubG9jYWwucm90ICk7XG4gICAgLy9cbiAgICAvLyAgIC8vIFx0d2hpbGUoIGIucF9pZHggIT0gbnVsbCApe1xuICAgIC8vICAgLy8gXHRcdGIgPSB0aGlzLmJvbmVzWyBiLnBfaWR4IF07XG4gICAgLy8gICAvLyBcdFx0cS5wbXVsKCBiLmxvY2FsLnJvdCApO1xuICAgIC8vICAgLy8gXHR9XG4gICAgLy8gICAvLyBQYXJlbnRzIEV4aXN0LCBsb29wIHRpbGwgcmVhY2hpbmcgdGhlIHJvb3RcbiAgICAvLyAgIGxldCBiID0gYm9uZS5wYXJlbnRcbiAgICAvLyAgIHEuY29weShiLnF1YXRlcm5pb24pXG4gICAgLy8gICB3aGlsZSAoYi5wYXJlbnQgIT0gbnVsbCAmJiBiLnBhcmVudC50eXBlID09PSAnQm9uZScpIHtcbiAgICAvLyAgICAgYiA9IGIucGFyZW50XG4gICAgLy8gICAgIHEucHJlbXVsdGlwbHkoYi5xdWF0ZXJuaW9uKVxuICAgIC8vICAgfVxuICAgIC8vIH1cbiAgICAvLyAvLyBPUklHSU5BTCBDT0RFXG4gICAgLy8gLy8gcS5wbXVsKCB0aGlzLnJvb3Rfb2Zmc2V0LnJvdCApOyAvLyBBZGQgU3RhcnRpbmcgT2Zmc2V0XG4gICAgLy8gcS5wcmVtdWx0aXBseSh0aGlzLnJvb3RPZmZzZXQucXVhdGVybmlvbikgLy8gQWRkIFN0YXJ0aW5nIE9mZnNldFxuICAgIGNvbnN0IGNib25lID0gdGhpcy5ib25lc1tib25lSW5kZXhdXG4gICAgY29uc3QgcSA9IG5ldyBRdWF0ZXJuaW9uKClcblxuICAgIC8vfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flxuICAgIC8vIENoaWxkIGlzIGEgUm9vdCBCb25lLCBqdXN0IHJlc2V0IHNpbmNlIHRoZXJlIGlzIG5vIHBhcmVudC5cbiAgICBpZiAoY2JvbmUucF9pZHggPT0gbnVsbCkgcS5pZGVudGl0eSgpXG4gICAgZWxzZSB7XG4gICAgICAvLyBQYXJlbnRzIEV4aXN0LCBsb29wIHRpbGwgcmVhY2hpbmcgdGhlIHJvb3RcbiAgICAgIGxldCBiID0gdGhpcy5ib25lc1tjYm9uZS5wX2lkeF1cbiAgICAgIHEuY29weShiLmxvY2FsLnF1YXRlcm5pb24pXG5cbiAgICAgIHdoaWxlIChiLnBfaWR4ICE9IG51bGwpIHtcbiAgICAgICAgYiA9IHRoaXMuYm9uZXNbYi5wX2lkeF1cbiAgICAgICAgcS5wcmVtdWx0aXBseShiLmxvY2FsLnF1YXRlcm5pb24pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG4gICAgcS5wcmVtdWx0aXBseSh0aGlzLnJvb3RPZmZzZXQucXVhdGVybmlvbikgLy8gQWRkIFN0YXJ0aW5nIE9mZnNldFxuICAgIHJldHVybiBxXG4gIH1cblxuICB0cmFuc2Zvcm1BZGRfcmV2KHB0OiBQb3NlQm9uZVRyYW5zZm9ybSwgY3Q6IFBvc2VCb25lVHJhbnNmb3JtKSB7XG4gICAgcHQucG9zaXRpb24ubXVsdGlwbHkoY3Quc2NhbGUpLmFwcGx5UXVhdGVybmlvbihjdC5xdWF0ZXJuaW9uKS5hZGQoY3QucG9zaXRpb24pXG4gICAgLy9+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flxuICAgIC8vIFNDQUxFIC0gcGFyZW50LnNjYWxlICogY2hpbGQuc2NhbGVcbiAgICBwdC5zY2FsZS5tdWx0aXBseShjdC5zY2FsZSlcbiAgICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG4gICAgLy8gUk9UQVRJT04gLSBwYXJlbnQucm90YXRpb24gKiBjaGlsZC5yb3RhdGlvblxuICAgIHB0LnF1YXRlcm5pb24ucHJlbXVsdGlwbHkoY3QucXVhdGVybmlvbikgLy8gTXVzdCBSb3RhdGUgZnJvbSBQYXJlbnQtPkNoaWxkLCBuZWVkIFBNVUxcbiAgfVxuXG4gIGdldF9wYXJlbnRfd29ybGQoXG4gICAgYl9pZHg6IG51bWJlcixcbiAgICBwdDogUG9zZUJvbmVUcmFuc2Zvcm0gPSBudWxsLFxuICAgIGN0OiBQb3NlQm9uZVRyYW5zZm9ybSA9IG51bGwsXG4gICAgdF9vZmZzZXQ6IFBvc2VCb25lVHJhbnNmb3JtID0gbnVsbFxuICApIHtcbiAgICBjb25zdCBjYm9uZSA9IHRoaXMuYm9uZXNbYl9pZHhdXG5cbiAgICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5cblxuICAgIC8vIENoaWxkIGlzIGEgUm9vdCBCb25lLCBqdXN0IHJlc2V0IHNpbmNlIHRoZXJlIGlzIG5vIHBhcmVudC5cbiAgICBpZiAoY2JvbmUucF9pZHggPT0gbnVsbCkge1xuICAgICAgcHQucG9zaXRpb24uc2V0KDAsIDAsIDApXG4gICAgICBwdC5zY2FsZS5zZXQoMCwgMCwgMClcbiAgICAgIHB0LnF1YXRlcm5pb24uc2V0KDAsIDAsIDAsIDApXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFBhcmVudHMgRXhpc3QsIGxvb3AgdGlsbCByZWFjaGluZyB0aGUgcm9vdFxuICAgICAgbGV0IGIgPSB0aGlzLmJvbmVzW2Nib25lLnBfaWR4XVxuICAgICAgcHQucG9zaXRpb24uY29weShiLmxvY2FsLnBvc2l0aW9uKVxuICAgICAgcHQuc2NhbGUuY29weShiLmxvY2FsLnNjYWxlKVxuICAgICAgcHQucXVhdGVybmlvbi5jb3B5KGIubG9jYWwucXVhdGVybmlvbilcblxuICAgICAgd2hpbGUgKGIucF9pZHggIT0gbnVsbCkge1xuICAgICAgICBiID0gdGhpcy5ib25lc1tiLnBfaWR4XVxuICAgICAgICB0aGlzLnRyYW5zZm9ybUFkZF9yZXYocHQsIGIubG9jYWwpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG5cbiAgICB0aGlzLnRyYW5zZm9ybUFkZF9yZXYocHQsIHRoaXMucm9vdE9mZnNldCkgLy8gQWRkIFN0YXJ0aW5nIE9mZnNldFxuICAgIGlmICh0X29mZnNldCkge1xuICAgICAgdGhpcy50cmFuc2Zvcm1BZGRfcmV2KHB0LCB0X29mZnNldCkgLy8gQWRkIEFkZGl0aW9uYWwgU3RhcnRpbmcgT2Zmc2V0XG4gICAgfVxuXG4gICAgaWYgKGN0KSB7XG4gICAgICBjdC5wb3NpdGlvbi5jb3B5KHB0LnBvc2l0aW9uKVxuICAgICAgY3Quc2NhbGUuY29weShwdC5zY2FsZSlcbiAgICAgIGN0LnF1YXRlcm5pb24uY29weShwdC5xdWF0ZXJuaW9uKVxuICAgICAgdHJhbnNmb3JtQWRkKGN0LCBjYm9uZS5sb2NhbCkgLy8gUmVxdWVzdGluZyBDaGlsZCBXUyBJbmZvIFRvb1xuICAgICAgLy8gY3QuZnJvbV9hZGQocHQsIGNib25lLmxvY2FsKSAvLyBSZXF1ZXN0aW5nIENoaWxkIFdTIEluZm8gVG9vXG4gICAgfVxuXG4gICAgcmV0dXJuIHB0XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9zZVxuIiwiLy8gQHRzLW5vY2hlY2tcbmltcG9ydCB7IE9iamVjdDNELCBTa2lubmVkTWVzaCB9IGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgYWRkQ29tcG9uZW50LCBnZXRDb21wb25lbnQgfSBmcm9tICcuLi8uLi9lY3MvZnVuY3Rpb25zL0NvbXBvbmVudEZ1bmN0aW9ucydcbmltcG9ydCB7IENoYWluIH0gZnJvbSAnLi4vY2xhc3Nlcy9DaGFpbidcbmltcG9ydCB7IElLT2JqIH0gZnJvbSAnLi4vY29tcG9uZW50cy9JS09iaidcbmltcG9ydCB7IElLUmlnQ29tcG9uZW50LCBJS1JpZ1RhcmdldENvbXBvbmVudCwgSUtSaWdDb21wb25lbnRUeXBlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9JS1JpZ0NvbXBvbmVudCdcbmltcG9ydCB7IEFybWF0dXJlVHlwZSB9IGZyb20gJy4uL2VudW1zL0FybWF0dXJlVHlwZSdcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gJy4uLy4uL2Vjcy9jbGFzc2VzL0VudGl0eSdcbmltcG9ydCBQb3NlIGZyb20gJy4uL2NsYXNzZXMvUG9zZSdcbmltcG9ydCB7IHNldHVwTWl4YW1vSUtSaWcsIHNldHVwVFJleElLUmlnIH0gZnJvbSAnLi9JS0Z1bmN0aW9ucydcbmltcG9ydCB7IElLU29sdmVyRnVuY3Rpb24sIHNvbHZlTGltYiB9IGZyb20gJy4vSUtTb2x2ZXJzJ1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkUmlnKFxuICBlbnRpdHk6IEVudGl0eSxcbiAgcm9vdE9iamVjdDogT2JqZWN0M0QsXG4gIHRwb3NlID0gbnVsbCxcbiAgdXNlX25vZGVfb2Zmc2V0ID0gZmFsc2UsXG4gIGFybV90eXBlOiBBcm1hdHVyZVR5cGUgPSBBcm1hdHVyZVR5cGUuTUlYQU1PXG4pOiBJS1JpZ0NvbXBvbmVudFR5cGUge1xuICByZXR1cm4gX2FkZFJpZyhJS1JpZ0NvbXBvbmVudCwgZW50aXR5LCByb290T2JqZWN0LCB0cG9zZSwgdXNlX25vZGVfb2Zmc2V0LCBhcm1fdHlwZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZFRhcmdldFJpZyhcbiAgZW50aXR5OiBFbnRpdHksXG4gIHJvb3RPYmplY3Q6IE9iamVjdDNELFxuICB0cG9zZSA9IG51bGwsXG4gIHVzZV9ub2RlX29mZnNldCA9IGZhbHNlLFxuICBhcm1fdHlwZTogQXJtYXR1cmVUeXBlID0gQXJtYXR1cmVUeXBlLk1JWEFNT1xuKTogSUtSaWdDb21wb25lbnRUeXBlIHtcbiAgcmV0dXJuIF9hZGRSaWcoSUtSaWdUYXJnZXRDb21wb25lbnQsIGVudGl0eSwgcm9vdE9iamVjdCwgdHBvc2UsIHVzZV9ub2RlX29mZnNldCwgYXJtX3R5cGUpXG59XG5cbmZ1bmN0aW9uIF9hZGRSaWcoXG4gIGNvbXBvbmVudENsYXNzOiB0eXBlb2YgSUtSaWdDb21wb25lbnQgfCB0eXBlb2YgSUtSaWdUYXJnZXRDb21wb25lbnQsXG4gIGVudGl0eTogRW50aXR5LFxuICByb290T2JqZWN0OiBPYmplY3QzRCxcbiAgdHBvc2UgPSBudWxsLFxuICB1c2Vfbm9kZV9vZmZzZXQgPSBmYWxzZSxcbiAgYXJtX3R5cGU6IEFybWF0dXJlVHlwZSA9IEFybWF0dXJlVHlwZS5NSVhBTU9cbik6IElLUmlnQ29tcG9uZW50VHlwZSB7XG4gIC8vIE5PVEU6IHJvb3RPYmplY3Qgc2hvdWxkIGNvbnRhaW4gc2tpbm5lZE1lc2ggYW5kIGl0J3MgYm9uZXNcbiAgY29uc3Qgc2tpbm5lZE1lc2ggPSByb290T2JqZWN0LmdldE9iamVjdEJ5UHJvcGVydHkoJ3R5cGUnLCAnU2tpbm5lZE1lc2gnKSBhcyBTa2lubmVkTWVzaFxuXG4gIGFkZENvbXBvbmVudChlbnRpdHksIElLT2JqLCB7IHJlZjogc2tpbm5lZE1lc2ggfSlcbiAgY29uc3QgcmlnID0gYWRkQ29tcG9uZW50KGVudGl0eSwgY29tcG9uZW50Q2xhc3MsIHtcbiAgICB0cG9zZTogbmV3IFBvc2Uocm9vdE9iamVjdCwgdHJ1ZSksIC8vIElmIFBhc3NpbmcgYSBUUG9zZSwgaXQgbXVzdCBoYXZlIGl0cyB3b3JsZCBzcGFjZSBjb21wdXRlZC5cbiAgICBwb3NlOiBuZXcgUG9zZShyb290T2JqZWN0LCBmYWxzZSksXG4gICAgY2hhaW5zOiBudWxsLCAvLyB3aWxsIGJlIHBvcHVsYXRlZCBsYXRlciBpbiBzZXR1cCByaWdcbiAgICBwb2ludHM6IG51bGwgLy8gd2lsbCBiZSBwb3B1bGF0ZWQgbGF0ZXIgaW4gc2V0dXAgcmlnXG4gIH0pXG5cbiAgLy9cbiAgLy8gLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyAvLyBBcHBseSBOb2RlJ3MgU3RhcnRpbmcgVHJhbnNmb3JtIGFzIGFuIG9mZnNldCBmb3IgcG9zZXMuXG4gIC8vIC8vIFRoaXMgaXMgb25seSBpbXBvcnRhbnQgd2hlbiBjb21wdXRpbmcgV29ybGQgU3BhY2UgVHJhbnNmb3JtcyB3aGVuXG4gIC8vIC8vIGRlYWxpbmcgd2l0aCBzcGVjaWZpYyBza2VsZXRvbnMsIGxpa2UgTWl4YW1vIHN0dWZmLlxuICAvLyAvLyBOZWVkIHRvIGRvIHRoaXMgdG8gcmVuZGVyIHRoaW5ncyBjb3JyZWN0bHlcbiAgLy8gaWYgKHVzZV9ub2RlX29mZnNldCkge1xuICAvLyAgIGxldCBsID0gZW50aXR5Lk9iaiA/IGVudGl0eS5PYmouZ2V0X3RyYW5zZm9ybSgpIDogZW50aXR5Lk5vZGUubG9jYWwgLy8gT2JqIGlzIGEgVGhyZWVKUyBDb21wb25lbnRcbiAgLy9cbiAgLy8gICB0aGlzLnBvc2Uuc2V0X29mZnNldChsLnJvdCwgbC5wb3MsIGwuc2NsKVxuICAvLyAgIGlmICghdHBvc2UpIHRoaXMudHBvc2Uuc2V0X29mZnNldChsLnJvdCwgbC5wb3MsIGwuc2NsKVxuICAvLyB9XG4gIC8vXG4gIC8vIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gLy8gSWYgVFBvc2UgV2FzIENyZWF0ZWQgYnkgUmlnLCBpdCBkb2VzIG5vdCBoYXZlIGl0cyB3b3JsZFxuICAvLyAvLyBTcGFjZSBDb21wdXRlZC4gTXVzdCBkbyB0aGlzIGFmdGVyIHNldHRpbmcgb2Zmc2V0IHRvIHdvcmsgcmlnaHQuXG4gIC8vIGlmICghdHBvc2UpIHRoaXMudHBvc2UudXBkYXRlX3dvcmxkKClcbiAgLy9cbiAgLy8gLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyAvLyBBdXRvIFNldHVwIHRoZSBQb2ludHMgYW5kIENoYWlucyBiYXNlZCBvblxuICAvLyAvLyBLbm93biBTa2VsZXRvbiBTdHJ1Y3R1cmVzLlxuICBzd2l0Y2ggKGFybV90eXBlKSB7XG4gICAgY2FzZSBBcm1hdHVyZVR5cGUuTUlYQU1POlxuICAgICAgc2V0dXBNaXhhbW9JS1JpZyhyaWcpXG4gICAgICBicmVha1xuICAgIGNhc2UgQXJtYXR1cmVUeXBlLlRSRVg6XG4gICAgICBzZXR1cFRSZXhJS1JpZyhyaWcpXG4gICAgICBicmVha1xuICAgIGRlZmF1bHQ6XG4gICAgICBjb25zb2xlLmVycm9yKCdVbnN1cHBvcnRlZCByaWcgdHlwZScsIGFybV90eXBlKVxuICB9XG5cbiAgcmlnLnRwb3NlLmFwcGx5KClcblxuICBpZiAoIU9iamVjdC5rZXlzKHJpZy5jaGFpbnMpLmxlbmd0aCB8fCAhT2JqZWN0LmtleXMocmlnLnBvaW50cykubGVuZ3RoKSB7XG4gICAgZGVidWdnZXJcbiAgfVxuXG4gIHJldHVybiByaWdcbn1cblxuZnVuY3Rpb24gaW5pdE1peGFtb1JpZyhhcm1hdHVyZSwgcmlnKSB7XG4gIGNvbnNvbGUuZXJyb3IoJ2luaXRNaXhhbW9SaWcgTk9UIElNUExFTUVOVEVEJylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZFBvaW50KHJpZzogSUtSaWdDb21wb25lbnRUeXBlLCBuYW1lOiBzdHJpbmcsIGJvbmVOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgY29uc3QgYm9uZXMgPSByaWcudHBvc2UuYm9uZXNcbiAgcmlnLnBvaW50c1tuYW1lXSA9IHtcbiAgICBpbmRleDogYm9uZXMuZmluZEluZGV4KChib25lKSA9PiBib25lLm5hbWUuaW5jbHVkZXMoYm9uZU5hbWUpKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDaGFpbihcbiAgcmlnOiBJS1JpZ0NvbXBvbmVudFR5cGUsXG4gIG5hbWU6IHN0cmluZyxcbiAgbmFtZUFycmF5OiBzdHJpbmdbXSxcbiAgZW5kX25hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsLFxuICBpa1NvbHZlcjogSUtTb2x2ZXJGdW5jdGlvbiB8IG51bGwgPSBudWxsXG4pIHtcbiAgLy8gIGF4aXM9XCJ6XCIsXG4gIGxldCBib25lTmFtZTogc3RyaW5nLCBiXG4gIGNvbnN0IGJvbmVzID0gcmlnLnRwb3NlLmJvbmVzXG5cbiAgY29uc3QgY2hhaW4gPSBuZXcgQ2hhaW4oKSAvLyBheGlzXG4gIGZvciAoYm9uZU5hbWUgb2YgbmFtZUFycmF5KSB7XG4gICAgY29uc3QgaW5kZXggPSBib25lcy5maW5kSW5kZXgoKGJvbmUpID0+IGJvbmUubmFtZS5pbmNsdWRlcyhib25lTmFtZSkpXG4gICAgLy8gVE9ETzogc2tpcCB0aGUgYm9uZT8gb3Igc2tpcCB0aGUgY2hhaW4/IG9yIHRocm93IGVycm9yP1xuICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgIGNvbnNvbGUud2FybignYWRkQ2hhaW46IEJvbmUgWyVzXSBub3QgZm91bmQgaW4gYXJtYXR1cmUnLCBib25lTmFtZSwgYm9uZXMpXG4gICAgICBjb250aW51ZVxuICAgIH1cbiAgICBjb25zdCBib25lID0gYm9uZXNbaW5kZXhdLmJvbmVcblxuICAgIGxldCBsZW5ndGggPSAwXG4gICAgaWYgKGJvbmUuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgbGVuZ3RoID0gYm9uZS5jaGlsZHJlblswXS5wb3NpdGlvbi5sZW5ndGgoKVxuICAgIH1cbiAgICBjb25zdCBvID0geyBpbmRleCwgcmVmOiBib25lLCBsZW5ndGggfVxuXG4gICAgY2hhaW4uY2hhaW5Cb25lcy5wdXNoKG8pXG4gICAgY2hhaW4uY250KytcbiAgICBjaGFpbi5sZW5ndGggKz0gbGVuZ3RoXG4gIH1cblxuICBpZiAoZW5kX25hbWUpIHtcbiAgICBjaGFpbi5lbmRfaWR4ID0gYm9uZXMuZmluZEluZGV4KChib25lKSA9PiBib25lLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhlbmRfbmFtZS50b0xvd2VyQ2FzZSgpKSlcbiAgfVxuXG4gIGNoYWluLmlrU29sdmVyID0gaWtTb2x2ZXIgPz8gc29sdmVMaW1iXG5cbiAgcmlnLmNoYWluc1tuYW1lXSA9IGNoYWluXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRQb3NpdGlvbihlbnRpdHk6IEVudGl0eSwgLi4ucDogbnVtYmVyW10pIHtcbiAgY29uc3QgeyByZWYgfSA9IGdldENvbXBvbmVudChlbnRpdHksIElLT2JqKVxuICBpZiAocC5sZW5ndGggPT0gMykgcmVmLnBvc2l0aW9uLmZyb21BcnJheShwKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmlnVHJhbnNmb3JtKGVudGl0eTogRW50aXR5KSB7XG4gIGNvbnN0IHsgcmVmIH0gPSBnZXRDb21wb25lbnQoZW50aXR5LCBJS09iailcbiAgY29uc3QgcCA9IHJlZi5wb3NpdGlvbixcbiAgICBxID0gcmVmLnF1YXRlcm5pb24sXG4gICAgcyA9IHJlZi5zY2FsZVxuICByZXR1cm4ge1xuICAgIHBvc2l0aW9uOiBbcC54LCBwLnksIHAuel0sXG4gICAgcXVhdGVybmlvbjogW3EueCwgcS55LCBxLnosIHEud10sXG4gICAgc2NhbGU6IFtzLngsIHMueSwgcy56XVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRSZWZlcmVuY2UoZW50aXR5OiBFbnRpdHksIG86IFNraW5uZWRNZXNoKSB7XG4gIGdldENvbXBvbmVudChlbnRpdHksIElLT2JqKS5yZWYgPSBvXG4gIC8vIEVuZ2luZS5zY2VuZS5hZGQoIG8gKTtcbn1cbiIsImltcG9ydCB7IFZlY3RvcjMgfSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IExFRlQsIFVQLCBGT1JXQVJEIH0gZnJvbSAnLi4vY29uc3RhbnRzL1ZlY3RvcjNDb25zdGFudHMnXG5cbi8qXG4zeDMgUm90YXRpb24gTWF0cml4XG5SICBUICBGICAgICAgXG4wMCAwMyAwNlxuMDEgMDQgMDdcbjAyIDA1IDA4XG5cbmxlZnRcdCgwLDEsMilcbnVwXHRcdCgzLDQsNSlcbmZvcndhcmRcdCg2LDcsOSlcbiovXG5leHBvcnQgY2xhc3MgQXhpcyB7XG4gIHg6IFZlY3RvcjNcbiAgeTogVmVjdG9yM1xuICB6OiBWZWN0b3IzXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMueCA9IG5ldyBWZWN0b3IzKCkuY29weShMRUZUKVxuICAgIHRoaXMueSA9IG5ldyBWZWN0b3IzKCkuY29weShVUClcbiAgICB0aGlzLnogPSBuZXcgVmVjdG9yMygpLmNvcHkoRk9SV0FSRClcbiAgfVxuICAvL1Bhc3NpbmcgaW4gVmVjdG9ycy5cbiAgc2V0KHgsIHksIHosIGRvX25vcm0gPSBmYWxzZSkge1xuICAgIHRoaXMueC5jb3B5KHgpXG4gICAgdGhpcy55LmNvcHkoeSlcbiAgICB0aGlzLnouY29weSh6KVxuXG4gICAgaWYgKGRvX25vcm0pIHtcbiAgICAgIHRoaXMueC5ub3JtYWxpemUoKVxuICAgICAgdGhpcy55Lm5vcm1hbGl6ZSgpXG4gICAgICB0aGlzLnoubm9ybWFsaXplKClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIGZyb21EaXJlY3Rpb24oZndkLCB1cCkge1xuICAgIHRoaXMuei5jb3B5KGZ3ZCkubm9ybWFsaXplKClcbiAgICB0aGlzLnguY29weSh1cCkuY3Jvc3ModGhpcy56KS5ub3JtYWxpemUoKVxuICAgIHRoaXMueS5jb3B5KHRoaXMueikuY3Jvc3ModGhpcy54KS5ub3JtYWxpemUoKVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICByb3RhdGUocmFkLCBheGlzID0gJ3gnLCBvdXQ6IGFueSA9IG51bGwpIHtcbiAgICBvdXQgPSBvdXQgfHwgdGhpc1xuXG4gICAgY29uc3Qgc2luID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgIGNvcyA9IE1hdGguY29zKHJhZClcbiAgICBsZXQgeCwgeSwgelxuXG4gICAgc3dpdGNoIChheGlzKSB7XG4gICAgICBjYXNlICd5JzogLy8uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuICAgICAgICB4ID0gdGhpcy54WzBdXG4gICAgICAgIHogPSB0aGlzLnhbMl1cbiAgICAgICAgdGhpcy54WzBdID0geiAqIHNpbiArIHggKiBjb3MgLy94XG4gICAgICAgIHRoaXMueFsyXSA9IHogKiBjb3MgLSB4ICogc2luIC8velxuXG4gICAgICAgIHggPSB0aGlzLnpbMF1cbiAgICAgICAgeiA9IHRoaXMuelsyXVxuICAgICAgICB0aGlzLnpbMF0gPSB6ICogc2luICsgeCAqIGNvcyAvL3hcbiAgICAgICAgdGhpcy56WzJdID0geiAqIGNvcyAtIHggKiBzaW4gLy96XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICd4JzogLy8uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuICAgICAgICB5ID0gdGhpcy55WzFdXG4gICAgICAgIHogPSB0aGlzLnlbMl1cbiAgICAgICAgdGhpcy55WzFdID0geSAqIGNvcyAtIHogKiBzaW4gLy95XG4gICAgICAgIHRoaXMueVsyXSA9IHkgKiBzaW4gKyB6ICogY29zIC8velxuXG4gICAgICAgIHkgPSB0aGlzLnpbMV1cbiAgICAgICAgeiA9IHRoaXMuelsyXVxuICAgICAgICB0aGlzLnpbMV0gPSB5ICogY29zIC0geiAqIHNpbiAvL3lcbiAgICAgICAgdGhpcy56WzJdID0geSAqIHNpbiArIHogKiBjb3MgLy96XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICd6JzogLy8uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLlxuICAgICAgICB4ID0gdGhpcy54WzBdXG4gICAgICAgIHkgPSB0aGlzLnhbMV1cbiAgICAgICAgdGhpcy54WzBdID0geCAqIGNvcyAtIHkgKiBzaW4gLy94XG4gICAgICAgIHRoaXMueFsxXSA9IHggKiBzaW4gKyB5ICogY29zIC8veVxuXG4gICAgICAgIHggPSB0aGlzLnlbMF1cbiAgICAgICAgeSA9IHRoaXMueVsxXVxuICAgICAgICB0aGlzLnlbMF0gPSB4ICogY29zIC0geSAqIHNpbiAvL3hcbiAgICAgICAgdGhpcy55WzFdID0geCAqIHNpbiArIHkgKiBjb3MgLy95XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgcmV0dXJuIG91dFxuICB9XG59XG4iLCJpbXBvcnQgeyBRdWF0ZXJuaW9uLCBWZWN0b3IzIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBjcmVhdGVNYXBwZWRDb21wb25lbnQgfSBmcm9tICcuLi8uLi9lY3MvZnVuY3Rpb25zL0NvbXBvbmVudEZ1bmN0aW9ucydcbmltcG9ydCB7IEF4aXMgfSBmcm9tICcuLi9jbGFzc2VzL0F4aXMnXG5cbmV4cG9ydCB0eXBlIElLUG9zZUxpbWJEYXRhID0geyBsZW5ndGhTY2FsZTogbnVtYmVyOyBkaXI6IFZlY3RvcjM7IGpvaW50RGlyZWN0aW9uOiBWZWN0b3IzIH1cbmV4cG9ydCB0eXBlIElLUG9zZUxvb2tUd2lzdCA9IHsgbG9va0RpcmVjdGlvbjogVmVjdG9yMzsgdHdpc3REaXJlY3Rpb246IFZlY3RvcjMgfVxuZXhwb3J0IHR5cGUgSUtQb3NlSGlwRGF0YSA9IHtcbiAgYmluZF9oZWlnaHQ6IG51bWJlclxuICBtb3ZlbWVudDogVmVjdG9yM1xuICBkaXI6IFZlY3RvcjNcbiAgdHdpc3Q6IG51bWJlclxufVxuZXhwb3J0IHR5cGUgSUtQb3NlU3BpbmVEYXRhID0gW0lLUG9zZUxvb2tUd2lzdCwgSUtQb3NlTG9va1R3aXN0XVxuXG5leHBvcnQgdHlwZSBJS1Bvc2VDb21wb25lbnRUeXBlID0ge1xuICBzdGFydFBvc2l0aW9uPzogVmVjdG9yMyAvLyBTdGFydCBvZiBjaGFpbiAod29ybGQgc3BhY2UgcG9zaXRpb24gb2Ygc2hvdWxkZXIgZm9yIGFuIGFybSBjaGFpbilcbiAgZW5kUG9zaXRpb24/OiBWZWN0b3IzIC8vIFRhcmdldCBwb3NpdGlvbiBmb3IgY2hhaW4gdG8gcmVhY2ggKGVuZCBlZmZlY3RvcilcbiAgYXhpcz86IEF4aXMgLy8gQXhpcyBvZiByb3RhdGlvbiB0b3dhcmQgdGhlIGVuZCBwb3NpdGlvblxuICBsZW5ndGg/OiBudW1iZXJcblxuICBzcGluZVBhcmVudFF1YXRlcm5pb24/OiBRdWF0ZXJuaW9uXG4gIHNwaW5lUGFyZW50UG9zaXRpb24/OiBWZWN0b3IzXG4gIHNwaW5lUGFyZW50U2NhbGU/OiBWZWN0b3IzXG5cbiAgc3BpbmVDaGlsZFF1YXRlcm5pb24/OiBRdWF0ZXJuaW9uXG4gIHNwaW5lQ2hpbGRQb3NpdGlvbj86IFZlY3RvcjNcbiAgc3BpbmVDaGlsZFNjYWxlPzogVmVjdG9yM1xuXG4gIGhpcD86IElLUG9zZUhpcERhdGFcblxuICBmb290X2w/OiBJS1Bvc2VMb29rVHdpc3RcbiAgZm9vdF9yPzogSUtQb3NlTG9va1R3aXN0XG5cbiAgLy8gSUsgRGF0YSBmb3IgbGltYnMgaXMgZmlyc3QgdGhlIERpcmVjdGlvbiB0b3dhcmQgdGhlIEVuZCBFZmZlY3RvcixcbiAgLy8gVGhlIHNjYWxlZCBsZW5ndGggdG8gdGhlIGVuZCBlZmZlY3RvciwgcGx1cyB0aGUgZGlyZWN0aW9uIHRoYXRcbiAgLy8gdGhlIEtORUUgb3IgRUxCT1cgaXMgcG9pbnRpbmcuIEZvciBJSyBUYXJnZXRpbmcsIERpciBpcyBGT1JXQVJEIGFuZFxuICAvLyBqb2ludCBkaXIgaXMgVVBcbiAgbGVnX2w/OiBJS1Bvc2VMaW1iRGF0YVxuICBsZWdfcj86IElLUG9zZUxpbWJEYXRhXG4gIGFybV9sPzogSUtQb3NlTGltYkRhdGFcbiAgYXJtX3I/OiBJS1Bvc2VMaW1iRGF0YVxuXG4gIHNwaW5lPzogSUtQb3NlU3BpbmVEYXRhXG5cbiAgaGVhZD86IElLUG9zZUxvb2tUd2lzdFxufVxuXG5leHBvcnQgY29uc3QgZGVmYXVsdElLUG9zZUNvbXBvbmVudFZhbHVlcyA9IGZ1bmN0aW9uICgpOiBJS1Bvc2VDb21wb25lbnRUeXBlIHtcbiAgcmV0dXJuIHtcbiAgICBzdGFydFBvc2l0aW9uOiBuZXcgVmVjdG9yMygpLCAvLyBTdGFydCBvZiBjaGFpbiAod29ybGQgc3BhY2UgcG9zaXRpb24gb2Ygc2hvdWxkZXIgZm9yIGFuIGFybSBjaGFpbilcbiAgICBlbmRQb3NpdGlvbjogbmV3IFZlY3RvcjMoKSwgLy8gVGFyZ2V0IHBvc2l0aW9uIGZvciBjaGFpbiB0byByZWFjaCAoZW5kIGVmZmVjdG9yKVxuICAgIGF4aXM6IG5ldyBBeGlzKCksIC8vIEF4aXMgb2Ygcm90YXRpb24gdG93YXJkIHRoZSBlbmQgcG9zaXRpb25cbiAgICBsZW5ndGg6IDAsXG5cbiAgICBzcGluZVBhcmVudFF1YXRlcm5pb246IG5ldyBRdWF0ZXJuaW9uKCksXG4gICAgc3BpbmVQYXJlbnRQb3NpdGlvbjogbmV3IFZlY3RvcjMoKSxcbiAgICBzcGluZVBhcmVudFNjYWxlOiBuZXcgVmVjdG9yMygpLFxuXG4gICAgc3BpbmVDaGlsZFF1YXRlcm5pb246IG5ldyBRdWF0ZXJuaW9uKCksXG4gICAgc3BpbmVDaGlsZFBvc2l0aW9uOiBuZXcgVmVjdG9yMygpLFxuICAgIHNwaW5lQ2hpbGRTY2FsZTogbmV3IFZlY3RvcjMoKSxcblxuICAgIGhpcDoge1xuICAgICAgYmluZF9oZWlnaHQ6IDAsXG4gICAgICBtb3ZlbWVudDogbmV3IFZlY3RvcjMoKSxcbiAgICAgIGRpcjogbmV3IFZlY3RvcjMoKSxcbiAgICAgIHR3aXN0OiAwXG4gICAgfSxcblxuICAgIGZvb3RfbDogeyBsb29rRGlyZWN0aW9uOiBuZXcgVmVjdG9yMygpLCB0d2lzdERpcmVjdGlvbjogbmV3IFZlY3RvcjMoKSB9LFxuICAgIGZvb3RfcjogeyBsb29rRGlyZWN0aW9uOiBuZXcgVmVjdG9yMygpLCB0d2lzdERpcmVjdGlvbjogbmV3IFZlY3RvcjMoKSB9LFxuXG4gICAgLy8gSUsgRGF0YSBmb3IgbGltYnMgaXMgZmlyc3QgdGhlIERpcmVjdGlvbiB0b3dhcmQgdGhlIEVuZCBFZmZlY3RvcixcbiAgICAvLyBUaGUgc2NhbGVkIGxlbmd0aCB0byB0aGUgZW5kIGVmZmVjdG9yLCBwbHVzIHRoZSBkaXJlY3Rpb24gdGhhdFxuICAgIC8vIHRoZSBLTkVFIG9yIEVMQk9XIGlzIHBvaW50aW5nLiBGb3IgSUsgVGFyZ2V0aW5nLCBEaXIgaXMgRk9SV0FSRCBhbmRcbiAgICAvLyBqb2ludCBkaXIgaXMgVVBcbiAgICBsZWdfbDogeyBsZW5ndGhTY2FsZTogMCwgZGlyOiBuZXcgVmVjdG9yMygpLCBqb2ludERpcmVjdGlvbjogbmV3IFZlY3RvcjMoKSB9LFxuICAgIGxlZ19yOiB7IGxlbmd0aFNjYWxlOiAwLCBkaXI6IG5ldyBWZWN0b3IzKCksIGpvaW50RGlyZWN0aW9uOiBuZXcgVmVjdG9yMygpIH0sXG4gICAgYXJtX2w6IHsgbGVuZ3RoU2NhbGU6IDAsIGRpcjogbmV3IFZlY3RvcjMoKSwgam9pbnREaXJlY3Rpb246IG5ldyBWZWN0b3IzKCkgfSxcbiAgICBhcm1fcjogeyBsZW5ndGhTY2FsZTogMCwgZGlyOiBuZXcgVmVjdG9yMygpLCBqb2ludERpcmVjdGlvbjogbmV3IFZlY3RvcjMoKSB9LFxuXG4gICAgc3BpbmU6IFtcbiAgICAgIHsgbG9va0RpcmVjdGlvbjogbmV3IFZlY3RvcjMoKSwgdHdpc3REaXJlY3Rpb246IG5ldyBWZWN0b3IzKCkgfSxcbiAgICAgIHsgbG9va0RpcmVjdGlvbjogbmV3IFZlY3RvcjMoKSwgdHdpc3REaXJlY3Rpb246IG5ldyBWZWN0b3IzKCkgfVxuICAgIF0sXG5cbiAgICBoZWFkOiB7IGxvb2tEaXJlY3Rpb246IG5ldyBWZWN0b3IzKCksIHR3aXN0RGlyZWN0aW9uOiBuZXcgVmVjdG9yMygpIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgSUtQb3NlQ29tcG9uZW50ID0gY3JlYXRlTWFwcGVkQ29tcG9uZW50PElLUG9zZUNvbXBvbmVudFR5cGU+KCdJS1Bvc2VDb21wb25lbnQnKVxuIiwiaW1wb3J0IHtcbiAgQWRkaXRpdmVCbGVuZGluZyxcbiAgQW5pbWF0aW9uTWl4ZXIsXG4gIEJvbmUsXG4gIERvdWJsZVNpZGUsXG4gIEdyb3VwLFxuICBNZXNoLFxuICBNZXNoQmFzaWNNYXRlcmlhbCxcbiAgT2JqZWN0M0QsXG4gIFBsYW5lR2VvbWV0cnksXG4gIFNrZWxldG9uLFxuICBTa2lubmVkTWVzaCxcbiAgc1JHQkVuY29kaW5nXG59IGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgQXNzZXRMb2FkZXIgfSBmcm9tICcuLi8uLi9hc3NldHMvY2xhc3Nlcy9Bc3NldExvYWRlcidcbmltcG9ydCB7IGlzQ2xpZW50IH0gZnJvbSAnLi4vLi4vY29tbW9uL2Z1bmN0aW9ucy9pc0NsaWVudCdcbmltcG9ydCB7IGFkZENvbXBvbmVudCwgZ2V0Q29tcG9uZW50IH0gZnJvbSAnLi4vLi4vZWNzL2Z1bmN0aW9ucy9Db21wb25lbnRGdW5jdGlvbnMnXG5pbXBvcnQgeyBBbmltYXRpb25NYW5hZ2VyIH0gZnJvbSAnLi4vQW5pbWF0aW9uTWFuYWdlcidcbmltcG9ydCB7IEFuaW1hdGlvbkNvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvQW5pbWF0aW9uQ29tcG9uZW50J1xuaW1wb3J0IHsgQXZhdGFyQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50cy9BdmF0YXJDb21wb25lbnQnXG5pbXBvcnQgeyBTa2VsZXRvblV0aWxzIH0gZnJvbSAnLi4vU2tlbGV0b25VdGlscydcbmltcG9ydCB7IEFuaW1hdGlvblJlbmRlcmVyIH0gZnJvbSAnLi4vYW5pbWF0aW9ucy9BbmltYXRpb25SZW5kZXJlcidcbmltcG9ydCB7IEF2YXRhckFuaW1hdGlvbkNvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvQXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50J1xuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnLi4vLi4vZWNzL2NsYXNzZXMvRW50aXR5J1xuaW1wb3J0IHsgQXZhdGFyUGVuZGluZ0NvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvQXZhdGFyUGVuZGluZ0NvbXBvbmVudCdcbmltcG9ydCB7IEF2YXRhckVmZmVjdENvbXBvbmVudCwgTWF0ZXJpYWxNYXAgfSBmcm9tICcuLi9jb21wb25lbnRzL0F2YXRhckVmZmVjdENvbXBvbmVudCdcbmltcG9ydCB7IERpc3NvbHZlRWZmZWN0IH0gZnJvbSAnLi4vRGlzc29sdmVFZmZlY3QnXG5pbXBvcnQgeyBDYW1lcmFMYXllcnMgfSBmcm9tICcuLi8uLi9jYW1lcmEvY29uc3RhbnRzL0NhbWVyYUxheWVycydcbmltcG9ydCB7IGJvbmVzRGF0YTIgfSBmcm9tICcuLi9EZWZhdWx0U2tlbGV0b25Cb25lcydcbmltcG9ydCB7IElLT2JqIH0gZnJvbSAnLi4vLi4vaWtyaWcvY29tcG9uZW50cy9JS09iaidcbmltcG9ydCB7IGFkZFJpZywgYWRkVGFyZ2V0UmlnIH0gZnJvbSAnLi4vLi4vaWtyaWcvZnVuY3Rpb25zL1JpZ0Z1bmN0aW9ucydcbmltcG9ydCB7IGRlZmF1bHRJS1Bvc2VDb21wb25lbnRWYWx1ZXMsIElLUG9zZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL2lrcmlnL2NvbXBvbmVudHMvSUtQb3NlQ29tcG9uZW50J1xuaW1wb3J0IHsgQXJtYXR1cmVUeXBlIH0gZnJvbSAnLi4vLi4vaWtyaWcvZW51bXMvQXJtYXR1cmVUeXBlJ1xuXG5leHBvcnQgY29uc3Qgc2V0QXZhdGFyID0gKGVudGl0eSwgYXZhdGFySWQsIGF2YXRhclVSTCkgPT4ge1xuICBjb25zdCBhdmF0YXIgPSBnZXRDb21wb25lbnQoZW50aXR5LCBBdmF0YXJDb21wb25lbnQpXG4gIGlmIChhdmF0YXIpIHtcbiAgICBhdmF0YXIuYXZhdGFySWQgPSBhdmF0YXJJZFxuICAgIGF2YXRhci5hdmF0YXJVUkwgPSBhdmF0YXJVUkxcbiAgfVxuICBsb2FkQXZhdGFyRm9yRW50aXR5KGVudGl0eSlcbn1cblxuZXhwb3J0IGNvbnN0IGxvYWRBdmF0YXJGb3JFbnRpdHkgPSAoZW50aXR5OiBFbnRpdHkpID0+IHtcbiAgaWYgKCFpc0NsaWVudCkgcmV0dXJuXG4gIGNvbnN0IGF2YXRhclVSTCA9IGdldENvbXBvbmVudChlbnRpdHksIEF2YXRhckNvbXBvbmVudCk/LmF2YXRhclVSTFxuICBpZiAoYXZhdGFyVVJMKSB7XG4gICAgQXNzZXRMb2FkZXIubG9hZChcbiAgICAgIHtcbiAgICAgICAgdXJsOiBhdmF0YXJVUkwsXG4gICAgICAgIGNhc3RTaGFkb3c6IHRydWUsXG4gICAgICAgIHJlY2VpdmVTaGFkb3c6IHRydWVcbiAgICAgIH0sXG4gICAgICAoZ2x0ZjogYW55KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGdsdGYuc2NlbmUpXG4gICAgICAgIHNldHVwQXZhdGFyKGVudGl0eSwgU2tlbGV0b25VdGlscy5jbG9uZShnbHRmLnNjZW5lKSwgYXZhdGFyVVJMKVxuICAgICAgfVxuICAgIClcbiAgfSBlbHNlIHtcbiAgICBzZXR1cEF2YXRhcihlbnRpdHksIFNrZWxldG9uVXRpbHMuY2xvbmUoQW5pbWF0aW9uTWFuYWdlci5pbnN0YW5jZS5fZGVmYXVsdE1vZGVsKSlcbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgc2V0QXZhdGFyTGF5ZXIgPSAob2JqOiBPYmplY3QzRCkgPT4ge1xuICBvYmoubGF5ZXJzLmRpc2FibGUoQ2FtZXJhTGF5ZXJzLlNjZW5lKVxuICBvYmoubGF5ZXJzLmVuYWJsZShDYW1lcmFMYXllcnMuQXZhdGFyKVxufVxuXG5jb25zdCBzZXR1cEF2YXRhciA9IChlbnRpdHk6IEVudGl0eSwgbW9kZWw6IGFueSwgYXZhdGFyVVJMPzogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGF2YXRhciA9IGdldENvbXBvbmVudChlbnRpdHksIEF2YXRhckNvbXBvbmVudClcbiAgY29uc3QgYW5pbWF0aW9uQ29tcG9uZW50ID0gZ2V0Q29tcG9uZW50KGVudGl0eSwgQW5pbWF0aW9uQ29tcG9uZW50KVxuICBjb25zdCBhdmF0YXJBbmltYXRpb25Db21wb25lbnQgPSBnZXRDb21wb25lbnQoZW50aXR5LCBBdmF0YXJBbmltYXRpb25Db21wb25lbnQpXG5cbiAgbGV0IGhpcHMgPSBtb2RlbFxuXG4gIG1vZGVsLnRyYXZlcnNlKChvKSA9PiB7XG4gICAgLy8gVE9ETzogUmVtb3ZlIG1lIHdoZW4gd2UgYWRkIHJldGFyZ2V0aW5nXG4gICAgaWYgKG8ubmFtZT8uaW5jbHVkZXMoJ21peGFtb3JpZycpKSB7XG4gICAgICBvLm5hbWUgPSBvLm5hbWUucmVwbGFjZSgnbWl4YW1vcmlnJywgJycpXG4gICAgfVxuICAgIGlmIChvLm5hbWU/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2hpcHMnKSkgaGlwcyA9IG9cbiAgfSlcblxuICBjb25zdCBsb2FkZWRBdmF0YXJCb25lTmFtZXM6IHN0cmluZ1tdID0gW11cbiAgaGlwcy50cmF2ZXJzZSgoY2hpbGQpID0+IGxvYWRlZEF2YXRhckJvbmVOYW1lcy5wdXNoKGNoaWxkLm5hbWUpKVxuXG4gIGFuaW1hdGlvbkNvbXBvbmVudC5taXhlci5zdG9wQWxsQWN0aW9uKClcbiAgYXZhdGFyLm1vZGVsQ29udGFpbmVyLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiBjaGlsZC5yZW1vdmVGcm9tUGFyZW50KCkpXG5cbiAgbGV0IG1hdGVyaWFsTGlzdDogQXJyYXk8TWF0ZXJpYWxNYXA+ID0gW11cblxuICBtb2RlbC50cmF2ZXJzZSgob2JqZWN0KSA9PiB7XG4gICAgc2V0QXZhdGFyTGF5ZXIob2JqZWN0KVxuXG4gICAgaWYgKHR5cGVvZiBvYmplY3QubWF0ZXJpYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBvYmplY3QubWF0ZXJpYWwgPSBvYmplY3QubWF0ZXJpYWwuY2xvbmUoKVxuICAgICAgbWF0ZXJpYWxMaXN0LnB1c2goe1xuICAgICAgICBpZDogb2JqZWN0LnV1aWQsXG4gICAgICAgIG1hdGVyaWFsOiBvYmplY3QubWF0ZXJpYWwuY2xvbmUoKVxuICAgICAgfSlcbiAgICAgIG9iamVjdC5tYXRlcmlhbCA9IERpc3NvbHZlRWZmZWN0LmdldERpc3NvbHZlVGV4dHVyZShvYmplY3QpXG4gICAgfVxuICB9KVxuXG4gIG1vZGVsLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiBhdmF0YXIubW9kZWxDb250YWluZXIuYWRkKGNoaWxkKSlcblxuICAvLyBUT0RPOiBmaW5kIHNraW5uZWQgbWVzaCBpbiBhdmF0YXIubW9kZWxDb250YWluZXJcbiAgY29uc3QgYXZhdGFyU2tpbm5lZE1lc2ggPSBhdmF0YXIubW9kZWxDb250YWluZXIuZ2V0T2JqZWN0QnlQcm9wZXJ0eSgndHlwZScsICdTa2lubmVkTWVzaCcpIGFzIFNraW5uZWRNZXNoXG4gIGNvbnN0IHJvb3RCb25lID0gYXZhdGFyU2tpbm5lZE1lc2guc2tlbGV0b24uYm9uZXMuZmluZCgoYikgPT4gYi5wYXJlbnQhLnR5cGUgIT09ICdCb25lJylcbiAgYWRkQ29tcG9uZW50KGVudGl0eSwgSUtPYmosIHsgcmVmOiBhdmF0YXJTa2lubmVkTWVzaCB9KVxuICAvLyBUT0RPOiBhZGQgd2F5IHRvIGhhbmRsZSBhcm1hdHVyZSB0eXBlXG4gIGNvbnN0IGFybWF0dXJlVHlwZSA9IGF2YXRhclVSTD8uaW5jbHVkZXMoJ3RyZXgnKSA/IEFybWF0dXJlVHlwZS5UUkVYIDogQXJtYXR1cmVUeXBlLk1JWEFNT1xuICBhZGRUYXJnZXRSaWcoZW50aXR5LCByb290Qm9uZT8ucGFyZW50ISwgbnVsbCwgZmFsc2UsIGFybWF0dXJlVHlwZSlcbiAgYWRkQ29tcG9uZW50KGVudGl0eSwgSUtQb3NlQ29tcG9uZW50LCBkZWZhdWx0SUtQb3NlQ29tcG9uZW50VmFsdWVzKCkpXG5cbiAgLy8gYW5pbWF0aW9uIHdpbGwgYmUgYXBwbGllZCB0byB0aGlzIHNrZWxldG9uIGluc3RlYWQgb2YgYXZhdGFyXG4gIGNvbnN0IHNvdXJjZVNrZWxldG9uUm9vdCA9IFNrZWxldG9uVXRpbHMuY2xvbmUoZ2V0RGVmYXVsdFNrZWxldG9uKCkucGFyZW50KVxuICBhZGRSaWcoZW50aXR5LCBzb3VyY2VTa2VsZXRvblJvb3QpXG4gIGFuaW1hdGlvbkNvbXBvbmVudC5taXhlciA9IG5ldyBBbmltYXRpb25NaXhlcihzb3VyY2VTa2VsZXRvblJvb3QpXG5cbiAgY29uc3QgcmV0YXJnZXRlZEJvbmVzOiBzdHJpbmdbXSA9IFtdXG5cbiAgc291cmNlU2tlbGV0b25Sb290LnRyYXZlcnNlKChjaGlsZCkgPT4ge1xuICAgIGlmIChjaGlsZC5uYW1lICYmIGNoaWxkLm5hbWUubGVuZ3RoKSByZXRhcmdldGVkQm9uZXMucHVzaChjaGlsZC5uYW1lKVxuICB9KVxuXG4gIHJldGFyZ2V0ZWRCb25lcy5mb3JFYWNoKChyKSA9PiB7XG4gICAgaWYgKCFsb2FkZWRBdmF0YXJCb25lTmFtZXMuaW5jbHVkZXMocikpIGNvbnNvbGUud2FybihgW0F2YXRhciBMb2FkZXJdOiBCb25lICcke3J9JyBub3QgZm91bmRgKVxuICB9KVxuXG4gIGxvYWRlZEF2YXRhckJvbmVOYW1lcy5mb3JFYWNoKChyKSA9PiB7XG4gICAgaWYgKCFyZXRhcmdldGVkQm9uZXMuaW5jbHVkZXMocikpIGNvbnNvbGUud2FybihgW0F2YXRhciBMb2FkZXJdOiBCb25lICcke3J9JyBub3Qgc3VwcG9ydGVkYClcbiAgfSlcblxuICBpZiAoYXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50LmN1cnJlbnRTdGF0ZSkge1xuICAgIEFuaW1hdGlvblJlbmRlcmVyLm1vdW50Q3VycmVudFN0YXRlKGVudGl0eSlcbiAgfVxuXG4gIC8vIGFkdmFuY2UgYW5pbWF0aW9uIGZvciBhIGZyYW1lIHRvIGVsaW1pbmF0ZSBwb3RlbnRpYWwgdC1wb3NlXG4gIGFuaW1hdGlvbkNvbXBvbmVudC5taXhlci51cGRhdGUoMSAvIDYwKVxuXG4gIGxvYWRHcm93aW5nRWZmZWN0T2JqZWN0KGVudGl0eSwgbWF0ZXJpYWxMaXN0KVxufVxuXG5jb25zdCBsb2FkR3Jvd2luZ0VmZmVjdE9iamVjdCA9IGFzeW5jIChlbnRpdHk6IEVudGl0eSwgb3JpZ2luYWxNYXRMaXN0OiBBcnJheTxNYXRlcmlhbE1hcD4pID0+IHtcbiAgY29uc3QgdGV4dHVyZUxpZ2h0ID0gQXNzZXRMb2FkZXIuZ2V0RnJvbUNhY2hlKCcvaXRlbUxpZ2h0LnBuZycpXG4gIGNvbnN0IHRleHR1cmVQbGF0ZSA9IEFzc2V0TG9hZGVyLmdldEZyb21DYWNoZSgnL2l0ZW1QbGF0ZS5wbmcnKVxuXG4gIGNvbnN0IGxpZ2h0TWVzaCA9IG5ldyBNZXNoKFxuICAgIG5ldyBQbGFuZUdlb21ldHJ5KDAuMDQsIDMuMiksXG4gICAgbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAgIHRyYW5zcGFyZW50OiB0cnVlLFxuICAgICAgbWFwOiB0ZXh0dXJlTGlnaHQsXG4gICAgICBibGVuZGluZzogQWRkaXRpdmVCbGVuZGluZyxcbiAgICAgIGRlcHRoV3JpdGU6IGZhbHNlLFxuICAgICAgc2lkZTogRG91YmxlU2lkZVxuICAgIH0pXG4gIClcblxuICBjb25zdCBwbGF0ZU1lc2ggPSBuZXcgTWVzaChcbiAgICBuZXcgUGxhbmVHZW9tZXRyeSgxLjYsIDEuNiksXG4gICAgbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtcbiAgICAgIHRyYW5zcGFyZW50OiBmYWxzZSxcbiAgICAgIG1hcDogdGV4dHVyZVBsYXRlLFxuICAgICAgYmxlbmRpbmc6IEFkZGl0aXZlQmxlbmRpbmcsXG4gICAgICBkZXB0aFdyaXRlOiBmYWxzZVxuICAgIH0pXG4gIClcblxuICBsaWdodE1lc2guZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKClcbiAgcGxhdGVNZXNoLmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ1NwaGVyZSgpXG4gIGxpZ2h0TWVzaC5uYW1lID0gJ2xpZ2h0X29iaidcbiAgcGxhdGVNZXNoLm5hbWUgPSAncGxhdGVfb2JqJ1xuXG4gIHRleHR1cmVMaWdodC5lbmNvZGluZyA9IHNSR0JFbmNvZGluZ1xuICB0ZXh0dXJlTGlnaHQubmVlZHNVcGRhdGUgPSB0cnVlXG4gIHRleHR1cmVQbGF0ZS5lbmNvZGluZyA9IHNSR0JFbmNvZGluZ1xuICB0ZXh0dXJlUGxhdGUubmVlZHNVcGRhdGUgPSB0cnVlXG5cbiAgYWRkQ29tcG9uZW50KGVudGl0eSwgQXZhdGFyUGVuZGluZ0NvbXBvbmVudCwge1xuICAgIGxpZ2h0OiBsaWdodE1lc2gsXG4gICAgcGxhdGU6IHBsYXRlTWVzaFxuICB9KVxuICBhZGRDb21wb25lbnQoZW50aXR5LCBBdmF0YXJFZmZlY3RDb21wb25lbnQsIHtcbiAgICBvcGFjaXR5TXVsdGlwbGllcjogMCxcbiAgICBvcmlnaW5NYXRlcmlhbHM6IG9yaWdpbmFsTWF0TGlzdFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdFNrZWxldG9uKCk6IFNraW5uZWRNZXNoIHtcbiAgY29uc3QgYm9uZXM6IEJvbmVbXSA9IFtdXG4gIGJvbmVzRGF0YTIuZm9yRWFjaCgoZGF0YSkgPT4ge1xuICAgIGNvbnN0IGJvbmUgPSBuZXcgQm9uZSgpXG4gICAgYm9uZS5uYW1lID0gZGF0YS5uYW1lXG4gICAgYm9uZS5wb3NpdGlvbi5mcm9tQXJyYXkoZGF0YS5wb3NpdGlvbilcbiAgICBib25lLnF1YXRlcm5pb24uZnJvbUFycmF5KGRhdGEucXVhdGVybmlvbilcbiAgICBib25lLnNjYWxlLmZyb21BcnJheShkYXRhLnNjYWxlKVxuICAgIGJvbmVzLnB1c2goYm9uZSlcbiAgfSlcblxuICBib25lc0RhdGEyLmZvckVhY2goKGRhdGEsIGluZGV4KSA9PiB7XG4gICAgaWYgKGRhdGEucGFyZW50SW5kZXggIT09IG51bGwpIHtcbiAgICAgIGJvbmVzW2RhdGEucGFyZW50SW5kZXhdLmFkZChib25lc1tpbmRleF0pXG4gICAgfVxuICB9KVxuXG4gIGNvbnN0IGdyb3VwID0gbmV3IEdyb3VwKClcbiAgY29uc3Qgc2tpbm5lZE1lc2ggPSBuZXcgU2tpbm5lZE1lc2goKVxuICBjb25zdCBza2VsZXRvbiA9IG5ldyBTa2VsZXRvbihib25lcylcbiAgc2tpbm5lZE1lc2guYmluZChza2VsZXRvbilcbiAgZ3JvdXAuYWRkKHNraW5uZWRNZXNoKVxuICBncm91cC5hZGQoYm9uZXNbMF0pIC8vIHdlIGFzc3VtZSB0aGF0IHJvb3QgYm9uZSBpcyB0aGUgZmlyc3Qgb25lXG5cbiAgcmV0dXJuIHNraW5uZWRNZXNoXG59XG4iXSwibmFtZXMiOlsiZGVmaW5lUXVlcnkiLCJoYXNDb21wb25lbnQiLCJhZGRDb21wb25lbnQiLCJyZW1vdmVDb21wb25lbnQiLCJGaWxlTG9hZGVyIiwidGhpcyIsIk5VUkJTVXRpbHMuY2FsY0JTcGxpbmVQb2ludCIsIk5VUkJTVXRpbHMuY2FsY05VUkJTRGVyaXZhdGl2ZXMiLCJabGliLkluZmxhdGUiLCJnZXRHTFRGTG9hZGVyIiwiYml0RUNTLmRlZmluZUNvbXBvbmVudCIsImJpdEVDUy5oYXNDb21wb25lbnQiLCJiaXRFQ1MuZ2V0RW50aXR5Q29tcG9uZW50cyIsImJpdEVDUy5kZWZpbmVRdWVyeSIsImVudGVyUXVlcnkiLCJiaXRFQ1MuZW50ZXJRdWVyeSIsImV4aXRRdWVyeSIsImJpdEVDUy5leGl0UXVlcnkiLCJ0ZW1wUXVhdDEiLCJ0ZW1wUXVhdDIiXSwibWFwcGluZ3MiOiJ5MkJBQ2EsSUFDWCxNQUFPLFVBQVksVUFBWSxNQUFPLFNBQVEsVUFBYSxVQUFZLE1BQU8sU0FBUSxTQUFTLE1BQVMsWUNHcEcsR0FBUyxDQUliLGFBQWMsb0JBQ2QsbUJBQW9CLDBCQUNwQixpQkFBa0Isd0JBQ2xCLHlCQUEwQixnQ0FDMUIsYUFBYyxvQkFDZCxZQUFhLG1CQUNiLGFBQWMsb0JBR2QsYUFBYyxvQkFHZCxZQUFhLG1CQUNiLGFBQWMsb0JBQ2Qsa0JBQW1CLHlCQUVuQixhQUFjLGtDQUNkLGtCQUFtQix1Q0FFbkIsc0JBQXVCLGlDQUV2QixTQUFVLGlDQUNWLFdBQVksbUNBQ1osT0FBUSwrQkFFUixRQUFTLGtCQUNULGdCQUFpQix1QkFFakIsYUFBYyxvQkFDZCxjQUFlLHFCQUVmLHlCQUEw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QUFZLElBQVYsRUFBRSxHQUFHLEdBQUcsRUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxHQUFJLFlBQVcsRUFBRSxFQUFFLENBQWdRLE9BQS9QLEtBQUssRUFBRSxHQUFHLEtBQUssRUFBRSxNQUFNLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssTUFBTSxFQUFFLEdBQUksWUFBVyxHQUFHLEVBQUUsS0FBSyxFQUFFLEdBQUcsS0FBSyxFQUFFLEdBQUUsS0FBSyxFQUFFLEdBQU0sSUFBRyxDQUFFLEdBQUUsTUFBSSxHQUFFLE9BQVEsTUFBSyxFQUFFLEVBQUUsT0FBTyxFQUFFLFlBQWEsTUFBSyxFQUFFLEVBQUUsWUFBWSxFQUFFLFlBQWEsTUFBSyxFQUFFLEVBQUUsWUFBWSxFQUFFLFFBQVMsTUFBSyxFQUFFLEVBQUUsU0FBZSxLQUFLLE9BQVEsSUFBRSxLQUFLLEVBQUUsTUFBTSxLQUFLLEVBQUUsR0FBSyxHQUFFLFdBQVcsT0FBTyxNQUFNLEtBQUssRUFBRSxLQUFLLFVBQVcsSUFBRSxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBSyxHQUFFLFdBQVcsT0FBTyxLQUFLLEdBQUcsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsY0FBYyxLQUFNLE9BQU0seUJBQ3p0QyxHQUFJLElBQUUsRUFBRSxHQUFFLEVBQUUsR0FBRSxDQUFDLEVBQUUsR0FBRSxFQUFFLElBQ3ZCLEdBQUUsVUFBVSxFQUFFLFVBQVUsQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsR0FBSSxHQUFFLEdBQUUsS0FBSyxHQUEyQixPQUF4QixFQUFFLEdBQUksTUFBSyxFQUFFLElBQUksS0FBSyxFQUFTLE9BQVEsR0FBRSxHQUFJLEdBQUUsS0FBSyxNQUFNLEVBQUUsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsR0FBRSxFQUFFLEdBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxHQUFrQixHQUFoQixLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUssRUFBRSxHQUFHLEVBQUUsS0FBTSxPQUFNLDBDQUE2RCxHQUFuQixFQUFFLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBSyxFQUFFLEdBQUcsRUFBRSxLQUFNLE9BQU0sMkNBQThELEdBQW5CLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFLLElBQUksQ0FBQyxFQUFFLEtBQU0sT0FBTSxvREFBb0QsR0FBRyxFQUFFLEVBQUUsRUFBRSxPQUFPLEtBQU0sT0FBTSwwQkFBMEIsT0FBTyxLQUFLLE9BQVEsSUFBRSxLQUFLLEVBQ2pnQixFQUFFLEVBQUUsUUFBUSxDQUFZLEdBQVgsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLEVBQUUsR0FBRyxHQUFHLEdBQUcsRUFBRSxHQUFHLE1BQU8sTUFBSyxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLElBQUksRUFBRSxLQUFLLEVBQUUsVUFBVyxJQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsSUFBSSxjQUFjLEtBQU0sT0FBTSx3QkFBeUIsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUUsR0FBRyxNQUFPLE1BQUssS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLFVBQVcsR0FBRSxLQUFLLEVBQUUsR0FBRyxJQUFJLFVBQVcsR0FBRSxPQUFRLEdBQUUsR0FBRSxLQUFLLEdBQUcsSUFBSSxFQUFFLEdBQUUsS0FBSyxHQUFHLEVBQUUsRUFBRSxHQUFFLEtBQUssR0FBRyxFQUFFLEVBQUUsR0FBSyxHQUFFLFdBQVcsT0FBTyxHQUFFLFFBQVEsRUFBRSxHQUFFLEVBQUUsR0FBRSxFQUFFLEdBQUUsRUFBRSxHQUFFLEVBQUUsR0FBRSxFQUFFLEdBQUUsRUFBRSxHQUFFLEVBQUUsR0FBRSxFQUFFLEdBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFFLElBQ3RmLEdBQUUsS0FBSyxHQUFHLEdBQUcsQ0FBQyxFQUFPLElBQUosRUFBRSxFQUFNLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFFLElBQUksRUFBNkMsSUFBM0MsRUFBRSxHQUFFLEdBQUcsRUFBRSxHQUFLLEdBQUUsV0FBVyxPQUFPLEVBQUUsR0FBRyxFQUFFLEVBQU0sRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLE9BQU8sRUFBRSxHQUFFLEtBQUssR0FBRyxPQUFRLElBQUcsSUFBSSxFQUFFLEVBQUUsR0FBRSxLQUFLLEdBQUcsS0FBSyxFQUFFLEtBQUssRUFBRSxVQUFXLElBQUcsSUFBSSxFQUFFLEVBQUUsR0FBRSxLQUFLLEdBQUcsS0FBSyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsVUFBVyxJQUFHLElBQUksRUFBRSxHQUFHLEdBQUUsS0FBSyxHQUFHLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLGNBQWMsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEFBQUUsR0FBRixFQUFJLEVBQUUsU0FBUyxFQUFFLEdBQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEFBQUUsR0FBRixFQUFJLEVBQUUsU0FBUyxHQUFNLEVBQUUsTUFBTSxJQUFJLEtBQUssRUFBRSxFQUFFLEdBQUcsY0FBYyxLQUFNLE9BQU0sa0JBQWtCLElBQUssTUFBTyxNQUFLLEtBQy9iLEdBQUksSUFBRSxDQUFDLEdBQUcsR0FBRyxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLElBQUksR0FBRSxFQUFFLEdBQUksYUFBWSxJQUFHLEdBQUUsR0FBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEtBQUssR0FBRSxFQUFFLEdBQUksYUFBWSxJQUFHLEdBQUUsR0FBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsR0FBRSxFQUFFLEdBQUksWUFBVyxJQUFHLEdBQUUsR0FBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLE1BQU0sTUFBTSxPQUFPLEdBQUcsRUFBRSxHQUFJLGFBQVksSUFBRyxHQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUNsZixHQUFHLElBQUksR0FBRSxFQUFFLEdBQUksWUFBVyxJQUFJLEdBQUcsR0FBRSxHQUFLLEdBQUUsV0FBVyxPQUFPLEtBQUssR0FBRSxHQUFHLEdBQUUsRUFBRSxJQUFJLEdBQUcsR0FBRSxPQUFPLEdBQUUsR0FBRyxFQUFFLEdBQUUsR0FBRSxJQUFHLEtBQUssR0FBRSxFQUFFLEtBQUssR0FBRSxFQUFFLEtBQUssR0FBRSxFQUFFLEVBQUUsR0FBSSxJQUFHLEdBQUUsSUFBRyxHQUFFLEdBQUssR0FBRSxXQUFXLE9BQU8sSUFBSSxHQUFFLEdBQUcsR0FBRSxFQUFFLElBQUksR0FBRyxHQUFFLE9BQU8sR0FBRSxHQUFHLEVBQUUsR0FBRSxHQUFFLElBQUcsRUFBRSxHQUFJLElBQUcsR0FBRSxJQUFHLFlBQVcsRUFBRSxFQUFFLENBQUMsT0FBUSxHQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsR0FBRyxDQUFDLEdBQUcsR0FBRyxFQUFFLEtBQU0sT0FBTSwwQkFBMEIsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsU0FBRSxFQUFHLElBQUcsR0FBRyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBUyxFQUN4WixZQUFXLEVBQUUsRUFBRSxDQUFDLE9BQVEsR0FBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsR0FBRyxDQUFFLElBQUcsSUFBSSxHQUFHLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBMkIsR0FBekIsRUFBRSxFQUFFLEVBQUcsSUFBRyxHQUFHLEdBQUcsRUFBRSxJQUFJLEdBQU0sRUFBRSxFQUFFLEtBQU0sT0FBTSx3QkFBd0IsR0FBRyxTQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQVMsRUFBRSxNQUN4TixHQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsRUFBRSxDQUFDLEdBQUksR0FBRSxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsT0FBUSxHQUFFLEVBQUUsT0FBTyxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsQUFBTyxHQUFFLEdBQUUsS0FBSyxNQUFoQixLQUFxQixHQUFHLElBQUksRUFBRSxHQUFHLEdBQUksTUFBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLElBQUksRUFBRSxLQUFLLEdBQUcsRUFBRSxLQUFLLE1BQW1JLEtBQTVILEVBQUUsRUFBRSxJQUFJLEVBQUUsR0FBRSxHQUFHLEVBQUUsR0FBRSxJQUFLLElBQUcsR0FBRSxLQUFLLEdBQUUsS0FBSyxFQUFFLEdBQUUsS0FBSyxHQUFHLEVBQUUsR0FBRyxHQUFHLEVBQUUsR0FBRSxJQUFLLElBQUcsR0FBRSxLQUFLLEdBQUUsS0FBSyxHQUFHLEdBQUksTUFBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLElBQUksRUFBRSxLQUFLLEdBQVEsS0FBSyxFQUFFLEdBQUcsRUFBRSxJQUFJLEdBQUcsS0FBSyxHQUFHLEtBQUssR0FBRyxLQUFLLEdBQUcsRUFBRSxLQUFLLElBQUksS0FBSyxFQUFFLEdBQ3pXLEdBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxFQUFFLENBQUMsR0FBSSxHQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxPQUFRLEdBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsQUFBTyxHQUFFLEdBQUUsS0FBSyxNQUFoQixLQUFxQixHQUFHLElBQUksRUFBRSxHQUFHLEdBQUksR0FBRSxLQUFLLElBQUksRUFBRSxFQUFFLFFBQVEsRUFBRSxLQUFLLE1BQTZILEtBQXRILEVBQUUsRUFBRSxJQUFJLEVBQUUsR0FBRSxHQUFHLEVBQUUsR0FBRSxJQUFLLElBQUcsR0FBRSxLQUFLLEdBQUUsS0FBSyxFQUFFLEdBQUUsS0FBSyxHQUFHLEVBQUUsR0FBRyxHQUFHLEVBQUUsR0FBRSxJQUFLLElBQUcsR0FBRSxLQUFLLEdBQUUsS0FBSyxFQUFFLEVBQUUsR0FBSSxHQUFFLEtBQUssSUFBSSxFQUFFLEVBQUUsUUFBYSxLQUFLLEVBQUUsR0FBRyxFQUFFLElBQUksR0FBRyxLQUFLLEdBQUcsS0FBSyxHQUFHLEtBQUssR0FBRyxFQUFFLEtBQUssSUFBSSxLQUFLLEVBQUUsR0FDeFYsR0FBRSxVQUFVLEVBQUUsVUFBVSxDQUFDLEdBQUksR0FBRSxHQUFLLEdBQUUsV0FBVyxPQUFPLEtBQUssRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxFQUFFLElBQUksRUFBRSxTQUFTLE1BQU0sRUFBRSxhQUFrQixLQUFKLEVBQUUsRUFBTSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsT0FBdUMsR0FBaEMsS0FBSyxFQUFFLEtBQUssR0FBRyxLQUFLLEdBQUcsRUFBRSxPQUFVLEVBQUUsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLEVBQUUsWUFBYSxLQUFJLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsR0FBRyxZQUFLLEVBQUUsTUFBYSxHQUNwVCxHQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsQ0FBQyxHQUFJLEdBQUUsRUFBRSxLQUFLLE1BQU0sT0FBTyxLQUFLLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsS0FBSyxNQUFNLEVBQUUsS0FBSyxFQUFFLFVBQUksQ0FBVyxNQUFPLEdBQUUsR0FBcEIsVUFBd0IsR0FBRSxFQUFFLEdBQUcsQUFBVyxNQUFPLEdBQUUsR0FBcEIsVUFBd0IsSUFBRyxFQUFFLElBQUksRUFBRSxFQUFHLEdBQUcsR0FBRSxPQUFPLEtBQUssR0FBRyxLQUFLLEVBQUUsR0FBRyxFQUFFLElBQUssR0FBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxFQUFFLFFBQVEsR0FBRyxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUcsR0FBRSxHQUFJLFlBQVcsR0FBRyxFQUFFLElBQUksSUFBSSxFQUFFLEVBQVMsS0FBSyxFQUFFLEdBQ3JULEdBQUUsVUFBVSxFQUFFLFVBQVUsQ0FBQyxHQUFJLEdBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsR0FBSyxHQUFFLFdBQVcsT0FBTyxLQUFLLEVBQUcsTUFBSyxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLEFBQUksRUFBRSxTQUFOLEVBQWEsTUFBTyxHQUFFLEtBQUssRUFBRSxTQUFTLE1BQU0sS0FBSyxHQUFHLEtBQUssRUFBRSxNQUFNLE1BQU0sS0FBSyxHQUFPLElBQUosRUFBRSxFQUFNLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQWMsSUFBWCxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQU0sRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxHQUFXLElBQVIsRUFBRSxNQUFVLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxZQUFLLEVBQUUsR0FBVSxLQUFLLE9BQU8sR0FDalYsR0FBRSxVQUFVLEVBQUUsVUFBVSxDQUFDLEdBQUksR0FBRSxFQUFFLEtBQUssRUFBRSxTQUFFLEtBQUssRUFBRyxHQUFFLEdBQUksWUFBVyxHQUFHLEVBQUUsSUFBSSxLQUFLLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEdBQUksTUFBSyxFQUFFLE9BQU8sR0FBSSxNQUFLLEVBQUUsT0FBTyxHQUFHLEVBQUUsS0FBSyxHQUFVLEtBQUssT0FBTyxHQUFHLFlBQVcsRUFBRSxFQUFFLENBQUMsR0FBSSxHQUFFLEVBQXdILE9BQXRILEtBQUssTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFLLElBQUcsQ0FBRSxHQUFFLE1BQUksR0FBRSxPQUFRLE1BQUssRUFBRSxFQUFFLE9BQU8sRUFBRSxRQUFTLE1BQUssRUFBRSxFQUFFLFNBQVEsRUFBRSxFQUFFLEtBQUssS0FBSyxFQUFFLEVBQUUsS0FBSyxLQUFZLEVBQUUs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
