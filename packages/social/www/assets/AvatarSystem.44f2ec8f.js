import{Q as b,V as w,G as s}from"./three.module.493739a3.js";import{c as D,g as r,a as y,r as A,d as g,A as l,u as G,h as C,E as T}from"./avatarFunctions.6d66cf01.js";import{R as h,k as X,X as m,O as R,m as E,N as v,C as M,A as V,V as k}from"./[projectId].a008d20c.js";import{T as q}from"./SystemUpdateType.772fc25d.js";import{t as F}from"./teleportRigidbody.0bf2d2c0.js";import{X as f}from"./XRHandsInputComponent.3d76e9a2.js";import{i as L}from"./addControllerModels.14512c2e.js";import"./index.7b02be28.js";import"./vendor.475cb2ff.js";import"./_app.f0a72417.js";import"./AuthService.e8999ddc.js";import"./AlertService.5d8abaff.js";import"./feathers.32f4d4e8.js";import"./index.81138b53.js";import"./upload.bd537b46.js";const x=D("TriggerDetectedComponent"),O=i=>{const a=r(i,h),e=a.hits[0]?.body?.userData?.entity;if(e&&typeof e!="undefined"){let t=r(e,X);if(t&&!t.active){t.active=!0,console.log("trigger active"),y(e,x,{});const p=setInterval(()=>{t.active&&a.hits[0]?.body.userData.entity!==e&&(console.log("removing trigger"),t.active=!1,A(e,x),clearInterval(p))},100)}}};function U(i){const a=G();E(i).when(v.setXRMode.matchesFromAny,e=>{if(e.$from!==a.hostId&&e.$from!==e.userId)return;const t=a.getUserAvatarEntity(e.userId);!t||(e.enabled?C(t,m)||y(t,m,{controllerLeft:new s,controllerRight:new s,controllerGripLeft:new s,controllerGripRight:new s,container:new s,head:new s}):C(t,m)&&A(t,m))}).when(v.xrHandsConnected.matchesFromAny,e=>{if(e.userId===T.userId)return;const t=a.getUserAvatarEntity(e.userId);if(!t)return;C(t,f)||y(t,f,{hands:[new s,new s]}),r(t,f).hands.forEach((n,o)=>{L(n,o===0?"left":"right")})}).when(v.teleportObject.matches,e=>{const[t,p,n,o,d,c,H]=e.pose,u=a.getNetworkObject(e.networkId),j=r(u,M);if(j){F(j.body,new w(t,p,n),new b(o,d,c,H));return}const I=r(u,V);if(I){const S=r(u,k),Q=r(u,l);I.controller.setPosition({x:t,y:p+Q.avatarHalfHeight,z:n}),S.velocity.setScalar(0)}})}async function rt(i){i.receptors.add(U);const a=new b().setFromAxisAngle(new w(0,1,0),Math.PI),e=g([l,h]),t=g([l,m]),p=g([l,f]);return()=>{for(const n of t.enter(i)){const o=r(n,m),d=r(n,R);o.container.add(o.controllerLeft,o.controllerGripLeft,o.controllerRight,o.controllerGripRight),o.container.applyQuaternion(a),d.value.add(o.container,o.head)}for(const n of p.enter(i)){const o=r(n,f),d=r(n,R),c=new s;c.add(...o.hands),c.applyQuaternion(a),d.value.add(c)}for(const n of e(i)){const o=r(n,h),d=r(n,q),c=r(n,l);o.origin.copy(d.position).y+=c.avatarHalfHeight,c.isGrounded=Boolean(o.hits.length>0),O(n)}}}export{rt as default};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXZhdGFyU3lzdGVtLjQ0ZjJlYzhmLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9lbmdpbmUvc3JjL3NjZW5lL2NvbXBvbmVudHMvVHJpZ2dlckRldGVjdGVkQ29tcG9uZW50LnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hdmF0YXIvZnVuY3Rpb25zL2RldGVjdFVzZXJJblRyaWdnZXIudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2F2YXRhci9BdmF0YXJTeXN0ZW0udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlTWFwcGVkQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vZWNzL2Z1bmN0aW9ucy9Db21wb25lbnRGdW5jdGlvbnMnXG5cbmV4cG9ydCB0eXBlIFRyaWdnZXJEZXRlY3RlZENvbXBvbmVudFR5cGUgPSB7fVxuXG5leHBvcnQgY29uc3QgVHJpZ2dlckRldGVjdGVkQ29tcG9uZW50ID0gY3JlYXRlTWFwcGVkQ29tcG9uZW50PFRyaWdnZXJEZXRlY3RlZENvbXBvbmVudFR5cGU+KCdUcmlnZ2VyRGV0ZWN0ZWRDb21wb25lbnQnKVxuIiwiaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnLi4vLi4vZWNzL2NsYXNzZXMvRW50aXR5J1xuaW1wb3J0IHsgZ2V0Q29tcG9uZW50LCBhZGRDb21wb25lbnQsIHJlbW92ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL2Vjcy9mdW5jdGlvbnMvQ29tcG9uZW50RnVuY3Rpb25zJ1xuaW1wb3J0IHsgVHJpZ2dlclZvbHVtZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3NjZW5lL2NvbXBvbmVudHMvVHJpZ2dlclZvbHVtZUNvbXBvbmVudCdcbmltcG9ydCB7IFRyaWdnZXJEZXRlY3RlZENvbXBvbmVudCB9IGZyb20gJy4uLy4uL3NjZW5lL2NvbXBvbmVudHMvVHJpZ2dlckRldGVjdGVkQ29tcG9uZW50J1xuaW1wb3J0IHsgUmF5Y2FzdENvbXBvbmVudCB9IGZyb20gJy4uLy4uL3BoeXNpY3MvY29tcG9uZW50cy9SYXljYXN0Q29tcG9uZW50J1xuXG5leHBvcnQgY29uc3QgZGV0ZWN0VXNlckluVHJpZ2dlciA9IChlbnRpdHk6IEVudGl0eSk6IHZvaWQgPT4ge1xuICAvLyBjb25zdCByYXljYXN0Q29tcG9uZW50ID0gZ2V0Q29tcG9uZW50KGVudGl0eSwgUmF5Y2FzdENvbXBvbmVudClcbiAgLy8gaWYgKCFyYXljYXN0Q29tcG9uZW50Py5yYXljYXN0UXVlcnk/LmhpdHNbMF0/LmJvZHk/LnVzZXJEYXRhPy5lbnRpdHkpIHJldHVyblxuXG4gIGNvbnN0IHJheWNhc3RDb21wb25lbnQgPSBnZXRDb21wb25lbnQoZW50aXR5LCBSYXljYXN0Q29tcG9uZW50KVxuICBjb25zdCB0cmlnZ2VyRW50aXR5ID0gcmF5Y2FzdENvbXBvbmVudC5oaXRzWzBdPy5ib2R5Py51c2VyRGF0YT8uZW50aXR5XG4gIGlmICh0cmlnZ2VyRW50aXR5KSB7XG4gICAgaWYgKHR5cGVvZiB0cmlnZ2VyRW50aXR5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgbGV0IHRyaWdnZXJDb21wb25lbnQgPSBnZXRDb21wb25lbnQodHJpZ2dlckVudGl0eSwgVHJpZ2dlclZvbHVtZUNvbXBvbmVudClcbiAgICAgIGlmICh0cmlnZ2VyQ29tcG9uZW50KSB7XG4gICAgICAgIGlmICghdHJpZ2dlckNvbXBvbmVudC5hY3RpdmUpIHtcbiAgICAgICAgICB0cmlnZ2VyQ29tcG9uZW50LmFjdGl2ZSA9IHRydWVcbiAgICAgICAgICBjb25zb2xlLmxvZygndHJpZ2dlciBhY3RpdmUnKVxuICAgICAgICAgIGFkZENvbXBvbmVudCh0cmlnZ2VyRW50aXR5LCBUcmlnZ2VyRGV0ZWN0ZWRDb21wb25lbnQsIHt9KVxuICAgICAgICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRyaWdnZXJDb21wb25lbnQuYWN0aXZlICYmIHJheWNhc3RDb21wb25lbnQuaGl0c1swXT8uYm9keSEudXNlckRhdGEuZW50aXR5ICE9PSB0cmlnZ2VyRW50aXR5KSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZW1vdmluZyB0cmlnZ2VyJylcbiAgICAgICAgICAgICAgdHJpZ2dlckNvbXBvbmVudC5hY3RpdmUgPSBmYWxzZVxuICAgICAgICAgICAgICByZW1vdmVDb21wb25lbnQodHJpZ2dlckVudGl0eSwgVHJpZ2dlckRldGVjdGVkQ29tcG9uZW50KVxuICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDEwMClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgR3JvdXAsIFF1YXRlcm5pb24sIFZlY3RvcjMgfSBmcm9tICd0aHJlZSdcbmltcG9ydCB7XG4gIGFkZENvbXBvbmVudCxcbiAgZGVmaW5lUXVlcnksXG4gIGdldENvbXBvbmVudCxcbiAgaGFzQ29tcG9uZW50LFxuICByZW1vdmVDb21wb25lbnRcbn0gZnJvbSAnLi4vZWNzL2Z1bmN0aW9ucy9Db21wb25lbnRGdW5jdGlvbnMnXG5pbXBvcnQgeyBSYXljYXN0Q29tcG9uZW50IH0gZnJvbSAnLi4vcGh5c2ljcy9jb21wb25lbnRzL1JheWNhc3RDb21wb25lbnQnXG5pbXBvcnQgeyBPYmplY3QzRENvbXBvbmVudCB9IGZyb20gJy4uL3NjZW5lL2NvbXBvbmVudHMvT2JqZWN0M0RDb21wb25lbnQnXG5pbXBvcnQgeyBUcmFuc2Zvcm1Db21wb25lbnQgfSBmcm9tICcuLi90cmFuc2Zvcm0vY29tcG9uZW50cy9UcmFuc2Zvcm1Db21wb25lbnQnXG5pbXBvcnQgeyBBdmF0YXJDb21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvQXZhdGFyQ29tcG9uZW50J1xuaW1wb3J0IHsgQXZhdGFyQ29udHJvbGxlckNvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9BdmF0YXJDb250cm9sbGVyQ29tcG9uZW50J1xuaW1wb3J0IHsgWFJJbnB1dFNvdXJjZUNvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9YUklucHV0U291cmNlQ29tcG9uZW50J1xuaW1wb3J0IHsgTmV0d29ya1dvcmxkQWN0aW9uIH0gZnJvbSAnLi4vbmV0d29ya2luZy9mdW5jdGlvbnMvTmV0d29ya1dvcmxkQWN0aW9uJ1xuaW1wb3J0IHsgQ29sbGlkZXJDb21wb25lbnQgfSBmcm9tICcuLi9waHlzaWNzL2NvbXBvbmVudHMvQ29sbGlkZXJDb21wb25lbnQnXG5pbXBvcnQgeyBXb3JsZCB9IGZyb20gJy4uL2Vjcy9jbGFzc2VzL1dvcmxkJ1xuaW1wb3J0IHsgU3lzdGVtIH0gZnJvbSAnLi4vZWNzL2NsYXNzZXMvU3lzdGVtJ1xuaW1wb3J0IG1hdGNoZXMgZnJvbSAndHMtbWF0Y2hlcydcbmltcG9ydCB7IHVzZVdvcmxkIH0gZnJvbSAnLi4vZWNzL2Z1bmN0aW9ucy9TeXN0ZW1Ib29rcydcbmltcG9ydCB7IHRlbGVwb3J0UmlnaWRib2R5IH0gZnJvbSAnLi4vcGh5c2ljcy9mdW5jdGlvbnMvdGVsZXBvcnRSaWdpZGJvZHknXG5pbXBvcnQgeyBWZWxvY2l0eUNvbXBvbmVudCB9IGZyb20gJy4uL3BoeXNpY3MvY29tcG9uZW50cy9WZWxvY2l0eUNvbXBvbmVudCdcbmltcG9ydCB7IGRldGVjdFVzZXJJblRyaWdnZXIgfSBmcm9tICcuL2Z1bmN0aW9ucy9kZXRlY3RVc2VySW5UcmlnZ2VyJ1xuaW1wb3J0IHsgWFJIYW5kc0lucHV0Q29tcG9uZW50IH0gZnJvbSAnLi4veHIvY29tcG9uZW50cy9YUkhhbmRzSW5wdXRDb21wb25lbnQnXG5pbXBvcnQgeyBFbmdpbmUgfSBmcm9tICcuLi9lY3MvY2xhc3Nlcy9FbmdpbmUnXG5pbXBvcnQgeyBpbml0aWFsaXplSGFuZE1vZGVsIH0gZnJvbSAnLi4veHIvZnVuY3Rpb25zL2FkZENvbnRyb2xsZXJNb2RlbHMnXG5cbmZ1bmN0aW9uIGF2YXRhckFjdGlvblJlY2VwdG9yKGFjdGlvbikge1xuICBjb25zdCB3b3JsZCA9IHVzZVdvcmxkKClcblxuICBtYXRjaGVzKGFjdGlvbilcbiAgICAud2hlbihOZXR3b3JrV29ybGRBY3Rpb24uc2V0WFJNb2RlLm1hdGNoZXNGcm9tQW55LCAoYSkgPT4ge1xuICAgICAgaWYgKGEuJGZyb20gIT09IHdvcmxkLmhvc3RJZCAmJiBhLiRmcm9tICE9PSBhLnVzZXJJZCkgcmV0dXJuXG4gICAgICBjb25zdCBlbnRpdHkgPSB3b3JsZC5nZXRVc2VyQXZhdGFyRW50aXR5KGEudXNlcklkKVxuICAgICAgaWYgKCFlbnRpdHkpIHJldHVyblxuXG4gICAgICBpZiAoYS5lbmFibGVkKSB7XG4gICAgICAgIGlmICghaGFzQ29tcG9uZW50KGVudGl0eSwgWFJJbnB1dFNvdXJjZUNvbXBvbmVudCkpIHtcbiAgICAgICAgICBhZGRDb21wb25lbnQoZW50aXR5LCBYUklucHV0U291cmNlQ29tcG9uZW50LCB7XG4gICAgICAgICAgICBjb250cm9sbGVyTGVmdDogbmV3IEdyb3VwKCksXG4gICAgICAgICAgICBjb250cm9sbGVyUmlnaHQ6IG5ldyBHcm91cCgpLFxuICAgICAgICAgICAgY29udHJvbGxlckdyaXBMZWZ0OiBuZXcgR3JvdXAoKSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJHcmlwUmlnaHQ6IG5ldyBHcm91cCgpLFxuICAgICAgICAgICAgY29udGFpbmVyOiBuZXcgR3JvdXAoKSxcbiAgICAgICAgICAgIGhlYWQ6IG5ldyBHcm91cCgpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGhhc0NvbXBvbmVudChlbnRpdHksIFhSSW5wdXRTb3VyY2VDb21wb25lbnQpKSB7XG4gICAgICAgICAgcmVtb3ZlQ29tcG9uZW50KGVudGl0eSwgWFJJbnB1dFNvdXJjZUNvbXBvbmVudClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAud2hlbihOZXR3b3JrV29ybGRBY3Rpb24ueHJIYW5kc0Nvbm5lY3RlZC5tYXRjaGVzRnJvbUFueSwgKGEpID0+IHtcbiAgICAgIGlmIChhLnVzZXJJZCA9PT0gRW5naW5lLnVzZXJJZCkgcmV0dXJuXG4gICAgICBjb25zdCBlbnRpdHkgPSB3b3JsZC5nZXRVc2VyQXZhdGFyRW50aXR5KGEudXNlcklkKVxuICAgICAgaWYgKCFlbnRpdHkpIHJldHVyblxuXG4gICAgICBpZiAoIWhhc0NvbXBvbmVudChlbnRpdHksIFhSSGFuZHNJbnB1dENvbXBvbmVudCkpIHtcbiAgICAgICAgYWRkQ29tcG9uZW50KGVudGl0eSwgWFJIYW5kc0lucHV0Q29tcG9uZW50LCB7XG4gICAgICAgICAgaGFuZHM6IFtuZXcgR3JvdXAoKSwgbmV3IEdyb3VwKCldXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHhySW5wdXRTb3VyY2UgPSBnZXRDb21wb25lbnQoZW50aXR5LCBYUkhhbmRzSW5wdXRDb21wb25lbnQpXG5cbiAgICAgIHhySW5wdXRTb3VyY2UuaGFuZHMuZm9yRWFjaCgoY29udHJvbGxlcjogYW55LCBpOiBudW1iZXIpID0+IHtcbiAgICAgICAgaW5pdGlhbGl6ZUhhbmRNb2RlbChjb250cm9sbGVyLCBpID09PSAwID8gJ2xlZnQnIDogJ3JpZ2h0JylcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIC53aGVuKE5ldHdvcmtXb3JsZEFjdGlvbi50ZWxlcG9ydE9iamVjdC5tYXRjaGVzLCAoYSkgPT4ge1xuICAgICAgY29uc3QgW3gsIHksIHosIHFYLCBxWSwgcVosIHFXXSA9IGEucG9zZVxuXG4gICAgICBjb25zdCBlbnRpdHkgPSB3b3JsZC5nZXROZXR3b3JrT2JqZWN0KGEubmV0d29ya0lkKVxuXG4gICAgICBjb25zdCBjb2xsaWRlckNvbXBvbmVudCA9IGdldENvbXBvbmVudChlbnRpdHksIENvbGxpZGVyQ29tcG9uZW50KVxuICAgICAgaWYgKGNvbGxpZGVyQ29tcG9uZW50KSB7XG4gICAgICAgIHRlbGVwb3J0UmlnaWRib2R5KGNvbGxpZGVyQ29tcG9uZW50LmJvZHksIG5ldyBWZWN0b3IzKHgsIHksIHopLCBuZXcgUXVhdGVybmlvbihxWCwgcVksIHFaLCBxVykpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb250cm9sbGVyQ29tcG9uZW50ID0gZ2V0Q29tcG9uZW50KGVudGl0eSwgQXZhdGFyQ29udHJvbGxlckNvbXBvbmVudClcbiAgICAgIGlmIChjb250cm9sbGVyQ29tcG9uZW50KSB7XG4gICAgICAgIGNvbnN0IHZlbG9jaXR5ID0gZ2V0Q29tcG9uZW50KGVudGl0eSwgVmVsb2NpdHlDb21wb25lbnQpXG4gICAgICAgIGNvbnN0IGF2YXRhciA9IGdldENvbXBvbmVudChlbnRpdHksIEF2YXRhckNvbXBvbmVudClcbiAgICAgICAgY29udHJvbGxlckNvbXBvbmVudC5jb250cm9sbGVyLnNldFBvc2l0aW9uKHsgeCwgeTogeSArIGF2YXRhci5hdmF0YXJIYWxmSGVpZ2h0LCB6IH0pXG4gICAgICAgIHZlbG9jaXR5LnZlbG9jaXR5LnNldFNjYWxhcigwKVxuICAgICAgfVxuICAgIH0pXG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIEF2YXRhclN5c3RlbSh3b3JsZDogV29ybGQpOiBQcm9taXNlPFN5c3RlbT4ge1xuICB3b3JsZC5yZWNlcHRvcnMuYWRkKGF2YXRhckFjdGlvblJlY2VwdG9yKVxuXG4gIGNvbnN0IHJvdGF0ZTE4MG9uWSA9IG5ldyBRdWF0ZXJuaW9uKCkuc2V0RnJvbUF4aXNBbmdsZShuZXcgVmVjdG9yMygwLCAxLCAwKSwgTWF0aC5QSSlcblxuICBjb25zdCByYXljYXN0UXVlcnkgPSBkZWZpbmVRdWVyeShbQXZhdGFyQ29tcG9uZW50LCBSYXljYXN0Q29tcG9uZW50XSlcbiAgY29uc3QgeHJJbnB1dFF1ZXJ5ID0gZGVmaW5lUXVlcnkoW0F2YXRhckNvbXBvbmVudCwgWFJJbnB1dFNvdXJjZUNvbXBvbmVudF0pXG4gIGNvbnN0IHhySGFuZHNJbnB1dFF1ZXJ5ID0gZGVmaW5lUXVlcnkoW0F2YXRhckNvbXBvbmVudCwgWFJIYW5kc0lucHV0Q29tcG9uZW50XSlcblxuICByZXR1cm4gKCkgPT4ge1xuICAgIGZvciAoY29uc3QgZW50aXR5IG9mIHhySW5wdXRRdWVyeS5lbnRlcih3b3JsZCkpIHtcbiAgICAgIGNvbnN0IHhySW5wdXRTb3VyY2VDb21wb25lbnQgPSBnZXRDb21wb25lbnQoZW50aXR5LCBYUklucHV0U291cmNlQ29tcG9uZW50KVxuICAgICAgY29uc3Qgb2JqZWN0M0RDb21wb25lbnQgPSBnZXRDb21wb25lbnQoZW50aXR5LCBPYmplY3QzRENvbXBvbmVudClcblxuICAgICAgeHJJbnB1dFNvdXJjZUNvbXBvbmVudC5jb250YWluZXIuYWRkKFxuICAgICAgICB4cklucHV0U291cmNlQ29tcG9uZW50LmNvbnRyb2xsZXJMZWZ0LFxuICAgICAgICB4cklucHV0U291cmNlQ29tcG9uZW50LmNvbnRyb2xsZXJHcmlwTGVmdCxcbiAgICAgICAgeHJJbnB1dFNvdXJjZUNvbXBvbmVudC5jb250cm9sbGVyUmlnaHQsXG4gICAgICAgIHhySW5wdXRTb3VyY2VDb21wb25lbnQuY29udHJvbGxlckdyaXBSaWdodFxuICAgICAgKVxuXG4gICAgICB4cklucHV0U291cmNlQ29tcG9uZW50LmNvbnRhaW5lci5hcHBseVF1YXRlcm5pb24ocm90YXRlMTgwb25ZKVxuICAgICAgb2JqZWN0M0RDb21wb25lbnQudmFsdWUuYWRkKHhySW5wdXRTb3VyY2VDb21wb25lbnQuY29udGFpbmVyLCB4cklucHV0U291cmNlQ29tcG9uZW50LmhlYWQpXG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgeHJIYW5kc0lucHV0UXVlcnkuZW50ZXIod29ybGQpKSB7XG4gICAgICBjb25zdCB4ckhhbmRzQ29tcG9uZW50ID0gZ2V0Q29tcG9uZW50KGVudGl0eSwgWFJIYW5kc0lucHV0Q29tcG9uZW50KVxuICAgICAgY29uc3Qgb2JqZWN0M0RDb21wb25lbnQgPSBnZXRDb21wb25lbnQoZW50aXR5LCBPYmplY3QzRENvbXBvbmVudClcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IG5ldyBHcm91cCgpXG4gICAgICBjb250YWluZXIuYWRkKC4uLnhySGFuZHNDb21wb25lbnQuaGFuZHMpXG4gICAgICBjb250YWluZXIuYXBwbHlRdWF0ZXJuaW9uKHJvdGF0ZTE4MG9uWSlcbiAgICAgIG9iamVjdDNEQ29tcG9uZW50LnZhbHVlLmFkZChjb250YWluZXIpXG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBlbnRpdHkgb2YgcmF5Y2FzdFF1ZXJ5KHdvcmxkKSkge1xuICAgICAgY29uc3QgcmF5Y2FzdENvbXBvbmVudCA9IGdldENvbXBvbmVudChlbnRpdHksIFJheWNhc3RDb21wb25lbnQpXG4gICAgICBjb25zdCB0cmFuc2Zvcm0gPSBnZXRDb21wb25lbnQoZW50aXR5LCBUcmFuc2Zvcm1Db21wb25lbnQpXG4gICAgICBjb25zdCBhdmF0YXIgPSBnZXRDb21wb25lbnQoZW50aXR5LCBBdmF0YXJDb21wb25lbnQpXG4gICAgICByYXljYXN0Q29tcG9uZW50Lm9yaWdpbi5jb3B5KHRyYW5zZm9ybS5wb3NpdGlvbikueSArPSBhdmF0YXIuYXZhdGFySGFsZkhlaWdodFxuICAgICAgYXZhdGFyLmlzR3JvdW5kZWQgPSBCb29sZWFuKHJheWNhc3RDb21wb25lbnQuaGl0cy5sZW5ndGggPiAwKVxuXG4gICAgICBkZXRlY3RVc2VySW5UcmlnZ2VyKGVudGl0eSlcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoid3RCQUlhLEdBQTJCLEVBQW9ELDRCQ0UvRSxFQUFzQixBQUFDLEdBQXlCLE1BSXJELEdBQW1CLEVBQWEsRUFBUSxHQUN4QyxFQUFnQixFQUFpQixLQUFLLElBQUksTUFBTSxVQUFVLFVBQzVELEdBQ0UsTUFBTyxJQUFrQixZQUFhLElBQ3BDLEdBQW1CLEVBQWEsRUFBZSxNQUMvQyxHQUNFLENBQUMsRUFBaUIsT0FBUSxHQUNYLE9BQVMsV0FDbEIsSUFBSSxvQkFDQyxFQUFlLEVBQTBCLFNBQ2hELEdBQVcsWUFBWSxJQUFNLENBQzdCLEVBQWlCLFFBQVUsRUFBaUIsS0FBSyxJ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
