import{A as v}from"./AlertService.5d8abaff.js";import{k as L,r as re,A as l,l as et,m as tt,j as rt,n as ne,o as nt,S as Ae}from"./_app.f0a72417.js";import{c as d}from"./feathers.32f4d4e8.js";import{C as S,v as Se,a as at}from"./index.7b02be28.js";import{E as $,c as B,i as it,u as Pe,h as ae,a as ie,g as ot,s as Ie}from"./avatarFunctions.6d66cf01.js";class O{static fromArray(e,r=0){const n=new O(r);return n.fromArray(e,r===0),n}buffer=[];size;pos=0;copy(){const e=new O(this.getBufferLength());return e.buffer=this.buffer,e}clone(){const e=new O(this.getBufferLength());return e.buffer=this.buffer,e}constructor(e){if(e<0)throw new RangeError("The size does not allow negative values.");this.size=e}getSize(){return this.size}getPos(){return this.pos}getBufferLength(){return this.buffer.length}add(...e){e.forEach(r=>{this.buffer[this.pos]=r,this.pos=(this.pos+1)%this.size})}get(e){if(e<0&&(e+=this.buffer.length),!(e<0||e>this.buffer.length))return this.buffer.length<this.size?this.buffer[e]:this.buffer[(this.pos+e)%this.size]}getFirst(){return this.get(0)}getLast(){return this.get(-1)}remove(e,r=1){if(e<0&&(e+=this.buffer.length),e<0||e>this.buffer.length)return[];const n=this.toArray(),a=n.splice(e,r);return this.fromArray(n),a}pop(){return this.remove(0)[0]}popLast(){return this.remove(-1)[0]}toArray(){return this.buffer.slice(this.pos).concat(this.buffer.slice(0,this.pos))}fromArray(e,r=!1){if(!Array.isArray(e))throw new TypeError("Input value is not an array.");r&&this.resize(e.length),this.size!==0&&(this.buffer=e.slice(-this.size),this.pos=this.buffer.length%this.size)}clear(){this.buffer=[],this.pos=0}resize(e){if(e<0)throw new RangeError("The size does not allow negative values.");if(e===0)this.clear();else if(e!==this.size){const r=this.toArray();this.fromArray(r.slice(-e)),this.pos=this.buffer.length%e}this.size=e}full(){return this.buffer.length===this.size}empty(){return this.buffer.length===0}}class N{static instance=new N;isInitialized;packetCompression=!0;transport;transports=[];schema;dataProducers=new Map;dataConsumers=new Map;instanceSocketId;channelSocketId;accessToken;static _schemas=new Map;incomingMessageQueueUnreliableIDs=new O(100);incomingMessageQueueUnreliable=new O(100);incomingMessageQueueReliable=new O(100);mediasoupOperationQueue=new O(1e3);static availableNetworkId=0;static getNetworkId(){return++this.availableNetworkId}dispose(){this.transport&&typeof this.transport.close=="function"&&this.transport.close(),this.transport=null,N.instance=null}}var H;(function(t){t[t.Heartbeat=0]="Heartbeat",t[t.ClientConnected=1]="ClientConnected",t[t.ClientDisconnected=2]="ClientDisconnected",t[t.Initialization=3]="Initialization",t[t.JoinWorld=4]="JoinWorld",t[t.LeaveWorld=5]="LeaveWorld",t[t.WebRTCTransportCreate=6]="WebRTCTransportCreate",t[t.WebRTCTransportConnect=7]="WebRTCTransportConnect",t[t.WebRTCTransportClose=8]="WebRTCTransportClose",t[t.WebRTCSendTrack=9]="WebRTCSendTrack",t[t.WebRTCReceiveTrack=10]="WebRTCReceiveTrack",t[t.WebRTCPauseConsumer=11]="WebRTCPauseConsumer",t[t.WebRTCResumeConsumer=12]="WebRTCResumeConsumer",t[t.WebRTCCloseConsumer=13]="WebRTCCloseConsumer",t[t.WebRTCPauseProducer=14]="WebRTCPauseProducer",t[t.WebRTCResumeProducer=15]="WebRTCResumeProducer",t[t.WebRTCCloseProducer=16]="WebRTCCloseProducer",t[t.WebRTCMuteOtherProducer=17]="WebRTCMuteOtherProducer",t[t.WebRTCUnmuteOtherProducer=18]="WebRTCUnmuteOtherProducer",t[t.WebRTCConsumerSetLayers=19]="WebRTCConsumerSetLayers",t[t.WebRTCConsumeData=20]="WebRTCConsumeData",t[t.WebRTCProduceData=21]="WebRTCProduceData",t[t.ReliableMessage=22]="ReliableMessage",t[t.WebRTCCreateProducer=23]="WebRTCCreateProducer",t[t.Authorization=24]="Authorization",t[t.Kick=26]="Kick",t[t.Ban=27]="Ban",t[t.ConnectToWorld=28]="ConnectToWorld",t[t.WebRTCRequestCurrentProducers=29]="WebRTCRequestCurrentProducers",t[t.UpdateNetworkState=30]="UpdateNetworkState",t[t.InitializeRouter=31]="InitializeRouter",t[t.WebRTCRequestNearbyUsers=32]="WebRTCRequestNearbyUsers",t[t.ActionData=42]="ActionData",t[t.Synchronization=100]="Synchronization",t[t.ClientInput=101]="ClientInput",t[t.StateUpdate=102]="StateUpdate",t[t.Test=250]="Test",t[t.AvatarUpdated=254]="AvatarUpdated"})(H||(H={}));var oe={exports:{}},Le=function(e,r){return function(){for(var a=new Array(arguments.length),i=0;i<a.length;i++)a[i]=arguments[i];return e.apply(r,a)}},st=Le,D=Object.prototype.toString;function se(t){return D.call(t)==="[object Array]"}function ue(t){return typeof t=="undefined"}function ut(t){return t!==null&&!ue(t)&&t.constructor!==null&&!ue(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function lt(t){return D.call(t)==="[object ArrayBuffer]"}function ct(t){return typeof FormData!="undefined"&&t instanceof FormData}function dt(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function ft(t){return typeof t=="string"}function ht(t){return typeof t=="number"}function Oe(t){return t!==null&&typeof t=="object"}function V(t){if(D.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function mt(t){return D.call(t)==="[object Date]"}function pt(t){return D.call(t)==="[object File]"}function vt(t){return D.call(t)==="[object Blob]"}function ke(t){return D.call(t)==="[object Function]"}function yt(t){return Oe(t)&&ke(t.pipe)}function wt(t){return typeof URLSearchParams!="undefined"&&t instanceof URLSearchParams}function gt(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function bt(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function le(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),se(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.call(null,t[a],a,t)}function ce(){var t={};function e(a,i){V(t[i])&&V(a)?t[i]=ce(t[i],a):V(a)?t[i]=ce({},a):se(a)?t[i]=a.slice():t[i]=a}for(var r=0,n=arguments.length;r<n;r++)le(arguments[r],e);return t}function Ct(t,e,r){return le(e,function(a,i){r&&typeof a=="function"?t[i]=st(a,r):t[i]=a}),t}function Rt(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var C={isArray:se,isArrayBuffer:lt,isBuffer:ut,isFormData:ct,isArrayBufferView:dt,isString:ft,isNumber:ht,isObject:Oe,isPlainObject:V,isUndefined:ue,isDate:mt,isFile:pt,isBlob:vt,isFunction:ke,isStream:yt,isURLSearchParams:wt,isStandardBrowserEnv:bt,forEach:le,merge:ce,extend:Ct,trim:gt,stripBOM:Rt},T=C;function Ne(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var De=function(e,r,n){if(!r)return e;var a;if(n)a=n(r);else if(T.isURLSearchParams(r))a=r.toString();else{var i=[];T.forEach(r,function(c,h){c===null||typeof c=="undefined"||(T.isArray(c)?h=h+"[]":c=[c],T.forEach(c,function(f){T.isDate(f)?f=f.toISOString():T.isObject(f)&&(f=JSON.stringify(f)),i.push(Ne(h)+"="+Ne(f))}))}),a=i.join("&")}if(a){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e},Ut=C;function J(){this.handlers=[]}J.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};J.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};J.prototype.forEach=function(e){Ut.forEach(this.handlers,function(n){n!==null&&e(n)})};var Et=J,At=C,St=function(e,r){At.forEach(e,function(a,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(e[r]=a,delete e[i])})},xe=function(e,r,n,a,i){return e.config=r,n&&(e.code=n),e.request=a,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Pt=xe,$e=function(e,r,n,a,i){var o=new Error(e);return Pt(o,r,n,a,i)},It=$e,Lt=function(e,r,n){var a=n.config.validateStatus;!n.status||!a||a(n.status)?e(n):r(It("Request failed with status code "+n.status,n.config,null,n.request,n))},K=C,Ot=K.isStandardBrowserEnv()?function(){return{write:function(r,n,a,i,o,s){var c=[];c.push(r+"="+encodeURIComponent(n)),K.isNumber(a)&&c.push("expires="+new Date(a).toGMTString()),K.isString(i)&&c.push("path="+i),K.isString(o)&&c.push("domain="+o),s===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),kt=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},Nt=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},Dt=kt,xt=Nt,$t=function(e,r){return e&&!Dt(r)?xt(e,r):r},de=C,Tt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],_t=function(e){var r={},n,a,i;return e&&de.forEach(e.split(`
`),function(s){if(i=s.indexOf(":"),n=de.trim(s.substr(0,i)).toLowerCase(),a=de.trim(s.substr(i+1)),n){if(r[n]&&Tt.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([a]):r[n]=r[n]?r[n]+", "+a:a}}),r},Te=C,Wt=Te.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function a(i){var o=i;return e&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=a(window.location.href),function(o){var s=Te.isString(o)?a(o):o;return s.protocol===n.protocol&&s.host===n.host}}():function(){return function(){return!0}}();function fe(t){this.message=t}fe.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};fe.prototype.__CANCEL__=!0;var X=fe,Y=C,Bt=Lt,jt=Ot,qt=De,zt=$t,Ft=_t,Ht=Wt,he=$e,Vt=G,Jt=X,_e=function(e){return new Promise(function(n,a){var i=e.data,o=e.headers,s=e.responseType,c;function h(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}Y.isFormData(i)&&delete o["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var f=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(f+":"+m)}var p=zt(e.baseURL,e.url);u.open(e.method.toUpperCase(),qt(p,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function U(){if(!!u){var y="getAllResponseHeaders"in u?Ft(u.getAllResponseHeaders()):null,I=!s||s==="text"||s==="json"?u.responseText:u.response,A={data:I,status:u.status,statusText:u.statusText,headers:y,config:e,request:u};Bt(function(b){n(b),h()},function(b){a(b),h()},A),u=null}}if("onloadend"in u?u.onloadend=U:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(U)},u.onabort=function(){!u||(a(he("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){a(he("Network Error",e,null,u)),u=null},u.ontimeout=function(){var I=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",A=e.transitional||Vt.transitional;e.timeoutErrorMessage&&(I=e.timeoutErrorMessage),a(he(I,e,A.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",u)),u=null},Y.isStandardBrowserEnv()){var x=(e.withCredentials||Ht(p))&&e.xsrfCookieName?jt.read(e.xsrfCookieName):void 0;x&&(o[e.xsrfHeaderName]=x)}"setRequestHeader"in u&&Y.forEach(o,function(I,A){typeof i=="undefined"&&A.toLowerCase()==="content-type"?delete o[A]:u.setRequestHeader(A,I)}),Y.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),s&&s!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(c=function(y){!u||(a(!y||y&&y.type?new Jt("canceled"):y),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c))),i||(i=null),u.send(i)})},w=C,We=St,Kt=xe,Xt={"Content-Type":"application/x-www-form-urlencoded"};function Be(t,e){!w.isUndefined(t)&&w.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function Yt(){var t;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(t=_e),t}function Qt(t,e,r){if(w.isString(t))try{return(e||JSON.parse)(t),w.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Q={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Yt(),transformRequest:[function(e,r){return We(r,"Accept"),We(r,"Content-Type"),w.isFormData(e)||w.isArrayBuffer(e)||w.isBuffer(e)||w.isStream(e)||w.isFile(e)||w.isBlob(e)?e:w.isArrayBufferView(e)?e.buffer:w.isURLSearchParams(e)?(Be(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):w.isObject(e)||r&&r["Content-Type"]==="application/json"?(Be(r,"application/json"),Qt(e)):e}],transformResponse:[function(e){var r=this.transitional||Q.transitional,n=r&&r.silentJSONParsing,a=r&&r.forcedJSONParsing,i=!n&&this.responseType==="json";if(i||a&&w.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(i)throw o.name==="SyntaxError"?Kt(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};w.forEach(["delete","get","head"],function(e){Q.headers[e]={}});w.forEach(["post","put","patch"],function(e){Q.headers[e]=w.merge(Xt)});var G=Q,Gt=C,Zt=G,Mt=function(e,r,n){var a=this||Zt;return Gt.forEach(n,function(o){e=o.call(a,e,r)}),e},je=function(e){return!!(e&&e.__CANCEL__)},qe=C,me=Mt,er=je,tr=G,rr=X;function pe(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new rr("canceled")}var nr=function(e){pe(e),e.headers=e.headers||{},e.data=me.call(e,e.data,e.headers,e.transformRequest),e.headers=qe.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),qe.forEach(["delete","get","head","post","put","patch","common"],function(a){delete e.headers[a]});var r=e.adapter||tr.adapter;return r(e).then(function(a){return pe(e),a.data=me.call(e,a.data,a.headers,e.transformResponse),a},function(a){return er(a)||(pe(e),a&&a.response&&(a.response.data=me.call(e,a.response.data,a.response.headers,e.transformResponse))),Promise.reject(a)})},R=C,ze=function(e,r){r=r||{};var n={};function a(u,f){return R.isPlainObject(u)&&R.isPlainObject(f)?R.merge(u,f):R.isPlainObject(f)?R.merge({},f):R.isArray(f)?f.slice():f}function i(u){if(R.isUndefined(r[u])){if(!R.isUndefined(e[u]))return a(void 0,e[u])}else return a(e[u],r[u])}function o(u){if(!R.isUndefined(r[u]))return a(void 0,r[u])}function s(u){if(R.isUndefined(r[u])){if(!R.isUndefined(e[u]))return a(void 0,e[u])}else return a(void 0,r[u])}function c(u){if(u in r)return a(e[u],r[u]);if(u in e)return a(void 0,e[u])}var h={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return R.forEach(Object.keys(e).concat(Object.keys(r)),function(f){var m=h[f]||i,p=m(f);R.isUndefined(p)&&m!==c||(n[f]=p)}),n},Fe={version:"0.23.0"},ar=Fe.version,ve={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){ve[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var He={};ve.transitional=function(e,r,n){function a(i,o){return"[Axios v"+ar+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return function(i,o,s){if(e===!1)throw new Error(a(o," has been removed"+(r?" in "+r:"")));return r&&!He[o]&&(He[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,o,s):!0}};function ir(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),a=n.length;a-- >0;){var i=n[a],o=e[i];if(o){var s=t[i],c=s===void 0||o(s,i,t);if(c!==!0)throw new TypeError("option "+i+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+i)}}var or={assertOptions:ir,validators:ve},Ve=C,sr=De,Je=Et,Ke=nr,Z=ze,Xe=or,_=Xe.validators;function j(t){this.defaults=t,this.interceptors={request:new Je,response:new Je}}j.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Z(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&Xe.assertOptions(r,{silentJSONParsing:_.transitional(_.boolean),forcedJSONParsing:_.transitional(_.boolean),clarifyTimeoutError:_.transitional(_.boolean)},!1);var n=[],a=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(e)===!1||(a=a&&m.synchronous,n.unshift(m.fulfilled,m.rejected))});var i=[];this.interceptors.response.forEach(function(m){i.push(m.fulfilled,m.rejected)});var o;if(!a){var s=[Ke,void 0];for(Array.prototype.unshift.apply(s,n),s=s.concat(i),o=Promise.resolve(e);s.length;)o=o.then(s.shift(),s.shift());return o}for(var c=e;n.length;){var h=n.shift(),u=n.shift();try{c=h(c)}catch(f){u(f);break}}try{o=Ke(c)}catch(f){return Promise.reject(f)}for(;i.length;)o=o.then(i.shift(),i.shift());return o};j.prototype.getUri=function(e){return e=Z(this.defaults,e),sr(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Ve.forEach(["delete","get","head","options"],function(e){j.prototype[e]=function(r,n){return this.request(Z(n||{},{method:e,url:r,data:(n||{}).data}))}});Ve.forEach(["post","put","patch"],function(e){j.prototype[e]=function(r,n,a){return this.request(Z(a||{},{method:e,url:r,data:n}))}});var ur=j,lr=X;function W(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(a){e=a});var r=this;this.promise.then(function(n){if(!!r._listeners){var a,i=r._listeners.length;for(a=0;a<i;a++)r._listeners[a](n);r._listeners=null}}),this.promise.then=function(n){var a,i=new Promise(function(o){r.subscribe(o),a=o}).then(n);return i.cancel=function(){r.unsubscribe(a)},i},t(function(a){r.reason||(r.reason=new lr(a),e(r.reason))})}W.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};W.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};W.prototype.unsubscribe=function(e){if(!!this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};W.source=function(){var e,r=new W(function(a){e=a});return{token:r,cancel:e}};var cr=W,dr=function(e){return function(n){return e.apply(null,n)}},fr=function(e){return typeof e=="object"&&e.isAxiosError===!0},Ye=C,hr=Le,M=ur,mr=ze,pr=G;function Qe(t){var e=new M(t),r=hr(M.prototype.request,e);return Ye.extend(r,M.prototype,e),Ye.extend(r,e),r.create=function(a){return Qe(mr(t,a))},r}var P=Qe(pr);P.Axios=M;P.Cancel=X;P.CancelToken=cr;P.isCancel=je;P.VERSION=Fe.version;P.all=function(e){return Promise.all(e)};P.spread=dr;P.isAxiosError=fr;oe.exports=P;oe.exports.default=P;var q=oe.exports,z={};function vr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var yr=function(t,e,r,n){e=e||"&",r=r||"=";var a={};if(typeof t!="string"||t.length===0)return a;var i=/\+/g;t=t.split(e);var o=1e3;n&&typeof n.maxKeys=="number"&&(o=n.maxKeys);var s=t.length;o>0&&s>o&&(s=o);for(var c=0;c<s;++c){var h=t[c].replace(i,"%20"),u=h.indexOf(r),f,m,p,U;u>=0?(f=h.substr(0,u),m=h.substr(u+1)):(f=h,m=""),p=decodeURIComponent(f),U=decodeURIComponent(m),vr(a,p)?Array.isArray(a[p])?a[p].push(U):a[p]=[a[p],U]:a[p]=U}return a},F=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},wr=function(t,e,r,n){return e=e||"&",r=r||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(a){var i=encodeURIComponent(F(a))+r;return Array.isArray(t[a])?t[a].map(function(o){return i+encodeURIComponent(F(o))}).join(e):i+encodeURIComponent(F(t[a]))}).join(e):n?encodeURIComponent(F(n))+r+encodeURIComponent(F(t)):""};z.decode=z.parse=yr;z.encode=z.stringify=wr;var ee,gr=new Uint8Array(16);function br(){if(!ee&&(ee=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ee))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ee(gr)}var Cr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Rr(t){return typeof t=="string"&&Cr.test(t)}var g=[];for(var ye=0;ye<256;++ye)g.push((ye+256).toString(16).substr(1));function Ur(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(g[t[e+0]]+g[t[e+1]]+g[t[e+2]]+g[t[e+3]]+"-"+g[t[e+4]]+g[t[e+5]]+"-"+g[t[e+6]]+g[t[e+7]]+"-"+g[t[e+8]]+g[t[e+9]]+"-"+g[t[e+10]]+g[t[e+11]]+g[t[e+12]]+g[t[e+13]]+g[t[e+14]]+g[t[e+15]]).toLowerCase();if(!Rr(r))throw TypeError("Stringified UUID is invalid");return r}var Ge,we,ge=0,be=0;function Ce(t,e,r){var n=e&&r||0,a=e||new Array(16);t=t||{};var i=t.node||Ge,o=t.clockseq!==void 0?t.clockseq:we;if(i==null||o==null){var s=t.random||(t.rng||br)();i==null&&(i=Ge=[s[0]|1,s[1],s[2],s[3],s[4],s[5]]),o==null&&(o=we=(s[6]<<8|s[7])&16383)}var c=t.msecs!==void 0?t.msecs:Date.now(),h=t.nsecs!==void 0?t.nsecs:be+1,u=c-ge+(h-be)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||c>ge)&&t.nsecs===void 0&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ge=c,be=h,we=o,c+=122192928e5;var f=((c&268435455)*1e4+h)%4294967296;a[n++]=f>>>24&255,a[n++]=f>>>16&255,a[n++]=f>>>8&255,a[n++]=f&255;var m=c/4294967296*1e4&268435455;a[n++]=m>>>8&255,a[n++]=m&255,a[n++]=m>>>24&15|16,a[n++]=m>>>16&255,a[n++]=o>>>8|128,a[n++]=o&255;for(var p=0;p<6;++p)a[n+p]=i[p];return e||Ur(a)}const k={userPatched:t=>({type:"USER_PATCHED",user:t}),loadedUserRelationship:t=>({type:"LOADED_RELATIONSHIP",relationship:t}),loadedUsers:t=>({type:"ADMIN_LOADED_USERS",users:t}),changedRelation:()=>({type:"CHANGED_RELATION"}),loadedLayerUsers:t=>({type:"LOADED_LAYER_USERS",users:t}),clearLayerUsers:()=>({type:"CLEAR_LAYER_USERS"}),addedLayerUser:t=>({type:"ADDED_LAYER_USER",user:t}),removedLayerUser:t=>({type:"REMOVED_LAYER_USER",user:t}),loadedChannelLayerUsers:t=>({type:"LOADED_CHANNEL_LAYER_USERS",users:t}),clearChannelLayerUsers:()=>({type:"CLEAR_CHANNEL_LAYER_USERS"}),addedChannelLayerUser:t=>({type:"ADDED_CHANNEL_LAYER_USER",user:t}),removedChannelLayerUser:t=>({type:"REMOVED_CHANNEL_LAYER_USER",user:t}),displayUserToast:(t,e)=>({type:"USER_TOAST",message:{user:t,args:e}})};async function Er(t,e){for(let[r,n]of $.defaultWorld.clients)if(n.userId===t){n.name=e;return}}const Ze=B("WebCamInputComponent");function Ar(t){if(!it)return!1;const e=t.location.search;return new URLSearchParams(e).get("bot")!==null}const Me=B("ProximityComponent"),Tr=B("AfkCheckComponent"),Re=B("UserNameComponent"),_r=B("NetworkObjectComponent");function Sr(t){for(let[e,r]of $.defaultWorld.clients)if(r.userId==t)return Pe().getUserAvatarEntity(r.userId)}const E={doLoginAuto:(t,e)=>async r=>{try{const n=rt();let a=e!==!0&&n&&n.authUser?n.authUser.accessToken:void 0;if(t!==!0&&a==null)return;e===!0&&await d.authentication.reset(),t===!0&&(a==null||a.length===0)&&(a=(await d.service("identity-provider").create({type:"guest",token:Ce()})).accessToken),await d.authentication.setAccessToken(a);let i;try{i=await d.reAuthenticate()}catch(o){if(o.className==="not-found"||o.className==="not-authenticated"&&o.message==="jwt expired")await r(l.didLogout()),await d.authentication.reset(),a=(await d.service("identity-provider").create({type:"guest",token:Ce()})).accessToken,await d.authentication.setAccessToken(a),i=await d.reAuthenticate();else throw o}if(i){i["identity-provider"]?.id==null&&(await r(l.didLogout()),await d.authentication.reset(),a=(await d.service("identity-provider").create({type:"guest",token:Ce()})).accessToken,await d.authentication.setAccessToken(a),i=await d.reAuthenticate());const o=ne(i);r(l.loginUserSuccess(o)),await E.loadUserData(r,o.identityProvider.userId)}else console.log("****************")}catch(n){console.error(n),r(l.didLogout())}},loadUserData:(t,e)=>d.service("user").get(e).then(r=>r.user_setting==null?d.service("user-settings").find({query:{userId:e}}).then(n=>n.total===0?d.service("user-settings").create({userId:e}).then(a=>(r.user_setting=a,Promise.resolve(r))):(r.user_setting=n.data[0],Promise.resolve(r))):Promise.resolve(r)).then(r=>{const n=re(r);t(l.loadedUserData(n))}).catch(r=>{console.log(r),v.dispatchAlertError(t,"Failed to load user data")}),loginUserByPassword:t=>e=>{if(!Se(t.email)){v.dispatchAlertError(e,"Please input valid email address");return}e(l.actionProcessing(!0)),d.authenticate({strategy:"local",email:t.email,password:t.password}).then(r=>{const n=ne(r);if(!n.identityProvider.isVerified){d.logout(),e(l.registerUserByEmailSuccess(n.identityProvider)),window.location.href="/auth/confirm";return}e(l.loginUserSuccess(n)),E.loadUserData(e,n.identityProvider.userId).then(()=>window.location.href="/")}).catch(r=>{console.log(r),e(l.loginUserError("Failed to login")),v.dispatchAlertError(e,r.message)}).finally(()=>e(l.actionProcessing(!1)))},loginUserByXRWallet:t=>(e,r)=>{try{e(l.actionProcessing(!0));const n=Pr(t);console.log(n);const a=nt(n),i=L().user.id.value;a.id=i,Lr(a),e(l.loadedUserData(a))}catch(n){console.log(n),e(l.loginUserError("Failed to login")),v.dispatchAlertError(e,n.message)}finally{e(l.actionProcessing(!1))}},loginUserByOAuth:t=>e=>{e(l.actionProcessing(!0));const r=L().authUser.accessToken.value,n=window.location.pathname,a=z.parse(window.location.search.slice(1)),i={path:n};a.instanceId&&a.instanceId.length>0&&(i.instanceId=a.instanceId);let o=`${S.publicRuntimeConfig.apiServer}/oauth/${t}?feathers_token=${r}&redirect=${JSON.stringify(i)}`;window.location.href=o},loginUserByJwt:(t,e,r)=>async n=>{try{n(l.actionProcessing(!0)),await d.authentication.setAccessToken(t);const a=await d.authenticate({strategy:"jwt",accessToken:t}),i=ne(a);n(l.loginUserSuccess(i)),await E.loadUserData(n,i.identityProvider.userId),n(l.actionProcessing(!1)),window.location.href=e}catch(a){console.log(a),n(l.loginUserError("Failed to login")),v.dispatchAlertError(n,a.message),window.location.href=`${r}?error=${a.message}`,n(l.actionProcessing(!1))}},logoutUser:()=>t=>{t(l.actionProcessing(!0)),d.logout().then(()=>t(l.didLogout())).catch(()=>t(l.didLogout())).finally(()=>{t(l.actionProcessing(!1)),E.doLoginAuto(!0,!0)(t)})},registerUserByEmail:t=>(console.log("1 registerUserByEmail"),e=>{console.log("2 dispatch",e),e(l.actionProcessing(!0)),d.service("identity-provider").create({token:t.email,password:t.password,type:"password"}).then(r=>{console.log("3 ",r),e(l.registerUserByEmailSuccess(r)),window.location.href="/auth/confirm"}).catch(r=>{console.log("error",r),e(l.registerUserByEmailError(r.message)),v.dispatchAlertError(e,r.message)}).finally(()=>{console.log("4 finally",e),e(l.actionProcessing(!1))})}),verifyEmail:t=>e=>{e(l.actionProcessing(!0)),d.service("authManagement").create({action:"verifySignupLong",value:t}).then(r=>{e(l.didVerifyEmail(!0)),E.loginUserByJwt(r.accessToken,"/","/")(e)}).catch(r=>{console.log(r),e(l.didVerifyEmail(!1)),v.dispatchAlertError(e,r.message)}).finally(()=>e(l.actionProcessing(!1)))},resendVerificationEmail:t=>e=>{e(l.actionProcessing(!0)),d.service("authManagement").create({action:"resendVerifySignup",value:{token:t,type:"password"}}).then(()=>e(l.didResendVerificationEmail(!0))).catch(()=>e(l.didResendVerificationEmail(!1))).finally(()=>e(l.actionProcessing(!1)))},forgotPassword:t=>e=>{e(l.actionProcessing(!0)),console.log("forgotPassword",t),d.service("authManagement").create({action:"sendResetPwd",value:{token:t,type:"password"}}).then(()=>e(l.didForgotPassword(!0))).catch(()=>e(l.didForgotPassword(!1))).finally(()=>e(l.actionProcessing(!1)))},resetPassword:(t,e)=>r=>{r(l.actionProcessing(!0)),d.service("authManagement").create({action:"resetPwdLong",value:{token:t,password:e}}).then(n=>{console.log(n),r(l.didResetPassword(!0)),window.location.href="/"}).catch(n=>{console.log(n),r(l.didResetPassword(!1)),window.location.href="/"}).finally(()=>r(l.actionProcessing(!1)))},createMagicLink:(t,e)=>r=>{r(l.actionProcessing(!0));let n="email",a="email";const i=(S.publicRuntimeConfig.auth&&S.publicRuntimeConfig.auth.enableEmailMagicLink)??!0,o=(S.publicRuntimeConfig.auth&&S.publicRuntimeConfig.auth.enableSmsMagicLink)??!1;if(e==="email")n="email",a="email";else if(e==="sms")n="sms",a="mobile";else{const s=t.replace(/-/g,"");if(at(s)){if(!o){v.dispatchAlertError(r,"Please input valid email address");return}n="sms",a="mobile",t="+1"+s}else if(Se(t)){if(!i){v.dispatchAlertError(r,"Please input valid phone number");return}n="email"}else{v.dispatchAlertError(r,"Please input valid email or phone number");return}}d.service("magic-link").create({type:n,[a]:t}).then(s=>{console.log(s),r(l.didCreateMagicLink(!0)),v.dispatchAlertSuccess(r,"Login Magic Link was sent. Please check your Email or SMS.")}).catch(s=>{console.log(s),r(l.didCreateMagicLink(!1)),v.dispatchAlertError(r,s.message)}).finally(()=>r(l.actionProcessing(!1)))},addConnectionByPassword:(t,e)=>r=>{r(l.actionProcessing(!0)),d.service("identity-provider").create({token:t.email,password:t.password,type:"password",userId:e}).then(n=>{const a=n;return E.loadUserData(r,a.userId)}).catch(n=>{console.log(n),v.dispatchAlertError(r,n.message)}).finally(()=>r(l.actionProcessing(!1)))},addConnectionByEmail:(t,e)=>r=>{r(l.actionProcessing(!0)),d.service("magic-link").create({email:t,type:"email",userId:e}).then(n=>{const a=n;if(a.userId!=null)return E.loadUserData(r,a.userId)}).catch(n=>{console.log(n),v.dispatchAlertError(r,n.message)}).finally(()=>r(l.actionProcessing(!1)))},addConnectionBySms:(t,e)=>r=>{r(l.actionProcessing(!0));let n=t.replace(/-/g,"");n.length===10&&(n="1"+n),d.service("magic-link").create({mobile:n,type:"sms",userId:e}).then(a=>{const i=a;if(i.userId!=null)return E.loadUserData(r,i.userId)}).catch(a=>{console.log(a),v.dispatchAlertError(r,a.message)}).finally(()=>r(l.actionProcessing(!1)))},addConnectionByOauth:(t,e)=>()=>{window.open(`${S.publicRuntimeConfig.apiServer}/auth/oauth/${t}?userId=${e}`,"_blank")},removeConnection:(t,e)=>r=>{r(l.actionProcessing(!0)),d.service("identity-provider").remove(t).then(()=>E.loadUserData(r,e)).catch(n=>{console.log(n),v.dispatchAlertError(r,n.message)}).finally(()=>r(l.actionProcessing(!1)))},refreshConnections:t=>{},updateUserSettings:(t,e)=>async r=>{const n=await d.service("user-settings").patch(t,e);r(l.updatedUserSettingsAction(n))},uploadAvatar:t=>async(e,r)=>{const n=L().authUser.accessToken.value,a=L().user,i=await q.post(`${S.publicRuntimeConfig.apiServer}/upload`,t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+n}});await d.service("user").patch(a.id.value,{name:a.name.value});const o=i.data;v.dispatchAlertSuccess(e,"Avatar updated"),e(l.avatarUpdated(o))},uploadAvatarModel:(t,e,r,n)=>async(a,i)=>{const o=L().authUser.accessToken.value,s=r||t.name.substring(0,t.name.lastIndexOf(".")),[c,h]=await Promise.all([d.service("upload-presigned").get("",{query:{type:"avatar",fileName:s+".glb",fileSize:t.size,isPublicAvatar:n}}),d.service("upload-presigned").get("",{query:{type:"user-thumbnail",fileName:s+".png",fileSize:e.size,mimeType:e.type,isPublicAvatar:n}})]),u=new FormData;if(Object.keys(c.fields).forEach(m=>u.append(m,c.fields[m])),u.append("acl","public-read"),u.append(c.local?"media":"file",t),c.local){let m="avatars";c.fields.Key&&(m=c.fields.Key,m=m.substring(0,m.lastIndexOf("/"))),u.append("uploadPath",m),u.append("id",`${s}.glb`),u.append("skipStaticResource","true")}return console.log("modelData",u),(c.local===!0?q.post(`${S.publicRuntimeConfig.apiServer}/media`,u,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+o}}):q.post(c.url,u)).then(async m=>{const p=new FormData;if(Object.keys(h.fields).forEach(b=>p.append(b,h.fields[b])),p.append("acl","public-read"),p.append(h.local===!0?"media":"file",e),h.local){let b="avatars";h.fields.Key&&(b=h.fields.Key,b=b.substring(0,b.lastIndexOf("/"))),p.append("uploadPath",b),p.append("name",`${s}.png`),p.append("skipStaticResource","true")}const U=`https://${c.cacheDomain}/${c.fields.Key}`,x=`https://${h.cacheDomain}/${h.fields.Key}`,y=L().user,I=await d.service("static-resource").find({query:{name:s,staticResourceType:"avatar",userId:n?null:y.id.value}}),A=await d.service("static-resource").find({query:{name:s,staticResourceType:"user-thumbnail",userId:n?null:y.id.value}});await(h.local===!0?q.post(`${S.publicRuntimeConfig.apiServer}/media`,p,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+o}}):q.post(h.url,p)).then(b=>{Promise.all([I.total>0?d.service("static-resource").patch(I.data[0].id,{url:U,key:c.fields.Key}):d.service("static-resource").create({name:s,staticResourceType:"avatar",url:U,key:c.fields.Key,userId:n?null:y.id.value}),A.total>0?d.service("static-resource").patch(A.data[0].id,{url:x,key:h.fields.Key}):d.service("static-resource").create({name:s,staticResourceType:"user-thumbnail",url:x,mimeType:"image/png",key:h.fields.Key,userId:n?null:y.id.value})]).then(Ee=>{n!==!0&&(a(l.userAvatarIdUpdated(b)),d.service("user").patch(y.id.value,{avatarId:s}).then(Or=>{v.dispatchAlertSuccess(a,"Avatar Uploaded Successfully."),N?.instance?.transport&&N.instance.transport.sendNetworkStatUpdateMessage({type:H.AvatarUpdated,userId:y.id.value,avatarId:s,avatarURL:U,thumbnailURL:x})}))}).catch(Ee=>{console.error("Error occurred while saving Avatar.",Ee),d.service("upload-presigned").remove("",{query:{keys:[c.fields.Key,h.fields.Key]}})})}).catch(b=>{console.error("Error occurred while uploading thumbnail.",b),d.service("upload-presigned").remove("",{query:{keys:[c.fields.Key]}})})}).catch(m=>{console.error("Error occurred while uploading model.",m)})},removeAvatar:t=>async(e,r)=>{await d.service("upload-presigned").remove("",{query:{keys:t}}).then(n=>{v.dispatchAlertSuccess(e,"Avatar Removed Successfully."),E.fetchAvatarList()(e)})},fetchAvatarList:()=>{const t=L().user;return async e=>{const r=await d.service("static-resource").find({query:{$select:["id","key","name","url","staticResourceType","userId"],staticResourceType:{$in:["avatar","user-thumbnail"]},$or:[{userId:t.id.value},{userId:null}],$limit:1e3}});e(l.updateAvatarList(r.data))}},updateUsername:(t,e)=>r=>{d.service("user").patch(t,{name:e}).then(n=>{v.dispatchAlertSuccess(r,"Username updated"),r(l.usernameUpdated(n))})},updateUserAvatarId:(t,e,r,n)=>a=>{d.service("user").patch(t,{avatarId:e}).then(i=>{a(l.userAvatarIdUpdated(i)),N?.instance?.transport&&N.instance.transport.sendNetworkStatUpdateMessage({type:H.AvatarUpdated,userId:t,avatarId:e,avatarURL:r,thumbnailURL:n})})},removeUser:t=>async e=>{await d.service("user").remove(t),await d.service("identity-provider").remove(null,{where:{userId:t}}),E.logoutUser()(e)}},Pr=t=>({user:{id:"did:web:example.com",displayName:"alice",icon:"https://material-ui.com/static/images/avatar/1.jpg"}}),Ir=t=>d.service("static-resource").find({query:{name:t.avatarId,staticResourceType:{$in:["user-thumbnail","avatar"]},$or:[{userId:null},{userId:t.id}],$sort:{userId:-1},$limit:2}}),te=async t=>{if(t.instanceId==null&&t.channelInstanceId==null)return Promise.resolve(!0);const e=Pe();return new Promise(async r=>{const n=e?.clients?.get(t.id);if(!n){setTimeout(async()=>{await te(t),r(!0)},200);return}if(n?.avatarDetail?.avatarId===t.avatarId){r(!0);return}const a=await Ir(t);if(a?.data&&a.data.length===2){const i=a?.data[0].staticResourceType==="avatar"?a?.data[0].url:a?.data[1].url,o=a?.data[0].staticResourceType==="user-thumbnail"?a?.data[0].url:a?.data[1].url;n.avatarDetail={avatarURL:i,thumbnailURL:o,avatarId:t.avatarId};const c=$.defaultWorld.getUserAvatarEntity(t.id);Ie(c,t.avatarId,i)}else await te(t);r(!0)})},Lr=async t=>((!t||!t.id)&&Promise.resolve(!0),new Promise(async e=>{const r=$.defaultWorld.clients.get(t.id);if(!r){setTimeout(async()=>{await te(t),e(!0)},200);return}const n=t.avatarUrl,a=t.avatarUrl;r.avatarDetail={avatarURL:n,thumbnailURL:a,avatarId:t.avatarId};const o=$.defaultWorld.getUserAvatarEntity(t.id);Ie(o,t.avatarId,n),e(!0)}));S.publicRuntimeConfig.offlineMode||(d.service("user").on("patched",async t=>{const e=Ae.store,r=L().user,n=re(t.userRelationship);console.log("User patched",n),await te(n),Er(n.id,n.name);const a=Sr(n.id);if(console.log("adding username component to user: "+n.name+" eid: "+a),a!==void 0&&(ae(a,Re)?ot(a,Re).username=n.name:ie(a,Re,{username:n.name})),r.id.value===n.id){if(e.dispatch(k.clearLayerUsers()),r.channelInstanceId.value!==n.channelInstanceId&&e.dispatch(k.clearChannelLayerUsers()),e.dispatch(l.userUpdated(n)),n.partyId,n.instanceId!==r.instanceId.value){const o=new URL(window.location.href);let s=o.searchParams;s.set("instanceId",n?.instanceId||""),o.search=s.toString(),history.pushState&&window.history.replaceState({},"",o.toString())}const i=$.defaultWorld;typeof i.localClientEntity!="undefined"&&(!ae(i.localClientEntity,Me,i)&&Ar(window)&&ie(i.localClientEntity,Me,{usersInRange:[],usersInIntimateRange:[],usersInHarassmentRange:[],usersLookingTowards:[]},i),ae(i.localClientEntity,Ze,i)||ie(i.localClientEntity,Ze,{emotions:[]},i),console.log("added web cam input component to local client"))}else n.channelInstanceId!=null&&n.channelInstanceId===r.channelInstanceId.value&&e.dispatch(k.addedChannelLayerUser(n)),n.instanceId!=null&&n.instanceId===r.instanceId.value&&(e.dispatch(k.addedLayerUser(n)),e.dispatch(k.displayUserToast(n,{userAdded:!0}))),n.instanceId!==r.instanceId.value&&(e.dispatch(k.removedLayerUser(n)),e.dispatch(k.displayUserToast(n,{userRemoved:!0}))),n.channelInstanceId!==r.channelInstanceId.value&&e.dispatch(k.removedChannelLayerUser(n))}),d.service("location-ban").on("created",async t=>{const e=Ae.store;e.getState();const r=L().user,n=et().party.value,a=n&&n.partyUsers?n.partyUsers.find(s=>s.id===r.id.value):{},i=tt().currentLocation.location,o=t.locationBan;if(r.id.value===o.userId&&i.id.value===o.locationId){a!=null&&a?.id!=null&&await d.service("party-user").remove(a.id);const s=re(await d.service("user").get(r.id.value));e.dispatch(l.userUpdated(s))}}));export{E as A,H as M,N,_r as a,Tr as b};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXV0aFNlcnZpY2UuZTg5OTlkZGMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2VuZ2luZS9zcmMvY29tbW9uL2NsYXNzZXMvUmluZ0J1ZmZlci50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvbmV0d29ya2luZy9jbGFzc2VzL05ldHdvcmsudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL25ldHdvcmtpbmcvZW51bXMvTWVzc2FnZVR5cGVzLnRzIiwiLi4vLi4vLi4vY2xpZW50LWNvcmUvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2JpbmQuanMiLCIuLi8uLi8uLi9jbGllbnQtY29yZS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL3V0aWxzLmpzIiwiLi4vLi4vLi4vY2xpZW50LWNvcmUvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2J1aWxkVVJMLmpzIiwiLi4vLi4vLi4vY2xpZW50LWNvcmUvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0ludGVyY2VwdG9yTWFuYWdlci5qcyIsIi4uLy4uLy4uL2NsaWVudC1jb3JlL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9ub3JtYWxpemVIZWFkZXJOYW1lLmpzIiwiLi4vLi4vLi4vY2xpZW50LWNvcmUvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2VuaGFuY2VFcnJvci5qcyIsIi4uLy4uLy4uL2NsaWVudC1jb3JlL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9jcmVhdGVFcnJvci5qcyIsIi4uLy4uLy4uL2NsaWVudC1jb3JlL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9zZXR0bGUuanMiLCIuLi8uLi8uLi9jbGllbnQtY29yZS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvY29va2llcy5qcyIsIi4uLy4uLy4uL2NsaWVudC1jb3JlL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc0Fic29sdXRlVVJMLmpzIiwiLi4vLi4vLi4vY2xpZW50LWNvcmUvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2NvbWJpbmVVUkxzLmpzIiwiLi4vLi4vLi4vY2xpZW50LWNvcmUvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2J1aWxkRnVsbFBhdGguanMiLCIuLi8uLi8uLi9jbGllbnQtY29yZS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvcGFyc2VIZWFkZXJzLmpzIiwiLi4vLi4vLi4vY2xpZW50LWNvcmUvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpbi5qcyIsIi4uLy4uLy4uL2NsaWVudC1jb3JlL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY2FuY2VsL0NhbmNlbC5qcyIsIi4uLy4uLy4uL2NsaWVudC1jb3JlL25vZGVfbW9kdWxlcy9heGlvcy9saWIvYWRhcHRlcnMveGhyLmpzIiwiLi4vLi4vLi4vY2xpZW50LWNvcmUvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9kZWZhdWx0cy5qcyIsIi4uLy4uLy4uL2NsaWVudC1jb3JlL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS90cmFuc2Zvcm1EYXRhLmpzIiwiLi4vLi4vLi4vY2xpZW50LWNvcmUvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvaXNDYW5jZWwuanMiLCIuLi8uLi8uLi9jbGllbnQtY29yZS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvZGlzcGF0Y2hSZXF1ZXN0LmpzIiwiLi4vLi4vLi4vY2xpZW50LWNvcmUvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL21lcmdlQ29uZmlnLmpzIiwiLi4vLi4vLi4vY2xpZW50LWNvcmUvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9lbnYvZGF0YS5qcyIsIi4uLy4uLy4uL2NsaWVudC1jb3JlL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy92YWxpZGF0b3IuanMiLCIuLi8uLi8uLi9jbGllbnQtY29yZS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvQXhpb3MuanMiLCIuLi8uLi8uLi9jbGllbnQtY29yZS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9DYW5jZWxUb2tlbi5qcyIsIi4uLy4uLy4uL2NsaWVudC1jb3JlL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9zcHJlYWQuanMiLCIuLi8uLi8uLi9jbGllbnQtY29yZS9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNBeGlvc0Vycm9yLmpzIiwiLi4vLi4vLi4vY2xpZW50LWNvcmUvbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9heGlvcy5qcyIsIi4uLy4uLy4uL2NsaWVudC1jb3JlL25vZGVfbW9kdWxlcy9heGlvcy9pbmRleC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9xdWVyeXN0cmluZy9kZWNvZGUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmcvZW5jb2RlLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3F1ZXJ5c3RyaW5nL2luZGV4LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9ybmcuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3JlZ2V4LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92YWxpZGF0ZS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvc3RyaW5naWZ5LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92MS5qcyIsIi4uLy4uLy4uL2NsaWVudC1jb3JlL3NyYy91c2VyL3N0b3JlL1VzZXJBY3Rpb24udHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL25ldHdvcmtpbmcvdXRpbHMvY2hhdFN5c3RlbS50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvaW5wdXQvY29tcG9uZW50cy9XZWJDYW1JbnB1dENvbXBvbmVudC50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvY29tbW9uL2Z1bmN0aW9ucy9pc0JvdC50cyIsIi4uLy4uLy4uL2NsaWVudC1jb3JlL3NyYy9wcm94aW1pdHkvY29tcG9uZW50cy9Qcm94aW1pdHlDb21wb25lbnQudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL25hdmlnYXRpb24vY29tcG9uZW50L0Fma0NoZWNrQ29tcG9uZW50LnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9zY2VuZS9jb21wb25lbnRzL1VzZXJOYW1lQ29tcG9uZW50LnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9uZXR3b3JraW5nL2NvbXBvbmVudHMvTmV0d29ya09iamVjdENvbXBvbmVudC50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvbmV0d29ya2luZy91dGlscy9nZXRVc2VyLnRzIiwiLi4vLi4vLi4vY2xpZW50LWNvcmUvc3JjL3VzZXIvcmVkdWNlcnMvYXV0aC9BdXRoU2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJpbmcgYnVmZmVyIGhvbGRzIGRhdGEgaW4gY2lyY3VsYXIgZm9ybS5cXFxuICogRGF0YSB3aWxsIGJlIGluc2VydGVkIGluIGxpbmVhciBmYXNoaW9uIGFuZCB3aGVuIHRoZSBidWZmZXIgcmVhY2hlcyBpdHMgbWF4aW11bSBzaXplIHRoZW5cbiAqIG5ld2x5IGVudGVyZWQgZGF0YSB3aWxsIGJlIG92ZXJ3cml0ZSBmaXJzdCBlbGVtZW50KHMpLlxuICpcbiAqIGBgYFxuICogLy8gQmVsb3cgd2lsbCBjcmVhdGUgcmluZyBidWZmZXIgd2l0aCA0IGVsZW1lbnRzIGFuZCBzZXRzIHNpemUgb2YgdGhlIGJ1ZmZlciB0byA0LlxuICogY29uc3QgYnVmZmVyID0gUmluZ0J1ZmZlci5mcm9tQXJyYXkoWzEsIDIsIDMsIDRdKTtcbiAqXG4gKiAvLyBBZGRpbmcgbmV3IGVsZW1lbnRzIHdpbGwgb3ZlcndlaWdodCBlbGVtZW50KHMpIGluIEZJRk8gbWFubmVyLlxuICogYnVmZmVyLmFkZCg1LCA2KTsgLy8gbm93IGJ1ZmZlciBjb250YWlucyBbNSwgNiwgMywgNF1cbiAqIGBgYFxuICpcbiAqIEB0eXBlcGFyYW0gVCBUeXBlIG9mIHRoZSBkYXRhLlxuICovXG5leHBvcnQgY2xhc3MgUmluZ0J1ZmZlcjxUPiB7XG4gIC8qKlxuICAgKiBDcmVhdGUgcmluZyBidWZmZXIgZnJvbSBhcnJheS5cbiAgICogQHBhcmFtIGRhdGEgQXJyYXkgb2YgZWxlbWVudChzKS5cbiAgICogQHBhcmFtIHNpemUgU2l6ZSBvZiByaW5nIGFycmF5LlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBmcm9tQXJyYXk8VD4oZGF0YTogVFtdLCBzaXplID0gMCk6IFJpbmdCdWZmZXI8VD4ge1xuICAgIGNvbnN0IGFjdGlvbkJ1ZmZlciA9IG5ldyBSaW5nQnVmZmVyPFQ+KHNpemUpXG4gICAgYWN0aW9uQnVmZmVyLmZyb21BcnJheShkYXRhLCBzaXplID09PSAwKVxuICAgIHJldHVybiBhY3Rpb25CdWZmZXJcbiAgfVxuXG4gIC8qKiBCdWZmZXIgdG8gaG9sZCBlbGVtZW50KHMpLiAqL1xuICBwcml2YXRlIGJ1ZmZlcjogVFtdID0gW11cbiAgLyoqIE1heGltdW0gbnVtYmVyIG9mIGVsZW1lbnRzIHRoaXMgYnVmZmVyIGNhbiBjb250YWluLiAqL1xuICBwcml2YXRlIHNpemU6IG51bWJlclxuICAvKiogQ3VycmVudCBwb3NpdGlvbiBvbiB0aGUgcmluZyBidWZmZXIuICovXG4gIHByaXZhdGUgcG9zID0gMFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgbmV3IHJpbmcgYnVmZmVyIGFuZCBjb3B5IGVsZW1lbnRzIGZyb20gdGhpcyByaW5nIGJ1ZmZlci5cbiAgICpcbiAgICogQHJldHVybnMgTmV3bHkgY3JlYXRlZCByaW5nIGJ1ZmZlci5cbiAgICovXG4gIHB1YmxpYyBjb3B5KCk6IFJpbmdCdWZmZXI8VD4ge1xuICAgIGNvbnN0IG5ld0F4aXNCdWZmZXIgPSBuZXcgUmluZ0J1ZmZlcjxUPih0aGlzLmdldEJ1ZmZlckxlbmd0aCgpKVxuICAgIG5ld0F4aXNCdWZmZXIuYnVmZmVyID0gdGhpcy5idWZmZXJcbiAgICByZXR1cm4gbmV3QXhpc0J1ZmZlclxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBuZXcgcmluZyBidWZmZXIgYW5kIGNvcHkgZWxlbWVudHMgZnJvbSB0aGlzIHJpbmcgYnVmZmVyLlxuICAgKlxuICAgKiBAcmV0dXJucyBOZXdseSBjcmVhdGVkIHJpbmcgYnVmZmVyLlxuICAgKi9cbiAgcHVibGljIGNsb25lKCk6IFJpbmdCdWZmZXI8VD4ge1xuICAgIGNvbnN0IG5ld0F4aXNCdWZmZXIgPSBuZXcgUmluZ0J1ZmZlcjxUPih0aGlzLmdldEJ1ZmZlckxlbmd0aCgpKVxuICAgIG5ld0F4aXNCdWZmZXIuYnVmZmVyID0gdGhpcy5idWZmZXJcbiAgICByZXR1cm4gbmV3QXhpc0J1ZmZlclxuICB9XG5cbiAgLyoqIENvbnN0cnVjdHMgcmluZyBidWZmZXIgb2YgZ2l2ZW4gc2l6ZSAqL1xuICBjb25zdHJ1Y3RvcihzaXplOiBudW1iZXIpIHtcbiAgICBpZiAoc2l6ZSA8IDApIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgc2l6ZSBkb2VzIG5vdCBhbGxvdyBuZWdhdGl2ZSB2YWx1ZXMuJylcbiAgICB9XG4gICAgdGhpcy5zaXplID0gc2l6ZVxuICB9XG5cbiAgLyoqIEByZXR1cm5zIHNpemUgb2YgdGhlIHJpbmcgYnVmZmVyLiAqL1xuICBwdWJsaWMgZ2V0U2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnNpemVcbiAgfVxuXG4gIC8qKiBAcmV0dXJucyBjdXJyZW50IHBvc2l0aW9uIG9uIHRoZSByaW5nIGJ1ZmZlci4gKi9cbiAgcHVibGljIGdldFBvcygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnBvc1xuICB9XG5cbiAgLyoqIEByZXR1cm5zIGNvdW50IG9mIGVsZW1lbnRzIGluIHRoZSByaW5nIGJ1ZmZlci4gKi9cbiAgcHVibGljIGdldEJ1ZmZlckxlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sZW5ndGhcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgZWxlbWVudChzKSBpbnRvIHRoZSByaW5nIGJ1ZmZlci5cXFxuICAgKiBJZiBvdmVyZmxvdyBoYXBwZW5zIHRoZW4gZWxlbWVudChzKSB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IEZJRk8gbWFubmVyLlxuICAgKiBAcGFyYW0gaXRlbXMgbGlzdCBvZiBlbGVtZW50KHMpIHRvIGJlIGluc2VydGVkLlxuICAgKi9cbiAgcHVibGljIGFkZCguLi5pdGVtczogVFtdKTogdm9pZCB7XG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5idWZmZXJbdGhpcy5wb3NdID0gaXRlbVxuICAgICAgdGhpcy5wb3MgPSAodGhpcy5wb3MgKyAxKSAlIHRoaXMuc2l6ZVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogR2V0IGVsZW1lbnQgYXQgZ2l2ZW4gaW5kZXggZnJvbSByaW5nIGJ1ZmZlci5cbiAgICogQHBhcmFtIGluZGV4IEluZGV4IG9mIHRoZSBlbGVtZW50IHdoaWNoIHdpbGwgYmUgcmV0cmlldmVkLlxuICAgKiBAcmV0dXJucyBFbGVtZW50IGluIHRoZSBnaXZlbiBpbmRleCBvciB1bmRlZmluZWQgaWYgbm90IGZvdW5kLlxuICAgKi9cbiAgcHVibGljIGdldChpbmRleDogbnVtYmVyKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgaW5kZXggKz0gdGhpcy5idWZmZXIubGVuZ3RoXG4gICAgfVxuXG4gICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPCB0aGlzLnNpemUpIHtcbiAgICAgIHJldHVybiB0aGlzLmJ1ZmZlcltpbmRleF1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5idWZmZXJbKHRoaXMucG9zICsgaW5kZXgpICUgdGhpcy5zaXplXVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBmaXJzdCBlbGVtZW50IGZyb20gdGhlIHJpbmcgYnVmZmVyLlxuICAgKiBAcmV0dXJucyBGaXJzdCBlbGVtZW50IG9mIHJpbmcgYnVmZmVyLlxuICAgKi9cbiAgcHVibGljIGdldEZpcnN0KCk6IFQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmdldCgwKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBsYXN0IGVsZW1lbnQgZnJvbSB0aGUgcmluZyBidWZmZXIuXG4gICAqIEByZXR1cm5zIExhc3QgZWxlbWVudCBvZiByaW5nIGJ1ZmZlci5cbiAgICovXG4gIHB1YmxpYyBnZXRMYXN0KCk6IFQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmdldCgtMSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgZWxlbWVudChzKSBmcm9tIHRoZSByaW5nIGJ1ZmZlci5cbiAgICogQHBhcmFtIGluZGV4IEluZGV4IEZyb20gd2hpY2ggZWxlbWVudChzKSB3aWxsIGJlIHJlbW92ZWQuXG4gICAqIEBwYXJhbSBjb3VudCBOdW1iZXIgb2YgZWxlbWVudChzKSB0byBiZSByZW1vdmVkLlxuICAgKiBAcmV0dXJucyBBcnJheSBvZiByZW1vdmVkIGVsZW1lbnQocykuXG4gICAqL1xuICBwdWJsaWMgcmVtb3ZlKGluZGV4OiBudW1iZXIsIGNvdW50ID0gMSk6IFRbXSB7XG4gICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgaW5kZXggKz0gdGhpcy5idWZmZXIubGVuZ3RoXG4gICAgfVxuXG4gICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuXG4gICAgY29uc3QgYXJyID0gdGhpcy50b0FycmF5KClcbiAgICBjb25zdCByZW1vdmVkSXRlbXMgPSBhcnIuc3BsaWNlKGluZGV4LCBjb3VudClcbiAgICB0aGlzLmZyb21BcnJheShhcnIpXG4gICAgcmV0dXJuIHJlbW92ZWRJdGVtc1xuICB9XG5cbiAgLyoqIFJlbW92ZSBhbmQgcmV0dXJuIGVsZW1lbnQgZnJvbSBjdXJyZW50IHBvc2l0aW9uLlxuICAgKlxuICAgKiBAcmV0dXJucyBSZW1vdmVkIGVsZW1lbnQgZnJvbSBjdXJyZW50IHBvc2l0aW9uLlxuICAgKi9cbiAgcHVibGljIHBvcCgpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5yZW1vdmUoMClbMF1cbiAgfVxuXG4gIC8qKiBSZW1vdmUgYW5kIHJldHVybiBsYXN0IGVsZW1lbnQgZnJvbSByaW5nIGJ1ZmZlci5cbiAgICpcbiAgICogQHJldHVybnMgbGFzdCBlbGVtZW50IGZyb20gcmluZyBidWZmZXIuXG4gICAqL1xuICBwdWJsaWMgcG9wTGFzdCgpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5yZW1vdmUoLTEpWzBdXG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIGFycmF5IGZyb20gcmluZyBidWZmZXIuXG4gICAqXG4gICAqIEByZXR1cm5zIGdlbmVyYXRlZCBhcnJheSBjb250YWluaW5nIHJpbmcgYnVmZmVyIGVsZW1lbnRzLlxuICAgKi9cbiAgcHVibGljIHRvQXJyYXkoKTogVFtdIHtcbiAgICByZXR1cm4gdGhpcy5idWZmZXIuc2xpY2UodGhpcy5wb3MpLmNvbmNhdCh0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLnBvcykpXG4gIH1cblxuICAvKipcbiAgICogRmlsbCB1cCB0aGUgcmluZyBidWZmZXIgd2l0aCBhcnJheSBlbGVtZW50cy5cXFxuICAgKiBJZiBhcnJheSBjb250YWlucyBtb3JlIGVsZW1lbnQgdGhhbiBzaXplIG9mIHJpbmcgYnVmZmVyIHRoZW4gZXhjZXNzIGVsZW1lbnRzIHdpbGwgbm90IGJlIGluY2x1ZGVkIGluIGFycmF5LlxuICAgKiBUbyBpbmNsdWRlIGV2ZXJ5IGVsZW1lbnRzIHNldCAqKmBgYHJlc2l6ZWBgYCoqIHRvICoqYGBgdHJ1ZWBgYCoqLlxuICAgKiBAcGFyYW0gZGF0YSBBcnJheSBjb250YWluaW5nIGVsZW1lbnRzLlxuICAgKiBAcGFyYW0gcmVzaXplIFdoZXRoZXIgcmVzaXplIGN1cnJlbnQgcmluZyBidWZmZXIuXG4gICAqL1xuICBwdWJsaWMgZnJvbUFycmF5KGRhdGE6IFRbXSwgcmVzaXplID0gZmFsc2UpOiB2b2lkIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0lucHV0IHZhbHVlIGlzIG5vdCBhbiBhcnJheS4nKVxuICAgIH1cblxuICAgIGlmIChyZXNpemUpIHRoaXMucmVzaXplKGRhdGEubGVuZ3RoKVxuXG4gICAgaWYgKHRoaXMuc2l6ZSA9PT0gMCkgcmV0dXJuXG5cbiAgICB0aGlzLmJ1ZmZlciA9IGRhdGEuc2xpY2UoLXRoaXMuc2l6ZSlcbiAgICB0aGlzLnBvcyA9IHRoaXMuYnVmZmVyLmxlbmd0aCAlIHRoaXMuc2l6ZVxuICB9XG5cbiAgLyoqIENsZWFyIHRoZSByaW5nIGJ1ZmZlci4gKi9cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuYnVmZmVyID0gW11cbiAgICB0aGlzLnBvcyA9IDBcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNpemUgcmluZyBidWZmZXIgd2l0aCBnaXZlbiBzaXplLlxuICAgKiBAcGFyYW0gbmV3U2l6ZSBuZXcgc2l6ZSBvZiB0aGUgYnVmZmVyLlxuICAgKi9cbiAgcHVibGljIHJlc2l6ZShuZXdTaXplOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAobmV3U2l6ZSA8IDApIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgc2l6ZSBkb2VzIG5vdCBhbGxvdyBuZWdhdGl2ZSB2YWx1ZXMuJylcbiAgICB9XG5cbiAgICBpZiAobmV3U2l6ZSA9PT0gMCkge1xuICAgICAgdGhpcy5jbGVhcigpXG4gICAgfSBlbHNlIGlmIChuZXdTaXplICE9PSB0aGlzLnNpemUpIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRCdWZmZXIgPSB0aGlzLnRvQXJyYXkoKVxuICAgICAgdGhpcy5mcm9tQXJyYXkoY3VycmVudEJ1ZmZlci5zbGljZSgtbmV3U2l6ZSkpXG4gICAgICB0aGlzLnBvcyA9IHRoaXMuYnVmZmVyLmxlbmd0aCAlIG5ld1NpemVcbiAgICB9XG5cbiAgICB0aGlzLnNpemUgPSBuZXdTaXplXG4gIH1cblxuICAvKiogQHJldHVybnMgV2hldGhlciB0aGUgYnVmZmVyIGlzIGZ1bGwgb3Igbm90LiAqL1xuICBwdWJsaWMgZnVsbCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5idWZmZXIubGVuZ3RoID09PSB0aGlzLnNpemVcbiAgfVxuXG4gIC8qKiBAcmV0dXJucyBXaGV0aGVyIHRoZSBidWZmZXIgaXMgZW1wdHkgb3Igbm90LiAqL1xuICBwdWJsaWMgZW1wdHkoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMFxuICB9XG59XG4iLCJpbXBvcnQgeyBTY2hlbWEgfSBmcm9tICcuLi8uLi9hc3NldHMvc3VwZXJidWZmZXInXG5pbXBvcnQgeyBSaW5nQnVmZmVyIH0gZnJvbSAnLi4vLi4vY29tbW9uL2NsYXNzZXMvUmluZ0J1ZmZlcidcbmltcG9ydCB7IE5ldHdvcmtTY2hlbWEgfSBmcm9tICcuLi9pbnRlcmZhY2VzL05ldHdvcmtTY2hlbWEnXG5pbXBvcnQgeyBOZXR3b3JrVHJhbnNwb3J0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9OZXR3b3JrVHJhbnNwb3J0J1xuaW1wb3J0IHsgTmV0d29ya0lkIH0gZnJvbSAnQHhyZW5naW5lL2NvbW1vbi9zcmMvaW50ZXJmYWNlcy9OZXR3b3JrSWQnXG5cbi8qKiBDb21wb25lbnQgQ2xhc3MgZm9yIE5ldHdvcmsuICovXG5leHBvcnQgY2xhc3MgTmV0d29yayB7XG4gIC8qKiBTdGF0aWMgaW5zdGFuY2UgdG8gYWNjZXNzIGV2ZXJ5d2hlcmUuICovXG4gIHN0YXRpYyBpbnN0YW5jZTogTmV0d29yayA9IG5ldyBOZXR3b3JrKClcblxuICAvKiogSW5kaWNhdGlvbiBvZiB3aGV0aGVyIHRoZSBuZXR3b3JrIGlzIGluaXRpYWxpemVkIG9yIG5vdC4gKi9cbiAgaXNJbml0aWFsaXplZDogYm9vbGVhblxuICAvKiogV2hldGhlciB0byBhcHBseSBjb21wcmVzc2lvbiBvbiBwYWNrZXQgb3Igbm90LiAqL1xuICBwYWNrZXRDb21wcmVzc2lvbiA9IHRydWVcbiAgLyoqIE9iamVjdCBob2xkaW5nIHRyYW5zcG9ydCBkZXRhaWxzIG92ZXIgbmV0d29yay4gKi9cbiAgdHJhbnNwb3J0OiBOZXR3b3JrVHJhbnNwb3J0XG4gIC8qKiBOZXR3b3JrIHRyYW5zcG9ydHMuICovXG4gIHRyYW5zcG9ydHMgPSBbXSBhcyBhbnlbXVxuICAvKiogU2NoZW1hIG9mIHRoZSBjb21wb25lbnQuICovXG4gIHNjaGVtYTogTmV0d29ya1NjaGVtYVxuICAvKiogTGlzdCBvZiBkYXRhIHByb2R1Y2VyIG5vZGVzLiAqL1xuICBkYXRhUHJvZHVjZXJzID0gbmV3IE1hcDxzdHJpbmcsIGFueT4oKVxuICAvKiogTGlzdCBvZiBkYXRhIGNvbnN1bWVyIG5vZGVzLiAqL1xuICBkYXRhQ29uc3VtZXJzID0gbmV3IE1hcDxzdHJpbmcsIGFueT4oKVxuICAvKiogU29ja2V0IGlkIG9mIHRoZSBuZXR3b3JrIGluc3RhbmNlIGNvbm5lY3Rpb24uICovXG4gIGluc3RhbmNlU29ja2V0SWQ6IHN0cmluZ1xuICAvKiogU29ja2V0IGlkIG9mIHRoZSBuZXR3b3JrIGNoYW5uZWwgY29ubmVjdGlvbi4gKi9cbiAgY2hhbm5lbFNvY2tldElkOiBzdHJpbmdcbiAgLyoqIEFjY2VzcyB0b2NrZW4gb2YgdGhlIFVzZXIuICovXG4gIGFjY2Vzc1Rva2VuOiBzdHJpbmdcblxuICAvKiogU2NoZW1hIG9mIHRoZSBuZXR3b3JrLiAqL1xuICBzdGF0aWMgX3NjaGVtYXM6IE1hcDxzdHJpbmcsIFNjaGVtYT4gPSBuZXcgTWFwKClcblxuICAvKiogQnVmZmVyIGhvbGRpbmcgYWxsIGluY29taW5nIE1lc3NhZ2VzLiAqL1xuICBpbmNvbWluZ01lc3NhZ2VRdWV1ZVVucmVsaWFibGVJRHM6IFJpbmdCdWZmZXI8c3RyaW5nPiA9IG5ldyBSaW5nQnVmZmVyPHN0cmluZz4oMTAwKVxuXG4gIC8qKiBCdWZmZXIgaG9sZGluZyBhbGwgaW5jb21pbmcgTWVzc2FnZXMuICovXG4gIGluY29taW5nTWVzc2FnZVF1ZXVlVW5yZWxpYWJsZTogUmluZ0J1ZmZlcjxhbnk+ID0gbmV3IFJpbmdCdWZmZXI8YW55PigxMDApXG5cbiAgLyoqIEJ1ZmZlciBob2xkaW5nIGFsbCBpbmNvbWluZyBNZXNzYWdlcy4gKi9cbiAgaW5jb21pbmdNZXNzYWdlUXVldWVSZWxpYWJsZTogUmluZ0J1ZmZlcjxhbnk+ID0gbmV3IFJpbmdCdWZmZXI8YW55PigxMDApXG5cbiAgLyoqIEJ1ZmZlciBob2xkaW5nIE1lZGlhc291cCBvcGVyYXRpb25zICovXG4gIG1lZGlhc291cE9wZXJhdGlvblF1ZXVlOiBSaW5nQnVmZmVyPGFueT4gPSBuZXcgUmluZ0J1ZmZlcjxhbnk+KDEwMDApXG5cbiAgLyoqIElEIG9mIGxhc3QgbmV0d29yayBjcmVhdGVkLiAqL1xuICBwcml2YXRlIHN0YXRpYyBhdmFpbGFibGVOZXR3b3JrSWQgPSAwIGFzIE5ldHdvcmtJZFxuXG4gIC8qKiBHZXQgbmV4dCBuZXR3b3JrIGlkLiAqL1xuICBzdGF0aWMgZ2V0TmV0d29ya0lkKCk6IE5ldHdvcmtJZCB7XG4gICAgcmV0dXJuICsrdGhpcy5hdmFpbGFibGVOZXR3b3JrSWQgYXMgTmV0d29ya0lkXG4gIH1cblxuICAvKiogRGlzcG9zZXMgdGhlIG5ldHdvcmsuICovXG4gIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgLy8gVE9ETzogbmVlZHMgdGVzdHNcbiAgICBpZiAodGhpcy50cmFuc3BvcnQgJiYgdHlwZW9mIHRoaXMudHJhbnNwb3J0LmNsb3NlID09PSAnZnVuY3Rpb24nKSB0aGlzLnRyYW5zcG9ydC5jbG9zZSgpXG4gICAgdGhpcy50cmFuc3BvcnQgPSBudWxsIVxuICAgIE5ldHdvcmsuaW5zdGFuY2UgPSBudWxsIVxuICB9XG59XG4iLCIvKiogTmV0d29yayBNZXNzYWdlIFR5cGVzLiAqL1xuZXhwb3J0IGVudW0gTWVzc2FnZVR5cGVzIHtcbiAgSGVhcnRiZWF0ID0gMCxcbiAgQ2xpZW50Q29ubmVjdGVkID0gMSxcbiAgQ2xpZW50RGlzY29ubmVjdGVkID0gMixcbiAgSW5pdGlhbGl6YXRpb24gPSAzLFxuICBKb2luV29ybGQgPSA0LFxuICBMZWF2ZVdvcmxkID0gNSxcbiAgV2ViUlRDVHJhbnNwb3J0Q3JlYXRlID0gNixcbiAgV2ViUlRDVHJhbnNwb3J0Q29ubmVjdCA9IDcsXG4gIFdlYlJUQ1RyYW5zcG9ydENsb3NlID0gOCxcbiAgV2ViUlRDU2VuZFRyYWNrID0gOSxcbiAgV2ViUlRDUmVjZWl2ZVRyYWNrID0gMTAsXG4gIFdlYlJUQ1BhdXNlQ29uc3VtZXIgPSAxMSxcbiAgV2ViUlRDUmVzdW1lQ29uc3VtZXIgPSAxMixcbiAgV2ViUlRDQ2xvc2VDb25zdW1lciA9IDEzLFxuICBXZWJSVENQYXVzZVByb2R1Y2VyID0gMTQsXG4gIFdlYlJUQ1Jlc3VtZVByb2R1Y2VyID0gMTUsXG4gIFdlYlJUQ0Nsb3NlUHJvZHVjZXIgPSAxNixcbiAgV2ViUlRDTXV0ZU90aGVyUHJvZHVjZXIgPSAxNyxcbiAgV2ViUlRDVW5tdXRlT3RoZXJQcm9kdWNlciA9IDE4LFxuICBXZWJSVENDb25zdW1lclNldExheWVycyA9IDE5LFxuICBXZWJSVENDb25zdW1lRGF0YSA9IDIwLFxuICBXZWJSVENQcm9kdWNlRGF0YSA9IDIxLFxuICBSZWxpYWJsZU1lc3NhZ2UgPSAyMixcbiAgV2ViUlRDQ3JlYXRlUHJvZHVjZXIgPSAyMyxcbiAgQXV0aG9yaXphdGlvbiA9IDI0LFxuICBLaWNrID0gMjYsXG4gIEJhbiA9IDI3LFxuICBDb25uZWN0VG9Xb3JsZCA9IDI4LFxuICBXZWJSVENSZXF1ZXN0Q3VycmVudFByb2R1Y2VycyA9IDI5LFxuICBVcGRhdGVOZXR3b3JrU3RhdGUgPSAzMCxcbiAgSW5pdGlhbGl6ZVJvdXRlciA9IDMxLFxuICBXZWJSVENSZXF1ZXN0TmVhcmJ5VXNlcnMgPSAzMixcbiAgQWN0aW9uRGF0YSA9IDQyLFxuICBTeW5jaHJvbml6YXRpb24gPSAxMDAsXG4gIENsaWVudElucHV0ID0gMTAxLFxuICBTdGF0ZVVwZGF0ZSA9IDEwMixcbiAgVGVzdCA9IDI1MCxcbiAgQXZhdGFyVXBkYXRlZCA9IDI1NFxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJpbmQoZm4sIHRoaXNBcmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gZm4uYXBwbHkodGhpc0FyZywgYXJncyk7XG4gIH07XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYmluZCA9IHJlcXVpcmUoJy4vaGVscGVycy9iaW5kJyk7XG5cbi8vIHV0aWxzIGlzIGEgbGlicmFyeSBvZiBnZW5lcmljIGhlbHBlciBmdW5jdGlvbnMgbm9uLXNwZWNpZmljIHRvIGF4aW9zXG5cbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gQXJyYXlcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXkodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgdW5kZWZpbmVkXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHZhbHVlIGlzIHVuZGVmaW5lZCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBCdWZmZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQnVmZmVyKHZhbCkge1xuICByZXR1cm4gdmFsICE9PSBudWxsICYmICFpc1VuZGVmaW5lZCh2YWwpICYmIHZhbC5jb25zdHJ1Y3RvciAhPT0gbnVsbCAmJiAhaXNVbmRlZmluZWQodmFsLmNvbnN0cnVjdG9yKVxuICAgICYmIHR5cGVvZiB2YWwuY29uc3RydWN0b3IuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicgJiYgdmFsLmNvbnN0cnVjdG9yLmlzQnVmZmVyKHZhbCk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlCdWZmZXIodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGb3JtRGF0YVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEZvcm1EYXRhLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGb3JtRGF0YSh2YWwpIHtcbiAgcmV0dXJuICh0eXBlb2YgRm9ybURhdGEgIT09ICd1bmRlZmluZWQnKSAmJiAodmFsIGluc3RhbmNlb2YgRm9ybURhdGEpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlCdWZmZXJWaWV3KHZhbCkge1xuICB2YXIgcmVzdWx0O1xuICBpZiAoKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpICYmIChBcnJheUJ1ZmZlci5pc1ZpZXcpKSB7XG4gICAgcmVzdWx0ID0gQXJyYXlCdWZmZXIuaXNWaWV3KHZhbCk7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gKHZhbCkgJiYgKHZhbC5idWZmZXIpICYmICh2YWwuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJpbmdcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmluZywgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3RyaW5nKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZyc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBOdW1iZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIE51bWJlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTnVtYmVyKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcic7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gT2JqZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gT2JqZWN0LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IG51bGwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBwbGFpbiBPYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgcGxhaW4gT2JqZWN0LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWwpIHtcbiAgaWYgKHRvU3RyaW5nLmNhbGwodmFsKSAhPT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgcHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbCk7XG4gIHJldHVybiBwcm90b3R5cGUgPT09IG51bGwgfHwgcHJvdG90eXBlID09PSBPYmplY3QucHJvdG90eXBlO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRGF0ZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRGF0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRGF0ZSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRmlsZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRmlsZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRmlsZSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRmlsZV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQmxvYlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQmxvYiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQmxvYih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQmxvYl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZ1bmN0aW9uLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmVhbVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyZWFtLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTdHJlYW0odmFsKSB7XG4gIHJldHVybiBpc09iamVjdCh2YWwpICYmIGlzRnVuY3Rpb24odmFsLnBpcGUpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzVVJMU2VhcmNoUGFyYW1zKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIFVSTFNlYXJjaFBhcmFtcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsIGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zO1xufVxuXG4vKipcbiAqIFRyaW0gZXhjZXNzIHdoaXRlc3BhY2Ugb2ZmIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiBhIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIFN0cmluZyB0byB0cmltXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgU3RyaW5nIGZyZWVkIG9mIGV4Y2VzcyB3aGl0ZXNwYWNlXG4gKi9cbmZ1bmN0aW9uIHRyaW0oc3RyKSB7XG4gIHJldHVybiBzdHIudHJpbSA/IHN0ci50cmltKCkgOiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiB3ZSdyZSBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudFxuICpcbiAqIFRoaXMgYWxsb3dzIGF4aW9zIHRvIHJ1biBpbiBhIHdlYiB3b3JrZXIsIGFuZCByZWFjdC1uYXRpdmUuXG4gKiBCb3RoIGVudmlyb25tZW50cyBzdXBwb3J0IFhNTEh0dHBSZXF1ZXN0LCBidXQgbm90IGZ1bGx5IHN0YW5kYXJkIGdsb2JhbHMuXG4gKlxuICogd2ViIHdvcmtlcnM6XG4gKiAgdHlwZW9mIHdpbmRvdyAtPiB1bmRlZmluZWRcbiAqICB0eXBlb2YgZG9jdW1lbnQgLT4gdW5kZWZpbmVkXG4gKlxuICogcmVhY3QtbmF0aXZlOlxuICogIG5hdmlnYXRvci5wcm9kdWN0IC0+ICdSZWFjdE5hdGl2ZSdcbiAqIG5hdGl2ZXNjcmlwdFxuICogIG5hdmlnYXRvci5wcm9kdWN0IC0+ICdOYXRpdmVTY3JpcHQnIG9yICdOUydcbiAqL1xuZnVuY3Rpb24gaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiAobmF2aWdhdG9yLnByb2R1Y3QgPT09ICdSZWFjdE5hdGl2ZScgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ05hdGl2ZVNjcmlwdCcgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ05TJykpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIChcbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCdcbiAgKTtcbn1cblxuLyoqXG4gKiBJdGVyYXRlIG92ZXIgYW4gQXJyYXkgb3IgYW4gT2JqZWN0IGludm9raW5nIGEgZnVuY3Rpb24gZm9yIGVhY2ggaXRlbS5cbiAqXG4gKiBJZiBgb2JqYCBpcyBhbiBBcnJheSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGluZGV4LCBhbmQgY29tcGxldGUgYXJyYXkgZm9yIGVhY2ggaXRlbS5cbiAqXG4gKiBJZiAnb2JqJyBpcyBhbiBPYmplY3QgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZ1xuICogdGhlIHZhbHVlLCBrZXksIGFuZCBjb21wbGV0ZSBvYmplY3QgZm9yIGVhY2ggcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IG9iaiBUaGUgb2JqZWN0IHRvIGl0ZXJhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBjYWxsYmFjayB0byBpbnZva2UgZm9yIGVhY2ggaXRlbVxuICovXG5mdW5jdGlvbiBmb3JFYWNoKG9iaiwgZm4pIHtcbiAgLy8gRG9uJ3QgYm90aGVyIGlmIG5vIHZhbHVlIHByb3ZpZGVkXG4gIGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBGb3JjZSBhbiBhcnJheSBpZiBub3QgYWxyZWFkeSBzb21ldGhpbmcgaXRlcmFibGVcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG4gICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gICAgb2JqID0gW29ial07XG4gIH1cblxuICBpZiAoaXNBcnJheShvYmopKSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIGFycmF5IHZhbHVlc1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZm4uY2FsbChudWxsLCBvYmpbaV0sIGksIG9iaik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIEl0ZXJhdGUgb3ZlciBvYmplY3Qga2V5c1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2tleV0sIGtleSwgb2JqKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBY2NlcHRzIHZhcmFyZ3MgZXhwZWN0aW5nIGVhY2ggYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0LCB0aGVuXG4gKiBpbW11dGFibHkgbWVyZ2VzIHRoZSBwcm9wZXJ0aWVzIG9mIGVhY2ggb2JqZWN0IGFuZCByZXR1cm5zIHJlc3VsdC5cbiAqXG4gKiBXaGVuIG11bHRpcGxlIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBrZXkgdGhlIGxhdGVyIG9iamVjdCBpblxuICogdGhlIGFyZ3VtZW50cyBsaXN0IHdpbGwgdGFrZSBwcmVjZWRlbmNlLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqIHZhciByZXN1bHQgPSBtZXJnZSh7Zm9vOiAxMjN9LCB7Zm9vOiA0NTZ9KTtcbiAqIGNvbnNvbGUubG9nKHJlc3VsdC5mb28pOyAvLyBvdXRwdXRzIDQ1NlxuICogYGBgXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iajEgT2JqZWN0IHRvIG1lcmdlXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXN1bHQgb2YgYWxsIG1lcmdlIHByb3BlcnRpZXNcbiAqL1xuZnVuY3Rpb24gbWVyZ2UoLyogb2JqMSwgb2JqMiwgb2JqMywgLi4uICovKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcbiAgICBpZiAoaXNQbGFpbk9iamVjdChyZXN1bHRba2V5XSkgJiYgaXNQbGFpbk9iamVjdCh2YWwpKSB7XG4gICAgICByZXN1bHRba2V5XSA9IG1lcmdlKHJlc3VsdFtrZXldLCB2YWwpO1xuICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh2YWwpKSB7XG4gICAgICByZXN1bHRba2V5XSA9IG1lcmdlKHt9LCB2YWwpO1xuICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWwpKSB7XG4gICAgICByZXN1bHRba2V5XSA9IHZhbC5zbGljZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHRba2V5XSA9IHZhbDtcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBpID0gMCwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBmb3JFYWNoKGFyZ3VtZW50c1tpXSwgYXNzaWduVmFsdWUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogRXh0ZW5kcyBvYmplY3QgYSBieSBtdXRhYmx5IGFkZGluZyB0byBpdCB0aGUgcHJvcGVydGllcyBvZiBvYmplY3QgYi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYSBUaGUgb2JqZWN0IHRvIGJlIGV4dGVuZGVkXG4gKiBAcGFyYW0ge09iamVjdH0gYiBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tXG4gKiBAcGFyYW0ge09iamVjdH0gdGhpc0FyZyBUaGUgb2JqZWN0IHRvIGJpbmQgZnVuY3Rpb24gdG9cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIHJlc3VsdGluZyB2YWx1ZSBvZiBvYmplY3QgYVxuICovXG5mdW5jdGlvbiBleHRlbmQoYSwgYiwgdGhpc0FyZykge1xuICBmb3JFYWNoKGIsIGZ1bmN0aW9uIGFzc2lnblZhbHVlKHZhbCwga2V5KSB7XG4gICAgaWYgKHRoaXNBcmcgJiYgdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgYVtrZXldID0gYmluZCh2YWwsIHRoaXNBcmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhW2tleV0gPSB2YWw7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGE7XG59XG5cbi8qKlxuICogUmVtb3ZlIGJ5dGUgb3JkZXIgbWFya2VyLiBUaGlzIGNhdGNoZXMgRUYgQkIgQkYgKHRoZSBVVEYtOCBCT00pXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnQgd2l0aCBCT01cbiAqIEByZXR1cm4ge3N0cmluZ30gY29udGVudCB2YWx1ZSB3aXRob3V0IEJPTVxuICovXG5mdW5jdGlvbiBzdHJpcEJPTShjb250ZW50KSB7XG4gIGlmIChjb250ZW50LmNoYXJDb2RlQXQoMCkgPT09IDB4RkVGRikge1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnNsaWNlKDEpO1xuICB9XG4gIHJldHVybiBjb250ZW50O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaXNBcnJheTogaXNBcnJheSxcbiAgaXNBcnJheUJ1ZmZlcjogaXNBcnJheUJ1ZmZlcixcbiAgaXNCdWZmZXI6IGlzQnVmZmVyLFxuICBpc0Zvcm1EYXRhOiBpc0Zvcm1EYXRhLFxuICBpc0FycmF5QnVmZmVyVmlldzogaXNBcnJheUJ1ZmZlclZpZXcsXG4gIGlzU3RyaW5nOiBpc1N0cmluZyxcbiAgaXNOdW1iZXI6IGlzTnVtYmVyLFxuICBpc09iamVjdDogaXNPYmplY3QsXG4gIGlzUGxhaW5PYmplY3Q6IGlzUGxhaW5PYmplY3QsXG4gIGlzVW5kZWZpbmVkOiBpc1VuZGVmaW5lZCxcbiAgaXNEYXRlOiBpc0RhdGUsXG4gIGlzRmlsZTogaXNGaWxlLFxuICBpc0Jsb2I6IGlzQmxvYixcbiAgaXNGdW5jdGlvbjogaXNGdW5jdGlvbixcbiAgaXNTdHJlYW06IGlzU3RyZWFtLFxuICBpc1VSTFNlYXJjaFBhcmFtczogaXNVUkxTZWFyY2hQYXJhbXMsXG4gIGlzU3RhbmRhcmRCcm93c2VyRW52OiBpc1N0YW5kYXJkQnJvd3NlckVudixcbiAgZm9yRWFjaDogZm9yRWFjaCxcbiAgbWVyZ2U6IG1lcmdlLFxuICBleHRlbmQ6IGV4dGVuZCxcbiAgdHJpbTogdHJpbSxcbiAgc3RyaXBCT006IHN0cmlwQk9NXG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbmZ1bmN0aW9uIGVuY29kZSh2YWwpIHtcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpLlxuICAgIHJlcGxhY2UoLyUzQS9naSwgJzonKS5cbiAgICByZXBsYWNlKC8lMjQvZywgJyQnKS5cbiAgICByZXBsYWNlKC8lMkMvZ2ksICcsJykuXG4gICAgcmVwbGFjZSgvJTIwL2csICcrJykuXG4gICAgcmVwbGFjZSgvJTVCL2dpLCAnWycpLlxuICAgIHJlcGxhY2UoLyU1RC9naSwgJ10nKTtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIFVSTCBieSBhcHBlbmRpbmcgcGFyYW1zIHRvIHRoZSBlbmRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBiYXNlIG9mIHRoZSB1cmwgKGUuZy4sIGh0dHA6Ly93d3cuZ29vZ2xlLmNvbSlcbiAqIEBwYXJhbSB7b2JqZWN0fSBbcGFyYW1zXSBUaGUgcGFyYW1zIHRvIGJlIGFwcGVuZGVkXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIHVybFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJ1aWxkVVJMKHVybCwgcGFyYW1zLCBwYXJhbXNTZXJpYWxpemVyKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICBpZiAoIXBhcmFtcykge1xuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICB2YXIgc2VyaWFsaXplZFBhcmFtcztcbiAgaWYgKHBhcmFtc1NlcmlhbGl6ZXIpIHtcbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zU2VyaWFsaXplcihwYXJhbXMpO1xuICB9IGVsc2UgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKHBhcmFtcykpIHtcbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zLnRvU3RyaW5nKCk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHBhcnRzID0gW107XG5cbiAgICB1dGlscy5mb3JFYWNoKHBhcmFtcywgZnVuY3Rpb24gc2VyaWFsaXplKHZhbCwga2V5KSB7XG4gICAgICBpZiAodmFsID09PSBudWxsIHx8IHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHV0aWxzLmlzQXJyYXkodmFsKSkge1xuICAgICAgICBrZXkgPSBrZXkgKyAnW10nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsID0gW3ZhbF07XG4gICAgICB9XG5cbiAgICAgIHV0aWxzLmZvckVhY2godmFsLCBmdW5jdGlvbiBwYXJzZVZhbHVlKHYpIHtcbiAgICAgICAgaWYgKHV0aWxzLmlzRGF0ZSh2KSkge1xuICAgICAgICAgIHYgPSB2LnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodXRpbHMuaXNPYmplY3QodikpIHtcbiAgICAgICAgICB2ID0gSlNPTi5zdHJpbmdpZnkodik7XG4gICAgICAgIH1cbiAgICAgICAgcGFydHMucHVzaChlbmNvZGUoa2V5KSArICc9JyArIGVuY29kZSh2KSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJ0cy5qb2luKCcmJyk7XG4gIH1cblxuICBpZiAoc2VyaWFsaXplZFBhcmFtcykge1xuICAgIHZhciBoYXNobWFya0luZGV4ID0gdXJsLmluZGV4T2YoJyMnKTtcbiAgICBpZiAoaGFzaG1hcmtJbmRleCAhPT0gLTEpIHtcbiAgICAgIHVybCA9IHVybC5zbGljZSgwLCBoYXNobWFya0luZGV4KTtcbiAgICB9XG5cbiAgICB1cmwgKz0gKHVybC5pbmRleE9mKCc/JykgPT09IC0xID8gJz8nIDogJyYnKSArIHNlcmlhbGl6ZWRQYXJhbXM7XG4gIH1cblxuICByZXR1cm4gdXJsO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5mdW5jdGlvbiBJbnRlcmNlcHRvck1hbmFnZXIoKSB7XG4gIHRoaXMuaGFuZGxlcnMgPSBbXTtcbn1cblxuLyoqXG4gKiBBZGQgYSBuZXcgaW50ZXJjZXB0b3IgdG8gdGhlIHN0YWNrXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVsZmlsbGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHRoZW5gIGZvciBhIGBQcm9taXNlYFxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0ZWQgVGhlIGZ1bmN0aW9uIHRvIGhhbmRsZSBgcmVqZWN0YCBmb3IgYSBgUHJvbWlzZWBcbiAqXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IEFuIElEIHVzZWQgdG8gcmVtb3ZlIGludGVyY2VwdG9yIGxhdGVyXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24gdXNlKGZ1bGZpbGxlZCwgcmVqZWN0ZWQsIG9wdGlvbnMpIHtcbiAgdGhpcy5oYW5kbGVycy5wdXNoKHtcbiAgICBmdWxmaWxsZWQ6IGZ1bGZpbGxlZCxcbiAgICByZWplY3RlZDogcmVqZWN0ZWQsXG4gICAgc3luY2hyb25vdXM6IG9wdGlvbnMgPyBvcHRpb25zLnN5bmNocm9ub3VzIDogZmFsc2UsXG4gICAgcnVuV2hlbjogb3B0aW9ucyA/IG9wdGlvbnMucnVuV2hlbiA6IG51bGxcbiAgfSk7XG4gIHJldHVybiB0aGlzLmhhbmRsZXJzLmxlbmd0aCAtIDE7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhbiBpbnRlcmNlcHRvciBmcm9tIHRoZSBzdGFja1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpZCBUaGUgSUQgdGhhdCB3YXMgcmV0dXJuZWQgYnkgYHVzZWBcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5lamVjdCA9IGZ1bmN0aW9uIGVqZWN0KGlkKSB7XG4gIGlmICh0aGlzLmhhbmRsZXJzW2lkXSkge1xuICAgIHRoaXMuaGFuZGxlcnNbaWRdID0gbnVsbDtcbiAgfVxufTtcblxuLyoqXG4gKiBJdGVyYXRlIG92ZXIgYWxsIHRoZSByZWdpc3RlcmVkIGludGVyY2VwdG9yc1xuICpcbiAqIFRoaXMgbWV0aG9kIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgZm9yIHNraXBwaW5nIG92ZXIgYW55XG4gKiBpbnRlcmNlcHRvcnMgdGhhdCBtYXkgaGF2ZSBiZWNvbWUgYG51bGxgIGNhbGxpbmcgYGVqZWN0YC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCBpbnRlcmNlcHRvclxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiBmb3JFYWNoKGZuKSB7XG4gIHV0aWxzLmZvckVhY2godGhpcy5oYW5kbGVycywgZnVuY3Rpb24gZm9yRWFjaEhhbmRsZXIoaCkge1xuICAgIGlmIChoICE9PSBudWxsKSB7XG4gICAgICBmbihoKTtcbiAgICB9XG4gIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbnRlcmNlcHRvck1hbmFnZXI7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCBub3JtYWxpemVkTmFtZSkge1xuICB1dGlscy5mb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uIHByb2Nlc3NIZWFkZXIodmFsdWUsIG5hbWUpIHtcbiAgICBpZiAobmFtZSAhPT0gbm9ybWFsaXplZE5hbWUgJiYgbmFtZS50b1VwcGVyQ2FzZSgpID09PSBub3JtYWxpemVkTmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICBoZWFkZXJzW25vcm1hbGl6ZWROYW1lXSA9IHZhbHVlO1xuICAgICAgZGVsZXRlIGhlYWRlcnNbbmFtZV07XG4gICAgfVxuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVXBkYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBjb25maWcsIGVycm9yIGNvZGUsIGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnJvciBUaGUgZXJyb3IgdG8gdXBkYXRlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBlcnJvci5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgZXJyb3IuY29uZmlnID0gY29uZmlnO1xuICBpZiAoY29kZSkge1xuICAgIGVycm9yLmNvZGUgPSBjb2RlO1xuICB9XG5cbiAgZXJyb3IucmVxdWVzdCA9IHJlcXVlc3Q7XG4gIGVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gIGVycm9yLmlzQXhpb3NFcnJvciA9IHRydWU7XG5cbiAgZXJyb3IudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICAvLyBTdGFuZGFyZFxuICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxuICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgLy8gTWljcm9zb2Z0XG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbixcbiAgICAgIG51bWJlcjogdGhpcy5udW1iZXIsXG4gICAgICAvLyBNb3ppbGxhXG4gICAgICBmaWxlTmFtZTogdGhpcy5maWxlTmFtZSxcbiAgICAgIGxpbmVOdW1iZXI6IHRoaXMubGluZU51bWJlcixcbiAgICAgIGNvbHVtbk51bWJlcjogdGhpcy5jb2x1bW5OdW1iZXIsXG4gICAgICBzdGFjazogdGhpcy5zdGFjayxcbiAgICAgIC8vIEF4aW9zXG4gICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgY29kZTogdGhpcy5jb2RlLFxuICAgICAgc3RhdHVzOiB0aGlzLnJlc3BvbnNlICYmIHRoaXMucmVzcG9uc2Uuc3RhdHVzID8gdGhpcy5yZXNwb25zZS5zdGF0dXMgOiBudWxsXG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuIGVycm9yO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGVuaGFuY2VFcnJvciA9IHJlcXVpcmUoJy4vZW5oYW5jZUVycm9yJyk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBtZXNzYWdlLCBjb25maWcsIGVycm9yIGNvZGUsIHJlcXVlc3QgYW5kIHJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBlcnJvciBtZXNzYWdlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBjcmVhdGVkIGVycm9yLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKG1lc3NhZ2UsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgdmFyIGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICByZXR1cm4gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBjcmVhdGVFcnJvciA9IHJlcXVpcmUoJy4vY3JlYXRlRXJyb3InKTtcblxuLyoqXG4gKiBSZXNvbHZlIG9yIHJlamVjdCBhIFByb21pc2UgYmFzZWQgb24gcmVzcG9uc2Ugc3RhdHVzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmUgQSBmdW5jdGlvbiB0aGF0IHJlc29sdmVzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0IEEgZnVuY3Rpb24gdGhhdCByZWplY3RzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtvYmplY3R9IHJlc3BvbnNlIFRoZSByZXNwb25zZS5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCByZXNwb25zZSkge1xuICB2YXIgdmFsaWRhdGVTdGF0dXMgPSByZXNwb25zZS5jb25maWcudmFsaWRhdGVTdGF0dXM7XG4gIGlmICghcmVzcG9uc2Uuc3RhdHVzIHx8ICF2YWxpZGF0ZVN0YXR1cyB8fCB2YWxpZGF0ZVN0YXR1cyhyZXNwb25zZS5zdGF0dXMpKSB7XG4gICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gIH0gZWxzZSB7XG4gICAgcmVqZWN0KGNyZWF0ZUVycm9yKFxuICAgICAgJ1JlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUgJyArIHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgIHJlc3BvbnNlLmNvbmZpZyxcbiAgICAgIG51bGwsXG4gICAgICByZXNwb25zZS5yZXF1ZXN0LFxuICAgICAgcmVzcG9uc2VcbiAgICApKTtcbiAgfVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChcbiAgdXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSA/XG5cbiAgLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIHN1cHBvcnQgZG9jdW1lbnQuY29va2llXG4gICAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZShuYW1lLCB2YWx1ZSwgZXhwaXJlcywgcGF0aCwgZG9tYWluLCBzZWN1cmUpIHtcbiAgICAgICAgICB2YXIgY29va2llID0gW107XG4gICAgICAgICAgY29va2llLnB1c2gobmFtZSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xuXG4gICAgICAgICAgaWYgKHV0aWxzLmlzTnVtYmVyKGV4cGlyZXMpKSB7XG4gICAgICAgICAgICBjb29raWUucHVzaCgnZXhwaXJlcz0nICsgbmV3IERhdGUoZXhwaXJlcykudG9HTVRTdHJpbmcoKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHV0aWxzLmlzU3RyaW5nKHBhdGgpKSB7XG4gICAgICAgICAgICBjb29raWUucHVzaCgncGF0aD0nICsgcGF0aCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHV0aWxzLmlzU3RyaW5nKGRvbWFpbikpIHtcbiAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdkb21haW49JyArIGRvbWFpbik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlY3VyZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29va2llLnB1c2goJ3NlY3VyZScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZS5qb2luKCc7ICcpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQobmFtZSkge1xuICAgICAgICAgIHZhciBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKCcoXnw7XFxcXHMqKSgnICsgbmFtZSArICcpPShbXjtdKiknKSk7XG4gICAgICAgICAgcmV0dXJuIChtYXRjaCA/IGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFszXSkgOiBudWxsKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShuYW1lKSB7XG4gICAgICAgICAgdGhpcy53cml0ZShuYW1lLCAnJywgRGF0ZS5ub3coKSAtIDg2NDAwMDAwKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnYgKHdlYiB3b3JrZXJzLCByZWFjdC1uYXRpdmUpIGxhY2sgbmVlZGVkIHN1cHBvcnQuXG4gICAgKGZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZSgpIHt9LFxuICAgICAgICByZWFkOiBmdW5jdGlvbiByZWFkKCkgeyByZXR1cm4gbnVsbDsgfSxcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7fVxuICAgICAgfTtcbiAgICB9KSgpXG4pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNBYnNvbHV0ZVVSTCh1cmwpIHtcbiAgLy8gQSBVUkwgaXMgY29uc2lkZXJlZCBhYnNvbHV0ZSBpZiBpdCBiZWdpbnMgd2l0aCBcIjxzY2hlbWU+Oi8vXCIgb3IgXCIvL1wiIChwcm90b2NvbC1yZWxhdGl2ZSBVUkwpLlxuICAvLyBSRkMgMzk4NiBkZWZpbmVzIHNjaGVtZSBuYW1lIGFzIGEgc2VxdWVuY2Ugb2YgY2hhcmFjdGVycyBiZWdpbm5pbmcgd2l0aCBhIGxldHRlciBhbmQgZm9sbG93ZWRcbiAgLy8gYnkgYW55IGNvbWJpbmF0aW9uIG9mIGxldHRlcnMsIGRpZ2l0cywgcGx1cywgcGVyaW9kLCBvciBoeXBoZW4uXG4gIHJldHVybiAvXihbYS16XVthLXpcXGRcXCtcXC1cXC5dKjopP1xcL1xcLy9pLnRlc3QodXJsKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBVUkwgYnkgY29tYmluaW5nIHRoZSBzcGVjaWZpZWQgVVJMc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVVJMIFRoZSByZWxhdGl2ZSBVUkxcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjb21iaW5lZCBVUkxcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjb21iaW5lVVJMcyhiYXNlVVJMLCByZWxhdGl2ZVVSTCkge1xuICByZXR1cm4gcmVsYXRpdmVVUkxcbiAgICA/IGJhc2VVUkwucmVwbGFjZSgvXFwvKyQvLCAnJykgKyAnLycgKyByZWxhdGl2ZVVSTC5yZXBsYWNlKC9eXFwvKy8sICcnKVxuICAgIDogYmFzZVVSTDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBpc0Fic29sdXRlVVJMID0gcmVxdWlyZSgnLi4vaGVscGVycy9pc0Fic29sdXRlVVJMJyk7XG52YXIgY29tYmluZVVSTHMgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2NvbWJpbmVVUkxzJyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBVUkwgYnkgY29tYmluaW5nIHRoZSBiYXNlVVJMIHdpdGggdGhlIHJlcXVlc3RlZFVSTCxcbiAqIG9ubHkgd2hlbiB0aGUgcmVxdWVzdGVkVVJMIGlzIG5vdCBhbHJlYWR5IGFuIGFic29sdXRlIFVSTC5cbiAqIElmIHRoZSByZXF1ZXN0VVJMIGlzIGFic29sdXRlLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHJlcXVlc3RlZFVSTCB1bnRvdWNoZWQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkwgVGhlIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVxdWVzdGVkVVJMIEFic29sdXRlIG9yIHJlbGF0aXZlIFVSTCB0byBjb21iaW5lXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgZnVsbCBwYXRoXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYnVpbGRGdWxsUGF0aChiYXNlVVJMLCByZXF1ZXN0ZWRVUkwpIHtcbiAgaWYgKGJhc2VVUkwgJiYgIWlzQWJzb2x1dGVVUkwocmVxdWVzdGVkVVJMKSkge1xuICAgIHJldHVybiBjb21iaW5lVVJMcyhiYXNlVVJMLCByZXF1ZXN0ZWRVUkwpO1xuICB9XG4gIHJldHVybiByZXF1ZXN0ZWRVUkw7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbi8vIEhlYWRlcnMgd2hvc2UgZHVwbGljYXRlcyBhcmUgaWdub3JlZCBieSBub2RlXG4vLyBjLmYuIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvaHR0cC5odG1sI2h0dHBfbWVzc2FnZV9oZWFkZXJzXG52YXIgaWdub3JlRHVwbGljYXRlT2YgPSBbXG4gICdhZ2UnLCAnYXV0aG9yaXphdGlvbicsICdjb250ZW50LWxlbmd0aCcsICdjb250ZW50LXR5cGUnLCAnZXRhZycsXG4gICdleHBpcmVzJywgJ2Zyb20nLCAnaG9zdCcsICdpZi1tb2RpZmllZC1zaW5jZScsICdpZi11bm1vZGlmaWVkLXNpbmNlJyxcbiAgJ2xhc3QtbW9kaWZpZWQnLCAnbG9jYXRpb24nLCAnbWF4LWZvcndhcmRzJywgJ3Byb3h5LWF1dGhvcml6YXRpb24nLFxuICAncmVmZXJlcicsICdyZXRyeS1hZnRlcicsICd1c2VyLWFnZW50J1xuXTtcblxuLyoqXG4gKiBQYXJzZSBoZWFkZXJzIGludG8gYW4gb2JqZWN0XG4gKlxuICogYGBgXG4gKiBEYXRlOiBXZWQsIDI3IEF1ZyAyMDE0IDA4OjU4OjQ5IEdNVFxuICogQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uXG4gKiBDb25uZWN0aW9uOiBrZWVwLWFsaXZlXG4gKiBUcmFuc2Zlci1FbmNvZGluZzogY2h1bmtlZFxuICogYGBgXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGhlYWRlcnMgSGVhZGVycyBuZWVkaW5nIHRvIGJlIHBhcnNlZFxuICogQHJldHVybnMge09iamVjdH0gSGVhZGVycyBwYXJzZWQgaW50byBhbiBvYmplY3RcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXJzZUhlYWRlcnMoaGVhZGVycykge1xuICB2YXIgcGFyc2VkID0ge307XG4gIHZhciBrZXk7XG4gIHZhciB2YWw7XG4gIHZhciBpO1xuXG4gIGlmICghaGVhZGVycykgeyByZXR1cm4gcGFyc2VkOyB9XG5cbiAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLnNwbGl0KCdcXG4nKSwgZnVuY3Rpb24gcGFyc2VyKGxpbmUpIHtcbiAgICBpID0gbGluZS5pbmRleE9mKCc6Jyk7XG4gICAga2V5ID0gdXRpbHMudHJpbShsaW5lLnN1YnN0cigwLCBpKSkudG9Mb3dlckNhc2UoKTtcbiAgICB2YWwgPSB1dGlscy50cmltKGxpbmUuc3Vic3RyKGkgKyAxKSk7XG5cbiAgICBpZiAoa2V5KSB7XG4gICAgICBpZiAocGFyc2VkW2tleV0gJiYgaWdub3JlRHVwbGljYXRlT2YuaW5kZXhPZihrZXkpID49IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGtleSA9PT0gJ3NldC1jb29raWUnKSB7XG4gICAgICAgIHBhcnNlZFtrZXldID0gKHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gOiBbXSkuY29uY2F0KFt2YWxdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnNlZFtrZXldID0gcGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSArICcsICcgKyB2YWwgOiB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcGFyc2VkO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChcbiAgdXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSA/XG5cbiAgLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIGhhdmUgZnVsbCBzdXBwb3J0IG9mIHRoZSBBUElzIG5lZWRlZCB0byB0ZXN0XG4gIC8vIHdoZXRoZXIgdGhlIHJlcXVlc3QgVVJMIGlzIG9mIHRoZSBzYW1lIG9yaWdpbiBhcyBjdXJyZW50IGxvY2F0aW9uLlxuICAgIChmdW5jdGlvbiBzdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgICB2YXIgbXNpZSA9IC8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICB2YXIgdXJsUGFyc2luZ05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICB2YXIgb3JpZ2luVVJMO1xuXG4gICAgICAvKipcbiAgICAqIFBhcnNlIGEgVVJMIHRvIGRpc2NvdmVyIGl0J3MgY29tcG9uZW50c1xuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgVGhlIFVSTCB0byBiZSBwYXJzZWRcbiAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgKi9cbiAgICAgIGZ1bmN0aW9uIHJlc29sdmVVUkwodXJsKSB7XG4gICAgICAgIHZhciBocmVmID0gdXJsO1xuXG4gICAgICAgIGlmIChtc2llKSB7XG4gICAgICAgIC8vIElFIG5lZWRzIGF0dHJpYnV0ZSBzZXQgdHdpY2UgdG8gbm9ybWFsaXplIHByb3BlcnRpZXNcbiAgICAgICAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcbiAgICAgICAgICBocmVmID0gdXJsUGFyc2luZ05vZGUuaHJlZjtcbiAgICAgICAgfVxuXG4gICAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuXG4gICAgICAgIC8vIHVybFBhcnNpbmdOb2RlIHByb3ZpZGVzIHRoZSBVcmxVdGlscyBpbnRlcmZhY2UgLSBodHRwOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsdXRpbHNcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBocmVmOiB1cmxQYXJzaW5nTm9kZS5ocmVmLFxuICAgICAgICAgIHByb3RvY29sOiB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbCA/IHVybFBhcnNpbmdOb2RlLnByb3RvY29sLnJlcGxhY2UoLzokLywgJycpIDogJycsXG4gICAgICAgICAgaG9zdDogdXJsUGFyc2luZ05vZGUuaG9zdCxcbiAgICAgICAgICBzZWFyY2g6IHVybFBhcnNpbmdOb2RlLnNlYXJjaCA/IHVybFBhcnNpbmdOb2RlLnNlYXJjaC5yZXBsYWNlKC9eXFw/LywgJycpIDogJycsXG4gICAgICAgICAgaGFzaDogdXJsUGFyc2luZ05vZGUuaGFzaCA/IHVybFBhcnNpbmdOb2RlLmhhc2gucmVwbGFjZSgvXiMvLCAnJykgOiAnJyxcbiAgICAgICAgICBob3N0bmFtZTogdXJsUGFyc2luZ05vZGUuaG9zdG5hbWUsXG4gICAgICAgICAgcG9ydDogdXJsUGFyc2luZ05vZGUucG9ydCxcbiAgICAgICAgICBwYXRobmFtZTogKHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nKSA/XG4gICAgICAgICAgICB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZSA6XG4gICAgICAgICAgICAnLycgKyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBvcmlnaW5VUkwgPSByZXNvbHZlVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblxuICAgICAgLyoqXG4gICAgKiBEZXRlcm1pbmUgaWYgYSBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiBhcyB0aGUgY3VycmVudCBsb2NhdGlvblxuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1ZXN0VVJMIFRoZSBVUkwgdG8gdGVzdFxuICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4sIG90aGVyd2lzZSBmYWxzZVxuICAgICovXG4gICAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKHJlcXVlc3RVUkwpIHtcbiAgICAgICAgdmFyIHBhcnNlZCA9ICh1dGlscy5pc1N0cmluZyhyZXF1ZXN0VVJMKSkgPyByZXNvbHZlVVJMKHJlcXVlc3RVUkwpIDogcmVxdWVzdFVSTDtcbiAgICAgICAgcmV0dXJuIChwYXJzZWQucHJvdG9jb2wgPT09IG9yaWdpblVSTC5wcm90b2NvbCAmJlxuICAgICAgICAgICAgcGFyc2VkLmhvc3QgPT09IG9yaWdpblVSTC5ob3N0KTtcbiAgICAgIH07XG4gICAgfSkoKSA6XG5cbiAgLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52cyAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cbiAgICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbigpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9O1xuICAgIH0pKClcbik7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQSBgQ2FuY2VsYCBpcyBhbiBvYmplY3QgdGhhdCBpcyB0aHJvd24gd2hlbiBhbiBvcGVyYXRpb24gaXMgY2FuY2VsZWQuXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge3N0cmluZz19IG1lc3NhZ2UgVGhlIG1lc3NhZ2UuXG4gKi9cbmZ1bmN0aW9uIENhbmNlbChtZXNzYWdlKSB7XG4gIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG59XG5cbkNhbmNlbC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgcmV0dXJuICdDYW5jZWwnICsgKHRoaXMubWVzc2FnZSA/ICc6ICcgKyB0aGlzLm1lc3NhZ2UgOiAnJyk7XG59O1xuXG5DYW5jZWwucHJvdG90eXBlLl9fQ0FOQ0VMX18gPSB0cnVlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbDtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIHNldHRsZSA9IHJlcXVpcmUoJy4vLi4vY29yZS9zZXR0bGUnKTtcbnZhciBjb29raWVzID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2Nvb2tpZXMnKTtcbnZhciBidWlsZFVSTCA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9idWlsZFVSTCcpO1xudmFyIGJ1aWxkRnVsbFBhdGggPSByZXF1aXJlKCcuLi9jb3JlL2J1aWxkRnVsbFBhdGgnKTtcbnZhciBwYXJzZUhlYWRlcnMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvcGFyc2VIZWFkZXJzJyk7XG52YXIgaXNVUkxTYW1lT3JpZ2luID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpbicpO1xudmFyIGNyZWF0ZUVycm9yID0gcmVxdWlyZSgnLi4vY29yZS9jcmVhdGVFcnJvcicpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi4vZGVmYXVsdHMnKTtcbnZhciBDYW5jZWwgPSByZXF1aXJlKCcuLi9jYW5jZWwvQ2FuY2VsJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24geGhyQWRhcHRlcihjb25maWcpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGRpc3BhdGNoWGhyUmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcmVxdWVzdERhdGEgPSBjb25maWcuZGF0YTtcbiAgICB2YXIgcmVxdWVzdEhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcbiAgICB2YXIgcmVzcG9uc2VUeXBlID0gY29uZmlnLnJlc3BvbnNlVHlwZTtcbiAgICB2YXIgb25DYW5jZWxlZDtcbiAgICBmdW5jdGlvbiBkb25lKCkge1xuICAgICAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuICAgICAgICBjb25maWcuY2FuY2VsVG9rZW4udW5zdWJzY3JpYmUob25DYW5jZWxlZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjb25maWcuc2lnbmFsKSB7XG4gICAgICAgIGNvbmZpZy5zaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBvbkNhbmNlbGVkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShyZXF1ZXN0RGF0YSkpIHtcbiAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1snQ29udGVudC1UeXBlJ107IC8vIExldCB0aGUgYnJvd3NlciBzZXQgaXRcbiAgICB9XG5cbiAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgLy8gSFRUUCBiYXNpYyBhdXRoZW50aWNhdGlvblxuICAgIGlmIChjb25maWcuYXV0aCkge1xuICAgICAgdmFyIHVzZXJuYW1lID0gY29uZmlnLmF1dGgudXNlcm5hbWUgfHwgJyc7XG4gICAgICB2YXIgcGFzc3dvcmQgPSBjb25maWcuYXV0aC5wYXNzd29yZCA/IHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChjb25maWcuYXV0aC5wYXNzd29yZCkpIDogJyc7XG4gICAgICByZXF1ZXN0SGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0Jhc2ljICcgKyBidG9hKHVzZXJuYW1lICsgJzonICsgcGFzc3dvcmQpO1xuICAgIH1cblxuICAgIHZhciBmdWxsUGF0aCA9IGJ1aWxkRnVsbFBhdGgoY29uZmlnLmJhc2VVUkwsIGNvbmZpZy51cmwpO1xuICAgIHJlcXVlc3Qub3Blbihjb25maWcubWV0aG9kLnRvVXBwZXJDYXNlKCksIGJ1aWxkVVJMKGZ1bGxQYXRoLCBjb25maWcucGFyYW1zLCBjb25maWcucGFyYW1zU2VyaWFsaXplciksIHRydWUpO1xuXG4gICAgLy8gU2V0IHRoZSByZXF1ZXN0IHRpbWVvdXQgaW4gTVNcbiAgICByZXF1ZXN0LnRpbWVvdXQgPSBjb25maWcudGltZW91dDtcblxuICAgIGZ1bmN0aW9uIG9ubG9hZGVuZCgpIHtcbiAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBQcmVwYXJlIHRoZSByZXNwb25zZVxuICAgICAgdmFyIHJlc3BvbnNlSGVhZGVycyA9ICdnZXRBbGxSZXNwb25zZUhlYWRlcnMnIGluIHJlcXVlc3QgPyBwYXJzZUhlYWRlcnMocmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkgOiBudWxsO1xuICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9ICFyZXNwb25zZVR5cGUgfHwgcmVzcG9uc2VUeXBlID09PSAndGV4dCcgfHwgIHJlc3BvbnNlVHlwZSA9PT0gJ2pzb24nID9cbiAgICAgICAgcmVxdWVzdC5yZXNwb25zZVRleHQgOiByZXF1ZXN0LnJlc3BvbnNlO1xuICAgICAgdmFyIHJlc3BvbnNlID0ge1xuICAgICAgICBkYXRhOiByZXNwb25zZURhdGEsXG4gICAgICAgIHN0YXR1czogcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgIHN0YXR1c1RleHQ6IHJlcXVlc3Quc3RhdHVzVGV4dCxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgICAgcmVxdWVzdDogcmVxdWVzdFxuICAgICAgfTtcblxuICAgICAgc2V0dGxlKGZ1bmN0aW9uIF9yZXNvbHZlKHZhbHVlKSB7XG4gICAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9LCBmdW5jdGlvbiBfcmVqZWN0KGVycikge1xuICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSwgcmVzcG9uc2UpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoJ29ubG9hZGVuZCcgaW4gcmVxdWVzdCkge1xuICAgICAgLy8gVXNlIG9ubG9hZGVuZCBpZiBhdmFpbGFibGVcbiAgICAgIHJlcXVlc3Qub25sb2FkZW5kID0gb25sb2FkZW5kO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBMaXN0ZW4gZm9yIHJlYWR5IHN0YXRlIHRvIGVtdWxhdGUgb25sb2FkZW5kXG4gICAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUxvYWQoKSB7XG4gICAgICAgIGlmICghcmVxdWVzdCB8fCByZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGUgcmVxdWVzdCBlcnJvcmVkIG91dCBhbmQgd2UgZGlkbid0IGdldCBhIHJlc3BvbnNlLCB0aGlzIHdpbGwgYmVcbiAgICAgICAgLy8gaGFuZGxlZCBieSBvbmVycm9yIGluc3RlYWRcbiAgICAgICAgLy8gV2l0aCBvbmUgZXhjZXB0aW9uOiByZXF1ZXN0IHRoYXQgdXNpbmcgZmlsZTogcHJvdG9jb2wsIG1vc3QgYnJvd3NlcnNcbiAgICAgICAgLy8gd2lsbCByZXR1cm4gc3RhdHVzIGFzIDAgZXZlbiB0aG91Z2ggaXQncyBhIHN1Y2Nlc3NmdWwgcmVxdWVzdFxuICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDAgJiYgIShyZXF1ZXN0LnJlc3BvbnNlVVJMICYmIHJlcXVlc3QucmVzcG9uc2VVUkwuaW5kZXhPZignZmlsZTonKSA9PT0gMCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVhZHlzdGF0ZSBoYW5kbGVyIGlzIGNhbGxpbmcgYmVmb3JlIG9uZXJyb3Igb3Igb250aW1lb3V0IGhhbmRsZXJzLFxuICAgICAgICAvLyBzbyB3ZSBzaG91bGQgY2FsbCBvbmxvYWRlbmQgb24gdGhlIG5leHQgJ3RpY2snXG4gICAgICAgIHNldFRpbWVvdXQob25sb2FkZW5kKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGJyb3dzZXIgcmVxdWVzdCBjYW5jZWxsYXRpb24gKGFzIG9wcG9zZWQgdG8gYSBtYW51YWwgY2FuY2VsbGF0aW9uKVxuICAgIHJlcXVlc3Qub25hYm9ydCA9IGZ1bmN0aW9uIGhhbmRsZUFib3J0KCkge1xuICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCdSZXF1ZXN0IGFib3J0ZWQnLCBjb25maWcsICdFQ09OTkFCT1JURUQnLCByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgbG93IGxldmVsIG5ldHdvcmsgZXJyb3JzXG4gICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gaGFuZGxlRXJyb3IoKSB7XG4gICAgICAvLyBSZWFsIGVycm9ycyBhcmUgaGlkZGVuIGZyb20gdXMgYnkgdGhlIGJyb3dzZXJcbiAgICAgIC8vIG9uZXJyb3Igc2hvdWxkIG9ubHkgZmlyZSBpZiBpdCdzIGEgbmV0d29yayBlcnJvclxuICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCdOZXR3b3JrIEVycm9yJywgY29uZmlnLCBudWxsLCByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgdGltZW91dFxuICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHtcbiAgICAgIHZhciB0aW1lb3V0RXJyb3JNZXNzYWdlID0gY29uZmlnLnRpbWVvdXQgPyAndGltZW91dCBvZiAnICsgY29uZmlnLnRpbWVvdXQgKyAnbXMgZXhjZWVkZWQnIDogJ3RpbWVvdXQgZXhjZWVkZWQnO1xuICAgICAgdmFyIHRyYW5zaXRpb25hbCA9IGNvbmZpZy50cmFuc2l0aW9uYWwgfHwgZGVmYXVsdHMudHJhbnNpdGlvbmFsO1xuICAgICAgaWYgKGNvbmZpZy50aW1lb3V0RXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIHRpbWVvdXRFcnJvck1lc3NhZ2UgPSBjb25maWcudGltZW91dEVycm9yTWVzc2FnZTtcbiAgICAgIH1cbiAgICAgIHJlamVjdChjcmVhdGVFcnJvcihcbiAgICAgICAgdGltZW91dEVycm9yTWVzc2FnZSxcbiAgICAgICAgY29uZmlnLFxuICAgICAgICB0cmFuc2l0aW9uYWwuY2xhcmlmeVRpbWVvdXRFcnJvciA/ICdFVElNRURPVVQnIDogJ0VDT05OQUJPUlRFRCcsXG4gICAgICAgIHJlcXVlc3QpKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEFkZCB4c3JmIGhlYWRlclxuICAgIC8vIFRoaXMgaXMgb25seSBkb25lIGlmIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50LlxuICAgIC8vIFNwZWNpZmljYWxseSBub3QgaWYgd2UncmUgaW4gYSB3ZWIgd29ya2VyLCBvciByZWFjdC1uYXRpdmUuXG4gICAgaWYgKHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkpIHtcbiAgICAgIC8vIEFkZCB4c3JmIGhlYWRlclxuICAgICAgdmFyIHhzcmZWYWx1ZSA9IChjb25maWcud2l0aENyZWRlbnRpYWxzIHx8IGlzVVJMU2FtZU9yaWdpbihmdWxsUGF0aCkpICYmIGNvbmZpZy54c3JmQ29va2llTmFtZSA/XG4gICAgICAgIGNvb2tpZXMucmVhZChjb25maWcueHNyZkNvb2tpZU5hbWUpIDpcbiAgICAgICAgdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoeHNyZlZhbHVlKSB7XG4gICAgICAgIHJlcXVlc3RIZWFkZXJzW2NvbmZpZy54c3JmSGVhZGVyTmFtZV0gPSB4c3JmVmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIGhlYWRlcnMgdG8gdGhlIHJlcXVlc3RcbiAgICBpZiAoJ3NldFJlcXVlc3RIZWFkZXInIGluIHJlcXVlc3QpIHtcbiAgICAgIHV0aWxzLmZvckVhY2gocmVxdWVzdEhlYWRlcnMsIGZ1bmN0aW9uIHNldFJlcXVlc3RIZWFkZXIodmFsLCBrZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiByZXF1ZXN0RGF0YSA9PT0gJ3VuZGVmaW5lZCcgJiYga2V5LnRvTG93ZXJDYXNlKCkgPT09ICdjb250ZW50LXR5cGUnKSB7XG4gICAgICAgICAgLy8gUmVtb3ZlIENvbnRlbnQtVHlwZSBpZiBkYXRhIGlzIHVuZGVmaW5lZFxuICAgICAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1trZXldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE90aGVyd2lzZSBhZGQgaGVhZGVyIHRvIHRoZSByZXF1ZXN0XG4gICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgdmFsKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHdpdGhDcmVkZW50aWFscyB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoY29uZmlnLndpdGhDcmVkZW50aWFscykpIHtcbiAgICAgIHJlcXVlc3Qud2l0aENyZWRlbnRpYWxzID0gISFjb25maWcud2l0aENyZWRlbnRpYWxzO1xuICAgIH1cblxuICAgIC8vIEFkZCByZXNwb25zZVR5cGUgdG8gcmVxdWVzdCBpZiBuZWVkZWRcbiAgICBpZiAocmVzcG9uc2VUeXBlICYmIHJlc3BvbnNlVHlwZSAhPT0gJ2pzb24nKSB7XG4gICAgICByZXF1ZXN0LnJlc3BvbnNlVHlwZSA9IGNvbmZpZy5yZXNwb25zZVR5cGU7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHByb2dyZXNzIGlmIG5lZWRlZFxuICAgIGlmICh0eXBlb2YgY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MpO1xuICAgIH1cblxuICAgIC8vIE5vdCBhbGwgYnJvd3NlcnMgc3VwcG9ydCB1cGxvYWQgZXZlbnRzXG4gICAgaWYgKHR5cGVvZiBjb25maWcub25VcGxvYWRQcm9ncmVzcyA9PT0gJ2Z1bmN0aW9uJyAmJiByZXF1ZXN0LnVwbG9hZCkge1xuICAgICAgcmVxdWVzdC51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBjb25maWcub25VcGxvYWRQcm9ncmVzcyk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbiB8fCBjb25maWcuc2lnbmFsKSB7XG4gICAgICAvLyBIYW5kbGUgY2FuY2VsbGF0aW9uXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICAgICAgb25DYW5jZWxlZCA9IGZ1bmN0aW9uKGNhbmNlbCkge1xuICAgICAgICBpZiAoIXJlcXVlc3QpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVqZWN0KCFjYW5jZWwgfHwgKGNhbmNlbCAmJiBjYW5jZWwudHlwZSkgPyBuZXcgQ2FuY2VsKCdjYW5jZWxlZCcpIDogY2FuY2VsKTtcbiAgICAgICAgcmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICAgIH07XG5cbiAgICAgIGNvbmZpZy5jYW5jZWxUb2tlbiAmJiBjb25maWcuY2FuY2VsVG9rZW4uc3Vic2NyaWJlKG9uQ2FuY2VsZWQpO1xuICAgICAgaWYgKGNvbmZpZy5zaWduYWwpIHtcbiAgICAgICAgY29uZmlnLnNpZ25hbC5hYm9ydGVkID8gb25DYW5jZWxlZCgpIDogY29uZmlnLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIG9uQ2FuY2VsZWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghcmVxdWVzdERhdGEpIHtcbiAgICAgIHJlcXVlc3REYXRhID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBTZW5kIHRoZSByZXF1ZXN0XG4gICAgcmVxdWVzdC5zZW5kKHJlcXVlc3REYXRhKTtcbiAgfSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgbm9ybWFsaXplSGVhZGVyTmFtZSA9IHJlcXVpcmUoJy4vaGVscGVycy9ub3JtYWxpemVIZWFkZXJOYW1lJyk7XG52YXIgZW5oYW5jZUVycm9yID0gcmVxdWlyZSgnLi9jb3JlL2VuaGFuY2VFcnJvcicpO1xuXG52YXIgREVGQVVMVF9DT05URU5UX1RZUEUgPSB7XG4gICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ1xufTtcblxuZnVuY3Rpb24gc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsIHZhbHVlKSB7XG4gIGlmICghdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVycykgJiYgdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVyc1snQ29udGVudC1UeXBlJ10pKSB7XG4gICAgaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSB2YWx1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXREZWZhdWx0QWRhcHRlcigpIHtcbiAgdmFyIGFkYXB0ZXI7XG4gIGlmICh0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gRm9yIGJyb3dzZXJzIHVzZSBYSFIgYWRhcHRlclxuICAgIGFkYXB0ZXIgPSByZXF1aXJlKCcuL2FkYXB0ZXJzL3hocicpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJykge1xuICAgIC8vIEZvciBub2RlIHVzZSBIVFRQIGFkYXB0ZXJcbiAgICBhZGFwdGVyID0gcmVxdWlyZSgnLi9hZGFwdGVycy9odHRwJyk7XG4gIH1cbiAgcmV0dXJuIGFkYXB0ZXI7XG59XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeVNhZmVseShyYXdWYWx1ZSwgcGFyc2VyLCBlbmNvZGVyKSB7XG4gIGlmICh1dGlscy5pc1N0cmluZyhyYXdWYWx1ZSkpIHtcbiAgICB0cnkge1xuICAgICAgKHBhcnNlciB8fCBKU09OLnBhcnNlKShyYXdWYWx1ZSk7XG4gICAgICByZXR1cm4gdXRpbHMudHJpbShyYXdWYWx1ZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGUubmFtZSAhPT0gJ1N5bnRheEVycm9yJykge1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiAoZW5jb2RlciB8fCBKU09OLnN0cmluZ2lmeSkocmF3VmFsdWUpO1xufVxuXG52YXIgZGVmYXVsdHMgPSB7XG5cbiAgdHJhbnNpdGlvbmFsOiB7XG4gICAgc2lsZW50SlNPTlBhcnNpbmc6IHRydWUsXG4gICAgZm9yY2VkSlNPTlBhcnNpbmc6IHRydWUsXG4gICAgY2xhcmlmeVRpbWVvdXRFcnJvcjogZmFsc2VcbiAgfSxcblxuICBhZGFwdGVyOiBnZXREZWZhdWx0QWRhcHRlcigpLFxuXG4gIHRyYW5zZm9ybVJlcXVlc3Q6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXF1ZXN0KGRhdGEsIGhlYWRlcnMpIHtcbiAgICBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsICdBY2NlcHQnKTtcbiAgICBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsICdDb250ZW50LVR5cGUnKTtcblxuICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0FycmF5QnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0J1ZmZlcihkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNTdHJlYW0oZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzRmlsZShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNCbG9iKGRhdGEpXG4gICAgKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzQXJyYXlCdWZmZXJWaWV3KGRhdGEpKSB7XG4gICAgICByZXR1cm4gZGF0YS5idWZmZXI7XG4gICAgfVxuICAgIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhkYXRhKSkge1xuICAgICAgc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCcpO1xuICAgICAgcmV0dXJuIGRhdGEudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzT2JqZWN0KGRhdGEpIHx8IChoZWFkZXJzICYmIGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID09PSAnYXBwbGljYXRpb24vanNvbicpKSB7XG4gICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIHJldHVybiBzdHJpbmdpZnlTYWZlbHkoZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICB0cmFuc2Zvcm1SZXNwb25zZTogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKGRhdGEpIHtcbiAgICB2YXIgdHJhbnNpdGlvbmFsID0gdGhpcy50cmFuc2l0aW9uYWwgfHwgZGVmYXVsdHMudHJhbnNpdGlvbmFsO1xuICAgIHZhciBzaWxlbnRKU09OUGFyc2luZyA9IHRyYW5zaXRpb25hbCAmJiB0cmFuc2l0aW9uYWwuc2lsZW50SlNPTlBhcnNpbmc7XG4gICAgdmFyIGZvcmNlZEpTT05QYXJzaW5nID0gdHJhbnNpdGlvbmFsICYmIHRyYW5zaXRpb25hbC5mb3JjZWRKU09OUGFyc2luZztcbiAgICB2YXIgc3RyaWN0SlNPTlBhcnNpbmcgPSAhc2lsZW50SlNPTlBhcnNpbmcgJiYgdGhpcy5yZXNwb25zZVR5cGUgPT09ICdqc29uJztcblxuICAgIGlmIChzdHJpY3RKU09OUGFyc2luZyB8fCAoZm9yY2VkSlNPTlBhcnNpbmcgJiYgdXRpbHMuaXNTdHJpbmcoZGF0YSkgJiYgZGF0YS5sZW5ndGgpKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKHN0cmljdEpTT05QYXJzaW5nKSB7XG4gICAgICAgICAgaWYgKGUubmFtZSA9PT0gJ1N5bnRheEVycm9yJykge1xuICAgICAgICAgICAgdGhyb3cgZW5oYW5jZUVycm9yKGUsIHRoaXMsICdFX0pTT05fUEFSU0UnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICAvKipcbiAgICogQSB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcyB0byBhYm9ydCBhIHJlcXVlc3QuIElmIHNldCB0byAwIChkZWZhdWx0KSBhXG4gICAqIHRpbWVvdXQgaXMgbm90IGNyZWF0ZWQuXG4gICAqL1xuICB0aW1lb3V0OiAwLFxuXG4gIHhzcmZDb29raWVOYW1lOiAnWFNSRi1UT0tFTicsXG4gIHhzcmZIZWFkZXJOYW1lOiAnWC1YU1JGLVRPS0VOJyxcblxuICBtYXhDb250ZW50TGVuZ3RoOiAtMSxcbiAgbWF4Qm9keUxlbmd0aDogLTEsXG5cbiAgdmFsaWRhdGVTdGF0dXM6IGZ1bmN0aW9uIHZhbGlkYXRlU3RhdHVzKHN0YXR1cykge1xuICAgIHJldHVybiBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMDtcbiAgfSxcblxuICBoZWFkZXJzOiB7XG4gICAgY29tbW9uOiB7XG4gICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKidcbiAgICB9XG4gIH1cbn07XG5cbnV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YShtZXRob2QpIHtcbiAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0ge307XG59KTtcblxudXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2QpIHtcbiAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0gdXRpbHMubWVyZ2UoREVGQVVMVF9DT05URU5UX1RZUEUpO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZGVmYXVsdHM7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vLi4vZGVmYXVsdHMnKTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIGRhdGEgZm9yIGEgcmVxdWVzdCBvciBhIHJlc3BvbnNlXG4gKlxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBkYXRhIFRoZSBkYXRhIHRvIGJlIHRyYW5zZm9ybWVkXG4gKiBAcGFyYW0ge0FycmF5fSBoZWFkZXJzIFRoZSBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdCBvciByZXNwb25zZVxuICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbn0gZm5zIEEgc2luZ2xlIGZ1bmN0aW9uIG9yIEFycmF5IG9mIGZ1bmN0aW9uc1xuICogQHJldHVybnMgeyp9IFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtZWQgZGF0YVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZGF0YSwgaGVhZGVycywgZm5zKSB7XG4gIHZhciBjb250ZXh0ID0gdGhpcyB8fCBkZWZhdWx0cztcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIHV0aWxzLmZvckVhY2goZm5zLCBmdW5jdGlvbiB0cmFuc2Zvcm0oZm4pIHtcbiAgICBkYXRhID0gZm4uY2FsbChjb250ZXh0LCBkYXRhLCBoZWFkZXJzKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGRhdGE7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQ2FuY2VsKHZhbHVlKSB7XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZS5fX0NBTkNFTF9fKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciB0cmFuc2Zvcm1EYXRhID0gcmVxdWlyZSgnLi90cmFuc2Zvcm1EYXRhJyk7XG52YXIgaXNDYW5jZWwgPSByZXF1aXJlKCcuLi9jYW5jZWwvaXNDYW5jZWwnKTtcbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJy4uL2RlZmF1bHRzJyk7XG52YXIgQ2FuY2VsID0gcmVxdWlyZSgnLi4vY2FuY2VsL0NhbmNlbCcpO1xuXG4vKipcbiAqIFRocm93cyBhIGBDYW5jZWxgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gKi9cbmZ1bmN0aW9uIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKSB7XG4gIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHtcbiAgICBjb25maWcuY2FuY2VsVG9rZW4udGhyb3dJZlJlcXVlc3RlZCgpO1xuICB9XG5cbiAgaWYgKGNvbmZpZy5zaWduYWwgJiYgY29uZmlnLnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgdGhyb3cgbmV3IENhbmNlbCgnY2FuY2VsZWQnKTtcbiAgfVxufVxuXG4vKipcbiAqIERpc3BhdGNoIGEgcmVxdWVzdCB0byB0aGUgc2VydmVyIHVzaW5nIHRoZSBjb25maWd1cmVkIGFkYXB0ZXIuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnIHRoYXQgaXMgdG8gYmUgdXNlZCBmb3IgdGhlIHJlcXVlc3RcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgUHJvbWlzZSB0byBiZSBmdWxmaWxsZWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkaXNwYXRjaFJlcXVlc3QoY29uZmlnKSB7XG4gIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAvLyBFbnN1cmUgaGVhZGVycyBleGlzdFxuICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xuXG4gIC8vIFRyYW5zZm9ybSByZXF1ZXN0IGRhdGFcbiAgY29uZmlnLmRhdGEgPSB0cmFuc2Zvcm1EYXRhLmNhbGwoXG4gICAgY29uZmlnLFxuICAgIGNvbmZpZy5kYXRhLFxuICAgIGNvbmZpZy5oZWFkZXJzLFxuICAgIGNvbmZpZy50cmFuc2Zvcm1SZXF1ZXN0XG4gICk7XG5cbiAgLy8gRmxhdHRlbiBoZWFkZXJzXG4gIGNvbmZpZy5oZWFkZXJzID0gdXRpbHMubWVyZ2UoXG4gICAgY29uZmlnLmhlYWRlcnMuY29tbW9uIHx8IHt9LFxuICAgIGNvbmZpZy5oZWFkZXJzW2NvbmZpZy5tZXRob2RdIHx8IHt9LFxuICAgIGNvbmZpZy5oZWFkZXJzXG4gICk7XG5cbiAgdXRpbHMuZm9yRWFjaChcbiAgICBbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdwb3N0JywgJ3B1dCcsICdwYXRjaCcsICdjb21tb24nXSxcbiAgICBmdW5jdGlvbiBjbGVhbkhlYWRlckNvbmZpZyhtZXRob2QpIHtcbiAgICAgIGRlbGV0ZSBjb25maWcuaGVhZGVyc1ttZXRob2RdO1xuICAgIH1cbiAgKTtcblxuICB2YXIgYWRhcHRlciA9IGNvbmZpZy5hZGFwdGVyIHx8IGRlZmF1bHRzLmFkYXB0ZXI7XG5cbiAgcmV0dXJuIGFkYXB0ZXIoY29uZmlnKS50aGVuKGZ1bmN0aW9uIG9uQWRhcHRlclJlc29sdXRpb24ocmVzcG9uc2UpIHtcbiAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuICAgIHJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhLmNhbGwoXG4gICAgICBjb25maWcsXG4gICAgICByZXNwb25zZS5kYXRhLFxuICAgICAgcmVzcG9uc2UuaGVhZGVycyxcbiAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuICAgICk7XG5cbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH0sIGZ1bmN0aW9uIG9uQWRhcHRlclJlamVjdGlvbihyZWFzb24pIHtcbiAgICBpZiAoIWlzQ2FuY2VsKHJlYXNvbikpIHtcbiAgICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAgICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcbiAgICAgIGlmIChyZWFzb24gJiYgcmVhc29uLnJlc3BvbnNlKSB7XG4gICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YS5jYWxsKFxuICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICByZWFzb24ucmVzcG9uc2UuZGF0YSxcbiAgICAgICAgICByZWFzb24ucmVzcG9uc2UuaGVhZGVycyxcbiAgICAgICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTtcbiAgfSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG4vKipcbiAqIENvbmZpZy1zcGVjaWZpYyBtZXJnZS1mdW5jdGlvbiB3aGljaCBjcmVhdGVzIGEgbmV3IGNvbmZpZy1vYmplY3RcbiAqIGJ5IG1lcmdpbmcgdHdvIGNvbmZpZ3VyYXRpb24gb2JqZWN0cyB0b2dldGhlci5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnMVxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZzJcbiAqIEByZXR1cm5zIHtPYmplY3R9IE5ldyBvYmplY3QgcmVzdWx0aW5nIGZyb20gbWVyZ2luZyBjb25maWcyIHRvIGNvbmZpZzFcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtZXJnZUNvbmZpZyhjb25maWcxLCBjb25maWcyKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICBjb25maWcyID0gY29uZmlnMiB8fCB7fTtcbiAgdmFyIGNvbmZpZyA9IHt9O1xuXG4gIGZ1bmN0aW9uIGdldE1lcmdlZFZhbHVlKHRhcmdldCwgc291cmNlKSB7XG4gICAgaWYgKHV0aWxzLmlzUGxhaW5PYmplY3QodGFyZ2V0KSAmJiB1dGlscy5pc1BsYWluT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIHJldHVybiB1dGlscy5tZXJnZSh0YXJnZXQsIHNvdXJjZSk7XG4gICAgfSBlbHNlIGlmICh1dGlscy5pc1BsYWluT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIHJldHVybiB1dGlscy5tZXJnZSh7fSwgc291cmNlKTtcbiAgICB9IGVsc2UgaWYgKHV0aWxzLmlzQXJyYXkoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHNvdXJjZS5zbGljZSgpO1xuICAgIH1cbiAgICByZXR1cm4gc291cmNlO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIG1lcmdlRGVlcFByb3BlcnRpZXMocHJvcCkge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoY29uZmlnMltwcm9wXSkpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZShjb25maWcxW3Byb3BdLCBjb25maWcyW3Byb3BdKTtcbiAgICB9IGVsc2UgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcxW3Byb3BdKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgY29uZmlnMVtwcm9wXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIHZhbHVlRnJvbUNvbmZpZzIocHJvcCkge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoY29uZmlnMltwcm9wXSkpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh1bmRlZmluZWQsIGNvbmZpZzJbcHJvcF0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICBmdW5jdGlvbiBkZWZhdWx0VG9Db25maWcyKHByb3ApIHtcbiAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZzJbcHJvcF0pKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBjb25maWcyW3Byb3BdKTtcbiAgICB9IGVsc2UgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcxW3Byb3BdKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgY29uZmlnMVtwcm9wXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIG1lcmdlRGlyZWN0S2V5cyhwcm9wKSB7XG4gICAgaWYgKHByb3AgaW4gY29uZmlnMikge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKGNvbmZpZzFbcHJvcF0sIGNvbmZpZzJbcHJvcF0pO1xuICAgIH0gZWxzZSBpZiAocHJvcCBpbiBjb25maWcxKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBjb25maWcxW3Byb3BdKTtcbiAgICB9XG4gIH1cblxuICB2YXIgbWVyZ2VNYXAgPSB7XG4gICAgJ3VybCc6IHZhbHVlRnJvbUNvbmZpZzIsXG4gICAgJ21ldGhvZCc6IHZhbHVlRnJvbUNvbmZpZzIsXG4gICAgJ2RhdGEnOiB2YWx1ZUZyb21Db25maWcyLFxuICAgICdiYXNlVVJMJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAndHJhbnNmb3JtUmVxdWVzdCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3RyYW5zZm9ybVJlc3BvbnNlJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAncGFyYW1zU2VyaWFsaXplcic6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3RpbWVvdXQnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICd0aW1lb3V0TWVzc2FnZSc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3dpdGhDcmVkZW50aWFscyc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2FkYXB0ZXInOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdyZXNwb25zZVR5cGUnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICd4c3JmQ29va2llTmFtZSc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3hzcmZIZWFkZXJOYW1lJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnb25VcGxvYWRQcm9ncmVzcyc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ29uRG93bmxvYWRQcm9ncmVzcyc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2RlY29tcHJlc3MnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdtYXhDb250ZW50TGVuZ3RoJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnbWF4Qm9keUxlbmd0aCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3RyYW5zcG9ydCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2h0dHBBZ2VudCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2h0dHBzQWdlbnQnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdjYW5jZWxUb2tlbic6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3NvY2tldFBhdGgnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdyZXNwb25zZUVuY29kaW5nJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAndmFsaWRhdGVTdGF0dXMnOiBtZXJnZURpcmVjdEtleXNcbiAgfTtcblxuICB1dGlscy5mb3JFYWNoKE9iamVjdC5rZXlzKGNvbmZpZzEpLmNvbmNhdChPYmplY3Qua2V5cyhjb25maWcyKSksIGZ1bmN0aW9uIGNvbXB1dGVDb25maWdWYWx1ZShwcm9wKSB7XG4gICAgdmFyIG1lcmdlID0gbWVyZ2VNYXBbcHJvcF0gfHwgbWVyZ2VEZWVwUHJvcGVydGllcztcbiAgICB2YXIgY29uZmlnVmFsdWUgPSBtZXJnZShwcm9wKTtcbiAgICAodXRpbHMuaXNVbmRlZmluZWQoY29uZmlnVmFsdWUpICYmIG1lcmdlICE9PSBtZXJnZURpcmVjdEtleXMpIHx8IChjb25maWdbcHJvcF0gPSBjb25maWdWYWx1ZSk7XG4gIH0pO1xuXG4gIHJldHVybiBjb25maWc7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gIFwidmVyc2lvblwiOiBcIjAuMjMuMFwiXG59OyIsIid1c2Ugc3RyaWN0JztcblxudmFyIFZFUlNJT04gPSByZXF1aXJlKCcuLi9lbnYvZGF0YScpLnZlcnNpb247XG5cbnZhciB2YWxpZGF0b3JzID0ge307XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5bJ29iamVjdCcsICdib29sZWFuJywgJ251bWJlcicsICdmdW5jdGlvbicsICdzdHJpbmcnLCAnc3ltYm9sJ10uZm9yRWFjaChmdW5jdGlvbih0eXBlLCBpKSB7XG4gIHZhbGlkYXRvcnNbdHlwZV0gPSBmdW5jdGlvbiB2YWxpZGF0b3IodGhpbmcpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaW5nID09PSB0eXBlIHx8ICdhJyArIChpIDwgMSA/ICduICcgOiAnICcpICsgdHlwZTtcbiAgfTtcbn0pO1xuXG52YXIgZGVwcmVjYXRlZFdhcm5pbmdzID0ge307XG5cbi8qKlxuICogVHJhbnNpdGlvbmFsIG9wdGlvbiB2YWxpZGF0b3JcbiAqIEBwYXJhbSB7ZnVuY3Rpb258Ym9vbGVhbj99IHZhbGlkYXRvciAtIHNldCB0byBmYWxzZSBpZiB0aGUgdHJhbnNpdGlvbmFsIG9wdGlvbiBoYXMgYmVlbiByZW1vdmVkXG4gKiBAcGFyYW0ge3N0cmluZz99IHZlcnNpb24gLSBkZXByZWNhdGVkIHZlcnNpb24gLyByZW1vdmVkIHNpbmNlIHZlcnNpb25cbiAqIEBwYXJhbSB7c3RyaW5nP30gbWVzc2FnZSAtIHNvbWUgbWVzc2FnZSB3aXRoIGFkZGl0aW9uYWwgaW5mb1xuICogQHJldHVybnMge2Z1bmN0aW9ufVxuICovXG52YWxpZGF0b3JzLnRyYW5zaXRpb25hbCA9IGZ1bmN0aW9uIHRyYW5zaXRpb25hbCh2YWxpZGF0b3IsIHZlcnNpb24sIG1lc3NhZ2UpIHtcbiAgZnVuY3Rpb24gZm9ybWF0TWVzc2FnZShvcHQsIGRlc2MpIHtcbiAgICByZXR1cm4gJ1tBeGlvcyB2JyArIFZFUlNJT04gKyAnXSBUcmFuc2l0aW9uYWwgb3B0aW9uIFxcJycgKyBvcHQgKyAnXFwnJyArIGRlc2MgKyAobWVzc2FnZSA/ICcuICcgKyBtZXNzYWdlIDogJycpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBvcHQsIG9wdHMpIHtcbiAgICBpZiAodmFsaWRhdG9yID09PSBmYWxzZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdE1lc3NhZ2Uob3B0LCAnIGhhcyBiZWVuIHJlbW92ZWQnICsgKHZlcnNpb24gPyAnIGluICcgKyB2ZXJzaW9uIDogJycpKSk7XG4gICAgfVxuXG4gICAgaWYgKHZlcnNpb24gJiYgIWRlcHJlY2F0ZWRXYXJuaW5nc1tvcHRdKSB7XG4gICAgICBkZXByZWNhdGVkV2FybmluZ3Nbb3B0XSA9IHRydWU7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBmb3JtYXRNZXNzYWdlKFxuICAgICAgICAgIG9wdCxcbiAgICAgICAgICAnIGhhcyBiZWVuIGRlcHJlY2F0ZWQgc2luY2UgdicgKyB2ZXJzaW9uICsgJyBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZWFyIGZ1dHVyZSdcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsaWRhdG9yID8gdmFsaWRhdG9yKHZhbHVlLCBvcHQsIG9wdHMpIDogdHJ1ZTtcbiAgfTtcbn07XG5cbi8qKlxuICogQXNzZXJ0IG9iamVjdCdzIHByb3BlcnRpZXMgdHlwZVxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7b2JqZWN0fSBzY2hlbWFcbiAqIEBwYXJhbSB7Ym9vbGVhbj99IGFsbG93VW5rbm93blxuICovXG5cbmZ1bmN0aW9uIGFzc2VydE9wdGlvbnMob3B0aW9ucywgc2NoZW1hLCBhbGxvd1Vua25vd24pIHtcbiAgaWYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbnMgbXVzdCBiZSBhbiBvYmplY3QnKTtcbiAgfVxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9wdGlvbnMpO1xuICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuICB3aGlsZSAoaS0tID4gMCkge1xuICAgIHZhciBvcHQgPSBrZXlzW2ldO1xuICAgIHZhciB2YWxpZGF0b3IgPSBzY2hlbWFbb3B0XTtcbiAgICBpZiAodmFsaWRhdG9yKSB7XG4gICAgICB2YXIgdmFsdWUgPSBvcHRpb25zW29wdF07XG4gICAgICB2YXIgcmVzdWx0ID0gdmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWxpZGF0b3IodmFsdWUsIG9wdCwgb3B0aW9ucyk7XG4gICAgICBpZiAocmVzdWx0ICE9PSB0cnVlKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbiAnICsgb3B0ICsgJyBtdXN0IGJlICcgKyByZXN1bHQpO1xuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChhbGxvd1Vua25vd24gIT09IHRydWUpIHtcbiAgICAgIHRocm93IEVycm9yKCdVbmtub3duIG9wdGlvbiAnICsgb3B0KTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFzc2VydE9wdGlvbnM6IGFzc2VydE9wdGlvbnMsXG4gIHZhbGlkYXRvcnM6IHZhbGlkYXRvcnNcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBidWlsZFVSTCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvYnVpbGRVUkwnKTtcbnZhciBJbnRlcmNlcHRvck1hbmFnZXIgPSByZXF1aXJlKCcuL0ludGVyY2VwdG9yTWFuYWdlcicpO1xudmFyIGRpc3BhdGNoUmVxdWVzdCA9IHJlcXVpcmUoJy4vZGlzcGF0Y2hSZXF1ZXN0Jyk7XG52YXIgbWVyZ2VDb25maWcgPSByZXF1aXJlKCcuL21lcmdlQ29uZmlnJyk7XG52YXIgdmFsaWRhdG9yID0gcmVxdWlyZSgnLi4vaGVscGVycy92YWxpZGF0b3InKTtcblxudmFyIHZhbGlkYXRvcnMgPSB2YWxpZGF0b3IudmFsaWRhdG9ycztcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEF4aW9zXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlQ29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIEF4aW9zKGluc3RhbmNlQ29uZmlnKSB7XG4gIHRoaXMuZGVmYXVsdHMgPSBpbnN0YW5jZUNvbmZpZztcbiAgdGhpcy5pbnRlcmNlcHRvcnMgPSB7XG4gICAgcmVxdWVzdDogbmV3IEludGVyY2VwdG9yTWFuYWdlcigpLFxuICAgIHJlc3BvbnNlOiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKClcbiAgfTtcbn1cblxuLyoqXG4gKiBEaXNwYXRjaCBhIHJlcXVlc3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcgc3BlY2lmaWMgZm9yIHRoaXMgcmVxdWVzdCAobWVyZ2VkIHdpdGggdGhpcy5kZWZhdWx0cylcbiAqL1xuQXhpb3MucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KGNvbmZpZykge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgLy8gQWxsb3cgZm9yIGF4aW9zKCdleGFtcGxlL3VybCdbLCBjb25maWddKSBhIGxhIGZldGNoIEFQSVxuICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25maWcgPSBhcmd1bWVudHNbMV0gfHwge307XG4gICAgY29uZmlnLnVybCA9IGFyZ3VtZW50c1swXTtcbiAgfSBlbHNlIHtcbiAgICBjb25maWcgPSBjb25maWcgfHwge307XG4gIH1cblxuICBjb25maWcgPSBtZXJnZUNvbmZpZyh0aGlzLmRlZmF1bHRzLCBjb25maWcpO1xuXG4gIC8vIFNldCBjb25maWcubWV0aG9kXG4gIGlmIChjb25maWcubWV0aG9kKSB7XG4gICAgY29uZmlnLm1ldGhvZCA9IGNvbmZpZy5tZXRob2QudG9Mb3dlckNhc2UoKTtcbiAgfSBlbHNlIGlmICh0aGlzLmRlZmF1bHRzLm1ldGhvZCkge1xuICAgIGNvbmZpZy5tZXRob2QgPSB0aGlzLmRlZmF1bHRzLm1ldGhvZC50b0xvd2VyQ2FzZSgpO1xuICB9IGVsc2Uge1xuICAgIGNvbmZpZy5tZXRob2QgPSAnZ2V0JztcbiAgfVxuXG4gIHZhciB0cmFuc2l0aW9uYWwgPSBjb25maWcudHJhbnNpdGlvbmFsO1xuXG4gIGlmICh0cmFuc2l0aW9uYWwgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhbGlkYXRvci5hc3NlcnRPcHRpb25zKHRyYW5zaXRpb25hbCwge1xuICAgICAgc2lsZW50SlNPTlBhcnNpbmc6IHZhbGlkYXRvcnMudHJhbnNpdGlvbmFsKHZhbGlkYXRvcnMuYm9vbGVhbiksXG4gICAgICBmb3JjZWRKU09OUGFyc2luZzogdmFsaWRhdG9ycy50cmFuc2l0aW9uYWwodmFsaWRhdG9ycy5ib29sZWFuKSxcbiAgICAgIGNsYXJpZnlUaW1lb3V0RXJyb3I6IHZhbGlkYXRvcnMudHJhbnNpdGlvbmFsKHZhbGlkYXRvcnMuYm9vbGVhbilcbiAgICB9LCBmYWxzZSk7XG4gIH1cblxuICAvLyBmaWx0ZXIgb3V0IHNraXBwZWQgaW50ZXJjZXB0b3JzXG4gIHZhciByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbiA9IFtdO1xuICB2YXIgc3luY2hyb25vdXNSZXF1ZXN0SW50ZXJjZXB0b3JzID0gdHJ1ZTtcbiAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uIHVuc2hpZnRSZXF1ZXN0SW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgaWYgKHR5cGVvZiBpbnRlcmNlcHRvci5ydW5XaGVuID09PSAnZnVuY3Rpb24nICYmIGludGVyY2VwdG9yLnJ1bldoZW4oY29uZmlnKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzeW5jaHJvbm91c1JlcXVlc3RJbnRlcmNlcHRvcnMgPSBzeW5jaHJvbm91c1JlcXVlc3RJbnRlcmNlcHRvcnMgJiYgaW50ZXJjZXB0b3Iuc3luY2hyb25vdXM7XG5cbiAgICByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbi51bnNoaWZ0KGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuICB9KTtcblxuICB2YXIgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluID0gW107XG4gIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluLnB1c2goaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7XG4gIH0pO1xuXG4gIHZhciBwcm9taXNlO1xuXG4gIGlmICghc3luY2hyb25vdXNSZXF1ZXN0SW50ZXJjZXB0b3JzKSB7XG4gICAgdmFyIGNoYWluID0gW2Rpc3BhdGNoUmVxdWVzdCwgdW5kZWZpbmVkXTtcblxuICAgIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGNoYWluLCByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbik7XG4gICAgY2hhaW4gPSBjaGFpbi5jb25jYXQocmVzcG9uc2VJbnRlcmNlcHRvckNoYWluKTtcblxuICAgIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoY29uZmlnKTtcbiAgICB3aGlsZSAoY2hhaW4ubGVuZ3RoKSB7XG4gICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGNoYWluLnNoaWZ0KCksIGNoYWluLnNoaWZ0KCkpO1xuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9XG5cblxuICB2YXIgbmV3Q29uZmlnID0gY29uZmlnO1xuICB3aGlsZSAocmVxdWVzdEludGVyY2VwdG9yQ2hhaW4ubGVuZ3RoKSB7XG4gICAgdmFyIG9uRnVsZmlsbGVkID0gcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4uc2hpZnQoKTtcbiAgICB2YXIgb25SZWplY3RlZCA9IHJlcXVlc3RJbnRlcmNlcHRvckNoYWluLnNoaWZ0KCk7XG4gICAgdHJ5IHtcbiAgICAgIG5ld0NvbmZpZyA9IG9uRnVsZmlsbGVkKG5ld0NvbmZpZyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG9uUmVqZWN0ZWQoZXJyb3IpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgdHJ5IHtcbiAgICBwcm9taXNlID0gZGlzcGF0Y2hSZXF1ZXN0KG5ld0NvbmZpZyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgfVxuXG4gIHdoaWxlIChyZXNwb25zZUludGVyY2VwdG9yQ2hhaW4ubGVuZ3RoKSB7XG4gICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihyZXNwb25zZUludGVyY2VwdG9yQ2hhaW4uc2hpZnQoKSwgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluLnNoaWZ0KCkpO1xuICB9XG5cbiAgcmV0dXJuIHByb21pc2U7XG59O1xuXG5BeGlvcy5wcm90b3R5cGUuZ2V0VXJpID0gZnVuY3Rpb24gZ2V0VXJpKGNvbmZpZykge1xuICBjb25maWcgPSBtZXJnZUNvbmZpZyh0aGlzLmRlZmF1bHRzLCBjb25maWcpO1xuICByZXR1cm4gYnVpbGRVUkwoY29uZmlnLnVybCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpLnJlcGxhY2UoL15cXD8vLCAnJyk7XG59O1xuXG4vLyBQcm92aWRlIGFsaWFzZXMgZm9yIHN1cHBvcnRlZCByZXF1ZXN0IG1ldGhvZHNcbnV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAnb3B0aW9ucyddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChtZXJnZUNvbmZpZyhjb25maWcgfHwge30sIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgdXJsOiB1cmwsXG4gICAgICBkYXRhOiAoY29uZmlnIHx8IHt9KS5kYXRhXG4gICAgfSkpO1xuICB9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KG1lcmdlQ29uZmlnKGNvbmZpZyB8fCB7fSwge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICB1cmw6IHVybCxcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9KSk7XG4gIH07XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBBeGlvcztcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIENhbmNlbCA9IHJlcXVpcmUoJy4vQ2FuY2VsJyk7XG5cbi8qKlxuICogQSBgQ2FuY2VsVG9rZW5gIGlzIGFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlcXVlc3QgY2FuY2VsbGF0aW9uIG9mIGFuIG9wZXJhdGlvbi5cbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGV4ZWN1dG9yIFRoZSBleGVjdXRvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gQ2FuY2VsVG9rZW4oZXhlY3V0b3IpIHtcbiAgaWYgKHR5cGVvZiBleGVjdXRvciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4ZWN1dG9yIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbiAgfVxuXG4gIHZhciByZXNvbHZlUHJvbWlzZTtcblxuICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiBwcm9taXNlRXhlY3V0b3IocmVzb2x2ZSkge1xuICAgIHJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTtcbiAgfSk7XG5cbiAgdmFyIHRva2VuID0gdGhpcztcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICB0aGlzLnByb21pc2UudGhlbihmdW5jdGlvbihjYW5jZWwpIHtcbiAgICBpZiAoIXRva2VuLl9saXN0ZW5lcnMpIHJldHVybjtcblxuICAgIHZhciBpO1xuICAgIHZhciBsID0gdG9rZW4uX2xpc3RlbmVycy5sZW5ndGg7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICB0b2tlbi5fbGlzdGVuZXJzW2ldKGNhbmNlbCk7XG4gICAgfVxuICAgIHRva2VuLl9saXN0ZW5lcnMgPSBudWxsO1xuICB9KTtcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICB0aGlzLnByb21pc2UudGhlbiA9IGZ1bmN0aW9uKG9uZnVsZmlsbGVkKSB7XG4gICAgdmFyIF9yZXNvbHZlO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XG4gICAgICB0b2tlbi5zdWJzY3JpYmUocmVzb2x2ZSk7XG4gICAgICBfcmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgfSkudGhlbihvbmZ1bGZpbGxlZCk7XG5cbiAgICBwcm9taXNlLmNhbmNlbCA9IGZ1bmN0aW9uIHJlamVjdCgpIHtcbiAgICAgIHRva2VuLnVuc3Vic2NyaWJlKF9yZXNvbHZlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH07XG5cbiAgZXhlY3V0b3IoZnVuY3Rpb24gY2FuY2VsKG1lc3NhZ2UpIHtcbiAgICBpZiAodG9rZW4ucmVhc29uKSB7XG4gICAgICAvLyBDYW5jZWxsYXRpb24gaGFzIGFscmVhZHkgYmVlbiByZXF1ZXN0ZWRcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0b2tlbi5yZWFzb24gPSBuZXcgQ2FuY2VsKG1lc3NhZ2UpO1xuICAgIHJlc29sdmVQcm9taXNlKHRva2VuLnJlYXNvbik7XG4gIH0pO1xufVxuXG4vKipcbiAqIFRocm93cyBhIGBDYW5jZWxgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gKi9cbkNhbmNlbFRva2VuLnByb3RvdHlwZS50aHJvd0lmUmVxdWVzdGVkID0gZnVuY3Rpb24gdGhyb3dJZlJlcXVlc3RlZCgpIHtcbiAgaWYgKHRoaXMucmVhc29uKSB7XG4gICAgdGhyb3cgdGhpcy5yZWFzb247XG4gIH1cbn07XG5cbi8qKlxuICogU3Vic2NyaWJlIHRvIHRoZSBjYW5jZWwgc2lnbmFsXG4gKi9cblxuQ2FuY2VsVG9rZW4ucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIHN1YnNjcmliZShsaXN0ZW5lcikge1xuICBpZiAodGhpcy5yZWFzb24pIHtcbiAgICBsaXN0ZW5lcih0aGlzLnJlYXNvbik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHRoaXMuX2xpc3RlbmVycykge1xuICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMgPSBbbGlzdGVuZXJdO1xuICB9XG59O1xuXG4vKipcbiAqIFVuc3Vic2NyaWJlIGZyb20gdGhlIGNhbmNlbCBzaWduYWxcbiAqL1xuXG5DYW5jZWxUb2tlbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiB1bnN1YnNjcmliZShsaXN0ZW5lcikge1xuICBpZiAoIXRoaXMuX2xpc3RlbmVycykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgaW5kZXggPSB0aGlzLl9saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICB0aGlzLl9saXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgbmV3IGBDYW5jZWxUb2tlbmAgYW5kIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsXG4gKiBjYW5jZWxzIHRoZSBgQ2FuY2VsVG9rZW5gLlxuICovXG5DYW5jZWxUb2tlbi5zb3VyY2UgPSBmdW5jdGlvbiBzb3VyY2UoKSB7XG4gIHZhciBjYW5jZWw7XG4gIHZhciB0b2tlbiA9IG5ldyBDYW5jZWxUb2tlbihmdW5jdGlvbiBleGVjdXRvcihjKSB7XG4gICAgY2FuY2VsID0gYztcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgdG9rZW46IHRva2VuLFxuICAgIGNhbmNlbDogY2FuY2VsXG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbFRva2VuO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFN5bnRhY3RpYyBzdWdhciBmb3IgaW52b2tpbmcgYSBmdW5jdGlvbiBhbmQgZXhwYW5kaW5nIGFuIGFycmF5IGZvciBhcmd1bWVudHMuXG4gKlxuICogQ29tbW9uIHVzZSBjYXNlIHdvdWxkIGJlIHRvIHVzZSBgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5YC5cbiAqXG4gKiAgYGBganNcbiAqICBmdW5jdGlvbiBmKHgsIHksIHopIHt9XG4gKiAgdmFyIGFyZ3MgPSBbMSwgMiwgM107XG4gKiAgZi5hcHBseShudWxsLCBhcmdzKTtcbiAqICBgYGBcbiAqXG4gKiBXaXRoIGBzcHJlYWRgIHRoaXMgZXhhbXBsZSBjYW4gYmUgcmUtd3JpdHRlbi5cbiAqXG4gKiAgYGBganNcbiAqICBzcHJlYWQoZnVuY3Rpb24oeCwgeSwgeikge30pKFsxLCAyLCAzXSk7XG4gKiAgYGBgXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzcHJlYWQoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoYXJyKSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFycik7XG4gIH07XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgcGF5bG9hZCBpcyBhbiBlcnJvciB0aHJvd24gYnkgQXhpb3NcbiAqXG4gKiBAcGFyYW0geyp9IHBheWxvYWQgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBwYXlsb2FkIGlzIGFuIGVycm9yIHRocm93biBieSBBeGlvcywgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNBeGlvc0Vycm9yKHBheWxvYWQpIHtcbiAgcmV0dXJuICh0eXBlb2YgcGF5bG9hZCA9PT0gJ29iamVjdCcpICYmIChwYXlsb2FkLmlzQXhpb3NFcnJvciA9PT0gdHJ1ZSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgYmluZCA9IHJlcXVpcmUoJy4vaGVscGVycy9iaW5kJyk7XG52YXIgQXhpb3MgPSByZXF1aXJlKCcuL2NvcmUvQXhpb3MnKTtcbnZhciBtZXJnZUNvbmZpZyA9IHJlcXVpcmUoJy4vY29yZS9tZXJnZUNvbmZpZycpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi9kZWZhdWx0cycpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBBeGlvc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0Q29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKiBAcmV0dXJuIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdENvbmZpZykge1xuICB2YXIgY29udGV4dCA9IG5ldyBBeGlvcyhkZWZhdWx0Q29uZmlnKTtcbiAgdmFyIGluc3RhbmNlID0gYmluZChBeGlvcy5wcm90b3R5cGUucmVxdWVzdCwgY29udGV4dCk7XG5cbiAgLy8gQ29weSBheGlvcy5wcm90b3R5cGUgdG8gaW5zdGFuY2VcbiAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBBeGlvcy5wcm90b3R5cGUsIGNvbnRleHQpO1xuXG4gIC8vIENvcHkgY29udGV4dCB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIGNvbnRleHQpO1xuXG4gIC8vIEZhY3RvcnkgZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZXNcbiAgaW5zdGFuY2UuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGluc3RhbmNlQ29uZmlnKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUluc3RhbmNlKG1lcmdlQ29uZmlnKGRlZmF1bHRDb25maWcsIGluc3RhbmNlQ29uZmlnKSk7XG4gIH07XG5cbiAgcmV0dXJuIGluc3RhbmNlO1xufVxuXG4vLyBDcmVhdGUgdGhlIGRlZmF1bHQgaW5zdGFuY2UgdG8gYmUgZXhwb3J0ZWRcbnZhciBheGlvcyA9IGNyZWF0ZUluc3RhbmNlKGRlZmF1bHRzKTtcblxuLy8gRXhwb3NlIEF4aW9zIGNsYXNzIHRvIGFsbG93IGNsYXNzIGluaGVyaXRhbmNlXG5heGlvcy5BeGlvcyA9IEF4aW9zO1xuXG4vLyBFeHBvc2UgQ2FuY2VsICYgQ2FuY2VsVG9rZW5cbmF4aW9zLkNhbmNlbCA9IHJlcXVpcmUoJy4vY2FuY2VsL0NhbmNlbCcpO1xuYXhpb3MuQ2FuY2VsVG9rZW4gPSByZXF1aXJlKCcuL2NhbmNlbC9DYW5jZWxUb2tlbicpO1xuYXhpb3MuaXNDYW5jZWwgPSByZXF1aXJlKCcuL2NhbmNlbC9pc0NhbmNlbCcpO1xuYXhpb3MuVkVSU0lPTiA9IHJlcXVpcmUoJy4vZW52L2RhdGEnKS52ZXJzaW9uO1xuXG4vLyBFeHBvc2UgYWxsL3NwcmVhZFxuYXhpb3MuYWxsID0gZnVuY3Rpb24gYWxsKHByb21pc2VzKSB7XG4gIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG59O1xuYXhpb3Muc3ByZWFkID0gcmVxdWlyZSgnLi9oZWxwZXJzL3NwcmVhZCcpO1xuXG4vLyBFeHBvc2UgaXNBeGlvc0Vycm9yXG5heGlvcy5pc0F4aW9zRXJyb3IgPSByZXF1aXJlKCcuL2hlbHBlcnMvaXNBeGlvc0Vycm9yJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXhpb3M7XG5cbi8vIEFsbG93IHVzZSBvZiBkZWZhdWx0IGltcG9ydCBzeW50YXggaW4gVHlwZVNjcmlwdFxubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGF4aW9zO1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9heGlvcycpOyIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4ndXNlIHN0cmljdCc7XG5cbi8vIElmIG9iai5oYXNPd25Qcm9wZXJ0eSBoYXMgYmVlbiBvdmVycmlkZGVuLCB0aGVuIGNhbGxpbmdcbi8vIG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSB3aWxsIGJyZWFrLlxuLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vam95ZW50L25vZGUvaXNzdWVzLzE3MDdcbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocXMsIHNlcCwgZXEsIG9wdGlvbnMpIHtcbiAgc2VwID0gc2VwIHx8ICcmJztcbiAgZXEgPSBlcSB8fCAnPSc7XG4gIHZhciBvYmogPSB7fTtcblxuICBpZiAodHlwZW9mIHFzICE9PSAnc3RyaW5nJyB8fCBxcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgdmFyIHJlZ2V4cCA9IC9cXCsvZztcbiAgcXMgPSBxcy5zcGxpdChzZXApO1xuXG4gIHZhciBtYXhLZXlzID0gMTAwMDtcbiAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMubWF4S2V5cyA9PT0gJ251bWJlcicpIHtcbiAgICBtYXhLZXlzID0gb3B0aW9ucy5tYXhLZXlzO1xuICB9XG5cbiAgdmFyIGxlbiA9IHFzLmxlbmd0aDtcbiAgLy8gbWF4S2V5cyA8PSAwIG1lYW5zIHRoYXQgd2Ugc2hvdWxkIG5vdCBsaW1pdCBrZXlzIGNvdW50XG4gIGlmIChtYXhLZXlzID4gMCAmJiBsZW4gPiBtYXhLZXlzKSB7XG4gICAgbGVuID0gbWF4S2V5cztcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICB2YXIgeCA9IHFzW2ldLnJlcGxhY2UocmVnZXhwLCAnJTIwJyksXG4gICAgICAgIGlkeCA9IHguaW5kZXhPZihlcSksXG4gICAgICAgIGtzdHIsIHZzdHIsIGssIHY7XG5cbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgIGtzdHIgPSB4LnN1YnN0cigwLCBpZHgpO1xuICAgICAgdnN0ciA9IHguc3Vic3RyKGlkeCArIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBrc3RyID0geDtcbiAgICAgIHZzdHIgPSAnJztcbiAgICB9XG5cbiAgICBrID0gZGVjb2RlVVJJQ29tcG9uZW50KGtzdHIpO1xuICAgIHYgPSBkZWNvZGVVUklDb21wb25lbnQodnN0cik7XG5cbiAgICBpZiAoIWhhc093blByb3BlcnR5KG9iaiwgaykpIHtcbiAgICAgIG9ialtrXSA9IHY7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG9ialtrXSkpIHtcbiAgICAgIG9ialtrXS5wdXNoKHYpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmpba10gPSBbb2JqW2tdLCB2XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gb2JqO1xufTtcbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBzdHJpbmdpZnlQcmltaXRpdmUgPSBmdW5jdGlvbih2KSB7XG4gIHN3aXRjaCAodHlwZW9mIHYpIHtcbiAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgcmV0dXJuIHY7XG5cbiAgICBjYXNlICdib29sZWFuJzpcbiAgICAgIHJldHVybiB2ID8gJ3RydWUnIDogJ2ZhbHNlJztcblxuICAgIGNhc2UgJ251bWJlcic6XG4gICAgICByZXR1cm4gaXNGaW5pdGUodikgPyB2IDogJyc7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICcnO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaiwgc2VwLCBlcSwgbmFtZSkge1xuICBzZXAgPSBzZXAgfHwgJyYnO1xuICBlcSA9IGVxIHx8ICc9JztcbiAgaWYgKG9iaiA9PT0gbnVsbCkge1xuICAgIG9iaiA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLm1hcChmdW5jdGlvbihrKSB7XG4gICAgICB2YXIga3MgPSBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKGspKSArIGVxO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqW2tdKSkge1xuICAgICAgICByZXR1cm4gb2JqW2tdLm1hcChmdW5jdGlvbih2KSB7XG4gICAgICAgICAgcmV0dXJuIGtzICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZSh2KSk7XG4gICAgICAgIH0pLmpvaW4oc2VwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBrcyArIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUob2JqW2tdKSk7XG4gICAgICB9XG4gICAgfSkuam9pbihzZXApO1xuXG4gIH1cblxuICBpZiAoIW5hbWUpIHJldHVybiAnJztcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUobmFtZSkpICsgZXEgK1xuICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShvYmopKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuZGVjb2RlID0gZXhwb3J0cy5wYXJzZSA9IHJlcXVpcmUoJy4vZGVjb2RlJyk7XG5leHBvcnRzLmVuY29kZSA9IGV4cG9ydHMuc3RyaW5naWZ5ID0gcmVxdWlyZSgnLi9lbmNvZGUnKTtcbiIsIi8vIFVuaXF1ZSBJRCBjcmVhdGlvbiByZXF1aXJlcyBhIGhpZ2ggcXVhbGl0eSByYW5kb20gIyBnZW5lcmF0b3IuIEluIHRoZSBicm93c2VyIHdlIHRoZXJlZm9yZVxuLy8gcmVxdWlyZSB0aGUgY3J5cHRvIEFQSSBhbmQgZG8gbm90IHN1cHBvcnQgYnVpbHQtaW4gZmFsbGJhY2sgdG8gbG93ZXIgcXVhbGl0eSByYW5kb20gbnVtYmVyXG4vLyBnZW5lcmF0b3JzIChsaWtlIE1hdGgucmFuZG9tKCkpLlxudmFyIGdldFJhbmRvbVZhbHVlcztcbnZhciBybmRzOCA9IG5ldyBVaW50OEFycmF5KDE2KTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJuZygpIHtcbiAgLy8gbGF6eSBsb2FkIHNvIHRoYXQgZW52aXJvbm1lbnRzIHRoYXQgbmVlZCB0byBwb2x5ZmlsbCBoYXZlIGEgY2hhbmNlIHRvIGRvIHNvXG4gIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgLy8gZ2V0UmFuZG9tVmFsdWVzIG5lZWRzIHRvIGJlIGludm9rZWQgaW4gYSBjb250ZXh0IHdoZXJlIFwidGhpc1wiIGlzIGEgQ3J5cHRvIGltcGxlbWVudGF0aW9uLiBBbHNvLFxuICAgIC8vIGZpbmQgdGhlIGNvbXBsZXRlIGltcGxlbWVudGF0aW9uIG9mIGNyeXB0byAobXNDcnlwdG8pIG9uIElFMTEuXG4gICAgZ2V0UmFuZG9tVmFsdWVzID0gdHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKSB8fCB0eXBlb2YgbXNDcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBtc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMgPT09ICdmdW5jdGlvbicgJiYgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pO1xuXG4gICAgaWYgKCFnZXRSYW5kb21WYWx1ZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY3J5cHRvLmdldFJhbmRvbVZhbHVlcygpIG5vdCBzdXBwb3J0ZWQuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQjZ2V0cmFuZG9tdmFsdWVzLW5vdC1zdXBwb3J0ZWQnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZ2V0UmFuZG9tVmFsdWVzKHJuZHM4KTtcbn0iLCJleHBvcnQgZGVmYXVsdCAvXig/OlswLTlhLWZdezh9LVswLTlhLWZdezR9LVsxLTVdWzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9fDAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCkkL2k7IiwiaW1wb3J0IFJFR0VYIGZyb20gJy4vcmVnZXguanMnO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZSh1dWlkKSB7XG4gIHJldHVybiB0eXBlb2YgdXVpZCA9PT0gJ3N0cmluZycgJiYgUkVHRVgudGVzdCh1dWlkKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdmFsaWRhdGU7IiwiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG5cbnZhciBieXRlVG9IZXggPSBbXTtcblxuZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc3Vic3RyKDEpKTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KGFycikge1xuICB2YXIgb2Zmc2V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwO1xuICAvLyBOb3RlOiBCZSBjYXJlZnVsIGVkaXRpbmcgdGhpcyBjb2RlISAgSXQncyBiZWVuIHR1bmVkIGZvciBwZXJmb3JtYW5jZVxuICAvLyBhbmQgd29ya3MgaW4gd2F5cyB5b3UgbWF5IG5vdCBleHBlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC80MzRcbiAgdmFyIHV1aWQgPSAoYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAzXV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA2XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDddXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA5XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDExXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEzXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE1XV0pLnRvTG93ZXJDYXNlKCk7IC8vIENvbnNpc3RlbmN5IGNoZWNrIGZvciB2YWxpZCBVVUlELiAgSWYgdGhpcyB0aHJvd3MsIGl0J3MgbGlrZWx5IGR1ZSB0byBvbmVcbiAgLy8gb2YgdGhlIGZvbGxvd2luZzpcbiAgLy8gLSBPbmUgb3IgbW9yZSBpbnB1dCBhcnJheSB2YWx1ZXMgZG9uJ3QgbWFwIHRvIGEgaGV4IG9jdGV0IChsZWFkaW5nIHRvXG4gIC8vIFwidW5kZWZpbmVkXCIgaW4gdGhlIHV1aWQpXG4gIC8vIC0gSW52YWxpZCBpbnB1dCB2YWx1ZXMgZm9yIHRoZSBSRkMgYHZlcnNpb25gIG9yIGB2YXJpYW50YCBmaWVsZHNcblxuICBpZiAoIXZhbGlkYXRlKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWQnKTtcbiAgfVxuXG4gIHJldHVybiB1dWlkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzdHJpbmdpZnk7IiwiaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgc3RyaW5naWZ5IGZyb20gJy4vc3RyaW5naWZ5LmpzJzsgLy8gKipgdjEoKWAgLSBHZW5lcmF0ZSB0aW1lLWJhc2VkIFVVSUQqKlxuLy9cbi8vIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9MaW9zSy9VVUlELmpzXG4vLyBhbmQgaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3V1aWQuaHRtbFxuXG52YXIgX25vZGVJZDtcblxudmFyIF9jbG9ja3NlcTsgLy8gUHJldmlvdXMgdXVpZCBjcmVhdGlvbiB0aW1lXG5cblxudmFyIF9sYXN0TVNlY3MgPSAwO1xudmFyIF9sYXN0TlNlY3MgPSAwOyAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkIGZvciBBUEkgZGV0YWlsc1xuXG5mdW5jdGlvbiB2MShvcHRpb25zLCBidWYsIG9mZnNldCkge1xuICB2YXIgaSA9IGJ1ZiAmJiBvZmZzZXQgfHwgMDtcbiAgdmFyIGIgPSBidWYgfHwgbmV3IEFycmF5KDE2KTtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBub2RlID0gb3B0aW9ucy5ub2RlIHx8IF9ub2RlSWQ7XG4gIHZhciBjbG9ja3NlcSA9IG9wdGlvbnMuY2xvY2tzZXEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xvY2tzZXEgOiBfY2xvY2tzZXE7IC8vIG5vZGUgYW5kIGNsb2Nrc2VxIG5lZWQgdG8gYmUgaW5pdGlhbGl6ZWQgdG8gcmFuZG9tIHZhbHVlcyBpZiB0aGV5J3JlIG5vdFxuICAvLyBzcGVjaWZpZWQuICBXZSBkbyB0aGlzIGxhemlseSB0byBtaW5pbWl6ZSBpc3N1ZXMgcmVsYXRlZCB0byBpbnN1ZmZpY2llbnRcbiAgLy8gc3lzdGVtIGVudHJvcHkuICBTZWUgIzE4OVxuXG4gIGlmIChub2RlID09IG51bGwgfHwgY2xvY2tzZXEgPT0gbnVsbCkge1xuICAgIHZhciBzZWVkQnl0ZXMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpO1xuXG4gICAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuNSwgY3JlYXRlIGFuZCA0OC1iaXQgbm9kZSBpZCwgKDQ3IHJhbmRvbSBiaXRzICsgbXVsdGljYXN0IGJpdCA9IDEpXG4gICAgICBub2RlID0gX25vZGVJZCA9IFtzZWVkQnl0ZXNbMF0gfCAweDAxLCBzZWVkQnl0ZXNbMV0sIHNlZWRCeXRlc1syXSwgc2VlZEJ5dGVzWzNdLCBzZWVkQnl0ZXNbNF0sIHNlZWRCeXRlc1s1XV07XG4gICAgfVxuXG4gICAgaWYgKGNsb2Nrc2VxID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjIuMiwgcmFuZG9taXplICgxNCBiaXQpIGNsb2Nrc2VxXG4gICAgICBjbG9ja3NlcSA9IF9jbG9ja3NlcSA9IChzZWVkQnl0ZXNbNl0gPDwgOCB8IHNlZWRCeXRlc1s3XSkgJiAweDNmZmY7XG4gICAgfVxuICB9IC8vIFVVSUQgdGltZXN0YW1wcyBhcmUgMTAwIG5hbm8tc2Vjb25kIHVuaXRzIHNpbmNlIHRoZSBHcmVnb3JpYW4gZXBvY2gsXG4gIC8vICgxNTgyLTEwLTE1IDAwOjAwKS4gIEpTTnVtYmVycyBhcmVuJ3QgcHJlY2lzZSBlbm91Z2ggZm9yIHRoaXMsIHNvXG4gIC8vIHRpbWUgaXMgaGFuZGxlZCBpbnRlcm5hbGx5IGFzICdtc2VjcycgKGludGVnZXIgbWlsbGlzZWNvbmRzKSBhbmQgJ25zZWNzJ1xuICAvLyAoMTAwLW5hbm9zZWNvbmRzIG9mZnNldCBmcm9tIG1zZWNzKSBzaW5jZSB1bml4IGVwb2NoLCAxOTcwLTAxLTAxIDAwOjAwLlxuXG5cbiAgdmFyIG1zZWNzID0gb3B0aW9ucy5tc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tc2VjcyA6IERhdGUubm93KCk7IC8vIFBlciA0LjIuMS4yLCB1c2UgY291bnQgb2YgdXVpZCdzIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGN1cnJlbnQgY2xvY2tcbiAgLy8gY3ljbGUgdG8gc2ltdWxhdGUgaGlnaGVyIHJlc29sdXRpb24gY2xvY2tcblxuICB2YXIgbnNlY3MgPSBvcHRpb25zLm5zZWNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5zZWNzIDogX2xhc3ROU2VjcyArIDE7IC8vIFRpbWUgc2luY2UgbGFzdCB1dWlkIGNyZWF0aW9uIChpbiBtc2VjcylcblxuICB2YXIgZHQgPSBtc2VjcyAtIF9sYXN0TVNlY3MgKyAobnNlY3MgLSBfbGFzdE5TZWNzKSAvIDEwMDAwOyAvLyBQZXIgNC4yLjEuMiwgQnVtcCBjbG9ja3NlcSBvbiBjbG9jayByZWdyZXNzaW9uXG5cbiAgaWYgKGR0IDwgMCAmJiBvcHRpb25zLmNsb2Nrc2VxID09PSB1bmRlZmluZWQpIHtcbiAgICBjbG9ja3NlcSA9IGNsb2Nrc2VxICsgMSAmIDB4M2ZmZjtcbiAgfSAvLyBSZXNldCBuc2VjcyBpZiBjbG9jayByZWdyZXNzZXMgKG5ldyBjbG9ja3NlcSkgb3Igd2UndmUgbW92ZWQgb250byBhIG5ld1xuICAvLyB0aW1lIGludGVydmFsXG5cblxuICBpZiAoKGR0IDwgMCB8fCBtc2VjcyA+IF9sYXN0TVNlY3MpICYmIG9wdGlvbnMubnNlY3MgPT09IHVuZGVmaW5lZCkge1xuICAgIG5zZWNzID0gMDtcbiAgfSAvLyBQZXIgNC4yLjEuMiBUaHJvdyBlcnJvciBpZiB0b28gbWFueSB1dWlkcyBhcmUgcmVxdWVzdGVkXG5cblxuICBpZiAobnNlY3MgPj0gMTAwMDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1dWlkLnYxKCk6IENhbid0IGNyZWF0ZSBtb3JlIHRoYW4gMTBNIHV1aWRzL3NlY1wiKTtcbiAgfVxuXG4gIF9sYXN0TVNlY3MgPSBtc2VjcztcbiAgX2xhc3ROU2VjcyA9IG5zZWNzO1xuICBfY2xvY2tzZXEgPSBjbG9ja3NlcTsgLy8gUGVyIDQuMS40IC0gQ29udmVydCBmcm9tIHVuaXggZXBvY2ggdG8gR3JlZ29yaWFuIGVwb2NoXG5cbiAgbXNlY3MgKz0gMTIyMTkyOTI4MDAwMDA7IC8vIGB0aW1lX2xvd2BcblxuICB2YXIgdGwgPSAoKG1zZWNzICYgMHhmZmZmZmZmKSAqIDEwMDAwICsgbnNlY3MpICUgMHgxMDAwMDAwMDA7XG4gIGJbaSsrXSA9IHRsID4+PiAyNCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiAxNiAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdGwgJiAweGZmOyAvLyBgdGltZV9taWRgXG5cbiAgdmFyIHRtaCA9IG1zZWNzIC8gMHgxMDAwMDAwMDAgKiAxMDAwMCAmIDB4ZmZmZmZmZjtcbiAgYltpKytdID0gdG1oID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdG1oICYgMHhmZjsgLy8gYHRpbWVfaGlnaF9hbmRfdmVyc2lvbmBcblxuICBiW2krK10gPSB0bWggPj4+IDI0ICYgMHhmIHwgMHgxMDsgLy8gaW5jbHVkZSB2ZXJzaW9uXG5cbiAgYltpKytdID0gdG1oID4+PiAxNiAmIDB4ZmY7IC8vIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYCAoUGVyIDQuMi4yIC0gaW5jbHVkZSB2YXJpYW50KVxuXG4gIGJbaSsrXSA9IGNsb2Nrc2VxID4+PiA4IHwgMHg4MDsgLy8gYGNsb2NrX3NlcV9sb3dgXG5cbiAgYltpKytdID0gY2xvY2tzZXEgJiAweGZmOyAvLyBgbm9kZWBcblxuICBmb3IgKHZhciBuID0gMDsgbiA8IDY7ICsrbikge1xuICAgIGJbaSArIG5dID0gbm9kZVtuXTtcbiAgfVxuXG4gIHJldHVybiBidWYgfHwgc3RyaW5naWZ5KGIpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB2MTsiLCJpbXBvcnQgeyBSZWxhdGlvbnNoaXAgfSBmcm9tICdAeHJlbmdpbmUvY29tbW9uL3NyYy9pbnRlcmZhY2VzL1JlbGF0aW9uc2hpcCdcbmltcG9ydCB7IFVzZXIgfSBmcm9tICdAeHJlbmdpbmUvY29tbW9uL3NyYy9pbnRlcmZhY2VzL1VzZXInXG5cbmV4cG9ydCBjb25zdCBVc2VyQWN0aW9uID0ge1xuICB1c2VyUGF0Y2hlZDogKHVzZXI6IFVzZXIpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ1VTRVJfUEFUQ0hFRCcgYXMgY29uc3QsXG4gICAgICB1c2VyOiB1c2VyXG4gICAgfVxuICB9LFxuXG4gIGxvYWRlZFVzZXJSZWxhdGlvbnNoaXA6IChyZWxhdGlvbnNoaXA6IFJlbGF0aW9uc2hpcCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnTE9BREVEX1JFTEFUSU9OU0hJUCcgYXMgY29uc3QsXG4gICAgICByZWxhdGlvbnNoaXBcbiAgICB9XG4gIH0sXG5cbiAgbG9hZGVkVXNlcnM6ICh1c2VyczogVXNlcltdKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdBRE1JTl9MT0FERURfVVNFUlMnIGFzIGNvbnN0LFxuICAgICAgdXNlcnNcbiAgICB9XG4gIH0sXG5cbiAgY2hhbmdlZFJlbGF0aW9uOiAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdDSEFOR0VEX1JFTEFUSU9OJyBhcyBjb25zdFxuICAgIH1cbiAgfSxcblxuICBsb2FkZWRMYXllclVzZXJzOiAodXNlcnM6IFVzZXJbXSkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnTE9BREVEX0xBWUVSX1VTRVJTJyBhcyBjb25zdCxcbiAgICAgIHVzZXJzOiB1c2Vyc1xuICAgIH1cbiAgfSxcblxuICBjbGVhckxheWVyVXNlcnM6ICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ0NMRUFSX0xBWUVSX1VTRVJTJyBhcyBjb25zdFxuICAgIH1cbiAgfSxcblxuICBhZGRlZExheWVyVXNlcjogKHVzZXI6IFVzZXIpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ0FEREVEX0xBWUVSX1VTRVInIGFzIGNvbnN0LFxuICAgICAgdXNlcjogdXNlclxuICAgIH1cbiAgfSxcblxuICByZW1vdmVkTGF5ZXJVc2VyOiAodXNlcjogVXNlcikgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnUkVNT1ZFRF9MQVlFUl9VU0VSJyBhcyBjb25zdCxcbiAgICAgIHVzZXI6IHVzZXJcbiAgICB9XG4gIH0sXG5cbiAgbG9hZGVkQ2hhbm5lbExheWVyVXNlcnM6ICh1c2VyczogVXNlcltdKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdMT0FERURfQ0hBTk5FTF9MQVlFUl9VU0VSUycgYXMgY29uc3QsXG4gICAgICB1c2VyczogdXNlcnNcbiAgICB9XG4gIH0sXG5cbiAgY2xlYXJDaGFubmVsTGF5ZXJVc2VyczogKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnQ0xFQVJfQ0hBTk5FTF9MQVlFUl9VU0VSUycgYXMgY29uc3RcbiAgICB9XG4gIH0sXG5cbiAgYWRkZWRDaGFubmVsTGF5ZXJVc2VyOiAodXNlcjogVXNlcikgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnQURERURfQ0hBTk5FTF9MQVlFUl9VU0VSJyBhcyBjb25zdCxcbiAgICAgIHVzZXI6IHVzZXJcbiAgICB9XG4gIH0sXG5cbiAgcmVtb3ZlZENoYW5uZWxMYXllclVzZXI6ICh1c2VyOiBVc2VyKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdSRU1PVkVEX0NIQU5ORUxfTEFZRVJfVVNFUicgYXMgY29uc3QsXG4gICAgICB1c2VyOiB1c2VyXG4gICAgfVxuICB9LFxuXG4gIGRpc3BsYXlVc2VyVG9hc3Q6ICh1c2VyOiBVc2VyLCBhcmdzOiBhbnkpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ1VTRVJfVE9BU1QnIGFzIGNvbnN0LFxuICAgICAgbWVzc2FnZTogeyB1c2VyLCBhcmdzIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgVXNlckFjdGlvblR5cGUgPSBSZXR1cm5UeXBlPHR5cGVvZiBVc2VyQWN0aW9uW2tleW9mIHR5cGVvZiBVc2VyQWN0aW9uXT5cbiIsImltcG9ydCB7IEVuZ2luZSB9IGZyb20gJy4uLy4uL2Vjcy9jbGFzc2VzL0VuZ2luZSdcblxuLy91cGRhdGVzIHRoZSBjbGllbnQgbGlzdCB3aXRoIHRoZSByaWdodCB1c2VybmFtZSBmb3IgdGhlIHVzZXJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBfdXBkYXRlVXNlcm5hbWUodXNlcklkLCB1c2VybmFtZSkge1xuICBmb3IgKGxldCBbXywgY2xpZW50XSBvZiBFbmdpbmUuZGVmYXVsdFdvcmxkLmNsaWVudHMpIHtcbiAgICBpZiAoY2xpZW50LnVzZXJJZCA9PT0gdXNlcklkKSB7XG4gICAgICBjbGllbnQubmFtZSA9IHVzZXJuYW1lXG4gICAgICByZXR1cm5cbiAgICB9XG4gIH1cbn1cblxuLy9jaGVja3MgaWYgYSBwbGF5ZXIgaGFzIHN1YnNjcmliZWQgdG8gYSBjaGF0IHN5c3RlbVxuZXhwb3J0IGZ1bmN0aW9uIGhhc1N1YnNjcmliZWRUb0NoYXRTeXN0ZW0odXNlcklkLCBzeXN0ZW06IHN0cmluZyk6IGJvb2xlYW4ge1xuICBpZiAoc3lzdGVtID09PSB1bmRlZmluZWQgfHwgc3lzdGVtID09PSAnJyB8fCB1c2VySWQgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbHNlXG5cbiAgZm9yIChsZXQgW18sIGNsaWVudF0gb2YgRW5naW5lLmRlZmF1bHRXb3JsZC5jbGllbnRzKSB7XG4gICAgaWYgKGNsaWVudC51c2VySWQgPT09IHVzZXJJZCkge1xuICAgICAgcmV0dXJuIGNsaWVudC5zdWJzY3JpYmVkQ2hhdFVwZGF0ZXMuaW5jbHVkZXMoc3lzdGVtKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZVxufVxuLy9zdWJzY3JpYmUgYSBwbGF5ZXIgdG8gYSBjaGF0IHN5c3RlbVxuZXhwb3J0IGZ1bmN0aW9uIHN1YnNjcmliZVRvQ2hhdFN5c3RlbSh1c2VySWQsIHN5c3RlbTogc3RyaW5nKSB7XG4gIGlmIChzeXN0ZW0gPT09IHVuZGVmaW5lZCB8fCBzeXN0ZW0gPT09ICcnIHx8IHVzZXJJZCA9PT0gdW5kZWZpbmVkKSByZXR1cm5cblxuICBmb3IgKGxldCBbXywgY2xpZW50XSBvZiBFbmdpbmUuZGVmYXVsdFdvcmxkLmNsaWVudHMpIHtcbiAgICBpZiAoY2xpZW50LnVzZXJJZCA9PT0gdXNlcklkKSB7XG4gICAgICBpZiAoc3lzdGVtICE9PSAnYWxsJyAmJiAhY2xpZW50LnN1YnNjcmliZWRDaGF0VXBkYXRlcy5pbmNsdWRlcyhzeXN0ZW0pKSB7XG4gICAgICAgIGNsaWVudC5zdWJzY3JpYmVkQ2hhdFVwZGF0ZXMucHVzaChzeXN0ZW0pXG4gICAgICAgIHJldHVyblxuICAgICAgfSBlbHNlIGlmIChzeXN0ZW0gPT09ICdhbGwnKSB7XG4gICAgICAgIGNsaWVudC5zdWJzY3JpYmVkQ2hhdFVwZGF0ZXMucHVzaCgnZW1vdGlvbnNfc3lzdGVtJylcbiAgICAgICAgY2xpZW50LnN1YnNjcmliZWRDaGF0VXBkYXRlcy5wdXNoKCdqbF9zeXN0ZW0nKVxuICAgICAgICBjbGllbnQuc3Vic2NyaWJlZENoYXRVcGRhdGVzLnB1c2goJ3Byb3hpbWl0eV9zeXN0ZW0nKVxuICAgICAgICAvL2FkZCBhbGwgY2hhdCBzeXN0ZW1zXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuLy91bnN1YnNjcmliZSBhIHBsYXllciBmcm9tIGEgY2hhdCBzeXN0ZW1cbmV4cG9ydCBmdW5jdGlvbiB1bnN1YnNjcmliZUZyb21DaGF0U3lzdGVtKHVzZXJJZCwgc3lzdGVtOiBzdHJpbmcpIHtcbiAgaWYgKHN5c3RlbSA9PT0gdW5kZWZpbmVkIHx8IHN5c3RlbSA9PT0gJycgfHwgdXNlcklkID09PSB1bmRlZmluZWQpIHJldHVyblxuXG4gIGZvciAobGV0IFtfLCBjbGllbnRdIG9mIEVuZ2luZS5kZWZhdWx0V29ybGQuY2xpZW50cykge1xuICAgIGlmIChjbGllbnQudXNlcklkID09PSB1c2VySWQpIHtcbiAgICAgIGlmIChzeXN0ZW0gIT09ICdhbGwnICYmIGNsaWVudC5zdWJzY3JpYmVkQ2hhdFVwZGF0ZXMuaW5jbHVkZXMoc3lzdGVtKSkge1xuICAgICAgICBjbGllbnQuc3Vic2NyaWJlZENoYXRVcGRhdGVzLnNwbGljZShjbGllbnQuc3Vic2NyaWJlZENoYXRVcGRhdGVzLmluZGV4T2Yoc3lzdGVtKSwgMSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9IGVsc2UgaWYgKHN5c3RlbSA9PT0gJ2FsbCcpIHtcbiAgICAgICAgY2xpZW50LnN1YnNjcmliZWRDaGF0VXBkYXRlcyA9IFtdXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuLy9nZXRzIGFsbCB0aGUgc3lzdGVtcyB0aGF0IGEgdXNlciBoYXMgc3Vic2NyaWJlZCB0b1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN1YnNjcmliZWRDaGF0U3lzdGVtcyh1c2VySWQpOiBzdHJpbmdbXSB7XG4gIGlmICh1c2VySWQgPT09IHVuZGVmaW5lZCkgcmV0dXJuIFtdXG5cbiAgZm9yIChsZXQgW18sIGNsaWVudF0gb2YgRW5naW5lLmRlZmF1bHRXb3JsZC5jbGllbnRzKSB7XG4gICAgaWYgKGNsaWVudC51c2VySWQgPT09IHVzZXJJZCkge1xuICAgICAgcmV0dXJuIGNsaWVudC5zdWJzY3JpYmVkQ2hhdFVwZGF0ZXNcbiAgICB9XG4gIH1cblxuICByZXR1cm4gW11cbn1cblxuLy9nZXRzIHRoZSBjaGF0IHN5c3RlbSBmcm9tIGEgY2hhdCBtZXNzYWdlXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2hhdE1lc3NhZ2VTeXN0ZW0odGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKHRleHQuc3RhcnRzV2l0aCgnW2Vtb3Rpb25zXScpKSByZXR1cm4gJ2Vtb3Rpb25zX3N5c3RlbSdcbiAgZWxzZSBpZiAodGV4dC5zdGFydHNXaXRoKCdbamxfc3lzdGVtXScpIHx8IHRleHQuaW5jbHVkZXMoJ2pvaW5lZCB0aGUgbGF5ZXInKSkgcmV0dXJuICdqbF9zeXN0ZW0nXG4gIGVsc2UgaWYgKHRleHQuc3RhcnRzV2l0aCgnW3Byb3hpbWl0eScpKSByZXR1cm4gJ3Byb3hpbWl0eV9zeXN0ZW0nXG5cbiAgcmV0dXJuICdub25lJ1xufVxuXG4vL3JlbW92ZXMgdGhlIGNoYXQgc3lzdGVtIGNvbW1hbmQgZnJvbSBhIGNoYXQgbWVzc2FnZVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZU1lc3NhZ2VTeXN0ZW0odGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHRleHQuc3Vic3RyaW5nKHRleHQuaW5kZXhPZignXScsIDApICsgMSlcbn1cbiIsImltcG9ydCB7IGNyZWF0ZU1hcHBlZENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2Vjcy9mdW5jdGlvbnMvQ29tcG9uZW50RnVuY3Rpb25zJ1xuXG5leHBvcnQgdHlwZSBXZWJDYW1JbnB1dENvbXBvbmVudFR5cGUgPSB7XG4gIGVtb3Rpb25zOiBzdHJpbmdbXVxufVxuXG5leHBvcnQgY29uc3QgV2ViQ2FtSW5wdXRDb21wb25lbnQgPSBjcmVhdGVNYXBwZWRDb21wb25lbnQ8V2ViQ2FtSW5wdXRDb21wb25lbnRUeXBlPignV2ViQ2FtSW5wdXRDb21wb25lbnQnKVxuIiwiaW1wb3J0IHsgaXNDbGllbnQgfSBmcm9tICcuL2lzQ2xpZW50J1xuXG5leHBvcnQgZnVuY3Rpb24gaXNCb3Qod2luZG93OiBXaW5kb3cpIHtcbiAgaWYgKCFpc0NsaWVudCkgcmV0dXJuIGZhbHNlXG5cbiAgY29uc3QgcXVlcnkgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoXG4gIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocXVlcnkpXG4gIGNvbnN0IGlzQm90ID0gcGFyYW1zLmdldCgnYm90JylcbiAgcmV0dXJuIGlzQm90ID09PSBudWxsID8gZmFsc2UgOiB0cnVlXG59XG4iLCJpbXBvcnQgeyBjcmVhdGVNYXBwZWRDb21wb25lbnQgfSBmcm9tICdAeHJlbmdpbmUvZW5naW5lL3NyYy9lY3MvZnVuY3Rpb25zL0NvbXBvbmVudEZ1bmN0aW9ucydcblxuZXhwb3J0IHR5cGUgUHJveGltaXR5Q29tcG9uZW50VHlwZSA9IHtcbiAgdXNlcnNJblJhbmdlOiBhbnlbXVxuICB1c2Vyc0luSW50aW1hdGVSYW5nZTogYW55W11cbiAgdXNlcnNJbkhhcmFzc21lbnRSYW5nZTogYW55W11cbiAgdXNlcnNMb29raW5nVG93YXJkczogYW55W11cbn1cblxuZXhwb3J0IGNvbnN0IFByb3hpbWl0eUNvbXBvbmVudCA9IGNyZWF0ZU1hcHBlZENvbXBvbmVudDxQcm94aW1pdHlDb21wb25lbnRUeXBlPignUHJveGltaXR5Q29tcG9uZW50JylcbiIsImltcG9ydCB7IFZlY3RvcjIsIFZlY3RvcjMgfSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IGNyZWF0ZU1hcHBlZENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2Vjcy9mdW5jdGlvbnMvQ29tcG9uZW50RnVuY3Rpb25zJ1xuXG5leHBvcnQgdHlwZSBBZmtDaGVja0NvbXBvbmVudFR5cGUgPSB7XG4gIGlzQWZrOiBib29sZWFuXG4gIHByZXZQb3NpdGlvbjogVmVjdG9yM1xuICBjU3RlcDogbnVtYmVyXG4gIGNTdGVwMjogbnVtYmVyXG4gIHRpbWVyOiBudW1iZXJcbn1cblxuZXhwb3J0IGNvbnN0IEFma0NoZWNrQ29tcG9uZW50ID0gY3JlYXRlTWFwcGVkQ29tcG9uZW50PEFma0NoZWNrQ29tcG9uZW50VHlwZT4oJ0Fma0NoZWNrQ29tcG9uZW50JylcbiIsImltcG9ydCB7IGNyZWF0ZU1hcHBlZENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2Vjcy9mdW5jdGlvbnMvQ29tcG9uZW50RnVuY3Rpb25zJ1xuXG5leHBvcnQgdHlwZSBVc2VyTmFtZUNvbXBvbmVudFR5cGUgPSB7XG4gIHVzZXJuYW1lOiBzdHJpbmdcbn1cblxuZXhwb3J0IGNvbnN0IFVzZXJOYW1lQ29tcG9uZW50ID0gY3JlYXRlTWFwcGVkQ29tcG9uZW50PFVzZXJOYW1lQ29tcG9uZW50VHlwZT4oJ1VzZXJOYW1lQ29tcG9uZW50JylcbiIsImltcG9ydCB7IE5ldHdvcmtJZCB9IGZyb20gJ0B4cmVuZ2luZS9jb21tb24vc3JjL2ludGVyZmFjZXMvTmV0d29ya0lkJ1xuaW1wb3J0IHsgVXNlcklkIH0gZnJvbSAnQHhyZW5naW5lL2NvbW1vbi9zcmMvaW50ZXJmYWNlcy9Vc2VySWQnXG5pbXBvcnQgeyBjcmVhdGVNYXBwZWRDb21wb25lbnQgfSBmcm9tICcuLi8uLi9lY3MvZnVuY3Rpb25zL0NvbXBvbmVudEZ1bmN0aW9ucydcblxuZXhwb3J0IHR5cGUgTmV0d29ya09iamVjdENvbXBvbmVudFR5cGUgPSB7XG4gIC8qKiBUaGUgdXNlciB3aG8gb3ducyB0aGlzIG9iamVjdC4gKi9cbiAgdXNlcklkOiBVc2VySWRcbiAgLyoqIFRoZSBuZXR3b3JrIGlkIGZvciB0aGlzIG9iamVjdCAqL1xuICBuZXR3b3JrSWQ6IE5ldHdvcmtJZFxuICAvKiogQWxsIG5ldHdvcmsgb2JqZWN0cyBuZWVkIHRvIGJlIGEgcmVnaXN0ZXJlZCBwcmVmYWIuICovXG4gIHByZWZhYjogc3RyaW5nXG4gIC8qKiBUaGUgcGFyYW1ldGVycyBieSB3aGljaCB0aGUgcHJlZmFiIHdhcyBjcmVhdGVkICovXG4gIHBhcmFtZXRlcnM6IGFueVxufVxuXG5leHBvcnQgY29uc3QgTmV0d29ya09iamVjdENvbXBvbmVudCA9IGNyZWF0ZU1hcHBlZENvbXBvbmVudDxOZXR3b3JrT2JqZWN0Q29tcG9uZW50VHlwZT4oJ05ldHdvcmtPYmplY3RDb21wb25lbnQnKVxuIiwiaW1wb3J0IHsgVXNlcklkIH0gZnJvbSAnQHhyZW5naW5lL2NvbW1vbi9zcmMvaW50ZXJmYWNlcy9Vc2VySWQnXG5pbXBvcnQgeyBFbmdpbmUgfSBmcm9tICcuLi8uLi9lY3MvY2xhc3Nlcy9FbmdpbmUnXG5pbXBvcnQgeyBnZXRDb21wb25lbnQgfSBmcm9tICcuLi8uLi9lY3MvZnVuY3Rpb25zL0NvbXBvbmVudEZ1bmN0aW9ucydcbmltcG9ydCB7IHVzZVdvcmxkIH0gZnJvbSAnLi4vLi4vZWNzL2Z1bmN0aW9ucy9TeXN0ZW1Ib29rcydcbmltcG9ydCB7IEFma0NoZWNrQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vbmF2aWdhdGlvbi9jb21wb25lbnQvQWZrQ2hlY2tDb21wb25lbnQnXG5pbXBvcnQgeyBVc2VyTmFtZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3NjZW5lL2NvbXBvbmVudHMvVXNlck5hbWVDb21wb25lbnQnXG5pbXBvcnQgeyBOZXR3b3JrIH0gZnJvbSAnLi4vY2xhc3Nlcy9OZXR3b3JrJ1xuaW1wb3J0IHsgTmV0d29ya09iamVjdENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvTmV0d29ya09iamVjdENvbXBvbmVudCdcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJFbnRpdHlCeU5hbWUobmFtZTogc3RyaW5nKSB7XG4gIGNvbnN0IGNsaWVudCA9IEFycmF5LmZyb20oRW5naW5lLmRlZmF1bHRXb3JsZC5jbGllbnRzLnZhbHVlcygpKS5maW5kKChjKSA9PiB7XG4gICAgcmV0dXJuIGMubmFtZSA9PT0gbmFtZVxuICB9KVxuICByZXR1cm4gY2xpZW50ID8gdXNlV29ybGQoKS5nZXRVc2VyQXZhdGFyRW50aXR5KGNsaWVudC51c2VySWQpIDogdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZW1vdGVVc2Vycyhsb2NhbFVzZXJJZCwgbm90QWZrOiBib29sZWFuKTogVXNlcklkW10ge1xuICBjb25zdCB3b3JsZCA9IHVzZVdvcmxkKClcbiAgY29uc3QgcmVzOiBVc2VySWRbXSA9IFtdXG5cbiAgZm9yIChsZXQgW18sIGNsaWVudF0gb2Ygd29ybGQuY2xpZW50cykge1xuICAgIGlmIChjbGllbnQudXNlcklkICE9PSBsb2NhbFVzZXJJZCkge1xuICAgICAgaWYgKCFub3RBZmspIHJlcy5wdXNoKGNsaWVudC51c2VySWQpXG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgZWlkID0gd29ybGQuZ2V0VXNlckF2YXRhckVudGl0eShjbGllbnQudXNlcklkKVxuICAgICAgICBpZiAoZWlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjb25zdCBhY2MgPSBnZXRDb21wb25lbnQoZWlkLCBBZmtDaGVja0NvbXBvbmVudClcbiAgICAgICAgICBpZiAoYWNjICE9PSB1bmRlZmluZWQgJiYgIWFjYy5pc0FmaykgcmVzLnB1c2goY2xpZW50LnVzZXJJZClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXNcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBsYXllck5hbWUoZWlkKTogc3RyaW5nIHtcbiAgY29uc3QgdWlkID0gZ2V0Q29tcG9uZW50KGVpZCwgTmV0d29ya09iamVjdENvbXBvbmVudCk/LnVzZXJJZFxuICBpZiAodWlkID09PSB1bmRlZmluZWQgfHwgdWlkID09PSAnJykgcmV0dXJuICcnXG5cbiAgZm9yIChsZXQgW18sIGNsaWVudF0gb2YgRW5naW5lLmRlZmF1bHRXb3JsZC5jbGllbnRzKSB7XG4gICAgaWYgKGNsaWVudC51c2VySWQgPT09IHVpZCkge1xuICAgICAgaWYgKGNsaWVudC5uYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGNsaWVudC5uYW1lXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB1bmMgPSBnZXRDb21wb25lbnQoZWlkLCBVc2VyTmFtZUNvbXBvbmVudClcbiAgICAgICAgaWYgKHVuYyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuIHVuYy51c2VybmFtZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuICcnXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFaWQodXNlcklkKSB7XG4gIGZvciAobGV0IFtfLCBjbGllbnRdIG9mIEVuZ2luZS5kZWZhdWx0V29ybGQuY2xpZW50cykge1xuICAgIGlmIChjbGllbnQudXNlcklkID09IHVzZXJJZCkge1xuICAgICAgcmV0dXJuIHVzZVdvcmxkKCkuZ2V0VXNlckF2YXRhckVudGl0eShjbGllbnQudXNlcklkKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWRcbn1cbiIsImltcG9ydCB7IEFsZXJ0U2VydmljZSB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9yZWR1Y2Vycy9hbGVydC9BbGVydFNlcnZpY2UnXG5pbXBvcnQgeyByZXNvbHZlQXV0aFVzZXIgfSBmcm9tICdAeHJlbmdpbmUvY29tbW9uL3NyYy9pbnRlcmZhY2VzL0F1dGhVc2VyJ1xuaW1wb3J0IHsgSWRlbnRpdHlQcm92aWRlciB9IGZyb20gJ0B4cmVuZ2luZS9jb21tb24vc3JjL2ludGVyZmFjZXMvSWRlbnRpdHlQcm92aWRlcidcbmltcG9ydCB7IHJlc29sdmVVc2VyLCByZXNvbHZlV2FsbGV0VXNlciB9IGZyb20gJ0B4cmVuZ2luZS9jb21tb24vc3JjL2ludGVyZmFjZXMvVXNlcidcbmltcG9ydCB7IE5ldHdvcmsgfSBmcm9tICdAeHJlbmdpbmUvZW5naW5lL3NyYy9uZXR3b3JraW5nL2NsYXNzZXMvTmV0d29yaydcbmltcG9ydCB7IE1lc3NhZ2VUeXBlcyB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL25ldHdvcmtpbmcvZW51bXMvTWVzc2FnZVR5cGVzJ1xuLy8gVE9ETzogRGVjb3VwbGUgdGhpc1xuLy8gaW1wb3J0IHsgZW5kVmlkZW9DaGF0LCBsZWF2ZSB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL25ldHdvcmtpbmcvZnVuY3Rpb25zL1NvY2tldFdlYlJUQ0NsaWVudEZ1bmN0aW9ucyc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnXG5cbmltcG9ydCBxdWVyeXN0cmluZyBmcm9tICdxdWVyeXN0cmluZydcbmltcG9ydCB7IERpc3BhdGNoIH0gZnJvbSAncmVkdXgnXG5pbXBvcnQgeyB2MSB9IGZyb20gJ3V1aWQnXG5pbXBvcnQgeyBjbGllbnQgfSBmcm9tICcuLi8uLi8uLi9mZWF0aGVycydcbmltcG9ydCB7IHZhbGlkYXRlRW1haWwsIHZhbGlkYXRlUGhvbmVOdW1iZXIsIENvbmZpZyB9IGZyb20gJ0B4cmVuZ2luZS9jb21tb24vc3JjL2NvbmZpZydcbmltcG9ydCB7IGdldFN0b3JlZEF1dGhTdGF0ZSB9IGZyb20gJy4uLy4uLy4uL3BlcnNpc3RlZC5zdG9yZSdcbmltcG9ydCBTdG9yZSBmcm9tICcuLi8uLi8uLi9zdG9yZSdcbmltcG9ydCB7IFVzZXJBY3Rpb24gfSBmcm9tICcuLi8uLi9zdG9yZS9Vc2VyQWN0aW9uJ1xuaW1wb3J0IHsgQXV0aEFjdGlvbiwgRW1haWxMb2dpbkZvcm0sIEVtYWlsUmVnaXN0cmF0aW9uRm9ybSB9IGZyb20gJy4vQXV0aEFjdGlvbidcbmltcG9ydCB7IHNldEF2YXRhciB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL2F2YXRhci9mdW5jdGlvbnMvYXZhdGFyRnVuY3Rpb25zJ1xuaW1wb3J0IHsgX3VwZGF0ZVVzZXJuYW1lIH0gZnJvbSAnQHhyZW5naW5lL2VuZ2luZS9zcmMvbmV0d29ya2luZy91dGlscy9jaGF0U3lzdGVtJ1xuaW1wb3J0IHsgYWNjZXNzQXV0aFN0YXRlIH0gZnJvbSAnLi9BdXRoU3RhdGUnXG5pbXBvcnQgeyBoYXNDb21wb25lbnQsIGFkZENvbXBvbmVudCwgZ2V0Q29tcG9uZW50IH0gZnJvbSAnQHhyZW5naW5lL2VuZ2luZS9zcmMvZWNzL2Z1bmN0aW9ucy9Db21wb25lbnRGdW5jdGlvbnMnXG5pbXBvcnQgeyBXZWJDYW1JbnB1dENvbXBvbmVudCB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL2lucHV0L2NvbXBvbmVudHMvV2ViQ2FtSW5wdXRDb21wb25lbnQnXG5pbXBvcnQgeyBpc0JvdCB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL2NvbW1vbi9mdW5jdGlvbnMvaXNCb3QnXG5pbXBvcnQgeyBQcm94aW1pdHlDb21wb25lbnQgfSBmcm9tICcuLi8uLi8uLi9wcm94aW1pdHkvY29tcG9uZW50cy9Qcm94aW1pdHlDb21wb25lbnQnXG5pbXBvcnQgeyBFbmdpbmUgfSBmcm9tICdAeHJlbmdpbmUvZW5naW5lL3NyYy9lY3MvY2xhc3Nlcy9FbmdpbmUnXG5pbXBvcnQgeyBnZXRFaWQgfSBmcm9tICdAeHJlbmdpbmUvZW5naW5lL3NyYy9uZXR3b3JraW5nL3V0aWxzL2dldFVzZXInXG5pbXBvcnQgeyBVc2VyTmFtZUNvbXBvbmVudCB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL3NjZW5lL2NvbXBvbmVudHMvVXNlck5hbWVDb21wb25lbnQnXG5pbXBvcnQgeyB1c2VXb3JsZCB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL2Vjcy9mdW5jdGlvbnMvU3lzdGVtSG9va3MnXG5pbXBvcnQgeyBhY2Nlc3NMb2NhdGlvblN0YXRlIH0gZnJvbSAnQHhyZW5naW5lL2NsaWVudC1jb3JlL3NyYy9zb2NpYWwvcmVkdWNlcnMvbG9jYXRpb24vTG9jYXRpb25TdGF0ZSdcbmltcG9ydCB7IGFjY2Vzc1BhcnR5U3RhdGUgfSBmcm9tICdAeHJlbmdpbmUvY2xpZW50LWNvcmUvc3JjL3NvY2lhbC9yZWR1Y2Vycy9wYXJ0eS9QYXJ0eVN0YXRlJ1xuXG5leHBvcnQgY29uc3QgQXV0aFNlcnZpY2UgPSB7XG4gIGRvTG9naW5BdXRvOiAoYWxsb3dHdWVzdD86IGJvb2xlYW4sIGZvcmNlQ2xpZW50QXV0aFJlc2V0PzogYm9vbGVhbikgPT4ge1xuICAgIHJldHVybiBhc3luYyAoZGlzcGF0Y2g6IERpc3BhdGNoKTogUHJvbWlzZTxhbnk+ID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGF1dGhEYXRhID0gZ2V0U3RvcmVkQXV0aFN0YXRlKClcbiAgICAgICAgbGV0IGFjY2Vzc1Rva2VuID1cbiAgICAgICAgICBmb3JjZUNsaWVudEF1dGhSZXNldCAhPT0gdHJ1ZSAmJiBhdXRoRGF0YSAmJiBhdXRoRGF0YS5hdXRoVXNlciA/IGF1dGhEYXRhLmF1dGhVc2VyLmFjY2Vzc1Rva2VuIDogdW5kZWZpbmVkXG5cbiAgICAgICAgaWYgKGFsbG93R3Vlc3QgIT09IHRydWUgJiYgYWNjZXNzVG9rZW4gPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZvcmNlQ2xpZW50QXV0aFJlc2V0ID09PSB0cnVlKSBhd2FpdCAoY2xpZW50IGFzIGFueSkuYXV0aGVudGljYXRpb24ucmVzZXQoKVxuICAgICAgICBpZiAoYWxsb3dHdWVzdCA9PT0gdHJ1ZSAmJiAoYWNjZXNzVG9rZW4gPT0gbnVsbCB8fCBhY2Nlc3NUb2tlbi5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgY29uc3QgbmV3UHJvdmlkZXIgPSBhd2FpdCBjbGllbnQuc2VydmljZSgnaWRlbnRpdHktcHJvdmlkZXInKS5jcmVhdGUoe1xuICAgICAgICAgICAgdHlwZTogJ2d1ZXN0JyxcbiAgICAgICAgICAgIHRva2VuOiB2MSgpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBhY2Nlc3NUb2tlbiA9IG5ld1Byb3ZpZGVyLmFjY2Vzc1Rva2VuXG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCAoY2xpZW50IGFzIGFueSkuYXV0aGVudGljYXRpb24uc2V0QWNjZXNzVG9rZW4oYWNjZXNzVG9rZW4gYXMgc3RyaW5nKVxuICAgICAgICBsZXQgcmVzXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmVzID0gYXdhaXQgKGNsaWVudCBhcyBhbnkpLnJlQXV0aGVudGljYXRlKClcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgZXJyLmNsYXNzTmFtZSA9PT0gJ25vdC1mb3VuZCcgfHxcbiAgICAgICAgICAgIChlcnIuY2xhc3NOYW1lID09PSAnbm90LWF1dGhlbnRpY2F0ZWQnICYmIGVyci5tZXNzYWdlID09PSAnand0IGV4cGlyZWQnKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgYXdhaXQgZGlzcGF0Y2goQXV0aEFjdGlvbi5kaWRMb2dvdXQoKSlcbiAgICAgICAgICAgIGF3YWl0IChjbGllbnQgYXMgYW55KS5hdXRoZW50aWNhdGlvbi5yZXNldCgpXG4gICAgICAgICAgICBjb25zdCBuZXdQcm92aWRlciA9IGF3YWl0IGNsaWVudC5zZXJ2aWNlKCdpZGVudGl0eS1wcm92aWRlcicpLmNyZWF0ZSh7XG4gICAgICAgICAgICAgIHR5cGU6ICdndWVzdCcsXG4gICAgICAgICAgICAgIHRva2VuOiB2MSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgYWNjZXNzVG9rZW4gPSBuZXdQcm92aWRlci5hY2Nlc3NUb2tlblxuICAgICAgICAgICAgYXdhaXQgKGNsaWVudCBhcyBhbnkpLmF1dGhlbnRpY2F0aW9uLnNldEFjY2Vzc1Rva2VuKGFjY2Vzc1Rva2VuIGFzIHN0cmluZylcbiAgICAgICAgICAgIHJlcyA9IGF3YWl0IChjbGllbnQgYXMgYW55KS5yZUF1dGhlbnRpY2F0ZSgpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGVyclxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgaWYgKHJlc1snaWRlbnRpdHktcHJvdmlkZXInXT8uaWQgPT0gbnVsbCkge1xuICAgICAgICAgICAgYXdhaXQgZGlzcGF0Y2goQXV0aEFjdGlvbi5kaWRMb2dvdXQoKSlcbiAgICAgICAgICAgIGF3YWl0IChjbGllbnQgYXMgYW55KS5hdXRoZW50aWNhdGlvbi5yZXNldCgpXG4gICAgICAgICAgICBjb25zdCBuZXdQcm92aWRlciA9IGF3YWl0IGNsaWVudC5zZXJ2aWNlKCdpZGVudGl0eS1wcm92aWRlcicpLmNyZWF0ZSh7XG4gICAgICAgICAgICAgIHR5cGU6ICdndWVzdCcsXG4gICAgICAgICAgICAgIHRva2VuOiB2MSgpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgYWNjZXNzVG9rZW4gPSBuZXdQcm92aWRlci5hY2Nlc3NUb2tlblxuICAgICAgICAgICAgYXdhaXQgKGNsaWVudCBhcyBhbnkpLmF1dGhlbnRpY2F0aW9uLnNldEFjY2Vzc1Rva2VuKGFjY2Vzc1Rva2VuIGFzIHN0cmluZylcbiAgICAgICAgICAgIHJlcyA9IGF3YWl0IChjbGllbnQgYXMgYW55KS5yZUF1dGhlbnRpY2F0ZSgpXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGF1dGhVc2VyID0gcmVzb2x2ZUF1dGhVc2VyKHJlcylcbiAgICAgICAgICBkaXNwYXRjaChBdXRoQWN0aW9uLmxvZ2luVXNlclN1Y2Nlc3MoYXV0aFVzZXIpKVxuICAgICAgICAgIGF3YWl0IEF1dGhTZXJ2aWNlLmxvYWRVc2VyRGF0YShkaXNwYXRjaCwgYXV0aFVzZXIuaWRlbnRpdHlQcm92aWRlci51c2VySWQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJyoqKioqKioqKioqKioqKionKVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXG4gICAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24uZGlkTG9nb3V0KCkpXG5cbiAgICAgICAgLy8gaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSAhPT0gJy8nKSB7XG4gICAgICAgIC8vICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnLyc7XG4gICAgICAgIC8vIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGxvYWRVc2VyRGF0YTogKGRpc3BhdGNoOiBEaXNwYXRjaCwgdXNlcklkOiBzdHJpbmcpOiBhbnkgPT4ge1xuICAgIHJldHVybiBjbGllbnRcbiAgICAgIC5zZXJ2aWNlKCd1c2VyJylcbiAgICAgIC5nZXQodXNlcklkKVxuICAgICAgLnRoZW4oKHJlczogYW55KSA9PiB7XG4gICAgICAgIGlmIChyZXMudXNlcl9zZXR0aW5nID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gY2xpZW50XG4gICAgICAgICAgICAuc2VydmljZSgndXNlci1zZXR0aW5ncycpXG4gICAgICAgICAgICAuZmluZCh7XG4gICAgICAgICAgICAgIHF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgdXNlcklkOiB1c2VySWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKChzZXR0aW5nc1JlcykgPT4ge1xuICAgICAgICAgICAgICBpZiAoc2V0dGluZ3NSZXMudG90YWwgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xpZW50XG4gICAgICAgICAgICAgICAgICAuc2VydmljZSgndXNlci1zZXR0aW5ncycpXG4gICAgICAgICAgICAgICAgICAuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB1c2VySWRcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAudGhlbigobmV3U2V0dGluZ3MpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnVzZXJfc2V0dGluZyA9IG5ld1NldHRpbmdzXG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXMpXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJlcy51c2VyX3NldHRpbmcgPSBzZXR0aW5nc1Jlcy5kYXRhWzBdXG4gICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlcylcbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgdXNlciA9IHJlc29sdmVVc2VyKHJlcylcbiAgICAgICAgZGlzcGF0Y2goQXV0aEFjdGlvbi5sb2FkZWRVc2VyRGF0YSh1c2VyKSlcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycjogYW55KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgQWxlcnRTZXJ2aWNlLmRpc3BhdGNoQWxlcnRFcnJvcihkaXNwYXRjaCwgJ0ZhaWxlZCB0byBsb2FkIHVzZXIgZGF0YScpXG4gICAgICB9KVxuICB9LFxuICBsb2dpblVzZXJCeVBhc3N3b3JkOiAoZm9ybTogRW1haWxMb2dpbkZvcm0pID0+IHtcbiAgICByZXR1cm4gKGRpc3BhdGNoOiBEaXNwYXRjaCk6IGFueSA9PiB7XG4gICAgICAvLyBjaGVjayBlbWFpbCB2YWxpZGF0aW9uLlxuICAgICAgaWYgKCF2YWxpZGF0ZUVtYWlsKGZvcm0uZW1haWwpKSB7XG4gICAgICAgIEFsZXJ0U2VydmljZS5kaXNwYXRjaEFsZXJ0RXJyb3IoZGlzcGF0Y2gsICdQbGVhc2UgaW5wdXQgdmFsaWQgZW1haWwgYWRkcmVzcycpXG5cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24uYWN0aW9uUHJvY2Vzc2luZyh0cnVlKSlcbiAgICAgIDsoY2xpZW50IGFzIGFueSlcbiAgICAgICAgLmF1dGhlbnRpY2F0ZSh7XG4gICAgICAgICAgc3RyYXRlZ3k6ICdsb2NhbCcsXG4gICAgICAgICAgZW1haWw6IGZvcm0uZW1haWwsXG4gICAgICAgICAgcGFzc3dvcmQ6IGZvcm0ucGFzc3dvcmRcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlczogYW55KSA9PiB7XG4gICAgICAgICAgY29uc3QgYXV0aFVzZXIgPSByZXNvbHZlQXV0aFVzZXIocmVzKVxuXG4gICAgICAgICAgaWYgKCFhdXRoVXNlci5pZGVudGl0eVByb3ZpZGVyLmlzVmVyaWZpZWQpIHtcbiAgICAgICAgICAgIDsoY2xpZW50IGFzIGFueSkubG9nb3V0KClcblxuICAgICAgICAgICAgZGlzcGF0Y2goQXV0aEFjdGlvbi5yZWdpc3RlclVzZXJCeUVtYWlsU3VjY2VzcyhhdXRoVXNlci5pZGVudGl0eVByb3ZpZGVyKSlcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9hdXRoL2NvbmZpcm0nXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkaXNwYXRjaChBdXRoQWN0aW9uLmxvZ2luVXNlclN1Y2Nlc3MoYXV0aFVzZXIpKVxuICAgICAgICAgIEF1dGhTZXJ2aWNlLmxvYWRVc2VyRGF0YShkaXNwYXRjaCwgYXV0aFVzZXIuaWRlbnRpdHlQcm92aWRlci51c2VySWQpLnRoZW4oKCkgPT4gKHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy8nKSlcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnI6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcblxuICAgICAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24ubG9naW5Vc2VyRXJyb3IoJ0ZhaWxlZCB0byBsb2dpbicpKVxuICAgICAgICAgIEFsZXJ0U2VydmljZS5kaXNwYXRjaEFsZXJ0RXJyb3IoZGlzcGF0Y2gsIGVyci5tZXNzYWdlKVxuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiBkaXNwYXRjaChBdXRoQWN0aW9uLmFjdGlvblByb2Nlc3NpbmcoZmFsc2UpKSlcbiAgICB9XG4gIH0sXG4gIGxvZ2luVXNlckJ5WFJXYWxsZXQ6ICh3YWxsZXQ6IGFueSkgPT4ge1xuICAgIHJldHVybiAoZGlzcGF0Y2g6IERpc3BhdGNoLCBnZXRTdGF0ZTogYW55KTogYW55ID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24uYWN0aW9uUHJvY2Vzc2luZyh0cnVlKSlcblxuICAgICAgICBjb25zdCBjcmVkZW50aWFsczogYW55ID0gcGFyc2VVc2VyV2FsbGV0Q3JlZGVudGlhbHMod2FsbGV0KVxuICAgICAgICBjb25zb2xlLmxvZyhjcmVkZW50aWFscylcblxuICAgICAgICBjb25zdCB3YWxsZXRVc2VyID0gcmVzb2x2ZVdhbGxldFVzZXIoY3JlZGVudGlhbHMpXG5cbiAgICAgICAgLy9UT0RPOiBUaGlzIGlzIHRlbXAgdW50aWwgd2UgbW92ZSBjb21wbGV0ZWx5IHRvIFhSIHdhbGxldFxuICAgICAgICBjb25zdCBvbGRJZCA9IGFjY2Vzc0F1dGhTdGF0ZSgpLnVzZXIuaWQudmFsdWVcbiAgICAgICAgd2FsbGV0VXNlci5pZCA9IG9sZElkXG5cbiAgICAgICAgbG9hZFhSQXZhdGFyRm9yVXBkYXRlZFVzZXIod2FsbGV0VXNlcilcbiAgICAgICAgZGlzcGF0Y2goQXV0aEFjdGlvbi5sb2FkZWRVc2VyRGF0YSh3YWxsZXRVc2VyKSlcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24ubG9naW5Vc2VyRXJyb3IoJ0ZhaWxlZCB0byBsb2dpbicpKVxuICAgICAgICBBbGVydFNlcnZpY2UuZGlzcGF0Y2hBbGVydEVycm9yKGRpc3BhdGNoLCBlcnIubWVzc2FnZSlcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24uYWN0aW9uUHJvY2Vzc2luZyhmYWxzZSkpXG4gICAgICB9XG4gICAgfVxuICB9LFxuICBsb2dpblVzZXJCeU9BdXRoOiAoc2VydmljZTogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIChkaXNwYXRjaDogRGlzcGF0Y2gpOiBhbnkgPT4ge1xuICAgICAgZGlzcGF0Y2goQXV0aEFjdGlvbi5hY3Rpb25Qcm9jZXNzaW5nKHRydWUpKVxuICAgICAgY29uc3QgdG9rZW4gPSBhY2Nlc3NBdXRoU3RhdGUoKS5hdXRoVXNlci5hY2Nlc3NUb2tlbi52YWx1ZVxuICAgICAgY29uc3QgcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZVxuICAgICAgY29uc3QgcXVlcnlTdHJpbmcgPSBxdWVyeXN0cmluZy5wYXJzZSh3aW5kb3cubG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpKVxuICAgICAgY29uc3QgcmVkaXJlY3RPYmplY3QgPSB7XG4gICAgICAgIHBhdGg6IHBhdGhcbiAgICAgIH0gYXMgYW55XG4gICAgICBpZiAocXVlcnlTdHJpbmcuaW5zdGFuY2VJZCAmJiBxdWVyeVN0cmluZy5pbnN0YW5jZUlkLmxlbmd0aCA+IDApXG4gICAgICAgIHJlZGlyZWN0T2JqZWN0Lmluc3RhbmNlSWQgPSBxdWVyeVN0cmluZy5pbnN0YW5jZUlkXG4gICAgICBsZXQgcmVkaXJlY3RVcmwgPSBgJHtcbiAgICAgICAgQ29uZmlnLnB1YmxpY1J1bnRpbWVDb25maWcuYXBpU2VydmVyXG4gICAgICB9L29hdXRoLyR7c2VydmljZX0/ZmVhdGhlcnNfdG9rZW49JHt0b2tlbn0mcmVkaXJlY3Q9JHtKU09OLnN0cmluZ2lmeShyZWRpcmVjdE9iamVjdCl9YFxuXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJlZGlyZWN0VXJsXG4gICAgfVxuICB9LFxuICBsb2dpblVzZXJCeUp3dDogKGFjY2Vzc1Rva2VuOiBzdHJpbmcsIHJlZGlyZWN0U3VjY2Vzczogc3RyaW5nLCByZWRpcmVjdEVycm9yOiBzdHJpbmcpOiBhbnkgPT4ge1xuICAgIHJldHVybiBhc3luYyAoZGlzcGF0Y2g6IERpc3BhdGNoKTogUHJvbWlzZTxhbnk+ID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24uYWN0aW9uUHJvY2Vzc2luZyh0cnVlKSlcbiAgICAgICAgYXdhaXQgKGNsaWVudCBhcyBhbnkpLmF1dGhlbnRpY2F0aW9uLnNldEFjY2Vzc1Rva2VuKGFjY2Vzc1Rva2VuIGFzIHN0cmluZylcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgKGNsaWVudCBhcyBhbnkpLmF1dGhlbnRpY2F0ZSh7XG4gICAgICAgICAgc3RyYXRlZ3k6ICdqd3QnLFxuICAgICAgICAgIGFjY2Vzc1Rva2VuXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgYXV0aFVzZXIgPSByZXNvbHZlQXV0aFVzZXIocmVzKVxuXG4gICAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24ubG9naW5Vc2VyU3VjY2VzcyhhdXRoVXNlcikpXG4gICAgICAgIGF3YWl0IEF1dGhTZXJ2aWNlLmxvYWRVc2VyRGF0YShkaXNwYXRjaCwgYXV0aFVzZXIuaWRlbnRpdHlQcm92aWRlci51c2VySWQpXG4gICAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24uYWN0aW9uUHJvY2Vzc2luZyhmYWxzZSkpXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcmVkaXJlY3RTdWNjZXNzXG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICBkaXNwYXRjaChBdXRoQWN0aW9uLmxvZ2luVXNlckVycm9yKCdGYWlsZWQgdG8gbG9naW4nKSlcbiAgICAgICAgQWxlcnRTZXJ2aWNlLmRpc3BhdGNoQWxlcnRFcnJvcihkaXNwYXRjaCwgZXJyLm1lc3NhZ2UpXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYCR7cmVkaXJlY3RFcnJvcn0/ZXJyb3I9JHtlcnIubWVzc2FnZX1gXG4gICAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24uYWN0aW9uUHJvY2Vzc2luZyhmYWxzZSkpXG4gICAgICB9XG4gICAgfVxuICB9LFxuICBsb2dvdXRVc2VyOiAoKSA9PiB7XG4gICAgcmV0dXJuIChkaXNwYXRjaDogRGlzcGF0Y2gpOiBhbnkgPT4ge1xuICAgICAgZGlzcGF0Y2goQXV0aEFjdGlvbi5hY3Rpb25Qcm9jZXNzaW5nKHRydWUpKVxuICAgICAgOyhjbGllbnQgYXMgYW55KVxuICAgICAgICAubG9nb3V0KClcbiAgICAgICAgLnRoZW4oKCkgPT4gZGlzcGF0Y2goQXV0aEFjdGlvbi5kaWRMb2dvdXQoKSkpXG4gICAgICAgIC5jYXRjaCgoKSA9PiBkaXNwYXRjaChBdXRoQWN0aW9uLmRpZExvZ291dCgpKSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24uYWN0aW9uUHJvY2Vzc2luZyhmYWxzZSkpXG4gICAgICAgICAgQXV0aFNlcnZpY2UuZG9Mb2dpbkF1dG8odHJ1ZSwgdHJ1ZSkoZGlzcGF0Y2gpXG4gICAgICAgIH0pXG4gICAgfVxuICB9LFxuICByZWdpc3RlclVzZXJCeUVtYWlsOiAoZm9ybTogRW1haWxSZWdpc3RyYXRpb25Gb3JtKSA9PiB7XG4gICAgY29uc29sZS5sb2coJzEgcmVnaXN0ZXJVc2VyQnlFbWFpbCcpXG4gICAgcmV0dXJuIChkaXNwYXRjaDogRGlzcGF0Y2gpOiBhbnkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJzIgZGlzcGF0Y2gnLCBkaXNwYXRjaClcbiAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24uYWN0aW9uUHJvY2Vzc2luZyh0cnVlKSlcbiAgICAgIGNsaWVudFxuICAgICAgICAuc2VydmljZSgnaWRlbnRpdHktcHJvdmlkZXInKVxuICAgICAgICAuY3JlYXRlKHtcbiAgICAgICAgICB0b2tlbjogZm9ybS5lbWFpbCxcbiAgICAgICAgICBwYXNzd29yZDogZm9ybS5wYXNzd29yZCxcbiAgICAgICAgICB0eXBlOiAncGFzc3dvcmQnXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChpZGVudGl0eVByb3ZpZGVyOiBhbnkpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnMyAnLCBpZGVudGl0eVByb3ZpZGVyKVxuICAgICAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24ucmVnaXN0ZXJVc2VyQnlFbWFpbFN1Y2Nlc3MoaWRlbnRpdHlQcm92aWRlcikpXG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2F1dGgvY29uZmlybSdcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnI6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicsIGVycilcbiAgICAgICAgICBkaXNwYXRjaChBdXRoQWN0aW9uLnJlZ2lzdGVyVXNlckJ5RW1haWxFcnJvcihlcnIubWVzc2FnZSkpXG4gICAgICAgICAgQWxlcnRTZXJ2aWNlLmRpc3BhdGNoQWxlcnRFcnJvcihkaXNwYXRjaCwgZXJyLm1lc3NhZ2UpXG4gICAgICAgIH0pXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnNCBmaW5hbGx5JywgZGlzcGF0Y2gpXG4gICAgICAgICAgZGlzcGF0Y2goQXV0aEFjdGlvbi5hY3Rpb25Qcm9jZXNzaW5nKGZhbHNlKSlcbiAgICAgICAgfSlcbiAgICB9XG4gIH0sXG4gIHZlcmlmeUVtYWlsOiAodG9rZW46IHN0cmluZykgPT4ge1xuICAgIHJldHVybiAoZGlzcGF0Y2g6IERpc3BhdGNoKTogYW55ID0+IHtcbiAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24uYWN0aW9uUHJvY2Vzc2luZyh0cnVlKSlcblxuICAgICAgY2xpZW50XG4gICAgICAgIC5zZXJ2aWNlKCdhdXRoTWFuYWdlbWVudCcpXG4gICAgICAgIC5jcmVhdGUoe1xuICAgICAgICAgIGFjdGlvbjogJ3ZlcmlmeVNpZ251cExvbmcnLFxuICAgICAgICAgIHZhbHVlOiB0b2tlblxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzOiBhbnkpID0+IHtcbiAgICAgICAgICBkaXNwYXRjaChBdXRoQWN0aW9uLmRpZFZlcmlmeUVtYWlsKHRydWUpKVxuICAgICAgICAgIEF1dGhTZXJ2aWNlLmxvZ2luVXNlckJ5Snd0KHJlcy5hY2Nlc3NUb2tlbiwgJy8nLCAnLycpKGRpc3BhdGNoKVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycjogYW55KSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24uZGlkVmVyaWZ5RW1haWwoZmFsc2UpKVxuICAgICAgICAgIEFsZXJ0U2VydmljZS5kaXNwYXRjaEFsZXJ0RXJyb3IoZGlzcGF0Y2gsIGVyci5tZXNzYWdlKVxuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiBkaXNwYXRjaChBdXRoQWN0aW9uLmFjdGlvblByb2Nlc3NpbmcoZmFsc2UpKSlcbiAgICB9XG4gIH0sXG4gIHJlc2VuZFZlcmlmaWNhdGlvbkVtYWlsOiAoZW1haWw6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiAoZGlzcGF0Y2g6IERpc3BhdGNoKTogYW55ID0+IHtcbiAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24uYWN0aW9uUHJvY2Vzc2luZyh0cnVlKSlcblxuICAgICAgY2xpZW50XG4gICAgICAgIC5zZXJ2aWNlKCdhdXRoTWFuYWdlbWVudCcpXG4gICAgICAgIC5jcmVhdGUoe1xuICAgICAgICAgIGFjdGlvbjogJ3Jlc2VuZFZlcmlmeVNpZ251cCcsXG4gICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgIHRva2VuOiBlbWFpbCxcbiAgICAgICAgICAgIHR5cGU6ICdwYXNzd29yZCdcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKCgpID0+IGRpc3BhdGNoKEF1dGhBY3Rpb24uZGlkUmVzZW5kVmVyaWZpY2F0aW9uRW1haWwodHJ1ZSkpKVxuICAgICAgICAuY2F0Y2goKCkgPT4gZGlzcGF0Y2goQXV0aEFjdGlvbi5kaWRSZXNlbmRWZXJpZmljYXRpb25FbWFpbChmYWxzZSkpKVxuICAgICAgICAuZmluYWxseSgoKSA9PiBkaXNwYXRjaChBdXRoQWN0aW9uLmFjdGlvblByb2Nlc3NpbmcoZmFsc2UpKSlcbiAgICB9XG4gIH0sXG4gIGZvcmdvdFBhc3N3b3JkOiAoZW1haWw6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiAoZGlzcGF0Y2g6IERpc3BhdGNoKTogYW55ID0+IHtcbiAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24uYWN0aW9uUHJvY2Vzc2luZyh0cnVlKSlcbiAgICAgIGNvbnNvbGUubG9nKCdmb3Jnb3RQYXNzd29yZCcsIGVtYWlsKVxuICAgICAgY2xpZW50XG4gICAgICAgIC5zZXJ2aWNlKCdhdXRoTWFuYWdlbWVudCcpXG4gICAgICAgIC5jcmVhdGUoe1xuICAgICAgICAgIGFjdGlvbjogJ3NlbmRSZXNldFB3ZCcsXG4gICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgIHRva2VuOiBlbWFpbCxcbiAgICAgICAgICAgIHR5cGU6ICdwYXNzd29yZCdcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKCgpID0+IGRpc3BhdGNoKEF1dGhBY3Rpb24uZGlkRm9yZ290UGFzc3dvcmQodHJ1ZSkpKVxuICAgICAgICAuY2F0Y2goKCkgPT4gZGlzcGF0Y2goQXV0aEFjdGlvbi5kaWRGb3Jnb3RQYXNzd29yZChmYWxzZSkpKVxuICAgICAgICAuZmluYWxseSgoKSA9PiBkaXNwYXRjaChBdXRoQWN0aW9uLmFjdGlvblByb2Nlc3NpbmcoZmFsc2UpKSlcbiAgICB9XG4gIH0sXG4gIHJlc2V0UGFzc3dvcmQ6ICh0b2tlbjogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIChkaXNwYXRjaDogRGlzcGF0Y2gpOiBhbnkgPT4ge1xuICAgICAgZGlzcGF0Y2goQXV0aEFjdGlvbi5hY3Rpb25Qcm9jZXNzaW5nKHRydWUpKVxuXG4gICAgICBjbGllbnRcbiAgICAgICAgLnNlcnZpY2UoJ2F1dGhNYW5hZ2VtZW50JylcbiAgICAgICAgLmNyZWF0ZSh7XG4gICAgICAgICAgYWN0aW9uOiAncmVzZXRQd2RMb25nJyxcbiAgICAgICAgICB2YWx1ZTogeyB0b2tlbiwgcGFzc3dvcmQgfVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzOiBhbnkpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpXG4gICAgICAgICAgZGlzcGF0Y2goQXV0aEFjdGlvbi5kaWRSZXNldFBhc3N3b3JkKHRydWUpKVxuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy8nXG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyOiBhbnkpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgZGlzcGF0Y2goQXV0aEFjdGlvbi5kaWRSZXNldFBhc3N3b3JkKGZhbHNlKSlcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvJ1xuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiBkaXNwYXRjaChBdXRoQWN0aW9uLmFjdGlvblByb2Nlc3NpbmcoZmFsc2UpKSlcbiAgICB9XG4gIH0sXG4gIGNyZWF0ZU1hZ2ljTGluazogKGVtYWlsUGhvbmU6IHN0cmluZywgbGlua1R5cGU/OiAnZW1haWwnIHwgJ3NtcycpID0+IHtcbiAgICByZXR1cm4gKGRpc3BhdGNoOiBEaXNwYXRjaCk6IGFueSA9PiB7XG4gICAgICBkaXNwYXRjaChBdXRoQWN0aW9uLmFjdGlvblByb2Nlc3NpbmcodHJ1ZSkpXG5cbiAgICAgIGxldCB0eXBlID0gJ2VtYWlsJ1xuICAgICAgbGV0IHBhcmFtTmFtZSA9ICdlbWFpbCdcbiAgICAgIGNvbnN0IGVuYWJsZUVtYWlsTWFnaWNMaW5rID1cbiAgICAgICAgKENvbmZpZy5wdWJsaWNSdW50aW1lQ29uZmlnLmF1dGggJiYgQ29uZmlnLnB1YmxpY1J1bnRpbWVDb25maWcuYXV0aC5lbmFibGVFbWFpbE1hZ2ljTGluaykgPz8gdHJ1ZVxuICAgICAgY29uc3QgZW5hYmxlU21zTWFnaWNMaW5rID1cbiAgICAgICAgKENvbmZpZy5wdWJsaWNSdW50aW1lQ29uZmlnLmF1dGggJiYgQ29uZmlnLnB1YmxpY1J1bnRpbWVDb25maWcuYXV0aC5lbmFibGVTbXNNYWdpY0xpbmspID8/IGZhbHNlXG5cbiAgICAgIGlmIChsaW5rVHlwZSA9PT0gJ2VtYWlsJykge1xuICAgICAgICB0eXBlID0gJ2VtYWlsJ1xuICAgICAgICBwYXJhbU5hbWUgPSAnZW1haWwnXG4gICAgICB9IGVsc2UgaWYgKGxpbmtUeXBlID09PSAnc21zJykge1xuICAgICAgICB0eXBlID0gJ3NtcydcbiAgICAgICAgcGFyYW1OYW1lID0gJ21vYmlsZSdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHN0cmlwcGVkID0gZW1haWxQaG9uZS5yZXBsYWNlKC8tL2csICcnKVxuICAgICAgICBpZiAodmFsaWRhdGVQaG9uZU51bWJlcihzdHJpcHBlZCkpIHtcbiAgICAgICAgICBpZiAoIWVuYWJsZVNtc01hZ2ljTGluaykge1xuICAgICAgICAgICAgQWxlcnRTZXJ2aWNlLmRpc3BhdGNoQWxlcnRFcnJvcihkaXNwYXRjaCwgJ1BsZWFzZSBpbnB1dCB2YWxpZCBlbWFpbCBhZGRyZXNzJylcblxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIHR5cGUgPSAnc21zJ1xuICAgICAgICAgIHBhcmFtTmFtZSA9ICdtb2JpbGUnXG4gICAgICAgICAgZW1haWxQaG9uZSA9ICcrMScgKyBzdHJpcHBlZFxuICAgICAgICB9IGVsc2UgaWYgKHZhbGlkYXRlRW1haWwoZW1haWxQaG9uZSkpIHtcbiAgICAgICAgICBpZiAoIWVuYWJsZUVtYWlsTWFnaWNMaW5rKSB7XG4gICAgICAgICAgICBBbGVydFNlcnZpY2UuZGlzcGF0Y2hBbGVydEVycm9yKGRpc3BhdGNoLCAnUGxlYXNlIGlucHV0IHZhbGlkIHBob25lIG51bWJlcicpXG5cbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cbiAgICAgICAgICB0eXBlID0gJ2VtYWlsJ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIEFsZXJ0U2VydmljZS5kaXNwYXRjaEFsZXJ0RXJyb3IoZGlzcGF0Y2gsICdQbGVhc2UgaW5wdXQgdmFsaWQgZW1haWwgb3IgcGhvbmUgbnVtYmVyJylcblxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNsaWVudFxuICAgICAgICAuc2VydmljZSgnbWFnaWMtbGluaycpXG4gICAgICAgIC5jcmVhdGUoe1xuICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgW3BhcmFtTmFtZV06IGVtYWlsUGhvbmVcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlczogYW55KSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2cocmVzKVxuICAgICAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24uZGlkQ3JlYXRlTWFnaWNMaW5rKHRydWUpKVxuICAgICAgICAgIEFsZXJ0U2VydmljZS5kaXNwYXRjaEFsZXJ0U3VjY2VzcyhkaXNwYXRjaCwgJ0xvZ2luIE1hZ2ljIExpbmsgd2FzIHNlbnQuIFBsZWFzZSBjaGVjayB5b3VyIEVtYWlsIG9yIFNNUy4nKVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycjogYW55KSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24uZGlkQ3JlYXRlTWFnaWNMaW5rKGZhbHNlKSlcbiAgICAgICAgICBBbGVydFNlcnZpY2UuZGlzcGF0Y2hBbGVydEVycm9yKGRpc3BhdGNoLCBlcnIubWVzc2FnZSlcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4gZGlzcGF0Y2goQXV0aEFjdGlvbi5hY3Rpb25Qcm9jZXNzaW5nKGZhbHNlKSkpXG4gICAgfVxuICB9LFxuICBhZGRDb25uZWN0aW9uQnlQYXNzd29yZDogKGZvcm06IEVtYWlsTG9naW5Gb3JtLCB1c2VySWQ6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiAoZGlzcGF0Y2g6IERpc3BhdGNoKTogYW55ID0+IHtcbiAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24uYWN0aW9uUHJvY2Vzc2luZyh0cnVlKSlcblxuICAgICAgY2xpZW50XG4gICAgICAgIC5zZXJ2aWNlKCdpZGVudGl0eS1wcm92aWRlcicpXG4gICAgICAgIC5jcmVhdGUoe1xuICAgICAgICAgIHRva2VuOiBmb3JtLmVtYWlsLFxuICAgICAgICAgIHBhc3N3b3JkOiBmb3JtLnBhc3N3b3JkLFxuICAgICAgICAgIHR5cGU6ICdwYXNzd29yZCcsXG4gICAgICAgICAgdXNlcklkXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXM6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGlkZW50aXR5UHJvdmlkZXIgPSByZXMgYXMgSWRlbnRpdHlQcm92aWRlclxuICAgICAgICAgIHJldHVybiBBdXRoU2VydmljZS5sb2FkVXNlckRhdGEoZGlzcGF0Y2gsIGlkZW50aXR5UHJvdmlkZXIudXNlcklkKVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycjogYW55KSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICAgIEFsZXJ0U2VydmljZS5kaXNwYXRjaEFsZXJ0RXJyb3IoZGlzcGF0Y2gsIGVyci5tZXNzYWdlKVxuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiBkaXNwYXRjaChBdXRoQWN0aW9uLmFjdGlvblByb2Nlc3NpbmcoZmFsc2UpKSlcbiAgICB9XG4gIH0sXG4gIGFkZENvbm5lY3Rpb25CeUVtYWlsOiAoZW1haWw6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gKGRpc3BhdGNoOiBEaXNwYXRjaCk6IGFueSA9PiB7XG4gICAgICBkaXNwYXRjaChBdXRoQWN0aW9uLmFjdGlvblByb2Nlc3NpbmcodHJ1ZSkpXG4gICAgICBjbGllbnRcbiAgICAgICAgLnNlcnZpY2UoJ21hZ2ljLWxpbmsnKVxuICAgICAgICAuY3JlYXRlKHtcbiAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICB0eXBlOiAnZW1haWwnLFxuICAgICAgICAgIHVzZXJJZFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzOiBhbnkpID0+IHtcbiAgICAgICAgICBjb25zdCBpZGVudGl0eVByb3ZpZGVyID0gcmVzIGFzIElkZW50aXR5UHJvdmlkZXJcbiAgICAgICAgICBpZiAoaWRlbnRpdHlQcm92aWRlci51c2VySWQgIT0gbnVsbCkgcmV0dXJuIEF1dGhTZXJ2aWNlLmxvYWRVc2VyRGF0YShkaXNwYXRjaCwgaWRlbnRpdHlQcm92aWRlci51c2VySWQpXG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyOiBhbnkpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgQWxlcnRTZXJ2aWNlLmRpc3BhdGNoQWxlcnRFcnJvcihkaXNwYXRjaCwgZXJyLm1lc3NhZ2UpXG4gICAgICAgIH0pXG4gICAgICAgIC5maW5hbGx5KCgpID0+IGRpc3BhdGNoKEF1dGhBY3Rpb24uYWN0aW9uUHJvY2Vzc2luZyhmYWxzZSkpKVxuICAgIH1cbiAgfSxcbiAgYWRkQ29ubmVjdGlvbkJ5U21zOiAocGhvbmU6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gKGRpc3BhdGNoOiBEaXNwYXRjaCk6IGFueSA9PiB7XG4gICAgICBkaXNwYXRjaChBdXRoQWN0aW9uLmFjdGlvblByb2Nlc3NpbmcodHJ1ZSkpXG5cbiAgICAgIGxldCBzZW5kUGhvbmUgPSBwaG9uZS5yZXBsYWNlKC8tL2csICcnKVxuICAgICAgaWYgKHNlbmRQaG9uZS5sZW5ndGggPT09IDEwKSB7XG4gICAgICAgIHNlbmRQaG9uZSA9ICcxJyArIHNlbmRQaG9uZVxuICAgICAgfVxuXG4gICAgICBjbGllbnRcbiAgICAgICAgLnNlcnZpY2UoJ21hZ2ljLWxpbmsnKVxuICAgICAgICAuY3JlYXRlKHtcbiAgICAgICAgICBtb2JpbGU6IHNlbmRQaG9uZSxcbiAgICAgICAgICB0eXBlOiAnc21zJyxcbiAgICAgICAgICB1c2VySWRcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlczogYW55KSA9PiB7XG4gICAgICAgICAgY29uc3QgaWRlbnRpdHlQcm92aWRlciA9IHJlcyBhcyBJZGVudGl0eVByb3ZpZGVyXG4gICAgICAgICAgaWYgKGlkZW50aXR5UHJvdmlkZXIudXNlcklkICE9IG51bGwpIHJldHVybiBBdXRoU2VydmljZS5sb2FkVXNlckRhdGEoZGlzcGF0Y2gsIGlkZW50aXR5UHJvdmlkZXIudXNlcklkKVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycjogYW55KSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICAgIEFsZXJ0U2VydmljZS5kaXNwYXRjaEFsZXJ0RXJyb3IoZGlzcGF0Y2gsIGVyci5tZXNzYWdlKVxuICAgICAgICB9KVxuICAgICAgICAuZmluYWxseSgoKSA9PiBkaXNwYXRjaChBdXRoQWN0aW9uLmFjdGlvblByb2Nlc3NpbmcoZmFsc2UpKSlcbiAgICB9XG4gIH0sXG4gIGFkZENvbm5lY3Rpb25CeU9hdXRoOiAob2F1dGg6ICdmYWNlYm9vaycgfCAnZ29vZ2xlJyB8ICdnaXRodWInIHwgJ2xpbmtlZGluJyB8ICd0d2l0dGVyJywgdXNlcklkOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gKC8qIGRpc3BhdGNoOiBEaXNwYXRjaCAqLykgPT4ge1xuICAgICAgd2luZG93Lm9wZW4oYCR7Q29uZmlnLnB1YmxpY1J1bnRpbWVDb25maWcuYXBpU2VydmVyfS9hdXRoL29hdXRoLyR7b2F1dGh9P3VzZXJJZD0ke3VzZXJJZH1gLCAnX2JsYW5rJylcbiAgICB9XG4gIH0sXG4gIHJlbW92ZUNvbm5lY3Rpb246IChpZGVudGl0eVByb3ZpZGVySWQ6IG51bWJlciwgdXNlcklkOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gKGRpc3BhdGNoOiBEaXNwYXRjaCk6IGFueSA9PiB7XG4gICAgICBkaXNwYXRjaChBdXRoQWN0aW9uLmFjdGlvblByb2Nlc3NpbmcodHJ1ZSkpXG5cbiAgICAgIGNsaWVudFxuICAgICAgICAuc2VydmljZSgnaWRlbnRpdHktcHJvdmlkZXInKVxuICAgICAgICAucmVtb3ZlKGlkZW50aXR5UHJvdmlkZXJJZClcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBBdXRoU2VydmljZS5sb2FkVXNlckRhdGEoZGlzcGF0Y2gsIHVzZXJJZClcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnI6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgICBBbGVydFNlcnZpY2UuZGlzcGF0Y2hBbGVydEVycm9yKGRpc3BhdGNoLCBlcnIubWVzc2FnZSlcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4gZGlzcGF0Y2goQXV0aEFjdGlvbi5hY3Rpb25Qcm9jZXNzaW5nKGZhbHNlKSkpXG4gICAgfVxuICB9LFxuICByZWZyZXNoQ29ubmVjdGlvbnM6ICh1c2VySWQ6IHN0cmluZykgPT4ge1xuICAgIDsoZGlzcGF0Y2g6IERpc3BhdGNoKTogYW55ID0+IEF1dGhTZXJ2aWNlLmxvYWRVc2VyRGF0YShkaXNwYXRjaCwgdXNlcklkKVxuICB9LFxuICB1cGRhdGVVc2VyU2V0dGluZ3M6IChpZDogYW55LCBkYXRhOiBhbnkpID0+IGFzeW5jIChkaXNwYXRjaDogYW55KSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgY2xpZW50LnNlcnZpY2UoJ3VzZXItc2V0dGluZ3MnKS5wYXRjaChpZCwgZGF0YSlcbiAgICBkaXNwYXRjaChBdXRoQWN0aW9uLnVwZGF0ZWRVc2VyU2V0dGluZ3NBY3Rpb24ocmVzKSlcbiAgfSxcbiAgdXBsb2FkQXZhdGFyOiAoZGF0YTogYW55KSA9PiB7XG4gICAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaDogRGlzcGF0Y2gsIGdldFN0YXRlOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHRva2VuID0gYWNjZXNzQXV0aFN0YXRlKCkuYXV0aFVzZXIuYWNjZXNzVG9rZW4udmFsdWVcbiAgICAgIGNvbnN0IHNlbGZVc2VyID0gYWNjZXNzQXV0aFN0YXRlKCkudXNlclxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MucG9zdChgJHtDb25maWcucHVibGljUnVudGltZUNvbmZpZy5hcGlTZXJ2ZXJ9L3VwbG9hZGAsIGRhdGEsIHtcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScsXG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgdG9rZW5cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGF3YWl0IGNsaWVudC5zZXJ2aWNlKCd1c2VyJykucGF0Y2goc2VsZlVzZXIuaWQudmFsdWUsIHtcbiAgICAgICAgbmFtZTogc2VsZlVzZXIubmFtZS52YWx1ZVxuICAgICAgfSlcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHJlcy5kYXRhXG4gICAgICBBbGVydFNlcnZpY2UuZGlzcGF0Y2hBbGVydFN1Y2Nlc3MoZGlzcGF0Y2gsICdBdmF0YXIgdXBkYXRlZCcpXG4gICAgICBkaXNwYXRjaChBdXRoQWN0aW9uLmF2YXRhclVwZGF0ZWQocmVzdWx0KSlcbiAgICB9XG4gIH0sXG4gIHVwbG9hZEF2YXRhck1vZGVsOiAobW9kZWw6IGFueSwgdGh1bWJuYWlsOiBhbnksIGF2YXRhck5hbWU/OiBzdHJpbmcsIGlzUHVibGljQXZhdGFyPzogYm9vbGVhbikgPT4ge1xuICAgIHJldHVybiBhc3luYyAoZGlzcGF0Y2g6IERpc3BhdGNoLCBnZXRTdGF0ZTogYW55KSA9PiB7XG4gICAgICBjb25zdCB0b2tlbiA9IGFjY2Vzc0F1dGhTdGF0ZSgpLmF1dGhVc2VyLmFjY2Vzc1Rva2VuLnZhbHVlXG4gICAgICBjb25zdCBuYW1lID0gYXZhdGFyTmFtZSA/IGF2YXRhck5hbWUgOiBtb2RlbC5uYW1lLnN1YnN0cmluZygwLCBtb2RlbC5uYW1lLmxhc3RJbmRleE9mKCcuJykpXG4gICAgICBjb25zdCBbbW9kZWxVUkwsIHRodW1ibmFpbFVSTF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGNsaWVudC5zZXJ2aWNlKCd1cGxvYWQtcHJlc2lnbmVkJykuZ2V0KCcnLCB7XG4gICAgICAgICAgcXVlcnk6IHsgdHlwZTogJ2F2YXRhcicsIGZpbGVOYW1lOiBuYW1lICsgJy5nbGInLCBmaWxlU2l6ZTogbW9kZWwuc2l6ZSwgaXNQdWJsaWNBdmF0YXI6IGlzUHVibGljQXZhdGFyIH1cbiAgICAgICAgfSksXG4gICAgICAgIGNsaWVudC5zZXJ2aWNlKCd1cGxvYWQtcHJlc2lnbmVkJykuZ2V0KCcnLCB7XG4gICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgIHR5cGU6ICd1c2VyLXRodW1ibmFpbCcsXG4gICAgICAgICAgICBmaWxlTmFtZTogbmFtZSArICcucG5nJyxcbiAgICAgICAgICAgIGZpbGVTaXplOiB0aHVtYm5haWwuc2l6ZSxcbiAgICAgICAgICAgIG1pbWVUeXBlOiB0aHVtYm5haWwudHlwZSxcbiAgICAgICAgICAgIGlzUHVibGljQXZhdGFyOiBpc1B1YmxpY0F2YXRhclxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIF0pXG5cbiAgICAgIGNvbnN0IG1vZGVsRGF0YSA9IG5ldyBGb3JtRGF0YSgpXG4gICAgICBPYmplY3Qua2V5cyhtb2RlbFVSTC5maWVsZHMpLmZvckVhY2goKGtleSkgPT4gbW9kZWxEYXRhLmFwcGVuZChrZXksIG1vZGVsVVJMLmZpZWxkc1trZXldKSlcbiAgICAgIG1vZGVsRGF0YS5hcHBlbmQoJ2FjbCcsICdwdWJsaWMtcmVhZCcpXG4gICAgICBtb2RlbERhdGEuYXBwZW5kKG1vZGVsVVJMLmxvY2FsID8gJ21lZGlhJyA6ICdmaWxlJywgbW9kZWwpXG4gICAgICBpZiAobW9kZWxVUkwubG9jYWwpIHtcbiAgICAgICAgbGV0IHVwbG9hZFBhdGggPSAnYXZhdGFycydcblxuICAgICAgICBpZiAobW9kZWxVUkwuZmllbGRzLktleSkge1xuICAgICAgICAgIHVwbG9hZFBhdGggPSBtb2RlbFVSTC5maWVsZHMuS2V5XG4gICAgICAgICAgdXBsb2FkUGF0aCA9IHVwbG9hZFBhdGguc3Vic3RyaW5nKDAsIHVwbG9hZFBhdGgubGFzdEluZGV4T2YoJy8nKSlcbiAgICAgICAgfVxuXG4gICAgICAgIG1vZGVsRGF0YS5hcHBlbmQoJ3VwbG9hZFBhdGgnLCB1cGxvYWRQYXRoKVxuICAgICAgICBtb2RlbERhdGEuYXBwZW5kKCdpZCcsIGAke25hbWV9LmdsYmApXG4gICAgICAgIG1vZGVsRGF0YS5hcHBlbmQoJ3NraXBTdGF0aWNSZXNvdXJjZScsICd0cnVlJylcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ21vZGVsRGF0YScsIG1vZGVsRGF0YSlcbiAgICAgIC8vIFVwbG9hZCBNb2RlbCBmaWxlIHRvIFMzXG4gICAgICBjb25zdCBtb2RlbE9wZXJhdGlvbiA9XG4gICAgICAgIG1vZGVsVVJMLmxvY2FsID09PSB0cnVlXG4gICAgICAgICAgPyBheGlvcy5wb3N0KGAke0NvbmZpZy5wdWJsaWNSdW50aW1lQ29uZmlnLmFwaVNlcnZlcn0vbWVkaWFgLCBtb2RlbERhdGEsIHtcbiAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScsXG4gICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgdG9rZW5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICA6IGF4aW9zLnBvc3QobW9kZWxVUkwudXJsLCBtb2RlbERhdGEpXG4gICAgICByZXR1cm4gbW9kZWxPcGVyYXRpb25cbiAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4ge1xuICAgICAgICAgIGNvbnN0IHRodW1ibmFpbERhdGEgPSBuZXcgRm9ybURhdGEoKVxuICAgICAgICAgIE9iamVjdC5rZXlzKHRodW1ibmFpbFVSTC5maWVsZHMpLmZvckVhY2goKGtleSkgPT4gdGh1bWJuYWlsRGF0YS5hcHBlbmQoa2V5LCB0aHVtYm5haWxVUkwuZmllbGRzW2tleV0pKVxuICAgICAgICAgIHRodW1ibmFpbERhdGEuYXBwZW5kKCdhY2wnLCAncHVibGljLXJlYWQnKVxuICAgICAgICAgIHRodW1ibmFpbERhdGEuYXBwZW5kKHRodW1ibmFpbFVSTC5sb2NhbCA9PT0gdHJ1ZSA/ICdtZWRpYScgOiAnZmlsZScsIHRodW1ibmFpbClcbiAgICAgICAgICBpZiAodGh1bWJuYWlsVVJMLmxvY2FsKSB7XG4gICAgICAgICAgICBsZXQgdXBsb2FkUGF0aCA9ICdhdmF0YXJzJ1xuXG4gICAgICAgICAgICBpZiAodGh1bWJuYWlsVVJMLmZpZWxkcy5LZXkpIHtcbiAgICAgICAgICAgICAgdXBsb2FkUGF0aCA9IHRodW1ibmFpbFVSTC5maWVsZHMuS2V5XG4gICAgICAgICAgICAgIHVwbG9hZFBhdGggPSB1cGxvYWRQYXRoLnN1YnN0cmluZygwLCB1cGxvYWRQYXRoLmxhc3RJbmRleE9mKCcvJykpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHVtYm5haWxEYXRhLmFwcGVuZCgndXBsb2FkUGF0aCcsIHVwbG9hZFBhdGgpXG4gICAgICAgICAgICB0aHVtYm5haWxEYXRhLmFwcGVuZCgnbmFtZScsIGAke25hbWV9LnBuZ2ApXG4gICAgICAgICAgICB0aHVtYm5haWxEYXRhLmFwcGVuZCgnc2tpcFN0YXRpY1Jlc291cmNlJywgJ3RydWUnKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IG1vZGVsQ2xvdWRmcm9udFVSTCA9IGBodHRwczovLyR7bW9kZWxVUkwuY2FjaGVEb21haW59LyR7bW9kZWxVUkwuZmllbGRzLktleX1gXG4gICAgICAgICAgY29uc3QgdGh1bWJuYWlsQ2xvdWRmcm9udFVSTCA9IGBodHRwczovLyR7dGh1bWJuYWlsVVJMLmNhY2hlRG9tYWlufS8ke3RodW1ibmFpbFVSTC5maWVsZHMuS2V5fWBcbiAgICAgICAgICBjb25zdCBzZWxmVXNlciA9IGFjY2Vzc0F1dGhTdGF0ZSgpLnVzZXJcbiAgICAgICAgICBjb25zdCBleGlzdGluZ01vZGVsID0gYXdhaXQgY2xpZW50LnNlcnZpY2UoJ3N0YXRpYy1yZXNvdXJjZScpLmZpbmQoe1xuICAgICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgc3RhdGljUmVzb3VyY2VUeXBlOiAnYXZhdGFyJyxcbiAgICAgICAgICAgICAgdXNlcklkOiBpc1B1YmxpY0F2YXRhciA/IG51bGwgOiBzZWxmVXNlci5pZC52YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdUaHVtYm5haWwgPSBhd2FpdCBjbGllbnQuc2VydmljZSgnc3RhdGljLXJlc291cmNlJykuZmluZCh7XG4gICAgICAgICAgICBxdWVyeToge1xuICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICBzdGF0aWNSZXNvdXJjZVR5cGU6ICd1c2VyLXRodW1ibmFpbCcsXG4gICAgICAgICAgICAgIHVzZXJJZDogaXNQdWJsaWNBdmF0YXIgPyBudWxsIDogc2VsZlVzZXIuaWQudmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIC8vIFVwbG9hZCBUaHVtYm5haWwgZmlsZSB0byBTM1xuICAgICAgICAgIGNvbnN0IHRodW1ibmFpbE9wZXJhdGlvbiA9XG4gICAgICAgICAgICB0aHVtYm5haWxVUkwubG9jYWwgPT09IHRydWVcbiAgICAgICAgICAgICAgPyBheGlvcy5wb3N0KGAke0NvbmZpZy5wdWJsaWNSdW50aW1lQ29uZmlnLmFwaVNlcnZlcn0vbWVkaWFgLCB0aHVtYm5haWxEYXRhLCB7XG4gICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScsXG4gICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICdCZWFyZXIgJyArIHRva2VuXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgOiBheGlvcy5wb3N0KHRodW1ibmFpbFVSTC51cmwsIHRodW1ibmFpbERhdGEpXG4gICAgICAgICAgYXdhaXQgdGh1bWJuYWlsT3BlcmF0aW9uXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgIC8vIFNhdmUgVVJMcyB0byBiYWNrZW5kXG4gICAgICAgICAgICAgIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICBleGlzdGluZ01vZGVsLnRvdGFsID4gMFxuICAgICAgICAgICAgICAgICAgPyBjbGllbnQuc2VydmljZSgnc3RhdGljLXJlc291cmNlJykucGF0Y2goZXhpc3RpbmdNb2RlbC5kYXRhWzBdLmlkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgdXJsOiBtb2RlbENsb3VkZnJvbnRVUkwsXG4gICAgICAgICAgICAgICAgICAgICAga2V5OiBtb2RlbFVSTC5maWVsZHMuS2V5XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICA6IGNsaWVudC5zZXJ2aWNlKCdzdGF0aWMtcmVzb3VyY2UnKS5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgc3RhdGljUmVzb3VyY2VUeXBlOiAnYXZhdGFyJyxcbiAgICAgICAgICAgICAgICAgICAgICB1cmw6IG1vZGVsQ2xvdWRmcm9udFVSTCxcbiAgICAgICAgICAgICAgICAgICAgICBrZXk6IG1vZGVsVVJMLmZpZWxkcy5LZXksXG4gICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBpc1B1YmxpY0F2YXRhciA/IG51bGwgOiBzZWxmVXNlci5pZC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBleGlzdGluZ1RodW1ibmFpbC50b3RhbCA+IDBcbiAgICAgICAgICAgICAgICAgID8gY2xpZW50LnNlcnZpY2UoJ3N0YXRpYy1yZXNvdXJjZScpLnBhdGNoKGV4aXN0aW5nVGh1bWJuYWlsLmRhdGFbMF0uaWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICB1cmw6IHRodW1ibmFpbENsb3VkZnJvbnRVUkwsXG4gICAgICAgICAgICAgICAgICAgICAga2V5OiB0aHVtYm5haWxVUkwuZmllbGRzLktleVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgOiBjbGllbnQuc2VydmljZSgnc3RhdGljLXJlc291cmNlJykuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIHN0YXRpY1Jlc291cmNlVHlwZTogJ3VzZXItdGh1bWJuYWlsJyxcbiAgICAgICAgICAgICAgICAgICAgICB1cmw6IHRodW1ibmFpbENsb3VkZnJvbnRVUkwsXG4gICAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6ICdpbWFnZS9wbmcnLFxuICAgICAgICAgICAgICAgICAgICAgIGtleTogdGh1bWJuYWlsVVJMLmZpZWxkcy5LZXksXG4gICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBpc1B1YmxpY0F2YXRhciA/IG51bGwgOiBzZWxmVXNlci5pZC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgIC50aGVuKChfKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoaXNQdWJsaWNBdmF0YXIgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goQXV0aEFjdGlvbi51c2VyQXZhdGFySWRVcGRhdGVkKHJlcykpXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudFxuICAgICAgICAgICAgICAgICAgICAgIC5zZXJ2aWNlKCd1c2VyJylcbiAgICAgICAgICAgICAgICAgICAgICAucGF0Y2goc2VsZlVzZXIuaWQudmFsdWUsIHsgYXZhdGFySWQ6IG5hbWUgfSlcbiAgICAgICAgICAgICAgICAgICAgICAudGhlbigoXykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgQWxlcnRTZXJ2aWNlLmRpc3BhdGNoQWxlcnRTdWNjZXNzKGRpc3BhdGNoLCAnQXZhdGFyIFVwbG9hZGVkIFN1Y2Nlc3NmdWxseS4nKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE5ldHdvcms/Lmluc3RhbmNlPy50cmFuc3BvcnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChOZXR3b3JrLmluc3RhbmNlLnRyYW5zcG9ydCBhcyBhbnkpLnNlbmROZXR3b3JrU3RhdFVwZGF0ZU1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IE1lc3NhZ2VUeXBlcy5BdmF0YXJVcGRhdGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogc2VsZlVzZXIuaWQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZhdGFySWQ6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZhdGFyVVJMOiBtb2RlbENsb3VkZnJvbnRVUkwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsVVJMOiB0aHVtYm5haWxDbG91ZGZyb250VVJMXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBvY2N1cnJlZCB3aGlsZSBzYXZpbmcgQXZhdGFyLicsIGVycilcblxuICAgICAgICAgICAgICAgICAgLy8gSUYgZXJyb3Igb2NjdXJzIHRoZW4gcmVtb3ZlZCBNb2RlbCBhbmQgdGh1bWJuYWlsIGZyb20gUzNcbiAgICAgICAgICAgICAgICAgIGNsaWVudFxuICAgICAgICAgICAgICAgICAgICAuc2VydmljZSgndXBsb2FkLXByZXNpZ25lZCcpXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoJycsIHsgcXVlcnk6IHsga2V5czogW21vZGVsVVJMLmZpZWxkcy5LZXksIHRodW1ibmFpbFVSTC5maWVsZHMuS2V5XSB9IH0pXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBvY2N1cnJlZCB3aGlsZSB1cGxvYWRpbmcgdGh1bWJuYWlsLicsIGVycilcblxuICAgICAgICAgICAgICAvLyBJRiBlcnJvciBvY2N1cnMgdGhlbiByZW1vdmVkIE1vZGVsIGFuZCB0aHVtYm5haWwgZnJvbSBTM1xuICAgICAgICAgICAgICBjbGllbnQuc2VydmljZSgndXBsb2FkLXByZXNpZ25lZCcpLnJlbW92ZSgnJywgeyBxdWVyeTogeyBrZXlzOiBbbW9kZWxVUkwuZmllbGRzLktleV0gfSB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBvY2N1cnJlZCB3aGlsZSB1cGxvYWRpbmcgbW9kZWwuJywgZXJyKVxuICAgICAgICB9KVxuICAgIH1cbiAgfSxcbiAgcmVtb3ZlQXZhdGFyOiAoa2V5czogW3N0cmluZ10pID0+IHtcbiAgICByZXR1cm4gYXN5bmMgKGRpc3BhdGNoOiBEaXNwYXRjaCwgZ2V0U3RhdGU6IGFueSkgPT4ge1xuICAgICAgYXdhaXQgY2xpZW50XG4gICAgICAgIC5zZXJ2aWNlKCd1cGxvYWQtcHJlc2lnbmVkJylcbiAgICAgICAgLnJlbW92ZSgnJywge1xuICAgICAgICAgIHF1ZXJ5OiB7IGtleXMgfVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoXykgPT4ge1xuICAgICAgICAgIEFsZXJ0U2VydmljZS5kaXNwYXRjaEFsZXJ0U3VjY2VzcyhkaXNwYXRjaCwgJ0F2YXRhciBSZW1vdmVkIFN1Y2Nlc3NmdWxseS4nKVxuICAgICAgICAgIEF1dGhTZXJ2aWNlLmZldGNoQXZhdGFyTGlzdCgpKGRpc3BhdGNoKVxuICAgICAgICB9KVxuICAgIH1cbiAgfSxcbiAgZmV0Y2hBdmF0YXJMaXN0OiAoKSA9PiB7XG4gICAgY29uc3Qgc2VsZlVzZXIgPSBhY2Nlc3NBdXRoU3RhdGUoKS51c2VyXG4gICAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaDogRGlzcGF0Y2gpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsaWVudC5zZXJ2aWNlKCdzdGF0aWMtcmVzb3VyY2UnKS5maW5kKHtcbiAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAkc2VsZWN0OiBbJ2lkJywgJ2tleScsICduYW1lJywgJ3VybCcsICdzdGF0aWNSZXNvdXJjZVR5cGUnLCAndXNlcklkJ10sXG4gICAgICAgICAgc3RhdGljUmVzb3VyY2VUeXBlOiB7XG4gICAgICAgICAgICAkaW46IFsnYXZhdGFyJywgJ3VzZXItdGh1bWJuYWlsJ11cbiAgICAgICAgICB9LFxuICAgICAgICAgICRvcjogW3sgdXNlcklkOiBzZWxmVXNlci5pZC52YWx1ZSB9LCB7IHVzZXJJZDogbnVsbCB9XSxcbiAgICAgICAgICAkbGltaXQ6IDEwMDBcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGRpc3BhdGNoKEF1dGhBY3Rpb24udXBkYXRlQXZhdGFyTGlzdChyZXN1bHQuZGF0YSkpXG4gICAgfVxuICB9LFxuICB1cGRhdGVVc2VybmFtZTogKHVzZXJJZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcpID0+IHtcbiAgICByZXR1cm4gKGRpc3BhdGNoOiBEaXNwYXRjaCk6IGFueSA9PiB7XG4gICAgICBjbGllbnRcbiAgICAgICAgLnNlcnZpY2UoJ3VzZXInKVxuICAgICAgICAucGF0Y2godXNlcklkLCB7XG4gICAgICAgICAgbmFtZTogbmFtZVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigocmVzOiBhbnkpID0+IHtcbiAgICAgICAgICBBbGVydFNlcnZpY2UuZGlzcGF0Y2hBbGVydFN1Y2Nlc3MoZGlzcGF0Y2gsICdVc2VybmFtZSB1cGRhdGVkJylcbiAgICAgICAgICBkaXNwYXRjaChBdXRoQWN0aW9uLnVzZXJuYW1lVXBkYXRlZChyZXMpKVxuICAgICAgICB9KVxuICAgIH1cbiAgfSxcbiAgdXBkYXRlVXNlckF2YXRhcklkOiAodXNlcklkOiBzdHJpbmcsIGF2YXRhcklkOiBzdHJpbmcsIGF2YXRhclVSTDogc3RyaW5nLCB0aHVtYm5haWxVUkw6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiAoZGlzcGF0Y2g6IERpc3BhdGNoKTogYW55ID0+IHtcbiAgICAgIGNsaWVudFxuICAgICAgICAuc2VydmljZSgndXNlcicpXG4gICAgICAgIC5wYXRjaCh1c2VySWQsIHtcbiAgICAgICAgICBhdmF0YXJJZDogYXZhdGFySWRcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlczogYW55KSA9PiB7XG4gICAgICAgICAgLy8gZGlzcGF0Y2hBbGVydFN1Y2Nlc3MoZGlzcGF0Y2gsICdVc2VyIEF2YXRhciB1cGRhdGVkJyk7XG4gICAgICAgICAgZGlzcGF0Y2goQXV0aEFjdGlvbi51c2VyQXZhdGFySWRVcGRhdGVkKHJlcykpXG4gICAgICAgICAgaWYgKE5ldHdvcms/Lmluc3RhbmNlPy50cmFuc3BvcnQpXG4gICAgICAgICAgICAoTmV0d29yay5pbnN0YW5jZS50cmFuc3BvcnQgYXMgYW55KS5zZW5kTmV0d29ya1N0YXRVcGRhdGVNZXNzYWdlKHtcbiAgICAgICAgICAgICAgdHlwZTogTWVzc2FnZVR5cGVzLkF2YXRhclVwZGF0ZWQsXG4gICAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgICAgYXZhdGFySWQsXG4gICAgICAgICAgICAgIGF2YXRhclVSTCxcbiAgICAgICAgICAgICAgdGh1bWJuYWlsVVJMXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH1cbiAgfSxcbiAgcmVtb3ZlVXNlcjogKHVzZXJJZDogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIGFzeW5jIChkaXNwYXRjaDogRGlzcGF0Y2gpOiBQcm9taXNlPGFueT4gPT4ge1xuICAgICAgYXdhaXQgY2xpZW50LnNlcnZpY2UoJ3VzZXInKS5yZW1vdmUodXNlcklkKVxuICAgICAgYXdhaXQgY2xpZW50LnNlcnZpY2UoJ2lkZW50aXR5LXByb3ZpZGVyJykucmVtb3ZlKG51bGwsIHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICB1c2VySWQ6IHVzZXJJZFxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgQXV0aFNlcnZpY2UubG9nb3V0VXNlcigpKGRpc3BhdGNoKVxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBwYXJzZVVzZXJXYWxsZXRDcmVkZW50aWFscyA9ICh3YWxsZXQpID0+IHtcbiAgcmV0dXJuIHtcbiAgICB1c2VyOiB7XG4gICAgICBpZDogJ2RpZDp3ZWI6ZXhhbXBsZS5jb20nLFxuICAgICAgZGlzcGxheU5hbWU6ICdhbGljZScsXG4gICAgICBpY29uOiAnaHR0cHM6Ly9tYXRlcmlhbC11aS5jb20vc3RhdGljL2ltYWdlcy9hdmF0YXIvMS5qcGcnXG4gICAgICAvLyBzZXNzaW9uIC8vIHRoaXMgd2lsbCBjb250YWluIHRoZSBhY2Nlc3MgdG9rZW4gYW5kIGhlbHBlciBtZXRob2RzXG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGdldEF2YXRhclJlc291cmNlcyA9ICh1c2VyKSA9PiB7XG4gIHJldHVybiBjbGllbnQuc2VydmljZSgnc3RhdGljLXJlc291cmNlJykuZmluZCh7XG4gICAgcXVlcnk6IHtcbiAgICAgIG5hbWU6IHVzZXIuYXZhdGFySWQsXG4gICAgICBzdGF0aWNSZXNvdXJjZVR5cGU6IHsgJGluOiBbJ3VzZXItdGh1bWJuYWlsJywgJ2F2YXRhciddIH0sXG4gICAgICAkb3I6IFt7IHVzZXJJZDogbnVsbCB9LCB7IHVzZXJJZDogdXNlci5pZCB9XSxcbiAgICAgICRzb3J0OiB7XG4gICAgICAgIHVzZXJJZDogLTFcbiAgICAgIH0sXG4gICAgICAkbGltaXQ6IDJcbiAgICB9XG4gIH0pXG59XG5cbmNvbnN0IGxvYWRBdmF0YXJGb3JVcGRhdGVkVXNlciA9IGFzeW5jICh1c2VyKSA9PiB7XG4gIGlmICh1c2VyLmluc3RhbmNlSWQgPT0gbnVsbCAmJiB1c2VyLmNoYW5uZWxJbnN0YW5jZUlkID09IG51bGwpIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSlcblxuICBjb25zdCB3b3JsZCA9IHVzZVdvcmxkKClcblxuICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCBuZXR3b3JrVXNlciA9IHdvcmxkPy5jbGllbnRzPy5nZXQodXNlci5pZClcblxuICAgIC8vIElmIG5ldHdvcmsgaXMgbm90IGluaXRpYWxpemVkIHRoZW4gd2FpdCB0byBiZSBpbml0aWFsaXplZC5cbiAgICBpZiAoIW5ldHdvcmtVc2VyKSB7XG4gICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgbG9hZEF2YXRhckZvclVwZGF0ZWRVc2VyKHVzZXIpXG4gICAgICAgIHJlc29sdmUodHJ1ZSlcbiAgICAgIH0sIDIwMClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChuZXR3b3JrVXNlcj8uYXZhdGFyRGV0YWlsPy5hdmF0YXJJZCA9PT0gdXNlci5hdmF0YXJJZCkge1xuICAgICAgcmVzb2x2ZSh0cnVlKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gRmV0Y2ggQXZhdGFyIFJlc291cmNlcyBmb3IgdXBkYXRlZCB1c2VyLlxuICAgIGNvbnN0IGF2YXRhcnMgPSBhd2FpdCBnZXRBdmF0YXJSZXNvdXJjZXModXNlcilcblxuICAgIGlmIChhdmF0YXJzPy5kYXRhICYmIGF2YXRhcnMuZGF0YS5sZW5ndGggPT09IDIpIHtcbiAgICAgIGNvbnN0IGF2YXRhclVSTCA9IGF2YXRhcnM/LmRhdGFbMF0uc3RhdGljUmVzb3VyY2VUeXBlID09PSAnYXZhdGFyJyA/IGF2YXRhcnM/LmRhdGFbMF0udXJsIDogYXZhdGFycz8uZGF0YVsxXS51cmxcbiAgICAgIGNvbnN0IHRodW1ibmFpbFVSTCA9XG4gICAgICAgIGF2YXRhcnM/LmRhdGFbMF0uc3RhdGljUmVzb3VyY2VUeXBlID09PSAndXNlci10aHVtYm5haWwnID8gYXZhdGFycz8uZGF0YVswXS51cmwgOiBhdmF0YXJzPy5kYXRhWzFdLnVybFxuXG4gICAgICBuZXR3b3JrVXNlci5hdmF0YXJEZXRhaWwgPSB7IGF2YXRhclVSTCwgdGh1bWJuYWlsVVJMLCBhdmF0YXJJZDogdXNlci5hdmF0YXJJZCB9XG5cbiAgICAgIC8vRmluZCBlbnRpdHlJZCBmcm9tIG5ldHdvcmsgb2JqZWN0cyBvZiB1cGRhdGVkIHVzZXIgYW5kIGRpc3BhdGNoIGF2YXRhciBsb2FkIGV2ZW50LlxuICAgICAgY29uc3Qgd29ybGQgPSBFbmdpbmUuZGVmYXVsdFdvcmxkXG4gICAgICBjb25zdCB1c2VyRW50aXR5ID0gd29ybGQuZ2V0VXNlckF2YXRhckVudGl0eSh1c2VyLmlkKVxuICAgICAgc2V0QXZhdGFyKHVzZXJFbnRpdHksIHVzZXIuYXZhdGFySWQsIGF2YXRhclVSTClcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgbG9hZEF2YXRhckZvclVwZGF0ZWRVc2VyKHVzZXIpXG4gICAgfVxuICAgIHJlc29sdmUodHJ1ZSlcbiAgfSlcbn1cblxuY29uc3QgbG9hZFhSQXZhdGFyRm9yVXBkYXRlZFVzZXIgPSBhc3luYyAodXNlcikgPT4ge1xuICBpZiAoIXVzZXIgfHwgIXVzZXIuaWQpIFByb21pc2UucmVzb2x2ZSh0cnVlKVxuXG4gIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSkgPT4ge1xuICAgIGNvbnN0IG5ldHdvcmtVc2VyID0gRW5naW5lLmRlZmF1bHRXb3JsZC5jbGllbnRzLmdldCh1c2VyLmlkKVxuXG4gICAgLy8gSWYgbmV0d29yayBpcyBub3QgaW5pdGlhbGl6ZWQgdGhlbiB3YWl0IHRvIGJlIGluaXRpYWxpemVkLlxuICAgIGlmICghbmV0d29ya1VzZXIpIHtcbiAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBsb2FkQXZhdGFyRm9yVXBkYXRlZFVzZXIodXNlcilcbiAgICAgICAgcmVzb2x2ZSh0cnVlKVxuICAgICAgfSwgMjAwKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgYXZhdGFyVVJMID0gdXNlci5hdmF0YXJVcmxcbiAgICBjb25zdCB0aHVtYm5haWxVUkwgPSB1c2VyLmF2YXRhclVybFxuXG4gICAgbmV0d29ya1VzZXIuYXZhdGFyRGV0YWlsID0geyBhdmF0YXJVUkwsIHRodW1ibmFpbFVSTCwgYXZhdGFySWQ6IHVzZXIuYXZhdGFySWQgfVxuXG4gICAgLy9GaW5kIGVudGl0eUlkIGZyb20gbmV0d29yayBvYmplY3RzIG9mIHVwZGF0ZWQgdXNlciBhbmQgZGlzcGF0Y2ggYXZhdGFyIGxvYWQgZXZlbnQuXG4gICAgY29uc3Qgd29ybGQgPSBFbmdpbmUuZGVmYXVsdFdvcmxkXG4gICAgY29uc3QgdXNlckVudGl0eSA9IHdvcmxkLmdldFVzZXJBdmF0YXJFbnRpdHkodXNlci5pZClcbiAgICBzZXRBdmF0YXIodXNlckVudGl0eSwgdXNlci5hdmF0YXJJZCwgYXZhdGFyVVJMKVxuICAgIHJlc29sdmUodHJ1ZSlcbiAgfSlcbn1cblxuaWYgKCFDb25maWcucHVibGljUnVudGltZUNvbmZpZy5vZmZsaW5lTW9kZSkge1xuICBjbGllbnQuc2VydmljZSgndXNlcicpLm9uKCdwYXRjaGVkJywgYXN5bmMgKHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IHN0b3JlID0gU3RvcmUuc3RvcmVcbiAgICBjb25zdCBzZWxmVXNlciA9IGFjY2Vzc0F1dGhTdGF0ZSgpLnVzZXJcbiAgICBjb25zdCB1c2VyID0gcmVzb2x2ZVVzZXIocGFyYW1zLnVzZXJSZWxhdGlvbnNoaXApXG5cbiAgICBjb25zb2xlLmxvZygnVXNlciBwYXRjaGVkJywgdXNlcilcbiAgICBhd2FpdCBsb2FkQXZhdGFyRm9yVXBkYXRlZFVzZXIodXNlcilcbiAgICBfdXBkYXRlVXNlcm5hbWUodXNlci5pZCwgdXNlci5uYW1lKVxuXG4gICAgY29uc3QgZWlkID0gZ2V0RWlkKHVzZXIuaWQpXG4gICAgY29uc29sZS5sb2coJ2FkZGluZyB1c2VybmFtZSBjb21wb25lbnQgdG8gdXNlcjogJyArIHVzZXIubmFtZSArICcgZWlkOiAnICsgZWlkKVxuICAgIGlmIChlaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKCFoYXNDb21wb25lbnQoZWlkLCBVc2VyTmFtZUNvbXBvbmVudCkpIHtcbiAgICAgICAgYWRkQ29tcG9uZW50KGVpZCwgVXNlck5hbWVDb21wb25lbnQsIHsgdXNlcm5hbWU6IHVzZXIubmFtZSB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2V0Q29tcG9uZW50KGVpZCwgVXNlck5hbWVDb21wb25lbnQpLnVzZXJuYW1lID0gdXNlci5uYW1lXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNlbGZVc2VyLmlkLnZhbHVlID09PSB1c2VyLmlkKSB7XG4gICAgICBzdG9yZS5kaXNwYXRjaChVc2VyQWN0aW9uLmNsZWFyTGF5ZXJVc2VycygpKVxuICAgICAgaWYgKHNlbGZVc2VyLmNoYW5uZWxJbnN0YW5jZUlkLnZhbHVlICE9PSB1c2VyLmNoYW5uZWxJbnN0YW5jZUlkKVxuICAgICAgICBzdG9yZS5kaXNwYXRjaChVc2VyQWN0aW9uLmNsZWFyQ2hhbm5lbExheWVyVXNlcnMoKSlcbiAgICAgIHN0b3JlLmRpc3BhdGNoKEF1dGhBY3Rpb24udXNlclVwZGF0ZWQodXNlcikpXG4gICAgICBpZiAodXNlci5wYXJ0eUlkKSB7XG4gICAgICAgIC8vIHNldFJlbGF0aW9uc2hpcCgncGFydHknLCB1c2VyLnBhcnR5SWQpO1xuICAgICAgfVxuICAgICAgaWYgKHVzZXIuaW5zdGFuY2VJZCAhPT0gc2VsZlVzZXIuaW5zdGFuY2VJZC52YWx1ZSkge1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKVxuICAgICAgICBsZXQgcXVlcnkgPSBwYXJzZWQuc2VhcmNoUGFyYW1zXG4gICAgICAgIHF1ZXJ5LnNldCgnaW5zdGFuY2VJZCcsIHVzZXI/Lmluc3RhbmNlSWQgfHwgJycpXG4gICAgICAgIHBhcnNlZC5zZWFyY2ggPSBxdWVyeS50b1N0cmluZygpXG5cbiAgICAgICAgaWYgKGhpc3RvcnkucHVzaFN0YXRlKSB7XG4gICAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCAnJywgcGFyc2VkLnRvU3RyaW5nKCkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHdvcmxkID0gRW5naW5lLmRlZmF1bHRXb3JsZFxuICAgICAgaWYgKHR5cGVvZiB3b3JsZC5sb2NhbENsaWVudEVudGl0eSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKCFoYXNDb21wb25lbnQod29ybGQubG9jYWxDbGllbnRFbnRpdHksIFByb3hpbWl0eUNvbXBvbmVudCwgd29ybGQpICYmIGlzQm90KHdpbmRvdykpIHtcbiAgICAgICAgICBhZGRDb21wb25lbnQoXG4gICAgICAgICAgICB3b3JsZC5sb2NhbENsaWVudEVudGl0eSxcbiAgICAgICAgICAgIFByb3hpbWl0eUNvbXBvbmVudCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdXNlcnNJblJhbmdlOiBbXSxcbiAgICAgICAgICAgICAgdXNlcnNJbkludGltYXRlUmFuZ2U6IFtdLFxuICAgICAgICAgICAgICB1c2Vyc0luSGFyYXNzbWVudFJhbmdlOiBbXSxcbiAgICAgICAgICAgICAgdXNlcnNMb29raW5nVG93YXJkczogW11cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB3b3JsZFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWhhc0NvbXBvbmVudCh3b3JsZC5sb2NhbENsaWVudEVudGl0eSwgV2ViQ2FtSW5wdXRDb21wb25lbnQsIHdvcmxkKSkge1xuICAgICAgICAgIGFkZENvbXBvbmVudChcbiAgICAgICAgICAgIHdvcmxkLmxvY2FsQ2xpZW50RW50aXR5LFxuICAgICAgICAgICAgV2ViQ2FtSW5wdXRDb21wb25lbnQsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGVtb3Rpb25zOiBbXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHdvcmxkXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKCdhZGRlZCB3ZWIgY2FtIGlucHV0IGNvbXBvbmVudCB0byBsb2NhbCBjbGllbnQnKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodXNlci5jaGFubmVsSW5zdGFuY2VJZCAhPSBudWxsICYmIHVzZXIuY2hhbm5lbEluc3RhbmNlSWQgPT09IHNlbGZVc2VyLmNoYW5uZWxJbnN0YW5jZUlkLnZhbHVlKVxuICAgICAgICBzdG9yZS5kaXNwYXRjaChVc2VyQWN0aW9uLmFkZGVkQ2hhbm5lbExheWVyVXNlcih1c2VyKSlcbiAgICAgIGlmICh1c2VyLmluc3RhbmNlSWQgIT0gbnVsbCAmJiB1c2VyLmluc3RhbmNlSWQgPT09IHNlbGZVc2VyLmluc3RhbmNlSWQudmFsdWUpIHtcbiAgICAgICAgc3RvcmUuZGlzcGF0Y2goVXNlckFjdGlvbi5hZGRlZExheWVyVXNlcih1c2VyKSlcbiAgICAgICAgc3RvcmUuZGlzcGF0Y2goVXNlckFjdGlvbi5kaXNwbGF5VXNlclRvYXN0KHVzZXIsIHsgdXNlckFkZGVkOiB0cnVlIH0pKVxuICAgICAgfVxuICAgICAgaWYgKHVzZXIuaW5zdGFuY2VJZCAhPT0gc2VsZlVzZXIuaW5zdGFuY2VJZC52YWx1ZSkge1xuICAgICAgICBzdG9yZS5kaXNwYXRjaChVc2VyQWN0aW9uLnJlbW92ZWRMYXllclVzZXIodXNlcikpXG4gICAgICAgIHN0b3JlLmRpc3BhdGNoKFVzZXJBY3Rpb24uZGlzcGxheVVzZXJUb2FzdCh1c2VyLCB7IHVzZXJSZW1vdmVkOiB0cnVlIH0pKVxuICAgICAgfVxuICAgICAgaWYgKHVzZXIuY2hhbm5lbEluc3RhbmNlSWQgIT09IHNlbGZVc2VyLmNoYW5uZWxJbnN0YW5jZUlkLnZhbHVlKVxuICAgICAgICBzdG9yZS5kaXNwYXRjaChVc2VyQWN0aW9uLnJlbW92ZWRDaGFubmVsTGF5ZXJVc2VyKHVzZXIpKVxuICAgIH1cbiAgfSlcbiAgY2xpZW50LnNlcnZpY2UoJ2xvY2F0aW9uLWJhbicpLm9uKCdjcmVhdGVkJywgYXN5bmMgKHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IHN0b3JlID0gU3RvcmUuc3RvcmVcbiAgICBjb25zdCBzdGF0ZSA9IHN0b3JlLmdldFN0YXRlKCkgYXMgYW55XG4gICAgY29uc3Qgc2VsZlVzZXIgPSBhY2Nlc3NBdXRoU3RhdGUoKS51c2VyXG4gICAgY29uc3QgcGFydHkgPSBhY2Nlc3NQYXJ0eVN0YXRlKCkucGFydHkudmFsdWVcbiAgICBjb25zdCBzZWxmUGFydHlVc2VyID1cbiAgICAgIHBhcnR5ICYmIHBhcnR5LnBhcnR5VXNlcnMgPyBwYXJ0eS5wYXJ0eVVzZXJzLmZpbmQoKHBhcnR5VXNlcikgPT4gcGFydHlVc2VyLmlkID09PSBzZWxmVXNlci5pZC52YWx1ZSkgOiB7fVxuICAgIGNvbnN0IGN1cnJlbnRMb2NhdGlvbiA9IGFjY2Vzc0xvY2F0aW9uU3RhdGUoKS5jdXJyZW50TG9jYXRpb24ubG9jYXRpb25cbiAgICBjb25zdCBsb2NhdGlvbkJhbiA9IHBhcmFtcy5sb2NhdGlvbkJhblxuICAgIGlmIChzZWxmVXNlci5pZC52YWx1ZSA9PT0gbG9jYXRpb25CYW4udXNlcklkICYmIGN1cnJlbnRMb2NhdGlvbi5pZC52YWx1ZSA9PT0gbG9jYXRpb25CYW4ubG9jYXRpb25JZCkge1xuICAgICAgLy8gVE9ETzogRGVjb3VwbGUgYW5kIHJlZW5hYmxlIG1lIVxuICAgICAgLy8gZW5kVmlkZW9DaGF0KHsgbGVmdFBhcnR5OiB0cnVlIH0pO1xuICAgICAgLy8gbGVhdmUodHJ1ZSk7XG4gICAgICBpZiAoc2VsZlBhcnR5VXNlciAhPSB1bmRlZmluZWQgJiYgc2VsZlBhcnR5VXNlcj8uaWQgIT0gbnVsbCkge1xuICAgICAgICBhd2FpdCBjbGllbnQuc2VydmljZSgncGFydHktdXNlcicpLnJlbW92ZShzZWxmUGFydHlVc2VyLmlkKVxuICAgICAgfVxuICAgICAgY29uc3QgdXNlciA9IHJlc29sdmVVc2VyKGF3YWl0IGNsaWVudC5zZXJ2aWNlKCd1c2VyJykuZ2V0KHNlbGZVc2VyLmlkLnZhbHVlKSlcbiAgICAgIHN0b3JlLmRpc3BhdGNoKEF1dGhBY3Rpb24udXNlclVwZGF0ZWQodXNlcikpXG4gICAgfVxuICB9KVxufVxuIl0sIm5hbWVzIjpbImJpbmQiLCJyZXF1aXJlJCQwIiwidXRpbHMiLCJidWlsZFVSTCIsImVuY29kZSIsIkludGVyY2VwdG9yTWFuYWdlciIsIm5vcm1hbGl6ZUhlYWRlck5hbWUiLCJlbmhhbmNlRXJyb3IiLCJjcmVhdGVFcnJvciIsInNldHRsZSIsImNvb2tpZXMiLCJpc0Fic29sdXRlVVJMIiwiY29tYmluZVVSTHMiLCJyZXF1aXJlJCQxIiwiYnVpbGRGdWxsUGF0aCIsInBhcnNlSGVhZGVycyIsImlzVVJMU2FtZU9yaWdpbiIsIkNhbmNlbCIsInJlcXVpcmUkJDIiLCJyZXF1aXJlJCQzIiwicmVxdWlyZSQkNCIsInJlcXVpcmUkJDUiLCJyZXF1aXJlJCQ2IiwicmVxdWlyZSQkNyIsImRlZmF1bHRzIiwicmVxdWlyZSQkOCIsInJlcXVpcmUkJDkiLCJ0cmFuc2Zvcm1EYXRhIiwiaXNDYW5jZWwiLCJkaXNwYXRjaFJlcXVlc3QiLCJtZXJnZUNvbmZpZyIsInZhbGlkYXRvcnMiLCJ2YWxpZGF0b3IiLCJBeGlvcyIsImF4aW9zIiwicmVxdWlyZSQkMTAiLCJheGlvc01vZHVsZSJdLCJtYXBwaW5ncyI6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
