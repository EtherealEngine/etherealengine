import{ap as x}from"./_app.009e96ac.js";import"./vendor.c8b8cc93.js";import"./index.0040ebb6.js";function m(y){const r=y.split("/").filter(t=>t!=="."),e=[];return r.forEach(t=>{t===".."&&e.length>0&&e[e.length-1]!==".."?e.pop():e.push(t)}),e.join("/")}function P(y,r){y=m(y),r=m(r);const e=y.split("/"),t=r.split("/");return y!==r&&e.every((i,s)=>i===t[s])}class g extends x{constructor(){super(...arguments);this.DB_VERSION=1,this.DB_NAME="Disc",this._writeCmds=["add","put","delete"]}async initDb(){if(this._db!==void 0)return this._db;if(!("indexedDB"in window))throw this.unavailable("This browser doesn't support IndexedDB");return new Promise((r,e)=>{const t=indexedDB.open(this.DB_NAME,this.DB_VERSION);t.onupgradeneeded=g.doUpgrade,t.onsuccess=()=>{this._db=t.result,r(t.result)},t.onerror=()=>e(t.error),t.onblocked=()=>{console.warn("db blocked")}})}static doUpgrade(r){const t=r.target.result;switch(r.oldVersion){case 0:case 1:default:t.objectStoreNames.contains("FileStorage")&&t.deleteObjectStore("FileStorage"),t.createObjectStore("FileStorage",{keyPath:"path"}).createIndex("by_folder","folder")}}async dbRequest(r,e){const t=this._writeCmds.indexOf(r)!==-1?"readwrite":"readonly";return this.initDb().then(i=>new Promise((s,a)=>{const o=i.transaction(["FileStorage"],t).objectStore("FileStorage")[r](...e);o.onsuccess=()=>s(o.result),o.onerror=()=>a(o.error)}))}async dbIndexRequest(r,e,t){const i=this._writeCmds.indexOf(e)!==-1?"readwrite":"readonly";return this.initDb().then(s=>new Promise((a,n)=>{const d=s.transaction(["FileStorage"],i).objectStore("FileStorage").index(r)[e](...t);d.onsuccess=()=>a(d.result),d.onerror=()=>n(d.error)}))}getPath(r,e){const t=e!==void 0?e.replace(/^[/]+|[/]+$/g,""):"";let i="";return r!==void 0&&(i+="/"+r),e!==""&&(i+="/"+t),i}async clear(){(await this.initDb()).transaction(["FileStorage"],"readwrite").objectStore("FileStorage").clear()}async readFile(r){const e=this.getPath(r.directory,r.path),t=await this.dbRequest("get",[e]);if(t===void 0)throw Error("File does not exist.");return{data:t.content?t.content:""}}async writeFile(r){const e=this.getPath(r.directory,r.path),t=r.data,i=r.recursive,s=await this.dbRequest("get",[e]);if(s&&s.type==="directory")throw"The supplied path is a directory.";const a=r.encoding,n=e.substr(0,e.lastIndexOf("/"));if(await this.dbRequest("get",[n])===void 0){const d=n.indexOf("/",1);if(d!==-1){const f=n.substr(d);await this.mkdir({path:f,directory:r.directory,recursive:i})}}const o=Date.now(),c={path:e,folder:n,type:"file",size:t.length,ctime:o,mtime:o,content:!a&&t.indexOf(",")>=0?t.split(",")[1]:t};return await this.dbRequest("put",[c]),{uri:c.path}}async appendFile(r){const e=this.getPath(r.directory,r.path);let t=r.data;const i=e.substr(0,e.lastIndexOf("/")),s=Date.now();let a=s;const n=await this.dbRequest("get",[e]);if(n&&n.type==="directory")throw"The supplied path is a directory.";if(await this.dbRequest("get",[i])===void 0){const c=i.indexOf("/",1);if(c!==-1){const d=i.substr(c);await this.mkdir({path:d,directory:r.directory,recursive:!0})}}n!==void 0&&(t=n.content+t,a=n.ctime);const o={path:e,folder:i,type:"file",size:t.length,ctime:a,mtime:s,content:t};await this.dbRequest("put",[o])}async deleteFile(r){const e=this.getPath(r.directory,r.path);if(await this.dbRequest("get",[e])===void 0)throw Error("File does not exist.");if((await this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(e)])).length!==0)throw Error("Folder is not empty.");await this.dbRequest("delete",[e])}async mkdir(r){const e=this.getPath(r.directory,r.path),t=r.recursive,i=e.substr(0,e.lastIndexOf("/")),s=(e.match(/\//g)||[]).length,a=await this.dbRequest("get",[i]),n=await this.dbRequest("get",[e]);if(s===1)throw Error("Cannot create Root directory");if(n!==void 0)throw Error("Current directory does already exist.");if(!t&&s!==2&&a===void 0)throw Error("Parent directory must exist");if(t&&s!==2&&a===void 0){const c=i.substr(i.indexOf("/",1));await this.mkdir({path:c,directory:r.directory,recursive:t})}const h=Date.now(),o={path:e,folder:i,type:"directory",size:0,ctime:h,mtime:h};await this.dbRequest("put",[o])}async rmdir(r){const{path:e,directory:t,recursive:i}=r,s=this.getPath(t,e),a=await this.dbRequest("get",[s]);if(a===void 0)throw Error("Folder does not exist.");if(a.type!=="directory")throw Error("Requested path is not a directory");const n=await this.readdir({path:e,directory:t});if(n.files.length!==0&&!i)throw Error("Folder is not empty");for(const h of n.files){const o=`${e}/${h}`;(await this.stat({path:o,directory:t})).type==="file"?await this.deleteFile({path:o,directory:t}):await this.rmdir({path:o,directory:t,recursive:i})}await this.dbRequest("delete",[s])}async readdir(r){const e=this.getPath(r.directory,r.path),t=await this.dbRequest("get",[e]);if(r.path!==""&&t===void 0)throw Error("Folder does not exist.");return{files:(await this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(e)])).map(a=>a.substring(e.length+1))}}async getUri(r){const e=this.getPath(r.directory,r.path);let t=await this.dbRequest("get",[e]);return t===void 0&&(t=await this.dbRequest("get",[e+"/"])),{uri:(t==null?void 0:t.path)||e}}async stat(r){const e=this.getPath(r.directory,r.path);let t=await this.dbRequest("get",[e]);if(t===void 0&&(t=await this.dbRequest("get",[e+"/"])),t===void 0)throw Error("Entry does not exist.");return{type:t.type,size:t.size,ctime:t.ctime,mtime:t.mtime,uri:t.path}}async rename(r){return this._copy(r,!0)}async copy(r){return this._copy(r,!1)}async requestPermissions(){return{publicStorage:"granted"}}async checkPermissions(){return{publicStorage:"granted"}}async _copy(r,e=!1){let{toDirectory:t}=r;const{to:i,from:s,directory:a}=r;if(!i||!s)throw Error("Both to and from must be provided");t||(t=a);const n=this.getPath(a,s),h=this.getPath(t,i);if(n===h)return;if(P(n,h))throw Error("To path cannot contain the from path");let o;try{o=await this.stat({path:i,directory:t})}catch(l){const u=i.split("/");u.pop();const p=u.join("/");if(u.length>0&&(await this.stat({path:p,directory:t})).type!=="directory")throw new Error("Parent directory of the to path is a file")}if(o&&o.type==="directory")throw new Error("Cannot overwrite a directory with a file");const c=await this.stat({path:s,directory:a}),d=async(l,u,p)=>{const b=this.getPath(t,l),w=await this.dbRequest("get",[b]);w.ctime=u,w.mtime=p,await this.dbRequest("put",[w])},f=c.ctime?c.ctime:Date.now();switch(c.type){case"file":{const l=await this.readFile({path:s,directory:a});e&&await this.deleteFile({path:s,directory:a}),await this.writeFile({path:i,directory:t,data:l.data}),e&&await d(i,f,c.mtime);return}case"directory":{if(o)throw Error("Cannot move a directory over an existing object");try{await this.mkdir({path:i,directory:t,recursive:!1}),e&&await d(i,f,c.mtime)}catch(u){}const l=(await this.readdir({path:s,directory:a})).files;for(const u of l)await this._copy({from:`${s}/${u}`,to:`${i}/${u}`,directory:a,toDirectory:t},e);e&&await this.rmdir({path:s,directory:a})}}}}g._debug=!0;export{g as FilesystemWeb};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViLjg1N2IzNTc2LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQGNhcGFjaXRvci9maWxlc3lzdGVtL2Rpc3QvZXNtL3dlYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBXZWJQbHVnaW4gfSBmcm9tICdAY2FwYWNpdG9yL2NvcmUnO1xuZnVuY3Rpb24gcmVzb2x2ZShwYXRoKSB7XG4gICAgY29uc3QgcG9zaXggPSBwYXRoLnNwbGl0KCcvJykuZmlsdGVyKGl0ZW0gPT4gaXRlbSAhPT0gJy4nKTtcbiAgICBjb25zdCBuZXdQb3NpeCA9IFtdO1xuICAgIHBvc2l4LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIGlmIChpdGVtID09PSAnLi4nICYmXG4gICAgICAgICAgICBuZXdQb3NpeC5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICBuZXdQb3NpeFtuZXdQb3NpeC5sZW5ndGggLSAxXSAhPT0gJy4uJykge1xuICAgICAgICAgICAgbmV3UG9zaXgucG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuZXdQb3NpeC5wdXNoKGl0ZW0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG5ld1Bvc2l4LmpvaW4oJy8nKTtcbn1cbmZ1bmN0aW9uIGlzUGF0aFBhcmVudChwYXJlbnQsIGNoaWxkcmVuKSB7XG4gICAgcGFyZW50ID0gcmVzb2x2ZShwYXJlbnQpO1xuICAgIGNoaWxkcmVuID0gcmVzb2x2ZShjaGlsZHJlbik7XG4gICAgY29uc3QgcGF0aHNBID0gcGFyZW50LnNwbGl0KCcvJyk7XG4gICAgY29uc3QgcGF0aHNCID0gY2hpbGRyZW4uc3BsaXQoJy8nKTtcbiAgICByZXR1cm4gKHBhcmVudCAhPT0gY2hpbGRyZW4gJiZcbiAgICAgICAgcGF0aHNBLmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IHZhbHVlID09PSBwYXRoc0JbaW5kZXhdKSk7XG59XG5leHBvcnQgY2xhc3MgRmlsZXN5c3RlbVdlYiBleHRlbmRzIFdlYlBsdWdpbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuREJfVkVSU0lPTiA9IDE7XG4gICAgICAgIHRoaXMuREJfTkFNRSA9ICdEaXNjJztcbiAgICAgICAgdGhpcy5fd3JpdGVDbWRzID0gWydhZGQnLCAncHV0JywgJ2RlbGV0ZSddO1xuICAgIH1cbiAgICBhc3luYyBpbml0RGIoKSB7XG4gICAgICAgIGlmICh0aGlzLl9kYiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoJ2luZGV4ZWREQicgaW4gd2luZG93KSkge1xuICAgICAgICAgICAgdGhyb3cgdGhpcy51bmF2YWlsYWJsZShcIlRoaXMgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgSW5kZXhlZERCXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4odGhpcy5EQl9OQU1FLCB0aGlzLkRCX1ZFUlNJT04pO1xuICAgICAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBGaWxlc3lzdGVtV2ViLmRvVXBncmFkZTtcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2RiID0gcmVxdWVzdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXF1ZXN0LnJlc3VsdCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4gcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgICAgICAgcmVxdWVzdC5vbmJsb2NrZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdkYiBibG9ja2VkJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGRvVXBncmFkZShldmVudCkge1xuICAgICAgICBjb25zdCBldmVudFRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgY29uc3QgZGIgPSBldmVudFRhcmdldC5yZXN1bHQ7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQub2xkVmVyc2lvbikge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIGlmIChkYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKCdGaWxlU3RvcmFnZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRiLmRlbGV0ZU9iamVjdFN0b3JlKCdGaWxlU3RvcmFnZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IGRiLmNyZWF0ZU9iamVjdFN0b3JlKCdGaWxlU3RvcmFnZScsIHsga2V5UGF0aDogJ3BhdGgnIH0pO1xuICAgICAgICAgICAgICAgIHN0b3JlLmNyZWF0ZUluZGV4KCdieV9mb2xkZXInLCAnZm9sZGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZGJSZXF1ZXN0KGNtZCwgYXJncykge1xuICAgICAgICBjb25zdCByZWFkRmxhZyA9IHRoaXMuX3dyaXRlQ21kcy5pbmRleE9mKGNtZCkgIT09IC0xID8gJ3JlYWR3cml0ZScgOiAncmVhZG9ubHknO1xuICAgICAgICByZXR1cm4gdGhpcy5pbml0RGIoKS50aGVuKChjb25uKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR4ID0gY29ubi50cmFuc2FjdGlvbihbJ0ZpbGVTdG9yYWdlJ10sIHJlYWRGbGFnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKCdGaWxlU3RvcmFnZScpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcSA9IHN0b3JlW2NtZF0oLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9ICgpID0+IHJlc29sdmUocmVxLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSAoKSA9PiByZWplY3QocmVxLmVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZGJJbmRleFJlcXVlc3QoaW5kZXhOYW1lLCBjbWQsIGFyZ3MpIHtcbiAgICAgICAgY29uc3QgcmVhZEZsYWcgPSB0aGlzLl93cml0ZUNtZHMuaW5kZXhPZihjbWQpICE9PSAtMSA/ICdyZWFkd3JpdGUnIDogJ3JlYWRvbmx5JztcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdERiKCkudGhlbigoY29ubikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0eCA9IGNvbm4udHJhbnNhY3Rpb24oWydGaWxlU3RvcmFnZSddLCByZWFkRmxhZyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmUgPSB0eC5vYmplY3RTdG9yZSgnRmlsZVN0b3JhZ2UnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHN0b3JlLmluZGV4KGluZGV4TmFtZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVxID0gaW5kZXhbY21kXSguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gKCkgPT4gcmVzb2x2ZShyZXEucmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXEub25lcnJvciA9ICgpID0+IHJlamVjdChyZXEuZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRQYXRoKGRpcmVjdG9yeSwgdXJpUGF0aCkge1xuICAgICAgICBjb25zdCBjbGVhbmVkVXJpUGF0aCA9IHVyaVBhdGggIT09IHVuZGVmaW5lZCA/IHVyaVBhdGgucmVwbGFjZSgvXlsvXSt8Wy9dKyQvZywgJycpIDogJyc7XG4gICAgICAgIGxldCBmc1BhdGggPSAnJztcbiAgICAgICAgaWYgKGRpcmVjdG9yeSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgZnNQYXRoICs9ICcvJyArIGRpcmVjdG9yeTtcbiAgICAgICAgaWYgKHVyaVBhdGggIT09ICcnKVxuICAgICAgICAgICAgZnNQYXRoICs9ICcvJyArIGNsZWFuZWRVcmlQYXRoO1xuICAgICAgICByZXR1cm4gZnNQYXRoO1xuICAgIH1cbiAgICBhc3luYyBjbGVhcigpIHtcbiAgICAgICAgY29uc3QgY29ubiA9IGF3YWl0IHRoaXMuaW5pdERiKCk7XG4gICAgICAgIGNvbnN0IHR4ID0gY29ubi50cmFuc2FjdGlvbihbJ0ZpbGVTdG9yYWdlJ10sICdyZWFkd3JpdGUnKTtcbiAgICAgICAgY29uc3Qgc3RvcmUgPSB0eC5vYmplY3RTdG9yZSgnRmlsZVN0b3JhZ2UnKTtcbiAgICAgICAgc3RvcmUuY2xlYXIoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZCBhIGZpbGUgZnJvbSBkaXNrXG4gICAgICogQHBhcmFtIG9wdGlvbnMgb3B0aW9ucyBmb3IgdGhlIGZpbGUgcmVhZFxuICAgICAqIEByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVhZCBmaWxlIGRhdGEgcmVzdWx0XG4gICAgICovXG4gICAgYXN5bmMgcmVhZEZpbGUob3B0aW9ucykge1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRQYXRoKG9wdGlvbnMuZGlyZWN0b3J5LCBvcHRpb25zLnBhdGgpO1xuICAgICAgICAvLyBjb25zdCBlbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gKGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdnZXQnLCBbcGF0aF0pKTtcbiAgICAgICAgaWYgKGVudHJ5ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignRmlsZSBkb2VzIG5vdCBleGlzdC4nKTtcbiAgICAgICAgcmV0dXJuIHsgZGF0YTogZW50cnkuY29udGVudCA/IGVudHJ5LmNvbnRlbnQgOiAnJyB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZSBhIGZpbGUgdG8gZGlzayBpbiB0aGUgc3BlY2lmaWVkIGxvY2F0aW9uIG9uIGRldmljZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIG9wdGlvbnMgZm9yIHRoZSBmaWxlIHdyaXRlXG4gICAgICogQHJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBmaWxlIHdyaXRlIHJlc3VsdFxuICAgICAqL1xuICAgIGFzeW5jIHdyaXRlRmlsZShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmdldFBhdGgob3B0aW9ucy5kaXJlY3RvcnksIG9wdGlvbnMucGF0aCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBvcHRpb25zLmRhdGE7XG4gICAgICAgIGNvbnN0IGRvUmVjdXJzaXZlID0gb3B0aW9ucy5yZWN1cnNpdmU7XG4gICAgICAgIGNvbnN0IG9jY3VwaWVkRW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoXSkpO1xuICAgICAgICBpZiAob2NjdXBpZWRFbnRyeSAmJiBvY2N1cGllZEVudHJ5LnR5cGUgPT09ICdkaXJlY3RvcnknKVxuICAgICAgICAgICAgdGhyb3cgJ1RoZSBzdXBwbGllZCBwYXRoIGlzIGEgZGlyZWN0b3J5Lic7XG4gICAgICAgIGNvbnN0IGVuY29kaW5nID0gb3B0aW9ucy5lbmNvZGluZztcbiAgICAgICAgY29uc3QgcGFyZW50UGF0aCA9IHBhdGguc3Vic3RyKDAsIHBhdGgubGFzdEluZGV4T2YoJy8nKSk7XG4gICAgICAgIGNvbnN0IHBhcmVudEVudHJ5ID0gKGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdnZXQnLCBbcGFyZW50UGF0aF0pKTtcbiAgICAgICAgaWYgKHBhcmVudEVudHJ5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHN1YkRpckluZGV4ID0gcGFyZW50UGF0aC5pbmRleE9mKCcvJywgMSk7XG4gICAgICAgICAgICBpZiAoc3ViRGlySW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50QXJnUGF0aCA9IHBhcmVudFBhdGguc3Vic3RyKHN1YkRpckluZGV4KTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1rZGlyKHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogcGFyZW50QXJnUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3J5OiBvcHRpb25zLmRpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlOiBkb1JlY3Vyc2l2ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBwYXRoT2JqID0ge1xuICAgICAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgICAgIGZvbGRlcjogcGFyZW50UGF0aCxcbiAgICAgICAgICAgIHR5cGU6ICdmaWxlJyxcbiAgICAgICAgICAgIHNpemU6IGRhdGEubGVuZ3RoLFxuICAgICAgICAgICAgY3RpbWU6IG5vdyxcbiAgICAgICAgICAgIG10aW1lOiBub3csXG4gICAgICAgICAgICBjb250ZW50OiAhZW5jb2RpbmcgJiYgZGF0YS5pbmRleE9mKCcsJykgPj0gMCA/IGRhdGEuc3BsaXQoJywnKVsxXSA6IGRhdGEsXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMuZGJSZXF1ZXN0KCdwdXQnLCBbcGF0aE9ial0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdXJpOiBwYXRoT2JqLnBhdGgsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGVuZCB0byBhIGZpbGUgb24gZGlzayBpbiB0aGUgc3BlY2lmaWVkIGxvY2F0aW9uIG9uIGRldmljZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIG9wdGlvbnMgZm9yIHRoZSBmaWxlIGFwcGVuZFxuICAgICAqIEByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZmlsZSB3cml0ZSByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyBhcHBlbmRGaWxlKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMuZ2V0UGF0aChvcHRpb25zLmRpcmVjdG9yeSwgb3B0aW9ucy5wYXRoKTtcbiAgICAgICAgbGV0IGRhdGEgPSBvcHRpb25zLmRhdGE7XG4gICAgICAgIC8vIGNvbnN0IGVuY29kaW5nID0gb3B0aW9ucy5lbmNvZGluZztcbiAgICAgICAgY29uc3QgcGFyZW50UGF0aCA9IHBhdGguc3Vic3RyKDAsIHBhdGgubGFzdEluZGV4T2YoJy8nKSk7XG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIGxldCBjdGltZSA9IG5vdztcbiAgICAgICAgY29uc3Qgb2NjdXBpZWRFbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhdGhdKSk7XG4gICAgICAgIGlmIChvY2N1cGllZEVudHJ5ICYmIG9jY3VwaWVkRW50cnkudHlwZSA9PT0gJ2RpcmVjdG9yeScpXG4gICAgICAgICAgICB0aHJvdyAnVGhlIHN1cHBsaWVkIHBhdGggaXMgYSBkaXJlY3RvcnkuJztcbiAgICAgICAgY29uc3QgcGFyZW50RW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXJlbnRQYXRoXSkpO1xuICAgICAgICBpZiAocGFyZW50RW50cnkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3Qgc3ViRGlySW5kZXggPSBwYXJlbnRQYXRoLmluZGV4T2YoJy8nLCAxKTtcbiAgICAgICAgICAgIGlmIChzdWJEaXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRBcmdQYXRoID0gcGFyZW50UGF0aC5zdWJzdHIoc3ViRGlySW5kZXgpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubWtkaXIoe1xuICAgICAgICAgICAgICAgICAgICBwYXRoOiBwYXJlbnRBcmdQYXRoLFxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rvcnk6IG9wdGlvbnMuZGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9jY3VwaWVkRW50cnkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGF0YSA9IG9jY3VwaWVkRW50cnkuY29udGVudCArIGRhdGE7XG4gICAgICAgICAgICBjdGltZSA9IG9jY3VwaWVkRW50cnkuY3RpbWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGF0aE9iaiA9IHtcbiAgICAgICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgICAgICBmb2xkZXI6IHBhcmVudFBhdGgsXG4gICAgICAgICAgICB0eXBlOiAnZmlsZScsXG4gICAgICAgICAgICBzaXplOiBkYXRhLmxlbmd0aCxcbiAgICAgICAgICAgIGN0aW1lOiBjdGltZSxcbiAgICAgICAgICAgIG10aW1lOiBub3csXG4gICAgICAgICAgICBjb250ZW50OiBkYXRhLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLmRiUmVxdWVzdCgncHV0JywgW3BhdGhPYmpdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlIGEgZmlsZSBmcm9tIGRpc2tcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBvcHRpb25zIGZvciB0aGUgZmlsZSBkZWxldGVcbiAgICAgKiBAcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGRlbGV0ZWQgZmlsZSBkYXRhIHJlc3VsdFxuICAgICAqL1xuICAgIGFzeW5jIGRlbGV0ZUZpbGUob3B0aW9ucykge1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRQYXRoKG9wdGlvbnMuZGlyZWN0b3J5LCBvcHRpb25zLnBhdGgpO1xuICAgICAgICBjb25zdCBlbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhdGhdKSk7XG4gICAgICAgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0ZpbGUgZG9lcyBub3QgZXhpc3QuJyk7XG4gICAgICAgIGNvbnN0IGVudHJpZXMgPSBhd2FpdCB0aGlzLmRiSW5kZXhSZXF1ZXN0KCdieV9mb2xkZXInLCAnZ2V0QWxsS2V5cycsIFtcbiAgICAgICAgICAgIElEQktleVJhbmdlLm9ubHkocGF0aCksXG4gICAgICAgIF0pO1xuICAgICAgICBpZiAoZW50cmllcy5sZW5ndGggIT09IDApXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignRm9sZGVyIGlzIG5vdCBlbXB0eS4nKTtcbiAgICAgICAgYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2RlbGV0ZScsIFtwYXRoXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGRpcmVjdG9yeS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBvcHRpb25zIGZvciB0aGUgbWtkaXJcbiAgICAgKiBAcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIG1rZGlyIHJlc3VsdFxuICAgICAqL1xuICAgIGFzeW5jIG1rZGlyKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHRoaXMuZ2V0UGF0aChvcHRpb25zLmRpcmVjdG9yeSwgb3B0aW9ucy5wYXRoKTtcbiAgICAgICAgY29uc3QgZG9SZWN1cnNpdmUgPSBvcHRpb25zLnJlY3Vyc2l2ZTtcbiAgICAgICAgY29uc3QgcGFyZW50UGF0aCA9IHBhdGguc3Vic3RyKDAsIHBhdGgubGFzdEluZGV4T2YoJy8nKSk7XG4gICAgICAgIGNvbnN0IGRlcHRoID0gKHBhdGgubWF0Y2goL1xcLy9nKSB8fCBbXSkubGVuZ3RoO1xuICAgICAgICBjb25zdCBwYXJlbnRFbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhcmVudFBhdGhdKSk7XG4gICAgICAgIGNvbnN0IG9jY3VwaWVkRW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtwYXRoXSkpO1xuICAgICAgICBpZiAoZGVwdGggPT09IDEpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignQ2Fubm90IGNyZWF0ZSBSb290IGRpcmVjdG9yeScpO1xuICAgICAgICBpZiAob2NjdXBpZWRFbnRyeSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0N1cnJlbnQgZGlyZWN0b3J5IGRvZXMgYWxyZWFkeSBleGlzdC4nKTtcbiAgICAgICAgaWYgKCFkb1JlY3Vyc2l2ZSAmJiBkZXB0aCAhPT0gMiAmJiBwYXJlbnRFbnRyeSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ1BhcmVudCBkaXJlY3RvcnkgbXVzdCBleGlzdCcpO1xuICAgICAgICBpZiAoZG9SZWN1cnNpdmUgJiYgZGVwdGggIT09IDIgJiYgcGFyZW50RW50cnkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50QXJnUGF0aCA9IHBhcmVudFBhdGguc3Vic3RyKHBhcmVudFBhdGguaW5kZXhPZignLycsIDEpKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWtkaXIoe1xuICAgICAgICAgICAgICAgIHBhdGg6IHBhcmVudEFyZ1BhdGgsXG4gICAgICAgICAgICAgICAgZGlyZWN0b3J5OiBvcHRpb25zLmRpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICByZWN1cnNpdmU6IGRvUmVjdXJzaXZlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgcGF0aE9iaiA9IHtcbiAgICAgICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgICAgICBmb2xkZXI6IHBhcmVudFBhdGgsXG4gICAgICAgICAgICB0eXBlOiAnZGlyZWN0b3J5JyxcbiAgICAgICAgICAgIHNpemU6IDAsXG4gICAgICAgICAgICBjdGltZTogbm93LFxuICAgICAgICAgICAgbXRpbWU6IG5vdyxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ3B1dCcsIFtwYXRoT2JqXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIGRpcmVjdG9yeVxuICAgICAqIEBwYXJhbSBvcHRpb25zIHRoZSBvcHRpb25zIGZvciB0aGUgZGlyZWN0b3J5IHJlbW92ZVxuICAgICAqL1xuICAgIGFzeW5jIHJtZGlyKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyBwYXRoLCBkaXJlY3RvcnksIHJlY3Vyc2l2ZSB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSB0aGlzLmdldFBhdGgoZGlyZWN0b3J5LCBwYXRoKTtcbiAgICAgICAgY29uc3QgZW50cnkgPSAoYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2dldCcsIFtmdWxsUGF0aF0pKTtcbiAgICAgICAgaWYgKGVudHJ5ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignRm9sZGVyIGRvZXMgbm90IGV4aXN0LicpO1xuICAgICAgICBpZiAoZW50cnkudHlwZSAhPT0gJ2RpcmVjdG9yeScpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignUmVxdWVzdGVkIHBhdGggaXMgbm90IGEgZGlyZWN0b3J5Jyk7XG4gICAgICAgIGNvbnN0IHJlYWREaXJSZXN1bHQgPSBhd2FpdCB0aGlzLnJlYWRkaXIoeyBwYXRoLCBkaXJlY3RvcnkgfSk7XG4gICAgICAgIGlmIChyZWFkRGlyUmVzdWx0LmZpbGVzLmxlbmd0aCAhPT0gMCAmJiAhcmVjdXJzaXZlKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0ZvbGRlciBpcyBub3QgZW1wdHknKTtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiByZWFkRGlyUmVzdWx0LmZpbGVzKSB7XG4gICAgICAgICAgICBjb25zdCBlbnRyeVBhdGggPSBgJHtwYXRofS8ke2VudHJ5fWA7XG4gICAgICAgICAgICBjb25zdCBlbnRyeU9iaiA9IGF3YWl0IHRoaXMuc3RhdCh7IHBhdGg6IGVudHJ5UGF0aCwgZGlyZWN0b3J5IH0pO1xuICAgICAgICAgICAgaWYgKGVudHJ5T2JqLnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlRmlsZSh7IHBhdGg6IGVudHJ5UGF0aCwgZGlyZWN0b3J5IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5ybWRpcih7IHBhdGg6IGVudHJ5UGF0aCwgZGlyZWN0b3J5LCByZWN1cnNpdmUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5kYlJlcXVlc3QoJ2RlbGV0ZScsIFtmdWxsUGF0aF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBsaXN0IG9mIGZpbGVzIGZyb20gdGhlIGRpcmVjdG9yeSAobm90IHJlY3Vyc2l2ZSlcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgb3B0aW9ucyBmb3IgdGhlIHJlYWRkaXIgb3BlcmF0aW9uXG4gICAgICogQHJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZWFkZGlyIGRpcmVjdG9yeSBsaXN0aW5nIHJlc3VsdFxuICAgICAqL1xuICAgIGFzeW5jIHJlYWRkaXIob3B0aW9ucykge1xuICAgICAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRQYXRoKG9wdGlvbnMuZGlyZWN0b3J5LCBvcHRpb25zLnBhdGgpO1xuICAgICAgICBjb25zdCBlbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhdGhdKSk7XG4gICAgICAgIGlmIChvcHRpb25zLnBhdGggIT09ICcnICYmIGVudHJ5ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignRm9sZGVyIGRvZXMgbm90IGV4aXN0LicpO1xuICAgICAgICBjb25zdCBlbnRyaWVzID0gYXdhaXQgdGhpcy5kYkluZGV4UmVxdWVzdCgnYnlfZm9sZGVyJywgJ2dldEFsbEtleXMnLCBbSURCS2V5UmFuZ2Uub25seShwYXRoKV0pO1xuICAgICAgICBjb25zdCBuYW1lcyA9IGVudHJpZXMubWFwKGUgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGUuc3Vic3RyaW5nKHBhdGgubGVuZ3RoICsgMSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBmaWxlczogbmFtZXMgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGZ1bGwgRmlsZSBVUkkgZm9yIGEgcGF0aCBhbmQgZGlyZWN0b3J5XG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG9wdGlvbnMgZm9yIHRoZSBzdGF0IG9wZXJhdGlvblxuICAgICAqIEByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZmlsZSBzdGF0IHJlc3VsdFxuICAgICAqL1xuICAgIGFzeW5jIGdldFVyaShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmdldFBhdGgob3B0aW9ucy5kaXJlY3RvcnksIG9wdGlvbnMucGF0aCk7XG4gICAgICAgIGxldCBlbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhdGhdKSk7XG4gICAgICAgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBlbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhdGggKyAnLyddKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVyaTogKGVudHJ5ID09PSBudWxsIHx8IGVudHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlbnRyeS5wYXRoKSB8fCBwYXRoLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gZGF0YSBhYm91dCBhIGZpbGVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgb3B0aW9ucyBmb3IgdGhlIHN0YXQgb3BlcmF0aW9uXG4gICAgICogQHJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBmaWxlIHN0YXQgcmVzdWx0XG4gICAgICovXG4gICAgYXN5bmMgc3RhdChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLmdldFBhdGgob3B0aW9ucy5kaXJlY3RvcnksIG9wdGlvbnMucGF0aCk7XG4gICAgICAgIGxldCBlbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhdGhdKSk7XG4gICAgICAgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBlbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW3BhdGggKyAnLyddKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVudHJ5ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aHJvdyBFcnJvcignRW50cnkgZG9lcyBub3QgZXhpc3QuJyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBlbnRyeS50eXBlLFxuICAgICAgICAgICAgc2l6ZTogZW50cnkuc2l6ZSxcbiAgICAgICAgICAgIGN0aW1lOiBlbnRyeS5jdGltZSxcbiAgICAgICAgICAgIG10aW1lOiBlbnRyeS5tdGltZSxcbiAgICAgICAgICAgIHVyaTogZW50cnkucGF0aCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVuYW1lIGEgZmlsZSBvciBkaXJlY3RvcnlcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgb3B0aW9ucyBmb3IgdGhlIHJlbmFtZSBvcGVyYXRpb25cbiAgICAgKiBAcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlbmFtZSByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyByZW5hbWUob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29weShvcHRpb25zLCB0cnVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29weSBhIGZpbGUgb3IgZGlyZWN0b3J5XG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG9wdGlvbnMgZm9yIHRoZSBjb3B5IG9wZXJhdGlvblxuICAgICAqIEByZXR1cm4gYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgY29weSByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyBjb3B5KG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvcHkob3B0aW9ucywgZmFsc2UpO1xuICAgIH1cbiAgICBhc3luYyByZXF1ZXN0UGVybWlzc2lvbnMoKSB7XG4gICAgICAgIHJldHVybiB7IHB1YmxpY1N0b3JhZ2U6ICdncmFudGVkJyB9O1xuICAgIH1cbiAgICBhc3luYyBjaGVja1Blcm1pc3Npb25zKCkge1xuICAgICAgICByZXR1cm4geyBwdWJsaWNTdG9yYWdlOiAnZ3JhbnRlZCcgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdGhhdCBjYW4gcGVyZm9ybSBhIGNvcHkgb3IgYSByZW5hbWVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgb3B0aW9ucyBmb3IgdGhlIHJlbmFtZSBvcGVyYXRpb25cbiAgICAgKiBAcGFyYW0gZG9SZW5hbWUgd2hldGhlciB0byBwZXJmb3JtIGEgcmVuYW1lIG9yIGNvcHkgb3BlcmF0aW9uXG4gICAgICogQHJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyBfY29weShvcHRpb25zLCBkb1JlbmFtZSA9IGZhbHNlKSB7XG4gICAgICAgIGxldCB7IHRvRGlyZWN0b3J5IH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCB7IHRvLCBmcm9tLCBkaXJlY3Rvcnk6IGZyb21EaXJlY3RvcnkgfSA9IG9wdGlvbnM7XG4gICAgICAgIGlmICghdG8gfHwgIWZyb20pIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdCb3RoIHRvIGFuZCBmcm9tIG11c3QgYmUgcHJvdmlkZWQnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBubyBcInRvXCIgZGlyZWN0b3J5IGlzIHByb3ZpZGVkLCB1c2UgdGhlIFwiZnJvbVwiIGRpcmVjdG9yeVxuICAgICAgICBpZiAoIXRvRGlyZWN0b3J5KSB7XG4gICAgICAgICAgICB0b0RpcmVjdG9yeSA9IGZyb21EaXJlY3Rvcnk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZnJvbVBhdGggPSB0aGlzLmdldFBhdGgoZnJvbURpcmVjdG9yeSwgZnJvbSk7XG4gICAgICAgIGNvbnN0IHRvUGF0aCA9IHRoaXMuZ2V0UGF0aCh0b0RpcmVjdG9yeSwgdG8pO1xuICAgICAgICAvLyBUZXN0IHRoYXQgdGhlIFwidG9cIiBhbmQgXCJmcm9tXCIgbG9jYXRpb25zIGFyZSBkaWZmZXJlbnRcbiAgICAgICAgaWYgKGZyb21QYXRoID09PSB0b1BhdGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQYXRoUGFyZW50KGZyb21QYXRoLCB0b1BhdGgpKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcignVG8gcGF0aCBjYW5ub3QgY29udGFpbiB0aGUgZnJvbSBwYXRoJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgdGhlIHN0YXRlIG9mIHRoZSBcInRvXCIgbG9jYXRpb25cbiAgICAgICAgbGV0IHRvT2JqO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdG9PYmogPSBhd2FpdCB0aGlzLnN0YXQoe1xuICAgICAgICAgICAgICAgIHBhdGg6IHRvLFxuICAgICAgICAgICAgICAgIGRpcmVjdG9yeTogdG9EaXJlY3RvcnksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gVG8gbG9jYXRpb24gZG9lcyBub3QgZXhpc3QsIGVuc3VyZSB0aGUgZGlyZWN0b3J5IGNvbnRhaW5pbmcgXCJ0b1wiIGxvY2F0aW9uIGV4aXN0cyBhbmQgaXMgYSBkaXJlY3RvcnlcbiAgICAgICAgICAgIGNvbnN0IHRvUGF0aENvbXBvbmVudHMgPSB0by5zcGxpdCgnLycpO1xuICAgICAgICAgICAgdG9QYXRoQ29tcG9uZW50cy5wb3AoKTtcbiAgICAgICAgICAgIGNvbnN0IHRvUGF0aCA9IHRvUGF0aENvbXBvbmVudHMuam9pbignLycpO1xuICAgICAgICAgICAgLy8gQ2hlY2sgdGhlIGNvbnRhaW5pbmcgZGlyZWN0b3J5IG9mIHRoZSBcInRvXCIgbG9jYXRpb24gZXhpc3RzXG4gICAgICAgICAgICBpZiAodG9QYXRoQ29tcG9uZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9QYXJlbnREaXJlY3RvcnkgPSBhd2FpdCB0aGlzLnN0YXQoe1xuICAgICAgICAgICAgICAgICAgICBwYXRoOiB0b1BhdGgsXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdG9yeTogdG9EaXJlY3RvcnksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHRvUGFyZW50RGlyZWN0b3J5LnR5cGUgIT09ICdkaXJlY3RvcnknKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGFyZW50IGRpcmVjdG9yeSBvZiB0aGUgdG8gcGF0aCBpcyBhIGZpbGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2Fubm90IG92ZXJ3cml0ZSBhIGRpcmVjdG9yeVxuICAgICAgICBpZiAodG9PYmogJiYgdG9PYmoudHlwZSA9PT0gJ2RpcmVjdG9yeScpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IG92ZXJ3cml0ZSBhIGRpcmVjdG9yeSB3aXRoIGEgZmlsZScpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEVuc3VyZSB0aGUgXCJmcm9tXCIgb2JqZWN0IGV4aXN0c1xuICAgICAgICBjb25zdCBmcm9tT2JqID0gYXdhaXQgdGhpcy5zdGF0KHtcbiAgICAgICAgICAgIHBhdGg6IGZyb20sXG4gICAgICAgICAgICBkaXJlY3Rvcnk6IGZyb21EaXJlY3RvcnksXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBTZXQgdGhlIG10aW1lL2N0aW1lIG9mIHRoZSBzdXBwbGllZCBwYXRoXG4gICAgICAgIGNvbnN0IHVwZGF0ZVRpbWUgPSBhc3luYyAocGF0aCwgY3RpbWUsIG10aW1lKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmdWxsUGF0aCA9IHRoaXMuZ2V0UGF0aCh0b0RpcmVjdG9yeSwgcGF0aCk7XG4gICAgICAgICAgICBjb25zdCBlbnRyeSA9IChhd2FpdCB0aGlzLmRiUmVxdWVzdCgnZ2V0JywgW2Z1bGxQYXRoXSkpO1xuICAgICAgICAgICAgZW50cnkuY3RpbWUgPSBjdGltZTtcbiAgICAgICAgICAgIGVudHJ5Lm10aW1lID0gbXRpbWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRiUmVxdWVzdCgncHV0JywgW2VudHJ5XSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGN0aW1lID0gZnJvbU9iai5jdGltZSA/IGZyb21PYmouY3RpbWUgOiBEYXRlLm5vdygpO1xuICAgICAgICBzd2l0Y2ggKGZyb21PYmoudHlwZSkge1xuICAgICAgICAgICAgLy8gVGhlIFwiZnJvbVwiIG9iamVjdCBpcyBhIGZpbGVcbiAgICAgICAgICAgIGNhc2UgJ2ZpbGUnOiB7XG4gICAgICAgICAgICAgICAgLy8gUmVhZCB0aGUgZmlsZVxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0aGlzLnJlYWRGaWxlKHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogZnJvbSxcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3J5OiBmcm9tRGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIE9wdGlvbmFsbHkgcmVtb3ZlIHRoZSBmaWxlXG4gICAgICAgICAgICAgICAgaWYgKGRvUmVuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlRmlsZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBmcm9tLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0b3J5OiBmcm9tRGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gV3JpdGUgdGhlIGZpbGUgdG8gdGhlIG5ldyBsb2NhdGlvblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVGaWxlKHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogdG8sXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdG9yeTogdG9EaXJlY3RvcnksXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGZpbGUuZGF0YSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBDb3B5IHRoZSBtdGltZS9jdGltZSBvZiBhIHJlbmFtZWQgZmlsZVxuICAgICAgICAgICAgICAgIGlmIChkb1JlbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB1cGRhdGVUaW1lKHRvLCBjdGltZSwgZnJvbU9iai5tdGltZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFJlc29sdmUgcHJvbWlzZVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2RpcmVjdG9yeSc6IHtcbiAgICAgICAgICAgICAgICBpZiAodG9PYmopIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0Nhbm5vdCBtb3ZlIGEgZGlyZWN0b3J5IG92ZXIgYW4gZXhpc3Rpbmcgb2JqZWN0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgdG8gZGlyZWN0b3J5XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubWtkaXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogdG8sXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rvcnk6IHRvRGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIG10aW1lL2N0aW1lIG9mIGEgcmVuYW1lZCBkaXJlY3RvcnlcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvUmVuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB1cGRhdGVUaW1lKHRvLCBjdGltZSwgZnJvbU9iai5tdGltZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEl0ZXJhdGUgb3ZlciB0aGUgY29udGVudHMgb2YgdGhlIGZyb20gbG9jYXRpb25cbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50cyA9IChhd2FpdCB0aGlzLnJlYWRkaXIoe1xuICAgICAgICAgICAgICAgICAgICBwYXRoOiBmcm9tLFxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rvcnk6IGZyb21EaXJlY3RvcnksXG4gICAgICAgICAgICAgICAgfSkpLmZpbGVzO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZW5hbWUgb2YgY29udGVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTW92ZSBpdGVtIGZyb20gdGhlIGZyb20gZGlyZWN0b3J5IHRvIHRoZSB0byBkaXJlY3RvcnlcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fY29weSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiBgJHtmcm9tfS8ke2ZpbGVuYW1lfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB0bzogYCR7dG99LyR7ZmlsZW5hbWV9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdG9yeTogZnJvbURpcmVjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvRGlyZWN0b3J5LFxuICAgICAgICAgICAgICAgICAgICB9LCBkb1JlbmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIE9wdGlvbmFsbHkgcmVtb3ZlIHRoZSBvcmlnaW5hbCBmcm9tIGRpcmVjdG9yeVxuICAgICAgICAgICAgICAgIGlmIChkb1JlbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJtZGlyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGZyb20sXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rvcnk6IGZyb21EaXJlY3RvcnksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbkZpbGVzeXN0ZW1XZWIuX2RlYnVnID0gdHJ1ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdlYi5qcy5tYXAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6ImlHQUNBLFdBQWlCLEVBQU0sQ0FDbkIsS0FBTSxHQUFRLEVBQUssTUFBTSxLQUFLLE9BQU8sR0FBUSxJQUFTLEtBQ2hELEVBQVcs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
