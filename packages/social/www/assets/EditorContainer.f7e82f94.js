import{aq as Yd,ar as Xd,_ as ne,as as ts,ak as $,at as cr,B as mt,E as ns,p as rs,a9 as ee,z as Jd,au as is,an as Zd,S as Qd,al as os,am as ef}from"./_app.009e96ac.js";import{r as u,R as p,m as U,b as On,h as Zt,t as Ft,s as Bt,p as jt,e as G,j as Oe,q as Ae,c as as,g as ss,n as ls,f as tf,u as Pt,d as cs,w as Tn,i as De}from"./vendor.c8b8cc93.js";import{j as de,D as nf,u as rf,k as of,l as af,H as sf,U as lf,T as cf,N as us,f as Be,_ as Wt,w as ur,K as we,m as dr,n as ds,P as He,o as Jr,p as fr,i as ho,I as Te,q as uf,r as vo,t as Pn,v as H,E as ke,x as Q,y as df,z as ff,A as pf,G as pr,e as hf,J as vf,L as Y,O as Le,a as fs,b as fn,Q as mo,R as hr,V as mf,W as vr,X as gf,Y as pn,Z as ps,$ as bf,a0 as ot,s as yf,a1 as wf,a2 as xf,a3 as Ht,a4 as Zr,a5 as Cf,a6 as _n,a7 as go,a8 as Sf,a9 as Qr,aa as ei,ab as Ef,ac as hs,B as Df,ad as Mf,ae as Of,af as bo,ag as Tf,ah as Pf,ai as _f,aj as If,ak as Rf,al as kf,am as Ze,an as vs,ao as Nf,ap as Af,aq as Lf,ar as $t,as as zf,at as Ff,au as Bf,av as jf}from"./projectFunctions.0f4266a2.js";import{L as ms,S as Wf}from"./SceneService.fc3e3726.js";import{a as fe}from"./index.472b90b5.js";import{K as Hf}from"./_baseIteratee.1eb87af4.js";import{b as $f,u as yo,g as Kf}from"./upload.38e3baaf.js";import{V as Vf,S as Uf,P as Gf,W as qf,am as Yf,ak as Xf}from"./three.module.0404e109.js";import{G as Jf}from"./avatarFunctions.c7a0e273.js";import{C as ti}from"./index.0040ebb6.js";import"./___vite-browser-external_commonjs-proxy.5bbecace.js";import"./__vite-browser-external.b6126e45.js";import"./SystemUpdateType.4e88f289.js";import"./index.9af95596.js";import"./createSvgIcon.f69c4b03.js";import"./capitalize.afc8605e.js";import"./useControlled.815a4900.js";import"./useFormControl.7fcaf9d0.js";import"./IconButton.6d410d2a.js";import"./ButtonBase.4949ff38.js";import"./createSvgIcon.43fd6609.js";import"./ownerWindow.3d7152ce.js";import"./index.1a856ebd.js";import"./AlertService.bfed2141.js";import"./feathers.081246a7.js";var lt;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(lt||(lt={}));var wo="dnd-core/INIT_COORDS",ni="dnd-core/BEGIN_DRAG",xo="dnd-core/PUBLISH_DRAG_SOURCE",ri="dnd-core/HOVER",ii="dnd-core/DROP",oi="dnd-core/END_DRAG";function gs(t,e){return{type:wo,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}function ai(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ai=function(n){return typeof n}:ai=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ai(t)}function Zf(t,e,n){return e.split(".").reduce(function(r,i){return r&&r[i]?r[i]:n||null},t)}function Qf(t,e){return t.filter(function(n){return n!==e})}function bs(t){return ai(t)==="object"}function ep(t,e){var n=new Map,r=function(a){n.set(a,n.has(a)?n.get(a)+1:1)};t.forEach(r),e.forEach(r);var i=[];return n.forEach(function(o,a){o===1&&i.push(a)}),i}function tp(t,e){return t.filter(function(n){return e.indexOf(n)>-1})}var np={type:wo,payload:{clientOffset:null,sourceClientOffset:null}};function rp(t){return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{publishSource:!0},i=r.publishSource,o=i===void 0?!0:i,a=r.clientOffset,s=r.getSourceClientOffset,l=t.getMonitor(),c=t.getRegistry();t.dispatch(gs(a)),ip(n,l,c);var d=sp(n,l);if(d===null){t.dispatch(np);return}var f=null;if(a){if(!s)throw new Error("getSourceClientOffset must be defined");op(s),f=s(d)}t.dispatch(gs(a,f));var h=c.getSource(d),v=h.beginDrag(l,d);if(v!=null){ap(v),c.pinSource(d);var m=c.getSourceType(d);return{type:ni,payload:{itemType:m,item:v,sourceId:d,clientOffset:a||null,sourceClientOffset:f||null,isSourcePublic:!!o}}}}}function ip(t,e,n){de(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(r){de(n.getSource(r),"Expected sourceIds to be registered.")})}function op(t){de(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function ap(t){de(bs(t),"Item must be an object.")}function sp(t,e){for(var n=null,r=t.length-1;r>=0;r--)if(e.canDragSource(t[r])){n=t[r];break}return n}function lp(t){return function(){var n=t.getMonitor();if(n.isDragging())return{type:xo}}}function Co(t,e){return e===null?t===null:Array.isArray(t)?t.some(function(n){return n===e}):t===e}function cp(t){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.clientOffset;up(n);var o=n.slice(0),a=t.getMonitor(),s=t.getRegistry();dp(o,a,s);var l=a.getItemType();return fp(o,s,l),pp(o,a,s),{type:ri,payload:{targetIds:o,clientOffset:i||null}}}}function up(t){de(Array.isArray(t),"Expected targetIds to be an array.")}function dp(t,e,n){de(e.isDragging(),"Cannot call hover while not dragging."),de(!e.didDrop(),"Cannot call hover after drop.");for(var r=0;r<t.length;r++){var i=t[r];de(t.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array.");var o=n.getTarget(i);de(o,"Expected targetIds to be registered.")}}function fp(t,e,n){for(var r=t.length-1;r>=0;r--){var i=t[r],o=e.getTargetType(i);Co(o,n)||t.splice(r,1)}}function pp(t,e,n){t.forEach(function(r){var i=n.getTarget(r);i.hover(e,r)})}function ys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ws(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ys(Object(n),!0).forEach(function(r){hp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ys(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vp(t){return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.getMonitor(),i=t.getRegistry();mp(r);var o=yp(r);o.forEach(function(a,s){var l=gp(a,s,i,r),c={type:ii,payload:{dropResult:ws(ws({},n),l)}};t.dispatch(c)})}}function mp(t){de(t.isDragging(),"Cannot call drop while not dragging."),de(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function gp(t,e,n,r){var i=n.getTarget(t),o=i?i.drop(r,t):void 0;return bp(o),typeof o=="undefined"&&(o=e===0?{}:r.getDropResult()),o}function bp(t){de(typeof t=="undefined"||bs(t),"Drop result must either be an object or undefined.")}function yp(t){var e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function wp(t){return function(){var n=t.getMonitor(),r=t.getRegistry();xp(n);var i=n.getSourceId();if(i!=null){var o=r.getSource(i,!0);o.endDrag(n,i),r.unpinSource()}return{type:oi}}}function xp(t){de(t.isDragging(),"Cannot call endDrag while not dragging.")}function Cp(t){return{beginDrag:rp(t),publishDragSource:lp(t),hover:cp(t),drop:vp(t),endDrag:wp(t)}}function Sp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ep(t,e,n){return e&&xs(t.prototype,e),n&&xs(t,n),t}function mr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Dp=function(){function t(e,n){var r=this;Sp(this,t),mr(this,"store",void 0),mr(this,"monitor",void 0),mr(this,"backend",void 0),mr(this,"isSetUp",!1),mr(this,"handleRefCountChange",function(){var i=r.store.getState().refCount>0;r.backend&&(i&&!r.isSetUp?(r.backend.setup(),r.isSetUp=!0):!i&&r.isSetUp&&(r.backend.teardown(),r.isSetUp=!1))}),this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}return Ep(t,[{key:"receiveBackend",value:function(n){this.backend=n}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var n=this,r=this.store.dispatch;function i(a){return function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var d=a.apply(n,l);typeof d!="undefined"&&r(d)}}var o=Cp(this);return Object.keys(o).reduce(function(a,s){var l=o[s];return a[s]=i(l),a},{})}},{key:"dispatch",value:function(n){this.store.dispatch(n)}}]),t}(),Mp=function(e,n){return e===n};function Op(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function Tp(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Mp;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(!n(t[r],e[r]))return!1;return!0}function Cs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ss(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cs(Object(n),!0).forEach(function(r){Pp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cs(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Es={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function _p(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Es,e=arguments.length>1?arguments[1]:void 0,n=e.payload;switch(e.type){case wo:case ni:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case ri:return Op(t.clientOffset,n.clientOffset)?t:Ss(Ss({},t),{},{clientOffset:n.clientOffset});case oi:case ii:return Es;default:return t}}var So="dnd-core/ADD_SOURCE",Eo="dnd-core/ADD_TARGET",Do="dnd-core/REMOVE_SOURCE",si="dnd-core/REMOVE_TARGET";function Ip(t){return{type:So,payload:{sourceId:t}}}function Rp(t){return{type:Eo,payload:{targetId:t}}}function kp(t){return{type:Do,payload:{sourceId:t}}}function Np(t){return{type:si,payload:{targetId:t}}}function Ds(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ct(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ds(Object(n),!0).forEach(function(r){Ap(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ds(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ap(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Lp={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function zp(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Lp,e=arguments.length>1?arguments[1]:void 0,n=e.payload;switch(e.type){case ni:return ct(ct({},t),{},{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case xo:return ct(ct({},t),{},{isSourcePublic:!0});case ri:return ct(ct({},t),{},{targetIds:n.targetIds});case si:return t.targetIds.indexOf(n.targetId)===-1?t:ct(ct({},t),{},{targetIds:Qf(t.targetIds,n.targetId)});case ii:return ct(ct({},t),{},{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case oi:return ct(ct({},t),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function Fp(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case So:case Eo:return t+1;case Do:case si:return t-1;default:return t}}var li=[],Mo=[];li.__IS_NONE__=!0;Mo.__IS_ALL__=!0;function Bp(t,e){if(t===li)return!1;if(t===Mo||typeof e=="undefined")return!0;var n=tp(e,t);return n.length>0}function jp(){var t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ri:break;case So:case Eo:case si:case Do:return li;case ni:case xo:case oi:case ii:default:return Mo}var e=t.payload,n=e.targetIds,r=n===void 0?[]:n,i=e.prevTargetIds,o=i===void 0?[]:i,a=ep(r,o),s=a.length>0||!Tp(r,o);if(!s)return li;var l=o[o.length-1],c=r[r.length-1];return l!==c&&(l&&a.push(l),c&&a.push(c)),a}function Wp(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return t+1}function Ms(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Os(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ms(Object(n),!0).forEach(function(r){Hp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ms(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $p(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:jp(t.dirtyHandlerIds,{type:e.type,payload:Os(Os({},e.payload),{},{prevTargetIds:Zf(t,"dragOperation.targetIds",[])})}),dragOffset:_p(t.dragOffset,e),refCount:Fp(t.refCount,e),dragOperation:zp(t.dragOperation,e),stateId:Wp(t.stateId)}}function Kp(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Ts(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Vp(t){var e=t.clientOffset,n=t.initialClientOffset,r=t.initialSourceClientOffset;return!e||!n||!r?null:Ts(Kp(e,r),n)}function Up(t){var e=t.clientOffset,n=t.initialClientOffset;return!e||!n?null:Ts(e,n)}function Gp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ps(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qp(t,e,n){return e&&Ps(t.prototype,e),n&&Ps(t,n),t}function _s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Yp=function(){function t(e,n){Gp(this,t),_s(this,"store",void 0),_s(this,"registry",void 0),this.store=e,this.registry=n}return qp(t,[{key:"subscribeToStateChange",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{handlerIds:void 0},o=i.handlerIds;de(typeof n=="function","listener must be a function."),de(typeof o=="undefined"||Array.isArray(o),"handlerIds, when specified, must be an array of strings.");var a=this.store.getState().stateId,s=function(){var c=r.store.getState(),d=c.stateId;try{var f=d===a||d===a+1&&!Bp(c.dirtyHandlerIds,o);f||n()}finally{a=d}};return this.store.subscribe(s)}},{key:"subscribeToOffsetChange",value:function(n){var r=this;de(typeof n=="function","listener must be a function.");var i=this.store.getState().dragOffset,o=function(){var s=r.store.getState().dragOffset;s!==i&&(i=s,n())};return this.store.subscribe(o)}},{key:"canDragSource",value:function(n){if(!n)return!1;var r=this.registry.getSource(n);return de(r,"Expected to find a valid source. sourceId=".concat(n)),this.isDragging()?!1:r.canDrag(this,n)}},{key:"canDropOnTarget",value:function(n){if(!n)return!1;var r=this.registry.getTarget(n);if(de(r,"Expected to find a valid target. targetId=".concat(n)),!this.isDragging()||this.didDrop())return!1;var i=this.registry.getTargetType(n),o=this.getItemType();return Co(i,o)&&r.canDrop(this,n)}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(n){if(!n)return!1;var r=this.registry.getSource(n,!0);if(de(r,"Expected to find a valid source. sourceId=".concat(n)),!this.isDragging()||!this.isSourcePublic())return!1;var i=this.registry.getSourceType(n),o=this.getItemType();return i!==o?!1:r.isDragging(this,n)}},{key:"isOverTarget",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shallow:!1};if(!n)return!1;var i=r.shallow;if(!this.isDragging())return!1;var o=this.registry.getTargetType(n),a=this.getItemType();if(a&&!Co(o,a))return!1;var s=this.getTargetIds();if(!s.length)return!1;var l=s.indexOf(n);return i?l===s.length-1:l>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return Vp(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return Up(this.store.getState().dragOffset)}}]),t}(),Xp=0;function Jp(){return Xp++}function ci(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ci=function(n){return typeof n}:ci=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ci(t)}function Zp(t){de(typeof t.canDrag=="function","Expected canDrag to be a function."),de(typeof t.beginDrag=="function","Expected beginDrag to be a function."),de(typeof t.endDrag=="function","Expected endDrag to be a function.")}function Qp(t){de(typeof t.canDrop=="function","Expected canDrop to be a function."),de(typeof t.hover=="function","Expected hover to be a function."),de(typeof t.drop=="function","Expected beginDrag to be a function.")}function Oo(t,e){if(e&&Array.isArray(t)){t.forEach(function(n){return Oo(n,!1)});return}de(typeof t=="string"||ci(t)==="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}function ui(t){_t.length||di(),_t[_t.length]=t}var _t=[],di,It=0,eh=1024;function Is(){for(;It<_t.length;){var t=It;if(It=It+1,_t[t].call(),It>eh){for(var e=0,n=_t.length-It;e<n;e++)_t[e]=_t[e+It];_t.length-=It,It=0}}_t.length=0,It=0}var Rs=typeof global!="undefined"?global:self,ks=Rs.MutationObserver||Rs.WebKitMutationObserver;typeof ks=="function"?di=th(Is):di=Ns(Is);ui.requestFlush=di;function th(t){var e=1,n=new ks(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}function Ns(t){return function(){var n=setTimeout(i,0),r=setInterval(i,50);function i(){clearTimeout(n),clearInterval(r),t()}}}ui.makeRequestCallFromTimer=Ns;var fi=[],To=[],nh=ui.makeRequestCallFromTimer(rh);function rh(){if(To.length)throw To.shift()}function Po(t){var e;fi.length?e=fi.pop():e=new ih,e.task=t,ui(e)}var ih=function(){function t(){}return t.prototype.call=function(){try{this.task.call()}catch(e){Po.onerror?Po.onerror(e):(To.push(e),nh())}finally{this.task=null,fi[fi.length]=this}},t}();function oh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function As(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ah(t,e,n){return e&&As(t.prototype,e),n&&As(t,n),t}function In(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sh(t,e){return dh(t)||uh(t,e)||ch(t,e)||lh()}function lh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ch(t,e){if(!!t){if(typeof t=="string")return Ls(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ls(t,e)}}function Ls(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uh(t,e){var n=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,s;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(l){o=!0,s=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function dh(t){if(Array.isArray(t))return t}function fh(t){var e=Jp().toString();switch(t){case lt.SOURCE:return"S".concat(e);case lt.TARGET:return"T".concat(e);default:throw new Error("Unknown Handler Role: ".concat(t))}}function zs(t){switch(t[0]){case"S":return lt.SOURCE;case"T":return lt.TARGET;default:de(!1,"Cannot parse handler ID: ".concat(t))}}function Fs(t,e){var n=t.entries(),r=!1;do{var i=n.next(),o=i.done,a=sh(i.value,2),s=a[1];if(s===e)return!0;r=!!o}while(!r);return!1}var ph=function(){function t(e){oh(this,t),In(this,"types",new Map),In(this,"dragSources",new Map),In(this,"dropTargets",new Map),In(this,"pinnedSourceId",null),In(this,"pinnedSource",null),In(this,"store",void 0),this.store=e}return ah(t,[{key:"addSource",value:function(n,r){Oo(n),Zp(r);var i=this.addHandler(lt.SOURCE,n,r);return this.store.dispatch(Ip(i)),i}},{key:"addTarget",value:function(n,r){Oo(n,!0),Qp(r);var i=this.addHandler(lt.TARGET,n,r);return this.store.dispatch(Rp(i)),i}},{key:"containsHandler",value:function(n){return Fs(this.dragSources,n)||Fs(this.dropTargets,n)}},{key:"getSource",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;de(this.isSourceId(n),"Expected a valid source ID.");var i=r&&n===this.pinnedSourceId,o=i?this.pinnedSource:this.dragSources.get(n);return o}},{key:"getTarget",value:function(n){return de(this.isTargetId(n),"Expected a valid target ID."),this.dropTargets.get(n)}},{key:"getSourceType",value:function(n){return de(this.isSourceId(n),"Expected a valid source ID."),this.types.get(n)}},{key:"getTargetType",value:function(n){return de(this.isTargetId(n),"Expected a valid target ID."),this.types.get(n)}},{key:"isSourceId",value:function(n){var r=zs(n);return r===lt.SOURCE}},{key:"isTargetId",value:function(n){var r=zs(n);return r===lt.TARGET}},{key:"removeSource",value:function(n){var r=this;de(this.getSource(n),"Expected an existing source."),this.store.dispatch(kp(n)),Po(function(){r.dragSources.delete(n),r.types.delete(n)})}},{key:"removeTarget",value:function(n){de(this.getTarget(n),"Expected an existing target."),this.store.dispatch(Np(n)),this.dropTargets.delete(n),this.types.delete(n)}},{key:"pinSource",value:function(n){var r=this.getSource(n);de(r,"Expected an existing source."),this.pinnedSourceId=n,this.pinnedSource=r}},{key:"unpinSource",value:function(){de(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(n,r,i){var o=fh(n);return this.types.set(o,r),n===lt.SOURCE?this.dragSources.set(o,i):n===lt.TARGET&&this.dropTargets.set(o,i),o}}]),t}();function hh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=vh(r),o=new Yp(i,new ph(i)),a=new Dp(i,o),s=t(a,e,n);return a.receiveBackend(s),a}function vh(t){var e=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Yd($p,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}var mh=["children"];function gh(t,e){return xh(t)||wh(t,e)||yh(t,e)||bh()}function bh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yh(t,e){if(!!t){if(typeof t=="string")return Bs(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bs(t,e)}}function Bs(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wh(t,e){var n=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,s;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(l){o=!0,s=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function xh(t){if(Array.isArray(t))return t}function Ch(t,e){if(t==null)return{};var n=Sh(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,r)||(n[r]=t[r]))}return n}function Sh(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var js=0,pi=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),Eh=u.exports.memo(function(e){var n=e.children,r=Ch(e,mh),i=Dh(r),o=gh(i,2),a=o[0],s=o[1];return u.exports.useEffect(function(){if(s){var l=Ws();return++js,function(){--js==0&&(l[pi]=null)}}},[]),Xd.exports.jsx(nf.Provider,Object.assign({value:a},{children:n}),void 0)});function Dh(t){if("manager"in t){var e={dragDropManager:t.manager};return[e,!1]}var n=Mh(t.backend,t.context,t.options,t.debugMode),r=!t.context;return[n,r]}function Mh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ws(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=e;return i[pi]||(i[pi]={dragDropManager:hh(t,e,n,r)}),i[pi]}function Ws(){return typeof global!="undefined"?global:window}function Oh(t,e){return Ih(t)||_h(t,e)||Ph(t,e)||Th()}function Th(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ph(t,e){if(!!t){if(typeof t=="string")return Hs(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hs(t,e)}}function Hs(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _h(t,e){var n=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,s;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(l){o=!0,s=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function Ih(t){if(Array.isArray(t))return t}function Rh(t){var e=rf(),n=e.getMonitor(),r=of(n,t),i=Oh(r,2),o=i[0],a=i[1];return u.exports.useEffect(function(){return n.subscribeToOffsetChange(a)}),u.exports.useEffect(function(){return n.subscribeToStateChange(a)}),o}function $s(t){var e=null,n=function(){return e==null&&(e=t()),e};return n}function kh(t,e){return t.filter(function(n){return n!==e})}function Nh(t,e){var n=new Set,r=function(a){return n.add(a)};t.forEach(r),e.forEach(r);var i=[];return n.forEach(function(o){return i.push(o)}),i}function Ah(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ks(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lh(t,e,n){return e&&Ks(t.prototype,e),n&&Ks(t,n),t}function Vs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var zh=function(){function t(e){Ah(this,t),Vs(this,"entered",[]),Vs(this,"isNodeInDocument",void 0),this.isNodeInDocument=e}return Lh(t,[{key:"enter",value:function(n){var r=this,i=this.entered.length,o=function(s){return r.isNodeInDocument(s)&&(!s.contains||s.contains(n))};return this.entered=Nh(this.entered.filter(o),[n]),i===0&&this.entered.length>0}},{key:"leave",value:function(n){var r=this.entered.length;return this.entered=kh(this.entered.filter(this.isNodeInDocument),n),r>0&&this.entered.length===0}},{key:"reset",value:function(){this.entered=[]}}]),t}(),Fh=$s(function(){return/firefox/i.test(navigator.userAgent)}),Us=$s(function(){return Boolean(window.safari)});function Bh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jh(t,e,n){return e&&Gs(t.prototype,e),n&&Gs(t,n),t}function gr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qs=function(){function t(e,n){Bh(this,t),gr(this,"xs",void 0),gr(this,"ys",void 0),gr(this,"c1s",void 0),gr(this,"c2s",void 0),gr(this,"c3s",void 0);for(var r=e.length,i=[],o=0;o<r;o++)i.push(o);i.sort(function(_,F){return e[_]<e[F]?-1:1});for(var a=[],s=[],l,c,d=0;d<r-1;d++)l=e[d+1]-e[d],c=n[d+1]-n[d],a.push(l),s.push(c/l);for(var f=[s[0]],h=0;h<a.length-1;h++){var v=s[h],m=s[h+1];if(v*m<=0)f.push(0);else{l=a[h];var b=a[h+1],g=l+b;f.push(3*g/((g+b)/v+(g+l)/m))}}f.push(s[s.length-1]);for(var w=[],D=[],E,y=0;y<f.length-1;y++){E=s[y];var S=f[y],x=1/a[y],I=S+f[y+1]-E-E;w.push((E-S-I)*x),D.push(I*x*x)}this.xs=e,this.ys=n,this.c1s=f,this.c2s=w,this.c3s=D}return jh(t,[{key:"interpolate",value:function(n){var r=this.xs,i=this.ys,o=this.c1s,a=this.c2s,s=this.c3s,l=r.length-1;if(n===r[l])return i[l];for(var c=0,d=s.length-1,f;c<=d;){f=Math.floor(.5*(c+d));var h=r[f];if(h<n)c=f+1;else if(h>n)d=f-1;else return i[f]}l=Math.max(0,d);var v=n-r[l],m=v*v;return i[l]+o[l]*v+a[l]*m+s[l]*v*m}}]),t}(),Wh=1;function Ys(t){var e=t.nodeType===Wh?t:t.parentElement;if(!e)return null;var n=e.getBoundingClientRect(),r=n.top,i=n.left;return{x:i,y:r}}function hi(t){return{x:t.clientX,y:t.clientY}}function Hh(t){var e;return t.nodeName==="IMG"&&(Fh()||!((e=document.documentElement)!==null&&e!==void 0&&e.contains(t)))}function $h(t,e,n,r){var i=t?e.width:n,o=t?e.height:r;return Us()&&t&&(o/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:o}}function Kh(t,e,n,r,i){var o=Hh(e),a=o?t:e,s=Ys(a),l={x:n.x-s.x,y:n.y-s.y},c=t.offsetWidth,d=t.offsetHeight,f=r.anchorX,h=r.anchorY,v=$h(o,e,c,d),m=v.dragPreviewWidth,b=v.dragPreviewHeight,g=function(){var I=new qs([0,.5,1],[l.y,l.y/d*b,l.y+b-d]),_=I.interpolate(h);return Us()&&o&&(_+=(window.devicePixelRatio-1)*b),_},w=function(){var I=new qs([0,.5,1],[l.x,l.x/c*m,l.x+m-c]);return I.interpolate(f)},D=i.offsetX,E=i.offsetY,y=D===0||D,S=E===0||E;return{x:y?D:w(),y:S?E:g()}}function _o(t,e,n){var r=e.reduce(function(i,o){return i||t.getData(o)},"");return r??n}var Rn;function vi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Io=(Rn={},vi(Rn,af,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items}},matchesTypes:["Files"]}),vi(Rn,sf,{exposeProperties:{html:function(e,n){return _o(e,n,"")}},matchesTypes:["Html","text/html"]}),vi(Rn,lf,{exposeProperties:{urls:function(e,n){return _o(e,n,"").split(`
`)}},matchesTypes:["Url","text/uri-list"]}),vi(Rn,cf,{exposeProperties:{text:function(e,n){return _o(e,n,"")}},matchesTypes:["Text","text/plain"]}),Rn);function Vh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Uh(t,e,n){return e&&Xs(t.prototype,e),n&&Xs(t,n),t}function Js(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Gh=function(){function t(e){Vh(this,t),Js(this,"item",void 0),Js(this,"config",void 0),this.config=e,this.item={},this.initializeExposedProperties()}return Uh(t,[{key:"initializeExposedProperties",value:function(){var n=this;Object.keys(this.config.exposeProperties).forEach(function(r){Object.defineProperty(n.item,r,{configurable:!0,enumerable:!0,get:function(){return console.warn(`Browser doesn't allow reading "`.concat(r,'" until the drop event.')),null}})})}},{key:"loadDataTransfer",value:function(n){var r=this;if(n){var i={};Object.keys(this.config.exposeProperties).forEach(function(o){i[o]={value:r.config.exposeProperties[o](n,r.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,i)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(n,r){return r===n.getSourceId()}},{key:"endDrag",value:function(){}}]),t}();function qh(t,e){var n=new Gh(Io[t]);return n.loadDataTransfer(e),n}function Ro(t){if(!t)return null;var e=Array.prototype.slice.call(t.types||[]);return Object.keys(Io).filter(function(n){var r=Io[n].matchesTypes;return r.some(function(i){return e.indexOf(i)>-1})})[0]||null}function Yh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xh(t,e,n){return e&&Zs(t.prototype,e),n&&Zs(t,n),t}function ko(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Jh=function(){function t(e,n){Yh(this,t),ko(this,"ownerDocument",null),ko(this,"globalContext",void 0),ko(this,"optionsArgs",void 0),this.globalContext=e,this.optionsArgs=n}return Xh(t,[{key:"window",get:function(){if(this.globalContext)return this.globalContext;if(typeof window!="undefined")return window}},{key:"document",get:function(){var n;return(n=this.globalContext)!==null&&n!==void 0&&n.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:"rootElement",get:function(){var n;return((n=this.optionsArgs)===null||n===void 0?void 0:n.rootElement)||this.window}}]),t}();function Qs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function el(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qs(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qs(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qh(t,e,n){return e&&tl(t.prototype,e),n&&tl(t,n),t}function pe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ev=function(){function t(e,n,r){var i=this;Zh(this,t),pe(this,"options",void 0),pe(this,"actions",void 0),pe(this,"monitor",void 0),pe(this,"registry",void 0),pe(this,"enterLeaveCounter",void 0),pe(this,"sourcePreviewNodes",new Map),pe(this,"sourcePreviewNodeOptions",new Map),pe(this,"sourceNodes",new Map),pe(this,"sourceNodeOptions",new Map),pe(this,"dragStartSourceIds",null),pe(this,"dropTargetIds",[]),pe(this,"dragEnterTargetIds",[]),pe(this,"currentNativeSource",null),pe(this,"currentNativeHandle",null),pe(this,"currentDragSourceNode",null),pe(this,"altKeyPressed",!1),pe(this,"mouseMoveTimeoutTimer",null),pe(this,"asyncEndDragFrameId",null),pe(this,"dragOverTargetIds",null),pe(this,"getSourceClientOffset",function(o){var a=i.sourceNodes.get(o);return a&&Ys(a)||null}),pe(this,"endDragNativeItem",function(){!i.isDraggingNativeItem()||(i.actions.endDrag(),i.currentNativeHandle&&i.registry.removeSource(i.currentNativeHandle),i.currentNativeHandle=null,i.currentNativeSource=null)}),pe(this,"isNodeInDocument",function(o){return Boolean(o&&i.document&&i.document.body&&i.document.body.contains(o))}),pe(this,"endDragIfSourceWasRemovedFromDOM",function(){var o=i.currentDragSourceNode;o==null||i.isNodeInDocument(o)||i.clearCurrentDragSourceNode()&&i.monitor.isDragging()&&i.actions.endDrag()}),pe(this,"handleTopDragStartCapture",function(){i.clearCurrentDragSourceNode(),i.dragStartSourceIds=[]}),pe(this,"handleTopDragStart",function(o){if(!o.defaultPrevented){var a=i.dragStartSourceIds;i.dragStartSourceIds=null;var s=hi(o);i.monitor.isDragging()&&i.actions.endDrag(),i.actions.beginDrag(a||[],{publishSource:!1,getSourceClientOffset:i.getSourceClientOffset,clientOffset:s});var l=o.dataTransfer,c=Ro(l);if(i.monitor.isDragging()){if(l&&typeof l.setDragImage=="function"){var d=i.monitor.getSourceId(),f=i.sourceNodes.get(d),h=i.sourcePreviewNodes.get(d)||f;if(h){var v=i.getCurrentSourcePreviewNodeOptions(),m=v.anchorX,b=v.anchorY,g=v.offsetX,w=v.offsetY,D={anchorX:m,anchorY:b},E={offsetX:g,offsetY:w},y=Kh(f,h,s,D,E);l.setDragImage(h,y.x,y.y)}}try{l==null||l.setData("application/json",{})}catch(I){}i.setCurrentDragSourceNode(o.target);var S=i.getCurrentSourcePreviewNodeOptions(),x=S.captureDraggingState;x?i.actions.publishDragSource():setTimeout(function(){return i.actions.publishDragSource()},0)}else if(c)i.beginDragNativeItem(c);else{if(l&&!l.types&&(o.target&&!o.target.hasAttribute||!o.target.hasAttribute("draggable")))return;o.preventDefault()}}}),pe(this,"handleTopDragEndCapture",function(){i.clearCurrentDragSourceNode()&&i.monitor.isDragging()&&i.actions.endDrag()}),pe(this,"handleTopDragEnterCapture",function(o){i.dragEnterTargetIds=[];var a=i.enterLeaveCounter.enter(o.target);if(!(!a||i.monitor.isDragging())){var s=o.dataTransfer,l=Ro(s);l&&i.beginDragNativeItem(l,s)}}),pe(this,"handleTopDragEnter",function(o){var a=i.dragEnterTargetIds;if(i.dragEnterTargetIds=[],!!i.monitor.isDragging()){i.altKeyPressed=o.altKey,a.length>0&&i.actions.hover(a,{clientOffset:hi(o)});var s=a.some(function(l){return i.monitor.canDropOnTarget(l)});s&&(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect=i.getCurrentDropEffect()))}}),pe(this,"handleTopDragOverCapture",function(){i.dragOverTargetIds=[]}),pe(this,"handleTopDragOver",function(o){var a=i.dragOverTargetIds;if(i.dragOverTargetIds=[],!i.monitor.isDragging()){o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect="none");return}i.altKeyPressed=o.altKey,i.actions.hover(a||[],{clientOffset:hi(o)});var s=(a||[]).some(function(l){return i.monitor.canDropOnTarget(l)});s?(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect=i.getCurrentDropEffect())):i.isDraggingNativeItem()?o.preventDefault():(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect="none"))}),pe(this,"handleTopDragLeaveCapture",function(o){i.isDraggingNativeItem()&&o.preventDefault();var a=i.enterLeaveCounter.leave(o.target);!a||i.isDraggingNativeItem()&&setTimeout(function(){return i.endDragNativeItem()},0)}),pe(this,"handleTopDropCapture",function(o){if(i.dropTargetIds=[],i.isDraggingNativeItem()){var a;o.preventDefault(),(a=i.currentNativeSource)===null||a===void 0||a.loadDataTransfer(o.dataTransfer)}else Ro(o.dataTransfer)&&o.preventDefault();i.enterLeaveCounter.reset()}),pe(this,"handleTopDrop",function(o){var a=i.dropTargetIds;i.dropTargetIds=[],i.actions.hover(a,{clientOffset:hi(o)}),i.actions.drop({dropEffect:i.getCurrentDropEffect()}),i.isDraggingNativeItem()?i.endDragNativeItem():i.monitor.isDragging()&&i.actions.endDrag()}),pe(this,"handleSelectStart",function(o){var a=o.target;typeof a.dragDrop=="function"&&(a.tagName==="INPUT"||a.tagName==="SELECT"||a.tagName==="TEXTAREA"||a.isContentEditable||(o.preventDefault(),a.dragDrop()))}),this.options=new Jh(n,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new zh(this.isNodeInDocument)}return Qh(t,[{key:"profile",value:function(){var n,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((n=this.dragStartSourceIds)===null||n===void 0?void 0:n.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}},{key:"rootElement",get:function(){return this.options.rootElement}},{key:"setup",value:function(){var n=this.rootElement;if(n!==void 0){if(n.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");n.__isReactDndBackendSetUp=!0,this.addEventListeners(n)}}},{key:"teardown",value:function(){var n=this.rootElement;if(n!==void 0&&(n.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}},{key:"connectDragPreview",value:function(n,r,i){var o=this;return this.sourcePreviewNodeOptions.set(n,i),this.sourcePreviewNodes.set(n,r),function(){o.sourcePreviewNodes.delete(n),o.sourcePreviewNodeOptions.delete(n)}}},{key:"connectDragSource",value:function(n,r,i){var o=this;this.sourceNodes.set(n,r),this.sourceNodeOptions.set(n,i);var a=function(c){return o.handleDragStart(c,n)},s=function(c){return o.handleSelectStart(c)};return r.setAttribute("draggable","true"),r.addEventListener("dragstart",a),r.addEventListener("selectstart",s),function(){o.sourceNodes.delete(n),o.sourceNodeOptions.delete(n),r.removeEventListener("dragstart",a),r.removeEventListener("selectstart",s),r.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(n,r){var i=this,o=function(c){return i.handleDragEnter(c,n)},a=function(c){return i.handleDragOver(c,n)},s=function(c){return i.handleDrop(c,n)};return r.addEventListener("dragenter",o),r.addEventListener("dragover",a),r.addEventListener("drop",s),function(){r.removeEventListener("dragenter",o),r.removeEventListener("dragover",a),r.removeEventListener("drop",s)}}},{key:"addEventListeners",value:function(n){!n.addEventListener||(n.addEventListener("dragstart",this.handleTopDragStart),n.addEventListener("dragstart",this.handleTopDragStartCapture,!0),n.addEventListener("dragend",this.handleTopDragEndCapture,!0),n.addEventListener("dragenter",this.handleTopDragEnter),n.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),n.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),n.addEventListener("dragover",this.handleTopDragOver),n.addEventListener("dragover",this.handleTopDragOverCapture,!0),n.addEventListener("drop",this.handleTopDrop),n.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(n){!n.removeEventListener||(n.removeEventListener("dragstart",this.handleTopDragStart),n.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),n.removeEventListener("dragend",this.handleTopDragEndCapture,!0),n.removeEventListener("dragenter",this.handleTopDragEnter),n.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),n.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),n.removeEventListener("dragover",this.handleTopDragOver),n.removeEventListener("dragover",this.handleTopDragOverCapture,!0),n.removeEventListener("drop",this.handleTopDrop),n.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var n=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(n);return el({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var n=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(n);return el({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}},{key:"isDraggingNativeItem",value:function(){var n=this.monitor.getItemType();return Object.keys(us).some(function(r){return us[r]===n})}},{key:"beginDragNativeItem",value:function(n,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=qh(n,r),this.currentNativeHandle=this.registry.addSource(n,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(n){var r=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=n;var i=1e3;this.mouseMoveTimeoutTimer=setTimeout(function(){var o;return(o=r.rootElement)===null||o===void 0?void 0:o.addEventListener("mousemove",r.endDragIfSourceWasRemovedFromDOM,!0)},i)}},{key:"clearCurrentDragSourceNode",value:function(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var n;(n=this.window)===null||n===void 0||n.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:"handleDragStart",value:function(n,r){n.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}},{key:"handleDragEnter",value:function(n,r){this.dragEnterTargetIds.unshift(r)}},{key:"handleDragOver",value:function(n,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}},{key:"handleDrop",value:function(n,r){this.dropTargetIds.unshift(r)}}]),t}(),tv=function(e,n,r){return new ev(e,n,r)},nl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,ne({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 512 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"}))});nl.displayName="Archive";var rl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,ne({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 512 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"m352.201 425.775-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z"}))});rl.displayName="ArrowsAlt";var il=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,ne({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 256 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z"}))});il.displayName="ArrowsAltV";var ol=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,ne({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 448 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}))});ol.displayName="Bars";var al=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,ne({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 320 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"}))});al.displayName="CaretDown";var sl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,ne({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 192 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"}))});sl.displayName="CaretRight";var ll=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,ne({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 512 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M500 384c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v308h436zM372.7 159.5 288 216l-85.3-113.7c-5.1-6.8-15.5-6.3-19.9 1L96 248v104h384l-89.9-187.8c-3.2-6.5-11.4-8.7-17.4-4.7z"}))});ll.displayName="ChartArea";var cl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,ne({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 576 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346 7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}))});cl.displayName="ExclamationTriangle";var ul=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,ne({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 512 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M164.07 148.1H12a12 12 0 0 1-12-12v-80a36 36 0 0 1 36-36h104a36 36 0 0 1 36 36v80a11.89 11.89 0 0 1-11.93 12zm347.93-12V56a36 36 0 0 0-36-36H372a36 36 0 0 0-36 36v80a12 12 0 0 0 12 12h152a11.89 11.89 0 0 0 12-11.9zm-164 44a12 12 0 0 0-12 12v52c0 128.1-160 127.9-160 0v-52a12 12 0 0 0-12-12H12.1a12 12 0 0 0-12 12.1c.1 21.4.6 40.3 0 53.3 0 150.6 136.17 246.6 256.75 246.6s255-96 255-246.7c-.6-12.8-.2-33 0-53.2a12 12 0 0 0-12-12.1z"}))});ul.displayName="Magnet";var dl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,ne({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 448 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"}))});dl.displayName="Pause";var fl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,ne({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 448 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M424.4 214.7 72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}))});fl.displayName="Play";var pl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,ne({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 640 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M384 320H256c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V352c0-17.67-14.33-32-32-32zM192 32c0-17.67-14.33-32-32-32H32C14.33 0 0 14.33 0 32v128c0 17.67 14.33 32 32 32h95.72l73.16 128.04C211.98 300.98 232.4 288 256 288h.28L192 175.51V128h224V64H192V32zM608 0H480c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32z"}))});pl.displayName="ProjectDiagram";var hl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,ne({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 512 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M496 384H160v-16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h80v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h336c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm0-160h-80v-16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h336v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h80c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm0-160H288V48c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v16H16C7.2 64 0 71.2 0 80v32c0 8.8 7.2 16 16 16h208v16c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-16h208c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16z"}))});hl.displayName="SlidersH";var vl=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,ne({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 512 512"},t,{ref:e}),u.exports.createElement("path",{fill:"currentColor",d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"}))});vl.displayName="SyncAlt";const nv={floatable:!0,maximizable:!0},mi="place-holder",gi="-maximized-placeholder-",rv={floatable:!1},ut=p.createContext(null),iv=ut.Provider;ut.Consumer;function kn(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];return p.Children.forEach(t,function(r){r==null&&!e.keepEmpty||(Array.isArray(r)?n=n.concat(kn(r)):ts.exports.isFragment(r)&&r.props?n=n.concat(kn(r.props.children,e)):n.push(r))}),n}var ml=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return!!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t==null?void 0:t.substr(0,4)))};function Nn(t,e){var n=e||{},r=n.defaultValue,i=n.value,o=n.onChange,a=n.postState,s=u.exports.useState(function(){return i!==void 0?i:r!==void 0?typeof r=="function"?r():r:typeof t=="function"?t():t}),l=U(s,2),c=l[0],d=l[1],f=i!==void 0?i:c;a&&(f=a(f));function h(m){d(m),f!==m&&o&&o(m,f)}var v=u.exports.useRef(!0);return u.exports.useEffect(function(){if(v.current){v.current=!1;return}i===void 0&&d(i)},[i]),[f,h]}var gl=function(e){return+setTimeout(e,16)},bl=function(e){return clearTimeout(e)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(gl=function(e){return window.requestAnimationFrame(e)},bl=function(e){return window.cancelAnimationFrame(e)});var yl=0,No=new Map;function wl(t){No.delete(t)}function Ce(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;yl+=1;var n=yl;function r(i){if(i===0)wl(n),t();else{var o=gl(function(){r(i-1)});No.set(n,o)}}return r(e),n}Ce.cancel=function(t){var e=No.get(t);return wl(e),bl(e)};function Ao(t){return t instanceof HTMLElement?t:On.findDOMNode(t)}function xl(t,e){typeof t=="function"?t(e):Zt(t)==="object"&&t&&"current"in t&&(t.current=e)}function Lo(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){e.forEach(function(i){xl(i,r)})}}function Cl(t){var e,n,r=ts.exports.isMemo(t)?t.type.type:t.type;return!(typeof r=="function"&&!((e=r.prototype)===null||e===void 0?void 0:e.render)||typeof t=="function"&&!((n=t.prototype)===null||n===void 0?void 0:n.render))}var Sl=function(){if(typeof Map!="undefined")return Map;function t(e,n){var r=-1;return e.some(function(i,o){return i[0]===n?(r=o,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var r=t(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},e.prototype.set=function(n,r){var i=t(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},e.prototype.delete=function(n){var r=this.__entries__,i=t(r,n);~i&&r.splice(i,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,o=this.__entries__;i<o.length;i++){var a=o[i];n.call(r,a[1],a[0])}},e}()}(),zo=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,bi=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),ov=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(bi):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),av=2;function sv(t,e){var n=!1,r=!1,i=0;function o(){n&&(n=!1,t()),r&&s()}function a(){ov(o)}function s(){var l=Date.now();if(n){if(l-i<av)return;r=!0}else n=!0,r=!1,setTimeout(a,e);i=l}return s}var lv=20,cv=["top","right","bottom","left","width","height","size","weight"],uv=typeof MutationObserver!="undefined",dv=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=sv(this.refresh.bind(this),lv)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,r=n.indexOf(e);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!zo||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),uv?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!zo||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,r=n===void 0?"":n,i=cv.some(function(o){return!!~r.indexOf(o)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),El=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},An=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||bi},Dl=wi(0,0,0,0);function yi(t){return parseFloat(t)||0}function Ml(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(r,i){var o=t["border-"+i+"-width"];return r+yi(o)},0)}function fv(t){for(var e=["top","right","bottom","left"],n={},r=0,i=e;r<i.length;r++){var o=i[r],a=t["padding-"+o];n[o]=yi(a)}return n}function pv(t){var e=t.getBBox();return wi(0,0,e.width,e.height)}function hv(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return Dl;var r=An(t).getComputedStyle(t),i=fv(r),o=i.left+i.right,a=i.top+i.bottom,s=yi(r.width),l=yi(r.height);if(r.boxSizing==="border-box"&&(Math.round(s+o)!==e&&(s-=Ml(r,"left","right")+o),Math.round(l+a)!==n&&(l-=Ml(r,"top","bottom")+a)),!mv(t)){var c=Math.round(s+o)-e,d=Math.round(l+a)-n;Math.abs(c)!==1&&(s-=c),Math.abs(d)!==1&&(l-=d)}return wi(i.left,i.top,s,l)}var vv=function(){return typeof SVGGraphicsElement!="undefined"?function(t){return t instanceof An(t).SVGGraphicsElement}:function(t){return t instanceof An(t).SVGElement&&typeof t.getBBox=="function"}}();function mv(t){return t===An(t).document.documentElement}function gv(t){return zo?vv(t)?pv(t):hv(t):Dl}function bv(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,a=Object.create(o.prototype);return El(a,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),a}function wi(t,e,n,r){return{x:t,y:e,width:n,height:r}}var yv=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=wi(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=gv(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),wv=function(){function t(e,n){var r=bv(n);El(this,{target:e,contentRect:r})}return t}(),xv=function(){function t(e,n,r){if(this.activeObservations_=[],this.observations_=new Sl,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof An(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new yv(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(e instanceof An(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;!n.has(e)||(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(!!this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new wv(r.target,r.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Ol=typeof WeakMap!="undefined"?new WeakMap:new Sl,Tl=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=dv.getInstance(),r=new xv(e,n,this);Ol.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){Tl.prototype[t]=function(){var e;return(e=Ol.get(this))[t].apply(e,arguments)}});var Fo=function(){return typeof bi.ResizeObserver!="undefined"?bi.ResizeObserver:Tl}(),Cv="rc-observer-key",br=function(t){Ft(n,t);var e=Wt(n);function n(){var r;return Bt(this,n),r=e.apply(this,arguments),r.resizeObserver=null,r.childNode=null,r.currentElement=null,r.state={width:0,height:0,offsetHeight:0,offsetWidth:0},r.onResize=function(i){var o=r.props.onResize,a=i[0].target,s=a.getBoundingClientRect(),l=s.width,c=s.height,d=a.offsetWidth,f=a.offsetHeight,h=Math.floor(l),v=Math.floor(c);if(r.state.width!==h||r.state.height!==v||r.state.offsetWidth!==d||r.state.offsetHeight!==f){var m={width:h,height:v,offsetWidth:d,offsetHeight:f};r.setState(m),o&&Promise.resolve().then(function(){o($($({},m),{},{offsetWidth:d,offsetHeight:f}),a)})}},r.setChildNode=function(i){r.childNode=i},r}return jt(n,[{key:"componentDidMount",value:function(){this.onComponentUpdated()}},{key:"componentDidUpdate",value:function(){this.onComponentUpdated()}},{key:"componentWillUnmount",value:function(){this.destroyObserver()}},{key:"onComponentUpdated",value:function(){var i=this.props.disabled;if(i){this.destroyObserver();return}var o=Ao(this.childNode||this),a=o!==this.currentElement;a&&(this.destroyObserver(),this.currentElement=o),!this.resizeObserver&&o&&(this.resizeObserver=new Fo(this.onResize),this.resizeObserver.observe(o))}},{key:"destroyObserver",value:function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}},{key:"render",value:function(){var i=this.props.children,o=kn(i);if(o.length>1)ur(!1,"Find more than one child node with `children` in ResizeObserver. Will only observe first one.");else if(o.length===0)return ur(!1,"`children` of ResizeObserver is empty. Nothing is in observe."),null;var a=o[0];if(u.exports.isValidElement(a)&&Cl(a)){var s=a.ref;o[0]=u.exports.cloneElement(a,{ref:Lo(s,this.setChildNode)})}return o.length===1?o[0]:o.map(function(l,c){return!u.exports.isValidElement(l)||"key"in l&&l.key!==null?l:u.exports.cloneElement(l,{key:"".concat(Cv,"-").concat(c)})})}}]),n}(u.exports.Component);br.displayName="ResizeObserver";function Pl(t){var e=u.exports.useRef(),n=u.exports.useRef(!1);function r(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];n.current||(Ce.cancel(e.current),e.current=Ce(function(){t.apply(void 0,o)}))}return u.exports.useEffect(function(){return function(){n.current=!0,Ce.cancel(e.current)}},[]),r}function Sv(t){var e=u.exports.useRef([]),n=u.exports.useState({}),r=U(n,2),i=r[1],o=u.exports.useRef(typeof t=="function"?t():t),a=Pl(function(){var l=o.current;e.current.forEach(function(c){l=c(l)}),e.current=[],o.current=l,i({})});function s(l){e.current.push(l),a()}return[o.current,s]}function Ev(t,e){var n,r=t.prefixCls,i=t.id,o=t.active,a=t.tab,s=a.key,l=a.tab,c=a.disabled,d=a.closeIcon,f=t.closable,h=t.renderWrapper,v=t.removeAriaLabel,m=t.editable,b=t.onClick,g=t.onRemove,w=t.onFocus,D=t.style,E="".concat(r,"-tab");u.exports.useEffect(function(){return g},[]);var y=m&&f!==!1&&!c;function S(_){c||b(_)}function x(_){_.preventDefault(),_.stopPropagation(),m.onEdit("remove",{key:s,event:_})}var I=u.exports.createElement("div",{key:s,ref:e,className:fe(E,(n={},G(n,"".concat(E,"-with-remove"),y),G(n,"".concat(E,"-active"),o),G(n,"".concat(E,"-disabled"),c),n)),style:D,onClick:S},u.exports.createElement("div",{role:"tab","aria-selected":o,id:i&&"".concat(i,"-tab-").concat(s),className:"".concat(E,"-btn"),"aria-controls":i&&"".concat(i,"-panel-").concat(s),"aria-disabled":c,tabIndex:c?null:0,onClick:function(F){F.stopPropagation(),S(F)},onKeyDown:function(F){[we.SPACE,we.ENTER].includes(F.which)&&(F.preventDefault(),S(F))},onFocus:w},l),y&&u.exports.createElement("button",{type:"button","aria-label":v||"remove",tabIndex:0,className:"".concat(E,"-remove"),onClick:function(F){F.stopPropagation(),x(F)}},d||m.removeIcon||"\xD7"));return h?h(I):I}var Dv=u.exports.forwardRef(Ev),_l={width:0,height:0,left:0,top:0};function Mv(t,e,n){return u.exports.useMemo(function(){for(var r,i=new Map,o=e.get((r=t[0])===null||r===void 0?void 0:r.key)||_l,a=o.left+o.width,s=0;s<t.length;s+=1){var l=t[s].key,c=e.get(l);if(!c){var d;c=e.get((d=t[s-1])===null||d===void 0?void 0:d.key)||_l}var f=i.get(l)||$({},c);f.right=a-f.left-f.width,i.set(l,f)}return i},[t.map(function(r){return r.key}).join("_"),e,n])}var Il={width:0,height:0,left:0,top:0,right:0};function Ov(t,e,n,r,i){var o=i.tabs,a=i.tabPosition,s=i.rtl,l,c,d;["top","bottom"].includes(a)?(l="width",c=s?"right":"left",d=Math.abs(e.left)):(l="height",c="top",d=-e.top);var f=e[l],h=n[l],v=r[l],m=f;return h+v>f&&(m=f-v),u.exports.useMemo(function(){if(!o.length)return[0,0];for(var b=o.length,g=b,w=0;w<b;w+=1){var D=t.get(o[w].key)||Il;if(D[c]+D[l]>d+m){g=w-1;break}}for(var E=0,y=b-1;y>=0;y-=1){var S=t.get(o[y].key)||Il;if(S[c]<d){E=y+1;break}}return[E,g]},[t,d,m,a,o.map(function(b){return b.key}).join("_"),s])}var Ln=void 0;function Tv(t,e){var n=t.prefixCls,r=t.invalidate,i=t.item,o=t.renderItem,a=t.responsive,s=t.registerSize,l=t.itemKey,c=t.className,d=t.style,f=t.children,h=t.display,v=t.order,m=t.component,b=m===void 0?"div":m,g=Oe(t,["prefixCls","invalidate","item","renderItem","responsive","registerSize","itemKey","className","style","children","display","order","component"]),w=a&&!h;function D(I){s(l,I)}u.exports.useEffect(function(){return function(){D(null)}},[]);var E=o&&i!==Ln?o(i):f,y;r||(y={opacity:w?0:1,height:w?0:Ln,overflowY:w?"hidden":Ln,order:a?v:Ln,pointerEvents:w?"none":Ln,position:w?"absolute":Ln});var S={};w&&(S["aria-hidden"]=!0);var x=u.exports.createElement(b,ne({className:fe(!r&&n,c),style:$($({},y),d)},S,g,{ref:e}),E);return a&&(x=u.exports.createElement(br,{onResize:function(_){var F=_.offsetWidth;D(F)}},x)),x}var yr=u.exports.forwardRef(Tv);yr.displayName="Item";function Pv(){var t=u.exports.useState({}),e=U(t,2),n=e[1],r=u.exports.useRef([]),i=u.exports.useRef(!1),o=0,a=0;u.exports.useEffect(function(){return function(){i.current=!0}},[]);function s(l){var c=o;o+=1,r.current.length<c+1&&(r.current[c]=l);var d=r.current[c];function f(h){r.current[c]=typeof h=="function"?h(r.current[c]):h,Ce.cancel(a),a=Ce(function(){i.current||n({})})}return[d,f]}return s}var _v=function(e,n){var r=u.exports.useContext(xi);if(!r){var i=e.component,o=i===void 0?"div":i,a=Oe(e,["component"]);return u.exports.createElement(o,ne({},a,{ref:n}))}var s=r.className,l=Oe(r,["className"]),c=e.className,d=Oe(e,["className"]);return u.exports.createElement(xi.Provider,{value:null},u.exports.createElement(yr,ne({ref:n,className:fe(s,c)},l,d)))},Rl=u.exports.forwardRef(_v);Rl.displayName="RawItem";var xi=u.exports.createContext(null),kl="responsive",Nl="invalidate";function Iv(t){return"+ ".concat(t.length," ...")}function Rv(t,e){var n=t.prefixCls,r=n===void 0?"rc-overflow":n,i=t.data,o=i===void 0?[]:i,a=t.renderItem,s=t.renderRawItem,l=t.itemKey,c=t.itemWidth,d=c===void 0?10:c,f=t.ssr,h=t.style,v=t.className,m=t.maxCount,b=t.renderRest,g=t.renderRawRest,w=t.suffix,D=t.component,E=D===void 0?"div":D,y=t.itemComponent,S=t.onVisibleChange,x=Oe(t,["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"]),I=Pv(),_=f==="full",F=I(null),R=U(F,2),P=R[0],O=R[1],j=P||0,N=I(new Map),k=U(N,2),V=k[0],T=k[1],C=I(0),M=U(C,2),A=M[0],W=M[1],L=I(0),K=U(L,2),Z=K[0],z=K[1],q=I(0),J=U(q,2),le=J[0],ve=J[1],me=u.exports.useState(null),be=U(me,2),ze=be[0],Fe=be[1],tt=u.exports.useState(null),Ne=U(tt,2),ue=Ne[0],je=Ne[1],se=u.exports.useMemo(function(){return ue===null&&_?Number.MAX_SAFE_INTEGER:ue||0},[ue,P]),ce=u.exports.useState(!1),Se=U(ce,2),Yt=Se[0],Lt=Se[1],$e="".concat(r,"-item"),Xt=Math.max(A,Z),Ye=o.length&&m===kl,We=m===Nl,zt=Ye||typeof m=="number"&&o.length>m,Xe=u.exports.useMemo(function(){var ae=o;return Ye?P===null&&_?ae=o:ae=o.slice(0,Math.min(o.length,j/d)):typeof m=="number"&&(ae=o.slice(0,m)),ae},[o,d,P,m,Ye]),ht=u.exports.useMemo(function(){return Ye?o.slice(se+1):o.slice(Xe.length)},[o,Xe,Ye,se]),Ke=u.exports.useCallback(function(ae,he){var Ee;return typeof l=="function"?l(ae):(Ee=l&&(ae==null?void 0:ae[l]))!==null&&Ee!==void 0?Ee:he},[l]),nt=u.exports.useCallback(a||function(ae){return ae},[a]);function Re(ae,he){je(ae),he||(Lt(ae<o.length-1),S==null||S(ae))}function er(ae,he){O(he.clientWidth)}function Jt(ae,he){T(function(Ee){var Je=new Map(Ee);return he===null?Je.delete(ae):Je.set(ae,he),Je})}function at(ae,he){z(he),W(Z)}function Sn(ae,he){ve(he)}function st(ae){return V.get(Ke(Xe[ae],ae))}u.exports.useLayoutEffect(function(){if(j&&Xt&&Xe){var ae=le,he=Xe.length,Ee=he-1;if(!he){Re(0),Fe(null);return}for(var Je=0;Je<he;Je+=1){var cn=st(Je);if(cn===void 0){Re(Je-1,!0);break}if(ae+=cn,Ee===0&&ae<=j||Je===Ee-1&&ae+st(Ee)<=j){Re(Ee),Fe(null);break}else if(ae+Xt>j){Re(Je-1),Fe(ae-cn-le+Z);break}}w&&st(0)+le>j&&Fe(null)}},[j,V,Z,le,Ke,Xe]);var an=Yt&&!!ht.length,vt={};ze!==null&&Ye&&(vt={position:"absolute",left:ze,top:0});var it={prefixCls:$e,responsive:Ye,component:y,invalidate:We},sn=s?function(ae,he){var Ee=Ke(ae,he);return u.exports.createElement(xi.Provider,{key:Ee,value:$($({},it),{},{order:he,item:ae,itemKey:Ee,registerSize:Jt,display:he<=se})},s(ae,he))}:function(ae,he){var Ee=Ke(ae,he);return u.exports.createElement(yr,ne({},it,{order:he,key:Ee,item:ae,renderItem:nt,itemKey:Ee,registerSize:Jt,display:he<=se}))},Dt,ln={order:an?se:Number.MAX_SAFE_INTEGER,className:"".concat($e,"-rest"),registerSize:at,display:an};if(g)g&&(Dt=u.exports.createElement(xi.Provider,{value:$($({},it),ln)},g(ht)));else{var rt=b||Iv;Dt=u.exports.createElement(yr,ne({},it,ln),typeof rt=="function"?rt(ht):rt)}var Mt=u.exports.createElement(E,ne({className:fe(!We&&r,v),style:h,ref:e},x),Xe.map(sn),zt?Dt:null,w&&u.exports.createElement(yr,ne({},it,{order:se,className:"".concat($e,"-suffix"),registerSize:Sn,display:!0,style:vt}),w));return Ye&&(Mt=u.exports.createElement(br,{onResize:er},Mt)),Mt}var Kt=u.exports.forwardRef(Rv);Kt.displayName="Overflow";Kt.Item=Rl;Kt.RESPONSIVE=kl;Kt.INVALIDATE=Nl;function Ci(t,e){var n=$({},t);return Array.isArray(e)&&e.forEach(function(r){delete n[r]}),n}function kv(t,e,n){var r=u.exports.useRef({});return(!("value"in r.current)||n(r.current.condition,e))&&(r.current.value=t(),r.current.condition=e),r.current.value}var gt=u.exports.createContext(null);function Nv(t,e){var n=$({},t);return Object.keys(e).forEach(function(r){var i=e[r];i!==void 0&&(n[r]=i)}),n}function wr(t){var e=t.children,n=t.locked,r=Oe(t,["children","locked"]),i=u.exports.useContext(gt),o=kv(function(){return Nv(i,r)},[i,r],function(a,s){return!n&&(a[0]!==s[0]||!cr(a[1],s[1]))});return u.exports.createElement(gt.Provider,{value:o},e)}function Al(t,e,n,r){var i=u.exports.useContext(gt),o=i.activeKey,a=i.onActive,s=i.onInactive,l={active:o===t};return e||(l.onMouseEnter=function(c){n==null||n({key:t,domEvent:c}),a(t)},l.onMouseLeave=function(c){r==null||r({key:t,domEvent:c}),s(t)}),l}function Si(t){var e=t.item,n=Oe(t,["item"]);return Object.defineProperty(n,"item",{get:function(){return ur(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),e}}),n}function Ll(t){var e=t.icon,n=t.props,r=t.children,i;return typeof e=="function"?i=u.exports.createElement(e,$({},n)):i=e,i||r||null}function zl(t){var e=u.exports.useContext(gt),n=e.mode,r=e.rtl,i=e.inlineIndent;if(n!=="inline")return null;var o=t;return r?{paddingRight:o*i}:{paddingLeft:o*i}}var Av=[],Fl=u.exports.createContext(null);function Ei(){return u.exports.useContext(Fl)}var Bl=u.exports.createContext(Av);function xr(t){var e=u.exports.useContext(Bl);return u.exports.useMemo(function(){return t!==void 0?[].concat(mt(e),[t]):e},[e,t])}var jl=u.exports.createContext(null),Wl=u.exports.createContext(null);function Hl(t,e){return t===void 0?null:"".concat(t,"-").concat(e)}function $l(t){var e=u.exports.useContext(Wl);return Hl(e,t)}var Lv=function(t){Ft(n,t);var e=Wt(n);function n(){return Bt(this,n),e.apply(this,arguments)}return jt(n,[{key:"render",value:function(){var i=this.props,o=i.title,a=i.attribute,s=i.elementRef,l=Oe(i,["title","attribute","elementRef"]),c=Ci(l,["eventKey"]);return ur(!a,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),u.exports.createElement(Kt.Item,ne({},a,{title:typeof o=="string"?o:void 0},c,{ref:s}))}}]),n}(u.exports.Component),zv=function(e){var n,r=e.style,i=e.className,o=e.eventKey;e.warnKey;var a=e.disabled,s=e.itemIcon,l=e.children,c=e.role,d=e.onMouseEnter,f=e.onMouseLeave,h=e.onClick,v=e.onKeyDown,m=e.onFocus,b=Oe(e,["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"]),g=$l(o),w=u.exports.useContext(gt),D=w.prefixCls,E=w.onItemClick,y=w.disabled,S=w.overflowDisabled,x=w.itemIcon,I=w.selectedKeys,_=w.onActive,F="".concat(D,"-item"),R=u.exports.useRef(),P=u.exports.useRef(),O=y||a,j=xr(o),N=function(q){return{key:o,keyPath:mt(j).reverse(),item:R.current,domEvent:q}},k=s||x,V=Al(o,O,d,f),T=V.active,C=Oe(V,["active"]),M=I.includes(o),A=zl(j.length),W=function(q){if(!O){var J=N(q);h==null||h(Si(J)),E(J)}},L=function(q){if(v==null||v(q),q.which===we.ENTER){var J=N(q);h==null||h(Si(J)),E(J)}},K=function(q){_(o),m==null||m(q)},Z={};return e.role==="option"&&(Z["aria-selected"]=M),u.exports.createElement(Lv,ne({ref:R,elementRef:P,role:c===null?"none":c||"menuitem",tabIndex:a?null:-1,"data-menu-id":S&&g?null:g},b,C,Z,{component:"li","aria-disabled":a,style:$($({},A),r),className:fe(F,(n={},G(n,"".concat(F,"-active"),T),G(n,"".concat(F,"-selected"),M),G(n,"".concat(F,"-disabled"),O),n),i),onClick:W,onKeyDown:L,onFocus:K}),l,u.exports.createElement(Ll,{props:$($({},e),{},{isSelected:M}),icon:k}))};function Bo(t){var e=t.eventKey,n=Ei(),r=xr(e);return u.exports.useEffect(function(){if(n)return n.registerPath(e,r),function(){n.unregisterPath(e,r)}},[r]),n?null:u.exports.createElement(zv,t)}function jo(t,e){return kn(t).map(function(n,r){if(u.exports.isValidElement(n)){var i,o,a=n.key,s=(i=(o=n.props)===null||o===void 0?void 0:o.eventKey)!==null&&i!==void 0?i:a,l=s==null;l&&(s="tmp_key-".concat([].concat(mt(e),[r]).join("-")));var c={key:s,eventKey:s};return u.exports.cloneElement(n,c)}return n})}function zn(t){var e=u.exports.useRef(t);e.current=t;var n=u.exports.useCallback(function(){for(var r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(r=e.current)===null||r===void 0?void 0:r.call.apply(r,[e].concat(o))},[]);return t?n:void 0}var Fv=function(e,n){var r=e.className,i=e.children,o=Oe(e,["className","children"]),a=u.exports.useContext(gt),s=a.prefixCls,l=a.mode;return u.exports.createElement("ul",ne({className:fe(s,"".concat(s,"-sub"),"".concat(s,"-").concat(l==="inline"?"inline":"vertical"),r)},o,{"data-menu-list":!0,ref:n}),i)},Wo=u.exports.forwardRef(Fv);Wo.displayName="SubMenuList";function Di(t,e){return t?t.contains(e):!1}function Mi(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var Bv=u.exports.forwardRef(function(t,e){var n=t.didUpdate,r=t.getContainer,i=t.children,o=u.exports.useRef();u.exports.useImperativeHandle(e,function(){return{}});var a=u.exports.useRef(!1);return!a.current&&Mi()&&(o.current=r(),a.current=!0),u.exports.useEffect(function(){n==null||n(t)}),u.exports.useEffect(function(){return function(){var s,l;(s=o.current)===null||s===void 0||(l=s.parentNode)===null||l===void 0||l.removeChild(o.current)}},[]),o.current?On.createPortal(i,o.current):null});function jv(t,e,n){return n?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function Wv(t,e,n){var r=t[e]||{};return $($({},r),n)}function Hv(t,e,n,r){for(var i=n.points,o=Object.keys(t),a=0;a<o.length;a+=1){var s=o[a];if(jv(t[s].points,i,r))return"".concat(e,"-placement-").concat(s)}return""}function Kl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function $v(t,e){var n={animationend:Kl("Animation","AnimationEnd"),transitionend:Kl("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var Kv=$v(Mi(),typeof window!="undefined"?window:{}),Vl={};if(Mi()){var Vv=document.createElement("div");Vl=Vv.style}var Oi={};function Ul(t){if(Oi[t])return Oi[t];var e=Kv[t];if(e)for(var n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(e,o)&&o in Vl)return Oi[t]=e[o],Oi[t]}return""}var Gl=Ul("animationend"),ql=Ul("transitionend"),Uv=!!(Gl&&ql),Yl=Gl||"animationend",Xl=ql||"transitionend";function Jl(t,e){if(!t)return null;if(Zt(t)==="object"){var n=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return t[n]}return"".concat(t,"-").concat(e)}var Cr="none",Ho="appear",$o="enter",Ko="leave",Zl="none",Vt="prepare",Fn="start",Bn="active",Vo="end";function Uo(t){var e=u.exports.useRef(!1),n=u.exports.useState(t),r=U(n,2),i=r[0],o=r[1];function a(s){e.current||o(s)}return u.exports.useEffect(function(){return function(){e.current=!0}},[]),[i,a]}var Ql=Mi()?u.exports.useLayoutEffect:u.exports.useEffect,Gv=function(){var t=u.exports.useRef(null);function e(){Ce.cancel(t.current)}function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var o=Ce(function(){i<=1?r({isCanceled:function(){return o!==t.current}}):n(r,i-1)});t.current=o}return u.exports.useEffect(function(){return function(){e()}},[]),[n,e]},ec=[Vt,Fn,Bn,Vo],tc=!1,qv=!0;function nc(t){return t===Bn||t===Vo}var Yv=function(t,e){var n=u.exports.useState(Zl),r=U(n,2),i=r[0],o=r[1],a=Gv(),s=U(a,2),l=s[0],c=s[1];function d(){o(Vt)}return Ql(function(){if(i!==Zl&&i!==Vo){var f=ec.indexOf(i),h=ec[f+1],v=e(i);v===tc?o(h):l(function(m){function b(){m.isCanceled()||o(h)}v===!0?b():Promise.resolve(v).then(b)})}},[t,i]),u.exports.useEffect(function(){return function(){c()}},[]),[d,i]},Xv=function(t){var e=u.exports.useRef(),n=u.exports.useRef(t);n.current=t;var r=u.exports.useCallback(function(a){n.current(a)},[]);function i(a){a&&(a.removeEventListener(Xl,r),a.removeEventListener(Yl,r))}function o(a){e.current&&e.current!==a&&i(e.current),a&&a!==e.current&&(a.addEventListener(Xl,r),a.addEventListener(Yl,r),e.current=a)}return u.exports.useEffect(function(){return function(){i(e.current)}},[]),[o,i]};function Jv(t,e,n,r){var i=r.motionEnter,o=i===void 0?!0:i,a=r.motionAppear,s=a===void 0?!0:a,l=r.motionLeave,c=l===void 0?!0:l,d=r.motionDeadline,f=r.motionLeaveImmediately,h=r.onAppearPrepare,v=r.onEnterPrepare,m=r.onLeavePrepare,b=r.onAppearStart,g=r.onEnterStart,w=r.onLeaveStart,D=r.onAppearActive,E=r.onEnterActive,y=r.onLeaveActive,S=r.onAppearEnd,x=r.onEnterEnd,I=r.onLeaveEnd,_=r.onVisibleChanged,F=Uo(),R=U(F,2),P=R[0],O=R[1],j=Uo(Cr),N=U(j,2),k=N[0],V=N[1],T=Uo(null),C=U(T,2),M=C[0],A=C[1],W=u.exports.useRef(!1),L=u.exports.useRef(null),K=u.exports.useRef(!1),Z=u.exports.useRef(null);function z(){var se=n();return se||Z.current}var q=u.exports.useRef(!1);function J(se){var ce=z();if(!(se&&!se.deadline&&se.target!==ce)){var Se;k===Ho&&q.current?Se=S==null?void 0:S(ce,se):k===$o&&q.current?Se=x==null?void 0:x(ce,se):k===Ko&&q.current&&(Se=I==null?void 0:I(ce,se)),Se!==!1&&!K.current&&(V(Cr),A(null))}}var le=Xv(J),ve=U(le,1),me=ve[0],be=u.exports.useMemo(function(){var se,ce,Se;switch(k){case"appear":return se={},G(se,Vt,h),G(se,Fn,b),G(se,Bn,D),se;case"enter":return ce={},G(ce,Vt,v),G(ce,Fn,g),G(ce,Bn,E),ce;case"leave":return Se={},G(Se,Vt,m),G(Se,Fn,w),G(Se,Bn,y),Se;default:return{}}},[k]),ze=Yv(k,function(se){if(se===Vt){var ce=be[Vt];return ce?ce(z()):tc}if(Ne in be){var Se;A(((Se=be[Ne])===null||Se===void 0?void 0:Se.call(be,z(),null))||null)}return Ne===Bn&&(me(z()),d>0&&(clearTimeout(L.current),L.current=setTimeout(function(){J({deadline:!0})},d))),qv}),Fe=U(ze,2),tt=Fe[0],Ne=Fe[1],ue=nc(Ne);q.current=ue,Ql(function(){O(e);var se=W.current;if(W.current=!0,!!t){var ce;!se&&e&&s&&(ce=Ho),se&&e&&o&&(ce=$o),(se&&!e&&c||!se&&f&&!e&&c)&&(ce=Ko),ce&&(V(ce),tt())}},[e]),u.exports.useEffect(function(){(k===Ho&&!s||k===$o&&!o||k===Ko&&!c)&&V(Cr)},[s,o,c]),u.exports.useEffect(function(){return function(){clearTimeout(L.current),K.current=!0}},[]),u.exports.useEffect(function(){P!==void 0&&k===Cr&&(_==null||_(P))},[P,k]);var je=M;return be[Vt]&&Ne===Fn&&(je=$({transition:"none"},je)),[k,Ne,je,P??e]}var Zv=function(t){Ft(n,t);var e=Wt(n);function n(){return Bt(this,n),e.apply(this,arguments)}return jt(n,[{key:"render",value:function(){return this.props.children}}]),n}(u.exports.Component);function Qv(t){var e=t;Zt(t)==="object"&&(e=t.transitionSupport);function n(i){return!!(i.motionName&&e)}var r=u.exports.forwardRef(function(i,o){var a=i.visible,s=a===void 0?!0:a,l=i.removeOnLeave,c=l===void 0?!0:l,d=i.forceRender,f=i.children,h=i.motionName,v=i.leavedClassName,m=i.eventProps,b=n(i),g=u.exports.useRef(),w=u.exports.useRef();function D(){try{return Ao(g.current||w.current)}catch(V){return null}}var E=Jv(b,s,D,i),y=U(E,4),S=y[0],x=y[1],I=y[2],_=y[3],F=u.exports.useRef(_);_&&(F.current=!0);var R=u.exports.useRef(o);R.current=o;var P=u.exports.useCallback(function(V){g.current=V,xl(R.current,V)},[]),O,j=$($({},m),{},{visible:s});if(!f)O=null;else if(S===Cr||!n(i))_?O=f($({},j),P):!c&&F.current?O=f($($({},j),{},{className:v}),P):d?O=f($($({},j),{},{style:{display:"none"}}),P):O=null;else{var N,k;x===Vt?k="prepare":nc(x)?k="active":x===Fn&&(k="start"),O=f($($({},j),{},{className:fe(Jl(h,S),(N={},G(N,Jl(h,"".concat(S,"-").concat(k)),k),G(N,h,typeof h=="string"),N)),style:I}),P)}return u.exports.createElement(Zv,{ref:w},O)});return r.displayName="CSSMotion",r}var Sr=Qv(Uv);function rc(t){var e=t.prefixCls,n=t.motion,r=t.animation,i=t.transitionName;return n||(r?{motionName:"".concat(e,"-").concat(r)}:i?{motionName:i}:null)}function em(t){var e=t.prefixCls,n=t.visible,r=t.zIndex,i=t.mask,o=t.maskMotion,a=t.maskAnimation,s=t.maskTransitionName;if(!i)return null;var l={};return(o||s||a)&&(l=$({motionAppear:!0},rc({motion:o,prefixCls:e,transitionName:s,animation:a}))),u.exports.createElement(Sr,ne({},l,{visible:n,removeOnLeave:!0}),function(c){var d=c.className;return u.exports.createElement("div",{style:{zIndex:r},className:fe("".concat(e,"-mask"),d)})})}var ic=function(t){if(!t)return!1;if(t.offsetParent)return!0;if(t.getBBox){var e=t.getBBox();if(e.width||e.height)return!0}if(t.getBoundingClientRect){var n=t.getBoundingClientRect();if(n.width||n.height)return!0}return!1};function oc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ac(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oc(Object(n),!0).forEach(function(r){tm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oc(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ti(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ti=function(e){return typeof e}:Ti=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ti(t)}function tm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Er,nm={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function Pi(){if(Er!==void 0)return Er;Er="";var t=document.createElement("p").style,e="Transform";for(var n in nm)n+e in t&&(Er=n);return Er}function sc(){return Pi()?"".concat(Pi(),"TransitionProperty"):"transitionProperty"}function _i(){return Pi()?"".concat(Pi(),"Transform"):"transform"}function lc(t,e){var n=sc();n&&(t.style[n]=e,n!=="transitionProperty"&&(t.style.transitionProperty=e))}function Go(t,e){var n=_i();n&&(t.style[n]=e,n!=="transform"&&(t.style.transform=e))}function rm(t){return t.style.transitionProperty||t.style[sc()]}function im(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("transform")||e.getPropertyValue(_i());if(n&&n!=="none"){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}var om=/matrix\((.*)\)/,am=/matrix3d\((.*)\)/;function sm(t,e){var n=window.getComputedStyle(t,null),r=n.getPropertyValue("transform")||n.getPropertyValue(_i());if(r&&r!=="none"){var i,o=r.match(om);if(o)o=o[1],i=o.split(",").map(function(s){return parseFloat(s,10)}),i[4]=e.x,i[5]=e.y,Go(t,"matrix(".concat(i.join(","),")"));else{var a=r.match(am)[1];i=a.split(",").map(function(s){return parseFloat(s,10)}),i[12]=e.x,i[13]=e.y,Go(t,"matrix3d(".concat(i.join(","),")"))}}else Go(t,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}var lm=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,Dr;function cc(t){var e=t.style.display;t.style.display="none",t.offsetHeight,t.style.display=e}function jn(t,e,n){var r=n;if(Ti(e)==="object"){for(var i in e)e.hasOwnProperty(i)&&jn(t,i,e[i]);return}if(typeof r!="undefined"){typeof r=="number"&&(r="".concat(r,"px")),t.style[e]=r;return}return Dr(t,e)}function cm(t){var e,n,r,i=t.ownerDocument,o=i.body,a=i&&i.documentElement;return e=t.getBoundingClientRect(),n=e.left,r=e.top,n-=a.clientLeft||o.clientLeft||0,r-=a.clientTop||o.clientTop||0,{left:n,top:r}}function uc(t,e){var n=t["page".concat(e?"Y":"X","Offset")],r="scroll".concat(e?"Top":"Left");if(typeof n!="number"){var i=t.document;n=i.documentElement[r],typeof n!="number"&&(n=i.body[r])}return n}function dc(t){return uc(t)}function fc(t){return uc(t,!0)}function Mr(t){var e=cm(t),n=t.ownerDocument,r=n.defaultView||n.parentWindow;return e.left+=dc(r),e.top+=fc(r),e}function qo(t){return t!=null&&t==t.window}function pc(t){return qo(t)?t.document:t.nodeType===9?t:t.ownerDocument}function um(t,e,n){var r=n,i="",o=pc(t);return r=r||o.defaultView.getComputedStyle(t,null),r&&(i=r.getPropertyValue(e)||r[e]),i}var dm=new RegExp("^(".concat(lm,")(?!px)[a-z%]+$"),"i"),fm=/^(top|right|bottom|left)$/,Yo="currentStyle",Xo="runtimeStyle",hn="left",pm="px";function hm(t,e){var n=t[Yo]&&t[Yo][e];if(dm.test(n)&&!fm.test(e)){var r=t.style,i=r[hn],o=t[Xo][hn];t[Xo][hn]=t[Yo][hn],r[hn]=e==="fontSize"?"1em":n||0,n=r.pixelLeft+pm,r[hn]=i,t[Xo][hn]=o}return n===""?"auto":n}typeof window!="undefined"&&(Dr=window.getComputedStyle?um:hm);function Ii(t,e){return t==="left"?e.useCssRight?"right":t:e.useCssBottom?"bottom":t}function hc(t){if(t==="left")return"right";if(t==="right")return"left";if(t==="top")return"bottom";if(t==="bottom")return"top"}function vc(t,e,n){jn(t,"position")==="static"&&(t.style.position="relative");var r=-999,i=-999,o=Ii("left",n),a=Ii("top",n),s=hc(o),l=hc(a);o!=="left"&&(r=999),a!=="top"&&(i=999);var c="",d=Mr(t);("left"in e||"top"in e)&&(c=rm(t)||"",lc(t,"none")),"left"in e&&(t.style[s]="",t.style[o]="".concat(r,"px")),"top"in e&&(t.style[l]="",t.style[a]="".concat(i,"px")),cc(t);var f=Mr(t),h={};for(var v in e)if(e.hasOwnProperty(v)){var m=Ii(v,n),b=v==="left"?r:i,g=d[v]-f[v];m===v?h[m]=b+g:h[m]=b-g}jn(t,h),cc(t),("left"in e||"top"in e)&&lc(t,c);var w={};for(var D in e)if(e.hasOwnProperty(D)){var E=Ii(D,n),y=e[D]-d[D];D===E?w[E]=h[E]+y:w[E]=h[E]-y}jn(t,w)}function vm(t,e){var n=Mr(t),r=im(t),i={x:r.x,y:r.y};"left"in e&&(i.x=r.x+e.left-n.left),"top"in e&&(i.y=r.y+e.top-n.top),sm(t,i)}function mm(t,e,n){if(n.ignoreShake){var r=Mr(t),i=r.left.toFixed(0),o=r.top.toFixed(0),a=e.left.toFixed(0),s=e.top.toFixed(0);if(i===a&&o===s)return}n.useCssRight||n.useCssBottom?vc(t,e,n):n.useCssTransform&&_i()in document.body.style?vm(t,e):vc(t,e,n)}function Jo(t,e){for(var n=0;n<t.length;n++)e(t[n])}function mc(t){return Dr(t,"boxSizing")==="border-box"}var gm=["margin","border","padding"],Zo=-1,bm=2,Qo=1,ym=0;function wm(t,e,n){var r={},i=t.style,o;for(o in e)e.hasOwnProperty(o)&&(r[o]=i[o],i[o]=e[o]);n.call(t);for(o in e)e.hasOwnProperty(o)&&(i[o]=r[o])}function Or(t,e,n){var r=0,i,o,a;for(o=0;o<e.length;o++)if(i=e[o],i)for(a=0;a<n.length;a++){var s=void 0;i==="border"?s="".concat(i).concat(n[a],"Width"):s=i+n[a],r+=parseFloat(Dr(t,s))||0}return r}var Rt={getParent:function(e){var n=e;do n.nodeType===11&&n.host?n=n.host:n=n.parentNode;while(n&&n.nodeType!==1&&n.nodeType!==9);return n}};Jo(["Width","Height"],function(t){Rt["doc".concat(t)]=function(e){var n=e.document;return Math.max(n.documentElement["scroll".concat(t)],n.body["scroll".concat(t)],Rt["viewport".concat(t)](n))},Rt["viewport".concat(t)]=function(e){var n="client".concat(t),r=e.document,i=r.body,o=r.documentElement,a=o[n];return r.compatMode==="CSS1Compat"&&a||i&&i[n]||a}});function gc(t,e,n){var r=n;if(qo(t))return e==="width"?Rt.viewportWidth(t):Rt.viewportHeight(t);if(t.nodeType===9)return e==="width"?Rt.docWidth(t):Rt.docHeight(t);var i=e==="width"?["Left","Right"]:["Top","Bottom"],o=e==="width"?t.getBoundingClientRect().width:t.getBoundingClientRect().height,a=mc(t),s=0;(o==null||o<=0)&&(o=void 0,s=Dr(t,e),(s==null||Number(s)<0)&&(s=t.style[e]||0),s=parseFloat(s)||0),r===void 0&&(r=a?Qo:Zo);var l=o!==void 0||a,c=o||s;return r===Zo?l?c-Or(t,["border","padding"],i):s:l?r===Qo?c:c+(r===bm?-Or(t,["border"],i):Or(t,["margin"],i)):s+Or(t,gm.slice(r),i)}var xm={position:"absolute",visibility:"hidden",display:"block"};function bc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=e[0];return i.offsetWidth!==0?r=gc.apply(void 0,e):wm(i,xm,function(){r=gc.apply(void 0,e)}),r}Jo(["width","height"],function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);Rt["outer".concat(e)]=function(r,i){return r&&bc(r,t,i?ym:Qo)};var n=t==="width"?["Left","Right"]:["Top","Bottom"];Rt[t]=function(r,i){var o=i;if(o!==void 0){if(r){var a=mc(r);return a&&(o+=Or(r,["padding","border"],n)),jn(r,t,o)}return}return r&&bc(r,t,Zo)}});function yc(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var re={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var n=e.ownerDocument||e;return n.defaultView||n.parentWindow},getDocument:pc,offset:function(e,n,r){if(typeof n!="undefined")mm(e,n,r||{});else return Mr(e)},isWindow:qo,each:Jo,css:jn,clone:function(e){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);var i=e.overflow;if(i)for(n in e)e.hasOwnProperty(n)&&(r.overflow[n]=e.overflow[n]);return r},mix:yc,getWindowScrollLeft:function(e){return dc(e)},getWindowScrollTop:function(e){return fc(e)},merge:function(){for(var e={},n=0;n<arguments.length;n++)re.mix(e,n<0||arguments.length<=n?void 0:arguments[n]);return e},viewportWidth:0,viewportHeight:0};yc(re,Rt);var ea=re.getParent;function ta(t){if(re.isWindow(t)||t.nodeType===9)return null;var e=re.getDocument(t),n=e.body,r,i=re.css(t,"position"),o=i==="fixed"||i==="absolute";if(!o)return t.nodeName.toLowerCase()==="html"?null:ea(t);for(r=ea(t);r&&r!==n&&r.nodeType!==9;r=ea(r))if(i=re.css(r,"position"),i!=="static")return r;return null}var wc=re.getParent;function Cm(t){if(re.isWindow(t)||t.nodeType===9)return!1;var e=re.getDocument(t),n=e.body,r=null;for(r=wc(t);r&&r!==n&&r!==e;r=wc(r)){var i=re.css(r,"position");if(i==="fixed")return!0}return!1}function na(t,e){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=ta(t),i=re.getDocument(t),o=i.defaultView||i.parentWindow,a=i.body,s=i.documentElement;r;){if((navigator.userAgent.indexOf("MSIE")===-1||r.clientWidth!==0)&&r!==a&&r!==s&&re.css(r,"overflow")!=="visible"){var l=re.offset(r);l.left+=r.clientLeft,l.top+=r.clientTop,n.top=Math.max(n.top,l.top),n.right=Math.min(n.right,l.left+r.clientWidth),n.bottom=Math.min(n.bottom,l.top+r.clientHeight),n.left=Math.max(n.left,l.left)}else if(r===a||r===s)break;r=ta(r)}var c=null;if(!re.isWindow(t)&&t.nodeType!==9){c=t.style.position;var d=re.css(t,"position");d==="absolute"&&(t.style.position="fixed")}var f=re.getWindowScrollLeft(o),h=re.getWindowScrollTop(o),v=re.viewportWidth(o),m=re.viewportHeight(o),b=s.scrollWidth,g=s.scrollHeight,w=window.getComputedStyle(a);if(w.overflowX==="hidden"&&(b=o.innerWidth),w.overflowY==="hidden"&&(g=o.innerHeight),t.style&&(t.style.position=c),e||Cm(t))n.left=Math.max(n.left,f),n.top=Math.max(n.top,h),n.right=Math.min(n.right,f+v),n.bottom=Math.min(n.bottom,h+m);else{var D=Math.max(b,f+v);n.right=Math.min(n.right,D);var E=Math.max(g,h+m);n.bottom=Math.min(n.bottom,E)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function Sm(t,e,n,r){var i=re.clone(t),o={width:e.width,height:e.height};return r.adjustX&&i.left<n.left&&(i.left=n.left),r.resizeWidth&&i.left>=n.left&&i.left+o.width>n.right&&(o.width-=i.left+o.width-n.right),r.adjustX&&i.left+o.width>n.right&&(i.left=Math.max(n.right-o.width,n.left)),r.adjustY&&i.top<n.top&&(i.top=n.top),r.resizeHeight&&i.top>=n.top&&i.top+o.height>n.bottom&&(o.height-=i.top+o.height-n.bottom),r.adjustY&&i.top+o.height>n.bottom&&(i.top=Math.max(n.bottom-o.height,n.top)),re.mix(i,o)}function ra(t){var e,n,r;if(!re.isWindow(t)&&t.nodeType!==9)e=re.offset(t),n=re.outerWidth(t),r=re.outerHeight(t);else{var i=re.getWindow(t);e={left:re.getWindowScrollLeft(i),top:re.getWindowScrollTop(i)},n=re.viewportWidth(i),r=re.viewportHeight(i)}return e.width=n,e.height=r,e}function xc(t,e){var n=e.charAt(0),r=e.charAt(1),i=t.width,o=t.height,a=t.left,s=t.top;return n==="c"?s+=o/2:n==="b"&&(s+=o),r==="c"?a+=i/2:r==="r"&&(a+=i),{left:a,top:s}}function Ri(t,e,n,r,i){var o=xc(e,n[1]),a=xc(t,n[0]),s=[a.left-o.left,a.top-o.top];return{left:Math.round(t.left-s[0]+r[0]-i[0]),top:Math.round(t.top-s[1]+r[1]-i[1])}}function Cc(t,e,n){return t.left<n.left||t.left+e.width>n.right}function Sc(t,e,n){return t.top<n.top||t.top+e.height>n.bottom}function Em(t,e,n){return t.left>n.right||t.left+e.width<n.left}function Dm(t,e,n){return t.top>n.bottom||t.top+e.height<n.top}function ki(t,e,n){var r=[];return re.each(t,function(i){r.push(i.replace(e,function(o){return n[o]}))}),r}function Ni(t,e){return t[e]=-t[e],t}function Ec(t,e){var n;return/%$/.test(t)?n=parseInt(t.substring(0,t.length-1),10)/100*e:n=parseInt(t,10),n||0}function Dc(t,e){t[0]=Ec(t[0],e.width),t[1]=Ec(t[1],e.height)}function Mc(t,e,n,r){var i=n.points,o=n.offset||[0,0],a=n.targetOffset||[0,0],s=n.overflow,l=n.source||t;o=[].concat(o),a=[].concat(a),s=s||{};var c={},d=0,f=!!(s&&s.alwaysByViewport),h=na(l,f),v=ra(l);Dc(o,v),Dc(a,e);var m=Ri(v,e,i,o,a),b=re.merge(v,m);if(h&&(s.adjustX||s.adjustY)&&r){if(s.adjustX&&Cc(m,v,h)){var g=ki(i,/[lr]/gi,{l:"r",r:"l"}),w=Ni(o,0),D=Ni(a,0),E=Ri(v,e,g,w,D);Em(E,v,h)||(d=1,i=g,o=w,a=D)}if(s.adjustY&&Sc(m,v,h)){var y=ki(i,/[tb]/gi,{t:"b",b:"t"}),S=Ni(o,1),x=Ni(a,1),I=Ri(v,e,y,S,x);Dm(I,v,h)||(d=1,i=y,o=S,a=x)}d&&(m=Ri(v,e,i,o,a),re.mix(b,m));var _=Cc(m,v,h),F=Sc(m,v,h);if(_||F){var R=i;_&&(R=ki(i,/[lr]/gi,{l:"r",r:"l"})),F&&(R=ki(i,/[tb]/gi,{t:"b",b:"t"})),i=R,o=n.offset||[0,0],a=n.targetOffset||[0,0]}c.adjustX=s.adjustX&&_,c.adjustY=s.adjustY&&F,(c.adjustX||c.adjustY)&&(b=Sm(m,v,h,c))}return b.width!==v.width&&re.css(l,"width",re.width(l)+b.width-v.width),b.height!==v.height&&re.css(l,"height",re.height(l)+b.height-v.height),re.offset(l,{left:b.left,top:b.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:i,offset:o,targetOffset:a,overflow:c}}function Mm(t,e){var n=na(t,e),r=ra(t);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}function ia(t,e,n){var r=n.target||e,i=ra(r),o=!Mm(r,n.overflow&&n.overflow.alwaysByViewport);return Mc(t,i,n,o)}ia.__getOffsetParent=ta;ia.__getVisibleRectForElement=na;function Om(t,e,n){var r,i,o=re.getDocument(t),a=o.defaultView||o.parentWindow,s=re.getWindowScrollLeft(a),l=re.getWindowScrollTop(a),c=re.viewportWidth(a),d=re.viewportHeight(a);"pageX"in e?r=e.pageX:r=s+e.clientX,"pageY"in e?i=e.pageY:i=l+e.clientY;var f={left:r,top:i,width:0,height:0},h=r>=0&&r<=s+c&&i>=0&&i<=l+d,v=[n.points[0],"cc"];return Mc(t,f,ac(ac({},n),{},{points:v}),h)}var Tm=Hf;function Pm(t,e){return Tm(t,e)}var _m=Pm;function Im(t,e){return t===e?!0:!t||!e?!1:"pageX"in e&&"pageY"in e?t.pageX===e.pageX&&t.pageY===e.pageY:"clientX"in e&&"clientY"in e?t.clientX===e.clientX&&t.clientY===e.clientY:!1}function Rm(t,e){t!==document.activeElement&&Di(e,t)&&typeof t.focus=="function"&&t.focus()}function Oc(t,e){var n=null,r=null;function i(a){var s=U(a,1),l=s[0].target;if(!!document.documentElement.contains(l)){var c=l.getBoundingClientRect(),d=c.width,f=c.height,h=Math.floor(d),v=Math.floor(f);(n!==h||r!==v)&&Promise.resolve().then(function(){e({width:h,height:v})}),n=h,r=v}}var o=new Fo(i);return t&&o.observe(t),function(){o.disconnect()}}var km=function(t,e){var n=p.useRef(!1),r=p.useRef(null);function i(){window.clearTimeout(r.current)}function o(a){if(!n.current||a===!0){if(t()===!1)return;n.current=!0,i(),r.current=window.setTimeout(function(){n.current=!1},e)}else i(),r.current=window.setTimeout(function(){n.current=!1,o()},e)}return[o,function(){n.current=!1,i()}]};function Tc(t){return typeof t!="function"?null:t()}function Pc(t){return Zt(t)!=="object"||!t?null:t}var Nm=function(e,n){var r=e.children,i=e.disabled,o=e.target,a=e.align,s=e.onAlign,l=e.monitorWindowResize,c=e.monitorBufferTime,d=c===void 0?0:c,f=p.useRef({}),h=p.useRef(),v=p.Children.only(r),m=p.useRef({});m.current.disabled=i,m.current.target=o,m.current.align=a,m.current.onAlign=s;var b=km(function(){var x=m.current,I=x.disabled,_=x.target,F=x.align,R=x.onAlign;if(!I&&_){var P=h.current,O,j=Tc(_),N=Pc(_);f.current.element=j,f.current.point=N,f.current.align=F;var k=document,V=k.activeElement;return j&&ic(j)?O=ia(P,j,F):N&&(O=Om(P,N,F)),Rm(V,P),R&&O&&R(P,O),!0}return!1},d),g=U(b,2),w=g[0],D=g[1],E=p.useRef({cancel:function(){}}),y=p.useRef({cancel:function(){}});p.useEffect(function(){var x=Tc(o),I=Pc(o);h.current!==y.current.element&&(y.current.cancel(),y.current.element=h.current,y.current.cancel=Oc(h.current,w)),(f.current.element!==x||!Im(f.current.point,I)||!_m(f.current.align,a))&&(w(),E.current.element!==x&&(E.current.cancel(),E.current.element=x,E.current.cancel=Oc(x,w)))}),p.useEffect(function(){i?D():w()},[i]);var S=p.useRef(null);return p.useEffect(function(){l?S.current||(S.current=dr(window,"resize",w)):S.current&&(S.current.remove(),S.current=null)},[l]),p.useEffect(function(){return function(){E.current.cancel(),y.current.cancel(),S.current&&S.current.remove(),D()}},[]),p.useImperativeHandle(n,function(){return{forceAlign:function(){return w(!0)}}}),p.isValidElement(v)&&(v=p.cloneElement(v,{ref:Lo(v.ref,h)})),v},_c=p.forwardRef(Nm);_c.displayName="Align";var Ic={exports:{}};(function(t){var e=function(n){var r=Object.prototype,i=r.hasOwnProperty,o,a=typeof Symbol=="function"?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function d(C,M,A){return Object.defineProperty(C,M,{value:A,enumerable:!0,configurable:!0,writable:!0}),C[M]}try{d({},"")}catch(C){d=function(M,A,W){return M[A]=W}}function f(C,M,A,W){var L=M&&M.prototype instanceof D?M:D,K=Object.create(L.prototype),Z=new k(W||[]);return K._invoke=P(C,A,Z),K}n.wrap=f;function h(C,M,A){try{return{type:"normal",arg:C.call(M,A)}}catch(W){return{type:"throw",arg:W}}}var v="suspendedStart",m="suspendedYield",b="executing",g="completed",w={};function D(){}function E(){}function y(){}var S={};d(S,s,function(){return this});var x=Object.getPrototypeOf,I=x&&x(x(V([])));I&&I!==r&&i.call(I,s)&&(S=I);var _=y.prototype=D.prototype=Object.create(S);E.prototype=y,d(_,"constructor",y),d(y,"constructor",E),E.displayName=d(y,c,"GeneratorFunction");function F(C){["next","throw","return"].forEach(function(M){d(C,M,function(A){return this._invoke(M,A)})})}n.isGeneratorFunction=function(C){var M=typeof C=="function"&&C.constructor;return M?M===E||(M.displayName||M.name)==="GeneratorFunction":!1},n.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,y):(C.__proto__=y,d(C,c,"GeneratorFunction")),C.prototype=Object.create(_),C},n.awrap=function(C){return{__await:C}};function R(C,M){function A(K,Z,z,q){var J=h(C[K],C,Z);if(J.type==="throw")q(J.arg);else{var le=J.arg,ve=le.value;return ve&&typeof ve=="object"&&i.call(ve,"__await")?M.resolve(ve.__await).then(function(me){A("next",me,z,q)},function(me){A("throw",me,z,q)}):M.resolve(ve).then(function(me){le.value=me,z(le)},function(me){return A("throw",me,z,q)})}}var W;function L(K,Z){function z(){return new M(function(q,J){A(K,Z,q,J)})}return W=W?W.then(z,z):z()}this._invoke=L}F(R.prototype),d(R.prototype,l,function(){return this}),n.AsyncIterator=R,n.async=function(C,M,A,W,L){L===void 0&&(L=Promise);var K=new R(f(C,M,A,W),L);return n.isGeneratorFunction(M)?K:K.next().then(function(Z){return Z.done?Z.value:K.next()})};function P(C,M,A){var W=v;return function(K,Z){if(W===b)throw new Error("Generator is already running");if(W===g){if(K==="throw")throw Z;return T()}for(A.method=K,A.arg=Z;;){var z=A.delegate;if(z){var q=O(z,A);if(q){if(q===w)continue;return q}}if(A.method==="next")A.sent=A._sent=A.arg;else if(A.method==="throw"){if(W===v)throw W=g,A.arg;A.dispatchException(A.arg)}else A.method==="return"&&A.abrupt("return",A.arg);W=b;var J=h(C,M,A);if(J.type==="normal"){if(W=A.done?g:m,J.arg===w)continue;return{value:J.arg,done:A.done}}else J.type==="throw"&&(W=g,A.method="throw",A.arg=J.arg)}}}function O(C,M){var A=C.iterator[M.method];if(A===o){if(M.delegate=null,M.method==="throw"){if(C.iterator.return&&(M.method="return",M.arg=o,O(C,M),M.method==="throw"))return w;M.method="throw",M.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var W=h(A,C.iterator,M.arg);if(W.type==="throw")return M.method="throw",M.arg=W.arg,M.delegate=null,w;var L=W.arg;if(!L)return M.method="throw",M.arg=new TypeError("iterator result is not an object"),M.delegate=null,w;if(L.done)M[C.resultName]=L.value,M.next=C.nextLoc,M.method!=="return"&&(M.method="next",M.arg=o);else return L;return M.delegate=null,w}F(_),d(_,c,"Generator"),d(_,s,function(){return this}),d(_,"toString",function(){return"[object Generator]"});function j(C){var M={tryLoc:C[0]};1 in C&&(M.catchLoc=C[1]),2 in C&&(M.finallyLoc=C[2],M.afterLoc=C[3]),this.tryEntries.push(M)}function N(C){var M=C.completion||{};M.type="normal",delete M.arg,C.completion=M}function k(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(j,this),this.reset(!0)}n.keys=function(C){var M=[];for(var A in C)M.push(A);return M.reverse(),function W(){for(;M.length;){var L=M.pop();if(L in C)return W.value=L,W.done=!1,W}return W.done=!0,W}};function V(C){if(C){var M=C[s];if(M)return M.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var A=-1,W=function L(){for(;++A<C.length;)if(i.call(C,A))return L.value=C[A],L.done=!1,L;return L.value=o,L.done=!0,L};return W.next=W}}return{next:T}}n.values=V;function T(){return{value:o,done:!0}}return k.prototype={constructor:k,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(N),!C)for(var M in this)M.charAt(0)==="t"&&i.call(this,M)&&!isNaN(+M.slice(1))&&(this[M]=o)},stop:function(){this.done=!0;var C=this.tryEntries[0],M=C.completion;if(M.type==="throw")throw M.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var M=this;function A(q,J){return K.type="throw",K.arg=C,M.next=q,J&&(M.method="next",M.arg=o),!!J}for(var W=this.tryEntries.length-1;W>=0;--W){var L=this.tryEntries[W],K=L.completion;if(L.tryLoc==="root")return A("end");if(L.tryLoc<=this.prev){var Z=i.call(L,"catchLoc"),z=i.call(L,"finallyLoc");if(Z&&z){if(this.prev<L.catchLoc)return A(L.catchLoc,!0);if(this.prev<L.finallyLoc)return A(L.finallyLoc)}else if(Z){if(this.prev<L.catchLoc)return A(L.catchLoc,!0)}else if(z){if(this.prev<L.finallyLoc)return A(L.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(C,M){for(var A=this.tryEntries.length-1;A>=0;--A){var W=this.tryEntries[A];if(W.tryLoc<=this.prev&&i.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var L=W;break}}L&&(C==="break"||C==="continue")&&L.tryLoc<=M&&M<=L.finallyLoc&&(L=null);var K=L?L.completion:{};return K.type=C,K.arg=M,L?(this.method="next",this.next=L.finallyLoc,w):this.complete(K)},complete:function(C,M){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&M&&(this.next=M),w},finish:function(C){for(var M=this.tryEntries.length-1;M>=0;--M){var A=this.tryEntries[M];if(A.finallyLoc===C)return this.complete(A.completion,A.afterLoc),N(A),w}},catch:function(C){for(var M=this.tryEntries.length-1;M>=0;--M){var A=this.tryEntries[M];if(A.tryLoc===C){var W=A.completion;if(W.type==="throw"){var L=W.arg;N(A)}return L}}throw new Error("illegal catch attempt")},delegateYield:function(C,M,A){return this.delegate={iterator:V(C),resultName:M,nextLoc:A},this.method==="next"&&(this.arg=o),w}},n}(t.exports);try{regeneratorRuntime=e}catch(n){typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(Ic);var Rc=Ic.exports;function kc(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(c){n(c);return}s.done?e(l):Promise.resolve(l).then(r,i)}function Am(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(l){kc(o,r,i,a,s,"next",l)}function s(l){kc(o,r,i,a,s,"throw",l)}a(void 0)})}}var Nc=["measure","align",null,"motion"],Lm=function(t,e){var n=u.exports.useState(null),r=U(n,2),i=r[0],o=r[1],a=u.exports.useRef(),s=u.exports.useRef(!1);function l(f){s.current||o(f)}function c(){Ce.cancel(a.current)}function d(f){c(),a.current=Ce(function(){l(function(h){switch(i){case"align":return"motion";case"motion":return"stable"}return h}),f==null||f()})}return u.exports.useEffect(function(){l("measure")},[t]),u.exports.useEffect(function(){switch(i){case"measure":e();break}i&&(a.current=Ce(Am(Rc.mark(function f(){var h,v;return Rc.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:h=Nc.indexOf(i),v=Nc[h+1],v&&h!==-1&&l(v);case 3:case"end":return b.stop()}},f)}))))},[i]),u.exports.useEffect(function(){return function(){s.current=!0,c()}},[]),[i,d]},zm=function(t){var e=u.exports.useState({width:0,height:0}),n=U(e,2),r=n[0],i=n[1];function o(s){i({width:s.offsetWidth,height:s.offsetHeight})}var a=u.exports.useMemo(function(){var s={};if(t){var l=r.width,c=r.height;t.indexOf("height")!==-1&&c?s.height=c:t.indexOf("minHeight")!==-1&&c&&(s.minHeight=c),t.indexOf("width")!==-1&&l?s.width=l:t.indexOf("minWidth")!==-1&&l&&(s.minWidth=l)}return s},[t,r]);return[a,o]},Ac=u.exports.forwardRef(function(t,e){var n=t.visible,r=t.prefixCls,i=t.className,o=t.style,a=t.children,s=t.zIndex,l=t.stretch,c=t.destroyPopupOnHide,d=t.forceRender,f=t.align,h=t.point,v=t.getRootDomNode,m=t.getClassNameFromAlign,b=t.onAlign,g=t.onMouseEnter,w=t.onMouseLeave,D=t.onMouseDown,E=t.onTouchStart,y=u.exports.useRef(),S=u.exports.useRef(),x=u.exports.useState(),I=U(x,2),_=I[0],F=I[1],R=zm(l),P=U(R,2),O=P[0],j=P[1];function N(){l&&j(v())}var k=Lm(n,N),V=U(k,2),T=V[0],C=V[1],M=u.exports.useRef();function A(){return h||v}function W(){var le;(le=y.current)===null||le===void 0||le.forceAlign()}function L(le,ve){var me=m(ve);_!==me&&F(me),T==="align"&&(_!==me?Promise.resolve().then(function(){W()}):C(function(){var be;(be=M.current)===null||be===void 0||be.call(M)}),b==null||b(le,ve))}var K=$({},rc(t));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(le){var ve=K[le];K[le]=function(me,be){return C(),ve==null?void 0:ve(me,be)}});function Z(){return new Promise(function(le){M.current=le})}u.exports.useEffect(function(){!K.motionName&&T==="motion"&&C()},[K.motionName,T]),u.exports.useImperativeHandle(e,function(){return{forceAlign:W,getElement:function(){return S.current}}});var z=$($({},O),{},{zIndex:s,opacity:T==="motion"||T==="stable"||!n?void 0:0,pointerEvents:T==="stable"?void 0:"none"},o),q=!0;(f==null?void 0:f.points)&&(T==="align"||T==="stable")&&(q=!1);var J=a;return u.exports.Children.count(a)>1&&(J=u.exports.createElement("div",{className:"".concat(r,"-content")},a)),u.exports.createElement(Sr,ne({visible:n,ref:S,leavedClassName:"".concat(r,"-hidden")},K,{onAppearPrepare:Z,onEnterPrepare:Z,removeOnLeave:c,forceRender:d}),function(le,ve){var me=le.className,be=le.style,ze=fe(r,i,_,me);return u.exports.createElement(_c,{target:A(),key:"popup",ref:y,monitorWindowResize:!0,disabled:q,align:f,onAlign:L},u.exports.createElement("div",{ref:ve,className:ze,onMouseEnter:g,onMouseLeave:w,onMouseDownCapture:D,onTouchStartCapture:E,style:$($({},be),z)},J))})});Ac.displayName="PopupInner";var Lc=u.exports.forwardRef(function(t,e){var n=t.prefixCls,r=t.visible,i=t.zIndex,o=t.children,a=t.mobile;a=a===void 0?{}:a;var s=a.popupClassName,l=a.popupStyle,c=a.popupMotion,d=c===void 0?{}:c,f=a.popupRender,h=u.exports.useRef();u.exports.useImperativeHandle(e,function(){return{forceAlign:function(){},getElement:function(){return h.current}}});var v=$({zIndex:i},l),m=o;return u.exports.Children.count(o)>1&&(m=u.exports.createElement("div",{className:"".concat(n,"-content")},o)),f&&(m=f(m)),u.exports.createElement(Sr,ne({visible:r,ref:h,removeOnLeave:!0},d),function(b,g){var w=b.className,D=b.style,E=fe(n,s,w);return u.exports.createElement("div",{ref:g,className:E,style:$($({},D),v)},m)})});Lc.displayName="MobilePopupInner";var Fm=["visible","mobile"],zc=u.exports.forwardRef(function(t,e){var n=t.visible,r=t.mobile,i=Oe(t,Fm),o=u.exports.useState(n),a=U(o,2),s=a[0],l=a[1],c=u.exports.useState(!1),d=U(c,2),f=d[0],h=d[1],v=$($({},i),{},{visible:s});u.exports.useEffect(function(){l(n),n&&r&&h(ml())},[n,r]);var m=f?u.exports.createElement(Lc,ne({},v,{mobile:r,ref:e})):u.exports.createElement(Ac,ne({},v,{ref:e}));return u.exports.createElement("div",null,u.exports.createElement(em,v),m)});zc.displayName="Popup";var Fc=u.exports.createContext(null);function oa(){}function Bm(){return""}function jm(t){return t?t.ownerDocument:window.document}var Wm=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function Hm(t){var e=function(n){Ft(i,n);var r=Wt(i);function i(o){var a;Bt(this,i),a=r.call(this,o),a.popupRef=u.exports.createRef(),a.triggerRef=u.exports.createRef(),a.attachId=void 0,a.clickOutsideHandler=void 0,a.touchOutsideHandler=void 0,a.contextMenuOutsideHandler1=void 0,a.contextMenuOutsideHandler2=void 0,a.mouseDownTimeout=void 0,a.focusTime=void 0,a.preClickTime=void 0,a.preTouchTime=void 0,a.delayTimer=void 0,a.hasPopupMouseDown=void 0,a.onMouseEnter=function(l){var c=a.props.mouseEnterDelay;a.fireEvents("onMouseEnter",l),a.delaySetPopupVisible(!0,c,c?null:l)},a.onMouseMove=function(l){a.fireEvents("onMouseMove",l),a.setPoint(l)},a.onMouseLeave=function(l){a.fireEvents("onMouseLeave",l),a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)},a.onPopupMouseEnter=function(){a.clearDelayTimer()},a.onPopupMouseLeave=function(l){var c;l.relatedTarget&&!l.relatedTarget.setTimeout&&Di((c=a.popupRef.current)===null||c===void 0?void 0:c.getElement(),l.relatedTarget)||a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)},a.onFocus=function(l){a.fireEvents("onFocus",l),a.clearDelayTimer(),a.isFocusToShow()&&(a.focusTime=Date.now(),a.delaySetPopupVisible(!0,a.props.focusDelay))},a.onMouseDown=function(l){a.fireEvents("onMouseDown",l),a.preClickTime=Date.now()},a.onTouchStart=function(l){a.fireEvents("onTouchStart",l),a.preTouchTime=Date.now()},a.onBlur=function(l){a.fireEvents("onBlur",l),a.clearDelayTimer(),a.isBlurToHide()&&a.delaySetPopupVisible(!1,a.props.blurDelay)},a.onContextMenu=function(l){l.preventDefault(),a.fireEvents("onContextMenu",l),a.setPopupVisible(!0,l)},a.onContextMenuClose=function(){a.isContextMenuToShow()&&a.close()},a.onClick=function(l){if(a.fireEvents("onClick",l),a.focusTime){var c;if(a.preClickTime&&a.preTouchTime?c=Math.min(a.preClickTime,a.preTouchTime):a.preClickTime?c=a.preClickTime:a.preTouchTime&&(c=a.preTouchTime),Math.abs(c-a.focusTime)<20)return;a.focusTime=0}a.preClickTime=0,a.preTouchTime=0,a.isClickToShow()&&(a.isClickToHide()||a.isBlurToHide())&&l&&l.preventDefault&&l.preventDefault();var d=!a.state.popupVisible;(a.isClickToHide()&&!d||d&&a.isClickToShow())&&a.setPopupVisible(!a.state.popupVisible,l)},a.onPopupMouseDown=function(){if(a.hasPopupMouseDown=!0,clearTimeout(a.mouseDownTimeout),a.mouseDownTimeout=window.setTimeout(function(){a.hasPopupMouseDown=!1},0),a.context){var l;(l=a.context).onPopupMouseDown.apply(l,arguments)}},a.onDocumentClick=function(l){if(!(a.props.mask&&!a.props.maskClosable)){var c=l.target,d=a.getRootDomNode(),f=a.getPopupDomNode();(!Di(d,c)||a.isContextMenuOnly())&&!Di(f,c)&&!a.hasPopupMouseDown&&a.close()}},a.getRootDomNode=function(){var l=a.props.getTriggerDOMNode;if(l)return l(a.triggerRef.current);try{var c=Ao(a.triggerRef.current);if(c)return c}catch(d){}return On.findDOMNode(Ae(a))},a.getPopupClassNameFromAlign=function(l){var c=[],d=a.props,f=d.popupPlacement,h=d.builtinPlacements,v=d.prefixCls,m=d.alignPoint,b=d.getPopupClassNameFromAlign;return f&&h&&c.push(Hv(h,v,l,m)),b&&c.push(b(l)),c.join(" ")},a.getComponent=function(){var l=a.props,c=l.prefixCls,d=l.destroyPopupOnHide,f=l.popupClassName,h=l.onPopupAlign,v=l.popupMotion,m=l.popupAnimation,b=l.popupTransitionName,g=l.popupStyle,w=l.mask,D=l.maskAnimation,E=l.maskTransitionName,y=l.maskMotion,S=l.zIndex,x=l.popup,I=l.stretch,_=l.alignPoint,F=l.mobile,R=l.forceRender,P=a.state,O=P.popupVisible,j=P.point,N=a.getPopupAlign(),k={};return a.isMouseEnterToShow()&&(k.onMouseEnter=a.onPopupMouseEnter),a.isMouseLeaveToHide()&&(k.onMouseLeave=a.onPopupMouseLeave),k.onMouseDown=a.onPopupMouseDown,k.onTouchStart=a.onPopupMouseDown,u.exports.createElement(zc,ne({prefixCls:c,destroyPopupOnHide:d,visible:O,point:_&&j,className:f,align:N,onAlign:h,animation:m,getClassNameFromAlign:a.getPopupClassNameFromAlign},k,{stretch:I,getRootDomNode:a.getRootDomNode,style:g,mask:w,zIndex:S,transitionName:b,maskAnimation:D,maskTransitionName:E,maskMotion:y,ref:a.popupRef,motion:v,mobile:F,forceRender:R}),typeof x=="function"?x():x)},a.attachParent=function(l){Ce.cancel(a.attachId);var c=a.props,d=c.getPopupContainer,f=c.getDocument,h=a.getRootDomNode(),v;d?(h||d.length===0)&&(v=d(h)):v=f(a.getRootDomNode()).body,v?v.appendChild(l):a.attachId=Ce(function(){a.attachParent(l)})},a.getContainer=function(){var l=a.props.getDocument,c=l(a.getRootDomNode()).createElement("div");return c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.width="100%",a.attachParent(c),c},a.setPoint=function(l){var c=a.props.alignPoint;!c||!l||a.setState({point:{pageX:l.pageX,pageY:l.pageY}})},a.handlePortalUpdate=function(){a.state.prevPopupVisible!==a.state.popupVisible&&a.props.afterPopupVisibleChange(a.state.popupVisible)},a.triggerContextValue={onPopupMouseDown:a.onPopupMouseDown};var s;return"popupVisible"in o?s=!!o.popupVisible:s=!!o.defaultPopupVisible,a.state={prevPopupVisible:s,popupVisible:s},Wm.forEach(function(l){a["fire".concat(l)]=function(c){a.fireEvents(l,c)}}),a}return jt(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var a=this.props,s=this.state;if(s.popupVisible){var l;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(l=a.getDocument(this.getRootDomNode()),this.clickOutsideHandler=dr(l,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(l=l||a.getDocument(this.getRootDomNode()),this.touchOutsideHandler=dr(l,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(l=l||a.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=dr(l,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=dr(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Ce.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var a;return((a=this.popupRef.current)===null||a===void 0?void 0:a.getElement())||null}},{key:"getPopupAlign",value:function(){var a=this.props,s=a.popupPlacement,l=a.popupAlign,c=a.builtinPlacements;return s&&c?Wv(c,s,l):l}},{key:"setPopupVisible",value:function(a,s){var l=this.props.alignPoint,c=this.state.popupVisible;this.clearDelayTimer(),c!==a&&("popupVisible"in this.props||this.setState({popupVisible:a,prevPopupVisible:c}),this.props.onPopupVisibleChange(a)),l&&s&&a&&this.setPoint(s)}},{key:"delaySetPopupVisible",value:function(a,s,l){var c=this,d=s*1e3;if(this.clearDelayTimer(),d){var f=l?{pageX:l.pageX,pageY:l.pageY}:null;this.delayTimer=window.setTimeout(function(){c.setPopupVisible(a,f),c.clearDelayTimer()},d)}else this.setPopupVisible(a,l)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(a){var s=this.props.children.props,l=this.props;return s[a]&&l[a]?this["fire".concat(a)]:s[a]||l[a]}},{key:"isClickToShow",value:function(){var a=this.props,s=a.action,l=a.showAction;return s.indexOf("click")!==-1||l.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var a=this.props.action;return a==="contextMenu"||a.length===1&&a[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var a=this.props,s=a.action,l=a.showAction;return s.indexOf("contextMenu")!==-1||l.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var a=this.props,s=a.action,l=a.hideAction;return s.indexOf("click")!==-1||l.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var a=this.props,s=a.action,l=a.showAction;return s.indexOf("hover")!==-1||l.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var a=this.props,s=a.action,l=a.hideAction;return s.indexOf("hover")!==-1||l.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var a=this.props,s=a.action,l=a.showAction;return s.indexOf("focus")!==-1||l.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var a=this.props,s=a.action,l=a.hideAction;return s.indexOf("focus")!==-1||l.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var a;(a=this.popupRef.current)===null||a===void 0||a.forceAlign()}}},{key:"fireEvents",value:function(a,s){var l=this.props.children.props[a];l&&l(s);var c=this.props[a];c&&c(s)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var a=this.state.popupVisible,s=this.props,l=s.children,c=s.forceRender,d=s.alignPoint,f=s.className,h=s.autoDestroy,v=u.exports.Children.only(l),m={key:"trigger"};this.isContextMenuToShow()?m.onContextMenu=this.onContextMenu:m.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(m.onClick=this.onClick,m.onMouseDown=this.onMouseDown,m.onTouchStart=this.onTouchStart):(m.onClick=this.createTwoChains("onClick"),m.onMouseDown=this.createTwoChains("onMouseDown"),m.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(m.onMouseEnter=this.onMouseEnter,d&&(m.onMouseMove=this.onMouseMove)):m.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?m.onMouseLeave=this.onMouseLeave:m.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(m.onFocus=this.onFocus,m.onBlur=this.onBlur):(m.onFocus=this.createTwoChains("onFocus"),m.onBlur=this.createTwoChains("onBlur"));var b=fe(v&&v.props&&v.props.className,f);b&&(m.className=b);var g=$({},m);Cl(v)&&(g.ref=Lo(this.triggerRef,v.ref));var w=u.exports.cloneElement(v,g),D;return(a||this.popupRef.current||c)&&(D=u.exports.createElement(t,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!a&&h&&(D=null),u.exports.createElement(Fc.Provider,{value:this.triggerContextValue},w,D)}}],[{key:"getDerivedStateFromProps",value:function(a,s){var l=a.popupVisible,c={};return l!==void 0&&s.popupVisible!==l&&(c.popupVisible=l,c.prevPopupVisible=s.popupVisible),c}}]),i}(u.exports.Component);return e.contextType=Fc,e.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:Bm,getDocument:jm,onPopupVisibleChange:oa,afterPopupVisibleChange:oa,onPopupAlign:oa,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},e}var aa=Hm(Bv),Qt={adjustX:1,adjustY:1},$m={topLeft:{points:["bl","tl"],overflow:Qt,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Qt,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:Qt,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:Qt,offset:[4,0]}},Km={topLeft:{points:["bl","tl"],overflow:Qt,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Qt,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:Qt,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:Qt,offset:[4,0]}};function Bc(t,e,n){if(e)return e;if(n)return n[t]||n.other}var Vm={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Um(t){var e=t.prefixCls,n=t.visible,r=t.children,i=t.popup,o=t.popupClassName,a=t.popupOffset,s=t.disabled,l=t.mode,c=t.onVisibleChange,d=u.exports.useContext(gt),f=d.getPopupContainer,h=d.rtl,v=d.subMenuOpenDelay,m=d.subMenuCloseDelay,b=d.builtinPlacements,g=d.triggerSubMenuAction,w=d.forceSubMenuRender,D=d.motion,E=d.defaultMotions,y=u.exports.useState(!1),S=U(y,2),x=S[0],I=S[1],_=h?$($({},Km),b):$($({},$m),b),F=Vm[l],R=Bc(l,D,E),P=$($({},R),{},{leavedClassName:"".concat(e,"-hidden"),removeOnLeave:!1,motionAppear:!0}),O=u.exports.useRef();return u.exports.useEffect(function(){return O.current=Ce(function(){I(n)}),function(){Ce.cancel(O.current)}},[n]),u.exports.createElement(aa,{prefixCls:e,popupClassName:fe("".concat(e,"-popup"),G({},"".concat(e,"-rtl"),h),o),stretch:l==="horizontal"?"minWidth":null,getPopupContainer:f,builtinPlacements:_,popupPlacement:F,popupVisible:x,popup:i,popupAlign:a&&{offset:a},action:s?[]:[g],mouseEnterDelay:v,mouseLeaveDelay:m,onPopupVisibleChange:c,forceRender:w,popupMotion:P},r)}function Gm(t){var e=t.id,n=t.open,r=t.keyPath,i=t.children,o="inline",a=u.exports.useContext(gt),s=a.prefixCls,l=a.forceSubMenuRender,c=a.motion,d=a.defaultMotions,f=a.mode,h=u.exports.useRef(!1);h.current=f===o;var v=u.exports.useState(!h.current),m=U(v,2),b=m[0],g=m[1],w=h.current?n:!1;u.exports.useEffect(function(){h.current&&g(!1)},[f]);var D=$({},Bc(o,c,d));r.length>1&&(D.motionAppear=!1);var E=D.onVisibleChanged;return D.onVisibleChanged=function(y){return!h.current&&!y&&g(!0),E==null?void 0:E(y)},b?null:u.exports.createElement(wr,{mode:o,locked:!h.current},u.exports.createElement(Sr,ne({visible:w},D,{forceRender:l,removeOnLeave:!1,leavedClassName:"".concat(s,"-hidden")}),function(y){var S=y.className,x=y.style;return u.exports.createElement(Wo,{id:e,className:S,style:x},i)}))}var qm=function(e){var n,r=e.style,i=e.className,o=e.title,a=e.eventKey;e.warnKey;var s=e.disabled,l=e.internalPopupClose,c=e.children,d=e.itemIcon,f=e.expandIcon,h=e.popupClassName,v=e.popupOffset,m=e.onClick,b=e.onMouseEnter,g=e.onMouseLeave,w=e.onTitleClick,D=e.onTitleMouseEnter,E=e.onTitleMouseLeave,y=Oe(e,["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"]),S=$l(a),x=u.exports.useContext(gt),I=x.prefixCls,_=x.mode,F=x.openKeys,R=x.disabled,P=x.overflowDisabled,O=x.activeKey,j=x.selectedKeys,N=x.itemIcon,k=x.expandIcon,V=x.onItemClick,T=x.onOpenChange,C=x.onActive,M=u.exports.useContext(jl),A=M.isSubPathKey,W=xr(),L="".concat(I,"-submenu"),K=R||s,Z=u.exports.useRef(),z=u.exports.useRef(),q=d||N,J=f||k,le=F.includes(a),ve=!P&&le,me=A(j,a),be=Al(a,K,D,E),ze=be.active,Fe=Oe(be,["active"]),tt=u.exports.useState(!1),Ne=U(tt,2),ue=Ne[0],je=Ne[1],se=function(Re){K||je(Re)},ce=function(Re){se(!0),b==null||b({key:a,domEvent:Re})},Se=function(Re){se(!1),g==null||g({key:a,domEvent:Re})},Yt=u.exports.useMemo(function(){return ze||(_!=="inline"?ue||A([O],a):!1)},[_,ze,O,ue,a,A]),Lt=zl(W.length),$e=function(Re){K||(w==null||w({key:a,domEvent:Re}),_==="inline"&&T(a,!le))},Xt=zn(function(nt){m==null||m(Si(nt)),V(nt)}),Ye=function(Re){_!=="inline"&&T(a,Re)},We=function(){C(a)},zt=S&&"".concat(S,"-popup"),Xe=u.exports.createElement("div",ne({role:"menuitem",style:Lt,className:"".concat(L,"-title"),tabIndex:K?null:-1,ref:Z,title:typeof o=="string"?o:null,"data-menu-id":P&&S?null:S,"aria-expanded":ve,"aria-haspopup":!0,"aria-controls":zt,"aria-disabled":K,onClick:$e,onFocus:We},Fe),o,u.exports.createElement(Ll,{icon:_!=="horizontal"?J:null,props:$($({},e),{},{isOpen:ve,isSubMenu:!0})},u.exports.createElement("i",{className:"".concat(L,"-arrow")}))),ht=u.exports.useRef(_);if(_!=="inline"&&(ht.current=W.length>1?"vertical":_),!P){var Ke=ht.current;Xe=u.exports.createElement(Um,{mode:Ke,prefixCls:L,visible:!l&&ve&&_!=="inline",popupClassName:h,popupOffset:v,popup:u.exports.createElement(wr,{mode:Ke==="horizontal"?"vertical":Ke},u.exports.createElement(Wo,{id:zt,ref:z},c)),disabled:K,onVisibleChange:Ye},Xe)}return u.exports.createElement(wr,{onItemClick:Xt,mode:_==="horizontal"?"vertical":_,itemIcon:q,expandIcon:J},u.exports.createElement(Kt.Item,ne({role:"none"},y,{component:"li",style:r,className:fe(L,"".concat(L,"-").concat(_),i,(n={},G(n,"".concat(L,"-open"),ve),G(n,"".concat(L,"-active"),Yt),G(n,"".concat(L,"-selected"),me),G(n,"".concat(L,"-disabled"),K),n)),onMouseEnter:ce,onMouseLeave:Se}),Xe,!P&&u.exports.createElement(Gm,{id:zt,open:ve,keyPath:W},c)))};function jc(t){var e=t.eventKey,n=t.children,r=xr(e),i=jo(n,r),o=Ei();u.exports.useEffect(function(){if(o)return o.registerPath(e,r),function(){o.unregisterPath(e,r)}},[r]);var a;return o?a=i:a=u.exports.createElement(qm,t,i),u.exports.createElement(Bl.Provider,{value:r},a)}function Wc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(ic(t)){var n=t.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||t.isContentEditable||n==="a"&&!!t.getAttribute("href"),i=t.getAttribute("tabindex"),o=Number(i),a=null;return i&&!Number.isNaN(o)?a=o:r&&a===null&&(a=0),r&&t.disabled&&(a=null),a!==null&&(a>=0||e&&a<0)}return!1}function Ym(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=mt(t.querySelectorAll("*")).filter(function(r){return Wc(r,e)});return Wc(t,e)&&n.unshift(t),n}var sa=we.LEFT,la=we.RIGHT,ca=we.UP,Ai=we.DOWN,Li=we.ENTER,Hc=we.ESC,$c=[ca,Ai,sa,la];function Xm(t,e,n,r){var i,o,a,s,l="prev",c="next",d="children",f="parent";if(t==="inline"&&r===Li)return{inlineTrigger:!0};var h=(i={},G(i,ca,l),G(i,Ai,c),i),v=(o={},G(o,sa,n?c:l),G(o,la,n?l:c),G(o,Ai,d),G(o,Li,d),o),m=(a={},G(a,ca,l),G(a,Ai,c),G(a,Li,d),G(a,Hc,f),G(a,sa,n?d:f),G(a,la,n?f:d),a),b={inline:h,horizontal:v,vertical:m,inlineSub:h,horizontalSub:m,verticalSub:m},g=(s=b["".concat(t).concat(e?"":"Sub")])===null||s===void 0?void 0:s[r];switch(g){case l:return{offset:-1,sibling:!0};case c:return{offset:1,sibling:!0};case f:return{offset:-1,sibling:!1};case d:return{offset:1,sibling:!1};default:return null}}function Jm(t){for(var e=t;e;){if(e.getAttribute("data-menu-list"))return e;e=e.parentElement}return null}function Zm(t,e){for(var n=t||document.activeElement;n;){if(e.has(n))return n;n=n.parentElement}return null}function Qm(t,e){var n=Ym(t,!0);return n.filter(function(r){return e.has(r)})}function Kc(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!t)return null;var i=Qm(t,e),o=i.length,a=i.findIndex(function(s){return n===s});return r<0?a===-1?a=o-1:a-=1:r>0&&(a+=1),a=(a+o)%o,i[a]}function eg(t,e,n,r,i,o,a,s,l,c){var d=u.exports.useRef(),f=u.exports.useRef();f.current=e;var h=function(){Ce.cancel(d.current)};return u.exports.useEffect(function(){return function(){h()}},[]),function(v){var m=v.which;if([].concat($c,[Li,Hc]).includes(m)){var b,g,w,D=function(){b=new Set,g=new Map,w=new Map;var N=o();return N.forEach(function(k){var V=document.querySelector("[data-menu-id='".concat(Hl(r,k),"']"));V&&(b.add(V),w.set(V,k),g.set(k,V))}),b};D();var E=g.get(e),y=Zm(E,b),S=w.get(y),x=Xm(t,a(S,!0).length===1,n,m);if(!x)return;$c.includes(m)&&v.preventDefault();var I=function(N){if(N){var k=N,V=N.querySelector("a");(V==null?void 0:V.getAttribute("href"))&&(k=V);var T=w.get(N);s(T),h(),d.current=Ce(function(){f.current===T&&k.focus()})}};if(x.sibling||!y){var _;!y||t==="inline"?_=i.current:_=Jm(y);var F=Kc(_,b,y,x.offset);I(F)}else if(x.inlineTrigger)l(S);else if(x.offset>0)l(S,!0),h(),d.current=Ce(function(){D();var j=y.getAttribute("aria-controls"),N=document.getElementById(j),k=Kc(N,b);I(k)},5);else if(x.offset<0){var R=a(S,!0),P=R[R.length-2],O=g.get(P);l(P,!1),I(O)}}c==null||c(v)}}var tg=Math.random().toFixed(5).toString().slice(2),Vc=0;function ng(t){var e=Nn(t,{value:t}),n=U(e,2),r=n[0],i=n[1];return u.exports.useEffect(function(){Vc+=1;var o="".concat(tg,"-").concat(Vc);i("rc-menu-uuid-".concat(o))},[]),r}function rg(t){Promise.resolve().then(t)}var ua="__RC_UTIL_PATH_SPLIT__",Uc=function(e){return e.join(ua)},ig=function(e){return e.split(ua)},da="rc-menu-more";function og(){var t=u.exports.useState({}),e=U(t,2),n=e[1],r=u.exports.useRef(new Map),i=u.exports.useRef(new Map),o=u.exports.useState([]),a=U(o,2),s=a[0],l=a[1],c=u.exports.useRef(0),d=u.exports.useRef(!1),f=function(){d.current||n({})},h=u.exports.useCallback(function(E,y){var S=Uc(y);i.current.set(S,E),r.current.set(E,S),c.current+=1;var x=c.current;rg(function(){x===c.current&&f()})},[]),v=u.exports.useCallback(function(E,y){var S=Uc(y);i.current.delete(S),r.current.delete(E)},[]),m=u.exports.useCallback(function(E){l(E)},[]),b=u.exports.useCallback(function(E,y){var S=r.current.get(E)||"",x=ig(S);return y&&s.includes(x[0])&&x.unshift(da),x},[s]),g=u.exports.useCallback(function(E,y){return E.some(function(S){var x=b(S,!0);return x.includes(y)})},[b]),w=function(){var y=mt(r.current.keys());return s.length&&y.push(da),y},D=u.exports.useCallback(function(E){var y="".concat(r.current.get(E)).concat(ua),S=new Set;return mt(i.current.keys()).forEach(function(x){x.startsWith(y)&&S.add(i.current.get(x))}),S},[]);return u.exports.useEffect(function(){return function(){d.current=!0}},[]),{registerPath:h,unregisterPath:v,refreshOverflowKeys:m,isSubPathKey:g,getKeyPath:b,getKeys:w,getSubPathKeys:D}}var Wn=[],ag=function(e){var n,r,i=e.prefixCls,o=i===void 0?"rc-menu":i,a=e.style,s=e.className,l=e.tabIndex,c=l===void 0?0:l,d=e.children,f=e.direction,h=e.id,v=e.mode,m=v===void 0?"vertical":v,b=e.inlineCollapsed,g=e.disabled,w=e.disabledOverflow,D=e.subMenuOpenDelay,E=D===void 0?.1:D,y=e.subMenuCloseDelay,S=y===void 0?.1:y,x=e.forceSubMenuRender,I=e.defaultOpenKeys,_=e.openKeys,F=e.activeKey,R=e.defaultActiveFirst,P=e.selectable,O=P===void 0?!0:P,j=e.multiple,N=j===void 0?!1:j,k=e.defaultSelectedKeys,V=e.selectedKeys,T=e.onSelect,C=e.onDeselect,M=e.inlineIndent,A=M===void 0?24:M,W=e.motion,L=e.defaultMotions,K=e.triggerSubMenuAction,Z=K===void 0?"hover":K,z=e.builtinPlacements,q=e.itemIcon,J=e.expandIcon,le=e.overflowedIndicator,ve=le===void 0?"...":le,me=e.overflowedIndicatorPopupClassName,be=e.getPopupContainer,ze=e.onClick,Fe=e.onOpenChange,tt=e.onKeyDown;e.openAnimation,e.openTransitionName;var Ne=Oe(e,["prefixCls","style","className","tabIndex","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName"]),ue=jo(d,Wn),je=u.exports.useState(!1),se=U(je,2),ce=se[0],Se=se[1],Yt=u.exports.useRef(),Lt=ng(h),$e=f==="rtl",Xt=u.exports.useMemo(function(){return(m==="inline"||m==="vertical")&&b?["vertical",b]:[m,!1]},[m,b]),Ye=U(Xt,2),We=Ye[0],zt=Ye[1],Xe=u.exports.useState(0),ht=U(Xe,2),Ke=ht[0],nt=ht[1],Re=Ke>=ue.length-1||We!=="horizontal"||w,er=Nn(I,{value:_,postState:function(X){return X||Wn}}),Jt=U(er,2),at=Jt[0],Sn=Jt[1],st=function(X){Sn(X),Fe==null||Fe(X)},an=u.exports.useState(at),vt=U(an,2),it=vt[0],sn=vt[1],Dt=We==="inline",ln=u.exports.useRef(!1);u.exports.useEffect(function(){Dt&&sn(at)},[at]),u.exports.useEffect(function(){if(!ln.current){ln.current=!0;return}Dt?Sn(it):st(Wn)},[Dt]);var rt=og(),Mt=rt.registerPath,ae=rt.unregisterPath,he=rt.refreshOverflowKeys,Ee=rt.isSubPathKey,Je=rt.getKeyPath,cn=rt.getKeys,Ur=rt.getSubPathKeys,ao=u.exports.useMemo(function(){return{registerPath:Mt,unregisterPath:ae}},[Mt,ae]),so=u.exports.useMemo(function(){return{isSubPathKey:Ee}},[Ee]);u.exports.useEffect(function(){he(Re?Wn:ue.slice(Ke+1).map(function(xe){return xe.key}))},[Ke,Re]);var En=Nn(F||R&&((n=ue[0])===null||n===void 0?void 0:n.key),{value:F}),tr=U(En,2),Dn=tr[0],nr=tr[1],lo=zn(function(xe){nr(xe)}),Gr=zn(function(){nr(void 0)}),co=Nn(k||[],{value:V,postState:function(X){return Array.isArray(X)?X:X==null?Wn:[X]}}),rr=U(co,2),Mn=rr[0],uo=rr[1],Ot=function(X){if(O){var te=X.key,ge=Mn.includes(te),Me;N?ge?Me=Mn.filter(function(dn){return dn!==te}):Me=[].concat(mt(Mn),[te]):Me=[te],uo(Me);var Tt=$($({},X),{},{selectedKeys:Me});ge?C==null||C(Tt):T==null||T(Tt)}!N&&at.length&&We!=="inline"&&st(Wn)},qr=zn(function(xe){ze==null||ze(Si(xe)),Ot(xe)}),ir=zn(function(xe,X){var te=at.filter(function(Me){return Me!==xe});if(X)te.push(xe);else if(We!=="inline"){var ge=Ur(xe);te=te.filter(function(Me){return!ge.has(Me)})}cr(at,te)||st(te)}),Yr=zn(be),un=function(X,te){var ge=te??!at.includes(X);ir(X,ge)},or=eg(We,Dn,$e,Lt,Yt,cn,Je,nr,un,tt);u.exports.useEffect(function(){Se(!0)},[]);var ar=We!=="horizontal"||w?ue:ue.map(function(xe,X){return u.exports.createElement(wr,{key:xe.key,overflowDisabled:X>Ke},xe)}),Xr=u.exports.createElement(Kt,ne({id:h,ref:Yt,prefixCls:"".concat(o,"-overflow"),component:"ul",itemComponent:Bo,className:fe(o,"".concat(o,"-root"),"".concat(o,"-").concat(We),s,(r={},G(r,"".concat(o,"-inline-collapsed"),zt),G(r,"".concat(o,"-rtl"),$e),r)),dir:f,style:a,role:"menu",tabIndex:c,data:ar,renderRawItem:function(X){return X},renderRawRest:function(X){var te=X.length,ge=te?ue.slice(-te):null;return u.exports.createElement(jc,{eventKey:da,title:ve,disabled:Re,internalPopupClose:te===0,popupClassName:me},ge)},maxCount:We!=="horizontal"||w?Kt.INVALIDATE:Kt.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(X){nt(X)},onKeyDown:or},Ne));return u.exports.createElement(Wl.Provider,{value:Lt},u.exports.createElement(wr,{prefixCls:o,mode:We,openKeys:at,rtl:$e,disabled:g,motion:ce?W:null,defaultMotions:ce?L:null,activeKey:Dn,onActive:lo,onInactive:Gr,selectedKeys:Mn,inlineIndent:A,subMenuOpenDelay:E,subMenuCloseDelay:S,forceSubMenuRender:x,builtinPlacements:z,triggerSubMenuAction:Z,getPopupContainer:Yr,itemIcon:q,expandIcon:J,onItemClick:qr,onOpenChange:ir},u.exports.createElement(jl.Provider,{value:so},Xr),u.exports.createElement("div",{style:{display:"none"},"aria-hidden":!0},u.exports.createElement(Fl.Provider,{value:ao},ue))))},sg=function(e){var n=e.className,r=e.title;e.eventKey;var i=e.children,o=Oe(e,["className","title","eventKey","children"]),a=u.exports.useContext(gt),s=a.prefixCls,l="".concat(s,"-item-group");return u.exports.createElement("li",ne({},o,{onClick:function(d){return d.stopPropagation()},className:fe(l,n)}),u.exports.createElement("div",{className:"".concat(l,"-title"),title:typeof r=="string"?r:void 0},r),u.exports.createElement("ul",{className:"".concat(l,"-list")},i))};function lg(t){var e=t.children,n=Oe(t,["children"]),r=xr(n.eventKey),i=jo(e,r),o=Ei();return o?i:u.exports.createElement(sg,Ci(n,["warnKey"]),i)}function cg(t){var e=t.className,n=t.style,r=u.exports.useContext(gt),i=r.prefixCls,o=Ei();return o?null:u.exports.createElement("li",{className:fe("".concat(i,"-item-divider"),e),style:n})}var Tr=ag;Tr.Item=Bo;Tr.SubMenu=jc;Tr.ItemGroup=lg;Tr.Divider=cg;var Hn={adjustX:1,adjustY:1},$n=[0,0],ug={topLeft:{points:["bl","tl"],overflow:Hn,offset:[0,-4],targetOffset:$n},topCenter:{points:["bc","tc"],overflow:Hn,offset:[0,-4],targetOffset:$n},topRight:{points:["br","tr"],overflow:Hn,offset:[0,-4],targetOffset:$n},bottomLeft:{points:["tl","bl"],overflow:Hn,offset:[0,4],targetOffset:$n},bottomCenter:{points:["tc","bc"],overflow:Hn,offset:[0,4],targetOffset:$n},bottomRight:{points:["tr","br"],overflow:Hn,offset:[0,4],targetOffset:$n}};function dg(t,e){var n=t.arrow,r=n===void 0?!1:n,i=t.prefixCls,o=i===void 0?"rc-dropdown":i,a=t.transitionName,s=t.animation,l=t.align,c=t.placement,d=c===void 0?"bottomLeft":c,f=t.placements,h=f===void 0?ug:f,v=t.getPopupContainer,m=t.showAction,b=t.hideAction,g=t.overlayClassName,w=t.overlayStyle,D=t.visible,E=t.trigger,y=E===void 0?["hover"]:E,S=Oe(t,["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger"]),x=u.exports.useState(),I=U(x,2),_=I[0],F=I[1],R="visible"in t?D:_,P=u.exports.useRef(null);u.exports.useImperativeHandle(e,function(){return P.current});var O=function(){var L=t.overlay,K;return typeof L=="function"?K=L():K=L,K},j=function(L){var K=t.onOverlayClick,Z=O().props;F(!1),K&&K(L),Z.onClick&&Z.onClick(L)},N=function(L){var K=t.onVisibleChange;F(L),typeof K=="function"&&K(L)},k=function(){var L=O(),K={prefixCls:"".concat(o,"-menu"),onClick:j};return typeof L.type=="string"&&delete K.prefixCls,u.exports.createElement(u.exports.Fragment,null,r&&u.exports.createElement("div",{className:"".concat(o,"-arrow")}),u.exports.cloneElement(L,K))},V=function(){var L=t.overlay;return typeof L=="function"?k:k()},T=function(){var L=t.minOverlayWidthMatchTrigger,K=t.alignPoint;return"minOverlayWidthMatchTrigger"in t?L:!K},C=function(){var L=t.openClassName;return L!==void 0?L:"".concat(o,"-open")},M=function(){var L=t.children,K=L.props?L.props:{},Z=fe(K.className,C());return _&&L?u.exports.cloneElement(L,{className:Z}):L},A=b;return!A&&y.indexOf("contextMenu")!==-1&&(A=["click"]),u.exports.createElement(aa,Object.assign({},S,{prefixCls:o,ref:P,popupClassName:fe(g,G({},"".concat(o,"-show-arrow"),r)),popupStyle:w,builtinPlacements:h,action:y,showAction:m,hideAction:A||[],popupPlacement:d,popupAlign:l,popupTransitionName:a,popupAnimation:s,popupVisible:R,stretch:T()?"minWidth":"",popup:V(),onPopupVisibleChange:N,getPopupContainer:v}),M())}var Gc=u.exports.forwardRef(dg);function fg(t,e){var n=t.prefixCls,r=t.editable,i=t.locale,o=t.style;return!r||r.showAdd===!1?null:u.exports.createElement("button",{ref:e,type:"button",className:"".concat(n,"-nav-add"),style:o,"aria-label":(i==null?void 0:i.addAriaLabel)||"Add tab",onClick:function(s){r.onEdit("add",{event:s})}},r.addIcon||"+")}var qc=u.exports.forwardRef(fg);function pg(t,e){var n=t.prefixCls,r=t.id,i=t.tabs,o=t.locale,a=t.mobile,s=t.moreIcon,l=s===void 0?"More":s,c=t.moreTransitionName,d=t.style,f=t.className,h=t.editable,v=t.tabBarGutter,m=t.rtl,b=t.onTabClick,g=u.exports.useState(!1),w=U(g,2),D=w[0],E=w[1],y=u.exports.useState(null),S=U(y,2),x=S[0],I=S[1],_="".concat(r,"-more-popup"),F="".concat(n,"-dropdown"),R=x!==null?"".concat(_,"-").concat(x):null,P=o==null?void 0:o.dropdownAriaLabel,O=u.exports.createElement(Tr,{onClick:function(M){var A=M.key,W=M.domEvent;b(A,W),E(!1)},id:_,tabIndex:-1,role:"listbox","aria-activedescendant":R,selectedKeys:[x],"aria-label":P!==void 0?P:"expanded dropdown"},i.map(function(C){return u.exports.createElement(Bo,{key:C.key,id:"".concat(_,"-").concat(C.key),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(C.key),disabled:C.disabled},C.tab)}));function j(C){for(var M=i.filter(function(Z){return!Z.disabled}),A=M.findIndex(function(Z){return Z.key===x})||0,W=M.length,L=0;L<W;L+=1){A=(A+C+W)%W;var K=M[A];if(!K.disabled){I(K.key);return}}}function N(C){var M=C.which;if(!D){[we.DOWN,we.SPACE,we.ENTER].includes(M)&&(E(!0),C.preventDefault());return}switch(M){case we.UP:j(-1),C.preventDefault();break;case we.DOWN:j(1),C.preventDefault();break;case we.ESC:E(!1);break;case we.SPACE:case we.ENTER:x!==null&&b(x,C);break}}u.exports.useEffect(function(){var C=document.getElementById(R);C&&C.scrollIntoView&&C.scrollIntoView(!1)},[x]),u.exports.useEffect(function(){D||I(null)},[D]);var k=G({},m?"marginRight":"marginLeft",v);i.length||(k.visibility="hidden",k.order=1);var V=fe(G({},"".concat(F,"-rtl"),m)),T=a?null:u.exports.createElement(Gc,{prefixCls:F,overlay:O,trigger:["hover"],visible:D,transitionName:c,onVisibleChange:E,overlayClassName:V,mouseEnterDelay:.1,mouseLeaveDelay:.1},u.exports.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:k,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":_,id:"".concat(r,"-more"),"aria-expanded":D,onKeyDown:N},l));return u.exports.createElement("div",{className:fe("".concat(n,"-nav-operations"),f),style:d,ref:e},T,u.exports.createElement(qc,{prefixCls:n,locale:o,editable:h}))}var hg=u.exports.forwardRef(pg),fa=u.exports.createContext(null),vg=.1,Yc=.01,zi=20,Xc=Math.pow(.995,zi);function mg(t,e){var n=u.exports.useState(),r=U(n,2),i=r[0],o=r[1],a=u.exports.useState(0),s=U(a,2),l=s[0],c=s[1],d=u.exports.useState(0),f=U(d,2),h=f[0],v=f[1],m=u.exports.useState(),b=U(m,2),g=b[0],w=b[1],D=u.exports.useRef();function E(F){var R=F.touches[0],P=R.screenX,O=R.screenY;o({x:P,y:O}),window.clearInterval(D.current)}function y(F){if(!!i){F.preventDefault();var R=F.touches[0],P=R.screenX,O=R.screenY;o({x:P,y:O});var j=P-i.x,N=O-i.y;e(j,N);var k=Date.now();c(k),v(k-l),w({x:j,y:N})}}function S(){if(!!i&&(o(null),w(null),g)){var F=g.x/h,R=g.y/h,P=Math.abs(F),O=Math.abs(R);if(Math.max(P,O)<vg)return;var j=F,N=R;D.current=window.setInterval(function(){if(Math.abs(j)<Yc&&Math.abs(N)<Yc){window.clearInterval(D.current);return}j*=Xc,N*=Xc,e(j*zi,N*zi)},zi)}}var x=u.exports.useRef();function I(F){var R=F.deltaX,P=F.deltaY,O=0,j=Math.abs(R),N=Math.abs(P);j===N?O=x.current==="x"?R:P:j>N?(O=R,x.current="x"):(O=P,x.current="y"),e(-O,-O)&&F.preventDefault()}var _=u.exports.useRef(null);_.current={onTouchStart:E,onTouchMove:y,onTouchEnd:S,onWheel:I},u.exports.useEffect(function(){function F(j){_.current.onTouchStart(j)}function R(j){_.current.onTouchMove(j)}function P(j){_.current.onTouchEnd(j)}function O(j){_.current.onWheel(j)}return document.addEventListener("touchmove",R,{passive:!1}),document.addEventListener("touchend",P,{passive:!1}),t.current.addEventListener("touchstart",F,{passive:!1}),t.current.addEventListener("wheel",O),function(){document.removeEventListener("touchmove",R),document.removeEventListener("touchend",P)}},[])}function gg(){var t=u.exports.useRef(new Map);function e(r){return t.current.has(r)||t.current.set(r,u.exports.createRef()),t.current.get(r)}function n(r){t.current.delete(r)}return[e,n]}function Jc(t,e){var n=u.exports.useRef(t),r=u.exports.useState({}),i=U(r,2),o=i[1];function a(s){var l=typeof s=="function"?s(n.current):s;l!==n.current&&e(l,n.current),n.current=l,o({})}return[n.current,a]}var Zc=function(e){var n=e.position,r=e.prefixCls,i=e.extra;if(!i)return null;var o,a={};return i&&Zt(i)==="object"&&!u.exports.isValidElement(i)?a=i:a.right=i,n==="right"&&(o=a.right),n==="left"&&(o=a.left),o?u.exports.createElement("div",{className:"".concat(r,"-extra-content")},o):null};function bg(t,e){var n,r=u.exports.useContext(fa),i=r.prefixCls,o=r.tabs,a=t.className,s=t.style,l=t.id,c=t.animated,d=t.activeKey,f=t.rtl,h=t.extra,v=t.editable,m=t.locale,b=t.tabPosition,g=t.tabBarGutter,w=t.children,D=t.onTabClick,E=t.onTabScroll,y=u.exports.useRef(),S=u.exports.useRef(),x=u.exports.useRef(),I=u.exports.useRef(),_=gg(),F=U(_,2),R=F[0],P=F[1],O=b==="top"||b==="bottom",j=Jc(0,function(X,te){O&&E&&E({direction:X>te?"left":"right"})}),N=U(j,2),k=N[0],V=N[1],T=Jc(0,function(X,te){!O&&E&&E({direction:X>te?"top":"bottom"})}),C=U(T,2),M=C[0],A=C[1],W=u.exports.useState(0),L=U(W,2),K=L[0],Z=L[1],z=u.exports.useState(0),q=U(z,2),J=q[0],le=q[1],ve=u.exports.useState(0),me=U(ve,2),be=me[0],ze=me[1],Fe=u.exports.useState(0),tt=U(Fe,2),Ne=tt[0],ue=tt[1],je=u.exports.useState(null),se=U(je,2),ce=se[0],Se=se[1],Yt=u.exports.useState(null),Lt=U(Yt,2),$e=Lt[0],Xt=Lt[1],Ye=u.exports.useState(0),We=U(Ye,2),zt=We[0],Xe=We[1],ht=u.exports.useState(0),Ke=U(ht,2),nt=Ke[0],Re=Ke[1],er=Sv(new Map),Jt=U(er,2),at=Jt[0],Sn=Jt[1],st=Mv(o,at,K),an="".concat(i,"-nav-operations-hidden"),vt=0,it=0;O?f?(vt=0,it=Math.max(0,K-ce)):(vt=Math.min(0,ce-K),it=0):(vt=Math.min(0,$e-J),it=0);function sn(X){return X<vt?vt:X>it?it:X}var Dt=u.exports.useRef(),ln=u.exports.useState(),rt=U(ln,2),Mt=rt[0],ae=rt[1];function he(){ae(Date.now())}function Ee(){window.clearTimeout(Dt.current)}mg(y,function(X,te){function ge(Me,Tt){Me(function(dn){var sr=sn(dn+Tt);return sr})}if(O){if(ce>=K)return!1;ge(V,X)}else{if($e>=J)return!1;ge(A,te)}return Ee(),he(),!0}),u.exports.useEffect(function(){return Ee(),Mt&&(Dt.current=window.setTimeout(function(){ae(0)},100)),Ee},[Mt]);function Je(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,te=st.get(X)||{width:0,height:0,left:0,right:0,top:0};if(O){var ge=k;f?te.right<k?ge=te.right:te.right+te.width>k+ce&&(ge=te.right+te.width-ce):te.left<-k?ge=-te.left:te.left+te.width>-k+ce&&(ge=-(te.left+te.width-ce)),A(0),V(sn(ge))}else{var Me=M;te.top<-M?Me=-te.top:te.top+te.height>-M+$e&&(Me=-(te.top+te.height-$e)),V(0),A(sn(Me))}}var cn=Ov(st,{width:ce,height:$e,left:k,top:M},{width:be,height:Ne},{width:zt,height:nt},$($({},t),{},{tabs:o})),Ur=U(cn,2),ao=Ur[0],so=Ur[1],En={};b==="top"||b==="bottom"?En[f?"marginRight":"marginLeft"]=g:En.marginTop=g;var tr=o.map(function(X,te){var ge=X.key;return u.exports.createElement(Dv,{id:l,prefixCls:i,key:ge,tab:X,style:te===0?void 0:En,closable:X.closable,editable:v,active:ge===d,renderWrapper:w,removeAriaLabel:m==null?void 0:m.removeAriaLabel,ref:R(ge),onClick:function(Tt){D(ge,Tt)},onRemove:function(){P(ge)},onFocus:function(){Je(ge),he(),!!y.current&&(f||(y.current.scrollLeft=0),y.current.scrollTop=0)}})}),Dn=Pl(function(){var X,te,ge,Me,Tt,dn,sr,fo,po,Kd=((X=y.current)===null||X===void 0?void 0:X.offsetWidth)||0,Vd=((te=y.current)===null||te===void 0?void 0:te.offsetHeight)||0,qa=((ge=I.current)===null||ge===void 0?void 0:ge.offsetWidth)||0,Ya=((Me=I.current)===null||Me===void 0?void 0:Me.offsetHeight)||0,Ud=((Tt=x.current)===null||Tt===void 0?void 0:Tt.offsetWidth)||0,Gd=((dn=x.current)===null||dn===void 0?void 0:dn.offsetHeight)||0;Se(Kd),Xt(Vd),Xe(qa),Re(Ya);var Xa=(((sr=S.current)===null||sr===void 0?void 0:sr.offsetWidth)||0)-qa,Ja=(((fo=S.current)===null||fo===void 0?void 0:fo.offsetHeight)||0)-Ya;Z(Xa),le(Ja);var Za=(po=x.current)===null||po===void 0?void 0:po.className.includes(an);ze(Xa-(Za?0:Ud)),ue(Ja-(Za?0:Gd)),Sn(function(){var Qa=new Map;return o.forEach(function(qd){var es=qd.key,lr=R(es).current;lr&&Qa.set(es,{width:lr.offsetWidth,height:lr.offsetHeight,left:lr.offsetLeft,top:lr.offsetTop})}),Qa})}),nr=o.slice(0,ao),lo=o.slice(so+1),Gr=[].concat(mt(nr),mt(lo)),co=u.exports.useState(),rr=U(co,2),Mn=rr[0],uo=rr[1],Ot=st.get(d),qr=u.exports.useRef();function ir(){Ce.cancel(qr.current)}u.exports.useEffect(function(){var X={};return Ot&&(O?(f?X.right=Ot.right:X.left=Ot.left,X.width=Ot.width):(X.top=Ot.top,X.height=Ot.height)),ir(),qr.current=Ce(function(){uo(X)}),ir},[Ot,O,f]),u.exports.useEffect(function(){Je()},[d,Ot,st,O]),u.exports.useEffect(function(){Dn()},[f,g,d,o.map(function(X){return X.key}).join("_")]);var Yr=!!Gr.length,un="".concat(i,"-nav-wrap"),or,ar,Xr,xe;return O?f?(ar=k>0,or=k+ce<K):(or=k<0,ar=-k+ce<K):(Xr=M<0,xe=-M+$e<J),u.exports.createElement("div",{ref:e,role:"tablist",className:fe("".concat(i,"-nav"),a),style:s,onKeyDown:function(){he()}},u.exports.createElement(Zc,{position:"left",extra:h,prefixCls:i}),u.exports.createElement(br,{onResize:Dn},u.exports.createElement("div",{className:fe(un,(n={},G(n,"".concat(un,"-ping-left"),or),G(n,"".concat(un,"-ping-right"),ar),G(n,"".concat(un,"-ping-top"),Xr),G(n,"".concat(un,"-ping-bottom"),xe),n)),ref:y},u.exports.createElement(br,{onResize:Dn},u.exports.createElement("div",{ref:S,className:"".concat(i,"-nav-list"),style:{transform:"translate(".concat(k,"px, ").concat(M,"px)"),transition:Mt?"none":void 0}},tr,u.exports.createElement(qc,{ref:I,prefixCls:i,locale:m,editable:v,style:$($({},tr.length===0?void 0:En),{},{visibility:Yr?"hidden":null})}),u.exports.createElement("div",{className:fe("".concat(i,"-ink-bar"),G({},"".concat(i,"-ink-bar-animated"),c.inkBar)),style:Mn}))))),u.exports.createElement(hg,ne({},t,{ref:x,prefixCls:i,tabs:Gr,className:!Yr&&an})),u.exports.createElement(Zc,{position:"right",extra:h,prefixCls:i}))}var Qc=u.exports.forwardRef(bg);function yg(t){var e=t.id,n=t.activeKey,r=t.animated,i=t.tabPosition,o=t.rtl,a=t.destroyInactiveTabPane,s=u.exports.useContext(fa),l=s.prefixCls,c=s.tabs,d=r.tabPane,f=c.findIndex(function(h){return h.key===n});return u.exports.createElement("div",{className:fe("".concat(l,"-content-holder"))},u.exports.createElement("div",{className:fe("".concat(l,"-content"),"".concat(l,"-content-").concat(i),G({},"".concat(l,"-content-animated"),d)),style:f&&d?G({},o?"marginRight":"marginLeft","-".concat(f,"00%")):null},c.map(function(h){return u.exports.cloneElement(h.node,{key:h.key,prefixCls:l,tabKey:h.key,id:e,animated:d,active:h.key===n,destroyInactiveTabPane:a})})))}function wg(t){var e=t.prefixCls,n=t.forceRender,r=t.className,i=t.style,o=t.id,a=t.active,s=t.animated,l=t.destroyInactiveTabPane,c=t.tabKey,d=t.children,f=u.exports.useState(n),h=U(f,2),v=h[0],m=h[1];u.exports.useEffect(function(){a?m(!0):l&&m(!1)},[a,l]);var b={};return a||(s?(b.visibility="hidden",b.height=0,b.overflowY="hidden"):b.display="none"),u.exports.createElement("div",{id:o&&"".concat(o,"-panel-").concat(c),role:"tabpanel",tabIndex:a?0:-1,"aria-labelledby":o&&"".concat(o,"-tab-").concat(c),"aria-hidden":!a,style:$($({},b),i),className:fe("".concat(e,"-tabpane"),a&&"".concat(e,"-tabpane-active"),r)},(a||v||n)&&d)}var xg=["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll"],eu=0;function Cg(t){return kn(t).map(function(e){if(u.exports.isValidElement(e)){var n=e.key!==void 0?String(e.key):void 0;return $($({key:n},e.props),{},{node:e})}return null}).filter(function(e){return e})}function Sg(t,e){var n,r=t.id,i=t.prefixCls,o=i===void 0?"rc-tabs":i,a=t.className,s=t.children,l=t.direction,c=t.activeKey,d=t.defaultActiveKey,f=t.editable,h=t.animated,v=h===void 0?{inkBar:!0,tabPane:!1}:h,m=t.tabPosition,b=m===void 0?"top":m,g=t.tabBarGutter,w=t.tabBarStyle,D=t.tabBarExtraContent,E=t.locale,y=t.moreIcon,S=t.moreTransitionName,x=t.destroyInactiveTabPane,I=t.renderTabBar,_=t.onChange,F=t.onTabClick,R=t.onTabScroll,P=Oe(t,xg),O=Cg(s),j=l==="rtl",N;v===!1?N={inkBar:!1,tabPane:!1}:v===!0?N={inkBar:!0,tabPane:!0}:N=$({inkBar:!0,tabPane:!1},Zt(v)==="object"?v:{});var k=u.exports.useState(!1),V=U(k,2),T=V[0],C=V[1];u.exports.useEffect(function(){C(ml())},[]);var M=Nn(function(){var ue;return(ue=O[0])===null||ue===void 0?void 0:ue.key},{value:c,defaultValue:d}),A=U(M,2),W=A[0],L=A[1],K=u.exports.useState(function(){return O.findIndex(function(ue){return ue.key===W})}),Z=U(K,2),z=Z[0],q=Z[1];u.exports.useEffect(function(){var ue=O.findIndex(function(se){return se.key===W});if(ue===-1){var je;ue=Math.max(0,Math.min(z,O.length-1)),L((je=O[ue])===null||je===void 0?void 0:je.key)}q(ue)},[O.map(function(ue){return ue.key}).join("_"),W,z]);var J=Nn(null,{value:r}),le=U(J,2),ve=le[0],me=le[1],be=b;T&&!["left","right"].includes(b)&&(be="top"),u.exports.useEffect(function(){r||(me("rc-tabs-".concat(eu)),eu+=1)},[]);function ze(ue,je){F==null||F(ue,je),L(ue),_==null||_(ue)}var Fe={id:ve,activeKey:W,animated:N,tabPosition:be,rtl:j,mobile:T},tt,Ne=$($({},Fe),{},{editable:f,locale:E,moreIcon:y,moreTransitionName:S,tabBarGutter:g,onTabClick:ze,onTabScroll:R,extra:D,style:w,panes:s});return I?tt=I(Ne,Qc):tt=u.exports.createElement(Qc,Ne),u.exports.createElement(fa.Provider,{value:{tabs:O,prefixCls:o}},u.exports.createElement("div",ne({ref:e,id:r,className:fe(o,"".concat(o,"-").concat(be),(n={},G(n,"".concat(o,"-mobile"),T),G(n,"".concat(o,"-editable"),f),G(n,"".concat(o,"-rtl"),j),n),a)},P),tt,u.exports.createElement(yg,ne({destroyInactiveTabPane:x},Fe,{animated:N}))))}var tu=u.exports.forwardRef(Sg);tu.TabPane=wg;var Eg=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nu=u.exports.createContext(null),Dg=function(t){Eg(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){return u.exports.createElement(nu.Provider,{value:this.props.store},this.props.children)},e}(u.exports.Component),Mg=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vn=function(){return vn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},vn.apply(this,arguments)};function Og(t){return t.displayName||t.name||"Component"}var Tg=function(){return{}};function pa(t,e){e===void 0&&(e={});var n=!!t,r=t||Tg;return function(o){var a=function(l){Mg(c,l);function c(d,f){var h=l.call(this,d,f)||this;return h.unsubscribe=null,h.handleChange=function(){if(!!h.unsubscribe){var v=r(h.store.getState(),h.props);h.setState({subscribed:v})}},h.store=h.context,h.state={subscribed:r(h.store.getState(),d),store:h.store,props:d},h}return c.getDerivedStateFromProps=function(d,f){return t&&t.length===2&&d!==f.props?{subscribed:r(f.store.getState(),d),props:d}:{props:d}},c.prototype.componentDidMount=function(){this.trySubscribe()},c.prototype.componentWillUnmount=function(){this.tryUnsubscribe()},c.prototype.shouldComponentUpdate=function(d,f){return!cr(this.props,d)||!cr(this.state.subscribed,f.subscribed)},c.prototype.trySubscribe=function(){n&&(this.unsubscribe=this.store.subscribe(this.handleChange),this.handleChange())},c.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},c.prototype.render=function(){var d=vn(vn(vn({},this.props),this.state.subscribed),{store:this.store});return u.exports.createElement(o,vn({},d,{ref:this.props.miniStoreForwardedRef}))},c.displayName="Connect("+Og(o)+")",c.contextType=nu,c}(u.exports.Component);if(e.forwardRef){var s=u.exports.forwardRef(function(l,c){return u.exports.createElement(a,vn({},l,{miniStoreForwardedRef:c}))});return ns(s,o)}return ns(a,o)}}var Fi=function(){return Fi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Fi.apply(this,arguments)};function Pg(t){var e=t,n=[];function r(a){e=Fi(Fi({},e),a);for(var s=0;s<n.length;s++)n[s]()}function i(){return e}function o(a){return n.push(a),function(){var l=n.indexOf(a);n.splice(l,1)}}return{setState:r,getState:i,subscribe:o}}function _g(){var t=[].slice.call(arguments,0);return t.length===1?t[0]:function(){for(var n=0;n<t.length;n++)t[n]&&t[n].apply&&t[n].apply(this,arguments)}}var ha=/iPhone/i,ru=/iPod/i,iu=/iPad/i,va=/\bAndroid(?:.+)Mobile\b/i,ou=/Android/i,Kn=/\bAndroid(?:.+)SD4930UR\b/i,Bi=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,Ut=/Windows Phone/i,au=/\bWindows(?:.+)ARM\b/i,su=/BlackBerry/i,lu=/BB10/i,cu=/Opera Mini/i,uu=/\b(CriOS|Chrome)(?:.+)Mobile/i,du=/Mobile(?:.+)Firefox\b/i;function ie(t,e){return t.test(e)}function fu(t){var e=t||(typeof navigator!="undefined"?navigator.userAgent:""),n=(e||"").split("[FBAN");if(typeof n[1]!="undefined"){var r=n,i=U(r,1);e=i[0]}if(n=e.split("Twitter"),typeof n[1]!="undefined"){var o=n,a=U(o,1);e=a[0]}var s={apple:{phone:ie(ha,e)&&!ie(Ut,e),ipod:ie(ru,e),tablet:!ie(ha,e)&&ie(iu,e)&&!ie(Ut,e),device:(ie(ha,e)||ie(ru,e)||ie(iu,e))&&!ie(Ut,e)},amazon:{phone:ie(Kn,e),tablet:!ie(Kn,e)&&ie(Bi,e),device:ie(Kn,e)||ie(Bi,e)},android:{phone:!ie(Ut,e)&&ie(Kn,e)||!ie(Ut,e)&&ie(va,e),tablet:!ie(Ut,e)&&!ie(Kn,e)&&!ie(va,e)&&(ie(Bi,e)||ie(ou,e)),device:!ie(Ut,e)&&(ie(Kn,e)||ie(Bi,e)||ie(va,e)||ie(ou,e))||ie(/\bokhttp\b/i,e)},windows:{phone:ie(Ut,e),tablet:ie(au,e),device:ie(Ut,e)||ie(au,e)},other:{blackberry:ie(su,e),blackberry10:ie(lu,e),opera:ie(cu,e),firefox:ie(du,e),chrome:ie(uu,e),device:ie(su,e)||ie(lu,e)||ie(cu,e)||ie(du,e)||ie(uu,e)},any:null,phone:null,tablet:null};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var Ig=$($({},fu()),{},{isMobile:fu});function Ve(){}function ma(t,e,n){var r=e||"";return t.key||"".concat(r,"item_").concat(n)}function pu(t){return"".concat(t,"-menu-")}function hu(t,e){var n=-1;u.exports.Children.forEach(t,function(r){n+=1,r&&r.type&&r.type.isMenuItemGroup?u.exports.Children.forEach(r.props.children,function(i){n+=1,e(i,n)}):e(r,n)})}function vu(t,e,n){!t||n.find||u.exports.Children.forEach(t,function(r){if(r){var i=r.type;if(!i||!(i.isSubMenu||i.isMenuItem||i.isMenuItemGroup))return;e.indexOf(r.key)!==-1?n.find=!0:r.props.children&&vu(r.props.children,e,n)}})}var ji=["defaultSelectedKeys","selectedKeys","defaultOpenKeys","openKeys","mode","getPopupContainer","onSelect","onDeselect","onDestroy","openTransitionName","openAnimation","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","triggerSubMenuAction","level","selectable","multiple","onOpenChange","visible","focusable","defaultActiveFirst","prefixCls","inlineIndent","parentMenu","title","rootPrefixCls","eventKey","active","onItemHover","onTitleMouseEnter","onTitleMouseLeave","onTitleClick","popupAlign","popupOffset","isOpen","renderMenuItem","manualRef","subMenuKey","disabled","index","isSelected","store","activeKey","builtinPlacements","overflowedIndicator","motion","attribute","value","popupClassName","inlineCollapsed","menu","theme","itemIcon","expandIcon"],ga=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=e&&typeof e.getBoundingClientRect=="function"&&e.getBoundingClientRect().width;if(r){if(n){var i=getComputedStyle(e),o=i.marginLeft,a=i.marginRight;r+=+o.replace("px","")+ +a.replace("px","")}r=+r.toFixed(6)}return r||0},Wi=function(e,n,r){e&&Zt(e.style)==="object"&&(e.style[n]=r)},Rg=function(){return Ig.any},en={adjustX:1,adjustY:1},kg={topLeft:{points:["bl","tl"],overflow:en,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:en,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:en,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:en,offset:[4,0]}},Ng={topLeft:{points:["bl","tl"],overflow:en,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:en,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:en,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:en,offset:[4,0]}},mu=0,Ag={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"},Pr=function(e,n,r){var i=pu(n),o=e.getState();e.setState({defaultActiveFirst:$($({},o.defaultActiveFirst),{},G({},i,r))})},gu=function(t){Ft(n,t);var e=Wt(n);function n(r){var i;Bt(this,n),i=e.call(this,r),i.onDestroy=function(d){i.props.onDestroy(d)},i.onKeyDown=function(d){var f=d.keyCode,h=i.menuInstance,v=i.props.store,m=i.getVisible();if(f===we.ENTER)return i.onTitleClick(d),Pr(v,i.props.eventKey,!0),!0;if(f===we.RIGHT)return m?h.onKeyDown(d):(i.triggerOpenChange(!0),Pr(v,i.props.eventKey,!0)),!0;if(f===we.LEFT){var b;if(m)b=h.onKeyDown(d);else return;return b||(i.triggerOpenChange(!1),b=!0),b}if(m&&(f===we.UP||f===we.DOWN))return h.onKeyDown(d)},i.onOpenChange=function(d){i.props.onOpenChange(d)},i.onPopupVisibleChange=function(d){i.triggerOpenChange(d,d?"mouseenter":"mouseleave")},i.onMouseEnter=function(d){var f=i.props,h=f.eventKey,v=f.onMouseEnter,m=f.store;Pr(m,i.props.eventKey,!1),v({key:h,domEvent:d})},i.onMouseLeave=function(d){var f=i.props,h=f.parentMenu,v=f.eventKey,m=f.onMouseLeave;h.subMenuInstance=Ae(i),m({key:v,domEvent:d})},i.onTitleMouseEnter=function(d){var f=i.props,h=f.eventKey,v=f.onItemHover,m=f.onTitleMouseEnter;v({key:h,hover:!0}),m({key:h,domEvent:d})},i.onTitleMouseLeave=function(d){var f=i.props,h=f.parentMenu,v=f.eventKey,m=f.onItemHover,b=f.onTitleMouseLeave;h.subMenuInstance=Ae(i),m({key:v,hover:!1}),b({key:v,domEvent:d})},i.onTitleClick=function(d){var f=Ae(i),h=f.props;h.onTitleClick({key:h.eventKey,domEvent:d}),h.triggerSubMenuAction!=="hover"&&(i.triggerOpenChange(!i.getVisible(),"click"),Pr(h.store,i.props.eventKey,!1))},i.onSubMenuClick=function(d){typeof i.props.onClick=="function"&&i.props.onClick(i.addKeyPath(d))},i.onSelect=function(d){i.props.onSelect(d)},i.onDeselect=function(d){i.props.onDeselect(d)},i.getPrefixCls=function(){return"".concat(i.props.rootPrefixCls,"-submenu")},i.getActiveClassName=function(){return"".concat(i.getPrefixCls(),"-active")},i.getDisabledClassName=function(){return"".concat(i.getPrefixCls(),"-disabled")},i.getSelectedClassName=function(){return"".concat(i.getPrefixCls(),"-selected")},i.getOpenClassName=function(){return"".concat(i.props.rootPrefixCls,"-submenu-open")},i.getVisible=function(){return i.state.isOpen},i.getMode=function(){return i.state.mode},i.saveMenuInstance=function(d){i.menuInstance=d},i.addKeyPath=function(d){return $($({},d),{},{keyPath:(d.keyPath||[]).concat(i.props.eventKey)})},i.triggerOpenChange=function(d,f){var h=i.props.eventKey,v=function(){i.onOpenChange({key:h,item:Ae(i),trigger:f,open:d})};f==="mouseenter"?i.mouseenterTimeout=setTimeout(function(){v()},0):v()},i.isChildrenSelected=function(){var d={find:!1};return vu(i.props.children,i.props.selectedKeys,d),d.find},i.isInlineMode=function(){return i.getMode()==="inline"},i.adjustWidth=function(){if(!(!i.subMenuTitle||!i.menuInstance)){var d=as.exports.findDOMNode(i.menuInstance);d.offsetWidth>=i.subMenuTitle.offsetWidth||(d.style.minWidth="".concat(i.subMenuTitle.offsetWidth,"px"))}},i.saveSubMenuTitle=function(d){i.subMenuTitle=d},i.getBaseProps=function(){var d=Ae(i),f=d.props,h=i.getMode();return{mode:h==="horizontal"?"vertical":h,visible:i.getVisible(),level:f.level+1,inlineIndent:f.inlineIndent,focusable:!1,onClick:i.onSubMenuClick,onSelect:i.onSelect,onDeselect:i.onDeselect,onDestroy:i.onDestroy,selectedKeys:f.selectedKeys,eventKey:"".concat(f.eventKey,"-menu-"),openKeys:f.openKeys,motion:f.motion,onOpenChange:i.onOpenChange,subMenuOpenDelay:f.subMenuOpenDelay,parentMenu:Ae(i),subMenuCloseDelay:f.subMenuCloseDelay,forceSubMenuRender:f.forceSubMenuRender,triggerSubMenuAction:f.triggerSubMenuAction,builtinPlacements:f.builtinPlacements,defaultActiveFirst:f.store.getState().defaultActiveFirst[pu(f.eventKey)],multiple:f.multiple,prefixCls:f.rootPrefixCls,id:i.internalMenuId,manualRef:i.saveMenuInstance,itemIcon:f.itemIcon,expandIcon:f.expandIcon,direction:f.direction}},i.getMotion=function(d,f){var h=Ae(i),v=h.haveRendered,m=i.props,b=m.motion,g=m.rootPrefixCls,w=$($({},b),{},{leavedClassName:"".concat(g,"-hidden"),removeOnLeave:!1,motionAppear:v||!f||d!=="inline"});return w};var o=r.store,a=r.eventKey,s=o.getState(),l=s.defaultActiveFirst;i.isRootMenu=!1;var c=!1;return l&&(c=l[a]),Pr(o,a,c),i.state={mode:r.mode,isOpen:r.isOpen},i}return jt(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var i=this,o=this.props,a=o.mode,s=o.parentMenu,l=o.manualRef,c=o.isOpen,d=function(){i.setState({mode:a,isOpen:c})},f=c!==this.state.isOpen,h=a!==this.state.mode;(h||f)&&(Ce.cancel(this.updateStateRaf),h?this.updateStateRaf=Ce(d):d()),l&&l(this),!(a!=="horizontal"||!(s==null?void 0:s.isRootMenu)||!c)&&(this.minWidthTimeout=setTimeout(function(){return i.adjustWidth()},0))}},{key:"componentWillUnmount",value:function(){var i=this.props,o=i.onDestroy,a=i.eventKey;o&&o(a),this.minWidthTimeout&&clearTimeout(this.minWidthTimeout),this.mouseenterTimeout&&clearTimeout(this.mouseenterTimeout),Ce.cancel(this.updateStateRaf)}},{key:"renderPopupMenu",value:function(i,o){var a=this.getBaseProps();return u.exports.createElement(Cu,ne({},a,{id:this.internalMenuId,className:i,style:o}),this.props.children)}},{key:"renderChildren",value:function(){var i=this,o=this.getBaseProps(),a=o.mode,s=o.visible,l=o.forceSubMenuRender,c=o.direction,d=this.getMotion(a,s);if(this.haveRendered=!0,this.haveOpened=this.haveOpened||s||l,!this.haveOpened)return u.exports.createElement("div",null);var f=fe("".concat(o.prefixCls,"-sub"),G({},"".concat(o.prefixCls,"-rtl"),c==="rtl"));return this.isInlineMode()?u.exports.createElement(Sr,ne({visible:o.visible,forceRender:l},d),function(h){var v=h.className,m=h.style,b=fe(f,v);return i.renderPopupMenu(b,m)}):this.renderPopupMenu(f)}},{key:"render",value:function(){var i,o,a,s=$({},this.props),l=this.getVisible(),c=this.getPrefixCls(),d=this.isInlineMode(),f=this.getMode(),h=fe(c,"".concat(c,"-").concat(f),(i={},G(i,s.className,!!s.className),G(i,this.getOpenClassName(),l),G(i,this.getActiveClassName(),s.active||l&&!d),G(i,this.getDisabledClassName(),s.disabled),G(i,this.getSelectedClassName(),this.isChildrenSelected()),i));this.internalMenuId||(s.eventKey?this.internalMenuId="".concat(s.eventKey,"$Menu"):(mu+=1,this.internalMenuId="$__$".concat(mu,"$Menu")));var v={},m={},b={};s.disabled||(v={onMouseLeave:this.onMouseLeave,onMouseEnter:this.onMouseEnter},m={onClick:this.onTitleClick},b={onMouseEnter:this.onTitleMouseEnter,onMouseLeave:this.onTitleMouseLeave});var g={},w=s.direction,D=w==="rtl";d&&(D?g.paddingRight=s.inlineIndent*s.level:g.paddingLeft=s.inlineIndent*s.level);var E={};this.getVisible()&&(E={"aria-owns":this.internalMenuId});var y=null;f!=="horizontal"&&(y=this.props.expandIcon,typeof this.props.expandIcon=="function"&&(y=u.exports.createElement(this.props.expandIcon,$({},this.props))));var S=u.exports.createElement("div",ne({ref:this.saveSubMenuTitle,style:g,className:"".concat(c,"-title"),role:"button"},b,m,{"aria-expanded":l},E,{"aria-haspopup":"true",title:typeof s.title=="string"?s.title:void 0}),s.title,y||u.exports.createElement("i",{className:"".concat(c,"-arrow")})),x=this.renderChildren(),I=((o=s.parentMenu)===null||o===void 0?void 0:o.isRootMenu)?s.parentMenu.props.getPopupContainer:function(A){return A.parentNode},_=Ag[f],F=s.popupOffset?{offset:s.popupOffset}:{},R=fe((a={},G(a,s.popupClassName,s.popupClassName&&!d),G(a,"".concat(c,"-rtl"),D),a)),P=s.disabled,O=s.triggerSubMenuAction,j=s.subMenuOpenDelay,N=s.forceSubMenuRender,k=s.subMenuCloseDelay,V=s.builtinPlacements;ji.forEach(function(A){return delete s[A]}),delete s.onClick;var T=D?$($({},Ng),V):$($({},kg),V);delete s.direction;var C=this.getBaseProps(),M=d?null:this.getMotion(C.mode,C.visible);return u.exports.createElement("li",ne({},s,v,{className:h,role:"menuitem"}),u.exports.createElement(aa,{prefixCls:c,popupClassName:fe("".concat(c,"-popup"),R),getPopupContainer:I,builtinPlacements:T,popupPlacement:_,popupVisible:d?!1:l,popupAlign:F,popup:d?null:x,action:P||d?[]:[O],mouseEnterDelay:j,mouseLeaveDelay:k,onPopupVisibleChange:this.onPopupVisibleChange,forceRender:N,popupMotion:M},S),d?x:null)}}]),n}(u.exports.Component);gu.defaultProps={onMouseEnter:Ve,onMouseLeave:Ve,onTitleMouseEnter:Ve,onTitleMouseLeave:Ve,onTitleClick:Ve,manualRef:Ve,mode:"vertical",title:""};var bu=pa(function(t,e){var n=t.openKeys,r=t.activeKey,i=t.selectedKeys,o=e.eventKey,a=e.subMenuKey;return{isOpen:n.indexOf(o)>-1,active:r[a]===o,selectedKeys:i}})(gu);bu.isSubMenu=!0;var yu="menuitem-overflowed",Lg=.5,wu=function(t){Ft(n,t);var e=Wt(n);function n(){var r;return Bt(this,n),r=e.apply(this,arguments),r.resizeObserver=null,r.mutationObserver=null,r.originalTotalWidth=0,r.overflowedItems=[],r.menuItemSizes=[],r.cancelFrameId=null,r.state={lastVisibleIndex:void 0},r.childRef=u.exports.createRef(),r.getMenuItemNodes=function(){var i=r.props.prefixCls,o=r.childRef.current;return o?[].slice.call(o.children).filter(function(a){return a.className.split(" ").indexOf("".concat(i,"-overflowed-submenu"))<0}):[]},r.getOverflowedSubMenuItem=function(i,o,a){var s=r.props,l=s.overflowedIndicator,c=s.level,d=s.mode,f=s.prefixCls,h=s.theme;if(c!==1||d!=="horizontal")return null;var v=r.props.children[0],m=v.props;m.children,m.title;var b=m.style,g=Oe(m,["children","title","style"]),w=$({},b),D="".concat(i,"-overflowed-indicator"),E="".concat(i,"-overflowed-indicator");o.length===0&&a!==!0?w=$($({},w),{},{display:"none"}):a&&(w=$($({},w),{},{visibility:"hidden",position:"absolute"}),D="".concat(D,"-placeholder"),E="".concat(E,"-placeholder"));var y=h?"".concat(f,"-").concat(h):"",S={};return ji.forEach(function(x){g[x]!==void 0&&(S[x]=g[x])}),u.exports.createElement(bu,ne({title:l,className:"".concat(f,"-overflowed-submenu"),popupClassName:y},S,{key:D,eventKey:E,disabled:!1,style:w}),o)},r.setChildrenWidthAndResize=function(){if(r.props.mode==="horizontal"){var i=r.childRef.current;if(!!i){var o=i.children;if(!(!o||o.length===0)){var a=i.children[o.length-1];Wi(a,"display","inline-block");var s=r.getMenuItemNodes(),l=s.filter(function(c){return c.className.split(" ").indexOf(yu)>=0});l.forEach(function(c){Wi(c,"display","inline-block")}),r.menuItemSizes=s.map(function(c){return ga(c,!0)}),l.forEach(function(c){Wi(c,"display","none")}),r.overflowedIndicatorWidth=ga(i.children[i.children.length-1],!0),r.originalTotalWidth=r.menuItemSizes.reduce(function(c,d){return c+d},0),r.handleResize(),Wi(a,"display","none")}}}},r.handleResize=function(){if(r.props.mode==="horizontal"){var i=r.childRef.current;if(!!i){var o=ga(i);r.overflowedItems=[];var a=0,s;r.originalTotalWidth>o+Lg&&(s=-1,r.menuItemSizes.forEach(function(l){a+=l,a+r.overflowedIndicatorWidth<=o&&(s+=1)})),r.setState({lastVisibleIndex:s})}}},r}return jt(n,[{key:"componentDidMount",value:function(){var i=this;if(this.setChildrenWidthAndResize(),this.props.level===1&&this.props.mode==="horizontal"){var o=this.childRef.current;if(!o)return;this.resizeObserver=new Fo(function(a){a.forEach(function(){var s=i.cancelFrameId;cancelAnimationFrame(s),i.cancelFrameId=requestAnimationFrame(i.setChildrenWidthAndResize)})}),[].slice.call(o.children).concat(o).forEach(function(a){i.resizeObserver.observe(a)}),typeof MutationObserver!="undefined"&&(this.mutationObserver=new MutationObserver(function(){i.resizeObserver.disconnect(),[].slice.call(o.children).concat(o).forEach(function(a){i.resizeObserver.observe(a)}),i.setChildrenWidthAndResize()}),this.mutationObserver.observe(o,{attributes:!1,childList:!0,subTree:!1}))}}},{key:"componentWillUnmount",value:function(){this.resizeObserver&&this.resizeObserver.disconnect(),this.mutationObserver&&this.mutationObserver.disconnect(),cancelAnimationFrame(this.cancelFrameId)}},{key:"renderChildren",value:function(i){var o=this,a=this.state.lastVisibleIndex;return(i||[]).reduce(function(s,l,c){var d=l;if(o.props.mode==="horizontal"){var f=o.getOverflowedSubMenuItem(l.props.eventKey,[]);a!==void 0&&o.props.className.indexOf("".concat(o.props.prefixCls,"-root"))!==-1&&(c>a&&(d=u.exports.cloneElement(l,{style:{display:"none"},eventKey:"".concat(l.props.eventKey,"-hidden"),className:"".concat(yu)})),c===a+1&&(o.overflowedItems=i.slice(a+1).map(function(v){return u.exports.cloneElement(v,{key:v.props.eventKey,mode:"vertical-left"})}),f=o.getOverflowedSubMenuItem(l.props.eventKey,o.overflowedItems)));var h=[].concat(mt(s),[f,d]);return c===i.length-1&&h.push(o.getOverflowedSubMenuItem(l.props.eventKey,[],!0)),h}return[].concat(mt(s),[d])},[])}},{key:"render",value:function(){var i=this.props;i.visible,i.prefixCls,i.overflowedIndicator,i.mode,i.level;var o=i.tag,a=i.children;i.theme;var s=Oe(i,["visible","prefixCls","overflowedIndicator","mode","level","tag","children","theme"]),l=o;return u.exports.createElement(l,ne({ref:this.childRef},s),this.renderChildren(a))}}]),n}(u.exports.Component);wu.defaultProps={tag:"div",className:""};function zg(t){return t.length?t.every(function(e){return!!e.props.disabled}):!0}function Hi(t,e,n){var r=t.getState();t.setState({activeKey:$($({},r.activeKey),{},G({},e,n))})}function Vn(t){return t.eventKey||"0-menu-"}function $i(t,e){var n=e,r=t.children,i=t.eventKey;if(n){var o;if(hu(r,function(a,s){a&&a.props&&!a.props.disabled&&n===ma(a,i,s)&&(o=!0)}),o)return n}return n=null,t.defaultActiveFirst&&hu(r,function(a,s){!n&&a&&!a.props.disabled&&(n=ma(a,i,s))}),n}function Fg(t){if(!!t){var e=this.instanceArray.indexOf(t);e!==-1?this.instanceArray[e]=t:this.instanceArray.push(t)}}var xu=function(t){Ft(n,t);var e=Wt(n);function n(r){var i;return Bt(this,n),i=e.call(this,r),i.onKeyDown=function(o,a){var s=o.keyCode,l;if(i.getFlatInstanceArray().forEach(function(d){d&&d.props.active&&d.onKeyDown&&(l=d.onKeyDown(o))}),l)return 1;var c=null;if((s===we.UP||s===we.DOWN)&&(c=i.step(s===we.UP?-1:1)),c)return o.preventDefault(),Hi(i.props.store,Vn(i.props),c.props.eventKey),typeof a=="function"&&a(c),1},i.onItemHover=function(o){var a=o.key,s=o.hover;Hi(i.props.store,Vn(i.props),s?a:null)},i.onDeselect=function(o){i.props.onDeselect(o)},i.onSelect=function(o){i.props.onSelect(o)},i.onClick=function(o){i.props.onClick(o)},i.onOpenChange=function(o){i.props.onOpenChange(o)},i.onDestroy=function(o){i.props.onDestroy(o)},i.getFlatInstanceArray=function(){return i.instanceArray},i.step=function(o){var a=i.getFlatInstanceArray(),s=i.props.store.getState().activeKey[Vn(i.props)],l=a.length;if(!l)return null;o<0&&(a=a.concat().reverse());var c=-1;if(a.every(function(v,m){return v&&v.props.eventKey===s?(c=m,!1):!0}),!(!i.props.defaultActiveFirst&&c!==-1&&zg(a.slice(c,l-1)))){var d=(c+1)%l,f=d;do{var h=a[f];if(!h||h.props.disabled)f=(f+1)%l;else return h}while(f!==d);return null}},i.renderCommonMenuItem=function(o,a,s){var l=i.props.store.getState(),c=Ae(i),d=c.props,f=ma(o,d.eventKey,a),h=o.props;if(!h||typeof o.type=="string")return o;var v=f===l.activeKey,m=$($({mode:h.mode||d.mode,level:d.level,inlineIndent:d.inlineIndent,renderMenuItem:i.renderMenuItem,rootPrefixCls:d.prefixCls,index:a,parentMenu:d.parentMenu,manualRef:h.disabled?void 0:_g(o.ref,Fg.bind(Ae(i))),eventKey:f,active:!h.disabled&&v,multiple:d.multiple,onClick:function(g){(h.onClick||Ve)(g),i.onClick(g)},onItemHover:i.onItemHover,motion:d.motion,subMenuOpenDelay:d.subMenuOpenDelay,subMenuCloseDelay:d.subMenuCloseDelay,forceSubMenuRender:d.forceSubMenuRender,onOpenChange:i.onOpenChange,onDeselect:i.onDeselect,onSelect:i.onSelect,builtinPlacements:d.builtinPlacements,itemIcon:h.itemIcon||i.props.itemIcon,expandIcon:h.expandIcon||i.props.expandIcon},s),{},{direction:d.direction});return(d.mode==="inline"||Rg())&&(m.triggerSubMenuAction="click"),u.exports.cloneElement(o,$($({},m),{},{key:f||a}))},i.renderMenuItem=function(o,a,s){if(!o)return null;var l=i.props.store.getState(),c={openKeys:l.openKeys,selectedKeys:l.selectedKeys,triggerSubMenuAction:i.props.triggerSubMenuAction,subMenuKey:s};return i.renderCommonMenuItem(o,a,c)},r.store.setState({activeKey:$($({},r.store.getState().activeKey),{},G({},r.eventKey,$i(r,r.activeKey)))}),i.instanceArray=[],i}return jt(n,[{key:"componentDidMount",value:function(){this.props.manualRef&&this.props.manualRef(this)}},{key:"shouldComponentUpdate",value:function(i){return this.props.visible||i.visible||this.props.className!==i.className||!cr(this.props.style,i.style)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a="activeKey"in o?o.activeKey:o.store.getState().activeKey[Vn(o)],s=$i(o,a);if(s!==a)Hi(o.store,Vn(o),s);else if("activeKey"in i){var l=$i(i,i.activeKey);s!==l&&Hi(o.store,Vn(o),s)}}},{key:"render",value:function(){var i=this,o=ne({},this.props);this.instanceArray=[];var a=fe(o.prefixCls,o.className,"".concat(o.prefixCls,"-").concat(o.mode)),s={className:a,role:o.role||"menu"};o.id&&(s.id=o.id),o.focusable&&(s.tabIndex=0,s.onKeyDown=this.onKeyDown);var l=o.prefixCls,c=o.eventKey,d=o.visible,f=o.level,h=o.mode,v=o.overflowedIndicator,m=o.theme;return ji.forEach(function(b){return delete o[b]}),delete o.onClick,u.exports.createElement(wu,ne({},o,{prefixCls:l,mode:h,tag:"ul",level:f,theme:m,visible:d,overflowedIndicator:v},s),kn(o.children).map(function(b,g){return i.renderMenuItem(b,g,c||"0-menu-")}))}}]),n}(u.exports.Component);xu.defaultProps={prefixCls:"rc-menu",className:"",mode:"vertical",level:1,inlineIndent:24,visible:!0,focusable:!0,style:{},manualRef:Ve};var Cu=pa()(xu);function Bg(t,e,n){var r=t.prefixCls,i=t.motion,o=t.defaultMotions,a=o===void 0?{}:o,s=t.openAnimation,l=t.openTransitionName,c=e.switchingModeFromInline;if(i)return i;if(Zt(s)==="object"&&s)ur(!1,"Object type of `openAnimation` is removed. Please use `motion` instead.");else if(typeof s=="string")return{motionName:"".concat(r,"-open-").concat(s)};if(l)return{motionName:l};var d=a[n];return d||(c?null:a.other)}var Su=function(t){Ft(n,t);var e=Wt(n);function n(r){var i;Bt(this,n),i=e.call(this,r),i.onSelect=function(s){var l=Ae(i),c=l.props;if(c.selectable){var d=i.store.getState(),f=d.selectedKeys,h=s.key;c.multiple?f=f.concat([h]):f=[h],"selectedKeys"in c||i.store.setState({selectedKeys:f}),c.onSelect($($({},s),{},{selectedKeys:f}))}},i.onClick=function(s){var l=i.getRealMenuMode(),c=Ae(i),d=c.store,f=c.props.onOpenChange;l!=="inline"&&!("openKeys"in i.props)&&(d.setState({openKeys:[]}),f([])),i.props.onClick(s)},i.onKeyDown=function(s,l){i.innerMenu.getWrappedInstance().onKeyDown(s,l)},i.onOpenChange=function(s){var l=Ae(i),c=l.props,d=i.store.getState().openKeys.concat(),f=!1,h=function(m){var b=!1;if(m.open)b=d.indexOf(m.key)===-1,b&&d.push(m.key);else{var g=d.indexOf(m.key);b=g!==-1,b&&d.splice(g,1)}f=f||b};Array.isArray(s)?s.forEach(h):h(s),f&&("openKeys"in i.props||i.store.setState({openKeys:d}),c.onOpenChange(d))},i.onDeselect=function(s){var l=Ae(i),c=l.props;if(c.selectable){var d=i.store.getState().selectedKeys.concat(),f=s.key,h=d.indexOf(f);h!==-1&&d.splice(h,1),"selectedKeys"in c||i.store.setState({selectedKeys:d}),c.onDeselect($($({},s),{},{selectedKeys:d}))}},i.onMouseEnter=function(s){i.restoreModeVerticalFromInline();var l=i.props.onMouseEnter;l&&l(s)},i.onTransitionEnd=function(s){var l=s.propertyName==="width"&&s.target===s.currentTarget,c=s.target.className,d=Object.prototype.toString.call(c)==="[object SVGAnimatedString]"?c.animVal:c,f=s.propertyName==="font-size"&&d.indexOf("anticon")>=0;(l||f)&&i.restoreModeVerticalFromInline()},i.setInnerMenu=function(s){i.innerMenu=s},i.isRootMenu=!0;var o=r.defaultSelectedKeys,a=r.defaultOpenKeys;return"selectedKeys"in r&&(o=r.selectedKeys||[]),"openKeys"in r&&(a=r.openKeys||[]),i.store=Pg({selectedKeys:o,openKeys:a,activeKey:{"0-menu-":$i(r,r.activeKey)}}),i.state={switchingModeFromInline:!1,prevProps:r,inlineOpenKeys:[],store:i.store},i}return jt(n,[{key:"componentDidMount",value:function(){this.updateMiniStore(),this.updateMenuDisplay()}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.siderCollapsed,s=o.inlineCollapsed,l=o.onOpenChange;(!i.inlineCollapsed&&s||!i.siderCollapsed&&a)&&l([]),this.updateMiniStore(),this.updateMenuDisplay()}},{key:"updateMenuDisplay",value:function(){var i=this.props.collapsedWidth,o=this.store,a=this.prevOpenKeys,s=this.getInlineCollapsed()&&(i===0||i==="0"||i==="0px");s?(this.prevOpenKeys=o.getState().openKeys.concat(),this.store.setState({openKeys:[]})):a&&(this.store.setState({openKeys:a}),this.prevOpenKeys=null)}},{key:"getRealMenuMode",value:function(){var i=this.props.mode,o=this.state.switchingModeFromInline,a=this.getInlineCollapsed();return o&&a?"inline":a?"vertical":i}},{key:"getInlineCollapsed",value:function(){var i=this.props,o=i.inlineCollapsed,a=i.siderCollapsed;return a!==void 0?a:o}},{key:"restoreModeVerticalFromInline",value:function(){var i=this.state.switchingModeFromInline;i&&this.setState({switchingModeFromInline:!1})}},{key:"updateMiniStore",value:function(){"selectedKeys"in this.props&&this.store.setState({selectedKeys:this.props.selectedKeys||[]}),"openKeys"in this.props&&this.store.setState({openKeys:this.props.openKeys||[]})}},{key:"render",value:function(){var i=$({},Ci(this.props,["collapsedWidth","siderCollapsed","defaultMotions"])),o=this.getRealMenuMode();return i.className+=" ".concat(i.prefixCls,"-root"),i.direction==="rtl"&&(i.className+=" ".concat(i.prefixCls,"-rtl")),i=$($({},i),{},{mode:o,onClick:this.onClick,onOpenChange:this.onOpenChange,onDeselect:this.onDeselect,onSelect:this.onSelect,onMouseEnter:this.onMouseEnter,onTransitionEnd:this.onTransitionEnd,parentMenu:this,motion:Bg(this.props,this.state,o)}),delete i.openAnimation,delete i.openTransitionName,u.exports.createElement(Dg,{store:this.store},u.exports.createElement(Cu,ne({},i,{ref:this.setInnerMenu}),this.props.children))}}],[{key:"getDerivedStateFromProps",value:function(i,o){var a=o.prevProps,s=o.store,l=s.getState(),c={},d={prevProps:i};return a.mode==="inline"&&i.mode!=="inline"&&(d.switchingModeFromInline=!0),"openKeys"in i?c.openKeys=i.openKeys||[]:((i.inlineCollapsed&&!a.inlineCollapsed||i.siderCollapsed&&!a.siderCollapsed)&&(d.switchingModeFromInline=!0,d.inlineOpenKeys=l.openKeys,c.openKeys=[]),(!i.inlineCollapsed&&a.inlineCollapsed||!i.siderCollapsed&&a.siderCollapsed)&&(c.openKeys=o.inlineOpenKeys,d.inlineOpenKeys=[])),Object.keys(c).length&&s.setState(c),d}}]),n}(u.exports.Component);Su.defaultProps={selectable:!0,onClick:Ve,onSelect:Ve,onOpenChange:Ve,onDeselect:Ve,defaultSelectedKeys:[],defaultOpenKeys:[],subMenuOpenDelay:.1,subMenuCloseDelay:.1,triggerSubMenuAction:"hover",prefixCls:"rc-menu",className:"",mode:"vertical",style:{},builtinPlacements:{},overflowedIndicator:u.exports.createElement("span",null,"\xB7\xB7\xB7")};var ba=function(t){Ft(n,t);var e=Wt(n);function n(){var r;return Bt(this,n),r=e.apply(this,arguments),r.onKeyDown=function(i){var o=i.keyCode;if(o===we.ENTER)return r.onClick(i),!0},r.onMouseLeave=function(i){var o=r.props,a=o.eventKey,s=o.onItemHover,l=o.onMouseLeave;s({key:a,hover:!1}),l({key:a,domEvent:i})},r.onMouseEnter=function(i){var o=r.props,a=o.eventKey,s=o.onItemHover,l=o.onMouseEnter;s({key:a,hover:!0}),l({key:a,domEvent:i})},r.onClick=function(i){var o=r.props,a=o.eventKey,s=o.multiple,l=o.onClick,c=o.onSelect,d=o.onDeselect,f=o.isSelected,h={key:a,keyPath:[a],item:Ae(r),domEvent:i};l(h),s?f?d(h):c(h):f||c(h)},r.saveNode=function(i){r.node=i},r}return jt(n,[{key:"componentDidMount",value:function(){this.callRef()}},{key:"componentDidUpdate",value:function(){this.callRef()}},{key:"componentWillUnmount",value:function(){var i=this.props;i.onDestroy&&i.onDestroy(i.eventKey)}},{key:"getPrefixCls",value:function(){return"".concat(this.props.rootPrefixCls,"-item")}},{key:"getActiveClassName",value:function(){return"".concat(this.getPrefixCls(),"-active")}},{key:"getSelectedClassName",value:function(){return"".concat(this.getPrefixCls(),"-selected")}},{key:"getDisabledClassName",value:function(){return"".concat(this.getPrefixCls(),"-disabled")}},{key:"callRef",value:function(){this.props.manualRef&&this.props.manualRef(this)}},{key:"render",value:function(){var i,o=$({},this.props),a=fe(this.getPrefixCls(),o.className,(i={},G(i,this.getActiveClassName(),!o.disabled&&o.active),G(i,this.getSelectedClassName(),o.isSelected),G(i,this.getDisabledClassName(),o.disabled),i)),s=$($({},o.attribute),{},{title:typeof o.title=="string"?o.title:void 0,className:a,role:o.role||"menuitem","aria-disabled":o.disabled});o.role==="option"?s=$($({},s),{},{role:"option","aria-selected":o.isSelected}):(o.role===null||o.role==="none")&&(s.role="none");var l={onClick:o.disabled?null:this.onClick,onMouseLeave:o.disabled?null:this.onMouseLeave,onMouseEnter:o.disabled?null:this.onMouseEnter},c=$({},o.style);o.mode==="inline"&&(o.direction==="rtl"?c.paddingRight=o.inlineIndent*o.level:c.paddingLeft=o.inlineIndent*o.level),ji.forEach(function(f){return delete o[f]}),delete o.direction;var d=this.props.itemIcon;return typeof this.props.itemIcon=="function"&&(d=u.exports.createElement(this.props.itemIcon,this.props)),u.exports.createElement("li",ne({},Ci(o,["onClick","onMouseEnter","onMouseLeave","onSelect"]),s,l,{style:c,ref:this.saveNode}),o.children,d)}}]),n}(u.exports.Component);ba.isMenuItem=!0;ba.defaultProps={onSelect:Ve,onMouseEnter:Ve,onMouseLeave:Ve,manualRef:Ve};var jg=pa(function(t,e){var n=t.activeKey,r=t.selectedKeys,i=e.eventKey,o=e.subMenuKey;return{active:n[o]===i,isSelected:Array.isArray(r)?r.indexOf(i)!==-1:r===i}})(ba);class Pe{constructor(e,n,r=!1){if(this.pageX=0,this.pageY=0,this.clientX=0,this.clientY=0,this.dx=0,this.dy=0,this.event=e,this.component=n,this._init=r,e){if(e.type.startsWith("touch")){let i;e.type==="touchend"?i=e.changedTouches[0]:i=e.touches[0],this.pageX=i.pageX,this.pageY=i.pageY,this.clientX=i.clientX,this.clientY=i.clientY}else"pageX"in e&&(this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY);this.dx=(this.pageX-n.baseX)*n.scaleX,this.dy=(this.pageY-n.baseY)*n.scaleY}}moved(){return Math.abs(this.dx)>=1||Math.abs(this.dy)>=1}startDrag(e,n){if(!this._init)throw new Error("startDrag can only be used in onDragStart callback");e===void 0&&(e=this.component.element),Hg(this,e,n),this.component.ownerDocument.body.classList.add("dock-dragging")}setData(e,n){if(!this._init)throw new Error("setData can only be used in onDragStart callback");_r=n,Ir=e}static getData(e,n){return n===_r&&Ir?Ir[e]:null}get dragType(){return this.component.dragType}accept(e=""){this.acceptMessage=e,this.rejected=!1}reject(){this.rejected=!0}_onMove(){if(Ir){let e=this.component.ownerDocument,n=e.elementFromPoint(this.clientX,this.clientY),r;for(;n&&n!==e.body;){if(Rr.has(n)){let i=Rr.get(n);if(i.onDragOverT&&(i.onDragOverT(this),this.acceptMessage!=null)){r=i;break}}n=n.parentElement}Du(r,this)}$g(this)}_onDragEnd(e=!1){kt&&kt.onDropT&&!e&&(kt.onDropT(this),this.component.dragType==="right"&&(this.component.ownerDocument.addEventListener("contextmenu",Eu,!0),setTimeout(()=>{this.component.ownerDocument.removeEventListener("contextmenu",Eu,!0)},0))),Kg(this),this.component.ownerDocument.body.classList.remove("dock-dragging")}}function Eu(t){t.preventDefault(),t.stopPropagation()}let _r,Ir,ya,Ki,kt;function Du(t,e){kt!==t&&(kt&&kt.onDragLeaveT&&kt.onDragLeaveT(e),kt=t)}let Rr=new WeakMap;function kr(){return ya!=null}function Mu(t,e){Rr.set(t,e)}function wa(t){Rr.get(t)===kt&&(kt=null),Rr.delete(t)}let Ue,Nr;function Wg(t){Ue=t.createElement("div"),Nr=t.createElement("div"),Ue.className="dragging-layer",Ue.appendChild(document.createElement("div")),Ue.appendChild(Nr)}function Hg(t,e,n){ya=t,e&&(e.classList.add("dragging"),Ki=e),Wg(t.component.ownerDocument),t.component.ownerDocument.body.appendChild(Ue);let r=0,i=0;n===void 0&&(n=t.component.element),n&&"outerHTML"in n&&(r=n.offsetWidth,i=n.offsetHeight,n=n.outerHTML),n&&(Ue.firstElementChild.outerHTML=n,window.getComputedStyle(Ue.firstElementChild).backgroundColor==="rgba(0, 0, 0, 0)"&&(Ue.firstElementChild.style.backgroundColor=window.getComputedStyle(Ue).getPropertyValue("--default-background-color")),r&&(r>400&&(r=400),Ue.firstElementChild.style.width=`${r}px`),i&&(i>300&&(i=300),Ue.firstElementChild.style.height=`${i}px`));for(let o of Vi)o(_r||!0)}function $g(t){Ue.style.left=`${t.pageX}px`,Ue.style.top=`${t.pageY}px`,t.rejected?Nr.className="drag-accept-reject":t.acceptMessage?Nr.className=t.acceptMessage:Nr.className=""}function Kg(t){Ki&&(Ki.classList.remove("dragging"),Ki=null),Ue&&(Ue.remove(),Ue=null),ya=null,Du(null,t),_r=null,Ir=null;for(let e of Vi)e(null)}let Vi=new Set;function Vg(t){Vi.add(t)}function Ug(t){Vi.delete(t)}typeof window!="undefined"&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform)&&document.addEventListener("touchmove",t=>{t.touches.length===1&&document.body.classList.contains("dock-dragging")&&t.preventDefault()},{passive:!1});class Ou{constructor(e,n,r=!1){if(this.dx1=0,this.dy1=0,this.dx2=0,this.dy2=0,this.scale=1,this.rotate=0,this.dx=0,this.dy=0,this.event=e,this.component=n,this._init=r,e&&e.touches.length===2){let i=e.touches[0],o=e.touches[1];this.dx1=(i.pageX-n.baseX)*n.scaleX,this.dy1=(i.pageY-n.baseY)*n.scaleY,this.dx2=(o.pageX-n.baseX2)*n.scaleX,this.dy2=(o.pageY-n.baseY2)*n.scaleY,this.dx1*this.dx2>=0&&(this.dx=(this.dx1+this.dx2)/2),this.dy1*this.dy2>=0&&(this.dy=(this.dy1+this.dy2)/2),this.scale=Math.sqrt(Math.pow(o.pageX-i.pageX,2)+Math.pow(o.pageY-i.pageY,2))/n.baseDis,this.rotate=Math.atan2(o.pageY-i.pageY,o.pageX-i.pageX)-n.baseAng,this.rotate>Math.PI?this.rotate-=Math.PI*2:this.rotate<-Math.PI&&(this.rotate+=Math.PI*2)}}moved(){return Math.max(Math.abs(this.dx1),Math.abs(this.dx2),Math.abs(this.dy1),Math.abs(this.dy2))}pageCenter(){let e=this.event.touches[0],n=this.event.touches[1];return[(e.pageX+n.pageX)/2,(e.pageY+n.pageY)/2]}clientCenter(){let e=this.event.touches[0],n=this.event.touches[1];return[(e.clientX+n.clientX)/2,(e.clientY+n.clientY)/2]}}var Gg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Nt extends p.PureComponent{constructor(){super(...arguments);this._getRef=e=>{if(e===this.element)return;let{getRef:n,onDragOverT:r}=this.props;this.element&&r&&wa(this.element),this.element=e,e&&(this.ownerDocument=e.ownerDocument),n&&n(e),e&&r&&Mu(e,this.props)},this.dragType=null,this.waitingMove=!1,this.listening=!1,this.gesturing=!1,this.onPointerDown=e=>{let n=e.nativeEvent.target;if(n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement||n.classList.contains("drag-ignore"))return;let{onDragStartT:r,onGestureStartT:i,onGestureMoveT:o,useRightButtonDragT:a}=this.props,s=e.nativeEvent;if(this.cancel(),s.type==="touchstart")s.touches.length===1?r&&this.onDragStart(s):s.touches.length===2&&i&&o&&this.onGestureStart(s);else if(r){if(s.button===2&&!a)return;this.onDragStart(s)}},this.onMouseMove=e=>{let{onDragMoveT:n}=this.props;if(this.waitingMove){if(kr()){this.onDragEnd();return}if(!this.checkFirstMove(e))return}else{let r=new Pe(e,this);r._onMove(),n&&n(r)}e.preventDefault()},this.onTouchMove=e=>{let{onDragMoveT:n}=this.props;if(this.waitingMove){if(kr()){this.onDragEnd();return}if(!this.checkFirstMove(e))return}else if(e.touches.length!==1)this.onDragEnd();else{let r=new Pe(e,this);r._onMove(),n&&n(r)}e.preventDefault()},this.onDragEnd=e=>{let{onDragEndT:n}=this.props,r=new Pe(e,this);this.removeListeners(),this.waitingMove||(r._onDragEnd(e==null),n&&n(r)),this.cleanupDrag(r)},this.onGestureMove=e=>{let{onGestureMoveT:n,gestureSensitivity:r}=this.props,i=new Ou(e,this);if(this.waitingMove)if(r>0||(r=10),i.moved()>r)this.waitingMove=!1;else return;n&&n(i)},this.onGestureEnd=e=>{let{onGestureEndT:n}=this.props;new Pe(e,this),this.removeListeners(),n&&n()},this.onKeyDown=e=>{e.key==="Escape"&&this.cancel()}}onDragStart(e){if(kr())return;let n=new Pe(e,this,!0);this.baseX=n.pageX,this.baseY=n.pageY;let r=this.element.parentElement,i=r.getBoundingClientRect();this.scaleX=r.offsetWidth/Math.round(i.width),this.scaleY=r.offsetHeight/Math.round(i.height),this.addDragListeners(e),this.props.directDragT&&this.executeFirstMove(n)}addDragListeners(e){this.props,e.type==="touchstart"?(this.ownerDocument.addEventListener("touchmove",this.onTouchMove),this.ownerDocument.addEventListener("touchend",this.onDragEnd),this.dragType="touch"):(this.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.ownerDocument.addEventListener("mouseup",this.onDragEnd),e.button===2?this.dragType="right":this.dragType="left"),this.waitingMove=!0,this.listening=!0}checkFirstMove(e){let n=new Pe(e,this,!0);return n.moved()?this.executeFirstMove(n):!1}executeFirstMove(e){let{onDragStartT:n}=this.props;return this.waitingMove=!1,n(e),kr()?(e._onMove(),this.ownerDocument.addEventListener("keydown",this.onKeyDown),!0):(this.onDragEnd(),!1)}addGestureListeners(e){this.ownerDocument.addEventListener("touchmove",this.onGestureMove),this.ownerDocument.addEventListener("touchend",this.onGestureEnd),this.ownerDocument.addEventListener("keydown",this.onKeyDown),this.gesturing=!0,this.waitingMove=!0}onGestureStart(e){if(!kr())return;let{onGestureStartT:n}=this.props;this.baseX=e.touches[0].pageX,this.baseY=e.touches[0].pageY,this.baseX2=e.touches[1].pageX,this.baseY2=e.touches[1].pageY;let r=this.element.parentElement,i=r.getBoundingClientRect();this.scaleX=r.offsetWidth/Math.round(i.width),this.scaleY=r.offsetHeight/Math.round(i.height),this.baseDis=Math.sqrt(Math.pow(this.baseX-this.baseX2,2)+Math.pow(this.baseY-this.baseY2,2)),this.baseAng=Math.atan2(this.baseY2-this.baseY,this.baseX2-this.baseX);let o=new Ou(e,this,!0);n(o)&&(this.addGestureListeners(e),e.preventDefault())}cancel(){this.listening&&this.onDragEnd(),this.gesturing&&this.onGestureEnd()}removeListeners(){this.gesturing?(this.ownerDocument.removeEventListener("touchmove",this.onGestureMove),this.ownerDocument.removeEventListener("touchend",this.onGestureEnd)):this.listening&&(this.dragType==="touch"?(this.ownerDocument.removeEventListener("touchmove",this.onTouchMove),this.ownerDocument.removeEventListener("touchend",this.onDragEnd)):(this.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.ownerDocument.removeEventListener("mouseup",this.onDragEnd))),this.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.listening=!1,this.gesturing=!1}cleanupDrag(e){this.dragType=null,this.waitingMove=!1}render(){let e=this.props,{getRef:n,children:r,className:i,directDragT:o,onDragStartT:a,onDragMoveT:s,onDragEndT:l,onDragOverT:c,onDragLeaveT:d,onDropT:f,onGestureStartT:h,onGestureMoveT:v,onGestureEndT:m,useRightButtonDragT:b}=e,g=Gg(e,["getRef","children","className","directDragT","onDragStartT","onDragMoveT","onDragEndT","onDragOverT","onDragLeaveT","onDropT","onGestureStartT","onGestureMoveT","onGestureEndT","useRightButtonDragT"]),w=this.onPointerDown,D=this.onPointerDown;return a||(D=null,h||(w=null)),(a||h)&&(i?i=`${i} drag-initiator`:i="drag-initiator"),p.createElement("div",Object.assign({ref:this._getRef,className:i},g,{onMouseDown:D,onTouchStart:w}),r)}componentDidUpdate(e){let{onDragOverT:n,onDragEndT:r,onDragLeaveT:i}=this.props;this.element&&(e.onDragOverT!==n||e.onDragLeaveT!==i||e.onDragEndT!==r)&&(n?Mu(this.element,this.props):wa(this.element))}componentWillUnmount(){let{onDragOverT:e}=this.props;this.element&&e&&wa(this.element),this.cancel()}}var qg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Yg(t,e){if(t==="ArrowLeft"||t==="ArrowRight"){let n=Array.from(e.querySelectorAll(".dock-tab-btn")),r=e.querySelector(".dock-tab-active>.dock-tab-btn"),i=n.indexOf(r);if(i>=0){if(t==="ArrowLeft"){if(i>0)return n[i-1].click(),n[i-1].focus(),!0}else if(i<n.length-1)return n[i+1].click(),n[i+1].focus(),!0}}return!1}function Xg(t){const{onDragStart:e,onDragMove:n,onDragEnd:r,TabNavList:i,isMaximized:o}=t,a=qg(t,["onDragStart","onDragMove","onDragEnd","TabNavList","isMaximized"]),s=p.useContext(ut),l=p.useRef(),c=f=>{l.current=f},d=f=>{f.key.startsWith("Arrow")&&(!Yg(f.key,l.current)&&!o&&s.navigateToPanel(l.current,f.key),f.stopPropagation(),f.preventDefault())};return p.createElement(Nt,{onDragStartT:e,onDragMoveT:n,onDragEndT:r,role:"tablist",className:"dock-bar",onKeyDown:d,getRef:c,tabIndex:-1},p.createElement(i,Object.assign({},a)))}class Tu extends p.PureComponent{constructor(){super(...arguments);this.getRef=e=>{this._ref=e}}updateCache(){const{cached:e,children:n,cacheId:r}=this.props;this._cache&&(!e||r!==this._cache.id)&&(this.context.removeTabCache(this._cache.id,this),this._cache=null),e&&this._ref&&(this._cache=this.context.getTabCache(r,this),this._ref.appendChild(this._cache.div),this.context.updateTabCache(this._cache.id,n))}render(){const{cacheId:e,cached:n,prefixCls:r,forceRender:i,className:o,style:a,id:s,active:l,animated:c,destroyInactiveTabPane:d,tabKey:f,children:h}=this.props;l?this.visited=!0:d&&(this.visited=!1);const v={};l||(c?(v.visibility="hidden",v.height=0,v.overflowY="hidden"):v.display="none");const m=n===!1?l:this.visited;let b=null;n?b=null:(m||i)&&(b=h);let g=n?this.getRef:null;return p.createElement("div",{ref:g,id:e,role:"tabpanel","aria-labelledby":s&&`${s}-tab-${f}`,"aria-hidden":!l,style:Object.assign(Object.assign({},v),a),className:fe(`${r}-tabpane`,l&&`${r}-tabpane-active`,o)},(l||this.visited||i)&&b)}componentDidMount(){this.updateCache()}componentDidUpdate(e,n,r){this.updateCache()}componentWillUnmount(){this._cache&&this.context.removeTabCache(this._cache.id,this)}}Tu.contextType=ut;let xa=new WeakMap;function Ui(t){let e=xa.get(t);return e?Ui(e):t}function Jg(){xa=new WeakMap}function Qe(t,e){let n=Object.assign(Object.assign({},t),e);return Array.isArray(n.tabs)&&(n.tabs=n.tabs.concat()),Array.isArray(n.children)&&(n.children=n.children.concat()),xa.set(t,n),n}function Pu(t,e){return t==null?e:Math.max(t,e)}function _u(t,e){return t==null||t===e?e:t>=1?e<=1?1:Math.min(t,e):e>=1?1:Math.max(t,e)}let Gi=0;function Zg(){return++Gi,`+${Gi}`}let qi=0;function Ca(t){return t===qi?t:++qi}function Qg(t,e,n){if(t.id===e&&n&dt.Panel)return t;if(n&dt.Tab){for(let r of t.tabs)if(r.id===e)return r}return null}function Ar(t,e,n){let r;if(n|dt.Box&&t.id===e)return t;for(let i of t.children)if("children"in i){if(r=Ar(i,e,n))break}else if("tabs"in i&&(r=Qg(i,e,n)))break;return r}var dt;(function(t){t[t.Tab=1]="Tab",t[t.Panel=2]="Panel",t[t.Box=4]="Box",t[t.Docked=8]="Docked",t[t.Floated=16]="Floated",t[t.Windowed=32]="Windowed",t[t.Max=64]="Max",t[t.EveryWhere=120]="EveryWhere",t[t.AnyTab=121]="AnyTab",t[t.AnyPanel=122]="AnyPanel",t[t.AnyTabPanel=123]="AnyTabPanel",t[t.All=127]="All"})(dt||(dt={}));function Sa(t,e,n=dt.AnyTabPanel){let r;return n&dt.Docked&&(r=Ar(t.dockbox,e,n)),r||(n&dt.Floated&&(r=Ar(t.floatbox,e,n)),r)||(n&dt.Windowed&&(r=Ar(t.windowbox,e,n)),r)||n&dt.Max&&(r=Ar(t.maxbox,e,n)),r}function eb(t,e,n,r){let i=n.parent.tabs.indexOf(n);return i>=0?(r==="after-tab"&&++i,Ea(t,e,n.parent,i)):t}function Ea(t,e,n,r=-1){r===-1&&(r=n.tabs.length);let i,o;if("tabs"in e?(i=e.tabs,o=e.activeId):i=[e],i.length){let a=Qe(n);a.tabs.splice(r,0,...i),a.activeId=i[i.length-1].id;for(let s of i)s.parent=a;o&&(a.activeId=o),t=zr(t,n,a)}return t}function Yi(t){if("tabs"in t)return t;{let e={tabs:[t],group:t.group,activeId:t.id};return t.parent=e,e}}function tb(t,e,n,r){let i=n.parent,o=r==="left"||r==="right"?"horizontal":"vertical",a=r==="bottom"||r==="right",s=i.children.indexOf(n);if(s>=0){let l=Qe(i);if(o===i.mode)a&&++s,n.size*=.5,e.size=n.size,l.children.splice(s,0,e);else{let c={mode:o,children:[]};c.size=n.size,a?c.children=[n,e]:c.children=[e,n],n.parent=c,n.size=200,e.parent=c,e.size=200,l.children[s]=c,c.parent=l}return bt(t,i,l)}return t}function Da(t,e,n,r){let i=n.parent,o=r==="left"||r==="right"?"horizontal":"vertical",a=r==="bottom"||r==="right";if(i){let s=i.children.indexOf(n);if(s>=0){let l=Qe(i);if(o===i.mode)a&&++s,e.size=n.size*.3,n.size*=.7,l.children.splice(s,0,e);else{let c={mode:o,children:[]};c.size=n.size,a?c.children=[n,e]:c.children=[e,n],n.parent=c,n.size=280,e.parent=c,e.size=120,l.children[s]=c}return bt(t,i,l)}}else if(n===t.dockbox){let s=Qe(n);if(o===n.mode){let l=0;return a&&(l=s.children.length),e.size=n.size*.3,n.size*=.7,s.children.splice(l,0,e),bt(t,n,s)}else{let l={mode:o,children:[]};return l.size=n.size,a?l.children=[s,e]:l.children=[e,s],s.size=280,e.size=120,bt(t,n,l)}}else if(n===t.maxbox){let s=Qe(n);return s.children.push(e),bt(t,n,s)}return t}function Iu(t,e,n){let r=Qe(t.floatbox);return n&&(e.x=n.left,e.y=n.top,e.w=n.width,e.h=n.height),r.children.push(e),bt(t,t.floatbox,r)}function nb(t,e){let n=Qe(t.windowbox);return n.children.push(e),bt(t,t.windowbox,n)}function Ru(t,e){if(e){let n;if("tabs"in e?(n=e,t=Ma(t,n)):(n=e.parent,t=rb(t,e)),n&&n.parent&&n.parent.mode==="maximize"){let r=t.maxbox.children[0];if(!r||r.tabs.length===0&&!r.panelLock){let i=Sa(t,gi);if(i)return Ma(t,i)}}}return t}function Ma(t,e){let n=e.parent;if(n){let r=n.children.indexOf(e);if(r>=0){let i=Qe(n);return i.children.splice(r,1),bt(t,n,i)}}return t}function rb(t,e){let n=e.parent;if(n){let r=n.tabs.indexOf(e);if(r>=0){let i=Qe(n);return i.tabs.splice(r,1),i.activeId===e.id&&(i.tabs.length>r?i.activeId=i.tabs[r].id:i.tabs.length&&(i.activeId=i.tabs[0].id)),zr(t,n,i)}}return t}function ib(t,e){if(e){let n,r=!1,i={};if("tabs"in e?n=e:(n=e.parent,n.activeId!==e.id&&(i.activeId=e.id,r=!0)),n&&n.parent&&n.parent.mode==="float"){let o=Ca(n.z);o!==n.z&&(i.z=o,r=!0)}r&&(t=zr(t,n,Qe(n,i)))}return t}function ob(t,e){return e?"tabs"in e?e.parent.mode==="maximize"?sb(t,e):ab(t,e):lb(t):t}function ab(t,e){if(t.maxbox.children.length)return t;let r=Object.assign(Object.assign({},e),{id:gi,tabs:[],panelLock:{}});return t=zr(t,e,r),t=Da(t,e,t.maxbox,"middle"),t}function sb(t,e){t=Ma(t,e);let n=Sa(t,gi);if(n){let{x:r,y:i,z:o,w:a,h:s}=n;return e=Object.assign(Object.assign({},e),{x:r,y:i,z:o,w:a,h:s}),zr(t,n,e)}else return Da(t,e,t.dockbox,"right")}function lb(t,e){return t}function Oa(t,e,n){let r=!1;if(t&&t.floatbox&&e>200&&n>200){let i=t.floatbox.children.concat();for(let o=0;o<i.length;++o){let a=i[o],s={};a.w>e&&(s.w=e),a.h>n&&(s.h=n),a.y>n-16?s.y=Math.max(n-16-(a.h>>1),0):a.y<0&&(s.y=0),a.x+a.w<16?s.x=16-(a.w>>1):a.x>e-16&&(s.x=e-16-(a.w>>1)),Object.keys(s).length&&(i[o]=Qe(a,s),r=!0)}if(r){let o=Qe(t.floatbox);return o.children=i,bt(t,t.floatbox,o)}}return t}function Lr(t,e,n){function r(a){if(a.id==null)a.id=Zg();else if(a.id.startsWith("+")){let s=Number(a.id);s>Gi&&(Gi=s)}a.size>=0||(a.size=200),a.minWidth=0,a.minHeight=0,a.widthFlex=null,a.heightFlex=null}function i(a){r(a);let s=!1;if(n)for(let d=0;d<a.tabs.length;++d)a.tabs[d]=n(a.tabs[d]);a.group==null&&a.tabs.length&&(a.group=a.tabs[0].group);let l=e==null?void 0:e[a.group];l&&(l.widthFlex!=null&&(a.widthFlex=l.widthFlex),l.heightFlex!=null&&(a.heightFlex=l.heightFlex));for(let d of a.tabs)d.parent=a,d.id===a.activeId&&(s=!0),d.minWidth>a.minWidth&&(a.minWidth=d.minWidth),d.minHeight>a.minHeight&&(a.minHeight=d.minHeight);!s&&a.tabs.length&&(a.activeId=a.tabs[0].id),a.minWidth<=0&&(a.minWidth=1),a.minHeight<=0&&(a.minHeight=1);let{panelLock:c}=a;return c&&(a.minWidth<c.minWidth&&(a.minWidth=c.minWidth),a.minHeight<c.minHeight&&(a.minHeight=c.minHeight),a.panelLock.widthFlex!=null&&(a.widthFlex=c.widthFlex),a.panelLock.heightFlex!=null&&(a.heightFlex=c.heightFlex)),a.z>qi&&(qi=a.z),a}function o(a){r(a);for(let s=0;s<a.children.length;++s){let l=a.children[s];if(l.parent=a,"children"in l){if(o(l),l.children.length===0)a.children.splice(s,1),--s;else if(l.children.length===1){let c=l.children[0];if(c.mode===a.mode){let d=0;for(let h of c.children)d+=h.size;let f=l.size/d;for(let h of c.children)h.size*=f;a.children.splice(s,1,...c.children)}else c.size=l.size,a.children[s]=c;--s}}else"tabs"in l&&(i(l),l.tabs.length===0&&(l.panelLock?l.group===mi&&(a.children.length>1||a.parent)&&(a.children.splice(s,1),--s):(a.children.splice(s,1),--s)));switch(a.mode){case"horizontal":l.minWidth>0&&(a.minWidth+=l.minWidth),l.minHeight>a.minHeight&&(a.minHeight=l.minHeight),l.widthFlex!=null&&(a.widthFlex=Pu(a.widthFlex,l.widthFlex)),l.heightFlex!=null&&(a.heightFlex=_u(a.heightFlex,l.heightFlex));break;case"vertical":l.minWidth>a.minWidth&&(a.minWidth=l.minWidth),l.minHeight>0&&(a.minHeight+=l.minHeight),l.heightFlex!=null&&(a.heightFlex=Pu(a.heightFlex,l.heightFlex)),l.widthFlex!=null&&(a.widthFlex=_u(a.widthFlex,l.widthFlex));break}}if(a.children.length>1)switch(a.mode){case"horizontal":a.minWidth+=(a.children.length-1)*4;break;case"vertical":a.minHeight+=(a.children.length-1)*4;break}return a}if(t.floatbox?t.floatbox.mode="float":t.floatbox={mode:"float",children:[],size:1},t.windowbox?t.windowbox.mode="window":t.windowbox={mode:"window",children:[],size:1},t.maxbox?t.maxbox.mode="maximize":t.maxbox={mode:"maximize",children:[],size:1},o(t.dockbox),o(t.floatbox),o(t.windowbox),o(t.maxbox),t.dockbox.children.length===0){let a={id:"+0",group:mi,panelLock:{},size:200,tabs:[]};a.parent=t.dockbox,t.dockbox.children.push(a)}else for(;t.dockbox.children.length===1&&"children"in t.dockbox.children[0];){let a=Qe(t.dockbox.children[0]);t.dockbox=a;for(let s of a.children)s.parent=a}return t.dockbox.parent=null,t.floatbox.parent=null,t.windowbox.parent=null,t.maxbox.parent=null,Jg(),t}function zr(t,e,n){for(let i of n.tabs)i.parent=n;let r=e.parent;if(r){let i=r.children.indexOf(e);if(i>=0){let o=Qe(r);return o.children[i]=n,bt(t,r,o)}}return t}function bt(t,e,n){for(let i of n.children)i.parent=n;let r=e.parent;if(r){let i=r.children.indexOf(e);if(i>=0){let o=Qe(r);return o.children[i]=n,bt(t,r,o)}}else{if(e.id===t.dockbox.id||e===t.dockbox)return Object.assign(Object.assign({},t),{dockbox:n});if(e.id===t.floatbox.id||e===t.floatbox)return Object.assign(Object.assign({},t),{floatbox:n});if(e.id===t.windowbox.id||e===t.windowbox)return Object.assign(Object.assign({},t),{windowbox:n});if(e.id===t.maxbox.id||e===t.maxbox)return Object.assign(Object.assign({},t),{maxbox:n})}return t}function ku(t,e){if(!t)return[300,300];let n=t.offsetWidth,r=t.offsetHeight,[i,o]=e.preferredFloatWidth||[100,600],[a,s]=e.preferredFloatHeight||[50,500];return n>=i?n<=o||(n=o):n=i,r>=a?r<=s||(r=s):r=a,[n,r]}function cb(t,e,n){let r=-1,i=-1,o=0;switch(n){case"ArrowUp":{r=t.top-e.bottom+t.height,i=Math.min(t.right,e.right)-Math.max(t.left,e.left);break}case"ArrowDown":{r=e.top-t.bottom+t.height,i=Math.min(t.right,e.right)-Math.max(t.left,e.left);break}case"ArrowLeft":{r=t.left-e.right+t.width,i=Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top),o=Math.abs(t.top-e.top);break}case"ArrowRight":{r=e.left-t.right+t.width,i=Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top),o=Math.abs(t.top-e.top);break}}return r<0||i<=0?-1:r*(o+1)-i*.001}const ub={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Nu={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},_e={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},et={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},tn={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class B{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5)){if(n[0]===1&&n[1]<6)return"Cupcake";if(n[0]===1&&n[1]>=6)return"Donut";if(n[0]===2&&n[1]<2)return"Eclair";if(n[0]===2&&n[1]===2)return"Froyo";if(n[0]===2&&n[1]>2)return"Gingerbread";if(n[0]===3)return"Honeycomb";if(n[0]===4&&n[1]<1)return"Ice Cream Sandwich";if(n[0]===4&&n[1]<4)return"Jelly Bean";if(n[0]===4&&n[1]>=4)return"KitKat";if(n[0]===5)return"Lollipop";if(n[0]===6)return"Marshmallow";if(n[0]===7)return"Nougat";if(n[0]===8)return"Oreo";if(n[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const i=B.getVersionPrecision(e),o=B.getVersionPrecision(n);let a=Math.max(i,o),s=0;const l=B.map([e,n],c=>{const d=a-B.getVersionPrecision(c),f=c+new Array(d+1).join(".0");return B.map(f.split("."),h=>new Array(20-h.length).join("0")+h).reverse()});for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(l[0][a]>l[1][a])return 1;if(l[0][a]===l[1][a]){if(a===s)return 0;a-=1}else if(l[0][a]<l[1][a])return-1}}static map(e,n){const r=[];let i;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(i=0;i<e.length;i+=1)r.push(n(e[i]));return r}static find(e,n){let r,i;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,i=e.length;r<i;r+=1){const o=e[r];if(n(o,r))return o}}static assign(e,...n){const r=e;let i,o;if(Object.assign)return Object.assign(e,...n);for(i=0,o=n.length;i<o;i+=1){const a=n[i];typeof a=="object"&&a!==null&&Object.keys(a).forEach(l=>{r[l]=a[l]})}return e}static getBrowserAlias(e){return ub[e]}static getBrowserTypeByAlias(e){return Nu[e]||""}}const ye=/version\/(\d+(\.?_?\d+)+)/i,db=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=B.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=B.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=B.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=B.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=B.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=B.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=B.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=B.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=B.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=B.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=B.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=B.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=B.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=B.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=B.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=B.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=B.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=B.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=B.getFirstMatch(ye,t)||B.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=B.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=B.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=B.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=B.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=B.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=B.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=B.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=B.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=B.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=B.getFirstMatch(ye,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=/^(.*)\/(.*) /,n=/^(.*)\/(.*)[ \t]\((.*)/,i=t.search("\\(")!==-1?n:e;return{name:B.getFirstMatch(i,t),version:B.getSecondMatch(i,t)}}}];var fb=[{test:[/Roku\/DVP/],describe(t){const e=B.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:et.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=B.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:et.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=B.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=B.getWindowsVersionName(e);return{name:et.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:et.iOS},n=B.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=B.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=B.getMacOSVersionName(e),r={name:et.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=B.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:et.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=B.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=B.getAndroidVersionName(e),r={name:et.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=B.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:et.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=B.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||B.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||B.getFirstMatch(/\bbb(\d+)/i,t);return{name:et.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=B.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:et.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=B.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:et.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:et.Linux}}},{test:[/CrOS/],describe(){return{name:et.ChromeOS}}},{test:[/PlayStation 4/],describe(t){const e=B.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:et.PlayStation4,version:e}}}],pb=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(t){const e=B.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:_e.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:_e.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:_e.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:_e.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:_e.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:_e.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:_e.tablet}}},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=B.getFirstMatch(/(ipod|iphone)/i,t);return{type:_e.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:_e.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:_e.mobile}}},{test(t){return t.getBrowserName(!0)==="blackberry"},describe(){return{type:_e.mobile,vendor:"BlackBerry"}}},{test(t){return t.getBrowserName(!0)==="bada"},describe(){return{type:_e.mobile}}},{test(t){return t.getBrowserName()==="windows phone"},describe(){return{type:_e.mobile,vendor:"Microsoft"}}},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe(){return{type:_e.tablet}}},{test(t){return t.getOSName(!0)==="android"},describe(){return{type:_e.mobile}}},{test(t){return t.getOSName(!0)==="macos"},describe(){return{type:_e.desktop,vendor:"Apple"}}},{test(t){return t.getOSName(!0)==="windows"},describe(){return{type:_e.desktop}}},{test(t){return t.getOSName(!0)==="linux"},describe(){return{type:_e.desktop}}},{test(t){return t.getOSName(!0)==="playstation 4"},describe(){return{type:_e.tv}}},{test(t){return t.getOSName(!0)==="roku"},describe(){return{type:_e.tv}}}],hb=[{test(t){return t.getBrowserName(!0)==="microsoft edge"},describe(t){if(/\sedg\//i.test(t))return{name:tn.Blink};const n=B.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:tn.EdgeHTML,version:n}}},{test:[/trident/i],describe(t){const e={name:tn.Trident},n=B.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){return t.test(/presto/i)},describe(t){const e={name:tn.Presto},n=B.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:tn.Gecko},n=B.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:tn.Blink}}},{test:[/(apple)?webkit/i],describe(t){const e={name:tn.WebKit},n=B.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class Au{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=B.find(db,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=B.find(fb,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=B.find(pb,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=B.find(hb,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return B.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const i={};let o=0;if(Object.keys(e).forEach(s=>{const l=e[s];typeof l=="string"?(i[s]=l,o+=1):typeof l=="object"&&(n[s]=l,r+=1)}),r>0){const s=Object.keys(n),l=B.find(s,d=>this.isOS(d));if(l){const d=this.satisfies(n[l]);if(d!==void 0)return d}const c=B.find(s,d=>this.isPlatform(d));if(c){const d=this.satisfies(n[c]);if(d!==void 0)return d}}if(o>0){const s=Object.keys(i),l=B.find(s,c=>this.isBrowser(c,!0));if(l!==void 0)return this.compareVersion(i[l])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let i=e.toLowerCase();const o=B.getBrowserTypeByAlias(i);return n&&o&&(i=o.toLowerCase()),i===r}compareVersion(e){let n=[0],r=e,i=!1;const o=this.getBrowserVersion();if(typeof o=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(i=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(i=!0,r=e.substr(1)),n.indexOf(B.compareVersions(o,r,i))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Lu{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new Au(e,n)}static parse(e){return new Au(e).getResult()}static get BROWSER_MAP(){return Nu}static get ENGINE_MAP(){return tn}static get OS_MAP(){return et}static get PLATFORMS_MAP(){return _e}}var vb=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Lu});const yt=typeof window=="object"&&Lu.getParser(window.navigator.userAgent);function mb(){switch(yt==null?void 0:yt.getOSName(!0)){case"windows":{let t;switch(yt.getBrowserName(!0)){case"firefox":t=[68,8,8];break;case"microsoft edge":t=[62,8,8];break;default:t=[60,8,8]}return window.devicePixelRatio>1&&(t[0]-=2,t[1]-=1,t[2]-=1),t}case"macos":switch(yt.getBrowserName(!0)){case"safari":return[22,0,0];case"firefox":return[59,0,0];default:return[51,0,0]}}return[60,8,8]}const zu=(yt==null?void 0:yt.getBrowserName(!0))==="safari",gb=(yt==null?void 0:yt.getPlatformType())==="desktop",Fu=mb(),bb=ds(()=>{let t=document.createElement("div");document.body.append(t),t.remove()},200);class Ta extends p.PureComponent{constructor(e){super(e);this.released=!1,this.container=document.createElement("div"),this.state={mounted:!1},this.onMainWindowUnload=()=>{this.window&&this.window.close()},this.release=n=>{if(!this.released&&(this.released=!0,this.windowCheckerInterval&&(clearInterval(this.windowCheckerInterval),this.windowCheckerInterval=null),window.removeEventListener("beforeunload",this.onMainWindowUnload),this.window.removeEventListener("beforeunload",this.release),n)){const{onClose:r}=this.props;typeof r=="function"&&r()}}}render(){return this.state.mounted?On.createPortal(this.props.children,this.container):null}componentDidMount(){this.openChild(),this.setState({mounted:!0})}openChild(){const{url:e,title:n,name:r,width:i,height:o,initPopupInnerRect:a,initPopupOuterRect:s,onBlock:l,onOpen:c,onClose:d}=this.props;let f={width:i,height:o};if(s){f=s();const[h,v,m]=Fu;zu||(f.width-=v*2,f.height-=h+m)}else if(a){f=a();const[h,v]=Fu;f.left-=v,f.top-=h,zu&&(f.height+=h)}else f.left=window.top.outerWidth/2+window.top.screenX-i/2,f.top=window.top.outerHeight/2+window.top.screenY-o/2;this.window=window.open(e,r,wb(f)),this.window?(window.addEventListener("beforeunload",this.onMainWindowUnload),this.window.addEventListener("resize",bb),this.window.document.title=n||document.title,this.window.document.body.appendChild(this.container),this.props.copyStyles&&setTimeout(()=>yb(document,this.window.document),0),typeof c=="function"&&c(this.window),e&&d&&(this.windowCheckerInterval=setInterval(()=>{(!this.window||this.window.closed)&&this.release(!0)},50)),this.window.addEventListener("beforeunload",this.release)):typeof l=="function"?l():console.warn("A new window could not be opened. Maybe it was blocked.")}componentWillUnmount(){this.window&&(this.release(),this.window.close())}}Ta.supported=gb;Ta.defaultProps={url:"",name:"",width:640,height:480,copyStyles:!0};function yb(t,e){Array.from(t.styleSheets).forEach(n=>{let r;if(n.href){const i=t.createElement("link");i.rel="stylesheet",i.href=n.href,e.head.appendChild(i)}else{try{r=n.cssRules}catch(i){}if(r){const i=t.createElement("style");Array.from(n.cssRules).forEach(o=>{const{cssText:a,type:s}=o;let l=a;[3,5].includes(s)&&(l=a.split("url(").map(c=>c[1]==="/"?`${c.slice(0,1)}${window.location.origin}${c.slice(1)}`:c).join("url(")),i.appendChild(t.createTextNode(l))}),e.head.appendChild(i)}}})}function wb(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return typeof r=="boolean"?e.push(`${n}=${r?"yes":"no"}`):e.push(`${n}=${r}`),e},[]).join(",")}class mn extends p.PureComponent{constructor(){super(...arguments);this.state={dropping:!1},this.onDragOver=e=>{let{panelElement:n,direction:r,depth:i,panelData:o}=this.props;this.setState({dropping:!0});for(let a=0;a<i;++a)n=n.parentElement;if(o.group===mi&&r!=="float")this.context.setDropRect(n,"middle",this,e);else{let a=this.context.getDockId(),s=Pe.getData("panelSize",a);this.context.setDropRect(n,r,this,e,s)}e.accept("")},this.onDragLeave=e=>{this.props,this.setState({dropping:!1}),this.context.setDropRect(null,"remove",this)},this.onDrop=e=>{let n=this.context.getDockId(),r=Pe.getData("tab",n);if(r||(r=Pe.getData("panel",n)),r){let{panelData:i,direction:o,depth:a}=this.props,s=i;for(let l=0;l<a;++l)s=s.parent;this.context.dockMove(r,s,o)}}}render(){let{direction:e,depth:n}=this.props,{dropping:r}=this.state,i=["dock-drop-square"];return i.push(`dock-drop-${e}`),n&&i.push("dock-drop-deep"),r&&i.push("dock-drop-square-dropping"),p.createElement(Nt,{className:i.join(" "),onDragOverT:this.onDragOver,onDragLeaveT:this.onDragLeave,onDropT:this.onDrop},p.createElement("div",{className:"dock-drop-square-box"}))}componentWillUnmount(){this.context.setDropRect(null,"remove",this)}}mn.contextType=ut;class gn extends p.PureComponent{static addDepthSquare(e,n,r,i,o){n==="horizontal"?(e.push(p.createElement(mn,{key:`top${o}`,direction:"top",depth:o,panelData:r,panelElement:i})),e.push(p.createElement(mn,{key:`bottom${o}`,direction:"bottom",depth:o,panelData:r,panelElement:i}))):(e.push(p.createElement(mn,{key:`left${o}`,direction:"left",depth:o,panelData:r,panelElement:i})),e.push(p.createElement(mn,{key:`right${o}`,direction:"right",depth:o,panelData:r,panelElement:i})))}render(){var e;let{panelData:n,panelElement:r,dropFromPanel:i}=this.props,o=this.context.getDockId(),a=[],s=Pe.getData("panel",o),l=this.context.getGroup(i.group);if(l.floatable!==!1&&(!s||!s.panelLock&&((e=s.parent)===null||e===void 0?void 0:e.mode)!=="float")&&a.push(p.createElement(mn,{key:"float",direction:"float",panelData:n,panelElement:r})),s!==n&&!l.disableDock){gn.addDepthSquare(a,"horizontal",n,r,0),gn.addDepthSquare(a,"vertical",n,r,0),!(s==null?void 0:s.panelLock)&&n.group===i.group&&n!==i&&a.push(p.createElement(mn,{key:"middle",direction:"middle",panelData:n,panelElement:r}));let c=n.parent;c&&c.children.length>1&&(gn.addDepthSquare(a,c.mode,n,r,1),c.parent&&gn.addDepthSquare(a,c.parent.mode,n,r,2))}return p.createElement("div",{className:"dock-drop-layer"},a)}}gn.contextType=ut;class Bu extends p.PureComponent{constructor(){super(...arguments);this.getRef=e=>{this._ref=e},this.onDragOver=e=>{var n;let{panelData:r,panelElement:i,dropFromPanel:o}=this.props,a=this.context.getDockId(),s=Pe.getData("panel",a),l=this.context.getGroup(o.group);if(s&&((n=s.parent)===null||n===void 0?void 0:n.mode)==="float")return;let{direction:c,mode:d,depth:f}=this.getDirection(e,l,s===r);if(f=this.getActualDepth(f,d,c),!c||c==="float"&&o.panelLock){this.context.setDropRect(null,"remove",this);return}let h=i;for(let m=0;m<f;++m)h=h.parentElement;let v=Pe.getData("panelSize",a);this.context.setDropRect(h,c,this,e,v),e.accept("")},this.onDragLeave=e=>{this.context.setDropRect(null,"remove",this)},this.onDrop=e=>{let{panelData:n,dropFromPanel:r}=this.props,i=this.context.getDockId(),o=this.context.getGroup(r.group),a=Pe.getData("tab",i),s=Pe.getData("panel",i);if(a||(a=s),a){let{direction:l,mode:c,depth:d}=this.getDirection(e,o,s===n);if(d=this.getActualDepth(d,c,l),!l)return;let f=n;for(let h=0;h<d;++h)f=f.parent;this.context.dockMove(a,f,l)}}}getDirection(e,n,r){let i=this._ref.getBoundingClientRect(),o=Math.min(i.width,500),a=Math.min(i.height,500),s=(e.clientX-i.left)/o,l=(i.right-e.clientX)/o,c=(e.clientY-i.top)/a,d=(i.bottom-e.clientY)/a,f=Math.min(s,l,c,d),h=0;if((n.disableDock||r)&&(f=1),f<0)return{direction:null,depth:0};if(f<.075)h=3;else if(f<.15)h=1;else if(!(f<.3)){if(n.floatable)return{direction:"float",mode:"float",depth:0}}switch(f){case s:return{direction:"left",mode:"horizontal",depth:h};case l:return{direction:"right",mode:"horizontal",depth:h};case c:return{direction:"top",mode:"vertical",depth:h};case d:return{direction:"bottom",mode:"vertical",depth:h}}return{direction:null,depth:0}}getActualDepth(e,n,r){let i=r==="bottom"||r==="right";if(!e)return e;let{panelData:o}=this.props,a=o,s=o.parent,l=0;for(o.parent.mode===n&&++e;s&&l<e;){if(s.mode===n){if(i){if(s.children[s.children.length-1]!==a)break}else if(s.children[0]!==a)break}a=s,s=s.parent,++l}for(;e>l;)e-=2;return e}render(){return p.createElement(Nt,{getRef:this.getRef,className:"dock-drop-edge",onDragOverT:this.onDragOver,onDragLeaveT:this.onDragLeave,onDropT:this.onDrop})}componentWillUnmount(){this.context.setDropRect(null,"remove",this)}}Bu.contextType=ut;class Ge extends p.PureComponent{constructor(){super(...arguments);this.getRef=e=>{this._ref=e},this.state={dropFromPanel:null,draggingHeader:!1},this.onDragOver=e=>{if(Ge._droppingPanel===this)return;this.props;let n=this.context.getDockId(),r=Pe.getData("tab",n),i=Pe.getData("panel",n);(r||i)&&(Ge.droppingPanel=this),r?r.parent?this.setState({dropFromPanel:r.parent}):this.setState({dropFromPanel:{activeId:"",tabs:[],group:r.group}}):i&&this.setState({dropFromPanel:i})},this.onPanelHeaderDragStart=e=>{let{panelData:n}=this.props,{parent:r,x:i,y:o,z:a}=n,s=this.context.getDockId();if(r&&r.mode==="float")this._movingX=i,this._movingY=o,e.setData({panel:this.props.panelData},s),e.startDrag(null,null),this.onFloatPointerDown();else{let l=this.context.getGroup(n.group),[c,d]=ku(this._ref,l);e.setData({panel:n,panelSize:[c,d]},s),e.startDrag(null)}this.setState({draggingHeader:!0})},this.onPanelHeaderDragMove=e=>{let{width:n,height:r}=this.context.getLayoutSize(),{panelData:i}=this.props;i.x=this._movingX+e.dx,i.y=this._movingY+e.dy,n>200&&r>200&&(i.y<0?i.y=0:i.y>r-16&&(i.y=r-16),i.x+i.w<16?i.x=16-i.w:i.x>n-16&&(i.x=n-16)),this.forceUpdate()},this.onPanelHeaderDragEnd=e=>{this._unmounted||(this.setState({draggingHeader:!1}),this.context.onSilentChange(this.props.panelData.activeId,"move"))},this.onPanelCornerDragTL=e=>{this.onPanelCornerDrag(e,"tl")},this.onPanelCornerDragTR=e=>{this.onPanelCornerDrag(e,"tr")},this.onPanelCornerDragBL=e=>{this.onPanelCornerDrag(e,"bl")},this.onPanelCornerDragBR=e=>{this.onPanelCornerDrag(e,"br")},this.onPanelCornerDragMove=e=>{let{panelData:n}=this.props,{dx:r,dy:i}=e;if(this._movingCorner.startsWith("t")){let{width:o,height:a}=this.context.getLayoutSize();this._movingY+i<0?i=-this._movingY:this._movingY+i>a-16&&(i=a-16-this._movingY)}switch(this._movingCorner){case"tl":{n.x=this._movingX+r,n.w=this._movingW-r,n.y=this._movingY+i,n.h=this._movingH-i;break}case"tr":{n.w=this._movingW+r,n.y=this._movingY+i,n.h=this._movingH-i;break}case"bl":{n.x=this._movingX+r,n.w=this._movingW-r,n.h=this._movingH+i;break}case"br":{n.w=this._movingW+r,n.h=this._movingH+i;break}}this.forceUpdate()},this.onPanelCornerDragEnd=e=>{this.context.onSilentChange(this.props.panelData.activeId,"move")},this.onFloatPointerDown=()=>{let{panelData:e}=this.props,{z:n}=e,r=Ca(n);r!==n&&(e.z=r,this.forceUpdate())},this.onPanelClicked=e=>{const n=e.nativeEvent.target;!this._ref.contains(this._ref.ownerDocument.activeElement)&&n instanceof Node&&this._ref.contains(n)&&this._ref.querySelector(".dock-bar").focus()},this._unmounted=!1}static set droppingPanel(e){Ge._droppingPanel!==e&&(Ge._droppingPanel&&Ge._droppingPanel.onDragOverOtherPanel(),Ge._droppingPanel=e)}onDragOverOtherPanel(){this.state.dropFromPanel&&this.setState({dropFromPanel:null})}onPanelCornerDrag(e,n){let{parent:r,x:i,y:o,w:a,h:s}=this.props.panelData;r&&r.mode==="float"&&(this._movingCorner=n,this._movingX=i,this._movingY=o,this._movingW=a,this._movingH=s,e.startDrag(null,null))}render(){let{dropFromPanel:e,draggingHeader:n}=this.state,{panelData:r,size:i}=this.props,{minWidth:o,minHeight:a,group:s,id:l,parent:c,panelLock:d}=r,f=s,h=this.context.getGroup(s),{widthFlex:v,heightFlex:m}=h;if(d){let{panelStyle:O,widthFlex:j,heightFlex:N}=d;O&&(f=O),typeof j=="number"&&(v=j),typeof N=="number"&&(m=N)}let b;f&&(b=f.split(" ").map(O=>`dock-style-${O}`).join(" "));let g=(c==null?void 0:c.mode)==="maximize",w=(c==null?void 0:c.mode)==="float",D=(c==null?void 0:c.mode)==="horizontal",E=(c==null?void 0:c.mode)==="vertical",y=this.onFloatPointerDown,S=this.onPanelHeaderDragStart;(!w||g)&&(y=null),g&&(e=null,S=null);let x=`dock-panel ${b||""}${e?" dock-panel-dropping":""}${n?" dragging":""}`,I=1;D&&v!=null?I=v:E&&m!=null&&(I=m);let _=I*i,F=I*1e6;F<1&&(F=1);let R={minWidth:o,minHeight:a,flex:`${_} ${F} ${i}px`};w&&(R.left=r.x,R.top=r.y,R.width=r.w,R.height=r.h,R.zIndex=r.z);let P;if(e){let O=this.context.getGroup(e.group),j=this.context.getDockId();if(!O.tabLocked||Pe.getData("tab",j)==null){let N=this.context.useEdgeDrop()?Bu:gn;P=p.createElement(N,{panelData:r,panelElement:this._ref,dropFromPanel:e})}}return p.createElement(Nt,{getRef:this.getRef,className:x,style:R,"data-dockid":l,onMouseDownCapture:y,onTouchStartCapture:y,onDragOverT:w?null:this.onDragOver,onClick:this.onPanelClicked},p.createElement(Ia,{panelData:r,onPanelDragStart:S,onPanelDragMove:this.onPanelHeaderDragMove,onPanelDragEnd:this.onPanelHeaderDragEnd}),w?[p.createElement(Nt,{key:"drag-size-t-l",className:"dock-panel-drag-size dock-panel-drag-size-t-l",onDragStartT:this.onPanelCornerDragTL,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),p.createElement(Nt,{key:"drag-size-t-r",className:"dock-panel-drag-size dock-panel-drag-size-t-r",onDragStartT:this.onPanelCornerDragTR,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),p.createElement(Nt,{key:"drag-size-b-l",className:"dock-panel-drag-size dock-panel-drag-size-b-l",onDragStartT:this.onPanelCornerDragBL,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd}),p.createElement(Nt,{key:"drag-size-b-r",className:"dock-panel-drag-size dock-panel-drag-size-b-r",onDragStartT:this.onPanelCornerDragBR,onDragMoveT:this.onPanelCornerDragMove,onDragEndT:this.onPanelCornerDragEnd})]:null,P)}componentWillUnmount(){Ge._droppingPanel===this&&(Ge.droppingPanel=null),this._unmounted=!0}}Ge.contextType=ut;var Gt={},At={},xb=ss(vb),Cb=ls&&ls.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(At,"__esModule",{value:!0});At.popupWindowBorder=At.popupSupported=At.isSafari=At.gerWindowBorder=void 0;const Sb=Cb(xb),wt=typeof window=="object"&&Sb.default.getParser(window.navigator.userAgent);function ju(){switch(wt==null?void 0:wt.getOSName(!0)){case"windows":{let t;switch(wt.getBrowserName(!0)){case"firefox":t=[68,8,8];break;case"microsoft edge":t=[62,8,8];break;default:t=[60,8,8]}return window.devicePixelRatio>1&&(t[0]-=2,t[1]-=1,t[2]-=1),t}case"macos":switch(wt.getBrowserName(!0)){case"safari":return[22,0,0];case"firefox":return[59,0,0];default:return[51,0,0]}}return[60,8,8]}At.gerWindowBorder=ju;At.isSafari=(wt==null?void 0:wt.getBrowserName(!0))==="safari";At.popupSupported=(wt==null?void 0:wt.getPlatformType())==="desktop";At.popupWindowBorder=ju();Object.defineProperty(Gt,"__esModule",{value:!0});var Wu=Gt.mapWindowToElement=Uu=Gt.mapElementToScreenRect=Gt.estimateWindowBorder=Gt.estimateBrowserZoom=void 0;const Hu=At;function $u(t){let[e,n,r]=Hu.gerWindowBorder();t.outerWidth===t.screen.availWidth&&(n=0,r=0);let i=(t.outerWidth-n*2)/t.innerWidth,o=(t.outerHeight-e-r)/t.innerHeight,a=Math.min(o,i);return a>1.8?a=Math.round(a):a>.73?a=Math.round(a*20)/20:a=2/Math.round(2/a),a}Gt.estimateBrowserZoom=$u;function Pa(t,e=!1){let n=t?$u(t):1,r=t.outerWidth-t.innerWidth*n>>1,i=Math.round(t.outerHeight-t.innerHeight*n);return r>32?r=8:i-=r,[r,i,n]}Gt.estimateWindowBorder=Pa;class Ku{init(e,n,r,i,o,a,s,l){this.scaleX=s/r,this.scaleY=l/i,this.offsetX=o-e*this.scaleX,this.offsetY=a-n*this.scaleY}map(e){return{x:e.x*this.scaleX+this.offsetX,y:e.y*this.scaleY+this.offsetY}}revertMap(e){return{x:(e.x-this.offsetX)/this.scaleX,y:(e.y-this.offsetY)/this.scaleY}}}function Vu(t,e){if(!t)return null;let n=t.getBoundingClientRect(),r=new Ku;r.init(0,0,t.offsetWidth,t.offsetHeight,n.x,n.y,n.width,n.height);let i;if(e){let{x:d,y:f}=r.map({x:e.left,y:e.top}),{x:h,y:v}=r.map({x:e.left+e.width,y:e.top+e.height});i={left:d,top:f,width:h-d,height:v-f}}else i={left:n.left,top:n.top,width:n.width,height:n.height};let a=t.ownerDocument.defaultView;if(!a)return n;if(a.frameElement)return Vu(a.frameElement,i);let[s,l,c]=Pa(a);return c!==1&&(i.left*=c,i.top*=c,i.width*=c,i.height*=c),i.left+=a.screenX+s,i.top+=a.screenY+l,i}var Uu=Gt.mapElementToScreenRect=Vu;function Gu(t,e,n,r=!0){if(!t)return null;if(e){if(n={left:e.screenX,top:e.screenY,width:e.outerWidth,height:e.outerHeight},r){const[v,m,b]=Hu.popupWindowBorder;n.left+=m,n.top+=v,n.width-=m*2,n.height-=v+b}}else if(!n)return null;let o=t.ownerDocument.defaultView;if(!o)return n;if(o.frameElement)n=Gu(o.frameElement,null,n);else{let[v,m,b]=Pa(o);n.left-=o.screenX+v,n.top-=o.screenY+m,b!==1&&(n.left/=b,n.top/=b,n.width/=b,n.height/=b)}let a=t.getBoundingClientRect(),s=new Ku;s.init(0,0,t.offsetWidth,t.offsetHeight,a.x,a.y,a.width,a.height);let l,{x:c,y:d}=s.revertMap({x:n.left,y:n.top}),{x:f,y:h}=s.revertMap({x:n.left+n.width,y:n.top+n.height});return l={left:c,top:d,width:f-c,height:h-d},l}Wu=Gt.mapWindowToElement=Gu;class qu extends p.PureComponent{constructor(){super(...arguments);this.onOpen=e=>{!this._window&&e&&(this._window=e)},this.onUnload=()=>{let{panelData:e}=this.props,n=this.context.getRootElement();const r=Wu(n,this._window);r.width>0&&r.height>0&&(e.x=r.left,e.y=r.top,e.w=r.width,e.h=r.height),this.context.dockMove(e,null,"float")},this.initPopupInnerRect=()=>{let{panelData:e}=this.props;return Uu(this.context.getRootElement(),{left:e.x,top:e.y,width:e.w,height:e.h})}}render(){let{panelData:e}=this.props,{x:n,y:r,w:i,h:o}=e;return p.createElement(Ta,{copyStyles:!0,onOpen:this.onOpen,onClose:this.onUnload,onBlock:this.onUnload,initPopupInnerRect:this.initPopupInnerRect,width:i,height:o},p.createElement("div",{className:"dock-wbox"},p.createElement(Ge,{size:e.size,panelData:e,key:e.id})))}}qu.contextType=ut;class _a extends p.PureComponent{render(){let{children:e}=this.props.boxData,n=[];for(let r of e)"tabs"in r&&n.push(p.createElement(qu,{key:r.id,panelData:r}));return p.createElement(p.Fragment,null,n)}}_a.enabled=typeof window=="object"&&((window==null?void 0:window.navigator.platform)==="Win32"||(window==null?void 0:window.navigator.platform)==="MacIntel");function Eb(t){for(let e=0;e<10;++e){if(!t)return null;if(t.classList.contains("dock-panel"))return t;t=t.parentElement}return null}function Yu(t){var e,n;return t==null||((e=t.parentElement)===null||e===void 0?void 0:e.tagName)==="LI"||((n=t.parentElement)===null||n===void 0?void 0:n.parentElement.tagName)==="LI"}class Db{constructor(e){this.getRef=n=>{Yu(n)||(this._ref=n)},this.getHitAreaRef=n=>{Yu(n)||(this._hitAreaRef=n)},this.onCloseClick=n=>{this.context.dockMove(this.data,null,"remove"),n.stopPropagation()},this.onDragStart=n=>{let r=this.data.parent;if(r.parent.mode==="float"&&r.tabs.length===1)return;let i=Eb(this._ref),o=this.context.getGroup(this.data.group),[a,s]=ku(i,o);n.setData({tab:this.data,panelSize:[a,s]},this.context.getDockId()),n.startDrag(this._ref.parentElement,this._ref.parentElement)},this.onDragOver=n=>{let r=this.context.getDockId(),i=Pe.getData("tab",r),o=Pe.getData("panel",r),a;if(i)o=i.parent,a=i.group;else{if(!o)return;if(o==null?void 0:o.panelLock){n.reject();return}a=o.group}if(a!==this.data.group)n.reject();else if(i&&i!==this.data){let s=this.getDropDirection(n);this.context.setDropRect(this._hitAreaRef,s,this),n.accept("")}else if(o&&o!==this.data.parent){let s=this.getDropDirection(n);this.context.setDropRect(this._hitAreaRef,s,this),n.accept("")}},this.onDragLeave=n=>{this.context.setDropRect(null,"remove",this)},this.onDrop=n=>{let r=this.context.getDockId(),i,o=Pe.getData("tab",r);if(o?i=o.parent:i=Pe.getData("panel",r),o&&o!==this.data){let a=this.getDropDirection(n);this.context.dockMove(o,this.data,a)}else if(i&&i!==this.data.parent){let a=this.getDropDirection(n);this.context.dockMove(i,this.data,a)}},this.context=e}setData(e){return e!==this.data?(this.data=e,this.content=this.render(),!0):!1}getDropDirection(e){let n=this._hitAreaRef.getBoundingClientRect(),r=n.left+n.width*.5;return e.clientX>r?"after-tab":"before-tab"}render(){let{id:e,title:n,group:r,content:i,closable:o,cached:a,parent:s}=this.data,{onDragStart:l,onDragOver:c,onDrop:d,onDragLeave:f}=this;s.parent.mode==="window"&&(l=null,c=null,d=null,f=null),this.context.getGroup(r),typeof i=="function"&&(i=i(this.data));let h=p.createElement(Nt,{getRef:this.getRef,onDragStartT:l,onDragOverT:c,onDropT:d,onDragLeaveT:f},n,o?p.createElement("div",{className:"dock-tab-close-btn",onClick:this.onCloseClick}):null,p.createElement("div",{className:"dock-tab-hit-area",ref:this.getHitAreaRef}));return p.createElement(Tu,{key:e,cacheId:e,cached:a,tab:h},i)}destroy(){}}class Ia extends p.PureComponent{constructor(){super(...arguments);this._cache=new Map,this.onMaximizeClick=e=>{let{panelData:n}=this.props;this.context.dockMove(n,null,"maximize"),e.stopPropagation()},this.onNewWindowClick=()=>{let{panelData:e}=this.props;this.context.dockMove(e,null,"new-window")},this.renderTabBar=(e,n)=>{let{panelData:r,onPanelDragStart:i,onPanelDragMove:o,onPanelDragEnd:a}=this.props,{group:s,panelLock:l}=r,c=this.context.getGroup(s),{panelExtra:d}=c,f=c.maximizable;r.parent.mode==="window"&&(i=null,f=!1),l&&l.panelExtra&&(d=l.panelExtra);let h=c.newWindow&&_a.enabled&&r.parent.mode==="float",v;return d?v=d(r,this.context):(f||h)&&(v=p.createElement("div",{className:"dock-panel-max-btn",onClick:f?this.onMaximizeClick:null}),h&&(v=this.addNewWindowMenu(v,!f))),p.createElement(Xg,Object.assign({onDragStart:i,onDragMove:o,onDragEnd:a,TabNavList:n,isMaximized:r.parent.mode==="maximize"},e,{extra:v}))},this.onTabChange=e=>{this.props.panelData.activeId=e,this.context.onSilentChange(e,"active"),this.forceUpdate()}}updateTabs(e){if(e===this.cachedTabs)return;this.cachedTabs=e;let n=new Map,r=0;for(let i of e){let{id:o}=i;if(this._cache.has(o)){let a=this._cache.get(o);n.set(o,a),a.setData(i),++r}else{let a=new Db(this.context);n.set(o,a),a.setData(i)}}if(r!==this._cache.size)for(let[i,o]of this._cache)n.has(i)||o.destroy();this._cache=n}addNewWindowMenu(e,n){const r=p.createElement(Su,{onClick:this.onNewWindowClick},p.createElement(jg,null,"New Window"));let i=n?["contextMenu","click"]:["contextMenu"];return p.createElement(Gc,{prefixCls:"dock-dropdown",overlay:r,trigger:i,mouseEnterDelay:.1,mouseLeaveDelay:.1},e)}render(){let{group:e,tabs:n,activeId:r}=this.props.panelData,i=this.context.getGroup(e),{animated:o}=i;o==null&&(o=!0),this.updateTabs(n);let a=[];for(let[s,l]of this._cache)a.push(l.content);return p.createElement(tu,{prefixCls:"dock",moreIcon:"...",animated:o,renderTabBar:this.renderTabBar,activeKey:r,onChange:this.onTabChange},a)}}Ia.contextType=ut;Ia.propKeys=["group","tabs","activeId","onTabChange"];class Mb{constructor(e){this.beforeSize=0,this.beforeMinSize=0,this.afterSize=0,this.afterMinSize=0,this.element=e.element,this.beforeDivider=e.beforeDivider,this.afterDivider=e.afterDivider;for(let n of this.beforeDivider)this.beforeSize+=n.size,n.minSize>0&&(this.beforeMinSize+=n.minSize);for(let n of this.afterDivider)this.afterSize+=n.size,n.minSize>0&&(this.afterMinSize+=n.minSize)}}function Xu(t,e,n){let r=-1,i=[],o=0;for(;o!==r;){r=o,o=0;let a=(t-r)/(e-r);if(!(a>=0))break;for(let s=0;s<n.length;++s){let l=n[s].size*a;l<n[s].minSize&&(l=n[s].minSize,o+=l),i[s]=l}}return i}class Ju extends p.PureComponent{constructor(){super(...arguments);this.startDrag=e=>{this.boxData=new Mb(this.props.getDividerData(this.props.idx)),e.startDrag(this.boxData.element,null)},this.dragMove=e=>{e.event.shiftKey||e.event.ctrlKey||e.event.altKey?this.dragMoveAll(e,e.dx,e.dy):this.dragMove2(e,e.dx,e.dy)},this.dragEnd=e=>{let{onDragEnd:n}=this.props;this.boxData=null,n&&n()}}dragMove2(e,n,r){let{isVertical:i,changeSizes:o}=this.props,{beforeDivider:a,afterDivider:s}=this.boxData;if(!(a.length&&s.length))return;let l=i?r:n,c=a[a.length-1],d=s[0],f=c.size+l,h=d.size-l;l>0?h<d.minSize&&(h=d.minSize,f=c.size+d.size-h):f<c.minSize&&(f=c.minSize,h=c.size+d.size-f);let v=a.concat(s).map(m=>m.size);v[a.length-1]=f,v[a.length]=h,o(v)}dragMoveAll(e,n,r){let{isVertical:i,changeSizes:o}=this.props,{beforeSize:a,beforeMinSize:s,afterSize:l,afterMinSize:c,beforeDivider:d,afterDivider:f}=this.boxData,h=i?r:n,v=a+h,m=l-h;h>0?m<c&&(m=c,v=a+l-c):v<s&&(v=s,m=a+l-s),o(Xu(v,a,d).concat(Xu(m,l,f)))}render(){let{className:e}=this.props;return e||(e="dock-divider"),p.createElement(Nt,{className:e,onDragStartT:this.startDrag,onDragMoveT:this.dragMove,onDragEndT:this.dragEnd})}}class Xi extends p.PureComponent{constructor(){super(...arguments);this.getRef=e=>{this._ref=e},this.getDividerData=e=>{if(this._ref){let{children:n,mode:r}=this.props.boxData,i=this._ref.childNodes;if(i.length===n.length*2-1){let o=[];for(let a=0;a<n.length;++a)r==="vertical"?o.push({size:i[a*2].offsetHeight,minSize:n[a].minHeight}):o.push({size:i[a*2].offsetWidth,minSize:n[a].minWidth});return{element:this._ref,beforeDivider:o.slice(0,e),afterDivider:o.slice(e)}}}return null},this.changeSizes=e=>{let{children:n}=this.props.boxData;if(n.length===e.length){for(let r=0;r<n.length;++r)n[r].size=e[r];this.forceUpdate()}},this.onDragEnd=()=>{this.context.onSilentChange(null,"move")}}render(){let{boxData:e}=this.props,{minWidth:n,minHeight:r,size:i,children:o,mode:a,id:s,widthFlex:l,heightFlex:c}=e,d=a==="vertical",f=[];for(let g=0;g<o.length;++g){g>0&&f.push(p.createElement(Ju,{idx:g,key:g,isVertical:d,onDragEnd:this.onDragEnd,getDividerData:this.getDividerData,changeSizes:this.changeSizes}));let w=o[g];"tabs"in w?f.push(p.createElement(Ge,{size:w.size,panelData:w,key:w.id})):"children"in w&&f.push(p.createElement(Xi,{size:w.size,boxData:w,key:w.id}))}let h,v=1;a==="vertical"?(h="dock-box dock-vbox",l!=null&&(v=l)):(h="dock-box dock-hbox",c!=null&&(v=c));let m=v*i,b=v*1e6;return b<1&&(b=1),p.createElement("div",{ref:this.getRef,className:h,"data-dockid":s,style:{minWidth:n,minHeight:r,flex:`${m} ${b} ${i}px`}},f)}}Xi.contextType=ut;class Ob extends p.PureComponent{render(){let{children:e}=this.props.boxData,n=[];for(let r of e)"tabs"in r&&n.push(p.createElement(Ge,{size:r.size,panelData:r,key:r.id}));return p.createElement("div",{className:"dock-box dock-fbox"},n)}}function Tb(t,e){e.panels.set(t.id,t);for(let n of t.tabs)e.tabs.set(n.id,n)}function Ji(t,e){for(let n of t.children)"tabs"in n?Tb(n,e):"children"in n&&Ji(n,e)}function Pb(t){let e={panels:new Map,tabs:new Map};return t&&("children"in t?Ji(t,e):("dockbox"in t&&Ji(t.dockbox,e),"floatbox"in t&&Ji(t.floatbox,e))),e}function Zu(t,e,n){function r(a){return e?e(a):{id:a.id}}function i(a){let s=[];for(let h of a.tabs){let v=r(h);v&&s.push(v)}let{id:l,size:c,activeId:d}=a,f;if(a.parent.mode==="float"||a.parent.mode==="window"){let{x:h,y:v,z:m,w:b,h:g}=a;f={id:l,size:c,tabs:s,activeId:d,x:h,y:v,z:m,w:b,h:g}}else f={id:l,size:c,tabs:s,activeId:d};return n&&n(f,a),f}function o(a){let s=[];for(let f of a.children)"tabs"in f?s.push(i(f)):"children"in f&&s.push(o(f));let{id:l,size:c,mode:d}=a;return{id:l,size:c,mode:d,children:s}}return{dockbox:o(t.dockbox),floatbox:o(t.floatbox),windowbox:o(t.windowbox),maxbox:o(t.maxbox)}}function _b(t,e,n,r){var i,o,a;let s=Pb(e);function l(f){if(n)return n(f);let{id:h}=f;return s.tabs.has(h)?s.tabs.get(h):null}function c(f){let{id:h,size:v,activeId:m,x:b,y:g,z:w,w:D,h:E}=f,y=[];for(let x of f.tabs){let I=l(x);I&&y.push(I)}let S;return D||E||b||g||w?S={id:h,size:v,activeId:m,x:b,y:g,z:w,w:D,h:E,tabs:y}:S={id:h,size:v,activeId:m,tabs:y},f.id===gi?S.panelLock={}:r?r(f,S):s.panels.has(h)&&(S=Object.assign(Object.assign({},s.panels.get(h)),S)),S}function d(f){if(!f)return null;let h=[];for(let g of f.children)"tabs"in g?h.push(c(g)):"children"in g&&h.push(d(g));let{id:v,size:m,mode:b}=f;return{id:v,size:m,mode:b,children:h}}return{dockbox:d(t.dockbox),floatbox:d((i=t.floatbox)!==null&&i!==void 0?i:{mode:"float",children:[],size:0}),windowbox:d((o=t.windowbox)!==null&&o!==void 0?o:{mode:"window",children:[],size:0}),maxbox:d((a=t.maxbox)!==null&&a!==void 0?a:{mode:"maximize",children:[],size:1})}}class Qu extends p.PureComponent{render(){let e=this.props.boxData.children[0];if(e)return this.hidePanelData=Object.assign(Object.assign({},e),{id:"",tabs:[]}),p.createElement("div",{className:"dock-box dock-mbox dock-mbox-show"},p.createElement(Ge,{size:100,panelData:e}));if(this.hidePanelData){let n=this.hidePanelData;return this.hidePanelData=null,p.createElement("div",{className:"dock-box dock-mbox dock-mbox-hide"},p.createElement(Ge,{size:100,panelData:n}))}else return p.createElement("div",{className:"dock-box dock-mbox dock-mbox-hide"})}}var Ib=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Rb extends p.PureComponent{constructor(){super(...arguments);this._caches=new Map,this.destroyRemovedPane=()=>{this._pendingDestroy=null;let e=!1;for(let[n,r]of this._caches)r.owner==null&&(this._caches.delete(n),e=!0);e&&this.forceUpdate()}}getTabCache(e,n){let r=this._caches.get(e);if(r)r.owner=n;else{let i=document.createElement("div");i.className="dock-pane-cache",r={div:i,id:e,owner:n},this._caches.set(e,r)}return r}removeTabCache(e,n){let r=this._caches.get(e);r&&r.owner===n&&(r.owner=null,this._pendingDestroy||(this._pendingDestroy=setTimeout(this.destroyRemovedPane,1)))}updateTabCache(e,n){let r=this._caches.get(e);r&&(r.portal=On.createPortal(n,r.div,r.id),this.forceUpdate())}}class Un extends Rb{constructor(e){super(e);this.getRef=a=>{this._ref=a},this.onDragStateChange=a=>{a==null&&(Ge.droppingPanel=null,this.state.dropRect&&this.setState({dropRect:null}))},this._onWindowResize=ds(()=>{let a=this.getLayout();if(this._ref){let s=Oa(a,this._ref.offsetWidth,this._ref.offsetHeight);a!==s&&(s=Lr(s,this.props.groups),this.changeLayout(s,null,"move"))}},200);let{layout:n,defaultLayout:r,loadTab:i}=e,o;if(r)o=this.prepareInitData(e.defaultLayout);else if(!i)throw new Error("DockLayout.loadTab and DockLayout.defaultLayout should not both be undefined.");n?this.state={layout:Un.loadLayoutData(n,e),dropRect:null}:this.state={layout:o,dropRect:null},Vg(this.onDragStateChange),window.addEventListener("resize",this._onWindowResize)}getRootElement(){return this._ref}prepareInitData(e){let n=Object.assign({},e);return Lr(n,this.props.groups,this.props.loadTab),n}getDockId(){return this.props.dockId||this}getGroup(e){if(e){let{groups:n}=this.props;if(n&&e in n)return n[e];if(e===mi)return rv}return nv}dockMove(e,n,r){let i=this.getLayout();if(r==="maximize"?(i=ob(i,e),this.panelToFocus=e.id):r==="front"?i=ib(i,e):i=Ru(i,e),typeof n=="string"?n=this.find(n,dt.All):n=Ui(n),r==="float"){let o=Yi(e);o.z=Ca(null),this.state.dropRect?i=Iu(i,o,this.state.dropRect):(i=Iu(i,o),this._ref&&(i=Oa(i,this._ref.offsetWidth,this._ref.offsetHeight)))}else if(r==="new-window"){let o=Yi(e);i=nb(i,o)}else if(n)if("tabs"in n)if(r==="middle")i=Ea(i,e,n);else{let o=Yi(e);i=tb(i,o,n,r)}else if("children"in n){let o=Yi(e);i=Da(i,o,n,r)}else i=eb(i,e,n,r);if(i!==this.getLayout()){i=Lr(i,this.props.groups);let o=null;e.hasOwnProperty("tabs")?o=e.activeId:o=e.id,this.changeLayout(i,o,r)}this.onDragStateChange(!1)}find(e,n){return Sa(this.getLayout(),e,n)}getLayoutSize(){return this._ref?{width:this._ref.offsetWidth,height:this._ref.offsetHeight}:{width:0,height:0}}updateTab(e,n,r=!0){let i=this.find(e,dt.AnyTab);if(i){let o=i.parent,a=o.tabs.indexOf(i);if(a>=0){let{loadTab:s}=this.props,l=this.getLayout(),c=o.activeId;return n&&(s&&!("content"in n&&"title"in n)&&(n=s(n)),l=Ru(l,i),o=Ui(o),l=Ea(l,n,o,a),o=Ui(o)),r||(o.activeId=c,this.panelToFocus=o.id),l=Lr(l,this.props.groups),this.changeLayout(l,n.id,"update"),!0}}return!1}navigateToPanel(e,n){if(!n){e||(e=this._ref.querySelector(".dock-tab-active>.dock-tab-btn")),e.focus();return}let r,i=n==="ArrowUp"||n==="ArrowDown"?".dock>.dock-bar":".dock-box>.dock-panel",o=Array.from(this._ref.querySelectorAll(i)),a=o.find(c=>c.contains(e)),s=a.getBoundingClientRect(),l=[];for(let c of o)if(c!==a){let d=c.getBoundingClientRect(),f=cb(s,d,n);f>=0&&l.push({panel:c,rect:d,distance:f})}l.sort((c,d)=>c.distance-d.distance);for(let c of l)if(r=c.panel.querySelector(".dock-tab-active>.dock-tab-btn"),r)break;r&&r.focus()}useEdgeDrop(){return this.props.dropMode==="edge"}setDropRect(e,n,r,i,o=[300,300]){let{dropRect:a}=this.state;if(a){if(n==="remove"){a.source===r&&this.setState({dropRect:null});return}else if(a.element===e&&a.direction===n&&n!=="float")return}if(!e){this.setState({dropRect:null});return}let s=this._ref.getBoundingClientRect(),l=this._ref.offsetWidth/s.width,c=this._ref.offsetHeight/s.height,d=e.getBoundingClientRect(),f=(d.left-s.left)*l,h=(d.top-s.top)*c,v=d.width*l,m=d.height*c,b=.5;switch(e.classList.contains("dock-box")&&(b=.3),n){case"float":{let g=(i.clientX-s.left)*l;h=(i.clientY-s.top)*c-15,v=o[0],m=o[1],f=g-(v>>1);break}case"right":f+=v*(1-b);case"left":v*=b;break;case"bottom":h+=m*(1-b);case"top":m*=b;break;case"after-tab":f+=v-15,v=30;break;case"before-tab":f-=15,v=30;break}this.setState({dropRect:{left:f,top:h,width:v,height:m,element:e,source:r,direction:n}})}render(){this.tempLayout=null;let{style:e,maximizeTo:n}=this.props,{layout:r,dropRect:i}=this.state,o;if(i){let{element:l,direction:c}=i,d=Ib(i,["element","direction"]);o=Object.assign(Object.assign({},d),{display:"block"}),c==="float"&&(o.transition="none")}let a;n?(typeof n=="string"&&(n=document.getElementById(n)),a=On.createPortal(p.createElement(Qu,{boxData:r.maxbox}),n)):a=p.createElement(Qu,{boxData:r.maxbox});let s=[];for(let[l,c]of this._caches)c.portal&&s.push(c.portal);return p.createElement("div",{ref:this.getRef,className:"dock-layout",style:e},p.createElement(iv,{value:this},p.createElement(Xi,{size:1,boxData:r.dockbox}),p.createElement(Ob,{boxData:r.floatbox}),p.createElement(_a,{boxData:r.windowbox}),a,s),p.createElement("div",{className:"dock-drop-indicator",style:o}))}componentDidUpdate(e,n,r){var i;if(this.panelToFocus){let o=this._ref.querySelector(`.dock-panel[data-dockid="${this.panelToFocus}"]`);o&&!o.contains(this._ref.ownerDocument.activeElement)&&((i=o.querySelector(".dock-bar"))===null||i===void 0||i.focus()),this.panelToFocus=null}}componentWillUnmount(){window.removeEventListener("resize",this._onWindowResize),Ug(this.onDragStateChange),this._onWindowResize.cancel()}setLayout(e){this.tempLayout=e,this.setState({layout:e})}getLayout(){return this.tempLayout||this.state.layout}changeLayout(e,n,r,i=!1){let{layout:o,onLayoutChange:a}=this.props,s;a&&(s=Zu(e,this.props.saveTab,this.props.afterPanelSaved),e.loadedFrom=s,a(s,n,r),o&&this.forceUpdate()),!o&&!i&&this.setLayout(e)}onSilentChange(e=null,n){let{onLayoutChange:r}=this.props;if(r){let i=this.getLayout();this.changeLayout(i,e,n,!0)}}saveLayout(){return Zu(this.getLayout(),this.props.saveTab,this.props.afterPanelSaved)}loadLayout(e){this.setLayout(Un.loadLayoutData(e,this.props,this._ref.offsetWidth,this._ref.offsetHeight))}static loadLayoutData(e,n,r=0,i=0){let{defaultLayout:o,loadTab:a,afterPanelLoaded:s,groups:l}=n,c=_b(e,o,a,s);return c=Oa(c,r,i),c=Lr(c,l),c.loadedFrom=e,c}static getDerivedStateFromProps(e,n){let{layout:r}=e,{layout:i}=n;return r&&r!==i.loadedFrom?{layout:Un.loadLayoutData(r,e)}:null}}var kb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Nb extends p.PureComponent{constructor(){super(...arguments);this.getRef=e=>{this._ref=e},this.getDividerData=e=>{if(this._ref){let{children:n,mode:r}=this.props,i=this._ref.childNodes,o=1;if(Array.isArray(n)&&(o=n.length),i.length===o*2-1){let a=[];for(let s=0;s<o;++s)r==="vertical"?a.push({size:i[s*2].offsetHeight}):a.push({size:i[s*2].offsetWidth});return{element:this._ref,beforeDivider:a.slice(0,e),afterDivider:a.slice(e)}}}return null},this.changeSizes=e=>{let{mode:n}=this.props,r=this._ref.childNodes;if(r.length===e.length*2-1){for(let i=0;i<e.length;++i)n==="vertical"?r[i*2].style.height=`${e[i]}px`:r[i*2].style.width=`${e[i]}px`;this.forceUpdate()}}}render(){let e=this.props,{children:n,mode:r,className:i}=e,o=kb(e,["children","mode","className"]),a=r==="vertical",s=[];if(Array.isArray(n))for(let c=0;c<n.length;++c)c>0&&s.push(p.createElement(Ju,{idx:c,key:c,isVertical:a,getDividerData:this.getDividerData,changeSizes:this.changeSizes})),s.push(n[c]);else s=n;let l;return r==="vertical"?l="divider-box dock-vbox":l="divider-box dock-hbox",i&&(l=`${l} ${i}`),p.createElement("div",Object.assign({ref:this.getRef,className:l},o),s)}}Nb.contextType=ut;var Ra={exports:{}},bn={},ka={exports:{}},xt={},Zi={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var n=/input|select|textarea|button|object/;function r(l){var c=l.offsetWidth<=0&&l.offsetHeight<=0;if(c&&!l.innerHTML)return!0;try{var d=window.getComputedStyle(l);return c?d.getPropertyValue("overflow")!=="visible"||l.scrollWidth<=0&&l.scrollHeight<=0:d.getPropertyValue("display")=="none"}catch(f){return console.warn("Failed to inspect element style"),!1}}function i(l){for(var c=l;c&&c!==document.body;){if(r(c))return!1;c=c.parentNode}return!0}function o(l,c){var d=l.nodeName.toLowerCase(),f=n.test(d)&&!l.disabled||d==="a"&&l.href||c;return f&&i(l)}function a(l){var c=l.getAttribute("tabindex");c===null&&(c=void 0);var d=isNaN(c);return(d||c>=0)&&o(l,!d)}function s(l){return[].slice.call(l.querySelectorAll("*"),0).filter(a)}t.exports=e.default})(Zi,Zi.exports);Object.defineProperty(xt,"__esModule",{value:!0});xt.resetState=Fb;xt.log=Bb;xt.handleBlur=Fr;xt.handleFocus=Br;xt.markForFocusLater=jb;xt.returnFocus=Wb;xt.popWithoutFocus=Hb;xt.setupScopedFocus=$b;xt.teardownScopedFocus=Kb;var Ab=Zi.exports,Lb=zb(Ab);function zb(t){return t&&t.__esModule?t:{default:t}}var Gn=[],qn=null,Na=!1;function Fb(){Gn=[]}function Bb(){}function Fr(){Na=!0}function Br(){if(Na){if(Na=!1,!qn)return;setTimeout(function(){if(!qn.contains(document.activeElement)){var t=(0,Lb.default)(qn)[0]||qn;t.focus()}},0)}}function jb(){Gn.push(document.activeElement)}function Wb(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=null;try{Gn.length!==0&&(e=Gn.pop(),e.focus({preventScroll:t}));return}catch(n){console.warn(["You tried to return focus to",e,"but it is not in the DOM anymore"].join(" "))}}function Hb(){Gn.length>0&&Gn.pop()}function $b(t){qn=t,window.addEventListener?(window.addEventListener("blur",Fr,!1),document.addEventListener("focus",Br,!0)):(window.attachEvent("onBlur",Fr),document.attachEvent("onFocus",Br))}function Kb(){qn=null,window.addEventListener?(window.removeEventListener("blur",Fr),document.removeEventListener("focus",Br)):(window.detachEvent("onBlur",Fr),document.detachEvent("onFocus",Br))}var Aa={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=Zi.exports,r=i(n);function i(a){return a&&a.__esModule?a:{default:a}}function o(a,s){var l=(0,r.default)(a);if(!l.length){s.preventDefault();return}var c=void 0,d=s.shiftKey,f=l[0],h=l[l.length-1];if(a===document.activeElement){if(!d)return;c=h}if(h===document.activeElement&&!d&&(c=f),f===document.activeElement&&d&&(c=h),c){s.preventDefault(),c.focus();return}var v=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),m=v!=null&&v[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(!!m){var b=l.indexOf(document.activeElement);if(b>-1&&(b+=d?-1:1),c=l[b],typeof c=="undefined"){s.preventDefault(),c=d?h:f,c.focus();return}s.preventDefault(),c.focus()}}t.exports=e.default})(Aa,Aa.exports);var Ct={},Vb=function(){},Ub=Vb,St={},ed={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(t){(function(){var e=!!(typeof window!="undefined"&&window.document&&window.document.createElement),n={canUseDOM:e,canUseWorkers:typeof Worker!="undefined",canUseEventListeners:e&&!!(window.addEventListener||window.attachEvent),canUseViewport:e&&!!window.screen};t.exports?t.exports=n:window.ExecutionEnvironment=n})()})(ed);Object.defineProperty(St,"__esModule",{value:!0});St.canUseDOM=St.SafeNodeList=St.SafeHTMLCollection=void 0;var Gb=ed.exports,qb=Yb(Gb);function Yb(t){return t&&t.__esModule?t:{default:t}}var Qi=qb.default,Xb=Qi.canUseDOM?window.HTMLElement:{};St.SafeHTMLCollection=Qi.canUseDOM?window.HTMLCollection:{};St.SafeNodeList=Qi.canUseDOM?window.NodeList:{};St.canUseDOM=Qi.canUseDOM;St.default=Xb;Object.defineProperty(Ct,"__esModule",{value:!0});Ct.resetState=ty;Ct.log=ny;Ct.assertNodeList=td;Ct.setElement=ry;Ct.validateElement=La;Ct.hide=iy;Ct.show=oy;Ct.documentNotReadyOrSSRTesting=ay;var Jb=Ub,Zb=ey(Jb),Qb=St;function ey(t){return t&&t.__esModule?t:{default:t}}var ft=null;function ty(){ft&&(ft.removeAttribute?ft.removeAttribute("aria-hidden"):ft.length!=null?ft.forEach(function(t){return t.removeAttribute("aria-hidden")}):document.querySelectorAll(ft).forEach(function(t){return t.removeAttribute("aria-hidden")})),ft=null}function ny(){}function td(t,e){if(!t||!t.length)throw new Error("react-modal: No elements were found for selector "+e+".")}function ry(t){var e=t;if(typeof e=="string"&&Qb.canUseDOM){var n=document.querySelectorAll(e);td(n,e),e=n}return ft=e||ft,ft}function La(t){var e=t||ft;return e?Array.isArray(e)||e instanceof HTMLCollection||e instanceof NodeList?e:[e]:((0,Zb.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function iy(t){var e=!0,n=!1,r=void 0;try{for(var i=La(t)[Symbol.iterator](),o;!(e=(o=i.next()).done);e=!0){var a=o.value;a.setAttribute("aria-hidden","true")}}catch(s){n=!0,r=s}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}function oy(t){var e=!0,n=!1,r=void 0;try{for(var i=La(t)[Symbol.iterator](),o;!(e=(o=i.next()).done);e=!0){var a=o.value;a.removeAttribute("aria-hidden")}}catch(s){n=!0,r=s}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}function ay(){ft=null}var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.resetState=sy;Yn.log=ly;var jr={},Wr={};function nd(t,e){t.classList.remove(e)}function sy(){var t=document.getElementsByTagName("html")[0];for(var e in jr)nd(t,jr[e]);var n=document.body;for(var r in Wr)nd(n,Wr[r]);jr={},Wr={}}function ly(){}var cy=function(e,n){return e[n]||(e[n]=0),e[n]+=1,n},uy=function(e,n){return e[n]&&(e[n]-=1),n},dy=function(e,n,r){r.forEach(function(i){cy(n,i),e.add(i)})},fy=function(e,n,r){r.forEach(function(i){uy(n,i),n[i]===0&&e.remove(i)})};Yn.add=function(e,n){return dy(e.classList,e.nodeName.toLowerCase()=="html"?jr:Wr,n.split(" "))};Yn.remove=function(e,n){return fy(e.classList,e.nodeName.toLowerCase()=="html"?jr:Wr,n.split(" "))};var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.log=hy;Xn.resetState=vy;function py(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var rd=function t(){var e=this;py(this,t),this.register=function(n){e.openInstances.indexOf(n)===-1&&(e.openInstances.push(n),e.emit("register"))},this.deregister=function(n){var r=e.openInstances.indexOf(n);r!==-1&&(e.openInstances.splice(r,1),e.emit("deregister"))},this.subscribe=function(n){e.subscribers.push(n)},this.emit=function(n){e.subscribers.forEach(function(r){return r(n,e.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},eo=new rd;function hy(){console.log("portalOpenInstances ----------"),console.log(eo.openInstances.length),eo.openInstances.forEach(function(t){return console.log(t)}),console.log("end portalOpenInstances ----------")}function vy(){eo=new rd}Xn.default=eo;var za={};Object.defineProperty(za,"__esModule",{value:!0});za.resetState=yy;za.log=wy;var my=Xn,gy=by(my);function by(t){return t&&t.__esModule?t:{default:t}}var qe=void 0,Et=void 0,yn=[];function yy(){for(var t=[qe,Et],e=0;e<t.length;e++){var n=t[e];!n||n.parentNode&&n.parentNode.removeChild(n)}qe=Et=null,yn=[]}function wy(){console.log("bodyTrap ----------"),console.log(yn.length);for(var t=[qe,Et],e=0;e<t.length;e++){var n=t[e],r=n||{};console.log(r.nodeName,r.className,r.id)}console.log("edn bodyTrap ----------")}function id(){yn.length!==0&&yn[yn.length-1].focusContent()}function xy(t,e){!qe&&!Et&&(qe=document.createElement("div"),qe.setAttribute("data-react-modal-body-trap",""),qe.style.position="absolute",qe.style.opacity="0",qe.setAttribute("tabindex","0"),qe.addEventListener("focus",id),Et=qe.cloneNode(),Et.addEventListener("focus",id)),yn=e,yn.length>0?(document.body.firstChild!==qe&&document.body.insertBefore(qe,document.body.firstChild),document.body.lastChild!==Et&&document.body.appendChild(Et)):(qe.parentElement&&qe.parentElement.removeChild(qe),Et.parentElement&&Et.parentElement.removeChild(Et))}gy.default.subscribe(xy);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(N){for(var k=1;k<arguments.length;k++){var V=arguments[k];for(var T in V)Object.prototype.hasOwnProperty.call(V,T)&&(N[T]=V[T])}return N},r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},i=function(){function N(k,V){for(var T=0;T<V.length;T++){var C=V[T];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(k,C.key,C)}}return function(k,V,T){return V&&N(k.prototype,V),T&&N(k,T),k}}(),o=u.exports,a=rs.exports,s=S(a),l=xt,c=y(l),d=Aa.exports,f=S(d),h=Ct,v=y(h),m=Yn,b=y(m),g=St,w=S(g),D=Xn,E=S(D);function y(N){if(N&&N.__esModule)return N;var k={};if(N!=null)for(var V in N)Object.prototype.hasOwnProperty.call(N,V)&&(k[V]=N[V]);return k.default=N,k}function S(N){return N&&N.__esModule?N:{default:N}}function x(N,k){if(!(N instanceof k))throw new TypeError("Cannot call a class as a function")}function I(N,k){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:N}function _(N,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);N.prototype=Object.create(k&&k.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(N,k):N.__proto__=k)}var F={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},R=9,P=27,O=0,j=function(N){_(k,N);function k(V){x(this,k);var T=I(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,V));return T.setOverlayRef=function(C){T.overlay=C,T.props.overlayRef&&T.props.overlayRef(C)},T.setContentRef=function(C){T.content=C,T.props.contentRef&&T.props.contentRef(C)},T.afterClose=function(){var C=T.props,M=C.appElement,A=C.ariaHideApp,W=C.htmlOpenClassName,L=C.bodyOpenClassName;L&&b.remove(document.body,L),W&&b.remove(document.getElementsByTagName("html")[0],W),A&&O>0&&(O-=1,O===0&&v.show(M)),T.props.shouldFocusAfterRender&&(T.props.shouldReturnFocusAfterClose?(c.returnFocus(T.props.preventScroll),c.teardownScopedFocus()):c.popWithoutFocus()),T.props.onAfterClose&&T.props.onAfterClose(),E.default.deregister(T)},T.open=function(){T.beforeOpen(),T.state.afterOpen&&T.state.beforeClose?(clearTimeout(T.closeTimer),T.setState({beforeClose:!1})):(T.props.shouldFocusAfterRender&&(c.setupScopedFocus(T.node),c.markForFocusLater()),T.setState({isOpen:!0},function(){T.openAnimationFrame=requestAnimationFrame(function(){T.setState({afterOpen:!0}),T.props.isOpen&&T.props.onAfterOpen&&T.props.onAfterOpen({overlayEl:T.overlay,contentEl:T.content})})}))},T.close=function(){T.props.closeTimeoutMS>0?T.closeWithTimeout():T.closeWithoutTimeout()},T.focusContent=function(){return T.content&&!T.contentHasFocus()&&T.content.focus({preventScroll:!0})},T.closeWithTimeout=function(){var C=Date.now()+T.props.closeTimeoutMS;T.setState({beforeClose:!0,closesAt:C},function(){T.closeTimer=setTimeout(T.closeWithoutTimeout,T.state.closesAt-Date.now())})},T.closeWithoutTimeout=function(){T.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},T.afterClose)},T.handleKeyDown=function(C){C.keyCode===R&&(0,f.default)(T.content,C),T.props.shouldCloseOnEsc&&C.keyCode===P&&(C.stopPropagation(),T.requestClose(C))},T.handleOverlayOnClick=function(C){T.shouldClose===null&&(T.shouldClose=!0),T.shouldClose&&T.props.shouldCloseOnOverlayClick&&(T.ownerHandlesClose()?T.requestClose(C):T.focusContent()),T.shouldClose=null},T.handleContentOnMouseUp=function(){T.shouldClose=!1},T.handleOverlayOnMouseDown=function(C){!T.props.shouldCloseOnOverlayClick&&C.target==T.overlay&&C.preventDefault()},T.handleContentOnClick=function(){T.shouldClose=!1},T.handleContentOnMouseDown=function(){T.shouldClose=!1},T.requestClose=function(C){return T.ownerHandlesClose()&&T.props.onRequestClose(C)},T.ownerHandlesClose=function(){return T.props.onRequestClose},T.shouldBeClosed=function(){return!T.state.isOpen&&!T.state.beforeClose},T.contentHasFocus=function(){return document.activeElement===T.content||T.content.contains(document.activeElement)},T.buildClassName=function(C,M){var A=(typeof M=="undefined"?"undefined":r(M))==="object"?M:{base:F[C],afterOpen:F[C]+"--after-open",beforeClose:F[C]+"--before-close"},W=A.base;return T.state.afterOpen&&(W=W+" "+A.afterOpen),T.state.beforeClose&&(W=W+" "+A.beforeClose),typeof M=="string"&&M?W+" "+M:W},T.attributesFromObject=function(C,M){return Object.keys(M).reduce(function(A,W){return A[C+"-"+W]=M[W],A},{})},T.state={afterOpen:!1,beforeClose:!1},T.shouldClose=null,T.moveFromContentToOverlay=null,T}return i(k,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(T,C){this.props.isOpen&&!T.isOpen?this.open():!this.props.isOpen&&T.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!C.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var T=this.props,C=T.appElement,M=T.ariaHideApp,A=T.htmlOpenClassName,W=T.bodyOpenClassName;W&&b.add(document.body,W),A&&b.add(document.getElementsByTagName("html")[0],A),M&&(O+=1,v.hide(C)),E.default.register(this)}},{key:"render",value:function(){var T=this.props,C=T.id,M=T.className,A=T.overlayClassName,W=T.defaultStyles,L=T.children,K=M?{}:W.content,Z=A?{}:W.overlay;if(this.shouldBeClosed())return null;var z={ref:this.setOverlayRef,className:this.buildClassName("overlay",A),style:n({},Z,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},q=n({id:C,ref:this.setContentRef,style:n({},K,this.props.style.content),className:this.buildClassName("content",M),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",n({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),J=this.props.contentElement(q,L);return this.props.overlayElement(z,J)}}]),k}(o.Component);j.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},j.propTypes={isOpen:s.default.bool.isRequired,defaultStyles:s.default.shape({content:s.default.object,overlay:s.default.object}),style:s.default.shape({content:s.default.object,overlay:s.default.object}),className:s.default.oneOfType([s.default.string,s.default.object]),overlayClassName:s.default.oneOfType([s.default.string,s.default.object]),bodyOpenClassName:s.default.string,htmlOpenClassName:s.default.string,ariaHideApp:s.default.bool,appElement:s.default.oneOfType([s.default.instanceOf(w.default),s.default.instanceOf(g.SafeHTMLCollection),s.default.instanceOf(g.SafeNodeList),s.default.arrayOf(s.default.instanceOf(w.default))]),onAfterOpen:s.default.func,onAfterClose:s.default.func,onRequestClose:s.default.func,closeTimeoutMS:s.default.number,shouldFocusAfterRender:s.default.bool,shouldCloseOnOverlayClick:s.default.bool,shouldReturnFocusAfterClose:s.default.bool,preventScroll:s.default.bool,role:s.default.string,contentLabel:s.default.string,aria:s.default.object,data:s.default.object,children:s.default.node,shouldCloseOnEsc:s.default.bool,overlayRef:s.default.func,contentRef:s.default.func,id:s.default.string,overlayElement:s.default.func,contentElement:s.default.func,testId:s.default.string},e.default=j,t.exports=e.default})(ka,ka.exports);function od(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);t!=null&&this.setState(t)}function ad(t){function e(n){var r=this.constructor.getDerivedStateFromProps(t,n);return r??null}this.setState(e.bind(this))}function sd(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}od.__suppressDeprecationWarning=!0;ad.__suppressDeprecationWarning=!0;sd.__suppressDeprecationWarning=!0;function Cy(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return t;var n=null,r=null,i=null;if(typeof e.componentWillMount=="function"?n="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),n!==null||r!==null||i!==null){var o=t.displayName||t.name,a=typeof t.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+a+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(r!==null?`
  `+r:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof t.getDerivedStateFromProps=="function"&&(e.componentWillMount=od,e.componentWillReceiveProps=ad),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=sd;var s=e.componentDidUpdate;e.componentDidUpdate=function(c,d,f){var h=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:f;s.call(this,c,d,h)}}return t}var Sy=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",polyfill:Cy}),Ey=ss(Sy);Object.defineProperty(bn,"__esModule",{value:!0});bn.bodyOpenClassName=bn.portalClassName=void 0;var ld=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dy=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),cd=u.exports,to=Hr(cd),My=as.exports,no=Hr(My),Oy=rs.exports,oe=Hr(Oy),Ty=ka.exports,ud=Hr(Ty),Py=Ct,_y=Ry(Py),nn=St,dd=Hr(nn),Iy=Ey;function Ry(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Hr(t){return t&&t.__esModule?t:{default:t}}function ky(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fd(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ny(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ay=bn.portalClassName="ReactModalPortal",Ly=bn.bodyOpenClassName="ReactModal__Body--open",wn=nn.canUseDOM&&no.default.createPortal!==void 0,pd=function(e){return document.createElement(e)},hd=function(){return wn?no.default.createPortal:no.default.unstable_renderSubtreeIntoContainer};function ro(t){return t()}var $r=function(t){Ny(e,t);function e(){var n,r,i,o;ky(this,e);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return o=(r=(i=fd(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(s))),i),i.removePortal=function(){!wn&&no.default.unmountComponentAtNode(i.node);var c=ro(i.props.parentSelector);c&&c.contains(i.node)?c.removeChild(i.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},i.portalRef=function(c){i.portal=c},i.renderPortal=function(c){var d=hd(),f=d(i,to.default.createElement(ud.default,ld({defaultStyles:e.defaultStyles},c)),i.node);i.portalRef(f)},r),fd(i,o)}return Dy(e,[{key:"componentDidMount",value:function(){if(!!nn.canUseDOM){wn||(this.node=pd("div")),this.node.className=this.props.portalClassName;var r=ro(this.props.parentSelector);r.appendChild(this.node),!wn&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(r){var i=ro(r.parentSelector),o=ro(this.props.parentSelector);return{prevParent:i,nextParent:o}}},{key:"componentDidUpdate",value:function(r,i,o){if(!!nn.canUseDOM){var a=this.props,s=a.isOpen,l=a.portalClassName;r.portalClassName!==l&&(this.node.className=l);var c=o.prevParent,d=o.nextParent;d!==c&&(c.removeChild(this.node),d.appendChild(this.node)),!(!r.isOpen&&!s)&&!wn&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!nn.canUseDOM||!this.node||!this.portal)){var r=this.portal.state,i=Date.now(),o=r.isOpen&&this.props.closeTimeoutMS&&(r.closesAt||i+this.props.closeTimeoutMS);o?(r.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,o-i)):this.removePortal()}}},{key:"render",value:function(){if(!nn.canUseDOM||!wn)return null;!this.node&&wn&&(this.node=pd("div"));var r=hd();return r(to.default.createElement(ud.default,ld({ref:this.portalRef,defaultStyles:e.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(r){_y.setElement(r)}}]),e}(cd.Component);$r.propTypes={isOpen:oe.default.bool.isRequired,style:oe.default.shape({content:oe.default.object,overlay:oe.default.object}),portalClassName:oe.default.string,bodyOpenClassName:oe.default.string,htmlOpenClassName:oe.default.string,className:oe.default.oneOfType([oe.default.string,oe.default.shape({base:oe.default.string.isRequired,afterOpen:oe.default.string.isRequired,beforeClose:oe.default.string.isRequired})]),overlayClassName:oe.default.oneOfType([oe.default.string,oe.default.shape({base:oe.default.string.isRequired,afterOpen:oe.default.string.isRequired,beforeClose:oe.default.string.isRequired})]),appElement:oe.default.oneOfType([oe.default.instanceOf(dd.default),oe.default.instanceOf(nn.SafeHTMLCollection),oe.default.instanceOf(nn.SafeNodeList),oe.default.arrayOf(oe.default.instanceOf(dd.default))]),onAfterOpen:oe.default.func,onRequestClose:oe.default.func,closeTimeoutMS:oe.default.number,ariaHideApp:oe.default.bool,shouldFocusAfterRender:oe.default.bool,shouldCloseOnOverlayClick:oe.default.bool,shouldReturnFocusAfterClose:oe.default.bool,preventScroll:oe.default.bool,parentSelector:oe.default.func,aria:oe.default.object,data:oe.default.object,role:oe.default.string,contentLabel:oe.default.string,shouldCloseOnEsc:oe.default.bool,overlayRef:oe.default.func,contentRef:oe.default.func,id:oe.default.string,overlayElement:oe.default.func,contentElement:oe.default.func};$r.defaultProps={isOpen:!1,portalClassName:Ay,bodyOpenClassName:Ly,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,n){return to.default.createElement("div",e,n)},contentElement:function(e,n){return to.default.createElement("div",e,n)}};$r.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,Iy.polyfill)($r);bn.default=$r;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=bn,r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}e.default=r.default,t.exports=e.default})(Ra,Ra.exports);var zy=tf(Ra.exports);const Fy=async t=>{let e;try{e=await He.instance.feathersClient.service("project").get(t)}catch(n){throw console.log("Can't get URL from id"+n),new Error(n)}return e.scenes[0]},vd={},By=p.createContext({settings:vd,updateSetting:()=>{}}),jy=By.Provider;function md(t){const{message:e}=t;return p.createElement(Jr,{...t},e)}md.defaultProps={title:"Confirm",message:"Confirm action?"};const Wy=ee.div`
  margin-bottom: 16px;

  label {
    display: block;
    margin-bottom: 8px;
  }
`,Hy=ee.div`
  display: flex;
  justify-content: space-between;

  & > * {
    margin-left: 30px;
    align-self: center;
  }

  & > :first-child {
    margin-left: 0;
  }
`;function io({inline:t,children:e,...n}){return t?p.createElement(Hy,{...n},e):p.createElement(Wy,{...n},e)}const $y=ee.div`
  display: flex;
  flex-direction: column;
  flex: 1;
`;function Ky({defaultOptions:t,onConfirm:e,onCancel:n}){const{t:r}=Pt(),[i,o]=u.exports.useState(t),a=u.exports.useCallback(d=>{o({...i,combineMeshes:d})},[i,o]),s=u.exports.useCallback(d=>{o({...i,removeUnusedObjects:d})},[i,o]),l=u.exports.useCallback(d=>{d.preventDefault(),e(i)},[i,e]),c=u.exports.useCallback(d=>{d.preventDefault(),n()},[n]);return p.createElement(Jr,{title:r("editor:dialog.exportProject.title"),onConfirm:l,onCancel:c,confirmLabel:r("editor:dialog.exportProject.lbl-confirm")},p.createElement($y,null,p.createElement(io,null,p.createElement("label",{htmlFor:"combineMeshes"},r("editor:dialog.exportProject.lbl-combineMesh")),p.createElement(fr,{id:"combineMeshes",value:i.combineMeshes,onChange:a})),p.createElement(io,null,p.createElement("label",{htmlFor:"removeUnusedObjects"},r("editor:dialog.exportProject.lbl-removeUnused")),p.createElement(fr,{id:"removeUnusedObjects",value:i.removeUnusedObjects,onChange:s}))))}const Vy=ee.div`
  display: flex;
  width: 360px;
  border-top-left-radius: inherit;
  align-items: center;
  padding: 30px;

  img {
    border-radius: 6px;
  }
`,Uy=ee.div`
  display: flex;
  flex-direction: column;
  flex: 1;
  padding: 30px 30px;
`;function Fa({imageSrc:t,children:e,...n}){return p.createElement(Jr,{...n},p.createElement(Vy,null,p.createElement("img",{src:t})),p.createElement(Uy,null,e))}function Gy({thumbnailUrl:t,initialName:e,onConfirm:n,onCancel:r}){const[i,o]=u.exports.useState(e),{t:a}=Pt(),s=u.exports.useCallback(d=>{o(d)},[o]),l=u.exports.useCallback(d=>{d.preventDefault(),n({name:i})},[i,n]),c=u.exports.useCallback(d=>{d.preventDefault(),r()},[r]);return p.createElement(Fa,{imageSrc:t,title:a("editor:dialog.saveNewProject.title"),onConfirm:l,onCancel:c,confirmLabel:a("editor:dialog.saveNewProject.lbl-confirm")},p.createElement(io,null,p.createElement("label",{htmlFor:"name"},a("editor:dialog.saveNewProject.lbl-name")),p.createElement(ho,{id:"name",required:!0,pattern:`[A-Za-z0-9-':"!@#$%^&*(),.?~ ]{4,64}`,title:a("editor:dialog.saveNewProject.info-name"),value:i,onChange:s})))}const qy=ee.div`
  position: fixed;
  pointer-events: none;
  z-index: 99999;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
`,Yy=ee.div.attrs(t=>({style:{transform:`translate(${t.offset.x}px, ${t.offset.y}px)`}}))`
  background-color: ${t=>t.theme.blue};
  opacity: 0.3;
  color: ${t=>t.theme.text};
  padding: 4px;
  border-radius: 4px;
  display: inline-block;
`;function Xy(){const{t}=Pt(),{item:e,itemType:n,currentOffset:r,isDragging:i}=Rh(a=>({item:a.getItem(),itemType:a.getItemType(),currentOffset:a.getClientOffset(),isDragging:a.isDragging()}));if(!i||!r)return null;let o;return n===Te.Node?e.multiple?o=p.createElement("div",null,t("editor:dnd.nodes",{count:e.value.length})):o=p.createElement("div",null,e.value.name):n===Te.Model?e.multiple?o=p.createElement("div",null,t("editor:dnd.models",{count:e.value.length})):o=p.createElement("div",null,e.value.label):n===Te.Image?e.multiple?o=p.createElement("div",null,t("editor:dnd.images",{count:e.value.length})):o=p.createElement("div",null,e.value.label):n===Te.Video?e.multiple?o=p.createElement("div",null,t("editor:dnd.videos",{count:e.value.length})):o=p.createElement("div",null,e.value.label):n===Te.Audio?e.multiple?o=p.createElement("div",null,t("editor:dnd.audio",{count:e.value.length})):o=p.createElement("div",null,e.value.label):o=p.createElement("div",null,e.type),p.createElement(qy,null,p.createElement(Yy,{offset:r},o))}class gd extends u.exports.Component{render(){return p.createElement(uf,{...this.props})}}var Jy=typeof performance=="object"&&typeof performance.now=="function",bd=Jy?function(){return performance.now()}:function(){return Date.now()};function yd(t){cancelAnimationFrame(t.id)}function Zy(t,e){var n=bd();function r(){bd()-n>=e?t.call(null):i.id=requestAnimationFrame(r)}var i={id:requestAnimationFrame(r)};return i}var Jn=null;function wd(t){if(t===void 0&&(t=!1),Jn===null||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?Jn="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?Jn="negative":Jn="positive-ascending"),document.body.removeChild(e),Jn}return Jn}var Qy=150,e0=function(e,n){return e};function t0(t){var e,n,r=t.getItemOffset,i=t.getEstimatedTotalSize,o=t.getItemSize,a=t.getOffsetForIndexAndAlignment,s=t.getStartIndexForOffset,l=t.getStopIndexForStartIndex,c=t.initInstanceProps,d=t.shouldResetStyleCacheOnItemSizeChange,f=t.validateProps;return n=e=function(h){Jd(v,h);function v(b){var g;return g=h.call(this,b)||this,g._instanceProps=c(g.props,Ae(Ae(g))),g._outerRef=void 0,g._resetIsScrollingTimeoutId=null,g.state={instance:Ae(Ae(g)),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof g.props.initialScrollOffset=="number"?g.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},g._callOnItemsRendered=void 0,g._callOnItemsRendered=vo(function(w,D,E,y){return g.props.onItemsRendered({overscanStartIndex:w,overscanStopIndex:D,visibleStartIndex:E,visibleStopIndex:y})}),g._callOnScroll=void 0,g._callOnScroll=vo(function(w,D,E){return g.props.onScroll({scrollDirection:w,scrollOffset:D,scrollUpdateWasRequested:E})}),g._getItemStyle=void 0,g._getItemStyle=function(w){var D=g.props,E=D.direction,y=D.itemSize,S=D.layout,x=g._getItemStyleCache(d&&y,d&&S,d&&E),I;if(x.hasOwnProperty(w))I=x[w];else{var _=r(g.props,w,g._instanceProps),F=o(g.props,w,g._instanceProps),R=E==="horizontal"||S==="horizontal",P=E==="rtl",O=R?_:0;x[w]=I={position:"absolute",left:P?void 0:O,right:P?O:void 0,top:R?0:_,height:R?"100%":F,width:R?F:"100%"}}return I},g._getItemStyleCache=void 0,g._getItemStyleCache=vo(function(w,D,E){return{}}),g._onScrollHorizontal=function(w){var D=w.currentTarget,E=D.clientWidth,y=D.scrollLeft,S=D.scrollWidth;g.setState(function(x){if(x.scrollOffset===y)return null;var I=g.props.direction,_=y;if(I==="rtl")switch(wd()){case"negative":_=-y;break;case"positive-descending":_=S-E-y;break}return _=Math.max(0,Math.min(_,S-E)),{isScrolling:!0,scrollDirection:x.scrollOffset<y?"forward":"backward",scrollOffset:_,scrollUpdateWasRequested:!1}},g._resetIsScrollingDebounced)},g._onScrollVertical=function(w){var D=w.currentTarget,E=D.clientHeight,y=D.scrollHeight,S=D.scrollTop;g.setState(function(x){if(x.scrollOffset===S)return null;var I=Math.max(0,Math.min(S,y-E));return{isScrolling:!0,scrollDirection:x.scrollOffset<I?"forward":"backward",scrollOffset:I,scrollUpdateWasRequested:!1}},g._resetIsScrollingDebounced)},g._outerRefSetter=function(w){var D=g.props.outerRef;g._outerRef=w,typeof D=="function"?D(w):D!=null&&typeof D=="object"&&D.hasOwnProperty("current")&&(D.current=w)},g._resetIsScrollingDebounced=function(){g._resetIsScrollingTimeoutId!==null&&yd(g._resetIsScrollingTimeoutId),g._resetIsScrollingTimeoutId=Zy(g._resetIsScrolling,Qy)},g._resetIsScrolling=function(){g._resetIsScrollingTimeoutId=null,g.setState({isScrolling:!1},function(){g._getItemStyleCache(-1,null)})},g}v.getDerivedStateFromProps=function(g,w){return n0(g,w),f(g),null};var m=v.prototype;return m.scrollTo=function(g){g=Math.max(0,g),this.setState(function(w){return w.scrollOffset===g?null:{scrollDirection:w.scrollOffset<g?"forward":"backward",scrollOffset:g,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},m.scrollToItem=function(g,w){w===void 0&&(w="auto");var D=this.props.itemCount,E=this.state.scrollOffset;g=Math.max(0,Math.min(g,D-1)),this.scrollTo(a(this.props,g,w,E,this._instanceProps))},m.componentDidMount=function(){var g=this.props,w=g.direction,D=g.initialScrollOffset,E=g.layout;if(typeof D=="number"&&this._outerRef!=null){var y=this._outerRef;w==="horizontal"||E==="horizontal"?y.scrollLeft=D:y.scrollTop=D}this._callPropsCallbacks()},m.componentDidUpdate=function(){var g=this.props,w=g.direction,D=g.layout,E=this.state,y=E.scrollOffset,S=E.scrollUpdateWasRequested;if(S&&this._outerRef!=null){var x=this._outerRef;if(w==="horizontal"||D==="horizontal")if(w==="rtl")switch(wd()){case"negative":x.scrollLeft=-y;break;case"positive-ascending":x.scrollLeft=y;break;default:var I=x.clientWidth,_=x.scrollWidth;x.scrollLeft=_-I-y;break}else x.scrollLeft=y;else x.scrollTop=y}this._callPropsCallbacks()},m.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&yd(this._resetIsScrollingTimeoutId)},m.render=function(){var g=this.props,w=g.children,D=g.className,E=g.direction,y=g.height,S=g.innerRef,x=g.innerElementType,I=g.innerTagName,_=g.itemCount,F=g.itemData,R=g.itemKey,P=R===void 0?e0:R,O=g.layout,j=g.outerElementType,N=g.outerTagName,k=g.style,V=g.useIsScrolling,T=g.width,C=this.state.isScrolling,M=E==="horizontal"||O==="horizontal",A=M?this._onScrollHorizontal:this._onScrollVertical,W=this._getRangeToRender(),L=W[0],K=W[1],Z=[];if(_>0)for(var z=L;z<=K;z++)Z.push(u.exports.createElement(w,{data:F,key:P(z,F),index:z,isScrolling:V?C:void 0,style:this._getItemStyle(z)}));var q=i(this.props,this._instanceProps);return u.exports.createElement(j||N||"div",{className:D,onScroll:A,ref:this._outerRefSetter,style:ne({position:"relative",height:y,width:T,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:E},k)},u.exports.createElement(x||I||"div",{children:Z,ref:S,style:{height:M?"100%":q,pointerEvents:C?"none":void 0,width:M?q:"100%"}}))},m._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var g=this.props.itemCount;if(g>0){var w=this._getRangeToRender(),D=w[0],E=w[1],y=w[2],S=w[3];this._callOnItemsRendered(D,E,y,S)}}if(typeof this.props.onScroll=="function"){var x=this.state,I=x.scrollDirection,_=x.scrollOffset,F=x.scrollUpdateWasRequested;this._callOnScroll(I,_,F)}},m._getRangeToRender=function(){var g=this.props,w=g.itemCount,D=g.overscanCount,E=this.state,y=E.isScrolling,S=E.scrollDirection,x=E.scrollOffset;if(w===0)return[0,0,0,0];var I=s(this.props,x,this._instanceProps),_=l(this.props,I,x,this._instanceProps),F=!y||S==="backward"?Math.max(1,D):1,R=!y||S==="forward"?Math.max(1,D):1;return[Math.max(0,I-F),Math.max(0,Math.min(w-1,_+R)),I,_]},v}(u.exports.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},n}var n0=function(e,n){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,n.instance},r0=t0({getItemOffset:function(e,n){var r=e.itemSize;return n*r},getItemSize:function(e,n){var r=e.itemSize;return r},getEstimatedTotalSize:function(e){var n=e.itemCount,r=e.itemSize;return r*n},getOffsetForIndexAndAlignment:function(e,n,r,i){var o=e.direction,a=e.height,s=e.itemCount,l=e.itemSize,c=e.layout,d=e.width,f=o==="horizontal"||c==="horizontal",h=f?d:a,v=Math.max(0,s*l-h),m=Math.min(v,n*l),b=Math.max(0,n*l-h+l);switch(r==="smart"&&(i>=b-h&&i<=m+h?r="auto":r="center"),r){case"start":return m;case"end":return b;case"center":{var g=Math.round(b+(m-b)/2);return g<Math.ceil(h/2)?0:g>v+Math.floor(h/2)?v:g}case"auto":default:return i>=b&&i<=m?i:i<b?b:m}},getStartIndexForOffset:function(e,n){var r=e.itemCount,i=e.itemSize;return Math.max(0,Math.min(r-1,Math.floor(n/i)))},getStopIndexForStartIndex:function(e,n,r){var i=e.direction,o=e.height,a=e.itemCount,s=e.itemSize,l=e.layout,c=e.width,d=i==="horizontal"||l==="horizontal",f=n*s,h=d?c:o,v=Math.ceil((h+r-f)/s);return Math.max(0,Math.min(a-1,n+v-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function xd(t,e){for(var n in t)if(!(n in e))return!0;for(var r in e)if(t[r]!==e[r])return!0;return!1}function i0(t,e){var n=t.style,r=cs(t,["style"]),i=e.style,o=cs(e,["style"]);return!xd(n,i)&&!xd(r,o)}var o0=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a0=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s0=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l0=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Cd=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},c0=function(){function t(e,n){var r=[],i=!0,o=!1,a=void 0;try{for(var s=e[Symbol.iterator](),l;!(i=(l=s.next()).done)&&(r.push(l.value),!(n&&r.length===n));i=!0);}catch(c){o=!0,a=c}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return r}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),pt=void 0;typeof window!="undefined"?pt=window:typeof self!="undefined"?pt=self:pt=global;var Ba=null,ja=null,Sd=20,Wa=pt.clearTimeout,Ed=pt.setTimeout,Ha=pt.cancelAnimationFrame||pt.mozCancelAnimationFrame||pt.webkitCancelAnimationFrame,Dd=pt.requestAnimationFrame||pt.mozRequestAnimationFrame||pt.webkitRequestAnimationFrame;Ha==null||Dd==null?(Ba=Wa,ja=function(e){return Ed(e,Sd)}):(Ba=function(e){var n=c0(e,2),r=n[0],i=n[1];Ha(r),Wa(i)},ja=function(e){var n=Dd(function(){Wa(r),e()}),r=Ed(function(){Ha(n),e()},Sd);return[n,r]});function u0(t){var e=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,l=typeof document!="undefined"&&document.attachEvent;if(!l){a=function(y){var S=y.__resizeTriggers__,x=S.firstElementChild,I=S.lastElementChild,_=x.firstElementChild;I.scrollLeft=I.scrollWidth,I.scrollTop=I.scrollHeight,_.style.width=x.offsetWidth+1+"px",_.style.height=x.offsetHeight+1+"px",x.scrollLeft=x.scrollWidth,x.scrollTop=x.scrollHeight},o=function(y){return y.offsetWidth!==y.__resizeLast__.width||y.offsetHeight!==y.__resizeLast__.height},s=function(y){if(!(y.target.className&&typeof y.target.className.indexOf=="function"&&y.target.className.indexOf("contract-trigger")<0&&y.target.className.indexOf("expand-trigger")<0)){var S=this;a(this),this.__resizeRAF__&&Ba(this.__resizeRAF__),this.__resizeRAF__=ja(function(){o(S)&&(S.__resizeLast__.width=S.offsetWidth,S.__resizeLast__.height=S.offsetHeight,S.__resizeListeners__.forEach(function(_){_.call(S,y)}))})}};var c=!1,d="";r="animationstart";var f="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),v="";{var m=document.createElement("fakeelement");if(m.style.animationName!==void 0&&(c=!0),c===!1){for(var b=0;b<f.length;b++)if(m.style[f[b]+"AnimationName"]!==void 0){v=f[b],d="-"+v.toLowerCase()+"-",r=h[b],c=!0;break}}}n="resizeanim",e="@"+d+"keyframes "+n+" { from { opacity: 0; } to { opacity: 0; } } ",i=d+"animation: 1ms "+n+"; "}var g=function(y){if(!y.getElementById("detectElementResize")){var S=(e||"")+".resize-triggers { "+(i||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',x=y.head||y.getElementsByTagName("head")[0],I=y.createElement("style");I.id="detectElementResize",I.type="text/css",t!=null&&I.setAttribute("nonce",t),I.styleSheet?I.styleSheet.cssText=S:I.appendChild(y.createTextNode(S)),x.appendChild(I)}},w=function(y,S){if(l)y.attachEvent("onresize",S);else{if(!y.__resizeTriggers__){var x=y.ownerDocument,I=pt.getComputedStyle(y);I&&I.position==="static"&&(y.style.position="relative"),g(x),y.__resizeLast__={},y.__resizeListeners__=[],(y.__resizeTriggers__=x.createElement("div")).className="resize-triggers";var _=x.createElement("div");_.className="expand-trigger",_.appendChild(x.createElement("div"));var F=x.createElement("div");F.className="contract-trigger",y.__resizeTriggers__.appendChild(_),y.__resizeTriggers__.appendChild(F),y.appendChild(y.__resizeTriggers__),a(y),y.addEventListener("scroll",s,!0),r&&(y.__resizeTriggers__.__animationListener__=function(P){P.animationName===n&&a(y)},y.__resizeTriggers__.addEventListener(r,y.__resizeTriggers__.__animationListener__))}y.__resizeListeners__.push(S)}},D=function(y,S){if(l)y.detachEvent("onresize",S);else if(y.__resizeListeners__.splice(y.__resizeListeners__.indexOf(S),1),!y.__resizeListeners__.length){y.removeEventListener("scroll",s,!0),y.__resizeTriggers__.__animationListener__&&(y.__resizeTriggers__.removeEventListener(r,y.__resizeTriggers__.__animationListener__),y.__resizeTriggers__.__animationListener__=null);try{y.__resizeTriggers__=!y.removeChild(y.__resizeTriggers__)}catch(x){}}};return{addResizeListener:w,removeResizeListener:D}}var Md=function(t){l0(e,t);function e(){var n,r,i,o;o0(this,e);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return o=(r=(i=Cd(this,(n=e.__proto__||Object.getPrototypeOf(e)).call.apply(n,[this].concat(s))),i),i.state={height:i.props.defaultHeight||0,width:i.props.defaultWidth||0},i._onResize=function(){var c=i.props,d=c.disableHeight,f=c.disableWidth,h=c.onResize;if(i._parentNode){var v=i._parentNode.offsetHeight||0,m=i._parentNode.offsetWidth||0,b=window.getComputedStyle(i._parentNode)||{},g=parseInt(b.paddingLeft,10)||0,w=parseInt(b.paddingRight,10)||0,D=parseInt(b.paddingTop,10)||0,E=parseInt(b.paddingBottom,10)||0,y=v-D-E,S=m-g-w;(!d&&i.state.height!==y||!f&&i.state.width!==S)&&(i.setState({height:v-D-E,width:m-g-w}),h({height:v,width:m}))}},i._setRef=function(c){i._autoSizer=c},r),Cd(i,o)}return a0(e,[{key:"componentDidMount",value:function(){var r=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=u0(r),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var r=this.props,i=r.children,o=r.className,a=r.disableHeight,s=r.disableWidth,l=r.style,c=this.state,d=c.height,f=c.width,h={overflow:"visible"},v={},m=!1;return a||(d===0&&(m=!0),h.height=0,v.height=d),s||(f===0&&(m=!0),h.width=0,v.width=f),u.exports.createElement("div",{className:o,ref:this._setRef,style:s0({},h,l)},!m&&i(v))}}]),e}(u.exports.PureComponent);Md.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}};function oo(t,e,n){if(Pn(t)){const{nodeClass:r,initialProps:i}=t,o=new r;return i&&Object.assign(o,i),H.instance.executeCommandWithHistory(ke.ADD_OBJECTS,o,{parents:e,befores:n}),!0}return!1}function d0(t,e){if(Pn(t)){const{nodeClass:n,initialProps:r}=t,i=new n;return r&&Object.assign(i,r),Q.instance.getCursorSpawnPosition(e,i.position),H.instance.executeCommandWithHistory(ke.ADD_OBJECTS,i),!0}return!1}const f0=ee.div`
  display: inline-block;
  pointer-events: none;
  background-color: rgba(21, 23, 27, 0.9);
  border-radius: 3px;
  padding: 8px;
  max-width: 320px;
  overflow: hidden;
  overflow-wrap: break-word;
  user-select: none;

  h6 {
    font-size: 14px;
  }

  ul {
    margin-top: 4px;
  }

  li {
    margin-bottom: 4px;
    margin-left: 4px;
    font-family: "Lucida Console", Monaco, monospace;
    font-size: 12px;
  }
`,Od=ee(cl)`
  color: ${t=>t.color};
`;function p0({node:t}){const e=u.exports.useContext(is),{t:n}=Pt(),r=u.exports.useMemo(()=>({warning:e.yellow,error:e.red}),[e]),i=u.exports.useCallback(()=>p.createElement(f0,null,p.createElement("h6",null,n("editor:hierarchy.isseus")),p.createElement("ul",null,t.issues.map((a,s)=>p.createElement("li",{key:s},p.createElement(Od,{size:12,color:r[a.severity]})," ",a.message)))),[t,r]);let o="warning";for(const a of t.issues)if(a.severity==="error"){o="error";break}return p.createElement(df,{renderContent:i},p.createElement(Od,{size:14,color:r[o]}))}const h0={multiple:!0,accepts:$f};function v0({node:t}){return t}const m0=ee.div`
  outline: none;
  user-select: none;
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  color: ${t=>t.theme.text2};
`,g0=ee.li``;function b0({root:t,selected:e,active:n,theme:r}){return e?n?r.bluePressed:r.selected:t?r.panel2:r.panel}function y0(t,e){return e.nodes[t].object.id}function $a(t){return"hierarchy-node-"+t.id}const w0=ee.div`
  display: flex;
  flex-direction: column;
  outline: none;
  overflow: hidden;

  background-color: ${b0};
  border-bottom: ${t=>t.root?t.theme.borderStyle:"none"};

  color: ${t=>t.selected||t.focused?t.theme.text:t.theme.text2};

  :hover,
  :focus {
    background-color: ${t=>t.selected?t.theme.blueHover:t.theme.hover};
    color: ${t=>t.theme.text};
  }

  :active {
    background-color: ${t=>t.theme.bluePressed};
    color: ${t=>t.theme.text};
  }
`,x0=ee.div`
  display: flex;
  flex: 1;
  padding: 2px 4px 2px 0;
`,C0=ee.div`
  display: flex;
  flex: 1;
`,S0=ee.div`
  outline: none;
  display: flex;
  padding-right: 8px;
  padding-left: ${t=>t.depth*8+2+"px"};
`,E0=ee.div`
  padding: 2px 4px;
  margin: 0 4px;

  :hover {
    color: ${t=>t.theme.text};
    background-color: ${t=>t.theme.hover2};
    border-radius: 3px;
  }
`,D0=ee.div`
  width: 20px;
`,M0=ee.div`
  width: 12px;
  height: 12px;
  margin: 2px 4px;
`,O0=ee.div`
  background-color: ${t=>t.isOver&&t.canDrop?"rgba(255, 255, 255, 0.3)":"transparent"};
  color: ${t=>t.isOver&&t.canDrop?t.theme.text:"inherit"};
  border-radius: 4px;
  padding: 0 2px;
`;function T0({isOver:t,canDrop:e,position:n}){return t&&e?`border-${n==="before"?"top":"bottom"}: 2px solid rgba(255, 255, 255, 0.3)`:""}const Td=ee.div`
  height: 4px;
  box-sizing: content-box;
  ${T0};
  margin-left: ${t=>t.depth>0?t.depth*8+20:0}px;
`,P0=ee.input`
  position: absolute;
  top: -3px;
  background-color: ${t=>t.theme.inputBackground};
  color: ${t=>t.theme.text};
  border: ${t=>t.theme.borderStyle};
  padding: 2px 4px;
`,_0=ee.div`
  position: relative;
  height: 15px;
`;function rn(t,e){return!mf(t,n=>n!==e)}function I0({index:t,data:{nodes:e,renamingNode:n,onToggle:r,onKeyDown:i,onMouseDown:o,onClick:a,onChangeName:s,onRenameSubmit:l,onUpload:c},style:d}){const f=e[t],{isLeaf:h,object:v,depth:m,selected:b,active:g,iconComponent:w,isCollapsed:D,childIndex:E,lastChild:y}=f,S=u.exports.useCallback(z=>{z.stopPropagation(),r&&r(z,f)},[r,f]),x=u.exports.useCallback(z=>{z.stopPropagation(),i&&i(z,f)},[i,f]),I=u.exports.useCallback(z=>{z.key==="Escape"?l(f,null):z.key==="Enter"&&l(f,z.target.value)},[l,f]),_=u.exports.useCallback(z=>{a(z,f)},[f,a]),F=u.exports.useCallback(z=>{o(z,f)},[f,o]),R=u.exports.useCallback(z=>{s(f,z.target.value)},[f,s]),P=u.exports.useCallback(z=>{l(f,z.target.value)},[l,f]),O=n&&n.id===f.id,[j,N,k]=ff({type:Te.Node,item(){const z=H.instance.selected.length>1;return{type:Te.Node,multiple:z,value:z?H.instance.selected:H.instance.selected[0]}},canDrag(){return!H.instance.selected.some(z=>!z.parent)},collect:z=>({isDragging:!!z.isDragging()})});u.exports.useEffect(()=>{k(pf(),{captureDraggingState:!0})},[k]);const[{canDropBefore:V,isOverBefore:T},C]=pr({accept:[Te.Node,Te.File,...hr],drop(z){if(z.files){c(z.files).then(q=>{if(q)for(const J of q)H.instance.addMedia({url:J.url},v.parent,v)});return}oo(z,v.parent,v)||H.instance.executeCommandWithHistory(ke.REPARENT,z.value,{parents:v.parent,befores:v})},canDrop(z,q){return!q.isOver()||!v.parent?!1:Pn(z)?!0:z.type===Te.Node?v.parent&&!(z.multiple?z.value.some(J=>rn(J,v)):rn(z.value,v)):!0},collect:z=>({canDropBefore:z.canDrop(),isOverBefore:z.isOver()})}),[{canDropAfter:M,isOverAfter:A},W]=pr({accept:[Te.Node,Te.File,...hr],drop(z){const q=!y&&v.parent.children[E+1];if(z.files){c(z.files).then(J=>{if(J)for(const le of J)H.instance.addMedia({url:le.url},v.parent,q)});return}oo(z,v.parent,q)||H.instance.executeCommandWithHistory(ke.REPARENT,z.value,{parents:v.parent,befores:q})},canDrop(z,q){return!q.isOver()||!v.parent?!1:Pn(z)?!0:z.type===Te.Node?v.parent&&!(z.multiple?z.value.some(J=>rn(J,v)):rn(z.value,v)):!0},collect:z=>({canDropAfter:z.canDrop(),isOverAfter:z.isOver()})}),[{canDropOn:L,isOverOn:K},Z]=pr({accept:[Te.Node,Te.File,...hr],drop(z){if(z.files){c(z.files).then(q=>{if(q)for(const J of q)H.instance.addMedia({url:J.url},v)});return}oo(z,v)||H.instance.executeCommandWithHistory(ke.REPARENT,z.value,{parents:v})},canDrop(z,q){return q.isOver()?Pn(z)?!0:z.type===Te.Node?!(z.multiple?z.value.some(J=>rn(J,v)):rn(z.value,v)):!0:!1},collect:z=>({canDropOn:z.canDrop(),isOverOn:z.isOver()})});return p.createElement(g0,{style:d},p.createElement(hf,{holdToDisplay:-1,id:"hierarchy-node-menu",node:f,collect:v0},p.createElement(w0,{ref:N,id:$a(f),onMouseDown:F,onClick:_,tabIndex:"0",onKeyDown:x,root:m===0,selected:b,active:g},p.createElement(Td,{ref:C,depth:m,position:"before",canDrop:V,isOver:T}),p.createElement(S0,{depth:m,ref:Z},h?p.createElement(D0,null):p.createElement(E0,{collapsed:D,onClick:S},D?p.createElement(sl,{size:12}):p.createElement(al,{size:12})),p.createElement(x0,null,p.createElement(M0,{as:w}),p.createElement(C0,null,O?p.createElement(_0,null,p.createElement(P0,{type:"text",onChange:R,onKeyDown:I,onBlur:P,value:n.name,autoFocus:!0})):p.createElement(O0,{canDrop:L,isOver:K},v.name)),f.object.issues&&f.object.issues.length>0&&p.createElement(p0,{node:f.object}))),p.createElement(Td,{depth:m,ref:W,position:"after",canDrop:M,isOver:A}))))}const R0=u.exports.memo(I0,i0);function*k0(t){const e=[];if(!!Q.instance.scene)for(e.push({depth:0,object:Q.instance.scene,childIndex:0,lastChild:!0});e.length!==0;){const{depth:n,object:r,childIndex:i,lastChild:o}=e.pop(),a=vr.instance.getEditorFromNode(r)||gd,s=a.WrappedComponent?a.WrappedComponent.iconComponent:a.iconComponent,l=t[r.id];if(yield{id:r.id,isLeaf:r.children.filter(c=>c.isNode).length===0,isCollapsed:l,depth:n,object:r,iconComponent:s,selected:H.instance.selected.indexOf(r)!==-1,active:H.instance.selected.length>0&&r===H.instance.selected[H.instance.selected.length-1],childIndex:i,lastChild:o},r.children.length!==0&&!l)for(let c=r.children.length-1;c>=0;c--){const d=r.children[c];d.isNode&&e.push({depth:n+1,object:d,childIndex:c,lastChild:c===0})}}}function N0(){const t=vf(h0),[e,n]=u.exports.useState(null),[r,i]=u.exports.useState({}),[o,a]=u.exports.useState([]),s=u.exports.useCallback(()=>{const P=Array.from(k0(r));a(P)},[r]),{t:l}=Pt(),c=u.exports.useCallback(P=>{delete r[P.id],i({...r})},[r]),d=u.exports.useCallback(P=>{i({...r,[P.id]:!0})},[i,r]),f=u.exports.useCallback(P=>{P.object.traverse(O=>{O.isNode&&delete r[O.id]}),i({...r})},[i,r]),h=u.exports.useCallback(P=>{P.object.traverse(O=>{O.isNode&&(r[O.id]=!0)}),i({...r})},[i,r]),v=u.exports.useCallback(()=>{i({})},[i]),m=u.exports.useCallback(()=>{const P={};Q.instance.scene.traverse(O=>{O.isNode&&(P[O.id]=!0)}),i(P)},[i]),b=u.exports.useCallback((P,O)=>{(O==="name"||!O)&&s()},[s]);u.exports.useEffect(()=>(H.instance.addListener(Y.SCENE_GRAPH_CHANGED.toString(),s),H.instance.addListener(Y.SELECTION_CHANGED.toString(),s),H.instance.addListener(Y.OBJECTS_CHANGED.toString(),b),()=>{H.instance.removeListener(Y.SCENE_GRAPH_CHANGED.toString(),s),H.instance.removeListener(Y.SELECTION_CHANGED.toString(),s),H.instance.removeListener(Y.OBJECTS_CHANGED.toString(),b)}),[s,b]);const g=u.exports.useCallback((P,O)=>{P.detail===1&&(P.shiftKey?H.instance.executeCommandWithHistory(ke.TOGGLE_SELECTION,O.object):O.selected||H.instance.executeCommandWithHistory(ke.REPLACE_SELECTION,O.object))},[]),w=u.exports.useCallback((P,O)=>{P.detail===2&&Le.instance.editorControls.focus([O.object])},[]),D=u.exports.useCallback((P,O)=>{r[O.id]?c(O):d(O)},[r,c,d]),E=u.exports.useCallback((P,O)=>{if(P.key==="ArrowDown"){P.preventDefault();const j=o.indexOf(O),N=j!==-1&&o[j+1];if(N){P.shiftKey&&H.instance.executeCommandWithHistory(ke.ADD_TO_SELECTION,N.object);const k=document.getElementById($a(N));k&&k.focus()}}else if(P.key==="ArrowUp"){P.preventDefault();const j=o.indexOf(O),N=j!==-1&&o[j-1];if(N){P.shiftKey&&H.instance.executeCommandWithHistory(ke.ADD_TO_SELECTION,N.object);const k=document.getElementById($a(N));k&&k.focus()}}else P.key==="ArrowLeft"&&O.object.children.filter(j=>j.isNode).length>0?P.shiftKey?h(O):d(O):P.key==="ArrowRight"&&O.object.children.filter(j=>j.isNode).length>0?P.shiftKey?f(O):O.object.children.filter(j=>j.isNode).length>0&&c(O):P.key==="Enter"&&(P.shiftKey?H.instance.executeCommandWithHistory(ke.TOGGLE_SELECTION,O.object):H.instance.executeCommandWithHistory(ke.REPLACE_SELECTION,O.object))},[o,c,d,f,h]),y=u.exports.useCallback((P,O)=>{let j=O.selected?H.instance.selected:O.object;H.instance.executeCommandWithHistory(ke.REMOVE_OBJECTS,j)},[]),S=u.exports.useCallback((P,O)=>{let j=O.selected?H.instance.selected:O.object;H.instance.executeCommandWithHistory(ke.DUPLICATE_OBJECTS,j)},[]),x=u.exports.useCallback((P,O)=>{const j=O.selected?H.instance.selected:O.object;H.instance.executeCommandWithHistory(ke.GROUP,j)},[]),I=u.exports.useCallback((P,O)=>{n({id:O.id,name:O.object.name})},[n]),_=u.exports.useCallback((P,O)=>{n({id:P.id,name:O})},[n]),F=u.exports.useCallback((P,O)=>{O!==null&&H.instance.executeCommand(ke.MODIFY_PROPERTY,P.object,{properties:{name:O}}),n(null)},[]),[,R]=pr({accept:[Te.Node,Te.File,...hr],drop(P,O){if(!O.didDrop()){if(P.files){t(P.files).then(j=>{if(j)for(const N of j)H.instance.addMedia({url:N.url})});return}oo(P)||H.instance.executeCommandWithHistory(ke.REPARENT,P.value,{parents:Q.instance.scene})}},canDrop(P,O){return O.isOver({shallow:!0})?Pn(P)?!0:P.type===Te.Node?!(P.multiple?P.value.some(j=>rn(j,Q.instance.scene)):rn(P.value,Q.instance.scene)):!0:!1}});return u.exports.useEffect(()=>{s()},[r,s]),p.createElement(u.exports.Fragment,null,p.createElement(m0,null,Q.instance.scene&&p.createElement(Md,null,({height:P,width:O})=>p.createElement(r0,{height:P,width:O,itemSize:32,itemCount:o.length,itemData:{renamingNode:e,nodes:o,onKeyDown:E,onChangeName:_,onRenameSubmit:F,onMouseDown:g,onClick:w,onToggle:D,onUpload:t},itemKey:y0,outerRef:R,innerElementType:"ul"},R0))),p.createElement(fs,{id:"hierarchy-node-menu"},p.createElement(fn,{onClick:I},l("editor:hierarchy.lbl-rename")),p.createElement(fn,{onClick:S},l("editor:hierarchy.lbl-duplicate"),p.createElement("div",null,mo+"+ D")),p.createElement(fn,{onClick:x},l("editor:hierarchy.lbl-group"),p.createElement("div",null,mo+"+ G")),p.createElement(fn,{onClick:y},l("editor:hierarchy.lbl-delete")),p.createElement(fn,{onClick:v},l("editor:hierarchy.lbl-expandAll")),p.createElement(fn,{onClick:m},l("editor:hierarchy.lbl-collapseAll"))))}const Ka=ee.div`
  display: flex;
  flex: 1;
  flex-direction: row;
  align-items: center;
`;ee.div`
  position: relative;
  display: flex;
  flex: 1;
  flex-direction: column;
  border-radius: 4px;
  background-color: ${t=>t.theme.panel};
  overflow: hidden;
  user-select: none;
`;ee.div`
  display: flex;
  padding: 4px;
  height: 24px;
  align-items: center;
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
`;const Va=ee.div`
  margin-right: 8px;
`,Ua=ee.div``;ee.div`
  display: flex;
  flex: 1;
  flex-direction: column;
  position: relative;
  overflow: hidden;
`;class A0 extends u.exports.Component{constructor(e){super(e);this.translation=new Vf}componentDidMount(){H.instance.addListener(Y.OBJECTS_CHANGED.toString(),this.onObjectsChanged)}shouldComponentUpdate(e){return e.node!==this.props.node}componentWillUnmount(){H.instance.removeListener(Y.OBJECTS_CHANGED.toString(),this.onObjectsChanged)}translation;onObjectsChanged=(e,n)=>{for(let r=0;r<e.length;r++)if(e[r]===this.props.node&&(n==="position"||n==="rotation"||n==="scale"||n==="matrix"||n==null)){this.forceUpdate();return}};onChangePosition=e=>{H.instance.executeCommandWithHistoryOnSelection(ke.POSITION,{positions:e})};onChangeRotation=e=>{H.instance.executeCommandWithHistoryOnSelection(ke.ROTATION,{rotations:e})};onChangeScale=e=>{H.instance.executeCommandWithHistoryOnSelection(ke.SCALE,{scales:e,overrideScale:!0})};render(){const{node:e}=this.props;return p.createElement(gf,{name:this.props.t("editor:properties.transform.title")},p.createElement(pn,{name:"Position",label:this.props.t("editor:properties.transform.lbl-postition")},p.createElement(ps,{value:e.position,smallStep:.01,mediumStep:.1,largeStep:1,onChange:this.onChangePosition})),p.createElement(pn,{name:"Rotation",label:this.props.t("editor:properties.transform.lbl-rotation")},p.createElement(bf,{value:e.rotation,onChange:this.onChangeRotation,unit:"\xB0"})),p.createElement(pn,{name:"Scale",label:this.props.t("editor:properties.transform.lbl-scale")},p.createElement(ps,{uniformScaling:!0,smallStep:.01,mediumStep:.1,largeStep:1,value:e.scale,onChange:this.onChangeScale})))}}var L0=Tn()(A0);const z0=ee(pn)`
  label {
    width: auto !important;
    padding-right: 8px;
  }
`;class F0 extends u.exports.Component{constructor(e){super(e);this.state={name:this.props.node.name,focusedNode:null},this.t=this.props.t}t;onUpdateName=e=>{this.setState({name:e})};onFocus=()=>{this.setState({focusedNode:this.props.node,name:this.props.node.name})};onBlurName=()=>{this.props.node.name!==this.state.name&&this.props.node===this.state.focusedNode&&H.instance.setPropertyOnSelection("name",this.state.name),this.setState({focusedNode:null})};onKeyUpName=e=>{e.key==="Enter"&&(e.preventDefault(),H.instance.setPropertyOnSelection("name",this.state.name))};render(){const e=this.state.focusedNode?this.state.name:this.props.node.name;return p.createElement(z0,{name:"Name",label:this.t("editor:properties.name.lbl-name")},p.createElement(ho,{value:e,onChange:this.onUpdateName,onFocus:this.onFocus,onBlur:this.onBlurName,onKeyUp:this.onKeyUpName}))}}var B0=Tn()(F0);const j0=ee.div`
  display: flex;
  flex: 1;
  flex-direction: column;
`,W0=ee.div`
  background-color: ${t=>t.theme.panel2};
  border: none !important;
  padding-bottom: 0 !important;
`,H0=ee.div`
  display: flex;
  flex-flow: row wrap;
  align-items: flex-start;
  padding: 8px 0;
`,Pd=ee(pn)`
  display: flex;
  flex: 0;

  & > label {
    width: auto !important;
    padding-right: 8px;
  }
`,$0=ee(pn)`
 display: flex;
 flex: 0;

 & > label {
   width: auto !important;
   padding-right: 8px;
 }
`,K0=ee.div`
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow-y: auto;
  height: 100%;
`,_d=ee.div`
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
`;class V0 extends u.exports.Component{constructor(e){super(e);this.state={selected:H.instance.selected}}componentDidMount(){H.instance.addListener(Y.SELECTION_CHANGED.toString(),this.onSelectionChanged),H.instance.addListener(Y.OBJECTS_CHANGED.toString(),this.onObjectsChanged)}componentWillUnmount(){H.instance.removeListener(Y.SELECTION_CHANGED.toString(),this.onSelectionChanged),H.instance.removeListener(Y.OBJECTS_CHANGED.toString(),this.onObjectsChanged)}onSelectionChanged=()=>{this.setState({selected:H.instance.selected})};onObjectsChanged=(e,n)=>{const r=H.instance.selected;if(!(n==="position"||n==="rotation"||n==="scale"||n==="matrix")){for(let i=0;i<e.length;i++)if(r.indexOf(e[i])!==-1){this.setState({selected:H.instance.selected});return}}};onChangeVisible=e=>{H.instance.setPropertyOnSelection("visible",e)};onChangeBakeStatic=e=>{H.instance.setPropertyOnSelection("includeInCubemapBake",e)};onChangePersist=e=>{H.instance.setPropertyOnSelection("persist",e)};render(){const e=H.instance.selected;let n;if(e.length===0)n=p.createElement(_d,null,this.props.t("editor:properties.noNodeSelected"));else{const r=e[e.length-1],i=vr.instance.getEditorFromNode(r)||gd,o=e.length>1;let a=!0;for(let d=0;d<e.length-1;d++)if(vr.instance.getEditorFromNode(e[d])!==i){a=!1;break}let s;a?s=p.createElement(i,{multiEdit:o,node:r}):s=p.createElement(_d,null,this.props.t("editor:properties.multipleNodeSelected"));const l=e.some(d=>d.disableTransform),c=e.some(d=>d.haveStaticTags);n=p.createElement(j0,null,p.createElement(W0,null,p.createElement(H0,null,p.createElement(B0,{node:r}),r.nodeName!=="Scene"&&p.createElement(p.Fragment,null,p.createElement(Pd,{name:"Visible",label:this.props.t("editor:properties.lbl-visible")},p.createElement(fr,{value:r.visible,onChange:this.onChangeVisible})),c&&p.createElement(Pd,{name:"Bake Static",label:"Bake Static"},p.createElement(fr,{value:r.includeInCubemapBake,onChange:this.onChangeBakeStatic})))),p.createElement($0,{name:"Persist",label:this.props.t("editor:properties.lbl-persist")},p.createElement(fr,{value:r.persist,onChange:this.onChangePersist})),!l&&p.createElement(L0,{node:r})),s)}return p.createElement(K0,null,n)}}var U0=Tn()(V0);const G0=4,q0="2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",Y0={name:"Crater"},X0={"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC":{name:"default_scene",components:[{name:"mtdata",props:{meta_data:""}},{name:"fog",props:{type:"disabled",color:"#ffffff",near:.0025,far:1e3,density:.0025}},{name:"audio-settings",props:{avatarDistanceModel:"inverse",avatarRolloffFactor:2,avatarRefDistance:1,avatarMaxDistance:1e4,mediaVolume:1,mediaDistanceModel:"inverse",mediaRolloffFactor:1,mediaRefDistance:20,mediaMaxDistance:1e4,mediaConeInnerAngle:360,mediaConeOuterAngle:0,mediaConeOuterGain:0}},{name:"simple-materials",props:{simpleMaterials:!1}},{name:"renderer-settings",props:{LODs:{x:5,y:15,z:30},overrideRendererSettings:!1,csm:!0,toneMapping:1,toneMappingExposure:.8,shadowMapType:2}},{name:"envmap",props:{type:1,envMapIntensity:1,envMapTextureType:0,envMapSourceURL:"/hdr/cubemap/Bridge2/"}}]},"1463EAC0-883F-493A-9A33-6757CC8FF48B":{name:"scene preview camera",components:[{name:"transform",props:{position:{x:0,y:5,z:10},rotation:{x:-.4636,y:0,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"scene-preview-camera",props:{}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:0},"ED0888E7-4032-4DD9-9B43-59B02ECCCB7E":{name:"skybox",components:[{name:"transform",props:{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"skybox",props:{backgroundColor:"#000000",equirectangularPath:"/hdr/city.jpg",cubemapPath:"/hdr/cubemap/Bridge2/",backgroundType:3,skyboxProps:{turbidity:10,rayleigh:1,luminance:1,mieCoefficient:.004999999999999893,mieDirectionalG:.99,inclination:.10471975511965978,azimuth:.16666666666666666,distance:1}}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:1},"1B698482-C15A-4CEC-9247-03873520DF70":{name:"ground plane",components:[{name:"transform",props:{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"ground-plane",props:{color:"#7ed321"}},{name:"shadow",props:{receive:!0}},{name:"walkable",props:{}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:2},"1B698483-C15A-4CEC-9247-03873520DF70":{name:"spawn point",components:[{name:"transform",props:{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"spawn-point",props:{}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:3},"1B698484-C15A-4CEC-9247-03873520DF70":{name:"post processing",components:[{name:"transform",props:{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!1}},{name:"postprocessing",props:{options:{FXAAEffect:{isActive:!0,blendFunction:13},OutlineEffect:{isActive:!0,blendFunction:16,patternTexture:null,edgeStrength:1,pulseSpeed:0,visibleEdgeColor:16777215,hiddenEdgeColor:2230538,resolutionScale:.5,width:-1,height:-1,kernelSize:0,blur:!1,xRay:!0},SSAOEffect:{isActive:!1,blendFunction:10,distanceScaling:!0,depthAwareUpsampling:!0,samples:16,rings:7,distanceThreshold:.125,distanceFalloff:.02,minRadiusScale:1,bias:.25,radius:.01,intensity:2,fade:.05},DepthOfFieldEffect:{isActive:!1,blendFunction:13,focusDistance:.02,focalLength:.5,bokehScale:1},BloomEffect:{isActive:!0,blendFunction:16,kernelSize:2,luminanceThreshold:1,luminanceSmoothing:.1,intensity:.2},ToneMappingEffect:{isActive:!1,blendFunction:13,adaptive:!0,resolution:512,middleGrey:.6,maxLuminance:32,averageLuminance:1,adaptationRate:2},BrightnessContrastEffect:{isActive:!1,brightness:.05,contrast:.1},HueSaturationEffect:{isActive:!1,hue:0,saturation:-.15},ColorDepthEffect:{isActive:!1,bits:16},LinearTosRGBEffect:{isActive:!1}}}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:4},"1B698484-C15A-4CEC-9247-03873520DF71":{name:"hemisphere light",components:[{name:"transform",props:{position:{x:0,y:10,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"hemisphere-light",props:{skyColor:"#ffffff",groundColor:"#ffffff",intensity:1}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:5},"46BB52A2-E365-410F-BC37-5873691B48C9":{name:"directional light",components:[{name:"transform",props:{position:{x:0,y:10,z:0},rotation:{x:-.5235987755982988,y:.2617993877991494,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"directional-light",props:{color:"#ffffff",intensity:1,castShadow:!0,shadowMapResolution:[512,512],shadowBias:0,shadowRadius:1,cameraFar:100,showCameraHelper:!1}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:6}};var Id={version:G0,root:q0,metadata:Y0,entities:X0};const J0=4,Z0="2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",Q0={name:"Crater"},ew={"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC":{name:"Crater"},"E8D3129B-68BF-473F-92B9-6DAEC83514BB":{name:"Skybox",components:[{name:"transform",props:{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"skybox",props:{turbidity:6.09,rayleigh:.82,luminance:1.055,mieCoefficient:.043,mieDirectionalG:.8,inclination:.10471975511965978,azimuth:.2333333333333333,distance:8e3}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:0},"D8061EA5-F0C4-4452-ADFE-B179E2F20CB1":{name:"Directional Light",components:[{name:"transform",props:{position:{x:-1,y:3,z:0},rotation:{x:1.0256860445560714,y:.3490658503988659,z:-.4417643021697627},scale:{x:.9999999999999996,y:.9999999999999998,z:.9999999999999997}}},{name:"visible",props:{visible:!0}},{name:"directional-light",props:{color:"#ffffff",intensity:3,castShadow:!0,shadowMapResolution:[512,512],shadowBias:0,shadowRadius:1}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:1},"633CD01A-BC2A-4584-99E2-2A3CFE2C8AD9":{name:"Spawn Point",components:[{name:"transform",props:{position:{x:2,y:0,z:2},rotation:{x:3.141592653589793,y:-.7853981633974483,z:3.141592653589793},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"spawn-point",props:{}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:2},"2D490729-384D-49AF-A755-9D6F70D56325":{name:"Floor Plan",components:[{name:"transform",props:{position:{x:0,y:.005,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}},{name:"visible",props:{visible:!0}},{name:"floor-plan",props:{autoCellSize:!1,cellSize:.1200000000000001,cellHeight:.1,agentHeight:1.7,agentRadius:.19999999999999996,agentMaxClimb:.5,agentMaxSlope:60,regionMinSize:4,maxTriangles:1e3,forceTrimesh:!1}}],parent:"2266BED7-6CC4-48A6-95DD-9BCD3CF9EAFC",index:3}};var Rd={version:J0,root:Z0,metadata:Q0,entities:ew};const tw=ee.button`
  width: 40px;
  height: 40px;
  border: none;
  color: ${t=>t.theme.white};
  cursor: pointer;
  position: relative;

  background-color: ${t=>t.isSelected?t.theme.blue:t.theme.toolbar};

  &:hover {
    background-color: ${t=>t.isSelected?t.theme.blueHover:t.theme.panel};
  }
`,nw=ee.div`
  width: 14px;
  height: 14px;
  font-size: 14px;
`;function rw({id:t,icon:e,onClick:n,isSelected:r,tooltip:i}){return p.createElement(ot,{id:t,info:i,position:"bottom"},p.createElement(tw,{isSelected:r,onClick:n},p.createElement(nw,{as:e})))}class iw extends p.Component{constructor(e){super(e);this.state={isMenuOpen:!1},this.t=this.props.t}t;toggleMenu=e=>{if(this.state.isMenuOpen){this.setState({isMenuOpen:!1});return}const n=0,r=e.currentTarget.offsetHeight;yf({position:{x:n,y:r},target:e.currentTarget,id:"menu"}),this.setState({isMenuOpen:!0})};renderMenu=e=>!e.subCommnads||e.subCommnads.length===0?p.createElement(fn,{key:e.name,onClick:e.action},e.name,e.hotkey&&p.createElement("div",null,e.hotkey)):p.createElement(wf,{key:e.name,title:e.name,hoverDelay:0},e.subCommnads.map(n=>this.renderMenu(n)));render(){return p.createElement(p.Fragment,null,p.createElement(rw,{icon:ol,onClick:this.toggleMenu,isSelected:this.state.isMenuOpen,id:"menu"}),p.createElement(fs,{id:"menu",onHide:()=>this.setState({isMenuOpen:!1})},this.props.commands.map(e=>this.renderMenu(e))))}}var ow=Tn()(iw);function Zn(){return Zn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zn.apply(this,arguments)}var kd=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Zn({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},t,{ref:e}),u.exports.createElement("path",{d:"M15 3H4.984c-1.103 0-2 .897-2 2v14.016c0 1.103.897 2 2 2H19c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2h-4zm4 5h-3V5h3v3zM4.984 10h3v4.016h-3V10zm5 0H14v4.016H9.984V10zM16 10h3v4.016h-3V10zm-2-5v3H9.984V5H14zM7.984 5v3h-3V5h3zm-3 11.016h3v3h-3v-3zm5 3v-3H14v3H9.984zm6.016 0v-3h3.001v3H16z"}))});kd.displayName="Grid";const Ga="_toolbarContainer_r8qha_1",aw="_statsContainer_r8qha_14",Nd="_toolbarNumericStepperInput_r8qha_43",on="_toolbarInputGroup_r8qha_63",qt="_toolButton_r8qha_73",xn="_selected_r8qha_89",Ad="_toolIcon_r8qha_95",Qn="_selectInput_r8qha_107",Ld="_playButtonContainer_r8qha_133";var Kr={toolbarContainer:Ga,statsContainer:aw,toolbarNumericStepperInput:Nd,toolbarInputGroup:on,toolButton:qt,selected:xn,toolIcon:Ad,selectInput:Qn,playButtonContainer:Ld},zd=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Zn({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},t,{ref:e}),u.exports.createElement("path",{d:"M15 19V5l-8 7z"}))});zd.displayName="CaretLeft";var Fd=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Zn({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},t,{ref:e}),u.exports.createElement("path",{d:"m9 19 8-7-8-7z"}))});Fd.displayName="CaretRight";const sw=ee.div`
  display: flex;
  flex: 1;
  width: 100%;
  height: 24px;

  input {
    border-left-width: 0;
    border-right-width: 0;
    border-radius: 0;
  }
`,Bd=ee.button`
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: ${t=>t.value?t.theme.blue:t.theme.toolbar};

  border: 1px solid ${t=>t.theme.border};
  color: ${t=>t.theme.text};

  width: 20px;
  padding: 0;

  ${t=>t.left?"border-top-left-radius: 4px; border-bottom-left-radius: 4px;":"border-top-right-radius: 4px; border-bottom-right-radius: 4px;"}

  :hover {
    background-color: ${t=>t.theme.blueHover};
  }

  :active {
    background-color: ${t=>t.theme.blue};
  }
`;function lw({style:t,className:e,decrementTooltip:n,incrementTooltip:r,...i}){const o=u.exports.useRef(),a=u.exports.useCallback(()=>{o.current.decrement()},[o]),s=u.exports.useCallback(()=>{o.current.increment()},[o]);return p.createElement(sw,{style:t,className:e},p.createElement(ot,{info:n,position:"bottom"},p.createElement(Bd,{left:!0,onClick:a},p.createElement(zd,{size:16}))),p.createElement(xf,{ref:o,...i}),p.createElement(ot,{info:r,position:"bottom"},p.createElement(Bd,{right:!0,onClick:s},p.createElement(Fd,{size:16}))))}const cw=()=>{const[t,e]=u.exports.useState(!0),[n,r]=u.exports.useState(0);u.exports.useEffect(()=>(H.instance.addListener(Y.GRID_HEIGHT_CHANGED.toString(),o),H.instance.addListener(Y.GRID_VISIBILITY_CHANGED.toString(),i),()=>{H.instance.removeListener(Y.GRID_HEIGHT_CHANGED.toString(),o),H.instance.removeListener(Y.GRID_VISIBILITY_CHANGED.toString(),i)}),[]);const i=()=>{e(Q.instance.grid.visible)},o=()=>{r(Q.instance.grid.position.y)},a=()=>{Q.instance.grid.toggleGridVisible()},s=l=>{Q.instance.grid.setGridHeight(l)};return p.createElement("div",{id:"transform-grid",className:on},p.createElement(ot,{info:"Toggle Grid Visibility"},p.createElement("button",{onClick:a,className:qt+" "+(t?xn:"")},p.createElement(kd,{size:16}))),p.createElement(lw,{className:Nd,value:n,onChange:s,precision:.01,smallStep:.5,mediumStep:1,largeStep:5,unit:"m",incrementTooltip:"[-] Increment Grid Height",decrementTooltip:"[=] Decrement Grid Height"}))},uw=()=>{const[t,e]=u.exports.useState(Ht.Translate),n=Le.instance.editorControls;u.exports.useEffect(()=>(H.instance.addListener(Y.TRANSFROM_MODE_CHANGED.toString(),r),()=>{H.instance.removeListener(Y.TRANSFROM_MODE_CHANGED.toString(),r)}),[]);const r=()=>{e(n.transformMode)};return p.createElement("div",{className:on},p.createElement(ot,{id:"translate-button",info:"[T] Translate",position:"bottom"},p.createElement("button",{className:qt+" "+(t===Ht.Translate?xn:""),onClick:()=>n.setTransformMode(Ht.Translate)},p.createElement(rl,{size:12}))),p.createElement(ot,{id:"rotate-button",info:"[R] Rotate",position:"bottom"},p.createElement("button",{className:qt+" "+(t===Ht.Rotate?xn:""),onClick:()=>n.setTransformMode(Ht.Rotate)},p.createElement(vl,{size:12}))),p.createElement(ot,{id:"scale-button",info:"[Y] Scale",position:"bottom"},p.createElement("button",{className:qt+" "+(t===Ht.Scale?xn:""),onClick:()=>n.setTransformMode(Ht.Scale)},p.createElement(il,{size:12}))))},dw=[{label:"Selection",value:Zr.Selection},{label:"Center",value:Zr.Center},{label:"Bottom",value:Zr.Bottom}],fw=()=>{const[t,e]=u.exports.useState(Zr.Selection),n=Le.instance.editorControls;u.exports.useEffect(()=>(H.instance.addListener(Y.TRANSFORM_PIVOT_CHANGED.toString(),r),()=>{H.instance.removeListener(Y.TRANSFORM_PIVOT_CHANGED.toString(),r)}),[]);const r=()=>{e(n.transformPivot)},i=a=>{n.setTransformPivot(a)},o=()=>{n.changeTransformPivot()};return p.createElement("div",{className:on,id:"transform-pivot"},p.createElement(ot,{info:"[X] Toggle Transform Pivot"},p.createElement("button",{onClick:o,className:qt},p.createElement(Cf,{size:12}))),p.createElement(_n,{className:Qn,onChange:i,options:dw,value:t,creatable:!1,isSearchable:!1}))},pw=[{label:"Selection",value:go.LocalSelection},{label:"World",value:go.World}],hw=()=>{const[t,e]=u.exports.useState(go.World),n=Le.instance.editorControls;u.exports.useEffect(()=>(H.instance.addListener(Y.TRANSFORM_SPACE_CHANGED.toString(),r),()=>{H.instance.removeListener(Y.TRANSFORM_SPACE_CHANGED.toString(),r)}),[]);const r=()=>{e(n.transformSpace)},i=a=>{n.setTransformSpace(a)},o=()=>{n.toggleTransformSpace()};return p.createElement("div",{className:on,id:"transform-space"},p.createElement(ot,{info:"[Z] Toggle Transform Space"},p.createElement("button",{onClick:o,className:qt},p.createElement(Sf,{size:12}))),p.createElement(_n,{className:Qn,onChange:i,options:pw,value:t,creatable:!1,isSearchable:!1}))},vw=[{label:"0.1m",value:.1},{label:"0.125m",value:.125},{label:"0.25m",value:.25},{label:"0.5m",value:.5},{label:"1m",value:1},{label:"2m",value:2},{label:"4m",value:4}],mw=[{label:"1\xB0",value:1},{label:"5\xB0",value:5},{label:"10\xB0",value:10},{label:"15\xB0",value:15},{label:"30\xB0",value:30},{label:"45\xB0",value:45},{label:"90\xB0",value:90}],gw={mode:Qr.Grid,translationSnap:.5,rotationSnap:10},bw=()=>{const[t,e]=u.exports.useState(gw),n=Le.instance.editorControls;u.exports.useEffect(()=>(H.instance.addListener(Y.SNAP_SETTINGS_CHANGED.toString(),r),()=>{H.instance.removeListener(Y.SNAP_SETTINGS_CHANGED.toString(),r)}),[]);const r=()=>{e({mode:n.snapMode,translationSnap:n.translationSnap,rotationSnap:n.rotationSnap})},i=s=>{n.setTranslationSnap(s),n.setSnapMode(Qr.Grid)},o=s=>{n.setRotationSnap(s),n.setSnapMode(Qr.Grid)},a=()=>{n.toggleSnapMode()};return p.createElement("div",{className:on,id:"transform-snap"},p.createElement(ot,{info:"[C] Toggle Snap Mode"},p.createElement("button",{onClick:a,className:qt+" "+(t.mode===Qr.Grid?xn:"")},p.createElement(ul,{size:12}))),p.createElement(_n,{className:Qn,onChange:i,options:vw,value:t.translationSnap,creatable:!1,isSearchable:!1}),p.createElement(_n,{className:Qn,onChange:o,options:mw,value:t.rotationSnap,creatable:!1,isSearchable:!1}))},yw=()=>{const[t,e]=u.exports.useState(!1);u.exports.useEffect(()=>(H.instance.addListener(Y.PLAY_MODE_CHANGED.toString(),n),()=>{H.instance.removeListener(Y.PLAY_MODE_CHANGED.toString(),n)}),[]);const n=()=>{e(Le.instance.isInPlayMode)},r=()=>{t?Le.instance.leavePlayMode():Le.instance.enterPlayMode()};return p.createElement("div",{className:on+" "+Ld,id:"preview"},p.createElement(ot,{info:t?"Stop Previewing Scene":"Preview Scene"},p.createElement("button",{onClick:r,className:qt+" "+(t?xn:"")},t?p.createElement(dl,{size:16}):p.createElement(fl,{size:16}))))},ww=()=>{const[t,e]=u.exports.useState({}),[n,r]=u.exports.useState(!1),{t:i}=Pt();u.exports.useEffect(()=>(Q.instance.renderer.onUpdateStats=a=>{a.render.frame%3==0&&e({geometries:a.memory.geometries,textures:a.memory.textures,fps:a.render.fps,frameTime:a.render.frameTime,calls:a.render.calls,triangles:a.render.triangles,points:a.render.points,lines:a.render.lines})},()=>{Q.instance.renderer.onUpdateStats=void 0}),[]);const o=()=>{r(!n)};return p.createElement(p.Fragment,null,p.createElement("div",{className:Kr.toolbarInputGroup+" "+Kr.playButtonContainer,id:"stats"},p.createElement(ot,{info:"Toggle Stats"},p.createElement("button",{onClick:o,className:Kr.toolButton+" "+(n?Kr.selected:"")},p.createElement(ll,{size:12})))),n&&p.createElement("div",{className:Kr.statsContainer},p.createElement("h3",null,i("editor:viewport.state.header")),t&&p.createElement("ul",null,p.createElement("li",null,i("editor:viewport.state.memory"),p.createElement("ul",null,p.createElement("li",null,i("editor:viewport.state.geometries"),": ",t.geometries),p.createElement("li",null,i("editor:viewport.state.textures"),": ",t.textures))),p.createElement("li",null,i("editor:viewport.state.render"),":",p.createElement("ul",null,p.createElement("li",null,i("editor:viewport.state.FPS"),": ",Math.round(t.fps)),p.createElement("li",null,i("editor:viewport.state.frameTime"),": ",Math.round(t.frameTime),"ms"),p.createElement("li",null,i("editor:viewport.state.calls"),": ",t.calls),p.createElement("li",null,i("editor:viewport.state.triangles"),": ",t.triangles),p.createElement("li",null,i("editor:viewport.state.points"),": ",t.points),p.createElement("li",null,i("editor:viewport.state.lines"),": ",t.lines))))))};var jd=u.exports.forwardRef(function(t,e){var n={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return u.exports.createElement(Be,Zn({iconAttrs:n,iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},t,{ref:e}),u.exports.createElement("path",{d:"M6.993 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007S14.761 6.993 12 6.993 6.993 9.239 6.993 12zM12 8.993c1.658 0 3.007 1.349 3.007 3.007S13.658 15.007 12 15.007 8.993 13.658 8.993 12 10.342 8.993 12 8.993zM10.998 19h2v3h-2zm0-17h2v3h-2zm-9 9h3v2h-3zm17 0h3v2h-3zM4.219 18.363l2.12-2.122 1.415 1.414-2.12 2.122zM16.24 6.344l2.122-2.122 1.414 1.414-2.122 2.122zM6.342 7.759 4.22 5.637l1.415-1.414 2.12 2.122zm13.434 10.605-1.414 1.414-2.122-2.122 1.414-1.414z"}))});jd.displayName="Sun";const xw=()=>{const[t,e]=u.exports.useState(ei.UNLIT),n=[];for(let o of Object.keys(ei))n.push({label:ei[o],value:ei[o]});u.exports.useEffect(()=>(H.instance.addListener(Y.RENDER_MODE_CHANGED.toString(),i),()=>{H.instance.removeListener(Y.RENDER_MODE_CHANGED.toString(),i)}),[]);const r=u.exports.useCallback(o=>Q.instance.renderer.changeRenderMode(o),[]),i=u.exports.useCallback(()=>e(Q.instance.renderer.renderMode),[]);return p.createElement("div",{className:on,id:"transform-pivot"},p.createElement(ot,{info:"Render Mode"},p.createElement("div",{className:Ad},p.createElement(jd,{size:16}))),p.createElement(_n,{className:Qn,onChange:r,options:n,value:t,creatable:!1,isSearchable:!1}))};class Cw extends u.exports.Component{constructor(e){super(e);this.state={editorInitialized:!1}}componentDidMount(){H.instance.addListener(Y.RENDERER_INITIALIZED.toString(),this.onRendererInitialized),H.instance.addListener(Y.SETTINGS_CHANGED.toString(),this.onForceUpdate)}componentWillUnmount(){H.instance.removeListener(Y.SETTINGS_CHANGED.toString(),this.onForceUpdate)}onRendererInitialized=()=>{this.setState({editorInitialized:!0}),H.instance.removeListener(Y.RENDERER_INITIALIZED.toString(),this.onRendererInitialized)};onForceUpdate=()=>{this.forceUpdate()};render(){const{editorInitialized:e}=this.state;return e?p.createElement("div",{className:Ga},p.createElement(ow,{commands:this.props.menu}),p.createElement(uw,null),p.createElement(hw,null),p.createElement(fw,null),p.createElement(bw,null),p.createElement(cw,null),p.createElement(xw,null),p.createElement(yw,null),p.createElement(ww,null)):p.createElement("div",{className:Ga})}}const Sw="_viewportCanvas_1s1yi_1",Ew="_viewportContainer_1s1yi_7",Dw="_controlsText_1s1yi_22";const Ie={a:"",lato:"'Lato', sans-serif",zilla:"'Zilla Slab', sans-serif",background:"rgba(0,0,0,0)",inputBackground:"#070809",border:"#5D646C",panel:"#282C31",panel2:"#3A4048",selected:"#006EFF",selectedText:"#fff",hover:"#4B5562",hover2:"#636F80",text:"#FFFFFF",text2:"#9FA4B5",dropdown:"#000000",red:"#F44336",pink:"#E91E63",purple:"#9C27B0",deepPurple:"#673AB7",indigo:"#3F51B5",blue:"#006EFF",lightBlue:"#03A9F4",cyan:"#00BCD4",teal:"#009688",green:"#4CAF50",lightGreen:"#8BC34A",lime:"#CDDC39",yellow:"#FFEB3B",amber:"#FFC107",orange:"#FF9800",deepOrange:"#FF5722",brown:"#795548",blueHover:"#4D93F1",bluePressed:"#0554BC",disabled:"#222222",disabledText:"grey",deemphasized:"grey",toolbar:"rgba(0, 0, 0, 0.0)",toolbar2:"rgba(0, 0, 0, 0.0)",header:"#1b1b1b",white:"#fff",shadow15:"0px 4px 4px  rgba(0, 0, 0, 0.15)",shadow30:"0px 4px 4px  rgba(0, 0, 0, 0.3)",borderStyle:"1px solid #5D646C"};Ie.chartColors=[Ie.red,Ie.pink,Ie.purple,Ie.deepPurple,Ie.indigo,Ie.blue,Ie.lightBlue,Ie.cyan,Ie.teal,Ie.green,Ie.lightGreen,Ie.lime,Ie.yellow,Ie.amber,Ie.orange,Ie.deepOrange,Ie.brown];p.createContext(Ie);function Mw(){const t=u.exports.useRef(),[e,n]=u.exports.useState(!1),[r,i]=u.exports.useState(!1),[o,a]=u.exports.useState(null),{t:s}=Pt(),l=u.exports.useCallback(()=>{i(H.instance.selected.length>0)},[]),c=u.exports.useCallback(()=>{n(Le.instance.flyControls.enabled)},[]),d=u.exports.useCallback(w=>{a(w)},[]),f=u.exports.useCallback(()=>{H.instance.addListener(Y.SELECTION_CHANGED.toString(),l),Le.instance.editorControls.addListener(Y.FLY_MODE_CHANGED.toString(),c),Le.instance.editorControls.addListener(Y.TRANSFROM_MODE_CHANGED.toString(),d),H.instance.removeListener(Y.RENDERER_INITIALIZED.toString(),f)},[]);u.exports.useEffect(()=>{const w=()=>{Q.instance.initializeRenderer(t.current),H.instance.addListener(Y.PROJECT_LOADED.toString(),w)};return H.instance.addListener(Y.RENDERER_INITIALIZED.toString(),f),H.instance.addListener(Y.PROJECT_LOADED.toString(),w),()=>{H.instance.removeListener(Y.SELECTION_CHANGED.toString(),l),Le.instance.editorControls&&(Le.instance.editorControls.removeListener(Y.FLY_MODE_CHANGED.toString(),c),Le.instance.editorControls.removeListener(Y.TRANSFROM_MODE_CHANGED.toString(),d)),Q.instance.renderer&&Q.instance.renderer.dispose()}},[]);const[{canDrop:h,isOver:v},m]=pr({accept:[Te.Node,...hr],drop(w,D){const E=D.getClientOffset();if(w.type===Te.Node){w.multiple?Q.instance.reparentToSceneAtCursorPosition(w.value,E):Q.instance.reparentToSceneAtCursorPosition([w.value],E);return}d0(w,E)},collect:w=>({canDrop:w.canDrop(),isOver:w.isOver()})}),b=u.exports.useCallback(w=>{Promise.all(w.map(({url:D,name:E,id:y})=>{H.instance.addMedia({url:D,name:E,id:y})})).catch(D=>{H.instance.emitEvent(Y.ERROR,D)})},[]);let g;return e?g="[W][A][S][D] "+s("editor:viewport.command.movecamera")+" | [Shift] "+s("editor:viewport.command.flyFast"):g="[LMB] "+s("editor:viewport.command.orbit")+" | [MMB] "+s("editor:viewport.command.pan")+" | [RMB] "+s("editor:viewport.command.fly"),r&&(g+=" | [F] "+s("editor:viewport.command.focus")+" | [Q] "+s("editor:viewport.command.rotateLeft")+" | [E] "+s("editor:viewport.command.rotateRight")),o===Ht.Placement?g+=" | [ESC / G] "+s("editor:viewport.command.cancelPlacement"):o===Ht.Grab?g+=" | [Shift + Click] "+s("editor:viewport.command.placeDuplicate")+" | [ESC / G] "+s("editor:viewport.command.cancelGrab"):r&&(g+="| [G] "+s("editor:viewport.command.grab")+" | [ESC] "+s("editor:viewport.command.deselectAll")),p.createElement("div",{className:Ew,style:{borderColor:v?h?Ie.blue:Ie.red:"transparent"},ref:m},p.createElement("canvas",{className:Sw,ref:t,tabIndex:-1,id:"viewport-canvas"}),p.createElement("div",{className:Dw},g),p.createElement(Ef,{afterUpload:b}))}const Cn=ee.span`
  color: ${t=>t.color};
`,Ow=ee.li`
  display: flex;
  min-height: 100px;
  background-color: ${t=>t.theme.toolbar};
  border: 1px solid ${t=>t.theme.panel};
  border-radius: 4px;
  margin: 4px;
  color: white;
  max-width: 560px;

  & > :first-child {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 100px;
  }

  & > :last-child {
    display: flex;
    flex-direction: column;
    flex: 1;
    padding: 12px;
    border-left: 1px solid ${t=>t.theme.panel2};
  }

  h5 {
    font-size: 20px;
  }

  h6 {
    font-size: 16px;
  }

  a {
    white-space: nowrap;
    color: ${t=>t.theme.blue};
  }

  p {
    margin: 0;
  }
`;function Vr({score:t,scoreColor:e,title:n,description:r,learnMoreUrl:i,children:o}){const{t:a}=Pt();return p.createElement(Ow,null,p.createElement("div",null,p.createElement(Cn,{as:"h5",color:e},t)),p.createElement("div",null,p.createElement("h6",null,n,": ",o),p.createElement("p",null,r," ",p.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:i},a("editor:dialog.performance.learnMore")))))}const Wd={Low:0,Medium:1,High:2};function Hd({scores:t,...e}){const n=u.exports.useContext(is),{t:r}=Pt(),i={Low:n.green,Medium:n.yellow,High:n.red},o=Wd[t.textures.largeTexturesScore]>Wd[t.textures.score]?t.textures.largeTexturesScore:t.textures.score;return p.createElement(Jr,{...e},p.createElement("ul",null,p.createElement(Vr,{title:r("editor:dialog.performance.lbl-polycount"),description:r("editor:dialog.performance.info-polycount"),learnMoreUrl:"htts://xrengine.dev/docs/editor-optimization.html",score:t.polygons.score,scoreColor:i[t.polygons.score]},p.createElement(Cn,{color:i[t.polygons.score]},r("editor:dialog.performance.txt-polycount",{count:t.polygons.value.toLocaleString()}))),p.createElement(Vr,{title:r("editor:dialog.performance.lbl-material"),description:r("editor:dialog.performance.info-material"),learnMoreUrl:"htts://xrengine.dev/docs/editor-optimization.html",score:t.materials.score,scoreColor:i[t.materials.score]},p.createElement(Cn,{color:i[t.materials.score]},r("editor:dialog.performance.txt-material",{count:t.materials.value}))),p.createElement(Vr,{title:r("editor:dialog.performance.lbl-texture"),description:r("editor:dialog.performance.info-texture"),learnMoreUrl:"htts://xrengine.dev/docs/editor-optimization.html",score:o,scoreColor:i[o]},p.createElement(Cn,{color:i[t.textures.score]},r("editor:dialog.performance.txt-ram",{count:hs(t.textures.value)})),","," ",p.createElement(Cn,{color:i[t.textures.largeTexturesScore]},r("editor:dialog.performance.txt-texture",{count:t.textures.largeTexturesValue}))),p.createElement(Vr,{title:r("editor:dialog.performance.lbl-lights"),description:r("editor:dialog.performance.info-lights"),learnMoreUrl:"htts://xrengine.dev/docs/editor-optimization.html",score:t.lights.score,scoreColor:i[t.lights.score]},p.createElement(Cn,{color:i[t.lights.score]},r("editor:dialog.performance.txt-lights",{count:t.lights.value}))),p.createElement(Vr,{title:r("editor:dialog.performance.lbl-fileSize"),description:r("editor:dialog.performance.info-fileSize"),learnMoreUrl:"htts://xrengine.dev/docs/editor-optimization.html",score:t.fileSize.score,scoreColor:i[t.fileSize.score]},p.createElement(Cn,{color:i[t.fileSize.score]},hs(t.fileSize.value)))))}Hd.defaultProps={tag:"div",title:De.t("editor:dialog.performance.info-fileSize")||"Performance Check",confirmLabel:De.t("editor:dialog.performance.info-fileSize")||"Publish Scene"};class Tw extends u.exports.Component{constructor(e){super(e);this.state={name:"",...e.initialSceneParams}}onChangeName=e=>this.setState({name:e});onConfirm=()=>{const e={...this.state};e.name=e.name.trim(),this.props.onPublish(e)};render(){const{onCancel:e,screenshotUrl:n}=this.props,{name:r}=this.state;return p.createElement(Fa,{imageSrc:n,title:this.props.t("editor:dialog.publish.title"),onConfirm:this.onConfirm,onCancel:e,confirmLabel:this.props.t("editor:dialog.publish.lbl-confirm")},p.createElement(io,null,p.createElement("label",{htmlFor:"sceneName"},this.props.t("editor:dialog.publish.lbl-name")),p.createElement(ho,{id:"sceneName",required:!0,pattern:`[A-Za-z0-9-':"!@#$%^&*(),.?~ ]{4,64}`,title:this.props.t("editor:dialog.publish.info-name"),value:r,onChange:this.onChangeName})))}}var Pw=Tn()(Tw);function _w({onCancel:t,sceneName:e,sceneUrl:n,screenshotUrl:r,...i}){const{t:o}=Pt();return p.createElement(Fa,{imageSrc:r,title:o("editor:dialog.published.title"),...i},p.createElement("h1",null,e),p.createElement("p",null,o("editor:dialog.published.header")),p.createElement(Df,{as:"a",href:n,target:"_blank"},o("editor:dialog.published.lbl-view")))}const Iw=async t=>{try{return await He.instance.feathersClient.service("static-resource-url").get(t)}catch(e){throw console.log("Can't get URL from id"+e),new Error(e)}throw new Error("Can't get URL from id")},Rw=async t=>Mf(t)||await Of(t);function kw({onSelectionChanged:t}){const[e,n]=u.exports.useState(bo.instance.sources),[r,i]=u.exports.useState(e.length>0?e[1]:null);u.exports.useEffect(()=>{const S=I=>{i(e.find(_=>_.id===I))},x=()=>{const I=bo.instance.sources;n(I)};return H.instance.addListener(Y.SETTINGS_CHANGED.toString(),x),H.instance.addListener(Y.SOURCE_CHANGED.toString(),S),()=>{H.instance.removeListener(Y.SOURCE_CHANGED.toString(),S),H.instance.removeListener(Y.SETTINGS_CHANGED.toString(),x)}},[i,e,n,r]);const{loadMore:o,hasMore:a,results:s}=Tf(r),l={name:"Current",sid:"",ownedFileIds:{}},c=[];c.push(l),s.forEach(S=>{c.push(S.project)});const d=S=>{t({resourceUrl:S.description,name:S.id,contentType:S.contentType})},h=(S=>{const x=[];return S.forEach((I,_)=>{I.sid!==globalThis.currentProjectID&&x.push({label:I.name,value:_})}),x})(c),[v,m]=u.exports.useState(0),[b,g]=u.exports.useState([]),w=u.exports.useRef(v),D=async S=>{const x={};Object.assign(x,He.instance.ownedFileIds),Object.assign(x,He.instance.currentOwnedFileIds),c[0].ownedFileIds=JSON.stringify(x),c[0].sid=globalThis.currentProjectID;const I=c[S]?.ownedFileIds,_=I?JSON.parse(I):{},F=[];for(let R of Object.keys(_))if(R!=="thumbnailOwnedFileId"){const P=_[R],{url:O}=await Iw(P);if(!O)continue;const j=await Rw(new URL(O)),N=kf[j],k=vr.instance.getEditorFromClass(N),V={description:O,fileId:P,projectId:c[S].sid,id:R,label:R,nodeClass:N,url:O,type:"Element",contentType:j,initialProps:{src:new URL(O)},iconComponent:k.WrappedComponent?k.WrappedComponent.iconComponent:k.iconComponent};F.push(V)}g(F)},E=S=>{w.current=S,m(S)};u.exports.useEffect(()=>{D(v)},[v]);const y=S=>{w.current===0&&D(v)};return u.exports.useEffect(()=>(H.instance.addListener(Y.FILE_UPLOADED.toString(),y),()=>{H.instance.removeListener(Y.FILE_UPLOADED.toString(),y)}),[]),p.createElement(p.Fragment,null,p.createElement(pn,{name:"Project Name",label:"Project Name"},p.createElement(_n,{options:h,onChange:E,value:v})),p.createElement(Pf,{id:"file-browser-panel",className:_f.assetsPanel},p.createElement(If,null,p.createElement(Rf,{source:r,items:b,onLoadMore:o,hasMore:a,onSelect:d,isLoading:!1}))))}const Nw=ee.audio`
  display: block;
  margin-left: auto;
  margin-right: auto;
  margin-top:300px
  max-width:500px
`,Aw=t=>{const e=t.resourceProps.resourceUrl;return p.createElement(Nw,{src:e,controls:!0},"Your browser doesn't support Audio")},Lw=ee.img`
  display: block;
  margin-left: auto;
  margin-right: auto;
`,zw=t=>{const e=t.resourceProps.resourceUrl;return p.createElement(Lw,{src:e})},Fw=ee.canvas`
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 100%;
  height: 100%;
  position: relative;
`,Bw=t=>{const e=t.resourceProps.resourceUrl,n=p.createRef(),r=new Uf,i=new Gf(75),[o,a]=u.exports.useState(!1),s=()=>{const d=n.current,f=new qf({canvas:d});f.setSize(d.width,d.height);const h=new Yf(4210752);r.add(h),i.aspect=d.width/d.width,r.add(i),f.render(r,i),new Jf().load(e,v=>{r.add(v.scene);const m=new Xf().setFromObject(v.scene);m.getCenter(i.position),i.position.z=m.max.z+1},void 0,()=>{console.log("Error Loading GLTF From URl")})},l=u.exports.useCallback(()=>{a(Le.instance.flyControls.enabled)},[a]),c=u.exports.useCallback(()=>{Le.instance.editorControls.addListener(Y.FLY_MODE_CHANGED.toString(),l),H.instance.removeListener(Y.RENDERER_INITIALIZED.toString(),c)},[l]);return u.exports.useEffect(()=>(H.instance.addListener(Y.RENDERER_INITIALIZED.toString(),c),He.instance.init(),Q.instance.initializeRenderer(n.current),s(),()=>{Le.instance.editorControls&&Le.instance.editorControls.removeListener(Y.FLY_MODE_CHANGED.toString(),l),Q.instance.renderer&&Q.instance.renderer.dispose(),He.instance.dispose()}),[]),p.createElement(p.Fragment,null,p.createElement("div",null,p.createElement(Fw,{ref:n})))},jw=t=>(t.resourceProps.resourceUrl,p.createElement("div",null,"Preview of this Asset is unavailable")),Ww=ee.video`
  display: block;
  margin-left: auto;
  margin-right: auto;
  max-width: 500px;
`,Hw=t=>{const e=t.resourceProps.resourceUrl;return p.createElement(Ww,{src:e,controls:!0},"Your Browser doesn't support Video")},$w=ee.div`
  text-align: center;
  font-size: 150%;
  padding-bottom: 20px;
`,Kw=p.forwardRef((t,e)=>{u.exports.useImperativeHandle(e,()=>({onLayoutChanged:i,onSelectionChanged:o})),u.exports.useState(0);const[n,r]=u.exports.useState({PreviewSource:null,resourceProps:{resourceUrl:"",name:""}}),i=()=>{console.log("Layout is Changed:")},o=s=>{a(s)},a=s=>{switch(s.contentType){case"model/gltf":case"model/gltf-binary":const l={PreviewSource:Bw,resourceProps:{resourceUrl:s.resourceUrl,name:s.name}};r(l);break;case"image/png":case"image/jpeg":const c={PreviewSource:zw,resourceProps:{resourceUrl:s.resourceUrl,name:s.name}};r(c);break;case"video/mp4":const d={PreviewSource:Hw,resourceProps:{resourceUrl:s.resourceUrl,name:s.name}};r(d);break;case"audio/mpeg":const f={PreviewSource:Aw,resourceProps:{resourceUrl:s.resourceUrl,name:s.name}};r(f);break;default:const h={PreviewSource:jw,resourceProps:{resourceUrl:s.resourceUrl,name:s.name}};r(h);break}};return p.createElement(p.Fragment,null,p.createElement("div",null,p.createElement($w,null,n.resourceProps.name)),n.PreviewSource&&p.createElement(n.PreviewSource,{resourceProps:n.resourceProps}))});function Vw(){const t=p.useRef(),e=()=>{t.current?.onLayoutChanged?.()},n=i=>{t.current?.onSelectionChanged?.(i)};let r={dockbox:{mode:"vertical",children:[{size:5,tabs:[{id:"projectFilesPanel",title:"Project Files",content:p.createElement(kw,{onSelectionChanged:n})}]},{size:5,tabs:[{id:"previewPanel",title:"Preview",content:p.createElement(Kw,{ref:t})}]}]}};return p.createElement(p.Fragment,null,p.createElement(Un,{defaultLayout:r,style:{pointerEvents:"none",position:"absolute",left:0,top:5,right:5,bottom:5},onLayoutChange:e}))}const Uw={name:()=>"Scene Editor",longName:()=>"Scene Editor",SERVER_URL:ti.publicRuntimeConfig.apiServer,APP_URL:ti.publicRuntimeConfig.appServer,FEATHERS_STORE_KEY:ti.publicRuntimeConfig.feathersStoreKey,ROOT_REDIRECT:ti.publicRuntimeConfig.rootRedirect},Gw=25,$d=t=>`${Uw.APP_URL}/scenes/${t}`,qw=async(t,e,n)=>{let r;try{const i=Q.instance.scene,o=new AbortController,a=o.signal;if(Q.instance.sceneModified&&(e(Ze,{title:De.t("editor:saving"),message:De.t("editor:savingMsg"),cancelable:!0,onCancel:()=>{o.abort()}}),t=await vs(t.project_id,a),a.aborted)){const R=new Error(De.t("editor:errors.publishProjectAborted"));throw R.aborted=!0,R}e(Ze,{title:De.t("editor:generateScreenshot"),message:De.t("editor:generateScreenshotMsg")}),await new Promise(R=>setTimeout(R,5));const s=await Q.instance.takeScreenshot();console.log("Screenshot is"),console.log(s);const{blob:l,cameraTransform:c}=s;if(console.log("screenshotBlob is"),console.log(l),r=URL.createObjectURL(l),console.log("Screenshot url is",r),a.aborted){const R=new Error(De.t("editor:errors.publishProjectAborted"));throw R.aborted=!0,R}let{name:d}=i.metadata;d=t.scene&&t.scene.name||d||Q.instance.scene.name;const f=await new Promise(R=>{e(Pw,{screenshotUrl:r,initialSceneParams:{name:d},onCancel:()=>R(null),onPublish:R})});if(!f){URL.revokeObjectURL(r),n();const R=new Error(De.t("editor:errors.publishProjectAborted"));throw R.aborted=!0,R}i.setMetadata({name:f.name,previewCameraTransform:c}),e(Ze,{title:De.t("editor:publishingScene"),message:De.t("editor:publishingSceneMsg"),cancelable:!0,onCancel:()=>{o.abort()}});const{glbBlob:h,chunks:v}=await Q.instance.exportScene({scores:!0});if(a.aborted){const R=new Error(De.t("editor:errors.publishProjectAborted"));throw R.aborted=!0,R}if(!await new Promise(R=>{e(Hd,{chunks:v,onCancel:()=>R(!1),onConfirm:()=>R(!0)})})){const R=new Error(De.t("editor:errors.publishProjectAborted"));throw R.aborted=!0,R}const b=await Q.instance.scene.serialize(t.project_id),g=new Blob([JSON.stringify(b)],{type:"application/json"});e(Ze,{title:De.t("editor:publishingScene"),message:De.t("editor:publishingSceneMsg"),cancelable:!0,onCancel:()=>{o.abort()}});const w=h.size/1024/1024,D=Gw;if(w>D)throw new Error(De.t("editor:errors.sceneTooLarge",{size:w.toFixed(2),maxSize:D}));e(Ze,{title:De.t("editor:publishingScene"),message:De.t("editor:uploadingThumbnailMsg"),cancelable:!0,onCancel:()=>{o.abort()}});const{file_id:E,meta:{access_token:y}}=await yo(l,void 0,o.signal);if(a.aborted){const R=new Error(De.t("editor:errors.publishProjectAborted"));throw R.aborted=!0,R}const{file_id:S,meta:{access_token:x}}=await yo(h,R=>{e(Ze,{title:De.t("editor:publishingScene"),message:De.t("editor:uploadingSceneMsg",{percentage:Math.floor(R*100)}),onCancel:()=>{o.abort()}},o.signal)});if(a.aborted){const R=new Error(De.t("editor:errors.publishProjectAborted"));throw R.aborted=!0,R}const{file_id:I,meta:{access_token:_}}=await yo(g,void 0,o.signal);if(a.aborted){const R=new Error(De.t("editor:errors.publishProjectAborted"));throw R.aborted=!0,R}const F={screenshot_file_id:E,screenshot_file_token:y,model_file_id:S,model_file_token:x,scene_file_id:I,scene_file_token:_,name:f.name};try{t=await He.instance.feathersClient.service(`/publish-project/${t.project_id}`).create({scene:F})}catch(R){throw new Error(R)}e(_w,{sceneName:F.name,screenshotUrl:r,sceneUrl:$d(t.scene.scene_id),onConfirm:()=>{n()}})}finally{r&&URL.revokeObjectURL(r)}return t},Yw=ee.div`
  display: flex;
  flex: 1;
  flex-direction: column;
  height: 100%;
  width: 100%;
  position: fixed;
`,Xw=ee.div`
  display: flex;
  flex: 1;
  overflow: hidden;
  margin: 0px;
`,Jw=ee.div`
  .dock-panel {
    background: transparent;
    pointer-events: auto;
    opacity: 0.8;
    border: none;
  }
  .dock-panel:first-child {
    position: relative;
    z-index: 99;
  }
  .dock-panel[data-dockid="+3"] {
    visibility: hidden;
    pointer-events: none;
  }
  .dock-divider {
    pointer-events: auto;
  }
  .dock {
    border-radius: 4px;
    background: #282C31;
  }
  .dock-top .dock-bar {
    font-size: 12px;
    border-bottom: 1px solid rgba(0,0,0,0.2);
    background: #282C31;
  }
  .dock-tab {
    background: #282C31; 
    border-bottom: none;
  }
  .dock-tab:hover, .dock-tab-active, .dock-tab-active:hover {
    color: #ffffff; 
  }
  .dock-ink-bar {
    background-color: #ffffff; 
  }
`;class Zw extends u.exports.Component{constructor(e){super(e);let n=vd;const r=localStorage.getItem("editor-settings");r&&(n=JSON.parse(r)),He.buildProjectManager(n),H.buildCommandManager(),Q.buildSceneManager(),Le.buildControlManager(),vr.buildNodeManager(Q.instance.scene),bo.buildSourceManager(),Nf.init(),Af(),Lf(),He.instance.initializeFeathersClient(Kf()),H.instance.addListener(Y.RENDERER_INITIALIZED.toString(),this.setDebuginfo),H.instance.addListener(Y.PROJECT_LOADED.toString(),this.onProjectLoaded),H.instance.addListener(Y.ERROR.toString(),this.onEditorError),H.instance.addListener(Y.SAVE_PROJECT.toString(),this.onSaveProject),this.state={project:null,parentSceneId:null,pathParams:new Map(Object.entries(e.match.params)),queryParams:new Map(new URLSearchParams(window.location.search).entries()),settingsContext:{settings:n,updateSetting:this.updateSetting},creatingProject:null,DialogComponent:null,dialogProps:{},modified:!1},this.t=this.props.t}componentDidMount(){const e=Qd.store.dispatch;os().locations.updateNeeded.value===!0&&e(ms.fetchAdminLocations()),ef().scenes.updateNeeded.value===!0&&e(Wf.fetchAdminScenes()),os().locationTypes.updateNeeded.value===!0&&e(ms.fetchLocationTypes());const n=this.state.pathParams,r=this.state.queryParams,i=n.get("projectId");i==="new"?r.has("template")?this.loadProjectTemplate(r.get("template")):r.has("sceneId")?this.loadScene(r.get("sceneId")):this.loadProjectTemplate(Id):i==="tutorial"?this.loadProjectTemplate(Rd):this.loadProject(i)}componentDidUpdate(e){if(this.props.location.pathname!==e.location.pathname&&!this.state.creatingProject){const n=e.match.params.projectId,r=new Map(new URLSearchParams(window.location.search).entries());this.setState({queryParams:r});const o=this.state.pathParams.get("projectId");let a=null;o==="new"&&!r.has("sceneId")?a=r.get("template")||Id:o==="tutorial"&&(a=Rd),o==="new"||o==="tutorial"?this.loadProjectTemplate(a):n!=="tutorial"&&n!=="new"&&this.loadProject(o)}}componentWillUnmount(){H.instance.removeListener(Y.SAVE_PROJECT.toString(),this.onSaveProject),H.instance.removeListener(Y.ERROR.toString(),this.onEditorError),H.instance.removeListener(Y.PROJECT_LOADED.toString(),this.onProjectLoaded),He.instance.dispose()}t;async loadProjectTemplate(e){this.setState({project:null,parentSceneId:null}),this.showDialog(Ze,{title:this.t("editor:loading"),message:this.t("editor:loadingMsg")});try{e.metadata&&(delete e.metadata.sceneUrl,delete e.metadata.sceneId),await He.instance.loadProject(e),this.hideDialog()}catch(n){console.error(n),this.showDialog($t,{title:this.t("editor:loadingError"),message:n.message||this.t("editor:loadingErrorMsg"),error:n})}}async loadScene(e){this.setState({project:null,parentSceneId:e}),this.showDialog(Ze,{title:this.t("editor:loading"),message:this.t("editor:loadingMsg")});try{const n=await Fy(e);console.warn("loadScene:scene",n);const r=n.data;await He.instance.loadProject(r),this.hideDialog()}catch(n){console.error(n),this.showDialog($t,{title:this.t("editor:loadingError"),message:n.message||this.t("editor:loadingErrorMsg"),error:n})}}async importProject(e){const n=this.state.project;this.setState({project:null,parentSceneId:null}),this.showDialog(Ze,{title:this.t("editor:loading"),message:this.t("editor:loadingMsg")});try{await He.instance.loadProject(e),Q.instance.sceneModified=!0,this.updateModifiedState(),this.hideDialog()}catch(r){console.error(r),this.showDialog($t,{title:this.t("editor:loadingError"),message:r.message||this.t("editor:loadingErrorMsg"),error:r})}finally{n&&this.setState({project:n})}}async loadProject(e){this.setState({project:null,parentSceneId:null}),this.showDialog(Ze,{title:this.t("editor:loading"),message:this.t("editor:loadingMsg")});let n;try{n=await zf(e),He.instance.ownedFileIds=JSON.parse(n.ownedFileIds),globalThis.currentProjectID=n.project_id;const r=n.project_url.split("collection/")[1],i=await He.instance.feathersClient.service("collection").get(r,{headers:{"content-type":"application/json"}});await He.instance.loadProject(i),this.hideDialog()}catch(r){console.error(r),this.showDialog($t,{title:this.t("editor:loadingError"),message:r.message||this.t("editor:loadingErrorMsg"),error:r})}finally{n&&this.setState({project:n})}}updateModifiedState(e){const n=Q.instance.sceneModified&&!this.state.creatingProject;n!==this.state.modified?this.setState({modified:n},e):e&&e()}generateToolbarMenu=()=>[{name:this.t("editor:menubar.newProject"),action:this.onNewProject},{name:this.t("editor:menubar.saveProject"),hotkey:`${mo} + S`,action:this.onSaveProject},{name:this.t("editor:menubar.saveAs"),action:this.onDuplicateProject},{name:this.t("editor:menubar.exportGLB"),action:this.onExportProject},{name:this.t("editor:menubar.importProject"),action:this.onImportLegacyProject},{name:this.t("editor:menubar.exportProject"),action:this.onExportLegacyProject},{name:this.t("editor:menubar.quit"),action:this.onOpenProject}];setDebuginfo=()=>{const e=Q.instance.renderer.webglRenderer.getContext(),n=e.getExtension("WEBGL_debug_renderer_info");n&&(e.getParameter(n.UNMASKED_VENDOR_WEBGL),e.getParameter(n.UNMASKED_RENDERER_WEBGL)),H.instance.removeListener(Y.RENDERER_INITIALIZED.toString(),this.setDebuginfo)};showDialog=(e,n={})=>{this.setState({DialogComponent:e,dialogProps:n})};hideDialog=()=>{this.setState({DialogComponent:null,dialogProps:{}})};dialogContext={showDialog:this.showDialog,hideDialog:this.hideDialog};onEditorError=e=>{if(e.aborted){this.hideDialog();return}console.error(e),this.showDialog($t,{title:e.title||this.t("editor:error"),message:e.message||this.t("editor:errorMsg"),error:e})};onProjectLoaded=()=>{this.updateModifiedState()};updateSetting(e,n){const r=Object.assign(this.state.settingsContext.settings,{[e]:n});localStorage.setItem("editor-settings",JSON.stringify(r)),He.instance.settings=r,H.instance.emitEvent(Y.SETTINGS_CHANGED),this.setState({settingsContext:{...this.state.settingsContext,settings:r}})}createProject=async()=>{const{parentSceneId:e}=this.state;this.showDialog(Ze,{title:this.t("editor:generateScreenshot"),message:this.t("editor:generateScreenshotMsg")}),await new Promise(s=>setTimeout(s,5));const n=await Q.instance.takeScreenshot(512,320),r=await new Promise(s=>{this.showDialog(Gy,{thumbnailUrl:URL.createObjectURL(n),initialName:Q.instance.scene.name,onConfirm:s,onCancel:s})});if(!r)return this.hideDialog(),null;const i=new AbortController;this.showDialog(Ze,{title:this.t("editor:saving"),message:this.t("editor:savingMsg"),cancelable:!0,onCancel:()=>{i.abort(),this.hideDialog()}}),H.instance.executeCommand(ke.MODIFY_PROPERTY,Q.instance.scene,{properties:{name:r.name}}),Q.instance.scene.setMetadata({name:r.name});const o=await Ff(Q.instance.scene,e,n,i.signal,this.showDialog,this.hideDialog);Q.instance.sceneModified=!1,globalThis.currentProjectID=o.project_id;const a=this.state.pathParams;return a.set("projectId",o.project_id),this.updateModifiedState(()=>{this.setState({creatingProject:!0,project:o,pathParams:a},()=>{this.props.history.replace(`/editor/projects/${o.project_id}`),this.setState({creatingProject:!1})})}),o};onNewProject=async()=>{this.props.history.push("/editor/projects/new")};onOpenProject=()=>{this.props.history.push("/editor/projects")};onDuplicateProject=async()=>{const e=new AbortController;this.showDialog(Ze,{title:this.t("editor:duplicating"),message:this.t("editor:duplicatingMsg"),cancelable:!0,onCancel:()=>{e.abort(),this.hideDialog()}}),await new Promise(n=>setTimeout(n,5));try{const n=await this.createProject();Q.instance.sceneModified=!1,this.updateModifiedState(),this.hideDialog();const r=this.state.pathParams;r.set("projectId",n.project_id),this.setState({pathParams:r})}catch(n){console.error(n),this.showDialog($t,{title:this.t("editor:savingError"),message:n.message||this.t("editor:savingErrorMsg")})}};onExportProject=async()=>{const e=await new Promise(r=>{this.showDialog(Ky,{defaultOptions:Object.assign({},Q.DefaultExportOptions),onConfirm:r,onCancel:r})});if(!e){this.hideDialog();return}const n=new AbortController;this.showDialog(Ze,{title:this.t("editor:exporting"),message:this.t("editor:exportingMsg"),cancelable:!0,onCancel:()=>n.abort()});try{const{glbBlob:r}=await Q.instance.exportScene(e);this.hideDialog();const i=document.createElement("a");i.download=Q.instance.scene.name+".glb",i.href=URL.createObjectURL(r),document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(r){if(r.aborted){this.hideDialog();return}console.error(r),this.showDialog($t,{title:this.t("editor:exportingError"),message:r.message||this.t("editor:exportingErrorMsg"),error:r})}};onImportLegacyProject=async()=>{const e=await new Promise(r=>{this.showDialog(md,{title:this.t("editor:importLegacy"),message:this.t("editor:importLegacyMsg"),onConfirm:()=>r(!0),onCancel:()=>r(!1)})});if(this.hideDialog(),!e)return;const n=document.createElement("input");n.type="file",n.accept=".world",n.style.display="none",n.onchange=()=>{if(n.files.length>0){const r=new FileReader;r.onload=()=>{const i=JSON.parse(r.result);i.metadata&&(delete i.metadata.sceneUrl,delete i.metadata.sceneId),this.importProject(i)},r.readAsText(n.files[0])}},n.click()};onExportLegacyProject=async()=>{const{project:e}=this.state,n=await Q.instance.scene.serialize(e.project_id);n.metadata&&(delete n.metadata.sceneUrl,delete n.metadata.sceneId);const r=JSON.stringify(n),i=new Blob([r]),o=document.createElement("a"),a=Q.instance.scene.name.toLowerCase().replace(/\s+/g,"-");o.download=a+".world",o.href=URL.createObjectURL(i),document.body.appendChild(o),o.click(),document.body.removeChild(o)};onSaveProject=async()=>{const e=new AbortController;this.showDialog(Ze,{title:this.t("editor:saving"),message:this.t("editor:savingMsg"),cancelable:!0,onCancel:()=>{e.abort(),this.hideDialog()}}),await new Promise(n=>setTimeout(n,5));try{const{project:n}=this.state;if(n){const r=await vs(n.project_id,e.signal);this.setState({project:r});const i=this.state.pathParams;i.set("projectId",r.project_id),this.setState({pathParams:i})}else await this.createProject();Q.instance.sceneModified=!1,this.updateModifiedState(),this.hideDialog()}catch(n){console.error(n),this.showDialog($t,{title:this.t("editor:savingError"),message:n.message||this.t("editor:savingErrorMsg")})}};onPublishProject=async()=>{try{let e=this.state.project;if(e||(e=await this.createProject()),!e||(e=await qw(e,this.showDialog,this.hideDialog),!e))return;Q.instance.sceneModified=!1,this.updateModifiedState(),this.setState({project:e})}catch(e){if(e.abortedsettingsContext){this.hideDialog();return}console.error(e),this.showDialog($t,{title:this.t("editor:publishingError"),message:e.message||this.t("editor:publishingErrorMsg"),error:e})}};getSceneId(){const{project:e}=this.state;return e&&e.scene&&e.scene.scene_id||Q.instance.scene&&Q.instance.scene.metadata&&Q.instance.scene.metadata.sceneId}onOpenScene=()=>{const e=this.getSceneId();if(e){const n=$d(e);window.open(n)}};render(){const{DialogComponent:e,dialogProps:n,settingsContext:r}=this.state,i=this.generateToolbarMenu();let o={dockbox:{mode:"horizontal",children:[{mode:"vertical",size:8,children:[{tabs:[{id:"viewPanel",title:"Viewport",content:p.createElement("div",null)}],size:1}]},{mode:"vertical",size:2,children:[{tabs:[{id:"hierarchyPanel",title:p.createElement(Ka,null,p.createElement(Va,{as:pl,size:12}),p.createElement(Ua,null,"Hierarchy")),content:p.createElement(N0,null)}]},{tabs:[{id:"propertiesPanel",title:p.createElement(Ka,null,p.createElement(Va,{as:hl,size:12}),p.createElement(Ua,null,"Properties")),content:p.createElement(U0,null)},{id:"assetsPanel",title:"Elements",content:p.createElement(jf,null)},{id:"fileBrowserPanel",title:p.createElement(Ka,null,p.createElement(Va,{as:nl,size:12}),p.createElement(Ua,null,"File Browser")),content:p.createElement(Vw,null)}]}]}]}};return p.createElement(Yw,{id:"editor-container"},p.createElement(jy,{value:r},p.createElement(Bf,{value:this.dialogContext},p.createElement(Eh,{backend:tv},p.createElement(Xy,null),i&&p.createElement(Cw,{menu:i}),p.createElement(Xw,null,p.createElement(Mw,null),p.createElement(Jw,null,p.createElement(Un,{defaultLayout:o,style:{pointerEvents:"none",position:"absolute",left:5,top:55,right:5,bottom:5}}))),p.createElement(zy,{ariaHideApp:!1,isOpen:!!e,onRequestClose:this.hideDialog,shouldCloseOnOverlayClick:!1,className:"Modal",overlayClassName:"Overlay"},e&&p.createElement(e,{onConfirm:this.hideDialog,onCancel:this.hideDialog,...n}))))))}}var Ex=Tn()(Zd(Zw));export{Ex as default,$d as getSceneUrl,qw as publishProject};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRWRpdG9yQ29udGFpbmVyLmY3ZTgyZjk0LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vaW50ZXJmYWNlcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kbmQtY29yZS9kaXN0L2VzbS9hY3Rpb25zL2RyYWdEcm9wL3R5cGVzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL2FjdGlvbnMvZHJhZ0Ryb3AvbG9jYWwvc2V0Q2xpZW50T2Zmc2V0LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL3V0aWxzL2pzX3V0aWxzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL2FjdGlvbnMvZHJhZ0Ryb3AvYmVnaW5EcmFnLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL2FjdGlvbnMvZHJhZ0Ryb3AvcHVibGlzaERyYWdTb3VyY2UuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vdXRpbHMvbWF0Y2hlc1R5cGUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vYWN0aW9ucy9kcmFnRHJvcC9ob3Zlci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kbmQtY29yZS9kaXN0L2VzbS9hY3Rpb25zL2RyYWdEcm9wL2Ryb3AuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vYWN0aW9ucy9kcmFnRHJvcC9lbmREcmFnLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL2FjdGlvbnMvZHJhZ0Ryb3AvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vY2xhc3Nlcy9EcmFnRHJvcE1hbmFnZXJJbXBsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL3V0aWxzL2VxdWFsaXR5LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL3JlZHVjZXJzL2RyYWdPZmZzZXQuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vYWN0aW9ucy9yZWdpc3RyeS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kbmQtY29yZS9kaXN0L2VzbS9yZWR1Y2Vycy9kcmFnT3BlcmF0aW9uLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL3JlZHVjZXJzL3JlZkNvdW50LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL3V0aWxzL2RpcnRpbmVzcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kbmQtY29yZS9kaXN0L2VzbS9yZWR1Y2Vycy9kaXJ0eUhhbmRsZXJJZHMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vcmVkdWNlcnMvc3RhdGVJZC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kbmQtY29yZS9kaXN0L2VzbS9yZWR1Y2Vycy9pbmRleC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kbmQtY29yZS9kaXN0L2VzbS91dGlscy9jb29yZHMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vY2xhc3Nlcy9EcmFnRHJvcE1vbml0b3JJbXBsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL3V0aWxzL2dldE5leHRVbmlxdWVJZC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kbmQtY29yZS9kaXN0L2VzbS9jb250cmFjdHMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHJlYWN0LWRuZC9hc2FwL2Rpc3QvZXNtL2Jyb3dzZXIvcmF3LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0ByZWFjdC1kbmQvYXNhcC9kaXN0L2VzbS9icm93c2VyL2FzYXAuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZG5kLWNvcmUvZGlzdC9lc20vY2xhc3Nlcy9IYW5kbGVyUmVnaXN0cnlJbXBsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RuZC1jb3JlL2Rpc3QvZXNtL2NyZWF0ZURyYWdEcm9wTWFuYWdlci5qcyIsIi4uLy4uLy4uL2VkaXRvci9ub2RlX21vZHVsZXMvcmVhY3QtZG5kL2Rpc3QvZXNtL2NvcmUvRG5kUHJvdmlkZXIuanMiLCIuLi8uLi8uLi9lZGl0b3Ivbm9kZV9tb2R1bGVzL3JlYWN0LWRuZC9kaXN0L2VzbS9ob29rcy91c2VEcmFnTGF5ZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZG5kLWh0bWw1LWJhY2tlbmQvZGlzdC9lc20vdXRpbHMvanNfdXRpbHMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZG5kLWh0bWw1LWJhY2tlbmQvZGlzdC9lc20vRW50ZXJMZWF2ZUNvdW50ZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZG5kLWh0bWw1LWJhY2tlbmQvZGlzdC9lc20vQnJvd3NlckRldGVjdG9yLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRuZC1odG1sNS1iYWNrZW5kL2Rpc3QvZXNtL01vbm90b25pY0ludGVycG9sYW50LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRuZC1odG1sNS1iYWNrZW5kL2Rpc3QvZXNtL09mZnNldFV0aWxzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRuZC1odG1sNS1iYWNrZW5kL2Rpc3QvZXNtL05hdGl2ZURyYWdTb3VyY2VzL2dldERhdGFGcm9tRGF0YVRyYW5zZmVyLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRuZC1odG1sNS1iYWNrZW5kL2Rpc3QvZXNtL05hdGl2ZURyYWdTb3VyY2VzL25hdGl2ZVR5cGVzQ29uZmlnLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRuZC1odG1sNS1iYWNrZW5kL2Rpc3QvZXNtL05hdGl2ZURyYWdTb3VyY2VzL05hdGl2ZURyYWdTb3VyY2UuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZG5kLWh0bWw1LWJhY2tlbmQvZGlzdC9lc20vTmF0aXZlRHJhZ1NvdXJjZXMvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtZG5kLWh0bWw1LWJhY2tlbmQvZGlzdC9lc20vT3B0aW9uc1JlYWRlci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1kbmQtaHRtbDUtYmFja2VuZC9kaXN0L2VzbS9IVE1MNUJhY2tlbmRJbXBsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWRuZC1odG1sNS1iYWNrZW5kL2Rpc3QvZXNtL2luZGV4LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BzdHlsZWQtaWNvbnMvZmEtc29saWQvQXJjaGl2ZS9BcmNoaXZlLmVzbS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ac3R5bGVkLWljb25zL2ZhLXNvbGlkL0Fycm93c0FsdC9BcnJvd3NBbHQuZXNtLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BzdHlsZWQtaWNvbnMvZmEtc29saWQvQXJyb3dzQWx0Vi9BcnJvd3NBbHRWLmVzbS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ac3R5bGVkLWljb25zL2ZhLXNvbGlkL0JhcnMvQmFycy5lc20uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9DYXJldERvd24vQ2FyZXREb3duLmVzbS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ac3R5bGVkLWljb25zL2ZhLXNvbGlkL0NhcmV0UmlnaHQvQ2FyZXRSaWdodC5lc20uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9DaGFydEFyZWEvQ2hhcnRBcmVhLmVzbS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ac3R5bGVkLWljb25zL2ZhLXNvbGlkL0V4Y2xhbWF0aW9uVHJpYW5nbGUvRXhjbGFtYXRpb25UcmlhbmdsZS5lc20uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9NYWduZXQvTWFnbmV0LmVzbS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ac3R5bGVkLWljb25zL2ZhLXNvbGlkL1BhdXNlL1BhdXNlLmVzbS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ac3R5bGVkLWljb25zL2ZhLXNvbGlkL1BsYXkvUGxheS5lc20uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9Qcm9qZWN0RGlhZ3JhbS9Qcm9qZWN0RGlhZ3JhbS5lc20uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9TbGlkZXJzSC9TbGlkZXJzSC5lc20uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9TeW5jQWx0L1N5bmNBbHQuZXNtLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRvY2svZXMvRG9ja0RhdGEuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdXRpbC9lcy9DaGlsZHJlbi90b0FycmF5LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXV0aWwvZXMvaXNNb2JpbGUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdXRpbC9lcy9ob29rcy91c2VNZXJnZWRTdGF0ZS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy11dGlsL2VzL3JhZi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy11dGlsL2VzL0RvbS9maW5kRE9NTm9kZS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy11dGlsL2VzL3JlZi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yZXNpemUtb2JzZXJ2ZXItcG9seWZpbGwvZGlzdC9SZXNpemVPYnNlcnZlci5lcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1yZXNpemUtb2JzZXJ2ZXIvZXMvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9lcy9ob29rcy91c2VSYWYuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9lcy9UYWJOYXZMaXN0L1RhYk5vZGUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9lcy9ob29rcy91c2VPZmZzZXRzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRhYnMvZXMvaG9va3MvdXNlVmlzaWJsZVJhbmdlLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLW92ZXJmbG93L2VzL0l0ZW0uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtb3ZlcmZsb3cvZXMvaG9va3MvdXNlQmF0Y2hGcmFtZVN0YXRlLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLW92ZXJmbG93L2VzL1Jhd0l0ZW0uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtb3ZlcmZsb3cvZXMvT3ZlcmZsb3cuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdXRpbC9lcy9vbWl0LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXV0aWwvZXMvaG9va3MvdXNlTWVtby5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL2NvbnRleHQvTWVudUNvbnRleHQuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9ob29rcy91c2VBY3RpdmUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy91dGlscy93YXJuVXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL0ljb24uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9ob29rcy91c2VEaXJlY3Rpb25TdHlsZS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL2NvbnRleHQvUGF0aENvbnRleHQuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9jb250ZXh0L0lkQ29udGV4dC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL01lbnVJdGVtLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRhYnMvbm9kZV9tb2R1bGVzL3JjLW1lbnUvZXMvdXRpbHMvbm9kZVV0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9ob29rcy91c2VNZW1vQ2FsbGJhY2suanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9TdWJNZW51L1N1Yk1lbnVMaXN0LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXV0aWwvZXMvRG9tL2NvbnRhaW5zLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXV0aWwvZXMvRG9tL2NhblVzZURvbS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy11dGlsL2VzL1BvcnRhbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10cmlnZ2VyL2VzL3V0aWxzL2FsaWduVXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1tb3Rpb24vZXMvdXRpbC9tb3Rpb24uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbW90aW9uL2VzL2ludGVyZmFjZS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1tb3Rpb24vZXMvaG9va3MvdXNlU3RhdGUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbW90aW9uL2VzL2hvb2tzL3VzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbW90aW9uL2VzL2hvb2tzL3VzZU5leHRGcmFtZS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1tb3Rpb24vZXMvaG9va3MvdXNlU3RlcFF1ZXVlLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLW1vdGlvbi9lcy9ob29rcy91c2VEb21Nb3Rpb25FdmVudHMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbW90aW9uL2VzL2hvb2tzL3VzZVN0YXR1cy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1tb3Rpb24vZXMvRG9tV3JhcHBlci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1tb3Rpb24vZXMvQ1NTTW90aW9uLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRyaWdnZXIvZXMvdXRpbHMvbGVnYWN5VXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10cmlnZ2VyL2VzL1BvcHVwL01hc2suanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdXRpbC9lcy9Eb20vaXNWaXNpYmxlLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2RvbS1hbGlnbi9kaXN0LXdlYi9pbmRleC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gvaXNFcXVhbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1hbGlnbi9lcy91dGlsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWFsaWduL2VzL2hvb2tzL3VzZUJ1ZmZlci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1hbGlnbi9lcy9BbGlnbi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10cmlnZ2VyL2VzL1BvcHVwL3VzZVZpc2libGVTdGF0dXMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdHJpZ2dlci9lcy9Qb3B1cC91c2VTdHJldGNoU3R5bGUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdHJpZ2dlci9lcy9Qb3B1cC9Qb3B1cElubmVyLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRyaWdnZXIvZXMvUG9wdXAvTW9iaWxlUG9wdXBJbm5lci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10cmlnZ2VyL2VzL1BvcHVwL2luZGV4LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRyaWdnZXIvZXMvY29udGV4dC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10cmlnZ2VyL2VzL2luZGV4LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRhYnMvbm9kZV9tb2R1bGVzL3JjLW1lbnUvZXMvcGxhY2VtZW50cy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL3V0aWxzL21vdGlvblV0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9TdWJNZW51L1BvcHVwVHJpZ2dlci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL1N1Yk1lbnUvSW5saW5lU3ViTWVudUxpc3QuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9TdWJNZW51L2luZGV4LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXV0aWwvZXMvRG9tL2ZvY3VzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRhYnMvbm9kZV9tb2R1bGVzL3JjLW1lbnUvZXMvaG9va3MvdXNlQWNjZXNzaWJpbGl0eS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL2hvb2tzL3VzZVVVSUQuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy91dGlscy90aW1lVXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL2hvb2tzL3VzZUtleVJlY29yZHMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9NZW51LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRhYnMvbm9kZV9tb2R1bGVzL3JjLW1lbnUvZXMvTWVudUl0ZW1Hcm91cC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL0RpdmlkZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9pbmRleC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1kcm9wZG93bi9lcy9wbGFjZW1lbnRzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRyb3Bkb3duL2VzL0Ryb3Bkb3duLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRhYnMvZXMvVGFiTmF2TGlzdC9BZGRCdXR0b24uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9lcy9UYWJOYXZMaXN0L09wZXJhdGlvbk5vZGUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9lcy9UYWJDb250ZXh0LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRhYnMvZXMvaG9va3MvdXNlVG91Y2hNb3ZlLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLXRhYnMvZXMvaG9va3MvdXNlUmVmcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL2VzL2hvb2tzL3VzZVN5bmNTdGF0ZS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL2VzL1RhYk5hdkxpc3QvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9lcy9UYWJQYW5lbExpc3QvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdGFicy9lcy9UYWJQYW5lbExpc3QvVGFiUGFuZS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy10YWJzL2VzL1RhYnMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvbWluaS1zdG9yZS9lc20vUHJvdmlkZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvbWluaS1zdG9yZS9lc20vY29ubmVjdC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9taW5pLXN0b3JlL2VzbS9jcmVhdGUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtdXRpbC9lcy9jcmVhdGVDaGFpbmVkRnVuY3Rpb24uanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy91dGlscy9pc01vYmlsZS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9wbGFjZW1lbnRzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLW1lbnUvZXMvU3ViTWVudS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL0RPTVdyYXAuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy9TdWJQb3B1cE1lbnUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbWVudS9lcy91dGlscy9sZWdhY3lVdGlsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLW1lbnUvZXMvTWVudS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1tZW51L2VzL01lbnVJdGVtLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRvY2svZXMvZHJhZ2Ryb3AvRHJhZ01hbmFnZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtZG9jay9lcy9kcmFnZHJvcC9HZXN0dXJlTWFuYWdlci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1kb2NrL2VzL2RyYWdkcm9wL0RyYWdEcm9wRGl2LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRvY2svZXMvRG9ja1RhYkJhci5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1kb2NrL2VzL0RvY2tUYWJQYW5lLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRvY2svZXMvQWxnb3JpdGhtLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Jvd3Nlci9zcmMvY29uc3RhbnRzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Jvd3Nlci9zcmMvdXRpbHMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvYm93c2VyL3NyYy9wYXJzZXItYnJvd3NlcnMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvYm93c2VyL3NyYy9wYXJzZXItb3MuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvYm93c2VyL3NyYy9wYXJzZXItcGxhdGZvcm1zLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Jvd3Nlci9zcmMvcGFyc2VyLWVuZ2luZXMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvYm93c2VyL3NyYy9wYXJzZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvYm93c2VyL3NyYy9ib3dzZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbmV3LXdpbmRvdy9lcy9Ccm93c2VyUG9wdXBXaW5kb3cuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbmV3LXdpbmRvdy9lcy9pbmRleC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1kb2NrL2VzL0RvY2tEcm9wTGF5ZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtZG9jay9lcy9Eb2NrRHJvcEVkZ2UuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtZG9jay9lcy9Eb2NrUGFuZWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtbmV3LXdpbmRvdy9saWIvQnJvd3NlclBvcHVwV2luZG93LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLW5ldy13aW5kb3cvbGliL1NjcmVlblBvc2l0aW9uLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRvY2svZXMvV2luZG93UGFuZWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtZG9jay9lcy9XaW5kb3dCb3guanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtZG9jay9lcy9Eb2NrVGFicy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1kb2NrL2VzL0RpdmlkZXIuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtZG9jay9lcy9Eb2NrQm94LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRvY2svZXMvRmxvYXRCb3guanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmMtZG9jay9lcy9TZXJpYWxpemVyLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRvY2svZXMvTWF4Qm94LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JjLWRvY2svZXMvRG9ja0xheW91dC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yYy1kb2NrL2VzL0RpdmlkZXJCb3guanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtbW9kYWwvbGliL2hlbHBlcnMvdGFiYmFibGUuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtbW9kYWwvbGliL2hlbHBlcnMvZm9jdXNNYW5hZ2VyLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LW1vZGFsL2xpYi9oZWxwZXJzL3Njb3BlVGFiLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3dhcm5pbmcvd2FybmluZy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9leGVudi9pbmRleC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1tb2RhbC9saWIvaGVscGVycy9zYWZlSFRNTEVsZW1lbnQuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvcmVhY3QtbW9kYWwvbGliL2hlbHBlcnMvYXJpYUFwcEhpZGVyLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LW1vZGFsL2xpYi9oZWxwZXJzL2NsYXNzTGlzdC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC1tb2RhbC9saWIvaGVscGVycy9wb3J0YWxPcGVuSW5zdGFuY2VzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LW1vZGFsL2xpYi9oZWxwZXJzL2JvZHlUcmFwLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LW1vZGFsL2xpYi9jb21wb25lbnRzL01vZGFsUG9ydGFsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LWxpZmVjeWNsZXMtY29tcGF0L3JlYWN0LWxpZmVjeWNsZXMtY29tcGF0LmVzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LW1vZGFsL2xpYi9jb21wb25lbnRzL01vZGFsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LW1vZGFsL2xpYi9pbmRleC5qcyIsIi4uLy4uLy4uL2VkaXRvci9zcmMvZnVuY3Rpb25zL2dldFNjZW5lLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9jb250ZXh0cy9TZXR0aW5nc0NvbnRleHQudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2RpYWxvZ3MvQ29uZmlybURpYWxvZy50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvaW5wdXRzL0Zvcm1GaWVsZC50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvZGlhbG9ncy9FeHBvcnRQcm9qZWN0RGlhbG9nLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9kaWFsb2dzL1ByZXZpZXdEaWFsb2cudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2RpYWxvZ3MvU2F2ZU5ld1Byb2plY3REaWFsb2cudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2RuZC9EcmFnTGF5ZXIudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL3Byb3BlcnRpZXMvRGVmYXVsdE5vZGVFZGl0b3IudHN4IiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3JlYWN0LXdpbmRvdy9kaXN0L2luZGV4LmVzbS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9yZWFjdC12aXJ0dWFsaXplZC1hdXRvLXNpemVyL2Rpc3QvaW5kZXguZXNtLmpzIiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2RuZC9pbmRleC50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvaGllcmFyY2h5L05vZGVJc3N1ZXNJY29uLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9oaWVyYXJjaHkvSGllcmFyY2h5UGFuZWxDb250YWluZXIudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2xheW91dC9QYW5lbC50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvcHJvcGVydGllcy9UcmFuc2Zvcm1Qcm9wZXJ0eUdyb3VwLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9wcm9wZXJ0aWVzL05hbWVJbnB1dEdyb3VwLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9wcm9wZXJ0aWVzL1Byb3BlcnRpZXNQYW5lbENvbnRhaW5lci50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvdG9vbGJhci9Ub29sQnV0dG9uLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9tYWluTWVudS9pbmRleC50c3giLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHN0eWxlZC1pY29ucy9ib3hpY29ucy1yZWd1bGFyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BzdHlsZWQtaWNvbnMvYm94aWNvbnMtcmVndWxhci9HcmlkL0dyaWQuZXNtLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BzdHlsZWQtaWNvbnMvYm94aWNvbnMtcmVndWxhci9DYXJldExlZnQvQ2FyZXRMZWZ0LmVzbS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ac3R5bGVkLWljb25zL2JveGljb25zLXJlZ3VsYXIvQ2FyZXRSaWdodC9DYXJldFJpZ2h0LmVzbS5qcyIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9pbnB1dHMvTnVtZXJpY1N0ZXBwZXJJbnB1dC50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvdG9vbGJhci90b29scy9HcmlkVG9vbC50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvdG9vbGJhci90b29scy9UcmFuc2Zvcm1Ub29sLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy90b29sYmFyL3Rvb2xzL1RyYW5zZm9ybVBpdm90VG9vbC50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvdG9vbGJhci90b29scy9UcmFuc2Zvcm1TcGFjZVRvb2wudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL3Rvb2xiYXIvdG9vbHMvVHJhbnNmb3JtU25hcFRvb2wudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL3Rvb2xiYXIvdG9vbHMvUGxheU1vZGVUb29sLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy90b29sYmFyL3Rvb2xzL1N0YXRzVG9vbC50c3giLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQHN0eWxlZC1pY29ucy9ib3hpY29ucy1yZWd1bGFyL1N1bi9TdW4uZXNtLmpzIiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL3Rvb2xiYXIvdG9vbHMvUmVuZGVyTW9kZVRvb2wudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL3Rvb2xiYXIvVG9vbEJhci50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvdGhlbWUudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL3ZpZXdwb3J0L1ZpZXdwb3J0UGFuZWxDb250YWluZXIudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2RpYWxvZ3MvUGVyZm9ybWFuY2VDaGVja0RpYWxvZy50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvZGlhbG9ncy9QdWJsaXNoRGlhbG9nLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9kaWFsb2dzL1B1Ymxpc2hlZFNjZW5lRGlhbG9nLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvZnVuY3Rpb25zL2dldFVybEZyb21JZC50c3giLCIuLi8uLi8uLi9lbmdpbmUvc3JjL3NjZW5lL2Z1bmN0aW9ucy9nZXRDb250ZW50VHlwZS50cyIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9hc3NldHMvRmlsZUJyb3dzZXJDb250ZW50UGFuZWwudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2Fzc2V0cy9Bc3NldFByZXZpZXdQYW5lbHMvQXVkaW9QcmV2aWV3UGFuZWwudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2Fzc2V0cy9Bc3NldFByZXZpZXdQYW5lbHMvSW1hZ2VQcmV2aWV3UGFuZWwudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2Fzc2V0cy9Bc3NldFByZXZpZXdQYW5lbHMvTW9kZWxQcmV2aWV3UGFuZWwudHN4IiwiLi4vLi4vLi4vZWRpdG9yL3NyYy9jb21wb25lbnRzL2Fzc2V0cy9Bc3NldFByZXZpZXdQYW5lbHMvUHJldmlld1VuYXZhaWxhYmxlLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9hc3NldHMvQXNzZXRQcmV2aWV3UGFuZWxzL1ZlZGlvUHJldmlld1BhbmVsLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9hc3NldHMvQXNzZXRzUHJldmlld1BhbmVsLnRzeCIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9hc3NldHMvRmlsZUJyb3dzZXJQYW5lbC50c3giLCIuLi8uLi8uLi9lZGl0b3Ivc3JjL2NvbXBvbmVudHMvY29uZmlncy50cyIsIi4uLy4uLy4uL2VkaXRvci9zcmMvY29tcG9uZW50cy9FZGl0b3JDb250YWluZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB2YXIgSGFuZGxlclJvbGU7XG5cbihmdW5jdGlvbiAoSGFuZGxlclJvbGUpIHtcbiAgSGFuZGxlclJvbGVbXCJTT1VSQ0VcIl0gPSBcIlNPVVJDRVwiO1xuICBIYW5kbGVyUm9sZVtcIlRBUkdFVFwiXSA9IFwiVEFSR0VUXCI7XG59KShIYW5kbGVyUm9sZSB8fCAoSGFuZGxlclJvbGUgPSB7fSkpOyIsImV4cG9ydCB2YXIgSU5JVF9DT09SRFMgPSAnZG5kLWNvcmUvSU5JVF9DT09SRFMnO1xuZXhwb3J0IHZhciBCRUdJTl9EUkFHID0gJ2RuZC1jb3JlL0JFR0lOX0RSQUcnO1xuZXhwb3J0IHZhciBQVUJMSVNIX0RSQUdfU09VUkNFID0gJ2RuZC1jb3JlL1BVQkxJU0hfRFJBR19TT1VSQ0UnO1xuZXhwb3J0IHZhciBIT1ZFUiA9ICdkbmQtY29yZS9IT1ZFUic7XG5leHBvcnQgdmFyIERST1AgPSAnZG5kLWNvcmUvRFJPUCc7XG5leHBvcnQgdmFyIEVORF9EUkFHID0gJ2RuZC1jb3JlL0VORF9EUkFHJzsiLCJpbXBvcnQgeyBJTklUX0NPT1JEUyB9IGZyb20gJy4uL3R5cGVzJztcbmV4cG9ydCBmdW5jdGlvbiBzZXRDbGllbnRPZmZzZXQoY2xpZW50T2Zmc2V0LCBzb3VyY2VDbGllbnRPZmZzZXQpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBJTklUX0NPT1JEUyxcbiAgICBwYXlsb2FkOiB7XG4gICAgICBzb3VyY2VDbGllbnRPZmZzZXQ6IHNvdXJjZUNsaWVudE9mZnNldCB8fCBudWxsLFxuICAgICAgY2xpZW50T2Zmc2V0OiBjbGllbnRPZmZzZXQgfHwgbnVsbFxuICAgIH1cbiAgfTtcbn0iLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbi8vIGNoZWFwIGxvZGFzaCByZXBsYWNlbWVudHNcblxuLyoqXG4gKiBkcm9wLWluIHJlcGxhY2VtZW50IGZvciBfLmdldFxuICogQHBhcmFtIG9ialxuICogQHBhcmFtIHBhdGhcbiAqIEBwYXJhbSBkZWZhdWx0VmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldChvYmosIHBhdGgsIGRlZmF1bHRWYWx1ZSkge1xuICByZXR1cm4gcGF0aC5zcGxpdCgnLicpLnJlZHVjZShmdW5jdGlvbiAoYSwgYykge1xuICAgIHJldHVybiBhICYmIGFbY10gPyBhW2NdIDogZGVmYXVsdFZhbHVlIHx8IG51bGw7XG4gIH0sIG9iaik7XG59XG4vKipcbiAqIGRyb3AtaW4gcmVwbGFjZW1lbnQgZm9yIF8ud2l0aG91dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB3aXRob3V0KGl0ZW1zLCBpdGVtKSB7XG4gIHJldHVybiBpdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGkpIHtcbiAgICByZXR1cm4gaSAhPT0gaXRlbTtcbiAgfSk7XG59XG4vKipcbiAqIGRyb3AtaW4gcmVwbGFjZW1lbnQgZm9yIF8uaXNTdHJpbmdcbiAqIEBwYXJhbSBpbnB1dFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZyhpbnB1dCkge1xuICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJztcbn1cbi8qKlxuICogZHJvcC1pbiByZXBsYWNlbWVudCBmb3IgXy5pc1N0cmluZ1xuICogQHBhcmFtIGlucHV0XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KGlucHV0KSB7XG4gIHJldHVybiBfdHlwZW9mKGlucHV0KSA9PT0gJ29iamVjdCc7XG59XG4vKipcbiAqIHJlcGFsY2VtZW50IGZvciBfLnhvclxuICogQHBhcmFtIGl0ZW1zQVxuICogQHBhcmFtIGl0ZW1zQlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB4b3IoaXRlbXNBLCBpdGVtc0IpIHtcbiAgdmFyIG1hcCA9IG5ldyBNYXAoKTtcblxuICB2YXIgaW5zZXJ0SXRlbSA9IGZ1bmN0aW9uIGluc2VydEl0ZW0oaXRlbSkge1xuICAgIG1hcC5zZXQoaXRlbSwgbWFwLmhhcyhpdGVtKSA/IG1hcC5nZXQoaXRlbSkgKyAxIDogMSk7XG4gIH07XG5cbiAgaXRlbXNBLmZvckVhY2goaW5zZXJ0SXRlbSk7XG4gIGl0ZW1zQi5mb3JFYWNoKGluc2VydEl0ZW0pO1xuICB2YXIgcmVzdWx0ID0gW107XG4gIG1hcC5mb3JFYWNoKGZ1bmN0aW9uIChjb3VudCwga2V5KSB7XG4gICAgaWYgKGNvdW50ID09PSAxKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG4vKipcbiAqIHJlcGxhY2VtZW50IGZvciBfLmludGVyc2VjdGlvblxuICogQHBhcmFtIGl0ZW1zQVxuICogQHBhcmFtIGl0ZW1zQlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3Rpb24oaXRlbXNBLCBpdGVtc0IpIHtcbiAgcmV0dXJuIGl0ZW1zQS5maWx0ZXIoZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gaXRlbXNCLmluZGV4T2YodCkgPiAtMTtcbiAgfSk7XG59IiwiaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAnQHJlYWN0LWRuZC9pbnZhcmlhbnQnO1xuaW1wb3J0IHsgc2V0Q2xpZW50T2Zmc2V0IH0gZnJvbSAnLi9sb2NhbC9zZXRDbGllbnRPZmZzZXQnO1xuaW1wb3J0IHsgaXNPYmplY3QgfSBmcm9tICcuLi8uLi91dGlscy9qc191dGlscyc7XG5pbXBvcnQgeyBCRUdJTl9EUkFHLCBJTklUX0NPT1JEUyB9IGZyb20gJy4vdHlwZXMnO1xudmFyIFJlc2V0Q29vcmRpbmF0ZXNBY3Rpb24gPSB7XG4gIHR5cGU6IElOSVRfQ09PUkRTLFxuICBwYXlsb2FkOiB7XG4gICAgY2xpZW50T2Zmc2V0OiBudWxsLFxuICAgIHNvdXJjZUNsaWVudE9mZnNldDogbnVsbFxuICB9XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUJlZ2luRHJhZyhtYW5hZ2VyKSB7XG4gIHJldHVybiBmdW5jdGlvbiBiZWdpbkRyYWcoKSB7XG4gICAgdmFyIHNvdXJjZUlkcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHtcbiAgICAgIHB1Ymxpc2hTb3VyY2U6IHRydWVcbiAgICB9O1xuICAgIHZhciBfb3B0aW9ucyRwdWJsaXNoU291cmMgPSBvcHRpb25zLnB1Ymxpc2hTb3VyY2UsXG4gICAgICAgIHB1Ymxpc2hTb3VyY2UgPSBfb3B0aW9ucyRwdWJsaXNoU291cmMgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRwdWJsaXNoU291cmMsXG4gICAgICAgIGNsaWVudE9mZnNldCA9IG9wdGlvbnMuY2xpZW50T2Zmc2V0LFxuICAgICAgICBnZXRTb3VyY2VDbGllbnRPZmZzZXQgPSBvcHRpb25zLmdldFNvdXJjZUNsaWVudE9mZnNldDtcbiAgICB2YXIgbW9uaXRvciA9IG1hbmFnZXIuZ2V0TW9uaXRvcigpO1xuICAgIHZhciByZWdpc3RyeSA9IG1hbmFnZXIuZ2V0UmVnaXN0cnkoKTsgLy8gSW5pdGlhbGl6ZSB0aGUgY29vcmRpbmF0ZXMgdXNpbmcgdGhlIGNsaWVudCBvZmZzZXRcblxuICAgIG1hbmFnZXIuZGlzcGF0Y2goc2V0Q2xpZW50T2Zmc2V0KGNsaWVudE9mZnNldCkpO1xuICAgIHZlcmlmeUludmFyaWFudHMoc291cmNlSWRzLCBtb25pdG9yLCByZWdpc3RyeSk7IC8vIEdldCB0aGUgZHJhZ2dhYmxlIHNvdXJjZVxuXG4gICAgdmFyIHNvdXJjZUlkID0gZ2V0RHJhZ2dhYmxlU291cmNlKHNvdXJjZUlkcywgbW9uaXRvcik7XG5cbiAgICBpZiAoc291cmNlSWQgPT09IG51bGwpIHtcbiAgICAgIG1hbmFnZXIuZGlzcGF0Y2goUmVzZXRDb29yZGluYXRlc0FjdGlvbik7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBHZXQgdGhlIHNvdXJjZSBjbGllbnQgb2Zmc2V0XG5cblxuICAgIHZhciBzb3VyY2VDbGllbnRPZmZzZXQgPSBudWxsO1xuXG4gICAgaWYgKGNsaWVudE9mZnNldCkge1xuICAgICAgaWYgKCFnZXRTb3VyY2VDbGllbnRPZmZzZXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdnZXRTb3VyY2VDbGllbnRPZmZzZXQgbXVzdCBiZSBkZWZpbmVkJyk7XG4gICAgICB9XG5cbiAgICAgIHZlcmlmeUdldFNvdXJjZUNsaWVudE9mZnNldElzRnVuY3Rpb24oZ2V0U291cmNlQ2xpZW50T2Zmc2V0KTtcbiAgICAgIHNvdXJjZUNsaWVudE9mZnNldCA9IGdldFNvdXJjZUNsaWVudE9mZnNldChzb3VyY2VJZCk7XG4gICAgfSAvLyBJbml0aWFsaXplIHRoZSBmdWxsIGNvb3JkaW5hdGVzXG5cblxuICAgIG1hbmFnZXIuZGlzcGF0Y2goc2V0Q2xpZW50T2Zmc2V0KGNsaWVudE9mZnNldCwgc291cmNlQ2xpZW50T2Zmc2V0KSk7XG4gICAgdmFyIHNvdXJjZSA9IHJlZ2lzdHJ5LmdldFNvdXJjZShzb3VyY2VJZCk7XG4gICAgdmFyIGl0ZW0gPSBzb3VyY2UuYmVnaW5EcmFnKG1vbml0b3IsIHNvdXJjZUlkKTsgLy8gSWYgc291cmNlLmJlZ2luRHJhZyByZXR1cm5zIG51bGwsIHRoaXMgaXMgYW4gaW5kaWNhdG9yIHRvIGNhbmNlbCB0aGUgZHJhZ1xuXG4gICAgaWYgKGl0ZW0gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICB2ZXJpZnlJdGVtSXNPYmplY3QoaXRlbSk7XG4gICAgcmVnaXN0cnkucGluU291cmNlKHNvdXJjZUlkKTtcbiAgICB2YXIgaXRlbVR5cGUgPSByZWdpc3RyeS5nZXRTb3VyY2VUeXBlKHNvdXJjZUlkKTtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogQkVHSU5fRFJBRyxcbiAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgaXRlbVR5cGU6IGl0ZW1UeXBlLFxuICAgICAgICBpdGVtOiBpdGVtLFxuICAgICAgICBzb3VyY2VJZDogc291cmNlSWQsXG4gICAgICAgIGNsaWVudE9mZnNldDogY2xpZW50T2Zmc2V0IHx8IG51bGwsXG4gICAgICAgIHNvdXJjZUNsaWVudE9mZnNldDogc291cmNlQ2xpZW50T2Zmc2V0IHx8IG51bGwsXG4gICAgICAgIGlzU291cmNlUHVibGljOiAhIXB1Ymxpc2hTb3VyY2VcbiAgICAgIH1cbiAgICB9O1xuICB9O1xufVxuXG5mdW5jdGlvbiB2ZXJpZnlJbnZhcmlhbnRzKHNvdXJjZUlkcywgbW9uaXRvciwgcmVnaXN0cnkpIHtcbiAgaW52YXJpYW50KCFtb25pdG9yLmlzRHJhZ2dpbmcoKSwgJ0Nhbm5vdCBjYWxsIGJlZ2luRHJhZyB3aGlsZSBkcmFnZ2luZy4nKTtcbiAgc291cmNlSWRzLmZvckVhY2goZnVuY3Rpb24gKHNvdXJjZUlkKSB7XG4gICAgaW52YXJpYW50KHJlZ2lzdHJ5LmdldFNvdXJjZShzb3VyY2VJZCksICdFeHBlY3RlZCBzb3VyY2VJZHMgdG8gYmUgcmVnaXN0ZXJlZC4nKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHZlcmlmeUdldFNvdXJjZUNsaWVudE9mZnNldElzRnVuY3Rpb24oZ2V0U291cmNlQ2xpZW50T2Zmc2V0KSB7XG4gIGludmFyaWFudCh0eXBlb2YgZ2V0U291cmNlQ2xpZW50T2Zmc2V0ID09PSAnZnVuY3Rpb24nLCAnV2hlbiBjbGllbnRPZmZzZXQgaXMgcHJvdmlkZWQsIGdldFNvdXJjZUNsaWVudE9mZnNldCBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG59XG5cbmZ1bmN0aW9uIHZlcmlmeUl0ZW1Jc09iamVjdChpdGVtKSB7XG4gIGludmFyaWFudChpc09iamVjdChpdGVtKSwgJ0l0ZW0gbXVzdCBiZSBhbiBvYmplY3QuJyk7XG59XG5cbmZ1bmN0aW9uIGdldERyYWdnYWJsZVNvdXJjZShzb3VyY2VJZHMsIG1vbml0b3IpIHtcbiAgdmFyIHNvdXJjZUlkID0gbnVsbDtcblxuICBmb3IgKHZhciBpID0gc291cmNlSWRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgaWYgKG1vbml0b3IuY2FuRHJhZ1NvdXJjZShzb3VyY2VJZHNbaV0pKSB7XG4gICAgICBzb3VyY2VJZCA9IHNvdXJjZUlkc1tpXTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzb3VyY2VJZDtcbn0iLCJpbXBvcnQgeyBQVUJMSVNIX0RSQUdfU09VUkNFIH0gZnJvbSAnLi90eXBlcyc7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHVibGlzaERyYWdTb3VyY2UobWFuYWdlcikge1xuICByZXR1cm4gZnVuY3Rpb24gcHVibGlzaERyYWdTb3VyY2UoKSB7XG4gICAgdmFyIG1vbml0b3IgPSBtYW5hZ2VyLmdldE1vbml0b3IoKTtcblxuICAgIGlmIChtb25pdG9yLmlzRHJhZ2dpbmcoKSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUFVCTElTSF9EUkFHX1NPVVJDRVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59IiwiZXhwb3J0IGZ1bmN0aW9uIG1hdGNoZXNUeXBlKHRhcmdldFR5cGUsIGRyYWdnZWRJdGVtVHlwZSkge1xuICBpZiAoZHJhZ2dlZEl0ZW1UeXBlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHRhcmdldFR5cGUgPT09IG51bGw7XG4gIH1cblxuICByZXR1cm4gQXJyYXkuaXNBcnJheSh0YXJnZXRUeXBlKSA/IHRhcmdldFR5cGUuc29tZShmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiB0ID09PSBkcmFnZ2VkSXRlbVR5cGU7XG4gIH0pIDogdGFyZ2V0VHlwZSA9PT0gZHJhZ2dlZEl0ZW1UeXBlO1xufSIsImltcG9ydCB7IGludmFyaWFudCB9IGZyb20gJ0ByZWFjdC1kbmQvaW52YXJpYW50JztcbmltcG9ydCB7IG1hdGNoZXNUeXBlIH0gZnJvbSAnLi4vLi4vdXRpbHMvbWF0Y2hlc1R5cGUnO1xuaW1wb3J0IHsgSE9WRVIgfSBmcm9tICcuL3R5cGVzJztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVIb3ZlcihtYW5hZ2VyKSB7XG4gIHJldHVybiBmdW5jdGlvbiBob3Zlcih0YXJnZXRJZHNBcmcpIHtcbiAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge30sXG4gICAgICAgIGNsaWVudE9mZnNldCA9IF9yZWYuY2xpZW50T2Zmc2V0O1xuXG4gICAgdmVyaWZ5VGFyZ2V0SWRzSXNBcnJheSh0YXJnZXRJZHNBcmcpO1xuICAgIHZhciB0YXJnZXRJZHMgPSB0YXJnZXRJZHNBcmcuc2xpY2UoMCk7XG4gICAgdmFyIG1vbml0b3IgPSBtYW5hZ2VyLmdldE1vbml0b3IoKTtcbiAgICB2YXIgcmVnaXN0cnkgPSBtYW5hZ2VyLmdldFJlZ2lzdHJ5KCk7XG4gICAgY2hlY2tJbnZhcmlhbnRzKHRhcmdldElkcywgbW9uaXRvciwgcmVnaXN0cnkpO1xuICAgIHZhciBkcmFnZ2VkSXRlbVR5cGUgPSBtb25pdG9yLmdldEl0ZW1UeXBlKCk7XG4gICAgcmVtb3ZlTm9uTWF0Y2hpbmdUYXJnZXRJZHModGFyZ2V0SWRzLCByZWdpc3RyeSwgZHJhZ2dlZEl0ZW1UeXBlKTtcbiAgICBob3ZlckFsbFRhcmdldHModGFyZ2V0SWRzLCBtb25pdG9yLCByZWdpc3RyeSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IEhPVkVSLFxuICAgICAgcGF5bG9hZDoge1xuICAgICAgICB0YXJnZXRJZHM6IHRhcmdldElkcyxcbiAgICAgICAgY2xpZW50T2Zmc2V0OiBjbGllbnRPZmZzZXQgfHwgbnVsbFxuICAgICAgfVxuICAgIH07XG4gIH07XG59XG5cbmZ1bmN0aW9uIHZlcmlmeVRhcmdldElkc0lzQXJyYXkodGFyZ2V0SWRzQXJnKSB7XG4gIGludmFyaWFudChBcnJheS5pc0FycmF5KHRhcmdldElkc0FyZyksICdFeHBlY3RlZCB0YXJnZXRJZHMgdG8gYmUgYW4gYXJyYXkuJyk7XG59XG5cbmZ1bmN0aW9uIGNoZWNrSW52YXJpYW50cyh0YXJnZXRJZHMsIG1vbml0b3IsIHJlZ2lzdHJ5KSB7XG4gIGludmFyaWFudChtb25pdG9yLmlzRHJhZ2dpbmcoKSwgJ0Nhbm5vdCBjYWxsIGhvdmVyIHdoaWxlIG5vdCBkcmFnZ2luZy4nKTtcbiAgaW52YXJpYW50KCFtb25pdG9yLmRpZERyb3AoKSwgJ0Nhbm5vdCBjYWxsIGhvdmVyIGFmdGVyIGRyb3AuJyk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YXJnZXRJZHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdGFyZ2V0SWQgPSB0YXJnZXRJZHNbaV07XG4gICAgaW52YXJpYW50KHRhcmdldElkcy5sYXN0SW5kZXhPZih0YXJnZXRJZCkgPT09IGksICdFeHBlY3RlZCB0YXJnZXRJZHMgdG8gYmUgdW5pcXVlIGluIHRoZSBwYXNzZWQgYXJyYXkuJyk7XG4gICAgdmFyIHRhcmdldCA9IHJlZ2lzdHJ5LmdldFRhcmdldCh0YXJnZXRJZCk7XG4gICAgaW52YXJpYW50KHRhcmdldCwgJ0V4cGVjdGVkIHRhcmdldElkcyB0byBiZSByZWdpc3RlcmVkLicpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZU5vbk1hdGNoaW5nVGFyZ2V0SWRzKHRhcmdldElkcywgcmVnaXN0cnksIGRyYWdnZWRJdGVtVHlwZSkge1xuICAvLyBSZW1vdmUgdGhvc2UgdGFyZ2V0SWRzIHRoYXQgZG9uJ3QgbWF0Y2ggdGhlIHRhcmdldFR5cGUuICBUaGlzXG4gIC8vIGZpeGVzIHNoYWxsb3cgaXNPdmVyIHdoaWNoIHdvdWxkIG9ubHkgYmUgbm9uLXNoYWxsb3cgYmVjYXVzZSBvZlxuICAvLyBub24tbWF0Y2hpbmcgdGFyZ2V0cy5cbiAgZm9yICh2YXIgaSA9IHRhcmdldElkcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIHZhciB0YXJnZXRJZCA9IHRhcmdldElkc1tpXTtcbiAgICB2YXIgdGFyZ2V0VHlwZSA9IHJlZ2lzdHJ5LmdldFRhcmdldFR5cGUodGFyZ2V0SWQpO1xuXG4gICAgaWYgKCFtYXRjaGVzVHlwZSh0YXJnZXRUeXBlLCBkcmFnZ2VkSXRlbVR5cGUpKSB7XG4gICAgICB0YXJnZXRJZHMuc3BsaWNlKGksIDEpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBob3ZlckFsbFRhcmdldHModGFyZ2V0SWRzLCBtb25pdG9yLCByZWdpc3RyeSkge1xuICAvLyBGaW5hbGx5IGNhbGwgaG92ZXIgb24gYWxsIG1hdGNoaW5nIHRhcmdldHMuXG4gIHRhcmdldElkcy5mb3JFYWNoKGZ1bmN0aW9uICh0YXJnZXRJZCkge1xuICAgIHZhciB0YXJnZXQgPSByZWdpc3RyeS5nZXRUYXJnZXQodGFyZ2V0SWQpO1xuICAgIHRhcmdldC5ob3Zlcihtb25pdG9yLCB0YXJnZXRJZCk7XG4gIH0pO1xufSIsImZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHsgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyB9IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAnQHJlYWN0LWRuZC9pbnZhcmlhbnQnO1xuaW1wb3J0IHsgRFJPUCB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgaXNPYmplY3QgfSBmcm9tICcuLi8uLi91dGlscy9qc191dGlscyc7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRHJvcChtYW5hZ2VyKSB7XG4gIHJldHVybiBmdW5jdGlvbiBkcm9wKCkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICB2YXIgbW9uaXRvciA9IG1hbmFnZXIuZ2V0TW9uaXRvcigpO1xuICAgIHZhciByZWdpc3RyeSA9IG1hbmFnZXIuZ2V0UmVnaXN0cnkoKTtcbiAgICB2ZXJpZnlJbnZhcmlhbnRzKG1vbml0b3IpO1xuICAgIHZhciB0YXJnZXRJZHMgPSBnZXREcm9wcGFibGVUYXJnZXRzKG1vbml0b3IpOyAvLyBNdWx0aXBsZSBhY3Rpb25zIGFyZSBkaXNwYXRjaGVkIGhlcmUsIHdoaWNoIGlzIHdoeSB0aGlzIGRvZXNuJ3QgcmV0dXJuIGFuIGFjdGlvblxuXG4gICAgdGFyZ2V0SWRzLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldElkLCBpbmRleCkge1xuICAgICAgdmFyIGRyb3BSZXN1bHQgPSBkZXRlcm1pbmVEcm9wUmVzdWx0KHRhcmdldElkLCBpbmRleCwgcmVnaXN0cnksIG1vbml0b3IpO1xuICAgICAgdmFyIGFjdGlvbiA9IHtcbiAgICAgICAgdHlwZTogRFJPUCxcbiAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgIGRyb3BSZXN1bHQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgb3B0aW9ucyksIGRyb3BSZXN1bHQpXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBtYW5hZ2VyLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgfSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHZlcmlmeUludmFyaWFudHMobW9uaXRvcikge1xuICBpbnZhcmlhbnQobW9uaXRvci5pc0RyYWdnaW5nKCksICdDYW5ub3QgY2FsbCBkcm9wIHdoaWxlIG5vdCBkcmFnZ2luZy4nKTtcbiAgaW52YXJpYW50KCFtb25pdG9yLmRpZERyb3AoKSwgJ0Nhbm5vdCBjYWxsIGRyb3AgdHdpY2UgZHVyaW5nIG9uZSBkcmFnIG9wZXJhdGlvbi4nKTtcbn1cblxuZnVuY3Rpb24gZGV0ZXJtaW5lRHJvcFJlc3VsdCh0YXJnZXRJZCwgaW5kZXgsIHJlZ2lzdHJ5LCBtb25pdG9yKSB7XG4gIHZhciB0YXJnZXQgPSByZWdpc3RyeS5nZXRUYXJnZXQodGFyZ2V0SWQpO1xuICB2YXIgZHJvcFJlc3VsdCA9IHRhcmdldCA/IHRhcmdldC5kcm9wKG1vbml0b3IsIHRhcmdldElkKSA6IHVuZGVmaW5lZDtcbiAgdmVyaWZ5RHJvcFJlc3VsdFR5cGUoZHJvcFJlc3VsdCk7XG5cbiAgaWYgKHR5cGVvZiBkcm9wUmVzdWx0ID09PSAndW5kZWZpbmVkJykge1xuICAgIGRyb3BSZXN1bHQgPSBpbmRleCA9PT0gMCA/IHt9IDogbW9uaXRvci5nZXREcm9wUmVzdWx0KCk7XG4gIH1cblxuICByZXR1cm4gZHJvcFJlc3VsdDtcbn1cblxuZnVuY3Rpb24gdmVyaWZ5RHJvcFJlc3VsdFR5cGUoZHJvcFJlc3VsdCkge1xuICBpbnZhcmlhbnQodHlwZW9mIGRyb3BSZXN1bHQgPT09ICd1bmRlZmluZWQnIHx8IGlzT2JqZWN0KGRyb3BSZXN1bHQpLCAnRHJvcCByZXN1bHQgbXVzdCBlaXRoZXIgYmUgYW4gb2JqZWN0IG9yIHVuZGVmaW5lZC4nKTtcbn1cblxuZnVuY3Rpb24gZ2V0RHJvcHBhYmxlVGFyZ2V0cyhtb25pdG9yKSB7XG4gIHZhciB0YXJnZXRJZHMgPSBtb25pdG9yLmdldFRhcmdldElkcygpLmZpbHRlcihtb25pdG9yLmNhbkRyb3BPblRhcmdldCwgbW9uaXRvcik7XG4gIHRhcmdldElkcy5yZXZlcnNlKCk7XG4gIHJldHVybiB0YXJnZXRJZHM7XG59IiwiaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAnQHJlYWN0LWRuZC9pbnZhcmlhbnQnO1xuaW1wb3J0IHsgRU5EX0RSQUcgfSBmcm9tICcuL3R5cGVzJztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbmREcmFnKG1hbmFnZXIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGVuZERyYWcoKSB7XG4gICAgdmFyIG1vbml0b3IgPSBtYW5hZ2VyLmdldE1vbml0b3IoKTtcbiAgICB2YXIgcmVnaXN0cnkgPSBtYW5hZ2VyLmdldFJlZ2lzdHJ5KCk7XG4gICAgdmVyaWZ5SXNEcmFnZ2luZyhtb25pdG9yKTtcbiAgICB2YXIgc291cmNlSWQgPSBtb25pdG9yLmdldFNvdXJjZUlkKCk7XG5cbiAgICBpZiAoc291cmNlSWQgIT0gbnVsbCkge1xuICAgICAgdmFyIHNvdXJjZSA9IHJlZ2lzdHJ5LmdldFNvdXJjZShzb3VyY2VJZCwgdHJ1ZSk7XG4gICAgICBzb3VyY2UuZW5kRHJhZyhtb25pdG9yLCBzb3VyY2VJZCk7XG4gICAgICByZWdpc3RyeS51bnBpblNvdXJjZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBFTkRfRFJBR1xuICAgIH07XG4gIH07XG59XG5cbmZ1bmN0aW9uIHZlcmlmeUlzRHJhZ2dpbmcobW9uaXRvcikge1xuICBpbnZhcmlhbnQobW9uaXRvci5pc0RyYWdnaW5nKCksICdDYW5ub3QgY2FsbCBlbmREcmFnIHdoaWxlIG5vdCBkcmFnZ2luZy4nKTtcbn0iLCJpbXBvcnQgeyBjcmVhdGVCZWdpbkRyYWcgfSBmcm9tICcuL2JlZ2luRHJhZyc7XG5pbXBvcnQgeyBjcmVhdGVQdWJsaXNoRHJhZ1NvdXJjZSB9IGZyb20gJy4vcHVibGlzaERyYWdTb3VyY2UnO1xuaW1wb3J0IHsgY3JlYXRlSG92ZXIgfSBmcm9tICcuL2hvdmVyJztcbmltcG9ydCB7IGNyZWF0ZURyb3AgfSBmcm9tICcuL2Ryb3AnO1xuaW1wb3J0IHsgY3JlYXRlRW5kRHJhZyB9IGZyb20gJy4vZW5kRHJhZyc7XG5leHBvcnQgKiBmcm9tICcuL3R5cGVzJztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEcmFnRHJvcEFjdGlvbnMobWFuYWdlcikge1xuICByZXR1cm4ge1xuICAgIGJlZ2luRHJhZzogY3JlYXRlQmVnaW5EcmFnKG1hbmFnZXIpLFxuICAgIHB1Ymxpc2hEcmFnU291cmNlOiBjcmVhdGVQdWJsaXNoRHJhZ1NvdXJjZShtYW5hZ2VyKSxcbiAgICBob3ZlcjogY3JlYXRlSG92ZXIobWFuYWdlciksXG4gICAgZHJvcDogY3JlYXRlRHJvcChtYW5hZ2VyKSxcbiAgICBlbmREcmFnOiBjcmVhdGVFbmREcmFnKG1hbmFnZXIpXG4gIH07XG59IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5pbXBvcnQgeyBjcmVhdGVEcmFnRHJvcEFjdGlvbnMgfSBmcm9tICcuLi9hY3Rpb25zL2RyYWdEcm9wJztcbmV4cG9ydCB2YXIgRHJhZ0Ryb3BNYW5hZ2VySW1wbCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIERyYWdEcm9wTWFuYWdlckltcGwoc3RvcmUsIG1vbml0b3IpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyYWdEcm9wTWFuYWdlckltcGwpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwic3RvcmVcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vbml0b3JcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJhY2tlbmRcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlzU2V0VXBcIiwgZmFsc2UpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFuZGxlUmVmQ291bnRDaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHNob3VsZFNldFVwID0gX3RoaXMuc3RvcmUuZ2V0U3RhdGUoKS5yZWZDb3VudCA+IDA7XG5cbiAgICAgIGlmIChfdGhpcy5iYWNrZW5kKSB7XG4gICAgICAgIGlmIChzaG91bGRTZXRVcCAmJiAhX3RoaXMuaXNTZXRVcCkge1xuICAgICAgICAgIF90aGlzLmJhY2tlbmQuc2V0dXAoKTtcblxuICAgICAgICAgIF90aGlzLmlzU2V0VXAgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKCFzaG91bGRTZXRVcCAmJiBfdGhpcy5pc1NldFVwKSB7XG4gICAgICAgICAgX3RoaXMuYmFja2VuZC50ZWFyZG93bigpO1xuXG4gICAgICAgICAgX3RoaXMuaXNTZXRVcCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnN0b3JlID0gc3RvcmU7XG4gICAgdGhpcy5tb25pdG9yID0gbW9uaXRvcjtcbiAgICBzdG9yZS5zdWJzY3JpYmUodGhpcy5oYW5kbGVSZWZDb3VudENoYW5nZSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRHJhZ0Ryb3BNYW5hZ2VySW1wbCwgW3tcbiAgICBrZXk6IFwicmVjZWl2ZUJhY2tlbmRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVjZWl2ZUJhY2tlbmQoYmFja2VuZCkge1xuICAgICAgdGhpcy5iYWNrZW5kID0gYmFja2VuZDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0TW9uaXRvclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRNb25pdG9yKCkge1xuICAgICAgcmV0dXJuIHRoaXMubW9uaXRvcjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0QmFja2VuZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRCYWNrZW5kKCkge1xuICAgICAgcmV0dXJuIHRoaXMuYmFja2VuZDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0UmVnaXN0cnlcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UmVnaXN0cnkoKSB7XG4gICAgICByZXR1cm4gdGhpcy5tb25pdG9yLnJlZ2lzdHJ5O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRBY3Rpb25zXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFjdGlvbnMoKSB7XG4gICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXMgKi9cbiAgICAgIHZhciBtYW5hZ2VyID0gdGhpcztcbiAgICAgIHZhciBkaXNwYXRjaCA9IHRoaXMuc3RvcmUuZGlzcGF0Y2g7XG5cbiAgICAgIGZ1bmN0aW9uIGJpbmRBY3Rpb25DcmVhdG9yKGFjdGlvbkNyZWF0b3IpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGFjdGlvbiA9IGFjdGlvbkNyZWF0b3IuYXBwbHkobWFuYWdlciwgYXJncyk7XG5cbiAgICAgICAgICBpZiAodHlwZW9mIGFjdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGRpc3BhdGNoKGFjdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB2YXIgYWN0aW9ucyA9IGNyZWF0ZURyYWdEcm9wQWN0aW9ucyh0aGlzKTtcbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhhY3Rpb25zKS5yZWR1Y2UoZnVuY3Rpb24gKGJvdW5kQWN0aW9ucywga2V5KSB7XG4gICAgICAgIHZhciBhY3Rpb24gPSBhY3Rpb25zW2tleV07XG4gICAgICAgIGJvdW5kQWN0aW9uc1trZXldID0gYmluZEFjdGlvbkNyZWF0b3IoYWN0aW9uKTtcbiAgICAgICAgcmV0dXJuIGJvdW5kQWN0aW9ucztcbiAgICAgIH0sIHt9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZGlzcGF0Y2hcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcGF0Y2goYWN0aW9uKSB7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKGFjdGlvbik7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIERyYWdEcm9wTWFuYWdlckltcGw7XG59KCk7IiwiZXhwb3J0IHZhciBzdHJpY3RFcXVhbGl0eSA9IGZ1bmN0aW9uIHN0cmljdEVxdWFsaXR5KGEsIGIpIHtcbiAgcmV0dXJuIGEgPT09IGI7XG59O1xuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdHdvIGNhcnRlc2lhbiBjb29yZGluYXRlIG9mZnNldHMgYXJlIGVxdWFsXG4gKiBAcGFyYW0gb2Zmc2V0QVxuICogQHBhcmFtIG9mZnNldEJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYXJlQ29vcmRzRXF1YWwob2Zmc2V0QSwgb2Zmc2V0Qikge1xuICBpZiAoIW9mZnNldEEgJiYgIW9mZnNldEIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIGlmICghb2Zmc2V0QSB8fCAhb2Zmc2V0Qikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gb2Zmc2V0QS54ID09PSBvZmZzZXRCLnggJiYgb2Zmc2V0QS55ID09PSBvZmZzZXRCLnk7XG4gIH1cbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0d28gYXJyYXlzIG9mIGl0ZW1zIGFyZSBlcXVhbFxuICogQHBhcmFtIGEgVGhlIGZpcnN0IGFycmF5IG9mIGl0ZW1zXG4gKiBAcGFyYW0gYiBUaGUgc2Vjb25kIGFycmF5IG9mIGl0ZW1zXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFyZUFycmF5c0VxdWFsKGEsIGIpIHtcbiAgdmFyIGlzRXF1YWwgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHN0cmljdEVxdWFsaXR5O1xuXG4gIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoIWlzRXF1YWwoYVtpXSwgYltpXSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn0iLCJmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSB7IHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsgfSBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmltcG9ydCB7IElOSVRfQ09PUkRTLCBCRUdJTl9EUkFHLCBIT1ZFUiwgRU5EX0RSQUcsIERST1AgfSBmcm9tICcuLi9hY3Rpb25zL2RyYWdEcm9wJztcbmltcG9ydCB7IGFyZUNvb3Jkc0VxdWFsIH0gZnJvbSAnLi4vdXRpbHMvZXF1YWxpdHknO1xudmFyIGluaXRpYWxTdGF0ZSA9IHtcbiAgaW5pdGlhbFNvdXJjZUNsaWVudE9mZnNldDogbnVsbCxcbiAgaW5pdGlhbENsaWVudE9mZnNldDogbnVsbCxcbiAgY2xpZW50T2Zmc2V0OiBudWxsXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZSgpIHtcbiAgdmFyIHN0YXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBpbml0aWFsU3RhdGU7XG4gIHZhciBhY3Rpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDtcbiAgdmFyIHBheWxvYWQgPSBhY3Rpb24ucGF5bG9hZDtcblxuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBJTklUX0NPT1JEUzpcbiAgICBjYXNlIEJFR0lOX0RSQUc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpbml0aWFsU291cmNlQ2xpZW50T2Zmc2V0OiBwYXlsb2FkLnNvdXJjZUNsaWVudE9mZnNldCxcbiAgICAgICAgaW5pdGlhbENsaWVudE9mZnNldDogcGF5bG9hZC5jbGllbnRPZmZzZXQsXG4gICAgICAgIGNsaWVudE9mZnNldDogcGF5bG9hZC5jbGllbnRPZmZzZXRcbiAgICAgIH07XG5cbiAgICBjYXNlIEhPVkVSOlxuICAgICAgaWYgKGFyZUNvb3Jkc0VxdWFsKHN0YXRlLmNsaWVudE9mZnNldCwgcGF5bG9hZC5jbGllbnRPZmZzZXQpKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUpLCB7fSwge1xuICAgICAgICBjbGllbnRPZmZzZXQ6IHBheWxvYWQuY2xpZW50T2Zmc2V0XG4gICAgICB9KTtcblxuICAgIGNhc2UgRU5EX0RSQUc6XG4gICAgY2FzZSBEUk9QOlxuICAgICAgcmV0dXJuIGluaXRpYWxTdGF0ZTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGU7XG4gIH1cbn0iLCJleHBvcnQgdmFyIEFERF9TT1VSQ0UgPSAnZG5kLWNvcmUvQUREX1NPVVJDRSc7XG5leHBvcnQgdmFyIEFERF9UQVJHRVQgPSAnZG5kLWNvcmUvQUREX1RBUkdFVCc7XG5leHBvcnQgdmFyIFJFTU9WRV9TT1VSQ0UgPSAnZG5kLWNvcmUvUkVNT1ZFX1NPVVJDRSc7XG5leHBvcnQgdmFyIFJFTU9WRV9UQVJHRVQgPSAnZG5kLWNvcmUvUkVNT1ZFX1RBUkdFVCc7XG5leHBvcnQgZnVuY3Rpb24gYWRkU291cmNlKHNvdXJjZUlkKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogQUREX1NPVVJDRSxcbiAgICBwYXlsb2FkOiB7XG4gICAgICBzb3VyY2VJZDogc291cmNlSWRcbiAgICB9XG4gIH07XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkVGFyZ2V0KHRhcmdldElkKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogQUREX1RBUkdFVCxcbiAgICBwYXlsb2FkOiB7XG4gICAgICB0YXJnZXRJZDogdGFyZ2V0SWRcbiAgICB9XG4gIH07XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlU291cmNlKHNvdXJjZUlkKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogUkVNT1ZFX1NPVVJDRSxcbiAgICBwYXlsb2FkOiB7XG4gICAgICBzb3VyY2VJZDogc291cmNlSWRcbiAgICB9XG4gIH07XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlVGFyZ2V0KHRhcmdldElkKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogUkVNT1ZFX1RBUkdFVCxcbiAgICBwYXlsb2FkOiB7XG4gICAgICB0YXJnZXRJZDogdGFyZ2V0SWRcbiAgICB9XG4gIH07XG59IiwiZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgeyBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IH0ga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5pbXBvcnQgeyBCRUdJTl9EUkFHLCBQVUJMSVNIX0RSQUdfU09VUkNFLCBIT1ZFUiwgRU5EX0RSQUcsIERST1AgfSBmcm9tICcuLi9hY3Rpb25zL2RyYWdEcm9wJztcbmltcG9ydCB7IFJFTU9WRV9UQVJHRVQgfSBmcm9tICcuLi9hY3Rpb25zL3JlZ2lzdHJ5JztcbmltcG9ydCB7IHdpdGhvdXQgfSBmcm9tICcuLi91dGlscy9qc191dGlscyc7XG52YXIgaW5pdGlhbFN0YXRlID0ge1xuICBpdGVtVHlwZTogbnVsbCxcbiAgaXRlbTogbnVsbCxcbiAgc291cmNlSWQ6IG51bGwsXG4gIHRhcmdldElkczogW10sXG4gIGRyb3BSZXN1bHQ6IG51bGwsXG4gIGRpZERyb3A6IGZhbHNlLFxuICBpc1NvdXJjZVB1YmxpYzogbnVsbFxufTtcbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2UoKSB7XG4gIHZhciBzdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogaW5pdGlhbFN0YXRlO1xuICB2YXIgYWN0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XG4gIHZhciBwYXlsb2FkID0gYWN0aW9uLnBheWxvYWQ7XG5cbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgQkVHSU5fRFJBRzpcbiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlKSwge30sIHtcbiAgICAgICAgaXRlbVR5cGU6IHBheWxvYWQuaXRlbVR5cGUsXG4gICAgICAgIGl0ZW06IHBheWxvYWQuaXRlbSxcbiAgICAgICAgc291cmNlSWQ6IHBheWxvYWQuc291cmNlSWQsXG4gICAgICAgIGlzU291cmNlUHVibGljOiBwYXlsb2FkLmlzU291cmNlUHVibGljLFxuICAgICAgICBkcm9wUmVzdWx0OiBudWxsLFxuICAgICAgICBkaWREcm9wOiBmYWxzZVxuICAgICAgfSk7XG5cbiAgICBjYXNlIFBVQkxJU0hfRFJBR19TT1VSQ0U6XG4gICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSksIHt9LCB7XG4gICAgICAgIGlzU291cmNlUHVibGljOiB0cnVlXG4gICAgICB9KTtcblxuICAgIGNhc2UgSE9WRVI6XG4gICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSksIHt9LCB7XG4gICAgICAgIHRhcmdldElkczogcGF5bG9hZC50YXJnZXRJZHNcbiAgICAgIH0pO1xuXG4gICAgY2FzZSBSRU1PVkVfVEFSR0VUOlxuICAgICAgaWYgKHN0YXRlLnRhcmdldElkcy5pbmRleE9mKHBheWxvYWQudGFyZ2V0SWQpID09PSAtMSkge1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlKSwge30sIHtcbiAgICAgICAgdGFyZ2V0SWRzOiB3aXRob3V0KHN0YXRlLnRhcmdldElkcywgcGF5bG9hZC50YXJnZXRJZClcbiAgICAgIH0pO1xuXG4gICAgY2FzZSBEUk9QOlxuICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUpLCB7fSwge1xuICAgICAgICBkcm9wUmVzdWx0OiBwYXlsb2FkLmRyb3BSZXN1bHQsXG4gICAgICAgIGRpZERyb3A6IHRydWUsXG4gICAgICAgIHRhcmdldElkczogW11cbiAgICAgIH0pO1xuXG4gICAgY2FzZSBFTkRfRFJBRzpcbiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlKSwge30sIHtcbiAgICAgICAgaXRlbVR5cGU6IG51bGwsXG4gICAgICAgIGl0ZW06IG51bGwsXG4gICAgICAgIHNvdXJjZUlkOiBudWxsLFxuICAgICAgICBkcm9wUmVzdWx0OiBudWxsLFxuICAgICAgICBkaWREcm9wOiBmYWxzZSxcbiAgICAgICAgaXNTb3VyY2VQdWJsaWM6IG51bGwsXG4gICAgICAgIHRhcmdldElkczogW11cbiAgICAgIH0pO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufSIsImltcG9ydCB7IEFERF9TT1VSQ0UsIEFERF9UQVJHRVQsIFJFTU9WRV9TT1VSQ0UsIFJFTU9WRV9UQVJHRVQgfSBmcm9tICcuLi9hY3Rpb25zL3JlZ2lzdHJ5JztcbmV4cG9ydCBmdW5jdGlvbiByZWR1Y2UoKSB7XG4gIHZhciBzdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMDtcbiAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkO1xuXG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIEFERF9TT1VSQ0U6XG4gICAgY2FzZSBBRERfVEFSR0VUOlxuICAgICAgcmV0dXJuIHN0YXRlICsgMTtcblxuICAgIGNhc2UgUkVNT1ZFX1NPVVJDRTpcbiAgICBjYXNlIFJFTU9WRV9UQVJHRVQ6XG4gICAgICByZXR1cm4gc3RhdGUgLSAxO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufSIsImltcG9ydCB7IGludGVyc2VjdGlvbiB9IGZyb20gJy4vanNfdXRpbHMnO1xuZXhwb3J0IHZhciBOT05FID0gW107XG5leHBvcnQgdmFyIEFMTCA9IFtdO1xuTk9ORS5fX0lTX05PTkVfXyA9IHRydWU7XG5BTEwuX19JU19BTExfXyA9IHRydWU7XG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIGdpdmVuIGhhbmRsZXIgSURzIGFyZSBkaXJ0eSBvciBub3QuXG4gKlxuICogQHBhcmFtIGRpcnR5SWRzIFRoZSBzZXQgb2YgZGlydHkgaGFuZGxlciBpZHNcbiAqIEBwYXJhbSBoYW5kbGVySWRzIFRoZSBzZXQgb2YgaGFuZGxlciBpZHMgdG8gY2hlY2tcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYXJlRGlydHkoZGlydHlJZHMsIGhhbmRsZXJJZHMpIHtcbiAgaWYgKGRpcnR5SWRzID09PSBOT05FKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKGRpcnR5SWRzID09PSBBTEwgfHwgdHlwZW9mIGhhbmRsZXJJZHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICB2YXIgY29tbW9uSWRzID0gaW50ZXJzZWN0aW9uKGhhbmRsZXJJZHMsIGRpcnR5SWRzKTtcbiAgcmV0dXJuIGNvbW1vbklkcy5sZW5ndGggPiAwO1xufSIsImltcG9ydCB7IEJFR0lOX0RSQUcsIFBVQkxJU0hfRFJBR19TT1VSQ0UsIEhPVkVSLCBFTkRfRFJBRywgRFJPUCB9IGZyb20gJy4uL2FjdGlvbnMvZHJhZ0Ryb3AnO1xuaW1wb3J0IHsgQUREX1NPVVJDRSwgQUREX1RBUkdFVCwgUkVNT1ZFX1NPVVJDRSwgUkVNT1ZFX1RBUkdFVCB9IGZyb20gJy4uL2FjdGlvbnMvcmVnaXN0cnknO1xuaW1wb3J0IHsgYXJlQXJyYXlzRXF1YWwgfSBmcm9tICcuLi91dGlscy9lcXVhbGl0eSc7XG5pbXBvcnQgeyBOT05FLCBBTEwgfSBmcm9tICcuLi91dGlscy9kaXJ0aW5lc3MnO1xuaW1wb3J0IHsgeG9yIH0gZnJvbSAnLi4vdXRpbHMvanNfdXRpbHMnO1xuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZSgpIHtcbiAgdmFyIF9zdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogTk9ORTtcblxuICB2YXIgYWN0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XG5cbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgSE9WRVI6XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgQUREX1NPVVJDRTpcbiAgICBjYXNlIEFERF9UQVJHRVQ6XG4gICAgY2FzZSBSRU1PVkVfVEFSR0VUOlxuICAgIGNhc2UgUkVNT1ZFX1NPVVJDRTpcbiAgICAgIHJldHVybiBOT05FO1xuXG4gICAgY2FzZSBCRUdJTl9EUkFHOlxuICAgIGNhc2UgUFVCTElTSF9EUkFHX1NPVVJDRTpcbiAgICBjYXNlIEVORF9EUkFHOlxuICAgIGNhc2UgRFJPUDpcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIEFMTDtcbiAgfVxuXG4gIHZhciBfYWN0aW9uJHBheWxvYWQgPSBhY3Rpb24ucGF5bG9hZCxcbiAgICAgIF9hY3Rpb24kcGF5bG9hZCR0YXJnZSA9IF9hY3Rpb24kcGF5bG9hZC50YXJnZXRJZHMsXG4gICAgICB0YXJnZXRJZHMgPSBfYWN0aW9uJHBheWxvYWQkdGFyZ2UgPT09IHZvaWQgMCA/IFtdIDogX2FjdGlvbiRwYXlsb2FkJHRhcmdlLFxuICAgICAgX2FjdGlvbiRwYXlsb2FkJHByZXZUID0gX2FjdGlvbiRwYXlsb2FkLnByZXZUYXJnZXRJZHMsXG4gICAgICBwcmV2VGFyZ2V0SWRzID0gX2FjdGlvbiRwYXlsb2FkJHByZXZUID09PSB2b2lkIDAgPyBbXSA6IF9hY3Rpb24kcGF5bG9hZCRwcmV2VDtcbiAgdmFyIHJlc3VsdCA9IHhvcih0YXJnZXRJZHMsIHByZXZUYXJnZXRJZHMpO1xuICB2YXIgZGlkQ2hhbmdlID0gcmVzdWx0Lmxlbmd0aCA+IDAgfHwgIWFyZUFycmF5c0VxdWFsKHRhcmdldElkcywgcHJldlRhcmdldElkcyk7XG5cbiAgaWYgKCFkaWRDaGFuZ2UpIHtcbiAgICByZXR1cm4gTk9ORTtcbiAgfSAvLyBDaGVjayB0aGUgdGFyZ2V0IGlkcyBhdCB0aGUgaW5uZXJtb3N0IHBvc2l0aW9uLiBJZiB0aGV5IGFyZSB2YWxpZCwgYWRkIHRoZW1cbiAgLy8gdG8gdGhlIHJlc3VsdFxuXG5cbiAgdmFyIHByZXZJbm5lcm1vc3RUYXJnZXRJZCA9IHByZXZUYXJnZXRJZHNbcHJldlRhcmdldElkcy5sZW5ndGggLSAxXTtcbiAgdmFyIGlubmVybW9zdFRhcmdldElkID0gdGFyZ2V0SWRzW3RhcmdldElkcy5sZW5ndGggLSAxXTtcblxuICBpZiAocHJldklubmVybW9zdFRhcmdldElkICE9PSBpbm5lcm1vc3RUYXJnZXRJZCkge1xuICAgIGlmIChwcmV2SW5uZXJtb3N0VGFyZ2V0SWQpIHtcbiAgICAgIHJlc3VsdC5wdXNoKHByZXZJbm5lcm1vc3RUYXJnZXRJZCk7XG4gICAgfVxuXG4gICAgaWYgKGlubmVybW9zdFRhcmdldElkKSB7XG4gICAgICByZXN1bHQucHVzaChpbm5lcm1vc3RUYXJnZXRJZCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn0iLCJleHBvcnQgZnVuY3Rpb24gcmVkdWNlKCkge1xuICB2YXIgc3RhdGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDA7XG4gIHJldHVybiBzdGF0ZSArIDE7XG59IiwiZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgeyBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IH0ga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5pbXBvcnQgeyByZWR1Y2UgYXMgZHJhZ09mZnNldCB9IGZyb20gJy4vZHJhZ09mZnNldCc7XG5pbXBvcnQgeyByZWR1Y2UgYXMgZHJhZ09wZXJhdGlvbiB9IGZyb20gJy4vZHJhZ09wZXJhdGlvbic7XG5pbXBvcnQgeyByZWR1Y2UgYXMgcmVmQ291bnQgfSBmcm9tICcuL3JlZkNvdW50JztcbmltcG9ydCB7IHJlZHVjZSBhcyBkaXJ0eUhhbmRsZXJJZHMgfSBmcm9tICcuL2RpcnR5SGFuZGxlcklkcyc7XG5pbXBvcnQgeyByZWR1Y2UgYXMgc3RhdGVJZCB9IGZyb20gJy4vc3RhdGVJZCc7XG5pbXBvcnQgeyBnZXQgfSBmcm9tICcuLi91dGlscy9qc191dGlscyc7XG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlKCkge1xuICB2YXIgc3RhdGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICB2YXIgYWN0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XG4gIHJldHVybiB7XG4gICAgZGlydHlIYW5kbGVySWRzOiBkaXJ0eUhhbmRsZXJJZHMoc3RhdGUuZGlydHlIYW5kbGVySWRzLCB7XG4gICAgICB0eXBlOiBhY3Rpb24udHlwZSxcbiAgICAgIHBheWxvYWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgYWN0aW9uLnBheWxvYWQpLCB7fSwge1xuICAgICAgICBwcmV2VGFyZ2V0SWRzOiBnZXQoc3RhdGUsICdkcmFnT3BlcmF0aW9uLnRhcmdldElkcycsIFtdKVxuICAgICAgfSlcbiAgICB9KSxcbiAgICBkcmFnT2Zmc2V0OiBkcmFnT2Zmc2V0KHN0YXRlLmRyYWdPZmZzZXQsIGFjdGlvbiksXG4gICAgcmVmQ291bnQ6IHJlZkNvdW50KHN0YXRlLnJlZkNvdW50LCBhY3Rpb24pLFxuICAgIGRyYWdPcGVyYXRpb246IGRyYWdPcGVyYXRpb24oc3RhdGUuZHJhZ09wZXJhdGlvbiwgYWN0aW9uKSxcbiAgICBzdGF0ZUlkOiBzdGF0ZUlkKHN0YXRlLnN0YXRlSWQpXG4gIH07XG59IiwiLyoqXG4gKiBDb29yZGluYXRlIGFkZGl0aW9uXG4gKiBAcGFyYW0gYSBUaGUgZmlyc3QgY29vcmRpbmF0ZVxuICogQHBhcmFtIGIgVGhlIHNlY29uZCBjb29yZGluYXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGQoYSwgYikge1xuICByZXR1cm4ge1xuICAgIHg6IGEueCArIGIueCxcbiAgICB5OiBhLnkgKyBiLnlcbiAgfTtcbn1cbi8qKlxuICogQ29vcmRpbmF0ZSBzdWJ0cmFjdGlvblxuICogQHBhcmFtIGEgVGhlIGZpcnN0IGNvb3JkaW5hdGVcbiAqIEBwYXJhbSBiIFRoZSBzZWNvbmQgY29vcmRpbmF0ZVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdWJ0cmFjdChhLCBiKSB7XG4gIHJldHVybiB7XG4gICAgeDogYS54IC0gYi54LFxuICAgIHk6IGEueSAtIGIueVxuICB9O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjYXJ0ZXNpYW4gZGlzdGFuY2Ugb2YgdGhlIGRyYWcgc291cmNlIGNvbXBvbmVudCdzIHBvc2l0aW9uLCBiYXNlZCBvbiBpdHMgcG9zaXRpb25cbiAqIGF0IHRoZSB0aW1lIHdoZW4gdGhlIGN1cnJlbnQgZHJhZyBvcGVyYXRpb24gaGFzIHN0YXJ0ZWQsIGFuZCB0aGUgbW92ZW1lbnQgZGlmZmVyZW5jZS5cbiAqXG4gKiBSZXR1cm5zIG51bGwgaWYgbm8gaXRlbSBpcyBiZWluZyBkcmFnZ2VkLlxuICpcbiAqIEBwYXJhbSBzdGF0ZSBUaGUgb2Zmc2V0IHN0YXRlIHRvIGNvbXB1dGUgZnJvbVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTb3VyY2VDbGllbnRPZmZzZXQoc3RhdGUpIHtcbiAgdmFyIGNsaWVudE9mZnNldCA9IHN0YXRlLmNsaWVudE9mZnNldCxcbiAgICAgIGluaXRpYWxDbGllbnRPZmZzZXQgPSBzdGF0ZS5pbml0aWFsQ2xpZW50T2Zmc2V0LFxuICAgICAgaW5pdGlhbFNvdXJjZUNsaWVudE9mZnNldCA9IHN0YXRlLmluaXRpYWxTb3VyY2VDbGllbnRPZmZzZXQ7XG5cbiAgaWYgKCFjbGllbnRPZmZzZXQgfHwgIWluaXRpYWxDbGllbnRPZmZzZXQgfHwgIWluaXRpYWxTb3VyY2VDbGllbnRPZmZzZXQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiBzdWJ0cmFjdChhZGQoY2xpZW50T2Zmc2V0LCBpbml0aWFsU291cmNlQ2xpZW50T2Zmc2V0KSwgaW5pdGlhbENsaWVudE9mZnNldCk7XG59XG4vKipcbiAqIERldGVybWluZXMgdGhlIHgseSBvZmZzZXQgYmV0d2VlbiB0aGUgY2xpZW50IG9mZnNldCBhbmQgdGhlIGluaXRpYWwgY2xpZW50IG9mZnNldFxuICpcbiAqIEBwYXJhbSBzdGF0ZSBUaGUgb2Zmc2V0IHN0YXRlIHRvIGNvbXB1dGUgZnJvbVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREaWZmZXJlbmNlRnJvbUluaXRpYWxPZmZzZXQoc3RhdGUpIHtcbiAgdmFyIGNsaWVudE9mZnNldCA9IHN0YXRlLmNsaWVudE9mZnNldCxcbiAgICAgIGluaXRpYWxDbGllbnRPZmZzZXQgPSBzdGF0ZS5pbml0aWFsQ2xpZW50T2Zmc2V0O1xuXG4gIGlmICghY2xpZW50T2Zmc2V0IHx8ICFpbml0aWFsQ2xpZW50T2Zmc2V0KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gc3VidHJhY3QoY2xpZW50T2Zmc2V0LCBpbml0aWFsQ2xpZW50T2Zmc2V0KTtcbn0iLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gJ0ByZWFjdC1kbmQvaW52YXJpYW50JztcbmltcG9ydCB7IG1hdGNoZXNUeXBlIH0gZnJvbSAnLi4vdXRpbHMvbWF0Y2hlc1R5cGUnO1xuaW1wb3J0IHsgZ2V0U291cmNlQ2xpZW50T2Zmc2V0IGFzIF9nZXRTb3VyY2VDbGllbnRPZmZzZXQsIGdldERpZmZlcmVuY2VGcm9tSW5pdGlhbE9mZnNldCBhcyBfZ2V0RGlmZmVyZW5jZUZyb21Jbml0aWFsT2Zmc2V0IH0gZnJvbSAnLi4vdXRpbHMvY29vcmRzJztcbmltcG9ydCB7IGFyZURpcnR5IH0gZnJvbSAnLi4vdXRpbHMvZGlydGluZXNzJztcbmV4cG9ydCB2YXIgRHJhZ0Ryb3BNb25pdG9ySW1wbCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIERyYWdEcm9wTW9uaXRvckltcGwoc3RvcmUsIHJlZ2lzdHJ5KSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyYWdEcm9wTW9uaXRvckltcGwpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwic3RvcmVcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlZ2lzdHJ5XCIsIHZvaWQgMCk7XG5cbiAgICB0aGlzLnN0b3JlID0gc3RvcmU7XG4gICAgdGhpcy5yZWdpc3RyeSA9IHJlZ2lzdHJ5O1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKERyYWdEcm9wTW9uaXRvckltcGwsIFt7XG4gICAga2V5OiBcInN1YnNjcmliZVRvU3RhdGVDaGFuZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3Vic2NyaWJlVG9TdGF0ZUNoYW5nZShsaXN0ZW5lcikge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHtcbiAgICAgICAgaGFuZGxlcklkczogdW5kZWZpbmVkXG4gICAgICB9O1xuICAgICAgdmFyIGhhbmRsZXJJZHMgPSBvcHRpb25zLmhhbmRsZXJJZHM7XG4gICAgICBpbnZhcmlhbnQodHlwZW9mIGxpc3RlbmVyID09PSAnZnVuY3Rpb24nLCAnbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uLicpO1xuICAgICAgaW52YXJpYW50KHR5cGVvZiBoYW5kbGVySWRzID09PSAndW5kZWZpbmVkJyB8fCBBcnJheS5pc0FycmF5KGhhbmRsZXJJZHMpLCAnaGFuZGxlcklkcywgd2hlbiBzcGVjaWZpZWQsIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncy4nKTtcbiAgICAgIHZhciBwcmV2U3RhdGVJZCA9IHRoaXMuc3RvcmUuZ2V0U3RhdGUoKS5zdGF0ZUlkO1xuXG4gICAgICB2YXIgaGFuZGxlQ2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlQ2hhbmdlKCkge1xuICAgICAgICB2YXIgc3RhdGUgPSBfdGhpcy5zdG9yZS5nZXRTdGF0ZSgpO1xuXG4gICAgICAgIHZhciBjdXJyZW50U3RhdGVJZCA9IHN0YXRlLnN0YXRlSWQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgY2FuU2tpcExpc3RlbmVyID0gY3VycmVudFN0YXRlSWQgPT09IHByZXZTdGF0ZUlkIHx8IGN1cnJlbnRTdGF0ZUlkID09PSBwcmV2U3RhdGVJZCArIDEgJiYgIWFyZURpcnR5KHN0YXRlLmRpcnR5SGFuZGxlcklkcywgaGFuZGxlcklkcyk7XG5cbiAgICAgICAgICBpZiAoIWNhblNraXBMaXN0ZW5lcikge1xuICAgICAgICAgICAgbGlzdGVuZXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgcHJldlN0YXRlSWQgPSBjdXJyZW50U3RhdGVJZDtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHRoaXMuc3RvcmUuc3Vic2NyaWJlKGhhbmRsZUNoYW5nZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInN1YnNjcmliZVRvT2Zmc2V0Q2hhbmdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHN1YnNjcmliZVRvT2Zmc2V0Q2hhbmdlKGxpc3RlbmVyKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaW52YXJpYW50KHR5cGVvZiBsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJywgJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbiAgICAgIHZhciBwcmV2aW91c1N0YXRlID0gdGhpcy5zdG9yZS5nZXRTdGF0ZSgpLmRyYWdPZmZzZXQ7XG5cbiAgICAgIHZhciBoYW5kbGVDaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UoKSB7XG4gICAgICAgIHZhciBuZXh0U3RhdGUgPSBfdGhpczIuc3RvcmUuZ2V0U3RhdGUoKS5kcmFnT2Zmc2V0O1xuXG4gICAgICAgIGlmIChuZXh0U3RhdGUgPT09IHByZXZpb3VzU3RhdGUpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBwcmV2aW91c1N0YXRlID0gbmV4dFN0YXRlO1xuICAgICAgICBsaXN0ZW5lcigpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHRoaXMuc3RvcmUuc3Vic2NyaWJlKGhhbmRsZUNoYW5nZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNhbkRyYWdTb3VyY2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2FuRHJhZ1NvdXJjZShzb3VyY2VJZCkge1xuICAgICAgaWYgKCFzb3VyY2VJZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnJlZ2lzdHJ5LmdldFNvdXJjZShzb3VyY2VJZCk7XG4gICAgICBpbnZhcmlhbnQoc291cmNlLCBcIkV4cGVjdGVkIHRvIGZpbmQgYSB2YWxpZCBzb3VyY2UuIHNvdXJjZUlkPVwiLmNvbmNhdChzb3VyY2VJZCkpO1xuXG4gICAgICBpZiAodGhpcy5pc0RyYWdnaW5nKCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc291cmNlLmNhbkRyYWcodGhpcywgc291cmNlSWQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjYW5Ecm9wT25UYXJnZXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2FuRHJvcE9uVGFyZ2V0KHRhcmdldElkKSB7XG4gICAgICAvLyB1bmRlZmluZWQgb24gaW5pdGlhbCByZW5kZXJcbiAgICAgIGlmICghdGFyZ2V0SWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5yZWdpc3RyeS5nZXRUYXJnZXQodGFyZ2V0SWQpO1xuICAgICAgaW52YXJpYW50KHRhcmdldCwgXCJFeHBlY3RlZCB0byBmaW5kIGEgdmFsaWQgdGFyZ2V0LiB0YXJnZXRJZD1cIi5jb25jYXQodGFyZ2V0SWQpKTtcblxuICAgICAgaWYgKCF0aGlzLmlzRHJhZ2dpbmcoKSB8fCB0aGlzLmRpZERyb3AoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciB0YXJnZXRUeXBlID0gdGhpcy5yZWdpc3RyeS5nZXRUYXJnZXRUeXBlKHRhcmdldElkKTtcbiAgICAgIHZhciBkcmFnZ2VkSXRlbVR5cGUgPSB0aGlzLmdldEl0ZW1UeXBlKCk7XG4gICAgICByZXR1cm4gbWF0Y2hlc1R5cGUodGFyZ2V0VHlwZSwgZHJhZ2dlZEl0ZW1UeXBlKSAmJiB0YXJnZXQuY2FuRHJvcCh0aGlzLCB0YXJnZXRJZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzRHJhZ2dpbmdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNEcmFnZ2luZygpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKHRoaXMuZ2V0SXRlbVR5cGUoKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzRHJhZ2dpbmdTb3VyY2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNEcmFnZ2luZ1NvdXJjZShzb3VyY2VJZCkge1xuICAgICAgLy8gdW5kZWZpbmVkIG9uIGluaXRpYWwgcmVuZGVyXG4gICAgICBpZiAoIXNvdXJjZUlkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNvdXJjZSA9IHRoaXMucmVnaXN0cnkuZ2V0U291cmNlKHNvdXJjZUlkLCB0cnVlKTtcbiAgICAgIGludmFyaWFudChzb3VyY2UsIFwiRXhwZWN0ZWQgdG8gZmluZCBhIHZhbGlkIHNvdXJjZS4gc291cmNlSWQ9XCIuY29uY2F0KHNvdXJjZUlkKSk7XG5cbiAgICAgIGlmICghdGhpcy5pc0RyYWdnaW5nKCkgfHwgIXRoaXMuaXNTb3VyY2VQdWJsaWMoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBzb3VyY2VUeXBlID0gdGhpcy5yZWdpc3RyeS5nZXRTb3VyY2VUeXBlKHNvdXJjZUlkKTtcbiAgICAgIHZhciBkcmFnZ2VkSXRlbVR5cGUgPSB0aGlzLmdldEl0ZW1UeXBlKCk7XG5cbiAgICAgIGlmIChzb3VyY2VUeXBlICE9PSBkcmFnZ2VkSXRlbVR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc291cmNlLmlzRHJhZ2dpbmcodGhpcywgc291cmNlSWQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc092ZXJUYXJnZXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNPdmVyVGFyZ2V0KHRhcmdldElkKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge1xuICAgICAgICBzaGFsbG93OiBmYWxzZVxuICAgICAgfTtcblxuICAgICAgLy8gdW5kZWZpbmVkIG9uIGluaXRpYWwgcmVuZGVyXG4gICAgICBpZiAoIXRhcmdldElkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNoYWxsb3cgPSBvcHRpb25zLnNoYWxsb3c7XG5cbiAgICAgIGlmICghdGhpcy5pc0RyYWdnaW5nKCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgdGFyZ2V0VHlwZSA9IHRoaXMucmVnaXN0cnkuZ2V0VGFyZ2V0VHlwZSh0YXJnZXRJZCk7XG4gICAgICB2YXIgZHJhZ2dlZEl0ZW1UeXBlID0gdGhpcy5nZXRJdGVtVHlwZSgpO1xuXG4gICAgICBpZiAoZHJhZ2dlZEl0ZW1UeXBlICYmICFtYXRjaGVzVHlwZSh0YXJnZXRUeXBlLCBkcmFnZ2VkSXRlbVR5cGUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRhcmdldElkcyA9IHRoaXMuZ2V0VGFyZ2V0SWRzKCk7XG5cbiAgICAgIGlmICghdGFyZ2V0SWRzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBpbmRleCA9IHRhcmdldElkcy5pbmRleE9mKHRhcmdldElkKTtcblxuICAgICAgaWYgKHNoYWxsb3cpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4ID09PSB0YXJnZXRJZHMubGVuZ3RoIC0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpbmRleCA+IC0xO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRJdGVtVHlwZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJdGVtVHlwZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0b3JlLmdldFN0YXRlKCkuZHJhZ09wZXJhdGlvbi5pdGVtVHlwZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0SXRlbVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJdGVtKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0U3RhdGUoKS5kcmFnT3BlcmF0aW9uLml0ZW07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFNvdXJjZUlkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNvdXJjZUlkKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0U3RhdGUoKS5kcmFnT3BlcmF0aW9uLnNvdXJjZUlkO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRUYXJnZXRJZHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGFyZ2V0SWRzKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0U3RhdGUoKS5kcmFnT3BlcmF0aW9uLnRhcmdldElkcztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0RHJvcFJlc3VsdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREcm9wUmVzdWx0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0U3RhdGUoKS5kcmFnT3BlcmF0aW9uLmRyb3BSZXN1bHQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImRpZERyb3BcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGlkRHJvcCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0b3JlLmdldFN0YXRlKCkuZHJhZ09wZXJhdGlvbi5kaWREcm9wO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc1NvdXJjZVB1YmxpY1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc1NvdXJjZVB1YmxpYygpIHtcbiAgICAgIHJldHVybiBCb29sZWFuKHRoaXMuc3RvcmUuZ2V0U3RhdGUoKS5kcmFnT3BlcmF0aW9uLmlzU291cmNlUHVibGljKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0SW5pdGlhbENsaWVudE9mZnNldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbml0aWFsQ2xpZW50T2Zmc2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0U3RhdGUoKS5kcmFnT2Zmc2V0LmluaXRpYWxDbGllbnRPZmZzZXQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldEluaXRpYWxTb3VyY2VDbGllbnRPZmZzZXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFNvdXJjZUNsaWVudE9mZnNldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0b3JlLmdldFN0YXRlKCkuZHJhZ09mZnNldC5pbml0aWFsU291cmNlQ2xpZW50T2Zmc2V0O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRDbGllbnRPZmZzZXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2xpZW50T2Zmc2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RvcmUuZ2V0U3RhdGUoKS5kcmFnT2Zmc2V0LmNsaWVudE9mZnNldDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0U291cmNlQ2xpZW50T2Zmc2V0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNvdXJjZUNsaWVudE9mZnNldCgpIHtcbiAgICAgIHJldHVybiBfZ2V0U291cmNlQ2xpZW50T2Zmc2V0KHRoaXMuc3RvcmUuZ2V0U3RhdGUoKS5kcmFnT2Zmc2V0KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0RGlmZmVyZW5jZUZyb21Jbml0aWFsT2Zmc2V0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldERpZmZlcmVuY2VGcm9tSW5pdGlhbE9mZnNldCgpIHtcbiAgICAgIHJldHVybiBfZ2V0RGlmZmVyZW5jZUZyb21Jbml0aWFsT2Zmc2V0KHRoaXMuc3RvcmUuZ2V0U3RhdGUoKS5kcmFnT2Zmc2V0KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRHJhZ0Ryb3BNb25pdG9ySW1wbDtcbn0oKTsiLCJ2YXIgbmV4dFVuaXF1ZUlkID0gMDtcbmV4cG9ydCBmdW5jdGlvbiBnZXROZXh0VW5pcXVlSWQoKSB7XG4gIHJldHVybiBuZXh0VW5pcXVlSWQrKztcbn0iLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gJ0ByZWFjdC1kbmQvaW52YXJpYW50JztcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVNvdXJjZUNvbnRyYWN0KHNvdXJjZSkge1xuICBpbnZhcmlhbnQodHlwZW9mIHNvdXJjZS5jYW5EcmFnID09PSAnZnVuY3Rpb24nLCAnRXhwZWN0ZWQgY2FuRHJhZyB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICBpbnZhcmlhbnQodHlwZW9mIHNvdXJjZS5iZWdpbkRyYWcgPT09ICdmdW5jdGlvbicsICdFeHBlY3RlZCBiZWdpbkRyYWcgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgaW52YXJpYW50KHR5cGVvZiBzb3VyY2UuZW5kRHJhZyA9PT0gJ2Z1bmN0aW9uJywgJ0V4cGVjdGVkIGVuZERyYWcgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVRhcmdldENvbnRyYWN0KHRhcmdldCkge1xuICBpbnZhcmlhbnQodHlwZW9mIHRhcmdldC5jYW5Ecm9wID09PSAnZnVuY3Rpb24nLCAnRXhwZWN0ZWQgY2FuRHJvcCB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICBpbnZhcmlhbnQodHlwZW9mIHRhcmdldC5ob3ZlciA9PT0gJ2Z1bmN0aW9uJywgJ0V4cGVjdGVkIGhvdmVyIHRvIGJlIGEgZnVuY3Rpb24uJyk7XG4gIGludmFyaWFudCh0eXBlb2YgdGFyZ2V0LmRyb3AgPT09ICdmdW5jdGlvbicsICdFeHBlY3RlZCBiZWdpbkRyYWcgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVR5cGUodHlwZSwgYWxsb3dBcnJheSkge1xuICBpZiAoYWxsb3dBcnJheSAmJiBBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgdHlwZS5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVUeXBlKHQsIGZhbHNlKTtcbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpbnZhcmlhbnQodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnIHx8IF90eXBlb2YodHlwZSkgPT09ICdzeW1ib2wnLCBhbGxvd0FycmF5ID8gJ1R5cGUgY2FuIG9ubHkgYmUgYSBzdHJpbmcsIGEgc3ltYm9sLCBvciBhbiBhcnJheSBvZiBlaXRoZXIuJyA6ICdUeXBlIGNhbiBvbmx5IGJlIGEgc3RyaW5nIG9yIGEgc3ltYm9sLicpO1xufSIsIi8vIFVzZSB0aGUgZmFzdGVzdCBtZWFucyBwb3NzaWJsZSB0byBleGVjdXRlIGEgdGFzayBpbiBpdHMgb3duIHR1cm4sIHdpdGhcbi8vIHByaW9yaXR5IG92ZXIgb3RoZXIgZXZlbnRzIGluY2x1ZGluZyBJTywgYW5pbWF0aW9uLCByZWZsb3csIGFuZCByZWRyYXdcbi8vIGV2ZW50cyBpbiBicm93c2Vycy5cbi8vXG4vLyBBbiBleGNlcHRpb24gdGhyb3duIGJ5IGEgdGFzayB3aWxsIHBlcm1hbmVudGx5IGludGVycnVwdCB0aGUgcHJvY2Vzc2luZyBvZlxuLy8gc3Vic2VxdWVudCB0YXNrcy4gVGhlIGhpZ2hlciBsZXZlbCBgYXNhcGAgZnVuY3Rpb24gZW5zdXJlcyB0aGF0IGlmIGFuXG4vLyBleGNlcHRpb24gaXMgdGhyb3duIGJ5IGEgdGFzaywgdGhhdCB0aGUgdGFzayBxdWV1ZSB3aWxsIGNvbnRpbnVlIGZsdXNoaW5nIGFzXG4vLyBzb29uIGFzIHBvc3NpYmxlLCBidXQgaWYgeW91IHVzZSBgcmF3QXNhcGAgZGlyZWN0bHksIHlvdSBhcmUgcmVzcG9uc2libGUgdG9cbi8vIGVpdGhlciBlbnN1cmUgdGhhdCBubyBleGNlcHRpb25zIGFyZSB0aHJvd24gZnJvbSB5b3VyIHRhc2ssIG9yIHRvIG1hbnVhbGx5XG4vLyBjYWxsIGByYXdBc2FwLnJlcXVlc3RGbHVzaGAgaWYgYW4gZXhjZXB0aW9uIGlzIHRocm93bi5cbmV4cG9ydCBmdW5jdGlvbiByYXdBc2FwKHRhc2spIHtcbiAgaWYgKCFxdWV1ZS5sZW5ndGgpIHtcbiAgICByZXF1ZXN0Rmx1c2goKTtcbiAgICBmbHVzaGluZyA9IHRydWU7XG4gIH0gLy8gRXF1aXZhbGVudCB0byBwdXNoLCBidXQgYXZvaWRzIGEgZnVuY3Rpb24gY2FsbC5cblxuXG4gIHF1ZXVlW3F1ZXVlLmxlbmd0aF0gPSB0YXNrO1xufVxudmFyIHF1ZXVlID0gW107IC8vIE9uY2UgYSBmbHVzaCBoYXMgYmVlbiByZXF1ZXN0ZWQsIG5vIGZ1cnRoZXIgY2FsbHMgdG8gYHJlcXVlc3RGbHVzaGAgYXJlXG4vLyBuZWNlc3NhcnkgdW50aWwgdGhlIG5leHQgYGZsdXNoYCBjb21wbGV0ZXMuXG4vLyBAdHMtaWdub3JlXG5cbnZhciBmbHVzaGluZyA9IGZhbHNlOyAvLyBgcmVxdWVzdEZsdXNoYCBpcyBhbiBpbXBsZW1lbnRhdGlvbi1zcGVjaWZpYyBtZXRob2QgdGhhdCBhdHRlbXB0cyB0byBraWNrXG4vLyBvZmYgYSBgZmx1c2hgIGV2ZW50IGFzIHF1aWNrbHkgYXMgcG9zc2libGUuIGBmbHVzaGAgd2lsbCBhdHRlbXB0IHRvIGV4aGF1c3Rcbi8vIHRoZSBldmVudCBxdWV1ZSBiZWZvcmUgeWllbGRpbmcgdG8gdGhlIGJyb3dzZXIncyBvd24gZXZlbnQgbG9vcC5cblxudmFyIHJlcXVlc3RGbHVzaDsgLy8gVGhlIHBvc2l0aW9uIG9mIHRoZSBuZXh0IHRhc2sgdG8gZXhlY3V0ZSBpbiB0aGUgdGFzayBxdWV1ZS4gVGhpcyBpc1xuLy8gcHJlc2VydmVkIGJldHdlZW4gY2FsbHMgdG8gYGZsdXNoYCBzbyB0aGF0IGl0IGNhbiBiZSByZXN1bWVkIGlmXG4vLyBhIHRhc2sgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cblxudmFyIGluZGV4ID0gMDsgLy8gSWYgYSB0YXNrIHNjaGVkdWxlcyBhZGRpdGlvbmFsIHRhc2tzIHJlY3Vyc2l2ZWx5LCB0aGUgdGFzayBxdWV1ZSBjYW4gZ3Jvd1xuLy8gdW5ib3VuZGVkLiBUbyBwcmV2ZW50IG1lbW9yeSBleGhhdXN0aW9uLCB0aGUgdGFzayBxdWV1ZSB3aWxsIHBlcmlvZGljYWxseVxuLy8gdHJ1bmNhdGUgYWxyZWFkeS1jb21wbGV0ZWQgdGFza3MuXG5cbnZhciBjYXBhY2l0eSA9IDEwMjQ7IC8vIFRoZSBmbHVzaCBmdW5jdGlvbiBwcm9jZXNzZXMgYWxsIHRhc2tzIHRoYXQgaGF2ZSBiZWVuIHNjaGVkdWxlZCB3aXRoXG4vLyBgcmF3QXNhcGAgdW5sZXNzIGFuZCB1bnRpbCBvbmUgb2YgdGhvc2UgdGFza3MgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbi8vIElmIGEgdGFzayB0aHJvd3MgYW4gZXhjZXB0aW9uLCBgZmx1c2hgIGVuc3VyZXMgdGhhdCBpdHMgc3RhdGUgd2lsbCByZW1haW5cbi8vIGNvbnNpc3RlbnQgYW5kIHdpbGwgcmVzdW1lIHdoZXJlIGl0IGxlZnQgb2ZmIHdoZW4gY2FsbGVkIGFnYWluLlxuLy8gSG93ZXZlciwgYGZsdXNoYCBkb2VzIG5vdCBtYWtlIGFueSBhcnJhbmdlbWVudHMgdG8gYmUgY2FsbGVkIGFnYWluIGlmIGFuXG4vLyBleGNlcHRpb24gaXMgdGhyb3duLlxuXG5mdW5jdGlvbiBmbHVzaCgpIHtcbiAgd2hpbGUgKGluZGV4IDwgcXVldWUubGVuZ3RoKSB7XG4gICAgdmFyIGN1cnJlbnRJbmRleCA9IGluZGV4OyAvLyBBZHZhbmNlIHRoZSBpbmRleCBiZWZvcmUgY2FsbGluZyB0aGUgdGFzay4gVGhpcyBlbnN1cmVzIHRoYXQgd2Ugd2lsbFxuICAgIC8vIGJlZ2luIGZsdXNoaW5nIG9uIHRoZSBuZXh0IHRhc2sgdGhlIHRhc2sgdGhyb3dzIGFuIGVycm9yLlxuXG4gICAgaW5kZXggPSBpbmRleCArIDE7XG4gICAgcXVldWVbY3VycmVudEluZGV4XS5jYWxsKCk7IC8vIFByZXZlbnQgbGVha2luZyBtZW1vcnkgZm9yIGxvbmcgY2hhaW5zIG9mIHJlY3Vyc2l2ZSBjYWxscyB0byBgYXNhcGAuXG4gICAgLy8gSWYgd2UgY2FsbCBgYXNhcGAgd2l0aGluIHRhc2tzIHNjaGVkdWxlZCBieSBgYXNhcGAsIHRoZSBxdWV1ZSB3aWxsXG4gICAgLy8gZ3JvdywgYnV0IHRvIGF2b2lkIGFuIE8obikgd2FsayBmb3IgZXZlcnkgdGFzayB3ZSBleGVjdXRlLCB3ZSBkb24ndFxuICAgIC8vIHNoaWZ0IHRhc2tzIG9mZiB0aGUgcXVldWUgYWZ0ZXIgdGhleSBoYXZlIGJlZW4gZXhlY3V0ZWQuXG4gICAgLy8gSW5zdGVhZCwgd2UgcGVyaW9kaWNhbGx5IHNoaWZ0IDEwMjQgdGFza3Mgb2ZmIHRoZSBxdWV1ZS5cblxuICAgIGlmIChpbmRleCA+IGNhcGFjaXR5KSB7XG4gICAgICAvLyBNYW51YWxseSBzaGlmdCBhbGwgdmFsdWVzIHN0YXJ0aW5nIGF0IHRoZSBpbmRleCBiYWNrIHRvIHRoZVxuICAgICAgLy8gYmVnaW5uaW5nIG9mIHRoZSBxdWV1ZS5cbiAgICAgIGZvciAodmFyIHNjYW4gPSAwLCBuZXdMZW5ndGggPSBxdWV1ZS5sZW5ndGggLSBpbmRleDsgc2NhbiA8IG5ld0xlbmd0aDsgc2NhbisrKSB7XG4gICAgICAgIHF1ZXVlW3NjYW5dID0gcXVldWVbc2NhbiArIGluZGV4XTtcbiAgICAgIH1cblxuICAgICAgcXVldWUubGVuZ3RoIC09IGluZGV4O1xuICAgICAgaW5kZXggPSAwO1xuICAgIH1cbiAgfVxuXG4gIHF1ZXVlLmxlbmd0aCA9IDA7XG4gIGluZGV4ID0gMDtcbiAgZmx1c2hpbmcgPSBmYWxzZTtcbn0gLy8gYHJlcXVlc3RGbHVzaGAgaXMgaW1wbGVtZW50ZWQgdXNpbmcgYSBzdHJhdGVneSBiYXNlZCBvbiBkYXRhIGNvbGxlY3RlZCBmcm9tXG4vLyBldmVyeSBhdmFpbGFibGUgU2F1Y2VMYWJzIFNlbGVuaXVtIHdlYiBkcml2ZXIgd29ya2VyIGF0IHRpbWUgb2Ygd3JpdGluZy5cbi8vIGh0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kLzFtRy01VVlHdXA1cXhHZEVNV2toUDZCV0N6MDUzTlViMkUxUW9VVFUxNnVBL2VkaXQjZ2lkPTc4MzcyNDU5M1xuLy8gU2FmYXJpIDYgYW5kIDYuMSBmb3IgZGVza3RvcCwgaVBhZCwgYW5kIGlQaG9uZSBhcmUgdGhlIG9ubHkgYnJvd3NlcnMgdGhhdFxuLy8gaGF2ZSBXZWJLaXRNdXRhdGlvbk9ic2VydmVyIGJ1dCBub3QgdW4tcHJlZml4ZWQgTXV0YXRpb25PYnNlcnZlci5cbi8vIE11c3QgdXNlIGBnbG9iYWxgIG9yIGBzZWxmYCBpbnN0ZWFkIG9mIGB3aW5kb3dgIHRvIHdvcmsgaW4gYm90aCBmcmFtZXMgYW5kIHdlYlxuLy8gd29ya2Vycy4gYGdsb2JhbGAgaXMgYSBwcm92aXNpb24gb2YgQnJvd3NlcmlmeSwgTXIsIE1ycywgb3IgTW9wLlxuXG4vKiBnbG9iYWxzIHNlbGYgKi9cblxuXG52YXIgc2NvcGUgPSB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHNlbGY7XG52YXIgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBzY29wZS5NdXRhdGlvbk9ic2VydmVyIHx8IHNjb3BlLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7IC8vIE11dGF0aW9uT2JzZXJ2ZXJzIGFyZSBkZXNpcmFibGUgYmVjYXVzZSB0aGV5IGhhdmUgaGlnaCBwcmlvcml0eSBhbmQgd29ya1xuLy8gcmVsaWFibHkgZXZlcnl3aGVyZSB0aGV5IGFyZSBpbXBsZW1lbnRlZC5cbi8vIFRoZXkgYXJlIGltcGxlbWVudGVkIGluIGFsbCBtb2Rlcm4gYnJvd3NlcnMuXG4vL1xuLy8gLSBBbmRyb2lkIDQtNC4zXG4vLyAtIENocm9tZSAyNi0zNFxuLy8gLSBGaXJlZm94IDE0LTI5XG4vLyAtIEludGVybmV0IEV4cGxvcmVyIDExXG4vLyAtIGlQYWQgU2FmYXJpIDYtNy4xXG4vLyAtIGlQaG9uZSBTYWZhcmkgNy03LjFcbi8vIC0gU2FmYXJpIDYtN1xuXG5pZiAodHlwZW9mIEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID09PSAnZnVuY3Rpb24nKSB7XG4gIHJlcXVlc3RGbHVzaCA9IG1ha2VSZXF1ZXN0Q2FsbEZyb21NdXRhdGlvbk9ic2VydmVyKGZsdXNoKTsgLy8gTWVzc2FnZUNoYW5uZWxzIGFyZSBkZXNpcmFibGUgYmVjYXVzZSB0aGV5IGdpdmUgZGlyZWN0IGFjY2VzcyB0byB0aGUgSFRNTFxuICAvLyB0YXNrIHF1ZXVlLCBhcmUgaW1wbGVtZW50ZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIgMTAsIFNhZmFyaSA1LjAtMSwgYW5kIE9wZXJhXG4gIC8vIDExLTEyLCBhbmQgaW4gd2ViIHdvcmtlcnMgaW4gbWFueSBlbmdpbmVzLlxuICAvLyBBbHRob3VnaCBtZXNzYWdlIGNoYW5uZWxzIHlpZWxkIHRvIGFueSBxdWV1ZWQgcmVuZGVyaW5nIGFuZCBJTyB0YXNrcywgdGhleVxuICAvLyB3b3VsZCBiZSBiZXR0ZXIgdGhhbiBpbXBvc2luZyB0aGUgNG1zIGRlbGF5IG9mIHRpbWVycy5cbiAgLy8gSG93ZXZlciwgdGhleSBkbyBub3Qgd29yayByZWxpYWJseSBpbiBJbnRlcm5ldCBFeHBsb3JlciBvciBTYWZhcmkuXG4gIC8vIEludGVybmV0IEV4cGxvcmVyIDEwIGlzIHRoZSBvbmx5IGJyb3dzZXIgdGhhdCBoYXMgc2V0SW1tZWRpYXRlIGJ1dCBkb2VzXG4gIC8vIG5vdCBoYXZlIE11dGF0aW9uT2JzZXJ2ZXJzLlxuICAvLyBBbHRob3VnaCBzZXRJbW1lZGlhdGUgeWllbGRzIHRvIHRoZSBicm93c2VyJ3MgcmVuZGVyZXIsIGl0IHdvdWxkIGJlXG4gIC8vIHByZWZlcnJhYmxlIHRvIGZhbGxpbmcgYmFjayB0byBzZXRUaW1lb3V0IHNpbmNlIGl0IGRvZXMgbm90IGhhdmVcbiAgLy8gdGhlIG1pbmltdW0gNG1zIHBlbmFsdHkuXG4gIC8vIFVuZm9ydHVuYXRlbHkgdGhlcmUgYXBwZWFycyB0byBiZSBhIGJ1ZyBpbiBJbnRlcm5ldCBFeHBsb3JlciAxMCBNb2JpbGUgKGFuZFxuICAvLyBEZXNrdG9wIHRvIGEgbGVzc2VyIGV4dGVudCkgdGhhdCByZW5kZXJzIGJvdGggc2V0SW1tZWRpYXRlIGFuZFxuICAvLyBNZXNzYWdlQ2hhbm5lbCB1c2VsZXNzIGZvciB0aGUgcHVycG9zZXMgb2YgQVNBUC5cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2tyaXNrb3dhbC9xL2lzc3Vlcy8zOTZcbiAgLy8gVGltZXJzIGFyZSBpbXBsZW1lbnRlZCB1bml2ZXJzYWxseS5cbiAgLy8gV2UgZmFsbCBiYWNrIHRvIHRpbWVycyBpbiB3b3JrZXJzIGluIG1vc3QgZW5naW5lcywgYW5kIGluIGZvcmVncm91bmRcbiAgLy8gY29udGV4dHMgaW4gdGhlIGZvbGxvd2luZyBicm93c2Vycy5cbiAgLy8gSG93ZXZlciwgbm90ZSB0aGF0IGV2ZW4gdGhpcyBzaW1wbGUgY2FzZSByZXF1aXJlcyBudWFuY2VzIHRvIG9wZXJhdGUgaW4gYVxuICAvLyBicm9hZCBzcGVjdHJ1bSBvZiBicm93c2Vycy5cbiAgLy9cbiAgLy8gLSBGaXJlZm94IDMtMTNcbiAgLy8gLSBJbnRlcm5ldCBFeHBsb3JlciA2LTlcbiAgLy8gLSBpUGFkIFNhZmFyaSA0LjNcbiAgLy8gLSBMeW54IDIuOC43XG59IGVsc2Uge1xuICByZXF1ZXN0Rmx1c2ggPSBtYWtlUmVxdWVzdENhbGxGcm9tVGltZXIoZmx1c2gpO1xufSAvLyBgcmVxdWVzdEZsdXNoYCByZXF1ZXN0cyB0aGF0IHRoZSBoaWdoIHByaW9yaXR5IGV2ZW50IHF1ZXVlIGJlIGZsdXNoZWQgYXNcbi8vIHNvb24gYXMgcG9zc2libGUuXG4vLyBUaGlzIGlzIHVzZWZ1bCB0byBwcmV2ZW50IGFuIGVycm9yIHRocm93biBpbiBhIHRhc2sgZnJvbSBzdGFsbGluZyB0aGUgZXZlbnRcbi8vIHF1ZXVlIGlmIHRoZSBleGNlcHRpb24gaGFuZGxlZCBieSBOb2RlLmpz4oCZc1xuLy8gYHByb2Nlc3Mub24oXCJ1bmNhdWdodEV4Y2VwdGlvblwiKWAgb3IgYnkgYSBkb21haW4uXG5cblxucmF3QXNhcC5yZXF1ZXN0Rmx1c2ggPSByZXF1ZXN0Rmx1c2g7IC8vIFRvIHJlcXVlc3QgYSBoaWdoIHByaW9yaXR5IGV2ZW50LCB3ZSBpbmR1Y2UgYSBtdXRhdGlvbiBvYnNlcnZlciBieSB0b2dnbGluZ1xuLy8gdGhlIHRleHQgb2YgYSB0ZXh0IG5vZGUgYmV0d2VlbiBcIjFcIiBhbmQgXCItMVwiLlxuXG5mdW5jdGlvbiBtYWtlUmVxdWVzdENhbGxGcm9tTXV0YXRpb25PYnNlcnZlcihjYWxsYmFjaykge1xuICB2YXIgdG9nZ2xlID0gMTtcbiAgdmFyIG9ic2VydmVyID0gbmV3IEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGNhbGxiYWNrKTtcbiAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gIG9ic2VydmVyLm9ic2VydmUobm9kZSwge1xuICAgIGNoYXJhY3RlckRhdGE6IHRydWVcbiAgfSk7XG4gIHJldHVybiBmdW5jdGlvbiByZXF1ZXN0Q2FsbCgpIHtcbiAgICB0b2dnbGUgPSAtdG9nZ2xlO1xuICAgIG5vZGUuZGF0YSA9IHRvZ2dsZTtcbiAgfTtcbn0gLy8gVGhlIG1lc3NhZ2UgY2hhbm5lbCB0ZWNobmlxdWUgd2FzIGRpc2NvdmVyZWQgYnkgTWFsdGUgVWJsIGFuZCB3YXMgdGhlXG4vLyBvcmlnaW5hbCBmb3VuZGF0aW9uIGZvciB0aGlzIGxpYnJhcnkuXG4vLyBodHRwOi8vd3d3Lm5vbmJsb2NraW5nLmlvLzIwMTEvMDYvd2luZG93bmV4dHRpY2suaHRtbFxuLy8gU2FmYXJpIDYuMC41IChhdCBsZWFzdCkgaW50ZXJtaXR0ZW50bHkgZmFpbHMgdG8gY3JlYXRlIG1lc3NhZ2UgcG9ydHMgb24gYVxuLy8gcGFnZSdzIGZpcnN0IGxvYWQuIFRoYW5rZnVsbHksIHRoaXMgdmVyc2lvbiBvZiBTYWZhcmkgc3VwcG9ydHNcbi8vIE11dGF0aW9uT2JzZXJ2ZXJzLCBzbyB3ZSBkb24ndCBuZWVkIHRvIGZhbGwgYmFjayBpbiB0aGF0IGNhc2UuXG4vLyBmdW5jdGlvbiBtYWtlUmVxdWVzdENhbGxGcm9tTWVzc2FnZUNoYW5uZWwoY2FsbGJhY2spIHtcbi8vICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuLy8gICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gY2FsbGJhY2s7XG4vLyAgICAgcmV0dXJuIGZ1bmN0aW9uIHJlcXVlc3RDYWxsKCkge1xuLy8gICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuLy8gICAgIH07XG4vLyB9XG4vLyBGb3IgcmVhc29ucyBleHBsYWluZWQgYWJvdmUsIHdlIGFyZSBhbHNvIHVuYWJsZSB0byB1c2UgYHNldEltbWVkaWF0ZWBcbi8vIHVuZGVyIGFueSBjaXJjdW1zdGFuY2VzLlxuLy8gRXZlbiBpZiB3ZSB3ZXJlLCB0aGVyZSBpcyBhbm90aGVyIGJ1ZyBpbiBJbnRlcm5ldCBFeHBsb3JlciAxMC5cbi8vIEl0IGlzIG5vdCBzdWZmaWNpZW50IHRvIGFzc2lnbiBgc2V0SW1tZWRpYXRlYCB0byBgcmVxdWVzdEZsdXNoYCBiZWNhdXNlXG4vLyBgc2V0SW1tZWRpYXRlYCBtdXN0IGJlIGNhbGxlZCAqYnkgbmFtZSogYW5kIHRoZXJlZm9yZSBtdXN0IGJlIHdyYXBwZWQgaW4gYVxuLy8gY2xvc3VyZS5cbi8vIE5ldmVyIGZvcmdldC5cbi8vIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0Q2FsbEZyb21TZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcbi8vICAgICByZXR1cm4gZnVuY3Rpb24gcmVxdWVzdENhbGwoKSB7XG4vLyAgICAgICAgIHNldEltbWVkaWF0ZShjYWxsYmFjayk7XG4vLyAgICAgfTtcbi8vIH1cbi8vIFNhZmFyaSA2LjAgaGFzIGEgcHJvYmxlbSB3aGVyZSB0aW1lcnMgd2lsbCBnZXQgbG9zdCB3aGlsZSB0aGUgdXNlciBpc1xuLy8gc2Nyb2xsaW5nLiBUaGlzIHByb2JsZW0gZG9lcyBub3QgaW1wYWN0IEFTQVAgYmVjYXVzZSBTYWZhcmkgNi4wIHN1cHBvcnRzXG4vLyBtdXRhdGlvbiBvYnNlcnZlcnMsIHNvIHRoYXQgaW1wbGVtZW50YXRpb24gaXMgdXNlZCBpbnN0ZWFkLlxuLy8gSG93ZXZlciwgaWYgd2UgZXZlciBlbGVjdCB0byB1c2UgdGltZXJzIGluIFNhZmFyaSwgdGhlIHByZXZhbGVudCB3b3JrLWFyb3VuZFxuLy8gaXMgdG8gYWRkIGEgc2Nyb2xsIGV2ZW50IGxpc3RlbmVyIHRoYXQgY2FsbHMgZm9yIGEgZmx1c2guXG4vLyBgc2V0VGltZW91dGAgZG9lcyBub3QgY2FsbCB0aGUgcGFzc2VkIGNhbGxiYWNrIGlmIHRoZSBkZWxheSBpcyBsZXNzIHRoYW5cbi8vIGFwcHJveGltYXRlbHkgNyBpbiB3ZWIgd29ya2VycyBpbiBGaXJlZm94IDggdGhyb3VnaCAxOCwgYW5kIHNvbWV0aW1lcyBub3Rcbi8vIGV2ZW4gdGhlbi5cblxuXG5mdW5jdGlvbiBtYWtlUmVxdWVzdENhbGxGcm9tVGltZXIoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJlcXVlc3RDYWxsKCkge1xuICAgIC8vIFdlIGRpc3BhdGNoIGEgdGltZW91dCB3aXRoIGEgc3BlY2lmaWVkIGRlbGF5IG9mIDAgZm9yIGVuZ2luZXMgdGhhdFxuICAgIC8vIGNhbiByZWxpYWJseSBhY2NvbW1vZGF0ZSB0aGF0IHJlcXVlc3QuIFRoaXMgd2lsbCB1c3VhbGx5IGJlIHNuYXBwZWRcbiAgICAvLyB0byBhIDQgbWlsaXNlY29uZCBkZWxheSwgYnV0IG9uY2Ugd2UncmUgZmx1c2hpbmcsIHRoZXJlJ3Mgbm8gZGVsYXlcbiAgICAvLyBiZXR3ZWVuIGV2ZW50cy5cbiAgICB2YXIgdGltZW91dEhhbmRsZSA9IHNldFRpbWVvdXQoaGFuZGxlVGltZXIsIDApOyAvLyBIb3dldmVyLCBzaW5jZSB0aGlzIHRpbWVyIGdldHMgZnJlcXVlbnRseSBkcm9wcGVkIGluIEZpcmVmb3hcbiAgICAvLyB3b3JrZXJzLCB3ZSBlbmxpc3QgYW4gaW50ZXJ2YWwgaGFuZGxlIHRoYXQgd2lsbCB0cnkgdG8gZmlyZVxuICAgIC8vIGFuIGV2ZW50IDIwIHRpbWVzIHBlciBzZWNvbmQgdW50aWwgaXQgc3VjY2VlZHMuXG5cbiAgICB2YXIgaW50ZXJ2YWxIYW5kbGUgPSBzZXRJbnRlcnZhbChoYW5kbGVUaW1lciwgNTApO1xuXG4gICAgZnVuY3Rpb24gaGFuZGxlVGltZXIoKSB7XG4gICAgICAvLyBXaGljaGV2ZXIgdGltZXIgc3VjY2VlZHMgd2lsbCBjYW5jZWwgYm90aCB0aW1lcnMgYW5kXG4gICAgICAvLyBleGVjdXRlIHRoZSBjYWxsYmFjay5cbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SGFuZGxlKTtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxIYW5kbGUpO1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG4gIH07XG59IC8vIFRoaXMgaXMgZm9yIGBhc2FwLmpzYCBvbmx5LlxuLy8gSXRzIG5hbWUgd2lsbCBiZSBwZXJpb2RpY2FsbHkgcmFuZG9taXplZCB0byBicmVhayBhbnkgY29kZSB0aGF0IGRlcGVuZHMgb25cbi8vIGl0cyBleGlzdGVuY2UuXG5cblxucmF3QXNhcC5tYWtlUmVxdWVzdENhbGxGcm9tVGltZXIgPSBtYWtlUmVxdWVzdENhbGxGcm9tVGltZXI7IC8vIEFTQVAgd2FzIG9yaWdpbmFsbHkgYSBuZXh0VGljayBzaGltIGluY2x1ZGVkIGluIFEuIFRoaXMgd2FzIGZhY3RvcmVkIG91dFxuLy8gaW50byB0aGlzIEFTQVAgcGFja2FnZS4gSXQgd2FzIGxhdGVyIGFkYXB0ZWQgdG8gUlNWUCB3aGljaCBtYWRlIGZ1cnRoZXJcbi8vIGFtZW5kbWVudHMuIFRoZXNlIGRlY2lzaW9ucywgcGFydGljdWxhcmx5IHRvIG1hcmdpbmFsaXplIE1lc3NhZ2VDaGFubmVsIGFuZFxuLy8gdG8gY2FwdHVyZSB0aGUgTXV0YXRpb25PYnNlcnZlciBpbXBsZW1lbnRhdGlvbiBpbiBhIGNsb3N1cmUsIHdlcmUgaW50ZWdyYXRlZFxuLy8gYmFjayBpbnRvIEFTQVAgcHJvcGVyLlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RpbGRlaW8vcnN2cC5qcy9ibG9iL2NkZGY3MjMyNTQ2YTljZjg1ODUyNGI3NWNkZTZmOWVkZjcyNjIwYTcvbGliL3JzdnAvYXNhcC5qcyIsImltcG9ydCB7IHJhd0FzYXAgfSBmcm9tICcuL3Jhdyc7IC8vIHJhd0FzYXAgcHJvdmlkZXMgZXZlcnl0aGluZyB3ZSBuZWVkIGV4Y2VwdCBleGNlcHRpb24gbWFuYWdlbWVudC5cbi8vIFJhd1Rhc2tzIGFyZSByZWN5Y2xlZCB0byByZWR1Y2UgR0MgY2h1cm4uXG5cbnZhciBmcmVlVGFza3MgPSBbXTsgLy8gV2UgcXVldWUgZXJyb3JzIHRvIGVuc3VyZSB0aGV5IGFyZSB0aHJvd24gaW4gcmlnaHQgb3JkZXIgKEZJRk8pLlxuLy8gQXJyYXktYXMtcXVldWUgaXMgZ29vZCBlbm91Z2ggaGVyZSwgc2luY2Ugd2UgYXJlIGp1c3QgZGVhbGluZyB3aXRoIGV4Y2VwdGlvbnMuXG5cbnZhciBwZW5kaW5nRXJyb3JzID0gW107XG52YXIgcmVxdWVzdEVycm9yVGhyb3cgPSByYXdBc2FwLm1ha2VSZXF1ZXN0Q2FsbEZyb21UaW1lcih0aHJvd0ZpcnN0RXJyb3IpO1xuXG5mdW5jdGlvbiB0aHJvd0ZpcnN0RXJyb3IoKSB7XG4gIGlmIChwZW5kaW5nRXJyb3JzLmxlbmd0aCkge1xuICAgIHRocm93IHBlbmRpbmdFcnJvcnMuc2hpZnQoKTtcbiAgfVxufVxuLyoqXG4gKiBDYWxscyBhIHRhc2sgYXMgc29vbiBhcyBwb3NzaWJsZSBhZnRlciByZXR1cm5pbmcsIGluIGl0cyBvd24gZXZlbnQsIHdpdGggcHJpb3JpdHlcbiAqIG92ZXIgb3RoZXIgZXZlbnRzIGxpa2UgYW5pbWF0aW9uLCByZWZsb3csIGFuZCByZXBhaW50LiBBbiBlcnJvciB0aHJvd24gZnJvbSBhblxuICogZXZlbnQgd2lsbCBub3QgaW50ZXJydXB0LCBub3IgZXZlbiBzdWJzdGFudGlhbGx5IHNsb3cgZG93biB0aGUgcHJvY2Vzc2luZyBvZlxuICogb3RoZXIgZXZlbnRzLCBidXQgd2lsbCBiZSByYXRoZXIgcG9zdHBvbmVkIHRvIGEgbG93ZXIgcHJpb3JpdHkgZXZlbnQuXG4gKiBAcGFyYW0ge3tjYWxsfX0gdGFzayBBIGNhbGxhYmxlIG9iamVjdCwgdHlwaWNhbGx5IGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBub1xuICogYXJndW1lbnRzLlxuICovXG5cblxuZXhwb3J0IGZ1bmN0aW9uIGFzYXAodGFzaykge1xuICB2YXIgcmF3VGFzaztcblxuICBpZiAoZnJlZVRhc2tzLmxlbmd0aCkge1xuICAgIHJhd1Rhc2sgPSBmcmVlVGFza3MucG9wKCk7XG4gIH0gZWxzZSB7XG4gICAgcmF3VGFzayA9IG5ldyBSYXdUYXNrKCk7XG4gIH1cblxuICByYXdUYXNrLnRhc2sgPSB0YXNrO1xuICByYXdBc2FwKHJhd1Rhc2spO1xufSAvLyBXZSB3cmFwIHRhc2tzIHdpdGggcmVjeWNsYWJsZSB0YXNrIG9iamVjdHMuICBBIHRhc2sgb2JqZWN0IGltcGxlbWVudHNcbi8vIGBjYWxsYCwganVzdCBsaWtlIGEgZnVuY3Rpb24uXG5cbnZhciBSYXdUYXNrID1cbi8qKiBAY2xhc3MgKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUmF3VGFzaygpIHt9XG5cbiAgUmF3VGFzay5wcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy50YXNrLmNhbGwoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGFzYXAub25lcnJvcikge1xuICAgICAgICAvLyBUaGlzIGhvb2sgZXhpc3RzIHB1cmVseSBmb3IgdGVzdGluZyBwdXJwb3Nlcy5cbiAgICAgICAgLy8gSXRzIG5hbWUgd2lsbCBiZSBwZXJpb2RpY2FsbHkgcmFuZG9taXplZCB0byBicmVhayBhbnkgY29kZSB0aGF0XG4gICAgICAgIC8vIGRlcGVuZHMgb24gaXRzIGV4aXN0ZW5jZS5cbiAgICAgICAgYXNhcC5vbmVycm9yKGVycm9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEluIGEgd2ViIGJyb3dzZXIsIGV4Y2VwdGlvbnMgYXJlIG5vdCBmYXRhbC4gSG93ZXZlciwgdG8gYXZvaWRcbiAgICAgICAgLy8gc2xvd2luZyBkb3duIHRoZSBxdWV1ZSBvZiBwZW5kaW5nIHRhc2tzLCB3ZSByZXRocm93IHRoZSBlcnJvciBpbiBhXG4gICAgICAgIC8vIGxvd2VyIHByaW9yaXR5IHR1cm4uXG4gICAgICAgIHBlbmRpbmdFcnJvcnMucHVzaChlcnJvcik7XG4gICAgICAgIHJlcXVlc3RFcnJvclRocm93KCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICBmcmVlVGFza3NbZnJlZVRhc2tzLmxlbmd0aF0gPSB0aGlzO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gUmF3VGFzaztcbn0oKTsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9XG5cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7IHZhciBfaSA9IGFyciA9PSBudWxsID8gbnVsbCA6IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgYXJyW1N5bWJvbC5pdGVyYXRvcl0gfHwgYXJyW1wiQEBpdGVyYXRvclwiXTsgaWYgKF9pID09IG51bGwpIHJldHVybjsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfcywgX2U7IHRyeSB7IGZvciAoX2kgPSBfaS5jYWxsKGFycik7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdICE9IG51bGwpIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfVxuXG5mdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH1cblxuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAnQHJlYWN0LWRuZC9pbnZhcmlhbnQnO1xuaW1wb3J0IHsgYWRkU291cmNlIGFzIF9hZGRTb3VyY2UsIGFkZFRhcmdldCBhcyBfYWRkVGFyZ2V0LCByZW1vdmVTb3VyY2UgYXMgX3JlbW92ZVNvdXJjZSwgcmVtb3ZlVGFyZ2V0IGFzIF9yZW1vdmVUYXJnZXQgfSBmcm9tICcuLi9hY3Rpb25zL3JlZ2lzdHJ5JztcbmltcG9ydCB7IGdldE5leHRVbmlxdWVJZCB9IGZyb20gJy4uL3V0aWxzL2dldE5leHRVbmlxdWVJZCc7XG5pbXBvcnQgeyBIYW5kbGVyUm9sZSB9IGZyb20gJy4uL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgdmFsaWRhdGVTb3VyY2VDb250cmFjdCwgdmFsaWRhdGVUYXJnZXRDb250cmFjdCwgdmFsaWRhdGVUeXBlIH0gZnJvbSAnLi4vY29udHJhY3RzJztcbmltcG9ydCB7IGFzYXAgfSBmcm9tICdAcmVhY3QtZG5kL2FzYXAnO1xuXG5mdW5jdGlvbiBnZXROZXh0SGFuZGxlcklkKHJvbGUpIHtcbiAgdmFyIGlkID0gZ2V0TmV4dFVuaXF1ZUlkKCkudG9TdHJpbmcoKTtcblxuICBzd2l0Y2ggKHJvbGUpIHtcbiAgICBjYXNlIEhhbmRsZXJSb2xlLlNPVVJDRTpcbiAgICAgIHJldHVybiBcIlNcIi5jb25jYXQoaWQpO1xuXG4gICAgY2FzZSBIYW5kbGVyUm9sZS5UQVJHRVQ6XG4gICAgICByZXR1cm4gXCJUXCIuY29uY2F0KGlkKTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIEhhbmRsZXIgUm9sZTogXCIuY29uY2F0KHJvbGUpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwYXJzZVJvbGVGcm9tSGFuZGxlcklkKGhhbmRsZXJJZCkge1xuICBzd2l0Y2ggKGhhbmRsZXJJZFswXSkge1xuICAgIGNhc2UgJ1MnOlxuICAgICAgcmV0dXJuIEhhbmRsZXJSb2xlLlNPVVJDRTtcblxuICAgIGNhc2UgJ1QnOlxuICAgICAgcmV0dXJuIEhhbmRsZXJSb2xlLlRBUkdFVDtcblxuICAgIGRlZmF1bHQ6XG4gICAgICBpbnZhcmlhbnQoZmFsc2UsIFwiQ2Fubm90IHBhcnNlIGhhbmRsZXIgSUQ6IFwiLmNvbmNhdChoYW5kbGVySWQpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYXBDb250YWluc1ZhbHVlKG1hcCwgc2VhcmNoVmFsdWUpIHtcbiAgdmFyIGVudHJpZXMgPSBtYXAuZW50cmllcygpO1xuICB2YXIgaXNEb25lID0gZmFsc2U7XG5cbiAgZG8ge1xuICAgIHZhciBfZW50cmllcyRuZXh0ID0gZW50cmllcy5uZXh0KCksXG4gICAgICAgIGRvbmUgPSBfZW50cmllcyRuZXh0LmRvbmUsXG4gICAgICAgIF9lbnRyaWVzJG5leHQkdmFsdWUgPSBfc2xpY2VkVG9BcnJheShfZW50cmllcyRuZXh0LnZhbHVlLCAyKSxcbiAgICAgICAgdmFsdWUgPSBfZW50cmllcyRuZXh0JHZhbHVlWzFdO1xuXG4gICAgaWYgKHZhbHVlID09PSBzZWFyY2hWYWx1ZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaXNEb25lID0gISFkb25lO1xuICB9IHdoaWxlICghaXNEb25lKTtcblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCB2YXIgSGFuZGxlclJlZ2lzdHJ5SW1wbCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEhhbmRsZXJSZWdpc3RyeUltcGwoc3RvcmUpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSGFuZGxlclJlZ2lzdHJ5SW1wbCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0eXBlc1wiLCBuZXcgTWFwKCkpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZHJhZ1NvdXJjZXNcIiwgbmV3IE1hcCgpKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRyb3BUYXJnZXRzXCIsIG5ldyBNYXAoKSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJwaW5uZWRTb3VyY2VJZFwiLCBudWxsKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBpbm5lZFNvdXJjZVwiLCBudWxsKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0b3JlXCIsIHZvaWQgMCk7XG5cbiAgICB0aGlzLnN0b3JlID0gc3RvcmU7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoSGFuZGxlclJlZ2lzdHJ5SW1wbCwgW3tcbiAgICBrZXk6IFwiYWRkU291cmNlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFNvdXJjZSh0eXBlLCBzb3VyY2UpIHtcbiAgICAgIHZhbGlkYXRlVHlwZSh0eXBlKTtcbiAgICAgIHZhbGlkYXRlU291cmNlQ29udHJhY3Qoc291cmNlKTtcbiAgICAgIHZhciBzb3VyY2VJZCA9IHRoaXMuYWRkSGFuZGxlcihIYW5kbGVyUm9sZS5TT1VSQ0UsIHR5cGUsIHNvdXJjZSk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKF9hZGRTb3VyY2Uoc291cmNlSWQpKTtcbiAgICAgIHJldHVybiBzb3VyY2VJZDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYWRkVGFyZ2V0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFRhcmdldCh0eXBlLCB0YXJnZXQpIHtcbiAgICAgIHZhbGlkYXRlVHlwZSh0eXBlLCB0cnVlKTtcbiAgICAgIHZhbGlkYXRlVGFyZ2V0Q29udHJhY3QodGFyZ2V0KTtcbiAgICAgIHZhciB0YXJnZXRJZCA9IHRoaXMuYWRkSGFuZGxlcihIYW5kbGVyUm9sZS5UQVJHRVQsIHR5cGUsIHRhcmdldCk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKF9hZGRUYXJnZXQodGFyZ2V0SWQpKTtcbiAgICAgIHJldHVybiB0YXJnZXRJZDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29udGFpbnNIYW5kbGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbnRhaW5zSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgICByZXR1cm4gbWFwQ29udGFpbnNWYWx1ZSh0aGlzLmRyYWdTb3VyY2VzLCBoYW5kbGVyKSB8fCBtYXBDb250YWluc1ZhbHVlKHRoaXMuZHJvcFRhcmdldHMsIGhhbmRsZXIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRTb3VyY2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U291cmNlKHNvdXJjZUlkKSB7XG4gICAgICB2YXIgaW5jbHVkZVBpbm5lZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG4gICAgICBpbnZhcmlhbnQodGhpcy5pc1NvdXJjZUlkKHNvdXJjZUlkKSwgJ0V4cGVjdGVkIGEgdmFsaWQgc291cmNlIElELicpO1xuICAgICAgdmFyIGlzUGlubmVkID0gaW5jbHVkZVBpbm5lZCAmJiBzb3VyY2VJZCA9PT0gdGhpcy5waW5uZWRTb3VyY2VJZDtcbiAgICAgIHZhciBzb3VyY2UgPSBpc1Bpbm5lZCA/IHRoaXMucGlubmVkU291cmNlIDogdGhpcy5kcmFnU291cmNlcy5nZXQoc291cmNlSWQpO1xuICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0VGFyZ2V0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRhcmdldCh0YXJnZXRJZCkge1xuICAgICAgaW52YXJpYW50KHRoaXMuaXNUYXJnZXRJZCh0YXJnZXRJZCksICdFeHBlY3RlZCBhIHZhbGlkIHRhcmdldCBJRC4nKTtcbiAgICAgIHJldHVybiB0aGlzLmRyb3BUYXJnZXRzLmdldCh0YXJnZXRJZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFNvdXJjZVR5cGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U291cmNlVHlwZShzb3VyY2VJZCkge1xuICAgICAgaW52YXJpYW50KHRoaXMuaXNTb3VyY2VJZChzb3VyY2VJZCksICdFeHBlY3RlZCBhIHZhbGlkIHNvdXJjZSBJRC4nKTtcbiAgICAgIHJldHVybiB0aGlzLnR5cGVzLmdldChzb3VyY2VJZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFRhcmdldFR5cGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGFyZ2V0VHlwZSh0YXJnZXRJZCkge1xuICAgICAgaW52YXJpYW50KHRoaXMuaXNUYXJnZXRJZCh0YXJnZXRJZCksICdFeHBlY3RlZCBhIHZhbGlkIHRhcmdldCBJRC4nKTtcbiAgICAgIHJldHVybiB0aGlzLnR5cGVzLmdldCh0YXJnZXRJZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzU291cmNlSWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNTb3VyY2VJZChoYW5kbGVySWQpIHtcbiAgICAgIHZhciByb2xlID0gcGFyc2VSb2xlRnJvbUhhbmRsZXJJZChoYW5kbGVySWQpO1xuICAgICAgcmV0dXJuIHJvbGUgPT09IEhhbmRsZXJSb2xlLlNPVVJDRTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNUYXJnZXRJZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc1RhcmdldElkKGhhbmRsZXJJZCkge1xuICAgICAgdmFyIHJvbGUgPSBwYXJzZVJvbGVGcm9tSGFuZGxlcklkKGhhbmRsZXJJZCk7XG4gICAgICByZXR1cm4gcm9sZSA9PT0gSGFuZGxlclJvbGUuVEFSR0VUO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW1vdmVTb3VyY2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlU291cmNlKHNvdXJjZUlkKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBpbnZhcmlhbnQodGhpcy5nZXRTb3VyY2Uoc291cmNlSWQpLCAnRXhwZWN0ZWQgYW4gZXhpc3Rpbmcgc291cmNlLicpO1xuICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaChfcmVtb3ZlU291cmNlKHNvdXJjZUlkKSk7XG4gICAgICBhc2FwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMuZHJhZ1NvdXJjZXMuZGVsZXRlKHNvdXJjZUlkKTtcblxuICAgICAgICBfdGhpcy50eXBlcy5kZWxldGUoc291cmNlSWQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbW92ZVRhcmdldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVUYXJnZXQodGFyZ2V0SWQpIHtcbiAgICAgIGludmFyaWFudCh0aGlzLmdldFRhcmdldCh0YXJnZXRJZCksICdFeHBlY3RlZCBhbiBleGlzdGluZyB0YXJnZXQuJyk7XG4gICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKF9yZW1vdmVUYXJnZXQodGFyZ2V0SWQpKTtcbiAgICAgIHRoaXMuZHJvcFRhcmdldHMuZGVsZXRlKHRhcmdldElkKTtcbiAgICAgIHRoaXMudHlwZXMuZGVsZXRlKHRhcmdldElkKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicGluU291cmNlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBpblNvdXJjZShzb3VyY2VJZCkge1xuICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuZ2V0U291cmNlKHNvdXJjZUlkKTtcbiAgICAgIGludmFyaWFudChzb3VyY2UsICdFeHBlY3RlZCBhbiBleGlzdGluZyBzb3VyY2UuJyk7XG4gICAgICB0aGlzLnBpbm5lZFNvdXJjZUlkID0gc291cmNlSWQ7XG4gICAgICB0aGlzLnBpbm5lZFNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidW5waW5Tb3VyY2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdW5waW5Tb3VyY2UoKSB7XG4gICAgICBpbnZhcmlhbnQodGhpcy5waW5uZWRTb3VyY2UsICdObyBzb3VyY2UgaXMgcGlubmVkIGF0IHRoZSB0aW1lLicpO1xuICAgICAgdGhpcy5waW5uZWRTb3VyY2VJZCA9IG51bGw7XG4gICAgICB0aGlzLnBpbm5lZFNvdXJjZSA9IG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImFkZEhhbmRsZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkSGFuZGxlcihyb2xlLCB0eXBlLCBoYW5kbGVyKSB7XG4gICAgICB2YXIgaWQgPSBnZXROZXh0SGFuZGxlcklkKHJvbGUpO1xuICAgICAgdGhpcy50eXBlcy5zZXQoaWQsIHR5cGUpO1xuXG4gICAgICBpZiAocm9sZSA9PT0gSGFuZGxlclJvbGUuU09VUkNFKSB7XG4gICAgICAgIHRoaXMuZHJhZ1NvdXJjZXMuc2V0KGlkLCBoYW5kbGVyKTtcbiAgICAgIH0gZWxzZSBpZiAocm9sZSA9PT0gSGFuZGxlclJvbGUuVEFSR0VUKSB7XG4gICAgICAgIHRoaXMuZHJvcFRhcmdldHMuc2V0KGlkLCBoYW5kbGVyKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGlkO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBIYW5kbGVyUmVnaXN0cnlJbXBsO1xufSgpOyIsImltcG9ydCB7IERyYWdEcm9wTWFuYWdlckltcGwgfSBmcm9tICcuL2NsYXNzZXMvRHJhZ0Ryb3BNYW5hZ2VySW1wbCc7XG5pbXBvcnQgeyBjcmVhdGVTdG9yZSB9IGZyb20gJ3JlZHV4JztcbmltcG9ydCB7IHJlZHVjZSB9IGZyb20gJy4vcmVkdWNlcnMnO1xuaW1wb3J0IHsgRHJhZ0Ryb3BNb25pdG9ySW1wbCB9IGZyb20gJy4vY2xhc3Nlcy9EcmFnRHJvcE1vbml0b3JJbXBsJztcbmltcG9ydCB7IEhhbmRsZXJSZWdpc3RyeUltcGwgfSBmcm9tICcuL2NsYXNzZXMvSGFuZGxlclJlZ2lzdHJ5SW1wbCc7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRHJhZ0Ryb3BNYW5hZ2VyKGJhY2tlbmRGYWN0b3J5KSB7XG4gIHZhciBnbG9iYWxDb250ZXh0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB1bmRlZmluZWQ7XG4gIHZhciBiYWNrZW5kT3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG4gIHZhciBkZWJ1Z01vZGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlO1xuICB2YXIgc3RvcmUgPSBtYWtlU3RvcmVJbnN0YW5jZShkZWJ1Z01vZGUpO1xuICB2YXIgbW9uaXRvciA9IG5ldyBEcmFnRHJvcE1vbml0b3JJbXBsKHN0b3JlLCBuZXcgSGFuZGxlclJlZ2lzdHJ5SW1wbChzdG9yZSkpO1xuICB2YXIgbWFuYWdlciA9IG5ldyBEcmFnRHJvcE1hbmFnZXJJbXBsKHN0b3JlLCBtb25pdG9yKTtcbiAgdmFyIGJhY2tlbmQgPSBiYWNrZW5kRmFjdG9yeShtYW5hZ2VyLCBnbG9iYWxDb250ZXh0LCBiYWNrZW5kT3B0aW9ucyk7XG4gIG1hbmFnZXIucmVjZWl2ZUJhY2tlbmQoYmFja2VuZCk7XG4gIHJldHVybiBtYW5hZ2VyO1xufVxuXG5mdW5jdGlvbiBtYWtlU3RvcmVJbnN0YW5jZShkZWJ1Z01vZGUpIHtcbiAgLy8gVE9ETzogaWYgd2UgZXZlciBtYWtlIGEgcmVhY3QtbmF0aXZlIHZlcnNpb24gb2YgdGhpcyxcbiAgLy8gd2UnbGwgbmVlZCB0byBjb25zaWRlciBob3cgdG8gcHVsbCBvZmYgZGV2LXRvb2xpbmdcbiAgdmFyIHJlZHV4RGV2VG9vbHMgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuX19SRURVWF9ERVZUT09MU19FWFRFTlNJT05fXztcbiAgcmV0dXJuIGNyZWF0ZVN0b3JlKHJlZHVjZSwgZGVidWdNb2RlICYmIHJlZHV4RGV2VG9vbHMgJiYgcmVkdXhEZXZUb29scyh7XG4gICAgbmFtZTogJ2RuZC1jb3JlJyxcbiAgICBpbnN0YW5jZUlkOiAnZG5kLWNvcmUnXG4gIH0pKTtcbn0iLCJ2YXIgX2V4Y2x1ZGVkID0gW1wiY2hpbGRyZW5cIl07XG5cbmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9XG5cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7IHZhciBfaSA9IGFyciA9PSBudWxsID8gbnVsbCA6IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgYXJyW1N5bWJvbC5pdGVyYXRvcl0gfHwgYXJyW1wiQEBpdGVyYXRvclwiXTsgaWYgKF9pID09IG51bGwpIHJldHVybjsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfcywgX2U7IHRyeSB7IGZvciAoX2kgPSBfaS5jYWxsKGFycik7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdICE9IG51bGwpIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfVxuXG5mdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNvdXJjZSwgZXhjbHVkZWQpIHsgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307IHZhciB0YXJnZXQgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKTsgdmFyIGtleSwgaTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHNvdXJjZVN5bWJvbEtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHNvdXJjZSk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VTeW1ib2xLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZVN5bWJvbEtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHsgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307IHZhciB0YXJnZXQgPSB7fTsgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpOyB2YXIga2V5LCBpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuaW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCwgbWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNyZWF0ZURyYWdEcm9wTWFuYWdlciB9IGZyb20gJ2RuZC1jb3JlJztcbmltcG9ydCB7IERuZENvbnRleHQgfSBmcm9tICcuL0RuZENvbnRleHQnO1xudmFyIHJlZkNvdW50ID0gMDtcbnZhciBJTlNUQU5DRV9TWU0gPSBTeW1ib2wuZm9yKCdfX1JFQUNUX0RORF9DT05URVhUX0lOU1RBTkNFX18nKTtcbi8qKlxuICogQSBSZWFjdCBjb21wb25lbnQgdGhhdCBwcm92aWRlcyB0aGUgUmVhY3QtRG5EIGNvbnRleHRcbiAqL1xuXG5leHBvcnQgdmFyIERuZFByb3ZpZGVyID0gbWVtbyhmdW5jdGlvbiBEbmRQcm92aWRlcihfcmVmKSB7XG4gIHZhciBjaGlsZHJlbiA9IF9yZWYuY2hpbGRyZW4sXG4gICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBfZXhjbHVkZWQpO1xuXG4gIHZhciBfZ2V0RG5kQ29udGV4dFZhbHVlID0gZ2V0RG5kQ29udGV4dFZhbHVlKHByb3BzKSxcbiAgICAgIF9nZXREbmRDb250ZXh0VmFsdWUyID0gX3NsaWNlZFRvQXJyYXkoX2dldERuZENvbnRleHRWYWx1ZSwgMiksXG4gICAgICBtYW5hZ2VyID0gX2dldERuZENvbnRleHRWYWx1ZTJbMF0sXG4gICAgICBpc0dsb2JhbEluc3RhbmNlID0gX2dldERuZENvbnRleHRWYWx1ZTJbMV07IC8vIG1lbW9pemVkIGZyb20gcHJvcHNcblxuICAvKipcbiAgICogSWYgdGhlIGdsb2JhbCBjb250ZXh0IHdhcyB1c2VkIHRvIHN0b3JlIHRoZSBETkQgY29udGV4dFxuICAgKiB0aGVuIHdoZXJlIHRoZXJlcyBubyBtb3JlIHJlZmVyZW5jZXMgdG8gaXQgd2Ugc2hvdWxkXG4gICAqIGNsZWFuIGl0IHVwIHRvIGF2b2lkIG1lbW9yeSBsZWFrc1xuICAgKi9cblxuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGlzR2xvYmFsSW5zdGFuY2UpIHtcbiAgICAgIHZhciBjb250ZXh0ID0gZ2V0R2xvYmFsQ29udGV4dCgpO1xuICAgICAgKytyZWZDb3VudDtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgtLXJlZkNvdW50ID09PSAwKSB7XG4gICAgICAgICAgY29udGV4dFtJTlNUQU5DRV9TWU1dID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH0sIFtdKTtcbiAgcmV0dXJuIF9qc3goRG5kQ29udGV4dC5Qcm92aWRlciwgT2JqZWN0LmFzc2lnbih7XG4gICAgdmFsdWU6IG1hbmFnZXJcbiAgfSwge1xuICAgIGNoaWxkcmVuOiBjaGlsZHJlblxuICB9KSwgdm9pZCAwKTtcbn0pO1xuXG5mdW5jdGlvbiBnZXREbmRDb250ZXh0VmFsdWUocHJvcHMpIHtcbiAgaWYgKCdtYW5hZ2VyJyBpbiBwcm9wcykge1xuICAgIHZhciBfbWFuYWdlciA9IHtcbiAgICAgIGRyYWdEcm9wTWFuYWdlcjogcHJvcHMubWFuYWdlclxuICAgIH07XG4gICAgcmV0dXJuIFtfbWFuYWdlciwgZmFsc2VdO1xuICB9XG5cbiAgdmFyIG1hbmFnZXIgPSBjcmVhdGVTaW5nbGV0b25EbmRDb250ZXh0KHByb3BzLmJhY2tlbmQsIHByb3BzLmNvbnRleHQsIHByb3BzLm9wdGlvbnMsIHByb3BzLmRlYnVnTW9kZSk7XG4gIHZhciBpc0dsb2JhbEluc3RhbmNlID0gIXByb3BzLmNvbnRleHQ7XG4gIHJldHVybiBbbWFuYWdlciwgaXNHbG9iYWxJbnN0YW5jZV07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNpbmdsZXRvbkRuZENvbnRleHQoYmFja2VuZCkge1xuICB2YXIgY29udGV4dCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZ2V0R2xvYmFsQ29udGV4dCgpO1xuICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkO1xuICB2YXIgZGVidWdNb2RlID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgPyBhcmd1bWVudHNbM10gOiB1bmRlZmluZWQ7XG4gIHZhciBjdHggPSBjb250ZXh0O1xuXG4gIGlmICghY3R4W0lOU1RBTkNFX1NZTV0pIHtcbiAgICBjdHhbSU5TVEFOQ0VfU1lNXSA9IHtcbiAgICAgIGRyYWdEcm9wTWFuYWdlcjogY3JlYXRlRHJhZ0Ryb3BNYW5hZ2VyKGJhY2tlbmQsIGNvbnRleHQsIG9wdGlvbnMsIGRlYnVnTW9kZSlcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGN0eFtJTlNUQU5DRV9TWU1dO1xufVxuXG5mdW5jdGlvbiBnZXRHbG9iYWxDb250ZXh0KCkge1xuICByZXR1cm4gdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB3aW5kb3c7XG59IiwiZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH1cblxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfVxuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH1cblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9XG5cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgdmFyIF9pID0gYXJyID09IG51bGwgPyBudWxsIDogdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBhcnJbU3ltYm9sLml0ZXJhdG9yXSB8fCBhcnJbXCJAQGl0ZXJhdG9yXCJdOyBpZiAoX2kgPT0gbnVsbCkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9zLCBfZTsgdHJ5IHsgZm9yIChfaSA9IF9pLmNhbGwoYXJyKTsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0gIT0gbnVsbCkgX2lbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9XG5cbmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfVxuXG5pbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VEcmFnRHJvcE1hbmFnZXIgfSBmcm9tICcuL3VzZURyYWdEcm9wTWFuYWdlcic7XG5pbXBvcnQgeyB1c2VDb2xsZWN0b3IgfSBmcm9tICcuL3VzZUNvbGxlY3Rvcic7XG4vKipcbiAqIHVzZURyYWdMYXllciBIb29rXG4gKiBAcGFyYW0gY29sbGVjdG9yIFRoZSBwcm9wZXJ0eSBjb2xsZWN0b3JcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlRHJhZ0xheWVyKGNvbGxlY3QpIHtcbiAgdmFyIGRyYWdEcm9wTWFuYWdlciA9IHVzZURyYWdEcm9wTWFuYWdlcigpO1xuICB2YXIgbW9uaXRvciA9IGRyYWdEcm9wTWFuYWdlci5nZXRNb25pdG9yKCk7XG5cbiAgdmFyIF91c2VDb2xsZWN0b3IgPSB1c2VDb2xsZWN0b3IobW9uaXRvciwgY29sbGVjdCksXG4gICAgICBfdXNlQ29sbGVjdG9yMiA9IF9zbGljZWRUb0FycmF5KF91c2VDb2xsZWN0b3IsIDIpLFxuICAgICAgY29sbGVjdGVkID0gX3VzZUNvbGxlY3RvcjJbMF0sXG4gICAgICB1cGRhdGVDb2xsZWN0ZWQgPSBfdXNlQ29sbGVjdG9yMlsxXTtcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBtb25pdG9yLnN1YnNjcmliZVRvT2Zmc2V0Q2hhbmdlKHVwZGF0ZUNvbGxlY3RlZCk7XG4gIH0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBtb25pdG9yLnN1YnNjcmliZVRvU3RhdGVDaGFuZ2UodXBkYXRlQ29sbGVjdGVkKTtcbiAgfSk7XG4gIHJldHVybiBjb2xsZWN0ZWQ7XG59IiwiLy8gY2hlYXAgbG9kYXNoIHJlcGxhY2VtZW50c1xuZXhwb3J0IGZ1bmN0aW9uIG1lbW9pemUoZm4pIHtcbiAgdmFyIHJlc3VsdCA9IG51bGw7XG5cbiAgdmFyIG1lbW9pemVkID0gZnVuY3Rpb24gbWVtb2l6ZWQoKSB7XG4gICAgaWYgKHJlc3VsdCA9PSBudWxsKSB7XG4gICAgICByZXN1bHQgPSBmbigpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgcmV0dXJuIG1lbW9pemVkO1xufVxuLyoqXG4gKiBkcm9wLWluIHJlcGxhY2VtZW50IGZvciBfLndpdGhvdXRcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gd2l0aG91dChpdGVtcywgaXRlbSkge1xuICByZXR1cm4gaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChpKSB7XG4gICAgcmV0dXJuIGkgIT09IGl0ZW07XG4gIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVuaW9uKGl0ZW1zQSwgaXRlbXNCKSB7XG4gIHZhciBzZXQgPSBuZXcgU2V0KCk7XG5cbiAgdmFyIGluc2VydEl0ZW0gPSBmdW5jdGlvbiBpbnNlcnRJdGVtKGl0ZW0pIHtcbiAgICByZXR1cm4gc2V0LmFkZChpdGVtKTtcbiAgfTtcblxuICBpdGVtc0EuZm9yRWFjaChpbnNlcnRJdGVtKTtcbiAgaXRlbXNCLmZvckVhY2goaW5zZXJ0SXRlbSk7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgc2V0LmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiByZXN1bHQucHVzaChrZXkpO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn0iLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmltcG9ydCB7IHVuaW9uLCB3aXRob3V0IH0gZnJvbSAnLi91dGlscy9qc191dGlscyc7XG5leHBvcnQgdmFyIEVudGVyTGVhdmVDb3VudGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRW50ZXJMZWF2ZUNvdW50ZXIoaXNOb2RlSW5Eb2N1bWVudCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFbnRlckxlYXZlQ291bnRlcik7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJlbnRlcmVkXCIsIFtdKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlzTm9kZUluRG9jdW1lbnRcIiwgdm9pZCAwKTtcblxuICAgIHRoaXMuaXNOb2RlSW5Eb2N1bWVudCA9IGlzTm9kZUluRG9jdW1lbnQ7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRW50ZXJMZWF2ZUNvdW50ZXIsIFt7XG4gICAga2V5OiBcImVudGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVudGVyKGVudGVyaW5nTm9kZSkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdmFyIHByZXZpb3VzTGVuZ3RoID0gdGhpcy5lbnRlcmVkLmxlbmd0aDtcblxuICAgICAgdmFyIGlzTm9kZUVudGVyZWQgPSBmdW5jdGlvbiBpc05vZGVFbnRlcmVkKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmlzTm9kZUluRG9jdW1lbnQobm9kZSkgJiYgKCFub2RlLmNvbnRhaW5zIHx8IG5vZGUuY29udGFpbnMoZW50ZXJpbmdOb2RlKSk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLmVudGVyZWQgPSB1bmlvbih0aGlzLmVudGVyZWQuZmlsdGVyKGlzTm9kZUVudGVyZWQpLCBbZW50ZXJpbmdOb2RlXSk7XG4gICAgICByZXR1cm4gcHJldmlvdXNMZW5ndGggPT09IDAgJiYgdGhpcy5lbnRlcmVkLmxlbmd0aCA+IDA7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImxlYXZlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxlYXZlKGxlYXZpbmdOb2RlKSB7XG4gICAgICB2YXIgcHJldmlvdXNMZW5ndGggPSB0aGlzLmVudGVyZWQubGVuZ3RoO1xuICAgICAgdGhpcy5lbnRlcmVkID0gd2l0aG91dCh0aGlzLmVudGVyZWQuZmlsdGVyKHRoaXMuaXNOb2RlSW5Eb2N1bWVudCksIGxlYXZpbmdOb2RlKTtcbiAgICAgIHJldHVybiBwcmV2aW91c0xlbmd0aCA+IDAgJiYgdGhpcy5lbnRlcmVkLmxlbmd0aCA9PT0gMDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVzZXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICB0aGlzLmVudGVyZWQgPSBbXTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRW50ZXJMZWF2ZUNvdW50ZXI7XG59KCk7IiwiaW1wb3J0IHsgbWVtb2l6ZSB9IGZyb20gJy4vdXRpbHMvanNfdXRpbHMnO1xuZXhwb3J0IHZhciBpc0ZpcmVmb3ggPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIC9maXJlZm94L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbn0pO1xuZXhwb3J0IHZhciBpc1NhZmFyaSA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gQm9vbGVhbih3aW5kb3cuc2FmYXJpKTtcbn0pOyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuZXhwb3J0IHZhciBNb25vdG9uaWNJbnRlcnBvbGFudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIE1vbm90b25pY0ludGVycG9sYW50KHhzLCB5cykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNb25vdG9uaWNJbnRlcnBvbGFudCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ4c1wiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwieXNcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImMxc1wiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYzJzXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjM3NcIiwgdm9pZCAwKTtcblxuICAgIHZhciBsZW5ndGggPSB4cy5sZW5ndGg7IC8vIFJlYXJyYW5nZSB4cyBhbmQgeXMgc28gdGhhdCB4cyBpcyBzb3J0ZWRcblxuICAgIHZhciBpbmRleGVzID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpbmRleGVzLnB1c2goaSk7XG4gICAgfVxuXG4gICAgaW5kZXhlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4geHNbYV0gPCB4c1tiXSA/IC0xIDogMTtcbiAgICB9KTsgLy8gR2V0IGNvbnNlY3V0aXZlIGRpZmZlcmVuY2VzIGFuZCBzbG9wZXNcblxuICAgIHZhciBkeXMgPSBbXTtcbiAgICB2YXIgZHhzID0gW107XG4gICAgdmFyIG1zID0gW107XG4gICAgdmFyIGR4O1xuICAgIHZhciBkeTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsZW5ndGggLSAxOyBfaSsrKSB7XG4gICAgICBkeCA9IHhzW19pICsgMV0gLSB4c1tfaV07XG4gICAgICBkeSA9IHlzW19pICsgMV0gLSB5c1tfaV07XG4gICAgICBkeHMucHVzaChkeCk7XG4gICAgICBkeXMucHVzaChkeSk7XG4gICAgICBtcy5wdXNoKGR5IC8gZHgpO1xuICAgIH0gLy8gR2V0IGRlZ3JlZS0xIGNvZWZmaWNpZW50c1xuXG5cbiAgICB2YXIgYzFzID0gW21zWzBdXTtcblxuICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IGR4cy5sZW5ndGggLSAxOyBfaTIrKykge1xuICAgICAgdmFyIG0yID0gbXNbX2kyXTtcbiAgICAgIHZhciBtTmV4dCA9IG1zW19pMiArIDFdO1xuXG4gICAgICBpZiAobTIgKiBtTmV4dCA8PSAwKSB7XG4gICAgICAgIGMxcy5wdXNoKDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZHggPSBkeHNbX2kyXTtcbiAgICAgICAgdmFyIGR4TmV4dCA9IGR4c1tfaTIgKyAxXTtcbiAgICAgICAgdmFyIGNvbW1vbiA9IGR4ICsgZHhOZXh0O1xuICAgICAgICBjMXMucHVzaCgzICogY29tbW9uIC8gKChjb21tb24gKyBkeE5leHQpIC8gbTIgKyAoY29tbW9uICsgZHgpIC8gbU5leHQpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjMXMucHVzaChtc1ttcy5sZW5ndGggLSAxXSk7IC8vIEdldCBkZWdyZWUtMiBhbmQgZGVncmVlLTMgY29lZmZpY2llbnRzXG5cbiAgICB2YXIgYzJzID0gW107XG4gICAgdmFyIGMzcyA9IFtdO1xuICAgIHZhciBtO1xuXG4gICAgZm9yICh2YXIgX2kzID0gMDsgX2kzIDwgYzFzLmxlbmd0aCAtIDE7IF9pMysrKSB7XG4gICAgICBtID0gbXNbX2kzXTtcbiAgICAgIHZhciBjMSA9IGMxc1tfaTNdO1xuICAgICAgdmFyIGludkR4ID0gMSAvIGR4c1tfaTNdO1xuXG4gICAgICB2YXIgX2NvbW1vbiA9IGMxICsgYzFzW19pMyArIDFdIC0gbSAtIG07XG5cbiAgICAgIGMycy5wdXNoKChtIC0gYzEgLSBfY29tbW9uKSAqIGludkR4KTtcbiAgICAgIGMzcy5wdXNoKF9jb21tb24gKiBpbnZEeCAqIGludkR4KTtcbiAgICB9XG5cbiAgICB0aGlzLnhzID0geHM7XG4gICAgdGhpcy55cyA9IHlzO1xuICAgIHRoaXMuYzFzID0gYzFzO1xuICAgIHRoaXMuYzJzID0gYzJzO1xuICAgIHRoaXMuYzNzID0gYzNzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKE1vbm90b25pY0ludGVycG9sYW50LCBbe1xuICAgIGtleTogXCJpbnRlcnBvbGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbnRlcnBvbGF0ZSh4KSB7XG4gICAgICB2YXIgeHMgPSB0aGlzLnhzLFxuICAgICAgICAgIHlzID0gdGhpcy55cyxcbiAgICAgICAgICBjMXMgPSB0aGlzLmMxcyxcbiAgICAgICAgICBjMnMgPSB0aGlzLmMycyxcbiAgICAgICAgICBjM3MgPSB0aGlzLmMzczsgLy8gVGhlIHJpZ2h0bW9zdCBwb2ludCBpbiB0aGUgZGF0YXNldCBzaG91bGQgZ2l2ZSBhbiBleGFjdCByZXN1bHRcblxuICAgICAgdmFyIGkgPSB4cy5sZW5ndGggLSAxO1xuXG4gICAgICBpZiAoeCA9PT0geHNbaV0pIHtcbiAgICAgICAgcmV0dXJuIHlzW2ldO1xuICAgICAgfSAvLyBTZWFyY2ggZm9yIHRoZSBpbnRlcnZhbCB4IGlzIGluLCByZXR1cm5pbmcgdGhlIGNvcnJlc3BvbmRpbmcgeSBpZiB4IGlzIG9uZSBvZiB0aGUgb3JpZ2luYWwgeHNcblxuXG4gICAgICB2YXIgbG93ID0gMDtcbiAgICAgIHZhciBoaWdoID0gYzNzLmxlbmd0aCAtIDE7XG4gICAgICB2YXIgbWlkO1xuXG4gICAgICB3aGlsZSAobG93IDw9IGhpZ2gpIHtcbiAgICAgICAgbWlkID0gTWF0aC5mbG9vcigwLjUgKiAobG93ICsgaGlnaCkpO1xuICAgICAgICB2YXIgeEhlcmUgPSB4c1ttaWRdO1xuXG4gICAgICAgIGlmICh4SGVyZSA8IHgpIHtcbiAgICAgICAgICBsb3cgPSBtaWQgKyAxO1xuICAgICAgICB9IGVsc2UgaWYgKHhIZXJlID4geCkge1xuICAgICAgICAgIGhpZ2ggPSBtaWQgLSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB5c1ttaWRdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGkgPSBNYXRoLm1heCgwLCBoaWdoKTsgLy8gSW50ZXJwb2xhdGVcblxuICAgICAgdmFyIGRpZmYgPSB4IC0geHNbaV07XG4gICAgICB2YXIgZGlmZlNxID0gZGlmZiAqIGRpZmY7XG4gICAgICByZXR1cm4geXNbaV0gKyBjMXNbaV0gKiBkaWZmICsgYzJzW2ldICogZGlmZlNxICsgYzNzW2ldICogZGlmZiAqIGRpZmZTcTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTW9ub3RvbmljSW50ZXJwb2xhbnQ7XG59KCk7IiwiaW1wb3J0IHsgaXNTYWZhcmksIGlzRmlyZWZveCB9IGZyb20gJy4vQnJvd3NlckRldGVjdG9yJztcbmltcG9ydCB7IE1vbm90b25pY0ludGVycG9sYW50IH0gZnJvbSAnLi9Nb25vdG9uaWNJbnRlcnBvbGFudCc7XG52YXIgRUxFTUVOVF9OT0RFID0gMTtcbmV4cG9ydCBmdW5jdGlvbiBnZXROb2RlQ2xpZW50T2Zmc2V0KG5vZGUpIHtcbiAgdmFyIGVsID0gbm9kZS5ub2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFID8gbm9kZSA6IG5vZGUucGFyZW50RWxlbWVudDtcblxuICBpZiAoIWVsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgX2VsJGdldEJvdW5kaW5nQ2xpZW50ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICB0b3AgPSBfZWwkZ2V0Qm91bmRpbmdDbGllbnQudG9wLFxuICAgICAgbGVmdCA9IF9lbCRnZXRCb3VuZGluZ0NsaWVudC5sZWZ0O1xuXG4gIHJldHVybiB7XG4gICAgeDogbGVmdCxcbiAgICB5OiB0b3BcbiAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFdmVudENsaWVudE9mZnNldChlKSB7XG4gIHJldHVybiB7XG4gICAgeDogZS5jbGllbnRYLFxuICAgIHk6IGUuY2xpZW50WVxuICB9O1xufVxuXG5mdW5jdGlvbiBpc0ltYWdlTm9kZShub2RlKSB7XG4gIHZhciBfZG9jdW1lbnQkZG9jdW1lbnRFbGU7XG5cbiAgcmV0dXJuIG5vZGUubm9kZU5hbWUgPT09ICdJTUcnICYmIChpc0ZpcmVmb3goKSB8fCAhKChfZG9jdW1lbnQkZG9jdW1lbnRFbGUgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpICE9PSBudWxsICYmIF9kb2N1bWVudCRkb2N1bWVudEVsZSAhPT0gdm9pZCAwICYmIF9kb2N1bWVudCRkb2N1bWVudEVsZS5jb250YWlucyhub2RlKSkpO1xufVxuXG5mdW5jdGlvbiBnZXREcmFnUHJldmlld1NpemUoaXNJbWFnZSwgZHJhZ1ByZXZpZXcsIHNvdXJjZVdpZHRoLCBzb3VyY2VIZWlnaHQpIHtcbiAgdmFyIGRyYWdQcmV2aWV3V2lkdGggPSBpc0ltYWdlID8gZHJhZ1ByZXZpZXcud2lkdGggOiBzb3VyY2VXaWR0aDtcbiAgdmFyIGRyYWdQcmV2aWV3SGVpZ2h0ID0gaXNJbWFnZSA/IGRyYWdQcmV2aWV3LmhlaWdodCA6IHNvdXJjZUhlaWdodDsgLy8gV29yayBhcm91bmQgQDJ4IGNvb3JkaW5hdGUgZGlzY3JlcGFuY2llcyBpbiBicm93c2Vyc1xuXG4gIGlmIChpc1NhZmFyaSgpICYmIGlzSW1hZ2UpIHtcbiAgICBkcmFnUHJldmlld0hlaWdodCAvPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICBkcmFnUHJldmlld1dpZHRoIC89IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBkcmFnUHJldmlld1dpZHRoOiBkcmFnUHJldmlld1dpZHRoLFxuICAgIGRyYWdQcmV2aWV3SGVpZ2h0OiBkcmFnUHJldmlld0hlaWdodFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RHJhZ1ByZXZpZXdPZmZzZXQoc291cmNlTm9kZSwgZHJhZ1ByZXZpZXcsIGNsaWVudE9mZnNldCwgYW5jaG9yUG9pbnQsIG9mZnNldFBvaW50KSB7XG4gIC8vIFRoZSBicm93c2VycyB3aWxsIHVzZSB0aGUgaW1hZ2UgaW50cmluc2ljIHNpemUgdW5kZXIgZGlmZmVyZW50IGNvbmRpdGlvbnMuXG4gIC8vIEZpcmVmb3ggb25seSBjYXJlcyBpZiBpdCdzIGFuIGltYWdlLCBidXQgV2ViS2l0IGFsc28gd2FudHMgaXQgdG8gYmUgZGV0YWNoZWQuXG4gIHZhciBpc0ltYWdlID0gaXNJbWFnZU5vZGUoZHJhZ1ByZXZpZXcpO1xuICB2YXIgZHJhZ1ByZXZpZXdOb2RlID0gaXNJbWFnZSA/IHNvdXJjZU5vZGUgOiBkcmFnUHJldmlldztcbiAgdmFyIGRyYWdQcmV2aWV3Tm9kZU9mZnNldEZyb21DbGllbnQgPSBnZXROb2RlQ2xpZW50T2Zmc2V0KGRyYWdQcmV2aWV3Tm9kZSk7XG4gIHZhciBvZmZzZXRGcm9tRHJhZ1ByZXZpZXcgPSB7XG4gICAgeDogY2xpZW50T2Zmc2V0LnggLSBkcmFnUHJldmlld05vZGVPZmZzZXRGcm9tQ2xpZW50LngsXG4gICAgeTogY2xpZW50T2Zmc2V0LnkgLSBkcmFnUHJldmlld05vZGVPZmZzZXRGcm9tQ2xpZW50LnlcbiAgfTtcbiAgdmFyIHNvdXJjZVdpZHRoID0gc291cmNlTm9kZS5vZmZzZXRXaWR0aCxcbiAgICAgIHNvdXJjZUhlaWdodCA9IHNvdXJjZU5vZGUub2Zmc2V0SGVpZ2h0O1xuICB2YXIgYW5jaG9yWCA9IGFuY2hvclBvaW50LmFuY2hvclgsXG4gICAgICBhbmNob3JZID0gYW5jaG9yUG9pbnQuYW5jaG9yWTtcblxuICB2YXIgX2dldERyYWdQcmV2aWV3U2l6ZSA9IGdldERyYWdQcmV2aWV3U2l6ZShpc0ltYWdlLCBkcmFnUHJldmlldywgc291cmNlV2lkdGgsIHNvdXJjZUhlaWdodCksXG4gICAgICBkcmFnUHJldmlld1dpZHRoID0gX2dldERyYWdQcmV2aWV3U2l6ZS5kcmFnUHJldmlld1dpZHRoLFxuICAgICAgZHJhZ1ByZXZpZXdIZWlnaHQgPSBfZ2V0RHJhZ1ByZXZpZXdTaXplLmRyYWdQcmV2aWV3SGVpZ2h0O1xuXG4gIHZhciBjYWxjdWxhdGVZT2Zmc2V0ID0gZnVuY3Rpb24gY2FsY3VsYXRlWU9mZnNldCgpIHtcbiAgICB2YXIgaW50ZXJwb2xhbnRZID0gbmV3IE1vbm90b25pY0ludGVycG9sYW50KFswLCAwLjUsIDFdLCBbLy8gRG9jayB0byB0aGUgdG9wXG4gICAgb2Zmc2V0RnJvbURyYWdQcmV2aWV3LnksIC8vIEFsaWduIGF0IHRoZSBjZW50ZXJcbiAgICBvZmZzZXRGcm9tRHJhZ1ByZXZpZXcueSAvIHNvdXJjZUhlaWdodCAqIGRyYWdQcmV2aWV3SGVpZ2h0LCAvLyBEb2NrIHRvIHRoZSBib3R0b21cbiAgICBvZmZzZXRGcm9tRHJhZ1ByZXZpZXcueSArIGRyYWdQcmV2aWV3SGVpZ2h0IC0gc291cmNlSGVpZ2h0XSk7XG4gICAgdmFyIHkgPSBpbnRlcnBvbGFudFkuaW50ZXJwb2xhdGUoYW5jaG9yWSk7IC8vIFdvcmsgYXJvdW5kIFNhZmFyaSA4IHBvc2l0aW9uaW5nIGJ1Z1xuXG4gICAgaWYgKGlzU2FmYXJpKCkgJiYgaXNJbWFnZSkge1xuICAgICAgLy8gV2UnbGwgaGF2ZSB0byB3YWl0IGZvciBAM3ggdG8gc2VlIGlmIHRoaXMgaXMgZW50aXJlbHkgY29ycmVjdFxuICAgICAgeSArPSAod2luZG93LmRldmljZVBpeGVsUmF0aW8gLSAxKSAqIGRyYWdQcmV2aWV3SGVpZ2h0O1xuICAgIH1cblxuICAgIHJldHVybiB5O1xuICB9O1xuXG4gIHZhciBjYWxjdWxhdGVYT2Zmc2V0ID0gZnVuY3Rpb24gY2FsY3VsYXRlWE9mZnNldCgpIHtcbiAgICAvLyBJbnRlcnBvbGF0ZSBjb29yZGluYXRlcyBkZXBlbmRpbmcgb24gYW5jaG9yIHBvaW50XG4gICAgLy8gSWYgeW91IGtub3cgYSBzaW1wbGVyIHdheSB0byBkbyB0aGlzLCBsZXQgbWUga25vd1xuICAgIHZhciBpbnRlcnBvbGFudFggPSBuZXcgTW9ub3RvbmljSW50ZXJwb2xhbnQoWzAsIDAuNSwgMV0sIFsvLyBEb2NrIHRvIHRoZSBsZWZ0XG4gICAgb2Zmc2V0RnJvbURyYWdQcmV2aWV3LngsIC8vIEFsaWduIGF0IHRoZSBjZW50ZXJcbiAgICBvZmZzZXRGcm9tRHJhZ1ByZXZpZXcueCAvIHNvdXJjZVdpZHRoICogZHJhZ1ByZXZpZXdXaWR0aCwgLy8gRG9jayB0byB0aGUgcmlnaHRcbiAgICBvZmZzZXRGcm9tRHJhZ1ByZXZpZXcueCArIGRyYWdQcmV2aWV3V2lkdGggLSBzb3VyY2VXaWR0aF0pO1xuICAgIHJldHVybiBpbnRlcnBvbGFudFguaW50ZXJwb2xhdGUoYW5jaG9yWCk7XG4gIH07IC8vIEZvcmNlIG9mZnNldHMgaWYgc3BlY2lmaWVkIGluIHRoZSBvcHRpb25zLlxuXG5cbiAgdmFyIG9mZnNldFggPSBvZmZzZXRQb2ludC5vZmZzZXRYLFxuICAgICAgb2Zmc2V0WSA9IG9mZnNldFBvaW50Lm9mZnNldFk7XG4gIHZhciBpc01hbnVhbE9mZnNldFggPSBvZmZzZXRYID09PSAwIHx8IG9mZnNldFg7XG4gIHZhciBpc01hbnVhbE9mZnNldFkgPSBvZmZzZXRZID09PSAwIHx8IG9mZnNldFk7XG4gIHJldHVybiB7XG4gICAgeDogaXNNYW51YWxPZmZzZXRYID8gb2Zmc2V0WCA6IGNhbGN1bGF0ZVhPZmZzZXQoKSxcbiAgICB5OiBpc01hbnVhbE9mZnNldFkgPyBvZmZzZXRZIDogY2FsY3VsYXRlWU9mZnNldCgpXG4gIH07XG59IiwiZXhwb3J0IGZ1bmN0aW9uIGdldERhdGFGcm9tRGF0YVRyYW5zZmVyKGRhdGFUcmFuc2ZlciwgdHlwZXNUb1RyeSwgZGVmYXVsdFZhbHVlKSB7XG4gIHZhciByZXN1bHQgPSB0eXBlc1RvVHJ5LnJlZHVjZShmdW5jdGlvbiAocmVzdWx0U29GYXIsIHR5cGVUb1RyeSkge1xuICAgIHJldHVybiByZXN1bHRTb0ZhciB8fCBkYXRhVHJhbnNmZXIuZ2V0RGF0YSh0eXBlVG9UcnkpO1xuICB9LCAnJyk7XG4gIHJldHVybiByZXN1bHQgIT0gbnVsbCA/IHJlc3VsdCA6IGRlZmF1bHRWYWx1ZTtcbn0iLCJ2YXIgX25hdGl2ZVR5cGVzQ29uZmlnO1xuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5pbXBvcnQgKiBhcyBOYXRpdmVUeXBlcyBmcm9tICcuLi9OYXRpdmVUeXBlcyc7XG5pbXBvcnQgeyBnZXREYXRhRnJvbURhdGFUcmFuc2ZlciB9IGZyb20gJy4vZ2V0RGF0YUZyb21EYXRhVHJhbnNmZXInO1xuZXhwb3J0IHZhciBuYXRpdmVUeXBlc0NvbmZpZyA9IChfbmF0aXZlVHlwZXNDb25maWcgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9uYXRpdmVUeXBlc0NvbmZpZywgTmF0aXZlVHlwZXMuRklMRSwge1xuICBleHBvc2VQcm9wZXJ0aWVzOiB7XG4gICAgZmlsZXM6IGZ1bmN0aW9uIGZpbGVzKGRhdGFUcmFuc2Zlcikge1xuICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRhdGFUcmFuc2Zlci5maWxlcyk7XG4gICAgfSxcbiAgICBpdGVtczogZnVuY3Rpb24gaXRlbXMoZGF0YVRyYW5zZmVyKSB7XG4gICAgICByZXR1cm4gZGF0YVRyYW5zZmVyLml0ZW1zO1xuICAgIH1cbiAgfSxcbiAgbWF0Y2hlc1R5cGVzOiBbJ0ZpbGVzJ11cbn0pLCBfZGVmaW5lUHJvcGVydHkoX25hdGl2ZVR5cGVzQ29uZmlnLCBOYXRpdmVUeXBlcy5IVE1MLCB7XG4gIGV4cG9zZVByb3BlcnRpZXM6IHtcbiAgICBodG1sOiBmdW5jdGlvbiBodG1sKGRhdGFUcmFuc2ZlciwgbWF0Y2hlc1R5cGVzKSB7XG4gICAgICByZXR1cm4gZ2V0RGF0YUZyb21EYXRhVHJhbnNmZXIoZGF0YVRyYW5zZmVyLCBtYXRjaGVzVHlwZXMsICcnKTtcbiAgICB9XG4gIH0sXG4gIG1hdGNoZXNUeXBlczogWydIdG1sJywgJ3RleHQvaHRtbCddXG59KSwgX2RlZmluZVByb3BlcnR5KF9uYXRpdmVUeXBlc0NvbmZpZywgTmF0aXZlVHlwZXMuVVJMLCB7XG4gIGV4cG9zZVByb3BlcnRpZXM6IHtcbiAgICB1cmxzOiBmdW5jdGlvbiB1cmxzKGRhdGFUcmFuc2ZlciwgbWF0Y2hlc1R5cGVzKSB7XG4gICAgICByZXR1cm4gZ2V0RGF0YUZyb21EYXRhVHJhbnNmZXIoZGF0YVRyYW5zZmVyLCBtYXRjaGVzVHlwZXMsICcnKS5zcGxpdCgnXFxuJyk7XG4gICAgfVxuICB9LFxuICBtYXRjaGVzVHlwZXM6IFsnVXJsJywgJ3RleHQvdXJpLWxpc3QnXVxufSksIF9kZWZpbmVQcm9wZXJ0eShfbmF0aXZlVHlwZXNDb25maWcsIE5hdGl2ZVR5cGVzLlRFWFQsIHtcbiAgZXhwb3NlUHJvcGVydGllczoge1xuICAgIHRleHQ6IGZ1bmN0aW9uIHRleHQoZGF0YVRyYW5zZmVyLCBtYXRjaGVzVHlwZXMpIHtcbiAgICAgIHJldHVybiBnZXREYXRhRnJvbURhdGFUcmFuc2ZlcihkYXRhVHJhbnNmZXIsIG1hdGNoZXNUeXBlcywgJycpO1xuICAgIH1cbiAgfSxcbiAgbWF0Y2hlc1R5cGVzOiBbJ1RleHQnLCAndGV4dC9wbGFpbiddXG59KSwgX25hdGl2ZVR5cGVzQ29uZmlnKTsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmV4cG9ydCB2YXIgTmF0aXZlRHJhZ1NvdXJjZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIE5hdGl2ZURyYWdTb3VyY2UoY29uZmlnKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE5hdGl2ZURyYWdTb3VyY2UpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaXRlbVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY29uZmlnXCIsIHZvaWQgMCk7XG5cbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLml0ZW0gPSB7fTtcbiAgICB0aGlzLmluaXRpYWxpemVFeHBvc2VkUHJvcGVydGllcygpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKE5hdGl2ZURyYWdTb3VyY2UsIFt7XG4gICAga2V5OiBcImluaXRpYWxpemVFeHBvc2VkUHJvcGVydGllc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0aWFsaXplRXhwb3NlZFByb3BlcnRpZXMoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBPYmplY3Qua2V5cyh0aGlzLmNvbmZpZy5leHBvc2VQcm9wZXJ0aWVzKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX3RoaXMuaXRlbSwgcHJvcGVydHksIHtcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJCcm93c2VyIGRvZXNuJ3QgYWxsb3cgcmVhZGluZyBcXFwiXCIuY29uY2F0KHByb3BlcnR5LCBcIlxcXCIgdW50aWwgdGhlIGRyb3AgZXZlbnQuXCIpKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwibG9hZERhdGFUcmFuc2ZlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkRGF0YVRyYW5zZmVyKGRhdGFUcmFuc2Zlcikge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIGlmIChkYXRhVHJhbnNmZXIpIHtcbiAgICAgICAgdmFyIG5ld1Byb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5jb25maWcuZXhwb3NlUHJvcGVydGllcykuZm9yRWFjaChmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgICAgICBuZXdQcm9wZXJ0aWVzW3Byb3BlcnR5XSA9IHtcbiAgICAgICAgICAgIHZhbHVlOiBfdGhpczIuY29uZmlnLmV4cG9zZVByb3BlcnRpZXNbcHJvcGVydHldKGRhdGFUcmFuc2ZlciwgX3RoaXMyLmNvbmZpZy5tYXRjaGVzVHlwZXMpLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLml0ZW0sIG5ld1Byb3BlcnRpZXMpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjYW5EcmFnXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNhbkRyYWcoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYmVnaW5EcmFnXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGJlZ2luRHJhZygpIHtcbiAgICAgIHJldHVybiB0aGlzLml0ZW07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzRHJhZ2dpbmdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNEcmFnZ2luZyhtb25pdG9yLCBoYW5kbGUpIHtcbiAgICAgIHJldHVybiBoYW5kbGUgPT09IG1vbml0b3IuZ2V0U291cmNlSWQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZW5kRHJhZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmREcmFnKCkgey8vIGVtcHR5XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIE5hdGl2ZURyYWdTb3VyY2U7XG59KCk7IiwiaW1wb3J0IHsgbmF0aXZlVHlwZXNDb25maWcgfSBmcm9tICcuL25hdGl2ZVR5cGVzQ29uZmlnJztcbmltcG9ydCB7IE5hdGl2ZURyYWdTb3VyY2UgfSBmcm9tICcuL05hdGl2ZURyYWdTb3VyY2UnO1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU5hdGl2ZURyYWdTb3VyY2UodHlwZSwgZGF0YVRyYW5zZmVyKSB7XG4gIHZhciByZXN1bHQgPSBuZXcgTmF0aXZlRHJhZ1NvdXJjZShuYXRpdmVUeXBlc0NvbmZpZ1t0eXBlXSk7XG4gIHJlc3VsdC5sb2FkRGF0YVRyYW5zZmVyKGRhdGFUcmFuc2Zlcik7XG4gIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hOYXRpdmVJdGVtVHlwZShkYXRhVHJhbnNmZXIpIHtcbiAgaWYgKCFkYXRhVHJhbnNmZXIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBkYXRhVHJhbnNmZXJUeXBlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRhdGFUcmFuc2Zlci50eXBlcyB8fCBbXSk7XG4gIHJldHVybiBPYmplY3Qua2V5cyhuYXRpdmVUeXBlc0NvbmZpZykuZmlsdGVyKGZ1bmN0aW9uIChuYXRpdmVJdGVtVHlwZSkge1xuICAgIHZhciBtYXRjaGVzVHlwZXMgPSBuYXRpdmVUeXBlc0NvbmZpZ1tuYXRpdmVJdGVtVHlwZV0ubWF0Y2hlc1R5cGVzO1xuICAgIHJldHVybiBtYXRjaGVzVHlwZXMuc29tZShmdW5jdGlvbiAodCkge1xuICAgICAgcmV0dXJuIGRhdGFUcmFuc2ZlclR5cGVzLmluZGV4T2YodCkgPiAtMTtcbiAgICB9KTtcbiAgfSlbMF0gfHwgbnVsbDtcbn0iLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmV4cG9ydCB2YXIgT3B0aW9uc1JlYWRlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIE9wdGlvbnNSZWFkZXIoZ2xvYmFsQ29udGV4dCwgb3B0aW9ucykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBPcHRpb25zUmVhZGVyKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm93bmVyRG9jdW1lbnRcIiwgbnVsbCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJnbG9iYWxDb250ZXh0XCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcHRpb25zQXJnc1wiLCB2b2lkIDApO1xuXG4gICAgdGhpcy5nbG9iYWxDb250ZXh0ID0gZ2xvYmFsQ29udGV4dDtcbiAgICB0aGlzLm9wdGlvbnNBcmdzID0gb3B0aW9ucztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhPcHRpb25zUmVhZGVyLCBbe1xuICAgIGtleTogXCJ3aW5kb3dcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIGlmICh0aGlzLmdsb2JhbENvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2xvYmFsQ29udGV4dDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZG9jdW1lbnRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHZhciBfdGhpcyRnbG9iYWxDb250ZXh0O1xuXG4gICAgICBpZiAoKF90aGlzJGdsb2JhbENvbnRleHQgPSB0aGlzLmdsb2JhbENvbnRleHQpICE9PSBudWxsICYmIF90aGlzJGdsb2JhbENvbnRleHQgIT09IHZvaWQgMCAmJiBfdGhpcyRnbG9iYWxDb250ZXh0LmRvY3VtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdsb2JhbENvbnRleHQuZG9jdW1lbnQ7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMud2luZG93KSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5kb2N1bWVudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJvb3RFbGVtZW50XCIsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICB2YXIgX3RoaXMkb3B0aW9uc0FyZ3M7XG5cbiAgICAgIHJldHVybiAoKF90aGlzJG9wdGlvbnNBcmdzID0gdGhpcy5vcHRpb25zQXJncykgPT09IG51bGwgfHwgX3RoaXMkb3B0aW9uc0FyZ3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG9wdGlvbnNBcmdzLnJvb3RFbGVtZW50KSB8fCB0aGlzLndpbmRvdztcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gT3B0aW9uc1JlYWRlcjtcbn0oKTsiLCJmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSB7IHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsgfSBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH1cblxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuaW1wb3J0IHsgRW50ZXJMZWF2ZUNvdW50ZXIgfSBmcm9tICcuL0VudGVyTGVhdmVDb3VudGVyJztcbmltcG9ydCB7IGdldE5vZGVDbGllbnRPZmZzZXQsIGdldEV2ZW50Q2xpZW50T2Zmc2V0LCBnZXREcmFnUHJldmlld09mZnNldCB9IGZyb20gJy4vT2Zmc2V0VXRpbHMnO1xuaW1wb3J0IHsgY3JlYXRlTmF0aXZlRHJhZ1NvdXJjZSwgbWF0Y2hOYXRpdmVJdGVtVHlwZSB9IGZyb20gJy4vTmF0aXZlRHJhZ1NvdXJjZXMnO1xuaW1wb3J0ICogYXMgTmF0aXZlVHlwZXMgZnJvbSAnLi9OYXRpdmVUeXBlcyc7XG5pbXBvcnQgeyBPcHRpb25zUmVhZGVyIH0gZnJvbSAnLi9PcHRpb25zUmVhZGVyJztcbmV4cG9ydCB2YXIgSFRNTDVCYWNrZW5kSW1wbCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8vIFJlYWN0LURuZCBDb21wb25lbnRzXG4gIC8vIEludGVybmFsIFN0YXRlXG4gIGZ1bmN0aW9uIEhUTUw1QmFja2VuZEltcGwobWFuYWdlciwgZ2xvYmFsQ29udGV4dCwgb3B0aW9ucykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSFRNTDVCYWNrZW5kSW1wbCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcHRpb25zXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJhY3Rpb25zXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb25pdG9yXCIsIHZvaWQgMCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZWdpc3RyeVwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZW50ZXJMZWF2ZUNvdW50ZXJcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNvdXJjZVByZXZpZXdOb2Rlc1wiLCBuZXcgTWFwKCkpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwic291cmNlUHJldmlld05vZGVPcHRpb25zXCIsIG5ldyBNYXAoKSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJzb3VyY2VOb2Rlc1wiLCBuZXcgTWFwKCkpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwic291cmNlTm9kZU9wdGlvbnNcIiwgbmV3IE1hcCgpKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRyYWdTdGFydFNvdXJjZUlkc1wiLCBudWxsKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRyb3BUYXJnZXRJZHNcIiwgW10pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZHJhZ0VudGVyVGFyZ2V0SWRzXCIsIFtdKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImN1cnJlbnROYXRpdmVTb3VyY2VcIiwgbnVsbCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjdXJyZW50TmF0aXZlSGFuZGxlXCIsIG51bGwpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY3VycmVudERyYWdTb3VyY2VOb2RlXCIsIG51bGwpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYWx0S2V5UHJlc3NlZFwiLCBmYWxzZSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb3VzZU1vdmVUaW1lb3V0VGltZXJcIiwgbnVsbCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJhc3luY0VuZERyYWdGcmFtZUlkXCIsIG51bGwpO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZHJhZ092ZXJUYXJnZXRJZHNcIiwgbnVsbCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJnZXRTb3VyY2VDbGllbnRPZmZzZXRcIiwgZnVuY3Rpb24gKHNvdXJjZUlkKSB7XG4gICAgICB2YXIgc291cmNlID0gX3RoaXMuc291cmNlTm9kZXMuZ2V0KHNvdXJjZUlkKTtcblxuICAgICAgcmV0dXJuIHNvdXJjZSAmJiBnZXROb2RlQ2xpZW50T2Zmc2V0KHNvdXJjZSkgfHwgbnVsbDtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVuZERyYWdOYXRpdmVJdGVtXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghX3RoaXMuaXNEcmFnZ2luZ05hdGl2ZUl0ZW0oKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIF90aGlzLmFjdGlvbnMuZW5kRHJhZygpO1xuXG4gICAgICBpZiAoX3RoaXMuY3VycmVudE5hdGl2ZUhhbmRsZSkge1xuICAgICAgICBfdGhpcy5yZWdpc3RyeS5yZW1vdmVTb3VyY2UoX3RoaXMuY3VycmVudE5hdGl2ZUhhbmRsZSk7XG4gICAgICB9XG5cbiAgICAgIF90aGlzLmN1cnJlbnROYXRpdmVIYW5kbGUgPSBudWxsO1xuICAgICAgX3RoaXMuY3VycmVudE5hdGl2ZVNvdXJjZSA9IG51bGw7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJpc05vZGVJbkRvY3VtZW50XCIsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAvLyBDaGVjayB0aGUgbm9kZSBlaXRoZXIgaW4gdGhlIG1haW4gZG9jdW1lbnQgb3IgaW4gdGhlIGN1cnJlbnQgY29udGV4dFxuICAgICAgcmV0dXJuIEJvb2xlYW4obm9kZSAmJiBfdGhpcy5kb2N1bWVudCAmJiBfdGhpcy5kb2N1bWVudC5ib2R5ICYmIF90aGlzLmRvY3VtZW50LmJvZHkuY29udGFpbnMobm9kZSkpO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZW5kRHJhZ0lmU291cmNlV2FzUmVtb3ZlZEZyb21ET01cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG5vZGUgPSBfdGhpcy5jdXJyZW50RHJhZ1NvdXJjZU5vZGU7XG5cbiAgICAgIGlmIChub2RlID09IG51bGwgfHwgX3RoaXMuaXNOb2RlSW5Eb2N1bWVudChub2RlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChfdGhpcy5jbGVhckN1cnJlbnREcmFnU291cmNlTm9kZSgpICYmIF90aGlzLm1vbml0b3IuaXNEcmFnZ2luZygpKSB7XG4gICAgICAgIF90aGlzLmFjdGlvbnMuZW5kRHJhZygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFuZGxlVG9wRHJhZ1N0YXJ0Q2FwdHVyZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5jbGVhckN1cnJlbnREcmFnU291cmNlTm9kZSgpO1xuXG4gICAgICBfdGhpcy5kcmFnU3RhcnRTb3VyY2VJZHMgPSBbXTtcbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhbmRsZVRvcERyYWdTdGFydFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBkcmFnU3RhcnRTb3VyY2VJZHMgPSBfdGhpcy5kcmFnU3RhcnRTb3VyY2VJZHM7XG4gICAgICBfdGhpcy5kcmFnU3RhcnRTb3VyY2VJZHMgPSBudWxsO1xuICAgICAgdmFyIGNsaWVudE9mZnNldCA9IGdldEV2ZW50Q2xpZW50T2Zmc2V0KGUpOyAvLyBBdm9pZCBjcmFzaGluZyBpZiB3ZSBtaXNzZWQgYSBkcm9wIGV2ZW50IG9yIG91ciBwcmV2aW91cyBkcmFnIGRpZWRcblxuICAgICAgaWYgKF90aGlzLm1vbml0b3IuaXNEcmFnZ2luZygpKSB7XG4gICAgICAgIF90aGlzLmFjdGlvbnMuZW5kRHJhZygpO1xuICAgICAgfSAvLyBEb24ndCBwdWJsaXNoIHRoZSBzb3VyY2UganVzdCB5ZXQgKHNlZSB3aHkgYmVsb3cpXG5cblxuICAgICAgX3RoaXMuYWN0aW9ucy5iZWdpbkRyYWcoZHJhZ1N0YXJ0U291cmNlSWRzIHx8IFtdLCB7XG4gICAgICAgIHB1Ymxpc2hTb3VyY2U6IGZhbHNlLFxuICAgICAgICBnZXRTb3VyY2VDbGllbnRPZmZzZXQ6IF90aGlzLmdldFNvdXJjZUNsaWVudE9mZnNldCxcbiAgICAgICAgY2xpZW50T2Zmc2V0OiBjbGllbnRPZmZzZXRcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgZGF0YVRyYW5zZmVyID0gZS5kYXRhVHJhbnNmZXI7XG4gICAgICB2YXIgbmF0aXZlVHlwZSA9IG1hdGNoTmF0aXZlSXRlbVR5cGUoZGF0YVRyYW5zZmVyKTtcblxuICAgICAgaWYgKF90aGlzLm1vbml0b3IuaXNEcmFnZ2luZygpKSB7XG4gICAgICAgIGlmIChkYXRhVHJhbnNmZXIgJiYgdHlwZW9mIGRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAvLyBVc2UgY3VzdG9tIGRyYWcgaW1hZ2UgaWYgdXNlciBzcGVjaWZpZXMgaXQuXG4gICAgICAgICAgLy8gSWYgY2hpbGQgZHJhZyBzb3VyY2UgcmVmdXNlcyBkcmFnIGJ1dCBwYXJlbnQgYWdyZWVzLFxuICAgICAgICAgIC8vIHVzZSBwYXJlbnQncyBub2RlIGFzIGRyYWcgaW1hZ2UuIE5laXRoZXIgd29ya3MgaW4gSUUgdGhvdWdoLlxuICAgICAgICAgIHZhciBzb3VyY2VJZCA9IF90aGlzLm1vbml0b3IuZ2V0U291cmNlSWQoKTtcblxuICAgICAgICAgIHZhciBzb3VyY2VOb2RlID0gX3RoaXMuc291cmNlTm9kZXMuZ2V0KHNvdXJjZUlkKTtcblxuICAgICAgICAgIHZhciBkcmFnUHJldmlldyA9IF90aGlzLnNvdXJjZVByZXZpZXdOb2Rlcy5nZXQoc291cmNlSWQpIHx8IHNvdXJjZU5vZGU7XG5cbiAgICAgICAgICBpZiAoZHJhZ1ByZXZpZXcpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyRnZXRDdXJyZW50U291cmMgPSBfdGhpcy5nZXRDdXJyZW50U291cmNlUHJldmlld05vZGVPcHRpb25zKCksXG4gICAgICAgICAgICAgICAgYW5jaG9yWCA9IF90aGlzJGdldEN1cnJlbnRTb3VyYy5hbmNob3JYLFxuICAgICAgICAgICAgICAgIGFuY2hvclkgPSBfdGhpcyRnZXRDdXJyZW50U291cmMuYW5jaG9yWSxcbiAgICAgICAgICAgICAgICBvZmZzZXRYID0gX3RoaXMkZ2V0Q3VycmVudFNvdXJjLm9mZnNldFgsXG4gICAgICAgICAgICAgICAgb2Zmc2V0WSA9IF90aGlzJGdldEN1cnJlbnRTb3VyYy5vZmZzZXRZO1xuXG4gICAgICAgICAgICB2YXIgYW5jaG9yUG9pbnQgPSB7XG4gICAgICAgICAgICAgIGFuY2hvclg6IGFuY2hvclgsXG4gICAgICAgICAgICAgIGFuY2hvclk6IGFuY2hvcllcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgb2Zmc2V0UG9pbnQgPSB7XG4gICAgICAgICAgICAgIG9mZnNldFg6IG9mZnNldFgsXG4gICAgICAgICAgICAgIG9mZnNldFk6IG9mZnNldFlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZHJhZ1ByZXZpZXdPZmZzZXQgPSBnZXREcmFnUHJldmlld09mZnNldChzb3VyY2VOb2RlLCBkcmFnUHJldmlldywgY2xpZW50T2Zmc2V0LCBhbmNob3JQb2ludCwgb2Zmc2V0UG9pbnQpO1xuICAgICAgICAgICAgZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShkcmFnUHJldmlldywgZHJhZ1ByZXZpZXdPZmZzZXQueCwgZHJhZ1ByZXZpZXdPZmZzZXQueSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBGaXJlZm94IHdvbid0IGRyYWcgd2l0aG91dCBzZXR0aW5nIGRhdGFcbiAgICAgICAgICBkYXRhVHJhbnNmZXIgPT09IG51bGwgfHwgZGF0YVRyYW5zZmVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhVHJhbnNmZXIuc2V0RGF0YSgnYXBwbGljYXRpb24vanNvbicsIHt9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7Ly8gSUUgZG9lc24ndCBzdXBwb3J0IE1JTUUgdHlwZXMgaW4gc2V0RGF0YVxuICAgICAgICB9IC8vIFN0b3JlIGRyYWcgc291cmNlIG5vZGUgc28gd2UgY2FuIGNoZWNrIHdoZXRoZXJcbiAgICAgICAgLy8gaXQgaXMgcmVtb3ZlZCBmcm9tIERPTSBhbmQgdHJpZ2dlciBlbmREcmFnIG1hbnVhbGx5LlxuXG5cbiAgICAgICAgX3RoaXMuc2V0Q3VycmVudERyYWdTb3VyY2VOb2RlKGUudGFyZ2V0KTsgLy8gTm93IHdlIGFyZSByZWFkeSB0byBwdWJsaXNoIHRoZSBkcmFnIHNvdXJjZS4uIG9yIGFyZSB3ZSBub3Q/XG5cblxuICAgICAgICB2YXIgX3RoaXMkZ2V0Q3VycmVudFNvdXJjMiA9IF90aGlzLmdldEN1cnJlbnRTb3VyY2VQcmV2aWV3Tm9kZU9wdGlvbnMoKSxcbiAgICAgICAgICAgIGNhcHR1cmVEcmFnZ2luZ1N0YXRlID0gX3RoaXMkZ2V0Q3VycmVudFNvdXJjMi5jYXB0dXJlRHJhZ2dpbmdTdGF0ZTtcblxuICAgICAgICBpZiAoIWNhcHR1cmVEcmFnZ2luZ1N0YXRlKSB7XG4gICAgICAgICAgLy8gVXN1YWxseSB3ZSB3YW50IHRvIHB1Ymxpc2ggaXQgaW4gdGhlIG5leHQgdGljayBzbyB0aGF0IGJyb3dzZXJcbiAgICAgICAgICAvLyBpcyBhYmxlIHRvIHNjcmVlbnNob3QgdGhlIGN1cnJlbnQgKG5vdCB5ZXQgZHJhZ2dpbmcpIHN0YXRlLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gSXQgYWxzbyBuZWF0bHkgYXZvaWRzIGEgc2l0dWF0aW9uIHdoZXJlIHJlbmRlcigpIHJldHVybnMgbnVsbFxuICAgICAgICAgIC8vIGluIHRoZSBzYW1lIHRpY2sgZm9yIHRoZSBzb3VyY2UgZWxlbWVudCwgYW5kIGJyb3dzZXIgZnJlYWtzIG91dC5cbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5hY3Rpb25zLnB1Ymxpc2hEcmFnU291cmNlKCk7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSW4gc29tZSBjYXNlcyB0aGUgdXNlciBtYXkgd2FudCB0byBvdmVycmlkZSB0aGlzIGJlaGF2aW9yLCBlLmcuXG4gICAgICAgICAgLy8gdG8gd29yayBhcm91bmQgSUUgbm90IHN1cHBvcnRpbmcgY3VzdG9tIGRyYWcgcHJldmlld3MuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBXaGVuIHVzaW5nIGEgY3VzdG9tIGRyYWcgbGF5ZXIsIHRoZSBvbmx5IHdheSB0byBwcmV2ZW50XG4gICAgICAgICAgLy8gdGhlIGRlZmF1bHQgZHJhZyBwcmV2aWV3IGZyb20gZHJhd2luZyBpbiBJRSBpcyB0byBzY3JlZW5zaG90XG4gICAgICAgICAgLy8gdGhlIGRyYWdnaW5nIHN0YXRlIGluIHdoaWNoIHRoZSBub2RlIGl0c2VsZiBoYXMgemVybyBvcGFjaXR5XG4gICAgICAgICAgLy8gYW5kIGhlaWdodC4gSW4gdGhpcyBjYXNlLCB0aG91Z2gsIHJldHVybmluZyBudWxsIGZyb20gcmVuZGVyKClcbiAgICAgICAgICAvLyB3aWxsIGFicnVwdGx5IGVuZCB0aGUgZHJhZ2dpbmcsIHdoaWNoIGlzIG5vdCBvYnZpb3VzLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gVGhpcyBpcyB0aGUgcmVhc29uIHN1Y2ggYmVoYXZpb3IgaXMgc3RyaWN0bHkgb3B0LWluLlxuICAgICAgICAgIF90aGlzLmFjdGlvbnMucHVibGlzaERyYWdTb3VyY2UoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChuYXRpdmVUeXBlKSB7XG4gICAgICAgIC8vIEEgbmF0aXZlIGl0ZW0gKHN1Y2ggYXMgVVJMKSBkcmFnZ2VkIGZyb20gaW5zaWRlIHRoZSBkb2N1bWVudFxuICAgICAgICBfdGhpcy5iZWdpbkRyYWdOYXRpdmVJdGVtKG5hdGl2ZVR5cGUpO1xuICAgICAgfSBlbHNlIGlmIChkYXRhVHJhbnNmZXIgJiYgIWRhdGFUcmFuc2Zlci50eXBlcyAmJiAoZS50YXJnZXQgJiYgIWUudGFyZ2V0Lmhhc0F0dHJpYnV0ZSB8fCAhZS50YXJnZXQuaGFzQXR0cmlidXRlKCdkcmFnZ2FibGUnKSkpIHtcbiAgICAgICAgLy8gTG9va3MgbGlrZSBhIFNhZmFyaSBidWc6IGRhdGFUcmFuc2Zlci50eXBlcyBpcyBudWxsLCBidXQgdGhlcmUgd2FzIG5vIGRyYWdnYWJsZS5cbiAgICAgICAgLy8gSnVzdCBsZXQgaXQgZHJhZy4gSXQncyBhIG5hdGl2ZSB0eXBlIChVUkwgb3IgdGV4dCkgYW5kIHdpbGwgYmUgcGlja2VkIHVwIGluXG4gICAgICAgIC8vIGRyYWdlbnRlciBoYW5kbGVyLlxuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJZiBieSB0aGlzIHRpbWUgbm8gZHJhZyBzb3VyY2UgcmVhY3RlZCwgdGVsbCBicm93c2VyIG5vdCB0byBkcmFnLlxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYW5kbGVUb3BEcmFnRW5kQ2FwdHVyZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoX3RoaXMuY2xlYXJDdXJyZW50RHJhZ1NvdXJjZU5vZGUoKSAmJiBfdGhpcy5tb25pdG9yLmlzRHJhZ2dpbmcoKSkge1xuICAgICAgICAvLyBGaXJlZm94IGNhbiBkaXNwYXRjaCB0aGlzIGV2ZW50IGluIGFuIGluZmluaXRlIGxvb3BcbiAgICAgICAgLy8gaWYgZHJhZ2VuZCBoYW5kbGVyIGRvZXMgc29tZXRoaW5nIGxpa2Ugc2hvd2luZyBhbiBhbGVydC5cbiAgICAgICAgLy8gT25seSBwcm9jZWVkIGlmIHdlIGhhdmUgbm90IGhhbmRsZWQgaXQgYWxyZWFkeS5cbiAgICAgICAgX3RoaXMuYWN0aW9ucy5lbmREcmFnKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYW5kbGVUb3BEcmFnRW50ZXJDYXB0dXJlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5kcmFnRW50ZXJUYXJnZXRJZHMgPSBbXTtcblxuICAgICAgdmFyIGlzRmlyc3RFbnRlciA9IF90aGlzLmVudGVyTGVhdmVDb3VudGVyLmVudGVyKGUudGFyZ2V0KTtcblxuICAgICAgaWYgKCFpc0ZpcnN0RW50ZXIgfHwgX3RoaXMubW9uaXRvci5pc0RyYWdnaW5nKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgZGF0YVRyYW5zZmVyID0gZS5kYXRhVHJhbnNmZXI7XG4gICAgICB2YXIgbmF0aXZlVHlwZSA9IG1hdGNoTmF0aXZlSXRlbVR5cGUoZGF0YVRyYW5zZmVyKTtcblxuICAgICAgaWYgKG5hdGl2ZVR5cGUpIHtcbiAgICAgICAgLy8gQSBuYXRpdmUgaXRlbSAoc3VjaCBhcyBmaWxlIG9yIFVSTCkgZHJhZ2dlZCBmcm9tIG91dHNpZGUgdGhlIGRvY3VtZW50XG4gICAgICAgIF90aGlzLmJlZ2luRHJhZ05hdGl2ZUl0ZW0obmF0aXZlVHlwZSwgZGF0YVRyYW5zZmVyKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhbmRsZVRvcERyYWdFbnRlclwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIGRyYWdFbnRlclRhcmdldElkcyA9IF90aGlzLmRyYWdFbnRlclRhcmdldElkcztcbiAgICAgIF90aGlzLmRyYWdFbnRlclRhcmdldElkcyA9IFtdO1xuXG4gICAgICBpZiAoIV90aGlzLm1vbml0b3IuaXNEcmFnZ2luZygpKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgcHJvYmFibHkgYSBuYXRpdmUgaXRlbSB0eXBlIHdlIGRvbid0IHVuZGVyc3RhbmQuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgX3RoaXMuYWx0S2V5UHJlc3NlZCA9IGUuYWx0S2V5OyAvLyBJZiB0aGUgdGFyZ2V0IGNoYW5nZXMgcG9zaXRpb24gYXMgdGhlIHJlc3VsdCBvZiBgZHJhZ2VudGVyYCwgYGRyYWdvdmVyYCBtaWdodCBzdGlsbFxuICAgICAgLy8gZ2V0IGRpc3BhdGNoZWQgZGVzcGl0ZSB0YXJnZXQgYmVpbmcgbm8gbG9uZ2VyIHRoZXJlLiBUaGUgZWFzeSBzb2x1dGlvbiBpcyB0byBjaGVja1xuICAgICAgLy8gd2hldGhlciB0aGVyZSBhY3R1YWxseSBpcyBhIHRhcmdldCBiZWZvcmUgZmlyaW5nIGBob3ZlcmAuXG5cbiAgICAgIGlmIChkcmFnRW50ZXJUYXJnZXRJZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBfdGhpcy5hY3Rpb25zLmhvdmVyKGRyYWdFbnRlclRhcmdldElkcywge1xuICAgICAgICAgIGNsaWVudE9mZnNldDogZ2V0RXZlbnRDbGllbnRPZmZzZXQoZSlcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBjYW5Ecm9wID0gZHJhZ0VudGVyVGFyZ2V0SWRzLnNvbWUoZnVuY3Rpb24gKHRhcmdldElkKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5tb25pdG9yLmNhbkRyb3BPblRhcmdldCh0YXJnZXRJZCk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGNhbkRyb3ApIHtcbiAgICAgICAgLy8gSUUgcmVxdWlyZXMgdGhpcyB0byBmaXJlIGRyYWdvdmVyIGV2ZW50c1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgaWYgKGUuZGF0YVRyYW5zZmVyKSB7XG4gICAgICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9IF90aGlzLmdldEN1cnJlbnREcm9wRWZmZWN0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhbmRsZVRvcERyYWdPdmVyQ2FwdHVyZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5kcmFnT3ZlclRhcmdldElkcyA9IFtdO1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFuZGxlVG9wRHJhZ092ZXJcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBkcmFnT3ZlclRhcmdldElkcyA9IF90aGlzLmRyYWdPdmVyVGFyZ2V0SWRzO1xuICAgICAgX3RoaXMuZHJhZ092ZXJUYXJnZXRJZHMgPSBbXTtcblxuICAgICAgaWYgKCFfdGhpcy5tb25pdG9yLmlzRHJhZ2dpbmcoKSkge1xuICAgICAgICAvLyBUaGlzIGlzIHByb2JhYmx5IGEgbmF0aXZlIGl0ZW0gdHlwZSB3ZSBkb24ndCB1bmRlcnN0YW5kLlxuICAgICAgICAvLyBQcmV2ZW50IGRlZmF1bHQgXCJkcm9wIGFuZCBibG93IGF3YXkgdGhlIHdob2xlIGRvY3VtZW50XCIgYWN0aW9uLlxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgaWYgKGUuZGF0YVRyYW5zZmVyKSB7XG4gICAgICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdub25lJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgX3RoaXMuYWx0S2V5UHJlc3NlZCA9IGUuYWx0S2V5O1xuXG4gICAgICBfdGhpcy5hY3Rpb25zLmhvdmVyKGRyYWdPdmVyVGFyZ2V0SWRzIHx8IFtdLCB7XG4gICAgICAgIGNsaWVudE9mZnNldDogZ2V0RXZlbnRDbGllbnRPZmZzZXQoZSlcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgY2FuRHJvcCA9IChkcmFnT3ZlclRhcmdldElkcyB8fCBbXSkuc29tZShmdW5jdGlvbiAodGFyZ2V0SWQpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLm1vbml0b3IuY2FuRHJvcE9uVGFyZ2V0KHRhcmdldElkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoY2FuRHJvcCkge1xuICAgICAgICAvLyBTaG93IHVzZXItc3BlY2lmaWVkIGRyb3AgZWZmZWN0LlxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgaWYgKGUuZGF0YVRyYW5zZmVyKSB7XG4gICAgICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9IF90aGlzLmdldEN1cnJlbnREcm9wRWZmZWN0KCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoX3RoaXMuaXNEcmFnZ2luZ05hdGl2ZUl0ZW0oKSkge1xuICAgICAgICAvLyBEb24ndCBzaG93IGEgbmljZSBjdXJzb3IgYnV0IHN0aWxsIHByZXZlbnQgZGVmYXVsdFxuICAgICAgICAvLyBcImRyb3AgYW5kIGJsb3cgYXdheSB0aGUgd2hvbGUgZG9jdW1lbnRcIiBhY3Rpb24uXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBpZiAoZS5kYXRhVHJhbnNmZXIpIHtcbiAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYW5kbGVUb3BEcmFnTGVhdmVDYXB0dXJlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoX3RoaXMuaXNEcmFnZ2luZ05hdGl2ZUl0ZW0oKSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBpc0xhc3RMZWF2ZSA9IF90aGlzLmVudGVyTGVhdmVDb3VudGVyLmxlYXZlKGUudGFyZ2V0KTtcblxuICAgICAgaWYgKCFpc0xhc3RMZWF2ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChfdGhpcy5pc0RyYWdnaW5nTmF0aXZlSXRlbSgpKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5lbmREcmFnTmF0aXZlSXRlbSgpO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhbmRsZVRvcERyb3BDYXB0dXJlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5kcm9wVGFyZ2V0SWRzID0gW107XG5cbiAgICAgIGlmIChfdGhpcy5pc0RyYWdnaW5nTmF0aXZlSXRlbSgpKSB7XG4gICAgICAgIHZhciBfdGhpcyRjdXJyZW50TmF0aXZlU287XG5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAoX3RoaXMkY3VycmVudE5hdGl2ZVNvID0gX3RoaXMuY3VycmVudE5hdGl2ZVNvdXJjZSkgPT09IG51bGwgfHwgX3RoaXMkY3VycmVudE5hdGl2ZVNvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjdXJyZW50TmF0aXZlU28ubG9hZERhdGFUcmFuc2ZlcihlLmRhdGFUcmFuc2Zlcik7XG4gICAgICB9IGVsc2UgaWYgKG1hdGNoTmF0aXZlSXRlbVR5cGUoZS5kYXRhVHJhbnNmZXIpKSB7XG4gICAgICAgIC8vIERyYWdnaW5nIHNvbWUgZWxlbWVudHMsIGxpa2UgPGE+IGFuZCA8aW1nPiBtYXkgc3RpbGwgYmVoYXZlIGxpa2UgYSBuYXRpdmUgZHJhZyBldmVudCxcbiAgICAgICAgLy8gZXZlbiBpZiB0aGUgY3VycmVudCBkcmFnIGV2ZW50IG1hdGNoZXMgYSB1c2VyLWRlZmluZWQgdHlwZS5cbiAgICAgICAgLy8gU3RvcCB0aGUgZGVmYXVsdCBiZWhhdmlvciB3aGVuIHdlJ3JlIG5vdCBleHBlY3RpbmcgYSBuYXRpdmUgaXRlbSB0byBiZSBkcm9wcGVkLlxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIF90aGlzLmVudGVyTGVhdmVDb3VudGVyLnJlc2V0KCk7XG4gICAgfSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYW5kbGVUb3BEcm9wXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgZHJvcFRhcmdldElkcyA9IF90aGlzLmRyb3BUYXJnZXRJZHM7XG4gICAgICBfdGhpcy5kcm9wVGFyZ2V0SWRzID0gW107XG5cbiAgICAgIF90aGlzLmFjdGlvbnMuaG92ZXIoZHJvcFRhcmdldElkcywge1xuICAgICAgICBjbGllbnRPZmZzZXQ6IGdldEV2ZW50Q2xpZW50T2Zmc2V0KGUpXG4gICAgICB9KTtcblxuICAgICAgX3RoaXMuYWN0aW9ucy5kcm9wKHtcbiAgICAgICAgZHJvcEVmZmVjdDogX3RoaXMuZ2V0Q3VycmVudERyb3BFZmZlY3QoKVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChfdGhpcy5pc0RyYWdnaW5nTmF0aXZlSXRlbSgpKSB7XG4gICAgICAgIF90aGlzLmVuZERyYWdOYXRpdmVJdGVtKCk7XG4gICAgICB9IGVsc2UgaWYgKF90aGlzLm1vbml0b3IuaXNEcmFnZ2luZygpKSB7XG4gICAgICAgIF90aGlzLmFjdGlvbnMuZW5kRHJhZygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFuZGxlU2VsZWN0U3RhcnRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDsgLy8gT25seSBJRSByZXF1aXJlcyB1cyB0byBleHBsaWNpdGx5IHNheVxuICAgICAgLy8gd2Ugd2FudCBkcmFnIGRyb3Agb3BlcmF0aW9uIHRvIHN0YXJ0XG5cbiAgICAgIGlmICh0eXBlb2YgdGFyZ2V0LmRyYWdEcm9wICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gSW5wdXRzIGFuZCB0ZXh0YXJlYXMgc2hvdWxkIGJlIHNlbGVjdGFibGVcblxuXG4gICAgICBpZiAodGFyZ2V0LnRhZ05hbWUgPT09ICdJTlBVVCcgfHwgdGFyZ2V0LnRhZ05hbWUgPT09ICdTRUxFQ1QnIHx8IHRhcmdldC50YWdOYW1lID09PSAnVEVYVEFSRUEnIHx8IHRhcmdldC5pc0NvbnRlbnRFZGl0YWJsZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IC8vIEZvciBvdGhlciB0YXJnZXRzLCBhc2sgSUVcbiAgICAgIC8vIHRvIGVuYWJsZSBkcmFnIGFuZCBkcm9wXG5cblxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGFyZ2V0LmRyYWdEcm9wKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBuZXcgT3B0aW9uc1JlYWRlcihnbG9iYWxDb250ZXh0LCBvcHRpb25zKTtcbiAgICB0aGlzLmFjdGlvbnMgPSBtYW5hZ2VyLmdldEFjdGlvbnMoKTtcbiAgICB0aGlzLm1vbml0b3IgPSBtYW5hZ2VyLmdldE1vbml0b3IoKTtcbiAgICB0aGlzLnJlZ2lzdHJ5ID0gbWFuYWdlci5nZXRSZWdpc3RyeSgpO1xuICAgIHRoaXMuZW50ZXJMZWF2ZUNvdW50ZXIgPSBuZXcgRW50ZXJMZWF2ZUNvdW50ZXIodGhpcy5pc05vZGVJbkRvY3VtZW50KTtcbiAgfVxuICAvKipcbiAgICogR2VuZXJhdGUgcHJvZmlsaW5nIHN0YXRpc3RpY3MgZm9yIHRoZSBIVE1MNUJhY2tlbmQuXG4gICAqL1xuXG5cbiAgX2NyZWF0ZUNsYXNzKEhUTUw1QmFja2VuZEltcGwsIFt7XG4gICAga2V5OiBcInByb2ZpbGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvZmlsZSgpIHtcbiAgICAgIHZhciBfdGhpcyRkcmFnU3RhcnRTb3VyY2UsIF90aGlzJGRyYWdPdmVyVGFyZ2V0STtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc291cmNlUHJldmlld05vZGVzOiB0aGlzLnNvdXJjZVByZXZpZXdOb2Rlcy5zaXplLFxuICAgICAgICBzb3VyY2VQcmV2aWV3Tm9kZU9wdGlvbnM6IHRoaXMuc291cmNlUHJldmlld05vZGVPcHRpb25zLnNpemUsXG4gICAgICAgIHNvdXJjZU5vZGVPcHRpb25zOiB0aGlzLnNvdXJjZU5vZGVPcHRpb25zLnNpemUsXG4gICAgICAgIHNvdXJjZU5vZGVzOiB0aGlzLnNvdXJjZU5vZGVzLnNpemUsXG4gICAgICAgIGRyYWdTdGFydFNvdXJjZUlkczogKChfdGhpcyRkcmFnU3RhcnRTb3VyY2UgPSB0aGlzLmRyYWdTdGFydFNvdXJjZUlkcykgPT09IG51bGwgfHwgX3RoaXMkZHJhZ1N0YXJ0U291cmNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRkcmFnU3RhcnRTb3VyY2UubGVuZ3RoKSB8fCAwLFxuICAgICAgICBkcm9wVGFyZ2V0SWRzOiB0aGlzLmRyb3BUYXJnZXRJZHMubGVuZ3RoLFxuICAgICAgICBkcmFnRW50ZXJUYXJnZXRJZHM6IHRoaXMuZHJhZ0VudGVyVGFyZ2V0SWRzLmxlbmd0aCxcbiAgICAgICAgZHJhZ092ZXJUYXJnZXRJZHM6ICgoX3RoaXMkZHJhZ092ZXJUYXJnZXRJID0gdGhpcy5kcmFnT3ZlclRhcmdldElkcykgPT09IG51bGwgfHwgX3RoaXMkZHJhZ092ZXJUYXJnZXRJID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRkcmFnT3ZlclRhcmdldEkubGVuZ3RoKSB8fCAwXG4gICAgICB9O1xuICAgIH0gLy8gcHVibGljIGZvciB0ZXN0XG5cbiAgfSwge1xuICAgIGtleTogXCJ3aW5kb3dcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud2luZG93O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJkb2N1bWVudFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5kb2N1bWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSByb290IGVsZW1lbnQgdG8gdXNlIGZvciBldmVudCBzdWJzY3JpcHRpb25zXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJyb290RWxlbWVudFwiLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5yb290RWxlbWVudDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2V0dXBcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0dXAoKSB7XG4gICAgICB2YXIgcm9vdCA9IHRoaXMucm9vdEVsZW1lbnQ7XG5cbiAgICAgIGlmIChyb290ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAocm9vdC5fX2lzUmVhY3REbmRCYWNrZW5kU2V0VXApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgaGF2ZSB0d28gSFRNTDUgYmFja2VuZHMgYXQgdGhlIHNhbWUgdGltZS4nKTtcbiAgICAgIH1cblxuICAgICAgcm9vdC5fX2lzUmVhY3REbmRCYWNrZW5kU2V0VXAgPSB0cnVlO1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVycyhyb290KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwidGVhcmRvd25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdGVhcmRvd24oKSB7XG4gICAgICB2YXIgcm9vdCA9IHRoaXMucm9vdEVsZW1lbnQ7XG5cbiAgICAgIGlmIChyb290ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByb290Ll9faXNSZWFjdERuZEJhY2tlbmRTZXRVcCA9IGZhbHNlO1xuICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycyh0aGlzLnJvb3RFbGVtZW50KTtcbiAgICAgIHRoaXMuY2xlYXJDdXJyZW50RHJhZ1NvdXJjZU5vZGUoKTtcblxuICAgICAgaWYgKHRoaXMuYXN5bmNFbmREcmFnRnJhbWVJZCkge1xuICAgICAgICB2YXIgX3RoaXMkd2luZG93O1xuXG4gICAgICAgIChfdGhpcyR3aW5kb3cgPSB0aGlzLndpbmRvdykgPT09IG51bGwgfHwgX3RoaXMkd2luZG93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hc3luY0VuZERyYWdGcmFtZUlkKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29ubmVjdERyYWdQcmV2aWV3XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbm5lY3REcmFnUHJldmlldyhzb3VyY2VJZCwgbm9kZSwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHRoaXMuc291cmNlUHJldmlld05vZGVPcHRpb25zLnNldChzb3VyY2VJZCwgb3B0aW9ucyk7XG4gICAgICB0aGlzLnNvdXJjZVByZXZpZXdOb2Rlcy5zZXQoc291cmNlSWQsIG5vZGUpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMyLnNvdXJjZVByZXZpZXdOb2Rlcy5kZWxldGUoc291cmNlSWQpO1xuXG4gICAgICAgIF90aGlzMi5zb3VyY2VQcmV2aWV3Tm9kZU9wdGlvbnMuZGVsZXRlKHNvdXJjZUlkKTtcbiAgICAgIH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbm5lY3REcmFnU291cmNlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbm5lY3REcmFnU291cmNlKHNvdXJjZUlkLCBub2RlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdGhpcy5zb3VyY2VOb2Rlcy5zZXQoc291cmNlSWQsIG5vZGUpO1xuICAgICAgdGhpcy5zb3VyY2VOb2RlT3B0aW9ucy5zZXQoc291cmNlSWQsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgaGFuZGxlRHJhZ1N0YXJ0ID0gZnVuY3Rpb24gaGFuZGxlRHJhZ1N0YXJ0KGUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzMy5oYW5kbGVEcmFnU3RhcnQoZSwgc291cmNlSWQpO1xuICAgICAgfTtcblxuICAgICAgdmFyIGhhbmRsZVNlbGVjdFN0YXJ0ID0gZnVuY3Rpb24gaGFuZGxlU2VsZWN0U3RhcnQoZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMzLmhhbmRsZVNlbGVjdFN0YXJ0KGUpO1xuICAgICAgfTtcblxuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2RyYWdnYWJsZScsICd0cnVlJyk7XG4gICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIGhhbmRsZURyYWdTdGFydCk7XG4gICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdHN0YXJ0JywgaGFuZGxlU2VsZWN0U3RhcnQpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMzLnNvdXJjZU5vZGVzLmRlbGV0ZShzb3VyY2VJZCk7XG5cbiAgICAgICAgX3RoaXMzLnNvdXJjZU5vZGVPcHRpb25zLmRlbGV0ZShzb3VyY2VJZCk7XG5cbiAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBoYW5kbGVEcmFnU3RhcnQpO1xuICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3NlbGVjdHN0YXJ0JywgaGFuZGxlU2VsZWN0U3RhcnQpO1xuICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgJ2ZhbHNlJyk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb25uZWN0RHJvcFRhcmdldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0RHJvcFRhcmdldCh0YXJnZXRJZCwgbm9kZSkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIHZhciBoYW5kbGVEcmFnRW50ZXIgPSBmdW5jdGlvbiBoYW5kbGVEcmFnRW50ZXIoZSkge1xuICAgICAgICByZXR1cm4gX3RoaXM0LmhhbmRsZURyYWdFbnRlcihlLCB0YXJnZXRJZCk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgaGFuZGxlRHJhZ092ZXIgPSBmdW5jdGlvbiBoYW5kbGVEcmFnT3ZlcihlKSB7XG4gICAgICAgIHJldHVybiBfdGhpczQuaGFuZGxlRHJhZ092ZXIoZSwgdGFyZ2V0SWQpO1xuICAgICAgfTtcblxuICAgICAgdmFyIGhhbmRsZURyb3AgPSBmdW5jdGlvbiBoYW5kbGVEcm9wKGUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzNC5oYW5kbGVEcm9wKGUsIHRhcmdldElkKTtcbiAgICAgIH07XG5cbiAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgaGFuZGxlRHJhZ0VudGVyKTtcbiAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBoYW5kbGVEcmFnT3Zlcik7XG4gICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBoYW5kbGVEcm9wKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgaGFuZGxlRHJhZ0VudGVyKTtcbiAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIGhhbmRsZURyYWdPdmVyKTtcbiAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdkcm9wJywgaGFuZGxlRHJvcCk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJhZGRFdmVudExpc3RlbmVyc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycyh0YXJnZXQpIHtcbiAgICAgIC8vIFNTUiBGaXggKGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdC1kbmQvcmVhY3QtZG5kL3B1bGwvODEzXG4gICAgICBpZiAoIXRhcmdldC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHRoaXMuaGFuZGxlVG9wRHJhZ1N0YXJ0KTtcbiAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCB0aGlzLmhhbmRsZVRvcERyYWdTdGFydENhcHR1cmUsIHRydWUpO1xuICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCB0aGlzLmhhbmRsZVRvcERyYWdFbmRDYXB0dXJlLCB0cnVlKTtcbiAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCB0aGlzLmhhbmRsZVRvcERyYWdFbnRlcik7XG4gICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgdGhpcy5oYW5kbGVUb3BEcmFnRW50ZXJDYXB0dXJlLCB0cnVlKTtcbiAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLmhhbmRsZVRvcERyYWdMZWF2ZUNhcHR1cmUsIHRydWUpO1xuICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgdGhpcy5oYW5kbGVUb3BEcmFnT3Zlcik7XG4gICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCB0aGlzLmhhbmRsZVRvcERyYWdPdmVyQ2FwdHVyZSwgdHJ1ZSk7XG4gICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIHRoaXMuaGFuZGxlVG9wRHJvcCk7XG4gICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIHRoaXMuaGFuZGxlVG9wRHJvcENhcHR1cmUsIHRydWUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW1vdmVFdmVudExpc3RlbmVyc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVycyh0YXJnZXQpIHtcbiAgICAgIC8vIFNTUiBGaXggKGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdC1kbmQvcmVhY3QtZG5kL3B1bGwvODEzXG4gICAgICBpZiAoIXRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHRoaXMuaGFuZGxlVG9wRHJhZ1N0YXJ0KTtcbiAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCB0aGlzLmhhbmRsZVRvcERyYWdTdGFydENhcHR1cmUsIHRydWUpO1xuICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCB0aGlzLmhhbmRsZVRvcERyYWdFbmRDYXB0dXJlLCB0cnVlKTtcbiAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCB0aGlzLmhhbmRsZVRvcERyYWdFbnRlcik7XG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgdGhpcy5oYW5kbGVUb3BEcmFnRW50ZXJDYXB0dXJlLCB0cnVlKTtcbiAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLmhhbmRsZVRvcERyYWdMZWF2ZUNhcHR1cmUsIHRydWUpO1xuICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgdGhpcy5oYW5kbGVUb3BEcmFnT3Zlcik7XG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCB0aGlzLmhhbmRsZVRvcERyYWdPdmVyQ2FwdHVyZSwgdHJ1ZSk7XG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJvcCcsIHRoaXMuaGFuZGxlVG9wRHJvcCk7XG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJvcCcsIHRoaXMuaGFuZGxlVG9wRHJvcENhcHR1cmUsIHRydWUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRDdXJyZW50U291cmNlTm9kZU9wdGlvbnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q3VycmVudFNvdXJjZU5vZGVPcHRpb25zKCkge1xuICAgICAgdmFyIHNvdXJjZUlkID0gdGhpcy5tb25pdG9yLmdldFNvdXJjZUlkKCk7XG4gICAgICB2YXIgc291cmNlTm9kZU9wdGlvbnMgPSB0aGlzLnNvdXJjZU5vZGVPcHRpb25zLmdldChzb3VyY2VJZCk7XG4gICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7XG4gICAgICAgIGRyb3BFZmZlY3Q6IHRoaXMuYWx0S2V5UHJlc3NlZCA/ICdjb3B5JyA6ICdtb3ZlJ1xuICAgICAgfSwgc291cmNlTm9kZU9wdGlvbnMgfHwge30pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRDdXJyZW50RHJvcEVmZmVjdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDdXJyZW50RHJvcEVmZmVjdCgpIHtcbiAgICAgIGlmICh0aGlzLmlzRHJhZ2dpbmdOYXRpdmVJdGVtKCkpIHtcbiAgICAgICAgLy8gSXQgbWFrZXMgbW9yZSBzZW5zZSB0byBkZWZhdWx0IHRvICdjb3B5JyBmb3IgbmF0aXZlIHJlc291cmNlc1xuICAgICAgICByZXR1cm4gJ2NvcHknO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50U291cmNlTm9kZU9wdGlvbnMoKS5kcm9wRWZmZWN0O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRDdXJyZW50U291cmNlUHJldmlld05vZGVPcHRpb25zXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEN1cnJlbnRTb3VyY2VQcmV2aWV3Tm9kZU9wdGlvbnMoKSB7XG4gICAgICB2YXIgc291cmNlSWQgPSB0aGlzLm1vbml0b3IuZ2V0U291cmNlSWQoKTtcbiAgICAgIHZhciBzb3VyY2VQcmV2aWV3Tm9kZU9wdGlvbnMgPSB0aGlzLnNvdXJjZVByZXZpZXdOb2RlT3B0aW9ucy5nZXQoc291cmNlSWQpO1xuICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoe1xuICAgICAgICBhbmNob3JYOiAwLjUsXG4gICAgICAgIGFuY2hvclk6IDAuNSxcbiAgICAgICAgY2FwdHVyZURyYWdnaW5nU3RhdGU6IGZhbHNlXG4gICAgICB9LCBzb3VyY2VQcmV2aWV3Tm9kZU9wdGlvbnMgfHwge30pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc0RyYWdnaW5nTmF0aXZlSXRlbVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc0RyYWdnaW5nTmF0aXZlSXRlbSgpIHtcbiAgICAgIHZhciBpdGVtVHlwZSA9IHRoaXMubW9uaXRvci5nZXRJdGVtVHlwZSgpO1xuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKE5hdGl2ZVR5cGVzKS5zb21lKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIE5hdGl2ZVR5cGVzW2tleV0gPT09IGl0ZW1UeXBlO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImJlZ2luRHJhZ05hdGl2ZUl0ZW1cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYmVnaW5EcmFnTmF0aXZlSXRlbSh0eXBlLCBkYXRhVHJhbnNmZXIpIHtcbiAgICAgIHRoaXMuY2xlYXJDdXJyZW50RHJhZ1NvdXJjZU5vZGUoKTtcbiAgICAgIHRoaXMuY3VycmVudE5hdGl2ZVNvdXJjZSA9IGNyZWF0ZU5hdGl2ZURyYWdTb3VyY2UodHlwZSwgZGF0YVRyYW5zZmVyKTtcbiAgICAgIHRoaXMuY3VycmVudE5hdGl2ZUhhbmRsZSA9IHRoaXMucmVnaXN0cnkuYWRkU291cmNlKHR5cGUsIHRoaXMuY3VycmVudE5hdGl2ZVNvdXJjZSk7XG4gICAgICB0aGlzLmFjdGlvbnMuYmVnaW5EcmFnKFt0aGlzLmN1cnJlbnROYXRpdmVIYW5kbGVdKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2V0Q3VycmVudERyYWdTb3VyY2VOb2RlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldEN1cnJlbnREcmFnU291cmNlTm9kZShub2RlKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgdGhpcy5jbGVhckN1cnJlbnREcmFnU291cmNlTm9kZSgpO1xuICAgICAgdGhpcy5jdXJyZW50RHJhZ1NvdXJjZU5vZGUgPSBub2RlOyAvLyBBIHRpbWVvdXQgb2YgPiAwIGlzIG5lY2Vzc2FyeSB0byByZXNvbHZlIEZpcmVmb3ggaXNzdWUgcmVmZXJlbmNlZFxuICAgICAgLy8gU2VlOlxuICAgICAgLy8gICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdC1kbmQvcmVhY3QtZG5kL3B1bGwvOTI4XG4gICAgICAvLyAgICogaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0LWRuZC9yZWFjdC1kbmQvaXNzdWVzLzg2OVxuXG4gICAgICB2YXIgTU9VU0VfTU9WRV9USU1FT1VUID0gMTAwMDsgLy8gUmVjZWl2aW5nIGEgbW91c2UgZXZlbnQgaW4gdGhlIG1pZGRsZSBvZiBhIGRyYWdnaW5nIG9wZXJhdGlvblxuICAgICAgLy8gbWVhbnMgaXQgaGFzIGVuZGVkIGFuZCB0aGUgZHJhZyBzb3VyY2Ugbm9kZSBkaXNhcHBlYXJlZCBmcm9tIERPTSxcbiAgICAgIC8vIHNvIHRoZSBicm93c2VyIGRpZG4ndCBkaXNwYXRjaCB0aGUgZHJhZ2VuZCBldmVudC5cbiAgICAgIC8vXG4gICAgICAvLyBXZSBuZWVkIHRvIHdhaXQgYmVmb3JlIHdlIHN0YXJ0IGxpc3RlbmluZyBmb3IgbW91c2Vtb3ZlIGV2ZW50cy5cbiAgICAgIC8vIFRoaXMgaXMgbmVlZGVkIGJlY2F1c2UgdGhlIGRyYWcgcHJldmlldyBuZWVkcyB0byBiZSBkcmF3biBvciBlbHNlIGl0IGZpcmVzIGFuICdtb3VzZW1vdmUnIGV2ZW50XG4gICAgICAvLyBpbW1lZGlhdGVseSBpbiBzb21lIGJyb3dzZXJzLlxuICAgICAgLy9cbiAgICAgIC8vIFNlZTpcbiAgICAgIC8vICAgKiBodHRwczovL2dpdGh1Yi5jb20vcmVhY3QtZG5kL3JlYWN0LWRuZC9wdWxsLzkyOFxuICAgICAgLy8gICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdC1kbmQvcmVhY3QtZG5kL2lzc3Vlcy84NjlcbiAgICAgIC8vXG5cbiAgICAgIHRoaXMubW91c2VNb3ZlVGltZW91dFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpczUkcm9vdEVsZW1lbnQ7XG5cbiAgICAgICAgcmV0dXJuIChfdGhpczUkcm9vdEVsZW1lbnQgPSBfdGhpczUucm9vdEVsZW1lbnQpID09PSBudWxsIHx8IF90aGlzNSRyb290RWxlbWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXM1JHJvb3RFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIF90aGlzNS5lbmREcmFnSWZTb3VyY2VXYXNSZW1vdmVkRnJvbURPTSwgdHJ1ZSk7XG4gICAgICB9LCBNT1VTRV9NT1ZFX1RJTUVPVVQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjbGVhckN1cnJlbnREcmFnU291cmNlTm9kZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhckN1cnJlbnREcmFnU291cmNlTm9kZSgpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnREcmFnU291cmNlTm9kZSkge1xuICAgICAgICB0aGlzLmN1cnJlbnREcmFnU291cmNlTm9kZSA9IG51bGw7XG5cbiAgICAgICAgaWYgKHRoaXMucm9vdEVsZW1lbnQpIHtcbiAgICAgICAgICB2YXIgX3RoaXMkd2luZG93MjtcblxuICAgICAgICAgIChfdGhpcyR3aW5kb3cyID0gdGhpcy53aW5kb3cpID09PSBudWxsIHx8IF90aGlzJHdpbmRvdzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHdpbmRvdzIuY2xlYXJUaW1lb3V0KHRoaXMubW91c2VNb3ZlVGltZW91dFRpbWVyIHx8IHVuZGVmaW5lZCk7XG4gICAgICAgICAgdGhpcy5yb290RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLmVuZERyYWdJZlNvdXJjZVdhc1JlbW92ZWRGcm9tRE9NLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubW91c2VNb3ZlVGltZW91dFRpbWVyID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaGFuZGxlRHJhZ1N0YXJ0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZURyYWdTdGFydChlLCBzb3VyY2VJZCkge1xuICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5kcmFnU3RhcnRTb3VyY2VJZHMpIHtcbiAgICAgICAgdGhpcy5kcmFnU3RhcnRTb3VyY2VJZHMgPSBbXTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5kcmFnU3RhcnRTb3VyY2VJZHMudW5zaGlmdChzb3VyY2VJZCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImhhbmRsZURyYWdFbnRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVEcmFnRW50ZXIoZSwgdGFyZ2V0SWQpIHtcbiAgICAgIHRoaXMuZHJhZ0VudGVyVGFyZ2V0SWRzLnVuc2hpZnQodGFyZ2V0SWQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJoYW5kbGVEcmFnT3ZlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVEcmFnT3ZlcihlLCB0YXJnZXRJZCkge1xuICAgICAgaWYgKHRoaXMuZHJhZ092ZXJUYXJnZXRJZHMgPT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5kcmFnT3ZlclRhcmdldElkcyA9IFtdO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmRyYWdPdmVyVGFyZ2V0SWRzLnVuc2hpZnQodGFyZ2V0SWQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJoYW5kbGVEcm9wXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZURyb3AoZSwgdGFyZ2V0SWQpIHtcbiAgICAgIHRoaXMuZHJvcFRhcmdldElkcy51bnNoaWZ0KHRhcmdldElkKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gSFRNTDVCYWNrZW5kSW1wbDtcbn0oKTsiLCJpbXBvcnQgeyBIVE1MNUJhY2tlbmRJbXBsIH0gZnJvbSAnLi9IVE1MNUJhY2tlbmRJbXBsJztcbmltcG9ydCAqIGFzIE5hdGl2ZVR5cGVzIGZyb20gJy4vTmF0aXZlVHlwZXMnO1xuZXhwb3J0IHsgZ2V0RW1wdHlJbWFnZSB9IGZyb20gJy4vZ2V0RW1wdHlJbWFnZSc7XG5leHBvcnQgeyBOYXRpdmVUeXBlcyB9O1xuZXhwb3J0IHZhciBIVE1MNUJhY2tlbmQgPSBmdW5jdGlvbiBjcmVhdGVCYWNrZW5kKG1hbmFnZXIsIGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIG5ldyBIVE1MNUJhY2tlbmRJbXBsKG1hbmFnZXIsIGNvbnRleHQsIG9wdGlvbnMpO1xufTsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU3R5bGVkSWNvbkJhc2UgfSBmcm9tICdAc3R5bGVkLWljb25zL3N0eWxlZC1pY29uJztcbmV4cG9ydCB2YXIgQXJjaGl2ZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChwcm9wcywgcmVmKSB7XG4gIHZhciBhdHRycyA9IHtcbiAgICBcImZpbGxcIjogXCJjdXJyZW50Q29sb3JcIixcbiAgICBcInhtbG5zXCI6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICB9O1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkSWNvbkJhc2UsIF9leHRlbmRzKHtcbiAgICBpY29uQXR0cnM6IGF0dHJzLFxuICAgIGljb25WZXJ0aWNhbEFsaWduOiBcIm1pZGRsZVwiLFxuICAgIGljb25WaWV3Qm94OiBcIjAgMCA1MTIgNTEyXCJcbiAgfSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGQ6IFwiTTMyIDQ0OGMwIDE3LjcgMTQuMyAzMiAzMiAzMmgzODRjMTcuNyAwIDMyLTE0LjMgMzItMzJWMTYwSDMydjI4OHptMTYwLTIxMmMwLTYuNiA1LjQtMTIgMTItMTJoMTA0YzYuNiAwIDEyIDUuNCAxMiAxMnY4YzAgNi42LTUuNCAxMi0xMiAxMkgyMDRjLTYuNiAwLTEyLTUuNC0xMi0xMnYtOHpNNDgwIDMySDMyQzE0LjMgMzIgMCA0Ni4zIDAgNjR2NDhjMCA4LjggNy4yIDE2IDE2IDE2aDQ4MGM4LjggMCAxNi03LjIgMTYtMTZWNjRjMC0xNy43LTE0LjMtMzItMzItMzJ6XCJcbiAgfSkpO1xufSk7XG5BcmNoaXZlLmRpc3BsYXlOYW1lID0gJ0FyY2hpdmUnO1xuZXhwb3J0IHZhciBBcmNoaXZlRGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiA1MTIsXG4gIHdpZHRoOiA1MTJcbn07IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFN0eWxlZEljb25CYXNlIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9zdHlsZWQtaWNvbic7XG5leHBvcnQgdmFyIEFycm93c0FsdCA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChwcm9wcywgcmVmKSB7XG4gIHZhciBhdHRycyA9IHtcbiAgICBcImZpbGxcIjogXCJjdXJyZW50Q29sb3JcIixcbiAgICBcInhtbG5zXCI6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICB9O1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkSWNvbkJhc2UsIF9leHRlbmRzKHtcbiAgICBpY29uQXR0cnM6IGF0dHJzLFxuICAgIGljb25WZXJ0aWNhbEFsaWduOiBcIm1pZGRsZVwiLFxuICAgIGljb25WaWV3Qm94OiBcIjAgMCA1MTIgNTEyXCJcbiAgfSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGQ6IFwibTM1Mi4yMDEgNDI1Ljc3NS03OS4xOTYgNzkuMTk2Yy05LjM3MyA5LjM3My0yNC41NjggOS4zNzMtMzMuOTQxIDBsLTc5LjE5Ni03OS4xOTZjLTE1LjExOS0xNS4xMTktNC40MTEtNDAuOTcxIDE2Ljk3MS00MC45N2g1MS4xNjJMMjI4IDI4NEgxMjcuMTk2djUxLjE2MmMwIDIxLjM4Mi0yNS44NTEgMzIuMDktNDAuOTcxIDE2Ljk3MUw3LjAyOSAyNzIuOTM3Yy05LjM3My05LjM3My05LjM3My0yNC41NjkgMC0zMy45NDFMODYuMjI1IDE1OS44YzE1LjExOS0xNS4xMTkgNDAuOTcxLTQuNDExIDQwLjk3MSAxNi45NzFWMjI4SDIyOFYxMjcuMTk2aC01MS4yM2MtMjEuMzgyIDAtMzIuMDktMjUuODUxLTE2Ljk3MS00MC45NzFsNzkuMTk2LTc5LjE5NmM5LjM3My05LjM3MyAyNC41NjgtOS4zNzMgMzMuOTQxIDBsNzkuMTk2IDc5LjE5NmMxNS4xMTkgMTUuMTE5IDQuNDExIDQwLjk3MS0xNi45NzEgNDAuOTcxaC01MS4xNjJWMjI4aDEwMC44MDR2LTUxLjE2MmMwLTIxLjM4MiAyNS44NTEtMzIuMDkgNDAuOTctMTYuOTcxbDc5LjE5NiA3OS4xOTZjOS4zNzMgOS4zNzMgOS4zNzMgMjQuNTY5IDAgMzMuOTQxTDQyNS43NzMgMzUyLjJjLTE1LjExOSAxNS4xMTktNDAuOTcxIDQuNDExLTQwLjk3LTE2Ljk3MVYyODRIMjg0djEwMC44MDRoNTEuMjNjMjEuMzgyIDAgMzIuMDkgMjUuODUxIDE2Ljk3MSA0MC45NzF6XCJcbiAgfSkpO1xufSk7XG5BcnJvd3NBbHQuZGlzcGxheU5hbWUgPSAnQXJyb3dzQWx0JztcbmV4cG9ydCB2YXIgQXJyb3dzQWx0RGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiA1MTIsXG4gIHdpZHRoOiA1MTJcbn07IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFN0eWxlZEljb25CYXNlIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9zdHlsZWQtaWNvbic7XG5leHBvcnQgdmFyIEFycm93c0FsdFYgPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAocHJvcHMsIHJlZikge1xuICB2YXIgYXR0cnMgPSB7XG4gICAgXCJmaWxsXCI6IFwiY3VycmVudENvbG9yXCIsXG4gICAgXCJ4bWxuc1wiOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZEljb25CYXNlLCBfZXh0ZW5kcyh7XG4gICAgaWNvbkF0dHJzOiBhdHRycyxcbiAgICBpY29uVmVydGljYWxBbGlnbjogXCJtaWRkbGVcIixcbiAgICBpY29uVmlld0JveDogXCIwIDAgMjU2IDUxMlwiXG4gIH0sIHByb3BzLCB7XG4gICAgcmVmOiByZWZcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBkOiBcIk0yMTQuMDU5IDM3Ny45NDFIMTY4VjEzNC4wNTloNDYuMDU5YzIxLjM4MiAwIDMyLjA5LTI1Ljg1MSAxNi45NzEtNDAuOTcxTDE0NC45NzEgNy4wMjljLTkuMzczLTkuMzczLTI0LjU2OC05LjM3My0zMy45NDEgMEwyNC45NzEgOTMuMDg4Yy0xNS4xMTkgMTUuMTE5LTQuNDExIDQwLjk3MSAxNi45NzEgNDAuOTcxSDg4djI0My44ODJINDEuOTQxYy0yMS4zODIgMC0zMi4wOSAyNS44NTEtMTYuOTcxIDQwLjk3MWw4Ni4wNTkgODYuMDU5YzkuMzczIDkuMzczIDI0LjU2OCA5LjM3MyAzMy45NDEgMGw4Ni4wNTktODYuMDU5YzE1LjEyLTE1LjExOSA0LjQxMi00MC45NzEtMTYuOTctNDAuOTcxelwiXG4gIH0pKTtcbn0pO1xuQXJyb3dzQWx0Vi5kaXNwbGF5TmFtZSA9ICdBcnJvd3NBbHRWJztcbmV4cG9ydCB2YXIgQXJyb3dzQWx0VkRpbWVuc2lvbnMgPSB7XG4gIGhlaWdodDogNTEyLFxuICB3aWR0aDogMjU2XG59OyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHlsZWRJY29uQmFzZSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvc3R5bGVkLWljb24nO1xuZXhwb3J0IHZhciBCYXJzID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgdmFyIGF0dHJzID0ge1xuICAgIFwiZmlsbFwiOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIFwieG1sbnNcIjogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRJY29uQmFzZSwgX2V4dGVuZHMoe1xuICAgIGljb25BdHRyczogYXR0cnMsXG4gICAgaWNvblZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgaWNvblZpZXdCb3g6IFwiMCAwIDQ0OCA1MTJcIlxuICB9LCBwcm9wcywge1xuICAgIHJlZjogcmVmXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZDogXCJNMTYgMTMyaDQxNmM4LjgzNyAwIDE2LTcuMTYzIDE2LTE2Vjc2YzAtOC44MzctNy4xNjMtMTYtMTYtMTZIMTZDNy4xNjMgNjAgMCA2Ny4xNjMgMCA3NnY0MGMwIDguODM3IDcuMTYzIDE2IDE2IDE2em0wIDE2MGg0MTZjOC44MzcgMCAxNi03LjE2MyAxNi0xNnYtNDBjMC04LjgzNy03LjE2My0xNi0xNi0xNkgxNmMtOC44MzcgMC0xNiA3LjE2My0xNiAxNnY0MGMwIDguODM3IDcuMTYzIDE2IDE2IDE2em0wIDE2MGg0MTZjOC44MzcgMCAxNi03LjE2MyAxNi0xNnYtNDBjMC04LjgzNy03LjE2My0xNi0xNi0xNkgxNmMtOC44MzcgMC0xNiA3LjE2My0xNiAxNnY0MGMwIDguODM3IDcuMTYzIDE2IDE2IDE2elwiXG4gIH0pKTtcbn0pO1xuQmFycy5kaXNwbGF5TmFtZSA9ICdCYXJzJztcbmV4cG9ydCB2YXIgQmFyc0RpbWVuc2lvbnMgPSB7XG4gIGhlaWdodDogNTEyLFxuICB3aWR0aDogNDQ4XG59OyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHlsZWRJY29uQmFzZSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvc3R5bGVkLWljb24nO1xuZXhwb3J0IHZhciBDYXJldERvd24gPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAocHJvcHMsIHJlZikge1xuICB2YXIgYXR0cnMgPSB7XG4gICAgXCJmaWxsXCI6IFwiY3VycmVudENvbG9yXCIsXG4gICAgXCJ4bWxuc1wiOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZEljb25CYXNlLCBfZXh0ZW5kcyh7XG4gICAgaWNvbkF0dHJzOiBhdHRycyxcbiAgICBpY29uVmVydGljYWxBbGlnbjogXCJtaWRkbGVcIixcbiAgICBpY29uVmlld0JveDogXCIwIDAgMzIwIDUxMlwiXG4gIH0sIHByb3BzLCB7XG4gICAgcmVmOiByZWZcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBkOiBcIk0zMS4zIDE5MmgyNTcuM2MxNy44IDAgMjYuNyAyMS41IDE0LjEgMzQuMUwxNzQuMSAzNTQuOGMtNy44IDcuOC0yMC41IDcuOC0yOC4zIDBMMTcuMiAyMjYuMUM0LjYgMjEzLjUgMTMuNSAxOTIgMzEuMyAxOTJ6XCJcbiAgfSkpO1xufSk7XG5DYXJldERvd24uZGlzcGxheU5hbWUgPSAnQ2FyZXREb3duJztcbmV4cG9ydCB2YXIgQ2FyZXREb3duRGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiA1MTIsXG4gIHdpZHRoOiAzMjBcbn07IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFN0eWxlZEljb25CYXNlIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9zdHlsZWQtaWNvbic7XG5leHBvcnQgdmFyIENhcmV0UmlnaHQgPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAocHJvcHMsIHJlZikge1xuICB2YXIgYXR0cnMgPSB7XG4gICAgXCJmaWxsXCI6IFwiY3VycmVudENvbG9yXCIsXG4gICAgXCJ4bWxuc1wiOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZEljb25CYXNlLCBfZXh0ZW5kcyh7XG4gICAgaWNvbkF0dHJzOiBhdHRycyxcbiAgICBpY29uVmVydGljYWxBbGlnbjogXCJtaWRkbGVcIixcbiAgICBpY29uVmlld0JveDogXCIwIDAgMTkyIDUxMlwiXG4gIH0sIHByb3BzLCB7XG4gICAgcmVmOiByZWZcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBkOiBcIk0wIDM4NC42NjJWMTI3LjMzOGMwLTE3LjgxOCAyMS41NDMtMjYuNzQxIDM0LjE0Mi0xNC4xNDJsMTI4LjY2MiAxMjguNjYyYzcuODEgNy44MSA3LjgxIDIwLjQ3NCAwIDI4LjI4NEwzNC4xNDIgMzk4LjgwNEMyMS41NDMgNDExLjQwNCAwIDQwMi40OCAwIDM4NC42NjJ6XCJcbiAgfSkpO1xufSk7XG5DYXJldFJpZ2h0LmRpc3BsYXlOYW1lID0gJ0NhcmV0UmlnaHQnO1xuZXhwb3J0IHZhciBDYXJldFJpZ2h0RGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiA1MTIsXG4gIHdpZHRoOiAxOTJcbn07IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFN0eWxlZEljb25CYXNlIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9zdHlsZWQtaWNvbic7XG5leHBvcnQgdmFyIENoYXJ0QXJlYSA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChwcm9wcywgcmVmKSB7XG4gIHZhciBhdHRycyA9IHtcbiAgICBcImZpbGxcIjogXCJjdXJyZW50Q29sb3JcIixcbiAgICBcInhtbG5zXCI6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICB9O1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkSWNvbkJhc2UsIF9leHRlbmRzKHtcbiAgICBpY29uQXR0cnM6IGF0dHJzLFxuICAgIGljb25WZXJ0aWNhbEFsaWduOiBcIm1pZGRsZVwiLFxuICAgIGljb25WaWV3Qm94OiBcIjAgMCA1MTIgNTEyXCJcbiAgfSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGQ6IFwiTTUwMCAzODRjNi42IDAgMTIgNS40IDEyIDEydjQwYzAgNi42LTUuNCAxMi0xMiAxMkgxMmMtNi42IDAtMTItNS40LTEyLTEyVjc2YzAtNi42IDUuNC0xMiAxMi0xMmg0MGM2LjYgMCAxMiA1LjQgMTIgMTJ2MzA4aDQzNnpNMzcyLjcgMTU5LjUgMjg4IDIxNmwtODUuMy0xMTMuN2MtNS4xLTYuOC0xNS41LTYuMy0xOS45IDFMOTYgMjQ4djEwNGgzODRsLTg5LjktMTg3LjhjLTMuMi02LjUtMTEuNC04LjctMTcuNC00Ljd6XCJcbiAgfSkpO1xufSk7XG5DaGFydEFyZWEuZGlzcGxheU5hbWUgPSAnQ2hhcnRBcmVhJztcbmV4cG9ydCB2YXIgQ2hhcnRBcmVhRGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiA1MTIsXG4gIHdpZHRoOiA1MTJcbn07IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFN0eWxlZEljb25CYXNlIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9zdHlsZWQtaWNvbic7XG5leHBvcnQgdmFyIEV4Y2xhbWF0aW9uVHJpYW5nbGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAocHJvcHMsIHJlZikge1xuICB2YXIgYXR0cnMgPSB7XG4gICAgXCJmaWxsXCI6IFwiY3VycmVudENvbG9yXCIsXG4gICAgXCJ4bWxuc1wiOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZEljb25CYXNlLCBfZXh0ZW5kcyh7XG4gICAgaWNvbkF0dHJzOiBhdHRycyxcbiAgICBpY29uVmVydGljYWxBbGlnbjogXCJtaWRkbGVcIixcbiAgICBpY29uVmlld0JveDogXCIwIDAgNTc2IDUxMlwiXG4gIH0sIHByb3BzLCB7XG4gICAgcmVmOiByZWZcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBkOiBcIk01NjkuNTE3IDQ0MC4wMTNDNTg3Ljk3NSA0NzIuMDA3IDU2NC44MDYgNTEyIDUyNy45NCA1MTJINDguMDU0Yy0zNi45MzcgMC01OS45OTktNDAuMDU1LTQxLjU3Ny03MS45ODdMMjQ2LjQyMyAyMy45ODVjMTguNDY3LTMyLjAwOSA2NC43Mi0zMS45NTEgODMuMTU0IDBsMjM5Ljk0IDQxNi4wMjh6TTI4OCAzNTRjLTI1LjQwNSAwLTQ2IDIwLjU5NS00NiA0NnMyMC41OTUgNDYgNDYgNDYgNDYtMjAuNTk1IDQ2LTQ2LTIwLjU5NS00Ni00Ni00NnptLTQzLjY3My0xNjUuMzQ2IDcuNDE4IDEzNmMuMzQ3IDYuMzY0IDUuNjA5IDExLjM0NiAxMS45ODIgMTEuMzQ2aDQ4LjU0NmM2LjM3MyAwIDExLjYzNS00Ljk4MiAxMS45ODItMTEuMzQ2bDcuNDE4LTEzNmMuMzc1LTYuODc0LTUuMDk4LTEyLjY1NC0xMS45ODItMTIuNjU0aC02My4zODNjLTYuODg0IDAtMTIuMzU2IDUuNzgtMTEuOTgxIDEyLjY1NHpcIlxuICB9KSk7XG59KTtcbkV4Y2xhbWF0aW9uVHJpYW5nbGUuZGlzcGxheU5hbWUgPSAnRXhjbGFtYXRpb25UcmlhbmdsZSc7XG5leHBvcnQgdmFyIEV4Y2xhbWF0aW9uVHJpYW5nbGVEaW1lbnNpb25zID0ge1xuICBoZWlnaHQ6IDUxMixcbiAgd2lkdGg6IDU3NlxufTsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU3R5bGVkSWNvbkJhc2UgfSBmcm9tICdAc3R5bGVkLWljb25zL3N0eWxlZC1pY29uJztcbmV4cG9ydCB2YXIgTWFnbmV0ID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgdmFyIGF0dHJzID0ge1xuICAgIFwiZmlsbFwiOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIFwieG1sbnNcIjogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRJY29uQmFzZSwgX2V4dGVuZHMoe1xuICAgIGljb25BdHRyczogYXR0cnMsXG4gICAgaWNvblZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgaWNvblZpZXdCb3g6IFwiMCAwIDUxMiA1MTJcIlxuICB9LCBwcm9wcywge1xuICAgIHJlZjogcmVmXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZDogXCJNMTY0LjA3IDE0OC4xSDEyYTEyIDEyIDAgMCAxLTEyLTEydi04MGEzNiAzNiAwIDAgMSAzNi0zNmgxMDRhMzYgMzYgMCAwIDEgMzYgMzZ2ODBhMTEuODkgMTEuODkgMCAwIDEtMTEuOTMgMTJ6bTM0Ny45My0xMlY1NmEzNiAzNiAwIDAgMC0zNi0zNkgzNzJhMzYgMzYgMCAwIDAtMzYgMzZ2ODBhMTIgMTIgMCAwIDAgMTIgMTJoMTUyYTExLjg5IDExLjg5IDAgMCAwIDEyLTExLjl6bS0xNjQgNDRhMTIgMTIgMCAwIDAtMTIgMTJ2NTJjMCAxMjguMS0xNjAgMTI3LjktMTYwIDB2LTUyYTEyIDEyIDAgMCAwLTEyLTEySDEyLjFhMTIgMTIgMCAwIDAtMTIgMTIuMWMuMSAyMS40LjYgNDAuMyAwIDUzLjMgMCAxNTAuNiAxMzYuMTcgMjQ2LjYgMjU2Ljc1IDI0Ni42czI1NS05NiAyNTUtMjQ2LjdjLS42LTEyLjgtLjItMzMgMC01My4yYTEyIDEyIDAgMCAwLTEyLTEyLjF6XCJcbiAgfSkpO1xufSk7XG5NYWduZXQuZGlzcGxheU5hbWUgPSAnTWFnbmV0JztcbmV4cG9ydCB2YXIgTWFnbmV0RGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiA1MTIsXG4gIHdpZHRoOiA1MTJcbn07IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFN0eWxlZEljb25CYXNlIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9zdHlsZWQtaWNvbic7XG5leHBvcnQgdmFyIFBhdXNlID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgdmFyIGF0dHJzID0ge1xuICAgIFwiZmlsbFwiOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIFwieG1sbnNcIjogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRJY29uQmFzZSwgX2V4dGVuZHMoe1xuICAgIGljb25BdHRyczogYXR0cnMsXG4gICAgaWNvblZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgaWNvblZpZXdCb3g6IFwiMCAwIDQ0OCA1MTJcIlxuICB9LCBwcm9wcywge1xuICAgIHJlZjogcmVmXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZDogXCJNMTQ0IDQ3OUg0OGMtMjYuNSAwLTQ4LTIxLjUtNDgtNDhWNzljMC0yNi41IDIxLjUtNDggNDgtNDhoOTZjMjYuNSAwIDQ4IDIxLjUgNDggNDh2MzUyYzAgMjYuNS0yMS41IDQ4LTQ4IDQ4em0zMDQtNDhWNzljMC0yNi41LTIxLjUtNDgtNDgtNDhoLTk2Yy0yNi41IDAtNDggMjEuNS00OCA0OHYzNTJjMCAyNi41IDIxLjUgNDggNDggNDhoOTZjMjYuNSAwIDQ4LTIxLjUgNDgtNDh6XCJcbiAgfSkpO1xufSk7XG5QYXVzZS5kaXNwbGF5TmFtZSA9ICdQYXVzZSc7XG5leHBvcnQgdmFyIFBhdXNlRGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiA1MTIsXG4gIHdpZHRoOiA0NDhcbn07IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFN0eWxlZEljb25CYXNlIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9zdHlsZWQtaWNvbic7XG5leHBvcnQgdmFyIFBsYXkgPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAocHJvcHMsIHJlZikge1xuICB2YXIgYXR0cnMgPSB7XG4gICAgXCJmaWxsXCI6IFwiY3VycmVudENvbG9yXCIsXG4gICAgXCJ4bWxuc1wiOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZEljb25CYXNlLCBfZXh0ZW5kcyh7XG4gICAgaWNvbkF0dHJzOiBhdHRycyxcbiAgICBpY29uVmVydGljYWxBbGlnbjogXCJtaWRkbGVcIixcbiAgICBpY29uVmlld0JveDogXCIwIDAgNDQ4IDUxMlwiXG4gIH0sIHByb3BzLCB7XG4gICAgcmVmOiByZWZcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZmlsbDogXCJjdXJyZW50Q29sb3JcIixcbiAgICBkOiBcIk00MjQuNCAyMTQuNyA3Mi40IDYuNkM0My44LTEwLjMgMCA2LjEgMCA0Ny45VjQ2NGMwIDM3LjUgNDAuNyA2MC4xIDcyLjQgNDEuM2wzNTItMjA4YzMxLjQtMTguNSAzMS41LTY0LjEgMC04Mi42elwiXG4gIH0pKTtcbn0pO1xuUGxheS5kaXNwbGF5TmFtZSA9ICdQbGF5JztcbmV4cG9ydCB2YXIgUGxheURpbWVuc2lvbnMgPSB7XG4gIGhlaWdodDogNTEyLFxuICB3aWR0aDogNDQ4XG59OyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHlsZWRJY29uQmFzZSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvc3R5bGVkLWljb24nO1xuZXhwb3J0IHZhciBQcm9qZWN0RGlhZ3JhbSA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChwcm9wcywgcmVmKSB7XG4gIHZhciBhdHRycyA9IHtcbiAgICBcImZpbGxcIjogXCJjdXJyZW50Q29sb3JcIixcbiAgICBcInhtbG5zXCI6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICB9O1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkSWNvbkJhc2UsIF9leHRlbmRzKHtcbiAgICBpY29uQXR0cnM6IGF0dHJzLFxuICAgIGljb25WZXJ0aWNhbEFsaWduOiBcIm1pZGRsZVwiLFxuICAgIGljb25WaWV3Qm94OiBcIjAgMCA2NDAgNTEyXCJcbiAgfSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGQ6IFwiTTM4NCAzMjBIMjU2Yy0xNy42NyAwLTMyIDE0LjMzLTMyIDMydjEyOGMwIDE3LjY3IDE0LjMzIDMyIDMyIDMyaDEyOGMxNy42NyAwIDMyLTE0LjMzIDMyLTMyVjM1MmMwLTE3LjY3LTE0LjMzLTMyLTMyLTMyek0xOTIgMzJjMC0xNy42Ny0xNC4zMy0zMi0zMi0zMkgzMkMxNC4zMyAwIDAgMTQuMzMgMCAzMnYxMjhjMCAxNy42NyAxNC4zMyAzMiAzMiAzMmg5NS43Mmw3My4xNiAxMjguMDRDMjExLjk4IDMwMC45OCAyMzIuNCAyODggMjU2IDI4OGguMjhMMTkyIDE3NS41MVYxMjhoMjI0VjY0SDE5MlYzMnpNNjA4IDBINDgwYy0xNy42NyAwLTMyIDE0LjMzLTMyIDMydjEyOGMwIDE3LjY3IDE0LjMzIDMyIDMyIDMyaDEyOGMxNy42NyAwIDMyLTE0LjMzIDMyLTMyVjMyYzAtMTcuNjctMTQuMzMtMzItMzItMzJ6XCJcbiAgfSkpO1xufSk7XG5Qcm9qZWN0RGlhZ3JhbS5kaXNwbGF5TmFtZSA9ICdQcm9qZWN0RGlhZ3JhbSc7XG5leHBvcnQgdmFyIFByb2plY3REaWFncmFtRGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiA1MTIsXG4gIHdpZHRoOiA2NDBcbn07IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2V4dGVuZHNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFN0eWxlZEljb25CYXNlIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9zdHlsZWQtaWNvbic7XG5leHBvcnQgdmFyIFNsaWRlcnNIID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgdmFyIGF0dHJzID0ge1xuICAgIFwiZmlsbFwiOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIFwieG1sbnNcIjogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRJY29uQmFzZSwgX2V4dGVuZHMoe1xuICAgIGljb25BdHRyczogYXR0cnMsXG4gICAgaWNvblZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgaWNvblZpZXdCb3g6IFwiMCAwIDUxMiA1MTJcIlxuICB9LCBwcm9wcywge1xuICAgIHJlZjogcmVmXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGZpbGw6IFwiY3VycmVudENvbG9yXCIsXG4gICAgZDogXCJNNDk2IDM4NEgxNjB2LTE2YzAtOC44LTcuMi0xNi0xNi0xNmgtMzJjLTguOCAwLTE2IDcuMi0xNiAxNnYxNkgxNmMtOC44IDAtMTYgNy4yLTE2IDE2djMyYzAgOC44IDcuMiAxNiAxNiAxNmg4MHYxNmMwIDguOCA3LjIgMTYgMTYgMTZoMzJjOC44IDAgMTYtNy4yIDE2LTE2di0xNmgzMzZjOC44IDAgMTYtNy4yIDE2LTE2di0zMmMwLTguOC03LjItMTYtMTYtMTZ6bTAtMTYwaC04MHYtMTZjMC04LjgtNy4yLTE2LTE2LTE2aC0zMmMtOC44IDAtMTYgNy4yLTE2IDE2djE2SDE2Yy04LjggMC0xNiA3LjItMTYgMTZ2MzJjMCA4LjggNy4yIDE2IDE2IDE2aDMzNnYxNmMwIDguOCA3LjIgMTYgMTYgMTZoMzJjOC44IDAgMTYtNy4yIDE2LTE2di0xNmg4MGM4LjggMCAxNi03LjIgMTYtMTZ2LTMyYzAtOC44LTcuMi0xNi0xNi0xNnptMC0xNjBIMjg4VjQ4YzAtOC44LTcuMi0xNi0xNi0xNmgtMzJjLTguOCAwLTE2IDcuMi0xNiAxNnYxNkgxNkM3LjIgNjQgMCA3MS4yIDAgODB2MzJjMCA4LjggNy4yIDE2IDE2IDE2aDIwOHYxNmMwIDguOCA3LjIgMTYgMTYgMTZoMzJjOC44IDAgMTYtNy4yIDE2LTE2di0xNmgyMDhjOC44IDAgMTYtNy4yIDE2LTE2VjgwYzAtOC44LTcuMi0xNi0xNi0xNnpcIlxuICB9KSk7XG59KTtcblNsaWRlcnNILmRpc3BsYXlOYW1lID0gJ1NsaWRlcnNIJztcbmV4cG9ydCB2YXIgU2xpZGVyc0hEaW1lbnNpb25zID0ge1xuICBoZWlnaHQ6IDUxMixcbiAgd2lkdGg6IDUxMlxufTsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU3R5bGVkSWNvbkJhc2UgfSBmcm9tICdAc3R5bGVkLWljb25zL3N0eWxlZC1pY29uJztcbmV4cG9ydCB2YXIgU3luY0FsdCA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChwcm9wcywgcmVmKSB7XG4gIHZhciBhdHRycyA9IHtcbiAgICBcImZpbGxcIjogXCJjdXJyZW50Q29sb3JcIixcbiAgICBcInhtbG5zXCI6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICB9O1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkSWNvbkJhc2UsIF9leHRlbmRzKHtcbiAgICBpY29uQXR0cnM6IGF0dHJzLFxuICAgIGljb25WZXJ0aWNhbEFsaWduOiBcIm1pZGRsZVwiLFxuICAgIGljb25WaWV3Qm94OiBcIjAgMCA1MTIgNTEyXCJcbiAgfSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBmaWxsOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIGQ6IFwiTTM3MC43MiAxMzMuMjhDMzM5LjQ1OCAxMDQuMDA4IDI5OC44ODggODcuOTYyIDI1NS44NDggODhjLTc3LjQ1OC4wNjgtMTQ0LjMyOCA1My4xNzgtMTYyLjc5MSAxMjYuODUtMS4zNDQgNS4zNjMtNi4xMjIgOS4xNS0xMS42NTEgOS4xNUgyNC4xMDNjLTcuNDk4IDAtMTMuMTk0LTYuODA3LTExLjgwNy0xNC4xNzZDMzMuOTMzIDk0LjkyNCAxMzQuODEzIDggMjU2IDhjNjYuNDQ4IDAgMTI2Ljc5MSAyNi4xMzYgMTcxLjMxNSA2OC42ODVMNDYzLjAzIDQwLjk3QzQ3OC4xNDkgMjUuODUxIDUwNCAzNi41NTkgNTA0IDU3Ljk0MVYxOTJjMCAxMy4yNTUtMTAuNzQ1IDI0LTI0IDI0SDM0NS45NDFjLTIxLjM4MiAwLTMyLjA5LTI1Ljg1MS0xNi45NzEtNDAuOTcxbDQxLjc1LTQxLjc0OXpNMzIgMjk2aDEzNC4wNTljMjEuMzgyIDAgMzIuMDkgMjUuODUxIDE2Ljk3MSA0MC45NzFsLTQxLjc1IDQxLjc1YzMxLjI2MiAyOS4yNzMgNzEuODM1IDQ1LjMxOSAxMTQuODc2IDQ1LjI4IDc3LjQxOC0uMDcgMTQ0LjMxNS01My4xNDQgMTYyLjc4Ny0xMjYuODQ5IDEuMzQ0LTUuMzYzIDYuMTIyLTkuMTUgMTEuNjUxLTkuMTVoNTcuMzA0YzcuNDk4IDAgMTMuMTk0IDYuODA3IDExLjgwNyAxNC4xNzZDNDc4LjA2NyA0MTcuMDc2IDM3Ny4xODcgNTA0IDI1NiA1MDRjLTY2LjQ0OCAwLTEyNi43OTEtMjYuMTM2LTE3MS4zMTUtNjguNjg1TDQ4Ljk3IDQ3MS4wM0MzMy44NTEgNDg2LjE0OSA4IDQ3NS40NDEgOCA0NTQuMDU5VjMyMGMwLTEzLjI1NSAxMC43NDUtMjQgMjQtMjR6XCJcbiAgfSkpO1xufSk7XG5TeW5jQWx0LmRpc3BsYXlOYW1lID0gJ1N5bmNBbHQnO1xuZXhwb3J0IHZhciBTeW5jQWx0RGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiA1MTIsXG4gIHdpZHRoOiA1MTJcbn07IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0Jztcbi8qKiBAaWdub3JlICovXG5leHBvcnQgY29uc3QgZGVmYXVsdEdyb3VwID0ge1xuICAgIGZsb2F0YWJsZTogdHJ1ZSxcbiAgICBtYXhpbWl6YWJsZTogdHJ1ZSxcbn07XG4vKiogQGlnbm9yZSAqL1xuZXhwb3J0IGNvbnN0IHBsYWNlSG9sZGVyU3R5bGUgPSAncGxhY2UtaG9sZGVyJztcbi8qKiBAaWdub3JlICovXG5leHBvcnQgY29uc3QgbWF4aW1lUGxhY2VIb2xkZXJJZCA9ICctbWF4aW1pemVkLXBsYWNlaG9sZGVyLSc7XG4vKiogQGlnbm9yZSAqL1xuZXhwb3J0IGNvbnN0IHBsYWNlSG9sZGVyR3JvdXAgPSB7XG4gICAgZmxvYXRhYmxlOiBmYWxzZSxcbn07XG4vKiogQGlnbm9yZSAqL1xuZXhwb3J0IGNvbnN0IERvY2tDb250ZXh0VHlwZSA9IFJlYWN0LmNyZWF0ZUNvbnRleHQobnVsbCk7XG4vKiogQGlnbm9yZSAqL1xuZXhwb3J0IGNvbnN0IERvY2tDb250ZXh0UHJvdmlkZXIgPSBEb2NrQ29udGV4dFR5cGUuUHJvdmlkZXI7XG4vKiogQGlnbm9yZSAqL1xuZXhwb3J0IGNvbnN0IERvY2tDb250ZXh0Q29uc3VtZXIgPSBEb2NrQ29udGV4dFR5cGUuQ29uc3VtZXI7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgaXNGcmFnbWVudCB9IGZyb20gJ3JlYWN0LWlzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvQXJyYXkoY2hpbGRyZW4pIHtcbiAgdmFyIG9wdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gIHZhciByZXQgPSBbXTtcbiAgUmVhY3QuQ2hpbGRyZW4uZm9yRWFjaChjaGlsZHJlbiwgZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgaWYgKChjaGlsZCA9PT0gdW5kZWZpbmVkIHx8IGNoaWxkID09PSBudWxsKSAmJiAhb3B0aW9uLmtlZXBFbXB0eSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkKSkge1xuICAgICAgcmV0ID0gcmV0LmNvbmNhdCh0b0FycmF5KGNoaWxkKSk7XG4gICAgfSBlbHNlIGlmIChpc0ZyYWdtZW50KGNoaWxkKSAmJiBjaGlsZC5wcm9wcykge1xuICAgICAgcmV0ID0gcmV0LmNvbmNhdCh0b0FycmF5KGNoaWxkLnByb3BzLmNoaWxkcmVuLCBvcHRpb24pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0LnB1c2goY2hpbGQpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiByZXQ7XG59IiwiZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uICgpIHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIGFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYTtcblxuICBpZiAoLyhhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWlub3xhbmRyb2lkfGlwYWR8cGxheWJvb2t8c2lsay9pLnRlc3QoYWdlbnQpIHx8IC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3LShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtLXxjZWxsfGNodG18Y2xkY3xjbWQtfGNvKG1wfG5kKXxjcmF3fGRhKGl0fGxsfG5nKXxkYnRlfGRjLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8LWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseSgtfF8pfGcxIHV8ZzU2MHxnZW5lfGdmLTV8Zy1tb3xnbyhcXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkLShtfHB8dCl8aGVpLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzLWN8aHQoYygtfCB8X3xhfGd8cHxzfHQpfHRwKXxodShhd3x0Yyl8aS0oMjB8Z298bWEpfGkyMzB8aWFjKCB8LXxcXC8pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYSh0fHYpYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KCB8XFwvKXxrbG9ufGtwdCB8a3djLXxreW8oY3xrKXxsZShub3x4aSl8bGcoIGd8XFwvKGt8bHx1KXw1MHw1NHwtW2Etd10pfGxpYnd8bHlueHxtMS13fG0zZ2F8bTUwXFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bS1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dCgtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSktfG9ufHRmfHdmfHdnfHd0KXxub2soNnxpKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihhfGR8dCl8cGR4Z3xwZygxM3wtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdC1nfHFhLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8LVsyLTddfGktKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVxcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aC18b298cC0pfHNka1xcL3xzZShjKC18MHwxKXw0N3xtY3xuZHxyaSl8c2doLXxzaGFyfHNpZSgtfG0pfHNrLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aC18di18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2wtfHRkZy18dGVsKGl8bSl8dGltLXx0LW1vfHRvKHBsfHNoKXx0cyg3MHxtLXxtM3xtNSl8dHgtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118LXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhcy18eW91cnx6ZXRvfHp0ZS0vaS50ZXN0KGFnZW50ID09PSBudWxsIHx8IGFnZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhZ2VudC5zdWJzdHIoMCwgNCkpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59KTsiLCJpbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZUNvbnRyb2xsZWRTdGF0ZShkZWZhdWx0U3RhdGVWYWx1ZSwgb3B0aW9uKSB7XG4gIHZhciBfcmVmID0gb3B0aW9uIHx8IHt9LFxuICAgICAgZGVmYXVsdFZhbHVlID0gX3JlZi5kZWZhdWx0VmFsdWUsXG4gICAgICB2YWx1ZSA9IF9yZWYudmFsdWUsXG4gICAgICBvbkNoYW5nZSA9IF9yZWYub25DaGFuZ2UsXG4gICAgICBwb3N0U3RhdGUgPSBfcmVmLnBvc3RTdGF0ZTtcblxuICB2YXIgX1JlYWN0JHVzZVN0YXRlID0gUmVhY3QudXNlU3RhdGUoZnVuY3Rpb24gKCkge1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgaWYgKGRlZmF1bHRWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGRlZmF1bHRWYWx1ZSA9PT0gJ2Z1bmN0aW9uJyA/IGRlZmF1bHRWYWx1ZSgpIDogZGVmYXVsdFZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiB0eXBlb2YgZGVmYXVsdFN0YXRlVmFsdWUgPT09ICdmdW5jdGlvbicgPyBkZWZhdWx0U3RhdGVWYWx1ZSgpIDogZGVmYXVsdFN0YXRlVmFsdWU7XG4gIH0pLFxuICAgICAgX1JlYWN0JHVzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VTdGF0ZSwgMiksXG4gICAgICBpbm5lclZhbHVlID0gX1JlYWN0JHVzZVN0YXRlMlswXSxcbiAgICAgIHNldElubmVyVmFsdWUgPSBfUmVhY3QkdXNlU3RhdGUyWzFdO1xuXG4gIHZhciBtZXJnZWRWYWx1ZSA9IHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IGlubmVyVmFsdWU7XG5cbiAgaWYgKHBvc3RTdGF0ZSkge1xuICAgIG1lcmdlZFZhbHVlID0gcG9zdFN0YXRlKG1lcmdlZFZhbHVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyaWdnZXJDaGFuZ2UobmV3VmFsdWUpIHtcbiAgICBzZXRJbm5lclZhbHVlKG5ld1ZhbHVlKTtcblxuICAgIGlmIChtZXJnZWRWYWx1ZSAhPT0gbmV3VmFsdWUgJiYgb25DaGFuZ2UpIHtcbiAgICAgIG9uQ2hhbmdlKG5ld1ZhbHVlLCBtZXJnZWRWYWx1ZSk7XG4gICAgfVxuICB9IC8vIEVmZmVjdCBvZiByZXNldCB2YWx1ZSB0byBgdW5kZWZpbmVkYFxuXG5cbiAgdmFyIGZpcnN0UmVuZGVyUmVmID0gUmVhY3QudXNlUmVmKHRydWUpO1xuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmIChmaXJzdFJlbmRlclJlZi5jdXJyZW50KSB7XG4gICAgICBmaXJzdFJlbmRlclJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHNldElubmVyVmFsdWUodmFsdWUpO1xuICAgIH1cbiAgfSwgW3ZhbHVlXSk7XG4gIHJldHVybiBbbWVyZ2VkVmFsdWUsIHRyaWdnZXJDaGFuZ2VdO1xufSIsInZhciByYWYgPSBmdW5jdGlvbiByYWYoY2FsbGJhY2spIHtcbiAgcmV0dXJuICtzZXRUaW1lb3V0KGNhbGxiYWNrLCAxNik7XG59O1xuXG52YXIgY2FmID0gZnVuY3Rpb24gY2FmKG51bSkge1xuICByZXR1cm4gY2xlYXJUaW1lb3V0KG51bSk7XG59O1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgJ3JlcXVlc3RBbmltYXRpb25GcmFtZScgaW4gd2luZG93KSB7XG4gIHJhZiA9IGZ1bmN0aW9uIHJhZihjYWxsYmFjaykge1xuICAgIHJldHVybiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKTtcbiAgfTtcblxuICBjYWYgPSBmdW5jdGlvbiBjYWYoaGFuZGxlKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShoYW5kbGUpO1xuICB9O1xufVxuXG52YXIgcmFmVVVJRCA9IDA7XG52YXIgcmFmSWRzID0gbmV3IE1hcCgpO1xuXG5mdW5jdGlvbiBjbGVhbnVwKGlkKSB7XG4gIHJhZklkcy5kZWxldGUoaWQpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB3cmFwcGVyUmFmKGNhbGxiYWNrKSB7XG4gIHZhciB0aW1lcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMTtcbiAgcmFmVVVJRCArPSAxO1xuICB2YXIgaWQgPSByYWZVVUlEO1xuXG4gIGZ1bmN0aW9uIGNhbGxSZWYobGVmdFRpbWVzKSB7XG4gICAgaWYgKGxlZnRUaW1lcyA9PT0gMCkge1xuICAgICAgLy8gQ2xlYW4gdXBcbiAgICAgIGNsZWFudXAoaWQpOyAvLyBUcmlnZ2VyXG5cbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5leHQgcmFmXG4gICAgICB2YXIgcmVhbElkID0gcmFmKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2FsbFJlZihsZWZ0VGltZXMgLSAxKTtcbiAgICAgIH0pOyAvLyBCaW5kIHJlYWwgcmFmIGlkXG5cbiAgICAgIHJhZklkcy5zZXQoaWQsIHJlYWxJZCk7XG4gICAgfVxuICB9XG5cbiAgY2FsbFJlZih0aW1lcyk7XG4gIHJldHVybiBpZDtcbn1cblxud3JhcHBlclJhZi5jYW5jZWwgPSBmdW5jdGlvbiAoaWQpIHtcbiAgdmFyIHJlYWxJZCA9IHJhZklkcy5nZXQoaWQpO1xuICBjbGVhbnVwKHJlYWxJZCk7XG4gIHJldHVybiBjYWYocmVhbElkKTtcbn07IiwiaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG4vKipcbiAqIFJldHVybiBpZiBhIG5vZGUgaXMgYSBET00gbm9kZS4gRWxzZSB3aWxsIHJldHVybiBieSBgZmluZERPTU5vZGVgXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZmluZERPTU5vZGUobm9kZSkge1xuICBpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICByZXR1cm4gUmVhY3RET00uZmluZERPTU5vZGUobm9kZSk7XG59IiwiaW1wb3J0IF90eXBlb2YgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZlwiO1xuaW1wb3J0IHsgaXNNZW1vIH0gZnJvbSAncmVhY3QtaXMnO1xuZXhwb3J0IGZ1bmN0aW9uIGZpbGxSZWYocmVmLCBub2RlKSB7XG4gIGlmICh0eXBlb2YgcmVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmVmKG5vZGUpO1xuICB9IGVsc2UgaWYgKF90eXBlb2YocmVmKSA9PT0gJ29iamVjdCcgJiYgcmVmICYmICdjdXJyZW50JyBpbiByZWYpIHtcbiAgICByZWYuY3VycmVudCA9IG5vZGU7XG4gIH1cbn1cbi8qKlxuICogTWVyZ2UgcmVmcyBpbnRvIG9uZSByZWYgZnVuY3Rpb24gdG8gc3VwcG9ydCByZWYgcGFzc2luZy5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29tcG9zZVJlZigpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHJlZnMgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgcmVmc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAobm9kZSkge1xuICAgIHJlZnMuZm9yRWFjaChmdW5jdGlvbiAocmVmKSB7XG4gICAgICBmaWxsUmVmKHJlZiwgbm9kZSk7XG4gICAgfSk7XG4gIH07XG59XG5leHBvcnQgZnVuY3Rpb24gc3VwcG9ydFJlZihub2RlT3JDb21wb25lbnQpIHtcbiAgdmFyIF90eXBlJHByb3RvdHlwZSwgX25vZGVPckNvbXBvbmVudCRwcm90O1xuXG4gIHZhciB0eXBlID0gaXNNZW1vKG5vZGVPckNvbXBvbmVudCkgPyBub2RlT3JDb21wb25lbnQudHlwZS50eXBlIDogbm9kZU9yQ29tcG9uZW50LnR5cGU7IC8vIEZ1bmN0aW9uIGNvbXBvbmVudCBub2RlXG5cbiAgaWYgKHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nICYmICEoKF90eXBlJHByb3RvdHlwZSA9IHR5cGUucHJvdG90eXBlKSA9PT0gbnVsbCB8fCBfdHlwZSRwcm90b3R5cGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90eXBlJHByb3RvdHlwZS5yZW5kZXIpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IC8vIENsYXNzIGNvbXBvbmVudFxuXG5cbiAgaWYgKHR5cGVvZiBub2RlT3JDb21wb25lbnQgPT09ICdmdW5jdGlvbicgJiYgISgoX25vZGVPckNvbXBvbmVudCRwcm90ID0gbm9kZU9yQ29tcG9uZW50LnByb3RvdHlwZSkgPT09IG51bGwgfHwgX25vZGVPckNvbXBvbmVudCRwcm90ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbm9kZU9yQ29tcG9uZW50JHByb3QucmVuZGVyKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuLyogZXNsaW50LWVuYWJsZSAqLyIsIi8qKlxyXG4gKiBBIGNvbGxlY3Rpb24gb2Ygc2hpbXMgdGhhdCBwcm92aWRlIG1pbmltYWwgZnVuY3Rpb25hbGl0eSBvZiB0aGUgRVM2IGNvbGxlY3Rpb25zLlxyXG4gKlxyXG4gKiBUaGVzZSBpbXBsZW1lbnRhdGlvbnMgYXJlIG5vdCBtZWFudCB0byBiZSB1c2VkIG91dHNpZGUgb2YgdGhlIFJlc2l6ZU9ic2VydmVyXHJcbiAqIG1vZHVsZXMgYXMgdGhleSBjb3ZlciBvbmx5IGEgbGltaXRlZCByYW5nZSBvZiB1c2UgY2FzZXMuXHJcbiAqL1xyXG4vKiBlc2xpbnQtZGlzYWJsZSByZXF1aXJlLWpzZG9jLCB2YWxpZC1qc2RvYyAqL1xyXG52YXIgTWFwU2hpbSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodHlwZW9mIE1hcCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gTWFwO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGluZGV4IGluIHByb3ZpZGVkIGFycmF5IHRoYXQgbWF0Y2hlcyB0aGUgc3BlY2lmaWVkIGtleS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PEFycmF5Pn0gYXJyXHJcbiAgICAgKiBAcGFyYW0geyp9IGtleVxyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0SW5kZXgoYXJyLCBrZXkpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gLTE7XHJcbiAgICAgICAgYXJyLnNvbWUoZnVuY3Rpb24gKGVudHJ5LCBpbmRleCkge1xyXG4gICAgICAgICAgICBpZiAoZW50cnlbMF0gPT09IGtleSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIHJldHVybiAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gY2xhc3NfMSgpIHtcclxuICAgICAgICAgICAgdGhpcy5fX2VudHJpZXNfXyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY2xhc3NfMS5wcm90b3R5cGUsIFwic2l6ZVwiLCB7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19lbnRyaWVzX18ubGVuZ3RoO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcGFyYW0geyp9IGtleVxyXG4gICAgICAgICAqIEByZXR1cm5zIHsqfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXgodGhpcy5fX2VudHJpZXNfXywga2V5KTtcclxuICAgICAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy5fX2VudHJpZXNfX1tpbmRleF07XHJcbiAgICAgICAgICAgIHJldHVybiBlbnRyeSAmJiBlbnRyeVsxXTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0ga2V5XHJcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZVxyXG4gICAgICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGdldEluZGV4KHRoaXMuX19lbnRyaWVzX18sIGtleSk7XHJcbiAgICAgICAgICAgIGlmICh+aW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX19lbnRyaWVzX19baW5kZXhdWzFdID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9fZW50cmllc19fLnB1c2goW2tleSwgdmFsdWVdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIHsqfSBrZXlcclxuICAgICAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBjbGFzc18xLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgIHZhciBlbnRyaWVzID0gdGhpcy5fX2VudHJpZXNfXztcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXgoZW50cmllcywga2V5KTtcclxuICAgICAgICAgICAgaWYgKH5pbmRleCkge1xyXG4gICAgICAgICAgICAgICAgZW50cmllcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcGFyYW0geyp9IGtleVxyXG4gICAgICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICEhfmdldEluZGV4KHRoaXMuX19lbnRyaWVzX18sIGtleSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBjbGFzc18xLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5fX2VudHJpZXNfXy5zcGxpY2UoMCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xyXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW2N0eD1udWxsXVxyXG4gICAgICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNsYXNzXzEucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGN0eCkge1xyXG4gICAgICAgICAgICBpZiAoY3R4ID09PSB2b2lkIDApIHsgY3R4ID0gbnVsbDsgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5fX2VudHJpZXNfXzsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbnRyeSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoY3R4LCBlbnRyeVsxXSwgZW50cnlbMF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY2xhc3NfMTtcclxuICAgIH0oKSk7XHJcbn0pKCk7XG5cbi8qKlxyXG4gKiBEZXRlY3RzIHdoZXRoZXIgd2luZG93IGFuZCBkb2N1bWVudCBvYmplY3RzIGFyZSBhdmFpbGFibGUgaW4gY3VycmVudCBlbnZpcm9ubWVudC5cclxuICovXHJcbnZhciBpc0Jyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5kb2N1bWVudCA9PT0gZG9jdW1lbnQ7XG5cbi8vIFJldHVybnMgZ2xvYmFsIG9iamVjdCBvZiBhIGN1cnJlbnQgZW52aXJvbm1lbnQuXHJcbnZhciBnbG9iYWwkMSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsLk1hdGggPT09IE1hdGgpIHtcclxuICAgICAgICByZXR1cm4gZ2xvYmFsO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiBzZWxmLk1hdGggPT09IE1hdGgpIHtcclxuICAgICAgICByZXR1cm4gc2VsZjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PT0gTWF0aCkge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3c7XHJcbiAgICB9XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmNcclxuICAgIHJldHVybiBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xyXG59KSgpO1xuXG4vKipcclxuICogQSBzaGltIGZvciB0aGUgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHdoaWNoIGZhbGxzIGJhY2sgdG8gdGhlIHNldFRpbWVvdXQgaWZcclxuICogZmlyc3Qgb25lIGlzIG5vdCBzdXBwb3J0ZWQuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJlcXVlc3RzJyBpZGVudGlmaWVyLlxyXG4gKi9cclxudmFyIHJlcXVlc3RBbmltYXRpb25GcmFtZSQxID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0eXBlb2YgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgLy8gSXQncyByZXF1aXJlZCB0byB1c2UgYSBib3VuZGVkIGZ1bmN0aW9uIGJlY2F1c2UgSUUgc29tZXRpbWVzIHRocm93c1xyXG4gICAgICAgIC8vIGFuIFwiSW52YWxpZCBjYWxsaW5nIG9iamVjdFwiIGVycm9yIGlmIHJBRiBpcyBpbnZva2VkIHdpdGhvdXQgdGhlIGdsb2JhbFxyXG4gICAgICAgIC8vIG9iamVjdCBvbiB0aGUgbGVmdCBoYW5kIHNpZGUuXHJcbiAgICAgICAgcmV0dXJuIHJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKGdsb2JhbCQxKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmdW5jdGlvbiAoY2FsbGJhY2spIHsgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gY2FsbGJhY2soRGF0ZS5ub3coKSk7IH0sIDEwMDAgLyA2MCk7IH07XHJcbn0pKCk7XG5cbi8vIERlZmluZXMgbWluaW11bSB0aW1lb3V0IGJlZm9yZSBhZGRpbmcgYSB0cmFpbGluZyBjYWxsLlxyXG52YXIgdHJhaWxpbmdUaW1lb3V0ID0gMjtcclxuLyoqXHJcbiAqIENyZWF0ZXMgYSB3cmFwcGVyIGZ1bmN0aW9uIHdoaWNoIGVuc3VyZXMgdGhhdCBwcm92aWRlZCBjYWxsYmFjayB3aWxsIGJlXHJcbiAqIGludm9rZWQgb25seSBvbmNlIGR1cmluZyB0aGUgc3BlY2lmaWVkIGRlbGF5IHBlcmlvZC5cclxuICpcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBGdW5jdGlvbiB0byBiZSBpbnZva2VkIGFmdGVyIHRoZSBkZWxheSBwZXJpb2QuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheSAtIERlbGF5IGFmdGVyIHdoaWNoIHRvIGludm9rZSBjYWxsYmFjay5cclxuICogQHJldHVybnMge0Z1bmN0aW9ufVxyXG4gKi9cclxuZnVuY3Rpb24gdGhyb3R0bGUgKGNhbGxiYWNrLCBkZWxheSkge1xyXG4gICAgdmFyIGxlYWRpbmdDYWxsID0gZmFsc2UsIHRyYWlsaW5nQ2FsbCA9IGZhbHNlLCBsYXN0Q2FsbFRpbWUgPSAwO1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbnZva2VzIHRoZSBvcmlnaW5hbCBjYWxsYmFjayBmdW5jdGlvbiBhbmQgc2NoZWR1bGVzIG5ldyBpbnZvY2F0aW9uIGlmXHJcbiAgICAgKiB0aGUgXCJwcm94eVwiIHdhcyBjYWxsZWQgZHVyaW5nIGN1cnJlbnQgcmVxdWVzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcmVzb2x2ZVBlbmRpbmcoKSB7XHJcbiAgICAgICAgaWYgKGxlYWRpbmdDYWxsKSB7XHJcbiAgICAgICAgICAgIGxlYWRpbmdDYWxsID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0cmFpbGluZ0NhbGwpIHtcclxuICAgICAgICAgICAgcHJveHkoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENhbGxiYWNrIGludm9rZWQgYWZ0ZXIgdGhlIHNwZWNpZmllZCBkZWxheS4gSXQgd2lsbCBmdXJ0aGVyIHBvc3Rwb25lXHJcbiAgICAgKiBpbnZvY2F0aW9uIG9mIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiBkZWxlZ2F0aW5nIGl0IHRvIHRoZVxyXG4gICAgICogcmVxdWVzdEFuaW1hdGlvbkZyYW1lLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiB0aW1lb3V0Q2FsbGJhY2soKSB7XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lJDEocmVzb2x2ZVBlbmRpbmcpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTY2hlZHVsZXMgaW52b2NhdGlvbiBvZiB0aGUgb3JpZ2luYWwgZnVuY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHByb3h5KCkge1xyXG4gICAgICAgIHZhciB0aW1lU3RhbXAgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIGlmIChsZWFkaW5nQ2FsbCkge1xyXG4gICAgICAgICAgICAvLyBSZWplY3QgaW1tZWRpYXRlbHkgZm9sbG93aW5nIGNhbGxzLlxyXG4gICAgICAgICAgICBpZiAodGltZVN0YW1wIC0gbGFzdENhbGxUaW1lIDwgdHJhaWxpbmdUaW1lb3V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gU2NoZWR1bGUgbmV3IGNhbGwgdG8gYmUgaW4gaW52b2tlZCB3aGVuIHRoZSBwZW5kaW5nIG9uZSBpcyByZXNvbHZlZC5cclxuICAgICAgICAgICAgLy8gVGhpcyBpcyBpbXBvcnRhbnQgZm9yIFwidHJhbnNpdGlvbnNcIiB3aGljaCBuZXZlciBhY3R1YWxseSBzdGFydFxyXG4gICAgICAgICAgICAvLyBpbW1lZGlhdGVseSBzbyB0aGVyZSBpcyBhIGNoYW5jZSB0aGF0IHdlIG1pZ2h0IG1pc3Mgb25lIGlmIGNoYW5nZVxyXG4gICAgICAgICAgICAvLyBoYXBwZW5zIGFtaWRzIHRoZSBwZW5kaW5nIGludm9jYXRpb24uXHJcbiAgICAgICAgICAgIHRyYWlsaW5nQ2FsbCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBsZWFkaW5nQ2FsbCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRyYWlsaW5nQ2FsbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRpbWVvdXRDYWxsYmFjaywgZGVsYXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lU3RhbXA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJveHk7XHJcbn1cblxuLy8gTWluaW11bSBkZWxheSBiZWZvcmUgaW52b2tpbmcgdGhlIHVwZGF0ZSBvZiBvYnNlcnZlcnMuXHJcbnZhciBSRUZSRVNIX0RFTEFZID0gMjA7XHJcbi8vIEEgbGlzdCBvZiBzdWJzdHJpbmdzIG9mIENTUyBwcm9wZXJ0aWVzIHVzZWQgdG8gZmluZCB0cmFuc2l0aW9uIGV2ZW50cyB0aGF0XHJcbi8vIG1pZ2h0IGFmZmVjdCBkaW1lbnNpb25zIG9mIG9ic2VydmVkIGVsZW1lbnRzLlxyXG52YXIgdHJhbnNpdGlvbktleXMgPSBbJ3RvcCcsICdyaWdodCcsICdib3R0b20nLCAnbGVmdCcsICd3aWR0aCcsICdoZWlnaHQnLCAnc2l6ZScsICd3ZWlnaHQnXTtcclxuLy8gQ2hlY2sgaWYgTXV0YXRpb25PYnNlcnZlciBpcyBhdmFpbGFibGUuXHJcbnZhciBtdXRhdGlvbk9ic2VydmVyU3VwcG9ydGVkID0gdHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnO1xyXG4vKipcclxuICogU2luZ2xldG9uIGNvbnRyb2xsZXIgY2xhc3Mgd2hpY2ggaGFuZGxlcyB1cGRhdGVzIG9mIFJlc2l6ZU9ic2VydmVyIGluc3RhbmNlcy5cclxuICovXHJcbnZhciBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciBET00gbGlzdGVuZXJzIGhhdmUgYmVlbiBhZGRlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtib29sZWFufVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGVkXyA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRlbGxzIHRoYXQgY29udHJvbGxlciBoYXMgc3Vic2NyaWJlZCBmb3IgTXV0YXRpb24gRXZlbnRzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGUge2Jvb2xlYW59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5tdXRhdGlvbkV2ZW50c0FkZGVkXyA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEtlZXBzIHJlZmVyZW5jZSB0byB0aGUgaW5zdGFuY2Ugb2YgTXV0YXRpb25PYnNlcnZlci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtNdXRhdGlvbk9ic2VydmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGxpc3Qgb2YgY29ubmVjdGVkIG9ic2VydmVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtBcnJheTxSZXNpemVPYnNlcnZlclNQST59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnNfID0gW107XHJcbiAgICAgICAgdGhpcy5vblRyYW5zaXRpb25FbmRfID0gdGhpcy5vblRyYW5zaXRpb25FbmRfLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoID0gdGhyb3R0bGUodGhpcy5yZWZyZXNoLmJpbmQodGhpcyksIFJFRlJFU0hfREVMQVkpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIG9ic2VydmVyIHRvIG9ic2VydmVycyBsaXN0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7UmVzaXplT2JzZXJ2ZXJTUEl9IG9ic2VydmVyIC0gT2JzZXJ2ZXIgdG8gYmUgYWRkZWQuXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLnByb3RvdHlwZS5hZGRPYnNlcnZlciA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgIGlmICghfnRoaXMub2JzZXJ2ZXJzXy5pbmRleE9mKG9ic2VydmVyKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmVyc18ucHVzaChvYnNlcnZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFkZCBsaXN0ZW5lcnMgaWYgdGhleSBoYXZlbid0IGJlZW4gYWRkZWQgeWV0LlxyXG4gICAgICAgIGlmICghdGhpcy5jb25uZWN0ZWRfKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdF8oKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIG9ic2VydmVyIGZyb20gb2JzZXJ2ZXJzIGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtSZXNpemVPYnNlcnZlclNQSX0gb2JzZXJ2ZXIgLSBPYnNlcnZlciB0byBiZSByZW1vdmVkLlxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5wcm90b3R5cGUucmVtb3ZlT2JzZXJ2ZXIgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnNfO1xyXG4gICAgICAgIHZhciBpbmRleCA9IG9ic2VydmVycy5pbmRleE9mKG9ic2VydmVyKTtcclxuICAgICAgICAvLyBSZW1vdmUgb2JzZXJ2ZXIgaWYgaXQncyBwcmVzZW50IGluIHJlZ2lzdHJ5LlxyXG4gICAgICAgIGlmICh+aW5kZXgpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFJlbW92ZSBsaXN0ZW5lcnMgaWYgY29udHJvbGxlciBoYXMgbm8gY29ubmVjdGVkIG9ic2VydmVycy5cclxuICAgICAgICBpZiAoIW9ic2VydmVycy5sZW5ndGggJiYgdGhpcy5jb25uZWN0ZWRfKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdF8oKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbnZva2VzIHRoZSB1cGRhdGUgb2Ygb2JzZXJ2ZXJzLiBJdCB3aWxsIGNvbnRpbnVlIHJ1bm5pbmcgdXBkYXRlcyBpbnNvZmFyXHJcbiAgICAgKiBpdCBkZXRlY3RzIGNoYW5nZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY2hhbmdlc0RldGVjdGVkID0gdGhpcy51cGRhdGVPYnNlcnZlcnNfKCk7XHJcbiAgICAgICAgLy8gQ29udGludWUgcnVubmluZyB1cGRhdGVzIGlmIGNoYW5nZXMgaGF2ZSBiZWVuIGRldGVjdGVkIGFzIHRoZXJlIG1pZ2h0XHJcbiAgICAgICAgLy8gYmUgZnV0dXJlIG9uZXMgY2F1c2VkIGJ5IENTUyB0cmFuc2l0aW9ucy5cclxuICAgICAgICBpZiAoY2hhbmdlc0RldGVjdGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgZXZlcnkgb2JzZXJ2ZXIgZnJvbSBvYnNlcnZlcnMgbGlzdCBhbmQgbm90aWZpZXMgdGhlbSBvZiBxdWV1ZWRcclxuICAgICAqIGVudHJpZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIFwidHJ1ZVwiIGlmIGFueSBvYnNlcnZlciBoYXMgZGV0ZWN0ZWQgY2hhbmdlcyBpblxyXG4gICAgICogICAgICBkaW1lbnNpb25zIG9mIGl0J3MgZWxlbWVudHMuXHJcbiAgICAgKi9cclxuICAgIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5wcm90b3R5cGUudXBkYXRlT2JzZXJ2ZXJzXyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBDb2xsZWN0IG9ic2VydmVycyB0aGF0IGhhdmUgYWN0aXZlIG9ic2VydmF0aW9ucy5cclxuICAgICAgICB2YXIgYWN0aXZlT2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnNfLmZpbHRlcihmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmdhdGhlckFjdGl2ZSgpLCBvYnNlcnZlci5oYXNBY3RpdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBEZWxpdmVyIG5vdGlmaWNhdGlvbnMgaW4gYSBzZXBhcmF0ZSBjeWNsZSBpbiBvcmRlciB0byBhdm9pZCBhbnlcclxuICAgICAgICAvLyBjb2xsaXNpb25zIGJldHdlZW4gb2JzZXJ2ZXJzLCBlLmcuIHdoZW4gbXVsdGlwbGUgaW5zdGFuY2VzIG9mXHJcbiAgICAgICAgLy8gUmVzaXplT2JzZXJ2ZXIgYXJlIHRyYWNraW5nIHRoZSBzYW1lIGVsZW1lbnQgYW5kIHRoZSBjYWxsYmFjayBvZiBvbmVcclxuICAgICAgICAvLyBvZiB0aGVtIGNoYW5nZXMgY29udGVudCBkaW1lbnNpb25zIG9mIHRoZSBvYnNlcnZlZCB0YXJnZXQuIFNvbWV0aW1lc1xyXG4gICAgICAgIC8vIHRoaXMgbWF5IHJlc3VsdCBpbiBub3RpZmljYXRpb25zIGJlaW5nIGJsb2NrZWQgZm9yIHRoZSByZXN0IG9mIG9ic2VydmVycy5cclxuICAgICAgICBhY3RpdmVPYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgcmV0dXJuIG9ic2VydmVyLmJyb2FkY2FzdEFjdGl2ZSgpOyB9KTtcclxuICAgICAgICByZXR1cm4gYWN0aXZlT2JzZXJ2ZXJzLmxlbmd0aCA+IDA7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyBET00gbGlzdGVuZXJzLlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLnByb3RvdHlwZS5jb25uZWN0XyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHJ1bm5pbmcgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudCBvciBpZiBsaXN0ZW5lcnNcclxuICAgICAgICAvLyBoYXZlIGJlZW4gYWxyZWFkeSBhZGRlZC5cclxuICAgICAgICBpZiAoIWlzQnJvd3NlciB8fCB0aGlzLmNvbm5lY3RlZF8pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTdWJzY3JpcHRpb24gdG8gdGhlIFwiVHJhbnNpdGlvbmVuZFwiIGV2ZW50IGlzIHVzZWQgYXMgYSB3b3JrYXJvdW5kIGZvclxyXG4gICAgICAgIC8vIGRlbGF5ZWQgdHJhbnNpdGlvbnMuIFRoaXMgd2F5IGl0J3MgcG9zc2libGUgdG8gY2FwdHVyZSBhdCBsZWFzdCB0aGVcclxuICAgICAgICAvLyBmaW5hbCBzdGF0ZSBvZiBhbiBlbGVtZW50LlxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCB0aGlzLm9uVHJhbnNpdGlvbkVuZF8pO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlZnJlc2gpO1xyXG4gICAgICAgIGlmIChtdXRhdGlvbk9ic2VydmVyU3VwcG9ydGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5yZWZyZXNoKTtcclxuICAgICAgICAgICAgdGhpcy5tdXRhdGlvbnNPYnNlcnZlcl8ub2JzZXJ2ZShkb2N1bWVudCwge1xyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNoYXJhY3RlckRhdGE6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzdWJ0cmVlOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NU3VidHJlZU1vZGlmaWVkJywgdGhpcy5yZWZyZXNoKTtcclxuICAgICAgICAgICAgdGhpcy5tdXRhdGlvbkV2ZW50c0FkZGVkXyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29ubmVjdGVkXyA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIERPTSBsaXN0ZW5lcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICovXHJcbiAgICBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIucHJvdG90eXBlLmRpc2Nvbm5lY3RfID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIERvIG5vdGhpbmcgaWYgcnVubmluZyBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50IG9yIGlmIGxpc3RlbmVyc1xyXG4gICAgICAgIC8vIGhhdmUgYmVlbiBhbHJlYWR5IHJlbW92ZWQuXHJcbiAgICAgICAgaWYgKCFpc0Jyb3dzZXIgfHwgIXRoaXMuY29ubmVjdGVkXykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCB0aGlzLm9uVHJhbnNpdGlvbkVuZF8pO1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlZnJlc2gpO1xyXG4gICAgICAgIGlmICh0aGlzLm11dGF0aW9uc09ic2VydmVyXykge1xyXG4gICAgICAgICAgICB0aGlzLm11dGF0aW9uc09ic2VydmVyXy5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm11dGF0aW9uRXZlbnRzQWRkZWRfKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ0RPTVN1YnRyZWVNb2RpZmllZCcsIHRoaXMucmVmcmVzaCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfID0gbnVsbDtcclxuICAgICAgICB0aGlzLm11dGF0aW9uRXZlbnRzQWRkZWRfID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jb25uZWN0ZWRfID0gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBcIlRyYW5zaXRpb25lbmRcIiBldmVudCBoYW5kbGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge1RyYW5zaXRpb25FdmVudH0gZXZlbnRcclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICovXHJcbiAgICBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIucHJvdG90eXBlLm9uVHJhbnNpdGlvbkVuZF8gPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICB2YXIgX2IgPSBfYS5wcm9wZXJ0eU5hbWUsIHByb3BlcnR5TmFtZSA9IF9iID09PSB2b2lkIDAgPyAnJyA6IF9iO1xyXG4gICAgICAgIC8vIERldGVjdCB3aGV0aGVyIHRyYW5zaXRpb24gbWF5IGFmZmVjdCBkaW1lbnNpb25zIG9mIGFuIGVsZW1lbnQuXHJcbiAgICAgICAgdmFyIGlzUmVmbG93UHJvcGVydHkgPSB0cmFuc2l0aW9uS2V5cy5zb21lKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICEhfnByb3BlcnR5TmFtZS5pbmRleE9mKGtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGlzUmVmbG93UHJvcGVydHkpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBpbnN0YW5jZSBvZiB0aGUgUmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtSZXNpemVPYnNlcnZlckNvbnRyb2xsZXJ9XHJcbiAgICAgKi9cclxuICAgIFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlci5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2VfKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VfID0gbmV3IFJlc2l6ZU9ic2VydmVyQ29udHJvbGxlcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZV87XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBIb2xkcyByZWZlcmVuY2UgdG8gdGhlIGNvbnRyb2xsZXIncyBpbnN0YW5jZS5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZSB7UmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyfVxyXG4gICAgICovXHJcbiAgICBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIuaW5zdGFuY2VfID0gbnVsbDtcclxuICAgIHJldHVybiBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXI7XHJcbn0oKSk7XG5cbi8qKlxyXG4gKiBEZWZpbmVzIG5vbi13cml0YWJsZS9lbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgdGhlIHByb3ZpZGVkIHRhcmdldCBvYmplY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgLSBPYmplY3QgZm9yIHdoaWNoIHRvIGRlZmluZSBwcm9wZXJ0aWVzLlxyXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgLSBQcm9wZXJ0aWVzIHRvIGJlIGRlZmluZWQuXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IFRhcmdldCBvYmplY3QuXHJcbiAqL1xyXG52YXIgZGVmaW5lQ29uZmlndXJhYmxlID0gKGZ1bmN0aW9uICh0YXJnZXQsIHByb3BzKSB7XHJcbiAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMocHJvcHMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciBrZXkgPSBfYVtfaV07XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCB7XHJcbiAgICAgICAgICAgIHZhbHVlOiBwcm9wc1trZXldLFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXQ7XHJcbn0pO1xuXG4vKipcclxuICogUmV0dXJucyB0aGUgZ2xvYmFsIG9iamVjdCBhc3NvY2lhdGVkIHdpdGggcHJvdmlkZWQgZWxlbWVudC5cclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IHRhcmdldFxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fVxyXG4gKi9cclxudmFyIGdldFdpbmRvd09mID0gKGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgIC8vIEFzc3VtZSB0aGF0IHRoZSBlbGVtZW50IGlzIGFuIGluc3RhbmNlIG9mIE5vZGUsIHdoaWNoIG1lYW5zIHRoYXQgaXRcclxuICAgIC8vIGhhcyB0aGUgXCJvd25lckRvY3VtZW50XCIgcHJvcGVydHkgZnJvbSB3aGljaCB3ZSBjYW4gcmV0cmlldmUgYVxyXG4gICAgLy8gY29ycmVzcG9uZGluZyBnbG9iYWwgb2JqZWN0LlxyXG4gICAgdmFyIG93bmVyR2xvYmFsID0gdGFyZ2V0ICYmIHRhcmdldC5vd25lckRvY3VtZW50ICYmIHRhcmdldC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xyXG4gICAgLy8gUmV0dXJuIHRoZSBsb2NhbCBnbG9iYWwgb2JqZWN0IGlmIGl0J3Mgbm90IHBvc3NpYmxlIGV4dHJhY3Qgb25lIGZyb21cclxuICAgIC8vIHByb3ZpZGVkIGVsZW1lbnQuXHJcbiAgICByZXR1cm4gb3duZXJHbG9iYWwgfHwgZ2xvYmFsJDE7XHJcbn0pO1xuXG4vLyBQbGFjZWhvbGRlciBvZiBhbiBlbXB0eSBjb250ZW50IHJlY3RhbmdsZS5cclxudmFyIGVtcHR5UmVjdCA9IGNyZWF0ZVJlY3RJbml0KDAsIDAsIDAsIDApO1xyXG4vKipcclxuICogQ29udmVydHMgcHJvdmlkZWQgc3RyaW5nIHRvIGEgbnVtYmVyLlxyXG4gKlxyXG4gKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IHZhbHVlXHJcbiAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAqL1xyXG5mdW5jdGlvbiB0b0Zsb2F0KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSkgfHwgMDtcclxufVxyXG4vKipcclxuICogRXh0cmFjdHMgYm9yZGVycyBzaXplIGZyb20gcHJvdmlkZWQgc3R5bGVzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0NTU1N0eWxlRGVjbGFyYXRpb259IHN0eWxlc1xyXG4gKiBAcGFyYW0gey4uLnN0cmluZ30gcG9zaXRpb25zIC0gQm9yZGVycyBwb3NpdGlvbnMgKHRvcCwgcmlnaHQsIC4uLilcclxuICogQHJldHVybnMge251bWJlcn1cclxuICovXHJcbmZ1bmN0aW9uIGdldEJvcmRlcnNTaXplKHN0eWxlcykge1xyXG4gICAgdmFyIHBvc2l0aW9ucyA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICBwb3NpdGlvbnNbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcG9zaXRpb25zLnJlZHVjZShmdW5jdGlvbiAoc2l6ZSwgcG9zaXRpb24pIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSBzdHlsZXNbJ2JvcmRlci0nICsgcG9zaXRpb24gKyAnLXdpZHRoJ107XHJcbiAgICAgICAgcmV0dXJuIHNpemUgKyB0b0Zsb2F0KHZhbHVlKTtcclxuICAgIH0sIDApO1xyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0cyBwYWRkaW5ncyBzaXplcyBmcm9tIHByb3ZpZGVkIHN0eWxlcy5cclxuICpcclxuICogQHBhcmFtIHtDU1NTdHlsZURlY2xhcmF0aW9ufSBzdHlsZXNcclxuICogQHJldHVybnMge09iamVjdH0gUGFkZGluZ3MgYm94LlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0UGFkZGluZ3Moc3R5bGVzKSB7XHJcbiAgICB2YXIgcG9zaXRpb25zID0gWyd0b3AnLCAncmlnaHQnLCAnYm90dG9tJywgJ2xlZnQnXTtcclxuICAgIHZhciBwYWRkaW5ncyA9IHt9O1xyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBwb3NpdGlvbnNfMSA9IHBvc2l0aW9uczsgX2kgPCBwb3NpdGlvbnNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIgcG9zaXRpb24gPSBwb3NpdGlvbnNfMVtfaV07XHJcbiAgICAgICAgdmFyIHZhbHVlID0gc3R5bGVzWydwYWRkaW5nLScgKyBwb3NpdGlvbl07XHJcbiAgICAgICAgcGFkZGluZ3NbcG9zaXRpb25dID0gdG9GbG9hdCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFkZGluZ3M7XHJcbn1cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgY29udGVudCByZWN0YW5nbGUgb2YgcHJvdmlkZWQgU1ZHIGVsZW1lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7U1ZHR3JhcGhpY3NFbGVtZW50fSB0YXJnZXQgLSBFbGVtZW50IGNvbnRlbnQgcmVjdGFuZ2xlIG9mIHdoaWNoIG5lZWRzXHJcbiAqICAgICAgdG8gYmUgY2FsY3VsYXRlZC5cclxuICogQHJldHVybnMge0RPTVJlY3RJbml0fVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0U1ZHQ29udGVudFJlY3QodGFyZ2V0KSB7XHJcbiAgICB2YXIgYmJveCA9IHRhcmdldC5nZXRCQm94KCk7XHJcbiAgICByZXR1cm4gY3JlYXRlUmVjdEluaXQoMCwgMCwgYmJveC53aWR0aCwgYmJveC5oZWlnaHQpO1xyXG59XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGVzIGNvbnRlbnQgcmVjdGFuZ2xlIG9mIHByb3ZpZGVkIEhUTUxFbGVtZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXQgLSBFbGVtZW50IGZvciB3aGljaCB0byBjYWxjdWxhdGUgdGhlIGNvbnRlbnQgcmVjdGFuZ2xlLlxyXG4gKiBAcmV0dXJucyB7RE9NUmVjdEluaXR9XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRIVE1MRWxlbWVudENvbnRlbnRSZWN0KHRhcmdldCkge1xyXG4gICAgLy8gQ2xpZW50IHdpZHRoICYgaGVpZ2h0IHByb3BlcnRpZXMgY2FuJ3QgYmVcclxuICAgIC8vIHVzZWQgZXhjbHVzaXZlbHkgYXMgdGhleSBwcm92aWRlIHJvdW5kZWQgdmFsdWVzLlxyXG4gICAgdmFyIGNsaWVudFdpZHRoID0gdGFyZ2V0LmNsaWVudFdpZHRoLCBjbGllbnRIZWlnaHQgPSB0YXJnZXQuY2xpZW50SGVpZ2h0O1xyXG4gICAgLy8gQnkgdGhpcyBjb25kaXRpb24gd2UgY2FuIGNhdGNoIGFsbCBub24tcmVwbGFjZWQgaW5saW5lLCBoaWRkZW4gYW5kXHJcbiAgICAvLyBkZXRhY2hlZCBlbGVtZW50cy4gVGhvdWdoIGVsZW1lbnRzIHdpdGggd2lkdGggJiBoZWlnaHQgcHJvcGVydGllcyBsZXNzXHJcbiAgICAvLyB0aGFuIDAuNSB3aWxsIGJlIGRpc2NhcmRlZCBhcyB3ZWxsLlxyXG4gICAgLy9cclxuICAgIC8vIFdpdGhvdXQgaXQgd2Ugd291bGQgbmVlZCB0byBpbXBsZW1lbnQgc2VwYXJhdGUgbWV0aG9kcyBmb3IgZWFjaCBvZlxyXG4gICAgLy8gdGhvc2UgY2FzZXMgYW5kIGl0J3Mgbm90IHBvc3NpYmxlIHRvIHBlcmZvcm0gYSBwcmVjaXNlIGFuZCBwZXJmb3JtYW5jZVxyXG4gICAgLy8gZWZmZWN0aXZlIHRlc3QgZm9yIGhpZGRlbiBlbGVtZW50cy4gRS5nLiBldmVuIGpRdWVyeSdzICc6dmlzaWJsZScgZmlsdGVyXHJcbiAgICAvLyBnaXZlcyB3cm9uZyByZXN1bHRzIGZvciBlbGVtZW50cyB3aXRoIHdpZHRoICYgaGVpZ2h0IGxlc3MgdGhhbiAwLjUuXHJcbiAgICBpZiAoIWNsaWVudFdpZHRoICYmICFjbGllbnRIZWlnaHQpIHtcclxuICAgICAgICByZXR1cm4gZW1wdHlSZWN0O1xyXG4gICAgfVxyXG4gICAgdmFyIHN0eWxlcyA9IGdldFdpbmRvd09mKHRhcmdldCkuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpO1xyXG4gICAgdmFyIHBhZGRpbmdzID0gZ2V0UGFkZGluZ3Moc3R5bGVzKTtcclxuICAgIHZhciBob3JpelBhZCA9IHBhZGRpbmdzLmxlZnQgKyBwYWRkaW5ncy5yaWdodDtcclxuICAgIHZhciB2ZXJ0UGFkID0gcGFkZGluZ3MudG9wICsgcGFkZGluZ3MuYm90dG9tO1xyXG4gICAgLy8gQ29tcHV0ZWQgc3R5bGVzIG9mIHdpZHRoICYgaGVpZ2h0IGFyZSBiZWluZyB1c2VkIGJlY2F1c2UgdGhleSBhcmUgdGhlXHJcbiAgICAvLyBvbmx5IGRpbWVuc2lvbnMgYXZhaWxhYmxlIHRvIEpTIHRoYXQgY29udGFpbiBub24tcm91bmRlZCB2YWx1ZXMuIEl0IGNvdWxkXHJcbiAgICAvLyBiZSBwb3NzaWJsZSB0byB1dGlsaXplIHRoZSBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaWYgb25seSBpdCdzIGRhdGEgd2Fzbid0XHJcbiAgICAvLyBhZmZlY3RlZCBieSBDU1MgdHJhbnNmb3JtYXRpb25zIGxldCBhbG9uZSBwYWRkaW5ncywgYm9yZGVycyBhbmQgc2Nyb2xsIGJhcnMuXHJcbiAgICB2YXIgd2lkdGggPSB0b0Zsb2F0KHN0eWxlcy53aWR0aCksIGhlaWdodCA9IHRvRmxvYXQoc3R5bGVzLmhlaWdodCk7XHJcbiAgICAvLyBXaWR0aCAmIGhlaWdodCBpbmNsdWRlIHBhZGRpbmdzIGFuZCBib3JkZXJzIHdoZW4gdGhlICdib3JkZXItYm94JyBib3hcclxuICAgIC8vIG1vZGVsIGlzIGFwcGxpZWQgKGV4Y2VwdCBmb3IgSUUpLlxyXG4gICAgaWYgKHN0eWxlcy5ib3hTaXppbmcgPT09ICdib3JkZXItYm94Jykge1xyXG4gICAgICAgIC8vIEZvbGxvd2luZyBjb25kaXRpb25zIGFyZSByZXF1aXJlZCB0byBoYW5kbGUgSW50ZXJuZXQgRXhwbG9yZXIgd2hpY2hcclxuICAgICAgICAvLyBkb2Vzbid0IGluY2x1ZGUgcGFkZGluZ3MgYW5kIGJvcmRlcnMgdG8gY29tcHV0ZWQgQ1NTIGRpbWVuc2lvbnMuXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBXZSBjYW4gc2F5IHRoYXQgaWYgQ1NTIGRpbWVuc2lvbnMgKyBwYWRkaW5ncyBhcmUgZXF1YWwgdG8gdGhlIFwiY2xpZW50XCJcclxuICAgICAgICAvLyBwcm9wZXJ0aWVzIHRoZW4gaXQncyBlaXRoZXIgSUUsIGFuZCB0aHVzIHdlIGRvbid0IG5lZWQgdG8gc3VidHJhY3RcclxuICAgICAgICAvLyBhbnl0aGluZywgb3IgYW4gZWxlbWVudCBtZXJlbHkgZG9lc24ndCBoYXZlIHBhZGRpbmdzL2JvcmRlcnMgc3R5bGVzLlxyXG4gICAgICAgIGlmIChNYXRoLnJvdW5kKHdpZHRoICsgaG9yaXpQYWQpICE9PSBjbGllbnRXaWR0aCkge1xyXG4gICAgICAgICAgICB3aWR0aCAtPSBnZXRCb3JkZXJzU2l6ZShzdHlsZXMsICdsZWZ0JywgJ3JpZ2h0JykgKyBob3JpelBhZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE1hdGgucm91bmQoaGVpZ2h0ICsgdmVydFBhZCkgIT09IGNsaWVudEhlaWdodCkge1xyXG4gICAgICAgICAgICBoZWlnaHQgLT0gZ2V0Qm9yZGVyc1NpemUoc3R5bGVzLCAndG9wJywgJ2JvdHRvbScpICsgdmVydFBhZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBGb2xsb3dpbmcgc3RlcHMgY2FuJ3QgYmUgYXBwbGllZCB0byB0aGUgZG9jdW1lbnQncyByb290IGVsZW1lbnQgYXMgaXRzXHJcbiAgICAvLyBjbGllbnRbV2lkdGgvSGVpZ2h0XSBwcm9wZXJ0aWVzIHJlcHJlc2VudCB2aWV3cG9ydCBhcmVhIG9mIHRoZSB3aW5kb3cuXHJcbiAgICAvLyBCZXNpZGVzLCBpdCdzIGFzIHdlbGwgbm90IG5lY2Vzc2FyeSBhcyB0aGUgPGh0bWw+IGl0c2VsZiBuZWl0aGVyIGhhc1xyXG4gICAgLy8gcmVuZGVyZWQgc2Nyb2xsIGJhcnMgbm9yIGl0IGNhbiBiZSBjbGlwcGVkLlxyXG4gICAgaWYgKCFpc0RvY3VtZW50RWxlbWVudCh0YXJnZXQpKSB7XHJcbiAgICAgICAgLy8gSW4gc29tZSBicm93c2VycyAob25seSBpbiBGaXJlZm94LCBhY3R1YWxseSkgQ1NTIHdpZHRoICYgaGVpZ2h0XHJcbiAgICAgICAgLy8gaW5jbHVkZSBzY3JvbGwgYmFycyBzaXplIHdoaWNoIGNhbiBiZSByZW1vdmVkIGF0IHRoaXMgc3RlcCBhcyBzY3JvbGxcclxuICAgICAgICAvLyBiYXJzIGFyZSB0aGUgb25seSBkaWZmZXJlbmNlIGJldHdlZW4gcm91bmRlZCBkaW1lbnNpb25zICsgcGFkZGluZ3NcclxuICAgICAgICAvLyBhbmQgXCJjbGllbnRcIiBwcm9wZXJ0aWVzLCB0aG91Z2ggdGhhdCBpcyBub3QgYWx3YXlzIHRydWUgaW4gQ2hyb21lLlxyXG4gICAgICAgIHZhciB2ZXJ0U2Nyb2xsYmFyID0gTWF0aC5yb3VuZCh3aWR0aCArIGhvcml6UGFkKSAtIGNsaWVudFdpZHRoO1xyXG4gICAgICAgIHZhciBob3JpelNjcm9sbGJhciA9IE1hdGgucm91bmQoaGVpZ2h0ICsgdmVydFBhZCkgLSBjbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgLy8gQ2hyb21lIGhhcyBhIHJhdGhlciB3ZWlyZCByb3VuZGluZyBvZiBcImNsaWVudFwiIHByb3BlcnRpZXMuXHJcbiAgICAgICAgLy8gRS5nLiBmb3IgYW4gZWxlbWVudCB3aXRoIGNvbnRlbnQgd2lkdGggb2YgMzE0LjJweCBpdCBzb21ldGltZXMgZ2l2ZXNcclxuICAgICAgICAvLyB0aGUgY2xpZW50IHdpZHRoIG9mIDMxNXB4IGFuZCBmb3IgdGhlIHdpZHRoIG9mIDMxNC43cHggaXQgbWF5IGdpdmVcclxuICAgICAgICAvLyAzMTRweC4gQW5kIGl0IGRvZXNuJ3QgaGFwcGVuIGFsbCB0aGUgdGltZS4gU28ganVzdCBpZ25vcmUgdGhpcyBkZWx0YVxyXG4gICAgICAgIC8vIGFzIGEgbm9uLXJlbGV2YW50LlxyXG4gICAgICAgIGlmIChNYXRoLmFicyh2ZXJ0U2Nyb2xsYmFyKSAhPT0gMSkge1xyXG4gICAgICAgICAgICB3aWR0aCAtPSB2ZXJ0U2Nyb2xsYmFyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoTWF0aC5hYnMoaG9yaXpTY3JvbGxiYXIpICE9PSAxKSB7XHJcbiAgICAgICAgICAgIGhlaWdodCAtPSBob3JpelNjcm9sbGJhcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY3JlYXRlUmVjdEluaXQocGFkZGluZ3MubGVmdCwgcGFkZGluZ3MudG9wLCB3aWR0aCwgaGVpZ2h0KTtcclxufVxyXG4vKipcclxuICogQ2hlY2tzIHdoZXRoZXIgcHJvdmlkZWQgZWxlbWVudCBpcyBhbiBpbnN0YW5jZSBvZiB0aGUgU1ZHR3JhcGhpY3NFbGVtZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCAtIEVsZW1lbnQgdG8gYmUgY2hlY2tlZC5cclxuICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAqL1xyXG52YXIgaXNTVkdHcmFwaGljc0VsZW1lbnQgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gU29tZSBicm93c2VycywgbmFtZWx5IElFIGFuZCBFZGdlLCBkb24ndCBoYXZlIHRoZSBTVkdHcmFwaGljc0VsZW1lbnRcclxuICAgIC8vIGludGVyZmFjZS5cclxuICAgIGlmICh0eXBlb2YgU1ZHR3JhcGhpY3NFbGVtZW50ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0KSB7IHJldHVybiB0YXJnZXQgaW5zdGFuY2VvZiBnZXRXaW5kb3dPZih0YXJnZXQpLlNWR0dyYXBoaWNzRWxlbWVudDsgfTtcclxuICAgIH1cclxuICAgIC8vIElmIGl0J3Mgc28sIHRoZW4gY2hlY2sgdGhhdCBlbGVtZW50IGlzIGF0IGxlYXN0IGFuIGluc3RhbmNlIG9mIHRoZVxyXG4gICAgLy8gU1ZHRWxlbWVudCBhbmQgdGhhdCBpdCBoYXMgdGhlIFwiZ2V0QkJveFwiIG1ldGhvZC5cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1leHRyYS1wYXJlbnNcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0KSB7IHJldHVybiAodGFyZ2V0IGluc3RhbmNlb2YgZ2V0V2luZG93T2YodGFyZ2V0KS5TVkdFbGVtZW50ICYmXHJcbiAgICAgICAgdHlwZW9mIHRhcmdldC5nZXRCQm94ID09PSAnZnVuY3Rpb24nKTsgfTtcclxufSkoKTtcclxuLyoqXHJcbiAqIENoZWNrcyB3aGV0aGVyIHByb3ZpZGVkIGVsZW1lbnQgaXMgYSBkb2N1bWVudCBlbGVtZW50ICg8aHRtbD4pLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCAtIEVsZW1lbnQgdG8gYmUgY2hlY2tlZC5cclxuICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0RvY3VtZW50RWxlbWVudCh0YXJnZXQpIHtcclxuICAgIHJldHVybiB0YXJnZXQgPT09IGdldFdpbmRvd09mKHRhcmdldCkuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG59XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGVzIGFuIGFwcHJvcHJpYXRlIGNvbnRlbnQgcmVjdGFuZ2xlIGZvciBwcm92aWRlZCBodG1sIG9yIHN2ZyBlbGVtZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCAtIEVsZW1lbnQgY29udGVudCByZWN0YW5nbGUgb2Ygd2hpY2ggbmVlZHMgdG8gYmUgY2FsY3VsYXRlZC5cclxuICogQHJldHVybnMge0RPTVJlY3RJbml0fVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0Q29udGVudFJlY3QodGFyZ2V0KSB7XHJcbiAgICBpZiAoIWlzQnJvd3Nlcikge1xyXG4gICAgICAgIHJldHVybiBlbXB0eVJlY3Q7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNTVkdHcmFwaGljc0VsZW1lbnQodGFyZ2V0KSkge1xyXG4gICAgICAgIHJldHVybiBnZXRTVkdDb250ZW50UmVjdCh0YXJnZXQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGdldEhUTUxFbGVtZW50Q29udGVudFJlY3QodGFyZ2V0KTtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyByZWN0YW5nbGUgd2l0aCBhbiBpbnRlcmZhY2Ugb2YgdGhlIERPTVJlY3RSZWFkT25seS5cclxuICogU3BlYzogaHR0cHM6Ly9kcmFmdHMuZnh0Zi5vcmcvZ2VvbWV0cnkvI2RvbXJlY3RyZWFkb25seVxyXG4gKlxyXG4gKiBAcGFyYW0ge0RPTVJlY3RJbml0fSByZWN0SW5pdCAtIE9iamVjdCB3aXRoIHJlY3RhbmdsZSdzIHgveSBjb29yZGluYXRlcyBhbmQgZGltZW5zaW9ucy5cclxuICogQHJldHVybnMge0RPTVJlY3RSZWFkT25seX1cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVJlYWRPbmx5UmVjdChfYSkge1xyXG4gICAgdmFyIHggPSBfYS54LCB5ID0gX2EueSwgd2lkdGggPSBfYS53aWR0aCwgaGVpZ2h0ID0gX2EuaGVpZ2h0O1xyXG4gICAgLy8gSWYgRE9NUmVjdFJlYWRPbmx5IGlzIGF2YWlsYWJsZSB1c2UgaXQgYXMgYSBwcm90b3R5cGUgZm9yIHRoZSByZWN0YW5nbGUuXHJcbiAgICB2YXIgQ29uc3RyID0gdHlwZW9mIERPTVJlY3RSZWFkT25seSAhPT0gJ3VuZGVmaW5lZCcgPyBET01SZWN0UmVhZE9ubHkgOiBPYmplY3Q7XHJcbiAgICB2YXIgcmVjdCA9IE9iamVjdC5jcmVhdGUoQ29uc3RyLnByb3RvdHlwZSk7XHJcbiAgICAvLyBSZWN0YW5nbGUncyBwcm9wZXJ0aWVzIGFyZSBub3Qgd3JpdGFibGUgYW5kIG5vbi1lbnVtZXJhYmxlLlxyXG4gICAgZGVmaW5lQ29uZmlndXJhYmxlKHJlY3QsIHtcclxuICAgICAgICB4OiB4LCB5OiB5LCB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0LFxyXG4gICAgICAgIHRvcDogeSxcclxuICAgICAgICByaWdodDogeCArIHdpZHRoLFxyXG4gICAgICAgIGJvdHRvbTogaGVpZ2h0ICsgeSxcclxuICAgICAgICBsZWZ0OiB4XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZWN0O1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIERPTVJlY3RJbml0IG9iamVjdCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgZGltZW5zaW9ucyBhbmQgdGhlIHgveSBjb29yZGluYXRlcy5cclxuICogU3BlYzogaHR0cHM6Ly9kcmFmdHMuZnh0Zi5vcmcvZ2VvbWV0cnkvI2RpY3RkZWYtZG9tcmVjdGluaXRcclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IHggLSBYIGNvb3JkaW5hdGUuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gWSBjb29yZGluYXRlLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gd2lkdGggLSBSZWN0YW5nbGUncyB3aWR0aC5cclxuICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCAtIFJlY3RhbmdsZSdzIGhlaWdodC5cclxuICogQHJldHVybnMge0RPTVJlY3RJbml0fVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlUmVjdEluaXQoeCwgeSwgd2lkdGgsIGhlaWdodCkge1xyXG4gICAgcmV0dXJuIHsgeDogeCwgeTogeSwgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCB9O1xyXG59XG5cbi8qKlxyXG4gKiBDbGFzcyB0aGF0IGlzIHJlc3BvbnNpYmxlIGZvciBjb21wdXRhdGlvbnMgb2YgdGhlIGNvbnRlbnQgcmVjdGFuZ2xlIG9mXHJcbiAqIHByb3ZpZGVkIERPTSBlbGVtZW50IGFuZCBmb3Iga2VlcGluZyB0cmFjayBvZiBpdCdzIGNoYW5nZXMuXHJcbiAqL1xyXG52YXIgUmVzaXplT2JzZXJ2YXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgUmVzaXplT2JzZXJ2YXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXQgLSBFbGVtZW50IHRvIGJlIG9ic2VydmVkLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBSZXNpemVPYnNlcnZhdGlvbih0YXJnZXQpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCcm9hZGNhc3RlZCB3aWR0aCBvZiBjb250ZW50IHJlY3RhbmdsZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5icm9hZGNhc3RXaWR0aCA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQnJvYWRjYXN0ZWQgaGVpZ2h0IG9mIGNvbnRlbnQgcmVjdGFuZ2xlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmJyb2FkY2FzdEhlaWdodCA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVmZXJlbmNlIHRvIHRoZSBsYXN0IG9ic2VydmVkIGNvbnRlbnQgcmVjdGFuZ2xlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGUge0RPTVJlY3RJbml0fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY29udGVudFJlY3RfID0gY3JlYXRlUmVjdEluaXQoMCwgMCwgMCwgMCk7XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgY29udGVudCByZWN0YW5nbGUgYW5kIHRlbGxzIHdoZXRoZXIgaXQncyB3aWR0aCBvciBoZWlnaHQgcHJvcGVydGllc1xyXG4gICAgICogaGF2ZSBjaGFuZ2VkIHNpbmNlIHRoZSBsYXN0IGJyb2FkY2FzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgUmVzaXplT2JzZXJ2YXRpb24ucHJvdG90eXBlLmlzQWN0aXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZWN0ID0gZ2V0Q29udGVudFJlY3QodGhpcy50YXJnZXQpO1xyXG4gICAgICAgIHRoaXMuY29udGVudFJlY3RfID0gcmVjdDtcclxuICAgICAgICByZXR1cm4gKHJlY3Qud2lkdGggIT09IHRoaXMuYnJvYWRjYXN0V2lkdGggfHxcclxuICAgICAgICAgICAgcmVjdC5oZWlnaHQgIT09IHRoaXMuYnJvYWRjYXN0SGVpZ2h0KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgJ2Jyb2FkY2FzdFdpZHRoJyBhbmQgJ2Jyb2FkY2FzdEhlaWdodCcgcHJvcGVydGllcyB3aXRoIGEgZGF0YVxyXG4gICAgICogZnJvbSB0aGUgY29ycmVzcG9uZGluZyBwcm9wZXJ0aWVzIG9mIHRoZSBsYXN0IG9ic2VydmVkIGNvbnRlbnQgcmVjdGFuZ2xlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtET01SZWN0SW5pdH0gTGFzdCBvYnNlcnZlZCBjb250ZW50IHJlY3RhbmdsZS5cclxuICAgICAqL1xyXG4gICAgUmVzaXplT2JzZXJ2YXRpb24ucHJvdG90eXBlLmJyb2FkY2FzdFJlY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlY3QgPSB0aGlzLmNvbnRlbnRSZWN0XztcclxuICAgICAgICB0aGlzLmJyb2FkY2FzdFdpZHRoID0gcmVjdC53aWR0aDtcclxuICAgICAgICB0aGlzLmJyb2FkY2FzdEhlaWdodCA9IHJlY3QuaGVpZ2h0O1xyXG4gICAgICAgIHJldHVybiByZWN0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBSZXNpemVPYnNlcnZhdGlvbjtcclxufSgpKTtcblxudmFyIFJlc2l6ZU9ic2VydmVyRW50cnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgUmVzaXplT2JzZXJ2ZXJFbnRyeS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCAtIEVsZW1lbnQgdGhhdCBpcyBiZWluZyBvYnNlcnZlZC5cclxuICAgICAqIEBwYXJhbSB7RE9NUmVjdEluaXR9IHJlY3RJbml0IC0gRGF0YSBvZiB0aGUgZWxlbWVudCdzIGNvbnRlbnQgcmVjdGFuZ2xlLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBSZXNpemVPYnNlcnZlckVudHJ5KHRhcmdldCwgcmVjdEluaXQpIHtcclxuICAgICAgICB2YXIgY29udGVudFJlY3QgPSBjcmVhdGVSZWFkT25seVJlY3QocmVjdEluaXQpO1xyXG4gICAgICAgIC8vIEFjY29yZGluZyB0byB0aGUgc3BlY2lmaWNhdGlvbiBmb2xsb3dpbmcgcHJvcGVydGllcyBhcmUgbm90IHdyaXRhYmxlXHJcbiAgICAgICAgLy8gYW5kIGFyZSBhbHNvIG5vdCBlbnVtZXJhYmxlIGluIHRoZSBuYXRpdmUgaW1wbGVtZW50YXRpb24uXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBQcm9wZXJ0eSBhY2Nlc3NvcnMgYXJlIG5vdCBiZWluZyB1c2VkIGFzIHRoZXknZCByZXF1aXJlIHRvIGRlZmluZSBhXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBXZWFrTWFwIHN0b3JhZ2Ugd2hpY2ggbWF5IGNhdXNlIG1lbW9yeSBsZWFrcyBpbiBicm93c2VycyB0aGF0XHJcbiAgICAgICAgLy8gZG9uJ3Qgc3VwcG9ydCB0aGlzIHR5cGUgb2YgY29sbGVjdGlvbnMuXHJcbiAgICAgICAgZGVmaW5lQ29uZmlndXJhYmxlKHRoaXMsIHsgdGFyZ2V0OiB0YXJnZXQsIGNvbnRlbnRSZWN0OiBjb250ZW50UmVjdCB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBSZXNpemVPYnNlcnZlckVudHJ5O1xyXG59KCkpO1xuXG52YXIgUmVzaXplT2JzZXJ2ZXJTUEkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgUmVzaXplT2JzZXJ2ZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtSZXNpemVPYnNlcnZlckNhbGxiYWNrfSBjYWxsYmFjayAtIENhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgaXMgaW52b2tlZFxyXG4gICAgICogICAgICB3aGVuIG9uZSBvZiB0aGUgb2JzZXJ2ZWQgZWxlbWVudHMgY2hhbmdlcyBpdCdzIGNvbnRlbnQgZGltZW5zaW9ucy5cclxuICAgICAqIEBwYXJhbSB7UmVzaXplT2JzZXJ2ZXJDb250cm9sbGVyfSBjb250cm9sbGVyIC0gQ29udHJvbGxlciBpbnN0YW5jZSB3aGljaFxyXG4gICAgICogICAgICBpcyByZXNwb25zaWJsZSBmb3IgdGhlIHVwZGF0ZXMgb2Ygb2JzZXJ2ZXIuXHJcbiAgICAgKiBAcGFyYW0ge1Jlc2l6ZU9ic2VydmVyfSBjYWxsYmFja0N0eCAtIFJlZmVyZW5jZSB0byB0aGUgcHVibGljXHJcbiAgICAgKiAgICAgIFJlc2l6ZU9ic2VydmVyIGluc3RhbmNlIHdoaWNoIHdpbGwgYmUgcGFzc2VkIHRvIGNhbGxiYWNrIGZ1bmN0aW9uLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBSZXNpemVPYnNlcnZlclNQSShjYWxsYmFjaywgY29udHJvbGxlciwgY2FsbGJhY2tDdHgpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb2xsZWN0aW9uIG9mIHJlc2l6ZSBvYnNlcnZhdGlvbnMgdGhhdCBoYXZlIGRldGVjdGVkIGNoYW5nZXMgaW4gZGltZW5zaW9uc1xyXG4gICAgICAgICAqIG9mIGVsZW1lbnRzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGUge0FycmF5PFJlc2l6ZU9ic2VydmF0aW9uPn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmFjdGl2ZU9ic2VydmF0aW9uc18gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWdpc3RyeSBvZiB0aGUgUmVzaXplT2JzZXJ2YXRpb24gaW5zdGFuY2VzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGUge01hcDxFbGVtZW50LCBSZXNpemVPYnNlcnZhdGlvbj59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5vYnNlcnZhdGlvbnNfID0gbmV3IE1hcFNoaW0oKTtcclxuICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBjYWxsYmFjayBwcm92aWRlZCBhcyBwYXJhbWV0ZXIgMSBpcyBub3QgYSBmdW5jdGlvbi4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja18gPSBjYWxsYmFjaztcclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXJfID0gY29udHJvbGxlcjtcclxuICAgICAgICB0aGlzLmNhbGxiYWNrQ3R4XyA9IGNhbGxiYWNrQ3R4O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydHMgb2JzZXJ2aW5nIHByb3ZpZGVkIGVsZW1lbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXQgLSBFbGVtZW50IHRvIGJlIG9ic2VydmVkLlxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIFJlc2l6ZU9ic2VydmVyU1BJLnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcxIGFyZ3VtZW50IHJlcXVpcmVkLCBidXQgb25seSAwIHByZXNlbnQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERvIG5vdGhpbmcgaWYgY3VycmVudCBlbnZpcm9ubWVudCBkb2Vzbid0IGhhdmUgdGhlIEVsZW1lbnQgaW50ZXJmYWNlLlxyXG4gICAgICAgIGlmICh0eXBlb2YgRWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcgfHwgIShFbGVtZW50IGluc3RhbmNlb2YgT2JqZWN0KSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIGdldFdpbmRvd09mKHRhcmdldCkuRWxlbWVudCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigncGFyYW1ldGVyIDEgaXMgbm90IG9mIHR5cGUgXCJFbGVtZW50XCIuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBvYnNlcnZhdGlvbnMgPSB0aGlzLm9ic2VydmF0aW9uc187XHJcbiAgICAgICAgLy8gRG8gbm90aGluZyBpZiBlbGVtZW50IGlzIGFscmVhZHkgYmVpbmcgb2JzZXJ2ZWQuXHJcbiAgICAgICAgaWYgKG9ic2VydmF0aW9ucy5oYXModGFyZ2V0KSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9ic2VydmF0aW9ucy5zZXQodGFyZ2V0LCBuZXcgUmVzaXplT2JzZXJ2YXRpb24odGFyZ2V0KSk7XHJcbiAgICAgICAgdGhpcy5jb250cm9sbGVyXy5hZGRPYnNlcnZlcih0aGlzKTtcclxuICAgICAgICAvLyBGb3JjZSB0aGUgdXBkYXRlIG9mIG9ic2VydmF0aW9ucy5cclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXJfLnJlZnJlc2goKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIFN0b3BzIG9ic2VydmluZyBwcm92aWRlZCBlbGVtZW50LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0IC0gRWxlbWVudCB0byBzdG9wIG9ic2VydmluZy5cclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxyXG4gICAgICovXHJcbiAgICBSZXNpemVPYnNlcnZlclNQSS5wcm90b3R5cGUudW5vYnNlcnZlID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcxIGFyZ3VtZW50IHJlcXVpcmVkLCBidXQgb25seSAwIHByZXNlbnQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERvIG5vdGhpbmcgaWYgY3VycmVudCBlbnZpcm9ubWVudCBkb2Vzbid0IGhhdmUgdGhlIEVsZW1lbnQgaW50ZXJmYWNlLlxyXG4gICAgICAgIGlmICh0eXBlb2YgRWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcgfHwgIShFbGVtZW50IGluc3RhbmNlb2YgT2JqZWN0KSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIGdldFdpbmRvd09mKHRhcmdldCkuRWxlbWVudCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigncGFyYW1ldGVyIDEgaXMgbm90IG9mIHR5cGUgXCJFbGVtZW50XCIuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBvYnNlcnZhdGlvbnMgPSB0aGlzLm9ic2VydmF0aW9uc187XHJcbiAgICAgICAgLy8gRG8gbm90aGluZyBpZiBlbGVtZW50IGlzIG5vdCBiZWluZyBvYnNlcnZlZC5cclxuICAgICAgICBpZiAoIW9ic2VydmF0aW9ucy5oYXModGFyZ2V0KSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9ic2VydmF0aW9ucy5kZWxldGUodGFyZ2V0KTtcclxuICAgICAgICBpZiAoIW9ic2VydmF0aW9ucy5zaXplKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlcl8ucmVtb3ZlT2JzZXJ2ZXIodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU3RvcHMgb2JzZXJ2aW5nIGFsbCBlbGVtZW50cy5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgUmVzaXplT2JzZXJ2ZXJTUEkucHJvdG90eXBlLmRpc2Nvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jbGVhckFjdGl2ZSgpO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2YXRpb25zXy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlcl8ucmVtb3ZlT2JzZXJ2ZXIodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb2xsZWN0cyBvYnNlcnZhdGlvbiBpbnN0YW5jZXMgdGhlIGFzc29jaWF0ZWQgZWxlbWVudCBvZiB3aGljaCBoYXMgY2hhbmdlZFxyXG4gICAgICogaXQncyBjb250ZW50IHJlY3RhbmdsZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cclxuICAgICAqL1xyXG4gICAgUmVzaXplT2JzZXJ2ZXJTUEkucHJvdG90eXBlLmdhdGhlckFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuY2xlYXJBY3RpdmUoKTtcclxuICAgICAgICB0aGlzLm9ic2VydmF0aW9uc18uZm9yRWFjaChmdW5jdGlvbiAob2JzZXJ2YXRpb24pIHtcclxuICAgICAgICAgICAgaWYgKG9ic2VydmF0aW9uLmlzQWN0aXZlKCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmFjdGl2ZU9ic2VydmF0aW9uc18ucHVzaChvYnNlcnZhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEludm9rZXMgaW5pdGlhbCBjYWxsYmFjayBmdW5jdGlvbiB3aXRoIGEgbGlzdCBvZiBSZXNpemVPYnNlcnZlckVudHJ5XHJcbiAgICAgKiBpbnN0YW5jZXMgY29sbGVjdGVkIGZyb20gYWN0aXZlIHJlc2l6ZSBvYnNlcnZhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIFJlc2l6ZU9ic2VydmVyU1BJLnByb3RvdHlwZS5icm9hZGNhc3RBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gRG8gbm90aGluZyBpZiBvYnNlcnZlciBkb2Vzbid0IGhhdmUgYWN0aXZlIG9ic2VydmF0aW9ucy5cclxuICAgICAgICBpZiAoIXRoaXMuaGFzQWN0aXZlKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY3R4ID0gdGhpcy5jYWxsYmFja0N0eF87XHJcbiAgICAgICAgLy8gQ3JlYXRlIFJlc2l6ZU9ic2VydmVyRW50cnkgaW5zdGFuY2UgZm9yIGV2ZXJ5IGFjdGl2ZSBvYnNlcnZhdGlvbi5cclxuICAgICAgICB2YXIgZW50cmllcyA9IHRoaXMuYWN0aXZlT2JzZXJ2YXRpb25zXy5tYXAoZnVuY3Rpb24gKG9ic2VydmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzaXplT2JzZXJ2ZXJFbnRyeShvYnNlcnZhdGlvbi50YXJnZXQsIG9ic2VydmF0aW9uLmJyb2FkY2FzdFJlY3QoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja18uY2FsbChjdHgsIGVudHJpZXMsIGN0eCk7XHJcbiAgICAgICAgdGhpcy5jbGVhckFjdGl2ZSgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXJzIHRoZSBjb2xsZWN0aW9uIG9mIGFjdGl2ZSBvYnNlcnZhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge3ZvaWR9XHJcbiAgICAgKi9cclxuICAgIFJlc2l6ZU9ic2VydmVyU1BJLnByb3RvdHlwZS5jbGVhckFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZU9ic2VydmF0aW9uc18uc3BsaWNlKDApO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGVsbHMgd2hldGhlciBvYnNlcnZlciBoYXMgYWN0aXZlIG9ic2VydmF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgUmVzaXplT2JzZXJ2ZXJTUEkucHJvdG90eXBlLmhhc0FjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmVPYnNlcnZhdGlvbnNfLmxlbmd0aCA+IDA7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJlc2l6ZU9ic2VydmVyU1BJO1xyXG59KCkpO1xuXG4vLyBSZWdpc3RyeSBvZiBpbnRlcm5hbCBvYnNlcnZlcnMuIElmIFdlYWtNYXAgaXMgbm90IGF2YWlsYWJsZSB1c2UgY3VycmVudCBzaGltXHJcbi8vIGZvciB0aGUgTWFwIGNvbGxlY3Rpb24gYXMgaXQgaGFzIGFsbCByZXF1aXJlZCBtZXRob2RzIGFuZCBiZWNhdXNlIFdlYWtNYXBcclxuLy8gY2FuJ3QgYmUgZnVsbHkgcG9seWZpbGxlZCBhbnl3YXkuXHJcbnZhciBvYnNlcnZlcnMgPSB0eXBlb2YgV2Vha01hcCAhPT0gJ3VuZGVmaW5lZCcgPyBuZXcgV2Vha01hcCgpIDogbmV3IE1hcFNoaW0oKTtcclxuLyoqXHJcbiAqIFJlc2l6ZU9ic2VydmVyIEFQSS4gRW5jYXBzdWxhdGVzIHRoZSBSZXNpemVPYnNlcnZlciBTUEkgaW1wbGVtZW50YXRpb25cclxuICogZXhwb3Npbmcgb25seSB0aG9zZSBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIHRoYXQgYXJlIGRlZmluZWQgaW4gdGhlIHNwZWMuXHJcbiAqL1xyXG52YXIgUmVzaXplT2JzZXJ2ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgUmVzaXplT2JzZXJ2ZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtSZXNpemVPYnNlcnZlckNhbGxiYWNrfSBjYWxsYmFjayAtIENhbGxiYWNrIHRoYXQgaXMgaW52b2tlZCB3aGVuXHJcbiAgICAgKiAgICAgIGRpbWVuc2lvbnMgb2YgdGhlIG9ic2VydmVkIGVsZW1lbnRzIGNoYW5nZS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gUmVzaXplT2JzZXJ2ZXIoY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVzaXplT2JzZXJ2ZXIpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbi4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJzEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5IDAgcHJlc2VudC4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSBSZXNpemVPYnNlcnZlckNvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXJTUEkoY2FsbGJhY2ssIGNvbnRyb2xsZXIsIHRoaXMpO1xyXG4gICAgICAgIG9ic2VydmVycy5zZXQodGhpcywgb2JzZXJ2ZXIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFJlc2l6ZU9ic2VydmVyO1xyXG59KCkpO1xyXG4vLyBFeHBvc2UgcHVibGljIG1ldGhvZHMgb2YgUmVzaXplT2JzZXJ2ZXIuXHJcbltcclxuICAgICdvYnNlcnZlJyxcclxuICAgICd1bm9ic2VydmUnLFxyXG4gICAgJ2Rpc2Nvbm5lY3QnXHJcbl0uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XHJcbiAgICBSZXNpemVPYnNlcnZlci5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgcmV0dXJuIChfYSA9IG9ic2VydmVycy5nZXQodGhpcykpW21ldGhvZF0uYXBwbHkoX2EsIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG59KTtcblxudmFyIGluZGV4ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIEV4cG9ydCBleGlzdGluZyBpbXBsZW1lbnRhdGlvbiBpZiBhdmFpbGFibGUuXHJcbiAgICBpZiAodHlwZW9mIGdsb2JhbCQxLlJlc2l6ZU9ic2VydmVyICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBnbG9iYWwkMS5SZXNpemVPYnNlcnZlcjtcclxuICAgIH1cclxuICAgIHJldHVybiBSZXNpemVPYnNlcnZlcjtcclxufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgaW5kZXg7XG4iLCJpbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2tcIjtcbmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzXCI7XG5pbXBvcnQgX2luaGVyaXRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0c1wiO1xuaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXJcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBmaW5kRE9NTm9kZSBmcm9tIFwicmMtdXRpbC9lcy9Eb20vZmluZERPTU5vZGVcIjtcbmltcG9ydCB0b0FycmF5IGZyb20gXCJyYy11dGlsL2VzL0NoaWxkcmVuL3RvQXJyYXlcIjtcbmltcG9ydCB3YXJuaW5nIGZyb20gXCJyYy11dGlsL2VzL3dhcm5pbmdcIjtcbmltcG9ydCB7IGNvbXBvc2VSZWYsIHN1cHBvcnRSZWYgfSBmcm9tIFwicmMtdXRpbC9lcy9yZWZcIjtcbmltcG9ydCBSZXNpemVPYnNlcnZlciBmcm9tICdyZXNpemUtb2JzZXJ2ZXItcG9seWZpbGwnO1xudmFyIElOVEVSTkFMX1BSRUZJWF9LRVkgPSAncmMtb2JzZXJ2ZXIta2V5JzsgLy8gU3RpbGwgbmVlZCB0byBiZSBjb21wYXRpYmxlIHdpdGggUmVhY3QgMTUsIHdlIHVzZSBjbGFzcyBjb21wb25lbnQgaGVyZVxuXG52YXIgUmVhY3RSZXNpemVPYnNlcnZlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoUmVhY3RSZXNpemVPYnNlcnZlciwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihSZWFjdFJlc2l6ZU9ic2VydmVyKTtcblxuICBmdW5jdGlvbiBSZWFjdFJlc2l6ZU9ic2VydmVyKCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWFjdFJlc2l6ZU9ic2VydmVyKTtcblxuICAgIF90aGlzID0gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgX3RoaXMucmVzaXplT2JzZXJ2ZXIgPSBudWxsO1xuICAgIF90aGlzLmNoaWxkTm9kZSA9IG51bGw7XG4gICAgX3RoaXMuY3VycmVudEVsZW1lbnQgPSBudWxsO1xuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgd2lkdGg6IDAsXG4gICAgICBoZWlnaHQ6IDAsXG4gICAgICBvZmZzZXRIZWlnaHQ6IDAsXG4gICAgICBvZmZzZXRXaWR0aDogMFxuICAgIH07XG5cbiAgICBfdGhpcy5vblJlc2l6ZSA9IGZ1bmN0aW9uIChlbnRyaWVzKSB7XG4gICAgICB2YXIgb25SZXNpemUgPSBfdGhpcy5wcm9wcy5vblJlc2l6ZTtcbiAgICAgIHZhciB0YXJnZXQgPSBlbnRyaWVzWzBdLnRhcmdldDtcblxuICAgICAgdmFyIF90YXJnZXQkZ2V0Qm91bmRpbmdDbCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICB3aWR0aCA9IF90YXJnZXQkZ2V0Qm91bmRpbmdDbC53aWR0aCxcbiAgICAgICAgICBoZWlnaHQgPSBfdGFyZ2V0JGdldEJvdW5kaW5nQ2wuaGVpZ2h0O1xuXG4gICAgICB2YXIgb2Zmc2V0V2lkdGggPSB0YXJnZXQub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgb2Zmc2V0SGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodDtcbiAgICAgIC8qKlxuICAgICAgICogUmVzaXplIG9ic2VydmVyIHRyaWdnZXIgd2hlbiBjb250ZW50IHNpemUgY2hhbmdlZC5cbiAgICAgICAqIEluIG1vc3QgY2FzZSB3ZSBqdXN0IGNhcmUgYWJvdXQgZWxlbWVudCBzaXplLFxuICAgICAgICogbGV0J3MgdXNlIGBib3VuZGFyeWAgaW5zdGVhZCBvZiBgY29udGVudFJlY3RgIGhlcmUgdG8gYXZvaWQgc2hha2luZy5cbiAgICAgICAqL1xuXG4gICAgICB2YXIgZml4ZWRXaWR0aCA9IE1hdGguZmxvb3Iod2lkdGgpO1xuICAgICAgdmFyIGZpeGVkSGVpZ2h0ID0gTWF0aC5mbG9vcihoZWlnaHQpO1xuXG4gICAgICBpZiAoX3RoaXMuc3RhdGUud2lkdGggIT09IGZpeGVkV2lkdGggfHwgX3RoaXMuc3RhdGUuaGVpZ2h0ICE9PSBmaXhlZEhlaWdodCB8fCBfdGhpcy5zdGF0ZS5vZmZzZXRXaWR0aCAhPT0gb2Zmc2V0V2lkdGggfHwgX3RoaXMuc3RhdGUub2Zmc2V0SGVpZ2h0ICE9PSBvZmZzZXRIZWlnaHQpIHtcbiAgICAgICAgdmFyIHNpemUgPSB7XG4gICAgICAgICAgd2lkdGg6IGZpeGVkV2lkdGgsXG4gICAgICAgICAgaGVpZ2h0OiBmaXhlZEhlaWdodCxcbiAgICAgICAgICBvZmZzZXRXaWR0aDogb2Zmc2V0V2lkdGgsXG4gICAgICAgICAgb2Zmc2V0SGVpZ2h0OiBvZmZzZXRIZWlnaHRcbiAgICAgICAgfTtcblxuICAgICAgICBfdGhpcy5zZXRTdGF0ZShzaXplKTtcblxuICAgICAgICBpZiAob25SZXNpemUpIHtcbiAgICAgICAgICAvLyBkZWZlciB0aGUgY2FsbGJhY2sgYnV0IG5vdCBkZWZlciB0byBuZXh0IGZyYW1lXG4gICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvblJlc2l6ZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHNpemUpLCB7fSwge1xuICAgICAgICAgICAgICBvZmZzZXRXaWR0aDogb2Zmc2V0V2lkdGgsXG4gICAgICAgICAgICAgIG9mZnNldEhlaWdodDogb2Zmc2V0SGVpZ2h0XG4gICAgICAgICAgICB9KSwgdGFyZ2V0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5zZXRDaGlsZE5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgX3RoaXMuY2hpbGROb2RlID0gbm9kZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFJlYWN0UmVzaXplT2JzZXJ2ZXIsIFt7XG4gICAga2V5OiBcImNvbXBvbmVudERpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdGhpcy5vbkNvbXBvbmVudFVwZGF0ZWQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkVXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgIHRoaXMub25Db21wb25lbnRVcGRhdGVkKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdGhpcy5kZXN0cm95T2JzZXJ2ZXIoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Db21wb25lbnRVcGRhdGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29tcG9uZW50VXBkYXRlZCgpIHtcbiAgICAgIHZhciBkaXNhYmxlZCA9IHRoaXMucHJvcHMuZGlzYWJsZWQ7IC8vIFVucmVnaXN0ZXIgaWYgZGlzYWJsZWRcblxuICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveU9ic2VydmVyKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gVW5yZWdpc3RlciBpZiBlbGVtZW50IGNoYW5nZWRcblxuXG4gICAgICB2YXIgZWxlbWVudCA9IGZpbmRET01Ob2RlKHRoaXMuY2hpbGROb2RlIHx8IHRoaXMpO1xuICAgICAgdmFyIGVsZW1lbnRDaGFuZ2VkID0gZWxlbWVudCAhPT0gdGhpcy5jdXJyZW50RWxlbWVudDtcblxuICAgICAgaWYgKGVsZW1lbnRDaGFuZ2VkKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveU9ic2VydmVyKCk7XG4gICAgICAgIHRoaXMuY3VycmVudEVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMucmVzaXplT2JzZXJ2ZXIgJiYgZWxlbWVudCkge1xuICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKHRoaXMub25SZXNpemUpO1xuICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLm9ic2VydmUoZWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImRlc3Ryb3lPYnNlcnZlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95T2JzZXJ2ZXIoKSB7XG4gICAgICBpZiAodGhpcy5yZXNpemVPYnNlcnZlcikge1xuICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlciA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLnByb3BzLmNoaWxkcmVuO1xuICAgICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KGNoaWxkcmVuKTtcblxuICAgICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoID4gMSkge1xuICAgICAgICB3YXJuaW5nKGZhbHNlLCAnRmluZCBtb3JlIHRoYW4gb25lIGNoaWxkIG5vZGUgd2l0aCBgY2hpbGRyZW5gIGluIFJlc2l6ZU9ic2VydmVyLiBXaWxsIG9ubHkgb2JzZXJ2ZSBmaXJzdCBvbmUuJyk7XG4gICAgICB9IGVsc2UgaWYgKGNoaWxkTm9kZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHdhcm5pbmcoZmFsc2UsICdgY2hpbGRyZW5gIG9mIFJlc2l6ZU9ic2VydmVyIGlzIGVtcHR5LiBOb3RoaW5nIGlzIGluIG9ic2VydmUuJyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2hpbGROb2RlID0gY2hpbGROb2Rlc1swXTtcblxuICAgICAgaWYgKCAvKiNfX1BVUkVfXyovUmVhY3QuaXNWYWxpZEVsZW1lbnQoY2hpbGROb2RlKSAmJiBzdXBwb3J0UmVmKGNoaWxkTm9kZSkpIHtcbiAgICAgICAgdmFyIHJlZiA9IGNoaWxkTm9kZS5yZWY7XG4gICAgICAgIGNoaWxkTm9kZXNbMF0gPSAvKiNfX1BVUkVfXyovUmVhY3QuY2xvbmVFbGVtZW50KGNoaWxkTm9kZSwge1xuICAgICAgICAgIHJlZjogY29tcG9zZVJlZihyZWYsIHRoaXMuc2V0Q2hpbGROb2RlKVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNoaWxkTm9kZXMubGVuZ3RoID09PSAxID8gY2hpbGROb2Rlc1swXSA6IGNoaWxkTm9kZXMubWFwKGZ1bmN0aW9uIChub2RlLCBpbmRleCkge1xuICAgICAgICBpZiAoISAvKiNfX1BVUkVfXyovUmVhY3QuaXNWYWxpZEVsZW1lbnQobm9kZSkgfHwgJ2tleScgaW4gbm9kZSAmJiBub2RlLmtleSAhPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jbG9uZUVsZW1lbnQobm9kZSwge1xuICAgICAgICAgIGtleTogXCJcIi5jb25jYXQoSU5URVJOQUxfUFJFRklYX0tFWSwgXCItXCIpLmNvbmNhdChpbmRleClcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUmVhY3RSZXNpemVPYnNlcnZlcjtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuUmVhY3RSZXNpemVPYnNlcnZlci5kaXNwbGF5TmFtZSA9ICdSZXNpemVPYnNlcnZlcic7XG5leHBvcnQgZGVmYXVsdCBSZWFjdFJlc2l6ZU9ic2VydmVyOyIsImltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0IHsgdXNlUmVmLCB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHJhZiBmcm9tIFwicmMtdXRpbC9lcy9yYWZcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZVJhZihjYWxsYmFjaykge1xuICB2YXIgcmFmUmVmID0gdXNlUmVmKCk7XG4gIHZhciByZW1vdmVkUmVmID0gdXNlUmVmKGZhbHNlKTtcblxuICBmdW5jdGlvbiB0cmlnZ2VyKCkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBpZiAoIXJlbW92ZWRSZWYuY3VycmVudCkge1xuICAgICAgcmFmLmNhbmNlbChyYWZSZWYuY3VycmVudCk7XG4gICAgICByYWZSZWYuY3VycmVudCA9IHJhZihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNhbGxiYWNrLmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICByZW1vdmVkUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgcmFmLmNhbmNlbChyYWZSZWYuY3VycmVudCk7XG4gICAgfTtcbiAgfSwgW10pO1xuICByZXR1cm4gdHJpZ2dlcjtcbn1cbmV4cG9ydCBmdW5jdGlvbiB1c2VSYWZTdGF0ZShkZWZhdWx0U3RhdGUpIHtcbiAgdmFyIGJhdGNoUmVmID0gdXNlUmVmKFtdKTtcblxuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoe30pLFxuICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgICBmb3JjZVVwZGF0ZSA9IF91c2VTdGF0ZTJbMV07XG5cbiAgdmFyIHN0YXRlID0gdXNlUmVmKHR5cGVvZiBkZWZhdWx0U3RhdGUgPT09ICdmdW5jdGlvbicgPyBkZWZhdWx0U3RhdGUoKSA6IGRlZmF1bHRTdGF0ZSk7XG4gIHZhciBmbHVzaFVwZGF0ZSA9IHVzZVJhZihmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGN1cnJlbnQgPSBzdGF0ZS5jdXJyZW50O1xuICAgIGJhdGNoUmVmLmN1cnJlbnQuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIGN1cnJlbnQgPSBjYWxsYmFjayhjdXJyZW50KTtcbiAgICB9KTtcbiAgICBiYXRjaFJlZi5jdXJyZW50ID0gW107XG4gICAgc3RhdGUuY3VycmVudCA9IGN1cnJlbnQ7XG4gICAgZm9yY2VVcGRhdGUoe30pO1xuICB9KTtcblxuICBmdW5jdGlvbiB1cGRhdGVyKGNhbGxiYWNrKSB7XG4gICAgYmF0Y2hSZWYuY3VycmVudC5wdXNoKGNhbGxiYWNrKTtcbiAgICBmbHVzaFVwZGF0ZSgpO1xuICB9XG5cbiAgcmV0dXJuIFtzdGF0ZS5jdXJyZW50LCB1cGRhdGVyXTtcbn0iLCJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgS2V5Q29kZSBmcm9tIFwicmMtdXRpbC9lcy9LZXlDb2RlXCI7XG5cbmZ1bmN0aW9uIFRhYk5vZGUoX3JlZiwgcmVmKSB7XG4gIHZhciBfY2xhc3NOYW1lcztcblxuICB2YXIgcHJlZml4Q2xzID0gX3JlZi5wcmVmaXhDbHMsXG4gICAgICBpZCA9IF9yZWYuaWQsXG4gICAgICBhY3RpdmUgPSBfcmVmLmFjdGl2ZSxcbiAgICAgIF9yZWYkdGFiID0gX3JlZi50YWIsXG4gICAgICBrZXkgPSBfcmVmJHRhYi5rZXksXG4gICAgICB0YWIgPSBfcmVmJHRhYi50YWIsXG4gICAgICBkaXNhYmxlZCA9IF9yZWYkdGFiLmRpc2FibGVkLFxuICAgICAgY2xvc2VJY29uID0gX3JlZiR0YWIuY2xvc2VJY29uLFxuICAgICAgY2xvc2FibGUgPSBfcmVmLmNsb3NhYmxlLFxuICAgICAgcmVuZGVyV3JhcHBlciA9IF9yZWYucmVuZGVyV3JhcHBlcixcbiAgICAgIHJlbW92ZUFyaWFMYWJlbCA9IF9yZWYucmVtb3ZlQXJpYUxhYmVsLFxuICAgICAgZWRpdGFibGUgPSBfcmVmLmVkaXRhYmxlLFxuICAgICAgb25DbGljayA9IF9yZWYub25DbGljayxcbiAgICAgIG9uUmVtb3ZlID0gX3JlZi5vblJlbW92ZSxcbiAgICAgIG9uRm9jdXMgPSBfcmVmLm9uRm9jdXMsXG4gICAgICBzdHlsZSA9IF9yZWYuc3R5bGU7XG4gIHZhciB0YWJQcmVmaXggPSBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXRhYlwiKTtcbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gb25SZW1vdmU7XG4gIH0sIFtdKTtcbiAgdmFyIHJlbW92YWJsZSA9IGVkaXRhYmxlICYmIGNsb3NhYmxlICE9PSBmYWxzZSAmJiAhZGlzYWJsZWQ7XG5cbiAgZnVuY3Rpb24gb25JbnRlcm5hbENsaWNrKGUpIHtcbiAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBvbkNsaWNrKGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25SZW1vdmVUYWIoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGVkaXRhYmxlLm9uRWRpdCgncmVtb3ZlJywge1xuICAgICAga2V5OiBrZXksXG4gICAgICBldmVudDogZXZlbnRcbiAgICB9KTtcbiAgfVxuXG4gIHZhciBub2RlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGtleToga2V5LFxuICAgIHJlZjogcmVmLFxuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyh0YWJQcmVmaXgsIChfY2xhc3NOYW1lcyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KHRhYlByZWZpeCwgXCItd2l0aC1yZW1vdmVcIiksIHJlbW92YWJsZSksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQodGFiUHJlZml4LCBcIi1hY3RpdmVcIiksIGFjdGl2ZSksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQodGFiUHJlZml4LCBcIi1kaXNhYmxlZFwiKSwgZGlzYWJsZWQpLCBfY2xhc3NOYW1lcykpLFxuICAgIHN0eWxlOiBzdHlsZSxcbiAgICBvbkNsaWNrOiBvbkludGVybmFsQ2xpY2tcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIHJvbGU6IFwidGFiXCIsXG4gICAgXCJhcmlhLXNlbGVjdGVkXCI6IGFjdGl2ZSxcbiAgICBpZDogaWQgJiYgXCJcIi5jb25jYXQoaWQsIFwiLXRhYi1cIikuY29uY2F0KGtleSksXG4gICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdCh0YWJQcmVmaXgsIFwiLWJ0blwiKSxcbiAgICBcImFyaWEtY29udHJvbHNcIjogaWQgJiYgXCJcIi5jb25jYXQoaWQsIFwiLXBhbmVsLVwiKS5jb25jYXQoa2V5KSxcbiAgICBcImFyaWEtZGlzYWJsZWRcIjogZGlzYWJsZWQsXG4gICAgdGFiSW5kZXg6IGRpc2FibGVkID8gbnVsbCA6IDAsXG4gICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgb25JbnRlcm5hbENsaWNrKGUpO1xuICAgIH0sXG4gICAgb25LZXlEb3duOiBmdW5jdGlvbiBvbktleURvd24oZSkge1xuICAgICAgaWYgKFtLZXlDb2RlLlNQQUNFLCBLZXlDb2RlLkVOVEVSXS5pbmNsdWRlcyhlLndoaWNoKSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIG9uSW50ZXJuYWxDbGljayhlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIG9uRm9jdXM6IG9uRm9jdXNcbiAgfSwgdGFiKSwgcmVtb3ZhYmxlICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgIFwiYXJpYS1sYWJlbFwiOiByZW1vdmVBcmlhTGFiZWwgfHwgJ3JlbW92ZScsXG4gICAgdGFiSW5kZXg6IDAsXG4gICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdCh0YWJQcmVmaXgsIFwiLXJlbW92ZVwiKSxcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBvblJlbW92ZVRhYihlKTtcbiAgICB9XG4gIH0sIGNsb3NlSWNvbiB8fCBlZGl0YWJsZS5yZW1vdmVJY29uIHx8ICfDlycpKTtcbiAgcmV0dXJuIHJlbmRlcldyYXBwZXIgPyByZW5kZXJXcmFwcGVyKG5vZGUpIDogbm9kZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoVGFiTm9kZSk7IiwiaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCB7IHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG52YXIgREVGQVVMVF9TSVpFID0ge1xuICB3aWR0aDogMCxcbiAgaGVpZ2h0OiAwLFxuICBsZWZ0OiAwLFxuICB0b3A6IDBcbn07XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VPZmZzZXRzKHRhYnMsIHRhYlNpemVzLCBob2xkZXJTY3JvbGxXaWR0aCkge1xuICByZXR1cm4gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF90YWJzJDtcblxuICAgIHZhciBtYXAgPSBuZXcgTWFwKCk7XG4gICAgdmFyIGxhc3RPZmZzZXQgPSB0YWJTaXplcy5nZXQoKF90YWJzJCA9IHRhYnNbMF0pID09PSBudWxsIHx8IF90YWJzJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RhYnMkLmtleSkgfHwgREVGQVVMVF9TSVpFO1xuICAgIHZhciByaWdodE9mZnNldCA9IGxhc3RPZmZzZXQubGVmdCArIGxhc3RPZmZzZXQud2lkdGg7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhYnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIHZhciBrZXkgPSB0YWJzW2ldLmtleTtcbiAgICAgIHZhciBkYXRhID0gdGFiU2l6ZXMuZ2V0KGtleSk7IC8vIFJldXNlIGxhc3Qgb25lIHdoZW4gbm90IGV4aXN0IHlldFxuXG4gICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgdmFyIF90YWJzO1xuXG4gICAgICAgIGRhdGEgPSB0YWJTaXplcy5nZXQoKF90YWJzID0gdGFic1tpIC0gMV0pID09PSBudWxsIHx8IF90YWJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGFicy5rZXkpIHx8IERFRkFVTFRfU0laRTtcbiAgICAgIH1cblxuICAgICAgdmFyIGVudGl0eSA9IG1hcC5nZXQoa2V5KSB8fCBfb2JqZWN0U3ByZWFkKHt9LCBkYXRhKTsgLy8gUmlnaHRcblxuXG4gICAgICBlbnRpdHkucmlnaHQgPSByaWdodE9mZnNldCAtIGVudGl0eS5sZWZ0IC0gZW50aXR5LndpZHRoOyAvLyBVcGRhdGUgZW50aXR5XG5cbiAgICAgIG1hcC5zZXQoa2V5LCBlbnRpdHkpO1xuICAgIH1cblxuICAgIHJldHVybiBtYXA7XG4gIH0sIFt0YWJzLm1hcChmdW5jdGlvbiAodGFiKSB7XG4gICAgcmV0dXJuIHRhYi5rZXk7XG4gIH0pLmpvaW4oJ18nKSwgdGFiU2l6ZXMsIGhvbGRlclNjcm9sbFdpZHRoXSk7XG59IiwiaW1wb3J0IHsgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbnZhciBERUZBVUxUX1NJWkUgPSB7XG4gIHdpZHRoOiAwLFxuICBoZWlnaHQ6IDAsXG4gIGxlZnQ6IDAsXG4gIHRvcDogMCxcbiAgcmlnaHQ6IDBcbn07XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VWaXNpYmxlUmFuZ2UodGFiT2Zmc2V0cywgY29udGFpbmVyU2l6ZSwgdGFiQ29udGVudE5vZGVTaXplLCBhZGROb2RlU2l6ZSwgX3JlZikge1xuICB2YXIgdGFicyA9IF9yZWYudGFicyxcbiAgICAgIHRhYlBvc2l0aW9uID0gX3JlZi50YWJQb3NpdGlvbixcbiAgICAgIHJ0bCA9IF9yZWYucnRsO1xuICB2YXIgdW5pdDtcbiAgdmFyIHBvc2l0aW9uO1xuICB2YXIgdHJhbnNmb3JtU2l6ZTtcblxuICBpZiAoWyd0b3AnLCAnYm90dG9tJ10uaW5jbHVkZXModGFiUG9zaXRpb24pKSB7XG4gICAgdW5pdCA9ICd3aWR0aCc7XG4gICAgcG9zaXRpb24gPSBydGwgPyAncmlnaHQnIDogJ2xlZnQnO1xuICAgIHRyYW5zZm9ybVNpemUgPSBNYXRoLmFicyhjb250YWluZXJTaXplLmxlZnQpO1xuICB9IGVsc2Uge1xuICAgIHVuaXQgPSAnaGVpZ2h0JztcbiAgICBwb3NpdGlvbiA9ICd0b3AnO1xuICAgIHRyYW5zZm9ybVNpemUgPSAtY29udGFpbmVyU2l6ZS50b3A7XG4gIH1cblxuICB2YXIgYmFzaWNTaXplID0gY29udGFpbmVyU2l6ZVt1bml0XTtcbiAgdmFyIHRhYkNvbnRlbnRTaXplID0gdGFiQ29udGVudE5vZGVTaXplW3VuaXRdO1xuICB2YXIgYWRkU2l6ZSA9IGFkZE5vZGVTaXplW3VuaXRdO1xuICB2YXIgbWVyZ2VkQmFzaWNTaXplID0gYmFzaWNTaXplO1xuXG4gIGlmICh0YWJDb250ZW50U2l6ZSArIGFkZFNpemUgPiBiYXNpY1NpemUpIHtcbiAgICBtZXJnZWRCYXNpY1NpemUgPSBiYXNpY1NpemUgLSBhZGRTaXplO1xuICB9XG5cbiAgcmV0dXJuIHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGFicy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBbMCwgMF07XG4gICAgfVxuXG4gICAgdmFyIGxlbiA9IHRhYnMubGVuZ3RoO1xuICAgIHZhciBlbmRJbmRleCA9IGxlbjtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgIHZhciBvZmZzZXQgPSB0YWJPZmZzZXRzLmdldCh0YWJzW2ldLmtleSkgfHwgREVGQVVMVF9TSVpFO1xuXG4gICAgICBpZiAob2Zmc2V0W3Bvc2l0aW9uXSArIG9mZnNldFt1bml0XSA+IHRyYW5zZm9ybVNpemUgKyBtZXJnZWRCYXNpY1NpemUpIHtcbiAgICAgICAgZW5kSW5kZXggPSBpIC0gMTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHN0YXJ0SW5kZXggPSAwO1xuXG4gICAgZm9yICh2YXIgX2kgPSBsZW4gLSAxOyBfaSA+PSAwOyBfaSAtPSAxKSB7XG4gICAgICB2YXIgX29mZnNldCA9IHRhYk9mZnNldHMuZ2V0KHRhYnNbX2ldLmtleSkgfHwgREVGQVVMVF9TSVpFO1xuXG4gICAgICBpZiAoX29mZnNldFtwb3NpdGlvbl0gPCB0cmFuc2Zvcm1TaXplKSB7XG4gICAgICAgIHN0YXJ0SW5kZXggPSBfaSArIDE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbc3RhcnRJbmRleCwgZW5kSW5kZXhdO1xuICB9LCBbdGFiT2Zmc2V0cywgdHJhbnNmb3JtU2l6ZSwgbWVyZ2VkQmFzaWNTaXplLCB0YWJQb3NpdGlvbiwgdGFicy5tYXAoZnVuY3Rpb24gKHRhYikge1xuICAgIHJldHVybiB0YWIua2V5O1xuICB9KS5qb2luKCdfJyksIHJ0bF0pO1xufSIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBSZXNpemVPYnNlcnZlciBmcm9tICdyYy1yZXNpemUtb2JzZXJ2ZXInOyAvLyBVc2Ugc2hhcmVkIHZhcmlhYmxlIHRvIHNhdmUgYnVuZGxlIHNpemVcblxudmFyIFVOREVGSU5FRCA9IHVuZGVmaW5lZDtcblxuZnVuY3Rpb24gSW50ZXJuYWxJdGVtKHByb3BzLCByZWYpIHtcbiAgdmFyIHByZWZpeENscyA9IHByb3BzLnByZWZpeENscyxcbiAgICAgIGludmFsaWRhdGUgPSBwcm9wcy5pbnZhbGlkYXRlLFxuICAgICAgaXRlbSA9IHByb3BzLml0ZW0sXG4gICAgICByZW5kZXJJdGVtID0gcHJvcHMucmVuZGVySXRlbSxcbiAgICAgIHJlc3BvbnNpdmUgPSBwcm9wcy5yZXNwb25zaXZlLFxuICAgICAgcmVnaXN0ZXJTaXplID0gcHJvcHMucmVnaXN0ZXJTaXplLFxuICAgICAgaXRlbUtleSA9IHByb3BzLml0ZW1LZXksXG4gICAgICBjbGFzc05hbWUgPSBwcm9wcy5jbGFzc05hbWUsXG4gICAgICBzdHlsZSA9IHByb3BzLnN0eWxlLFxuICAgICAgY2hpbGRyZW4gPSBwcm9wcy5jaGlsZHJlbixcbiAgICAgIGRpc3BsYXkgPSBwcm9wcy5kaXNwbGF5LFxuICAgICAgb3JkZXIgPSBwcm9wcy5vcmRlcixcbiAgICAgIF9wcm9wcyRjb21wb25lbnQgPSBwcm9wcy5jb21wb25lbnQsXG4gICAgICBDb21wb25lbnQgPSBfcHJvcHMkY29tcG9uZW50ID09PSB2b2lkIDAgPyAnZGl2JyA6IF9wcm9wcyRjb21wb25lbnQsXG4gICAgICByZXN0UHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMocHJvcHMsIFtcInByZWZpeENsc1wiLCBcImludmFsaWRhdGVcIiwgXCJpdGVtXCIsIFwicmVuZGVySXRlbVwiLCBcInJlc3BvbnNpdmVcIiwgXCJyZWdpc3RlclNpemVcIiwgXCJpdGVtS2V5XCIsIFwiY2xhc3NOYW1lXCIsIFwic3R5bGVcIiwgXCJjaGlsZHJlblwiLCBcImRpc3BsYXlcIiwgXCJvcmRlclwiLCBcImNvbXBvbmVudFwiXSk7XG5cbiAgdmFyIG1lcmdlZEhpZGRlbiA9IHJlc3BvbnNpdmUgJiYgIWRpc3BsYXk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IEVmZmVjdCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGZ1bmN0aW9uIGludGVybmFsUmVnaXN0ZXJTaXplKHdpZHRoKSB7XG4gICAgcmVnaXN0ZXJTaXplKGl0ZW1LZXksIHdpZHRoKTtcbiAgfVxuXG4gIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGludGVybmFsUmVnaXN0ZXJTaXplKG51bGwpO1xuICAgIH07XG4gIH0sIFtdKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gUmVuZGVyID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIGNoaWxkTm9kZSA9IHJlbmRlckl0ZW0gJiYgaXRlbSAhPT0gVU5ERUZJTkVEID8gcmVuZGVySXRlbShpdGVtKSA6IGNoaWxkcmVuO1xuICB2YXIgb3ZlcmZsb3dTdHlsZTtcblxuICBpZiAoIWludmFsaWRhdGUpIHtcbiAgICBvdmVyZmxvd1N0eWxlID0ge1xuICAgICAgb3BhY2l0eTogbWVyZ2VkSGlkZGVuID8gMCA6IDEsXG4gICAgICBoZWlnaHQ6IG1lcmdlZEhpZGRlbiA/IDAgOiBVTkRFRklORUQsXG4gICAgICBvdmVyZmxvd1k6IG1lcmdlZEhpZGRlbiA/ICdoaWRkZW4nIDogVU5ERUZJTkVELFxuICAgICAgb3JkZXI6IHJlc3BvbnNpdmUgPyBvcmRlciA6IFVOREVGSU5FRCxcbiAgICAgIHBvaW50ZXJFdmVudHM6IG1lcmdlZEhpZGRlbiA/ICdub25lJyA6IFVOREVGSU5FRCxcbiAgICAgIHBvc2l0aW9uOiBtZXJnZWRIaWRkZW4gPyAnYWJzb2x1dGUnIDogVU5ERUZJTkVEXG4gICAgfTtcbiAgfVxuXG4gIHZhciBvdmVyZmxvd1Byb3BzID0ge307XG5cbiAgaWYgKG1lcmdlZEhpZGRlbikge1xuICAgIG92ZXJmbG93UHJvcHNbJ2FyaWEtaGlkZGVuJ10gPSB0cnVlO1xuICB9XG5cbiAgdmFyIGl0ZW1Ob2RlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCBfZXh0ZW5kcyh7XG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKCFpbnZhbGlkYXRlICYmIHByZWZpeENscywgY2xhc3NOYW1lKSxcbiAgICBzdHlsZTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBvdmVyZmxvd1N0eWxlKSwgc3R5bGUpXG4gIH0sIG92ZXJmbG93UHJvcHMsIHJlc3RQcm9wcywge1xuICAgIHJlZjogcmVmXG4gIH0pLCBjaGlsZE5vZGUpO1xuXG4gIGlmIChyZXNwb25zaXZlKSB7XG4gICAgaXRlbU5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChSZXNpemVPYnNlcnZlciwge1xuICAgICAgb25SZXNpemU6IGZ1bmN0aW9uIG9uUmVzaXplKF9yZWYpIHtcbiAgICAgICAgdmFyIG9mZnNldFdpZHRoID0gX3JlZi5vZmZzZXRXaWR0aDtcbiAgICAgICAgaW50ZXJuYWxSZWdpc3RlclNpemUob2Zmc2V0V2lkdGgpO1xuICAgICAgfVxuICAgIH0sIGl0ZW1Ob2RlKTtcbiAgfVxuXG4gIHJldHVybiBpdGVtTm9kZTtcbn1cblxudmFyIEl0ZW0gPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihJbnRlcm5hbEl0ZW0pO1xuSXRlbS5kaXNwbGF5TmFtZSA9ICdJdGVtJztcbmV4cG9ydCBkZWZhdWx0IEl0ZW07IiwiaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgeyB1c2VSZWYsIHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgcmFmIGZyb20gXCJyYy11dGlsL2VzL3JhZlwiO1xuLyoqXG4gKiBTdGF0ZSBnZW5lcmF0ZS4gUmV0dXJuIGEgYHNldFN0YXRlYCBidXQgaXQgd2lsbCBmbHVzaCBhbGwgc3RhdGUgd2l0aCBvbmUgcmVuZGVyIHRvIHNhdmUgcGVyZi5cbiAqIFRoaXMgaXMgbm90IGEgcmVhbGl6YXRpb24gb2YgYHVuc3RhYmxlX2JhdGNoZWRVcGRhdGVzYC5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlQmF0Y2hGcmFtZVN0YXRlKCkge1xuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoe30pLFxuICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgICBmb3JjZVVwZGF0ZSA9IF91c2VTdGF0ZTJbMV07XG5cbiAgdmFyIHN0YXRlc1JlZiA9IHVzZVJlZihbXSk7XG4gIHZhciBkZXN0cm95UmVmID0gdXNlUmVmKGZhbHNlKTtcbiAgdmFyIHdhbGtpbmdJbmRleCA9IDA7XG4gIHZhciBiZWZvcmVGcmFtZUlkID0gMDtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgZGVzdHJveVJlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgZnVuY3Rpb24gY3JlYXRlU3RhdGUoZGVmYXVsdFZhbHVlKSB7XG4gICAgdmFyIG15SW5kZXggPSB3YWxraW5nSW5kZXg7XG4gICAgd2Fsa2luZ0luZGV4ICs9IDE7IC8vIEZpbGwgdmFsdWUgaWYgbm90IGV4aXN0IHlldFxuXG4gICAgaWYgKHN0YXRlc1JlZi5jdXJyZW50Lmxlbmd0aCA8IG15SW5kZXggKyAxKSB7XG4gICAgICBzdGF0ZXNSZWYuY3VycmVudFtteUluZGV4XSA9IGRlZmF1bHRWYWx1ZTtcbiAgICB9IC8vIFJldHVybiBmaWxsZWQgYXMgYHNldFN0YXRlYFxuXG5cbiAgICB2YXIgdmFsdWUgPSBzdGF0ZXNSZWYuY3VycmVudFtteUluZGV4XTtcblxuICAgIGZ1bmN0aW9uIHNldFZhbHVlKHZhbCkge1xuICAgICAgc3RhdGVzUmVmLmN1cnJlbnRbbXlJbmRleF0gPSB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nID8gdmFsKHN0YXRlc1JlZi5jdXJyZW50W215SW5kZXhdKSA6IHZhbDtcbiAgICAgIHJhZi5jYW5jZWwoYmVmb3JlRnJhbWVJZCk7IC8vIEZsdXNoIHdpdGggYmF0Y2hcblxuICAgICAgYmVmb3JlRnJhbWVJZCA9IHJhZihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghZGVzdHJveVJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgZm9yY2VVcGRhdGUoe30pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gW3ZhbHVlLCBzZXRWYWx1ZV07XG4gIH1cblxuICByZXR1cm4gY3JlYXRlU3RhdGU7XG59IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgSXRlbSBmcm9tICcuL0l0ZW0nO1xuaW1wb3J0IHsgT3ZlcmZsb3dDb250ZXh0IH0gZnJvbSAnLi9PdmVyZmxvdyc7XG5cbnZhciBJbnRlcm5hbFJhd0l0ZW0gPSBmdW5jdGlvbiBJbnRlcm5hbFJhd0l0ZW0ocHJvcHMsIHJlZikge1xuICB2YXIgY29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoT3ZlcmZsb3dDb250ZXh0KTsgLy8gUmVuZGVyIGRpcmVjdGx5IHdoZW4gY29udGV4dCBub3QgcHJvdmlkZWRcblxuICBpZiAoIWNvbnRleHQpIHtcbiAgICB2YXIgX3Byb3BzJGNvbXBvbmVudCA9IHByb3BzLmNvbXBvbmVudCxcbiAgICAgICAgQ29tcG9uZW50ID0gX3Byb3BzJGNvbXBvbmVudCA9PT0gdm9pZCAwID8gJ2RpdicgOiBfcHJvcHMkY29tcG9uZW50LFxuICAgICAgICBfcmVzdFByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHByb3BzLCBbXCJjb21wb25lbnRcIl0pO1xuXG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENvbXBvbmVudCwgX2V4dGVuZHMoe30sIF9yZXN0UHJvcHMsIHtcbiAgICAgIHJlZjogcmVmXG4gICAgfSkpO1xuICB9XG5cbiAgdmFyIGNvbnRleHRDbGFzc05hbWUgPSBjb250ZXh0LmNsYXNzTmFtZSxcbiAgICAgIHJlc3RDb250ZXh0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKGNvbnRleHQsIFtcImNsYXNzTmFtZVwiXSk7XG5cbiAgdmFyIGNsYXNzTmFtZSA9IHByb3BzLmNsYXNzTmFtZSxcbiAgICAgIHJlc3RQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhwcm9wcywgW1wiY2xhc3NOYW1lXCJdKTsgLy8gRG8gbm90IHBhc3MgY29udGV4dCB0byBzdWIgaXRlbSB0byBhdm9pZCBtdWx0aXBsZSBtZWFzdXJlXG5cblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoT3ZlcmZsb3dDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IG51bGxcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSXRlbSwgX2V4dGVuZHMoe1xuICAgIHJlZjogcmVmLFxuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhjb250ZXh0Q2xhc3NOYW1lLCBjbGFzc05hbWUpXG4gIH0sIHJlc3RDb250ZXh0LCByZXN0UHJvcHMpKSk7XG59O1xuXG52YXIgUmF3SXRlbSA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKEludGVybmFsUmF3SXRlbSk7XG5SYXdJdGVtLmRpc3BsYXlOYW1lID0gJ1Jhd0l0ZW0nO1xuZXhwb3J0IGRlZmF1bHQgUmF3SXRlbTsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlTWVtbywgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBSZXNpemVPYnNlcnZlciBmcm9tICdyYy1yZXNpemUtb2JzZXJ2ZXInO1xuaW1wb3J0IEl0ZW0gZnJvbSAnLi9JdGVtJztcbmltcG9ydCB7IHVzZUJhdGNoRnJhbWVTdGF0ZSB9IGZyb20gJy4vaG9va3MvdXNlQmF0Y2hGcmFtZVN0YXRlJztcbmltcG9ydCBSYXdJdGVtIGZyb20gJy4vUmF3SXRlbSc7XG5leHBvcnQgdmFyIE92ZXJmbG93Q29udGV4dCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVDb250ZXh0KG51bGwpO1xudmFyIFJFU1BPTlNJVkUgPSAncmVzcG9uc2l2ZSc7XG52YXIgSU5WQUxJREFURSA9ICdpbnZhbGlkYXRlJztcblxuZnVuY3Rpb24gZGVmYXVsdFJlbmRlclJlc3Qob21pdHRlZEl0ZW1zKSB7XG4gIHJldHVybiBcIisgXCIuY29uY2F0KG9taXR0ZWRJdGVtcy5sZW5ndGgsIFwiIC4uLlwiKTtcbn1cblxuZnVuY3Rpb24gT3ZlcmZsb3cocHJvcHMsIHJlZikge1xuICB2YXIgX3Byb3BzJHByZWZpeENscyA9IHByb3BzLnByZWZpeENscyxcbiAgICAgIHByZWZpeENscyA9IF9wcm9wcyRwcmVmaXhDbHMgPT09IHZvaWQgMCA/ICdyYy1vdmVyZmxvdycgOiBfcHJvcHMkcHJlZml4Q2xzLFxuICAgICAgX3Byb3BzJGRhdGEgPSBwcm9wcy5kYXRhLFxuICAgICAgZGF0YSA9IF9wcm9wcyRkYXRhID09PSB2b2lkIDAgPyBbXSA6IF9wcm9wcyRkYXRhLFxuICAgICAgcmVuZGVySXRlbSA9IHByb3BzLnJlbmRlckl0ZW0sXG4gICAgICByZW5kZXJSYXdJdGVtID0gcHJvcHMucmVuZGVyUmF3SXRlbSxcbiAgICAgIGl0ZW1LZXkgPSBwcm9wcy5pdGVtS2V5LFxuICAgICAgX3Byb3BzJGl0ZW1XaWR0aCA9IHByb3BzLml0ZW1XaWR0aCxcbiAgICAgIGl0ZW1XaWR0aCA9IF9wcm9wcyRpdGVtV2lkdGggPT09IHZvaWQgMCA/IDEwIDogX3Byb3BzJGl0ZW1XaWR0aCxcbiAgICAgIHNzciA9IHByb3BzLnNzcixcbiAgICAgIHN0eWxlID0gcHJvcHMuc3R5bGUsXG4gICAgICBjbGFzc05hbWUgPSBwcm9wcy5jbGFzc05hbWUsXG4gICAgICBtYXhDb3VudCA9IHByb3BzLm1heENvdW50LFxuICAgICAgcmVuZGVyUmVzdCA9IHByb3BzLnJlbmRlclJlc3QsXG4gICAgICByZW5kZXJSYXdSZXN0ID0gcHJvcHMucmVuZGVyUmF3UmVzdCxcbiAgICAgIHN1ZmZpeCA9IHByb3BzLnN1ZmZpeCxcbiAgICAgIF9wcm9wcyRjb21wb25lbnQgPSBwcm9wcy5jb21wb25lbnQsXG4gICAgICBDb21wb25lbnQgPSBfcHJvcHMkY29tcG9uZW50ID09PSB2b2lkIDAgPyAnZGl2JyA6IF9wcm9wcyRjb21wb25lbnQsXG4gICAgICBpdGVtQ29tcG9uZW50ID0gcHJvcHMuaXRlbUNvbXBvbmVudCxcbiAgICAgIG9uVmlzaWJsZUNoYW5nZSA9IHByb3BzLm9uVmlzaWJsZUNoYW5nZSxcbiAgICAgIHJlc3RQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhwcm9wcywgW1wicHJlZml4Q2xzXCIsIFwiZGF0YVwiLCBcInJlbmRlckl0ZW1cIiwgXCJyZW5kZXJSYXdJdGVtXCIsIFwiaXRlbUtleVwiLCBcIml0ZW1XaWR0aFwiLCBcInNzclwiLCBcInN0eWxlXCIsIFwiY2xhc3NOYW1lXCIsIFwibWF4Q291bnRcIiwgXCJyZW5kZXJSZXN0XCIsIFwicmVuZGVyUmF3UmVzdFwiLCBcInN1ZmZpeFwiLCBcImNvbXBvbmVudFwiLCBcIml0ZW1Db21wb25lbnRcIiwgXCJvblZpc2libGVDaGFuZ2VcIl0pO1xuXG4gIHZhciBjcmVhdGVVc2VTdGF0ZSA9IHVzZUJhdGNoRnJhbWVTdGF0ZSgpO1xuICB2YXIgZnVsbHlTU1IgPSBzc3IgPT09ICdmdWxsJztcblxuICB2YXIgX2NyZWF0ZVVzZVN0YXRlID0gY3JlYXRlVXNlU3RhdGUobnVsbCksXG4gICAgICBfY3JlYXRlVXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX2NyZWF0ZVVzZVN0YXRlLCAyKSxcbiAgICAgIGNvbnRhaW5lcldpZHRoID0gX2NyZWF0ZVVzZVN0YXRlMlswXSxcbiAgICAgIHNldENvbnRhaW5lcldpZHRoID0gX2NyZWF0ZVVzZVN0YXRlMlsxXTtcblxuICB2YXIgbWVyZ2VkQ29udGFpbmVyV2lkdGggPSBjb250YWluZXJXaWR0aCB8fCAwO1xuXG4gIHZhciBfY3JlYXRlVXNlU3RhdGUzID0gY3JlYXRlVXNlU3RhdGUobmV3IE1hcCgpKSxcbiAgICAgIF9jcmVhdGVVc2VTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfY3JlYXRlVXNlU3RhdGUzLCAyKSxcbiAgICAgIGl0ZW1XaWR0aHMgPSBfY3JlYXRlVXNlU3RhdGU0WzBdLFxuICAgICAgc2V0SXRlbVdpZHRocyA9IF9jcmVhdGVVc2VTdGF0ZTRbMV07XG5cbiAgdmFyIF9jcmVhdGVVc2VTdGF0ZTUgPSBjcmVhdGVVc2VTdGF0ZSgwKSxcbiAgICAgIF9jcmVhdGVVc2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfY3JlYXRlVXNlU3RhdGU1LCAyKSxcbiAgICAgIHByZXZSZXN0V2lkdGggPSBfY3JlYXRlVXNlU3RhdGU2WzBdLFxuICAgICAgc2V0UHJldlJlc3RXaWR0aCA9IF9jcmVhdGVVc2VTdGF0ZTZbMV07XG5cbiAgdmFyIF9jcmVhdGVVc2VTdGF0ZTcgPSBjcmVhdGVVc2VTdGF0ZSgwKSxcbiAgICAgIF9jcmVhdGVVc2VTdGF0ZTggPSBfc2xpY2VkVG9BcnJheShfY3JlYXRlVXNlU3RhdGU3LCAyKSxcbiAgICAgIHJlc3RXaWR0aCA9IF9jcmVhdGVVc2VTdGF0ZThbMF0sXG4gICAgICBzZXRSZXN0V2lkdGggPSBfY3JlYXRlVXNlU3RhdGU4WzFdO1xuXG4gIHZhciBfY3JlYXRlVXNlU3RhdGU5ID0gY3JlYXRlVXNlU3RhdGUoMCksXG4gICAgICBfY3JlYXRlVXNlU3RhdGUxMCA9IF9zbGljZWRUb0FycmF5KF9jcmVhdGVVc2VTdGF0ZTksIDIpLFxuICAgICAgc3VmZml4V2lkdGggPSBfY3JlYXRlVXNlU3RhdGUxMFswXSxcbiAgICAgIHNldFN1ZmZpeFdpZHRoID0gX2NyZWF0ZVVzZVN0YXRlMTBbMV07XG5cbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKG51bGwpLFxuICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgICBzdWZmaXhGaXhlZFN0YXJ0ID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNldFN1ZmZpeEZpeGVkU3RhcnQgPSBfdXNlU3RhdGUyWzFdO1xuXG4gIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUobnVsbCksXG4gICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksXG4gICAgICBkaXNwbGF5Q291bnQgPSBfdXNlU3RhdGU0WzBdLFxuICAgICAgc2V0RGlzcGxheUNvdW50ID0gX3VzZVN0YXRlNFsxXTtcblxuICB2YXIgbWVyZ2VkRGlzcGxheUNvdW50ID0gUmVhY3QudXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGRpc3BsYXlDb3VudCA9PT0gbnVsbCAmJiBmdWxseVNTUikge1xuICAgICAgcmV0dXJuIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xuICAgIH1cblxuICAgIHJldHVybiBkaXNwbGF5Q291bnQgfHwgMDtcbiAgfSwgW2Rpc3BsYXlDb3VudCwgY29udGFpbmVyV2lkdGhdKTtcblxuICB2YXIgX3VzZVN0YXRlNSA9IHVzZVN0YXRlKGZhbHNlKSxcbiAgICAgIF91c2VTdGF0ZTYgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGU1LCAyKSxcbiAgICAgIHJlc3RSZWFkeSA9IF91c2VTdGF0ZTZbMF0sXG4gICAgICBzZXRSZXN0UmVhZHkgPSBfdXNlU3RhdGU2WzFdO1xuXG4gIHZhciBpdGVtUHJlZml4Q2xzID0gXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1pdGVtXCIpOyAvLyBBbHdheXMgdXNlIHRoZSBtYXggd2lkdGggdG8gYXZvaWQgYmxpbmtcblxuICB2YXIgbWVyZ2VkUmVzdFdpZHRoID0gTWF0aC5tYXgocHJldlJlc3RXaWR0aCwgcmVzdFdpZHRoKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IERhdGEgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIGlzUmVzcG9uc2l2ZSA9IGRhdGEubGVuZ3RoICYmIG1heENvdW50ID09PSBSRVNQT05TSVZFO1xuICB2YXIgaW52YWxpZGF0ZSA9IG1heENvdW50ID09PSBJTlZBTElEQVRFO1xuICAvKipcbiAgICogV2hlbiBpcyBgcmVzcG9uc2l2ZWAsIHdlIHdpbGwgYWx3YXlzIHJlbmRlciByZXN0IG5vZGUgdG8gZ2V0IHRoZSByZWFsIHdpZHRoIG9mIGl0IGZvciBjYWxjdWxhdGlvblxuICAgKi9cblxuICB2YXIgc2hvd1Jlc3QgPSBpc1Jlc3BvbnNpdmUgfHwgdHlwZW9mIG1heENvdW50ID09PSAnbnVtYmVyJyAmJiBkYXRhLmxlbmd0aCA+IG1heENvdW50O1xuICB2YXIgbWVyZ2VkRGF0YSA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHZhciBpdGVtcyA9IGRhdGE7XG5cbiAgICBpZiAoaXNSZXNwb25zaXZlKSB7XG4gICAgICBpZiAoY29udGFpbmVyV2lkdGggPT09IG51bGwgJiYgZnVsbHlTU1IpIHtcbiAgICAgICAgaXRlbXMgPSBkYXRhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXRlbXMgPSBkYXRhLnNsaWNlKDAsIE1hdGgubWluKGRhdGEubGVuZ3RoLCBtZXJnZWRDb250YWluZXJXaWR0aCAvIGl0ZW1XaWR0aCkpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1heENvdW50ID09PSAnbnVtYmVyJykge1xuICAgICAgaXRlbXMgPSBkYXRhLnNsaWNlKDAsIG1heENvdW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gaXRlbXM7XG4gIH0sIFtkYXRhLCBpdGVtV2lkdGgsIGNvbnRhaW5lcldpZHRoLCBtYXhDb3VudCwgaXNSZXNwb25zaXZlXSk7XG4gIHZhciBvbWl0dGVkSXRlbXMgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaXNSZXNwb25zaXZlKSB7XG4gICAgICByZXR1cm4gZGF0YS5zbGljZShtZXJnZWREaXNwbGF5Q291bnQgKyAxKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YS5zbGljZShtZXJnZWREYXRhLmxlbmd0aCk7XG4gIH0sIFtkYXRhLCBtZXJnZWREYXRhLCBpc1Jlc3BvbnNpdmUsIG1lcmdlZERpc3BsYXlDb3VudF0pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gSXRlbSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgZ2V0S2V5ID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICBpZiAodHlwZW9mIGl0ZW1LZXkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBpdGVtS2V5KGl0ZW0pO1xuICAgIH1cblxuICAgIHJldHVybiAoX3JlZiA9IGl0ZW1LZXkgJiYgKGl0ZW0gPT09IG51bGwgfHwgaXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbVtpdGVtS2V5XSkpICE9PSBudWxsICYmIF9yZWYgIT09IHZvaWQgMCA/IF9yZWYgOiBpbmRleDtcbiAgfSwgW2l0ZW1LZXldKTtcbiAgdmFyIG1lcmdlZFJlbmRlckl0ZW0gPSB1c2VDYWxsYmFjayhyZW5kZXJJdGVtIHx8IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgcmV0dXJuIGl0ZW07XG4gIH0sIFtyZW5kZXJJdGVtXSk7XG5cbiAgZnVuY3Rpb24gdXBkYXRlRGlzcGxheUNvdW50KGNvdW50LCBub3RSZWFkeSkge1xuICAgIHNldERpc3BsYXlDb3VudChjb3VudCk7XG5cbiAgICBpZiAoIW5vdFJlYWR5KSB7XG4gICAgICBzZXRSZXN0UmVhZHkoY291bnQgPCBkYXRhLmxlbmd0aCAtIDEpO1xuICAgICAgb25WaXNpYmxlQ2hhbmdlID09PSBudWxsIHx8IG9uVmlzaWJsZUNoYW5nZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25WaXNpYmxlQ2hhbmdlKGNvdW50KTtcbiAgICB9XG4gIH0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFNpemUgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICBmdW5jdGlvbiBvbk92ZXJmbG93UmVzaXplKF8sIGVsZW1lbnQpIHtcbiAgICBzZXRDb250YWluZXJXaWR0aChlbGVtZW50LmNsaWVudFdpZHRoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyU2l6ZShrZXksIHdpZHRoKSB7XG4gICAgc2V0SXRlbVdpZHRocyhmdW5jdGlvbiAob3JpZ2luKSB7XG4gICAgICB2YXIgY2xvbmUgPSBuZXcgTWFwKG9yaWdpbik7XG5cbiAgICAgIGlmICh3aWR0aCA9PT0gbnVsbCkge1xuICAgICAgICBjbG9uZS5kZWxldGUoa2V5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsb25lLnNldChrZXksIHdpZHRoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXJPdmVyZmxvd1NpemUoXywgd2lkdGgpIHtcbiAgICBzZXRSZXN0V2lkdGgod2lkdGgpO1xuICAgIHNldFByZXZSZXN0V2lkdGgocmVzdFdpZHRoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyU3VmZml4U2l6ZShfLCB3aWR0aCkge1xuICAgIHNldFN1ZmZpeFdpZHRoKHdpZHRoKTtcbiAgfSAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBFZmZlY3QgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIGZ1bmN0aW9uIGdldEl0ZW1XaWR0aChpbmRleCkge1xuICAgIHJldHVybiBpdGVtV2lkdGhzLmdldChnZXRLZXkobWVyZ2VkRGF0YVtpbmRleF0sIGluZGV4KSk7XG4gIH1cblxuICBSZWFjdC51c2VMYXlvdXRFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmIChtZXJnZWRDb250YWluZXJXaWR0aCAmJiBtZXJnZWRSZXN0V2lkdGggJiYgbWVyZ2VkRGF0YSkge1xuICAgICAgdmFyIHRvdGFsV2lkdGggPSBzdWZmaXhXaWR0aDtcbiAgICAgIHZhciBsZW4gPSBtZXJnZWREYXRhLmxlbmd0aDtcbiAgICAgIHZhciBsYXN0SW5kZXggPSBsZW4gLSAxOyAvLyBXaGVuIGRhdGEgY291bnQgY2hhbmdlIHRvIDAsIHJlc2V0IHRoaXMgc2luY2Ugbm90IGxvb3Agd2lsbCByZWFjaFxuXG4gICAgICBpZiAoIWxlbikge1xuICAgICAgICB1cGRhdGVEaXNwbGF5Q291bnQoMCk7XG4gICAgICAgIHNldFN1ZmZpeEZpeGVkU3RhcnQobnVsbCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICB2YXIgY3VycmVudEl0ZW1XaWR0aCA9IGdldEl0ZW1XaWR0aChpKTsgLy8gQnJlYWsgc2luY2UgZGF0YSBub3QgcmVhZHlcblxuICAgICAgICBpZiAoY3VycmVudEl0ZW1XaWR0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdXBkYXRlRGlzcGxheUNvdW50KGkgLSAxLCB0cnVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSAvLyBGaW5kIGJlc3QgbWF0Y2hcblxuXG4gICAgICAgIHRvdGFsV2lkdGggKz0gY3VycmVudEl0ZW1XaWR0aDtcblxuICAgICAgICBpZiAoIC8vIE9ubHkgb25lIG1lYW5zIGB0b3RhbFdpZHRoYCBpcyB0aGUgZmluYWwgd2lkdGhcbiAgICAgICAgbGFzdEluZGV4ID09PSAwICYmIHRvdGFsV2lkdGggPD0gbWVyZ2VkQ29udGFpbmVyV2lkdGggfHwgLy8gTGFzdCB0d28gd2lkdGggd2lsbCBiZSB0aGUgZmluYWwgd2lkdGhcbiAgICAgICAgaSA9PT0gbGFzdEluZGV4IC0gMSAmJiB0b3RhbFdpZHRoICsgZ2V0SXRlbVdpZHRoKGxhc3RJbmRleCkgPD0gbWVyZ2VkQ29udGFpbmVyV2lkdGgpIHtcbiAgICAgICAgICAvLyBBZGRpdGlvbmFsIGNoZWNrIGlmIG1hdGNoIHRoZSBlbmRcbiAgICAgICAgICB1cGRhdGVEaXNwbGF5Q291bnQobGFzdEluZGV4KTtcbiAgICAgICAgICBzZXRTdWZmaXhGaXhlZFN0YXJ0KG51bGwpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2UgaWYgKHRvdGFsV2lkdGggKyBtZXJnZWRSZXN0V2lkdGggPiBtZXJnZWRDb250YWluZXJXaWR0aCkge1xuICAgICAgICAgIC8vIENhbiBub3QgaG9sZCBhbGwgdGhlIGNvbnRlbnQgdG8gc2hvdyByZXN0XG4gICAgICAgICAgdXBkYXRlRGlzcGxheUNvdW50KGkgLSAxKTtcbiAgICAgICAgICBzZXRTdWZmaXhGaXhlZFN0YXJ0KHRvdGFsV2lkdGggLSBjdXJyZW50SXRlbVdpZHRoIC0gc3VmZml4V2lkdGggKyByZXN0V2lkdGgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzdWZmaXggJiYgZ2V0SXRlbVdpZHRoKDApICsgc3VmZml4V2lkdGggPiBtZXJnZWRDb250YWluZXJXaWR0aCkge1xuICAgICAgICBzZXRTdWZmaXhGaXhlZFN0YXJ0KG51bGwpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW21lcmdlZENvbnRhaW5lcldpZHRoLCBpdGVtV2lkdGhzLCByZXN0V2lkdGgsIHN1ZmZpeFdpZHRoLCBnZXRLZXksIG1lcmdlZERhdGFdKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gUmVuZGVyID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIGRpc3BsYXlSZXN0ID0gcmVzdFJlYWR5ICYmICEhb21pdHRlZEl0ZW1zLmxlbmd0aDtcbiAgdmFyIHN1ZmZpeFN0eWxlID0ge307XG5cbiAgaWYgKHN1ZmZpeEZpeGVkU3RhcnQgIT09IG51bGwgJiYgaXNSZXNwb25zaXZlKSB7XG4gICAgc3VmZml4U3R5bGUgPSB7XG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIGxlZnQ6IHN1ZmZpeEZpeGVkU3RhcnQsXG4gICAgICB0b3A6IDBcbiAgICB9O1xuICB9XG5cbiAgdmFyIGl0ZW1TaGFyZWRQcm9wcyA9IHtcbiAgICBwcmVmaXhDbHM6IGl0ZW1QcmVmaXhDbHMsXG4gICAgcmVzcG9uc2l2ZTogaXNSZXNwb25zaXZlLFxuICAgIGNvbXBvbmVudDogaXRlbUNvbXBvbmVudCxcbiAgICBpbnZhbGlkYXRlOiBpbnZhbGlkYXRlXG4gIH07IC8vID4+Pj4+IENob2ljZSByZW5kZXIgZnVuIGJ5IGByZW5kZXJSYXdJdGVtYFxuXG4gIHZhciBpbnRlcm5hbFJlbmRlckl0ZW1Ob2RlID0gcmVuZGVyUmF3SXRlbSA/IGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuICAgIHZhciBrZXkgPSBnZXRLZXkoaXRlbSwgaW5kZXgpO1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChPdmVyZmxvd0NvbnRleHQuUHJvdmlkZXIsIHtcbiAgICAgIGtleToga2V5LFxuICAgICAgdmFsdWU6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaXRlbVNoYXJlZFByb3BzKSwge30sIHtcbiAgICAgICAgb3JkZXI6IGluZGV4LFxuICAgICAgICBpdGVtOiBpdGVtLFxuICAgICAgICBpdGVtS2V5OiBrZXksXG4gICAgICAgIHJlZ2lzdGVyU2l6ZTogcmVnaXN0ZXJTaXplLFxuICAgICAgICBkaXNwbGF5OiBpbmRleCA8PSBtZXJnZWREaXNwbGF5Q291bnRcbiAgICAgIH0pXG4gICAgfSwgcmVuZGVyUmF3SXRlbShpdGVtLCBpbmRleCkpO1xuICB9IDogZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XG4gICAgdmFyIGtleSA9IGdldEtleShpdGVtLCBpbmRleCk7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEl0ZW0sIF9leHRlbmRzKHt9LCBpdGVtU2hhcmVkUHJvcHMsIHtcbiAgICAgIG9yZGVyOiBpbmRleCxcbiAgICAgIGtleToga2V5LFxuICAgICAgaXRlbTogaXRlbSxcbiAgICAgIHJlbmRlckl0ZW06IG1lcmdlZFJlbmRlckl0ZW0sXG4gICAgICBpdGVtS2V5OiBrZXksXG4gICAgICByZWdpc3RlclNpemU6IHJlZ2lzdGVyU2l6ZSxcbiAgICAgIGRpc3BsYXk6IGluZGV4IDw9IG1lcmdlZERpc3BsYXlDb3VudFxuICAgIH0pKTtcbiAgfTsgLy8gPj4+Pj4gUmVzdCBub2RlXG5cbiAgdmFyIHJlc3ROb2RlO1xuICB2YXIgcmVzdENvbnRleHRQcm9wcyA9IHtcbiAgICBvcmRlcjogZGlzcGxheVJlc3QgPyBtZXJnZWREaXNwbGF5Q291bnQgOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KGl0ZW1QcmVmaXhDbHMsIFwiLXJlc3RcIiksXG4gICAgcmVnaXN0ZXJTaXplOiByZWdpc3Rlck92ZXJmbG93U2l6ZSxcbiAgICBkaXNwbGF5OiBkaXNwbGF5UmVzdFxuICB9O1xuXG4gIGlmICghcmVuZGVyUmF3UmVzdCkge1xuICAgIHZhciBtZXJnZWRSZW5kZXJSZXN0ID0gcmVuZGVyUmVzdCB8fCBkZWZhdWx0UmVuZGVyUmVzdDtcbiAgICByZXN0Tm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEl0ZW0sIF9leHRlbmRzKHt9LCBpdGVtU2hhcmVkUHJvcHMsIHJlc3RDb250ZXh0UHJvcHMpLCB0eXBlb2YgbWVyZ2VkUmVuZGVyUmVzdCA9PT0gJ2Z1bmN0aW9uJyA/IG1lcmdlZFJlbmRlclJlc3Qob21pdHRlZEl0ZW1zKSA6IG1lcmdlZFJlbmRlclJlc3QpO1xuICB9IGVsc2UgaWYgKHJlbmRlclJhd1Jlc3QpIHtcbiAgICByZXN0Tm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE92ZXJmbG93Q29udGV4dC5Qcm92aWRlciwge1xuICAgICAgdmFsdWU6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaXRlbVNoYXJlZFByb3BzKSwgcmVzdENvbnRleHRQcm9wcylcbiAgICB9LCByZW5kZXJSYXdSZXN0KG9taXR0ZWRJdGVtcykpO1xuICB9XG5cbiAgdmFyIG92ZXJmbG93Tm9kZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENvbXBvbmVudCwgX2V4dGVuZHMoe1xuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyghaW52YWxpZGF0ZSAmJiBwcmVmaXhDbHMsIGNsYXNzTmFtZSksXG4gICAgc3R5bGU6IHN0eWxlLFxuICAgIHJlZjogcmVmXG4gIH0sIHJlc3RQcm9wcyksIG1lcmdlZERhdGEubWFwKGludGVybmFsUmVuZGVySXRlbU5vZGUpLCBzaG93UmVzdCA/IHJlc3ROb2RlIDogbnVsbCwgc3VmZml4ICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEl0ZW0sIF9leHRlbmRzKHt9LCBpdGVtU2hhcmVkUHJvcHMsIHtcbiAgICBvcmRlcjogbWVyZ2VkRGlzcGxheUNvdW50LFxuICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQoaXRlbVByZWZpeENscywgXCItc3VmZml4XCIpLFxuICAgIHJlZ2lzdGVyU2l6ZTogcmVnaXN0ZXJTdWZmaXhTaXplLFxuICAgIGRpc3BsYXk6IHRydWUsXG4gICAgc3R5bGU6IHN1ZmZpeFN0eWxlXG4gIH0pLCBzdWZmaXgpKTtcblxuICBpZiAoaXNSZXNwb25zaXZlKSB7XG4gICAgb3ZlcmZsb3dOb2RlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUmVzaXplT2JzZXJ2ZXIsIHtcbiAgICAgIG9uUmVzaXplOiBvbk92ZXJmbG93UmVzaXplXG4gICAgfSwgb3ZlcmZsb3dOb2RlKTtcbiAgfVxuXG4gIHJldHVybiBvdmVyZmxvd05vZGU7XG59XG5cbnZhciBGb3J3YXJkT3ZlcmZsb3cgPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihPdmVyZmxvdyk7XG5Gb3J3YXJkT3ZlcmZsb3cuZGlzcGxheU5hbWUgPSAnT3ZlcmZsb3cnO1xuRm9yd2FyZE92ZXJmbG93Lkl0ZW0gPSBSYXdJdGVtO1xuRm9yd2FyZE92ZXJmbG93LlJFU1BPTlNJVkUgPSBSRVNQT05TSVZFO1xuRm9yd2FyZE92ZXJmbG93LklOVkFMSURBVEUgPSBJTlZBTElEQVRFOyAvLyBDb252ZXJ0IHRvIGdlbmVyaWMgdHlwZVxuXG5leHBvcnQgZGVmYXVsdCBGb3J3YXJkT3ZlcmZsb3c7IiwiaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG9taXQob2JqLCBmaWVsZHMpIHtcbiAgdmFyIGNsb25lID0gX29iamVjdFNwcmVhZCh7fSwgb2JqKTtcblxuICBpZiAoQXJyYXkuaXNBcnJheShmaWVsZHMpKSB7XG4gICAgZmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgZGVsZXRlIGNsb25lW2tleV07XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gY2xvbmU7XG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlTWVtbyhnZXRWYWx1ZSwgY29uZGl0aW9uLCBzaG91bGRVcGRhdGUpIHtcbiAgdmFyIGNhY2hlUmVmID0gUmVhY3QudXNlUmVmKHt9KTtcblxuICBpZiAoISgndmFsdWUnIGluIGNhY2hlUmVmLmN1cnJlbnQpIHx8IHNob3VsZFVwZGF0ZShjYWNoZVJlZi5jdXJyZW50LmNvbmRpdGlvbiwgY29uZGl0aW9uKSkge1xuICAgIGNhY2hlUmVmLmN1cnJlbnQudmFsdWUgPSBnZXRWYWx1ZSgpO1xuICAgIGNhY2hlUmVmLmN1cnJlbnQuY29uZGl0aW9uID0gY29uZGl0aW9uO1xuICB9XG5cbiAgcmV0dXJuIGNhY2hlUmVmLmN1cnJlbnQudmFsdWU7XG59IiwiaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlTWVtbyBmcm9tIFwicmMtdXRpbC9lcy9ob29rcy91c2VNZW1vXCI7XG5pbXBvcnQgc2hhbGxvd0VxdWFsIGZyb20gJ3NoYWxsb3dlcXVhbCc7XG5leHBvcnQgdmFyIE1lbnVDb250ZXh0ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUNvbnRleHQobnVsbCk7XG5cbmZ1bmN0aW9uIG1lcmdlUHJvcHMob3JpZ2luLCB0YXJnZXQpIHtcbiAgdmFyIGNsb25lID0gX29iamVjdFNwcmVhZCh7fSwgb3JpZ2luKTtcblxuICBPYmplY3Qua2V5cyh0YXJnZXQpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciB2YWx1ZSA9IHRhcmdldFtrZXldO1xuXG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNsb25lW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gY2xvbmU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEluaGVyaXRhYmxlQ29udGV4dFByb3ZpZGVyKF9yZWYpIHtcbiAgdmFyIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbixcbiAgICAgIGxvY2tlZCA9IF9yZWYubG9ja2VkLFxuICAgICAgcmVzdFByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIFtcImNoaWxkcmVuXCIsIFwibG9ja2VkXCJdKTtcblxuICB2YXIgY29udGV4dCA9IFJlYWN0LnVzZUNvbnRleHQoTWVudUNvbnRleHQpO1xuICB2YXIgaW5oZXJpdGFibGVDb250ZXh0ID0gdXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG1lcmdlUHJvcHMoY29udGV4dCwgcmVzdFByb3BzKTtcbiAgfSwgW2NvbnRleHQsIHJlc3RQcm9wc10sIGZ1bmN0aW9uIChwcmV2LCBuZXh0KSB7XG4gICAgcmV0dXJuICFsb2NrZWQgJiYgKHByZXZbMF0gIT09IG5leHRbMF0gfHwgIXNoYWxsb3dFcXVhbChwcmV2WzFdLCBuZXh0WzFdKSk7XG4gIH0pO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTWVudUNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogaW5oZXJpdGFibGVDb250ZXh0XG4gIH0sIGNoaWxkcmVuKTtcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBNZW51Q29udGV4dCB9IGZyb20gJy4uL2NvbnRleHQvTWVudUNvbnRleHQnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlQWN0aXZlKGV2ZW50S2V5LCBkaXNhYmxlZCwgb25Nb3VzZUVudGVyLCBvbk1vdXNlTGVhdmUpIHtcbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChNZW51Q29udGV4dCksXG4gICAgICBhY3RpdmVLZXkgPSBfUmVhY3QkdXNlQ29udGV4dC5hY3RpdmVLZXksXG4gICAgICBvbkFjdGl2ZSA9IF9SZWFjdCR1c2VDb250ZXh0Lm9uQWN0aXZlLFxuICAgICAgb25JbmFjdGl2ZSA9IF9SZWFjdCR1c2VDb250ZXh0Lm9uSW5hY3RpdmU7XG5cbiAgdmFyIHJldCA9IHtcbiAgICBhY3RpdmU6IGFjdGl2ZUtleSA9PT0gZXZlbnRLZXlcbiAgfTsgLy8gU2tpcCB3aGVuIGRpc2FibGVkXG5cbiAgaWYgKCFkaXNhYmxlZCkge1xuICAgIHJldC5vbk1vdXNlRW50ZXIgPSBmdW5jdGlvbiAoZG9tRXZlbnQpIHtcbiAgICAgIG9uTW91c2VFbnRlciA9PT0gbnVsbCB8fCBvbk1vdXNlRW50ZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uTW91c2VFbnRlcih7XG4gICAgICAgIGtleTogZXZlbnRLZXksXG4gICAgICAgIGRvbUV2ZW50OiBkb21FdmVudFxuICAgICAgfSk7XG4gICAgICBvbkFjdGl2ZShldmVudEtleSk7XG4gICAgfTtcblxuICAgIHJldC5vbk1vdXNlTGVhdmUgPSBmdW5jdGlvbiAoZG9tRXZlbnQpIHtcbiAgICAgIG9uTW91c2VMZWF2ZSA9PT0gbnVsbCB8fCBvbk1vdXNlTGVhdmUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uTW91c2VMZWF2ZSh7XG4gICAgICAgIGtleTogZXZlbnRLZXksXG4gICAgICAgIGRvbUV2ZW50OiBkb21FdmVudFxuICAgICAgfSk7XG4gICAgICBvbkluYWN0aXZlKGV2ZW50S2V5KTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn0iLCJpbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc1wiO1xuaW1wb3J0IHdhcm5pbmcgZnJvbSBcInJjLXV0aWwvZXMvd2FybmluZ1wiO1xuLyoqXG4gKiBgb25DbGlja2AgZXZlbnQgcmV0dXJuIGBpbmZvLml0ZW1gIHdoaWNoIHBvaW50IHRvIHJlYWN0IG5vZGUgZGlyZWN0bHkuXG4gKiBXZSBzaG91bGQgd2FybmluZyB0aGlzIHNpbmNlIGl0IHdpbGwgbm90IHdvcmsgb24gRkMuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHdhcm5JdGVtUHJvcChfcmVmKSB7XG4gIHZhciBpdGVtID0gX3JlZi5pdGVtLFxuICAgICAgcmVzdEluZm8gPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgW1wiaXRlbVwiXSk7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlc3RJbmZvLCAnaXRlbScsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHdhcm5pbmcoZmFsc2UsICdgaW5mby5pdGVtYCBpcyBkZXByZWNhdGVkIHNpbmNlIHdlIHdpbGwgbW92ZSB0byBmdW5jdGlvbiBjb21wb25lbnQgdGhhdCBub3QgcHJvdmlkZXMgUmVhY3QgTm9kZSBpbnN0YW5jZSBpbiBmdXR1cmUuJyk7XG4gICAgICByZXR1cm4gaXRlbTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcmVzdEluZm87XG59IiwiaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEljb24oX3JlZikge1xuICB2YXIgaWNvbiA9IF9yZWYuaWNvbixcbiAgICAgIHByb3BzID0gX3JlZi5wcm9wcyxcbiAgICAgIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbjtcbiAgdmFyIGljb25Ob2RlO1xuXG4gIGlmICh0eXBlb2YgaWNvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGljb25Ob2RlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoaWNvbiwgX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBDb21wYXRpYmxlIGZvciBvcmlnaW4gZGVmaW5pdGlvblxuICAgIGljb25Ob2RlID0gaWNvbjtcbiAgfVxuXG4gIHJldHVybiBpY29uTm9kZSB8fCBjaGlsZHJlbiB8fCBudWxsO1xufSIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IE1lbnVDb250ZXh0IH0gZnJvbSAnLi4vY29udGV4dC9NZW51Q29udGV4dCc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VEaXJlY3Rpb25TdHlsZShsZXZlbCkge1xuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KE1lbnVDb250ZXh0KSxcbiAgICAgIG1vZGUgPSBfUmVhY3QkdXNlQ29udGV4dC5tb2RlLFxuICAgICAgcnRsID0gX1JlYWN0JHVzZUNvbnRleHQucnRsLFxuICAgICAgaW5saW5lSW5kZW50ID0gX1JlYWN0JHVzZUNvbnRleHQuaW5saW5lSW5kZW50O1xuXG4gIGlmIChtb2RlICE9PSAnaW5saW5lJykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGxlbiA9IGxldmVsO1xuICByZXR1cm4gcnRsID8ge1xuICAgIHBhZGRpbmdSaWdodDogbGVuICogaW5saW5lSW5kZW50XG4gIH0gOiB7XG4gICAgcGFkZGluZ0xlZnQ6IGxlbiAqIGlubGluZUluZGVudFxuICB9O1xufSIsImltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG52YXIgRW1wdHlMaXN0ID0gW107XG5leHBvcnQgdmFyIFBhdGhSZWdpc3RlckNvbnRleHQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlQ29udGV4dChudWxsKTtcbmV4cG9ydCBmdW5jdGlvbiB1c2VNZWFzdXJlKCkge1xuICByZXR1cm4gUmVhY3QudXNlQ29udGV4dChQYXRoUmVnaXN0ZXJDb250ZXh0KTtcbn0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09PSBQYXRoIFRyYWNrZXIgPT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IHZhciBQYXRoVHJhY2tlckNvbnRleHQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlQ29udGV4dChFbXB0eUxpc3QpO1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUZ1bGxQYXRoKGV2ZW50S2V5KSB7XG4gIHZhciBwYXJlbnRLZXlQYXRoID0gUmVhY3QudXNlQ29udGV4dChQYXRoVHJhY2tlckNvbnRleHQpO1xuICByZXR1cm4gUmVhY3QudXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGV2ZW50S2V5ICE9PSB1bmRlZmluZWQgPyBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHBhcmVudEtleVBhdGgpLCBbZXZlbnRLZXldKSA6IHBhcmVudEtleVBhdGg7XG4gIH0sIFtwYXJlbnRLZXlQYXRoLCBldmVudEtleV0pO1xufVxuZXhwb3J0IHZhciBQYXRoVXNlckNvbnRleHQgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlQ29udGV4dChudWxsKTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5leHBvcnQgdmFyIElkQ29udGV4dCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVDb250ZXh0KG51bGwpO1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1lbnVJZCh1dWlkLCBldmVudEtleSkge1xuICBpZiAodXVpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gXCJcIi5jb25jYXQodXVpZCwgXCItXCIpLmNvbmNhdChldmVudEtleSk7XG59XG4vKipcbiAqIEdldCBgZGF0YS1tZW51LWlkYFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VNZW51SWQoZXZlbnRLZXkpIHtcbiAgdmFyIGlkID0gUmVhY3QudXNlQ29udGV4dChJZENvbnRleHQpO1xuICByZXR1cm4gZ2V0TWVudUlkKGlkLCBldmVudEtleSk7XG59IiwiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheVwiO1xuaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc1wiO1xuaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2tcIjtcbmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzXCI7XG5pbXBvcnQgX2luaGVyaXRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0c1wiO1xuaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXJcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IE92ZXJmbG93IGZyb20gJ3JjLW92ZXJmbG93JztcbmltcG9ydCB3YXJuaW5nIGZyb20gXCJyYy11dGlsL2VzL3dhcm5pbmdcIjtcbmltcG9ydCBLZXlDb2RlIGZyb20gXCJyYy11dGlsL2VzL0tleUNvZGVcIjtcbmltcG9ydCBvbWl0IGZyb20gXCJyYy11dGlsL2VzL29taXRcIjtcbmltcG9ydCB7IE1lbnVDb250ZXh0IH0gZnJvbSAnLi9jb250ZXh0L01lbnVDb250ZXh0JztcbmltcG9ydCB1c2VBY3RpdmUgZnJvbSAnLi9ob29rcy91c2VBY3RpdmUnO1xuaW1wb3J0IHsgd2Fybkl0ZW1Qcm9wIH0gZnJvbSAnLi91dGlscy93YXJuVXRpbCc7XG5pbXBvcnQgSWNvbiBmcm9tICcuL0ljb24nO1xuaW1wb3J0IHVzZURpcmVjdGlvblN0eWxlIGZyb20gJy4vaG9va3MvdXNlRGlyZWN0aW9uU3R5bGUnO1xuaW1wb3J0IHsgdXNlRnVsbFBhdGgsIHVzZU1lYXN1cmUgfSBmcm9tICcuL2NvbnRleHQvUGF0aENvbnRleHQnO1xuaW1wb3J0IHsgdXNlTWVudUlkIH0gZnJvbSAnLi9jb250ZXh0L0lkQ29udGV4dCc7IC8vIFNpbmNlIE1lbnUgZXZlbnQgcHJvdmlkZSB0aGUgYGluZm8uaXRlbWAgd2hpY2ggcG9pbnQgdG8gdGhlIE1lbnVJdGVtIG5vZGUgaW5zdGFuY2UuXG4vLyBXZSBoYXZlIHRvIHVzZSBjbGFzcyBjb21wb25lbnQgaGVyZS5cbi8vIFRoaXMgc2hvdWxkIGJlIHJlbW92ZWQgZnJvbSBkb2MgJiBhcGkgaW4gZnV0dXJlLlxuXG52YXIgTGVnYWN5TWVudUl0ZW0gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKExlZ2FjeU1lbnVJdGVtLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKExlZ2FjeU1lbnVJdGVtKTtcblxuICBmdW5jdGlvbiBMZWdhY3lNZW51SXRlbSgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTGVnYWN5TWVudUl0ZW0pO1xuXG4gICAgcmV0dXJuIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKExlZ2FjeU1lbnVJdGVtLCBbe1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICB0aXRsZSA9IF90aGlzJHByb3BzLnRpdGxlLFxuICAgICAgICAgIGF0dHJpYnV0ZSA9IF90aGlzJHByb3BzLmF0dHJpYnV0ZSxcbiAgICAgICAgICBlbGVtZW50UmVmID0gX3RoaXMkcHJvcHMuZWxlbWVudFJlZixcbiAgICAgICAgICByZXN0UHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3RoaXMkcHJvcHMsIFtcInRpdGxlXCIsIFwiYXR0cmlidXRlXCIsIFwiZWxlbWVudFJlZlwiXSk7XG5cbiAgICAgIHZhciBwYXNzZWRQcm9wcyA9IG9taXQocmVzdFByb3BzLCBbJ2V2ZW50S2V5J10pO1xuICAgICAgd2FybmluZyghYXR0cmlidXRlLCAnYGF0dHJpYnV0ZWAgb2YgTWVudS5JdGVtIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSBwYXNzIGF0dHJpYnV0ZSBkaXJlY3RseS4nKTtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChPdmVyZmxvdy5JdGVtLCBfZXh0ZW5kcyh7fSwgYXR0cmlidXRlLCB7XG4gICAgICAgIHRpdGxlOiB0eXBlb2YgdGl0bGUgPT09ICdzdHJpbmcnID8gdGl0bGUgOiB1bmRlZmluZWRcbiAgICAgIH0sIHBhc3NlZFByb3BzLCB7XG4gICAgICAgIHJlZjogZWxlbWVudFJlZlxuICAgICAgfSkpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBMZWdhY3lNZW51SXRlbTtcbn0oUmVhY3QuQ29tcG9uZW50KTtcbi8qKlxuICogUmVhbCBNZW51IEl0ZW0gY29tcG9uZW50XG4gKi9cblxuXG52YXIgSW50ZXJuYWxNZW51SXRlbSA9IGZ1bmN0aW9uIEludGVybmFsTWVudUl0ZW0ocHJvcHMpIHtcbiAgdmFyIF9jbGFzc05hbWVzO1xuXG4gIHZhciBzdHlsZSA9IHByb3BzLnN0eWxlLFxuICAgICAgY2xhc3NOYW1lID0gcHJvcHMuY2xhc3NOYW1lLFxuICAgICAgZXZlbnRLZXkgPSBwcm9wcy5ldmVudEtleSxcbiAgICAgIHdhcm5LZXkgPSBwcm9wcy53YXJuS2V5LFxuICAgICAgZGlzYWJsZWQgPSBwcm9wcy5kaXNhYmxlZCxcbiAgICAgIGl0ZW1JY29uID0gcHJvcHMuaXRlbUljb24sXG4gICAgICBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuLFxuICAgICAgcm9sZSA9IHByb3BzLnJvbGUsXG4gICAgICBvbk1vdXNlRW50ZXIgPSBwcm9wcy5vbk1vdXNlRW50ZXIsXG4gICAgICBvbk1vdXNlTGVhdmUgPSBwcm9wcy5vbk1vdXNlTGVhdmUsXG4gICAgICBvbkNsaWNrID0gcHJvcHMub25DbGljayxcbiAgICAgIG9uS2V5RG93biA9IHByb3BzLm9uS2V5RG93bixcbiAgICAgIG9uRm9jdXMgPSBwcm9wcy5vbkZvY3VzLFxuICAgICAgcmVzdFByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHByb3BzLCBbXCJzdHlsZVwiLCBcImNsYXNzTmFtZVwiLCBcImV2ZW50S2V5XCIsIFwid2FybktleVwiLCBcImRpc2FibGVkXCIsIFwiaXRlbUljb25cIiwgXCJjaGlsZHJlblwiLCBcInJvbGVcIiwgXCJvbk1vdXNlRW50ZXJcIiwgXCJvbk1vdXNlTGVhdmVcIiwgXCJvbkNsaWNrXCIsIFwib25LZXlEb3duXCIsIFwib25Gb2N1c1wiXSk7XG5cbiAgdmFyIGRvbURhdGFJZCA9IHVzZU1lbnVJZChldmVudEtleSk7XG5cbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChNZW51Q29udGV4dCksXG4gICAgICBwcmVmaXhDbHMgPSBfUmVhY3QkdXNlQ29udGV4dC5wcmVmaXhDbHMsXG4gICAgICBvbkl0ZW1DbGljayA9IF9SZWFjdCR1c2VDb250ZXh0Lm9uSXRlbUNsaWNrLFxuICAgICAgY29udGV4dERpc2FibGVkID0gX1JlYWN0JHVzZUNvbnRleHQuZGlzYWJsZWQsXG4gICAgICBvdmVyZmxvd0Rpc2FibGVkID0gX1JlYWN0JHVzZUNvbnRleHQub3ZlcmZsb3dEaXNhYmxlZCxcbiAgICAgIGNvbnRleHRJdGVtSWNvbiA9IF9SZWFjdCR1c2VDb250ZXh0Lml0ZW1JY29uLFxuICAgICAgc2VsZWN0ZWRLZXlzID0gX1JlYWN0JHVzZUNvbnRleHQuc2VsZWN0ZWRLZXlzLFxuICAgICAgb25BY3RpdmUgPSBfUmVhY3QkdXNlQ29udGV4dC5vbkFjdGl2ZTtcblxuICB2YXIgaXRlbUNscyA9IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItaXRlbVwiKTtcbiAgdmFyIGxlZ2FjeU1lbnVJdGVtUmVmID0gUmVhY3QudXNlUmVmKCk7XG4gIHZhciBlbGVtZW50UmVmID0gUmVhY3QudXNlUmVmKCk7XG4gIHZhciBtZXJnZWREaXNhYmxlZCA9IGNvbnRleHREaXNhYmxlZCB8fCBkaXNhYmxlZDtcbiAgdmFyIGNvbm5lY3RlZEtleXMgPSB1c2VGdWxsUGF0aChldmVudEtleSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFdhcm4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuS2V5KSB7XG4gICAgd2FybmluZyhmYWxzZSwgJ01lbnVJdGVtIHNob3VsZCBub3QgbGVhdmUgdW5kZWZpbmVkIGBrZXlgLicpO1xuICB9IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09IEluZm8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBnZXRFdmVudEluZm8gPSBmdW5jdGlvbiBnZXRFdmVudEluZm8oZSkge1xuICAgIHJldHVybiB7XG4gICAgICBrZXk6IGV2ZW50S2V5LFxuICAgICAgLy8gTm90ZTogRm9yIGxlZ2FjeSBjb2RlIGlzIHJldmVyc2VkIHdoaWNoIG5vdCBsaWtlIG90aGVyIGFudGQgY29tcG9uZW50XG4gICAgICBrZXlQYXRoOiBfdG9Db25zdW1hYmxlQXJyYXkoY29ubmVjdGVkS2V5cykucmV2ZXJzZSgpLFxuICAgICAgaXRlbTogbGVnYWN5TWVudUl0ZW1SZWYuY3VycmVudCxcbiAgICAgIGRvbUV2ZW50OiBlXG4gICAgfTtcbiAgfTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gSWNvbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdmFyIG1lcmdlZEl0ZW1JY29uID0gaXRlbUljb24gfHwgY29udGV4dEl0ZW1JY29uOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IEFjdGl2ZSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIF91c2VBY3RpdmUgPSB1c2VBY3RpdmUoZXZlbnRLZXksIG1lcmdlZERpc2FibGVkLCBvbk1vdXNlRW50ZXIsIG9uTW91c2VMZWF2ZSksXG4gICAgICBhY3RpdmUgPSBfdXNlQWN0aXZlLmFjdGl2ZSxcbiAgICAgIGFjdGl2ZVByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF91c2VBY3RpdmUsIFtcImFjdGl2ZVwiXSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gU2VsZWN0ID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBzZWxlY3RlZCA9IHNlbGVjdGVkS2V5cy5pbmNsdWRlcyhldmVudEtleSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PSBEaXJlY3Rpb25TdHlsZSA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgZGlyZWN0aW9uU3R5bGUgPSB1c2VEaXJlY3Rpb25TdHlsZShjb25uZWN0ZWRLZXlzLmxlbmd0aCk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gRXZlbnRzID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgb25JbnRlcm5hbENsaWNrID0gZnVuY3Rpb24gb25JbnRlcm5hbENsaWNrKGUpIHtcbiAgICBpZiAobWVyZ2VkRGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaW5mbyA9IGdldEV2ZW50SW5mbyhlKTtcbiAgICBvbkNsaWNrID09PSBudWxsIHx8IG9uQ2xpY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uQ2xpY2sod2Fybkl0ZW1Qcm9wKGluZm8pKTtcbiAgICBvbkl0ZW1DbGljayhpbmZvKTtcbiAgfTtcblxuICB2YXIgb25JbnRlcm5hbEtleURvd24gPSBmdW5jdGlvbiBvbkludGVybmFsS2V5RG93bihlKSB7XG4gICAgb25LZXlEb3duID09PSBudWxsIHx8IG9uS2V5RG93biA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25LZXlEb3duKGUpO1xuXG4gICAgaWYgKGUud2hpY2ggPT09IEtleUNvZGUuRU5URVIpIHtcbiAgICAgIHZhciBpbmZvID0gZ2V0RXZlbnRJbmZvKGUpOyAvLyBMZWdhY3kuIEtleSB3aWxsIGFsc28gdHJpZ2dlciBjbGljayBldmVudFxuXG4gICAgICBvbkNsaWNrID09PSBudWxsIHx8IG9uQ2xpY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uQ2xpY2sod2Fybkl0ZW1Qcm9wKGluZm8pKTtcbiAgICAgIG9uSXRlbUNsaWNrKGluZm8pO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIFVzZWQgZm9yIGFjY2Vzc2liaWxpdHkuIEhlbHBlciB3aWxsIGZvY3VzIGVsZW1lbnQgd2l0aG91dCBrZXkgYm9hcmQuXG4gICAqIFdlIHNob3VsZCBtYW51YWxseSB0cmlnZ2VyIGFuIGFjdGl2ZVxuICAgKi9cblxuXG4gIHZhciBvbkludGVybmFsRm9jdXMgPSBmdW5jdGlvbiBvbkludGVybmFsRm9jdXMoZSkge1xuICAgIG9uQWN0aXZlKGV2ZW50S2V5KTtcbiAgICBvbkZvY3VzID09PSBudWxsIHx8IG9uRm9jdXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uRm9jdXMoZSk7XG4gIH07IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gUmVuZGVyID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBvcHRpb25Sb2xlUHJvcHMgPSB7fTtcblxuICBpZiAocHJvcHMucm9sZSA9PT0gJ29wdGlvbicpIHtcbiAgICBvcHRpb25Sb2xlUHJvcHNbJ2FyaWEtc2VsZWN0ZWQnXSA9IHNlbGVjdGVkO1xuICB9XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KExlZ2FjeU1lbnVJdGVtLCBfZXh0ZW5kcyh7XG4gICAgcmVmOiBsZWdhY3lNZW51SXRlbVJlZixcbiAgICBlbGVtZW50UmVmOiBlbGVtZW50UmVmLFxuICAgIHJvbGU6IHJvbGUgPT09IG51bGwgPyAnbm9uZScgOiByb2xlIHx8ICdtZW51aXRlbScsXG4gICAgdGFiSW5kZXg6IGRpc2FibGVkID8gbnVsbCA6IC0xLFxuICAgIFwiZGF0YS1tZW51LWlkXCI6IG92ZXJmbG93RGlzYWJsZWQgJiYgZG9tRGF0YUlkID8gbnVsbCA6IGRvbURhdGFJZFxuICB9LCByZXN0UHJvcHMsIGFjdGl2ZVByb3BzLCBvcHRpb25Sb2xlUHJvcHMsIHtcbiAgICBjb21wb25lbnQ6IFwibGlcIixcbiAgICBcImFyaWEtZGlzYWJsZWRcIjogZGlzYWJsZWQsXG4gICAgc3R5bGU6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGlyZWN0aW9uU3R5bGUpLCBzdHlsZSksXG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKGl0ZW1DbHMsIChfY2xhc3NOYW1lcyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KGl0ZW1DbHMsIFwiLWFjdGl2ZVwiKSwgYWN0aXZlKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCBcIlwiLmNvbmNhdChpdGVtQ2xzLCBcIi1zZWxlY3RlZFwiKSwgc2VsZWN0ZWQpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KGl0ZW1DbHMsIFwiLWRpc2FibGVkXCIpLCBtZXJnZWREaXNhYmxlZCksIF9jbGFzc05hbWVzKSwgY2xhc3NOYW1lKSxcbiAgICBvbkNsaWNrOiBvbkludGVybmFsQ2xpY2ssXG4gICAgb25LZXlEb3duOiBvbkludGVybmFsS2V5RG93bixcbiAgICBvbkZvY3VzOiBvbkludGVybmFsRm9jdXNcbiAgfSksIGNoaWxkcmVuLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChJY29uLCB7XG4gICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpLCB7fSwge1xuICAgICAgaXNTZWxlY3RlZDogc2VsZWN0ZWRcbiAgICB9KSxcbiAgICBpY29uOiBtZXJnZWRJdGVtSWNvblxuICB9KSk7XG59O1xuXG5mdW5jdGlvbiBNZW51SXRlbShwcm9wcykge1xuICB2YXIgZXZlbnRLZXkgPSBwcm9wcy5ldmVudEtleTsgLy8gPT09PT09PT09PT09PT09PT09PT0gUmVjb3JkIEtleVBhdGggPT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgbWVhc3VyZSA9IHVzZU1lYXN1cmUoKTtcbiAgdmFyIGNvbm5lY3RlZEtleVBhdGggPSB1c2VGdWxsUGF0aChldmVudEtleSk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuXG4gIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKG1lYXN1cmUpIHtcbiAgICAgIG1lYXN1cmUucmVnaXN0ZXJQYXRoKGV2ZW50S2V5LCBjb25uZWN0ZWRLZXlQYXRoKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG1lYXN1cmUudW5yZWdpc3RlclBhdGgoZXZlbnRLZXksIGNvbm5lY3RlZEtleVBhdGgpO1xuICAgICAgfTtcbiAgICB9XG4gIH0sIFtjb25uZWN0ZWRLZXlQYXRoXSk7XG5cbiAgaWYgKG1lYXN1cmUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSAvLyA9PT09PT09PT09PT09PT09PT09PT09PT0gUmVuZGVyID09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEludGVybmFsTWVudUl0ZW0sIHByb3BzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgTWVudUl0ZW07IiwiaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB0b0FycmF5IGZyb20gXCJyYy11dGlsL2VzL0NoaWxkcmVuL3RvQXJyYXlcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNoaWxkcmVuKGNoaWxkcmVuLCBrZXlQYXRoKSB7XG4gIHJldHVybiB0b0FycmF5KGNoaWxkcmVuKS5tYXAoZnVuY3Rpb24gKGNoaWxkLCBpbmRleCkge1xuICAgIGlmICggLyojX19QVVJFX18qL1JlYWN0LmlzVmFsaWRFbGVtZW50KGNoaWxkKSkge1xuICAgICAgdmFyIF9jaGlsZCRwcm9wcyRldmVudEtleSwgX2NoaWxkJHByb3BzO1xuXG4gICAgICB2YXIga2V5ID0gY2hpbGQua2V5O1xuICAgICAgdmFyIGV2ZW50S2V5ID0gKF9jaGlsZCRwcm9wcyRldmVudEtleSA9IChfY2hpbGQkcHJvcHMgPSBjaGlsZC5wcm9wcykgPT09IG51bGwgfHwgX2NoaWxkJHByb3BzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2hpbGQkcHJvcHMuZXZlbnRLZXkpICE9PSBudWxsICYmIF9jaGlsZCRwcm9wcyRldmVudEtleSAhPT0gdm9pZCAwID8gX2NoaWxkJHByb3BzJGV2ZW50S2V5IDoga2V5O1xuICAgICAgdmFyIGVtcHR5S2V5ID0gZXZlbnRLZXkgPT09IG51bGwgfHwgZXZlbnRLZXkgPT09IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKGVtcHR5S2V5KSB7XG4gICAgICAgIGV2ZW50S2V5ID0gXCJ0bXBfa2V5LVwiLmNvbmNhdChbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGtleVBhdGgpLCBbaW5kZXhdKS5qb2luKCctJykpO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2xvbmVQcm9wcyA9IHtcbiAgICAgICAga2V5OiBldmVudEtleSxcbiAgICAgICAgZXZlbnRLZXk6IGV2ZW50S2V5XG4gICAgICB9O1xuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBlbXB0eUtleSkge1xuICAgICAgICBjbG9uZVByb3BzLndhcm5LZXkgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNsb25lRWxlbWVudChjaGlsZCwgY2xvbmVQcm9wcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoaWxkO1xuICB9KTtcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG4vKipcbiAqIENhY2hlIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgYWx3YXlzIHJldHVybiBzYW1lIHJlZiBpbnN0ZWFkLlxuICogVGhpcyBpcyB1c2VkIGZvciBjb250ZXh0IG9wdGltaXphdGlvbi5cbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VNZW1vQ2FsbGJhY2soZnVuYykge1xuICB2YXIgZnVuUmVmID0gUmVhY3QudXNlUmVmKGZ1bmMpO1xuICBmdW5SZWYuY3VycmVudCA9IGZ1bmM7XG4gIHZhciBjYWxsYmFjayA9IFJlYWN0LnVzZUNhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX2Z1blJlZiRjdXJyZW50O1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiAoX2Z1blJlZiRjdXJyZW50ID0gZnVuUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF9mdW5SZWYkY3VycmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Z1blJlZiRjdXJyZW50LmNhbGwuYXBwbHkoX2Z1blJlZiRjdXJyZW50LCBbZnVuUmVmXS5jb25jYXQoYXJncykpO1xuICB9LCBbXSk7XG4gIHJldHVybiBmdW5jID8gY2FsbGJhY2sgOiB1bmRlZmluZWQ7XG59IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgeyBNZW51Q29udGV4dCB9IGZyb20gJy4uL2NvbnRleHQvTWVudUNvbnRleHQnO1xuXG52YXIgSW50ZXJuYWxTdWJNZW51TGlzdCA9IGZ1bmN0aW9uIEludGVybmFsU3ViTWVudUxpc3QoX3JlZiwgcmVmKSB7XG4gIHZhciBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZSxcbiAgICAgIGNoaWxkcmVuID0gX3JlZi5jaGlsZHJlbixcbiAgICAgIHJlc3RQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBbXCJjbGFzc05hbWVcIiwgXCJjaGlsZHJlblwiXSk7XG5cbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChNZW51Q29udGV4dCksXG4gICAgICBwcmVmaXhDbHMgPSBfUmVhY3QkdXNlQ29udGV4dC5wcmVmaXhDbHMsXG4gICAgICBtb2RlID0gX1JlYWN0JHVzZUNvbnRleHQubW9kZTtcblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiLCBfZXh0ZW5kcyh7XG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKHByZWZpeENscywgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1zdWJcIiksIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItXCIpLmNvbmNhdChtb2RlID09PSAnaW5saW5lJyA/ICdpbmxpbmUnIDogJ3ZlcnRpY2FsJyksIGNsYXNzTmFtZSlcbiAgfSwgcmVzdFByb3BzLCB7XG4gICAgXCJkYXRhLW1lbnUtbGlzdFwiOiB0cnVlLFxuICAgIHJlZjogcmVmXG4gIH0pLCBjaGlsZHJlbik7XG59O1xuXG52YXIgU3ViTWVudUxpc3QgPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihJbnRlcm5hbFN1Yk1lbnVMaXN0KTtcblN1Yk1lbnVMaXN0LmRpc3BsYXlOYW1lID0gJ1N1Yk1lbnVMaXN0JztcbmV4cG9ydCBkZWZhdWx0IFN1Yk1lbnVMaXN0OyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbnRhaW5zKHJvb3QsIG4pIHtcbiAgaWYgKCFyb290KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHJvb3QuY29udGFpbnMobik7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY2FuVXNlRG9tKCkge1xuICByZXR1cm4gISEodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRvY3VtZW50ICYmIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KTtcbn0iLCJpbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCwgZm9yd2FyZFJlZiwgdXNlSW1wZXJhdGl2ZUhhbmRsZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IGNhblVzZURvbSBmcm9tICcuL0RvbS9jYW5Vc2VEb20nO1xudmFyIFBvcnRhbCA9IC8qI19fUFVSRV9fKi9mb3J3YXJkUmVmKGZ1bmN0aW9uIChwcm9wcywgcmVmKSB7XG4gIHZhciBkaWRVcGRhdGUgPSBwcm9wcy5kaWRVcGRhdGUsXG4gICAgICBnZXRDb250YWluZXIgPSBwcm9wcy5nZXRDb250YWluZXIsXG4gICAgICBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuO1xuICB2YXIgY29udGFpbmVyUmVmID0gdXNlUmVmKCk7IC8vIFJlZiByZXR1cm4gbm90aGluZywgb25seSBmb3Igd3JhcHBlciBjaGVjayBleGlzdFxuXG4gIHVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9KTsgLy8gQ3JlYXRlIGNvbnRhaW5lciBpbiBjbGllbnQgc2lkZSB3aXRoIHN5bmMgdG8gYXZvaWQgdXNlRWZmZWN0IG5vdCBnZXQgcmVmXG5cbiAgdmFyIGluaXRSZWYgPSB1c2VSZWYoZmFsc2UpO1xuXG4gIGlmICghaW5pdFJlZi5jdXJyZW50ICYmIGNhblVzZURvbSgpKSB7XG4gICAgY29udGFpbmVyUmVmLmN1cnJlbnQgPSBnZXRDb250YWluZXIoKTtcbiAgICBpbml0UmVmLmN1cnJlbnQgPSB0cnVlO1xuICB9IC8vIFtMZWdhY3ldIFVzZWQgYnkgYHJjLXRyaWdnZXJgXG5cblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGRpZFVwZGF0ZSA9PT0gbnVsbCB8fCBkaWRVcGRhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRpZFVwZGF0ZShwcm9wcyk7XG4gIH0pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX2NvbnRhaW5lclJlZiRjdXJyZW50LCBfY29udGFpbmVyUmVmJGN1cnJlbnQyO1xuXG4gICAgICAvLyBbTGVnYWN5XSBUaGlzIHNob3VsZCBub3QgYmUgaGFuZGxlIGJ5IFBvcnRhbCBidXQgcGFyZW50IFBvcnRhbFdyYXBwZXIgaW5zdGVhZC5cbiAgICAgIC8vIFNpbmNlIHNvbWUgY29tcG9uZW50IHVzZSBgUG9ydGFsYCBkaXJlY3RseSwgd2UgaGF2ZSB0byBrZWVwIHRoZSBsb2dpYyBoZXJlLlxuICAgICAgKF9jb250YWluZXJSZWYkY3VycmVudCA9IGNvbnRhaW5lclJlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCBfY29udGFpbmVyUmVmJGN1cnJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfY29udGFpbmVyUmVmJGN1cnJlbnQyID0gX2NvbnRhaW5lclJlZiRjdXJyZW50LnBhcmVudE5vZGUpID09PSBudWxsIHx8IF9jb250YWluZXJSZWYkY3VycmVudDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jb250YWluZXJSZWYkY3VycmVudDIucmVtb3ZlQ2hpbGQoY29udGFpbmVyUmVmLmN1cnJlbnQpO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgcmV0dXJuIGNvbnRhaW5lclJlZi5jdXJyZW50ID8gLyojX19QVVJFX18qL1JlYWN0RE9NLmNyZWF0ZVBvcnRhbChjaGlsZHJlbiwgY29udGFpbmVyUmVmLmN1cnJlbnQpIDogbnVsbDtcbn0pO1xuZXhwb3J0IGRlZmF1bHQgUG9ydGFsOyIsImltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5cbmZ1bmN0aW9uIGlzUG9pbnRzRXEoYTEsIGEyLCBpc0FsaWduUG9pbnQpIHtcbiAgaWYgKGlzQWxpZ25Qb2ludCkge1xuICAgIHJldHVybiBhMVswXSA9PT0gYTJbMF07XG4gIH1cblxuICByZXR1cm4gYTFbMF0gPT09IGEyWzBdICYmIGExWzFdID09PSBhMlsxXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFsaWduRnJvbVBsYWNlbWVudChidWlsdGluUGxhY2VtZW50cywgcGxhY2VtZW50U3RyLCBhbGlnbikge1xuICB2YXIgYmFzZUFsaWduID0gYnVpbHRpblBsYWNlbWVudHNbcGxhY2VtZW50U3RyXSB8fCB7fTtcbiAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgYmFzZUFsaWduKSwgYWxpZ24pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEFsaWduUG9wdXBDbGFzc05hbWUoYnVpbHRpblBsYWNlbWVudHMsIHByZWZpeENscywgYWxpZ24sIGlzQWxpZ25Qb2ludCkge1xuICB2YXIgcG9pbnRzID0gYWxpZ24ucG9pbnRzO1xuICB2YXIgcGxhY2VtZW50cyA9IE9iamVjdC5rZXlzKGJ1aWx0aW5QbGFjZW1lbnRzKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHBsYWNlbWVudHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICB2YXIgcGxhY2VtZW50ID0gcGxhY2VtZW50c1tpXTtcblxuICAgIGlmIChpc1BvaW50c0VxKGJ1aWx0aW5QbGFjZW1lbnRzW3BsYWNlbWVudF0ucG9pbnRzLCBwb2ludHMsIGlzQWxpZ25Qb2ludCkpIHtcbiAgICAgIHJldHVybiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXBsYWNlbWVudC1cIikuY29uY2F0KHBsYWNlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuICcnO1xufSIsImltcG9ydCBfdHlwZW9mIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2ZcIjtcbmltcG9ydCBjYW5Vc2VET00gZnJvbSBcInJjLXV0aWwvZXMvRG9tL2NhblVzZURvbVwiOyAvLyA9PT09PT09PT09PT09PT09PSBUcmFuc2l0aW9uID09PT09PT09PT09PT09PT09XG4vLyBFdmVudCB3cmFwcGVyLiBDb3B5IGZyb20gcmVhY3Qgc291cmNlIGNvZGVcblxuZnVuY3Rpb24gbWFrZVByZWZpeE1hcChzdHlsZVByb3AsIGV2ZW50TmFtZSkge1xuICB2YXIgcHJlZml4ZXMgPSB7fTtcbiAgcHJlZml4ZXNbc3R5bGVQcm9wLnRvTG93ZXJDYXNlKCldID0gZXZlbnROYW1lLnRvTG93ZXJDYXNlKCk7XG4gIHByZWZpeGVzW1wiV2Via2l0XCIuY29uY2F0KHN0eWxlUHJvcCldID0gXCJ3ZWJraXRcIi5jb25jYXQoZXZlbnROYW1lKTtcbiAgcHJlZml4ZXNbXCJNb3pcIi5jb25jYXQoc3R5bGVQcm9wKV0gPSBcIm1velwiLmNvbmNhdChldmVudE5hbWUpO1xuICBwcmVmaXhlc1tcIm1zXCIuY29uY2F0KHN0eWxlUHJvcCldID0gXCJNU1wiLmNvbmNhdChldmVudE5hbWUpO1xuICBwcmVmaXhlc1tcIk9cIi5jb25jYXQoc3R5bGVQcm9wKV0gPSBcIm9cIi5jb25jYXQoZXZlbnROYW1lLnRvTG93ZXJDYXNlKCkpO1xuICByZXR1cm4gcHJlZml4ZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRWZW5kb3JQcmVmaXhlcyhkb21TdXBwb3J0LCB3aW4pIHtcbiAgdmFyIHByZWZpeGVzID0ge1xuICAgIGFuaW1hdGlvbmVuZDogbWFrZVByZWZpeE1hcCgnQW5pbWF0aW9uJywgJ0FuaW1hdGlvbkVuZCcpLFxuICAgIHRyYW5zaXRpb25lbmQ6IG1ha2VQcmVmaXhNYXAoJ1RyYW5zaXRpb24nLCAnVHJhbnNpdGlvbkVuZCcpXG4gIH07XG5cbiAgaWYgKGRvbVN1cHBvcnQpIHtcbiAgICBpZiAoISgnQW5pbWF0aW9uRXZlbnQnIGluIHdpbikpIHtcbiAgICAgIGRlbGV0ZSBwcmVmaXhlcy5hbmltYXRpb25lbmQuYW5pbWF0aW9uO1xuICAgIH1cblxuICAgIGlmICghKCdUcmFuc2l0aW9uRXZlbnQnIGluIHdpbikpIHtcbiAgICAgIGRlbGV0ZSBwcmVmaXhlcy50cmFuc2l0aW9uZW5kLnRyYW5zaXRpb247XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHByZWZpeGVzO1xufVxudmFyIHZlbmRvclByZWZpeGVzID0gZ2V0VmVuZG9yUHJlZml4ZXMoY2FuVXNlRE9NKCksIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDoge30pO1xudmFyIHN0eWxlID0ge307XG5cbmlmIChjYW5Vc2VET00oKSkge1xuICB2YXIgX2RvY3VtZW50JGNyZWF0ZUVsZW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgc3R5bGUgPSBfZG9jdW1lbnQkY3JlYXRlRWxlbWUuc3R5bGU7XG59XG5cbnZhciBwcmVmaXhlZEV2ZW50TmFtZXMgPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiBnZXRWZW5kb3JQcmVmaXhlZEV2ZW50TmFtZShldmVudE5hbWUpIHtcbiAgaWYgKHByZWZpeGVkRXZlbnROYW1lc1tldmVudE5hbWVdKSB7XG4gICAgcmV0dXJuIHByZWZpeGVkRXZlbnROYW1lc1tldmVudE5hbWVdO1xuICB9XG5cbiAgdmFyIHByZWZpeE1hcCA9IHZlbmRvclByZWZpeGVzW2V2ZW50TmFtZV07XG5cbiAgaWYgKHByZWZpeE1hcCkge1xuICAgIHZhciBzdHlsZVByb3BMaXN0ID0gT2JqZWN0LmtleXMocHJlZml4TWFwKTtcbiAgICB2YXIgbGVuID0gc3R5bGVQcm9wTGlzdC5sZW5ndGg7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICB2YXIgc3R5bGVQcm9wID0gc3R5bGVQcm9wTGlzdFtpXTtcblxuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwcmVmaXhNYXAsIHN0eWxlUHJvcCkgJiYgc3R5bGVQcm9wIGluIHN0eWxlKSB7XG4gICAgICAgIHByZWZpeGVkRXZlbnROYW1lc1tldmVudE5hbWVdID0gcHJlZml4TWFwW3N0eWxlUHJvcF07XG4gICAgICAgIHJldHVybiBwcmVmaXhlZEV2ZW50TmFtZXNbZXZlbnROYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gJyc7XG59XG52YXIgaW50ZXJuYWxBbmltYXRpb25FbmROYW1lID0gZ2V0VmVuZG9yUHJlZml4ZWRFdmVudE5hbWUoJ2FuaW1hdGlvbmVuZCcpO1xudmFyIGludGVybmFsVHJhbnNpdGlvbkVuZE5hbWUgPSBnZXRWZW5kb3JQcmVmaXhlZEV2ZW50TmFtZSgndHJhbnNpdGlvbmVuZCcpO1xuZXhwb3J0IHZhciBzdXBwb3J0VHJhbnNpdGlvbiA9ICEhKGludGVybmFsQW5pbWF0aW9uRW5kTmFtZSAmJiBpbnRlcm5hbFRyYW5zaXRpb25FbmROYW1lKTtcbmV4cG9ydCB2YXIgYW5pbWF0aW9uRW5kTmFtZSA9IGludGVybmFsQW5pbWF0aW9uRW5kTmFtZSB8fCAnYW5pbWF0aW9uZW5kJztcbmV4cG9ydCB2YXIgdHJhbnNpdGlvbkVuZE5hbWUgPSBpbnRlcm5hbFRyYW5zaXRpb25FbmROYW1lIHx8ICd0cmFuc2l0aW9uZW5kJztcbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2l0aW9uTmFtZSh0cmFuc2l0aW9uTmFtZSwgdHJhbnNpdGlvblR5cGUpIHtcbiAgaWYgKCF0cmFuc2l0aW9uTmFtZSkgcmV0dXJuIG51bGw7XG5cbiAgaWYgKF90eXBlb2YodHJhbnNpdGlvbk5hbWUpID09PSAnb2JqZWN0Jykge1xuICAgIHZhciB0eXBlID0gdHJhbnNpdGlvblR5cGUucmVwbGFjZSgvLVxcdy9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgIHJldHVybiBtYXRjaFsxXS50b1VwcGVyQ2FzZSgpO1xuICAgIH0pO1xuICAgIHJldHVybiB0cmFuc2l0aW9uTmFtZVt0eXBlXTtcbiAgfVxuXG4gIHJldHVybiBcIlwiLmNvbmNhdCh0cmFuc2l0aW9uTmFtZSwgXCItXCIpLmNvbmNhdCh0cmFuc2l0aW9uVHlwZSk7XG59IiwiZXhwb3J0IHZhciBTVEFUVVNfTk9ORSA9ICdub25lJztcbmV4cG9ydCB2YXIgU1RBVFVTX0FQUEVBUiA9ICdhcHBlYXInO1xuZXhwb3J0IHZhciBTVEFUVVNfRU5URVIgPSAnZW50ZXInO1xuZXhwb3J0IHZhciBTVEFUVVNfTEVBVkUgPSAnbGVhdmUnO1xuZXhwb3J0IHZhciBTVEVQX05PTkUgPSAnbm9uZSc7XG5leHBvcnQgdmFyIFNURVBfUFJFUEFSRSA9ICdwcmVwYXJlJztcbmV4cG9ydCB2YXIgU1RFUF9TVEFSVCA9ICdzdGFydCc7XG5leHBvcnQgdmFyIFNURVBfQUNUSVZFID0gJ2FjdGl2ZSc7XG5leHBvcnQgdmFyIFNURVBfQUNUSVZBVEVEID0gJ2VuZCc7IiwiaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VNb3VudFN0YXR1cyhkZWZhdWx0VmFsdWUpIHtcbiAgdmFyIGRlc3Ryb3lSZWYgPSB1c2VSZWYoZmFsc2UpO1xuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShkZWZhdWx0VmFsdWUpLFxuICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgICB2YWwgPSBfdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0VmFsID0gX3VzZVN0YXRlMlsxXTtcblxuICBmdW5jdGlvbiBzZXRWYWx1ZShuZXh0KSB7XG4gICAgaWYgKCFkZXN0cm95UmVmLmN1cnJlbnQpIHtcbiAgICAgIHNldFZhbChuZXh0KTtcbiAgICB9XG4gIH1cblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBkZXN0cm95UmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgcmV0dXJuIFt2YWwsIHNldFZhbHVlXTtcbn0iLCJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZUxheW91dEVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjYW5Vc2VEb20gZnJvbSBcInJjLXV0aWwvZXMvRG9tL2NhblVzZURvbVwiOyAvLyBJdCdzIHNhZmUgdG8gdXNlIGB1c2VMYXlvdXRFZmZlY3RgIGJ1dCB0aGUgd2FybmluZyBpcyBhbm5veWluZ1xuXG52YXIgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCA9IGNhblVzZURvbSgpID8gdXNlTGF5b3V0RWZmZWN0IDogdXNlRWZmZWN0O1xuZXhwb3J0IGRlZmF1bHQgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdDsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgcmFmIGZyb20gXCJyYy11dGlsL2VzL3JhZlwiO1xuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uICgpIHtcbiAgdmFyIG5leHRGcmFtZVJlZiA9IFJlYWN0LnVzZVJlZihudWxsKTtcblxuICBmdW5jdGlvbiBjYW5jZWxOZXh0RnJhbWUoKSB7XG4gICAgcmFmLmNhbmNlbChuZXh0RnJhbWVSZWYuY3VycmVudCk7XG4gIH1cblxuICBmdW5jdGlvbiBuZXh0RnJhbWUoY2FsbGJhY2spIHtcbiAgICB2YXIgZGVsYXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDI7XG4gICAgY2FuY2VsTmV4dEZyYW1lKCk7XG4gICAgdmFyIG5leHRGcmFtZUlkID0gcmFmKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChkZWxheSA8PSAxKSB7XG4gICAgICAgIGNhbGxiYWNrKHtcbiAgICAgICAgICBpc0NhbmNlbGVkOiBmdW5jdGlvbiBpc0NhbmNlbGVkKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5leHRGcmFtZUlkICE9PSBuZXh0RnJhbWVSZWYuY3VycmVudDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV4dEZyYW1lKGNhbGxiYWNrLCBkZWxheSAtIDEpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG5leHRGcmFtZVJlZi5jdXJyZW50ID0gbmV4dEZyYW1lSWQ7XG4gIH1cblxuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBjYW5jZWxOZXh0RnJhbWUoKTtcbiAgICB9O1xuICB9LCBbXSk7XG4gIHJldHVybiBbbmV4dEZyYW1lLCBjYW5jZWxOZXh0RnJhbWVdO1xufSk7IiwiaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTVEVQX1BSRVBBUkUsIFNURVBfQUNUSVZFLCBTVEVQX1NUQVJULCBTVEVQX0FDVElWQVRFRCwgU1RFUF9OT05FIH0gZnJvbSAnLi4vaW50ZXJmYWNlJztcbmltcG9ydCB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0IGZyb20gJy4vdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCc7XG5pbXBvcnQgdXNlTmV4dEZyYW1lIGZyb20gJy4vdXNlTmV4dEZyYW1lJztcbnZhciBTVEVQX1FVRVVFID0gW1NURVBfUFJFUEFSRSwgU1RFUF9TVEFSVCwgU1RFUF9BQ1RJVkUsIFNURVBfQUNUSVZBVEVEXTtcbi8qKiBTa2lwIGN1cnJlbnQgc3RlcCAqL1xuXG5leHBvcnQgdmFyIFNraXBTdGVwID0gZmFsc2U7XG4vKiogQ3VycmVudCBzdGVwIHNob3VsZCBiZSB1cGRhdGUgaW4gKi9cblxuZXhwb3J0IHZhciBEb1N0ZXAgPSB0cnVlO1xuZXhwb3J0IGZ1bmN0aW9uIGlzQWN0aXZlKHN0ZXApIHtcbiAgcmV0dXJuIHN0ZXAgPT09IFNURVBfQUNUSVZFIHx8IHN0ZXAgPT09IFNURVBfQUNUSVZBVEVEO1xufVxuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIChzdGF0dXMsIGNhbGxiYWNrKSB7XG4gIHZhciBfUmVhY3QkdXNlU3RhdGUgPSBSZWFjdC51c2VTdGF0ZShTVEVQX05PTkUpLFxuICAgICAgX1JlYWN0JHVzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VTdGF0ZSwgMiksXG4gICAgICBzdGVwID0gX1JlYWN0JHVzZVN0YXRlMlswXSxcbiAgICAgIHNldFN0ZXAgPSBfUmVhY3QkdXNlU3RhdGUyWzFdO1xuXG4gIHZhciBfdXNlTmV4dEZyYW1lID0gdXNlTmV4dEZyYW1lKCksXG4gICAgICBfdXNlTmV4dEZyYW1lMiA9IF9zbGljZWRUb0FycmF5KF91c2VOZXh0RnJhbWUsIDIpLFxuICAgICAgbmV4dEZyYW1lID0gX3VzZU5leHRGcmFtZTJbMF0sXG4gICAgICBjYW5jZWxOZXh0RnJhbWUgPSBfdXNlTmV4dEZyYW1lMlsxXTtcblxuICBmdW5jdGlvbiBzdGFydFF1ZXVlKCkge1xuICAgIHNldFN0ZXAoU1RFUF9QUkVQQVJFKTtcbiAgfVxuXG4gIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGlmIChzdGVwICE9PSBTVEVQX05PTkUgJiYgc3RlcCAhPT0gU1RFUF9BQ1RJVkFURUQpIHtcbiAgICAgIHZhciBpbmRleCA9IFNURVBfUVVFVUUuaW5kZXhPZihzdGVwKTtcbiAgICAgIHZhciBuZXh0U3RlcCA9IFNURVBfUVVFVUVbaW5kZXggKyAxXTtcbiAgICAgIHZhciByZXN1bHQgPSBjYWxsYmFjayhzdGVwKTtcblxuICAgICAgaWYgKHJlc3VsdCA9PT0gU2tpcFN0ZXApIHtcbiAgICAgICAgLy8gU2tpcCB3aGVuIG5vIG5lZWRlZFxuICAgICAgICBzZXRTdGVwKG5leHRTdGVwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIERvIGFzIGZyYW1lIGZvciBzdGVwIHVwZGF0ZVxuICAgICAgICBuZXh0RnJhbWUoZnVuY3Rpb24gKGluZm8pIHtcbiAgICAgICAgICBmdW5jdGlvbiBkb05leHQoKSB7XG4gICAgICAgICAgICAvLyBTa2lwIHNpbmNlIGN1cnJlbnQgcXVldWUgaXMgb29kXG4gICAgICAgICAgICBpZiAoaW5mby5pc0NhbmNlbGVkKCkpIHJldHVybjtcbiAgICAgICAgICAgIHNldFN0ZXAobmV4dFN0ZXApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChyZXN1bHQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGRvTmV4dCgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBPbmx5IHByb21pc2Ugc2hvdWxkIGJlIGFzeW5jXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUocmVzdWx0KS50aGVuKGRvTmV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtzdGF0dXMsIHN0ZXBdKTtcbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgY2FuY2VsTmV4dEZyYW1lKCk7XG4gICAgfTtcbiAgfSwgW10pO1xuICByZXR1cm4gW3N0YXJ0UXVldWUsIHN0ZXBdO1xufSk7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgYW5pbWF0aW9uRW5kTmFtZSwgdHJhbnNpdGlvbkVuZE5hbWUgfSBmcm9tICcuLi91dGlsL21vdGlvbic7XG5leHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gIHZhciBjYWNoZUVsZW1lbnRSZWYgPSB1c2VSZWYoKTsgLy8gQ2FjaGUgY2FsbGJhY2tcblxuICB2YXIgY2FsbGJhY2tSZWYgPSB1c2VSZWYoY2FsbGJhY2spO1xuICBjYWxsYmFja1JlZi5jdXJyZW50ID0gY2FsbGJhY2s7IC8vIEludGVybmFsIG1vdGlvbiBldmVudCBoYW5kbGVyXG5cbiAgdmFyIG9uSW50ZXJuYWxNb3Rpb25FbmQgPSBSZWFjdC51c2VDYWxsYmFjayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBjYWxsYmFja1JlZi5jdXJyZW50KGV2ZW50KTtcbiAgfSwgW10pOyAvLyBSZW1vdmUgZXZlbnRzXG5cbiAgZnVuY3Rpb24gcmVtb3ZlTW90aW9uRXZlbnRzKGVsZW1lbnQpIHtcbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHRyYW5zaXRpb25FbmROYW1lLCBvbkludGVybmFsTW90aW9uRW5kKTtcbiAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhbmltYXRpb25FbmROYW1lLCBvbkludGVybmFsTW90aW9uRW5kKTtcbiAgICB9XG4gIH0gLy8gUGF0Y2ggZXZlbnRzXG5cblxuICBmdW5jdGlvbiBwYXRjaE1vdGlvbkV2ZW50cyhlbGVtZW50KSB7XG4gICAgaWYgKGNhY2hlRWxlbWVudFJlZi5jdXJyZW50ICYmIGNhY2hlRWxlbWVudFJlZi5jdXJyZW50ICE9PSBlbGVtZW50KSB7XG4gICAgICByZW1vdmVNb3Rpb25FdmVudHMoY2FjaGVFbGVtZW50UmVmLmN1cnJlbnQpO1xuICAgIH1cblxuICAgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQgIT09IGNhY2hlRWxlbWVudFJlZi5jdXJyZW50KSB7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZE5hbWUsIG9uSW50ZXJuYWxNb3Rpb25FbmQpO1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGFuaW1hdGlvbkVuZE5hbWUsIG9uSW50ZXJuYWxNb3Rpb25FbmQpOyAvLyBTYXZlIGFzIGNhY2hlIGluIGNhc2UgZG9tIHJlbW92ZWQgdHJpZ2dlciBieSBgbW90aW9uRGVhZGxpbmVgXG5cbiAgICAgIGNhY2hlRWxlbWVudFJlZi5jdXJyZW50ID0gZWxlbWVudDtcbiAgICB9XG4gIH0gLy8gQ2xlYW4gdXAgd2hlbiByZW1vdmVkXG5cblxuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICByZW1vdmVNb3Rpb25FdmVudHMoY2FjaGVFbGVtZW50UmVmLmN1cnJlbnQpO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgcmV0dXJuIFtwYXRjaE1vdGlvbkV2ZW50cywgcmVtb3ZlTW90aW9uRXZlbnRzXTtcbn0pOyIsImltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFNUQVRVU19BUFBFQVIsIFNUQVRVU19OT05FLCBTVEFUVVNfTEVBVkUsIFNUQVRVU19FTlRFUiwgU1RFUF9QUkVQQVJFLCBTVEVQX1NUQVJULCBTVEVQX0FDVElWRSB9IGZyb20gJy4uL2ludGVyZmFjZSc7XG5pbXBvcnQgdXNlU3RhdGUgZnJvbSAnLi91c2VTdGF0ZSc7XG5pbXBvcnQgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCBmcm9tICcuL3VzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QnO1xuaW1wb3J0IHVzZVN0ZXBRdWV1ZSwgeyBEb1N0ZXAsIFNraXBTdGVwLCBpc0FjdGl2ZSB9IGZyb20gJy4vdXNlU3RlcFF1ZXVlJztcbmltcG9ydCB1c2VEb21Nb3Rpb25FdmVudHMgZnJvbSAnLi91c2VEb21Nb3Rpb25FdmVudHMnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlU3RhdHVzKHN1cHBvcnRNb3Rpb24sIHZpc2libGUsIGdldEVsZW1lbnQsIF9yZWYpIHtcbiAgdmFyIF9yZWYkbW90aW9uRW50ZXIgPSBfcmVmLm1vdGlvbkVudGVyLFxuICAgICAgbW90aW9uRW50ZXIgPSBfcmVmJG1vdGlvbkVudGVyID09PSB2b2lkIDAgPyB0cnVlIDogX3JlZiRtb3Rpb25FbnRlcixcbiAgICAgIF9yZWYkbW90aW9uQXBwZWFyID0gX3JlZi5tb3Rpb25BcHBlYXIsXG4gICAgICBtb3Rpb25BcHBlYXIgPSBfcmVmJG1vdGlvbkFwcGVhciA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWYkbW90aW9uQXBwZWFyLFxuICAgICAgX3JlZiRtb3Rpb25MZWF2ZSA9IF9yZWYubW90aW9uTGVhdmUsXG4gICAgICBtb3Rpb25MZWF2ZSA9IF9yZWYkbW90aW9uTGVhdmUgPT09IHZvaWQgMCA/IHRydWUgOiBfcmVmJG1vdGlvbkxlYXZlLFxuICAgICAgbW90aW9uRGVhZGxpbmUgPSBfcmVmLm1vdGlvbkRlYWRsaW5lLFxuICAgICAgbW90aW9uTGVhdmVJbW1lZGlhdGVseSA9IF9yZWYubW90aW9uTGVhdmVJbW1lZGlhdGVseSxcbiAgICAgIG9uQXBwZWFyUHJlcGFyZSA9IF9yZWYub25BcHBlYXJQcmVwYXJlLFxuICAgICAgb25FbnRlclByZXBhcmUgPSBfcmVmLm9uRW50ZXJQcmVwYXJlLFxuICAgICAgb25MZWF2ZVByZXBhcmUgPSBfcmVmLm9uTGVhdmVQcmVwYXJlLFxuICAgICAgb25BcHBlYXJTdGFydCA9IF9yZWYub25BcHBlYXJTdGFydCxcbiAgICAgIG9uRW50ZXJTdGFydCA9IF9yZWYub25FbnRlclN0YXJ0LFxuICAgICAgb25MZWF2ZVN0YXJ0ID0gX3JlZi5vbkxlYXZlU3RhcnQsXG4gICAgICBvbkFwcGVhckFjdGl2ZSA9IF9yZWYub25BcHBlYXJBY3RpdmUsXG4gICAgICBvbkVudGVyQWN0aXZlID0gX3JlZi5vbkVudGVyQWN0aXZlLFxuICAgICAgb25MZWF2ZUFjdGl2ZSA9IF9yZWYub25MZWF2ZUFjdGl2ZSxcbiAgICAgIG9uQXBwZWFyRW5kID0gX3JlZi5vbkFwcGVhckVuZCxcbiAgICAgIG9uRW50ZXJFbmQgPSBfcmVmLm9uRW50ZXJFbmQsXG4gICAgICBvbkxlYXZlRW5kID0gX3JlZi5vbkxlYXZlRW5kLFxuICAgICAgb25WaXNpYmxlQ2hhbmdlZCA9IF9yZWYub25WaXNpYmxlQ2hhbmdlZDtcblxuICAvLyBVc2VkIGZvciBvdXRlciByZW5kZXIgdXNhZ2UgdG8gYXZvaWQgYHZpc2libGU6IGZhbHNlICYgc3RhdHVzOiBub25lYCB0byByZW5kZXIgbm90aGluZ1xuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUoKSxcbiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLFxuICAgICAgYXN5bmNWaXNpYmxlID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNldEFzeW5jVmlzaWJsZSA9IF91c2VTdGF0ZTJbMV07XG5cbiAgdmFyIF91c2VTdGF0ZTMgPSB1c2VTdGF0ZShTVEFUVVNfTk9ORSksXG4gICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksXG4gICAgICBzdGF0dXMgPSBfdXNlU3RhdGU0WzBdLFxuICAgICAgc2V0U3RhdHVzID0gX3VzZVN0YXRlNFsxXTtcblxuICB2YXIgX3VzZVN0YXRlNSA9IHVzZVN0YXRlKG51bGwpLFxuICAgICAgX3VzZVN0YXRlNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTUsIDIpLFxuICAgICAgc3R5bGUgPSBfdXNlU3RhdGU2WzBdLFxuICAgICAgc2V0U3R5bGUgPSBfdXNlU3RhdGU2WzFdO1xuXG4gIHZhciBtb3VudGVkUmVmID0gdXNlUmVmKGZhbHNlKTtcbiAgdmFyIGRlYWRsaW5lUmVmID0gdXNlUmVmKG51bGwpO1xuICB2YXIgZGVzdHJveWVkUmVmID0gdXNlUmVmKGZhbHNlKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09IERvbSBOb2RlID09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBjYWNoZUVsZW1lbnRSZWYgPSB1c2VSZWYobnVsbCk7XG5cbiAgZnVuY3Rpb24gZ2V0RG9tRWxlbWVudCgpIHtcbiAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQoKTtcbiAgICByZXR1cm4gZWxlbWVudCB8fCBjYWNoZUVsZW1lbnRSZWYuY3VycmVudDtcbiAgfSAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PSBNb3Rpb24gRW5kID09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB2YXIgYWN0aXZlUmVmID0gdXNlUmVmKGZhbHNlKTtcblxuICBmdW5jdGlvbiBvbkludGVybmFsTW90aW9uRW5kKGV2ZW50KSB7XG4gICAgdmFyIGVsZW1lbnQgPSBnZXREb21FbGVtZW50KCk7XG5cbiAgICBpZiAoZXZlbnQgJiYgIWV2ZW50LmRlYWRsaW5lICYmIGV2ZW50LnRhcmdldCAhPT0gZWxlbWVudCkge1xuICAgICAgLy8gZXZlbnQgZXhpc3RzXG4gICAgICAvLyBub3QgaW5pdGlhdGVkIGJ5IGRlYWRsaW5lXG4gICAgICAvLyB0cmFuc2l0aW9uRW5kIG5vdCBmaXJlZCBieSBpbm5lciBlbGVtZW50c1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBjYW5FbmQ7XG5cbiAgICBpZiAoc3RhdHVzID09PSBTVEFUVVNfQVBQRUFSICYmIGFjdGl2ZVJlZi5jdXJyZW50KSB7XG4gICAgICBjYW5FbmQgPSBvbkFwcGVhckVuZCA9PT0gbnVsbCB8fCBvbkFwcGVhckVuZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25BcHBlYXJFbmQoZWxlbWVudCwgZXZlbnQpO1xuICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSBTVEFUVVNfRU5URVIgJiYgYWN0aXZlUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNhbkVuZCA9IG9uRW50ZXJFbmQgPT09IG51bGwgfHwgb25FbnRlckVuZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25FbnRlckVuZChlbGVtZW50LCBldmVudCk7XG4gICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IFNUQVRVU19MRUFWRSAmJiBhY3RpdmVSZWYuY3VycmVudCkge1xuICAgICAgY2FuRW5kID0gb25MZWF2ZUVuZCA9PT0gbnVsbCB8fCBvbkxlYXZlRW5kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkxlYXZlRW5kKGVsZW1lbnQsIGV2ZW50KTtcbiAgICB9IC8vIE9ubHkgdXBkYXRlIHN0YXR1cyB3aGVuIGBjYW5FbmRgIGFuZCBub3QgZGVzdHJveWVkXG5cblxuICAgIGlmIChjYW5FbmQgIT09IGZhbHNlICYmICFkZXN0cm95ZWRSZWYuY3VycmVudCkge1xuICAgICAgc2V0U3RhdHVzKFNUQVRVU19OT05FKTtcbiAgICAgIHNldFN0eWxlKG51bGwpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBfdXNlRG9tTW90aW9uRXZlbnRzID0gdXNlRG9tTW90aW9uRXZlbnRzKG9uSW50ZXJuYWxNb3Rpb25FbmQpLFxuICAgICAgX3VzZURvbU1vdGlvbkV2ZW50czIgPSBfc2xpY2VkVG9BcnJheShfdXNlRG9tTW90aW9uRXZlbnRzLCAxKSxcbiAgICAgIHBhdGNoTW90aW9uRXZlbnRzID0gX3VzZURvbU1vdGlvbkV2ZW50czJbMF07IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFN0ZXAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBldmVudEhhbmRsZXJzID0gUmVhY3QudXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWYyLCBfcmVmMywgX3JlZjQ7XG5cbiAgICBzd2l0Y2ggKHN0YXR1cykge1xuICAgICAgY2FzZSAnYXBwZWFyJzpcbiAgICAgICAgcmV0dXJuIF9yZWYyID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfcmVmMiwgU1RFUF9QUkVQQVJFLCBvbkFwcGVhclByZXBhcmUpLCBfZGVmaW5lUHJvcGVydHkoX3JlZjIsIFNURVBfU1RBUlQsIG9uQXBwZWFyU3RhcnQpLCBfZGVmaW5lUHJvcGVydHkoX3JlZjIsIFNURVBfQUNUSVZFLCBvbkFwcGVhckFjdGl2ZSksIF9yZWYyO1xuXG4gICAgICBjYXNlICdlbnRlcic6XG4gICAgICAgIHJldHVybiBfcmVmMyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX3JlZjMsIFNURVBfUFJFUEFSRSwgb25FbnRlclByZXBhcmUpLCBfZGVmaW5lUHJvcGVydHkoX3JlZjMsIFNURVBfU1RBUlQsIG9uRW50ZXJTdGFydCksIF9kZWZpbmVQcm9wZXJ0eShfcmVmMywgU1RFUF9BQ1RJVkUsIG9uRW50ZXJBY3RpdmUpLCBfcmVmMztcblxuICAgICAgY2FzZSAnbGVhdmUnOlxuICAgICAgICByZXR1cm4gX3JlZjQgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9yZWY0LCBTVEVQX1BSRVBBUkUsIG9uTGVhdmVQcmVwYXJlKSwgX2RlZmluZVByb3BlcnR5KF9yZWY0LCBTVEVQX1NUQVJULCBvbkxlYXZlU3RhcnQpLCBfZGVmaW5lUHJvcGVydHkoX3JlZjQsIFNURVBfQUNUSVZFLCBvbkxlYXZlQWN0aXZlKSwgX3JlZjQ7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gIH0sIFtzdGF0dXNdKTtcblxuICB2YXIgX3VzZVN0ZXBRdWV1ZSA9IHVzZVN0ZXBRdWV1ZShzdGF0dXMsIGZ1bmN0aW9uIChuZXdTdGVwKSB7XG4gICAgLy8gT25seSBwcmVwYXJlIHN0ZXAgY2FuIGJlIHNraXBcbiAgICBpZiAobmV3U3RlcCA9PT0gU1RFUF9QUkVQQVJFKSB7XG4gICAgICB2YXIgb25QcmVwYXJlID0gZXZlbnRIYW5kbGVyc1tTVEVQX1BSRVBBUkVdO1xuXG4gICAgICBpZiAoIW9uUHJlcGFyZSkge1xuICAgICAgICByZXR1cm4gU2tpcFN0ZXA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvblByZXBhcmUoZ2V0RG9tRWxlbWVudCgpKTtcbiAgICB9IC8vIFJlc3Qgc3RlcCBpcyBzeW5jIHVwZGF0ZVxuXG5cbiAgICAvLyBSZXN0IHN0ZXAgaXMgc3luYyB1cGRhdGVcbiAgICBpZiAoc3RlcCBpbiBldmVudEhhbmRsZXJzKSB7XG4gICAgICB2YXIgX2V2ZW50SGFuZGxlcnMkc3RlcDtcblxuICAgICAgc2V0U3R5bGUoKChfZXZlbnRIYW5kbGVycyRzdGVwID0gZXZlbnRIYW5kbGVyc1tzdGVwXSkgPT09IG51bGwgfHwgX2V2ZW50SGFuZGxlcnMkc3RlcCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2V2ZW50SGFuZGxlcnMkc3RlcC5jYWxsKGV2ZW50SGFuZGxlcnMsIGdldERvbUVsZW1lbnQoKSwgbnVsbCkpIHx8IG51bGwpO1xuICAgIH1cblxuICAgIGlmIChzdGVwID09PSBTVEVQX0FDVElWRSkge1xuICAgICAgLy8gUGF0Y2ggZXZlbnRzIHdoZW4gbW90aW9uIG5lZWRlZFxuICAgICAgcGF0Y2hNb3Rpb25FdmVudHMoZ2V0RG9tRWxlbWVudCgpKTtcblxuICAgICAgaWYgKG1vdGlvbkRlYWRsaW5lID4gMCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoZGVhZGxpbmVSZWYuY3VycmVudCk7XG4gICAgICAgIGRlYWRsaW5lUmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBvbkludGVybmFsTW90aW9uRW5kKHtcbiAgICAgICAgICAgIGRlYWRsaW5lOiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIG1vdGlvbkRlYWRsaW5lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gRG9TdGVwO1xuICB9KSxcbiAgICAgIF91c2VTdGVwUXVldWUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0ZXBRdWV1ZSwgMiksXG4gICAgICBzdGFydFN0ZXAgPSBfdXNlU3RlcFF1ZXVlMlswXSxcbiAgICAgIHN0ZXAgPSBfdXNlU3RlcFF1ZXVlMlsxXTtcblxuICB2YXIgYWN0aXZlID0gaXNBY3RpdmUoc3RlcCk7XG4gIGFjdGl2ZVJlZi5jdXJyZW50ID0gYWN0aXZlOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IFN0YXR1cyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFVwZGF0ZSB3aXRoIG5ldyBzdGF0dXNcblxuICB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBzZXRBc3luY1Zpc2libGUodmlzaWJsZSk7XG4gICAgdmFyIGlzTW91bnRlZCA9IG1vdW50ZWRSZWYuY3VycmVudDtcbiAgICBtb3VudGVkUmVmLmN1cnJlbnQgPSB0cnVlO1xuXG4gICAgaWYgKCFzdXBwb3J0TW90aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5leHRTdGF0dXM7IC8vIEFwcGVhclxuXG4gICAgaWYgKCFpc01vdW50ZWQgJiYgdmlzaWJsZSAmJiBtb3Rpb25BcHBlYXIpIHtcbiAgICAgIG5leHRTdGF0dXMgPSBTVEFUVVNfQVBQRUFSO1xuICAgIH0gLy8gRW50ZXJcblxuXG4gICAgaWYgKGlzTW91bnRlZCAmJiB2aXNpYmxlICYmIG1vdGlvbkVudGVyKSB7XG4gICAgICBuZXh0U3RhdHVzID0gU1RBVFVTX0VOVEVSO1xuICAgIH0gLy8gTGVhdmVcblxuXG4gICAgaWYgKGlzTW91bnRlZCAmJiAhdmlzaWJsZSAmJiBtb3Rpb25MZWF2ZSB8fCAhaXNNb3VudGVkICYmIG1vdGlvbkxlYXZlSW1tZWRpYXRlbHkgJiYgIXZpc2libGUgJiYgbW90aW9uTGVhdmUpIHtcbiAgICAgIG5leHRTdGF0dXMgPSBTVEFUVVNfTEVBVkU7XG4gICAgfSAvLyBVcGRhdGUgdG8gbmV4dCBzdGF0dXNcblxuXG4gICAgaWYgKG5leHRTdGF0dXMpIHtcbiAgICAgIHNldFN0YXR1cyhuZXh0U3RhdHVzKTtcbiAgICAgIHN0YXJ0U3RlcCgpO1xuICAgIH1cbiAgfSwgW3Zpc2libGVdKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBFZmZlY3QgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBSZXNldCB3aGVuIG1vdGlvbiBjaGFuZ2VkXG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIC8vIENhbmNlbCBhcHBlYXJcbiAgICBzdGF0dXMgPT09IFNUQVRVU19BUFBFQVIgJiYgIW1vdGlvbkFwcGVhciB8fCAvLyBDYW5jZWwgZW50ZXJcbiAgICBzdGF0dXMgPT09IFNUQVRVU19FTlRFUiAmJiAhbW90aW9uRW50ZXIgfHwgLy8gQ2FuY2VsIGxlYXZlXG4gICAgc3RhdHVzID09PSBTVEFUVVNfTEVBVkUgJiYgIW1vdGlvbkxlYXZlKSB7XG4gICAgICBzZXRTdGF0dXMoU1RBVFVTX05PTkUpO1xuICAgIH1cbiAgfSwgW21vdGlvbkFwcGVhciwgbW90aW9uRW50ZXIsIG1vdGlvbkxlYXZlXSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNsZWFyVGltZW91dChkZWFkbGluZVJlZi5jdXJyZW50KTtcbiAgICAgIGRlc3Ryb3llZFJlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICB9O1xuICB9LCBbXSk7IC8vIFRyaWdnZXIgYG9uVmlzaWJsZUNoYW5nZWRgXG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoYXN5bmNWaXNpYmxlICE9PSB1bmRlZmluZWQgJiYgc3RhdHVzID09PSBTVEFUVVNfTk9ORSkge1xuICAgICAgb25WaXNpYmxlQ2hhbmdlZCA9PT0gbnVsbCB8fCBvblZpc2libGVDaGFuZ2VkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvblZpc2libGVDaGFuZ2VkKGFzeW5jVmlzaWJsZSk7XG4gICAgfVxuICB9LCBbYXN5bmNWaXNpYmxlLCBzdGF0dXNdKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBTdHlsZXMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBtZXJnZWRTdHlsZSA9IHN0eWxlO1xuXG4gIGlmIChldmVudEhhbmRsZXJzW1NURVBfUFJFUEFSRV0gJiYgc3RlcCA9PT0gU1RFUF9TVEFSVCkge1xuICAgIG1lcmdlZFN0eWxlID0gX29iamVjdFNwcmVhZCh7XG4gICAgICB0cmFuc2l0aW9uOiAnbm9uZSdcbiAgICB9LCBtZXJnZWRTdHlsZSk7XG4gIH1cblxuICByZXR1cm4gW3N0YXR1cywgc3RlcCwgbWVyZ2VkU3R5bGUsIGFzeW5jVmlzaWJsZSAhPT0gbnVsbCAmJiBhc3luY1Zpc2libGUgIT09IHZvaWQgMCA/IGFzeW5jVmlzaWJsZSA6IHZpc2libGVdO1xufSIsImltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrXCI7XG5pbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzc1wiO1xuaW1wb3J0IF9pbmhlcml0cyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHNcIjtcbmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbnZhciBEb21XcmFwcGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhEb21XcmFwcGVyLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKERvbVdyYXBwZXIpO1xuXG4gIGZ1bmN0aW9uIERvbVdyYXBwZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERvbVdyYXBwZXIpO1xuXG4gICAgcmV0dXJuIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKERvbVdyYXBwZXIsIFt7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5jaGlsZHJlbjtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRG9tV3JhcHBlcjtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblxuZXhwb3J0IGRlZmF1bHQgRG9tV3JhcHBlcjsiLCJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0IF90eXBlb2YgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZlwiO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSByZWFjdC9kZWZhdWx0LXByb3BzLW1hdGNoLXByb3AtdHlwZXMsIHJlYWN0L25vLW11bHRpLWNvbXAsIHJlYWN0L3Byb3AtdHlwZXMgKi9cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBmaW5kRE9NTm9kZSBmcm9tIFwicmMtdXRpbC9lcy9Eb20vZmluZERPTU5vZGVcIjtcbmltcG9ydCB7IGZpbGxSZWYgfSBmcm9tIFwicmMtdXRpbC9lcy9yZWZcIjtcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHsgZ2V0VHJhbnNpdGlvbk5hbWUsIHN1cHBvcnRUcmFuc2l0aW9uIH0gZnJvbSAnLi91dGlsL21vdGlvbic7XG5pbXBvcnQgeyBTVEFUVVNfTk9ORSwgU1RFUF9QUkVQQVJFLCBTVEVQX1NUQVJUIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuaW1wb3J0IHVzZVN0YXR1cyBmcm9tICcuL2hvb2tzL3VzZVN0YXR1cyc7XG5pbXBvcnQgRG9tV3JhcHBlciBmcm9tICcuL0RvbVdyYXBwZXInO1xuaW1wb3J0IHsgaXNBY3RpdmUgfSBmcm9tICcuL2hvb2tzL3VzZVN0ZXBRdWV1ZSc7XG4vKipcbiAqIGB0cmFuc2l0aW9uU3VwcG9ydGAgaXMgdXNlZCBmb3Igbm9uZSB0cmFuc2l0aW9uIHRlc3QgY2FzZS5cbiAqIERlZmF1bHQgd2UgdXNlIGJyb3dzZXIgdHJhbnNpdGlvbiBldmVudCBzdXBwb3J0IGNoZWNrLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5DU1NNb3Rpb24oY29uZmlnKSB7XG4gIHZhciB0cmFuc2l0aW9uU3VwcG9ydCA9IGNvbmZpZztcblxuICBpZiAoX3R5cGVvZihjb25maWcpID09PSAnb2JqZWN0Jykge1xuICAgIHRyYW5zaXRpb25TdXBwb3J0ID0gY29uZmlnLnRyYW5zaXRpb25TdXBwb3J0O1xuICB9XG5cbiAgZnVuY3Rpb24gaXNTdXBwb3J0VHJhbnNpdGlvbihwcm9wcykge1xuICAgIHJldHVybiAhIShwcm9wcy5tb3Rpb25OYW1lICYmIHRyYW5zaXRpb25TdXBwb3J0KTtcbiAgfVxuXG4gIHZhciBDU1NNb3Rpb24gPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAocHJvcHMsIHJlZikge1xuICAgIHZhciBfcHJvcHMkdmlzaWJsZSA9IHByb3BzLnZpc2libGUsXG4gICAgICAgIHZpc2libGUgPSBfcHJvcHMkdmlzaWJsZSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9wcm9wcyR2aXNpYmxlLFxuICAgICAgICBfcHJvcHMkcmVtb3ZlT25MZWF2ZSA9IHByb3BzLnJlbW92ZU9uTGVhdmUsXG4gICAgICAgIHJlbW92ZU9uTGVhdmUgPSBfcHJvcHMkcmVtb3ZlT25MZWF2ZSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9wcm9wcyRyZW1vdmVPbkxlYXZlLFxuICAgICAgICBmb3JjZVJlbmRlciA9IHByb3BzLmZvcmNlUmVuZGVyLFxuICAgICAgICBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuLFxuICAgICAgICBtb3Rpb25OYW1lID0gcHJvcHMubW90aW9uTmFtZSxcbiAgICAgICAgbGVhdmVkQ2xhc3NOYW1lID0gcHJvcHMubGVhdmVkQ2xhc3NOYW1lLFxuICAgICAgICBldmVudFByb3BzID0gcHJvcHMuZXZlbnRQcm9wcztcbiAgICB2YXIgc3VwcG9ydE1vdGlvbiA9IGlzU3VwcG9ydFRyYW5zaXRpb24ocHJvcHMpOyAvLyBSZWYgdG8gdGhlIHJlYWN0IG5vZGUsIGl0IG1heSBiZSBhIEhUTUxFbGVtZW50XG5cbiAgICB2YXIgbm9kZVJlZiA9IHVzZVJlZigpOyAvLyBSZWYgdG8gdGhlIGRvbSB3cmFwcGVyIGluIGNhc2UgcmVmIGNhbiBub3QgcGFzcyB0byBIVE1MRWxlbWVudFxuXG4gICAgdmFyIHdyYXBwZXJOb2RlUmVmID0gdXNlUmVmKCk7XG5cbiAgICBmdW5jdGlvbiBnZXREb21FbGVtZW50KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGZpbmRET01Ob2RlKG5vZGVSZWYuY3VycmVudCB8fCB3cmFwcGVyTm9kZVJlZi5jdXJyZW50KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gT25seSBoYXBwZW4gd2hlbiBgbW90aW9uRGVhZGxpbmVgIHRyaWdnZXIgYnV0IGVsZW1lbnQgcmVtb3ZlZC5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIF91c2VTdGF0dXMgPSB1c2VTdGF0dXMoc3VwcG9ydE1vdGlvbiwgdmlzaWJsZSwgZ2V0RG9tRWxlbWVudCwgcHJvcHMpLFxuICAgICAgICBfdXNlU3RhdHVzMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0dXMsIDQpLFxuICAgICAgICBzdGF0dXMgPSBfdXNlU3RhdHVzMlswXSxcbiAgICAgICAgc3RhdHVzU3RlcCA9IF91c2VTdGF0dXMyWzFdLFxuICAgICAgICBzdGF0dXNTdHlsZSA9IF91c2VTdGF0dXMyWzJdLFxuICAgICAgICBtZXJnZWRWaXNpYmxlID0gX3VzZVN0YXR1czJbM107IC8vIFJlY29yZCB3aGV0aGVyIGNvbnRlbnQgaGFzIHJlbmRlZFxuICAgIC8vIFdpbGwgcmV0dXJuIG51bGwgZm9yIHVuLXJlbmRlcmVkIGV2ZW4gd2hlbiBgcmVtb3ZlT25MZWF2ZT17ZmFsc2V9YFxuXG5cbiAgICB2YXIgcmVuZGVyZWRSZWYgPSBSZWFjdC51c2VSZWYobWVyZ2VkVmlzaWJsZSk7XG5cbiAgICBpZiAobWVyZ2VkVmlzaWJsZSkge1xuICAgICAgcmVuZGVyZWRSZWYuY3VycmVudCA9IHRydWU7XG4gICAgfSAvLyA9PT09PT09PT09PT09PT09PT09PT09IFJlZnMgPT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgICB2YXIgb3JpZ2luUmVmID0gdXNlUmVmKHJlZik7XG4gICAgb3JpZ2luUmVmLmN1cnJlbnQgPSByZWY7XG4gICAgdmFyIHNldE5vZGVSZWYgPSBSZWFjdC51c2VDYWxsYmFjayhmdW5jdGlvbiAobm9kZSkge1xuICAgICAgbm9kZVJlZi5jdXJyZW50ID0gbm9kZTtcbiAgICAgIGZpbGxSZWYob3JpZ2luUmVmLmN1cnJlbnQsIG5vZGUpO1xuICAgIH0sIFtdKTsgLy8gPT09PT09PT09PT09PT09PT09PT09IFJlbmRlciA9PT09PT09PT09PT09PT09PT09PT1cblxuICAgIHZhciBtb3Rpb25DaGlsZHJlbjtcblxuICAgIHZhciBtZXJnZWRQcm9wcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZXZlbnRQcm9wcyksIHt9LCB7XG4gICAgICB2aXNpYmxlOiB2aXNpYmxlXG4gICAgfSk7XG5cbiAgICBpZiAoIWNoaWxkcmVuKSB7XG4gICAgICAvLyBObyBjaGlsZHJlblxuICAgICAgbW90aW9uQ2hpbGRyZW4gPSBudWxsO1xuICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSBTVEFUVVNfTk9ORSB8fCAhaXNTdXBwb3J0VHJhbnNpdGlvbihwcm9wcykpIHtcbiAgICAgIC8vIFN0YWJsZSBjaGlsZHJlblxuICAgICAgaWYgKG1lcmdlZFZpc2libGUpIHtcbiAgICAgICAgbW90aW9uQ2hpbGRyZW4gPSBjaGlsZHJlbihfb2JqZWN0U3ByZWFkKHt9LCBtZXJnZWRQcm9wcyksIHNldE5vZGVSZWYpO1xuICAgICAgfSBlbHNlIGlmICghcmVtb3ZlT25MZWF2ZSAmJiByZW5kZXJlZFJlZi5jdXJyZW50KSB7XG4gICAgICAgIG1vdGlvbkNoaWxkcmVuID0gY2hpbGRyZW4oX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtZXJnZWRQcm9wcyksIHt9LCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBsZWF2ZWRDbGFzc05hbWVcbiAgICAgICAgfSksIHNldE5vZGVSZWYpO1xuICAgICAgfSBlbHNlIGlmIChmb3JjZVJlbmRlcikge1xuICAgICAgICBtb3Rpb25DaGlsZHJlbiA9IGNoaWxkcmVuKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWVyZ2VkUHJvcHMpLCB7fSwge1xuICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgICB9XG4gICAgICAgIH0pLCBzZXROb2RlUmVmKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1vdGlvbkNoaWxkcmVuID0gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIF9jbGFzc05hbWVzO1xuXG4gICAgICAvLyBJbiBtb3Rpb25cbiAgICAgIHZhciBzdGF0dXNTdWZmaXg7XG5cbiAgICAgIGlmIChzdGF0dXNTdGVwID09PSBTVEVQX1BSRVBBUkUpIHtcbiAgICAgICAgc3RhdHVzU3VmZml4ID0gJ3ByZXBhcmUnO1xuICAgICAgfSBlbHNlIGlmIChpc0FjdGl2ZShzdGF0dXNTdGVwKSkge1xuICAgICAgICBzdGF0dXNTdWZmaXggPSAnYWN0aXZlJztcbiAgICAgIH0gZWxzZSBpZiAoc3RhdHVzU3RlcCA9PT0gU1RFUF9TVEFSVCkge1xuICAgICAgICBzdGF0dXNTdWZmaXggPSAnc3RhcnQnO1xuICAgICAgfVxuXG4gICAgICBtb3Rpb25DaGlsZHJlbiA9IGNoaWxkcmVuKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWVyZ2VkUHJvcHMpLCB7fSwge1xuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoZ2V0VHJhbnNpdGlvbk5hbWUobW90aW9uTmFtZSwgc3RhdHVzKSwgKF9jbGFzc05hbWVzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgZ2V0VHJhbnNpdGlvbk5hbWUobW90aW9uTmFtZSwgXCJcIi5jb25jYXQoc3RhdHVzLCBcIi1cIikuY29uY2F0KHN0YXR1c1N1ZmZpeCkpLCBzdGF0dXNTdWZmaXgpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIG1vdGlvbk5hbWUsIHR5cGVvZiBtb3Rpb25OYW1lID09PSAnc3RyaW5nJyksIF9jbGFzc05hbWVzKSksXG4gICAgICAgIHN0eWxlOiBzdGF0dXNTdHlsZVxuICAgICAgfSksIHNldE5vZGVSZWYpO1xuICAgIH1cblxuICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChEb21XcmFwcGVyLCB7XG4gICAgICByZWY6IHdyYXBwZXJOb2RlUmVmXG4gICAgfSwgbW90aW9uQ2hpbGRyZW4pO1xuICB9KTtcbiAgQ1NTTW90aW9uLmRpc3BsYXlOYW1lID0gJ0NTU01vdGlvbic7XG4gIHJldHVybiBDU1NNb3Rpb247XG59XG5leHBvcnQgZGVmYXVsdCBnZW5DU1NNb3Rpb24oc3VwcG9ydFRyYW5zaXRpb24pOyIsImV4cG9ydCBmdW5jdGlvbiBnZXRNb3Rpb24oX3JlZikge1xuICB2YXIgcHJlZml4Q2xzID0gX3JlZi5wcmVmaXhDbHMsXG4gICAgICBtb3Rpb24gPSBfcmVmLm1vdGlvbixcbiAgICAgIGFuaW1hdGlvbiA9IF9yZWYuYW5pbWF0aW9uLFxuICAgICAgdHJhbnNpdGlvbk5hbWUgPSBfcmVmLnRyYW5zaXRpb25OYW1lO1xuXG4gIGlmIChtb3Rpb24pIHtcbiAgICByZXR1cm4gbW90aW9uO1xuICB9XG5cbiAgaWYgKGFuaW1hdGlvbikge1xuICAgIHJldHVybiB7XG4gICAgICBtb3Rpb25OYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLVwiKS5jb25jYXQoYW5pbWF0aW9uKVxuICAgIH07XG4gIH1cblxuICBpZiAodHJhbnNpdGlvbk5hbWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbW90aW9uTmFtZTogdHJhbnNpdGlvbk5hbWVcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgQ1NTTW90aW9uIGZyb20gJ3JjLW1vdGlvbic7XG5pbXBvcnQgeyBnZXRNb3Rpb24gfSBmcm9tICcuLi91dGlscy9sZWdhY3lVdGlsJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1hc2socHJvcHMpIHtcbiAgdmFyIHByZWZpeENscyA9IHByb3BzLnByZWZpeENscyxcbiAgICAgIHZpc2libGUgPSBwcm9wcy52aXNpYmxlLFxuICAgICAgekluZGV4ID0gcHJvcHMuekluZGV4LFxuICAgICAgbWFzayA9IHByb3BzLm1hc2ssXG4gICAgICBtYXNrTW90aW9uID0gcHJvcHMubWFza01vdGlvbixcbiAgICAgIG1hc2tBbmltYXRpb24gPSBwcm9wcy5tYXNrQW5pbWF0aW9uLFxuICAgICAgbWFza1RyYW5zaXRpb25OYW1lID0gcHJvcHMubWFza1RyYW5zaXRpb25OYW1lO1xuXG4gIGlmICghbWFzaykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIG1vdGlvbiA9IHt9O1xuXG4gIGlmIChtYXNrTW90aW9uIHx8IG1hc2tUcmFuc2l0aW9uTmFtZSB8fCBtYXNrQW5pbWF0aW9uKSB7XG4gICAgbW90aW9uID0gX29iamVjdFNwcmVhZCh7XG4gICAgICBtb3Rpb25BcHBlYXI6IHRydWVcbiAgICB9LCBnZXRNb3Rpb24oe1xuICAgICAgbW90aW9uOiBtYXNrTW90aW9uLFxuICAgICAgcHJlZml4Q2xzOiBwcmVmaXhDbHMsXG4gICAgICB0cmFuc2l0aW9uTmFtZTogbWFza1RyYW5zaXRpb25OYW1lLFxuICAgICAgYW5pbWF0aW9uOiBtYXNrQW5pbWF0aW9uXG4gICAgfSkpO1xuICB9XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENTU01vdGlvbiwgX2V4dGVuZHMoe30sIG1vdGlvbiwge1xuICAgIHZpc2libGU6IHZpc2libGUsXG4gICAgcmVtb3ZlT25MZWF2ZTogdHJ1ZVxuICB9KSwgZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWU7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgIHN0eWxlOiB7XG4gICAgICAgIHpJbmRleDogekluZGV4XG4gICAgICB9LFxuICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiXCIuY29uY2F0KHByZWZpeENscywgXCItbWFza1wiKSwgY2xhc3NOYW1lKVxuICAgIH0pO1xuICB9KTtcbn0iLCJleHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgaWYgKCFlbGVtZW50KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKGVsZW1lbnQub2Zmc2V0UGFyZW50KSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpZiAoZWxlbWVudC5nZXRCQm94KSB7XG4gICAgdmFyIGJveCA9IGVsZW1lbnQuZ2V0QkJveCgpO1xuXG4gICAgaWYgKGJveC53aWR0aCB8fCBib3guaGVpZ2h0KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAoZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QpIHtcbiAgICB2YXIgX2JveCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICBpZiAoX2JveC53aWR0aCB8fCBfYm94LmhlaWdodCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufSk7IiwiZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcblxuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpO1xuXG4gICAgaWYgKGVudW1lcmFibGVPbmx5KSB7XG4gICAgICBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTtcbiAgfVxuXG4gIHJldHVybiBrZXlzO1xufVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkMih0YXJnZXQpIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTtcblxuICAgIGlmIChpICUgMikge1xuICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuZnVuY3Rpb24gX3R5cGVvZihvYmopIHtcbiAgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiO1xuXG4gIGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikge1xuICAgIF90eXBlb2YgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIG9iajtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIF90eXBlb2YgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIF90eXBlb2Yob2JqKTtcbn1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbnZhciB2ZW5kb3JQcmVmaXg7XG52YXIganNDc3NNYXAgPSB7XG4gIFdlYmtpdDogJy13ZWJraXQtJyxcbiAgTW96OiAnLW1vei0nLFxuICAvLyBJRSBkaWQgaXQgd3JvbmcgYWdhaW4gLi4uXG4gIG1zOiAnLW1zLScsXG4gIE86ICctby0nXG59O1xuXG5mdW5jdGlvbiBnZXRWZW5kb3JQcmVmaXgoKSB7XG4gIGlmICh2ZW5kb3JQcmVmaXggIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB2ZW5kb3JQcmVmaXg7XG4gIH1cblxuICB2ZW5kb3JQcmVmaXggPSAnJztcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpLnN0eWxlO1xuICB2YXIgdGVzdFByb3AgPSAnVHJhbnNmb3JtJztcblxuICBmb3IgKHZhciBrZXkgaW4ganNDc3NNYXApIHtcbiAgICBpZiAoa2V5ICsgdGVzdFByb3AgaW4gc3R5bGUpIHtcbiAgICAgIHZlbmRvclByZWZpeCA9IGtleTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdmVuZG9yUHJlZml4O1xufVxuXG5mdW5jdGlvbiBnZXRUcmFuc2l0aW9uTmFtZSgpIHtcbiAgcmV0dXJuIGdldFZlbmRvclByZWZpeCgpID8gXCJcIi5jb25jYXQoZ2V0VmVuZG9yUHJlZml4KCksIFwiVHJhbnNpdGlvblByb3BlcnR5XCIpIDogJ3RyYW5zaXRpb25Qcm9wZXJ0eSc7XG59XG5cbmZ1bmN0aW9uIGdldFRyYW5zZm9ybU5hbWUoKSB7XG4gIHJldHVybiBnZXRWZW5kb3JQcmVmaXgoKSA/IFwiXCIuY29uY2F0KGdldFZlbmRvclByZWZpeCgpLCBcIlRyYW5zZm9ybVwiKSA6ICd0cmFuc2Zvcm0nO1xufVxuZnVuY3Rpb24gc2V0VHJhbnNpdGlvblByb3BlcnR5KG5vZGUsIHZhbHVlKSB7XG4gIHZhciBuYW1lID0gZ2V0VHJhbnNpdGlvbk5hbWUoKTtcblxuICBpZiAobmFtZSkge1xuICAgIG5vZGUuc3R5bGVbbmFtZV0gPSB2YWx1ZTtcblxuICAgIGlmIChuYW1lICE9PSAndHJhbnNpdGlvblByb3BlcnR5Jykge1xuICAgICAgbm9kZS5zdHlsZS50cmFuc2l0aW9uUHJvcGVydHkgPSB2YWx1ZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0VHJhbnNmb3JtKG5vZGUsIHZhbHVlKSB7XG4gIHZhciBuYW1lID0gZ2V0VHJhbnNmb3JtTmFtZSgpO1xuXG4gIGlmIChuYW1lKSB7XG4gICAgbm9kZS5zdHlsZVtuYW1lXSA9IHZhbHVlO1xuXG4gICAgaWYgKG5hbWUgIT09ICd0cmFuc2Zvcm0nKSB7XG4gICAgICBub2RlLnN0eWxlLnRyYW5zZm9ybSA9IHZhbHVlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRUcmFuc2l0aW9uUHJvcGVydHkobm9kZSkge1xuICByZXR1cm4gbm9kZS5zdHlsZS50cmFuc2l0aW9uUHJvcGVydHkgfHwgbm9kZS5zdHlsZVtnZXRUcmFuc2l0aW9uTmFtZSgpXTtcbn1cbmZ1bmN0aW9uIGdldFRyYW5zZm9ybVhZKG5vZGUpIHtcbiAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUobm9kZSwgbnVsbCk7XG4gIHZhciB0cmFuc2Zvcm0gPSBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCd0cmFuc2Zvcm0nKSB8fCBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKGdldFRyYW5zZm9ybU5hbWUoKSk7XG5cbiAgaWYgKHRyYW5zZm9ybSAmJiB0cmFuc2Zvcm0gIT09ICdub25lJykge1xuICAgIHZhciBtYXRyaXggPSB0cmFuc2Zvcm0ucmVwbGFjZSgvW14wLTlcXC0uLF0vZywgJycpLnNwbGl0KCcsJyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IHBhcnNlRmxvYXQobWF0cml4WzEyXSB8fCBtYXRyaXhbNF0sIDApLFxuICAgICAgeTogcGFyc2VGbG9hdChtYXRyaXhbMTNdIHx8IG1hdHJpeFs1XSwgMClcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB4OiAwLFxuICAgIHk6IDBcbiAgfTtcbn1cbnZhciBtYXRyaXgyZCA9IC9tYXRyaXhcXCgoLiopXFwpLztcbnZhciBtYXRyaXgzZCA9IC9tYXRyaXgzZFxcKCguKilcXCkvO1xuZnVuY3Rpb24gc2V0VHJhbnNmb3JtWFkobm9kZSwgeHkpIHtcbiAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUobm9kZSwgbnVsbCk7XG4gIHZhciB0cmFuc2Zvcm0gPSBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCd0cmFuc2Zvcm0nKSB8fCBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKGdldFRyYW5zZm9ybU5hbWUoKSk7XG5cbiAgaWYgKHRyYW5zZm9ybSAmJiB0cmFuc2Zvcm0gIT09ICdub25lJykge1xuICAgIHZhciBhcnI7XG4gICAgdmFyIG1hdGNoMmQgPSB0cmFuc2Zvcm0ubWF0Y2gobWF0cml4MmQpO1xuXG4gICAgaWYgKG1hdGNoMmQpIHtcbiAgICAgIG1hdGNoMmQgPSBtYXRjaDJkWzFdO1xuICAgICAgYXJyID0gbWF0Y2gyZC5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChpdGVtLCAxMCk7XG4gICAgICB9KTtcbiAgICAgIGFycls0XSA9IHh5Lng7XG4gICAgICBhcnJbNV0gPSB4eS55O1xuICAgICAgc2V0VHJhbnNmb3JtKG5vZGUsIFwibWF0cml4KFwiLmNvbmNhdChhcnIuam9pbignLCcpLCBcIilcIikpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbWF0Y2gzZCA9IHRyYW5zZm9ybS5tYXRjaChtYXRyaXgzZClbMV07XG4gICAgICBhcnIgPSBtYXRjaDNkLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KGl0ZW0sIDEwKTtcbiAgICAgIH0pO1xuICAgICAgYXJyWzEyXSA9IHh5Lng7XG4gICAgICBhcnJbMTNdID0geHkueTtcbiAgICAgIHNldFRyYW5zZm9ybShub2RlLCBcIm1hdHJpeDNkKFwiLmNvbmNhdChhcnIuam9pbignLCcpLCBcIilcIikpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBzZXRUcmFuc2Zvcm0obm9kZSwgXCJ0cmFuc2xhdGVYKFwiLmNvbmNhdCh4eS54LCBcInB4KSB0cmFuc2xhdGVZKFwiKS5jb25jYXQoeHkueSwgXCJweCkgdHJhbnNsYXRlWigwKVwiKSk7XG4gIH1cbn1cblxudmFyIFJFX05VTSA9IC9bXFwtK10/KD86XFxkKlxcLnwpXFxkKyg/OltlRV1bXFwtK10/XFxkK3wpLy5zb3VyY2U7XG52YXIgZ2V0Q29tcHV0ZWRTdHlsZVg7IC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zNDg1NjU0LzMwNDA2MDVcblxuZnVuY3Rpb24gZm9yY2VSZWxheW91dChlbGVtKSB7XG4gIHZhciBvcmlnaW5hbFN0eWxlID0gZWxlbS5zdHlsZS5kaXNwbGF5O1xuICBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIGVsZW0ub2Zmc2V0SGVpZ2h0OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgZWxlbS5zdHlsZS5kaXNwbGF5ID0gb3JpZ2luYWxTdHlsZTtcbn1cblxuZnVuY3Rpb24gY3NzKGVsLCBuYW1lLCB2KSB7XG4gIHZhciB2YWx1ZSA9IHY7XG5cbiAgaWYgKF90eXBlb2YobmFtZSkgPT09ICdvYmplY3QnKSB7XG4gICAgZm9yICh2YXIgaSBpbiBuYW1lKSB7XG4gICAgICBpZiAobmFtZS5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICBjc3MoZWwsIGksIG5hbWVbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAodHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICB2YWx1ZSA9IFwiXCIuY29uY2F0KHZhbHVlLCBcInB4XCIpO1xuICAgIH1cblxuICAgIGVsLnN0eWxlW25hbWVdID0gdmFsdWU7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIHJldHVybiBnZXRDb21wdXRlZFN0eWxlWChlbCwgbmFtZSk7XG59XG5cbmZ1bmN0aW9uIGdldENsaWVudFBvc2l0aW9uKGVsZW0pIHtcbiAgdmFyIGJveDtcbiAgdmFyIHg7XG4gIHZhciB5O1xuICB2YXIgZG9jID0gZWxlbS5vd25lckRvY3VtZW50O1xuICB2YXIgYm9keSA9IGRvYy5ib2R5O1xuICB2YXIgZG9jRWxlbSA9IGRvYyAmJiBkb2MuZG9jdW1lbnRFbGVtZW50OyAvLyDmoLnmja4gR0JTIOacgOaWsOaVsOaNru+8jEEtR3JhZGUgQnJvd3NlcnMg6YO95bey5pSv5oyBIGdldEJvdW5kaW5nQ2xpZW50UmVjdCDmlrnms5XvvIzkuI3nlKjlho3ogIPomZHkvKDnu5/nmoTlrp7njrDmlrnlvI9cblxuICBib3ggPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyAvLyDms6jvvJpqUXVlcnkg6L+Y6ICD6JmR5YeP5Y67IGRvY0VsZW0uY2xpZW50TGVmdC9jbGllbnRUb3BcbiAgLy8g5L2G5rWL6K+V5Y+R546w77yM6L+Z5qC35Y+N6ICM5Lya5a+86Ie05b2TIGh0bWwg5ZKMIGJvZHkg5pyJ6L656LedL+i+ueahhuagt+W8j+aXtu+8jOiOt+WPlueahOWAvOS4jeato+ehrlxuICAvLyDmraTlpJbvvIxpZTYg5Lya5b+955WlIGh0bWwg55qEIG1hcmdpbiDlgLzvvIzlubjov5DlnLDmmK/msqHmnInosIHkvJrljrvorr7nva4gaHRtbCDnmoQgbWFyZ2luXG5cbiAgeCA9IGJveC5sZWZ0O1xuICB5ID0gYm94LnRvcDsgLy8gSW4gSUUsIG1vc3Qgb2YgdGhlIHRpbWUsIDIgZXh0cmEgcGl4ZWxzIGFyZSBhZGRlZCB0byB0aGUgdG9wIGFuZCBsZWZ0XG4gIC8vIGR1ZSB0byB0aGUgaW1wbGljaXQgMi1waXhlbCBpbnNldCBib3JkZXIuICBJbiBJRTYvNyBxdWlya3MgbW9kZSBhbmRcbiAgLy8gSUU2IHN0YW5kYXJkcyBtb2RlLCB0aGlzIGJvcmRlciBjYW4gYmUgb3ZlcnJpZGRlbiBieSBzZXR0aW5nIHRoZVxuICAvLyBkb2N1bWVudCBlbGVtZW50J3MgYm9yZGVyIHRvIHplcm8gLS0gdGh1cywgd2UgY2Fubm90IHJlbHkgb24gdGhlXG4gIC8vIG9mZnNldCBhbHdheXMgYmVpbmcgMiBwaXhlbHMuXG4gIC8vIEluIHF1aXJrcyBtb2RlLCB0aGUgb2Zmc2V0IGNhbiBiZSBkZXRlcm1pbmVkIGJ5IHF1ZXJ5aW5nIHRoZSBib2R5J3NcbiAgLy8gY2xpZW50TGVmdC9jbGllbnRUb3AsIGJ1dCBpbiBzdGFuZGFyZHMgbW9kZSwgaXQgaXMgZm91bmQgYnkgcXVlcnlpbmdcbiAgLy8gdGhlIGRvY3VtZW50IGVsZW1lbnQncyBjbGllbnRMZWZ0L2NsaWVudFRvcC4gIFNpbmNlIHdlIGFscmVhZHkgY2FsbGVkXG4gIC8vIGdldENsaWVudEJvdW5kaW5nUmVjdCB3ZSBoYXZlIGFscmVhZHkgZm9yY2VkIGEgcmVmbG93LCBzbyBpdCBpcyBub3RcbiAgLy8gdG9vIGV4cGVuc2l2ZSBqdXN0IHRvIHF1ZXJ5IHRoZW0gYWxsLlxuICAvLyBpZSDkuIvlupTor6Xlh4/ljrvnqpflj6PnmoTovrnmoYblkKfvvIzmr5Xnq5/pu5jorqQgYWJzb2x1dGUg6YO95piv55u45a+556qX5Y+j5a6a5L2N55qEXG4gIC8vIOeql+WPo+i+ueahhuagh+WHhuaYr+iuviBkb2N1bWVudEVsZW1lbnQgLHF1aXJrcyDml7borr7nva4gYm9keVxuICAvLyDmnIDlpb3npoHmraLlnKggYm9keSDlkowgaHRtbCDkuIrovrnmoYYg77yM5L2GIGllIDwgOSBodG1sIOm7mOiupOaciSAycHgg77yM5YeP5Y67XG4gIC8vIOS9huaYr+mdniBpZSDkuI3lj6/og73orr7nva7nqpflj6PovrnmoYbvvIxib2R5IGh0bWwg5Lmf5LiN5piv56qX5Y+jICxpZSDlj6/ku6XpgJrov4cgaHRtbCxib2R5IOiuvue9rlxuICAvLyDmoIflh4YgaWUg5LiLIGRvY0VsZW0uY2xpZW50VG9wIOWwseaYryBib3JkZXItdG9wXG4gIC8vIGllNyBodG1sIOWNs+eql+WPo+i+ueahhuaUueWPmOS4jeS6huOAguawuOi/nOS4uiAyXG4gIC8vIOS9huagh+WHhiBmaXJlZm94L2Nocm9tZS9pZTkg5LiLIGRvY0VsZW0uY2xpZW50VG9wIOaYr+eql+WPo+i+ueahhu+8jOWNs+S9v+iuvuS6hiBib3JkZXItdG9wIOS5n+S4uiAwXG5cbiAgeCAtPSBkb2NFbGVtLmNsaWVudExlZnQgfHwgYm9keS5jbGllbnRMZWZ0IHx8IDA7XG4gIHkgLT0gZG9jRWxlbS5jbGllbnRUb3AgfHwgYm9keS5jbGllbnRUb3AgfHwgMDtcbiAgcmV0dXJuIHtcbiAgICBsZWZ0OiB4LFxuICAgIHRvcDogeVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRTY3JvbGwodywgdG9wKSB7XG4gIHZhciByZXQgPSB3W1wicGFnZVwiLmNvbmNhdCh0b3AgPyAnWScgOiAnWCcsIFwiT2Zmc2V0XCIpXTtcbiAgdmFyIG1ldGhvZCA9IFwic2Nyb2xsXCIuY29uY2F0KHRvcCA/ICdUb3AnIDogJ0xlZnQnKTtcblxuICBpZiAodHlwZW9mIHJldCAhPT0gJ251bWJlcicpIHtcbiAgICB2YXIgZCA9IHcuZG9jdW1lbnQ7IC8vIGllNiw3LDggc3RhbmRhcmQgbW9kZVxuXG4gICAgcmV0ID0gZC5kb2N1bWVudEVsZW1lbnRbbWV0aG9kXTtcblxuICAgIGlmICh0eXBlb2YgcmV0ICE9PSAnbnVtYmVyJykge1xuICAgICAgLy8gcXVpcmtzIG1vZGVcbiAgICAgIHJldCA9IGQuYm9keVttZXRob2RdO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGdldFNjcm9sbExlZnQodykge1xuICByZXR1cm4gZ2V0U2Nyb2xsKHcpO1xufVxuXG5mdW5jdGlvbiBnZXRTY3JvbGxUb3Aodykge1xuICByZXR1cm4gZ2V0U2Nyb2xsKHcsIHRydWUpO1xufVxuXG5mdW5jdGlvbiBnZXRPZmZzZXQoZWwpIHtcbiAgdmFyIHBvcyA9IGdldENsaWVudFBvc2l0aW9uKGVsKTtcbiAgdmFyIGRvYyA9IGVsLm93bmVyRG9jdW1lbnQ7XG4gIHZhciB3ID0gZG9jLmRlZmF1bHRWaWV3IHx8IGRvYy5wYXJlbnRXaW5kb3c7XG4gIHBvcy5sZWZ0ICs9IGdldFNjcm9sbExlZnQodyk7XG4gIHBvcy50b3AgKz0gZ2V0U2Nyb2xsVG9wKHcpO1xuICByZXR1cm4gcG9zO1xufVxuLyoqXG4gKiBBIGNydWRlIHdheSBvZiBkZXRlcm1pbmluZyBpZiBhbiBvYmplY3QgaXMgYSB3aW5kb3dcbiAqIEBtZW1iZXIgdXRpbFxuICovXG5cblxuZnVuY3Rpb24gaXNXaW5kb3cob2JqKSB7XG4gIC8vIG11c3QgdXNlID09IGZvciBpZThcblxuICAvKiBlc2xpbnQgZXFlcWVxOjAgKi9cbiAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiBvYmogIT09IHVuZGVmaW5lZCAmJiBvYmogPT0gb2JqLndpbmRvdztcbn1cblxuZnVuY3Rpb24gZ2V0RG9jdW1lbnQobm9kZSkge1xuICBpZiAoaXNXaW5kb3cobm9kZSkpIHtcbiAgICByZXR1cm4gbm9kZS5kb2N1bWVudDtcbiAgfVxuXG4gIGlmIChub2RlLm5vZGVUeXBlID09PSA5KSB7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICByZXR1cm4gbm9kZS5vd25lckRvY3VtZW50O1xufVxuXG5mdW5jdGlvbiBfZ2V0Q29tcHV0ZWRTdHlsZShlbGVtLCBuYW1lLCBjcykge1xuICB2YXIgY29tcHV0ZWRTdHlsZSA9IGNzO1xuICB2YXIgdmFsID0gJyc7XG4gIHZhciBkID0gZ2V0RG9jdW1lbnQoZWxlbSk7XG4gIGNvbXB1dGVkU3R5bGUgPSBjb21wdXRlZFN0eWxlIHx8IGQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtLCBudWxsKTsgLy8gaHR0cHM6Ly9naXRodWIuY29tL2tpc3N5dGVhbS9raXNzeS9pc3N1ZXMvNjFcblxuICBpZiAoY29tcHV0ZWRTdHlsZSkge1xuICAgIHZhbCA9IGNvbXB1dGVkU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKSB8fCBjb21wdXRlZFN0eWxlW25hbWVdO1xuICB9XG5cbiAgcmV0dXJuIHZhbDtcbn1cblxudmFyIF9SRV9OVU1fTk9fUFggPSBuZXcgUmVnRXhwKFwiXihcIi5jb25jYXQoUkVfTlVNLCBcIikoPyFweClbYS16JV0rJFwiKSwgJ2knKTtcblxudmFyIFJFX1BPUyA9IC9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkLztcbnZhciBDVVJSRU5UX1NUWUxFID0gJ2N1cnJlbnRTdHlsZSc7XG52YXIgUlVOVElNRV9TVFlMRSA9ICdydW50aW1lU3R5bGUnO1xudmFyIExFRlQgPSAnbGVmdCc7XG52YXIgUFggPSAncHgnO1xuXG5mdW5jdGlvbiBfZ2V0Q29tcHV0ZWRTdHlsZUlFKGVsZW0sIG5hbWUpIHtcbiAgLy8gY3VycmVudFN0eWxlIG1heWJlIG51bGxcbiAgLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L21zNTM1MjMxLmFzcHhcbiAgdmFyIHJldCA9IGVsZW1bQ1VSUkVOVF9TVFlMRV0gJiYgZWxlbVtDVVJSRU5UX1NUWUxFXVtuYW1lXTsgLy8g5b2TIHdpZHRoL2hlaWdodCDorr7nva7kuLrnmb7liIbmr5Tml7bvvIzpgJrov4cgcGl4ZWxMZWZ0IOaWueW8j+i9rOaNoueahCB3aWR0aC9oZWlnaHQg5YC8XG4gIC8vIOS4gOW8gOWni+WwseWkhOeQhuS6hiEgQ1VTVE9NX1NUWUxFLmhlaWdodCxDVVNUT01fU1RZTEUud2lkdGggLGNzc0hvb2sg6Kej5YazQDIwMTEtMDgtMTlcbiAgLy8g5ZyoIGllIOS4i+S4jeWvue+8jOmcgOimgeebtOaOpeeUqCBvZmZzZXQg5pa55byPXG4gIC8vIGJvcmRlcldpZHRoIOetieWAvOS5n+aciemXrumimO+8jOS9huiAg+iZkeWIsCBib3JkZXJXaWR0aCDorr7kuLrnmb7liIbmr5TnmoTmpoLnjoflvojlsI/vvIzov5nph4zlsLHkuI3ogIPomZHkuoZcbiAgLy8gRnJvbSB0aGUgYXdlc29tZSBoYWNrIGJ5IERlYW4gRWR3YXJkc1xuICAvLyBodHRwOi8vZXJpay5lYWUubmV0L2FyY2hpdmVzLzIwMDcvMDcvMjcvMTguNTQuMTUvI2NvbW1lbnQtMTAyMjkxXG4gIC8vIElmIHdlJ3JlIG5vdCBkZWFsaW5nIHdpdGggYSByZWd1bGFyIHBpeGVsIG51bWJlclxuICAvLyBidXQgYSBudW1iZXIgdGhhdCBoYXMgYSB3ZWlyZCBlbmRpbmcsIHdlIG5lZWQgdG8gY29udmVydCBpdCB0byBwaXhlbHNcbiAgLy8gZXhjbHVkZSBsZWZ0IHJpZ2h0IGZvciByZWxhdGl2aXR5XG5cbiAgaWYgKF9SRV9OVU1fTk9fUFgudGVzdChyZXQpICYmICFSRV9QT1MudGVzdChuYW1lKSkge1xuICAgIC8vIFJlbWVtYmVyIHRoZSBvcmlnaW5hbCB2YWx1ZXNcbiAgICB2YXIgc3R5bGUgPSBlbGVtLnN0eWxlO1xuICAgIHZhciBsZWZ0ID0gc3R5bGVbTEVGVF07XG4gICAgdmFyIHJzTGVmdCA9IGVsZW1bUlVOVElNRV9TVFlMRV1bTEVGVF07IC8vIHByZXZlbnQgZmxhc2hpbmcgb2YgY29udGVudFxuXG4gICAgZWxlbVtSVU5USU1FX1NUWUxFXVtMRUZUXSA9IGVsZW1bQ1VSUkVOVF9TVFlMRV1bTEVGVF07IC8vIFB1dCBpbiB0aGUgbmV3IHZhbHVlcyB0byBnZXQgYSBjb21wdXRlZCB2YWx1ZSBvdXRcblxuICAgIHN0eWxlW0xFRlRdID0gbmFtZSA9PT0gJ2ZvbnRTaXplJyA/ICcxZW0nIDogcmV0IHx8IDA7XG4gICAgcmV0ID0gc3R5bGUucGl4ZWxMZWZ0ICsgUFg7IC8vIFJldmVydCB0aGUgY2hhbmdlZCB2YWx1ZXNcblxuICAgIHN0eWxlW0xFRlRdID0gbGVmdDtcbiAgICBlbGVtW1JVTlRJTUVfU1RZTEVdW0xFRlRdID0gcnNMZWZ0O1xuICB9XG5cbiAgcmV0dXJuIHJldCA9PT0gJycgPyAnYXV0bycgOiByZXQ7XG59XG5cbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICBnZXRDb21wdXRlZFN0eWxlWCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlID8gX2dldENvbXB1dGVkU3R5bGUgOiBfZ2V0Q29tcHV0ZWRTdHlsZUlFO1xufVxuXG5mdW5jdGlvbiBnZXRPZmZzZXREaXJlY3Rpb24oZGlyLCBvcHRpb24pIHtcbiAgaWYgKGRpciA9PT0gJ2xlZnQnKSB7XG4gICAgcmV0dXJuIG9wdGlvbi51c2VDc3NSaWdodCA/ICdyaWdodCcgOiBkaXI7XG4gIH1cblxuICByZXR1cm4gb3B0aW9uLnVzZUNzc0JvdHRvbSA/ICdib3R0b20nIDogZGlyO1xufVxuXG5mdW5jdGlvbiBvcHBvc2l0ZU9mZnNldERpcmVjdGlvbihkaXIpIHtcbiAgaWYgKGRpciA9PT0gJ2xlZnQnKSB7XG4gICAgcmV0dXJuICdyaWdodCc7XG4gIH0gZWxzZSBpZiAoZGlyID09PSAncmlnaHQnKSB7XG4gICAgcmV0dXJuICdsZWZ0JztcbiAgfSBlbHNlIGlmIChkaXIgPT09ICd0b3AnKSB7XG4gICAgcmV0dXJuICdib3R0b20nO1xuICB9IGVsc2UgaWYgKGRpciA9PT0gJ2JvdHRvbScpIHtcbiAgICByZXR1cm4gJ3RvcCc7XG4gIH1cbn0gLy8g6K6+572uIGVsZW0g55u45a+5IGVsZW0ub3duZXJEb2N1bWVudCDnmoTlnZDmoIdcblxuXG5mdW5jdGlvbiBzZXRMZWZ0VG9wKGVsZW0sIG9mZnNldCwgb3B0aW9uKSB7XG4gIC8vIHNldCBwb3NpdGlvbiBmaXJzdCwgaW4tY2FzZSB0b3AvbGVmdCBhcmUgc2V0IGV2ZW4gb24gc3RhdGljIGVsZW1cbiAgaWYgKGNzcyhlbGVtLCAncG9zaXRpb24nKSA9PT0gJ3N0YXRpYycpIHtcbiAgICBlbGVtLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgfVxuXG4gIHZhciBwcmVzZXRIID0gLTk5OTtcbiAgdmFyIHByZXNldFYgPSAtOTk5O1xuICB2YXIgaG9yaXpvbnRhbFByb3BlcnR5ID0gZ2V0T2Zmc2V0RGlyZWN0aW9uKCdsZWZ0Jywgb3B0aW9uKTtcbiAgdmFyIHZlcnRpY2FsUHJvcGVydHkgPSBnZXRPZmZzZXREaXJlY3Rpb24oJ3RvcCcsIG9wdGlvbik7XG4gIHZhciBvcHBvc2l0ZUhvcml6b250YWxQcm9wZXJ0eSA9IG9wcG9zaXRlT2Zmc2V0RGlyZWN0aW9uKGhvcml6b250YWxQcm9wZXJ0eSk7XG4gIHZhciBvcHBvc2l0ZVZlcnRpY2FsUHJvcGVydHkgPSBvcHBvc2l0ZU9mZnNldERpcmVjdGlvbih2ZXJ0aWNhbFByb3BlcnR5KTtcblxuICBpZiAoaG9yaXpvbnRhbFByb3BlcnR5ICE9PSAnbGVmdCcpIHtcbiAgICBwcmVzZXRIID0gOTk5O1xuICB9XG5cbiAgaWYgKHZlcnRpY2FsUHJvcGVydHkgIT09ICd0b3AnKSB7XG4gICAgcHJlc2V0ViA9IDk5OTtcbiAgfVxuXG4gIHZhciBvcmlnaW5hbFRyYW5zaXRpb24gPSAnJztcbiAgdmFyIG9yaWdpbmFsT2Zmc2V0ID0gZ2V0T2Zmc2V0KGVsZW0pO1xuXG4gIGlmICgnbGVmdCcgaW4gb2Zmc2V0IHx8ICd0b3AnIGluIG9mZnNldCkge1xuICAgIG9yaWdpbmFsVHJhbnNpdGlvbiA9IGdldFRyYW5zaXRpb25Qcm9wZXJ0eShlbGVtKSB8fCAnJztcbiAgICBzZXRUcmFuc2l0aW9uUHJvcGVydHkoZWxlbSwgJ25vbmUnKTtcbiAgfVxuXG4gIGlmICgnbGVmdCcgaW4gb2Zmc2V0KSB7XG4gICAgZWxlbS5zdHlsZVtvcHBvc2l0ZUhvcml6b250YWxQcm9wZXJ0eV0gPSAnJztcbiAgICBlbGVtLnN0eWxlW2hvcml6b250YWxQcm9wZXJ0eV0gPSBcIlwiLmNvbmNhdChwcmVzZXRILCBcInB4XCIpO1xuICB9XG5cbiAgaWYgKCd0b3AnIGluIG9mZnNldCkge1xuICAgIGVsZW0uc3R5bGVbb3Bwb3NpdGVWZXJ0aWNhbFByb3BlcnR5XSA9ICcnO1xuICAgIGVsZW0uc3R5bGVbdmVydGljYWxQcm9wZXJ0eV0gPSBcIlwiLmNvbmNhdChwcmVzZXRWLCBcInB4XCIpO1xuICB9IC8vIGZvcmNlIHJlbGF5b3V0XG5cblxuICBmb3JjZVJlbGF5b3V0KGVsZW0pO1xuICB2YXIgb2xkID0gZ2V0T2Zmc2V0KGVsZW0pO1xuICB2YXIgb3JpZ2luYWxTdHlsZSA9IHt9O1xuXG4gIGZvciAodmFyIGtleSBpbiBvZmZzZXQpIHtcbiAgICBpZiAob2Zmc2V0Lmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHZhciBkaXIgPSBnZXRPZmZzZXREaXJlY3Rpb24oa2V5LCBvcHRpb24pO1xuICAgICAgdmFyIHByZXNldCA9IGtleSA9PT0gJ2xlZnQnID8gcHJlc2V0SCA6IHByZXNldFY7XG4gICAgICB2YXIgb2ZmID0gb3JpZ2luYWxPZmZzZXRba2V5XSAtIG9sZFtrZXldO1xuXG4gICAgICBpZiAoZGlyID09PSBrZXkpIHtcbiAgICAgICAgb3JpZ2luYWxTdHlsZVtkaXJdID0gcHJlc2V0ICsgb2ZmO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3JpZ2luYWxTdHlsZVtkaXJdID0gcHJlc2V0IC0gb2ZmO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNzcyhlbGVtLCBvcmlnaW5hbFN0eWxlKTsgLy8gZm9yY2UgcmVsYXlvdXRcblxuICBmb3JjZVJlbGF5b3V0KGVsZW0pO1xuXG4gIGlmICgnbGVmdCcgaW4gb2Zmc2V0IHx8ICd0b3AnIGluIG9mZnNldCkge1xuICAgIHNldFRyYW5zaXRpb25Qcm9wZXJ0eShlbGVtLCBvcmlnaW5hbFRyYW5zaXRpb24pO1xuICB9XG5cbiAgdmFyIHJldCA9IHt9O1xuXG4gIGZvciAodmFyIF9rZXkgaW4gb2Zmc2V0KSB7XG4gICAgaWYgKG9mZnNldC5oYXNPd25Qcm9wZXJ0eShfa2V5KSkge1xuICAgICAgdmFyIF9kaXIgPSBnZXRPZmZzZXREaXJlY3Rpb24oX2tleSwgb3B0aW9uKTtcblxuICAgICAgdmFyIF9vZmYgPSBvZmZzZXRbX2tleV0gLSBvcmlnaW5hbE9mZnNldFtfa2V5XTtcblxuICAgICAgaWYgKF9rZXkgPT09IF9kaXIpIHtcbiAgICAgICAgcmV0W19kaXJdID0gb3JpZ2luYWxTdHlsZVtfZGlyXSArIF9vZmY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXRbX2Rpcl0gPSBvcmlnaW5hbFN0eWxlW19kaXJdIC0gX29mZjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjc3MoZWxlbSwgcmV0KTtcbn1cblxuZnVuY3Rpb24gc2V0VHJhbnNmb3JtJDEoZWxlbSwgb2Zmc2V0KSB7XG4gIHZhciBvcmlnaW5hbE9mZnNldCA9IGdldE9mZnNldChlbGVtKTtcbiAgdmFyIG9yaWdpbmFsWFkgPSBnZXRUcmFuc2Zvcm1YWShlbGVtKTtcbiAgdmFyIHJlc3VsdFhZID0ge1xuICAgIHg6IG9yaWdpbmFsWFkueCxcbiAgICB5OiBvcmlnaW5hbFhZLnlcbiAgfTtcblxuICBpZiAoJ2xlZnQnIGluIG9mZnNldCkge1xuICAgIHJlc3VsdFhZLnggPSBvcmlnaW5hbFhZLnggKyBvZmZzZXQubGVmdCAtIG9yaWdpbmFsT2Zmc2V0LmxlZnQ7XG4gIH1cblxuICBpZiAoJ3RvcCcgaW4gb2Zmc2V0KSB7XG4gICAgcmVzdWx0WFkueSA9IG9yaWdpbmFsWFkueSArIG9mZnNldC50b3AgLSBvcmlnaW5hbE9mZnNldC50b3A7XG4gIH1cblxuICBzZXRUcmFuc2Zvcm1YWShlbGVtLCByZXN1bHRYWSk7XG59XG5cbmZ1bmN0aW9uIHNldE9mZnNldChlbGVtLCBvZmZzZXQsIG9wdGlvbikge1xuICBpZiAob3B0aW9uLmlnbm9yZVNoYWtlKSB7XG4gICAgdmFyIG9yaU9mZnNldCA9IGdldE9mZnNldChlbGVtKTtcbiAgICB2YXIgb0xlZnQgPSBvcmlPZmZzZXQubGVmdC50b0ZpeGVkKDApO1xuICAgIHZhciBvVG9wID0gb3JpT2Zmc2V0LnRvcC50b0ZpeGVkKDApO1xuICAgIHZhciB0TGVmdCA9IG9mZnNldC5sZWZ0LnRvRml4ZWQoMCk7XG4gICAgdmFyIHRUb3AgPSBvZmZzZXQudG9wLnRvRml4ZWQoMCk7XG5cbiAgICBpZiAob0xlZnQgPT09IHRMZWZ0ICYmIG9Ub3AgPT09IHRUb3ApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBpZiAob3B0aW9uLnVzZUNzc1JpZ2h0IHx8IG9wdGlvbi51c2VDc3NCb3R0b20pIHtcbiAgICBzZXRMZWZ0VG9wKGVsZW0sIG9mZnNldCwgb3B0aW9uKTtcbiAgfSBlbHNlIGlmIChvcHRpb24udXNlQ3NzVHJhbnNmb3JtICYmIGdldFRyYW5zZm9ybU5hbWUoKSBpbiBkb2N1bWVudC5ib2R5LnN0eWxlKSB7XG4gICAgc2V0VHJhbnNmb3JtJDEoZWxlbSwgb2Zmc2V0KTtcbiAgfSBlbHNlIHtcbiAgICBzZXRMZWZ0VG9wKGVsZW0sIG9mZnNldCwgb3B0aW9uKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBlYWNoKGFyciwgZm4pIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICBmbihhcnJbaV0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzQm9yZGVyQm94Rm4oZWxlbSkge1xuICByZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZVgoZWxlbSwgJ2JveFNpemluZycpID09PSAnYm9yZGVyLWJveCc7XG59XG5cbnZhciBCT1hfTU9ERUxTID0gWydtYXJnaW4nLCAnYm9yZGVyJywgJ3BhZGRpbmcnXTtcbnZhciBDT05URU5UX0lOREVYID0gLTE7XG52YXIgUEFERElOR19JTkRFWCA9IDI7XG52YXIgQk9SREVSX0lOREVYID0gMTtcbnZhciBNQVJHSU5fSU5ERVggPSAwO1xuXG5mdW5jdGlvbiBzd2FwKGVsZW0sIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIHZhciBvbGQgPSB7fTtcbiAgdmFyIHN0eWxlID0gZWxlbS5zdHlsZTtcbiAgdmFyIG5hbWU7IC8vIFJlbWVtYmVyIHRoZSBvbGQgdmFsdWVzLCBhbmQgaW5zZXJ0IHRoZSBuZXcgb25lc1xuXG4gIGZvciAobmFtZSBpbiBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgIG9sZFtuYW1lXSA9IHN0eWxlW25hbWVdO1xuICAgICAgc3R5bGVbbmFtZV0gPSBvcHRpb25zW25hbWVdO1xuICAgIH1cbiAgfVxuXG4gIGNhbGxiYWNrLmNhbGwoZWxlbSk7IC8vIFJldmVydCB0aGUgb2xkIHZhbHVlc1xuXG4gIGZvciAobmFtZSBpbiBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgIHN0eWxlW25hbWVdID0gb2xkW25hbWVdO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRQQk1XaWR0aChlbGVtLCBwcm9wcywgd2hpY2gpIHtcbiAgdmFyIHZhbHVlID0gMDtcbiAgdmFyIHByb3A7XG4gIHZhciBqO1xuICB2YXIgaTtcblxuICBmb3IgKGogPSAwOyBqIDwgcHJvcHMubGVuZ3RoOyBqKyspIHtcbiAgICBwcm9wID0gcHJvcHNbal07XG5cbiAgICBpZiAocHJvcCkge1xuICAgICAgZm9yIChpID0gMDsgaSA8IHdoaWNoLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjc3NQcm9wID0gdm9pZCAwO1xuXG4gICAgICAgIGlmIChwcm9wID09PSAnYm9yZGVyJykge1xuICAgICAgICAgIGNzc1Byb3AgPSBcIlwiLmNvbmNhdChwcm9wKS5jb25jYXQod2hpY2hbaV0sIFwiV2lkdGhcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3NzUHJvcCA9IHByb3AgKyB3aGljaFtpXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhbHVlICs9IHBhcnNlRmxvYXQoZ2V0Q29tcHV0ZWRTdHlsZVgoZWxlbSwgY3NzUHJvcCkpIHx8IDA7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG52YXIgZG9tVXRpbHMgPSB7XG4gIGdldFBhcmVudDogZnVuY3Rpb24gZ2V0UGFyZW50KGVsZW1lbnQpIHtcbiAgICB2YXIgcGFyZW50ID0gZWxlbWVudDtcblxuICAgIGRvIHtcbiAgICAgIGlmIChwYXJlbnQubm9kZVR5cGUgPT09IDExICYmIHBhcmVudC5ob3N0KSB7XG4gICAgICAgIHBhcmVudCA9IHBhcmVudC5ob3N0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG4gICAgICB9XG4gICAgfSB3aGlsZSAocGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSAhPT0gMSAmJiBwYXJlbnQubm9kZVR5cGUgIT09IDkpO1xuXG4gICAgcmV0dXJuIHBhcmVudDtcbiAgfVxufTtcbmVhY2goWydXaWR0aCcsICdIZWlnaHQnXSwgZnVuY3Rpb24gKG5hbWUpIHtcbiAgZG9tVXRpbHNbXCJkb2NcIi5jb25jYXQobmFtZSldID0gZnVuY3Rpb24gKHJlZldpbikge1xuICAgIHZhciBkID0gcmVmV2luLmRvY3VtZW50O1xuICAgIHJldHVybiBNYXRoLm1heCggLy8gZmlyZWZveCBjaHJvbWUgZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodDwgYm9keS5zY3JvbGxIZWlnaHRcbiAgICAvLyBpZSBzdGFuZGFyZCBtb2RlIDogZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodD4gYm9keS5zY3JvbGxIZWlnaHRcbiAgICBkLmRvY3VtZW50RWxlbWVudFtcInNjcm9sbFwiLmNvbmNhdChuYW1lKV0sIC8vIHF1aXJrcyA6IGRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQg5pyA5aSn562J5LqO5Y+v6KeG56qX5Y+j5aSa5LiA54K577yfXG4gICAgZC5ib2R5W1wic2Nyb2xsXCIuY29uY2F0KG5hbWUpXSwgZG9tVXRpbHNbXCJ2aWV3cG9ydFwiLmNvbmNhdChuYW1lKV0oZCkpO1xuICB9O1xuXG4gIGRvbVV0aWxzW1widmlld3BvcnRcIi5jb25jYXQobmFtZSldID0gZnVuY3Rpb24gKHdpbikge1xuICAgIC8vIHBjIGJyb3dzZXIgaW5jbHVkZXMgc2Nyb2xsYmFyIGluIHdpbmRvdy5pbm5lcldpZHRoXG4gICAgdmFyIHByb3AgPSBcImNsaWVudFwiLmNvbmNhdChuYW1lKTtcbiAgICB2YXIgZG9jID0gd2luLmRvY3VtZW50O1xuICAgIHZhciBib2R5ID0gZG9jLmJvZHk7XG4gICAgdmFyIGRvY3VtZW50RWxlbWVudCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgdmFyIGRvY3VtZW50RWxlbWVudFByb3AgPSBkb2N1bWVudEVsZW1lbnRbcHJvcF07IC8vIOagh+WHhuaooeW8j+WPliBkb2N1bWVudEVsZW1lbnRcbiAgICAvLyBiYWNrY29tcGF0IOWPliBib2R5XG5cbiAgICByZXR1cm4gZG9jLmNvbXBhdE1vZGUgPT09ICdDU1MxQ29tcGF0JyAmJiBkb2N1bWVudEVsZW1lbnRQcm9wIHx8IGJvZHkgJiYgYm9keVtwcm9wXSB8fCBkb2N1bWVudEVsZW1lbnRQcm9wO1xuICB9O1xufSk7XG4vKlxuIOW+l+WIsOWFg+e0oOeahOWkp+Wwj+S/oeaBr1xuIEBwYXJhbSBlbGVtXG4gQHBhcmFtIG5hbWVcbiBAcGFyYW0ge1N0cmluZ30gW2V4dHJhXSAgJ3BhZGRpbmcnIDogKGNzcyB3aWR0aCkgKyBwYWRkaW5nXG4gJ2JvcmRlcicgOiAoY3NzIHdpZHRoKSArIHBhZGRpbmcgKyBib3JkZXJcbiAnbWFyZ2luJyA6IChjc3Mgd2lkdGgpICsgcGFkZGluZyArIGJvcmRlciArIG1hcmdpblxuICovXG5cbmZ1bmN0aW9uIGdldFdIKGVsZW0sIG5hbWUsIGV4KSB7XG4gIHZhciBleHRyYSA9IGV4O1xuXG4gIGlmIChpc1dpbmRvdyhlbGVtKSkge1xuICAgIHJldHVybiBuYW1lID09PSAnd2lkdGgnID8gZG9tVXRpbHMudmlld3BvcnRXaWR0aChlbGVtKSA6IGRvbVV0aWxzLnZpZXdwb3J0SGVpZ2h0KGVsZW0pO1xuICB9IGVsc2UgaWYgKGVsZW0ubm9kZVR5cGUgPT09IDkpIHtcbiAgICByZXR1cm4gbmFtZSA9PT0gJ3dpZHRoJyA/IGRvbVV0aWxzLmRvY1dpZHRoKGVsZW0pIDogZG9tVXRpbHMuZG9jSGVpZ2h0KGVsZW0pO1xuICB9XG5cbiAgdmFyIHdoaWNoID0gbmFtZSA9PT0gJ3dpZHRoJyA/IFsnTGVmdCcsICdSaWdodCddIDogWydUb3AnLCAnQm90dG9tJ107XG4gIHZhciBib3JkZXJCb3hWYWx1ZSA9IG5hbWUgPT09ICd3aWR0aCcgPyBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIDogZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XG4gIHZhciBpc0JvcmRlckJveCA9IGlzQm9yZGVyQm94Rm4oZWxlbSk7XG4gIHZhciBjc3NCb3hWYWx1ZSA9IDA7XG5cbiAgaWYgKGJvcmRlckJveFZhbHVlID09PSBudWxsIHx8IGJvcmRlckJveFZhbHVlID09PSB1bmRlZmluZWQgfHwgYm9yZGVyQm94VmFsdWUgPD0gMCkge1xuICAgIGJvcmRlckJveFZhbHVlID0gdW5kZWZpbmVkOyAvLyBGYWxsIGJhY2sgdG8gY29tcHV0ZWQgdGhlbiB1biBjb21wdXRlZCBjc3MgaWYgbmVjZXNzYXJ5XG5cbiAgICBjc3NCb3hWYWx1ZSA9IGdldENvbXB1dGVkU3R5bGVYKGVsZW0sIG5hbWUpO1xuXG4gICAgaWYgKGNzc0JveFZhbHVlID09PSBudWxsIHx8IGNzc0JveFZhbHVlID09PSB1bmRlZmluZWQgfHwgTnVtYmVyKGNzc0JveFZhbHVlKSA8IDApIHtcbiAgICAgIGNzc0JveFZhbHVlID0gZWxlbS5zdHlsZVtuYW1lXSB8fCAwO1xuICAgIH0gLy8gTm9ybWFsaXplICcnLCBhdXRvLCBhbmQgcHJlcGFyZSBmb3IgZXh0cmFcblxuXG4gICAgY3NzQm94VmFsdWUgPSBwYXJzZUZsb2F0KGNzc0JveFZhbHVlKSB8fCAwO1xuICB9XG5cbiAgaWYgKGV4dHJhID09PSB1bmRlZmluZWQpIHtcbiAgICBleHRyYSA9IGlzQm9yZGVyQm94ID8gQk9SREVSX0lOREVYIDogQ09OVEVOVF9JTkRFWDtcbiAgfVxuXG4gIHZhciBib3JkZXJCb3hWYWx1ZU9ySXNCb3JkZXJCb3ggPSBib3JkZXJCb3hWYWx1ZSAhPT0gdW5kZWZpbmVkIHx8IGlzQm9yZGVyQm94O1xuICB2YXIgdmFsID0gYm9yZGVyQm94VmFsdWUgfHwgY3NzQm94VmFsdWU7XG5cbiAgaWYgKGV4dHJhID09PSBDT05URU5UX0lOREVYKSB7XG4gICAgaWYgKGJvcmRlckJveFZhbHVlT3JJc0JvcmRlckJveCkge1xuICAgICAgcmV0dXJuIHZhbCAtIGdldFBCTVdpZHRoKGVsZW0sIFsnYm9yZGVyJywgJ3BhZGRpbmcnXSwgd2hpY2gpO1xuICAgIH1cblxuICAgIHJldHVybiBjc3NCb3hWYWx1ZTtcbiAgfSBlbHNlIGlmIChib3JkZXJCb3hWYWx1ZU9ySXNCb3JkZXJCb3gpIHtcbiAgICBpZiAoZXh0cmEgPT09IEJPUkRFUl9JTkRFWCkge1xuICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsICsgKGV4dHJhID09PSBQQURESU5HX0lOREVYID8gLWdldFBCTVdpZHRoKGVsZW0sIFsnYm9yZGVyJ10sIHdoaWNoKSA6IGdldFBCTVdpZHRoKGVsZW0sIFsnbWFyZ2luJ10sIHdoaWNoKSk7XG4gIH1cblxuICByZXR1cm4gY3NzQm94VmFsdWUgKyBnZXRQQk1XaWR0aChlbGVtLCBCT1hfTU9ERUxTLnNsaWNlKGV4dHJhKSwgd2hpY2gpO1xufVxuXG52YXIgY3NzU2hvdyA9IHtcbiAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gIHZpc2liaWxpdHk6ICdoaWRkZW4nLFxuICBkaXNwbGF5OiAnYmxvY2snXG59OyAvLyBmaXggIzExOSA6IGh0dHBzOi8vZ2l0aHViLmNvbS9raXNzeXRlYW0va2lzc3kvaXNzdWVzLzExOVxuXG5mdW5jdGlvbiBnZXRXSElnbm9yZURpc3BsYXkoKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjsgX2tleTIrKykge1xuICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgfVxuXG4gIHZhciB2YWw7XG4gIHZhciBlbGVtID0gYXJnc1swXTsgLy8gaW4gY2FzZSBlbGVtIGlzIHdpbmRvd1xuICAvLyBlbGVtLm9mZnNldFdpZHRoID09PSB1bmRlZmluZWRcblxuICBpZiAoZWxlbS5vZmZzZXRXaWR0aCAhPT0gMCkge1xuICAgIHZhbCA9IGdldFdILmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgc3dhcChlbGVtLCBjc3NTaG93LCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YWwgPSBnZXRXSC5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHZhbDtcbn1cblxuZWFjaChbJ3dpZHRoJywgJ2hlaWdodCddLCBmdW5jdGlvbiAobmFtZSkge1xuICB2YXIgZmlyc3QgPSBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKTtcblxuICBkb21VdGlsc1tcIm91dGVyXCIuY29uY2F0KGZpcnN0KV0gPSBmdW5jdGlvbiAoZWwsIGluY2x1ZGVNYXJnaW4pIHtcbiAgICByZXR1cm4gZWwgJiYgZ2V0V0hJZ25vcmVEaXNwbGF5KGVsLCBuYW1lLCBpbmNsdWRlTWFyZ2luID8gTUFSR0lOX0lOREVYIDogQk9SREVSX0lOREVYKTtcbiAgfTtcblxuICB2YXIgd2hpY2ggPSBuYW1lID09PSAnd2lkdGgnID8gWydMZWZ0JywgJ1JpZ2h0J10gOiBbJ1RvcCcsICdCb3R0b20nXTtcblxuICBkb21VdGlsc1tuYW1lXSA9IGZ1bmN0aW9uIChlbGVtLCB2KSB7XG4gICAgdmFyIHZhbCA9IHY7XG5cbiAgICBpZiAodmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgIHZhciBpc0JvcmRlckJveCA9IGlzQm9yZGVyQm94Rm4oZWxlbSk7XG5cbiAgICAgICAgaWYgKGlzQm9yZGVyQm94KSB7XG4gICAgICAgICAgdmFsICs9IGdldFBCTVdpZHRoKGVsZW0sIFsncGFkZGluZycsICdib3JkZXInXSwgd2hpY2gpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNzcyhlbGVtLCBuYW1lLCB2YWwpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiBlbGVtICYmIGdldFdISWdub3JlRGlzcGxheShlbGVtLCBuYW1lLCBDT05URU5UX0lOREVYKTtcbiAgfTtcbn0pO1xuXG5mdW5jdGlvbiBtaXgodG8sIGZyb20pIHtcbiAgZm9yICh2YXIgaSBpbiBmcm9tKSB7XG4gICAgaWYgKGZyb20uaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgIHRvW2ldID0gZnJvbVtpXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdG87XG59XG5cbnZhciB1dGlscyA9IHtcbiAgZ2V0V2luZG93OiBmdW5jdGlvbiBnZXRXaW5kb3cobm9kZSkge1xuICAgIGlmIChub2RlICYmIG5vZGUuZG9jdW1lbnQgJiYgbm9kZS5zZXRUaW1lb3V0KSB7XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG5cbiAgICB2YXIgZG9jID0gbm9kZS5vd25lckRvY3VtZW50IHx8IG5vZGU7XG4gICAgcmV0dXJuIGRvYy5kZWZhdWx0VmlldyB8fCBkb2MucGFyZW50V2luZG93O1xuICB9LFxuICBnZXREb2N1bWVudDogZ2V0RG9jdW1lbnQsXG4gIG9mZnNldDogZnVuY3Rpb24gb2Zmc2V0KGVsLCB2YWx1ZSwgb3B0aW9uKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHNldE9mZnNldChlbCwgdmFsdWUsIG9wdGlvbiB8fCB7fSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBnZXRPZmZzZXQoZWwpO1xuICAgIH1cbiAgfSxcbiAgaXNXaW5kb3c6IGlzV2luZG93LFxuICBlYWNoOiBlYWNoLFxuICBjc3M6IGNzcyxcbiAgY2xvbmU6IGZ1bmN0aW9uIGNsb25lKG9iaikge1xuICAgIHZhciBpO1xuICAgIHZhciByZXQgPSB7fTtcblxuICAgIGZvciAoaSBpbiBvYmopIHtcbiAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgcmV0W2ldID0gb2JqW2ldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBvdmVyZmxvdyA9IG9iai5vdmVyZmxvdztcblxuICAgIGlmIChvdmVyZmxvdykge1xuICAgICAgZm9yIChpIGluIG9iaikge1xuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgcmV0Lm92ZXJmbG93W2ldID0gb2JqLm92ZXJmbG93W2ldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldDtcbiAgfSxcbiAgbWl4OiBtaXgsXG4gIGdldFdpbmRvd1Njcm9sbExlZnQ6IGZ1bmN0aW9uIGdldFdpbmRvd1Njcm9sbExlZnQodykge1xuICAgIHJldHVybiBnZXRTY3JvbGxMZWZ0KHcpO1xuICB9LFxuICBnZXRXaW5kb3dTY3JvbGxUb3A6IGZ1bmN0aW9uIGdldFdpbmRvd1Njcm9sbFRvcCh3KSB7XG4gICAgcmV0dXJuIGdldFNjcm9sbFRvcCh3KTtcbiAgfSxcbiAgbWVyZ2U6IGZ1bmN0aW9uIG1lcmdlKCkge1xuICAgIHZhciByZXQgPSB7fTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB1dGlscy5taXgocmV0LCBpIDwgMCB8fCBhcmd1bWVudHMubGVuZ3RoIDw9IGkgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbaV0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG4gIH0sXG4gIHZpZXdwb3J0V2lkdGg6IDAsXG4gIHZpZXdwb3J0SGVpZ2h0OiAwXG59O1xubWl4KHV0aWxzLCBkb21VdGlscyk7XG5cbi8qKlxuICog5b6X5Yiw5Lya5a+86Ie05YWD57Sg5pi+56S65LiN5YWo55qE56WW5YWI5YWD57SgXG4gKi9cblxudmFyIGdldFBhcmVudCA9IHV0aWxzLmdldFBhcmVudDtcblxuZnVuY3Rpb24gZ2V0T2Zmc2V0UGFyZW50KGVsZW1lbnQpIHtcbiAgaWYgKHV0aWxzLmlzV2luZG93KGVsZW1lbnQpIHx8IGVsZW1lbnQubm9kZVR5cGUgPT09IDkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSAvLyBpZSDov5nkuKrkuZ/kuI3mmK/lrozlhajlj6/ooYxcblxuICAvKlxuICAgPGRpdiBzdHlsZT1cIndpZHRoOiA1MHB4O2hlaWdodDogMTAwcHg7b3ZlcmZsb3c6IGhpZGRlblwiPlxuICAgPGRpdiBzdHlsZT1cIndpZHRoOiA1MHB4O2hlaWdodDogMTAwcHg7cG9zaXRpb246IHJlbGF0aXZlO1wiIGlkPVwiZDZcIj5cbiAgIOWFg+e0oCA2IOmrmCAxMDBweCDlrr0gNTBweDxici8+XG4gICA8L2Rpdj5cbiAgIDwvZGl2PlxuICAgKi9cbiAgLy8gZWxlbWVudC5vZmZzZXRQYXJlbnQgZG9lcyB0aGUgcmlnaHQgdGhpbmcgaW4gaWU3IGFuZCBiZWxvdy4gUmV0dXJuIHBhcmVudCB3aXRoIGxheW91dCFcbiAgLy8gIEluIG90aGVyIGJyb3dzZXJzIGl0IG9ubHkgaW5jbHVkZXMgZWxlbWVudHMgd2l0aCBwb3NpdGlvbiBhYnNvbHV0ZSwgcmVsYXRpdmUgb3JcbiAgLy8gZml4ZWQsIG5vdCBlbGVtZW50cyB3aXRoIG92ZXJmbG93IHNldCB0byBhdXRvIG9yIHNjcm9sbC5cbiAgLy8gICAgICAgIGlmIChVQS5pZSAmJiBpZU1vZGUgPCA4KSB7XG4gIC8vICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0UGFyZW50O1xuICAvLyAgICAgICAgfVxuICAvLyDnu5/kuIDnmoQgb2Zmc2V0UGFyZW50IOaWueazlVxuXG5cbiAgdmFyIGRvYyA9IHV0aWxzLmdldERvY3VtZW50KGVsZW1lbnQpO1xuICB2YXIgYm9keSA9IGRvYy5ib2R5O1xuICB2YXIgcGFyZW50O1xuICB2YXIgcG9zaXRpb25TdHlsZSA9IHV0aWxzLmNzcyhlbGVtZW50LCAncG9zaXRpb24nKTtcbiAgdmFyIHNraXBTdGF0aWMgPSBwb3NpdGlvblN0eWxlID09PSAnZml4ZWQnIHx8IHBvc2l0aW9uU3R5bGUgPT09ICdhYnNvbHV0ZSc7XG5cbiAgaWYgKCFza2lwU3RhdGljKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2h0bWwnID8gbnVsbCA6IGdldFBhcmVudChlbGVtZW50KTtcbiAgfVxuXG4gIGZvciAocGFyZW50ID0gZ2V0UGFyZW50KGVsZW1lbnQpOyBwYXJlbnQgJiYgcGFyZW50ICE9PSBib2R5ICYmIHBhcmVudC5ub2RlVHlwZSAhPT0gOTsgcGFyZW50ID0gZ2V0UGFyZW50KHBhcmVudCkpIHtcbiAgICBwb3NpdGlvblN0eWxlID0gdXRpbHMuY3NzKHBhcmVudCwgJ3Bvc2l0aW9uJyk7XG5cbiAgICBpZiAocG9zaXRpb25TdHlsZSAhPT0gJ3N0YXRpYycpIHtcbiAgICAgIHJldHVybiBwYXJlbnQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbnZhciBnZXRQYXJlbnQkMSA9IHV0aWxzLmdldFBhcmVudDtcbmZ1bmN0aW9uIGlzQW5jZXN0b3JGaXhlZChlbGVtZW50KSB7XG4gIGlmICh1dGlscy5pc1dpbmRvdyhlbGVtZW50KSB8fCBlbGVtZW50Lm5vZGVUeXBlID09PSA5KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIGRvYyA9IHV0aWxzLmdldERvY3VtZW50KGVsZW1lbnQpO1xuICB2YXIgYm9keSA9IGRvYy5ib2R5O1xuICB2YXIgcGFyZW50ID0gbnVsbDtcblxuICBmb3IgKHBhcmVudCA9IGdldFBhcmVudCQxKGVsZW1lbnQpOyAvLyDkv67lpI3lhYPntKDkvY3kuo4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IOS4i+WvvOiHtOW0qea6g+mXrumimFxuICBwYXJlbnQgJiYgcGFyZW50ICE9PSBib2R5ICYmIHBhcmVudCAhPT0gZG9jOyBwYXJlbnQgPSBnZXRQYXJlbnQkMShwYXJlbnQpKSB7XG4gICAgdmFyIHBvc2l0aW9uU3R5bGUgPSB1dGlscy5jc3MocGFyZW50LCAncG9zaXRpb24nKTtcblxuICAgIGlmIChwb3NpdGlvblN0eWxlID09PSAnZml4ZWQnKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICog6I635b6X5YWD57Sg55qE5pi+56S66YOo5YiG55qE5Yy65Z+fXG4gKi9cblxuZnVuY3Rpb24gZ2V0VmlzaWJsZVJlY3RGb3JFbGVtZW50KGVsZW1lbnQsIGFsd2F5c0J5Vmlld3BvcnQpIHtcbiAgdmFyIHZpc2libGVSZWN0ID0ge1xuICAgIGxlZnQ6IDAsXG4gICAgcmlnaHQ6IEluZmluaXR5LFxuICAgIHRvcDogMCxcbiAgICBib3R0b206IEluZmluaXR5XG4gIH07XG4gIHZhciBlbCA9IGdldE9mZnNldFBhcmVudChlbGVtZW50KTtcbiAgdmFyIGRvYyA9IHV0aWxzLmdldERvY3VtZW50KGVsZW1lbnQpO1xuICB2YXIgd2luID0gZG9jLmRlZmF1bHRWaWV3IHx8IGRvYy5wYXJlbnRXaW5kb3c7XG4gIHZhciBib2R5ID0gZG9jLmJvZHk7XG4gIHZhciBkb2N1bWVudEVsZW1lbnQgPSBkb2MuZG9jdW1lbnRFbGVtZW50OyAvLyBEZXRlcm1pbmUgdGhlIHNpemUgb2YgdGhlIHZpc2libGUgcmVjdCBieSBjbGltYmluZyB0aGUgZG9tIGFjY291bnRpbmcgZm9yXG4gIC8vIGFsbCBzY3JvbGxhYmxlIGNvbnRhaW5lcnMuXG5cbiAgd2hpbGUgKGVsKSB7XG4gICAgLy8gY2xpZW50V2lkdGggaXMgemVybyBmb3IgaW5saW5lIGJsb2NrIGVsZW1lbnRzIGluIGllLlxuICAgIGlmICgobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdNU0lFJykgPT09IC0xIHx8IGVsLmNsaWVudFdpZHRoICE9PSAwKSAmJiAvLyBib2R5IG1heSBoYXZlIG92ZXJmbG93IHNldCBvbiBpdCwgeWV0IHdlIHN0aWxsIGdldCB0aGUgZW50aXJlXG4gICAgLy8gdmlld3BvcnQuIEluIHNvbWUgYnJvd3NlcnMsIGVsLm9mZnNldFBhcmVudCBtYXkgYmVcbiAgICAvLyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIHNvIGNoZWNrIGZvciB0aGF0IHRvby5cbiAgICBlbCAhPT0gYm9keSAmJiBlbCAhPT0gZG9jdW1lbnRFbGVtZW50ICYmIHV0aWxzLmNzcyhlbCwgJ292ZXJmbG93JykgIT09ICd2aXNpYmxlJykge1xuICAgICAgdmFyIHBvcyA9IHV0aWxzLm9mZnNldChlbCk7IC8vIGFkZCBib3JkZXJcblxuICAgICAgcG9zLmxlZnQgKz0gZWwuY2xpZW50TGVmdDtcbiAgICAgIHBvcy50b3AgKz0gZWwuY2xpZW50VG9wO1xuICAgICAgdmlzaWJsZVJlY3QudG9wID0gTWF0aC5tYXgodmlzaWJsZVJlY3QudG9wLCBwb3MudG9wKTtcbiAgICAgIHZpc2libGVSZWN0LnJpZ2h0ID0gTWF0aC5taW4odmlzaWJsZVJlY3QucmlnaHQsIC8vIGNvbnNpZGVyIGFyZWEgd2l0aG91dCBzY3JvbGxCYXJcbiAgICAgIHBvcy5sZWZ0ICsgZWwuY2xpZW50V2lkdGgpO1xuICAgICAgdmlzaWJsZVJlY3QuYm90dG9tID0gTWF0aC5taW4odmlzaWJsZVJlY3QuYm90dG9tLCBwb3MudG9wICsgZWwuY2xpZW50SGVpZ2h0KTtcbiAgICAgIHZpc2libGVSZWN0LmxlZnQgPSBNYXRoLm1heCh2aXNpYmxlUmVjdC5sZWZ0LCBwb3MubGVmdCk7XG4gICAgfSBlbHNlIGlmIChlbCA9PT0gYm9keSB8fCBlbCA9PT0gZG9jdW1lbnRFbGVtZW50KSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBlbCA9IGdldE9mZnNldFBhcmVudChlbCk7XG4gIH0gLy8gU2V0IGVsZW1lbnQgcG9zaXRpb24gdG8gZml4ZWRcbiAgLy8gbWFrZSBzdXJlIGFic29sdXRlIGVsZW1lbnQgaXRzZWxmIGRvbid0IGFmZmVjdCBpdCdzIHZpc2libGUgYXJlYVxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW50LWRlc2lnbi9hbnQtZGVzaWduL2lzc3Vlcy83NjAxXG5cblxuICB2YXIgb3JpZ2luYWxQb3NpdGlvbiA9IG51bGw7XG5cbiAgaWYgKCF1dGlscy5pc1dpbmRvdyhlbGVtZW50KSAmJiBlbGVtZW50Lm5vZGVUeXBlICE9PSA5KSB7XG4gICAgb3JpZ2luYWxQb3NpdGlvbiA9IGVsZW1lbnQuc3R5bGUucG9zaXRpb247XG4gICAgdmFyIHBvc2l0aW9uID0gdXRpbHMuY3NzKGVsZW1lbnQsICdwb3NpdGlvbicpO1xuXG4gICAgaWYgKHBvc2l0aW9uID09PSAnYWJzb2x1dGUnKSB7XG4gICAgICBlbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcbiAgICB9XG4gIH1cblxuICB2YXIgc2Nyb2xsWCA9IHV0aWxzLmdldFdpbmRvd1Njcm9sbExlZnQod2luKTtcbiAgdmFyIHNjcm9sbFkgPSB1dGlscy5nZXRXaW5kb3dTY3JvbGxUb3Aod2luKTtcbiAgdmFyIHZpZXdwb3J0V2lkdGggPSB1dGlscy52aWV3cG9ydFdpZHRoKHdpbik7XG4gIHZhciB2aWV3cG9ydEhlaWdodCA9IHV0aWxzLnZpZXdwb3J0SGVpZ2h0KHdpbik7XG4gIHZhciBkb2N1bWVudFdpZHRoID0gZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoO1xuICB2YXIgZG9jdW1lbnRIZWlnaHQgPSBkb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0OyAvLyBzY3JvbGxYWFggb24gaHRtbCBpcyBzeW5jIHdpdGggYm9keSB3aGljaCBtZWFucyBvdmVyZmxvdzogaGlkZGVuIG9uIGJvZHkgZ2V0cyB3cm9uZyBzY3JvbGxYWFguXG4gIC8vIFdlIHNob3VsZCBjdXQgdGhpcyBvdXJzZWxmLlxuXG4gIHZhciBib2R5U3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShib2R5KTtcblxuICBpZiAoYm9keVN0eWxlLm92ZXJmbG93WCA9PT0gJ2hpZGRlbicpIHtcbiAgICBkb2N1bWVudFdpZHRoID0gd2luLmlubmVyV2lkdGg7XG4gIH1cblxuICBpZiAoYm9keVN0eWxlLm92ZXJmbG93WSA9PT0gJ2hpZGRlbicpIHtcbiAgICBkb2N1bWVudEhlaWdodCA9IHdpbi5pbm5lckhlaWdodDtcbiAgfSAvLyBSZXNldCBlbGVtZW50IHBvc2l0aW9uIGFmdGVyIGNhbGN1bGF0ZSB0aGUgdmlzaWJsZSBhcmVhXG5cblxuICBpZiAoZWxlbWVudC5zdHlsZSkge1xuICAgIGVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSBvcmlnaW5hbFBvc2l0aW9uO1xuICB9XG5cbiAgaWYgKGFsd2F5c0J5Vmlld3BvcnQgfHwgaXNBbmNlc3RvckZpeGVkKGVsZW1lbnQpKSB7XG4gICAgLy8gQ2xpcCBieSB2aWV3cG9ydCdzIHNpemUuXG4gICAgdmlzaWJsZVJlY3QubGVmdCA9IE1hdGgubWF4KHZpc2libGVSZWN0LmxlZnQsIHNjcm9sbFgpO1xuICAgIHZpc2libGVSZWN0LnRvcCA9IE1hdGgubWF4KHZpc2libGVSZWN0LnRvcCwgc2Nyb2xsWSk7XG4gICAgdmlzaWJsZVJlY3QucmlnaHQgPSBNYXRoLm1pbih2aXNpYmxlUmVjdC5yaWdodCwgc2Nyb2xsWCArIHZpZXdwb3J0V2lkdGgpO1xuICAgIHZpc2libGVSZWN0LmJvdHRvbSA9IE1hdGgubWluKHZpc2libGVSZWN0LmJvdHRvbSwgc2Nyb2xsWSArIHZpZXdwb3J0SGVpZ2h0KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBDbGlwIGJ5IGRvY3VtZW50J3Mgc2l6ZS5cbiAgICB2YXIgbWF4VmlzaWJsZVdpZHRoID0gTWF0aC5tYXgoZG9jdW1lbnRXaWR0aCwgc2Nyb2xsWCArIHZpZXdwb3J0V2lkdGgpO1xuICAgIHZpc2libGVSZWN0LnJpZ2h0ID0gTWF0aC5taW4odmlzaWJsZVJlY3QucmlnaHQsIG1heFZpc2libGVXaWR0aCk7XG4gICAgdmFyIG1heFZpc2libGVIZWlnaHQgPSBNYXRoLm1heChkb2N1bWVudEhlaWdodCwgc2Nyb2xsWSArIHZpZXdwb3J0SGVpZ2h0KTtcbiAgICB2aXNpYmxlUmVjdC5ib3R0b20gPSBNYXRoLm1pbih2aXNpYmxlUmVjdC5ib3R0b20sIG1heFZpc2libGVIZWlnaHQpO1xuICB9XG5cbiAgcmV0dXJuIHZpc2libGVSZWN0LnRvcCA+PSAwICYmIHZpc2libGVSZWN0LmxlZnQgPj0gMCAmJiB2aXNpYmxlUmVjdC5ib3R0b20gPiB2aXNpYmxlUmVjdC50b3AgJiYgdmlzaWJsZVJlY3QucmlnaHQgPiB2aXNpYmxlUmVjdC5sZWZ0ID8gdmlzaWJsZVJlY3QgOiBudWxsO1xufVxuXG5mdW5jdGlvbiBhZGp1c3RGb3JWaWV3cG9ydChlbEZ1dHVyZVBvcywgZWxSZWdpb24sIHZpc2libGVSZWN0LCBvdmVyZmxvdykge1xuICB2YXIgcG9zID0gdXRpbHMuY2xvbmUoZWxGdXR1cmVQb3MpO1xuICB2YXIgc2l6ZSA9IHtcbiAgICB3aWR0aDogZWxSZWdpb24ud2lkdGgsXG4gICAgaGVpZ2h0OiBlbFJlZ2lvbi5oZWlnaHRcbiAgfTtcblxuICBpZiAob3ZlcmZsb3cuYWRqdXN0WCAmJiBwb3MubGVmdCA8IHZpc2libGVSZWN0LmxlZnQpIHtcbiAgICBwb3MubGVmdCA9IHZpc2libGVSZWN0LmxlZnQ7XG4gIH0gLy8gTGVmdCBlZGdlIGluc2lkZSBhbmQgcmlnaHQgZWRnZSBvdXRzaWRlIHZpZXdwb3J0LCB0cnkgdG8gcmVzaXplIGl0LlxuXG5cbiAgaWYgKG92ZXJmbG93LnJlc2l6ZVdpZHRoICYmIHBvcy5sZWZ0ID49IHZpc2libGVSZWN0LmxlZnQgJiYgcG9zLmxlZnQgKyBzaXplLndpZHRoID4gdmlzaWJsZVJlY3QucmlnaHQpIHtcbiAgICBzaXplLndpZHRoIC09IHBvcy5sZWZ0ICsgc2l6ZS53aWR0aCAtIHZpc2libGVSZWN0LnJpZ2h0O1xuICB9IC8vIFJpZ2h0IGVkZ2Ugb3V0c2lkZSB2aWV3cG9ydCwgdHJ5IHRvIG1vdmUgaXQuXG5cblxuICBpZiAob3ZlcmZsb3cuYWRqdXN0WCAmJiBwb3MubGVmdCArIHNpemUud2lkdGggPiB2aXNpYmxlUmVjdC5yaWdodCkge1xuICAgIC8vIOS/neivgeW3pui+ueeVjOWSjOWPr+inhuWMuuWfn+W3pui+ueeVjOWvuem9kFxuICAgIHBvcy5sZWZ0ID0gTWF0aC5tYXgodmlzaWJsZVJlY3QucmlnaHQgLSBzaXplLndpZHRoLCB2aXNpYmxlUmVjdC5sZWZ0KTtcbiAgfSAvLyBUb3AgZWRnZSBvdXRzaWRlIHZpZXdwb3J0LCB0cnkgdG8gbW92ZSBpdC5cblxuXG4gIGlmIChvdmVyZmxvdy5hZGp1c3RZICYmIHBvcy50b3AgPCB2aXNpYmxlUmVjdC50b3ApIHtcbiAgICBwb3MudG9wID0gdmlzaWJsZVJlY3QudG9wO1xuICB9IC8vIFRvcCBlZGdlIGluc2lkZSBhbmQgYm90dG9tIGVkZ2Ugb3V0c2lkZSB2aWV3cG9ydCwgdHJ5IHRvIHJlc2l6ZSBpdC5cblxuXG4gIGlmIChvdmVyZmxvdy5yZXNpemVIZWlnaHQgJiYgcG9zLnRvcCA+PSB2aXNpYmxlUmVjdC50b3AgJiYgcG9zLnRvcCArIHNpemUuaGVpZ2h0ID4gdmlzaWJsZVJlY3QuYm90dG9tKSB7XG4gICAgc2l6ZS5oZWlnaHQgLT0gcG9zLnRvcCArIHNpemUuaGVpZ2h0IC0gdmlzaWJsZVJlY3QuYm90dG9tO1xuICB9IC8vIEJvdHRvbSBlZGdlIG91dHNpZGUgdmlld3BvcnQsIHRyeSB0byBtb3ZlIGl0LlxuXG5cbiAgaWYgKG92ZXJmbG93LmFkanVzdFkgJiYgcG9zLnRvcCArIHNpemUuaGVpZ2h0ID4gdmlzaWJsZVJlY3QuYm90dG9tKSB7XG4gICAgLy8g5L+d6K+B5LiK6L6555WM5ZKM5Y+v6KeG5Yy65Z+f5LiK6L6555WM5a+56b2QXG4gICAgcG9zLnRvcCA9IE1hdGgubWF4KHZpc2libGVSZWN0LmJvdHRvbSAtIHNpemUuaGVpZ2h0LCB2aXNpYmxlUmVjdC50b3ApO1xuICB9XG5cbiAgcmV0dXJuIHV0aWxzLm1peChwb3MsIHNpemUpO1xufVxuXG5mdW5jdGlvbiBnZXRSZWdpb24obm9kZSkge1xuICB2YXIgb2Zmc2V0O1xuICB2YXIgdztcbiAgdmFyIGg7XG5cbiAgaWYgKCF1dGlscy5pc1dpbmRvdyhub2RlKSAmJiBub2RlLm5vZGVUeXBlICE9PSA5KSB7XG4gICAgb2Zmc2V0ID0gdXRpbHMub2Zmc2V0KG5vZGUpO1xuICAgIHcgPSB1dGlscy5vdXRlcldpZHRoKG5vZGUpO1xuICAgIGggPSB1dGlscy5vdXRlckhlaWdodChub2RlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgd2luID0gdXRpbHMuZ2V0V2luZG93KG5vZGUpO1xuICAgIG9mZnNldCA9IHtcbiAgICAgIGxlZnQ6IHV0aWxzLmdldFdpbmRvd1Njcm9sbExlZnQod2luKSxcbiAgICAgIHRvcDogdXRpbHMuZ2V0V2luZG93U2Nyb2xsVG9wKHdpbilcbiAgICB9O1xuICAgIHcgPSB1dGlscy52aWV3cG9ydFdpZHRoKHdpbik7XG4gICAgaCA9IHV0aWxzLnZpZXdwb3J0SGVpZ2h0KHdpbik7XG4gIH1cblxuICBvZmZzZXQud2lkdGggPSB3O1xuICBvZmZzZXQuaGVpZ2h0ID0gaDtcbiAgcmV0dXJuIG9mZnNldDtcbn1cblxuLyoqXG4gKiDojrflj5Ygbm9kZSDkuIrnmoQgYWxpZ24g5a+56b2Q54K5IOebuOWvueS6jumhtemdoueahOWdkOagh1xuICovXG5mdW5jdGlvbiBnZXRBbGlnbk9mZnNldChyZWdpb24sIGFsaWduKSB7XG4gIHZhciBWID0gYWxpZ24uY2hhckF0KDApO1xuICB2YXIgSCA9IGFsaWduLmNoYXJBdCgxKTtcbiAgdmFyIHcgPSByZWdpb24ud2lkdGg7XG4gIHZhciBoID0gcmVnaW9uLmhlaWdodDtcbiAgdmFyIHggPSByZWdpb24ubGVmdDtcbiAgdmFyIHkgPSByZWdpb24udG9wO1xuXG4gIGlmIChWID09PSAnYycpIHtcbiAgICB5ICs9IGggLyAyO1xuICB9IGVsc2UgaWYgKFYgPT09ICdiJykge1xuICAgIHkgKz0gaDtcbiAgfVxuXG4gIGlmIChIID09PSAnYycpIHtcbiAgICB4ICs9IHcgLyAyO1xuICB9IGVsc2UgaWYgKEggPT09ICdyJykge1xuICAgIHggKz0gdztcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbGVmdDogeCxcbiAgICB0b3A6IHlcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0RWxGdXR1cmVQb3MoZWxSZWdpb24sIHJlZk5vZGVSZWdpb24sIHBvaW50cywgb2Zmc2V0LCB0YXJnZXRPZmZzZXQpIHtcbiAgdmFyIHAxID0gZ2V0QWxpZ25PZmZzZXQocmVmTm9kZVJlZ2lvbiwgcG9pbnRzWzFdKTtcbiAgdmFyIHAyID0gZ2V0QWxpZ25PZmZzZXQoZWxSZWdpb24sIHBvaW50c1swXSk7XG4gIHZhciBkaWZmID0gW3AyLmxlZnQgLSBwMS5sZWZ0LCBwMi50b3AgLSBwMS50b3BdO1xuICByZXR1cm4ge1xuICAgIGxlZnQ6IE1hdGgucm91bmQoZWxSZWdpb24ubGVmdCAtIGRpZmZbMF0gKyBvZmZzZXRbMF0gLSB0YXJnZXRPZmZzZXRbMF0pLFxuICAgIHRvcDogTWF0aC5yb3VuZChlbFJlZ2lvbi50b3AgLSBkaWZmWzFdICsgb2Zmc2V0WzFdIC0gdGFyZ2V0T2Zmc2V0WzFdKVxuICB9O1xufVxuXG4vKipcbiAqIGFsaWduIGRvbSBub2RlIGZsZXhpYmx5XG4gKiBAYXV0aG9yIHlpbWluZ2hlQGdtYWlsLmNvbVxuICovXG5cbmZ1bmN0aW9uIGlzRmFpbFgoZWxGdXR1cmVQb3MsIGVsUmVnaW9uLCB2aXNpYmxlUmVjdCkge1xuICByZXR1cm4gZWxGdXR1cmVQb3MubGVmdCA8IHZpc2libGVSZWN0LmxlZnQgfHwgZWxGdXR1cmVQb3MubGVmdCArIGVsUmVnaW9uLndpZHRoID4gdmlzaWJsZVJlY3QucmlnaHQ7XG59XG5cbmZ1bmN0aW9uIGlzRmFpbFkoZWxGdXR1cmVQb3MsIGVsUmVnaW9uLCB2aXNpYmxlUmVjdCkge1xuICByZXR1cm4gZWxGdXR1cmVQb3MudG9wIDwgdmlzaWJsZVJlY3QudG9wIHx8IGVsRnV0dXJlUG9zLnRvcCArIGVsUmVnaW9uLmhlaWdodCA+IHZpc2libGVSZWN0LmJvdHRvbTtcbn1cblxuZnVuY3Rpb24gaXNDb21wbGV0ZUZhaWxYKGVsRnV0dXJlUG9zLCBlbFJlZ2lvbiwgdmlzaWJsZVJlY3QpIHtcbiAgcmV0dXJuIGVsRnV0dXJlUG9zLmxlZnQgPiB2aXNpYmxlUmVjdC5yaWdodCB8fCBlbEZ1dHVyZVBvcy5sZWZ0ICsgZWxSZWdpb24ud2lkdGggPCB2aXNpYmxlUmVjdC5sZWZ0O1xufVxuXG5mdW5jdGlvbiBpc0NvbXBsZXRlRmFpbFkoZWxGdXR1cmVQb3MsIGVsUmVnaW9uLCB2aXNpYmxlUmVjdCkge1xuICByZXR1cm4gZWxGdXR1cmVQb3MudG9wID4gdmlzaWJsZVJlY3QuYm90dG9tIHx8IGVsRnV0dXJlUG9zLnRvcCArIGVsUmVnaW9uLmhlaWdodCA8IHZpc2libGVSZWN0LnRvcDtcbn1cblxuZnVuY3Rpb24gZmxpcChwb2ludHMsIHJlZywgbWFwKSB7XG4gIHZhciByZXQgPSBbXTtcbiAgdXRpbHMuZWFjaChwb2ludHMsIGZ1bmN0aW9uIChwKSB7XG4gICAgcmV0LnB1c2gocC5yZXBsYWNlKHJlZywgZnVuY3Rpb24gKG0pIHtcbiAgICAgIHJldHVybiBtYXBbbV07XG4gICAgfSkpO1xuICB9KTtcbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gZmxpcE9mZnNldChvZmZzZXQsIGluZGV4KSB7XG4gIG9mZnNldFtpbmRleF0gPSAtb2Zmc2V0W2luZGV4XTtcbiAgcmV0dXJuIG9mZnNldDtcbn1cblxuZnVuY3Rpb24gY29udmVydE9mZnNldChzdHIsIG9mZnNldExlbikge1xuICB2YXIgbjtcblxuICBpZiAoLyUkLy50ZXN0KHN0cikpIHtcbiAgICBuID0gcGFyc2VJbnQoc3RyLnN1YnN0cmluZygwLCBzdHIubGVuZ3RoIC0gMSksIDEwKSAvIDEwMCAqIG9mZnNldExlbjtcbiAgfSBlbHNlIHtcbiAgICBuID0gcGFyc2VJbnQoc3RyLCAxMCk7XG4gIH1cblxuICByZXR1cm4gbiB8fCAwO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVPZmZzZXQob2Zmc2V0LCBlbCkge1xuICBvZmZzZXRbMF0gPSBjb252ZXJ0T2Zmc2V0KG9mZnNldFswXSwgZWwud2lkdGgpO1xuICBvZmZzZXRbMV0gPSBjb252ZXJ0T2Zmc2V0KG9mZnNldFsxXSwgZWwuaGVpZ2h0KTtcbn1cbi8qKlxuICogQHBhcmFtIGVsXG4gKiBAcGFyYW0gdGd0UmVnaW9uIOWPgueFp+iKgueCueaJgOWNoOeahOWMuuWfnzogeyBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQgfVxuICogQHBhcmFtIGFsaWduXG4gKi9cblxuXG5mdW5jdGlvbiBkb0FsaWduKGVsLCB0Z3RSZWdpb24sIGFsaWduLCBpc1RndFJlZ2lvblZpc2libGUpIHtcbiAgdmFyIHBvaW50cyA9IGFsaWduLnBvaW50cztcbiAgdmFyIG9mZnNldCA9IGFsaWduLm9mZnNldCB8fCBbMCwgMF07XG4gIHZhciB0YXJnZXRPZmZzZXQgPSBhbGlnbi50YXJnZXRPZmZzZXQgfHwgWzAsIDBdO1xuICB2YXIgb3ZlcmZsb3cgPSBhbGlnbi5vdmVyZmxvdztcbiAgdmFyIHNvdXJjZSA9IGFsaWduLnNvdXJjZSB8fCBlbDtcbiAgb2Zmc2V0ID0gW10uY29uY2F0KG9mZnNldCk7XG4gIHRhcmdldE9mZnNldCA9IFtdLmNvbmNhdCh0YXJnZXRPZmZzZXQpO1xuICBvdmVyZmxvdyA9IG92ZXJmbG93IHx8IHt9O1xuICB2YXIgbmV3T3ZlcmZsb3dDZmcgPSB7fTtcbiAgdmFyIGZhaWwgPSAwO1xuICB2YXIgYWx3YXlzQnlWaWV3cG9ydCA9ICEhKG92ZXJmbG93ICYmIG92ZXJmbG93LmFsd2F5c0J5Vmlld3BvcnQpOyAvLyDlvZPliY3oioLngrnlj6/ku6XooqvmlL7nva7nmoTmmL7npLrljLrln59cblxuICB2YXIgdmlzaWJsZVJlY3QgPSBnZXRWaXNpYmxlUmVjdEZvckVsZW1lbnQoc291cmNlLCBhbHdheXNCeVZpZXdwb3J0KTsgLy8g5b2T5YmN6IqC54K55omA5Y2g55qE5Yy65Z+fLCBsZWZ0L3RvcC93aWR0aC9oZWlnaHRcblxuICB2YXIgZWxSZWdpb24gPSBnZXRSZWdpb24oc291cmNlKTsgLy8g5bCGIG9mZnNldCDovazmjaLmiJDmlbDlgLzvvIzmlK/mjIHnmb7liIbmr5RcblxuICBub3JtYWxpemVPZmZzZXQob2Zmc2V0LCBlbFJlZ2lvbik7XG4gIG5vcm1hbGl6ZU9mZnNldCh0YXJnZXRPZmZzZXQsIHRndFJlZ2lvbik7IC8vIOW9k+WJjeiKgueCueWwhuimgeiiq+aUvue9rueahOS9jee9rlxuXG4gIHZhciBlbEZ1dHVyZVBvcyA9IGdldEVsRnV0dXJlUG9zKGVsUmVnaW9uLCB0Z3RSZWdpb24sIHBvaW50cywgb2Zmc2V0LCB0YXJnZXRPZmZzZXQpOyAvLyDlvZPliY3oioLngrnlsIbopoHmiYDlpITnmoTljLrln59cblxuICB2YXIgbmV3RWxSZWdpb24gPSB1dGlscy5tZXJnZShlbFJlZ2lvbiwgZWxGdXR1cmVQb3MpOyAvLyDlpoLmnpzlj6/op4bljLrln5/kuI3og73lrozlhajmlL7nva7lvZPliY3oioLngrnml7blhYHorrjosIPmlbRcblxuICBpZiAodmlzaWJsZVJlY3QgJiYgKG92ZXJmbG93LmFkanVzdFggfHwgb3ZlcmZsb3cuYWRqdXN0WSkgJiYgaXNUZ3RSZWdpb25WaXNpYmxlKSB7XG4gICAgaWYgKG92ZXJmbG93LmFkanVzdFgpIHtcbiAgICAgIC8vIOWmguaenOaoquWQkeS4jeiDveaUvuS4i1xuICAgICAgaWYgKGlzRmFpbFgoZWxGdXR1cmVQb3MsIGVsUmVnaW9uLCB2aXNpYmxlUmVjdCkpIHtcbiAgICAgICAgLy8g5a+56b2Q5L2N572u5Y+N5LiLXG4gICAgICAgIHZhciBuZXdQb2ludHMgPSBmbGlwKHBvaW50cywgL1tscl0vZ2ksIHtcbiAgICAgICAgICBsOiAncicsXG4gICAgICAgICAgcjogJ2wnXG4gICAgICAgIH0pOyAvLyDlgY/np7vph4/kuZ/lj43kuItcblxuICAgICAgICB2YXIgbmV3T2Zmc2V0ID0gZmxpcE9mZnNldChvZmZzZXQsIDApO1xuICAgICAgICB2YXIgbmV3VGFyZ2V0T2Zmc2V0ID0gZmxpcE9mZnNldCh0YXJnZXRPZmZzZXQsIDApO1xuICAgICAgICB2YXIgbmV3RWxGdXR1cmVQb3MgPSBnZXRFbEZ1dHVyZVBvcyhlbFJlZ2lvbiwgdGd0UmVnaW9uLCBuZXdQb2ludHMsIG5ld09mZnNldCwgbmV3VGFyZ2V0T2Zmc2V0KTtcblxuICAgICAgICBpZiAoIWlzQ29tcGxldGVGYWlsWChuZXdFbEZ1dHVyZVBvcywgZWxSZWdpb24sIHZpc2libGVSZWN0KSkge1xuICAgICAgICAgIGZhaWwgPSAxO1xuICAgICAgICAgIHBvaW50cyA9IG5ld1BvaW50cztcbiAgICAgICAgICBvZmZzZXQgPSBuZXdPZmZzZXQ7XG4gICAgICAgICAgdGFyZ2V0T2Zmc2V0ID0gbmV3VGFyZ2V0T2Zmc2V0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG92ZXJmbG93LmFkanVzdFkpIHtcbiAgICAgIC8vIOWmguaenOe6teWQkeS4jeiDveaUvuS4i1xuICAgICAgaWYgKGlzRmFpbFkoZWxGdXR1cmVQb3MsIGVsUmVnaW9uLCB2aXNpYmxlUmVjdCkpIHtcbiAgICAgICAgLy8g5a+56b2Q5L2N572u5Y+N5LiLXG4gICAgICAgIHZhciBfbmV3UG9pbnRzID0gZmxpcChwb2ludHMsIC9bdGJdL2dpLCB7XG4gICAgICAgICAgdDogJ2InLFxuICAgICAgICAgIGI6ICd0J1xuICAgICAgICB9KTsgLy8g5YGP56e76YeP5Lmf5Y+N5LiLXG5cblxuICAgICAgICB2YXIgX25ld09mZnNldCA9IGZsaXBPZmZzZXQob2Zmc2V0LCAxKTtcblxuICAgICAgICB2YXIgX25ld1RhcmdldE9mZnNldCA9IGZsaXBPZmZzZXQodGFyZ2V0T2Zmc2V0LCAxKTtcblxuICAgICAgICB2YXIgX25ld0VsRnV0dXJlUG9zID0gZ2V0RWxGdXR1cmVQb3MoZWxSZWdpb24sIHRndFJlZ2lvbiwgX25ld1BvaW50cywgX25ld09mZnNldCwgX25ld1RhcmdldE9mZnNldCk7XG5cbiAgICAgICAgaWYgKCFpc0NvbXBsZXRlRmFpbFkoX25ld0VsRnV0dXJlUG9zLCBlbFJlZ2lvbiwgdmlzaWJsZVJlY3QpKSB7XG4gICAgICAgICAgZmFpbCA9IDE7XG4gICAgICAgICAgcG9pbnRzID0gX25ld1BvaW50cztcbiAgICAgICAgICBvZmZzZXQgPSBfbmV3T2Zmc2V0O1xuICAgICAgICAgIHRhcmdldE9mZnNldCA9IF9uZXdUYXJnZXRPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIOWmguaenOWksei0pe+8jOmHjeaWsOiuoeeul+W9k+WJjeiKgueCueWwhuimgeiiq+aUvue9rueahOS9jee9rlxuXG5cbiAgICBpZiAoZmFpbCkge1xuICAgICAgZWxGdXR1cmVQb3MgPSBnZXRFbEZ1dHVyZVBvcyhlbFJlZ2lvbiwgdGd0UmVnaW9uLCBwb2ludHMsIG9mZnNldCwgdGFyZ2V0T2Zmc2V0KTtcbiAgICAgIHV0aWxzLm1peChuZXdFbFJlZ2lvbiwgZWxGdXR1cmVQb3MpO1xuICAgIH1cblxuICAgIHZhciBpc1N0aWxsRmFpbFggPSBpc0ZhaWxYKGVsRnV0dXJlUG9zLCBlbFJlZ2lvbiwgdmlzaWJsZVJlY3QpO1xuICAgIHZhciBpc1N0aWxsRmFpbFkgPSBpc0ZhaWxZKGVsRnV0dXJlUG9zLCBlbFJlZ2lvbiwgdmlzaWJsZVJlY3QpOyAvLyDmo4Dmn6Xlj43kuIvlkI7nmoTkvY3nva7mmK/lkKblj6/ku6XmlL7kuIvkuobvvIzlpoLmnpzku43nhLbmlL7kuI3kuIvvvJpcbiAgICAvLyAxLiDlpI3ljp/kv67mlLnov4fnmoTlrprkvY3lj4LmlbBcblxuICAgIGlmIChpc1N0aWxsRmFpbFggfHwgaXNTdGlsbEZhaWxZKSB7XG4gICAgICB2YXIgX25ld1BvaW50czIgPSBwb2ludHM7IC8vIOmHjee9ruWvueW6lOmDqOWIhueahOe/u+i9rOmAu+i+kVxuXG4gICAgICBpZiAoaXNTdGlsbEZhaWxYKSB7XG4gICAgICAgIF9uZXdQb2ludHMyID0gZmxpcChwb2ludHMsIC9bbHJdL2dpLCB7XG4gICAgICAgICAgbDogJ3InLFxuICAgICAgICAgIHI6ICdsJ1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzU3RpbGxGYWlsWSkge1xuICAgICAgICBfbmV3UG9pbnRzMiA9IGZsaXAocG9pbnRzLCAvW3RiXS9naSwge1xuICAgICAgICAgIHQ6ICdiJyxcbiAgICAgICAgICBiOiAndCdcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHBvaW50cyA9IF9uZXdQb2ludHMyO1xuICAgICAgb2Zmc2V0ID0gYWxpZ24ub2Zmc2V0IHx8IFswLCAwXTtcbiAgICAgIHRhcmdldE9mZnNldCA9IGFsaWduLnRhcmdldE9mZnNldCB8fCBbMCwgMF07XG4gICAgfSAvLyAyLiDlj6rmnInmjIflrprkuoblj6/ku6XosIPmlbTlvZPliY3mlrnlkJHmiY3osIPmlbRcblxuXG4gICAgbmV3T3ZlcmZsb3dDZmcuYWRqdXN0WCA9IG92ZXJmbG93LmFkanVzdFggJiYgaXNTdGlsbEZhaWxYO1xuICAgIG5ld092ZXJmbG93Q2ZnLmFkanVzdFkgPSBvdmVyZmxvdy5hZGp1c3RZICYmIGlzU3RpbGxGYWlsWTsgLy8g56Gu5a6e6KaB6LCD5pW077yM55Sa6Iez5Y+v6IO95Lya6LCD5pW06auY5bqm5a695bqmXG5cbiAgICBpZiAobmV3T3ZlcmZsb3dDZmcuYWRqdXN0WCB8fCBuZXdPdmVyZmxvd0NmZy5hZGp1c3RZKSB7XG4gICAgICBuZXdFbFJlZ2lvbiA9IGFkanVzdEZvclZpZXdwb3J0KGVsRnV0dXJlUG9zLCBlbFJlZ2lvbiwgdmlzaWJsZVJlY3QsIG5ld092ZXJmbG93Q2ZnKTtcbiAgICB9XG4gIH0gLy8gbmVlZCBqdWRnZSB0byBpbiBjYXNlIHNldCBmaXhlZCB3aXRoIGluIGNzcyBvbiBoZWlnaHQgYXV0byBlbGVtZW50XG5cblxuICBpZiAobmV3RWxSZWdpb24ud2lkdGggIT09IGVsUmVnaW9uLndpZHRoKSB7XG4gICAgdXRpbHMuY3NzKHNvdXJjZSwgJ3dpZHRoJywgdXRpbHMud2lkdGgoc291cmNlKSArIG5ld0VsUmVnaW9uLndpZHRoIC0gZWxSZWdpb24ud2lkdGgpO1xuICB9XG5cbiAgaWYgKG5ld0VsUmVnaW9uLmhlaWdodCAhPT0gZWxSZWdpb24uaGVpZ2h0KSB7XG4gICAgdXRpbHMuY3NzKHNvdXJjZSwgJ2hlaWdodCcsIHV0aWxzLmhlaWdodChzb3VyY2UpICsgbmV3RWxSZWdpb24uaGVpZ2h0IC0gZWxSZWdpb24uaGVpZ2h0KTtcbiAgfSAvLyBodHRwczovL2dpdGh1Yi5jb20va2lzc3l0ZWFtL2tpc3N5L2lzc3Vlcy8xOTBcbiAgLy8g55u45a+55LqO5bGP5bmV5L2N572u5rKh5Y+Y77yM6ICMIGxlZnQvdG9wIOWPmOS6hlxuICAvLyDkvovlpoIgPGRpdiAncmVsYXRpdmUnPjxlbCBhYnNvbHV0ZT48L2Rpdj5cblxuXG4gIHV0aWxzLm9mZnNldChzb3VyY2UsIHtcbiAgICBsZWZ0OiBuZXdFbFJlZ2lvbi5sZWZ0LFxuICAgIHRvcDogbmV3RWxSZWdpb24udG9wXG4gIH0sIHtcbiAgICB1c2VDc3NSaWdodDogYWxpZ24udXNlQ3NzUmlnaHQsXG4gICAgdXNlQ3NzQm90dG9tOiBhbGlnbi51c2VDc3NCb3R0b20sXG4gICAgdXNlQ3NzVHJhbnNmb3JtOiBhbGlnbi51c2VDc3NUcmFuc2Zvcm0sXG4gICAgaWdub3JlU2hha2U6IGFsaWduLmlnbm9yZVNoYWtlXG4gIH0pO1xuICByZXR1cm4ge1xuICAgIHBvaW50czogcG9pbnRzLFxuICAgIG9mZnNldDogb2Zmc2V0LFxuICAgIHRhcmdldE9mZnNldDogdGFyZ2V0T2Zmc2V0LFxuICAgIG92ZXJmbG93OiBuZXdPdmVyZmxvd0NmZ1xuICB9O1xufVxuLyoqXG4gKiAgMjAxMi0wNC0yNiB5aW1pbmdoZUBnbWFpbC5jb21cbiAqICAgLSDkvJjljJbmmbrog73lr7npvZDnrpfms5VcbiAqICAgLSDmhY7nlKggcmVzaXplWFhcbiAqXG4gKiAgMjAxMS0wNy0xMyB5aW1pbmdoZUBnbWFpbC5jb20gbm90ZTpcbiAqICAgLSDlop7liqDmmbrog73lr7npvZDvvIzku6Xlj4rlpKflsI/osIPmlbTpgInpoblcbiAqKi9cblxuZnVuY3Rpb24gaXNPdXRPZlZpc2libGVSZWN0KHRhcmdldCwgYWx3YXlzQnlWaWV3cG9ydCkge1xuICB2YXIgdmlzaWJsZVJlY3QgPSBnZXRWaXNpYmxlUmVjdEZvckVsZW1lbnQodGFyZ2V0LCBhbHdheXNCeVZpZXdwb3J0KTtcbiAgdmFyIHRhcmdldFJlZ2lvbiA9IGdldFJlZ2lvbih0YXJnZXQpO1xuICByZXR1cm4gIXZpc2libGVSZWN0IHx8IHRhcmdldFJlZ2lvbi5sZWZ0ICsgdGFyZ2V0UmVnaW9uLndpZHRoIDw9IHZpc2libGVSZWN0LmxlZnQgfHwgdGFyZ2V0UmVnaW9uLnRvcCArIHRhcmdldFJlZ2lvbi5oZWlnaHQgPD0gdmlzaWJsZVJlY3QudG9wIHx8IHRhcmdldFJlZ2lvbi5sZWZ0ID49IHZpc2libGVSZWN0LnJpZ2h0IHx8IHRhcmdldFJlZ2lvbi50b3AgPj0gdmlzaWJsZVJlY3QuYm90dG9tO1xufVxuXG5mdW5jdGlvbiBhbGlnbkVsZW1lbnQoZWwsIHJlZk5vZGUsIGFsaWduKSB7XG4gIHZhciB0YXJnZXQgPSBhbGlnbi50YXJnZXQgfHwgcmVmTm9kZTtcbiAgdmFyIHJlZk5vZGVSZWdpb24gPSBnZXRSZWdpb24odGFyZ2V0KTtcbiAgdmFyIGlzVGFyZ2V0Tm90T3V0T2ZWaXNpYmxlID0gIWlzT3V0T2ZWaXNpYmxlUmVjdCh0YXJnZXQsIGFsaWduLm92ZXJmbG93ICYmIGFsaWduLm92ZXJmbG93LmFsd2F5c0J5Vmlld3BvcnQpO1xuICByZXR1cm4gZG9BbGlnbihlbCwgcmVmTm9kZVJlZ2lvbiwgYWxpZ24sIGlzVGFyZ2V0Tm90T3V0T2ZWaXNpYmxlKTtcbn1cblxuYWxpZ25FbGVtZW50Ll9fZ2V0T2Zmc2V0UGFyZW50ID0gZ2V0T2Zmc2V0UGFyZW50O1xuYWxpZ25FbGVtZW50Ll9fZ2V0VmlzaWJsZVJlY3RGb3JFbGVtZW50ID0gZ2V0VmlzaWJsZVJlY3RGb3JFbGVtZW50O1xuXG4vKipcbiAqIGB0Z3RQb2ludGA6IHsgcGFnZVgsIHBhZ2VZIH0gb3IgeyBjbGllbnRYLCBjbGllbnRZIH0uXG4gKiBJZiBjbGllbnQgcG9zaXRpb24gcHJvdmlkZWQsIHdpbGwgaW50ZXJuYWwgY29udmVydCB0byBwYWdlIHBvc2l0aW9uLlxuICovXG5cbmZ1bmN0aW9uIGFsaWduUG9pbnQoZWwsIHRndFBvaW50LCBhbGlnbikge1xuICB2YXIgcGFnZVg7XG4gIHZhciBwYWdlWTtcbiAgdmFyIGRvYyA9IHV0aWxzLmdldERvY3VtZW50KGVsKTtcbiAgdmFyIHdpbiA9IGRvYy5kZWZhdWx0VmlldyB8fCBkb2MucGFyZW50V2luZG93O1xuICB2YXIgc2Nyb2xsWCA9IHV0aWxzLmdldFdpbmRvd1Njcm9sbExlZnQod2luKTtcbiAgdmFyIHNjcm9sbFkgPSB1dGlscy5nZXRXaW5kb3dTY3JvbGxUb3Aod2luKTtcbiAgdmFyIHZpZXdwb3J0V2lkdGggPSB1dGlscy52aWV3cG9ydFdpZHRoKHdpbik7XG4gIHZhciB2aWV3cG9ydEhlaWdodCA9IHV0aWxzLnZpZXdwb3J0SGVpZ2h0KHdpbik7XG5cbiAgaWYgKCdwYWdlWCcgaW4gdGd0UG9pbnQpIHtcbiAgICBwYWdlWCA9IHRndFBvaW50LnBhZ2VYO1xuICB9IGVsc2Uge1xuICAgIHBhZ2VYID0gc2Nyb2xsWCArIHRndFBvaW50LmNsaWVudFg7XG4gIH1cblxuICBpZiAoJ3BhZ2VZJyBpbiB0Z3RQb2ludCkge1xuICAgIHBhZ2VZID0gdGd0UG9pbnQucGFnZVk7XG4gIH0gZWxzZSB7XG4gICAgcGFnZVkgPSBzY3JvbGxZICsgdGd0UG9pbnQuY2xpZW50WTtcbiAgfVxuXG4gIHZhciB0Z3RSZWdpb24gPSB7XG4gICAgbGVmdDogcGFnZVgsXG4gICAgdG9wOiBwYWdlWSxcbiAgICB3aWR0aDogMCxcbiAgICBoZWlnaHQ6IDBcbiAgfTtcbiAgdmFyIHBvaW50SW5WaWV3ID0gcGFnZVggPj0gMCAmJiBwYWdlWCA8PSBzY3JvbGxYICsgdmlld3BvcnRXaWR0aCAmJiBwYWdlWSA+PSAwICYmIHBhZ2VZIDw9IHNjcm9sbFkgKyB2aWV3cG9ydEhlaWdodDsgLy8gUHJvdmlkZSBkZWZhdWx0IHRhcmdldCBwb2ludFxuXG4gIHZhciBwb2ludHMgPSBbYWxpZ24ucG9pbnRzWzBdLCAnY2MnXTtcbiAgcmV0dXJuIGRvQWxpZ24oZWwsIHRndFJlZ2lvbiwgX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe30sIGFsaWduKSwge30sIHtcbiAgICBwb2ludHM6IHBvaW50c1xuICB9KSwgcG9pbnRJblZpZXcpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBhbGlnbkVsZW1lbnQ7XG5leHBvcnQgeyBhbGlnbkVsZW1lbnQsIGFsaWduUG9pbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwidmFyIGJhc2VJc0VxdWFsID0gcmVxdWlyZSgnLi9fYmFzZUlzRXF1YWwnKTtcblxuLyoqXG4gKiBQZXJmb3JtcyBhIGRlZXAgY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlXG4gKiBlcXVpdmFsZW50LlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBzdXBwb3J0cyBjb21wYXJpbmcgYXJyYXlzLCBhcnJheSBidWZmZXJzLCBib29sZWFucyxcbiAqIGRhdGUgb2JqZWN0cywgZXJyb3Igb2JqZWN0cywgbWFwcywgbnVtYmVycywgYE9iamVjdGAgb2JqZWN0cywgcmVnZXhlcyxcbiAqIHNldHMsIHN0cmluZ3MsIHN5bWJvbHMsIGFuZCB0eXBlZCBhcnJheXMuIGBPYmplY3RgIG9iamVjdHMgYXJlIGNvbXBhcmVkXG4gKiBieSB0aGVpciBvd24sIG5vdCBpbmhlcml0ZWQsIGVudW1lcmFibGUgcHJvcGVydGllcy4gRnVuY3Rpb25zIGFuZCBET01cbiAqIG5vZGVzIGFyZSBjb21wYXJlZCBieSBzdHJpY3QgZXF1YWxpdHksIGkuZS4gYD09PWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxIH07XG4gKiB2YXIgb3RoZXIgPSB7ICdhJzogMSB9O1xuICpcbiAqIF8uaXNFcXVhbChvYmplY3QsIG90aGVyKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBvYmplY3QgPT09IG90aGVyO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNFcXVhbCh2YWx1ZSwgb3RoZXIpIHtcbiAgcmV0dXJuIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlcik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNFcXVhbDtcbiIsImltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0IFJlc2l6ZU9ic2VydmVyIGZyb20gJ3Jlc2l6ZS1vYnNlcnZlci1wb2x5ZmlsbCc7XG5pbXBvcnQgY29udGFpbnMgZnJvbSBcInJjLXV0aWwvZXMvRG9tL2NvbnRhaW5zXCI7XG5leHBvcnQgZnVuY3Rpb24gaXNTYW1lUG9pbnQocHJldiwgbmV4dCkge1xuICBpZiAocHJldiA9PT0gbmV4dCkgcmV0dXJuIHRydWU7XG4gIGlmICghcHJldiB8fCAhbmV4dCkgcmV0dXJuIGZhbHNlO1xuXG4gIGlmICgncGFnZVgnIGluIG5leHQgJiYgJ3BhZ2VZJyBpbiBuZXh0KSB7XG4gICAgcmV0dXJuIHByZXYucGFnZVggPT09IG5leHQucGFnZVggJiYgcHJldi5wYWdlWSA9PT0gbmV4dC5wYWdlWTtcbiAgfVxuXG4gIGlmICgnY2xpZW50WCcgaW4gbmV4dCAmJiAnY2xpZW50WScgaW4gbmV4dCkge1xuICAgIHJldHVybiBwcmV2LmNsaWVudFggPT09IG5leHQuY2xpZW50WCAmJiBwcmV2LmNsaWVudFkgPT09IG5leHQuY2xpZW50WTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXN0b3JlRm9jdXMoYWN0aXZlRWxlbWVudCwgY29udGFpbmVyKSB7XG4gIC8vIEZvY3VzIGJhY2sgaWYgaXMgaW4gdGhlIGNvbnRhaW5lclxuICBpZiAoYWN0aXZlRWxlbWVudCAhPT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiBjb250YWlucyhjb250YWluZXIsIGFjdGl2ZUVsZW1lbnQpICYmIHR5cGVvZiBhY3RpdmVFbGVtZW50LmZvY3VzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgYWN0aXZlRWxlbWVudC5mb2N1cygpO1xuICB9XG59XG5leHBvcnQgZnVuY3Rpb24gbW9uaXRvclJlc2l6ZShlbGVtZW50LCBjYWxsYmFjaykge1xuICB2YXIgcHJldldpZHRoID0gbnVsbDtcbiAgdmFyIHByZXZIZWlnaHQgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIG9uUmVzaXplKF9yZWYpIHtcbiAgICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAxKSxcbiAgICAgICAgdGFyZ2V0ID0gX3JlZjJbMF0udGFyZ2V0O1xuXG4gICAgaWYgKCFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnModGFyZ2V0KSkgcmV0dXJuO1xuXG4gICAgdmFyIF90YXJnZXQkZ2V0Qm91bmRpbmdDbCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgd2lkdGggPSBfdGFyZ2V0JGdldEJvdW5kaW5nQ2wud2lkdGgsXG4gICAgICAgIGhlaWdodCA9IF90YXJnZXQkZ2V0Qm91bmRpbmdDbC5oZWlnaHQ7XG5cbiAgICB2YXIgZml4ZWRXaWR0aCA9IE1hdGguZmxvb3Iod2lkdGgpO1xuICAgIHZhciBmaXhlZEhlaWdodCA9IE1hdGguZmxvb3IoaGVpZ2h0KTtcblxuICAgIGlmIChwcmV2V2lkdGggIT09IGZpeGVkV2lkdGggfHwgcHJldkhlaWdodCAhPT0gZml4ZWRIZWlnaHQpIHtcbiAgICAgIC8vIGh0dHBzOi8vd2Via2l0Lm9yZy9ibG9nLzk5OTcvcmVzaXplb2JzZXJ2ZXItaW4td2Via2l0L1xuICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNhbGxiYWNrKHtcbiAgICAgICAgICB3aWR0aDogZml4ZWRXaWR0aCxcbiAgICAgICAgICBoZWlnaHQ6IGZpeGVkSGVpZ2h0XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJldldpZHRoID0gZml4ZWRXaWR0aDtcbiAgICBwcmV2SGVpZ2h0ID0gZml4ZWRIZWlnaHQ7XG4gIH1cblxuICB2YXIgcmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIob25SZXNpemUpO1xuXG4gIGlmIChlbGVtZW50KSB7XG4gICAgcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50KTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICB9O1xufSIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5leHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKGNhbGxiYWNrLCBidWZmZXIpIHtcbiAgdmFyIGNhbGxlZFJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSk7XG4gIHZhciB0aW1lb3V0UmVmID0gUmVhY3QudXNlUmVmKG51bGwpO1xuXG4gIGZ1bmN0aW9uIGNhbmNlbFRyaWdnZXIoKSB7XG4gICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lb3V0UmVmLmN1cnJlbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJpZ2dlcihmb3JjZSkge1xuICAgIGlmICghY2FsbGVkUmVmLmN1cnJlbnQgfHwgZm9yY2UgPT09IHRydWUpIHtcbiAgICAgIGlmIChjYWxsYmFjaygpID09PSBmYWxzZSkge1xuICAgICAgICAvLyBOb3QgZGVsYXkgc2luY2UgY2FsbGJhY2sgY2FuY2VsbGVkIHNlbGZcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjYWxsZWRSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICBjYW5jZWxUcmlnZ2VyKCk7XG4gICAgICB0aW1lb3V0UmVmLmN1cnJlbnQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNhbGxlZFJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICB9LCBidWZmZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYW5jZWxUcmlnZ2VyKCk7XG4gICAgICB0aW1lb3V0UmVmLmN1cnJlbnQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNhbGxlZFJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgIHRyaWdnZXIoKTtcbiAgICAgIH0sIGJ1ZmZlcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFt0cmlnZ2VyLCBmdW5jdGlvbiAoKSB7XG4gICAgY2FsbGVkUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICBjYW5jZWxUcmlnZ2VyKCk7XG4gIH1dO1xufSk7IiwiaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgX3R5cGVvZiBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mXCI7XG5cbi8qKlxuICogUmVtb3ZlZCBwcm9wczpcbiAqICAtIGNoaWxkcmVuUHJvcHNcbiAqL1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNvbXBvc2VSZWYgfSBmcm9tIFwicmMtdXRpbC9lcy9yZWZcIjtcbmltcG9ydCBpc1Zpc2libGUgZnJvbSBcInJjLXV0aWwvZXMvRG9tL2lzVmlzaWJsZVwiO1xuaW1wb3J0IHsgYWxpZ25FbGVtZW50LCBhbGlnblBvaW50IH0gZnJvbSAnZG9tLWFsaWduJztcbmltcG9ydCBhZGRFdmVudExpc3RlbmVyIGZyb20gXCJyYy11dGlsL2VzL0RvbS9hZGRFdmVudExpc3RlbmVyXCI7XG5pbXBvcnQgaXNFcXVhbCBmcm9tICdsb2Rhc2gvaXNFcXVhbCc7XG5pbXBvcnQgeyBpc1NhbWVQb2ludCwgcmVzdG9yZUZvY3VzLCBtb25pdG9yUmVzaXplIH0gZnJvbSAnLi91dGlsJztcbmltcG9ydCB1c2VCdWZmZXIgZnJvbSAnLi9ob29rcy91c2VCdWZmZXInO1xuXG5mdW5jdGlvbiBnZXRFbGVtZW50KGZ1bmMpIHtcbiAgaWYgKHR5cGVvZiBmdW5jICE9PSAnZnVuY3Rpb24nKSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIGZ1bmMoKTtcbn1cblxuZnVuY3Rpb24gZ2V0UG9pbnQocG9pbnQpIHtcbiAgaWYgKF90eXBlb2YocG9pbnQpICE9PSAnb2JqZWN0JyB8fCAhcG9pbnQpIHJldHVybiBudWxsO1xuICByZXR1cm4gcG9pbnQ7XG59XG5cbnZhciBBbGlnbiA9IGZ1bmN0aW9uIEFsaWduKF9yZWYsIHJlZikge1xuICB2YXIgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuLFxuICAgICAgZGlzYWJsZWQgPSBfcmVmLmRpc2FibGVkLFxuICAgICAgdGFyZ2V0ID0gX3JlZi50YXJnZXQsXG4gICAgICBhbGlnbiA9IF9yZWYuYWxpZ24sXG4gICAgICBvbkFsaWduID0gX3JlZi5vbkFsaWduLFxuICAgICAgbW9uaXRvcldpbmRvd1Jlc2l6ZSA9IF9yZWYubW9uaXRvcldpbmRvd1Jlc2l6ZSxcbiAgICAgIF9yZWYkbW9uaXRvckJ1ZmZlclRpbSA9IF9yZWYubW9uaXRvckJ1ZmZlclRpbWUsXG4gICAgICBtb25pdG9yQnVmZmVyVGltZSA9IF9yZWYkbW9uaXRvckJ1ZmZlclRpbSA9PT0gdm9pZCAwID8gMCA6IF9yZWYkbW9uaXRvckJ1ZmZlclRpbTtcbiAgdmFyIGNhY2hlUmVmID0gUmVhY3QudXNlUmVmKHt9KTtcbiAgdmFyIG5vZGVSZWYgPSBSZWFjdC51c2VSZWYoKTtcbiAgdmFyIGNoaWxkTm9kZSA9IFJlYWN0LkNoaWxkcmVuLm9ubHkoY2hpbGRyZW4pOyAvLyA9PT09PT09PT09PT09PT09PT09PT0gQWxpZ24gPT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBXZSBzYXZlIHRoZSBwcm9wcyBoZXJlIHRvIGF2b2lkIGNsb3N1cmUgbWFrZXMgcHJvcHMgb29kXG5cbiAgdmFyIGZvcmNlQWxpZ25Qcm9wc1JlZiA9IFJlYWN0LnVzZVJlZih7fSk7XG4gIGZvcmNlQWxpZ25Qcm9wc1JlZi5jdXJyZW50LmRpc2FibGVkID0gZGlzYWJsZWQ7XG4gIGZvcmNlQWxpZ25Qcm9wc1JlZi5jdXJyZW50LnRhcmdldCA9IHRhcmdldDtcbiAgZm9yY2VBbGlnblByb3BzUmVmLmN1cnJlbnQuYWxpZ24gPSBhbGlnbjtcbiAgZm9yY2VBbGlnblByb3BzUmVmLmN1cnJlbnQub25BbGlnbiA9IG9uQWxpZ247XG5cbiAgdmFyIF91c2VCdWZmZXIgPSB1c2VCdWZmZXIoZnVuY3Rpb24gKCkge1xuICAgIHZhciBfZm9yY2VBbGlnblByb3BzUmVmJGMgPSBmb3JjZUFsaWduUHJvcHNSZWYuY3VycmVudCxcbiAgICAgICAgbGF0ZXN0RGlzYWJsZWQgPSBfZm9yY2VBbGlnblByb3BzUmVmJGMuZGlzYWJsZWQsXG4gICAgICAgIGxhdGVzdFRhcmdldCA9IF9mb3JjZUFsaWduUHJvcHNSZWYkYy50YXJnZXQsXG4gICAgICAgIGxhdGVzdEFsaWduID0gX2ZvcmNlQWxpZ25Qcm9wc1JlZiRjLmFsaWduLFxuICAgICAgICBsYXRlc3RPbkFsaWduID0gX2ZvcmNlQWxpZ25Qcm9wc1JlZiRjLm9uQWxpZ247XG5cbiAgICBpZiAoIWxhdGVzdERpc2FibGVkICYmIGxhdGVzdFRhcmdldCkge1xuICAgICAgdmFyIHNvdXJjZSA9IG5vZGVSZWYuY3VycmVudDtcbiAgICAgIHZhciByZXN1bHQ7XG4gICAgICB2YXIgZWxlbWVudCA9IGdldEVsZW1lbnQobGF0ZXN0VGFyZ2V0KTtcbiAgICAgIHZhciBwb2ludCA9IGdldFBvaW50KGxhdGVzdFRhcmdldCk7XG4gICAgICBjYWNoZVJlZi5jdXJyZW50LmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgY2FjaGVSZWYuY3VycmVudC5wb2ludCA9IHBvaW50O1xuICAgICAgY2FjaGVSZWYuY3VycmVudC5hbGlnbiA9IGxhdGVzdEFsaWduOyAvLyBJRSBsb3NlIGZvY3VzIGFmdGVyIGVsZW1lbnQgcmVhbGlnblxuICAgICAgLy8gV2Ugc2hvdWxkIHJlY29yZCBhY3RpdmVFbGVtZW50IGFuZCByZXN0b3JlIGxhdGVyXG5cbiAgICAgIC8vIElFIGxvc2UgZm9jdXMgYWZ0ZXIgZWxlbWVudCByZWFsaWduXG4gICAgICAvLyBXZSBzaG91bGQgcmVjb3JkIGFjdGl2ZUVsZW1lbnQgYW5kIHJlc3RvcmUgbGF0ZXJcbiAgICAgIHZhciBfZG9jdW1lbnQgPSBkb2N1bWVudCxcbiAgICAgICAgICBhY3RpdmVFbGVtZW50ID0gX2RvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7IC8vIFdlIG9ubHkgYWxpZ24gd2hlbiBlbGVtZW50IGlzIHZpc2libGVcblxuICAgICAgLy8gV2Ugb25seSBhbGlnbiB3aGVuIGVsZW1lbnQgaXMgdmlzaWJsZVxuICAgICAgaWYgKGVsZW1lbnQgJiYgaXNWaXNpYmxlKGVsZW1lbnQpKSB7XG4gICAgICAgIHJlc3VsdCA9IGFsaWduRWxlbWVudChzb3VyY2UsIGVsZW1lbnQsIGxhdGVzdEFsaWduKTtcbiAgICAgIH0gZWxzZSBpZiAocG9pbnQpIHtcbiAgICAgICAgcmVzdWx0ID0gYWxpZ25Qb2ludChzb3VyY2UsIHBvaW50LCBsYXRlc3RBbGlnbik7XG4gICAgICB9XG5cbiAgICAgIHJlc3RvcmVGb2N1cyhhY3RpdmVFbGVtZW50LCBzb3VyY2UpO1xuXG4gICAgICBpZiAobGF0ZXN0T25BbGlnbiAmJiByZXN1bHQpIHtcbiAgICAgICAgbGF0ZXN0T25BbGlnbihzb3VyY2UsIHJlc3VsdCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfSwgbW9uaXRvckJ1ZmZlclRpbWUpLFxuICAgICAgX3VzZUJ1ZmZlcjIgPSBfc2xpY2VkVG9BcnJheShfdXNlQnVmZmVyLCAyKSxcbiAgICAgIF9mb3JjZUFsaWduID0gX3VzZUJ1ZmZlcjJbMF0sXG4gICAgICBjYW5jZWxGb3JjZUFsaWduID0gX3VzZUJ1ZmZlcjJbMV07IC8vID09PT09PT09PT09PT09PT09PT09PSBFZmZlY3QgPT09PT09PT09PT09PT09PT09PT09XG4gIC8vIExpc3RlbiBmb3IgdGFyZ2V0IHVwZGF0ZWRcblxuXG4gIHZhciByZXNpemVNb25pdG9yID0gUmVhY3QudXNlUmVmKHtcbiAgICBjYW5jZWw6IGZ1bmN0aW9uIGNhbmNlbCgpIHt9XG4gIH0pOyAvLyBMaXN0ZW4gZm9yIHNvdXJjZSB1cGRhdGVkXG5cbiAgdmFyIHNvdXJjZVJlc2l6ZU1vbml0b3IgPSBSZWFjdC51c2VSZWYoe1xuICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkge31cbiAgfSk7XG4gIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBnZXRFbGVtZW50KHRhcmdldCk7XG4gICAgdmFyIHBvaW50ID0gZ2V0UG9pbnQodGFyZ2V0KTtcblxuICAgIGlmIChub2RlUmVmLmN1cnJlbnQgIT09IHNvdXJjZVJlc2l6ZU1vbml0b3IuY3VycmVudC5lbGVtZW50KSB7XG4gICAgICBzb3VyY2VSZXNpemVNb25pdG9yLmN1cnJlbnQuY2FuY2VsKCk7XG4gICAgICBzb3VyY2VSZXNpemVNb25pdG9yLmN1cnJlbnQuZWxlbWVudCA9IG5vZGVSZWYuY3VycmVudDtcbiAgICAgIHNvdXJjZVJlc2l6ZU1vbml0b3IuY3VycmVudC5jYW5jZWwgPSBtb25pdG9yUmVzaXplKG5vZGVSZWYuY3VycmVudCwgX2ZvcmNlQWxpZ24pO1xuICAgIH1cblxuICAgIGlmIChjYWNoZVJlZi5jdXJyZW50LmVsZW1lbnQgIT09IGVsZW1lbnQgfHwgIWlzU2FtZVBvaW50KGNhY2hlUmVmLmN1cnJlbnQucG9pbnQsIHBvaW50KSB8fCAhaXNFcXVhbChjYWNoZVJlZi5jdXJyZW50LmFsaWduLCBhbGlnbikpIHtcbiAgICAgIF9mb3JjZUFsaWduKCk7IC8vIEFkZCByZXNpemUgb2JzZXJ2ZXJcblxuXG4gICAgICBpZiAocmVzaXplTW9uaXRvci5jdXJyZW50LmVsZW1lbnQgIT09IGVsZW1lbnQpIHtcbiAgICAgICAgcmVzaXplTW9uaXRvci5jdXJyZW50LmNhbmNlbCgpO1xuICAgICAgICByZXNpemVNb25pdG9yLmN1cnJlbnQuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHJlc2l6ZU1vbml0b3IuY3VycmVudC5jYW5jZWwgPSBtb25pdG9yUmVzaXplKGVsZW1lbnQsIF9mb3JjZUFsaWduKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pOyAvLyBMaXN0ZW4gZm9yIGRpc2FibGVkIGNoYW5nZVxuXG4gIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFkaXNhYmxlZCkge1xuICAgICAgX2ZvcmNlQWxpZ24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FuY2VsRm9yY2VBbGlnbigpO1xuICAgIH1cbiAgfSwgW2Rpc2FibGVkXSk7IC8vIExpc3RlbiBmb3Igd2luZG93IHJlc2l6ZVxuXG4gIHZhciB3aW5SZXNpemVSZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKG1vbml0b3JXaW5kb3dSZXNpemUpIHtcbiAgICAgIGlmICghd2luUmVzaXplUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgd2luUmVzaXplUmVmLmN1cnJlbnQgPSBhZGRFdmVudExpc3RlbmVyKHdpbmRvdywgJ3Jlc2l6ZScsIF9mb3JjZUFsaWduKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHdpblJlc2l6ZVJlZi5jdXJyZW50KSB7XG4gICAgICB3aW5SZXNpemVSZWYuY3VycmVudC5yZW1vdmUoKTtcbiAgICAgIHdpblJlc2l6ZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gIH0sIFttb25pdG9yV2luZG93UmVzaXplXSk7IC8vIENsZWFyIGFsbCBpZiB1bm1vdW50XG5cbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgcmVzaXplTW9uaXRvci5jdXJyZW50LmNhbmNlbCgpO1xuICAgICAgc291cmNlUmVzaXplTW9uaXRvci5jdXJyZW50LmNhbmNlbCgpO1xuICAgICAgaWYgKHdpblJlc2l6ZVJlZi5jdXJyZW50KSB3aW5SZXNpemVSZWYuY3VycmVudC5yZW1vdmUoKTtcbiAgICAgIGNhbmNlbEZvcmNlQWxpZ24oKTtcbiAgICB9O1xuICB9LCBbXSk7IC8vID09PT09PT09PT09PT09PT09PT09PT0gUmVmID09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgUmVhY3QudXNlSW1wZXJhdGl2ZUhhbmRsZShyZWYsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZm9yY2VBbGlnbjogZnVuY3Rpb24gZm9yY2VBbGlnbigpIHtcbiAgICAgICAgcmV0dXJuIF9mb3JjZUFsaWduKHRydWUpO1xuICAgICAgfVxuICAgIH07XG4gIH0pOyAvLyA9PT09PT09PT09PT09PT09PT09PT0gUmVuZGVyID09PT09PT09PT09PT09PT09PT09PVxuXG4gIGlmICggLyojX19QVVJFX18qL1JlYWN0LmlzVmFsaWRFbGVtZW50KGNoaWxkTm9kZSkpIHtcbiAgICBjaGlsZE5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY2xvbmVFbGVtZW50KGNoaWxkTm9kZSwge1xuICAgICAgcmVmOiBjb21wb3NlUmVmKGNoaWxkTm9kZS5yZWYsIG5vZGVSZWYpXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gY2hpbGROb2RlO1xufTtcblxudmFyIFJjQWxpZ24gPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihBbGlnbik7XG5SY0FsaWduLmRpc3BsYXlOYW1lID0gJ0FsaWduJztcbmV4cG9ydCBkZWZhdWx0IFJjQWxpZ247IiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG52YXIgcnVudGltZSA9IChmdW5jdGlvbiAoZXhwb3J0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgT3AgPSBPYmplY3QucHJvdG90eXBlO1xuICB2YXIgaGFzT3duID0gT3AuaGFzT3duUHJvcGVydHk7XG4gIHZhciB1bmRlZmluZWQ7IC8vIE1vcmUgY29tcHJlc3NpYmxlIHRoYW4gdm9pZCAwLlxuICB2YXIgJFN5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbCA6IHt9O1xuICB2YXIgaXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLml0ZXJhdG9yIHx8IFwiQEBpdGVyYXRvclwiO1xuICB2YXIgYXN5bmNJdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuYXN5bmNJdGVyYXRvciB8fCBcIkBAYXN5bmNJdGVyYXRvclwiO1xuICB2YXIgdG9TdHJpbmdUYWdTeW1ib2wgPSAkU3ltYm9sLnRvU3RyaW5nVGFnIHx8IFwiQEB0b1N0cmluZ1RhZ1wiO1xuXG4gIGZ1bmN0aW9uIGRlZmluZShvYmosIGtleSwgdmFsdWUpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBvYmpba2V5XTtcbiAgfVxuICB0cnkge1xuICAgIC8vIElFIDggaGFzIGEgYnJva2VuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSB0aGF0IG9ubHkgd29ya3Mgb24gRE9NIG9iamVjdHMuXG4gICAgZGVmaW5lKHt9LCBcIlwiKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZGVmaW5lID0gZnVuY3Rpb24ob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgICByZXR1cm4gb2JqW2tleV0gPSB2YWx1ZTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCkge1xuICAgIC8vIElmIG91dGVyRm4gcHJvdmlkZWQgYW5kIG91dGVyRm4ucHJvdG90eXBlIGlzIGEgR2VuZXJhdG9yLCB0aGVuIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yLlxuICAgIHZhciBwcm90b0dlbmVyYXRvciA9IG91dGVyRm4gJiYgb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IgPyBvdXRlckZuIDogR2VuZXJhdG9yO1xuICAgIHZhciBnZW5lcmF0b3IgPSBPYmplY3QuY3JlYXRlKHByb3RvR2VuZXJhdG9yLnByb3RvdHlwZSk7XG4gICAgdmFyIGNvbnRleHQgPSBuZXcgQ29udGV4dCh0cnlMb2NzTGlzdCB8fCBbXSk7XG5cbiAgICAvLyBUaGUgLl9pbnZva2UgbWV0aG9kIHVuaWZpZXMgdGhlIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzLlxuICAgIGdlbmVyYXRvci5faW52b2tlID0gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcblxuICAgIHJldHVybiBnZW5lcmF0b3I7XG4gIH1cbiAgZXhwb3J0cy53cmFwID0gd3JhcDtcblxuICAvLyBUcnkvY2F0Y2ggaGVscGVyIHRvIG1pbmltaXplIGRlb3B0aW1pemF0aW9ucy4gUmV0dXJucyBhIGNvbXBsZXRpb25cbiAgLy8gcmVjb3JkIGxpa2UgY29udGV4dC50cnlFbnRyaWVzW2ldLmNvbXBsZXRpb24uIFRoaXMgaW50ZXJmYWNlIGNvdWxkXG4gIC8vIGhhdmUgYmVlbiAoYW5kIHdhcyBwcmV2aW91c2x5KSBkZXNpZ25lZCB0byB0YWtlIGEgY2xvc3VyZSB0byBiZVxuICAvLyBpbnZva2VkIHdpdGhvdXQgYXJndW1lbnRzLCBidXQgaW4gYWxsIHRoZSBjYXNlcyB3ZSBjYXJlIGFib3V0IHdlXG4gIC8vIGFscmVhZHkgaGF2ZSBhbiBleGlzdGluZyBtZXRob2Qgd2Ugd2FudCB0byBjYWxsLCBzbyB0aGVyZSdzIG5vIG5lZWRcbiAgLy8gdG8gY3JlYXRlIGEgbmV3IGZ1bmN0aW9uIG9iamVjdC4gV2UgY2FuIGV2ZW4gZ2V0IGF3YXkgd2l0aCBhc3N1bWluZ1xuICAvLyB0aGUgbWV0aG9kIHRha2VzIGV4YWN0bHkgb25lIGFyZ3VtZW50LCBzaW5jZSB0aGF0IGhhcHBlbnMgdG8gYmUgdHJ1ZVxuICAvLyBpbiBldmVyeSBjYXNlLCBzbyB3ZSBkb24ndCBoYXZlIHRvIHRvdWNoIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBUaGVcbiAgLy8gb25seSBhZGRpdGlvbmFsIGFsbG9jYXRpb24gcmVxdWlyZWQgaXMgdGhlIGNvbXBsZXRpb24gcmVjb3JkLCB3aGljaFxuICAvLyBoYXMgYSBzdGFibGUgc2hhcGUgYW5kIHNvIGhvcGVmdWxseSBzaG91bGQgYmUgY2hlYXAgdG8gYWxsb2NhdGUuXG4gIGZ1bmN0aW9uIHRyeUNhdGNoKGZuLCBvYmosIGFyZykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcIm5vcm1hbFwiLCBhcmc6IGZuLmNhbGwob2JqLCBhcmcpIH07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcInRocm93XCIsIGFyZzogZXJyIH07XG4gICAgfVxuICB9XG5cbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkU3RhcnQgPSBcInN1c3BlbmRlZFN0YXJ0XCI7XG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkID0gXCJzdXNwZW5kZWRZaWVsZFwiO1xuICB2YXIgR2VuU3RhdGVFeGVjdXRpbmcgPSBcImV4ZWN1dGluZ1wiO1xuICB2YXIgR2VuU3RhdGVDb21wbGV0ZWQgPSBcImNvbXBsZXRlZFwiO1xuXG4gIC8vIFJldHVybmluZyB0aGlzIG9iamVjdCBmcm9tIHRoZSBpbm5lckZuIGhhcyB0aGUgc2FtZSBlZmZlY3QgYXNcbiAgLy8gYnJlYWtpbmcgb3V0IG9mIHRoZSBkaXNwYXRjaCBzd2l0Y2ggc3RhdGVtZW50LlxuICB2YXIgQ29udGludWVTZW50aW5lbCA9IHt9O1xuXG4gIC8vIER1bW15IGNvbnN0cnVjdG9yIGZ1bmN0aW9ucyB0aGF0IHdlIHVzZSBhcyB0aGUgLmNvbnN0cnVjdG9yIGFuZFxuICAvLyAuY29uc3RydWN0b3IucHJvdG90eXBlIHByb3BlcnRpZXMgZm9yIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0cy4gRm9yIGZ1bGwgc3BlYyBjb21wbGlhbmNlLCB5b3UgbWF5IHdpc2ggdG8gY29uZmlndXJlIHlvdXJcbiAgLy8gbWluaWZpZXIgbm90IHRvIG1hbmdsZSB0aGUgbmFtZXMgb2YgdGhlc2UgdHdvIGZ1bmN0aW9ucy5cbiAgZnVuY3Rpb24gR2VuZXJhdG9yKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb24oKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpIHt9XG5cbiAgLy8gVGhpcyBpcyBhIHBvbHlmaWxsIGZvciAlSXRlcmF0b3JQcm90b3R5cGUlIGZvciBlbnZpcm9ubWVudHMgdGhhdFxuICAvLyBkb24ndCBuYXRpdmVseSBzdXBwb3J0IGl0LlxuICB2YXIgSXRlcmF0b3JQcm90b3R5cGUgPSB7fTtcbiAgZGVmaW5lKEl0ZXJhdG9yUHJvdG90eXBlLCBpdGVyYXRvclN5bWJvbCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9KTtcblxuICB2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG4gIHZhciBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvICYmIGdldFByb3RvKGdldFByb3RvKHZhbHVlcyhbXSkpKTtcbiAgaWYgKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICYmXG4gICAgICBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAhPT0gT3AgJiZcbiAgICAgIGhhc093bi5jYWxsKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlLCBpdGVyYXRvclN5bWJvbCkpIHtcbiAgICAvLyBUaGlzIGVudmlyb25tZW50IGhhcyBhIG5hdGl2ZSAlSXRlcmF0b3JQcm90b3R5cGUlOyB1c2UgaXQgaW5zdGVhZFxuICAgIC8vIG9mIHRoZSBwb2x5ZmlsbC5cbiAgICBJdGVyYXRvclByb3RvdHlwZSA9IE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlO1xuICB9XG5cbiAgdmFyIEdwID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUucHJvdG90eXBlID1cbiAgICBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSk7XG4gIEdlbmVyYXRvckZ1bmN0aW9uLnByb3RvdHlwZSA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICBkZWZpbmUoR3AsIFwiY29uc3RydWN0b3JcIiwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpO1xuICBkZWZpbmUoR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIFwiY29uc3RydWN0b3JcIiwgR2VuZXJhdG9yRnVuY3Rpb24pO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9IGRlZmluZShcbiAgICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSxcbiAgICB0b1N0cmluZ1RhZ1N5bWJvbCxcbiAgICBcIkdlbmVyYXRvckZ1bmN0aW9uXCJcbiAgKTtcblxuICAvLyBIZWxwZXIgZm9yIGRlZmluaW5nIHRoZSAubmV4dCwgLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzIG9mIHRoZVxuICAvLyBJdGVyYXRvciBpbnRlcmZhY2UgaW4gdGVybXMgb2YgYSBzaW5nbGUgLl9pbnZva2UgbWV0aG9kLlxuICBmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHMocHJvdG90eXBlKSB7XG4gICAgW1wibmV4dFwiLCBcInRocm93XCIsIFwicmV0dXJuXCJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICBkZWZpbmUocHJvdG90eXBlLCBtZXRob2QsIGZ1bmN0aW9uKGFyZykge1xuICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKG1ldGhvZCwgYXJnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgdmFyIGN0b3IgPSB0eXBlb2YgZ2VuRnVuID09PSBcImZ1bmN0aW9uXCIgJiYgZ2VuRnVuLmNvbnN0cnVjdG9yO1xuICAgIHJldHVybiBjdG9yXG4gICAgICA/IGN0b3IgPT09IEdlbmVyYXRvckZ1bmN0aW9uIHx8XG4gICAgICAgIC8vIEZvciB0aGUgbmF0aXZlIEdlbmVyYXRvckZ1bmN0aW9uIGNvbnN0cnVjdG9yLCB0aGUgYmVzdCB3ZSBjYW5cbiAgICAgICAgLy8gZG8gaXMgdG8gY2hlY2sgaXRzIC5uYW1lIHByb3BlcnR5LlxuICAgICAgICAoY3Rvci5kaXNwbGF5TmFtZSB8fCBjdG9yLm5hbWUpID09PSBcIkdlbmVyYXRvckZ1bmN0aW9uXCJcbiAgICAgIDogZmFsc2U7XG4gIH07XG5cbiAgZXhwb3J0cy5tYXJrID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGdlbkZ1biwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZW5GdW4uX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gICAgICBkZWZpbmUoZ2VuRnVuLCB0b1N0cmluZ1RhZ1N5bWJvbCwgXCJHZW5lcmF0b3JGdW5jdGlvblwiKTtcbiAgICB9XG4gICAgZ2VuRnVuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoR3ApO1xuICAgIHJldHVybiBnZW5GdW47XG4gIH07XG5cbiAgLy8gV2l0aGluIHRoZSBib2R5IG9mIGFueSBhc3luYyBmdW5jdGlvbiwgYGF3YWl0IHhgIGlzIHRyYW5zZm9ybWVkIHRvXG4gIC8vIGB5aWVsZCByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoeClgLCBzbyB0aGF0IHRoZSBydW50aW1lIGNhbiB0ZXN0XG4gIC8vIGBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpYCB0byBkZXRlcm1pbmUgaWYgdGhlIHlpZWxkZWQgdmFsdWUgaXNcbiAgLy8gbWVhbnQgdG8gYmUgYXdhaXRlZC5cbiAgZXhwb3J0cy5hd3JhcCA9IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiB7IF9fYXdhaXQ6IGFyZyB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIEFzeW5jSXRlcmF0b3IoZ2VuZXJhdG9yLCBQcm9taXNlSW1wbCkge1xuICAgIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goZ2VuZXJhdG9yW21ldGhvZF0sIGdlbmVyYXRvciwgYXJnKTtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHJlamVjdChyZWNvcmQuYXJnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByZXN1bHQgPSByZWNvcmQuYXJnO1xuICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUuX19hd2FpdCkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaW52b2tlKFwibmV4dFwiLCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGludm9rZShcInRocm93XCIsIGVyciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uKHVud3JhcHBlZCkge1xuICAgICAgICAgIC8vIFdoZW4gYSB5aWVsZGVkIFByb21pc2UgaXMgcmVzb2x2ZWQsIGl0cyBmaW5hbCB2YWx1ZSBiZWNvbWVzXG4gICAgICAgICAgLy8gdGhlIC52YWx1ZSBvZiB0aGUgUHJvbWlzZTx7dmFsdWUsZG9uZX0+IHJlc3VsdCBmb3IgdGhlXG4gICAgICAgICAgLy8gY3VycmVudCBpdGVyYXRpb24uXG4gICAgICAgICAgcmVzdWx0LnZhbHVlID0gdW53cmFwcGVkO1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAvLyBJZiBhIHJlamVjdGVkIFByb21pc2Ugd2FzIHlpZWxkZWQsIHRocm93IHRoZSByZWplY3Rpb24gYmFja1xuICAgICAgICAgIC8vIGludG8gdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBzbyBpdCBjYW4gYmUgaGFuZGxlZCB0aGVyZS5cbiAgICAgICAgICByZXR1cm4gaW52b2tlKFwidGhyb3dcIiwgZXJyb3IsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBwcmV2aW91c1Byb21pc2U7XG5cbiAgICBmdW5jdGlvbiBlbnF1ZXVlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlSW1wbChmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJldmlvdXNQcm9taXNlID1cbiAgICAgICAgLy8gSWYgZW5xdWV1ZSBoYXMgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIHdlIHdhbnQgdG8gd2FpdCB1bnRpbFxuICAgICAgICAvLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSxcbiAgICAgICAgLy8gc28gdGhhdCByZXN1bHRzIGFyZSBhbHdheXMgZGVsaXZlcmVkIGluIHRoZSBjb3JyZWN0IG9yZGVyLiBJZlxuICAgICAgICAvLyBlbnF1ZXVlIGhhcyBub3QgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIGl0IGlzIGltcG9ydGFudCB0b1xuICAgICAgICAvLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSxcbiAgICAgICAgLy8gc28gdGhhdCB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhcyB0aGUgb3Bwb3J0dW5pdHkgdG8gZG9cbiAgICAgICAgLy8gYW55IG5lY2Vzc2FyeSBzZXR1cCBpbiBhIHByZWRpY3RhYmxlIHdheS4gVGhpcyBwcmVkaWN0YWJpbGl0eVxuICAgICAgICAvLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0c1xuICAgICAgICAvLyBleGVjdXRvciBjYWxsYmFjaywgYW5kIHdoeSBhc3luYyBmdW5jdGlvbnMgc3luY2hyb25vdXNseVxuICAgICAgICAvLyBleGVjdXRlIGNvZGUgYmVmb3JlIHRoZSBmaXJzdCBhd2FpdC4gU2luY2Ugd2UgaW1wbGVtZW50IHNpbXBsZVxuICAgICAgICAvLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseVxuICAgICAgICAvLyBpbXBvcnRhbnQgdG8gZ2V0IHRoaXMgcmlnaHQsIGV2ZW4gdGhvdWdoIGl0IHJlcXVpcmVzIGNhcmUuXG4gICAgICAgIHByZXZpb3VzUHJvbWlzZSA/IHByZXZpb3VzUHJvbWlzZS50aGVuKFxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLFxuICAgICAgICAgIC8vIEF2b2lkIHByb3BhZ2F0aW5nIGZhaWx1cmVzIHRvIFByb21pc2VzIHJldHVybmVkIGJ5IGxhdGVyXG4gICAgICAgICAgLy8gaW52b2NhdGlvbnMgb2YgdGhlIGl0ZXJhdG9yLlxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnXG4gICAgICAgICkgOiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpO1xuICAgIH1cblxuICAgIC8vIERlZmluZSB0aGUgdW5pZmllZCBoZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byBpbXBsZW1lbnQgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiAoc2VlIGRlZmluZUl0ZXJhdG9yTWV0aG9kcykuXG4gICAgdGhpcy5faW52b2tlID0gZW5xdWV1ZTtcbiAgfVxuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSk7XG4gIGRlZmluZShBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSwgYXN5bmNJdGVyYXRvclN5bWJvbCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9KTtcbiAgZXhwb3J0cy5Bc3luY0l0ZXJhdG9yID0gQXN5bmNJdGVyYXRvcjtcblxuICAvLyBOb3RlIHRoYXQgc2ltcGxlIGFzeW5jIGZ1bmN0aW9ucyBhcmUgaW1wbGVtZW50ZWQgb24gdG9wIG9mXG4gIC8vIEFzeW5jSXRlcmF0b3Igb2JqZWN0czsgdGhleSBqdXN0IHJldHVybiBhIFByb21pc2UgZm9yIHRoZSB2YWx1ZSBvZlxuICAvLyB0aGUgZmluYWwgcmVzdWx0IHByb2R1Y2VkIGJ5IHRoZSBpdGVyYXRvci5cbiAgZXhwb3J0cy5hc3luYyA9IGZ1bmN0aW9uKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0LCBQcm9taXNlSW1wbCkge1xuICAgIGlmIChQcm9taXNlSW1wbCA9PT0gdm9pZCAwKSBQcm9taXNlSW1wbCA9IFByb21pc2U7XG5cbiAgICB2YXIgaXRlciA9IG5ldyBBc3luY0l0ZXJhdG9yKFxuICAgICAgd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCksXG4gICAgICBQcm9taXNlSW1wbFxuICAgICk7XG5cbiAgICByZXR1cm4gZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uKG91dGVyRm4pXG4gICAgICA/IGl0ZXIgLy8gSWYgb3V0ZXJGbiBpcyBhIGdlbmVyYXRvciwgcmV0dXJuIHRoZSBmdWxsIGl0ZXJhdG9yLlxuICAgICAgOiBpdGVyLm5leHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQuZG9uZSA/IHJlc3VsdC52YWx1ZSA6IGl0ZXIubmV4dCgpO1xuICAgICAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpIHtcbiAgICB2YXIgc3RhdGUgPSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZykge1xuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUV4ZWN1dGluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlQ29tcGxldGVkKSB7XG4gICAgICAgIGlmIChtZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHRocm93IGFyZztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJlIGZvcmdpdmluZywgcGVyIDI1LjMuMy4zLjMgb2YgdGhlIHNwZWM6XG4gICAgICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1nZW5lcmF0b3JyZXN1bWVcbiAgICAgICAgcmV0dXJuIGRvbmVSZXN1bHQoKTtcbiAgICAgIH1cblxuICAgICAgY29udGV4dC5tZXRob2QgPSBtZXRob2Q7XG4gICAgICBjb250ZXh0LmFyZyA9IGFyZztcblxuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIGRlbGVnYXRlID0gY29udGV4dC5kZWxlZ2F0ZTtcbiAgICAgICAgaWYgKGRlbGVnYXRlKSB7XG4gICAgICAgICAgdmFyIGRlbGVnYXRlUmVzdWx0ID0gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7XG4gICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQgPT09IENvbnRpbnVlU2VudGluZWwpIGNvbnRpbnVlO1xuICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlUmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgICAvLyBTZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgICAgIGNvbnRleHQuc2VudCA9IGNvbnRleHQuX3NlbnQgPSBjb250ZXh0LmFyZztcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQpIHtcbiAgICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgICB0aHJvdyBjb250ZXh0LmFyZztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKTtcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInJldHVyblwiKSB7XG4gICAgICAgICAgY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgY29udGV4dC5hcmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUV4ZWN1dGluZztcblxuICAgICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG4gICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIikge1xuICAgICAgICAgIC8vIElmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gZnJvbSBpbm5lckZuLCB3ZSBsZWF2ZSBzdGF0ZSA9PT1cbiAgICAgICAgICAvLyBHZW5TdGF0ZUV4ZWN1dGluZyBhbmQgbG9vcCBiYWNrIGZvciBhbm90aGVyIGludm9jYXRpb24uXG4gICAgICAgICAgc3RhdGUgPSBjb250ZXh0LmRvbmVcbiAgICAgICAgICAgID8gR2VuU3RhdGVDb21wbGV0ZWRcbiAgICAgICAgICAgIDogR2VuU3RhdGVTdXNwZW5kZWRZaWVsZDtcblxuICAgICAgICAgIGlmIChyZWNvcmQuYXJnID09PSBDb250aW51ZVNlbnRpbmVsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IHJlY29yZC5hcmcsXG4gICAgICAgICAgICBkb25lOiBjb250ZXh0LmRvbmVcbiAgICAgICAgICB9O1xuXG4gICAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgLy8gRGlzcGF0Y2ggdGhlIGV4Y2VwdGlvbiBieSBsb29waW5nIGJhY2sgYXJvdW5kIHRvIHRoZVxuICAgICAgICAgIC8vIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpIGNhbGwgYWJvdmUuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIENhbGwgZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdKGNvbnRleHQuYXJnKSBhbmQgaGFuZGxlIHRoZVxuICAvLyByZXN1bHQsIGVpdGhlciBieSByZXR1cm5pbmcgYSB7IHZhbHVlLCBkb25lIH0gcmVzdWx0IGZyb20gdGhlXG4gIC8vIGRlbGVnYXRlIGl0ZXJhdG9yLCBvciBieSBtb2RpZnlpbmcgY29udGV4dC5tZXRob2QgYW5kIGNvbnRleHQuYXJnLFxuICAvLyBzZXR0aW5nIGNvbnRleHQuZGVsZWdhdGUgdG8gbnVsbCwgYW5kIHJldHVybmluZyB0aGUgQ29udGludWVTZW50aW5lbC5cbiAgZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCkge1xuICAgIHZhciBtZXRob2QgPSBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF07XG4gICAgaWYgKG1ldGhvZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBBIC50aHJvdyBvciAucmV0dXJuIHdoZW4gdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBubyAudGhyb3dcbiAgICAgIC8vIG1ldGhvZCBhbHdheXMgdGVybWluYXRlcyB0aGUgeWllbGQqIGxvb3AuXG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgLy8gTm90ZTogW1wicmV0dXJuXCJdIG11c3QgYmUgdXNlZCBmb3IgRVMzIHBhcnNpbmcgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgaWYgKGRlbGVnYXRlLml0ZXJhdG9yW1wicmV0dXJuXCJdKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBhIHJldHVybiBtZXRob2QsIGdpdmUgaXQgYVxuICAgICAgICAgIC8vIGNoYW5jZSB0byBjbGVhbiB1cC5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwicmV0dXJuXCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7XG5cbiAgICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgLy8gSWYgbWF5YmVJbnZva2VEZWxlZ2F0ZShjb250ZXh0KSBjaGFuZ2VkIGNvbnRleHQubWV0aG9kIGZyb21cbiAgICAgICAgICAgIC8vIFwicmV0dXJuXCIgdG8gXCJ0aHJvd1wiLCBsZXQgdGhhdCBvdmVycmlkZSB0aGUgVHlwZUVycm9yIGJlbG93LlxuICAgICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICBcIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2RcIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChtZXRob2QsIGRlbGVnYXRlLml0ZXJhdG9yLCBjb250ZXh0LmFyZyk7XG5cbiAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIHZhciBpbmZvID0gcmVjb3JkLmFyZztcblxuICAgIGlmICghIGluZm8pIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKFwiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3RcIik7XG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIGlmIChpbmZvLmRvbmUpIHtcbiAgICAgIC8vIEFzc2lnbiB0aGUgcmVzdWx0IG9mIHRoZSBmaW5pc2hlZCBkZWxlZ2F0ZSB0byB0aGUgdGVtcG9yYXJ5XG4gICAgICAvLyB2YXJpYWJsZSBzcGVjaWZpZWQgYnkgZGVsZWdhdGUucmVzdWx0TmFtZSAoc2VlIGRlbGVnYXRlWWllbGQpLlxuICAgICAgY29udGV4dFtkZWxlZ2F0ZS5yZXN1bHROYW1lXSA9IGluZm8udmFsdWU7XG5cbiAgICAgIC8vIFJlc3VtZSBleGVjdXRpb24gYXQgdGhlIGRlc2lyZWQgbG9jYXRpb24gKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHQubmV4dCA9IGRlbGVnYXRlLm5leHRMb2M7XG5cbiAgICAgIC8vIElmIGNvbnRleHQubWV0aG9kIHdhcyBcInRocm93XCIgYnV0IHRoZSBkZWxlZ2F0ZSBoYW5kbGVkIHRoZVxuICAgICAgLy8gZXhjZXB0aW9uLCBsZXQgdGhlIG91dGVyIGdlbmVyYXRvciBwcm9jZWVkIG5vcm1hbGx5LiBJZlxuICAgICAgLy8gY29udGV4dC5tZXRob2Qgd2FzIFwibmV4dFwiLCBmb3JnZXQgY29udGV4dC5hcmcgc2luY2UgaXQgaGFzIGJlZW5cbiAgICAgIC8vIFwiY29uc3VtZWRcIiBieSB0aGUgZGVsZWdhdGUgaXRlcmF0b3IuIElmIGNvbnRleHQubWV0aG9kIHdhc1xuICAgICAgLy8gXCJyZXR1cm5cIiwgYWxsb3cgdGhlIG9yaWdpbmFsIC5yZXR1cm4gY2FsbCB0byBjb250aW51ZSBpbiB0aGVcbiAgICAgIC8vIG91dGVyIGdlbmVyYXRvci5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCAhPT0gXCJyZXR1cm5cIikge1xuICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZS15aWVsZCB0aGUgcmVzdWx0IHJldHVybmVkIGJ5IHRoZSBkZWxlZ2F0ZSBtZXRob2QuXG4gICAgICByZXR1cm4gaW5mbztcbiAgICB9XG5cbiAgICAvLyBUaGUgZGVsZWdhdGUgaXRlcmF0b3IgaXMgZmluaXNoZWQsIHNvIGZvcmdldCBpdCBhbmQgY29udGludWUgd2l0aFxuICAgIC8vIHRoZSBvdXRlciBnZW5lcmF0b3IuXG4gICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gIH1cblxuICAvLyBEZWZpbmUgR2VuZXJhdG9yLnByb3RvdHlwZS57bmV4dCx0aHJvdyxyZXR1cm59IGluIHRlcm1zIG9mIHRoZVxuICAvLyB1bmlmaWVkIC5faW52b2tlIGhlbHBlciBtZXRob2QuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhHcCk7XG5cbiAgZGVmaW5lKEdwLCB0b1N0cmluZ1RhZ1N5bWJvbCwgXCJHZW5lcmF0b3JcIik7XG5cbiAgLy8gQSBHZW5lcmF0b3Igc2hvdWxkIGFsd2F5cyByZXR1cm4gaXRzZWxmIGFzIHRoZSBpdGVyYXRvciBvYmplY3Qgd2hlbiB0aGVcbiAgLy8gQEBpdGVyYXRvciBmdW5jdGlvbiBpcyBjYWxsZWQgb24gaXQuIFNvbWUgYnJvd3NlcnMnIGltcGxlbWVudGF0aW9ucyBvZiB0aGVcbiAgLy8gaXRlcmF0b3IgcHJvdG90eXBlIGNoYWluIGluY29ycmVjdGx5IGltcGxlbWVudCB0aGlzLCBjYXVzaW5nIHRoZSBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0IHRvIG5vdCBiZSByZXR1cm5lZCBmcm9tIHRoaXMgY2FsbC4gVGhpcyBlbnN1cmVzIHRoYXQgZG9lc24ndCBoYXBwZW4uXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvaXNzdWVzLzI3NCBmb3IgbW9yZSBkZXRhaWxzLlxuICBkZWZpbmUoR3AsIGl0ZXJhdG9yU3ltYm9sLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSk7XG5cbiAgZGVmaW5lKEdwLCBcInRvU3RyaW5nXCIsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgR2VuZXJhdG9yXVwiO1xuICB9KTtcblxuICBmdW5jdGlvbiBwdXNoVHJ5RW50cnkobG9jcykge1xuICAgIHZhciBlbnRyeSA9IHsgdHJ5TG9jOiBsb2NzWzBdIH07XG5cbiAgICBpZiAoMSBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5jYXRjaExvYyA9IGxvY3NbMV07XG4gICAgfVxuXG4gICAgaWYgKDIgaW4gbG9jcykge1xuICAgICAgZW50cnkuZmluYWxseUxvYyA9IGxvY3NbMl07XG4gICAgICBlbnRyeS5hZnRlckxvYyA9IGxvY3NbM107XG4gICAgfVxuXG4gICAgdGhpcy50cnlFbnRyaWVzLnB1c2goZW50cnkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXRUcnlFbnRyeShlbnRyeSkge1xuICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uIHx8IHt9O1xuICAgIHJlY29yZC50eXBlID0gXCJub3JtYWxcIjtcbiAgICBkZWxldGUgcmVjb3JkLmFyZztcbiAgICBlbnRyeS5jb21wbGV0aW9uID0gcmVjb3JkO1xuICB9XG5cbiAgZnVuY3Rpb24gQ29udGV4dCh0cnlMb2NzTGlzdCkge1xuICAgIC8vIFRoZSByb290IGVudHJ5IG9iamVjdCAoZWZmZWN0aXZlbHkgYSB0cnkgc3RhdGVtZW50IHdpdGhvdXQgYSBjYXRjaFxuICAgIC8vIG9yIGEgZmluYWxseSBibG9jaykgZ2l2ZXMgdXMgYSBwbGFjZSB0byBzdG9yZSB2YWx1ZXMgdGhyb3duIGZyb21cbiAgICAvLyBsb2NhdGlvbnMgd2hlcmUgdGhlcmUgaXMgbm8gZW5jbG9zaW5nIHRyeSBzdGF0ZW1lbnQuXG4gICAgdGhpcy50cnlFbnRyaWVzID0gW3sgdHJ5TG9jOiBcInJvb3RcIiB9XTtcbiAgICB0cnlMb2NzTGlzdC5mb3JFYWNoKHB1c2hUcnlFbnRyeSwgdGhpcyk7XG4gICAgdGhpcy5yZXNldCh0cnVlKTtcbiAgfVxuXG4gIGV4cG9ydHMua2V5cyA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgfVxuICAgIGtleXMucmV2ZXJzZSgpO1xuXG4gICAgLy8gUmF0aGVyIHRoYW4gcmV0dXJuaW5nIGFuIG9iamVjdCB3aXRoIGEgbmV4dCBtZXRob2QsIHdlIGtlZXBcbiAgICAvLyB0aGluZ3Mgc2ltcGxlIGFuZCByZXR1cm4gdGhlIG5leHQgZnVuY3Rpb24gaXRzZWxmLlxuICAgIHJldHVybiBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgd2hpbGUgKGtleXMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzLnBvcCgpO1xuICAgICAgICBpZiAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICAgIG5leHQudmFsdWUgPSBrZXk7XG4gICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVG8gYXZvaWQgY3JlYXRpbmcgYW4gYWRkaXRpb25hbCBvYmplY3QsIHdlIGp1c3QgaGFuZyB0aGUgLnZhbHVlXG4gICAgICAvLyBhbmQgLmRvbmUgcHJvcGVydGllcyBvZmYgdGhlIG5leHQgZnVuY3Rpb24gb2JqZWN0IGl0c2VsZi4gVGhpc1xuICAgICAgLy8gYWxzbyBlbnN1cmVzIHRoYXQgdGhlIG1pbmlmaWVyIHdpbGwgbm90IGFub255bWl6ZSB0aGUgZnVuY3Rpb24uXG4gICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfTtcbiAgfTtcblxuICBmdW5jdGlvbiB2YWx1ZXMoaXRlcmFibGUpIHtcbiAgICBpZiAoaXRlcmFibGUpIHtcbiAgICAgIHZhciBpdGVyYXRvck1ldGhvZCA9IGl0ZXJhYmxlW2l0ZXJhdG9yU3ltYm9sXTtcbiAgICAgIGlmIChpdGVyYXRvck1ldGhvZCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JNZXRob2QuY2FsbChpdGVyYWJsZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgaXRlcmFibGUubmV4dCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBpdGVyYWJsZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc05hTihpdGVyYWJsZS5sZW5ndGgpKSB7XG4gICAgICAgIHZhciBpID0gLTEsIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICAgIHdoaWxlICgrK2kgPCBpdGVyYWJsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24uY2FsbChpdGVyYWJsZSwgaSkpIHtcbiAgICAgICAgICAgICAgbmV4dC52YWx1ZSA9IGl0ZXJhYmxlW2ldO1xuICAgICAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbmV4dC52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuXG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG5leHQubmV4dCA9IG5leHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGFuIGl0ZXJhdG9yIHdpdGggbm8gdmFsdWVzLlxuICAgIHJldHVybiB7IG5leHQ6IGRvbmVSZXN1bHQgfTtcbiAgfVxuICBleHBvcnRzLnZhbHVlcyA9IHZhbHVlcztcblxuICBmdW5jdGlvbiBkb25lUmVzdWx0KCkge1xuICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgfVxuXG4gIENvbnRleHQucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBDb250ZXh0LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKHNraXBUZW1wUmVzZXQpIHtcbiAgICAgIHRoaXMucHJldiA9IDA7XG4gICAgICB0aGlzLm5leHQgPSAwO1xuICAgICAgLy8gUmVzZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICB0aGlzLmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuXG4gICAgICB0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KTtcblxuICAgICAgaWYgKCFza2lwVGVtcFJlc2V0KSB7XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcykge1xuICAgICAgICAgIC8vIE5vdCBzdXJlIGFib3V0IHRoZSBvcHRpbWFsIG9yZGVyIG9mIHRoZXNlIGNvbmRpdGlvbnM6XG4gICAgICAgICAgaWYgKG5hbWUuY2hhckF0KDApID09PSBcInRcIiAmJlxuICAgICAgICAgICAgICBoYXNPd24uY2FsbCh0aGlzLCBuYW1lKSAmJlxuICAgICAgICAgICAgICAhaXNOYU4oK25hbWUuc2xpY2UoMSkpKSB7XG4gICAgICAgICAgICB0aGlzW25hbWVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG5cbiAgICAgIHZhciByb290RW50cnkgPSB0aGlzLnRyeUVudHJpZXNbMF07XG4gICAgICB2YXIgcm9vdFJlY29yZCA9IHJvb3RFbnRyeS5jb21wbGV0aW9uO1xuICAgICAgaWYgKHJvb3RSZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJvb3RSZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5ydmFsO1xuICAgIH0sXG5cbiAgICBkaXNwYXRjaEV4Y2VwdGlvbjogZnVuY3Rpb24oZXhjZXB0aW9uKSB7XG4gICAgICBpZiAodGhpcy5kb25lKSB7XG4gICAgICAgIHRocm93IGV4Y2VwdGlvbjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICAgICAgZnVuY3Rpb24gaGFuZGxlKGxvYywgY2F1Z2h0KSB7XG4gICAgICAgIHJlY29yZC50eXBlID0gXCJ0aHJvd1wiO1xuICAgICAgICByZWNvcmQuYXJnID0gZXhjZXB0aW9uO1xuICAgICAgICBjb250ZXh0Lm5leHQgPSBsb2M7XG5cbiAgICAgICAgaWYgKGNhdWdodCkge1xuICAgICAgICAgIC8vIElmIHRoZSBkaXNwYXRjaGVkIGV4Y2VwdGlvbiB3YXMgY2F1Z2h0IGJ5IGEgY2F0Y2ggYmxvY2ssXG4gICAgICAgICAgLy8gdGhlbiBsZXQgdGhhdCBjYXRjaCBibG9jayBoYW5kbGUgdGhlIGV4Y2VwdGlvbiBub3JtYWxseS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICEhIGNhdWdodDtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IFwicm9vdFwiKSB7XG4gICAgICAgICAgLy8gRXhjZXB0aW9uIHRocm93biBvdXRzaWRlIG9mIGFueSB0cnkgYmxvY2sgdGhhdCBjb3VsZCBoYW5kbGVcbiAgICAgICAgICAvLyBpdCwgc28gc2V0IHRoZSBjb21wbGV0aW9uIHZhbHVlIG9mIHRoZSBlbnRpcmUgZnVuY3Rpb24gdG9cbiAgICAgICAgICAvLyB0aHJvdyB0aGUgZXhjZXB0aW9uLlxuICAgICAgICAgIHJldHVybiBoYW5kbGUoXCJlbmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldikge1xuICAgICAgICAgIHZhciBoYXNDYXRjaCA9IGhhc093bi5jYWxsKGVudHJ5LCBcImNhdGNoTG9jXCIpO1xuICAgICAgICAgIHZhciBoYXNGaW5hbGx5ID0gaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKTtcblxuICAgICAgICAgIGlmIChoYXNDYXRjaCAmJiBoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzQ2F0Y2gpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYWJydXB0OiBmdW5jdGlvbih0eXBlLCBhcmcpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKSAmJlxuICAgICAgICAgICAgdGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgIHZhciBmaW5hbGx5RW50cnkgPSBlbnRyeTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZmluYWxseUVudHJ5ICYmXG4gICAgICAgICAgKHR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgICB0eXBlID09PSBcImNvbnRpbnVlXCIpICYmXG4gICAgICAgICAgZmluYWxseUVudHJ5LnRyeUxvYyA8PSBhcmcgJiZcbiAgICAgICAgICBhcmcgPD0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgLy8gSWdub3JlIHRoZSBmaW5hbGx5IGVudHJ5IGlmIGNvbnRyb2wgaXMgbm90IGp1bXBpbmcgdG8gYVxuICAgICAgICAvLyBsb2NhdGlvbiBvdXRzaWRlIHRoZSB0cnkvY2F0Y2ggYmxvY2suXG4gICAgICAgIGZpbmFsbHlFbnRyeSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciByZWNvcmQgPSBmaW5hbGx5RW50cnkgPyBmaW5hbGx5RW50cnkuY29tcGxldGlvbiA6IHt9O1xuICAgICAgcmVjb3JkLnR5cGUgPSB0eXBlO1xuICAgICAgcmVjb3JkLmFyZyA9IGFyZztcblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSkge1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICB0aGlzLm5leHQgPSBmaW5hbGx5RW50cnkuZmluYWxseUxvYztcbiAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlKHJlY29yZCk7XG4gICAgfSxcblxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbihyZWNvcmQsIGFmdGVyTG9jKSB7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgIHJlY29yZC50eXBlID09PSBcImNvbnRpbnVlXCIpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gcmVjb3JkLmFyZztcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgdGhpcy5ydmFsID0gdGhpcy5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwicmV0dXJuXCI7XG4gICAgICAgIHRoaXMubmV4dCA9IFwiZW5kXCI7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiICYmIGFmdGVyTG9jKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IGFmdGVyTG9jO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9LFxuXG4gICAgZmluaXNoOiBmdW5jdGlvbihmaW5hbGx5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LmZpbmFsbHlMb2MgPT09IGZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB0aGlzLmNvbXBsZXRlKGVudHJ5LmNvbXBsZXRpb24sIGVudHJ5LmFmdGVyTG9jKTtcbiAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBcImNhdGNoXCI6IGZ1bmN0aW9uKHRyeUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IHRyeUxvYykge1xuICAgICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICB2YXIgdGhyb3duID0gcmVjb3JkLmFyZztcbiAgICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGhyb3duO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBjb250ZXh0LmNhdGNoIG1ldGhvZCBtdXN0IG9ubHkgYmUgY2FsbGVkIHdpdGggYSBsb2NhdGlvblxuICAgICAgLy8gYXJndW1lbnQgdGhhdCBjb3JyZXNwb25kcyB0byBhIGtub3duIGNhdGNoIGJsb2NrLlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpO1xuICAgIH0sXG5cbiAgICBkZWxlZ2F0ZVlpZWxkOiBmdW5jdGlvbihpdGVyYWJsZSwgcmVzdWx0TmFtZSwgbmV4dExvYykge1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IHtcbiAgICAgICAgaXRlcmF0b3I6IHZhbHVlcyhpdGVyYWJsZSksXG4gICAgICAgIHJlc3VsdE5hbWU6IHJlc3VsdE5hbWUsXG4gICAgICAgIG5leHRMb2M6IG5leHRMb2NcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgLy8gRGVsaWJlcmF0ZWx5IGZvcmdldCB0aGUgbGFzdCBzZW50IHZhbHVlIHNvIHRoYXQgd2UgZG9uJ3RcbiAgICAgICAgLy8gYWNjaWRlbnRhbGx5IHBhc3MgaXQgb24gdG8gdGhlIGRlbGVnYXRlLlxuICAgICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuICB9O1xuXG4gIC8vIFJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGVcbiAgLy8gb3Igbm90LCByZXR1cm4gdGhlIHJ1bnRpbWUgb2JqZWN0IHNvIHRoYXQgd2UgY2FuIGRlY2xhcmUgdGhlIHZhcmlhYmxlXG4gIC8vIHJlZ2VuZXJhdG9yUnVudGltZSBpbiB0aGUgb3V0ZXIgc2NvcGUsIHdoaWNoIGFsbG93cyB0aGlzIG1vZHVsZSB0byBiZVxuICAvLyBpbmplY3RlZCBlYXNpbHkgYnkgYGJpbi9yZWdlbmVyYXRvciAtLWluY2x1ZGUtcnVudGltZSBzY3JpcHQuanNgLlxuICByZXR1cm4gZXhwb3J0cztcblxufShcbiAgLy8gSWYgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlLCB1c2UgbW9kdWxlLmV4cG9ydHNcbiAgLy8gYXMgdGhlIHJlZ2VuZXJhdG9yUnVudGltZSBuYW1lc3BhY2UuIE90aGVyd2lzZSBjcmVhdGUgYSBuZXcgZW1wdHlcbiAgLy8gb2JqZWN0LiBFaXRoZXIgd2F5LCB0aGUgcmVzdWx0aW5nIG9iamVjdCB3aWxsIGJlIHVzZWQgdG8gaW5pdGlhbGl6ZVxuICAvLyB0aGUgcmVnZW5lcmF0b3JSdW50aW1lIHZhcmlhYmxlIGF0IHRoZSB0b3Agb2YgdGhpcyBmaWxlLlxuICB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiID8gbW9kdWxlLmV4cG9ydHMgOiB7fVxuKSk7XG5cbnRyeSB7XG4gIHJlZ2VuZXJhdG9yUnVudGltZSA9IHJ1bnRpbWU7XG59IGNhdGNoIChhY2NpZGVudGFsU3RyaWN0TW9kZSkge1xuICAvLyBUaGlzIG1vZHVsZSBzaG91bGQgbm90IGJlIHJ1bm5pbmcgaW4gc3RyaWN0IG1vZGUsIHNvIHRoZSBhYm92ZVxuICAvLyBhc3NpZ25tZW50IHNob3VsZCBhbHdheXMgd29yayB1bmxlc3Mgc29tZXRoaW5nIGlzIG1pc2NvbmZpZ3VyZWQuIEp1c3RcbiAgLy8gaW4gY2FzZSBydW50aW1lLmpzIGFjY2lkZW50YWxseSBydW5zIGluIHN0cmljdCBtb2RlLCBpbiBtb2Rlcm4gZW5naW5lc1xuICAvLyB3ZSBjYW4gZXhwbGljaXRseSBhY2Nlc3MgZ2xvYmFsVGhpcy4gSW4gb2xkZXIgZW5naW5lcyB3ZSBjYW4gZXNjYXBlXG4gIC8vIHN0cmljdCBtb2RlIHVzaW5nIGEgZ2xvYmFsIEZ1bmN0aW9uIGNhbGwuIFRoaXMgY291bGQgY29uY2VpdmFibHkgZmFpbFxuICAvLyBpZiBhIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IGZvcmJpZHMgdXNpbmcgRnVuY3Rpb24sIGJ1dCBpbiB0aGF0IGNhc2VcbiAgLy8gdGhlIHByb3BlciBzb2x1dGlvbiBpcyB0byBmaXggdGhlIGFjY2lkZW50YWwgc3RyaWN0IG1vZGUgcHJvYmxlbS4gSWZcbiAgLy8geW91J3ZlIG1pc2NvbmZpZ3VyZWQgeW91ciBidW5kbGVyIHRvIGZvcmNlIHN0cmljdCBtb2RlIGFuZCBhcHBsaWVkIGFcbiAgLy8gQ1NQIHRvIGZvcmJpZCBGdW5jdGlvbiwgYW5kIHlvdSdyZSBub3Qgd2lsbGluZyB0byBmaXggZWl0aGVyIG9mIHRob3NlXG4gIC8vIHByb2JsZW1zLCBwbGVhc2UgZGV0YWlsIHlvdXIgdW5pcXVlIHByZWRpY2FtZW50IGluIGEgR2l0SHViIGlzc3VlLlxuICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09IFwib2JqZWN0XCIpIHtcbiAgICBnbG9iYWxUaGlzLnJlZ2VuZXJhdG9yUnVudGltZSA9IHJ1bnRpbWU7XG4gIH0gZWxzZSB7XG4gICAgRnVuY3Rpb24oXCJyXCIsIFwicmVnZW5lcmF0b3JSdW50aW1lID0gclwiKShydW50aW1lKTtcbiAgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicmVnZW5lcmF0b3ItcnVudGltZVwiKTtcbiIsImZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHtcbiAgdHJ5IHtcbiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7XG4gICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZWplY3QoZXJyb3IpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpbmZvLmRvbmUpIHtcbiAgICByZXNvbHZlKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTtcblxuICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcIm5leHRcIiwgdmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJ0aHJvd1wiLCBlcnIpO1xuICAgICAgfVxuXG4gICAgICBfbmV4dCh1bmRlZmluZWQpO1xuICAgIH0pO1xuICB9O1xufSIsImltcG9ydCBfcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gXCJAYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvclwiO1xuaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yXCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCByYWYgZnJvbSBcInJjLXV0aWwvZXMvcmFmXCI7XG52YXIgU3RhdHVzUXVldWUgPSBbJ21lYXN1cmUnLCAnYWxpZ24nLCBudWxsLCAnbW90aW9uJ107XG5leHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKHZpc2libGUsIGRvTWVhc3VyZSkge1xuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUobnVsbCksXG4gICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIHN0YXR1cyA9IF91c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRJbnRlcm5hbFN0YXR1cyA9IF91c2VTdGF0ZTJbMV07XG5cbiAgdmFyIHJhZlJlZiA9IHVzZVJlZigpO1xuICB2YXIgZGVzdHJveVJlZiA9IHVzZVJlZihmYWxzZSk7XG5cbiAgZnVuY3Rpb24gc2V0U3RhdHVzKG5leHRTdGF0dXMpIHtcbiAgICBpZiAoIWRlc3Ryb3lSZWYuY3VycmVudCkge1xuICAgICAgc2V0SW50ZXJuYWxTdGF0dXMobmV4dFN0YXR1cyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsUmFmKCkge1xuICAgIHJhZi5jYW5jZWwocmFmUmVmLmN1cnJlbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ29OZXh0U3RhdHVzKGNhbGxiYWNrKSB7XG4gICAgY2FuY2VsUmFmKCk7XG4gICAgcmFmUmVmLmN1cnJlbnQgPSByYWYoZnVuY3Rpb24gKCkge1xuICAgICAgLy8gT25seSBhbGlnbiBzaG91bGQgYmUgbWFudWFsbHkgdHJpZ2dlclxuICAgICAgc2V0U3RhdHVzKGZ1bmN0aW9uIChwcmV2KSB7XG4gICAgICAgIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgICAgICAgY2FzZSAnYWxpZ24nOlxuICAgICAgICAgICAgcmV0dXJuICdtb3Rpb24nO1xuXG4gICAgICAgICAgY2FzZSAnbW90aW9uJzpcbiAgICAgICAgICAgIHJldHVybiAnc3RhYmxlJztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgIH0pO1xuICAgICAgY2FsbGJhY2sgPT09IG51bGwgfHwgY2FsbGJhY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNhbGxiYWNrKCk7XG4gICAgfSk7XG4gIH0gLy8gSW5pdCBzdGF0dXNcblxuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgc2V0U3RhdHVzKCdtZWFzdXJlJyk7XG4gIH0sIFt2aXNpYmxlXSk7IC8vIEdvIG5leHQgc3RhdHVzXG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBzd2l0Y2ggKHN0YXR1cykge1xuICAgICAgY2FzZSAnbWVhc3VyZSc6XG4gICAgICAgIGRvTWVhc3VyZSgpO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzKSB7XG4gICAgICByYWZSZWYuY3VycmVudCA9IHJhZiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7XG4gICAgICAgIHZhciBpbmRleCwgbmV4dFN0YXR1cztcbiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkge1xuICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBpbmRleCA9IFN0YXR1c1F1ZXVlLmluZGV4T2Yoc3RhdHVzKTtcbiAgICAgICAgICAgICAgICBuZXh0U3RhdHVzID0gU3RhdHVzUXVldWVbaW5kZXggKyAxXTtcblxuICAgICAgICAgICAgICAgIGlmIChuZXh0U3RhdHVzICYmIGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgc2V0U3RhdHVzKG5leHRTdGF0dXMpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgX2NhbGxlZSk7XG4gICAgICB9KSkpO1xuICAgIH1cbiAgfSwgW3N0YXR1c10pO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBkZXN0cm95UmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgY2FuY2VsUmFmKCk7XG4gICAgfTtcbiAgfSwgW10pO1xuICByZXR1cm4gW3N0YXR1cywgZ29OZXh0U3RhdHVzXTtcbn0pOyIsImltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIChzdHJldGNoKSB7XG4gIHZhciBfUmVhY3QkdXNlU3RhdGUgPSBSZWFjdC51c2VTdGF0ZSh7XG4gICAgd2lkdGg6IDAsXG4gICAgaGVpZ2h0OiAwXG4gIH0pLFxuICAgICAgX1JlYWN0JHVzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VTdGF0ZSwgMiksXG4gICAgICB0YXJnZXRTaXplID0gX1JlYWN0JHVzZVN0YXRlMlswXSxcbiAgICAgIHNldFRhcmdldFNpemUgPSBfUmVhY3QkdXNlU3RhdGUyWzFdO1xuXG4gIGZ1bmN0aW9uIG1lYXN1cmVTdHJldGNoKGVsZW1lbnQpIHtcbiAgICBzZXRUYXJnZXRTaXplKHtcbiAgICAgIHdpZHRoOiBlbGVtZW50Lm9mZnNldFdpZHRoLFxuICAgICAgaGVpZ2h0OiBlbGVtZW50Lm9mZnNldEhlaWdodFxuICAgIH0pO1xuICB9IC8vIE1lcmdlIHN0cmV0Y2ggc3R5bGVcblxuXG4gIHZhciBzdHlsZSA9IFJlYWN0LnVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHZhciBzaXplU3R5bGUgPSB7fTtcblxuICAgIGlmIChzdHJldGNoKSB7XG4gICAgICB2YXIgd2lkdGggPSB0YXJnZXRTaXplLndpZHRoLFxuICAgICAgICAgIGhlaWdodCA9IHRhcmdldFNpemUuaGVpZ2h0OyAvLyBTdHJldGNoIHdpdGggdGFyZ2V0XG5cbiAgICAgIGlmIChzdHJldGNoLmluZGV4T2YoJ2hlaWdodCcpICE9PSAtMSAmJiBoZWlnaHQpIHtcbiAgICAgICAgc2l6ZVN0eWxlLmhlaWdodCA9IGhlaWdodDtcbiAgICAgIH0gZWxzZSBpZiAoc3RyZXRjaC5pbmRleE9mKCdtaW5IZWlnaHQnKSAhPT0gLTEgJiYgaGVpZ2h0KSB7XG4gICAgICAgIHNpemVTdHlsZS5taW5IZWlnaHQgPSBoZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdHJldGNoLmluZGV4T2YoJ3dpZHRoJykgIT09IC0xICYmIHdpZHRoKSB7XG4gICAgICAgIHNpemVTdHlsZS53aWR0aCA9IHdpZHRoO1xuICAgICAgfSBlbHNlIGlmIChzdHJldGNoLmluZGV4T2YoJ21pbldpZHRoJykgIT09IC0xICYmIHdpZHRoKSB7XG4gICAgICAgIHNpemVTdHlsZS5taW5XaWR0aCA9IHdpZHRoO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzaXplU3R5bGU7XG4gIH0sIFtzdHJldGNoLCB0YXJnZXRTaXplXSk7XG4gIHJldHVybiBbc3R5bGUsIG1lYXN1cmVTdHJldGNoXTtcbn0pOyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBBbGlnbiBmcm9tICdyYy1hbGlnbic7XG5pbXBvcnQgQ1NTTW90aW9uIGZyb20gJ3JjLW1vdGlvbic7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB1c2VWaXNpYmxlU3RhdHVzIGZyb20gJy4vdXNlVmlzaWJsZVN0YXR1cyc7XG5pbXBvcnQgeyBnZXRNb3Rpb24gfSBmcm9tICcuLi91dGlscy9sZWdhY3lVdGlsJztcbmltcG9ydCB1c2VTdHJldGNoU3R5bGUgZnJvbSAnLi91c2VTdHJldGNoU3R5bGUnO1xudmFyIFBvcHVwSW5uZXIgPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAocHJvcHMsIHJlZikge1xuICB2YXIgdmlzaWJsZSA9IHByb3BzLnZpc2libGUsXG4gICAgICBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICBjbGFzc05hbWUgPSBwcm9wcy5jbGFzc05hbWUsXG4gICAgICBzdHlsZSA9IHByb3BzLnN0eWxlLFxuICAgICAgY2hpbGRyZW4gPSBwcm9wcy5jaGlsZHJlbixcbiAgICAgIHpJbmRleCA9IHByb3BzLnpJbmRleCxcbiAgICAgIHN0cmV0Y2ggPSBwcm9wcy5zdHJldGNoLFxuICAgICAgZGVzdHJveVBvcHVwT25IaWRlID0gcHJvcHMuZGVzdHJveVBvcHVwT25IaWRlLFxuICAgICAgZm9yY2VSZW5kZXIgPSBwcm9wcy5mb3JjZVJlbmRlcixcbiAgICAgIGFsaWduID0gcHJvcHMuYWxpZ24sXG4gICAgICBwb2ludCA9IHByb3BzLnBvaW50LFxuICAgICAgZ2V0Um9vdERvbU5vZGUgPSBwcm9wcy5nZXRSb290RG9tTm9kZSxcbiAgICAgIGdldENsYXNzTmFtZUZyb21BbGlnbiA9IHByb3BzLmdldENsYXNzTmFtZUZyb21BbGlnbixcbiAgICAgIG9uQWxpZ24gPSBwcm9wcy5vbkFsaWduLFxuICAgICAgb25Nb3VzZUVudGVyID0gcHJvcHMub25Nb3VzZUVudGVyLFxuICAgICAgb25Nb3VzZUxlYXZlID0gcHJvcHMub25Nb3VzZUxlYXZlLFxuICAgICAgb25Nb3VzZURvd24gPSBwcm9wcy5vbk1vdXNlRG93bixcbiAgICAgIG9uVG91Y2hTdGFydCA9IHByb3BzLm9uVG91Y2hTdGFydDtcbiAgdmFyIGFsaWduUmVmID0gdXNlUmVmKCk7XG4gIHZhciBlbGVtZW50UmVmID0gdXNlUmVmKCk7XG5cbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKCksXG4gICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIGFsaWduZWRDbGFzc05hbWUgPSBfdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0QWxpZ25lZENsYXNzTmFtZSA9IF91c2VTdGF0ZTJbMV07IC8vID09PT09PT09PT09PT09PT09PT09PT09IE1lYXN1cmUgPT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB2YXIgX3VzZVN0cmV0Y2hTdHlsZSA9IHVzZVN0cmV0Y2hTdHlsZShzdHJldGNoKSxcbiAgICAgIF91c2VTdHJldGNoU3R5bGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0cmV0Y2hTdHlsZSwgMiksXG4gICAgICBzdHJldGNoU3R5bGUgPSBfdXNlU3RyZXRjaFN0eWxlMlswXSxcbiAgICAgIG1lYXN1cmVTdHJldGNoU3R5bGUgPSBfdXNlU3RyZXRjaFN0eWxlMlsxXTtcblxuICBmdW5jdGlvbiBkb01lYXN1cmUoKSB7XG4gICAgaWYgKHN0cmV0Y2gpIHtcbiAgICAgIG1lYXN1cmVTdHJldGNoU3R5bGUoZ2V0Um9vdERvbU5vZGUoKSk7XG4gICAgfVxuICB9IC8vID09PT09PT09PT09PT09PT09PT09PT09PSBTdGF0dXMgPT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB2YXIgX3VzZVZpc2libGVTdGF0dXMgPSB1c2VWaXNpYmxlU3RhdHVzKHZpc2libGUsIGRvTWVhc3VyZSksXG4gICAgICBfdXNlVmlzaWJsZVN0YXR1czIgPSBfc2xpY2VkVG9BcnJheShfdXNlVmlzaWJsZVN0YXR1cywgMiksXG4gICAgICBzdGF0dXMgPSBfdXNlVmlzaWJsZVN0YXR1czJbMF0sXG4gICAgICBnb05leHRTdGF0dXMgPSBfdXNlVmlzaWJsZVN0YXR1czJbMV07IC8vID09PT09PT09PT09PT09PT09PT09PT09PSBBbGlnbnMgPT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB2YXIgcHJlcGFyZVJlc29sdmVSZWYgPSB1c2VSZWYoKTsgLy8gYHRhcmdldGAgb24gYHJjLWFsaWduYCBjYW4gYWNjZXB0IGFzIGEgZnVuY3Rpb24gdG8gZ2V0IHRoZSBiaW5kIGVsZW1lbnQgb3IgYSBwb2ludC5cbiAgLy8gcmVmOiBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9yYy1hbGlnblxuXG4gIGZ1bmN0aW9uIGdldEFsaWduVGFyZ2V0KCkge1xuICAgIGlmIChwb2ludCkge1xuICAgICAgcmV0dXJuIHBvaW50O1xuICAgIH1cblxuICAgIHJldHVybiBnZXRSb290RG9tTm9kZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZvcmNlQWxpZ24oKSB7XG4gICAgdmFyIF9hbGlnblJlZiRjdXJyZW50O1xuXG4gICAgKF9hbGlnblJlZiRjdXJyZW50ID0gYWxpZ25SZWYuY3VycmVudCkgPT09IG51bGwgfHwgX2FsaWduUmVmJGN1cnJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hbGlnblJlZiRjdXJyZW50LmZvcmNlQWxpZ24oKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uSW50ZXJuYWxBbGlnbihwb3B1cERvbU5vZGUsIG1hdGNoQWxpZ24pIHtcbiAgICB2YXIgbmV4dEFsaWduZWRDbGFzc05hbWUgPSBnZXRDbGFzc05hbWVGcm9tQWxpZ24obWF0Y2hBbGlnbik7XG5cbiAgICBpZiAoYWxpZ25lZENsYXNzTmFtZSAhPT0gbmV4dEFsaWduZWRDbGFzc05hbWUpIHtcbiAgICAgIHNldEFsaWduZWRDbGFzc05hbWUobmV4dEFsaWduZWRDbGFzc05hbWUpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09ICdhbGlnbicpIHtcbiAgICAgIC8vIFJlcGVhdCB1bnRpbCBub3QgbW9yZSBhbGlnbiBuZWVkZWRcbiAgICAgIGlmIChhbGlnbmVkQ2xhc3NOYW1lICE9PSBuZXh0QWxpZ25lZENsYXNzTmFtZSkge1xuICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBmb3JjZUFsaWduKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ29OZXh0U3RhdHVzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgX3ByZXBhcmVSZXNvbHZlUmVmJGN1O1xuXG4gICAgICAgICAgKF9wcmVwYXJlUmVzb2x2ZVJlZiRjdSA9IHByZXBhcmVSZXNvbHZlUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF9wcmVwYXJlUmVzb2x2ZVJlZiRjdSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ByZXBhcmVSZXNvbHZlUmVmJGN1LmNhbGwocHJlcGFyZVJlc29sdmVSZWYpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgb25BbGlnbiA9PT0gbnVsbCB8fCBvbkFsaWduID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkFsaWduKHBvcHVwRG9tTm9kZSwgbWF0Y2hBbGlnbik7XG4gICAgfVxuICB9IC8vID09PT09PT09PT09PT09PT09PT09PT09PSBNb3Rpb24gPT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB2YXIgbW90aW9uID0gX29iamVjdFNwcmVhZCh7fSwgZ2V0TW90aW9uKHByb3BzKSk7XG5cbiAgWydvbkFwcGVhckVuZCcsICdvbkVudGVyRW5kJywgJ29uTGVhdmVFbmQnXS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudE5hbWUpIHtcbiAgICB2YXIgb3JpZ2luSGFuZGxlciA9IG1vdGlvbltldmVudE5hbWVdO1xuXG4gICAgbW90aW9uW2V2ZW50TmFtZV0gPSBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnQpIHtcbiAgICAgIGdvTmV4dFN0YXR1cygpO1xuICAgICAgcmV0dXJuIG9yaWdpbkhhbmRsZXIgPT09IG51bGwgfHwgb3JpZ2luSGFuZGxlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3JpZ2luSGFuZGxlcihlbGVtZW50LCBldmVudCk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gb25TaG93UHJlcGFyZSgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgIHByZXBhcmVSZXNvbHZlUmVmLmN1cnJlbnQgPSByZXNvbHZlO1xuICAgIH0pO1xuICB9IC8vIEdvIHRvIHN0YWJsZSBkaXJlY3RseSB3aGVuIG1vdGlvbiBub3QgcHJvdmlkZWRcblxuXG4gIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFtb3Rpb24ubW90aW9uTmFtZSAmJiBzdGF0dXMgPT09ICdtb3Rpb24nKSB7XG4gICAgICBnb05leHRTdGF0dXMoKTtcbiAgICB9XG4gIH0sIFttb3Rpb24ubW90aW9uTmFtZSwgc3RhdHVzXSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT0gUmVmcyA9PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgUmVhY3QudXNlSW1wZXJhdGl2ZUhhbmRsZShyZWYsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZm9yY2VBbGlnbjogZm9yY2VBbGlnbixcbiAgICAgIGdldEVsZW1lbnQ6IGZ1bmN0aW9uIGdldEVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50UmVmLmN1cnJlbnQ7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PSBSZW5kZXIgPT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIG1lcmdlZFN0eWxlID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdHJldGNoU3R5bGUpLCB7fSwge1xuICAgIHpJbmRleDogekluZGV4LFxuICAgIG9wYWNpdHk6IHN0YXR1cyA9PT0gJ21vdGlvbicgfHwgc3RhdHVzID09PSAnc3RhYmxlJyB8fCAhdmlzaWJsZSA/IHVuZGVmaW5lZCA6IDAsXG4gICAgcG9pbnRlckV2ZW50czogc3RhdHVzID09PSAnc3RhYmxlJyA/IHVuZGVmaW5lZCA6ICdub25lJ1xuICB9LCBzdHlsZSk7IC8vIEFsaWduIHN0YXR1c1xuXG5cbiAgdmFyIGFsaWduRGlzYWJsZWQgPSB0cnVlO1xuXG4gIGlmICgoYWxpZ24gPT09IG51bGwgfHwgYWxpZ24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFsaWduLnBvaW50cykgJiYgKHN0YXR1cyA9PT0gJ2FsaWduJyB8fCBzdGF0dXMgPT09ICdzdGFibGUnKSkge1xuICAgIGFsaWduRGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHZhciBjaGlsZE5vZGUgPSBjaGlsZHJlbjsgLy8gV3JhcHBlciB3aGVuIG11bHRpcGxlIGNoaWxkcmVuXG5cbiAgaWYgKFJlYWN0LkNoaWxkcmVuLmNvdW50KGNoaWxkcmVuKSA+IDEpIHtcbiAgICBjaGlsZE5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItY29udGVudFwiKVxuICAgIH0sIGNoaWxkcmVuKTtcbiAgfVxuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDU1NNb3Rpb24sIF9leHRlbmRzKHtcbiAgICB2aXNpYmxlOiB2aXNpYmxlLFxuICAgIHJlZjogZWxlbWVudFJlZixcbiAgICBsZWF2ZWRDbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItaGlkZGVuXCIpXG4gIH0sIG1vdGlvbiwge1xuICAgIG9uQXBwZWFyUHJlcGFyZTogb25TaG93UHJlcGFyZSxcbiAgICBvbkVudGVyUHJlcGFyZTogb25TaG93UHJlcGFyZSxcbiAgICByZW1vdmVPbkxlYXZlOiBkZXN0cm95UG9wdXBPbkhpZGUsXG4gICAgZm9yY2VSZW5kZXI6IGZvcmNlUmVuZGVyXG4gIH0pLCBmdW5jdGlvbiAoX3JlZiwgbW90aW9uUmVmKSB7XG4gICAgdmFyIG1vdGlvbkNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgICBtb3Rpb25TdHlsZSA9IF9yZWYuc3R5bGU7XG4gICAgdmFyIG1lcmdlZENsYXNzTmFtZSA9IGNsYXNzTmFtZXMocHJlZml4Q2xzLCBjbGFzc05hbWUsIGFsaWduZWRDbGFzc05hbWUsIG1vdGlvbkNsYXNzTmFtZSk7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEFsaWduLCB7XG4gICAgICB0YXJnZXQ6IGdldEFsaWduVGFyZ2V0KCksXG4gICAgICBrZXk6IFwicG9wdXBcIixcbiAgICAgIHJlZjogYWxpZ25SZWYsXG4gICAgICBtb25pdG9yV2luZG93UmVzaXplOiB0cnVlLFxuICAgICAgZGlzYWJsZWQ6IGFsaWduRGlzYWJsZWQsXG4gICAgICBhbGlnbjogYWxpZ24sXG4gICAgICBvbkFsaWduOiBvbkludGVybmFsQWxpZ25cbiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICByZWY6IG1vdGlvblJlZixcbiAgICAgIGNsYXNzTmFtZTogbWVyZ2VkQ2xhc3NOYW1lLFxuICAgICAgb25Nb3VzZUVudGVyOiBvbk1vdXNlRW50ZXIsXG4gICAgICBvbk1vdXNlTGVhdmU6IG9uTW91c2VMZWF2ZSxcbiAgICAgIG9uTW91c2VEb3duQ2FwdHVyZTogb25Nb3VzZURvd24sXG4gICAgICBvblRvdWNoU3RhcnRDYXB0dXJlOiBvblRvdWNoU3RhcnQsXG4gICAgICBzdHlsZTogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtb3Rpb25TdHlsZSksIG1lcmdlZFN0eWxlKVxuICAgIH0sIGNoaWxkTm9kZSkpO1xuICB9KTtcbn0pO1xuUG9wdXBJbm5lci5kaXNwbGF5TmFtZSA9ICdQb3B1cElubmVyJztcbmV4cG9ydCBkZWZhdWx0IFBvcHVwSW5uZXI7IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IENTU01vdGlvbiBmcm9tICdyYy1tb3Rpb24nO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG52YXIgTW9iaWxlUG9wdXBJbm5lciA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChwcm9wcywgcmVmKSB7XG4gIHZhciBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICB2aXNpYmxlID0gcHJvcHMudmlzaWJsZSxcbiAgICAgIHpJbmRleCA9IHByb3BzLnpJbmRleCxcbiAgICAgIGNoaWxkcmVuID0gcHJvcHMuY2hpbGRyZW4sXG4gICAgICBfcHJvcHMkbW9iaWxlID0gcHJvcHMubW9iaWxlO1xuICBfcHJvcHMkbW9iaWxlID0gX3Byb3BzJG1vYmlsZSA9PT0gdm9pZCAwID8ge30gOiBfcHJvcHMkbW9iaWxlO1xuICB2YXIgcG9wdXBDbGFzc05hbWUgPSBfcHJvcHMkbW9iaWxlLnBvcHVwQ2xhc3NOYW1lLFxuICAgICAgcG9wdXBTdHlsZSA9IF9wcm9wcyRtb2JpbGUucG9wdXBTdHlsZSxcbiAgICAgIF9wcm9wcyRtb2JpbGUkcG9wdXBNbyA9IF9wcm9wcyRtb2JpbGUucG9wdXBNb3Rpb24sXG4gICAgICBwb3B1cE1vdGlvbiA9IF9wcm9wcyRtb2JpbGUkcG9wdXBNbyA9PT0gdm9pZCAwID8ge30gOiBfcHJvcHMkbW9iaWxlJHBvcHVwTW8sXG4gICAgICBwb3B1cFJlbmRlciA9IF9wcm9wcyRtb2JpbGUucG9wdXBSZW5kZXI7XG4gIHZhciBlbGVtZW50UmVmID0gUmVhY3QudXNlUmVmKCk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT0gUmVmcyA9PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgUmVhY3QudXNlSW1wZXJhdGl2ZUhhbmRsZShyZWYsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZm9yY2VBbGlnbjogZnVuY3Rpb24gZm9yY2VBbGlnbigpIHt9LFxuICAgICAgZ2V0RWxlbWVudDogZnVuY3Rpb24gZ2V0RWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRSZWYuY3VycmVudDtcbiAgICAgIH1cbiAgICB9O1xuICB9KTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09IFJlbmRlciA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgbWVyZ2VkU3R5bGUgPSBfb2JqZWN0U3ByZWFkKHtcbiAgICB6SW5kZXg6IHpJbmRleFxuICB9LCBwb3B1cFN0eWxlKTtcblxuICB2YXIgY2hpbGROb2RlID0gY2hpbGRyZW47IC8vIFdyYXBwZXIgd2hlbiBtdWx0aXBsZSBjaGlsZHJlblxuXG4gIGlmIChSZWFjdC5DaGlsZHJlbi5jb3VudChjaGlsZHJlbikgPiAxKSB7XG4gICAgY2hpbGROb2RlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWNvbnRlbnRcIilcbiAgICB9LCBjaGlsZHJlbik7XG4gIH0gLy8gTW9iaWxlIHN1cHBvcnQgYWRkaXRpb25hbCByZW5kZXJcblxuXG4gIGlmIChwb3B1cFJlbmRlcikge1xuICAgIGNoaWxkTm9kZSA9IHBvcHVwUmVuZGVyKGNoaWxkTm9kZSk7XG4gIH1cblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1NTTW90aW9uLCBfZXh0ZW5kcyh7XG4gICAgdmlzaWJsZTogdmlzaWJsZSxcbiAgICByZWY6IGVsZW1lbnRSZWYsXG4gICAgcmVtb3ZlT25MZWF2ZTogdHJ1ZVxuICB9LCBwb3B1cE1vdGlvbiksIGZ1bmN0aW9uIChfcmVmLCBtb3Rpb25SZWYpIHtcbiAgICB2YXIgbW90aW9uQ2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICAgIG1vdGlvblN0eWxlID0gX3JlZi5zdHlsZTtcbiAgICB2YXIgbWVyZ2VkQ2xhc3NOYW1lID0gY2xhc3NOYW1lcyhwcmVmaXhDbHMsIHBvcHVwQ2xhc3NOYW1lLCBtb3Rpb25DbGFzc05hbWUpO1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICByZWY6IG1vdGlvblJlZixcbiAgICAgIGNsYXNzTmFtZTogbWVyZ2VkQ2xhc3NOYW1lLFxuICAgICAgc3R5bGU6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbW90aW9uU3R5bGUpLCBtZXJnZWRTdHlsZSlcbiAgICB9LCBjaGlsZE5vZGUpO1xuICB9KTtcbn0pO1xuTW9iaWxlUG9wdXBJbm5lci5kaXNwbGF5TmFtZSA9ICdNb2JpbGVQb3B1cElubmVyJztcbmV4cG9ydCBkZWZhdWx0IE1vYmlsZVBvcHVwSW5uZXI7IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc1wiO1xudmFyIF9leGNsdWRlZCA9IFtcInZpc2libGVcIiwgXCJtb2JpbGVcIl07XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGlzTW9iaWxlIGZyb20gXCJyYy11dGlsL2VzL2lzTW9iaWxlXCI7XG5pbXBvcnQgTWFzayBmcm9tICcuL01hc2snO1xuaW1wb3J0IFBvcHVwSW5uZXIgZnJvbSAnLi9Qb3B1cElubmVyJztcbmltcG9ydCBNb2JpbGVQb3B1cElubmVyIGZyb20gJy4vTW9iaWxlUG9wdXBJbm5lcic7XG52YXIgUG9wdXAgPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAoX3JlZiwgcmVmKSB7XG4gIHZhciB2aXNpYmxlID0gX3JlZi52aXNpYmxlLFxuICAgICAgbW9iaWxlID0gX3JlZi5tb2JpbGUsXG4gICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBfZXhjbHVkZWQpO1xuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZSh2aXNpYmxlKSxcbiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLFxuICAgICAgaW5uZXJWaXNpYmxlID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNlcklubmVyVmlzaWJsZSA9IF91c2VTdGF0ZTJbMV07XG5cbiAgdmFyIF91c2VTdGF0ZTMgPSB1c2VTdGF0ZShmYWxzZSksXG4gICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksXG4gICAgICBpbk1vYmlsZSA9IF91c2VTdGF0ZTRbMF0sXG4gICAgICBzZXRJbk1vYmlsZSA9IF91c2VTdGF0ZTRbMV07XG5cbiAgdmFyIGNsb25lUHJvcHMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHByb3BzKSwge30sIHtcbiAgICB2aXNpYmxlOiBpbm5lclZpc2libGVcbiAgfSk7IC8vIFdlIGNoZWNrIG1vYmlsZSBpbiB2aXNpYmxlIGNoYW5nZWQgaGVyZS5cbiAgLy8gQW5kIHRoaXMgYWxzbyBkZWxheSBzZXQgYGlubmVyVmlzaWJsZWAgdG8gYXZvaWQgcG9wdXAgY29tcG9uZW50IHJlbmRlciBmbGFzaFxuXG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBzZXJJbm5lclZpc2libGUodmlzaWJsZSk7XG5cbiAgICBpZiAodmlzaWJsZSAmJiBtb2JpbGUpIHtcbiAgICAgIHNldEluTW9iaWxlKGlzTW9iaWxlKCkpO1xuICAgIH1cbiAgfSwgW3Zpc2libGUsIG1vYmlsZV0pO1xuICB2YXIgcG9wdXBOb2RlID0gaW5Nb2JpbGUgPyAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChNb2JpbGVQb3B1cElubmVyLCBfZXh0ZW5kcyh7fSwgY2xvbmVQcm9wcywge1xuICAgIG1vYmlsZTogbW9iaWxlLFxuICAgIHJlZjogcmVmXG4gIH0pKSA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFBvcHVwSW5uZXIsIF9leHRlbmRzKHt9LCBjbG9uZVByb3BzLCB7XG4gICAgcmVmOiByZWZcbiAgfSkpOyAvLyBXZSBjYW4gdXNlIGZyYWdtZW50IGRpcmVjdGx5IGJ1dCB0aGlzIG1heSBmYWlsZWQgc29tZSBzZWxlY3RvciB1c2FnZS4gS2VlcCBhcyBvcmlnaW4gbG9naWNcblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTWFzaywgY2xvbmVQcm9wcyksIHBvcHVwTm9kZSk7XG59KTtcblBvcHVwLmRpc3BsYXlOYW1lID0gJ1BvcHVwJztcbmV4cG9ydCBkZWZhdWx0IFBvcHVwOyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbnZhciBUcmlnZ2VyQ29udGV4dCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVDb250ZXh0KG51bGwpO1xuZXhwb3J0IGRlZmF1bHQgVHJpZ2dlckNvbnRleHQ7IiwiaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2tcIjtcbmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzXCI7XG5pbXBvcnQgX2Fzc2VydFRoaXNJbml0aWFsaXplZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXNzZXJ0VGhpc0luaXRpYWxpemVkXCI7XG5pbXBvcnQgX2luaGVyaXRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0c1wiO1xuaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXJcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IHJhZiBmcm9tIFwicmMtdXRpbC9lcy9yYWZcIjtcbmltcG9ydCBjb250YWlucyBmcm9tIFwicmMtdXRpbC9lcy9Eb20vY29udGFpbnNcIjtcbmltcG9ydCBmaW5kRE9NTm9kZSBmcm9tIFwicmMtdXRpbC9lcy9Eb20vZmluZERPTU5vZGVcIjtcbmltcG9ydCB7IGNvbXBvc2VSZWYsIHN1cHBvcnRSZWYgfSBmcm9tIFwicmMtdXRpbC9lcy9yZWZcIjtcbmltcG9ydCBhZGRFdmVudExpc3RlbmVyIGZyb20gXCJyYy11dGlsL2VzL0RvbS9hZGRFdmVudExpc3RlbmVyXCI7XG5pbXBvcnQgUG9ydGFsIGZyb20gXCJyYy11dGlsL2VzL1BvcnRhbFwiO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgeyBnZXRBbGlnbkZyb21QbGFjZW1lbnQsIGdldEFsaWduUG9wdXBDbGFzc05hbWUgfSBmcm9tICcuL3V0aWxzL2FsaWduVXRpbCc7XG5pbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cCc7XG5pbXBvcnQgVHJpZ2dlckNvbnRleHQgZnJvbSAnLi9jb250ZXh0JztcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbmZ1bmN0aW9uIHJldHVybkVtcHR5U3RyaW5nKCkge1xuICByZXR1cm4gJyc7XG59XG5cbmZ1bmN0aW9uIHJldHVybkRvY3VtZW50KGVsZW1lbnQpIHtcbiAgaWYgKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWxlbWVudC5vd25lckRvY3VtZW50O1xuICB9XG5cbiAgcmV0dXJuIHdpbmRvdy5kb2N1bWVudDtcbn1cblxudmFyIEFMTF9IQU5ETEVSUyA9IFsnb25DbGljaycsICdvbk1vdXNlRG93bicsICdvblRvdWNoU3RhcnQnLCAnb25Nb3VzZUVudGVyJywgJ29uTW91c2VMZWF2ZScsICdvbkZvY3VzJywgJ29uQmx1cicsICdvbkNvbnRleHRNZW51J107XG4vKipcbiAqIEludGVybmFsIHVzYWdlLiBEbyBub3QgdXNlIGluIHlvdXIgY29kZSBzaW5jZSB0aGlzIHdpbGwgYmUgcmVtb3ZlZC5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUcmlnZ2VyKFBvcnRhbENvbXBvbmVudCkge1xuICB2YXIgVHJpZ2dlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhUcmlnZ2VyLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICAgIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoVHJpZ2dlcik7XG5cbiAgICBmdW5jdGlvbiBUcmlnZ2VyKHByb3BzKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUcmlnZ2VyKTtcblxuICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwcm9wcyk7XG4gICAgICBfdGhpcy5wb3B1cFJlZiA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVSZWYoKTtcbiAgICAgIF90aGlzLnRyaWdnZXJSZWYgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlUmVmKCk7XG4gICAgICBfdGhpcy5hdHRhY2hJZCA9IHZvaWQgMDtcbiAgICAgIF90aGlzLmNsaWNrT3V0c2lkZUhhbmRsZXIgPSB2b2lkIDA7XG4gICAgICBfdGhpcy50b3VjaE91dHNpZGVIYW5kbGVyID0gdm9pZCAwO1xuICAgICAgX3RoaXMuY29udGV4dE1lbnVPdXRzaWRlSGFuZGxlcjEgPSB2b2lkIDA7XG4gICAgICBfdGhpcy5jb250ZXh0TWVudU91dHNpZGVIYW5kbGVyMiA9IHZvaWQgMDtcbiAgICAgIF90aGlzLm1vdXNlRG93blRpbWVvdXQgPSB2b2lkIDA7XG4gICAgICBfdGhpcy5mb2N1c1RpbWUgPSB2b2lkIDA7XG4gICAgICBfdGhpcy5wcmVDbGlja1RpbWUgPSB2b2lkIDA7XG4gICAgICBfdGhpcy5wcmVUb3VjaFRpbWUgPSB2b2lkIDA7XG4gICAgICBfdGhpcy5kZWxheVRpbWVyID0gdm9pZCAwO1xuICAgICAgX3RoaXMuaGFzUG9wdXBNb3VzZURvd24gPSB2b2lkIDA7XG5cbiAgICAgIF90aGlzLm9uTW91c2VFbnRlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBtb3VzZUVudGVyRGVsYXkgPSBfdGhpcy5wcm9wcy5tb3VzZUVudGVyRGVsYXk7XG5cbiAgICAgICAgX3RoaXMuZmlyZUV2ZW50cygnb25Nb3VzZUVudGVyJywgZSk7XG5cbiAgICAgICAgX3RoaXMuZGVsYXlTZXRQb3B1cFZpc2libGUodHJ1ZSwgbW91c2VFbnRlckRlbGF5LCBtb3VzZUVudGVyRGVsYXkgPyBudWxsIDogZSk7XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5vbk1vdXNlTW92ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIF90aGlzLmZpcmVFdmVudHMoJ29uTW91c2VNb3ZlJywgZSk7XG5cbiAgICAgICAgX3RoaXMuc2V0UG9pbnQoZSk7XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5vbk1vdXNlTGVhdmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBfdGhpcy5maXJlRXZlbnRzKCdvbk1vdXNlTGVhdmUnLCBlKTtcblxuICAgICAgICBfdGhpcy5kZWxheVNldFBvcHVwVmlzaWJsZShmYWxzZSwgX3RoaXMucHJvcHMubW91c2VMZWF2ZURlbGF5KTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLm9uUG9wdXBNb3VzZUVudGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5jbGVhckRlbGF5VGltZXIoKTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLm9uUG9wdXBNb3VzZUxlYXZlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIF90aGlzJHBvcHVwUmVmJGN1cnJlbjtcblxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmVhY3QtY29tcG9uZW50L3RyaWdnZXIvcHVsbC8xM1xuICAgICAgICAvLyByZWFjdCBidWc/XG4gICAgICAgIGlmIChlLnJlbGF0ZWRUYXJnZXQgJiYgIWUucmVsYXRlZFRhcmdldC5zZXRUaW1lb3V0ICYmIGNvbnRhaW5zKChfdGhpcyRwb3B1cFJlZiRjdXJyZW4gPSBfdGhpcy5wb3B1cFJlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCBfdGhpcyRwb3B1cFJlZiRjdXJyZW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHBvcHVwUmVmJGN1cnJlbi5nZXRFbGVtZW50KCksIGUucmVsYXRlZFRhcmdldCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpcy5kZWxheVNldFBvcHVwVmlzaWJsZShmYWxzZSwgX3RoaXMucHJvcHMubW91c2VMZWF2ZURlbGF5KTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLm9uRm9jdXMgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBfdGhpcy5maXJlRXZlbnRzKCdvbkZvY3VzJywgZSk7IC8vIGluY2FzZSBmb2N1c2luIGFuZCBmb2N1c291dFxuXG5cbiAgICAgICAgX3RoaXMuY2xlYXJEZWxheVRpbWVyKCk7XG5cbiAgICAgICAgaWYgKF90aGlzLmlzRm9jdXNUb1Nob3coKSkge1xuICAgICAgICAgIF90aGlzLmZvY3VzVGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgICAgICBfdGhpcy5kZWxheVNldFBvcHVwVmlzaWJsZSh0cnVlLCBfdGhpcy5wcm9wcy5mb2N1c0RlbGF5KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgX3RoaXMub25Nb3VzZURvd24gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBfdGhpcy5maXJlRXZlbnRzKCdvbk1vdXNlRG93bicsIGUpO1xuXG4gICAgICAgIF90aGlzLnByZUNsaWNrVGltZSA9IERhdGUubm93KCk7XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5vblRvdWNoU3RhcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBfdGhpcy5maXJlRXZlbnRzKCdvblRvdWNoU3RhcnQnLCBlKTtcblxuICAgICAgICBfdGhpcy5wcmVUb3VjaFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMub25CbHVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgX3RoaXMuZmlyZUV2ZW50cygnb25CbHVyJywgZSk7XG5cbiAgICAgICAgX3RoaXMuY2xlYXJEZWxheVRpbWVyKCk7XG5cbiAgICAgICAgaWYgKF90aGlzLmlzQmx1clRvSGlkZSgpKSB7XG4gICAgICAgICAgX3RoaXMuZGVsYXlTZXRQb3B1cFZpc2libGUoZmFsc2UsIF90aGlzLnByb3BzLmJsdXJEZWxheSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIF90aGlzLm9uQ29udGV4dE1lbnUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgX3RoaXMuZmlyZUV2ZW50cygnb25Db250ZXh0TWVudScsIGUpO1xuXG4gICAgICAgIF90aGlzLnNldFBvcHVwVmlzaWJsZSh0cnVlLCBlKTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLm9uQ29udGV4dE1lbnVDbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF90aGlzLmlzQ29udGV4dE1lbnVUb1Nob3coKSkge1xuICAgICAgICAgIF90aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIF90aGlzLm9uQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgX3RoaXMuZmlyZUV2ZW50cygnb25DbGljaycsIGV2ZW50KTsgLy8gZm9jdXMgd2lsbCB0cmlnZ2VyIGNsaWNrXG5cblxuICAgICAgICBpZiAoX3RoaXMuZm9jdXNUaW1lKSB7XG4gICAgICAgICAgdmFyIHByZVRpbWU7XG5cbiAgICAgICAgICBpZiAoX3RoaXMucHJlQ2xpY2tUaW1lICYmIF90aGlzLnByZVRvdWNoVGltZSkge1xuICAgICAgICAgICAgcHJlVGltZSA9IE1hdGgubWluKF90aGlzLnByZUNsaWNrVGltZSwgX3RoaXMucHJlVG91Y2hUaW1lKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLnByZUNsaWNrVGltZSkge1xuICAgICAgICAgICAgcHJlVGltZSA9IF90aGlzLnByZUNsaWNrVGltZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLnByZVRvdWNoVGltZSkge1xuICAgICAgICAgICAgcHJlVGltZSA9IF90aGlzLnByZVRvdWNoVGltZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoTWF0aC5hYnMocHJlVGltZSAtIF90aGlzLmZvY3VzVGltZSkgPCAyMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF90aGlzLmZvY3VzVGltZSA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpcy5wcmVDbGlja1RpbWUgPSAwO1xuICAgICAgICBfdGhpcy5wcmVUb3VjaFRpbWUgPSAwOyAvLyBPbmx5IHByZXZlbnQgZGVmYXVsdCB3aGVuIGFsbCB0aGUgYWN0aW9uIGlzIGNsaWNrLlxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW50LWRlc2lnbi9hbnQtZGVzaWduL2lzc3Vlcy8xNzA0M1xuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW50LWRlc2lnbi9hbnQtZGVzaWduL2lzc3Vlcy8xNzI5MVxuXG4gICAgICAgIGlmIChfdGhpcy5pc0NsaWNrVG9TaG93KCkgJiYgKF90aGlzLmlzQ2xpY2tUb0hpZGUoKSB8fCBfdGhpcy5pc0JsdXJUb0hpZGUoKSkgJiYgZXZlbnQgJiYgZXZlbnQucHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG5leHRWaXNpYmxlID0gIV90aGlzLnN0YXRlLnBvcHVwVmlzaWJsZTtcblxuICAgICAgICBpZiAoX3RoaXMuaXNDbGlja1RvSGlkZSgpICYmICFuZXh0VmlzaWJsZSB8fCBuZXh0VmlzaWJsZSAmJiBfdGhpcy5pc0NsaWNrVG9TaG93KCkpIHtcbiAgICAgICAgICBfdGhpcy5zZXRQb3B1cFZpc2libGUoIV90aGlzLnN0YXRlLnBvcHVwVmlzaWJsZSwgZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5vblBvcHVwTW91c2VEb3duID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5oYXNQb3B1cE1vdXNlRG93biA9IHRydWU7XG4gICAgICAgIGNsZWFyVGltZW91dChfdGhpcy5tb3VzZURvd25UaW1lb3V0KTtcbiAgICAgICAgX3RoaXMubW91c2VEb3duVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpcy5oYXNQb3B1cE1vdXNlRG93biA9IGZhbHNlO1xuICAgICAgICB9LCAwKTtcblxuICAgICAgICBpZiAoX3RoaXMuY29udGV4dCkge1xuICAgICAgICAgIHZhciBfdGhpcyRjb250ZXh0O1xuXG4gICAgICAgICAgKF90aGlzJGNvbnRleHQgPSBfdGhpcy5jb250ZXh0KS5vblBvcHVwTW91c2VEb3duLmFwcGx5KF90aGlzJGNvbnRleHQsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIF90aGlzLm9uRG9jdW1lbnRDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAoX3RoaXMucHJvcHMubWFzayAmJiAhX3RoaXMucHJvcHMubWFza0Nsb3NhYmxlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcblxuICAgICAgICB2YXIgcm9vdCA9IF90aGlzLmdldFJvb3REb21Ob2RlKCk7XG5cbiAgICAgICAgdmFyIHBvcHVwTm9kZSA9IF90aGlzLmdldFBvcHVwRG9tTm9kZSgpO1xuXG4gICAgICAgIGlmICggLy8gbW91c2Vkb3duIG9uIHRoZSB0YXJnZXQgc2hvdWxkIGFsc28gY2xvc2UgcG9wdXAgd2hlbiBhY3Rpb24gaXMgY29udGV4dE1lbnUuXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbnQtZGVzaWduL2FudC1kZXNpZ24vaXNzdWVzLzI5ODUzXG4gICAgICAgICghY29udGFpbnMocm9vdCwgdGFyZ2V0KSB8fCBfdGhpcy5pc0NvbnRleHRNZW51T25seSgpKSAmJiAhY29udGFpbnMocG9wdXBOb2RlLCB0YXJnZXQpICYmICFfdGhpcy5oYXNQb3B1cE1vdXNlRG93bikge1xuICAgICAgICAgIF90aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIF90aGlzLmdldFJvb3REb21Ob2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZ2V0VHJpZ2dlckRPTU5vZGUgPSBfdGhpcy5wcm9wcy5nZXRUcmlnZ2VyRE9NTm9kZTtcblxuICAgICAgICBpZiAoZ2V0VHJpZ2dlckRPTU5vZGUpIHtcbiAgICAgICAgICByZXR1cm4gZ2V0VHJpZ2dlckRPTU5vZGUoX3RoaXMudHJpZ2dlclJlZi5jdXJyZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIGRvbU5vZGUgPSBmaW5kRE9NTm9kZShfdGhpcy50cmlnZ2VyUmVmLmN1cnJlbnQpO1xuXG4gICAgICAgICAgaWYgKGRvbU5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBkb21Ob2RlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7Ly8gRG8gbm90aGluZ1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFJlYWN0RE9NLmZpbmRET01Ob2RlKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLmdldFBvcHVwQ2xhc3NOYW1lRnJvbUFsaWduID0gZnVuY3Rpb24gKGFsaWduKSB7XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSBbXTtcbiAgICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgICBwb3B1cFBsYWNlbWVudCA9IF90aGlzJHByb3BzLnBvcHVwUGxhY2VtZW50LFxuICAgICAgICAgICAgYnVpbHRpblBsYWNlbWVudHMgPSBfdGhpcyRwcm9wcy5idWlsdGluUGxhY2VtZW50cyxcbiAgICAgICAgICAgIHByZWZpeENscyA9IF90aGlzJHByb3BzLnByZWZpeENscyxcbiAgICAgICAgICAgIGFsaWduUG9pbnQgPSBfdGhpcyRwcm9wcy5hbGlnblBvaW50LFxuICAgICAgICAgICAgZ2V0UG9wdXBDbGFzc05hbWVGcm9tQWxpZ24gPSBfdGhpcyRwcm9wcy5nZXRQb3B1cENsYXNzTmFtZUZyb21BbGlnbjtcblxuICAgICAgICBpZiAocG9wdXBQbGFjZW1lbnQgJiYgYnVpbHRpblBsYWNlbWVudHMpIHtcbiAgICAgICAgICBjbGFzc05hbWUucHVzaChnZXRBbGlnblBvcHVwQ2xhc3NOYW1lKGJ1aWx0aW5QbGFjZW1lbnRzLCBwcmVmaXhDbHMsIGFsaWduLCBhbGlnblBvaW50KSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZ2V0UG9wdXBDbGFzc05hbWVGcm9tQWxpZ24pIHtcbiAgICAgICAgICBjbGFzc05hbWUucHVzaChnZXRQb3B1cENsYXNzTmFtZUZyb21BbGlnbihhbGlnbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNsYXNzTmFtZS5qb2luKCcgJyk7XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5nZXRDb21wb25lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyRwcm9wczIgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICAgIHByZWZpeENscyA9IF90aGlzJHByb3BzMi5wcmVmaXhDbHMsXG4gICAgICAgICAgICBkZXN0cm95UG9wdXBPbkhpZGUgPSBfdGhpcyRwcm9wczIuZGVzdHJveVBvcHVwT25IaWRlLFxuICAgICAgICAgICAgcG9wdXBDbGFzc05hbWUgPSBfdGhpcyRwcm9wczIucG9wdXBDbGFzc05hbWUsXG4gICAgICAgICAgICBvblBvcHVwQWxpZ24gPSBfdGhpcyRwcm9wczIub25Qb3B1cEFsaWduLFxuICAgICAgICAgICAgcG9wdXBNb3Rpb24gPSBfdGhpcyRwcm9wczIucG9wdXBNb3Rpb24sXG4gICAgICAgICAgICBwb3B1cEFuaW1hdGlvbiA9IF90aGlzJHByb3BzMi5wb3B1cEFuaW1hdGlvbixcbiAgICAgICAgICAgIHBvcHVwVHJhbnNpdGlvbk5hbWUgPSBfdGhpcyRwcm9wczIucG9wdXBUcmFuc2l0aW9uTmFtZSxcbiAgICAgICAgICAgIHBvcHVwU3R5bGUgPSBfdGhpcyRwcm9wczIucG9wdXBTdHlsZSxcbiAgICAgICAgICAgIG1hc2sgPSBfdGhpcyRwcm9wczIubWFzayxcbiAgICAgICAgICAgIG1hc2tBbmltYXRpb24gPSBfdGhpcyRwcm9wczIubWFza0FuaW1hdGlvbixcbiAgICAgICAgICAgIG1hc2tUcmFuc2l0aW9uTmFtZSA9IF90aGlzJHByb3BzMi5tYXNrVHJhbnNpdGlvbk5hbWUsXG4gICAgICAgICAgICBtYXNrTW90aW9uID0gX3RoaXMkcHJvcHMyLm1hc2tNb3Rpb24sXG4gICAgICAgICAgICB6SW5kZXggPSBfdGhpcyRwcm9wczIuekluZGV4LFxuICAgICAgICAgICAgcG9wdXAgPSBfdGhpcyRwcm9wczIucG9wdXAsXG4gICAgICAgICAgICBzdHJldGNoID0gX3RoaXMkcHJvcHMyLnN0cmV0Y2gsXG4gICAgICAgICAgICBhbGlnblBvaW50ID0gX3RoaXMkcHJvcHMyLmFsaWduUG9pbnQsXG4gICAgICAgICAgICBtb2JpbGUgPSBfdGhpcyRwcm9wczIubW9iaWxlLFxuICAgICAgICAgICAgZm9yY2VSZW5kZXIgPSBfdGhpcyRwcm9wczIuZm9yY2VSZW5kZXI7XG4gICAgICAgIHZhciBfdGhpcyRzdGF0ZSA9IF90aGlzLnN0YXRlLFxuICAgICAgICAgICAgcG9wdXBWaXNpYmxlID0gX3RoaXMkc3RhdGUucG9wdXBWaXNpYmxlLFxuICAgICAgICAgICAgcG9pbnQgPSBfdGhpcyRzdGF0ZS5wb2ludDtcblxuICAgICAgICB2YXIgYWxpZ24gPSBfdGhpcy5nZXRQb3B1cEFsaWduKCk7XG5cbiAgICAgICAgdmFyIG1vdXNlUHJvcHMgPSB7fTtcblxuICAgICAgICBpZiAoX3RoaXMuaXNNb3VzZUVudGVyVG9TaG93KCkpIHtcbiAgICAgICAgICBtb3VzZVByb3BzLm9uTW91c2VFbnRlciA9IF90aGlzLm9uUG9wdXBNb3VzZUVudGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF90aGlzLmlzTW91c2VMZWF2ZVRvSGlkZSgpKSB7XG4gICAgICAgICAgbW91c2VQcm9wcy5vbk1vdXNlTGVhdmUgPSBfdGhpcy5vblBvcHVwTW91c2VMZWF2ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vdXNlUHJvcHMub25Nb3VzZURvd24gPSBfdGhpcy5vblBvcHVwTW91c2VEb3duO1xuICAgICAgICBtb3VzZVByb3BzLm9uVG91Y2hTdGFydCA9IF90aGlzLm9uUG9wdXBNb3VzZURvd247XG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQb3B1cCwgX2V4dGVuZHMoe1xuICAgICAgICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgICAgICAgIGRlc3Ryb3lQb3B1cE9uSGlkZTogZGVzdHJveVBvcHVwT25IaWRlLFxuICAgICAgICAgIHZpc2libGU6IHBvcHVwVmlzaWJsZSxcbiAgICAgICAgICBwb2ludDogYWxpZ25Qb2ludCAmJiBwb2ludCxcbiAgICAgICAgICBjbGFzc05hbWU6IHBvcHVwQ2xhc3NOYW1lLFxuICAgICAgICAgIGFsaWduOiBhbGlnbixcbiAgICAgICAgICBvbkFsaWduOiBvblBvcHVwQWxpZ24sXG4gICAgICAgICAgYW5pbWF0aW9uOiBwb3B1cEFuaW1hdGlvbixcbiAgICAgICAgICBnZXRDbGFzc05hbWVGcm9tQWxpZ246IF90aGlzLmdldFBvcHVwQ2xhc3NOYW1lRnJvbUFsaWduXG4gICAgICAgIH0sIG1vdXNlUHJvcHMsIHtcbiAgICAgICAgICBzdHJldGNoOiBzdHJldGNoLFxuICAgICAgICAgIGdldFJvb3REb21Ob2RlOiBfdGhpcy5nZXRSb290RG9tTm9kZSxcbiAgICAgICAgICBzdHlsZTogcG9wdXBTdHlsZSxcbiAgICAgICAgICBtYXNrOiBtYXNrLFxuICAgICAgICAgIHpJbmRleDogekluZGV4LFxuICAgICAgICAgIHRyYW5zaXRpb25OYW1lOiBwb3B1cFRyYW5zaXRpb25OYW1lLFxuICAgICAgICAgIG1hc2tBbmltYXRpb246IG1hc2tBbmltYXRpb24sXG4gICAgICAgICAgbWFza1RyYW5zaXRpb25OYW1lOiBtYXNrVHJhbnNpdGlvbk5hbWUsXG4gICAgICAgICAgbWFza01vdGlvbjogbWFza01vdGlvbixcbiAgICAgICAgICByZWY6IF90aGlzLnBvcHVwUmVmLFxuICAgICAgICAgIG1vdGlvbjogcG9wdXBNb3Rpb24sXG4gICAgICAgICAgbW9iaWxlOiBtb2JpbGUsXG4gICAgICAgICAgZm9yY2VSZW5kZXI6IGZvcmNlUmVuZGVyXG4gICAgICAgIH0pLCB0eXBlb2YgcG9wdXAgPT09ICdmdW5jdGlvbicgPyBwb3B1cCgpIDogcG9wdXApO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMuYXR0YWNoUGFyZW50ID0gZnVuY3Rpb24gKHBvcHVwQ29udGFpbmVyKSB7XG4gICAgICAgIHJhZi5jYW5jZWwoX3RoaXMuYXR0YWNoSWQpO1xuICAgICAgICB2YXIgX3RoaXMkcHJvcHMzID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgICBnZXRQb3B1cENvbnRhaW5lciA9IF90aGlzJHByb3BzMy5nZXRQb3B1cENvbnRhaW5lcixcbiAgICAgICAgICAgIGdldERvY3VtZW50ID0gX3RoaXMkcHJvcHMzLmdldERvY3VtZW50O1xuXG4gICAgICAgIHZhciBkb21Ob2RlID0gX3RoaXMuZ2V0Um9vdERvbU5vZGUoKTtcblxuICAgICAgICB2YXIgbW91bnROb2RlO1xuXG4gICAgICAgIGlmICghZ2V0UG9wdXBDb250YWluZXIpIHtcbiAgICAgICAgICBtb3VudE5vZGUgPSBnZXREb2N1bWVudChfdGhpcy5nZXRSb290RG9tTm9kZSgpKS5ib2R5O1xuICAgICAgICB9IGVsc2UgaWYgKGRvbU5vZGUgfHwgZ2V0UG9wdXBDb250YWluZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgLy8gQ29tcGF0aWJsZSBmb3IgbGVnYWN5IGdldFBvcHVwQ29udGFpbmVyIHdpdGggZG9tTm9kZSBhcmd1bWVudC5cbiAgICAgICAgICAvLyBJZiBubyBuZWVkIGBkb21Ob2RlYCBhcmd1bWVudCwgd2lsbCBjYWxsIGRpcmVjdGx5LlxuICAgICAgICAgIC8vIGh0dHBzOi8vY29kZXNhbmRib3guaW8vcy9lbG9xdWVudC1tY2xlYW4tc3M5M20/ZmlsZT0vc3JjL0FwcC5qc1xuICAgICAgICAgIG1vdW50Tm9kZSA9IGdldFBvcHVwQ29udGFpbmVyKGRvbU5vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1vdW50Tm9kZSkge1xuICAgICAgICAgIG1vdW50Tm9kZS5hcHBlbmRDaGlsZChwb3B1cENvbnRhaW5lcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmV0cnkgYWZ0ZXIgZnJhbWUgcmVuZGVyIGluIGNhc2UgcGFyZW50IG5vdCByZWFkeVxuICAgICAgICAgIF90aGlzLmF0dGFjaElkID0gcmFmKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmF0dGFjaFBhcmVudChwb3B1cENvbnRhaW5lcik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIF90aGlzLmdldENvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdldERvY3VtZW50ID0gX3RoaXMucHJvcHMuZ2V0RG9jdW1lbnQ7XG4gICAgICAgIHZhciBwb3B1cENvbnRhaW5lciA9IGdldERvY3VtZW50KF90aGlzLmdldFJvb3REb21Ob2RlKCkpLmNyZWF0ZUVsZW1lbnQoJ2RpdicpOyAvLyBNYWtlIHN1cmUgZGVmYXVsdCBwb3B1cCBjb250YWluZXIgd2lsbCBuZXZlciBjYXVzZSBzY3JvbGxiYXIgYXBwZWFyaW5nXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdC1jb21wb25lbnQvdHJpZ2dlci9pc3N1ZXMvNDFcblxuICAgICAgICBwb3B1cENvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIHBvcHVwQ29udGFpbmVyLnN0eWxlLnRvcCA9ICcwJztcbiAgICAgICAgcG9wdXBDb250YWluZXIuc3R5bGUubGVmdCA9ICcwJztcbiAgICAgICAgcG9wdXBDb250YWluZXIuc3R5bGUud2lkdGggPSAnMTAwJSc7XG5cbiAgICAgICAgX3RoaXMuYXR0YWNoUGFyZW50KHBvcHVwQ29udGFpbmVyKTtcblxuICAgICAgICByZXR1cm4gcG9wdXBDb250YWluZXI7XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5zZXRQb2ludCA9IGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICB2YXIgYWxpZ25Qb2ludCA9IF90aGlzLnByb3BzLmFsaWduUG9pbnQ7XG4gICAgICAgIGlmICghYWxpZ25Qb2ludCB8fCAhcG9pbnQpIHJldHVybjtcblxuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgcG9pbnQ6IHtcbiAgICAgICAgICAgIHBhZ2VYOiBwb2ludC5wYWdlWCxcbiAgICAgICAgICAgIHBhZ2VZOiBwb2ludC5wYWdlWVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5oYW5kbGVQb3J0YWxVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChfdGhpcy5zdGF0ZS5wcmV2UG9wdXBWaXNpYmxlICE9PSBfdGhpcy5zdGF0ZS5wb3B1cFZpc2libGUpIHtcbiAgICAgICAgICBfdGhpcy5wcm9wcy5hZnRlclBvcHVwVmlzaWJsZUNoYW5nZShfdGhpcy5zdGF0ZS5wb3B1cFZpc2libGUpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy50cmlnZ2VyQ29udGV4dFZhbHVlID0ge1xuICAgICAgICBvblBvcHVwTW91c2VEb3duOiBfdGhpcy5vblBvcHVwTW91c2VEb3duXG4gICAgICB9O1xuXG4gICAgICB2YXIgX3BvcHVwVmlzaWJsZTtcblxuICAgICAgaWYgKCdwb3B1cFZpc2libGUnIGluIHByb3BzKSB7XG4gICAgICAgIF9wb3B1cFZpc2libGUgPSAhIXByb3BzLnBvcHVwVmlzaWJsZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9wb3B1cFZpc2libGUgPSAhIXByb3BzLmRlZmF1bHRQb3B1cFZpc2libGU7XG4gICAgICB9XG5cbiAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICBwcmV2UG9wdXBWaXNpYmxlOiBfcG9wdXBWaXNpYmxlLFxuICAgICAgICBwb3B1cFZpc2libGU6IF9wb3B1cFZpc2libGVcbiAgICAgIH07XG4gICAgICBBTExfSEFORExFUlMuZm9yRWFjaChmdW5jdGlvbiAoaCkge1xuICAgICAgICBfdGhpc1tcImZpcmVcIi5jb25jYXQoaCldID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBfdGhpcy5maXJlRXZlbnRzKGgsIGUpO1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFRyaWdnZXIsIFt7XG4gICAgICBrZXk6IFwiY29tcG9uZW50RGlkTW91bnRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy5jb21wb25lbnREaWRVcGRhdGUoKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY29tcG9uZW50RGlkVXBkYXRlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgICAgICB2YXIgc3RhdGUgPSB0aGlzLnN0YXRlOyAvLyBXZSBtdXN0IGxpc3RlbiB0byBgbW91c2Vkb3duYCBvciBgdG91Y2hzdGFydGAsIGVkZ2UgY2FzZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FudC1kZXNpZ24vYW50LWRlc2lnbi9pc3N1ZXMvNTgwNFxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmVhY3QtY29tcG9uZW50L2NhbGVuZGFyL2lzc3Vlcy8yNTBcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0LWNvbXBvbmVudC90cmlnZ2VyL2lzc3Vlcy81MFxuXG4gICAgICAgIGlmIChzdGF0ZS5wb3B1cFZpc2libGUpIHtcbiAgICAgICAgICB2YXIgY3VycmVudERvY3VtZW50O1xuXG4gICAgICAgICAgaWYgKCF0aGlzLmNsaWNrT3V0c2lkZUhhbmRsZXIgJiYgKHRoaXMuaXNDbGlja1RvSGlkZSgpIHx8IHRoaXMuaXNDb250ZXh0TWVudVRvU2hvdygpKSkge1xuICAgICAgICAgICAgY3VycmVudERvY3VtZW50ID0gcHJvcHMuZ2V0RG9jdW1lbnQodGhpcy5nZXRSb290RG9tTm9kZSgpKTtcbiAgICAgICAgICAgIHRoaXMuY2xpY2tPdXRzaWRlSGFuZGxlciA9IGFkZEV2ZW50TGlzdGVuZXIoY3VycmVudERvY3VtZW50LCAnbW91c2Vkb3duJywgdGhpcy5vbkRvY3VtZW50Q2xpY2spO1xuICAgICAgICAgIH0gLy8gYWx3YXlzIGhpZGUgb24gbW9iaWxlXG5cblxuICAgICAgICAgIGlmICghdGhpcy50b3VjaE91dHNpZGVIYW5kbGVyKSB7XG4gICAgICAgICAgICBjdXJyZW50RG9jdW1lbnQgPSBjdXJyZW50RG9jdW1lbnQgfHwgcHJvcHMuZ2V0RG9jdW1lbnQodGhpcy5nZXRSb290RG9tTm9kZSgpKTtcbiAgICAgICAgICAgIHRoaXMudG91Y2hPdXRzaWRlSGFuZGxlciA9IGFkZEV2ZW50TGlzdGVuZXIoY3VycmVudERvY3VtZW50LCAndG91Y2hzdGFydCcsIHRoaXMub25Eb2N1bWVudENsaWNrKTtcbiAgICAgICAgICB9IC8vIGNsb3NlIHBvcHVwIHdoZW4gdHJpZ2dlciB0eXBlIGNvbnRhaW5zICdvbkNvbnRleHRNZW51JyBhbmQgZG9jdW1lbnQgaXMgc2Nyb2xsaW5nLlxuXG5cbiAgICAgICAgICBpZiAoIXRoaXMuY29udGV4dE1lbnVPdXRzaWRlSGFuZGxlcjEgJiYgdGhpcy5pc0NvbnRleHRNZW51VG9TaG93KCkpIHtcbiAgICAgICAgICAgIGN1cnJlbnREb2N1bWVudCA9IGN1cnJlbnREb2N1bWVudCB8fCBwcm9wcy5nZXREb2N1bWVudCh0aGlzLmdldFJvb3REb21Ob2RlKCkpO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0TWVudU91dHNpZGVIYW5kbGVyMSA9IGFkZEV2ZW50TGlzdGVuZXIoY3VycmVudERvY3VtZW50LCAnc2Nyb2xsJywgdGhpcy5vbkNvbnRleHRNZW51Q2xvc2UpO1xuICAgICAgICAgIH0gLy8gY2xvc2UgcG9wdXAgd2hlbiB0cmlnZ2VyIHR5cGUgY29udGFpbnMgJ29uQ29udGV4dE1lbnUnIGFuZCB3aW5kb3cgaXMgYmx1ci5cblxuXG4gICAgICAgICAgaWYgKCF0aGlzLmNvbnRleHRNZW51T3V0c2lkZUhhbmRsZXIyICYmIHRoaXMuaXNDb250ZXh0TWVudVRvU2hvdygpKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHRNZW51T3V0c2lkZUhhbmRsZXIyID0gYWRkRXZlbnRMaXN0ZW5lcih3aW5kb3csICdibHVyJywgdGhpcy5vbkNvbnRleHRNZW51Q2xvc2UpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2xlYXJPdXRzaWRlSGFuZGxlcigpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJjb21wb25lbnRXaWxsVW5tb3VudFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICB0aGlzLmNsZWFyRGVsYXlUaW1lcigpO1xuICAgICAgICB0aGlzLmNsZWFyT3V0c2lkZUhhbmRsZXIoKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubW91c2VEb3duVGltZW91dCk7XG4gICAgICAgIHJhZi5jYW5jZWwodGhpcy5hdHRhY2hJZCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImdldFBvcHVwRG9tTm9kZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBvcHVwRG9tTm9kZSgpIHtcbiAgICAgICAgdmFyIF90aGlzJHBvcHVwUmVmJGN1cnJlbjI7XG5cbiAgICAgICAgLy8gZm9yIHRlc3RcbiAgICAgICAgcmV0dXJuICgoX3RoaXMkcG9wdXBSZWYkY3VycmVuMiA9IHRoaXMucG9wdXBSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX3RoaXMkcG9wdXBSZWYkY3VycmVuMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkcG9wdXBSZWYkY3VycmVuMi5nZXRFbGVtZW50KCkpIHx8IG51bGw7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImdldFBvcHVwQWxpZ25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQb3B1cEFsaWduKCkge1xuICAgICAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgICAgICB2YXIgcG9wdXBQbGFjZW1lbnQgPSBwcm9wcy5wb3B1cFBsYWNlbWVudCxcbiAgICAgICAgICAgIHBvcHVwQWxpZ24gPSBwcm9wcy5wb3B1cEFsaWduLFxuICAgICAgICAgICAgYnVpbHRpblBsYWNlbWVudHMgPSBwcm9wcy5idWlsdGluUGxhY2VtZW50cztcblxuICAgICAgICBpZiAocG9wdXBQbGFjZW1lbnQgJiYgYnVpbHRpblBsYWNlbWVudHMpIHtcbiAgICAgICAgICByZXR1cm4gZ2V0QWxpZ25Gcm9tUGxhY2VtZW50KGJ1aWx0aW5QbGFjZW1lbnRzLCBwb3B1cFBsYWNlbWVudCwgcG9wdXBBbGlnbik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcG9wdXBBbGlnbjtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic2V0UG9wdXBWaXNpYmxlXCIsXG4gICAgICB2YWx1ZTpcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHBvcHVwVmlzaWJsZSAgICBTaG93IG9yIG5vdCB0aGUgcG9wdXAgZWxlbWVudFxuICAgICAgICogQHBhcmFtIGV2ZW50ICAgICAgICAgICBTeW50aGV0aWNFdmVudCwgdXNlZCBmb3IgYHBvaW50QWxpZ25gXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIHNldFBvcHVwVmlzaWJsZShwb3B1cFZpc2libGUsIGV2ZW50KSB7XG4gICAgICAgIHZhciBhbGlnblBvaW50ID0gdGhpcy5wcm9wcy5hbGlnblBvaW50O1xuICAgICAgICB2YXIgcHJldlBvcHVwVmlzaWJsZSA9IHRoaXMuc3RhdGUucG9wdXBWaXNpYmxlO1xuICAgICAgICB0aGlzLmNsZWFyRGVsYXlUaW1lcigpO1xuXG4gICAgICAgIGlmIChwcmV2UG9wdXBWaXNpYmxlICE9PSBwb3B1cFZpc2libGUpIHtcbiAgICAgICAgICBpZiAoISgncG9wdXBWaXNpYmxlJyBpbiB0aGlzLnByb3BzKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgIHBvcHVwVmlzaWJsZTogcG9wdXBWaXNpYmxlLFxuICAgICAgICAgICAgICBwcmV2UG9wdXBWaXNpYmxlOiBwcmV2UG9wdXBWaXNpYmxlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLnByb3BzLm9uUG9wdXBWaXNpYmxlQ2hhbmdlKHBvcHVwVmlzaWJsZSk7XG4gICAgICAgIH0gLy8gQWx3YXlzIHJlY29yZCB0aGUgcG9pbnQgcG9zaXRpb24gc2luY2UgbW91c2VFbnRlckRlbGF5IHdpbGwgZGVsYXkgdGhlIHNob3dcblxuXG4gICAgICAgIGlmIChhbGlnblBvaW50ICYmIGV2ZW50ICYmIHBvcHVwVmlzaWJsZSkge1xuICAgICAgICAgIHRoaXMuc2V0UG9pbnQoZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRlbGF5U2V0UG9wdXBWaXNpYmxlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVsYXlTZXRQb3B1cFZpc2libGUodmlzaWJsZSwgZGVsYXlTLCBldmVudCkge1xuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICB2YXIgZGVsYXkgPSBkZWxheVMgKiAxMDAwO1xuICAgICAgICB0aGlzLmNsZWFyRGVsYXlUaW1lcigpO1xuXG4gICAgICAgIGlmIChkZWxheSkge1xuICAgICAgICAgIHZhciBwb2ludCA9IGV2ZW50ID8ge1xuICAgICAgICAgICAgcGFnZVg6IGV2ZW50LnBhZ2VYLFxuICAgICAgICAgICAgcGFnZVk6IGV2ZW50LnBhZ2VZXG4gICAgICAgICAgfSA6IG51bGw7XG4gICAgICAgICAgdGhpcy5kZWxheVRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMyLnNldFBvcHVwVmlzaWJsZSh2aXNpYmxlLCBwb2ludCk7XG5cbiAgICAgICAgICAgIF90aGlzMi5jbGVhckRlbGF5VGltZXIoKTtcbiAgICAgICAgICB9LCBkZWxheSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zZXRQb3B1cFZpc2libGUodmlzaWJsZSwgZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImNsZWFyRGVsYXlUaW1lclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyRGVsYXlUaW1lcigpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVsYXlUaW1lcikge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlbGF5VGltZXIpO1xuICAgICAgICAgIHRoaXMuZGVsYXlUaW1lciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY2xlYXJPdXRzaWRlSGFuZGxlclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyT3V0c2lkZUhhbmRsZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsaWNrT3V0c2lkZUhhbmRsZXIpIHtcbiAgICAgICAgICB0aGlzLmNsaWNrT3V0c2lkZUhhbmRsZXIucmVtb3ZlKCk7XG4gICAgICAgICAgdGhpcy5jbGlja091dHNpZGVIYW5kbGVyID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNvbnRleHRNZW51T3V0c2lkZUhhbmRsZXIxKSB7XG4gICAgICAgICAgdGhpcy5jb250ZXh0TWVudU91dHNpZGVIYW5kbGVyMS5yZW1vdmUoKTtcbiAgICAgICAgICB0aGlzLmNvbnRleHRNZW51T3V0c2lkZUhhbmRsZXIxID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNvbnRleHRNZW51T3V0c2lkZUhhbmRsZXIyKSB7XG4gICAgICAgICAgdGhpcy5jb250ZXh0TWVudU91dHNpZGVIYW5kbGVyMi5yZW1vdmUoKTtcbiAgICAgICAgICB0aGlzLmNvbnRleHRNZW51T3V0c2lkZUhhbmRsZXIyID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnRvdWNoT3V0c2lkZUhhbmRsZXIpIHtcbiAgICAgICAgICB0aGlzLnRvdWNoT3V0c2lkZUhhbmRsZXIucmVtb3ZlKCk7XG4gICAgICAgICAgdGhpcy50b3VjaE91dHNpZGVIYW5kbGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJjcmVhdGVUd29DaGFpbnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVUd29DaGFpbnMoZXZlbnQpIHtcbiAgICAgICAgdmFyIGNoaWxkUHJvcyA9IHRoaXMucHJvcHMuY2hpbGRyZW4ucHJvcHM7XG4gICAgICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgaWYgKGNoaWxkUHJvc1tldmVudF0gJiYgcHJvcHNbZXZlbnRdKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXNbXCJmaXJlXCIuY29uY2F0KGV2ZW50KV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2hpbGRQcm9zW2V2ZW50XSB8fCBwcm9wc1tldmVudF07XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImlzQ2xpY2tUb1Nob3dcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0NsaWNrVG9TaG93KCkge1xuICAgICAgICB2YXIgX3RoaXMkcHJvcHM0ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICAgIGFjdGlvbiA9IF90aGlzJHByb3BzNC5hY3Rpb24sXG4gICAgICAgICAgICBzaG93QWN0aW9uID0gX3RoaXMkcHJvcHM0LnNob3dBY3Rpb247XG4gICAgICAgIHJldHVybiBhY3Rpb24uaW5kZXhPZignY2xpY2snKSAhPT0gLTEgfHwgc2hvd0FjdGlvbi5pbmRleE9mKCdjbGljaycpICE9PSAtMTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiaXNDb250ZXh0TWVudU9ubHlcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0NvbnRleHRNZW51T25seSgpIHtcbiAgICAgICAgdmFyIGFjdGlvbiA9IHRoaXMucHJvcHMuYWN0aW9uO1xuICAgICAgICByZXR1cm4gYWN0aW9uID09PSAnY29udGV4dE1lbnUnIHx8IGFjdGlvbi5sZW5ndGggPT09IDEgJiYgYWN0aW9uWzBdID09PSAnY29udGV4dE1lbnUnO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJpc0NvbnRleHRNZW51VG9TaG93XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaXNDb250ZXh0TWVudVRvU2hvdygpIHtcbiAgICAgICAgdmFyIF90aGlzJHByb3BzNSA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgICBhY3Rpb24gPSBfdGhpcyRwcm9wczUuYWN0aW9uLFxuICAgICAgICAgICAgc2hvd0FjdGlvbiA9IF90aGlzJHByb3BzNS5zaG93QWN0aW9uO1xuICAgICAgICByZXR1cm4gYWN0aW9uLmluZGV4T2YoJ2NvbnRleHRNZW51JykgIT09IC0xIHx8IHNob3dBY3Rpb24uaW5kZXhPZignY29udGV4dE1lbnUnKSAhPT0gLTE7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImlzQ2xpY2tUb0hpZGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0NsaWNrVG9IaWRlKCkge1xuICAgICAgICB2YXIgX3RoaXMkcHJvcHM2ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICAgIGFjdGlvbiA9IF90aGlzJHByb3BzNi5hY3Rpb24sXG4gICAgICAgICAgICBoaWRlQWN0aW9uID0gX3RoaXMkcHJvcHM2LmhpZGVBY3Rpb247XG4gICAgICAgIHJldHVybiBhY3Rpb24uaW5kZXhPZignY2xpY2snKSAhPT0gLTEgfHwgaGlkZUFjdGlvbi5pbmRleE9mKCdjbGljaycpICE9PSAtMTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiaXNNb3VzZUVudGVyVG9TaG93XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaXNNb3VzZUVudGVyVG9TaG93KCkge1xuICAgICAgICB2YXIgX3RoaXMkcHJvcHM3ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICAgIGFjdGlvbiA9IF90aGlzJHByb3BzNy5hY3Rpb24sXG4gICAgICAgICAgICBzaG93QWN0aW9uID0gX3RoaXMkcHJvcHM3LnNob3dBY3Rpb247XG4gICAgICAgIHJldHVybiBhY3Rpb24uaW5kZXhPZignaG92ZXInKSAhPT0gLTEgfHwgc2hvd0FjdGlvbi5pbmRleE9mKCdtb3VzZUVudGVyJykgIT09IC0xO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJpc01vdXNlTGVhdmVUb0hpZGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc01vdXNlTGVhdmVUb0hpZGUoKSB7XG4gICAgICAgIHZhciBfdGhpcyRwcm9wczggPSB0aGlzLnByb3BzLFxuICAgICAgICAgICAgYWN0aW9uID0gX3RoaXMkcHJvcHM4LmFjdGlvbixcbiAgICAgICAgICAgIGhpZGVBY3Rpb24gPSBfdGhpcyRwcm9wczguaGlkZUFjdGlvbjtcbiAgICAgICAgcmV0dXJuIGFjdGlvbi5pbmRleE9mKCdob3ZlcicpICE9PSAtMSB8fCBoaWRlQWN0aW9uLmluZGV4T2YoJ21vdXNlTGVhdmUnKSAhPT0gLTE7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImlzRm9jdXNUb1Nob3dcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZvY3VzVG9TaG93KCkge1xuICAgICAgICB2YXIgX3RoaXMkcHJvcHM5ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICAgIGFjdGlvbiA9IF90aGlzJHByb3BzOS5hY3Rpb24sXG4gICAgICAgICAgICBzaG93QWN0aW9uID0gX3RoaXMkcHJvcHM5LnNob3dBY3Rpb247XG4gICAgICAgIHJldHVybiBhY3Rpb24uaW5kZXhPZignZm9jdXMnKSAhPT0gLTEgfHwgc2hvd0FjdGlvbi5pbmRleE9mKCdmb2N1cycpICE9PSAtMTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiaXNCbHVyVG9IaWRlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaXNCbHVyVG9IaWRlKCkge1xuICAgICAgICB2YXIgX3RoaXMkcHJvcHMxMCA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgICBhY3Rpb24gPSBfdGhpcyRwcm9wczEwLmFjdGlvbixcbiAgICAgICAgICAgIGhpZGVBY3Rpb24gPSBfdGhpcyRwcm9wczEwLmhpZGVBY3Rpb247XG4gICAgICAgIHJldHVybiBhY3Rpb24uaW5kZXhPZignZm9jdXMnKSAhPT0gLTEgfHwgaGlkZUFjdGlvbi5pbmRleE9mKCdibHVyJykgIT09IC0xO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJmb3JjZVBvcHVwQWxpZ25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmb3JjZVBvcHVwQWxpZ24oKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnBvcHVwVmlzaWJsZSkge1xuICAgICAgICAgIHZhciBfdGhpcyRwb3B1cFJlZiRjdXJyZW4zO1xuXG4gICAgICAgICAgKF90aGlzJHBvcHVwUmVmJGN1cnJlbjMgPSB0aGlzLnBvcHVwUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF90aGlzJHBvcHVwUmVmJGN1cnJlbjMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHBvcHVwUmVmJGN1cnJlbjMuZm9yY2VBbGlnbigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImZpcmVFdmVudHNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaXJlRXZlbnRzKHR5cGUsIGUpIHtcbiAgICAgICAgdmFyIGNoaWxkQ2FsbGJhY2sgPSB0aGlzLnByb3BzLmNoaWxkcmVuLnByb3BzW3R5cGVdO1xuXG4gICAgICAgIGlmIChjaGlsZENhbGxiYWNrKSB7XG4gICAgICAgICAgY2hpbGRDYWxsYmFjayhlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjYWxsYmFjayA9IHRoaXMucHJvcHNbdHlwZV07XG5cbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgY2FsbGJhY2soZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY2xvc2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5zZXRQb3B1cFZpc2libGUoZmFsc2UpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJyZW5kZXJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHZhciBwb3B1cFZpc2libGUgPSB0aGlzLnN0YXRlLnBvcHVwVmlzaWJsZTtcbiAgICAgICAgdmFyIF90aGlzJHByb3BzMTEgPSB0aGlzLnByb3BzLFxuICAgICAgICAgICAgY2hpbGRyZW4gPSBfdGhpcyRwcm9wczExLmNoaWxkcmVuLFxuICAgICAgICAgICAgZm9yY2VSZW5kZXIgPSBfdGhpcyRwcm9wczExLmZvcmNlUmVuZGVyLFxuICAgICAgICAgICAgYWxpZ25Qb2ludCA9IF90aGlzJHByb3BzMTEuYWxpZ25Qb2ludCxcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9IF90aGlzJHByb3BzMTEuY2xhc3NOYW1lLFxuICAgICAgICAgICAgYXV0b0Rlc3Ryb3kgPSBfdGhpcyRwcm9wczExLmF1dG9EZXN0cm95O1xuICAgICAgICB2YXIgY2hpbGQgPSBSZWFjdC5DaGlsZHJlbi5vbmx5KGNoaWxkcmVuKTtcbiAgICAgICAgdmFyIG5ld0NoaWxkUHJvcHMgPSB7XG4gICAgICAgICAga2V5OiAndHJpZ2dlcidcbiAgICAgICAgfTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFZpc2libGUgSGFuZGxlcnMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIC8vID4+PiBDb250ZXh0TWVudVxuXG4gICAgICAgIGlmICh0aGlzLmlzQ29udGV4dE1lbnVUb1Nob3coKSkge1xuICAgICAgICAgIG5ld0NoaWxkUHJvcHMub25Db250ZXh0TWVudSA9IHRoaXMub25Db250ZXh0TWVudTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdDaGlsZFByb3BzLm9uQ29udGV4dE1lbnUgPSB0aGlzLmNyZWF0ZVR3b0NoYWlucygnb25Db250ZXh0TWVudScpO1xuICAgICAgICB9IC8vID4+PiBDbGlja1xuXG5cbiAgICAgICAgaWYgKHRoaXMuaXNDbGlja1RvSGlkZSgpIHx8IHRoaXMuaXNDbGlja1RvU2hvdygpKSB7XG4gICAgICAgICAgbmV3Q2hpbGRQcm9wcy5vbkNsaWNrID0gdGhpcy5vbkNsaWNrO1xuICAgICAgICAgIG5ld0NoaWxkUHJvcHMub25Nb3VzZURvd24gPSB0aGlzLm9uTW91c2VEb3duO1xuICAgICAgICAgIG5ld0NoaWxkUHJvcHMub25Ub3VjaFN0YXJ0ID0gdGhpcy5vblRvdWNoU3RhcnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3Q2hpbGRQcm9wcy5vbkNsaWNrID0gdGhpcy5jcmVhdGVUd29DaGFpbnMoJ29uQ2xpY2snKTtcbiAgICAgICAgICBuZXdDaGlsZFByb3BzLm9uTW91c2VEb3duID0gdGhpcy5jcmVhdGVUd29DaGFpbnMoJ29uTW91c2VEb3duJyk7XG4gICAgICAgICAgbmV3Q2hpbGRQcm9wcy5vblRvdWNoU3RhcnQgPSB0aGlzLmNyZWF0ZVR3b0NoYWlucygnb25Ub3VjaFN0YXJ0Jyk7XG4gICAgICAgIH0gLy8gPj4+IEhvdmVyKGVudGVyKVxuXG5cbiAgICAgICAgaWYgKHRoaXMuaXNNb3VzZUVudGVyVG9TaG93KCkpIHtcbiAgICAgICAgICBuZXdDaGlsZFByb3BzLm9uTW91c2VFbnRlciA9IHRoaXMub25Nb3VzZUVudGVyOyAvLyBQb2ludCBhbGlnblxuXG4gICAgICAgICAgaWYgKGFsaWduUG9pbnQpIHtcbiAgICAgICAgICAgIG5ld0NoaWxkUHJvcHMub25Nb3VzZU1vdmUgPSB0aGlzLm9uTW91c2VNb3ZlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdDaGlsZFByb3BzLm9uTW91c2VFbnRlciA9IHRoaXMuY3JlYXRlVHdvQ2hhaW5zKCdvbk1vdXNlRW50ZXInKTtcbiAgICAgICAgfSAvLyA+Pj4gSG92ZXIobGVhdmUpXG5cblxuICAgICAgICBpZiAodGhpcy5pc01vdXNlTGVhdmVUb0hpZGUoKSkge1xuICAgICAgICAgIG5ld0NoaWxkUHJvcHMub25Nb3VzZUxlYXZlID0gdGhpcy5vbk1vdXNlTGVhdmU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV3Q2hpbGRQcm9wcy5vbk1vdXNlTGVhdmUgPSB0aGlzLmNyZWF0ZVR3b0NoYWlucygnb25Nb3VzZUxlYXZlJyk7XG4gICAgICAgIH0gLy8gPj4+IEZvY3VzXG5cblxuICAgICAgICBpZiAodGhpcy5pc0ZvY3VzVG9TaG93KCkgfHwgdGhpcy5pc0JsdXJUb0hpZGUoKSkge1xuICAgICAgICAgIG5ld0NoaWxkUHJvcHMub25Gb2N1cyA9IHRoaXMub25Gb2N1cztcbiAgICAgICAgICBuZXdDaGlsZFByb3BzLm9uQmx1ciA9IHRoaXMub25CbHVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld0NoaWxkUHJvcHMub25Gb2N1cyA9IHRoaXMuY3JlYXRlVHdvQ2hhaW5zKCdvbkZvY3VzJyk7XG4gICAgICAgICAgbmV3Q2hpbGRQcm9wcy5vbkJsdXIgPSB0aGlzLmNyZWF0ZVR3b0NoYWlucygnb25CbHVyJyk7XG4gICAgICAgIH0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gUmVuZGVyID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICAgICAgICB2YXIgY2hpbGRyZW5DbGFzc05hbWUgPSBjbGFzc05hbWVzKGNoaWxkICYmIGNoaWxkLnByb3BzICYmIGNoaWxkLnByb3BzLmNsYXNzTmFtZSwgY2xhc3NOYW1lKTtcblxuICAgICAgICBpZiAoY2hpbGRyZW5DbGFzc05hbWUpIHtcbiAgICAgICAgICBuZXdDaGlsZFByb3BzLmNsYXNzTmFtZSA9IGNoaWxkcmVuQ2xhc3NOYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNsb25lUHJvcHMgPSBfb2JqZWN0U3ByZWFkKHt9LCBuZXdDaGlsZFByb3BzKTtcblxuICAgICAgICBpZiAoc3VwcG9ydFJlZihjaGlsZCkpIHtcbiAgICAgICAgICBjbG9uZVByb3BzLnJlZiA9IGNvbXBvc2VSZWYodGhpcy50cmlnZ2VyUmVmLCBjaGlsZC5yZWYpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRyaWdnZXIgPSAvKiNfX1BVUkVfXyovUmVhY3QuY2xvbmVFbGVtZW50KGNoaWxkLCBjbG9uZVByb3BzKTtcbiAgICAgICAgdmFyIHBvcnRhbDsgLy8gcHJldmVudCB1bm1vdW50aW5nIGFmdGVyIGl0J3MgcmVuZGVyZWRcblxuICAgICAgICBpZiAocG9wdXBWaXNpYmxlIHx8IHRoaXMucG9wdXBSZWYuY3VycmVudCB8fCBmb3JjZVJlbmRlcikge1xuICAgICAgICAgIHBvcnRhbCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFBvcnRhbENvbXBvbmVudCwge1xuICAgICAgICAgICAga2V5OiBcInBvcnRhbFwiLFxuICAgICAgICAgICAgZ2V0Q29udGFpbmVyOiB0aGlzLmdldENvbnRhaW5lcixcbiAgICAgICAgICAgIGRpZFVwZGF0ZTogdGhpcy5oYW5kbGVQb3J0YWxVcGRhdGVcbiAgICAgICAgICB9LCB0aGlzLmdldENvbXBvbmVudCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcG9wdXBWaXNpYmxlICYmIGF1dG9EZXN0cm95KSB7XG4gICAgICAgICAgcG9ydGFsID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmlnZ2VyQ29udGV4dC5Qcm92aWRlciwge1xuICAgICAgICAgIHZhbHVlOiB0aGlzLnRyaWdnZXJDb250ZXh0VmFsdWVcbiAgICAgICAgfSwgdHJpZ2dlciwgcG9ydGFsKTtcbiAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgIGtleTogXCJnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMoX3JlZiwgcHJldlN0YXRlKSB7XG4gICAgICAgIHZhciBwb3B1cFZpc2libGUgPSBfcmVmLnBvcHVwVmlzaWJsZTtcbiAgICAgICAgdmFyIG5ld1N0YXRlID0ge307XG5cbiAgICAgICAgaWYgKHBvcHVwVmlzaWJsZSAhPT0gdW5kZWZpbmVkICYmIHByZXZTdGF0ZS5wb3B1cFZpc2libGUgIT09IHBvcHVwVmlzaWJsZSkge1xuICAgICAgICAgIG5ld1N0YXRlLnBvcHVwVmlzaWJsZSA9IHBvcHVwVmlzaWJsZTtcbiAgICAgICAgICBuZXdTdGF0ZS5wcmV2UG9wdXBWaXNpYmxlID0gcHJldlN0YXRlLnBvcHVwVmlzaWJsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gVHJpZ2dlcjtcbiAgfShSZWFjdC5Db21wb25lbnQpO1xuXG4gIFRyaWdnZXIuY29udGV4dFR5cGUgPSBUcmlnZ2VyQ29udGV4dDtcbiAgVHJpZ2dlci5kZWZhdWx0UHJvcHMgPSB7XG4gICAgcHJlZml4Q2xzOiAncmMtdHJpZ2dlci1wb3B1cCcsXG4gICAgZ2V0UG9wdXBDbGFzc05hbWVGcm9tQWxpZ246IHJldHVybkVtcHR5U3RyaW5nLFxuICAgIGdldERvY3VtZW50OiByZXR1cm5Eb2N1bWVudCxcbiAgICBvblBvcHVwVmlzaWJsZUNoYW5nZTogbm9vcCxcbiAgICBhZnRlclBvcHVwVmlzaWJsZUNoYW5nZTogbm9vcCxcbiAgICBvblBvcHVwQWxpZ246IG5vb3AsXG4gICAgcG9wdXBDbGFzc05hbWU6ICcnLFxuICAgIG1vdXNlRW50ZXJEZWxheTogMCxcbiAgICBtb3VzZUxlYXZlRGVsYXk6IDAuMSxcbiAgICBmb2N1c0RlbGF5OiAwLFxuICAgIGJsdXJEZWxheTogMC4xNSxcbiAgICBwb3B1cFN0eWxlOiB7fSxcbiAgICBkZXN0cm95UG9wdXBPbkhpZGU6IGZhbHNlLFxuICAgIHBvcHVwQWxpZ246IHt9LFxuICAgIGRlZmF1bHRQb3B1cFZpc2libGU6IGZhbHNlLFxuICAgIG1hc2s6IGZhbHNlLFxuICAgIG1hc2tDbG9zYWJsZTogdHJ1ZSxcbiAgICBhY3Rpb246IFtdLFxuICAgIHNob3dBY3Rpb246IFtdLFxuICAgIGhpZGVBY3Rpb246IFtdLFxuICAgIGF1dG9EZXN0cm95OiBmYWxzZVxuICB9O1xuICByZXR1cm4gVHJpZ2dlcjtcbn1cbmV4cG9ydCBkZWZhdWx0IGdlbmVyYXRlVHJpZ2dlcihQb3J0YWwpOyIsInZhciBhdXRvQWRqdXN0T3ZlcmZsb3cgPSB7XG4gIGFkanVzdFg6IDEsXG4gIGFkanVzdFk6IDFcbn07XG5leHBvcnQgdmFyIHBsYWNlbWVudHMgPSB7XG4gIHRvcExlZnQ6IHtcbiAgICBwb2ludHM6IFsnYmwnLCAndGwnXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzAsIC03XVxuICB9LFxuICBib3R0b21MZWZ0OiB7XG4gICAgcG9pbnRzOiBbJ3RsJywgJ2JsJ10sXG4gICAgb3ZlcmZsb3c6IGF1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFswLCA3XVxuICB9LFxuICBsZWZ0VG9wOiB7XG4gICAgcG9pbnRzOiBbJ3RyJywgJ3RsJ10sXG4gICAgb3ZlcmZsb3c6IGF1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFstNCwgMF1cbiAgfSxcbiAgcmlnaHRUb3A6IHtcbiAgICBwb2ludHM6IFsndGwnLCAndHInXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzQsIDBdXG4gIH1cbn07XG5leHBvcnQgdmFyIHBsYWNlbWVudHNSdGwgPSB7XG4gIHRvcExlZnQ6IHtcbiAgICBwb2ludHM6IFsnYmwnLCAndGwnXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzAsIC03XVxuICB9LFxuICBib3R0b21MZWZ0OiB7XG4gICAgcG9pbnRzOiBbJ3RsJywgJ2JsJ10sXG4gICAgb3ZlcmZsb3c6IGF1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFswLCA3XVxuICB9LFxuICByaWdodFRvcDoge1xuICAgIHBvaW50czogWyd0cicsICd0bCddLFxuICAgIG92ZXJmbG93OiBhdXRvQWRqdXN0T3ZlcmZsb3csXG4gICAgb2Zmc2V0OiBbLTQsIDBdXG4gIH0sXG4gIGxlZnRUb3A6IHtcbiAgICBwb2ludHM6IFsndGwnLCAndHInXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzQsIDBdXG4gIH1cbn07XG5leHBvcnQgZGVmYXVsdCBwbGFjZW1lbnRzOyIsImV4cG9ydCBmdW5jdGlvbiBnZXRNb3Rpb24obW9kZSwgbW90aW9uLCBkZWZhdWx0TW90aW9ucykge1xuICBpZiAobW90aW9uKSB7XG4gICAgcmV0dXJuIG1vdGlvbjtcbiAgfVxuXG4gIGlmIChkZWZhdWx0TW90aW9ucykge1xuICAgIHJldHVybiBkZWZhdWx0TW90aW9uc1ttb2RlXSB8fCBkZWZhdWx0TW90aW9ucy5vdGhlcjtcbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59IiwiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBUcmlnZ2VyIGZyb20gJ3JjLXRyaWdnZXInO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgcmFmIGZyb20gXCJyYy11dGlsL2VzL3JhZlwiO1xuaW1wb3J0IHsgTWVudUNvbnRleHQgfSBmcm9tICcuLi9jb250ZXh0L01lbnVDb250ZXh0JztcbmltcG9ydCB7IHBsYWNlbWVudHMsIHBsYWNlbWVudHNSdGwgfSBmcm9tICcuLi9wbGFjZW1lbnRzJztcbmltcG9ydCB7IGdldE1vdGlvbiB9IGZyb20gJy4uL3V0aWxzL21vdGlvblV0aWwnO1xudmFyIHBvcHVwUGxhY2VtZW50TWFwID0ge1xuICBob3Jpem9udGFsOiAnYm90dG9tTGVmdCcsXG4gIHZlcnRpY2FsOiAncmlnaHRUb3AnLFxuICAndmVydGljYWwtbGVmdCc6ICdyaWdodFRvcCcsXG4gICd2ZXJ0aWNhbC1yaWdodCc6ICdsZWZ0VG9wJ1xufTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFBvcHVwVHJpZ2dlcihfcmVmKSB7XG4gIHZhciBwcmVmaXhDbHMgPSBfcmVmLnByZWZpeENscyxcbiAgICAgIHZpc2libGUgPSBfcmVmLnZpc2libGUsXG4gICAgICBjaGlsZHJlbiA9IF9yZWYuY2hpbGRyZW4sXG4gICAgICBwb3B1cCA9IF9yZWYucG9wdXAsXG4gICAgICBwb3B1cENsYXNzTmFtZSA9IF9yZWYucG9wdXBDbGFzc05hbWUsXG4gICAgICBwb3B1cE9mZnNldCA9IF9yZWYucG9wdXBPZmZzZXQsXG4gICAgICBkaXNhYmxlZCA9IF9yZWYuZGlzYWJsZWQsXG4gICAgICBtb2RlID0gX3JlZi5tb2RlLFxuICAgICAgb25WaXNpYmxlQ2hhbmdlID0gX3JlZi5vblZpc2libGVDaGFuZ2U7XG5cbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChNZW51Q29udGV4dCksXG4gICAgICBnZXRQb3B1cENvbnRhaW5lciA9IF9SZWFjdCR1c2VDb250ZXh0LmdldFBvcHVwQ29udGFpbmVyLFxuICAgICAgcnRsID0gX1JlYWN0JHVzZUNvbnRleHQucnRsLFxuICAgICAgc3ViTWVudU9wZW5EZWxheSA9IF9SZWFjdCR1c2VDb250ZXh0LnN1Yk1lbnVPcGVuRGVsYXksXG4gICAgICBzdWJNZW51Q2xvc2VEZWxheSA9IF9SZWFjdCR1c2VDb250ZXh0LnN1Yk1lbnVDbG9zZURlbGF5LFxuICAgICAgYnVpbHRpblBsYWNlbWVudHMgPSBfUmVhY3QkdXNlQ29udGV4dC5idWlsdGluUGxhY2VtZW50cyxcbiAgICAgIHRyaWdnZXJTdWJNZW51QWN0aW9uID0gX1JlYWN0JHVzZUNvbnRleHQudHJpZ2dlclN1Yk1lbnVBY3Rpb24sXG4gICAgICBmb3JjZVN1Yk1lbnVSZW5kZXIgPSBfUmVhY3QkdXNlQ29udGV4dC5mb3JjZVN1Yk1lbnVSZW5kZXIsXG4gICAgICBtb3Rpb24gPSBfUmVhY3QkdXNlQ29udGV4dC5tb3Rpb24sXG4gICAgICBkZWZhdWx0TW90aW9ucyA9IF9SZWFjdCR1c2VDb250ZXh0LmRlZmF1bHRNb3Rpb25zO1xuXG4gIHZhciBfUmVhY3QkdXNlU3RhdGUgPSBSZWFjdC51c2VTdGF0ZShmYWxzZSksXG4gICAgICBfUmVhY3QkdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlLCAyKSxcbiAgICAgIGlubmVyVmlzaWJsZSA9IF9SZWFjdCR1c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRJbm5lclZpc2libGUgPSBfUmVhY3QkdXNlU3RhdGUyWzFdO1xuXG4gIHZhciBwbGFjZW1lbnQgPSBydGwgPyBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHBsYWNlbWVudHNSdGwpLCBidWlsdGluUGxhY2VtZW50cykgOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHBsYWNlbWVudHMpLCBidWlsdGluUGxhY2VtZW50cyk7XG4gIHZhciBwb3B1cFBsYWNlbWVudCA9IHBvcHVwUGxhY2VtZW50TWFwW21vZGVdO1xuICB2YXIgdGFyZ2V0TW90aW9uID0gZ2V0TW90aW9uKG1vZGUsIG1vdGlvbiwgZGVmYXVsdE1vdGlvbnMpO1xuXG4gIHZhciBtZXJnZWRNb3Rpb24gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRhcmdldE1vdGlvbiksIHt9LCB7XG4gICAgbGVhdmVkQ2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWhpZGRlblwiKSxcbiAgICByZW1vdmVPbkxlYXZlOiBmYWxzZSxcbiAgICBtb3Rpb25BcHBlYXI6IHRydWVcbiAgfSk7IC8vIERlbGF5IHRvIGNoYW5nZSB2aXNpYmxlXG5cblxuICB2YXIgdmlzaWJsZVJlZiA9IFJlYWN0LnVzZVJlZigpO1xuICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZpc2libGVSZWYuY3VycmVudCA9IHJhZihmdW5jdGlvbiAoKSB7XG4gICAgICBzZXRJbm5lclZpc2libGUodmlzaWJsZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJhZi5jYW5jZWwodmlzaWJsZVJlZi5jdXJyZW50KTtcbiAgICB9O1xuICB9LCBbdmlzaWJsZV0pO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVHJpZ2dlciwge1xuICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgIHBvcHVwQ2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiXCIuY29uY2F0KHByZWZpeENscywgXCItcG9wdXBcIiksIF9kZWZpbmVQcm9wZXJ0eSh7fSwgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1ydGxcIiksIHJ0bCksIHBvcHVwQ2xhc3NOYW1lKSxcbiAgICBzdHJldGNoOiBtb2RlID09PSAnaG9yaXpvbnRhbCcgPyAnbWluV2lkdGgnIDogbnVsbCxcbiAgICBnZXRQb3B1cENvbnRhaW5lcjogZ2V0UG9wdXBDb250YWluZXIsXG4gICAgYnVpbHRpblBsYWNlbWVudHM6IHBsYWNlbWVudCxcbiAgICBwb3B1cFBsYWNlbWVudDogcG9wdXBQbGFjZW1lbnQsXG4gICAgcG9wdXBWaXNpYmxlOiBpbm5lclZpc2libGUsXG4gICAgcG9wdXA6IHBvcHVwLFxuICAgIHBvcHVwQWxpZ246IHBvcHVwT2Zmc2V0ICYmIHtcbiAgICAgIG9mZnNldDogcG9wdXBPZmZzZXRcbiAgICB9LFxuICAgIGFjdGlvbjogZGlzYWJsZWQgPyBbXSA6IFt0cmlnZ2VyU3ViTWVudUFjdGlvbl0sXG4gICAgbW91c2VFbnRlckRlbGF5OiBzdWJNZW51T3BlbkRlbGF5LFxuICAgIG1vdXNlTGVhdmVEZWxheTogc3ViTWVudUNsb3NlRGVsYXksXG4gICAgb25Qb3B1cFZpc2libGVDaGFuZ2U6IG9uVmlzaWJsZUNoYW5nZSxcbiAgICBmb3JjZVJlbmRlcjogZm9yY2VTdWJNZW51UmVuZGVyLFxuICAgIHBvcHVwTW90aW9uOiBtZXJnZWRNb3Rpb25cbiAgfSwgY2hpbGRyZW4pO1xufSIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IENTU01vdGlvbiBmcm9tICdyYy1tb3Rpb24nO1xuaW1wb3J0IHsgZ2V0TW90aW9uIH0gZnJvbSAnLi4vdXRpbHMvbW90aW9uVXRpbCc7XG5pbXBvcnQgTWVudUNvbnRleHRQcm92aWRlciwgeyBNZW51Q29udGV4dCB9IGZyb20gJy4uL2NvbnRleHQvTWVudUNvbnRleHQnO1xuaW1wb3J0IFN1Yk1lbnVMaXN0IGZyb20gJy4vU3ViTWVudUxpc3QnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSW5saW5lU3ViTWVudUxpc3QoX3JlZikge1xuICB2YXIgaWQgPSBfcmVmLmlkLFxuICAgICAgb3BlbiA9IF9yZWYub3BlbixcbiAgICAgIGtleVBhdGggPSBfcmVmLmtleVBhdGgsXG4gICAgICBjaGlsZHJlbiA9IF9yZWYuY2hpbGRyZW47XG4gIHZhciBmaXhlZE1vZGUgPSAnaW5saW5lJztcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KE1lbnVDb250ZXh0KSxcbiAgICAgIHByZWZpeENscyA9IF9SZWFjdCR1c2VDb250ZXh0LnByZWZpeENscyxcbiAgICAgIGZvcmNlU3ViTWVudVJlbmRlciA9IF9SZWFjdCR1c2VDb250ZXh0LmZvcmNlU3ViTWVudVJlbmRlcixcbiAgICAgIG1vdGlvbiA9IF9SZWFjdCR1c2VDb250ZXh0Lm1vdGlvbixcbiAgICAgIGRlZmF1bHRNb3Rpb25zID0gX1JlYWN0JHVzZUNvbnRleHQuZGVmYXVsdE1vdGlvbnMsXG4gICAgICBtb2RlID0gX1JlYWN0JHVzZUNvbnRleHQubW9kZTsgLy8gQWx3YXlzIHVzZSBsYXRlc3QgbW9kZSBjaGVja1xuXG5cbiAgdmFyIHNhbWVNb2RlUmVmID0gUmVhY3QudXNlUmVmKGZhbHNlKTtcbiAgc2FtZU1vZGVSZWYuY3VycmVudCA9IG1vZGUgPT09IGZpeGVkTW9kZTsgLy8gV2UgcmVjb3JkIGBkZXN0cm95YCBtYXJrIGhlcmUgc2luY2Ugd2hlbiBtb2RlIGNoYW5nZSBmcm9tIGBpbmxpbmVgIHRvIG90aGVycy5cbiAgLy8gVGhlIGlubGluZSBsaXN0IHNob3VsZCByZW1vdmUgd2hlbiBtb3Rpb24gZW5kLlxuXG4gIHZhciBfUmVhY3QkdXNlU3RhdGUgPSBSZWFjdC51c2VTdGF0ZSghc2FtZU1vZGVSZWYuY3VycmVudCksXG4gICAgICBfUmVhY3QkdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlLCAyKSxcbiAgICAgIGRlc3Ryb3kgPSBfUmVhY3QkdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0RGVzdHJveSA9IF9SZWFjdCR1c2VTdGF0ZTJbMV07XG5cbiAgdmFyIG1lcmdlZE9wZW4gPSBzYW1lTW9kZVJlZi5jdXJyZW50ID8gb3BlbiA6IGZhbHNlOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gRWZmZWN0ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBSZXNldCBkZXN0cm95IHN0YXRlIHdoZW4gbW9kZSBjaGFuZ2UgYmFja1xuXG4gIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNhbWVNb2RlUmVmLmN1cnJlbnQpIHtcbiAgICAgIHNldERlc3Ryb3koZmFsc2UpO1xuICAgIH1cbiAgfSwgW21vZGVdKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IFJlbmRlciA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgbWVyZ2VkTW90aW9uID0gX29iamVjdFNwcmVhZCh7fSwgZ2V0TW90aW9uKGZpeGVkTW9kZSwgbW90aW9uLCBkZWZhdWx0TW90aW9ucykpOyAvLyBObyBuZWVkIGFwcGVhciBzaW5jZSBuZXN0IGlubGluZUNvbGxhcHNlIGNoYW5nZWRcblxuXG4gIGlmIChrZXlQYXRoLmxlbmd0aCA+IDEpIHtcbiAgICBtZXJnZWRNb3Rpb24ubW90aW9uQXBwZWFyID0gZmFsc2U7XG4gIH0gLy8gSGlkZSBpbmxpbmUgbGlzdCB3aGVuIG1vZGUgY2hhbmdlZCBhbmQgbW90aW9uIGVuZFxuXG5cbiAgdmFyIG9yaWdpbk9uVmlzaWJsZUNoYW5nZWQgPSBtZXJnZWRNb3Rpb24ub25WaXNpYmxlQ2hhbmdlZDtcblxuICBtZXJnZWRNb3Rpb24ub25WaXNpYmxlQ2hhbmdlZCA9IGZ1bmN0aW9uIChuZXdWaXNpYmxlKSB7XG4gICAgaWYgKCFzYW1lTW9kZVJlZi5jdXJyZW50ICYmICFuZXdWaXNpYmxlKSB7XG4gICAgICBzZXREZXN0cm95KHRydWUpO1xuICAgIH1cblxuICAgIHJldHVybiBvcmlnaW5PblZpc2libGVDaGFuZ2VkID09PSBudWxsIHx8IG9yaWdpbk9uVmlzaWJsZUNoYW5nZWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9yaWdpbk9uVmlzaWJsZUNoYW5nZWQobmV3VmlzaWJsZSk7XG4gIH07XG5cbiAgaWYgKGRlc3Ryb3kpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChNZW51Q29udGV4dFByb3ZpZGVyLCB7XG4gICAgbW9kZTogZml4ZWRNb2RlLFxuICAgIGxvY2tlZDogIXNhbWVNb2RlUmVmLmN1cnJlbnRcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1NTTW90aW9uLCBfZXh0ZW5kcyh7XG4gICAgdmlzaWJsZTogbWVyZ2VkT3BlblxuICB9LCBtZXJnZWRNb3Rpb24sIHtcbiAgICBmb3JjZVJlbmRlcjogZm9yY2VTdWJNZW51UmVuZGVyLFxuICAgIHJlbW92ZU9uTGVhdmU6IGZhbHNlLFxuICAgIGxlYXZlZENsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1oaWRkZW5cIilcbiAgfSksIGZ1bmN0aW9uIChfcmVmMikge1xuICAgIHZhciBtb3Rpb25DbGFzc05hbWUgPSBfcmVmMi5jbGFzc05hbWUsXG4gICAgICAgIG1vdGlvblN0eWxlID0gX3JlZjIuc3R5bGU7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN1Yk1lbnVMaXN0LCB7XG4gICAgICBpZDogaWQsXG4gICAgICBjbGFzc05hbWU6IG1vdGlvbkNsYXNzTmFtZSxcbiAgICAgIHN0eWxlOiBtb3Rpb25TdHlsZVxuICAgIH0sIGNoaWxkcmVuKTtcbiAgfSkpO1xufSIsImltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBPdmVyZmxvdyBmcm9tICdyYy1vdmVyZmxvdyc7XG5pbXBvcnQgd2FybmluZyBmcm9tIFwicmMtdXRpbC9lcy93YXJuaW5nXCI7XG5pbXBvcnQgU3ViTWVudUxpc3QgZnJvbSAnLi9TdWJNZW51TGlzdCc7XG5pbXBvcnQgeyBwYXJzZUNoaWxkcmVuIH0gZnJvbSAnLi4vdXRpbHMvbm9kZVV0aWwnO1xuaW1wb3J0IE1lbnVDb250ZXh0UHJvdmlkZXIsIHsgTWVudUNvbnRleHQgfSBmcm9tICcuLi9jb250ZXh0L01lbnVDb250ZXh0JztcbmltcG9ydCB1c2VNZW1vQ2FsbGJhY2sgZnJvbSAnLi4vaG9va3MvdXNlTWVtb0NhbGxiYWNrJztcbmltcG9ydCBQb3B1cFRyaWdnZXIgZnJvbSAnLi9Qb3B1cFRyaWdnZXInO1xuaW1wb3J0IEljb24gZnJvbSAnLi4vSWNvbic7XG5pbXBvcnQgdXNlQWN0aXZlIGZyb20gJy4uL2hvb2tzL3VzZUFjdGl2ZSc7XG5pbXBvcnQgeyB3YXJuSXRlbVByb3AgfSBmcm9tICcuLi91dGlscy93YXJuVXRpbCc7XG5pbXBvcnQgdXNlRGlyZWN0aW9uU3R5bGUgZnJvbSAnLi4vaG9va3MvdXNlRGlyZWN0aW9uU3R5bGUnO1xuaW1wb3J0IElubGluZVN1Yk1lbnVMaXN0IGZyb20gJy4vSW5saW5lU3ViTWVudUxpc3QnO1xuaW1wb3J0IHsgUGF0aFRyYWNrZXJDb250ZXh0LCBQYXRoVXNlckNvbnRleHQsIHVzZUZ1bGxQYXRoLCB1c2VNZWFzdXJlIH0gZnJvbSAnLi4vY29udGV4dC9QYXRoQ29udGV4dCc7XG5pbXBvcnQgeyB1c2VNZW51SWQgfSBmcm9tICcuLi9jb250ZXh0L0lkQ29udGV4dCc7XG5cbnZhciBJbnRlcm5hbFN1Yk1lbnUgPSBmdW5jdGlvbiBJbnRlcm5hbFN1Yk1lbnUocHJvcHMpIHtcbiAgdmFyIF9jbGFzc05hbWVzO1xuXG4gIHZhciBzdHlsZSA9IHByb3BzLnN0eWxlLFxuICAgICAgY2xhc3NOYW1lID0gcHJvcHMuY2xhc3NOYW1lLFxuICAgICAgdGl0bGUgPSBwcm9wcy50aXRsZSxcbiAgICAgIGV2ZW50S2V5ID0gcHJvcHMuZXZlbnRLZXksXG4gICAgICB3YXJuS2V5ID0gcHJvcHMud2FybktleSxcbiAgICAgIGRpc2FibGVkID0gcHJvcHMuZGlzYWJsZWQsXG4gICAgICBpbnRlcm5hbFBvcHVwQ2xvc2UgPSBwcm9wcy5pbnRlcm5hbFBvcHVwQ2xvc2UsXG4gICAgICBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuLFxuICAgICAgaXRlbUljb24gPSBwcm9wcy5pdGVtSWNvbixcbiAgICAgIGV4cGFuZEljb24gPSBwcm9wcy5leHBhbmRJY29uLFxuICAgICAgcG9wdXBDbGFzc05hbWUgPSBwcm9wcy5wb3B1cENsYXNzTmFtZSxcbiAgICAgIHBvcHVwT2Zmc2V0ID0gcHJvcHMucG9wdXBPZmZzZXQsXG4gICAgICBvbkNsaWNrID0gcHJvcHMub25DbGljayxcbiAgICAgIG9uTW91c2VFbnRlciA9IHByb3BzLm9uTW91c2VFbnRlcixcbiAgICAgIG9uTW91c2VMZWF2ZSA9IHByb3BzLm9uTW91c2VMZWF2ZSxcbiAgICAgIG9uVGl0bGVDbGljayA9IHByb3BzLm9uVGl0bGVDbGljayxcbiAgICAgIG9uVGl0bGVNb3VzZUVudGVyID0gcHJvcHMub25UaXRsZU1vdXNlRW50ZXIsXG4gICAgICBvblRpdGxlTW91c2VMZWF2ZSA9IHByb3BzLm9uVGl0bGVNb3VzZUxlYXZlLFxuICAgICAgcmVzdFByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHByb3BzLCBbXCJzdHlsZVwiLCBcImNsYXNzTmFtZVwiLCBcInRpdGxlXCIsIFwiZXZlbnRLZXlcIiwgXCJ3YXJuS2V5XCIsIFwiZGlzYWJsZWRcIiwgXCJpbnRlcm5hbFBvcHVwQ2xvc2VcIiwgXCJjaGlsZHJlblwiLCBcIml0ZW1JY29uXCIsIFwiZXhwYW5kSWNvblwiLCBcInBvcHVwQ2xhc3NOYW1lXCIsIFwicG9wdXBPZmZzZXRcIiwgXCJvbkNsaWNrXCIsIFwib25Nb3VzZUVudGVyXCIsIFwib25Nb3VzZUxlYXZlXCIsIFwib25UaXRsZUNsaWNrXCIsIFwib25UaXRsZU1vdXNlRW50ZXJcIiwgXCJvblRpdGxlTW91c2VMZWF2ZVwiXSk7XG5cbiAgdmFyIGRvbURhdGFJZCA9IHVzZU1lbnVJZChldmVudEtleSk7XG5cbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChNZW51Q29udGV4dCksXG4gICAgICBwcmVmaXhDbHMgPSBfUmVhY3QkdXNlQ29udGV4dC5wcmVmaXhDbHMsXG4gICAgICBtb2RlID0gX1JlYWN0JHVzZUNvbnRleHQubW9kZSxcbiAgICAgIG9wZW5LZXlzID0gX1JlYWN0JHVzZUNvbnRleHQub3BlbktleXMsXG4gICAgICBjb250ZXh0RGlzYWJsZWQgPSBfUmVhY3QkdXNlQ29udGV4dC5kaXNhYmxlZCxcbiAgICAgIG92ZXJmbG93RGlzYWJsZWQgPSBfUmVhY3QkdXNlQ29udGV4dC5vdmVyZmxvd0Rpc2FibGVkLFxuICAgICAgYWN0aXZlS2V5ID0gX1JlYWN0JHVzZUNvbnRleHQuYWN0aXZlS2V5LFxuICAgICAgc2VsZWN0ZWRLZXlzID0gX1JlYWN0JHVzZUNvbnRleHQuc2VsZWN0ZWRLZXlzLFxuICAgICAgY29udGV4dEl0ZW1JY29uID0gX1JlYWN0JHVzZUNvbnRleHQuaXRlbUljb24sXG4gICAgICBjb250ZXh0RXhwYW5kSWNvbiA9IF9SZWFjdCR1c2VDb250ZXh0LmV4cGFuZEljb24sXG4gICAgICBvbkl0ZW1DbGljayA9IF9SZWFjdCR1c2VDb250ZXh0Lm9uSXRlbUNsaWNrLFxuICAgICAgb25PcGVuQ2hhbmdlID0gX1JlYWN0JHVzZUNvbnRleHQub25PcGVuQ2hhbmdlLFxuICAgICAgb25BY3RpdmUgPSBfUmVhY3QkdXNlQ29udGV4dC5vbkFjdGl2ZTtcblxuICB2YXIgX1JlYWN0JHVzZUNvbnRleHQyID0gUmVhY3QudXNlQ29udGV4dChQYXRoVXNlckNvbnRleHQpLFxuICAgICAgaXNTdWJQYXRoS2V5ID0gX1JlYWN0JHVzZUNvbnRleHQyLmlzU3ViUGF0aEtleTtcblxuICB2YXIgY29ubmVjdGVkUGF0aCA9IHVzZUZ1bGxQYXRoKCk7XG4gIHZhciBzdWJNZW51UHJlZml4Q2xzID0gXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1zdWJtZW51XCIpO1xuICB2YXIgbWVyZ2VkRGlzYWJsZWQgPSBjb250ZXh0RGlzYWJsZWQgfHwgZGlzYWJsZWQ7XG4gIHZhciBlbGVtZW50UmVmID0gUmVhY3QudXNlUmVmKCk7XG4gIHZhciBwb3B1cFJlZiA9IFJlYWN0LnVzZVJlZigpOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBXYXJuID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybktleSkge1xuICAgIHdhcm5pbmcoZmFsc2UsICdTdWJNZW51IHNob3VsZCBub3QgbGVhdmUgdW5kZWZpbmVkIGBrZXlgLicpO1xuICB9IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IEljb24gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBtZXJnZWRJdGVtSWNvbiA9IGl0ZW1JY29uIHx8IGNvbnRleHRJdGVtSWNvbjtcbiAgdmFyIG1lcmdlZEV4cGFuZEljb24gPSBleHBhbmRJY29uIHx8IGNvbnRleHRFeHBhbmRJY29uOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBPcGVuID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIG9yaWdpbk9wZW4gPSBvcGVuS2V5cy5pbmNsdWRlcyhldmVudEtleSk7XG4gIHZhciBvcGVuID0gIW92ZXJmbG93RGlzYWJsZWQgJiYgb3JpZ2luT3BlbjsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBTZWxlY3QgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBjaGlsZHJlblNlbGVjdGVkID0gaXNTdWJQYXRoS2V5KHNlbGVjdGVkS2V5cywgZXZlbnRLZXkpOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IEFjdGl2ZSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIF91c2VBY3RpdmUgPSB1c2VBY3RpdmUoZXZlbnRLZXksIG1lcmdlZERpc2FibGVkLCBvblRpdGxlTW91c2VFbnRlciwgb25UaXRsZU1vdXNlTGVhdmUpLFxuICAgICAgYWN0aXZlID0gX3VzZUFjdGl2ZS5hY3RpdmUsXG4gICAgICBhY3RpdmVQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfdXNlQWN0aXZlLCBbXCJhY3RpdmVcIl0pOyAvLyBGYWxsYmFjayBvZiBhY3RpdmUgY2hlY2sgdG8gYXZvaWQgaG92ZXIgb24gbWVudSB0aXRsZSBvciBkaXNhYmxlZCBpdGVtXG5cblxuICB2YXIgX1JlYWN0JHVzZVN0YXRlID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpLFxuICAgICAgX1JlYWN0JHVzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VTdGF0ZSwgMiksXG4gICAgICBjaGlsZHJlbkFjdGl2ZSA9IF9SZWFjdCR1c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRDaGlsZHJlbkFjdGl2ZSA9IF9SZWFjdCR1c2VTdGF0ZTJbMV07XG5cbiAgdmFyIHRyaWdnZXJDaGlsZHJlbkFjdGl2ZSA9IGZ1bmN0aW9uIHRyaWdnZXJDaGlsZHJlbkFjdGl2ZShuZXdBY3RpdmUpIHtcbiAgICBpZiAoIW1lcmdlZERpc2FibGVkKSB7XG4gICAgICBzZXRDaGlsZHJlbkFjdGl2ZShuZXdBY3RpdmUpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgb25JbnRlcm5hbE1vdXNlRW50ZXIgPSBmdW5jdGlvbiBvbkludGVybmFsTW91c2VFbnRlcihkb21FdmVudCkge1xuICAgIHRyaWdnZXJDaGlsZHJlbkFjdGl2ZSh0cnVlKTtcbiAgICBvbk1vdXNlRW50ZXIgPT09IG51bGwgfHwgb25Nb3VzZUVudGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbk1vdXNlRW50ZXIoe1xuICAgICAga2V5OiBldmVudEtleSxcbiAgICAgIGRvbUV2ZW50OiBkb21FdmVudFxuICAgIH0pO1xuICB9O1xuXG4gIHZhciBvbkludGVybmFsTW91c2VMZWF2ZSA9IGZ1bmN0aW9uIG9uSW50ZXJuYWxNb3VzZUxlYXZlKGRvbUV2ZW50KSB7XG4gICAgdHJpZ2dlckNoaWxkcmVuQWN0aXZlKGZhbHNlKTtcbiAgICBvbk1vdXNlTGVhdmUgPT09IG51bGwgfHwgb25Nb3VzZUxlYXZlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbk1vdXNlTGVhdmUoe1xuICAgICAga2V5OiBldmVudEtleSxcbiAgICAgIGRvbUV2ZW50OiBkb21FdmVudFxuICAgIH0pO1xuICB9O1xuXG4gIHZhciBtZXJnZWRBY3RpdmUgPSBSZWFjdC51c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoYWN0aXZlKSB7XG4gICAgICByZXR1cm4gYWN0aXZlO1xuICAgIH1cblxuICAgIGlmIChtb2RlICE9PSAnaW5saW5lJykge1xuICAgICAgcmV0dXJuIGNoaWxkcmVuQWN0aXZlIHx8IGlzU3ViUGF0aEtleShbYWN0aXZlS2V5XSwgZXZlbnRLZXkpO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfSwgW21vZGUsIGFjdGl2ZSwgYWN0aXZlS2V5LCBjaGlsZHJlbkFjdGl2ZSwgZXZlbnRLZXksIGlzU3ViUGF0aEtleV0pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PSBEaXJlY3Rpb25TdHlsZSA9PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBkaXJlY3Rpb25TdHlsZSA9IHVzZURpcmVjdGlvblN0eWxlKGNvbm5lY3RlZFBhdGgubGVuZ3RoKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBFdmVudHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyA+Pj4+IFRpdGxlIGNsaWNrXG5cbiAgdmFyIG9uSW50ZXJuYWxUaXRsZUNsaWNrID0gZnVuY3Rpb24gb25JbnRlcm5hbFRpdGxlQ2xpY2soZSkge1xuICAgIC8vIFNraXAgaWYgZGlzYWJsZWRcbiAgICBpZiAobWVyZ2VkRGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBvblRpdGxlQ2xpY2sgPT09IG51bGwgfHwgb25UaXRsZUNsaWNrID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvblRpdGxlQ2xpY2soe1xuICAgICAga2V5OiBldmVudEtleSxcbiAgICAgIGRvbUV2ZW50OiBlXG4gICAgfSk7IC8vIFRyaWdnZXIgb3BlbiBieSBjbGljayB3aGVuIG1vZGUgaXMgYGlubGluZWBcblxuICAgIGlmIChtb2RlID09PSAnaW5saW5lJykge1xuICAgICAgb25PcGVuQ2hhbmdlKGV2ZW50S2V5LCAhb3JpZ2luT3Blbik7XG4gICAgfVxuICB9OyAvLyA+Pj4+IENvbnRleHQgZm9yIGNoaWxkcmVuIGNsaWNrXG5cblxuICB2YXIgb25NZXJnZWRJdGVtQ2xpY2sgPSB1c2VNZW1vQ2FsbGJhY2soZnVuY3Rpb24gKGluZm8pIHtcbiAgICBvbkNsaWNrID09PSBudWxsIHx8IG9uQ2xpY2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uQ2xpY2sod2Fybkl0ZW1Qcm9wKGluZm8pKTtcbiAgICBvbkl0ZW1DbGljayhpbmZvKTtcbiAgfSk7IC8vID4+Pj4+IFZpc2libGUgY2hhbmdlXG5cbiAgdmFyIG9uUG9wdXBWaXNpYmxlQ2hhbmdlID0gZnVuY3Rpb24gb25Qb3B1cFZpc2libGVDaGFuZ2UobmV3VmlzaWJsZSkge1xuICAgIGlmIChtb2RlICE9PSAnaW5saW5lJykge1xuICAgICAgb25PcGVuQ2hhbmdlKGV2ZW50S2V5LCBuZXdWaXNpYmxlKTtcbiAgICB9XG4gIH07XG4gIC8qKlxuICAgKiBVc2VkIGZvciBhY2Nlc3NpYmlsaXR5LiBIZWxwZXIgd2lsbCBmb2N1cyBlbGVtZW50IHdpdGhvdXQga2V5IGJvYXJkLlxuICAgKiBXZSBzaG91bGQgbWFudWFsbHkgdHJpZ2dlciBhbiBhY3RpdmVcbiAgICovXG5cblxuICB2YXIgb25JbnRlcm5hbEZvY3VzID0gZnVuY3Rpb24gb25JbnRlcm5hbEZvY3VzKCkge1xuICAgIG9uQWN0aXZlKGV2ZW50S2V5KTtcbiAgfTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBSZW5kZXIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdmFyIHBvcHVwSWQgPSBkb21EYXRhSWQgJiYgXCJcIi5jb25jYXQoZG9tRGF0YUlkLCBcIi1wb3B1cFwiKTsgLy8gPj4+Pj4gVGl0bGVcblxuICB2YXIgdGl0bGVOb2RlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX2V4dGVuZHMoe1xuICAgIHJvbGU6IFwibWVudWl0ZW1cIixcbiAgICBzdHlsZTogZGlyZWN0aW9uU3R5bGUsXG4gICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChzdWJNZW51UHJlZml4Q2xzLCBcIi10aXRsZVwiKSxcbiAgICB0YWJJbmRleDogbWVyZ2VkRGlzYWJsZWQgPyBudWxsIDogLTEsXG4gICAgcmVmOiBlbGVtZW50UmVmLFxuICAgIHRpdGxlOiB0eXBlb2YgdGl0bGUgPT09ICdzdHJpbmcnID8gdGl0bGUgOiBudWxsLFxuICAgIFwiZGF0YS1tZW51LWlkXCI6IG92ZXJmbG93RGlzYWJsZWQgJiYgZG9tRGF0YUlkID8gbnVsbCA6IGRvbURhdGFJZCxcbiAgICBcImFyaWEtZXhwYW5kZWRcIjogb3BlbixcbiAgICBcImFyaWEtaGFzcG9wdXBcIjogdHJ1ZSxcbiAgICBcImFyaWEtY29udHJvbHNcIjogcG9wdXBJZCxcbiAgICBcImFyaWEtZGlzYWJsZWRcIjogbWVyZ2VkRGlzYWJsZWQsXG4gICAgb25DbGljazogb25JbnRlcm5hbFRpdGxlQ2xpY2ssXG4gICAgb25Gb2N1czogb25JbnRlcm5hbEZvY3VzXG4gIH0sIGFjdGl2ZVByb3BzKSwgdGl0bGUsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEljb24sIHtcbiAgICBpY29uOiBtb2RlICE9PSAnaG9yaXpvbnRhbCcgPyBtZXJnZWRFeHBhbmRJY29uIDogbnVsbCxcbiAgICBwcm9wczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcyksIHt9LCB7XG4gICAgICBpc09wZW46IG9wZW4sXG4gICAgICAvLyBbTGVnYWN5XSBOb3Qgc3VyZSB3aHkgbmVlZCB0aGlzIG1hcmtcbiAgICAgIGlzU3ViTWVudTogdHJ1ZVxuICAgIH0pXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiaVwiLCB7XG4gICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChzdWJNZW51UHJlZml4Q2xzLCBcIi1hcnJvd1wiKVxuICB9KSkpOyAvLyBDYWNoZSBtb2RlIGlmIGl0IGNoYW5nZSB0byBgaW5saW5lYCB3aGljaCBkbyBub3QgaGF2ZSBwb3B1cCBtb3Rpb25cblxuICB2YXIgdHJpZ2dlck1vZGVSZWYgPSBSZWFjdC51c2VSZWYobW9kZSk7XG5cbiAgaWYgKG1vZGUgIT09ICdpbmxpbmUnKSB7XG4gICAgdHJpZ2dlck1vZGVSZWYuY3VycmVudCA9IGNvbm5lY3RlZFBhdGgubGVuZ3RoID4gMSA/ICd2ZXJ0aWNhbCcgOiBtb2RlO1xuICB9XG5cbiAgaWYgKCFvdmVyZmxvd0Rpc2FibGVkKSB7XG4gICAgdmFyIHRyaWdnZXJNb2RlID0gdHJpZ2dlck1vZGVSZWYuY3VycmVudDsgLy8gU3RpbGwgd3JhcCB3aXRoIFRyaWdnZXIgaGVyZSBzaW5jZSB3ZSBuZWVkIGF2b2lkIHJlYWN0IHJlLW1vdW50IGRvbSBub2RlXG4gICAgLy8gV2hpY2ggbWFrZXMgbW90aW9uIGZhaWxlZFxuXG4gICAgdGl0bGVOb2RlID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUG9wdXBUcmlnZ2VyLCB7XG4gICAgICBtb2RlOiB0cmlnZ2VyTW9kZSxcbiAgICAgIHByZWZpeENsczogc3ViTWVudVByZWZpeENscyxcbiAgICAgIHZpc2libGU6ICFpbnRlcm5hbFBvcHVwQ2xvc2UgJiYgb3BlbiAmJiBtb2RlICE9PSAnaW5saW5lJyxcbiAgICAgIHBvcHVwQ2xhc3NOYW1lOiBwb3B1cENsYXNzTmFtZSxcbiAgICAgIHBvcHVwT2Zmc2V0OiBwb3B1cE9mZnNldCxcbiAgICAgIHBvcHVwOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChNZW51Q29udGV4dFByb3ZpZGVyIC8vIFNwZWNpYWwgaGFuZGxlIG9mIGhvcml6b250YWwgbW9kZVxuICAgICAgLCB7XG4gICAgICAgIG1vZGU6IHRyaWdnZXJNb2RlID09PSAnaG9yaXpvbnRhbCcgPyAndmVydGljYWwnIDogdHJpZ2dlck1vZGVcbiAgICAgIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN1Yk1lbnVMaXN0LCB7XG4gICAgICAgIGlkOiBwb3B1cElkLFxuICAgICAgICByZWY6IHBvcHVwUmVmXG4gICAgICB9LCBjaGlsZHJlbikpLFxuICAgICAgZGlzYWJsZWQ6IG1lcmdlZERpc2FibGVkLFxuICAgICAgb25WaXNpYmxlQ2hhbmdlOiBvblBvcHVwVmlzaWJsZUNoYW5nZVxuICAgIH0sIHRpdGxlTm9kZSk7XG4gIH0gLy8gPj4+Pj4gUmVuZGVyXG5cblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTWVudUNvbnRleHRQcm92aWRlciwge1xuICAgIG9uSXRlbUNsaWNrOiBvbk1lcmdlZEl0ZW1DbGljayxcbiAgICBtb2RlOiBtb2RlID09PSAnaG9yaXpvbnRhbCcgPyAndmVydGljYWwnIDogbW9kZSxcbiAgICBpdGVtSWNvbjogbWVyZ2VkSXRlbUljb24sXG4gICAgZXhwYW5kSWNvbjogbWVyZ2VkRXhwYW5kSWNvblxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChPdmVyZmxvdy5JdGVtLCBfZXh0ZW5kcyh7XG4gICAgcm9sZTogXCJub25lXCJcbiAgfSwgcmVzdFByb3BzLCB7XG4gICAgY29tcG9uZW50OiBcImxpXCIsXG4gICAgc3R5bGU6IHN0eWxlLFxuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhzdWJNZW51UHJlZml4Q2xzLCBcIlwiLmNvbmNhdChzdWJNZW51UHJlZml4Q2xzLCBcIi1cIikuY29uY2F0KG1vZGUpLCBjbGFzc05hbWUsIChfY2xhc3NOYW1lcyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KHN1Yk1lbnVQcmVmaXhDbHMsIFwiLW9wZW5cIiksIG9wZW4pLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KHN1Yk1lbnVQcmVmaXhDbHMsIFwiLWFjdGl2ZVwiKSwgbWVyZ2VkQWN0aXZlKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCBcIlwiLmNvbmNhdChzdWJNZW51UHJlZml4Q2xzLCBcIi1zZWxlY3RlZFwiKSwgY2hpbGRyZW5TZWxlY3RlZCksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQoc3ViTWVudVByZWZpeENscywgXCItZGlzYWJsZWRcIiksIG1lcmdlZERpc2FibGVkKSwgX2NsYXNzTmFtZXMpKSxcbiAgICBvbk1vdXNlRW50ZXI6IG9uSW50ZXJuYWxNb3VzZUVudGVyLFxuICAgIG9uTW91c2VMZWF2ZTogb25JbnRlcm5hbE1vdXNlTGVhdmVcbiAgfSksIHRpdGxlTm9kZSwgIW92ZXJmbG93RGlzYWJsZWQgJiYgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSW5saW5lU3ViTWVudUxpc3QsIHtcbiAgICBpZDogcG9wdXBJZCxcbiAgICBvcGVuOiBvcGVuLFxuICAgIGtleVBhdGg6IGNvbm5lY3RlZFBhdGhcbiAgfSwgY2hpbGRyZW4pKSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTdWJNZW51KHByb3BzKSB7XG4gIHZhciBldmVudEtleSA9IHByb3BzLmV2ZW50S2V5LFxuICAgICAgY2hpbGRyZW4gPSBwcm9wcy5jaGlsZHJlbjtcbiAgdmFyIGNvbm5lY3RlZEtleVBhdGggPSB1c2VGdWxsUGF0aChldmVudEtleSk7XG4gIHZhciBjaGlsZExpc3QgPSBwYXJzZUNoaWxkcmVuKGNoaWxkcmVuLCBjb25uZWN0ZWRLZXlQYXRoKTsgLy8gPT09PT09PT09PT09PT09PT09PT0gUmVjb3JkIEtleVBhdGggPT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgbWVhc3VyZSA9IHVzZU1lYXN1cmUoKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG5cbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAobWVhc3VyZSkge1xuICAgICAgbWVhc3VyZS5yZWdpc3RlclBhdGgoZXZlbnRLZXksIGNvbm5lY3RlZEtleVBhdGgpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbWVhc3VyZS51bnJlZ2lzdGVyUGF0aChldmVudEtleSwgY29ubmVjdGVkS2V5UGF0aCk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW2Nvbm5lY3RlZEtleVBhdGhdKTtcbiAgdmFyIHJlbmRlck5vZGU7IC8vID09PT09PT09PT09PT09PT09PT09PT09PSBSZW5kZXIgPT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgaWYgKG1lYXN1cmUpIHtcbiAgICByZW5kZXJOb2RlID0gY2hpbGRMaXN0O1xuICB9IGVsc2Uge1xuICAgIHJlbmRlck5vZGUgPSAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChJbnRlcm5hbFN1Yk1lbnUsIHByb3BzLCBjaGlsZExpc3QpO1xuICB9XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFBhdGhUcmFja2VyQ29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiBjb25uZWN0ZWRLZXlQYXRoXG4gIH0sIHJlbmRlck5vZGUpO1xufSIsImltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5XCI7XG5pbXBvcnQgaXNWaXNpYmxlIGZyb20gJy4vaXNWaXNpYmxlJztcblxuZnVuY3Rpb24gZm9jdXNhYmxlKG5vZGUpIHtcbiAgdmFyIGluY2x1ZGVQb3NpdGl2ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG5cbiAgaWYgKGlzVmlzaWJsZShub2RlKSkge1xuICAgIHZhciBub2RlTmFtZSA9IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICB2YXIgaXNGb2N1c2FibGVFbGVtZW50ID0gLy8gRm9jdXNhYmxlIGVsZW1lbnRcbiAgICBbJ2lucHV0JywgJ3NlbGVjdCcsICd0ZXh0YXJlYScsICdidXR0b24nXS5pbmNsdWRlcyhub2RlTmFtZSkgfHwgLy8gRWRpdGFibGUgZWxlbWVudFxuICAgIG5vZGUuaXNDb250ZW50RWRpdGFibGUgfHwgLy8gQW5jaG9yIHdpdGggaHJlZiBlbGVtZW50XG4gICAgbm9kZU5hbWUgPT09ICdhJyAmJiAhIW5vZGUuZ2V0QXR0cmlidXRlKCdocmVmJyk7IC8vIEdldCB0YWJJbmRleFxuXG4gICAgdmFyIHRhYkluZGV4QXR0ciA9IG5vZGUuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpO1xuICAgIHZhciB0YWJJbmRleE51bSA9IE51bWJlcih0YWJJbmRleEF0dHIpOyAvLyBQYXJzZSBhcyBudW1iZXIgaWYgdmFsaWRhdGVcblxuICAgIHZhciB0YWJJbmRleCA9IG51bGw7XG5cbiAgICBpZiAodGFiSW5kZXhBdHRyICYmICFOdW1iZXIuaXNOYU4odGFiSW5kZXhOdW0pKSB7XG4gICAgICB0YWJJbmRleCA9IHRhYkluZGV4TnVtO1xuICAgIH0gZWxzZSBpZiAoaXNGb2N1c2FibGVFbGVtZW50ICYmIHRhYkluZGV4ID09PSBudWxsKSB7XG4gICAgICB0YWJJbmRleCA9IDA7XG4gICAgfSAvLyBCbG9jayBmb2N1c2FibGUgaWYgZGlzYWJsZWRcblxuXG4gICAgaWYgKGlzRm9jdXNhYmxlRWxlbWVudCAmJiBub2RlLmRpc2FibGVkKSB7XG4gICAgICB0YWJJbmRleCA9IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhYkluZGV4ICE9PSBudWxsICYmICh0YWJJbmRleCA+PSAwIHx8IGluY2x1ZGVQb3NpdGl2ZSAmJiB0YWJJbmRleCA8IDApO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9jdXNOb2RlTGlzdChub2RlKSB7XG4gIHZhciBpbmNsdWRlUG9zaXRpdmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlO1xuXG4gIHZhciByZXMgPSBfdG9Db25zdW1hYmxlQXJyYXkobm9kZS5xdWVyeVNlbGVjdG9yQWxsKCcqJykpLmZpbHRlcihmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICByZXR1cm4gZm9jdXNhYmxlKGNoaWxkLCBpbmNsdWRlUG9zaXRpdmUpO1xuICB9KTtcblxuICBpZiAoZm9jdXNhYmxlKG5vZGUsIGluY2x1ZGVQb3NpdGl2ZSkpIHtcbiAgICByZXMudW5zaGlmdChub2RlKTtcbiAgfVxuXG4gIHJldHVybiByZXM7XG59XG52YXIgbGFzdEZvY3VzRWxlbWVudCA9IG51bGw7XG4vKiogQGRlcHJlY2F0ZWQgRG8gbm90IHVzZSBzaW5jZSB0aGlzIG1heSBmYWlsZWQgd2hlbiB1c2VkIGluIGFzeW5jICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzYXZlTGFzdEZvY3VzTm9kZSgpIHtcbiAgbGFzdEZvY3VzRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG59XG4vKiogQGRlcHJlY2F0ZWQgRG8gbm90IHVzZSBzaW5jZSB0aGlzIG1heSBmYWlsZWQgd2hlbiB1c2VkIGluIGFzeW5jICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckxhc3RGb2N1c05vZGUoKSB7XG4gIGxhc3RGb2N1c0VsZW1lbnQgPSBudWxsO1xufVxuLyoqIEBkZXByZWNhdGVkIERvIG5vdCB1c2Ugc2luY2UgdGhpcyBtYXkgZmFpbGVkIHdoZW4gdXNlZCBpbiBhc3luYyAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYmFja0xhc3RGb2N1c05vZGUoKSB7XG4gIGlmIChsYXN0Rm9jdXNFbGVtZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOWFg+e0oOWPr+iDveW3sue7j+iiq+enu+WKqOS6hlxuICAgICAgbGFzdEZvY3VzRWxlbWVudC5mb2N1cygpO1xuICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZW1wdHkgKi9cbiAgICB9IGNhdGNoIChlKSB7Ly8gZW1wdHlcbiAgICB9XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1lbXB0eSAqL1xuXG4gIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBsaW1pdFRhYlJhbmdlKG5vZGUsIGUpIHtcbiAgaWYgKGUua2V5Q29kZSA9PT0gOSkge1xuICAgIHZhciB0YWJOb2RlTGlzdCA9IGdldEZvY3VzTm9kZUxpc3Qobm9kZSk7XG4gICAgdmFyIGxhc3RUYWJOb2RlID0gdGFiTm9kZUxpc3RbZS5zaGlmdEtleSA/IDAgOiB0YWJOb2RlTGlzdC5sZW5ndGggLSAxXTtcbiAgICB2YXIgbGVhdmluZ1RhYiA9IGxhc3RUYWJOb2RlID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50IHx8IG5vZGUgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG5cbiAgICBpZiAobGVhdmluZ1RhYikge1xuICAgICAgdmFyIHRhcmdldCA9IHRhYk5vZGVMaXN0W2Uuc2hpZnRLZXkgPyB0YWJOb2RlTGlzdC5sZW5ndGggLSAxIDogMF07XG4gICAgICB0YXJnZXQuZm9jdXMoKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cbn0iLCJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEtleUNvZGUgZnJvbSBcInJjLXV0aWwvZXMvS2V5Q29kZVwiO1xuaW1wb3J0IHJhZiBmcm9tIFwicmMtdXRpbC9lcy9yYWZcIjtcbmltcG9ydCB7IGdldEZvY3VzTm9kZUxpc3QgfSBmcm9tIFwicmMtdXRpbC9lcy9Eb20vZm9jdXNcIjtcbmltcG9ydCB7IGdldE1lbnVJZCB9IGZyb20gJy4uL2NvbnRleHQvSWRDb250ZXh0JzsgLy8gZGVzdHJ1Y3QgdG8gcmVkdWNlIG1pbmlmeSBzaXplXG5cbnZhciBMRUZUID0gS2V5Q29kZS5MRUZULFxuICAgIFJJR0hUID0gS2V5Q29kZS5SSUdIVCxcbiAgICBVUCA9IEtleUNvZGUuVVAsXG4gICAgRE9XTiA9IEtleUNvZGUuRE9XTixcbiAgICBFTlRFUiA9IEtleUNvZGUuRU5URVIsXG4gICAgRVNDID0gS2V5Q29kZS5FU0M7XG52YXIgQXJyb3dLZXlzID0gW1VQLCBET1dOLCBMRUZULCBSSUdIVF07XG5cbmZ1bmN0aW9uIGdldE9mZnNldChtb2RlLCBpc1Jvb3RMZXZlbCwgaXNSdGwsIHdoaWNoKSB7XG4gIHZhciBfaW5saW5lLCBfaG9yaXpvbnRhbCwgX3ZlcnRpY2FsLCBfb2Zmc2V0cyQ7XG5cbiAgdmFyIHByZXYgPSAncHJldic7XG4gIHZhciBuZXh0ID0gJ25leHQnO1xuICB2YXIgY2hpbGRyZW4gPSAnY2hpbGRyZW4nO1xuICB2YXIgcGFyZW50ID0gJ3BhcmVudCc7IC8vIElubGluZSBlbnRlciBpcyBzcGVjaWFsIHRoYXQgd2UgdXNlIHVuaXF1ZSBvcGVyYXRpb25cblxuICBpZiAobW9kZSA9PT0gJ2lubGluZScgJiYgd2hpY2ggPT09IEVOVEVSKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlubGluZVRyaWdnZXI6IHRydWVcbiAgICB9O1xuICB9XG5cbiAgdmFyIGlubGluZSA9IChfaW5saW5lID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfaW5saW5lLCBVUCwgcHJldiksIF9kZWZpbmVQcm9wZXJ0eShfaW5saW5lLCBET1dOLCBuZXh0KSwgX2lubGluZSk7XG4gIHZhciBob3Jpem9udGFsID0gKF9ob3Jpem9udGFsID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfaG9yaXpvbnRhbCwgTEVGVCwgaXNSdGwgPyBuZXh0IDogcHJldiksIF9kZWZpbmVQcm9wZXJ0eShfaG9yaXpvbnRhbCwgUklHSFQsIGlzUnRsID8gcHJldiA6IG5leHQpLCBfZGVmaW5lUHJvcGVydHkoX2hvcml6b250YWwsIERPV04sIGNoaWxkcmVuKSwgX2RlZmluZVByb3BlcnR5KF9ob3Jpem9udGFsLCBFTlRFUiwgY2hpbGRyZW4pLCBfaG9yaXpvbnRhbCk7XG4gIHZhciB2ZXJ0aWNhbCA9IChfdmVydGljYWwgPSB7fSwgX2RlZmluZVByb3BlcnR5KF92ZXJ0aWNhbCwgVVAsIHByZXYpLCBfZGVmaW5lUHJvcGVydHkoX3ZlcnRpY2FsLCBET1dOLCBuZXh0KSwgX2RlZmluZVByb3BlcnR5KF92ZXJ0aWNhbCwgRU5URVIsIGNoaWxkcmVuKSwgX2RlZmluZVByb3BlcnR5KF92ZXJ0aWNhbCwgRVNDLCBwYXJlbnQpLCBfZGVmaW5lUHJvcGVydHkoX3ZlcnRpY2FsLCBMRUZULCBpc1J0bCA/IGNoaWxkcmVuIDogcGFyZW50KSwgX2RlZmluZVByb3BlcnR5KF92ZXJ0aWNhbCwgUklHSFQsIGlzUnRsID8gcGFyZW50IDogY2hpbGRyZW4pLCBfdmVydGljYWwpO1xuICB2YXIgb2Zmc2V0cyA9IHtcbiAgICBpbmxpbmU6IGlubGluZSxcbiAgICBob3Jpem9udGFsOiBob3Jpem9udGFsLFxuICAgIHZlcnRpY2FsOiB2ZXJ0aWNhbCxcbiAgICBpbmxpbmVTdWI6IGlubGluZSxcbiAgICBob3Jpem9udGFsU3ViOiB2ZXJ0aWNhbCxcbiAgICB2ZXJ0aWNhbFN1YjogdmVydGljYWxcbiAgfTtcbiAgdmFyIHR5cGUgPSAoX29mZnNldHMkID0gb2Zmc2V0c1tcIlwiLmNvbmNhdChtb2RlKS5jb25jYXQoaXNSb290TGV2ZWwgPyAnJyA6ICdTdWInKV0pID09PSBudWxsIHx8IF9vZmZzZXRzJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29mZnNldHMkW3doaWNoXTtcblxuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIHByZXY6XG4gICAgICByZXR1cm4ge1xuICAgICAgICBvZmZzZXQ6IC0xLFxuICAgICAgICBzaWJsaW5nOiB0cnVlXG4gICAgICB9O1xuXG4gICAgY2FzZSBuZXh0OlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb2Zmc2V0OiAxLFxuICAgICAgICBzaWJsaW5nOiB0cnVlXG4gICAgICB9O1xuXG4gICAgY2FzZSBwYXJlbnQ6XG4gICAgICByZXR1cm4ge1xuICAgICAgICBvZmZzZXQ6IC0xLFxuICAgICAgICBzaWJsaW5nOiBmYWxzZVxuICAgICAgfTtcblxuICAgIGNhc2UgY2hpbGRyZW46XG4gICAgICByZXR1cm4ge1xuICAgICAgICBvZmZzZXQ6IDEsXG4gICAgICAgIHNpYmxpbmc6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmRDb250YWluZXJVTChlbGVtZW50KSB7XG4gIHZhciBjdXJyZW50ID0gZWxlbWVudDtcblxuICB3aGlsZSAoY3VycmVudCkge1xuICAgIGlmIChjdXJyZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1tZW51LWxpc3QnKSkge1xuICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgfVxuXG4gICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50RWxlbWVudDtcbiAgfSAvLyBOb3JtYWxseSBzaG91bGQgbm90IHJlYWNoIHRoaXMgbGluZVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cblxuICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogRmluZCBmb2N1c2VkIGVsZW1lbnQgd2l0aGluIGVsZW1lbnQgc2V0IHByb3ZpZGVkXG4gKi9cblxuXG5mdW5jdGlvbiBnZXRGb2N1c0VsZW1lbnQoYWN0aXZlRWxlbWVudCwgZWxlbWVudHMpIHtcbiAgdmFyIGN1cnJlbnQgPSBhY3RpdmVFbGVtZW50IHx8IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG5cbiAgd2hpbGUgKGN1cnJlbnQpIHtcbiAgICBpZiAoZWxlbWVudHMuaGFzKGN1cnJlbnQpKSB7XG4gICAgICByZXR1cm4gY3VycmVudDtcbiAgICB9XG5cbiAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnRFbGVtZW50O1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIEdldCBmb2N1c2FibGUgZWxlbWVudHMgZnJvbSB0aGUgZWxlbWVudCBzZXQgdW5kZXIgcHJvdmlkZWQgY29udGFpbmVyXG4gKi9cblxuXG5mdW5jdGlvbiBnZXRGb2N1c2FibGVFbGVtZW50cyhjb250YWluZXIsIGVsZW1lbnRzKSB7XG4gIHZhciBsaXN0ID0gZ2V0Rm9jdXNOb2RlTGlzdChjb250YWluZXIsIHRydWUpO1xuICByZXR1cm4gbGlzdC5maWx0ZXIoZnVuY3Rpb24gKGVsZSkge1xuICAgIHJldHVybiBlbGVtZW50cy5oYXMoZWxlKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldE5leHRGb2N1c0VsZW1lbnQocGFyZW50UXVlcnlDb250YWluZXIsIGVsZW1lbnRzLCBmb2N1c01lbnVFbGVtZW50KSB7XG4gIHZhciBvZmZzZXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IDE7XG5cbiAgLy8gS2V5IG9uIHRoZSBtZW51IGl0ZW0gd2lsbCBub3QgZ2V0IHZhbGlkYXRlIHBhcmVudCBjb250YWluZXJcbiAgaWYgKCFwYXJlbnRRdWVyeUNvbnRhaW5lcikge1xuICAgIHJldHVybiBudWxsO1xuICB9IC8vIExpc3QgY3VycmVudCBsZXZlbCBtZW51IGl0ZW0gZWxlbWVudHNcblxuXG4gIHZhciBzYW1lTGV2ZWxGb2N1c2FibGVNZW51RWxlbWVudExpc3QgPSBnZXRGb2N1c2FibGVFbGVtZW50cyhwYXJlbnRRdWVyeUNvbnRhaW5lciwgZWxlbWVudHMpOyAvLyBGaW5kIG5leHQgZm9jdXMgaW5kZXhcblxuICB2YXIgY291bnQgPSBzYW1lTGV2ZWxGb2N1c2FibGVNZW51RWxlbWVudExpc3QubGVuZ3RoO1xuICB2YXIgZm9jdXNJbmRleCA9IHNhbWVMZXZlbEZvY3VzYWJsZU1lbnVFbGVtZW50TGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGVsZSkge1xuICAgIHJldHVybiBmb2N1c01lbnVFbGVtZW50ID09PSBlbGU7XG4gIH0pO1xuXG4gIGlmIChvZmZzZXQgPCAwKSB7XG4gICAgaWYgKGZvY3VzSW5kZXggPT09IC0xKSB7XG4gICAgICBmb2N1c0luZGV4ID0gY291bnQgLSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb2N1c0luZGV4IC09IDE7XG4gICAgfVxuICB9IGVsc2UgaWYgKG9mZnNldCA+IDApIHtcbiAgICBmb2N1c0luZGV4ICs9IDE7XG4gIH1cblxuICBmb2N1c0luZGV4ID0gKGZvY3VzSW5kZXggKyBjb3VudCkgJSBjb3VudDsgLy8gRm9jdXMgbWVudSBpdGVtXG5cbiAgcmV0dXJuIHNhbWVMZXZlbEZvY3VzYWJsZU1lbnVFbGVtZW50TGlzdFtmb2N1c0luZGV4XTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlQWNjZXNzaWJpbGl0eShtb2RlLCBhY3RpdmVLZXksIGlzUnRsLCBpZCwgY29udGFpbmVyUmVmLCBnZXRLZXlzLCBnZXRLZXlQYXRoLCB0cmlnZ2VyQWN0aXZlS2V5LCB0cmlnZ2VyQWNjZXNzaWJpbGl0eU9wZW4sIG9yaWdpbk9uS2V5RG93bikge1xuICB2YXIgcmFmUmVmID0gUmVhY3QudXNlUmVmKCk7XG4gIHZhciBhY3RpdmVSZWYgPSBSZWFjdC51c2VSZWYoKTtcbiAgYWN0aXZlUmVmLmN1cnJlbnQgPSBhY3RpdmVLZXk7XG5cbiAgdmFyIGNsZWFuUmFmID0gZnVuY3Rpb24gY2xlYW5SYWYoKSB7XG4gICAgcmFmLmNhbmNlbChyYWZSZWYuY3VycmVudCk7XG4gIH07XG5cbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgY2xlYW5SYWYoKTtcbiAgICB9O1xuICB9LCBbXSk7XG4gIHJldHVybiBmdW5jdGlvbiAoZSkge1xuICAgIHZhciB3aGljaCA9IGUud2hpY2g7XG5cbiAgICBpZiAoW10uY29uY2F0KEFycm93S2V5cywgW0VOVEVSLCBFU0NdKS5pbmNsdWRlcyh3aGljaCkpIHtcbiAgICAgIC8vIENvbnZlcnQga2V5IHRvIGVsZW1lbnRzXG4gICAgICB2YXIgZWxlbWVudHM7XG4gICAgICB2YXIga2V5MmVsZW1lbnQ7XG4gICAgICB2YXIgZWxlbWVudDJrZXk7IC8vID4+PiBXcmFwIGFzIGZ1bmN0aW9uIHNpbmNlIHdlIHVzZSByYWYgZm9yIHNvbWUgY2FzZVxuXG4gICAgICB2YXIgcmVmcmVzaEVsZW1lbnRzID0gZnVuY3Rpb24gcmVmcmVzaEVsZW1lbnRzKCkge1xuICAgICAgICBlbGVtZW50cyA9IG5ldyBTZXQoKTtcbiAgICAgICAga2V5MmVsZW1lbnQgPSBuZXcgTWFwKCk7XG4gICAgICAgIGVsZW1lbnQya2V5ID0gbmV3IE1hcCgpO1xuICAgICAgICB2YXIga2V5cyA9IGdldEtleXMoKTtcbiAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1tZW51LWlkPSdcIi5jb25jYXQoZ2V0TWVudUlkKGlkLCBrZXkpLCBcIiddXCIpKTtcblxuICAgICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICBlbGVtZW50cy5hZGQoZWxlbWVudCk7XG4gICAgICAgICAgICBlbGVtZW50MmtleS5zZXQoZWxlbWVudCwga2V5KTtcbiAgICAgICAgICAgIGtleTJlbGVtZW50LnNldChrZXksIGVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBlbGVtZW50cztcbiAgICAgIH07XG5cbiAgICAgIHJlZnJlc2hFbGVtZW50cygpOyAvLyBGaXJzdCB3ZSBzaG91bGQgZmluZCBjdXJyZW50IGZvY3VzZWQgTWVudUl0ZW0vU3ViTWVudSBlbGVtZW50XG5cbiAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0ga2V5MmVsZW1lbnQuZ2V0KGFjdGl2ZUtleSk7XG4gICAgICB2YXIgZm9jdXNNZW51RWxlbWVudCA9IGdldEZvY3VzRWxlbWVudChhY3RpdmVFbGVtZW50LCBlbGVtZW50cyk7XG4gICAgICB2YXIgZm9jdXNNZW51S2V5ID0gZWxlbWVudDJrZXkuZ2V0KGZvY3VzTWVudUVsZW1lbnQpO1xuICAgICAgdmFyIG9mZnNldE9iaiA9IGdldE9mZnNldChtb2RlLCBnZXRLZXlQYXRoKGZvY3VzTWVudUtleSwgdHJ1ZSkubGVuZ3RoID09PSAxLCBpc1J0bCwgd2hpY2gpOyAvLyBTb21lIG1vZGUgZG8gbm90IGhhdmUgZnVsbHkgYXJyb3cgb3BlcmF0aW9uIGxpa2UgaW5saW5lXG5cbiAgICAgIGlmICghb2Zmc2V0T2JqKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gLy8gQXJyb3cgcHJldmVudCBkZWZhdWx0IHRvIGF2b2lkIHBhZ2Ugc2Nyb2xsXG5cblxuICAgICAgaWYgKEFycm93S2V5cy5pbmNsdWRlcyh3aGljaCkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdHJ5Rm9jdXMgPSBmdW5jdGlvbiB0cnlGb2N1cyhtZW51RWxlbWVudCkge1xuICAgICAgICBpZiAobWVudUVsZW1lbnQpIHtcbiAgICAgICAgICB2YXIgZm9jdXNUYXJnZXRFbGVtZW50ID0gbWVudUVsZW1lbnQ7IC8vIEZvY3VzIHRvIGxpbmsgaW5zdGVhZCBvZiBtZW51IGl0ZW0gaWYgcG9zc2libGVcblxuICAgICAgICAgIHZhciBsaW5rID0gbWVudUVsZW1lbnQucXVlcnlTZWxlY3RvcignYScpO1xuXG4gICAgICAgICAgaWYgKGxpbmsgPT09IG51bGwgfHwgbGluayA9PT0gdm9pZCAwID8gdm9pZCAwIDogbGluay5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSkge1xuICAgICAgICAgICAgZm9jdXNUYXJnZXRFbGVtZW50ID0gbGluaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgdGFyZ2V0S2V5ID0gZWxlbWVudDJrZXkuZ2V0KG1lbnVFbGVtZW50KTtcbiAgICAgICAgICB0cmlnZ2VyQWN0aXZlS2V5KHRhcmdldEtleSk7XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogRG8gbm90IGB1c2VFZmZlY3RgIGhlcmUgc2luY2UgYHRyeUZvY3VzYCBtYXkgdHJpZ2dlciBhc3luY1xuICAgICAgICAgICAqIHdoaWNoIG1ha2VzIFJlYWN0IHN5bmMgdXBkYXRlIHRoZSBgYWN0aXZlS2V5YFxuICAgICAgICAgICAqIHRoYXQgZm9yY2UgcmVuZGVyIGJlZm9yZSBgdXNlUmVmYCBzZXQgdGhlIG5leHQgYWN0aXZlS2V5XG4gICAgICAgICAgICovXG5cbiAgICAgICAgICBjbGVhblJhZigpO1xuICAgICAgICAgIHJhZlJlZi5jdXJyZW50ID0gcmFmKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChhY3RpdmVSZWYuY3VycmVudCA9PT0gdGFyZ2V0S2V5KSB7XG4gICAgICAgICAgICAgIGZvY3VzVGFyZ2V0RWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBpZiAob2Zmc2V0T2JqLnNpYmxpbmcgfHwgIWZvY3VzTWVudUVsZW1lbnQpIHtcbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT0gU2libGluZyA9PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAvLyBGaW5kIHdhbGthYmxlIGZvY3VzIG1lbnUgZWxlbWVudCBjb250YWluZXJcbiAgICAgICAgdmFyIHBhcmVudFF1ZXJ5Q29udGFpbmVyO1xuXG4gICAgICAgIGlmICghZm9jdXNNZW51RWxlbWVudCB8fCBtb2RlID09PSAnaW5saW5lJykge1xuICAgICAgICAgIHBhcmVudFF1ZXJ5Q29udGFpbmVyID0gY29udGFpbmVyUmVmLmN1cnJlbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFyZW50UXVlcnlDb250YWluZXIgPSBmaW5kQ29udGFpbmVyVUwoZm9jdXNNZW51RWxlbWVudCk7XG4gICAgICAgIH0gLy8gR2V0IG5leHQgZm9jdXMgZWxlbWVudFxuXG5cbiAgICAgICAgdmFyIHRhcmdldEVsZW1lbnQgPSBnZXROZXh0Rm9jdXNFbGVtZW50KHBhcmVudFF1ZXJ5Q29udGFpbmVyLCBlbGVtZW50cywgZm9jdXNNZW51RWxlbWVudCwgb2Zmc2V0T2JqLm9mZnNldCk7IC8vIEZvY3VzIG1lbnUgaXRlbVxuXG4gICAgICAgIHRyeUZvY3VzKHRhcmdldEVsZW1lbnQpOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PSBJbmxpbmVUcmlnZ2VyID09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICB9IGVsc2UgaWYgKG9mZnNldE9iai5pbmxpbmVUcmlnZ2VyKSB7XG4gICAgICAgIC8vIElubGluZSB0cmlnZ2VyIG5vIG5lZWQgc3dpdGNoIHRvIHN1YiBtZW51IGl0ZW1cbiAgICAgICAgdHJpZ2dlckFjY2Vzc2liaWxpdHlPcGVuKGZvY3VzTWVudUtleSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PSBMZXZlbCA9PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgIH0gZWxzZSBpZiAob2Zmc2V0T2JqLm9mZnNldCA+IDApIHtcbiAgICAgICAgdHJpZ2dlckFjY2Vzc2liaWxpdHlPcGVuKGZvY3VzTWVudUtleSwgdHJ1ZSk7XG4gICAgICAgIGNsZWFuUmFmKCk7XG4gICAgICAgIHJhZlJlZi5jdXJyZW50ID0gcmFmKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvLyBBc3luYyBzaG91bGQgcmVzeW5jIGVsZW1lbnRzXG4gICAgICAgICAgcmVmcmVzaEVsZW1lbnRzKCk7XG4gICAgICAgICAgdmFyIGNvbnRyb2xJZCA9IGZvY3VzTWVudUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJyk7XG4gICAgICAgICAgdmFyIHN1YlF1ZXJ5Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udHJvbElkKTsgLy8gR2V0IHN1YiBmb2N1c2FibGUgbWVudSBpdGVtXG5cbiAgICAgICAgICB2YXIgdGFyZ2V0RWxlbWVudCA9IGdldE5leHRGb2N1c0VsZW1lbnQoc3ViUXVlcnlDb250YWluZXIsIGVsZW1lbnRzKTsgLy8gRm9jdXMgbWVudSBpdGVtXG5cbiAgICAgICAgICB0cnlGb2N1cyh0YXJnZXRFbGVtZW50KTtcbiAgICAgICAgfSwgNSk7XG4gICAgICB9IGVsc2UgaWYgKG9mZnNldE9iai5vZmZzZXQgPCAwKSB7XG4gICAgICAgIHZhciBrZXlQYXRoID0gZ2V0S2V5UGF0aChmb2N1c01lbnVLZXksIHRydWUpO1xuICAgICAgICB2YXIgcGFyZW50S2V5ID0ga2V5UGF0aFtrZXlQYXRoLmxlbmd0aCAtIDJdO1xuICAgICAgICB2YXIgcGFyZW50TWVudUVsZW1lbnQgPSBrZXkyZWxlbWVudC5nZXQocGFyZW50S2V5KTsgLy8gRm9jdXMgbWVudSBpdGVtXG5cbiAgICAgICAgdHJpZ2dlckFjY2Vzc2liaWxpdHlPcGVuKHBhcmVudEtleSwgZmFsc2UpO1xuICAgICAgICB0cnlGb2N1cyhwYXJlbnRNZW51RWxlbWVudCk7XG4gICAgICB9XG4gICAgfSAvLyBQYXNzIG9yaWdpbiBrZXkgZG93biBldmVudFxuXG5cbiAgICBvcmlnaW5PbktleURvd24gPT09IG51bGwgfHwgb3JpZ2luT25LZXlEb3duID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcmlnaW5PbktleURvd24oZSk7XG4gIH07XG59IiwiaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlTWVyZ2VkU3RhdGUgZnJvbSBcInJjLXV0aWwvZXMvaG9va3MvdXNlTWVyZ2VkU3RhdGVcIjtcbnZhciB1bmlxdWVQcmVmaXggPSBNYXRoLnJhbmRvbSgpLnRvRml4ZWQoNSkudG9TdHJpbmcoKS5zbGljZSgyKTtcbnZhciBpbnRlcm5hbElkID0gMDtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZVVVSUQoaWQpIHtcbiAgdmFyIF91c2VNZXJnZWRTdGF0ZSA9IHVzZU1lcmdlZFN0YXRlKGlkLCB7XG4gICAgdmFsdWU6IGlkXG4gIH0pLFxuICAgICAgX3VzZU1lcmdlZFN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VNZXJnZWRTdGF0ZSwgMiksXG4gICAgICB1dWlkID0gX3VzZU1lcmdlZFN0YXRlMlswXSxcbiAgICAgIHNldFVVSUQgPSBfdXNlTWVyZ2VkU3RhdGUyWzFdO1xuXG4gIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaW50ZXJuYWxJZCArPSAxO1xuICAgIHZhciBuZXdJZCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcgPyAndGVzdCcgOiBcIlwiLmNvbmNhdCh1bmlxdWVQcmVmaXgsIFwiLVwiKS5jb25jYXQoaW50ZXJuYWxJZCk7XG4gICAgc2V0VVVJRChcInJjLW1lbnUtdXVpZC1cIi5jb25jYXQobmV3SWQpKTtcbiAgfSwgW10pO1xuICByZXR1cm4gdXVpZDtcbn0iLCJleHBvcnQgZnVuY3Rpb24gbmV4dFNsaWNlKGNhbGxiYWNrKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oY2FsbGJhY2spO1xufSIsImltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5XCI7XG5pbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVJlZiwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgd2FybmluZyBmcm9tIFwicmMtdXRpbC9lcy93YXJuaW5nXCI7XG5pbXBvcnQgeyBuZXh0U2xpY2UgfSBmcm9tICcuLi91dGlscy90aW1lVXRpbCc7XG52YXIgUEFUSF9TUExJVCA9ICdfX1JDX1VUSUxfUEFUSF9TUExJVF9fJztcblxudmFyIGdldFBhdGhTdHIgPSBmdW5jdGlvbiBnZXRQYXRoU3RyKGtleVBhdGgpIHtcbiAgcmV0dXJuIGtleVBhdGguam9pbihQQVRIX1NQTElUKTtcbn07XG5cbnZhciBnZXRQYXRoS2V5cyA9IGZ1bmN0aW9uIGdldFBhdGhLZXlzKGtleVBhdGhTdHIpIHtcbiAgcmV0dXJuIGtleVBhdGhTdHIuc3BsaXQoUEFUSF9TUExJVCk7XG59O1xuXG5leHBvcnQgdmFyIE9WRVJGTE9XX0tFWSA9ICdyYy1tZW51LW1vcmUnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlS2V5UmVjb3JkcygpIHtcbiAgdmFyIF9SZWFjdCR1c2VTdGF0ZSA9IFJlYWN0LnVzZVN0YXRlKHt9KSxcbiAgICAgIF9SZWFjdCR1c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfUmVhY3QkdXNlU3RhdGUsIDIpLFxuICAgICAgaW50ZXJuYWxGb3JjZVVwZGF0ZSA9IF9SZWFjdCR1c2VTdGF0ZTJbMV07XG5cbiAgdmFyIGtleTJwYXRoUmVmID0gdXNlUmVmKG5ldyBNYXAoKSk7XG4gIHZhciBwYXRoMmtleVJlZiA9IHVzZVJlZihuZXcgTWFwKCkpO1xuXG4gIHZhciBfUmVhY3QkdXNlU3RhdGUzID0gUmVhY3QudXNlU3RhdGUoW10pLFxuICAgICAgX1JlYWN0JHVzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VTdGF0ZTMsIDIpLFxuICAgICAgb3ZlcmZsb3dLZXlzID0gX1JlYWN0JHVzZVN0YXRlNFswXSxcbiAgICAgIHNldE92ZXJmbG93S2V5cyA9IF9SZWFjdCR1c2VTdGF0ZTRbMV07XG5cbiAgdmFyIHVwZGF0ZVJlZiA9IHVzZVJlZigwKTtcbiAgdmFyIGRlc3Ryb3lSZWYgPSB1c2VSZWYoZmFsc2UpO1xuXG4gIHZhciBmb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uIGZvcmNlVXBkYXRlKCkge1xuICAgIGlmICghZGVzdHJveVJlZi5jdXJyZW50KSB7XG4gICAgICBpbnRlcm5hbEZvcmNlVXBkYXRlKHt9KTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIHJlZ2lzdGVyUGF0aCA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChrZXksIGtleVBhdGgpIHtcbiAgICAvLyBXYXJuaW5nIGZvciBpbnZhbGlkYXRlIG9yIGR1cGxpY2F0ZWQgYGtleWBcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FybmluZygha2V5MnBhdGhSZWYuY3VycmVudC5oYXMoa2V5KSwgXCJEdXBsaWNhdGVkIGtleSAnXCIuY29uY2F0KGtleSwgXCInIHVzZWQgaW4gTWVudSBieSBwYXRoIFtcIikuY29uY2F0KGtleVBhdGguam9pbignID4gJyksIFwiXVwiKSk7XG4gICAgfSAvLyBGaWxsIG1hcFxuXG5cbiAgICB2YXIgY29ubmVjdGVkUGF0aCA9IGdldFBhdGhTdHIoa2V5UGF0aCk7XG4gICAgcGF0aDJrZXlSZWYuY3VycmVudC5zZXQoY29ubmVjdGVkUGF0aCwga2V5KTtcbiAgICBrZXkycGF0aFJlZi5jdXJyZW50LnNldChrZXksIGNvbm5lY3RlZFBhdGgpO1xuICAgIHVwZGF0ZVJlZi5jdXJyZW50ICs9IDE7XG4gICAgdmFyIGlkID0gdXBkYXRlUmVmLmN1cnJlbnQ7XG4gICAgbmV4dFNsaWNlKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChpZCA9PT0gdXBkYXRlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgZm9yY2VVcGRhdGUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSwgW10pO1xuICB2YXIgdW5yZWdpc3RlclBhdGggPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoa2V5LCBrZXlQYXRoKSB7XG4gICAgdmFyIGNvbm5lY3RlZFBhdGggPSBnZXRQYXRoU3RyKGtleVBhdGgpO1xuICAgIHBhdGgya2V5UmVmLmN1cnJlbnQuZGVsZXRlKGNvbm5lY3RlZFBhdGgpO1xuICAgIGtleTJwYXRoUmVmLmN1cnJlbnQuZGVsZXRlKGtleSk7XG4gIH0sIFtdKTtcbiAgdmFyIHJlZnJlc2hPdmVyZmxvd0tleXMgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAoa2V5cykge1xuICAgIHNldE92ZXJmbG93S2V5cyhrZXlzKTtcbiAgfSwgW10pO1xuICB2YXIgZ2V0S2V5UGF0aCA9IHVzZUNhbGxiYWNrKGZ1bmN0aW9uIChldmVudEtleSwgaW5jbHVkZU92ZXJmbG93KSB7XG4gICAgdmFyIGZ1bGxQYXRoID0ga2V5MnBhdGhSZWYuY3VycmVudC5nZXQoZXZlbnRLZXkpIHx8ICcnO1xuICAgIHZhciBrZXlzID0gZ2V0UGF0aEtleXMoZnVsbFBhdGgpO1xuXG4gICAgaWYgKGluY2x1ZGVPdmVyZmxvdyAmJiBvdmVyZmxvd0tleXMuaW5jbHVkZXMoa2V5c1swXSkpIHtcbiAgICAgIGtleXMudW5zaGlmdChPVkVSRkxPV19LRVkpO1xuICAgIH1cblxuICAgIHJldHVybiBrZXlzO1xuICB9LCBbb3ZlcmZsb3dLZXlzXSk7XG4gIHZhciBpc1N1YlBhdGhLZXkgPSB1c2VDYWxsYmFjayhmdW5jdGlvbiAocGF0aEtleXMsIGV2ZW50S2V5KSB7XG4gICAgcmV0dXJuIHBhdGhLZXlzLnNvbWUoZnVuY3Rpb24gKHBhdGhLZXkpIHtcbiAgICAgIHZhciBwYXRoS2V5TGlzdCA9IGdldEtleVBhdGgocGF0aEtleSwgdHJ1ZSk7XG4gICAgICByZXR1cm4gcGF0aEtleUxpc3QuaW5jbHVkZXMoZXZlbnRLZXkpO1xuICAgIH0pO1xuICB9LCBbZ2V0S2V5UGF0aF0pO1xuXG4gIHZhciBnZXRLZXlzID0gZnVuY3Rpb24gZ2V0S2V5cygpIHtcbiAgICB2YXIga2V5cyA9IF90b0NvbnN1bWFibGVBcnJheShrZXkycGF0aFJlZi5jdXJyZW50LmtleXMoKSk7XG5cbiAgICBpZiAob3ZlcmZsb3dLZXlzLmxlbmd0aCkge1xuICAgICAga2V5cy5wdXNoKE9WRVJGTE9XX0tFWSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGtleXM7XG4gIH07XG4gIC8qKlxuICAgKiBGaW5kIGN1cnJlbnQga2V5IHJlbGF0ZWQgY2hpbGQgcGF0aCBrZXlzXG4gICAqL1xuXG5cbiAgdmFyIGdldFN1YlBhdGhLZXlzID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciBjb25uZWN0ZWRQYXRoID0gXCJcIi5jb25jYXQoa2V5MnBhdGhSZWYuY3VycmVudC5nZXQoa2V5KSkuY29uY2F0KFBBVEhfU1BMSVQpO1xuICAgIHZhciBwYXRoS2V5cyA9IG5ldyBTZXQoKTtcblxuICAgIF90b0NvbnN1bWFibGVBcnJheShwYXRoMmtleVJlZi5jdXJyZW50LmtleXMoKSkuZm9yRWFjaChmdW5jdGlvbiAocGF0aEtleSkge1xuICAgICAgaWYgKHBhdGhLZXkuc3RhcnRzV2l0aChjb25uZWN0ZWRQYXRoKSkge1xuICAgICAgICBwYXRoS2V5cy5hZGQocGF0aDJrZXlSZWYuY3VycmVudC5nZXQocGF0aEtleSkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHBhdGhLZXlzO1xuICB9LCBbXSk7XG4gIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIGRlc3Ryb3lSZWYuY3VycmVudCA9IHRydWU7XG4gICAgfTtcbiAgfSwgW10pO1xuICByZXR1cm4ge1xuICAgIC8vIFJlZ2lzdGVyXG4gICAgcmVnaXN0ZXJQYXRoOiByZWdpc3RlclBhdGgsXG4gICAgdW5yZWdpc3RlclBhdGg6IHVucmVnaXN0ZXJQYXRoLFxuICAgIHJlZnJlc2hPdmVyZmxvd0tleXM6IHJlZnJlc2hPdmVyZmxvd0tleXMsXG4gICAgLy8gVXRpbFxuICAgIGlzU3ViUGF0aEtleTogaXNTdWJQYXRoS2V5LFxuICAgIGdldEtleVBhdGg6IGdldEtleVBhdGgsXG4gICAgZ2V0S2V5czogZ2V0S2V5cyxcbiAgICBnZXRTdWJQYXRoS2V5czogZ2V0U3ViUGF0aEtleXNcbiAgfTtcbn0iLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5XCI7XG5pbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXlcIjtcbmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHNoYWxsb3dFcXVhbCBmcm9tICdzaGFsbG93ZXF1YWwnO1xuaW1wb3J0IHVzZU1lcmdlZFN0YXRlIGZyb20gXCJyYy11dGlsL2VzL2hvb2tzL3VzZU1lcmdlZFN0YXRlXCI7XG5pbXBvcnQgd2FybmluZyBmcm9tIFwicmMtdXRpbC9lcy93YXJuaW5nXCI7XG5pbXBvcnQgT3ZlcmZsb3cgZnJvbSAncmMtb3ZlcmZsb3cnO1xuaW1wb3J0IE1lbnVJdGVtIGZyb20gJy4vTWVudUl0ZW0nO1xuaW1wb3J0IHsgcGFyc2VDaGlsZHJlbiB9IGZyb20gJy4vdXRpbHMvbm9kZVV0aWwnO1xuaW1wb3J0IE1lbnVDb250ZXh0UHJvdmlkZXIgZnJvbSAnLi9jb250ZXh0L01lbnVDb250ZXh0JztcbmltcG9ydCB1c2VNZW1vQ2FsbGJhY2sgZnJvbSAnLi9ob29rcy91c2VNZW1vQ2FsbGJhY2snO1xuaW1wb3J0IHsgd2Fybkl0ZW1Qcm9wIH0gZnJvbSAnLi91dGlscy93YXJuVXRpbCc7XG5pbXBvcnQgU3ViTWVudSBmcm9tICcuL1N1Yk1lbnUnO1xuaW1wb3J0IHVzZUFjY2Vzc2liaWxpdHkgZnJvbSAnLi9ob29rcy91c2VBY2Nlc3NpYmlsaXR5JztcbmltcG9ydCB1c2VVVUlEIGZyb20gJy4vaG9va3MvdXNlVVVJRCc7XG5pbXBvcnQgeyBQYXRoUmVnaXN0ZXJDb250ZXh0LCBQYXRoVXNlckNvbnRleHQgfSBmcm9tICcuL2NvbnRleHQvUGF0aENvbnRleHQnO1xuaW1wb3J0IHVzZUtleVJlY29yZHMsIHsgT1ZFUkZMT1dfS0VZIH0gZnJvbSAnLi9ob29rcy91c2VLZXlSZWNvcmRzJztcbmltcG9ydCB7IElkQ29udGV4dCB9IGZyb20gJy4vY29udGV4dC9JZENvbnRleHQnO1xuLyoqXG4gKiBNZW51IG1vZGlmeSBhZnRlciByZWZhY3RvcjpcbiAqICMjIEFkZFxuICogLSBkaXNhYmxlZFxuICpcbiAqICMjIFJlbW92ZVxuICogLSBvcGVuVHJhbnNpdGlvbk5hbWVcbiAqIC0gb3BlbkFuaW1hdGlvblxuICogLSBvbkRlc3Ryb3lcbiAqIC0gc2lkZXJDb2xsYXBzZWQ6IFNlZW1zIGFudGQgZG8gbm90IHVzZSB0aGlzIHByb3AgKE5lZWQgdGVzdCBpbiBhbnRkKVxuICogLSBjb2xsYXBzZWRXaWR0aDogU2VlbXMgdGhpcyBsb2dpYyBzaG91bGQgYmUgaGFuZGxlIGJ5IGFudGQgTGF5b3V0LlNpZGVyXG4gKi9cbi8vIG9wdGltaXplIGZvciByZW5kZXJcblxudmFyIEVNUFRZX0xJU1QgPSBbXTtcblxudmFyIE1lbnUgPSBmdW5jdGlvbiBNZW51KHByb3BzKSB7XG4gIHZhciBfY2hpbGRMaXN0JCwgX2NsYXNzTmFtZXM7XG5cbiAgdmFyIF9wcm9wcyRwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICBwcmVmaXhDbHMgPSBfcHJvcHMkcHJlZml4Q2xzID09PSB2b2lkIDAgPyAncmMtbWVudScgOiBfcHJvcHMkcHJlZml4Q2xzLFxuICAgICAgc3R5bGUgPSBwcm9wcy5zdHlsZSxcbiAgICAgIGNsYXNzTmFtZSA9IHByb3BzLmNsYXNzTmFtZSxcbiAgICAgIF9wcm9wcyR0YWJJbmRleCA9IHByb3BzLnRhYkluZGV4LFxuICAgICAgdGFiSW5kZXggPSBfcHJvcHMkdGFiSW5kZXggPT09IHZvaWQgMCA/IDAgOiBfcHJvcHMkdGFiSW5kZXgsXG4gICAgICBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuLFxuICAgICAgZGlyZWN0aW9uID0gcHJvcHMuZGlyZWN0aW9uLFxuICAgICAgaWQgPSBwcm9wcy5pZCxcbiAgICAgIF9wcm9wcyRtb2RlID0gcHJvcHMubW9kZSxcbiAgICAgIG1vZGUgPSBfcHJvcHMkbW9kZSA9PT0gdm9pZCAwID8gJ3ZlcnRpY2FsJyA6IF9wcm9wcyRtb2RlLFxuICAgICAgaW5saW5lQ29sbGFwc2VkID0gcHJvcHMuaW5saW5lQ29sbGFwc2VkLFxuICAgICAgZGlzYWJsZWQgPSBwcm9wcy5kaXNhYmxlZCxcbiAgICAgIGRpc2FibGVkT3ZlcmZsb3cgPSBwcm9wcy5kaXNhYmxlZE92ZXJmbG93LFxuICAgICAgX3Byb3BzJHN1Yk1lbnVPcGVuRGVsID0gcHJvcHMuc3ViTWVudU9wZW5EZWxheSxcbiAgICAgIHN1Yk1lbnVPcGVuRGVsYXkgPSBfcHJvcHMkc3ViTWVudU9wZW5EZWwgPT09IHZvaWQgMCA/IDAuMSA6IF9wcm9wcyRzdWJNZW51T3BlbkRlbCxcbiAgICAgIF9wcm9wcyRzdWJNZW51Q2xvc2VEZSA9IHByb3BzLnN1Yk1lbnVDbG9zZURlbGF5LFxuICAgICAgc3ViTWVudUNsb3NlRGVsYXkgPSBfcHJvcHMkc3ViTWVudUNsb3NlRGUgPT09IHZvaWQgMCA/IDAuMSA6IF9wcm9wcyRzdWJNZW51Q2xvc2VEZSxcbiAgICAgIGZvcmNlU3ViTWVudVJlbmRlciA9IHByb3BzLmZvcmNlU3ViTWVudVJlbmRlcixcbiAgICAgIGRlZmF1bHRPcGVuS2V5cyA9IHByb3BzLmRlZmF1bHRPcGVuS2V5cyxcbiAgICAgIG9wZW5LZXlzID0gcHJvcHMub3BlbktleXMsXG4gICAgICBhY3RpdmVLZXkgPSBwcm9wcy5hY3RpdmVLZXksXG4gICAgICBkZWZhdWx0QWN0aXZlRmlyc3QgPSBwcm9wcy5kZWZhdWx0QWN0aXZlRmlyc3QsXG4gICAgICBfcHJvcHMkc2VsZWN0YWJsZSA9IHByb3BzLnNlbGVjdGFibGUsXG4gICAgICBzZWxlY3RhYmxlID0gX3Byb3BzJHNlbGVjdGFibGUgPT09IHZvaWQgMCA/IHRydWUgOiBfcHJvcHMkc2VsZWN0YWJsZSxcbiAgICAgIF9wcm9wcyRtdWx0aXBsZSA9IHByb3BzLm11bHRpcGxlLFxuICAgICAgbXVsdGlwbGUgPSBfcHJvcHMkbXVsdGlwbGUgPT09IHZvaWQgMCA/IGZhbHNlIDogX3Byb3BzJG11bHRpcGxlLFxuICAgICAgZGVmYXVsdFNlbGVjdGVkS2V5cyA9IHByb3BzLmRlZmF1bHRTZWxlY3RlZEtleXMsXG4gICAgICBzZWxlY3RlZEtleXMgPSBwcm9wcy5zZWxlY3RlZEtleXMsXG4gICAgICBvblNlbGVjdCA9IHByb3BzLm9uU2VsZWN0LFxuICAgICAgb25EZXNlbGVjdCA9IHByb3BzLm9uRGVzZWxlY3QsXG4gICAgICBfcHJvcHMkaW5saW5lSW5kZW50ID0gcHJvcHMuaW5saW5lSW5kZW50LFxuICAgICAgaW5saW5lSW5kZW50ID0gX3Byb3BzJGlubGluZUluZGVudCA9PT0gdm9pZCAwID8gMjQgOiBfcHJvcHMkaW5saW5lSW5kZW50LFxuICAgICAgbW90aW9uID0gcHJvcHMubW90aW9uLFxuICAgICAgZGVmYXVsdE1vdGlvbnMgPSBwcm9wcy5kZWZhdWx0TW90aW9ucyxcbiAgICAgIF9wcm9wcyR0cmlnZ2VyU3ViTWVudSA9IHByb3BzLnRyaWdnZXJTdWJNZW51QWN0aW9uLFxuICAgICAgdHJpZ2dlclN1Yk1lbnVBY3Rpb24gPSBfcHJvcHMkdHJpZ2dlclN1Yk1lbnUgPT09IHZvaWQgMCA/ICdob3ZlcicgOiBfcHJvcHMkdHJpZ2dlclN1Yk1lbnUsXG4gICAgICBidWlsdGluUGxhY2VtZW50cyA9IHByb3BzLmJ1aWx0aW5QbGFjZW1lbnRzLFxuICAgICAgaXRlbUljb24gPSBwcm9wcy5pdGVtSWNvbixcbiAgICAgIGV4cGFuZEljb24gPSBwcm9wcy5leHBhbmRJY29uLFxuICAgICAgX3Byb3BzJG92ZXJmbG93ZWRJbmRpID0gcHJvcHMub3ZlcmZsb3dlZEluZGljYXRvcixcbiAgICAgIG92ZXJmbG93ZWRJbmRpY2F0b3IgPSBfcHJvcHMkb3ZlcmZsb3dlZEluZGkgPT09IHZvaWQgMCA/ICcuLi4nIDogX3Byb3BzJG92ZXJmbG93ZWRJbmRpLFxuICAgICAgb3ZlcmZsb3dlZEluZGljYXRvclBvcHVwQ2xhc3NOYW1lID0gcHJvcHMub3ZlcmZsb3dlZEluZGljYXRvclBvcHVwQ2xhc3NOYW1lLFxuICAgICAgZ2V0UG9wdXBDb250YWluZXIgPSBwcm9wcy5nZXRQb3B1cENvbnRhaW5lcixcbiAgICAgIG9uQ2xpY2sgPSBwcm9wcy5vbkNsaWNrLFxuICAgICAgb25PcGVuQ2hhbmdlID0gcHJvcHMub25PcGVuQ2hhbmdlLFxuICAgICAgb25LZXlEb3duID0gcHJvcHMub25LZXlEb3duLFxuICAgICAgb3BlbkFuaW1hdGlvbiA9IHByb3BzLm9wZW5BbmltYXRpb24sXG4gICAgICBvcGVuVHJhbnNpdGlvbk5hbWUgPSBwcm9wcy5vcGVuVHJhbnNpdGlvbk5hbWUsXG4gICAgICByZXN0UHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMocHJvcHMsIFtcInByZWZpeENsc1wiLCBcInN0eWxlXCIsIFwiY2xhc3NOYW1lXCIsIFwidGFiSW5kZXhcIiwgXCJjaGlsZHJlblwiLCBcImRpcmVjdGlvblwiLCBcImlkXCIsIFwibW9kZVwiLCBcImlubGluZUNvbGxhcHNlZFwiLCBcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRPdmVyZmxvd1wiLCBcInN1Yk1lbnVPcGVuRGVsYXlcIiwgXCJzdWJNZW51Q2xvc2VEZWxheVwiLCBcImZvcmNlU3ViTWVudVJlbmRlclwiLCBcImRlZmF1bHRPcGVuS2V5c1wiLCBcIm9wZW5LZXlzXCIsIFwiYWN0aXZlS2V5XCIsIFwiZGVmYXVsdEFjdGl2ZUZpcnN0XCIsIFwic2VsZWN0YWJsZVwiLCBcIm11bHRpcGxlXCIsIFwiZGVmYXVsdFNlbGVjdGVkS2V5c1wiLCBcInNlbGVjdGVkS2V5c1wiLCBcIm9uU2VsZWN0XCIsIFwib25EZXNlbGVjdFwiLCBcImlubGluZUluZGVudFwiLCBcIm1vdGlvblwiLCBcImRlZmF1bHRNb3Rpb25zXCIsIFwidHJpZ2dlclN1Yk1lbnVBY3Rpb25cIiwgXCJidWlsdGluUGxhY2VtZW50c1wiLCBcIml0ZW1JY29uXCIsIFwiZXhwYW5kSWNvblwiLCBcIm92ZXJmbG93ZWRJbmRpY2F0b3JcIiwgXCJvdmVyZmxvd2VkSW5kaWNhdG9yUG9wdXBDbGFzc05hbWVcIiwgXCJnZXRQb3B1cENvbnRhaW5lclwiLCBcIm9uQ2xpY2tcIiwgXCJvbk9wZW5DaGFuZ2VcIiwgXCJvbktleURvd25cIiwgXCJvcGVuQW5pbWF0aW9uXCIsIFwib3BlblRyYW5zaXRpb25OYW1lXCJdKTtcblxuICB2YXIgY2hpbGRMaXN0ID0gcGFyc2VDaGlsZHJlbihjaGlsZHJlbiwgRU1QVFlfTElTVCk7XG5cbiAgdmFyIF9SZWFjdCR1c2VTdGF0ZSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKSxcbiAgICAgIF9SZWFjdCR1c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfUmVhY3QkdXNlU3RhdGUsIDIpLFxuICAgICAgbW91bnRlZCA9IF9SZWFjdCR1c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRNb3VudGVkID0gX1JlYWN0JHVzZVN0YXRlMlsxXTtcblxuICB2YXIgY29udGFpbmVyUmVmID0gUmVhY3QudXNlUmVmKCk7XG4gIHZhciB1dWlkID0gdXNlVVVJRChpZCk7XG4gIHZhciBpc1J0bCA9IGRpcmVjdGlvbiA9PT0gJ3J0bCc7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT0gV2FybiA9PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB3YXJuaW5nKCFvcGVuQW5pbWF0aW9uICYmICFvcGVuVHJhbnNpdGlvbk5hbWUsICdgb3BlbkFuaW1hdGlvbmAgYW5kIGBvcGVuVHJhbnNpdGlvbk5hbWVgIGlzIHJlbW92ZWQuIFBsZWFzZSB1c2UgYG1vdGlvbmAgb3IgYGRlZmF1bHRNb3Rpb25gIGluc3RlYWQuJyk7XG4gIH0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09PSBNb2RlID09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBfUmVhY3QkdXNlTWVtbyA9IFJlYWN0LnVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIGlmICgobW9kZSA9PT0gJ2lubGluZScgfHwgbW9kZSA9PT0gJ3ZlcnRpY2FsJykgJiYgaW5saW5lQ29sbGFwc2VkKSB7XG4gICAgICByZXR1cm4gWyd2ZXJ0aWNhbCcsIGlubGluZUNvbGxhcHNlZF07XG4gICAgfVxuXG4gICAgcmV0dXJuIFttb2RlLCBmYWxzZV07XG4gIH0sIFttb2RlLCBpbmxpbmVDb2xsYXBzZWRdKSxcbiAgICAgIF9SZWFjdCR1c2VNZW1vMiA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VNZW1vLCAyKSxcbiAgICAgIG1lcmdlZE1vZGUgPSBfUmVhY3QkdXNlTWVtbzJbMF0sXG4gICAgICBtZXJnZWRJbmxpbmVDb2xsYXBzZWQgPSBfUmVhY3QkdXNlTWVtbzJbMV07IC8vID09PT09PT09PT09PT09PT09PT09PT0gUmVzcG9uc2l2ZSA9PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB2YXIgX1JlYWN0JHVzZVN0YXRlMyA9IFJlYWN0LnVzZVN0YXRlKDApLFxuICAgICAgX1JlYWN0JHVzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VTdGF0ZTMsIDIpLFxuICAgICAgbGFzdFZpc2libGVJbmRleCA9IF9SZWFjdCR1c2VTdGF0ZTRbMF0sXG4gICAgICBzZXRMYXN0VmlzaWJsZUluZGV4ID0gX1JlYWN0JHVzZVN0YXRlNFsxXTtcblxuICB2YXIgYWxsVmlzaWJsZSA9IGxhc3RWaXNpYmxlSW5kZXggPj0gY2hpbGRMaXN0Lmxlbmd0aCAtIDEgfHwgbWVyZ2VkTW9kZSAhPT0gJ2hvcml6b250YWwnIHx8IGRpc2FibGVkT3ZlcmZsb3c7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT0gT3BlbiA9PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIF91c2VNZXJnZWRTdGF0ZSA9IHVzZU1lcmdlZFN0YXRlKGRlZmF1bHRPcGVuS2V5cywge1xuICAgIHZhbHVlOiBvcGVuS2V5cyxcbiAgICBwb3N0U3RhdGU6IGZ1bmN0aW9uIHBvc3RTdGF0ZShrZXlzKSB7XG4gICAgICByZXR1cm4ga2V5cyB8fCBFTVBUWV9MSVNUO1xuICAgIH1cbiAgfSksXG4gICAgICBfdXNlTWVyZ2VkU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZU1lcmdlZFN0YXRlLCAyKSxcbiAgICAgIG1lcmdlZE9wZW5LZXlzID0gX3VzZU1lcmdlZFN0YXRlMlswXSxcbiAgICAgIHNldE1lcmdlZE9wZW5LZXlzID0gX3VzZU1lcmdlZFN0YXRlMlsxXTtcblxuICB2YXIgdHJpZ2dlck9wZW5LZXlzID0gZnVuY3Rpb24gdHJpZ2dlck9wZW5LZXlzKGtleXMpIHtcbiAgICBzZXRNZXJnZWRPcGVuS2V5cyhrZXlzKTtcbiAgICBvbk9wZW5DaGFuZ2UgPT09IG51bGwgfHwgb25PcGVuQ2hhbmdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbk9wZW5DaGFuZ2Uoa2V5cyk7XG4gIH07IC8vID4+Pj4+IENhY2hlICYgUmVzZXQgb3BlbiBrZXlzIHdoZW4gaW5saW5lQ29sbGFwc2VkIGNoYW5nZWRcblxuXG4gIHZhciBfUmVhY3QkdXNlU3RhdGU1ID0gUmVhY3QudXNlU3RhdGUobWVyZ2VkT3BlbktleXMpLFxuICAgICAgX1JlYWN0JHVzZVN0YXRlNiA9IF9zbGljZWRUb0FycmF5KF9SZWFjdCR1c2VTdGF0ZTUsIDIpLFxuICAgICAgaW5saW5lQ2FjaGVPcGVuS2V5cyA9IF9SZWFjdCR1c2VTdGF0ZTZbMF0sXG4gICAgICBzZXRJbmxpbmVDYWNoZU9wZW5LZXlzID0gX1JlYWN0JHVzZVN0YXRlNlsxXTtcblxuICB2YXIgaXNJbmxpbmVNb2RlID0gbWVyZ2VkTW9kZSA9PT0gJ2lubGluZSc7XG4gIHZhciBtb3VudFJlZiA9IFJlYWN0LnVzZVJlZihmYWxzZSk7IC8vIENhY2hlXG5cbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaXNJbmxpbmVNb2RlKSB7XG4gICAgICBzZXRJbmxpbmVDYWNoZU9wZW5LZXlzKG1lcmdlZE9wZW5LZXlzKTtcbiAgICB9XG4gIH0sIFttZXJnZWRPcGVuS2V5c10pOyAvLyBSZXN0b3JlXG5cbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIW1vdW50UmVmLmN1cnJlbnQpIHtcbiAgICAgIG1vdW50UmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpc0lubGluZU1vZGUpIHtcbiAgICAgIHNldE1lcmdlZE9wZW5LZXlzKGlubGluZUNhY2hlT3BlbktleXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUcmlnZ2VyIG9wZW4gZXZlbnQgaW4gY2FzZSBpdHMgaW4gY29udHJvbFxuICAgICAgdHJpZ2dlck9wZW5LZXlzKEVNUFRZX0xJU1QpO1xuICAgIH1cbiAgfSwgW2lzSW5saW5lTW9kZV0pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09IFBhdGggPT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBfdXNlS2V5UmVjb3JkcyA9IHVzZUtleVJlY29yZHMoKSxcbiAgICAgIHJlZ2lzdGVyUGF0aCA9IF91c2VLZXlSZWNvcmRzLnJlZ2lzdGVyUGF0aCxcbiAgICAgIHVucmVnaXN0ZXJQYXRoID0gX3VzZUtleVJlY29yZHMudW5yZWdpc3RlclBhdGgsXG4gICAgICByZWZyZXNoT3ZlcmZsb3dLZXlzID0gX3VzZUtleVJlY29yZHMucmVmcmVzaE92ZXJmbG93S2V5cyxcbiAgICAgIGlzU3ViUGF0aEtleSA9IF91c2VLZXlSZWNvcmRzLmlzU3ViUGF0aEtleSxcbiAgICAgIGdldEtleVBhdGggPSBfdXNlS2V5UmVjb3Jkcy5nZXRLZXlQYXRoLFxuICAgICAgZ2V0S2V5cyA9IF91c2VLZXlSZWNvcmRzLmdldEtleXMsXG4gICAgICBnZXRTdWJQYXRoS2V5cyA9IF91c2VLZXlSZWNvcmRzLmdldFN1YlBhdGhLZXlzO1xuXG4gIHZhciByZWdpc3RlclBhdGhDb250ZXh0ID0gUmVhY3QudXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZ2lzdGVyUGF0aDogcmVnaXN0ZXJQYXRoLFxuICAgICAgdW5yZWdpc3RlclBhdGg6IHVucmVnaXN0ZXJQYXRoXG4gICAgfTtcbiAgfSwgW3JlZ2lzdGVyUGF0aCwgdW5yZWdpc3RlclBhdGhdKTtcbiAgdmFyIHBhdGhVc2VyQ29udGV4dCA9IFJlYWN0LnVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpc1N1YlBhdGhLZXk6IGlzU3ViUGF0aEtleVxuICAgIH07XG4gIH0sIFtpc1N1YlBhdGhLZXldKTtcbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICByZWZyZXNoT3ZlcmZsb3dLZXlzKGFsbFZpc2libGUgPyBFTVBUWV9MSVNUIDogY2hpbGRMaXN0LnNsaWNlKGxhc3RWaXNpYmxlSW5kZXggKyAxKS5tYXAoZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICByZXR1cm4gY2hpbGQua2V5O1xuICAgIH0pKTtcbiAgfSwgW2xhc3RWaXNpYmxlSW5kZXgsIGFsbFZpc2libGVdKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09IEFjdGl2ZSA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgX3VzZU1lcmdlZFN0YXRlMyA9IHVzZU1lcmdlZFN0YXRlKGFjdGl2ZUtleSB8fCBkZWZhdWx0QWN0aXZlRmlyc3QgJiYgKChfY2hpbGRMaXN0JCA9IGNoaWxkTGlzdFswXSkgPT09IG51bGwgfHwgX2NoaWxkTGlzdCQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaGlsZExpc3QkLmtleSksIHtcbiAgICB2YWx1ZTogYWN0aXZlS2V5XG4gIH0pLFxuICAgICAgX3VzZU1lcmdlZFN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VNZXJnZWRTdGF0ZTMsIDIpLFxuICAgICAgbWVyZ2VkQWN0aXZlS2V5ID0gX3VzZU1lcmdlZFN0YXRlNFswXSxcbiAgICAgIHNldE1lcmdlZEFjdGl2ZUtleSA9IF91c2VNZXJnZWRTdGF0ZTRbMV07XG5cbiAgdmFyIG9uQWN0aXZlID0gdXNlTWVtb0NhbGxiYWNrKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzZXRNZXJnZWRBY3RpdmVLZXkoa2V5KTtcbiAgfSk7XG4gIHZhciBvbkluYWN0aXZlID0gdXNlTWVtb0NhbGxiYWNrKGZ1bmN0aW9uICgpIHtcbiAgICBzZXRNZXJnZWRBY3RpdmVLZXkodW5kZWZpbmVkKTtcbiAgfSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PSBTZWxlY3QgPT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vID4+Pj4+IFNlbGVjdCBrZXlzXG5cbiAgdmFyIF91c2VNZXJnZWRTdGF0ZTUgPSB1c2VNZXJnZWRTdGF0ZShkZWZhdWx0U2VsZWN0ZWRLZXlzIHx8IFtdLCB7XG4gICAgdmFsdWU6IHNlbGVjdGVkS2V5cyxcbiAgICAvLyBMZWdhY3kgY29udmVydCBrZXkgdG8gYXJyYXlcbiAgICBwb3N0U3RhdGU6IGZ1bmN0aW9uIHBvc3RTdGF0ZShrZXlzKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShrZXlzKSkge1xuICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgIH1cblxuICAgICAgaWYgKGtleXMgPT09IG51bGwgfHwga2V5cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBFTVBUWV9MSVNUO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gW2tleXNdO1xuICAgIH1cbiAgfSksXG4gICAgICBfdXNlTWVyZ2VkU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZU1lcmdlZFN0YXRlNSwgMiksXG4gICAgICBtZXJnZWRTZWxlY3RLZXlzID0gX3VzZU1lcmdlZFN0YXRlNlswXSxcbiAgICAgIHNldE1lcmdlZFNlbGVjdEtleXMgPSBfdXNlTWVyZ2VkU3RhdGU2WzFdOyAvLyA+Pj4+PiBUcmlnZ2VyIHNlbGVjdFxuXG5cbiAgdmFyIHRyaWdnZXJTZWxlY3Rpb24gPSBmdW5jdGlvbiB0cmlnZ2VyU2VsZWN0aW9uKGluZm8pIHtcbiAgICBpZiAoc2VsZWN0YWJsZSkge1xuICAgICAgLy8gSW5zZXJ0IG9yIFJlbW92ZVxuICAgICAgdmFyIHRhcmdldEtleSA9IGluZm8ua2V5O1xuICAgICAgdmFyIGV4aXN0ID0gbWVyZ2VkU2VsZWN0S2V5cy5pbmNsdWRlcyh0YXJnZXRLZXkpO1xuICAgICAgdmFyIG5ld1NlbGVjdEtleXM7XG5cbiAgICAgIGlmIChtdWx0aXBsZSkge1xuICAgICAgICBpZiAoZXhpc3QpIHtcbiAgICAgICAgICBuZXdTZWxlY3RLZXlzID0gbWVyZ2VkU2VsZWN0S2V5cy5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGtleSAhPT0gdGFyZ2V0S2V5O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld1NlbGVjdEtleXMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KG1lcmdlZFNlbGVjdEtleXMpLCBbdGFyZ2V0S2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld1NlbGVjdEtleXMgPSBbdGFyZ2V0S2V5XTtcbiAgICAgIH1cblxuICAgICAgc2V0TWVyZ2VkU2VsZWN0S2V5cyhuZXdTZWxlY3RLZXlzKTsgLy8gVHJpZ2dlciBldmVudFxuXG4gICAgICB2YXIgc2VsZWN0SW5mbyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaW5mbyksIHt9LCB7XG4gICAgICAgIHNlbGVjdGVkS2V5czogbmV3U2VsZWN0S2V5c1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChleGlzdCkge1xuICAgICAgICBvbkRlc2VsZWN0ID09PSBudWxsIHx8IG9uRGVzZWxlY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uRGVzZWxlY3Qoc2VsZWN0SW5mbyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvblNlbGVjdCA9PT0gbnVsbCB8fCBvblNlbGVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25TZWxlY3Qoc2VsZWN0SW5mbyk7XG4gICAgICB9XG4gICAgfSAvLyBXaGF0ZXZlciBzZWxlY3RhYmxlLCBhbHdheXMgY2xvc2UgaXRcblxuXG4gICAgaWYgKCFtdWx0aXBsZSAmJiBtZXJnZWRPcGVuS2V5cy5sZW5ndGggJiYgbWVyZ2VkTW9kZSAhPT0gJ2lubGluZScpIHtcbiAgICAgIHRyaWdnZXJPcGVuS2V5cyhFTVBUWV9MSVNUKTtcbiAgICB9XG4gIH07IC8vID09PT09PT09PT09PT09PT09PT09PT09PT0gT3BlbiA9PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIENsaWNrIGZvciBpdGVtLiBTdWJNZW51IGRvIG5vdCBoYXZlIHNlbGVjdGlvbiBzdGF0dXNcbiAgICovXG5cblxuICB2YXIgb25JbnRlcm5hbENsaWNrID0gdXNlTWVtb0NhbGxiYWNrKGZ1bmN0aW9uIChpbmZvKSB7XG4gICAgb25DbGljayA9PT0gbnVsbCB8fCBvbkNsaWNrID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkNsaWNrKHdhcm5JdGVtUHJvcChpbmZvKSk7XG4gICAgdHJpZ2dlclNlbGVjdGlvbihpbmZvKTtcbiAgfSk7XG4gIHZhciBvbkludGVybmFsT3BlbkNoYW5nZSA9IHVzZU1lbW9DYWxsYmFjayhmdW5jdGlvbiAoa2V5LCBvcGVuKSB7XG4gICAgdmFyIG5ld09wZW5LZXlzID0gbWVyZ2VkT3BlbktleXMuZmlsdGVyKGZ1bmN0aW9uIChrKSB7XG4gICAgICByZXR1cm4gayAhPT0ga2V5O1xuICAgIH0pO1xuXG4gICAgaWYgKG9wZW4pIHtcbiAgICAgIG5ld09wZW5LZXlzLnB1c2goa2V5KTtcbiAgICB9IGVsc2UgaWYgKG1lcmdlZE1vZGUgIT09ICdpbmxpbmUnKSB7XG4gICAgICAvLyBXZSBuZWVkIGZpbmQgYWxsIHJlbGF0ZWQgcG9wdXAgdG8gY2xvc2VcbiAgICAgIHZhciBzdWJQYXRoS2V5cyA9IGdldFN1YlBhdGhLZXlzKGtleSk7XG4gICAgICBuZXdPcGVuS2V5cyA9IG5ld09wZW5LZXlzLmZpbHRlcihmdW5jdGlvbiAoaykge1xuICAgICAgICByZXR1cm4gIXN1YlBhdGhLZXlzLmhhcyhrKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICghc2hhbGxvd0VxdWFsKG1lcmdlZE9wZW5LZXlzLCBuZXdPcGVuS2V5cykpIHtcbiAgICAgIHRyaWdnZXJPcGVuS2V5cyhuZXdPcGVuS2V5cyk7XG4gICAgfVxuICB9KTtcbiAgdmFyIGdldEludGVybmFsUG9wdXBDb250YWluZXIgPSB1c2VNZW1vQ2FsbGJhY2soZ2V0UG9wdXBDb250YWluZXIpOyAvLyA9PT09PT09PT09PT09PT09PT09PSBBY2Nlc3NpYmlsaXR5ID09PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciB0cmlnZ2VyQWNjZXNzaWJpbGl0eU9wZW4gPSBmdW5jdGlvbiB0cmlnZ2VyQWNjZXNzaWJpbGl0eU9wZW4oa2V5LCBvcGVuKSB7XG4gICAgdmFyIG5leHRPcGVuID0gb3BlbiAhPT0gbnVsbCAmJiBvcGVuICE9PSB2b2lkIDAgPyBvcGVuIDogIW1lcmdlZE9wZW5LZXlzLmluY2x1ZGVzKGtleSk7XG4gICAgb25JbnRlcm5hbE9wZW5DaGFuZ2Uoa2V5LCBuZXh0T3Blbik7XG4gIH07XG5cbiAgdmFyIG9uSW50ZXJuYWxLZXlEb3duID0gdXNlQWNjZXNzaWJpbGl0eShtZXJnZWRNb2RlLCBtZXJnZWRBY3RpdmVLZXksIGlzUnRsLCB1dWlkLCBjb250YWluZXJSZWYsIGdldEtleXMsIGdldEtleVBhdGgsIHNldE1lcmdlZEFjdGl2ZUtleSwgdHJpZ2dlckFjY2Vzc2liaWxpdHlPcGVuLCBvbktleURvd24pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT0gRWZmZWN0ID09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgc2V0TW91bnRlZCh0cnVlKTtcbiAgfSwgW10pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT0gUmVuZGVyID09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyA+Pj4+PiBDaGlsZHJlblxuXG4gIHZhciB3cmFwcGVkQ2hpbGRMaXN0ID0gbWVyZ2VkTW9kZSAhPT0gJ2hvcml6b250YWwnIHx8IGRpc2FibGVkT3ZlcmZsb3cgPyBjaGlsZExpc3QgOiAvLyBOZWVkIHdyYXAgZm9yIG92ZXJmbG93IGRyb3Bkb3duIHRoYXQgZG8gbm90IHJlc3BvbnNlIGZvciBvcGVuXG4gIGNoaWxkTGlzdC5tYXAoZnVuY3Rpb24gKGNoaWxkLCBpbmRleCkge1xuICAgIHJldHVybiAoXG4gICAgICAvKiNfX1BVUkVfXyovXG4gICAgICAvLyBBbHdheXMgd3JhcCBwcm92aWRlciB0byBhdm9pZCBzdWIgbm9kZSByZS1tb3VudFxuICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChNZW51Q29udGV4dFByb3ZpZGVyLCB7XG4gICAgICAgIGtleTogY2hpbGQua2V5LFxuICAgICAgICBvdmVyZmxvd0Rpc2FibGVkOiBpbmRleCA+IGxhc3RWaXNpYmxlSW5kZXhcbiAgICAgIH0sIGNoaWxkKVxuICAgICk7XG4gIH0pOyAvLyA+Pj4+PiBDb250YWluZXJcblxuICB2YXIgY29udGFpbmVyID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoT3ZlcmZsb3csIF9leHRlbmRzKHtcbiAgICBpZDogaWQsXG4gICAgcmVmOiBjb250YWluZXJSZWYsXG4gICAgcHJlZml4Q2xzOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLW92ZXJmbG93XCIpLFxuICAgIGNvbXBvbmVudDogXCJ1bFwiLFxuICAgIGl0ZW1Db21wb25lbnQ6IE1lbnVJdGVtLFxuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhwcmVmaXhDbHMsIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItcm9vdFwiKSwgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1cIikuY29uY2F0KG1lcmdlZE1vZGUpLCBjbGFzc05hbWUsIChfY2xhc3NOYW1lcyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItaW5saW5lLWNvbGxhcHNlZFwiKSwgbWVyZ2VkSW5saW5lQ29sbGFwc2VkKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXJ0bFwiKSwgaXNSdGwpLCBfY2xhc3NOYW1lcykpLFxuICAgIGRpcjogZGlyZWN0aW9uLFxuICAgIHN0eWxlOiBzdHlsZSxcbiAgICByb2xlOiBcIm1lbnVcIixcbiAgICB0YWJJbmRleDogdGFiSW5kZXgsXG4gICAgZGF0YTogd3JhcHBlZENoaWxkTGlzdCxcbiAgICByZW5kZXJSYXdJdGVtOiBmdW5jdGlvbiByZW5kZXJSYXdJdGVtKG5vZGUpIHtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH0sXG4gICAgcmVuZGVyUmF3UmVzdDogZnVuY3Rpb24gcmVuZGVyUmF3UmVzdChvbWl0SXRlbXMpIHtcbiAgICAgIC8vIFdlIHVzZSBvcmlnaW4gbGlzdCBzaW5jZSB3cmFwcGVkIGxpc3QgdXNlIGNvbnRleHQgdG8gcHJldmVudCBvcGVuXG4gICAgICB2YXIgbGVuID0gb21pdEl0ZW1zLmxlbmd0aDtcbiAgICAgIHZhciBvcmlnaW5PbWl0SXRlbXMgPSBsZW4gPyBjaGlsZExpc3Quc2xpY2UoLWxlbikgOiBudWxsO1xuICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN1Yk1lbnUsIHtcbiAgICAgICAgZXZlbnRLZXk6IE9WRVJGTE9XX0tFWSxcbiAgICAgICAgdGl0bGU6IG92ZXJmbG93ZWRJbmRpY2F0b3IsXG4gICAgICAgIGRpc2FibGVkOiBhbGxWaXNpYmxlLFxuICAgICAgICBpbnRlcm5hbFBvcHVwQ2xvc2U6IGxlbiA9PT0gMCxcbiAgICAgICAgcG9wdXBDbGFzc05hbWU6IG92ZXJmbG93ZWRJbmRpY2F0b3JQb3B1cENsYXNzTmFtZVxuICAgICAgfSwgb3JpZ2luT21pdEl0ZW1zKTtcbiAgICB9LFxuICAgIG1heENvdW50OiBtZXJnZWRNb2RlICE9PSAnaG9yaXpvbnRhbCcgfHwgZGlzYWJsZWRPdmVyZmxvdyA/IE92ZXJmbG93LklOVkFMSURBVEUgOiBPdmVyZmxvdy5SRVNQT05TSVZFLFxuICAgIHNzcjogXCJmdWxsXCIsXG4gICAgXCJkYXRhLW1lbnUtbGlzdFwiOiB0cnVlLFxuICAgIG9uVmlzaWJsZUNoYW5nZTogZnVuY3Rpb24gb25WaXNpYmxlQ2hhbmdlKG5ld0xhc3RJbmRleCkge1xuICAgICAgc2V0TGFzdFZpc2libGVJbmRleChuZXdMYXN0SW5kZXgpO1xuICAgIH0sXG4gICAgb25LZXlEb3duOiBvbkludGVybmFsS2V5RG93blxuICB9LCByZXN0UHJvcHMpKTsgLy8gPj4+Pj4gUmVuZGVyXG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KElkQ29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiB1dWlkXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE1lbnVDb250ZXh0UHJvdmlkZXIsIHtcbiAgICBwcmVmaXhDbHM6IHByZWZpeENscyxcbiAgICBtb2RlOiBtZXJnZWRNb2RlLFxuICAgIG9wZW5LZXlzOiBtZXJnZWRPcGVuS2V5cyxcbiAgICBydGw6IGlzUnRsIC8vIERpc2FibGVkXG4gICAgLFxuICAgIGRpc2FibGVkOiBkaXNhYmxlZCAvLyBNb3Rpb25cbiAgICAsXG4gICAgbW90aW9uOiBtb3VudGVkID8gbW90aW9uIDogbnVsbCxcbiAgICBkZWZhdWx0TW90aW9uczogbW91bnRlZCA/IGRlZmF1bHRNb3Rpb25zIDogbnVsbCAvLyBBY3RpdmVcbiAgICAsXG4gICAgYWN0aXZlS2V5OiBtZXJnZWRBY3RpdmVLZXksXG4gICAgb25BY3RpdmU6IG9uQWN0aXZlLFxuICAgIG9uSW5hY3RpdmU6IG9uSW5hY3RpdmUgLy8gU2VsZWN0aW9uXG4gICAgLFxuICAgIHNlbGVjdGVkS2V5czogbWVyZ2VkU2VsZWN0S2V5cyAvLyBMZXZlbFxuICAgICxcbiAgICBpbmxpbmVJbmRlbnQ6IGlubGluZUluZGVudCAvLyBQb3B1cFxuICAgICxcbiAgICBzdWJNZW51T3BlbkRlbGF5OiBzdWJNZW51T3BlbkRlbGF5LFxuICAgIHN1Yk1lbnVDbG9zZURlbGF5OiBzdWJNZW51Q2xvc2VEZWxheSxcbiAgICBmb3JjZVN1Yk1lbnVSZW5kZXI6IGZvcmNlU3ViTWVudVJlbmRlcixcbiAgICBidWlsdGluUGxhY2VtZW50czogYnVpbHRpblBsYWNlbWVudHMsXG4gICAgdHJpZ2dlclN1Yk1lbnVBY3Rpb246IHRyaWdnZXJTdWJNZW51QWN0aW9uLFxuICAgIGdldFBvcHVwQ29udGFpbmVyOiBnZXRJbnRlcm5hbFBvcHVwQ29udGFpbmVyIC8vIEljb25cbiAgICAsXG4gICAgaXRlbUljb246IGl0ZW1JY29uLFxuICAgIGV4cGFuZEljb246IGV4cGFuZEljb24gLy8gRXZlbnRzXG4gICAgLFxuICAgIG9uSXRlbUNsaWNrOiBvbkludGVybmFsQ2xpY2ssXG4gICAgb25PcGVuQ2hhbmdlOiBvbkludGVybmFsT3BlbkNoYW5nZVxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQYXRoVXNlckNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICB2YWx1ZTogcGF0aFVzZXJDb250ZXh0XG4gIH0sIGNvbnRhaW5lciksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBzdHlsZToge1xuICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgfSxcbiAgICBcImFyaWEtaGlkZGVuXCI6IHRydWVcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUGF0aFJlZ2lzdGVyQ29udGV4dC5Qcm92aWRlciwge1xuICAgIHZhbHVlOiByZWdpc3RlclBhdGhDb250ZXh0XG4gIH0sIGNoaWxkTGlzdCkpKSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBNZW51OyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IG9taXQgZnJvbSBcInJjLXV0aWwvZXMvb21pdFwiO1xuaW1wb3J0IHsgcGFyc2VDaGlsZHJlbiB9IGZyb20gJy4vdXRpbHMvbm9kZVV0aWwnO1xuaW1wb3J0IHsgTWVudUNvbnRleHQgfSBmcm9tICcuL2NvbnRleHQvTWVudUNvbnRleHQnO1xuaW1wb3J0IHsgdXNlRnVsbFBhdGgsIHVzZU1lYXN1cmUgfSBmcm9tICcuL2NvbnRleHQvUGF0aENvbnRleHQnO1xuXG52YXIgSW50ZXJuYWxNZW51SXRlbUdyb3VwID0gZnVuY3Rpb24gSW50ZXJuYWxNZW51SXRlbUdyb3VwKF9yZWYpIHtcbiAgdmFyIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgdGl0bGUgPSBfcmVmLnRpdGxlLFxuICAgICAgZXZlbnRLZXkgPSBfcmVmLmV2ZW50S2V5LFxuICAgICAgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuLFxuICAgICAgcmVzdFByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIFtcImNsYXNzTmFtZVwiLCBcInRpdGxlXCIsIFwiZXZlbnRLZXlcIiwgXCJjaGlsZHJlblwiXSk7XG5cbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChNZW51Q29udGV4dCksXG4gICAgICBwcmVmaXhDbHMgPSBfUmVhY3QkdXNlQ29udGV4dC5wcmVmaXhDbHM7XG5cbiAgdmFyIGdyb3VwUHJlZml4Q2xzID0gXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1pdGVtLWdyb3VwXCIpO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCBfZXh0ZW5kcyh7fSwgcmVzdFByb3BzLCB7XG4gICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICByZXR1cm4gZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9LFxuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhncm91cFByZWZpeENscywgY2xhc3NOYW1lKVxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQoZ3JvdXBQcmVmaXhDbHMsIFwiLXRpdGxlXCIpLFxuICAgIHRpdGxlOiB0eXBlb2YgdGl0bGUgPT09ICdzdHJpbmcnID8gdGl0bGUgOiB1bmRlZmluZWRcbiAgfSwgdGl0bGUpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInVsXCIsIHtcbiAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KGdyb3VwUHJlZml4Q2xzLCBcIi1saXN0XCIpXG4gIH0sIGNoaWxkcmVuKSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNZW51SXRlbUdyb3VwKF9yZWYyKSB7XG4gIHZhciBjaGlsZHJlbiA9IF9yZWYyLmNoaWxkcmVuLFxuICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZjIsIFtcImNoaWxkcmVuXCJdKTtcblxuICB2YXIgY29ubmVjdGVkS2V5UGF0aCA9IHVzZUZ1bGxQYXRoKHByb3BzLmV2ZW50S2V5KTtcbiAgdmFyIGNoaWxkTGlzdCA9IHBhcnNlQ2hpbGRyZW4oY2hpbGRyZW4sIGNvbm5lY3RlZEtleVBhdGgpO1xuICB2YXIgbWVhc3VyZSA9IHVzZU1lYXN1cmUoKTtcblxuICBpZiAobWVhc3VyZSkge1xuICAgIHJldHVybiBjaGlsZExpc3Q7XG4gIH1cblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoSW50ZXJuYWxNZW51SXRlbUdyb3VwLCBvbWl0KHByb3BzLCBbJ3dhcm5LZXknXSksIGNoaWxkTGlzdCk7XG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgeyBNZW51Q29udGV4dCB9IGZyb20gJy4vY29udGV4dC9NZW51Q29udGV4dCc7XG5pbXBvcnQgeyB1c2VNZWFzdXJlIH0gZnJvbSAnLi9jb250ZXh0L1BhdGhDb250ZXh0JztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERpdmlkZXIoX3JlZikge1xuICB2YXIgY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICBzdHlsZSA9IF9yZWYuc3R5bGU7XG5cbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChNZW51Q29udGV4dCksXG4gICAgICBwcmVmaXhDbHMgPSBfUmVhY3QkdXNlQ29udGV4dC5wcmVmaXhDbHM7XG5cbiAgdmFyIG1lYXN1cmUgPSB1c2VNZWFzdXJlKCk7XG5cbiAgaWYgKG1lYXN1cmUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImxpXCIsIHtcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1pdGVtLWRpdmlkZXJcIiksIGNsYXNzTmFtZSksXG4gICAgc3R5bGU6IHN0eWxlXG4gIH0pO1xufSIsImltcG9ydCBNZW51IGZyb20gJy4vTWVudSc7XG5pbXBvcnQgTWVudUl0ZW0gZnJvbSAnLi9NZW51SXRlbSc7XG5pbXBvcnQgU3ViTWVudSBmcm9tICcuL1N1Yk1lbnUnO1xuaW1wb3J0IE1lbnVJdGVtR3JvdXAgZnJvbSAnLi9NZW51SXRlbUdyb3VwJztcbmltcG9ydCB7IHVzZUZ1bGxQYXRoIGFzIHVzZU9yaWdpbkZ1bGxQYXRoIH0gZnJvbSAnLi9jb250ZXh0L1BhdGhDb250ZXh0JztcbmltcG9ydCBEaXZpZGVyIGZyb20gJy4vRGl2aWRlcic7XG4vKiogQHByaXZhdGUgT25seSB1c2VkIGZvciBhbnRkIGludGVybmFsLiBEbyBub3QgdXNlIGluIHlvdXIgcHJvZHVjdGlvbi4gKi9cblxudmFyIHVzZUZ1bGxQYXRoID0gdXNlT3JpZ2luRnVsbFBhdGg7XG5leHBvcnQgeyBTdWJNZW51LCBNZW51SXRlbSBhcyBJdGVtLCBNZW51SXRlbSwgTWVudUl0ZW1Hcm91cCwgTWVudUl0ZW1Hcm91cCBhcyBJdGVtR3JvdXAsIERpdmlkZXIsIHVzZUZ1bGxQYXRoIH07XG52YXIgRXhwb3J0TWVudSA9IE1lbnU7XG5FeHBvcnRNZW51Lkl0ZW0gPSBNZW51SXRlbTtcbkV4cG9ydE1lbnUuU3ViTWVudSA9IFN1Yk1lbnU7XG5FeHBvcnRNZW51Lkl0ZW1Hcm91cCA9IE1lbnVJdGVtR3JvdXA7XG5FeHBvcnRNZW51LkRpdmlkZXIgPSBEaXZpZGVyO1xuZXhwb3J0IGRlZmF1bHQgRXhwb3J0TWVudTsiLCJ2YXIgYXV0b0FkanVzdE92ZXJmbG93ID0ge1xuICBhZGp1c3RYOiAxLFxuICBhZGp1c3RZOiAxXG59O1xudmFyIHRhcmdldE9mZnNldCA9IFswLCAwXTtcbnZhciBwbGFjZW1lbnRzID0ge1xuICB0b3BMZWZ0OiB7XG4gICAgcG9pbnRzOiBbJ2JsJywgJ3RsJ10sXG4gICAgb3ZlcmZsb3c6IGF1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFswLCAtNF0sXG4gICAgdGFyZ2V0T2Zmc2V0OiB0YXJnZXRPZmZzZXRcbiAgfSxcbiAgdG9wQ2VudGVyOiB7XG4gICAgcG9pbnRzOiBbJ2JjJywgJ3RjJ10sXG4gICAgb3ZlcmZsb3c6IGF1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFswLCAtNF0sXG4gICAgdGFyZ2V0T2Zmc2V0OiB0YXJnZXRPZmZzZXRcbiAgfSxcbiAgdG9wUmlnaHQ6IHtcbiAgICBwb2ludHM6IFsnYnInLCAndHInXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzAsIC00XSxcbiAgICB0YXJnZXRPZmZzZXQ6IHRhcmdldE9mZnNldFxuICB9LFxuICBib3R0b21MZWZ0OiB7XG4gICAgcG9pbnRzOiBbJ3RsJywgJ2JsJ10sXG4gICAgb3ZlcmZsb3c6IGF1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFswLCA0XSxcbiAgICB0YXJnZXRPZmZzZXQ6IHRhcmdldE9mZnNldFxuICB9LFxuICBib3R0b21DZW50ZXI6IHtcbiAgICBwb2ludHM6IFsndGMnLCAnYmMnXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzAsIDRdLFxuICAgIHRhcmdldE9mZnNldDogdGFyZ2V0T2Zmc2V0XG4gIH0sXG4gIGJvdHRvbVJpZ2h0OiB7XG4gICAgcG9pbnRzOiBbJ3RyJywgJ2JyJ10sXG4gICAgb3ZlcmZsb3c6IGF1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFswLCA0XSxcbiAgICB0YXJnZXRPZmZzZXQ6IHRhcmdldE9mZnNldFxuICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgcGxhY2VtZW50czsiLCJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFRyaWdnZXIgZnJvbSAncmMtdHJpZ2dlcic7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBQbGFjZW1lbnRzIGZyb20gJy4vcGxhY2VtZW50cyc7XG5cbmZ1bmN0aW9uIERyb3Bkb3duKHByb3BzLCByZWYpIHtcbiAgdmFyIF9wcm9wcyRhcnJvdyA9IHByb3BzLmFycm93LFxuICAgICAgYXJyb3cgPSBfcHJvcHMkYXJyb3cgPT09IHZvaWQgMCA/IGZhbHNlIDogX3Byb3BzJGFycm93LFxuICAgICAgX3Byb3BzJHByZWZpeENscyA9IHByb3BzLnByZWZpeENscyxcbiAgICAgIHByZWZpeENscyA9IF9wcm9wcyRwcmVmaXhDbHMgPT09IHZvaWQgMCA/ICdyYy1kcm9wZG93bicgOiBfcHJvcHMkcHJlZml4Q2xzLFxuICAgICAgdHJhbnNpdGlvbk5hbWUgPSBwcm9wcy50cmFuc2l0aW9uTmFtZSxcbiAgICAgIGFuaW1hdGlvbiA9IHByb3BzLmFuaW1hdGlvbixcbiAgICAgIGFsaWduID0gcHJvcHMuYWxpZ24sXG4gICAgICBfcHJvcHMkcGxhY2VtZW50ID0gcHJvcHMucGxhY2VtZW50LFxuICAgICAgcGxhY2VtZW50ID0gX3Byb3BzJHBsYWNlbWVudCA9PT0gdm9pZCAwID8gJ2JvdHRvbUxlZnQnIDogX3Byb3BzJHBsYWNlbWVudCxcbiAgICAgIF9wcm9wcyRwbGFjZW1lbnRzID0gcHJvcHMucGxhY2VtZW50cyxcbiAgICAgIHBsYWNlbWVudHMgPSBfcHJvcHMkcGxhY2VtZW50cyA9PT0gdm9pZCAwID8gUGxhY2VtZW50cyA6IF9wcm9wcyRwbGFjZW1lbnRzLFxuICAgICAgZ2V0UG9wdXBDb250YWluZXIgPSBwcm9wcy5nZXRQb3B1cENvbnRhaW5lcixcbiAgICAgIHNob3dBY3Rpb24gPSBwcm9wcy5zaG93QWN0aW9uLFxuICAgICAgaGlkZUFjdGlvbiA9IHByb3BzLmhpZGVBY3Rpb24sXG4gICAgICBvdmVybGF5Q2xhc3NOYW1lID0gcHJvcHMub3ZlcmxheUNsYXNzTmFtZSxcbiAgICAgIG92ZXJsYXlTdHlsZSA9IHByb3BzLm92ZXJsYXlTdHlsZSxcbiAgICAgIHZpc2libGUgPSBwcm9wcy52aXNpYmxlLFxuICAgICAgX3Byb3BzJHRyaWdnZXIgPSBwcm9wcy50cmlnZ2VyLFxuICAgICAgdHJpZ2dlciA9IF9wcm9wcyR0cmlnZ2VyID09PSB2b2lkIDAgPyBbJ2hvdmVyJ10gOiBfcHJvcHMkdHJpZ2dlcixcbiAgICAgIG90aGVyUHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMocHJvcHMsIFtcImFycm93XCIsIFwicHJlZml4Q2xzXCIsIFwidHJhbnNpdGlvbk5hbWVcIiwgXCJhbmltYXRpb25cIiwgXCJhbGlnblwiLCBcInBsYWNlbWVudFwiLCBcInBsYWNlbWVudHNcIiwgXCJnZXRQb3B1cENvbnRhaW5lclwiLCBcInNob3dBY3Rpb25cIiwgXCJoaWRlQWN0aW9uXCIsIFwib3ZlcmxheUNsYXNzTmFtZVwiLCBcIm92ZXJsYXlTdHlsZVwiLCBcInZpc2libGVcIiwgXCJ0cmlnZ2VyXCJdKTtcblxuICB2YXIgX1JlYWN0JHVzZVN0YXRlID0gUmVhY3QudXNlU3RhdGUoKSxcbiAgICAgIF9SZWFjdCR1c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfUmVhY3QkdXNlU3RhdGUsIDIpLFxuICAgICAgdHJpZ2dlclZpc2libGUgPSBfUmVhY3QkdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0VHJpZ2dlclZpc2libGUgPSBfUmVhY3QkdXNlU3RhdGUyWzFdO1xuXG4gIHZhciBtZXJnZWRWaXNpYmxlID0gJ3Zpc2libGUnIGluIHByb3BzID8gdmlzaWJsZSA6IHRyaWdnZXJWaXNpYmxlO1xuICB2YXIgdHJpZ2dlclJlZiA9IFJlYWN0LnVzZVJlZihudWxsKTtcbiAgUmVhY3QudXNlSW1wZXJhdGl2ZUhhbmRsZShyZWYsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdHJpZ2dlclJlZi5jdXJyZW50O1xuICB9KTtcblxuICB2YXIgZ2V0T3ZlcmxheUVsZW1lbnQgPSBmdW5jdGlvbiBnZXRPdmVybGF5RWxlbWVudCgpIHtcbiAgICB2YXIgb3ZlcmxheSA9IHByb3BzLm92ZXJsYXk7XG4gICAgdmFyIG92ZXJsYXlFbGVtZW50O1xuXG4gICAgaWYgKHR5cGVvZiBvdmVybGF5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBvdmVybGF5RWxlbWVudCA9IG92ZXJsYXkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3ZlcmxheUVsZW1lbnQgPSBvdmVybGF5O1xuICAgIH1cblxuICAgIHJldHVybiBvdmVybGF5RWxlbWVudDtcbiAgfTtcblxuICB2YXIgb25DbGljayA9IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgIHZhciBvbk92ZXJsYXlDbGljayA9IHByb3BzLm9uT3ZlcmxheUNsaWNrO1xuICAgIHZhciBvdmVybGF5UHJvcHMgPSBnZXRPdmVybGF5RWxlbWVudCgpLnByb3BzO1xuICAgIHNldFRyaWdnZXJWaXNpYmxlKGZhbHNlKTtcblxuICAgIGlmIChvbk92ZXJsYXlDbGljaykge1xuICAgICAgb25PdmVybGF5Q2xpY2soZSk7XG4gICAgfVxuXG4gICAgaWYgKG92ZXJsYXlQcm9wcy5vbkNsaWNrKSB7XG4gICAgICBvdmVybGF5UHJvcHMub25DbGljayhlKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIG9uVmlzaWJsZUNoYW5nZSA9IGZ1bmN0aW9uIG9uVmlzaWJsZUNoYW5nZSh2aXNpYmxlKSB7XG4gICAgdmFyIG9uVmlzaWJsZUNoYW5nZSA9IHByb3BzLm9uVmlzaWJsZUNoYW5nZTtcbiAgICBzZXRUcmlnZ2VyVmlzaWJsZSh2aXNpYmxlKTtcblxuICAgIGlmICh0eXBlb2Ygb25WaXNpYmxlQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBvblZpc2libGVDaGFuZ2UodmlzaWJsZSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBnZXRNZW51RWxlbWVudCA9IGZ1bmN0aW9uIGdldE1lbnVFbGVtZW50KCkge1xuICAgIHZhciBvdmVybGF5RWxlbWVudCA9IGdldE92ZXJsYXlFbGVtZW50KCk7XG4gICAgdmFyIGV4dHJhT3ZlcmxheVByb3BzID0ge1xuICAgICAgcHJlZml4Q2xzOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLW1lbnVcIiksXG4gICAgICBvbkNsaWNrOiBvbkNsaWNrXG4gICAgfTtcblxuICAgIGlmICh0eXBlb2Ygb3ZlcmxheUVsZW1lbnQudHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGRlbGV0ZSBleHRyYU92ZXJsYXlQcm9wcy5wcmVmaXhDbHM7XG4gICAgfVxuXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3QuRnJhZ21lbnQsIG51bGwsIGFycm93ICYmIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWFycm93XCIpXG4gICAgfSksIFJlYWN0LmNsb25lRWxlbWVudChvdmVybGF5RWxlbWVudCwgZXh0cmFPdmVybGF5UHJvcHMpKTtcbiAgfTtcblxuICB2YXIgZ2V0TWVudUVsZW1lbnRPckxhbWJkYSA9IGZ1bmN0aW9uIGdldE1lbnVFbGVtZW50T3JMYW1iZGEoKSB7XG4gICAgdmFyIG92ZXJsYXkgPSBwcm9wcy5vdmVybGF5O1xuXG4gICAgaWYgKHR5cGVvZiBvdmVybGF5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gZ2V0TWVudUVsZW1lbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdldE1lbnVFbGVtZW50KCk7XG4gIH07XG5cbiAgdmFyIGdldE1pbk92ZXJsYXlXaWR0aE1hdGNoVHJpZ2dlciA9IGZ1bmN0aW9uIGdldE1pbk92ZXJsYXlXaWR0aE1hdGNoVHJpZ2dlcigpIHtcbiAgICB2YXIgbWluT3ZlcmxheVdpZHRoTWF0Y2hUcmlnZ2VyID0gcHJvcHMubWluT3ZlcmxheVdpZHRoTWF0Y2hUcmlnZ2VyLFxuICAgICAgICBhbGlnblBvaW50ID0gcHJvcHMuYWxpZ25Qb2ludDtcblxuICAgIGlmICgnbWluT3ZlcmxheVdpZHRoTWF0Y2hUcmlnZ2VyJyBpbiBwcm9wcykge1xuICAgICAgcmV0dXJuIG1pbk92ZXJsYXlXaWR0aE1hdGNoVHJpZ2dlcjtcbiAgICB9XG5cbiAgICByZXR1cm4gIWFsaWduUG9pbnQ7XG4gIH07XG5cbiAgdmFyIGdldE9wZW5DbGFzc05hbWUgPSBmdW5jdGlvbiBnZXRPcGVuQ2xhc3NOYW1lKCkge1xuICAgIHZhciBvcGVuQ2xhc3NOYW1lID0gcHJvcHMub3BlbkNsYXNzTmFtZTtcblxuICAgIGlmIChvcGVuQ2xhc3NOYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBvcGVuQ2xhc3NOYW1lO1xuICAgIH1cblxuICAgIHJldHVybiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLW9wZW5cIik7XG4gIH07XG5cbiAgdmFyIHJlbmRlckNoaWxkcmVuID0gZnVuY3Rpb24gcmVuZGVyQ2hpbGRyZW4oKSB7XG4gICAgdmFyIGNoaWxkcmVuID0gcHJvcHMuY2hpbGRyZW47XG4gICAgdmFyIGNoaWxkcmVuUHJvcHMgPSBjaGlsZHJlbi5wcm9wcyA/IGNoaWxkcmVuLnByb3BzIDoge307XG4gICAgdmFyIGNoaWxkQ2xhc3NOYW1lID0gY2xhc3NOYW1lcyhjaGlsZHJlblByb3BzLmNsYXNzTmFtZSwgZ2V0T3BlbkNsYXNzTmFtZSgpKTtcbiAgICByZXR1cm4gdHJpZ2dlclZpc2libGUgJiYgY2hpbGRyZW4gPyBSZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGRyZW4sIHtcbiAgICAgIGNsYXNzTmFtZTogY2hpbGRDbGFzc05hbWVcbiAgICB9KSA6IGNoaWxkcmVuO1xuICB9O1xuXG4gIHZhciB0cmlnZ2VySGlkZUFjdGlvbiA9IGhpZGVBY3Rpb247XG5cbiAgaWYgKCF0cmlnZ2VySGlkZUFjdGlvbiAmJiB0cmlnZ2VyLmluZGV4T2YoJ2NvbnRleHRNZW51JykgIT09IC0xKSB7XG4gICAgdHJpZ2dlckhpZGVBY3Rpb24gPSBbJ2NsaWNrJ107XG4gIH1cblxuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChUcmlnZ2VyLCBPYmplY3QuYXNzaWduKHt9LCBvdGhlclByb3BzLCB7XG4gICAgcHJlZml4Q2xzOiBwcmVmaXhDbHMsXG4gICAgcmVmOiB0cmlnZ2VyUmVmLFxuICAgIHBvcHVwQ2xhc3NOYW1lOiBjbGFzc05hbWVzKG92ZXJsYXlDbGFzc05hbWUsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1zaG93LWFycm93XCIpLCBhcnJvdykpLFxuICAgIHBvcHVwU3R5bGU6IG92ZXJsYXlTdHlsZSxcbiAgICBidWlsdGluUGxhY2VtZW50czogcGxhY2VtZW50cyxcbiAgICBhY3Rpb246IHRyaWdnZXIsXG4gICAgc2hvd0FjdGlvbjogc2hvd0FjdGlvbixcbiAgICBoaWRlQWN0aW9uOiB0cmlnZ2VySGlkZUFjdGlvbiB8fCBbXSxcbiAgICBwb3B1cFBsYWNlbWVudDogcGxhY2VtZW50LFxuICAgIHBvcHVwQWxpZ246IGFsaWduLFxuICAgIHBvcHVwVHJhbnNpdGlvbk5hbWU6IHRyYW5zaXRpb25OYW1lLFxuICAgIHBvcHVwQW5pbWF0aW9uOiBhbmltYXRpb24sXG4gICAgcG9wdXBWaXNpYmxlOiBtZXJnZWRWaXNpYmxlLFxuICAgIHN0cmV0Y2g6IGdldE1pbk92ZXJsYXlXaWR0aE1hdGNoVHJpZ2dlcigpID8gJ21pbldpZHRoJyA6ICcnLFxuICAgIHBvcHVwOiBnZXRNZW51RWxlbWVudE9yTGFtYmRhKCksXG4gICAgb25Qb3B1cFZpc2libGVDaGFuZ2U6IG9uVmlzaWJsZUNoYW5nZSxcbiAgICBnZXRQb3B1cENvbnRhaW5lcjogZ2V0UG9wdXBDb250YWluZXJcbiAgfSksIHJlbmRlckNoaWxkcmVuKCkpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBSZWFjdC5mb3J3YXJkUmVmKERyb3Bkb3duKTsiLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmZ1bmN0aW9uIEFkZEJ1dHRvbihfcmVmLCByZWYpIHtcbiAgdmFyIHByZWZpeENscyA9IF9yZWYucHJlZml4Q2xzLFxuICAgICAgZWRpdGFibGUgPSBfcmVmLmVkaXRhYmxlLFxuICAgICAgbG9jYWxlID0gX3JlZi5sb2NhbGUsXG4gICAgICBzdHlsZSA9IF9yZWYuc3R5bGU7XG5cbiAgaWYgKCFlZGl0YWJsZSB8fCBlZGl0YWJsZS5zaG93QWRkID09PSBmYWxzZSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHtcbiAgICByZWY6IHJlZixcbiAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1uYXYtYWRkXCIpLFxuICAgIHN0eWxlOiBzdHlsZSxcbiAgICBcImFyaWEtbGFiZWxcIjogKGxvY2FsZSA9PT0gbnVsbCB8fCBsb2NhbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxvY2FsZS5hZGRBcmlhTGFiZWwpIHx8ICdBZGQgdGFiJyxcbiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGV2ZW50KSB7XG4gICAgICBlZGl0YWJsZS5vbkVkaXQoJ2FkZCcsIHtcbiAgICAgICAgZXZlbnQ6IGV2ZW50XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIGVkaXRhYmxlLmFkZEljb24gfHwgJysnKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoQWRkQnV0dG9uKTsiLCJpbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgS2V5Q29kZSBmcm9tIFwicmMtdXRpbC9lcy9LZXlDb2RlXCI7XG5pbXBvcnQgTWVudSwgeyBNZW51SXRlbSB9IGZyb20gJ3JjLW1lbnUnO1xuaW1wb3J0IERyb3Bkb3duIGZyb20gJ3JjLWRyb3Bkb3duJztcbmltcG9ydCBBZGRCdXR0b24gZnJvbSAnLi9BZGRCdXR0b24nO1xuXG5mdW5jdGlvbiBPcGVyYXRpb25Ob2RlKF9yZWYsIHJlZikge1xuICB2YXIgcHJlZml4Q2xzID0gX3JlZi5wcmVmaXhDbHMsXG4gICAgICBpZCA9IF9yZWYuaWQsXG4gICAgICB0YWJzID0gX3JlZi50YWJzLFxuICAgICAgbG9jYWxlID0gX3JlZi5sb2NhbGUsXG4gICAgICBtb2JpbGUgPSBfcmVmLm1vYmlsZSxcbiAgICAgIF9yZWYkbW9yZUljb24gPSBfcmVmLm1vcmVJY29uLFxuICAgICAgbW9yZUljb24gPSBfcmVmJG1vcmVJY29uID09PSB2b2lkIDAgPyAnTW9yZScgOiBfcmVmJG1vcmVJY29uLFxuICAgICAgbW9yZVRyYW5zaXRpb25OYW1lID0gX3JlZi5tb3JlVHJhbnNpdGlvbk5hbWUsXG4gICAgICBzdHlsZSA9IF9yZWYuc3R5bGUsXG4gICAgICBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZSxcbiAgICAgIGVkaXRhYmxlID0gX3JlZi5lZGl0YWJsZSxcbiAgICAgIHRhYkJhckd1dHRlciA9IF9yZWYudGFiQmFyR3V0dGVyLFxuICAgICAgcnRsID0gX3JlZi5ydGwsXG4gICAgICBvblRhYkNsaWNrID0gX3JlZi5vblRhYkNsaWNrO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PSBEcm9wZG93biA9PT09PT09PT09PT09PT09PT09PT09PT1cbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKGZhbHNlKSxcbiAgICAgIF91c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUsIDIpLFxuICAgICAgb3BlbiA9IF91c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRPcGVuID0gX3VzZVN0YXRlMlsxXTtcblxuICB2YXIgX3VzZVN0YXRlMyA9IHVzZVN0YXRlKG51bGwpLFxuICAgICAgX3VzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTMsIDIpLFxuICAgICAgc2VsZWN0ZWRLZXkgPSBfdXNlU3RhdGU0WzBdLFxuICAgICAgc2V0U2VsZWN0ZWRLZXkgPSBfdXNlU3RhdGU0WzFdO1xuXG4gIHZhciBwb3B1cElkID0gXCJcIi5jb25jYXQoaWQsIFwiLW1vcmUtcG9wdXBcIik7XG4gIHZhciBkcm9wZG93blByZWZpeCA9IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItZHJvcGRvd25cIik7XG4gIHZhciBzZWxlY3RlZEl0ZW1JZCA9IHNlbGVjdGVkS2V5ICE9PSBudWxsID8gXCJcIi5jb25jYXQocG9wdXBJZCwgXCItXCIpLmNvbmNhdChzZWxlY3RlZEtleSkgOiBudWxsO1xuICB2YXIgZHJvcGRvd25BcmlhTGFiZWwgPSBsb2NhbGUgPT09IG51bGwgfHwgbG9jYWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsb2NhbGUuZHJvcGRvd25BcmlhTGFiZWw7XG4gIHZhciBtZW51ID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTWVudSwge1xuICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soX3JlZjIpIHtcbiAgICAgIHZhciBrZXkgPSBfcmVmMi5rZXksXG4gICAgICAgICAgZG9tRXZlbnQgPSBfcmVmMi5kb21FdmVudDtcbiAgICAgIG9uVGFiQ2xpY2soa2V5LCBkb21FdmVudCk7XG4gICAgICBzZXRPcGVuKGZhbHNlKTtcbiAgICB9LFxuICAgIGlkOiBwb3B1cElkLFxuICAgIHRhYkluZGV4OiAtMSxcbiAgICByb2xlOiBcImxpc3Rib3hcIixcbiAgICBcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiOiBzZWxlY3RlZEl0ZW1JZCxcbiAgICBzZWxlY3RlZEtleXM6IFtzZWxlY3RlZEtleV0sXG4gICAgXCJhcmlhLWxhYmVsXCI6IGRyb3Bkb3duQXJpYUxhYmVsICE9PSB1bmRlZmluZWQgPyBkcm9wZG93bkFyaWFMYWJlbCA6ICdleHBhbmRlZCBkcm9wZG93bidcbiAgfSwgdGFicy5tYXAoZnVuY3Rpb24gKHRhYikge1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChNZW51SXRlbSwge1xuICAgICAga2V5OiB0YWIua2V5LFxuICAgICAgaWQ6IFwiXCIuY29uY2F0KHBvcHVwSWQsIFwiLVwiKS5jb25jYXQodGFiLmtleSksXG4gICAgICByb2xlOiBcIm9wdGlvblwiLFxuICAgICAgXCJhcmlhLWNvbnRyb2xzXCI6IGlkICYmIFwiXCIuY29uY2F0KGlkLCBcIi1wYW5lbC1cIikuY29uY2F0KHRhYi5rZXkpLFxuICAgICAgZGlzYWJsZWQ6IHRhYi5kaXNhYmxlZFxuICAgIH0sIHRhYi50YWIpO1xuICB9KSk7XG5cbiAgZnVuY3Rpb24gc2VsZWN0T2Zmc2V0KG9mZnNldCkge1xuICAgIHZhciBlbmFibGVkVGFicyA9IHRhYnMuZmlsdGVyKGZ1bmN0aW9uICh0YWIpIHtcbiAgICAgIHJldHVybiAhdGFiLmRpc2FibGVkO1xuICAgIH0pO1xuICAgIHZhciBzZWxlY3RlZEluZGV4ID0gZW5hYmxlZFRhYnMuZmluZEluZGV4KGZ1bmN0aW9uICh0YWIpIHtcbiAgICAgIHJldHVybiB0YWIua2V5ID09PSBzZWxlY3RlZEtleTtcbiAgICB9KSB8fCAwO1xuICAgIHZhciBsZW4gPSBlbmFibGVkVGFicy5sZW5ndGg7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICBzZWxlY3RlZEluZGV4ID0gKHNlbGVjdGVkSW5kZXggKyBvZmZzZXQgKyBsZW4pICUgbGVuO1xuICAgICAgdmFyIHRhYiA9IGVuYWJsZWRUYWJzW3NlbGVjdGVkSW5kZXhdO1xuXG4gICAgICBpZiAoIXRhYi5kaXNhYmxlZCkge1xuICAgICAgICBzZXRTZWxlY3RlZEtleSh0YWIua2V5KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uS2V5RG93bihlKSB7XG4gICAgdmFyIHdoaWNoID0gZS53aGljaDtcblxuICAgIGlmICghb3Blbikge1xuICAgICAgaWYgKFtLZXlDb2RlLkRPV04sIEtleUNvZGUuU1BBQ0UsIEtleUNvZGUuRU5URVJdLmluY2x1ZGVzKHdoaWNoKSkge1xuICAgICAgICBzZXRPcGVuKHRydWUpO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKHdoaWNoKSB7XG4gICAgICBjYXNlIEtleUNvZGUuVVA6XG4gICAgICAgIHNlbGVjdE9mZnNldCgtMSk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgS2V5Q29kZS5ET1dOOlxuICAgICAgICBzZWxlY3RPZmZzZXQoMSk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgS2V5Q29kZS5FU0M6XG4gICAgICAgIHNldE9wZW4oZmFsc2UpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBLZXlDb2RlLlNQQUNFOlxuICAgICAgY2FzZSBLZXlDb2RlLkVOVEVSOlxuICAgICAgICBpZiAoc2VsZWN0ZWRLZXkgIT09IG51bGwpIG9uVGFiQ2xpY2soc2VsZWN0ZWRLZXksIGUpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09PSBFZmZlY3QgPT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAvLyBXZSB1c2UgcXVlcnkgZWxlbWVudCBoZXJlIHRvIGF2b2lkIFJlYWN0IHN0cmljdCB3YXJuaW5nXG4gICAgdmFyIGVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGVjdGVkSXRlbUlkKTtcblxuICAgIGlmIChlbGUgJiYgZWxlLnNjcm9sbEludG9WaWV3KSB7XG4gICAgICBlbGUuc2Nyb2xsSW50b1ZpZXcoZmFsc2UpO1xuICAgIH1cbiAgfSwgW3NlbGVjdGVkS2V5XSk7XG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFvcGVuKSB7XG4gICAgICBzZXRTZWxlY3RlZEtleShudWxsKTtcbiAgICB9XG4gIH0sIFtvcGVuXSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT0gUmVuZGVyID09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgbW9yZVN0eWxlID0gX2RlZmluZVByb3BlcnR5KHt9LCBydGwgPyAnbWFyZ2luUmlnaHQnIDogJ21hcmdpbkxlZnQnLCB0YWJCYXJHdXR0ZXIpO1xuXG4gIGlmICghdGFicy5sZW5ndGgpIHtcbiAgICBtb3JlU3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgIG1vcmVTdHlsZS5vcmRlciA9IDE7XG4gIH1cblxuICB2YXIgb3ZlcmxheUNsYXNzTmFtZSA9IGNsYXNzTmFtZXMoX2RlZmluZVByb3BlcnR5KHt9LCBcIlwiLmNvbmNhdChkcm9wZG93blByZWZpeCwgXCItcnRsXCIpLCBydGwpKTtcbiAgdmFyIG1vcmVOb2RlID0gbW9iaWxlID8gbnVsbCA6IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KERyb3Bkb3duLCB7XG4gICAgcHJlZml4Q2xzOiBkcm9wZG93blByZWZpeCxcbiAgICBvdmVybGF5OiBtZW51LFxuICAgIHRyaWdnZXI6IFsnaG92ZXInXSxcbiAgICB2aXNpYmxlOiBvcGVuLFxuICAgIHRyYW5zaXRpb25OYW1lOiBtb3JlVHJhbnNpdGlvbk5hbWUsXG4gICAgb25WaXNpYmxlQ2hhbmdlOiBzZXRPcGVuLFxuICAgIG92ZXJsYXlDbGFzc05hbWU6IG92ZXJsYXlDbGFzc05hbWUsXG4gICAgbW91c2VFbnRlckRlbGF5OiAwLjEsXG4gICAgbW91c2VMZWF2ZURlbGF5OiAwLjFcbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgIHR5cGU6IFwiYnV0dG9uXCIsXG4gICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLW5hdi1tb3JlXCIpLFxuICAgIHN0eWxlOiBtb3JlU3R5bGUsXG4gICAgdGFiSW5kZXg6IC0xLFxuICAgIFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIsXG4gICAgXCJhcmlhLWhhc3BvcHVwXCI6IFwibGlzdGJveFwiLFxuICAgIFwiYXJpYS1jb250cm9sc1wiOiBwb3B1cElkLFxuICAgIGlkOiBcIlwiLmNvbmNhdChpZCwgXCItbW9yZVwiKSxcbiAgICBcImFyaWEtZXhwYW5kZWRcIjogb3BlbixcbiAgICBvbktleURvd246IG9uS2V5RG93blxuICB9LCBtb3JlSWNvbikpO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLW5hdi1vcGVyYXRpb25zXCIpLCBjbGFzc05hbWUpLFxuICAgIHN0eWxlOiBzdHlsZSxcbiAgICByZWY6IHJlZlxuICB9LCBtb3JlTm9kZSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQWRkQnV0dG9uLCB7XG4gICAgcHJlZml4Q2xzOiBwcmVmaXhDbHMsXG4gICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgZWRpdGFibGU6IGVkaXRhYmxlXG4gIH0pKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoT3BlcmF0aW9uTm9kZSk7IiwiaW1wb3J0IHsgY3JlYXRlQ29udGV4dCB9IGZyb20gJ3JlYWN0JztcbmV4cG9ydCBkZWZhdWx0IC8qI19fUFVSRV9fKi9jcmVhdGVDb250ZXh0KG51bGwpOyIsImltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbnZhciBNSU5fU1dJUEVfRElTVEFOQ0UgPSAwLjE7XG52YXIgU1RPUF9TV0lQRV9ESVNUQU5DRSA9IDAuMDE7XG52YXIgUkVGUkVTSF9JTlRFUlZBTCA9IDIwO1xudmFyIFNQRUVEX09GRl9NVUxUSVBMRSA9IE1hdGgucG93KDAuOTk1LCBSRUZSRVNIX0lOVEVSVkFMKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IEhvb2sgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZVRvdWNoTW92ZShyZWYsIG9uT2Zmc2V0KSB7XG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZSgpLFxuICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgICB0b3VjaFBvc2l0aW9uID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNldFRvdWNoUG9zaXRpb24gPSBfdXNlU3RhdGUyWzFdO1xuXG4gIHZhciBfdXNlU3RhdGUzID0gdXNlU3RhdGUoMCksXG4gICAgICBfdXNlU3RhdGU0ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMywgMiksXG4gICAgICBsYXN0VGltZXN0YW1wID0gX3VzZVN0YXRlNFswXSxcbiAgICAgIHNldExhc3RUaW1lc3RhbXAgPSBfdXNlU3RhdGU0WzFdO1xuXG4gIHZhciBfdXNlU3RhdGU1ID0gdXNlU3RhdGUoMCksXG4gICAgICBfdXNlU3RhdGU2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNSwgMiksXG4gICAgICBsYXN0VGltZURpZmYgPSBfdXNlU3RhdGU2WzBdLFxuICAgICAgc2V0TGFzdFRpbWVEaWZmID0gX3VzZVN0YXRlNlsxXTtcblxuICB2YXIgX3VzZVN0YXRlNyA9IHVzZVN0YXRlKCksXG4gICAgICBfdXNlU3RhdGU4ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlNywgMiksXG4gICAgICBsYXN0T2Zmc2V0ID0gX3VzZVN0YXRlOFswXSxcbiAgICAgIHNldExhc3RPZmZzZXQgPSBfdXNlU3RhdGU4WzFdO1xuXG4gIHZhciBtb3Rpb25SZWYgPSB1c2VSZWYoKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PSBFdmVudHMgPT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyA+Pj4gVG91Y2ggZXZlbnRzXG5cbiAgZnVuY3Rpb24gb25Ub3VjaFN0YXJ0KGUpIHtcbiAgICB2YXIgX2UkdG91Y2hlcyQgPSBlLnRvdWNoZXNbMF0sXG4gICAgICAgIHNjcmVlblggPSBfZSR0b3VjaGVzJC5zY3JlZW5YLFxuICAgICAgICBzY3JlZW5ZID0gX2UkdG91Y2hlcyQuc2NyZWVuWTtcbiAgICBzZXRUb3VjaFBvc2l0aW9uKHtcbiAgICAgIHg6IHNjcmVlblgsXG4gICAgICB5OiBzY3JlZW5ZXG4gICAgfSk7XG4gICAgd2luZG93LmNsZWFySW50ZXJ2YWwobW90aW9uUmVmLmN1cnJlbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Ub3VjaE1vdmUoZSkge1xuICAgIGlmICghdG91Y2hQb3NpdGlvbikgcmV0dXJuO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgX2UkdG91Y2hlcyQyID0gZS50b3VjaGVzWzBdLFxuICAgICAgICBzY3JlZW5YID0gX2UkdG91Y2hlcyQyLnNjcmVlblgsXG4gICAgICAgIHNjcmVlblkgPSBfZSR0b3VjaGVzJDIuc2NyZWVuWTtcbiAgICBzZXRUb3VjaFBvc2l0aW9uKHtcbiAgICAgIHg6IHNjcmVlblgsXG4gICAgICB5OiBzY3JlZW5ZXG4gICAgfSk7XG4gICAgdmFyIG9mZnNldFggPSBzY3JlZW5YIC0gdG91Y2hQb3NpdGlvbi54O1xuICAgIHZhciBvZmZzZXRZID0gc2NyZWVuWSAtIHRvdWNoUG9zaXRpb24ueTtcbiAgICBvbk9mZnNldChvZmZzZXRYLCBvZmZzZXRZKTtcbiAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBzZXRMYXN0VGltZXN0YW1wKG5vdyk7XG4gICAgc2V0TGFzdFRpbWVEaWZmKG5vdyAtIGxhc3RUaW1lc3RhbXApO1xuICAgIHNldExhc3RPZmZzZXQoe1xuICAgICAgeDogb2Zmc2V0WCxcbiAgICAgIHk6IG9mZnNldFlcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uVG91Y2hFbmQoKSB7XG4gICAgaWYgKCF0b3VjaFBvc2l0aW9uKSByZXR1cm47XG4gICAgc2V0VG91Y2hQb3NpdGlvbihudWxsKTtcbiAgICBzZXRMYXN0T2Zmc2V0KG51bGwpOyAvLyBTd2lwZSBpZiBuZWVkZWRcblxuICAgIGlmIChsYXN0T2Zmc2V0KSB7XG4gICAgICB2YXIgZGlzdGFuY2VYID0gbGFzdE9mZnNldC54IC8gbGFzdFRpbWVEaWZmO1xuICAgICAgdmFyIGRpc3RhbmNlWSA9IGxhc3RPZmZzZXQueSAvIGxhc3RUaW1lRGlmZjtcbiAgICAgIHZhciBhYnNYID0gTWF0aC5hYnMoZGlzdGFuY2VYKTtcbiAgICAgIHZhciBhYnNZID0gTWF0aC5hYnMoZGlzdGFuY2VZKTsgLy8gU2tpcCBzd2lwZSBpZiBsb3cgZGlzdGFuY2VcblxuICAgICAgaWYgKE1hdGgubWF4KGFic1gsIGFic1kpIDwgTUlOX1NXSVBFX0RJU1RBTkNFKSByZXR1cm47XG4gICAgICB2YXIgY3VycmVudFggPSBkaXN0YW5jZVg7XG4gICAgICB2YXIgY3VycmVudFkgPSBkaXN0YW5jZVk7XG4gICAgICBtb3Rpb25SZWYuY3VycmVudCA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChNYXRoLmFicyhjdXJyZW50WCkgPCBTVE9QX1NXSVBFX0RJU1RBTkNFICYmIE1hdGguYWJzKGN1cnJlbnRZKSA8IFNUT1BfU1dJUEVfRElTVEFOQ0UpIHtcbiAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChtb3Rpb25SZWYuY3VycmVudCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VycmVudFggKj0gU1BFRURfT0ZGX01VTFRJUExFO1xuICAgICAgICBjdXJyZW50WSAqPSBTUEVFRF9PRkZfTVVMVElQTEU7XG4gICAgICAgIG9uT2Zmc2V0KGN1cnJlbnRYICogUkVGUkVTSF9JTlRFUlZBTCwgY3VycmVudFkgKiBSRUZSRVNIX0lOVEVSVkFMKTtcbiAgICAgIH0sIFJFRlJFU0hfSU5URVJWQUwpO1xuICAgIH1cbiAgfSAvLyA+Pj4gV2hlZWwgZXZlbnRcblxuXG4gIHZhciBsYXN0V2hlZWxEaXJlY3Rpb25SZWYgPSB1c2VSZWYoKTtcblxuICBmdW5jdGlvbiBvbldoZWVsKGUpIHtcbiAgICB2YXIgZGVsdGFYID0gZS5kZWx0YVgsXG4gICAgICAgIGRlbHRhWSA9IGUuZGVsdGFZOyAvLyBDb252ZXJ0IGJvdGggdG8geCAmIHkgc2luY2Ugd2hlZWwgb25seSBoYXBwZW5lZCBvbiBQQ1xuXG4gICAgdmFyIG1peGVkID0gMDtcbiAgICB2YXIgYWJzWCA9IE1hdGguYWJzKGRlbHRhWCk7XG4gICAgdmFyIGFic1kgPSBNYXRoLmFicyhkZWx0YVkpO1xuXG4gICAgaWYgKGFic1ggPT09IGFic1kpIHtcbiAgICAgIG1peGVkID0gbGFzdFdoZWVsRGlyZWN0aW9uUmVmLmN1cnJlbnQgPT09ICd4JyA/IGRlbHRhWCA6IGRlbHRhWTtcbiAgICB9IGVsc2UgaWYgKGFic1ggPiBhYnNZKSB7XG4gICAgICBtaXhlZCA9IGRlbHRhWDtcbiAgICAgIGxhc3RXaGVlbERpcmVjdGlvblJlZi5jdXJyZW50ID0gJ3gnO1xuICAgIH0gZWxzZSB7XG4gICAgICBtaXhlZCA9IGRlbHRhWTtcbiAgICAgIGxhc3RXaGVlbERpcmVjdGlvblJlZi5jdXJyZW50ID0gJ3knO1xuICAgIH1cblxuICAgIGlmIChvbk9mZnNldCgtbWl4ZWQsIC1taXhlZCkpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09PSBFZmZlY3QgPT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cbiAgdmFyIHRvdWNoRXZlbnRzUmVmID0gdXNlUmVmKG51bGwpO1xuICB0b3VjaEV2ZW50c1JlZi5jdXJyZW50ID0ge1xuICAgIG9uVG91Y2hTdGFydDogb25Ub3VjaFN0YXJ0LFxuICAgIG9uVG91Y2hNb3ZlOiBvblRvdWNoTW92ZSxcbiAgICBvblRvdWNoRW5kOiBvblRvdWNoRW5kLFxuICAgIG9uV2hlZWw6IG9uV2hlZWxcbiAgfTtcbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBvblByb3h5VG91Y2hTdGFydChlKSB7XG4gICAgICB0b3VjaEV2ZW50c1JlZi5jdXJyZW50Lm9uVG91Y2hTdGFydChlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblByb3h5VG91Y2hNb3ZlKGUpIHtcbiAgICAgIHRvdWNoRXZlbnRzUmVmLmN1cnJlbnQub25Ub3VjaE1vdmUoZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25Qcm94eVRvdWNoRW5kKGUpIHtcbiAgICAgIHRvdWNoRXZlbnRzUmVmLmN1cnJlbnQub25Ub3VjaEVuZChlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblByb3h5V2hlZWwoZSkge1xuICAgICAgdG91Y2hFdmVudHNSZWYuY3VycmVudC5vbldoZWVsKGUpO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uUHJveHlUb3VjaE1vdmUsIHtcbiAgICAgIHBhc3NpdmU6IGZhbHNlXG4gICAgfSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblByb3h5VG91Y2hFbmQsIHtcbiAgICAgIHBhc3NpdmU6IGZhbHNlXG4gICAgfSk7IC8vIE5vIG5lZWQgdG8gY2xlYW4gdXAgc2luY2UgZWxlbWVudCByZW1vdmVkXG5cbiAgICByZWYuY3VycmVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Qcm94eVRvdWNoU3RhcnQsIHtcbiAgICAgIHBhc3NpdmU6IGZhbHNlXG4gICAgfSk7XG4gICAgcmVmLmN1cnJlbnQuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBvblByb3h5V2hlZWwpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBvblByb3h5VG91Y2hNb3ZlKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Qcm94eVRvdWNoRW5kKTtcbiAgICB9O1xuICB9LCBbXSk7XG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlUmVmcygpIHtcbiAgdmFyIGNhY2hlUmVmcyA9IHVzZVJlZihuZXcgTWFwKCkpO1xuXG4gIGZ1bmN0aW9uIGdldFJlZihrZXkpIHtcbiAgICBpZiAoIWNhY2hlUmVmcy5jdXJyZW50LmhhcyhrZXkpKSB7XG4gICAgICBjYWNoZVJlZnMuY3VycmVudC5zZXQoa2V5LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlUmVmKCkpO1xuICAgIH1cblxuICAgIHJldHVybiBjYWNoZVJlZnMuY3VycmVudC5nZXQoa2V5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZVJlZihrZXkpIHtcbiAgICBjYWNoZVJlZnMuY3VycmVudC5kZWxldGUoa2V5KTtcbiAgfVxuXG4gIHJldHVybiBbZ2V0UmVmLCByZW1vdmVSZWZdO1xufSIsImltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheVwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlU3luY1N0YXRlKGRlZmF1bHRTdGF0ZSwgb25DaGFuZ2UpIHtcbiAgdmFyIHN0YXRlUmVmID0gUmVhY3QudXNlUmVmKGRlZmF1bHRTdGF0ZSk7XG5cbiAgdmFyIF9SZWFjdCR1c2VTdGF0ZSA9IFJlYWN0LnVzZVN0YXRlKHt9KSxcbiAgICAgIF9SZWFjdCR1c2VTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfUmVhY3QkdXNlU3RhdGUsIDIpLFxuICAgICAgZm9yY2VVcGRhdGUgPSBfUmVhY3QkdXNlU3RhdGUyWzFdO1xuXG4gIGZ1bmN0aW9uIHNldFN0YXRlKHVwZGF0ZXIpIHtcbiAgICB2YXIgbmV3VmFsdWUgPSB0eXBlb2YgdXBkYXRlciA9PT0gJ2Z1bmN0aW9uJyA/IHVwZGF0ZXIoc3RhdGVSZWYuY3VycmVudCkgOiB1cGRhdGVyO1xuXG4gICAgaWYgKG5ld1ZhbHVlICE9PSBzdGF0ZVJlZi5jdXJyZW50KSB7XG4gICAgICBvbkNoYW5nZShuZXdWYWx1ZSwgc3RhdGVSZWYuY3VycmVudCk7XG4gICAgfVxuXG4gICAgc3RhdGVSZWYuY3VycmVudCA9IG5ld1ZhbHVlO1xuICAgIGZvcmNlVXBkYXRlKHt9KTtcbiAgfVxuXG4gIHJldHVybiBbc3RhdGVSZWYuY3VycmVudCwgc2V0U3RhdGVdO1xufSIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5XCI7XG5pbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgX3R5cGVvZiBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCByYWYgZnJvbSBcInJjLXV0aWwvZXMvcmFmXCI7XG5pbXBvcnQgUmVzaXplT2JzZXJ2ZXIgZnJvbSAncmMtcmVzaXplLW9ic2VydmVyJztcbmltcG9ydCB1c2VSYWYsIHsgdXNlUmFmU3RhdGUgfSBmcm9tICcuLi9ob29rcy91c2VSYWYnO1xuaW1wb3J0IFRhYk5vZGUgZnJvbSAnLi9UYWJOb2RlJztcbmltcG9ydCB1c2VPZmZzZXRzIGZyb20gJy4uL2hvb2tzL3VzZU9mZnNldHMnO1xuaW1wb3J0IHVzZVZpc2libGVSYW5nZSBmcm9tICcuLi9ob29rcy91c2VWaXNpYmxlUmFuZ2UnO1xuaW1wb3J0IE9wZXJhdGlvbk5vZGUgZnJvbSAnLi9PcGVyYXRpb25Ob2RlJztcbmltcG9ydCBUYWJDb250ZXh0IGZyb20gJy4uL1RhYkNvbnRleHQnO1xuaW1wb3J0IHVzZVRvdWNoTW92ZSBmcm9tICcuLi9ob29rcy91c2VUb3VjaE1vdmUnO1xuaW1wb3J0IHVzZVJlZnMgZnJvbSAnLi4vaG9va3MvdXNlUmVmcyc7XG5pbXBvcnQgQWRkQnV0dG9uIGZyb20gJy4vQWRkQnV0dG9uJztcbmltcG9ydCB1c2VTeW5jU3RhdGUgZnJvbSAnLi4vaG9va3MvdXNlU3luY1N0YXRlJztcblxudmFyIEV4dHJhQ29udGVudCA9IGZ1bmN0aW9uIEV4dHJhQ29udGVudChfcmVmKSB7XG4gIHZhciBwb3NpdGlvbiA9IF9yZWYucG9zaXRpb24sXG4gICAgICBwcmVmaXhDbHMgPSBfcmVmLnByZWZpeENscyxcbiAgICAgIGV4dHJhID0gX3JlZi5leHRyYTtcbiAgaWYgKCFleHRyYSkgcmV0dXJuIG51bGw7XG4gIHZhciBjb250ZW50OyAvLyBQYXJzZSBleHRyYVxuXG4gIHZhciBhc3NlcnRFeHRyYSA9IHt9O1xuXG4gIGlmIChleHRyYSAmJiBfdHlwZW9mKGV4dHJhKSA9PT0gJ29iamVjdCcgJiYgISAvKiNfX1BVUkVfXyovUmVhY3QuaXNWYWxpZEVsZW1lbnQoZXh0cmEpKSB7XG4gICAgYXNzZXJ0RXh0cmEgPSBleHRyYTtcbiAgfSBlbHNlIHtcbiAgICBhc3NlcnRFeHRyYS5yaWdodCA9IGV4dHJhO1xuICB9XG5cbiAgaWYgKHBvc2l0aW9uID09PSAncmlnaHQnKSB7XG4gICAgY29udGVudCA9IGFzc2VydEV4dHJhLnJpZ2h0O1xuICB9XG5cbiAgaWYgKHBvc2l0aW9uID09PSAnbGVmdCcpIHtcbiAgICBjb250ZW50ID0gYXNzZXJ0RXh0cmEubGVmdDtcbiAgfVxuXG4gIHJldHVybiBjb250ZW50ID8gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1leHRyYS1jb250ZW50XCIpXG4gIH0sIGNvbnRlbnQpIDogbnVsbDtcbn07XG5cbmZ1bmN0aW9uIFRhYk5hdkxpc3QocHJvcHMsIHJlZikge1xuICB2YXIgX2NsYXNzTmFtZXM7XG5cbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChUYWJDb250ZXh0KSxcbiAgICAgIHByZWZpeENscyA9IF9SZWFjdCR1c2VDb250ZXh0LnByZWZpeENscyxcbiAgICAgIHRhYnMgPSBfUmVhY3QkdXNlQ29udGV4dC50YWJzO1xuXG4gIHZhciBjbGFzc05hbWUgPSBwcm9wcy5jbGFzc05hbWUsXG4gICAgICBzdHlsZSA9IHByb3BzLnN0eWxlLFxuICAgICAgaWQgPSBwcm9wcy5pZCxcbiAgICAgIGFuaW1hdGVkID0gcHJvcHMuYW5pbWF0ZWQsXG4gICAgICBhY3RpdmVLZXkgPSBwcm9wcy5hY3RpdmVLZXksXG4gICAgICBydGwgPSBwcm9wcy5ydGwsXG4gICAgICBleHRyYSA9IHByb3BzLmV4dHJhLFxuICAgICAgZWRpdGFibGUgPSBwcm9wcy5lZGl0YWJsZSxcbiAgICAgIGxvY2FsZSA9IHByb3BzLmxvY2FsZSxcbiAgICAgIHRhYlBvc2l0aW9uID0gcHJvcHMudGFiUG9zaXRpb24sXG4gICAgICB0YWJCYXJHdXR0ZXIgPSBwcm9wcy50YWJCYXJHdXR0ZXIsXG4gICAgICBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuLFxuICAgICAgb25UYWJDbGljayA9IHByb3BzLm9uVGFiQ2xpY2ssXG4gICAgICBvblRhYlNjcm9sbCA9IHByb3BzLm9uVGFiU2Nyb2xsO1xuICB2YXIgdGFic1dyYXBwZXJSZWYgPSB1c2VSZWYoKTtcbiAgdmFyIHRhYkxpc3RSZWYgPSB1c2VSZWYoKTtcbiAgdmFyIG9wZXJhdGlvbnNSZWYgPSB1c2VSZWYoKTtcbiAgdmFyIGlubmVyQWRkQnV0dG9uUmVmID0gdXNlUmVmKCk7XG5cbiAgdmFyIF91c2VSZWZzID0gdXNlUmVmcygpLFxuICAgICAgX3VzZVJlZnMyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVJlZnMsIDIpLFxuICAgICAgZ2V0QnRuUmVmID0gX3VzZVJlZnMyWzBdLFxuICAgICAgcmVtb3ZlQnRuUmVmID0gX3VzZVJlZnMyWzFdO1xuXG4gIHZhciB0YWJQb3NpdGlvblRvcE9yQm90dG9tID0gdGFiUG9zaXRpb24gPT09ICd0b3AnIHx8IHRhYlBvc2l0aW9uID09PSAnYm90dG9tJztcblxuICB2YXIgX3VzZVN5bmNTdGF0ZSA9IHVzZVN5bmNTdGF0ZSgwLCBmdW5jdGlvbiAobmV4dCwgcHJldikge1xuICAgIGlmICh0YWJQb3NpdGlvblRvcE9yQm90dG9tICYmIG9uVGFiU2Nyb2xsKSB7XG4gICAgICBvblRhYlNjcm9sbCh7XG4gICAgICAgIGRpcmVjdGlvbjogbmV4dCA+IHByZXYgPyAnbGVmdCcgOiAncmlnaHQnXG4gICAgICB9KTtcbiAgICB9XG4gIH0pLFxuICAgICAgX3VzZVN5bmNTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlU3luY1N0YXRlLCAyKSxcbiAgICAgIHRyYW5zZm9ybUxlZnQgPSBfdXNlU3luY1N0YXRlMlswXSxcbiAgICAgIHNldFRyYW5zZm9ybUxlZnQgPSBfdXNlU3luY1N0YXRlMlsxXTtcblxuICB2YXIgX3VzZVN5bmNTdGF0ZTMgPSB1c2VTeW5jU3RhdGUoMCwgZnVuY3Rpb24gKG5leHQsIHByZXYpIHtcbiAgICBpZiAoIXRhYlBvc2l0aW9uVG9wT3JCb3R0b20gJiYgb25UYWJTY3JvbGwpIHtcbiAgICAgIG9uVGFiU2Nyb2xsKHtcbiAgICAgICAgZGlyZWN0aW9uOiBuZXh0ID4gcHJldiA/ICd0b3AnIDogJ2JvdHRvbSdcbiAgICAgIH0pO1xuICAgIH1cbiAgfSksXG4gICAgICBfdXNlU3luY1N0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VTeW5jU3RhdGUzLCAyKSxcbiAgICAgIHRyYW5zZm9ybVRvcCA9IF91c2VTeW5jU3RhdGU0WzBdLFxuICAgICAgc2V0VHJhbnNmb3JtVG9wID0gX3VzZVN5bmNTdGF0ZTRbMV07XG5cbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKDApLFxuICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksXG4gICAgICB3cmFwcGVyU2Nyb2xsV2lkdGggPSBfdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0V3JhcHBlclNjcm9sbFdpZHRoID0gX3VzZVN0YXRlMlsxXTtcblxuICB2YXIgX3VzZVN0YXRlMyA9IHVzZVN0YXRlKDApLFxuICAgICAgX3VzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTMsIDIpLFxuICAgICAgd3JhcHBlclNjcm9sbEhlaWdodCA9IF91c2VTdGF0ZTRbMF0sXG4gICAgICBzZXRXcmFwcGVyU2Nyb2xsSGVpZ2h0ID0gX3VzZVN0YXRlNFsxXTtcblxuICB2YXIgX3VzZVN0YXRlNSA9IHVzZVN0YXRlKDApLFxuICAgICAgX3VzZVN0YXRlNiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTUsIDIpLFxuICAgICAgd3JhcHBlckNvbnRlbnRXaWR0aCA9IF91c2VTdGF0ZTZbMF0sXG4gICAgICBzZXRXcmFwcGVyQ29udGVudFdpZHRoID0gX3VzZVN0YXRlNlsxXTtcblxuICB2YXIgX3VzZVN0YXRlNyA9IHVzZVN0YXRlKDApLFxuICAgICAgX3VzZVN0YXRlOCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTcsIDIpLFxuICAgICAgd3JhcHBlckNvbnRlbnRIZWlnaHQgPSBfdXNlU3RhdGU4WzBdLFxuICAgICAgc2V0V3JhcHBlckNvbnRlbnRIZWlnaHQgPSBfdXNlU3RhdGU4WzFdO1xuXG4gIHZhciBfdXNlU3RhdGU5ID0gdXNlU3RhdGUobnVsbCksXG4gICAgICBfdXNlU3RhdGUxMCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTksIDIpLFxuICAgICAgd3JhcHBlcldpZHRoID0gX3VzZVN0YXRlMTBbMF0sXG4gICAgICBzZXRXcmFwcGVyV2lkdGggPSBfdXNlU3RhdGUxMFsxXTtcblxuICB2YXIgX3VzZVN0YXRlMTEgPSB1c2VTdGF0ZShudWxsKSxcbiAgICAgIF91c2VTdGF0ZTEyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTEsIDIpLFxuICAgICAgd3JhcHBlckhlaWdodCA9IF91c2VTdGF0ZTEyWzBdLFxuICAgICAgc2V0V3JhcHBlckhlaWdodCA9IF91c2VTdGF0ZTEyWzFdO1xuXG4gIHZhciBfdXNlU3RhdGUxMyA9IHVzZVN0YXRlKDApLFxuICAgICAgX3VzZVN0YXRlMTQgPSBfc2xpY2VkVG9BcnJheShfdXNlU3RhdGUxMywgMiksXG4gICAgICBhZGRXaWR0aCA9IF91c2VTdGF0ZTE0WzBdLFxuICAgICAgc2V0QWRkV2lkdGggPSBfdXNlU3RhdGUxNFsxXTtcblxuICB2YXIgX3VzZVN0YXRlMTUgPSB1c2VTdGF0ZSgwKSxcbiAgICAgIF91c2VTdGF0ZTE2ID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlMTUsIDIpLFxuICAgICAgYWRkSGVpZ2h0ID0gX3VzZVN0YXRlMTZbMF0sXG4gICAgICBzZXRBZGRIZWlnaHQgPSBfdXNlU3RhdGUxNlsxXTtcblxuICB2YXIgX3VzZVJhZlN0YXRlID0gdXNlUmFmU3RhdGUobmV3IE1hcCgpKSxcbiAgICAgIF91c2VSYWZTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlUmFmU3RhdGUsIDIpLFxuICAgICAgdGFiU2l6ZXMgPSBfdXNlUmFmU3RhdGUyWzBdLFxuICAgICAgc2V0VGFiU2l6ZXMgPSBfdXNlUmFmU3RhdGUyWzFdO1xuXG4gIHZhciB0YWJPZmZzZXRzID0gdXNlT2Zmc2V0cyh0YWJzLCB0YWJTaXplcywgd3JhcHBlclNjcm9sbFdpZHRoKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT0gVXRpbCA9PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIG9wZXJhdGlvbnNIaWRkZW5DbGFzc05hbWUgPSBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLW5hdi1vcGVyYXRpb25zLWhpZGRlblwiKTtcbiAgdmFyIHRyYW5zZm9ybU1pbiA9IDA7XG4gIHZhciB0cmFuc2Zvcm1NYXggPSAwO1xuXG4gIGlmICghdGFiUG9zaXRpb25Ub3BPckJvdHRvbSkge1xuICAgIHRyYW5zZm9ybU1pbiA9IE1hdGgubWluKDAsIHdyYXBwZXJIZWlnaHQgLSB3cmFwcGVyU2Nyb2xsSGVpZ2h0KTtcbiAgICB0cmFuc2Zvcm1NYXggPSAwO1xuICB9IGVsc2UgaWYgKHJ0bCkge1xuICAgIHRyYW5zZm9ybU1pbiA9IDA7XG4gICAgdHJhbnNmb3JtTWF4ID0gTWF0aC5tYXgoMCwgd3JhcHBlclNjcm9sbFdpZHRoIC0gd3JhcHBlcldpZHRoKTtcbiAgfSBlbHNlIHtcbiAgICB0cmFuc2Zvcm1NaW4gPSBNYXRoLm1pbigwLCB3cmFwcGVyV2lkdGggLSB3cmFwcGVyU2Nyb2xsV2lkdGgpO1xuICAgIHRyYW5zZm9ybU1heCA9IDA7XG4gIH1cblxuICBmdW5jdGlvbiBhbGlnbkluUmFuZ2UodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPCB0cmFuc2Zvcm1NaW4pIHtcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1NaW47XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlID4gdHJhbnNmb3JtTWF4KSB7XG4gICAgICByZXR1cm4gdHJhbnNmb3JtTWF4O1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09IE1vYmlsZSA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciB0b3VjaE1vdmluZ1JlZiA9IHVzZVJlZigpO1xuXG4gIHZhciBfdXNlU3RhdGUxNyA9IHVzZVN0YXRlKCksXG4gICAgICBfdXNlU3RhdGUxOCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTE3LCAyKSxcbiAgICAgIGxvY2tBbmltYXRpb24gPSBfdXNlU3RhdGUxOFswXSxcbiAgICAgIHNldExvY2tBbmltYXRpb24gPSBfdXNlU3RhdGUxOFsxXTtcblxuICBmdW5jdGlvbiBkb0xvY2tBbmltYXRpb24oKSB7XG4gICAgc2V0TG9ja0FuaW1hdGlvbihEYXRlLm5vdygpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyVG91Y2hNb3ZpbmcoKSB7XG4gICAgd2luZG93LmNsZWFyVGltZW91dCh0b3VjaE1vdmluZ1JlZi5jdXJyZW50KTtcbiAgfVxuXG4gIHVzZVRvdWNoTW92ZSh0YWJzV3JhcHBlclJlZiwgZnVuY3Rpb24gKG9mZnNldFgsIG9mZnNldFkpIHtcbiAgICBmdW5jdGlvbiBkb01vdmUoc2V0U3RhdGUsIG9mZnNldCkge1xuICAgICAgc2V0U3RhdGUoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IGFsaWduSW5SYW5nZSh2YWx1ZSArIG9mZnNldCk7XG4gICAgICAgIHJldHVybiBuZXdWYWx1ZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0YWJQb3NpdGlvblRvcE9yQm90dG9tKSB7XG4gICAgICAvLyBTa2lwIHNjcm9sbCBpZiBwbGFjZSBpcyBlbm91Z2hcbiAgICAgIGlmICh3cmFwcGVyV2lkdGggPj0gd3JhcHBlclNjcm9sbFdpZHRoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgZG9Nb3ZlKHNldFRyYW5zZm9ybUxlZnQsIG9mZnNldFgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAod3JhcHBlckhlaWdodCA+PSB3cmFwcGVyU2Nyb2xsSGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgZG9Nb3ZlKHNldFRyYW5zZm9ybVRvcCwgb2Zmc2V0WSk7XG4gICAgfVxuXG4gICAgY2xlYXJUb3VjaE1vdmluZygpO1xuICAgIGRvTG9ja0FuaW1hdGlvbigpO1xuICAgIHJldHVybiB0cnVlO1xuICB9KTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBjbGVhclRvdWNoTW92aW5nKCk7XG5cbiAgICBpZiAobG9ja0FuaW1hdGlvbikge1xuICAgICAgdG91Y2hNb3ZpbmdSZWYuY3VycmVudCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2V0TG9ja0FuaW1hdGlvbigwKTtcbiAgICAgIH0sIDEwMCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsZWFyVG91Y2hNb3Zpbmc7XG4gIH0sIFtsb2NrQW5pbWF0aW9uXSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT0gU2Nyb2xsID09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gIGZ1bmN0aW9uIHNjcm9sbFRvVGFiKCkge1xuICAgIHZhciBrZXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGFjdGl2ZUtleTtcbiAgICB2YXIgdGFiT2Zmc2V0ID0gdGFiT2Zmc2V0cy5nZXQoa2V5KSB8fCB7XG4gICAgICB3aWR0aDogMCxcbiAgICAgIGhlaWdodDogMCxcbiAgICAgIGxlZnQ6IDAsXG4gICAgICByaWdodDogMCxcbiAgICAgIHRvcDogMFxuICAgIH07XG5cbiAgICBpZiAodGFiUG9zaXRpb25Ub3BPckJvdHRvbSkge1xuICAgICAgLy8gPT09PT09PT09PT09IEFsaWduIHdpdGggdG9wICYgYm90dG9tID09PT09PT09PT09PVxuICAgICAgdmFyIG5ld1RyYW5zZm9ybSA9IHRyYW5zZm9ybUxlZnQ7IC8vIFJUTFxuXG4gICAgICBpZiAocnRsKSB7XG4gICAgICAgIGlmICh0YWJPZmZzZXQucmlnaHQgPCB0cmFuc2Zvcm1MZWZ0KSB7XG4gICAgICAgICAgbmV3VHJhbnNmb3JtID0gdGFiT2Zmc2V0LnJpZ2h0O1xuICAgICAgICB9IGVsc2UgaWYgKHRhYk9mZnNldC5yaWdodCArIHRhYk9mZnNldC53aWR0aCA+IHRyYW5zZm9ybUxlZnQgKyB3cmFwcGVyV2lkdGgpIHtcbiAgICAgICAgICBuZXdUcmFuc2Zvcm0gPSB0YWJPZmZzZXQucmlnaHQgKyB0YWJPZmZzZXQud2lkdGggLSB3cmFwcGVyV2lkdGg7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gTFRSXG4gICAgICBlbHNlIGlmICh0YWJPZmZzZXQubGVmdCA8IC10cmFuc2Zvcm1MZWZ0KSB7XG4gICAgICAgIG5ld1RyYW5zZm9ybSA9IC10YWJPZmZzZXQubGVmdDtcbiAgICAgIH0gZWxzZSBpZiAodGFiT2Zmc2V0LmxlZnQgKyB0YWJPZmZzZXQud2lkdGggPiAtdHJhbnNmb3JtTGVmdCArIHdyYXBwZXJXaWR0aCkge1xuICAgICAgICBuZXdUcmFuc2Zvcm0gPSAtKHRhYk9mZnNldC5sZWZ0ICsgdGFiT2Zmc2V0LndpZHRoIC0gd3JhcHBlcldpZHRoKTtcbiAgICAgIH1cblxuICAgICAgc2V0VHJhbnNmb3JtVG9wKDApO1xuICAgICAgc2V0VHJhbnNmb3JtTGVmdChhbGlnbkluUmFuZ2UobmV3VHJhbnNmb3JtKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vID09PT09PT09PT09PSBBbGlnbiB3aXRoIGxlZnQgJiByaWdodCA9PT09PT09PT09PT1cbiAgICAgIHZhciBfbmV3VHJhbnNmb3JtID0gdHJhbnNmb3JtVG9wO1xuXG4gICAgICBpZiAodGFiT2Zmc2V0LnRvcCA8IC10cmFuc2Zvcm1Ub3ApIHtcbiAgICAgICAgX25ld1RyYW5zZm9ybSA9IC10YWJPZmZzZXQudG9wO1xuICAgICAgfSBlbHNlIGlmICh0YWJPZmZzZXQudG9wICsgdGFiT2Zmc2V0LmhlaWdodCA+IC10cmFuc2Zvcm1Ub3AgKyB3cmFwcGVySGVpZ2h0KSB7XG4gICAgICAgIF9uZXdUcmFuc2Zvcm0gPSAtKHRhYk9mZnNldC50b3AgKyB0YWJPZmZzZXQuaGVpZ2h0IC0gd3JhcHBlckhlaWdodCk7XG4gICAgICB9XG5cbiAgICAgIHNldFRyYW5zZm9ybUxlZnQoMCk7XG4gICAgICBzZXRUcmFuc2Zvcm1Ub3AoYWxpZ25JblJhbmdlKF9uZXdUcmFuc2Zvcm0pKTtcbiAgICB9XG4gIH0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT0gVGFiID09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFJlbmRlciB0YWIgbm9kZSAmIGNvbGxlY3QgdGFiIG9mZnNldFxuXG5cbiAgdmFyIF91c2VWaXNpYmxlUmFuZ2UgPSB1c2VWaXNpYmxlUmFuZ2UodGFiT2Zmc2V0cywge1xuICAgIHdpZHRoOiB3cmFwcGVyV2lkdGgsXG4gICAgaGVpZ2h0OiB3cmFwcGVySGVpZ2h0LFxuICAgIGxlZnQ6IHRyYW5zZm9ybUxlZnQsXG4gICAgdG9wOiB0cmFuc2Zvcm1Ub3BcbiAgfSwge1xuICAgIHdpZHRoOiB3cmFwcGVyQ29udGVudFdpZHRoLFxuICAgIGhlaWdodDogd3JhcHBlckNvbnRlbnRIZWlnaHRcbiAgfSwge1xuICAgIHdpZHRoOiBhZGRXaWR0aCxcbiAgICBoZWlnaHQ6IGFkZEhlaWdodFxuICB9LCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHByb3BzKSwge30sIHtcbiAgICB0YWJzOiB0YWJzXG4gIH0pKSxcbiAgICAgIF91c2VWaXNpYmxlUmFuZ2UyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVZpc2libGVSYW5nZSwgMiksXG4gICAgICB2aXNpYmxlU3RhcnQgPSBfdXNlVmlzaWJsZVJhbmdlMlswXSxcbiAgICAgIHZpc2libGVFbmQgPSBfdXNlVmlzaWJsZVJhbmdlMlsxXTtcblxuICB2YXIgdGFiTm9kZVN0eWxlID0ge307XG5cbiAgaWYgKHRhYlBvc2l0aW9uID09PSAndG9wJyB8fCB0YWJQb3NpdGlvbiA9PT0gJ2JvdHRvbScpIHtcbiAgICB0YWJOb2RlU3R5bGVbcnRsID8gJ21hcmdpblJpZ2h0JyA6ICdtYXJnaW5MZWZ0J10gPSB0YWJCYXJHdXR0ZXI7XG4gIH0gZWxzZSB7XG4gICAgdGFiTm9kZVN0eWxlLm1hcmdpblRvcCA9IHRhYkJhckd1dHRlcjtcbiAgfVxuXG4gIHZhciB0YWJOb2RlcyA9IHRhYnMubWFwKGZ1bmN0aW9uICh0YWIsIGkpIHtcbiAgICB2YXIga2V5ID0gdGFiLmtleTtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoVGFiTm9kZSwge1xuICAgICAgaWQ6IGlkLFxuICAgICAgcHJlZml4Q2xzOiBwcmVmaXhDbHMsXG4gICAgICBrZXk6IGtleSxcbiAgICAgIHRhYjogdGFiXG4gICAgICAvKiBmaXJzdCBub2RlIHNob3VsZCBub3QgaGF2ZSBtYXJnaW4gbGVmdCAqL1xuICAgICAgLFxuICAgICAgc3R5bGU6IGkgPT09IDAgPyB1bmRlZmluZWQgOiB0YWJOb2RlU3R5bGUsXG4gICAgICBjbG9zYWJsZTogdGFiLmNsb3NhYmxlLFxuICAgICAgZWRpdGFibGU6IGVkaXRhYmxlLFxuICAgICAgYWN0aXZlOiBrZXkgPT09IGFjdGl2ZUtleSxcbiAgICAgIHJlbmRlcldyYXBwZXI6IGNoaWxkcmVuLFxuICAgICAgcmVtb3ZlQXJpYUxhYmVsOiBsb2NhbGUgPT09IG51bGwgfHwgbG9jYWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBsb2NhbGUucmVtb3ZlQXJpYUxhYmVsLFxuICAgICAgcmVmOiBnZXRCdG5SZWYoa2V5KSxcbiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICBvblRhYkNsaWNrKGtleSwgZSk7XG4gICAgICB9LFxuICAgICAgb25SZW1vdmU6IGZ1bmN0aW9uIG9uUmVtb3ZlKCkge1xuICAgICAgICByZW1vdmVCdG5SZWYoa2V5KTtcbiAgICAgIH0sXG4gICAgICBvbkZvY3VzOiBmdW5jdGlvbiBvbkZvY3VzKCkge1xuICAgICAgICBzY3JvbGxUb1RhYihrZXkpO1xuICAgICAgICBkb0xvY2tBbmltYXRpb24oKTtcblxuICAgICAgICBpZiAoIXRhYnNXcmFwcGVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gRm9jdXMgZWxlbWVudCB3aWxsIG1ha2Ugc2Nyb2xsTGVmdCBjaGFuZ2Ugd2hpY2ggd2Ugc2hvdWxkIHJlc2V0IGJhY2tcblxuXG4gICAgICAgIGlmICghcnRsKSB7XG4gICAgICAgICAgdGFic1dyYXBwZXJSZWYuY3VycmVudC5zY3JvbGxMZWZ0ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRhYnNXcmFwcGVyUmVmLmN1cnJlbnQuc2Nyb2xsVG9wID0gMDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG4gIHZhciBvbkxpc3RIb2xkZXJSZXNpemUgPSB1c2VSYWYoZnVuY3Rpb24gKCkge1xuICAgIHZhciBfdGFic1dyYXBwZXJSZWYkY3VycmUsIF90YWJzV3JhcHBlclJlZiRjdXJyZTIsIF9pbm5lckFkZEJ1dHRvblJlZiRjdSwgX2lubmVyQWRkQnV0dG9uUmVmJGN1MiwgX29wZXJhdGlvbnNSZWYkY3VycmVuLCBfb3BlcmF0aW9uc1JlZiRjdXJyZW4yLCBfdGFiTGlzdFJlZiRjdXJyZW50LCBfdGFiTGlzdFJlZiRjdXJyZW50MiwgX29wZXJhdGlvbnNSZWYkY3VycmVuMztcblxuICAgIC8vIFVwZGF0ZSB3cmFwcGVyIHJlY29yZHNcbiAgICB2YXIgb2Zmc2V0V2lkdGggPSAoKF90YWJzV3JhcHBlclJlZiRjdXJyZSA9IHRhYnNXcmFwcGVyUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF90YWJzV3JhcHBlclJlZiRjdXJyZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RhYnNXcmFwcGVyUmVmJGN1cnJlLm9mZnNldFdpZHRoKSB8fCAwO1xuICAgIHZhciBvZmZzZXRIZWlnaHQgPSAoKF90YWJzV3JhcHBlclJlZiRjdXJyZTIgPSB0YWJzV3JhcHBlclJlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCBfdGFic1dyYXBwZXJSZWYkY3VycmUyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGFic1dyYXBwZXJSZWYkY3VycmUyLm9mZnNldEhlaWdodCkgfHwgMDtcbiAgICB2YXIgbmV3QWRkV2lkdGggPSAoKF9pbm5lckFkZEJ1dHRvblJlZiRjdSA9IGlubmVyQWRkQnV0dG9uUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF9pbm5lckFkZEJ1dHRvblJlZiRjdSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2lubmVyQWRkQnV0dG9uUmVmJGN1Lm9mZnNldFdpZHRoKSB8fCAwO1xuICAgIHZhciBuZXdBZGRIZWlnaHQgPSAoKF9pbm5lckFkZEJ1dHRvblJlZiRjdTIgPSBpbm5lckFkZEJ1dHRvblJlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCBfaW5uZXJBZGRCdXR0b25SZWYkY3UyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaW5uZXJBZGRCdXR0b25SZWYkY3UyLm9mZnNldEhlaWdodCkgfHwgMDtcbiAgICB2YXIgbmV3T3BlcmF0aW9uV2lkdGggPSAoKF9vcGVyYXRpb25zUmVmJGN1cnJlbiA9IG9wZXJhdGlvbnNSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX29wZXJhdGlvbnNSZWYkY3VycmVuID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3BlcmF0aW9uc1JlZiRjdXJyZW4ub2Zmc2V0V2lkdGgpIHx8IDA7XG4gICAgdmFyIG5ld09wZXJhdGlvbkhlaWdodCA9ICgoX29wZXJhdGlvbnNSZWYkY3VycmVuMiA9IG9wZXJhdGlvbnNSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX29wZXJhdGlvbnNSZWYkY3VycmVuMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX29wZXJhdGlvbnNSZWYkY3VycmVuMi5vZmZzZXRIZWlnaHQpIHx8IDA7XG4gICAgc2V0V3JhcHBlcldpZHRoKG9mZnNldFdpZHRoKTtcbiAgICBzZXRXcmFwcGVySGVpZ2h0KG9mZnNldEhlaWdodCk7XG4gICAgc2V0QWRkV2lkdGgobmV3QWRkV2lkdGgpO1xuICAgIHNldEFkZEhlaWdodChuZXdBZGRIZWlnaHQpO1xuICAgIHZhciBuZXdXcmFwcGVyU2Nyb2xsV2lkdGggPSAoKChfdGFiTGlzdFJlZiRjdXJyZW50ID0gdGFiTGlzdFJlZi5jdXJyZW50KSA9PT0gbnVsbCB8fCBfdGFiTGlzdFJlZiRjdXJyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGFiTGlzdFJlZiRjdXJyZW50Lm9mZnNldFdpZHRoKSB8fCAwKSAtIG5ld0FkZFdpZHRoO1xuICAgIHZhciBuZXdXcmFwcGVyU2Nyb2xsSGVpZ2h0ID0gKCgoX3RhYkxpc3RSZWYkY3VycmVudDIgPSB0YWJMaXN0UmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF90YWJMaXN0UmVmJGN1cnJlbnQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGFiTGlzdFJlZiRjdXJyZW50Mi5vZmZzZXRIZWlnaHQpIHx8IDApIC0gbmV3QWRkSGVpZ2h0O1xuICAgIHNldFdyYXBwZXJTY3JvbGxXaWR0aChuZXdXcmFwcGVyU2Nyb2xsV2lkdGgpO1xuICAgIHNldFdyYXBwZXJTY3JvbGxIZWlnaHQobmV3V3JhcHBlclNjcm9sbEhlaWdodCk7XG4gICAgdmFyIGlzT3BlcmF0aW9uSGlkZGVuID0gKF9vcGVyYXRpb25zUmVmJGN1cnJlbjMgPSBvcGVyYXRpb25zUmVmLmN1cnJlbnQpID09PSBudWxsIHx8IF9vcGVyYXRpb25zUmVmJGN1cnJlbjMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcGVyYXRpb25zUmVmJGN1cnJlbjMuY2xhc3NOYW1lLmluY2x1ZGVzKG9wZXJhdGlvbnNIaWRkZW5DbGFzc05hbWUpO1xuICAgIHNldFdyYXBwZXJDb250ZW50V2lkdGgobmV3V3JhcHBlclNjcm9sbFdpZHRoIC0gKGlzT3BlcmF0aW9uSGlkZGVuID8gMCA6IG5ld09wZXJhdGlvbldpZHRoKSk7XG4gICAgc2V0V3JhcHBlckNvbnRlbnRIZWlnaHQobmV3V3JhcHBlclNjcm9sbEhlaWdodCAtIChpc09wZXJhdGlvbkhpZGRlbiA/IDAgOiBuZXdPcGVyYXRpb25IZWlnaHQpKTsgLy8gVXBkYXRlIGJ1dHRvbnMgcmVjb3Jkc1xuXG4gICAgc2V0VGFiU2l6ZXMoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG5ld1NpemVzID0gbmV3IE1hcCgpO1xuICAgICAgdGFicy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMikge1xuICAgICAgICB2YXIga2V5ID0gX3JlZjIua2V5O1xuICAgICAgICB2YXIgYnRuTm9kZSA9IGdldEJ0blJlZihrZXkpLmN1cnJlbnQ7XG5cbiAgICAgICAgaWYgKGJ0bk5vZGUpIHtcbiAgICAgICAgICBuZXdTaXplcy5zZXQoa2V5LCB7XG4gICAgICAgICAgICB3aWR0aDogYnRuTm9kZS5vZmZzZXRXaWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogYnRuTm9kZS5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgICBsZWZ0OiBidG5Ob2RlLm9mZnNldExlZnQsXG4gICAgICAgICAgICB0b3A6IGJ0bk5vZGUub2Zmc2V0VG9wXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5ld1NpemVzO1xuICAgIH0pO1xuICB9KTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09IERyb3Bkb3duID09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIHN0YXJ0SGlkZGVuVGFicyA9IHRhYnMuc2xpY2UoMCwgdmlzaWJsZVN0YXJ0KTtcbiAgdmFyIGVuZEhpZGRlblRhYnMgPSB0YWJzLnNsaWNlKHZpc2libGVFbmQgKyAxKTtcbiAgdmFyIGhpZGRlblRhYnMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHN0YXJ0SGlkZGVuVGFicyksIF90b0NvbnN1bWFibGVBcnJheShlbmRIaWRkZW5UYWJzKSk7IC8vID09PT09PT09PT09PT09PT09PT0gTGluayAmIE9wZXJhdGlvbnMgPT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBfdXNlU3RhdGUxOSA9IHVzZVN0YXRlKCksXG4gICAgICBfdXNlU3RhdGUyMCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTE5LCAyKSxcbiAgICAgIGlua1N0eWxlID0gX3VzZVN0YXRlMjBbMF0sXG4gICAgICBzZXRJbmtTdHlsZSA9IF91c2VTdGF0ZTIwWzFdO1xuXG4gIHZhciBhY3RpdmVUYWJPZmZzZXQgPSB0YWJPZmZzZXRzLmdldChhY3RpdmVLZXkpOyAvLyBEZWxheSBzZXQgaW5rIHN0eWxlIHRvIGF2b2lkIHJlbW92ZSB0YWIgYmxpbmtcblxuICB2YXIgaW5rQmFyUmFmUmVmID0gdXNlUmVmKCk7XG5cbiAgZnVuY3Rpb24gY2xlYW5JbmtCYXJSYWYoKSB7XG4gICAgcmFmLmNhbmNlbChpbmtCYXJSYWZSZWYuY3VycmVudCk7XG4gIH1cblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZhciBuZXdJbmtTdHlsZSA9IHt9O1xuXG4gICAgaWYgKGFjdGl2ZVRhYk9mZnNldCkge1xuICAgICAgaWYgKHRhYlBvc2l0aW9uVG9wT3JCb3R0b20pIHtcbiAgICAgICAgaWYgKHJ0bCkge1xuICAgICAgICAgIG5ld0lua1N0eWxlLnJpZ2h0ID0gYWN0aXZlVGFiT2Zmc2V0LnJpZ2h0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld0lua1N0eWxlLmxlZnQgPSBhY3RpdmVUYWJPZmZzZXQubGVmdDtcbiAgICAgICAgfVxuXG4gICAgICAgIG5ld0lua1N0eWxlLndpZHRoID0gYWN0aXZlVGFiT2Zmc2V0LndpZHRoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3SW5rU3R5bGUudG9wID0gYWN0aXZlVGFiT2Zmc2V0LnRvcDtcbiAgICAgICAgbmV3SW5rU3R5bGUuaGVpZ2h0ID0gYWN0aXZlVGFiT2Zmc2V0LmhlaWdodDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjbGVhbklua0JhclJhZigpO1xuICAgIGlua0JhclJhZlJlZi5jdXJyZW50ID0gcmFmKGZ1bmN0aW9uICgpIHtcbiAgICAgIHNldElua1N0eWxlKG5ld0lua1N0eWxlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gY2xlYW5JbmtCYXJSYWY7XG4gIH0sIFthY3RpdmVUYWJPZmZzZXQsIHRhYlBvc2l0aW9uVG9wT3JCb3R0b20sIHJ0bF0pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09IEVmZmVjdCA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHNjcm9sbFRvVGFiKCk7XG4gIH0sIFthY3RpdmVLZXksIGFjdGl2ZVRhYk9mZnNldCwgdGFiT2Zmc2V0cywgdGFiUG9zaXRpb25Ub3BPckJvdHRvbV0pOyAvLyBTaG91bGQgcmVjYWxjdWxhdGUgd2hlbiBydGwgY2hhbmdlZFxuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgb25MaXN0SG9sZGVyUmVzaXplKCk7XG4gIH0sIFtydGwsIHRhYkJhckd1dHRlciwgYWN0aXZlS2V5LCB0YWJzLm1hcChmdW5jdGlvbiAodGFiKSB7XG4gICAgcmV0dXJuIHRhYi5rZXk7XG4gIH0pLmpvaW4oJ18nKV0pOyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09IFJlbmRlciA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuICB2YXIgaGFzRHJvcGRvd24gPSAhIWhpZGRlblRhYnMubGVuZ3RoO1xuICB2YXIgd3JhcFByZWZpeCA9IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItbmF2LXdyYXBcIik7XG4gIHZhciBwaW5nTGVmdDtcbiAgdmFyIHBpbmdSaWdodDtcbiAgdmFyIHBpbmdUb3A7XG4gIHZhciBwaW5nQm90dG9tO1xuXG4gIGlmICh0YWJQb3NpdGlvblRvcE9yQm90dG9tKSB7XG4gICAgaWYgKHJ0bCkge1xuICAgICAgcGluZ1JpZ2h0ID0gdHJhbnNmb3JtTGVmdCA+IDA7XG4gICAgICBwaW5nTGVmdCA9IHRyYW5zZm9ybUxlZnQgKyB3cmFwcGVyV2lkdGggPCB3cmFwcGVyU2Nyb2xsV2lkdGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBpbmdMZWZ0ID0gdHJhbnNmb3JtTGVmdCA8IDA7XG4gICAgICBwaW5nUmlnaHQgPSAtdHJhbnNmb3JtTGVmdCArIHdyYXBwZXJXaWR0aCA8IHdyYXBwZXJTY3JvbGxXaWR0aDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcGluZ1RvcCA9IHRyYW5zZm9ybVRvcCA8IDA7XG4gICAgcGluZ0JvdHRvbSA9IC10cmFuc2Zvcm1Ub3AgKyB3cmFwcGVySGVpZ2h0IDwgd3JhcHBlclNjcm9sbEhlaWdodDtcbiAgfVxuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgcmVmOiByZWYsXG4gICAgcm9sZTogXCJ0YWJsaXN0XCIsXG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiXCIuY29uY2F0KHByZWZpeENscywgXCItbmF2XCIpLCBjbGFzc05hbWUpLFxuICAgIHN0eWxlOiBzdHlsZSxcbiAgICBvbktleURvd246IGZ1bmN0aW9uIG9uS2V5RG93bigpIHtcbiAgICAgIC8vIE5vIG5lZWQgYW5pbWF0aW9uIHdoZW4gdXNlIGtleWJvYXJkXG4gICAgICBkb0xvY2tBbmltYXRpb24oKTtcbiAgICB9XG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEV4dHJhQ29udGVudCwge1xuICAgIHBvc2l0aW9uOiBcImxlZnRcIixcbiAgICBleHRyYTogZXh0cmEsXG4gICAgcHJlZml4Q2xzOiBwcmVmaXhDbHNcbiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlc2l6ZU9ic2VydmVyLCB7XG4gICAgb25SZXNpemU6IG9uTGlzdEhvbGRlclJlc2l6ZVxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKHdyYXBQcmVmaXgsIChfY2xhc3NOYW1lcyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KHdyYXBQcmVmaXgsIFwiLXBpbmctbGVmdFwiKSwgcGluZ0xlZnQpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KHdyYXBQcmVmaXgsIFwiLXBpbmctcmlnaHRcIiksIHBpbmdSaWdodCksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQod3JhcFByZWZpeCwgXCItcGluZy10b3BcIiksIHBpbmdUb3ApLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KHdyYXBQcmVmaXgsIFwiLXBpbmctYm90dG9tXCIpLCBwaW5nQm90dG9tKSwgX2NsYXNzTmFtZXMpKSxcbiAgICByZWY6IHRhYnNXcmFwcGVyUmVmXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlc2l6ZU9ic2VydmVyLCB7XG4gICAgb25SZXNpemU6IG9uTGlzdEhvbGRlclJlc2l6ZVxuICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgcmVmOiB0YWJMaXN0UmVmLFxuICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1uYXYtbGlzdFwiKSxcbiAgICBzdHlsZToge1xuICAgICAgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZShcIi5jb25jYXQodHJhbnNmb3JtTGVmdCwgXCJweCwgXCIpLmNvbmNhdCh0cmFuc2Zvcm1Ub3AsIFwicHgpXCIpLFxuICAgICAgdHJhbnNpdGlvbjogbG9ja0FuaW1hdGlvbiA/ICdub25lJyA6IHVuZGVmaW5lZFxuICAgIH1cbiAgfSwgdGFiTm9kZXMsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEFkZEJ1dHRvbiwge1xuICAgIHJlZjogaW5uZXJBZGRCdXR0b25SZWYsXG4gICAgcHJlZml4Q2xzOiBwcmVmaXhDbHMsXG4gICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgZWRpdGFibGU6IGVkaXRhYmxlLFxuICAgIHN0eWxlOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRhYk5vZGVzLmxlbmd0aCA9PT0gMCA/IHVuZGVmaW5lZCA6IHRhYk5vZGVTdHlsZSksIHt9LCB7XG4gICAgICB2aXNpYmlsaXR5OiBoYXNEcm9wZG93biA/ICdoaWRkZW4nIDogbnVsbFxuICAgIH0pXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiXCIuY29uY2F0KHByZWZpeENscywgXCItaW5rLWJhclwiKSwgX2RlZmluZVByb3BlcnR5KHt9LCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWluay1iYXItYW5pbWF0ZWRcIiksIGFuaW1hdGVkLmlua0JhcikpLFxuICAgIHN0eWxlOiBpbmtTdHlsZVxuICB9KSkpKSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KE9wZXJhdGlvbk5vZGUsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIHJlZjogb3BlcmF0aW9uc1JlZixcbiAgICBwcmVmaXhDbHM6IHByZWZpeENscyxcbiAgICB0YWJzOiBoaWRkZW5UYWJzLFxuICAgIGNsYXNzTmFtZTogIWhhc0Ryb3Bkb3duICYmIG9wZXJhdGlvbnNIaWRkZW5DbGFzc05hbWVcbiAgfSkpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChFeHRyYUNvbnRlbnQsIHtcbiAgICBwb3NpdGlvbjogXCJyaWdodFwiLFxuICAgIGV4dHJhOiBleHRyYSxcbiAgICBwcmVmaXhDbHM6IHByZWZpeENsc1xuICB9KSk7XG4gIC8qIGVzbGludC1lbmFibGUgKi9cbn1cblxuZXhwb3J0IGRlZmF1bHQgLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoVGFiTmF2TGlzdCk7IiwiaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IFRhYkNvbnRleHQgZnJvbSAnLi4vVGFiQ29udGV4dCc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBUYWJQYW5lbExpc3QoX3JlZikge1xuICB2YXIgaWQgPSBfcmVmLmlkLFxuICAgICAgYWN0aXZlS2V5ID0gX3JlZi5hY3RpdmVLZXksXG4gICAgICBhbmltYXRlZCA9IF9yZWYuYW5pbWF0ZWQsXG4gICAgICB0YWJQb3NpdGlvbiA9IF9yZWYudGFiUG9zaXRpb24sXG4gICAgICBydGwgPSBfcmVmLnJ0bCxcbiAgICAgIGRlc3Ryb3lJbmFjdGl2ZVRhYlBhbmUgPSBfcmVmLmRlc3Ryb3lJbmFjdGl2ZVRhYlBhbmU7XG5cbiAgdmFyIF9SZWFjdCR1c2VDb250ZXh0ID0gUmVhY3QudXNlQ29udGV4dChUYWJDb250ZXh0KSxcbiAgICAgIHByZWZpeENscyA9IF9SZWFjdCR1c2VDb250ZXh0LnByZWZpeENscyxcbiAgICAgIHRhYnMgPSBfUmVhY3QkdXNlQ29udGV4dC50YWJzO1xuXG4gIHZhciB0YWJQYW5lQW5pbWF0ZWQgPSBhbmltYXRlZC50YWJQYW5lO1xuICB2YXIgYWN0aXZlSW5kZXggPSB0YWJzLmZpbmRJbmRleChmdW5jdGlvbiAodGFiKSB7XG4gICAgcmV0dXJuIHRhYi5rZXkgPT09IGFjdGl2ZUtleTtcbiAgfSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiXCIuY29uY2F0KHByZWZpeENscywgXCItY29udGVudC1ob2xkZXJcIikpXG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1jb250ZW50XCIpLCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWNvbnRlbnQtXCIpLmNvbmNhdCh0YWJQb3NpdGlvbiksIF9kZWZpbmVQcm9wZXJ0eSh7fSwgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1jb250ZW50LWFuaW1hdGVkXCIpLCB0YWJQYW5lQW5pbWF0ZWQpKSxcbiAgICBzdHlsZTogYWN0aXZlSW5kZXggJiYgdGFiUGFuZUFuaW1hdGVkID8gX2RlZmluZVByb3BlcnR5KHt9LCBydGwgPyAnbWFyZ2luUmlnaHQnIDogJ21hcmdpbkxlZnQnLCBcIi1cIi5jb25jYXQoYWN0aXZlSW5kZXgsIFwiMDAlXCIpKSA6IG51bGxcbiAgfSwgdGFicy5tYXAoZnVuY3Rpb24gKHRhYikge1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY2xvbmVFbGVtZW50KHRhYi5ub2RlLCB7XG4gICAgICBrZXk6IHRhYi5rZXksXG4gICAgICBwcmVmaXhDbHM6IHByZWZpeENscyxcbiAgICAgIHRhYktleTogdGFiLmtleSxcbiAgICAgIGlkOiBpZCxcbiAgICAgIGFuaW1hdGVkOiB0YWJQYW5lQW5pbWF0ZWQsXG4gICAgICBhY3RpdmU6IHRhYi5rZXkgPT09IGFjdGl2ZUtleSxcbiAgICAgIGRlc3Ryb3lJbmFjdGl2ZVRhYlBhbmU6IGRlc3Ryb3lJbmFjdGl2ZVRhYlBhbmVcbiAgICB9KTtcbiAgfSkpKTtcbn0iLCJpbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFRhYlBhbmUoX3JlZikge1xuICB2YXIgcHJlZml4Q2xzID0gX3JlZi5wcmVmaXhDbHMsXG4gICAgICBmb3JjZVJlbmRlciA9IF9yZWYuZm9yY2VSZW5kZXIsXG4gICAgICBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZSxcbiAgICAgIHN0eWxlID0gX3JlZi5zdHlsZSxcbiAgICAgIGlkID0gX3JlZi5pZCxcbiAgICAgIGFjdGl2ZSA9IF9yZWYuYWN0aXZlLFxuICAgICAgYW5pbWF0ZWQgPSBfcmVmLmFuaW1hdGVkLFxuICAgICAgZGVzdHJveUluYWN0aXZlVGFiUGFuZSA9IF9yZWYuZGVzdHJveUluYWN0aXZlVGFiUGFuZSxcbiAgICAgIHRhYktleSA9IF9yZWYudGFiS2V5LFxuICAgICAgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuO1xuXG4gIHZhciBfUmVhY3QkdXNlU3RhdGUgPSBSZWFjdC51c2VTdGF0ZShmb3JjZVJlbmRlciksXG4gICAgICBfUmVhY3QkdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX1JlYWN0JHVzZVN0YXRlLCAyKSxcbiAgICAgIHZpc2l0ZWQgPSBfUmVhY3QkdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0VmlzaXRlZCA9IF9SZWFjdCR1c2VTdGF0ZTJbMV07XG5cbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoYWN0aXZlKSB7XG4gICAgICBzZXRWaXNpdGVkKHRydWUpO1xuICAgIH0gZWxzZSBpZiAoZGVzdHJveUluYWN0aXZlVGFiUGFuZSkge1xuICAgICAgc2V0VmlzaXRlZChmYWxzZSk7XG4gICAgfVxuICB9LCBbYWN0aXZlLCBkZXN0cm95SW5hY3RpdmVUYWJQYW5lXSk7XG4gIHZhciBtZXJnZWRTdHlsZSA9IHt9O1xuXG4gIGlmICghYWN0aXZlKSB7XG4gICAgaWYgKGFuaW1hdGVkKSB7XG4gICAgICBtZXJnZWRTdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICBtZXJnZWRTdHlsZS5oZWlnaHQgPSAwO1xuICAgICAgbWVyZ2VkU3R5bGUub3ZlcmZsb3dZID0gJ2hpZGRlbic7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lcmdlZFN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICBpZDogaWQgJiYgXCJcIi5jb25jYXQoaWQsIFwiLXBhbmVsLVwiKS5jb25jYXQodGFiS2V5KSxcbiAgICByb2xlOiBcInRhYnBhbmVsXCIsXG4gICAgdGFiSW5kZXg6IGFjdGl2ZSA/IDAgOiAtMSxcbiAgICBcImFyaWEtbGFiZWxsZWRieVwiOiBpZCAmJiBcIlwiLmNvbmNhdChpZCwgXCItdGFiLVwiKS5jb25jYXQodGFiS2V5KSxcbiAgICBcImFyaWEtaGlkZGVuXCI6ICFhY3RpdmUsXG4gICAgc3R5bGU6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWVyZ2VkU3R5bGUpLCBzdHlsZSksXG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKFwiXCIuY29uY2F0KHByZWZpeENscywgXCItdGFicGFuZVwiKSwgYWN0aXZlICYmIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItdGFicGFuZS1hY3RpdmVcIiksIGNsYXNzTmFtZSlcbiAgfSwgKGFjdGl2ZSB8fCB2aXNpdGVkIHx8IGZvcmNlUmVuZGVyKSAmJiBjaGlsZHJlbik7XG59IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG5pbXBvcnQgX3R5cGVvZiBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc1wiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbnZhciBfZXhjbHVkZWQgPSBbXCJpZFwiLCBcInByZWZpeENsc1wiLCBcImNsYXNzTmFtZVwiLCBcImNoaWxkcmVuXCIsIFwiZGlyZWN0aW9uXCIsIFwiYWN0aXZlS2V5XCIsIFwiZGVmYXVsdEFjdGl2ZUtleVwiLCBcImVkaXRhYmxlXCIsIFwiYW5pbWF0ZWRcIiwgXCJ0YWJQb3NpdGlvblwiLCBcInRhYkJhckd1dHRlclwiLCBcInRhYkJhclN0eWxlXCIsIFwidGFiQmFyRXh0cmFDb250ZW50XCIsIFwibG9jYWxlXCIsIFwibW9yZUljb25cIiwgXCJtb3JlVHJhbnNpdGlvbk5hbWVcIiwgXCJkZXN0cm95SW5hY3RpdmVUYWJQYW5lXCIsIFwicmVuZGVyVGFiQmFyXCIsIFwib25DaGFuZ2VcIiwgXCJvblRhYkNsaWNrXCIsIFwib25UYWJTY3JvbGxcIl07XG4vLyBBY2Nlc3NpYmlsaXR5IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FjY2Vzc2liaWxpdHkvQVJJQS9Sb2xlcy9UYWJfUm9sZVxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHRvQXJyYXkgZnJvbSBcInJjLXV0aWwvZXMvQ2hpbGRyZW4vdG9BcnJheVwiO1xuaW1wb3J0IGlzTW9iaWxlIGZyb20gXCJyYy11dGlsL2VzL2lzTW9iaWxlXCI7XG5pbXBvcnQgdXNlTWVyZ2VkU3RhdGUgZnJvbSBcInJjLXV0aWwvZXMvaG9va3MvdXNlTWVyZ2VkU3RhdGVcIjtcbmltcG9ydCBUYWJOYXZMaXN0IGZyb20gJy4vVGFiTmF2TGlzdCc7XG5pbXBvcnQgVGFiUGFuZWxMaXN0IGZyb20gJy4vVGFiUGFuZWxMaXN0JztcbmltcG9ydCBUYWJQYW5lIGZyb20gJy4vVGFiUGFuZWxMaXN0L1RhYlBhbmUnO1xuaW1wb3J0IFRhYkNvbnRleHQgZnJvbSAnLi9UYWJDb250ZXh0Jztcbi8qKlxuICogU2hvdWxkIGFkZGVkIGFudGQ6XG4gKiAtIHR5cGVcbiAqXG4gKiBSZW1vdmVkOlxuICogLSBvbk5leHRDbGlja1xuICogLSBvblByZXZDbGlja1xuICogLSBrZXlib2FyZFxuICovXG4vLyBVc2VkIGZvciBhY2Nlc3NpYmlsaXR5XG5cbnZhciB1dWlkID0gMDtcblxuZnVuY3Rpb24gcGFyc2VUYWJMaXN0KGNoaWxkcmVuKSB7XG4gIHJldHVybiB0b0FycmF5KGNoaWxkcmVuKS5tYXAoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICBpZiAoIC8qI19fUFVSRV9fKi9SZWFjdC5pc1ZhbGlkRWxlbWVudChub2RlKSkge1xuICAgICAgdmFyIGtleSA9IG5vZGUua2V5ICE9PSB1bmRlZmluZWQgPyBTdHJpbmcobm9kZS5rZXkpIDogdW5kZWZpbmVkO1xuICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7XG4gICAgICAgIGtleToga2V5XG4gICAgICB9LCBub2RlLnByb3BzKSwge30sIHtcbiAgICAgICAgbm9kZTogbm9kZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH0pLmZpbHRlcihmdW5jdGlvbiAodGFiKSB7XG4gICAgcmV0dXJuIHRhYjtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIFRhYnMoX3JlZiwgcmVmKSB7XG4gIHZhciBfY2xhc3NOYW1lcztcblxuICB2YXIgaWQgPSBfcmVmLmlkLFxuICAgICAgX3JlZiRwcmVmaXhDbHMgPSBfcmVmLnByZWZpeENscyxcbiAgICAgIHByZWZpeENscyA9IF9yZWYkcHJlZml4Q2xzID09PSB2b2lkIDAgPyAncmMtdGFicycgOiBfcmVmJHByZWZpeENscyxcbiAgICAgIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuLFxuICAgICAgZGlyZWN0aW9uID0gX3JlZi5kaXJlY3Rpb24sXG4gICAgICBhY3RpdmVLZXkgPSBfcmVmLmFjdGl2ZUtleSxcbiAgICAgIGRlZmF1bHRBY3RpdmVLZXkgPSBfcmVmLmRlZmF1bHRBY3RpdmVLZXksXG4gICAgICBlZGl0YWJsZSA9IF9yZWYuZWRpdGFibGUsXG4gICAgICBfcmVmJGFuaW1hdGVkID0gX3JlZi5hbmltYXRlZCxcbiAgICAgIGFuaW1hdGVkID0gX3JlZiRhbmltYXRlZCA9PT0gdm9pZCAwID8ge1xuICAgIGlua0JhcjogdHJ1ZSxcbiAgICB0YWJQYW5lOiBmYWxzZVxuICB9IDogX3JlZiRhbmltYXRlZCxcbiAgICAgIF9yZWYkdGFiUG9zaXRpb24gPSBfcmVmLnRhYlBvc2l0aW9uLFxuICAgICAgdGFiUG9zaXRpb24gPSBfcmVmJHRhYlBvc2l0aW9uID09PSB2b2lkIDAgPyAndG9wJyA6IF9yZWYkdGFiUG9zaXRpb24sXG4gICAgICB0YWJCYXJHdXR0ZXIgPSBfcmVmLnRhYkJhckd1dHRlcixcbiAgICAgIHRhYkJhclN0eWxlID0gX3JlZi50YWJCYXJTdHlsZSxcbiAgICAgIHRhYkJhckV4dHJhQ29udGVudCA9IF9yZWYudGFiQmFyRXh0cmFDb250ZW50LFxuICAgICAgbG9jYWxlID0gX3JlZi5sb2NhbGUsXG4gICAgICBtb3JlSWNvbiA9IF9yZWYubW9yZUljb24sXG4gICAgICBtb3JlVHJhbnNpdGlvbk5hbWUgPSBfcmVmLm1vcmVUcmFuc2l0aW9uTmFtZSxcbiAgICAgIGRlc3Ryb3lJbmFjdGl2ZVRhYlBhbmUgPSBfcmVmLmRlc3Ryb3lJbmFjdGl2ZVRhYlBhbmUsXG4gICAgICByZW5kZXJUYWJCYXIgPSBfcmVmLnJlbmRlclRhYkJhcixcbiAgICAgIG9uQ2hhbmdlID0gX3JlZi5vbkNoYW5nZSxcbiAgICAgIG9uVGFiQ2xpY2sgPSBfcmVmLm9uVGFiQ2xpY2ssXG4gICAgICBvblRhYlNjcm9sbCA9IF9yZWYub25UYWJTY3JvbGwsXG4gICAgICByZXN0UHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZiwgX2V4Y2x1ZGVkKTtcblxuICB2YXIgdGFicyA9IHBhcnNlVGFiTGlzdChjaGlsZHJlbik7XG4gIHZhciBydGwgPSBkaXJlY3Rpb24gPT09ICdydGwnO1xuICB2YXIgbWVyZ2VkQW5pbWF0ZWQ7XG5cbiAgaWYgKGFuaW1hdGVkID09PSBmYWxzZSkge1xuICAgIG1lcmdlZEFuaW1hdGVkID0ge1xuICAgICAgaW5rQmFyOiBmYWxzZSxcbiAgICAgIHRhYlBhbmU6IGZhbHNlXG4gICAgfTtcbiAgfSBlbHNlIGlmIChhbmltYXRlZCA9PT0gdHJ1ZSkge1xuICAgIG1lcmdlZEFuaW1hdGVkID0ge1xuICAgICAgaW5rQmFyOiB0cnVlLFxuICAgICAgdGFiUGFuZTogdHJ1ZVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgbWVyZ2VkQW5pbWF0ZWQgPSBfb2JqZWN0U3ByZWFkKHtcbiAgICAgIGlua0JhcjogdHJ1ZSxcbiAgICAgIHRhYlBhbmU6IGZhbHNlXG4gICAgfSwgX3R5cGVvZihhbmltYXRlZCkgPT09ICdvYmplY3QnID8gYW5pbWF0ZWQgOiB7fSk7XG4gIH0gLy8gPT09PT09PT09PT09PT09PT09PT09PT09IE1vYmlsZSA9PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShmYWxzZSksXG4gICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIG1vYmlsZSA9IF91c2VTdGF0ZTJbMF0sXG4gICAgICBzZXRNb2JpbGUgPSBfdXNlU3RhdGUyWzFdO1xuXG4gIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgLy8gT25seSB1cGRhdGUgb24gdGhlIGNsaWVudCBzaWRlXG4gICAgc2V0TW9iaWxlKGlzTW9iaWxlKCkpO1xuICB9LCBbXSk7IC8vID09PT09PT09PT09PT09PT09PT09PT0gQWN0aXZlIEtleSA9PT09PT09PT09PT09PT09PT09PT09XG5cbiAgdmFyIF91c2VNZXJnZWRTdGF0ZSA9IHVzZU1lcmdlZFN0YXRlKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3RhYnMkO1xuXG4gICAgcmV0dXJuIChfdGFicyQgPSB0YWJzWzBdKSA9PT0gbnVsbCB8fCBfdGFicyQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90YWJzJC5rZXk7XG4gIH0sIHtcbiAgICB2YWx1ZTogYWN0aXZlS2V5LFxuICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdEFjdGl2ZUtleVxuICB9KSxcbiAgICAgIF91c2VNZXJnZWRTdGF0ZTIgPSBfc2xpY2VkVG9BcnJheShfdXNlTWVyZ2VkU3RhdGUsIDIpLFxuICAgICAgbWVyZ2VkQWN0aXZlS2V5ID0gX3VzZU1lcmdlZFN0YXRlMlswXSxcbiAgICAgIHNldE1lcmdlZEFjdGl2ZUtleSA9IF91c2VNZXJnZWRTdGF0ZTJbMV07XG5cbiAgdmFyIF91c2VTdGF0ZTMgPSB1c2VTdGF0ZShmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRhYnMuZmluZEluZGV4KGZ1bmN0aW9uICh0YWIpIHtcbiAgICAgIHJldHVybiB0YWIua2V5ID09PSBtZXJnZWRBY3RpdmVLZXk7XG4gICAgfSk7XG4gIH0pLFxuICAgICAgX3VzZVN0YXRlNCA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZTMsIDIpLFxuICAgICAgYWN0aXZlSW5kZXggPSBfdXNlU3RhdGU0WzBdLFxuICAgICAgc2V0QWN0aXZlSW5kZXggPSBfdXNlU3RhdGU0WzFdOyAvLyBSZXNldCBhY3RpdmUga2V5IGlmIG5vdCBleGlzdCBhbnltb3JlXG5cblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHZhciBuZXdBY3RpdmVJbmRleCA9IHRhYnMuZmluZEluZGV4KGZ1bmN0aW9uICh0YWIpIHtcbiAgICAgIHJldHVybiB0YWIua2V5ID09PSBtZXJnZWRBY3RpdmVLZXk7XG4gICAgfSk7XG5cbiAgICBpZiAobmV3QWN0aXZlSW5kZXggPT09IC0xKSB7XG4gICAgICB2YXIgX3RhYnMkbmV3QWN0aXZlSW5kZXg7XG5cbiAgICAgIG5ld0FjdGl2ZUluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oYWN0aXZlSW5kZXgsIHRhYnMubGVuZ3RoIC0gMSkpO1xuICAgICAgc2V0TWVyZ2VkQWN0aXZlS2V5KChfdGFicyRuZXdBY3RpdmVJbmRleCA9IHRhYnNbbmV3QWN0aXZlSW5kZXhdKSA9PT0gbnVsbCB8fCBfdGFicyRuZXdBY3RpdmVJbmRleCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RhYnMkbmV3QWN0aXZlSW5kZXgua2V5KTtcbiAgICB9XG5cbiAgICBzZXRBY3RpdmVJbmRleChuZXdBY3RpdmVJbmRleCk7XG4gIH0sIFt0YWJzLm1hcChmdW5jdGlvbiAodGFiKSB7XG4gICAgcmV0dXJuIHRhYi5rZXk7XG4gIH0pLmpvaW4oJ18nKSwgbWVyZ2VkQWN0aXZlS2V5LCBhY3RpdmVJbmRleF0pOyAvLyA9PT09PT09PT09PT09PT09PT09PT0gQWNjZXNzaWJpbGl0eSA9PT09PT09PT09PT09PT09PT09PVxuXG4gIHZhciBfdXNlTWVyZ2VkU3RhdGUzID0gdXNlTWVyZ2VkU3RhdGUobnVsbCwge1xuICAgIHZhbHVlOiBpZFxuICB9KSxcbiAgICAgIF91c2VNZXJnZWRTdGF0ZTQgPSBfc2xpY2VkVG9BcnJheShfdXNlTWVyZ2VkU3RhdGUzLCAyKSxcbiAgICAgIG1lcmdlZElkID0gX3VzZU1lcmdlZFN0YXRlNFswXSxcbiAgICAgIHNldE1lcmdlZElkID0gX3VzZU1lcmdlZFN0YXRlNFsxXTtcblxuICB2YXIgbWVyZ2VkVGFiUG9zaXRpb24gPSB0YWJQb3NpdGlvbjtcblxuICBpZiAobW9iaWxlICYmICFbJ2xlZnQnLCAncmlnaHQnXS5pbmNsdWRlcyh0YWJQb3NpdGlvbikpIHtcbiAgICBtZXJnZWRUYWJQb3NpdGlvbiA9ICd0b3AnO1xuICB9IC8vIEFzeW5jIGdlbmVyYXRlIGlkIHRvIGF2b2lkIHNzciBtYXBwaW5nIGZhaWxlZFxuXG5cbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWlkKSB7XG4gICAgICBzZXRNZXJnZWRJZChcInJjLXRhYnMtXCIuY29uY2F0KHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcgPyAndGVzdCcgOiB1dWlkKSk7XG4gICAgICB1dWlkICs9IDE7XG4gICAgfVxuICB9LCBbXSk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PSBFdmVudHMgPT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgZnVuY3Rpb24gb25JbnRlcm5hbFRhYkNsaWNrKGtleSwgZSkge1xuICAgIG9uVGFiQ2xpY2sgPT09IG51bGwgfHwgb25UYWJDbGljayA9PT0gdm9pZCAwID8gdm9pZCAwIDogb25UYWJDbGljayhrZXksIGUpO1xuICAgIHNldE1lcmdlZEFjdGl2ZUtleShrZXkpO1xuICAgIG9uQ2hhbmdlID09PSBudWxsIHx8IG9uQ2hhbmdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvbkNoYW5nZShrZXkpO1xuICB9IC8vID09PT09PT09PT09PT09PT09PT09PT09PSBSZW5kZXIgPT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICB2YXIgc2hhcmVkUHJvcHMgPSB7XG4gICAgaWQ6IG1lcmdlZElkLFxuICAgIGFjdGl2ZUtleTogbWVyZ2VkQWN0aXZlS2V5LFxuICAgIGFuaW1hdGVkOiBtZXJnZWRBbmltYXRlZCxcbiAgICB0YWJQb3NpdGlvbjogbWVyZ2VkVGFiUG9zaXRpb24sXG4gICAgcnRsOiBydGwsXG4gICAgbW9iaWxlOiBtb2JpbGVcbiAgfTtcbiAgdmFyIHRhYk5hdkJhcjtcblxuICB2YXIgdGFiTmF2QmFyUHJvcHMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHNoYXJlZFByb3BzKSwge30sIHtcbiAgICBlZGl0YWJsZTogZWRpdGFibGUsXG4gICAgbG9jYWxlOiBsb2NhbGUsXG4gICAgbW9yZUljb246IG1vcmVJY29uLFxuICAgIG1vcmVUcmFuc2l0aW9uTmFtZTogbW9yZVRyYW5zaXRpb25OYW1lLFxuICAgIHRhYkJhckd1dHRlcjogdGFiQmFyR3V0dGVyLFxuICAgIG9uVGFiQ2xpY2s6IG9uSW50ZXJuYWxUYWJDbGljayxcbiAgICBvblRhYlNjcm9sbDogb25UYWJTY3JvbGwsXG4gICAgZXh0cmE6IHRhYkJhckV4dHJhQ29udGVudCxcbiAgICBzdHlsZTogdGFiQmFyU3R5bGUsXG4gICAgcGFuZXM6IGNoaWxkcmVuXG4gIH0pO1xuXG4gIGlmIChyZW5kZXJUYWJCYXIpIHtcbiAgICB0YWJOYXZCYXIgPSByZW5kZXJUYWJCYXIodGFiTmF2QmFyUHJvcHMsIFRhYk5hdkxpc3QpO1xuICB9IGVsc2Uge1xuICAgIHRhYk5hdkJhciA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRhYk5hdkxpc3QsIHRhYk5hdkJhclByb3BzKTtcbiAgfVxuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUYWJDb250ZXh0LlByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IHtcbiAgICAgIHRhYnM6IHRhYnMsXG4gICAgICBwcmVmaXhDbHM6IHByZWZpeENsc1xuICAgIH1cbiAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX2V4dGVuZHMoe1xuICAgIHJlZjogcmVmLFxuICAgIGlkOiBpZCxcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMocHJlZml4Q2xzLCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLVwiKS5jb25jYXQobWVyZ2VkVGFiUG9zaXRpb24pLCAoX2NsYXNzTmFtZXMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLW1vYmlsZVwiKSwgbW9iaWxlKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLWVkaXRhYmxlXCIpLCBlZGl0YWJsZSksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1ydGxcIiksIHJ0bCksIF9jbGFzc05hbWVzKSwgY2xhc3NOYW1lKVxuICB9LCByZXN0UHJvcHMpLCB0YWJOYXZCYXIsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRhYlBhbmVsTGlzdCwgX2V4dGVuZHMoe1xuICAgIGRlc3Ryb3lJbmFjdGl2ZVRhYlBhbmU6IGRlc3Ryb3lJbmFjdGl2ZVRhYlBhbmVcbiAgfSwgc2hhcmVkUHJvcHMsIHtcbiAgICBhbmltYXRlZDogbWVyZ2VkQW5pbWF0ZWRcbiAgfSkpKSk7XG59XG5cbnZhciBGb3J3YXJkVGFicyA9IC8qI19fUFVSRV9fKi9SZWFjdC5mb3J3YXJkUmVmKFRhYnMpO1xuRm9yd2FyZFRhYnMuVGFiUGFuZSA9IFRhYlBhbmU7XG5leHBvcnQgZGVmYXVsdCBGb3J3YXJkVGFiczsiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmV4cG9ydCB2YXIgTWluaVN0b3JlQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQobnVsbCk7XG52YXIgUHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFByb3ZpZGVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIFByb3ZpZGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChNaW5pU3RvcmVDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiB0aGlzLnByb3BzLnN0b3JlIH0sIHRoaXMucHJvcHMuY2hpbGRyZW4pKTtcbiAgICB9O1xuICAgIHJldHVybiBQcm92aWRlcjtcbn0oUmVhY3QuQ29tcG9uZW50KSk7XG5leHBvcnQgeyBQcm92aWRlciB9O1xuIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHNoYWxsb3dFcXVhbCBmcm9tICdzaGFsbG93ZXF1YWwnO1xuaW1wb3J0IGhvaXN0U3RhdGljcyBmcm9tICdob2lzdC1ub24tcmVhY3Qtc3RhdGljcyc7XG5pbXBvcnQgeyBNaW5pU3RvcmVDb250ZXh0IH0gZnJvbSAnLi9Qcm92aWRlcic7XG5mdW5jdGlvbiBnZXREaXNwbGF5TmFtZShXcmFwcGVkQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuIFdyYXBwZWRDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgV3JhcHBlZENvbXBvbmVudC5uYW1lIHx8ICdDb21wb25lbnQnO1xufVxudmFyIGRlZmF1bHRNYXBTdGF0ZVRvUHJvcHMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe30pOyB9O1xuZXhwb3J0IGZ1bmN0aW9uIGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICB2YXIgc2hvdWxkU3Vic2NyaWJlID0gISFtYXBTdGF0ZVRvUHJvcHM7XG4gICAgdmFyIGZpbmFsTWFwU3RhdGVUb1Byb3BzID0gbWFwU3RhdGVUb1Byb3BzIHx8IGRlZmF1bHRNYXBTdGF0ZVRvUHJvcHM7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHdyYXBXaXRoQ29ubmVjdChXcmFwcGVkQ29tcG9uZW50KSB7XG4gICAgICAgIHZhciBDb25uZWN0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgICAgICAgICAgX19leHRlbmRzKENvbm5lY3QsIF9zdXBlcik7XG4gICAgICAgICAgICBmdW5jdGlvbiBDb25uZWN0KHByb3BzLCBjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMsIGNvbnRleHQpIHx8IHRoaXM7XG4gICAgICAgICAgICAgICAgX3RoaXMudW5zdWJzY3JpYmUgPSBudWxsO1xuICAgICAgICAgICAgICAgIF90aGlzLmhhbmRsZUNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy51bnN1YnNjcmliZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXh0U3RhdGUgPSBmaW5hbE1hcFN0YXRlVG9Qcm9wcyhfdGhpcy5zdG9yZS5nZXRTdGF0ZSgpLCBfdGhpcy5wcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgc3Vic2NyaWJlZDogbmV4dFN0YXRlIH0pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgX3RoaXMuc3RvcmUgPSBfdGhpcy5jb250ZXh0O1xuICAgICAgICAgICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVkOiBmaW5hbE1hcFN0YXRlVG9Qcm9wcyhfdGhpcy5zdG9yZS5nZXRTdGF0ZSgpLCBwcm9wcyksXG4gICAgICAgICAgICAgICAgICAgIHN0b3JlOiBfdGhpcy5zdG9yZSxcbiAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHByb3BzLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQ29ubmVjdC5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMgPSBmdW5jdGlvbiAocHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICAgICAgICAgIC8vIHVzaW5nIG93blByb3BzXG4gICAgICAgICAgICAgICAgaWYgKG1hcFN0YXRlVG9Qcm9wcyAmJiBtYXBTdGF0ZVRvUHJvcHMubGVuZ3RoID09PSAyICYmIHByb3BzICE9PSBwcmV2U3RhdGUucHJvcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmliZWQ6IGZpbmFsTWFwU3RhdGVUb1Byb3BzKHByZXZTdGF0ZS5zdG9yZS5nZXRTdGF0ZSgpLCBwcm9wcyksXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wczogcHJvcHMsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHByb3BzOiBwcm9wcyB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIENvbm5lY3QucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJ5U3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgQ29ubmVjdC5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cnlVbnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIENvbm5lY3QucHJvdG90eXBlLnNob3VsZENvbXBvbmVudFVwZGF0ZSA9IGZ1bmN0aW9uIChuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoIXNoYWxsb3dFcXVhbCh0aGlzLnByb3BzLCBuZXh0UHJvcHMpIHx8XG4gICAgICAgICAgICAgICAgICAgICFzaGFsbG93RXF1YWwodGhpcy5zdGF0ZS5zdWJzY3JpYmVkLCBuZXh0U3RhdGUuc3Vic2NyaWJlZCkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIENvbm5lY3QucHJvdG90eXBlLnRyeVN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkU3Vic2NyaWJlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUgPSB0aGlzLnN0b3JlLnN1YnNjcmliZSh0aGlzLmhhbmRsZUNoYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2hhbmdlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIENvbm5lY3QucHJvdG90eXBlLnRyeVVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnVuc3Vic2NyaWJlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIENvbm5lY3QucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcHMgPSBfX2Fzc2lnbihfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5wcm9wcyksIHRoaXMuc3RhdGUuc3Vic2NyaWJlZCksIHsgc3RvcmU6IHRoaXMuc3RvcmUgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoV3JhcHBlZENvbXBvbmVudCwgX19hc3NpZ24oe30sIHByb3BzLCB7IHJlZjogdGhpcy5wcm9wcy5taW5pU3RvcmVGb3J3YXJkZWRSZWYgfSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIENvbm5lY3QuZGlzcGxheU5hbWUgPSBcIkNvbm5lY3QoXCIgKyBnZXREaXNwbGF5TmFtZShXcmFwcGVkQ29tcG9uZW50KSArIFwiKVwiO1xuICAgICAgICAgICAgQ29ubmVjdC5jb250ZXh0VHlwZSA9IE1pbmlTdG9yZUNvbnRleHQ7XG4gICAgICAgICAgICByZXR1cm4gQ29ubmVjdDtcbiAgICAgICAgfShSZWFjdC5Db21wb25lbnQpKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZm9yd2FyZFJlZikge1xuICAgICAgICAgICAgdmFyIGZvcndhcmRlZCA9IFJlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChDb25uZWN0LCBfX2Fzc2lnbih7fSwgcHJvcHMsIHsgbWluaVN0b3JlRm9yd2FyZGVkUmVmOiByZWYgfSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gaG9pc3RTdGF0aWNzKGZvcndhcmRlZCwgV3JhcHBlZENvbXBvbmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhvaXN0U3RhdGljcyhDb25uZWN0LCBXcmFwcGVkQ29tcG9uZW50KTtcbiAgICB9O1xufVxuIiwidmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoaW5pdGlhbFN0YXRlKSB7XG4gICAgdmFyIHN0YXRlID0gaW5pdGlhbFN0YXRlO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBbXTtcbiAgICBmdW5jdGlvbiBzZXRTdGF0ZShwYXJ0aWFsKSB7XG4gICAgICAgIHN0YXRlID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHN0YXRlKSwgcGFydGlhbCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnNbaV0oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzdWJzY3JpYmUobGlzdGVuZXIpIHtcbiAgICAgICAgbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0U3RhdGU6IHNldFN0YXRlLFxuICAgICAgICBnZXRTdGF0ZTogZ2V0U3RhdGUsXG4gICAgICAgIHN1YnNjcmliZTogc3Vic2NyaWJlLFxuICAgIH07XG59XG4iLCIvKipcbiAqIFNhZmUgY2hhaW5lZCBmdW5jdGlvblxuICpcbiAqIFdpbGwgb25seSBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gaWYgbmVlZGVkLFxuICogb3RoZXJ3aXNlIHdpbGwgcGFzcyBiYWNrIGV4aXN0aW5nIGZ1bmN0aW9ucyBvciBudWxsLlxuICpcbiAqIEByZXR1cm5zIHtmdW5jdGlvbnxudWxsfVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVDaGFpbmVkRnVuY3Rpb24oKSB7XG4gIHZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuXG4gIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiBhcmdzWzBdO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGNoYWluZWRGdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChhcmdzW2ldICYmIGFyZ3NbaV0uYXBwbHkpIHtcbiAgICAgICAgYXJnc1tpXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn0iLCJpbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMlwiO1xuaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5XCI7XG4vLyBNSVQgTGljZW5zZSBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9rYWltYWxsZWEvaXNNb2JpbGVcbnZhciBhcHBsZVBob25lID0gL2lQaG9uZS9pO1xudmFyIGFwcGxlSXBvZCA9IC9pUG9kL2k7XG52YXIgYXBwbGVUYWJsZXQgPSAvaVBhZC9pO1xudmFyIGFuZHJvaWRQaG9uZSA9IC9cXGJBbmRyb2lkKD86LispTW9iaWxlXFxiL2k7IC8vIE1hdGNoICdBbmRyb2lkJyBBTkQgJ01vYmlsZSdcblxudmFyIGFuZHJvaWRUYWJsZXQgPSAvQW5kcm9pZC9pO1xudmFyIGFtYXpvblBob25lID0gL1xcYkFuZHJvaWQoPzouKylTRDQ5MzBVUlxcYi9pO1xudmFyIGFtYXpvblRhYmxldCA9IC9cXGJBbmRyb2lkKD86LispKD86S0ZbQS1aXXsyLDR9KVxcYi9pO1xudmFyIHdpbmRvd3NQaG9uZSA9IC9XaW5kb3dzIFBob25lL2k7XG52YXIgd2luZG93c1RhYmxldCA9IC9cXGJXaW5kb3dzKD86LispQVJNXFxiL2k7IC8vIE1hdGNoICdXaW5kb3dzJyBBTkQgJ0FSTSdcblxudmFyIG90aGVyQmxhY2tiZXJyeSA9IC9CbGFja0JlcnJ5L2k7XG52YXIgb3RoZXJCbGFja2JlcnJ5MTAgPSAvQkIxMC9pO1xudmFyIG90aGVyT3BlcmEgPSAvT3BlcmEgTWluaS9pO1xudmFyIG90aGVyQ2hyb21lID0gL1xcYihDcmlPU3xDaHJvbWUpKD86LispTW9iaWxlL2k7XG52YXIgb3RoZXJGaXJlZm94ID0gL01vYmlsZSg/Oi4rKUZpcmVmb3hcXGIvaTsgLy8gTWF0Y2ggJ01vYmlsZScgQU5EICdGaXJlZm94J1xuXG5mdW5jdGlvbiBtYXRjaChyZWdleCwgdXNlckFnZW50KSB7XG4gIHJldHVybiByZWdleC50ZXN0KHVzZXJBZ2VudCk7XG59XG5cbmZ1bmN0aW9uIGlzTW9iaWxlKHVzZXJBZ2VudCkge1xuICB2YXIgdWEgPSB1c2VyQWdlbnQgfHwgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnID8gbmF2aWdhdG9yLnVzZXJBZ2VudCA6ICcnKTsgLy8gRmFjZWJvb2sgbW9iaWxlIGFwcCdzIGludGVncmF0ZWQgYnJvd3NlciBhZGRzIGEgYnVuY2ggb2Ygc3RyaW5ncyB0aGF0XG4gIC8vIG1hdGNoIGV2ZXJ5dGhpbmcuIFN0cmlwIGl0IG91dCBpZiBpdCBleGlzdHMuXG5cbiAgdmFyIHRtcCA9ICh1YSB8fCAnJykuc3BsaXQoJ1tGQkFOJyk7XG5cbiAgaWYgKHR5cGVvZiB0bXBbMV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIF90bXAgPSB0bXA7XG5cbiAgICB2YXIgX3RtcDIgPSBfc2xpY2VkVG9BcnJheShfdG1wLCAxKTtcblxuICAgIHVhID0gX3RtcDJbMF07XG4gIH0gLy8gVHdpdHRlciBtb2JpbGUgYXBwJ3MgaW50ZWdyYXRlZCBicm93c2VyIG9uIGlQYWQgYWRkcyBhIFwiVHdpdHRlciBmb3JcbiAgLy8gaVBob25lXCIgc3RyaW5nLiBTYW1lIHByb2JhYmx5IGhhcHBlbnMgb24gb3RoZXIgdGFibGV0IHBsYXRmb3Jtcy5cbiAgLy8gVGhpcyB3aWxsIGNvbmZ1c2UgZGV0ZWN0aW9uIHNvIHN0cmlwIGl0IG91dCBpZiBpdCBleGlzdHMuXG5cblxuICB0bXAgPSB1YS5zcGxpdCgnVHdpdHRlcicpO1xuXG4gIGlmICh0eXBlb2YgdG1wWzFdICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBfdG1wMyA9IHRtcDtcblxuICAgIHZhciBfdG1wNCA9IF9zbGljZWRUb0FycmF5KF90bXAzLCAxKTtcblxuICAgIHVhID0gX3RtcDRbMF07XG4gIH1cblxuICB2YXIgcmVzdWx0ID0ge1xuICAgIGFwcGxlOiB7XG4gICAgICBwaG9uZTogbWF0Y2goYXBwbGVQaG9uZSwgdWEpICYmICFtYXRjaCh3aW5kb3dzUGhvbmUsIHVhKSxcbiAgICAgIGlwb2Q6IG1hdGNoKGFwcGxlSXBvZCwgdWEpLFxuICAgICAgdGFibGV0OiAhbWF0Y2goYXBwbGVQaG9uZSwgdWEpICYmIG1hdGNoKGFwcGxlVGFibGV0LCB1YSkgJiYgIW1hdGNoKHdpbmRvd3NQaG9uZSwgdWEpLFxuICAgICAgZGV2aWNlOiAobWF0Y2goYXBwbGVQaG9uZSwgdWEpIHx8IG1hdGNoKGFwcGxlSXBvZCwgdWEpIHx8IG1hdGNoKGFwcGxlVGFibGV0LCB1YSkpICYmICFtYXRjaCh3aW5kb3dzUGhvbmUsIHVhKVxuICAgIH0sXG4gICAgYW1hem9uOiB7XG4gICAgICBwaG9uZTogbWF0Y2goYW1hem9uUGhvbmUsIHVhKSxcbiAgICAgIHRhYmxldDogIW1hdGNoKGFtYXpvblBob25lLCB1YSkgJiYgbWF0Y2goYW1hem9uVGFibGV0LCB1YSksXG4gICAgICBkZXZpY2U6IG1hdGNoKGFtYXpvblBob25lLCB1YSkgfHwgbWF0Y2goYW1hem9uVGFibGV0LCB1YSlcbiAgICB9LFxuICAgIGFuZHJvaWQ6IHtcbiAgICAgIHBob25lOiAhbWF0Y2god2luZG93c1Bob25lLCB1YSkgJiYgbWF0Y2goYW1hem9uUGhvbmUsIHVhKSB8fCAhbWF0Y2god2luZG93c1Bob25lLCB1YSkgJiYgbWF0Y2goYW5kcm9pZFBob25lLCB1YSksXG4gICAgICB0YWJsZXQ6ICFtYXRjaCh3aW5kb3dzUGhvbmUsIHVhKSAmJiAhbWF0Y2goYW1hem9uUGhvbmUsIHVhKSAmJiAhbWF0Y2goYW5kcm9pZFBob25lLCB1YSkgJiYgKG1hdGNoKGFtYXpvblRhYmxldCwgdWEpIHx8IG1hdGNoKGFuZHJvaWRUYWJsZXQsIHVhKSksXG4gICAgICBkZXZpY2U6ICFtYXRjaCh3aW5kb3dzUGhvbmUsIHVhKSAmJiAobWF0Y2goYW1hem9uUGhvbmUsIHVhKSB8fCBtYXRjaChhbWF6b25UYWJsZXQsIHVhKSB8fCBtYXRjaChhbmRyb2lkUGhvbmUsIHVhKSB8fCBtYXRjaChhbmRyb2lkVGFibGV0LCB1YSkpIHx8IG1hdGNoKC9cXGJva2h0dHBcXGIvaSwgdWEpXG4gICAgfSxcbiAgICB3aW5kb3dzOiB7XG4gICAgICBwaG9uZTogbWF0Y2god2luZG93c1Bob25lLCB1YSksXG4gICAgICB0YWJsZXQ6IG1hdGNoKHdpbmRvd3NUYWJsZXQsIHVhKSxcbiAgICAgIGRldmljZTogbWF0Y2god2luZG93c1Bob25lLCB1YSkgfHwgbWF0Y2god2luZG93c1RhYmxldCwgdWEpXG4gICAgfSxcbiAgICBvdGhlcjoge1xuICAgICAgYmxhY2tiZXJyeTogbWF0Y2gob3RoZXJCbGFja2JlcnJ5LCB1YSksXG4gICAgICBibGFja2JlcnJ5MTA6IG1hdGNoKG90aGVyQmxhY2tiZXJyeTEwLCB1YSksXG4gICAgICBvcGVyYTogbWF0Y2gob3RoZXJPcGVyYSwgdWEpLFxuICAgICAgZmlyZWZveDogbWF0Y2gob3RoZXJGaXJlZm94LCB1YSksXG4gICAgICBjaHJvbWU6IG1hdGNoKG90aGVyQ2hyb21lLCB1YSksXG4gICAgICBkZXZpY2U6IG1hdGNoKG90aGVyQmxhY2tiZXJyeSwgdWEpIHx8IG1hdGNoKG90aGVyQmxhY2tiZXJyeTEwLCB1YSkgfHwgbWF0Y2gob3RoZXJPcGVyYSwgdWEpIHx8IG1hdGNoKG90aGVyRmlyZWZveCwgdWEpIHx8IG1hdGNoKG90aGVyQ2hyb21lLCB1YSlcbiAgICB9LFxuICAgIC8vIEFkZGl0aW9uYWxcbiAgICBhbnk6IG51bGwsXG4gICAgcGhvbmU6IG51bGwsXG4gICAgdGFibGV0OiBudWxsXG4gIH07XG4gIHJlc3VsdC5hbnkgPSByZXN1bHQuYXBwbGUuZGV2aWNlIHx8IHJlc3VsdC5hbmRyb2lkLmRldmljZSB8fCByZXN1bHQud2luZG93cy5kZXZpY2UgfHwgcmVzdWx0Lm90aGVyLmRldmljZTsgLy8gZXhjbHVkZXMgJ290aGVyJyBkZXZpY2VzIGFuZCBpcG9kcywgdGFyZ2V0aW5nIHRvdWNoc2NyZWVuIHBob25lc1xuXG4gIHJlc3VsdC5waG9uZSA9IHJlc3VsdC5hcHBsZS5waG9uZSB8fCByZXN1bHQuYW5kcm9pZC5waG9uZSB8fCByZXN1bHQud2luZG93cy5waG9uZTtcbiAgcmVzdWx0LnRhYmxldCA9IHJlc3VsdC5hcHBsZS50YWJsZXQgfHwgcmVzdWx0LmFuZHJvaWQudGFibGV0IHx8IHJlc3VsdC53aW5kb3dzLnRhYmxldDtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxudmFyIGRlZmF1bHRSZXN1bHQgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGlzTW9iaWxlKCkpLCB7fSwge1xuICBpc01vYmlsZTogaXNNb2JpbGVcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBkZWZhdWx0UmVzdWx0OyIsImltcG9ydCBfdHlwZW9mIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2ZcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBpc01vYmlsZSBmcm9tICcuL3V0aWxzL2lzTW9iaWxlJztcbmV4cG9ydCBmdW5jdGlvbiBub29wKCkge31cbmV4cG9ydCBmdW5jdGlvbiBnZXRLZXlGcm9tQ2hpbGRyZW5JbmRleChjaGlsZCwgbWVudUV2ZW50S2V5LCBpbmRleCkge1xuICB2YXIgcHJlZml4ID0gbWVudUV2ZW50S2V5IHx8ICcnO1xuICByZXR1cm4gY2hpbGQua2V5IHx8IFwiXCIuY29uY2F0KHByZWZpeCwgXCJpdGVtX1wiKS5jb25jYXQoaW5kZXgpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE1lbnVJZEZyb21TdWJNZW51RXZlbnRLZXkoZXZlbnRLZXkpIHtcbiAgcmV0dXJuIFwiXCIuY29uY2F0KGV2ZW50S2V5LCBcIi1tZW51LVwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsb29wTWVudUl0ZW0oY2hpbGRyZW4sIGNiKSB7XG4gIHZhciBpbmRleCA9IC0xO1xuICBSZWFjdC5DaGlsZHJlbi5mb3JFYWNoKGNoaWxkcmVuLCBmdW5jdGlvbiAoYykge1xuICAgIGluZGV4ICs9IDE7XG5cbiAgICBpZiAoYyAmJiBjLnR5cGUgJiYgYy50eXBlLmlzTWVudUl0ZW1Hcm91cCkge1xuICAgICAgUmVhY3QuQ2hpbGRyZW4uZm9yRWFjaChjLnByb3BzLmNoaWxkcmVuLCBmdW5jdGlvbiAoYzIpIHtcbiAgICAgICAgaW5kZXggKz0gMTtcbiAgICAgICAgY2IoYzIsIGluZGV4KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYihjLCBpbmRleCk7XG4gICAgfVxuICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBsb29wTWVudUl0ZW1SZWN1cnNpdmVseShjaGlsZHJlbiwga2V5cywgcmV0KSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoIWNoaWxkcmVuIHx8IHJldC5maW5kKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgUmVhY3QuQ2hpbGRyZW4uZm9yRWFjaChjaGlsZHJlbiwgZnVuY3Rpb24gKGMpIHtcbiAgICBpZiAoYykge1xuICAgICAgdmFyIGNvbnN0cnVjdCA9IGMudHlwZTtcblxuICAgICAgaWYgKCFjb25zdHJ1Y3QgfHwgIShjb25zdHJ1Y3QuaXNTdWJNZW51IHx8IGNvbnN0cnVjdC5pc01lbnVJdGVtIHx8IGNvbnN0cnVjdC5pc01lbnVJdGVtR3JvdXApKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGtleXMuaW5kZXhPZihjLmtleSkgIT09IC0xKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICByZXQuZmluZCA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKGMucHJvcHMuY2hpbGRyZW4pIHtcbiAgICAgICAgbG9vcE1lbnVJdGVtUmVjdXJzaXZlbHkoYy5wcm9wcy5jaGlsZHJlbiwga2V5cywgcmV0KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuZXhwb3J0IHZhciBtZW51QWxsUHJvcHMgPSBbJ2RlZmF1bHRTZWxlY3RlZEtleXMnLCAnc2VsZWN0ZWRLZXlzJywgJ2RlZmF1bHRPcGVuS2V5cycsICdvcGVuS2V5cycsICdtb2RlJywgJ2dldFBvcHVwQ29udGFpbmVyJywgJ29uU2VsZWN0JywgJ29uRGVzZWxlY3QnLCAnb25EZXN0cm95JywgJ29wZW5UcmFuc2l0aW9uTmFtZScsICdvcGVuQW5pbWF0aW9uJywgJ3N1Yk1lbnVPcGVuRGVsYXknLCAnc3ViTWVudUNsb3NlRGVsYXknLCAnZm9yY2VTdWJNZW51UmVuZGVyJywgJ3RyaWdnZXJTdWJNZW51QWN0aW9uJywgJ2xldmVsJywgJ3NlbGVjdGFibGUnLCAnbXVsdGlwbGUnLCAnb25PcGVuQ2hhbmdlJywgJ3Zpc2libGUnLCAnZm9jdXNhYmxlJywgJ2RlZmF1bHRBY3RpdmVGaXJzdCcsICdwcmVmaXhDbHMnLCAnaW5saW5lSW5kZW50JywgJ3BhcmVudE1lbnUnLCAndGl0bGUnLCAncm9vdFByZWZpeENscycsICdldmVudEtleScsICdhY3RpdmUnLCAnb25JdGVtSG92ZXInLCAnb25UaXRsZU1vdXNlRW50ZXInLCAnb25UaXRsZU1vdXNlTGVhdmUnLCAnb25UaXRsZUNsaWNrJywgJ3BvcHVwQWxpZ24nLCAncG9wdXBPZmZzZXQnLCAnaXNPcGVuJywgJ3JlbmRlck1lbnVJdGVtJywgJ21hbnVhbFJlZicsICdzdWJNZW51S2V5JywgJ2Rpc2FibGVkJywgJ2luZGV4JywgJ2lzU2VsZWN0ZWQnLCAnc3RvcmUnLCAnYWN0aXZlS2V5JywgJ2J1aWx0aW5QbGFjZW1lbnRzJywgJ292ZXJmbG93ZWRJbmRpY2F0b3InLCAnbW90aW9uJywgLy8gdGhlIGZvbGxvd2luZyBrZXlzIGZvdW5kIG5lZWQgdG8gYmUgcmVtb3ZlZCBmcm9tIHRlc3QgcmVncmVzc2lvblxuJ2F0dHJpYnV0ZScsICd2YWx1ZScsICdwb3B1cENsYXNzTmFtZScsICdpbmxpbmVDb2xsYXBzZWQnLCAnbWVudScsICd0aGVtZScsICdpdGVtSWNvbicsICdleHBhbmRJY29uJ107IC8vIHJlZjogaHR0cHM6Ly9naXRodWIuY29tL2FudC1kZXNpZ24vYW50LWRlc2lnbi9pc3N1ZXMvMTQwMDdcbi8vIHJlZjogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MzYwODg5XG4vLyBnZXRCb3VuZGluZ0NsaWVudFJlY3QgcmV0dXJuIHRoZSBmdWxsIHByZWNpc2lvbiB2YWx1ZSwgd2hpY2ggaXNcbi8vIG5vdCB0aGUgc2FtZSBiZWhhdmlvciBhcyBvbiBjaHJvbWUuIFNldCB0aGUgcHJlY2lzaW9uIHRvIDYgdG9cbi8vIHVuaWZ5IHRoZWlyIGJlaGF2aW9yXG5cbmV4cG9ydCB2YXIgZ2V0V2lkdGggPSBmdW5jdGlvbiBnZXRXaWR0aChlbGVtKSB7XG4gIHZhciBpbmNsdWRlTWFyZ2luID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTtcbiAgdmFyIHdpZHRoID0gZWxlbSAmJiB0eXBlb2YgZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QgPT09ICdmdW5jdGlvbicgJiYgZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcblxuICBpZiAod2lkdGgpIHtcbiAgICBpZiAoaW5jbHVkZU1hcmdpbikge1xuICAgICAgdmFyIF9nZXRDb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKSxcbiAgICAgICAgICBtYXJnaW5MZWZ0ID0gX2dldENvbXB1dGVkU3R5bGUubWFyZ2luTGVmdCxcbiAgICAgICAgICBtYXJnaW5SaWdodCA9IF9nZXRDb21wdXRlZFN0eWxlLm1hcmdpblJpZ2h0O1xuXG4gICAgICB3aWR0aCArPSArbWFyZ2luTGVmdC5yZXBsYWNlKCdweCcsICcnKSArICttYXJnaW5SaWdodC5yZXBsYWNlKCdweCcsICcnKTtcbiAgICB9XG5cbiAgICB3aWR0aCA9ICt3aWR0aC50b0ZpeGVkKDYpO1xuICB9XG5cbiAgcmV0dXJuIHdpZHRoIHx8IDA7XG59O1xuZXhwb3J0IHZhciBzZXRTdHlsZSA9IGZ1bmN0aW9uIHNldFN0eWxlKGVsZW0sIHN0eWxlUHJvcGVydHksIHZhbHVlKSB7XG4gIGlmIChlbGVtICYmIF90eXBlb2YoZWxlbS5zdHlsZSkgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgZWxlbS5zdHlsZVtzdHlsZVByb3BlcnR5XSA9IHZhbHVlO1xuICB9XG59O1xuZXhwb3J0IHZhciBpc01vYmlsZURldmljZSA9IGZ1bmN0aW9uIGlzTW9iaWxlRGV2aWNlKCkge1xuICByZXR1cm4gaXNNb2JpbGUuYW55O1xufTsiLCJ2YXIgYXV0b0FkanVzdE92ZXJmbG93ID0ge1xuICBhZGp1c3RYOiAxLFxuICBhZGp1c3RZOiAxXG59O1xuZXhwb3J0IHZhciBwbGFjZW1lbnRzID0ge1xuICB0b3BMZWZ0OiB7XG4gICAgcG9pbnRzOiBbJ2JsJywgJ3RsJ10sXG4gICAgb3ZlcmZsb3c6IGF1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFswLCAtN11cbiAgfSxcbiAgYm90dG9tTGVmdDoge1xuICAgIHBvaW50czogWyd0bCcsICdibCddLFxuICAgIG92ZXJmbG93OiBhdXRvQWRqdXN0T3ZlcmZsb3csXG4gICAgb2Zmc2V0OiBbMCwgN11cbiAgfSxcbiAgbGVmdFRvcDoge1xuICAgIHBvaW50czogWyd0cicsICd0bCddLFxuICAgIG92ZXJmbG93OiBhdXRvQWRqdXN0T3ZlcmZsb3csXG4gICAgb2Zmc2V0OiBbLTQsIDBdXG4gIH0sXG4gIHJpZ2h0VG9wOiB7XG4gICAgcG9pbnRzOiBbJ3RsJywgJ3RyJ10sXG4gICAgb3ZlcmZsb3c6IGF1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFs0LCAwXVxuICB9XG59O1xuZXhwb3J0IHZhciBwbGFjZW1lbnRzUnRsID0ge1xuICB0b3BMZWZ0OiB7XG4gICAgcG9pbnRzOiBbJ2JsJywgJ3RsJ10sXG4gICAgb3ZlcmZsb3c6IGF1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFswLCAtN11cbiAgfSxcbiAgYm90dG9tTGVmdDoge1xuICAgIHBvaW50czogWyd0bCcsICdibCddLFxuICAgIG92ZXJmbG93OiBhdXRvQWRqdXN0T3ZlcmZsb3csXG4gICAgb2Zmc2V0OiBbMCwgN11cbiAgfSxcbiAgcmlnaHRUb3A6IHtcbiAgICBwb2ludHM6IFsndHInLCAndGwnXSxcbiAgICBvdmVyZmxvdzogYXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWy00LCAwXVxuICB9LFxuICBsZWZ0VG9wOiB7XG4gICAgcG9pbnRzOiBbJ3RsJywgJ3RyJ10sXG4gICAgb3ZlcmZsb3c6IGF1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFs0LCAwXVxuICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgcGxhY2VtZW50czsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrXCI7XG5pbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzc1wiO1xuaW1wb3J0IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2Fzc2VydFRoaXNJbml0aWFsaXplZFwiO1xuaW1wb3J0IF9pbmhlcml0cyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHNcIjtcbmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyXCI7XG5pbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eVwiO1xuaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDJcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCAqIGFzIFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgVHJpZ2dlciBmcm9tICdyYy10cmlnZ2VyJztcbmltcG9ydCByYWYgZnJvbSBcInJjLXV0aWwvZXMvcmFmXCI7XG5pbXBvcnQgS2V5Q29kZSBmcm9tIFwicmMtdXRpbC9lcy9LZXlDb2RlXCI7XG5pbXBvcnQgQ1NTTW90aW9uIGZyb20gJ3JjLW1vdGlvbic7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdtaW5pLXN0b3JlJztcbmltcG9ydCBTdWJQb3B1cE1lbnUgZnJvbSAnLi9TdWJQb3B1cE1lbnUnO1xuaW1wb3J0IHsgcGxhY2VtZW50cywgcGxhY2VtZW50c1J0bCB9IGZyb20gJy4vcGxhY2VtZW50cyc7XG5pbXBvcnQgeyBub29wLCBsb29wTWVudUl0ZW1SZWN1cnNpdmVseSwgZ2V0TWVudUlkRnJvbVN1Yk1lbnVFdmVudEtleSwgbWVudUFsbFByb3BzIH0gZnJvbSAnLi91dGlsJztcbnZhciBndWlkID0gMDtcbnZhciBwb3B1cFBsYWNlbWVudE1hcCA9IHtcbiAgaG9yaXpvbnRhbDogJ2JvdHRvbUxlZnQnLFxuICB2ZXJ0aWNhbDogJ3JpZ2h0VG9wJyxcbiAgJ3ZlcnRpY2FsLWxlZnQnOiAncmlnaHRUb3AnLFxuICAndmVydGljYWwtcmlnaHQnOiAnbGVmdFRvcCdcbn07XG5cbnZhciB1cGRhdGVEZWZhdWx0QWN0aXZlRmlyc3QgPSBmdW5jdGlvbiB1cGRhdGVEZWZhdWx0QWN0aXZlRmlyc3Qoc3RvcmUsIGV2ZW50S2V5LCBkZWZhdWx0QWN0aXZlRmlyc3QpIHtcbiAgdmFyIG1lbnVJZCA9IGdldE1lbnVJZEZyb21TdWJNZW51RXZlbnRLZXkoZXZlbnRLZXkpO1xuICB2YXIgc3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpO1xuICBzdG9yZS5zZXRTdGF0ZSh7XG4gICAgZGVmYXVsdEFjdGl2ZUZpcnN0OiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLmRlZmF1bHRBY3RpdmVGaXJzdCksIHt9LCBfZGVmaW5lUHJvcGVydHkoe30sIG1lbnVJZCwgZGVmYXVsdEFjdGl2ZUZpcnN0KSlcbiAgfSk7XG59O1xuXG5leHBvcnQgdmFyIFN1Yk1lbnUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzKFN1Yk1lbnUsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoU3ViTWVudSk7XG5cbiAgZnVuY3Rpb24gU3ViTWVudShwcm9wcykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdWJNZW51KTtcblxuICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpO1xuXG4gICAgX3RoaXMub25EZXN0cm95ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgX3RoaXMucHJvcHMub25EZXN0cm95KGtleSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBub3RlOlxuICAgICAqICBUaGlzIGxlZ2FjeSBjb2RlIHRoYXQgYG9uS2V5RG93bmAgaXMgY2FsbGVkIGJ5IHBhcmVudCBpbnN0ZWFkIG9mIGRvbSBzZWxmLlxuICAgICAqICB3aGljaCBuZWVkIHJldHVybiBjb2RlIHRvIGNoZWNrIGlmIHRoaXMgZXZlbnQgaXMgaGFuZGxlZFxuICAgICAqL1xuXG5cbiAgICBfdGhpcy5vbktleURvd24gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIGtleUNvZGUgPSBlLmtleUNvZGU7XG4gICAgICB2YXIgbWVudSA9IF90aGlzLm1lbnVJbnN0YW5jZTtcbiAgICAgIHZhciBzdG9yZSA9IF90aGlzLnByb3BzLnN0b3JlO1xuXG4gICAgICB2YXIgdmlzaWJsZSA9IF90aGlzLmdldFZpc2libGUoKTtcblxuICAgICAgaWYgKGtleUNvZGUgPT09IEtleUNvZGUuRU5URVIpIHtcbiAgICAgICAgX3RoaXMub25UaXRsZUNsaWNrKGUpO1xuXG4gICAgICAgIHVwZGF0ZURlZmF1bHRBY3RpdmVGaXJzdChzdG9yZSwgX3RoaXMucHJvcHMuZXZlbnRLZXksIHRydWUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGtleUNvZGUgPT09IEtleUNvZGUuUklHSFQpIHtcbiAgICAgICAgaWYgKHZpc2libGUpIHtcbiAgICAgICAgICBtZW51Lm9uS2V5RG93bihlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfdGhpcy50cmlnZ2VyT3BlbkNoYW5nZSh0cnVlKTsgLy8gbmVlZCB0byB1cGRhdGUgY3VycmVudCBtZW51J3MgZGVmYXVsdEFjdGl2ZUZpcnN0IHZhbHVlXG5cblxuICAgICAgICAgIHVwZGF0ZURlZmF1bHRBY3RpdmVGaXJzdChzdG9yZSwgX3RoaXMucHJvcHMuZXZlbnRLZXksIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChrZXlDb2RlID09PSBLZXlDb2RlLkxFRlQpIHtcbiAgICAgICAgdmFyIGhhbmRsZWQ7XG5cbiAgICAgICAgaWYgKHZpc2libGUpIHtcbiAgICAgICAgICBoYW5kbGVkID0gbWVudS5vbktleURvd24oZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaGFuZGxlZCkge1xuICAgICAgICAgIF90aGlzLnRyaWdnZXJPcGVuQ2hhbmdlKGZhbHNlKTtcblxuICAgICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGhhbmRsZWQ7XG4gICAgICB9XG5cbiAgICAgIGlmICh2aXNpYmxlICYmIChrZXlDb2RlID09PSBLZXlDb2RlLlVQIHx8IGtleUNvZGUgPT09IEtleUNvZGUuRE9XTikpIHtcbiAgICAgICAgcmV0dXJuIG1lbnUub25LZXlEb3duKGUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICBfdGhpcy5vbk9wZW5DaGFuZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMucHJvcHMub25PcGVuQ2hhbmdlKGUpO1xuICAgIH07XG5cbiAgICBfdGhpcy5vblBvcHVwVmlzaWJsZUNoYW5nZSA9IGZ1bmN0aW9uICh2aXNpYmxlKSB7XG4gICAgICBfdGhpcy50cmlnZ2VyT3BlbkNoYW5nZSh2aXNpYmxlLCB2aXNpYmxlID8gJ21vdXNlZW50ZXInIDogJ21vdXNlbGVhdmUnKTtcbiAgICB9O1xuXG4gICAgX3RoaXMub25Nb3VzZUVudGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIGtleSA9IF90aGlzJHByb3BzLmV2ZW50S2V5LFxuICAgICAgICAgIG9uTW91c2VFbnRlciA9IF90aGlzJHByb3BzLm9uTW91c2VFbnRlcixcbiAgICAgICAgICBzdG9yZSA9IF90aGlzJHByb3BzLnN0b3JlO1xuICAgICAgdXBkYXRlRGVmYXVsdEFjdGl2ZUZpcnN0KHN0b3JlLCBfdGhpcy5wcm9wcy5ldmVudEtleSwgZmFsc2UpO1xuICAgICAgb25Nb3VzZUVudGVyKHtcbiAgICAgICAga2V5OiBrZXksXG4gICAgICAgIGRvbUV2ZW50OiBlXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3RoaXMub25Nb3VzZUxlYXZlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICBwYXJlbnRNZW51ID0gX3RoaXMkcHJvcHMyLnBhcmVudE1lbnUsXG4gICAgICAgICAgZXZlbnRLZXkgPSBfdGhpcyRwcm9wczIuZXZlbnRLZXksXG4gICAgICAgICAgb25Nb3VzZUxlYXZlID0gX3RoaXMkcHJvcHMyLm9uTW91c2VMZWF2ZTtcbiAgICAgIHBhcmVudE1lbnUuc3ViTWVudUluc3RhbmNlID0gX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyk7XG4gICAgICBvbk1vdXNlTGVhdmUoe1xuICAgICAgICBrZXk6IGV2ZW50S2V5LFxuICAgICAgICBkb21FdmVudDogZVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF90aGlzLm9uVGl0bGVNb3VzZUVudGVyID0gZnVuY3Rpb24gKGRvbUV2ZW50KSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMzID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAga2V5ID0gX3RoaXMkcHJvcHMzLmV2ZW50S2V5LFxuICAgICAgICAgIG9uSXRlbUhvdmVyID0gX3RoaXMkcHJvcHMzLm9uSXRlbUhvdmVyLFxuICAgICAgICAgIG9uVGl0bGVNb3VzZUVudGVyID0gX3RoaXMkcHJvcHMzLm9uVGl0bGVNb3VzZUVudGVyO1xuICAgICAgb25JdGVtSG92ZXIoe1xuICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgaG92ZXI6IHRydWVcbiAgICAgIH0pO1xuICAgICAgb25UaXRsZU1vdXNlRW50ZXIoe1xuICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgZG9tRXZlbnQ6IGRvbUV2ZW50XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3RoaXMub25UaXRsZU1vdXNlTGVhdmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIF90aGlzJHByb3BzNCA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIHBhcmVudE1lbnUgPSBfdGhpcyRwcm9wczQucGFyZW50TWVudSxcbiAgICAgICAgICBldmVudEtleSA9IF90aGlzJHByb3BzNC5ldmVudEtleSxcbiAgICAgICAgICBvbkl0ZW1Ib3ZlciA9IF90aGlzJHByb3BzNC5vbkl0ZW1Ib3ZlcixcbiAgICAgICAgICBvblRpdGxlTW91c2VMZWF2ZSA9IF90aGlzJHByb3BzNC5vblRpdGxlTW91c2VMZWF2ZTtcbiAgICAgIHBhcmVudE1lbnUuc3ViTWVudUluc3RhbmNlID0gX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyk7XG4gICAgICBvbkl0ZW1Ib3Zlcih7XG4gICAgICAgIGtleTogZXZlbnRLZXksXG4gICAgICAgIGhvdmVyOiBmYWxzZVxuICAgICAgfSk7XG4gICAgICBvblRpdGxlTW91c2VMZWF2ZSh7XG4gICAgICAgIGtleTogZXZlbnRLZXksXG4gICAgICAgIGRvbUV2ZW50OiBlXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3RoaXMub25UaXRsZUNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBfYXNzZXJ0VGhpc0luaXRpYWxpemUgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSxcbiAgICAgICAgICBwcm9wcyA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZS5wcm9wcztcblxuICAgICAgcHJvcHMub25UaXRsZUNsaWNrKHtcbiAgICAgICAga2V5OiBwcm9wcy5ldmVudEtleSxcbiAgICAgICAgZG9tRXZlbnQ6IGVcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocHJvcHMudHJpZ2dlclN1Yk1lbnVBY3Rpb24gPT09ICdob3ZlcicpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBfdGhpcy50cmlnZ2VyT3BlbkNoYW5nZSghX3RoaXMuZ2V0VmlzaWJsZSgpLCAnY2xpY2snKTtcblxuICAgICAgdXBkYXRlRGVmYXVsdEFjdGl2ZUZpcnN0KHByb3BzLnN0b3JlLCBfdGhpcy5wcm9wcy5ldmVudEtleSwgZmFsc2UpO1xuICAgIH07XG5cbiAgICBfdGhpcy5vblN1Yk1lbnVDbGljayA9IGZ1bmN0aW9uIChpbmZvKSB7XG4gICAgICAvLyBpbiB0aGUgY2FzZSBvZiBvdmVyZmxvd2VkIHN1Ym1lbnVcbiAgICAgIC8vIG9uQ2xpY2sgaXMgbm90IGNvcGllZCBvdmVyXG4gICAgICBpZiAodHlwZW9mIF90aGlzLnByb3BzLm9uQ2xpY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgX3RoaXMucHJvcHMub25DbGljayhfdGhpcy5hZGRLZXlQYXRoKGluZm8pKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3RoaXMub25TZWxlY3QgPSBmdW5jdGlvbiAoaW5mbykge1xuICAgICAgX3RoaXMucHJvcHMub25TZWxlY3QoaW5mbyk7XG4gICAgfTtcblxuICAgIF90aGlzLm9uRGVzZWxlY3QgPSBmdW5jdGlvbiAoaW5mbykge1xuICAgICAgX3RoaXMucHJvcHMub25EZXNlbGVjdChpbmZvKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZ2V0UHJlZml4Q2xzID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KF90aGlzLnByb3BzLnJvb3RQcmVmaXhDbHMsIFwiLXN1Ym1lbnVcIik7XG4gICAgfTtcblxuICAgIF90aGlzLmdldEFjdGl2ZUNsYXNzTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBcIlwiLmNvbmNhdChfdGhpcy5nZXRQcmVmaXhDbHMoKSwgXCItYWN0aXZlXCIpO1xuICAgIH07XG5cbiAgICBfdGhpcy5nZXREaXNhYmxlZENsYXNzTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBcIlwiLmNvbmNhdChfdGhpcy5nZXRQcmVmaXhDbHMoKSwgXCItZGlzYWJsZWRcIik7XG4gICAgfTtcblxuICAgIF90aGlzLmdldFNlbGVjdGVkQ2xhc3NOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KF90aGlzLmdldFByZWZpeENscygpLCBcIi1zZWxlY3RlZFwiKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZ2V0T3BlbkNsYXNzTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBcIlwiLmNvbmNhdChfdGhpcy5wcm9wcy5yb290UHJlZml4Q2xzLCBcIi1zdWJtZW51LW9wZW5cIik7XG4gICAgfTtcblxuICAgIF90aGlzLmdldFZpc2libGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMuc3RhdGUuaXNPcGVuO1xuICAgIH07XG5cbiAgICBfdGhpcy5nZXRNb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLnN0YXRlLm1vZGU7XG4gICAgfTtcblxuICAgIF90aGlzLnNhdmVNZW51SW5zdGFuY2UgPSBmdW5jdGlvbiAoYykge1xuICAgICAgLy8gY2hpbGRyZW4gbWVudSBpbnN0YW5jZVxuICAgICAgX3RoaXMubWVudUluc3RhbmNlID0gYztcbiAgICB9O1xuXG4gICAgX3RoaXMuYWRkS2V5UGF0aCA9IGZ1bmN0aW9uIChpbmZvKSB7XG4gICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpbmZvKSwge30sIHtcbiAgICAgICAga2V5UGF0aDogKGluZm8ua2V5UGF0aCB8fCBbXSkuY29uY2F0KF90aGlzLnByb3BzLmV2ZW50S2V5KVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF90aGlzLnRyaWdnZXJPcGVuQ2hhbmdlID0gZnVuY3Rpb24gKG9wZW4sIHR5cGUpIHtcbiAgICAgIHZhciBrZXkgPSBfdGhpcy5wcm9wcy5ldmVudEtleTtcblxuICAgICAgdmFyIG9wZW5DaGFuZ2UgPSBmdW5jdGlvbiBvcGVuQ2hhbmdlKCkge1xuICAgICAgICBfdGhpcy5vbk9wZW5DaGFuZ2Uoe1xuICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgIGl0ZW06IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLFxuICAgICAgICAgIHRyaWdnZXI6IHR5cGUsXG4gICAgICAgICAgb3Blbjogb3BlblxuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIGlmICh0eXBlID09PSAnbW91c2VlbnRlcicpIHtcbiAgICAgICAgLy8gbWFrZSBzdXJlIG1vdXNlZW50ZXIgaGFwcGVuIGFmdGVyIG90aGVyIG1lbnUgaXRlbSdzIG1vdXNlbGVhdmVcbiAgICAgICAgX3RoaXMubW91c2VlbnRlclRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBvcGVuQ2hhbmdlKCk7XG4gICAgICAgIH0sIDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3BlbkNoYW5nZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5pc0NoaWxkcmVuU2VsZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcmV0ID0ge1xuICAgICAgICBmaW5kOiBmYWxzZVxuICAgICAgfTtcbiAgICAgIGxvb3BNZW51SXRlbVJlY3Vyc2l2ZWx5KF90aGlzLnByb3BzLmNoaWxkcmVuLCBfdGhpcy5wcm9wcy5zZWxlY3RlZEtleXMsIHJldCk7XG4gICAgICByZXR1cm4gcmV0LmZpbmQ7XG4gICAgfTtcblxuICAgIF90aGlzLmlzSW5saW5lTW9kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfdGhpcy5nZXRNb2RlKCkgPT09ICdpbmxpbmUnO1xuICAgIH07XG5cbiAgICBfdGhpcy5hZGp1c3RXaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKCFfdGhpcy5zdWJNZW51VGl0bGUgfHwgIV90aGlzLm1lbnVJbnN0YW5jZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBwb3B1cE1lbnUgPSBSZWFjdERPTS5maW5kRE9NTm9kZShfdGhpcy5tZW51SW5zdGFuY2UpO1xuXG4gICAgICBpZiAocG9wdXBNZW51Lm9mZnNldFdpZHRoID49IF90aGlzLnN1Yk1lbnVUaXRsZS5vZmZzZXRXaWR0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXG5cbiAgICAgIHBvcHVwTWVudS5zdHlsZS5taW5XaWR0aCA9IFwiXCIuY29uY2F0KF90aGlzLnN1Yk1lbnVUaXRsZS5vZmZzZXRXaWR0aCwgXCJweFwiKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuc2F2ZVN1Yk1lbnVUaXRsZSA9IGZ1bmN0aW9uIChzdWJNZW51VGl0bGUpIHtcbiAgICAgIF90aGlzLnN1Yk1lbnVUaXRsZSA9IHN1Yk1lbnVUaXRsZTtcbiAgICB9O1xuXG4gICAgX3RoaXMuZ2V0QmFzZVByb3BzID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZTIgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSxcbiAgICAgICAgICBwcm9wcyA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZTIucHJvcHM7XG5cbiAgICAgIHZhciBtZXJnZWRNb2RlID0gX3RoaXMuZ2V0TW9kZSgpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBtb2RlOiBtZXJnZWRNb2RlID09PSAnaG9yaXpvbnRhbCcgPyAndmVydGljYWwnIDogbWVyZ2VkTW9kZSxcbiAgICAgICAgdmlzaWJsZTogX3RoaXMuZ2V0VmlzaWJsZSgpLFxuICAgICAgICBsZXZlbDogcHJvcHMubGV2ZWwgKyAxLFxuICAgICAgICBpbmxpbmVJbmRlbnQ6IHByb3BzLmlubGluZUluZGVudCxcbiAgICAgICAgZm9jdXNhYmxlOiBmYWxzZSxcbiAgICAgICAgb25DbGljazogX3RoaXMub25TdWJNZW51Q2xpY2ssXG4gICAgICAgIG9uU2VsZWN0OiBfdGhpcy5vblNlbGVjdCxcbiAgICAgICAgb25EZXNlbGVjdDogX3RoaXMub25EZXNlbGVjdCxcbiAgICAgICAgb25EZXN0cm95OiBfdGhpcy5vbkRlc3Ryb3ksXG4gICAgICAgIHNlbGVjdGVkS2V5czogcHJvcHMuc2VsZWN0ZWRLZXlzLFxuICAgICAgICBldmVudEtleTogXCJcIi5jb25jYXQocHJvcHMuZXZlbnRLZXksIFwiLW1lbnUtXCIpLFxuICAgICAgICBvcGVuS2V5czogcHJvcHMub3BlbktleXMsXG4gICAgICAgIG1vdGlvbjogcHJvcHMubW90aW9uLFxuICAgICAgICBvbk9wZW5DaGFuZ2U6IF90aGlzLm9uT3BlbkNoYW5nZSxcbiAgICAgICAgc3ViTWVudU9wZW5EZWxheTogcHJvcHMuc3ViTWVudU9wZW5EZWxheSxcbiAgICAgICAgcGFyZW50TWVudTogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksXG4gICAgICAgIHN1Yk1lbnVDbG9zZURlbGF5OiBwcm9wcy5zdWJNZW51Q2xvc2VEZWxheSxcbiAgICAgICAgZm9yY2VTdWJNZW51UmVuZGVyOiBwcm9wcy5mb3JjZVN1Yk1lbnVSZW5kZXIsXG4gICAgICAgIHRyaWdnZXJTdWJNZW51QWN0aW9uOiBwcm9wcy50cmlnZ2VyU3ViTWVudUFjdGlvbixcbiAgICAgICAgYnVpbHRpblBsYWNlbWVudHM6IHByb3BzLmJ1aWx0aW5QbGFjZW1lbnRzLFxuICAgICAgICBkZWZhdWx0QWN0aXZlRmlyc3Q6IHByb3BzLnN0b3JlLmdldFN0YXRlKCkuZGVmYXVsdEFjdGl2ZUZpcnN0W2dldE1lbnVJZEZyb21TdWJNZW51RXZlbnRLZXkocHJvcHMuZXZlbnRLZXkpXSxcbiAgICAgICAgbXVsdGlwbGU6IHByb3BzLm11bHRpcGxlLFxuICAgICAgICBwcmVmaXhDbHM6IHByb3BzLnJvb3RQcmVmaXhDbHMsXG4gICAgICAgIGlkOiBfdGhpcy5pbnRlcm5hbE1lbnVJZCxcbiAgICAgICAgbWFudWFsUmVmOiBfdGhpcy5zYXZlTWVudUluc3RhbmNlLFxuICAgICAgICBpdGVtSWNvbjogcHJvcHMuaXRlbUljb24sXG4gICAgICAgIGV4cGFuZEljb246IHByb3BzLmV4cGFuZEljb24sXG4gICAgICAgIGRpcmVjdGlvbjogcHJvcHMuZGlyZWN0aW9uXG4gICAgICB9O1xuICAgIH07XG5cbiAgICBfdGhpcy5nZXRNb3Rpb24gPSBmdW5jdGlvbiAobW9kZSwgdmlzaWJsZSkge1xuICAgICAgdmFyIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZTMgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSxcbiAgICAgICAgICBoYXZlUmVuZGVyZWQgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemUzLmhhdmVSZW5kZXJlZDtcblxuICAgICAgdmFyIF90aGlzJHByb3BzNSA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIG1vdGlvbiA9IF90aGlzJHByb3BzNS5tb3Rpb24sXG4gICAgICAgICAgcm9vdFByZWZpeENscyA9IF90aGlzJHByb3BzNS5yb290UHJlZml4Q2xzOyAvLyBkb24ndCBzaG93IHRyYW5zaXRpb24gb24gZmlyc3QgcmVuZGVyaW5nIChubyBhbmltYXRpb24gZm9yIG9wZW5lZCBtZW51KVxuICAgICAgLy8gc2hvdyBhcHBlYXIgdHJhbnNpdGlvbiBpZiBpdCdzIG5vdCB2aXNpYmxlIChub3Qgc3VyZSB3aHkpXG4gICAgICAvLyBzaG93IGFwcGVhciB0cmFuc2l0aW9uIGlmIGl0J3Mgbm90IGlubGluZSBtb2RlXG5cbiAgICAgIHZhciBtZXJnZWRNb3Rpb24gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1vdGlvbiksIHt9LCB7XG4gICAgICAgIGxlYXZlZENsYXNzTmFtZTogXCJcIi5jb25jYXQocm9vdFByZWZpeENscywgXCItaGlkZGVuXCIpLFxuICAgICAgICByZW1vdmVPbkxlYXZlOiBmYWxzZSxcbiAgICAgICAgbW90aW9uQXBwZWFyOiBoYXZlUmVuZGVyZWQgfHwgIXZpc2libGUgfHwgbW9kZSAhPT0gJ2lubGluZSdcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gbWVyZ2VkTW90aW9uO1xuICAgIH07XG5cbiAgICB2YXIgc3RvcmUgPSBwcm9wcy5zdG9yZSxcbiAgICAgICAgZXZlbnRLZXkgPSBwcm9wcy5ldmVudEtleTtcblxuICAgIHZhciBfc3RvcmUkZ2V0U3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpLFxuICAgICAgICBkZWZhdWx0QWN0aXZlRmlyc3QgPSBfc3RvcmUkZ2V0U3RhdGUuZGVmYXVsdEFjdGl2ZUZpcnN0O1xuXG4gICAgX3RoaXMuaXNSb290TWVudSA9IGZhbHNlO1xuICAgIHZhciB2YWx1ZSA9IGZhbHNlO1xuXG4gICAgaWYgKGRlZmF1bHRBY3RpdmVGaXJzdCkge1xuICAgICAgdmFsdWUgPSBkZWZhdWx0QWN0aXZlRmlyc3RbZXZlbnRLZXldO1xuICAgIH1cblxuICAgIHVwZGF0ZURlZmF1bHRBY3RpdmVGaXJzdChzdG9yZSwgZXZlbnRLZXksIHZhbHVlKTtcbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG1vZGU6IHByb3BzLm1vZGUsXG4gICAgICBpc09wZW46IHByb3BzLmlzT3BlblxuICAgIH07XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFN1Yk1lbnUsIFt7XG4gICAga2V5OiBcImNvbXBvbmVudERpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdGhpcy5jb21wb25lbnREaWRVcGRhdGUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkVXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgX3RoaXMkcHJvcHM2ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBtb2RlID0gX3RoaXMkcHJvcHM2Lm1vZGUsXG4gICAgICAgICAgcGFyZW50TWVudSA9IF90aGlzJHByb3BzNi5wYXJlbnRNZW51LFxuICAgICAgICAgIG1hbnVhbFJlZiA9IF90aGlzJHByb3BzNi5tYW51YWxSZWYsXG4gICAgICAgICAgaXNPcGVuID0gX3RoaXMkcHJvcHM2LmlzT3BlbjtcblxuICAgICAgdmFyIHVwZGF0ZVN0YXRlID0gZnVuY3Rpb24gdXBkYXRlU3RhdGUoKSB7XG4gICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7XG4gICAgICAgICAgbW9kZTogbW9kZSxcbiAgICAgICAgICBpc09wZW46IGlzT3BlblxuICAgICAgICB9KTtcbiAgICAgIH07IC8vIERlbGF5IHN5bmMgd2hlbiBtb2RlIGNoYW5nZWQgaW4gY2FzZSBvcGVuS2V5cyBjaGFuZ2Ugbm90IHN5bmNcblxuXG4gICAgICB2YXIgaXNPcGVuQ2hhbmdlZCA9IGlzT3BlbiAhPT0gdGhpcy5zdGF0ZS5pc09wZW47XG4gICAgICB2YXIgaXNNb2RlQ2hhbmdlZCA9IG1vZGUgIT09IHRoaXMuc3RhdGUubW9kZTtcblxuICAgICAgaWYgKGlzTW9kZUNoYW5nZWQgfHwgaXNPcGVuQ2hhbmdlZCkge1xuICAgICAgICByYWYuY2FuY2VsKHRoaXMudXBkYXRlU3RhdGVSYWYpO1xuXG4gICAgICAgIGlmIChpc01vZGVDaGFuZ2VkKSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZVJhZiA9IHJhZih1cGRhdGVTdGF0ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBkYXRlU3RhdGUoKTtcbiAgICAgICAgfVxuICAgICAgfSAvLyBpbnZva2UgY3VzdG9taXplZCByZWYgdG8gZXhwb3NlIGNvbXBvbmVudCB0byBtaXhpblxuXG5cbiAgICAgIGlmIChtYW51YWxSZWYpIHtcbiAgICAgICAgbWFudWFsUmVmKHRoaXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAobW9kZSAhPT0gJ2hvcml6b250YWwnIHx8ICEocGFyZW50TWVudSA9PT0gbnVsbCB8fCBwYXJlbnRNZW51ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnRNZW51LmlzUm9vdE1lbnUpIHx8ICFpc09wZW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1pbldpZHRoVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMyLmFkanVzdFdpZHRoKCk7XG4gICAgICB9LCAwKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50V2lsbFVubW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHM3ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBvbkRlc3Ryb3kgPSBfdGhpcyRwcm9wczcub25EZXN0cm95LFxuICAgICAgICAgIGV2ZW50S2V5ID0gX3RoaXMkcHJvcHM3LmV2ZW50S2V5O1xuXG4gICAgICBpZiAob25EZXN0cm95KSB7XG4gICAgICAgIG9uRGVzdHJveShldmVudEtleSk7XG4gICAgICB9XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblxuXG4gICAgICBpZiAodGhpcy5taW5XaWR0aFRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubWluV2lkdGhUaW1lb3V0KTtcbiAgICAgIH1cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXG5cbiAgICAgIGlmICh0aGlzLm1vdXNlZW50ZXJUaW1lb3V0KSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLm1vdXNlZW50ZXJUaW1lb3V0KTtcbiAgICAgIH1cblxuICAgICAgcmFmLmNhbmNlbCh0aGlzLnVwZGF0ZVN0YXRlUmFmKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyUG9wdXBNZW51XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclBvcHVwTWVudShjbGFzc05hbWUsIHN0eWxlKSB7XG4gICAgICB2YXIgYmFzZVByb3BzID0gdGhpcy5nZXRCYXNlUHJvcHMoKTtcbiAgICAgIC8qKlxuICAgICAgICogem9tYmllajogV2h5IFN1YlBvcHVwTWVudSBoZXJlP1xuICAgICAgICogU2VlbXMgd2hhdGV2ZXIgcG9wdXAgb3IgaW5saW5lIG1vZGUgYm90aCB3aWxsIHJlbmRlciBTdWJQb3B1cE1lbnUuXG4gICAgICAgKiBJdCdzIGNvbnRyb2xsZWQgYnkgVHJpZ2dlciBmb3IgcG9wdXAgb3Igbm90LlxuICAgICAgICovXG5cbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdWJQb3B1cE1lbnUsIF9leHRlbmRzKHt9LCBiYXNlUHJvcHMsIHtcbiAgICAgICAgaWQ6IHRoaXMuaW50ZXJuYWxNZW51SWQsXG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICBzdHlsZTogc3R5bGVcbiAgICAgIH0pLCB0aGlzLnByb3BzLmNoaWxkcmVuKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyQ2hpbGRyZW5cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyQ2hpbGRyZW4oKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIGJhc2VQcm9wcyA9IHRoaXMuZ2V0QmFzZVByb3BzKCk7XG4gICAgICB2YXIgbW9kZSA9IGJhc2VQcm9wcy5tb2RlLFxuICAgICAgICAgIHZpc2libGUgPSBiYXNlUHJvcHMudmlzaWJsZSxcbiAgICAgICAgICBmb3JjZVN1Yk1lbnVSZW5kZXIgPSBiYXNlUHJvcHMuZm9yY2VTdWJNZW51UmVuZGVyLFxuICAgICAgICAgIGRpcmVjdGlvbiA9IGJhc2VQcm9wcy5kaXJlY3Rpb247IC8vIFtMZWdhY3ldIGdldE1vdGlvbiBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgYGhhdmVSZW5kZXJlZGBcblxuICAgICAgdmFyIG1lcmdlZE1vdGlvbiA9IHRoaXMuZ2V0TW90aW9uKG1vZGUsIHZpc2libGUpO1xuICAgICAgdGhpcy5oYXZlUmVuZGVyZWQgPSB0cnVlO1xuICAgICAgdGhpcy5oYXZlT3BlbmVkID0gdGhpcy5oYXZlT3BlbmVkIHx8IHZpc2libGUgfHwgZm9yY2VTdWJNZW51UmVuZGVyOyAvLyBuZXZlciByZW5kZXJlZCBub3QgcGxhbm5pbmcgdG8sIGRvbid0IHJlbmRlclxuXG4gICAgICBpZiAoIXRoaXMuaGF2ZU9wZW5lZCkge1xuICAgICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBzaGFyZWRDbGFzc05hbWUgPSBjbGFzc05hbWVzKFwiXCIuY29uY2F0KGJhc2VQcm9wcy5wcmVmaXhDbHMsIFwiLXN1YlwiKSwgX2RlZmluZVByb3BlcnR5KHt9LCBcIlwiLmNvbmNhdChiYXNlUHJvcHMucHJlZml4Q2xzLCBcIi1ydGxcIiksIGRpcmVjdGlvbiA9PT0gJ3J0bCcpKTtcblxuICAgICAgaWYgKCF0aGlzLmlzSW5saW5lTW9kZSgpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlclBvcHVwTWVudShzaGFyZWRDbGFzc05hbWUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ1NTTW90aW9uLCBfZXh0ZW5kcyh7XG4gICAgICAgIHZpc2libGU6IGJhc2VQcm9wcy52aXNpYmxlLFxuICAgICAgICBmb3JjZVJlbmRlcjogZm9yY2VTdWJNZW51UmVuZGVyXG4gICAgICB9LCBtZXJnZWRNb3Rpb24pLCBmdW5jdGlvbiAoX3JlZikge1xuICAgICAgICB2YXIgY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICAgICAgICBzdHlsZSA9IF9yZWYuc3R5bGU7XG4gICAgICAgIHZhciBtZXJnZWRDbGFzc05hbWUgPSBjbGFzc05hbWVzKHNoYXJlZENsYXNzTmFtZSwgY2xhc3NOYW1lKTtcbiAgICAgICAgcmV0dXJuIF90aGlzMy5yZW5kZXJQb3B1cE1lbnUobWVyZ2VkQ2xhc3NOYW1lLCBzdHlsZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfY2xhc3NOYW1lczIsIF9wcm9wcyRwYXJlbnRNZW51LCBfY2xhc3NOYW1lczM7XG5cbiAgICAgIHZhciBwcm9wcyA9IF9vYmplY3RTcHJlYWQoe30sIHRoaXMucHJvcHMpO1xuXG4gICAgICB2YXIgdmlzaWJsZSA9IHRoaXMuZ2V0VmlzaWJsZSgpO1xuICAgICAgdmFyIHByZWZpeENscyA9IHRoaXMuZ2V0UHJlZml4Q2xzKCk7XG4gICAgICB2YXIgaW5saW5lID0gdGhpcy5pc0lubGluZU1vZGUoKTtcbiAgICAgIHZhciBtZXJnZWRNb2RlID0gdGhpcy5nZXRNb2RlKCk7XG4gICAgICB2YXIgY2xhc3NOYW1lID0gY2xhc3NOYW1lcyhwcmVmaXhDbHMsIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItXCIpLmNvbmNhdChtZXJnZWRNb2RlKSwgKF9jbGFzc05hbWVzMiA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMyLCBwcm9wcy5jbGFzc05hbWUsICEhcHJvcHMuY2xhc3NOYW1lKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzMiwgdGhpcy5nZXRPcGVuQ2xhc3NOYW1lKCksIHZpc2libGUpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMyLCB0aGlzLmdldEFjdGl2ZUNsYXNzTmFtZSgpLCBwcm9wcy5hY3RpdmUgfHwgdmlzaWJsZSAmJiAhaW5saW5lKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzMiwgdGhpcy5nZXREaXNhYmxlZENsYXNzTmFtZSgpLCBwcm9wcy5kaXNhYmxlZCksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lczIsIHRoaXMuZ2V0U2VsZWN0ZWRDbGFzc05hbWUoKSwgdGhpcy5pc0NoaWxkcmVuU2VsZWN0ZWQoKSksIF9jbGFzc05hbWVzMikpO1xuXG4gICAgICBpZiAoIXRoaXMuaW50ZXJuYWxNZW51SWQpIHtcbiAgICAgICAgaWYgKHByb3BzLmV2ZW50S2V5KSB7XG4gICAgICAgICAgdGhpcy5pbnRlcm5hbE1lbnVJZCA9IFwiXCIuY29uY2F0KHByb3BzLmV2ZW50S2V5LCBcIiRNZW51XCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGd1aWQgKz0gMTtcbiAgICAgICAgICB0aGlzLmludGVybmFsTWVudUlkID0gXCIkX18kXCIuY29uY2F0KGd1aWQsIFwiJE1lbnVcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIG1vdXNlRXZlbnRzID0ge307XG4gICAgICB2YXIgdGl0bGVDbGlja0V2ZW50cyA9IHt9O1xuICAgICAgdmFyIHRpdGxlTW91c2VFdmVudHMgPSB7fTtcblxuICAgICAgaWYgKCFwcm9wcy5kaXNhYmxlZCkge1xuICAgICAgICBtb3VzZUV2ZW50cyA9IHtcbiAgICAgICAgICBvbk1vdXNlTGVhdmU6IHRoaXMub25Nb3VzZUxlYXZlLFxuICAgICAgICAgIG9uTW91c2VFbnRlcjogdGhpcy5vbk1vdXNlRW50ZXJcbiAgICAgICAgfTsgLy8gb25seSB3b3JrcyBpbiB0aXRsZSwgbm90IG91dGVyIGxpXG5cbiAgICAgICAgdGl0bGVDbGlja0V2ZW50cyA9IHtcbiAgICAgICAgICBvbkNsaWNrOiB0aGlzLm9uVGl0bGVDbGlja1xuICAgICAgICB9O1xuICAgICAgICB0aXRsZU1vdXNlRXZlbnRzID0ge1xuICAgICAgICAgIG9uTW91c2VFbnRlcjogdGhpcy5vblRpdGxlTW91c2VFbnRlcixcbiAgICAgICAgICBvbk1vdXNlTGVhdmU6IHRoaXMub25UaXRsZU1vdXNlTGVhdmVcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0eWxlID0ge307XG4gICAgICB2YXIgZGlyZWN0aW9uID0gcHJvcHMuZGlyZWN0aW9uO1xuICAgICAgdmFyIGlzUlRMID0gZGlyZWN0aW9uID09PSAncnRsJztcblxuICAgICAgaWYgKGlubGluZSkge1xuICAgICAgICBpZiAoaXNSVEwpIHtcbiAgICAgICAgICBzdHlsZS5wYWRkaW5nUmlnaHQgPSBwcm9wcy5pbmxpbmVJbmRlbnQgKiBwcm9wcy5sZXZlbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHlsZS5wYWRkaW5nTGVmdCA9IHByb3BzLmlubGluZUluZGVudCAqIHByb3BzLmxldmVsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBhcmlhT3ducyA9IHt9OyAvLyBvbmx5IHNldCBhcmlhLW93bnMgd2hlbiBtZW51IGlzIG9wZW5cbiAgICAgIC8vIG90aGVyd2lzZSBpdCB3b3VsZCBiZSBhbiBpbnZhbGlkIGFyaWEtb3ducyB2YWx1ZVxuICAgICAgLy8gc2luY2UgY29ycmVzcG9uZGluZyBub2RlIGNhbm5vdCBiZSBmb3VuZFxuXG4gICAgICBpZiAodGhpcy5nZXRWaXNpYmxlKCkpIHtcbiAgICAgICAgYXJpYU93bnMgPSB7XG4gICAgICAgICAgJ2FyaWEtb3ducyc6IHRoaXMuaW50ZXJuYWxNZW51SWRcbiAgICAgICAgfTtcbiAgICAgIH0gLy8gZXhwYW5kIGN1c3RvbSBpY29uIHNob3VsZCBOT1QgYmUgZGlzcGxheWVkIGluIG1lbnUgd2l0aCBob3Jpem9udGFsIG1vZGUuXG5cblxuICAgICAgdmFyIGljb24gPSBudWxsO1xuXG4gICAgICBpZiAobWVyZ2VkTW9kZSAhPT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgIGljb24gPSB0aGlzLnByb3BzLmV4cGFuZEljb247IC8vIFJlYWN0Tm9kZVxuXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5leHBhbmRJY29uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgaWNvbiA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KHRoaXMucHJvcHMuZXhwYW5kSWNvbiwgX29iamVjdFNwcmVhZCh7fSwgdGhpcy5wcm9wcykpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciB0aXRsZSA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9leHRlbmRzKHtcbiAgICAgICAgcmVmOiB0aGlzLnNhdmVTdWJNZW51VGl0bGUsXG4gICAgICAgIHN0eWxlOiBzdHlsZSxcbiAgICAgICAgY2xhc3NOYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXRpdGxlXCIpLFxuICAgICAgICByb2xlOiBcImJ1dHRvblwiXG4gICAgICB9LCB0aXRsZU1vdXNlRXZlbnRzLCB0aXRsZUNsaWNrRXZlbnRzLCB7XG4gICAgICAgIFwiYXJpYS1leHBhbmRlZFwiOiB2aXNpYmxlXG4gICAgICB9LCBhcmlhT3ducywge1xuICAgICAgICBcImFyaWEtaGFzcG9wdXBcIjogXCJ0cnVlXCIsXG4gICAgICAgIHRpdGxlOiB0eXBlb2YgcHJvcHMudGl0bGUgPT09ICdzdHJpbmcnID8gcHJvcHMudGl0bGUgOiB1bmRlZmluZWRcbiAgICAgIH0pLCBwcm9wcy50aXRsZSwgaWNvbiB8fCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImlcIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItYXJyb3dcIilcbiAgICAgIH0pKTtcbiAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMucmVuZGVyQ2hpbGRyZW4oKTtcbiAgICAgIHZhciBnZXRQb3B1cENvbnRhaW5lciA9ICgoX3Byb3BzJHBhcmVudE1lbnUgPSBwcm9wcy5wYXJlbnRNZW51KSA9PT0gbnVsbCB8fCBfcHJvcHMkcGFyZW50TWVudSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3BzJHBhcmVudE1lbnUuaXNSb290TWVudSkgPyBwcm9wcy5wYXJlbnRNZW51LnByb3BzLmdldFBvcHVwQ29udGFpbmVyIDogZnVuY3Rpb24gKHRyaWdnZXJOb2RlKSB7XG4gICAgICAgIHJldHVybiB0cmlnZ2VyTm9kZS5wYXJlbnROb2RlO1xuICAgICAgfTtcbiAgICAgIHZhciBwb3B1cFBsYWNlbWVudCA9IHBvcHVwUGxhY2VtZW50TWFwW21lcmdlZE1vZGVdO1xuICAgICAgdmFyIHBvcHVwQWxpZ24gPSBwcm9wcy5wb3B1cE9mZnNldCA/IHtcbiAgICAgICAgb2Zmc2V0OiBwcm9wcy5wb3B1cE9mZnNldFxuICAgICAgfSA6IHt9O1xuICAgICAgdmFyIHBvcHVwQ2xhc3NOYW1lID0gY2xhc3NOYW1lcygoX2NsYXNzTmFtZXMzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lczMsIHByb3BzLnBvcHVwQ2xhc3NOYW1lLCBwcm9wcy5wb3B1cENsYXNzTmFtZSAmJiAhaW5saW5lKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzMywgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1ydGxcIiksIGlzUlRMKSwgX2NsYXNzTmFtZXMzKSk7XG4gICAgICB2YXIgZGlzYWJsZWQgPSBwcm9wcy5kaXNhYmxlZCxcbiAgICAgICAgICB0cmlnZ2VyU3ViTWVudUFjdGlvbiA9IHByb3BzLnRyaWdnZXJTdWJNZW51QWN0aW9uLFxuICAgICAgICAgIHN1Yk1lbnVPcGVuRGVsYXkgPSBwcm9wcy5zdWJNZW51T3BlbkRlbGF5LFxuICAgICAgICAgIGZvcmNlU3ViTWVudVJlbmRlciA9IHByb3BzLmZvcmNlU3ViTWVudVJlbmRlcixcbiAgICAgICAgICBzdWJNZW51Q2xvc2VEZWxheSA9IHByb3BzLnN1Yk1lbnVDbG9zZURlbGF5LFxuICAgICAgICAgIGJ1aWx0aW5QbGFjZW1lbnRzID0gcHJvcHMuYnVpbHRpblBsYWNlbWVudHM7XG4gICAgICBtZW51QWxsUHJvcHMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBkZWxldGUgcHJvcHNba2V5XTtcbiAgICAgIH0pOyAvLyBTZXQgb25DbGljayB0byBudWxsLCB0byBpZ25vcmUgcHJvcGFnYXRlZCBvbkNsaWNrIGV2ZW50XG5cbiAgICAgIGRlbGV0ZSBwcm9wcy5vbkNsaWNrO1xuICAgICAgdmFyIHBsYWNlbWVudCA9IGlzUlRMID8gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwbGFjZW1lbnRzUnRsKSwgYnVpbHRpblBsYWNlbWVudHMpIDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwbGFjZW1lbnRzKSwgYnVpbHRpblBsYWNlbWVudHMpO1xuICAgICAgZGVsZXRlIHByb3BzLmRpcmVjdGlvbjsgLy8gW0xlZ2FjeV0gSXQncyBhIGZhc3QgZml4LFxuICAgICAgLy8gYnV0IHdlIHNob3VsZCBjaGVjayBpZiB3ZSBjYW4gcmVmYWN0b3IgdGhpcyB0byBtYWtlIGNvZGUgbW9yZSBlYXN5IHRvIHVuZGVyc3RhbmRcblxuICAgICAgdmFyIGJhc2VQcm9wcyA9IHRoaXMuZ2V0QmFzZVByb3BzKCk7XG4gICAgICB2YXIgbWVyZ2VkTW90aW9uID0gaW5saW5lID8gbnVsbCA6IHRoaXMuZ2V0TW90aW9uKGJhc2VQcm9wcy5tb2RlLCBiYXNlUHJvcHMudmlzaWJsZSk7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIG1vdXNlRXZlbnRzLCB7XG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICByb2xlOiBcIm1lbnVpdGVtXCJcbiAgICAgIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmlnZ2VyLCB7XG4gICAgICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgICAgICBwb3B1cENsYXNzTmFtZTogY2xhc3NOYW1lcyhcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLXBvcHVwXCIpLCBwb3B1cENsYXNzTmFtZSksXG4gICAgICAgIGdldFBvcHVwQ29udGFpbmVyOiBnZXRQb3B1cENvbnRhaW5lcixcbiAgICAgICAgYnVpbHRpblBsYWNlbWVudHM6IHBsYWNlbWVudCxcbiAgICAgICAgcG9wdXBQbGFjZW1lbnQ6IHBvcHVwUGxhY2VtZW50LFxuICAgICAgICBwb3B1cFZpc2libGU6IGlubGluZSA/IGZhbHNlIDogdmlzaWJsZSxcbiAgICAgICAgcG9wdXBBbGlnbjogcG9wdXBBbGlnbixcbiAgICAgICAgcG9wdXA6IGlubGluZSA/IG51bGwgOiBjaGlsZHJlbixcbiAgICAgICAgYWN0aW9uOiBkaXNhYmxlZCB8fCBpbmxpbmUgPyBbXSA6IFt0cmlnZ2VyU3ViTWVudUFjdGlvbl0sXG4gICAgICAgIG1vdXNlRW50ZXJEZWxheTogc3ViTWVudU9wZW5EZWxheSxcbiAgICAgICAgbW91c2VMZWF2ZURlbGF5OiBzdWJNZW51Q2xvc2VEZWxheSxcbiAgICAgICAgb25Qb3B1cFZpc2libGVDaGFuZ2U6IHRoaXMub25Qb3B1cFZpc2libGVDaGFuZ2UsXG4gICAgICAgIGZvcmNlUmVuZGVyOiBmb3JjZVN1Yk1lbnVSZW5kZXIsXG4gICAgICAgIHBvcHVwTW90aW9uOiBtZXJnZWRNb3Rpb25cbiAgICAgIH0sIHRpdGxlKSwgaW5saW5lID8gY2hpbGRyZW4gOiBudWxsKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU3ViTWVudTtcbn0oUmVhY3QuQ29tcG9uZW50KTtcblN1Yk1lbnUuZGVmYXVsdFByb3BzID0ge1xuICBvbk1vdXNlRW50ZXI6IG5vb3AsXG4gIG9uTW91c2VMZWF2ZTogbm9vcCxcbiAgb25UaXRsZU1vdXNlRW50ZXI6IG5vb3AsXG4gIG9uVGl0bGVNb3VzZUxlYXZlOiBub29wLFxuICBvblRpdGxlQ2xpY2s6IG5vb3AsXG4gIG1hbnVhbFJlZjogbm9vcCxcbiAgbW9kZTogJ3ZlcnRpY2FsJyxcbiAgdGl0bGU6ICcnXG59O1xudmFyIGNvbm5lY3RlZCA9IGNvbm5lY3QoZnVuY3Rpb24gKF9yZWYyLCBfcmVmMykge1xuICB2YXIgb3BlbktleXMgPSBfcmVmMi5vcGVuS2V5cyxcbiAgICAgIGFjdGl2ZUtleSA9IF9yZWYyLmFjdGl2ZUtleSxcbiAgICAgIHNlbGVjdGVkS2V5cyA9IF9yZWYyLnNlbGVjdGVkS2V5cztcbiAgdmFyIGV2ZW50S2V5ID0gX3JlZjMuZXZlbnRLZXksXG4gICAgICBzdWJNZW51S2V5ID0gX3JlZjMuc3ViTWVudUtleTtcbiAgcmV0dXJuIHtcbiAgICBpc09wZW46IG9wZW5LZXlzLmluZGV4T2YoZXZlbnRLZXkpID4gLTEsXG4gICAgYWN0aXZlOiBhY3RpdmVLZXlbc3ViTWVudUtleV0gPT09IGV2ZW50S2V5LFxuICAgIHNlbGVjdGVkS2V5czogc2VsZWN0ZWRLZXlzXG4gIH07XG59KShTdWJNZW51KTtcbmNvbm5lY3RlZC5pc1N1Yk1lbnUgPSB0cnVlO1xuZXhwb3J0IGRlZmF1bHQgY29ubmVjdGVkOyIsImltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5XCI7XG5pbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc1wiO1xuaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2tcIjtcbmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzXCI7XG5pbXBvcnQgX2luaGVyaXRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0c1wiO1xuaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXJcIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZXNpemVPYnNlcnZlciBmcm9tICdyZXNpemUtb2JzZXJ2ZXItcG9seWZpbGwnO1xuaW1wb3J0IFN1Yk1lbnUgZnJvbSAnLi9TdWJNZW51JztcbmltcG9ydCB7IGdldFdpZHRoLCBzZXRTdHlsZSwgbWVudUFsbFByb3BzIH0gZnJvbSAnLi91dGlsJztcbnZhciBNRU5VSVRFTV9PVkVSRkxPV0VEX0NMQVNTTkFNRSA9ICdtZW51aXRlbS1vdmVyZmxvd2VkJztcbnZhciBGTE9BVF9QUkVDSVNJT05fQURKVVNUID0gMC41O1xuXG52YXIgRE9NV3JhcCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoRE9NV3JhcCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihET01XcmFwKTtcblxuICBmdW5jdGlvbiBET01XcmFwKCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBET01XcmFwKTtcblxuICAgIF90aGlzID0gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgX3RoaXMucmVzaXplT2JzZXJ2ZXIgPSBudWxsO1xuICAgIF90aGlzLm11dGF0aW9uT2JzZXJ2ZXIgPSBudWxsOyAvLyBvcmlnaW5hbCBzY3JvbGwgc2l6ZSBvZiB0aGUgbGlzdFxuXG4gICAgX3RoaXMub3JpZ2luYWxUb3RhbFdpZHRoID0gMDsgLy8gY29weSBvZiBvdmVyZmxvd2VkIGl0ZW1zXG5cbiAgICBfdGhpcy5vdmVyZmxvd2VkSXRlbXMgPSBbXTsgLy8gY2FjaGUgaXRlbSBvZiB0aGUgb3JpZ2luYWwgaXRlbXMgKHNvIHdlIGNhbiB0cmFjayB0aGUgc2l6ZSBhbmQgb3JkZXIpXG5cbiAgICBfdGhpcy5tZW51SXRlbVNpemVzID0gW107XG4gICAgX3RoaXMuY2FuY2VsRnJhbWVJZCA9IG51bGw7XG4gICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBsYXN0VmlzaWJsZUluZGV4OiB1bmRlZmluZWRcbiAgICB9O1xuICAgIF90aGlzLmNoaWxkUmVmID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZVJlZigpOyAvLyBnZXQgYWxsIHZhbGlkIG1lbnVJdGVtIG5vZGVzXG5cbiAgICBfdGhpcy5nZXRNZW51SXRlbU5vZGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHByZWZpeENscyA9IF90aGlzLnByb3BzLnByZWZpeENscztcbiAgICAgIHZhciB1bCA9IF90aGlzLmNoaWxkUmVmLmN1cnJlbnQ7XG5cbiAgICAgIGlmICghdWwpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfSAvLyBmaWx0ZXIgb3V0IGFsbCBvdmVyZmxvd2VkIGluZGljYXRvciBwbGFjZWhvbGRlclxuXG5cbiAgICAgIHJldHVybiBbXS5zbGljZS5jYWxsKHVsLmNoaWxkcmVuKS5maWx0ZXIoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuY2xhc3NOYW1lLnNwbGl0KCcgJykuaW5kZXhPZihcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLW92ZXJmbG93ZWQtc3VibWVudVwiKSkgPCAwO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF90aGlzLmdldE92ZXJmbG93ZWRTdWJNZW51SXRlbSA9IGZ1bmN0aW9uIChrZXlQcmVmaXgsIG92ZXJmbG93ZWRJdGVtcywgcmVuZGVyUGxhY2Vob2xkZXIpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIG92ZXJmbG93ZWRJbmRpY2F0b3IgPSBfdGhpcyRwcm9wcy5vdmVyZmxvd2VkSW5kaWNhdG9yLFxuICAgICAgICAgIGxldmVsID0gX3RoaXMkcHJvcHMubGV2ZWwsXG4gICAgICAgICAgbW9kZSA9IF90aGlzJHByb3BzLm1vZGUsXG4gICAgICAgICAgcHJlZml4Q2xzID0gX3RoaXMkcHJvcHMucHJlZml4Q2xzLFxuICAgICAgICAgIHRoZW1lID0gX3RoaXMkcHJvcHMudGhlbWU7XG5cbiAgICAgIGlmIChsZXZlbCAhPT0gMSB8fCBtb2RlICE9PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9IC8vIHB1dCBhbGwgdGhlIG92ZXJmbG93ZWQgaXRlbSBpbnNpZGUgYSBzdWJtZW51XG4gICAgICAvLyB3aXRoIGEgdGl0bGUgb2Ygb3ZlcmZsb3cgaW5kaWNhdG9yICgnLi4uJylcblxuXG4gICAgICB2YXIgY29weSA9IF90aGlzLnByb3BzLmNoaWxkcmVuWzBdO1xuXG4gICAgICB2YXIgX2NvcHkkcHJvcHMgPSBjb3B5LnByb3BzLFxuICAgICAgICAgIHRocm93QXdheSA9IF9jb3B5JHByb3BzLmNoaWxkcmVuLFxuICAgICAgICAgIHRpdGxlID0gX2NvcHkkcHJvcHMudGl0bGUsXG4gICAgICAgICAgcHJvcFN0eWxlID0gX2NvcHkkcHJvcHMuc3R5bGUsXG4gICAgICAgICAgcmVzdCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfY29weSRwcm9wcywgW1wiY2hpbGRyZW5cIiwgXCJ0aXRsZVwiLCBcInN0eWxlXCJdKTtcblxuICAgICAgdmFyIHN0eWxlID0gX29iamVjdFNwcmVhZCh7fSwgcHJvcFN0eWxlKTtcblxuICAgICAgdmFyIGtleSA9IFwiXCIuY29uY2F0KGtleVByZWZpeCwgXCItb3ZlcmZsb3dlZC1pbmRpY2F0b3JcIik7XG4gICAgICB2YXIgZXZlbnRLZXkgPSBcIlwiLmNvbmNhdChrZXlQcmVmaXgsIFwiLW92ZXJmbG93ZWQtaW5kaWNhdG9yXCIpO1xuXG4gICAgICBpZiAob3ZlcmZsb3dlZEl0ZW1zLmxlbmd0aCA9PT0gMCAmJiByZW5kZXJQbGFjZWhvbGRlciAhPT0gdHJ1ZSkge1xuICAgICAgICBzdHlsZSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3R5bGUpLCB7fSwge1xuICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocmVuZGVyUGxhY2Vob2xkZXIpIHtcbiAgICAgICAgc3R5bGUgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0eWxlKSwge30sIHtcbiAgICAgICAgICB2aXNpYmlsaXR5OiAnaGlkZGVuJyxcbiAgICAgICAgICAvLyBwcmV2ZW50IGZyb20gdGFraW5nIG5vcm1hbCBkb20gc3BhY2VcbiAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJ1xuICAgICAgICB9KTtcbiAgICAgICAga2V5ID0gXCJcIi5jb25jYXQoa2V5LCBcIi1wbGFjZWhvbGRlclwiKTtcbiAgICAgICAgZXZlbnRLZXkgPSBcIlwiLmNvbmNhdChldmVudEtleSwgXCItcGxhY2Vob2xkZXJcIik7XG4gICAgICB9XG5cbiAgICAgIHZhciBwb3B1cENsYXNzTmFtZSA9IHRoZW1lID8gXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1cIikuY29uY2F0KHRoZW1lKSA6ICcnO1xuICAgICAgdmFyIHByb3BzID0ge307XG4gICAgICBtZW51QWxsUHJvcHMuZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgICAgICBpZiAocmVzdFtrXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcHJvcHNba10gPSByZXN0W2tdO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdWJNZW51LCBfZXh0ZW5kcyh7XG4gICAgICAgIHRpdGxlOiBvdmVyZmxvd2VkSW5kaWNhdG9yLFxuICAgICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItb3ZlcmZsb3dlZC1zdWJtZW51XCIpLFxuICAgICAgICBwb3B1cENsYXNzTmFtZTogcG9wdXBDbGFzc05hbWVcbiAgICAgIH0sIHByb3BzLCB7XG4gICAgICAgIGtleToga2V5LFxuICAgICAgICBldmVudEtleTogZXZlbnRLZXksXG4gICAgICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICAgICAgc3R5bGU6IHN0eWxlXG4gICAgICB9KSwgb3ZlcmZsb3dlZEl0ZW1zKTtcbiAgICB9OyAvLyBtZW1vcml6ZSByZW5kZXJlZCBtZW51U2l6ZVxuXG5cbiAgICBfdGhpcy5zZXRDaGlsZHJlbldpZHRoQW5kUmVzaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF90aGlzLnByb3BzLm1vZGUgIT09ICdob3Jpem9udGFsJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciB1bCA9IF90aGlzLmNoaWxkUmVmLmN1cnJlbnQ7XG5cbiAgICAgIGlmICghdWwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgdWxDaGlsZHJlbk5vZGVzID0gdWwuY2hpbGRyZW47XG5cbiAgICAgIGlmICghdWxDaGlsZHJlbk5vZGVzIHx8IHVsQ2hpbGRyZW5Ob2Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgbGFzdE92ZXJmbG93ZWRJbmRpY2F0b3JQbGFjZWhvbGRlciA9IHVsLmNoaWxkcmVuW3VsQ2hpbGRyZW5Ob2Rlcy5sZW5ndGggLSAxXTsgLy8gbmVlZCBsYXN0IG92ZXJmbG93ZWQgaW5kaWNhdG9yIGZvciBjYWxjdWxhdGluZyBsZW5ndGg7XG5cbiAgICAgIHNldFN0eWxlKGxhc3RPdmVyZmxvd2VkSW5kaWNhdG9yUGxhY2Vob2xkZXIsICdkaXNwbGF5JywgJ2lubGluZS1ibG9jaycpO1xuXG4gICAgICB2YXIgbWVudUl0ZW1Ob2RlcyA9IF90aGlzLmdldE1lbnVJdGVtTm9kZXMoKTsgLy8gcmVzZXQgZGlzcGxheSBhdHRyaWJ1dGUgZm9yIGFsbCBoaWRkZW4gZWxlbWVudHMgY2F1c2VkIGJ5IG92ZXJmbG93IHRvIGNhbGN1bGF0ZSB1cGRhdGVkIHdpZHRoXG4gICAgICAvLyBhbmQgdGhlbiByZXNldCB0byBvcmlnaW5hbCBzdGF0ZSBhZnRlciB3aWR0aCBjYWxjdWxhdGlvblxuXG5cbiAgICAgIHZhciBvdmVyZmxvd2VkSXRlbXMgPSBtZW51SXRlbU5vZGVzLmZpbHRlcihmdW5jdGlvbiAoYykge1xuICAgICAgICByZXR1cm4gYy5jbGFzc05hbWUuc3BsaXQoJyAnKS5pbmRleE9mKE1FTlVJVEVNX09WRVJGTE9XRURfQ0xBU1NOQU1FKSA+PSAwO1xuICAgICAgfSk7XG4gICAgICBvdmVyZmxvd2VkSXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICBzZXRTdHlsZShjLCAnZGlzcGxheScsICdpbmxpbmUtYmxvY2snKTtcbiAgICAgIH0pO1xuICAgICAgX3RoaXMubWVudUl0ZW1TaXplcyA9IG1lbnVJdGVtTm9kZXMubWFwKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIHJldHVybiBnZXRXaWR0aChjLCB0cnVlKTtcbiAgICAgIH0pO1xuICAgICAgb3ZlcmZsb3dlZEl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgc2V0U3R5bGUoYywgJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgfSk7XG4gICAgICBfdGhpcy5vdmVyZmxvd2VkSW5kaWNhdG9yV2lkdGggPSBnZXRXaWR0aCh1bC5jaGlsZHJlblt1bC5jaGlsZHJlbi5sZW5ndGggLSAxXSwgdHJ1ZSk7XG4gICAgICBfdGhpcy5vcmlnaW5hbFRvdGFsV2lkdGggPSBfdGhpcy5tZW51SXRlbVNpemVzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBjdXIpIHtcbiAgICAgICAgcmV0dXJuIGFjYyArIGN1cjtcbiAgICAgIH0sIDApO1xuXG4gICAgICBfdGhpcy5oYW5kbGVSZXNpemUoKTsgLy8gcHJldmVudCB0aGUgb3ZlcmZsb3dlZCBpbmRpY2F0b3IgZnJvbSB0YWtpbmcgc3BhY2U7XG5cblxuICAgICAgc2V0U3R5bGUobGFzdE92ZXJmbG93ZWRJbmRpY2F0b3JQbGFjZWhvbGRlciwgJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgIH07XG5cbiAgICBfdGhpcy5oYW5kbGVSZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMubW9kZSAhPT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHVsID0gX3RoaXMuY2hpbGRSZWYuY3VycmVudDtcblxuICAgICAgaWYgKCF1bCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciB3aWR0aCA9IGdldFdpZHRoKHVsKTtcbiAgICAgIF90aGlzLm92ZXJmbG93ZWRJdGVtcyA9IFtdO1xuICAgICAgdmFyIGN1cnJlbnRTdW1XaWR0aCA9IDA7IC8vIGluZGV4IGZvciBsYXN0IHZpc2libGUgY2hpbGQgaW4gaG9yaXpvbnRhbCBtb2RlXG5cbiAgICAgIHZhciBsYXN0VmlzaWJsZUluZGV4OyAvLyBmbG9hdCBudW1iZXIgY29tcGFyaXNvbiBjb3VsZCBiZSBwcm9ibGVtYXRpY1xuICAgICAgLy8gZS5nLiAwLjEgKyAwLjIgPiAwLjMgPT09PT0+IHRydWVcbiAgICAgIC8vIHRodXMgdXNpbmcgRkxPQVRfUFJFQ0lTSU9OX0FESlVTVCBhcyBidWZmZXIgdG8gaGVscCB0aGUgc2l0dWF0aW9uXG5cbiAgICAgIGlmIChfdGhpcy5vcmlnaW5hbFRvdGFsV2lkdGggPiB3aWR0aCArIEZMT0FUX1BSRUNJU0lPTl9BREpVU1QpIHtcbiAgICAgICAgbGFzdFZpc2libGVJbmRleCA9IC0xO1xuXG4gICAgICAgIF90aGlzLm1lbnVJdGVtU2l6ZXMuZm9yRWFjaChmdW5jdGlvbiAobGlXaWR0aCkge1xuICAgICAgICAgIGN1cnJlbnRTdW1XaWR0aCArPSBsaVdpZHRoO1xuXG4gICAgICAgICAgaWYgKGN1cnJlbnRTdW1XaWR0aCArIF90aGlzLm92ZXJmbG93ZWRJbmRpY2F0b3JXaWR0aCA8PSB3aWR0aCkge1xuICAgICAgICAgICAgbGFzdFZpc2libGVJbmRleCArPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgbGFzdFZpc2libGVJbmRleDogbGFzdFZpc2libGVJbmRleFxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhET01XcmFwLCBbe1xuICAgIGtleTogXCJjb21wb25lbnREaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB0aGlzLnNldENoaWxkcmVuV2lkdGhBbmRSZXNpemUoKTtcblxuICAgICAgaWYgKHRoaXMucHJvcHMubGV2ZWwgPT09IDEgJiYgdGhpcy5wcm9wcy5tb2RlID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgdmFyIG1lbnVVbCA9IHRoaXMuY2hpbGRSZWYuY3VycmVudDtcblxuICAgICAgICBpZiAoIW1lbnVVbCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoZnVuY3Rpb24gKGVudHJpZXMpIHtcbiAgICAgICAgICBlbnRyaWVzLmZvckVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNhbmNlbEZyYW1lSWQgPSBfdGhpczIuY2FuY2VsRnJhbWVJZDtcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGNhbmNlbEZyYW1lSWQpO1xuICAgICAgICAgICAgX3RoaXMyLmNhbmNlbEZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoX3RoaXMyLnNldENoaWxkcmVuV2lkdGhBbmRSZXNpemUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgW10uc2xpY2UuY2FsbChtZW51VWwuY2hpbGRyZW4pLmNvbmNhdChtZW51VWwpLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgX3RoaXMyLnJlc2l6ZU9ic2VydmVyLm9ic2VydmUoZWwpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMyLnJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblxuICAgICAgICAgICAgW10uc2xpY2UuY2FsbChtZW51VWwuY2hpbGRyZW4pLmNvbmNhdChtZW51VWwpLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgIF90aGlzMi5yZXNpemVPYnNlcnZlci5vYnNlcnZlKGVsKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBfdGhpczIuc2V0Q2hpbGRyZW5XaWR0aEFuZFJlc2l6ZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlci5vYnNlcnZlKG1lbnVVbCwge1xuICAgICAgICAgICAgYXR0cmlidXRlczogZmFsc2UsXG4gICAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgICBzdWJUcmVlOiBmYWxzZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgaWYgKHRoaXMucmVzaXplT2JzZXJ2ZXIpIHtcbiAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgIH1cblxuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5jYW5jZWxGcmFtZUlkKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyQ2hpbGRyZW5cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyQ2hpbGRyZW4oY2hpbGRyZW4pIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAvLyBuZWVkIHRvIHRha2UgY2FyZSBvZiBvdmVyZmxvd2VkIGl0ZW1zIGluIGhvcml6b250YWwgbW9kZVxuICAgICAgdmFyIGxhc3RWaXNpYmxlSW5kZXggPSB0aGlzLnN0YXRlLmxhc3RWaXNpYmxlSW5kZXg7XG4gICAgICByZXR1cm4gKGNoaWxkcmVuIHx8IFtdKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY2hpbGROb2RlLCBpbmRleCkge1xuICAgICAgICB2YXIgaXRlbSA9IGNoaWxkTm9kZTtcblxuICAgICAgICBpZiAoX3RoaXMzLnByb3BzLm1vZGUgPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgIHZhciBvdmVyZmxvd2VkID0gX3RoaXMzLmdldE92ZXJmbG93ZWRTdWJNZW51SXRlbShjaGlsZE5vZGUucHJvcHMuZXZlbnRLZXksIFtdKTtcblxuICAgICAgICAgIGlmIChsYXN0VmlzaWJsZUluZGV4ICE9PSB1bmRlZmluZWQgJiYgX3RoaXMzLnByb3BzLmNsYXNzTmFtZS5pbmRleE9mKFwiXCIuY29uY2F0KF90aGlzMy5wcm9wcy5wcmVmaXhDbHMsIFwiLXJvb3RcIikpICE9PSAtMSkge1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gbGFzdFZpc2libGVJbmRleCkge1xuICAgICAgICAgICAgICBpdGVtID0gLyojX19QVVJFX18qL1JlYWN0LmNsb25lRWxlbWVudChjaGlsZE5vZGUsIC8vIOi/memHjOS/ruaUuSBldmVudEtleSDmmK/kuLrkuobpmLLmraLpmpDol4/nirbmgIHkuIvov5jkvJrop6blj5Egb3BlbmtleXMg5LqL5Lu2XG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBldmVudEtleTogXCJcIi5jb25jYXQoY2hpbGROb2RlLnByb3BzLmV2ZW50S2V5LCBcIi1oaWRkZW5cIiksXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBMZWdhY3kgY29kZS4gSGVyZSBgY2xhc3NOYW1lYCBuZXZlciB1c2VkOlxuICAgICAgICAgICAgICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdC1jb21wb25lbnQvbWVudS9jb21taXQvNGNkNmI0OWZjZTlkMTE2NzI2ZjRlYTAwZGRhODUzMjVkNmYyNjUwMCNkaWZmLWUyZmE0OGY3NWMyZGQyMzE4Mjk1Y2RlNDI4NTU2YTc2UjI0MFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQoTUVOVUlURU1fT1ZFUkZMT1dFRF9DTEFTU05BTUUpXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IGxhc3RWaXNpYmxlSW5kZXggKyAxKSB7XG4gICAgICAgICAgICAgIF90aGlzMy5vdmVyZmxvd2VkSXRlbXMgPSBjaGlsZHJlbi5zbGljZShsYXN0VmlzaWJsZUluZGV4ICsgMSkubWFwKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jbG9uZUVsZW1lbnQoYywgLy8gY2hpbGRyZW5baW5kZXhdLmtleSB3aWxsIGJlY29tZSAnLiRrZXknIGluIGNsb25lIGJ5IGRlZmF1bHQsXG4gICAgICAgICAgICAgICAgLy8gd2UgaGF2ZSB0byBvdmVyd3JpdGUgd2l0aCB0aGUgY29ycmVjdCBrZXkgZXhwbGljaXRseVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtleTogYy5wcm9wcy5ldmVudEtleSxcbiAgICAgICAgICAgICAgICAgIG1vZGU6ICd2ZXJ0aWNhbC1sZWZ0J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgb3ZlcmZsb3dlZCA9IF90aGlzMy5nZXRPdmVyZmxvd2VkU3ViTWVudUl0ZW0oY2hpbGROb2RlLnByb3BzLmV2ZW50S2V5LCBfdGhpczMub3ZlcmZsb3dlZEl0ZW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgcmV0ID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShhY2MpLCBbb3ZlcmZsb3dlZCwgaXRlbV0pO1xuXG4gICAgICAgICAgaWYgKGluZGV4ID09PSBjaGlsZHJlbi5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAvLyBuZWVkIGEgcGxhY2Vob2xkZXIgZm9yIGNhbGN1bGF0aW5nIG92ZXJmbG93ZWQgaW5kaWNhdG9yIHdpZHRoXG4gICAgICAgICAgICByZXQucHVzaChfdGhpczMuZ2V0T3ZlcmZsb3dlZFN1Yk1lbnVJdGVtKGNoaWxkTm9kZS5wcm9wcy5ldmVudEtleSwgW10sIHRydWUpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoYWNjKSwgW2l0ZW1dKTtcbiAgICAgIH0sIFtdKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIHZpc2libGUgPSBfdGhpcyRwcm9wczIudmlzaWJsZSxcbiAgICAgICAgICBwcmVmaXhDbHMgPSBfdGhpcyRwcm9wczIucHJlZml4Q2xzLFxuICAgICAgICAgIG92ZXJmbG93ZWRJbmRpY2F0b3IgPSBfdGhpcyRwcm9wczIub3ZlcmZsb3dlZEluZGljYXRvcixcbiAgICAgICAgICBtb2RlID0gX3RoaXMkcHJvcHMyLm1vZGUsXG4gICAgICAgICAgbGV2ZWwgPSBfdGhpcyRwcm9wczIubGV2ZWwsXG4gICAgICAgICAgdGFnID0gX3RoaXMkcHJvcHMyLnRhZyxcbiAgICAgICAgICBjaGlsZHJlbiA9IF90aGlzJHByb3BzMi5jaGlsZHJlbixcbiAgICAgICAgICB0aGVtZSA9IF90aGlzJHByb3BzMi50aGVtZSxcbiAgICAgICAgICByZXN0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF90aGlzJHByb3BzMiwgW1widmlzaWJsZVwiLCBcInByZWZpeENsc1wiLCBcIm92ZXJmbG93ZWRJbmRpY2F0b3JcIiwgXCJtb2RlXCIsIFwibGV2ZWxcIiwgXCJ0YWdcIiwgXCJjaGlsZHJlblwiLCBcInRoZW1lXCJdKTtcblxuICAgICAgdmFyIFRhZyA9IHRhZztcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUYWcsIF9leHRlbmRzKHtcbiAgICAgICAgcmVmOiB0aGlzLmNoaWxkUmVmXG4gICAgICB9LCByZXN0KSwgdGhpcy5yZW5kZXJDaGlsZHJlbihjaGlsZHJlbikpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBET01XcmFwO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5ET01XcmFwLmRlZmF1bHRQcm9wcyA9IHtcbiAgdGFnOiAnZGl2JyxcbiAgY2xhc3NOYW1lOiAnJ1xufTtcbmV4cG9ydCBkZWZhdWx0IERPTVdyYXA7IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVja1wiO1xuaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3NcIjtcbmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3NlcnRUaGlzSW5pdGlhbGl6ZWRcIjtcbmltcG9ydCBfaW5oZXJpdHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzXCI7XG5pbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlclwiO1xuaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAnbWluaS1zdG9yZSc7XG5pbXBvcnQgS2V5Q29kZSBmcm9tIFwicmMtdXRpbC9lcy9LZXlDb2RlXCI7XG5pbXBvcnQgY3JlYXRlQ2hhaW5lZEZ1bmN0aW9uIGZyb20gXCJyYy11dGlsL2VzL2NyZWF0ZUNoYWluZWRGdW5jdGlvblwiO1xuaW1wb3J0IHRvQXJyYXkgZnJvbSBcInJjLXV0aWwvZXMvQ2hpbGRyZW4vdG9BcnJheVwiO1xuaW1wb3J0IHNoYWxsb3dFcXVhbCBmcm9tICdzaGFsbG93ZXF1YWwnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgeyBnZXRLZXlGcm9tQ2hpbGRyZW5JbmRleCwgbG9vcE1lbnVJdGVtLCBub29wLCBtZW51QWxsUHJvcHMsIGlzTW9iaWxlRGV2aWNlIH0gZnJvbSAnLi91dGlsJztcbmltcG9ydCBET01XcmFwIGZyb20gJy4vRE9NV3JhcCc7XG5cbmZ1bmN0aW9uIGFsbERpc2FibGVkKGFycikge1xuICBpZiAoIWFyci5sZW5ndGgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBhcnIuZXZlcnkoZnVuY3Rpb24gKGMpIHtcbiAgICByZXR1cm4gISFjLnByb3BzLmRpc2FibGVkO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQWN0aXZlS2V5KHN0b3JlLCBtZW51SWQsIGFjdGl2ZUtleSkge1xuICB2YXIgc3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpO1xuICBzdG9yZS5zZXRTdGF0ZSh7XG4gICAgYWN0aXZlS2V5OiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLmFjdGl2ZUtleSksIHt9LCBfZGVmaW5lUHJvcGVydHkoe30sIG1lbnVJZCwgYWN0aXZlS2V5KSlcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldEV2ZW50S2V5KHByb3BzKSB7XG4gIC8vIHdoZW4gZXZlbnRLZXkgbm90IGF2YWlsYWJsZSAsaXQncyBtZW51IGFuZCByZXR1cm4gbWVudSBpZCAnMC1tZW51LSdcbiAgcmV0dXJuIHByb3BzLmV2ZW50S2V5IHx8ICcwLW1lbnUtJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFjdGl2ZUtleShwcm9wcywgb3JpZ2luYWxBY3RpdmVLZXkpIHtcbiAgdmFyIGFjdGl2ZUtleSA9IG9yaWdpbmFsQWN0aXZlS2V5O1xuICB2YXIgY2hpbGRyZW4gPSBwcm9wcy5jaGlsZHJlbixcbiAgICAgIGV2ZW50S2V5ID0gcHJvcHMuZXZlbnRLZXk7XG5cbiAgaWYgKGFjdGl2ZUtleSkge1xuICAgIHZhciBmb3VuZDtcbiAgICBsb29wTWVudUl0ZW0oY2hpbGRyZW4sIGZ1bmN0aW9uIChjLCBpKSB7XG4gICAgICBpZiAoYyAmJiBjLnByb3BzICYmICFjLnByb3BzLmRpc2FibGVkICYmIGFjdGl2ZUtleSA9PT0gZ2V0S2V5RnJvbUNoaWxkcmVuSW5kZXgoYywgZXZlbnRLZXksIGkpKSB7XG4gICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChmb3VuZCkge1xuICAgICAgcmV0dXJuIGFjdGl2ZUtleTtcbiAgICB9XG4gIH1cblxuICBhY3RpdmVLZXkgPSBudWxsO1xuXG4gIGlmIChwcm9wcy5kZWZhdWx0QWN0aXZlRmlyc3QpIHtcbiAgICBsb29wTWVudUl0ZW0oY2hpbGRyZW4sIGZ1bmN0aW9uIChjLCBpKSB7XG4gICAgICBpZiAoIWFjdGl2ZUtleSAmJiBjICYmICFjLnByb3BzLmRpc2FibGVkKSB7XG4gICAgICAgIGFjdGl2ZUtleSA9IGdldEtleUZyb21DaGlsZHJlbkluZGV4KGMsIGV2ZW50S2V5LCBpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gYWN0aXZlS2V5O1xuICB9XG5cbiAgcmV0dXJuIGFjdGl2ZUtleTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzYXZlUmVmKGMpIHtcbiAgaWYgKCFjKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1pbnZhbGlkLXRoaXMgKi9cblxuXG4gIHZhciBpbmRleCA9IHRoaXMuaW5zdGFuY2VBcnJheS5pbmRleE9mKGMpO1xuXG4gIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAvLyB1cGRhdGUgY29tcG9uZW50IGlmIGl0J3MgYWxyZWFkeSBpbnNpZGUgaW5zdGFuY2VBcnJheVxuICAgIHRoaXMuaW5zdGFuY2VBcnJheVtpbmRleF0gPSBjO1xuICB9IGVsc2Uge1xuICAgIC8vIGFkZCBjb21wb25lbnQgaWYgaXQncyBub3QgaW4gaW5zdGFuY2VBcnJheSB5ZXQ7XG4gICAgdGhpcy5pbnN0YW5jZUFycmF5LnB1c2goYyk7XG4gIH1cbiAgLyogZXNsaW50LWVuYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8taW52YWxpZC10aGlzICovXG5cbn1cbmV4cG9ydCB2YXIgU3ViUG9wdXBNZW51ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhTdWJQb3B1cE1lbnUsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoU3ViUG9wdXBNZW51KTtcblxuICBmdW5jdGlvbiBTdWJQb3B1cE1lbnUocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3ViUG9wdXBNZW51KTtcblxuICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcHJvcHMpO1xuICAgIC8qKlxuICAgICAqIGFsbCBrZXlib2FyZCBldmVudHMgY2FsbGJhY2tzIHJ1biBmcm9tIGhlcmUgYXQgZmlyc3RcbiAgICAgKlxuICAgICAqIG5vdGU6XG4gICAgICogIFRoaXMgbGVnYWN5IGNvZGUgdGhhdCBgb25LZXlEb3duYCBpcyBjYWxsZWQgYnkgcGFyZW50IGluc3RlYWQgb2YgZG9tIHNlbGYuXG4gICAgICogIHdoaWNoIG5lZWQgcmV0dXJuIGNvZGUgdG8gY2hlY2sgaWYgdGhpcyBldmVudCBpcyBoYW5kbGVkXG4gICAgICovXG5cbiAgICBfdGhpcy5vbktleURvd24gPSBmdW5jdGlvbiAoZSwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBrZXlDb2RlID0gZS5rZXlDb2RlO1xuICAgICAgdmFyIGhhbmRsZWQ7XG5cbiAgICAgIF90aGlzLmdldEZsYXRJbnN0YW5jZUFycmF5KCkuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGlmIChvYmogJiYgb2JqLnByb3BzLmFjdGl2ZSAmJiBvYmoub25LZXlEb3duKSB7XG4gICAgICAgICAgaGFuZGxlZCA9IG9iai5vbktleURvd24oZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoaGFuZGxlZCkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cblxuICAgICAgdmFyIGFjdGl2ZUl0ZW0gPSBudWxsO1xuXG4gICAgICBpZiAoa2V5Q29kZSA9PT0gS2V5Q29kZS5VUCB8fCBrZXlDb2RlID09PSBLZXlDb2RlLkRPV04pIHtcbiAgICAgICAgYWN0aXZlSXRlbSA9IF90aGlzLnN0ZXAoa2V5Q29kZSA9PT0gS2V5Q29kZS5VUCA/IC0xIDogMSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChhY3RpdmVJdGVtKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdXBkYXRlQWN0aXZlS2V5KF90aGlzLnByb3BzLnN0b3JlLCBnZXRFdmVudEtleShfdGhpcy5wcm9wcyksIGFjdGl2ZUl0ZW0ucHJvcHMuZXZlbnRLZXkpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjYWxsYmFjayhhY3RpdmVJdGVtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICBfdGhpcy5vbkl0ZW1Ib3ZlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIga2V5ID0gZS5rZXksXG4gICAgICAgICAgaG92ZXIgPSBlLmhvdmVyO1xuICAgICAgdXBkYXRlQWN0aXZlS2V5KF90aGlzLnByb3BzLnN0b3JlLCBnZXRFdmVudEtleShfdGhpcy5wcm9wcyksIGhvdmVyID8ga2V5IDogbnVsbCk7XG4gICAgfTtcblxuICAgIF90aGlzLm9uRGVzZWxlY3QgPSBmdW5jdGlvbiAoc2VsZWN0SW5mbykge1xuICAgICAgX3RoaXMucHJvcHMub25EZXNlbGVjdChzZWxlY3RJbmZvKTtcbiAgICB9O1xuXG4gICAgX3RoaXMub25TZWxlY3QgPSBmdW5jdGlvbiAoc2VsZWN0SW5mbykge1xuICAgICAgX3RoaXMucHJvcHMub25TZWxlY3Qoc2VsZWN0SW5mbyk7XG4gICAgfTtcblxuICAgIF90aGlzLm9uQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMucHJvcHMub25DbGljayhlKTtcbiAgICB9O1xuXG4gICAgX3RoaXMub25PcGVuQ2hhbmdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLnByb3BzLm9uT3BlbkNoYW5nZShlKTtcbiAgICB9O1xuXG4gICAgX3RoaXMub25EZXN0cm95ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgIF90aGlzLnByb3BzLm9uRGVzdHJveShrZXkpO1xuICAgIH07XG5cbiAgICBfdGhpcy5nZXRGbGF0SW5zdGFuY2VBcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfdGhpcy5pbnN0YW5jZUFycmF5O1xuICAgIH07XG5cbiAgICBfdGhpcy5zdGVwID0gZnVuY3Rpb24gKGRpcmVjdGlvbikge1xuICAgICAgdmFyIGNoaWxkcmVuID0gX3RoaXMuZ2V0RmxhdEluc3RhbmNlQXJyYXkoKTtcblxuICAgICAgdmFyIGFjdGl2ZUtleSA9IF90aGlzLnByb3BzLnN0b3JlLmdldFN0YXRlKCkuYWN0aXZlS2V5W2dldEV2ZW50S2V5KF90aGlzLnByb3BzKV07XG5cbiAgICAgIHZhciBsZW4gPSBjaGlsZHJlbi5sZW5ndGg7XG5cbiAgICAgIGlmICghbGVuKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGlyZWN0aW9uIDwgMCkge1xuICAgICAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLmNvbmNhdCgpLnJldmVyc2UoKTtcbiAgICAgIH0gLy8gZmluZCBjdXJyZW50IGFjdGl2ZUluZGV4XG5cblxuICAgICAgdmFyIGFjdGl2ZUluZGV4ID0gLTE7XG4gICAgICBjaGlsZHJlbi5ldmVyeShmdW5jdGlvbiAoYywgY2kpIHtcbiAgICAgICAgaWYgKGMgJiYgYy5wcm9wcy5ldmVudEtleSA9PT0gYWN0aXZlS2V5KSB7XG4gICAgICAgICAgYWN0aXZlSW5kZXggPSBjaTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIV90aGlzLnByb3BzLmRlZmF1bHRBY3RpdmVGaXJzdCAmJiBhY3RpdmVJbmRleCAhPT0gLTEgJiYgYWxsRGlzYWJsZWQoY2hpbGRyZW4uc2xpY2UoYWN0aXZlSW5kZXgsIGxlbiAtIDEpKSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3RhcnQgPSAoYWN0aXZlSW5kZXggKyAxKSAlIGxlbjtcbiAgICAgIHZhciBpID0gc3RhcnQ7XG5cbiAgICAgIGRvIHtcbiAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07XG5cbiAgICAgICAgaWYgKCFjaGlsZCB8fCBjaGlsZC5wcm9wcy5kaXNhYmxlZCkge1xuICAgICAgICAgIGkgPSAoaSArIDEpICUgbGVuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgICAgfVxuICAgICAgfSB3aGlsZSAoaSAhPT0gc3RhcnQpO1xuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgX3RoaXMucmVuZGVyQ29tbW9uTWVudUl0ZW0gPSBmdW5jdGlvbiAoY2hpbGQsIGksIGV4dHJhUHJvcHMpIHtcbiAgICAgIHZhciBzdGF0ZSA9IF90aGlzLnByb3BzLnN0b3JlLmdldFN0YXRlKCk7XG5cbiAgICAgIHZhciBfYXNzZXJ0VGhpc0luaXRpYWxpemUgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSxcbiAgICAgICAgICBwcm9wcyA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZS5wcm9wcztcblxuICAgICAgdmFyIGtleSA9IGdldEtleUZyb21DaGlsZHJlbkluZGV4KGNoaWxkLCBwcm9wcy5ldmVudEtleSwgaSk7XG4gICAgICB2YXIgY2hpbGRQcm9wcyA9IGNoaWxkLnByb3BzOyAvLyBodHRwczovL2dpdGh1Yi5jb20vYW50LWRlc2lnbi9hbnQtZGVzaWduL2lzc3Vlcy8xMTUxNyNpc3N1ZWNvbW1lbnQtNDc3NDAzMDU1XG5cbiAgICAgIGlmICghY2hpbGRQcm9wcyB8fCB0eXBlb2YgY2hpbGQudHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgfVxuXG4gICAgICB2YXIgaXNBY3RpdmUgPSBrZXkgPT09IHN0YXRlLmFjdGl2ZUtleTtcblxuICAgICAgdmFyIG5ld0NoaWxkUHJvcHMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe1xuICAgICAgICBtb2RlOiBjaGlsZFByb3BzLm1vZGUgfHwgcHJvcHMubW9kZSxcbiAgICAgICAgbGV2ZWw6IHByb3BzLmxldmVsLFxuICAgICAgICBpbmxpbmVJbmRlbnQ6IHByb3BzLmlubGluZUluZGVudCxcbiAgICAgICAgcmVuZGVyTWVudUl0ZW06IF90aGlzLnJlbmRlck1lbnVJdGVtLFxuICAgICAgICByb290UHJlZml4Q2xzOiBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICAgIGluZGV4OiBpLFxuICAgICAgICBwYXJlbnRNZW51OiBwcm9wcy5wYXJlbnRNZW51LFxuICAgICAgICAvLyBjdXN0b21pemVkIHJlZiBmdW5jdGlvbiwgbmVlZCB0byBiZSBpbnZva2VkIG1hbnVhbGx5IGluIGNoaWxkJ3MgY29tcG9uZW50RGlkTW91bnRcbiAgICAgICAgbWFudWFsUmVmOiBjaGlsZFByb3BzLmRpc2FibGVkID8gdW5kZWZpbmVkIDogY3JlYXRlQ2hhaW5lZEZ1bmN0aW9uKGNoaWxkLnJlZiwgc2F2ZVJlZi5iaW5kKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSksXG4gICAgICAgIGV2ZW50S2V5OiBrZXksXG4gICAgICAgIGFjdGl2ZTogIWNoaWxkUHJvcHMuZGlzYWJsZWQgJiYgaXNBY3RpdmUsXG4gICAgICAgIG11bHRpcGxlOiBwcm9wcy5tdWx0aXBsZSxcbiAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgKGNoaWxkUHJvcHMub25DbGljayB8fCBub29wKShlKTtcblxuICAgICAgICAgIF90aGlzLm9uQ2xpY2soZSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uSXRlbUhvdmVyOiBfdGhpcy5vbkl0ZW1Ib3ZlcixcbiAgICAgICAgbW90aW9uOiBwcm9wcy5tb3Rpb24sXG4gICAgICAgIHN1Yk1lbnVPcGVuRGVsYXk6IHByb3BzLnN1Yk1lbnVPcGVuRGVsYXksXG4gICAgICAgIHN1Yk1lbnVDbG9zZURlbGF5OiBwcm9wcy5zdWJNZW51Q2xvc2VEZWxheSxcbiAgICAgICAgZm9yY2VTdWJNZW51UmVuZGVyOiBwcm9wcy5mb3JjZVN1Yk1lbnVSZW5kZXIsXG4gICAgICAgIG9uT3BlbkNoYW5nZTogX3RoaXMub25PcGVuQ2hhbmdlLFxuICAgICAgICBvbkRlc2VsZWN0OiBfdGhpcy5vbkRlc2VsZWN0LFxuICAgICAgICBvblNlbGVjdDogX3RoaXMub25TZWxlY3QsXG4gICAgICAgIGJ1aWx0aW5QbGFjZW1lbnRzOiBwcm9wcy5idWlsdGluUGxhY2VtZW50cyxcbiAgICAgICAgaXRlbUljb246IGNoaWxkUHJvcHMuaXRlbUljb24gfHwgX3RoaXMucHJvcHMuaXRlbUljb24sXG4gICAgICAgIGV4cGFuZEljb246IGNoaWxkUHJvcHMuZXhwYW5kSWNvbiB8fCBfdGhpcy5wcm9wcy5leHBhbmRJY29uXG4gICAgICB9LCBleHRyYVByb3BzKSwge30sIHtcbiAgICAgICAgZGlyZWN0aW9uOiBwcm9wcy5kaXJlY3Rpb25cbiAgICAgIH0pOyAvLyByZWY6IGh0dHBzOi8vZ2l0aHViLmNvbS9hbnQtZGVzaWduL2FudC1kZXNpZ24vaXNzdWVzLzEzOTQzXG5cblxuICAgICAgaWYgKHByb3BzLm1vZGUgPT09ICdpbmxpbmUnIHx8IGlzTW9iaWxlRGV2aWNlKCkpIHtcbiAgICAgICAgbmV3Q2hpbGRQcm9wcy50cmlnZ2VyU3ViTWVudUFjdGlvbiA9ICdjbGljayc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY2xvbmVFbGVtZW50KGNoaWxkLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG5ld0NoaWxkUHJvcHMpLCB7fSwge1xuICAgICAgICBrZXk6IGtleSB8fCBpXG4gICAgICB9KSk7XG4gICAgfTtcblxuICAgIF90aGlzLnJlbmRlck1lbnVJdGVtID0gZnVuY3Rpb24gKGMsIGksIHN1Yk1lbnVLZXkpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKCFjKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3RhdGUgPSBfdGhpcy5wcm9wcy5zdG9yZS5nZXRTdGF0ZSgpO1xuXG4gICAgICB2YXIgZXh0cmFQcm9wcyA9IHtcbiAgICAgICAgb3BlbktleXM6IHN0YXRlLm9wZW5LZXlzLFxuICAgICAgICBzZWxlY3RlZEtleXM6IHN0YXRlLnNlbGVjdGVkS2V5cyxcbiAgICAgICAgdHJpZ2dlclN1Yk1lbnVBY3Rpb246IF90aGlzLnByb3BzLnRyaWdnZXJTdWJNZW51QWN0aW9uLFxuICAgICAgICBzdWJNZW51S2V5OiBzdWJNZW51S2V5XG4gICAgICB9O1xuICAgICAgcmV0dXJuIF90aGlzLnJlbmRlckNvbW1vbk1lbnVJdGVtKGMsIGksIGV4dHJhUHJvcHMpO1xuICAgIH07XG5cbiAgICBwcm9wcy5zdG9yZS5zZXRTdGF0ZSh7XG4gICAgICBhY3RpdmVLZXk6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcHJvcHMuc3RvcmUuZ2V0U3RhdGUoKS5hY3RpdmVLZXkpLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCBwcm9wcy5ldmVudEtleSwgZ2V0QWN0aXZlS2V5KHByb3BzLCBwcm9wcy5hY3RpdmVLZXkpKSlcbiAgICB9KTtcbiAgICBfdGhpcy5pbnN0YW5jZUFycmF5ID0gW107XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFN1YlBvcHVwTWVudSwgW3tcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkTW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAvLyBpbnZva2UgY3VzdG9taXplZCByZWYgdG8gZXhwb3NlIGNvbXBvbmVudCB0byBtaXhpblxuICAgICAgaWYgKHRoaXMucHJvcHMubWFudWFsUmVmKSB7XG4gICAgICAgIHRoaXMucHJvcHMubWFudWFsUmVmKHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzaG91bGRDb21wb25lbnRVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcykge1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMudmlzaWJsZSB8fCBuZXh0UHJvcHMudmlzaWJsZSB8fCB0aGlzLnByb3BzLmNsYXNzTmFtZSAhPT0gbmV4dFByb3BzLmNsYXNzTmFtZSB8fCAhc2hhbGxvd0VxdWFsKHRoaXMucHJvcHMuc3R5bGUsIG5leHRQcm9wcy5zdHlsZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudERpZFVwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG4gICAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgICAgdmFyIG9yaWdpbmFsQWN0aXZlS2V5ID0gJ2FjdGl2ZUtleScgaW4gcHJvcHMgPyBwcm9wcy5hY3RpdmVLZXkgOiBwcm9wcy5zdG9yZS5nZXRTdGF0ZSgpLmFjdGl2ZUtleVtnZXRFdmVudEtleShwcm9wcyldO1xuICAgICAgdmFyIGFjdGl2ZUtleSA9IGdldEFjdGl2ZUtleShwcm9wcywgb3JpZ2luYWxBY3RpdmVLZXkpO1xuXG4gICAgICBpZiAoYWN0aXZlS2V5ICE9PSBvcmlnaW5hbEFjdGl2ZUtleSkge1xuICAgICAgICB1cGRhdGVBY3RpdmVLZXkocHJvcHMuc3RvcmUsIGdldEV2ZW50S2V5KHByb3BzKSwgYWN0aXZlS2V5KTtcbiAgICAgIH0gZWxzZSBpZiAoJ2FjdGl2ZUtleScgaW4gcHJldlByb3BzKSB7XG4gICAgICAgIC8vIElmIHByZXYgYWN0aXZlS2V5IGlzIG5vdCBzYW1lIGFzIGN1cnJlbnQgYWN0aXZlS2V5LFxuICAgICAgICAvLyB3ZSBzaG91bGQgc2V0IGl0LlxuICAgICAgICB2YXIgcHJldkFjdGl2ZUtleSA9IGdldEFjdGl2ZUtleShwcmV2UHJvcHMsIHByZXZQcm9wcy5hY3RpdmVLZXkpO1xuXG4gICAgICAgIGlmIChhY3RpdmVLZXkgIT09IHByZXZBY3RpdmVLZXkpIHtcbiAgICAgICAgICB1cGRhdGVBY3RpdmVLZXkocHJvcHMuc3RvcmUsIGdldEV2ZW50S2V5KHByb3BzKSwgYWN0aXZlS2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHZhciBwcm9wcyA9IF9leHRlbmRzKHt9LCB0aGlzLnByb3BzKTtcblxuICAgICAgdGhpcy5pbnN0YW5jZUFycmF5ID0gW107XG4gICAgICB2YXIgY2xhc3NOYW1lID0gY2xhc3NOYW1lcyhwcm9wcy5wcmVmaXhDbHMsIHByb3BzLmNsYXNzTmFtZSwgXCJcIi5jb25jYXQocHJvcHMucHJlZml4Q2xzLCBcIi1cIikuY29uY2F0KHByb3BzLm1vZGUpKTtcbiAgICAgIHZhciBkb21Qcm9wcyA9IHtcbiAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgIC8vIHJvbGUgY291bGQgYmUgJ3NlbGVjdCcgYW5kIGJ5IGRlZmF1bHQgc2V0IHRvIG1lbnVcbiAgICAgICAgcm9sZTogcHJvcHMucm9sZSB8fCAnbWVudSdcbiAgICAgIH07XG5cbiAgICAgIGlmIChwcm9wcy5pZCkge1xuICAgICAgICBkb21Qcm9wcy5pZCA9IHByb3BzLmlkO1xuICAgICAgfVxuXG4gICAgICBpZiAocHJvcHMuZm9jdXNhYmxlKSB7XG4gICAgICAgIGRvbVByb3BzLnRhYkluZGV4ID0gMDtcbiAgICAgICAgZG9tUHJvcHMub25LZXlEb3duID0gdGhpcy5vbktleURvd247XG4gICAgICB9XG5cbiAgICAgIHZhciBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG4gICAgICAgICAgZXZlbnRLZXkgPSBwcm9wcy5ldmVudEtleSxcbiAgICAgICAgICB2aXNpYmxlID0gcHJvcHMudmlzaWJsZSxcbiAgICAgICAgICBsZXZlbCA9IHByb3BzLmxldmVsLFxuICAgICAgICAgIG1vZGUgPSBwcm9wcy5tb2RlLFxuICAgICAgICAgIG92ZXJmbG93ZWRJbmRpY2F0b3IgPSBwcm9wcy5vdmVyZmxvd2VkSW5kaWNhdG9yLFxuICAgICAgICAgIHRoZW1lID0gcHJvcHMudGhlbWU7XG4gICAgICBtZW51QWxsUHJvcHMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBkZWxldGUgcHJvcHNba2V5XTtcbiAgICAgIH0pOyAvLyBPdGhlcndpc2UsIHRoZSBwcm9wYWdhdGVkIGNsaWNrIGV2ZW50IHdpbGwgdHJpZ2dlciBhbm90aGVyIG9uQ2xpY2tcblxuICAgICAgZGVsZXRlIHByb3BzLm9uQ2xpY2s7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoRE9NV3JhcCwgX2V4dGVuZHMoe30sIHByb3BzLCB7XG4gICAgICAgIHByZWZpeENsczogcHJlZml4Q2xzLFxuICAgICAgICBtb2RlOiBtb2RlLFxuICAgICAgICB0YWc6IFwidWxcIixcbiAgICAgICAgbGV2ZWw6IGxldmVsLFxuICAgICAgICB0aGVtZTogdGhlbWUsXG4gICAgICAgIHZpc2libGU6IHZpc2libGUsXG4gICAgICAgIG92ZXJmbG93ZWRJbmRpY2F0b3I6IG92ZXJmbG93ZWRJbmRpY2F0b3JcbiAgICAgIH0sIGRvbVByb3BzKSwgdG9BcnJheShwcm9wcy5jaGlsZHJlbikubWFwKGZ1bmN0aW9uIChjLCBpKSB7XG4gICAgICAgIHJldHVybiBfdGhpczIucmVuZGVyTWVudUl0ZW0oYywgaSwgZXZlbnRLZXkgfHwgJzAtbWVudS0nKTtcbiAgICAgIH0pKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU3ViUG9wdXBNZW51O1xufShSZWFjdC5Db21wb25lbnQpO1xuU3ViUG9wdXBNZW51LmRlZmF1bHRQcm9wcyA9IHtcbiAgcHJlZml4Q2xzOiAncmMtbWVudScsXG4gIGNsYXNzTmFtZTogJycsXG4gIG1vZGU6ICd2ZXJ0aWNhbCcsXG4gIGxldmVsOiAxLFxuICBpbmxpbmVJbmRlbnQ6IDI0LFxuICB2aXNpYmxlOiB0cnVlLFxuICBmb2N1c2FibGU6IHRydWUsXG4gIHN0eWxlOiB7fSxcbiAgbWFudWFsUmVmOiBub29wXG59O1xudmFyIGNvbm5lY3RlZCA9IGNvbm5lY3QoKShTdWJQb3B1cE1lbnUpO1xuZXhwb3J0IGRlZmF1bHQgY29ubmVjdGVkOyIsImltcG9ydCBfdHlwZW9mIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2ZcIjtcbmltcG9ydCB3YXJuaW5nIGZyb20gXCJyYy11dGlsL2VzL3dhcm5pbmdcIjtcbmV4cG9ydCBmdW5jdGlvbiBnZXRNb3Rpb24oX3JlZiwgX3JlZjIsIG1lbnVNb2RlKSB7XG4gIHZhciBwcmVmaXhDbHMgPSBfcmVmLnByZWZpeENscyxcbiAgICAgIG1vdGlvbiA9IF9yZWYubW90aW9uLFxuICAgICAgX3JlZiRkZWZhdWx0TW90aW9ucyA9IF9yZWYuZGVmYXVsdE1vdGlvbnMsXG4gICAgICBkZWZhdWx0TW90aW9ucyA9IF9yZWYkZGVmYXVsdE1vdGlvbnMgPT09IHZvaWQgMCA/IHt9IDogX3JlZiRkZWZhdWx0TW90aW9ucyxcbiAgICAgIG9wZW5BbmltYXRpb24gPSBfcmVmLm9wZW5BbmltYXRpb24sXG4gICAgICBvcGVuVHJhbnNpdGlvbk5hbWUgPSBfcmVmLm9wZW5UcmFuc2l0aW9uTmFtZTtcbiAgdmFyIHN3aXRjaGluZ01vZGVGcm9tSW5saW5lID0gX3JlZjIuc3dpdGNoaW5nTW9kZUZyb21JbmxpbmU7XG5cbiAgaWYgKG1vdGlvbikge1xuICAgIHJldHVybiBtb3Rpb247XG4gIH1cblxuICBpZiAoX3R5cGVvZihvcGVuQW5pbWF0aW9uKSA9PT0gJ29iamVjdCcgJiYgb3BlbkFuaW1hdGlvbikge1xuICAgIHdhcm5pbmcoZmFsc2UsICdPYmplY3QgdHlwZSBvZiBgb3BlbkFuaW1hdGlvbmAgaXMgcmVtb3ZlZC4gUGxlYXNlIHVzZSBgbW90aW9uYCBpbnN0ZWFkLicpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBvcGVuQW5pbWF0aW9uID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB7XG4gICAgICBtb3Rpb25OYW1lOiBcIlwiLmNvbmNhdChwcmVmaXhDbHMsIFwiLW9wZW4tXCIpLmNvbmNhdChvcGVuQW5pbWF0aW9uKVxuICAgIH07XG4gIH1cblxuICBpZiAob3BlblRyYW5zaXRpb25OYW1lKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1vdGlvbk5hbWU6IG9wZW5UcmFuc2l0aW9uTmFtZVxuICAgIH07XG4gIH0gLy8gRGVmYXVsdCBsb2dpY1xuXG5cbiAgdmFyIGRlZmF1bHRNb3Rpb24gPSBkZWZhdWx0TW90aW9uc1ttZW51TW9kZV07XG5cbiAgaWYgKGRlZmF1bHRNb3Rpb24pIHtcbiAgICByZXR1cm4gZGVmYXVsdE1vdGlvbjtcbiAgfSAvLyBXaGVuIG1vZGUgc3dpdGNoIGZyb20gaW5saW5lXG4gIC8vIHN1Ym1lbnUgc2hvdWxkIGhpZGUgd2l0aG91dCBhbmltYXRpb25cblxuXG4gIHJldHVybiBzd2l0Y2hpbmdNb2RlRnJvbUlubGluZSA/IG51bGwgOiBkZWZhdWx0TW90aW9ucy5vdGhlcjtcbn0iLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVja1wiO1xuaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3NcIjtcbmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3NlcnRUaGlzSW5pdGlhbGl6ZWRcIjtcbmltcG9ydCBfaW5oZXJpdHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzXCI7XG5pbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlclwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgUHJvdmlkZXIsIGNyZWF0ZSB9IGZyb20gJ21pbmktc3RvcmUnO1xuaW1wb3J0IG9taXQgZnJvbSBcInJjLXV0aWwvZXMvb21pdFwiO1xuaW1wb3J0IFN1YlBvcHVwTWVudSwgeyBnZXRBY3RpdmVLZXkgfSBmcm9tICcuL1N1YlBvcHVwTWVudSc7XG5pbXBvcnQgeyBub29wIH0gZnJvbSAnLi91dGlsJztcbmltcG9ydCB7IGdldE1vdGlvbiB9IGZyb20gJy4vdXRpbHMvbGVnYWN5VXRpbCc7XG5cbnZhciBNZW51ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhNZW51LCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKE1lbnUpO1xuXG4gIGZ1bmN0aW9uIE1lbnUocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWVudSk7XG5cbiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKTtcblxuICAgIF90aGlzLm9uU2VsZWN0ID0gZnVuY3Rpb24gKHNlbGVjdEluZm8pIHtcbiAgICAgIHZhciBfYXNzZXJ0VGhpc0luaXRpYWxpemUgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSxcbiAgICAgICAgICBwcm9wcyA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZS5wcm9wcztcblxuICAgICAgaWYgKHByb3BzLnNlbGVjdGFibGUpIHtcbiAgICAgICAgLy8gcm9vdCBtZW51XG4gICAgICAgIHZhciBfdGhpcyRzdG9yZSRnZXRTdGF0ZSA9IF90aGlzLnN0b3JlLmdldFN0YXRlKCksXG4gICAgICAgICAgICBfc2VsZWN0ZWRLZXlzID0gX3RoaXMkc3RvcmUkZ2V0U3RhdGUuc2VsZWN0ZWRLZXlzO1xuXG4gICAgICAgIHZhciBzZWxlY3RlZEtleSA9IHNlbGVjdEluZm8ua2V5O1xuXG4gICAgICAgIGlmIChwcm9wcy5tdWx0aXBsZSkge1xuICAgICAgICAgIF9zZWxlY3RlZEtleXMgPSBfc2VsZWN0ZWRLZXlzLmNvbmNhdChbc2VsZWN0ZWRLZXldKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfc2VsZWN0ZWRLZXlzID0gW3NlbGVjdGVkS2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghKCdzZWxlY3RlZEtleXMnIGluIHByb3BzKSkge1xuICAgICAgICAgIF90aGlzLnN0b3JlLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNlbGVjdGVkS2V5czogX3NlbGVjdGVkS2V5c1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvcHMub25TZWxlY3QoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzZWxlY3RJbmZvKSwge30sIHtcbiAgICAgICAgICBzZWxlY3RlZEtleXM6IF9zZWxlY3RlZEtleXNcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5vbkNsaWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBtb2RlID0gX3RoaXMuZ2V0UmVhbE1lbnVNb2RlKCk7XG5cbiAgICAgIHZhciBfYXNzZXJ0VGhpc0luaXRpYWxpemUyID0gX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksXG4gICAgICAgICAgc3RvcmUgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemUyLnN0b3JlLFxuICAgICAgICAgIG9uT3BlbkNoYW5nZSA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZTIucHJvcHMub25PcGVuQ2hhbmdlO1xuXG4gICAgICBpZiAobW9kZSAhPT0gJ2lubGluZScgJiYgISgnb3BlbktleXMnIGluIF90aGlzLnByb3BzKSkge1xuICAgICAgICAvLyBjbG9zaW5nIHZlcnRpY2FsIHBvcHVwIHN1Ym1lbnUgYWZ0ZXIgY2xpY2sgaXRcbiAgICAgICAgc3RvcmUuc2V0U3RhdGUoe1xuICAgICAgICAgIG9wZW5LZXlzOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgb25PcGVuQ2hhbmdlKFtdKTtcbiAgICAgIH1cblxuICAgICAgX3RoaXMucHJvcHMub25DbGljayhlKTtcbiAgICB9OyAvLyBvbktleURvd24gbmVlZHMgdG8gYmUgZXhwb3NlZCBhcyBhIGluc3RhbmNlIG1ldGhvZFxuICAgIC8vIGUuZy4sIGluIHJjLXNlbGVjdCwgd2UgbmVlZCB0byBuYXZpZ2F0ZSBtZW51IGl0ZW0gd2hpbGVcbiAgICAvLyBjdXJyZW50IGFjdGl2ZSBpdGVtIGlzIHJjLXNlbGVjdCBpbnB1dCBib3ggcmF0aGVyIHRoYW4gdGhlIG1lbnUgaXRzZWxmXG5cblxuICAgIF90aGlzLm9uS2V5RG93biA9IGZ1bmN0aW9uIChlLCBjYWxsYmFjaykge1xuICAgICAgX3RoaXMuaW5uZXJNZW51LmdldFdyYXBwZWRJbnN0YW5jZSgpLm9uS2V5RG93bihlLCBjYWxsYmFjayk7XG4gICAgfTtcblxuICAgIF90aGlzLm9uT3BlbkNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZTMgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSxcbiAgICAgICAgICBwcm9wcyA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZTMucHJvcHM7XG5cbiAgICAgIHZhciBvcGVuS2V5cyA9IF90aGlzLnN0b3JlLmdldFN0YXRlKCkub3BlbktleXMuY29uY2F0KCk7XG5cbiAgICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7XG5cbiAgICAgIHZhciBwcm9jZXNzU2luZ2xlID0gZnVuY3Rpb24gcHJvY2Vzc1NpbmdsZShlKSB7XG4gICAgICAgIHZhciBvbmVDaGFuZ2VkID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKGUub3Blbikge1xuICAgICAgICAgIG9uZUNoYW5nZWQgPSBvcGVuS2V5cy5pbmRleE9mKGUua2V5KSA9PT0gLTE7XG5cbiAgICAgICAgICBpZiAob25lQ2hhbmdlZCkge1xuICAgICAgICAgICAgb3BlbktleXMucHVzaChlLmtleSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBpbmRleCA9IG9wZW5LZXlzLmluZGV4T2YoZS5rZXkpO1xuICAgICAgICAgIG9uZUNoYW5nZWQgPSBpbmRleCAhPT0gLTE7XG5cbiAgICAgICAgICBpZiAob25lQ2hhbmdlZCkge1xuICAgICAgICAgICAgb3BlbktleXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjaGFuZ2VkID0gY2hhbmdlZCB8fCBvbmVDaGFuZ2VkO1xuICAgICAgfTtcblxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnQpKSB7XG4gICAgICAgIC8vIGJhdGNoIGNoYW5nZSBjYWxsXG4gICAgICAgIGV2ZW50LmZvckVhY2gocHJvY2Vzc1NpbmdsZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9jZXNzU2luZ2xlKGV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgaWYgKCEoJ29wZW5LZXlzJyBpbiBfdGhpcy5wcm9wcykpIHtcbiAgICAgICAgICBfdGhpcy5zdG9yZS5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBvcGVuS2V5czogb3BlbktleXNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3BzLm9uT3BlbkNoYW5nZShvcGVuS2V5cyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLm9uRGVzZWxlY3QgPSBmdW5jdGlvbiAoc2VsZWN0SW5mbykge1xuICAgICAgdmFyIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZTQgPSBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSxcbiAgICAgICAgICBwcm9wcyA9IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZTQucHJvcHM7XG5cbiAgICAgIGlmIChwcm9wcy5zZWxlY3RhYmxlKSB7XG4gICAgICAgIHZhciBfc2VsZWN0ZWRLZXlzMiA9IF90aGlzLnN0b3JlLmdldFN0YXRlKCkuc2VsZWN0ZWRLZXlzLmNvbmNhdCgpO1xuXG4gICAgICAgIHZhciBzZWxlY3RlZEtleSA9IHNlbGVjdEluZm8ua2V5O1xuXG4gICAgICAgIHZhciBpbmRleCA9IF9zZWxlY3RlZEtleXMyLmluZGV4T2Yoc2VsZWN0ZWRLZXkpO1xuXG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBfc2VsZWN0ZWRLZXlzMi5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEoJ3NlbGVjdGVkS2V5cycgaW4gcHJvcHMpKSB7XG4gICAgICAgICAgX3RoaXMuc3RvcmUuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2VsZWN0ZWRLZXlzOiBfc2VsZWN0ZWRLZXlzMlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvcHMub25EZXNlbGVjdChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHNlbGVjdEluZm8pLCB7fSwge1xuICAgICAgICAgIHNlbGVjdGVkS2V5czogX3NlbGVjdGVkS2V5czJcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH07IC8vIFJlc3RvcmUgdmVydGljYWwgbW9kZSB3aGVuIG1lbnUgaXMgY29sbGFwc2VkIHJlc3BvbnNpdmVseSB3aGVuIG1vdW50ZWRcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW50LWRlc2lnbi9hbnQtZGVzaWduL2lzc3Vlcy8xMzEwNFxuICAgIC8vIFRPRE86IG5vdCBhIHBlcmZlY3Qgc29sdXRpb24sXG4gICAgLy8gbG9va2luZyBhIG5ldyB3YXkgdG8gYXZvaWQgc2V0dGluZyBzd2l0Y2hpbmdNb2RlRnJvbUlubGluZSBpbiB0aGlzIHNpdHVhdGlvblxuXG5cbiAgICBfdGhpcy5vbk1vdXNlRW50ZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMucmVzdG9yZU1vZGVWZXJ0aWNhbEZyb21JbmxpbmUoKTtcblxuICAgICAgdmFyIG9uTW91c2VFbnRlciA9IF90aGlzLnByb3BzLm9uTW91c2VFbnRlcjtcblxuICAgICAgaWYgKG9uTW91c2VFbnRlcikge1xuICAgICAgICBvbk1vdXNlRW50ZXIoZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLm9uVHJhbnNpdGlvbkVuZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAvLyB3aGVuIGlubGluZUNvbGxhcHNlZCBtZW51IHdpZHRoIGFuaW1hdGlvbiBmaW5pc2hlZFxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FudC1kZXNpZ24vYW50LWRlc2lnbi9pc3N1ZXMvMTI4NjRcbiAgICAgIHZhciB3aWR0aENvbGxhcHNlZCA9IGUucHJvcGVydHlOYW1lID09PSAnd2lkdGgnICYmIGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQ7IC8vIEZpeCBTVkdFbGVtZW50IGUudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mIGlzIG5vdCBhIGZ1bmN0aW9uXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYW50LWRlc2lnbi9hbnQtZGVzaWduL2lzc3Vlcy8xNTY5OVxuXG4gICAgICB2YXIgY2xhc3NOYW1lID0gZS50YXJnZXQuY2xhc3NOYW1lOyAvLyBTVkdBbmltYXRlZFN0cmluZy5hbmltVmFsIHNob3VsZCBiZSBpZGVudGljYWwgdG8gU1ZHQW5pbWF0ZWRTdHJpbmcuYmFzZVZhbCxcbiAgICAgIC8vIHVubGVzcyBkdXJpbmcgYW4gYW5pbWF0aW9uLlxuXG4gICAgICB2YXIgY2xhc3NOYW1lVmFsdWUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoY2xhc3NOYW1lKSA9PT0gJ1tvYmplY3QgU1ZHQW5pbWF0ZWRTdHJpbmddJyA/IGNsYXNzTmFtZS5hbmltVmFsIDogY2xhc3NOYW1lOyAvLyBGaXggZm9yIDxNZW51IHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX0gLz4sXG4gICAgICAvLyB0aGUgd2lkdGggdHJhbnNpdGlvbiB3b24ndCB0cmlnZ2VyIHdoZW4gbWVudSBpcyBjb2xsYXBzZWRcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbnQtZGVzaWduL2FudC1kZXNpZ24tcHJvL2lzc3Vlcy8yNzgzXG5cbiAgICAgIHZhciBpY29uU2NhbGVkID0gZS5wcm9wZXJ0eU5hbWUgPT09ICdmb250LXNpemUnICYmIGNsYXNzTmFtZVZhbHVlLmluZGV4T2YoJ2FudGljb24nKSA+PSAwO1xuXG4gICAgICBpZiAod2lkdGhDb2xsYXBzZWQgfHwgaWNvblNjYWxlZCkge1xuICAgICAgICBfdGhpcy5yZXN0b3JlTW9kZVZlcnRpY2FsRnJvbUlubGluZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5zZXRJbm5lck1lbnUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgX3RoaXMuaW5uZXJNZW51ID0gbm9kZTtcbiAgICB9O1xuXG4gICAgX3RoaXMuaXNSb290TWVudSA9IHRydWU7XG4gICAgdmFyIHNlbGVjdGVkS2V5cyA9IHByb3BzLmRlZmF1bHRTZWxlY3RlZEtleXM7XG4gICAgdmFyIG9wZW5LZXlzID0gcHJvcHMuZGVmYXVsdE9wZW5LZXlzO1xuXG4gICAgaWYgKCdzZWxlY3RlZEtleXMnIGluIHByb3BzKSB7XG4gICAgICBzZWxlY3RlZEtleXMgPSBwcm9wcy5zZWxlY3RlZEtleXMgfHwgW107XG4gICAgfVxuXG4gICAgaWYgKCdvcGVuS2V5cycgaW4gcHJvcHMpIHtcbiAgICAgIG9wZW5LZXlzID0gcHJvcHMub3BlbktleXMgfHwgW107XG4gICAgfVxuXG4gICAgX3RoaXMuc3RvcmUgPSBjcmVhdGUoe1xuICAgICAgc2VsZWN0ZWRLZXlzOiBzZWxlY3RlZEtleXMsXG4gICAgICBvcGVuS2V5czogb3BlbktleXMsXG4gICAgICBhY3RpdmVLZXk6IHtcbiAgICAgICAgJzAtbWVudS0nOiBnZXRBY3RpdmVLZXkocHJvcHMsIHByb3BzLmFjdGl2ZUtleSlcbiAgICAgIH1cbiAgICB9KTtcbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHN3aXRjaGluZ01vZGVGcm9tSW5saW5lOiBmYWxzZSxcbiAgICAgIHByZXZQcm9wczogcHJvcHMsXG4gICAgICBpbmxpbmVPcGVuS2V5czogW10sXG4gICAgICBzdG9yZTogX3RoaXMuc3RvcmVcbiAgICB9O1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhNZW51LCBbe1xuICAgIGtleTogXCJjb21wb25lbnREaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHRoaXMudXBkYXRlTWluaVN0b3JlKCk7XG4gICAgICB0aGlzLnVwZGF0ZU1lbnVEaXNwbGF5KCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudERpZFVwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIHNpZGVyQ29sbGFwc2VkID0gX3RoaXMkcHJvcHMuc2lkZXJDb2xsYXBzZWQsXG4gICAgICAgICAgaW5saW5lQ29sbGFwc2VkID0gX3RoaXMkcHJvcHMuaW5saW5lQ29sbGFwc2VkLFxuICAgICAgICAgIG9uT3BlbkNoYW5nZSA9IF90aGlzJHByb3BzLm9uT3BlbkNoYW5nZTtcblxuICAgICAgaWYgKCFwcmV2UHJvcHMuaW5saW5lQ29sbGFwc2VkICYmIGlubGluZUNvbGxhcHNlZCB8fCAhcHJldlByb3BzLnNpZGVyQ29sbGFwc2VkICYmIHNpZGVyQ29sbGFwc2VkKSB7XG4gICAgICAgIG9uT3BlbkNoYW5nZShbXSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMudXBkYXRlTWluaVN0b3JlKCk7XG4gICAgICB0aGlzLnVwZGF0ZU1lbnVEaXNwbGF5KCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInVwZGF0ZU1lbnVEaXNwbGF5XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZU1lbnVEaXNwbGF5KCkge1xuICAgICAgdmFyIGNvbGxhcHNlZFdpZHRoID0gdGhpcy5wcm9wcy5jb2xsYXBzZWRXaWR0aCxcbiAgICAgICAgICBzdG9yZSA9IHRoaXMuc3RvcmUsXG4gICAgICAgICAgcHJldk9wZW5LZXlzID0gdGhpcy5wcmV2T3BlbktleXM7IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbnQtZGVzaWduL2FudC1kZXNpZ24vaXNzdWVzLzg1ODdcblxuICAgICAgdmFyIGhpZGVNZW51ID0gdGhpcy5nZXRJbmxpbmVDb2xsYXBzZWQoKSAmJiAoY29sbGFwc2VkV2lkdGggPT09IDAgfHwgY29sbGFwc2VkV2lkdGggPT09ICcwJyB8fCBjb2xsYXBzZWRXaWR0aCA9PT0gJzBweCcpO1xuXG4gICAgICBpZiAoaGlkZU1lbnUpIHtcbiAgICAgICAgdGhpcy5wcmV2T3BlbktleXMgPSBzdG9yZS5nZXRTdGF0ZSgpLm9wZW5LZXlzLmNvbmNhdCgpO1xuICAgICAgICB0aGlzLnN0b3JlLnNldFN0YXRlKHtcbiAgICAgICAgICBvcGVuS2V5czogW11cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHByZXZPcGVuS2V5cykge1xuICAgICAgICB0aGlzLnN0b3JlLnNldFN0YXRlKHtcbiAgICAgICAgICBvcGVuS2V5czogcHJldk9wZW5LZXlzXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnByZXZPcGVuS2V5cyA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFJlYWxNZW51TW9kZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZWFsTWVudU1vZGUoKSB7XG4gICAgICB2YXIgbW9kZSA9IHRoaXMucHJvcHMubW9kZTtcbiAgICAgIHZhciBzd2l0Y2hpbmdNb2RlRnJvbUlubGluZSA9IHRoaXMuc3RhdGUuc3dpdGNoaW5nTW9kZUZyb21JbmxpbmU7XG4gICAgICB2YXIgaW5saW5lQ29sbGFwc2VkID0gdGhpcy5nZXRJbmxpbmVDb2xsYXBzZWQoKTtcblxuICAgICAgaWYgKHN3aXRjaGluZ01vZGVGcm9tSW5saW5lICYmIGlubGluZUNvbGxhcHNlZCkge1xuICAgICAgICByZXR1cm4gJ2lubGluZSc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbmxpbmVDb2xsYXBzZWQgPyAndmVydGljYWwnIDogbW9kZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0SW5saW5lQ29sbGFwc2VkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldElubGluZUNvbGxhcHNlZCgpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGlubGluZUNvbGxhcHNlZCA9IF90aGlzJHByb3BzMi5pbmxpbmVDb2xsYXBzZWQsXG4gICAgICAgICAgc2lkZXJDb2xsYXBzZWQgPSBfdGhpcyRwcm9wczIuc2lkZXJDb2xsYXBzZWQ7XG5cbiAgICAgIGlmIChzaWRlckNvbGxhcHNlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBzaWRlckNvbGxhcHNlZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGlubGluZUNvbGxhcHNlZDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVzdG9yZU1vZGVWZXJ0aWNhbEZyb21JbmxpbmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdG9yZU1vZGVWZXJ0aWNhbEZyb21JbmxpbmUoKSB7XG4gICAgICB2YXIgc3dpdGNoaW5nTW9kZUZyb21JbmxpbmUgPSB0aGlzLnN0YXRlLnN3aXRjaGluZ01vZGVGcm9tSW5saW5lO1xuXG4gICAgICBpZiAoc3dpdGNoaW5nTW9kZUZyb21JbmxpbmUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgc3dpdGNoaW5nTW9kZUZyb21JbmxpbmU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ1cGRhdGVNaW5pU3RvcmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlTWluaVN0b3JlKCkge1xuICAgICAgaWYgKCdzZWxlY3RlZEtleXMnIGluIHRoaXMucHJvcHMpIHtcbiAgICAgICAgdGhpcy5zdG9yZS5zZXRTdGF0ZSh7XG4gICAgICAgICAgc2VsZWN0ZWRLZXlzOiB0aGlzLnByb3BzLnNlbGVjdGVkS2V5cyB8fCBbXVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCdvcGVuS2V5cycgaW4gdGhpcy5wcm9wcykge1xuICAgICAgICB0aGlzLnN0b3JlLnNldFN0YXRlKHtcbiAgICAgICAgICBvcGVuS2V5czogdGhpcy5wcm9wcy5vcGVuS2V5cyB8fCBbXVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBwcm9wcyA9IF9vYmplY3RTcHJlYWQoe30sIG9taXQodGhpcy5wcm9wcywgWydjb2xsYXBzZWRXaWR0aCcsICdzaWRlckNvbGxhcHNlZCcsICdkZWZhdWx0TW90aW9ucyddKSk7XG5cbiAgICAgIHZhciBtb2RlID0gdGhpcy5nZXRSZWFsTWVudU1vZGUoKTtcbiAgICAgIHByb3BzLmNsYXNzTmFtZSArPSBcIiBcIi5jb25jYXQocHJvcHMucHJlZml4Q2xzLCBcIi1yb290XCIpO1xuXG4gICAgICBpZiAocHJvcHMuZGlyZWN0aW9uID09PSAncnRsJykge1xuICAgICAgICBwcm9wcy5jbGFzc05hbWUgKz0gXCIgXCIuY29uY2F0KHByb3BzLnByZWZpeENscywgXCItcnRsXCIpO1xuICAgICAgfVxuXG4gICAgICBwcm9wcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpLCB7fSwge1xuICAgICAgICBtb2RlOiBtb2RlLFxuICAgICAgICBvbkNsaWNrOiB0aGlzLm9uQ2xpY2ssXG4gICAgICAgIG9uT3BlbkNoYW5nZTogdGhpcy5vbk9wZW5DaGFuZ2UsXG4gICAgICAgIG9uRGVzZWxlY3Q6IHRoaXMub25EZXNlbGVjdCxcbiAgICAgICAgb25TZWxlY3Q6IHRoaXMub25TZWxlY3QsXG4gICAgICAgIG9uTW91c2VFbnRlcjogdGhpcy5vbk1vdXNlRW50ZXIsXG4gICAgICAgIG9uVHJhbnNpdGlvbkVuZDogdGhpcy5vblRyYW5zaXRpb25FbmQsXG4gICAgICAgIHBhcmVudE1lbnU6IHRoaXMsXG4gICAgICAgIG1vdGlvbjogZ2V0TW90aW9uKHRoaXMucHJvcHMsIHRoaXMuc3RhdGUsIG1vZGUpXG4gICAgICB9KTtcbiAgICAgIGRlbGV0ZSBwcm9wcy5vcGVuQW5pbWF0aW9uO1xuICAgICAgZGVsZXRlIHByb3BzLm9wZW5UcmFuc2l0aW9uTmFtZTtcbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQcm92aWRlciwge1xuICAgICAgICBzdG9yZTogdGhpcy5zdG9yZVxuICAgICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoU3ViUG9wdXBNZW51LCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICAgICAgcmVmOiB0aGlzLnNldElubmVyTWVudVxuICAgICAgfSksIHRoaXMucHJvcHMuY2hpbGRyZW4pKTtcbiAgICB9XG4gIH1dLCBbe1xuICAgIGtleTogXCJnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5leHRQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICB2YXIgcHJldlByb3BzID0gcHJldlN0YXRlLnByZXZQcm9wcyxcbiAgICAgICAgICBzdG9yZSA9IHByZXZTdGF0ZS5zdG9yZTtcbiAgICAgIHZhciBwcmV2U3RvcmVTdGF0ZSA9IHN0b3JlLmdldFN0YXRlKCk7XG4gICAgICB2YXIgbmV3U3RvcmVTdGF0ZSA9IHt9O1xuICAgICAgdmFyIG5ld1N0YXRlID0ge1xuICAgICAgICBwcmV2UHJvcHM6IG5leHRQcm9wc1xuICAgICAgfTtcblxuICAgICAgaWYgKHByZXZQcm9wcy5tb2RlID09PSAnaW5saW5lJyAmJiBuZXh0UHJvcHMubW9kZSAhPT0gJ2lubGluZScpIHtcbiAgICAgICAgbmV3U3RhdGUuc3dpdGNoaW5nTW9kZUZyb21JbmxpbmUgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoJ29wZW5LZXlzJyBpbiBuZXh0UHJvcHMpIHtcbiAgICAgICAgbmV3U3RvcmVTdGF0ZS5vcGVuS2V5cyA9IG5leHRQcm9wcy5vcGVuS2V5cyB8fCBbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFtMZWdhY3ldIE9sZCBjb2RlIHdpbGwgcmV0dXJuIGFmdGVyIGBvcGVuS2V5c2AgY2hhbmdlZC5cbiAgICAgICAgLy8gTm90IHN1cmUgdGhlIHJlYXNvbiwgd2Ugc2hvdWxkIGtlZXAgdGhpcyBsb2dpYyBzdGlsbC5cbiAgICAgICAgaWYgKG5leHRQcm9wcy5pbmxpbmVDb2xsYXBzZWQgJiYgIXByZXZQcm9wcy5pbmxpbmVDb2xsYXBzZWQgfHwgbmV4dFByb3BzLnNpZGVyQ29sbGFwc2VkICYmICFwcmV2UHJvcHMuc2lkZXJDb2xsYXBzZWQpIHtcbiAgICAgICAgICBuZXdTdGF0ZS5zd2l0Y2hpbmdNb2RlRnJvbUlubGluZSA9IHRydWU7XG4gICAgICAgICAgbmV3U3RhdGUuaW5saW5lT3BlbktleXMgPSBwcmV2U3RvcmVTdGF0ZS5vcGVuS2V5cztcbiAgICAgICAgICBuZXdTdG9yZVN0YXRlLm9wZW5LZXlzID0gW107XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW5leHRQcm9wcy5pbmxpbmVDb2xsYXBzZWQgJiYgcHJldlByb3BzLmlubGluZUNvbGxhcHNlZCB8fCAhbmV4dFByb3BzLnNpZGVyQ29sbGFwc2VkICYmIHByZXZQcm9wcy5zaWRlckNvbGxhcHNlZCkge1xuICAgICAgICAgIG5ld1N0b3JlU3RhdGUub3BlbktleXMgPSBwcmV2U3RhdGUuaW5saW5lT3BlbktleXM7XG4gICAgICAgICAgbmV3U3RhdGUuaW5saW5lT3BlbktleXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoT2JqZWN0LmtleXMobmV3U3RvcmVTdGF0ZSkubGVuZ3RoKSB7XG4gICAgICAgIHN0b3JlLnNldFN0YXRlKG5ld1N0b3JlU3RhdGUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3U3RhdGU7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIE1lbnU7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbk1lbnUuZGVmYXVsdFByb3BzID0ge1xuICBzZWxlY3RhYmxlOiB0cnVlLFxuICBvbkNsaWNrOiBub29wLFxuICBvblNlbGVjdDogbm9vcCxcbiAgb25PcGVuQ2hhbmdlOiBub29wLFxuICBvbkRlc2VsZWN0OiBub29wLFxuICBkZWZhdWx0U2VsZWN0ZWRLZXlzOiBbXSxcbiAgZGVmYXVsdE9wZW5LZXlzOiBbXSxcbiAgc3ViTWVudU9wZW5EZWxheTogMC4xLFxuICBzdWJNZW51Q2xvc2VEZWxheTogMC4xLFxuICB0cmlnZ2VyU3ViTWVudUFjdGlvbjogJ2hvdmVyJyxcbiAgcHJlZml4Q2xzOiAncmMtbWVudScsXG4gIGNsYXNzTmFtZTogJycsXG4gIG1vZGU6ICd2ZXJ0aWNhbCcsXG4gIHN0eWxlOiB7fSxcbiAgYnVpbHRpblBsYWNlbWVudHM6IHt9LFxuICBvdmVyZmxvd2VkSW5kaWNhdG9yOiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgbnVsbCwgXCJcXHhCN1xceEI3XFx4QjdcIilcbn07XG5leHBvcnQgZGVmYXVsdCBNZW51OyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHlcIjtcbmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyXCI7XG5pbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVja1wiO1xuaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3NcIjtcbmltcG9ydCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3NlcnRUaGlzSW5pdGlhbGl6ZWRcIjtcbmltcG9ydCBfaW5oZXJpdHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzXCI7XG5pbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlclwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEtleUNvZGUgZnJvbSBcInJjLXV0aWwvZXMvS2V5Q29kZVwiO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgb21pdCBmcm9tIFwicmMtdXRpbC9lcy9vbWl0XCI7XG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAnbWluaS1zdG9yZSc7XG5pbXBvcnQgeyBub29wLCBtZW51QWxsUHJvcHMgfSBmcm9tICcuL3V0aWwnO1xuZXhwb3J0IHZhciBNZW51SXRlbSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoTWVudUl0ZW0sIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoTWVudUl0ZW0pO1xuXG4gIGZ1bmN0aW9uIE1lbnVJdGVtKCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNZW51SXRlbSk7XG5cbiAgICBfdGhpcyA9IF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgX3RoaXMub25LZXlEb3duID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBrZXlDb2RlID0gZS5rZXlDb2RlO1xuXG4gICAgICBpZiAoa2V5Q29kZSA9PT0gS2V5Q29kZS5FTlRFUikge1xuICAgICAgICBfdGhpcy5vbkNsaWNrKGUpO1xuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICBfdGhpcy5vbk1vdXNlTGVhdmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgZXZlbnRLZXkgPSBfdGhpcyRwcm9wcy5ldmVudEtleSxcbiAgICAgICAgICBvbkl0ZW1Ib3ZlciA9IF90aGlzJHByb3BzLm9uSXRlbUhvdmVyLFxuICAgICAgICAgIG9uTW91c2VMZWF2ZSA9IF90aGlzJHByb3BzLm9uTW91c2VMZWF2ZTtcbiAgICAgIG9uSXRlbUhvdmVyKHtcbiAgICAgICAga2V5OiBldmVudEtleSxcbiAgICAgICAgaG92ZXI6IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIG9uTW91c2VMZWF2ZSh7XG4gICAgICAgIGtleTogZXZlbnRLZXksXG4gICAgICAgIGRvbUV2ZW50OiBlXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3RoaXMub25Nb3VzZUVudGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczIgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICBldmVudEtleSA9IF90aGlzJHByb3BzMi5ldmVudEtleSxcbiAgICAgICAgICBvbkl0ZW1Ib3ZlciA9IF90aGlzJHByb3BzMi5vbkl0ZW1Ib3ZlcixcbiAgICAgICAgICBvbk1vdXNlRW50ZXIgPSBfdGhpcyRwcm9wczIub25Nb3VzZUVudGVyO1xuICAgICAgb25JdGVtSG92ZXIoe1xuICAgICAgICBrZXk6IGV2ZW50S2V5LFxuICAgICAgICBob3ZlcjogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBvbk1vdXNlRW50ZXIoe1xuICAgICAgICBrZXk6IGV2ZW50S2V5LFxuICAgICAgICBkb21FdmVudDogZVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF90aGlzLm9uQ2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIF90aGlzJHByb3BzMyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIGV2ZW50S2V5ID0gX3RoaXMkcHJvcHMzLmV2ZW50S2V5LFxuICAgICAgICAgIG11bHRpcGxlID0gX3RoaXMkcHJvcHMzLm11bHRpcGxlLFxuICAgICAgICAgIG9uQ2xpY2sgPSBfdGhpcyRwcm9wczMub25DbGljayxcbiAgICAgICAgICBvblNlbGVjdCA9IF90aGlzJHByb3BzMy5vblNlbGVjdCxcbiAgICAgICAgICBvbkRlc2VsZWN0ID0gX3RoaXMkcHJvcHMzLm9uRGVzZWxlY3QsXG4gICAgICAgICAgaXNTZWxlY3RlZCA9IF90aGlzJHByb3BzMy5pc1NlbGVjdGVkO1xuICAgICAgdmFyIGluZm8gPSB7XG4gICAgICAgIGtleTogZXZlbnRLZXksXG4gICAgICAgIGtleVBhdGg6IFtldmVudEtleV0sXG4gICAgICAgIGl0ZW06IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLFxuICAgICAgICBkb21FdmVudDogZVxuICAgICAgfTtcbiAgICAgIG9uQ2xpY2soaW5mbyk7XG5cbiAgICAgIGlmIChtdWx0aXBsZSkge1xuICAgICAgICBpZiAoaXNTZWxlY3RlZCkge1xuICAgICAgICAgIG9uRGVzZWxlY3QoaW5mbyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb25TZWxlY3QoaW5mbyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIWlzU2VsZWN0ZWQpIHtcbiAgICAgICAgb25TZWxlY3QoaW5mbyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF90aGlzLnNhdmVOb2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIF90aGlzLm5vZGUgPSBub2RlO1xuICAgIH07XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoTWVudUl0ZW0sIFt7XG4gICAga2V5OiBcImNvbXBvbmVudERpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgLy8gaW52b2tlIGN1c3RvbWl6ZWQgcmVmIHRvIGV4cG9zZSBjb21wb25lbnQgdG8gbWl4aW5cbiAgICAgIHRoaXMuY2FsbFJlZigpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnREaWRVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgdGhpcy5jYWxsUmVmKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcblxuICAgICAgaWYgKHByb3BzLm9uRGVzdHJveSkge1xuICAgICAgICBwcm9wcy5vbkRlc3Ryb3kocHJvcHMuZXZlbnRLZXkpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXRQcmVmaXhDbHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UHJlZml4Q2xzKCkge1xuICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KHRoaXMucHJvcHMucm9vdFByZWZpeENscywgXCItaXRlbVwiKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0QWN0aXZlQ2xhc3NOYW1lXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFjdGl2ZUNsYXNzTmFtZSgpIHtcbiAgICAgIHJldHVybiBcIlwiLmNvbmNhdCh0aGlzLmdldFByZWZpeENscygpLCBcIi1hY3RpdmVcIik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFNlbGVjdGVkQ2xhc3NOYW1lXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNlbGVjdGVkQ2xhc3NOYW1lKCkge1xuICAgICAgcmV0dXJuIFwiXCIuY29uY2F0KHRoaXMuZ2V0UHJlZml4Q2xzKCksIFwiLXNlbGVjdGVkXCIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJnZXREaXNhYmxlZENsYXNzTmFtZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREaXNhYmxlZENsYXNzTmFtZSgpIHtcbiAgICAgIHJldHVybiBcIlwiLmNvbmNhdCh0aGlzLmdldFByZWZpeENscygpLCBcIi1kaXNhYmxlZFwiKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2FsbFJlZlwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxsUmVmKCkge1xuICAgICAgaWYgKHRoaXMucHJvcHMubWFudWFsUmVmKSB7XG4gICAgICAgIHRoaXMucHJvcHMubWFudWFsUmVmKHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF9jbGFzc05hbWVzO1xuXG4gICAgICB2YXIgcHJvcHMgPSBfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLnByb3BzKTtcblxuICAgICAgdmFyIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXModGhpcy5nZXRQcmVmaXhDbHMoKSwgcHJvcHMuY2xhc3NOYW1lLCAoX2NsYXNzTmFtZXMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCB0aGlzLmdldEFjdGl2ZUNsYXNzTmFtZSgpLCAhcHJvcHMuZGlzYWJsZWQgJiYgcHJvcHMuYWN0aXZlKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzLCB0aGlzLmdldFNlbGVjdGVkQ2xhc3NOYW1lKCksIHByb3BzLmlzU2VsZWN0ZWQpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIHRoaXMuZ2V0RGlzYWJsZWRDbGFzc05hbWUoKSwgcHJvcHMuZGlzYWJsZWQpLCBfY2xhc3NOYW1lcykpO1xuXG4gICAgICB2YXIgYXR0cnMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHByb3BzLmF0dHJpYnV0ZSksIHt9LCB7XG4gICAgICAgIHRpdGxlOiB0eXBlb2YgcHJvcHMudGl0bGUgPT09ICdzdHJpbmcnID8gcHJvcHMudGl0bGUgOiB1bmRlZmluZWQsXG4gICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxuICAgICAgICAvLyBzZXQgdG8gbWVudWl0ZW0gYnkgZGVmYXVsdFxuICAgICAgICByb2xlOiBwcm9wcy5yb2xlIHx8ICdtZW51aXRlbScsXG4gICAgICAgICdhcmlhLWRpc2FibGVkJzogcHJvcHMuZGlzYWJsZWRcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocHJvcHMucm9sZSA9PT0gJ29wdGlvbicpIHtcbiAgICAgICAgLy8gb3ZlcndyaXRlIHRvIG9wdGlvblxuICAgICAgICBhdHRycyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgYXR0cnMpLCB7fSwge1xuICAgICAgICAgIHJvbGU6ICdvcHRpb24nLFxuICAgICAgICAgICdhcmlhLXNlbGVjdGVkJzogcHJvcHMuaXNTZWxlY3RlZFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcHMucm9sZSA9PT0gbnVsbCB8fCBwcm9wcy5yb2xlID09PSAnbm9uZScpIHtcbiAgICAgICAgLy8gc29tZXRpbWVzIHdlIHdhbnQgdG8gc3BlY2lmeSByb2xlIGluc2lkZSA8bGkvPiBlbGVtZW50XG4gICAgICAgIC8vIDxsaT48YSByb2xlPSdtZW51aXRlbSc+TGluazwvYT48L2xpPiB3b3VsZCBiZSBhIGdvb2QgZXhhbXBsZVxuICAgICAgICAvLyBpbiB0aGlzIGNhc2UgdGhlIHJvbGUgb24gPGxpLz4gc2hvdWxkIGJlIFwibm9uZVwiIHRvXG4gICAgICAgIC8vIHJlbW92ZSB0aGUgaW1wbGllZCBsaXN0aXRlbSByb2xlLlxuICAgICAgICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvd2FpLWFyaWEtcHJhY3RpY2VzLTEuMS9leGFtcGxlcy9tZW51YmFyL21lbnViYXItMS9tZW51YmFyLTEuaHRtbFxuICAgICAgICBhdHRycy5yb2xlID0gJ25vbmUnO1xuICAgICAgfSAvLyBJbiBjYXNlIHRoYXQgb25DbGljay9vbk1vdXNlTGVhdmUvb25Nb3VzZUVudGVyIGlzIHBhc3NlZCBkb3duIGZyb20gb3duZXJcblxuXG4gICAgICB2YXIgbW91c2VFdmVudCA9IHtcbiAgICAgICAgb25DbGljazogcHJvcHMuZGlzYWJsZWQgPyBudWxsIDogdGhpcy5vbkNsaWNrLFxuICAgICAgICBvbk1vdXNlTGVhdmU6IHByb3BzLmRpc2FibGVkID8gbnVsbCA6IHRoaXMub25Nb3VzZUxlYXZlLFxuICAgICAgICBvbk1vdXNlRW50ZXI6IHByb3BzLmRpc2FibGVkID8gbnVsbCA6IHRoaXMub25Nb3VzZUVudGVyXG4gICAgICB9O1xuXG4gICAgICB2YXIgc3R5bGUgPSBfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcy5zdHlsZSk7XG5cbiAgICAgIGlmIChwcm9wcy5tb2RlID09PSAnaW5saW5lJykge1xuICAgICAgICBpZiAocHJvcHMuZGlyZWN0aW9uID09PSAncnRsJykge1xuICAgICAgICAgIHN0eWxlLnBhZGRpbmdSaWdodCA9IHByb3BzLmlubGluZUluZGVudCAqIHByb3BzLmxldmVsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0eWxlLnBhZGRpbmdMZWZ0ID0gcHJvcHMuaW5saW5lSW5kZW50ICogcHJvcHMubGV2ZWw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVudUFsbFByb3BzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gZGVsZXRlIHByb3BzW2tleV07XG4gICAgICB9KTtcbiAgICAgIGRlbGV0ZSBwcm9wcy5kaXJlY3Rpb247XG4gICAgICB2YXIgaWNvbiA9IHRoaXMucHJvcHMuaXRlbUljb247XG5cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5pdGVtSWNvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBUT0RPOiBUaGlzIGlzIGEgYnVnIHdoaWNoIHNob3VsZCBmaXhlZCBhZnRlciBUUyByZWZhY3RvclxuICAgICAgICBpY29uID0gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQodGhpcy5wcm9wcy5pdGVtSWNvbiwgdGhpcy5wcm9wcyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImxpXCIsIF9leHRlbmRzKHt9LCBvbWl0KHByb3BzLCBbJ29uQ2xpY2snLCAnb25Nb3VzZUVudGVyJywgJ29uTW91c2VMZWF2ZScsICdvblNlbGVjdCddKSwgYXR0cnMsIG1vdXNlRXZlbnQsIHtcbiAgICAgICAgc3R5bGU6IHN0eWxlLFxuICAgICAgICByZWY6IHRoaXMuc2F2ZU5vZGVcbiAgICAgIH0pLCBwcm9wcy5jaGlsZHJlbiwgaWNvbik7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIE1lbnVJdGVtO1xufShSZWFjdC5Db21wb25lbnQpO1xuTWVudUl0ZW0uaXNNZW51SXRlbSA9IHRydWU7XG5NZW51SXRlbS5kZWZhdWx0UHJvcHMgPSB7XG4gIG9uU2VsZWN0OiBub29wLFxuICBvbk1vdXNlRW50ZXI6IG5vb3AsXG4gIG9uTW91c2VMZWF2ZTogbm9vcCxcbiAgbWFudWFsUmVmOiBub29wXG59O1xudmFyIGNvbm5lY3RlZCA9IGNvbm5lY3QoZnVuY3Rpb24gKF9yZWYsIF9yZWYyKSB7XG4gIHZhciBhY3RpdmVLZXkgPSBfcmVmLmFjdGl2ZUtleSxcbiAgICAgIHNlbGVjdGVkS2V5cyA9IF9yZWYuc2VsZWN0ZWRLZXlzO1xuICB2YXIgZXZlbnRLZXkgPSBfcmVmMi5ldmVudEtleSxcbiAgICAgIHN1Yk1lbnVLZXkgPSBfcmVmMi5zdWJNZW51S2V5O1xuICByZXR1cm4ge1xuICAgIGFjdGl2ZTogYWN0aXZlS2V5W3N1Yk1lbnVLZXldID09PSBldmVudEtleSxcbiAgICAvLyBzZWxlY3RlZEtleXMgc2hvdWxkIGJlIGFycmF5IGluIGFueSBjaXJjdW1zdGFuY2VcbiAgICAvLyB3aGVuIGl0IGlzIG5vdCwgd2UgaGF2ZSBmYWxsYmFjayBsb2dpYyBmb3IgaHR0cHM6Ly9naXRodWIuY29tL2FudC1kZXNpZ24vYW50LWRlc2lnbi9pc3N1ZXMvMjk0MzBcbiAgICBpc1NlbGVjdGVkOiBBcnJheS5pc0FycmF5KHNlbGVjdGVkS2V5cykgPyBzZWxlY3RlZEtleXMuaW5kZXhPZihldmVudEtleSkgIT09IC0xIDogc2VsZWN0ZWRLZXlzID09PSBldmVudEtleVxuICB9O1xufSkoTWVudUl0ZW0pO1xuZXhwb3J0IGRlZmF1bHQgY29ubmVjdGVkOyIsImV4cG9ydCBjbGFzcyBEcmFnU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKGV2ZW50LCBjb21wb25lbnQsIGluaXQgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLnBhZ2VYID0gMDtcbiAgICAgICAgdGhpcy5wYWdlWSA9IDA7XG4gICAgICAgIHRoaXMuY2xpZW50WCA9IDA7XG4gICAgICAgIHRoaXMuY2xpZW50WSA9IDA7XG4gICAgICAgIHRoaXMuZHggPSAwO1xuICAgICAgICB0aGlzLmR5ID0gMDtcbiAgICAgICAgdGhpcy5ldmVudCA9IGV2ZW50O1xuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcbiAgICAgICAgdGhpcy5faW5pdCA9IGluaXQ7XG4gICAgICAgIGlmIChldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUuc3RhcnRzV2l0aCgndG91Y2gnKSkge1xuICAgICAgICAgICAgICAgIGxldCB0b3VjaDtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3RvdWNoZW5kJykge1xuICAgICAgICAgICAgICAgICAgICB0b3VjaCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG91Y2ggPSBldmVudC50b3VjaGVzWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VYID0gdG91Y2gucGFnZVg7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlWSA9IHRvdWNoLnBhZ2VZO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50WCA9IHRvdWNoLmNsaWVudFg7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGllbnRZID0gdG91Y2guY2xpZW50WTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCdwYWdlWCcgaW4gZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhZ2VYID0gZXZlbnQucGFnZVg7XG4gICAgICAgICAgICAgICAgdGhpcy5wYWdlWSA9IGV2ZW50LnBhZ2VZO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50WCA9IGV2ZW50LmNsaWVudFg7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGllbnRZID0gZXZlbnQuY2xpZW50WTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZHggPSAodGhpcy5wYWdlWCAtIGNvbXBvbmVudC5iYXNlWCkgKiBjb21wb25lbnQuc2NhbGVYO1xuICAgICAgICAgICAgdGhpcy5keSA9ICh0aGlzLnBhZ2VZIC0gY29tcG9uZW50LmJhc2VZKSAqIGNvbXBvbmVudC5zY2FsZVk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbW92ZWQoKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmFicyh0aGlzLmR4KSA+PSAxIHx8IE1hdGguYWJzKHRoaXMuZHkpID49IDE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSByZWZFbGVtZW50LCB0aGUgZWxlbWVudCBiZWluZyBtb3ZlZFxuICAgICAqIEBwYXJhbSBkcmFnZ2luZ0h0bWwsIHRoZSBlbGVtZW50IHNob3cgaW4gdGhlIGRyYWdnaW5nIGxheWVyXG4gICAgICovXG4gICAgc3RhcnREcmFnKHJlZkVsZW1lbnQsIGRyYWdnaW5nSHRtbCkge1xuICAgICAgICBpZiAoIXRoaXMuX2luaXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignc3RhcnREcmFnIGNhbiBvbmx5IGJlIHVzZWQgaW4gb25EcmFnU3RhcnQgY2FsbGJhY2snKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVmRWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZWZFbGVtZW50ID0gdGhpcy5jb21wb25lbnQuZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICBjcmVhdGVEcmFnZ2luZ0VsZW1lbnQodGhpcywgcmVmRWxlbWVudCwgZHJhZ2dpbmdIdG1sKTtcbiAgICAgICAgdGhpcy5jb21wb25lbnQub3duZXJEb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2RvY2stZHJhZ2dpbmcnKTtcbiAgICB9XG4gICAgc2V0RGF0YShkYXRhLCBzY29wZSkge1xuICAgICAgICBpZiAoIXRoaXMuX2luaXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignc2V0RGF0YSBjYW4gb25seSBiZSB1c2VkIGluIG9uRHJhZ1N0YXJ0IGNhbGxiYWNrJyk7XG4gICAgICAgIH1cbiAgICAgICAgX2RhdGFTY29wZSA9IHNjb3BlO1xuICAgICAgICBfZGF0YSA9IGRhdGE7XG4gICAgfVxuICAgIHN0YXRpYyBnZXREYXRhKGZpZWxkLCBzY29wZSkge1xuICAgICAgICBpZiAoc2NvcGUgPT09IF9kYXRhU2NvcGUgJiYgX2RhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBfZGF0YVtmaWVsZF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGdldCBkcmFnVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50LmRyYWdUeXBlO1xuICAgIH1cbiAgICBhY2NlcHQobWVzc2FnZSA9ICcnKSB7XG4gICAgICAgIHRoaXMuYWNjZXB0TWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMucmVqZWN0ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgcmVqZWN0KCkge1xuICAgICAgICB0aGlzLnJlamVjdGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgX29uTW92ZSgpIHtcbiAgICAgICAgaWYgKF9kYXRhKSB7XG4gICAgICAgICAgICBsZXQgb3duZXJEb2N1bWVudCA9IHRoaXMuY29tcG9uZW50Lm93bmVyRG9jdW1lbnQ7XG4gICAgICAgICAgICBsZXQgc2VhcmNoRWxlbWVudCA9IG93bmVyRG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh0aGlzLmNsaWVudFgsIHRoaXMuY2xpZW50WSk7XG4gICAgICAgICAgICBsZXQgZHJvcHBpbmdIYW5kbGVycztcbiAgICAgICAgICAgIHdoaWxlIChzZWFyY2hFbGVtZW50ICYmIHNlYXJjaEVsZW1lbnQgIT09IG93bmVyRG9jdW1lbnQuYm9keSkge1xuICAgICAgICAgICAgICAgIGlmIChfZHJhZ0xpc3RlbmVycy5oYXMoc2VhcmNoRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGhhbmRsZXJzID0gX2RyYWdMaXN0ZW5lcnMuZ2V0KHNlYXJjaEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlcnMub25EcmFnT3ZlclQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXJzLm9uRHJhZ092ZXJUKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWNjZXB0TWVzc2FnZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcHBpbmdIYW5kbGVycyA9IGhhbmRsZXJzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlYXJjaEVsZW1lbnQgPSBzZWFyY2hFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXREcm9wcGluZ0hhbmRsZXIoZHJvcHBpbmdIYW5kbGVycywgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgbW92ZURyYWdnaW5nRWxlbWVudCh0aGlzKTtcbiAgICB9XG4gICAgX29uRHJhZ0VuZChjYW5jZWxlZCA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChfZHJvcHBpbmdIYW5kbGVycyAmJiBfZHJvcHBpbmdIYW5kbGVycy5vbkRyb3BUICYmICFjYW5jZWxlZCkge1xuICAgICAgICAgICAgX2Ryb3BwaW5nSGFuZGxlcnMub25Ecm9wVCh0aGlzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBvbmVudC5kcmFnVHlwZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgICAgIC8vIHByZXZlbnQgdGhlIG5leHQgbWVudSBldmVudCBpZiBkcm9wIGhhbmRsZXIgaXMgY2FsbGVkIG9uIHJpZ2h0IG1vdXNlIGJ1dHRvblxuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lm93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBwcmV2ZW50RGVmYXVsdCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBwcmV2ZW50RGVmYXVsdCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGVzdHJveURyYWdnaW5nRWxlbWVudCh0aGlzKTtcbiAgICAgICAgdGhpcy5jb21wb25lbnQub3duZXJEb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2RvY2stZHJhZ2dpbmcnKTtcbiAgICB9XG59XG5mdW5jdGlvbiBwcmV2ZW50RGVmYXVsdChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG59XG5sZXQgX2RhdGFTY29wZTtcbmxldCBfZGF0YTtcbmxldCBfZHJhZ2dpbmdTdGF0ZTtcbi8vIGFwcGx5aW5nIGRyYWdnaW5nIHN0eWxlXG5sZXQgX3JlZkVsZW1lbnQ7XG5sZXQgX2Ryb3BwaW5nSGFuZGxlcnM7XG5mdW5jdGlvbiBzZXREcm9wcGluZ0hhbmRsZXIoaGFuZGxlcnMsIHN0YXRlKSB7XG4gICAgaWYgKF9kcm9wcGluZ0hhbmRsZXJzID09PSBoYW5kbGVycykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChfZHJvcHBpbmdIYW5kbGVycyAmJiBfZHJvcHBpbmdIYW5kbGVycy5vbkRyYWdMZWF2ZVQpIHtcbiAgICAgICAgX2Ryb3BwaW5nSGFuZGxlcnMub25EcmFnTGVhdmVUKHN0YXRlKTtcbiAgICB9XG4gICAgX2Ryb3BwaW5nSGFuZGxlcnMgPSBoYW5kbGVycztcbn1cbmxldCBfZHJhZ0xpc3RlbmVycyA9IG5ldyBXZWFrTWFwKCk7XG5leHBvcnQgZnVuY3Rpb24gaXNEcmFnZ2luZygpIHtcbiAgICByZXR1cm4gX2RyYWdnaW5nU3RhdGUgIT0gbnVsbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhZGRIYW5kbGVycyhlbGVtZW50LCBoYW5kbGVycykge1xuICAgIF9kcmFnTGlzdGVuZXJzLnNldChlbGVtZW50LCBoYW5kbGVycyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlSGFuZGxlcnMoZWxlbWVudCkge1xuICAgIGxldCBoYW5kbGVycyA9IF9kcmFnTGlzdGVuZXJzLmdldChlbGVtZW50KTtcbiAgICBpZiAoaGFuZGxlcnMgPT09IF9kcm9wcGluZ0hhbmRsZXJzKSB7XG4gICAgICAgIF9kcm9wcGluZ0hhbmRsZXJzID0gbnVsbDtcbiAgICB9XG4gICAgX2RyYWdMaXN0ZW5lcnMuZGVsZXRlKGVsZW1lbnQpO1xufVxubGV0IF9kcmFnZ2luZ0RpdjtcbmxldCBfZHJhZ2dpbmdJY29uO1xuZnVuY3Rpb24gX2NyZWF0ZURyYWdnaW5nRGl2KGRvYykge1xuICAgIF9kcmFnZ2luZ0RpdiA9IGRvYy5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBfZHJhZ2dpbmdJY29uID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIF9kcmFnZ2luZ0Rpdi5jbGFzc05hbWUgPSAnZHJhZ2dpbmctbGF5ZXInO1xuICAgIF9kcmFnZ2luZ0Rpdi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7IC8vIHBsYWNlIGhvbGRlciBmb3IgZHJhZ2dpbmcgZWxlbWVudFxuICAgIF9kcmFnZ2luZ0Rpdi5hcHBlbmRDaGlsZChfZHJhZ2dpbmdJY29uKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZURyYWdnaW5nRWxlbWVudChzdGF0ZSwgcmVmRWxlbWVudCwgZHJhZ2dpbmdIdG1sKSB7XG4gICAgX2RyYWdnaW5nU3RhdGUgPSBzdGF0ZTtcbiAgICBpZiAocmVmRWxlbWVudCkge1xuICAgICAgICByZWZFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2RyYWdnaW5nJyk7XG4gICAgICAgIF9yZWZFbGVtZW50ID0gcmVmRWxlbWVudDtcbiAgICB9XG4gICAgX2NyZWF0ZURyYWdnaW5nRGl2KHN0YXRlLmNvbXBvbmVudC5vd25lckRvY3VtZW50KTtcbiAgICBzdGF0ZS5jb21wb25lbnQub3duZXJEb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKF9kcmFnZ2luZ0Rpdik7XG4gICAgbGV0IGRyYWdnaW5nV2lkdGggPSAwO1xuICAgIGxldCBkcmFnZ2luZ0hlaWdodCA9IDA7XG4gICAgaWYgKGRyYWdnaW5nSHRtbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRyYWdnaW5nSHRtbCA9IHN0YXRlLmNvbXBvbmVudC5lbGVtZW50O1xuICAgIH1cbiAgICBpZiAoZHJhZ2dpbmdIdG1sICYmICdvdXRlckhUTUwnIGluIGRyYWdnaW5nSHRtbCkge1xuICAgICAgICBkcmFnZ2luZ1dpZHRoID0gZHJhZ2dpbmdIdG1sLm9mZnNldFdpZHRoO1xuICAgICAgICBkcmFnZ2luZ0hlaWdodCA9IGRyYWdnaW5nSHRtbC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIGRyYWdnaW5nSHRtbCA9IGRyYWdnaW5nSHRtbC5vdXRlckhUTUw7XG4gICAgfVxuICAgIGlmIChkcmFnZ2luZ0h0bWwpIHtcbiAgICAgICAgX2RyYWdnaW5nRGl2LmZpcnN0RWxlbWVudENoaWxkLm91dGVySFRNTCA9IGRyYWdnaW5nSHRtbDtcbiAgICAgICAgaWYgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKF9kcmFnZ2luZ0Rpdi5maXJzdEVsZW1lbnRDaGlsZCkuYmFja2dyb3VuZENvbG9yID09PSAncmdiYSgwLCAwLCAwLCAwKScpIHtcbiAgICAgICAgICAgIF9kcmFnZ2luZ0Rpdi5maXJzdEVsZW1lbnRDaGlsZC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3JcbiAgICAgICAgICAgICAgICA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKF9kcmFnZ2luZ0RpdikuZ2V0UHJvcGVydHlWYWx1ZSgnLS1kZWZhdWx0LWJhY2tncm91bmQtY29sb3InKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZHJhZ2dpbmdXaWR0aCkge1xuICAgICAgICAgICAgaWYgKGRyYWdnaW5nV2lkdGggPiA0MDApXG4gICAgICAgICAgICAgICAgZHJhZ2dpbmdXaWR0aCA9IDQwMDtcbiAgICAgICAgICAgIF9kcmFnZ2luZ0Rpdi5maXJzdEVsZW1lbnRDaGlsZC5zdHlsZS53aWR0aCA9IGAke2RyYWdnaW5nV2lkdGh9cHhgO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkcmFnZ2luZ0hlaWdodCkge1xuICAgICAgICAgICAgaWYgKGRyYWdnaW5nSGVpZ2h0ID4gMzAwKVxuICAgICAgICAgICAgICAgIGRyYWdnaW5nSGVpZ2h0ID0gMzAwO1xuICAgICAgICAgICAgX2RyYWdnaW5nRGl2LmZpcnN0RWxlbWVudENoaWxkLnN0eWxlLmhlaWdodCA9IGAke2RyYWdnaW5nSGVpZ2h0fXB4YDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBjYWxsYmFjayBvZiBfZHJhZ1N0YXRlTGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKF9kYXRhU2NvcGUpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKF9kYXRhU2NvcGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBtb3ZlRHJhZ2dpbmdFbGVtZW50KHN0YXRlKSB7XG4gICAgX2RyYWdnaW5nRGl2LnN0eWxlLmxlZnQgPSBgJHtzdGF0ZS5wYWdlWH1weGA7XG4gICAgX2RyYWdnaW5nRGl2LnN0eWxlLnRvcCA9IGAke3N0YXRlLnBhZ2VZfXB4YDtcbiAgICBpZiAoc3RhdGUucmVqZWN0ZWQpIHtcbiAgICAgICAgX2RyYWdnaW5nSWNvbi5jbGFzc05hbWUgPSAnZHJhZy1hY2NlcHQtcmVqZWN0JztcbiAgICB9XG4gICAgZWxzZSBpZiAoc3RhdGUuYWNjZXB0TWVzc2FnZSkge1xuICAgICAgICBfZHJhZ2dpbmdJY29uLmNsYXNzTmFtZSA9IHN0YXRlLmFjY2VwdE1lc3NhZ2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBfZHJhZ2dpbmdJY29uLmNsYXNzTmFtZSA9ICcnO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBkZXN0cm95RHJhZ2dpbmdFbGVtZW50KGUpIHtcbiAgICBpZiAoX3JlZkVsZW1lbnQpIHtcbiAgICAgICAgX3JlZkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZ2dpbmcnKTtcbiAgICAgICAgX3JlZkVsZW1lbnQgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoX2RyYWdnaW5nRGl2KSB7XG4gICAgICAgIF9kcmFnZ2luZ0Rpdi5yZW1vdmUoKTtcbiAgICAgICAgX2RyYWdnaW5nRGl2ID0gbnVsbDtcbiAgICB9XG4gICAgX2RyYWdnaW5nU3RhdGUgPSBudWxsO1xuICAgIHNldERyb3BwaW5nSGFuZGxlcihudWxsLCBlKTtcbiAgICBfZGF0YVNjb3BlID0gbnVsbDtcbiAgICBfZGF0YSA9IG51bGw7XG4gICAgZm9yIChsZXQgY2FsbGJhY2sgb2YgX2RyYWdTdGF0ZUxpc3RlbmVyKSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgIH1cbn1cbmxldCBfZHJhZ1N0YXRlTGlzdGVuZXIgPSBuZXcgU2V0KCk7XG5leHBvcnQgZnVuY3Rpb24gYWRkRHJhZ1N0YXRlTGlzdGVuZXIoY2FsbGJhY2spIHtcbiAgICBfZHJhZ1N0YXRlTGlzdGVuZXIuYWRkKGNhbGxiYWNrKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVEcmFnU3RhdGVMaXN0ZW5lcihjYWxsYmFjaykge1xuICAgIF9kcmFnU3RhdGVMaXN0ZW5lci5kZWxldGUoY2FsbGJhY2spO1xufVxuLy8gd29yayBhcm91bmQgZm9yIGRyYWcgc2Nyb2xsIGlzc3VlIG9uIElPU1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5uYXZpZ2F0b3IgJiYgd2luZG93Lm5hdmlnYXRvci5wbGF0Zm9ybSAmJiAvaVAoYWR8aG9uZXxvZCkvLnRlc3Qod2luZG93Lm5hdmlnYXRvci5wbGF0Zm9ybSkpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PT0gMSAmJiBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnZG9jay1kcmFnZ2luZycpKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9LCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xufVxuIiwiZXhwb3J0IGNsYXNzIEdlc3R1cmVTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoZXZlbnQsIGNvbXBvbmVudCwgaW5pdCA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuZHgxID0gMDtcbiAgICAgICAgdGhpcy5keTEgPSAwO1xuICAgICAgICB0aGlzLmR4MiA9IDA7XG4gICAgICAgIHRoaXMuZHkyID0gMDtcbiAgICAgICAgdGhpcy5zY2FsZSA9IDE7XG4gICAgICAgIHRoaXMucm90YXRlID0gMDtcbiAgICAgICAgdGhpcy5keCA9IDA7XG4gICAgICAgIHRoaXMuZHkgPSAwO1xuICAgICAgICB0aGlzLmV2ZW50ID0gZXZlbnQ7XG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gY29tcG9uZW50O1xuICAgICAgICB0aGlzLl9pbml0ID0gaW5pdDtcbiAgICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBsZXQgdG91Y2gxID0gZXZlbnQudG91Y2hlc1swXTtcbiAgICAgICAgICAgICAgICBsZXQgdG91Y2gyID0gZXZlbnQudG91Y2hlc1sxXTtcbiAgICAgICAgICAgICAgICB0aGlzLmR4MSA9ICh0b3VjaDEucGFnZVggLSBjb21wb25lbnQuYmFzZVgpICogY29tcG9uZW50LnNjYWxlWDtcbiAgICAgICAgICAgICAgICB0aGlzLmR5MSA9ICh0b3VjaDEucGFnZVkgLSBjb21wb25lbnQuYmFzZVkpICogY29tcG9uZW50LnNjYWxlWTtcbiAgICAgICAgICAgICAgICB0aGlzLmR4MiA9ICh0b3VjaDIucGFnZVggLSBjb21wb25lbnQuYmFzZVgyKSAqIGNvbXBvbmVudC5zY2FsZVg7XG4gICAgICAgICAgICAgICAgdGhpcy5keTIgPSAodG91Y2gyLnBhZ2VZIC0gY29tcG9uZW50LmJhc2VZMikgKiBjb21wb25lbnQuc2NhbGVZO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmR4MSAqIHRoaXMuZHgyID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5keCA9ICh0aGlzLmR4MSArIHRoaXMuZHgyKSAvIDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmR5MSAqIHRoaXMuZHkyID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5keSA9ICh0aGlzLmR5MSArIHRoaXMuZHkyKSAvIDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2NhbGUgPSBNYXRoLnNxcnQoTWF0aC5wb3codG91Y2gyLnBhZ2VYIC0gdG91Y2gxLnBhZ2VYLCAyKSArIE1hdGgucG93KHRvdWNoMi5wYWdlWSAtIHRvdWNoMS5wYWdlWSwgMikpIC8gY29tcG9uZW50LmJhc2VEaXM7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGUgPSBNYXRoLmF0YW4yKHRvdWNoMi5wYWdlWSAtIHRvdWNoMS5wYWdlWSwgdG91Y2gyLnBhZ2VYIC0gdG91Y2gxLnBhZ2VYKSAtIGNvbXBvbmVudC5iYXNlQW5nO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvdGF0ZSA+IE1hdGguUEkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3RhdGUgLT0gTWF0aC5QSSAqIDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucm90YXRlIDwgLU1hdGguUEkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3RhdGUgKz0gTWF0aC5QSSAqIDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG1vdmVkKCkge1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5hYnModGhpcy5keDEpLCBNYXRoLmFicyh0aGlzLmR4MiksIE1hdGguYWJzKHRoaXMuZHkxKSwgTWF0aC5hYnModGhpcy5keTIpKTtcbiAgICB9XG4gICAgcGFnZUNlbnRlcigpIHtcbiAgICAgICAgbGV0IHRvdWNoMSA9IHRoaXMuZXZlbnQudG91Y2hlc1swXTtcbiAgICAgICAgbGV0IHRvdWNoMiA9IHRoaXMuZXZlbnQudG91Y2hlc1sxXTtcbiAgICAgICAgcmV0dXJuIFsodG91Y2gxLnBhZ2VYICsgdG91Y2gyLnBhZ2VYKSAvIDIsICh0b3VjaDEucGFnZVkgKyB0b3VjaDIucGFnZVkpIC8gMl07XG4gICAgfVxuICAgIGNsaWVudENlbnRlcigpIHtcbiAgICAgICAgbGV0IHRvdWNoMSA9IHRoaXMuZXZlbnQudG91Y2hlc1swXTtcbiAgICAgICAgbGV0IHRvdWNoMiA9IHRoaXMuZXZlbnQudG91Y2hlc1sxXTtcbiAgICAgICAgcmV0dXJuIFsodG91Y2gxLmNsaWVudFggKyB0b3VjaDIuY2xpZW50WCkgLyAyLCAodG91Y2gxLmNsaWVudFkgKyB0b3VjaDIuY2xpZW50WSkgLyAyXTtcbiAgICB9XG59XG4iLCJ2YXIgX19yZXN0ID0gKHRoaXMgJiYgdGhpcy5fX3Jlc3QpIHx8IGZ1bmN0aW9uIChzLCBlKSB7XG4gICAgdmFyIHQgPSB7fTtcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcbiAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XG4gICAgICAgIH1cbiAgICByZXR1cm4gdDtcbn07XG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgKiBhcyBEcmFnTWFuYWdlciBmcm9tIFwiLi9EcmFnTWFuYWdlclwiO1xuaW1wb3J0IHsgR2VzdHVyZVN0YXRlIH0gZnJvbSBcIi4vR2VzdHVyZU1hbmFnZXJcIjtcbmV4cG9ydCBjbGFzcyBEcmFnRHJvcERpdiBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLl9nZXRSZWYgPSAocikgPT4ge1xuICAgICAgICAgICAgaWYgKHIgPT09IHRoaXMuZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB7IGdldFJlZiwgb25EcmFnT3ZlclQgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50ICYmIG9uRHJhZ092ZXJUKSB7XG4gICAgICAgICAgICAgICAgRHJhZ01hbmFnZXIucmVtb3ZlSGFuZGxlcnModGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IHI7XG4gICAgICAgICAgICBpZiAocikge1xuICAgICAgICAgICAgICAgIHRoaXMub3duZXJEb2N1bWVudCA9IHIub3duZXJEb2N1bWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnZXRSZWYpIHtcbiAgICAgICAgICAgICAgICBnZXRSZWYocik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAociAmJiBvbkRyYWdPdmVyVCkge1xuICAgICAgICAgICAgICAgIERyYWdNYW5hZ2VyLmFkZEhhbmRsZXJzKHIsIHRoaXMucHJvcHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRyYWdUeXBlID0gbnVsbDtcbiAgICAgICAgdGhpcy53YWl0aW5nTW92ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxpc3RlbmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdlc3R1cmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9uUG9pbnRlckRvd24gPSAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IG5hdGl2ZVRhcmdldCA9IGUubmF0aXZlRXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKG5hdGl2ZVRhcmdldCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgfHwgbmF0aXZlVGFyZ2V0IGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudCB8fCBuYXRpdmVUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkcmFnLWlnbm9yZScpKSB7XG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGRyYWcgZnJvbSBpbnB1dCBlbGVtZW50XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHsgb25EcmFnU3RhcnRULCBvbkdlc3R1cmVTdGFydFQsIG9uR2VzdHVyZU1vdmVULCB1c2VSaWdodEJ1dHRvbkRyYWdUIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgbGV0IGV2ZW50ID0gZS5uYXRpdmVFdmVudDtcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3RvdWNoc3RhcnQnKSB7XG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgc2luZ2xlIG9yIGRvdWJsZSBmaW5ndXJlIHRvdWNoXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvbkRyYWdTdGFydFQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25EcmFnU3RhcnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvbkdlc3R1cmVTdGFydFQgJiYgb25HZXN0dXJlTW92ZVQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25HZXN0dXJlU3RhcnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob25EcmFnU3RhcnRUKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMiAmJiAhdXNlUmlnaHRCdXR0b25EcmFnVCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMub25EcmFnU3RhcnQoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uTW91c2VNb3ZlID0gKGUpID0+IHtcbiAgICAgICAgICAgIGxldCB7IG9uRHJhZ01vdmVUIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgaWYgKHRoaXMud2FpdGluZ01vdmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoRHJhZ01hbmFnZXIuaXNEcmFnZ2luZygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25EcmFnRW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrRmlyc3RNb3ZlKGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgc3RhdGUgPSBuZXcgRHJhZ01hbmFnZXIuRHJhZ1N0YXRlKGUsIHRoaXMpO1xuICAgICAgICAgICAgICAgIHN0YXRlLl9vbk1vdmUoKTtcbiAgICAgICAgICAgICAgICBpZiAob25EcmFnTW92ZVQpIHtcbiAgICAgICAgICAgICAgICAgICAgb25EcmFnTW92ZVQoc3RhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblRvdWNoTW92ZSA9IChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgeyBvbkRyYWdNb3ZlVCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIGlmICh0aGlzLndhaXRpbmdNb3ZlKSB7XG4gICAgICAgICAgICAgICAgaWYgKERyYWdNYW5hZ2VyLmlzRHJhZ2dpbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRHJhZ0VuZCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jaGVja0ZpcnN0TW92ZShlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZS50b3VjaGVzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25EcmFnRW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgc3RhdGUgPSBuZXcgRHJhZ01hbmFnZXIuRHJhZ1N0YXRlKGUsIHRoaXMpO1xuICAgICAgICAgICAgICAgIHN0YXRlLl9vbk1vdmUoKTtcbiAgICAgICAgICAgICAgICBpZiAob25EcmFnTW92ZVQpIHtcbiAgICAgICAgICAgICAgICAgICAgb25EcmFnTW92ZVQoc3RhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkRyYWdFbmQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHsgb25EcmFnRW5kVCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIGxldCBzdGF0ZSA9IG5ldyBEcmFnTWFuYWdlci5EcmFnU3RhdGUoZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVycygpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLndhaXRpbmdNb3ZlKSB7XG4gICAgICAgICAgICAgICAgLy8gZT1udWxsIG1lYW5zIGRyYWcgaXMgY2FuY2VsZWRcbiAgICAgICAgICAgICAgICBzdGF0ZS5fb25EcmFnRW5kKGUgPT0gbnVsbCk7XG4gICAgICAgICAgICAgICAgaWYgKG9uRHJhZ0VuZFQpIHtcbiAgICAgICAgICAgICAgICAgICAgb25EcmFnRW5kVChzdGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGVhbnVwRHJhZyhzdGF0ZSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25HZXN0dXJlTW92ZSA9IChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgeyBvbkdlc3R1cmVNb3ZlVCwgZ2VzdHVyZVNlbnNpdGl2aXR5IH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgbGV0IHN0YXRlID0gbmV3IEdlc3R1cmVTdGF0ZShlLCB0aGlzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLndhaXRpbmdNb3ZlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoZ2VzdHVyZVNlbnNpdGl2aXR5ID4gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2VzdHVyZVNlbnNpdGl2aXR5ID0gMTA7IC8vIGRlZmF1bHQgc2Vuc2l0aXZpdHlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLm1vdmVkKCkgPiBnZXN0dXJlU2Vuc2l0aXZpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53YWl0aW5nTW92ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvbkdlc3R1cmVNb3ZlVCkge1xuICAgICAgICAgICAgICAgIG9uR2VzdHVyZU1vdmVUKHN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkdlc3R1cmVFbmQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHsgb25HZXN0dXJlRW5kVCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIGxldCBzdGF0ZSA9IG5ldyBEcmFnTWFuYWdlci5EcmFnU3RhdGUoZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVycygpO1xuICAgICAgICAgICAgaWYgKG9uR2VzdHVyZUVuZFQpIHtcbiAgICAgICAgICAgICAgICBvbkdlc3R1cmVFbmRUKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25LZXlEb3duID0gKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBvbkRyYWdTdGFydChldmVudCkge1xuICAgICAgICBpZiAoRHJhZ01hbmFnZXIuaXNEcmFnZ2luZygpKSB7XG4gICAgICAgICAgICAvLyBzYW1lIHBvaW50ZXIgZXZlbnQgc2hvdWxkbid0IHRyaWdnZXIgMiBkcmFnIHN0YXJ0XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0YXRlID0gbmV3IERyYWdNYW5hZ2VyLkRyYWdTdGF0ZShldmVudCwgdGhpcywgdHJ1ZSk7XG4gICAgICAgIHRoaXMuYmFzZVggPSBzdGF0ZS5wYWdlWDtcbiAgICAgICAgdGhpcy5iYXNlWSA9IHN0YXRlLnBhZ2VZO1xuICAgICAgICBsZXQgYmFzZUVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgbGV0IHJlY3QgPSBiYXNlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdGhpcy5zY2FsZVggPSBiYXNlRWxlbWVudC5vZmZzZXRXaWR0aCAvIE1hdGgucm91bmQocmVjdC53aWR0aCk7XG4gICAgICAgIHRoaXMuc2NhbGVZID0gYmFzZUVsZW1lbnQub2Zmc2V0SGVpZ2h0IC8gTWF0aC5yb3VuZChyZWN0LmhlaWdodCk7XG4gICAgICAgIHRoaXMuYWRkRHJhZ0xpc3RlbmVycyhldmVudCk7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmRpcmVjdERyYWdUKSB7XG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGVGaXJzdE1vdmUoc3RhdGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZERyYWdMaXN0ZW5lcnMoZXZlbnQpIHtcbiAgICAgICAgbGV0IHsgb25EcmFnU3RhcnRUIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3RvdWNoc3RhcnQnKSB7XG4gICAgICAgICAgICB0aGlzLm93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5vblRvdWNoTW92ZSk7XG4gICAgICAgICAgICB0aGlzLm93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLm9uRHJhZ0VuZCk7XG4gICAgICAgICAgICB0aGlzLmRyYWdUeXBlID0gJ3RvdWNoJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub3duZXJEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcbiAgICAgICAgICAgIHRoaXMub3duZXJEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbkRyYWdFbmQpO1xuICAgICAgICAgICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMikge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ1R5cGUgPSAncmlnaHQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmFnVHlwZSA9ICdsZWZ0JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLndhaXRpbmdNb3ZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5saXN0ZW5pbmcgPSB0cnVlO1xuICAgIH1cbiAgICAvLyByZXR1cm4gdHJ1ZSBmb3IgYSB2YWxpZCBtb3ZlXG4gICAgY2hlY2tGaXJzdE1vdmUoZSkge1xuICAgICAgICBsZXQgc3RhdGUgPSBuZXcgRHJhZ01hbmFnZXIuRHJhZ1N0YXRlKGUsIHRoaXMsIHRydWUpO1xuICAgICAgICBpZiAoIXN0YXRlLm1vdmVkKCkpIHtcbiAgICAgICAgICAgIC8vIG5vdCBhIG1vdmVcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5leGVjdXRlRmlyc3RNb3ZlKHN0YXRlKTtcbiAgICB9XG4gICAgZXhlY3V0ZUZpcnN0TW92ZShzdGF0ZSkge1xuICAgICAgICBsZXQgeyBvbkRyYWdTdGFydFQgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIHRoaXMud2FpdGluZ01vdmUgPSBmYWxzZTtcbiAgICAgICAgb25EcmFnU3RhcnRUKHN0YXRlKTtcbiAgICAgICAgaWYgKCFEcmFnTWFuYWdlci5pc0RyYWdnaW5nKCkpIHtcbiAgICAgICAgICAgIHRoaXMub25EcmFnRW5kKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuX29uTW92ZSgpO1xuICAgICAgICB0aGlzLm93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlEb3duKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGFkZEdlc3R1cmVMaXN0ZW5lcnMoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMub25HZXN0dXJlTW92ZSk7XG4gICAgICAgIHRoaXMub3duZXJEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25HZXN0dXJlRW5kKTtcbiAgICAgICAgdGhpcy5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uS2V5RG93bik7XG4gICAgICAgIHRoaXMuZ2VzdHVyaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy53YWl0aW5nTW92ZSA9IHRydWU7XG4gICAgfVxuICAgIG9uR2VzdHVyZVN0YXJ0KGV2ZW50KSB7XG4gICAgICAgIGlmICghRHJhZ01hbmFnZXIuaXNEcmFnZ2luZygpKSB7XG4gICAgICAgICAgICAvLyBzYW1lIHBvaW50ZXIgZXZlbnQgc2hvdWxkbid0IHRyaWdnZXIgMiBkcmFnIHN0YXJ0XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHsgb25HZXN0dXJlU3RhcnRUIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICB0aGlzLmJhc2VYID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgdGhpcy5iYXNlWSA9IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVk7XG4gICAgICAgIHRoaXMuYmFzZVgyID0gZXZlbnQudG91Y2hlc1sxXS5wYWdlWDtcbiAgICAgICAgdGhpcy5iYXNlWTIgPSBldmVudC50b3VjaGVzWzFdLnBhZ2VZO1xuICAgICAgICBsZXQgYmFzZUVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgbGV0IHJlY3QgPSBiYXNlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdGhpcy5zY2FsZVggPSBiYXNlRWxlbWVudC5vZmZzZXRXaWR0aCAvIE1hdGgucm91bmQocmVjdC53aWR0aCk7XG4gICAgICAgIHRoaXMuc2NhbGVZID0gYmFzZUVsZW1lbnQub2Zmc2V0SGVpZ2h0IC8gTWF0aC5yb3VuZChyZWN0LmhlaWdodCk7XG4gICAgICAgIHRoaXMuYmFzZURpcyA9IE1hdGguc3FydChNYXRoLnBvdyh0aGlzLmJhc2VYIC0gdGhpcy5iYXNlWDIsIDIpICsgTWF0aC5wb3codGhpcy5iYXNlWSAtIHRoaXMuYmFzZVkyLCAyKSk7XG4gICAgICAgIHRoaXMuYmFzZUFuZyA9IE1hdGguYXRhbjIodGhpcy5iYXNlWTIgLSB0aGlzLmJhc2VZLCB0aGlzLmJhc2VYMiAtIHRoaXMuYmFzZVgpO1xuICAgICAgICBsZXQgc3RhdGUgPSBuZXcgR2VzdHVyZVN0YXRlKGV2ZW50LCB0aGlzLCB0cnVlKTtcbiAgICAgICAgaWYgKG9uR2VzdHVyZVN0YXJ0VChzdGF0ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkR2VzdHVyZUxpc3RlbmVycyhldmVudCk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhbmNlbCgpIHtcbiAgICAgICAgaWYgKHRoaXMubGlzdGVuaW5nKSB7XG4gICAgICAgICAgICB0aGlzLm9uRHJhZ0VuZCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdlc3R1cmluZykge1xuICAgICAgICAgICAgdGhpcy5vbkdlc3R1cmVFbmQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGlmICh0aGlzLmdlc3R1cmluZykge1xuICAgICAgICAgICAgdGhpcy5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMub25HZXN0dXJlTW92ZSk7XG4gICAgICAgICAgICB0aGlzLm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLm9uR2VzdHVyZUVuZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5saXN0ZW5pbmcpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRyYWdUeXBlID09PSAndG91Y2gnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMub25Ub3VjaE1vdmUpO1xuICAgICAgICAgICAgICAgIHRoaXMub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25EcmFnRW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcbiAgICAgICAgICAgICAgICB0aGlzLm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25EcmFnRW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25LZXlEb3duKTtcbiAgICAgICAgdGhpcy5saXN0ZW5pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5nZXN0dXJpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgY2xlYW51cERyYWcoc3RhdGUpIHtcbiAgICAgICAgdGhpcy5kcmFnVHlwZSA9IG51bGw7XG4gICAgICAgIHRoaXMud2FpdGluZ01vdmUgPSBmYWxzZTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgX2EgPSB0aGlzLnByb3BzLCB7IGdldFJlZiwgY2hpbGRyZW4sIGNsYXNzTmFtZSwgZGlyZWN0RHJhZ1QsIG9uRHJhZ1N0YXJ0VCwgb25EcmFnTW92ZVQsIG9uRHJhZ0VuZFQsIG9uRHJhZ092ZXJULCBvbkRyYWdMZWF2ZVQsIG9uRHJvcFQsIG9uR2VzdHVyZVN0YXJ0VCwgb25HZXN0dXJlTW92ZVQsIG9uR2VzdHVyZUVuZFQsIHVzZVJpZ2h0QnV0dG9uRHJhZ1QgfSA9IF9hLCBvdGhlcnMgPSBfX3Jlc3QoX2EsIFtcImdldFJlZlwiLCBcImNoaWxkcmVuXCIsIFwiY2xhc3NOYW1lXCIsIFwiZGlyZWN0RHJhZ1RcIiwgXCJvbkRyYWdTdGFydFRcIiwgXCJvbkRyYWdNb3ZlVFwiLCBcIm9uRHJhZ0VuZFRcIiwgXCJvbkRyYWdPdmVyVFwiLCBcIm9uRHJhZ0xlYXZlVFwiLCBcIm9uRHJvcFRcIiwgXCJvbkdlc3R1cmVTdGFydFRcIiwgXCJvbkdlc3R1cmVNb3ZlVFwiLCBcIm9uR2VzdHVyZUVuZFRcIiwgXCJ1c2VSaWdodEJ1dHRvbkRyYWdUXCJdKTtcbiAgICAgICAgbGV0IG9uVG91Y2hEb3duID0gdGhpcy5vblBvaW50ZXJEb3duO1xuICAgICAgICBsZXQgb25Nb3VzZURvd24gPSB0aGlzLm9uUG9pbnRlckRvd247XG4gICAgICAgIGlmICghb25EcmFnU3RhcnRUKSB7XG4gICAgICAgICAgICBvbk1vdXNlRG93biA9IG51bGw7XG4gICAgICAgICAgICBpZiAoIW9uR2VzdHVyZVN0YXJ0VCkge1xuICAgICAgICAgICAgICAgIG9uVG91Y2hEb3duID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob25EcmFnU3RhcnRUIHx8IG9uR2VzdHVyZVN0YXJ0VCkge1xuICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA9IGAke2NsYXNzTmFtZX0gZHJhZy1pbml0aWF0b3JgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gJ2RyYWctaW5pdGlhdG9yJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7IHJlZjogdGhpcy5fZ2V0UmVmLCBjbGFzc05hbWU6IGNsYXNzTmFtZSB9LCBvdGhlcnMsIHsgb25Nb3VzZURvd246IG9uTW91c2VEb3duLCBvblRvdWNoU3RhcnQ6IG9uVG91Y2hEb3duIH0pLCBjaGlsZHJlbikpO1xuICAgIH1cbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG4gICAgICAgIGxldCB7IG9uRHJhZ092ZXJULCBvbkRyYWdFbmRULCBvbkRyYWdMZWF2ZVQgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnRcbiAgICAgICAgICAgICYmIChwcmV2UHJvcHMub25EcmFnT3ZlclQgIT09IG9uRHJhZ092ZXJUXG4gICAgICAgICAgICAgICAgfHwgcHJldlByb3BzLm9uRHJhZ0xlYXZlVCAhPT0gb25EcmFnTGVhdmVUXG4gICAgICAgICAgICAgICAgfHwgcHJldlByb3BzLm9uRHJhZ0VuZFQgIT09IG9uRHJhZ0VuZFQpKSB7XG4gICAgICAgICAgICBpZiAob25EcmFnT3ZlclQpIHtcbiAgICAgICAgICAgICAgICBEcmFnTWFuYWdlci5hZGRIYW5kbGVycyh0aGlzLmVsZW1lbnQsIHRoaXMucHJvcHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgRHJhZ01hbmFnZXIucmVtb3ZlSGFuZGxlcnModGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgbGV0IHsgb25EcmFnT3ZlclQgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQgJiYgb25EcmFnT3ZlclQpIHtcbiAgICAgICAgICAgIERyYWdNYW5hZ2VyLnJlbW92ZUhhbmRsZXJzKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYW5jZWwoKTtcbiAgICB9XG59XG4iLCJ2YXIgX19yZXN0ID0gKHRoaXMgJiYgdGhpcy5fX3Jlc3QpIHx8IGZ1bmN0aW9uIChzLCBlKSB7XG4gICAgdmFyIHQgPSB7fTtcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcbiAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XG4gICAgICAgIH1cbiAgICByZXR1cm4gdDtcbn07XG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBEcmFnRHJvcERpdiB9IGZyb20gXCIuL2RyYWdkcm9wL0RyYWdEcm9wRGl2XCI7XG5pbXBvcnQgeyBEb2NrQ29udGV4dFR5cGUgfSBmcm9tIFwiLi9Eb2NrRGF0YVwiO1xuLyoqXG4gKiBAcmV0dXJuIHJldHVybnMgdHJ1ZSBpZiBuYXZpZ2F0aW9uIGlzIGhhbmRsZWQgaW4gbG9jYWwgdGFiIG1vdmUsIG90aGVyd2lzZSByZXR1cm5zIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGNoZWNrTG9jYWxUYWJNb3ZlKGtleSwgdGFiYmFyKSB7XG4gICAgaWYgKGtleSA9PT0gJ0Fycm93TGVmdCcgfHwga2V5ID09PSAnQXJyb3dSaWdodCcpIHtcbiAgICAgICAgbGV0IHRhYnMgPSBBcnJheS5mcm9tKHRhYmJhci5xdWVyeVNlbGVjdG9yQWxsKCcuZG9jay10YWItYnRuJykpO1xuICAgICAgICBsZXQgYWN0aXZlVGFiID0gdGFiYmFyLnF1ZXJ5U2VsZWN0b3IoJy5kb2NrLXRhYi1hY3RpdmU+LmRvY2stdGFiLWJ0bicpO1xuICAgICAgICBsZXQgaSA9IHRhYnMuaW5kZXhPZihhY3RpdmVUYWIpO1xuICAgICAgICBpZiAoaSA+PSAwKSB7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnQXJyb3dMZWZ0Jykge1xuICAgICAgICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0YWJzW2kgLSAxXS5jbGljaygpO1xuICAgICAgICAgICAgICAgICAgICB0YWJzW2kgLSAxXS5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA8IHRhYnMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0YWJzW2kgKyAxXS5jbGljaygpO1xuICAgICAgICAgICAgICAgICAgICB0YWJzW2kgKyAxXS5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIERvY2tUYWJCYXIocHJvcHMpIHtcbiAgICBjb25zdCB7IG9uRHJhZ1N0YXJ0LCBvbkRyYWdNb3ZlLCBvbkRyYWdFbmQsIFRhYk5hdkxpc3QsIGlzTWF4aW1pemVkIH0gPSBwcm9wcywgcmVzdFByb3BzID0gX19yZXN0KHByb3BzLCBbXCJvbkRyYWdTdGFydFwiLCBcIm9uRHJhZ01vdmVcIiwgXCJvbkRyYWdFbmRcIiwgXCJUYWJOYXZMaXN0XCIsIFwiaXNNYXhpbWl6ZWRcIl0pO1xuICAgIGNvbnN0IGxheW91dCA9IFJlYWN0LnVzZUNvbnRleHQoRG9ja0NvbnRleHRUeXBlKTtcbiAgICBjb25zdCByZWYgPSBSZWFjdC51c2VSZWYoKTtcbiAgICBjb25zdCBnZXRSZWYgPSAoZGl2KSA9PiB7XG4gICAgICAgIHJlZi5jdXJyZW50ID0gZGl2O1xuICAgIH07XG4gICAgY29uc3Qgb25LZXlEb3duID0gKGUpID0+IHtcbiAgICAgICAgaWYgKGUua2V5LnN0YXJ0c1dpdGgoJ0Fycm93JykpIHtcbiAgICAgICAgICAgIGlmICghY2hlY2tMb2NhbFRhYk1vdmUoZS5rZXksIHJlZi5jdXJyZW50KSAmJiAhaXNNYXhpbWl6ZWQpIHtcbiAgICAgICAgICAgICAgICBsYXlvdXQubmF2aWdhdGVUb1BhbmVsKHJlZi5jdXJyZW50LCBlLmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJhZ0Ryb3BEaXYsIHsgb25EcmFnU3RhcnRUOiBvbkRyYWdTdGFydCwgb25EcmFnTW92ZVQ6IG9uRHJhZ01vdmUsIG9uRHJhZ0VuZFQ6IG9uRHJhZ0VuZCwgcm9sZTogXCJ0YWJsaXN0XCIsIGNsYXNzTmFtZTogXCJkb2NrLWJhclwiLCBvbktleURvd246IG9uS2V5RG93biwgZ2V0UmVmOiBnZXRSZWYsIHRhYkluZGV4OiAtMSB9LFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRhYk5hdkxpc3QsIE9iamVjdC5hc3NpZ24oe30sIHJlc3RQcm9wcykpKSk7XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgeyBEb2NrQ29udGV4dFR5cGUgfSBmcm9tIFwiLi9Eb2NrRGF0YVwiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRG9ja1RhYlBhbmUgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5nZXRSZWYgPSAocikgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVmID0gcjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdXBkYXRlQ2FjaGUoKSB7XG4gICAgICAgIGNvbnN0IHsgY2FjaGVkLCBjaGlsZHJlbiwgY2FjaGVJZCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgaWYgKHRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICBpZiAoIWNhY2hlZCB8fCBjYWNoZUlkICE9PSB0aGlzLl9jYWNoZS5pZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5yZW1vdmVUYWJDYWNoZSh0aGlzLl9jYWNoZS5pZCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjYWNoZWQgJiYgdGhpcy5fcmVmKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZSA9IHRoaXMuY29udGV4dC5nZXRUYWJDYWNoZShjYWNoZUlkLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuX3JlZi5hcHBlbmRDaGlsZCh0aGlzLl9jYWNoZS5kaXYpO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnVwZGF0ZVRhYkNhY2hlKHRoaXMuX2NhY2hlLmlkLCBjaGlsZHJlbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IGNhY2hlSWQsIGNhY2hlZCwgcHJlZml4Q2xzLCBmb3JjZVJlbmRlciwgY2xhc3NOYW1lLCBzdHlsZSwgaWQsIGFjdGl2ZSwgYW5pbWF0ZWQsIGRlc3Ryb3lJbmFjdGl2ZVRhYlBhbmUsIHRhYktleSwgY2hpbGRyZW4sIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgICAgICB0aGlzLnZpc2l0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlc3Ryb3lJbmFjdGl2ZVRhYlBhbmUpIHtcbiAgICAgICAgICAgIHRoaXMudmlzaXRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1lcmdlZFN0eWxlID0ge307XG4gICAgICAgIGlmICghYWN0aXZlKSB7XG4gICAgICAgICAgICBpZiAoYW5pbWF0ZWQpIHtcbiAgICAgICAgICAgICAgICBtZXJnZWRTdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICAgICAgbWVyZ2VkU3R5bGUuaGVpZ2h0ID0gMDtcbiAgICAgICAgICAgICAgICBtZXJnZWRTdHlsZS5vdmVyZmxvd1kgPSAnaGlkZGVuJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lcmdlZFN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gd2hlbiBjYWNoZWQgPT0gdW5kZWZpbmVkLCBpdCB3aWxsIHN0aWxsIGNhY2hlIHRoZSBjaGlsZHJlbiBpbnNpZGUgdGFicyBjb21wb25lbnQsIGJ1dCBub3QgYWNyb3NzIHdob2xlIGRvY2sgbGF5b3V0XG4gICAgICAgIC8vIHdoZW4gY2FjaGVkID09IGZhbHNlLCBjaGlsZHJlbiBhcmUgZGVzdHJveWVkIHdoZW4gbm90IGFjdGl2ZVxuICAgICAgICBjb25zdCBpc1JlbmRlciA9IGNhY2hlZCA9PT0gZmFsc2UgPyBhY3RpdmUgOiB0aGlzLnZpc2l0ZWQ7XG4gICAgICAgIGxldCByZW5kZXJDaGlsZHJlbiA9IG51bGw7XG4gICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgIHJlbmRlckNoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1JlbmRlciB8fCBmb3JjZVJlbmRlcikge1xuICAgICAgICAgICAgcmVuZGVyQ2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZ2V0UmVmID0gY2FjaGVkID8gdGhpcy5nZXRSZWYgOiBudWxsO1xuICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyByZWY6IGdldFJlZiwgaWQ6IGNhY2hlSWQsIHJvbGU6IFwidGFicGFuZWxcIiwgXCJhcmlhLWxhYmVsbGVkYnlcIjogaWQgJiYgYCR7aWR9LXRhYi0ke3RhYktleX1gLCBcImFyaWEtaGlkZGVuXCI6ICFhY3RpdmUsIHN0eWxlOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG1lcmdlZFN0eWxlKSwgc3R5bGUpLCBjbGFzc05hbWU6IGNsYXNzTmFtZXMoYCR7cHJlZml4Q2xzfS10YWJwYW5lYCwgYWN0aXZlICYmIGAke3ByZWZpeENsc30tdGFicGFuZS1hY3RpdmVgLCBjbGFzc05hbWUpIH0sIChhY3RpdmUgfHwgdGhpcy52aXNpdGVkIHx8IGZvcmNlUmVuZGVyKSAmJiByZW5kZXJDaGlsZHJlbikpO1xuICAgIH1cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVDYWNoZSgpO1xuICAgIH1cbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUsIHNuYXBzaG90KSB7XG4gICAgICAgIHRoaXMudXBkYXRlQ2FjaGUoKTtcbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnJlbW92ZVRhYkNhY2hlKHRoaXMuX2NhY2hlLmlkLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbkRvY2tUYWJQYW5lLmNvbnRleHRUeXBlID0gRG9ja0NvbnRleHRUeXBlO1xuIiwiaW1wb3J0IHsgbWF4aW1lUGxhY2VIb2xkZXJJZCwgcGxhY2VIb2xkZXJTdHlsZSB9IGZyb20gXCIuL0RvY2tEYXRhXCI7XG5sZXQgX3dhdGNoT2JqZWN0Q2hhbmdlID0gbmV3IFdlYWtNYXAoKTtcbmV4cG9ydCBmdW5jdGlvbiBnZXRVcGRhdGVkT2JqZWN0KG9iaikge1xuICAgIGxldCByZXN1bHQgPSBfd2F0Y2hPYmplY3RDaGFuZ2UuZ2V0KG9iaik7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgICByZXR1cm4gZ2V0VXBkYXRlZE9iamVjdChyZXN1bHQpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuZnVuY3Rpb24gY2xlYXJPYmplY3RDYWNoZSgpIHtcbiAgICBfd2F0Y2hPYmplY3RDaGFuZ2UgPSBuZXcgV2Vha01hcCgpO1xufVxuZnVuY3Rpb24gY2xvbmUodmFsdWUsIGV4dHJhKSB7XG4gICAgbGV0IG5ld1ZhbHVlID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB2YWx1ZSksIGV4dHJhKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShuZXdWYWx1ZS50YWJzKSkge1xuICAgICAgICBuZXdWYWx1ZS50YWJzID0gbmV3VmFsdWUudGFicy5jb25jYXQoKTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmV3VmFsdWUuY2hpbGRyZW4pKSB7XG4gICAgICAgIG5ld1ZhbHVlLmNoaWxkcmVuID0gbmV3VmFsdWUuY2hpbGRyZW4uY29uY2F0KCk7XG4gICAgfVxuICAgIF93YXRjaE9iamVjdENoYW5nZS5zZXQodmFsdWUsIG5ld1ZhbHVlKTtcbiAgICByZXR1cm4gbmV3VmFsdWU7XG59XG5mdW5jdGlvbiBtYXhGbGV4KGN1cnJlbnRGbGV4LCBuZXdGbGV4KSB7XG4gICAgaWYgKGN1cnJlbnRGbGV4ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG5ld0ZsZXg7XG4gICAgfVxuICAgIHJldHVybiBNYXRoLm1heChjdXJyZW50RmxleCwgbmV3RmxleCk7XG59XG5mdW5jdGlvbiBtZXJnZUZsZXgoY3VycmVudEZsZXgsIG5ld0ZsZXgpIHtcbiAgICBpZiAoY3VycmVudEZsZXggPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbmV3RmxleDtcbiAgICB9XG4gICAgaWYgKGN1cnJlbnRGbGV4ID09PSBuZXdGbGV4KSB7XG4gICAgICAgIHJldHVybiBuZXdGbGV4O1xuICAgIH1cbiAgICBpZiAoY3VycmVudEZsZXggPj0gMSkge1xuICAgICAgICBpZiAobmV3RmxleCA8PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWF0aC5taW4oY3VycmVudEZsZXgsIG5ld0ZsZXgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKG5ld0ZsZXggPj0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KGN1cnJlbnRGbGV4LCBuZXdGbGV4KTtcbiAgICB9XG59XG5sZXQgX2lkQ291bnQgPSAwO1xuZXhwb3J0IGZ1bmN0aW9uIG5leHRJZCgpIHtcbiAgICArK19pZENvdW50O1xuICAgIHJldHVybiBgKyR7X2lkQ291bnR9YDtcbn1cbmxldCBfekNvdW50ID0gMDtcbmV4cG9ydCBmdW5jdGlvbiBuZXh0WkluZGV4KGN1cnJlbnQpIHtcbiAgICBpZiAoY3VycmVudCA9PT0gX3pDb3VudCkge1xuICAgICAgICAvLyBhbHJlYWR5IHRoZSB0b3BcbiAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgfVxuICAgIHJldHVybiArK196Q291bnQ7XG59XG5mdW5jdGlvbiBmaW5kSW5QYW5lbChwYW5lbCwgaWQsIGZpbHRlcikge1xuICAgIGlmIChwYW5lbC5pZCA9PT0gaWQgJiYgKGZpbHRlciAmIEZpbHRlci5QYW5lbCkpIHtcbiAgICAgICAgcmV0dXJuIHBhbmVsO1xuICAgIH1cbiAgICBpZiAoZmlsdGVyICYgRmlsdGVyLlRhYikge1xuICAgICAgICBmb3IgKGxldCB0YWIgb2YgcGFuZWwudGFicykge1xuICAgICAgICAgICAgaWYgKHRhYi5pZCA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gZmluZEluQm94KGJveCwgaWQsIGZpbHRlcikge1xuICAgIGxldCByZXN1bHQ7XG4gICAgaWYgKChmaWx0ZXIgfCBGaWx0ZXIuQm94KSAmJiBib3guaWQgPT09IGlkKSB7XG4gICAgICAgIHJldHVybiBib3g7XG4gICAgfVxuICAgIGZvciAobGV0IGNoaWxkIG9mIGJveC5jaGlsZHJlbikge1xuICAgICAgICBpZiAoJ2NoaWxkcmVuJyBpbiBjaGlsZCkge1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9IGZpbmRJbkJveChjaGlsZCwgaWQsIGZpbHRlcikpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgndGFicycgaW4gY2hpbGQpIHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPSBmaW5kSW5QYW5lbChjaGlsZCwgaWQsIGZpbHRlcikpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IHZhciBGaWx0ZXI7XG4oZnVuY3Rpb24gKEZpbHRlcikge1xuICAgIEZpbHRlcltGaWx0ZXJbXCJUYWJcIl0gPSAxXSA9IFwiVGFiXCI7XG4gICAgRmlsdGVyW0ZpbHRlcltcIlBhbmVsXCJdID0gMl0gPSBcIlBhbmVsXCI7XG4gICAgRmlsdGVyW0ZpbHRlcltcIkJveFwiXSA9IDRdID0gXCJCb3hcIjtcbiAgICBGaWx0ZXJbRmlsdGVyW1wiRG9ja2VkXCJdID0gOF0gPSBcIkRvY2tlZFwiO1xuICAgIEZpbHRlcltGaWx0ZXJbXCJGbG9hdGVkXCJdID0gMTZdID0gXCJGbG9hdGVkXCI7XG4gICAgRmlsdGVyW0ZpbHRlcltcIldpbmRvd2VkXCJdID0gMzJdID0gXCJXaW5kb3dlZFwiO1xuICAgIEZpbHRlcltGaWx0ZXJbXCJNYXhcIl0gPSA2NF0gPSBcIk1heFwiO1xuICAgIEZpbHRlcltGaWx0ZXJbXCJFdmVyeVdoZXJlXCJdID0gMTIwXSA9IFwiRXZlcnlXaGVyZVwiO1xuICAgIEZpbHRlcltGaWx0ZXJbXCJBbnlUYWJcIl0gPSAxMjFdID0gXCJBbnlUYWJcIjtcbiAgICBGaWx0ZXJbRmlsdGVyW1wiQW55UGFuZWxcIl0gPSAxMjJdID0gXCJBbnlQYW5lbFwiO1xuICAgIEZpbHRlcltGaWx0ZXJbXCJBbnlUYWJQYW5lbFwiXSA9IDEyM10gPSBcIkFueVRhYlBhbmVsXCI7XG4gICAgRmlsdGVyW0ZpbHRlcltcIkFsbFwiXSA9IDEyN10gPSBcIkFsbFwiO1xufSkoRmlsdGVyIHx8IChGaWx0ZXIgPSB7fSkpO1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmQobGF5b3V0LCBpZCwgZmlsdGVyID0gRmlsdGVyLkFueVRhYlBhbmVsKSB7XG4gICAgbGV0IHJlc3VsdDtcbiAgICBpZiAoZmlsdGVyICYgRmlsdGVyLkRvY2tlZCkge1xuICAgICAgICByZXN1bHQgPSBmaW5kSW5Cb3gobGF5b3V0LmRvY2tib3gsIGlkLCBmaWx0ZXIpO1xuICAgIH1cbiAgICBpZiAocmVzdWx0KVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIGlmIChmaWx0ZXIgJiBGaWx0ZXIuRmxvYXRlZCkge1xuICAgICAgICByZXN1bHQgPSBmaW5kSW5Cb3gobGF5b3V0LmZsb2F0Ym94LCBpZCwgZmlsdGVyKTtcbiAgICB9XG4gICAgaWYgKHJlc3VsdClcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICBpZiAoZmlsdGVyICYgRmlsdGVyLldpbmRvd2VkKSB7XG4gICAgICAgIHJlc3VsdCA9IGZpbmRJbkJveChsYXlvdXQud2luZG93Ym94LCBpZCwgZmlsdGVyKTtcbiAgICB9XG4gICAgaWYgKHJlc3VsdClcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICBpZiAoZmlsdGVyICYgRmlsdGVyLk1heCkge1xuICAgICAgICByZXN1bHQgPSBmaW5kSW5Cb3gobGF5b3V0Lm1heGJveCwgaWQsIGZpbHRlcik7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkTmV4dFRvVGFiKGxheW91dCwgc291cmNlLCB0YXJnZXQsIGRpcmVjdGlvbikge1xuICAgIGxldCBwb3MgPSB0YXJnZXQucGFyZW50LnRhYnMuaW5kZXhPZih0YXJnZXQpO1xuICAgIGlmIChwb3MgPj0gMCkge1xuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnYWZ0ZXItdGFiJykge1xuICAgICAgICAgICAgKytwb3M7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFkZFRhYlRvUGFuZWwobGF5b3V0LCBzb3VyY2UsIHRhcmdldC5wYXJlbnQsIHBvcyk7XG4gICAgfVxuICAgIHJldHVybiBsYXlvdXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkVGFiVG9QYW5lbChsYXlvdXQsIHNvdXJjZSwgcGFuZWwsIGlkeCA9IC0xKSB7XG4gICAgaWYgKGlkeCA9PT0gLTEpIHtcbiAgICAgICAgaWR4ID0gcGFuZWwudGFicy5sZW5ndGg7XG4gICAgfVxuICAgIGxldCB0YWJzO1xuICAgIGxldCBhY3RpdmVJZDtcbiAgICBpZiAoJ3RhYnMnIGluIHNvdXJjZSkge1xuICAgICAgICAvLyBzb3VyY2UgaXMgUGFuZWxEYXRhXG4gICAgICAgIHRhYnMgPSBzb3VyY2UudGFicztcbiAgICAgICAgYWN0aXZlSWQgPSBzb3VyY2UuYWN0aXZlSWQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBzb3VyY2UgaXMgVGFiRGF0YVxuICAgICAgICB0YWJzID0gW3NvdXJjZV07XG4gICAgfVxuICAgIGlmICh0YWJzLmxlbmd0aCkge1xuICAgICAgICBsZXQgbmV3UGFuZWwgPSBjbG9uZShwYW5lbCk7XG4gICAgICAgIG5ld1BhbmVsLnRhYnMuc3BsaWNlKGlkeCwgMCwgLi4udGFicyk7XG4gICAgICAgIG5ld1BhbmVsLmFjdGl2ZUlkID0gdGFic1t0YWJzLmxlbmd0aCAtIDFdLmlkO1xuICAgICAgICBmb3IgKGxldCB0YWIgb2YgdGFicykge1xuICAgICAgICAgICAgdGFiLnBhcmVudCA9IG5ld1BhbmVsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhY3RpdmVJZCkge1xuICAgICAgICAgICAgbmV3UGFuZWwuYWN0aXZlSWQgPSBhY3RpdmVJZDtcbiAgICAgICAgfVxuICAgICAgICBsYXlvdXQgPSByZXBsYWNlUGFuZWwobGF5b3V0LCBwYW5lbCwgbmV3UGFuZWwpO1xuICAgIH1cbiAgICByZXR1cm4gbGF5b3V0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlclRvUGFuZWwoc291cmNlKSB7XG4gICAgaWYgKCd0YWJzJyBpbiBzb3VyY2UpIHtcbiAgICAgICAgLy8gc291cmNlIGlzIGFscmVhZHkgUGFuZWxEYXRhXG4gICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgbmV3UGFuZWwgPSB7IHRhYnM6IFtzb3VyY2VdLCBncm91cDogc291cmNlLmdyb3VwLCBhY3RpdmVJZDogc291cmNlLmlkIH07XG4gICAgICAgIHNvdXJjZS5wYXJlbnQgPSBuZXdQYW5lbDtcbiAgICAgICAgcmV0dXJuIG5ld1BhbmVsO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBkb2NrUGFuZWxUb1BhbmVsKGxheW91dCwgbmV3UGFuZWwsIHBhbmVsLCBkaXJlY3Rpb24pIHtcbiAgICBsZXQgYm94ID0gcGFuZWwucGFyZW50O1xuICAgIGxldCBkb2NrTW9kZSA9IChkaXJlY3Rpb24gPT09ICdsZWZ0JyB8fCBkaXJlY3Rpb24gPT09ICdyaWdodCcpID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJztcbiAgICBsZXQgYWZ0ZXJQYW5lbCA9IChkaXJlY3Rpb24gPT09ICdib3R0b20nIHx8IGRpcmVjdGlvbiA9PT0gJ3JpZ2h0Jyk7XG4gICAgbGV0IHBvcyA9IGJveC5jaGlsZHJlbi5pbmRleE9mKHBhbmVsKTtcbiAgICBpZiAocG9zID49IDApIHtcbiAgICAgICAgbGV0IG5ld0JveCA9IGNsb25lKGJveCk7XG4gICAgICAgIGlmIChkb2NrTW9kZSA9PT0gYm94Lm1vZGUpIHtcbiAgICAgICAgICAgIGlmIChhZnRlclBhbmVsKSB7XG4gICAgICAgICAgICAgICAgKytwb3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYW5lbC5zaXplICo9IDAuNTtcbiAgICAgICAgICAgIG5ld1BhbmVsLnNpemUgPSBwYW5lbC5zaXplO1xuICAgICAgICAgICAgbmV3Qm94LmNoaWxkcmVuLnNwbGljZShwb3MsIDAsIG5ld1BhbmVsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBuZXdDaGlsZEJveCA9IHsgbW9kZTogZG9ja01vZGUsIGNoaWxkcmVuOiBbXSB9O1xuICAgICAgICAgICAgbmV3Q2hpbGRCb3guc2l6ZSA9IHBhbmVsLnNpemU7XG4gICAgICAgICAgICBpZiAoYWZ0ZXJQYW5lbCkge1xuICAgICAgICAgICAgICAgIG5ld0NoaWxkQm94LmNoaWxkcmVuID0gW3BhbmVsLCBuZXdQYW5lbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdDaGlsZEJveC5jaGlsZHJlbiA9IFtuZXdQYW5lbCwgcGFuZWxdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFuZWwucGFyZW50ID0gbmV3Q2hpbGRCb3g7XG4gICAgICAgICAgICBwYW5lbC5zaXplID0gMjAwO1xuICAgICAgICAgICAgbmV3UGFuZWwucGFyZW50ID0gbmV3Q2hpbGRCb3g7XG4gICAgICAgICAgICBuZXdQYW5lbC5zaXplID0gMjAwO1xuICAgICAgICAgICAgbmV3Qm94LmNoaWxkcmVuW3Bvc10gPSBuZXdDaGlsZEJveDtcbiAgICAgICAgICAgIG5ld0NoaWxkQm94LnBhcmVudCA9IG5ld0JveDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVwbGFjZUJveChsYXlvdXQsIGJveCwgbmV3Qm94KTtcbiAgICB9XG4gICAgcmV0dXJuIGxheW91dDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkb2NrUGFuZWxUb0JveChsYXlvdXQsIG5ld1BhbmVsLCBib3gsIGRpcmVjdGlvbikge1xuICAgIGxldCBwYXJlbnRCb3ggPSBib3gucGFyZW50O1xuICAgIGxldCBkb2NrTW9kZSA9IChkaXJlY3Rpb24gPT09ICdsZWZ0JyB8fCBkaXJlY3Rpb24gPT09ICdyaWdodCcpID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJztcbiAgICBsZXQgYWZ0ZXJQYW5lbCA9IChkaXJlY3Rpb24gPT09ICdib3R0b20nIHx8IGRpcmVjdGlvbiA9PT0gJ3JpZ2h0Jyk7XG4gICAgaWYgKHBhcmVudEJveCkge1xuICAgICAgICBsZXQgcG9zID0gcGFyZW50Qm94LmNoaWxkcmVuLmluZGV4T2YoYm94KTtcbiAgICAgICAgaWYgKHBvcyA+PSAwKSB7XG4gICAgICAgICAgICBsZXQgbmV3UGFyZW50Qm94ID0gY2xvbmUocGFyZW50Qm94KTtcbiAgICAgICAgICAgIGlmIChkb2NrTW9kZSA9PT0gcGFyZW50Qm94Lm1vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoYWZ0ZXJQYW5lbCkge1xuICAgICAgICAgICAgICAgICAgICArK3BvcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3UGFuZWwuc2l6ZSA9IGJveC5zaXplICogMC4zO1xuICAgICAgICAgICAgICAgIGJveC5zaXplICo9IDAuNztcbiAgICAgICAgICAgICAgICBuZXdQYXJlbnRCb3guY2hpbGRyZW4uc3BsaWNlKHBvcywgMCwgbmV3UGFuZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IG5ld0NoaWxkQm94ID0geyBtb2RlOiBkb2NrTW9kZSwgY2hpbGRyZW46IFtdIH07XG4gICAgICAgICAgICAgICAgbmV3Q2hpbGRCb3guc2l6ZSA9IGJveC5zaXplO1xuICAgICAgICAgICAgICAgIGlmIChhZnRlclBhbmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0NoaWxkQm94LmNoaWxkcmVuID0gW2JveCwgbmV3UGFuZWxdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3Q2hpbGRCb3guY2hpbGRyZW4gPSBbbmV3UGFuZWwsIGJveF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJveC5wYXJlbnQgPSBuZXdDaGlsZEJveDtcbiAgICAgICAgICAgICAgICBib3guc2l6ZSA9IDI4MDtcbiAgICAgICAgICAgICAgICBuZXdQYW5lbC5wYXJlbnQgPSBuZXdDaGlsZEJveDtcbiAgICAgICAgICAgICAgICBuZXdQYW5lbC5zaXplID0gMTIwO1xuICAgICAgICAgICAgICAgIG5ld1BhcmVudEJveC5jaGlsZHJlbltwb3NdID0gbmV3Q2hpbGRCb3g7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVwbGFjZUJveChsYXlvdXQsIHBhcmVudEJveCwgbmV3UGFyZW50Qm94KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChib3ggPT09IGxheW91dC5kb2NrYm94KSB7XG4gICAgICAgIGxldCBuZXdCb3ggPSBjbG9uZShib3gpO1xuICAgICAgICBpZiAoZG9ja01vZGUgPT09IGJveC5tb2RlKSB7XG4gICAgICAgICAgICBsZXQgcG9zID0gMDtcbiAgICAgICAgICAgIGlmIChhZnRlclBhbmVsKSB7XG4gICAgICAgICAgICAgICAgcG9zID0gbmV3Qm94LmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld1BhbmVsLnNpemUgPSBib3guc2l6ZSAqIDAuMztcbiAgICAgICAgICAgIGJveC5zaXplICo9IDAuNztcbiAgICAgICAgICAgIG5ld0JveC5jaGlsZHJlbi5zcGxpY2UocG9zLCAwLCBuZXdQYW5lbCk7XG4gICAgICAgICAgICByZXR1cm4gcmVwbGFjZUJveChsYXlvdXQsIGJveCwgbmV3Qm94KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHJlcGxhY2Ugcm9vdCBkb2NrYm94XG4gICAgICAgICAgICBsZXQgbmV3RG9ja0JveCA9IHsgbW9kZTogZG9ja01vZGUsIGNoaWxkcmVuOiBbXSB9O1xuICAgICAgICAgICAgbmV3RG9ja0JveC5zaXplID0gYm94LnNpemU7XG4gICAgICAgICAgICBpZiAoYWZ0ZXJQYW5lbCkge1xuICAgICAgICAgICAgICAgIG5ld0RvY2tCb3guY2hpbGRyZW4gPSBbbmV3Qm94LCBuZXdQYW5lbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdEb2NrQm94LmNoaWxkcmVuID0gW25ld1BhbmVsLCBuZXdCb3hdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3Qm94LnNpemUgPSAyODA7XG4gICAgICAgICAgICBuZXdQYW5lbC5zaXplID0gMTIwO1xuICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2VCb3gobGF5b3V0LCBib3gsIG5ld0RvY2tCb3gpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGJveCA9PT0gbGF5b3V0Lm1heGJveCkge1xuICAgICAgICBsZXQgbmV3Qm94ID0gY2xvbmUoYm94KTtcbiAgICAgICAgbmV3Qm94LmNoaWxkcmVuLnB1c2gobmV3UGFuZWwpO1xuICAgICAgICByZXR1cm4gcmVwbGFjZUJveChsYXlvdXQsIGJveCwgbmV3Qm94KTtcbiAgICB9XG4gICAgcmV0dXJuIGxheW91dDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmbG9hdFBhbmVsKGxheW91dCwgbmV3UGFuZWwsIHJlY3QpIHtcbiAgICBsZXQgbmV3Qm94ID0gY2xvbmUobGF5b3V0LmZsb2F0Ym94KTtcbiAgICBpZiAocmVjdCkge1xuICAgICAgICBuZXdQYW5lbC54ID0gcmVjdC5sZWZ0O1xuICAgICAgICBuZXdQYW5lbC55ID0gcmVjdC50b3A7XG4gICAgICAgIG5ld1BhbmVsLncgPSByZWN0LndpZHRoO1xuICAgICAgICBuZXdQYW5lbC5oID0gcmVjdC5oZWlnaHQ7XG4gICAgfVxuICAgIG5ld0JveC5jaGlsZHJlbi5wdXNoKG5ld1BhbmVsKTtcbiAgICByZXR1cm4gcmVwbGFjZUJveChsYXlvdXQsIGxheW91dC5mbG9hdGJveCwgbmV3Qm94KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYW5lbFRvV2luZG93KGxheW91dCwgbmV3UGFuZWwpIHtcbiAgICBsZXQgbmV3Qm94ID0gY2xvbmUobGF5b3V0LndpbmRvd2JveCk7XG4gICAgbmV3Qm94LmNoaWxkcmVuLnB1c2gobmV3UGFuZWwpO1xuICAgIHJldHVybiByZXBsYWNlQm94KGxheW91dCwgbGF5b3V0LndpbmRvd2JveCwgbmV3Qm94KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVGcm9tTGF5b3V0KGxheW91dCwgc291cmNlKSB7XG4gICAgaWYgKHNvdXJjZSkge1xuICAgICAgICBsZXQgcGFuZWxEYXRhO1xuICAgICAgICBpZiAoJ3RhYnMnIGluIHNvdXJjZSkge1xuICAgICAgICAgICAgcGFuZWxEYXRhID0gc291cmNlO1xuICAgICAgICAgICAgbGF5b3V0ID0gcmVtb3ZlUGFuZWwobGF5b3V0LCBwYW5lbERhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGFuZWxEYXRhID0gc291cmNlLnBhcmVudDtcbiAgICAgICAgICAgIGxheW91dCA9IHJlbW92ZVRhYihsYXlvdXQsIHNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhbmVsRGF0YSAmJiBwYW5lbERhdGEucGFyZW50ICYmIHBhbmVsRGF0YS5wYXJlbnQubW9kZSA9PT0gJ21heGltaXplJykge1xuICAgICAgICAgICAgbGV0IG5ld1BhbmVsID0gbGF5b3V0Lm1heGJveC5jaGlsZHJlblswXTtcbiAgICAgICAgICAgIGlmICghbmV3UGFuZWwgfHwgKG5ld1BhbmVsLnRhYnMubGVuZ3RoID09PSAwICYmICFuZXdQYW5lbC5wYW5lbExvY2spKSB7XG4gICAgICAgICAgICAgICAgLy8gbWF4IHBhbmVsIGlzIGdvbmUsIHJlbW92ZSB0aGUgcGxhY2UgaG9sZGVyXG4gICAgICAgICAgICAgICAgbGV0IHBsYWNlSG9sZGVyID0gZmluZChsYXlvdXQsIG1heGltZVBsYWNlSG9sZGVySWQpO1xuICAgICAgICAgICAgICAgIGlmIChwbGFjZUhvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3ZlUGFuZWwobGF5b3V0LCBwbGFjZUhvbGRlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsYXlvdXQ7XG59XG5mdW5jdGlvbiByZW1vdmVQYW5lbChsYXlvdXQsIHBhbmVsKSB7XG4gICAgbGV0IGJveCA9IHBhbmVsLnBhcmVudDtcbiAgICBpZiAoYm94KSB7XG4gICAgICAgIGxldCBwb3MgPSBib3guY2hpbGRyZW4uaW5kZXhPZihwYW5lbCk7XG4gICAgICAgIGlmIChwb3MgPj0gMCkge1xuICAgICAgICAgICAgbGV0IG5ld0JveCA9IGNsb25lKGJveCk7XG4gICAgICAgICAgICBuZXdCb3guY2hpbGRyZW4uc3BsaWNlKHBvcywgMSk7XG4gICAgICAgICAgICByZXR1cm4gcmVwbGFjZUJveChsYXlvdXQsIGJveCwgbmV3Qm94KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGF5b3V0O1xufVxuZnVuY3Rpb24gcmVtb3ZlVGFiKGxheW91dCwgdGFiKSB7XG4gICAgbGV0IHBhbmVsID0gdGFiLnBhcmVudDtcbiAgICBpZiAocGFuZWwpIHtcbiAgICAgICAgbGV0IHBvcyA9IHBhbmVsLnRhYnMuaW5kZXhPZih0YWIpO1xuICAgICAgICBpZiAocG9zID49IDApIHtcbiAgICAgICAgICAgIGxldCBuZXdQYW5lbCA9IGNsb25lKHBhbmVsKTtcbiAgICAgICAgICAgIG5ld1BhbmVsLnRhYnMuc3BsaWNlKHBvcywgMSk7XG4gICAgICAgICAgICBpZiAobmV3UGFuZWwuYWN0aXZlSWQgPT09IHRhYi5pZCkge1xuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBzZWxlY3Rpb24gaWRcbiAgICAgICAgICAgICAgICBpZiAobmV3UGFuZWwudGFicy5sZW5ndGggPiBwb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3UGFuZWwuYWN0aXZlSWQgPSBuZXdQYW5lbC50YWJzW3Bvc10uaWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5ld1BhbmVsLnRhYnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1BhbmVsLmFjdGl2ZUlkID0gbmV3UGFuZWwudGFic1swXS5pZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVwbGFjZVBhbmVsKGxheW91dCwgcGFuZWwsIG5ld1BhbmVsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGF5b3V0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1vdmVUb0Zyb250KGxheW91dCwgc291cmNlKSB7XG4gICAgaWYgKHNvdXJjZSkge1xuICAgICAgICBsZXQgcGFuZWxEYXRhO1xuICAgICAgICBsZXQgbmVlZFVwZGF0ZSA9IGZhbHNlO1xuICAgICAgICBsZXQgY2hhbmdlcyA9IHt9O1xuICAgICAgICBpZiAoJ3RhYnMnIGluIHNvdXJjZSkge1xuICAgICAgICAgICAgcGFuZWxEYXRhID0gc291cmNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGFuZWxEYXRhID0gc291cmNlLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChwYW5lbERhdGEuYWN0aXZlSWQgIT09IHNvdXJjZS5pZCkge1xuICAgICAgICAgICAgICAgIC8vIG1vdmUgdGFiIHRvIGZyb250XG4gICAgICAgICAgICAgICAgY2hhbmdlcy5hY3RpdmVJZCA9IHNvdXJjZS5pZDtcbiAgICAgICAgICAgICAgICBuZWVkVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFuZWxEYXRhICYmIHBhbmVsRGF0YS5wYXJlbnQgJiYgcGFuZWxEYXRhLnBhcmVudC5tb2RlID09PSAnZmxvYXQnKSB7XG4gICAgICAgICAgICAvLyBtb3ZlIGZsb2F0IHBhbmVsIHRvIGZyb250XG4gICAgICAgICAgICBsZXQgbmV3WiA9IG5leHRaSW5kZXgocGFuZWxEYXRhLnopO1xuICAgICAgICAgICAgaWYgKG5ld1ogIT09IHBhbmVsRGF0YS56KSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlcy56ID0gbmV3WjtcbiAgICAgICAgICAgICAgICBuZWVkVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobmVlZFVwZGF0ZSkge1xuICAgICAgICAgICAgbGF5b3V0ID0gcmVwbGFjZVBhbmVsKGxheW91dCwgcGFuZWxEYXRhLCBjbG9uZShwYW5lbERhdGEsIGNoYW5nZXMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGF5b3V0O1xufVxuLy8gbWF4aW1pemUgb3IgcmVzdG9yZSB0aGUgcGFuZWxcbmV4cG9ydCBmdW5jdGlvbiBtYXhpbWl6ZShsYXlvdXQsIHNvdXJjZSkge1xuICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgaWYgKCd0YWJzJyBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChzb3VyY2UucGFyZW50Lm1vZGUgPT09ICdtYXhpbWl6ZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdG9yZVBhbmVsKGxheW91dCwgc291cmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXhpbWl6ZVBhbmVsKGxheW91dCwgc291cmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBtYXhpbWl6ZVRhYihsYXlvdXQsIHNvdXJjZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxheW91dDtcbn1cbmZ1bmN0aW9uIG1heGltaXplUGFuZWwobGF5b3V0LCBwYW5lbCkge1xuICAgIGxldCBtYXhib3ggPSBsYXlvdXQubWF4Ym94O1xuICAgIGlmIChtYXhib3guY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgIC8vIGludmFsaWQgbWF4aW1pemVcbiAgICAgICAgcmV0dXJuIGxheW91dDtcbiAgICB9XG4gICAgbGV0IHBsYWNlSG9kbGVyUGFuZWwgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHBhbmVsKSwgeyBpZDogbWF4aW1lUGxhY2VIb2xkZXJJZCwgdGFiczogW10sIHBhbmVsTG9jazoge30gfSk7XG4gICAgbGF5b3V0ID0gcmVwbGFjZVBhbmVsKGxheW91dCwgcGFuZWwsIHBsYWNlSG9kbGVyUGFuZWwpO1xuICAgIGxheW91dCA9IGRvY2tQYW5lbFRvQm94KGxheW91dCwgcGFuZWwsIGxheW91dC5tYXhib3gsICdtaWRkbGUnKTtcbiAgICByZXR1cm4gbGF5b3V0O1xufVxuZnVuY3Rpb24gcmVzdG9yZVBhbmVsKGxheW91dCwgcGFuZWwpIHtcbiAgICBsYXlvdXQgPSByZW1vdmVQYW5lbChsYXlvdXQsIHBhbmVsKTtcbiAgICBsZXQgcGxhY2VIb2xkZXIgPSBmaW5kKGxheW91dCwgbWF4aW1lUGxhY2VIb2xkZXJJZCk7XG4gICAgaWYgKHBsYWNlSG9sZGVyKSB7XG4gICAgICAgIGxldCB7IHgsIHksIHosIHcsIGggfSA9IHBsYWNlSG9sZGVyO1xuICAgICAgICBwYW5lbCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcGFuZWwpLCB7IHgsIHksIHosIHcsIGggfSk7XG4gICAgICAgIHJldHVybiByZXBsYWNlUGFuZWwobGF5b3V0LCBwbGFjZUhvbGRlciwgcGFuZWwpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRvY2tQYW5lbFRvQm94KGxheW91dCwgcGFuZWwsIGxheW91dC5kb2NrYm94LCAncmlnaHQnKTtcbiAgICB9XG59XG5mdW5jdGlvbiBtYXhpbWl6ZVRhYihsYXlvdXQsIHRhYikge1xuICAgIC8vIFRPRE8gdG8gYmUgaW1wbGVtZW50ZWRcbiAgICByZXR1cm4gbGF5b3V0O1xufVxuLy8gbW92ZSBmbG9hdCBwYW5lbCBpbnRvIHRoZSBzY3JlZW5cbmV4cG9ydCBmdW5jdGlvbiBmaXhGbG9hdFBhbmVsUG9zKGxheW91dCwgbGF5b3V0V2lkdGgsIGxheW91dEhlaWdodCkge1xuICAgIGxldCBsYXlvdXRDaGFuZ2VkID0gZmFsc2U7XG4gICAgaWYgKGxheW91dCAmJiBsYXlvdXQuZmxvYXRib3ggJiYgbGF5b3V0V2lkdGggPiAyMDAgJiYgbGF5b3V0SGVpZ2h0ID4gMjAwKSB7XG4gICAgICAgIGxldCBuZXdGbG9hdENoaWxkcmVuID0gbGF5b3V0LmZsb2F0Ym94LmNoaWxkcmVuLmNvbmNhdCgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld0Zsb2F0Q2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGxldCBwYW5lbCA9IG5ld0Zsb2F0Q2hpbGRyZW5baV07XG4gICAgICAgICAgICBsZXQgcGFuZWxDaGFuZ2UgPSB7fTtcbiAgICAgICAgICAgIGlmIChwYW5lbC53ID4gbGF5b3V0V2lkdGgpIHtcbiAgICAgICAgICAgICAgICBwYW5lbENoYW5nZS53ID0gbGF5b3V0V2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFuZWwuaCA+IGxheW91dEhlaWdodCkge1xuICAgICAgICAgICAgICAgIHBhbmVsQ2hhbmdlLmggPSBsYXlvdXRIZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFuZWwueSA+IGxheW91dEhlaWdodCAtIDE2KSB7XG4gICAgICAgICAgICAgICAgcGFuZWxDaGFuZ2UueSA9IE1hdGgubWF4KGxheW91dEhlaWdodCAtIDE2IC0gKHBhbmVsLmggPj4gMSksIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFuZWwueSA8IDApIHtcbiAgICAgICAgICAgICAgICBwYW5lbENoYW5nZS55ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYW5lbC54ICsgcGFuZWwudyA8IDE2KSB7XG4gICAgICAgICAgICAgICAgcGFuZWxDaGFuZ2UueCA9IDE2IC0gKHBhbmVsLncgPj4gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYW5lbC54ID4gbGF5b3V0V2lkdGggLSAxNikge1xuICAgICAgICAgICAgICAgIHBhbmVsQ2hhbmdlLnggPSBsYXlvdXRXaWR0aCAtIDE2IC0gKHBhbmVsLncgPj4gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMocGFuZWxDaGFuZ2UpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG5ld0Zsb2F0Q2hpbGRyZW5baV0gPSBjbG9uZShwYW5lbCwgcGFuZWxDaGFuZ2UpO1xuICAgICAgICAgICAgICAgIGxheW91dENoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChsYXlvdXRDaGFuZ2VkKSB7XG4gICAgICAgICAgICBsZXQgbmV3Qm94ID0gY2xvbmUobGF5b3V0LmZsb2F0Ym94KTtcbiAgICAgICAgICAgIG5ld0JveC5jaGlsZHJlbiA9IG5ld0Zsb2F0Q2hpbGRyZW47XG4gICAgICAgICAgICByZXR1cm4gcmVwbGFjZUJveChsYXlvdXQsIGxheW91dC5mbG9hdGJveCwgbmV3Qm94KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGF5b3V0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpeExheW91dERhdGEobGF5b3V0LCBncm91cHMsIGxvYWRUYWIpIHtcbiAgICBmdW5jdGlvbiBmaXhQYW5lbE9yQm94KGQpIHtcbiAgICAgICAgaWYgKGQuaWQgPT0gbnVsbCkge1xuICAgICAgICAgICAgZC5pZCA9IG5leHRJZCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGQuaWQuc3RhcnRzV2l0aCgnKycpKSB7XG4gICAgICAgICAgICBsZXQgaWRudW0gPSBOdW1iZXIoZC5pZCk7XG4gICAgICAgICAgICBpZiAoaWRudW0gPiBfaWRDb3VudCkge1xuICAgICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSBnZW5lcmF0ZWQgaWQgaXMgdW5pcXVlXG4gICAgICAgICAgICAgICAgX2lkQ291bnQgPSBpZG51bTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIShkLnNpemUgPj0gMCkpIHtcbiAgICAgICAgICAgIGQuc2l6ZSA9IDIwMDtcbiAgICAgICAgfVxuICAgICAgICBkLm1pbldpZHRoID0gMDtcbiAgICAgICAgZC5taW5IZWlnaHQgPSAwO1xuICAgICAgICBkLndpZHRoRmxleCA9IG51bGw7XG4gICAgICAgIGQuaGVpZ2h0RmxleCA9IG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZpeFBhbmVsRGF0YShwYW5lbCkge1xuICAgICAgICBmaXhQYW5lbE9yQm94KHBhbmVsKTtcbiAgICAgICAgbGV0IGZpbmRBY3RpdmVJZCA9IGZhbHNlO1xuICAgICAgICBpZiAobG9hZFRhYikge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYW5lbC50YWJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgcGFuZWwudGFic1tpXSA9IGxvYWRUYWIocGFuZWwudGFic1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhbmVsLmdyb3VwID09IG51bGwgJiYgcGFuZWwudGFicy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHBhbmVsLmdyb3VwID0gcGFuZWwudGFic1swXS5ncm91cDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdGFiR3JvdXAgPSBncm91cHMgPT09IG51bGwgfHwgZ3JvdXBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBncm91cHNbcGFuZWwuZ3JvdXBdO1xuICAgICAgICBpZiAodGFiR3JvdXApIHtcbiAgICAgICAgICAgIGlmICh0YWJHcm91cC53aWR0aEZsZXggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBhbmVsLndpZHRoRmxleCA9IHRhYkdyb3VwLndpZHRoRmxleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YWJHcm91cC5oZWlnaHRGbGV4ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBwYW5lbC5oZWlnaHRGbGV4ID0gdGFiR3JvdXAuaGVpZ2h0RmxleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBwYW5lbC50YWJzKSB7XG4gICAgICAgICAgICBjaGlsZC5wYXJlbnQgPSBwYW5lbDtcbiAgICAgICAgICAgIGlmIChjaGlsZC5pZCA9PT0gcGFuZWwuYWN0aXZlSWQpIHtcbiAgICAgICAgICAgICAgICBmaW5kQWN0aXZlSWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoaWxkLm1pbldpZHRoID4gcGFuZWwubWluV2lkdGgpXG4gICAgICAgICAgICAgICAgcGFuZWwubWluV2lkdGggPSBjaGlsZC5taW5XaWR0aDtcbiAgICAgICAgICAgIGlmIChjaGlsZC5taW5IZWlnaHQgPiBwYW5lbC5taW5IZWlnaHQpXG4gICAgICAgICAgICAgICAgcGFuZWwubWluSGVpZ2h0ID0gY2hpbGQubWluSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGlmICghZmluZEFjdGl2ZUlkICYmIHBhbmVsLnRhYnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBwYW5lbC5hY3RpdmVJZCA9IHBhbmVsLnRhYnNbMF0uaWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhbmVsLm1pbldpZHRoIDw9IDApIHtcbiAgICAgICAgICAgIHBhbmVsLm1pbldpZHRoID0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFuZWwubWluSGVpZ2h0IDw9IDApIHtcbiAgICAgICAgICAgIHBhbmVsLm1pbkhlaWdodCA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHsgcGFuZWxMb2NrIH0gPSBwYW5lbDtcbiAgICAgICAgaWYgKHBhbmVsTG9jaykge1xuICAgICAgICAgICAgaWYgKHBhbmVsLm1pbldpZHRoIDwgcGFuZWxMb2NrLm1pbldpZHRoKSB7XG4gICAgICAgICAgICAgICAgcGFuZWwubWluV2lkdGggPSBwYW5lbExvY2subWluV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFuZWwubWluSGVpZ2h0IDwgcGFuZWxMb2NrLm1pbkhlaWdodCkge1xuICAgICAgICAgICAgICAgIHBhbmVsLm1pbkhlaWdodCA9IHBhbmVsTG9jay5taW5IZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFuZWwucGFuZWxMb2NrLndpZHRoRmxleCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcGFuZWwud2lkdGhGbGV4ID0gcGFuZWxMb2NrLndpZHRoRmxleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYW5lbC5wYW5lbExvY2suaGVpZ2h0RmxleCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcGFuZWwuaGVpZ2h0RmxleCA9IHBhbmVsTG9jay5oZWlnaHRGbGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYW5lbC56ID4gX3pDb3VudCkge1xuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIG5leHQgekluZGV4IGlzIG9uIHRvcFxuICAgICAgICAgICAgX3pDb3VudCA9IHBhbmVsLno7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhbmVsO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmaXhCb3hEYXRhKGJveCkge1xuICAgICAgICBmaXhQYW5lbE9yQm94KGJveCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm94LmNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSBib3guY2hpbGRyZW5baV07XG4gICAgICAgICAgICBjaGlsZC5wYXJlbnQgPSBib3g7XG4gICAgICAgICAgICBpZiAoJ2NoaWxkcmVuJyBpbiBjaGlsZCkge1xuICAgICAgICAgICAgICAgIGZpeEJveERhdGEoY2hpbGQpO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGJveCB3aXRoIG5vIGNoaWxkXG4gICAgICAgICAgICAgICAgICAgIGJveC5jaGlsZHJlbi5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIC0taTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hpbGQuY2hpbGRyZW4ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGJveCB3aXRoIG9uZSBjaGlsZCBzaG91bGQgYmUgbWVyZ2VkIGJhY2sgdG8gcGFyZW50IGJveFxuICAgICAgICAgICAgICAgICAgICBsZXQgc3ViQ2hpbGQgPSBjaGlsZC5jaGlsZHJlblswXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YkNoaWxkLm1vZGUgPT09IGJveC5tb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdWIgY2hpbGQgaXMgYW5vdGhlciBib3ggdGhhdCBjYW4gYmUgbWVyZ2VkIGludG8gY3VycmVudCBib3hcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0b3RhbFN1YlNpemUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgc3Vic3ViQ2hpbGQgb2Ygc3ViQ2hpbGQuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFN1YlNpemUgKz0gc3Vic3ViQ2hpbGQuc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzaXplU2NhbGUgPSBjaGlsZC5zaXplIC8gdG90YWxTdWJTaXplO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgc3Vic3ViQ2hpbGQgb2Ygc3ViQ2hpbGQuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzdWJDaGlsZC5zaXplICo9IHNpemVTY2FsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lcmdlIGNoaWxkcmVuIHVwXG4gICAgICAgICAgICAgICAgICAgICAgICBib3guY2hpbGRyZW4uc3BsaWNlKGksIDEsIC4uLnN1YkNoaWxkLmNoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN1YiBjaGlsZCBjYW4gYmUgbW92ZWQgdXAgb25lIGxheWVyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJDaGlsZC5zaXplID0gY2hpbGQuc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveC5jaGlsZHJlbltpXSA9IHN1YkNoaWxkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC0taTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgndGFicycgaW4gY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBmaXhQYW5lbERhdGEoY2hpbGQpO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZC50YWJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgcGFuZWwgd2l0aCBubyB0YWJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGlsZC5wYW5lbExvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveC5jaGlsZHJlbi5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAtLWk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hpbGQuZ3JvdXAgPT09IHBsYWNlSG9sZGVyU3R5bGUgJiYgKGJveC5jaGlsZHJlbi5sZW5ndGggPiAxIHx8IGJveC5wYXJlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgcGxhY2VIb2xkZXIgR3JvdXBcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveC5jaGlsZHJlbi5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAtLWk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBtZXJnZSBtaW4gc2l6ZVxuICAgICAgICAgICAgc3dpdGNoIChib3gubW9kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hvcml6b250YWwnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQubWluV2lkdGggPiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgYm94Lm1pbldpZHRoICs9IGNoaWxkLm1pbldpZHRoO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQubWluSGVpZ2h0ID4gYm94Lm1pbkhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveC5taW5IZWlnaHQgPSBjaGlsZC5taW5IZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC53aWR0aEZsZXggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm94LndpZHRoRmxleCA9IG1heEZsZXgoYm94LndpZHRoRmxleCwgY2hpbGQud2lkdGhGbGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQuaGVpZ2h0RmxleCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3guaGVpZ2h0RmxleCA9IG1lcmdlRmxleChib3guaGVpZ2h0RmxleCwgY2hpbGQuaGVpZ2h0RmxleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndmVydGljYWwnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQubWluV2lkdGggPiBib3gubWluV2lkdGgpXG4gICAgICAgICAgICAgICAgICAgICAgICBib3gubWluV2lkdGggPSBjaGlsZC5taW5XaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkLm1pbkhlaWdodCA+IDApXG4gICAgICAgICAgICAgICAgICAgICAgICBib3gubWluSGVpZ2h0ICs9IGNoaWxkLm1pbkhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkLmhlaWdodEZsZXggIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm94LmhlaWdodEZsZXggPSBtYXhGbGV4KGJveC5oZWlnaHRGbGV4LCBjaGlsZC5oZWlnaHRGbGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQud2lkdGhGbGV4ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveC53aWR0aEZsZXggPSBtZXJnZUZsZXgoYm94LndpZHRoRmxleCwgY2hpbGQud2lkdGhGbGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBhZGQgZGl2aWRlciBzaXplXG4gICAgICAgIGlmIChib3guY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgc3dpdGNoIChib3gubW9kZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hvcml6b250YWwnOlxuICAgICAgICAgICAgICAgICAgICBib3gubWluV2lkdGggKz0gKGJveC5jaGlsZHJlbi5sZW5ndGggLSAxKSAqIDQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3ZlcnRpY2FsJzpcbiAgICAgICAgICAgICAgICAgICAgYm94Lm1pbkhlaWdodCArPSAoYm94LmNoaWxkcmVuLmxlbmd0aCAtIDEpICogNDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJveDtcbiAgICB9XG4gICAgaWYgKGxheW91dC5mbG9hdGJveCkge1xuICAgICAgICBsYXlvdXQuZmxvYXRib3gubW9kZSA9ICdmbG9hdCc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsYXlvdXQuZmxvYXRib3ggPSB7IG1vZGU6ICdmbG9hdCcsIGNoaWxkcmVuOiBbXSwgc2l6ZTogMSB9O1xuICAgIH1cbiAgICBpZiAobGF5b3V0LndpbmRvd2JveCkge1xuICAgICAgICBsYXlvdXQud2luZG93Ym94Lm1vZGUgPSAnd2luZG93JztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxheW91dC53aW5kb3dib3ggPSB7IG1vZGU6ICd3aW5kb3cnLCBjaGlsZHJlbjogW10sIHNpemU6IDEgfTtcbiAgICB9XG4gICAgaWYgKGxheW91dC5tYXhib3gpIHtcbiAgICAgICAgbGF5b3V0Lm1heGJveC5tb2RlID0gJ21heGltaXplJztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxheW91dC5tYXhib3ggPSB7IG1vZGU6ICdtYXhpbWl6ZScsIGNoaWxkcmVuOiBbXSwgc2l6ZTogMSB9O1xuICAgIH1cbiAgICBmaXhCb3hEYXRhKGxheW91dC5kb2NrYm94KTtcbiAgICBmaXhCb3hEYXRhKGxheW91dC5mbG9hdGJveCk7XG4gICAgZml4Qm94RGF0YShsYXlvdXQud2luZG93Ym94KTtcbiAgICBmaXhCb3hEYXRhKGxheW91dC5tYXhib3gpO1xuICAgIGlmIChsYXlvdXQuZG9ja2JveC5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gYWRkIHBsYWNlIGhvbGRlciBwYW5lbCB3aGVuIHJvb3QgYm94IGlzIGVtcHR5XG4gICAgICAgIGxldCBuZXdQYW5lbCA9IHsgaWQ6ICcrMCcsIGdyb3VwOiBwbGFjZUhvbGRlclN0eWxlLCBwYW5lbExvY2s6IHt9LCBzaXplOiAyMDAsIHRhYnM6IFtdIH07XG4gICAgICAgIG5ld1BhbmVsLnBhcmVudCA9IGxheW91dC5kb2NrYm94O1xuICAgICAgICBsYXlvdXQuZG9ja2JveC5jaGlsZHJlbi5wdXNoKG5ld1BhbmVsKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIG1lcmdlIGFuZCByZXBsYWNlIHJvb3QgYm94IHdoZW4gYm94IGhhcyBvbmx5IG9uZSBjaGlsZFxuICAgICAgICB3aGlsZSAobGF5b3V0LmRvY2tib3guY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmICdjaGlsZHJlbicgaW4gbGF5b3V0LmRvY2tib3guY2hpbGRyZW5bMF0pIHtcbiAgICAgICAgICAgIGxldCBuZXdEb2NrQm94ID0gY2xvbmUobGF5b3V0LmRvY2tib3guY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgbGF5b3V0LmRvY2tib3ggPSBuZXdEb2NrQm94O1xuICAgICAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgbmV3RG9ja0JveC5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGNoaWxkLnBhcmVudCA9IG5ld0RvY2tCb3g7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGF5b3V0LmRvY2tib3gucGFyZW50ID0gbnVsbDtcbiAgICBsYXlvdXQuZmxvYXRib3gucGFyZW50ID0gbnVsbDtcbiAgICBsYXlvdXQud2luZG93Ym94LnBhcmVudCA9IG51bGw7XG4gICAgbGF5b3V0Lm1heGJveC5wYXJlbnQgPSBudWxsO1xuICAgIGNsZWFyT2JqZWN0Q2FjaGUoKTtcbiAgICByZXR1cm4gbGF5b3V0O1xufVxuZnVuY3Rpb24gcmVwbGFjZVBhbmVsKGxheW91dCwgcGFuZWwsIG5ld1BhbmVsKSB7XG4gICAgZm9yIChsZXQgdGFiIG9mIG5ld1BhbmVsLnRhYnMpIHtcbiAgICAgICAgdGFiLnBhcmVudCA9IG5ld1BhbmVsO1xuICAgIH1cbiAgICBsZXQgYm94ID0gcGFuZWwucGFyZW50O1xuICAgIGlmIChib3gpIHtcbiAgICAgICAgbGV0IHBvcyA9IGJveC5jaGlsZHJlbi5pbmRleE9mKHBhbmVsKTtcbiAgICAgICAgaWYgKHBvcyA+PSAwKSB7XG4gICAgICAgICAgICBsZXQgbmV3Qm94ID0gY2xvbmUoYm94KTtcbiAgICAgICAgICAgIG5ld0JveC5jaGlsZHJlbltwb3NdID0gbmV3UGFuZWw7XG4gICAgICAgICAgICByZXR1cm4gcmVwbGFjZUJveChsYXlvdXQsIGJveCwgbmV3Qm94KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGF5b3V0O1xufVxuZnVuY3Rpb24gcmVwbGFjZUJveChsYXlvdXQsIGJveCwgbmV3Qm94KSB7XG4gICAgZm9yIChsZXQgY2hpbGQgb2YgbmV3Qm94LmNoaWxkcmVuKSB7XG4gICAgICAgIGNoaWxkLnBhcmVudCA9IG5ld0JveDtcbiAgICB9XG4gICAgbGV0IHBhcmVudEJveCA9IGJveC5wYXJlbnQ7XG4gICAgaWYgKHBhcmVudEJveCkge1xuICAgICAgICBsZXQgcG9zID0gcGFyZW50Qm94LmNoaWxkcmVuLmluZGV4T2YoYm94KTtcbiAgICAgICAgaWYgKHBvcyA+PSAwKSB7XG4gICAgICAgICAgICBsZXQgbmV3UGFyZW50Qm94ID0gY2xvbmUocGFyZW50Qm94KTtcbiAgICAgICAgICAgIG5ld1BhcmVudEJveC5jaGlsZHJlbltwb3NdID0gbmV3Qm94O1xuICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2VCb3gobGF5b3V0LCBwYXJlbnRCb3gsIG5ld1BhcmVudEJveCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChib3guaWQgPT09IGxheW91dC5kb2NrYm94LmlkIHx8IGJveCA9PT0gbGF5b3V0LmRvY2tib3gpIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGxheW91dCksIHsgZG9ja2JveDogbmV3Qm94IH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGJveC5pZCA9PT0gbGF5b3V0LmZsb2F0Ym94LmlkIHx8IGJveCA9PT0gbGF5b3V0LmZsb2F0Ym94KSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsYXlvdXQpLCB7IGZsb2F0Ym94OiBuZXdCb3ggfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYm94LmlkID09PSBsYXlvdXQud2luZG93Ym94LmlkIHx8IGJveCA9PT0gbGF5b3V0LndpbmRvd2JveCkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbGF5b3V0KSwgeyB3aW5kb3dib3g6IG5ld0JveCB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChib3guaWQgPT09IGxheW91dC5tYXhib3guaWQgfHwgYm94ID09PSBsYXlvdXQubWF4Ym94KSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBsYXlvdXQpLCB7IG1heGJveDogbmV3Qm94IH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsYXlvdXQ7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RmxvYXRQYW5lbFNpemUocGFuZWwsIHRhYkdyb3VwKSB7XG4gICAgaWYgKCFwYW5lbCkge1xuICAgICAgICByZXR1cm4gWzMwMCwgMzAwXTtcbiAgICB9XG4gICAgbGV0IHBhbmVsV2lkdGggPSBwYW5lbC5vZmZzZXRXaWR0aDtcbiAgICBsZXQgcGFuZWxIZWlnaHQgPSBwYW5lbC5vZmZzZXRIZWlnaHQ7XG4gICAgbGV0IFttaW5XaWR0aCwgbWF4V2lkdGhdID0gdGFiR3JvdXAucHJlZmVycmVkRmxvYXRXaWR0aCB8fCBbMTAwLCA2MDBdO1xuICAgIGxldCBbbWluSGVpZ2h0LCBtYXhIZWlnaHRdID0gdGFiR3JvdXAucHJlZmVycmVkRmxvYXRIZWlnaHQgfHwgWzUwLCA1MDBdO1xuICAgIGlmICghKHBhbmVsV2lkdGggPj0gbWluV2lkdGgpKSB7XG4gICAgICAgIHBhbmVsV2lkdGggPSBtaW5XaWR0aDtcbiAgICB9XG4gICAgZWxzZSBpZiAoIShwYW5lbFdpZHRoIDw9IG1heFdpZHRoKSkge1xuICAgICAgICBwYW5lbFdpZHRoID0gbWF4V2lkdGg7XG4gICAgfVxuICAgIGlmICghKHBhbmVsSGVpZ2h0ID49IG1pbkhlaWdodCkpIHtcbiAgICAgICAgcGFuZWxIZWlnaHQgPSBtaW5IZWlnaHQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKCEocGFuZWxIZWlnaHQgPD0gbWF4SGVpZ2h0KSkge1xuICAgICAgICBwYW5lbEhlaWdodCA9IG1heEhlaWdodDtcbiAgICB9XG4gICAgcmV0dXJuIFtwYW5lbFdpZHRoLCBwYW5lbEhlaWdodF07XG59XG5leHBvcnQgZnVuY3Rpb24gZmluZE5lYXJlc3RQYW5lbChyZWN0RnJvbSwgcmVjdFRvLCBkaXJlY3Rpb24pIHtcbiAgICBsZXQgZGlzdGFuY2UgPSAtMTtcbiAgICBsZXQgb3ZlcmxhcCA9IC0xO1xuICAgIGxldCBhbGlnbm1lbnQgPSAwO1xuICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICAgIGNhc2UgJ0Fycm93VXAnOiB7XG4gICAgICAgICAgICBkaXN0YW5jZSA9IHJlY3RGcm9tLnRvcCAtIHJlY3RUby5ib3R0b20gKyByZWN0RnJvbS5oZWlnaHQ7XG4gICAgICAgICAgICBvdmVybGFwID0gTWF0aC5taW4ocmVjdEZyb20ucmlnaHQsIHJlY3RUby5yaWdodCkgLSBNYXRoLm1heChyZWN0RnJvbS5sZWZ0LCByZWN0VG8ubGVmdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdBcnJvd0Rvd24nOiB7XG4gICAgICAgICAgICBkaXN0YW5jZSA9IHJlY3RUby50b3AgLSByZWN0RnJvbS5ib3R0b20gKyByZWN0RnJvbS5oZWlnaHQ7XG4gICAgICAgICAgICBvdmVybGFwID0gTWF0aC5taW4ocmVjdEZyb20ucmlnaHQsIHJlY3RUby5yaWdodCkgLSBNYXRoLm1heChyZWN0RnJvbS5sZWZ0LCByZWN0VG8ubGVmdCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdBcnJvd0xlZnQnOiB7XG4gICAgICAgICAgICBkaXN0YW5jZSA9IHJlY3RGcm9tLmxlZnQgLSByZWN0VG8ucmlnaHQgKyByZWN0RnJvbS53aWR0aDtcbiAgICAgICAgICAgIG92ZXJsYXAgPSBNYXRoLm1pbihyZWN0RnJvbS5ib3R0b20sIHJlY3RUby5ib3R0b20pIC0gTWF0aC5tYXgocmVjdEZyb20udG9wLCByZWN0VG8udG9wKTtcbiAgICAgICAgICAgIGFsaWdubWVudCA9IE1hdGguYWJzKHJlY3RGcm9tLnRvcCAtIHJlY3RUby50b3ApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6IHtcbiAgICAgICAgICAgIGRpc3RhbmNlID0gcmVjdFRvLmxlZnQgLSByZWN0RnJvbS5yaWdodCArIHJlY3RGcm9tLndpZHRoO1xuICAgICAgICAgICAgb3ZlcmxhcCA9IE1hdGgubWluKHJlY3RGcm9tLmJvdHRvbSwgcmVjdFRvLmJvdHRvbSkgLSBNYXRoLm1heChyZWN0RnJvbS50b3AsIHJlY3RUby50b3ApO1xuICAgICAgICAgICAgYWxpZ25tZW50ID0gTWF0aC5hYnMocmVjdEZyb20udG9wIC0gcmVjdFRvLnRvcCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZGlzdGFuY2UgPCAwIHx8IG92ZXJsYXAgPD0gMCkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIHJldHVybiBkaXN0YW5jZSAqIChhbGlnbm1lbnQgKyAxKSAtIG92ZXJsYXAgKiAwLjAwMTtcbn1cbiIsIi8vIE5PVEU6IHRoaXMgbGlzdCBtdXN0IGJlIHVwLXRvLWRhdGUgd2l0aCBicm93c2VycyBsaXN0ZWQgaW5cbi8vIHRlc3QvYWNjZXB0YW5jZS91c2VyYWdlbnRzdHJpbmdzLnltbFxuZXhwb3J0IGNvbnN0IEJST1dTRVJfQUxJQVNFU19NQVAgPSB7XG4gICdBbWF6b24gU2lsayc6ICdhbWF6b25fc2lsaycsXG4gICdBbmRyb2lkIEJyb3dzZXInOiAnYW5kcm9pZCcsXG4gIEJhZGE6ICdiYWRhJyxcbiAgQmxhY2tCZXJyeTogJ2JsYWNrYmVycnknLFxuICBDaHJvbWU6ICdjaHJvbWUnLFxuICBDaHJvbWl1bTogJ2Nocm9taXVtJyxcbiAgRWxlY3Ryb246ICdlbGVjdHJvbicsXG4gIEVwaXBoYW55OiAnZXBpcGhhbnknLFxuICBGaXJlZm94OiAnZmlyZWZveCcsXG4gIEZvY3VzOiAnZm9jdXMnLFxuICBHZW5lcmljOiAnZ2VuZXJpYycsXG4gICdHb29nbGUgU2VhcmNoJzogJ2dvb2dsZV9zZWFyY2gnLFxuICBHb29nbGVib3Q6ICdnb29nbGVib3QnLFxuICAnSW50ZXJuZXQgRXhwbG9yZXInOiAnaWUnLFxuICAnSy1NZWxlb24nOiAna19tZWxlb24nLFxuICBNYXh0aG9uOiAnbWF4dGhvbicsXG4gICdNaWNyb3NvZnQgRWRnZSc6ICdlZGdlJyxcbiAgJ01aIEJyb3dzZXInOiAnbXonLFxuICAnTkFWRVIgV2hhbGUgQnJvd3Nlcic6ICduYXZlcicsXG4gIE9wZXJhOiAnb3BlcmEnLFxuICAnT3BlcmEgQ29hc3QnOiAnb3BlcmFfY29hc3QnLFxuICBQaGFudG9tSlM6ICdwaGFudG9tanMnLFxuICBQdWZmaW46ICdwdWZmaW4nLFxuICBRdXBaaWxsYTogJ3F1cHppbGxhJyxcbiAgUVE6ICdxcScsXG4gIFFRTGl0ZTogJ3FxbGl0ZScsXG4gIFNhZmFyaTogJ3NhZmFyaScsXG4gIFNhaWxmaXNoOiAnc2FpbGZpc2gnLFxuICAnU2Ftc3VuZyBJbnRlcm5ldCBmb3IgQW5kcm9pZCc6ICdzYW1zdW5nX2ludGVybmV0JyxcbiAgU2VhTW9ua2V5OiAnc2VhbW9ua2V5JyxcbiAgU2xlaXBuaXI6ICdzbGVpcG5pcicsXG4gIFN3aW5nOiAnc3dpbmcnLFxuICBUaXplbjogJ3RpemVuJyxcbiAgJ1VDIEJyb3dzZXInOiAndWMnLFxuICBWaXZhbGRpOiAndml2YWxkaScsXG4gICdXZWJPUyBCcm93c2VyJzogJ3dlYm9zJyxcbiAgV2VDaGF0OiAnd2VjaGF0JyxcbiAgJ1lhbmRleCBCcm93c2VyJzogJ3lhbmRleCcsXG4gIFJva3U6ICdyb2t1Jyxcbn07XG5cbmV4cG9ydCBjb25zdCBCUk9XU0VSX01BUCA9IHtcbiAgYW1hem9uX3NpbGs6ICdBbWF6b24gU2lsaycsXG4gIGFuZHJvaWQ6ICdBbmRyb2lkIEJyb3dzZXInLFxuICBiYWRhOiAnQmFkYScsXG4gIGJsYWNrYmVycnk6ICdCbGFja0JlcnJ5JyxcbiAgY2hyb21lOiAnQ2hyb21lJyxcbiAgY2hyb21pdW06ICdDaHJvbWl1bScsXG4gIGVsZWN0cm9uOiAnRWxlY3Ryb24nLFxuICBlcGlwaGFueTogJ0VwaXBoYW55JyxcbiAgZmlyZWZveDogJ0ZpcmVmb3gnLFxuICBmb2N1czogJ0ZvY3VzJyxcbiAgZ2VuZXJpYzogJ0dlbmVyaWMnLFxuICBnb29nbGVib3Q6ICdHb29nbGVib3QnLFxuICBnb29nbGVfc2VhcmNoOiAnR29vZ2xlIFNlYXJjaCcsXG4gIGllOiAnSW50ZXJuZXQgRXhwbG9yZXInLFxuICBrX21lbGVvbjogJ0stTWVsZW9uJyxcbiAgbWF4dGhvbjogJ01heHRob24nLFxuICBlZGdlOiAnTWljcm9zb2Z0IEVkZ2UnLFxuICBtejogJ01aIEJyb3dzZXInLFxuICBuYXZlcjogJ05BVkVSIFdoYWxlIEJyb3dzZXInLFxuICBvcGVyYTogJ09wZXJhJyxcbiAgb3BlcmFfY29hc3Q6ICdPcGVyYSBDb2FzdCcsXG4gIHBoYW50b21qczogJ1BoYW50b21KUycsXG4gIHB1ZmZpbjogJ1B1ZmZpbicsXG4gIHF1cHppbGxhOiAnUXVwWmlsbGEnLFxuICBxcTogJ1FRIEJyb3dzZXInLFxuICBxcWxpdGU6ICdRUSBCcm93c2VyIExpdGUnLFxuICBzYWZhcmk6ICdTYWZhcmknLFxuICBzYWlsZmlzaDogJ1NhaWxmaXNoJyxcbiAgc2Ftc3VuZ19pbnRlcm5ldDogJ1NhbXN1bmcgSW50ZXJuZXQgZm9yIEFuZHJvaWQnLFxuICBzZWFtb25rZXk6ICdTZWFNb25rZXknLFxuICBzbGVpcG5pcjogJ1NsZWlwbmlyJyxcbiAgc3dpbmc6ICdTd2luZycsXG4gIHRpemVuOiAnVGl6ZW4nLFxuICB1YzogJ1VDIEJyb3dzZXInLFxuICB2aXZhbGRpOiAnVml2YWxkaScsXG4gIHdlYm9zOiAnV2ViT1MgQnJvd3NlcicsXG4gIHdlY2hhdDogJ1dlQ2hhdCcsXG4gIHlhbmRleDogJ1lhbmRleCBCcm93c2VyJyxcbn07XG5cbmV4cG9ydCBjb25zdCBQTEFURk9STVNfTUFQID0ge1xuICB0YWJsZXQ6ICd0YWJsZXQnLFxuICBtb2JpbGU6ICdtb2JpbGUnLFxuICBkZXNrdG9wOiAnZGVza3RvcCcsXG4gIHR2OiAndHYnLFxufTtcblxuZXhwb3J0IGNvbnN0IE9TX01BUCA9IHtcbiAgV2luZG93c1Bob25lOiAnV2luZG93cyBQaG9uZScsXG4gIFdpbmRvd3M6ICdXaW5kb3dzJyxcbiAgTWFjT1M6ICdtYWNPUycsXG4gIGlPUzogJ2lPUycsXG4gIEFuZHJvaWQ6ICdBbmRyb2lkJyxcbiAgV2ViT1M6ICdXZWJPUycsXG4gIEJsYWNrQmVycnk6ICdCbGFja0JlcnJ5JyxcbiAgQmFkYTogJ0JhZGEnLFxuICBUaXplbjogJ1RpemVuJyxcbiAgTGludXg6ICdMaW51eCcsXG4gIENocm9tZU9TOiAnQ2hyb21lIE9TJyxcbiAgUGxheVN0YXRpb240OiAnUGxheVN0YXRpb24gNCcsXG4gIFJva3U6ICdSb2t1Jyxcbn07XG5cbmV4cG9ydCBjb25zdCBFTkdJTkVfTUFQID0ge1xuICBFZGdlSFRNTDogJ0VkZ2VIVE1MJyxcbiAgQmxpbms6ICdCbGluaycsXG4gIFRyaWRlbnQ6ICdUcmlkZW50JyxcbiAgUHJlc3RvOiAnUHJlc3RvJyxcbiAgR2Vja286ICdHZWNrbycsXG4gIFdlYktpdDogJ1dlYktpdCcsXG59O1xuIiwiaW1wb3J0IHsgQlJPV1NFUl9NQVAsIEJST1dTRVJfQUxJQVNFU19NQVAgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFV0aWxzIHtcbiAgLyoqXG4gICAqIEdldCBmaXJzdCBtYXRjaGVkIGl0ZW0gZm9yIGEgc3RyaW5nXG4gICAqIEBwYXJhbSB7UmVnRXhwfSByZWdleHBcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVhXG4gICAqIEByZXR1cm4ge0FycmF5fHtpbmRleDogbnVtYmVyLCBpbnB1dDogc3RyaW5nfXwqfGJvb2xlYW58c3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldEZpcnN0TWF0Y2gocmVnZXhwLCB1YSkge1xuICAgIGNvbnN0IG1hdGNoID0gdWEubWF0Y2gocmVnZXhwKTtcbiAgICByZXR1cm4gKG1hdGNoICYmIG1hdGNoLmxlbmd0aCA+IDAgJiYgbWF0Y2hbMV0pIHx8ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBzZWNvbmQgbWF0Y2hlZCBpdGVtIGZvciBhIHN0cmluZ1xuICAgKiBAcGFyYW0gcmVnZXhwXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1YVxuICAgKiBAcmV0dXJuIHtBcnJheXx7aW5kZXg6IG51bWJlciwgaW5wdXQ6IHN0cmluZ318Knxib29sZWFufHN0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXRTZWNvbmRNYXRjaChyZWdleHAsIHVhKSB7XG4gICAgY29uc3QgbWF0Y2ggPSB1YS5tYXRjaChyZWdleHApO1xuICAgIHJldHVybiAobWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID4gMSAmJiBtYXRjaFsyXSkgfHwgJyc7XG4gIH1cblxuICAvKipcbiAgICogTWF0Y2ggYSByZWdleHAgYW5kIHJldHVybiBhIGNvbnN0YW50IG9yIHVuZGVmaW5lZFxuICAgKiBAcGFyYW0ge1JlZ0V4cH0gcmVnZXhwXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1YVxuICAgKiBAcGFyYW0geyp9IF9jb25zdCBBbnkgY29uc3QgdGhhdCB3aWxsIGJlIHJldHVybmVkIGlmIHJlZ2V4cCBtYXRjaGVzIHRoZSBzdHJpbmdcbiAgICogQHJldHVybiB7Kn1cbiAgICovXG4gIHN0YXRpYyBtYXRjaEFuZFJldHVybkNvbnN0KHJlZ2V4cCwgdWEsIF9jb25zdCkge1xuICAgIGlmIChyZWdleHAudGVzdCh1YSkpIHtcbiAgICAgIHJldHVybiBfY29uc3Q7XG4gICAgfVxuICAgIHJldHVybiB2b2lkICgwKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRXaW5kb3dzVmVyc2lvbk5hbWUodmVyc2lvbikge1xuICAgIHN3aXRjaCAodmVyc2lvbikge1xuICAgICAgY2FzZSAnTlQnOiByZXR1cm4gJ05UJztcbiAgICAgIGNhc2UgJ1hQJzogcmV0dXJuICdYUCc7XG4gICAgICBjYXNlICdOVCA1LjAnOiByZXR1cm4gJzIwMDAnO1xuICAgICAgY2FzZSAnTlQgNS4xJzogcmV0dXJuICdYUCc7XG4gICAgICBjYXNlICdOVCA1LjInOiByZXR1cm4gJzIwMDMnO1xuICAgICAgY2FzZSAnTlQgNi4wJzogcmV0dXJuICdWaXN0YSc7XG4gICAgICBjYXNlICdOVCA2LjEnOiByZXR1cm4gJzcnO1xuICAgICAgY2FzZSAnTlQgNi4yJzogcmV0dXJuICc4JztcbiAgICAgIGNhc2UgJ05UIDYuMyc6IHJldHVybiAnOC4xJztcbiAgICAgIGNhc2UgJ05UIDEwLjAnOiByZXR1cm4gJzEwJztcbiAgICAgIGRlZmF1bHQ6IHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBtYWNPUyB2ZXJzaW9uIG5hbWVcbiAgICogICAgMTAuNSAtIExlb3BhcmRcbiAgICogICAgMTAuNiAtIFNub3cgTGVvcGFyZFxuICAgKiAgICAxMC43IC0gTGlvblxuICAgKiAgICAxMC44IC0gTW91bnRhaW4gTGlvblxuICAgKiAgICAxMC45IC0gTWF2ZXJpY2tzXG4gICAqICAgIDEwLjEwIC0gWW9zZW1pdGVcbiAgICogICAgMTAuMTEgLSBFbCBDYXBpdGFuXG4gICAqICAgIDEwLjEyIC0gU2llcnJhXG4gICAqICAgIDEwLjEzIC0gSGlnaCBTaWVycmFcbiAgICogICAgMTAuMTQgLSBNb2phdmVcbiAgICogICAgMTAuMTUgLSBDYXRhbGluYVxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgIGdldE1hY09TVmVyc2lvbk5hbWUoXCIxMC4xNFwiKSAvLyAnTW9qYXZlJ1xuICAgKlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHZlcnNpb25cbiAgICogQHJldHVybiB7c3RyaW5nfSB2ZXJzaW9uTmFtZVxuICAgKi9cbiAgc3RhdGljIGdldE1hY09TVmVyc2lvbk5hbWUodmVyc2lvbikge1xuICAgIGNvbnN0IHYgPSB2ZXJzaW9uLnNwbGl0KCcuJykuc3BsaWNlKDAsIDIpLm1hcChzID0+IHBhcnNlSW50KHMsIDEwKSB8fCAwKTtcbiAgICB2LnB1c2goMCk7XG4gICAgaWYgKHZbMF0gIT09IDEwKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIHN3aXRjaCAodlsxXSkge1xuICAgICAgY2FzZSA1OiByZXR1cm4gJ0xlb3BhcmQnO1xuICAgICAgY2FzZSA2OiByZXR1cm4gJ1Nub3cgTGVvcGFyZCc7XG4gICAgICBjYXNlIDc6IHJldHVybiAnTGlvbic7XG4gICAgICBjYXNlIDg6IHJldHVybiAnTW91bnRhaW4gTGlvbic7XG4gICAgICBjYXNlIDk6IHJldHVybiAnTWF2ZXJpY2tzJztcbiAgICAgIGNhc2UgMTA6IHJldHVybiAnWW9zZW1pdGUnO1xuICAgICAgY2FzZSAxMTogcmV0dXJuICdFbCBDYXBpdGFuJztcbiAgICAgIGNhc2UgMTI6IHJldHVybiAnU2llcnJhJztcbiAgICAgIGNhc2UgMTM6IHJldHVybiAnSGlnaCBTaWVycmEnO1xuICAgICAgY2FzZSAxNDogcmV0dXJuICdNb2phdmUnO1xuICAgICAgY2FzZSAxNTogcmV0dXJuICdDYXRhbGluYSc7XG4gICAgICBkZWZhdWx0OiByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgQW5kcm9pZCB2ZXJzaW9uIG5hbWVcbiAgICogICAgMS41IC0gQ3VwY2FrZVxuICAgKiAgICAxLjYgLSBEb251dFxuICAgKiAgICAyLjAgLSBFY2xhaXJcbiAgICogICAgMi4xIC0gRWNsYWlyXG4gICAqICAgIDIuMiAtIEZyb3lvXG4gICAqICAgIDIueCAtIEdpbmdlcmJyZWFkXG4gICAqICAgIDMueCAtIEhvbmV5Y29tYlxuICAgKiAgICA0LjAgLSBJY2UgQ3JlYW0gU2FuZHdpY2hcbiAgICogICAgNC4xIC0gSmVsbHkgQmVhblxuICAgKiAgICA0LjQgLSBLaXRLYXRcbiAgICogICAgNS54IC0gTG9sbGlwb3BcbiAgICogICAgNi54IC0gTWFyc2htYWxsb3dcbiAgICogICAgNy54IC0gTm91Z2F0XG4gICAqICAgIDgueCAtIE9yZW9cbiAgICogICAgOS54IC0gUGllXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAgZ2V0QW5kcm9pZFZlcnNpb25OYW1lKFwiNy4wXCIpIC8vICdOb3VnYXQnXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ30gdmVyc2lvblxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IHZlcnNpb25OYW1lXG4gICAqL1xuICBzdGF0aWMgZ2V0QW5kcm9pZFZlcnNpb25OYW1lKHZlcnNpb24pIHtcbiAgICBjb25zdCB2ID0gdmVyc2lvbi5zcGxpdCgnLicpLnNwbGljZSgwLCAyKS5tYXAocyA9PiBwYXJzZUludChzLCAxMCkgfHwgMCk7XG4gICAgdi5wdXNoKDApO1xuICAgIGlmICh2WzBdID09PSAxICYmIHZbMV0gPCA1KSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIGlmICh2WzBdID09PSAxICYmIHZbMV0gPCA2KSByZXR1cm4gJ0N1cGNha2UnO1xuICAgIGlmICh2WzBdID09PSAxICYmIHZbMV0gPj0gNikgcmV0dXJuICdEb251dCc7XG4gICAgaWYgKHZbMF0gPT09IDIgJiYgdlsxXSA8IDIpIHJldHVybiAnRWNsYWlyJztcbiAgICBpZiAodlswXSA9PT0gMiAmJiB2WzFdID09PSAyKSByZXR1cm4gJ0Zyb3lvJztcbiAgICBpZiAodlswXSA9PT0gMiAmJiB2WzFdID4gMikgcmV0dXJuICdHaW5nZXJicmVhZCc7XG4gICAgaWYgKHZbMF0gPT09IDMpIHJldHVybiAnSG9uZXljb21iJztcbiAgICBpZiAodlswXSA9PT0gNCAmJiB2WzFdIDwgMSkgcmV0dXJuICdJY2UgQ3JlYW0gU2FuZHdpY2gnO1xuICAgIGlmICh2WzBdID09PSA0ICYmIHZbMV0gPCA0KSByZXR1cm4gJ0plbGx5IEJlYW4nO1xuICAgIGlmICh2WzBdID09PSA0ICYmIHZbMV0gPj0gNCkgcmV0dXJuICdLaXRLYXQnO1xuICAgIGlmICh2WzBdID09PSA1KSByZXR1cm4gJ0xvbGxpcG9wJztcbiAgICBpZiAodlswXSA9PT0gNikgcmV0dXJuICdNYXJzaG1hbGxvdyc7XG4gICAgaWYgKHZbMF0gPT09IDcpIHJldHVybiAnTm91Z2F0JztcbiAgICBpZiAodlswXSA9PT0gOCkgcmV0dXJuICdPcmVvJztcbiAgICBpZiAodlswXSA9PT0gOSkgcmV0dXJuICdQaWUnO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHZlcnNpb24gcHJlY2lzaW9ucyBjb3VudFxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgIGdldFZlcnNpb25QcmVjaXNpb24oXCIxLjEwLjNcIikgLy8gM1xuICAgKlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9IHZlcnNpb25cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgc3RhdGljIGdldFZlcnNpb25QcmVjaXNpb24odmVyc2lvbikge1xuICAgIHJldHVybiB2ZXJzaW9uLnNwbGl0KCcuJykubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBicm93c2VyIHZlcnNpb24gd2VpZ2h0XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAgY29tcGFyZVZlcnNpb25zKCcxLjEwLjIuMScsICAnMS44LjIuMS45MCcpICAgIC8vIDFcbiAgICogICBjb21wYXJlVmVyc2lvbnMoJzEuMDEwLjIuMScsICcxLjA5LjIuMS45MCcpOyAgLy8gMVxuICAgKiAgIGNvbXBhcmVWZXJzaW9ucygnMS4xMC4yLjEnLCAgJzEuMTAuMi4xJyk7ICAgICAvLyAwXG4gICAqICAgY29tcGFyZVZlcnNpb25zKCcxLjEwLjIuMScsICAnMS4wODAwLjInKTsgICAgIC8vIC0xXG4gICAqICAgY29tcGFyZVZlcnNpb25zKCcxLjEwLjIuMScsICAnMS4xMCcsICB0cnVlKTsgIC8vIDBcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHZlcnNpb25BIHZlcnNpb25zIHZlcnNpb25zIHRvIGNvbXBhcmVcbiAgICogQHBhcmFtIHtTdHJpbmd9IHZlcnNpb25CIHZlcnNpb25zIHZlcnNpb25zIHRvIGNvbXBhcmVcbiAgICogQHBhcmFtIHtib29sZWFufSBbaXNMb29zZV0gZW5hYmxlIGxvb3NlIGNvbXBhcmlzb25cbiAgICogQHJldHVybiB7TnVtYmVyfSBjb21wYXJpc29uIHJlc3VsdDogLTEgd2hlbiB2ZXJzaW9uQSBpcyBsb3dlcixcbiAgICogMSB3aGVuIHZlcnNpb25BIGlzIGJpZ2dlciwgMCB3aGVuIGJvdGggZXF1YWxcbiAgICovXG4gIC8qIGVzbGludCBjb25zaXN0ZW50LXJldHVybjogMSAqL1xuICBzdGF0aWMgY29tcGFyZVZlcnNpb25zKHZlcnNpb25BLCB2ZXJzaW9uQiwgaXNMb29zZSA9IGZhbHNlKSB7XG4gICAgLy8gMSkgZ2V0IGNvbW1vbiBwcmVjaXNpb24gZm9yIGJvdGggdmVyc2lvbnMsIGZvciBleGFtcGxlIGZvciBcIjEwLjBcIiBhbmQgXCI5XCIgaXQgc2hvdWxkIGJlIDJcbiAgICBjb25zdCB2ZXJzaW9uQVByZWNpc2lvbiA9IFV0aWxzLmdldFZlcnNpb25QcmVjaXNpb24odmVyc2lvbkEpO1xuICAgIGNvbnN0IHZlcnNpb25CUHJlY2lzaW9uID0gVXRpbHMuZ2V0VmVyc2lvblByZWNpc2lvbih2ZXJzaW9uQik7XG5cbiAgICBsZXQgcHJlY2lzaW9uID0gTWF0aC5tYXgodmVyc2lvbkFQcmVjaXNpb24sIHZlcnNpb25CUHJlY2lzaW9uKTtcbiAgICBsZXQgbGFzdFByZWNpc2lvbiA9IDA7XG5cbiAgICBjb25zdCBjaHVua3MgPSBVdGlscy5tYXAoW3ZlcnNpb25BLCB2ZXJzaW9uQl0sICh2ZXJzaW9uKSA9PiB7XG4gICAgICBjb25zdCBkZWx0YSA9IHByZWNpc2lvbiAtIFV0aWxzLmdldFZlcnNpb25QcmVjaXNpb24odmVyc2lvbik7XG5cbiAgICAgIC8vIDIpIFwiOVwiIC0+IFwiOS4wXCIgKGZvciBwcmVjaXNpb24gPSAyKVxuICAgICAgY29uc3QgX3ZlcnNpb24gPSB2ZXJzaW9uICsgbmV3IEFycmF5KGRlbHRhICsgMSkuam9pbignLjAnKTtcblxuICAgICAgLy8gMykgXCI5LjBcIiAtPiBbXCIwMDAwMDAwMDBcIlwiLCBcIjAwMDAwMDAwOVwiXVxuICAgICAgcmV0dXJuIFV0aWxzLm1hcChfdmVyc2lvbi5zcGxpdCgnLicpLCBjaHVuayA9PiBuZXcgQXJyYXkoMjAgLSBjaHVuay5sZW5ndGgpLmpvaW4oJzAnKSArIGNodW5rKS5yZXZlcnNlKCk7XG4gICAgfSk7XG5cbiAgICAvLyBhZGp1c3QgcHJlY2lzaW9uIGZvciBsb29zZSBjb21wYXJpc29uXG4gICAgaWYgKGlzTG9vc2UpIHtcbiAgICAgIGxhc3RQcmVjaXNpb24gPSBwcmVjaXNpb24gLSBNYXRoLm1pbih2ZXJzaW9uQVByZWNpc2lvbiwgdmVyc2lvbkJQcmVjaXNpb24pO1xuICAgIH1cblxuICAgIC8vIGl0ZXJhdGUgaW4gcmV2ZXJzZSBvcmRlciBieSByZXZlcnNlZCBjaHVua3MgYXJyYXlcbiAgICBwcmVjaXNpb24gLT0gMTtcbiAgICB3aGlsZSAocHJlY2lzaW9uID49IGxhc3RQcmVjaXNpb24pIHtcbiAgICAgIC8vIDQpIGNvbXBhcmU6IFwiMDAwMDAwMDA5XCIgPiBcIjAwMDAwMDAxMFwiID0gZmFsc2UgKGJ1dCBcIjlcIiA+IFwiMTBcIiA9IHRydWUpXG4gICAgICBpZiAoY2h1bmtzWzBdW3ByZWNpc2lvbl0gPiBjaHVua3NbMV1bcHJlY2lzaW9uXSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNodW5rc1swXVtwcmVjaXNpb25dID09PSBjaHVua3NbMV1bcHJlY2lzaW9uXSkge1xuICAgICAgICBpZiAocHJlY2lzaW9uID09PSBsYXN0UHJlY2lzaW9uKSB7XG4gICAgICAgICAgLy8gYWxsIHZlcnNpb24gY2h1bmtzIGFyZSBzYW1lXG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cblxuICAgICAgICBwcmVjaXNpb24gLT0gMTtcbiAgICAgIH0gZWxzZSBpZiAoY2h1bmtzWzBdW3ByZWNpc2lvbl0gPCBjaHVua3NbMV1bcHJlY2lzaW9uXSkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcnJheTo6bWFwIHBvbHlmaWxsXG4gICAqXG4gICAqIEBwYXJhbSAge0FycmF5fSBhcnJcbiAgICogQHBhcmFtICB7RnVuY3Rpb259IGl0ZXJhdG9yXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgc3RhdGljIG1hcChhcnIsIGl0ZXJhdG9yKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgbGV0IGk7XG4gICAgaWYgKEFycmF5LnByb3RvdHlwZS5tYXApIHtcbiAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoYXJyLCBpdGVyYXRvcik7XG4gICAgfVxuICAgIGZvciAoaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGl0ZXJhdG9yKGFycltpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEFycmF5OjpmaW5kIHBvbHlmaWxsXG4gICAqXG4gICAqIEBwYXJhbSAge0FycmF5fSBhcnJcbiAgICogQHBhcmFtICB7RnVuY3Rpb259IHByZWRpY2F0ZVxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIHN0YXRpYyBmaW5kKGFyciwgcHJlZGljYXRlKSB7XG4gICAgbGV0IGk7XG4gICAgbGV0IGw7XG4gICAgaWYgKEFycmF5LnByb3RvdHlwZS5maW5kKSB7XG4gICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbmQuY2FsbChhcnIsIHByZWRpY2F0ZSk7XG4gICAgfVxuICAgIGZvciAoaSA9IDAsIGwgPSBhcnIubGVuZ3RoOyBpIDwgbDsgaSArPSAxKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGFycltpXTtcbiAgICAgIGlmIChwcmVkaWNhdGUodmFsdWUsIGkpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYmplY3Q6OmFzc2lnbiBwb2x5ZmlsbFxuICAgKlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IG9ialxuICAgKiBAcGFyYW0gIHtPYmplY3R9IC4uLm9ianNcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGFzc2lnbihvYmosIC4uLmFzc2lnbmVycykge1xuICAgIGNvbnN0IHJlc3VsdCA9IG9iajtcbiAgICBsZXQgaTtcbiAgICBsZXQgbDtcbiAgICBpZiAoT2JqZWN0LmFzc2lnbikge1xuICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ob2JqLCAuLi5hc3NpZ25lcnMpO1xuICAgIH1cbiAgICBmb3IgKGkgPSAwLCBsID0gYXNzaWduZXJzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMSkge1xuICAgICAgY29uc3QgYXNzaWduZXIgPSBhc3NpZ25lcnNbaV07XG4gICAgICBpZiAodHlwZW9mIGFzc2lnbmVyID09PSAnb2JqZWN0JyAmJiBhc3NpZ25lciAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoYXNzaWduZXIpO1xuICAgICAgICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gYXNzaWduZXJba2V5XTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHNob3J0IHZlcnNpb24vYWxpYXMgZm9yIGEgYnJvd3NlciBuYW1lXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAgZ2V0QnJvd3NlckFsaWFzKCdNaWNyb3NvZnQgRWRnZScpIC8vIGVkZ2VcbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSBicm93c2VyTmFtZVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0QnJvd3NlckFsaWFzKGJyb3dzZXJOYW1lKSB7XG4gICAgcmV0dXJuIEJST1dTRVJfQUxJQVNFU19NQVBbYnJvd3Nlck5hbWVdO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBzaG9ydCB2ZXJzaW9uL2FsaWFzIGZvciBhIGJyb3dzZXIgbmFtZVxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgIGdldEJyb3dzZXJBbGlhcygnZWRnZScpIC8vIE1pY3Jvc29mdCBFZGdlXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ30gYnJvd3NlckFsaWFzXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXRCcm93c2VyVHlwZUJ5QWxpYXMoYnJvd3NlckFsaWFzKSB7XG4gICAgcmV0dXJuIEJST1dTRVJfTUFQW2Jyb3dzZXJBbGlhc10gfHwgJyc7XG4gIH1cbn1cbiIsIi8qKlxuICogQnJvd3NlcnMnIGRlc2NyaXB0b3JzXG4gKlxuICogVGhlIGlkZWEgb2YgZGVzY3JpcHRvcnMgaXMgc2ltcGxlLiBZb3Ugc2hvdWxkIGtub3cgYWJvdXQgdGhlbSB0d28gc2ltcGxlIHRoaW5nczpcbiAqIDEuIEV2ZXJ5IGRlc2NyaXB0b3IgaGFzIGEgbWV0aG9kIG9yIHByb3BlcnR5IGNhbGxlZCBgdGVzdGAgYW5kIGEgYGRlc2NyaWJlYCBtZXRob2QuXG4gKiAyLiBPcmRlciBvZiBkZXNjcmlwdG9ycyBpcyBpbXBvcnRhbnQuXG4gKlxuICogTW9yZSBkZXRhaWxzOlxuICogMS4gTWV0aG9kIG9yIHByb3BlcnR5IGB0ZXN0YCBzZXJ2ZXMgYXMgYSB3YXkgdG8gZGV0ZWN0IHdoZXRoZXIgdGhlIFVBIHN0cmluZ1xuICogbWF0Y2hlcyBzb21lIGNlcnRhaW4gYnJvd3NlciBvciBub3QuIFRoZSBgZGVzY3JpYmVgIG1ldGhvZCBoZWxwcyB0byBtYWtlIGEgcmVzdWx0XG4gKiBvYmplY3Qgd2l0aCBwYXJhbXMgdGhhdCBzaG93IHNvbWUgYnJvd3Nlci1zcGVjaWZpYyB0aGluZ3M6IG5hbWUsIHZlcnNpb24sIGV0Yy5cbiAqIDIuIE9yZGVyIG9mIGRlc2NyaXB0b3JzIGlzIGltcG9ydGFudCBiZWNhdXNlIGEgUGFyc2VyIGdvZXMgdGhyb3VnaCB0aGVtIG9uZSBieSBvbmVcbiAqIGluIGNvdXJzZS4gRm9yIGV4YW1wbGUsIGlmIHlvdSBpbnNlcnQgQ2hyb21lJ3MgZGVzY3JpcHRvciBhcyB0aGUgZmlyc3Qgb25lLFxuICogbW9yZSB0aGVuIGEgaGFsZiBvZiBicm93c2VycyB3aWxsIGJlIGRlc2NyaWJlZCBhcyBDaHJvbWUsIGJlY2F1c2UgdGhleSB3aWxsIHBhc3NcbiAqIHRoZSBDaHJvbWUgZGVzY3JpcHRvcidzIHRlc3QuXG4gKlxuICogRGVzY3JpcHRvcidzIGB0ZXN0YCBjb3VsZCBiZSBhIHByb3BlcnR5IHdpdGggYW4gYXJyYXkgb2YgUmVnRXhwcywgd2hlcmUgZXZlcnkgUmVnRXhwXG4gKiB3aWxsIGJlIGFwcGxpZWQgdG8gYSBVQSBzdHJpbmcgdG8gdGVzdCBpdCB3aGV0aGVyIGl0IG1hdGNoZXMgb3Igbm90LlxuICogSWYgYSBkZXNjcmlwdG9yIGhhcyB0d28gb3IgbW9yZSByZWdleHBzIGluIHRoZSBgdGVzdGAgYXJyYXkgaXQgdGVzdHMgdGhlbSBvbmUgYnkgb25lXG4gKiB3aXRoIGEgbG9naWNhbCBzdW0gb3BlcmF0aW9uLiBQYXJzZXIgc3RvcHMgaWYgaXQgaGFzIGZvdW5kIGFueSBSZWdFeHAgdGhhdCBtYXRjaGVzIHRoZSBVQS5cbiAqXG4gKiBPciBgdGVzdGAgY291bGQgYmUgYSBtZXRob2QuIEluIHRoYXQgY2FzZSBpdCBnZXRzIGEgUGFyc2VyIGluc3RhbmNlIGFuZCBzaG91bGRcbiAqIHJldHVybiB0cnVlL2ZhbHNlIHRvIGdldCB0aGUgUGFyc2VyIGtub3cgaWYgdGhpcyBicm93c2VyIGRlc2NyaXB0b3IgbWF0Y2hlcyB0aGUgVUEgb3Igbm90LlxuICovXG5cbmltcG9ydCBVdGlscyBmcm9tICcuL3V0aWxzLmpzJztcblxuY29uc3QgY29tbW9uVmVyc2lvbklkZW50aWZpZXIgPSAvdmVyc2lvblxcLyhcXGQrKFxcLj9fP1xcZCspKykvaTtcblxuY29uc3QgYnJvd3NlcnNMaXN0ID0gW1xuICAvKiBHb29nbGVib3QgKi9cbiAge1xuICAgIHRlc3Q6IFsvZ29vZ2xlYm90L2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnR29vZ2xlYm90JyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvZ29vZ2xlYm90XFwvKFxcZCsoXFwuXFxkKykpL2ksIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG5cbiAgLyogT3BlcmEgPCAxMy4wICovXG4gIHtcbiAgICB0ZXN0OiBbL29wZXJhL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnT3BlcmEnLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86b3BlcmEpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG5cbiAgLyogT3BlcmEgPiAxMy4wICovXG4gIHtcbiAgICB0ZXN0OiBbL29wclxcL3xvcGlvcy9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ09wZXJhJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86b3ByfG9waW9zKVtcXHMvXShcXFMrKS9pLCB1YSkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy9TYW1zdW5nQnJvd3Nlci9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ1NhbXN1bmcgSW50ZXJuZXQgZm9yIEFuZHJvaWQnLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86U2Ftc3VuZ0Jyb3dzZXIpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL1doYWxlL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnTkFWRVIgV2hhbGUgQnJvd3NlcicsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzp3aGFsZSlbXFxzL10oXFxkKyg/OlxcLlxcZCspKykvaSwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy9NWkJyb3dzZXIvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdNWiBCcm93c2VyJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86TVpCcm93c2VyKVtcXHMvXShcXGQrKD86XFwuXFxkKykrKS9pLCB1YSkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy9mb2N1cy9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ0ZvY3VzJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86Zm9jdXMpW1xccy9dKFxcZCsoPzpcXC5cXGQrKSspL2ksIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3N3aW5nL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnU3dpbmcnLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpzd2luZylbXFxzL10oXFxkKyg/OlxcLlxcZCspKykvaSwgdWEpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvY29hc3QvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdPcGVyYSBDb2FzdCcsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpjb2FzdClbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvb3B0XFwvXFxkKyg/Oi4/Xz9cXGQrKSsvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdPcGVyYSBUb3VjaCcsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/Om9wdClbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3lhYnJvd3Nlci9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ1lhbmRleCBCcm93c2VyJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86eWFicm93c2VyKVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvdWNicm93c2VyL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnVUMgQnJvd3NlcicsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzp1Y2Jyb3dzZXIpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL01heHRob258bXhpb3MvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdNYXh0aG9uJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdWEpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/Ok1heHRob258bXhpb3MpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL2VwaXBoYW55L2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnRXBpcGhhbnknLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86ZXBpcGhhbnkpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3B1ZmZpbi9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ1B1ZmZpbicsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpwdWZmaW4pW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3NsZWlwbmlyL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnU2xlaXBuaXInLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86c2xlaXBuaXIpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL2stbWVsZW9uL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnSy1NZWxlb24nLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86ay1tZWxlb24pW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL21pY3JvbWVzc2VuZ2VyL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnV2VDaGF0JyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86bWljcm9tZXNzZW5nZXIpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy9xcWJyb3dzZXIvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICgvcXFicm93c2VybGl0ZS9pKS50ZXN0KHVhKSA/ICdRUSBCcm93c2VyIExpdGUnIDogJ1FRIEJyb3dzZXInLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpxcWJyb3dzZXJsaXRlfHFxYnJvd3NlcilbL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL21zaWV8dHJpZGVudC9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ0ludGVybmV0IEV4cGxvcmVyJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86bXNpZSB8cnY6KShcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy9cXHNlZGdcXC8vaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdNaWNyb3NvZnQgRWRnZScsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvXFxzZWRnXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL2VkZyhbZWFdfGlvcykvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdNaWNyb3NvZnQgRWRnZScsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0U2Vjb25kTWF0Y2goL2VkZyhbZWFdfGlvcylcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvdml2YWxkaS9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ1ZpdmFsZGknLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC92aXZhbGRpXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3NlYW1vbmtleS9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ1NlYU1vbmtleScsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL3NlYW1vbmtleVxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy9zYWlsZmlzaC9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ1NhaWxmaXNoJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9zYWlsZmlzaFxccz9icm93c2VyXFwvKFxcZCsoXFwuXFxkKyk/KS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL3NpbGsvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdBbWF6b24gU2lsaycsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL3NpbGtcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvcGhhbnRvbS9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ1BoYW50b21KUycsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL3BoYW50b21qc1xcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy9zbGltZXJqcy9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ1NsaW1lckpTJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvc2xpbWVyanNcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvYmxhY2tiZXJyeXxcXGJiYlxcZCsvaSwgL3JpbVxcc3RhYmxldC9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ0JsYWNrQmVycnknLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvYmxhY2tiZXJyeVtcXGRdK1xcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgdGVzdDogWy8od2VifGhwdylbbzBdcy9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ1dlYk9TIEJyb3dzZXInLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSkgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvdyg/OmViKT9bbzBdc2Jyb3dzZXJcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvYmFkYS9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ0JhZGEnLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9kb2xmaW5cXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvdGl6ZW4vaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdUaXplbicsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OnRpemVuXFxzPyk/YnJvd3NlclxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvcXVwemlsbGEvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdRdXBaaWxsYScsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OnF1cHppbGxhKVtcXHMvXShcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpIHx8IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvZmlyZWZveHxpY2V3ZWFzZWx8Znhpb3MvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdGaXJlZm94JyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86ZmlyZWZveHxpY2V3ZWFzZWx8Znhpb3MpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL2VsZWN0cm9uL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnRWxlY3Ryb24nLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzplbGVjdHJvbilcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRlc3Q6IFsvTWl1aUJyb3dzZXIvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdNaXVpJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86TWl1aUJyb3dzZXIpW1xccy9dKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL2Nocm9taXVtL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnQ2hyb21pdW0nLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpjaHJvbWl1bSlbXFxzL10oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKSB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL2Nocm9tZXxjcmlvc3xjcm1vL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnQ2hyb21lJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKD86Y2hyb21lfGNyaW9zfGNybW8pXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0ZXN0OiBbL0dTQS9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgYnJvd3NlciA9IHtcbiAgICAgICAgbmFtZTogJ0dvb2dsZSBTZWFyY2gnLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC8oPzpHU0EpXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG5cbiAgLyogQW5kcm9pZCBCcm93c2VyICovXG4gIHtcbiAgICB0ZXN0KHBhcnNlcikge1xuICAgICAgY29uc3Qgbm90TGlrZUFuZHJvaWQgPSAhcGFyc2VyLnRlc3QoL2xpa2UgYW5kcm9pZC9pKTtcbiAgICAgIGNvbnN0IGJ1dEFuZHJvaWQgPSBwYXJzZXIudGVzdCgvYW5kcm9pZC9pKTtcbiAgICAgIHJldHVybiBub3RMaWtlQW5kcm9pZCAmJiBidXRBbmRyb2lkO1xuICAgIH0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IGJyb3dzZXIgPSB7XG4gICAgICAgIG5hbWU6ICdBbmRyb2lkIEJyb3dzZXInLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKGNvbW1vblZlcnNpb25JZGVudGlmaWVyLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGJyb3dzZXIudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIH0sXG4gIH0sXG5cbiAgLyogUGxheVN0YXRpb24gNCAqL1xuICB7XG4gICAgdGVzdDogWy9wbGF5c3RhdGlvbiA0L2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnUGxheVN0YXRpb24gNCcsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goY29tbW9uVmVyc2lvbklkZW50aWZpZXIsIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgYnJvd3Nlci52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgfSxcbiAgfSxcblxuICAvKiBTYWZhcmkgKi9cbiAge1xuICAgIHRlc3Q6IFsvc2FmYXJpfGFwcGxld2Via2l0L2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBicm93c2VyID0ge1xuICAgICAgICBuYW1lOiAnU2FmYXJpJyxcbiAgICAgIH07XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaChjb21tb25WZXJzaW9uSWRlbnRpZmllciwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBicm93c2VyLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICB9LFxuICB9LFxuXG4gIC8qIFNvbWV0aGluZyBlbHNlICovXG4gIHtcbiAgICB0ZXN0OiBbLy4qL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICAvKiBIZXJlIHdlIHRyeSB0byBtYWtlIHN1cmUgdGhhdCB0aGVyZSBhcmUgZXhwbGljaXQgZGV0YWlscyBhYm91dCB0aGUgZGV2aWNlXG4gICAgICAgKiBpbiBvcmRlciB0byBkZWNpZGUgd2hhdCByZWdleHAgZXhhY3RseSB3ZSB3YW50IHRvIGFwcGx5XG4gICAgICAgKiAoYXMgdGhlcmUgaXMgYSBzcGVjaWZpYyBkZWNpc2lvbiBiYXNlZCBvbiB0aGF0IGNvbmNsdXNpb24pXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IHJlZ2V4cFdpdGhvdXREZXZpY2VTcGVjID0gL14oLiopXFwvKC4qKSAvO1xuICAgICAgY29uc3QgcmVnZXhwV2l0aERldmljZVNwZWMgPSAvXiguKilcXC8oLiopWyBcXHRdXFwoKC4qKS87XG4gICAgICBjb25zdCBoYXNEZXZpY2VTcGVjID0gdWEuc2VhcmNoKCdcXFxcKCcpICE9PSAtMTtcbiAgICAgIGNvbnN0IHJlZ2V4cCA9IGhhc0RldmljZVNwZWMgPyByZWdleHBXaXRoRGV2aWNlU3BlYyA6IHJlZ2V4cFdpdGhvdXREZXZpY2VTcGVjO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogVXRpbHMuZ2V0Rmlyc3RNYXRjaChyZWdleHAsIHVhKSxcbiAgICAgICAgdmVyc2lvbjogVXRpbHMuZ2V0U2Vjb25kTWF0Y2gocmVnZXhwLCB1YSksXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5dO1xuXG5leHBvcnQgZGVmYXVsdCBicm93c2Vyc0xpc3Q7XG4iLCJpbXBvcnQgVXRpbHMgZnJvbSAnLi91dGlscy5qcyc7XG5pbXBvcnQgeyBPU19NQVAgfSBmcm9tICcuL2NvbnN0YW50cy5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IFtcbiAgLyogUm9rdSAqL1xuICB7XG4gICAgdGVzdDogWy9Sb2t1XFwvRFZQL10sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9Sb2t1XFwvRFZQLShcXGQrXFwuXFxkKykvaSwgdWEpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogT1NfTUFQLlJva3UsXG4gICAgICAgIHZlcnNpb24sXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogV2luZG93cyBQaG9uZSAqL1xuICB7XG4gICAgdGVzdDogWy93aW5kb3dzIHBob25lL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvd2luZG93cyBwaG9uZSAoPzpvcyk/XFxzPyhcXGQrKFxcLlxcZCspKikvaSwgdWEpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogT1NfTUFQLldpbmRvd3NQaG9uZSxcbiAgICAgICAgdmVyc2lvbixcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBXaW5kb3dzICovXG4gIHtcbiAgICB0ZXN0OiBbL3dpbmRvd3MgL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvV2luZG93cyAoKE5UfFhQKSggXFxkXFxkPy5cXGQpPykvaSwgdWEpO1xuICAgICAgY29uc3QgdmVyc2lvbk5hbWUgPSBVdGlscy5nZXRXaW5kb3dzVmVyc2lvbk5hbWUodmVyc2lvbik7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IE9TX01BUC5XaW5kb3dzLFxuICAgICAgICB2ZXJzaW9uLFxuICAgICAgICB2ZXJzaW9uTmFtZSxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBGaXJlZm94IG9uIGlQYWQgKi9cbiAge1xuICAgIHRlc3Q6IFsvTWFjaW50b3NoKC4qPykgRnhpT1MoLio/KVxcLy9dLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6IE9TX01BUC5pT1MsXG4gICAgICB9O1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldFNlY29uZE1hdGNoKC8oVmVyc2lvblxcLykoXFxkW1xcZC5dKykvLCB1YSk7XG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICByZXN1bHQudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogbWFjT1MgKi9cbiAge1xuICAgIHRlc3Q6IFsvbWFjaW50b3NoL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvbWFjIG9zIHggKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSkucmVwbGFjZSgvW19cXHNdL2csICcuJyk7XG4gICAgICBjb25zdCB2ZXJzaW9uTmFtZSA9IFV0aWxzLmdldE1hY09TVmVyc2lvbk5hbWUodmVyc2lvbik7XG5cbiAgICAgIGNvbnN0IG9zID0ge1xuICAgICAgICBuYW1lOiBPU19NQVAuTWFjT1MsXG4gICAgICAgIHZlcnNpb24sXG4gICAgICB9O1xuICAgICAgaWYgKHZlcnNpb25OYW1lKSB7XG4gICAgICAgIG9zLnZlcnNpb25OYW1lID0gdmVyc2lvbk5hbWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gb3M7XG4gICAgfSxcbiAgfSxcblxuICAvKiBpT1MgKi9cbiAge1xuICAgIHRlc3Q6IFsvKGlwb2R8aXBob25lfGlwYWQpL2ldLFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvb3MgKFxcZCsoW19cXHNdXFxkKykqKSBsaWtlIG1hYyBvcyB4L2ksIHVhKS5yZXBsYWNlKC9bX1xcc10vZywgJy4nKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogT1NfTUFQLmlPUyxcbiAgICAgICAgdmVyc2lvbixcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBBbmRyb2lkICovXG4gIHtcbiAgICB0ZXN0KHBhcnNlcikge1xuICAgICAgY29uc3Qgbm90TGlrZUFuZHJvaWQgPSAhcGFyc2VyLnRlc3QoL2xpa2UgYW5kcm9pZC9pKTtcbiAgICAgIGNvbnN0IGJ1dEFuZHJvaWQgPSBwYXJzZXIudGVzdCgvYW5kcm9pZC9pKTtcbiAgICAgIHJldHVybiBub3RMaWtlQW5kcm9pZCAmJiBidXRBbmRyb2lkO1xuICAgIH0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC9hbmRyb2lkW1xccy8tXShcXGQrKFxcLlxcZCspKikvaSwgdWEpO1xuICAgICAgY29uc3QgdmVyc2lvbk5hbWUgPSBVdGlscy5nZXRBbmRyb2lkVmVyc2lvbk5hbWUodmVyc2lvbik7XG4gICAgICBjb25zdCBvcyA9IHtcbiAgICAgICAgbmFtZTogT1NfTUFQLkFuZHJvaWQsXG4gICAgICAgIHZlcnNpb24sXG4gICAgICB9O1xuICAgICAgaWYgKHZlcnNpb25OYW1lKSB7XG4gICAgICAgIG9zLnZlcnNpb25OYW1lID0gdmVyc2lvbk5hbWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gb3M7XG4gICAgfSxcbiAgfSxcblxuICAvKiBXZWJPUyAqL1xuICB7XG4gICAgdGVzdDogWy8od2VifGhwdylbbzBdcy9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goLyg/OndlYnxocHcpW28wXXNcXC8oXFxkKyhcXC5cXGQrKSopL2ksIHVhKTtcbiAgICAgIGNvbnN0IG9zID0ge1xuICAgICAgICBuYW1lOiBPU19NQVAuV2ViT1MsXG4gICAgICB9O1xuXG4gICAgICBpZiAodmVyc2lvbiAmJiB2ZXJzaW9uLmxlbmd0aCkge1xuICAgICAgICBvcy52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvcztcbiAgICB9LFxuICB9LFxuXG4gIC8qIEJsYWNrQmVycnkgKi9cbiAge1xuICAgIHRlc3Q6IFsvYmxhY2tiZXJyeXxcXGJiYlxcZCsvaSwgL3JpbVxcc3RhYmxldC9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL3JpbVxcc3RhYmxldFxcc29zXFxzKFxcZCsoXFwuXFxkKykqKS9pLCB1YSlcbiAgICAgICAgfHwgVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvYmxhY2tiZXJyeVxcZCtcXC8oXFxkKyhbX1xcc11cXGQrKSopL2ksIHVhKVxuICAgICAgICB8fCBVdGlscy5nZXRGaXJzdE1hdGNoKC9cXGJiYihcXGQrKS9pLCB1YSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IE9TX01BUC5CbGFja0JlcnJ5LFxuICAgICAgICB2ZXJzaW9uLFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIEJhZGEgKi9cbiAge1xuICAgIHRlc3Q6IFsvYmFkYS9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL2JhZGFcXC8oXFxkKyhcXC5cXGQrKSopL2ksIHVhKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogT1NfTUFQLkJhZGEsXG4gICAgICAgIHZlcnNpb24sXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogVGl6ZW4gKi9cbiAge1xuICAgIHRlc3Q6IFsvdGl6ZW4vaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC90aXplblsvXFxzXShcXGQrKFxcLlxcZCspKikvaSwgdWEpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBPU19NQVAuVGl6ZW4sXG4gICAgICAgIHZlcnNpb24sXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogTGludXggKi9cbiAge1xuICAgIHRlc3Q6IFsvbGludXgvaV0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBPU19NQVAuTGludXgsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogQ2hyb21lIE9TICovXG4gIHtcbiAgICB0ZXN0OiBbL0NyT1MvXSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IE9TX01BUC5DaHJvbWVPUyxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBQbGF5c3RhdGlvbiA0ICovXG4gIHtcbiAgICB0ZXN0OiBbL1BsYXlTdGF0aW9uIDQvXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL1BsYXlTdGF0aW9uIDRbL1xcc10oXFxkKyhcXC5cXGQrKSopL2ksIHVhKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IE9TX01BUC5QbGF5U3RhdGlvbjQsXG4gICAgICAgIHZlcnNpb24sXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5dO1xuIiwiaW1wb3J0IFV0aWxzIGZyb20gJy4vdXRpbHMuanMnO1xuaW1wb3J0IHsgUExBVEZPUk1TX01BUCB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcblxuLypcbiAqIFRhYmxldHMgZ28gZmlyc3Qgc2luY2UgdXN1YWxseSB0aGV5IGhhdmUgbW9yZSBzcGVjaWZpY1xuICogc2lnbnMgdG8gZGV0ZWN0LlxuICovXG5cbmV4cG9ydCBkZWZhdWx0IFtcbiAgLyogR29vZ2xlYm90ICovXG4gIHtcbiAgICB0ZXN0OiBbL2dvb2dsZWJvdC9pXSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdib3QnLFxuICAgICAgICB2ZW5kb3I6ICdHb29nbGUnLFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIEh1YXdlaSAqL1xuICB7XG4gICAgdGVzdDogWy9odWF3ZWkvaV0sXG4gICAgZGVzY3JpYmUodWEpIHtcbiAgICAgIGNvbnN0IG1vZGVsID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvKGNhbi1sMDEpL2ksIHVhKSAmJiAnTm92YSc7XG4gICAgICBjb25zdCBwbGF0Zm9ybSA9IHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC5tb2JpbGUsXG4gICAgICAgIHZlbmRvcjogJ0h1YXdlaScsXG4gICAgICB9O1xuICAgICAgaWYgKG1vZGVsKSB7XG4gICAgICAgIHBsYXRmb3JtLm1vZGVsID0gbW9kZWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGxhdGZvcm07XG4gICAgfSxcbiAgfSxcblxuICAvKiBOZXh1cyBUYWJsZXQgKi9cbiAge1xuICAgIHRlc3Q6IFsvbmV4dXNcXHMqKD86N3w4fDl8MTApLiovaV0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLnRhYmxldCxcbiAgICAgICAgdmVuZG9yOiAnTmV4dXMnLFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIGlQYWQgKi9cbiAge1xuICAgIHRlc3Q6IFsvaXBhZC9pXSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAudGFibGV0LFxuICAgICAgICB2ZW5kb3I6ICdBcHBsZScsXG4gICAgICAgIG1vZGVsOiAnaVBhZCcsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogRmlyZWZveCBvbiBpUGFkICovXG4gIHtcbiAgICB0ZXN0OiBbL01hY2ludG9zaCguKj8pIEZ4aU9TKC4qPylcXC8vXSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAudGFibGV0LFxuICAgICAgICB2ZW5kb3I6ICdBcHBsZScsXG4gICAgICAgIG1vZGVsOiAnaVBhZCcsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogQW1hem9uIEtpbmRsZSBGaXJlICovXG4gIHtcbiAgICB0ZXN0OiBbL2tmdHQgYnVpbGQvaV0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLnRhYmxldCxcbiAgICAgICAgdmVuZG9yOiAnQW1hem9uJyxcbiAgICAgICAgbW9kZWw6ICdLaW5kbGUgRmlyZSBIRCA3JyxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBBbm90aGVyIEFtYXpvbiBUYWJsZXQgd2l0aCBTaWxrICovXG4gIHtcbiAgICB0ZXN0OiBbL3NpbGsvaV0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLnRhYmxldCxcbiAgICAgICAgdmVuZG9yOiAnQW1hem9uJyxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBUYWJsZXQgKi9cbiAge1xuICAgIHRlc3Q6IFsvdGFibGV0KD8hIHBjKS9pXSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAudGFibGV0LFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIGlQb2QvaVBob25lICovXG4gIHtcbiAgICB0ZXN0KHBhcnNlcikge1xuICAgICAgY29uc3QgaURldmljZSA9IHBhcnNlci50ZXN0KC9pcG9kfGlwaG9uZS9pKTtcbiAgICAgIGNvbnN0IGxpa2VJRGV2aWNlID0gcGFyc2VyLnRlc3QoL2xpa2UgKGlwb2R8aXBob25lKS9pKTtcbiAgICAgIHJldHVybiBpRGV2aWNlICYmICFsaWtlSURldmljZTtcbiAgICB9LFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBtb2RlbCA9IFV0aWxzLmdldEZpcnN0TWF0Y2goLyhpcG9kfGlwaG9uZSkvaSwgdWEpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC5tb2JpbGUsXG4gICAgICAgIHZlbmRvcjogJ0FwcGxlJyxcbiAgICAgICAgbW9kZWwsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogTmV4dXMgTW9iaWxlICovXG4gIHtcbiAgICB0ZXN0OiBbL25leHVzXFxzKlswLTZdLiovaSwgL2dhbGF4eSBuZXh1cy9pXSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAubW9iaWxlLFxuICAgICAgICB2ZW5kb3I6ICdOZXh1cycsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogTW9iaWxlICovXG4gIHtcbiAgICB0ZXN0OiBbL1teLV1tb2JpL2ldLFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC5tb2JpbGUsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogQmxhY2tCZXJyeSAqL1xuICB7XG4gICAgdGVzdChwYXJzZXIpIHtcbiAgICAgIHJldHVybiBwYXJzZXIuZ2V0QnJvd3Nlck5hbWUodHJ1ZSkgPT09ICdibGFja2JlcnJ5JztcbiAgICB9LFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC5tb2JpbGUsXG4gICAgICAgIHZlbmRvcjogJ0JsYWNrQmVycnknLFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIEJhZGEgKi9cbiAge1xuICAgIHRlc3QocGFyc2VyKSB7XG4gICAgICByZXR1cm4gcGFyc2VyLmdldEJyb3dzZXJOYW1lKHRydWUpID09PSAnYmFkYSc7XG4gICAgfSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAubW9iaWxlLFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIFdpbmRvd3MgUGhvbmUgKi9cbiAge1xuICAgIHRlc3QocGFyc2VyKSB7XG4gICAgICByZXR1cm4gcGFyc2VyLmdldEJyb3dzZXJOYW1lKCkgPT09ICd3aW5kb3dzIHBob25lJztcbiAgICB9LFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC5tb2JpbGUsXG4gICAgICAgIHZlbmRvcjogJ01pY3Jvc29mdCcsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogQW5kcm9pZCBUYWJsZXQgKi9cbiAge1xuICAgIHRlc3QocGFyc2VyKSB7XG4gICAgICBjb25zdCBvc01ham9yVmVyc2lvbiA9IE51bWJlcihTdHJpbmcocGFyc2VyLmdldE9TVmVyc2lvbigpKS5zcGxpdCgnLicpWzBdKTtcbiAgICAgIHJldHVybiBwYXJzZXIuZ2V0T1NOYW1lKHRydWUpID09PSAnYW5kcm9pZCcgJiYgKG9zTWFqb3JWZXJzaW9uID49IDMpO1xuICAgIH0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLnRhYmxldCxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBBbmRyb2lkIE1vYmlsZSAqL1xuICB7XG4gICAgdGVzdChwYXJzZXIpIHtcbiAgICAgIHJldHVybiBwYXJzZXIuZ2V0T1NOYW1lKHRydWUpID09PSAnYW5kcm9pZCc7XG4gICAgfSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAubW9iaWxlLFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIGRlc2t0b3AgKi9cbiAge1xuICAgIHRlc3QocGFyc2VyKSB7XG4gICAgICByZXR1cm4gcGFyc2VyLmdldE9TTmFtZSh0cnVlKSA9PT0gJ21hY29zJztcbiAgICB9LFxuICAgIGRlc2NyaWJlKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogUExBVEZPUk1TX01BUC5kZXNrdG9wLFxuICAgICAgICB2ZW5kb3I6ICdBcHBsZScsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogV2luZG93cyAqL1xuICB7XG4gICAgdGVzdChwYXJzZXIpIHtcbiAgICAgIHJldHVybiBwYXJzZXIuZ2V0T1NOYW1lKHRydWUpID09PSAnd2luZG93cyc7XG4gICAgfSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAuZGVza3RvcCxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICAvKiBMaW51eCAqL1xuICB7XG4gICAgdGVzdChwYXJzZXIpIHtcbiAgICAgIHJldHVybiBwYXJzZXIuZ2V0T1NOYW1lKHRydWUpID09PSAnbGludXgnO1xuICAgIH0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBQTEFURk9STVNfTUFQLmRlc2t0b3AsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogUGxheVN0YXRpb24gNCAqL1xuICB7XG4gICAgdGVzdChwYXJzZXIpIHtcbiAgICAgIHJldHVybiBwYXJzZXIuZ2V0T1NOYW1lKHRydWUpID09PSAncGxheXN0YXRpb24gNCc7XG4gICAgfSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAudHYsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAgLyogUm9rdSAqL1xuICB7XG4gICAgdGVzdChwYXJzZXIpIHtcbiAgICAgIHJldHVybiBwYXJzZXIuZ2V0T1NOYW1lKHRydWUpID09PSAncm9rdSc7XG4gICAgfSxcbiAgICBkZXNjcmliZSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFBMQVRGT1JNU19NQVAudHYsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5dO1xuIiwiaW1wb3J0IFV0aWxzIGZyb20gJy4vdXRpbHMuanMnO1xuaW1wb3J0IHsgRU5HSU5FX01BUCB9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcblxuLypcbiAqIE1vcmUgc3BlY2lmaWMgZ29lcyBmaXJzdFxuICovXG5leHBvcnQgZGVmYXVsdCBbXG4gIC8qIEVkZ2VIVE1MICovXG4gIHtcbiAgICB0ZXN0KHBhcnNlcikge1xuICAgICAgcmV0dXJuIHBhcnNlci5nZXRCcm93c2VyTmFtZSh0cnVlKSA9PT0gJ21pY3Jvc29mdCBlZGdlJztcbiAgICB9LFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBpc0JsaW5rQmFzZWQgPSAvXFxzZWRnXFwvL2kudGVzdCh1YSk7XG5cbiAgICAgIC8vIHJldHVybiBibGluayBpZiBpdCdzIGJsaW5rLWJhc2VkIG9uZVxuICAgICAgaWYgKGlzQmxpbmtCYXNlZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG5hbWU6IEVOR0lORV9NQVAuQmxpbmssXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIG90aGVyd2lzZSBtYXRjaCB0aGUgdmVyc2lvbiBhbmQgcmV0dXJuIEVkZ2VIVE1MXG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvZWRnZVxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBFTkdJTkVfTUFQLkVkZ2VIVE1MLFxuICAgICAgICB2ZXJzaW9uLFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIFRyaWRlbnQgKi9cbiAge1xuICAgIHRlc3Q6IFsvdHJpZGVudC9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgZW5naW5lID0ge1xuICAgICAgICBuYW1lOiBFTkdJTkVfTUFQLlRyaWRlbnQsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB2ZXJzaW9uID0gVXRpbHMuZ2V0Rmlyc3RNYXRjaCgvdHJpZGVudFxcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBlbmdpbmUudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBlbmdpbmU7XG4gICAgfSxcbiAgfSxcblxuICAvKiBQcmVzdG8gKi9cbiAge1xuICAgIHRlc3QocGFyc2VyKSB7XG4gICAgICByZXR1cm4gcGFyc2VyLnRlc3QoL3ByZXN0by9pKTtcbiAgICB9LFxuICAgIGRlc2NyaWJlKHVhKSB7XG4gICAgICBjb25zdCBlbmdpbmUgPSB7XG4gICAgICAgIG5hbWU6IEVOR0lORV9NQVAuUHJlc3RvLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL3ByZXN0b1xcLyhcXGQrKFxcLj9fP1xcZCspKykvaSwgdWEpO1xuXG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBlbmdpbmUudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBlbmdpbmU7XG4gICAgfSxcbiAgfSxcblxuICAvKiBHZWNrbyAqL1xuICB7XG4gICAgdGVzdChwYXJzZXIpIHtcbiAgICAgIGNvbnN0IGlzR2Vja28gPSBwYXJzZXIudGVzdCgvZ2Vja28vaSk7XG4gICAgICBjb25zdCBsaWtlR2Vja28gPSBwYXJzZXIudGVzdCgvbGlrZSBnZWNrby9pKTtcbiAgICAgIHJldHVybiBpc0dlY2tvICYmICFsaWtlR2Vja287XG4gICAgfSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgZW5naW5lID0ge1xuICAgICAgICBuYW1lOiBFTkdJTkVfTUFQLkdlY2tvLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgdmVyc2lvbiA9IFV0aWxzLmdldEZpcnN0TWF0Y2goL2dlY2tvXFwvKFxcZCsoXFwuP18/XFxkKykrKS9pLCB1YSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGVuZ2luZS52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGVuZ2luZTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIEJsaW5rICovXG4gIHtcbiAgICB0ZXN0OiBbLyhhcHBsZSk/d2Via2l0XFwvNTM3XFwuMzYvaV0sXG4gICAgZGVzY3JpYmUoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBFTkdJTkVfTUFQLkJsaW5rLFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIC8qIFdlYktpdCAqL1xuICB7XG4gICAgdGVzdDogWy8oYXBwbGUpP3dlYmtpdC9pXSxcbiAgICBkZXNjcmliZSh1YSkge1xuICAgICAgY29uc3QgZW5naW5lID0ge1xuICAgICAgICBuYW1lOiBFTkdJTkVfTUFQLldlYktpdCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHZlcnNpb24gPSBVdGlscy5nZXRGaXJzdE1hdGNoKC93ZWJraXRcXC8oXFxkKyhcXC4/Xz9cXGQrKSspL2ksIHVhKTtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgZW5naW5lLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZW5naW5lO1xuICAgIH0sXG4gIH0sXG5dO1xuIiwiaW1wb3J0IGJyb3dzZXJQYXJzZXJzTGlzdCBmcm9tICcuL3BhcnNlci1icm93c2Vycy5qcyc7XG5pbXBvcnQgb3NQYXJzZXJzTGlzdCBmcm9tICcuL3BhcnNlci1vcy5qcyc7XG5pbXBvcnQgcGxhdGZvcm1QYXJzZXJzTGlzdCBmcm9tICcuL3BhcnNlci1wbGF0Zm9ybXMuanMnO1xuaW1wb3J0IGVuZ2luZXNQYXJzZXJzTGlzdCBmcm9tICcuL3BhcnNlci1lbmdpbmVzLmpzJztcbmltcG9ydCBVdGlscyBmcm9tICcuL3V0aWxzLmpzJztcblxuLyoqXG4gKiBUaGUgbWFpbiBjbGFzcyB0aGF0IGFycmFuZ2VzIHRoZSB3aG9sZSBwYXJzaW5nIHByb2Nlc3MuXG4gKi9cbmNsYXNzIFBhcnNlciB7XG4gIC8qKlxuICAgKiBDcmVhdGUgaW5zdGFuY2Ugb2YgUGFyc2VyXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBVQSBVc2VyLUFnZW50IHN0cmluZ1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtza2lwUGFyc2luZz1mYWxzZV0gcGFyc2VyIGNhbiBza2lwIHBhcnNpbmcgaW4gcHVycG9zZSBvZiBwZXJmb3JtYW5jZVxuICAgKiBpbXByb3ZlbWVudHMgaWYgeW91IG5lZWQgdG8gbWFrZSBhIG1vcmUgcGFydGljdWxhciBwYXJzaW5nXG4gICAqIGxpa2Uge0BsaW5rIFBhcnNlciNwYXJzZUJyb3dzZXJ9IG9yIHtAbGluayBQYXJzZXIjcGFyc2VQbGF0Zm9ybX1cbiAgICpcbiAgICogQHRocm93IHtFcnJvcn0gaW4gY2FzZSBvZiBlbXB0eSBVQSBTdHJpbmdcbiAgICpcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3RvcihVQSwgc2tpcFBhcnNpbmcgPSBmYWxzZSkge1xuICAgIGlmIChVQSA9PT0gdm9pZCAoMCkgfHwgVUEgPT09IG51bGwgfHwgVUEgPT09ICcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyQWdlbnQgcGFyYW1ldGVyIGNhbid0IGJlIGVtcHR5XCIpO1xuICAgIH1cblxuICAgIHRoaXMuX3VhID0gVUE7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZWRlZiBQYXJzZWRSZXN1bHRcbiAgICAgKiBAcHJvcGVydHkge09iamVjdH0gYnJvd3NlclxuICAgICAqIEBwcm9wZXJ0eSB7U3RyaW5nfHVuZGVmaW5lZH0gW2Jyb3dzZXIubmFtZV1cbiAgICAgKiBCcm93c2VyIG5hbWUsIGxpa2UgYFwiQ2hyb21lXCJgIG9yIGBcIkludGVybmV0IEV4cGxvcmVyXCJgXG4gICAgICogQHByb3BlcnR5IHtTdHJpbmd8dW5kZWZpbmVkfSBbYnJvd3Nlci52ZXJzaW9uXSBCcm93c2VyIHZlcnNpb24gYXMgYSBTdHJpbmcgYFwiMTIuMDEuNDUzMzQuMTBcImBcbiAgICAgKiBAcHJvcGVydHkge09iamVjdH0gb3NcbiAgICAgKiBAcHJvcGVydHkge1N0cmluZ3x1bmRlZmluZWR9IFtvcy5uYW1lXSBPUyBuYW1lLCBsaWtlIGBcIldpbmRvd3NcImAgb3IgYFwibWFjT1NcImBcbiAgICAgKiBAcHJvcGVydHkge1N0cmluZ3x1bmRlZmluZWR9IFtvcy52ZXJzaW9uXSBPUyB2ZXJzaW9uLCBsaWtlIGBcIk5UIDUuMVwiYCBvciBgXCIxMC4xMS4xXCJgXG4gICAgICogQHByb3BlcnR5IHtTdHJpbmd8dW5kZWZpbmVkfSBbb3MudmVyc2lvbk5hbWVdIE9TIG5hbWUsIGxpa2UgYFwiWFBcImAgb3IgYFwiSGlnaCBTaWVycmFcImBcbiAgICAgKiBAcHJvcGVydHkge09iamVjdH0gcGxhdGZvcm1cbiAgICAgKiBAcHJvcGVydHkge1N0cmluZ3x1bmRlZmluZWR9IFtwbGF0Zm9ybS50eXBlXVxuICAgICAqIHBsYXRmb3JtIHR5cGUsIGNhbiBiZSBlaXRoZXIgYFwiZGVza3RvcFwiYCwgYFwidGFibGV0XCJgIG9yIGBcIm1vYmlsZVwiYFxuICAgICAqIEBwcm9wZXJ0eSB7U3RyaW5nfHVuZGVmaW5lZH0gW3BsYXRmb3JtLnZlbmRvcl0gVmVuZG9yIG9mIHRoZSBkZXZpY2UsXG4gICAgICogbGlrZSBgXCJBcHBsZVwiYCBvciBgXCJTYW1zdW5nXCJgXG4gICAgICogQHByb3BlcnR5IHtTdHJpbmd8dW5kZWZpbmVkfSBbcGxhdGZvcm0ubW9kZWxdIERldmljZSBtb2RlbCxcbiAgICAgKiBsaWtlIGBcImlQaG9uZVwiYCBvciBgXCJLaW5kbGUgRmlyZSBIRCA3XCJgXG4gICAgICogQHByb3BlcnR5IHtPYmplY3R9IGVuZ2luZVxuICAgICAqIEBwcm9wZXJ0eSB7U3RyaW5nfHVuZGVmaW5lZH0gW2VuZ2luZS5uYW1lXVxuICAgICAqIENhbiBiZSBhbnkgb2YgdGhpczogYFdlYktpdGAsIGBCbGlua2AsIGBHZWNrb2AsIGBUcmlkZW50YCwgYFByZXN0b2AsIGBFZGdlSFRNTGBcbiAgICAgKiBAcHJvcGVydHkge1N0cmluZ3x1bmRlZmluZWR9IFtlbmdpbmUudmVyc2lvbl0gU3RyaW5nIHZlcnNpb24gb2YgdGhlIGVuZ2luZVxuICAgICAqL1xuICAgIHRoaXMucGFyc2VkUmVzdWx0ID0ge307XG5cbiAgICBpZiAoc2tpcFBhcnNpbmcgIT09IHRydWUpIHtcbiAgICAgIHRoaXMucGFyc2UoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IFVzZXJBZ2VudCBzdHJpbmcgb2YgY3VycmVudCBQYXJzZXIgaW5zdGFuY2VcbiAgICogQHJldHVybiB7U3RyaW5nfSBVc2VyLUFnZW50IFN0cmluZyBvZiB0aGUgY3VycmVudCA8UGFyc2VyPiBvYmplY3RcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0VUEoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VhO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlc3QgYSBVQSBzdHJpbmcgZm9yIGEgcmVnZXhwXG4gICAqIEBwYXJhbSB7UmVnRXhwfSByZWdleFxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgdGVzdChyZWdleCkge1xuICAgIHJldHVybiByZWdleC50ZXN0KHRoaXMuX3VhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcGFyc2VkIGJyb3dzZXIgb2JqZWN0XG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHBhcnNlQnJvd3NlcigpIHtcbiAgICB0aGlzLnBhcnNlZFJlc3VsdC5icm93c2VyID0ge307XG5cbiAgICBjb25zdCBicm93c2VyRGVzY3JpcHRvciA9IFV0aWxzLmZpbmQoYnJvd3NlclBhcnNlcnNMaXN0LCAoX2Jyb3dzZXIpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgX2Jyb3dzZXIudGVzdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gX2Jyb3dzZXIudGVzdCh0aGlzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKF9icm93c2VyLnRlc3QgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICByZXR1cm4gX2Jyb3dzZXIudGVzdC5zb21lKGNvbmRpdGlvbiA9PiB0aGlzLnRlc3QoY29uZGl0aW9uKSk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkJyb3dzZXIncyB0ZXN0IGZ1bmN0aW9uIGlzIG5vdCB2YWxpZFwiKTtcbiAgICB9KTtcblxuICAgIGlmIChicm93c2VyRGVzY3JpcHRvcikge1xuICAgICAgdGhpcy5wYXJzZWRSZXN1bHQuYnJvd3NlciA9IGJyb3dzZXJEZXNjcmlwdG9yLmRlc2NyaWJlKHRoaXMuZ2V0VUEoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucGFyc2VkUmVzdWx0LmJyb3dzZXI7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHBhcnNlZCBicm93c2VyIG9iamVjdFxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGdldEJyb3dzZXIoKSB7XG4gICAgaWYgKHRoaXMucGFyc2VkUmVzdWx0LmJyb3dzZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLnBhcnNlZFJlc3VsdC5icm93c2VyO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnBhcnNlQnJvd3NlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBicm93c2VyJ3MgbmFtZVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IEJyb3dzZXIncyBuYW1lIG9yIGFuIGVtcHR5IHN0cmluZ1xuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRCcm93c2VyTmFtZSh0b0xvd2VyQ2FzZSkge1xuICAgIGlmICh0b0xvd2VyQ2FzZSkge1xuICAgICAgcmV0dXJuIFN0cmluZyh0aGlzLmdldEJyb3dzZXIoKS5uYW1lKS50b0xvd2VyQ2FzZSgpIHx8ICcnO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5nZXRCcm93c2VyKCkubmFtZSB8fCAnJztcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEdldCBicm93c2VyJ3MgdmVyc2lvblxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IHZlcnNpb24gb2YgYnJvd3NlclxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBnZXRCcm93c2VyVmVyc2lvbigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRCcm93c2VyKCkudmVyc2lvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgT1NcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB0aGlzLmdldE9TKCk7XG4gICAqIHtcbiAgICogICBuYW1lOiAnbWFjT1MnLFxuICAgKiAgIHZlcnNpb246ICcxMC4xMS4xMidcbiAgICogfVxuICAgKi9cbiAgZ2V0T1MoKSB7XG4gICAgaWYgKHRoaXMucGFyc2VkUmVzdWx0Lm9zKSB7XG4gICAgICByZXR1cm4gdGhpcy5wYXJzZWRSZXN1bHQub3M7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucGFyc2VPUygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIE9TIGFuZCBzYXZlIGl0IHRvIHRoaXMucGFyc2VkUmVzdWx0Lm9zXG4gICAqIEByZXR1cm4geyp8e319XG4gICAqL1xuICBwYXJzZU9TKCkge1xuICAgIHRoaXMucGFyc2VkUmVzdWx0Lm9zID0ge307XG5cbiAgICBjb25zdCBvcyA9IFV0aWxzLmZpbmQob3NQYXJzZXJzTGlzdCwgKF9vcykgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBfb3MudGVzdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gX29zLnRlc3QodGhpcyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChfb3MudGVzdCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIHJldHVybiBfb3MudGVzdC5zb21lKGNvbmRpdGlvbiA9PiB0aGlzLnRlc3QoY29uZGl0aW9uKSk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkJyb3dzZXIncyB0ZXN0IGZ1bmN0aW9uIGlzIG5vdCB2YWxpZFwiKTtcbiAgICB9KTtcblxuICAgIGlmIChvcykge1xuICAgICAgdGhpcy5wYXJzZWRSZXN1bHQub3MgPSBvcy5kZXNjcmliZSh0aGlzLmdldFVBKCkpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnBhcnNlZFJlc3VsdC5vcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgT1MgbmFtZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt0b0xvd2VyQ2FzZV0gcmV0dXJuIGxvd2VyLWNhc2VkIHZhbHVlXG4gICAqIEByZXR1cm4ge1N0cmluZ30gbmFtZSBvZiB0aGUgT1Mg4oCUIG1hY09TLCBXaW5kb3dzLCBMaW51eCwgZXRjLlxuICAgKi9cbiAgZ2V0T1NOYW1lKHRvTG93ZXJDYXNlKSB7XG4gICAgY29uc3QgeyBuYW1lIH0gPSB0aGlzLmdldE9TKCk7XG5cbiAgICBpZiAodG9Mb3dlckNhc2UpIHtcbiAgICAgIHJldHVybiBTdHJpbmcobmFtZSkudG9Mb3dlckNhc2UoKSB8fCAnJztcbiAgICB9XG5cbiAgICByZXR1cm4gbmFtZSB8fCAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgT1MgdmVyc2lvblxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IGZ1bGwgdmVyc2lvbiB3aXRoIGRvdHMgKCcxMC4xMS4xMicsICc1LjYnLCBldGMpXG4gICAqL1xuICBnZXRPU1ZlcnNpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0T1MoKS52ZXJzaW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwYXJzZWQgcGxhdGZvcm1cbiAgICogQHJldHVybiB7e319XG4gICAqL1xuICBnZXRQbGF0Zm9ybSgpIHtcbiAgICBpZiAodGhpcy5wYXJzZWRSZXN1bHQucGxhdGZvcm0pIHtcbiAgICAgIHJldHVybiB0aGlzLnBhcnNlZFJlc3VsdC5wbGF0Zm9ybTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wYXJzZVBsYXRmb3JtKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHBsYXRmb3JtIG5hbWVcbiAgICogQHBhcmFtIHtCb29sZWFufSBbdG9Mb3dlckNhc2U9ZmFsc2VdXG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuICBnZXRQbGF0Zm9ybVR5cGUodG9Mb3dlckNhc2UgPSBmYWxzZSkge1xuICAgIGNvbnN0IHsgdHlwZSB9ID0gdGhpcy5nZXRQbGF0Zm9ybSgpO1xuXG4gICAgaWYgKHRvTG93ZXJDYXNlKSB7XG4gICAgICByZXR1cm4gU3RyaW5nKHR5cGUpLnRvTG93ZXJDYXNlKCkgfHwgJyc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHR5cGUgfHwgJyc7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHBhcnNlZCBwbGF0Zm9ybVxuICAgKiBAcmV0dXJuIHt7fX1cbiAgICovXG4gIHBhcnNlUGxhdGZvcm0oKSB7XG4gICAgdGhpcy5wYXJzZWRSZXN1bHQucGxhdGZvcm0gPSB7fTtcblxuICAgIGNvbnN0IHBsYXRmb3JtID0gVXRpbHMuZmluZChwbGF0Zm9ybVBhcnNlcnNMaXN0LCAoX3BsYXRmb3JtKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIF9wbGF0Zm9ybS50ZXN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBfcGxhdGZvcm0udGVzdCh0aGlzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKF9wbGF0Zm9ybS50ZXN0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIF9wbGF0Zm9ybS50ZXN0LnNvbWUoY29uZGl0aW9uID0+IHRoaXMudGVzdChjb25kaXRpb24pKTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQnJvd3NlcidzIHRlc3QgZnVuY3Rpb24gaXMgbm90IHZhbGlkXCIpO1xuICAgIH0pO1xuXG4gICAgaWYgKHBsYXRmb3JtKSB7XG4gICAgICB0aGlzLnBhcnNlZFJlc3VsdC5wbGF0Zm9ybSA9IHBsYXRmb3JtLmRlc2NyaWJlKHRoaXMuZ2V0VUEoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucGFyc2VkUmVzdWx0LnBsYXRmb3JtO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwYXJzZWQgZW5naW5lXG4gICAqIEByZXR1cm4ge3t9fVxuICAgKi9cbiAgZ2V0RW5naW5lKCkge1xuICAgIGlmICh0aGlzLnBhcnNlZFJlc3VsdC5lbmdpbmUpIHtcbiAgICAgIHJldHVybiB0aGlzLnBhcnNlZFJlc3VsdC5lbmdpbmU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucGFyc2VFbmdpbmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZW5naW5lcydzIG5hbWVcbiAgICogQHJldHVybiB7U3RyaW5nfSBFbmdpbmVzJ3MgbmFtZSBvciBhbiBlbXB0eSBzdHJpbmdcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ2V0RW5naW5lTmFtZSh0b0xvd2VyQ2FzZSkge1xuICAgIGlmICh0b0xvd2VyQ2FzZSkge1xuICAgICAgcmV0dXJuIFN0cmluZyh0aGlzLmdldEVuZ2luZSgpLm5hbWUpLnRvTG93ZXJDYXNlKCkgfHwgJyc7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmdldEVuZ2luZSgpLm5hbWUgfHwgJyc7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHBhcnNlZCBwbGF0Zm9ybVxuICAgKiBAcmV0dXJuIHt7fX1cbiAgICovXG4gIHBhcnNlRW5naW5lKCkge1xuICAgIHRoaXMucGFyc2VkUmVzdWx0LmVuZ2luZSA9IHt9O1xuXG4gICAgY29uc3QgZW5naW5lID0gVXRpbHMuZmluZChlbmdpbmVzUGFyc2Vyc0xpc3QsIChfZW5naW5lKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIF9lbmdpbmUudGVzdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gX2VuZ2luZS50ZXN0KHRoaXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAoX2VuZ2luZS50ZXN0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIF9lbmdpbmUudGVzdC5zb21lKGNvbmRpdGlvbiA9PiB0aGlzLnRlc3QoY29uZGl0aW9uKSk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkJyb3dzZXIncyB0ZXN0IGZ1bmN0aW9uIGlzIG5vdCB2YWxpZFwiKTtcbiAgICB9KTtcblxuICAgIGlmIChlbmdpbmUpIHtcbiAgICAgIHRoaXMucGFyc2VkUmVzdWx0LmVuZ2luZSA9IGVuZ2luZS5kZXNjcmliZSh0aGlzLmdldFVBKCkpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnBhcnNlZFJlc3VsdC5lbmdpbmU7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgZnVsbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYnJvd3NlclxuICAgKiBAcmV0dXJucyB7UGFyc2VyfVxuICAgKi9cbiAgcGFyc2UoKSB7XG4gICAgdGhpcy5wYXJzZUJyb3dzZXIoKTtcbiAgICB0aGlzLnBhcnNlT1MoKTtcbiAgICB0aGlzLnBhcnNlUGxhdGZvcm0oKTtcbiAgICB0aGlzLnBhcnNlRW5naW5lKCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgcGFyc2VkIHJlc3VsdFxuICAgKiBAcmV0dXJuIHtQYXJzZWRSZXN1bHR9XG4gICAqL1xuICBnZXRSZXN1bHQoKSB7XG4gICAgcmV0dXJuIFV0aWxzLmFzc2lnbih7fSwgdGhpcy5wYXJzZWRSZXN1bHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHBhcnNlZCBicm93c2VyIG1hdGNoZXMgY2VydGFpbiBjb25kaXRpb25zXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjaGVja1RyZWUgSXQncyBvbmUgb3IgdHdvIGxheWVyZWQgb2JqZWN0LFxuICAgKiB3aGljaCBjYW4gaW5jbHVkZSBhIHBsYXRmb3JtIG9yIGFuIE9TIG9uIHRoZSBmaXJzdCBsYXllclxuICAgKiBhbmQgc2hvdWxkIGhhdmUgYnJvd3NlcnMgc3BlY3Mgb24gdGhlIGJvdHRvbS1sYXlpbmcgbGF5ZXJcbiAgICpcbiAgICogQHJldHVybnMge0Jvb2xlYW58dW5kZWZpbmVkfSBXaGV0aGVyIHRoZSBicm93c2VyIHNhdGlzZmllcyB0aGUgc2V0IGNvbmRpdGlvbnMgb3Igbm90LlxuICAgKiBSZXR1cm5zIGB1bmRlZmluZWRgIHdoZW4gdGhlIGJyb3dzZXIgaXMgbm8gZGVzY3JpYmVkIGluIHRoZSBjaGVja1RyZWUgb2JqZWN0LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBicm93c2VyID0gQm93c2VyLmdldFBhcnNlcih3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAqIGlmIChicm93c2VyLnNhdGlzZmllcyh7Y2hyb21lOiAnPjExOC4wMS4xMzIyJyB9KSlcbiAgICogLy8gb3Igd2l0aCBvc1xuICAgKiBpZiAoYnJvd3Nlci5zYXRpc2ZpZXMoe3dpbmRvd3M6IHsgY2hyb21lOiAnPjExOC4wMS4xMzIyJyB9IH0pKVxuICAgKiAvLyBvciB3aXRoIHBsYXRmb3Jtc1xuICAgKiBpZiAoYnJvd3Nlci5zYXRpc2ZpZXMoe2Rlc2t0b3A6IHsgY2hyb21lOiAnPjExOC4wMS4xMzIyJyB9IH0pKVxuICAgKi9cbiAgc2F0aXNmaWVzKGNoZWNrVHJlZSkge1xuICAgIGNvbnN0IHBsYXRmb3Jtc0FuZE9TZXMgPSB7fTtcbiAgICBsZXQgcGxhdGZvcm1zQW5kT1NDb3VudGVyID0gMDtcbiAgICBjb25zdCBicm93c2VycyA9IHt9O1xuICAgIGxldCBicm93c2Vyc0NvdW50ZXIgPSAwO1xuXG4gICAgY29uc3QgYWxsRGVmaW5pdGlvbnMgPSBPYmplY3Qua2V5cyhjaGVja1RyZWUpO1xuXG4gICAgYWxsRGVmaW5pdGlvbnMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50RGVmaW5pdGlvbiA9IGNoZWNrVHJlZVtrZXldO1xuICAgICAgaWYgKHR5cGVvZiBjdXJyZW50RGVmaW5pdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgYnJvd3NlcnNba2V5XSA9IGN1cnJlbnREZWZpbml0aW9uO1xuICAgICAgICBicm93c2Vyc0NvdW50ZXIgKz0gMTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGN1cnJlbnREZWZpbml0aW9uID09PSAnb2JqZWN0Jykge1xuICAgICAgICBwbGF0Zm9ybXNBbmRPU2VzW2tleV0gPSBjdXJyZW50RGVmaW5pdGlvbjtcbiAgICAgICAgcGxhdGZvcm1zQW5kT1NDb3VudGVyICs9IDE7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAocGxhdGZvcm1zQW5kT1NDb3VudGVyID4gMCkge1xuICAgICAgY29uc3QgcGxhdGZvcm1zQW5kT1NOYW1lcyA9IE9iamVjdC5rZXlzKHBsYXRmb3Jtc0FuZE9TZXMpO1xuICAgICAgY29uc3QgT1NNYXRjaGluZ0RlZmluaXRpb24gPSBVdGlscy5maW5kKHBsYXRmb3Jtc0FuZE9TTmFtZXMsIG5hbWUgPT4gKHRoaXMuaXNPUyhuYW1lKSkpO1xuXG4gICAgICBpZiAoT1NNYXRjaGluZ0RlZmluaXRpb24pIHtcbiAgICAgICAgY29uc3Qgb3NSZXN1bHQgPSB0aGlzLnNhdGlzZmllcyhwbGF0Zm9ybXNBbmRPU2VzW09TTWF0Y2hpbmdEZWZpbml0aW9uXSk7XG5cbiAgICAgICAgaWYgKG9zUmVzdWx0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICByZXR1cm4gb3NSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgcGxhdGZvcm1NYXRjaGluZ0RlZmluaXRpb24gPSBVdGlscy5maW5kKFxuICAgICAgICBwbGF0Zm9ybXNBbmRPU05hbWVzLFxuICAgICAgICBuYW1lID0+ICh0aGlzLmlzUGxhdGZvcm0obmFtZSkpLFxuICAgICAgKTtcbiAgICAgIGlmIChwbGF0Zm9ybU1hdGNoaW5nRGVmaW5pdGlvbikge1xuICAgICAgICBjb25zdCBwbGF0Zm9ybVJlc3VsdCA9IHRoaXMuc2F0aXNmaWVzKHBsYXRmb3Jtc0FuZE9TZXNbcGxhdGZvcm1NYXRjaGluZ0RlZmluaXRpb25dKTtcblxuICAgICAgICBpZiAocGxhdGZvcm1SZXN1bHQgIT09IHZvaWQgMCkge1xuICAgICAgICAgIHJldHVybiBwbGF0Zm9ybVJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChicm93c2Vyc0NvdW50ZXIgPiAwKSB7XG4gICAgICBjb25zdCBicm93c2VyTmFtZXMgPSBPYmplY3Qua2V5cyhicm93c2Vycyk7XG4gICAgICBjb25zdCBtYXRjaGluZ0RlZmluaXRpb24gPSBVdGlscy5maW5kKGJyb3dzZXJOYW1lcywgbmFtZSA9PiAodGhpcy5pc0Jyb3dzZXIobmFtZSwgdHJ1ZSkpKTtcblxuICAgICAgaWYgKG1hdGNoaW5nRGVmaW5pdGlvbiAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBhcmVWZXJzaW9uKGJyb3dzZXJzW21hdGNoaW5nRGVmaW5pdGlvbl0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJyb3dzZXIgbmFtZSBlcXVhbHMgdGhlIHBhc3NlZCBzdHJpbmdcbiAgICogQHBhcmFtIGJyb3dzZXJOYW1lIFRoZSBzdHJpbmcgdG8gY29tcGFyZSB3aXRoIHRoZSBicm93c2VyIG5hbWVcbiAgICogQHBhcmFtIFtpbmNsdWRpbmdBbGlhcz1mYWxzZV0gVGhlIGZsYWcgc2hvd2luZyB3aGV0aGVyIGFsaWFzIHdpbGwgYmUgaW5jbHVkZWQgaW50byBjb21wYXJpc29uXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaXNCcm93c2VyKGJyb3dzZXJOYW1lLCBpbmNsdWRpbmdBbGlhcyA9IGZhbHNlKSB7XG4gICAgY29uc3QgZGVmYXVsdEJyb3dzZXJOYW1lID0gdGhpcy5nZXRCcm93c2VyTmFtZSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgbGV0IGJyb3dzZXJOYW1lTG93ZXIgPSBicm93c2VyTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IGFsaWFzID0gVXRpbHMuZ2V0QnJvd3NlclR5cGVCeUFsaWFzKGJyb3dzZXJOYW1lTG93ZXIpO1xuXG4gICAgaWYgKGluY2x1ZGluZ0FsaWFzICYmIGFsaWFzKSB7XG4gICAgICBicm93c2VyTmFtZUxvd2VyID0gYWxpYXMudG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIGJyb3dzZXJOYW1lTG93ZXIgPT09IGRlZmF1bHRCcm93c2VyTmFtZTtcbiAgfVxuXG4gIGNvbXBhcmVWZXJzaW9uKHZlcnNpb24pIHtcbiAgICBsZXQgZXhwZWN0ZWRSZXN1bHRzID0gWzBdO1xuICAgIGxldCBjb21wYXJhYmxlVmVyc2lvbiA9IHZlcnNpb247XG4gICAgbGV0IGlzTG9vc2UgPSBmYWxzZTtcblxuICAgIGNvbnN0IGN1cnJlbnRCcm93c2VyVmVyc2lvbiA9IHRoaXMuZ2V0QnJvd3NlclZlcnNpb24oKTtcblxuICAgIGlmICh0eXBlb2YgY3VycmVudEJyb3dzZXJWZXJzaW9uICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG5cbiAgICBpZiAodmVyc2lvblswXSA9PT0gJz4nIHx8IHZlcnNpb25bMF0gPT09ICc8Jykge1xuICAgICAgY29tcGFyYWJsZVZlcnNpb24gPSB2ZXJzaW9uLnN1YnN0cigxKTtcbiAgICAgIGlmICh2ZXJzaW9uWzFdID09PSAnPScpIHtcbiAgICAgICAgaXNMb29zZSA9IHRydWU7XG4gICAgICAgIGNvbXBhcmFibGVWZXJzaW9uID0gdmVyc2lvbi5zdWJzdHIoMik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBleHBlY3RlZFJlc3VsdHMgPSBbXTtcbiAgICAgIH1cbiAgICAgIGlmICh2ZXJzaW9uWzBdID09PSAnPicpIHtcbiAgICAgICAgZXhwZWN0ZWRSZXN1bHRzLnB1c2goMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBleHBlY3RlZFJlc3VsdHMucHVzaCgtMSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh2ZXJzaW9uWzBdID09PSAnPScpIHtcbiAgICAgIGNvbXBhcmFibGVWZXJzaW9uID0gdmVyc2lvbi5zdWJzdHIoMSk7XG4gICAgfSBlbHNlIGlmICh2ZXJzaW9uWzBdID09PSAnficpIHtcbiAgICAgIGlzTG9vc2UgPSB0cnVlO1xuICAgICAgY29tcGFyYWJsZVZlcnNpb24gPSB2ZXJzaW9uLnN1YnN0cigxKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZXhwZWN0ZWRSZXN1bHRzLmluZGV4T2YoXG4gICAgICBVdGlscy5jb21wYXJlVmVyc2lvbnMoY3VycmVudEJyb3dzZXJWZXJzaW9uLCBjb21wYXJhYmxlVmVyc2lvbiwgaXNMb29zZSksXG4gICAgKSA+IC0xO1xuICB9XG5cbiAgaXNPUyhvc05hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRPU05hbWUodHJ1ZSkgPT09IFN0cmluZyhvc05hbWUpLnRvTG93ZXJDYXNlKCk7XG4gIH1cblxuICBpc1BsYXRmb3JtKHBsYXRmb3JtVHlwZSkge1xuICAgIHJldHVybiB0aGlzLmdldFBsYXRmb3JtVHlwZSh0cnVlKSA9PT0gU3RyaW5nKHBsYXRmb3JtVHlwZSkudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIGlzRW5naW5lKGVuZ2luZU5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRFbmdpbmVOYW1lKHRydWUpID09PSBTdHJpbmcoZW5naW5lTmFtZSkudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJcyBhbnl0aGluZz8gQ2hlY2sgaWYgdGhlIGJyb3dzZXIgaXMgY2FsbGVkIFwiYW55dGhpbmdcIixcbiAgICogdGhlIE9TIGNhbGxlZCBcImFueXRoaW5nXCIgb3IgdGhlIHBsYXRmb3JtIGNhbGxlZCBcImFueXRoaW5nXCJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGFueXRoaW5nXG4gICAqIEBwYXJhbSBbaW5jbHVkaW5nQWxpYXM9ZmFsc2VdIFRoZSBmbGFnIHNob3dpbmcgd2hldGhlciBhbGlhcyB3aWxsIGJlIGluY2x1ZGVkIGludG8gY29tcGFyaXNvblxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICovXG4gIGlzKGFueXRoaW5nLCBpbmNsdWRpbmdBbGlhcyA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNCcm93c2VyKGFueXRoaW5nLCBpbmNsdWRpbmdBbGlhcykgfHwgdGhpcy5pc09TKGFueXRoaW5nKVxuICAgICAgfHwgdGhpcy5pc1BsYXRmb3JtKGFueXRoaW5nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbnkgb2YgdGhlIGdpdmVuIHZhbHVlcyBzYXRpc2ZpZXMgdGhpcy5pcyhhbnl0aGluZylcbiAgICogQHBhcmFtIHtTdHJpbmdbXX0gYW55dGhpbmdzXG4gICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgKi9cbiAgc29tZShhbnl0aGluZ3MgPSBbXSkge1xuICAgIHJldHVybiBhbnl0aGluZ3Muc29tZShhbnl0aGluZyA9PiB0aGlzLmlzKGFueXRoaW5nKSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGFyc2VyO1xuIiwiLyohXG4gKiBCb3dzZXIgLSBhIGJyb3dzZXIgZGV0ZWN0b3JcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9sYW5jZWRpa3Nvbi9ib3dzZXJcbiAqIE1JVCBMaWNlbnNlIHwgKGMpIER1c3RpbiBEaWF6IDIwMTItMjAxNVxuICogTUlUIExpY2Vuc2UgfCAoYykgRGVuaXMgRGVtY2hlbmtvIDIwMTUtMjAxOVxuICovXG5pbXBvcnQgUGFyc2VyIGZyb20gJy4vcGFyc2VyLmpzJztcbmltcG9ydCB7XG4gIEJST1dTRVJfTUFQLFxuICBFTkdJTkVfTUFQLFxuICBPU19NQVAsXG4gIFBMQVRGT1JNU19NQVAsXG59IGZyb20gJy4vY29uc3RhbnRzLmpzJztcblxuLyoqXG4gKiBCb3dzZXIgY2xhc3MuXG4gKiBLZWVwIGl0IHNpbXBsZSBhcyBtdWNoIGFzIGl0IGNhbiBiZS5cbiAqIEl0J3Mgc3VwcG9zZWQgdG8gd29yayB3aXRoIGNvbGxlY3Rpb25zIG9mIHtAbGluayBQYXJzZXJ9IGluc3RhbmNlc1xuICogcmF0aGVyIHRoZW4gc29sdmUgb25lLWluc3RhbmNlIHByb2JsZW1zLlxuICogQWxsIHRoZSBvbmUtaW5zdGFuY2Ugc3R1ZmYgaXMgbG9jYXRlZCBpbiBQYXJzZXIgY2xhc3MuXG4gKlxuICogQGNsYXNzXG4gKiBAY2xhc3NkZXNjIEJvd3NlciBpcyBhIHN0YXRpYyBvYmplY3QsIHRoYXQgcHJvdmlkZXMgYW4gQVBJIHRvIHRoZSBQYXJzZXJzXG4gKiBAaGlkZWNvbnN0cnVjdG9yXG4gKi9cbmNsYXNzIEJvd3NlciB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEge0BsaW5rIFBhcnNlcn0gaW5zdGFuY2VcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IFVBIFVzZXJBZ2VudCBzdHJpbmdcbiAgICogQHBhcmFtIHtCb29sZWFufSBbc2tpcFBhcnNpbmc9ZmFsc2VdIFdpbGwgbWFrZSB0aGUgUGFyc2VyIHBvc3Rwb25lIHBhcnNpbmcgdW50aWwgeW91IGFzayBpdFxuICAgKiBleHBsaWNpdGx5LiBTYW1lIGFzIGBza2lwUGFyc2luZ2AgZm9yIHtAbGluayBQYXJzZXJ9LlxuICAgKiBAcmV0dXJucyB7UGFyc2VyfVxuICAgKiBAdGhyb3dzIHtFcnJvcn0gd2hlbiBVQSBpcyBub3QgYSBTdHJpbmdcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgcGFyc2VyID0gQm93c2VyLmdldFBhcnNlcih3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAqIGNvbnN0IHJlc3VsdCA9IHBhcnNlci5nZXRSZXN1bHQoKTtcbiAgICovXG4gIHN0YXRpYyBnZXRQYXJzZXIoVUEsIHNraXBQYXJzaW5nID0gZmFsc2UpIHtcbiAgICBpZiAodHlwZW9mIFVBICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyQWdlbnQgc2hvdWxkIGJlIGEgc3RyaW5nJyk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUGFyc2VyKFVBLCBza2lwUGFyc2luZyk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHtAbGluayBQYXJzZXJ9IGluc3RhbmNlIGFuZCBydW5zIHtAbGluayBQYXJzZXIuZ2V0UmVzdWx0fSBpbW1lZGlhdGVseVxuICAgKlxuICAgKiBAcGFyYW0gVUFcbiAgICogQHJldHVybiB7UGFyc2VkUmVzdWx0fVxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCByZXN1bHQgPSBCb3dzZXIucGFyc2Uod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgKi9cbiAgc3RhdGljIHBhcnNlKFVBKSB7XG4gICAgcmV0dXJuIChuZXcgUGFyc2VyKFVBKSkuZ2V0UmVzdWx0KCk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IEJST1dTRVJfTUFQKCkge1xuICAgIHJldHVybiBCUk9XU0VSX01BUDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgRU5HSU5FX01BUCgpIHtcbiAgICByZXR1cm4gRU5HSU5FX01BUDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgT1NfTUFQKCkge1xuICAgIHJldHVybiBPU19NQVA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IFBMQVRGT1JNU19NQVAoKSB7XG4gICAgcmV0dXJuIFBMQVRGT1JNU19NQVA7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQm93c2VyO1xuIiwiaW1wb3J0IEJvd3NlciBmcm9tICdib3dzZXInO1xuY29uc3QgYnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIEJvd3Nlci5nZXRQYXJzZXIod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xuZXhwb3J0IGZ1bmN0aW9uIGdlcldpbmRvd0JvcmRlcigpIHtcbiAgICBzd2l0Y2ggKGJyb3dzZXIgPT09IG51bGwgfHwgYnJvd3NlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogYnJvd3Nlci5nZXRPU05hbWUodHJ1ZSkpIHtcbiAgICAgICAgY2FzZSAnd2luZG93cyc6IHtcbiAgICAgICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgICAgICBzd2l0Y2ggKGJyb3dzZXIuZ2V0QnJvd3Nlck5hbWUodHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdmaXJlZm94JzpcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gWzY4LCA4LCA4XTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbWljcm9zb2Z0IGVkZ2UnOlxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBbNjIsIDgsIDhdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAvL2Nhc2UgJ2Nocm9tZSc6XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gWzYwLCA4LCA4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IDEpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbMF0gLT0gMjtcbiAgICAgICAgICAgICAgICByZXN1bHRbMV0gLT0gMTtcbiAgICAgICAgICAgICAgICByZXN1bHRbMl0gLT0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnbWFjb3MnOiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGJyb3dzZXIuZ2V0QnJvd3Nlck5hbWUodHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzYWZhcmknOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIyLCAwLCAwXTtcbiAgICAgICAgICAgICAgICBjYXNlICdmaXJlZm94JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs1OSwgMCwgMF07XG4gICAgICAgICAgICAgICAgLy9jYXNlICdjaHJvbWUnOlxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNTEsIDAsIDBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbNjAsIDgsIDhdO1xufVxuZXhwb3J0IGNvbnN0IGlzU2FmYXJpID0gKGJyb3dzZXIgPT09IG51bGwgfHwgYnJvd3NlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogYnJvd3Nlci5nZXRCcm93c2VyTmFtZSh0cnVlKSkgPT09ICdzYWZhcmknO1xuZXhwb3J0IGNvbnN0IHBvcHVwU3VwcG9ydGVkID0gKGJyb3dzZXIgPT09IG51bGwgfHwgYnJvd3NlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogYnJvd3Nlci5nZXRQbGF0Zm9ybVR5cGUoKSkgPT09ICdkZXNrdG9wJztcbmV4cG9ydCBjb25zdCBwb3B1cFdpbmRvd0JvcmRlciA9IGdlcldpbmRvd0JvcmRlcigpO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IGRlYm91bmNlIGZyb20gJ2xvZGFzaC9kZWJvdW5jZSc7XG5pbXBvcnQgeyBpc1NhZmFyaSwgcG9wdXBTdXBwb3J0ZWQsIHBvcHVwV2luZG93Qm9yZGVyIH0gZnJvbSAnLi9Ccm93c2VyUG9wdXBXaW5kb3cnO1xuY29uc3Qgb25OZXdXaW5kb3dSZXNpemUgPSBkZWJvdW5jZSgoKSA9PiB7XG4gICAgLy8gYWRkL3JlbW92ZSBlbGVtZW50IG9uIG1haW4gZG9jdW1lbnQsIGZvcmNlIGl0IHRvIGRpc3BhdGNoIHJlc2l6ZSBvYnNlcnZlciBldmVudCBvbiB0aGUgcG9wdXAgd2luZG93XG4gICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKGRpdik7XG4gICAgZGl2LnJlbW92ZSgpO1xuICAgIC8vIFRPRE8gdXBkYXRlIHJlc2l6ZSBldmVudFxufSwgMjAwKTtcbi8qKlxuICogVGhlIE5ld1dpbmRvdyBjbGFzcyBvYmplY3QuXG4gKiBAcHVibGljXG4gKi9cbmNsYXNzIE5ld1dpbmRvdyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIC8qKlxuICAgICAqIFRoZSBOZXdXaW5kb3cgZnVuY3Rpb24gY29uc3RydWN0b3IuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG4gICAgICovXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnJlbGVhc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7IG1vdW50ZWQ6IGZhbHNlIH07XG4gICAgICAgIHRoaXMub25NYWluV2luZG93VW5sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMud2luZG93KSB7XG4gICAgICAgICAgICAgICAgdGhpcy53aW5kb3cuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbGVhc2UgdGhlIG5ldyB3aW5kb3cgYW5kIGFueXRoaW5nIHRoYXQgd2FzIGJvdW5kIHRvIGl0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZWxlYXNlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAvLyBUaGlzIG1ldGhvZCBjYW4gYmUgY2FsbGVkIG9uY2UuXG4gICAgICAgICAgICBpZiAodGhpcy5yZWxlYXNlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVsZWFzZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMud2luZG93Q2hlY2tlckludGVydmFsKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLndpbmRvd0NoZWNrZXJJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgdGhpcy53aW5kb3dDaGVja2VySW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHRoaXMub25NYWluV2luZG93VW5sb2FkKTtcbiAgICAgICAgICAgIHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHRoaXMucmVsZWFzZSk7XG4gICAgICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBDYWxsIGFueSBmdW5jdGlvbiBib3VuZCB0byB0aGUgYG9uVW5sb2FkYCBwcm9wLlxuICAgICAgICAgICAgICAgIGNvbnN0IHsgb25DbG9zZSB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9uQ2xvc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgb25DbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRoZSBOZXdXaW5kb3cgY29tcG9uZW50LlxuICAgICAqL1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLm1vdW50ZWQpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIFJlYWN0RE9NLmNyZWF0ZVBvcnRhbCh0aGlzLnByb3BzLmNoaWxkcmVuLCB0aGlzLmNvbnRhaW5lcik7XG4gICAgfVxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB0aGlzLm9wZW5DaGlsZCgpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgbW91bnRlZDogdHJ1ZSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHRoZSBuZXcgd2luZG93IHdoZW4gTmV3V2luZG93IGNvbXBvbmVudCBtb3VudC5cbiAgICAgKi9cbiAgICBvcGVuQ2hpbGQoKSB7XG4gICAgICAgIGNvbnN0IHsgdXJsLCB0aXRsZSwgbmFtZSwgd2lkdGgsIGhlaWdodCwgaW5pdFBvcHVwSW5uZXJSZWN0LCBpbml0UG9wdXBPdXRlclJlY3QsIG9uQmxvY2ssIG9uT3Blbiwgb25DbG9zZSwgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCBmZWF0dXJlcyA9IHsgd2lkdGgsIGhlaWdodCB9O1xuICAgICAgICBpZiAoaW5pdFBvcHVwT3V0ZXJSZWN0KSB7XG4gICAgICAgICAgICBmZWF0dXJlcyA9IGluaXRQb3B1cE91dGVyUmVjdCgpO1xuICAgICAgICAgICAgY29uc3QgW3RvcEJvcmRlciwgc2lkZUJvcmRlciwgYm90dG9tQm9yZGVyXSA9IHBvcHVwV2luZG93Qm9yZGVyO1xuICAgICAgICAgICAgaWYgKCFpc1NhZmFyaSkge1xuICAgICAgICAgICAgICAgIGZlYXR1cmVzLndpZHRoIC09IHNpZGVCb3JkZXIgKiAyO1xuICAgICAgICAgICAgICAgIGZlYXR1cmVzLmhlaWdodCAtPSB0b3BCb3JkZXIgKyBib3R0b21Cb3JkZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5pdFBvcHVwSW5uZXJSZWN0KSB7XG4gICAgICAgICAgICBmZWF0dXJlcyA9IGluaXRQb3B1cElubmVyUmVjdCgpO1xuICAgICAgICAgICAgY29uc3QgW3RvcEJvcmRlciwgc2lkZUJvcmRlcl0gPSBwb3B1cFdpbmRvd0JvcmRlcjtcbiAgICAgICAgICAgIGZlYXR1cmVzLmxlZnQgLT0gc2lkZUJvcmRlcjtcbiAgICAgICAgICAgIGZlYXR1cmVzLnRvcCAtPSB0b3BCb3JkZXI7XG4gICAgICAgICAgICBpZiAoaXNTYWZhcmkpIHtcbiAgICAgICAgICAgICAgICBmZWF0dXJlcy5oZWlnaHQgKz0gdG9wQm9yZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZmVhdHVyZXMubGVmdCA9IHdpbmRvdy50b3Aub3V0ZXJXaWR0aCAvIDIgKyB3aW5kb3cudG9wLnNjcmVlblggLSB3aWR0aCAvIDI7XG4gICAgICAgICAgICBmZWF0dXJlcy50b3AgPSB3aW5kb3cudG9wLm91dGVySGVpZ2h0IC8gMiArIHdpbmRvdy50b3Auc2NyZWVuWSAtIGhlaWdodCAvIDI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gT3BlbiBhIG5ldyB3aW5kb3cuXG4gICAgICAgIHRoaXMud2luZG93ID0gd2luZG93Lm9wZW4odXJsLCBuYW1lLCB0b1dpbmRvd0ZlYXR1cmVzKGZlYXR1cmVzKSk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBuZXcgd2luZG93IHdhcyBzdWNjZXNzZnVsbHkgb3BlbmVkLlxuICAgICAgICBpZiAodGhpcy53aW5kb3cpIHtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCB0aGlzLm9uTWFpbldpbmRvd1VubG9hZCk7XG4gICAgICAgICAgICB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvbk5ld1dpbmRvd1Jlc2l6ZSk7XG4gICAgICAgICAgICB0aGlzLndpbmRvdy5kb2N1bWVudC50aXRsZSA9IHRpdGxlIHx8IGRvY3VtZW50LnRpdGxlO1xuICAgICAgICAgICAgdGhpcy53aW5kb3cuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgICAgICAvLyBJZiBzcGVjaWZpZWQsIGNvcHkgc3R5bGVzIGZyb20gcGFyZW50IHdpbmRvdydzIGRvY3VtZW50LlxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuY29weVN0eWxlcykge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gY29weVN0eWxlcyhkb2N1bWVudCwgdGhpcy53aW5kb3cuZG9jdW1lbnQpLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25PcGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25PcGVuKHRoaXMud2luZG93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1cmwgJiYgb25DbG9zZSkge1xuICAgICAgICAgICAgICAgIHRoaXMud2luZG93Q2hlY2tlckludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMud2luZG93IHx8IHRoaXMud2luZG93LmNsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWxlYXNlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgNTApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmVsZWFzZSBhbnl0aGluZyBib3VuZCB0byB0aGlzIGNvbXBvbmVudCBiZWZvcmUgdGhlIG5ldyB3aW5kb3cgdW5sb2FkLlxuICAgICAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5yZWxlYXNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBlcnJvciBvbiBvcGVuaW5nIG9mIG5ldyB3aW5kb3cuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uQmxvY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvbkJsb2NrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0EgbmV3IHdpbmRvdyBjb3VsZCBub3QgYmUgb3BlbmVkLiBNYXliZSBpdCB3YXMgYmxvY2tlZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZSB0aGUgb3BlbmVkIHdpbmRvdyAoaWYgYW55KSB3aGVuIE5ld1dpbmRvdyB3aWxsIHVubW91bnQuXG4gICAgICovXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIGlmICh0aGlzLndpbmRvdykge1xuICAgICAgICAgICAgdGhpcy5yZWxlYXNlKCk7XG4gICAgICAgICAgICB0aGlzLndpbmRvdy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuTmV3V2luZG93LnN1cHBvcnRlZCA9IHBvcHVwU3VwcG9ydGVkO1xuLyoqXG4gKiBOZXdXaW5kb3cgZGVmYXVsdCBwcm9wcy5cbiAqL1xuTmV3V2luZG93LmRlZmF1bHRQcm9wcyA9IHtcbiAgICB1cmw6ICcnLFxuICAgIG5hbWU6ICcnLFxuICAgIHdpZHRoOiA2NDAsXG4gICAgaGVpZ2h0OiA0ODAsXG4gICAgY29weVN0eWxlczogdHJ1ZSxcbn07XG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zLlxuICogQHByaXZhdGVcbiAqL1xuLyoqXG4gKiBDb3B5IHN0eWxlcyBmcm9tIGEgc291cmNlIGRvY3VtZW50IHRvIGEgdGFyZ2V0LlxuICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZVxuICogQHBhcmFtIHtPYmplY3R9IHRhcmdldFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY29weVN0eWxlcyhzb3VyY2UsIHRhcmdldCkge1xuICAgIEFycmF5LmZyb20oc291cmNlLnN0eWxlU2hlZXRzKS5mb3JFYWNoKHN0eWxlU2hlZXQgPT4ge1xuICAgICAgICAvLyBGb3IgPHN0eWxlPiBlbGVtZW50c1xuICAgICAgICBsZXQgcnVsZXM7XG4gICAgICAgIGlmIChzdHlsZVNoZWV0LmhyZWYpIHtcbiAgICAgICAgICAgIC8vIGZvciA8bGluaz4gZWxlbWVudHMgbG9hZGluZyBDU1MgZnJvbSBhIFVSTFxuICAgICAgICAgICAgY29uc3QgbmV3TGlua0VsID0gc291cmNlLmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcbiAgICAgICAgICAgIG5ld0xpbmtFbC5yZWwgPSAnc3R5bGVzaGVldCc7XG4gICAgICAgICAgICBuZXdMaW5rRWwuaHJlZiA9IHN0eWxlU2hlZXQuaHJlZjtcbiAgICAgICAgICAgIHRhcmdldC5oZWFkLmFwcGVuZENoaWxkKG5ld0xpbmtFbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJ1bGVzID0gc3R5bGVTaGVldC5jc3NSdWxlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAvLyBjYW4ndCBhY2Nlc3MgY3Jvc3Nkb21haW4gcnVsZXNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChydWxlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1N0eWxlRWwgPSBzb3VyY2UuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAvLyBXcml0ZSB0aGUgdGV4dCBvZiBlYWNoIHJ1bGUgaW50byB0aGUgYm9keSBvZiB0aGUgc3R5bGUgZWxlbWVudFxuICAgICAgICAgICAgICAgIEFycmF5LmZyb20oc3R5bGVTaGVldC5jc3NSdWxlcykuZm9yRWFjaChjc3NSdWxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBjc3NUZXh0LCB0eXBlIH0gPSBjc3NSdWxlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmV0dXJuVGV4dCA9IGNzc1RleHQ7XG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBjc3NSdWxlIHR5cGUgaXMgQ1NTSW1wb3J0UnVsZSAoMykgb3IgQ1NTRm9udEZhY2VSdWxlICg1KSB0byBoYW5kbGUgbG9jYWwgaW1wb3J0cyBvbiBhIGFib3V0OmJsYW5rIHBhZ2VcbiAgICAgICAgICAgICAgICAgICAgLy8gJy9jdXN0b20uY3NzJyB0dXJucyB0byAnaHR0cDovL215LXNpdGUuY29tL2N1c3RvbS5jc3MnXG4gICAgICAgICAgICAgICAgICAgIGlmIChbMywgNV0uaW5jbHVkZXModHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblRleHQgPSBjc3NUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KCd1cmwoJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGxpbmUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5lWzFdID09PSAnLycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke2xpbmUuc2xpY2UoMCwgMSl9JHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufSR7bGluZS5zbGljZSgxKX1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGluZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJ3VybCgnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBuZXdTdHlsZUVsLmFwcGVuZENoaWxkKHNvdXJjZS5jcmVhdGVUZXh0Tm9kZShyZXR1cm5UZXh0KSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LmhlYWQuYXBwZW5kQ2hpbGQobmV3U3R5bGVFbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogQ29udmVydCBmZWF0dXJlcyBwcm9wcyB0byB3aW5kb3cgZmVhdHVyZXMgZm9ybWF0IChuYW1lPXZhbHVlLG90aGVyPXZhbHVlKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHRvV2luZG93RmVhdHVyZXMob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iailcbiAgICAgICAgLnJlZHVjZSgoZmVhdHVyZXMsIG5hbWUpID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBvYmpbbmFtZV07XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgZmVhdHVyZXMucHVzaChgJHtuYW1lfT0ke3ZhbHVlID8gJ3llcycgOiAnbm8nfWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZmVhdHVyZXMucHVzaChgJHtuYW1lfT0ke3ZhbHVlfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmZWF0dXJlcztcbiAgICB9LCBbXSlcbiAgICAgICAgLmpvaW4oJywnKTtcbn1cbi8qKlxuICogQ29tcG9uZW50IGV4cG9ydC5cbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IE5ld1dpbmRvdztcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IERvY2tDb250ZXh0VHlwZSwgcGxhY2VIb2xkZXJTdHlsZSB9IGZyb20gXCIuL0RvY2tEYXRhXCI7XG5pbXBvcnQgeyBEcmFnRHJvcERpdiB9IGZyb20gXCIuL2RyYWdkcm9wL0RyYWdEcm9wRGl2XCI7XG5pbXBvcnQgeyBEcmFnU3RhdGUgfSBmcm9tIFwiLi9kcmFnZHJvcC9EcmFnTWFuYWdlclwiO1xuZXhwb3J0IGNsYXNzIERvY2tEcm9wU3F1YXJlIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7IGRyb3BwaW5nOiBmYWxzZSB9O1xuICAgICAgICB0aGlzLm9uRHJhZ092ZXIgPSAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHsgcGFuZWxFbGVtZW50OiB0YXJnZXRFbGVtZW50LCBkaXJlY3Rpb24sIGRlcHRoLCBwYW5lbERhdGEgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZHJvcHBpbmc6IHRydWUgfSk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlcHRoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50ID0gdGFyZ2V0RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhbmVsRGF0YS5ncm91cCA9PT0gcGxhY2VIb2xkZXJTdHlsZSAmJiBkaXJlY3Rpb24gIT09ICdmbG9hdCcpIHtcbiAgICAgICAgICAgICAgICAvLyBwbGFjZSBob2xkZXIgcGFuZWwgc2hvdWxkIGFsd2F5cyBoYXZlIGZ1bGwgc2l6ZSBkcm9wIHJlY3RcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuc2V0RHJvcFJlY3QodGFyZ2V0RWxlbWVudCwgJ21pZGRsZScsIHRoaXMsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGRvY2tJZCA9IHRoaXMuY29udGV4dC5nZXREb2NrSWQoKTtcbiAgICAgICAgICAgICAgICBsZXQgcGFuZWxTaXplID0gRHJhZ1N0YXRlLmdldERhdGEoJ3BhbmVsU2l6ZScsIGRvY2tJZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnNldERyb3BSZWN0KHRhcmdldEVsZW1lbnQsIGRpcmVjdGlvbiwgdGhpcywgZSwgcGFuZWxTaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUuYWNjZXB0KCcnKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkRyYWdMZWF2ZSA9IChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgeyBwYW5lbEVsZW1lbnQsIGRpcmVjdGlvbiB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcm9wcGluZzogZmFsc2UgfSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuc2V0RHJvcFJlY3QobnVsbCwgJ3JlbW92ZScsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uRHJvcCA9IChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgZG9ja0lkID0gdGhpcy5jb250ZXh0LmdldERvY2tJZCgpO1xuICAgICAgICAgICAgbGV0IHNvdXJjZSA9IERyYWdTdGF0ZS5nZXREYXRhKCd0YWInLCBkb2NrSWQpO1xuICAgICAgICAgICAgaWYgKCFzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2UgPSBEcmFnU3RhdGUuZ2V0RGF0YSgncGFuZWwnLCBkb2NrSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGxldCB7IHBhbmVsRGF0YSwgZGlyZWN0aW9uLCBkZXB0aCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0ID0gcGFuZWxEYXRhO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVwdGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuZG9ja01vdmUoc291cmNlLCB0YXJnZXQsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHsgZGlyZWN0aW9uLCBkZXB0aCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgbGV0IHsgZHJvcHBpbmcgfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGxldCBjbGFzc2VzID0gWydkb2NrLWRyb3Atc3F1YXJlJ107XG4gICAgICAgIGNsYXNzZXMucHVzaChgZG9jay1kcm9wLSR7ZGlyZWN0aW9ufWApO1xuICAgICAgICBpZiAoZGVwdGgpIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaChgZG9jay1kcm9wLWRlZXBgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZHJvcHBpbmcpIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaCgnZG9jay1kcm9wLXNxdWFyZS1kcm9wcGluZycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChEcmFnRHJvcERpdiwgeyBjbGFzc05hbWU6IGNsYXNzZXMuam9pbignICcpLCBvbkRyYWdPdmVyVDogdGhpcy5vbkRyYWdPdmVyLCBvbkRyYWdMZWF2ZVQ6IHRoaXMub25EcmFnTGVhdmUsIG9uRHJvcFQ6IHRoaXMub25Ecm9wIH0sXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiAnZG9jay1kcm9wLXNxdWFyZS1ib3gnIH0pKSk7XG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICB0aGlzLmNvbnRleHQuc2V0RHJvcFJlY3QobnVsbCwgJ3JlbW92ZScsIHRoaXMpO1xuICAgIH1cbn1cbkRvY2tEcm9wU3F1YXJlLmNvbnRleHRUeXBlID0gRG9ja0NvbnRleHRUeXBlO1xuZXhwb3J0IGNsYXNzIERvY2tEcm9wTGF5ZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgYWRkRGVwdGhTcXVhcmUoY2hpbGRyZW4sIG1vZGUsIHBhbmVsRGF0YSwgcGFuZWxFbGVtZW50LCBkZXB0aCkge1xuICAgICAgICBpZiAobW9kZSA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9ja0Ryb3BTcXVhcmUsIHsga2V5OiBgdG9wJHtkZXB0aH1gLCBkaXJlY3Rpb246ICd0b3AnLCBkZXB0aDogZGVwdGgsIHBhbmVsRGF0YTogcGFuZWxEYXRhLCBwYW5lbEVsZW1lbnQ6IHBhbmVsRWxlbWVudCB9KSk7XG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9ja0Ryb3BTcXVhcmUsIHsga2V5OiBgYm90dG9tJHtkZXB0aH1gLCBkaXJlY3Rpb246ICdib3R0b20nLCBkZXB0aDogZGVwdGgsIHBhbmVsRGF0YTogcGFuZWxEYXRhLCBwYW5lbEVsZW1lbnQ6IHBhbmVsRWxlbWVudCB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9ja0Ryb3BTcXVhcmUsIHsga2V5OiBgbGVmdCR7ZGVwdGh9YCwgZGlyZWN0aW9uOiAnbGVmdCcsIGRlcHRoOiBkZXB0aCwgcGFuZWxEYXRhOiBwYW5lbERhdGEsIHBhbmVsRWxlbWVudDogcGFuZWxFbGVtZW50IH0pKTtcbiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goUmVhY3QuY3JlYXRlRWxlbWVudChEb2NrRHJvcFNxdWFyZSwgeyBrZXk6IGByaWdodCR7ZGVwdGh9YCwgZGlyZWN0aW9uOiAncmlnaHQnLCBkZXB0aDogZGVwdGgsIHBhbmVsRGF0YTogcGFuZWxEYXRhLCBwYW5lbEVsZW1lbnQ6IHBhbmVsRWxlbWVudCB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCB7IHBhbmVsRGF0YSwgcGFuZWxFbGVtZW50LCBkcm9wRnJvbVBhbmVsIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBsZXQgZG9ja0lkID0gdGhpcy5jb250ZXh0LmdldERvY2tJZCgpO1xuICAgICAgICBsZXQgY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgLy8gY2hlY2sgaWYgaXQncyB3aG9sZSBwYW5lbCBkcmFnZ2luZ1xuICAgICAgICBsZXQgZHJhZ2dpbmdQYW5lbCA9IERyYWdTdGF0ZS5nZXREYXRhKCdwYW5lbCcsIGRvY2tJZCk7XG4gICAgICAgIGxldCBmcm9tR3JvdXAgPSB0aGlzLmNvbnRleHQuZ2V0R3JvdXAoZHJvcEZyb21QYW5lbC5ncm91cCk7XG4gICAgICAgIGlmIChmcm9tR3JvdXAuZmxvYXRhYmxlICE9PSBmYWxzZSAmJlxuICAgICAgICAgICAgKCFkcmFnZ2luZ1BhbmVsIHx8XG4gICAgICAgICAgICAgICAgKCFkcmFnZ2luZ1BhbmVsLnBhbmVsTG9jayAmJiAoKF9hID0gZHJhZ2dpbmdQYW5lbC5wYXJlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tb2RlKSAhPT0gJ2Zsb2F0JykpKSB7XG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9ja0Ryb3BTcXVhcmUsIHsga2V5OiAnZmxvYXQnLCBkaXJlY3Rpb246ICdmbG9hdCcsIHBhbmVsRGF0YTogcGFuZWxEYXRhLCBwYW5lbEVsZW1lbnQ6IHBhbmVsRWxlbWVudCB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRyYWdnaW5nUGFuZWwgIT09IHBhbmVsRGF0YSAmJiAhZnJvbUdyb3VwLmRpc2FibGVEb2NrKSB7IC8vIGRvbid0IGRyb3AgcGFuZWwgdG8gaXRzZWxmXG4gICAgICAgICAgICAvLyA0IGRpcmVjdGlvbiBiYXNlIGRyYWcgc3F1YXJlXG4gICAgICAgICAgICBEb2NrRHJvcExheWVyLmFkZERlcHRoU3F1YXJlKGNoaWxkcmVuLCAnaG9yaXpvbnRhbCcsIHBhbmVsRGF0YSwgcGFuZWxFbGVtZW50LCAwKTtcbiAgICAgICAgICAgIERvY2tEcm9wTGF5ZXIuYWRkRGVwdGhTcXVhcmUoY2hpbGRyZW4sICd2ZXJ0aWNhbCcsIHBhbmVsRGF0YSwgcGFuZWxFbGVtZW50LCAwKTtcbiAgICAgICAgICAgIGlmICghKGRyYWdnaW5nUGFuZWwgPT09IG51bGwgfHwgZHJhZ2dpbmdQYW5lbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZHJhZ2dpbmdQYW5lbC5wYW5lbExvY2spICYmIHBhbmVsRGF0YS5ncm91cCA9PT0gZHJvcEZyb21QYW5lbC5ncm91cCAmJiBwYW5lbERhdGEgIT09IGRyb3BGcm9tUGFuZWwpIHtcbiAgICAgICAgICAgICAgICAvLyBkb2NrIHRvIHRhYnNcbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9ja0Ryb3BTcXVhcmUsIHsga2V5OiAnbWlkZGxlJywgZGlyZWN0aW9uOiAnbWlkZGxlJywgcGFuZWxEYXRhOiBwYW5lbERhdGEsIHBhbmVsRWxlbWVudDogcGFuZWxFbGVtZW50IH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBib3ggPSBwYW5lbERhdGEucGFyZW50O1xuICAgICAgICAgICAgaWYgKGJveCAmJiBib3guY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIC8vIGRlZXBlciBkcm9wXG4gICAgICAgICAgICAgICAgRG9ja0Ryb3BMYXllci5hZGREZXB0aFNxdWFyZShjaGlsZHJlbiwgYm94Lm1vZGUsIHBhbmVsRGF0YSwgcGFuZWxFbGVtZW50LCAxKTtcbiAgICAgICAgICAgICAgICBpZiAoYm94LnBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICBEb2NrRHJvcExheWVyLmFkZERlcHRoU3F1YXJlKGNoaWxkcmVuLCBib3gucGFyZW50Lm1vZGUsIHBhbmVsRGF0YSwgcGFuZWxFbGVtZW50LCAyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiAnZG9jay1kcm9wLWxheWVyJyB9LCBjaGlsZHJlbikpO1xuICAgIH1cbn1cbkRvY2tEcm9wTGF5ZXIuY29udGV4dFR5cGUgPSBEb2NrQ29udGV4dFR5cGU7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBEb2NrQ29udGV4dFR5cGUgfSBmcm9tIFwiLi9Eb2NrRGF0YVwiO1xuaW1wb3J0IHsgRHJhZ0Ryb3BEaXYgfSBmcm9tIFwiLi9kcmFnZHJvcC9EcmFnRHJvcERpdlwiO1xuaW1wb3J0IHsgRHJhZ1N0YXRlIH0gZnJvbSBcIi4vZHJhZ2Ryb3AvRHJhZ01hbmFnZXJcIjtcbmV4cG9ydCBjbGFzcyBEb2NrRHJvcEVkZ2UgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5nZXRSZWYgPSAocikgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVmID0gcjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkRyYWdPdmVyID0gKGUpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGxldCB7IHBhbmVsRGF0YSwgcGFuZWxFbGVtZW50LCBkcm9wRnJvbVBhbmVsIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgbGV0IGRvY2tJZCA9IHRoaXMuY29udGV4dC5nZXREb2NrSWQoKTtcbiAgICAgICAgICAgIGxldCBkcmFnZ2luZ1BhbmVsID0gRHJhZ1N0YXRlLmdldERhdGEoJ3BhbmVsJywgZG9ja0lkKTtcbiAgICAgICAgICAgIGxldCBmcm9tR3JvdXAgPSB0aGlzLmNvbnRleHQuZ2V0R3JvdXAoZHJvcEZyb21QYW5lbC5ncm91cCk7XG4gICAgICAgICAgICBpZiAoZHJhZ2dpbmdQYW5lbCAmJiAoKF9hID0gZHJhZ2dpbmdQYW5lbC5wYXJlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tb2RlKSA9PT0gJ2Zsb2F0Jykge1xuICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBmbG9hdCBwYW5lbCBpbiBlZGdlIG1vZGVcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgeyBkaXJlY3Rpb24sIG1vZGUsIGRlcHRoIH0gPSB0aGlzLmdldERpcmVjdGlvbihlLCBmcm9tR3JvdXAsIGRyYWdnaW5nUGFuZWwgPT09IHBhbmVsRGF0YSk7XG4gICAgICAgICAgICBkZXB0aCA9IHRoaXMuZ2V0QWN0dWFsRGVwdGgoZGVwdGgsIG1vZGUsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICBpZiAoIWRpcmVjdGlvbiB8fCAoZGlyZWN0aW9uID09PSAnZmxvYXQnICYmIGRyb3BGcm9tUGFuZWwucGFuZWxMb2NrKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5zZXREcm9wUmVjdChudWxsLCAncmVtb3ZlJywgdGhpcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRhcmdldEVsZW1lbnQgPSBwYW5lbEVsZW1lbnQ7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlcHRoOyArK2kpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50ID0gdGFyZ2V0RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHBhbmVsU2l6ZSA9IERyYWdTdGF0ZS5nZXREYXRhKCdwYW5lbFNpemUnLCBkb2NrSWQpO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnNldERyb3BSZWN0KHRhcmdldEVsZW1lbnQsIGRpcmVjdGlvbiwgdGhpcywgZSwgcGFuZWxTaXplKTtcbiAgICAgICAgICAgIGUuYWNjZXB0KCcnKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkRyYWdMZWF2ZSA9IChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuc2V0RHJvcFJlY3QobnVsbCwgJ3JlbW92ZScsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uRHJvcCA9IChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgeyBwYW5lbERhdGEsIGRyb3BGcm9tUGFuZWwgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICBsZXQgZG9ja0lkID0gdGhpcy5jb250ZXh0LmdldERvY2tJZCgpO1xuICAgICAgICAgICAgbGV0IGZyb21Hcm91cCA9IHRoaXMuY29udGV4dC5nZXRHcm91cChkcm9wRnJvbVBhbmVsLmdyb3VwKTtcbiAgICAgICAgICAgIGxldCBzb3VyY2UgPSBEcmFnU3RhdGUuZ2V0RGF0YSgndGFiJywgZG9ja0lkKTtcbiAgICAgICAgICAgIGxldCBkcmFnZ2luZ1BhbmVsID0gRHJhZ1N0YXRlLmdldERhdGEoJ3BhbmVsJywgZG9ja0lkKTtcbiAgICAgICAgICAgIGlmICghc291cmNlKSB7XG4gICAgICAgICAgICAgICAgc291cmNlID0gZHJhZ2dpbmdQYW5lbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBsZXQgeyBkaXJlY3Rpb24sIG1vZGUsIGRlcHRoIH0gPSB0aGlzLmdldERpcmVjdGlvbihlLCBmcm9tR3JvdXAsIGRyYWdnaW5nUGFuZWwgPT09IHBhbmVsRGF0YSk7XG4gICAgICAgICAgICAgICAgZGVwdGggPSB0aGlzLmdldEFjdHVhbERlcHRoKGRlcHRoLCBtb2RlLCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgIGlmICghZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldCA9IHBhbmVsRGF0YTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlcHRoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmRvY2tNb3ZlKHNvdXJjZSwgdGFyZ2V0LCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXREaXJlY3Rpb24oZSwgZ3JvdXAsIHNhbWVQYW5lbCkge1xuICAgICAgICBsZXQgcmVjdCA9IHRoaXMuX3JlZi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbGV0IHdpZHRoUmF0ZSA9IE1hdGgubWluKHJlY3Qud2lkdGgsIDUwMCk7XG4gICAgICAgIGxldCBoZWlnaHRSYXRlID0gTWF0aC5taW4ocmVjdC5oZWlnaHQsIDUwMCk7XG4gICAgICAgIGxldCBsZWZ0ID0gKGUuY2xpZW50WCAtIHJlY3QubGVmdCkgLyB3aWR0aFJhdGU7XG4gICAgICAgIGxldCByaWdodCA9IChyZWN0LnJpZ2h0IC0gZS5jbGllbnRYKSAvIHdpZHRoUmF0ZTtcbiAgICAgICAgbGV0IHRvcCA9IChlLmNsaWVudFkgLSByZWN0LnRvcCkgLyBoZWlnaHRSYXRlO1xuICAgICAgICBsZXQgYm90dG9tID0gKHJlY3QuYm90dG9tIC0gZS5jbGllbnRZKSAvIGhlaWdodFJhdGU7XG4gICAgICAgIGxldCBtaW4gPSBNYXRoLm1pbihsZWZ0LCByaWdodCwgdG9wLCBib3R0b20pO1xuICAgICAgICBsZXQgZGVwdGggPSAwO1xuICAgICAgICBpZiAoZ3JvdXAuZGlzYWJsZURvY2sgfHwgc2FtZVBhbmVsKSB7XG4gICAgICAgICAgICAvLyB1c2UgYW4gaW1wb3NzaWJsZSBtaW4gdmFsdWUgdG8gZGlzYWJsZSBkb2NrIGRyb3BcbiAgICAgICAgICAgIG1pbiA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1pbiA8IDApIHtcbiAgICAgICAgICAgIHJldHVybiB7IGRpcmVjdGlvbjogbnVsbCwgZGVwdGg6IDAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtaW4gPCAwLjA3NSkge1xuICAgICAgICAgICAgZGVwdGggPSAzOyAvLyBkZXB0aCAzIG9yIDRcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtaW4gPCAwLjE1KSB7XG4gICAgICAgICAgICBkZXB0aCA9IDE7IC8vIGRlcHRoIDEgb3IgMlxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1pbiA8IDAuMykge1xuICAgICAgICAgICAgLy8gZGVmYXVsdFxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGdyb3VwLmZsb2F0YWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgZGlyZWN0aW9uOiAnZmxvYXQnLCBtb2RlOiAnZmxvYXQnLCBkZXB0aDogMCB9O1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAobWluKSB7XG4gICAgICAgICAgICBjYXNlIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkaXJlY3Rpb246ICdsZWZ0JywgbW9kZTogJ2hvcml6b250YWwnLCBkZXB0aCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSByaWdodDoge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRpcmVjdGlvbjogJ3JpZ2h0JywgbW9kZTogJ2hvcml6b250YWwnLCBkZXB0aCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSB0b3A6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkaXJlY3Rpb246ICd0b3AnLCBtb2RlOiAndmVydGljYWwnLCBkZXB0aCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBib3R0b206IHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBkaXJlY3Rpb246ICdib3R0b20nLCBtb2RlOiAndmVydGljYWwnLCBkZXB0aCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHByb2JhYmx5IGEgaW52YWxpZCBpbnB1dCBjYXVzaW5nIGV2ZXJ5dGhpbmcgdG8gYmUgTmFOP1xuICAgICAgICByZXR1cm4geyBkaXJlY3Rpb246IG51bGwsIGRlcHRoOiAwIH07XG4gICAgfVxuICAgIGdldEFjdHVhbERlcHRoKGRlcHRoLCBtb2RlLCBkaXJlY3Rpb24pIHtcbiAgICAgICAgbGV0IGFmdGVyUGFuZWwgPSAoZGlyZWN0aW9uID09PSAnYm90dG9tJyB8fCBkaXJlY3Rpb24gPT09ICdyaWdodCcpO1xuICAgICAgICBpZiAoIWRlcHRoKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVwdGg7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHsgcGFuZWxEYXRhIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBsZXQgcHJldmlvdXNUYXJnZXQgPSBwYW5lbERhdGE7XG4gICAgICAgIGxldCB0YXJnZXRCb3ggPSBwYW5lbERhdGEucGFyZW50O1xuICAgICAgICBsZXQgbGFzdERlcHRoID0gMDtcbiAgICAgICAgaWYgKHBhbmVsRGF0YS5wYXJlbnQubW9kZSA9PT0gbW9kZSkge1xuICAgICAgICAgICAgKytkZXB0aDtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodGFyZ2V0Qm94ICYmIGxhc3REZXB0aCA8IGRlcHRoKSB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0Qm94Lm1vZGUgPT09IG1vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoYWZ0ZXJQYW5lbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Qm94LmNoaWxkcmVuW3RhcmdldEJveC5jaGlsZHJlbi5sZW5ndGggLSAxXSAhPT0gcHJldmlvdXNUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvbnQgZ28gZGVlcGVyIGlmIGN1cnJlbnQgdGFyZ2V0IGlzIG9uIGRpZmZlcmVudCBzaWRlIG9mIHRoZSBib3hcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Qm94LmNoaWxkcmVuWzBdICE9PSBwcmV2aW91c1RhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9udCBnbyBkZWVwZXIgaWYgY3VycmVudCB0YXJnZXQgaXMgb24gZGlmZmVyZW50IHNpZGUgb2YgdGhlIGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmV2aW91c1RhcmdldCA9IHRhcmdldEJveDtcbiAgICAgICAgICAgIHRhcmdldEJveCA9IHRhcmdldEJveC5wYXJlbnQ7XG4gICAgICAgICAgICArK2xhc3REZXB0aDtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoZGVwdGggPiBsYXN0RGVwdGgpIHtcbiAgICAgICAgICAgIGRlcHRoIC09IDI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlcHRoO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChEcmFnRHJvcERpdiwgeyBnZXRSZWY6IHRoaXMuZ2V0UmVmLCBjbGFzc05hbWU6ICdkb2NrLWRyb3AtZWRnZScsIG9uRHJhZ092ZXJUOiB0aGlzLm9uRHJhZ092ZXIsIG9uRHJhZ0xlYXZlVDogdGhpcy5vbkRyYWdMZWF2ZSwgb25Ecm9wVDogdGhpcy5vbkRyb3AgfSkpO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0LnNldERyb3BSZWN0KG51bGwsICdyZW1vdmUnLCB0aGlzKTtcbiAgICB9XG59XG5Eb2NrRHJvcEVkZ2UuY29udGV4dFR5cGUgPSBEb2NrQ29udGV4dFR5cGU7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBEb2NrQ29udGV4dFR5cGUgfSBmcm9tIFwiLi9Eb2NrRGF0YVwiO1xuaW1wb3J0IHsgRG9ja1RhYnMgfSBmcm9tIFwiLi9Eb2NrVGFic1wiO1xuaW1wb3J0IHsgRHJhZ0Ryb3BEaXYgfSBmcm9tIFwiLi9kcmFnZHJvcC9EcmFnRHJvcERpdlwiO1xuaW1wb3J0IHsgRHJhZ1N0YXRlIH0gZnJvbSBcIi4vZHJhZ2Ryb3AvRHJhZ01hbmFnZXJcIjtcbmltcG9ydCB7IERvY2tEcm9wTGF5ZXIgfSBmcm9tIFwiLi9Eb2NrRHJvcExheWVyXCI7XG5pbXBvcnQgeyBnZXRGbG9hdFBhbmVsU2l6ZSwgbmV4dFpJbmRleCB9IGZyb20gXCIuL0FsZ29yaXRobVwiO1xuaW1wb3J0IHsgRG9ja0Ryb3BFZGdlIH0gZnJvbSBcIi4vRG9ja0Ryb3BFZGdlXCI7XG5leHBvcnQgY2xhc3MgRG9ja1BhbmVsIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuZ2V0UmVmID0gKHIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3JlZiA9IHI7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7IGRyb3BGcm9tUGFuZWw6IG51bGwsIGRyYWdnaW5nSGVhZGVyOiBmYWxzZSB9O1xuICAgICAgICB0aGlzLm9uRHJhZ092ZXIgPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKERvY2tQYW5lbC5fZHJvcHBpbmdQYW5lbCA9PT0gdGhpcykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB7IHBhbmVsRGF0YSB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIGxldCBkb2NrSWQgPSB0aGlzLmNvbnRleHQuZ2V0RG9ja0lkKCk7XG4gICAgICAgICAgICBsZXQgdGFiID0gRHJhZ1N0YXRlLmdldERhdGEoJ3RhYicsIGRvY2tJZCk7XG4gICAgICAgICAgICBsZXQgcGFuZWwgPSBEcmFnU3RhdGUuZ2V0RGF0YSgncGFuZWwnLCBkb2NrSWQpO1xuICAgICAgICAgICAgaWYgKHRhYiB8fCBwYW5lbCkge1xuICAgICAgICAgICAgICAgIERvY2tQYW5lbC5kcm9wcGluZ1BhbmVsID0gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YWIpIHtcbiAgICAgICAgICAgICAgICBpZiAodGFiLnBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZHJvcEZyb21QYW5lbDogdGFiLnBhcmVudCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBhIGZha2UgcGFuZWxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRyb3BGcm9tUGFuZWw6IHsgYWN0aXZlSWQ6ICcnLCB0YWJzOiBbXSwgZ3JvdXA6IHRhYi5ncm91cCB9IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhbmVsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRyb3BGcm9tUGFuZWw6IHBhbmVsIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBkcm9wIHRvIG1vdmUgaW4gZmxvYXQgbW9kZVxuICAgICAgICB0aGlzLm9uUGFuZWxIZWFkZXJEcmFnU3RhcnQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGxldCB7IHBhbmVsRGF0YSB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIGxldCB7IHBhcmVudCwgeCwgeSwgeiB9ID0gcGFuZWxEYXRhO1xuICAgICAgICAgICAgbGV0IGRvY2tJZCA9IHRoaXMuY29udGV4dC5nZXREb2NrSWQoKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnQgJiYgcGFyZW50Lm1vZGUgPT09ICdmbG9hdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZpbmdYID0geDtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZpbmdZID0geTtcbiAgICAgICAgICAgICAgICAvLyBoaWRlIHRoZSBwYW5lbCwgYnV0IG5vdCBjcmVhdGUgZHJhZyBsYXllciBlbGVtZW50XG4gICAgICAgICAgICAgICAgZXZlbnQuc2V0RGF0YSh7IHBhbmVsOiB0aGlzLnByb3BzLnBhbmVsRGF0YSB9LCBkb2NrSWQpO1xuICAgICAgICAgICAgICAgIGV2ZW50LnN0YXJ0RHJhZyhudWxsLCBudWxsKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRmxvYXRQb2ludGVyRG93bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHRhYkdyb3VwID0gdGhpcy5jb250ZXh0LmdldEdyb3VwKHBhbmVsRGF0YS5ncm91cCk7XG4gICAgICAgICAgICAgICAgbGV0IFtwYW5lbFdpZHRoLCBwYW5lbEhlaWdodF0gPSBnZXRGbG9hdFBhbmVsU2l6ZSh0aGlzLl9yZWYsIHRhYkdyb3VwKTtcbiAgICAgICAgICAgICAgICBldmVudC5zZXREYXRhKHsgcGFuZWw6IHBhbmVsRGF0YSwgcGFuZWxTaXplOiBbcGFuZWxXaWR0aCwgcGFuZWxIZWlnaHRdIH0sIGRvY2tJZCk7XG4gICAgICAgICAgICAgICAgZXZlbnQuc3RhcnREcmFnKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRyYWdnaW5nSGVhZGVyOiB0cnVlIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uUGFuZWxIZWFkZXJEcmFnTW92ZSA9IChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLmNvbnRleHQuZ2V0TGF5b3V0U2l6ZSgpO1xuICAgICAgICAgICAgbGV0IHsgcGFuZWxEYXRhIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgcGFuZWxEYXRhLnggPSB0aGlzLl9tb3ZpbmdYICsgZS5keDtcbiAgICAgICAgICAgIHBhbmVsRGF0YS55ID0gdGhpcy5fbW92aW5nWSArIGUuZHk7XG4gICAgICAgICAgICBpZiAod2lkdGggPiAyMDAgJiYgaGVpZ2h0ID4gMjAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhbmVsRGF0YS55IDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBwYW5lbERhdGEueSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhbmVsRGF0YS55ID4gaGVpZ2h0IC0gMTYpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFuZWxEYXRhLnkgPSBoZWlnaHQgLSAxNjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBhbmVsRGF0YS54ICsgcGFuZWxEYXRhLncgPCAxNikge1xuICAgICAgICAgICAgICAgICAgICBwYW5lbERhdGEueCA9IDE2IC0gcGFuZWxEYXRhLnc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBhbmVsRGF0YS54ID4gd2lkdGggLSAxNikge1xuICAgICAgICAgICAgICAgICAgICBwYW5lbERhdGEueCA9IHdpZHRoIC0gMTY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uUGFuZWxIZWFkZXJEcmFnRW5kID0gKGUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fdW5tb3VudGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRyYWdnaW5nSGVhZGVyOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQub25TaWxlbnRDaGFuZ2UodGhpcy5wcm9wcy5wYW5lbERhdGEuYWN0aXZlSWQsICdtb3ZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25QYW5lbENvcm5lckRyYWdUTCA9IChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uUGFuZWxDb3JuZXJEcmFnKGUsICd0bCcpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uUGFuZWxDb3JuZXJEcmFnVFIgPSAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vblBhbmVsQ29ybmVyRHJhZyhlLCAndHInKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblBhbmVsQ29ybmVyRHJhZ0JMID0gKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25QYW5lbENvcm5lckRyYWcoZSwgJ2JsJyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25QYW5lbENvcm5lckRyYWdCUiA9IChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uUGFuZWxDb3JuZXJEcmFnKGUsICdicicpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uUGFuZWxDb3JuZXJEcmFnTW92ZSA9IChlKSA9PiB7XG4gICAgICAgICAgICBsZXQgeyBwYW5lbERhdGEgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICBsZXQgeyBkeCwgZHkgfSA9IGU7XG4gICAgICAgICAgICBpZiAodGhpcy5fbW92aW5nQ29ybmVyLnN0YXJ0c1dpdGgoJ3QnKSkge1xuICAgICAgICAgICAgICAgIC8vIHdoZW4gbW92aW5nIHRvcCBjb3JuZXJzLCBkb250IGxldCBpdCBtb3ZlIGhlYWRlciBvdXQgb2Ygc2NyZWVuXG4gICAgICAgICAgICAgICAgbGV0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5jb250ZXh0LmdldExheW91dFNpemUoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fbW92aW5nWSArIGR5IDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBkeSA9IC10aGlzLl9tb3ZpbmdZO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLl9tb3ZpbmdZICsgZHkgPiBoZWlnaHQgLSAxNikge1xuICAgICAgICAgICAgICAgICAgICBkeSA9IGhlaWdodCAtIDE2IC0gdGhpcy5fbW92aW5nWTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuX21vdmluZ0Nvcm5lcikge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RsJzoge1xuICAgICAgICAgICAgICAgICAgICBwYW5lbERhdGEueCA9IHRoaXMuX21vdmluZ1ggKyBkeDtcbiAgICAgICAgICAgICAgICAgICAgcGFuZWxEYXRhLncgPSB0aGlzLl9tb3ZpbmdXIC0gZHg7XG4gICAgICAgICAgICAgICAgICAgIHBhbmVsRGF0YS55ID0gdGhpcy5fbW92aW5nWSArIGR5O1xuICAgICAgICAgICAgICAgICAgICBwYW5lbERhdGEuaCA9IHRoaXMuX21vdmluZ0ggLSBkeTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ3RyJzoge1xuICAgICAgICAgICAgICAgICAgICBwYW5lbERhdGEudyA9IHRoaXMuX21vdmluZ1cgKyBkeDtcbiAgICAgICAgICAgICAgICAgICAgcGFuZWxEYXRhLnkgPSB0aGlzLl9tb3ZpbmdZICsgZHk7XG4gICAgICAgICAgICAgICAgICAgIHBhbmVsRGF0YS5oID0gdGhpcy5fbW92aW5nSCAtIGR5O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnYmwnOiB7XG4gICAgICAgICAgICAgICAgICAgIHBhbmVsRGF0YS54ID0gdGhpcy5fbW92aW5nWCArIGR4O1xuICAgICAgICAgICAgICAgICAgICBwYW5lbERhdGEudyA9IHRoaXMuX21vdmluZ1cgLSBkeDtcbiAgICAgICAgICAgICAgICAgICAgcGFuZWxEYXRhLmggPSB0aGlzLl9tb3ZpbmdIICsgZHk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdicic6IHtcbiAgICAgICAgICAgICAgICAgICAgcGFuZWxEYXRhLncgPSB0aGlzLl9tb3ZpbmdXICsgZHg7XG4gICAgICAgICAgICAgICAgICAgIHBhbmVsRGF0YS5oID0gdGhpcy5fbW92aW5nSCArIGR5O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25QYW5lbENvcm5lckRyYWdFbmQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0Lm9uU2lsZW50Q2hhbmdlKHRoaXMucHJvcHMucGFuZWxEYXRhLmFjdGl2ZUlkLCAnbW92ZScpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uRmxvYXRQb2ludGVyRG93biA9ICgpID0+IHtcbiAgICAgICAgICAgIGxldCB7IHBhbmVsRGF0YSB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIGxldCB7IHogfSA9IHBhbmVsRGF0YTtcbiAgICAgICAgICAgIGxldCBuZXdaID0gbmV4dFpJbmRleCh6KTtcbiAgICAgICAgICAgIGlmIChuZXdaICE9PSB6KSB7XG4gICAgICAgICAgICAgICAgcGFuZWxEYXRhLnogPSBuZXdaO1xuICAgICAgICAgICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblBhbmVsQ2xpY2tlZCA9IChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlLm5hdGl2ZUV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgIGlmICghdGhpcy5fcmVmLmNvbnRhaW5zKHRoaXMuX3JlZi5vd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpICYmIHRhcmdldCBpbnN0YW5jZW9mIE5vZGUgJiYgdGhpcy5fcmVmLmNvbnRhaW5zKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWYucXVlcnlTZWxlY3RvcignLmRvY2stYmFyJykuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fdW5tb3VudGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHN0YXRpYyBzZXQgZHJvcHBpbmdQYW5lbChwYW5lbCkge1xuICAgICAgICBpZiAoRG9ja1BhbmVsLl9kcm9wcGluZ1BhbmVsID09PSBwYW5lbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChEb2NrUGFuZWwuX2Ryb3BwaW5nUGFuZWwpIHtcbiAgICAgICAgICAgIERvY2tQYW5lbC5fZHJvcHBpbmdQYW5lbC5vbkRyYWdPdmVyT3RoZXJQYW5lbCgpO1xuICAgICAgICB9XG4gICAgICAgIERvY2tQYW5lbC5fZHJvcHBpbmdQYW5lbCA9IHBhbmVsO1xuICAgIH1cbiAgICBvbkRyYWdPdmVyT3RoZXJQYW5lbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZHJvcEZyb21QYW5lbCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRyb3BGcm9tUGFuZWw6IG51bGwgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25QYW5lbENvcm5lckRyYWcoZSwgY29ybmVyKSB7XG4gICAgICAgIGxldCB7IHBhcmVudCwgeCwgeSwgdywgaCB9ID0gdGhpcy5wcm9wcy5wYW5lbERhdGE7XG4gICAgICAgIGlmIChwYXJlbnQgJiYgcGFyZW50Lm1vZGUgPT09ICdmbG9hdCcpIHtcbiAgICAgICAgICAgIHRoaXMuX21vdmluZ0Nvcm5lciA9IGNvcm5lcjtcbiAgICAgICAgICAgIHRoaXMuX21vdmluZ1ggPSB4O1xuICAgICAgICAgICAgdGhpcy5fbW92aW5nWSA9IHk7XG4gICAgICAgICAgICB0aGlzLl9tb3ZpbmdXID0gdztcbiAgICAgICAgICAgIHRoaXMuX21vdmluZ0ggPSBoO1xuICAgICAgICAgICAgZS5zdGFydERyYWcobnVsbCwgbnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgeyBkcm9wRnJvbVBhbmVsLCBkcmFnZ2luZ0hlYWRlciB9ID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgbGV0IHsgcGFuZWxEYXRhLCBzaXplIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBsZXQgeyBtaW5XaWR0aCwgbWluSGVpZ2h0LCBncm91cCwgaWQsIHBhcmVudCwgcGFuZWxMb2NrIH0gPSBwYW5lbERhdGE7XG4gICAgICAgIGxldCBzdHlsZU5hbWUgPSBncm91cDtcbiAgICAgICAgbGV0IHRhYkdyb3VwID0gdGhpcy5jb250ZXh0LmdldEdyb3VwKGdyb3VwKTtcbiAgICAgICAgbGV0IHsgd2lkdGhGbGV4LCBoZWlnaHRGbGV4IH0gPSB0YWJHcm91cDtcbiAgICAgICAgaWYgKHBhbmVsTG9jaykge1xuICAgICAgICAgICAgbGV0IHsgcGFuZWxTdHlsZSwgd2lkdGhGbGV4OiBwYW5lbFdpZHRoRmxleCwgaGVpZ2h0RmxleDogcGFuZWxIZWlnaHRGbGV4IH0gPSBwYW5lbExvY2s7XG4gICAgICAgICAgICBpZiAocGFuZWxTdHlsZSkge1xuICAgICAgICAgICAgICAgIHN0eWxlTmFtZSA9IHBhbmVsU3R5bGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhbmVsV2lkdGhGbGV4ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHdpZHRoRmxleCA9IHBhbmVsV2lkdGhGbGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYW5lbEhlaWdodEZsZXggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0RmxleCA9IHBhbmVsSGVpZ2h0RmxleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgcGFuZWxDbGFzcztcbiAgICAgICAgaWYgKHN0eWxlTmFtZSkge1xuICAgICAgICAgICAgcGFuZWxDbGFzcyA9IHN0eWxlTmFtZVxuICAgICAgICAgICAgICAgIC5zcGxpdCgnICcpXG4gICAgICAgICAgICAgICAgLm1hcCgobmFtZSkgPT4gYGRvY2stc3R5bGUtJHtuYW1lfWApXG4gICAgICAgICAgICAgICAgLmpvaW4oJyAnKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaXNNYXggPSAocGFyZW50ID09PSBudWxsIHx8IHBhcmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyZW50Lm1vZGUpID09PSAnbWF4aW1pemUnO1xuICAgICAgICBsZXQgaXNGbG9hdCA9IChwYXJlbnQgPT09IG51bGwgfHwgcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJlbnQubW9kZSkgPT09ICdmbG9hdCc7XG4gICAgICAgIGxldCBpc0hCb3ggPSAocGFyZW50ID09PSBudWxsIHx8IHBhcmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyZW50Lm1vZGUpID09PSAnaG9yaXpvbnRhbCc7XG4gICAgICAgIGxldCBpc1ZCb3ggPSAocGFyZW50ID09PSBudWxsIHx8IHBhcmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyZW50Lm1vZGUpID09PSAndmVydGljYWwnO1xuICAgICAgICBsZXQgcG9pbnRlckRvd25DYWxsYmFjayA9IHRoaXMub25GbG9hdFBvaW50ZXJEb3duO1xuICAgICAgICBsZXQgb25QYW5lbEhlYWRlckRyYWdTdGFydCA9IHRoaXMub25QYW5lbEhlYWRlckRyYWdTdGFydDtcbiAgICAgICAgaWYgKCFpc0Zsb2F0IHx8IGlzTWF4KSB7XG4gICAgICAgICAgICBwb2ludGVyRG93bkNhbGxiYWNrID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNNYXgpIHtcbiAgICAgICAgICAgIGRyb3BGcm9tUGFuZWwgPSBudWxsO1xuICAgICAgICAgICAgb25QYW5lbEhlYWRlckRyYWdTdGFydCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNscyA9IGBkb2NrLXBhbmVsICR7cGFuZWxDbGFzcyA/IHBhbmVsQ2xhc3MgOiAnJ30ke2Ryb3BGcm9tUGFuZWwgPyAnIGRvY2stcGFuZWwtZHJvcHBpbmcnIDogJyd9JHtkcmFnZ2luZ0hlYWRlciA/ICcgZHJhZ2dpbmcnIDogJyd9YDtcbiAgICAgICAgbGV0IGZsZXggPSAxO1xuICAgICAgICBpZiAoaXNIQm94ICYmIHdpZHRoRmxleCAhPSBudWxsKSB7XG4gICAgICAgICAgICBmbGV4ID0gd2lkdGhGbGV4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzVkJveCAmJiBoZWlnaHRGbGV4ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGZsZXggPSBoZWlnaHRGbGV4O1xuICAgICAgICB9XG4gICAgICAgIGxldCBmbGV4R3JvdyA9IGZsZXggKiBzaXplO1xuICAgICAgICBsZXQgZmxleFNocmluayA9IGZsZXggKiAxMDAwMDAwO1xuICAgICAgICBpZiAoZmxleFNocmluayA8IDEpIHtcbiAgICAgICAgICAgIGZsZXhTaHJpbmsgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzdHlsZSA9IHsgbWluV2lkdGgsIG1pbkhlaWdodCwgZmxleDogYCR7ZmxleEdyb3d9ICR7ZmxleFNocmlua30gJHtzaXplfXB4YCB9O1xuICAgICAgICBpZiAoaXNGbG9hdCkge1xuICAgICAgICAgICAgc3R5bGUubGVmdCA9IHBhbmVsRGF0YS54O1xuICAgICAgICAgICAgc3R5bGUudG9wID0gcGFuZWxEYXRhLnk7XG4gICAgICAgICAgICBzdHlsZS53aWR0aCA9IHBhbmVsRGF0YS53O1xuICAgICAgICAgICAgc3R5bGUuaGVpZ2h0ID0gcGFuZWxEYXRhLmg7XG4gICAgICAgICAgICBzdHlsZS56SW5kZXggPSBwYW5lbERhdGEuejtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZHJvcHBpbmdMYXllcjtcbiAgICAgICAgaWYgKGRyb3BGcm9tUGFuZWwpIHtcbiAgICAgICAgICAgIGxldCBkcm9wRnJvbUdyb3VwID0gdGhpcy5jb250ZXh0LmdldEdyb3VwKGRyb3BGcm9tUGFuZWwuZ3JvdXApO1xuICAgICAgICAgICAgbGV0IGRvY2tJZCA9IHRoaXMuY29udGV4dC5nZXREb2NrSWQoKTtcbiAgICAgICAgICAgIGlmICghZHJvcEZyb21Hcm91cC50YWJMb2NrZWQgfHwgRHJhZ1N0YXRlLmdldERhdGEoJ3RhYicsIGRvY2tJZCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIG5vdCBhbGxvd2VkIGxvY2tlZCB0YWIgdG8gY3JlYXRlIG5ldyBwYW5lbFxuICAgICAgICAgICAgICAgIGxldCBEb2NrRHJvcENsYXNzID0gdGhpcy5jb250ZXh0LnVzZUVkZ2VEcm9wKCkgPyBEb2NrRHJvcEVkZ2UgOiBEb2NrRHJvcExheWVyO1xuICAgICAgICAgICAgICAgIGRyb3BwaW5nTGF5ZXIgPSBSZWFjdC5jcmVhdGVFbGVtZW50KERvY2tEcm9wQ2xhc3MsIHsgcGFuZWxEYXRhOiBwYW5lbERhdGEsIHBhbmVsRWxlbWVudDogdGhpcy5fcmVmLCBkcm9wRnJvbVBhbmVsOiBkcm9wRnJvbVBhbmVsIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChEcmFnRHJvcERpdiwgeyBnZXRSZWY6IHRoaXMuZ2V0UmVmLCBjbGFzc05hbWU6IGNscywgc3R5bGU6IHN0eWxlLCBcImRhdGEtZG9ja2lkXCI6IGlkLCBvbk1vdXNlRG93bkNhcHR1cmU6IHBvaW50ZXJEb3duQ2FsbGJhY2ssIG9uVG91Y2hTdGFydENhcHR1cmU6IHBvaW50ZXJEb3duQ2FsbGJhY2ssIG9uRHJhZ092ZXJUOiBpc0Zsb2F0ID8gbnVsbCA6IHRoaXMub25EcmFnT3Zlciwgb25DbGljazogdGhpcy5vblBhbmVsQ2xpY2tlZCB9LFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEb2NrVGFicywgeyBwYW5lbERhdGE6IHBhbmVsRGF0YSwgb25QYW5lbERyYWdTdGFydDogb25QYW5lbEhlYWRlckRyYWdTdGFydCwgb25QYW5lbERyYWdNb3ZlOiB0aGlzLm9uUGFuZWxIZWFkZXJEcmFnTW92ZSwgb25QYW5lbERyYWdFbmQ6IHRoaXMub25QYW5lbEhlYWRlckRyYWdFbmQgfSksXG4gICAgICAgICAgICBpc0Zsb2F0ID9cbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJhZ0Ryb3BEaXYsIHsga2V5OiBcImRyYWctc2l6ZS10LWxcIiwgY2xhc3NOYW1lOiBcImRvY2stcGFuZWwtZHJhZy1zaXplIGRvY2stcGFuZWwtZHJhZy1zaXplLXQtbFwiLCBvbkRyYWdTdGFydFQ6IHRoaXMub25QYW5lbENvcm5lckRyYWdUTCwgb25EcmFnTW92ZVQ6IHRoaXMub25QYW5lbENvcm5lckRyYWdNb3ZlLCBvbkRyYWdFbmRUOiB0aGlzLm9uUGFuZWxDb3JuZXJEcmFnRW5kIH0pLFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERyYWdEcm9wRGl2LCB7IGtleTogXCJkcmFnLXNpemUtdC1yXCIsIGNsYXNzTmFtZTogXCJkb2NrLXBhbmVsLWRyYWctc2l6ZSBkb2NrLXBhbmVsLWRyYWctc2l6ZS10LXJcIiwgb25EcmFnU3RhcnRUOiB0aGlzLm9uUGFuZWxDb3JuZXJEcmFnVFIsIG9uRHJhZ01vdmVUOiB0aGlzLm9uUGFuZWxDb3JuZXJEcmFnTW92ZSwgb25EcmFnRW5kVDogdGhpcy5vblBhbmVsQ29ybmVyRHJhZ0VuZCB9KSxcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEcmFnRHJvcERpdiwgeyBrZXk6IFwiZHJhZy1zaXplLWItbFwiLCBjbGFzc05hbWU6IFwiZG9jay1wYW5lbC1kcmFnLXNpemUgZG9jay1wYW5lbC1kcmFnLXNpemUtYi1sXCIsIG9uRHJhZ1N0YXJ0VDogdGhpcy5vblBhbmVsQ29ybmVyRHJhZ0JMLCBvbkRyYWdNb3ZlVDogdGhpcy5vblBhbmVsQ29ybmVyRHJhZ01vdmUsIG9uRHJhZ0VuZFQ6IHRoaXMub25QYW5lbENvcm5lckRyYWdFbmQgfSksXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJhZ0Ryb3BEaXYsIHsga2V5OiBcImRyYWctc2l6ZS1iLXJcIiwgY2xhc3NOYW1lOiBcImRvY2stcGFuZWwtZHJhZy1zaXplIGRvY2stcGFuZWwtZHJhZy1zaXplLWItclwiLCBvbkRyYWdTdGFydFQ6IHRoaXMub25QYW5lbENvcm5lckRyYWdCUiwgb25EcmFnTW92ZVQ6IHRoaXMub25QYW5lbENvcm5lckRyYWdNb3ZlLCBvbkRyYWdFbmRUOiB0aGlzLm9uUGFuZWxDb3JuZXJEcmFnRW5kIH0pXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIGRyb3BwaW5nTGF5ZXIpKTtcbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIGlmIChEb2NrUGFuZWwuX2Ryb3BwaW5nUGFuZWwgPT09IHRoaXMpIHtcbiAgICAgICAgICAgIERvY2tQYW5lbC5kcm9wcGluZ1BhbmVsID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl91bm1vdW50ZWQgPSB0cnVlO1xuICAgIH1cbn1cbkRvY2tQYW5lbC5jb250ZXh0VHlwZSA9IERvY2tDb250ZXh0VHlwZTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5wb3B1cFdpbmRvd0JvcmRlciA9IGV4cG9ydHMucG9wdXBTdXBwb3J0ZWQgPSBleHBvcnRzLmlzU2FmYXJpID0gZXhwb3J0cy5nZXJXaW5kb3dCb3JkZXIgPSB2b2lkIDA7XG5jb25zdCBib3dzZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiYm93c2VyXCIpKTtcbmNvbnN0IGJyb3dzZXIgPSB0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiBib3dzZXJfMS5kZWZhdWx0LmdldFBhcnNlcih3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5mdW5jdGlvbiBnZXJXaW5kb3dCb3JkZXIoKSB7XG4gICAgc3dpdGNoIChicm93c2VyID09PSBudWxsIHx8IGJyb3dzZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJyb3dzZXIuZ2V0T1NOYW1lKHRydWUpKSB7XG4gICAgICAgIGNhc2UgJ3dpbmRvd3MnOiB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICAgICAgc3dpdGNoIChicm93c2VyLmdldEJyb3dzZXJOYW1lKHRydWUpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZmlyZWZveCc6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFs2OCwgOCwgOF07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21pY3Jvc29mdCBlZGdlJzpcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gWzYyLCA4LCA4XTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgLy9jYXNlICdjaHJvbWUnOlxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IFs2MCwgOCwgOF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAod2luZG93LmRldmljZVBpeGVsUmF0aW8gPiAxKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0WzBdIC09IDI7XG4gICAgICAgICAgICAgICAgcmVzdWx0WzFdIC09IDE7XG4gICAgICAgICAgICAgICAgcmVzdWx0WzJdIC09IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ21hY29zJzoge1xuICAgICAgICAgICAgc3dpdGNoIChicm93c2VyLmdldEJyb3dzZXJOYW1lKHRydWUpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2FmYXJpJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyMiwgMCwgMF07XG4gICAgICAgICAgICAgICAgY2FzZSAnZmlyZWZveCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNTksIDAsIDBdO1xuICAgICAgICAgICAgICAgIC8vY2FzZSAnY2hyb21lJzpcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzUxLCAwLCAwXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gWzYwLCA4LCA4XTtcbn1cbmV4cG9ydHMuZ2VyV2luZG93Qm9yZGVyID0gZ2VyV2luZG93Qm9yZGVyO1xuZXhwb3J0cy5pc1NhZmFyaSA9IChicm93c2VyID09PSBudWxsIHx8IGJyb3dzZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGJyb3dzZXIuZ2V0QnJvd3Nlck5hbWUodHJ1ZSkpID09PSAnc2FmYXJpJztcbmV4cG9ydHMucG9wdXBTdXBwb3J0ZWQgPSAoYnJvd3NlciA9PT0gbnVsbCB8fCBicm93c2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBicm93c2VyLmdldFBsYXRmb3JtVHlwZSgpKSA9PT0gJ2Rlc2t0b3AnO1xuZXhwb3J0cy5wb3B1cFdpbmRvd0JvcmRlciA9IGdlcldpbmRvd0JvcmRlcigpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLm1hcFdpbmRvd1RvRWxlbWVudCA9IGV4cG9ydHMubWFwRWxlbWVudFRvU2NyZWVuUmVjdCA9IGV4cG9ydHMuZXN0aW1hdGVXaW5kb3dCb3JkZXIgPSBleHBvcnRzLmVzdGltYXRlQnJvd3Nlclpvb20gPSB2b2lkIDA7XG5jb25zdCBCcm93c2VyUG9wdXBXaW5kb3dfMSA9IHJlcXVpcmUoXCIuL0Jyb3dzZXJQb3B1cFdpbmRvd1wiKTtcbmZ1bmN0aW9uIGVzdGltYXRlQnJvd3Nlclpvb20oX3dpbmRvdykge1xuICAgIC8vIG9uZSBvZiB0aGVtIG1pZ2h0IGJlIG9mZiBieSBhIGxvdCBkdWUgdG8gZGV2ZWxvcGVyIGNvbnNvbGUgb3Igb3RoZXIgYnJvd3NlciBwbHVnaW5cbiAgICBsZXQgW3RvcEJvcmRlciwgc2lkZUJvcmRlciwgYm90dG9tQm9yZGVyXSA9IEJyb3dzZXJQb3B1cFdpbmRvd18xLmdlcldpbmRvd0JvcmRlcigpO1xuICAgIGlmIChfd2luZG93Lm91dGVyV2lkdGggPT09IF93aW5kb3cuc2NyZWVuLmF2YWlsV2lkdGgpIHtcbiAgICAgICAgc2lkZUJvcmRlciA9IDA7XG4gICAgICAgIGJvdHRvbUJvcmRlciA9IDA7XG4gICAgfVxuICAgIGxldCB4UmF0aW8gPSAoX3dpbmRvdy5vdXRlcldpZHRoIC0gc2lkZUJvcmRlciAqIDIpIC8gX3dpbmRvdy5pbm5lcldpZHRoO1xuICAgIGxldCB5UmF0aW8gPSAoX3dpbmRvdy5vdXRlckhlaWdodCAtIHRvcEJvcmRlciAtIGJvdHRvbUJvcmRlcikgLyBfd2luZG93LmlubmVySGVpZ2h0O1xuICAgIGxldCB6b29tUmF0aW8gPSBNYXRoLm1pbih5UmF0aW8sIHhSYXRpbyk7XG4gICAgaWYgKHpvb21SYXRpbyA+IDEuOCkge1xuICAgICAgICB6b29tUmF0aW8gPSBNYXRoLnJvdW5kKHpvb21SYXRpbyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHpvb21SYXRpbyA+IDAuNzMpIHtcbiAgICAgICAgem9vbVJhdGlvID0gTWF0aC5yb3VuZCh6b29tUmF0aW8gKiAyMCkgLyAyMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHpvb21SYXRpbyA9IDIgLyBNYXRoLnJvdW5kKDIgLyB6b29tUmF0aW8pO1xuICAgIH1cbiAgICByZXR1cm4gem9vbVJhdGlvO1xufVxuZXhwb3J0cy5lc3RpbWF0ZUJyb3dzZXJab29tID0gZXN0aW1hdGVCcm93c2VyWm9vbTtcbmZ1bmN0aW9uIGVzdGltYXRlV2luZG93Qm9yZGVyKF93aW5kb3csIGFkZEJvcmRlciA9IGZhbHNlKSB7XG4gICAgbGV0IHpvb20gPSBfd2luZG93ID8gZXN0aW1hdGVCcm93c2VyWm9vbShfd2luZG93KSA6IDE7XG4gICAgbGV0IHhCb3JkZXIgPSAoX3dpbmRvdy5vdXRlcldpZHRoIC0gX3dpbmRvdy5pbm5lcldpZHRoICogem9vbSkgPj4gMTtcbiAgICBsZXQgeUJvcmRlciA9IE1hdGgucm91bmQoX3dpbmRvdy5vdXRlckhlaWdodCAtIF93aW5kb3cuaW5uZXJIZWlnaHQgKiB6b29tKTtcbiAgICBpZiAoeEJvcmRlciA+IDMyKSB7XG4gICAgICAgIC8vIHByb2JhYmx5IGJlY2F1c2Ugb2YgZGVidWdnZXIgY29uc29sZSwgYXNzdW1lIGl0J3MgaW4gdGhlIHJpZ2h0IHNpZGVcbiAgICAgICAgeEJvcmRlciA9IDg7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB5Qm9yZGVyIC09IHhCb3JkZXI7XG4gICAgfVxuICAgIHJldHVybiBbeEJvcmRlciwgeUJvcmRlciwgem9vbV07XG59XG5leHBvcnRzLmVzdGltYXRlV2luZG93Qm9yZGVyID0gZXN0aW1hdGVXaW5kb3dCb3JkZXI7XG5jbGFzcyBNYXBSZWN0MkQge1xuICAgIGluaXQoeDEsIHkxLCB3MSwgaDEsIHgyLCB5MiwgdzIsIGgyKSB7XG4gICAgICAgIHRoaXMuc2NhbGVYID0gdzIgLyB3MTtcbiAgICAgICAgdGhpcy5zY2FsZVkgPSBoMiAvIGgxO1xuICAgICAgICB0aGlzLm9mZnNldFggPSB4MiAtIHgxICogdGhpcy5zY2FsZVg7XG4gICAgICAgIHRoaXMub2Zmc2V0WSA9IHkyIC0geTEgKiB0aGlzLnNjYWxlWTtcbiAgICB9XG4gICAgbWFwKHB0KSB7XG4gICAgICAgIHJldHVybiB7IHg6IHB0LnggKiB0aGlzLnNjYWxlWCArIHRoaXMub2Zmc2V0WCwgeTogcHQueSAqIHRoaXMuc2NhbGVZICsgdGhpcy5vZmZzZXRZIH07XG4gICAgfVxuICAgIHJldmVydE1hcChwdCkge1xuICAgICAgICByZXR1cm4geyB4OiAocHQueCAtIHRoaXMub2Zmc2V0WCkgLyB0aGlzLnNjYWxlWCwgeTogKHB0LnkgLSB0aGlzLm9mZnNldFkpIC8gdGhpcy5zY2FsZVkgfTtcbiAgICB9XG59XG5mdW5jdGlvbiBtYXBFbGVtZW50VG9TY3JlZW5SZWN0KGVsZW1lbnQsIHJlY3QpIHtcbiAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGxldCBjbGllbnRSZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBsZXQgbWFwUmVjdCA9IG5ldyBNYXBSZWN0MkQoKTtcbiAgICBtYXBSZWN0LmluaXQoMCwgMCwgZWxlbWVudC5vZmZzZXRXaWR0aCwgZWxlbWVudC5vZmZzZXRIZWlnaHQsIGNsaWVudFJlY3QueCwgY2xpZW50UmVjdC55LCBjbGllbnRSZWN0LndpZHRoLCBjbGllbnRSZWN0LmhlaWdodCk7XG4gICAgbGV0IG1hcHBlZFJlY3Q7XG4gICAgaWYgKHJlY3QpIHtcbiAgICAgICAgbGV0IHsgeCwgeSB9ID0gbWFwUmVjdC5tYXAoeyB4OiByZWN0LmxlZnQsIHk6IHJlY3QudG9wIH0pO1xuICAgICAgICBsZXQgeyB4OiB4MiwgeTogeTIgfSA9IG1hcFJlY3QubWFwKHsgeDogcmVjdC5sZWZ0ICsgcmVjdC53aWR0aCwgeTogcmVjdC50b3AgKyByZWN0LmhlaWdodCB9KTtcbiAgICAgICAgbWFwcGVkUmVjdCA9IHsgbGVmdDogeCwgdG9wOiB5LCB3aWR0aDogeDIgLSB4LCBoZWlnaHQ6IHkyIC0geSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWFwcGVkUmVjdCA9IHtcbiAgICAgICAgICAgIGxlZnQ6IGNsaWVudFJlY3QubGVmdCxcbiAgICAgICAgICAgIHRvcDogY2xpZW50UmVjdC50b3AsXG4gICAgICAgICAgICB3aWR0aDogY2xpZW50UmVjdC53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogY2xpZW50UmVjdC5oZWlnaHQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGxldCBfZG9jdW1lbnQgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQ7XG4gICAgbGV0IF93aW5kb3cgPSBfZG9jdW1lbnQuZGVmYXVsdFZpZXc7XG4gICAgaWYgKCFfd2luZG93KSB7XG4gICAgICAgIHJldHVybiBjbGllbnRSZWN0O1xuICAgIH1cbiAgICAvLyByZWN1cnNpdmVseSBnZXQgcmVjdCBpZiBpdCdzIGFuIGlmcmFtZVxuICAgIGlmIChfd2luZG93LmZyYW1lRWxlbWVudCkge1xuICAgICAgICByZXR1cm4gbWFwRWxlbWVudFRvU2NyZWVuUmVjdChfd2luZG93LmZyYW1lRWxlbWVudCwgbWFwcGVkUmVjdCk7XG4gICAgfVxuICAgIGxldCBbeEJvcmRlciwgeUJvcmRlciwgem9vbV0gPSBlc3RpbWF0ZVdpbmRvd0JvcmRlcihfd2luZG93KTtcbiAgICBpZiAoem9vbSAhPT0gMSkge1xuICAgICAgICBtYXBwZWRSZWN0LmxlZnQgKj0gem9vbTtcbiAgICAgICAgbWFwcGVkUmVjdC50b3AgKj0gem9vbTtcbiAgICAgICAgbWFwcGVkUmVjdC53aWR0aCAqPSB6b29tO1xuICAgICAgICBtYXBwZWRSZWN0LmhlaWdodCAqPSB6b29tO1xuICAgIH1cbiAgICBtYXBwZWRSZWN0LmxlZnQgKz0gX3dpbmRvdy5zY3JlZW5YICsgeEJvcmRlcjtcbiAgICBtYXBwZWRSZWN0LnRvcCArPSBfd2luZG93LnNjcmVlblkgKyB5Qm9yZGVyO1xuICAgIHJldHVybiBtYXBwZWRSZWN0O1xufVxuZXhwb3J0cy5tYXBFbGVtZW50VG9TY3JlZW5SZWN0ID0gbWFwRWxlbWVudFRvU2NyZWVuUmVjdDtcbmZ1bmN0aW9uIG1hcFdpbmRvd1RvRWxlbWVudCh0YXJnZXRFbGVtZW50LCBmcm9tV2luZG93LCBmcm9tUmVjdCwgcmVtb3ZlQm9yZGVyID0gdHJ1ZSkge1xuICAgIGlmICghdGFyZ2V0RWxlbWVudCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKGZyb21XaW5kb3cpIHtcbiAgICAgICAgZnJvbVJlY3QgPSB7XG4gICAgICAgICAgICBsZWZ0OiBmcm9tV2luZG93LnNjcmVlblgsXG4gICAgICAgICAgICB0b3A6IGZyb21XaW5kb3cuc2NyZWVuWSxcbiAgICAgICAgICAgIHdpZHRoOiBmcm9tV2luZG93Lm91dGVyV2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGZyb21XaW5kb3cub3V0ZXJIZWlnaHQsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChyZW1vdmVCb3JkZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IFt0b3BCb3JkZXIsIHNpZGVCb3JkZXIsIGJvdHRvbUJvcmRlcl0gPSBCcm93c2VyUG9wdXBXaW5kb3dfMS5wb3B1cFdpbmRvd0JvcmRlcjtcbiAgICAgICAgICAgIGZyb21SZWN0LmxlZnQgKz0gc2lkZUJvcmRlcjtcbiAgICAgICAgICAgIGZyb21SZWN0LnRvcCArPSB0b3BCb3JkZXI7XG4gICAgICAgICAgICBmcm9tUmVjdC53aWR0aCAtPSBzaWRlQm9yZGVyICogMjtcbiAgICAgICAgICAgIGZyb21SZWN0LmhlaWdodCAtPSB0b3BCb3JkZXIgKyBib3R0b21Cb3JkZXI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoIWZyb21SZWN0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBsZXQgX2RvY3VtZW50ID0gdGFyZ2V0RWxlbWVudC5vd25lckRvY3VtZW50O1xuICAgIGxldCBfd2luZG93ID0gX2RvY3VtZW50LmRlZmF1bHRWaWV3O1xuICAgIGlmICghX3dpbmRvdykge1xuICAgICAgICByZXR1cm4gZnJvbVJlY3Q7XG4gICAgfVxuICAgIC8vIHJlY3Vyc2l2ZWx5IGdldCByZWN0IGlmIGl0J3MgYW4gaWZyYW1lXG4gICAgaWYgKF93aW5kb3cuZnJhbWVFbGVtZW50KSB7XG4gICAgICAgIGZyb21SZWN0ID0gbWFwV2luZG93VG9FbGVtZW50KF93aW5kb3cuZnJhbWVFbGVtZW50LCBudWxsLCBmcm9tUmVjdCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgW3hCb3JkZXIsIHlCb3JkZXIsIHpvb21dID0gZXN0aW1hdGVXaW5kb3dCb3JkZXIoX3dpbmRvdyk7XG4gICAgICAgIGZyb21SZWN0LmxlZnQgLT0gX3dpbmRvdy5zY3JlZW5YICsgeEJvcmRlcjtcbiAgICAgICAgZnJvbVJlY3QudG9wIC09IF93aW5kb3cuc2NyZWVuWSArIHlCb3JkZXI7XG4gICAgICAgIGlmICh6b29tICE9PSAxKSB7XG4gICAgICAgICAgICBmcm9tUmVjdC5sZWZ0IC89IHpvb207XG4gICAgICAgICAgICBmcm9tUmVjdC50b3AgLz0gem9vbTtcbiAgICAgICAgICAgIGZyb21SZWN0LndpZHRoIC89IHpvb207XG4gICAgICAgICAgICBmcm9tUmVjdC5oZWlnaHQgLz0gem9vbTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgY2xpZW50UmVjdCA9IHRhcmdldEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgbGV0IG1hcFJlY3QgPSBuZXcgTWFwUmVjdDJEKCk7XG4gICAgbWFwUmVjdC5pbml0KDAsIDAsIHRhcmdldEVsZW1lbnQub2Zmc2V0V2lkdGgsIHRhcmdldEVsZW1lbnQub2Zmc2V0SGVpZ2h0LCBjbGllbnRSZWN0LngsIGNsaWVudFJlY3QueSwgY2xpZW50UmVjdC53aWR0aCwgY2xpZW50UmVjdC5oZWlnaHQpO1xuICAgIGxldCBtYXBwZWRSZWN0O1xuICAgIGxldCB7IHgsIHkgfSA9IG1hcFJlY3QucmV2ZXJ0TWFwKHsgeDogZnJvbVJlY3QubGVmdCwgeTogZnJvbVJlY3QudG9wIH0pO1xuICAgIGxldCB7IHg6IHgyLCB5OiB5MiB9ID0gbWFwUmVjdC5yZXZlcnRNYXAoe1xuICAgICAgICB4OiBmcm9tUmVjdC5sZWZ0ICsgZnJvbVJlY3Qud2lkdGgsXG4gICAgICAgIHk6IGZyb21SZWN0LnRvcCArIGZyb21SZWN0LmhlaWdodCxcbiAgICB9KTtcbiAgICBtYXBwZWRSZWN0ID0geyBsZWZ0OiB4LCB0b3A6IHksIHdpZHRoOiB4MiAtIHgsIGhlaWdodDogeTIgLSB5IH07XG4gICAgcmV0dXJuIG1hcHBlZFJlY3Q7XG59XG5leHBvcnRzLm1hcFdpbmRvd1RvRWxlbWVudCA9IG1hcFdpbmRvd1RvRWxlbWVudDtcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBOZXdXaW5kb3cgZnJvbSBcInJjLW5ldy13aW5kb3dcIjtcbmltcG9ydCB7IERvY2tDb250ZXh0VHlwZSB9IGZyb20gXCIuL0RvY2tEYXRhXCI7XG5pbXBvcnQgeyBEb2NrUGFuZWwgfSBmcm9tIFwiLi9Eb2NrUGFuZWxcIjtcbmltcG9ydCB7IG1hcEVsZW1lbnRUb1NjcmVlblJlY3QsIG1hcFdpbmRvd1RvRWxlbWVudCB9IGZyb20gXCJyYy1uZXctd2luZG93L2xpYi9TY3JlZW5Qb3NpdGlvblwiO1xuZXhwb3J0IGNsYXNzIFdpbmRvd1BhbmVsIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMub25PcGVuID0gKHcpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fd2luZG93ICYmIHcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl93aW5kb3cgPSB3O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uVW5sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgbGV0IHsgcGFuZWxEYXRhIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgbGV0IGxheW91dFJvb3QgPSB0aGlzLmNvbnRleHQuZ2V0Um9vdEVsZW1lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBtYXBXaW5kb3dUb0VsZW1lbnQobGF5b3V0Um9vdCwgdGhpcy5fd2luZG93KTtcbiAgICAgICAgICAgIGlmIChyZWN0LndpZHRoID4gMCAmJiByZWN0LmhlaWdodCA+IDApIHtcbiAgICAgICAgICAgICAgICBwYW5lbERhdGEueCA9IHJlY3QubGVmdDtcbiAgICAgICAgICAgICAgICBwYW5lbERhdGEueSA9IHJlY3QudG9wO1xuICAgICAgICAgICAgICAgIHBhbmVsRGF0YS53ID0gcmVjdC53aWR0aDtcbiAgICAgICAgICAgICAgICBwYW5lbERhdGEuaCA9IHJlY3QuaGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmRvY2tNb3ZlKHBhbmVsRGF0YSwgbnVsbCwgJ2Zsb2F0Jyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaW5pdFBvcHVwSW5uZXJSZWN0ID0gKCkgPT4ge1xuICAgICAgICAgICAgbGV0IHsgcGFuZWxEYXRhIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgcmV0dXJuIG1hcEVsZW1lbnRUb1NjcmVlblJlY3QodGhpcy5jb250ZXh0LmdldFJvb3RFbGVtZW50KCksIHtcbiAgICAgICAgICAgICAgICBsZWZ0OiBwYW5lbERhdGEueCxcbiAgICAgICAgICAgICAgICB0b3A6IHBhbmVsRGF0YS55LFxuICAgICAgICAgICAgICAgIHdpZHRoOiBwYW5lbERhdGEudyxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHBhbmVsRGF0YS5oXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgeyBwYW5lbERhdGEgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCB7IHgsIHksIHcsIGggfSA9IHBhbmVsRGF0YTtcbiAgICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTmV3V2luZG93LCB7IGNvcHlTdHlsZXM6IHRydWUsIG9uT3BlbjogdGhpcy5vbk9wZW4sIG9uQ2xvc2U6IHRoaXMub25VbmxvYWQsIG9uQmxvY2s6IHRoaXMub25VbmxvYWQsIGluaXRQb3B1cElubmVyUmVjdDogdGhpcy5pbml0UG9wdXBJbm5lclJlY3QsIHdpZHRoOiB3LCBoZWlnaHQ6IGggfSxcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6ICdkb2NrLXdib3gnIH0sXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChEb2NrUGFuZWwsIHsgc2l6ZTogcGFuZWxEYXRhLnNpemUsIHBhbmVsRGF0YTogcGFuZWxEYXRhLCBrZXk6IHBhbmVsRGF0YS5pZCB9KSkpO1xuICAgIH1cbn1cbldpbmRvd1BhbmVsLmNvbnRleHRUeXBlID0gRG9ja0NvbnRleHRUeXBlO1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgV2luZG93UGFuZWwgfSBmcm9tIFwiLi9XaW5kb3dQYW5lbFwiO1xuZXhwb3J0IGNsYXNzIFdpbmRvd0JveCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHsgY2hpbGRyZW4gfSA9IHRoaXMucHJvcHMuYm94RGF0YTtcbiAgICAgICAgbGV0IGNoaWxkcmVuUmVuZGVyID0gW107XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIGNoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAoJ3RhYnMnIGluIGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW5SZW5kZXIucHVzaChSZWFjdC5jcmVhdGVFbGVtZW50KFdpbmRvd1BhbmVsLCB7IGtleTogY2hpbGQuaWQsIHBhbmVsRGF0YTogY2hpbGQgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgY2hpbGRyZW5SZW5kZXIpKTtcbiAgICB9XG59XG5XaW5kb3dCb3guZW5hYmxlZCA9IHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmICgod2luZG93ID09PSBudWxsIHx8IHdpbmRvdyA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luZG93Lm5hdmlnYXRvci5wbGF0Zm9ybSkgPT09ICdXaW4zMicgfHwgKHdpbmRvdyA9PT0gbnVsbCB8fCB3aW5kb3cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdpbmRvdy5uYXZpZ2F0b3IucGxhdGZvcm0pID09PSAnTWFjSW50ZWwnKTtcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IERvY2tDb250ZXh0VHlwZSB9IGZyb20gXCIuL0RvY2tEYXRhXCI7XG5pbXBvcnQgVGFicyBmcm9tICdyYy10YWJzJztcbmltcG9ydCBNZW51LCB7IE1lbnVJdGVtIH0gZnJvbSAncmMtbWVudSc7XG5pbXBvcnQgRHJvcGRvd24gZnJvbSAncmMtZHJvcGRvd24nO1xuaW1wb3J0ICogYXMgRHJhZ01hbmFnZXIgZnJvbSBcIi4vZHJhZ2Ryb3AvRHJhZ01hbmFnZXJcIjtcbmltcG9ydCB7IERyYWdEcm9wRGl2IH0gZnJvbSBcIi4vZHJhZ2Ryb3AvRHJhZ0Ryb3BEaXZcIjtcbmltcG9ydCB7IERvY2tUYWJCYXIgfSBmcm9tIFwiLi9Eb2NrVGFiQmFyXCI7XG5pbXBvcnQgRG9ja1RhYlBhbmUgZnJvbSBcIi4vRG9ja1RhYlBhbmVcIjtcbmltcG9ydCB7IGdldEZsb2F0UGFuZWxTaXplIH0gZnJvbSBcIi4vQWxnb3JpdGhtXCI7XG5pbXBvcnQgeyBXaW5kb3dCb3ggfSBmcm9tIFwiLi9XaW5kb3dCb3hcIjtcbmZ1bmN0aW9uIGZpbmRQYXJlbnRQYW5lbChlbGVtZW50KSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgKytpKSB7XG4gICAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkb2NrLXBhbmVsJykpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gaXNQb3B1cERpdihyKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICByZXR1cm4gKHIgPT0gbnVsbCB8fCAoKF9hID0gci5wYXJlbnRFbGVtZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudGFnTmFtZSkgPT09ICdMSScgfHwgKChfYiA9IHIucGFyZW50RWxlbWVudCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnBhcmVudEVsZW1lbnQudGFnTmFtZSkgPT09ICdMSScpO1xufVxuZXhwb3J0IGNsYXNzIFRhYkNhY2hlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuZ2V0UmVmID0gKHIpID0+IHtcbiAgICAgICAgICAgIGlmIChpc1BvcHVwRGl2KHIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fcmVmID0gcjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRIaXRBcmVhUmVmID0gKHIpID0+IHtcbiAgICAgICAgICAgIGlmIChpc1BvcHVwRGl2KHIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5faGl0QXJlYVJlZiA9IHI7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25DbG9zZUNsaWNrID0gKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5kb2NrTW92ZSh0aGlzLmRhdGEsIG51bGwsICdyZW1vdmUnKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25EcmFnU3RhcnQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHBhbmVsID0gdGhpcy5kYXRhLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChwYW5lbC5wYXJlbnQubW9kZSA9PT0gJ2Zsb2F0JyAmJiBwYW5lbC50YWJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIC8vIHdoZW4gaXQncyB0aGUgb25seSB0YWIgaW4gYSBmbG9hdCBwYW5lbCwgc2tpcCB0aGlzIGRyYWcsIGxldCBwYXJlbnQgdGFiIGJhciBoYW5kbGUgaXRcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcGFuZWxFbGVtZW50ID0gZmluZFBhcmVudFBhbmVsKHRoaXMuX3JlZik7XG4gICAgICAgICAgICBsZXQgdGFiR3JvdXAgPSB0aGlzLmNvbnRleHQuZ2V0R3JvdXAodGhpcy5kYXRhLmdyb3VwKTtcbiAgICAgICAgICAgIGxldCBbcGFuZWxXaWR0aCwgcGFuZWxIZWlnaHRdID0gZ2V0RmxvYXRQYW5lbFNpemUocGFuZWxFbGVtZW50LCB0YWJHcm91cCk7XG4gICAgICAgICAgICBlLnNldERhdGEoeyB0YWI6IHRoaXMuZGF0YSwgcGFuZWxTaXplOiBbcGFuZWxXaWR0aCwgcGFuZWxIZWlnaHRdIH0sIHRoaXMuY29udGV4dC5nZXREb2NrSWQoKSk7XG4gICAgICAgICAgICBlLnN0YXJ0RHJhZyh0aGlzLl9yZWYucGFyZW50RWxlbWVudCwgdGhpcy5fcmVmLnBhcmVudEVsZW1lbnQpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uRHJhZ092ZXIgPSAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGRvY2tJZCA9IHRoaXMuY29udGV4dC5nZXREb2NrSWQoKTtcbiAgICAgICAgICAgIGxldCB0YWIgPSBEcmFnTWFuYWdlci5EcmFnU3RhdGUuZ2V0RGF0YSgndGFiJywgZG9ja0lkKTtcbiAgICAgICAgICAgIGxldCBwYW5lbCA9IERyYWdNYW5hZ2VyLkRyYWdTdGF0ZS5nZXREYXRhKCdwYW5lbCcsIGRvY2tJZCk7XG4gICAgICAgICAgICBsZXQgZ3JvdXA7XG4gICAgICAgICAgICBpZiAodGFiKSB7XG4gICAgICAgICAgICAgICAgcGFuZWwgPSB0YWIucGFyZW50O1xuICAgICAgICAgICAgICAgIGdyb3VwID0gdGFiLmdyb3VwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gZHJhZyB3aG9sZSBwYW5lbFxuICAgICAgICAgICAgICAgIGlmICghcGFuZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGFuZWwgPT09IG51bGwgfHwgcGFuZWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhbmVsLnBhbmVsTG9jaykge1xuICAgICAgICAgICAgICAgICAgICBlLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdyb3VwID0gcGFuZWwuZ3JvdXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ3JvdXAgIT09IHRoaXMuZGF0YS5ncm91cCkge1xuICAgICAgICAgICAgICAgIGUucmVqZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0YWIgJiYgdGFiICE9PSB0aGlzLmRhdGEpIHtcbiAgICAgICAgICAgICAgICBsZXQgZGlyZWN0aW9uID0gdGhpcy5nZXREcm9wRGlyZWN0aW9uKGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5zZXREcm9wUmVjdCh0aGlzLl9oaXRBcmVhUmVmLCBkaXJlY3Rpb24sIHRoaXMpO1xuICAgICAgICAgICAgICAgIGUuYWNjZXB0KCcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhbmVsICYmIHBhbmVsICE9PSB0aGlzLmRhdGEucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgbGV0IGRpcmVjdGlvbiA9IHRoaXMuZ2V0RHJvcERpcmVjdGlvbihlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuc2V0RHJvcFJlY3QodGhpcy5faGl0QXJlYVJlZiwgZGlyZWN0aW9uLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBlLmFjY2VwdCgnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25EcmFnTGVhdmUgPSAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnNldERyb3BSZWN0KG51bGwsICdyZW1vdmUnLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkRyb3AgPSAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGRvY2tJZCA9IHRoaXMuY29udGV4dC5nZXREb2NrSWQoKTtcbiAgICAgICAgICAgIGxldCBwYW5lbDtcbiAgICAgICAgICAgIGxldCB0YWIgPSBEcmFnTWFuYWdlci5EcmFnU3RhdGUuZ2V0RGF0YSgndGFiJywgZG9ja0lkKTtcbiAgICAgICAgICAgIGlmICh0YWIpIHtcbiAgICAgICAgICAgICAgICBwYW5lbCA9IHRhYi5wYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYW5lbCA9IERyYWdNYW5hZ2VyLkRyYWdTdGF0ZS5nZXREYXRhKCdwYW5lbCcsIGRvY2tJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFiICYmIHRhYiAhPT0gdGhpcy5kYXRhKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRpcmVjdGlvbiA9IHRoaXMuZ2V0RHJvcERpcmVjdGlvbihlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuZG9ja01vdmUodGFiLCB0aGlzLmRhdGEsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYW5lbCAmJiBwYW5lbCAhPT0gdGhpcy5kYXRhLnBhcmVudCkge1xuICAgICAgICAgICAgICAgIGxldCBkaXJlY3Rpb24gPSB0aGlzLmdldERyb3BEaXJlY3Rpb24oZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmRvY2tNb3ZlKHBhbmVsLCB0aGlzLmRhdGEsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgfVxuICAgIHNldERhdGEoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YSAhPT0gdGhpcy5kYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0RHJvcERpcmVjdGlvbihlKSB7XG4gICAgICAgIGxldCByZWN0ID0gdGhpcy5faGl0QXJlYVJlZi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbGV0IG1pZHggPSByZWN0LmxlZnQgKyByZWN0LndpZHRoICogMC41O1xuICAgICAgICByZXR1cm4gZS5jbGllbnRYID4gbWlkeCA/ICdhZnRlci10YWInIDogJ2JlZm9yZS10YWInO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7IGlkLCB0aXRsZSwgZ3JvdXAsIGNvbnRlbnQsIGNsb3NhYmxlLCBjYWNoZWQsIHBhcmVudCB9ID0gdGhpcy5kYXRhO1xuICAgICAgICBsZXQgeyBvbkRyYWdTdGFydCwgb25EcmFnT3Zlciwgb25Ecm9wLCBvbkRyYWdMZWF2ZSB9ID0gdGhpcztcbiAgICAgICAgaWYgKHBhcmVudC5wYXJlbnQubW9kZSA9PT0gJ3dpbmRvdycpIHtcbiAgICAgICAgICAgIG9uRHJhZ1N0YXJ0ID0gbnVsbDtcbiAgICAgICAgICAgIG9uRHJhZ092ZXIgPSBudWxsO1xuICAgICAgICAgICAgb25Ecm9wID0gbnVsbDtcbiAgICAgICAgICAgIG9uRHJhZ0xlYXZlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdGFiR3JvdXAgPSB0aGlzLmNvbnRleHQuZ2V0R3JvdXAoZ3JvdXApO1xuICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50KHRoaXMuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRhYiA9IChSZWFjdC5jcmVhdGVFbGVtZW50KERyYWdEcm9wRGl2LCB7IGdldFJlZjogdGhpcy5nZXRSZWYsIG9uRHJhZ1N0YXJ0VDogb25EcmFnU3RhcnQsIG9uRHJhZ092ZXJUOiBvbkRyYWdPdmVyLCBvbkRyb3BUOiBvbkRyb3AsIG9uRHJhZ0xlYXZlVDogb25EcmFnTGVhdmUgfSxcbiAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgY2xvc2FibGUgP1xuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZG9jay10YWItY2xvc2UtYnRuXCIsIG9uQ2xpY2s6IHRoaXMub25DbG9zZUNsaWNrIH0pXG4gICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJkb2NrLXRhYi1oaXQtYXJlYVwiLCByZWY6IHRoaXMuZ2V0SGl0QXJlYVJlZiB9KSkpO1xuICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9ja1RhYlBhbmUsIHsga2V5OiBpZCwgY2FjaGVJZDogaWQsIGNhY2hlZDogY2FjaGVkLCB0YWI6IHRhYiB9LCBjb250ZW50KSk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIC8vIHBsYWNlIGhvbGRlclxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBEb2NrVGFicyBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLl9jYWNoZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5vbk1heGltaXplQ2xpY2sgPSAoZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHsgcGFuZWxEYXRhIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmRvY2tNb3ZlKHBhbmVsRGF0YSwgbnVsbCwgJ21heGltaXplJyk7XG4gICAgICAgICAgICAvLyBwcmV2ZW50IHRoZSBmb2N1cyBjaGFuZ2UgbG9naWNcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25OZXdXaW5kb3dDbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIGxldCB7IHBhbmVsRGF0YSB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5kb2NrTW92ZShwYW5lbERhdGEsIG51bGwsICduZXctd2luZG93Jyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVuZGVyVGFiQmFyID0gKHByb3BzLCBUYWJOYXZMaXN0KSA9PiB7XG4gICAgICAgICAgICBsZXQgeyBwYW5lbERhdGEsIG9uUGFuZWxEcmFnU3RhcnQsIG9uUGFuZWxEcmFnTW92ZSwgb25QYW5lbERyYWdFbmQgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICBsZXQgeyBncm91cDogZ3JvdXBOYW1lLCBwYW5lbExvY2sgfSA9IHBhbmVsRGF0YTtcbiAgICAgICAgICAgIGxldCBncm91cCA9IHRoaXMuY29udGV4dC5nZXRHcm91cChncm91cE5hbWUpO1xuICAgICAgICAgICAgbGV0IHsgcGFuZWxFeHRyYSB9ID0gZ3JvdXA7XG4gICAgICAgICAgICBsZXQgbWF4aW1pemFibGUgPSBncm91cC5tYXhpbWl6YWJsZTtcbiAgICAgICAgICAgIGlmIChwYW5lbERhdGEucGFyZW50Lm1vZGUgPT09ICd3aW5kb3cnKSB7XG4gICAgICAgICAgICAgICAgb25QYW5lbERyYWdTdGFydCA9IG51bGw7XG4gICAgICAgICAgICAgICAgbWF4aW1pemFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYW5lbExvY2spIHtcbiAgICAgICAgICAgICAgICBpZiAocGFuZWxMb2NrLnBhbmVsRXh0cmEpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFuZWxFeHRyYSA9IHBhbmVsTG9jay5wYW5lbEV4dHJhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzaG93TmV3V2luZG93QnV0dG9uID0gZ3JvdXAubmV3V2luZG93ICYmIFdpbmRvd0JveC5lbmFibGVkICYmIHBhbmVsRGF0YS5wYXJlbnQubW9kZSA9PT0gJ2Zsb2F0JztcbiAgICAgICAgICAgIGxldCBwYW5lbEV4dHJhQ29udGVudDtcbiAgICAgICAgICAgIGlmIChwYW5lbEV4dHJhKSB7XG4gICAgICAgICAgICAgICAgcGFuZWxFeHRyYUNvbnRlbnQgPSBwYW5lbEV4dHJhKHBhbmVsRGF0YSwgdGhpcy5jb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1heGltaXphYmxlIHx8IHNob3dOZXdXaW5kb3dCdXR0b24pIHtcbiAgICAgICAgICAgICAgICBwYW5lbEV4dHJhQ29udGVudCA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZG9jay1wYW5lbC1tYXgtYnRuXCIsIG9uQ2xpY2s6IG1heGltaXphYmxlID8gdGhpcy5vbk1heGltaXplQ2xpY2sgOiBudWxsIH0pO1xuICAgICAgICAgICAgICAgIGlmIChzaG93TmV3V2luZG93QnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhbmVsRXh0cmFDb250ZW50ID0gdGhpcy5hZGROZXdXaW5kb3dNZW51KHBhbmVsRXh0cmFDb250ZW50LCAhbWF4aW1pemFibGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChEb2NrVGFiQmFyLCBPYmplY3QuYXNzaWduKHsgb25EcmFnU3RhcnQ6IG9uUGFuZWxEcmFnU3RhcnQsIG9uRHJhZ01vdmU6IG9uUGFuZWxEcmFnTW92ZSwgb25EcmFnRW5kOiBvblBhbmVsRHJhZ0VuZCwgVGFiTmF2TGlzdDogVGFiTmF2TGlzdCwgaXNNYXhpbWl6ZWQ6IHBhbmVsRGF0YS5wYXJlbnQubW9kZSA9PT0gJ21heGltaXplJyB9LCBwcm9wcywgeyBleHRyYTogcGFuZWxFeHRyYUNvbnRlbnQgfSkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vblRhYkNoYW5nZSA9IChhY3RpdmVJZCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5wYW5lbERhdGEuYWN0aXZlSWQgPSBhY3RpdmVJZDtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5vblNpbGVudENoYW5nZShhY3RpdmVJZCwgJ2FjdGl2ZScpO1xuICAgICAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICB1cGRhdGVUYWJzKHRhYnMpIHtcbiAgICAgICAgaWYgKHRhYnMgPT09IHRoaXMuY2FjaGVkVGFicykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FjaGVkVGFicyA9IHRhYnM7XG4gICAgICAgIGxldCBuZXdDYWNoZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgbGV0IHJldXNlZCA9IDA7XG4gICAgICAgIGZvciAobGV0IHRhYkRhdGEgb2YgdGFicykge1xuICAgICAgICAgICAgbGV0IHsgaWQgfSA9IHRhYkRhdGE7XG4gICAgICAgICAgICBpZiAodGhpcy5fY2FjaGUuaGFzKGlkKSkge1xuICAgICAgICAgICAgICAgIGxldCB0YWIgPSB0aGlzLl9jYWNoZS5nZXQoaWQpO1xuICAgICAgICAgICAgICAgIG5ld0NhY2hlLnNldChpZCwgdGFiKTtcbiAgICAgICAgICAgICAgICB0YWIuc2V0RGF0YSh0YWJEYXRhKTtcbiAgICAgICAgICAgICAgICArK3JldXNlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCB0YWIgPSBuZXcgVGFiQ2FjaGUodGhpcy5jb250ZXh0KTtcbiAgICAgICAgICAgICAgICBuZXdDYWNoZS5zZXQoaWQsIHRhYik7XG4gICAgICAgICAgICAgICAgdGFiLnNldERhdGEodGFiRGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJldXNlZCAhPT0gdGhpcy5fY2FjaGUuc2l6ZSkge1xuICAgICAgICAgICAgZm9yIChsZXQgW2lkLCB0YWJdIG9mIHRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuZXdDYWNoZS5oYXMoaWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhYi5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NhY2hlID0gbmV3Q2FjaGU7XG4gICAgfVxuICAgIGFkZE5ld1dpbmRvd01lbnUoZWxlbWVudCwgc2hvd1dpdGhMZWZ0Q2xpY2spIHtcbiAgICAgICAgY29uc3QgbmF0aXZlTWVudSA9IChSZWFjdC5jcmVhdGVFbGVtZW50KE1lbnUsIHsgb25DbGljazogdGhpcy5vbk5ld1dpbmRvd0NsaWNrIH0sXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KE1lbnVJdGVtLCBudWxsLCBcIk5ldyBXaW5kb3dcIikpKTtcbiAgICAgICAgbGV0IHRyaWdnZXIgPSBzaG93V2l0aExlZnRDbGljayA/IFsnY29udGV4dE1lbnUnLCAnY2xpY2snXSA6IFsnY29udGV4dE1lbnUnXTtcbiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KERyb3Bkb3duLCB7IHByZWZpeENsczogXCJkb2NrLWRyb3Bkb3duXCIsIG92ZXJsYXk6IG5hdGl2ZU1lbnUsIHRyaWdnZXI6IHRyaWdnZXIsIG1vdXNlRW50ZXJEZWxheTogMC4xLCBtb3VzZUxlYXZlRGVsYXk6IDAuMSB9LCBlbGVtZW50KSk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHsgZ3JvdXAsIHRhYnMsIGFjdGl2ZUlkIH0gPSB0aGlzLnByb3BzLnBhbmVsRGF0YTtcbiAgICAgICAgbGV0IHRhYkdyb3VwID0gdGhpcy5jb250ZXh0LmdldEdyb3VwKGdyb3VwKTtcbiAgICAgICAgbGV0IHsgYW5pbWF0ZWQgfSA9IHRhYkdyb3VwO1xuICAgICAgICBpZiAoYW5pbWF0ZWQgPT0gbnVsbCkge1xuICAgICAgICAgICAgYW5pbWF0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlVGFicyh0YWJzKTtcbiAgICAgICAgbGV0IGNoaWxkcmVuID0gW107XG4gICAgICAgIGZvciAobGV0IFtpZCwgdGFiXSBvZiB0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgY2hpbGRyZW4ucHVzaCh0YWIuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFRhYnMsIHsgcHJlZml4Q2xzOiBcImRvY2tcIiwgbW9yZUljb246IFwiLi4uXCIsIGFuaW1hdGVkOiBhbmltYXRlZCwgcmVuZGVyVGFiQmFyOiB0aGlzLnJlbmRlclRhYkJhciwgYWN0aXZlS2V5OiBhY3RpdmVJZCwgb25DaGFuZ2U6IHRoaXMub25UYWJDaGFuZ2UgfSwgY2hpbGRyZW4pKTtcbiAgICB9XG59XG5Eb2NrVGFicy5jb250ZXh0VHlwZSA9IERvY2tDb250ZXh0VHlwZTtcbkRvY2tUYWJzLnByb3BLZXlzID0gWydncm91cCcsICd0YWJzJywgJ2FjdGl2ZUlkJywgJ29uVGFiQ2hhbmdlJ107XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRHJhZ0Ryb3BEaXYgfSBmcm9tIFwiLi9kcmFnZHJvcC9EcmFnRHJvcERpdlwiO1xuY2xhc3MgQm94RGF0YUNhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgICAgIHRoaXMuYmVmb3JlU2l6ZSA9IDA7XG4gICAgICAgIHRoaXMuYmVmb3JlTWluU2l6ZSA9IDA7XG4gICAgICAgIHRoaXMuYWZ0ZXJTaXplID0gMDtcbiAgICAgICAgdGhpcy5hZnRlck1pblNpemUgPSAwO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkYXRhLmVsZW1lbnQ7XG4gICAgICAgIHRoaXMuYmVmb3JlRGl2aWRlciA9IGRhdGEuYmVmb3JlRGl2aWRlcjtcbiAgICAgICAgdGhpcy5hZnRlckRpdmlkZXIgPSBkYXRhLmFmdGVyRGl2aWRlcjtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgdGhpcy5iZWZvcmVEaXZpZGVyKSB7XG4gICAgICAgICAgICB0aGlzLmJlZm9yZVNpemUgKz0gY2hpbGQuc2l6ZTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5taW5TaXplID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYmVmb3JlTWluU2l6ZSArPSBjaGlsZC5taW5TaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMuYWZ0ZXJEaXZpZGVyKSB7XG4gICAgICAgICAgICB0aGlzLmFmdGVyU2l6ZSArPSBjaGlsZC5zaXplO1xuICAgICAgICAgICAgaWYgKGNoaWxkLm1pblNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZnRlck1pblNpemUgKz0gY2hpbGQubWluU2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIHNwbGl0IHNpemUgYW1vbmcgY2hpbGRyZW5cbmZ1bmN0aW9uIHNwaWx0U2l6ZShuZXdTaXplLCBvbGRTaXplLCBjaGlsZHJlbikge1xuICAgIGxldCByZXNlcnZlZFNpemUgPSAtMTtcbiAgICBsZXQgc2l6ZXMgPSBbXTtcbiAgICBsZXQgcmVxdWlyZWRNaW5TaXplID0gMDtcbiAgICB3aGlsZSAocmVxdWlyZWRNaW5TaXplICE9PSByZXNlcnZlZFNpemUpIHtcbiAgICAgICAgcmVzZXJ2ZWRTaXplID0gcmVxdWlyZWRNaW5TaXplO1xuICAgICAgICByZXF1aXJlZE1pblNpemUgPSAwO1xuICAgICAgICBsZXQgcmF0aW8gPSAobmV3U2l6ZSAtIHJlc2VydmVkU2l6ZSkgLyAob2xkU2l6ZSAtIHJlc2VydmVkU2l6ZSk7XG4gICAgICAgIGlmICghKHJhdGlvID49IDApKSB7XG4gICAgICAgICAgICAvLyBpbnZhbGlkIGlucHV0XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBsZXQgc2l6ZSA9IGNoaWxkcmVuW2ldLnNpemUgKiByYXRpbztcbiAgICAgICAgICAgIGlmIChzaXplIDwgY2hpbGRyZW5baV0ubWluU2l6ZSkge1xuICAgICAgICAgICAgICAgIHNpemUgPSBjaGlsZHJlbltpXS5taW5TaXplO1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkTWluU2l6ZSArPSBzaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2l6ZXNbaV0gPSBzaXplO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaXplcztcbn1cbmV4cG9ydCBjbGFzcyBEaXZpZGVyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuc3RhcnREcmFnID0gKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYm94RGF0YSA9IG5ldyBCb3hEYXRhQ2FjaGUodGhpcy5wcm9wcy5nZXREaXZpZGVyRGF0YSh0aGlzLnByb3BzLmlkeCkpO1xuICAgICAgICAgICAgZS5zdGFydERyYWcodGhpcy5ib3hEYXRhLmVsZW1lbnQsIG51bGwpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRyYWdNb3ZlID0gKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmV2ZW50LnNoaWZ0S2V5IHx8IGUuZXZlbnQuY3RybEtleSB8fCBlLmV2ZW50LmFsdEtleSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ01vdmVBbGwoZSwgZS5keCwgZS5keSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdNb3ZlMihlLCBlLmR4LCBlLmR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kcmFnRW5kID0gKGUpID0+IHtcbiAgICAgICAgICAgIGxldCB7IG9uRHJhZ0VuZCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIHRoaXMuYm94RGF0YSA9IG51bGw7XG4gICAgICAgICAgICBpZiAob25EcmFnRW5kKSB7XG4gICAgICAgICAgICAgICAgb25EcmFnRW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGRyYWdNb3ZlMihlLCBkeCwgZHkpIHtcbiAgICAgICAgbGV0IHsgaXNWZXJ0aWNhbCwgY2hhbmdlU2l6ZXMgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCB7IGJlZm9yZURpdmlkZXIsIGFmdGVyRGl2aWRlciB9ID0gdGhpcy5ib3hEYXRhO1xuICAgICAgICBpZiAoIShiZWZvcmVEaXZpZGVyLmxlbmd0aCAmJiBhZnRlckRpdmlkZXIubGVuZ3RoKSkge1xuICAgICAgICAgICAgLy8gaW52YWxpZCBpbnB1dFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkID0gaXNWZXJ0aWNhbCA/IGR5IDogZHg7XG4gICAgICAgIGxldCBsZWZ0Q2hpbGQgPSBiZWZvcmVEaXZpZGVyW2JlZm9yZURpdmlkZXIubGVuZ3RoIC0gMV07XG4gICAgICAgIGxldCByaWdodENpbGQgPSBhZnRlckRpdmlkZXJbMF07XG4gICAgICAgIGxldCBsZWZ0U2l6ZSA9IGxlZnRDaGlsZC5zaXplICsgZDtcbiAgICAgICAgbGV0IHJpZ2h0U2l6ZSA9IHJpZ2h0Q2lsZC5zaXplIC0gZDtcbiAgICAgICAgLy8gY2hlY2sgbWluIHNpemVcbiAgICAgICAgaWYgKGQgPiAwKSB7XG4gICAgICAgICAgICBpZiAocmlnaHRTaXplIDwgcmlnaHRDaWxkLm1pblNpemUpIHtcbiAgICAgICAgICAgICAgICByaWdodFNpemUgPSByaWdodENpbGQubWluU2l6ZTtcbiAgICAgICAgICAgICAgICBsZWZ0U2l6ZSA9IGxlZnRDaGlsZC5zaXplICsgcmlnaHRDaWxkLnNpemUgLSByaWdodFNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGVmdFNpemUgPCBsZWZ0Q2hpbGQubWluU2l6ZSkge1xuICAgICAgICAgICAgbGVmdFNpemUgPSBsZWZ0Q2hpbGQubWluU2l6ZTtcbiAgICAgICAgICAgIHJpZ2h0U2l6ZSA9IGxlZnRDaGlsZC5zaXplICsgcmlnaHRDaWxkLnNpemUgLSBsZWZ0U2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2l6ZXMgPSBiZWZvcmVEaXZpZGVyLmNvbmNhdChhZnRlckRpdmlkZXIpLm1hcCgoY2hpbGQpID0+IGNoaWxkLnNpemUpO1xuICAgICAgICBzaXplc1tiZWZvcmVEaXZpZGVyLmxlbmd0aCAtIDFdID0gbGVmdFNpemU7XG4gICAgICAgIHNpemVzW2JlZm9yZURpdmlkZXIubGVuZ3RoXSA9IHJpZ2h0U2l6ZTtcbiAgICAgICAgY2hhbmdlU2l6ZXMoc2l6ZXMpO1xuICAgIH1cbiAgICBkcmFnTW92ZUFsbChlLCBkeCwgZHkpIHtcbiAgICAgICAgbGV0IHsgaXNWZXJ0aWNhbCwgY2hhbmdlU2l6ZXMgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCB7IGJlZm9yZVNpemUsIGJlZm9yZU1pblNpemUsIGFmdGVyU2l6ZSwgYWZ0ZXJNaW5TaXplLCBiZWZvcmVEaXZpZGVyLCBhZnRlckRpdmlkZXIgfSA9IHRoaXMuYm94RGF0YTtcbiAgICAgICAgbGV0IGQgPSBpc1ZlcnRpY2FsID8gZHkgOiBkeDtcbiAgICAgICAgbGV0IG5ld0JlZm9yZVNpemUgPSBiZWZvcmVTaXplICsgZDtcbiAgICAgICAgbGV0IG5ld0FmdGVyU2l6ZSA9IGFmdGVyU2l6ZSAtIGQ7XG4gICAgICAgIC8vIGNoZWNrIHRvdGFsIG1pbiBzaXplXG4gICAgICAgIGlmIChkID4gMCkge1xuICAgICAgICAgICAgaWYgKG5ld0FmdGVyU2l6ZSA8IGFmdGVyTWluU2l6ZSkge1xuICAgICAgICAgICAgICAgIG5ld0FmdGVyU2l6ZSA9IGFmdGVyTWluU2l6ZTtcbiAgICAgICAgICAgICAgICBuZXdCZWZvcmVTaXplID0gYmVmb3JlU2l6ZSArIGFmdGVyU2l6ZSAtIGFmdGVyTWluU2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChuZXdCZWZvcmVTaXplIDwgYmVmb3JlTWluU2l6ZSkge1xuICAgICAgICAgICAgbmV3QmVmb3JlU2l6ZSA9IGJlZm9yZU1pblNpemU7XG4gICAgICAgICAgICBuZXdBZnRlclNpemUgPSBiZWZvcmVTaXplICsgYWZ0ZXJTaXplIC0gYmVmb3JlTWluU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBjaGFuZ2VTaXplcyhzcGlsdFNpemUobmV3QmVmb3JlU2l6ZSwgYmVmb3JlU2l6ZSwgYmVmb3JlRGl2aWRlcikuY29uY2F0KHNwaWx0U2l6ZShuZXdBZnRlclNpemUsIGFmdGVyU2l6ZSwgYWZ0ZXJEaXZpZGVyKSkpO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB7IGNsYXNzTmFtZSB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgaWYgKCFjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZSA9ICdkb2NrLWRpdmlkZXInO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChEcmFnRHJvcERpdiwgeyBjbGFzc05hbWU6IGNsYXNzTmFtZSwgb25EcmFnU3RhcnRUOiB0aGlzLnN0YXJ0RHJhZywgb25EcmFnTW92ZVQ6IHRoaXMuZHJhZ01vdmUsIG9uRHJhZ0VuZFQ6IHRoaXMuZHJhZ0VuZCB9KSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgRG9ja0NvbnRleHRUeXBlIH0gZnJvbSBcIi4vRG9ja0RhdGFcIjtcbmltcG9ydCB7IERpdmlkZXIgfSBmcm9tIFwiLi9EaXZpZGVyXCI7XG5pbXBvcnQgeyBEb2NrUGFuZWwgfSBmcm9tIFwiLi9Eb2NrUGFuZWxcIjtcbmV4cG9ydCBjbGFzcyBEb2NrQm94IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuZ2V0UmVmID0gKHIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3JlZiA9IHI7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0RGl2aWRlckRhdGEgPSAoaWR4KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5fcmVmKSB7XG4gICAgICAgICAgICAgICAgbGV0IHsgY2hpbGRyZW4sIG1vZGUgfSA9IHRoaXMucHJvcHMuYm94RGF0YTtcbiAgICAgICAgICAgICAgICBsZXQgbm9kZXMgPSB0aGlzLl9yZWYuY2hpbGROb2RlcztcbiAgICAgICAgICAgICAgICBpZiAobm9kZXMubGVuZ3RoID09PSBjaGlsZHJlbi5sZW5ndGggKiAyIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZGl2aWRlckNoaWxkcmVuID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGl2aWRlckNoaWxkcmVuLnB1c2goeyBzaXplOiBub2Rlc1tpICogMl0ub2Zmc2V0SGVpZ2h0LCBtaW5TaXplOiBjaGlsZHJlbltpXS5taW5IZWlnaHQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXZpZGVyQ2hpbGRyZW4ucHVzaCh7IHNpemU6IG5vZGVzW2kgKiAyXS5vZmZzZXRXaWR0aCwgbWluU2l6ZTogY2hpbGRyZW5baV0ubWluV2lkdGggfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IHRoaXMuX3JlZixcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlZm9yZURpdmlkZXI6IGRpdmlkZXJDaGlsZHJlbi5zbGljZSgwLCBpZHgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXJEaXZpZGVyOiBkaXZpZGVyQ2hpbGRyZW4uc2xpY2UoaWR4KVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNoYW5nZVNpemVzID0gKHNpemVzKSA9PiB7XG4gICAgICAgICAgICBsZXQgeyBjaGlsZHJlbiB9ID0gdGhpcy5wcm9wcy5ib3hEYXRhO1xuICAgICAgICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA9PT0gc2l6ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbltpXS5zaXplID0gc2l6ZXNbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkRyYWdFbmQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQub25TaWxlbnRDaGFuZ2UobnVsbCwgJ21vdmUnKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgeyBib3hEYXRhIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBsZXQgeyBtaW5XaWR0aCwgbWluSGVpZ2h0LCBzaXplLCBjaGlsZHJlbiwgbW9kZSwgaWQsIHdpZHRoRmxleCwgaGVpZ2h0RmxleCB9ID0gYm94RGF0YTtcbiAgICAgICAgbGV0IGlzVmVydGljYWwgPSBtb2RlID09PSAndmVydGljYWwnO1xuICAgICAgICBsZXQgY2hpbGRyZW5SZW5kZXIgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW5SZW5kZXIucHVzaChSZWFjdC5jcmVhdGVFbGVtZW50KERpdmlkZXIsIHsgaWR4OiBpLCBrZXk6IGksIGlzVmVydGljYWw6IGlzVmVydGljYWwsIG9uRHJhZ0VuZDogdGhpcy5vbkRyYWdFbmQsIGdldERpdmlkZXJEYXRhOiB0aGlzLmdldERpdmlkZXJEYXRhLCBjaGFuZ2VTaXplczogdGhpcy5jaGFuZ2VTaXplcyB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGlmICgndGFicycgaW4gY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlblJlbmRlci5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9ja1BhbmVsLCB7IHNpemU6IGNoaWxkLnNpemUsIHBhbmVsRGF0YTogY2hpbGQsIGtleTogY2hpbGQuaWQgfSkpO1xuICAgICAgICAgICAgICAgIC8vIHJlbmRlciBEb2NrUGFuZWxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCdjaGlsZHJlbicgaW4gY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlblJlbmRlci5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9ja0JveCwgeyBzaXplOiBjaGlsZC5zaXplLCBib3hEYXRhOiBjaGlsZCwga2V5OiBjaGlsZC5pZCB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNscztcbiAgICAgICAgbGV0IGZsZXggPSAxO1xuICAgICAgICBpZiAobW9kZSA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgICAgY2xzID0gJ2RvY2stYm94IGRvY2stdmJveCc7XG4gICAgICAgICAgICBpZiAod2lkdGhGbGV4ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBmbGV4ID0gd2lkdGhGbGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gc2luY2Ugc3BlY2lhbCBib3hlcyBkb250IHJldXNlIHRoaXMgcmVuZGVyIGZ1bmN0aW9uLCB0aGlzIGNhbiBvbmx5IGJlIGhvcml6b250YWwgYm94XG4gICAgICAgICAgICBjbHMgPSAnZG9jay1ib3ggZG9jay1oYm94JztcbiAgICAgICAgICAgIGlmIChoZWlnaHRGbGV4ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBmbGV4ID0gaGVpZ2h0RmxleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgZmxleEdyb3cgPSBmbGV4ICogc2l6ZTtcbiAgICAgICAgbGV0IGZsZXhTaHJpbmsgPSBmbGV4ICogMTAwMDAwMDtcbiAgICAgICAgaWYgKGZsZXhTaHJpbmsgPCAxKSB7XG4gICAgICAgICAgICBmbGV4U2hyaW5rID0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyByZWY6IHRoaXMuZ2V0UmVmLCBjbGFzc05hbWU6IGNscywgXCJkYXRhLWRvY2tpZFwiOiBpZCwgc3R5bGU6IHsgbWluV2lkdGgsIG1pbkhlaWdodCwgZmxleDogYCR7ZmxleEdyb3d9ICR7ZmxleFNocmlua30gJHtzaXplfXB4YCB9IH0sIGNoaWxkcmVuUmVuZGVyKSk7XG4gICAgfVxufVxuRG9ja0JveC5jb250ZXh0VHlwZSA9IERvY2tDb250ZXh0VHlwZTtcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IERvY2tQYW5lbCB9IGZyb20gXCIuL0RvY2tQYW5lbFwiO1xuZXhwb3J0IGNsYXNzIEZsb2F0Qm94IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgeyBjaGlsZHJlbiB9ID0gdGhpcy5wcm9wcy5ib3hEYXRhO1xuICAgICAgICBsZXQgY2hpbGRyZW5SZW5kZXIgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmICgndGFicycgaW4gY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlblJlbmRlci5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoRG9ja1BhbmVsLCB7IHNpemU6IGNoaWxkLnNpemUsIHBhbmVsRGF0YTogY2hpbGQsIGtleTogY2hpbGQuaWQgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogJ2RvY2stYm94IGRvY2stZmJveCcgfSwgY2hpbGRyZW5SZW5kZXIpKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBtYXhpbWVQbGFjZUhvbGRlcklkIH0gZnJvbSBcIi4vRG9ja0RhdGFcIjtcbmZ1bmN0aW9uIGFkZFBhbmVsVG9DYWNoZShwYW5lbERhdGEsIGNhY2hlKSB7XG4gICAgY2FjaGUucGFuZWxzLnNldChwYW5lbERhdGEuaWQsIHBhbmVsRGF0YSk7XG4gICAgZm9yIChsZXQgdGFiIG9mIHBhbmVsRGF0YS50YWJzKSB7XG4gICAgICAgIGNhY2hlLnRhYnMuc2V0KHRhYi5pZCwgdGFiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhZGRCb3hUb0NhY2hlKGJveERhdGEsIGNhY2hlKSB7XG4gICAgZm9yIChsZXQgY2hpbGQgb2YgYm94RGF0YS5jaGlsZHJlbikge1xuICAgICAgICBpZiAoJ3RhYnMnIGluIGNoaWxkKSB7XG4gICAgICAgICAgICBhZGRQYW5lbFRvQ2FjaGUoY2hpbGQsIGNhY2hlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgnY2hpbGRyZW4nIGluIGNoaWxkKSB7XG4gICAgICAgICAgICBhZGRCb3hUb0NhY2hlKGNoaWxkLCBjYWNoZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTGF5b3V0Q2FjaGUoZGVmYXVsdExheW91dCkge1xuICAgIGxldCBjYWNoZSA9IHtcbiAgICAgICAgcGFuZWxzOiBuZXcgTWFwKCksXG4gICAgICAgIHRhYnM6IG5ldyBNYXAoKSxcbiAgICB9O1xuICAgIGlmIChkZWZhdWx0TGF5b3V0KSB7XG4gICAgICAgIGlmICgnY2hpbGRyZW4nIGluIGRlZmF1bHRMYXlvdXQpIHtcbiAgICAgICAgICAgIC8vIEJveERhdGFcbiAgICAgICAgICAgIGFkZEJveFRvQ2FjaGUoZGVmYXVsdExheW91dCwgY2FjaGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gTGF5b3V0RGF0YVxuICAgICAgICAgICAgaWYgKCdkb2NrYm94JyBpbiBkZWZhdWx0TGF5b3V0KSB7XG4gICAgICAgICAgICAgICAgYWRkQm94VG9DYWNoZShkZWZhdWx0TGF5b3V0LmRvY2tib3gsIGNhY2hlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgnZmxvYXRib3gnIGluIGRlZmF1bHRMYXlvdXQpIHtcbiAgICAgICAgICAgICAgICBhZGRCb3hUb0NhY2hlKGRlZmF1bHRMYXlvdXQuZmxvYXRib3gsIGNhY2hlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2FjaGU7XG59XG5leHBvcnQgZnVuY3Rpb24gc2F2ZUxheW91dERhdGEobGF5b3V0LCBzYXZlVGFiLCBhZnRlclBhbmVsU2F2ZWQpIHtcbiAgICBmdW5jdGlvbiBzYXZlVGFiRGF0YSh0YWJEYXRhKSB7XG4gICAgICAgIGlmIChzYXZlVGFiKSB7XG4gICAgICAgICAgICByZXR1cm4gc2F2ZVRhYih0YWJEYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBpZDogdGFiRGF0YS5pZCB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBzYXZlUGFuZWxEYXRhKHBhbmVsRGF0YSkge1xuICAgICAgICBsZXQgdGFicyA9IFtdO1xuICAgICAgICBmb3IgKGxldCB0YWIgb2YgcGFuZWxEYXRhLnRhYnMpIHtcbiAgICAgICAgICAgIGxldCBzYXZlZFRhYiA9IHNhdmVUYWJEYXRhKHRhYik7XG4gICAgICAgICAgICBpZiAoc2F2ZWRUYWIpIHtcbiAgICAgICAgICAgICAgICB0YWJzLnB1c2goc2F2ZWRUYWIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCB7IGlkLCBzaXplLCBhY3RpdmVJZCB9ID0gcGFuZWxEYXRhO1xuICAgICAgICBsZXQgc2F2ZWRQYW5lbDtcbiAgICAgICAgaWYgKHBhbmVsRGF0YS5wYXJlbnQubW9kZSA9PT0gJ2Zsb2F0JyB8fCBwYW5lbERhdGEucGFyZW50Lm1vZGUgPT09ICd3aW5kb3cnKSB7XG4gICAgICAgICAgICBsZXQgeyB4LCB5LCB6LCB3LCBoIH0gPSBwYW5lbERhdGE7XG4gICAgICAgICAgICBzYXZlZFBhbmVsID0geyBpZCwgc2l6ZSwgdGFicywgYWN0aXZlSWQsIHgsIHksIHosIHcsIGggfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNhdmVkUGFuZWwgPSB7IGlkLCBzaXplLCB0YWJzLCBhY3RpdmVJZCB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChhZnRlclBhbmVsU2F2ZWQpIHtcbiAgICAgICAgICAgIGFmdGVyUGFuZWxTYXZlZChzYXZlZFBhbmVsLCBwYW5lbERhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzYXZlZFBhbmVsO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzYXZlQm94RGF0YShib3hEYXRhKSB7XG4gICAgICAgIGxldCBjaGlsZHJlbiA9IFtdO1xuICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBib3hEYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAoJ3RhYnMnIGluIGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChzYXZlUGFuZWxEYXRhKGNoaWxkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgnY2hpbGRyZW4nIGluIGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChzYXZlQm94RGF0YShjaGlsZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCB7IGlkLCBzaXplLCBtb2RlIH0gPSBib3hEYXRhO1xuICAgICAgICByZXR1cm4geyBpZCwgc2l6ZSwgbW9kZSwgY2hpbGRyZW4gfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9ja2JveDogc2F2ZUJveERhdGEobGF5b3V0LmRvY2tib3gpLFxuICAgICAgICBmbG9hdGJveDogc2F2ZUJveERhdGEobGF5b3V0LmZsb2F0Ym94KSxcbiAgICAgICAgd2luZG93Ym94OiBzYXZlQm94RGF0YShsYXlvdXQud2luZG93Ym94KSxcbiAgICAgICAgbWF4Ym94OiBzYXZlQm94RGF0YShsYXlvdXQubWF4Ym94KSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRMYXlvdXREYXRhKHNhdmVkTGF5b3V0LCBkZWZhdWx0TGF5b3V0LCBsb2FkVGFiLCBhZnRlclBhbmVsTG9hZGVkKSB7XG4gICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgbGV0IGNhY2hlID0gY3JlYXRlTGF5b3V0Q2FjaGUoZGVmYXVsdExheW91dCk7XG4gICAgZnVuY3Rpb24gbG9hZFRhYkRhdGEoc2F2ZWRUYWIpIHtcbiAgICAgICAgaWYgKGxvYWRUYWIpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2FkVGFiKHNhdmVkVGFiKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgeyBpZCB9ID0gc2F2ZWRUYWI7XG4gICAgICAgIGlmIChjYWNoZS50YWJzLmhhcyhpZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWNoZS50YWJzLmdldChpZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxvYWRQYW5lbERhdGEoc2F2ZWRQYW5lbCkge1xuICAgICAgICBsZXQgeyBpZCwgc2l6ZSwgYWN0aXZlSWQsIHgsIHksIHosIHcsIGggfSA9IHNhdmVkUGFuZWw7XG4gICAgICAgIGxldCB0YWJzID0gW107XG4gICAgICAgIGZvciAobGV0IHNhdmVkVGFiIG9mIHNhdmVkUGFuZWwudGFicykge1xuICAgICAgICAgICAgbGV0IHRhYkRhdGEgPSBsb2FkVGFiRGF0YShzYXZlZFRhYik7XG4gICAgICAgICAgICBpZiAodGFiRGF0YSkge1xuICAgICAgICAgICAgICAgIHRhYnMucHVzaCh0YWJEYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgcGFuZWxEYXRhO1xuICAgICAgICBpZiAodyB8fCBoIHx8IHggfHwgeSB8fCB6KSB7XG4gICAgICAgICAgICBwYW5lbERhdGEgPSB7IGlkLCBzaXplLCBhY3RpdmVJZCwgeCwgeSwgeiwgdywgaCwgdGFicyB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGFuZWxEYXRhID0geyBpZCwgc2l6ZSwgYWN0aXZlSWQsIHRhYnMgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2F2ZWRQYW5lbC5pZCA9PT0gbWF4aW1lUGxhY2VIb2xkZXJJZCkge1xuICAgICAgICAgICAgcGFuZWxEYXRhLnBhbmVsTG9jayA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFmdGVyUGFuZWxMb2FkZWQpIHtcbiAgICAgICAgICAgIGFmdGVyUGFuZWxMb2FkZWQoc2F2ZWRQYW5lbCwgcGFuZWxEYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjYWNoZS5wYW5lbHMuaGFzKGlkKSkge1xuICAgICAgICAgICAgcGFuZWxEYXRhID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjYWNoZS5wYW5lbHMuZ2V0KGlkKSksIHBhbmVsRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhbmVsRGF0YTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbG9hZEJveERhdGEoc2F2ZWRCb3gpIHtcbiAgICAgICAgaWYgKCFzYXZlZEJveCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNoaWxkcmVuID0gW107XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIHNhdmVkQm94LmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBpZiAoJ3RhYnMnIGluIGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChsb2FkUGFuZWxEYXRhKGNoaWxkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgnY2hpbGRyZW4nIGluIGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChsb2FkQm94RGF0YShjaGlsZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCB7IGlkLCBzaXplLCBtb2RlIH0gPSBzYXZlZEJveDtcbiAgICAgICAgcmV0dXJuIHsgaWQsIHNpemUsIG1vZGUsIGNoaWxkcmVuIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGRvY2tib3g6IGxvYWRCb3hEYXRhKHNhdmVkTGF5b3V0LmRvY2tib3gpLFxuICAgICAgICBmbG9hdGJveDogbG9hZEJveERhdGEoKF9hID0gc2F2ZWRMYXlvdXQuZmxvYXRib3gpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHsgbW9kZTogJ2Zsb2F0JywgY2hpbGRyZW46IFtdLCBzaXplOiAwIH0pLFxuICAgICAgICB3aW5kb3dib3g6IGxvYWRCb3hEYXRhKChfYiA9IHNhdmVkTGF5b3V0LndpbmRvd2JveCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogeyBtb2RlOiAnd2luZG93JywgY2hpbGRyZW46IFtdLCBzaXplOiAwIH0pLFxuICAgICAgICBtYXhib3g6IGxvYWRCb3hEYXRhKChfYyA9IHNhdmVkTGF5b3V0Lm1heGJveCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogeyBtb2RlOiAnbWF4aW1pemUnLCBjaGlsZHJlbjogW10sIHNpemU6IDEgfSksXG4gICAgfTtcbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IERvY2tQYW5lbCB9IGZyb20gXCIuL0RvY2tQYW5lbFwiO1xuZXhwb3J0IGNsYXNzIE1heEJveCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHBhbmVsRGF0YSA9IHRoaXMucHJvcHMuYm94RGF0YS5jaGlsZHJlblswXTtcbiAgICAgICAgaWYgKHBhbmVsRGF0YSkge1xuICAgICAgICAgICAgdGhpcy5oaWRlUGFuZWxEYXRhID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwYW5lbERhdGEpLCB7IGlkOiAnJywgdGFiczogW10gfSk7XG4gICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZG9jay1ib3ggZG9jay1tYm94IGRvY2stbWJveC1zaG93XCIgfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERvY2tQYW5lbCwgeyBzaXplOiAxMDAsIHBhbmVsRGF0YTogcGFuZWxEYXRhIH0pKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5oaWRlUGFuZWxEYXRhKSB7XG4gICAgICAgICAgICAvLyB1c2UgdGhlIGhpZGVuIGRhdGEgb25seSBvbmNlLCBkb250IGtlZXAgaXQgZm9yIHRvbyBsb25nXG4gICAgICAgICAgICBsZXQgaGlkZVBhbmVsRGF0YSA9IHRoaXMuaGlkZVBhbmVsRGF0YTtcbiAgICAgICAgICAgIHRoaXMuaGlkZVBhbmVsRGF0YSA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZG9jay1ib3ggZG9jay1tYm94IGRvY2stbWJveC1oaWRlXCIgfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERvY2tQYW5lbCwgeyBzaXplOiAxMDAsIHBhbmVsRGF0YTogaGlkZVBhbmVsRGF0YSB9KSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImRvY2stYm94IGRvY2stbWJveCBkb2NrLW1ib3gtaGlkZVwiIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsInZhciBfX3Jlc3QgPSAodGhpcyAmJiB0aGlzLl9fcmVzdCkgfHwgZnVuY3Rpb24gKHMsIGUpIHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxuICAgICAgICB0W3BdID0gc1twXTtcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcbiAgICAgICAgfVxuICAgIHJldHVybiB0O1xufTtcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoL2RlYm91bmNlJztcbmltcG9ydCB7IGRlZmF1bHRHcm91cCwgRG9ja0NvbnRleHRQcm92aWRlciwgcGxhY2VIb2xkZXJHcm91cCwgcGxhY2VIb2xkZXJTdHlsZSB9IGZyb20gXCIuL0RvY2tEYXRhXCI7XG5pbXBvcnQgeyBEb2NrQm94IH0gZnJvbSBcIi4vRG9ja0JveFwiO1xuaW1wb3J0IHsgRmxvYXRCb3ggfSBmcm9tIFwiLi9GbG9hdEJveFwiO1xuaW1wb3J0IHsgRG9ja1BhbmVsIH0gZnJvbSBcIi4vRG9ja1BhbmVsXCI7XG5pbXBvcnQgKiBhcyBBbGdvcml0aG0gZnJvbSBcIi4vQWxnb3JpdGhtXCI7XG5pbXBvcnQgKiBhcyBTZXJpYWxpemVyIGZyb20gXCIuL1NlcmlhbGl6ZXJcIjtcbmltcG9ydCAqIGFzIERyYWdNYW5hZ2VyIGZyb20gXCIuL2RyYWdkcm9wL0RyYWdNYW5hZ2VyXCI7XG5pbXBvcnQgeyBNYXhCb3ggfSBmcm9tIFwiLi9NYXhCb3hcIjtcbmltcG9ydCB7IFdpbmRvd0JveCB9IGZyb20gXCIuL1dpbmRvd0JveFwiO1xuY2xhc3MgRG9ja1BvcnRhbE1hbmFnZXIgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLyoqIEBpZ25vcmUgKi9cbiAgICAgICAgdGhpcy5fY2FjaGVzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3lSZW1vdmVkUGFuZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdEZXN0cm95ID0gbnVsbDtcbiAgICAgICAgICAgIGxldCBjYWNoZVJlbW92ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAobGV0IFtpZCwgY2FjaGVdIG9mIHRoaXMuX2NhY2hlcykge1xuICAgICAgICAgICAgICAgIGlmIChjYWNoZS5vd25lciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlcy5kZWxldGUoaWQpO1xuICAgICAgICAgICAgICAgICAgICBjYWNoZVJlbW92ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYWNoZVJlbW92ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKiBAaWdub3JlICovXG4gICAgZ2V0VGFiQ2FjaGUoaWQsIG93bmVyKSB7XG4gICAgICAgIGxldCBjYWNoZSA9IHRoaXMuX2NhY2hlcy5nZXQoaWQpO1xuICAgICAgICBpZiAoIWNhY2hlKSB7XG4gICAgICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBkaXYuY2xhc3NOYW1lID0gJ2RvY2stcGFuZS1jYWNoZSc7XG4gICAgICAgICAgICBjYWNoZSA9IHsgZGl2LCBpZCwgb3duZXIgfTtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlcy5zZXQoaWQsIGNhY2hlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlLm93bmVyID0gb3duZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhY2hlO1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIHJlbW92ZVRhYkNhY2hlKGlkLCBvd25lcikge1xuICAgICAgICBsZXQgY2FjaGUgPSB0aGlzLl9jYWNoZXMuZ2V0KGlkKTtcbiAgICAgICAgaWYgKGNhY2hlICYmIGNhY2hlLm93bmVyID09PSBvd25lcikge1xuICAgICAgICAgICAgY2FjaGUub3duZXIgPSBudWxsO1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9wZW5kaW5nRGVzdHJveSkge1xuICAgICAgICAgICAgICAgIC8vIGl0IGNvdWxkIGJlIHJldXNlZCBieSBhbm90aGVyIGNvbXBvbmVudCwgc28gbGV0J3Mgd2FpdFxuICAgICAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdEZXN0cm95ID0gc2V0VGltZW91dCh0aGlzLmRlc3Ryb3lSZW1vdmVkUGFuZSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICB1cGRhdGVUYWJDYWNoZShpZCwgY2hpbGRyZW4pIHtcbiAgICAgICAgbGV0IGNhY2hlID0gdGhpcy5fY2FjaGVzLmdldChpZCk7XG4gICAgICAgIGlmIChjYWNoZSkge1xuICAgICAgICAgICAgY2FjaGUucG9ydGFsID0gUmVhY3RET00uY3JlYXRlUG9ydGFsKGNoaWxkcmVuLCBjYWNoZS5kaXYsIGNhY2hlLmlkKTtcbiAgICAgICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBEb2NrTGF5b3V0IGV4dGVuZHMgRG9ja1BvcnRhbE1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgLyoqIEBpZ25vcmUgKi9cbiAgICAgICAgdGhpcy5nZXRSZWYgPSAocikgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVmID0gcjtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqIEBpZ25vcmUgKi9cbiAgICAgICAgdGhpcy5vbkRyYWdTdGF0ZUNoYW5nZSA9IChkcmFnZ2luZ1Njb3BlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZHJhZ2dpbmdTY29wZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgRG9ja1BhbmVsLmRyb3BwaW5nUGFuZWwgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmRyb3BSZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcm9wUmVjdDogbnVsbCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX29uV2luZG93UmVzaXplID0gZGVib3VuY2UoKCkgPT4ge1xuICAgICAgICAgICAgbGV0IGxheW91dCA9IHRoaXMuZ2V0TGF5b3V0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5fcmVmKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5ld0xheW91dCA9IEFsZ29yaXRobS5maXhGbG9hdFBhbmVsUG9zKGxheW91dCwgdGhpcy5fcmVmLm9mZnNldFdpZHRoLCB0aGlzLl9yZWYub2Zmc2V0SGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBpZiAobGF5b3V0ICE9PSBuZXdMYXlvdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3TGF5b3V0ID0gQWxnb3JpdGhtLmZpeExheW91dERhdGEobmV3TGF5b3V0LCB0aGlzLnByb3BzLmdyb3Vwcyk7IC8vIHBhbmVsIHBhcmVudCBtaWdodCBuZWVkIGEgZml4XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlTGF5b3V0KG5ld0xheW91dCwgbnVsbCwgJ21vdmUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDIwMCk7XG4gICAgICAgIGxldCB7IGxheW91dCwgZGVmYXVsdExheW91dCwgbG9hZFRhYiB9ID0gcHJvcHM7XG4gICAgICAgIGxldCBwcmVwYXJlZExheW91dDtcbiAgICAgICAgaWYgKGRlZmF1bHRMYXlvdXQpIHtcbiAgICAgICAgICAgIHByZXBhcmVkTGF5b3V0ID0gdGhpcy5wcmVwYXJlSW5pdERhdGEocHJvcHMuZGVmYXVsdExheW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWxvYWRUYWIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRG9ja0xheW91dC5sb2FkVGFiIGFuZCBEb2NrTGF5b3V0LmRlZmF1bHRMYXlvdXQgc2hvdWxkIG5vdCBib3RoIGJlIHVuZGVmaW5lZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGF5b3V0KSB7XG4gICAgICAgICAgICAvLyBjb250cm9sbGVkIGxheW91dFxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBsYXlvdXQ6IERvY2tMYXlvdXQubG9hZExheW91dERhdGEobGF5b3V0LCBwcm9wcyksXG4gICAgICAgICAgICAgICAgZHJvcFJlY3Q6IG51bGwsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBsYXlvdXQ6IHByZXBhcmVkTGF5b3V0LFxuICAgICAgICAgICAgICAgIGRyb3BSZWN0OiBudWxsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBEcmFnTWFuYWdlci5hZGREcmFnU3RhdGVMaXN0ZW5lcih0aGlzLm9uRHJhZ1N0YXRlQ2hhbmdlKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX29uV2luZG93UmVzaXplKTtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBnZXRSb290RWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZjtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBwcmVwYXJlSW5pdERhdGEoZGF0YSkge1xuICAgICAgICBsZXQgbGF5b3V0ID0gT2JqZWN0LmFzc2lnbih7fSwgZGF0YSk7XG4gICAgICAgIEFsZ29yaXRobS5maXhMYXlvdXREYXRhKGxheW91dCwgdGhpcy5wcm9wcy5ncm91cHMsIHRoaXMucHJvcHMubG9hZFRhYik7XG4gICAgICAgIHJldHVybiBsYXlvdXQ7XG4gICAgfVxuICAgIC8qKiBAaWdub3JlICovXG4gICAgZ2V0RG9ja0lkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5kb2NrSWQgfHwgdGhpcztcbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgZ2V0R3JvdXAobmFtZSkge1xuICAgICAgICBpZiAobmFtZSkge1xuICAgICAgICAgICAgbGV0IHsgZ3JvdXBzIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgaWYgKGdyb3VwcyAmJiBuYW1lIGluIGdyb3Vwcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBncm91cHNbbmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmFtZSA9PT0gcGxhY2VIb2xkZXJTdHlsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwbGFjZUhvbGRlckdyb3VwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZhdWx0R3JvdXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICogQHBhcmFtIHNvdXJjZSBAaW5oZXJpdERvY1xuICAgICAqIEBwYXJhbSB0YXJnZXQgQGluaGVyaXREb2NcbiAgICAgKiBAcGFyYW0gZGlyZWN0aW9uIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgZG9ja01vdmUoc291cmNlLCB0YXJnZXQsIGRpcmVjdGlvbikge1xuICAgICAgICBsZXQgbGF5b3V0ID0gdGhpcy5nZXRMYXlvdXQoKTtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ21heGltaXplJykge1xuICAgICAgICAgICAgbGF5b3V0ID0gQWxnb3JpdGhtLm1heGltaXplKGxheW91dCwgc291cmNlKTtcbiAgICAgICAgICAgIHRoaXMucGFuZWxUb0ZvY3VzID0gc291cmNlLmlkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ2Zyb250Jykge1xuICAgICAgICAgICAgbGF5b3V0ID0gQWxnb3JpdGhtLm1vdmVUb0Zyb250KGxheW91dCwgc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxheW91dCA9IEFsZ29yaXRobS5yZW1vdmVGcm9tTGF5b3V0KGxheW91dCwgc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRhcmdldCA9IHRoaXMuZmluZCh0YXJnZXQsIEFsZ29yaXRobS5GaWx0ZXIuQWxsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldCA9IEFsZ29yaXRobS5nZXRVcGRhdGVkT2JqZWN0KHRhcmdldCk7IC8vIHRhcmdldCBtaWdodCBjaGFuZ2UgZHVyaW5nIHJlbW92ZVRhYlxuICAgICAgICB9XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdmbG9hdCcpIHtcbiAgICAgICAgICAgIGxldCBuZXdQYW5lbCA9IEFsZ29yaXRobS5jb252ZXJUb1BhbmVsKHNvdXJjZSk7XG4gICAgICAgICAgICBuZXdQYW5lbC56ID0gQWxnb3JpdGhtLm5leHRaSW5kZXgobnVsbCk7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5kcm9wUmVjdCkge1xuICAgICAgICAgICAgICAgIGxheW91dCA9IEFsZ29yaXRobS5mbG9hdFBhbmVsKGxheW91dCwgbmV3UGFuZWwsIHRoaXMuc3RhdGUuZHJvcFJlY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGF5b3V0ID0gQWxnb3JpdGhtLmZsb2F0UGFuZWwobGF5b3V0LCBuZXdQYW5lbCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3JlZikge1xuICAgICAgICAgICAgICAgICAgICBsYXlvdXQgPSBBbGdvcml0aG0uZml4RmxvYXRQYW5lbFBvcyhsYXlvdXQsIHRoaXMuX3JlZi5vZmZzZXRXaWR0aCwgdGhpcy5fcmVmLm9mZnNldEhlaWdodCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ25ldy13aW5kb3cnKSB7XG4gICAgICAgICAgICBsZXQgbmV3UGFuZWwgPSBBbGdvcml0aG0uY29udmVyVG9QYW5lbChzb3VyY2UpO1xuICAgICAgICAgICAgbGF5b3V0ID0gQWxnb3JpdGhtLnBhbmVsVG9XaW5kb3cobGF5b3V0LCBuZXdQYW5lbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICBpZiAoJ3RhYnMnIGluIHRhcmdldCkge1xuICAgICAgICAgICAgICAgIC8vIHBhbmRlbCB0YXJnZXRcbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnbWlkZGxlJykge1xuICAgICAgICAgICAgICAgICAgICBsYXlvdXQgPSBBbGdvcml0aG0uYWRkVGFiVG9QYW5lbChsYXlvdXQsIHNvdXJjZSwgdGFyZ2V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdQYW5lbCA9IEFsZ29yaXRobS5jb252ZXJUb1BhbmVsKHNvdXJjZSk7XG4gICAgICAgICAgICAgICAgICAgIGxheW91dCA9IEFsZ29yaXRobS5kb2NrUGFuZWxUb1BhbmVsKGxheW91dCwgbmV3UGFuZWwsIHRhcmdldCwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgnY2hpbGRyZW4nIGluIHRhcmdldCkge1xuICAgICAgICAgICAgICAgIC8vIGJveCB0YXJnZXRcbiAgICAgICAgICAgICAgICBsZXQgbmV3UGFuZWwgPSBBbGdvcml0aG0uY29udmVyVG9QYW5lbChzb3VyY2UpO1xuICAgICAgICAgICAgICAgIGxheW91dCA9IEFsZ29yaXRobS5kb2NrUGFuZWxUb0JveChsYXlvdXQsIG5ld1BhbmVsLCB0YXJnZXQsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB0YWIgdGFyZ2V0XG4gICAgICAgICAgICAgICAgbGF5b3V0ID0gQWxnb3JpdGhtLmFkZE5leHRUb1RhYihsYXlvdXQsIHNvdXJjZSwgdGFyZ2V0LCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChsYXlvdXQgIT09IHRoaXMuZ2V0TGF5b3V0KCkpIHtcbiAgICAgICAgICAgIGxheW91dCA9IEFsZ29yaXRobS5maXhMYXlvdXREYXRhKGxheW91dCwgdGhpcy5wcm9wcy5ncm91cHMpO1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRUYWJJZCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KCd0YWJzJykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50VGFiSWQgPSBzb3VyY2UuYWN0aXZlSWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHNvdXJjZSBpcyB0YWJcbiAgICAgICAgICAgICAgICBjdXJyZW50VGFiSWQgPSBzb3VyY2UuaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNoYW5nZUxheW91dChsYXlvdXQsIGN1cnJlbnRUYWJJZCwgZGlyZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uRHJhZ1N0YXRlQ2hhbmdlKGZhbHNlKTtcbiAgICB9XG4gICAgLyoqIEBpbmhlcml0RG9jICovXG4gICAgZmluZChpZCwgZmlsdGVyKSB7XG4gICAgICAgIHJldHVybiBBbGdvcml0aG0uZmluZCh0aGlzLmdldExheW91dCgpLCBpZCwgZmlsdGVyKTtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBnZXRMYXlvdXRTaXplKCkge1xuICAgICAgICBpZiAodGhpcy5fcmVmKSB7XG4gICAgICAgICAgICByZXR1cm4geyB3aWR0aDogdGhpcy5fcmVmLm9mZnNldFdpZHRoLCBoZWlnaHQ6IHRoaXMuX3JlZi5vZmZzZXRIZWlnaHQgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB3aWR0aDogMCwgaGVpZ2h0OiAwIH07XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIHVwZGF0ZVRhYihpZCwgbmV3VGFiLCBtYWtlQWN0aXZlID0gdHJ1ZSkge1xuICAgICAgICBsZXQgdGFiID0gdGhpcy5maW5kKGlkLCBBbGdvcml0aG0uRmlsdGVyLkFueVRhYik7XG4gICAgICAgIGlmICh0YWIpIHtcbiAgICAgICAgICAgIGxldCBwYW5lbERhdGEgPSB0YWIucGFyZW50O1xuICAgICAgICAgICAgbGV0IGlkeCA9IHBhbmVsRGF0YS50YWJzLmluZGV4T2YodGFiKTtcbiAgICAgICAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAgICAgICAgIGxldCB7IGxvYWRUYWIgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICAgICAgbGV0IGxheW91dCA9IHRoaXMuZ2V0TGF5b3V0KCk7XG4gICAgICAgICAgICAgICAgbGV0IGFjdGl2ZUlkID0gcGFuZWxEYXRhLmFjdGl2ZUlkO1xuICAgICAgICAgICAgICAgIGlmIChuZXdUYWIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvYWRUYWIgJiYgISgnY29udGVudCcgaW4gbmV3VGFiICYmICd0aXRsZScgaW4gbmV3VGFiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFiID0gbG9hZFRhYihuZXdUYWIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxheW91dCA9IEFsZ29yaXRobS5yZW1vdmVGcm9tTGF5b3V0KGxheW91dCwgdGFiKTsgLy8gcmVtb3ZlIG9sZCB0YWJcbiAgICAgICAgICAgICAgICAgICAgcGFuZWxEYXRhID0gQWxnb3JpdGhtLmdldFVwZGF0ZWRPYmplY3QocGFuZWxEYXRhKTsgLy8gcGFuZWxEYXRhIG1pZ2h0IGNoYW5nZSBkdXJpbmcgcmVtb3ZlVGFiXG4gICAgICAgICAgICAgICAgICAgIGxheW91dCA9IEFsZ29yaXRobS5hZGRUYWJUb1BhbmVsKGxheW91dCwgbmV3VGFiLCBwYW5lbERhdGEsIGlkeCk7IC8vIGFkZCBuZXcgdGFiXG4gICAgICAgICAgICAgICAgICAgIHBhbmVsRGF0YSA9IEFsZ29yaXRobS5nZXRVcGRhdGVkT2JqZWN0KHBhbmVsRGF0YSk7IC8vIHBhbmVsRGF0YSBtaWdodCBjaGFuZ2UgZHVyaW5nIGFkZFRhYlRvUGFuZWxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFtYWtlQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhbmVsRGF0YS5hY3RpdmVJZCA9IGFjdGl2ZUlkO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhbmVsVG9Gb2N1cyA9IHBhbmVsRGF0YS5pZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGF5b3V0ID0gQWxnb3JpdGhtLmZpeExheW91dERhdGEobGF5b3V0LCB0aGlzLnByb3BzLmdyb3Vwcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VMYXlvdXQobGF5b3V0LCBuZXdUYWIuaWQsICd1cGRhdGUnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKiBAaW5oZXJpdERvYyAqL1xuICAgIG5hdmlnYXRlVG9QYW5lbChmcm9tRWxlbWVudCwgZGlyZWN0aW9uKSB7XG4gICAgICAgIGlmICghZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBpZiAoIWZyb21FbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZnJvbUVsZW1lbnQgPSB0aGlzLl9yZWYucXVlcnlTZWxlY3RvcignLmRvY2stdGFiLWFjdGl2ZT4uZG9jay10YWItYnRuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmcm9tRWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0YXJnZXRUYWI7XG4gICAgICAgIC8vIHVzZSBwYW5lbCByZWN0IHdoZW4gbW92ZSBsZWZ0L3JpZ2h0LCBhbmQgdXNlIHRhYmJhciByZWN0IGZvciB1cC9kb3duXG4gICAgICAgIGxldCBzZWxlY3RvciA9IChkaXJlY3Rpb24gPT09ICdBcnJvd1VwJyB8fCBkaXJlY3Rpb24gPT09ICdBcnJvd0Rvd24nKSA/XG4gICAgICAgICAgICAnLmRvY2s+LmRvY2stYmFyJyA6ICcuZG9jay1ib3g+LmRvY2stcGFuZWwnO1xuICAgICAgICBsZXQgcGFuZWxzID0gQXJyYXkuZnJvbSh0aGlzLl9yZWYucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xuICAgICAgICBsZXQgY3VycmVudFBhbmVsID0gcGFuZWxzLmZpbmQoKHBhbmVsKSA9PiBwYW5lbC5jb250YWlucyhmcm9tRWxlbWVudCkpO1xuICAgICAgICBsZXQgY3VycmVudFJlY3QgPSBjdXJyZW50UGFuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGxldCBtYXRjaGVzID0gW107XG4gICAgICAgIGZvciAobGV0IHBhbmVsIG9mIHBhbmVscykge1xuICAgICAgICAgICAgaWYgKHBhbmVsICE9PSBjdXJyZW50UGFuZWwpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVjdCA9IHBhbmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IEFsZ29yaXRobS5maW5kTmVhcmVzdFBhbmVsKGN1cnJlbnRSZWN0LCByZWN0LCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaCh7IHBhbmVsLCByZWN0LCBkaXN0YW5jZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWF0Y2hlcy5zb3J0KChhLCBiKSA9PiBhLmRpc3RhbmNlIC0gYi5kaXN0YW5jZSk7XG4gICAgICAgIGZvciAobGV0IG1hdGNoIG9mIG1hdGNoZXMpIHtcbiAgICAgICAgICAgIHRhcmdldFRhYiA9IG1hdGNoLnBhbmVsLnF1ZXJ5U2VsZWN0b3IoJy5kb2NrLXRhYi1hY3RpdmU+LmRvY2stdGFiLWJ0bicpO1xuICAgICAgICAgICAgaWYgKHRhcmdldFRhYikge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJnZXRUYWIpIHtcbiAgICAgICAgICAgIHRhcmdldFRhYi5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaWdub3JlICovXG4gICAgdXNlRWRnZURyb3AoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLmRyb3BNb2RlID09PSAnZWRnZSc7XG4gICAgfVxuICAgIC8qKiBAaWdub3JlICovXG4gICAgc2V0RHJvcFJlY3QoZWxlbWVudCwgZGlyZWN0aW9uLCBzb3VyY2UsIGV2ZW50LCBwYW5lbFNpemUgPSBbMzAwLCAzMDBdKSB7XG4gICAgICAgIGxldCB7IGRyb3BSZWN0IH0gPSB0aGlzLnN0YXRlO1xuICAgICAgICBpZiAoZHJvcFJlY3QpIHtcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdyZW1vdmUnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRyb3BSZWN0LnNvdXJjZSA9PT0gc291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcm9wUmVjdDogbnVsbCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZHJvcFJlY3QuZWxlbWVudCA9PT0gZWxlbWVudCAmJiBkcm9wUmVjdC5kaXJlY3Rpb24gPT09IGRpcmVjdGlvbiAmJiBkaXJlY3Rpb24gIT09ICdmbG9hdCcpIHtcbiAgICAgICAgICAgICAgICAvLyBza2lwIGR1cGxpY2F0ZWQgdXBkYXRlIGV4Y2VwdCBmb3IgZmxvYXQgZHJhZ2dpbmdcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZHJvcFJlY3Q6IG51bGwgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxheW91dFJlY3QgPSB0aGlzLl9yZWYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGxldCBzY2FsZVggPSB0aGlzLl9yZWYub2Zmc2V0V2lkdGggLyBsYXlvdXRSZWN0LndpZHRoO1xuICAgICAgICBsZXQgc2NhbGVZID0gdGhpcy5fcmVmLm9mZnNldEhlaWdodCAvIGxheW91dFJlY3QuaGVpZ2h0O1xuICAgICAgICBsZXQgZWxlbVJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBsZXQgbGVmdCA9IChlbGVtUmVjdC5sZWZ0IC0gbGF5b3V0UmVjdC5sZWZ0KSAqIHNjYWxlWDtcbiAgICAgICAgbGV0IHRvcCA9IChlbGVtUmVjdC50b3AgLSBsYXlvdXRSZWN0LnRvcCkgKiBzY2FsZVk7XG4gICAgICAgIGxldCB3aWR0aCA9IGVsZW1SZWN0LndpZHRoICogc2NhbGVYO1xuICAgICAgICBsZXQgaGVpZ2h0ID0gZWxlbVJlY3QuaGVpZ2h0ICogc2NhbGVZO1xuICAgICAgICBsZXQgcmF0aW8gPSAwLjU7XG4gICAgICAgIGlmIChlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZG9jay1ib3gnKSkge1xuICAgICAgICAgICAgcmF0aW8gPSAwLjM7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGNhc2UgJ2Zsb2F0Jzoge1xuICAgICAgICAgICAgICAgIGxldCB4ID0gKGV2ZW50LmNsaWVudFggLSBsYXlvdXRSZWN0LmxlZnQpICogc2NhbGVYO1xuICAgICAgICAgICAgICAgIGxldCB5ID0gKGV2ZW50LmNsaWVudFkgLSBsYXlvdXRSZWN0LnRvcCkgKiBzY2FsZVk7XG4gICAgICAgICAgICAgICAgdG9wID0geSAtIDE1O1xuICAgICAgICAgICAgICAgIHdpZHRoID0gcGFuZWxTaXplWzBdO1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IHBhbmVsU2l6ZVsxXTtcbiAgICAgICAgICAgICAgICBsZWZ0ID0geCAtICh3aWR0aCA+PiAxKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgICAgICBsZWZ0ICs9IHdpZHRoICogKDEgLSByYXRpbyk7XG4gICAgICAgICAgICBjYXNlICdsZWZ0JzogLy8gdHNsaW50OmRpc2FibGUtbGluZSBuby1zd2l0Y2gtY2FzZS1mYWxsLXRocm91Z2hcbiAgICAgICAgICAgICAgICB3aWR0aCAqPSByYXRpbztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6XG4gICAgICAgICAgICAgICAgdG9wICs9IGhlaWdodCAqICgxIC0gcmF0aW8pO1xuICAgICAgICAgICAgY2FzZSAndG9wJzogLy8gdHNsaW50OmRpc2FibGUtbGluZSBuby1zd2l0Y2gtY2FzZS1mYWxsLXRocm91Z2hcbiAgICAgICAgICAgICAgICBoZWlnaHQgKj0gcmF0aW87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhZnRlci10YWInOlxuICAgICAgICAgICAgICAgIGxlZnQgKz0gd2lkdGggLSAxNTtcbiAgICAgICAgICAgICAgICB3aWR0aCA9IDMwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYmVmb3JlLXRhYic6XG4gICAgICAgICAgICAgICAgbGVmdCAtPSAxNTtcbiAgICAgICAgICAgICAgICB3aWR0aCA9IDMwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkcm9wUmVjdDogeyBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQsIGVsZW1lbnQsIHNvdXJjZSwgZGlyZWN0aW9uIH0gfSk7XG4gICAgfVxuICAgIC8qKiBAaWdub3JlICovXG4gICAgcmVuZGVyKCkge1xuICAgICAgICAvLyBjbGVhciB0ZW1wTGF5b3V0XG4gICAgICAgIHRoaXMudGVtcExheW91dCA9IG51bGw7XG4gICAgICAgIGxldCB7IHN0eWxlLCBtYXhpbWl6ZVRvIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBsZXQgeyBsYXlvdXQsIGRyb3BSZWN0IH0gPSB0aGlzLnN0YXRlO1xuICAgICAgICBsZXQgZHJvcFJlY3RTdHlsZTtcbiAgICAgICAgaWYgKGRyb3BSZWN0KSB7XG4gICAgICAgICAgICBsZXQgeyBlbGVtZW50LCBkaXJlY3Rpb24gfSA9IGRyb3BSZWN0LCByZWN0ID0gX19yZXN0KGRyb3BSZWN0LCBbXCJlbGVtZW50XCIsIFwiZGlyZWN0aW9uXCJdKTtcbiAgICAgICAgICAgIGRyb3BSZWN0U3R5bGUgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlY3QpLCB7IGRpc3BsYXk6ICdibG9jaycgfSk7XG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnZmxvYXQnKSB7XG4gICAgICAgICAgICAgICAgZHJvcFJlY3RTdHlsZS50cmFuc2l0aW9uID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBtYXhpbWl6ZTtcbiAgICAgICAgLy8gaWYgKGxheW91dC5tYXhib3ggJiYgbGF5b3V0Lm1heGJveC5jaGlsZHJlbi5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaWYgKG1heGltaXplVG8pIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWF4aW1pemVUbyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBtYXhpbWl6ZVRvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobWF4aW1pemVUbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXhpbWl6ZSA9IFJlYWN0RE9NLmNyZWF0ZVBvcnRhbChSZWFjdC5jcmVhdGVFbGVtZW50KE1heEJveCwgeyBib3hEYXRhOiBsYXlvdXQubWF4Ym94IH0pLCBtYXhpbWl6ZVRvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1heGltaXplID0gUmVhY3QuY3JlYXRlRWxlbWVudChNYXhCb3gsIHsgYm94RGF0YTogbGF5b3V0Lm1heGJveCB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyB9XG4gICAgICAgIGxldCBwb3J0YWxzID0gW107XG4gICAgICAgIGZvciAobGV0IFtrZXksIGNhY2hlXSBvZiB0aGlzLl9jYWNoZXMpIHtcbiAgICAgICAgICAgIGlmIChjYWNoZS5wb3J0YWwpIHtcbiAgICAgICAgICAgICAgICBwb3J0YWxzLnB1c2goY2FjaGUucG9ydGFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyByZWY6IHRoaXMuZ2V0UmVmLCBjbGFzc05hbWU6IFwiZG9jay1sYXlvdXRcIiwgc3R5bGU6IHN0eWxlIH0sXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERvY2tDb250ZXh0UHJvdmlkZXIsIHsgdmFsdWU6IHRoaXMgfSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERvY2tCb3gsIHsgc2l6ZTogMSwgYm94RGF0YTogbGF5b3V0LmRvY2tib3ggfSksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChGbG9hdEJveCwgeyBib3hEYXRhOiBsYXlvdXQuZmxvYXRib3ggfSksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChXaW5kb3dCb3gsIHsgYm94RGF0YTogbGF5b3V0LndpbmRvd2JveCB9KSxcbiAgICAgICAgICAgICAgICBtYXhpbWl6ZSxcbiAgICAgICAgICAgICAgICBwb3J0YWxzKSxcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZG9jay1kcm9wLWluZGljYXRvclwiLCBzdHlsZTogZHJvcFJlY3RTdHlsZSB9KSkpO1xuICAgIH1cbiAgICAvKiogQGlnbm9yZVxuICAgICAqIG1vdmUgZm9jdXMgdG8gcGFuZWxUb0ZvY3VzXG4gICAgICovXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlLCBzbmFwc2hvdCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aGlzLnBhbmVsVG9Gb2N1cykge1xuICAgICAgICAgICAgbGV0IHBhbmVsID0gdGhpcy5fcmVmLnF1ZXJ5U2VsZWN0b3IoYC5kb2NrLXBhbmVsW2RhdGEtZG9ja2lkPVwiJHt0aGlzLnBhbmVsVG9Gb2N1c31cIl1gKTtcbiAgICAgICAgICAgIGlmIChwYW5lbCAmJiAhcGFuZWwuY29udGFpbnModGhpcy5fcmVmLm93bmVyRG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAoX2EgPSBwYW5lbC5xdWVyeVNlbGVjdG9yKCcuZG9jay1iYXInKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhbmVsVG9Gb2N1cyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX29uV2luZG93UmVzaXplKTtcbiAgICAgICAgRHJhZ01hbmFnZXIucmVtb3ZlRHJhZ1N0YXRlTGlzdGVuZXIodGhpcy5vbkRyYWdTdGF0ZUNoYW5nZSk7XG4gICAgICAgIHRoaXMuX29uV2luZG93UmVzaXplLmNhbmNlbCgpO1xuICAgIH1cbiAgICBzZXRMYXlvdXQobGF5b3V0KSB7XG4gICAgICAgIHRoaXMudGVtcExheW91dCA9IGxheW91dDtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGxheW91dCB9KTtcbiAgICB9XG4gICAgZ2V0TGF5b3V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy50ZW1wTGF5b3V0IHx8IHRoaXMuc3RhdGUubGF5b3V0O1xuICAgIH1cbiAgICAvKiogQGlnbm9yZVxuICAgICAqIGNoYW5nZSBsYXlvdXRcbiAgICAgKi9cbiAgICBjaGFuZ2VMYXlvdXQobGF5b3V0RGF0YSwgY3VycmVudFRhYklkLCBkaXJlY3Rpb24sIHNpbGVudCA9IGZhbHNlKSB7XG4gICAgICAgIGxldCB7IGxheW91dCwgb25MYXlvdXRDaGFuZ2UgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCBzYXZlZExheW91dDtcbiAgICAgICAgaWYgKG9uTGF5b3V0Q2hhbmdlKSB7XG4gICAgICAgICAgICBzYXZlZExheW91dCA9IFNlcmlhbGl6ZXIuc2F2ZUxheW91dERhdGEobGF5b3V0RGF0YSwgdGhpcy5wcm9wcy5zYXZlVGFiLCB0aGlzLnByb3BzLmFmdGVyUGFuZWxTYXZlZCk7XG4gICAgICAgICAgICBsYXlvdXREYXRhLmxvYWRlZEZyb20gPSBzYXZlZExheW91dDtcbiAgICAgICAgICAgIG9uTGF5b3V0Q2hhbmdlKHNhdmVkTGF5b3V0LCBjdXJyZW50VGFiSWQsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICBpZiAobGF5b3V0KSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgbGF5b3V0IHByb3AgaXMgZGVmaW5lZCwgd2UgbmVlZCB0byBmb3JjZSBhbiB1cGRhdGUgdG8gbWFrZSBzdXJlIGl0J3MgZWl0aGVyIHVwZGF0ZWQgb3IgcmV2ZXJ0ZWQgYmFja1xuICAgICAgICAgICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWxheW91dCAmJiAhc2lsZW50KSB7XG4gICAgICAgICAgICAvLyB1bmNvbnRyb2xsZWQgbGF5b3V0IHdoZW4gUHJvcHMubGF5b3V0IGlzIG5vdCBkZWZpbmVkXG4gICAgICAgICAgICB0aGlzLnNldExheW91dChsYXlvdXREYXRhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGlnbm9yZVxuICAgICAqIHNvbWUgbGF5b3V0IGNoYW5nZSB3ZXJlIGhhbmRsZWQgYnkgY29tcG9uZW50IHNpbGVudGx5XG4gICAgICogYnV0IHRoZXkgc2hvdWxkIHN0aWxsIGNhbGwgdGhpcyBmdW5jdGlvbiB0byB0cmlnZ2VyIG9uTGF5b3V0Q2hhbmdlXG4gICAgICovXG4gICAgb25TaWxlbnRDaGFuZ2UoY3VycmVudFRhYklkID0gbnVsbCwgZGlyZWN0aW9uKSB7XG4gICAgICAgIGxldCB7IG9uTGF5b3V0Q2hhbmdlIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBpZiAob25MYXlvdXRDaGFuZ2UpIHtcbiAgICAgICAgICAgIGxldCBsYXlvdXQgPSB0aGlzLmdldExheW91dCgpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VMYXlvdXQobGF5b3V0LCBjdXJyZW50VGFiSWQsIGRpcmVjdGlvbiwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gcHVibGljIGFwaVxuICAgIHNhdmVMYXlvdXQoKSB7XG4gICAgICAgIHJldHVybiBTZXJpYWxpemVyLnNhdmVMYXlvdXREYXRhKHRoaXMuZ2V0TGF5b3V0KCksIHRoaXMucHJvcHMuc2F2ZVRhYiwgdGhpcy5wcm9wcy5hZnRlclBhbmVsU2F2ZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBsb2FkIGxheW91dFxuICAgICAqIGNhbGxpbmcgdGhpcyBhcGkgd29uJ3QgdHJpZ2dlciB0aGUgW1tMYXlvdXRQcm9wcy5vbkxheW91dENoYW5nZV1dIGNhbGxiYWNrXG4gICAgICovXG4gICAgbG9hZExheW91dChzYXZlZExheW91dCkge1xuICAgICAgICB0aGlzLnNldExheW91dChEb2NrTGF5b3V0LmxvYWRMYXlvdXREYXRhKHNhdmVkTGF5b3V0LCB0aGlzLnByb3BzLCB0aGlzLl9yZWYub2Zmc2V0V2lkdGgsIHRoaXMuX3JlZi5vZmZzZXRIZWlnaHQpKTtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBzdGF0aWMgbG9hZExheW91dERhdGEoc2F2ZWRMYXlvdXQsIHByb3BzLCB3aWR0aCA9IDAsIGhlaWdodCA9IDApIHtcbiAgICAgICAgbGV0IHsgZGVmYXVsdExheW91dCwgbG9hZFRhYiwgYWZ0ZXJQYW5lbExvYWRlZCwgZ3JvdXBzIH0gPSBwcm9wcztcbiAgICAgICAgbGV0IGxheW91dCA9IFNlcmlhbGl6ZXIubG9hZExheW91dERhdGEoc2F2ZWRMYXlvdXQsIGRlZmF1bHRMYXlvdXQsIGxvYWRUYWIsIGFmdGVyUGFuZWxMb2FkZWQpO1xuICAgICAgICBsYXlvdXQgPSBBbGdvcml0aG0uZml4RmxvYXRQYW5lbFBvcyhsYXlvdXQsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICBsYXlvdXQgPSBBbGdvcml0aG0uZml4TGF5b3V0RGF0YShsYXlvdXQsIGdyb3Vwcyk7XG4gICAgICAgIGxheW91dC5sb2FkZWRGcm9tID0gc2F2ZWRMYXlvdXQ7XG4gICAgICAgIHJldHVybiBsYXlvdXQ7XG4gICAgfVxuICAgIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMocHJvcHMsIHN0YXRlKSB7XG4gICAgICAgIGxldCB7IGxheW91dDogbGF5b3V0VG9Mb2FkIH0gPSBwcm9wcztcbiAgICAgICAgbGV0IHsgbGF5b3V0OiBjdXJyZW50TGF5b3V0IH0gPSBzdGF0ZTtcbiAgICAgICAgaWYgKGxheW91dFRvTG9hZCAmJiBsYXlvdXRUb0xvYWQgIT09IGN1cnJlbnRMYXlvdXQubG9hZGVkRnJvbSkge1xuICAgICAgICAgICAgLy8gYXV0byByZWxvYWQgb24gbGF5b3V0IHByb3AgY2hhbmdlXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGxheW91dDogRG9ja0xheW91dC5sb2FkTGF5b3V0RGF0YShsYXlvdXRUb0xvYWQsIHByb3BzKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuIiwidmFyIF9fcmVzdCA9ICh0aGlzICYmIHRoaXMuX19yZXN0KSB8fCBmdW5jdGlvbiAocywgZSkge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXG4gICAgICAgIHRbcF0gPSBzW3BdO1xuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xuICAgICAgICB9XG4gICAgcmV0dXJuIHQ7XG59O1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgRG9ja0NvbnRleHRUeXBlIH0gZnJvbSBcIi4vRG9ja0RhdGFcIjtcbmltcG9ydCB7IERpdmlkZXIgfSBmcm9tIFwiLi9EaXZpZGVyXCI7XG5leHBvcnQgY2xhc3MgRGl2aWRlckJveCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmdldFJlZiA9IChyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9yZWYgPSByO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldERpdmlkZXJEYXRhID0gKGlkeCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3JlZikge1xuICAgICAgICAgICAgICAgIGxldCB7IGNoaWxkcmVuLCBtb2RlIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICAgICAgICAgIGxldCBub2RlcyA9IHRoaXMuX3JlZi5jaGlsZE5vZGVzO1xuICAgICAgICAgICAgICAgIGxldCBsZW5ndGggPSAxO1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkge1xuICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBjaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub2Rlcy5sZW5ndGggPT09IGxlbmd0aCAqIDIgLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkaXZpZGVyQ2hpbGRyZW4gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXZpZGVyQ2hpbGRyZW4ucHVzaCh7IHNpemU6IG5vZGVzW2kgKiAyXS5vZmZzZXRIZWlnaHQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXZpZGVyQ2hpbGRyZW4ucHVzaCh7IHNpemU6IG5vZGVzW2kgKiAyXS5vZmZzZXRXaWR0aCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogdGhpcy5fcmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmVmb3JlRGl2aWRlcjogZGl2aWRlckNoaWxkcmVuLnNsaWNlKDAsIGlkeCksXG4gICAgICAgICAgICAgICAgICAgICAgICBhZnRlckRpdmlkZXI6IGRpdmlkZXJDaGlsZHJlbi5zbGljZShpZHgpXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2hhbmdlU2l6ZXMgPSAoc2l6ZXMpID0+IHtcbiAgICAgICAgICAgIGxldCB7IG1vZGUgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICBsZXQgbm9kZXMgPSB0aGlzLl9yZWYuY2hpbGROb2RlcztcbiAgICAgICAgICAgIGlmIChub2Rlcy5sZW5ndGggPT09IHNpemVzLmxlbmd0aCAqIDIgLSAxKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXNbaSAqIDJdLnN0eWxlLmhlaWdodCA9IGAke3NpemVzW2ldfXB4YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzW2kgKiAyXS5zdHlsZS53aWR0aCA9IGAke3NpemVzW2ldfXB4YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IF9hID0gdGhpcy5wcm9wcywgeyBjaGlsZHJlbiwgbW9kZSwgY2xhc3NOYW1lIH0gPSBfYSwgb3RoZXJzID0gX19yZXN0KF9hLCBbXCJjaGlsZHJlblwiLCBcIm1vZGVcIiwgXCJjbGFzc05hbWVcIl0pO1xuICAgICAgICBsZXQgaXNWZXJ0aWNhbCA9IG1vZGUgPT09ICd2ZXJ0aWNhbCc7XG4gICAgICAgIGxldCBjaGlsZHJlblJlbmRlciA9IFtdO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSgoY2hpbGRyZW4pKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlblJlbmRlci5wdXNoKFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGl2aWRlciwgeyBpZHg6IGksIGtleTogaSwgaXNWZXJ0aWNhbDogaXNWZXJ0aWNhbCwgZ2V0RGl2aWRlckRhdGE6IHRoaXMuZ2V0RGl2aWRlckRhdGEsIGNoYW5nZVNpemVzOiB0aGlzLmNoYW5nZVNpemVzIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2hpbGRyZW5SZW5kZXIucHVzaChjaGlsZHJlbltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjaGlsZHJlblJlbmRlciA9IGNoaWxkcmVuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjbHM7XG4gICAgICAgIGlmIChtb2RlID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgICBjbHMgPSAnZGl2aWRlci1ib3ggZG9jay12Ym94JztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNscyA9ICdkaXZpZGVyLWJveCBkb2NrLWhib3gnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIGNscyA9IGAke2Nsc30gJHtjbGFzc05hbWV9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7IHJlZjogdGhpcy5nZXRSZWYsIGNsYXNzTmFtZTogY2xzIH0sIG90aGVycyksIGNoaWxkcmVuUmVuZGVyKSk7XG4gICAgfVxufVxuRGl2aWRlckJveC5jb250ZXh0VHlwZSA9IERvY2tDb250ZXh0VHlwZTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gZmluZFRhYmJhYmxlRGVzY2VuZGFudHM7XG4vKiFcbiAqIEFkYXB0ZWQgZnJvbSBqUXVlcnkgVUkgY29yZVxuICpcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cbiAqXG4gKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vY2F0ZWdvcnkvdWktY29yZS9cbiAqL1xuXG52YXIgdGFiYmFibGVOb2RlID0gL2lucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0LztcblxuZnVuY3Rpb24gaGlkZXNDb250ZW50cyhlbGVtZW50KSB7XG4gIHZhciB6ZXJvU2l6ZSA9IGVsZW1lbnQub2Zmc2V0V2lkdGggPD0gMCAmJiBlbGVtZW50Lm9mZnNldEhlaWdodCA8PSAwO1xuXG4gIC8vIElmIHRoZSBub2RlIGlzIGVtcHR5LCB0aGlzIGlzIGdvb2QgZW5vdWdoXG4gIGlmICh6ZXJvU2l6ZSAmJiAhZWxlbWVudC5pbm5lckhUTUwpIHJldHVybiB0cnVlO1xuXG4gIHRyeSB7XG4gICAgLy8gT3RoZXJ3aXNlIHdlIG5lZWQgdG8gY2hlY2sgc29tZSBzdHlsZXNcbiAgICB2YXIgc3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICByZXR1cm4gemVyb1NpemUgPyBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwib3ZlcmZsb3dcIikgIT09IFwidmlzaWJsZVwiIHx8XG4gICAgLy8gaWYgJ292ZXJmbG93OiB2aXNpYmxlJyBzZXQsIGNoZWNrIGlmIHRoZXJlIGlzIGFjdHVhbGx5IGFueSBvdmVyZmxvd1xuICAgIGVsZW1lbnQuc2Nyb2xsV2lkdGggPD0gMCAmJiBlbGVtZW50LnNjcm9sbEhlaWdodCA8PSAwIDogc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShcImRpc3BsYXlcIikgPT0gXCJub25lXCI7XG4gIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGluc3BlY3QgZWxlbWVudCBzdHlsZVwiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gdmlzaWJsZShlbGVtZW50KSB7XG4gIHZhciBwYXJlbnRFbGVtZW50ID0gZWxlbWVudDtcbiAgd2hpbGUgKHBhcmVudEVsZW1lbnQpIHtcbiAgICBpZiAocGFyZW50RWxlbWVudCA9PT0gZG9jdW1lbnQuYm9keSkgYnJlYWs7XG4gICAgaWYgKGhpZGVzQ29udGVudHMocGFyZW50RWxlbWVudCkpIHJldHVybiBmYWxzZTtcbiAgICBwYXJlbnRFbGVtZW50ID0gcGFyZW50RWxlbWVudC5wYXJlbnROb2RlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBmb2N1c2FibGUoZWxlbWVudCwgaXNUYWJJbmRleE5vdE5hTikge1xuICB2YXIgbm9kZU5hbWUgPSBlbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIHZhciByZXMgPSB0YWJiYWJsZU5vZGUudGVzdChub2RlTmFtZSkgJiYgIWVsZW1lbnQuZGlzYWJsZWQgfHwgKG5vZGVOYW1lID09PSBcImFcIiA/IGVsZW1lbnQuaHJlZiB8fCBpc1RhYkluZGV4Tm90TmFOIDogaXNUYWJJbmRleE5vdE5hTik7XG4gIHJldHVybiByZXMgJiYgdmlzaWJsZShlbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gdGFiYmFibGUoZWxlbWVudCkge1xuICB2YXIgdGFiSW5kZXggPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcInRhYmluZGV4XCIpO1xuICBpZiAodGFiSW5kZXggPT09IG51bGwpIHRhYkluZGV4ID0gdW5kZWZpbmVkO1xuICB2YXIgaXNUYWJJbmRleE5hTiA9IGlzTmFOKHRhYkluZGV4KTtcbiAgcmV0dXJuIChpc1RhYkluZGV4TmFOIHx8IHRhYkluZGV4ID49IDApICYmIGZvY3VzYWJsZShlbGVtZW50LCAhaXNUYWJJbmRleE5hTik7XG59XG5cbmZ1bmN0aW9uIGZpbmRUYWJiYWJsZURlc2NlbmRhbnRzKGVsZW1lbnQpIHtcbiAgcmV0dXJuIFtdLnNsaWNlLmNhbGwoZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiKlwiKSwgMCkuZmlsdGVyKHRhYmJhYmxlKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLnJlc2V0U3RhdGUgPSByZXNldFN0YXRlO1xuZXhwb3J0cy5sb2cgPSBsb2c7XG5leHBvcnRzLmhhbmRsZUJsdXIgPSBoYW5kbGVCbHVyO1xuZXhwb3J0cy5oYW5kbGVGb2N1cyA9IGhhbmRsZUZvY3VzO1xuZXhwb3J0cy5tYXJrRm9yRm9jdXNMYXRlciA9IG1hcmtGb3JGb2N1c0xhdGVyO1xuZXhwb3J0cy5yZXR1cm5Gb2N1cyA9IHJldHVybkZvY3VzO1xuZXhwb3J0cy5wb3BXaXRob3V0Rm9jdXMgPSBwb3BXaXRob3V0Rm9jdXM7XG5leHBvcnRzLnNldHVwU2NvcGVkRm9jdXMgPSBzZXR1cFNjb3BlZEZvY3VzO1xuZXhwb3J0cy50ZWFyZG93blNjb3BlZEZvY3VzID0gdGVhcmRvd25TY29wZWRGb2N1cztcblxudmFyIF90YWJiYWJsZSA9IHJlcXVpcmUoXCIuLi9oZWxwZXJzL3RhYmJhYmxlXCIpO1xuXG52YXIgX3RhYmJhYmxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RhYmJhYmxlKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGZvY3VzTGF0ZXJFbGVtZW50cyA9IFtdO1xudmFyIG1vZGFsRWxlbWVudCA9IG51bGw7XG52YXIgbmVlZFRvRm9jdXMgPSBmYWxzZTtcblxuLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIHJlc2V0U3RhdGUoKSB7XG4gIGZvY3VzTGF0ZXJFbGVtZW50cyA9IFtdO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gbG9nKCkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiKSByZXR1cm47XG4gIGNvbnNvbGUubG9nKFwiZm9jdXNNYW5hZ2VyIC0tLS0tLS0tLS1cIik7XG4gIGZvY3VzTGF0ZXJFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChmKSB7XG4gICAgdmFyIGNoZWNrID0gZiB8fCB7fTtcbiAgICBjb25zb2xlLmxvZyhjaGVjay5ub2RlTmFtZSwgY2hlY2suY2xhc3NOYW1lLCBjaGVjay5pZCk7XG4gIH0pO1xuICBjb25zb2xlLmxvZyhcImVuZCBmb2N1c01hbmFnZXIgLS0tLS0tLS0tLVwiKTtcbn1cbi8qIGVzbGludC1lbmFibGUgbm8tY29uc29sZSAqL1xuXG5mdW5jdGlvbiBoYW5kbGVCbHVyKCkge1xuICBuZWVkVG9Gb2N1cyA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUZvY3VzKCkge1xuICBpZiAobmVlZFRvRm9jdXMpIHtcbiAgICBuZWVkVG9Gb2N1cyA9IGZhbHNlO1xuICAgIGlmICghbW9kYWxFbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIG5lZWQgdG8gc2VlIGhvdyBqUXVlcnkgc2hpbXMgZG9jdW1lbnQub24oJ2ZvY3VzaW4nKSBzbyB3ZSBkb24ndCBuZWVkIHRoZVxuICAgIC8vIHNldFRpbWVvdXQsIGZpcmVmb3ggZG9lc24ndCBzdXBwb3J0IGZvY3VzaW4sIGlmIGl0IGRpZCwgd2UgY291bGQgZm9jdXNcbiAgICAvLyB0aGUgZWxlbWVudCBvdXRzaWRlIG9mIGEgc2V0VGltZW91dC4gU2lkZS1lZmZlY3Qgb2YgdGhpcyBpbXBsZW1lbnRhdGlvblxuICAgIC8vIGlzIHRoYXQgdGhlIGRvY3VtZW50LmJvZHkgZ2V0cyBmb2N1cywgYW5kIHRoZW4gd2UgZm9jdXMgb3VyIGVsZW1lbnQgcmlnaHRcbiAgICAvLyBhZnRlciwgc2VlbXMgZmluZS5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChtb2RhbEVsZW1lbnQuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIGVsID0gKDAsIF90YWJiYWJsZTIuZGVmYXVsdCkobW9kYWxFbGVtZW50KVswXSB8fCBtb2RhbEVsZW1lbnQ7XG4gICAgICBlbC5mb2N1cygpO1xuICAgIH0sIDApO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1hcmtGb3JGb2N1c0xhdGVyKCkge1xuICBmb2N1c0xhdGVyRWxlbWVudHMucHVzaChkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcbn1cblxuLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xuZnVuY3Rpb24gcmV0dXJuRm9jdXMoKSB7XG4gIHZhciBwcmV2ZW50U2Nyb2xsID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTtcblxuICB2YXIgdG9Gb2N1cyA9IG51bGw7XG4gIHRyeSB7XG4gICAgaWYgKGZvY3VzTGF0ZXJFbGVtZW50cy5sZW5ndGggIT09IDApIHtcbiAgICAgIHRvRm9jdXMgPSBmb2N1c0xhdGVyRWxlbWVudHMucG9wKCk7XG4gICAgICB0b0ZvY3VzLmZvY3VzKHsgcHJldmVudFNjcm9sbDogcHJldmVudFNjcm9sbCB9KTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS53YXJuKFtcIllvdSB0cmllZCB0byByZXR1cm4gZm9jdXMgdG9cIiwgdG9Gb2N1cywgXCJidXQgaXQgaXMgbm90IGluIHRoZSBET00gYW55bW9yZVwiXS5qb2luKFwiIFwiKSk7XG4gIH1cbn1cbi8qIGVzbGludC1lbmFibGUgbm8tY29uc29sZSAqL1xuXG5mdW5jdGlvbiBwb3BXaXRob3V0Rm9jdXMoKSB7XG4gIGZvY3VzTGF0ZXJFbGVtZW50cy5sZW5ndGggPiAwICYmIGZvY3VzTGF0ZXJFbGVtZW50cy5wb3AoKTtcbn1cblxuZnVuY3Rpb24gc2V0dXBTY29wZWRGb2N1cyhlbGVtZW50KSB7XG4gIG1vZGFsRWxlbWVudCA9IGVsZW1lbnQ7XG5cbiAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGhhbmRsZUJsdXIsIGZhbHNlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgaGFuZGxlRm9jdXMsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5hdHRhY2hFdmVudChcIm9uQmx1clwiLCBoYW5kbGVCbHVyKTtcbiAgICBkb2N1bWVudC5hdHRhY2hFdmVudChcIm9uRm9jdXNcIiwgaGFuZGxlRm9jdXMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRlYXJkb3duU2NvcGVkRm9jdXMoKSB7XG4gIG1vZGFsRWxlbWVudCA9IG51bGw7XG5cbiAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGhhbmRsZUJsdXIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBoYW5kbGVGb2N1cyk7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93LmRldGFjaEV2ZW50KFwib25CbHVyXCIsIGhhbmRsZUJsdXIpO1xuICAgIGRvY3VtZW50LmRldGFjaEV2ZW50KFwib25Gb2N1c1wiLCBoYW5kbGVGb2N1cyk7XG4gIH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHNjb3BlVGFiO1xuXG52YXIgX3RhYmJhYmxlID0gcmVxdWlyZShcIi4vdGFiYmFibGVcIik7XG5cbnZhciBfdGFiYmFibGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGFiYmFibGUpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBzY29wZVRhYihub2RlLCBldmVudCkge1xuICB2YXIgdGFiYmFibGUgPSAoMCwgX3RhYmJhYmxlMi5kZWZhdWx0KShub2RlKTtcblxuICBpZiAoIXRhYmJhYmxlLmxlbmd0aCkge1xuICAgIC8vIERvIG5vdGhpbmcsIHNpbmNlIHRoZXJlIGFyZSBubyBlbGVtZW50cyB0aGF0IGNhbiByZWNlaXZlIGZvY3VzLlxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHRhcmdldCA9IHZvaWQgMDtcblxuICB2YXIgc2hpZnRLZXkgPSBldmVudC5zaGlmdEtleTtcbiAgdmFyIGhlYWQgPSB0YWJiYWJsZVswXTtcbiAgdmFyIHRhaWwgPSB0YWJiYWJsZVt0YWJiYWJsZS5sZW5ndGggLSAxXTtcblxuICAvLyBwcm9jZWVkIHdpdGggZGVmYXVsdCBicm93c2VyIGJlaGF2aW9yIG9uIHRhYi5cbiAgLy8gRm9jdXMgb24gbGFzdCBlbGVtZW50IG9uIHNoaWZ0ICsgdGFiLlxuICBpZiAobm9kZSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkge1xuICAgIGlmICghc2hpZnRLZXkpIHJldHVybjtcbiAgICB0YXJnZXQgPSB0YWlsO1xuICB9XG5cbiAgaWYgKHRhaWwgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgIXNoaWZ0S2V5KSB7XG4gICAgdGFyZ2V0ID0gaGVhZDtcbiAgfVxuXG4gIGlmIChoZWFkID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmIHNoaWZ0S2V5KSB7XG4gICAgdGFyZ2V0ID0gdGFpbDtcbiAgfVxuXG4gIGlmICh0YXJnZXQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRhcmdldC5mb2N1cygpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIFNhZmFyaSByYWRpbyBpc3N1ZS5cbiAgLy9cbiAgLy8gU2FmYXJpIGRvZXMgbm90IG1vdmUgdGhlIGZvY3VzIHRvIHRoZSByYWRpbyBidXR0b24sXG4gIC8vIHNvIHdlIG5lZWQgdG8gZm9yY2UgaXQgdG8gcmVhbGx5IHdhbGsgdGhyb3VnaCBhbGwgZWxlbWVudHMuXG4gIC8vXG4gIC8vIFRoaXMgaXMgdmVyeSBlcnJvciBwcm9uZSwgc2luY2Ugd2UgYXJlIHRyeWluZyB0byBndWVzc1xuICAvLyBpZiBpdCBpcyBhIHNhZmFyaSBicm93c2VyIGZyb20gdGhlIGZpcnN0IG9jY3VyZW5jZSBiZXR3ZWVuXG4gIC8vIGNocm9tZSBvciBzYWZhcmkuXG4gIC8vXG4gIC8vIFRoZSBjaHJvbWUgdXNlciBhZ2VudCBjb250YWlucyB0aGUgZmlyc3Qgb2N1cnJlbmNlXG4gIC8vIGFzIHRoZSAnY2hyb21lL3ZlcnNpb24nIGFuZCBsYXRlciB0aGUgJ3NhZmFyaS92ZXJzaW9uJy5cbiAgdmFyIGNoZWNrU2FmYXJpID0gLyhcXGJDaHJvbWVcXGJ8XFxiU2FmYXJpXFxiKVxcLy8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgdmFyIGlzU2FmYXJpRGVza3RvcCA9IGNoZWNrU2FmYXJpICE9IG51bGwgJiYgY2hlY2tTYWZhcmlbMV0gIT0gXCJDaHJvbWVcIiAmJiAvXFxiaVBvZFxcYnxcXGJpUGFkXFxiL2cuZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KSA9PSBudWxsO1xuXG4gIC8vIElmIHdlIGFyZSBub3QgaW4gc2FmYXJpIGRlc2t0b3AsIGxldCB0aGUgYnJvd3NlciBjb250cm9sXG4gIC8vIHRoZSBmb2N1c1xuICBpZiAoIWlzU2FmYXJpRGVza3RvcCkgcmV0dXJuO1xuXG4gIHZhciB4ID0gdGFiYmFibGUuaW5kZXhPZihkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcblxuICBpZiAoeCA+IC0xKSB7XG4gICAgeCArPSBzaGlmdEtleSA/IC0xIDogMTtcbiAgfVxuXG4gIHRhcmdldCA9IHRhYmJhYmxlW3hdO1xuXG4gIC8vIElmIHRoZSB0YWJiYWJsZSBlbGVtZW50IGRvZXMgbm90IGV4aXN0LFxuICAvLyBmb2N1cyBoZWFkL3RhaWwgYmFzZWQgb24gc2hpZnRLZXlcbiAgaWYgKHR5cGVvZiB0YXJnZXQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRhcmdldCA9IHNoaWZ0S2V5ID8gdGFpbCA6IGhlYWQ7XG4gICAgdGFyZ2V0LmZvY3VzKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICB0YXJnZXQuZm9jdXMoKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1tcImRlZmF1bHRcIl07IiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogU2ltaWxhciB0byBpbnZhcmlhbnQgYnV0IG9ubHkgbG9ncyBhIHdhcm5pbmcgaWYgdGhlIGNvbmRpdGlvbiBpcyBub3QgbWV0LlxuICogVGhpcyBjYW4gYmUgdXNlZCB0byBsb2cgaXNzdWVzIGluIGRldmVsb3BtZW50IGVudmlyb25tZW50cyBpbiBjcml0aWNhbFxuICogcGF0aHMuIFJlbW92aW5nIHRoZSBsb2dnaW5nIGNvZGUgZm9yIHByb2R1Y3Rpb24gZW52aXJvbm1lbnRzIHdpbGwga2VlcCB0aGVcbiAqIHNhbWUgbG9naWMgYW5kIGZvbGxvdyB0aGUgc2FtZSBjb2RlIHBhdGhzLlxuICovXG5cbnZhciBfX0RFVl9fID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJztcblxudmFyIHdhcm5pbmcgPSBmdW5jdGlvbigpIHt9O1xuXG5pZiAoX19ERVZfXykge1xuICB2YXIgcHJpbnRXYXJuaW5nID0gZnVuY3Rpb24gcHJpbnRXYXJuaW5nKGZvcm1hdCwgYXJncykge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGFyZ3MgPSBuZXcgQXJyYXkobGVuID4gMSA/IGxlbiAtIDEgOiAwKTtcbiAgICBmb3IgKHZhciBrZXkgPSAxOyBrZXkgPCBsZW47IGtleSsrKSB7XG4gICAgICBhcmdzW2tleSAtIDFdID0gYXJndW1lbnRzW2tleV07XG4gICAgfVxuICAgIHZhciBhcmdJbmRleCA9IDA7XG4gICAgdmFyIG1lc3NhZ2UgPSAnV2FybmluZzogJyArXG4gICAgICBmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBhcmdzW2FyZ0luZGV4KytdO1xuICAgICAgfSk7XG4gICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIC8vIC0tLSBXZWxjb21lIHRvIGRlYnVnZ2luZyBSZWFjdCAtLS1cbiAgICAgIC8vIFRoaXMgZXJyb3Igd2FzIHRocm93biBhcyBhIGNvbnZlbmllbmNlIHNvIHRoYXQgeW91IGNhbiB1c2UgdGhpcyBzdGFja1xuICAgICAgLy8gdG8gZmluZCB0aGUgY2FsbHNpdGUgdGhhdCBjYXVzZWQgdGhpcyB3YXJuaW5nIHRvIGZpcmUuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfSBjYXRjaCAoeCkge31cbiAgfVxuXG4gIHdhcm5pbmcgPSBmdW5jdGlvbihjb25kaXRpb24sIGZvcm1hdCwgYXJncykge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGFyZ3MgPSBuZXcgQXJyYXkobGVuID4gMiA/IGxlbiAtIDIgOiAwKTtcbiAgICBmb3IgKHZhciBrZXkgPSAyOyBrZXkgPCBsZW47IGtleSsrKSB7XG4gICAgICBhcmdzW2tleSAtIDJdID0gYXJndW1lbnRzW2tleV07XG4gICAgfVxuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICdgd2FybmluZyhjb25kaXRpb24sIGZvcm1hdCwgLi4uYXJncylgIHJlcXVpcmVzIGEgd2FybmluZyAnICtcbiAgICAgICAgICAnbWVzc2FnZSBhcmd1bWVudCdcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICghY29uZGl0aW9uKSB7XG4gICAgICBwcmludFdhcm5pbmcuYXBwbHkobnVsbCwgW2Zvcm1hdF0uY29uY2F0KGFyZ3MpKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gd2FybmluZztcbiIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTUgSmVkIFdhdHNvbi5cbiAgQmFzZWQgb24gY29kZSB0aGF0IGlzIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4qL1xuLyogZ2xvYmFsIGRlZmluZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGNhblVzZURPTSA9ICEhKFxuXHRcdHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG5cdFx0d2luZG93LmRvY3VtZW50ICYmXG5cdFx0d2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnRcblx0KTtcblxuXHR2YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSB7XG5cblx0XHRjYW5Vc2VET006IGNhblVzZURPTSxcblxuXHRcdGNhblVzZVdvcmtlcnM6IHR5cGVvZiBXb3JrZXIgIT09ICd1bmRlZmluZWQnLFxuXG5cdFx0Y2FuVXNlRXZlbnRMaXN0ZW5lcnM6XG5cdFx0XHRjYW5Vc2VET00gJiYgISEod2luZG93LmFkZEV2ZW50TGlzdGVuZXIgfHwgd2luZG93LmF0dGFjaEV2ZW50KSxcblxuXHRcdGNhblVzZVZpZXdwb3J0OiBjYW5Vc2VET00gJiYgISF3aW5kb3cuc2NyZWVuXG5cblx0fTtcblxuXHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuXHRcdGRlZmluZShmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gRXhlY3V0aW9uRW52aXJvbm1lbnQ7XG5cdFx0fSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IEV4ZWN1dGlvbkVudmlyb25tZW50O1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5FeGVjdXRpb25FbnZpcm9ubWVudCA9IEV4ZWN1dGlvbkVudmlyb25tZW50O1xuXHR9XG5cbn0oKSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuY2FuVXNlRE9NID0gZXhwb3J0cy5TYWZlTm9kZUxpc3QgPSBleHBvcnRzLlNhZmVIVE1MQ29sbGVjdGlvbiA9IHVuZGVmaW5lZDtcblxudmFyIF9leGVudiA9IHJlcXVpcmUoXCJleGVudlwiKTtcblxudmFyIF9leGVudjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVudik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBFRSA9IF9leGVudjIuZGVmYXVsdDtcblxudmFyIFNhZmVIVE1MRWxlbWVudCA9IEVFLmNhblVzZURPTSA/IHdpbmRvdy5IVE1MRWxlbWVudCA6IHt9O1xuXG52YXIgU2FmZUhUTUxDb2xsZWN0aW9uID0gZXhwb3J0cy5TYWZlSFRNTENvbGxlY3Rpb24gPSBFRS5jYW5Vc2VET00gPyB3aW5kb3cuSFRNTENvbGxlY3Rpb24gOiB7fTtcblxudmFyIFNhZmVOb2RlTGlzdCA9IGV4cG9ydHMuU2FmZU5vZGVMaXN0ID0gRUUuY2FuVXNlRE9NID8gd2luZG93Lk5vZGVMaXN0IDoge307XG5cbnZhciBjYW5Vc2VET00gPSBleHBvcnRzLmNhblVzZURPTSA9IEVFLmNhblVzZURPTTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gU2FmZUhUTUxFbGVtZW50OyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5yZXNldFN0YXRlID0gcmVzZXRTdGF0ZTtcbmV4cG9ydHMubG9nID0gbG9nO1xuZXhwb3J0cy5hc3NlcnROb2RlTGlzdCA9IGFzc2VydE5vZGVMaXN0O1xuZXhwb3J0cy5zZXRFbGVtZW50ID0gc2V0RWxlbWVudDtcbmV4cG9ydHMudmFsaWRhdGVFbGVtZW50ID0gdmFsaWRhdGVFbGVtZW50O1xuZXhwb3J0cy5oaWRlID0gaGlkZTtcbmV4cG9ydHMuc2hvdyA9IHNob3c7XG5leHBvcnRzLmRvY3VtZW50Tm90UmVhZHlPclNTUlRlc3RpbmcgPSBkb2N1bWVudE5vdFJlYWR5T3JTU1JUZXN0aW5nO1xuXG52YXIgX3dhcm5pbmcgPSByZXF1aXJlKFwid2FybmluZ1wiKTtcblxudmFyIF93YXJuaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dhcm5pbmcpO1xuXG52YXIgX3NhZmVIVE1MRWxlbWVudCA9IHJlcXVpcmUoXCIuL3NhZmVIVE1MRWxlbWVudFwiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGdsb2JhbEVsZW1lbnQgPSBudWxsO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gcmVzZXRTdGF0ZSgpIHtcbiAgaWYgKGdsb2JhbEVsZW1lbnQpIHtcbiAgICBpZiAoZ2xvYmFsRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUpIHtcbiAgICAgIGdsb2JhbEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIik7XG4gICAgfSBlbHNlIGlmIChnbG9iYWxFbGVtZW50Lmxlbmd0aCAhPSBudWxsKSB7XG4gICAgICBnbG9iYWxFbGVtZW50LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIik7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChnbG9iYWxFbGVtZW50KS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIGdsb2JhbEVsZW1lbnQgPSBudWxsO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gbG9nKCkge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiKSByZXR1cm47XG4gIHZhciBjaGVjayA9IGdsb2JhbEVsZW1lbnQgfHwge307XG4gIGNvbnNvbGUubG9nKFwiYXJpYUFwcEhpZGVyIC0tLS0tLS0tLS1cIik7XG4gIGNvbnNvbGUubG9nKGNoZWNrLm5vZGVOYW1lLCBjaGVjay5jbGFzc05hbWUsIGNoZWNrLmlkKTtcbiAgY29uc29sZS5sb2coXCJlbmQgYXJpYUFwcEhpZGVyIC0tLS0tLS0tLS1cIik7XG59XG4vKiBlc2xpbnQtZW5hYmxlIG5vLWNvbnNvbGUgKi9cblxuZnVuY3Rpb24gYXNzZXJ0Tm9kZUxpc3Qobm9kZUxpc3QsIHNlbGVjdG9yKSB7XG4gIGlmICghbm9kZUxpc3QgfHwgIW5vZGVMaXN0Lmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcInJlYWN0LW1vZGFsOiBObyBlbGVtZW50cyB3ZXJlIGZvdW5kIGZvciBzZWxlY3RvciBcIiArIHNlbGVjdG9yICsgXCIuXCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNldEVsZW1lbnQoZWxlbWVudCkge1xuICB2YXIgdXNlRWxlbWVudCA9IGVsZW1lbnQ7XG4gIGlmICh0eXBlb2YgdXNlRWxlbWVudCA9PT0gXCJzdHJpbmdcIiAmJiBfc2FmZUhUTUxFbGVtZW50LmNhblVzZURPTSkge1xuICAgIHZhciBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodXNlRWxlbWVudCk7XG4gICAgYXNzZXJ0Tm9kZUxpc3QoZWwsIHVzZUVsZW1lbnQpO1xuICAgIHVzZUVsZW1lbnQgPSBlbDtcbiAgfVxuICBnbG9iYWxFbGVtZW50ID0gdXNlRWxlbWVudCB8fCBnbG9iYWxFbGVtZW50O1xuICByZXR1cm4gZ2xvYmFsRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVFbGVtZW50KGFwcEVsZW1lbnQpIHtcbiAgdmFyIGVsID0gYXBwRWxlbWVudCB8fCBnbG9iYWxFbGVtZW50O1xuICBpZiAoZWwpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShlbCkgfHwgZWwgaW5zdGFuY2VvZiBIVE1MQ29sbGVjdGlvbiB8fCBlbCBpbnN0YW5jZW9mIE5vZGVMaXN0ID8gZWwgOiBbZWxdO1xuICB9IGVsc2Uge1xuICAgICgwLCBfd2FybmluZzIuZGVmYXVsdCkoZmFsc2UsIFtcInJlYWN0LW1vZGFsOiBBcHAgZWxlbWVudCBpcyBub3QgZGVmaW5lZC5cIiwgXCJQbGVhc2UgdXNlIGBNb2RhbC5zZXRBcHBFbGVtZW50KGVsKWAgb3Igc2V0IGBhcHBFbGVtZW50PXtlbH1gLlwiLCBcIlRoaXMgaXMgbmVlZGVkIHNvIHNjcmVlbiByZWFkZXJzIGRvbid0IHNlZSBtYWluIGNvbnRlbnRcIiwgXCJ3aGVuIG1vZGFsIGlzIG9wZW5lZC4gSXQgaXMgbm90IHJlY29tbWVuZGVkLCBidXQgeW91IGNhbiBvcHQtb3V0XCIsIFwiYnkgc2V0dGluZyBgYXJpYUhpZGVBcHA9e2ZhbHNlfWAuXCJdLmpvaW4oXCIgXCIpKTtcblxuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoaWRlKGFwcEVsZW1lbnQpIHtcbiAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlO1xuICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG4gIHRyeSB7XG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gdmFsaWRhdGVFbGVtZW50KGFwcEVsZW1lbnQpW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgdmFyIGVsID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgIGVsLnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIFwidHJ1ZVwiKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHNob3coYXBwRWxlbWVudCkge1xuICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlO1xuICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7XG4gIHZhciBfaXRlcmF0b3JFcnJvcjIgPSB1bmRlZmluZWQ7XG5cbiAgdHJ5IHtcbiAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gdmFsaWRhdGVFbGVtZW50KGFwcEVsZW1lbnQpW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7XG4gICAgICB2YXIgZWwgPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2RpZEl0ZXJhdG9yRXJyb3IyID0gdHJ1ZTtcbiAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4pIHtcbiAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xuICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjI7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGRvY3VtZW50Tm90UmVhZHlPclNTUlRlc3RpbmcoKSB7XG4gIGdsb2JhbEVsZW1lbnQgPSBudWxsO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5yZXNldFN0YXRlID0gcmVzZXRTdGF0ZTtcbmV4cG9ydHMubG9nID0gbG9nO1xudmFyIGh0bWxDbGFzc0xpc3QgPSB7fTtcbnZhciBkb2NCb2R5Q2xhc3NMaXN0ID0ge307XG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiByZW1vdmVDbGFzcyhhdCwgY2xzKSB7XG4gIGF0LmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcbn1cblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIHJlc2V0U3RhdGUoKSB7XG4gIHZhciBodG1sRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaHRtbFwiKVswXTtcbiAgZm9yICh2YXIgY2xzIGluIGh0bWxDbGFzc0xpc3QpIHtcbiAgICByZW1vdmVDbGFzcyhodG1sRWxlbWVudCwgaHRtbENsYXNzTGlzdFtjbHNdKTtcbiAgfVxuXG4gIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcbiAgZm9yICh2YXIgX2NscyBpbiBkb2NCb2R5Q2xhc3NMaXN0KSB7XG4gICAgcmVtb3ZlQ2xhc3MoYm9keSwgZG9jQm9keUNsYXNzTGlzdFtfY2xzXSk7XG4gIH1cblxuICBodG1sQ2xhc3NMaXN0ID0ge307XG4gIGRvY0JvZHlDbGFzc0xpc3QgPSB7fTtcbn1cblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIGxvZygpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIikgcmV0dXJuO1xuXG4gIHZhciBjbGFzc2VzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJodG1sXCIpWzBdLmNsYXNzTmFtZTtcbiAgdmFyIGJ1ZmZlciA9IFwiU2hvdyB0cmFja2VkIGNsYXNzZXM6XFxuXFxuXCI7XG5cbiAgYnVmZmVyICs9IFwiPGh0bWwgLz4gKFwiICsgY2xhc3NlcyArIFwiKTpcXG5cIjtcbiAgZm9yICh2YXIgeCBpbiBodG1sQ2xhc3NMaXN0KSB7XG4gICAgYnVmZmVyICs9IFwiICBcIiArIHggKyBcIiBcIiArIGh0bWxDbGFzc0xpc3RbeF0gKyBcIlxcblwiO1xuICB9XG5cbiAgY2xhc3NlcyA9IGRvY3VtZW50LmJvZHkuY2xhc3NOYW1lO1xuXG4gIGJ1ZmZlciArPSBcIlxcblxcbmRvYy5ib2R5IChcIiArIGNsYXNzZXMgKyBcIik6XFxuXCI7XG4gIGZvciAodmFyIF94IGluIGRvY0JvZHlDbGFzc0xpc3QpIHtcbiAgICBidWZmZXIgKz0gXCIgIFwiICsgX3ggKyBcIiBcIiArIGRvY0JvZHlDbGFzc0xpc3RbX3hdICsgXCJcXG5cIjtcbiAgfVxuXG4gIGJ1ZmZlciArPSBcIlxcblwiO1xuXG4gIGNvbnNvbGUubG9nKGJ1ZmZlcik7XG59XG4vKiBlc2xpbnQtZW5hYmxlIG5vLWNvbnNvbGUgKi9cblxuLyoqXG4gKiBUcmFjayB0aGUgbnVtYmVyIG9mIHJlZmVyZW5jZSBvZiBhIGNsYXNzLlxuICogQHBhcmFtIHtvYmplY3R9IHBvbGwgVGhlIHBvbGwgdG8gcmVjZWl2ZSB0aGUgcmVmZXJlbmNlLlxuICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZSBUaGUgY2xhc3MgbmFtZS5cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xudmFyIGluY3JlbWVudFJlZmVyZW5jZSA9IGZ1bmN0aW9uIGluY3JlbWVudFJlZmVyZW5jZShwb2xsLCBjbGFzc05hbWUpIHtcbiAgaWYgKCFwb2xsW2NsYXNzTmFtZV0pIHtcbiAgICBwb2xsW2NsYXNzTmFtZV0gPSAwO1xuICB9XG4gIHBvbGxbY2xhc3NOYW1lXSArPSAxO1xuICByZXR1cm4gY2xhc3NOYW1lO1xufTtcblxuLyoqXG4gKiBEcm9wIHRoZSByZWZlcmVuY2Ugb2YgYSBjbGFzcy5cbiAqIEBwYXJhbSB7b2JqZWN0fSBwb2xsIFRoZSBwb2xsIHRvIHJlY2VpdmUgdGhlIHJlZmVyZW5jZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWUgVGhlIGNsYXNzIG5hbWUuXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbnZhciBkZWNyZW1lbnRSZWZlcmVuY2UgPSBmdW5jdGlvbiBkZWNyZW1lbnRSZWZlcmVuY2UocG9sbCwgY2xhc3NOYW1lKSB7XG4gIGlmIChwb2xsW2NsYXNzTmFtZV0pIHtcbiAgICBwb2xsW2NsYXNzTmFtZV0gLT0gMTtcbiAgfVxuICByZXR1cm4gY2xhc3NOYW1lO1xufTtcblxuLyoqXG4gKiBUcmFjayBhIGNsYXNzIGFuZCBhZGQgdG8gdGhlIGdpdmVuIGNsYXNzIGxpc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gY2xhc3NMaXN0UmVmIEEgY2xhc3MgbGlzdCBvZiBhbiBlbGVtZW50LlxuICogQHBhcmFtIHtPYmplY3R9IHBvbGwgICAgICAgICBUaGUgcG9sbCB0byBiZSB1c2VkLlxuICogQHBhcmFtIHtBcnJheX0gIGNsYXNzZXMgICAgICBUaGUgbGlzdCBvZiBjbGFzc2VzIHRvIGJlIHRyYWNrZWQuXG4gKi9cbnZhciB0cmFja0NsYXNzID0gZnVuY3Rpb24gdHJhY2tDbGFzcyhjbGFzc0xpc3RSZWYsIHBvbGwsIGNsYXNzZXMpIHtcbiAgY2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgICBpbmNyZW1lbnRSZWZlcmVuY2UocG9sbCwgY2xhc3NOYW1lKTtcbiAgICBjbGFzc0xpc3RSZWYuYWRkKGNsYXNzTmFtZSk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBVbnRyYWNrIGEgY2xhc3MgYW5kIHJlbW92ZSBmcm9tIHRoZSBnaXZlbiBjbGFzcyBsaXN0IGlmIHRoZSByZWZlcmVuY2VcbiAqIHJlYWNoZXMgMC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjbGFzc0xpc3RSZWYgQSBjbGFzcyBsaXN0IG9mIGFuIGVsZW1lbnQuXG4gKiBAcGFyYW0ge09iamVjdH0gcG9sbCAgICAgICAgIFRoZSBwb2xsIHRvIGJlIHVzZWQuXG4gKiBAcGFyYW0ge0FycmF5fSAgY2xhc3NlcyAgICAgIFRoZSBsaXN0IG9mIGNsYXNzZXMgdG8gYmUgdW50cmFja2VkLlxuICovXG52YXIgdW50cmFja0NsYXNzID0gZnVuY3Rpb24gdW50cmFja0NsYXNzKGNsYXNzTGlzdFJlZiwgcG9sbCwgY2xhc3Nlcykge1xuICBjbGFzc2VzLmZvckVhY2goZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAgIGRlY3JlbWVudFJlZmVyZW5jZShwb2xsLCBjbGFzc05hbWUpO1xuICAgIHBvbGxbY2xhc3NOYW1lXSA9PT0gMCAmJiBjbGFzc0xpc3RSZWYucmVtb3ZlKGNsYXNzTmFtZSk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBQdWJsaWMgaW5mZXJmYWNlIHRvIGFkZCBjbGFzc2VzIHRvIHRoZSBkb2N1bWVudC5ib2R5LlxuICogQHBhcmFtIHtzdHJpbmd9IGJvZHlDbGFzcyBUaGUgY2xhc3Mgc3RyaW5nIHRvIGJlIGFkZGVkLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICBJdCBtYXkgY29udGFpbiBtb3JlIHRoZW4gb25lIGNsYXNzXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggJyAnIGFzIHNlcGFyYXRvci5cbiAqL1xudmFyIGFkZCA9IGV4cG9ydHMuYWRkID0gZnVuY3Rpb24gYWRkKGVsZW1lbnQsIGNsYXNzU3RyaW5nKSB7XG4gIHJldHVybiB0cmFja0NsYXNzKGVsZW1lbnQuY2xhc3NMaXN0LCBlbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT0gXCJodG1sXCIgPyBodG1sQ2xhc3NMaXN0IDogZG9jQm9keUNsYXNzTGlzdCwgY2xhc3NTdHJpbmcuc3BsaXQoXCIgXCIpKTtcbn07XG5cbi8qKlxuICogUHVibGljIGluZmVyZmFjZSB0byByZW1vdmUgY2xhc3NlcyBmcm9tIHRoZSBkb2N1bWVudC5ib2R5LlxuICogQHBhcmFtIHtzdHJpbmd9IGJvZHlDbGFzcyBUaGUgY2xhc3Mgc3RyaW5nIHRvIGJlIGFkZGVkLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICBJdCBtYXkgY29udGFpbiBtb3JlIHRoZW4gb25lIGNsYXNzXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggJyAnIGFzIHNlcGFyYXRvci5cbiAqL1xudmFyIHJlbW92ZSA9IGV4cG9ydHMucmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKGVsZW1lbnQsIGNsYXNzU3RyaW5nKSB7XG4gIHJldHVybiB1bnRyYWNrQ2xhc3MoZWxlbWVudC5jbGFzc0xpc3QsIGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PSBcImh0bWxcIiA/IGh0bWxDbGFzc0xpc3QgOiBkb2NCb2R5Q2xhc3NMaXN0LCBjbGFzc1N0cmluZy5zcGxpdChcIiBcIikpO1xufTsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMubG9nID0gbG9nO1xuZXhwb3J0cy5yZXNldFN0YXRlID0gcmVzZXRTdGF0ZTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLy8gVHJhY2tzIHBvcnRhbHMgdGhhdCBhcmUgb3BlbiBhbmQgZW1pdHMgZXZlbnRzIHRvIHN1YnNjcmliZXJzXG5cbnZhciBQb3J0YWxPcGVuSW5zdGFuY2VzID0gZnVuY3Rpb24gUG9ydGFsT3Blbkluc3RhbmNlcygpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUG9ydGFsT3Blbkluc3RhbmNlcyk7XG5cbiAgdGhpcy5yZWdpc3RlciA9IGZ1bmN0aW9uIChvcGVuSW5zdGFuY2UpIHtcbiAgICBpZiAoX3RoaXMub3Blbkluc3RhbmNlcy5pbmRleE9mKG9wZW5JbnN0YW5jZSkgIT09IC0xKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUud2FybihcIlJlYWN0LU1vZGFsOiBDYW5ub3QgcmVnaXN0ZXIgbW9kYWwgaW5zdGFuY2UgdGhhdCdzIGFscmVhZHkgb3BlblwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgX3RoaXMub3Blbkluc3RhbmNlcy5wdXNoKG9wZW5JbnN0YW5jZSk7XG4gICAgX3RoaXMuZW1pdChcInJlZ2lzdGVyXCIpO1xuICB9O1xuXG4gIHRoaXMuZGVyZWdpc3RlciA9IGZ1bmN0aW9uIChvcGVuSW5zdGFuY2UpIHtcbiAgICB2YXIgaW5kZXggPSBfdGhpcy5vcGVuSW5zdGFuY2VzLmluZGV4T2Yob3Blbkluc3RhbmNlKTtcbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUud2FybihcIlJlYWN0LU1vZGFsOiBVbmFibGUgdG8gZGVyZWdpc3RlciBcIiArIG9wZW5JbnN0YW5jZSArIFwiIGFzIFwiICsgXCJpdCB3YXMgbmV2ZXIgcmVnaXN0ZXJlZFwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgX3RoaXMub3Blbkluc3RhbmNlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIF90aGlzLmVtaXQoXCJkZXJlZ2lzdGVyXCIpO1xuICB9O1xuXG4gIHRoaXMuc3Vic2NyaWJlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgX3RoaXMuc3Vic2NyaWJlcnMucHVzaChjYWxsYmFjayk7XG4gIH07XG5cbiAgdGhpcy5lbWl0ID0gZnVuY3Rpb24gKGV2ZW50VHlwZSkge1xuICAgIF90aGlzLnN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgIHJldHVybiBzdWJzY3JpYmVyKGV2ZW50VHlwZSxcbiAgICAgIC8vIHNoYWxsb3cgY29weSB0byBhdm9pZCBhY2NpZGVudGFsIG11dGF0aW9uXG4gICAgICBfdGhpcy5vcGVuSW5zdGFuY2VzLnNsaWNlKCkpO1xuICAgIH0pO1xuICB9O1xuXG4gIHRoaXMub3Blbkluc3RhbmNlcyA9IFtdO1xuICB0aGlzLnN1YnNjcmliZXJzID0gW107XG59O1xuXG52YXIgcG9ydGFsT3Blbkluc3RhbmNlcyA9IG5ldyBQb3J0YWxPcGVuSW5zdGFuY2VzKCk7XG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBsb2coKSB7XG4gIGNvbnNvbGUubG9nKFwicG9ydGFsT3Blbkluc3RhbmNlcyAtLS0tLS0tLS0tXCIpO1xuICBjb25zb2xlLmxvZyhwb3J0YWxPcGVuSW5zdGFuY2VzLm9wZW5JbnN0YW5jZXMubGVuZ3RoKTtcbiAgcG9ydGFsT3Blbkluc3RhbmNlcy5vcGVuSW5zdGFuY2VzLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICByZXR1cm4gY29uc29sZS5sb2cocCk7XG4gIH0pO1xuICBjb25zb2xlLmxvZyhcImVuZCBwb3J0YWxPcGVuSW5zdGFuY2VzIC0tLS0tLS0tLS1cIik7XG59XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiByZXNldFN0YXRlKCkge1xuICBwb3J0YWxPcGVuSW5zdGFuY2VzID0gbmV3IFBvcnRhbE9wZW5JbnN0YW5jZXMoKTtcbn1cbi8qIGVzbGludC1lbmFibGUgbm8tY29uc29sZSAqL1xuXG5leHBvcnRzLmRlZmF1bHQgPSBwb3J0YWxPcGVuSW5zdGFuY2VzOyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5yZXNldFN0YXRlID0gcmVzZXRTdGF0ZTtcbmV4cG9ydHMubG9nID0gbG9nO1xuXG52YXIgX3BvcnRhbE9wZW5JbnN0YW5jZXMgPSByZXF1aXJlKFwiLi9wb3J0YWxPcGVuSW5zdGFuY2VzXCIpO1xuXG52YXIgX3BvcnRhbE9wZW5JbnN0YW5jZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9ydGFsT3Blbkluc3RhbmNlcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8vIEJvZHkgZm9jdXMgdHJhcCBzZWUgSXNzdWUgIzc0MlxuXG52YXIgYmVmb3JlID0gdm9pZCAwLFxuICAgIGFmdGVyID0gdm9pZCAwLFxuICAgIGluc3RhbmNlcyA9IFtdO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gcmVzZXRTdGF0ZSgpIHtcbiAgdmFyIF9hcnIgPSBbYmVmb3JlLCBhZnRlcl07XG5cbiAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IF9hcnIubGVuZ3RoOyBfaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBfYXJyW19pXTtcbiAgICBpZiAoIWl0ZW0pIGNvbnRpbnVlO1xuICAgIGl0ZW0ucGFyZW50Tm9kZSAmJiBpdGVtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaXRlbSk7XG4gIH1cbiAgYmVmb3JlID0gYWZ0ZXIgPSBudWxsO1xuICBpbnN0YW5jZXMgPSBbXTtcbn1cblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIGxvZygpIHtcbiAgY29uc29sZS5sb2coXCJib2R5VHJhcCAtLS0tLS0tLS0tXCIpO1xuICBjb25zb2xlLmxvZyhpbnN0YW5jZXMubGVuZ3RoKTtcbiAgdmFyIF9hcnIyID0gW2JlZm9yZSwgYWZ0ZXJdO1xuICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCBfYXJyMi5sZW5ndGg7IF9pMisrKSB7XG4gICAgdmFyIGl0ZW0gPSBfYXJyMltfaTJdO1xuICAgIHZhciBjaGVjayA9IGl0ZW0gfHwge307XG4gICAgY29uc29sZS5sb2coY2hlY2subm9kZU5hbWUsIGNoZWNrLmNsYXNzTmFtZSwgY2hlY2suaWQpO1xuICB9XG4gIGNvbnNvbGUubG9nKFwiZWRuIGJvZHlUcmFwIC0tLS0tLS0tLS1cIik7XG59XG4vKiBlc2xpbnQtZW5hYmxlIG5vLWNvbnNvbGUgKi9cblxuZnVuY3Rpb24gZm9jdXNDb250ZW50KCkge1xuICBpZiAoaW5zdGFuY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4oXCJSZWFjdC1Nb2RhbDogT3BlbiBpbnN0YW5jZXMgPiAwIGV4cGVjdGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgaW5zdGFuY2VzW2luc3RhbmNlcy5sZW5ndGggLSAxXS5mb2N1c0NvbnRlbnQoKTtcbn1cblxuZnVuY3Rpb24gYm9keVRyYXAoZXZlbnRUeXBlLCBvcGVuSW5zdGFuY2VzKSB7XG4gIGlmICghYmVmb3JlICYmICFhZnRlcikge1xuICAgIGJlZm9yZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgYmVmb3JlLnNldEF0dHJpYnV0ZShcImRhdGEtcmVhY3QtbW9kYWwtYm9keS10cmFwXCIsIFwiXCIpO1xuICAgIGJlZm9yZS5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICBiZWZvcmUuc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuICAgIGJlZm9yZS5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLCBcIjBcIik7XG4gICAgYmVmb3JlLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBmb2N1c0NvbnRlbnQpO1xuICAgIGFmdGVyID0gYmVmb3JlLmNsb25lTm9kZSgpO1xuICAgIGFmdGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBmb2N1c0NvbnRlbnQpO1xuICB9XG5cbiAgaW5zdGFuY2VzID0gb3Blbkluc3RhbmNlcztcblxuICBpZiAoaW5zdGFuY2VzLmxlbmd0aCA+IDApIHtcbiAgICAvLyBBZGQgZm9jdXMgdHJhcFxuICAgIGlmIChkb2N1bWVudC5ib2R5LmZpcnN0Q2hpbGQgIT09IGJlZm9yZSkge1xuICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUoYmVmb3JlLCBkb2N1bWVudC5ib2R5LmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgICBpZiAoZG9jdW1lbnQuYm9keS5sYXN0Q2hpbGQgIT09IGFmdGVyKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFmdGVyKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gUmVtb3ZlIGZvY3VzIHRyYXBcbiAgICBpZiAoYmVmb3JlLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgIGJlZm9yZS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGJlZm9yZSk7XG4gICAgfVxuICAgIGlmIChhZnRlci5wYXJlbnRFbGVtZW50KSB7XG4gICAgICBhZnRlci5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGFmdGVyKTtcbiAgICB9XG4gIH1cbn1cblxuX3BvcnRhbE9wZW5JbnN0YW5jZXMyLmRlZmF1bHQuc3Vic2NyaWJlKGJvZHlUcmFwKTsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpO1xuXG52YXIgX3Byb3BUeXBlcyA9IHJlcXVpcmUoXCJwcm9wLXR5cGVzXCIpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX2ZvY3VzTWFuYWdlciA9IHJlcXVpcmUoXCIuLi9oZWxwZXJzL2ZvY3VzTWFuYWdlclwiKTtcblxudmFyIGZvY3VzTWFuYWdlciA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9mb2N1c01hbmFnZXIpO1xuXG52YXIgX3Njb3BlVGFiID0gcmVxdWlyZShcIi4uL2hlbHBlcnMvc2NvcGVUYWJcIik7XG5cbnZhciBfc2NvcGVUYWIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2NvcGVUYWIpO1xuXG52YXIgX2FyaWFBcHBIaWRlciA9IHJlcXVpcmUoXCIuLi9oZWxwZXJzL2FyaWFBcHBIaWRlclwiKTtcblxudmFyIGFyaWFBcHBIaWRlciA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9hcmlhQXBwSGlkZXIpO1xuXG52YXIgX2NsYXNzTGlzdCA9IHJlcXVpcmUoXCIuLi9oZWxwZXJzL2NsYXNzTGlzdFwiKTtcblxudmFyIGNsYXNzTGlzdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9jbGFzc0xpc3QpO1xuXG52YXIgX3NhZmVIVE1MRWxlbWVudCA9IHJlcXVpcmUoXCIuLi9oZWxwZXJzL3NhZmVIVE1MRWxlbWVudFwiKTtcblxudmFyIF9zYWZlSFRNTEVsZW1lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2FmZUhUTUxFbGVtZW50KTtcblxudmFyIF9wb3J0YWxPcGVuSW5zdGFuY2VzID0gcmVxdWlyZShcIi4uL2hlbHBlcnMvcG9ydGFsT3Blbkluc3RhbmNlc1wiKTtcblxudmFyIF9wb3J0YWxPcGVuSW5zdGFuY2VzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BvcnRhbE9wZW5JbnN0YW5jZXMpO1xuXG5yZXF1aXJlKFwiLi4vaGVscGVycy9ib2R5VHJhcFwiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgbmV3T2JqW2tleV0gPSBvYmpba2V5XTsgfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG4vLyBzbyB0aGF0IG91ciBDU1MgaXMgc3RhdGljYWxseSBhbmFseXphYmxlXG52YXIgQ0xBU1NfTkFNRVMgPSB7XG4gIG92ZXJsYXk6IFwiUmVhY3RNb2RhbF9fT3ZlcmxheVwiLFxuICBjb250ZW50OiBcIlJlYWN0TW9kYWxfX0NvbnRlbnRcIlxufTtcblxudmFyIFRBQl9LRVkgPSA5O1xudmFyIEVTQ19LRVkgPSAyNztcblxudmFyIGFyaWFIaWRkZW5JbnN0YW5jZXMgPSAwO1xuXG52YXIgTW9kYWxQb3J0YWwgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoTW9kYWxQb3J0YWwsIF9Db21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIE1vZGFsUG9ydGFsKHByb3BzKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vZGFsUG9ydGFsKTtcblxuICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChNb2RhbFBvcnRhbC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1vZGFsUG9ydGFsKSkuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgX3RoaXMuc2V0T3ZlcmxheVJlZiA9IGZ1bmN0aW9uIChvdmVybGF5KSB7XG4gICAgICBfdGhpcy5vdmVybGF5ID0gb3ZlcmxheTtcbiAgICAgIF90aGlzLnByb3BzLm92ZXJsYXlSZWYgJiYgX3RoaXMucHJvcHMub3ZlcmxheVJlZihvdmVybGF5KTtcbiAgICB9O1xuXG4gICAgX3RoaXMuc2V0Q29udGVudFJlZiA9IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICBfdGhpcy5jb250ZW50ID0gY29udGVudDtcbiAgICAgIF90aGlzLnByb3BzLmNvbnRlbnRSZWYgJiYgX3RoaXMucHJvcHMuY29udGVudFJlZihjb250ZW50KTtcbiAgICB9O1xuXG4gICAgX3RoaXMuYWZ0ZXJDbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIGFwcEVsZW1lbnQgPSBfdGhpcyRwcm9wcy5hcHBFbGVtZW50LFxuICAgICAgICAgIGFyaWFIaWRlQXBwID0gX3RoaXMkcHJvcHMuYXJpYUhpZGVBcHAsXG4gICAgICAgICAgaHRtbE9wZW5DbGFzc05hbWUgPSBfdGhpcyRwcm9wcy5odG1sT3BlbkNsYXNzTmFtZSxcbiAgICAgICAgICBib2R5T3BlbkNsYXNzTmFtZSA9IF90aGlzJHByb3BzLmJvZHlPcGVuQ2xhc3NOYW1lO1xuXG4gICAgICAvLyBSZW1vdmUgY2xhc3Nlcy5cblxuICAgICAgYm9keU9wZW5DbGFzc05hbWUgJiYgY2xhc3NMaXN0LnJlbW92ZShkb2N1bWVudC5ib2R5LCBib2R5T3BlbkNsYXNzTmFtZSk7XG5cbiAgICAgIGh0bWxPcGVuQ2xhc3NOYW1lICYmIGNsYXNzTGlzdC5yZW1vdmUoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJodG1sXCIpWzBdLCBodG1sT3BlbkNsYXNzTmFtZSk7XG5cbiAgICAgIC8vIFJlc2V0IGFyaWEtaGlkZGVuIGF0dHJpYnV0ZSBpZiBhbGwgbW9kYWxzIGhhdmUgYmVlbiByZW1vdmVkXG4gICAgICBpZiAoYXJpYUhpZGVBcHAgJiYgYXJpYUhpZGRlbkluc3RhbmNlcyA+IDApIHtcbiAgICAgICAgYXJpYUhpZGRlbkluc3RhbmNlcyAtPSAxO1xuXG4gICAgICAgIGlmIChhcmlhSGlkZGVuSW5zdGFuY2VzID09PSAwKSB7XG4gICAgICAgICAgYXJpYUFwcEhpZGVyLnNob3coYXBwRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKF90aGlzLnByb3BzLnNob3VsZEZvY3VzQWZ0ZXJSZW5kZXIpIHtcbiAgICAgICAgaWYgKF90aGlzLnByb3BzLnNob3VsZFJldHVybkZvY3VzQWZ0ZXJDbG9zZSkge1xuICAgICAgICAgIGZvY3VzTWFuYWdlci5yZXR1cm5Gb2N1cyhfdGhpcy5wcm9wcy5wcmV2ZW50U2Nyb2xsKTtcbiAgICAgICAgICBmb2N1c01hbmFnZXIudGVhcmRvd25TY29wZWRGb2N1cygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvY3VzTWFuYWdlci5wb3BXaXRob3V0Rm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoX3RoaXMucHJvcHMub25BZnRlckNsb3NlKSB7XG4gICAgICAgIF90aGlzLnByb3BzLm9uQWZ0ZXJDbG9zZSgpO1xuICAgICAgfVxuXG4gICAgICBfcG9ydGFsT3Blbkluc3RhbmNlczIuZGVmYXVsdC5kZXJlZ2lzdGVyKF90aGlzKTtcbiAgICB9O1xuXG4gICAgX3RoaXMub3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLmJlZm9yZU9wZW4oKTtcbiAgICAgIGlmIChfdGhpcy5zdGF0ZS5hZnRlck9wZW4gJiYgX3RoaXMuc3RhdGUuYmVmb3JlQ2xvc2UpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLmNsb3NlVGltZXIpO1xuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGJlZm9yZUNsb3NlOiBmYWxzZSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChfdGhpcy5wcm9wcy5zaG91bGRGb2N1c0FmdGVyUmVuZGVyKSB7XG4gICAgICAgICAgZm9jdXNNYW5hZ2VyLnNldHVwU2NvcGVkRm9jdXMoX3RoaXMubm9kZSk7XG4gICAgICAgICAgZm9jdXNNYW5hZ2VyLm1hcmtGb3JGb2N1c0xhdGVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGlzT3BlbjogdHJ1ZSB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMub3BlbkFuaW1hdGlvbkZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgYWZ0ZXJPcGVuOiB0cnVlIH0pO1xuXG4gICAgICAgICAgICBpZiAoX3RoaXMucHJvcHMuaXNPcGVuICYmIF90aGlzLnByb3BzLm9uQWZ0ZXJPcGVuKSB7XG4gICAgICAgICAgICAgIF90aGlzLnByb3BzLm9uQWZ0ZXJPcGVuKHtcbiAgICAgICAgICAgICAgICBvdmVybGF5RWw6IF90aGlzLm92ZXJsYXksXG4gICAgICAgICAgICAgICAgY29udGVudEVsOiBfdGhpcy5jb250ZW50XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3RoaXMuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoX3RoaXMucHJvcHMuY2xvc2VUaW1lb3V0TVMgPiAwKSB7XG4gICAgICAgIF90aGlzLmNsb3NlV2l0aFRpbWVvdXQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzLmNsb3NlV2l0aG91dFRpbWVvdXQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3RoaXMuZm9jdXNDb250ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF90aGlzLmNvbnRlbnQgJiYgIV90aGlzLmNvbnRlbnRIYXNGb2N1cygpICYmIF90aGlzLmNvbnRlbnQuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy5jbG9zZVdpdGhUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNsb3Nlc0F0ID0gRGF0ZS5ub3coKSArIF90aGlzLnByb3BzLmNsb3NlVGltZW91dE1TO1xuICAgICAgX3RoaXMuc2V0U3RhdGUoeyBiZWZvcmVDbG9zZTogdHJ1ZSwgY2xvc2VzQXQ6IGNsb3Nlc0F0IH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMuY2xvc2VUaW1lciA9IHNldFRpbWVvdXQoX3RoaXMuY2xvc2VXaXRob3V0VGltZW91dCwgX3RoaXMuc3RhdGUuY2xvc2VzQXQgLSBEYXRlLm5vdygpKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfdGhpcy5jbG9zZVdpdGhvdXRUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBiZWZvcmVDbG9zZTogZmFsc2UsXG4gICAgICAgIGlzT3BlbjogZmFsc2UsXG4gICAgICAgIGFmdGVyT3BlbjogZmFsc2UsXG4gICAgICAgIGNsb3Nlc0F0OiBudWxsXG4gICAgICB9LCBfdGhpcy5hZnRlckNsb3NlKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuaGFuZGxlS2V5RG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IFRBQl9LRVkpIHtcbiAgICAgICAgKDAsIF9zY29wZVRhYjIuZGVmYXVsdCkoX3RoaXMuY29udGVudCwgZXZlbnQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoX3RoaXMucHJvcHMuc2hvdWxkQ2xvc2VPbkVzYyAmJiBldmVudC5rZXlDb2RlID09PSBFU0NfS0VZKSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBfdGhpcy5yZXF1ZXN0Q2xvc2UoZXZlbnQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5oYW5kbGVPdmVybGF5T25DbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKF90aGlzLnNob3VsZENsb3NlID09PSBudWxsKSB7XG4gICAgICAgIF90aGlzLnNob3VsZENsb3NlID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKF90aGlzLnNob3VsZENsb3NlICYmIF90aGlzLnByb3BzLnNob3VsZENsb3NlT25PdmVybGF5Q2xpY2spIHtcbiAgICAgICAgaWYgKF90aGlzLm93bmVySGFuZGxlc0Nsb3NlKCkpIHtcbiAgICAgICAgICBfdGhpcy5yZXF1ZXN0Q2xvc2UoZXZlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzLmZvY3VzQ29udGVudCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBfdGhpcy5zaG91bGRDbG9zZSA9IG51bGw7XG4gICAgfTtcblxuICAgIF90aGlzLmhhbmRsZUNvbnRlbnRPbk1vdXNlVXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpcy5zaG91bGRDbG9zZSA9IGZhbHNlO1xuICAgIH07XG5cbiAgICBfdGhpcy5oYW5kbGVPdmVybGF5T25Nb3VzZURvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmICghX3RoaXMucHJvcHMuc2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGljayAmJiBldmVudC50YXJnZXQgPT0gX3RoaXMub3ZlcmxheSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfdGhpcy5oYW5kbGVDb250ZW50T25DbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnNob3VsZENsb3NlID0gZmFsc2U7XG4gICAgfTtcblxuICAgIF90aGlzLmhhbmRsZUNvbnRlbnRPbk1vdXNlRG93biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLnNob3VsZENsb3NlID0gZmFsc2U7XG4gICAgfTtcblxuICAgIF90aGlzLnJlcXVlc3RDbG9zZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgcmV0dXJuIF90aGlzLm93bmVySGFuZGxlc0Nsb3NlKCkgJiYgX3RoaXMucHJvcHMub25SZXF1ZXN0Q2xvc2UoZXZlbnQpO1xuICAgIH07XG5cbiAgICBfdGhpcy5vd25lckhhbmRsZXNDbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfdGhpcy5wcm9wcy5vblJlcXVlc3RDbG9zZTtcbiAgICB9O1xuXG4gICAgX3RoaXMuc2hvdWxkQmVDbG9zZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gIV90aGlzLnN0YXRlLmlzT3BlbiAmJiAhX3RoaXMuc3RhdGUuYmVmb3JlQ2xvc2U7XG4gICAgfTtcblxuICAgIF90aGlzLmNvbnRlbnRIYXNGb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBfdGhpcy5jb250ZW50IHx8IF90aGlzLmNvbnRlbnQuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7XG4gICAgfTtcblxuICAgIF90aGlzLmJ1aWxkQ2xhc3NOYW1lID0gZnVuY3Rpb24gKHdoaWNoLCBhZGRpdGlvbmFsKSB7XG4gICAgICB2YXIgY2xhc3NOYW1lcyA9ICh0eXBlb2YgYWRkaXRpb25hbCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGFkZGl0aW9uYWwpKSA9PT0gXCJvYmplY3RcIiA/IGFkZGl0aW9uYWwgOiB7XG4gICAgICAgIGJhc2U6IENMQVNTX05BTUVTW3doaWNoXSxcbiAgICAgICAgYWZ0ZXJPcGVuOiBDTEFTU19OQU1FU1t3aGljaF0gKyBcIi0tYWZ0ZXItb3BlblwiLFxuICAgICAgICBiZWZvcmVDbG9zZTogQ0xBU1NfTkFNRVNbd2hpY2hdICsgXCItLWJlZm9yZS1jbG9zZVwiXG4gICAgICB9O1xuICAgICAgdmFyIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXMuYmFzZTtcbiAgICAgIGlmIChfdGhpcy5zdGF0ZS5hZnRlck9wZW4pIHtcbiAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lICsgXCIgXCIgKyBjbGFzc05hbWVzLmFmdGVyT3BlbjtcbiAgICAgIH1cbiAgICAgIGlmIChfdGhpcy5zdGF0ZS5iZWZvcmVDbG9zZSkge1xuICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUgKyBcIiBcIiArIGNsYXNzTmFtZXMuYmVmb3JlQ2xvc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHlwZW9mIGFkZGl0aW9uYWwgPT09IFwic3RyaW5nXCIgJiYgYWRkaXRpb25hbCA/IGNsYXNzTmFtZSArIFwiIFwiICsgYWRkaXRpb25hbCA6IGNsYXNzTmFtZTtcbiAgICB9O1xuXG4gICAgX3RoaXMuYXR0cmlidXRlc0Zyb21PYmplY3QgPSBmdW5jdGlvbiAocHJlZml4LCBpdGVtcykge1xuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGl0ZW1zKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbmFtZSkge1xuICAgICAgICBhY2NbcHJlZml4ICsgXCItXCIgKyBuYW1lXSA9IGl0ZW1zW25hbWVdO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSwge30pO1xuICAgIH07XG5cbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGFmdGVyT3BlbjogZmFsc2UsXG4gICAgICBiZWZvcmVDbG9zZTogZmFsc2VcbiAgICB9O1xuXG4gICAgX3RoaXMuc2hvdWxkQ2xvc2UgPSBudWxsO1xuICAgIF90aGlzLm1vdmVGcm9tQ29udGVudFRvT3ZlcmxheSA9IG51bGw7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKE1vZGFsUG9ydGFsLCBbe1xuICAgIGtleTogXCJjb21wb25lbnREaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmlzT3Blbikge1xuICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkVXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgICBpZiAocHJldlByb3BzLmJvZHlPcGVuQ2xhc3NOYW1lICE9PSB0aGlzLnByb3BzLmJvZHlPcGVuQ2xhc3NOYW1lKSB7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1JlYWN0LU1vZGFsOiBcImJvZHlPcGVuQ2xhc3NOYW1lXCIgcHJvcCBoYXMgYmVlbiBtb2RpZmllZC4gJyArIFwiVGhpcyBtYXkgY2F1c2UgdW5leHBlY3RlZCBiZWhhdmlvciB3aGVuIG11bHRpcGxlIG1vZGFscyBhcmUgb3Blbi5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZXZQcm9wcy5odG1sT3BlbkNsYXNzTmFtZSAhPT0gdGhpcy5wcm9wcy5odG1sT3BlbkNsYXNzTmFtZSkge1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgY29uc29sZS53YXJuKCdSZWFjdC1Nb2RhbDogXCJodG1sT3BlbkNsYXNzTmFtZVwiIHByb3AgaGFzIGJlZW4gbW9kaWZpZWQuICcgKyBcIlRoaXMgbWF5IGNhdXNlIHVuZXhwZWN0ZWQgYmVoYXZpb3Igd2hlbiBtdWx0aXBsZSBtb2RhbHMgYXJlIG9wZW4uXCIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmlzT3BlbiAmJiAhcHJldlByb3BzLmlzT3Blbikge1xuICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMucHJvcHMuaXNPcGVuICYmIHByZXZQcm9wcy5pc09wZW4pIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBGb2N1cyBvbmx5IG5lZWRzIHRvIGJlIHNldCBvbmNlIHdoZW4gdGhlIG1vZGFsIGlzIGJlaW5nIG9wZW5lZFxuICAgICAgaWYgKHRoaXMucHJvcHMuc2hvdWxkRm9jdXNBZnRlclJlbmRlciAmJiB0aGlzLnN0YXRlLmlzT3BlbiAmJiAhcHJldlN0YXRlLmlzT3Blbikge1xuICAgICAgICB0aGlzLmZvY3VzQ29udGVudCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnRXaWxsVW5tb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIGlmICh0aGlzLnN0YXRlLmlzT3Blbikge1xuICAgICAgICB0aGlzLmFmdGVyQ2xvc2UoKTtcbiAgICAgIH1cbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNsb3NlVGltZXIpO1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5vcGVuQW5pbWF0aW9uRnJhbWUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJiZWZvcmVPcGVuXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGJlZm9yZU9wZW4oKSB7XG4gICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBhcHBFbGVtZW50ID0gX3Byb3BzLmFwcEVsZW1lbnQsXG4gICAgICAgICAgYXJpYUhpZGVBcHAgPSBfcHJvcHMuYXJpYUhpZGVBcHAsXG4gICAgICAgICAgaHRtbE9wZW5DbGFzc05hbWUgPSBfcHJvcHMuaHRtbE9wZW5DbGFzc05hbWUsXG4gICAgICAgICAgYm9keU9wZW5DbGFzc05hbWUgPSBfcHJvcHMuYm9keU9wZW5DbGFzc05hbWU7XG5cbiAgICAgIC8vIEFkZCBjbGFzc2VzLlxuXG4gICAgICBib2R5T3BlbkNsYXNzTmFtZSAmJiBjbGFzc0xpc3QuYWRkKGRvY3VtZW50LmJvZHksIGJvZHlPcGVuQ2xhc3NOYW1lKTtcblxuICAgICAgaHRtbE9wZW5DbGFzc05hbWUgJiYgY2xhc3NMaXN0LmFkZChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImh0bWxcIilbMF0sIGh0bWxPcGVuQ2xhc3NOYW1lKTtcblxuICAgICAgaWYgKGFyaWFIaWRlQXBwKSB7XG4gICAgICAgIGFyaWFIaWRkZW5JbnN0YW5jZXMgKz0gMTtcbiAgICAgICAgYXJpYUFwcEhpZGVyLmhpZGUoYXBwRWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgIF9wb3J0YWxPcGVuSW5zdGFuY2VzMi5kZWZhdWx0LnJlZ2lzdGVyKHRoaXMpO1xuICAgIH1cblxuICAgIC8vIERvbid0IHN0ZWFsIGZvY3VzIGZyb20gaW5uZXIgZWxlbWVudHNcblxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3Byb3BzMiA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgaWQgPSBfcHJvcHMyLmlkLFxuICAgICAgICAgIGNsYXNzTmFtZSA9IF9wcm9wczIuY2xhc3NOYW1lLFxuICAgICAgICAgIG92ZXJsYXlDbGFzc05hbWUgPSBfcHJvcHMyLm92ZXJsYXlDbGFzc05hbWUsXG4gICAgICAgICAgZGVmYXVsdFN0eWxlcyA9IF9wcm9wczIuZGVmYXVsdFN0eWxlcyxcbiAgICAgICAgICBjaGlsZHJlbiA9IF9wcm9wczIuY2hpbGRyZW47XG5cbiAgICAgIHZhciBjb250ZW50U3R5bGVzID0gY2xhc3NOYW1lID8ge30gOiBkZWZhdWx0U3R5bGVzLmNvbnRlbnQ7XG4gICAgICB2YXIgb3ZlcmxheVN0eWxlcyA9IG92ZXJsYXlDbGFzc05hbWUgPyB7fSA6IGRlZmF1bHRTdHlsZXMub3ZlcmxheTtcblxuICAgICAgaWYgKHRoaXMuc2hvdWxkQmVDbG9zZWQoKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIG92ZXJsYXlQcm9wcyA9IHtcbiAgICAgICAgcmVmOiB0aGlzLnNldE92ZXJsYXlSZWYsXG4gICAgICAgIGNsYXNzTmFtZTogdGhpcy5idWlsZENsYXNzTmFtZShcIm92ZXJsYXlcIiwgb3ZlcmxheUNsYXNzTmFtZSksXG4gICAgICAgIHN0eWxlOiBfZXh0ZW5kcyh7fSwgb3ZlcmxheVN0eWxlcywgdGhpcy5wcm9wcy5zdHlsZS5vdmVybGF5KSxcbiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVPdmVybGF5T25DbGljayxcbiAgICAgICAgb25Nb3VzZURvd246IHRoaXMuaGFuZGxlT3ZlcmxheU9uTW91c2VEb3duXG4gICAgICB9O1xuXG4gICAgICB2YXIgY29udGVudFByb3BzID0gX2V4dGVuZHMoe1xuICAgICAgICBpZDogaWQsXG4gICAgICAgIHJlZjogdGhpcy5zZXRDb250ZW50UmVmLFxuICAgICAgICBzdHlsZTogX2V4dGVuZHMoe30sIGNvbnRlbnRTdHlsZXMsIHRoaXMucHJvcHMuc3R5bGUuY29udGVudCksXG4gICAgICAgIGNsYXNzTmFtZTogdGhpcy5idWlsZENsYXNzTmFtZShcImNvbnRlbnRcIiwgY2xhc3NOYW1lKSxcbiAgICAgICAgdGFiSW5kZXg6IFwiLTFcIixcbiAgICAgICAgb25LZXlEb3duOiB0aGlzLmhhbmRsZUtleURvd24sXG4gICAgICAgIG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZUNvbnRlbnRPbk1vdXNlRG93bixcbiAgICAgICAgb25Nb3VzZVVwOiB0aGlzLmhhbmRsZUNvbnRlbnRPbk1vdXNlVXAsXG4gICAgICAgIG9uQ2xpY2s6IHRoaXMuaGFuZGxlQ29udGVudE9uQ2xpY2ssXG4gICAgICAgIHJvbGU6IHRoaXMucHJvcHMucm9sZSxcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IHRoaXMucHJvcHMuY29udGVudExhYmVsXG4gICAgICB9LCB0aGlzLmF0dHJpYnV0ZXNGcm9tT2JqZWN0KFwiYXJpYVwiLCBfZXh0ZW5kcyh7IG1vZGFsOiB0cnVlIH0sIHRoaXMucHJvcHMuYXJpYSkpLCB0aGlzLmF0dHJpYnV0ZXNGcm9tT2JqZWN0KFwiZGF0YVwiLCB0aGlzLnByb3BzLmRhdGEgfHwge30pLCB7XG4gICAgICAgIFwiZGF0YS10ZXN0aWRcIjogdGhpcy5wcm9wcy50ZXN0SWRcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgY29udGVudEVsZW1lbnQgPSB0aGlzLnByb3BzLmNvbnRlbnRFbGVtZW50KGNvbnRlbnRQcm9wcywgY2hpbGRyZW4pO1xuICAgICAgcmV0dXJuIHRoaXMucHJvcHMub3ZlcmxheUVsZW1lbnQob3ZlcmxheVByb3BzLCBjb250ZW50RWxlbWVudCk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIE1vZGFsUG9ydGFsO1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuTW9kYWxQb3J0YWwuZGVmYXVsdFByb3BzID0ge1xuICBzdHlsZToge1xuICAgIG92ZXJsYXk6IHt9LFxuICAgIGNvbnRlbnQ6IHt9XG4gIH0sXG4gIGRlZmF1bHRTdHlsZXM6IHt9XG59O1xuTW9kYWxQb3J0YWwucHJvcFR5cGVzID0ge1xuICBpc09wZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbC5pc1JlcXVpcmVkLFxuICBkZWZhdWx0U3R5bGVzOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnNoYXBlKHtcbiAgICBjb250ZW50OiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgICBvdmVybGF5OiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdFxuICB9KSxcbiAgc3R5bGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc2hhcGUoe1xuICAgIGNvbnRlbnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICAgIG92ZXJsYXk6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0XG4gIH0pLFxuICBjbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQub25lT2ZUeXBlKFtfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZywgX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3RdKSxcbiAgb3ZlcmxheUNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vbmVPZlR5cGUoW19wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLCBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdF0pLFxuICBib2R5T3BlbkNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGh0bWxPcGVuQ2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgYXJpYUhpZGVBcHA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgYXBwRWxlbWVudDogX3Byb3BUeXBlczIuZGVmYXVsdC5vbmVPZlR5cGUoW19wcm9wVHlwZXMyLmRlZmF1bHQuaW5zdGFuY2VPZihfc2FmZUhUTUxFbGVtZW50Mi5kZWZhdWx0KSwgX3Byb3BUeXBlczIuZGVmYXVsdC5pbnN0YW5jZU9mKF9zYWZlSFRNTEVsZW1lbnQuU2FmZUhUTUxDb2xsZWN0aW9uKSwgX3Byb3BUeXBlczIuZGVmYXVsdC5pbnN0YW5jZU9mKF9zYWZlSFRNTEVsZW1lbnQuU2FmZU5vZGVMaXN0KSwgX3Byb3BUeXBlczIuZGVmYXVsdC5hcnJheU9mKF9wcm9wVHlwZXMyLmRlZmF1bHQuaW5zdGFuY2VPZihfc2FmZUhUTUxFbGVtZW50Mi5kZWZhdWx0KSldKSxcbiAgb25BZnRlck9wZW46IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgb25BZnRlckNsb3NlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIG9uUmVxdWVzdENsb3NlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIGNsb3NlVGltZW91dE1TOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm51bWJlcixcbiAgc2hvdWxkRm9jdXNBZnRlclJlbmRlcjogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBzaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIHNob3VsZFJldHVybkZvY3VzQWZ0ZXJDbG9zZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBwcmV2ZW50U2Nyb2xsOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIHJvbGU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBjb250ZW50TGFiZWw6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBhcmlhOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgZGF0YTogX3Byb3BUeXBlczIuZGVmYXVsdC5vYmplY3QsXG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm5vZGUsXG4gIHNob3VsZENsb3NlT25Fc2M6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgb3ZlcmxheVJlZjogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBjb250ZW50UmVmOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIGlkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgb3ZlcmxheUVsZW1lbnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgY29udGVudEVsZW1lbnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgdGVzdElkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZ1xufTtcbmV4cG9ydHMuZGVmYXVsdCA9IE1vZGFsUG9ydGFsO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzW1wiZGVmYXVsdFwiXTsiLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbmZ1bmN0aW9uIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgLy8gQ2FsbCB0aGlzLmNvbnN0cnVjdG9yLmdEU0ZQIHRvIHN1cHBvcnQgc3ViLWNsYXNzZXMuXG4gIHZhciBzdGF0ZSA9IHRoaXMuY29uc3RydWN0b3IuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKHRoaXMucHJvcHMsIHRoaXMuc3RhdGUpO1xuICBpZiAoc3RhdGUgIT09IG51bGwgJiYgc3RhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gIC8vIENhbGwgdGhpcy5jb25zdHJ1Y3Rvci5nRFNGUCB0byBzdXBwb3J0IHN1Yi1jbGFzc2VzLlxuICAvLyBVc2UgdGhlIHNldFN0YXRlKCkgdXBkYXRlciB0byBlbnN1cmUgc3RhdGUgaXNuJ3Qgc3RhbGUgaW4gY2VydGFpbiBlZGdlIGNhc2VzLlxuICBmdW5jdGlvbiB1cGRhdGVyKHByZXZTdGF0ZSkge1xuICAgIHZhciBzdGF0ZSA9IHRoaXMuY29uc3RydWN0b3IuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5leHRQcm9wcywgcHJldlN0YXRlKTtcbiAgICByZXR1cm4gc3RhdGUgIT09IG51bGwgJiYgc3RhdGUgIT09IHVuZGVmaW5lZCA/IHN0YXRlIDogbnVsbDtcbiAgfVxuICAvLyBCaW5kaW5nIFwidGhpc1wiIGlzIGltcG9ydGFudCBmb3Igc2hhbGxvdyByZW5kZXJlciBzdXBwb3J0LlxuICB0aGlzLnNldFN0YXRlKHVwZGF0ZXIuYmluZCh0aGlzKSk7XG59XG5cbmZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcbiAgdHJ5IHtcbiAgICB2YXIgcHJldlByb3BzID0gdGhpcy5wcm9wcztcbiAgICB2YXIgcHJldlN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICB0aGlzLnByb3BzID0gbmV4dFByb3BzO1xuICAgIHRoaXMuc3RhdGUgPSBuZXh0U3RhdGU7XG4gICAgdGhpcy5fX3JlYWN0SW50ZXJuYWxTbmFwc2hvdEZsYWcgPSB0cnVlO1xuICAgIHRoaXMuX19yZWFjdEludGVybmFsU25hcHNob3QgPSB0aGlzLmdldFNuYXBzaG90QmVmb3JlVXBkYXRlKFxuICAgICAgcHJldlByb3BzLFxuICAgICAgcHJldlN0YXRlXG4gICAgKTtcbiAgfSBmaW5hbGx5IHtcbiAgICB0aGlzLnByb3BzID0gcHJldlByb3BzO1xuICAgIHRoaXMuc3RhdGUgPSBwcmV2U3RhdGU7XG4gIH1cbn1cblxuLy8gUmVhY3QgbWF5IHdhcm4gYWJvdXQgY1dNL2NXUlAvY1dVIG1ldGhvZHMgYmVpbmcgZGVwcmVjYXRlZC5cbi8vIEFkZCBhIGZsYWcgdG8gc3VwcHJlc3MgdGhlc2Ugd2FybmluZ3MgZm9yIHRoaXMgc3BlY2lhbCBjYXNlLlxuY29tcG9uZW50V2lsbE1vdW50Ll9fc3VwcHJlc3NEZXByZWNhdGlvbldhcm5pbmcgPSB0cnVlO1xuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcy5fX3N1cHByZXNzRGVwcmVjYXRpb25XYXJuaW5nID0gdHJ1ZTtcbmNvbXBvbmVudFdpbGxVcGRhdGUuX19zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZyA9IHRydWU7XG5cbmZ1bmN0aW9uIHBvbHlmaWxsKENvbXBvbmVudCkge1xuICB2YXIgcHJvdG90eXBlID0gQ29tcG9uZW50LnByb3RvdHlwZTtcblxuICBpZiAoIXByb3RvdHlwZSB8fCAhcHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhbiBvbmx5IHBvbHlmaWxsIGNsYXNzIGNvbXBvbmVudHMnKTtcbiAgfVxuXG4gIGlmIChcbiAgICB0eXBlb2YgQ29tcG9uZW50LmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyAhPT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiBwcm90b3R5cGUuZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUgIT09ICdmdW5jdGlvbidcbiAgKSB7XG4gICAgcmV0dXJuIENvbXBvbmVudDtcbiAgfVxuXG4gIC8vIElmIG5ldyBjb21wb25lbnQgQVBJcyBhcmUgZGVmaW5lZCwgXCJ1bnNhZmVcIiBsaWZlY3ljbGVzIHdvbid0IGJlIGNhbGxlZC5cbiAgLy8gRXJyb3IgaWYgYW55IG9mIHRoZXNlIGxpZmVjeWNsZXMgYXJlIHByZXNlbnQsXG4gIC8vIEJlY2F1c2UgdGhleSB3b3VsZCB3b3JrIGRpZmZlcmVudGx5IGJldHdlZW4gb2xkZXIgYW5kIG5ld2VyICgxNi4zKykgdmVyc2lvbnMgb2YgUmVhY3QuXG4gIHZhciBmb3VuZFdpbGxNb3VudE5hbWUgPSBudWxsO1xuICB2YXIgZm91bmRXaWxsUmVjZWl2ZVByb3BzTmFtZSA9IG51bGw7XG4gIHZhciBmb3VuZFdpbGxVcGRhdGVOYW1lID0gbnVsbDtcbiAgaWYgKHR5cGVvZiBwcm90b3R5cGUuY29tcG9uZW50V2lsbE1vdW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgZm91bmRXaWxsTW91bnROYW1lID0gJ2NvbXBvbmVudFdpbGxNb3VudCc7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHByb3RvdHlwZS5VTlNBRkVfY29tcG9uZW50V2lsbE1vdW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgZm91bmRXaWxsTW91bnROYW1lID0gJ1VOU0FGRV9jb21wb25lbnRXaWxsTW91bnQnO1xuICB9XG4gIGlmICh0eXBlb2YgcHJvdG90eXBlLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBmb3VuZFdpbGxSZWNlaXZlUHJvcHNOYW1lID0gJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMnO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBwcm90b3R5cGUuVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBmb3VuZFdpbGxSZWNlaXZlUHJvcHNOYW1lID0gJ1VOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzJztcbiAgfVxuICBpZiAodHlwZW9mIHByb3RvdHlwZS5jb21wb25lbnRXaWxsVXBkYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgZm91bmRXaWxsVXBkYXRlTmFtZSA9ICdjb21wb25lbnRXaWxsVXBkYXRlJztcbiAgfSBlbHNlIGlmICh0eXBlb2YgcHJvdG90eXBlLlVOU0FGRV9jb21wb25lbnRXaWxsVXBkYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgZm91bmRXaWxsVXBkYXRlTmFtZSA9ICdVTlNBRkVfY29tcG9uZW50V2lsbFVwZGF0ZSc7XG4gIH1cbiAgaWYgKFxuICAgIGZvdW5kV2lsbE1vdW50TmFtZSAhPT0gbnVsbCB8fFxuICAgIGZvdW5kV2lsbFJlY2VpdmVQcm9wc05hbWUgIT09IG51bGwgfHxcbiAgICBmb3VuZFdpbGxVcGRhdGVOYW1lICE9PSBudWxsXG4gICkge1xuICAgIHZhciBjb21wb25lbnROYW1lID0gQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lO1xuICAgIHZhciBuZXdBcGlOYW1lID1cbiAgICAgIHR5cGVvZiBDb21wb25lbnQuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gJ2dldERlcml2ZWRTdGF0ZUZyb21Qcm9wcygpJ1xuICAgICAgICA6ICdnZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSgpJztcblxuICAgIHRocm93IEVycm9yKFxuICAgICAgJ1Vuc2FmZSBsZWdhY3kgbGlmZWN5Y2xlcyB3aWxsIG5vdCBiZSBjYWxsZWQgZm9yIGNvbXBvbmVudHMgdXNpbmcgbmV3IGNvbXBvbmVudCBBUElzLlxcblxcbicgK1xuICAgICAgICBjb21wb25lbnROYW1lICtcbiAgICAgICAgJyB1c2VzICcgK1xuICAgICAgICBuZXdBcGlOYW1lICtcbiAgICAgICAgJyBidXQgYWxzbyBjb250YWlucyB0aGUgZm9sbG93aW5nIGxlZ2FjeSBsaWZlY3ljbGVzOicgK1xuICAgICAgICAoZm91bmRXaWxsTW91bnROYW1lICE9PSBudWxsID8gJ1xcbiAgJyArIGZvdW5kV2lsbE1vdW50TmFtZSA6ICcnKSArXG4gICAgICAgIChmb3VuZFdpbGxSZWNlaXZlUHJvcHNOYW1lICE9PSBudWxsXG4gICAgICAgICAgPyAnXFxuICAnICsgZm91bmRXaWxsUmVjZWl2ZVByb3BzTmFtZVxuICAgICAgICAgIDogJycpICtcbiAgICAgICAgKGZvdW5kV2lsbFVwZGF0ZU5hbWUgIT09IG51bGwgPyAnXFxuICAnICsgZm91bmRXaWxsVXBkYXRlTmFtZSA6ICcnKSArXG4gICAgICAgICdcXG5cXG5UaGUgYWJvdmUgbGlmZWN5Y2xlcyBzaG91bGQgYmUgcmVtb3ZlZC4gTGVhcm4gbW9yZSBhYm91dCB0aGlzIHdhcm5pbmcgaGVyZTpcXG4nICtcbiAgICAgICAgJ2h0dHBzOi8vZmIubWUvcmVhY3QtYXN5bmMtY29tcG9uZW50LWxpZmVjeWNsZS1ob29rcydcbiAgICApO1xuICB9XG5cbiAgLy8gUmVhY3QgPD0gMTYuMiBkb2VzIG5vdCBzdXBwb3J0IHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMuXG4gIC8vIEFzIGEgd29ya2Fyb3VuZCwgdXNlIGNXTSBhbmQgY1dSUCB0byBpbnZva2UgdGhlIG5ldyBzdGF0aWMgbGlmZWN5Y2xlLlxuICAvLyBOZXdlciB2ZXJzaW9ucyBvZiBSZWFjdCB3aWxsIGlnbm9yZSB0aGVzZSBsaWZlY3ljbGVzIGlmIGdEU0ZQIGV4aXN0cy5cbiAgaWYgKHR5cGVvZiBDb21wb25lbnQuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcHJvdG90eXBlLmNvbXBvbmVudFdpbGxNb3VudCA9IGNvbXBvbmVudFdpbGxNb3VudDtcbiAgICBwcm90b3R5cGUuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyA9IGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM7XG4gIH1cblxuICAvLyBSZWFjdCA8PSAxNi4yIGRvZXMgbm90IHN1cHBvcnQgZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUuXG4gIC8vIEFzIGEgd29ya2Fyb3VuZCwgdXNlIGNXVSB0byBpbnZva2UgdGhlIG5ldyBsaWZlY3ljbGUuXG4gIC8vIE5ld2VyIHZlcnNpb25zIG9mIFJlYWN0IHdpbGwgaWdub3JlIHRoYXQgbGlmZWN5Y2xlIGlmIGdTQlUgZXhpc3RzLlxuICBpZiAodHlwZW9mIHByb3RvdHlwZS5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGlmICh0eXBlb2YgcHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnQ2Fubm90IHBvbHlmaWxsIGdldFNuYXBzaG90QmVmb3JlVXBkYXRlKCkgZm9yIGNvbXBvbmVudHMgdGhhdCBkbyBub3QgZGVmaW5lIGNvbXBvbmVudERpZFVwZGF0ZSgpIG9uIHRoZSBwcm90b3R5cGUnXG4gICAgICApO1xuICAgIH1cblxuICAgIHByb3RvdHlwZS5jb21wb25lbnRXaWxsVXBkYXRlID0gY29tcG9uZW50V2lsbFVwZGF0ZTtcblxuICAgIHZhciBjb21wb25lbnREaWRVcGRhdGUgPSBwcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlO1xuXG4gICAgcHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZVBvbHlmaWxsKFxuICAgICAgcHJldlByb3BzLFxuICAgICAgcHJldlN0YXRlLFxuICAgICAgbWF5YmVTbmFwc2hvdFxuICAgICkge1xuICAgICAgLy8gMTYuMysgd2lsbCBub3QgZXhlY3V0ZSBvdXIgd2lsbC11cGRhdGUgbWV0aG9kO1xuICAgICAgLy8gSXQgd2lsbCBwYXNzIGEgc25hcHNob3QgdmFsdWUgdG8gZGlkLXVwZGF0ZSB0aG91Z2guXG4gICAgICAvLyBPbGRlciB2ZXJzaW9ucyB3aWxsIHJlcXVpcmUgb3VyIHBvbHlmaWxsZWQgd2lsbC11cGRhdGUgdmFsdWUuXG4gICAgICAvLyBXZSBuZWVkIHRvIGhhbmRsZSBib3RoIGNhc2VzLCBidXQgY2FuJ3QganVzdCBjaGVjayBmb3IgdGhlIHByZXNlbmNlIG9mIFwibWF5YmVTbmFwc2hvdFwiLFxuICAgICAgLy8gQmVjYXVzZSBmb3IgPD0gMTUueCB2ZXJzaW9ucyB0aGlzIG1pZ2h0IGJlIGEgXCJwcmV2Q29udGV4dFwiIG9iamVjdC5cbiAgICAgIC8vIFdlIGFsc28gY2FuJ3QganVzdCBjaGVjayBcIl9fcmVhY3RJbnRlcm5hbFNuYXBzaG90XCIsXG4gICAgICAvLyBCZWNhdXNlIGdldC1zbmFwc2hvdCBtaWdodCByZXR1cm4gYSBmYWxzeSB2YWx1ZS5cbiAgICAgIC8vIFNvIGNoZWNrIGZvciB0aGUgZXhwbGljaXQgX19yZWFjdEludGVybmFsU25hcHNob3RGbGFnIGZsYWcgdG8gZGV0ZXJtaW5lIGJlaGF2aW9yLlxuICAgICAgdmFyIHNuYXBzaG90ID0gdGhpcy5fX3JlYWN0SW50ZXJuYWxTbmFwc2hvdEZsYWdcbiAgICAgICAgPyB0aGlzLl9fcmVhY3RJbnRlcm5hbFNuYXBzaG90XG4gICAgICAgIDogbWF5YmVTbmFwc2hvdDtcblxuICAgICAgY29tcG9uZW50RGlkVXBkYXRlLmNhbGwodGhpcywgcHJldlByb3BzLCBwcmV2U3RhdGUsIHNuYXBzaG90KTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIENvbXBvbmVudDtcbn1cblxuZXhwb3J0IHsgcG9seWZpbGwgfTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5ib2R5T3BlbkNsYXNzTmFtZSA9IGV4cG9ydHMucG9ydGFsQ2xhc3NOYW1lID0gdW5kZWZpbmVkO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZShcInJlYWN0XCIpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoXCJyZWFjdC1kb21cIik7XG5cbnZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXG52YXIgX3Byb3BUeXBlcyA9IHJlcXVpcmUoXCJwcm9wLXR5cGVzXCIpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX01vZGFsUG9ydGFsID0gcmVxdWlyZShcIi4vTW9kYWxQb3J0YWxcIik7XG5cbnZhciBfTW9kYWxQb3J0YWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTW9kYWxQb3J0YWwpO1xuXG52YXIgX2FyaWFBcHBIaWRlciA9IHJlcXVpcmUoXCIuLi9oZWxwZXJzL2FyaWFBcHBIaWRlclwiKTtcblxudmFyIGFyaWFBcHBIaWRlciA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9hcmlhQXBwSGlkZXIpO1xuXG52YXIgX3NhZmVIVE1MRWxlbWVudCA9IHJlcXVpcmUoXCIuLi9oZWxwZXJzL3NhZmVIVE1MRWxlbWVudFwiKTtcblxudmFyIF9zYWZlSFRNTEVsZW1lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2FmZUhUTUxFbGVtZW50KTtcblxudmFyIF9yZWFjdExpZmVjeWNsZXNDb21wYXQgPSByZXF1aXJlKFwicmVhY3QtbGlmZWN5Y2xlcy1jb21wYXRcIik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIHBvcnRhbENsYXNzTmFtZSA9IGV4cG9ydHMucG9ydGFsQ2xhc3NOYW1lID0gXCJSZWFjdE1vZGFsUG9ydGFsXCI7XG52YXIgYm9keU9wZW5DbGFzc05hbWUgPSBleHBvcnRzLmJvZHlPcGVuQ2xhc3NOYW1lID0gXCJSZWFjdE1vZGFsX19Cb2R5LS1vcGVuXCI7XG5cbnZhciBpc1JlYWN0MTYgPSBfc2FmZUhUTUxFbGVtZW50LmNhblVzZURPTSAmJiBfcmVhY3REb20yLmRlZmF1bHQuY3JlYXRlUG9ydGFsICE9PSB1bmRlZmluZWQ7XG5cbnZhciBjcmVhdGVIVE1MRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZUhUTUxFbGVtZW50KG5hbWUpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobmFtZSk7XG59O1xuXG52YXIgZ2V0Q3JlYXRlUG9ydGFsID0gZnVuY3Rpb24gZ2V0Q3JlYXRlUG9ydGFsKCkge1xuICByZXR1cm4gaXNSZWFjdDE2ID8gX3JlYWN0RG9tMi5kZWZhdWx0LmNyZWF0ZVBvcnRhbCA6IF9yZWFjdERvbTIuZGVmYXVsdC51bnN0YWJsZV9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcjtcbn07XG5cbmZ1bmN0aW9uIGdldFBhcmVudEVsZW1lbnQocGFyZW50U2VsZWN0b3IpIHtcbiAgcmV0dXJuIHBhcmVudFNlbGVjdG9yKCk7XG59XG5cbnZhciBNb2RhbCA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhNb2RhbCwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gTW9kYWwoKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vZGFsKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKF9yZWYgPSBNb2RhbC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1vZGFsKSkuY2FsbC5hcHBseShfcmVmLCBbdGhpc10uY29uY2F0KGFyZ3MpKSksIF90aGlzKSwgX3RoaXMucmVtb3ZlUG9ydGFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgIWlzUmVhY3QxNiAmJiBfcmVhY3REb20yLmRlZmF1bHQudW5tb3VudENvbXBvbmVudEF0Tm9kZShfdGhpcy5ub2RlKTtcbiAgICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnRFbGVtZW50KF90aGlzLnByb3BzLnBhcmVudFNlbGVjdG9yKTtcbiAgICAgIGlmIChwYXJlbnQgJiYgcGFyZW50LmNvbnRhaW5zKF90aGlzLm5vZGUpKSB7XG4gICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChfdGhpcy5ub2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUud2FybignUmVhY3QtTW9kYWw6IFwicGFyZW50U2VsZWN0b3JcIiBwcm9wIGRpZCBub3QgcmV0dXJuZWQgYW55IERPTSAnICsgXCJlbGVtZW50LiBNYWtlIHN1cmUgdGhhdCB0aGUgcGFyZW50IGVsZW1lbnQgaXMgdW5tb3VudGVkIHRvIFwiICsgXCJhdm9pZCBhbnkgbWVtb3J5IGxlYWtzLlwiKTtcbiAgICAgIH1cbiAgICB9LCBfdGhpcy5wb3J0YWxSZWYgPSBmdW5jdGlvbiAocmVmKSB7XG4gICAgICBfdGhpcy5wb3J0YWwgPSByZWY7XG4gICAgfSwgX3RoaXMucmVuZGVyUG9ydGFsID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgICB2YXIgY3JlYXRlUG9ydGFsID0gZ2V0Q3JlYXRlUG9ydGFsKCk7XG4gICAgICB2YXIgcG9ydGFsID0gY3JlYXRlUG9ydGFsKF90aGlzLCBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTW9kYWxQb3J0YWwyLmRlZmF1bHQsIF9leHRlbmRzKHsgZGVmYXVsdFN0eWxlczogTW9kYWwuZGVmYXVsdFN0eWxlcyB9LCBwcm9wcykpLCBfdGhpcy5ub2RlKTtcbiAgICAgIF90aGlzLnBvcnRhbFJlZihwb3J0YWwpO1xuICAgIH0sIF90ZW1wKSwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKE1vZGFsLCBbe1xuICAgIGtleTogXCJjb21wb25lbnREaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIGlmICghX3NhZmVIVE1MRWxlbWVudC5jYW5Vc2VET00pIHJldHVybjtcblxuICAgICAgaWYgKCFpc1JlYWN0MTYpIHtcbiAgICAgICAgdGhpcy5ub2RlID0gY3JlYXRlSFRNTEVsZW1lbnQoXCJkaXZcIik7XG4gICAgICB9XG4gICAgICB0aGlzLm5vZGUuY2xhc3NOYW1lID0gdGhpcy5wcm9wcy5wb3J0YWxDbGFzc05hbWU7XG5cbiAgICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnRFbGVtZW50KHRoaXMucHJvcHMucGFyZW50U2VsZWN0b3IpO1xuICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHRoaXMubm9kZSk7XG5cbiAgICAgICFpc1JlYWN0MTYgJiYgdGhpcy5yZW5kZXJQb3J0YWwodGhpcy5wcm9wcyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldFNuYXBzaG90QmVmb3JlVXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNuYXBzaG90QmVmb3JlVXBkYXRlKHByZXZQcm9wcykge1xuICAgICAgdmFyIHByZXZQYXJlbnQgPSBnZXRQYXJlbnRFbGVtZW50KHByZXZQcm9wcy5wYXJlbnRTZWxlY3Rvcik7XG4gICAgICB2YXIgbmV4dFBhcmVudCA9IGdldFBhcmVudEVsZW1lbnQodGhpcy5wcm9wcy5wYXJlbnRTZWxlY3Rvcik7XG4gICAgICByZXR1cm4geyBwcmV2UGFyZW50OiBwcmV2UGFyZW50LCBuZXh0UGFyZW50OiBuZXh0UGFyZW50IH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudERpZFVwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBfLCBzbmFwc2hvdCkge1xuICAgICAgaWYgKCFfc2FmZUhUTUxFbGVtZW50LmNhblVzZURPTSkgcmV0dXJuO1xuICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgaXNPcGVuID0gX3Byb3BzLmlzT3BlbixcbiAgICAgICAgICBwb3J0YWxDbGFzc05hbWUgPSBfcHJvcHMucG9ydGFsQ2xhc3NOYW1lO1xuXG5cbiAgICAgIGlmIChwcmV2UHJvcHMucG9ydGFsQ2xhc3NOYW1lICE9PSBwb3J0YWxDbGFzc05hbWUpIHtcbiAgICAgICAgdGhpcy5ub2RlLmNsYXNzTmFtZSA9IHBvcnRhbENsYXNzTmFtZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHByZXZQYXJlbnQgPSBzbmFwc2hvdC5wcmV2UGFyZW50LFxuICAgICAgICAgIG5leHRQYXJlbnQgPSBzbmFwc2hvdC5uZXh0UGFyZW50O1xuXG4gICAgICBpZiAobmV4dFBhcmVudCAhPT0gcHJldlBhcmVudCkge1xuICAgICAgICBwcmV2UGFyZW50LnJlbW92ZUNoaWxkKHRoaXMubm9kZSk7XG4gICAgICAgIG5leHRQYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICAgIH1cblxuICAgICAgLy8gU3RvcCB1bm5lY2Vzc2FyeSByZW5kZXJzIGlmIG1vZGFsIGlzIHJlbWFpbmluZyBjbG9zZWRcbiAgICAgIGlmICghcHJldlByb3BzLmlzT3BlbiAmJiAhaXNPcGVuKSByZXR1cm47XG5cbiAgICAgICFpc1JlYWN0MTYgJiYgdGhpcy5yZW5kZXJQb3J0YWwodGhpcy5wcm9wcyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxVbm1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgaWYgKCFfc2FmZUhUTUxFbGVtZW50LmNhblVzZURPTSB8fCAhdGhpcy5ub2RlIHx8ICF0aGlzLnBvcnRhbCkgcmV0dXJuO1xuXG4gICAgICB2YXIgc3RhdGUgPSB0aGlzLnBvcnRhbC5zdGF0ZTtcbiAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgdmFyIGNsb3Nlc0F0ID0gc3RhdGUuaXNPcGVuICYmIHRoaXMucHJvcHMuY2xvc2VUaW1lb3V0TVMgJiYgKHN0YXRlLmNsb3Nlc0F0IHx8IG5vdyArIHRoaXMucHJvcHMuY2xvc2VUaW1lb3V0TVMpO1xuXG4gICAgICBpZiAoY2xvc2VzQXQpIHtcbiAgICAgICAgaWYgKCFzdGF0ZS5iZWZvcmVDbG9zZSkge1xuICAgICAgICAgIHRoaXMucG9ydGFsLmNsb3NlV2l0aFRpbWVvdXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldFRpbWVvdXQodGhpcy5yZW1vdmVQb3J0YWwsIGNsb3Nlc0F0IC0gbm93KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVtb3ZlUG9ydGFsKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICBpZiAoIV9zYWZlSFRNTEVsZW1lbnQuY2FuVXNlRE9NIHx8ICFpc1JlYWN0MTYpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5ub2RlICYmIGlzUmVhY3QxNikge1xuICAgICAgICB0aGlzLm5vZGUgPSBjcmVhdGVIVE1MRWxlbWVudChcImRpdlwiKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGNyZWF0ZVBvcnRhbCA9IGdldENyZWF0ZVBvcnRhbCgpO1xuICAgICAgcmV0dXJuIGNyZWF0ZVBvcnRhbChfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfTW9kYWxQb3J0YWwyLmRlZmF1bHQsIF9leHRlbmRzKHtcbiAgICAgICAgcmVmOiB0aGlzLnBvcnRhbFJlZixcbiAgICAgICAgZGVmYXVsdFN0eWxlczogTW9kYWwuZGVmYXVsdFN0eWxlc1xuICAgICAgfSwgdGhpcy5wcm9wcykpLCB0aGlzLm5vZGUpO1xuICAgIH1cbiAgfV0sIFt7XG4gICAga2V5OiBcInNldEFwcEVsZW1lbnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QXBwRWxlbWVudChlbGVtZW50KSB7XG4gICAgICBhcmlhQXBwSGlkZXIuc2V0RWxlbWVudChlbGVtZW50KTtcbiAgICB9XG5cbiAgICAvKiBlc2xpbnQtZGlzYWJsZSByZWFjdC9uby11bnVzZWQtcHJvcC10eXBlcyAqL1xuXG4gICAgLyogZXNsaW50LWVuYWJsZSByZWFjdC9uby11bnVzZWQtcHJvcC10eXBlcyAqL1xuXG4gIH1dKTtcblxuICByZXR1cm4gTW9kYWw7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5Nb2RhbC5wcm9wVHlwZXMgPSB7XG4gIGlzT3BlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLmlzUmVxdWlyZWQsXG4gIHN0eWxlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnNoYXBlKHtcbiAgICBjb250ZW50OiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgICBvdmVybGF5OiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdFxuICB9KSxcbiAgcG9ydGFsQ2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgYm9keU9wZW5DbGFzc05hbWU6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLFxuICBodG1sT3BlbkNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGNsYXNzTmFtZTogX3Byb3BUeXBlczIuZGVmYXVsdC5vbmVPZlR5cGUoW19wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLCBfcHJvcFR5cGVzMi5kZWZhdWx0LnNoYXBlKHtcbiAgICBiYXNlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIGFmdGVyT3BlbjogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBiZWZvcmVDbG9zZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcuaXNSZXF1aXJlZFxuICB9KV0pLFxuICBvdmVybGF5Q2xhc3NOYW1lOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9uZU9mVHlwZShbX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsIF9wcm9wVHlwZXMyLmRlZmF1bHQuc2hhcGUoe1xuICAgIGJhc2U6IF9wcm9wVHlwZXMyLmRlZmF1bHQuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgYWZ0ZXJPcGVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIGJlZm9yZUNsb3NlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZy5pc1JlcXVpcmVkXG4gIH0pXSksXG4gIGFwcEVsZW1lbnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQub25lT2ZUeXBlKFtfcHJvcFR5cGVzMi5kZWZhdWx0Lmluc3RhbmNlT2YoX3NhZmVIVE1MRWxlbWVudDIuZGVmYXVsdCksIF9wcm9wVHlwZXMyLmRlZmF1bHQuaW5zdGFuY2VPZihfc2FmZUhUTUxFbGVtZW50LlNhZmVIVE1MQ29sbGVjdGlvbiksIF9wcm9wVHlwZXMyLmRlZmF1bHQuaW5zdGFuY2VPZihfc2FmZUhUTUxFbGVtZW50LlNhZmVOb2RlTGlzdCksIF9wcm9wVHlwZXMyLmRlZmF1bHQuYXJyYXlPZihfcHJvcFR5cGVzMi5kZWZhdWx0Lmluc3RhbmNlT2YoX3NhZmVIVE1MRWxlbWVudDIuZGVmYXVsdCkpXSksXG4gIG9uQWZ0ZXJPcGVuOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIG9uUmVxdWVzdENsb3NlOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIGNsb3NlVGltZW91dE1TOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm51bWJlcixcbiAgYXJpYUhpZGVBcHA6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgc2hvdWxkRm9jdXNBZnRlclJlbmRlcjogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBzaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIHNob3VsZFJldHVybkZvY3VzQWZ0ZXJDbG9zZTogX3Byb3BUeXBlczIuZGVmYXVsdC5ib29sLFxuICBwcmV2ZW50U2Nyb2xsOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmJvb2wsXG4gIHBhcmVudFNlbGVjdG9yOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIGFyaWE6IF9wcm9wVHlwZXMyLmRlZmF1bHQub2JqZWN0LFxuICBkYXRhOiBfcHJvcFR5cGVzMi5kZWZhdWx0Lm9iamVjdCxcbiAgcm9sZTogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIGNvbnRlbnRMYWJlbDogX3Byb3BUeXBlczIuZGVmYXVsdC5zdHJpbmcsXG4gIHNob3VsZENsb3NlT25Fc2M6IF9wcm9wVHlwZXMyLmRlZmF1bHQuYm9vbCxcbiAgb3ZlcmxheVJlZjogX3Byb3BUeXBlczIuZGVmYXVsdC5mdW5jLFxuICBjb250ZW50UmVmOiBfcHJvcFR5cGVzMi5kZWZhdWx0LmZ1bmMsXG4gIGlkOiBfcHJvcFR5cGVzMi5kZWZhdWx0LnN0cmluZyxcbiAgb3ZlcmxheUVsZW1lbnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuYyxcbiAgY29udGVudEVsZW1lbnQ6IF9wcm9wVHlwZXMyLmRlZmF1bHQuZnVuY1xufTtcbk1vZGFsLmRlZmF1bHRQcm9wcyA9IHtcbiAgaXNPcGVuOiBmYWxzZSxcbiAgcG9ydGFsQ2xhc3NOYW1lOiBwb3J0YWxDbGFzc05hbWUsXG4gIGJvZHlPcGVuQ2xhc3NOYW1lOiBib2R5T3BlbkNsYXNzTmFtZSxcbiAgcm9sZTogXCJkaWFsb2dcIixcbiAgYXJpYUhpZGVBcHA6IHRydWUsXG4gIGNsb3NlVGltZW91dE1TOiAwLFxuICBzaG91bGRGb2N1c0FmdGVyUmVuZGVyOiB0cnVlLFxuICBzaG91bGRDbG9zZU9uRXNjOiB0cnVlLFxuICBzaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrOiB0cnVlLFxuICBzaG91bGRSZXR1cm5Gb2N1c0FmdGVyQ2xvc2U6IHRydWUsXG4gIHByZXZlbnRTY3JvbGw6IGZhbHNlLFxuICBwYXJlbnRTZWxlY3RvcjogZnVuY3Rpb24gcGFyZW50U2VsZWN0b3IoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmJvZHk7XG4gIH0sXG4gIG92ZXJsYXlFbGVtZW50OiBmdW5jdGlvbiBvdmVybGF5RWxlbWVudChwcm9wcywgY29udGVudEVsKSB7XG4gICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuICAgICAgXCJkaXZcIixcbiAgICAgIHByb3BzLFxuICAgICAgY29udGVudEVsXG4gICAgKTtcbiAgfSxcbiAgY29udGVudEVsZW1lbnQ6IGZ1bmN0aW9uIGNvbnRlbnRFbGVtZW50KHByb3BzLCBjaGlsZHJlbikge1xuICAgIHJldHVybiBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcbiAgICAgIFwiZGl2XCIsXG4gICAgICBwcm9wcyxcbiAgICAgIGNoaWxkcmVuXG4gICAgKTtcbiAgfVxufTtcbk1vZGFsLmRlZmF1bHRTdHlsZXMgPSB7XG4gIG92ZXJsYXk6IHtcbiAgICBwb3NpdGlvbjogXCJmaXhlZFwiLFxuICAgIHRvcDogMCxcbiAgICBsZWZ0OiAwLFxuICAgIHJpZ2h0OiAwLFxuICAgIGJvdHRvbTogMCxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSgyNTUsIDI1NSwgMjU1LCAwLjc1KVwiXG4gIH0sXG4gIGNvbnRlbnQ6IHtcbiAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgIHRvcDogXCI0MHB4XCIsXG4gICAgbGVmdDogXCI0MHB4XCIsXG4gICAgcmlnaHQ6IFwiNDBweFwiLFxuICAgIGJvdHRvbTogXCI0MHB4XCIsXG4gICAgYm9yZGVyOiBcIjFweCBzb2xpZCAjY2NjXCIsXG4gICAgYmFja2dyb3VuZDogXCIjZmZmXCIsXG4gICAgb3ZlcmZsb3c6IFwiYXV0b1wiLFxuICAgIFdlYmtpdE92ZXJmbG93U2Nyb2xsaW5nOiBcInRvdWNoXCIsXG4gICAgYm9yZGVyUmFkaXVzOiBcIjRweFwiLFxuICAgIG91dGxpbmU6IFwibm9uZVwiLFxuICAgIHBhZGRpbmc6IFwiMjBweFwiXG4gIH1cbn07XG5cblxuKDAsIF9yZWFjdExpZmVjeWNsZXNDb21wYXQucG9seWZpbGwpKE1vZGFsKTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICBNb2RhbC5zZXRDcmVhdGVIVE1MRWxlbWVudCA9IGZ1bmN0aW9uIChmbikge1xuICAgIHJldHVybiBjcmVhdGVIVE1MRWxlbWVudCA9IGZuO1xuICB9O1xufVxuXG5leHBvcnRzLmRlZmF1bHQgPSBNb2RhbDsiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9Nb2RhbCA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvTW9kYWxcIik7XG5cbnZhciBfTW9kYWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTW9kYWwpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5leHBvcnRzLmRlZmF1bHQgPSBfTW9kYWwyLmRlZmF1bHQ7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdOyIsImltcG9ydCB7IFByb2plY3RNYW5hZ2VyIH0gZnJvbSAnLi4vbWFuYWdlcnMvUHJvamVjdE1hbmFnZXInXG5cbi8qKlxuICogZ2V0U2NlbmUgdXNlZCB0byBDYWxsaW5nIGFwaSB0byBnZXQgc2NlbmUgZGF0YSB1c2luZyBpZC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAYXV0aG9yIEFiaGlzaGVrIFBhdGhha1xuICovXG5leHBvcnQgY29uc3QgZ2V0U2NlbmUgPSBhc3luYyAoc2NlbmVJZCk6IFByb21pc2U8SlNPTj4gPT4ge1xuICBsZXQganNvblxuICB0cnkge1xuICAgIGpzb24gPSBhd2FpdCBQcm9qZWN0TWFuYWdlci5pbnN0YW5jZS5mZWF0aGVyc0NsaWVudC5zZXJ2aWNlKCdwcm9qZWN0JykuZ2V0KHNjZW5lSWQpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coXCJDYW4ndCBnZXQgVVJMIGZyb20gaWRcIiArIGVycm9yKVxuICAgIHRocm93IG5ldyBFcnJvcihlcnJvcilcbiAgfVxuICByZXR1cm4ganNvbi5zY2VuZXNbMF1cbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcblxuLyoqXG4gKiBpbml0aWFsaXppbmcgZGVmYXVsdFNldHRpbmdzIHdpdGggZW1wdHkgY29udGV4dC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdFNldHRpbmdzID0ge31cblxuLyoqXG4gKiBTZXR0aW5nc0NvbnRleHQgY3JlYXRpbmcgcmVhY3QgY29udGV4dC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbmNvbnN0IFNldHRpbmdzQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoe1xuICBzZXR0aW5nczogZGVmYXVsdFNldHRpbmdzLFxuICB1cGRhdGVTZXR0aW5nOiAoKSA9PiB7fVxufSlcblxuLyoqXG4gKiBTZXR0aW5nc0NvbnRleHRQcm92aWRlciBwcm92aWRlcyBjb21wb25lbnQgY29udGV4dCB2YWx1ZS5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbmV4cG9ydCBjb25zdCBTZXR0aW5nc0NvbnRleHRQcm92aWRlciA9IFNldHRpbmdzQ29udGV4dC5Qcm92aWRlclxuXG4vKipcbiAqIHdpdGhTZXR0aW5ncyBzZXR0aW5nIGNvbXBvbmVudCBjb250ZXh0IHZhbHVlLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhTZXR0aW5ncyhDb21wb25lbnQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIFNldHRpbmdzQ29udGV4dENvbXBvbmVudChwcm9wcykge1xuICAgIHJldHVybiA8U2V0dGluZ3NDb250ZXh0LkNvbnN1bWVyPnsoY3R4KSA9PiA8Q29tcG9uZW50IHsuLi5wcm9wc30gey4uLmN0eH0gLz59PC9TZXR0aW5nc0NvbnRleHQuQ29uc3VtZXI+XG4gIH1cbn1cbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCBEaWFsb2cgZnJvbSAnLi9EaWFsb2cnXG5cbi8qKlxuICogRGVjbGFyaW5nIHByb3BzIGZvciBDb25maXJtRGlhbG9nIGNvbXBvbmVudC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7aW50ZXJmYWNlfVxuICovXG5pbnRlcmZhY2UgUHJvcHMge1xuICB0aXRsZT9cbiAgbWVzc2FnZT9cbiAgdGFnP1xuICBvbkNhbmNlbD9cbiAgY2FuY2VsTGFiZWw/XG4gIG9uQ29uZmlybT9cbiAgY29uZmlybUxhYmVsP1xuICBib3R0b21OYXY/XG59XG5cbi8qKlxuICogQ29uZmlybURpYWxvZyBmdW5jdGlvbiBjb21wb25lbnQgdXNlZCB0byBzaG93IGRpYWxvZy5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAcGFyYW0gICAgICAge2ludGVyZmFjZX0gcHJvcHNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgZnVuY3Rpb24gQ29uZmlybURpYWxvZyhwcm9wczogUHJvcHMpIHtcbiAgY29uc3QgeyBtZXNzYWdlIH0gPSBwcm9wc1xuICByZXR1cm4gPERpYWxvZyB7Li4ucHJvcHN9PnttZXNzYWdlfTwvRGlhbG9nPlxufVxuQ29uZmlybURpYWxvZy5kZWZhdWx0UHJvcHMgPSB7XG4gIHRpdGxlOiAnQ29uZmlybScsXG4gIG1lc3NhZ2U6ICdDb25maXJtIGFjdGlvbj8nXG59XG5leHBvcnQgZGVmYXVsdCBDb25maXJtRGlhbG9nXG4iLCJpbXBvcnQgUmVhY3QsIHsgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJ1xuXG4vKipcbiAqIEJsb2NrRm9ybUZpZWxkIHVzZWQgdG8gcHJvdmlkZSBzdHlsZXMgZm9yIGJsb2NrIEZvcm1GaWVsZCBkaXYuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge3N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IEJsb2NrRm9ybUZpZWxkID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgbWFyZ2luLWJvdHRvbTogMTZweDtcblxuICBsYWJlbCB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICB9XG5gXG5cbi8qKlxuICogSW5saW5lRm9ybUZpZWxkIHVzZWQgdG8gcHJvdmlkZSBzdHlsZXMgZm9yIGlubGluZSBGb3JtRmllbGQgZGl2LlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtzdHlsZWQgY29tcG9uZW50fVxuICovXG5jb25zdCBJbmxpbmVGb3JtRmllbGQgPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG5cbiAgJiA+ICoge1xuICAgIG1hcmdpbi1sZWZ0OiAzMHB4O1xuICAgIGFsaWduLXNlbGY6IGNlbnRlcjtcbiAgfVxuXG4gICYgPiA6Zmlyc3QtY2hpbGQge1xuICAgIG1hcmdpbi1sZWZ0OiAwO1xuICB9XG5gXG5cbmludGVyZmFjZSBGb3JtRmllbGRQcm9wIHtcbiAgaW5saW5lPzogYW55XG4gIGNoaWxkcmVuPzogUmVhY3ROb2RlXG59XG5cbi8qKlxuICogRm9ybUZpZWxkIGZ1bmN0aW9uIGNvbXBvbmVudCB1c2VkIHRvIHJlbmRlciBmb3JtIGZpZWxkcy5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAcGFyYW0gICAgICAge2Jvb2xlYW59IGlubGluZVxuICogQHBhcmFtICAgICAgIHtzdHJpbmd9IGNoaWxkcmVuXG4gKiBAcGFyYW0gICAgICAge2FueX0gcmVzdFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBGb3JtRmllbGQoeyBpbmxpbmUsIGNoaWxkcmVuLCAuLi5yZXN0IH06IEZvcm1GaWVsZFByb3ApIHtcbiAgaWYgKGlubGluZSkge1xuICAgIHJldHVybiA8SW5saW5lRm9ybUZpZWxkIHsuLi5yZXN0fT57Y2hpbGRyZW59PC9JbmxpbmVGb3JtRmllbGQ+XG4gIH1cblxuICByZXR1cm4gPEJsb2NrRm9ybUZpZWxkIHsuLi5yZXN0fT57Y2hpbGRyZW59PC9CbG9ja0Zvcm1GaWVsZD5cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybUZpZWxkXG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgQm9vbGVhbklucHV0IGZyb20gJy4uL2lucHV0cy9Cb29sZWFuSW5wdXQnXG5pbXBvcnQgRm9ybUZpZWxkIGZyb20gJy4uL2lucHV0cy9Gb3JtRmllbGQnXG5pbXBvcnQgRGlhbG9nIGZyb20gJy4vRGlhbG9nJ1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cydcbmltcG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSAncmVhY3QtaTE4bmV4dCdcblxuLyoqXG4gKiBGb3JtQ29udGFpbmVyIHVzZWQgYXMgYSB3cmFwcGVyIGVsZW1lbnQgZm9yIEZvcm1GaWVsZHMuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBDb21wb25lbnR9XG4gKi9cbmNvbnN0IEZvcm1Db250YWluZXIgPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBmbGV4OiAxO1xuYFxuXG4vKipcbiAqIEV4cG9ydFByb2plY3REaWFsb2cgdXNlZCB0byBwcm92aWRlIHZpZXcgY29udGFpbmluZyBGb3JtRmllbGRzLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAgICAgICB7T2JqZWN0fSBkZWZhdWx0T3B0aW9uc1xuICogQHBhcmFtICAgICAgIHtmdW5jdGlvbn0gb25Db25maXJtXG4gKiBAcGFyYW0gICAgICAge2Z1bmN0aW9ufSBvbkNhbmNlbFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBFeHBvcnRQcm9qZWN0RGlhbG9nKHsgZGVmYXVsdE9wdGlvbnMsIG9uQ29uZmlybSwgb25DYW5jZWwgfSkge1xuICBjb25zdCB7IHQgfSA9IHVzZVRyYW5zbGF0aW9uKClcblxuICAvLyBpbml0aWFsaXppbmcgb3B0aW9ucyB1c2luZyBkZWZhdWx0T3B0aW9uc1xuICBjb25zdCBbb3B0aW9ucywgc2V0T3B0aW9uc10gPSB1c2VTdGF0ZShkZWZhdWx0T3B0aW9ucylcblxuICAvL2NhbGxiYWNrIGZ1bmN0aW9uIHVzZWQgdG8gaGFuZGxlIGNoYW5nZXMgaW4gb3B0aW9ucy5jb21iaW5lZE1lc2ggcHJvcGVydHlcbiAgY29uc3Qgb25DaGFuZ2VDb21iaW5lTWVzaGVzID0gdXNlQ2FsbGJhY2soXG4gICAgKGNvbWJpbmVNZXNoZXMpID0+IHtcbiAgICAgIHNldE9wdGlvbnMoeyAuLi5vcHRpb25zLCBjb21iaW5lTWVzaGVzIH0pXG4gICAgfSxcbiAgICBbb3B0aW9ucywgc2V0T3B0aW9uc11cbiAgKVxuXG4gIC8vIGNhbGxiYWNrIGZ1bmN0aW9uIHVzZWQgdG8gaGFuZGxlIGNoYW5nZSBpbiBvcHRpb25zLnJlbW92ZVVudXNlZE9iamVjdHMgcHJvcGVydHlcbiAgY29uc3Qgb25DaGFuZ2VSZW1vdmVVbnVzZWRPYmplY3RzID0gdXNlQ2FsbGJhY2soXG4gICAgKHJlbW92ZVVudXNlZE9iamVjdHMpID0+IHtcbiAgICAgIHNldE9wdGlvbnMoeyAuLi5vcHRpb25zLCByZW1vdmVVbnVzZWRPYmplY3RzIH0pXG4gICAgfSxcbiAgICBbb3B0aW9ucywgc2V0T3B0aW9uc11cbiAgKVxuXG4gIC8vIGNhbGxiYWNrIGZ1bmN0aW9uIHVzZWQgdG8gaGFuZGxlIGNvbmZpcm1hdGlvbiBvbiBkaWFsb2cuXG4gIGNvbnN0IG9uQ29uZmlybUNhbGxiYWNrID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgb25Db25maXJtKG9wdGlvbnMpXG4gICAgfSxcbiAgICBbb3B0aW9ucywgb25Db25maXJtXVxuICApXG5cbiAgLy8gY2FsbGJhY2sgZnVuY3Rpb250byBoYW5kbGUgY2FuY2VsIG9mIGNvbmZpcm1hdGlvbiBkaWFsb2cuXG4gIGNvbnN0IG9uQ2FuY2VsQ2FsbGJhY2sgPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBvbkNhbmNlbCgpXG4gICAgfSxcbiAgICBbb25DYW5jZWxdXG4gIClcblxuICAvLyByZXR1cm5pbmcgdmlldyBjb250YWluaW5nIEZvcm1GaWVsZHNcbiAgcmV0dXJuIChcbiAgICA8RGlhbG9nXG4gICAgICB0aXRsZT17dCgnZWRpdG9yOmRpYWxvZy5leHBvcnRQcm9qZWN0LnRpdGxlJyl9XG4gICAgICBvbkNvbmZpcm09e29uQ29uZmlybUNhbGxiYWNrfVxuICAgICAgb25DYW5jZWw9e29uQ2FuY2VsQ2FsbGJhY2t9XG4gICAgICBjb25maXJtTGFiZWw9e3QoJ2VkaXRvcjpkaWFsb2cuZXhwb3J0UHJvamVjdC5sYmwtY29uZmlybScpfVxuICAgID5cbiAgICAgIDxGb3JtQ29udGFpbmVyPlxuICAgICAgICA8Rm9ybUZpZWxkPlxuICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiY29tYmluZU1lc2hlc1wiPnt0KCdlZGl0b3I6ZGlhbG9nLmV4cG9ydFByb2plY3QubGJsLWNvbWJpbmVNZXNoJyl9PC9sYWJlbD5cbiAgICAgICAgICA8Qm9vbGVhbklucHV0IGlkPVwiY29tYmluZU1lc2hlc1wiIHZhbHVlPXtvcHRpb25zLmNvbWJpbmVNZXNoZXN9IG9uQ2hhbmdlPXtvbkNoYW5nZUNvbWJpbmVNZXNoZXN9IC8+XG4gICAgICAgIDwvRm9ybUZpZWxkPlxuICAgICAgICA8Rm9ybUZpZWxkPlxuICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwicmVtb3ZlVW51c2VkT2JqZWN0c1wiPnt0KCdlZGl0b3I6ZGlhbG9nLmV4cG9ydFByb2plY3QubGJsLXJlbW92ZVVudXNlZCcpfTwvbGFiZWw+XG4gICAgICAgICAgPEJvb2xlYW5JbnB1dFxuICAgICAgICAgICAgaWQ9XCJyZW1vdmVVbnVzZWRPYmplY3RzXCJcbiAgICAgICAgICAgIHZhbHVlPXtvcHRpb25zLnJlbW92ZVVudXNlZE9iamVjdHN9XG4gICAgICAgICAgICBvbkNoYW5nZT17b25DaGFuZ2VSZW1vdmVVbnVzZWRPYmplY3RzfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvRm9ybUZpZWxkPlxuICAgICAgPC9Gb3JtQ29udGFpbmVyPlxuICAgIDwvRGlhbG9nPlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IEV4cG9ydFByb2plY3REaWFsb2dcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCBEaWFsb2cgZnJvbSAnLi9EaWFsb2cnXG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJ1xuXG4vKipcbiAqIExlZnRDb250ZW50IHVzZWQgdG8gcHJvdmlkZSBzdHlsZXMgZm9yIGxlZnQgZGl2LlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtTdHlsZWQgY29tcG9uZW50fVxuICovXG5jb25zdCBMZWZ0Q29udGVudCA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIHdpZHRoOiAzNjBweDtcbiAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogaW5oZXJpdDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZzogMzBweDtcblxuICBpbWcge1xuICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgfVxuYFxuXG4vKipcbiAqIFJpZ2h0Q29udGVudCB1c2VkIHRvIHByb3ZpZGUgc3R5bGVzIHRvIFJpZ2h0IGRpdi5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7U3R5bGVkIGNvbXBvbmVudH1cbiAqL1xuY29uc3QgUmlnaHRDb250ZW50ID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgZmxleDogMTtcbiAgcGFkZGluZzogMzBweCAzMHB4O1xuYFxuXG4vKipcbiAqIFByZXZpZXdEaWFsb2cgcHJvdmlkZXMgdGhlIGRpYWxvZyBjb250YWluaW5nIGltYWdlIG9uIGxlZnQgc2lkZSBhbmQgY29udGVudCBvbiByaWdodCBzaWRlLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAgICAgICB7U3RyaW5nfSBpbWFnZVNyY1xuICogQHBhcmFtICAgICAgIHtub2RlfSBjaGlsZHJlbiBbY29udGFpbnMgY29tcG9uZW50IHdpdGggbWVzc2FnZSBjb250ZW50XVxuICogQHBhcmFtICAgICAgIHthbnl9IHByb3BzXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFByZXZpZXdEaWFsb2coeyBpbWFnZVNyYywgY2hpbGRyZW4sIC4uLnByb3BzIH0pIHtcbiAgcmV0dXJuIChcbiAgICA8RGlhbG9nIHsuLi5wcm9wc30+XG4gICAgICA8TGVmdENvbnRlbnQ+XG4gICAgICAgIDxpbWcgc3JjPXtpbWFnZVNyY30gLz5cbiAgICAgIDwvTGVmdENvbnRlbnQ+XG4gICAgICA8UmlnaHRDb250ZW50PntjaGlsZHJlbn08L1JpZ2h0Q29udGVudD5cbiAgICA8L0RpYWxvZz5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBQcmV2aWV3RGlhbG9nXG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgU3RyaW5nSW5wdXQgZnJvbSAnLi4vaW5wdXRzL1N0cmluZ0lucHV0J1xuaW1wb3J0IEZvcm1GaWVsZCBmcm9tICcuLi9pbnB1dHMvRm9ybUZpZWxkJ1xuaW1wb3J0IFByZXZpZXdEaWFsb2cgZnJvbSAnLi9QcmV2aWV3RGlhbG9nJ1xuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tICdyZWFjdC1pMThuZXh0J1xuXG4vKipcbiAqIFNhdmVOZXdQcm9qZWN0RGlhbG9nIHVzZWQgdG8gc2hvdyBkaWFsb2cgd2hlbiB0byBzYXZlIG5ldyBwcm9qZWN0LlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAgICAgICB7c3RyaW5nfSB0aHVtYm5haWxVcmxcbiAqIEBwYXJhbSAgICAgICB7c3RyaW5nfSBpbml0aWFsTmFtZVxuICogQHBhcmFtICAgICAgIHtmdW5jdGlvbn0gb25Db25maXJtXG4gKiBAcGFyYW0gICAgICAge2Z1bmN0aW9ufSBvbkNhbmNlbFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBTYXZlTmV3UHJvamVjdERpYWxvZyh7IHRodW1ibmFpbFVybCwgaW5pdGlhbE5hbWUsIG9uQ29uZmlybSwgb25DYW5jZWwgfSkge1xuICBjb25zdCBbbmFtZSwgc2V0TmFtZV0gPSB1c2VTdGF0ZShpbml0aWFsTmFtZSlcbiAgY29uc3QgeyB0IH0gPSB1c2VUcmFuc2xhdGlvbigpXG5cbiAgY29uc3Qgb25DaGFuZ2VOYW1lID0gdXNlQ2FsbGJhY2soXG4gICAgKHZhbHVlKSA9PiB7XG4gICAgICBzZXROYW1lKHZhbHVlKVxuICAgIH0sXG4gICAgW3NldE5hbWVdXG4gIClcblxuICAvKipcbiAgICogb25Db25maXJtQ2FsbGJhY2sgY2FsbGJhY2sgZnVuY3Rpb24gaXMgdXNlZCBoYW5kbGUgY29uZmlybSBkaWFsb2cuXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3Qgb25Db25maXJtQ2FsbGJhY2sgPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBvbkNvbmZpcm0oeyBuYW1lIH0pXG4gICAgfSxcbiAgICBbbmFtZSwgb25Db25maXJtXVxuICApXG5cbiAgLyoqXG4gICAqIG9uQ2FuY2VsQ2FsbGJhY2sgY2FsbGJhY2sgZnVuY3Rpb24gdXNlZCB0byBoYW5kbGUgY2FuY2VsIG9mIGRpYWxvZy5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBjb25zdCBvbkNhbmNlbENhbGxiYWNrID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgb25DYW5jZWwoKVxuICAgIH0sXG4gICAgW29uQ2FuY2VsXVxuICApXG5cbiAgLy9yZXR1cm5pbmcgdmlldyBmb3IgZGlhbG9nIHZpZXcuXG4gIHJldHVybiAoXG4gICAgPFByZXZpZXdEaWFsb2dcbiAgICAgIGltYWdlU3JjPXt0aHVtYm5haWxVcmx9XG4gICAgICB0aXRsZT17dCgnZWRpdG9yOmRpYWxvZy5zYXZlTmV3UHJvamVjdC50aXRsZScpfVxuICAgICAgb25Db25maXJtPXtvbkNvbmZpcm1DYWxsYmFja31cbiAgICAgIG9uQ2FuY2VsPXtvbkNhbmNlbENhbGxiYWNrfVxuICAgICAgY29uZmlybUxhYmVsPXt0KCdlZGl0b3I6ZGlhbG9nLnNhdmVOZXdQcm9qZWN0LmxibC1jb25maXJtJyl9XG4gICAgPlxuICAgICAgPEZvcm1GaWVsZD5cbiAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJuYW1lXCI+e3QoJ2VkaXRvcjpkaWFsb2cuc2F2ZU5ld1Byb2plY3QubGJsLW5hbWUnKX08L2xhYmVsPlxuICAgICAgICA8U3RyaW5nSW5wdXRcbiAgICAgICAgICBpZD1cIm5hbWVcIlxuICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgcGF0dGVybj17J1tBLVphLXowLTktXFwnOlwiIUAjJCVeJiooKSwuP34gXXs0LDY0fSd9XG4gICAgICAgICAgdGl0bGU9e3QoJ2VkaXRvcjpkaWFsb2cuc2F2ZU5ld1Byb2plY3QuaW5mby1uYW1lJyl9XG4gICAgICAgICAgdmFsdWU9e25hbWV9XG4gICAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlTmFtZX1cbiAgICAgICAgLz5cbiAgICAgIDwvRm9ybUZpZWxkPlxuICAgIDwvUHJldmlld0RpYWxvZz5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBTYXZlTmV3UHJvamVjdERpYWxvZ1xuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlRHJhZ0xheWVyIH0gZnJvbSAncmVhY3QtZG5kJ1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cydcbmltcG9ydCB7IEl0ZW1UeXBlcyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9Bc3NldFR5cGVzJ1xuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tICdyZWFjdC1pMThuZXh0J1xuXG4vKipcbiAqIERyYWdMYXllckNvbnRhaW5lciB1c2VkIGFzIHdyYXBwZXIgZm9yIERyYWdQcmV2aWV3Q29udGFpbmVyLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtTdHlsZWQgY29tcG9uZW50fVxuICovXG5jb25zdCBEcmFnTGF5ZXJDb250YWluZXIgPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICB6LWluZGV4OiA5OTk5OTtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuYFxuXG4vKipcbiAqIERyYWdQcmV2aWV3Q29udGFpbmVyIHVzZWQgdG8gcHJvdmlkZSBzdHlsZXMgdG8gcHJldmlldyBvYmplY3QgaW4gZWRpdG9yIHZpZXcuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IERyYWdQcmV2aWV3Q29udGFpbmVyID0gKHN0eWxlZCBhcyBhbnkpLmRpdi5hdHRycygocHJvcHMpID0+ICh7XG4gIHN0eWxlOiB7XG4gICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7cHJvcHMub2Zmc2V0Lnh9cHgsICR7cHJvcHMub2Zmc2V0Lnl9cHgpYFxuICB9XG59KSlgXG4gIGJhY2tncm91bmQtY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS5ibHVlfTtcbiAgb3BhY2l0eTogMC4zO1xuICBjb2xvcjogJHsocHJvcHMpID0+IHByb3BzLnRoZW1lLnRleHR9O1xuICBwYWRkaW5nOiA0cHg7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuYFxuXG4vKipcbiAqIERyYWdMYXllciBjb21wb25lbnQgdXNlZCB0byBwcm92aWRlIGFyZWEgaW4gZWRpdG9yIHdoZXJlIHdlIGNhbiBkcmFnIGFuZCBkcm9wIGVsZW1lbnRzLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBEcmFnTGF5ZXIoKSB7XG4gIGNvbnN0IHsgdCB9ID0gdXNlVHJhbnNsYXRpb24oKVxuXG4gIC8vaW5pdGlhbGl6aW5nIGl0ZW0sIGl0ZW1UeXBlLCBjdXJyZW50T2Zmc2V0LCBpc0RyYWdnaW5nIHVzaW5nIG1vbml0b3IgcHJvcGVydGllc1xuICBjb25zdCB7IGl0ZW0sIGl0ZW1UeXBlLCBjdXJyZW50T2Zmc2V0LCBpc0RyYWdnaW5nIH0gPSB1c2VEcmFnTGF5ZXIoKG1vbml0b3IpID0+ICh7XG4gICAgaXRlbTogbW9uaXRvci5nZXRJdGVtKCksXG4gICAgaXRlbVR5cGU6IG1vbml0b3IuZ2V0SXRlbVR5cGUoKSxcbiAgICBjdXJyZW50T2Zmc2V0OiBtb25pdG9yLmdldENsaWVudE9mZnNldCgpLFxuICAgIGlzRHJhZ2dpbmc6IG1vbml0b3IuaXNEcmFnZ2luZygpXG4gIH0pKVxuXG4gIC8vY2hlY2sgaWYgbm90IGlzRGlzYWJsZWQgYW5kIG5vdCBjdXJyZW50T2Zmc2V0IHRoZW4gcmV0dXJuIG51bGxcbiAgaWYgKCFpc0RyYWdnaW5nIHx8ICFjdXJyZW50T2Zmc2V0KSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8vIERlY2xhcmluZyB2YXJpYWJsZSBwcmV2aWV3XG4gIGxldCBwcmV2aWV3XG5cbiAgLy9jaGVjayBpZiBpdGVtVHlwZSBvZiBOb2RlIGl0ZW0gdHlwZVxuICBpZiAoaXRlbVR5cGUgPT09IEl0ZW1UeXBlcy5Ob2RlKSB7XG4gICAgLy8gaWYgbXVsdGlwbGUgaXRlbXMgdGhlbiBzaG93IGl0ZW0gbGVuZ3RoIGVsc2Ugc2hvdyBuYW1lIG9mIGl0ZW1cbiAgICBpZiAoaXRlbS5tdWx0aXBsZSkge1xuICAgICAgcHJldmlldyA9IDxkaXY+e3QoJ2VkaXRvcjpkbmQubm9kZXMnLCB7IGNvdW50OiBpdGVtLnZhbHVlLmxlbmd0aCB9KX08L2Rpdj5cbiAgICB9IGVsc2Uge1xuICAgICAgcHJldmlldyA9IDxkaXY+e2l0ZW0udmFsdWUubmFtZX08L2Rpdj5cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXRlbVR5cGUgPT09IEl0ZW1UeXBlcy5Nb2RlbCkge1xuICAgIC8vY2hlY2sgaXRlbSBvZiBNb2RlbCB0eXBlXG4gICAgaWYgKGl0ZW0ubXVsdGlwbGUpIHtcbiAgICAgIC8vY2hlY2sgaWYgaXRlbSBjb250YWlucyBtdWx0aXBsZSB0aGVuIHNob3dpbmcgbGVuZ3RoIG9mIHNlbGVjdGVkIG1vZGVsc1xuICAgICAgcHJldmlldyA9IDxkaXY+e3QoJ2VkaXRvcjpkbmQubW9kZWxzJywgeyBjb3VudDogaXRlbS52YWx1ZS5sZW5ndGggfSl9PC9kaXY+XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vc2hvd2luZyBsYWJlbCBvZiB0aGUgaXRlbVxuICAgICAgcHJldmlldyA9IDxkaXY+e2l0ZW0udmFsdWUubGFiZWx9PC9kaXY+XG4gICAgfVxuICB9IGVsc2UgaWYgKGl0ZW1UeXBlID09PSBJdGVtVHlwZXMuSW1hZ2UpIHtcbiAgICAvL2NoZWNrIGZvciBpbWFnZSB0eXBlc1xuICAgIGlmIChpdGVtLm11bHRpcGxlKSB7XG4gICAgICBwcmV2aWV3ID0gPGRpdj57dCgnZWRpdG9yOmRuZC5pbWFnZXMnLCB7IGNvdW50OiBpdGVtLnZhbHVlLmxlbmd0aCB9KX08L2Rpdj5cbiAgICB9IGVsc2Uge1xuICAgICAgcHJldmlldyA9IDxkaXY+e2l0ZW0udmFsdWUubGFiZWx9PC9kaXY+XG4gICAgfVxuICB9IGVsc2UgaWYgKGl0ZW1UeXBlID09PSBJdGVtVHlwZXMuVmlkZW8pIHtcbiAgICAvL2NoZWNrIGZvciB2aWRlbyB0eXBlc1xuICAgIGlmIChpdGVtLm11bHRpcGxlKSB7XG4gICAgICBwcmV2aWV3ID0gPGRpdj57dCgnZWRpdG9yOmRuZC52aWRlb3MnLCB7IGNvdW50OiBpdGVtLnZhbHVlLmxlbmd0aCB9KX08L2Rpdj5cbiAgICB9IGVsc2Uge1xuICAgICAgcHJldmlldyA9IDxkaXY+e2l0ZW0udmFsdWUubGFiZWx9PC9kaXY+XG4gICAgfVxuICB9IGVsc2UgaWYgKGl0ZW1UeXBlID09PSBJdGVtVHlwZXMuQXVkaW8pIHtcbiAgICAvL2NoZWNrIGZvciBhdWRpbyB0eXBlc1xuICAgIGlmIChpdGVtLm11bHRpcGxlKSB7XG4gICAgICBwcmV2aWV3ID0gPGRpdj57dCgnZWRpdG9yOmRuZC5hdWRpbycsIHsgY291bnQ6IGl0ZW0udmFsdWUubGVuZ3RoIH0pfTwvZGl2PlxuICAgIH0gZWxzZSB7XG4gICAgICBwcmV2aWV3ID0gPGRpdj57aXRlbS52YWx1ZS5sYWJlbH08L2Rpdj5cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gc2hvd2luZyBpdGVtIHR5cGVcbiAgICBwcmV2aWV3ID0gPGRpdj57aXRlbS50eXBlfTwvZGl2PlxuICB9XG5cbiAgLy8gcmV0dXJuaW5nIERyYWdMYXllciB2aWV3XG4gIHJldHVybiAoXG4gICAgPERyYWdMYXllckNvbnRhaW5lcj5cbiAgICAgIDxEcmFnUHJldmlld0NvbnRhaW5lciBvZmZzZXQ9e2N1cnJlbnRPZmZzZXR9PntwcmV2aWV3fTwvRHJhZ1ByZXZpZXdDb250YWluZXI+XG4gICAgPC9EcmFnTGF5ZXJDb250YWluZXI+XG4gIClcbn1cbiIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBOb2RlRWRpdG9yIGZyb20gJy4vTm9kZUVkaXRvcidcblxudHlwZSBEZWZhdWx0Tm9kZUVkaXRvclByb3BzID0ge1xuICBub2RlPzogb2JqZWN0XG59XG5cbi8qKlxuICogRGVmYXVsdE5vZGVFZGl0b3IgIHVzZWQgdG8gcmVuZGVyIHZpZXcgd2hlbiBubyBlbGVtZW50IGlzIHNlbGVjdGVkXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICovXG5leHBvcnQgY2xhc3MgRGVmYXVsdE5vZGVFZGl0b3IgZXh0ZW5kcyBDb21wb25lbnQ8RGVmYXVsdE5vZGVFZGl0b3JQcm9wcywge30+IHtcbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiA8Tm9kZUVkaXRvciB7Li4udGhpcy5wcm9wc30gLz5cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEZWZhdWx0Tm9kZUVkaXRvclxuIiwiaW1wb3J0IF9leHRlbmRzIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHMnO1xuaW1wb3J0IF9pbmhlcml0c0xvb3NlIGZyb20gJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzTG9vc2UnO1xuaW1wb3J0IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXNzZXJ0VGhpc0luaXRpYWxpemVkJztcbmltcG9ydCBtZW1vaXplT25lIGZyb20gJ21lbW9pemUtb25lJztcbmltcG9ydCB7IGNyZWF0ZUVsZW1lbnQsIFB1cmVDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSAnQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSc7XG5cbi8vIEFuaW1hdGlvbiBmcmFtZSBiYXNlZCBpbXBsZW1lbnRhdGlvbiBvZiBzZXRUaW1lb3V0LlxuLy8gSW5zcGlyZWQgYnkgSm9lIExhbWJlcnQsIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2pvZWxhbWJlcnQvMTAwMjExNiNmaWxlLXJlcXVlc3R0aW1lb3V0LWpzXG52YXIgaGFzTmF0aXZlUGVyZm9ybWFuY2VOb3cgPSB0eXBlb2YgcGVyZm9ybWFuY2UgPT09ICdvYmplY3QnICYmIHR5cGVvZiBwZXJmb3JtYW5jZS5ub3cgPT09ICdmdW5jdGlvbic7XG52YXIgbm93ID0gaGFzTmF0aXZlUGVyZm9ybWFuY2VOb3cgPyBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBwZXJmb3JtYW5jZS5ub3coKTtcbn0gOiBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBEYXRlLm5vdygpO1xufTtcbmZ1bmN0aW9uIGNhbmNlbFRpbWVvdXQodGltZW91dElEKSB7XG4gIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRpbWVvdXRJRC5pZCk7XG59XG5mdW5jdGlvbiByZXF1ZXN0VGltZW91dChjYWxsYmFjaywgZGVsYXkpIHtcbiAgdmFyIHN0YXJ0ID0gbm93KCk7XG5cbiAgZnVuY3Rpb24gdGljaygpIHtcbiAgICBpZiAobm93KCkgLSBzdGFydCA+PSBkZWxheSkge1xuICAgICAgY2FsbGJhY2suY2FsbChudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGltZW91dElELmlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spO1xuICAgIH1cbiAgfVxuXG4gIHZhciB0aW1lb3V0SUQgPSB7XG4gICAgaWQ6IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKVxuICB9O1xuICByZXR1cm4gdGltZW91dElEO1xufVxuXG52YXIgc2l6ZSA9IC0xOyAvLyBUaGlzIHV0aWxpdHkgY29waWVkIGZyb20gXCJkb20taGVscGVyc1wiIHBhY2thZ2UuXG5cbmZ1bmN0aW9uIGdldFNjcm9sbGJhclNpemUocmVjYWxjdWxhdGUpIHtcbiAgaWYgKHJlY2FsY3VsYXRlID09PSB2b2lkIDApIHtcbiAgICByZWNhbGN1bGF0ZSA9IGZhbHNlO1xuICB9XG5cbiAgaWYgKHNpemUgPT09IC0xIHx8IHJlY2FsY3VsYXRlKSB7XG4gICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHZhciBzdHlsZSA9IGRpdi5zdHlsZTtcbiAgICBzdHlsZS53aWR0aCA9ICc1MHB4JztcbiAgICBzdHlsZS5oZWlnaHQgPSAnNTBweCc7XG4gICAgc3R5bGUub3ZlcmZsb3cgPSAnc2Nyb2xsJztcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdik7XG4gICAgc2l6ZSA9IGRpdi5vZmZzZXRXaWR0aCAtIGRpdi5jbGllbnRXaWR0aDtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdik7XG4gIH1cblxuICByZXR1cm4gc2l6ZTtcbn1cbnZhciBjYWNoZWRSVExSZXN1bHQgPSBudWxsOyAvLyBUUklDS1kgQWNjb3JkaW5nIHRvIHRoZSBzcGVjLCBzY3JvbGxMZWZ0IHNob3VsZCBiZSBuZWdhdGl2ZSBmb3IgUlRMIGFsaWduZWQgZWxlbWVudHMuXG4vLyBDaHJvbWUgZG9lcyBub3Qgc2VlbSB0byBhZGhlcmU7IGl0cyBzY3JvbGxMZWZ0IHZhbHVlcyBhcmUgcG9zaXRpdmUgKG1lYXN1cmVkIHJlbGF0aXZlIHRvIHRoZSBsZWZ0KS5cbi8vIFNhZmFyaSdzIGVsYXN0aWMgYm91bmNlIG1ha2VzIGRldGVjdGluZyB0aGlzIGV2ZW4gbW9yZSBjb21wbGljYXRlZCB3cnQgcG90ZW50aWFsIGZhbHNlIHBvc2l0aXZlcy5cbi8vIFRoZSBzYWZlc3Qgd2F5IHRvIGNoZWNrIHRoaXMgaXMgdG8gaW50ZW50aW9uYWxseSBzZXQgYSBuZWdhdGl2ZSBvZmZzZXQsXG4vLyBhbmQgdGhlbiB2ZXJpZnkgdGhhdCB0aGUgc3Vic2VxdWVudCBcInNjcm9sbFwiIGV2ZW50IG1hdGNoZXMgdGhlIG5lZ2F0aXZlIG9mZnNldC5cbi8vIElmIGl0IGRvZXMgbm90IG1hdGNoLCB0aGVuIHdlIGNhbiBhc3N1bWUgYSBub24tc3RhbmRhcmQgUlRMIHNjcm9sbCBpbXBsZW1lbnRhdGlvbi5cblxuZnVuY3Rpb24gZ2V0UlRMT2Zmc2V0VHlwZShyZWNhbGN1bGF0ZSkge1xuICBpZiAocmVjYWxjdWxhdGUgPT09IHZvaWQgMCkge1xuICAgIHJlY2FsY3VsYXRlID0gZmFsc2U7XG4gIH1cblxuICBpZiAoY2FjaGVkUlRMUmVzdWx0ID09PSBudWxsIHx8IHJlY2FsY3VsYXRlKSB7XG4gICAgdmFyIG91dGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdmFyIG91dGVyU3R5bGUgPSBvdXRlckRpdi5zdHlsZTtcbiAgICBvdXRlclN0eWxlLndpZHRoID0gJzUwcHgnO1xuICAgIG91dGVyU3R5bGUuaGVpZ2h0ID0gJzUwcHgnO1xuICAgIG91dGVyU3R5bGUub3ZlcmZsb3cgPSAnc2Nyb2xsJztcbiAgICBvdXRlclN0eWxlLmRpcmVjdGlvbiA9ICdydGwnO1xuICAgIHZhciBpbm5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHZhciBpbm5lclN0eWxlID0gaW5uZXJEaXYuc3R5bGU7XG4gICAgaW5uZXJTdHlsZS53aWR0aCA9ICcxMDBweCc7XG4gICAgaW5uZXJTdHlsZS5oZWlnaHQgPSAnMTAwcHgnO1xuICAgIG91dGVyRGl2LmFwcGVuZENoaWxkKGlubmVyRGl2KTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG91dGVyRGl2KTtcblxuICAgIGlmIChvdXRlckRpdi5zY3JvbGxMZWZ0ID4gMCkge1xuICAgICAgY2FjaGVkUlRMUmVzdWx0ID0gJ3Bvc2l0aXZlLWRlc2NlbmRpbmcnO1xuICAgIH0gZWxzZSB7XG4gICAgICBvdXRlckRpdi5zY3JvbGxMZWZ0ID0gMTtcblxuICAgICAgaWYgKG91dGVyRGl2LnNjcm9sbExlZnQgPT09IDApIHtcbiAgICAgICAgY2FjaGVkUlRMUmVzdWx0ID0gJ25lZ2F0aXZlJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhY2hlZFJUTFJlc3VsdCA9ICdwb3NpdGl2ZS1hc2NlbmRpbmcnO1xuICAgICAgfVxuICAgIH1cblxuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQob3V0ZXJEaXYpO1xuICAgIHJldHVybiBjYWNoZWRSVExSZXN1bHQ7XG4gIH1cblxuICByZXR1cm4gY2FjaGVkUlRMUmVzdWx0O1xufVxuXG52YXIgSVNfU0NST0xMSU5HX0RFQk9VTkNFX0lOVEVSVkFMID0gMTUwO1xuXG52YXIgZGVmYXVsdEl0ZW1LZXkgPSBmdW5jdGlvbiBkZWZhdWx0SXRlbUtleShfcmVmKSB7XG4gIHZhciBjb2x1bW5JbmRleCA9IF9yZWYuY29sdW1uSW5kZXgsXG4gICAgICBkYXRhID0gX3JlZi5kYXRhLFxuICAgICAgcm93SW5kZXggPSBfcmVmLnJvd0luZGV4O1xuICByZXR1cm4gcm93SW5kZXggKyBcIjpcIiArIGNvbHVtbkluZGV4O1xufTsgLy8gSW4gREVWIG1vZGUsIHRoaXMgU2V0IGhlbHBzIHVzIG9ubHkgbG9nIGEgd2FybmluZyBvbmNlIHBlciBjb21wb25lbnQgaW5zdGFuY2UuXG4vLyBUaGlzIGF2b2lkcyBzcGFtbWluZyB0aGUgY29uc29sZSBldmVyeSB0aW1lIGEgcmVuZGVyIGhhcHBlbnMuXG5cblxudmFyIGRldldhcm5pbmdzT3ZlcnNjYW5Db3VudCA9IG51bGw7XG52YXIgZGV2V2FybmluZ3NPdmVyc2NhblJvd3NDb2x1bW5zQ291bnQgPSBudWxsO1xudmFyIGRldldhcm5pbmdzVGFnTmFtZSA9IG51bGw7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LldlYWtTZXQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgZGV2V2FybmluZ3NPdmVyc2NhbkNvdW50ID1cbiAgICAvKiNfX1BVUkVfXyovXG4gICAgbmV3IFdlYWtTZXQoKTtcbiAgICBkZXZXYXJuaW5nc092ZXJzY2FuUm93c0NvbHVtbnNDb3VudCA9XG4gICAgLyojX19QVVJFX18qL1xuICAgIG5ldyBXZWFrU2V0KCk7XG4gICAgZGV2V2FybmluZ3NUYWdOYW1lID1cbiAgICAvKiNfX1BVUkVfXyovXG4gICAgbmV3IFdlYWtTZXQoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVHcmlkQ29tcG9uZW50KF9yZWYyKSB7XG4gIHZhciBfY2xhc3MsIF90ZW1wO1xuXG4gIHZhciBnZXRDb2x1bW5PZmZzZXQgPSBfcmVmMi5nZXRDb2x1bW5PZmZzZXQsXG4gICAgICBnZXRDb2x1bW5TdGFydEluZGV4Rm9yT2Zmc2V0ID0gX3JlZjIuZ2V0Q29sdW1uU3RhcnRJbmRleEZvck9mZnNldCxcbiAgICAgIGdldENvbHVtblN0b3BJbmRleEZvclN0YXJ0SW5kZXggPSBfcmVmMi5nZXRDb2x1bW5TdG9wSW5kZXhGb3JTdGFydEluZGV4LFxuICAgICAgZ2V0Q29sdW1uV2lkdGggPSBfcmVmMi5nZXRDb2x1bW5XaWR0aCxcbiAgICAgIGdldEVzdGltYXRlZFRvdGFsSGVpZ2h0ID0gX3JlZjIuZ2V0RXN0aW1hdGVkVG90YWxIZWlnaHQsXG4gICAgICBnZXRFc3RpbWF0ZWRUb3RhbFdpZHRoID0gX3JlZjIuZ2V0RXN0aW1hdGVkVG90YWxXaWR0aCxcbiAgICAgIGdldE9mZnNldEZvckNvbHVtbkFuZEFsaWdubWVudCA9IF9yZWYyLmdldE9mZnNldEZvckNvbHVtbkFuZEFsaWdubWVudCxcbiAgICAgIGdldE9mZnNldEZvclJvd0FuZEFsaWdubWVudCA9IF9yZWYyLmdldE9mZnNldEZvclJvd0FuZEFsaWdubWVudCxcbiAgICAgIGdldFJvd0hlaWdodCA9IF9yZWYyLmdldFJvd0hlaWdodCxcbiAgICAgIGdldFJvd09mZnNldCA9IF9yZWYyLmdldFJvd09mZnNldCxcbiAgICAgIGdldFJvd1N0YXJ0SW5kZXhGb3JPZmZzZXQgPSBfcmVmMi5nZXRSb3dTdGFydEluZGV4Rm9yT2Zmc2V0LFxuICAgICAgZ2V0Um93U3RvcEluZGV4Rm9yU3RhcnRJbmRleCA9IF9yZWYyLmdldFJvd1N0b3BJbmRleEZvclN0YXJ0SW5kZXgsXG4gICAgICBpbml0SW5zdGFuY2VQcm9wcyA9IF9yZWYyLmluaXRJbnN0YW5jZVByb3BzLFxuICAgICAgc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZSA9IF9yZWYyLnNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2UsXG4gICAgICB2YWxpZGF0ZVByb3BzID0gX3JlZjIudmFsaWRhdGVQcm9wcztcbiAgcmV0dXJuIF90ZW1wID0gX2NsYXNzID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoX1B1cmVDb21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHNMb29zZShHcmlkLCBfUHVyZUNvbXBvbmVudCk7XG5cbiAgICAvLyBBbHdheXMgdXNlIGV4cGxpY2l0IGNvbnN0cnVjdG9yIGZvciBSZWFjdCBjb21wb25lbnRzLlxuICAgIC8vIEl0IHByb2R1Y2VzIGxlc3MgY29kZSBhZnRlciB0cmFuc3BpbGF0aW9uLiAoIzI2KVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2VsZXNzLWNvbnN0cnVjdG9yXG4gICAgZnVuY3Rpb24gR3JpZChwcm9wcykge1xuICAgICAgdmFyIF90aGlzO1xuXG4gICAgICBfdGhpcyA9IF9QdXJlQ29tcG9uZW50LmNhbGwodGhpcywgcHJvcHMpIHx8IHRoaXM7XG4gICAgICBfdGhpcy5faW5zdGFuY2VQcm9wcyA9IGluaXRJbnN0YW5jZVByb3BzKF90aGlzLnByb3BzLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKSk7XG4gICAgICBfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCA9IG51bGw7XG4gICAgICBfdGhpcy5fb3V0ZXJSZWYgPSB2b2lkIDA7XG4gICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgaW5zdGFuY2U6IF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLFxuICAgICAgICBpc1Njcm9sbGluZzogZmFsc2UsXG4gICAgICAgIGhvcml6b250YWxTY3JvbGxEaXJlY3Rpb246ICdmb3J3YXJkJyxcbiAgICAgICAgc2Nyb2xsTGVmdDogdHlwZW9mIF90aGlzLnByb3BzLmluaXRpYWxTY3JvbGxMZWZ0ID09PSAnbnVtYmVyJyA/IF90aGlzLnByb3BzLmluaXRpYWxTY3JvbGxMZWZ0IDogMCxcbiAgICAgICAgc2Nyb2xsVG9wOiB0eXBlb2YgX3RoaXMucHJvcHMuaW5pdGlhbFNjcm9sbFRvcCA9PT0gJ251bWJlcicgPyBfdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsVG9wIDogMCxcbiAgICAgICAgc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkOiBmYWxzZSxcbiAgICAgICAgdmVydGljYWxTY3JvbGxEaXJlY3Rpb246ICdmb3J3YXJkJ1xuICAgICAgfTtcbiAgICAgIF90aGlzLl9jYWxsT25JdGVtc1JlbmRlcmVkID0gdm9pZCAwO1xuICAgICAgX3RoaXMuX2NhbGxPbkl0ZW1zUmVuZGVyZWQgPSBtZW1vaXplT25lKGZ1bmN0aW9uIChvdmVyc2NhbkNvbHVtblN0YXJ0SW5kZXgsIG92ZXJzY2FuQ29sdW1uU3RvcEluZGV4LCBvdmVyc2NhblJvd1N0YXJ0SW5kZXgsIG92ZXJzY2FuUm93U3RvcEluZGV4LCB2aXNpYmxlQ29sdW1uU3RhcnRJbmRleCwgdmlzaWJsZUNvbHVtblN0b3BJbmRleCwgdmlzaWJsZVJvd1N0YXJ0SW5kZXgsIHZpc2libGVSb3dTdG9wSW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnByb3BzLm9uSXRlbXNSZW5kZXJlZCh7XG4gICAgICAgICAgb3ZlcnNjYW5Db2x1bW5TdGFydEluZGV4OiBvdmVyc2NhbkNvbHVtblN0YXJ0SW5kZXgsXG4gICAgICAgICAgb3ZlcnNjYW5Db2x1bW5TdG9wSW5kZXg6IG92ZXJzY2FuQ29sdW1uU3RvcEluZGV4LFxuICAgICAgICAgIG92ZXJzY2FuUm93U3RhcnRJbmRleDogb3ZlcnNjYW5Sb3dTdGFydEluZGV4LFxuICAgICAgICAgIG92ZXJzY2FuUm93U3RvcEluZGV4OiBvdmVyc2NhblJvd1N0b3BJbmRleCxcbiAgICAgICAgICB2aXNpYmxlQ29sdW1uU3RhcnRJbmRleDogdmlzaWJsZUNvbHVtblN0YXJ0SW5kZXgsXG4gICAgICAgICAgdmlzaWJsZUNvbHVtblN0b3BJbmRleDogdmlzaWJsZUNvbHVtblN0b3BJbmRleCxcbiAgICAgICAgICB2aXNpYmxlUm93U3RhcnRJbmRleDogdmlzaWJsZVJvd1N0YXJ0SW5kZXgsXG4gICAgICAgICAgdmlzaWJsZVJvd1N0b3BJbmRleDogdmlzaWJsZVJvd1N0b3BJbmRleFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgX3RoaXMuX2NhbGxPblNjcm9sbCA9IHZvaWQgMDtcbiAgICAgIF90aGlzLl9jYWxsT25TY3JvbGwgPSBtZW1vaXplT25lKGZ1bmN0aW9uIChzY3JvbGxMZWZ0LCBzY3JvbGxUb3AsIGhvcml6b250YWxTY3JvbGxEaXJlY3Rpb24sIHZlcnRpY2FsU2Nyb2xsRGlyZWN0aW9uLCBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnByb3BzLm9uU2Nyb2xsKHtcbiAgICAgICAgICBob3Jpem9udGFsU2Nyb2xsRGlyZWN0aW9uOiBob3Jpem9udGFsU2Nyb2xsRGlyZWN0aW9uLFxuICAgICAgICAgIHNjcm9sbExlZnQ6IHNjcm9sbExlZnQsXG4gICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxUb3AsXG4gICAgICAgICAgdmVydGljYWxTY3JvbGxEaXJlY3Rpb246IHZlcnRpY2FsU2Nyb2xsRGlyZWN0aW9uLFxuICAgICAgICAgIHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZDogc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBfdGhpcy5fZ2V0SXRlbVN0eWxlID0gdm9pZCAwO1xuXG4gICAgICBfdGhpcy5fZ2V0SXRlbVN0eWxlID0gZnVuY3Rpb24gKHJvd0luZGV4LCBjb2x1bW5JbmRleCkge1xuICAgICAgICB2YXIgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICAgIGNvbHVtbldpZHRoID0gX3RoaXMkcHJvcHMuY29sdW1uV2lkdGgsXG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBfdGhpcyRwcm9wcy5kaXJlY3Rpb24sXG4gICAgICAgICAgICByb3dIZWlnaHQgPSBfdGhpcyRwcm9wcy5yb3dIZWlnaHQ7XG5cbiAgICAgICAgdmFyIGl0ZW1TdHlsZUNhY2hlID0gX3RoaXMuX2dldEl0ZW1TdHlsZUNhY2hlKHNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2UgJiYgY29sdW1uV2lkdGgsIHNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2UgJiYgZGlyZWN0aW9uLCBzaG91bGRSZXNldFN0eWxlQ2FjaGVPbkl0ZW1TaXplQ2hhbmdlICYmIHJvd0hlaWdodCk7XG5cbiAgICAgICAgdmFyIGtleSA9IHJvd0luZGV4ICsgXCI6XCIgKyBjb2x1bW5JbmRleDtcbiAgICAgICAgdmFyIHN0eWxlO1xuXG4gICAgICAgIGlmIChpdGVtU3R5bGVDYWNoZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgc3R5bGUgPSBpdGVtU3R5bGVDYWNoZVtrZXldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBfb2Zmc2V0ID0gZ2V0Q29sdW1uT2Zmc2V0KF90aGlzLnByb3BzLCBjb2x1bW5JbmRleCwgX3RoaXMuX2luc3RhbmNlUHJvcHMpO1xuXG4gICAgICAgICAgdmFyIGlzUnRsID0gZGlyZWN0aW9uID09PSAncnRsJztcbiAgICAgICAgICBpdGVtU3R5bGVDYWNoZVtrZXldID0gc3R5bGUgPSB7XG4gICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgIGxlZnQ6IGlzUnRsID8gdW5kZWZpbmVkIDogX29mZnNldCxcbiAgICAgICAgICAgIHJpZ2h0OiBpc1J0bCA/IF9vZmZzZXQgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB0b3A6IGdldFJvd09mZnNldChfdGhpcy5wcm9wcywgcm93SW5kZXgsIF90aGlzLl9pbnN0YW5jZVByb3BzKSxcbiAgICAgICAgICAgIGhlaWdodDogZ2V0Um93SGVpZ2h0KF90aGlzLnByb3BzLCByb3dJbmRleCwgX3RoaXMuX2luc3RhbmNlUHJvcHMpLFxuICAgICAgICAgICAgd2lkdGg6IGdldENvbHVtbldpZHRoKF90aGlzLnByb3BzLCBjb2x1bW5JbmRleCwgX3RoaXMuX2luc3RhbmNlUHJvcHMpXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLl9nZXRJdGVtU3R5bGVDYWNoZSA9IHZvaWQgMDtcbiAgICAgIF90aGlzLl9nZXRJdGVtU3R5bGVDYWNoZSA9IG1lbW9pemVPbmUoZnVuY3Rpb24gKF8sIF9fLCBfX18pIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgfSk7XG5cbiAgICAgIF90aGlzLl9vblNjcm9sbCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgX2V2ZW50JGN1cnJlbnRUYXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0LFxuICAgICAgICAgICAgY2xpZW50SGVpZ2h0ID0gX2V2ZW50JGN1cnJlbnRUYXJnZXQuY2xpZW50SGVpZ2h0LFxuICAgICAgICAgICAgY2xpZW50V2lkdGggPSBfZXZlbnQkY3VycmVudFRhcmdldC5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgIHNjcm9sbExlZnQgPSBfZXZlbnQkY3VycmVudFRhcmdldC5zY3JvbGxMZWZ0LFxuICAgICAgICAgICAgc2Nyb2xsVG9wID0gX2V2ZW50JGN1cnJlbnRUYXJnZXQuc2Nyb2xsVG9wLFxuICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0ID0gX2V2ZW50JGN1cnJlbnRUYXJnZXQuc2Nyb2xsSGVpZ2h0LFxuICAgICAgICAgICAgc2Nyb2xsV2lkdGggPSBfZXZlbnQkY3VycmVudFRhcmdldC5zY3JvbGxXaWR0aDtcblxuICAgICAgICBfdGhpcy5zZXRTdGF0ZShmdW5jdGlvbiAocHJldlN0YXRlKSB7XG4gICAgICAgICAgaWYgKHByZXZTdGF0ZS5zY3JvbGxMZWZ0ID09PSBzY3JvbGxMZWZ0ICYmIHByZXZTdGF0ZS5zY3JvbGxUb3AgPT09IHNjcm9sbFRvcCkge1xuICAgICAgICAgICAgLy8gU2Nyb2xsIHBvc2l0aW9uIG1heSBoYXZlIGJlZW4gdXBkYXRlZCBieSBjRE0vY0RVLFxuICAgICAgICAgICAgLy8gSW4gd2hpY2ggY2FzZSB3ZSBkb24ndCBuZWVkIHRvIHRyaWdnZXIgYW5vdGhlciByZW5kZXIsXG4gICAgICAgICAgICAvLyBBbmQgd2UgZG9uJ3Qgd2FudCB0byB1cGRhdGUgc3RhdGUuaXNTY3JvbGxpbmcuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gX3RoaXMucHJvcHMuZGlyZWN0aW9uOyAvLyBUUklDS1kgQWNjb3JkaW5nIHRvIHRoZSBzcGVjLCBzY3JvbGxMZWZ0IHNob3VsZCBiZSBuZWdhdGl2ZSBmb3IgUlRMIGFsaWduZWQgZWxlbWVudHMuXG4gICAgICAgICAgLy8gVGhpcyBpcyBub3QgdGhlIGNhc2UgZm9yIGFsbCBicm93c2VycyB0aG91Z2ggKGUuZy4gQ2hyb21lIHJlcG9ydHMgdmFsdWVzIGFzIHBvc2l0aXZlLCBtZWFzdXJlZCByZWxhdGl2ZSB0byB0aGUgbGVmdCkuXG4gICAgICAgICAgLy8gSXQncyBhbHNvIGVhc2llciBmb3IgdGhpcyBjb21wb25lbnQgaWYgd2UgY29udmVydCBvZmZzZXRzIHRvIHRoZSBzYW1lIGZvcm1hdCBhcyB0aGV5IHdvdWxkIGJlIGluIGZvciBsdHIuXG4gICAgICAgICAgLy8gU28gdGhlIHNpbXBsZXN0IHNvbHV0aW9uIGlzIHRvIGRldGVybWluZSB3aGljaCBicm93c2VyIGJlaGF2aW9yIHdlJ3JlIGRlYWxpbmcgd2l0aCwgYW5kIGNvbnZlcnQgYmFzZWQgb24gaXQuXG5cbiAgICAgICAgICB2YXIgY2FsY3VsYXRlZFNjcm9sbExlZnQgPSBzY3JvbGxMZWZ0O1xuXG4gICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3J0bCcpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZ2V0UlRMT2Zmc2V0VHlwZSgpKSB7XG4gICAgICAgICAgICAgIGNhc2UgJ25lZ2F0aXZlJzpcbiAgICAgICAgICAgICAgICBjYWxjdWxhdGVkU2Nyb2xsTGVmdCA9IC1zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgJ3Bvc2l0aXZlLWRlc2NlbmRpbmcnOlxuICAgICAgICAgICAgICAgIGNhbGN1bGF0ZWRTY3JvbGxMZWZ0ID0gc2Nyb2xsV2lkdGggLSBjbGllbnRXaWR0aCAtIHNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSAvLyBQcmV2ZW50IFNhZmFyaSdzIGVsYXN0aWMgc2Nyb2xsaW5nIGZyb20gY2F1c2luZyB2aXN1YWwgc2hha2luZyB3aGVuIHNjcm9sbGluZyBwYXN0IGJvdW5kcy5cblxuXG4gICAgICAgICAgY2FsY3VsYXRlZFNjcm9sbExlZnQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihjYWxjdWxhdGVkU2Nyb2xsTGVmdCwgc2Nyb2xsV2lkdGggLSBjbGllbnRXaWR0aCkpO1xuICAgICAgICAgIHZhciBjYWxjdWxhdGVkU2Nyb2xsVG9wID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oc2Nyb2xsVG9wLCBzY3JvbGxIZWlnaHQgLSBjbGllbnRIZWlnaHQpKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNTY3JvbGxpbmc6IHRydWUsXG4gICAgICAgICAgICBob3Jpem9udGFsU2Nyb2xsRGlyZWN0aW9uOiBwcmV2U3RhdGUuc2Nyb2xsTGVmdCA8IHNjcm9sbExlZnQgPyAnZm9yd2FyZCcgOiAnYmFja3dhcmQnLFxuICAgICAgICAgICAgc2Nyb2xsTGVmdDogY2FsY3VsYXRlZFNjcm9sbExlZnQsXG4gICAgICAgICAgICBzY3JvbGxUb3A6IGNhbGN1bGF0ZWRTY3JvbGxUb3AsXG4gICAgICAgICAgICB2ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbjogcHJldlN0YXRlLnNjcm9sbFRvcCA8IHNjcm9sbFRvcCA/ICdmb3J3YXJkJyA6ICdiYWNrd2FyZCcsXG4gICAgICAgICAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQ6IGZhbHNlXG4gICAgICAgICAgfTtcbiAgICAgICAgfSwgX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdEZWJvdW5jZWQpO1xuICAgICAgfTtcblxuICAgICAgX3RoaXMuX291dGVyUmVmU2V0dGVyID0gZnVuY3Rpb24gKHJlZikge1xuICAgICAgICB2YXIgb3V0ZXJSZWYgPSBfdGhpcy5wcm9wcy5vdXRlclJlZjtcbiAgICAgICAgX3RoaXMuX291dGVyUmVmID0gcmVmO1xuXG4gICAgICAgIGlmICh0eXBlb2Ygb3V0ZXJSZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBvdXRlclJlZihyZWYpO1xuICAgICAgICB9IGVsc2UgaWYgKG91dGVyUmVmICE9IG51bGwgJiYgdHlwZW9mIG91dGVyUmVmID09PSAnb2JqZWN0JyAmJiBvdXRlclJlZi5oYXNPd25Qcm9wZXJ0eSgnY3VycmVudCcpKSB7XG4gICAgICAgICAgb3V0ZXJSZWYuY3VycmVudCA9IHJlZjtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdEZWJvdW5jZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCAhPT0gbnVsbCkge1xuICAgICAgICAgIGNhbmNlbFRpbWVvdXQoX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdUaW1lb3V0SWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdUaW1lb3V0SWQgPSByZXF1ZXN0VGltZW91dChfdGhpcy5fcmVzZXRJc1Njcm9sbGluZywgSVNfU0NST0xMSU5HX0RFQk9VTkNFX0lOVEVSVkFMKTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCA9IG51bGw7XG5cbiAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGlzU2Nyb2xsaW5nOiBmYWxzZVxuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gQ2xlYXIgc3R5bGUgY2FjaGUgYWZ0ZXIgc3RhdGUgdXBkYXRlIGhhcyBiZWVuIGNvbW1pdHRlZC5cbiAgICAgICAgICAvLyBUaGlzIHdheSB3ZSBkb24ndCBicmVhayBwdXJlIHNDVSBmb3IgaXRlbXMgdGhhdCBkb24ndCB1c2UgaXNTY3JvbGxpbmcgcGFyYW0uXG4gICAgICAgICAgX3RoaXMuX2dldEl0ZW1TdHlsZUNhY2hlKC0xKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgR3JpZC5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMgPSBmdW5jdGlvbiBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgIHZhbGlkYXRlU2hhcmVkUHJvcHMobmV4dFByb3BzLCBwcmV2U3RhdGUpO1xuICAgICAgdmFsaWRhdGVQcm9wcyhuZXh0UHJvcHMpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIHZhciBfcHJvdG8gPSBHcmlkLnByb3RvdHlwZTtcblxuICAgIF9wcm90by5zY3JvbGxUbyA9IGZ1bmN0aW9uIHNjcm9sbFRvKF9yZWYzKSB7XG4gICAgICB2YXIgc2Nyb2xsTGVmdCA9IF9yZWYzLnNjcm9sbExlZnQsXG4gICAgICAgICAgc2Nyb2xsVG9wID0gX3JlZjMuc2Nyb2xsVG9wO1xuXG4gICAgICBpZiAoc2Nyb2xsTGVmdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNjcm9sbExlZnQgPSBNYXRoLm1heCgwLCBzY3JvbGxMZWZ0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNjcm9sbFRvcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNjcm9sbFRvcCA9IE1hdGgubWF4KDAsIHNjcm9sbFRvcCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHByZXZTdGF0ZSkge1xuICAgICAgICBpZiAoc2Nyb2xsTGVmdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc2Nyb2xsTGVmdCA9IHByZXZTdGF0ZS5zY3JvbGxMZWZ0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNjcm9sbFRvcCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc2Nyb2xsVG9wID0gcHJldlN0YXRlLnNjcm9sbFRvcDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcmV2U3RhdGUuc2Nyb2xsTGVmdCA9PT0gc2Nyb2xsTGVmdCAmJiBwcmV2U3RhdGUuc2Nyb2xsVG9wID09PSBzY3JvbGxUb3ApIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaG9yaXpvbnRhbFNjcm9sbERpcmVjdGlvbjogcHJldlN0YXRlLnNjcm9sbExlZnQgPCBzY3JvbGxMZWZ0ID8gJ2ZvcndhcmQnIDogJ2JhY2t3YXJkJyxcbiAgICAgICAgICBzY3JvbGxMZWZ0OiBzY3JvbGxMZWZ0LFxuICAgICAgICAgIHNjcm9sbFRvcDogc2Nyb2xsVG9wLFxuICAgICAgICAgIHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZDogdHJ1ZSxcbiAgICAgICAgICB2ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbjogcHJldlN0YXRlLnNjcm9sbFRvcCA8IHNjcm9sbFRvcCA/ICdmb3J3YXJkJyA6ICdiYWNrd2FyZCdcbiAgICAgICAgfTtcbiAgICAgIH0sIHRoaXMuX3Jlc2V0SXNTY3JvbGxpbmdEZWJvdW5jZWQpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uc2Nyb2xsVG9JdGVtID0gZnVuY3Rpb24gc2Nyb2xsVG9JdGVtKF9yZWY0KSB7XG4gICAgICB2YXIgX3JlZjQkYWxpZ24gPSBfcmVmNC5hbGlnbixcbiAgICAgICAgICBhbGlnbiA9IF9yZWY0JGFsaWduID09PSB2b2lkIDAgPyAnYXV0bycgOiBfcmVmNCRhbGlnbixcbiAgICAgICAgICBjb2x1bW5JbmRleCA9IF9yZWY0LmNvbHVtbkluZGV4LFxuICAgICAgICAgIHJvd0luZGV4ID0gX3JlZjQucm93SW5kZXg7XG4gICAgICB2YXIgX3RoaXMkcHJvcHMyID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBjb2x1bW5Db3VudCA9IF90aGlzJHByb3BzMi5jb2x1bW5Db3VudCxcbiAgICAgICAgICBoZWlnaHQgPSBfdGhpcyRwcm9wczIuaGVpZ2h0LFxuICAgICAgICAgIHJvd0NvdW50ID0gX3RoaXMkcHJvcHMyLnJvd0NvdW50LFxuICAgICAgICAgIHdpZHRoID0gX3RoaXMkcHJvcHMyLndpZHRoO1xuICAgICAgdmFyIF90aGlzJHN0YXRlID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICBzY3JvbGxMZWZ0ID0gX3RoaXMkc3RhdGUuc2Nyb2xsTGVmdCxcbiAgICAgICAgICBzY3JvbGxUb3AgPSBfdGhpcyRzdGF0ZS5zY3JvbGxUb3A7XG4gICAgICB2YXIgc2Nyb2xsYmFyU2l6ZSA9IGdldFNjcm9sbGJhclNpemUoKTtcblxuICAgICAgaWYgKGNvbHVtbkluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29sdW1uSW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihjb2x1bW5JbmRleCwgY29sdW1uQ291bnQgLSAxKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChyb3dJbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJvd0luZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ocm93SW5kZXgsIHJvd0NvdW50IC0gMSkpO1xuICAgICAgfVxuXG4gICAgICB2YXIgZXN0aW1hdGVkVG90YWxIZWlnaHQgPSBnZXRFc3RpbWF0ZWRUb3RhbEhlaWdodCh0aGlzLnByb3BzLCB0aGlzLl9pbnN0YW5jZVByb3BzKTtcbiAgICAgIHZhciBlc3RpbWF0ZWRUb3RhbFdpZHRoID0gZ2V0RXN0aW1hdGVkVG90YWxXaWR0aCh0aGlzLnByb3BzLCB0aGlzLl9pbnN0YW5jZVByb3BzKTsgLy8gVGhlIHNjcm9sbGJhciBzaXplIHNob3VsZCBiZSBjb25zaWRlcmVkIHdoZW4gc2Nyb2xsaW5nIGFuIGl0ZW0gaW50byB2aWV3LFxuICAgICAgLy8gdG8gZW5zdXJlIGl0J3MgZnVsbHkgdmlzaWJsZS5cbiAgICAgIC8vIEJ1dCB3ZSBvbmx5IG5lZWQgdG8gYWNjb3VudCBmb3IgaXRzIHNpemUgd2hlbiBpdCdzIGFjdHVhbGx5IHZpc2libGUuXG5cbiAgICAgIHZhciBob3Jpem9udGFsU2Nyb2xsYmFyU2l6ZSA9IGVzdGltYXRlZFRvdGFsV2lkdGggPiB3aWR0aCA/IHNjcm9sbGJhclNpemUgOiAwO1xuICAgICAgdmFyIHZlcnRpY2FsU2Nyb2xsYmFyU2l6ZSA9IGVzdGltYXRlZFRvdGFsSGVpZ2h0ID4gaGVpZ2h0ID8gc2Nyb2xsYmFyU2l6ZSA6IDA7XG4gICAgICB0aGlzLnNjcm9sbFRvKHtcbiAgICAgICAgc2Nyb2xsTGVmdDogY29sdW1uSW5kZXggIT09IHVuZGVmaW5lZCA/IGdldE9mZnNldEZvckNvbHVtbkFuZEFsaWdubWVudCh0aGlzLnByb3BzLCBjb2x1bW5JbmRleCwgYWxpZ24sIHNjcm9sbExlZnQsIHRoaXMuX2luc3RhbmNlUHJvcHMsIHZlcnRpY2FsU2Nyb2xsYmFyU2l6ZSkgOiBzY3JvbGxMZWZ0LFxuICAgICAgICBzY3JvbGxUb3A6IHJvd0luZGV4ICE9PSB1bmRlZmluZWQgPyBnZXRPZmZzZXRGb3JSb3dBbmRBbGlnbm1lbnQodGhpcy5wcm9wcywgcm93SW5kZXgsIGFsaWduLCBzY3JvbGxUb3AsIHRoaXMuX2luc3RhbmNlUHJvcHMsIGhvcml6b250YWxTY3JvbGxiYXJTaXplKSA6IHNjcm9sbFRvcFxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9wcm90by5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzMyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgaW5pdGlhbFNjcm9sbExlZnQgPSBfdGhpcyRwcm9wczMuaW5pdGlhbFNjcm9sbExlZnQsXG4gICAgICAgICAgaW5pdGlhbFNjcm9sbFRvcCA9IF90aGlzJHByb3BzMy5pbml0aWFsU2Nyb2xsVG9wO1xuXG4gICAgICBpZiAodGhpcy5fb3V0ZXJSZWYgIT0gbnVsbCkge1xuICAgICAgICB2YXIgb3V0ZXJSZWYgPSB0aGlzLl9vdXRlclJlZjtcblxuICAgICAgICBpZiAodHlwZW9mIGluaXRpYWxTY3JvbGxMZWZ0ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIG91dGVyUmVmLnNjcm9sbExlZnQgPSBpbml0aWFsU2Nyb2xsTGVmdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgaW5pdGlhbFNjcm9sbFRvcCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBvdXRlclJlZi5zY3JvbGxUb3AgPSBpbml0aWFsU2Nyb2xsVG9wO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NhbGxQcm9wc0NhbGxiYWNrcygpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgdmFyIGRpcmVjdGlvbiA9IHRoaXMucHJvcHMuZGlyZWN0aW9uO1xuICAgICAgdmFyIF90aGlzJHN0YXRlMiA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgc2Nyb2xsTGVmdCA9IF90aGlzJHN0YXRlMi5zY3JvbGxMZWZ0LFxuICAgICAgICAgIHNjcm9sbFRvcCA9IF90aGlzJHN0YXRlMi5zY3JvbGxUb3AsXG4gICAgICAgICAgc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkID0gX3RoaXMkc3RhdGUyLnNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZDtcblxuICAgICAgaWYgKHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZCAmJiB0aGlzLl9vdXRlclJlZiAhPSBudWxsKSB7XG4gICAgICAgIC8vIFRSSUNLWSBBY2NvcmRpbmcgdG8gdGhlIHNwZWMsIHNjcm9sbExlZnQgc2hvdWxkIGJlIG5lZ2F0aXZlIGZvciBSVEwgYWxpZ25lZCBlbGVtZW50cy5cbiAgICAgICAgLy8gVGhpcyBpcyBub3QgdGhlIGNhc2UgZm9yIGFsbCBicm93c2VycyB0aG91Z2ggKGUuZy4gQ2hyb21lIHJlcG9ydHMgdmFsdWVzIGFzIHBvc2l0aXZlLCBtZWFzdXJlZCByZWxhdGl2ZSB0byB0aGUgbGVmdCkuXG4gICAgICAgIC8vIFNvIHdlIG5lZWQgdG8gZGV0ZXJtaW5lIHdoaWNoIGJyb3dzZXIgYmVoYXZpb3Igd2UncmUgZGVhbGluZyB3aXRoLCBhbmQgbWltaWMgaXQuXG4gICAgICAgIHZhciBvdXRlclJlZiA9IHRoaXMuX291dGVyUmVmO1xuXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdydGwnKSB7XG4gICAgICAgICAgc3dpdGNoIChnZXRSVExPZmZzZXRUeXBlKCkpIHtcbiAgICAgICAgICAgIGNhc2UgJ25lZ2F0aXZlJzpcbiAgICAgICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsTGVmdCA9IC1zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAncG9zaXRpdmUtYXNjZW5kaW5nJzpcbiAgICAgICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsTGVmdCA9IHNjcm9sbExlZnQ7XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICB2YXIgY2xpZW50V2lkdGggPSBvdXRlclJlZi5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgICAgICAgIHNjcm9sbFdpZHRoID0gb3V0ZXJSZWYuc2Nyb2xsV2lkdGg7XG4gICAgICAgICAgICAgIG91dGVyUmVmLnNjcm9sbExlZnQgPSBzY3JvbGxXaWR0aCAtIGNsaWVudFdpZHRoIC0gc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dGVyUmVmLnNjcm9sbExlZnQgPSBNYXRoLm1heCgwLCBzY3JvbGxMZWZ0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIG91dGVyUmVmLnNjcm9sbFRvcCA9IE1hdGgubWF4KDAsIHNjcm9sbFRvcCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NhbGxQcm9wc0NhbGxiYWNrcygpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIGlmICh0aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkICE9PSBudWxsKSB7XG4gICAgICAgIGNhbmNlbFRpbWVvdXQodGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHM0ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBjaGlsZHJlbiA9IF90aGlzJHByb3BzNC5jaGlsZHJlbixcbiAgICAgICAgICBjbGFzc05hbWUgPSBfdGhpcyRwcm9wczQuY2xhc3NOYW1lLFxuICAgICAgICAgIGNvbHVtbkNvdW50ID0gX3RoaXMkcHJvcHM0LmNvbHVtbkNvdW50LFxuICAgICAgICAgIGRpcmVjdGlvbiA9IF90aGlzJHByb3BzNC5kaXJlY3Rpb24sXG4gICAgICAgICAgaGVpZ2h0ID0gX3RoaXMkcHJvcHM0LmhlaWdodCxcbiAgICAgICAgICBpbm5lclJlZiA9IF90aGlzJHByb3BzNC5pbm5lclJlZixcbiAgICAgICAgICBpbm5lckVsZW1lbnRUeXBlID0gX3RoaXMkcHJvcHM0LmlubmVyRWxlbWVudFR5cGUsXG4gICAgICAgICAgaW5uZXJUYWdOYW1lID0gX3RoaXMkcHJvcHM0LmlubmVyVGFnTmFtZSxcbiAgICAgICAgICBpdGVtRGF0YSA9IF90aGlzJHByb3BzNC5pdGVtRGF0YSxcbiAgICAgICAgICBfdGhpcyRwcm9wczQkaXRlbUtleSA9IF90aGlzJHByb3BzNC5pdGVtS2V5LFxuICAgICAgICAgIGl0ZW1LZXkgPSBfdGhpcyRwcm9wczQkaXRlbUtleSA9PT0gdm9pZCAwID8gZGVmYXVsdEl0ZW1LZXkgOiBfdGhpcyRwcm9wczQkaXRlbUtleSxcbiAgICAgICAgICBvdXRlckVsZW1lbnRUeXBlID0gX3RoaXMkcHJvcHM0Lm91dGVyRWxlbWVudFR5cGUsXG4gICAgICAgICAgb3V0ZXJUYWdOYW1lID0gX3RoaXMkcHJvcHM0Lm91dGVyVGFnTmFtZSxcbiAgICAgICAgICByb3dDb3VudCA9IF90aGlzJHByb3BzNC5yb3dDb3VudCxcbiAgICAgICAgICBzdHlsZSA9IF90aGlzJHByb3BzNC5zdHlsZSxcbiAgICAgICAgICB1c2VJc1Njcm9sbGluZyA9IF90aGlzJHByb3BzNC51c2VJc1Njcm9sbGluZyxcbiAgICAgICAgICB3aWR0aCA9IF90aGlzJHByb3BzNC53aWR0aDtcbiAgICAgIHZhciBpc1Njcm9sbGluZyA9IHRoaXMuc3RhdGUuaXNTY3JvbGxpbmc7XG5cbiAgICAgIHZhciBfdGhpcyRfZ2V0SG9yaXpvbnRhbFIgPSB0aGlzLl9nZXRIb3Jpem9udGFsUmFuZ2VUb1JlbmRlcigpLFxuICAgICAgICAgIGNvbHVtblN0YXJ0SW5kZXggPSBfdGhpcyRfZ2V0SG9yaXpvbnRhbFJbMF0sXG4gICAgICAgICAgY29sdW1uU3RvcEluZGV4ID0gX3RoaXMkX2dldEhvcml6b250YWxSWzFdO1xuXG4gICAgICB2YXIgX3RoaXMkX2dldFZlcnRpY2FsUmFuID0gdGhpcy5fZ2V0VmVydGljYWxSYW5nZVRvUmVuZGVyKCksXG4gICAgICAgICAgcm93U3RhcnRJbmRleCA9IF90aGlzJF9nZXRWZXJ0aWNhbFJhblswXSxcbiAgICAgICAgICByb3dTdG9wSW5kZXggPSBfdGhpcyRfZ2V0VmVydGljYWxSYW5bMV07XG5cbiAgICAgIHZhciBpdGVtcyA9IFtdO1xuXG4gICAgICBpZiAoY29sdW1uQ291bnQgPiAwICYmIHJvd0NvdW50KSB7XG4gICAgICAgIGZvciAodmFyIF9yb3dJbmRleCA9IHJvd1N0YXJ0SW5kZXg7IF9yb3dJbmRleCA8PSByb3dTdG9wSW5kZXg7IF9yb3dJbmRleCsrKSB7XG4gICAgICAgICAgZm9yICh2YXIgX2NvbHVtbkluZGV4ID0gY29sdW1uU3RhcnRJbmRleDsgX2NvbHVtbkluZGV4IDw9IGNvbHVtblN0b3BJbmRleDsgX2NvbHVtbkluZGV4KyspIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goY3JlYXRlRWxlbWVudChjaGlsZHJlbiwge1xuICAgICAgICAgICAgICBjb2x1bW5JbmRleDogX2NvbHVtbkluZGV4LFxuICAgICAgICAgICAgICBkYXRhOiBpdGVtRGF0YSxcbiAgICAgICAgICAgICAgaXNTY3JvbGxpbmc6IHVzZUlzU2Nyb2xsaW5nID8gaXNTY3JvbGxpbmcgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIGtleTogaXRlbUtleSh7XG4gICAgICAgICAgICAgICAgY29sdW1uSW5kZXg6IF9jb2x1bW5JbmRleCxcbiAgICAgICAgICAgICAgICBkYXRhOiBpdGVtRGF0YSxcbiAgICAgICAgICAgICAgICByb3dJbmRleDogX3Jvd0luZGV4XG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICByb3dJbmRleDogX3Jvd0luZGV4LFxuICAgICAgICAgICAgICBzdHlsZTogdGhpcy5fZ2V0SXRlbVN0eWxlKF9yb3dJbmRleCwgX2NvbHVtbkluZGV4KVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSAvLyBSZWFkIHRoaXMgdmFsdWUgQUZURVIgaXRlbXMgaGF2ZSBiZWVuIGNyZWF0ZWQsXG4gICAgICAvLyBTbyB0aGVpciBhY3R1YWwgc2l6ZXMgKGlmIHZhcmlhYmxlKSBhcmUgdGFrZW4gaW50byBjb25zaWRlcmF0aW9uLlxuXG5cbiAgICAgIHZhciBlc3RpbWF0ZWRUb3RhbEhlaWdodCA9IGdldEVzdGltYXRlZFRvdGFsSGVpZ2h0KHRoaXMucHJvcHMsIHRoaXMuX2luc3RhbmNlUHJvcHMpO1xuICAgICAgdmFyIGVzdGltYXRlZFRvdGFsV2lkdGggPSBnZXRFc3RpbWF0ZWRUb3RhbFdpZHRoKHRoaXMucHJvcHMsIHRoaXMuX2luc3RhbmNlUHJvcHMpO1xuICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQob3V0ZXJFbGVtZW50VHlwZSB8fCBvdXRlclRhZ05hbWUgfHwgJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgIG9uU2Nyb2xsOiB0aGlzLl9vblNjcm9sbCxcbiAgICAgICAgcmVmOiB0aGlzLl9vdXRlclJlZlNldHRlcixcbiAgICAgICAgc3R5bGU6IF9leHRlbmRzKHtcbiAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgb3ZlcmZsb3c6ICdhdXRvJyxcbiAgICAgICAgICBXZWJraXRPdmVyZmxvd1Njcm9sbGluZzogJ3RvdWNoJyxcbiAgICAgICAgICB3aWxsQ2hhbmdlOiAndHJhbnNmb3JtJyxcbiAgICAgICAgICBkaXJlY3Rpb246IGRpcmVjdGlvblxuICAgICAgICB9LCBzdHlsZSlcbiAgICAgIH0sIGNyZWF0ZUVsZW1lbnQoaW5uZXJFbGVtZW50VHlwZSB8fCBpbm5lclRhZ05hbWUgfHwgJ2RpdicsIHtcbiAgICAgICAgY2hpbGRyZW46IGl0ZW1zLFxuICAgICAgICByZWY6IGlubmVyUmVmLFxuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIGhlaWdodDogZXN0aW1hdGVkVG90YWxIZWlnaHQsXG4gICAgICAgICAgcG9pbnRlckV2ZW50czogaXNTY3JvbGxpbmcgPyAnbm9uZScgOiB1bmRlZmluZWQsXG4gICAgICAgICAgd2lkdGg6IGVzdGltYXRlZFRvdGFsV2lkdGhcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2NhbGxQcm9wc0NhbGxiYWNrcyA9IGZ1bmN0aW9uIF9jYWxsUHJvcHNDYWxsYmFja3MoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHM1ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBjb2x1bW5Db3VudCA9IF90aGlzJHByb3BzNS5jb2x1bW5Db3VudCxcbiAgICAgICAgICBvbkl0ZW1zUmVuZGVyZWQgPSBfdGhpcyRwcm9wczUub25JdGVtc1JlbmRlcmVkLFxuICAgICAgICAgIG9uU2Nyb2xsID0gX3RoaXMkcHJvcHM1Lm9uU2Nyb2xsLFxuICAgICAgICAgIHJvd0NvdW50ID0gX3RoaXMkcHJvcHM1LnJvd0NvdW50O1xuXG4gICAgICBpZiAodHlwZW9mIG9uSXRlbXNSZW5kZXJlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBpZiAoY29sdW1uQ291bnQgPiAwICYmIHJvd0NvdW50ID4gMCkge1xuICAgICAgICAgIHZhciBfdGhpcyRfZ2V0SG9yaXpvbnRhbFIyID0gdGhpcy5fZ2V0SG9yaXpvbnRhbFJhbmdlVG9SZW5kZXIoKSxcbiAgICAgICAgICAgICAgX292ZXJzY2FuQ29sdW1uU3RhcnRJbmRleCA9IF90aGlzJF9nZXRIb3Jpem9udGFsUjJbMF0sXG4gICAgICAgICAgICAgIF9vdmVyc2NhbkNvbHVtblN0b3BJbmRleCA9IF90aGlzJF9nZXRIb3Jpem9udGFsUjJbMV0sXG4gICAgICAgICAgICAgIF92aXNpYmxlQ29sdW1uU3RhcnRJbmRleCA9IF90aGlzJF9nZXRIb3Jpem9udGFsUjJbMl0sXG4gICAgICAgICAgICAgIF92aXNpYmxlQ29sdW1uU3RvcEluZGV4ID0gX3RoaXMkX2dldEhvcml6b250YWxSMlszXTtcblxuICAgICAgICAgIHZhciBfdGhpcyRfZ2V0VmVydGljYWxSYW4yID0gdGhpcy5fZ2V0VmVydGljYWxSYW5nZVRvUmVuZGVyKCksXG4gICAgICAgICAgICAgIF9vdmVyc2NhblJvd1N0YXJ0SW5kZXggPSBfdGhpcyRfZ2V0VmVydGljYWxSYW4yWzBdLFxuICAgICAgICAgICAgICBfb3ZlcnNjYW5Sb3dTdG9wSW5kZXggPSBfdGhpcyRfZ2V0VmVydGljYWxSYW4yWzFdLFxuICAgICAgICAgICAgICBfdmlzaWJsZVJvd1N0YXJ0SW5kZXggPSBfdGhpcyRfZ2V0VmVydGljYWxSYW4yWzJdLFxuICAgICAgICAgICAgICBfdmlzaWJsZVJvd1N0b3BJbmRleCA9IF90aGlzJF9nZXRWZXJ0aWNhbFJhbjJbM107XG5cbiAgICAgICAgICB0aGlzLl9jYWxsT25JdGVtc1JlbmRlcmVkKF9vdmVyc2NhbkNvbHVtblN0YXJ0SW5kZXgsIF9vdmVyc2NhbkNvbHVtblN0b3BJbmRleCwgX292ZXJzY2FuUm93U3RhcnRJbmRleCwgX292ZXJzY2FuUm93U3RvcEluZGV4LCBfdmlzaWJsZUNvbHVtblN0YXJ0SW5kZXgsIF92aXNpYmxlQ29sdW1uU3RvcEluZGV4LCBfdmlzaWJsZVJvd1N0YXJ0SW5kZXgsIF92aXNpYmxlUm93U3RvcEluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIG9uU2Nyb2xsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHZhciBfdGhpcyRzdGF0ZTMgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgX2hvcml6b250YWxTY3JvbGxEaXJlY3Rpb24gPSBfdGhpcyRzdGF0ZTMuaG9yaXpvbnRhbFNjcm9sbERpcmVjdGlvbixcbiAgICAgICAgICAgIF9zY3JvbGxMZWZ0ID0gX3RoaXMkc3RhdGUzLnNjcm9sbExlZnQsXG4gICAgICAgICAgICBfc2Nyb2xsVG9wID0gX3RoaXMkc3RhdGUzLnNjcm9sbFRvcCxcbiAgICAgICAgICAgIF9zY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQgPSBfdGhpcyRzdGF0ZTMuc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkLFxuICAgICAgICAgICAgX3ZlcnRpY2FsU2Nyb2xsRGlyZWN0aW9uID0gX3RoaXMkc3RhdGUzLnZlcnRpY2FsU2Nyb2xsRGlyZWN0aW9uO1xuXG4gICAgICAgIHRoaXMuX2NhbGxPblNjcm9sbChfc2Nyb2xsTGVmdCwgX3Njcm9sbFRvcCwgX2hvcml6b250YWxTY3JvbGxEaXJlY3Rpb24sIF92ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbiwgX3Njcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZCk7XG4gICAgICB9XG4gICAgfTsgLy8gTGF6aWx5IGNyZWF0ZSBhbmQgY2FjaGUgaXRlbSBzdHlsZXMgd2hpbGUgc2Nyb2xsaW5nLFxuICAgIC8vIFNvIHRoYXQgcHVyZSBjb21wb25lbnQgc0NVIHdpbGwgcHJldmVudCByZS1yZW5kZXJzLlxuICAgIC8vIFdlIG1haW50YWluIHRoaXMgY2FjaGUsIGFuZCBwYXNzIGEgc3R5bGUgcHJvcCByYXRoZXIgdGhhbiBpbmRleCxcbiAgICAvLyBTbyB0aGF0IExpc3QgY2FuIGNsZWFyIGNhY2hlZCBzdHlsZXMgYW5kIGZvcmNlIGl0ZW0gcmUtcmVuZGVyIGlmIG5lY2Vzc2FyeS5cblxuXG4gICAgX3Byb3RvLl9nZXRIb3Jpem9udGFsUmFuZ2VUb1JlbmRlciA9IGZ1bmN0aW9uIF9nZXRIb3Jpem9udGFsUmFuZ2VUb1JlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczYgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGNvbHVtbkNvdW50ID0gX3RoaXMkcHJvcHM2LmNvbHVtbkNvdW50LFxuICAgICAgICAgIG92ZXJzY2FuQ29sdW1uQ291bnQgPSBfdGhpcyRwcm9wczYub3ZlcnNjYW5Db2x1bW5Db3VudCxcbiAgICAgICAgICBvdmVyc2NhbkNvbHVtbnNDb3VudCA9IF90aGlzJHByb3BzNi5vdmVyc2NhbkNvbHVtbnNDb3VudCxcbiAgICAgICAgICBvdmVyc2NhbkNvdW50ID0gX3RoaXMkcHJvcHM2Lm92ZXJzY2FuQ291bnQsXG4gICAgICAgICAgcm93Q291bnQgPSBfdGhpcyRwcm9wczYucm93Q291bnQ7XG4gICAgICB2YXIgX3RoaXMkc3RhdGU0ID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICBob3Jpem9udGFsU2Nyb2xsRGlyZWN0aW9uID0gX3RoaXMkc3RhdGU0Lmhvcml6b250YWxTY3JvbGxEaXJlY3Rpb24sXG4gICAgICAgICAgaXNTY3JvbGxpbmcgPSBfdGhpcyRzdGF0ZTQuaXNTY3JvbGxpbmcsXG4gICAgICAgICAgc2Nyb2xsTGVmdCA9IF90aGlzJHN0YXRlNC5zY3JvbGxMZWZ0O1xuICAgICAgdmFyIG92ZXJzY2FuQ291bnRSZXNvbHZlZCA9IG92ZXJzY2FuQ29sdW1uQ291bnQgfHwgb3ZlcnNjYW5Db2x1bW5zQ291bnQgfHwgb3ZlcnNjYW5Db3VudCB8fCAxO1xuXG4gICAgICBpZiAoY29sdW1uQ291bnQgPT09IDAgfHwgcm93Q291bnQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFswLCAwLCAwLCAwXTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0YXJ0SW5kZXggPSBnZXRDb2x1bW5TdGFydEluZGV4Rm9yT2Zmc2V0KHRoaXMucHJvcHMsIHNjcm9sbExlZnQsIHRoaXMuX2luc3RhbmNlUHJvcHMpO1xuICAgICAgdmFyIHN0b3BJbmRleCA9IGdldENvbHVtblN0b3BJbmRleEZvclN0YXJ0SW5kZXgodGhpcy5wcm9wcywgc3RhcnRJbmRleCwgc2Nyb2xsTGVmdCwgdGhpcy5faW5zdGFuY2VQcm9wcyk7IC8vIE92ZXJzY2FuIGJ5IG9uZSBpdGVtIGluIGVhY2ggZGlyZWN0aW9uIHNvIHRoYXQgdGFiL2ZvY3VzIHdvcmtzLlxuICAgICAgLy8gSWYgdGhlcmUgaXNuJ3QgYXQgbGVhc3Qgb25lIGV4dHJhIGl0ZW0sIHRhYiBsb29wcyBiYWNrIGFyb3VuZC5cblxuICAgICAgdmFyIG92ZXJzY2FuQmFja3dhcmQgPSAhaXNTY3JvbGxpbmcgfHwgaG9yaXpvbnRhbFNjcm9sbERpcmVjdGlvbiA9PT0gJ2JhY2t3YXJkJyA/IE1hdGgubWF4KDEsIG92ZXJzY2FuQ291bnRSZXNvbHZlZCkgOiAxO1xuICAgICAgdmFyIG92ZXJzY2FuRm9yd2FyZCA9ICFpc1Njcm9sbGluZyB8fCBob3Jpem9udGFsU2Nyb2xsRGlyZWN0aW9uID09PSAnZm9yd2FyZCcgPyBNYXRoLm1heCgxLCBvdmVyc2NhbkNvdW50UmVzb2x2ZWQpIDogMTtcbiAgICAgIHJldHVybiBbTWF0aC5tYXgoMCwgc3RhcnRJbmRleCAtIG92ZXJzY2FuQmFja3dhcmQpLCBNYXRoLm1heCgwLCBNYXRoLm1pbihjb2x1bW5Db3VudCAtIDEsIHN0b3BJbmRleCArIG92ZXJzY2FuRm9yd2FyZCkpLCBzdGFydEluZGV4LCBzdG9wSW5kZXhdO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2dldFZlcnRpY2FsUmFuZ2VUb1JlbmRlciA9IGZ1bmN0aW9uIF9nZXRWZXJ0aWNhbFJhbmdlVG9SZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMkcHJvcHM3ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICBjb2x1bW5Db3VudCA9IF90aGlzJHByb3BzNy5jb2x1bW5Db3VudCxcbiAgICAgICAgICBvdmVyc2NhbkNvdW50ID0gX3RoaXMkcHJvcHM3Lm92ZXJzY2FuQ291bnQsXG4gICAgICAgICAgb3ZlcnNjYW5Sb3dDb3VudCA9IF90aGlzJHByb3BzNy5vdmVyc2NhblJvd0NvdW50LFxuICAgICAgICAgIG92ZXJzY2FuUm93c0NvdW50ID0gX3RoaXMkcHJvcHM3Lm92ZXJzY2FuUm93c0NvdW50LFxuICAgICAgICAgIHJvd0NvdW50ID0gX3RoaXMkcHJvcHM3LnJvd0NvdW50O1xuICAgICAgdmFyIF90aGlzJHN0YXRlNSA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgaXNTY3JvbGxpbmcgPSBfdGhpcyRzdGF0ZTUuaXNTY3JvbGxpbmcsXG4gICAgICAgICAgdmVydGljYWxTY3JvbGxEaXJlY3Rpb24gPSBfdGhpcyRzdGF0ZTUudmVydGljYWxTY3JvbGxEaXJlY3Rpb24sXG4gICAgICAgICAgc2Nyb2xsVG9wID0gX3RoaXMkc3RhdGU1LnNjcm9sbFRvcDtcbiAgICAgIHZhciBvdmVyc2NhbkNvdW50UmVzb2x2ZWQgPSBvdmVyc2NhblJvd0NvdW50IHx8IG92ZXJzY2FuUm93c0NvdW50IHx8IG92ZXJzY2FuQ291bnQgfHwgMTtcblxuICAgICAgaWYgKGNvbHVtbkNvdW50ID09PSAwIHx8IHJvd0NvdW50ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBbMCwgMCwgMCwgMF07XG4gICAgICB9XG5cbiAgICAgIHZhciBzdGFydEluZGV4ID0gZ2V0Um93U3RhcnRJbmRleEZvck9mZnNldCh0aGlzLnByb3BzLCBzY3JvbGxUb3AsIHRoaXMuX2luc3RhbmNlUHJvcHMpO1xuICAgICAgdmFyIHN0b3BJbmRleCA9IGdldFJvd1N0b3BJbmRleEZvclN0YXJ0SW5kZXgodGhpcy5wcm9wcywgc3RhcnRJbmRleCwgc2Nyb2xsVG9wLCB0aGlzLl9pbnN0YW5jZVByb3BzKTsgLy8gT3ZlcnNjYW4gYnkgb25lIGl0ZW0gaW4gZWFjaCBkaXJlY3Rpb24gc28gdGhhdCB0YWIvZm9jdXMgd29ya3MuXG4gICAgICAvLyBJZiB0aGVyZSBpc24ndCBhdCBsZWFzdCBvbmUgZXh0cmEgaXRlbSwgdGFiIGxvb3BzIGJhY2sgYXJvdW5kLlxuXG4gICAgICB2YXIgb3ZlcnNjYW5CYWNrd2FyZCA9ICFpc1Njcm9sbGluZyB8fCB2ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbiA9PT0gJ2JhY2t3YXJkJyA/IE1hdGgubWF4KDEsIG92ZXJzY2FuQ291bnRSZXNvbHZlZCkgOiAxO1xuICAgICAgdmFyIG92ZXJzY2FuRm9yd2FyZCA9ICFpc1Njcm9sbGluZyB8fCB2ZXJ0aWNhbFNjcm9sbERpcmVjdGlvbiA9PT0gJ2ZvcndhcmQnID8gTWF0aC5tYXgoMSwgb3ZlcnNjYW5Db3VudFJlc29sdmVkKSA6IDE7XG4gICAgICByZXR1cm4gW01hdGgubWF4KDAsIHN0YXJ0SW5kZXggLSBvdmVyc2NhbkJhY2t3YXJkKSwgTWF0aC5tYXgoMCwgTWF0aC5taW4ocm93Q291bnQgLSAxLCBzdG9wSW5kZXggKyBvdmVyc2NhbkZvcndhcmQpKSwgc3RhcnRJbmRleCwgc3RvcEluZGV4XTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEdyaWQ7XG4gIH0oUHVyZUNvbXBvbmVudCksIF9jbGFzcy5kZWZhdWx0UHJvcHMgPSB7XG4gICAgZGlyZWN0aW9uOiAnbHRyJyxcbiAgICBpdGVtRGF0YTogdW5kZWZpbmVkLFxuICAgIHVzZUlzU2Nyb2xsaW5nOiBmYWxzZVxuICB9LCBfdGVtcDtcbn1cblxudmFyIHZhbGlkYXRlU2hhcmVkUHJvcHMgPSBmdW5jdGlvbiB2YWxpZGF0ZVNoYXJlZFByb3BzKF9yZWY1LCBfcmVmNikge1xuICB2YXIgY2hpbGRyZW4gPSBfcmVmNS5jaGlsZHJlbixcbiAgICAgIGRpcmVjdGlvbiA9IF9yZWY1LmRpcmVjdGlvbixcbiAgICAgIGhlaWdodCA9IF9yZWY1LmhlaWdodCxcbiAgICAgIGlubmVyVGFnTmFtZSA9IF9yZWY1LmlubmVyVGFnTmFtZSxcbiAgICAgIG91dGVyVGFnTmFtZSA9IF9yZWY1Lm91dGVyVGFnTmFtZSxcbiAgICAgIG92ZXJzY2FuQ29sdW1uc0NvdW50ID0gX3JlZjUub3ZlcnNjYW5Db2x1bW5zQ291bnQsXG4gICAgICBvdmVyc2NhbkNvdW50ID0gX3JlZjUub3ZlcnNjYW5Db3VudCxcbiAgICAgIG92ZXJzY2FuUm93c0NvdW50ID0gX3JlZjUub3ZlcnNjYW5Sb3dzQ291bnQsXG4gICAgICB3aWR0aCA9IF9yZWY1LndpZHRoO1xuICB2YXIgaW5zdGFuY2UgPSBfcmVmNi5pbnN0YW5jZTtcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmICh0eXBlb2Ygb3ZlcnNjYW5Db3VudCA9PT0gJ251bWJlcicpIHtcbiAgICAgIGlmIChkZXZXYXJuaW5nc092ZXJzY2FuQ291bnQgJiYgIWRldldhcm5pbmdzT3ZlcnNjYW5Db3VudC5oYXMoaW5zdGFuY2UpKSB7XG4gICAgICAgIGRldldhcm5pbmdzT3ZlcnNjYW5Db3VudC5hZGQoaW5zdGFuY2UpO1xuICAgICAgICBjb25zb2xlLndhcm4oJ1RoZSBvdmVyc2NhbkNvdW50IHByb3AgaGFzIGJlZW4gZGVwcmVjYXRlZC4gJyArICdQbGVhc2UgdXNlIHRoZSBvdmVyc2NhbkNvbHVtbkNvdW50IGFuZCBvdmVyc2NhblJvd0NvdW50IHByb3BzIGluc3RlYWQuJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvdmVyc2NhbkNvbHVtbnNDb3VudCA9PT0gJ251bWJlcicgfHwgdHlwZW9mIG92ZXJzY2FuUm93c0NvdW50ID09PSAnbnVtYmVyJykge1xuICAgICAgaWYgKGRldldhcm5pbmdzT3ZlcnNjYW5Sb3dzQ29sdW1uc0NvdW50ICYmICFkZXZXYXJuaW5nc092ZXJzY2FuUm93c0NvbHVtbnNDb3VudC5oYXMoaW5zdGFuY2UpKSB7XG4gICAgICAgIGRldldhcm5pbmdzT3ZlcnNjYW5Sb3dzQ29sdW1uc0NvdW50LmFkZChpbnN0YW5jZSk7XG4gICAgICAgIGNvbnNvbGUud2FybignVGhlIG92ZXJzY2FuQ29sdW1uc0NvdW50IGFuZCBvdmVyc2NhblJvd3NDb3VudCBwcm9wcyBoYXZlIGJlZW4gZGVwcmVjYXRlZC4gJyArICdQbGVhc2UgdXNlIHRoZSBvdmVyc2NhbkNvbHVtbkNvdW50IGFuZCBvdmVyc2NhblJvd0NvdW50IHByb3BzIGluc3RlYWQuJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGlubmVyVGFnTmFtZSAhPSBudWxsIHx8IG91dGVyVGFnTmFtZSAhPSBudWxsKSB7XG4gICAgICBpZiAoZGV2V2FybmluZ3NUYWdOYW1lICYmICFkZXZXYXJuaW5nc1RhZ05hbWUuaGFzKGluc3RhbmNlKSkge1xuICAgICAgICBkZXZXYXJuaW5nc1RhZ05hbWUuYWRkKGluc3RhbmNlKTtcbiAgICAgICAgY29uc29sZS53YXJuKCdUaGUgaW5uZXJUYWdOYW1lIGFuZCBvdXRlclRhZ05hbWUgcHJvcHMgaGF2ZSBiZWVuIGRlcHJlY2F0ZWQuICcgKyAnUGxlYXNlIHVzZSB0aGUgaW5uZXJFbGVtZW50VHlwZSBhbmQgb3V0ZXJFbGVtZW50VHlwZSBwcm9wcyBpbnN0ZWFkLicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjaGlsZHJlbiA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcImNoaWxkcmVuXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmFsdWUgc2hvdWxkIGJlIGEgUmVhY3QgY29tcG9uZW50LiAnICsgKFwiXFxcIlwiICsgKGNoaWxkcmVuID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIGNoaWxkcmVuKSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgfVxuXG4gICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2x0cic6XG4gICAgICBjYXNlICdydGwnOlxuICAgICAgICAvLyBWYWxpZCB2YWx1ZXNcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IEVycm9yKCdBbiBpbnZhbGlkIFwiZGlyZWN0aW9uXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmFsdWUgc2hvdWxkIGJlIGVpdGhlciBcImx0clwiIG9yIFwicnRsXCIuICcgKyAoXCJcXFwiXCIgKyBkaXJlY3Rpb24gKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygd2lkdGggIT09ICdudW1iZXInKSB7XG4gICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcIndpZHRoXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnR3JpZHMgbXVzdCBzcGVjaWZ5IGEgbnVtYmVyIGZvciB3aWR0aC4gJyArIChcIlxcXCJcIiArICh3aWR0aCA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiB3aWR0aCkgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgaGVpZ2h0ICE9PSAnbnVtYmVyJykge1xuICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJoZWlnaHRcIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdHcmlkcyBtdXN0IHNwZWNpZnkgYSBudW1iZXIgZm9yIGhlaWdodC4gJyArIChcIlxcXCJcIiArIChoZWlnaHQgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgaGVpZ2h0KSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgREVGQVVMVF9FU1RJTUFURURfSVRFTV9TSVpFID0gNTA7XG5cbnZhciBnZXRFc3RpbWF0ZWRUb3RhbEhlaWdodCA9IGZ1bmN0aW9uIGdldEVzdGltYXRlZFRvdGFsSGVpZ2h0KF9yZWYsIF9yZWYyKSB7XG4gIHZhciByb3dDb3VudCA9IF9yZWYucm93Q291bnQ7XG4gIHZhciByb3dNZXRhZGF0YU1hcCA9IF9yZWYyLnJvd01ldGFkYXRhTWFwLFxuICAgICAgZXN0aW1hdGVkUm93SGVpZ2h0ID0gX3JlZjIuZXN0aW1hdGVkUm93SGVpZ2h0LFxuICAgICAgbGFzdE1lYXN1cmVkUm93SW5kZXggPSBfcmVmMi5sYXN0TWVhc3VyZWRSb3dJbmRleDtcbiAgdmFyIHRvdGFsU2l6ZU9mTWVhc3VyZWRSb3dzID0gMDsgLy8gRWRnZSBjYXNlIGNoZWNrIGZvciB3aGVuIHRoZSBudW1iZXIgb2YgaXRlbXMgZGVjcmVhc2VzIHdoaWxlIGEgc2Nyb2xsIGlzIGluIHByb2dyZXNzLlxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vYnZhdWdobi9yZWFjdC13aW5kb3cvcHVsbC8xMzhcblxuICBpZiAobGFzdE1lYXN1cmVkUm93SW5kZXggPj0gcm93Q291bnQpIHtcbiAgICBsYXN0TWVhc3VyZWRSb3dJbmRleCA9IHJvd0NvdW50IC0gMTtcbiAgfVxuXG4gIGlmIChsYXN0TWVhc3VyZWRSb3dJbmRleCA+PSAwKSB7XG4gICAgdmFyIGl0ZW1NZXRhZGF0YSA9IHJvd01ldGFkYXRhTWFwW2xhc3RNZWFzdXJlZFJvd0luZGV4XTtcbiAgICB0b3RhbFNpemVPZk1lYXN1cmVkUm93cyA9IGl0ZW1NZXRhZGF0YS5vZmZzZXQgKyBpdGVtTWV0YWRhdGEuc2l6ZTtcbiAgfVxuXG4gIHZhciBudW1Vbm1lYXN1cmVkSXRlbXMgPSByb3dDb3VudCAtIGxhc3RNZWFzdXJlZFJvd0luZGV4IC0gMTtcbiAgdmFyIHRvdGFsU2l6ZU9mVW5tZWFzdXJlZEl0ZW1zID0gbnVtVW5tZWFzdXJlZEl0ZW1zICogZXN0aW1hdGVkUm93SGVpZ2h0O1xuICByZXR1cm4gdG90YWxTaXplT2ZNZWFzdXJlZFJvd3MgKyB0b3RhbFNpemVPZlVubWVhc3VyZWRJdGVtcztcbn07XG5cbnZhciBnZXRFc3RpbWF0ZWRUb3RhbFdpZHRoID0gZnVuY3Rpb24gZ2V0RXN0aW1hdGVkVG90YWxXaWR0aChfcmVmMywgX3JlZjQpIHtcbiAgdmFyIGNvbHVtbkNvdW50ID0gX3JlZjMuY29sdW1uQ291bnQ7XG4gIHZhciBjb2x1bW5NZXRhZGF0YU1hcCA9IF9yZWY0LmNvbHVtbk1ldGFkYXRhTWFwLFxuICAgICAgZXN0aW1hdGVkQ29sdW1uV2lkdGggPSBfcmVmNC5lc3RpbWF0ZWRDb2x1bW5XaWR0aCxcbiAgICAgIGxhc3RNZWFzdXJlZENvbHVtbkluZGV4ID0gX3JlZjQubGFzdE1lYXN1cmVkQ29sdW1uSW5kZXg7XG4gIHZhciB0b3RhbFNpemVPZk1lYXN1cmVkUm93cyA9IDA7IC8vIEVkZ2UgY2FzZSBjaGVjayBmb3Igd2hlbiB0aGUgbnVtYmVyIG9mIGl0ZW1zIGRlY3JlYXNlcyB3aGlsZSBhIHNjcm9sbCBpcyBpbiBwcm9ncmVzcy5cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2J2YXVnaG4vcmVhY3Qtd2luZG93L3B1bGwvMTM4XG5cbiAgaWYgKGxhc3RNZWFzdXJlZENvbHVtbkluZGV4ID49IGNvbHVtbkNvdW50KSB7XG4gICAgbGFzdE1lYXN1cmVkQ29sdW1uSW5kZXggPSBjb2x1bW5Db3VudCAtIDE7XG4gIH1cblxuICBpZiAobGFzdE1lYXN1cmVkQ29sdW1uSW5kZXggPj0gMCkge1xuICAgIHZhciBpdGVtTWV0YWRhdGEgPSBjb2x1bW5NZXRhZGF0YU1hcFtsYXN0TWVhc3VyZWRDb2x1bW5JbmRleF07XG4gICAgdG90YWxTaXplT2ZNZWFzdXJlZFJvd3MgPSBpdGVtTWV0YWRhdGEub2Zmc2V0ICsgaXRlbU1ldGFkYXRhLnNpemU7XG4gIH1cblxuICB2YXIgbnVtVW5tZWFzdXJlZEl0ZW1zID0gY29sdW1uQ291bnQgLSBsYXN0TWVhc3VyZWRDb2x1bW5JbmRleCAtIDE7XG4gIHZhciB0b3RhbFNpemVPZlVubWVhc3VyZWRJdGVtcyA9IG51bVVubWVhc3VyZWRJdGVtcyAqIGVzdGltYXRlZENvbHVtbldpZHRoO1xuICByZXR1cm4gdG90YWxTaXplT2ZNZWFzdXJlZFJvd3MgKyB0b3RhbFNpemVPZlVubWVhc3VyZWRJdGVtcztcbn07XG5cbnZhciBnZXRJdGVtTWV0YWRhdGEgPSBmdW5jdGlvbiBnZXRJdGVtTWV0YWRhdGEoaXRlbVR5cGUsIHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykge1xuICB2YXIgaXRlbU1ldGFkYXRhTWFwLCBpdGVtU2l6ZSwgbGFzdE1lYXN1cmVkSW5kZXg7XG5cbiAgaWYgKGl0ZW1UeXBlID09PSAnY29sdW1uJykge1xuICAgIGl0ZW1NZXRhZGF0YU1hcCA9IGluc3RhbmNlUHJvcHMuY29sdW1uTWV0YWRhdGFNYXA7XG4gICAgaXRlbVNpemUgPSBwcm9wcy5jb2x1bW5XaWR0aDtcbiAgICBsYXN0TWVhc3VyZWRJbmRleCA9IGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkQ29sdW1uSW5kZXg7XG4gIH0gZWxzZSB7XG4gICAgaXRlbU1ldGFkYXRhTWFwID0gaW5zdGFuY2VQcm9wcy5yb3dNZXRhZGF0YU1hcDtcbiAgICBpdGVtU2l6ZSA9IHByb3BzLnJvd0hlaWdodDtcbiAgICBsYXN0TWVhc3VyZWRJbmRleCA9IGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkUm93SW5kZXg7XG4gIH1cblxuICBpZiAoaW5kZXggPiBsYXN0TWVhc3VyZWRJbmRleCkge1xuICAgIHZhciBvZmZzZXQgPSAwO1xuXG4gICAgaWYgKGxhc3RNZWFzdXJlZEluZGV4ID49IDApIHtcbiAgICAgIHZhciBpdGVtTWV0YWRhdGEgPSBpdGVtTWV0YWRhdGFNYXBbbGFzdE1lYXN1cmVkSW5kZXhdO1xuICAgICAgb2Zmc2V0ID0gaXRlbU1ldGFkYXRhLm9mZnNldCArIGl0ZW1NZXRhZGF0YS5zaXplO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSBsYXN0TWVhc3VyZWRJbmRleCArIDE7IGkgPD0gaW5kZXg7IGkrKykge1xuICAgICAgdmFyIHNpemUgPSBpdGVtU2l6ZShpKTtcbiAgICAgIGl0ZW1NZXRhZGF0YU1hcFtpXSA9IHtcbiAgICAgICAgb2Zmc2V0OiBvZmZzZXQsXG4gICAgICAgIHNpemU6IHNpemVcbiAgICAgIH07XG4gICAgICBvZmZzZXQgKz0gc2l6ZTtcbiAgICB9XG5cbiAgICBpZiAoaXRlbVR5cGUgPT09ICdjb2x1bW4nKSB7XG4gICAgICBpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZENvbHVtbkluZGV4ID0gaW5kZXg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkUm93SW5kZXggPSBpbmRleDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaXRlbU1ldGFkYXRhTWFwW2luZGV4XTtcbn07XG5cbnZhciBmaW5kTmVhcmVzdEl0ZW0gPSBmdW5jdGlvbiBmaW5kTmVhcmVzdEl0ZW0oaXRlbVR5cGUsIHByb3BzLCBpbnN0YW5jZVByb3BzLCBvZmZzZXQpIHtcbiAgdmFyIGl0ZW1NZXRhZGF0YU1hcCwgbGFzdE1lYXN1cmVkSW5kZXg7XG5cbiAgaWYgKGl0ZW1UeXBlID09PSAnY29sdW1uJykge1xuICAgIGl0ZW1NZXRhZGF0YU1hcCA9IGluc3RhbmNlUHJvcHMuY29sdW1uTWV0YWRhdGFNYXA7XG4gICAgbGFzdE1lYXN1cmVkSW5kZXggPSBpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZENvbHVtbkluZGV4O1xuICB9IGVsc2Uge1xuICAgIGl0ZW1NZXRhZGF0YU1hcCA9IGluc3RhbmNlUHJvcHMucm93TWV0YWRhdGFNYXA7XG4gICAgbGFzdE1lYXN1cmVkSW5kZXggPSBpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZFJvd0luZGV4O1xuICB9XG5cbiAgdmFyIGxhc3RNZWFzdXJlZEl0ZW1PZmZzZXQgPSBsYXN0TWVhc3VyZWRJbmRleCA+IDAgPyBpdGVtTWV0YWRhdGFNYXBbbGFzdE1lYXN1cmVkSW5kZXhdLm9mZnNldCA6IDA7XG5cbiAgaWYgKGxhc3RNZWFzdXJlZEl0ZW1PZmZzZXQgPj0gb2Zmc2V0KSB7XG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSBtZWFzdXJlZCBpdGVtcyB3aXRoaW4gdGhpcyByYW5nZSBqdXN0IHVzZSBhIGJpbmFyeSBzZWFyY2ggYXMgaXQncyBmYXN0ZXIuXG4gICAgcmV0dXJuIGZpbmROZWFyZXN0SXRlbUJpbmFyeVNlYXJjaChpdGVtVHlwZSwgcHJvcHMsIGluc3RhbmNlUHJvcHMsIGxhc3RNZWFzdXJlZEluZGV4LCAwLCBvZmZzZXQpO1xuICB9IGVsc2Uge1xuICAgIC8vIElmIHdlIGhhdmVuJ3QgeWV0IG1lYXN1cmVkIHRoaXMgaGlnaCwgZmFsbGJhY2sgdG8gYW4gZXhwb25lbnRpYWwgc2VhcmNoIHdpdGggYW4gaW5uZXIgYmluYXJ5IHNlYXJjaC5cbiAgICAvLyBUaGUgZXhwb25lbnRpYWwgc2VhcmNoIGF2b2lkcyBwcmUtY29tcHV0aW5nIHNpemVzIGZvciB0aGUgZnVsbCBzZXQgb2YgaXRlbXMgYXMgYSBiaW5hcnkgc2VhcmNoIHdvdWxkLlxuICAgIC8vIFRoZSBvdmVyYWxsIGNvbXBsZXhpdHkgZm9yIHRoaXMgYXBwcm9hY2ggaXMgTyhsb2cgbikuXG4gICAgcmV0dXJuIGZpbmROZWFyZXN0SXRlbUV4cG9uZW50aWFsU2VhcmNoKGl0ZW1UeXBlLCBwcm9wcywgaW5zdGFuY2VQcm9wcywgTWF0aC5tYXgoMCwgbGFzdE1lYXN1cmVkSW5kZXgpLCBvZmZzZXQpO1xuICB9XG59O1xuXG52YXIgZmluZE5lYXJlc3RJdGVtQmluYXJ5U2VhcmNoID0gZnVuY3Rpb24gZmluZE5lYXJlc3RJdGVtQmluYXJ5U2VhcmNoKGl0ZW1UeXBlLCBwcm9wcywgaW5zdGFuY2VQcm9wcywgaGlnaCwgbG93LCBvZmZzZXQpIHtcbiAgd2hpbGUgKGxvdyA8PSBoaWdoKSB7XG4gICAgdmFyIG1pZGRsZSA9IGxvdyArIE1hdGguZmxvb3IoKGhpZ2ggLSBsb3cpIC8gMik7XG4gICAgdmFyIGN1cnJlbnRPZmZzZXQgPSBnZXRJdGVtTWV0YWRhdGEoaXRlbVR5cGUsIHByb3BzLCBtaWRkbGUsIGluc3RhbmNlUHJvcHMpLm9mZnNldDtcblxuICAgIGlmIChjdXJyZW50T2Zmc2V0ID09PSBvZmZzZXQpIHtcbiAgICAgIHJldHVybiBtaWRkbGU7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50T2Zmc2V0IDwgb2Zmc2V0KSB7XG4gICAgICBsb3cgPSBtaWRkbGUgKyAxO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudE9mZnNldCA+IG9mZnNldCkge1xuICAgICAgaGlnaCA9IG1pZGRsZSAtIDE7XG4gICAgfVxuICB9XG5cbiAgaWYgKGxvdyA+IDApIHtcbiAgICByZXR1cm4gbG93IC0gMTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gMDtcbiAgfVxufTtcblxudmFyIGZpbmROZWFyZXN0SXRlbUV4cG9uZW50aWFsU2VhcmNoID0gZnVuY3Rpb24gZmluZE5lYXJlc3RJdGVtRXhwb25lbnRpYWxTZWFyY2goaXRlbVR5cGUsIHByb3BzLCBpbnN0YW5jZVByb3BzLCBpbmRleCwgb2Zmc2V0KSB7XG4gIHZhciBpdGVtQ291bnQgPSBpdGVtVHlwZSA9PT0gJ2NvbHVtbicgPyBwcm9wcy5jb2x1bW5Db3VudCA6IHByb3BzLnJvd0NvdW50O1xuICB2YXIgaW50ZXJ2YWwgPSAxO1xuXG4gIHdoaWxlIChpbmRleCA8IGl0ZW1Db3VudCAmJiBnZXRJdGVtTWV0YWRhdGEoaXRlbVR5cGUsIHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykub2Zmc2V0IDwgb2Zmc2V0KSB7XG4gICAgaW5kZXggKz0gaW50ZXJ2YWw7XG4gICAgaW50ZXJ2YWwgKj0gMjtcbiAgfVxuXG4gIHJldHVybiBmaW5kTmVhcmVzdEl0ZW1CaW5hcnlTZWFyY2goaXRlbVR5cGUsIHByb3BzLCBpbnN0YW5jZVByb3BzLCBNYXRoLm1pbihpbmRleCwgaXRlbUNvdW50IC0gMSksIE1hdGguZmxvb3IoaW5kZXggLyAyKSwgb2Zmc2V0KTtcbn07XG5cbnZhciBnZXRPZmZzZXRGb3JJbmRleEFuZEFsaWdubWVudCA9IGZ1bmN0aW9uIGdldE9mZnNldEZvckluZGV4QW5kQWxpZ25tZW50KGl0ZW1UeXBlLCBwcm9wcywgaW5kZXgsIGFsaWduLCBzY3JvbGxPZmZzZXQsIGluc3RhbmNlUHJvcHMsIHNjcm9sbGJhclNpemUpIHtcbiAgdmFyIHNpemUgPSBpdGVtVHlwZSA9PT0gJ2NvbHVtbicgPyBwcm9wcy53aWR0aCA6IHByb3BzLmhlaWdodDtcbiAgdmFyIGl0ZW1NZXRhZGF0YSA9IGdldEl0ZW1NZXRhZGF0YShpdGVtVHlwZSwgcHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKTsgLy8gR2V0IGVzdGltYXRlZCB0b3RhbCBzaXplIGFmdGVyIEl0ZW1NZXRhZGF0YSBpcyBjb21wdXRlZCxcbiAgLy8gVG8gZW5zdXJlIGl0IHJlZmxlY3RzIGFjdHVhbCBtZWFzdXJlbWVudHMgaW5zdGVhZCBvZiBqdXN0IGVzdGltYXRlcy5cblxuICB2YXIgZXN0aW1hdGVkVG90YWxTaXplID0gaXRlbVR5cGUgPT09ICdjb2x1bW4nID8gZ2V0RXN0aW1hdGVkVG90YWxXaWR0aChwcm9wcywgaW5zdGFuY2VQcm9wcykgOiBnZXRFc3RpbWF0ZWRUb3RhbEhlaWdodChwcm9wcywgaW5zdGFuY2VQcm9wcyk7XG4gIHZhciBtYXhPZmZzZXQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihlc3RpbWF0ZWRUb3RhbFNpemUgLSBzaXplLCBpdGVtTWV0YWRhdGEub2Zmc2V0KSk7XG4gIHZhciBtaW5PZmZzZXQgPSBNYXRoLm1heCgwLCBpdGVtTWV0YWRhdGEub2Zmc2V0IC0gc2l6ZSArIHNjcm9sbGJhclNpemUgKyBpdGVtTWV0YWRhdGEuc2l6ZSk7XG5cbiAgaWYgKGFsaWduID09PSAnc21hcnQnKSB7XG4gICAgaWYgKHNjcm9sbE9mZnNldCA+PSBtaW5PZmZzZXQgLSBzaXplICYmIHNjcm9sbE9mZnNldCA8PSBtYXhPZmZzZXQgKyBzaXplKSB7XG4gICAgICBhbGlnbiA9ICdhdXRvJztcbiAgICB9IGVsc2Uge1xuICAgICAgYWxpZ24gPSAnY2VudGVyJztcbiAgICB9XG4gIH1cblxuICBzd2l0Y2ggKGFsaWduKSB7XG4gICAgY2FzZSAnc3RhcnQnOlxuICAgICAgcmV0dXJuIG1heE9mZnNldDtcblxuICAgIGNhc2UgJ2VuZCc6XG4gICAgICByZXR1cm4gbWluT2Zmc2V0O1xuXG4gICAgY2FzZSAnY2VudGVyJzpcbiAgICAgIHJldHVybiBNYXRoLnJvdW5kKG1pbk9mZnNldCArIChtYXhPZmZzZXQgLSBtaW5PZmZzZXQpIC8gMik7XG5cbiAgICBjYXNlICdhdXRvJzpcbiAgICBkZWZhdWx0OlxuICAgICAgaWYgKHNjcm9sbE9mZnNldCA+PSBtaW5PZmZzZXQgJiYgc2Nyb2xsT2Zmc2V0IDw9IG1heE9mZnNldCkge1xuICAgICAgICByZXR1cm4gc2Nyb2xsT2Zmc2V0O1xuICAgICAgfSBlbHNlIGlmIChtaW5PZmZzZXQgPiBtYXhPZmZzZXQpIHtcbiAgICAgICAgLy8gQmVjYXVzZSB3ZSBvbmx5IHRha2UgaW50byBhY2NvdW50IHRoZSBzY3JvbGxiYXIgc2l6ZSB3aGVuIGNhbGN1bGF0aW5nIG1pbk9mZnNldFxuICAgICAgICAvLyB0aGlzIHZhbHVlIGNhbiBiZSBsYXJnZXIgdGhhbiBtYXhPZmZzZXQgd2hlbiBhdCB0aGUgZW5kIG9mIHRoZSBsaXN0XG4gICAgICAgIHJldHVybiBtaW5PZmZzZXQ7XG4gICAgICB9IGVsc2UgaWYgKHNjcm9sbE9mZnNldCA8IG1pbk9mZnNldCkge1xuICAgICAgICByZXR1cm4gbWluT2Zmc2V0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG1heE9mZnNldDtcbiAgICAgIH1cblxuICB9XG59O1xuXG52YXIgVmFyaWFibGVTaXplR3JpZCA9XG4vKiNfX1BVUkVfXyovXG5jcmVhdGVHcmlkQ29tcG9uZW50KHtcbiAgZ2V0Q29sdW1uT2Zmc2V0OiBmdW5jdGlvbiBnZXRDb2x1bW5PZmZzZXQocHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKSB7XG4gICAgcmV0dXJuIGdldEl0ZW1NZXRhZGF0YSgnY29sdW1uJywgcHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKS5vZmZzZXQ7XG4gIH0sXG4gIGdldENvbHVtblN0YXJ0SW5kZXhGb3JPZmZzZXQ6IGZ1bmN0aW9uIGdldENvbHVtblN0YXJ0SW5kZXhGb3JPZmZzZXQocHJvcHMsIHNjcm9sbExlZnQsIGluc3RhbmNlUHJvcHMpIHtcbiAgICByZXR1cm4gZmluZE5lYXJlc3RJdGVtKCdjb2x1bW4nLCBwcm9wcywgaW5zdGFuY2VQcm9wcywgc2Nyb2xsTGVmdCk7XG4gIH0sXG4gIGdldENvbHVtblN0b3BJbmRleEZvclN0YXJ0SW5kZXg6IGZ1bmN0aW9uIGdldENvbHVtblN0b3BJbmRleEZvclN0YXJ0SW5kZXgocHJvcHMsIHN0YXJ0SW5kZXgsIHNjcm9sbExlZnQsIGluc3RhbmNlUHJvcHMpIHtcbiAgICB2YXIgY29sdW1uQ291bnQgPSBwcm9wcy5jb2x1bW5Db3VudCxcbiAgICAgICAgd2lkdGggPSBwcm9wcy53aWR0aDtcbiAgICB2YXIgaXRlbU1ldGFkYXRhID0gZ2V0SXRlbU1ldGFkYXRhKCdjb2x1bW4nLCBwcm9wcywgc3RhcnRJbmRleCwgaW5zdGFuY2VQcm9wcyk7XG4gICAgdmFyIG1heE9mZnNldCA9IHNjcm9sbExlZnQgKyB3aWR0aDtcbiAgICB2YXIgb2Zmc2V0ID0gaXRlbU1ldGFkYXRhLm9mZnNldCArIGl0ZW1NZXRhZGF0YS5zaXplO1xuICAgIHZhciBzdG9wSW5kZXggPSBzdGFydEluZGV4O1xuXG4gICAgd2hpbGUgKHN0b3BJbmRleCA8IGNvbHVtbkNvdW50IC0gMSAmJiBvZmZzZXQgPCBtYXhPZmZzZXQpIHtcbiAgICAgIHN0b3BJbmRleCsrO1xuICAgICAgb2Zmc2V0ICs9IGdldEl0ZW1NZXRhZGF0YSgnY29sdW1uJywgcHJvcHMsIHN0b3BJbmRleCwgaW5zdGFuY2VQcm9wcykuc2l6ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RvcEluZGV4O1xuICB9LFxuICBnZXRDb2x1bW5XaWR0aDogZnVuY3Rpb24gZ2V0Q29sdW1uV2lkdGgocHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKSB7XG4gICAgcmV0dXJuIGluc3RhbmNlUHJvcHMuY29sdW1uTWV0YWRhdGFNYXBbaW5kZXhdLnNpemU7XG4gIH0sXG4gIGdldEVzdGltYXRlZFRvdGFsSGVpZ2h0OiBnZXRFc3RpbWF0ZWRUb3RhbEhlaWdodCxcbiAgZ2V0RXN0aW1hdGVkVG90YWxXaWR0aDogZ2V0RXN0aW1hdGVkVG90YWxXaWR0aCxcbiAgZ2V0T2Zmc2V0Rm9yQ29sdW1uQW5kQWxpZ25tZW50OiBmdW5jdGlvbiBnZXRPZmZzZXRGb3JDb2x1bW5BbmRBbGlnbm1lbnQocHJvcHMsIGluZGV4LCBhbGlnbiwgc2Nyb2xsT2Zmc2V0LCBpbnN0YW5jZVByb3BzLCBzY3JvbGxiYXJTaXplKSB7XG4gICAgcmV0dXJuIGdldE9mZnNldEZvckluZGV4QW5kQWxpZ25tZW50KCdjb2x1bW4nLCBwcm9wcywgaW5kZXgsIGFsaWduLCBzY3JvbGxPZmZzZXQsIGluc3RhbmNlUHJvcHMsIHNjcm9sbGJhclNpemUpO1xuICB9LFxuICBnZXRPZmZzZXRGb3JSb3dBbmRBbGlnbm1lbnQ6IGZ1bmN0aW9uIGdldE9mZnNldEZvclJvd0FuZEFsaWdubWVudChwcm9wcywgaW5kZXgsIGFsaWduLCBzY3JvbGxPZmZzZXQsIGluc3RhbmNlUHJvcHMsIHNjcm9sbGJhclNpemUpIHtcbiAgICByZXR1cm4gZ2V0T2Zmc2V0Rm9ySW5kZXhBbmRBbGlnbm1lbnQoJ3JvdycsIHByb3BzLCBpbmRleCwgYWxpZ24sIHNjcm9sbE9mZnNldCwgaW5zdGFuY2VQcm9wcywgc2Nyb2xsYmFyU2l6ZSk7XG4gIH0sXG4gIGdldFJvd09mZnNldDogZnVuY3Rpb24gZ2V0Um93T2Zmc2V0KHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykge1xuICAgIHJldHVybiBnZXRJdGVtTWV0YWRhdGEoJ3JvdycsIHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykub2Zmc2V0O1xuICB9LFxuICBnZXRSb3dIZWlnaHQ6IGZ1bmN0aW9uIGdldFJvd0hlaWdodChwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpIHtcbiAgICByZXR1cm4gaW5zdGFuY2VQcm9wcy5yb3dNZXRhZGF0YU1hcFtpbmRleF0uc2l6ZTtcbiAgfSxcbiAgZ2V0Um93U3RhcnRJbmRleEZvck9mZnNldDogZnVuY3Rpb24gZ2V0Um93U3RhcnRJbmRleEZvck9mZnNldChwcm9wcywgc2Nyb2xsVG9wLCBpbnN0YW5jZVByb3BzKSB7XG4gICAgcmV0dXJuIGZpbmROZWFyZXN0SXRlbSgncm93JywgcHJvcHMsIGluc3RhbmNlUHJvcHMsIHNjcm9sbFRvcCk7XG4gIH0sXG4gIGdldFJvd1N0b3BJbmRleEZvclN0YXJ0SW5kZXg6IGZ1bmN0aW9uIGdldFJvd1N0b3BJbmRleEZvclN0YXJ0SW5kZXgocHJvcHMsIHN0YXJ0SW5kZXgsIHNjcm9sbFRvcCwgaW5zdGFuY2VQcm9wcykge1xuICAgIHZhciByb3dDb3VudCA9IHByb3BzLnJvd0NvdW50LFxuICAgICAgICBoZWlnaHQgPSBwcm9wcy5oZWlnaHQ7XG4gICAgdmFyIGl0ZW1NZXRhZGF0YSA9IGdldEl0ZW1NZXRhZGF0YSgncm93JywgcHJvcHMsIHN0YXJ0SW5kZXgsIGluc3RhbmNlUHJvcHMpO1xuICAgIHZhciBtYXhPZmZzZXQgPSBzY3JvbGxUb3AgKyBoZWlnaHQ7XG4gICAgdmFyIG9mZnNldCA9IGl0ZW1NZXRhZGF0YS5vZmZzZXQgKyBpdGVtTWV0YWRhdGEuc2l6ZTtcbiAgICB2YXIgc3RvcEluZGV4ID0gc3RhcnRJbmRleDtcblxuICAgIHdoaWxlIChzdG9wSW5kZXggPCByb3dDb3VudCAtIDEgJiYgb2Zmc2V0IDwgbWF4T2Zmc2V0KSB7XG4gICAgICBzdG9wSW5kZXgrKztcbiAgICAgIG9mZnNldCArPSBnZXRJdGVtTWV0YWRhdGEoJ3JvdycsIHByb3BzLCBzdG9wSW5kZXgsIGluc3RhbmNlUHJvcHMpLnNpemU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0b3BJbmRleDtcbiAgfSxcbiAgaW5pdEluc3RhbmNlUHJvcHM6IGZ1bmN0aW9uIGluaXRJbnN0YW5jZVByb3BzKHByb3BzLCBpbnN0YW5jZSkge1xuICAgIHZhciBfcmVmNSA9IHByb3BzLFxuICAgICAgICBlc3RpbWF0ZWRDb2x1bW5XaWR0aCA9IF9yZWY1LmVzdGltYXRlZENvbHVtbldpZHRoLFxuICAgICAgICBlc3RpbWF0ZWRSb3dIZWlnaHQgPSBfcmVmNS5lc3RpbWF0ZWRSb3dIZWlnaHQ7XG4gICAgdmFyIGluc3RhbmNlUHJvcHMgPSB7XG4gICAgICBjb2x1bW5NZXRhZGF0YU1hcDoge30sXG4gICAgICBlc3RpbWF0ZWRDb2x1bW5XaWR0aDogZXN0aW1hdGVkQ29sdW1uV2lkdGggfHwgREVGQVVMVF9FU1RJTUFURURfSVRFTV9TSVpFLFxuICAgICAgZXN0aW1hdGVkUm93SGVpZ2h0OiBlc3RpbWF0ZWRSb3dIZWlnaHQgfHwgREVGQVVMVF9FU1RJTUFURURfSVRFTV9TSVpFLFxuICAgICAgbGFzdE1lYXN1cmVkQ29sdW1uSW5kZXg6IC0xLFxuICAgICAgbGFzdE1lYXN1cmVkUm93SW5kZXg6IC0xLFxuICAgICAgcm93TWV0YWRhdGFNYXA6IHt9XG4gICAgfTtcblxuICAgIGluc3RhbmNlLnJlc2V0QWZ0ZXJDb2x1bW5JbmRleCA9IGZ1bmN0aW9uIChjb2x1bW5JbmRleCwgc2hvdWxkRm9yY2VVcGRhdGUpIHtcbiAgICAgIGlmIChzaG91bGRGb3JjZVVwZGF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHNob3VsZEZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaW5zdGFuY2UucmVzZXRBZnRlckluZGljZXMoe1xuICAgICAgICBjb2x1bW5JbmRleDogY29sdW1uSW5kZXgsXG4gICAgICAgIHNob3VsZEZvcmNlVXBkYXRlOiBzaG91bGRGb3JjZVVwZGF0ZVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGluc3RhbmNlLnJlc2V0QWZ0ZXJSb3dJbmRleCA9IGZ1bmN0aW9uIChyb3dJbmRleCwgc2hvdWxkRm9yY2VVcGRhdGUpIHtcbiAgICAgIGlmIChzaG91bGRGb3JjZVVwZGF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHNob3VsZEZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaW5zdGFuY2UucmVzZXRBZnRlckluZGljZXMoe1xuICAgICAgICByb3dJbmRleDogcm93SW5kZXgsXG4gICAgICAgIHNob3VsZEZvcmNlVXBkYXRlOiBzaG91bGRGb3JjZVVwZGF0ZVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGluc3RhbmNlLnJlc2V0QWZ0ZXJJbmRpY2VzID0gZnVuY3Rpb24gKF9yZWY2KSB7XG4gICAgICB2YXIgY29sdW1uSW5kZXggPSBfcmVmNi5jb2x1bW5JbmRleCxcbiAgICAgICAgICByb3dJbmRleCA9IF9yZWY2LnJvd0luZGV4LFxuICAgICAgICAgIF9yZWY2JHNob3VsZEZvcmNlVXBkYSA9IF9yZWY2LnNob3VsZEZvcmNlVXBkYXRlLFxuICAgICAgICAgIHNob3VsZEZvcmNlVXBkYXRlID0gX3JlZjYkc2hvdWxkRm9yY2VVcGRhID09PSB2b2lkIDAgPyB0cnVlIDogX3JlZjYkc2hvdWxkRm9yY2VVcGRhO1xuXG4gICAgICBpZiAodHlwZW9mIGNvbHVtbkluZGV4ID09PSAnbnVtYmVyJykge1xuICAgICAgICBpbnN0YW5jZVByb3BzLmxhc3RNZWFzdXJlZENvbHVtbkluZGV4ID0gTWF0aC5taW4oaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRDb2x1bW5JbmRleCwgY29sdW1uSW5kZXggLSAxKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiByb3dJbmRleCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRSb3dJbmRleCA9IE1hdGgubWluKGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkUm93SW5kZXgsIHJvd0luZGV4IC0gMSk7XG4gICAgICB9IC8vIFdlIGNvdWxkIHBvdGVudGlhbGx5IG9wdGltaXplIGZ1cnRoZXIgYnkgb25seSBldmljdGluZyBzdHlsZXMgYWZ0ZXIgdGhpcyBpbmRleCxcbiAgICAgIC8vIEJ1dCBzaW5jZSBzdHlsZXMgYXJlIG9ubHkgY2FjaGVkIHdoaWxlIHNjcm9sbGluZyBpcyBpbiBwcm9ncmVzcy1cbiAgICAgIC8vIEl0IHNlZW1zIGFuIHVubmVjZXNzYXJ5IG9wdGltaXphdGlvbi5cbiAgICAgIC8vIEl0J3MgdW5saWtlbHkgdGhhdCByZXNldEFmdGVySW5kZXgoKSB3aWxsIGJlIGNhbGxlZCB3aGlsZSBhIHVzZXIgaXMgc2Nyb2xsaW5nLlxuXG5cbiAgICAgIGluc3RhbmNlLl9nZXRJdGVtU3R5bGVDYWNoZSgtMSk7XG5cbiAgICAgIGlmIChzaG91bGRGb3JjZVVwZGF0ZSkge1xuICAgICAgICBpbnN0YW5jZS5mb3JjZVVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gaW5zdGFuY2VQcm9wcztcbiAgfSxcbiAgc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZTogZmFsc2UsXG4gIHZhbGlkYXRlUHJvcHM6IGZ1bmN0aW9uIHZhbGlkYXRlUHJvcHMoX3JlZjcpIHtcbiAgICB2YXIgY29sdW1uV2lkdGggPSBfcmVmNy5jb2x1bW5XaWR0aCxcbiAgICAgICAgcm93SGVpZ2h0ID0gX3JlZjcucm93SGVpZ2h0O1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmICh0eXBlb2YgY29sdW1uV2lkdGggIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJjb2x1bW5XaWR0aFwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ1ZhbHVlIHNob3VsZCBiZSBhIGZ1bmN0aW9uLiAnICsgKFwiXFxcIlwiICsgKGNvbHVtbldpZHRoID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIGNvbHVtbldpZHRoKSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiByb3dIZWlnaHQgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJyb3dIZWlnaHRcIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdWYWx1ZSBzaG91bGQgYmUgYSBmdW5jdGlvbi4gJyArIChcIlxcXCJcIiArIChyb3dIZWlnaHQgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2Ygcm93SGVpZ2h0KSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxudmFyIElTX1NDUk9MTElOR19ERUJPVU5DRV9JTlRFUlZBTCQxID0gMTUwO1xuXG52YXIgZGVmYXVsdEl0ZW1LZXkkMSA9IGZ1bmN0aW9uIGRlZmF1bHRJdGVtS2V5KGluZGV4LCBkYXRhKSB7XG4gIHJldHVybiBpbmRleDtcbn07IC8vIEluIERFViBtb2RlLCB0aGlzIFNldCBoZWxwcyB1cyBvbmx5IGxvZyBhIHdhcm5pbmcgb25jZSBwZXIgY29tcG9uZW50IGluc3RhbmNlLlxuLy8gVGhpcyBhdm9pZHMgc3BhbW1pbmcgdGhlIGNvbnNvbGUgZXZlcnkgdGltZSBhIHJlbmRlciBoYXBwZW5zLlxuXG5cbnZhciBkZXZXYXJuaW5nc0RpcmVjdGlvbiA9IG51bGw7XG52YXIgZGV2V2FybmluZ3NUYWdOYW1lJDEgPSBudWxsO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5XZWFrU2V0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGRldldhcm5pbmdzRGlyZWN0aW9uID1cbiAgICAvKiNfX1BVUkVfXyovXG4gICAgbmV3IFdlYWtTZXQoKTtcbiAgICBkZXZXYXJuaW5nc1RhZ05hbWUkMSA9XG4gICAgLyojX19QVVJFX18qL1xuICAgIG5ldyBXZWFrU2V0KCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlTGlzdENvbXBvbmVudChfcmVmKSB7XG4gIHZhciBfY2xhc3MsIF90ZW1wO1xuXG4gIHZhciBnZXRJdGVtT2Zmc2V0ID0gX3JlZi5nZXRJdGVtT2Zmc2V0LFxuICAgICAgZ2V0RXN0aW1hdGVkVG90YWxTaXplID0gX3JlZi5nZXRFc3RpbWF0ZWRUb3RhbFNpemUsXG4gICAgICBnZXRJdGVtU2l6ZSA9IF9yZWYuZ2V0SXRlbVNpemUsXG4gICAgICBnZXRPZmZzZXRGb3JJbmRleEFuZEFsaWdubWVudCA9IF9yZWYuZ2V0T2Zmc2V0Rm9ySW5kZXhBbmRBbGlnbm1lbnQsXG4gICAgICBnZXRTdGFydEluZGV4Rm9yT2Zmc2V0ID0gX3JlZi5nZXRTdGFydEluZGV4Rm9yT2Zmc2V0LFxuICAgICAgZ2V0U3RvcEluZGV4Rm9yU3RhcnRJbmRleCA9IF9yZWYuZ2V0U3RvcEluZGV4Rm9yU3RhcnRJbmRleCxcbiAgICAgIGluaXRJbnN0YW5jZVByb3BzID0gX3JlZi5pbml0SW5zdGFuY2VQcm9wcyxcbiAgICAgIHNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2UgPSBfcmVmLnNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2UsXG4gICAgICB2YWxpZGF0ZVByb3BzID0gX3JlZi52YWxpZGF0ZVByb3BzO1xuICByZXR1cm4gX3RlbXAgPSBfY2xhc3MgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uIChfUHVyZUNvbXBvbmVudCkge1xuICAgIF9pbmhlcml0c0xvb3NlKExpc3QsIF9QdXJlQ29tcG9uZW50KTtcblxuICAgIC8vIEFsd2F5cyB1c2UgZXhwbGljaXQgY29uc3RydWN0b3IgZm9yIFJlYWN0IGNvbXBvbmVudHMuXG4gICAgLy8gSXQgcHJvZHVjZXMgbGVzcyBjb2RlIGFmdGVyIHRyYW5zcGlsYXRpb24uICgjMjYpXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtY29uc3RydWN0b3JcbiAgICBmdW5jdGlvbiBMaXN0KHByb3BzKSB7XG4gICAgICB2YXIgX3RoaXM7XG5cbiAgICAgIF90aGlzID0gX1B1cmVDb21wb25lbnQuY2FsbCh0aGlzLCBwcm9wcykgfHwgdGhpcztcbiAgICAgIF90aGlzLl9pbnN0YW5jZVByb3BzID0gaW5pdEluc3RhbmNlUHJvcHMoX3RoaXMucHJvcHMsIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpKTtcbiAgICAgIF90aGlzLl9vdXRlclJlZiA9IHZvaWQgMDtcbiAgICAgIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkID0gbnVsbDtcbiAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICBpbnN0YW5jZTogX2Fzc2VydFRoaXNJbml0aWFsaXplZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksXG4gICAgICAgIGlzU2Nyb2xsaW5nOiBmYWxzZSxcbiAgICAgICAgc2Nyb2xsRGlyZWN0aW9uOiAnZm9yd2FyZCcsXG4gICAgICAgIHNjcm9sbE9mZnNldDogdHlwZW9mIF90aGlzLnByb3BzLmluaXRpYWxTY3JvbGxPZmZzZXQgPT09ICdudW1iZXInID8gX3RoaXMucHJvcHMuaW5pdGlhbFNjcm9sbE9mZnNldCA6IDAsXG4gICAgICAgIHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZDogZmFsc2VcbiAgICAgIH07XG4gICAgICBfdGhpcy5fY2FsbE9uSXRlbXNSZW5kZXJlZCA9IHZvaWQgMDtcbiAgICAgIF90aGlzLl9jYWxsT25JdGVtc1JlbmRlcmVkID0gbWVtb2l6ZU9uZShmdW5jdGlvbiAob3ZlcnNjYW5TdGFydEluZGV4LCBvdmVyc2NhblN0b3BJbmRleCwgdmlzaWJsZVN0YXJ0SW5kZXgsIHZpc2libGVTdG9wSW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnByb3BzLm9uSXRlbXNSZW5kZXJlZCh7XG4gICAgICAgICAgb3ZlcnNjYW5TdGFydEluZGV4OiBvdmVyc2NhblN0YXJ0SW5kZXgsXG4gICAgICAgICAgb3ZlcnNjYW5TdG9wSW5kZXg6IG92ZXJzY2FuU3RvcEluZGV4LFxuICAgICAgICAgIHZpc2libGVTdGFydEluZGV4OiB2aXNpYmxlU3RhcnRJbmRleCxcbiAgICAgICAgICB2aXNpYmxlU3RvcEluZGV4OiB2aXNpYmxlU3RvcEluZGV4XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBfdGhpcy5fY2FsbE9uU2Nyb2xsID0gdm9pZCAwO1xuICAgICAgX3RoaXMuX2NhbGxPblNjcm9sbCA9IG1lbW9pemVPbmUoZnVuY3Rpb24gKHNjcm9sbERpcmVjdGlvbiwgc2Nyb2xsT2Zmc2V0LCBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnByb3BzLm9uU2Nyb2xsKHtcbiAgICAgICAgICBzY3JvbGxEaXJlY3Rpb246IHNjcm9sbERpcmVjdGlvbixcbiAgICAgICAgICBzY3JvbGxPZmZzZXQ6IHNjcm9sbE9mZnNldCxcbiAgICAgICAgICBzY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQ6IHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgX3RoaXMuX2dldEl0ZW1TdHlsZSA9IHZvaWQgMDtcblxuICAgICAgX3RoaXMuX2dldEl0ZW1TdHlsZSA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICB2YXIgX3RoaXMkcHJvcHMgPSBfdGhpcy5wcm9wcyxcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IF90aGlzJHByb3BzLmRpcmVjdGlvbixcbiAgICAgICAgICAgIGl0ZW1TaXplID0gX3RoaXMkcHJvcHMuaXRlbVNpemUsXG4gICAgICAgICAgICBsYXlvdXQgPSBfdGhpcyRwcm9wcy5sYXlvdXQ7XG5cbiAgICAgICAgdmFyIGl0ZW1TdHlsZUNhY2hlID0gX3RoaXMuX2dldEl0ZW1TdHlsZUNhY2hlKHNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2UgJiYgaXRlbVNpemUsIHNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2UgJiYgbGF5b3V0LCBzaG91bGRSZXNldFN0eWxlQ2FjaGVPbkl0ZW1TaXplQ2hhbmdlICYmIGRpcmVjdGlvbik7XG5cbiAgICAgICAgdmFyIHN0eWxlO1xuXG4gICAgICAgIGlmIChpdGVtU3R5bGVDYWNoZS5oYXNPd25Qcm9wZXJ0eShpbmRleCkpIHtcbiAgICAgICAgICBzdHlsZSA9IGl0ZW1TdHlsZUNhY2hlW2luZGV4XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgX29mZnNldCA9IGdldEl0ZW1PZmZzZXQoX3RoaXMucHJvcHMsIGluZGV4LCBfdGhpcy5faW5zdGFuY2VQcm9wcyk7XG5cbiAgICAgICAgICB2YXIgc2l6ZSA9IGdldEl0ZW1TaXplKF90aGlzLnByb3BzLCBpbmRleCwgX3RoaXMuX2luc3RhbmNlUHJvcHMpOyAvLyBUT0RPIERlcHJlY2F0ZSBkaXJlY3Rpb24gXCJob3Jpem9udGFsXCJcblxuICAgICAgICAgIHZhciBpc0hvcml6b250YWwgPSBkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJyB8fCBsYXlvdXQgPT09ICdob3Jpem9udGFsJztcbiAgICAgICAgICB2YXIgaXNSdGwgPSBkaXJlY3Rpb24gPT09ICdydGwnO1xuICAgICAgICAgIHZhciBvZmZzZXRIb3Jpem9udGFsID0gaXNIb3Jpem9udGFsID8gX29mZnNldCA6IDA7XG4gICAgICAgICAgaXRlbVN0eWxlQ2FjaGVbaW5kZXhdID0gc3R5bGUgPSB7XG4gICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgIGxlZnQ6IGlzUnRsID8gdW5kZWZpbmVkIDogb2Zmc2V0SG9yaXpvbnRhbCxcbiAgICAgICAgICAgIHJpZ2h0OiBpc1J0bCA/IG9mZnNldEhvcml6b250YWwgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB0b3A6ICFpc0hvcml6b250YWwgPyBfb2Zmc2V0IDogMCxcbiAgICAgICAgICAgIGhlaWdodDogIWlzSG9yaXpvbnRhbCA/IHNpemUgOiAnMTAwJScsXG4gICAgICAgICAgICB3aWR0aDogaXNIb3Jpem9udGFsID8gc2l6ZSA6ICcxMDAlJ1xuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5fZ2V0SXRlbVN0eWxlQ2FjaGUgPSB2b2lkIDA7XG4gICAgICBfdGhpcy5fZ2V0SXRlbVN0eWxlQ2FjaGUgPSBtZW1vaXplT25lKGZ1bmN0aW9uIChfLCBfXywgX19fKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH0pO1xuXG4gICAgICBfdGhpcy5fb25TY3JvbGxIb3Jpem9udGFsID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBfZXZlbnQkY3VycmVudFRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQsXG4gICAgICAgICAgICBjbGllbnRXaWR0aCA9IF9ldmVudCRjdXJyZW50VGFyZ2V0LmNsaWVudFdpZHRoLFxuICAgICAgICAgICAgc2Nyb2xsTGVmdCA9IF9ldmVudCRjdXJyZW50VGFyZ2V0LnNjcm9sbExlZnQsXG4gICAgICAgICAgICBzY3JvbGxXaWR0aCA9IF9ldmVudCRjdXJyZW50VGFyZ2V0LnNjcm9sbFdpZHRoO1xuXG4gICAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChwcmV2U3RhdGUpIHtcbiAgICAgICAgICBpZiAocHJldlN0YXRlLnNjcm9sbE9mZnNldCA9PT0gc2Nyb2xsTGVmdCkge1xuICAgICAgICAgICAgLy8gU2Nyb2xsIHBvc2l0aW9uIG1heSBoYXZlIGJlZW4gdXBkYXRlZCBieSBjRE0vY0RVLFxuICAgICAgICAgICAgLy8gSW4gd2hpY2ggY2FzZSB3ZSBkb24ndCBuZWVkIHRvIHRyaWdnZXIgYW5vdGhlciByZW5kZXIsXG4gICAgICAgICAgICAvLyBBbmQgd2UgZG9uJ3Qgd2FudCB0byB1cGRhdGUgc3RhdGUuaXNTY3JvbGxpbmcuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gX3RoaXMucHJvcHMuZGlyZWN0aW9uO1xuICAgICAgICAgIHZhciBzY3JvbGxPZmZzZXQgPSBzY3JvbGxMZWZ0O1xuXG4gICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ3J0bCcpIHtcbiAgICAgICAgICAgIC8vIFRSSUNLWSBBY2NvcmRpbmcgdG8gdGhlIHNwZWMsIHNjcm9sbExlZnQgc2hvdWxkIGJlIG5lZ2F0aXZlIGZvciBSVEwgYWxpZ25lZCBlbGVtZW50cy5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgbm90IHRoZSBjYXNlIGZvciBhbGwgYnJvd3NlcnMgdGhvdWdoIChlLmcuIENocm9tZSByZXBvcnRzIHZhbHVlcyBhcyBwb3NpdGl2ZSwgbWVhc3VyZWQgcmVsYXRpdmUgdG8gdGhlIGxlZnQpLlxuICAgICAgICAgICAgLy8gSXQncyBhbHNvIGVhc2llciBmb3IgdGhpcyBjb21wb25lbnQgaWYgd2UgY29udmVydCBvZmZzZXRzIHRvIHRoZSBzYW1lIGZvcm1hdCBhcyB0aGV5IHdvdWxkIGJlIGluIGZvciBsdHIuXG4gICAgICAgICAgICAvLyBTbyB0aGUgc2ltcGxlc3Qgc29sdXRpb24gaXMgdG8gZGV0ZXJtaW5lIHdoaWNoIGJyb3dzZXIgYmVoYXZpb3Igd2UncmUgZGVhbGluZyB3aXRoLCBhbmQgY29udmVydCBiYXNlZCBvbiBpdC5cbiAgICAgICAgICAgIHN3aXRjaCAoZ2V0UlRMT2Zmc2V0VHlwZSgpKSB7XG4gICAgICAgICAgICAgIGNhc2UgJ25lZ2F0aXZlJzpcbiAgICAgICAgICAgICAgICBzY3JvbGxPZmZzZXQgPSAtc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlICdwb3NpdGl2ZS1kZXNjZW5kaW5nJzpcbiAgICAgICAgICAgICAgICBzY3JvbGxPZmZzZXQgPSBzY3JvbGxXaWR0aCAtIGNsaWVudFdpZHRoIC0gc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IC8vIFByZXZlbnQgU2FmYXJpJ3MgZWxhc3RpYyBzY3JvbGxpbmcgZnJvbSBjYXVzaW5nIHZpc3VhbCBzaGFraW5nIHdoZW4gc2Nyb2xsaW5nIHBhc3QgYm91bmRzLlxuXG5cbiAgICAgICAgICBzY3JvbGxPZmZzZXQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihzY3JvbGxPZmZzZXQsIHNjcm9sbFdpZHRoIC0gY2xpZW50V2lkdGgpKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNTY3JvbGxpbmc6IHRydWUsXG4gICAgICAgICAgICBzY3JvbGxEaXJlY3Rpb246IHByZXZTdGF0ZS5zY3JvbGxPZmZzZXQgPCBzY3JvbGxMZWZ0ID8gJ2ZvcndhcmQnIDogJ2JhY2t3YXJkJyxcbiAgICAgICAgICAgIHNjcm9sbE9mZnNldDogc2Nyb2xsT2Zmc2V0LFxuICAgICAgICAgICAgc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkOiBmYWxzZVxuICAgICAgICAgIH07XG4gICAgICAgIH0sIF90aGlzLl9yZXNldElzU2Nyb2xsaW5nRGVib3VuY2VkKTtcbiAgICAgIH07XG5cbiAgICAgIF90aGlzLl9vblNjcm9sbFZlcnRpY2FsID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBfZXZlbnQkY3VycmVudFRhcmdldDIgPSBldmVudC5jdXJyZW50VGFyZ2V0LFxuICAgICAgICAgICAgY2xpZW50SGVpZ2h0ID0gX2V2ZW50JGN1cnJlbnRUYXJnZXQyLmNsaWVudEhlaWdodCxcbiAgICAgICAgICAgIHNjcm9sbEhlaWdodCA9IF9ldmVudCRjdXJyZW50VGFyZ2V0Mi5zY3JvbGxIZWlnaHQsXG4gICAgICAgICAgICBzY3JvbGxUb3AgPSBfZXZlbnQkY3VycmVudFRhcmdldDIuc2Nyb2xsVG9wO1xuXG4gICAgICAgIF90aGlzLnNldFN0YXRlKGZ1bmN0aW9uIChwcmV2U3RhdGUpIHtcbiAgICAgICAgICBpZiAocHJldlN0YXRlLnNjcm9sbE9mZnNldCA9PT0gc2Nyb2xsVG9wKSB7XG4gICAgICAgICAgICAvLyBTY3JvbGwgcG9zaXRpb24gbWF5IGhhdmUgYmVlbiB1cGRhdGVkIGJ5IGNETS9jRFUsXG4gICAgICAgICAgICAvLyBJbiB3aGljaCBjYXNlIHdlIGRvbid0IG5lZWQgdG8gdHJpZ2dlciBhbm90aGVyIHJlbmRlcixcbiAgICAgICAgICAgIC8vIEFuZCB3ZSBkb24ndCB3YW50IHRvIHVwZGF0ZSBzdGF0ZS5pc1Njcm9sbGluZy5cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH0gLy8gUHJldmVudCBTYWZhcmkncyBlbGFzdGljIHNjcm9sbGluZyBmcm9tIGNhdXNpbmcgdmlzdWFsIHNoYWtpbmcgd2hlbiBzY3JvbGxpbmcgcGFzdCBib3VuZHMuXG5cblxuICAgICAgICAgIHZhciBzY3JvbGxPZmZzZXQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihzY3JvbGxUb3AsIHNjcm9sbEhlaWdodCAtIGNsaWVudEhlaWdodCkpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc1Njcm9sbGluZzogdHJ1ZSxcbiAgICAgICAgICAgIHNjcm9sbERpcmVjdGlvbjogcHJldlN0YXRlLnNjcm9sbE9mZnNldCA8IHNjcm9sbE9mZnNldCA/ICdmb3J3YXJkJyA6ICdiYWNrd2FyZCcsXG4gICAgICAgICAgICBzY3JvbGxPZmZzZXQ6IHNjcm9sbE9mZnNldCxcbiAgICAgICAgICAgIHNjcm9sbFVwZGF0ZVdhc1JlcXVlc3RlZDogZmFsc2VcbiAgICAgICAgICB9O1xuICAgICAgICB9LCBfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ0RlYm91bmNlZCk7XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5fb3V0ZXJSZWZTZXR0ZXIgPSBmdW5jdGlvbiAocmVmKSB7XG4gICAgICAgIHZhciBvdXRlclJlZiA9IF90aGlzLnByb3BzLm91dGVyUmVmO1xuICAgICAgICBfdGhpcy5fb3V0ZXJSZWYgPSByZWY7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBvdXRlclJlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIG91dGVyUmVmKHJlZik7XG4gICAgICAgIH0gZWxzZSBpZiAob3V0ZXJSZWYgIT0gbnVsbCAmJiB0eXBlb2Ygb3V0ZXJSZWYgPT09ICdvYmplY3QnICYmIG91dGVyUmVmLmhhc093blByb3BlcnR5KCdjdXJyZW50JykpIHtcbiAgICAgICAgICBvdXRlclJlZi5jdXJyZW50ID0gcmVmO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ0RlYm91bmNlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF90aGlzLl9yZXNldElzU2Nyb2xsaW5nVGltZW91dElkICE9PSBudWxsKSB7XG4gICAgICAgICAgY2FuY2VsVGltZW91dChfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCA9IHJlcXVlc3RUaW1lb3V0KF90aGlzLl9yZXNldElzU2Nyb2xsaW5nLCBJU19TQ1JPTExJTkdfREVCT1VOQ0VfSU5URVJWQUwkMSk7XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5fcmVzZXRJc1Njcm9sbGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMuX3Jlc2V0SXNTY3JvbGxpbmdUaW1lb3V0SWQgPSBudWxsO1xuXG4gICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBpc1Njcm9sbGluZzogZmFsc2VcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIENsZWFyIHN0eWxlIGNhY2hlIGFmdGVyIHN0YXRlIHVwZGF0ZSBoYXMgYmVlbiBjb21taXR0ZWQuXG4gICAgICAgICAgLy8gVGhpcyB3YXkgd2UgZG9uJ3QgYnJlYWsgcHVyZSBzQ1UgZm9yIGl0ZW1zIHRoYXQgZG9uJ3QgdXNlIGlzU2Nyb2xsaW5nIHBhcmFtLlxuICAgICAgICAgIF90aGlzLl9nZXRJdGVtU3R5bGVDYWNoZSgtMSwgbnVsbCk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIExpc3QuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzID0gZnVuY3Rpb24gZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5leHRQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICB2YWxpZGF0ZVNoYXJlZFByb3BzJDEobmV4dFByb3BzLCBwcmV2U3RhdGUpO1xuICAgICAgdmFsaWRhdGVQcm9wcyhuZXh0UHJvcHMpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIHZhciBfcHJvdG8gPSBMaXN0LnByb3RvdHlwZTtcblxuICAgIF9wcm90by5zY3JvbGxUbyA9IGZ1bmN0aW9uIHNjcm9sbFRvKHNjcm9sbE9mZnNldCkge1xuICAgICAgc2Nyb2xsT2Zmc2V0ID0gTWF0aC5tYXgoMCwgc2Nyb2xsT2Zmc2V0KTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoZnVuY3Rpb24gKHByZXZTdGF0ZSkge1xuICAgICAgICBpZiAocHJldlN0YXRlLnNjcm9sbE9mZnNldCA9PT0gc2Nyb2xsT2Zmc2V0KSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNjcm9sbERpcmVjdGlvbjogcHJldlN0YXRlLnNjcm9sbE9mZnNldCA8IHNjcm9sbE9mZnNldCA/ICdmb3J3YXJkJyA6ICdiYWNrd2FyZCcsXG4gICAgICAgICAgc2Nyb2xsT2Zmc2V0OiBzY3JvbGxPZmZzZXQsXG4gICAgICAgICAgc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkOiB0cnVlXG4gICAgICAgIH07XG4gICAgICB9LCB0aGlzLl9yZXNldElzU2Nyb2xsaW5nRGVib3VuY2VkKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLnNjcm9sbFRvSXRlbSA9IGZ1bmN0aW9uIHNjcm9sbFRvSXRlbShpbmRleCwgYWxpZ24pIHtcbiAgICAgIGlmIChhbGlnbiA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGFsaWduID0gJ2F1dG8nO1xuICAgICAgfVxuXG4gICAgICB2YXIgaXRlbUNvdW50ID0gdGhpcy5wcm9wcy5pdGVtQ291bnQ7XG4gICAgICB2YXIgc2Nyb2xsT2Zmc2V0ID0gdGhpcy5zdGF0ZS5zY3JvbGxPZmZzZXQ7XG4gICAgICBpbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKGluZGV4LCBpdGVtQ291bnQgLSAxKSk7XG4gICAgICB0aGlzLnNjcm9sbFRvKGdldE9mZnNldEZvckluZGV4QW5kQWxpZ25tZW50KHRoaXMucHJvcHMsIGluZGV4LCBhbGlnbiwgc2Nyb2xsT2Zmc2V0LCB0aGlzLl9pbnN0YW5jZVByb3BzKSk7XG4gICAgfTtcblxuICAgIF9wcm90by5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzMiA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgZGlyZWN0aW9uID0gX3RoaXMkcHJvcHMyLmRpcmVjdGlvbixcbiAgICAgICAgICBpbml0aWFsU2Nyb2xsT2Zmc2V0ID0gX3RoaXMkcHJvcHMyLmluaXRpYWxTY3JvbGxPZmZzZXQsXG4gICAgICAgICAgbGF5b3V0ID0gX3RoaXMkcHJvcHMyLmxheW91dDtcblxuICAgICAgaWYgKHR5cGVvZiBpbml0aWFsU2Nyb2xsT2Zmc2V0ID09PSAnbnVtYmVyJyAmJiB0aGlzLl9vdXRlclJlZiAhPSBudWxsKSB7XG4gICAgICAgIHZhciBvdXRlclJlZiA9IHRoaXMuX291dGVyUmVmOyAvLyBUT0RPIERlcHJlY2F0ZSBkaXJlY3Rpb24gXCJob3Jpem9udGFsXCJcblxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCcgfHwgbGF5b3V0ID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICBvdXRlclJlZi5zY3JvbGxMZWZ0ID0gaW5pdGlhbFNjcm9sbE9mZnNldDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvdXRlclJlZi5zY3JvbGxUb3AgPSBpbml0aWFsU2Nyb2xsT2Zmc2V0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NhbGxQcm9wc0NhbGxiYWNrcygpO1xuICAgIH07XG5cbiAgICBfcHJvdG8uY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzMyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgZGlyZWN0aW9uID0gX3RoaXMkcHJvcHMzLmRpcmVjdGlvbixcbiAgICAgICAgICBsYXlvdXQgPSBfdGhpcyRwcm9wczMubGF5b3V0O1xuICAgICAgdmFyIF90aGlzJHN0YXRlID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICBzY3JvbGxPZmZzZXQgPSBfdGhpcyRzdGF0ZS5zY3JvbGxPZmZzZXQsXG4gICAgICAgICAgc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkID0gX3RoaXMkc3RhdGUuc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkO1xuXG4gICAgICBpZiAoc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkICYmIHRoaXMuX291dGVyUmVmICE9IG51bGwpIHtcbiAgICAgICAgdmFyIG91dGVyUmVmID0gdGhpcy5fb3V0ZXJSZWY7IC8vIFRPRE8gRGVwcmVjYXRlIGRpcmVjdGlvbiBcImhvcml6b250YWxcIlxuXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJyB8fCBsYXlvdXQgPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdydGwnKSB7XG4gICAgICAgICAgICAvLyBUUklDS1kgQWNjb3JkaW5nIHRvIHRoZSBzcGVjLCBzY3JvbGxMZWZ0IHNob3VsZCBiZSBuZWdhdGl2ZSBmb3IgUlRMIGFsaWduZWQgZWxlbWVudHMuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIG5vdCB0aGUgY2FzZSBmb3IgYWxsIGJyb3dzZXJzIHRob3VnaCAoZS5nLiBDaHJvbWUgcmVwb3J0cyB2YWx1ZXMgYXMgcG9zaXRpdmUsIG1lYXN1cmVkIHJlbGF0aXZlIHRvIHRoZSBsZWZ0KS5cbiAgICAgICAgICAgIC8vIFNvIHdlIG5lZWQgdG8gZGV0ZXJtaW5lIHdoaWNoIGJyb3dzZXIgYmVoYXZpb3Igd2UncmUgZGVhbGluZyB3aXRoLCBhbmQgbWltaWMgaXQuXG4gICAgICAgICAgICBzd2l0Y2ggKGdldFJUTE9mZnNldFR5cGUoKSkge1xuICAgICAgICAgICAgICBjYXNlICduZWdhdGl2ZSc6XG4gICAgICAgICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsTGVmdCA9IC1zY3JvbGxPZmZzZXQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAncG9zaXRpdmUtYXNjZW5kaW5nJzpcbiAgICAgICAgICAgICAgICBvdXRlclJlZi5zY3JvbGxMZWZ0ID0gc2Nyb2xsT2Zmc2V0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdmFyIGNsaWVudFdpZHRoID0gb3V0ZXJSZWYuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFdpZHRoID0gb3V0ZXJSZWYuc2Nyb2xsV2lkdGg7XG4gICAgICAgICAgICAgICAgb3V0ZXJSZWYuc2Nyb2xsTGVmdCA9IHNjcm9sbFdpZHRoIC0gY2xpZW50V2lkdGggLSBzY3JvbGxPZmZzZXQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG91dGVyUmVmLnNjcm9sbExlZnQgPSBzY3JvbGxPZmZzZXQ7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dGVyUmVmLnNjcm9sbFRvcCA9IHNjcm9sbE9mZnNldDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLl9jYWxsUHJvcHNDYWxsYmFja3MoKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICBpZiAodGhpcy5fcmVzZXRJc1Njcm9sbGluZ1RpbWVvdXRJZCAhPT0gbnVsbCkge1xuICAgICAgICBjYW5jZWxUaW1lb3V0KHRoaXMuX3Jlc2V0SXNTY3JvbGxpbmdUaW1lb3V0SWQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8ucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzNCA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgY2hpbGRyZW4gPSBfdGhpcyRwcm9wczQuY2hpbGRyZW4sXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3RoaXMkcHJvcHM0LmNsYXNzTmFtZSxcbiAgICAgICAgICBkaXJlY3Rpb24gPSBfdGhpcyRwcm9wczQuZGlyZWN0aW9uLFxuICAgICAgICAgIGhlaWdodCA9IF90aGlzJHByb3BzNC5oZWlnaHQsXG4gICAgICAgICAgaW5uZXJSZWYgPSBfdGhpcyRwcm9wczQuaW5uZXJSZWYsXG4gICAgICAgICAgaW5uZXJFbGVtZW50VHlwZSA9IF90aGlzJHByb3BzNC5pbm5lckVsZW1lbnRUeXBlLFxuICAgICAgICAgIGlubmVyVGFnTmFtZSA9IF90aGlzJHByb3BzNC5pbm5lclRhZ05hbWUsXG4gICAgICAgICAgaXRlbUNvdW50ID0gX3RoaXMkcHJvcHM0Lml0ZW1Db3VudCxcbiAgICAgICAgICBpdGVtRGF0YSA9IF90aGlzJHByb3BzNC5pdGVtRGF0YSxcbiAgICAgICAgICBfdGhpcyRwcm9wczQkaXRlbUtleSA9IF90aGlzJHByb3BzNC5pdGVtS2V5LFxuICAgICAgICAgIGl0ZW1LZXkgPSBfdGhpcyRwcm9wczQkaXRlbUtleSA9PT0gdm9pZCAwID8gZGVmYXVsdEl0ZW1LZXkkMSA6IF90aGlzJHByb3BzNCRpdGVtS2V5LFxuICAgICAgICAgIGxheW91dCA9IF90aGlzJHByb3BzNC5sYXlvdXQsXG4gICAgICAgICAgb3V0ZXJFbGVtZW50VHlwZSA9IF90aGlzJHByb3BzNC5vdXRlckVsZW1lbnRUeXBlLFxuICAgICAgICAgIG91dGVyVGFnTmFtZSA9IF90aGlzJHByb3BzNC5vdXRlclRhZ05hbWUsXG4gICAgICAgICAgc3R5bGUgPSBfdGhpcyRwcm9wczQuc3R5bGUsXG4gICAgICAgICAgdXNlSXNTY3JvbGxpbmcgPSBfdGhpcyRwcm9wczQudXNlSXNTY3JvbGxpbmcsXG4gICAgICAgICAgd2lkdGggPSBfdGhpcyRwcm9wczQud2lkdGg7XG4gICAgICB2YXIgaXNTY3JvbGxpbmcgPSB0aGlzLnN0YXRlLmlzU2Nyb2xsaW5nOyAvLyBUT0RPIERlcHJlY2F0ZSBkaXJlY3Rpb24gXCJob3Jpem9udGFsXCJcblxuICAgICAgdmFyIGlzSG9yaXpvbnRhbCA9IGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnIHx8IGxheW91dCA9PT0gJ2hvcml6b250YWwnO1xuICAgICAgdmFyIG9uU2Nyb2xsID0gaXNIb3Jpem9udGFsID8gdGhpcy5fb25TY3JvbGxIb3Jpem9udGFsIDogdGhpcy5fb25TY3JvbGxWZXJ0aWNhbDtcblxuICAgICAgdmFyIF90aGlzJF9nZXRSYW5nZVRvUmVuZCA9IHRoaXMuX2dldFJhbmdlVG9SZW5kZXIoKSxcbiAgICAgICAgICBzdGFydEluZGV4ID0gX3RoaXMkX2dldFJhbmdlVG9SZW5kWzBdLFxuICAgICAgICAgIHN0b3BJbmRleCA9IF90aGlzJF9nZXRSYW5nZVRvUmVuZFsxXTtcblxuICAgICAgdmFyIGl0ZW1zID0gW107XG5cbiAgICAgIGlmIChpdGVtQ291bnQgPiAwKSB7XG4gICAgICAgIGZvciAodmFyIF9pbmRleCA9IHN0YXJ0SW5kZXg7IF9pbmRleCA8PSBzdG9wSW5kZXg7IF9pbmRleCsrKSB7XG4gICAgICAgICAgaXRlbXMucHVzaChjcmVhdGVFbGVtZW50KGNoaWxkcmVuLCB7XG4gICAgICAgICAgICBkYXRhOiBpdGVtRGF0YSxcbiAgICAgICAgICAgIGtleTogaXRlbUtleShfaW5kZXgsIGl0ZW1EYXRhKSxcbiAgICAgICAgICAgIGluZGV4OiBfaW5kZXgsXG4gICAgICAgICAgICBpc1Njcm9sbGluZzogdXNlSXNTY3JvbGxpbmcgPyBpc1Njcm9sbGluZyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLl9nZXRJdGVtU3R5bGUoX2luZGV4KVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfSAvLyBSZWFkIHRoaXMgdmFsdWUgQUZURVIgaXRlbXMgaGF2ZSBiZWVuIGNyZWF0ZWQsXG4gICAgICAvLyBTbyB0aGVpciBhY3R1YWwgc2l6ZXMgKGlmIHZhcmlhYmxlKSBhcmUgdGFrZW4gaW50byBjb25zaWRlcmF0aW9uLlxuXG5cbiAgICAgIHZhciBlc3RpbWF0ZWRUb3RhbFNpemUgPSBnZXRFc3RpbWF0ZWRUb3RhbFNpemUodGhpcy5wcm9wcywgdGhpcy5faW5zdGFuY2VQcm9wcyk7XG4gICAgICByZXR1cm4gY3JlYXRlRWxlbWVudChvdXRlckVsZW1lbnRUeXBlIHx8IG91dGVyVGFnTmFtZSB8fCAnZGl2Jywge1xuICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcbiAgICAgICAgb25TY3JvbGw6IG9uU2Nyb2xsLFxuICAgICAgICByZWY6IHRoaXMuX291dGVyUmVmU2V0dGVyLFxuICAgICAgICBzdHlsZTogX2V4dGVuZHMoe1xuICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICBvdmVyZmxvdzogJ2F1dG8nLFxuICAgICAgICAgIFdlYmtpdE92ZXJmbG93U2Nyb2xsaW5nOiAndG91Y2gnLFxuICAgICAgICAgIHdpbGxDaGFuZ2U6ICd0cmFuc2Zvcm0nLFxuICAgICAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uXG4gICAgICAgIH0sIHN0eWxlKVxuICAgICAgfSwgY3JlYXRlRWxlbWVudChpbm5lckVsZW1lbnRUeXBlIHx8IGlubmVyVGFnTmFtZSB8fCAnZGl2Jywge1xuICAgICAgICBjaGlsZHJlbjogaXRlbXMsXG4gICAgICAgIHJlZjogaW5uZXJSZWYsXG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgaGVpZ2h0OiBpc0hvcml6b250YWwgPyAnMTAwJScgOiBlc3RpbWF0ZWRUb3RhbFNpemUsXG4gICAgICAgICAgcG9pbnRlckV2ZW50czogaXNTY3JvbGxpbmcgPyAnbm9uZScgOiB1bmRlZmluZWQsXG4gICAgICAgICAgd2lkdGg6IGlzSG9yaXpvbnRhbCA/IGVzdGltYXRlZFRvdGFsU2l6ZSA6ICcxMDAlJ1xuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgfTtcblxuICAgIF9wcm90by5fY2FsbFByb3BzQ2FsbGJhY2tzID0gZnVuY3Rpb24gX2NhbGxQcm9wc0NhbGxiYWNrcygpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5vbkl0ZW1zUmVuZGVyZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFyIGl0ZW1Db3VudCA9IHRoaXMucHJvcHMuaXRlbUNvdW50O1xuXG4gICAgICAgIGlmIChpdGVtQ291bnQgPiAwKSB7XG4gICAgICAgICAgdmFyIF90aGlzJF9nZXRSYW5nZVRvUmVuZDIgPSB0aGlzLl9nZXRSYW5nZVRvUmVuZGVyKCksXG4gICAgICAgICAgICAgIF9vdmVyc2NhblN0YXJ0SW5kZXggPSBfdGhpcyRfZ2V0UmFuZ2VUb1JlbmQyWzBdLFxuICAgICAgICAgICAgICBfb3ZlcnNjYW5TdG9wSW5kZXggPSBfdGhpcyRfZ2V0UmFuZ2VUb1JlbmQyWzFdLFxuICAgICAgICAgICAgICBfdmlzaWJsZVN0YXJ0SW5kZXggPSBfdGhpcyRfZ2V0UmFuZ2VUb1JlbmQyWzJdLFxuICAgICAgICAgICAgICBfdmlzaWJsZVN0b3BJbmRleCA9IF90aGlzJF9nZXRSYW5nZVRvUmVuZDJbM107XG5cbiAgICAgICAgICB0aGlzLl9jYWxsT25JdGVtc1JlbmRlcmVkKF9vdmVyc2NhblN0YXJ0SW5kZXgsIF9vdmVyc2NhblN0b3BJbmRleCwgX3Zpc2libGVTdGFydEluZGV4LCBfdmlzaWJsZVN0b3BJbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb3BzLm9uU2Nyb2xsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHZhciBfdGhpcyRzdGF0ZTIgPSB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgX3Njcm9sbERpcmVjdGlvbiA9IF90aGlzJHN0YXRlMi5zY3JvbGxEaXJlY3Rpb24sXG4gICAgICAgICAgICBfc2Nyb2xsT2Zmc2V0ID0gX3RoaXMkc3RhdGUyLnNjcm9sbE9mZnNldCxcbiAgICAgICAgICAgIF9zY3JvbGxVcGRhdGVXYXNSZXF1ZXN0ZWQgPSBfdGhpcyRzdGF0ZTIuc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkO1xuXG4gICAgICAgIHRoaXMuX2NhbGxPblNjcm9sbChfc2Nyb2xsRGlyZWN0aW9uLCBfc2Nyb2xsT2Zmc2V0LCBfc2Nyb2xsVXBkYXRlV2FzUmVxdWVzdGVkKTtcbiAgICAgIH1cbiAgICB9OyAvLyBMYXppbHkgY3JlYXRlIGFuZCBjYWNoZSBpdGVtIHN0eWxlcyB3aGlsZSBzY3JvbGxpbmcsXG4gICAgLy8gU28gdGhhdCBwdXJlIGNvbXBvbmVudCBzQ1Ugd2lsbCBwcmV2ZW50IHJlLXJlbmRlcnMuXG4gICAgLy8gV2UgbWFpbnRhaW4gdGhpcyBjYWNoZSwgYW5kIHBhc3MgYSBzdHlsZSBwcm9wIHJhdGhlciB0aGFuIGluZGV4LFxuICAgIC8vIFNvIHRoYXQgTGlzdCBjYW4gY2xlYXIgY2FjaGVkIHN0eWxlcyBhbmQgZm9yY2UgaXRlbSByZS1yZW5kZXIgaWYgbmVjZXNzYXJ5LlxuXG5cbiAgICBfcHJvdG8uX2dldFJhbmdlVG9SZW5kZXIgPSBmdW5jdGlvbiBfZ2V0UmFuZ2VUb1JlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpcyRwcm9wczUgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGl0ZW1Db3VudCA9IF90aGlzJHByb3BzNS5pdGVtQ291bnQsXG4gICAgICAgICAgb3ZlcnNjYW5Db3VudCA9IF90aGlzJHByb3BzNS5vdmVyc2NhbkNvdW50O1xuICAgICAgdmFyIF90aGlzJHN0YXRlMyA9IHRoaXMuc3RhdGUsXG4gICAgICAgICAgaXNTY3JvbGxpbmcgPSBfdGhpcyRzdGF0ZTMuaXNTY3JvbGxpbmcsXG4gICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uID0gX3RoaXMkc3RhdGUzLnNjcm9sbERpcmVjdGlvbixcbiAgICAgICAgICBzY3JvbGxPZmZzZXQgPSBfdGhpcyRzdGF0ZTMuc2Nyb2xsT2Zmc2V0O1xuXG4gICAgICBpZiAoaXRlbUNvdW50ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBbMCwgMCwgMCwgMF07XG4gICAgICB9XG5cbiAgICAgIHZhciBzdGFydEluZGV4ID0gZ2V0U3RhcnRJbmRleEZvck9mZnNldCh0aGlzLnByb3BzLCBzY3JvbGxPZmZzZXQsIHRoaXMuX2luc3RhbmNlUHJvcHMpO1xuICAgICAgdmFyIHN0b3BJbmRleCA9IGdldFN0b3BJbmRleEZvclN0YXJ0SW5kZXgodGhpcy5wcm9wcywgc3RhcnRJbmRleCwgc2Nyb2xsT2Zmc2V0LCB0aGlzLl9pbnN0YW5jZVByb3BzKTsgLy8gT3ZlcnNjYW4gYnkgb25lIGl0ZW0gaW4gZWFjaCBkaXJlY3Rpb24gc28gdGhhdCB0YWIvZm9jdXMgd29ya3MuXG4gICAgICAvLyBJZiB0aGVyZSBpc24ndCBhdCBsZWFzdCBvbmUgZXh0cmEgaXRlbSwgdGFiIGxvb3BzIGJhY2sgYXJvdW5kLlxuXG4gICAgICB2YXIgb3ZlcnNjYW5CYWNrd2FyZCA9ICFpc1Njcm9sbGluZyB8fCBzY3JvbGxEaXJlY3Rpb24gPT09ICdiYWNrd2FyZCcgPyBNYXRoLm1heCgxLCBvdmVyc2NhbkNvdW50KSA6IDE7XG4gICAgICB2YXIgb3ZlcnNjYW5Gb3J3YXJkID0gIWlzU2Nyb2xsaW5nIHx8IHNjcm9sbERpcmVjdGlvbiA9PT0gJ2ZvcndhcmQnID8gTWF0aC5tYXgoMSwgb3ZlcnNjYW5Db3VudCkgOiAxO1xuICAgICAgcmV0dXJuIFtNYXRoLm1heCgwLCBzdGFydEluZGV4IC0gb3ZlcnNjYW5CYWNrd2FyZCksIE1hdGgubWF4KDAsIE1hdGgubWluKGl0ZW1Db3VudCAtIDEsIHN0b3BJbmRleCArIG92ZXJzY2FuRm9yd2FyZCkpLCBzdGFydEluZGV4LCBzdG9wSW5kZXhdO1xuICAgIH07XG5cbiAgICByZXR1cm4gTGlzdDtcbiAgfShQdXJlQ29tcG9uZW50KSwgX2NsYXNzLmRlZmF1bHRQcm9wcyA9IHtcbiAgICBkaXJlY3Rpb246ICdsdHInLFxuICAgIGl0ZW1EYXRhOiB1bmRlZmluZWQsXG4gICAgbGF5b3V0OiAndmVydGljYWwnLFxuICAgIG92ZXJzY2FuQ291bnQ6IDIsXG4gICAgdXNlSXNTY3JvbGxpbmc6IGZhbHNlXG4gIH0sIF90ZW1wO1xufSAvLyBOT1RFOiBJIGNvbnNpZGVyZWQgZnVydGhlciB3cmFwcGluZyBpbmRpdmlkdWFsIGl0ZW1zIHdpdGggYSBwdXJlIExpc3RJdGVtIGNvbXBvbmVudC5cbi8vIFRoaXMgd291bGQgYXZvaWQgZXZlciBjYWxsaW5nIHRoZSByZW5kZXIgZnVuY3Rpb24gZm9yIHRoZSBzYW1lIGluZGV4IG1vcmUgdGhhbiBvbmNlLFxuLy8gQnV0IGl0IHdvdWxkIGFsc28gYWRkIHRoZSBvdmVyaGVhZCBvZiBhIGxvdCBvZiBjb21wb25lbnRzL2ZpYmVycy5cbi8vIEkgYXNzdW1lIHBlb3BsZSBhbHJlYWR5IGRvIHRoaXMgKHJlbmRlciBmdW5jdGlvbiByZXR1cm5pbmcgYSBjbGFzcyBjb21wb25lbnQpLFxuLy8gU28gbXkgZG9pbmcgaXQgd291bGQganVzdCB1bm5lY2Vzc2FyaWx5IGRvdWJsZSB0aGUgd3JhcHBlcnMuXG5cbnZhciB2YWxpZGF0ZVNoYXJlZFByb3BzJDEgPSBmdW5jdGlvbiB2YWxpZGF0ZVNoYXJlZFByb3BzKF9yZWYyLCBfcmVmMykge1xuICB2YXIgY2hpbGRyZW4gPSBfcmVmMi5jaGlsZHJlbixcbiAgICAgIGRpcmVjdGlvbiA9IF9yZWYyLmRpcmVjdGlvbixcbiAgICAgIGhlaWdodCA9IF9yZWYyLmhlaWdodCxcbiAgICAgIGxheW91dCA9IF9yZWYyLmxheW91dCxcbiAgICAgIGlubmVyVGFnTmFtZSA9IF9yZWYyLmlubmVyVGFnTmFtZSxcbiAgICAgIG91dGVyVGFnTmFtZSA9IF9yZWYyLm91dGVyVGFnTmFtZSxcbiAgICAgIHdpZHRoID0gX3JlZjIud2lkdGg7XG4gIHZhciBpbnN0YW5jZSA9IF9yZWYzLmluc3RhbmNlO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKGlubmVyVGFnTmFtZSAhPSBudWxsIHx8IG91dGVyVGFnTmFtZSAhPSBudWxsKSB7XG4gICAgICBpZiAoZGV2V2FybmluZ3NUYWdOYW1lJDEgJiYgIWRldldhcm5pbmdzVGFnTmFtZSQxLmhhcyhpbnN0YW5jZSkpIHtcbiAgICAgICAgZGV2V2FybmluZ3NUYWdOYW1lJDEuYWRkKGluc3RhbmNlKTtcbiAgICAgICAgY29uc29sZS53YXJuKCdUaGUgaW5uZXJUYWdOYW1lIGFuZCBvdXRlclRhZ05hbWUgcHJvcHMgaGF2ZSBiZWVuIGRlcHJlY2F0ZWQuICcgKyAnUGxlYXNlIHVzZSB0aGUgaW5uZXJFbGVtZW50VHlwZSBhbmQgb3V0ZXJFbGVtZW50VHlwZSBwcm9wcyBpbnN0ZWFkLicpO1xuICAgICAgfVxuICAgIH0gLy8gVE9ETyBEZXByZWNhdGUgZGlyZWN0aW9uIFwiaG9yaXpvbnRhbFwiXG5cblxuICAgIHZhciBpc0hvcml6b250YWwgPSBkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJyB8fCBsYXlvdXQgPT09ICdob3Jpem9udGFsJztcblxuICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICBjYXNlICdob3Jpem9udGFsJzpcbiAgICAgIGNhc2UgJ3ZlcnRpY2FsJzpcbiAgICAgICAgaWYgKGRldldhcm5pbmdzRGlyZWN0aW9uICYmICFkZXZXYXJuaW5nc0RpcmVjdGlvbi5oYXMoaW5zdGFuY2UpKSB7XG4gICAgICAgICAgZGV2V2FybmluZ3NEaXJlY3Rpb24uYWRkKGluc3RhbmNlKTtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1RoZSBkaXJlY3Rpb24gcHJvcCBzaG91bGQgYmUgZWl0aGVyIFwibHRyXCIgKGRlZmF1bHQpIG9yIFwicnRsXCIuICcgKyAnUGxlYXNlIHVzZSB0aGUgbGF5b3V0IHByb3AgdG8gc3BlY2lmeSBcInZlcnRpY2FsXCIgKGRlZmF1bHQpIG9yIFwiaG9yaXpvbnRhbFwiIG9yaWVudGF0aW9uLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2x0cic6XG4gICAgICBjYXNlICdydGwnOlxuICAgICAgICAvLyBWYWxpZCB2YWx1ZXNcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IEVycm9yKCdBbiBpbnZhbGlkIFwiZGlyZWN0aW9uXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmFsdWUgc2hvdWxkIGJlIGVpdGhlciBcImx0clwiIG9yIFwicnRsXCIuICcgKyAoXCJcXFwiXCIgKyBkaXJlY3Rpb24gKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgIH1cblxuICAgIHN3aXRjaCAobGF5b3V0KSB7XG4gICAgICBjYXNlICdob3Jpem9udGFsJzpcbiAgICAgIGNhc2UgJ3ZlcnRpY2FsJzpcbiAgICAgICAgLy8gVmFsaWQgdmFsdWVzXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcImxheW91dFwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ1ZhbHVlIHNob3VsZCBiZSBlaXRoZXIgXCJob3Jpem9udGFsXCIgb3IgXCJ2ZXJ0aWNhbFwiLiAnICsgKFwiXFxcIlwiICsgbGF5b3V0ICsgXCJcXFwiIHdhcyBzcGVjaWZpZWQuXCIpKTtcbiAgICB9XG5cbiAgICBpZiAoY2hpbGRyZW4gPT0gbnVsbCkge1xuICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJjaGlsZHJlblwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ1ZhbHVlIHNob3VsZCBiZSBhIFJlYWN0IGNvbXBvbmVudC4gJyArIChcIlxcXCJcIiArIChjaGlsZHJlbiA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBjaGlsZHJlbikgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgIH1cblxuICAgIGlmIChpc0hvcml6b250YWwgJiYgdHlwZW9mIHdpZHRoICE9PSAnbnVtYmVyJykge1xuICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJ3aWR0aFwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ0hvcml6b250YWwgbGlzdHMgbXVzdCBzcGVjaWZ5IGEgbnVtYmVyIGZvciB3aWR0aC4gJyArIChcIlxcXCJcIiArICh3aWR0aCA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiB3aWR0aCkgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgIH0gZWxzZSBpZiAoIWlzSG9yaXpvbnRhbCAmJiB0eXBlb2YgaGVpZ2h0ICE9PSAnbnVtYmVyJykge1xuICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJoZWlnaHRcIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdWZXJ0aWNhbCBsaXN0cyBtdXN0IHNwZWNpZnkgYSBudW1iZXIgZm9yIGhlaWdodC4gJyArIChcIlxcXCJcIiArIChoZWlnaHQgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgaGVpZ2h0KSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgREVGQVVMVF9FU1RJTUFURURfSVRFTV9TSVpFJDEgPSA1MDtcblxudmFyIGdldEl0ZW1NZXRhZGF0YSQxID0gZnVuY3Rpb24gZ2V0SXRlbU1ldGFkYXRhKHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykge1xuICB2YXIgX3JlZiA9IHByb3BzLFxuICAgICAgaXRlbVNpemUgPSBfcmVmLml0ZW1TaXplO1xuICB2YXIgaXRlbU1ldGFkYXRhTWFwID0gaW5zdGFuY2VQcm9wcy5pdGVtTWV0YWRhdGFNYXAsXG4gICAgICBsYXN0TWVhc3VyZWRJbmRleCA9IGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkSW5kZXg7XG5cbiAgaWYgKGluZGV4ID4gbGFzdE1lYXN1cmVkSW5kZXgpIHtcbiAgICB2YXIgb2Zmc2V0ID0gMDtcblxuICAgIGlmIChsYXN0TWVhc3VyZWRJbmRleCA+PSAwKSB7XG4gICAgICB2YXIgaXRlbU1ldGFkYXRhID0gaXRlbU1ldGFkYXRhTWFwW2xhc3RNZWFzdXJlZEluZGV4XTtcbiAgICAgIG9mZnNldCA9IGl0ZW1NZXRhZGF0YS5vZmZzZXQgKyBpdGVtTWV0YWRhdGEuc2l6ZTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gbGFzdE1lYXN1cmVkSW5kZXggKyAxOyBpIDw9IGluZGV4OyBpKyspIHtcbiAgICAgIHZhciBzaXplID0gaXRlbVNpemUoaSk7XG4gICAgICBpdGVtTWV0YWRhdGFNYXBbaV0gPSB7XG4gICAgICAgIG9mZnNldDogb2Zmc2V0LFxuICAgICAgICBzaXplOiBzaXplXG4gICAgICB9O1xuICAgICAgb2Zmc2V0ICs9IHNpemU7XG4gICAgfVxuXG4gICAgaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRJbmRleCA9IGluZGV4O1xuICB9XG5cbiAgcmV0dXJuIGl0ZW1NZXRhZGF0YU1hcFtpbmRleF07XG59O1xuXG52YXIgZmluZE5lYXJlc3RJdGVtJDEgPSBmdW5jdGlvbiBmaW5kTmVhcmVzdEl0ZW0ocHJvcHMsIGluc3RhbmNlUHJvcHMsIG9mZnNldCkge1xuICB2YXIgaXRlbU1ldGFkYXRhTWFwID0gaW5zdGFuY2VQcm9wcy5pdGVtTWV0YWRhdGFNYXAsXG4gICAgICBsYXN0TWVhc3VyZWRJbmRleCA9IGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkSW5kZXg7XG4gIHZhciBsYXN0TWVhc3VyZWRJdGVtT2Zmc2V0ID0gbGFzdE1lYXN1cmVkSW5kZXggPiAwID8gaXRlbU1ldGFkYXRhTWFwW2xhc3RNZWFzdXJlZEluZGV4XS5vZmZzZXQgOiAwO1xuXG4gIGlmIChsYXN0TWVhc3VyZWRJdGVtT2Zmc2V0ID49IG9mZnNldCkge1xuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgbWVhc3VyZWQgaXRlbXMgd2l0aGluIHRoaXMgcmFuZ2UganVzdCB1c2UgYSBiaW5hcnkgc2VhcmNoIGFzIGl0J3MgZmFzdGVyLlxuICAgIHJldHVybiBmaW5kTmVhcmVzdEl0ZW1CaW5hcnlTZWFyY2gkMShwcm9wcywgaW5zdGFuY2VQcm9wcywgbGFzdE1lYXN1cmVkSW5kZXgsIDAsIG9mZnNldCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gSWYgd2UgaGF2ZW4ndCB5ZXQgbWVhc3VyZWQgdGhpcyBoaWdoLCBmYWxsYmFjayB0byBhbiBleHBvbmVudGlhbCBzZWFyY2ggd2l0aCBhbiBpbm5lciBiaW5hcnkgc2VhcmNoLlxuICAgIC8vIFRoZSBleHBvbmVudGlhbCBzZWFyY2ggYXZvaWRzIHByZS1jb21wdXRpbmcgc2l6ZXMgZm9yIHRoZSBmdWxsIHNldCBvZiBpdGVtcyBhcyBhIGJpbmFyeSBzZWFyY2ggd291bGQuXG4gICAgLy8gVGhlIG92ZXJhbGwgY29tcGxleGl0eSBmb3IgdGhpcyBhcHByb2FjaCBpcyBPKGxvZyBuKS5cbiAgICByZXR1cm4gZmluZE5lYXJlc3RJdGVtRXhwb25lbnRpYWxTZWFyY2gkMShwcm9wcywgaW5zdGFuY2VQcm9wcywgTWF0aC5tYXgoMCwgbGFzdE1lYXN1cmVkSW5kZXgpLCBvZmZzZXQpO1xuICB9XG59O1xuXG52YXIgZmluZE5lYXJlc3RJdGVtQmluYXJ5U2VhcmNoJDEgPSBmdW5jdGlvbiBmaW5kTmVhcmVzdEl0ZW1CaW5hcnlTZWFyY2gocHJvcHMsIGluc3RhbmNlUHJvcHMsIGhpZ2gsIGxvdywgb2Zmc2V0KSB7XG4gIHdoaWxlIChsb3cgPD0gaGlnaCkge1xuICAgIHZhciBtaWRkbGUgPSBsb3cgKyBNYXRoLmZsb29yKChoaWdoIC0gbG93KSAvIDIpO1xuICAgIHZhciBjdXJyZW50T2Zmc2V0ID0gZ2V0SXRlbU1ldGFkYXRhJDEocHJvcHMsIG1pZGRsZSwgaW5zdGFuY2VQcm9wcykub2Zmc2V0O1xuXG4gICAgaWYgKGN1cnJlbnRPZmZzZXQgPT09IG9mZnNldCkge1xuICAgICAgcmV0dXJuIG1pZGRsZTtcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnRPZmZzZXQgPCBvZmZzZXQpIHtcbiAgICAgIGxvdyA9IG1pZGRsZSArIDE7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50T2Zmc2V0ID4gb2Zmc2V0KSB7XG4gICAgICBoaWdoID0gbWlkZGxlIC0gMTtcbiAgICB9XG4gIH1cblxuICBpZiAobG93ID4gMCkge1xuICAgIHJldHVybiBsb3cgLSAxO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAwO1xuICB9XG59O1xuXG52YXIgZmluZE5lYXJlc3RJdGVtRXhwb25lbnRpYWxTZWFyY2gkMSA9IGZ1bmN0aW9uIGZpbmROZWFyZXN0SXRlbUV4cG9uZW50aWFsU2VhcmNoKHByb3BzLCBpbnN0YW5jZVByb3BzLCBpbmRleCwgb2Zmc2V0KSB7XG4gIHZhciBpdGVtQ291bnQgPSBwcm9wcy5pdGVtQ291bnQ7XG4gIHZhciBpbnRlcnZhbCA9IDE7XG5cbiAgd2hpbGUgKGluZGV4IDwgaXRlbUNvdW50ICYmIGdldEl0ZW1NZXRhZGF0YSQxKHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcykub2Zmc2V0IDwgb2Zmc2V0KSB7XG4gICAgaW5kZXggKz0gaW50ZXJ2YWw7XG4gICAgaW50ZXJ2YWwgKj0gMjtcbiAgfVxuXG4gIHJldHVybiBmaW5kTmVhcmVzdEl0ZW1CaW5hcnlTZWFyY2gkMShwcm9wcywgaW5zdGFuY2VQcm9wcywgTWF0aC5taW4oaW5kZXgsIGl0ZW1Db3VudCAtIDEpLCBNYXRoLmZsb29yKGluZGV4IC8gMiksIG9mZnNldCk7XG59O1xuXG52YXIgZ2V0RXN0aW1hdGVkVG90YWxTaXplID0gZnVuY3Rpb24gZ2V0RXN0aW1hdGVkVG90YWxTaXplKF9yZWYyLCBfcmVmMykge1xuICB2YXIgaXRlbUNvdW50ID0gX3JlZjIuaXRlbUNvdW50O1xuICB2YXIgaXRlbU1ldGFkYXRhTWFwID0gX3JlZjMuaXRlbU1ldGFkYXRhTWFwLFxuICAgICAgZXN0aW1hdGVkSXRlbVNpemUgPSBfcmVmMy5lc3RpbWF0ZWRJdGVtU2l6ZSxcbiAgICAgIGxhc3RNZWFzdXJlZEluZGV4ID0gX3JlZjMubGFzdE1lYXN1cmVkSW5kZXg7XG4gIHZhciB0b3RhbFNpemVPZk1lYXN1cmVkSXRlbXMgPSAwOyAvLyBFZGdlIGNhc2UgY2hlY2sgZm9yIHdoZW4gdGhlIG51bWJlciBvZiBpdGVtcyBkZWNyZWFzZXMgd2hpbGUgYSBzY3JvbGwgaXMgaW4gcHJvZ3Jlc3MuXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9idmF1Z2huL3JlYWN0LXdpbmRvdy9wdWxsLzEzOFxuXG4gIGlmIChsYXN0TWVhc3VyZWRJbmRleCA+PSBpdGVtQ291bnQpIHtcbiAgICBsYXN0TWVhc3VyZWRJbmRleCA9IGl0ZW1Db3VudCAtIDE7XG4gIH1cblxuICBpZiAobGFzdE1lYXN1cmVkSW5kZXggPj0gMCkge1xuICAgIHZhciBpdGVtTWV0YWRhdGEgPSBpdGVtTWV0YWRhdGFNYXBbbGFzdE1lYXN1cmVkSW5kZXhdO1xuICAgIHRvdGFsU2l6ZU9mTWVhc3VyZWRJdGVtcyA9IGl0ZW1NZXRhZGF0YS5vZmZzZXQgKyBpdGVtTWV0YWRhdGEuc2l6ZTtcbiAgfVxuXG4gIHZhciBudW1Vbm1lYXN1cmVkSXRlbXMgPSBpdGVtQ291bnQgLSBsYXN0TWVhc3VyZWRJbmRleCAtIDE7XG4gIHZhciB0b3RhbFNpemVPZlVubWVhc3VyZWRJdGVtcyA9IG51bVVubWVhc3VyZWRJdGVtcyAqIGVzdGltYXRlZEl0ZW1TaXplO1xuICByZXR1cm4gdG90YWxTaXplT2ZNZWFzdXJlZEl0ZW1zICsgdG90YWxTaXplT2ZVbm1lYXN1cmVkSXRlbXM7XG59O1xuXG52YXIgVmFyaWFibGVTaXplTGlzdCA9XG4vKiNfX1BVUkVfXyovXG5jcmVhdGVMaXN0Q29tcG9uZW50KHtcbiAgZ2V0SXRlbU9mZnNldDogZnVuY3Rpb24gZ2V0SXRlbU9mZnNldChwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpIHtcbiAgICByZXR1cm4gZ2V0SXRlbU1ldGFkYXRhJDEocHJvcHMsIGluZGV4LCBpbnN0YW5jZVByb3BzKS5vZmZzZXQ7XG4gIH0sXG4gIGdldEl0ZW1TaXplOiBmdW5jdGlvbiBnZXRJdGVtU2l6ZShwcm9wcywgaW5kZXgsIGluc3RhbmNlUHJvcHMpIHtcbiAgICByZXR1cm4gaW5zdGFuY2VQcm9wcy5pdGVtTWV0YWRhdGFNYXBbaW5kZXhdLnNpemU7XG4gIH0sXG4gIGdldEVzdGltYXRlZFRvdGFsU2l6ZTogZ2V0RXN0aW1hdGVkVG90YWxTaXplLFxuICBnZXRPZmZzZXRGb3JJbmRleEFuZEFsaWdubWVudDogZnVuY3Rpb24gZ2V0T2Zmc2V0Rm9ySW5kZXhBbmRBbGlnbm1lbnQocHJvcHMsIGluZGV4LCBhbGlnbiwgc2Nyb2xsT2Zmc2V0LCBpbnN0YW5jZVByb3BzKSB7XG4gICAgdmFyIGRpcmVjdGlvbiA9IHByb3BzLmRpcmVjdGlvbixcbiAgICAgICAgaGVpZ2h0ID0gcHJvcHMuaGVpZ2h0LFxuICAgICAgICBsYXlvdXQgPSBwcm9wcy5sYXlvdXQsXG4gICAgICAgIHdpZHRoID0gcHJvcHMud2lkdGg7IC8vIFRPRE8gRGVwcmVjYXRlIGRpcmVjdGlvbiBcImhvcml6b250YWxcIlxuXG4gICAgdmFyIGlzSG9yaXpvbnRhbCA9IGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnIHx8IGxheW91dCA9PT0gJ2hvcml6b250YWwnO1xuICAgIHZhciBzaXplID0gaXNIb3Jpem9udGFsID8gd2lkdGggOiBoZWlnaHQ7XG4gICAgdmFyIGl0ZW1NZXRhZGF0YSA9IGdldEl0ZW1NZXRhZGF0YSQxKHByb3BzLCBpbmRleCwgaW5zdGFuY2VQcm9wcyk7IC8vIEdldCBlc3RpbWF0ZWQgdG90YWwgc2l6ZSBhZnRlciBJdGVtTWV0YWRhdGEgaXMgY29tcHV0ZWQsXG4gICAgLy8gVG8gZW5zdXJlIGl0IHJlZmxlY3RzIGFjdHVhbCBtZWFzdXJlbWVudHMgaW5zdGVhZCBvZiBqdXN0IGVzdGltYXRlcy5cblxuICAgIHZhciBlc3RpbWF0ZWRUb3RhbFNpemUgPSBnZXRFc3RpbWF0ZWRUb3RhbFNpemUocHJvcHMsIGluc3RhbmNlUHJvcHMpO1xuICAgIHZhciBtYXhPZmZzZXQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihlc3RpbWF0ZWRUb3RhbFNpemUgLSBzaXplLCBpdGVtTWV0YWRhdGEub2Zmc2V0KSk7XG4gICAgdmFyIG1pbk9mZnNldCA9IE1hdGgubWF4KDAsIGl0ZW1NZXRhZGF0YS5vZmZzZXQgLSBzaXplICsgaXRlbU1ldGFkYXRhLnNpemUpO1xuXG4gICAgaWYgKGFsaWduID09PSAnc21hcnQnKSB7XG4gICAgICBpZiAoc2Nyb2xsT2Zmc2V0ID49IG1pbk9mZnNldCAtIHNpemUgJiYgc2Nyb2xsT2Zmc2V0IDw9IG1heE9mZnNldCArIHNpemUpIHtcbiAgICAgICAgYWxpZ24gPSAnYXV0byc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGlnbiA9ICdjZW50ZXInO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAoYWxpZ24pIHtcbiAgICAgIGNhc2UgJ3N0YXJ0JzpcbiAgICAgICAgcmV0dXJuIG1heE9mZnNldDtcblxuICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcblxuICAgICAgY2FzZSAnY2VudGVyJzpcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQobWluT2Zmc2V0ICsgKG1heE9mZnNldCAtIG1pbk9mZnNldCkgLyAyKTtcblxuICAgICAgY2FzZSAnYXV0byc6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoc2Nyb2xsT2Zmc2V0ID49IG1pbk9mZnNldCAmJiBzY3JvbGxPZmZzZXQgPD0gbWF4T2Zmc2V0KSB7XG4gICAgICAgICAgcmV0dXJuIHNjcm9sbE9mZnNldDtcbiAgICAgICAgfSBlbHNlIGlmIChzY3JvbGxPZmZzZXQgPCBtaW5PZmZzZXQpIHtcbiAgICAgICAgICByZXR1cm4gbWluT2Zmc2V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBtYXhPZmZzZXQ7XG4gICAgICAgIH1cblxuICAgIH1cbiAgfSxcbiAgZ2V0U3RhcnRJbmRleEZvck9mZnNldDogZnVuY3Rpb24gZ2V0U3RhcnRJbmRleEZvck9mZnNldChwcm9wcywgb2Zmc2V0LCBpbnN0YW5jZVByb3BzKSB7XG4gICAgcmV0dXJuIGZpbmROZWFyZXN0SXRlbSQxKHByb3BzLCBpbnN0YW5jZVByb3BzLCBvZmZzZXQpO1xuICB9LFxuICBnZXRTdG9wSW5kZXhGb3JTdGFydEluZGV4OiBmdW5jdGlvbiBnZXRTdG9wSW5kZXhGb3JTdGFydEluZGV4KHByb3BzLCBzdGFydEluZGV4LCBzY3JvbGxPZmZzZXQsIGluc3RhbmNlUHJvcHMpIHtcbiAgICB2YXIgZGlyZWN0aW9uID0gcHJvcHMuZGlyZWN0aW9uLFxuICAgICAgICBoZWlnaHQgPSBwcm9wcy5oZWlnaHQsXG4gICAgICAgIGl0ZW1Db3VudCA9IHByb3BzLml0ZW1Db3VudCxcbiAgICAgICAgbGF5b3V0ID0gcHJvcHMubGF5b3V0LFxuICAgICAgICB3aWR0aCA9IHByb3BzLndpZHRoOyAvLyBUT0RPIERlcHJlY2F0ZSBkaXJlY3Rpb24gXCJob3Jpem9udGFsXCJcblxuICAgIHZhciBpc0hvcml6b250YWwgPSBkaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJyB8fCBsYXlvdXQgPT09ICdob3Jpem9udGFsJztcbiAgICB2YXIgc2l6ZSA9IGlzSG9yaXpvbnRhbCA/IHdpZHRoIDogaGVpZ2h0O1xuICAgIHZhciBpdGVtTWV0YWRhdGEgPSBnZXRJdGVtTWV0YWRhdGEkMShwcm9wcywgc3RhcnRJbmRleCwgaW5zdGFuY2VQcm9wcyk7XG4gICAgdmFyIG1heE9mZnNldCA9IHNjcm9sbE9mZnNldCArIHNpemU7XG4gICAgdmFyIG9mZnNldCA9IGl0ZW1NZXRhZGF0YS5vZmZzZXQgKyBpdGVtTWV0YWRhdGEuc2l6ZTtcbiAgICB2YXIgc3RvcEluZGV4ID0gc3RhcnRJbmRleDtcblxuICAgIHdoaWxlIChzdG9wSW5kZXggPCBpdGVtQ291bnQgLSAxICYmIG9mZnNldCA8IG1heE9mZnNldCkge1xuICAgICAgc3RvcEluZGV4Kys7XG4gICAgICBvZmZzZXQgKz0gZ2V0SXRlbU1ldGFkYXRhJDEocHJvcHMsIHN0b3BJbmRleCwgaW5zdGFuY2VQcm9wcykuc2l6ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RvcEluZGV4O1xuICB9LFxuICBpbml0SW5zdGFuY2VQcm9wczogZnVuY3Rpb24gaW5pdEluc3RhbmNlUHJvcHMocHJvcHMsIGluc3RhbmNlKSB7XG4gICAgdmFyIF9yZWY0ID0gcHJvcHMsXG4gICAgICAgIGVzdGltYXRlZEl0ZW1TaXplID0gX3JlZjQuZXN0aW1hdGVkSXRlbVNpemU7XG4gICAgdmFyIGluc3RhbmNlUHJvcHMgPSB7XG4gICAgICBpdGVtTWV0YWRhdGFNYXA6IHt9LFxuICAgICAgZXN0aW1hdGVkSXRlbVNpemU6IGVzdGltYXRlZEl0ZW1TaXplIHx8IERFRkFVTFRfRVNUSU1BVEVEX0lURU1fU0laRSQxLFxuICAgICAgbGFzdE1lYXN1cmVkSW5kZXg6IC0xXG4gICAgfTtcblxuICAgIGluc3RhbmNlLnJlc2V0QWZ0ZXJJbmRleCA9IGZ1bmN0aW9uIChpbmRleCwgc2hvdWxkRm9yY2VVcGRhdGUpIHtcbiAgICAgIGlmIChzaG91bGRGb3JjZVVwZGF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHNob3VsZEZvcmNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaW5zdGFuY2VQcm9wcy5sYXN0TWVhc3VyZWRJbmRleCA9IE1hdGgubWluKGluc3RhbmNlUHJvcHMubGFzdE1lYXN1cmVkSW5kZXgsIGluZGV4IC0gMSk7IC8vIFdlIGNvdWxkIHBvdGVudGlhbGx5IG9wdGltaXplIGZ1cnRoZXIgYnkgb25seSBldmljdGluZyBzdHlsZXMgYWZ0ZXIgdGhpcyBpbmRleCxcbiAgICAgIC8vIEJ1dCBzaW5jZSBzdHlsZXMgYXJlIG9ubHkgY2FjaGVkIHdoaWxlIHNjcm9sbGluZyBpcyBpbiBwcm9ncmVzcy1cbiAgICAgIC8vIEl0IHNlZW1zIGFuIHVubmVjZXNzYXJ5IG9wdGltaXphdGlvbi5cbiAgICAgIC8vIEl0J3MgdW5saWtlbHkgdGhhdCByZXNldEFmdGVySW5kZXgoKSB3aWxsIGJlIGNhbGxlZCB3aGlsZSBhIHVzZXIgaXMgc2Nyb2xsaW5nLlxuXG4gICAgICBpbnN0YW5jZS5fZ2V0SXRlbVN0eWxlQ2FjaGUoLTEpO1xuXG4gICAgICBpZiAoc2hvdWxkRm9yY2VVcGRhdGUpIHtcbiAgICAgICAgaW5zdGFuY2UuZm9yY2VVcGRhdGUoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGluc3RhbmNlUHJvcHM7XG4gIH0sXG4gIHNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2U6IGZhbHNlLFxuICB2YWxpZGF0ZVByb3BzOiBmdW5jdGlvbiB2YWxpZGF0ZVByb3BzKF9yZWY1KSB7XG4gICAgdmFyIGl0ZW1TaXplID0gX3JlZjUuaXRlbVNpemU7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtU2l6ZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcIml0ZW1TaXplXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmFsdWUgc2hvdWxkIGJlIGEgZnVuY3Rpb24uICcgKyAoXCJcXFwiXCIgKyAoaXRlbVNpemUgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgaXRlbVNpemUpICsgXCJcXFwiIHdhcyBzcGVjaWZpZWQuXCIpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pO1xuXG52YXIgRml4ZWRTaXplR3JpZCA9XG4vKiNfX1BVUkVfXyovXG5jcmVhdGVHcmlkQ29tcG9uZW50KHtcbiAgZ2V0Q29sdW1uT2Zmc2V0OiBmdW5jdGlvbiBnZXRDb2x1bW5PZmZzZXQoX3JlZiwgaW5kZXgpIHtcbiAgICB2YXIgY29sdW1uV2lkdGggPSBfcmVmLmNvbHVtbldpZHRoO1xuICAgIHJldHVybiBpbmRleCAqIGNvbHVtbldpZHRoO1xuICB9LFxuICBnZXRDb2x1bW5XaWR0aDogZnVuY3Rpb24gZ2V0Q29sdW1uV2lkdGgoX3JlZjIsIGluZGV4KSB7XG4gICAgdmFyIGNvbHVtbldpZHRoID0gX3JlZjIuY29sdW1uV2lkdGg7XG4gICAgcmV0dXJuIGNvbHVtbldpZHRoO1xuICB9LFxuICBnZXRSb3dPZmZzZXQ6IGZ1bmN0aW9uIGdldFJvd09mZnNldChfcmVmMywgaW5kZXgpIHtcbiAgICB2YXIgcm93SGVpZ2h0ID0gX3JlZjMucm93SGVpZ2h0O1xuICAgIHJldHVybiBpbmRleCAqIHJvd0hlaWdodDtcbiAgfSxcbiAgZ2V0Um93SGVpZ2h0OiBmdW5jdGlvbiBnZXRSb3dIZWlnaHQoX3JlZjQsIGluZGV4KSB7XG4gICAgdmFyIHJvd0hlaWdodCA9IF9yZWY0LnJvd0hlaWdodDtcbiAgICByZXR1cm4gcm93SGVpZ2h0O1xuICB9LFxuICBnZXRFc3RpbWF0ZWRUb3RhbEhlaWdodDogZnVuY3Rpb24gZ2V0RXN0aW1hdGVkVG90YWxIZWlnaHQoX3JlZjUpIHtcbiAgICB2YXIgcm93Q291bnQgPSBfcmVmNS5yb3dDb3VudCxcbiAgICAgICAgcm93SGVpZ2h0ID0gX3JlZjUucm93SGVpZ2h0O1xuICAgIHJldHVybiByb3dIZWlnaHQgKiByb3dDb3VudDtcbiAgfSxcbiAgZ2V0RXN0aW1hdGVkVG90YWxXaWR0aDogZnVuY3Rpb24gZ2V0RXN0aW1hdGVkVG90YWxXaWR0aChfcmVmNikge1xuICAgIHZhciBjb2x1bW5Db3VudCA9IF9yZWY2LmNvbHVtbkNvdW50LFxuICAgICAgICBjb2x1bW5XaWR0aCA9IF9yZWY2LmNvbHVtbldpZHRoO1xuICAgIHJldHVybiBjb2x1bW5XaWR0aCAqIGNvbHVtbkNvdW50O1xuICB9LFxuICBnZXRPZmZzZXRGb3JDb2x1bW5BbmRBbGlnbm1lbnQ6IGZ1bmN0aW9uIGdldE9mZnNldEZvckNvbHVtbkFuZEFsaWdubWVudChfcmVmNywgY29sdW1uSW5kZXgsIGFsaWduLCBzY3JvbGxMZWZ0LCBpbnN0YW5jZVByb3BzLCBzY3JvbGxiYXJTaXplKSB7XG4gICAgdmFyIGNvbHVtbkNvdW50ID0gX3JlZjcuY29sdW1uQ291bnQsXG4gICAgICAgIGNvbHVtbldpZHRoID0gX3JlZjcuY29sdW1uV2lkdGgsXG4gICAgICAgIHdpZHRoID0gX3JlZjcud2lkdGg7XG4gICAgdmFyIGxhc3RDb2x1bW5PZmZzZXQgPSBNYXRoLm1heCgwLCBjb2x1bW5Db3VudCAqIGNvbHVtbldpZHRoIC0gd2lkdGgpO1xuICAgIHZhciBtYXhPZmZzZXQgPSBNYXRoLm1pbihsYXN0Q29sdW1uT2Zmc2V0LCBjb2x1bW5JbmRleCAqIGNvbHVtbldpZHRoKTtcbiAgICB2YXIgbWluT2Zmc2V0ID0gTWF0aC5tYXgoMCwgY29sdW1uSW5kZXggKiBjb2x1bW5XaWR0aCAtIHdpZHRoICsgc2Nyb2xsYmFyU2l6ZSArIGNvbHVtbldpZHRoKTtcblxuICAgIGlmIChhbGlnbiA9PT0gJ3NtYXJ0Jykge1xuICAgICAgaWYgKHNjcm9sbExlZnQgPj0gbWluT2Zmc2V0IC0gd2lkdGggJiYgc2Nyb2xsTGVmdCA8PSBtYXhPZmZzZXQgKyB3aWR0aCkge1xuICAgICAgICBhbGlnbiA9ICdhdXRvJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsaWduID0gJ2NlbnRlcic7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc3dpdGNoIChhbGlnbikge1xuICAgICAgY2FzZSAnc3RhcnQnOlxuICAgICAgICByZXR1cm4gbWF4T2Zmc2V0O1xuXG4gICAgICBjYXNlICdlbmQnOlxuICAgICAgICByZXR1cm4gbWluT2Zmc2V0O1xuXG4gICAgICBjYXNlICdjZW50ZXInOlxuICAgICAgICAvLyBcIkNlbnRlcmVkXCIgb2Zmc2V0IGlzIHVzdWFsbHkgdGhlIGF2ZXJhZ2Ugb2YgdGhlIG1pbiBhbmQgbWF4LlxuICAgICAgICAvLyBCdXQgbmVhciB0aGUgZWRnZXMgb2YgdGhlIGxpc3QsIHRoaXMgZG9lc24ndCBob2xkIHRydWUuXG4gICAgICAgIHZhciBtaWRkbGVPZmZzZXQgPSBNYXRoLnJvdW5kKG1pbk9mZnNldCArIChtYXhPZmZzZXQgLSBtaW5PZmZzZXQpIC8gMik7XG5cbiAgICAgICAgaWYgKG1pZGRsZU9mZnNldCA8IE1hdGguY2VpbCh3aWR0aCAvIDIpKSB7XG4gICAgICAgICAgcmV0dXJuIDA7IC8vIG5lYXIgdGhlIGJlZ2lubmluZ1xuICAgICAgICB9IGVsc2UgaWYgKG1pZGRsZU9mZnNldCA+IGxhc3RDb2x1bW5PZmZzZXQgKyBNYXRoLmZsb29yKHdpZHRoIC8gMikpIHtcbiAgICAgICAgICByZXR1cm4gbGFzdENvbHVtbk9mZnNldDsgLy8gbmVhciB0aGUgZW5kXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG1pZGRsZU9mZnNldDtcbiAgICAgICAgfVxuXG4gICAgICBjYXNlICdhdXRvJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChzY3JvbGxMZWZ0ID49IG1pbk9mZnNldCAmJiBzY3JvbGxMZWZ0IDw9IG1heE9mZnNldCkge1xuICAgICAgICAgIHJldHVybiBzY3JvbGxMZWZ0O1xuICAgICAgICB9IGVsc2UgaWYgKG1pbk9mZnNldCA+IG1heE9mZnNldCkge1xuICAgICAgICAgIC8vIEJlY2F1c2Ugd2Ugb25seSB0YWtlIGludG8gYWNjb3VudCB0aGUgc2Nyb2xsYmFyIHNpemUgd2hlbiBjYWxjdWxhdGluZyBtaW5PZmZzZXRcbiAgICAgICAgICAvLyB0aGlzIHZhbHVlIGNhbiBiZSBsYXJnZXIgdGhhbiBtYXhPZmZzZXQgd2hlbiBhdCB0aGUgZW5kIG9mIHRoZSBsaXN0XG4gICAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcbiAgICAgICAgfSBlbHNlIGlmIChzY3JvbGxMZWZ0IDwgbWluT2Zmc2V0KSB7XG4gICAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbWF4T2Zmc2V0O1xuICAgICAgICB9XG5cbiAgICB9XG4gIH0sXG4gIGdldE9mZnNldEZvclJvd0FuZEFsaWdubWVudDogZnVuY3Rpb24gZ2V0T2Zmc2V0Rm9yUm93QW5kQWxpZ25tZW50KF9yZWY4LCByb3dJbmRleCwgYWxpZ24sIHNjcm9sbFRvcCwgaW5zdGFuY2VQcm9wcywgc2Nyb2xsYmFyU2l6ZSkge1xuICAgIHZhciByb3dIZWlnaHQgPSBfcmVmOC5yb3dIZWlnaHQsXG4gICAgICAgIGhlaWdodCA9IF9yZWY4LmhlaWdodCxcbiAgICAgICAgcm93Q291bnQgPSBfcmVmOC5yb3dDb3VudDtcbiAgICB2YXIgbGFzdFJvd09mZnNldCA9IE1hdGgubWF4KDAsIHJvd0NvdW50ICogcm93SGVpZ2h0IC0gaGVpZ2h0KTtcbiAgICB2YXIgbWF4T2Zmc2V0ID0gTWF0aC5taW4obGFzdFJvd09mZnNldCwgcm93SW5kZXggKiByb3dIZWlnaHQpO1xuICAgIHZhciBtaW5PZmZzZXQgPSBNYXRoLm1heCgwLCByb3dJbmRleCAqIHJvd0hlaWdodCAtIGhlaWdodCArIHNjcm9sbGJhclNpemUgKyByb3dIZWlnaHQpO1xuXG4gICAgaWYgKGFsaWduID09PSAnc21hcnQnKSB7XG4gICAgICBpZiAoc2Nyb2xsVG9wID49IG1pbk9mZnNldCAtIGhlaWdodCAmJiBzY3JvbGxUb3AgPD0gbWF4T2Zmc2V0ICsgaGVpZ2h0KSB7XG4gICAgICAgIGFsaWduID0gJ2F1dG8nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxpZ24gPSAnY2VudGVyJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzd2l0Y2ggKGFsaWduKSB7XG4gICAgICBjYXNlICdzdGFydCc6XG4gICAgICAgIHJldHVybiBtYXhPZmZzZXQ7XG5cbiAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgIHJldHVybiBtaW5PZmZzZXQ7XG5cbiAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICAgIC8vIFwiQ2VudGVyZWRcIiBvZmZzZXQgaXMgdXN1YWxseSB0aGUgYXZlcmFnZSBvZiB0aGUgbWluIGFuZCBtYXguXG4gICAgICAgIC8vIEJ1dCBuZWFyIHRoZSBlZGdlcyBvZiB0aGUgbGlzdCwgdGhpcyBkb2Vzbid0IGhvbGQgdHJ1ZS5cbiAgICAgICAgdmFyIG1pZGRsZU9mZnNldCA9IE1hdGgucm91bmQobWluT2Zmc2V0ICsgKG1heE9mZnNldCAtIG1pbk9mZnNldCkgLyAyKTtcblxuICAgICAgICBpZiAobWlkZGxlT2Zmc2V0IDwgTWF0aC5jZWlsKGhlaWdodCAvIDIpKSB7XG4gICAgICAgICAgcmV0dXJuIDA7IC8vIG5lYXIgdGhlIGJlZ2lubmluZ1xuICAgICAgICB9IGVsc2UgaWYgKG1pZGRsZU9mZnNldCA+IGxhc3RSb3dPZmZzZXQgKyBNYXRoLmZsb29yKGhlaWdodCAvIDIpKSB7XG4gICAgICAgICAgcmV0dXJuIGxhc3RSb3dPZmZzZXQ7IC8vIG5lYXIgdGhlIGVuZFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBtaWRkbGVPZmZzZXQ7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSAnYXV0byc6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoc2Nyb2xsVG9wID49IG1pbk9mZnNldCAmJiBzY3JvbGxUb3AgPD0gbWF4T2Zmc2V0KSB7XG4gICAgICAgICAgcmV0dXJuIHNjcm9sbFRvcDtcbiAgICAgICAgfSBlbHNlIGlmIChtaW5PZmZzZXQgPiBtYXhPZmZzZXQpIHtcbiAgICAgICAgICAvLyBCZWNhdXNlIHdlIG9ubHkgdGFrZSBpbnRvIGFjY291bnQgdGhlIHNjcm9sbGJhciBzaXplIHdoZW4gY2FsY3VsYXRpbmcgbWluT2Zmc2V0XG4gICAgICAgICAgLy8gdGhpcyB2YWx1ZSBjYW4gYmUgbGFyZ2VyIHRoYW4gbWF4T2Zmc2V0IHdoZW4gYXQgdGhlIGVuZCBvZiB0aGUgbGlzdFxuICAgICAgICAgIHJldHVybiBtaW5PZmZzZXQ7XG4gICAgICAgIH0gZWxzZSBpZiAoc2Nyb2xsVG9wIDwgbWluT2Zmc2V0KSB7XG4gICAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbWF4T2Zmc2V0O1xuICAgICAgICB9XG5cbiAgICB9XG4gIH0sXG4gIGdldENvbHVtblN0YXJ0SW5kZXhGb3JPZmZzZXQ6IGZ1bmN0aW9uIGdldENvbHVtblN0YXJ0SW5kZXhGb3JPZmZzZXQoX3JlZjksIHNjcm9sbExlZnQpIHtcbiAgICB2YXIgY29sdW1uV2lkdGggPSBfcmVmOS5jb2x1bW5XaWR0aCxcbiAgICAgICAgY29sdW1uQ291bnQgPSBfcmVmOS5jb2x1bW5Db3VudDtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oY29sdW1uQ291bnQgLSAxLCBNYXRoLmZsb29yKHNjcm9sbExlZnQgLyBjb2x1bW5XaWR0aCkpKTtcbiAgfSxcbiAgZ2V0Q29sdW1uU3RvcEluZGV4Rm9yU3RhcnRJbmRleDogZnVuY3Rpb24gZ2V0Q29sdW1uU3RvcEluZGV4Rm9yU3RhcnRJbmRleChfcmVmMTAsIHN0YXJ0SW5kZXgsIHNjcm9sbExlZnQpIHtcbiAgICB2YXIgY29sdW1uV2lkdGggPSBfcmVmMTAuY29sdW1uV2lkdGgsXG4gICAgICAgIGNvbHVtbkNvdW50ID0gX3JlZjEwLmNvbHVtbkNvdW50LFxuICAgICAgICB3aWR0aCA9IF9yZWYxMC53aWR0aDtcbiAgICB2YXIgbGVmdCA9IHN0YXJ0SW5kZXggKiBjb2x1bW5XaWR0aDtcbiAgICB2YXIgbnVtVmlzaWJsZUNvbHVtbnMgPSBNYXRoLmNlaWwoKHdpZHRoICsgc2Nyb2xsTGVmdCAtIGxlZnQpIC8gY29sdW1uV2lkdGgpO1xuICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbihjb2x1bW5Db3VudCAtIDEsIHN0YXJ0SW5kZXggKyBudW1WaXNpYmxlQ29sdW1ucyAtIDEgLy8gLTEgaXMgYmVjYXVzZSBzdG9wIGluZGV4IGlzIGluY2x1c2l2ZVxuICAgICkpO1xuICB9LFxuICBnZXRSb3dTdGFydEluZGV4Rm9yT2Zmc2V0OiBmdW5jdGlvbiBnZXRSb3dTdGFydEluZGV4Rm9yT2Zmc2V0KF9yZWYxMSwgc2Nyb2xsVG9wKSB7XG4gICAgdmFyIHJvd0hlaWdodCA9IF9yZWYxMS5yb3dIZWlnaHQsXG4gICAgICAgIHJvd0NvdW50ID0gX3JlZjExLnJvd0NvdW50O1xuICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbihyb3dDb3VudCAtIDEsIE1hdGguZmxvb3Ioc2Nyb2xsVG9wIC8gcm93SGVpZ2h0KSkpO1xuICB9LFxuICBnZXRSb3dTdG9wSW5kZXhGb3JTdGFydEluZGV4OiBmdW5jdGlvbiBnZXRSb3dTdG9wSW5kZXhGb3JTdGFydEluZGV4KF9yZWYxMiwgc3RhcnRJbmRleCwgc2Nyb2xsVG9wKSB7XG4gICAgdmFyIHJvd0hlaWdodCA9IF9yZWYxMi5yb3dIZWlnaHQsXG4gICAgICAgIHJvd0NvdW50ID0gX3JlZjEyLnJvd0NvdW50LFxuICAgICAgICBoZWlnaHQgPSBfcmVmMTIuaGVpZ2h0O1xuICAgIHZhciB0b3AgPSBzdGFydEluZGV4ICogcm93SGVpZ2h0O1xuICAgIHZhciBudW1WaXNpYmxlUm93cyA9IE1hdGguY2VpbCgoaGVpZ2h0ICsgc2Nyb2xsVG9wIC0gdG9wKSAvIHJvd0hlaWdodCk7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKHJvd0NvdW50IC0gMSwgc3RhcnRJbmRleCArIG51bVZpc2libGVSb3dzIC0gMSAvLyAtMSBpcyBiZWNhdXNlIHN0b3AgaW5kZXggaXMgaW5jbHVzaXZlXG4gICAgKSk7XG4gIH0sXG4gIGluaXRJbnN0YW5jZVByb3BzOiBmdW5jdGlvbiBpbml0SW5zdGFuY2VQcm9wcyhwcm9wcykgey8vIE5vb3BcbiAgfSxcbiAgc2hvdWxkUmVzZXRTdHlsZUNhY2hlT25JdGVtU2l6ZUNoYW5nZTogdHJ1ZSxcbiAgdmFsaWRhdGVQcm9wczogZnVuY3Rpb24gdmFsaWRhdGVQcm9wcyhfcmVmMTMpIHtcbiAgICB2YXIgY29sdW1uV2lkdGggPSBfcmVmMTMuY29sdW1uV2lkdGgsXG4gICAgICAgIHJvd0hlaWdodCA9IF9yZWYxMy5yb3dIZWlnaHQ7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKHR5cGVvZiBjb2x1bW5XaWR0aCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJjb2x1bW5XaWR0aFwiIHByb3AgaGFzIGJlZW4gc3BlY2lmaWVkLiAnICsgJ1ZhbHVlIHNob3VsZCBiZSBhIG51bWJlci4gJyArIChcIlxcXCJcIiArIChjb2x1bW5XaWR0aCA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBjb2x1bW5XaWR0aCkgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHJvd0hlaWdodCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ0FuIGludmFsaWQgXCJyb3dIZWlnaHRcIiBwcm9wIGhhcyBiZWVuIHNwZWNpZmllZC4gJyArICdWYWx1ZSBzaG91bGQgYmUgYSBudW1iZXIuICcgKyAoXCJcXFwiXCIgKyAocm93SGVpZ2h0ID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIHJvd0hlaWdodCkgKyBcIlxcXCIgd2FzIHNwZWNpZmllZC5cIikpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5cbnZhciBGaXhlZFNpemVMaXN0ID1cbi8qI19fUFVSRV9fKi9cbmNyZWF0ZUxpc3RDb21wb25lbnQoe1xuICBnZXRJdGVtT2Zmc2V0OiBmdW5jdGlvbiBnZXRJdGVtT2Zmc2V0KF9yZWYsIGluZGV4KSB7XG4gICAgdmFyIGl0ZW1TaXplID0gX3JlZi5pdGVtU2l6ZTtcbiAgICByZXR1cm4gaW5kZXggKiBpdGVtU2l6ZTtcbiAgfSxcbiAgZ2V0SXRlbVNpemU6IGZ1bmN0aW9uIGdldEl0ZW1TaXplKF9yZWYyLCBpbmRleCkge1xuICAgIHZhciBpdGVtU2l6ZSA9IF9yZWYyLml0ZW1TaXplO1xuICAgIHJldHVybiBpdGVtU2l6ZTtcbiAgfSxcbiAgZ2V0RXN0aW1hdGVkVG90YWxTaXplOiBmdW5jdGlvbiBnZXRFc3RpbWF0ZWRUb3RhbFNpemUoX3JlZjMpIHtcbiAgICB2YXIgaXRlbUNvdW50ID0gX3JlZjMuaXRlbUNvdW50LFxuICAgICAgICBpdGVtU2l6ZSA9IF9yZWYzLml0ZW1TaXplO1xuICAgIHJldHVybiBpdGVtU2l6ZSAqIGl0ZW1Db3VudDtcbiAgfSxcbiAgZ2V0T2Zmc2V0Rm9ySW5kZXhBbmRBbGlnbm1lbnQ6IGZ1bmN0aW9uIGdldE9mZnNldEZvckluZGV4QW5kQWxpZ25tZW50KF9yZWY0LCBpbmRleCwgYWxpZ24sIHNjcm9sbE9mZnNldCkge1xuICAgIHZhciBkaXJlY3Rpb24gPSBfcmVmNC5kaXJlY3Rpb24sXG4gICAgICAgIGhlaWdodCA9IF9yZWY0LmhlaWdodCxcbiAgICAgICAgaXRlbUNvdW50ID0gX3JlZjQuaXRlbUNvdW50LFxuICAgICAgICBpdGVtU2l6ZSA9IF9yZWY0Lml0ZW1TaXplLFxuICAgICAgICBsYXlvdXQgPSBfcmVmNC5sYXlvdXQsXG4gICAgICAgIHdpZHRoID0gX3JlZjQud2lkdGg7XG4gICAgLy8gVE9ETyBEZXByZWNhdGUgZGlyZWN0aW9uIFwiaG9yaXpvbnRhbFwiXG4gICAgdmFyIGlzSG9yaXpvbnRhbCA9IGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnIHx8IGxheW91dCA9PT0gJ2hvcml6b250YWwnO1xuICAgIHZhciBzaXplID0gaXNIb3Jpem9udGFsID8gd2lkdGggOiBoZWlnaHQ7XG4gICAgdmFyIGxhc3RJdGVtT2Zmc2V0ID0gTWF0aC5tYXgoMCwgaXRlbUNvdW50ICogaXRlbVNpemUgLSBzaXplKTtcbiAgICB2YXIgbWF4T2Zmc2V0ID0gTWF0aC5taW4obGFzdEl0ZW1PZmZzZXQsIGluZGV4ICogaXRlbVNpemUpO1xuICAgIHZhciBtaW5PZmZzZXQgPSBNYXRoLm1heCgwLCBpbmRleCAqIGl0ZW1TaXplIC0gc2l6ZSArIGl0ZW1TaXplKTtcblxuICAgIGlmIChhbGlnbiA9PT0gJ3NtYXJ0Jykge1xuICAgICAgaWYgKHNjcm9sbE9mZnNldCA+PSBtaW5PZmZzZXQgLSBzaXplICYmIHNjcm9sbE9mZnNldCA8PSBtYXhPZmZzZXQgKyBzaXplKSB7XG4gICAgICAgIGFsaWduID0gJ2F1dG8nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxpZ24gPSAnY2VudGVyJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzd2l0Y2ggKGFsaWduKSB7XG4gICAgICBjYXNlICdzdGFydCc6XG4gICAgICAgIHJldHVybiBtYXhPZmZzZXQ7XG5cbiAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgIHJldHVybiBtaW5PZmZzZXQ7XG5cbiAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICAgIHtcbiAgICAgICAgICAvLyBcIkNlbnRlcmVkXCIgb2Zmc2V0IGlzIHVzdWFsbHkgdGhlIGF2ZXJhZ2Ugb2YgdGhlIG1pbiBhbmQgbWF4LlxuICAgICAgICAgIC8vIEJ1dCBuZWFyIHRoZSBlZGdlcyBvZiB0aGUgbGlzdCwgdGhpcyBkb2Vzbid0IGhvbGQgdHJ1ZS5cbiAgICAgICAgICB2YXIgbWlkZGxlT2Zmc2V0ID0gTWF0aC5yb3VuZChtaW5PZmZzZXQgKyAobWF4T2Zmc2V0IC0gbWluT2Zmc2V0KSAvIDIpO1xuXG4gICAgICAgICAgaWYgKG1pZGRsZU9mZnNldCA8IE1hdGguY2VpbChzaXplIC8gMikpIHtcbiAgICAgICAgICAgIHJldHVybiAwOyAvLyBuZWFyIHRoZSBiZWdpbm5pbmdcbiAgICAgICAgICB9IGVsc2UgaWYgKG1pZGRsZU9mZnNldCA+IGxhc3RJdGVtT2Zmc2V0ICsgTWF0aC5mbG9vcihzaXplIC8gMikpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXN0SXRlbU9mZnNldDsgLy8gbmVhciB0aGUgZW5kXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBtaWRkbGVPZmZzZXQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgIGNhc2UgJ2F1dG8nOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKHNjcm9sbE9mZnNldCA+PSBtaW5PZmZzZXQgJiYgc2Nyb2xsT2Zmc2V0IDw9IG1heE9mZnNldCkge1xuICAgICAgICAgIHJldHVybiBzY3JvbGxPZmZzZXQ7XG4gICAgICAgIH0gZWxzZSBpZiAoc2Nyb2xsT2Zmc2V0IDwgbWluT2Zmc2V0KSB7XG4gICAgICAgICAgcmV0dXJuIG1pbk9mZnNldDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbWF4T2Zmc2V0O1xuICAgICAgICB9XG5cbiAgICB9XG4gIH0sXG4gIGdldFN0YXJ0SW5kZXhGb3JPZmZzZXQ6IGZ1bmN0aW9uIGdldFN0YXJ0SW5kZXhGb3JPZmZzZXQoX3JlZjUsIG9mZnNldCkge1xuICAgIHZhciBpdGVtQ291bnQgPSBfcmVmNS5pdGVtQ291bnQsXG4gICAgICAgIGl0ZW1TaXplID0gX3JlZjUuaXRlbVNpemU7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKGl0ZW1Db3VudCAtIDEsIE1hdGguZmxvb3Iob2Zmc2V0IC8gaXRlbVNpemUpKSk7XG4gIH0sXG4gIGdldFN0b3BJbmRleEZvclN0YXJ0SW5kZXg6IGZ1bmN0aW9uIGdldFN0b3BJbmRleEZvclN0YXJ0SW5kZXgoX3JlZjYsIHN0YXJ0SW5kZXgsIHNjcm9sbE9mZnNldCkge1xuICAgIHZhciBkaXJlY3Rpb24gPSBfcmVmNi5kaXJlY3Rpb24sXG4gICAgICAgIGhlaWdodCA9IF9yZWY2LmhlaWdodCxcbiAgICAgICAgaXRlbUNvdW50ID0gX3JlZjYuaXRlbUNvdW50LFxuICAgICAgICBpdGVtU2l6ZSA9IF9yZWY2Lml0ZW1TaXplLFxuICAgICAgICBsYXlvdXQgPSBfcmVmNi5sYXlvdXQsXG4gICAgICAgIHdpZHRoID0gX3JlZjYud2lkdGg7XG4gICAgLy8gVE9ETyBEZXByZWNhdGUgZGlyZWN0aW9uIFwiaG9yaXpvbnRhbFwiXG4gICAgdmFyIGlzSG9yaXpvbnRhbCA9IGRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnIHx8IGxheW91dCA9PT0gJ2hvcml6b250YWwnO1xuICAgIHZhciBvZmZzZXQgPSBzdGFydEluZGV4ICogaXRlbVNpemU7XG4gICAgdmFyIHNpemUgPSBpc0hvcml6b250YWwgPyB3aWR0aCA6IGhlaWdodDtcbiAgICB2YXIgbnVtVmlzaWJsZUl0ZW1zID0gTWF0aC5jZWlsKChzaXplICsgc2Nyb2xsT2Zmc2V0IC0gb2Zmc2V0KSAvIGl0ZW1TaXplKTtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oaXRlbUNvdW50IC0gMSwgc3RhcnRJbmRleCArIG51bVZpc2libGVJdGVtcyAtIDEgLy8gLTEgaXMgYmVjYXVzZSBzdG9wIGluZGV4IGlzIGluY2x1c2l2ZVxuICAgICkpO1xuICB9LFxuICBpbml0SW5zdGFuY2VQcm9wczogZnVuY3Rpb24gaW5pdEluc3RhbmNlUHJvcHMocHJvcHMpIHsvLyBOb29wXG4gIH0sXG4gIHNob3VsZFJlc2V0U3R5bGVDYWNoZU9uSXRlbVNpemVDaGFuZ2U6IHRydWUsXG4gIHZhbGlkYXRlUHJvcHM6IGZ1bmN0aW9uIHZhbGlkYXRlUHJvcHMoX3JlZjcpIHtcbiAgICB2YXIgaXRlbVNpemUgPSBfcmVmNy5pdGVtU2l6ZTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW1TaXplICE9PSAnbnVtYmVyJykge1xuICAgICAgICB0aHJvdyBFcnJvcignQW4gaW52YWxpZCBcIml0ZW1TaXplXCIgcHJvcCBoYXMgYmVlbiBzcGVjaWZpZWQuICcgKyAnVmFsdWUgc2hvdWxkIGJlIGEgbnVtYmVyLiAnICsgKFwiXFxcIlwiICsgKGl0ZW1TaXplID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIGl0ZW1TaXplKSArIFwiXFxcIiB3YXMgc3BlY2lmaWVkLlwiKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuLy8gUHVsbGVkIGZyb20gcmVhY3QtY29tcGF0XG4vLyBodHRwczovL2dpdGh1Yi5jb20vZGV2ZWxvcGl0L3ByZWFjdC1jb21wYXQvYmxvYi83YzVkZTAwZTdjODVlMmZmZDAxMWJmM2FmMDI4OTliNjNmNjk5ZDNhL3NyYy9pbmRleC5qcyNMMzQ5XG5mdW5jdGlvbiBzaGFsbG93RGlmZmVycyhwcmV2LCBuZXh0KSB7XG4gIGZvciAodmFyIGF0dHJpYnV0ZSBpbiBwcmV2KSB7XG4gICAgaWYgKCEoYXR0cmlidXRlIGluIG5leHQpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBfYXR0cmlidXRlIGluIG5leHQpIHtcbiAgICBpZiAocHJldltfYXR0cmlidXRlXSAhPT0gbmV4dFtfYXR0cmlidXRlXSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyBJdCBrbm93cyB0byBjb21wYXJlIGluZGl2aWR1YWwgc3R5bGUgcHJvcHMgYW5kIGlnbm9yZSB0aGUgd3JhcHBlciBvYmplY3QuXG4vLyBTZWUgaHR0cHM6Ly9yZWFjdGpzLm9yZy9kb2NzL3JlYWN0LWFwaS5odG1sI3JlYWN0bWVtb1xuXG5mdW5jdGlvbiBhcmVFcXVhbChwcmV2UHJvcHMsIG5leHRQcm9wcykge1xuICB2YXIgcHJldlN0eWxlID0gcHJldlByb3BzLnN0eWxlLFxuICAgICAgcHJldlJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShwcmV2UHJvcHMsIFtcInN0eWxlXCJdKTtcblxuICB2YXIgbmV4dFN0eWxlID0gbmV4dFByb3BzLnN0eWxlLFxuICAgICAgbmV4dFJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShuZXh0UHJvcHMsIFtcInN0eWxlXCJdKTtcblxuICByZXR1cm4gIXNoYWxsb3dEaWZmZXJzKHByZXZTdHlsZSwgbmV4dFN0eWxlKSAmJiAhc2hhbGxvd0RpZmZlcnMocHJldlJlc3QsIG5leHRSZXN0KTtcbn1cblxuLy8gSXQga25vd3MgdG8gY29tcGFyZSBpbmRpdmlkdWFsIHN0eWxlIHByb3BzIGFuZCBpZ25vcmUgdGhlIHdyYXBwZXIgb2JqZWN0LlxuLy8gU2VlIGh0dHBzOi8vcmVhY3Rqcy5vcmcvZG9jcy9yZWFjdC1jb21wb25lbnQuaHRtbCNzaG91bGRjb21wb25lbnR1cGRhdGVcblxuZnVuY3Rpb24gc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gIHJldHVybiAhYXJlRXF1YWwodGhpcy5wcm9wcywgbmV4dFByb3BzKSB8fCBzaGFsbG93RGlmZmVycyh0aGlzLnN0YXRlLCBuZXh0U3RhdGUpO1xufVxuXG5leHBvcnQgeyBWYXJpYWJsZVNpemVHcmlkLCBWYXJpYWJsZVNpemVMaXN0LCBGaXhlZFNpemVHcmlkLCBGaXhlZFNpemVMaXN0LCBhcmVFcXVhbCwgc2hvdWxkQ29tcG9uZW50VXBkYXRlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50LCBQdXJlQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuXG52YXIgY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufTtcblxudmFyIGNyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gICAgcmV0dXJuIENvbnN0cnVjdG9yO1xuICB9O1xufSgpO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuXG4gICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufTtcblxudmFyIGluaGVyaXRzID0gZnVuY3Rpb24gKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTtcbiAgfVxuXG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfVxuICB9KTtcbiAgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xufTtcblxudmFyIHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gPSBmdW5jdGlvbiAoc2VsZiwgY2FsbCkge1xuICBpZiAoIXNlbGYpIHtcbiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gIH1cblxuICByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcbn07XG5cbnZhciBzbGljZWRUb0FycmF5ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkge1xuICAgIHZhciBfYXJyID0gW107XG4gICAgdmFyIF9uID0gdHJ1ZTtcbiAgICB2YXIgX2QgPSBmYWxzZTtcbiAgICB2YXIgX2UgPSB1bmRlZmluZWQ7XG5cbiAgICB0cnkge1xuICAgICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkge1xuICAgICAgICBfYXJyLnB1c2goX3MudmFsdWUpO1xuXG4gICAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhaztcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIF9kID0gdHJ1ZTtcbiAgICAgIF9lID0gZXJyO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKF9kKSB0aHJvdyBfZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gX2FycjtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge1xuICAgICAgcmV0dXJuIGFycjtcbiAgICB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkge1xuICAgICAgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIik7XG4gICAgfVxuICB9O1xufSgpO1xuXG4vKipcbiAqIERldGVjdCBFbGVtZW50IFJlc2l6ZS5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9zZGVjaW1hL2phdmFzY3JpcHQtZGV0ZWN0LWVsZW1lbnQtcmVzaXplXG4gKiBTZWJhc3RpYW4gRGVjaW1hXG4gKlxuICogRm9ya2VkIGZyb20gdmVyc2lvbiAwLjUuMzsgaW5jbHVkZXMgdGhlIGZvbGxvd2luZyBtb2RpZmljYXRpb25zOlxuICogMSnCoEd1YXJkIGFnYWluc3QgdW5zYWZlICd3aW5kb3cnIGFuZCAnZG9jdW1lbnQnIHJlZmVyZW5jZXMgKHRvIHN1cHBvcnQgU1NSKS5cbiAqIDIpwqBEZWZlciBpbml0aWFsaXphdGlvbiBjb2RlIHZpYSBhIHRvcC1sZXZlbCBmdW5jdGlvbiB3cmFwcGVyICh0byBzdXBwb3J0IFNTUikuXG4gKiAzKSBBdm9pZCB1bm5lY2Vzc2FyeSByZWZsb3dzIGJ5IG5vdCBtZWFzdXJpbmcgc2l6ZSBmb3Igc2Nyb2xsIGV2ZW50cyBidWJibGluZyBmcm9tIGNoaWxkcmVuLlxuICogNCkgQWRkIG5vbmNlIGZvciBzdHlsZSBlbGVtZW50LlxuICoqL1xuXG4vLyBDaGVjayBgZG9jdW1lbnRgIGFuZCBgd2luZG93YCBpbiBjYXNlIG9mIHNlcnZlci1zaWRlIHJlbmRlcmluZ1xudmFyIHdpbmRvd09iamVjdCA9IHZvaWQgMDtcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICB3aW5kb3dPYmplY3QgPSB3aW5kb3c7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xufSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuICB3aW5kb3dPYmplY3QgPSBzZWxmO1xufSBlbHNlIHtcbiAgd2luZG93T2JqZWN0ID0gZ2xvYmFsO1xufVxuXG52YXIgY2FuY2VsRnJhbWUgPSBudWxsO1xudmFyIHJlcXVlc3RGcmFtZSA9IG51bGw7XG5cbnZhciBUSU1FT1VUX0RVUkFUSU9OID0gMjA7XG5cbnZhciBjbGVhclRpbWVvdXRGbiA9IHdpbmRvd09iamVjdC5jbGVhclRpbWVvdXQ7XG52YXIgc2V0VGltZW91dEZuID0gd2luZG93T2JqZWN0LnNldFRpbWVvdXQ7XG5cbnZhciBjYW5jZWxBbmltYXRpb25GcmFtZUZuID0gd2luZG93T2JqZWN0LmNhbmNlbEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvd09iamVjdC5tb3pDYW5jZWxBbmltYXRpb25GcmFtZSB8fCB3aW5kb3dPYmplY3Qud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWU7XG5cbnZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWVGbiA9IHdpbmRvd09iamVjdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93T2JqZWN0Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3dPYmplY3Qud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuXG5pZiAoY2FuY2VsQW5pbWF0aW9uRnJhbWVGbiA9PSBudWxsIHx8IHJlcXVlc3RBbmltYXRpb25GcmFtZUZuID09IG51bGwpIHtcbiAgLy8gRm9yIGVudmlyb25tZW50cyB0aGF0IGRvbid0IHN1cHBvcnQgYW5pbWF0aW9uIGZyYW1lLFxuICAvLyBmYWxsYmFjayB0byBhIHNldFRpbWVvdXQgYmFzZWQgYXBwcm9hY2guXG4gIGNhbmNlbEZyYW1lID0gY2xlYXJUaW1lb3V0Rm47XG4gIHJlcXVlc3RGcmFtZSA9IGZ1bmN0aW9uIHJlcXVlc3RBbmltYXRpb25GcmFtZVZpYVNldFRpbWVvdXQoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gc2V0VGltZW91dEZuKGNhbGxiYWNrLCBUSU1FT1VUX0RVUkFUSU9OKTtcbiAgfTtcbn0gZWxzZSB7XG4gIC8vIENvdW50ZXIgaW50dWl0aXZlbHksIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgYW5pbWF0aW9uIGZyYW1lcyBjYW4gYmUgdHJpY2tpZXIuXG4gIC8vIENocm9tZSdzIFwiVGhyb3R0bGUgbm9uLXZpc2libGUgY3Jvc3Mtb3JpZ2luIGlmcmFtZXNcIiBmbGFnIGNhbiBwcmV2ZW50IHJBRnMgZnJvbSBiZWluZyBjYWxsZWQuXG4gIC8vIEluIHRoaXMgY2FzZSwgd2Ugc2hvdWxkIGZhbGxiYWNrIHRvIGEgc2V0VGltZW91dCgpIGltcGxlbWVudGF0aW9uLlxuICBjYW5jZWxGcmFtZSA9IGZ1bmN0aW9uIGNhbmNlbEZyYW1lKF9yZWYpIHtcbiAgICB2YXIgX3JlZjIgPSBzbGljZWRUb0FycmF5KF9yZWYsIDIpLFxuICAgICAgICBhbmltYXRpb25GcmFtZUlEID0gX3JlZjJbMF0sXG4gICAgICAgIHRpbWVvdXRJRCA9IF9yZWYyWzFdO1xuXG4gICAgY2FuY2VsQW5pbWF0aW9uRnJhbWVGbihhbmltYXRpb25GcmFtZUlEKTtcbiAgICBjbGVhclRpbWVvdXRGbih0aW1lb3V0SUQpO1xuICB9O1xuICByZXF1ZXN0RnJhbWUgPSBmdW5jdGlvbiByZXF1ZXN0QW5pbWF0aW9uRnJhbWVXaXRoU2V0VGltZW91dEZhbGxiYWNrKGNhbGxiYWNrKSB7XG4gICAgdmFyIGFuaW1hdGlvbkZyYW1lSUQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWVGbihmdW5jdGlvbiBhbmltYXRpb25GcmFtZUNhbGxiYWNrKCkge1xuICAgICAgY2xlYXJUaW1lb3V0Rm4odGltZW91dElEKTtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfSk7XG5cbiAgICB2YXIgdGltZW91dElEID0gc2V0VGltZW91dEZuKGZ1bmN0aW9uIHRpbWVvdXRDYWxsYmFjaygpIHtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lRm4oYW5pbWF0aW9uRnJhbWVJRCk7XG4gICAgICBjYWxsYmFjaygpO1xuICAgIH0sIFRJTUVPVVRfRFVSQVRJT04pO1xuXG4gICAgcmV0dXJuIFthbmltYXRpb25GcmFtZUlELCB0aW1lb3V0SURdO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVEZXRlY3RFbGVtZW50UmVzaXplKG5vbmNlKSB7XG4gIHZhciBhbmltYXRpb25LZXlmcmFtZXMgPSB2b2lkIDA7XG4gIHZhciBhbmltYXRpb25OYW1lID0gdm9pZCAwO1xuICB2YXIgYW5pbWF0aW9uU3RhcnRFdmVudCA9IHZvaWQgMDtcbiAgdmFyIGFuaW1hdGlvblN0eWxlID0gdm9pZCAwO1xuICB2YXIgY2hlY2tUcmlnZ2VycyA9IHZvaWQgMDtcbiAgdmFyIHJlc2V0VHJpZ2dlcnMgPSB2b2lkIDA7XG4gIHZhciBzY3JvbGxMaXN0ZW5lciA9IHZvaWQgMDtcblxuICB2YXIgYXR0YWNoRXZlbnQgPSB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmF0dGFjaEV2ZW50O1xuICBpZiAoIWF0dGFjaEV2ZW50KSB7XG4gICAgcmVzZXRUcmlnZ2VycyA9IGZ1bmN0aW9uIHJlc2V0VHJpZ2dlcnMoZWxlbWVudCkge1xuICAgICAgdmFyIHRyaWdnZXJzID0gZWxlbWVudC5fX3Jlc2l6ZVRyaWdnZXJzX18sXG4gICAgICAgICAgZXhwYW5kID0gdHJpZ2dlcnMuZmlyc3RFbGVtZW50Q2hpbGQsXG4gICAgICAgICAgY29udHJhY3QgPSB0cmlnZ2Vycy5sYXN0RWxlbWVudENoaWxkLFxuICAgICAgICAgIGV4cGFuZENoaWxkID0gZXhwYW5kLmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgY29udHJhY3Quc2Nyb2xsTGVmdCA9IGNvbnRyYWN0LnNjcm9sbFdpZHRoO1xuICAgICAgY29udHJhY3Quc2Nyb2xsVG9wID0gY29udHJhY3Quc2Nyb2xsSGVpZ2h0O1xuICAgICAgZXhwYW5kQ2hpbGQuc3R5bGUud2lkdGggPSBleHBhbmQub2Zmc2V0V2lkdGggKyAxICsgJ3B4JztcbiAgICAgIGV4cGFuZENoaWxkLnN0eWxlLmhlaWdodCA9IGV4cGFuZC5vZmZzZXRIZWlnaHQgKyAxICsgJ3B4JztcbiAgICAgIGV4cGFuZC5zY3JvbGxMZWZ0ID0gZXhwYW5kLnNjcm9sbFdpZHRoO1xuICAgICAgZXhwYW5kLnNjcm9sbFRvcCA9IGV4cGFuZC5zY3JvbGxIZWlnaHQ7XG4gICAgfTtcblxuICAgIGNoZWNrVHJpZ2dlcnMgPSBmdW5jdGlvbiBjaGVja1RyaWdnZXJzKGVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBlbGVtZW50Lm9mZnNldFdpZHRoICE9PSBlbGVtZW50Ll9fcmVzaXplTGFzdF9fLndpZHRoIHx8IGVsZW1lbnQub2Zmc2V0SGVpZ2h0ICE9PSBlbGVtZW50Ll9fcmVzaXplTGFzdF9fLmhlaWdodDtcbiAgICB9O1xuXG4gICAgc2Nyb2xsTGlzdGVuZXIgPSBmdW5jdGlvbiBzY3JvbGxMaXN0ZW5lcihlKSB7XG4gICAgICAvLyBEb24ndCBtZWFzdXJlICh3aGljaCBmb3JjZXMpIHJlZmxvdyBmb3Igc2Nyb2xscyB0aGF0IGhhcHBlbiBpbnNpZGUgb2YgY2hpbGRyZW4hXG4gICAgICBpZiAoZS50YXJnZXQuY2xhc3NOYW1lICYmIHR5cGVvZiBlLnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJyAmJiBlLnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZignY29udHJhY3QtdHJpZ2dlcicpIDwgMCAmJiBlLnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZignZXhwYW5kLXRyaWdnZXInKSA8IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgZWxlbWVudCA9IHRoaXM7XG4gICAgICByZXNldFRyaWdnZXJzKHRoaXMpO1xuICAgICAgaWYgKHRoaXMuX19yZXNpemVSQUZfXykge1xuICAgICAgICBjYW5jZWxGcmFtZSh0aGlzLl9fcmVzaXplUkFGX18pO1xuICAgICAgfVxuICAgICAgdGhpcy5fX3Jlc2l6ZVJBRl9fID0gcmVxdWVzdEZyYW1lKGZ1bmN0aW9uIGFuaW1hdGlvbkZyYW1lKCkge1xuICAgICAgICBpZiAoY2hlY2tUcmlnZ2VycyhlbGVtZW50KSkge1xuICAgICAgICAgIGVsZW1lbnQuX19yZXNpemVMYXN0X18ud2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgICAgICAgIGVsZW1lbnQuX19yZXNpemVMYXN0X18uaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgZWxlbWVudC5fX3Jlc2l6ZUxpc3RlbmVyc19fLmZvckVhY2goZnVuY3Rpb24gZm9yRWFjaFJlc2l6ZUxpc3RlbmVyKGZuKSB7XG4gICAgICAgICAgICBmbi5jYWxsKGVsZW1lbnQsIGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyogRGV0ZWN0IENTUyBBbmltYXRpb25zIHN1cHBvcnQgdG8gZGV0ZWN0IGVsZW1lbnQgZGlzcGxheS9yZS1hdHRhY2ggKi9cbiAgICB2YXIgYW5pbWF0aW9uID0gZmFsc2U7XG4gICAgdmFyIGtleWZyYW1lcHJlZml4ID0gJyc7XG4gICAgYW5pbWF0aW9uU3RhcnRFdmVudCA9ICdhbmltYXRpb25zdGFydCc7XG4gICAgdmFyIGRvbVByZWZpeGVzID0gJ1dlYmtpdCBNb3ogTyBtcycuc3BsaXQoJyAnKTtcbiAgICB2YXIgc3RhcnRFdmVudHMgPSAnd2Via2l0QW5pbWF0aW9uU3RhcnQgYW5pbWF0aW9uc3RhcnQgb0FuaW1hdGlvblN0YXJ0IE1TQW5pbWF0aW9uU3RhcnQnLnNwbGl0KCcgJyk7XG4gICAgdmFyIHBmeCA9ICcnO1xuICAgIHtcbiAgICAgIHZhciBlbG0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmYWtlZWxlbWVudCcpO1xuICAgICAgaWYgKGVsbS5zdHlsZS5hbmltYXRpb25OYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYW5pbWF0aW9uID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGFuaW1hdGlvbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkb21QcmVmaXhlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChlbG0uc3R5bGVbZG9tUHJlZml4ZXNbaV0gKyAnQW5pbWF0aW9uTmFtZSddICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHBmeCA9IGRvbVByZWZpeGVzW2ldO1xuICAgICAgICAgICAga2V5ZnJhbWVwcmVmaXggPSAnLScgKyBwZngudG9Mb3dlckNhc2UoKSArICctJztcbiAgICAgICAgICAgIGFuaW1hdGlvblN0YXJ0RXZlbnQgPSBzdGFydEV2ZW50c1tpXTtcbiAgICAgICAgICAgIGFuaW1hdGlvbiA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBhbmltYXRpb25OYW1lID0gJ3Jlc2l6ZWFuaW0nO1xuICAgIGFuaW1hdGlvbktleWZyYW1lcyA9ICdAJyArIGtleWZyYW1lcHJlZml4ICsgJ2tleWZyYW1lcyAnICsgYW5pbWF0aW9uTmFtZSArICcgeyBmcm9tIHsgb3BhY2l0eTogMDsgfSB0byB7IG9wYWNpdHk6IDA7IH0gfSAnO1xuICAgIGFuaW1hdGlvblN0eWxlID0ga2V5ZnJhbWVwcmVmaXggKyAnYW5pbWF0aW9uOiAxbXMgJyArIGFuaW1hdGlvbk5hbWUgKyAnOyAnO1xuICB9XG5cbiAgdmFyIGNyZWF0ZVN0eWxlcyA9IGZ1bmN0aW9uIGNyZWF0ZVN0eWxlcyhkb2MpIHtcbiAgICBpZiAoIWRvYy5nZXRFbGVtZW50QnlJZCgnZGV0ZWN0RWxlbWVudFJlc2l6ZScpKSB7XG4gICAgICAvL29wYWNpdHk6MCB3b3JrcyBhcm91bmQgYSBjaHJvbWUgYnVnIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0yODYzNjBcbiAgICAgIHZhciBjc3MgPSAoYW5pbWF0aW9uS2V5ZnJhbWVzID8gYW5pbWF0aW9uS2V5ZnJhbWVzIDogJycpICsgJy5yZXNpemUtdHJpZ2dlcnMgeyAnICsgKGFuaW1hdGlvblN0eWxlID8gYW5pbWF0aW9uU3R5bGUgOiAnJykgKyAndmlzaWJpbGl0eTogaGlkZGVuOyBvcGFjaXR5OiAwOyB9ICcgKyAnLnJlc2l6ZS10cmlnZ2VycywgLnJlc2l6ZS10cmlnZ2VycyA+IGRpdiwgLmNvbnRyYWN0LXRyaWdnZXI6YmVmb3JlIHsgY29udGVudDogXCIgXCI7IGRpc3BsYXk6IGJsb2NrOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgaGVpZ2h0OiAxMDAlOyB3aWR0aDogMTAwJTsgb3ZlcmZsb3c6IGhpZGRlbjsgei1pbmRleDogLTE7IH0gLnJlc2l6ZS10cmlnZ2VycyA+IGRpdiB7IGJhY2tncm91bmQ6ICNlZWU7IG92ZXJmbG93OiBhdXRvOyB9IC5jb250cmFjdC10cmlnZ2VyOmJlZm9yZSB7IHdpZHRoOiAyMDAlOyBoZWlnaHQ6IDIwMCU7IH0nLFxuICAgICAgICAgIGhlYWQgPSBkb2MuaGVhZCB8fCBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXSxcbiAgICAgICAgICBzdHlsZSA9IGRvYy5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXG4gICAgICBzdHlsZS5pZCA9ICdkZXRlY3RFbGVtZW50UmVzaXplJztcbiAgICAgIHN0eWxlLnR5cGUgPSAndGV4dC9jc3MnO1xuXG4gICAgICBpZiAobm9uY2UgIT0gbnVsbCkge1xuICAgICAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ25vbmNlJywgbm9uY2UpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgICAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2MuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gICAgICB9XG5cbiAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgYWRkUmVzaXplTGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRSZXNpemVMaXN0ZW5lcihlbGVtZW50LCBmbikge1xuICAgIGlmIChhdHRhY2hFdmVudCkge1xuICAgICAgZWxlbWVudC5hdHRhY2hFdmVudCgnb25yZXNpemUnLCBmbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghZWxlbWVudC5fX3Jlc2l6ZVRyaWdnZXJzX18pIHtcbiAgICAgICAgdmFyIGRvYyA9IGVsZW1lbnQub3duZXJEb2N1bWVudDtcbiAgICAgICAgdmFyIGVsZW1lbnRTdHlsZSA9IHdpbmRvd09iamVjdC5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICAgICAgICBpZiAoZWxlbWVudFN0eWxlICYmIGVsZW1lbnRTdHlsZS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpIHtcbiAgICAgICAgICBlbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICAgICAgfVxuICAgICAgICBjcmVhdGVTdHlsZXMoZG9jKTtcbiAgICAgICAgZWxlbWVudC5fX3Jlc2l6ZUxhc3RfXyA9IHt9O1xuICAgICAgICBlbGVtZW50Ll9fcmVzaXplTGlzdGVuZXJzX18gPSBbXTtcbiAgICAgICAgKGVsZW1lbnQuX19yZXNpemVUcmlnZ2Vyc19fID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpKS5jbGFzc05hbWUgPSAncmVzaXplLXRyaWdnZXJzJztcbiAgICAgICAgdmFyIGV4cGFuZFRyaWdnZXIgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGV4cGFuZFRyaWdnZXIuY2xhc3NOYW1lID0gJ2V4cGFuZC10cmlnZ2VyJztcbiAgICAgICAgZXhwYW5kVHJpZ2dlci5hcHBlbmRDaGlsZChkb2MuY3JlYXRlRWxlbWVudCgnZGl2JykpO1xuICAgICAgICB2YXIgY29udHJhY3RUcmlnZ2VyID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb250cmFjdFRyaWdnZXIuY2xhc3NOYW1lID0gJ2NvbnRyYWN0LXRyaWdnZXInO1xuICAgICAgICBlbGVtZW50Ll9fcmVzaXplVHJpZ2dlcnNfXy5hcHBlbmRDaGlsZChleHBhbmRUcmlnZ2VyKTtcbiAgICAgICAgZWxlbWVudC5fX3Jlc2l6ZVRyaWdnZXJzX18uYXBwZW5kQ2hpbGQoY29udHJhY3RUcmlnZ2VyKTtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChlbGVtZW50Ll9fcmVzaXplVHJpZ2dlcnNfXyk7XG4gICAgICAgIHJlc2V0VHJpZ2dlcnMoZWxlbWVudCk7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgc2Nyb2xsTGlzdGVuZXIsIHRydWUpO1xuXG4gICAgICAgIC8qIExpc3RlbiBmb3IgYSBjc3MgYW5pbWF0aW9uIHRvIGRldGVjdCBlbGVtZW50IGRpc3BsYXkvcmUtYXR0YWNoICovXG4gICAgICAgIGlmIChhbmltYXRpb25TdGFydEV2ZW50KSB7XG4gICAgICAgICAgZWxlbWVudC5fX3Jlc2l6ZVRyaWdnZXJzX18uX19hbmltYXRpb25MaXN0ZW5lcl9fID0gZnVuY3Rpb24gYW5pbWF0aW9uTGlzdGVuZXIoZSkge1xuICAgICAgICAgICAgaWYgKGUuYW5pbWF0aW9uTmFtZSA9PT0gYW5pbWF0aW9uTmFtZSkge1xuICAgICAgICAgICAgICByZXNldFRyaWdnZXJzKGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgZWxlbWVudC5fX3Jlc2l6ZVRyaWdnZXJzX18uYWRkRXZlbnRMaXN0ZW5lcihhbmltYXRpb25TdGFydEV2ZW50LCBlbGVtZW50Ll9fcmVzaXplVHJpZ2dlcnNfXy5fX2FuaW1hdGlvbkxpc3RlbmVyX18pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbGVtZW50Ll9fcmVzaXplTGlzdGVuZXJzX18ucHVzaChmbik7XG4gICAgfVxuICB9O1xuXG4gIHZhciByZW1vdmVSZXNpemVMaXN0ZW5lciA9IGZ1bmN0aW9uIHJlbW92ZVJlc2l6ZUxpc3RlbmVyKGVsZW1lbnQsIGZuKSB7XG4gICAgaWYgKGF0dGFjaEV2ZW50KSB7XG4gICAgICBlbGVtZW50LmRldGFjaEV2ZW50KCdvbnJlc2l6ZScsIGZuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudC5fX3Jlc2l6ZUxpc3RlbmVyc19fLnNwbGljZShlbGVtZW50Ll9fcmVzaXplTGlzdGVuZXJzX18uaW5kZXhPZihmbiksIDEpO1xuICAgICAgaWYgKCFlbGVtZW50Ll9fcmVzaXplTGlzdGVuZXJzX18ubGVuZ3RoKSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgc2Nyb2xsTGlzdGVuZXIsIHRydWUpO1xuICAgICAgICBpZiAoZWxlbWVudC5fX3Jlc2l6ZVRyaWdnZXJzX18uX19hbmltYXRpb25MaXN0ZW5lcl9fKSB7XG4gICAgICAgICAgZWxlbWVudC5fX3Jlc2l6ZVRyaWdnZXJzX18ucmVtb3ZlRXZlbnRMaXN0ZW5lcihhbmltYXRpb25TdGFydEV2ZW50LCBlbGVtZW50Ll9fcmVzaXplVHJpZ2dlcnNfXy5fX2FuaW1hdGlvbkxpc3RlbmVyX18pO1xuICAgICAgICAgIGVsZW1lbnQuX19yZXNpemVUcmlnZ2Vyc19fLl9fYW5pbWF0aW9uTGlzdGVuZXJfXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBlbGVtZW50Ll9fcmVzaXplVHJpZ2dlcnNfXyA9ICFlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuX19yZXNpemVUcmlnZ2Vyc19fKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIFByZWFjdCBjb21wYXQ7IHNlZSBkZXZlbG9waXQvcHJlYWN0LWNvbXBhdC9pc3N1ZXMvMjI4XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBhZGRSZXNpemVMaXN0ZW5lcjogYWRkUmVzaXplTGlzdGVuZXIsXG4gICAgcmVtb3ZlUmVzaXplTGlzdGVuZXI6IHJlbW92ZVJlc2l6ZUxpc3RlbmVyXG4gIH07XG59XG5cbnZhciBBdXRvU2l6ZXIgPSBmdW5jdGlvbiAoX1JlYWN0JFB1cmVDb21wb25lbnQpIHtcbiAgaW5oZXJpdHMoQXV0b1NpemVyLCBfUmVhY3QkUHVyZUNvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQXV0b1NpemVyKCkge1xuICAgIHZhciBfcmVmO1xuXG4gICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIEF1dG9TaXplcik7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKF9yZWYgPSBBdXRvU2l6ZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihBdXRvU2l6ZXIpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGhlaWdodDogX3RoaXMucHJvcHMuZGVmYXVsdEhlaWdodCB8fCAwLFxuICAgICAgd2lkdGg6IF90aGlzLnByb3BzLmRlZmF1bHRXaWR0aCB8fCAwXG4gICAgfSwgX3RoaXMuX29uUmVzaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgZGlzYWJsZUhlaWdodCA9IF90aGlzJHByb3BzLmRpc2FibGVIZWlnaHQsXG4gICAgICAgICAgZGlzYWJsZVdpZHRoID0gX3RoaXMkcHJvcHMuZGlzYWJsZVdpZHRoLFxuICAgICAgICAgIG9uUmVzaXplID0gX3RoaXMkcHJvcHMub25SZXNpemU7XG5cblxuICAgICAgaWYgKF90aGlzLl9wYXJlbnROb2RlKSB7XG4gICAgICAgIC8vIEd1YXJkIGFnYWluc3QgQXV0b1NpemVyIGNvbXBvbmVudCBiZWluZyByZW1vdmVkIGZyb20gdGhlIERPTSBpbW1lZGlhdGVseSBhZnRlciBiZWluZyBhZGRlZC5cbiAgICAgICAgLy8gVGhpcyBjYW4gcmVzdWx0IGluIGludmFsaWQgc3R5bGUgdmFsdWVzIHdoaWNoIGNhbiByZXN1bHQgaW4gTmFOIHZhbHVlcyBpZiB3ZSBkb24ndCBoYW5kbGUgdGhlbS5cbiAgICAgICAgLy8gU2VlIGlzc3VlICMxNTAgZm9yIG1vcmUgY29udGV4dC5cblxuICAgICAgICB2YXIgX2hlaWdodCA9IF90aGlzLl9wYXJlbnROb2RlLm9mZnNldEhlaWdodCB8fCAwO1xuICAgICAgICB2YXIgX3dpZHRoID0gX3RoaXMuX3BhcmVudE5vZGUub2Zmc2V0V2lkdGggfHwgMDtcblxuICAgICAgICB2YXIgX3N0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoX3RoaXMuX3BhcmVudE5vZGUpIHx8IHt9O1xuICAgICAgICB2YXIgcGFkZGluZ0xlZnQgPSBwYXJzZUludChfc3R5bGUucGFkZGluZ0xlZnQsIDEwKSB8fCAwO1xuICAgICAgICB2YXIgcGFkZGluZ1JpZ2h0ID0gcGFyc2VJbnQoX3N0eWxlLnBhZGRpbmdSaWdodCwgMTApIHx8IDA7XG4gICAgICAgIHZhciBwYWRkaW5nVG9wID0gcGFyc2VJbnQoX3N0eWxlLnBhZGRpbmdUb3AsIDEwKSB8fCAwO1xuICAgICAgICB2YXIgcGFkZGluZ0JvdHRvbSA9IHBhcnNlSW50KF9zdHlsZS5wYWRkaW5nQm90dG9tLCAxMCkgfHwgMDtcblxuICAgICAgICB2YXIgbmV3SGVpZ2h0ID0gX2hlaWdodCAtIHBhZGRpbmdUb3AgLSBwYWRkaW5nQm90dG9tO1xuICAgICAgICB2YXIgbmV3V2lkdGggPSBfd2lkdGggLSBwYWRkaW5nTGVmdCAtIHBhZGRpbmdSaWdodDtcblxuICAgICAgICBpZiAoIWRpc2FibGVIZWlnaHQgJiYgX3RoaXMuc3RhdGUuaGVpZ2h0ICE9PSBuZXdIZWlnaHQgfHwgIWRpc2FibGVXaWR0aCAmJiBfdGhpcy5zdGF0ZS53aWR0aCAhPT0gbmV3V2lkdGgpIHtcbiAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBoZWlnaHQ6IF9oZWlnaHQgLSBwYWRkaW5nVG9wIC0gcGFkZGluZ0JvdHRvbSxcbiAgICAgICAgICAgIHdpZHRoOiBfd2lkdGggLSBwYWRkaW5nTGVmdCAtIHBhZGRpbmdSaWdodFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgb25SZXNpemUoeyBoZWlnaHQ6IF9oZWlnaHQsIHdpZHRoOiBfd2lkdGggfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCBfdGhpcy5fc2V0UmVmID0gZnVuY3Rpb24gKGF1dG9TaXplcikge1xuICAgICAgX3RoaXMuX2F1dG9TaXplciA9IGF1dG9TaXplcjtcbiAgICB9LCBfdGVtcCksIHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoQXV0b1NpemVyLCBbe1xuICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICB2YXIgbm9uY2UgPSB0aGlzLnByb3BzLm5vbmNlO1xuXG4gICAgICBpZiAodGhpcy5fYXV0b1NpemVyICYmIHRoaXMuX2F1dG9TaXplci5wYXJlbnROb2RlICYmIHRoaXMuX2F1dG9TaXplci5wYXJlbnROb2RlLm93bmVyRG9jdW1lbnQgJiYgdGhpcy5fYXV0b1NpemVyLnBhcmVudE5vZGUub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyAmJiB0aGlzLl9hdXRvU2l6ZXIucGFyZW50Tm9kZSBpbnN0YW5jZW9mIHRoaXMuX2F1dG9TaXplci5wYXJlbnROb2RlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgLy8gRGVsYXkgYWNjZXNzIG9mIHBhcmVudE5vZGUgdW50aWwgbW91bnQuXG4gICAgICAgIC8vIFRoaXMgaGFuZGxlcyBlZGdlLWNhc2VzIHdoZXJlIHRoZSBjb21wb25lbnQgaGFzIGFscmVhZHkgYmVlbiB1bm1vdW50ZWQgYmVmb3JlIGl0cyByZWYgaGFzIGJlZW4gc2V0LFxuICAgICAgICAvLyBBcyB3ZWxsIGFzIGxpYnJhcmllcyBsaWtlIHJlYWN0LWxpdGUgd2hpY2ggaGF2ZSBhIHNsaWdodGx5IGRpZmZlcmVudCBsaWZlY3ljbGUuXG4gICAgICAgIHRoaXMuX3BhcmVudE5vZGUgPSB0aGlzLl9hdXRvU2l6ZXIucGFyZW50Tm9kZTtcblxuICAgICAgICAvLyBEZWZlciByZXF1aXJpbmcgcmVzaXplIGhhbmRsZXIgaW4gb3JkZXIgdG8gc3VwcG9ydCBzZXJ2ZXItc2lkZSByZW5kZXJpbmcuXG4gICAgICAgIC8vIFNlZSBpc3N1ZSAjNDFcbiAgICAgICAgdGhpcy5fZGV0ZWN0RWxlbWVudFJlc2l6ZSA9IGNyZWF0ZURldGVjdEVsZW1lbnRSZXNpemUobm9uY2UpO1xuICAgICAgICB0aGlzLl9kZXRlY3RFbGVtZW50UmVzaXplLmFkZFJlc2l6ZUxpc3RlbmVyKHRoaXMuX3BhcmVudE5vZGUsIHRoaXMuX29uUmVzaXplKTtcblxuICAgICAgICB0aGlzLl9vblJlc2l6ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvbXBvbmVudFdpbGxVbm1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICBpZiAodGhpcy5fZGV0ZWN0RWxlbWVudFJlc2l6ZSAmJiB0aGlzLl9wYXJlbnROb2RlKSB7XG4gICAgICAgIHRoaXMuX2RldGVjdEVsZW1lbnRSZXNpemUucmVtb3ZlUmVzaXplTGlzdGVuZXIodGhpcy5fcGFyZW50Tm9kZSwgdGhpcy5fb25SZXNpemUpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgIGNoaWxkcmVuID0gX3Byb3BzLmNoaWxkcmVuLFxuICAgICAgICAgIGNsYXNzTmFtZSA9IF9wcm9wcy5jbGFzc05hbWUsXG4gICAgICAgICAgZGlzYWJsZUhlaWdodCA9IF9wcm9wcy5kaXNhYmxlSGVpZ2h0LFxuICAgICAgICAgIGRpc2FibGVXaWR0aCA9IF9wcm9wcy5kaXNhYmxlV2lkdGgsXG4gICAgICAgICAgc3R5bGUgPSBfcHJvcHMuc3R5bGU7XG4gICAgICB2YXIgX3N0YXRlID0gdGhpcy5zdGF0ZSxcbiAgICAgICAgICBoZWlnaHQgPSBfc3RhdGUuaGVpZ2h0LFxuICAgICAgICAgIHdpZHRoID0gX3N0YXRlLndpZHRoO1xuXG4gICAgICAvLyBPdXRlciBkaXYgc2hvdWxkIG5vdCBmb3JjZSB3aWR0aC9oZWlnaHQgc2luY2UgdGhhdCBtYXkgcHJldmVudCBjb250YWluZXJzIGZyb20gc2hyaW5raW5nLlxuICAgICAgLy8gSW5uZXIgY29tcG9uZW50IHNob3VsZCBvdmVyZmxvdyBhbmQgdXNlIGNhbGN1bGF0ZWQgd2lkdGgvaGVpZ2h0LlxuICAgICAgLy8gU2VlIGlzc3VlICM2OCBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgICAgdmFyIG91dGVyU3R5bGUgPSB7IG92ZXJmbG93OiAndmlzaWJsZScgfTtcbiAgICAgIHZhciBjaGlsZFBhcmFtcyA9IHt9O1xuXG4gICAgICAvLyBBdm9pZCByZW5kZXJpbmcgY2hpbGRyZW4gYmVmb3JlIHRoZSBpbml0aWFsIG1lYXN1cmVtZW50cyBoYXZlIGJlZW4gY29sbGVjdGVkLlxuICAgICAgLy8gQXQgYmVzdCB0aGlzIHdvdWxkIGp1c3QgYmUgd2FzdGluZyBjeWNsZXMuXG4gICAgICB2YXIgYmFpbG91dE9uQ2hpbGRyZW4gPSBmYWxzZTtcblxuICAgICAgaWYgKCFkaXNhYmxlSGVpZ2h0KSB7XG4gICAgICAgIGlmIChoZWlnaHQgPT09IDApIHtcbiAgICAgICAgICBiYWlsb3V0T25DaGlsZHJlbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgb3V0ZXJTdHlsZS5oZWlnaHQgPSAwO1xuICAgICAgICBjaGlsZFBhcmFtcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIGlmICghZGlzYWJsZVdpZHRoKSB7XG4gICAgICAgIGlmICh3aWR0aCA9PT0gMCkge1xuICAgICAgICAgIGJhaWxvdXRPbkNoaWxkcmVuID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBvdXRlclN0eWxlLndpZHRoID0gMDtcbiAgICAgICAgY2hpbGRQYXJhbXMud2lkdGggPSB3aWR0aDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUsXG4gICAgICAgICAgcmVmOiB0aGlzLl9zZXRSZWYsXG4gICAgICAgICAgc3R5bGU6IF9leHRlbmRzKHt9LCBvdXRlclN0eWxlLCBzdHlsZSlcbiAgICAgICAgfSxcbiAgICAgICAgIWJhaWxvdXRPbkNoaWxkcmVuICYmIGNoaWxkcmVuKGNoaWxkUGFyYW1zKVxuICAgICAgKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIEF1dG9TaXplcjtcbn0oUHVyZUNvbXBvbmVudCk7XG5cbkF1dG9TaXplci5kZWZhdWx0UHJvcHMgPSB7XG4gIG9uUmVzaXplOiBmdW5jdGlvbiBvblJlc2l6ZSgpIHt9LFxuICBkaXNhYmxlSGVpZ2h0OiBmYWxzZSxcbiAgZGlzYWJsZVdpZHRoOiBmYWxzZSxcbiAgc3R5bGU6IHt9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBdXRvU2l6ZXI7XG4iLCJpbXBvcnQgeyBDb21tYW5kTWFuYWdlciB9IGZyb20gJy4uLy4uL21hbmFnZXJzL0NvbW1hbmRNYW5hZ2VyJ1xuaW1wb3J0IEVkaXRvckNvbW1hbmRzIGZyb20gJy4uLy4uL2NvbnN0YW50cy9FZGl0b3JDb21tYW5kcydcbmltcG9ydCB7IFNjZW5lTWFuYWdlciB9IGZyb20gJy4uLy4uL21hbmFnZXJzL1NjZW5lTWFuYWdlcidcbmltcG9ydCB7IGlzQXNzZXQgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvQXNzZXRUeXBlcydcblxuLyoqXG4gKiBhZGRBc3NldE9uRHJvcCB1c2VkIHRvIGFkZGluZyBhc3NldHMgdG8gdGhlIGVkaXRvciBzY2VuZS5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAcGFyYW0ge09iamVjdH0gaXRlbVxuICogQHBhcmFtIHtPYmplY3R9IHBhcmVudFxuICogQHBhcmFtIHtPYmplY3R9IGJlZm9yZVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQXNzZXRPbkRyb3AoaXRlbSwgcGFyZW50PywgYmVmb3JlPykge1xuICBpZiAoaXNBc3NldChpdGVtKSkge1xuICAgIGNvbnN0IHsgbm9kZUNsYXNzLCBpbml0aWFsUHJvcHMgfSA9IGl0ZW1cbiAgICBjb25zdCBub2RlID0gbmV3IG5vZGVDbGFzcygpXG4gICAgaWYgKGluaXRpYWxQcm9wcykge1xuICAgICAgT2JqZWN0LmFzc2lnbihub2RlLCBpbml0aWFsUHJvcHMpXG4gICAgfVxuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmV4ZWN1dGVDb21tYW5kV2l0aEhpc3RvcnkoRWRpdG9yQ29tbWFuZHMuQUREX09CSkVDVFMsIG5vZGUsIHtcbiAgICAgIHBhcmVudHM6IHBhcmVudCxcbiAgICAgIGJlZm9yZXM6IGJlZm9yZVxuICAgIH0pXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuICByZXR1cm4gZmFsc2Vcbn1cblxuLyoqXG4gKiBhZGRBc3NldEF0Q3Vyc29yUG9zaXRpb25PbkRyb3AgdXNlZCB0byBhZGQgZWxlbWVudCBvbiBlZGl0b3Igc2NlbmUgcG9zaXRpb24gdXNpbmcgY3Vyc29yLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSB7T2JqZWN0fSBpdGVtXG4gKiBAcGFyYW0ge09iamVjdH0gbW91c2VQb3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEFzc2V0QXRDdXJzb3JQb3NpdGlvbk9uRHJvcChpdGVtLCBtb3VzZVBvcykge1xuICBpZiAoaXNBc3NldChpdGVtKSkge1xuICAgIGNvbnN0IHsgbm9kZUNsYXNzLCBpbml0aWFsUHJvcHMgfSA9IGl0ZW1cbiAgICBjb25zdCBub2RlID0gbmV3IG5vZGVDbGFzcygpXG4gICAgaWYgKGluaXRpYWxQcm9wcykge1xuICAgICAgT2JqZWN0LmFzc2lnbihub2RlLCBpbml0aWFsUHJvcHMpXG4gICAgfVxuICAgIFNjZW5lTWFuYWdlci5pbnN0YW5jZS5nZXRDdXJzb3JTcGF3blBvc2l0aW9uKG1vdXNlUG9zLCBub2RlLnBvc2l0aW9uKVxuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmV4ZWN1dGVDb21tYW5kV2l0aEhpc3RvcnkoRWRpdG9yQ29tbWFuZHMuQUREX09CSkVDVFMsIG5vZGUpXG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG4gIHJldHVybiBmYWxzZVxufVxuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrLCB1c2VDb250ZXh0LCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgc3R5bGVkLCB7IFRoZW1lQ29udGV4dCB9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJ1xuaW1wb3J0IHsgRXhjbGFtYXRpb25UcmlhbmdsZSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvZmEtc29saWQvRXhjbGFtYXRpb25UcmlhbmdsZSdcbmltcG9ydCBUb29sdGlwIGZyb20gJy4uL2xheW91dC9Ub29sdGlwJ1xuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tICdyZWFjdC1pMThuZXh0J1xuXG4vKipcbiAqIElzc3Vlc1Rvb2x0aXBDb250YWluZXIgdXNlZCB0byBwcm92aWRlIHN0eWxlcyBhbmQgc2hvd2luZyBpc3N1ZXMgbGlzdC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7c3R5bGVkIGNvbXBvbmVudH1cbiAqL1xuY29uc3QgSXNzdWVzVG9vbHRpcENvbnRhaW5lciA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjEsIDIzLCAyNywgMC45KTtcbiAgYm9yZGVyLXJhZGl1czogM3B4O1xuICBwYWRkaW5nOiA4cHg7XG4gIG1heC13aWR0aDogMzIwcHg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7XG4gIHVzZXItc2VsZWN0OiBub25lO1xuXG4gIGg2IHtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gIH1cblxuICB1bCB7XG4gICAgbWFyZ2luLXRvcDogNHB4O1xuICB9XG5cbiAgbGkge1xuICAgIG1hcmdpbi1ib3R0b206IDRweDtcbiAgICBtYXJnaW4tbGVmdDogNHB4O1xuICAgIGZvbnQtZmFtaWx5OiBcIkx1Y2lkYSBDb25zb2xlXCIsIE1vbmFjbywgbW9ub3NwYWNlO1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgfVxuYFxuXG4vKipcbiAqIElzc3VlSWNvbiB1c2VkIHRvIHByb3ZpZGUgc3R5bGVzIHRvIGlzc3VlIGljb24uXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHBhcmFtIHtzdHlsZWQgY29tcG9uZW50fSBzdHlsZWRcbiAqL1xuY29uc3QgSXNzdWVJY29uID0gKHN0eWxlZCBhcyBhbnkpKEV4Y2xhbWF0aW9uVHJpYW5nbGUpYFxuICBjb2xvcjogJHsocHJvcHMpID0+IHByb3BzLmNvbG9yfTtcbmBcblxuLyoqXG4gKiBOb2RlSXNzdWVzSWNvbiBmdW5jdGlvbiBjb21wb25lbnQgdXNlZCB0byBwcm92aWRlIHZpZXcgb2YgaXNzdWVzIGxpc3QuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHBhcmFtICAgICAgIHtmdW5jdGlvbiBjb21wb25lbnR9IG5vZGVcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgZnVuY3Rpb24gTm9kZUlzc3Vlc0ljb24oeyBub2RlIH0pIHtcbiAgY29uc3QgdGhlbWUgPSB1c2VDb250ZXh0KFRoZW1lQ29udGV4dCkgYXMgYW55XG4gIGNvbnN0IHsgdCB9ID0gdXNlVHJhbnNsYXRpb24oKVxuXG4gIGNvbnN0IHNldmVyaXR5VG9Db2xvciA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKHtcbiAgICAgIHdhcm5pbmc6IHRoZW1lLnllbGxvdyxcbiAgICAgIGVycm9yOiB0aGVtZS5yZWRcbiAgICB9KSxcbiAgICBbdGhlbWVdXG4gIClcblxuICAvKipcbiAgICogcmVuZGVySW5mbyBmdW5jdGlvbiB1c2VkIHRvIHJldHVybiB2aWV3LlxuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIGNvbnN0IHJlbmRlckluZm8gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxJc3N1ZXNUb29sdGlwQ29udGFpbmVyPlxuICAgICAgICA8aDY+e3QoJ2VkaXRvcjpoaWVyYXJjaHkuaXNzZXVzJyl9PC9oNj5cbiAgICAgICAgPHVsPlxuICAgICAgICAgIHtub2RlLmlzc3Vlcy5tYXAoKGlzc3VlLCBpKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8bGkga2V5PXtpfT5cbiAgICAgICAgICAgICAgICA8SXNzdWVJY29uIHNpemU9ezEyfSBjb2xvcj17c2V2ZXJpdHlUb0NvbG9yW2lzc3VlLnNldmVyaXR5XX0gLz4ge2lzc3VlLm1lc3NhZ2V9XG4gICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICApXG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvdWw+XG4gICAgICA8L0lzc3Vlc1Rvb2x0aXBDb250YWluZXI+XG4gICAgKVxuICB9LCBbbm9kZSwgc2V2ZXJpdHlUb0NvbG9yXSlcblxuICBsZXQgbWF4U2V2ZXJpdHkgPSAnd2FybmluZydcblxuICBmb3IgKGNvbnN0IGlzc3VlIG9mIG5vZGUuaXNzdWVzKSB7XG4gICAgaWYgKGlzc3VlLnNldmVyaXR5ID09PSAnZXJyb3InKSB7XG4gICAgICBtYXhTZXZlcml0eSA9ICdlcnJvcidcbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8VG9vbHRpcCByZW5kZXJDb250ZW50PXtyZW5kZXJJbmZvfT5cbiAgICAgIDxJc3N1ZUljb24gc2l6ZT17MTR9IGNvbG9yPXtzZXZlcml0eVRvQ29sb3JbbWF4U2V2ZXJpdHldfSAvPlxuICAgIDwvVG9vbHRpcD5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBOb2RlSXNzdWVzSWNvblxuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrLCBtZW1vLCBGcmFnbWVudCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cydcbmltcG9ydCBEZWZhdWx0Tm9kZUVkaXRvciBmcm9tICcuLi9wcm9wZXJ0aWVzL0RlZmF1bHROb2RlRWRpdG9yJ1xuaW1wb3J0IHsgQ29udGV4dE1lbnUsIE1lbnVJdGVtLCBDb250ZXh0TWVudVRyaWdnZXIgfSBmcm9tICcuLi9sYXlvdXQvQ29udGV4dE1lbnUnXG5pbXBvcnQgeyB1c2VEcmFnLCB1c2VEcm9wIH0gZnJvbSAncmVhY3QtZG5kJ1xuaW1wb3J0IHsgZ2V0RW1wdHlJbWFnZSB9IGZyb20gJ3JlYWN0LWRuZC1odG1sNS1iYWNrZW5kJ1xuaW1wb3J0IHsgRml4ZWRTaXplTGlzdCwgYXJlRXF1YWwgfSBmcm9tICdyZWFjdC13aW5kb3cnXG5pbXBvcnQgQXV0b1NpemVyIGZyb20gJ3JlYWN0LXZpcnR1YWxpemVkLWF1dG8tc2l6ZXInXG5pbXBvcnQgeyBhZGRBc3NldE9uRHJvcCB9IGZyb20gJy4uL2RuZCdcbmltcG9ydCB7IENhcmV0UmlnaHQgfSBmcm9tICdAc3R5bGVkLWljb25zL2ZhLXNvbGlkL0NhcmV0UmlnaHQnXG5pbXBvcnQgeyBDYXJldERvd24gfSBmcm9tICdAc3R5bGVkLWljb25zL2ZhLXNvbGlkL0NhcmV0RG93bidcbmltcG9ydCB1c2VVcGxvYWQgZnJvbSAnLi4vYXNzZXRzL3VzZVVwbG9hZCdcbmltcG9ydCB7IEFsbEZpbGVUeXBlcyB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL2Fzc2V0cy9jb25zdGFudHMvZmlsZVR5cGVzJ1xuaW1wb3J0IE5vZGVJc3N1ZXNJY29uIGZyb20gJy4vTm9kZUlzc3Vlc0ljb24nXG5pbXBvcnQgeyB1c2VUcmFuc2xhdGlvbiB9IGZyb20gJ3JlYWN0LWkxOG5leHQnXG5pbXBvcnQgeyBjbWRPckN0cmxTdHJpbmcgfSBmcm9tICcuLi8uLi9mdW5jdGlvbnMvdXRpbHMnXG5pbXBvcnQgdHJhdmVyc2VFYXJseU91dCBmcm9tICcuLi8uLi9mdW5jdGlvbnMvdHJhdmVyc2VFYXJseU91dCdcbmltcG9ydCBFZGl0b3JFdmVudHMgZnJvbSAnLi4vLi4vY29uc3RhbnRzL0VkaXRvckV2ZW50cydcbmltcG9ydCB7IENvbW1hbmRNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vbWFuYWdlcnMvQ29tbWFuZE1hbmFnZXInXG5pbXBvcnQgRWRpdG9yQ29tbWFuZHMgZnJvbSAnLi4vLi4vY29uc3RhbnRzL0VkaXRvckNvbW1hbmRzJ1xuaW1wb3J0IHsgTm9kZU1hbmFnZXIgfSBmcm9tICcuLi8uLi9tYW5hZ2Vycy9Ob2RlTWFuYWdlcidcbmltcG9ydCB7IFNjZW5lTWFuYWdlciB9IGZyb20gJy4uLy4uL21hbmFnZXJzL1NjZW5lTWFuYWdlcidcbmltcG9ydCB7IENvbnRyb2xNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vbWFuYWdlcnMvQ29udHJvbE1hbmFnZXInXG5pbXBvcnQgeyBBc3NldFR5cGVzLCBpc0Fzc2V0LCBJdGVtVHlwZXMgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvQXNzZXRUeXBlcydcblxuLyoqXG4gKiB1cGxvYWRPcHRpb24gaW5pdGlhbGl6aW5nIG9iamVjdCBjb250YWluaW5nIFByb3BlcnRpZXMgbXVsdGlwbGUsIGFjY2VwdHMuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge09iamVjdH1cbiAqL1xuXG5jb25zdCB1cGxvYWRPcHRpb25zID0ge1xuICBtdWx0aXBsZTogdHJ1ZSxcbiAgYWNjZXB0czogQWxsRmlsZVR5cGVzXG59XG5cbi8qKlxuICogZnVuY3Rpb24gcHJvdmlkZXMgbm9kZSBtZW51IHByb3BlcnRpZXMuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHBhcmFtICB7b2JqZWN0fSBub2RlXG4gKiBAcmV0dXJuIHtvYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGNvbGxlY3ROb2RlTWVudVByb3BzKHsgbm9kZSB9KSB7XG4gIHJldHVybiBub2RlXG59XG5cbi8qKlxuICogUGFuZWxDb250YWluZXIgdXNlZCBhcyB3cmFwcGVyIGVsZW1lbnQgZm9yICAgcGVuYWwgY29udGVudC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7U3R5bGVkIGNvbXBvbmVudH1cbiAqL1xuY29uc3QgUGFuZWxDb250YWluZXIgPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICBvdXRsaW5lOiBub25lO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBjb2xvcjogJHsocHJvcHMpID0+IHByb3BzLnRoZW1lLnRleHQyfTtcbmBcblxuLyoqXG4gKiBUcmVlRGVwdGhDb250YWluZXIgdXNlZCB0byBwcm92aWRlIHRoZSBzdHlsZXMgZm9yIGhpZXJhcmNoeSB0cmVlLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtTdHlsZWQgY29tcG9uZW50fVxuICovXG5jb25zdCBUcmVlRGVwdGhDb250YWluZXIgPSAoc3R5bGVkIGFzIGFueSkubGlgYFxuXG4vKipcbiAqIHRyZWVOb2RlQmFja2dyb3VuZENvbG9yIGZ1bmN0aW9uIHVzZWQgdG8gcHJvdmlkZSBiYWNrZ3JvdW5kIGNvbG9yIGZvciB0cmVlIG5vZGVzLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAge2Jvb2xlYW59IHJvb3RcbiAqIEBwYXJhbSAge2Jvb2xlYW59IHNlbGVjdGVkXG4gKiBAcGFyYW0gIHtib29sZWFufSBhY3RpdmVcbiAqIEBwYXJhbSAge29iamVjdH0gdGhlbWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdHJlZU5vZGVCYWNrZ3JvdW5kQ29sb3IoeyByb290LCBzZWxlY3RlZCwgYWN0aXZlLCB0aGVtZSB9KSB7XG4gIGlmIChzZWxlY3RlZCkge1xuICAgIGlmIChhY3RpdmUpIHtcbiAgICAgIHJldHVybiB0aGVtZS5ibHVlUHJlc3NlZFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhlbWUuc2VsZWN0ZWRcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKHJvb3QpIHtcbiAgICAgIHJldHVybiB0aGVtZS5wYW5lbDJcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoZW1lLnBhbmVsXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogZ2V0Tm9kZUtleSBmdW5jdGlvbiB1c2VkIHRvIGdldCBvYmplY3QgaWQgYXQgZ2l2ZW4gaW5kZXguXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHBhcmFtICB7bnVtYmVyfSBpbmRleCBbaW5kZXggb2YgdGhlIG5vZGUgdG8gZ2V0IG9iamVjdCBpZF1cbiAqIEBwYXJhbSAge29iamVjdH0gZGF0YVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBnZXROb2RlS2V5KGluZGV4LCBkYXRhKSB7XG4gIHJldHVybiBkYXRhLm5vZGVzW2luZGV4XS5vYmplY3QuaWRcbn1cblxuLyoqXG4gKiBnZXROb2RlRWxJZCBmdW5jdGlvbiBwcm92aWRlcyBpZCBmb3Igbm9kZS5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAcGFyYW0gIHtvYmplY3R9IG5vZGVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0Tm9kZUVsSWQobm9kZSkge1xuICByZXR1cm4gJ2hpZXJhcmNoeS1ub2RlLScgKyBub2RlLmlkXG59XG5cbi8qKlxuICogVHJlZU5vZGVDb250YWluZXIgdXNlZCB0byBwcm92aWRlIHN0eWxlcyB0byBub2RlIHRyZWUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IFRyZWVOb2RlQ29udGFpbmVyID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgb3V0bGluZTogbm9uZTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcblxuICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RyZWVOb2RlQmFja2dyb3VuZENvbG9yfTtcbiAgYm9yZGVyLWJvdHRvbTogJHsocHJvcHMpID0+IChwcm9wcy5yb290ID8gcHJvcHMudGhlbWUuYm9yZGVyU3R5bGUgOiAnbm9uZScpfTtcblxuICBjb2xvcjogJHsocHJvcHMpID0+IChwcm9wcy5zZWxlY3RlZCB8fCBwcm9wcy5mb2N1c2VkID8gcHJvcHMudGhlbWUudGV4dCA6IHByb3BzLnRoZW1lLnRleHQyKX07XG5cbiAgOmhvdmVyLFxuICA6Zm9jdXMge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICR7KHByb3BzKSA9PiAocHJvcHMuc2VsZWN0ZWQgPyBwcm9wcy50aGVtZS5ibHVlSG92ZXIgOiBwcm9wcy50aGVtZS5ob3Zlcil9O1xuICAgIGNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMudGhlbWUudGV4dH07XG4gIH1cblxuICA6YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMudGhlbWUuYmx1ZVByZXNzZWR9O1xuICAgIGNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMudGhlbWUudGV4dH07XG4gIH1cbmBcblxuLyoqXG4gKiBUcmVlTm9kZVNlbGVjdFRhcmdldCB1c2VkIHRvIHByb3ZpZGUgc3R5bGVzIGZvciBub2RlIGluc2lkZSBoaWVyYXJjaHkgY29udGFpbmVyLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtTdHlsZWQgY29tcG9uZW50fVxuICovXG5jb25zdCBUcmVlTm9kZVNlbGVjdFRhcmdldCA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXg6IDE7XG4gIHBhZGRpbmc6IDJweCA0cHggMnB4IDA7XG5gXG5cbi8qKlxuICogVHJlZU5vZGVMYWJlbENvbnRhaW5lciB1c2VkIHRvIHByb3ZpZGUgc3R5bGVzIGZvciBsYWJlbCB0ZXh0IG9uIGhpZXJhcmNoeSBub2RlLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtTdHlsZWQgY29tcG9uZW50fVxuICovXG5jb25zdCBUcmVlTm9kZUxhYmVsQ29udGFpbmVyID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleDogMTtcbmBcblxuLyoqXG4gKiBUcmVlTm9kZUNvbnRlbnQgdXNlZCB0byBwcm92aWRlIHN0eWxlcyBmb3IgY29udGFpbmVyIGVsZW1lbnQgb2YgVHJlZU5vZGVJY29uIFRyZWVOb2RlTGFiZWwuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBDb21wb25lbnR9XG4gKi9cbmNvbnN0IFRyZWVOb2RlQ29udGVudCA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIG91dGxpbmU6IG5vbmU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHBhZGRpbmctcmlnaHQ6IDhweDtcbiAgcGFkZGluZy1sZWZ0OiAkeyhwcm9wcykgPT4gcHJvcHMuZGVwdGggKiA4ICsgMiArICdweCd9O1xuYFxuXG4vKipcbiAqIFRyZWVOb2RlVG9nZ2xlIGNyZWF0ZXMgZWxlbWVudCB1c2VkIHRvIHRvZ2dsZSBub2RlLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtTdHlsZWQgY29tcG9uZW50fVxuICovXG5jb25zdCBUcmVlTm9kZVRvZ2dsZSA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIHBhZGRpbmc6IDJweCA0cHg7XG4gIG1hcmdpbjogMCA0cHg7XG5cbiAgOmhvdmVyIHtcbiAgICBjb2xvcjogJHsocHJvcHMpID0+IHByb3BzLnRoZW1lLnRleHR9O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS5ob3ZlcjJ9O1xuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgfVxuYFxuXG4vKipcbiAqIFRyZWVOb2RlTGVhZlNwYWNlciB1c2VkIHRvIGNyZWF0ZSBzcGFjZSBiZXR3ZWVuIGxlYWYgbm9kZS5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7U3R5bGVkIGNvbXBvbmVudH1cbiAqL1xuY29uc3QgVHJlZU5vZGVMZWFmU3BhY2VyID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgd2lkdGg6IDIwcHg7XG5gXG5cbi8qKlxuICogVHJlZU5vZGVJY29uIHVzZWQgcHJvdmlkZSBzdHlsZSBmb3IgaWNvbiBpbnNpZGUgdHJlZSBub2RlLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtTdHlsZWQgY29tcG9uZW50fVxuICovXG5jb25zdCBUcmVlTm9kZUljb24gPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICB3aWR0aDogMTJweDtcbiAgaGVpZ2h0OiAxMnB4O1xuICBtYXJnaW46IDJweCA0cHg7XG5gXG5cbi8qKlxuICogVHJlZU5vZGVMYWJlbCB1c2VkIHRvIHByb3ZpZGUgc3R5bGVzIGZvciBsYWJlbCBjb250ZW50IG9mIHRyZWUgbm9kZS5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7U3R5bGVkIGNvbXBvbmVudH1cbiAqL1xuY29uc3QgVHJlZU5vZGVMYWJlbCA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIGJhY2tncm91bmQtY29sb3I6ICR7KHByb3BzKSA9PiAocHJvcHMuaXNPdmVyICYmIHByb3BzLmNhbkRyb3AgPyAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjMpJyA6ICd0cmFuc3BhcmVudCcpfTtcbiAgY29sb3I6ICR7KHByb3BzKSA9PiAocHJvcHMuaXNPdmVyICYmIHByb3BzLmNhbkRyb3AgPyBwcm9wcy50aGVtZS50ZXh0IDogJ2luaGVyaXQnKX07XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgcGFkZGluZzogMCAycHg7XG5gXG5cbi8qKlxuICogYm9yZGVyU3R5bGUgZnVuY3Rpb24gdXNlZCB0byBwcm92aWRlIHN0eWxlcyBmb3IgYm9yZGVyLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAge0Jvb2xlYW59IGlzT3ZlclxuICogQHBhcmFtICB7Qm9vbGVhbn0gIGNhbkRyb3BcbiAqIEBwYXJhbSAge3N0cmluZ30gIHBvc2l0aW9uXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGJvcmRlclN0eWxlKHsgaXNPdmVyLCBjYW5Ecm9wLCBwb3NpdGlvbiB9KSB7XG4gIGlmIChpc092ZXIgJiYgY2FuRHJvcCkge1xuICAgIHJldHVybiBgYm9yZGVyLSR7cG9zaXRpb24gPT09ICdiZWZvcmUnID8gJ3RvcCcgOiAnYm90dG9tJ306IDJweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMylgXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICcnXG4gIH1cbn1cblxuLyoqXG4gKiBUcmVlTm9kZURyb3BUYXJnZXQgdXNlZCB0byBwcm92aWRlIHN0eWxlcyB0byBkcm9wIHRhcmdldCBub2RlLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtTdHlsZWQgY29tcG9uZW50fVxuICovXG5jb25zdCBUcmVlTm9kZURyb3BUYXJnZXQgPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICBoZWlnaHQ6IDRweDtcbiAgYm94LXNpemluZzogY29udGVudC1ib3g7XG4gICR7Ym9yZGVyU3R5bGV9O1xuICBtYXJnaW4tbGVmdDogJHsocHJvcHMpID0+IChwcm9wcy5kZXB0aCA+IDAgPyBwcm9wcy5kZXB0aCAqIDggKyAyMCA6IDApfXB4O1xuYFxuXG4vKipcbiAqIFRyZWVOb2RlUmVuYW1lSW5wdXQgdXNlZCB0byBwcm92aWRlcyBzdHlsZXMgZm9yIHJlbmFtZSBpbnB1dCBvZiBub2RlLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtTdHlsZWQgQ29tcG9uZW50fVxuICovXG5jb25zdCBUcmVlTm9kZVJlbmFtZUlucHV0ID0gKHN0eWxlZCBhcyBhbnkpLmlucHV0YFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogLTNweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogJHsocHJvcHMpID0+IHByb3BzLnRoZW1lLmlucHV0QmFja2dyb3VuZH07XG4gIGNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMudGhlbWUudGV4dH07XG4gIGJvcmRlcjogJHsocHJvcHMpID0+IHByb3BzLnRoZW1lLmJvcmRlclN0eWxlfTtcbiAgcGFkZGluZzogMnB4IDRweDtcbmBcblxuLyoqXG4gKiBUcmVlTm9kZVJlbmFtZUlucHV0Q29udGFpbmVyIHVzZWQgdG8gcHJvdmlkZSBzdHlsZXMgZm9yIHJlbmFtZSBpbnB1dCBjb250YWluZXIgb2YgdHJlZSBub2RlLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtTdHlsZWQgY29tcG9uZW50fVxuICovXG5jb25zdCBUcmVlTm9kZVJlbmFtZUlucHV0Q29udGFpbmVyID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBoZWlnaHQ6IDE1cHg7XG5gXG5cbi8qKlxuICogaXNBbmNlc3RvciB1c2VkIHRvIGNoZWNrIGlmIG9iamVjdCBjb250YWlucyBsZWFmIG5vZGVzIG9yIG5vdC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAcGFyYW0gIHtvYmplY3R9ICBvYmplY3RcbiAqIEBwYXJhbSAge29iamVjdH0gIG90aGVyT2JqZWN0XG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpc0FuY2VzdG9yKG9iamVjdCwgb3RoZXJPYmplY3QpIHtcbiAgcmV0dXJuICF0cmF2ZXJzZUVhcmx5T3V0KG9iamVjdCwgKGNoaWxkKSA9PiBjaGlsZCAhPT0gb3RoZXJPYmplY3QpXG59XG5cbi8qKlxuICogVHJlZU5vZGUgZnVuY3Rpb24gcHJvdmlkZXMgdHJlZSBub2RlIGhpZXJhcmNoeSB2aWV3LlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAgICAgICB7bnVtYmVyfSBpbmRleFxuICogQHBhcmFtICAgICAgIHtvYmplY3R9IGRhdGFcbiAqIEBwYXJhbSAgICAgICB7b2JqZWN0fSByZW5hbWluZ05vZGVcbiAqIEBwYXJhbSAgICAgICB7ZnVuY3Rpb259IG9uVG9nZ2xlXG4gKiBAcGFyYW0gICAgICAge2Z1bmN0aW9ufSBvbktleURvd25cbiAqIEBwYXJhbSAgICAgICB7ZnVuY3Rpb259IG9uTW91c2VEb3duXG4gKiBAcGFyYW0gICAgICAge2Z1bmN0aW9ufSBvbkNsaWNrXG4gKiBAcGFyYW0gICAgICAge2Z1bmN0aW9ufSBvbkNoYW5nZU5hbWVcbiAqIEBwYXJhbSAgICAgICB7ZnVuY3Rpb259IG9uUmVuYW1lU3VibWl0XG4gKiBAcGFyYW0gICAgICAge2Z1bmN0aW9ufSBvblVwbG9hZFxuICogQHBhcmFtICAgICAgIHtvYmplY3R9IHN0eWxlXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gVHJlZU5vZGUoe1xuICBpbmRleCxcbiAgZGF0YTogeyBub2RlcywgcmVuYW1pbmdOb2RlLCBvblRvZ2dsZSwgb25LZXlEb3duLCBvbk1vdXNlRG93biwgb25DbGljaywgb25DaGFuZ2VOYW1lLCBvblJlbmFtZVN1Ym1pdCwgb25VcGxvYWQgfSxcbiAgc3R5bGVcbn0pIHtcbiAgLy9pbml0aWFsaXppbmcgbm9kZSBmcm9tIG5vZGVzIGFycmF5IGF0IHNwZWNpZmljIGluZGV4XG4gIGNvbnN0IG5vZGUgPSBub2Rlc1tpbmRleF1cblxuICAvL2luaXRpYWxpemluZyB2YXJpYWJsZXMgdXNpbmcgbm9kZS5cbiAgY29uc3QgeyBpc0xlYWYsIG9iamVjdCwgZGVwdGgsIHNlbGVjdGVkLCBhY3RpdmUsIGljb25Db21wb25lbnQsIGlzQ29sbGFwc2VkLCBjaGlsZEluZGV4LCBsYXN0Q2hpbGQgfSA9IG5vZGVcblxuICAvL2NhbGxiYWNrIGZ1bmN0aW9uIHRvIGhhbmRsZSBjbGljayBvbiBub2RlIG9mIGhpZXJhcmNoeSBwYW5lbFxuICBjb25zdCBvbkNsaWNrVG9nZ2xlID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgICAgaWYgKG9uVG9nZ2xlKSB7XG4gICAgICAgIG9uVG9nZ2xlKGUsIG5vZGUpXG4gICAgICB9XG4gICAgfSxcbiAgICBbb25Ub2dnbGUsIG5vZGVdXG4gIClcblxuICAvL2NhbGxiYWNrIGZ1bmN0aW9uIHVzZWQgdG8gaGFuZGxlIEtleURvd24gZXZlbnQgb24gbm9kZVxuICBjb25zdCBvbk5vZGVLZXlEb3duID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgICAgaWYgKG9uS2V5RG93bikge1xuICAgICAgICBvbktleURvd24oZSwgbm9kZSlcbiAgICAgIH1cbiAgICB9LFxuICAgIFtvbktleURvd24sIG5vZGVdXG4gIClcblxuICAvKipcbiAgICogb25LZXlEb3duTmFtZUlucHV0IGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGhhbmRsZSBrZXkgZG93biBldmVudCBvbiBuYW1lIGlucHV0LlxuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIGNvbnN0IG9uS2V5RG93bk5hbWVJbnB1dCA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgIG9uUmVuYW1lU3VibWl0KG5vZGUsIG51bGwpXG4gICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgIG9uUmVuYW1lU3VibWl0KG5vZGUsIGUudGFyZ2V0LnZhbHVlKVxuICAgICAgfVxuICAgIH0sXG4gICAgW29uUmVuYW1lU3VibWl0LCBub2RlXVxuICApXG5cbiAgLyoqXG4gICAqIG9uQ2xpY2tOb2RlIGNhbGxiYWNrIGZ1bmN0aW9uIHVzZWQgdG8gaGFubGRlIGNsaWNrIG5vZGUgaW5zaWRlIGhpZXJhcmNoeSBwYW5lbC5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBjb25zdCBvbkNsaWNrTm9kZSA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBvbkNsaWNrKGUsIG5vZGUpXG4gICAgfSxcbiAgICBbbm9kZSwgb25DbGlja11cbiAgKVxuXG4gIC8qKlxuICAgKiBvbk1vdXNlRG93bk5vZGUgY2FsbGJhY2sgZnVuY3Rpb24gdXNlZCB0byBoYW5kbGUgbW91c2UgZG93biBldmVudCBvbiBub2RlLlxuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIGNvbnN0IG9uTW91c2VEb3duTm9kZSA9IHVzZUNhbGxiYWNrKFxuICAgIChlKSA9PiB7XG4gICAgICBvbk1vdXNlRG93bihlLCBub2RlKVxuICAgIH0sXG4gICAgW25vZGUsIG9uTW91c2VEb3duXVxuICApXG5cbiAgLyoqXG4gICAqIG9uQ2hhbmdlTm9kZU5hbWUgY2FsbGJhY2sgZnVuY3Rpb24gdXNlZCB0byBoYW5kbGUgY2hhbmdlIGluIG5hbWUgb2Ygbm9kZS5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBjb25zdCBvbkNoYW5nZU5vZGVOYW1lID0gdXNlQ2FsbGJhY2soXG4gICAgKGUpID0+IHtcbiAgICAgIG9uQ2hhbmdlTmFtZShub2RlLCBlLnRhcmdldC52YWx1ZSlcbiAgICB9LFxuICAgIFtub2RlLCBvbkNoYW5nZU5hbWVdXG4gIClcblxuICAvKipcbiAgICogb25TdWJtaXROb2RlTmFtZSBjYWxsYmFjayBmdW5jdGlvbiB0byBoYW5kbGUgc3VibWl0IG9yIHJlbmFtZSBuYWRlIGlucHV0LlxuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIGNvbnN0IG9uU3VibWl0Tm9kZU5hbWUgPSB1c2VDYWxsYmFjayhcbiAgICAoZSkgPT4ge1xuICAgICAgb25SZW5hbWVTdWJtaXQobm9kZSwgZS50YXJnZXQudmFsdWUpXG4gICAgfSxcbiAgICBbb25SZW5hbWVTdWJtaXQsIG5vZGVdXG4gIClcblxuICAvKipcbiAgICogaW5pdGlhbGl6aW5nIHJlbmFtaW5nIHNldHRpbmcgcmVuYW1pbmcgdHJ1ZSBpZiByZW5hbWluZ05vZGUgaWQgZXF1YWxzIG5vZGUgaWQuXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBjb25zdCByZW5hbWluZyA9IHJlbmFtaW5nTm9kZSAmJiByZW5hbWluZ05vZGUuaWQgPT09IG5vZGUuaWRcblxuICAvL2luaXRpYWxpemluZyBfZHJhZ1Byb3BzLCBkcmFnLCBwcmV2aWV3XG4gIGNvbnN0IFtfZHJhZ1Byb3BzLCBkcmFnLCBwcmV2aWV3XSA9IHVzZURyYWcoe1xuICAgIHR5cGU6IEl0ZW1UeXBlcy5Ob2RlLFxuICAgIGl0ZW0oKSB7XG4gICAgICBjb25zdCBtdWx0aXBsZSA9IENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnNlbGVjdGVkLmxlbmd0aCA+IDFcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IEl0ZW1UeXBlcy5Ob2RlLFxuICAgICAgICBtdWx0aXBsZSxcbiAgICAgICAgdmFsdWU6IG11bHRpcGxlID8gQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2VsZWN0ZWQgOiBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5zZWxlY3RlZFswXVxuICAgICAgfVxuICAgIH0sXG4gICAgY2FuRHJhZygpIHtcbiAgICAgIHJldHVybiAhQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2VsZWN0ZWQuc29tZSgoc2VsZWN0ZWRPYmopID0+ICFzZWxlY3RlZE9iai5wYXJlbnQpXG4gICAgfSxcbiAgICBjb2xsZWN0OiAobW9uaXRvcikgPT4gKHtcbiAgICAgIGlzRHJhZ2dpbmc6ICEhbW9uaXRvci5pc0RyYWdnaW5nKClcbiAgICB9KVxuICB9KVxuXG4gIC8vY2FsbGluZyBwcmV2aWV3IGZ1bmN0aW9uIHdpdGggY2hhbmdlIGluIHByb3BlcnR5XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcHJldmlldyhnZXRFbXB0eUltYWdlKCksIHsgY2FwdHVyZURyYWdnaW5nU3RhdGU6IHRydWUgfSlcbiAgfSwgW3ByZXZpZXddKVxuXG4gIC8vaW5pdGlhbGl6aW5nIGNhbkRyb3BCZWZvcmUgYW5kIGlzT3ZlckJlZm9yZVxuICBjb25zdCBbeyBjYW5Ecm9wQmVmb3JlLCBpc092ZXJCZWZvcmUgfSwgYmVmb3JlRHJvcFRhcmdldF0gPSB1c2VEcm9wKHtcbiAgICAvL2luaXRpYWxpemluZyBhY2NlcHQgdHlwZSB3aXRoIGFycmF5IGNvbnRhaW5pbmcgbm9kZSBpdGVtVHlwZXMsIGZpbGUgSXRlbVR5cGVzIGFuZCBhc3NldCB0eXBlc1xuICAgIGFjY2VwdDogW0l0ZW1UeXBlcy5Ob2RlLCBJdGVtVHlwZXMuRmlsZSwgLi4uQXNzZXRUeXBlc10sXG5cbiAgICAvL2Z1bmN0aW9uIHVzZWQgdG8gZHJvcCBpdGVtc1xuICAgIGRyb3AoaXRlbTogYW55KSB7XG4gICAgICAvL2NoZWNrIGlmIGl0ZW0gY29udGFpbiBmaWxlc1xuICAgICAgaWYgKGl0ZW0uZmlsZXMpIHtcbiAgICAgICAgLy91cGxvYWRpbmcgZmlsZXMgdGhlbiBhZGRpbmcgYXMgbWVkaWEgdG8gdGhlIGVkaXRvclxuICAgICAgICBvblVwbG9hZChpdGVtLmZpbGVzKS50aGVuKChhc3NldHMpID0+IHtcbiAgICAgICAgICBpZiAoYXNzZXRzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFzc2V0IG9mIGFzc2V0cykge1xuICAgICAgICAgICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRNZWRpYSh7IHVybDogYXNzZXQudXJsIH0sIG9iamVjdC5wYXJlbnQsIG9iamVjdClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvL2NoZWNrIGlmIGFkZEFzc2V0T25Ecm9wIHJldHVybnMgdHJ1ZSB0aGVuIHJldHVyblxuICAgICAgaWYgKGFkZEFzc2V0T25Ecm9wKGl0ZW0sIG9iamVjdC5wYXJlbnQsIG9iamVjdCkpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5leGVjdXRlQ29tbWFuZFdpdGhIaXN0b3J5KEVkaXRvckNvbW1hbmRzLlJFUEFSRU5ULCBpdGVtLnZhbHVlLCB7XG4gICAgICAgICAgcGFyZW50czogb2JqZWN0LnBhcmVudCxcbiAgICAgICAgICBiZWZvcmVzOiBvYmplY3RcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9LFxuICAgIGNhbkRyb3AoaXRlbSwgbW9uaXRvcikge1xuICAgICAgLy91c2VkIHRvIGNoZWNrIGl0ZW0gdGhhdCBpdGVtIGlzIGRyb3BhYmxlIG9yIG5vdFxuXG4gICAgICAvL2NoZWNrIGlmIG1vbml0b3IgaXMgb3ZlciBvciBvYmplY3QgaXMgbm90IHBhcmVudCBlbGVtZW50XG4gICAgICBpZiAoIW1vbml0b3IuaXNPdmVyKCkgfHwgIW9iamVjdC5wYXJlbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG5cbiAgICAgIC8vY2hlY2sgaXRlbSBpcyBhc3NldFxuICAgICAgaWYgKGlzQXNzZXQoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cblxuICAgICAgLy9jaGVjayBpZiBpdGVtIHR5cGUgaXMgZXF1YWxzIHRvIG5vZGVcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09IEl0ZW1UeXBlcy5Ob2RlKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgb2JqZWN0LnBhcmVudCAmJlxuICAgICAgICAgICEoaXRlbS5tdWx0aXBsZVxuICAgICAgICAgICAgPyBpdGVtLnZhbHVlLnNvbWUoKG90aGVyT2JqZWN0KSA9PiBpc0FuY2VzdG9yKG90aGVyT2JqZWN0LCBvYmplY3QpKVxuICAgICAgICAgICAgOiBpc0FuY2VzdG9yKGl0ZW0udmFsdWUsIG9iamVjdCkpXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuICAgIGNvbGxlY3Q6IChtb25pdG9yKSA9PiAoe1xuICAgICAgY2FuRHJvcEJlZm9yZTogbW9uaXRvci5jYW5Ecm9wKCksXG4gICAgICBpc092ZXJCZWZvcmU6IG1vbml0b3IuaXNPdmVyKClcbiAgICB9KVxuICB9KVxuXG4gIC8qKlxuICAgKiBpbml0aWFsaXppbmcgdmFyaWFibGUgdXNpbmcgdXNlRHJvcC5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKi9cbiAgY29uc3QgW3sgY2FuRHJvcEFmdGVyLCBpc092ZXJBZnRlciB9LCBhZnRlckRyb3BUYXJnZXRdID0gdXNlRHJvcCh7XG4gICAgLy8gaW5pdGlhbGl6aW5nIGFjY2VwdCB3aXRoIGFycmF5IGNvbnRhaW5pbmcgdHlwZXNcbiAgICBhY2NlcHQ6IFtJdGVtVHlwZXMuTm9kZSwgSXRlbVR5cGVzLkZpbGUsIC4uLkFzc2V0VHlwZXNdLFxuICAgIGRyb3AoaXRlbTogYW55KSB7XG4gICAgICAvLyBpbml0aWFsaXppbmcgbmV4dCBhbmQgaXMgdHJ1ZSBpZiBub3QgbGFzdCBjaGlsZCBhbmQgb2JqZWN0IHBhcmVudCBjb250YWlucyBjaGlsZHJlbiBwcm9wZXJ0eSBhbmQgY29udGFpbiBjaGlsZEluZGV4XG4gICAgICBjb25zdCBuZXh0ID0gIWxhc3RDaGlsZCAmJiBvYmplY3QucGFyZW50LmNoaWxkcmVuW2NoaWxkSW5kZXggKyAxXVxuXG4gICAgICAvL2NoZWNrIGlmIGl0ZW0gY29udGFpbnMgZmlsZXNcbiAgICAgIGlmIChpdGVtLmZpbGVzKSB7XG4gICAgICAgIC8vdXBsb2FkaW5nIGZpbGVzIHRoZW4gYWRkaW5nIGFzc2V0cyB0byBlZGl0b3IgbWVkaWFcbiAgICAgICAgb25VcGxvYWQoaXRlbS5maWxlcykudGhlbigoYXNzZXRzKSA9PiB7XG4gICAgICAgICAgaWYgKGFzc2V0cykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBhc3NldCBvZiBhc3NldHMpIHtcbiAgICAgICAgICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTWVkaWEoeyB1cmw6IGFzc2V0LnVybCB9LCBvYmplY3QucGFyZW50LCBuZXh0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmIChhZGRBc3NldE9uRHJvcChpdGVtLCBvYmplY3QucGFyZW50LCBuZXh0KSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmV4ZWN1dGVDb21tYW5kV2l0aEhpc3RvcnkoRWRpdG9yQ29tbWFuZHMuUkVQQVJFTlQsIGl0ZW0udmFsdWUsIHtcbiAgICAgICAgICBwYXJlbnRzOiBvYmplY3QucGFyZW50LFxuICAgICAgICAgIGJlZm9yZXM6IG5leHRcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogY2FuRHJvcCB1c2VkIHRvIGNoZWNrIGl0ZW0gaXMgZHJvcGFibGUgb3Igbm90LlxuICAgICAqXG4gICAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgICAqIEBwYXJhbSAge29iamVjdH0gaXRlbVxuICAgICAqIEBwYXJhbSAge29iamVjdH0gbW9uaXRvclxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgY2FuRHJvcChpdGVtLCBtb25pdG9yKSB7XG4gICAgICBpZiAoIW1vbml0b3IuaXNPdmVyKCkgfHwgIW9iamVjdC5wYXJlbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG5cbiAgICAgIC8vIGNoZWNrIGlmIGl0ZW0gaXMgYXNzZXRcbiAgICAgIGlmIChpc0Fzc2V0KGl0ZW0pKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG5cbiAgICAgIC8vY2hlY2sgaWYgaXRlbSBpcyBvZiBub2RlIHR5cGVcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09IEl0ZW1UeXBlcy5Ob2RlKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgb2JqZWN0LnBhcmVudCAmJlxuICAgICAgICAgICEoaXRlbS5tdWx0aXBsZVxuICAgICAgICAgICAgPyBpdGVtLnZhbHVlLnNvbWUoKG90aGVyT2JqZWN0KSA9PiBpc0FuY2VzdG9yKG90aGVyT2JqZWN0LCBvYmplY3QpKVxuICAgICAgICAgICAgOiBpc0FuY2VzdG9yKGl0ZW0udmFsdWUsIG9iamVjdCkpXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9LFxuICAgIGNvbGxlY3Q6IChtb25pdG9yKSA9PiAoe1xuICAgICAgY2FuRHJvcEFmdGVyOiBtb25pdG9yLmNhbkRyb3AoKSxcbiAgICAgIGlzT3ZlckFmdGVyOiBtb25pdG9yLmlzT3ZlcigpXG4gICAgfSlcbiAgfSlcblxuICBjb25zdCBbeyBjYW5Ecm9wT24sIGlzT3Zlck9uIH0sIG9uRHJvcFRhcmdldF0gPSB1c2VEcm9wKHtcbiAgICAvL2luaXRpYWxpemluZyBhY2NlcHQgd2l0aCBhcnJheSBjb250YWluaW5nIHR5cGVzXG4gICAgYWNjZXB0OiBbSXRlbVR5cGVzLk5vZGUsIEl0ZW1UeXBlcy5GaWxlLCAuLi5Bc3NldFR5cGVzXSxcbiAgICBkcm9wKGl0ZW06IGFueSkge1xuICAgICAgLy8gY2hlY2sgaWYgaXRlbSBjb250YWluIGZpbGVzXG4gICAgICBpZiAoaXRlbS5maWxlcykge1xuICAgICAgICAvL3VwbG9hZGluZyBmaWxlcyB0aGVuIGFkZGluZyBhc3NldHMgdG8gZWRpdG9yIG1lZGlhXG4gICAgICAgIG9uVXBsb2FkKGl0ZW0uZmlsZXMpLnRoZW4oKGFzc2V0cykgPT4ge1xuICAgICAgICAgIGlmIChhc3NldHMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYXNzZXQgb2YgYXNzZXRzKSB7XG4gICAgICAgICAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmFkZE1lZGlhKHsgdXJsOiBhc3NldC51cmwgfSwgb2JqZWN0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmIChhZGRBc3NldE9uRHJvcChpdGVtLCBvYmplY3QpKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuZXhlY3V0ZUNvbW1hbmRXaXRoSGlzdG9yeShFZGl0b3JDb21tYW5kcy5SRVBBUkVOVCwgaXRlbS52YWx1ZSwgeyBwYXJlbnRzOiBvYmplY3QgfSlcbiAgICAgIH1cbiAgICB9LFxuICAgIGNhbkRyb3AoaXRlbSwgbW9uaXRvcikge1xuICAgICAgLy8gY2hlY2sgaWYgbW9uaXRvciBpcyBub3Qgb3ZlclxuICAgICAgaWYgKCFtb25pdG9yLmlzT3ZlcigpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuXG4gICAgICAvL2NoZWNrIGl0ZW0gaXMgYXNzZXRcbiAgICAgIGlmIChpc0Fzc2V0KGl0ZW0pKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG5cbiAgICAgIC8vIGNoZWNrIGlmIGl0ZW0gaXMgb2Ygbm9kZSB0eXBlXG4gICAgICBpZiAoaXRlbS50eXBlID09PSBJdGVtVHlwZXMuTm9kZSkge1xuICAgICAgICByZXR1cm4gIShpdGVtLm11bHRpcGxlXG4gICAgICAgICAgPyBpdGVtLnZhbHVlLnNvbWUoKG90aGVyT2JqZWN0KSA9PiBpc0FuY2VzdG9yKG90aGVyT2JqZWN0LCBvYmplY3QpKVxuICAgICAgICAgIDogaXNBbmNlc3RvcihpdGVtLnZhbHVlLCBvYmplY3QpKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0sXG4gICAgY29sbGVjdDogKG1vbml0b3IpID0+ICh7XG4gICAgICBjYW5Ecm9wT246IG1vbml0b3IuY2FuRHJvcCgpLFxuICAgICAgaXNPdmVyT246IG1vbml0b3IuaXNPdmVyKClcbiAgICB9KVxuICB9KVxuXG4gIC8vcmV0dXJuaW5nIHRyZWUgdmlldyBmb3IgaGllcmFyY2h5IHBhbmVsXG4gIHJldHVybiAoXG4gICAgPFRyZWVEZXB0aENvbnRhaW5lciBzdHlsZT17c3R5bGV9PlxuICAgICAgPENvbnRleHRNZW51VHJpZ2dlciBob2xkVG9EaXNwbGF5PXstMX0gaWQ9XCJoaWVyYXJjaHktbm9kZS1tZW51XCIgbm9kZT17bm9kZX0gY29sbGVjdD17Y29sbGVjdE5vZGVNZW51UHJvcHN9PlxuICAgICAgICA8VHJlZU5vZGVDb250YWluZXJcbiAgICAgICAgICByZWY9e2RyYWd9XG4gICAgICAgICAgaWQ9e2dldE5vZGVFbElkKG5vZGUpfVxuICAgICAgICAgIG9uTW91c2VEb3duPXtvbk1vdXNlRG93bk5vZGV9XG4gICAgICAgICAgb25DbGljaz17b25DbGlja05vZGV9XG4gICAgICAgICAgdGFiSW5kZXg9XCIwXCJcbiAgICAgICAgICBvbktleURvd249e29uTm9kZUtleURvd259XG4gICAgICAgICAgcm9vdD17ZGVwdGggPT09IDB9XG4gICAgICAgICAgc2VsZWN0ZWQ9e3NlbGVjdGVkfVxuICAgICAgICAgIGFjdGl2ZT17YWN0aXZlfVxuICAgICAgICA+XG4gICAgICAgICAgPFRyZWVOb2RlRHJvcFRhcmdldFxuICAgICAgICAgICAgcmVmPXtiZWZvcmVEcm9wVGFyZ2V0fVxuICAgICAgICAgICAgZGVwdGg9e2RlcHRofVxuICAgICAgICAgICAgcG9zaXRpb249XCJiZWZvcmVcIlxuICAgICAgICAgICAgY2FuRHJvcD17Y2FuRHJvcEJlZm9yZX1cbiAgICAgICAgICAgIGlzT3Zlcj17aXNPdmVyQmVmb3JlfVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPFRyZWVOb2RlQ29udGVudCBkZXB0aD17ZGVwdGh9IHJlZj17b25Ecm9wVGFyZ2V0fT5cbiAgICAgICAgICAgIHtpc0xlYWYgPyAoXG4gICAgICAgICAgICAgIDxUcmVlTm9kZUxlYWZTcGFjZXIgLz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxUcmVlTm9kZVRvZ2dsZSBjb2xsYXBzZWQ9e2lzQ29sbGFwc2VkfSBvbkNsaWNrPXtvbkNsaWNrVG9nZ2xlfT5cbiAgICAgICAgICAgICAgICB7aXNDb2xsYXBzZWQgPyA8Q2FyZXRSaWdodCBzaXplPXsxMn0gLz4gOiA8Q2FyZXREb3duIHNpemU9ezEyfSAvPn1cbiAgICAgICAgICAgICAgPC9UcmVlTm9kZVRvZ2dsZT5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIDxUcmVlTm9kZVNlbGVjdFRhcmdldD5cbiAgICAgICAgICAgICAgPFRyZWVOb2RlSWNvbiBhcz17aWNvbkNvbXBvbmVudH0gLz5cbiAgICAgICAgICAgICAgPFRyZWVOb2RlTGFiZWxDb250YWluZXI+XG4gICAgICAgICAgICAgICAge3JlbmFtaW5nID8gKFxuICAgICAgICAgICAgICAgICAgPFRyZWVOb2RlUmVuYW1lSW5wdXRDb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgIDxUcmVlTm9kZVJlbmFtZUlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZU5vZGVOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17b25LZXlEb3duTmFtZUlucHV0fVxuICAgICAgICAgICAgICAgICAgICAgIG9uQmx1cj17b25TdWJtaXROb2RlTmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cmVuYW1pbmdOb2RlLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgYXV0b0ZvY3VzXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L1RyZWVOb2RlUmVuYW1lSW5wdXRDb250YWluZXI+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxUcmVlTm9kZUxhYmVsIGNhbkRyb3A9e2NhbkRyb3BPbn0gaXNPdmVyPXtpc092ZXJPbn0+XG4gICAgICAgICAgICAgICAgICAgIHtvYmplY3QubmFtZX1cbiAgICAgICAgICAgICAgICAgIDwvVHJlZU5vZGVMYWJlbD5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L1RyZWVOb2RlTGFiZWxDb250YWluZXI+XG4gICAgICAgICAgICAgIHtub2RlLm9iamVjdC5pc3N1ZXMgJiYgbm9kZS5vYmplY3QuaXNzdWVzLmxlbmd0aCA+IDAgJiYgPE5vZGVJc3N1ZXNJY29uIG5vZGU9e25vZGUub2JqZWN0fSAvPn1cbiAgICAgICAgICAgIDwvVHJlZU5vZGVTZWxlY3RUYXJnZXQ+XG4gICAgICAgICAgPC9UcmVlTm9kZUNvbnRlbnQ+XG5cbiAgICAgICAgICA8VHJlZU5vZGVEcm9wVGFyZ2V0XG4gICAgICAgICAgICBkZXB0aD17ZGVwdGh9XG4gICAgICAgICAgICByZWY9e2FmdGVyRHJvcFRhcmdldH1cbiAgICAgICAgICAgIHBvc2l0aW9uPVwiYWZ0ZXJcIlxuICAgICAgICAgICAgY2FuRHJvcD17Y2FuRHJvcEFmdGVyfVxuICAgICAgICAgICAgaXNPdmVyPXtpc092ZXJBZnRlcn1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1RyZWVOb2RlQ29udGFpbmVyPlxuICAgICAgPC9Db250ZXh0TWVudVRyaWdnZXI+XG4gICAgPC9UcmVlRGVwdGhDb250YWluZXI+XG4gIClcbn1cblxuLyoqXG4gKiBpbml0aWFsaXppbmcgTWVtb1RyZWVOb2RlLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqL1xuY29uc3QgTWVtb1RyZWVOb2RlID0gbWVtbyhUcmVlTm9kZSwgYXJlRXF1YWwpXG5cbi8qKlxuICogdHJlZVdhbGtlciBmdW5jdGlvbiB1c2VkIHRvIGhhbmRsZSB0cmVlLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAge29iamVjdH0gICAgY29sbGFwc2VkTm9kZXNcbiAqL1xuZnVuY3Rpb24qIHRyZWVXYWxrZXIoY29sbGFwc2VkTm9kZXMpIHtcbiAgY29uc3Qgc3RhY2sgPSBbXVxuXG4gIGlmICghU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lKSByZXR1cm5cblxuICBzdGFjay5wdXNoKHtcbiAgICBkZXB0aDogMCxcbiAgICBvYmplY3Q6IFNjZW5lTWFuYWdlci5pbnN0YW5jZS5zY2VuZSxcbiAgICBjaGlsZEluZGV4OiAwLFxuICAgIGxhc3RDaGlsZDogdHJ1ZVxuICB9KVxuXG4gIHdoaWxlIChzdGFjay5sZW5ndGggIT09IDApIHtcbiAgICBjb25zdCB7IGRlcHRoLCBvYmplY3QsIGNoaWxkSW5kZXgsIGxhc3RDaGlsZCB9ID0gc3RhY2sucG9wKClcblxuICAgIGNvbnN0IE5vZGVFZGl0b3IgPSBOb2RlTWFuYWdlci5pbnN0YW5jZS5nZXRFZGl0b3JGcm9tTm9kZShvYmplY3QpIHx8IERlZmF1bHROb2RlRWRpdG9yXG4gICAgY29uc3QgaWNvbkNvbXBvbmVudCA9IE5vZGVFZGl0b3IuV3JhcHBlZENvbXBvbmVudFxuICAgICAgPyBOb2RlRWRpdG9yLldyYXBwZWRDb21wb25lbnQuaWNvbkNvbXBvbmVudFxuICAgICAgOiBOb2RlRWRpdG9yLmljb25Db21wb25lbnRcblxuICAgIGNvbnN0IGlzQ29sbGFwc2VkID0gY29sbGFwc2VkTm9kZXNbb2JqZWN0LmlkXVxuXG4gICAgeWllbGQge1xuICAgICAgaWQ6IG9iamVjdC5pZCxcbiAgICAgIGlzTGVhZjogb2JqZWN0LmNoaWxkcmVuLmZpbHRlcigoYykgPT4gYy5pc05vZGUpLmxlbmd0aCA9PT0gMCxcbiAgICAgIGlzQ29sbGFwc2VkLFxuICAgICAgZGVwdGgsXG4gICAgICBvYmplY3QsXG4gICAgICBpY29uQ29tcG9uZW50LFxuICAgICAgc2VsZWN0ZWQ6IENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnNlbGVjdGVkLmluZGV4T2Yob2JqZWN0KSAhPT0gLTEsXG4gICAgICBhY3RpdmU6XG4gICAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnNlbGVjdGVkLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgb2JqZWN0ID09PSBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5zZWxlY3RlZFtDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5zZWxlY3RlZC5sZW5ndGggLSAxXSxcbiAgICAgIGNoaWxkSW5kZXgsXG4gICAgICBsYXN0Q2hpbGRcbiAgICB9XG5cbiAgICBpZiAob2JqZWN0LmNoaWxkcmVuLmxlbmd0aCAhPT0gMCAmJiAhaXNDb2xsYXBzZWQpIHtcbiAgICAgIGZvciAobGV0IGkgPSBvYmplY3QuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgY29uc3QgY2hpbGQgPSBvYmplY3QuY2hpbGRyZW5baV1cblxuICAgICAgICBpZiAoY2hpbGQuaXNOb2RlKSB7XG4gICAgICAgICAgc3RhY2sucHVzaCh7XG4gICAgICAgICAgICBkZXB0aDogZGVwdGggKyAxLFxuICAgICAgICAgICAgb2JqZWN0OiBjaGlsZCxcbiAgICAgICAgICAgIGNoaWxkSW5kZXg6IGksXG4gICAgICAgICAgICBsYXN0Q2hpbGQ6IGkgPT09IDBcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogSGllcmFyY2h5UGFuZWwgZnVuY3Rpb24gY29tcG9uZW50IHByb3ZpZGVzIHZpZXcgZm9yIGhpZXJhcmNoeSB0cmVlLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBIaWVyYXJjaHlQYW5lbCgpIHtcbiAgY29uc3Qgb25VcGxvYWQgPSB1c2VVcGxvYWQodXBsb2FkT3B0aW9ucylcbiAgY29uc3QgW3JlbmFtaW5nTm9kZSwgc2V0UmVuYW1pbmdOb2RlXSA9IHVzZVN0YXRlKG51bGwpXG4gIGNvbnN0IFtjb2xsYXBzZWROb2Rlcywgc2V0Q29sbGFwc2VkTm9kZXNdID0gdXNlU3RhdGUoe30pXG4gIGNvbnN0IFtub2Rlcywgc2V0Tm9kZXNdID0gdXNlU3RhdGUoW10pXG4gIGNvbnN0IHVwZGF0ZU5vZGVIaWVyYXJjaHkgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3Qgbm9kZXMgPSBBcnJheS5mcm9tKHRyZWVXYWxrZXIoY29sbGFwc2VkTm9kZXMpKVxuICAgIHNldE5vZGVzKG5vZGVzKVxuICB9LCBbY29sbGFwc2VkTm9kZXNdKVxuICBjb25zdCB7IHQgfSA9IHVzZVRyYW5zbGF0aW9uKClcblxuICAvKipcbiAgICogZXhwYW5kTm9kZSBjYWxsYmFjayBmdW5jdGlvbiB1c2VkIHRvIGV4cGFuZCBub2RlLlxuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIGNvbnN0IGV4cGFuZE5vZGUgPSB1c2VDYWxsYmFjayhcbiAgICAobm9kZSkgPT4ge1xuICAgICAgZGVsZXRlIGNvbGxhcHNlZE5vZGVzW25vZGUuaWRdXG4gICAgICBzZXRDb2xsYXBzZWROb2Rlcyh7IC4uLmNvbGxhcHNlZE5vZGVzIH0pXG4gICAgfSxcbiAgICBbY29sbGFwc2VkTm9kZXNdXG4gIClcblxuICAvKipcbiAgICogY29sbGFwc2VOb2RlIGZ1bmN0aW9uIHVzZWQgdG8gY29sbGFwc2Ugbm9kZS5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBjb25zdCBjb2xsYXBzZU5vZGUgPSB1c2VDYWxsYmFjayhcbiAgICAobm9kZSkgPT4ge1xuICAgICAgc2V0Q29sbGFwc2VkTm9kZXMoeyAuLi5jb2xsYXBzZWROb2RlcywgW25vZGUuaWRdOiB0cnVlIH0pXG4gICAgfSxcbiAgICBbc2V0Q29sbGFwc2VkTm9kZXMsIGNvbGxhcHNlZE5vZGVzXVxuICApXG5cbiAgLyoqXG4gICAqIGV4cGFuZENoaWxkcmVuIGZ1bmN0aW9uIHVzZWQgdG8gZXhwYW5kIGNoaWxkcmVuLlxuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIGNvbnN0IGV4cGFuZENoaWxkcmVuID0gdXNlQ2FsbGJhY2soXG4gICAgKG5vZGUpID0+IHtcbiAgICAgIG5vZGUub2JqZWN0LnRyYXZlcnNlKChjaGlsZCkgPT4ge1xuICAgICAgICBpZiAoY2hpbGQuaXNOb2RlKSB7XG4gICAgICAgICAgZGVsZXRlIGNvbGxhcHNlZE5vZGVzW2NoaWxkLmlkXVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgc2V0Q29sbGFwc2VkTm9kZXMoeyAuLi5jb2xsYXBzZWROb2RlcyB9KVxuICAgIH0sXG4gICAgW3NldENvbGxhcHNlZE5vZGVzLCBjb2xsYXBzZWROb2Rlc11cbiAgKVxuXG4gIC8qKlxuICAgKiBjb2xsYXBzZUNoaWxkcmVuIGZ1bmN0aW9uIHVzZWQgdG8gY29sbGFwc2UgY2hpbGRyZW4uXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3QgY29sbGFwc2VDaGlsZHJlbiA9IHVzZUNhbGxiYWNrKFxuICAgIChub2RlKSA9PiB7XG4gICAgICBub2RlLm9iamVjdC50cmF2ZXJzZSgoY2hpbGQpID0+IHtcbiAgICAgICAgaWYgKGNoaWxkLmlzTm9kZSkge1xuICAgICAgICAgIGNvbGxhcHNlZE5vZGVzW2NoaWxkLmlkXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHNldENvbGxhcHNlZE5vZGVzKHsgLi4uY29sbGFwc2VkTm9kZXMgfSlcbiAgICB9LFxuICAgIFtzZXRDb2xsYXBzZWROb2RlcywgY29sbGFwc2VkTm9kZXNdXG4gIClcblxuICAvKipcbiAgICogZnVuY3Rpb24gdXNlZCB0byBleHBhbmQgYWxsIG5vZGUuXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3Qgb25FeHBhbmRBbGxOb2RlcyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRDb2xsYXBzZWROb2Rlcyh7fSlcbiAgfSwgW3NldENvbGxhcHNlZE5vZGVzXSlcblxuICAvKipcbiAgICogZnVuY3Rpb24gdXNlZCB0byBjb2xsYXBzZSBhbGwgbm9kZXMuXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3Qgb25Db2xsYXBzZUFsbE5vZGVzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IG5ld0NvbGxhcHNlZE5vZGVzID0ge31cbiAgICBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmUudHJhdmVyc2UoKGNoaWxkKSA9PiB7XG4gICAgICBpZiAoY2hpbGQuaXNOb2RlKSB7XG4gICAgICAgIG5ld0NvbGxhcHNlZE5vZGVzW2NoaWxkLmlkXSA9IHRydWVcbiAgICAgIH1cbiAgICB9KVxuICAgIHNldENvbGxhcHNlZE5vZGVzKG5ld0NvbGxhcHNlZE5vZGVzKVxuICB9LCBbc2V0Q29sbGFwc2VkTm9kZXNdKVxuXG4gIC8qKlxuICAgKiBvbk9iamVjdENoYW5nZWQgY2FsbGJhY2sgZnVuY3Rpb24gdXNlZCB0byBoYW5kbGUgY2hhbmdlcyBvbiBvYmplY3QuXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3Qgb25PYmplY3RDaGFuZ2VkID0gdXNlQ2FsbGJhY2soXG4gICAgKG9iamVjdHMsIHByb3BlcnR5TmFtZSkgPT4ge1xuICAgICAgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ25hbWUnIHx8ICFwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgdXBkYXRlTm9kZUhpZXJhcmNoeSgpXG4gICAgICB9XG4gICAgfSxcbiAgICBbdXBkYXRlTm9kZUhpZXJhcmNoeV1cbiAgKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlNDRU5FX0dSQVBIX0NIQU5HRUQudG9TdHJpbmcoKSwgdXBkYXRlTm9kZUhpZXJhcmNoeSlcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuU0VMRUNUSU9OX0NIQU5HRUQudG9TdHJpbmcoKSwgdXBkYXRlTm9kZUhpZXJhcmNoeSlcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuT0JKRUNUU19DSEFOR0VELnRvU3RyaW5nKCksIG9uT2JqZWN0Q2hhbmdlZClcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihFZGl0b3JFdmVudHMuU0NFTkVfR1JBUEhfQ0hBTkdFRC50b1N0cmluZygpLCB1cGRhdGVOb2RlSGllcmFyY2h5KVxuICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlNFTEVDVElPTl9DSEFOR0VELnRvU3RyaW5nKCksIHVwZGF0ZU5vZGVIaWVyYXJjaHkpXG4gICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihFZGl0b3JFdmVudHMuT0JKRUNUU19DSEFOR0VELnRvU3RyaW5nKCksIG9uT2JqZWN0Q2hhbmdlZClcbiAgICB9XG4gIH0sIFt1cGRhdGVOb2RlSGllcmFyY2h5LCBvbk9iamVjdENoYW5nZWRdKVxuXG4gIC8qKlxuICAgKiBvbk1vdXNlRG93biBjYWxsYmFjayBmdW5jdGlvbiB1c2VkIHRvIGhhbmRsZSBtb3VzZSBkb3duIGV2ZW50LlxuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIGNvbnN0IG9uTW91c2VEb3duID0gdXNlQ2FsbGJhY2soKGUsIG5vZGUpID0+IHtcbiAgICBpZiAoZS5kZXRhaWwgPT09IDEpIHtcbiAgICAgIGlmIChlLnNoaWZ0S2V5KSB7XG4gICAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmV4ZWN1dGVDb21tYW5kV2l0aEhpc3RvcnkoRWRpdG9yQ29tbWFuZHMuVE9HR0xFX1NFTEVDVElPTiwgbm9kZS5vYmplY3QpXG4gICAgICB9IGVsc2UgaWYgKCFub2RlLnNlbGVjdGVkKSB7XG4gICAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmV4ZWN1dGVDb21tYW5kV2l0aEhpc3RvcnkoRWRpdG9yQ29tbWFuZHMuUkVQTEFDRV9TRUxFQ1RJT04sIG5vZGUub2JqZWN0KVxuICAgICAgfVxuICAgIH1cbiAgfSwgW10pXG5cbiAgLyoqXG4gICAqIG9uQ2xpY2sgY2FsbGJhY2sgZnVuY3Rpb24gZm9yIGhhbmRsaW5nIG9uQ2xpY2sgZXZlbnQgb24gaGllcmFyY2h5IHBlbmFsIGl0ZW0uXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3Qgb25DbGljayA9IHVzZUNhbGxiYWNrKChlLCBub2RlKSA9PiB7XG4gICAgaWYgKGUuZGV0YWlsID09PSAyKSB7XG4gICAgICBDb250cm9sTWFuYWdlci5pbnN0YW5jZS5lZGl0b3JDb250cm9scy5mb2N1cyhbbm9kZS5vYmplY3RdKVxuICAgIH1cbiAgfSwgW10pXG5cbiAgLyoqXG4gICAqIG9uVG9nZ2xlIGZ1bmN0aW9uIHVzZWQgdG8gaGFuZGxlIHRvZ2dsZSBvbiBoaWVyYXJjaHkgcGVuYWwgaXRlbS5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBjb25zdCBvblRvZ2dsZSA9IHVzZUNhbGxiYWNrKFxuICAgIChfZSwgbm9kZSkgPT4ge1xuICAgICAgaWYgKGNvbGxhcHNlZE5vZGVzW25vZGUuaWRdKSB7XG4gICAgICAgIGV4cGFuZE5vZGUobm9kZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbGxhcHNlTm9kZShub2RlKVxuICAgICAgfVxuICAgIH0sXG4gICAgW2NvbGxhcHNlZE5vZGVzLCBleHBhbmROb2RlLCBjb2xsYXBzZU5vZGVdXG4gIClcblxuICAvKipcbiAgICogb25LZXlEb3duIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGhhbmRsZSBvbktleURvd24gZXZlbnQgb24gaGllcmFyY2h5IHBlbmFsIGl0ZW0uXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3Qgb25LZXlEb3duID0gdXNlQ2FsbGJhY2soXG4gICAgKGUsIG5vZGUpID0+IHtcbiAgICAgIC8vIGNoZWNrIGlmIGtleSBlcXVhbHMgdG8gQXJyb3dEb3duXG4gICAgICBpZiAoZS5rZXkgPT09ICdBcnJvd0Rvd24nKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgIC8vIGluaXRpYWxpemluZyBub2RlSW5kZXggdXNpbmcgbm9kZXMgYXJyYXlcbiAgICAgICAgY29uc3Qgbm9kZUluZGV4ID0gbm9kZXMuaW5kZXhPZihub2RlKVxuXG4gICAgICAgIC8vIGluaXRpYWxpemluZyBuZXh0Tm9kZSB1c2luZyBub2RlcyBhcnJheVxuICAgICAgICBjb25zdCBuZXh0Tm9kZSA9IG5vZGVJbmRleCAhPT0gLTEgJiYgbm9kZXNbbm9kZUluZGV4ICsgMV1cblxuICAgICAgICAvLyBjaGVjayBpZiBuZXh0Tm9kZSBpcyBub3QgRW1wdHlcbiAgICAgICAgaWYgKG5leHROb2RlKSB7XG4gICAgICAgICAgaWYgKGUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmV4ZWN1dGVDb21tYW5kV2l0aEhpc3RvcnkoRWRpdG9yQ29tbWFuZHMuQUREX1RPX1NFTEVDVElPTiwgbmV4dE5vZGUub2JqZWN0KVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBpbml0aWFsaXppbmcgbmV4dE5vZGVFbCB1c2luZyBuZXh0Tm9kZSBlbGVtZW50IGlkXG4gICAgICAgICAgY29uc3QgbmV4dE5vZGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGdldE5vZGVFbElkKG5leHROb2RlKSlcblxuICAgICAgICAgIC8vY2hlY2sgaWYgbmV4dE5vZGVFbCBpcyBub3QgZW1wdHlcbiAgICAgICAgICBpZiAobmV4dE5vZGVFbCkge1xuICAgICAgICAgICAgbmV4dE5vZGVFbC5mb2N1cygpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy9jaGVjayBpZiBwcmVzc2VkIGtleSBlcXVhbHMgdG8gQXJyb3dVcFxuICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ0Fycm93VXAnKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgIC8vIGluaXRpYWxpemluZyBub2RlSW5kZXggIHVzaW5nIG5vZGVzIGFycmF5XG4gICAgICAgIGNvbnN0IG5vZGVJbmRleCA9IG5vZGVzLmluZGV4T2Yobm9kZSlcblxuICAgICAgICAvLyBpbml0aWFsaXppbmcgcHJldk5vZGUgdXNpbmcgbm9kZXMgYXJyYXkgY3VycmVudCBub2RlSW5kZXggLTFcbiAgICAgICAgY29uc3QgcHJldk5vZGUgPSBub2RlSW5kZXggIT09IC0xICYmIG5vZGVzW25vZGVJbmRleCAtIDFdXG5cbiAgICAgICAgLy8gaWYgcHJldk5vZGUgaXMgbm90IGVtcHR5XG4gICAgICAgIGlmIChwcmV2Tm9kZSkge1xuICAgICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5leGVjdXRlQ29tbWFuZFdpdGhIaXN0b3J5KEVkaXRvckNvbW1hbmRzLkFERF9UT19TRUxFQ1RJT04sIHByZXZOb2RlLm9iamVjdClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBpbml0aWFsaXppbmcgcHJldk5vZGVFbCB1c2luZyBwcmV2Tm9kZSBJZFxuICAgICAgICAgIGNvbnN0IHByZXZOb2RlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChnZXROb2RlRWxJZChwcmV2Tm9kZSkpXG5cbiAgICAgICAgICAvL2NoZWNrIGlmIHByZXZOb2RlRWwgaXMgbm90IGVtcHR5XG4gICAgICAgICAgaWYgKHByZXZOb2RlRWwpIHtcbiAgICAgICAgICAgIHByZXZOb2RlRWwuZm9jdXMoKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBjaGVjayBpZiBwcmVzc2VkIGtleSBlcXVhbHMgdG8gbGVmdCBhcnJvdyBhbmQgbm9kZSBvYmplY3QgY2hpbGRyZW4gbm9kZSBsZW5ndGggaXMgZ3JlYXRvciB0aGVuIDBcbiAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd0xlZnQnICYmIG5vZGUub2JqZWN0LmNoaWxkcmVuLmZpbHRlcigobykgPT4gby5pc05vZGUpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKGUuc2hpZnRLZXkpIHtcbiAgICAgICAgICBjb2xsYXBzZUNoaWxkcmVuKG5vZGUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29sbGFwc2VOb2RlKG5vZGUpXG4gICAgICAgIH1cblxuICAgICAgICAvL2NoZWNrIGlmIHByZXNzZWQga2V5IGVxdWFscyB0byBhcnJvdyByaWdodFxuICAgICAgICAvL2FuZCBub2RlIHByb3BlcnR5IG9iamVjdCBjaGlsZHJlbiBub2RlIGxlbmd0aCBpdXMgZ3JlYXRvciB0aGVuIHplcm8uXG4gICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnQXJyb3dSaWdodCcgJiYgbm9kZS5vYmplY3QuY2hpbGRyZW4uZmlsdGVyKChvKSA9PiBvLmlzTm9kZSkubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoZS5zaGlmdEtleSkge1xuICAgICAgICAgIGV4cGFuZENoaWxkcmVuKG5vZGUpXG4gICAgICAgIH0gZWxzZSBpZiAobm9kZS5vYmplY3QuY2hpbGRyZW4uZmlsdGVyKChvKSA9PiBvLmlzTm9kZSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGV4cGFuZE5vZGUobm9kZSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vY2hlY2sgaWYgcHJlc3NlZCBrZXkgZXF1YWxzIHRvIGVudGVyXG4gICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuZXhlY3V0ZUNvbW1hbmRXaXRoSGlzdG9yeShFZGl0b3JDb21tYW5kcy5UT0dHTEVfU0VMRUNUSU9OLCBub2RlLm9iamVjdClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5leGVjdXRlQ29tbWFuZFdpdGhIaXN0b3J5KEVkaXRvckNvbW1hbmRzLlJFUExBQ0VfU0VMRUNUSU9OLCBub2RlLm9iamVjdClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgW25vZGVzLCBleHBhbmROb2RlLCBjb2xsYXBzZU5vZGUsIGV4cGFuZENoaWxkcmVuLCBjb2xsYXBzZUNoaWxkcmVuXVxuICApXG5cbiAgLyoqXG4gICAqIG9uRGVsZXRlTm9kZSBjYWxsYmFjayBmdW5jdGlvbiB1c2VkIHRvIGhhbmRsZSBkZWxldGUgb24gbm9kZS5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBjb25zdCBvbkRlbGV0ZU5vZGUgPSB1c2VDYWxsYmFjaygoZSwgbm9kZSkgPT4ge1xuICAgIGxldCBvYmpzID0gbm9kZS5zZWxlY3RlZCA/IENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnNlbGVjdGVkIDogbm9kZS5vYmplY3RcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5leGVjdXRlQ29tbWFuZFdpdGhIaXN0b3J5KEVkaXRvckNvbW1hbmRzLlJFTU9WRV9PQkpFQ1RTLCBvYmpzKVxuICB9LCBbXSlcblxuICAvKipcbiAgICogb25EdXBsaWNhdGVOb2RlIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGhhbmRsZSBEdXBsaWNhdGlvbiBvZiBub2RlLlxuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIGNvbnN0IG9uRHVwbGljYXRlTm9kZSA9IHVzZUNhbGxiYWNrKChlLCBub2RlKSA9PiB7XG4gICAgbGV0IG9ianMgPSBub2RlLnNlbGVjdGVkID8gQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2VsZWN0ZWQgOiBub2RlLm9iamVjdFxuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmV4ZWN1dGVDb21tYW5kV2l0aEhpc3RvcnkoRWRpdG9yQ29tbWFuZHMuRFVQTElDQVRFX09CSkVDVFMsIG9ianMpXG4gIH0sIFtdKVxuXG4gIC8qKlxuICAgKiBvbkdyb3VwTm9kZXMgY2FsbGJhY2sgZnVuY3Rpb24gdXNlZCB0byBoYW5kbGUgZ3JvdXBpbmcgb2Ygbm9kZXMuXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3Qgb25Hcm91cE5vZGVzID0gdXNlQ2FsbGJhY2soKGUsIG5vZGUpID0+IHtcbiAgICBjb25zdCBvYmpzID0gbm9kZS5zZWxlY3RlZCA/IENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnNlbGVjdGVkIDogbm9kZS5vYmplY3RcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5leGVjdXRlQ29tbWFuZFdpdGhIaXN0b3J5KEVkaXRvckNvbW1hbmRzLkdST1VQLCBvYmpzKVxuICB9LCBbXSlcblxuICAvKipcbiAgICogb25SZW5hbWVOb2RlIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGhhbmRsZSByZW5hbWUgbm9kZS5cbiAgICpcbiAgICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBjb25zdCBvblJlbmFtZU5vZGUgPSB1c2VDYWxsYmFjayhcbiAgICAoZSwgbm9kZSkgPT4ge1xuICAgICAgc2V0UmVuYW1pbmdOb2RlKHsgaWQ6IG5vZGUuaWQsIG5hbWU6IG5vZGUub2JqZWN0Lm5hbWUgfSlcbiAgICB9LFxuICAgIFtzZXRSZW5hbWluZ05vZGVdXG4gIClcblxuICAvKipcbiAgICogb25DaGFuZ2VOYW1lIGNhbGxiYWNrICBmdW5jdGlvbiB1c2VkIHRvIGhhbmRsZSBjaGFuZ2VzIGluIG5hbWUuXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3Qgb25DaGFuZ2VOYW1lID0gdXNlQ2FsbGJhY2soXG4gICAgKG5vZGUsIG5hbWUpID0+IHtcbiAgICAgIHNldFJlbmFtaW5nTm9kZSh7IGlkOiBub2RlLmlkLCBuYW1lIH0pXG4gICAgfSxcbiAgICBbc2V0UmVuYW1pbmdOb2RlXVxuICApXG5cbiAgLyoqXG4gICAqIG9uUmVuYW1lU3VibWl0IGNhbGxiYWNrIGZ1bmN0aW9uIHVzZWQgdG8gaGFuZGxlIHJlbmFtZSBpbnB1dCBzdWJtaXQuXG4gICAqXG4gICAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgY29uc3Qgb25SZW5hbWVTdWJtaXQgPSB1c2VDYWxsYmFjaygobm9kZSwgbmFtZSkgPT4ge1xuICAgIGlmIChuYW1lICE9PSBudWxsKSB7XG4gICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5leGVjdXRlQ29tbWFuZChFZGl0b3JDb21tYW5kcy5NT0RJRllfUFJPUEVSVFksIG5vZGUub2JqZWN0LCB7IHByb3BlcnRpZXM6IHsgbmFtZSB9IH0pXG4gICAgfVxuICAgIHNldFJlbmFtaW5nTm9kZShudWxsKVxuICB9LCBbXSlcblxuICAvKipcbiAgICogaW5pdGlhbGl6aW5nIHRyZWVDb250YWluZXJEcm9wVGFyZ2V0LlxuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqIEB0eXBlIHtBcnJheX1cbiAgICovXG4gIGNvbnN0IFssIHRyZWVDb250YWluZXJEcm9wVGFyZ2V0XSA9IHVzZURyb3Aoe1xuICAgIC8vIGluaXRpYWxpemluZyBhY2NlcHQgdXNpbmcgYXJyYXkgb2YgIHR5cGVzXG4gICAgYWNjZXB0OiBbSXRlbVR5cGVzLk5vZGUsIEl0ZW1UeXBlcy5GaWxlLCAuLi5Bc3NldFR5cGVzXSxcbiAgICBkcm9wKGl0ZW06IGFueSwgbW9uaXRvcikge1xuICAgICAgaWYgKG1vbml0b3IuZGlkRHJvcCgpKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBjaGVjayBpZiBpdGVtIGNvbnRhaW5zIGZpbGVzXG4gICAgICBpZiAoaXRlbS5maWxlcykge1xuICAgICAgICAvL3VwbG9hZGluZyBmaWxlcyB0aGVuIGFkZGluZyB0byBlZGl0b3IgbWVkaWFcbiAgICAgICAgb25VcGxvYWQoaXRlbS5maWxlcykudGhlbigoYXNzZXRzKSA9PiB7XG4gICAgICAgICAgaWYgKGFzc2V0cykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBhc3NldCBvZiBhc3NldHMpIHtcbiAgICAgICAgICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTWVkaWEoeyB1cmw6IGFzc2V0LnVybCB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmIChhZGRBc3NldE9uRHJvcChpdGVtKSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuZXhlY3V0ZUNvbW1hbmRXaXRoSGlzdG9yeShFZGl0b3JDb21tYW5kcy5SRVBBUkVOVCwgaXRlbS52YWx1ZSwge1xuICAgICAgICBwYXJlbnRzOiBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmVcbiAgICAgIH0pXG4gICAgfSxcbiAgICBjYW5Ecm9wKGl0ZW0sIG1vbml0b3IpIHtcbiAgICAgIGlmICghbW9uaXRvci5pc092ZXIoeyBzaGFsbG93OiB0cnVlIH0pKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgLy8gY2hlY2sgaWYgaXRlbSBpcyBhc3NldFxuICAgICAgaWYgKGlzQXNzZXQoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIC8vIGNoZWNrIGlmIGl0ZW0gaXMgb2Ygbm9kZSB0eXBlXG4gICAgICBpZiAoaXRlbS50eXBlID09PSBJdGVtVHlwZXMuTm9kZSkge1xuICAgICAgICByZXR1cm4gIShpdGVtLm11bHRpcGxlXG4gICAgICAgICAgPyBpdGVtLnZhbHVlLnNvbWUoKG90aGVyT2JqZWN0KSA9PiBpc0FuY2VzdG9yKG90aGVyT2JqZWN0LCBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmUpKVxuICAgICAgICAgIDogaXNBbmNlc3RvcihpdGVtLnZhbHVlLCBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmUpKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHVwZGF0ZU5vZGVIaWVyYXJjaHkoKVxuICB9LCBbY29sbGFwc2VkTm9kZXMsIHVwZGF0ZU5vZGVIaWVyYXJjaHldKVxuXG4gIC8vcmV0dXJuaW5nIGhpZXJhcmNoeSBwZW5hbCB2aWV3XG4gIHJldHVybiAoXG4gICAgPEZyYWdtZW50PlxuICAgICAgPFBhbmVsQ29udGFpbmVyPlxuICAgICAgICB7U2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lICYmIChcbiAgICAgICAgICA8QXV0b1NpemVyPlxuICAgICAgICAgICAgeyh7IGhlaWdodCwgd2lkdGggfSkgPT4gKFxuICAgICAgICAgICAgICA8Rml4ZWRTaXplTGlzdFxuICAgICAgICAgICAgICAgIGhlaWdodD17aGVpZ2h0fVxuICAgICAgICAgICAgICAgIHdpZHRoPXt3aWR0aH1cbiAgICAgICAgICAgICAgICBpdGVtU2l6ZT17MzJ9XG4gICAgICAgICAgICAgICAgaXRlbUNvdW50PXtub2Rlcy5sZW5ndGh9XG4gICAgICAgICAgICAgICAgaXRlbURhdGE9e3tcbiAgICAgICAgICAgICAgICAgIHJlbmFtaW5nTm9kZSxcbiAgICAgICAgICAgICAgICAgIG5vZGVzLFxuICAgICAgICAgICAgICAgICAgb25LZXlEb3duLFxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2VOYW1lLFxuICAgICAgICAgICAgICAgICAgb25SZW5hbWVTdWJtaXQsXG4gICAgICAgICAgICAgICAgICBvbk1vdXNlRG93bixcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2ssXG4gICAgICAgICAgICAgICAgICBvblRvZ2dsZSxcbiAgICAgICAgICAgICAgICAgIG9uVXBsb2FkXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBpdGVtS2V5PXtnZXROb2RlS2V5fVxuICAgICAgICAgICAgICAgIG91dGVyUmVmPXt0cmVlQ29udGFpbmVyRHJvcFRhcmdldH1cbiAgICAgICAgICAgICAgICBpbm5lckVsZW1lbnRUeXBlPVwidWxcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge01lbW9UcmVlTm9kZX1cbiAgICAgICAgICAgICAgPC9GaXhlZFNpemVMaXN0PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L0F1dG9TaXplcj5cbiAgICAgICAgKX1cbiAgICAgIDwvUGFuZWxDb250YWluZXI+XG4gICAgICA8Q29udGV4dE1lbnUgaWQ9XCJoaWVyYXJjaHktbm9kZS1tZW51XCI+XG4gICAgICAgIDxNZW51SXRlbSBvbkNsaWNrPXtvblJlbmFtZU5vZGV9Pnt0KCdlZGl0b3I6aGllcmFyY2h5LmxibC1yZW5hbWUnKX08L01lbnVJdGVtPlxuICAgICAgICA8TWVudUl0ZW0gb25DbGljaz17b25EdXBsaWNhdGVOb2RlfT5cbiAgICAgICAgICB7dCgnZWRpdG9yOmhpZXJhcmNoeS5sYmwtZHVwbGljYXRlJyl9XG4gICAgICAgICAgPGRpdj57Y21kT3JDdHJsU3RyaW5nICsgJysgRCd9PC9kaXY+XG4gICAgICAgIDwvTWVudUl0ZW0+XG4gICAgICAgIDxNZW51SXRlbSBvbkNsaWNrPXtvbkdyb3VwTm9kZXN9PlxuICAgICAgICAgIHt0KCdlZGl0b3I6aGllcmFyY2h5LmxibC1ncm91cCcpfVxuICAgICAgICAgIDxkaXY+e2NtZE9yQ3RybFN0cmluZyArICcrIEcnfTwvZGl2PlxuICAgICAgICA8L01lbnVJdGVtPlxuICAgICAgICA8TWVudUl0ZW0gb25DbGljaz17b25EZWxldGVOb2RlfT57dCgnZWRpdG9yOmhpZXJhcmNoeS5sYmwtZGVsZXRlJyl9PC9NZW51SXRlbT5cbiAgICAgICAgPE1lbnVJdGVtIG9uQ2xpY2s9e29uRXhwYW5kQWxsTm9kZXN9Pnt0KCdlZGl0b3I6aGllcmFyY2h5LmxibC1leHBhbmRBbGwnKX08L01lbnVJdGVtPlxuICAgICAgICA8TWVudUl0ZW0gb25DbGljaz17b25Db2xsYXBzZUFsbE5vZGVzfT57dCgnZWRpdG9yOmhpZXJhcmNoeS5sYmwtY29sbGFwc2VBbGwnKX08L01lbnVJdGVtPlxuICAgICAgPC9Db250ZXh0TWVudT5cbiAgICA8L0ZyYWdtZW50PlxuICApXG59XG4iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJ1xuXG4vKipcbiAqXG4gKiAgQGF1dGhvciBIYW56bGEgIE1hdGVlblxuICovXG5leHBvcnQgY29uc3QgUGFuZWxEcmFnQ29udGFpbmVyID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleDogMTtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbmBcblxuLyoqXG4gKlxuICogIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqL1xuZXhwb3J0IGNvbnN0IFBhbmVsQ29udGFpbmVyID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4OiAxO1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS5wYW5lbH07XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHVzZXItc2VsZWN0OiBub25lO1xuYFxuLyoqXG4gKlxuICogIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqL1xuZXhwb3J0IGNvbnN0IFBhbmVsVG9vbGJhciA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIHBhZGRpbmc6IDRweDtcbiAgaGVpZ2h0OiAyNHB4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjIpO1xuYFxuXG4vKipcbiAqXG4gKiAgQGF1dGhvciBSb2JlcnQgTG9uZ1xuICovXG5leHBvcnQgY29uc3QgUGFuZWxJY29uID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgbWFyZ2luLXJpZ2h0OiA4cHg7XG5gXG5cbi8qKlxuICpcbiAqICBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbmV4cG9ydCBjb25zdCBQYW5lbFRpdGxlID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBgXG5cbi8qKlxuICpcbiAqICBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbmV4cG9ydCBjb25zdCBQYW5lbENvbnRlbnQgPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4OiAxO1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIG92ZXJmbG93OiBoaWRkZW47XG5gXG5cbi8qKlxuICpcbiAqICBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbmV4cG9ydCBjbGFzcyBQYW5lbCBleHRlbmRzIENvbXBvbmVudCB7XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGljb24sIHRpdGxlLCBjaGlsZHJlbiwgdG9vbGJhckNvbnRlbnQsIC4uLnJlc3QgfSA9IHRoaXMucHJvcHMgYXMgYW55XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFBhbmVsQ29udGFpbmVyIHsuLi5yZXN0fT5cbiAgICAgICAgPFBhbmVsVG9vbGJhciBjbGFzc05hbWU9XCJ0b29sYmFyXCI+XG4gICAgICAgICAge2ljb24gJiYgPFBhbmVsSWNvbiBhcz17aWNvbn0gc2l6ZT17MTJ9IC8+fVxuICAgICAgICAgIDxQYW5lbFRpdGxlPnt0aXRsZX08L1BhbmVsVGl0bGU+XG4gICAgICAgICAge3Rvb2xiYXJDb250ZW50fVxuICAgICAgICA8L1BhbmVsVG9vbGJhcj5cbiAgICAgICAgPFBhbmVsQ29udGVudD57Y2hpbGRyZW59PC9QYW5lbENvbnRlbnQ+XG4gICAgICA8L1BhbmVsQ29udGFpbmVyPlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQYW5lbFxuIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gJ3RocmVlJ1xuaW1wb3J0IFByb3BlcnR5R3JvdXAgZnJvbSAnLi9Qcm9wZXJ0eUdyb3VwJ1xuaW1wb3J0IElucHV0R3JvdXAgZnJvbSAnLi4vaW5wdXRzL0lucHV0R3JvdXAnXG5pbXBvcnQgVmVjdG9yM0lucHV0IGZyb20gJy4uL2lucHV0cy9WZWN0b3IzSW5wdXQnXG5pbXBvcnQgRXVsZXJJbnB1dCBmcm9tICcuLi9pbnB1dHMvRXVsZXJJbnB1dCdcbmltcG9ydCBpMThuIGZyb20gJ2kxOG5leHQnXG5pbXBvcnQgeyB3aXRoVHJhbnNsYXRpb24gfSBmcm9tICdyZWFjdC1pMThuZXh0J1xuaW1wb3J0IHsgQ29tbWFuZE1hbmFnZXIgfSBmcm9tICcuLi8uLi9tYW5hZ2Vycy9Db21tYW5kTWFuYWdlcidcbmltcG9ydCBFZGl0b3JDb21tYW5kcyBmcm9tICcuLi8uLi9jb25zdGFudHMvRWRpdG9yQ29tbWFuZHMnXG5pbXBvcnQgRWRpdG9yRXZlbnRzIGZyb20gJy4uLy4uL2NvbnN0YW50cy9FZGl0b3JFdmVudHMnXG5cbi8qKlxuICogVHJhbnNmb3JtUHJvcGVydHlHcm91cFByb3BzIGRlY2xhcmluZyBwcm9wZXJ0aWVzIGZvciBUcmFuc2Zvcm1Qcm9wZXJ0eUdyb3VwLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbnR5cGUgVHJhbnNmb3JtUHJvcGVydHlHcm91cFByb3BzID0ge1xuICBub2RlPzogb2JqZWN0XG4gIHQ6IEZ1bmN0aW9uXG59XG5cbi8qKlxuICogVHJhbnNmb3JtUHJvcGVydHlHcm91cCBjb21wb25lbnQgaXMgdXNlZCB0byByZW5kZXIgZWRpdG9yIHZpZXcgdG8gY3VzdG9taXplIHByb3BlcnRpZXMuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge2NsYXNzIGNvbXBvbmVudH1cbiAqL1xuZXhwb3J0IGNsYXNzIFRyYW5zZm9ybVByb3BlcnR5R3JvdXAgZXh0ZW5kcyBDb21wb25lbnQ8VHJhbnNmb3JtUHJvcGVydHlHcm91cFByb3BzLCB7fT4ge1xuICAvL3NldHRpbmcgdGhlIHByb3BlcnRpZXMgYW5kIHRyYW5zbGF0aW9uIG9mIGNvbXBvbmVudFxuICBjb25zdHJ1Y3Rvcihwcm9wczogYW55KSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgdGhpcy50cmFuc2xhdGlvbiA9IG5ldyBWZWN0b3IzKClcbiAgfVxuXG4gIC8vYWRkaW5nIGxpc3RlbmVyIHdoZW4gY29tcG9uZW50IGdldCBtb3VudGVkXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmFkZExpc3RlbmVyKEVkaXRvckV2ZW50cy5PQkpFQ1RTX0NIQU5HRUQudG9TdHJpbmcoKSwgdGhpcy5vbk9iamVjdHNDaGFuZ2VkKVxuICB9XG5cbiAgLy91cGRhdGluZyBjaGFuZ2VzIGluIHByb3BlcnRpZXNcbiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcykge1xuICAgIHJldHVybiBuZXh0UHJvcHMubm9kZSAhPT0gdGhpcy5wcm9wcy5ub2RlXG4gIH1cblxuICAvL3JlbW92aW5nIGxpc3RlbmVyIHdoZW4gY29tcG9uZW50IGdldCB1bm1vdW50XG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5PQkpFQ1RTX0NIQU5HRUQudG9TdHJpbmcoKSwgdGhpcy5vbk9iamVjdHNDaGFuZ2VkKVxuICB9XG5cbiAgLy9zZXR0aW5nIHRyYW5zbGF0aW9uXG4gIHRyYW5zbGF0aW9uOiBWZWN0b3IzXG5cbiAgLy9mdW5jdGlvbiB0byBoYW5kbGUgY2hhbmdlcyBpbiBwcm9wZXJ0eSBhbmQgZm9yY2UgdXBkYXRlXG4gIG9uT2JqZWN0c0NoYW5nZWQgPSAob2JqZWN0cywgcHJvcGVydHkpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9iamVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChcbiAgICAgICAgb2JqZWN0c1tpXSA9PT0gdGhpcy5wcm9wcy5ub2RlICYmXG4gICAgICAgIChwcm9wZXJ0eSA9PT0gJ3Bvc2l0aW9uJyB8fFxuICAgICAgICAgIHByb3BlcnR5ID09PSAncm90YXRpb24nIHx8XG4gICAgICAgICAgcHJvcGVydHkgPT09ICdzY2FsZScgfHxcbiAgICAgICAgICBwcm9wZXJ0eSA9PT0gJ21hdHJpeCcgfHxcbiAgICAgICAgICBwcm9wZXJ0eSA9PSBudWxsKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvL2Z1bmN0aW9uIHRvIGhhbmRsZSB0aGUgcG9zaXRpb24gcHJvcGVydGllc1xuICBvbkNoYW5nZVBvc2l0aW9uID0gKHZhbHVlKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuZXhlY3V0ZUNvbW1hbmRXaXRoSGlzdG9yeU9uU2VsZWN0aW9uKEVkaXRvckNvbW1hbmRzLlBPU0lUSU9OLCB7IHBvc2l0aW9uczogdmFsdWUgfSlcbiAgfVxuXG4gIC8vZnVuY3Rpb24gdG8gaGFuZGxlIGNoYW5nZXMgcm90YXRpb24gcHJvcGVydGllc1xuICBvbkNoYW5nZVJvdGF0aW9uID0gKHZhbHVlKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuZXhlY3V0ZUNvbW1hbmRXaXRoSGlzdG9yeU9uU2VsZWN0aW9uKEVkaXRvckNvbW1hbmRzLlJPVEFUSU9OLCB7IHJvdGF0aW9uczogdmFsdWUgfSlcbiAgfVxuXG4gIC8vZnVuY3Rpb24gdG8gaGFuZGxlIGNoYW5nZXMgaW4gc2NhbGUgcHJvcGVydGllc1xuICBvbkNoYW5nZVNjYWxlID0gKHZhbHVlKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuZXhlY3V0ZUNvbW1hbmRXaXRoSGlzdG9yeU9uU2VsZWN0aW9uKEVkaXRvckNvbW1hbmRzLlNDQUxFLCB7XG4gICAgICBzY2FsZXM6IHZhbHVlLFxuICAgICAgb3ZlcnJpZGVTY2FsZTogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICAvL3JlbmRlcmluZyBlZGl0b3IgdmlldyBmb3IgVHJhbnNmb3JtIHByb3BlcnRpZXNcbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgbm9kZSB9ID0gdGhpcy5wcm9wcyBhcyBhbnlcbiAgICByZXR1cm4gKFxuICAgICAgPFByb3BlcnR5R3JvdXAgbmFtZT17dGhpcy5wcm9wcy50KCdlZGl0b3I6cHJvcGVydGllcy50cmFuc2Zvcm0udGl0bGUnKX0+XG4gICAgICAgIDxJbnB1dEdyb3VwIG5hbWU9XCJQb3NpdGlvblwiIGxhYmVsPXt0aGlzLnByb3BzLnQoJ2VkaXRvcjpwcm9wZXJ0aWVzLnRyYW5zZm9ybS5sYmwtcG9zdGl0aW9uJyl9PlxuICAgICAgICAgIDxWZWN0b3IzSW5wdXRcbiAgICAgICAgICAgIHZhbHVlPXtub2RlLnBvc2l0aW9ufVxuICAgICAgICAgICAgc21hbGxTdGVwPXswLjAxfVxuICAgICAgICAgICAgbWVkaXVtU3RlcD17MC4xfVxuICAgICAgICAgICAgbGFyZ2VTdGVwPXsxfVxuICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VQb3NpdGlvbn1cbiAgICAgICAgICAvPlxuICAgICAgICA8L0lucHV0R3JvdXA+XG4gICAgICAgIDxJbnB1dEdyb3VwIG5hbWU9XCJSb3RhdGlvblwiIGxhYmVsPXt0aGlzLnByb3BzLnQoJ2VkaXRvcjpwcm9wZXJ0aWVzLnRyYW5zZm9ybS5sYmwtcm90YXRpb24nKX0+XG4gICAgICAgICAgPEV1bGVySW5wdXQgdmFsdWU9e25vZGUucm90YXRpb259IG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlUm90YXRpb259IHVuaXQ9XCLCsFwiIC8+XG4gICAgICAgIDwvSW5wdXRHcm91cD5cbiAgICAgICAgPElucHV0R3JvdXAgbmFtZT1cIlNjYWxlXCIgbGFiZWw9e3RoaXMucHJvcHMudCgnZWRpdG9yOnByb3BlcnRpZXMudHJhbnNmb3JtLmxibC1zY2FsZScpfT5cbiAgICAgICAgICA8VmVjdG9yM0lucHV0XG4gICAgICAgICAgICB1bmlmb3JtU2NhbGluZ1xuICAgICAgICAgICAgc21hbGxTdGVwPXswLjAxfVxuICAgICAgICAgICAgbWVkaXVtU3RlcD17MC4xfVxuICAgICAgICAgICAgbGFyZ2VTdGVwPXsxfVxuICAgICAgICAgICAgdmFsdWU9e25vZGUuc2NhbGV9XG4gICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZVNjYWxlfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvSW5wdXRHcm91cD5cbiAgICAgIDwvUHJvcGVydHlHcm91cD5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgd2l0aFRyYW5zbGF0aW9uKCkoVHJhbnNmb3JtUHJvcGVydHlHcm91cClcbiIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBJbnB1dEdyb3VwIGZyb20gJy4uL2lucHV0cy9JbnB1dEdyb3VwJ1xuaW1wb3J0IFN0cmluZ0lucHV0IGZyb20gJy4uL2lucHV0cy9TdHJpbmdJbnB1dCdcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnXG5pbXBvcnQgeyB3aXRoVHJhbnNsYXRpb24gfSBmcm9tICdyZWFjdC1pMThuZXh0J1xuaW1wb3J0IHsgQ29tbWFuZE1hbmFnZXIgfSBmcm9tICcuLi8uLi9tYW5hZ2Vycy9Db21tYW5kTWFuYWdlcidcblxuLyoqXG4gKiBDcmVhdGluZyBzdHlsZWQgY29tcG9uZW50IHVzaW5nIElucHV0R3JvdXAgY29tcG9uZW50LlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEB0eXBlIHtTdHlsZWQgQ29tcG9uZW50fVxuICovXG5jb25zdCBTdHlsZWROYW1lSW5wdXRHcm91cCA9IChzdHlsZWQgYXMgYW55KShJbnB1dEdyb3VwKWBcbiAgbGFiZWwge1xuICAgIHdpZHRoOiBhdXRvICFpbXBvcnRhbnQ7XG4gICAgcGFkZGluZy1yaWdodDogOHB4O1xuICB9XG5gXG5cbnR5cGUgVHlwZXMgPSB7XG4gIG5vZGU6IGFueVxuICB0OiBGdW5jdGlvblxufVxuXG4vKipcbiAqIE5hbWVJbnB1dEdyb3VwIGlzIHVzZWQgdG8gcmVuZGVyIGlucHV0IGdyb3VwIFByb3BlcnRpZXNQYW5lbENvbnRhaW5lci5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7Y2xhc3MgY29tcG9uZW50fVxuICovXG5leHBvcnQgY2xhc3MgTmFtZUlucHV0R3JvdXAgZXh0ZW5kcyBDb21wb25lbnQ8VHlwZXM+IHtcbiAgLy8gdXBkYXRpbmcgc3RhdGUgYW5kIHByb3BlcnRpZXNcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBuYW1lOiAoKHRoaXMucHJvcHMgYXMgYW55KS5ub2RlIGFzIGFueSkubmFtZSxcbiAgICAgIGZvY3VzZWROb2RlOiBudWxsXG4gICAgfVxuXG4gICAgdGhpcy50ID0gdGhpcy5wcm9wcy50XG4gIH1cblxuICB0OiBGdW5jdGlvblxuXG4gIC8vZnVuY3Rpb24gdG8gaGFuZGxlIGNoYW5nZSBpbiBuYW1lIHByb3BlcnR5XG4gIG9uVXBkYXRlTmFtZSA9IChuYW1lKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IG5hbWUgfSlcbiAgfVxuXG4gIC8vZnVuY3Rpb24gY2FsbGVkIHdoZW4gZWxlbWVudCBnZXQgZm9jdXNlZFxuICAvL1VwZGF0aW5nIHN0YXRlIG9mIGNvbXBvbmVudFxuICBvbkZvY3VzID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZm9jdXNlZE5vZGU6ICh0aGlzLnByb3BzIGFzIGFueSkubm9kZSxcbiAgICAgIG5hbWU6ICgodGhpcy5wcm9wcyBhcyBhbnkpLm5vZGUgYXMgYW55KS5uYW1lXG4gICAgfSlcbiAgfVxuXG4gIC8vZnVuY3Rpb24gdG8gaGFuZGxlIG9uQmx1ciBldmVudCBvbiBuYW1lIHByb3BlcnR5XG4gIG9uQmx1ck5hbWUgPSAoKSA9PiB7XG4gICAgLy8gQ2hlY2sgdGhhdCB0aGUgZm9jdXNlZCBub2RlIGlzIGN1cnJlbnQgbm9kZSBiZWZvcmUgc2V0dGluZyB0aGUgcHJvcGVydHkuXG4gICAgLy8gVGhpcyBjYW4gaGFwcGVuIHdoZW4gY2xpY2tpbmcgb24gYW5vdGhlciBub2RlIGluIHRoZSBIaWVyYXJjaHlQYW5lbFxuICAgIGlmIChcbiAgICAgICgodGhpcy5wcm9wcyBhcyBhbnkpLm5vZGUgYXMgYW55KS5uYW1lICE9PSAodGhpcy5zdGF0ZSBhcyBhbnkpLm5hbWUgJiZcbiAgICAgICh0aGlzLnByb3BzIGFzIGFueSkubm9kZSA9PT0gKHRoaXMuc3RhdGUgYXMgYW55KS5mb2N1c2VkTm9kZVxuICAgICkge1xuICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2V0UHJvcGVydHlPblNlbGVjdGlvbignbmFtZScsICh0aGlzLnN0YXRlIGFzIGFueSkubmFtZSlcbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKHsgZm9jdXNlZE5vZGU6IG51bGwgfSlcbiAgfVxuXG4gIC8vZnVuY3Rpb24gdG8gaGFuZGxlIGtleVVwIGV2ZW50IG9uIG5hbWUgcHJvcGVydHlcbiAgb25LZXlVcE5hbWUgPSAoZSkgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5zZXRQcm9wZXJ0eU9uU2VsZWN0aW9uKCduYW1lJywgKHRoaXMuc3RhdGUgYXMgYW55KS5uYW1lKVxuICAgIH1cbiAgfVxuXG4gIC8vcmVuZGVyaW5nIHZpZXcgTmFtZUlucHV0R3JvdXAgY29tcG9uZW50XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBuYW1lID0gKHRoaXMuc3RhdGUgYXMgYW55KS5mb2N1c2VkTm9kZSA/ICh0aGlzLnN0YXRlIGFzIGFueSkubmFtZSA6ICgodGhpcy5wcm9wcyBhcyBhbnkpLm5vZGUgYXMgYW55KS5uYW1lXG4gICAgcmV0dXJuIChcbiAgICAgIDxTdHlsZWROYW1lSW5wdXRHcm91cCBuYW1lPVwiTmFtZVwiIGxhYmVsPXt0aGlzLnQoJ2VkaXRvcjpwcm9wZXJ0aWVzLm5hbWUubGJsLW5hbWUnKX0+XG4gICAgICAgIDxTdHJpbmdJbnB1dFxuICAgICAgICAgIHZhbHVlPXtuYW1lfVxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uVXBkYXRlTmFtZX1cbiAgICAgICAgICBvbkZvY3VzPXt0aGlzLm9uRm9jdXN9XG4gICAgICAgICAgb25CbHVyPXt0aGlzLm9uQmx1ck5hbWV9XG4gICAgICAgICAgb25LZXlVcD17dGhpcy5vbktleVVwTmFtZX1cbiAgICAgICAgLz5cbiAgICAgIDwvU3R5bGVkTmFtZUlucHV0R3JvdXA+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhUcmFuc2xhdGlvbigpKE5hbWVJbnB1dEdyb3VwKVxuIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IERlZmF1bHROb2RlRWRpdG9yIGZyb20gJy4vRGVmYXVsdE5vZGVFZGl0b3InXG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJ1xuaW1wb3J0IFRyYW5zZm9ybVByb3BlcnR5R3JvdXAgZnJvbSAnLi9UcmFuc2Zvcm1Qcm9wZXJ0eUdyb3VwJ1xuaW1wb3J0IE5hbWVJbnB1dEdyb3VwIGZyb20gJy4vTmFtZUlucHV0R3JvdXAnXG5pbXBvcnQgSW5wdXRHcm91cCBmcm9tICcuLi9pbnB1dHMvSW5wdXRHcm91cCdcbmltcG9ydCBCb29sZWFuSW5wdXQgZnJvbSAnLi4vaW5wdXRzL0Jvb2xlYW5JbnB1dCdcbmltcG9ydCB7IHdpdGhUcmFuc2xhdGlvbiB9IGZyb20gJ3JlYWN0LWkxOG5leHQnXG5pbXBvcnQgRWRpdG9yRXZlbnRzIGZyb20gJy4uLy4uL2NvbnN0YW50cy9FZGl0b3JFdmVudHMnXG5pbXBvcnQgeyBDb21tYW5kTWFuYWdlciB9IGZyb20gJy4uLy4uL21hbmFnZXJzL0NvbW1hbmRNYW5hZ2VyJ1xuaW1wb3J0IHsgTm9kZU1hbmFnZXIgfSBmcm9tICcuLi8uLi9tYW5hZ2Vycy9Ob2RlTWFuYWdlcidcblxuLyoqXG4gKiBTdHlsZWROb2RlRWRpdG9yIHVzZWQgYXMgd3JhcHBlciBjb250YWluZXIgZWxlbWVudCBwcm9wZXJ0aWVzIGNvbnRhaW5lci5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7c3R5bGVkIGNvbXBvbmVudH1cbiAqL1xuY29uc3QgU3R5bGVkTm9kZUVkaXRvciA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXg6IDE7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5gXG5cbi8qKlxuICogUHJvcGVydGllc0hlYWRlciB1c2VkIGFzIGEgd3JhcHBlciBmb3IgTmFtZUlucHV0R3JvdXBDb250YWluZXIgY29tcG9uZW50LlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqL1xuY29uc3QgUHJvcGVydGllc0hlYWRlciA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIGJhY2tncm91bmQtY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS5wYW5lbDJ9O1xuICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDtcbiAgcGFkZGluZy1ib3R0b206IDAgIWltcG9ydGFudDtcbmBcblxuLyoqXG4gKiBOYW1lSW5wdXRHcm91cENvbnRhaW5lciB1c2VkIHRvIHByb3ZpZGVzIHN0eWxlcyBhbmQgY29udGFpbnMgTmFtZUlucHV0R3JvdXAgYW5kIFZpc2libGVJbnB1dEdyb3VwLlxuICpcbiAqICBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiAgQHR5cGUge1N0eWxlZCBDb21wb25lbnR9XG4gKi9cbmNvbnN0IE5hbWVJbnB1dEdyb3VwQ29udGFpbmVyID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1mbG93OiByb3cgd3JhcDtcbiAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XG4gIHBhZGRpbmc6IDhweCAwO1xuYFxuLyoqXG4gKiBTdHlsZWQgY29tcG9uZW50IHVzZWQgdG8gcHJvdmlkZSBzdHlsZXMgZm9yIHZpc2libGl0eSBjaGVja2JveC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbmNvbnN0IFZpc2libGVJbnB1dEdyb3VwID0gKHN0eWxlZCBhcyBhbnkpKElucHV0R3JvdXApYFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4OiAwO1xuXG4gICYgPiBsYWJlbCB7XG4gICAgd2lkdGg6IGF1dG8gIWltcG9ydGFudDtcbiAgICBwYWRkaW5nLXJpZ2h0OiA4cHg7XG4gIH1cbmBcblxuLyoqXG4gKiBTdHlsZWQgY29tcG9uZW50IHVzZWQgdG8gcHJvdmlkZSBzdHlsZXMgZm9yIHZpc2libGl0eSBjaGVja2JveC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbmNvbnN0IFBlcnNpc3RJbnB1dEdyb3VwID0gKHN0eWxlZCBhcyBhbnkpKElucHV0R3JvdXApYFxuIGRpc3BsYXk6IGZsZXg7XG4gZmxleDogMDtcblxuICYgPiBsYWJlbCB7XG4gICB3aWR0aDogYXV0byAhaW1wb3J0YW50O1xuICAgcGFkZGluZy1yaWdodDogOHB4O1xuIH1cbmBcblxuLyoqXG4gKiBQcm9wZXJ0aWVzUGFuZWxDb250ZW50IHVzZWQgYXMgY29udGFpbmVyIGVsZW1lbnQgY29udGFpbnMgY29udGVudCBvZiBlZGl0b3Igdmlldy5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7U3R5bGVkIENvbXBvbmVudH1cbiAqL1xuY29uc3QgUHJvcGVydGllc1BhbmVsQ29udGVudCA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGZsZXg6IDE7XG4gIG92ZXJmbG93LXk6IGF1dG87XG4gIGhlaWdodDogMTAwJTtcbmBcblxuLyoqXG4gKiBOb05vZGVTZWxlY3RlZE1lc3NhZ2UgdXNlZCB0byBzaG93IHRoZSBtZXNzYWdlIHdoZW4gbm8gc2VsZWN0ZWQgbm8gaXMgdGhlcmUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IE5vTm9kZVNlbGVjdGVkTWVzc2FnZSA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBoZWlnaHQ6IDEwMCU7XG5gXG5cbi8qKlxuICogUHJvcGVydGllc1BhbmVsQ29udGFpbmVyIHVzZWQgdG8gcmVuZGVyIGVkaXRvciB2aWV3IHRvIGN1c3RvbWl6ZSBwcm9wZXJ0eSBvZiBzZWxlY3RlZCBlbGVtZW50LlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBleHRlbmRzIENvbXBvbmVudFxuICovXG5jbGFzcyBQcm9wZXJ0aWVzUGFuZWxDb250YWluZXIgZXh0ZW5kcyBDb21wb25lbnQ8eyB0OiBGdW5jdGlvbiB9PiB7XG4gIC8vc2V0dGluZyB0aGUgcHJvcHMgYW5kIHN0YXRlXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgc2VsZWN0ZWQ6IENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnNlbGVjdGVkXG4gICAgfVxuICB9XG5cbiAgLy8gYWRkaW5nIGxpc3RlbmVycyB3aGVuIGNvbXBvbmVudCBnZXQgbW91bnRlZFxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuU0VMRUNUSU9OX0NIQU5HRUQudG9TdHJpbmcoKSwgdGhpcy5vblNlbGVjdGlvbkNoYW5nZWQpXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLk9CSkVDVFNfQ0hBTkdFRC50b1N0cmluZygpLCB0aGlzLm9uT2JqZWN0c0NoYW5nZWQpXG4gIH1cblxuICAvLyByZW1vdmluZyBsaXN0ZW5lcnMgd2hlbiBjb21wb25lbnRzIGdldCB1bm1vdW50ZWRcbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlNFTEVDVElPTl9DSEFOR0VELnRvU3RyaW5nKCksIHRoaXMub25TZWxlY3Rpb25DaGFuZ2VkKVxuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5PQkpFQ1RTX0NIQU5HRUQudG9TdHJpbmcoKSwgdGhpcy5vbk9iamVjdHNDaGFuZ2VkKVxuICB9XG5cbiAgLy8gdXBkYXRpbmcgc3RhdGUgd2hlbiBzZWxlY3Rpb24gb2YgZWxlbWVudCBnZXQgY2hhbmdlZFxuICBvblNlbGVjdGlvbkNoYW5nZWQgPSAoKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNlbGVjdGVkOiBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5zZWxlY3RlZCB9KVxuICB9XG5cbiAgLy9mdW5jdGlvbiB0byBoYW5kbGUgdGhlIGNoYW5nZXMgb2JqZWN0IHByb3BlcnRpZXNcbiAgb25PYmplY3RzQ2hhbmdlZCA9IChvYmplY3RzLCBwcm9wZXJ0eSkgPT4ge1xuICAgIGNvbnN0IHNlbGVjdGVkID0gQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2VsZWN0ZWRcblxuICAgIGlmIChwcm9wZXJ0eSA9PT0gJ3Bvc2l0aW9uJyB8fCBwcm9wZXJ0eSA9PT0gJ3JvdGF0aW9uJyB8fCBwcm9wZXJ0eSA9PT0gJ3NjYWxlJyB8fCBwcm9wZXJ0eSA9PT0gJ21hdHJpeCcpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JqZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHNlbGVjdGVkLmluZGV4T2Yob2JqZWN0c1tpXSkgIT09IC0xKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzZWxlY3RlZDogQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2VsZWN0ZWQgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gZnVuY3Rpb24gdG8gaGFuZGxlIHRoZSBjaGFuZ2VzIHByb3BlcnR5IHZpc2libGVcbiAgb25DaGFuZ2VWaXNpYmxlID0gKHZhbHVlKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2V0UHJvcGVydHlPblNlbGVjdGlvbigndmlzaWJsZScsIHZhbHVlKVxuICB9XG5cbiAgb25DaGFuZ2VCYWtlU3RhdGljID0gKHZhbHVlKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2V0UHJvcGVydHlPblNlbGVjdGlvbignaW5jbHVkZUluQ3ViZW1hcEJha2UnLCB2YWx1ZSlcbiAgfVxuXG4gIG9uQ2hhbmdlUGVyc2lzdCA9ICh2YWx1ZSkgPT4ge1xuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnNldFByb3BlcnR5T25TZWxlY3Rpb24oJ3BlcnNpc3QnLCB2YWx1ZSlcbiAgfVxuXG4gIC8vcmVuZGVyaW5nIGVkaXRvciB2aWV3cyBmb3IgY3VzdG9taXphdGlvbiBvZiBlbGVtZW50IHByb3BlcnRpZXNcbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHNlbGVjdGVkID0gQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2VsZWN0ZWRcblxuICAgIGxldCBjb250ZW50XG5cbiAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb250ZW50ID0gPE5vTm9kZVNlbGVjdGVkTWVzc2FnZT57dGhpcy5wcm9wcy50KCdlZGl0b3I6cHJvcGVydGllcy5ub05vZGVTZWxlY3RlZCcpfTwvTm9Ob2RlU2VsZWN0ZWRNZXNzYWdlPlxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhY3RpdmVOb2RlID0gc2VsZWN0ZWRbc2VsZWN0ZWQubGVuZ3RoIC0gMV1cbiAgICAgIGNvbnN0IE5vZGVFZGl0b3IgPSBOb2RlTWFuYWdlci5pbnN0YW5jZS5nZXRFZGl0b3JGcm9tTm9kZShhY3RpdmVOb2RlKSB8fCBEZWZhdWx0Tm9kZUVkaXRvclxuXG4gICAgICBjb25zdCBtdWx0aUVkaXQgPSBzZWxlY3RlZC5sZW5ndGggPiAxXG5cbiAgICAgIGxldCBzaG93Tm9kZUVkaXRvciA9IHRydWVcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3RlZC5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgaWYgKE5vZGVNYW5hZ2VyLmluc3RhbmNlLmdldEVkaXRvckZyb21Ob2RlKHNlbGVjdGVkW2ldKSAhPT0gTm9kZUVkaXRvcikge1xuICAgICAgICAgIHNob3dOb2RlRWRpdG9yID0gZmFsc2VcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBub2RlRWRpdG9yXG5cbiAgICAgIGlmIChzaG93Tm9kZUVkaXRvcikge1xuICAgICAgICBub2RlRWRpdG9yID0gPE5vZGVFZGl0b3IgbXVsdGlFZGl0PXttdWx0aUVkaXR9IG5vZGU9e2FjdGl2ZU5vZGV9IC8+XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlRWRpdG9yID0gKFxuICAgICAgICAgIDxOb05vZGVTZWxlY3RlZE1lc3NhZ2U+e3RoaXMucHJvcHMudCgnZWRpdG9yOnByb3BlcnRpZXMubXVsdGlwbGVOb2RlU2VsZWN0ZWQnKX08L05vTm9kZVNlbGVjdGVkTWVzc2FnZT5cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBkaXNhYmxlVHJhbnNmb3JtID0gc2VsZWN0ZWQuc29tZSgobm9kZSkgPT4gbm9kZS5kaXNhYmxlVHJhbnNmb3JtKVxuICAgICAgY29uc3QgaGF2ZVN0YXRpY1RhZ3MgPSBzZWxlY3RlZC5zb21lKChub2RlKSA9PiBub2RlLmhhdmVTdGF0aWNUYWdzKVxuXG4gICAgICBjb250ZW50ID0gKFxuICAgICAgICA8U3R5bGVkTm9kZUVkaXRvcj5cbiAgICAgICAgICA8UHJvcGVydGllc0hlYWRlcj5cbiAgICAgICAgICAgIDxOYW1lSW5wdXRHcm91cENvbnRhaW5lcj5cbiAgICAgICAgICAgICAgPE5hbWVJbnB1dEdyb3VwIG5vZGU9e2FjdGl2ZU5vZGV9IC8+XG4gICAgICAgICAgICAgIHthY3RpdmVOb2RlLm5vZGVOYW1lICE9PSAnU2NlbmUnICYmIChcbiAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgPFZpc2libGVJbnB1dEdyb3VwIG5hbWU9XCJWaXNpYmxlXCIgbGFiZWw9e3RoaXMucHJvcHMudCgnZWRpdG9yOnByb3BlcnRpZXMubGJsLXZpc2libGUnKX0+XG4gICAgICAgICAgICAgICAgICAgIDxCb29sZWFuSW5wdXQgdmFsdWU9e2FjdGl2ZU5vZGUudmlzaWJsZX0gb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VWaXNpYmxlfSAvPlxuICAgICAgICAgICAgICAgICAgPC9WaXNpYmxlSW5wdXRHcm91cD5cbiAgICAgICAgICAgICAgICAgIHtoYXZlU3RhdGljVGFncyAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxWaXNpYmxlSW5wdXRHcm91cCBuYW1lPVwiQmFrZSBTdGF0aWNcIiBsYWJlbD1cIkJha2UgU3RhdGljXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPEJvb2xlYW5JbnB1dCB2YWx1ZT17YWN0aXZlTm9kZS5pbmNsdWRlSW5DdWJlbWFwQmFrZX0gb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VCYWtlU3RhdGljfSAvPlxuICAgICAgICAgICAgICAgICAgICA8L1Zpc2libGVJbnB1dEdyb3VwPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvTmFtZUlucHV0R3JvdXBDb250YWluZXI+XG4gICAgICAgICAgICA8UGVyc2lzdElucHV0R3JvdXAgbmFtZT1cIlBlcnNpc3RcIiBsYWJlbD17dGhpcy5wcm9wcy50KCdlZGl0b3I6cHJvcGVydGllcy5sYmwtcGVyc2lzdCcpfT5cbiAgICAgICAgICAgICAgPEJvb2xlYW5JbnB1dCB2YWx1ZT17YWN0aXZlTm9kZS5wZXJzaXN0fSBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZVBlcnNpc3R9IC8+XG4gICAgICAgICAgICA8L1BlcnNpc3RJbnB1dEdyb3VwPlxuICAgICAgICAgICAgeyFkaXNhYmxlVHJhbnNmb3JtICYmIDxUcmFuc2Zvcm1Qcm9wZXJ0eUdyb3VwIG5vZGU9e2FjdGl2ZU5vZGV9IC8+fVxuICAgICAgICAgIDwvUHJvcGVydGllc0hlYWRlcj5cbiAgICAgICAgICB7bm9kZUVkaXRvcn1cbiAgICAgICAgPC9TdHlsZWROb2RlRWRpdG9yPlxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiA8UHJvcGVydGllc1BhbmVsQ29udGVudD57Y29udGVudH08L1Byb3BlcnRpZXNQYW5lbENvbnRlbnQ+XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgd2l0aFRyYW5zbGF0aW9uKCkoUHJvcGVydGllc1BhbmVsQ29udGFpbmVyKVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cydcbmltcG9ydCB7IEluZm9Ub29sdGlwIH0gZnJvbSAnLi4vbGF5b3V0L1Rvb2x0aXAnXG5cbi8qKlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqL1xuY29uc3QgU3R5bGVkVG9vbEJ1dHRvbiA9IChzdHlsZWQgYXMgYW55KS5idXR0b25gXG4gIHdpZHRoOiA0MHB4O1xuICBoZWlnaHQ6IDQwcHg7XG4gIGJvcmRlcjogbm9uZTtcbiAgY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS53aGl0ZX07XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuXG4gIGJhY2tncm91bmQtY29sb3I6ICR7KHByb3BzKSA9PiAocHJvcHMuaXNTZWxlY3RlZCA/IHByb3BzLnRoZW1lLmJsdWUgOiBwcm9wcy50aGVtZS50b29sYmFyKX07XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogJHsocHJvcHMpID0+IChwcm9wcy5pc1NlbGVjdGVkID8gcHJvcHMudGhlbWUuYmx1ZUhvdmVyIDogcHJvcHMudGhlbWUucGFuZWwpfTtcbiAgfVxuYFxuXG4vKipcbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbmNvbnN0IEljb24gPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICB3aWR0aDogMTRweDtcbiAgaGVpZ2h0OiAxNHB4O1xuICBmb250LXNpemU6IDE0cHg7XG5gXG5cbmludGVyZmFjZSBUb29sQnV0dG9uUHJvcCB7XG4gIGlkOiBzdHJpbmcgfCBudW1iZXJcbiAgaWNvbj86IGFueVxuICBvbkNsaWNrOiBGdW5jdGlvblxuICBpc1NlbGVjdGVkPzogYm9vbGVhblxuICB0b29sdGlwPzogc3RyaW5nXG59XG5cbi8qKlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSB7YW55fSBpZFxuICogQHBhcmFtIHthbnl9IGljb25cbiAqIEBwYXJhbSB7YW55fSBvbkNsaWNrXG4gKiBAcGFyYW0ge2FueX0gaXNTZWxlY3RlZFxuICogQHBhcmFtIHthbnl9IHRvb2x0aXBcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBUb29sQnV0dG9uKHsgaWQsIGljb24sIG9uQ2xpY2ssIGlzU2VsZWN0ZWQsIHRvb2x0aXAgfTogVG9vbEJ1dHRvblByb3ApIHtcbiAgcmV0dXJuIChcbiAgICA8SW5mb1Rvb2x0aXAgaWQ9e2lkfSBpbmZvPXt0b29sdGlwfSBwb3NpdGlvbj1cImJvdHRvbVwiPlxuICAgICAgPFN0eWxlZFRvb2xCdXR0b24gaXNTZWxlY3RlZD17aXNTZWxlY3RlZH0gb25DbGljaz17b25DbGlja30+XG4gICAgICAgIDxJY29uIGFzPXtpY29ufSAvPlxuICAgICAgPC9TdHlsZWRUb29sQnV0dG9uPlxuICAgIDwvSW5mb1Rvb2x0aXA+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgVG9vbEJ1dHRvblxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgQmFycyB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvZmEtc29saWQvQmFycydcbmltcG9ydCBUb29sQnV0dG9uIGZyb20gJy4uL3Rvb2xiYXIvVG9vbEJ1dHRvbidcbmltcG9ydCB7IENvbnRleHRNZW51LCBNZW51SXRlbSwgU3ViTWVudSwgc2hvd01lbnUgfSBmcm9tICcuLi9sYXlvdXQvQ29udGV4dE1lbnUnXG5pbXBvcnQgeyB3aXRoVHJhbnNsYXRpb24sIFRGdW5jdGlvbiB9IGZyb20gJ3JlYWN0LWkxOG5leHQnXG5cbmludGVyZmFjZSBDb21tYW5kIHtcbiAgbmFtZTogc3RyaW5nXG4gIGFjdGlvbjogRnVuY3Rpb25cbiAgaG90a2V5Pzogc3RyaW5nXG4gIHN1YkNvbW1uYWRzPzogQ29tbWFuZFtdXG59XG5cbmludGVyZmFjZSBNYWluTWVudVByb3Age1xuICBjb21tYW5kczogQ29tbWFuZFtdXG4gIHQ6IFRGdW5jdGlvblxufVxuXG5pbnRlcmZhY2UgTWFpbk1lbnVTdGF0ZSB7XG4gIGlzTWVudU9wZW46IGJvb2xlYW5cbn1cblxuY2xhc3MgTWFpbk1lbnUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8TWFpbk1lbnVQcm9wLCBNYWluTWVudVN0YXRlPiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBNYWluTWVudVByb3ApIHtcbiAgICBzdXBlcihwcm9wcylcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBpc01lbnVPcGVuOiBmYWxzZVxuICAgIH1cblxuICAgIHRoaXMudCA9IHRoaXMucHJvcHMudFxuICB9XG5cbiAgdDogVEZ1bmN0aW9uXG5cbiAgdG9nZ2xlTWVudSA9IChlKTogdm9pZCA9PiB7XG4gICAgaWYgKHRoaXMuc3RhdGUuaXNNZW51T3Blbikge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlzTWVudU9wZW46IGZhbHNlIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCB4ID0gMFxuICAgIGNvbnN0IHkgPSBlLmN1cnJlbnRUYXJnZXQub2Zmc2V0SGVpZ2h0XG4gICAgc2hvd01lbnUoe1xuICAgICAgcG9zaXRpb246IHsgeCwgeSB9LFxuICAgICAgdGFyZ2V0OiBlLmN1cnJlbnRUYXJnZXQsXG4gICAgICBpZDogJ21lbnUnXG4gICAgfSlcblxuICAgIHRoaXMuc2V0U3RhdGUoeyBpc01lbnVPcGVuOiB0cnVlIH0pXG4gIH1cblxuICByZW5kZXJNZW51ID0gKGNvbW1hbmQ6IENvbW1hbmQpID0+IHtcbiAgICBpZiAoIWNvbW1hbmQuc3ViQ29tbW5hZHMgfHwgY29tbWFuZC5zdWJDb21tbmFkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxNZW51SXRlbSBrZXk9e2NvbW1hbmQubmFtZX0gb25DbGljaz17Y29tbWFuZC5hY3Rpb259PlxuICAgICAgICAgIHtjb21tYW5kLm5hbWV9XG4gICAgICAgICAge2NvbW1hbmQuaG90a2V5ICYmIDxkaXY+e2NvbW1hbmQuaG90a2V5fTwvZGl2Pn1cbiAgICAgICAgPC9NZW51SXRlbT5cbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFN1Yk1lbnUga2V5PXtjb21tYW5kLm5hbWV9IHRpdGxlPXtjb21tYW5kLm5hbWV9IGhvdmVyRGVsYXk9ezB9PlxuICAgICAgICAgIHtjb21tYW5kLnN1YkNvbW1uYWRzLm1hcCgoc3ViY29tbWFuZCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyTWVudShzdWJjb21tYW5kKVxuICAgICAgICAgIH0pfVxuICAgICAgICA8L1N1Yk1lbnU+XG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICA8VG9vbEJ1dHRvbiBpY29uPXtCYXJzfSBvbkNsaWNrPXt0aGlzLnRvZ2dsZU1lbnV9IGlzU2VsZWN0ZWQ9e3RoaXMuc3RhdGUuaXNNZW51T3Blbn0gaWQ9XCJtZW51XCIgLz5cbiAgICAgICAgPENvbnRleHRNZW51IGlkPVwibWVudVwiIG9uSGlkZT17KCkgPT4gdGhpcy5zZXRTdGF0ZSh7IGlzTWVudU9wZW46IGZhbHNlIH0pfT5cbiAgICAgICAgICB7dGhpcy5wcm9wcy5jb21tYW5kcy5tYXAoKGNvbW1hbmQ6IENvbW1hbmQpID0+IHRoaXMucmVuZGVyTWVudShjb21tYW5kKSl9XG4gICAgICAgIDwvQ29udGV4dE1lbnU+XG4gICAgICA8Lz5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgd2l0aFRyYW5zbGF0aW9uKCkoTWFpbk1lbnUpXG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfZXh0ZW5kcygpIHtcbiAgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcblxuICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuXG4gIHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufSIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHlsZWRJY29uQmFzZSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvc3R5bGVkLWljb24nO1xuZXhwb3J0IHZhciBHcmlkID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgdmFyIGF0dHJzID0ge1xuICAgIFwiZmlsbFwiOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIFwieG1sbnNcIjogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRJY29uQmFzZSwgX2V4dGVuZHMoe1xuICAgIGljb25BdHRyczogYXR0cnMsXG4gICAgaWNvblZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgaWNvblZpZXdCb3g6IFwiMCAwIDI0IDI0XCJcbiAgfSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk0xNSAzSDQuOTg0Yy0xLjEwMyAwLTIgLjg5Ny0yIDJ2MTQuMDE2YzAgMS4xMDMuODk3IDIgMiAySDE5YzEuMTAzIDAgMi0uODk3IDItMlY1YzAtMS4xMDMtLjg5Ny0yLTItMmgtNHptNCA1aC0zVjVoM3Yzek00Ljk4NCAxMGgzdjQuMDE2aC0zVjEwem01IDBIMTR2NC4wMTZIOS45ODRWMTB6TTE2IDEwaDN2NC4wMTZoLTNWMTB6bS0yLTV2M0g5Ljk4NFY1SDE0ek03Ljk4NCA1djNoLTNWNWgzem0tMyAxMS4wMTZoM3YzaC0zdi0zem01IDN2LTNIMTR2M0g5Ljk4NHptNi4wMTYgMHYtM2gzLjAwMXYzSDE2elwiXG4gIH0pKTtcbn0pO1xuR3JpZC5kaXNwbGF5TmFtZSA9ICdHcmlkJztcbmV4cG9ydCB2YXIgR3JpZERpbWVuc2lvbnMgPSB7XG4gIGhlaWdodDogMjQsXG4gIHdpZHRoOiAyNFxufTsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgU3R5bGVkSWNvbkJhc2UgfSBmcm9tICdAc3R5bGVkLWljb25zL3N0eWxlZC1pY29uJztcbmV4cG9ydCB2YXIgQ2FyZXRMZWZ0ID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgdmFyIGF0dHJzID0ge1xuICAgIFwiZmlsbFwiOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIFwieG1sbnNcIjogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRJY29uQmFzZSwgX2V4dGVuZHMoe1xuICAgIGljb25BdHRyczogYXR0cnMsXG4gICAgaWNvblZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgaWNvblZpZXdCb3g6IFwiMCAwIDI0IDI0XCJcbiAgfSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk0xNSAxOVY1bC04IDd6XCJcbiAgfSkpO1xufSk7XG5DYXJldExlZnQuZGlzcGxheU5hbWUgPSAnQ2FyZXRMZWZ0JztcbmV4cG9ydCB2YXIgQ2FyZXRMZWZ0RGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiAyNCxcbiAgd2lkdGg6IDI0XG59OyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHlsZWRJY29uQmFzZSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvc3R5bGVkLWljb24nO1xuZXhwb3J0IHZhciBDYXJldFJpZ2h0ID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgdmFyIGF0dHJzID0ge1xuICAgIFwiZmlsbFwiOiBcImN1cnJlbnRDb2xvclwiLFxuICAgIFwieG1sbnNcIjogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gIH07XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTdHlsZWRJY29uQmFzZSwgX2V4dGVuZHMoe1xuICAgIGljb25BdHRyczogYXR0cnMsXG4gICAgaWNvblZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsXG4gICAgaWNvblZpZXdCb3g6IFwiMCAwIDI0IDI0XCJcbiAgfSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZlxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIm05IDE5IDgtNy04LTd6XCJcbiAgfSkpO1xufSk7XG5DYXJldFJpZ2h0LmRpc3BsYXlOYW1lID0gJ0NhcmV0UmlnaHQnO1xuZXhwb3J0IHZhciBDYXJldFJpZ2h0RGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiAyNCxcbiAgd2lkdGg6IDI0XG59OyIsImltcG9ydCBSZWFjdCwgeyB1c2VSZWYsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgTnVtZXJpY0lucHV0IGZyb20gJy4vTnVtZXJpY0lucHV0J1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cydcbmltcG9ydCB7IENhcmV0TGVmdCB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvYm94aWNvbnMtcmVndWxhci9DYXJldExlZnQnXG5pbXBvcnQgeyBDYXJldFJpZ2h0IH0gZnJvbSAnQHN0eWxlZC1pY29ucy9ib3hpY29ucy1yZWd1bGFyL0NhcmV0UmlnaHQnXG5pbXBvcnQgeyBJbmZvVG9vbHRpcCB9IGZyb20gJy4uL2xheW91dC9Ub29sdGlwJ1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbmNvbnN0IFN0ZXBwZXJJbnB1dENvbnRhaW5lciA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXg6IDE7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDI0cHg7XG5cbiAgaW5wdXQge1xuICAgIGJvcmRlci1sZWZ0LXdpZHRoOiAwO1xuICAgIGJvcmRlci1yaWdodC13aWR0aDogMDtcbiAgICBib3JkZXItcmFkaXVzOiAwO1xuICB9XG5gXG5cbi8qKlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqL1xuY29uc3QgU3RlcHBlckJ1dHRvbiA9IChzdHlsZWQgYXMgYW55KS5idXR0b25gXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAkeyhwcm9wcykgPT4gKHByb3BzLnZhbHVlID8gcHJvcHMudGhlbWUuYmx1ZSA6IHByb3BzLnRoZW1lLnRvb2xiYXIpfTtcblxuICBib3JkZXI6IDFweCBzb2xpZCAkeyhwcm9wcykgPT4gcHJvcHMudGhlbWUuYm9yZGVyfTtcbiAgY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS50ZXh0fTtcblxuICB3aWR0aDogMjBweDtcbiAgcGFkZGluZzogMDtcblxuICAkeyhwcm9wcykgPT5cbiAgICBwcm9wcy5sZWZ0XG4gICAgICA/IGBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA0cHg7IGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDRweDtgXG4gICAgICA6IGBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNHB4OyBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogNHB4O2B9XG5cbiAgOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMudGhlbWUuYmx1ZUhvdmVyfTtcbiAgfVxuXG4gIDphY3RpdmUge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS5ibHVlfTtcbiAgfVxuYFxuXG4vKipcbiAqXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHBhcmFtIHthbnl9IHN0eWxlXG4gKiBAcGFyYW0ge2FueX0gY2xhc3NOYW1lXG4gKiBAcGFyYW0ge2FueX0gZGVjcmVtZW50VG9vbHRpcFxuICogQHBhcmFtIHthbnl9IGluY3JlbWVudFRvb2x0aXBcbiAqIEBwYXJhbSB7YW55fSByZXN0XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gTnVtZXJpY1N0ZXBwZXJJbnB1dCh7IHN0eWxlLCBjbGFzc05hbWUsIGRlY3JlbWVudFRvb2x0aXAsIGluY3JlbWVudFRvb2x0aXAsIC4uLnJlc3QgfTogYW55KSB7XG4gIGNvbnN0IGlucHV0UmVmID0gdXNlUmVmKCkgYXMgYW55XG5cbiAgY29uc3Qgb25EZWNyZW1lbnQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaW5wdXRSZWYuY3VycmVudC5kZWNyZW1lbnQoKVxuICB9LCBbaW5wdXRSZWZdKVxuXG4gIGNvbnN0IG9uSW5jcmVtZW50ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlucHV0UmVmLmN1cnJlbnQuaW5jcmVtZW50KClcbiAgfSwgW2lucHV0UmVmXSlcblxuICByZXR1cm4gKFxuICAgIDxTdGVwcGVySW5wdXRDb250YWluZXIgc3R5bGU9e3N0eWxlfSBjbGFzc05hbWU9e2NsYXNzTmFtZX0+XG4gICAgICA8SW5mb1Rvb2x0aXAgaW5mbz17ZGVjcmVtZW50VG9vbHRpcH0gcG9zaXRpb249XCJib3R0b21cIj5cbiAgICAgICAgPFN0ZXBwZXJCdXR0b24gbGVmdCBvbkNsaWNrPXtvbkRlY3JlbWVudH0+XG4gICAgICAgICAgPENhcmV0TGVmdCBzaXplPXsxNn0gLz5cbiAgICAgICAgPC9TdGVwcGVyQnV0dG9uPlxuICAgICAgPC9JbmZvVG9vbHRpcD5cbiAgICAgIDxOdW1lcmljSW5wdXQgcmVmPXtpbnB1dFJlZn0gey4uLnJlc3R9IC8+XG4gICAgICA8SW5mb1Rvb2x0aXAgaW5mbz17aW5jcmVtZW50VG9vbHRpcH0gcG9zaXRpb249XCJib3R0b21cIj5cbiAgICAgICAgPFN0ZXBwZXJCdXR0b24gcmlnaHQgb25DbGljaz17b25JbmNyZW1lbnR9PlxuICAgICAgICAgIDxDYXJldFJpZ2h0IHNpemU9ezE2fSAvPlxuICAgICAgICA8L1N0ZXBwZXJCdXR0b24+XG4gICAgICA8L0luZm9Ub29sdGlwPlxuICAgIDwvU3RlcHBlcklucHV0Q29udGFpbmVyPlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IE51bWVyaWNTdGVwcGVySW5wdXRcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBHcmlkIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9ib3hpY29ucy1yZWd1bGFyL0dyaWQnXG5pbXBvcnQgKiBhcyBzdHlsZXMgZnJvbSAnLi4vc3R5bGVzLm1vZHVsZS5zY3NzJ1xuaW1wb3J0IHsgSW5mb1Rvb2x0aXAgfSBmcm9tICcuLi8uLi9sYXlvdXQvVG9vbHRpcCdcbmltcG9ydCBOdW1lcmljU3RlcHBlcklucHV0IGZyb20gJy4uLy4uL2lucHV0cy9OdW1lcmljU3RlcHBlcklucHV0J1xuaW1wb3J0IEVkaXRvckV2ZW50cyBmcm9tICcuLi8uLi8uLi9jb25zdGFudHMvRWRpdG9yRXZlbnRzJ1xuaW1wb3J0IHsgU2NlbmVNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vLi4vbWFuYWdlcnMvU2NlbmVNYW5hZ2VyJ1xuaW1wb3J0IHsgQ29tbWFuZE1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9tYW5hZ2Vycy9Db21tYW5kTWFuYWdlcidcblxuY29uc3QgR3JpZFRvb2wgPSAoKSA9PiB7XG4gIGNvbnN0IFtpc0dyaWRWaXNpYmxlLCBzZXRHcmlkVmlzaWJsZV0gPSB1c2VTdGF0ZSh0cnVlKVxuICBjb25zdCBbZ3JpZEhlaWdodCwgc2V0R3JpZEhlaWdodF0gPSB1c2VTdGF0ZSgwKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLkdSSURfSEVJR0hUX0NIQU5HRUQudG9TdHJpbmcoKSwgdXBkYXRlR3JpZEhlaWdodClcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuR1JJRF9WSVNJQklMSVRZX0NIQU5HRUQudG9TdHJpbmcoKSwgdXBkYXRlR3JpZFZpc2liaWxpdHkpXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoRWRpdG9yRXZlbnRzLkdSSURfSEVJR0hUX0NIQU5HRUQudG9TdHJpbmcoKSwgdXBkYXRlR3JpZEhlaWdodClcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5HUklEX1ZJU0lCSUxJVFlfQ0hBTkdFRC50b1N0cmluZygpLCB1cGRhdGVHcmlkVmlzaWJpbGl0eSlcbiAgICB9XG4gIH0sIFtdKVxuXG4gIGNvbnN0IHVwZGF0ZUdyaWRWaXNpYmlsaXR5ID0gKCkgPT4ge1xuICAgIHNldEdyaWRWaXNpYmxlKFNjZW5lTWFuYWdlci5pbnN0YW5jZS5ncmlkLnZpc2libGUpXG4gIH1cblxuICBjb25zdCB1cGRhdGVHcmlkSGVpZ2h0ID0gKCkgPT4ge1xuICAgIHNldEdyaWRIZWlnaHQoU2NlbmVNYW5hZ2VyLmluc3RhbmNlLmdyaWQucG9zaXRpb24ueSlcbiAgfVxuXG4gIGNvbnN0IG9uVG9nZ2xlR3JpZFZpc2libGUgPSAoKSA9PiB7XG4gICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLmdyaWQudG9nZ2xlR3JpZFZpc2libGUoKVxuICB9XG5cbiAgY29uc3Qgb25DaGFuZ2VHcmlkSGVpZ2h0ID0gKHZhbHVlKSA9PiB7XG4gICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLmdyaWQuc2V0R3JpZEhlaWdodCh2YWx1ZSlcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBpZD1cInRyYW5zZm9ybS1ncmlkXCIgY2xhc3NOYW1lPXtzdHlsZXMudG9vbGJhcklucHV0R3JvdXB9PlxuICAgICAgPEluZm9Ub29sdGlwIGluZm89XCJUb2dnbGUgR3JpZCBWaXNpYmlsaXR5XCI+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBvbkNsaWNrPXtvblRvZ2dsZUdyaWRWaXNpYmxlfVxuICAgICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLnRvb2xCdXR0b24gKyAnICcgKyAoaXNHcmlkVmlzaWJsZSA/IHN0eWxlcy5zZWxlY3RlZCA6ICcnKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxHcmlkIHNpemU9ezE2fSAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvSW5mb1Rvb2x0aXA+XG4gICAgICA8TnVtZXJpY1N0ZXBwZXJJbnB1dFxuICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy50b29sYmFyTnVtZXJpY1N0ZXBwZXJJbnB1dH1cbiAgICAgICAgdmFsdWU9e2dyaWRIZWlnaHR9XG4gICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZUdyaWRIZWlnaHR9XG4gICAgICAgIHByZWNpc2lvbj17MC4wMX1cbiAgICAgICAgc21hbGxTdGVwPXswLjV9XG4gICAgICAgIG1lZGl1bVN0ZXA9ezF9XG4gICAgICAgIGxhcmdlU3RlcD17NX1cbiAgICAgICAgdW5pdD1cIm1cIlxuICAgICAgICBpbmNyZW1lbnRUb29sdGlwPVwiWy1dIEluY3JlbWVudCBHcmlkIEhlaWdodFwiXG4gICAgICAgIGRlY3JlbWVudFRvb2x0aXA9XCJbPV0gRGVjcmVtZW50IEdyaWQgSGVpZ2h0XCJcbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgR3JpZFRvb2xcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBBcnJvd3NBbHQgfSBmcm9tICdAc3R5bGVkLWljb25zL2ZhLXNvbGlkL0Fycm93c0FsdCdcbmltcG9ydCB7IEFycm93c0FsdFYgfSBmcm9tICdAc3R5bGVkLWljb25zL2ZhLXNvbGlkL0Fycm93c0FsdFYnXG5pbXBvcnQgeyBTeW5jQWx0IH0gZnJvbSAnQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9TeW5jQWx0J1xuaW1wb3J0IHsgVHJhbnNmb3JtTW9kZSB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL3NjZW5lL2NvbnN0YW50cy90cmFuc2Zvcm1Db25zdGFudHMnXG5cbmltcG9ydCAqIGFzIHN0eWxlcyBmcm9tICcuLi9zdHlsZXMubW9kdWxlLnNjc3MnXG5pbXBvcnQgeyBDb250cm9sTWFuYWdlciB9IGZyb20gJy4uLy4uLy4uL21hbmFnZXJzL0NvbnRyb2xNYW5hZ2VyJ1xuaW1wb3J0IHsgQ29tbWFuZE1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9tYW5hZ2Vycy9Db21tYW5kTWFuYWdlcidcbmltcG9ydCBFZGl0b3JFdmVudHMgZnJvbSAnLi4vLi4vLi4vY29uc3RhbnRzL0VkaXRvckV2ZW50cydcbmltcG9ydCB7IEluZm9Ub29sdGlwIH0gZnJvbSAnLi4vLi4vbGF5b3V0L1Rvb2x0aXAnXG5cbmNvbnN0IFRyYW5zZm9ybVRvb2wgPSAoKSA9PiB7XG4gIGNvbnN0IFt0cmFuc2Zvcm1Nb2RlLCBzZXRUcmFuc2Zvcm1Nb2RlXSA9IHVzZVN0YXRlKFRyYW5zZm9ybU1vZGUuVHJhbnNsYXRlKVxuICBjb25zdCBlZGl0b3JDb250cm9scyA9IENvbnRyb2xNYW5hZ2VyLmluc3RhbmNlLmVkaXRvckNvbnRyb2xzXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuVFJBTlNGUk9NX01PREVfQ0hBTkdFRC50b1N0cmluZygpLCB1cGRhdGVUcmFuc2Zvcm1Nb2RlKVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5UUkFOU0ZST01fTU9ERV9DSEFOR0VELnRvU3RyaW5nKCksIHVwZGF0ZVRyYW5zZm9ybU1vZGUpXG4gICAgfVxuICB9LCBbXSlcblxuICBjb25zdCB1cGRhdGVUcmFuc2Zvcm1Nb2RlID0gKCkgPT4ge1xuICAgIHNldFRyYW5zZm9ybU1vZGUoZWRpdG9yQ29udHJvbHMudHJhbnNmb3JtTW9kZSlcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy50b29sYmFySW5wdXRHcm91cH0+XG4gICAgICA8SW5mb1Rvb2x0aXAgaWQ9XCJ0cmFuc2xhdGUtYnV0dG9uXCIgaW5mbz1cIltUXSBUcmFuc2xhdGVcIiBwb3NpdGlvbj1cImJvdHRvbVwiPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMudG9vbEJ1dHRvbiArICcgJyArICh0cmFuc2Zvcm1Nb2RlID09PSBUcmFuc2Zvcm1Nb2RlLlRyYW5zbGF0ZSA/IHN0eWxlcy5zZWxlY3RlZCA6ICcnKX1cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBlZGl0b3JDb250cm9scy5zZXRUcmFuc2Zvcm1Nb2RlKFRyYW5zZm9ybU1vZGUuVHJhbnNsYXRlKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxBcnJvd3NBbHQgc2l6ZT17MTJ9IC8+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9JbmZvVG9vbHRpcD5cbiAgICAgIDxJbmZvVG9vbHRpcCBpZD1cInJvdGF0ZS1idXR0b25cIiBpbmZvPVwiW1JdIFJvdGF0ZVwiIHBvc2l0aW9uPVwiYm90dG9tXCI+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy50b29sQnV0dG9uICsgJyAnICsgKHRyYW5zZm9ybU1vZGUgPT09IFRyYW5zZm9ybU1vZGUuUm90YXRlID8gc3R5bGVzLnNlbGVjdGVkIDogJycpfVxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGVkaXRvckNvbnRyb2xzLnNldFRyYW5zZm9ybU1vZGUoVHJhbnNmb3JtTW9kZS5Sb3RhdGUpfVxuICAgICAgICA+XG4gICAgICAgICAgPFN5bmNBbHQgc2l6ZT17MTJ9IC8+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9JbmZvVG9vbHRpcD5cbiAgICAgIDxJbmZvVG9vbHRpcCBpZD1cInNjYWxlLWJ1dHRvblwiIGluZm89XCJbWV0gU2NhbGVcIiBwb3NpdGlvbj1cImJvdHRvbVwiPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMudG9vbEJ1dHRvbiArICcgJyArICh0cmFuc2Zvcm1Nb2RlID09PSBUcmFuc2Zvcm1Nb2RlLlNjYWxlID8gc3R5bGVzLnNlbGVjdGVkIDogJycpfVxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGVkaXRvckNvbnRyb2xzLnNldFRyYW5zZm9ybU1vZGUoVHJhbnNmb3JtTW9kZS5TY2FsZSl9XG4gICAgICAgID5cbiAgICAgICAgICA8QXJyb3dzQWx0ViBzaXplPXsxMn0gLz5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L0luZm9Ub29sdGlwPlxuICAgIDwvZGl2PlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IFRyYW5zZm9ybVRvb2xcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBCdWxsc2V5ZSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvZmEtc29saWQvQnVsbHNleWUnXG5pbXBvcnQgeyBUcmFuc2Zvcm1QaXZvdCB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL3NjZW5lL2NvbnN0YW50cy90cmFuc2Zvcm1Db25zdGFudHMnXG5pbXBvcnQgeyBDb250cm9sTWFuYWdlciB9IGZyb20gJy4uLy4uLy4uL21hbmFnZXJzL0NvbnRyb2xNYW5hZ2VyJ1xuaW1wb3J0IHsgQ29tbWFuZE1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9tYW5hZ2Vycy9Db21tYW5kTWFuYWdlcidcbmltcG9ydCBFZGl0b3JFdmVudHMgZnJvbSAnLi4vLi4vLi4vY29uc3RhbnRzL0VkaXRvckV2ZW50cydcbmltcG9ydCB7IEluZm9Ub29sdGlwIH0gZnJvbSAnLi4vLi4vbGF5b3V0L1Rvb2x0aXAnXG5pbXBvcnQgU2VsZWN0SW5wdXQgZnJvbSAnLi4vLi4vaW5wdXRzL1NlbGVjdElucHV0J1xuaW1wb3J0ICogYXMgc3R5bGVzIGZyb20gJy4uL3N0eWxlcy5tb2R1bGUuc2NzcydcblxuLyoqXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICovXG5jb25zdCB0cmFuc2Zvcm1QaXZvdE9wdGlvbnMgPSBbXG4gIHsgbGFiZWw6ICdTZWxlY3Rpb24nLCB2YWx1ZTogVHJhbnNmb3JtUGl2b3QuU2VsZWN0aW9uIH0sXG4gIHsgbGFiZWw6ICdDZW50ZXInLCB2YWx1ZTogVHJhbnNmb3JtUGl2b3QuQ2VudGVyIH0sXG4gIHsgbGFiZWw6ICdCb3R0b20nLCB2YWx1ZTogVHJhbnNmb3JtUGl2b3QuQm90dG9tIH1cbl1cblxuY29uc3QgVHJhbnNmb3JtUGl2b3RUb29sID0gKCkgPT4ge1xuICBjb25zdCBbdHJhbnNmb3JtUGl2b3QsIHNldFRyYW5zZm9ybVBpdm90XSA9IHVzZVN0YXRlKFRyYW5zZm9ybVBpdm90LlNlbGVjdGlvbilcbiAgY29uc3QgZWRpdG9yQ29udHJvbHMgPSBDb250cm9sTWFuYWdlci5pbnN0YW5jZS5lZGl0b3JDb250cm9sc1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlRSQU5TRk9STV9QSVZPVF9DSEFOR0VELnRvU3RyaW5nKCksIHVwZGF0ZVRyYW5zZm9ybVBpdm90KVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5UUkFOU0ZPUk1fUElWT1RfQ0hBTkdFRC50b1N0cmluZygpLCB1cGRhdGVUcmFuc2Zvcm1QaXZvdClcbiAgICB9XG4gIH0sIFtdKVxuXG4gIGNvbnN0IHVwZGF0ZVRyYW5zZm9ybVBpdm90ID0gKCkgPT4ge1xuICAgIHNldFRyYW5zZm9ybVBpdm90KGVkaXRvckNvbnRyb2xzLnRyYW5zZm9ybVBpdm90KVxuICB9XG5cbiAgY29uc3Qgb25DaGFuZ2VUcmFuc2Zvcm1QaXZvdCA9ICh0cmFuc2Zvcm1QaXZvdCkgPT4ge1xuICAgIGVkaXRvckNvbnRyb2xzLnNldFRyYW5zZm9ybVBpdm90KHRyYW5zZm9ybVBpdm90KVxuICB9XG5cbiAgY29uc3Qgb25Ub2dnbGVUcmFuc2Zvcm1QaXZvdCA9ICgpID0+IHtcbiAgICBlZGl0b3JDb250cm9scy5jaGFuZ2VUcmFuc2Zvcm1QaXZvdCgpXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMudG9vbGJhcklucHV0R3JvdXB9IGlkPVwidHJhbnNmb3JtLXBpdm90XCI+XG4gICAgICA8SW5mb1Rvb2x0aXAgaW5mbz1cIltYXSBUb2dnbGUgVHJhbnNmb3JtIFBpdm90XCI+XG4gICAgICAgIDxidXR0b24gb25DbGljaz17b25Ub2dnbGVUcmFuc2Zvcm1QaXZvdH0gY2xhc3NOYW1lPXtzdHlsZXMudG9vbEJ1dHRvbn0+XG4gICAgICAgICAgPEJ1bGxzZXllIHNpemU9ezEyfSAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvSW5mb1Rvb2x0aXA+XG4gICAgICA8U2VsZWN0SW5wdXRcbiAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMuc2VsZWN0SW5wdXR9XG4gICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZVRyYW5zZm9ybVBpdm90fVxuICAgICAgICBvcHRpb25zPXt0cmFuc2Zvcm1QaXZvdE9wdGlvbnN9XG4gICAgICAgIHZhbHVlPXt0cmFuc2Zvcm1QaXZvdH1cbiAgICAgICAgY3JlYXRhYmxlPXtmYWxzZX1cbiAgICAgICAgaXNTZWFyY2hhYmxlPXtmYWxzZX1cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgVHJhbnNmb3JtUGl2b3RUb29sXG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgR2xvYmUgfSBmcm9tICdAc3R5bGVkLWljb25zL2ZhLXNvbGlkL0dsb2JlJ1xuaW1wb3J0IHsgQ29udHJvbE1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9tYW5hZ2Vycy9Db250cm9sTWFuYWdlcidcbmltcG9ydCB7IENvbW1hbmRNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vLi4vbWFuYWdlcnMvQ29tbWFuZE1hbmFnZXInXG5pbXBvcnQgRWRpdG9yRXZlbnRzIGZyb20gJy4uLy4uLy4uL2NvbnN0YW50cy9FZGl0b3JFdmVudHMnXG5pbXBvcnQgeyBJbmZvVG9vbHRpcCB9IGZyb20gJy4uLy4uL2xheW91dC9Ub29sdGlwJ1xuaW1wb3J0IFNlbGVjdElucHV0IGZyb20gJy4uLy4uL2lucHV0cy9TZWxlY3RJbnB1dCdcbmltcG9ydCAqIGFzIHN0eWxlcyBmcm9tICcuLi9zdHlsZXMubW9kdWxlLnNjc3MnXG5pbXBvcnQgeyBUcmFuc2Zvcm1TcGFjZSB9IGZyb20gJy4uLy4uLy4uL2NvbnN0YW50cy9UcmFuc2Zvcm1TcGFjZSdcblxuLyoqXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICovXG5jb25zdCB0cmFuc2Zvcm1TcGFjZU9wdGlvbnMgPSBbXG4gIHsgbGFiZWw6ICdTZWxlY3Rpb24nLCB2YWx1ZTogVHJhbnNmb3JtU3BhY2UuTG9jYWxTZWxlY3Rpb24gfSxcbiAgeyBsYWJlbDogJ1dvcmxkJywgdmFsdWU6IFRyYW5zZm9ybVNwYWNlLldvcmxkIH1cbl1cblxuY29uc3QgVHJhbnNmb3JtU3BhY2VUb29sID0gKCkgPT4ge1xuICBjb25zdCBbdHJhbnNmb3JtU3BhY2UsIHNldFRyYW5zZm9ybVNwYWNlXSA9IHVzZVN0YXRlKFRyYW5zZm9ybVNwYWNlLldvcmxkKVxuICBjb25zdCBlZGl0b3JDb250cm9scyA9IENvbnRyb2xNYW5hZ2VyLmluc3RhbmNlLmVkaXRvckNvbnRyb2xzXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuVFJBTlNGT1JNX1NQQUNFX0NIQU5HRUQudG9TdHJpbmcoKSwgdXBkYXRlVHJhbnNmb3JtU3BhY2UpXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlRSQU5TRk9STV9TUEFDRV9DSEFOR0VELnRvU3RyaW5nKCksIHVwZGF0ZVRyYW5zZm9ybVNwYWNlKVxuICAgIH1cbiAgfSwgW10pXG5cbiAgY29uc3QgdXBkYXRlVHJhbnNmb3JtU3BhY2UgPSAoKSA9PiB7XG4gICAgc2V0VHJhbnNmb3JtU3BhY2UoZWRpdG9yQ29udHJvbHMudHJhbnNmb3JtU3BhY2UpXG4gIH1cblxuICBjb25zdCBvbkNoYW5nZVRyYW5zZm9ybVNwYWNlID0gKHRyYW5zZm9ybVNwYWNlKSA9PiB7XG4gICAgZWRpdG9yQ29udHJvbHMuc2V0VHJhbnNmb3JtU3BhY2UodHJhbnNmb3JtU3BhY2UpXG4gIH1cblxuICBjb25zdCBvblRvZ2dsZVRyYW5zZm9ybVNwYWNlID0gKCkgPT4ge1xuICAgIGVkaXRvckNvbnRyb2xzLnRvZ2dsZVRyYW5zZm9ybVNwYWNlKClcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy50b29sYmFySW5wdXRHcm91cH0gaWQ9XCJ0cmFuc2Zvcm0tc3BhY2VcIj5cbiAgICAgIDxJbmZvVG9vbHRpcCBpbmZvPVwiW1pdIFRvZ2dsZSBUcmFuc2Zvcm0gU3BhY2VcIj5cbiAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvblRvZ2dsZVRyYW5zZm9ybVNwYWNlfSBjbGFzc05hbWU9e3N0eWxlcy50b29sQnV0dG9ufT5cbiAgICAgICAgICA8R2xvYmUgc2l6ZT17MTJ9IC8+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9JbmZvVG9vbHRpcD5cbiAgICAgIDxTZWxlY3RJbnB1dFxuICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5zZWxlY3RJbnB1dH1cbiAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlVHJhbnNmb3JtU3BhY2V9XG4gICAgICAgIG9wdGlvbnM9e3RyYW5zZm9ybVNwYWNlT3B0aW9uc31cbiAgICAgICAgdmFsdWU9e3RyYW5zZm9ybVNwYWNlfVxuICAgICAgICBjcmVhdGFibGU9e2ZhbHNlfVxuICAgICAgICBpc1NlYXJjaGFibGU9e2ZhbHNlfVxuICAgICAgLz5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBUcmFuc2Zvcm1TcGFjZVRvb2xcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBNYWduZXQgfSBmcm9tICdAc3R5bGVkLWljb25zL2ZhLXNvbGlkL01hZ25ldCdcbmltcG9ydCB7IENvbnRyb2xNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vLi4vbWFuYWdlcnMvQ29udHJvbE1hbmFnZXInXG5pbXBvcnQgeyBDb21tYW5kTWFuYWdlciB9IGZyb20gJy4uLy4uLy4uL21hbmFnZXJzL0NvbW1hbmRNYW5hZ2VyJ1xuaW1wb3J0IEVkaXRvckV2ZW50cyBmcm9tICcuLi8uLi8uLi9jb25zdGFudHMvRWRpdG9yRXZlbnRzJ1xuaW1wb3J0IHsgSW5mb1Rvb2x0aXAgfSBmcm9tICcuLi8uLi9sYXlvdXQvVG9vbHRpcCdcbmltcG9ydCBTZWxlY3RJbnB1dCBmcm9tICcuLi8uLi9pbnB1dHMvU2VsZWN0SW5wdXQnXG5pbXBvcnQgKiBhcyBzdHlsZXMgZnJvbSAnLi4vc3R5bGVzLm1vZHVsZS5zY3NzJ1xuaW1wb3J0IHsgU25hcE1vZGUgfSBmcm9tICcuLi8uLi8uLi9jb250cm9scy9FZGl0b3JDb250cm9scydcblxuLyoqXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICovXG5jb25zdCB0cmFuc2xhdGlvblNuYXBPcHRpb25zID0gW1xuICB7IGxhYmVsOiAnMC4xbScsIHZhbHVlOiAwLjEgfSxcbiAgeyBsYWJlbDogJzAuMTI1bScsIHZhbHVlOiAwLjEyNSB9LFxuICB7IGxhYmVsOiAnMC4yNW0nLCB2YWx1ZTogMC4yNSB9LFxuICB7IGxhYmVsOiAnMC41bScsIHZhbHVlOiAwLjUgfSxcbiAgeyBsYWJlbDogJzFtJywgdmFsdWU6IDEgfSxcbiAgeyBsYWJlbDogJzJtJywgdmFsdWU6IDIgfSxcbiAgeyBsYWJlbDogJzRtJywgdmFsdWU6IDQgfVxuXVxuXG4vKipcbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbmNvbnN0IHJvdGF0aW9uU25hcE9wdGlvbnMgPSBbXG4gIHsgbGFiZWw6ICcxwrAnLCB2YWx1ZTogMSB9LFxuICB7IGxhYmVsOiAnNcKwJywgdmFsdWU6IDUgfSxcbiAgeyBsYWJlbDogJzEwwrAnLCB2YWx1ZTogMTAgfSxcbiAgeyBsYWJlbDogJzE1wrAnLCB2YWx1ZTogMTUgfSxcbiAgeyBsYWJlbDogJzMwwrAnLCB2YWx1ZTogMzAgfSxcbiAgeyBsYWJlbDogJzQ1wrAnLCB2YWx1ZTogNDUgfSxcbiAgeyBsYWJlbDogJzkwwrAnLCB2YWx1ZTogOTAgfVxuXVxuXG5jb25zdCBkZWZhdWx0U25hcFNldHRpbmcgPSB7XG4gIG1vZGU6IFNuYXBNb2RlLkdyaWQsXG4gIHRyYW5zbGF0aW9uU25hcDogMC41LFxuICByb3RhdGlvblNuYXA6IDEwXG59XG5cbmNvbnN0IFRyYW5zZm9ybVNuYXBUb29sID0gKCkgPT4ge1xuICBjb25zdCBbc25hcFNldHRpbmcsIHNldFNuYXBTZXR0aW5nXSA9IHVzZVN0YXRlKGRlZmF1bHRTbmFwU2V0dGluZylcbiAgY29uc3QgZWRpdG9yQ29udHJvbHMgPSBDb250cm9sTWFuYWdlci5pbnN0YW5jZS5lZGl0b3JDb250cm9sc1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlNOQVBfU0VUVElOR1NfQ0hBTkdFRC50b1N0cmluZygpLCB1cGRhdGVTbmFwU2V0dGluZ3MpXG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlNOQVBfU0VUVElOR1NfQ0hBTkdFRC50b1N0cmluZygpLCB1cGRhdGVTbmFwU2V0dGluZ3MpXG4gICAgfVxuICB9LCBbXSlcblxuICBjb25zdCB1cGRhdGVTbmFwU2V0dGluZ3MgPSAoKSA9PiB7XG4gICAgc2V0U25hcFNldHRpbmcoe1xuICAgICAgbW9kZTogZWRpdG9yQ29udHJvbHMuc25hcE1vZGUsXG4gICAgICB0cmFuc2xhdGlvblNuYXA6IGVkaXRvckNvbnRyb2xzLnRyYW5zbGF0aW9uU25hcCxcbiAgICAgIHJvdGF0aW9uU25hcDogZWRpdG9yQ29udHJvbHMucm90YXRpb25TbmFwXG4gICAgfSlcbiAgfVxuXG4gIGNvbnN0IG9uQ2hhbmdlVHJhbnNsYXRpb25TbmFwID0gKHNuYXBWYWx1ZTogbnVtYmVyKSA9PiB7XG4gICAgZWRpdG9yQ29udHJvbHMuc2V0VHJhbnNsYXRpb25TbmFwKHNuYXBWYWx1ZSlcbiAgICBlZGl0b3JDb250cm9scy5zZXRTbmFwTW9kZShTbmFwTW9kZS5HcmlkKVxuICB9XG5cbiAgY29uc3Qgb25DaGFuZ2VSb3RhdGlvblNuYXAgPSAoc25hcFZhbHVlOiBudW1iZXIpID0+IHtcbiAgICBlZGl0b3JDb250cm9scy5zZXRSb3RhdGlvblNuYXAoc25hcFZhbHVlKVxuICAgIGVkaXRvckNvbnRyb2xzLnNldFNuYXBNb2RlKFNuYXBNb2RlLkdyaWQpXG4gIH1cblxuICAvLyBjb25zdCBvbkNoYW5nZVNjYWxlU25hcCA9IChzbmFwVmFsdWU6IG51bWJlcikgPT4ge1xuICAvLyAgIGVkaXRvckNvbnRyb2xzLnNldFNjYWxlU25hcChzbmFwVmFsdWUpXG4gIC8vICAgZWRpdG9yQ29udHJvbHMuc2V0U25hcE1vZGUoU25hcE1vZGUuR3JpZClcbiAgLy8gfVxuXG4gIGNvbnN0IG9uVG9nZ2xlU25hcCA9ICgpID0+IHtcbiAgICBlZGl0b3JDb250cm9scy50b2dnbGVTbmFwTW9kZSgpXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMudG9vbGJhcklucHV0R3JvdXB9IGlkPVwidHJhbnNmb3JtLXNuYXBcIj5cbiAgICAgIDxJbmZvVG9vbHRpcCBpbmZvPVwiW0NdIFRvZ2dsZSBTbmFwIE1vZGVcIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2s9e29uVG9nZ2xlU25hcH1cbiAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy50b29sQnV0dG9uICsgJyAnICsgKHNuYXBTZXR0aW5nLm1vZGUgPT09IFNuYXBNb2RlLkdyaWQgPyBzdHlsZXMuc2VsZWN0ZWQgOiAnJyl9XG4gICAgICAgID5cbiAgICAgICAgICA8TWFnbmV0IHNpemU9ezEyfSAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvSW5mb1Rvb2x0aXA+XG4gICAgICA8U2VsZWN0SW5wdXRcbiAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMuc2VsZWN0SW5wdXR9XG4gICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZVRyYW5zbGF0aW9uU25hcH1cbiAgICAgICAgb3B0aW9ucz17dHJhbnNsYXRpb25TbmFwT3B0aW9uc31cbiAgICAgICAgdmFsdWU9e3NuYXBTZXR0aW5nLnRyYW5zbGF0aW9uU25hcH1cbiAgICAgICAgY3JlYXRhYmxlPXtmYWxzZX1cbiAgICAgICAgaXNTZWFyY2hhYmxlPXtmYWxzZX1cbiAgICAgIC8+XG4gICAgICA8U2VsZWN0SW5wdXRcbiAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMuc2VsZWN0SW5wdXR9XG4gICAgICAgIG9uQ2hhbmdlPXtvbkNoYW5nZVJvdGF0aW9uU25hcH1cbiAgICAgICAgb3B0aW9ucz17cm90YXRpb25TbmFwT3B0aW9uc31cbiAgICAgICAgdmFsdWU9e3NuYXBTZXR0aW5nLnJvdGF0aW9uU25hcH1cbiAgICAgICAgY3JlYXRhYmxlPXtmYWxzZX1cbiAgICAgICAgaXNTZWFyY2hhYmxlPXtmYWxzZX1cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgVHJhbnNmb3JtU25hcFRvb2xcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBQYXVzZSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvZmEtc29saWQvUGF1c2UnXG5pbXBvcnQgeyBQbGF5IH0gZnJvbSAnQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9QbGF5J1xuaW1wb3J0IHsgQ29udHJvbE1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9tYW5hZ2Vycy9Db250cm9sTWFuYWdlcidcbmltcG9ydCB7IENvbW1hbmRNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vLi4vbWFuYWdlcnMvQ29tbWFuZE1hbmFnZXInXG5pbXBvcnQgRWRpdG9yRXZlbnRzIGZyb20gJy4uLy4uLy4uL2NvbnN0YW50cy9FZGl0b3JFdmVudHMnXG5pbXBvcnQgeyBJbmZvVG9vbHRpcCB9IGZyb20gJy4uLy4uL2xheW91dC9Ub29sdGlwJ1xuaW1wb3J0ICogYXMgc3R5bGVzIGZyb20gJy4uL3N0eWxlcy5tb2R1bGUuc2NzcydcblxuY29uc3QgUGxheU1vZGVUb29sID0gKCkgPT4ge1xuICBjb25zdCBbaXNJblBsYXlNb2RlLCBzZXRJblBsYXlNb2RlXSA9IHVzZVN0YXRlKGZhbHNlKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlBMQVlfTU9ERV9DSEFOR0VELnRvU3RyaW5nKCksIHVwZGF0ZVBsYXlNb2RlU2V0dGluZylcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihFZGl0b3JFdmVudHMuUExBWV9NT0RFX0NIQU5HRUQudG9TdHJpbmcoKSwgdXBkYXRlUGxheU1vZGVTZXR0aW5nKVxuICAgIH1cbiAgfSwgW10pXG5cbiAgY29uc3QgdXBkYXRlUGxheU1vZGVTZXR0aW5nID0gKCkgPT4ge1xuICAgIHNldEluUGxheU1vZGUoQ29udHJvbE1hbmFnZXIuaW5zdGFuY2UuaXNJblBsYXlNb2RlKVxuICB9XG5cbiAgY29uc3Qgb25Ub2dnbGVQbGF5TW9kZSA9ICgpID0+IHtcbiAgICBpZiAoaXNJblBsYXlNb2RlKSB7XG4gICAgICBDb250cm9sTWFuYWdlci5pbnN0YW5jZS5sZWF2ZVBsYXlNb2RlKClcbiAgICB9IGVsc2Uge1xuICAgICAgQ29udHJvbE1hbmFnZXIuaW5zdGFuY2UuZW50ZXJQbGF5TW9kZSgpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnRvb2xiYXJJbnB1dEdyb3VwICsgJyAnICsgc3R5bGVzLnBsYXlCdXR0b25Db250YWluZXJ9IGlkPVwicHJldmlld1wiPlxuICAgICAgPEluZm9Ub29sdGlwIGluZm89e2lzSW5QbGF5TW9kZSA/ICdTdG9wIFByZXZpZXdpbmcgU2NlbmUnIDogJ1ByZXZpZXcgU2NlbmUnfT5cbiAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvblRvZ2dsZVBsYXlNb2RlfSBjbGFzc05hbWU9e3N0eWxlcy50b29sQnV0dG9uICsgJyAnICsgKGlzSW5QbGF5TW9kZSA/IHN0eWxlcy5zZWxlY3RlZCA6ICcnKX0+XG4gICAgICAgICAge2lzSW5QbGF5TW9kZSA/IDxQYXVzZSBzaXplPXsxNn0gLz4gOiA8UGxheSBzaXplPXsxNn0gLz59XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9JbmZvVG9vbHRpcD5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBQbGF5TW9kZVRvb2xcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VUcmFuc2xhdGlvbiB9IGZyb20gJ3JlYWN0LWkxOG5leHQnXG5pbXBvcnQgeyBDaGFydEFyZWEgfSBmcm9tICdAc3R5bGVkLWljb25zL2ZhLXNvbGlkL0NoYXJ0QXJlYSdcbmltcG9ydCB7IFNjZW5lTWFuYWdlciB9IGZyb20gJy4uLy4uLy4uL21hbmFnZXJzL1NjZW5lTWFuYWdlcidcbmltcG9ydCB7IEluZm9Ub29sdGlwIH0gZnJvbSAnLi4vLi4vbGF5b3V0L1Rvb2x0aXAnXG5pbXBvcnQgc3R5bGVzIGZyb20gJy4uL3N0eWxlcy5tb2R1bGUuc2NzcydcblxuLyoqXG4gKiBTdGF0cyB1c2VkIHRvIHNob3cgc3RhdHMgb2YgIG1lbW9yeSBhbmQgIHJlbmRlci5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuY29uc3QgU3RhdHNUb29sID0gKCkgPT4ge1xuICBjb25zdCBbaW5mbywgc2V0SW5mb10gPSB1c2VTdGF0ZTxhbnk+KHt9KVxuICBjb25zdCBbaXNWaXNpYmxlLCBzZXRWaXNpYmxlXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCB7IHQgfSA9IHVzZVRyYW5zbGF0aW9uKClcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIFNjZW5lTWFuYWdlci5pbnN0YW5jZS5yZW5kZXJlci5vblVwZGF0ZVN0YXRzID0gKGluZm8pID0+IHtcbiAgICAgIGlmIChpbmZvLnJlbmRlci5mcmFtZSAlIDMgPT09IDApIHtcbiAgICAgICAgc2V0SW5mbyh7XG4gICAgICAgICAgZ2VvbWV0cmllczogaW5mby5tZW1vcnkuZ2VvbWV0cmllcyxcbiAgICAgICAgICB0ZXh0dXJlczogaW5mby5tZW1vcnkudGV4dHVyZXMsXG4gICAgICAgICAgZnBzOiAoaW5mby5yZW5kZXIgYXMgYW55KS5mcHMsXG4gICAgICAgICAgZnJhbWVUaW1lOiAoaW5mby5yZW5kZXIgYXMgYW55KS5mcmFtZVRpbWUsXG4gICAgICAgICAgY2FsbHM6IGluZm8ucmVuZGVyLmNhbGxzLFxuICAgICAgICAgIHRyaWFuZ2xlczogaW5mby5yZW5kZXIudHJpYW5nbGVzLFxuICAgICAgICAgIHBvaW50czogaW5mby5yZW5kZXIucG9pbnRzLFxuICAgICAgICAgIGxpbmVzOiBpbmZvLnJlbmRlci5saW5lc1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBTY2VuZU1hbmFnZXIuaW5zdGFuY2UucmVuZGVyZXIub25VcGRhdGVTdGF0cyA9IHVuZGVmaW5lZFxuICAgIH1cbiAgfSwgW10pXG5cbiAgY29uc3QgdG9nZ2xlU3RhdHMgPSAoKSA9PiB7XG4gICAgc2V0VmlzaWJsZSghaXNWaXNpYmxlKVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcmluZyBzdGF0cyB2aWV3IGluIFZpZXdwb3J0VG9vbGJhciBhbmQgc2hvd3Mgd2hlbiBjbGljayBvbiB0b2dnbGVTdGF0c1xuICAgKlxuICAgKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gICAqL1xuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnRvb2xiYXJJbnB1dEdyb3VwICsgJyAnICsgc3R5bGVzLnBsYXlCdXR0b25Db250YWluZXJ9IGlkPVwic3RhdHNcIj5cbiAgICAgICAgPEluZm9Ub29sdGlwIGluZm89XCJUb2dnbGUgU3RhdHNcIj5cbiAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RvZ2dsZVN0YXRzfSBjbGFzc05hbWU9e3N0eWxlcy50b29sQnV0dG9uICsgJyAnICsgKGlzVmlzaWJsZSA/IHN0eWxlcy5zZWxlY3RlZCA6ICcnKX0+XG4gICAgICAgICAgICA8Q2hhcnRBcmVhIHNpemU9ezEyfSAvPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L0luZm9Ub29sdGlwPlxuICAgICAgPC9kaXY+XG4gICAgICB7aXNWaXNpYmxlICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5zdGF0c0NvbnRhaW5lcn0+XG4gICAgICAgICAgPGgzPnt0KCdlZGl0b3I6dmlld3BvcnQuc3RhdGUuaGVhZGVyJyl9PC9oMz5cbiAgICAgICAgICB7aW5mbyAmJiAoXG4gICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICB7dCgnZWRpdG9yOnZpZXdwb3J0LnN0YXRlLm1lbW9yeScpfVxuICAgICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAge3QoJ2VkaXRvcjp2aWV3cG9ydC5zdGF0ZS5nZW9tZXRyaWVzJyl9OiB7KGluZm8gYXMgYW55KS5nZW9tZXRyaWVzfVxuICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAge3QoJ2VkaXRvcjp2aWV3cG9ydC5zdGF0ZS50ZXh0dXJlcycpfTogeyhpbmZvIGFzIGFueSkudGV4dHVyZXN9XG4gICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICB7dCgnZWRpdG9yOnZpZXdwb3J0LnN0YXRlLnJlbmRlcicpfTpcbiAgICAgICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdlZGl0b3I6dmlld3BvcnQuc3RhdGUuRlBTJyl9OiB7TWF0aC5yb3VuZCgoaW5mbyBhcyBhbnkpLmZwcyl9XG4gICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICB7dCgnZWRpdG9yOnZpZXdwb3J0LnN0YXRlLmZyYW1lVGltZScpfToge01hdGgucm91bmQoKGluZm8gYXMgYW55KS5mcmFtZVRpbWUpfW1zXG4gICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICB7dCgnZWRpdG9yOnZpZXdwb3J0LnN0YXRlLmNhbGxzJyl9OiB7KGluZm8gYXMgYW55KS5jYWxsc31cbiAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgIHt0KCdlZGl0b3I6dmlld3BvcnQuc3RhdGUudHJpYW5nbGVzJyl9OiB7KGluZm8gYXMgYW55KS50cmlhbmdsZXN9XG4gICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICB7dCgnZWRpdG9yOnZpZXdwb3J0LnN0YXRlLnBvaW50cycpfTogeyhpbmZvIGFzIGFueSkucG9pbnRzfVxuICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAge3QoJ2VkaXRvcjp2aWV3cG9ydC5zdGF0ZS5saW5lcycpfTogeyhpbmZvIGFzIGFueSkubGluZXN9XG4gICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8Lz5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBTdGF0c1Rvb2xcbiIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzXCI7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTdHlsZWRJY29uQmFzZSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvc3R5bGVkLWljb24nO1xuZXhwb3J0IHZhciBTdW4gPSAvKiNfX1BVUkVfXyovUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAocHJvcHMsIHJlZikge1xuICB2YXIgYXR0cnMgPSB7XG4gICAgXCJmaWxsXCI6IFwiY3VycmVudENvbG9yXCIsXG4gICAgXCJ4bWxuc1wiOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgfTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN0eWxlZEljb25CYXNlLCBfZXh0ZW5kcyh7XG4gICAgaWNvbkF0dHJzOiBhdHRycyxcbiAgICBpY29uVmVydGljYWxBbGlnbjogXCJtaWRkbGVcIixcbiAgICBpY29uVmlld0JveDogXCIwIDAgMjQgMjRcIlxuICB9LCBwcm9wcywge1xuICAgIHJlZjogcmVmXG4gIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcInBhdGhcIiwge1xuICAgIGQ6IFwiTTYuOTkzIDEyYzAgMi43NjEgMi4yNDYgNS4wMDcgNS4wMDcgNS4wMDdzNS4wMDctMi4yNDYgNS4wMDctNS4wMDdTMTQuNzYxIDYuOTkzIDEyIDYuOTkzIDYuOTkzIDkuMjM5IDYuOTkzIDEyek0xMiA4Ljk5M2MxLjY1OCAwIDMuMDA3IDEuMzQ5IDMuMDA3IDMuMDA3UzEzLjY1OCAxNS4wMDcgMTIgMTUuMDA3IDguOTkzIDEzLjY1OCA4Ljk5MyAxMiAxMC4zNDIgOC45OTMgMTIgOC45OTN6TTEwLjk5OCAxOWgydjNoLTJ6bTAtMTdoMnYzaC0yem0tOSA5aDN2MmgtM3ptMTcgMGgzdjJoLTN6TTQuMjE5IDE4LjM2M2wyLjEyLTIuMTIyIDEuNDE1IDEuNDE0LTIuMTIgMi4xMjJ6TTE2LjI0IDYuMzQ0bDIuMTIyLTIuMTIyIDEuNDE0IDEuNDE0LTIuMTIyIDIuMTIyek02LjM0MiA3Ljc1OSA0LjIyIDUuNjM3bDEuNDE1LTEuNDE0IDIuMTIgMi4xMjJ6bTEzLjQzNCAxMC42MDUtMS40MTQgMS40MTQtMi4xMjItMi4xMjIgMS40MTQtMS40MTR6XCJcbiAgfSkpO1xufSk7XG5TdW4uZGlzcGxheU5hbWUgPSAnU3VuJztcbmV4cG9ydCB2YXIgU3VuRGltZW5zaW9ucyA9IHtcbiAgaGVpZ2h0OiAyNCxcbiAgd2lkdGg6IDI0XG59OyIsImltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgU3VuIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9ib3hpY29ucy1yZWd1bGFyL1N1bidcbmltcG9ydCB7IENvbW1hbmRNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vLi4vbWFuYWdlcnMvQ29tbWFuZE1hbmFnZXInXG5pbXBvcnQgRWRpdG9yRXZlbnRzIGZyb20gJy4uLy4uLy4uL2NvbnN0YW50cy9FZGl0b3JFdmVudHMnXG5pbXBvcnQgU2VsZWN0SW5wdXQgZnJvbSAnLi4vLi4vaW5wdXRzL1NlbGVjdElucHV0J1xuaW1wb3J0ICogYXMgc3R5bGVzIGZyb20gJy4uL3N0eWxlcy5tb2R1bGUuc2NzcydcbmltcG9ydCB7IFJlbmRlck1vZGVzLCBSZW5kZXJNb2Rlc1R5cGUgfSBmcm9tICcuLi8uLi8uLi9jb25zdGFudHMvUmVuZGVyTW9kZXMnXG5pbXBvcnQgeyBTY2VuZU1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9tYW5hZ2Vycy9TY2VuZU1hbmFnZXInXG5pbXBvcnQgeyBJbmZvVG9vbHRpcCB9IGZyb20gJy4uLy4uL2xheW91dC9Ub29sdGlwJ1xuXG5jb25zdCBSZW5kZXJNb2RlVG9vbCA9ICgpID0+IHtcbiAgY29uc3QgW3JlbmRlck1vZGUsIHNldFJlbmRlck1vZGVdID0gdXNlU3RhdGU8UmVuZGVyTW9kZXNUeXBlPihSZW5kZXJNb2Rlcy5VTkxJVClcblxuICBjb25zdCBvcHRpb25zID0gW11cblxuICBmb3IgKGxldCBrZXkgb2YgT2JqZWN0LmtleXMoUmVuZGVyTW9kZXMpKSB7XG4gICAgb3B0aW9ucy5wdXNoKHtcbiAgICAgIGxhYmVsOiBSZW5kZXJNb2Rlc1trZXldLFxuICAgICAgdmFsdWU6IFJlbmRlck1vZGVzW2tleV1cbiAgICB9KVxuICB9XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuUkVOREVSX01PREVfQ0hBTkdFRC50b1N0cmluZygpLCBjaGFuZ2VSZW5kZXJNb2RlKVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5SRU5ERVJfTU9ERV9DSEFOR0VELnRvU3RyaW5nKCksIGNoYW5nZVJlbmRlck1vZGUpXG4gICAgfVxuICB9LCBbXSlcblxuICBjb25zdCBvbkNoYW5nZVJlbmRlck1vZGUgPSB1c2VDYWxsYmFjaygobW9kZSkgPT4gU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnJlbmRlcmVyLmNoYW5nZVJlbmRlck1vZGUobW9kZSksIFtdKVxuICBjb25zdCBjaGFuZ2VSZW5kZXJNb2RlID0gdXNlQ2FsbGJhY2soKCkgPT4gc2V0UmVuZGVyTW9kZShTY2VuZU1hbmFnZXIuaW5zdGFuY2UucmVuZGVyZXIucmVuZGVyTW9kZSksIFtdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy50b29sYmFySW5wdXRHcm91cH0gaWQ9XCJ0cmFuc2Zvcm0tcGl2b3RcIj5cbiAgICAgIDxJbmZvVG9vbHRpcCBpbmZvPVwiUmVuZGVyIE1vZGVcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy50b29sSWNvbn0+XG4gICAgICAgICAgPFN1biBzaXplPXsxNn0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0luZm9Ub29sdGlwPlxuICAgICAgPFNlbGVjdElucHV0XG4gICAgICAgIGNsYXNzTmFtZT17c3R5bGVzLnNlbGVjdElucHV0fVxuICAgICAgICBvbkNoYW5nZT17b25DaGFuZ2VSZW5kZXJNb2RlfVxuICAgICAgICBvcHRpb25zPXtvcHRpb25zfVxuICAgICAgICB2YWx1ZT17cmVuZGVyTW9kZX1cbiAgICAgICAgY3JlYXRhYmxlPXtmYWxzZX1cbiAgICAgICAgaXNTZWFyY2hhYmxlPXtmYWxzZX1cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVuZGVyTW9kZVRvb2xcbiIsImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBFZGl0b3JFdmVudHMgZnJvbSAnLi4vLi4vY29uc3RhbnRzL0VkaXRvckV2ZW50cydcbmltcG9ydCBNYWluTWVudSBmcm9tICcuLi9tYWluTWVudSdcbmltcG9ydCBHcmlkVG9vbCBmcm9tICcuL3Rvb2xzL0dyaWRUb29sJ1xuaW1wb3J0IHsgQ29tbWFuZE1hbmFnZXIgfSBmcm9tICcuLi8uLi9tYW5hZ2Vycy9Db21tYW5kTWFuYWdlcidcbmltcG9ydCAqIGFzIHN0eWxlcyBmcm9tICcuL3N0eWxlcy5tb2R1bGUuc2NzcydcbmltcG9ydCBUcmFuc2Zvcm1Ub29sIGZyb20gJy4vdG9vbHMvVHJhbnNmb3JtVG9vbCdcbmltcG9ydCBUcmFuc2Zvcm1QaXZvdFRvb2wgZnJvbSAnLi90b29scy9UcmFuc2Zvcm1QaXZvdFRvb2wnXG5pbXBvcnQgVHJhbnNmb3JtU3BhY2VUb29sIGZyb20gJy4vdG9vbHMvVHJhbnNmb3JtU3BhY2VUb29sJ1xuaW1wb3J0IFRyYW5zZm9ybVNuYXBUb29sIGZyb20gJy4vdG9vbHMvVHJhbnNmb3JtU25hcFRvb2wnXG5pbXBvcnQgUGxheU1vZGVUb29sIGZyb20gJy4vdG9vbHMvUGxheU1vZGVUb29sJ1xuaW1wb3J0IFN0YXRzVG9vbCBmcm9tICcuL3Rvb2xzL1N0YXRzVG9vbCdcbmltcG9ydCBSZW5kZXJNb2RlVG9vbCBmcm9tICcuL3Rvb2xzL1JlbmRlck1vZGVUb29sJ1xuXG50eXBlIFRvb2xCYXJQcm9wcyA9IHtcbiAgbWVudT86IGFueVxufVxuXG4vKipcbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbnR5cGUgVG9vbEJhclN0YXRlID0ge1xuICBlZGl0b3JJbml0aWFsaXplZDogYm9vbGVhblxufVxuXG4vKipcbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sQmFyIGV4dGVuZHMgQ29tcG9uZW50PFRvb2xCYXJQcm9wcywgVG9vbEJhclN0YXRlPiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgZWRpdG9ySW5pdGlhbGl6ZWQ6IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlJFTkRFUkVSX0lOSVRJQUxJWkVELnRvU3RyaW5nKCksIHRoaXMub25SZW5kZXJlckluaXRpYWxpemVkKVxuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmFkZExpc3RlbmVyKEVkaXRvckV2ZW50cy5TRVRUSU5HU19DSEFOR0VELnRvU3RyaW5nKCksIHRoaXMub25Gb3JjZVVwZGF0ZSlcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5TRVRUSU5HU19DSEFOR0VELnRvU3RyaW5nKCksIHRoaXMub25Gb3JjZVVwZGF0ZSlcbiAgfVxuXG4gIG9uUmVuZGVyZXJJbml0aWFsaXplZCA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgZWRpdG9ySW5pdGlhbGl6ZWQ6IHRydWUgfSlcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihFZGl0b3JFdmVudHMuUkVOREVSRVJfSU5JVElBTElaRUQudG9TdHJpbmcoKSwgdGhpcy5vblJlbmRlcmVySW5pdGlhbGl6ZWQpXG4gIH1cblxuICBvbkZvcmNlVXBkYXRlID0gKCkgPT4ge1xuICAgIHRoaXMuZm9yY2VVcGRhdGUoKVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgZWRpdG9ySW5pdGlhbGl6ZWQgfSA9IHRoaXMuc3RhdGUgYXMgYW55XG5cbiAgICBpZiAoIWVkaXRvckluaXRpYWxpemVkKSB7XG4gICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e3N0eWxlcy50b29sYmFyQ29udGFpbmVyfSAvPlxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLnRvb2xiYXJDb250YWluZXJ9PlxuICAgICAgICA8TWFpbk1lbnUgY29tbWFuZHM9e3RoaXMucHJvcHMubWVudX0gLz5cbiAgICAgICAgPFRyYW5zZm9ybVRvb2wgLz5cbiAgICAgICAgPFRyYW5zZm9ybVNwYWNlVG9vbCAvPlxuICAgICAgICA8VHJhbnNmb3JtUGl2b3RUb29sIC8+XG4gICAgICAgIDxUcmFuc2Zvcm1TbmFwVG9vbCAvPlxuICAgICAgICA8R3JpZFRvb2wgLz5cbiAgICAgICAgPFJlbmRlck1vZGVUb29sIC8+XG4gICAgICAgIDxQbGF5TW9kZVRvb2wgLz5cbiAgICAgICAgPFN0YXRzVG9vbCAvPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRvb2xCYXJcbiIsImltcG9ydCB7IFRoZXJtb21ldGVyUXVhcnRlciB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvZmEtc29saWQnXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5cbi8qKlxuICogdGhlbWUgaXMgY29tbW9uIGNvbXBvbmVudCB1c2VkIGZvciBwcm92aWRpbmcgY29tbW9uIFVJIHByb3BlcnRpZXMuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge09iamVjdH1cbiAqL1xuY29uc3QgZWRpdG9yVGhlbWUgPSB7XG4gIGE6ICcnLFxuICBsYXRvOiBcIidMYXRvJywgc2Fucy1zZXJpZlwiLFxuICB6aWxsYTogXCInWmlsbGEgU2xhYicsIHNhbnMtc2VyaWZcIixcbiAgYmFja2dyb3VuZDogJ3JnYmEoMCwwLDAsMCknLFxuICBpbnB1dEJhY2tncm91bmQ6ICcjMDcwODA5JyxcbiAgYm9yZGVyOiAnIzVENjQ2QycsXG4gIHBhbmVsOiAnIzI4MkMzMScsXG4gIHBhbmVsMjogJyMzQTQwNDgnLFxuICBzZWxlY3RlZDogJyMwMDZFRkYnLFxuICBzZWxlY3RlZFRleHQ6ICcjZmZmJyxcbiAgaG92ZXI6ICcjNEI1NTYyJyxcbiAgaG92ZXIyOiAnIzYzNkY4MCcsXG4gIHRleHQ6ICcjRkZGRkZGJyxcbiAgdGV4dDI6ICcjOUZBNEI1JyxcbiAgZHJvcGRvd246ICcjMDAwMDAwJyxcbiAgcmVkOiAnI0Y0NDMzNicsXG4gIHBpbms6ICcjRTkxRTYzJyxcbiAgcHVycGxlOiAnIzlDMjdCMCcsXG4gIGRlZXBQdXJwbGU6ICcjNjczQUI3JyxcbiAgaW5kaWdvOiAnIzNGNTFCNScsXG4gIGJsdWU6ICcjMDA2RUZGJyxcbiAgbGlnaHRCbHVlOiAnIzAzQTlGNCcsXG4gIGN5YW46ICcjMDBCQ0Q0JyxcbiAgdGVhbDogJyMwMDk2ODgnLFxuICBncmVlbjogJyM0Q0FGNTAnLFxuICBsaWdodEdyZWVuOiAnIzhCQzM0QScsXG4gIGxpbWU6ICcjQ0REQzM5JyxcbiAgeWVsbG93OiAnI0ZGRUIzQicsXG4gIGFtYmVyOiAnI0ZGQzEwNycsXG4gIG9yYW5nZTogJyNGRjk4MDAnLFxuICBkZWVwT3JhbmdlOiAnI0ZGNTcyMicsXG4gIGJyb3duOiAnIzc5NTU0OCcsXG4gIGJsdWVIb3ZlcjogJyM0RDkzRjEnLFxuICBibHVlUHJlc3NlZDogJyMwNTU0QkMnLFxuICBkaXNhYmxlZDogJyMyMjIyMjInLFxuICBkaXNhYmxlZFRleHQ6ICdncmV5JyxcbiAgZGVlbXBoYXNpemVkOiAnZ3JleScsXG4gIHRvb2xiYXI6ICdyZ2JhKDAsIDAsIDAsIDAuMCknLFxuICB0b29sYmFyMjogJ3JnYmEoMCwgMCwgMCwgMC4wKScsXG4gIGhlYWRlcjogJyMxYjFiMWInLFxuICB3aGl0ZTogJyNmZmYnLFxuICBzaGFkb3cxNTogJzBweCA0cHggNHB4ICByZ2JhKDAsIDAsIDAsIDAuMTUpJyxcbiAgc2hhZG93MzA6ICcwcHggNHB4IDRweCAgcmdiYSgwLCAwLCAwLCAwLjMpJyxcbiAgYm9yZGVyU3R5bGU6ICcxcHggc29saWQgIzVENjQ2Qydcbn1cblxuLyoqXG4gKiB0aGVtZSBjcmVhdGluZyBjb2xvciBjaGFydCBmb3IgYXBwbGljYXRpb24uXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge09iamVjdH1cbiAqL1xuZWRpdG9yVGhlbWVbJ2NoYXJ0Q29sb3JzJ10gPSBbXG4gIGVkaXRvclRoZW1lLnJlZCxcbiAgZWRpdG9yVGhlbWUucGluayxcbiAgZWRpdG9yVGhlbWUucHVycGxlLFxuICBlZGl0b3JUaGVtZS5kZWVwUHVycGxlLFxuICBlZGl0b3JUaGVtZS5pbmRpZ28sXG4gIGVkaXRvclRoZW1lLmJsdWUsXG4gIGVkaXRvclRoZW1lLmxpZ2h0Qmx1ZSxcbiAgZWRpdG9yVGhlbWUuY3lhbixcbiAgZWRpdG9yVGhlbWUudGVhbCxcbiAgZWRpdG9yVGhlbWUuZ3JlZW4sXG4gIGVkaXRvclRoZW1lLmxpZ2h0R3JlZW4sXG4gIGVkaXRvclRoZW1lLmxpbWUsXG4gIGVkaXRvclRoZW1lLnllbGxvdyxcbiAgZWRpdG9yVGhlbWUuYW1iZXIsXG4gIGVkaXRvclRoZW1lLm9yYW5nZSxcbiAgZWRpdG9yVGhlbWUuZGVlcE9yYW5nZSxcbiAgZWRpdG9yVGhlbWUuYnJvd25cbl1cblxuZXhwb3J0IGNvbnN0IFRoZW1lQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoZWRpdG9yVGhlbWUpXG5cbmV4cG9ydCB0eXBlIEVkaXRvclRoZW1lID0gdHlwZW9mIGVkaXRvclRoZW1lXG5cbmV4cG9ydCBkZWZhdWx0IGVkaXRvclRoZW1lXG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlRHJvcCB9IGZyb20gJ3JlYWN0LWRuZCdcbmltcG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSAncmVhY3QtaTE4bmV4dCdcbmltcG9ydCB7IFRyYW5zZm9ybU1vZGUgfSBmcm9tICdAeHJlbmdpbmUvZW5naW5lL3NyYy9zY2VuZS9jb25zdGFudHMvdHJhbnNmb3JtQ29uc3RhbnRzJ1xuaW1wb3J0IEFzc2V0RHJvcFpvbmUgZnJvbSAnLi4vYXNzZXRzL0Fzc2V0RHJvcFpvbmUnXG5pbXBvcnQgeyBhZGRBc3NldEF0Q3Vyc29yUG9zaXRpb25PbkRyb3AgfSBmcm9tICcuLi9kbmQnXG5pbXBvcnQgKiBhcyBzdHlsZXMgZnJvbSAnLi9WaWV3cG9ydC5tb2R1bGUuc2NzcydcbmltcG9ydCBlZGl0b3JUaGVtZSBmcm9tICcuLi90aGVtZSdcbmltcG9ydCBFZGl0b3JFdmVudHMgZnJvbSAnLi4vLi4vY29uc3RhbnRzL0VkaXRvckV2ZW50cydcbmltcG9ydCB7IENvbW1hbmRNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vbWFuYWdlcnMvQ29tbWFuZE1hbmFnZXInXG5pbXBvcnQgeyBTY2VuZU1hbmFnZXIgfSBmcm9tICcuLi8uLi9tYW5hZ2Vycy9TY2VuZU1hbmFnZXInXG5pbXBvcnQgeyBDb250cm9sTWFuYWdlciB9IGZyb20gJy4uLy4uL21hbmFnZXJzL0NvbnRyb2xNYW5hZ2VyJ1xuaW1wb3J0IHsgQXNzZXRUeXBlcywgSXRlbVR5cGVzIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL0Fzc2V0VHlwZXMnXG5cbi8qKlxuICogVmlld3BvcnRQYW5lbENvbnRhaW5lciB1c2VkIHRvIHJlbmRlciB2aWV3cG9ydC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFZpZXdwb3J0UGFuZWxDb250YWluZXIoKSB7XG4gIGNvbnN0IGNhbnZhc1JlZiA9IHVzZVJlZjxIVE1MQ2FudmFzRWxlbWVudD4oKVxuICBjb25zdCBbZmx5TW9kZUVuYWJsZWQsIHNldEZseU1vZGVFbmFibGVkXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbb2JqZWN0U2VsZWN0ZWQsIHNldE9iamVjdFNlbGVjdGVkXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbdHJhbnNmb3JtTW9kZSwgc2V0VHJhbnNmb3JtTW9kZV0gPSB1c2VTdGF0ZShudWxsKVxuICAvLyBjb25zdCBbc2hvd1N0YXRzLCBzZXRTaG93U3RhdHNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCB7IHQgfSA9IHVzZVRyYW5zbGF0aW9uKClcblxuICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZWQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0T2JqZWN0U2VsZWN0ZWQoQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2Uuc2VsZWN0ZWQubGVuZ3RoID4gMClcbiAgfSwgW10pXG5cbiAgY29uc3Qgb25GbHlNb2RlQ2hhbmdlZCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRGbHlNb2RlRW5hYmxlZChDb250cm9sTWFuYWdlci5pbnN0YW5jZS5mbHlDb250cm9scy5lbmFibGVkKVxuICB9LCBbXSlcblxuICBjb25zdCBvblRyYW5zZm9ybU1vZGVDaGFuZ2VkID0gdXNlQ2FsbGJhY2soKG1vZGUpID0+IHtcbiAgICBzZXRUcmFuc2Zvcm1Nb2RlKG1vZGUpXG4gIH0sIFtdKVxuXG4gIGNvbnN0IG9uRWRpdG9ySW5pdGlhbGl6ZWQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlNFTEVDVElPTl9DSEFOR0VELnRvU3RyaW5nKCksIG9uU2VsZWN0aW9uQ2hhbmdlZClcbiAgICBDb250cm9sTWFuYWdlci5pbnN0YW5jZS5lZGl0b3JDb250cm9scy5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuRkxZX01PREVfQ0hBTkdFRC50b1N0cmluZygpLCBvbkZseU1vZGVDaGFuZ2VkKVxuICAgIENvbnRyb2xNYW5hZ2VyLmluc3RhbmNlLmVkaXRvckNvbnRyb2xzLmFkZExpc3RlbmVyKFxuICAgICAgRWRpdG9yRXZlbnRzLlRSQU5TRlJPTV9NT0RFX0NIQU5HRUQudG9TdHJpbmcoKSxcbiAgICAgIG9uVHJhbnNmb3JtTW9kZUNoYW5nZWRcbiAgICApXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlJFTkRFUkVSX0lOSVRJQUxJWkVELnRvU3RyaW5nKCksIG9uRWRpdG9ySW5pdGlhbGl6ZWQpXG4gIH0sIFtdKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaW5pdFJlbmRlcmVyID0gKCkgPT4ge1xuICAgICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLmluaXRpYWxpemVSZW5kZXJlcihjYW52YXNSZWYuY3VycmVudClcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmFkZExpc3RlbmVyKEVkaXRvckV2ZW50cy5QUk9KRUNUX0xPQURFRC50b1N0cmluZygpLCBpbml0UmVuZGVyZXIpXG4gICAgfVxuXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlJFTkRFUkVSX0lOSVRJQUxJWkVELnRvU3RyaW5nKCksIG9uRWRpdG9ySW5pdGlhbGl6ZWQpXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlBST0pFQ1RfTE9BREVELnRvU3RyaW5nKCksIGluaXRSZW5kZXJlcilcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihFZGl0b3JFdmVudHMuU0VMRUNUSU9OX0NIQU5HRUQudG9TdHJpbmcoKSwgb25TZWxlY3Rpb25DaGFuZ2VkKVxuXG4gICAgICBpZiAoQ29udHJvbE1hbmFnZXIuaW5zdGFuY2UuZWRpdG9yQ29udHJvbHMpIHtcbiAgICAgICAgQ29udHJvbE1hbmFnZXIuaW5zdGFuY2UuZWRpdG9yQ29udHJvbHMucmVtb3ZlTGlzdGVuZXIoXG4gICAgICAgICAgRWRpdG9yRXZlbnRzLkZMWV9NT0RFX0NIQU5HRUQudG9TdHJpbmcoKSxcbiAgICAgICAgICBvbkZseU1vZGVDaGFuZ2VkXG4gICAgICAgIClcbiAgICAgICAgQ29udHJvbE1hbmFnZXIuaW5zdGFuY2UuZWRpdG9yQ29udHJvbHMucmVtb3ZlTGlzdGVuZXIoXG4gICAgICAgICAgRWRpdG9yRXZlbnRzLlRSQU5TRlJPTV9NT0RFX0NIQU5HRUQudG9TdHJpbmcoKSxcbiAgICAgICAgICBvblRyYW5zZm9ybU1vZGVDaGFuZ2VkXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgaWYgKFNjZW5lTWFuYWdlci5pbnN0YW5jZS5yZW5kZXJlcikge1xuICAgICAgICBTY2VuZU1hbmFnZXIuaW5zdGFuY2UucmVuZGVyZXIuZGlzcG9zZSgpXG4gICAgICB9XG4gICAgfVxuICB9LCBbXSlcblxuICBjb25zdCBbeyBjYW5Ecm9wLCBpc092ZXIgfSwgZHJvcFJlZl0gPSB1c2VEcm9wKHtcbiAgICBhY2NlcHQ6IFtJdGVtVHlwZXMuTm9kZSwgLi4uQXNzZXRUeXBlc10sXG4gICAgZHJvcChpdGVtOiBhbnksIG1vbml0b3IpIHtcbiAgICAgIGNvbnN0IG1vdXNlUG9zID0gbW9uaXRvci5nZXRDbGllbnRPZmZzZXQoKVxuXG4gICAgICBpZiAoaXRlbS50eXBlID09PSBJdGVtVHlwZXMuTm9kZSkge1xuICAgICAgICBpZiAoaXRlbS5tdWx0aXBsZSkge1xuICAgICAgICAgIFNjZW5lTWFuYWdlci5pbnN0YW5jZS5yZXBhcmVudFRvU2NlbmVBdEN1cnNvclBvc2l0aW9uKGl0ZW0udmFsdWUsIG1vdXNlUG9zKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIFNjZW5lTWFuYWdlci5pbnN0YW5jZS5yZXBhcmVudFRvU2NlbmVBdEN1cnNvclBvc2l0aW9uKFtpdGVtLnZhbHVlXSwgbW91c2VQb3MpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGFkZEFzc2V0QXRDdXJzb3JQb3NpdGlvbk9uRHJvcChpdGVtLCBtb3VzZVBvcylcbiAgICB9LFxuICAgIGNvbGxlY3Q6IChtb25pdG9yKSA9PiAoe1xuICAgICAgY2FuRHJvcDogbW9uaXRvci5jYW5Ecm9wKCksXG4gICAgICBpc092ZXI6IG1vbml0b3IuaXNPdmVyKClcbiAgICB9KVxuICB9KVxuXG4gIGNvbnN0IG9uQWZ0ZXJVcGxvYWRBc3NldHMgPSB1c2VDYWxsYmFjaygoYXNzZXRzKSA9PiB7XG4gICAgUHJvbWlzZS5hbGwoXG4gICAgICBhc3NldHMubWFwKCh7IHVybCwgbmFtZSwgaWQgfSkgPT4ge1xuICAgICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRNZWRpYSh7IHVybCwgbmFtZSwgaWQgfSlcbiAgICAgIH0pXG4gICAgKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5lbWl0RXZlbnQoRWRpdG9yRXZlbnRzLkVSUk9SLCBlcnIpXG4gICAgfSlcbiAgfSwgW10pXG5cbiAgbGV0IGNvbnRyb2xzVGV4dFxuXG4gIGlmIChmbHlNb2RlRW5hYmxlZCkge1xuICAgIGNvbnRyb2xzVGV4dCA9XG4gICAgICAnW1ddW0FdW1NdW0RdICcgKyB0KCdlZGl0b3I6dmlld3BvcnQuY29tbWFuZC5tb3ZlY2FtZXJhJykgKyAnIHwgW1NoaWZ0XSAnICsgdCgnZWRpdG9yOnZpZXdwb3J0LmNvbW1hbmQuZmx5RmFzdCcpXG4gIH0gZWxzZSB7XG4gICAgY29udHJvbHNUZXh0ID1cbiAgICAgICdbTE1CXSAnICtcbiAgICAgIHQoJ2VkaXRvcjp2aWV3cG9ydC5jb21tYW5kLm9yYml0JykgK1xuICAgICAgJyB8IFtNTUJdICcgK1xuICAgICAgdCgnZWRpdG9yOnZpZXdwb3J0LmNvbW1hbmQucGFuJykgK1xuICAgICAgJyB8IFtSTUJdICcgK1xuICAgICAgdCgnZWRpdG9yOnZpZXdwb3J0LmNvbW1hbmQuZmx5JylcbiAgfVxuXG4gIGlmIChvYmplY3RTZWxlY3RlZCkge1xuICAgIGNvbnRyb2xzVGV4dCArPVxuICAgICAgJyB8IFtGXSAnICtcbiAgICAgIHQoJ2VkaXRvcjp2aWV3cG9ydC5jb21tYW5kLmZvY3VzJykgK1xuICAgICAgJyB8IFtRXSAnICtcbiAgICAgIHQoJ2VkaXRvcjp2aWV3cG9ydC5jb21tYW5kLnJvdGF0ZUxlZnQnKSArXG4gICAgICAnIHwgW0VdICcgK1xuICAgICAgdCgnZWRpdG9yOnZpZXdwb3J0LmNvbW1hbmQucm90YXRlUmlnaHQnKVxuICB9XG5cbiAgaWYgKHRyYW5zZm9ybU1vZGUgPT09IFRyYW5zZm9ybU1vZGUuUGxhY2VtZW50KSB7XG4gICAgY29udHJvbHNUZXh0ICs9ICcgfCBbRVNDIC8gR10gJyArIHQoJ2VkaXRvcjp2aWV3cG9ydC5jb21tYW5kLmNhbmNlbFBsYWNlbWVudCcpXG4gIH0gZWxzZSBpZiAodHJhbnNmb3JtTW9kZSA9PT0gVHJhbnNmb3JtTW9kZS5HcmFiKSB7XG4gICAgY29udHJvbHNUZXh0ICs9XG4gICAgICAnIHwgW1NoaWZ0ICsgQ2xpY2tdICcgK1xuICAgICAgdCgnZWRpdG9yOnZpZXdwb3J0LmNvbW1hbmQucGxhY2VEdXBsaWNhdGUnKSArXG4gICAgICAnIHwgW0VTQyAvIEddICcgK1xuICAgICAgdCgnZWRpdG9yOnZpZXdwb3J0LmNvbW1hbmQuY2FuY2VsR3JhYicpXG4gIH0gZWxzZSBpZiAob2JqZWN0U2VsZWN0ZWQpIHtcbiAgICBjb250cm9sc1RleHQgKz1cbiAgICAgICd8IFtHXSAnICsgdCgnZWRpdG9yOnZpZXdwb3J0LmNvbW1hbmQuZ3JhYicpICsgJyB8IFtFU0NdICcgKyB0KCdlZGl0b3I6dmlld3BvcnQuY29tbWFuZC5kZXNlbGVjdEFsbCcpXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT17c3R5bGVzLnZpZXdwb3J0Q29udGFpbmVyfVxuICAgICAgc3R5bGU9e3tcbiAgICAgICAgYm9yZGVyQ29sb3I6IGlzT3ZlciA/IChjYW5Ecm9wID8gZWRpdG9yVGhlbWUuYmx1ZSA6IGVkaXRvclRoZW1lLnJlZCkgOiAndHJhbnNwYXJlbnQnXG4gICAgICB9fVxuICAgICAgcmVmPXtkcm9wUmVmfVxuICAgID5cbiAgICAgIDxjYW52YXMgY2xhc3NOYW1lPXtzdHlsZXMudmlld3BvcnRDYW52YXN9IHJlZj17Y2FudmFzUmVmfSB0YWJJbmRleD17LTF9IGlkPVwidmlld3BvcnQtY2FudmFzXCIgLz5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMuY29udHJvbHNUZXh0fT57Y29udHJvbHNUZXh0fTwvZGl2PlxuICAgICAgPEFzc2V0RHJvcFpvbmUgYWZ0ZXJVcGxvYWQ9e29uQWZ0ZXJVcGxvYWRBc3NldHN9IC8+XG4gICAgPC9kaXY+XG4gIClcbn1cbmV4cG9ydCBkZWZhdWx0IFZpZXdwb3J0UGFuZWxDb250YWluZXJcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgc3R5bGVkLCB7IFRoZW1lQ29udGV4dCB9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJ1xuaW1wb3J0IERpYWxvZyBmcm9tICcuL0RpYWxvZydcbmltcG9ydCB7IGJ5dGVzVG9TaXplIH0gZnJvbSAnLi4vLi4vZnVuY3Rpb25zL3V0aWxzJ1xuaW1wb3J0IGkxOG4gZnJvbSAnaTE4bmV4dCdcbmltcG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSAncmVhY3QtaTE4bmV4dCdcblxuLyoqXG4gKiBDb2xvcmVkVGV4dCB1c2VkIHRvIHByb3ZpZGUgY29sb3IgcHJvcGVydHkgRHluYW1pY2FsbHkuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IENvbG9yZWRUZXh0ID0gKHN0eWxlZCBhcyBhbnkpLnNwYW5gXG4gIGNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMuY29sb3J9O1xuYFxuXG4vKipcbiAqIFBlcmZvcm1hbmNlSXRlbUNvbnRhaW5lciB1c2VkIGFzIHdyYXBwZXIgZWxlbWVudCBmb3IgUGVyZm9ybWFuY2Ugc2NvcmUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge1N0eWxlZCBjb21wb25lbnR9XG4gKi9cbmNvbnN0IFBlcmZvcm1hbmNlSXRlbUNvbnRhaW5lciA9IChzdHlsZWQgYXMgYW55KS5saWBcbiAgZGlzcGxheTogZmxleDtcbiAgbWluLWhlaWdodDogMTAwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS50b29sYmFyfTtcbiAgYm9yZGVyOiAxcHggc29saWQgJHsocHJvcHMpID0+IHByb3BzLnRoZW1lLnBhbmVsfTtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBtYXJnaW46IDRweDtcbiAgY29sb3I6IHdoaXRlO1xuICBtYXgtd2lkdGg6IDU2MHB4O1xuXG4gICYgPiA6Zmlyc3QtY2hpbGQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHdpZHRoOiAxMDBweDtcbiAgfVxuXG4gICYgPiA6bGFzdC1jaGlsZCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGZsZXg6IDE7XG4gICAgcGFkZGluZzogMTJweDtcbiAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS5wYW5lbDJ9O1xuICB9XG5cbiAgaDUge1xuICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgfVxuXG4gIGg2IHtcbiAgICBmb250LXNpemU6IDE2cHg7XG4gIH1cblxuICBhIHtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIGNvbG9yOiAkeyhwcm9wcykgPT4gcHJvcHMudGhlbWUuYmx1ZX07XG4gIH1cblxuICBwIHtcbiAgICBtYXJnaW46IDA7XG4gIH1cbmBcblxuLyoqXG4gKiBQZXJmb3JtYW5jZUNoZWNrSXRlbSB1c2VkIHRvIHJlbmRlciB2aWV3IGZvciBQZXJmb3JtYW5jZUNoZWNrRGlhbG9nLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAgICAgICB7U3RyaW5nfSBzY29yZVxuICogQHBhcmFtICAgICAgIHtTdHJpbmd9IHNjb3JlQ29sb3JcbiAqIEBwYXJhbSAgICAgICB7U3RyaW5nfSB0aXRsZVxuICogQHBhcmFtICAgICAgIHtTdHJpbmd9IGRlc2NyaXB0aW9uXG4gKiBAcGFyYW0gICAgICAge1N0cmluZ30gbGVhcm5Nb3JlVXJsXG4gKiBAcGFyYW0gICAgICAge25vZGV9IGNoaWxkcmVuXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gUGVyZm9ybWFuY2VDaGVja0l0ZW0oeyBzY29yZSwgc2NvcmVDb2xvciwgdGl0bGUsIGRlc2NyaXB0aW9uLCBsZWFybk1vcmVVcmwsIGNoaWxkcmVuIH0pIHtcbiAgY29uc3QgeyB0IH0gPSB1c2VUcmFuc2xhdGlvbigpXG4gIHJldHVybiAoXG4gICAgPFBlcmZvcm1hbmNlSXRlbUNvbnRhaW5lcj5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxDb2xvcmVkVGV4dCBhcz1cImg1XCIgY29sb3I9e3Njb3JlQ29sb3J9PlxuICAgICAgICAgIHtzY29yZX1cbiAgICAgICAgPC9Db2xvcmVkVGV4dD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdj5cbiAgICAgICAgPGg2PlxuICAgICAgICAgIHt0aXRsZX06IHtjaGlsZHJlbn1cbiAgICAgICAgPC9oNj5cbiAgICAgICAgPHA+XG4gICAgICAgICAge2Rlc2NyaXB0aW9ufXsnICd9XG4gICAgICAgICAgPGEgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9e2xlYXJuTW9yZVVybH0+XG4gICAgICAgICAgICB7dCgnZWRpdG9yOmRpYWxvZy5wZXJmb3JtYW5jZS5sZWFybk1vcmUnKX1cbiAgICAgICAgICA8L2E+XG4gICAgICAgIDwvcD5cbiAgICAgIDwvZGl2PlxuICAgIDwvUGVyZm9ybWFuY2VJdGVtQ29udGFpbmVyPlxuICApXG59XG5cbi8qKlxuICogaW5pdGlhbGl6aW5nIHNjb3JlVG9WYWx1ZSB3aXRoIG9iamVjdCBjb250YWluaW5nIExvdyBNZWRpdW0gSGlnaC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5jb25zdCBzY29yZVRvVmFsdWUgPSB7XG4gIExvdzogMCxcbiAgTWVkaXVtOiAxLFxuICBIaWdoOiAyXG59XG5cbi8qKlxuICogUGVyZm9ybWFuY2VDaGVja0RpYWxvZyB1c2VkIHJlbmRlciB2aWV3IGNvbnRhaW5pbmcgUGVyZm9ybWFuY2Ugc2NvcmVzLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAgICAgICB7U3RyaW5nfSBzY29yZXNcbiAqIEBwYXJhbSAgICAgICB7YW55fSByZXN0XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFBlcmZvcm1hbmNlQ2hlY2tEaWFsb2coeyBzY29yZXMsIC4uLnJlc3QgfSkge1xuICBjb25zdCB0aGVtZTogYW55ID0gdXNlQ29udGV4dChUaGVtZUNvbnRleHQpXG4gIGNvbnN0IHsgdCB9ID0gdXNlVHJhbnNsYXRpb24oKVxuXG4gIC8vaW5pdGlhbGl6aW5nIHNjb3JlVG9Db2xvciB1c2luZyB0aGVtZVxuICBjb25zdCBzY29yZVRvQ29sb3IgPSB7XG4gICAgTG93OiB0aGVtZS5ncmVlbixcbiAgICBNZWRpdW06IHRoZW1lLnllbGxvdyxcbiAgICBIaWdoOiB0aGVtZS5yZWRcbiAgfVxuXG4gIC8vIGluaXRpYWxpemluZyB0ZXh0dXJlc1Njb3JlIHVzaW5nIHNjb3Jlcy50ZXh0dXJlcy5sYXJnZVRleHR1cmVzU2NvcmUgaWYgc2NvcmVUb1ZhbHVlIGNvbnRhaW5zIHNjb3Jlcy50ZXh0dXJlcy5sYXJnZVRleHR1cmVzU2NvcmVcbiAgLy8gZWxzZSBzZXR0aW5nIHNjb3Jlcy50ZXh0dXJlcy5zY29yZVxuICBjb25zdCB0ZXh0dXJlc1Njb3JlID1cbiAgICBzY29yZVRvVmFsdWVbc2NvcmVzLnRleHR1cmVzLmxhcmdlVGV4dHVyZXNTY29yZV0gPiBzY29yZVRvVmFsdWVbc2NvcmVzLnRleHR1cmVzLnNjb3JlXVxuICAgICAgPyBzY29yZXMudGV4dHVyZXMubGFyZ2VUZXh0dXJlc1Njb3JlXG4gICAgICA6IHNjb3Jlcy50ZXh0dXJlcy5zY29yZVxuICAvLyByZXR1cmluZyB2aWV3IGNvbnRhaW5pbmcgUGVyZm9ybWFuY2VcbiAgcmV0dXJuIChcbiAgICA8RGlhbG9nIHsuLi5yZXN0fT5cbiAgICAgIDx1bD5cbiAgICAgICAgPFBlcmZvcm1hbmNlQ2hlY2tJdGVtXG4gICAgICAgICAgdGl0bGU9e3QoJ2VkaXRvcjpkaWFsb2cucGVyZm9ybWFuY2UubGJsLXBvbHljb3VudCcpfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdlZGl0b3I6ZGlhbG9nLnBlcmZvcm1hbmNlLmluZm8tcG9seWNvdW50Jyl9XG4gICAgICAgICAgbGVhcm5Nb3JlVXJsPVwiaHR0czovL3hyZW5naW5lLmRldi9kb2NzL2VkaXRvci1vcHRpbWl6YXRpb24uaHRtbFwiXG4gICAgICAgICAgc2NvcmU9e3Njb3Jlcy5wb2x5Z29ucy5zY29yZX1cbiAgICAgICAgICBzY29yZUNvbG9yPXtzY29yZVRvQ29sb3Jbc2NvcmVzLnBvbHlnb25zLnNjb3JlXX1cbiAgICAgICAgPlxuICAgICAgICAgIDxDb2xvcmVkVGV4dCBjb2xvcj17c2NvcmVUb0NvbG9yW3Njb3Jlcy5wb2x5Z29ucy5zY29yZV19PlxuICAgICAgICAgICAge3QoJ2VkaXRvcjpkaWFsb2cucGVyZm9ybWFuY2UudHh0LXBvbHljb3VudCcsIHsgY291bnQ6IHNjb3Jlcy5wb2x5Z29ucy52YWx1ZS50b0xvY2FsZVN0cmluZygpIH0pfVxuICAgICAgICAgIDwvQ29sb3JlZFRleHQ+XG4gICAgICAgIDwvUGVyZm9ybWFuY2VDaGVja0l0ZW0+XG4gICAgICAgIDxQZXJmb3JtYW5jZUNoZWNrSXRlbVxuICAgICAgICAgIHRpdGxlPXt0KCdlZGl0b3I6ZGlhbG9nLnBlcmZvcm1hbmNlLmxibC1tYXRlcmlhbCcpfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdlZGl0b3I6ZGlhbG9nLnBlcmZvcm1hbmNlLmluZm8tbWF0ZXJpYWwnKX1cbiAgICAgICAgICBsZWFybk1vcmVVcmw9XCJodHRzOi8veHJlbmdpbmUuZGV2L2RvY3MvZWRpdG9yLW9wdGltaXphdGlvbi5odG1sXCJcbiAgICAgICAgICBzY29yZT17c2NvcmVzLm1hdGVyaWFscy5zY29yZX1cbiAgICAgICAgICBzY29yZUNvbG9yPXtzY29yZVRvQ29sb3Jbc2NvcmVzLm1hdGVyaWFscy5zY29yZV19XG4gICAgICAgID5cbiAgICAgICAgICA8Q29sb3JlZFRleHQgY29sb3I9e3Njb3JlVG9Db2xvcltzY29yZXMubWF0ZXJpYWxzLnNjb3JlXX0+XG4gICAgICAgICAgICB7dCgnZWRpdG9yOmRpYWxvZy5wZXJmb3JtYW5jZS50eHQtbWF0ZXJpYWwnLCB7IGNvdW50OiBzY29yZXMubWF0ZXJpYWxzLnZhbHVlIH0pfVxuICAgICAgICAgIDwvQ29sb3JlZFRleHQ+XG4gICAgICAgIDwvUGVyZm9ybWFuY2VDaGVja0l0ZW0+XG4gICAgICAgIDxQZXJmb3JtYW5jZUNoZWNrSXRlbVxuICAgICAgICAgIHRpdGxlPXt0KCdlZGl0b3I6ZGlhbG9nLnBlcmZvcm1hbmNlLmxibC10ZXh0dXJlJyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoJ2VkaXRvcjpkaWFsb2cucGVyZm9ybWFuY2UuaW5mby10ZXh0dXJlJyl9XG4gICAgICAgICAgbGVhcm5Nb3JlVXJsPVwiaHR0czovL3hyZW5naW5lLmRldi9kb2NzL2VkaXRvci1vcHRpbWl6YXRpb24uaHRtbFwiXG4gICAgICAgICAgc2NvcmU9e3RleHR1cmVzU2NvcmV9XG4gICAgICAgICAgc2NvcmVDb2xvcj17c2NvcmVUb0NvbG9yW3RleHR1cmVzU2NvcmVdfVxuICAgICAgICA+XG4gICAgICAgICAgPENvbG9yZWRUZXh0IGNvbG9yPXtzY29yZVRvQ29sb3Jbc2NvcmVzLnRleHR1cmVzLnNjb3JlXX0+XG4gICAgICAgICAgICB7dCgnZWRpdG9yOmRpYWxvZy5wZXJmb3JtYW5jZS50eHQtcmFtJywgeyBjb3VudDogYnl0ZXNUb1NpemUoc2NvcmVzLnRleHR1cmVzLnZhbHVlKSBhcyBhbnkgfSl9XG4gICAgICAgICAgPC9Db2xvcmVkVGV4dD5cbiAgICAgICAgICAseycgJ31cbiAgICAgICAgICA8Q29sb3JlZFRleHQgY29sb3I9e3Njb3JlVG9Db2xvcltzY29yZXMudGV4dHVyZXMubGFyZ2VUZXh0dXJlc1Njb3JlXX0+XG4gICAgICAgICAgICB7dCgnZWRpdG9yOmRpYWxvZy5wZXJmb3JtYW5jZS50eHQtdGV4dHVyZScsIHsgY291bnQ6IHNjb3Jlcy50ZXh0dXJlcy5sYXJnZVRleHR1cmVzVmFsdWUgfSl9XG4gICAgICAgICAgPC9Db2xvcmVkVGV4dD5cbiAgICAgICAgPC9QZXJmb3JtYW5jZUNoZWNrSXRlbT5cbiAgICAgICAgPFBlcmZvcm1hbmNlQ2hlY2tJdGVtXG4gICAgICAgICAgdGl0bGU9e3QoJ2VkaXRvcjpkaWFsb2cucGVyZm9ybWFuY2UubGJsLWxpZ2h0cycpfVxuICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdlZGl0b3I6ZGlhbG9nLnBlcmZvcm1hbmNlLmluZm8tbGlnaHRzJyl9XG4gICAgICAgICAgbGVhcm5Nb3JlVXJsPVwiaHR0czovL3hyZW5naW5lLmRldi9kb2NzL2VkaXRvci1vcHRpbWl6YXRpb24uaHRtbFwiXG4gICAgICAgICAgc2NvcmU9e3Njb3Jlcy5saWdodHMuc2NvcmV9XG4gICAgICAgICAgc2NvcmVDb2xvcj17c2NvcmVUb0NvbG9yW3Njb3Jlcy5saWdodHMuc2NvcmVdfVxuICAgICAgICA+XG4gICAgICAgICAgPENvbG9yZWRUZXh0IGNvbG9yPXtzY29yZVRvQ29sb3Jbc2NvcmVzLmxpZ2h0cy5zY29yZV19PlxuICAgICAgICAgICAge3QoJ2VkaXRvcjpkaWFsb2cucGVyZm9ybWFuY2UudHh0LWxpZ2h0cycsIHsgY291bnQ6IHNjb3Jlcy5saWdodHMudmFsdWUgfSl9XG4gICAgICAgICAgPC9Db2xvcmVkVGV4dD5cbiAgICAgICAgPC9QZXJmb3JtYW5jZUNoZWNrSXRlbT5cbiAgICAgICAgPFBlcmZvcm1hbmNlQ2hlY2tJdGVtXG4gICAgICAgICAgdGl0bGU9e3QoJ2VkaXRvcjpkaWFsb2cucGVyZm9ybWFuY2UubGJsLWZpbGVTaXplJyl9XG4gICAgICAgICAgZGVzY3JpcHRpb249e3QoJ2VkaXRvcjpkaWFsb2cucGVyZm9ybWFuY2UuaW5mby1maWxlU2l6ZScpfVxuICAgICAgICAgIGxlYXJuTW9yZVVybD1cImh0dHM6Ly94cmVuZ2luZS5kZXYvZG9jcy9lZGl0b3Itb3B0aW1pemF0aW9uLmh0bWxcIlxuICAgICAgICAgIHNjb3JlPXtzY29yZXMuZmlsZVNpemUuc2NvcmV9XG4gICAgICAgICAgc2NvcmVDb2xvcj17c2NvcmVUb0NvbG9yW3Njb3Jlcy5maWxlU2l6ZS5zY29yZV19XG4gICAgICAgID5cbiAgICAgICAgICA8Q29sb3JlZFRleHQgY29sb3I9e3Njb3JlVG9Db2xvcltzY29yZXMuZmlsZVNpemUuc2NvcmVdfT57Ynl0ZXNUb1NpemUoc2NvcmVzLmZpbGVTaXplLnZhbHVlKX08L0NvbG9yZWRUZXh0PlxuICAgICAgICA8L1BlcmZvcm1hbmNlQ2hlY2tJdGVtPlxuICAgICAgPC91bD5cbiAgICA8L0RpYWxvZz5cbiAgKVxufVxuXG5QZXJmb3JtYW5jZUNoZWNrRGlhbG9nLmRlZmF1bHRQcm9wcyA9IHtcbiAgdGFnOiAnZGl2JyxcbiAgdGl0bGU6IGkxOG4udCgnZWRpdG9yOmRpYWxvZy5wZXJmb3JtYW5jZS5pbmZvLWZpbGVTaXplJykgfHwgJ1BlcmZvcm1hbmNlIENoZWNrJyxcbiAgY29uZmlybUxhYmVsOiBpMThuLnQoJ2VkaXRvcjpkaWFsb2cucGVyZm9ybWFuY2UuaW5mby1maWxlU2l6ZScpIHx8ICdQdWJsaXNoIFNjZW5lJ1xufVxuXG5leHBvcnQgZGVmYXVsdCBQZXJmb3JtYW5jZUNoZWNrRGlhbG9nXG4iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB3aXRoVHJhbnNsYXRpb24gfSBmcm9tICdyZWFjdC1pMThuZXh0J1xuaW1wb3J0IEZvcm1GaWVsZCBmcm9tICcuLi9pbnB1dHMvRm9ybUZpZWxkJ1xuaW1wb3J0IFN0cmluZ0lucHV0IGZyb20gJy4uL2lucHV0cy9TdHJpbmdJbnB1dCdcbmltcG9ydCBQcmV2aWV3RGlhbG9nIGZyb20gJy4vUHJldmlld0RpYWxvZydcblxuLyoqXG4gKiBQdWJsaXNoRGlhbG9nIHVzZWQgdG8gc2hvdyB0aGUgZGlhbG9nIHdoZW4gd2UgYXJlIGdvaW5nIHRvIHB1Ymxpc2ggc2NlbmUuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge2NsYXNzIGNvbXBvbmVudH1cbiAqL1xuZXhwb3J0IGNsYXNzIFB1Ymxpc2hEaWFsb2cgZXh0ZW5kcyBDb21wb25lbnQ8eyB0OiBGdW5jdGlvbiB9PiB7XG4gIC8vaW5pdGlhbGl6aW5nIHN0YXRlIHdoZW4gb2JqZWN0IG9mIGNsYXNzIGdldCBpbnZva2VkLlxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBuYW1lOiAnJyxcbiAgICAgIC4uLnByb3BzLmluaXRpYWxTY2VuZVBhcmFtc1xuICAgIH1cbiAgfVxuXG4gIC8vc2V0dGluZyBzdGF0ZSB3aGVuIHRoZXJlIGlzIGNoYW5nZSBpbiBuYW1lLlxuICBvbkNoYW5nZU5hbWUgPSAobmFtZSkgPT4gdGhpcy5zZXRTdGF0ZSh7IG5hbWUgfSlcblxuICAvL2Z1bmN0aW9uIHRvIGhhbmRsZSB0aGUgY29uZmlybWF0aW9uIG9mIHB1Ymxpc2hEaWFsb2dcbiAgb25Db25maXJtID0gKCkgPT4ge1xuICAgIGNvbnN0IHB1Ymxpc2hTdGF0ZSA9IHsgLi4udGhpcy5zdGF0ZSB9IGFzIGFueVxuICAgIHB1Ymxpc2hTdGF0ZS5uYW1lID0gcHVibGlzaFN0YXRlLm5hbWUudHJpbSgpXG4gICAgOyh0aGlzLnByb3BzIGFzIGFueSkub25QdWJsaXNoKHB1Ymxpc2hTdGF0ZSlcbiAgfVxuXG4gIC8vIGNyZWF0aW5nIGFuZCByZW5kZXJpbmcgUHJldmlld0RpYWxvZyB2aWV3LlxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBvbkNhbmNlbCwgc2NyZWVuc2hvdFVybCB9ID0gdGhpcy5wcm9wcyBhcyBhbnlcbiAgICBjb25zdCB7IG5hbWUgfSA9IHRoaXMuc3RhdGUgYXMgYW55XG4gICAgcmV0dXJuIChcbiAgICAgIDxQcmV2aWV3RGlhbG9nXG4gICAgICAgIGltYWdlU3JjPXtzY3JlZW5zaG90VXJsfVxuICAgICAgICB0aXRsZT17dGhpcy5wcm9wcy50KCdlZGl0b3I6ZGlhbG9nLnB1Ymxpc2gudGl0bGUnKX1cbiAgICAgICAgb25Db25maXJtPXt0aGlzLm9uQ29uZmlybX1cbiAgICAgICAgb25DYW5jZWw9e29uQ2FuY2VsfVxuICAgICAgICBjb25maXJtTGFiZWw9e3RoaXMucHJvcHMudCgnZWRpdG9yOmRpYWxvZy5wdWJsaXNoLmxibC1jb25maXJtJyl9XG4gICAgICA+XG4gICAgICAgIDxGb3JtRmllbGQ+XG4gICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJzY2VuZU5hbWVcIj57dGhpcy5wcm9wcy50KCdlZGl0b3I6ZGlhbG9nLnB1Ymxpc2gubGJsLW5hbWUnKX08L2xhYmVsPlxuICAgICAgICAgIDxTdHJpbmdJbnB1dFxuICAgICAgICAgICAgaWQ9XCJzY2VuZU5hbWVcIlxuICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgIHBhdHRlcm49eydbQS1aYS16MC05LVxcJzpcIiFAIyQlXiYqKCksLj9+IF17NCw2NH0nfVxuICAgICAgICAgICAgdGl0bGU9e3RoaXMucHJvcHMudCgnZWRpdG9yOmRpYWxvZy5wdWJsaXNoLmluZm8tbmFtZScpfVxuICAgICAgICAgICAgdmFsdWU9e25hbWV9XG4gICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZU5hbWV9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9Gb3JtRmllbGQ+XG4gICAgICA8L1ByZXZpZXdEaWFsb2c+XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhUcmFuc2xhdGlvbigpKFB1Ymxpc2hEaWFsb2cpXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgUHJldmlld0RpYWxvZyBmcm9tICcuL1ByZXZpZXdEaWFsb2cnXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICcuLi9pbnB1dHMvQnV0dG9uJ1xuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tICdyZWFjdC1pMThuZXh0J1xuXG4vKipcbiAqIFB1Ymxpc2hlZFNjZW5lRGlhbG9nIHVzZWQgdG8gc2hvdyBkaWFsb2cgd2hlbiBzY2VuZSBnZXQgcHVibGlzaGVkLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAgICAgICB7ZnVuY3Rpb259IG9uQ2FuY2VsXG4gKiBAcGFyYW0gICAgICAge3N0cmluZ30gc2NlbmVOYW1lXG4gKiBAcGFyYW0gICAgICAge3N0cmluZ30gc2NlbmVVcmxcbiAqIEBwYXJhbSAgICAgICB7c3RyaW5nfSBzY3JlZW5zaG90VXJsXG4gKiBAcGFyYW0gICAgICAge2FueX0gcHJvcHNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgZnVuY3Rpb24gUHVibGlzaGVkU2NlbmVEaWFsb2coeyBvbkNhbmNlbCwgc2NlbmVOYW1lLCBzY2VuZVVybCwgc2NyZWVuc2hvdFVybCwgLi4ucHJvcHMgfSkge1xuICBjb25zdCB7IHQgfSA9IHVzZVRyYW5zbGF0aW9uKClcbiAgcmV0dXJuIChcbiAgICA8UHJldmlld0RpYWxvZyBpbWFnZVNyYz17c2NyZWVuc2hvdFVybH0gdGl0bGU9e3QoJ2VkaXRvcjpkaWFsb2cucHVibGlzaGVkLnRpdGxlJyl9IHsuLi5wcm9wc30+XG4gICAgICA8aDE+e3NjZW5lTmFtZX08L2gxPlxuICAgICAgPHA+e3QoJ2VkaXRvcjpkaWFsb2cucHVibGlzaGVkLmhlYWRlcicpfTwvcD5cbiAgICAgIDxCdXR0b24gYXM9XCJhXCIgaHJlZj17c2NlbmVVcmx9IHRhcmdldD1cIl9ibGFua1wiPlxuICAgICAgICB7dCgnZWRpdG9yOmRpYWxvZy5wdWJsaXNoZWQubGJsLXZpZXcnKX1cbiAgICAgIDwvQnV0dG9uPlxuICAgIDwvUHJldmlld0RpYWxvZz5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBQdWJsaXNoZWRTY2VuZURpYWxvZ1xuIiwiaW1wb3J0IHsgUHJvamVjdE1hbmFnZXIgfSBmcm9tICcuLi9tYW5hZ2Vycy9Qcm9qZWN0TWFuYWdlcidcblxuLyoqXG4gKiBnZXRVcmxGcm9tSWQgaXMgdXNlZCB0byBnZXQgdXJsIG9mIHRoZSBzdGF0aWMgcmVzb3VyY2UgZnJvbSBpdHMgSURcbiAqIEBhdXRob3IgQWJoaXNoZWsgUGF0aGFrXG4gKiBAcGFyYW0ge2FueX0gY29udGVudElEXG4gKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAqL1xuZXhwb3J0IGNvbnN0IGdldFVybEZyb21JZCA9IGFzeW5jIChjb250ZW50SUQpOiBQcm9taXNlPGFueT4gPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUHJvamVjdE1hbmFnZXIuaW5zdGFuY2UuZmVhdGhlcnNDbGllbnQuc2VydmljZSgnc3RhdGljLXJlc291cmNlLXVybCcpLmdldChjb250ZW50SUQpXG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coXCJDYW4ndCBnZXQgVVJMIGZyb20gaWRcIiArIGVycm9yKVxuICAgIHRocm93IG5ldyBFcnJvcihlcnJvcilcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBnZXQgVVJMIGZyb20gaWRcIilcbn1cbiIsImltcG9ydCB7IGZldGNoQ29udGVudFR5cGUgfSBmcm9tICcuL2ZldGNoQ29udGVudFR5cGUnXG5pbXBvcnQgeyBndWVzc0NvbnRlbnRUeXBlIH0gZnJvbSAnLi9ndWVzc0NvbnRlbnRUeXBlJ1xuXG4vKipcbiAqICBnZXRDb250ZW50VHlwZSBpcyB1c2VkIHRvIGdldCBjb250ZW50IHR5cGUgdXJsLlxuICogQGF1dGhvciBBYmhpc2hlayBQYXRoYWtcbiAqIEBwYXJhbSAge2FueX0gIGNvbnRlbnRVcmxcbiAqIEByZXR1cm4ge1Byb21pc2V9XG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDb250ZW50VHlwZSA9IGFzeW5jIChjb250ZW50VXJsKTogUHJvbWlzZTxhbnk+ID0+IHtcbiAgcmV0dXJuIGd1ZXNzQ29udGVudFR5cGUoY29udGVudFVybCkgfHwgKGF3YWl0IGZldGNoQ29udGVudFR5cGUoY29udGVudFVybCkpXG59XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBBc3NldHNQYW5lbENvbnRhaW5lciB9IGZyb20gJy4uL2xheW91dC9GbGV4J1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IHN0eWxlcyBmcm9tICcuL3N0eWxlcy5tb2R1bGUuc2NzcydcbmltcG9ydCB7IHVzZUFzc2V0U2VhcmNoIH0gZnJvbSAnLi91c2VBc3NldFNlYXJjaCdcbmltcG9ydCB7IEFzc2V0UGFuZWxDb250ZW50Q29udGFpbmVyIH0gZnJvbSAnLi9Bc3NldHNQYW5lbCdcbmltcG9ydCBBc3NldEdyaWQgZnJvbSAnLi9Bc3NldEdyaWQnXG5pbXBvcnQgU2VsZWN0SW5wdXQgZnJvbSAnLi4vaW5wdXRzL1NlbGVjdElucHV0J1xuaW1wb3J0IElucHV0R3JvdXAgZnJvbSAnLi4vaW5wdXRzL0lucHV0R3JvdXAnXG5pbXBvcnQgeyBVcGxvYWRGaWxlVHlwZSB9IGZyb20gJy4vc291cmNlcy9NeUFzc2V0c1NvdXJjZSdcbmltcG9ydCB7IGdldFVybEZyb21JZCB9IGZyb20gJy4uLy4uL2Z1bmN0aW9ucy9nZXRVcmxGcm9tSWQnXG5pbXBvcnQgeyBnZXRDb250ZW50VHlwZSB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL3NjZW5lL2Z1bmN0aW9ucy9nZXRDb250ZW50VHlwZSdcbmltcG9ydCB7IE5vZGVNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vbWFuYWdlcnMvTm9kZU1hbmFnZXInXG5pbXBvcnQgRWRpdG9yRXZlbnRzIGZyb20gJy4uLy4uL2NvbnN0YW50cy9FZGl0b3JFdmVudHMnXG5pbXBvcnQgeyBTb3VyY2VNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vbWFuYWdlcnMvU291cmNlTWFuYWdlcidcbmltcG9ydCB7IENvbW1hbmRNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vbWFuYWdlcnMvQ29tbWFuZE1hbmFnZXInXG5pbXBvcnQgeyBQcm9qZWN0TWFuYWdlciB9IGZyb20gJy4uLy4uL21hbmFnZXJzL1Byb2plY3RNYW5hZ2VyJ1xuXG4vKipcbiAqIEZpbGVCcm93c2VyUGFuZWwgdXNlZCB0byByZW5kZXIgdmlldyBmb3IgQXNzZXRzUGFuZWwuXG4gKiBAYXV0aG9yIEFiaGlzaGVrIFBhdGhha1xuICogQGNvbnN0cnVjdG9yXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRmlsZUJyb3dzZXJDb250ZW50UGFuZWwoeyBvblNlbGVjdGlvbkNoYW5nZWQgfSkge1xuICAvL2luaXRpYWxpemluZyBzb3VyY2VzXG4gIGNvbnN0IFtzb3VyY2VzLCBzZXRTb3VyY2VzXSA9IHVzZVN0YXRlKFNvdXJjZU1hbmFnZXIuaW5zdGFuY2Uuc291cmNlcylcblxuICAvL2luaXRpYWxpemluZyBzZWxlY3RlZFNvdXJjZSBhcyB0aGUgZmlyc3QgZWxlbWVudCBvZiBzb3VyY2VzIGFycmF5XG4gIGNvbnN0IFtzZWxlY3RlZFNvdXJjZSwgc2V0U2VsZWN0ZWRTb3VyY2VdID0gdXNlU3RhdGUoc291cmNlcy5sZW5ndGggPiAwID8gc291cmNlc1sxXSA6IG51bGwpXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBmdW5jdGlvbiB0byBzZXQgc2VsZWN0ZWQgc291cmNlc1xuICAgIGNvbnN0IG9uU2V0U291cmNlID0gKHNvdXJjZUlkKSA9PiB7XG4gICAgICBzZXRTZWxlY3RlZFNvdXJjZShzb3VyY2VzLmZpbmQoKHMpID0+IHMuaWQgPT09IHNvdXJjZUlkKSlcbiAgICB9XG5cbiAgICAvLyBmdW5jdGlvbiB0byBoYW5kbGUgY2hhbmdlcyBpbiBhdXRoZW50aWNhdGlvblxuICAgIGNvbnN0IG9uU2V0dGluZ3NDaGFuZ2VkID0gKCkgPT4ge1xuICAgICAgY29uc3QgbmV4dFNvdXJjZXMgPSBTb3VyY2VNYW5hZ2VyLmluc3RhbmNlLnNvdXJjZXNcbiAgICAgIHNldFNvdXJjZXMobmV4dFNvdXJjZXMpXG4gICAgfVxuXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlNFVFRJTkdTX0NIQU5HRUQudG9TdHJpbmcoKSwgb25TZXR0aW5nc0NoYW5nZWQpXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlNPVVJDRV9DSEFOR0VELnRvU3RyaW5nKCksIG9uU2V0U291cmNlKVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5TT1VSQ0VfQ0hBTkdFRC50b1N0cmluZygpLCBvblNldFNvdXJjZSlcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5TRVRUSU5HU19DSEFOR0VELnRvU3RyaW5nKCksIG9uU2V0dGluZ3NDaGFuZ2VkKVxuICAgIH1cbiAgfSwgW3NldFNlbGVjdGVkU291cmNlLCBzb3VyY2VzLCBzZXRTb3VyY2VzLCBzZWxlY3RlZFNvdXJjZV0pXG5cbiAgY29uc3QgeyBsb2FkTW9yZSwgaGFzTW9yZSwgcmVzdWx0cyB9ID0gdXNlQXNzZXRTZWFyY2goc2VsZWN0ZWRTb3VyY2UpXG5cbiAgY29uc3QgY3VycmVudFByb2plY3QgPSB7XG4gICAgbmFtZTogJ0N1cnJlbnQnLFxuICAgIHNpZDogJycsXG4gICAgb3duZWRGaWxlSWRzOiB7fVxuICB9XG5cbiAgY29uc3QgcHJvamVjdHMgPSBbXVxuICBwcm9qZWN0cy5wdXNoKGN1cnJlbnRQcm9qZWN0KVxuICByZXN1bHRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICBwcm9qZWN0cy5wdXNoKGVsZW1lbnQucHJvamVjdClcbiAgfSlcblxuICBjb25zdCBvblNlbGVjdCA9IChwcm9wcykgPT4ge1xuICAgIG9uU2VsZWN0aW9uQ2hhbmdlZCh7IHJlc291cmNlVXJsOiBwcm9wcy5kZXNjcmlwdGlvbiwgbmFtZTogcHJvcHMuaWQsIGNvbnRlbnRUeXBlOiBwcm9wcy5jb250ZW50VHlwZSB9KVxuICB9XG5cbiAgY29uc3QgY3JlYXRlUHJvamVjdCA9IChwcm9qZWN0cykgPT4ge1xuICAgIGNvbnN0IHNlbGVjdFR5cGUgPSBbXVxuICAgIHByb2plY3RzLmZvckVhY2goKGVsZW1lbnQsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoZWxlbWVudC5zaWQgIT09IGdsb2JhbFRoaXMuY3VycmVudFByb2plY3RJRClcbiAgICAgICAgc2VsZWN0VHlwZS5wdXNoKHtcbiAgICAgICAgICBsYWJlbDogZWxlbWVudC5uYW1lLFxuICAgICAgICAgIHZhbHVlOiBpbmRleFxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICByZXR1cm4gc2VsZWN0VHlwZVxuICB9XG4gIGNvbnN0IHByb2plY3RTZWxlY3RUeXBlcyA9IGNyZWF0ZVByb2plY3QocHJvamVjdHMpXG5cbiAgY29uc3QgW3NlbGVjdGVkUHJvamVjdEluZGV4LCBzZXRTZWxlY3RlZFByb2plY3RJbmRleF0gPSB1c2VTdGF0ZSgwKVxuXG4gIGNvbnN0IFtzZWxlY3RlZFByb2plY3RGaWxlcywgc2V0U2VsZWN0ZWRQcm9qZWN0RmlsZXNdID0gdXNlU3RhdGUoW10pXG5cbiAgY29uc3QgcHJvamVjdElEUmVmID0gdXNlUmVmKHNlbGVjdGVkUHJvamVjdEluZGV4KVxuXG4gIGNvbnN0IHJlbmRlclByb2plY3RGaWxlcyA9IGFzeW5jIChpbmRleCkgPT4ge1xuICAgIGNvbnN0IG93bmVkSWRzID0ge31cbiAgICBPYmplY3QuYXNzaWduKG93bmVkSWRzLCBQcm9qZWN0TWFuYWdlci5pbnN0YW5jZS5vd25lZEZpbGVJZHMpXG4gICAgT2JqZWN0LmFzc2lnbihvd25lZElkcywgUHJvamVjdE1hbmFnZXIuaW5zdGFuY2UuY3VycmVudE93bmVkRmlsZUlkcylcbiAgICBwcm9qZWN0c1swXS5vd25lZEZpbGVJZHMgPSBKU09OLnN0cmluZ2lmeShvd25lZElkcylcbiAgICBwcm9qZWN0c1swXS5zaWQgPSBnbG9iYWxUaGlzLmN1cnJlbnRQcm9qZWN0SURcbiAgICBjb25zdCBvd25lZEZpbGVJZHNTdHJpbmcgPSBwcm9qZWN0c1tpbmRleF0/Lm93bmVkRmlsZUlkc1xuICAgIGNvbnN0IG93bmVkRmlsZUlkcyA9ICEhb3duZWRGaWxlSWRzU3RyaW5nID8gSlNPTi5wYXJzZShvd25lZEZpbGVJZHNTdHJpbmcpIDoge31cbiAgICBjb25zdCByZXR1cm5pbmdPYmplY3RzID0gW11cbiAgICBmb3IgKGxldCBlbGVtZW50IG9mIE9iamVjdC5rZXlzKG93bmVkRmlsZUlkcykpIHtcbiAgICAgIGlmIChlbGVtZW50ICE9PSAndGh1bWJuYWlsT3duZWRGaWxlSWQnKSB7XG4gICAgICAgIGNvbnN0IGZpbGVJZCA9IG93bmVkRmlsZUlkc1tlbGVtZW50XVxuICAgICAgICBjb25zdCB7IHVybCB9ID0gYXdhaXQgZ2V0VXJsRnJvbUlkKGZpbGVJZClcbiAgICAgICAgaWYgKCF1cmwpIGNvbnRpbnVlXG4gICAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gYXdhaXQgZ2V0Q29udGVudFR5cGUobmV3IFVSTCh1cmwpKVxuICAgICAgICBjb25zdCBub2RlQ2xhc3MgPSBVcGxvYWRGaWxlVHlwZVtjb250ZW50VHlwZV1cbiAgICAgICAgY29uc3Qgbm9kZUVkaXRvciA9IE5vZGVNYW5hZ2VyLmluc3RhbmNlLmdldEVkaXRvckZyb21DbGFzcyhub2RlQ2xhc3MpXG4gICAgICAgIGNvbnN0IHJldHVybmluZ09iamVjdCA9IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogdXJsLFxuICAgICAgICAgIGZpbGVJZDogZmlsZUlkLFxuICAgICAgICAgIHByb2plY3RJZDogcHJvamVjdHNbaW5kZXhdLnNpZCxcbiAgICAgICAgICBpZDogZWxlbWVudCxcbiAgICAgICAgICBsYWJlbDogZWxlbWVudCxcbiAgICAgICAgICBub2RlQ2xhc3M6IG5vZGVDbGFzcyxcbiAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICB0eXBlOiAnRWxlbWVudCcsXG4gICAgICAgICAgY29udGVudFR5cGU6IGNvbnRlbnRUeXBlLFxuICAgICAgICAgIGluaXRpYWxQcm9wczogeyBzcmM6IG5ldyBVUkwodXJsKSB9LFxuICAgICAgICAgIGljb25Db21wb25lbnQ6IG5vZGVFZGl0b3IuV3JhcHBlZENvbXBvbmVudFxuICAgICAgICAgICAgPyBub2RlRWRpdG9yLldyYXBwZWRDb21wb25lbnQuaWNvbkNvbXBvbmVudFxuICAgICAgICAgICAgOiBub2RlRWRpdG9yLmljb25Db21wb25lbnRcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5pbmdPYmplY3RzLnB1c2gocmV0dXJuaW5nT2JqZWN0KVxuICAgICAgfVxuICAgIH1cbiAgICBzZXRTZWxlY3RlZFByb2plY3RGaWxlcyhyZXR1cm5pbmdPYmplY3RzKVxuICB9XG5cbiAgY29uc3Qgb25DaGFuZ2VTZWxlY3RlZFByb2plY3QgPSAoaW5kZXgpID0+IHtcbiAgICBwcm9qZWN0SURSZWYuY3VycmVudCA9IGluZGV4XG4gICAgc2V0U2VsZWN0ZWRQcm9qZWN0SW5kZXgoaW5kZXgpXG4gIH1cblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJlbmRlclByb2plY3RGaWxlcyhzZWxlY3RlZFByb2plY3RJbmRleClcbiAgfSwgW3NlbGVjdGVkUHJvamVjdEluZGV4XSlcblxuICBjb25zdCBvbkZpbGVVcGxvYWRlZCA9IChpbmRleCkgPT4ge1xuICAgIGlmIChwcm9qZWN0SURSZWYuY3VycmVudCA9PT0gMCkge1xuICAgICAgcmVuZGVyUHJvamVjdEZpbGVzKHNlbGVjdGVkUHJvamVjdEluZGV4KVxuICAgIH1cbiAgfVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLkZJTEVfVVBMT0FERUQudG9TdHJpbmcoKSwgb25GaWxlVXBsb2FkZWQpXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5GSUxFX1VQTE9BREVELnRvU3RyaW5nKCksIG9uRmlsZVVwbG9hZGVkKVxuICAgIH1cbiAgfSwgW10pXG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgey8qIEB0cy1pZ25vcmUgKi99XG4gICAgICA8SW5wdXRHcm91cCBuYW1lPVwiUHJvamVjdCBOYW1lXCIgbGFiZWw9XCJQcm9qZWN0IE5hbWVcIj5cbiAgICAgICAgey8qIEB0cy1pZ25vcmUgKi99XG4gICAgICAgIDxTZWxlY3RJbnB1dCBvcHRpb25zPXtwcm9qZWN0U2VsZWN0VHlwZXN9IG9uQ2hhbmdlPXtvbkNoYW5nZVNlbGVjdGVkUHJvamVjdH0gdmFsdWU9e3NlbGVjdGVkUHJvamVjdEluZGV4fSAvPlxuICAgICAgPC9JbnB1dEdyb3VwPlxuXG4gICAgICA8QXNzZXRzUGFuZWxDb250YWluZXIgaWQ9XCJmaWxlLWJyb3dzZXItcGFuZWxcIiBjbGFzc05hbWU9e3N0eWxlcy5hc3NldHNQYW5lbH0+XG4gICAgICAgIDxBc3NldFBhbmVsQ29udGVudENvbnRhaW5lcj5cbiAgICAgICAgICA8QXNzZXRHcmlkXG4gICAgICAgICAgICBzb3VyY2U9e3NlbGVjdGVkU291cmNlfVxuICAgICAgICAgICAgaXRlbXM9e3NlbGVjdGVkUHJvamVjdEZpbGVzfVxuICAgICAgICAgICAgb25Mb2FkTW9yZT17bG9hZE1vcmV9XG4gICAgICAgICAgICBoYXNNb3JlPXtoYXNNb3JlfVxuICAgICAgICAgICAgb25TZWxlY3Q9e29uU2VsZWN0fVxuICAgICAgICAgICAgaXNMb2FkaW5nPXtmYWxzZX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L0Fzc2V0UGFuZWxDb250ZW50Q29udGFpbmVyPlxuICAgICAgPC9Bc3NldHNQYW5lbENvbnRhaW5lcj5cbiAgICA8Lz5cbiAgKVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cydcblxuLyoqXG4gKiBAYXV0aG9yIEFiaGlzaGVrIFBhdGhha1xuICovXG5jb25zdCBBdWRpb1ByZXZpZXcgPSBzdHlsZWQuYXVkaW9gXG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICBtYXJnaW4tdG9wOjMwMHB4XG4gIG1heC13aWR0aDo1MDBweFxuYFxuXG4vKipcbiAqIEBhdXRob3IgQWJoaXNoZWsgUGF0aGFrIDxhYmhpLnBhdGhhazQwMUBnbWFpbC5jb20+XG4gKiBAcGFyYW0gcHJvcHNcbiAqIEByZXR1cm5zXG4gKi9cblxuZXhwb3J0IGNvbnN0IEF1ZGlvUHJldmlld1BhbmVsID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IHVybCA9IHByb3BzLnJlc291cmNlUHJvcHMucmVzb3VyY2VVcmxcblxuICByZXR1cm4gKFxuICAgIDxBdWRpb1ByZXZpZXcgc3JjPXt1cmx9IGNvbnRyb2xzPXt0cnVlfT5cbiAgICAgIFlvdXIgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgQXVkaW9cbiAgICA8L0F1ZGlvUHJldmlldz5cbiAgKVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cydcblxuLyoqXG4gKiBAYXV0aG9yIEFiaGlzaGVrIFBhdGhha1xuICovXG5jb25zdCBJbWFnZVByZXZpZXcgPSBzdHlsZWQuaW1nYFxuICBkaXNwbGF5OiBibG9jaztcbiAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gIG1hcmdpbi1yaWdodDogYXV0bztcbmBcblxuLyoqXG4gKiBAYXV0aG9yIEFiaGlzaGVrIFBhdGhhayA8YWJoaS5wYXRoYWs0MDFAZ21haWwuY29tPlxuICogQHBhcmFtIHByb3BzXG4gKi9cblxuZXhwb3J0IGNvbnN0IEltYWdlUHJldmlld1BhbmVsID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0IHVybCA9IHByb3BzLnJlc291cmNlUHJvcHMucmVzb3VyY2VVcmxcbiAgcmV0dXJuIDxJbWFnZVByZXZpZXcgc3JjPXt1cmx9IC8+XG59XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IEFtYmllbnRMaWdodCwgQm94MywgUGVyc3BlY3RpdmVDYW1lcmEsIFNjZW5lLCBXZWJHTFJlbmRlcmVyIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBHTFRGTG9hZGVyIH0gZnJvbSAnQHhyZW5naW5lL2VuZ2luZS9zcmMvYXNzZXRzL2xvYWRlcnMvZ2x0Zi9HTFRGTG9hZGVyJ1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cydcbmltcG9ydCB7IFNjZW5lTWFuYWdlciB9IGZyb20gJy4uLy4uLy4uL21hbmFnZXJzL1NjZW5lTWFuYWdlcidcbmltcG9ydCB7IENvbnRyb2xNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vLi4vbWFuYWdlcnMvQ29udHJvbE1hbmFnZXInXG5pbXBvcnQgRWRpdG9yRXZlbnRzIGZyb20gJy4uLy4uLy4uL2NvbnN0YW50cy9FZGl0b3JFdmVudHMnXG5pbXBvcnQgeyBQcm9qZWN0TWFuYWdlciB9IGZyb20gJy4uLy4uLy4uL21hbmFnZXJzL1Byb2plY3RNYW5hZ2VyJ1xuaW1wb3J0IHsgQ29tbWFuZE1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9tYW5hZ2Vycy9Db21tYW5kTWFuYWdlcidcblxuLyoqXG4gKiBAYXV0aG9yIEFiaGlzaGVrIFBhdGhha1xuICovXG5cbmNvbnN0IE1vZGVsUHJldmlldyA9IChzdHlsZWQgYXMgYW55KS5jYW52YXNgXG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG5gXG5cbi8qKlxuICogQGF1dGhvciBBYmhpc2hlayBQYXRoYWsgPGFiaGkucGF0aGFrNDAxQGdtYWlsLmNvbT5cbiAqIEBwYXJhbSBwcm9wc1xuICogQHJldHVybnNcbiAqL1xuXG5leHBvcnQgY29uc3QgTW9kZWxQcmV2aWV3UGFuZWwgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgdXJsID0gcHJvcHMucmVzb3VyY2VQcm9wcy5yZXNvdXJjZVVybFxuICBjb25zdCBhc3Nlc3RQYW5lbFJlZiA9IFJlYWN0LmNyZWF0ZVJlZjxIVE1MQ2FudmFzRWxlbWVudD4oKVxuXG4gIGNvbnN0IHNjZW5lID0gbmV3IFNjZW5lKClcbiAgY29uc3QgY2FtZXJhID0gbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKDc1KVxuICAvLyBjb25zdCBlZGl0b3IgPSBuZXcgRWRpdG9yKG51bGwsIHsgY2FtZXJhLCBzY2VuZSB9KVxuXG4gIGNvbnN0IFtmbHlNb2RlRW5hYmxlZCwgc2V0Rmx5TW9kZUVuYWJsZWRdID0gdXNlU3RhdGUoZmFsc2UpXG5cbiAgY29uc3QgcmVuZGVyU2NlbmUgPSAoKSA9PiB7XG4gICAgY29uc3QgY2FudmFzID0gYXNzZXN0UGFuZWxSZWYuY3VycmVudCBhcyBhbnlcbiAgICBjb25zdCByZW5kZXJlciA9IG5ldyBXZWJHTFJlbmRlcmVyKHtcbiAgICAgIGNhbnZhczogY2FudmFzXG4gICAgfSlcblxuICAgIHJlbmRlcmVyLnNldFNpemUoY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxuXG4gICAgY29uc3QgbGlnaHQgPSBuZXcgQW1iaWVudExpZ2h0KDB4NDA0MDQwKVxuICAgIHNjZW5lLmFkZChsaWdodClcblxuICAgIGNhbWVyYS5hc3BlY3QgPSBjYW52YXMud2lkdGggLyBjYW52YXMud2lkdGhcbiAgICBzY2VuZS5hZGQoY2FtZXJhKVxuICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKVxuXG4gICAgbmV3IEdMVEZMb2FkZXIoKS5sb2FkKFxuICAgICAgdXJsLFxuICAgICAgKGdsdGYpID0+IHtcbiAgICAgICAgc2NlbmUuYWRkKGdsdGYuc2NlbmUpXG4gICAgICAgIGNvbnN0IGJib3ggPSBuZXcgQm94MygpLnNldEZyb21PYmplY3QoZ2x0Zi5zY2VuZSlcbiAgICAgICAgYmJveC5nZXRDZW50ZXIoY2FtZXJhLnBvc2l0aW9uKVxuICAgICAgICBjYW1lcmEucG9zaXRpb24ueiA9IGJib3gubWF4LnogKyAxXG4gICAgICB9LFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgTG9hZGluZyBHTFRGIEZyb20gVVJsJylcbiAgICAgIH1cbiAgICApXG4gIH1cblxuICBjb25zdCBvbkZseU1vZGVDaGFuZ2VkID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldEZseU1vZGVFbmFibGVkKENvbnRyb2xNYW5hZ2VyLmluc3RhbmNlLmZseUNvbnRyb2xzLmVuYWJsZWQpXG4gIH0sIFtzZXRGbHlNb2RlRW5hYmxlZF0pXG5cbiAgY29uc3Qgb25FZGl0b3JJbml0aWFsaXplZCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBDb250cm9sTWFuYWdlci5pbnN0YW5jZS5lZGl0b3JDb250cm9scy5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuRkxZX01PREVfQ0hBTkdFRC50b1N0cmluZygpLCBvbkZseU1vZGVDaGFuZ2VkKVxuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLnJlbW92ZUxpc3RlbmVyKEVkaXRvckV2ZW50cy5SRU5ERVJFUl9JTklUSUFMSVpFRC50b1N0cmluZygpLCBvbkVkaXRvckluaXRpYWxpemVkKVxuICB9LCBbb25GbHlNb2RlQ2hhbmdlZF0pXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuUkVOREVSRVJfSU5JVElBTElaRUQudG9TdHJpbmcoKSwgb25FZGl0b3JJbml0aWFsaXplZClcbiAgICBQcm9qZWN0TWFuYWdlci5pbnN0YW5jZS5pbml0KClcbiAgICBTY2VuZU1hbmFnZXIuaW5zdGFuY2UuaW5pdGlhbGl6ZVJlbmRlcmVyKGFzc2VzdFBhbmVsUmVmLmN1cnJlbnQpXG4gICAgcmVuZGVyU2NlbmUoKVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoQ29udHJvbE1hbmFnZXIuaW5zdGFuY2UuZWRpdG9yQ29udHJvbHMpIHtcbiAgICAgICAgQ29udHJvbE1hbmFnZXIuaW5zdGFuY2UuZWRpdG9yQ29udHJvbHMucmVtb3ZlTGlzdGVuZXIoXG4gICAgICAgICAgRWRpdG9yRXZlbnRzLkZMWV9NT0RFX0NIQU5HRUQudG9TdHJpbmcoKSxcbiAgICAgICAgICBvbkZseU1vZGVDaGFuZ2VkXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChTY2VuZU1hbmFnZXIuaW5zdGFuY2UucmVuZGVyZXIpIHtcbiAgICAgICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnJlbmRlcmVyLmRpc3Bvc2UoKVxuICAgICAgfVxuICAgICAgUHJvamVjdE1hbmFnZXIuaW5zdGFuY2UuZGlzcG9zZSgpXG4gICAgfVxuICB9LCBbXSlcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8ZGl2PlxuICAgICAgICA8TW9kZWxQcmV2aWV3IHJlZj17YXNzZXN0UGFuZWxSZWZ9IC8+XG4gICAgICA8L2Rpdj5cbiAgICA8Lz5cbiAgKVxufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuXG4vKipcbiAqIEBhdXRob3IgQWJoaXNoZWsgUGF0aGFrIDxhYmhpLnBhdGhhazQwMUBnbWFpbC5jb20+XG4gKiBAcGFyYW0gcHJvcHNcbiAqIEByZXR1cm5zXG4gKi9cblxuZXhwb3J0IGNvbnN0IFByZXZpZXdVbmF2YWlsYWJsZSA9IChwcm9wcykgPT4ge1xuICBjb25zdCB1cmwgPSBwcm9wcy5yZXNvdXJjZVByb3BzLnJlc291cmNlVXJsXG5cbiAgcmV0dXJuIDxkaXY+UHJldmlldyBvZiB0aGlzIEFzc2V0IGlzIHVuYXZhaWxhYmxlPC9kaXY+XG59XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJ1xuXG4vKipcbiAqIEBhdXRob3IgQWJoaXNoZWsgUGF0aGFrXG4gKi9cbmNvbnN0IFZlZGlvUHJldmlldyA9IHN0eWxlZC52aWRlb2BcbiAgZGlzcGxheTogYmxvY2s7XG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICBtYXJnaW4tcmlnaHQ6IGF1dG87XG4gIG1heC13aWR0aDogNTAwcHg7XG5gXG5cbi8qKlxuICogQGF1dGhvciBBYmhpc2hlayBQYXRoYWsgPGFiaGkucGF0aGFrNDAxQGdtYWlsLmNvbT5cbiAqIEBwYXJhbSBwcm9wc1xuICogQHJldHVybnNcbiAqL1xuXG5leHBvcnQgY29uc3QgVmVkaW9QcmV2aWV3UGFuZWwgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgdXJsID0gcHJvcHMucmVzb3VyY2VQcm9wcy5yZXNvdXJjZVVybFxuXG4gIHJldHVybiAoXG4gICAgPFZlZGlvUHJldmlldyBzcmM9e3VybH0gY29udHJvbHM9e3RydWV9PlxuICAgICAgWW91ciBCcm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBWaWRlb1xuICAgIDwvVmVkaW9QcmV2aWV3PlxuICApXG59XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlSW1wZXJhdGl2ZUhhbmRsZSwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnXG5pbXBvcnQgeyBBdWRpb1ByZXZpZXdQYW5lbCB9IGZyb20gJy4vQXNzZXRQcmV2aWV3UGFuZWxzL0F1ZGlvUHJldmlld1BhbmVsJ1xuaW1wb3J0IHsgSW1hZ2VQcmV2aWV3UGFuZWwgfSBmcm9tICcuL0Fzc2V0UHJldmlld1BhbmVscy9JbWFnZVByZXZpZXdQYW5lbCdcbmltcG9ydCB7IE1vZGVsUHJldmlld1BhbmVsIH0gZnJvbSAnLi9Bc3NldFByZXZpZXdQYW5lbHMvTW9kZWxQcmV2aWV3UGFuZWwnXG5pbXBvcnQgeyBQcmV2aWV3VW5hdmFpbGFibGUgfSBmcm9tICcuL0Fzc2V0UHJldmlld1BhbmVscy9QcmV2aWV3VW5hdmFpbGFibGUnXG5pbXBvcnQgeyBWZWRpb1ByZXZpZXdQYW5lbCB9IGZyb20gJy4vQXNzZXRQcmV2aWV3UGFuZWxzL1ZlZGlvUHJldmlld1BhbmVsJ1xuXG4vKipcbiAqXG4gKiBAYXV0aG9yIEFiaGlzaGVrIFBhdGhha1xuICovXG5cbmNvbnN0IEFzc2V0SGVhZGluZyA9IHN0eWxlZC5kaXZgXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgZm9udC1zaXplOiAxNTAlO1xuICBwYWRkaW5nLWJvdHRvbTogMjBweDtcbmBcblxuLyoqXG4gKiBVc2VkIHRvIHNlZSB0aGUgUHJldmlldyBvZiB0aGUgQXNzZXQgaW4gdGhlIEZpbGVCcm93c2VyIFBhbmVsXG4gKlxuICogQGF1dGhvciBBYmhpc2hlayBQYXRoYWsgPGFiaGkucGF0aGFrNDAxQGdtYWlsLmNvbT5cbiAqL1xuXG5leHBvcnQgY29uc3QgQXNzZXRzUHJldmlld1BhbmVsID0gUmVhY3QuZm9yd2FyZFJlZigocHJvcHMsIHJlZikgPT4ge1xuICB1c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgKCkgPT4gKHsgb25MYXlvdXRDaGFuZ2VkLCBvblNlbGVjdGlvbkNoYW5nZWQgfSkpXG4gIGNvbnN0IFtsYXlvdXRTdGF0ZUNoYW5nZWQsIHVzZUxheW91dFN0YXRlQ2hhbmdlZF0gPSB1c2VTdGF0ZSgwKVxuICBjb25zdCBbcHJldmlld1BhbmVsLCB1c2VQcmV2aWV3UGFuZWxdID0gdXNlU3RhdGUoe1xuICAgIFByZXZpZXdTb3VyY2U6IG51bGwsXG4gICAgcmVzb3VyY2VQcm9wczogeyByZXNvdXJjZVVybDogJycsIG5hbWU6ICcnIH1cbiAgfSlcblxuICBjb25zdCBvbkxheW91dENoYW5nZWQgPSAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ0xheW91dCBpcyBDaGFuZ2VkOicpXG4gIH1cblxuICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZWQgPSAocHJvcHMpID0+IHtcbiAgICByZW5kZXJQcmV2aWV3KHByb3BzKVxuICB9XG5cbiAgY29uc3QgcmVuZGVyUHJldmlldyA9IChwcm9wcykgPT4ge1xuICAgIHN3aXRjaCAocHJvcHMuY29udGVudFR5cGUpIHtcbiAgICAgIGNhc2UgJ21vZGVsL2dsdGYnOlxuICAgICAgY2FzZSAnbW9kZWwvZ2x0Zi1iaW5hcnknOlxuICAgICAgICBjb25zdCBtb2RlbFByZXZpZXdQYW5lbCA9IHtcbiAgICAgICAgICBQcmV2aWV3U291cmNlOiBNb2RlbFByZXZpZXdQYW5lbCxcbiAgICAgICAgICByZXNvdXJjZVByb3BzOiB7IHJlc291cmNlVXJsOiBwcm9wcy5yZXNvdXJjZVVybCwgbmFtZTogcHJvcHMubmFtZSB9XG4gICAgICAgIH1cbiAgICAgICAgdXNlUHJldmlld1BhbmVsKG1vZGVsUHJldmlld1BhbmVsKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnaW1hZ2UvcG5nJzpcbiAgICAgIGNhc2UgJ2ltYWdlL2pwZWcnOlxuICAgICAgICBjb25zdCBpbWFnZVByZXZpZXdQYW5lbCA9IHtcbiAgICAgICAgICBQcmV2aWV3U291cmNlOiBJbWFnZVByZXZpZXdQYW5lbCxcbiAgICAgICAgICByZXNvdXJjZVByb3BzOiB7IHJlc291cmNlVXJsOiBwcm9wcy5yZXNvdXJjZVVybCwgbmFtZTogcHJvcHMubmFtZSB9XG4gICAgICAgIH1cbiAgICAgICAgdXNlUHJldmlld1BhbmVsKGltYWdlUHJldmlld1BhbmVsKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICd2aWRlby9tcDQnOlxuICAgICAgICBjb25zdCB2ZWRpb1ByZXZpZXdQYW5lbCA9IHtcbiAgICAgICAgICBQcmV2aWV3U291cmNlOiBWZWRpb1ByZXZpZXdQYW5lbCxcbiAgICAgICAgICByZXNvdXJjZVByb3BzOiB7IHJlc291cmNlVXJsOiBwcm9wcy5yZXNvdXJjZVVybCwgbmFtZTogcHJvcHMubmFtZSB9XG4gICAgICAgIH1cbiAgICAgICAgdXNlUHJldmlld1BhbmVsKHZlZGlvUHJldmlld1BhbmVsKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnYXVkaW8vbXBlZyc6XG4gICAgICAgIGNvbnN0IGF1ZGlvUHJldmlld1BhbmVsID0ge1xuICAgICAgICAgIFByZXZpZXdTb3VyY2U6IEF1ZGlvUHJldmlld1BhbmVsLFxuICAgICAgICAgIHJlc291cmNlUHJvcHM6IHsgcmVzb3VyY2VVcmw6IHByb3BzLnJlc291cmNlVXJsLCBuYW1lOiBwcm9wcy5uYW1lIH1cbiAgICAgICAgfVxuICAgICAgICB1c2VQcmV2aWV3UGFuZWwoYXVkaW9QcmV2aWV3UGFuZWwpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnN0IHVuYXZhaWxhYmxlID0ge1xuICAgICAgICAgIFByZXZpZXdTb3VyY2U6IFByZXZpZXdVbmF2YWlsYWJsZSxcbiAgICAgICAgICByZXNvdXJjZVByb3BzOiB7IHJlc291cmNlVXJsOiBwcm9wcy5yZXNvdXJjZVVybCwgbmFtZTogcHJvcHMubmFtZSB9XG4gICAgICAgIH1cbiAgICAgICAgdXNlUHJldmlld1BhbmVsKHVuYXZhaWxhYmxlKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxBc3NldEhlYWRpbmc+e3ByZXZpZXdQYW5lbC5yZXNvdXJjZVByb3BzLm5hbWV9PC9Bc3NldEhlYWRpbmc+XG4gICAgICA8L2Rpdj5cbiAgICAgIHtwcmV2aWV3UGFuZWwuUHJldmlld1NvdXJjZSAmJiA8cHJldmlld1BhbmVsLlByZXZpZXdTb3VyY2UgcmVzb3VyY2VQcm9wcz17cHJldmlld1BhbmVsLnJlc291cmNlUHJvcHN9IC8+fVxuICAgIDwvPlxuICApXG59KVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IERvY2tMYXlvdXQsIHsgRG9ja01vZGUgfSBmcm9tICdyYy1kb2NrJ1xuaW1wb3J0IEZpbGVCcm93c2VyQ29udGVudFBhbmVsIGZyb20gJy4vRmlsZUJyb3dzZXJDb250ZW50UGFuZWwnXG5pbXBvcnQgeyBBc3NldHNQcmV2aWV3UGFuZWwgfSBmcm9tICcuL0Fzc2V0c1ByZXZpZXdQYW5lbCdcblxuLyoqXG4gKiBGaWxlQnJvd3NlclBhbmVsIHVzZWQgdG8gcmVuZGVyIHZpZXcgZm9yIEFzc2V0c1BhbmVsLlxuICogQGF1dGhvciBBYmhpc2hlayBQYXRoYWtcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEZpbGVCcm93c2VyUGFuZWwoKSB7XG4gIGNvbnN0IGFzc2V0c1ByZXZpZXdQYW5lbFJlZiA9IFJlYWN0LnVzZVJlZigpXG5cbiAgY29uc3Qgb25MYXlvdXRDaGFuZ2VkQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgOyhhc3NldHNQcmV2aWV3UGFuZWxSZWYgYXMgYW55KS5jdXJyZW50Py5vbkxheW91dENoYW5nZWQ/LigpXG4gIH1cblxuICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZWQgPSAocHJvcHMpID0+IHtcbiAgICA7KGFzc2V0c1ByZXZpZXdQYW5lbFJlZiBhcyBhbnkpLmN1cnJlbnQ/Lm9uU2VsZWN0aW9uQ2hhbmdlZD8uKHByb3BzKVxuICB9XG5cbiAgbGV0IGRlZmF1bHRMYXlvdXQgPSB7XG4gICAgZG9ja2JveDoge1xuICAgICAgbW9kZTogJ3ZlcnRpY2FsJyBhcyBEb2NrTW9kZSxcbiAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBzaXplOiA1LFxuICAgICAgICAgIHRhYnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdwcm9qZWN0RmlsZXNQYW5lbCcsXG4gICAgICAgICAgICAgIHRpdGxlOiAnUHJvamVjdCBGaWxlcycsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IDxGaWxlQnJvd3NlckNvbnRlbnRQYW5lbCBvblNlbGVjdGlvbkNoYW5nZWQ9e29uU2VsZWN0aW9uQ2hhbmdlZH0gLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBzaXplOiA1LFxuICAgICAgICAgIHRhYnM6IFt7IGlkOiAncHJldmlld1BhbmVsJywgdGl0bGU6ICdQcmV2aWV3JywgY29udGVudDogPEFzc2V0c1ByZXZpZXdQYW5lbCByZWY9e2Fzc2V0c1ByZXZpZXdQYW5lbFJlZn0gLz4gfV1cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxEb2NrTGF5b3V0XG4gICAgICAgIGRlZmF1bHRMYXlvdXQ9e2RlZmF1bHRMYXlvdXR9XG4gICAgICAgIHN0eWxlPXt7IHBvaW50ZXJFdmVudHM6ICdub25lJywgcG9zaXRpb246ICdhYnNvbHV0ZScsIGxlZnQ6IDAsIHRvcDogNSwgcmlnaHQ6IDUsIGJvdHRvbTogNSB9fVxuICAgICAgICBvbkxheW91dENoYW5nZT17b25MYXlvdXRDaGFuZ2VkQ2FsbGJhY2t9XG4gICAgICAvPlxuICAgIDwvPlxuICApXG59XG4iLCJpbXBvcnQgeyBDb25maWcgfSBmcm9tICdAeHJlbmdpbmUvY29tbW9uL3NyYy9jb25maWcnXG5cbi8qKlxuICogUmVhZCBjb25maWdzIGZyb20gbWV0YSB0YWdzIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZSB0aGUgcHJvY2Vzcy5lbnYgaW5qZWN0ZWQgZnJvbSBidWlsZC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAcGFyYW0gIChPYmplY3QpIFByb3ZpZGVzIGFwcGxjYXRpb24gY29uZmlncy5cbiAqL1xuY29uc3QgY29uZmlncyA9IHtcbiAgbmFtZTogKCk6IHN0cmluZyA9PiAnU2NlbmUgRWRpdG9yJyxcbiAgbG9uZ05hbWU6ICgpOiBzdHJpbmcgPT4gJ1NjZW5lIEVkaXRvcicsXG4gIFNFUlZFUl9VUkw6IENvbmZpZy5wdWJsaWNSdW50aW1lQ29uZmlnLmFwaVNlcnZlcixcbiAgQVBQX1VSTDogQ29uZmlnLnB1YmxpY1J1bnRpbWVDb25maWcuYXBwU2VydmVyLFxuICBGRUFUSEVSU19TVE9SRV9LRVk6IENvbmZpZy5wdWJsaWNSdW50aW1lQ29uZmlnLmZlYXRoZXJzU3RvcmVLZXksXG4gIFJPT1RfUkVESVJFQ1Q6IENvbmZpZy5wdWJsaWNSdW50aW1lQ29uZmlnLnJvb3RSZWRpcmVjdFxufVxuXG5leHBvcnQgZGVmYXVsdCBjb25maWdzXG4iLCJpbXBvcnQgeyBBcmNoaXZlLCBQcm9qZWN0RGlhZ3JhbSB9IGZyb20gJ0BzdHlsZWQtaWNvbnMvZmEtc29saWQnXG5pbXBvcnQgeyB3aXRoUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSdcbmltcG9ydCB7IFNsaWRlcnNIIH0gZnJvbSAnQHN0eWxlZC1pY29ucy9mYS1zb2xpZC9TbGlkZXJzSCdcbmltcG9ydCB7IExvY2F0aW9uU2VydmljZSB9IGZyb20gJ0B4cmVuZ2luZS9jbGllbnQtY29yZS9zcmMvYWRtaW4vcmVkdWNlcnMvYWRtaW4vbG9jYXRpb24vTG9jYXRpb25TZXJ2aWNlJ1xuaW1wb3J0IHsgRG9ja0xheW91dCwgRG9ja01vZGUgfSBmcm9tICdyYy1kb2NrJ1xuaW1wb3J0ICdyYy1kb2NrL2Rpc3QvcmMtZG9jay5jc3MnXG5pbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBEbmRQcm92aWRlciB9IGZyb20gJ3JlYWN0LWRuZCdcbmltcG9ydCB7IEhUTUw1QmFja2VuZCB9IGZyb20gJ3JlYWN0LWRuZC1odG1sNS1iYWNrZW5kJ1xuaW1wb3J0IHsgd2l0aFRyYW5zbGF0aW9uIH0gZnJvbSAncmVhY3QtaTE4bmV4dCdcbmltcG9ydCBNb2RhbCBmcm9tICdyZWFjdC1tb2RhbCdcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnXG5pbXBvcnQgeyBjcmVhdGVQcm9qZWN0LCBnZXRQcm9qZWN0LCBzYXZlUHJvamVjdCB9IGZyb20gJy4uL2Z1bmN0aW9ucy9wcm9qZWN0RnVuY3Rpb25zJ1xuaW1wb3J0IHsgZ2V0U2NlbmUgfSBmcm9tICcuLi9mdW5jdGlvbnMvZ2V0U2NlbmUnXG5pbXBvcnQgQXNzZXRzUGFuZWwgZnJvbSAnLi9hc3NldHMvQXNzZXRzUGFuZWwnXG5pbXBvcnQgeyBEaWFsb2dDb250ZXh0UHJvdmlkZXIgfSBmcm9tICcuL2NvbnRleHRzL0RpYWxvZ0NvbnRleHQnXG5pbXBvcnQgeyBkZWZhdWx0U2V0dGluZ3MsIFNldHRpbmdzQ29udGV4dFByb3ZpZGVyIH0gZnJvbSAnLi9jb250ZXh0cy9TZXR0aW5nc0NvbnRleHQnXG5pbXBvcnQgQ29uZmlybURpYWxvZyBmcm9tICcuL2RpYWxvZ3MvQ29uZmlybURpYWxvZydcbmltcG9ydCBFcnJvckRpYWxvZyBmcm9tICcuL2RpYWxvZ3MvRXJyb3JEaWFsb2cnXG5pbXBvcnQgRXhwb3J0UHJvamVjdERpYWxvZyBmcm9tICcuL2RpYWxvZ3MvRXhwb3J0UHJvamVjdERpYWxvZydcbmltcG9ydCB7IFByb2dyZXNzRGlhbG9nIH0gZnJvbSAnLi9kaWFsb2dzL1Byb2dyZXNzRGlhbG9nJ1xuaW1wb3J0IFNhdmVOZXdQcm9qZWN0RGlhbG9nIGZyb20gJy4vZGlhbG9ncy9TYXZlTmV3UHJvamVjdERpYWxvZydcbmltcG9ydCBEcmFnTGF5ZXIgZnJvbSAnLi9kbmQvRHJhZ0xheWVyJ1xuaW1wb3J0IEhpZXJhcmNoeVBhbmVsQ29udGFpbmVyIGZyb20gJy4vaGllcmFyY2h5L0hpZXJhcmNoeVBhbmVsQ29udGFpbmVyJ1xuaW1wb3J0IHsgUGFuZWxEcmFnQ29udGFpbmVyLCBQYW5lbEljb24sIFBhbmVsVGl0bGUgfSBmcm9tICcuL2xheW91dC9QYW5lbCdcbmltcG9ydCBQcm9wZXJ0aWVzUGFuZWxDb250YWluZXIgZnJvbSAnLi9wcm9wZXJ0aWVzL1Byb3BlcnRpZXNQYW5lbENvbnRhaW5lcidcbmltcG9ydCBkZWZhdWx0VGVtcGxhdGVVcmwgZnJvbSAnLi90ZW1wbGF0ZXMvY3JhdGVyLmpzb24nXG5pbXBvcnQgdHV0b3JpYWxUZW1wbGF0ZVVybCBmcm9tICcuL3RlbXBsYXRlcy90dXRvcmlhbC5qc29uJ1xuaW1wb3J0IFRvb2xCYXIgZnJvbSAnLi90b29sYmFyL1Rvb2xCYXInXG5pbXBvcnQgVmlld3BvcnRQYW5lbENvbnRhaW5lciBmcm9tICcuL3ZpZXdwb3J0L1ZpZXdwb3J0UGFuZWxDb250YWluZXInXG5pbXBvcnQgUGVyZm9ybWFuY2VDaGVja0RpYWxvZyBmcm9tICcuL2RpYWxvZ3MvUGVyZm9ybWFuY2VDaGVja0RpYWxvZydcbmltcG9ydCBQdWJsaXNoRGlhbG9nIGZyb20gJy4vZGlhbG9ncy9QdWJsaXNoRGlhbG9nJ1xuaW1wb3J0IFB1Ymxpc2hlZFNjZW5lRGlhbG9nIGZyb20gJy4vZGlhbG9ncy9QdWJsaXNoZWRTY2VuZURpYWxvZydcbmltcG9ydCBpMThuIGZyb20gJ2kxOG5leHQnXG5pbXBvcnQgRmlsZUJyb3dzZXJQYW5lbCBmcm9tICcuL2Fzc2V0cy9GaWxlQnJvd3NlclBhbmVsJ1xuaW1wb3J0IHsgY21kT3JDdHJsU3RyaW5nIH0gZnJvbSAnLi4vZnVuY3Rpb25zL3V0aWxzJ1xuaW1wb3J0IGNvbmZpZ3MgZnJvbSAnLi9jb25maWdzJ1xuaW1wb3J0IHsgYWNjZXNzTG9jYXRpb25TdGF0ZSB9IGZyb20gJ0B4cmVuZ2luZS9jbGllbnQtY29yZS9zcmMvYWRtaW4vcmVkdWNlcnMvYWRtaW4vbG9jYXRpb24vTG9jYXRpb25TdGF0ZSdcbmltcG9ydCB7IGFjY2Vzc1NjZW5lU3RhdGUgfSBmcm9tICdAeHJlbmdpbmUvY2xpZW50LWNvcmUvc3JjL2FkbWluL3JlZHVjZXJzL2FkbWluL3NjZW5lL1NjZW5lU3RhdGUnXG5pbXBvcnQgeyBTY2VuZVNlcnZpY2UgfSBmcm9tICdAeHJlbmdpbmUvY2xpZW50LWNvcmUvc3JjL2FkbWluL3JlZHVjZXJzL2FkbWluL3NjZW5lL1NjZW5lU2VydmljZSdcbmltcG9ydCB7IHVwbG9hZCB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL3NjZW5lL2Z1bmN0aW9ucy91cGxvYWQnXG5pbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0B4cmVuZ2luZS9lbmdpbmUvc3JjL3NjZW5lL2Z1bmN0aW9ucy9nZXRUb2tlbidcbmltcG9ydCB7IENvbW1hbmRNYW5hZ2VyIH0gZnJvbSAnLi4vbWFuYWdlcnMvQ29tbWFuZE1hbmFnZXInXG5pbXBvcnQgRWRpdG9yQ29tbWFuZHMgZnJvbSAnLi4vY29uc3RhbnRzL0VkaXRvckNvbW1hbmRzJ1xuaW1wb3J0IEVkaXRvckV2ZW50cyBmcm9tICcuLi9jb25zdGFudHMvRWRpdG9yRXZlbnRzJ1xuaW1wb3J0IHsgU2NlbmVNYW5hZ2VyIH0gZnJvbSAnLi4vbWFuYWdlcnMvU2NlbmVNYW5hZ2VyJ1xuaW1wb3J0IHsgQ29udHJvbE1hbmFnZXIgfSBmcm9tICcuLi9tYW5hZ2Vycy9Db250cm9sTWFuYWdlcidcbmltcG9ydCB7IE5vZGVNYW5hZ2VyLCByZWdpc3RlclByZWRlZmluZWROb2RlcyB9IGZyb20gJy4uL21hbmFnZXJzL05vZGVNYW5hZ2VyJ1xuaW1wb3J0IHsgcmVnaXN0ZXJQcmVkZWZpbmVkU291cmNlcywgU291cmNlTWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzL1NvdXJjZU1hbmFnZXInXG5pbXBvcnQgeyBDYWNoZU1hbmFnZXIgfSBmcm9tICcuLi9tYW5hZ2Vycy9DYWNoZU1hbmFnZXInXG5pbXBvcnQgeyBQcm9qZWN0TWFuYWdlciB9IGZyb20gJy4uL21hbmFnZXJzL1Byb2plY3RNYW5hZ2VyJ1xuaW1wb3J0IFN0b3JlIGZyb20gJ0B4cmVuZ2luZS9jbGllbnQtY29yZS9zcmMvc3RvcmUnXG5cbmNvbnN0IG1heFVwbG9hZFNpemUgPSAyNVxuXG4vKipcbiAqIGdldFNjZW5lVXJsIHVzZWQgdG8gY3JlYXRlIHVybCBmb3IgdGhlIHNjZW5lLlxuICpcbiAqIEBhdXRob3IgUm9iZXJ0IExvbmdcbiAqIEBwYXJhbSAge2FueX0gc2NlbmVJZFxuICogQHJldHVybiB7c3RyaW5nfSAgICAgICAgIFt1cmxdXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRTY2VuZVVybCA9IChzY2VuZUlkKTogc3RyaW5nID0+IGAke2NvbmZpZ3MuQVBQX1VSTH0vc2NlbmVzLyR7c2NlbmVJZH1gXG5cbi8qKlxuICogcHVibGlzaFByb2plY3QgaXMgdXNlZCB0byBwdWJsaXNoIHByb2plY3QsIGZpcnN0bHkgd2Ugc2F2ZSB0aGUgcHJvamVjdCB0aGUgcHVibGlzaC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAcGFyYW0gIHthbnl9ICBwcm9qZWN0XG4gKiBAcGFyYW0gIHthbnl9ICBzaG93RGlhbG9nXG4gKiBAcGFyYW0gIHthbnl9ICBoaWRlRGlhbG9nXG4gKiBAcmV0dXJuIHtQcm9taXNlfSAgICAgICAgICAgIFtyZXR1cm5zIHB1Ymxpc2hlZCBwcm9qZWN0IGRhdGFdXG4gKi9cbmV4cG9ydCBjb25zdCBwdWJsaXNoUHJvamVjdCA9IGFzeW5jIChwcm9qZWN0LCBzaG93RGlhbG9nLCBoaWRlRGlhbG9nPyk6IFByb21pc2U8YW55PiA9PiB7XG4gIGxldCBzY3JlZW5zaG90VXJsXG4gIHRyeSB7XG4gICAgY29uc3Qgc2NlbmUgPSBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmVcblxuICAgIGNvbnN0IGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKVxuICAgIGNvbnN0IHNpZ25hbCA9IGFib3J0Q29udHJvbGxlci5zaWduYWxcblxuICAgIC8vIFNhdmUgdGhlIHNjZW5lIGlmIGl0IGhhcyBiZWVuIG1vZGlmaWVkLlxuICAgIGlmIChTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmVNb2RpZmllZCkge1xuICAgICAgc2hvd0RpYWxvZyhQcm9ncmVzc0RpYWxvZywge1xuICAgICAgICB0aXRsZTogaTE4bi50KCdlZGl0b3I6c2F2aW5nJyksXG4gICAgICAgIG1lc3NhZ2U6IGkxOG4udCgnZWRpdG9yOnNhdmluZ01zZycpLFxuICAgICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgICBvbkNhbmNlbDogKCkgPT4ge1xuICAgICAgICAgIGFib3J0Q29udHJvbGxlci5hYm9ydCgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAvLyBzYXZpbmcgcHJvamVjdC5cbiAgICAgIHByb2plY3QgPSBhd2FpdCBzYXZlUHJvamVjdChwcm9qZWN0LnByb2plY3RfaWQsIHNpZ25hbClcblxuICAgICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGkxOG4udCgnZWRpdG9yOmVycm9ycy5wdWJsaXNoUHJvamVjdEFib3J0ZWQnKSlcbiAgICAgICAgZXJyb3JbJ2Fib3J0ZWQnXSA9IHRydWVcbiAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaG93RGlhbG9nKFByb2dyZXNzRGlhbG9nLCB7XG4gICAgICB0aXRsZTogaTE4bi50KCdlZGl0b3I6Z2VuZXJhdGVTY3JlZW5zaG90JyksXG4gICAgICBtZXNzYWdlOiBpMThuLnQoJ2VkaXRvcjpnZW5lcmF0ZVNjcmVlbnNob3RNc2cnKVxuICAgIH0pXG5cbiAgICAvLyBXYWl0IGZvciA1bXMgc28gdGhhdCB0aGUgUHJvZ3Jlc3NEaWFsb2cgc2hvd3MgdXAuXG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNSkpXG5cbiAgICAvLyBUYWtlIGEgc2NyZWVuc2hvdCBvZiB0aGUgc2NlbmUgZnJvbSB0aGUgY3VycmVudCBjYW1lcmEgcG9zaXRpb24gdG8gdXNlIGFzIHRoZSB0aHVtYm5haWxcbiAgICBjb25zdCBzY3JlZW5zaG90ID0gYXdhaXQgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnRha2VTY3JlZW5zaG90KClcbiAgICBjb25zb2xlLmxvZygnU2NyZWVuc2hvdCBpcycpXG4gICAgY29uc29sZS5sb2coc2NyZWVuc2hvdClcbiAgICBjb25zdCB7IGJsb2I6IHNjcmVlbnNob3RCbG9iLCBjYW1lcmFUcmFuc2Zvcm06IHNjcmVlbnNob3RDYW1lcmFUcmFuc2Zvcm0gfSA9IHNjcmVlbnNob3RcbiAgICBjb25zb2xlLmxvZygnc2NyZWVuc2hvdEJsb2IgaXMnKVxuICAgIGNvbnNvbGUubG9nKHNjcmVlbnNob3RCbG9iKVxuXG4gICAgc2NyZWVuc2hvdFVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoc2NyZWVuc2hvdEJsb2IpXG5cbiAgICBjb25zb2xlLmxvZygnU2NyZWVuc2hvdCB1cmwgaXMnLCBzY3JlZW5zaG90VXJsKVxuXG4gICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihpMThuLnQoJ2VkaXRvcjplcnJvcnMucHVibGlzaFByb2plY3RBYm9ydGVkJykpXG4gICAgICBlcnJvclsnYWJvcnRlZCddID0gdHJ1ZVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG5cbiAgICBsZXQgeyBuYW1lIH0gPSBzY2VuZS5tZXRhZGF0YVxuXG4gICAgbmFtZSA9IChwcm9qZWN0LnNjZW5lICYmIHByb2plY3Quc2NlbmUubmFtZSkgfHwgbmFtZSB8fCBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmUubmFtZVxuXG4gICAgLy8gRGlzcGxheSB0aGUgcHVibGlzaCBkaWFsb2cgYW5kIHdhaXQgZm9yIHRoZSB1c2VyIHRvIHN1Ym1pdCAvIGNhbmNlbFxuICAgIGNvbnN0IHB1Ymxpc2hQYXJhbXM6IGFueSA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBzaG93RGlhbG9nKFB1Ymxpc2hEaWFsb2csIHtcbiAgICAgICAgc2NyZWVuc2hvdFVybCxcbiAgICAgICAgaW5pdGlhbFNjZW5lUGFyYW1zOiB7XG4gICAgICAgICAgbmFtZVxuICAgICAgICB9LFxuICAgICAgICBvbkNhbmNlbDogKCkgPT4gcmVzb2x2ZShudWxsKSxcbiAgICAgICAgb25QdWJsaXNoOiByZXNvbHZlXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICAvLyBVc2VyIGNsaWNrZWQgY2FuY2VsXG4gICAgaWYgKCFwdWJsaXNoUGFyYW1zKSB7XG4gICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHNjcmVlbnNob3RVcmwpXG4gICAgICBoaWRlRGlhbG9nKClcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGkxOG4udCgnZWRpdG9yOmVycm9ycy5wdWJsaXNoUHJvamVjdEFib3J0ZWQnKSlcbiAgICAgIGVycm9yWydhYm9ydGVkJ10gPSB0cnVlXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgc2NlbmUgd2l0aCB0aGUgbWV0YWRhdGEgZnJvbSB0aGUgcHVibGlzaERpYWxvZ1xuICAgIHNjZW5lLnNldE1ldGFkYXRhKHtcbiAgICAgIG5hbWU6IHB1Ymxpc2hQYXJhbXMubmFtZSxcbiAgICAgIHByZXZpZXdDYW1lcmFUcmFuc2Zvcm06IHNjcmVlbnNob3RDYW1lcmFUcmFuc2Zvcm1cbiAgICB9KVxuXG4gICAgc2hvd0RpYWxvZyhQcm9ncmVzc0RpYWxvZywge1xuICAgICAgdGl0bGU6IGkxOG4udCgnZWRpdG9yOnB1Ymxpc2hpbmdTY2VuZScpLFxuICAgICAgbWVzc2FnZTogaTE4bi50KCdlZGl0b3I6cHVibGlzaGluZ1NjZW5lTXNnJyksXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgb25DYW5jZWw6ICgpID0+IHtcbiAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gQ2xvbmUgdGhlIGV4aXN0aW5nIHNjZW5lLCBwcm9jZXNzIGl0IGZvciBleHBvcnRpbmcsIGFuZCB0aGVuIGV4cG9ydCBhcyBhIGdsYiBibG9iXG4gICAgY29uc3QgeyBnbGJCbG9iLCBjaHVua3MgfSA9IGF3YWl0IFNjZW5lTWFuYWdlci5pbnN0YW5jZS5leHBvcnRTY2VuZSh7IHNjb3JlczogdHJ1ZSB9KVxuXG4gICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihpMThuLnQoJ2VkaXRvcjplcnJvcnMucHVibGlzaFByb2plY3RBYm9ydGVkJykpXG4gICAgICBlcnJvclsnYWJvcnRlZCddID0gdHJ1ZVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG5cbiAgICBjb25zdCBwZXJmb3JtYW5jZUNoZWNrUmVzdWx0ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIHNob3dEaWFsb2coUGVyZm9ybWFuY2VDaGVja0RpYWxvZywge1xuICAgICAgICBjaHVua3MsXG4gICAgICAgIG9uQ2FuY2VsOiAoKSA9PiByZXNvbHZlKGZhbHNlKSxcbiAgICAgICAgb25Db25maXJtOiAoKSA9PiByZXNvbHZlKHRydWUpXG4gICAgICB9KVxuICAgIH0pXG5cbiAgICBpZiAoIXBlcmZvcm1hbmNlQ2hlY2tSZXN1bHQpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGkxOG4udCgnZWRpdG9yOmVycm9ycy5wdWJsaXNoUHJvamVjdEFib3J0ZWQnKSlcbiAgICAgIGVycm9yWydhYm9ydGVkJ10gPSB0cnVlXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cblxuICAgIC8vIFNlcmlhbGl6ZSBFZGl0b3Igc2NlbmVcbiAgICBjb25zdCBzZXJpYWxpemVkU2NlbmUgPSBhd2FpdCBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmUuc2VyaWFsaXplKHByb2plY3QucHJvamVjdF9pZClcbiAgICBjb25zdCBzY2VuZUJsb2IgPSBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkoc2VyaWFsaXplZFNjZW5lKV0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nIH0pXG5cbiAgICBzaG93RGlhbG9nKFByb2dyZXNzRGlhbG9nLCB7XG4gICAgICB0aXRsZTogaTE4bi50KCdlZGl0b3I6cHVibGlzaGluZ1NjZW5lJyksXG4gICAgICBtZXNzYWdlOiBpMThuLnQoJ2VkaXRvcjpwdWJsaXNoaW5nU2NlbmVNc2cnKSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgICBvbkNhbmNlbDogKCkgPT4ge1xuICAgICAgICBhYm9ydENvbnRyb2xsZXIuYWJvcnQoKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zdCBzaXplID0gZ2xiQmxvYi5zaXplIC8gMTAyNCAvIDEwMjRcbiAgICBjb25zdCBtYXhTaXplID0gbWF4VXBsb2FkU2l6ZVxuICAgIGlmIChzaXplID4gbWF4U2l6ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGkxOG4udCgnZWRpdG9yOmVycm9ycy5zY2VuZVRvb0xhcmdlJywgeyBzaXplOiBzaXplLnRvRml4ZWQoMiksIG1heFNpemUgfSkpXG4gICAgfVxuXG4gICAgc2hvd0RpYWxvZyhQcm9ncmVzc0RpYWxvZywge1xuICAgICAgdGl0bGU6IGkxOG4udCgnZWRpdG9yOnB1Ymxpc2hpbmdTY2VuZScpLFxuICAgICAgbWVzc2FnZTogaTE4bi50KCdlZGl0b3I6dXBsb2FkaW5nVGh1bWJuYWlsTXNnJyksXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgb25DYW5jZWw6ICgpID0+IHtcbiAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gVXBsb2FkIHRoZSBzY3JlZW5zaG90IGZpbGVcbiAgICBjb25zdCB7XG4gICAgICBmaWxlX2lkOiBzY3JlZW5zaG90SWQsXG4gICAgICBtZXRhOiB7IGFjY2Vzc190b2tlbjogc2NyZWVuc2hvdFRva2VuIH1cbiAgICB9ID0gKGF3YWl0IHVwbG9hZChzY3JlZW5zaG90QmxvYiwgdW5kZWZpbmVkLCBhYm9ydENvbnRyb2xsZXIuc2lnbmFsKSkgYXMgYW55XG5cbiAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGkxOG4udCgnZWRpdG9yOmVycm9ycy5wdWJsaXNoUHJvamVjdEFib3J0ZWQnKSlcbiAgICAgIGVycm9yWydhYm9ydGVkJ10gPSB0cnVlXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cblxuICAgIGNvbnN0IHtcbiAgICAgIGZpbGVfaWQ6IGdsYklkLFxuICAgICAgbWV0YTogeyBhY2Nlc3NfdG9rZW46IGdsYlRva2VuIH1cbiAgICB9OiBhbnkgPSBhd2FpdCB1cGxvYWQoZ2xiQmxvYiwgKHVwbG9hZFByb2dyZXNzKSA9PiB7XG4gICAgICBzaG93RGlhbG9nKFxuICAgICAgICBQcm9ncmVzc0RpYWxvZyxcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBpMThuLnQoJ2VkaXRvcjpwdWJsaXNoaW5nU2NlbmUnKSxcbiAgICAgICAgICBtZXNzYWdlOiBpMThuLnQoJ2VkaXRvcjp1cGxvYWRpbmdTY2VuZU1zZycsIHsgcGVyY2VudGFnZTogTWF0aC5mbG9vcih1cGxvYWRQcm9ncmVzcyAqIDEwMCkgfSksXG4gICAgICAgICAgb25DYW5jZWw6ICgpID0+IHtcbiAgICAgICAgICAgIGFib3J0Q29udHJvbGxlci5hYm9ydCgpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhYm9ydENvbnRyb2xsZXIuc2lnbmFsXG4gICAgICApXG4gICAgfSlcblxuICAgIGlmIChzaWduYWwuYWJvcnRlZCkge1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoaTE4bi50KCdlZGl0b3I6ZXJyb3JzLnB1Ymxpc2hQcm9qZWN0QWJvcnRlZCcpKVxuICAgICAgZXJyb3JbJ2Fib3J0ZWQnXSA9IHRydWVcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuXG4gICAgY29uc3Qge1xuICAgICAgZmlsZV9pZDogc2NlbmVGaWxlSWQsXG4gICAgICBtZXRhOiB7IGFjY2Vzc190b2tlbjogc2NlbmVGaWxlVG9rZW4gfVxuICAgIH0gPSAoYXdhaXQgdXBsb2FkKHNjZW5lQmxvYiwgdW5kZWZpbmVkLCBhYm9ydENvbnRyb2xsZXIuc2lnbmFsKSkgYXMgYW55XG5cbiAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGkxOG4udCgnZWRpdG9yOmVycm9ycy5wdWJsaXNoUHJvamVjdEFib3J0ZWQnKSlcbiAgICAgIGVycm9yWydhYm9ydGVkJ10gPSB0cnVlXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cblxuICAgIGNvbnN0IHNjZW5lUGFyYW1zID0ge1xuICAgICAgc2NyZWVuc2hvdF9maWxlX2lkOiBzY3JlZW5zaG90SWQsXG4gICAgICBzY3JlZW5zaG90X2ZpbGVfdG9rZW46IHNjcmVlbnNob3RUb2tlbixcbiAgICAgIG1vZGVsX2ZpbGVfaWQ6IGdsYklkLFxuICAgICAgbW9kZWxfZmlsZV90b2tlbjogZ2xiVG9rZW4sXG4gICAgICBzY2VuZV9maWxlX2lkOiBzY2VuZUZpbGVJZCxcbiAgICAgIHNjZW5lX2ZpbGVfdG9rZW46IHNjZW5lRmlsZVRva2VuLFxuICAgICAgbmFtZTogcHVibGlzaFBhcmFtcy5uYW1lXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHByb2plY3QgPSBhd2FpdCBQcm9qZWN0TWFuYWdlci5pbnN0YW5jZS5mZWF0aGVyc0NsaWVudFxuICAgICAgICAuc2VydmljZShgL3B1Ymxpc2gtcHJvamVjdC8ke3Byb2plY3QucHJvamVjdF9pZH1gKVxuICAgICAgICAuY3JlYXRlKHsgc2NlbmU6IHNjZW5lUGFyYW1zIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcilcbiAgICB9XG5cbiAgICBzaG93RGlhbG9nKFB1Ymxpc2hlZFNjZW5lRGlhbG9nLCB7XG4gICAgICBzY2VuZU5hbWU6IHNjZW5lUGFyYW1zLm5hbWUsXG4gICAgICBzY3JlZW5zaG90VXJsLFxuICAgICAgc2NlbmVVcmw6IGdldFNjZW5lVXJsKHByb2plY3Quc2NlbmUuc2NlbmVfaWQpLFxuICAgICAgb25Db25maXJtOiAoKSA9PiB7XG4gICAgICAgIGhpZGVEaWFsb2coKVxuICAgICAgfVxuICAgIH0pXG4gIH0gZmluYWxseSB7XG4gICAgaWYgKHNjcmVlbnNob3RVcmwpIHtcbiAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoc2NyZWVuc2hvdFVybClcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcHJvamVjdFxufVxuXG4vKipcbiAqIFN0eWxlZEVkaXRvckNvbnRhaW5lciBjb21wb25lbnQgaXMgdXNlZCBhcyByb290IGVsZW1lbnQgb2YgbmV3IHByb2plY3QgcGFnZS5cbiAqIE9uIHRoaXMgcGFnZSB3ZSBoYXZlIGFuIGVkaXRvciB0byBjcmVhdGUgYSBuZXcgb3IgbW9kaWZpbmcgYW4gZXhpc3RpbmcgcHJvamVjdC5cbiAqXG4gKiBAYXV0aG9yIFJvYmVydCBMb25nXG4gKiBAdHlwZSB7U3R5bGVkIGNvbXBvbmVudH1cbiAqL1xuY29uc3QgU3R5bGVkRWRpdG9yQ29udGFpbmVyID0gKHN0eWxlZCBhcyBhbnkpLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleDogMTtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgcG9zaXRpb246IGZpeGVkO1xuYFxuXG4vKipcbiAqU3R5bGVkIGNvbXBvbmVudCB1c2VkIGFzIHdvcmtzcGFjZSBjb250YWluZXIuXG4gKlxuICogQGF1dGhvciBSb2JlcnQgTG9uZ1xuICogQHR5cGUge3R5cGV9XG4gKi9cbmNvbnN0IFdvcmtzcGFjZUNvbnRhaW5lciA9IChzdHlsZWQgYXMgYW55KS5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXg6IDE7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIG1hcmdpbjogMHB4O1xuYFxuXG4vKipcbiAqU3R5bGVkIGNvbXBvbmVudCB1c2VkIGFzIGRvY2sgY29udGFpbmVyLlxuICpcbiAqIEBhdXRob3IgSGFuemxhIE1hdGVlblxuICogQHR5cGUge3R5cGV9XG4gKi9cbmNvbnN0IERvY2tDb250YWluZXIgPSAoc3R5bGVkIGFzIGFueSkuZGl2YFxuICAuZG9jay1wYW5lbCB7XG4gICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgb3BhY2l0eTogMC44O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgfVxuICAuZG9jay1wYW5lbDpmaXJzdC1jaGlsZCB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHotaW5kZXg6IDk5O1xuICB9XG4gIC5kb2NrLXBhbmVsW2RhdGEtZG9ja2lkPVwiKzNcIl0ge1xuICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgfVxuICAuZG9jay1kaXZpZGVyIHtcbiAgICBwb2ludGVyLWV2ZW50czogYXV0bztcbiAgfVxuICAuZG9jayB7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGJhY2tncm91bmQ6ICMyODJDMzE7XG4gIH1cbiAgLmRvY2stdG9wIC5kb2NrLWJhciB7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsMCwwLDAuMik7XG4gICAgYmFja2dyb3VuZDogIzI4MkMzMTtcbiAgfVxuICAuZG9jay10YWIge1xuICAgIGJhY2tncm91bmQ6ICMyODJDMzE7IFxuICAgIGJvcmRlci1ib3R0b206IG5vbmU7XG4gIH1cbiAgLmRvY2stdGFiOmhvdmVyLCAuZG9jay10YWItYWN0aXZlLCAuZG9jay10YWItYWN0aXZlOmhvdmVyIHtcbiAgICBjb2xvcjogI2ZmZmZmZjsgXG4gIH1cbiAgLmRvY2staW5rLWJhciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsgXG4gIH1cbmBcblxudHlwZSBFZGl0b3JDb250YWluZXJQcm9wcyA9IHtcbiAgdDogYW55XG4gIG1hdGNoOiBhbnlcbiAgbG9jYXRpb246IGFueVxuICBoaXN0b3J5OiBhbnlcbn1cbnR5cGUgRWRpdG9yQ29udGFpbmVyU3RhdGUgPSB7XG4gIHByb2plY3Q6IGFueVxuICBwYXJlbnRTY2VuZUlkOiBudWxsXG4gIC8vIHRlbXBsYXRlVXJsOiBhbnk7XG4gIHNldHRpbmdzQ29udGV4dDogYW55XG4gIC8vIGVycm9yOiBudWxsO1xuICBjcmVhdGluZ1Byb2plY3Q6IGFueVxuICBEaWFsb2dDb21wb25lbnQ6IGFueVxuICBwYXRoUGFyYW1zOiBNYXA8c3RyaW5nLCB1bmtub3duPlxuICBxdWVyeVBhcmFtczogTWFwPHN0cmluZywgc3RyaW5nPlxuICBkaWFsb2dQcm9wczoge31cbiAgbW9kaWZpZWQ6IGJvb2xlYW5cbn1cblxuLyoqXG4gKiBFZGl0b3JDb250YWluZXIgY2xhc3MgdXNlZCBmb3IgY3JlYXRpbmcgY29udGFpbmVyIGZvciBFZGl0b3JcbiAqXG4gKiAgQGF1dGhvciBSb2JlcnQgTG9uZ1xuICovXG5jbGFzcyBFZGl0b3JDb250YWluZXIgZXh0ZW5kcyBDb21wb25lbnQ8RWRpdG9yQ29udGFpbmVyUHJvcHMsIEVkaXRvckNvbnRhaW5lclN0YXRlPiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgbGV0IHNldHRpbmdzID0gZGVmYXVsdFNldHRpbmdzXG4gICAgY29uc3Qgc3RvcmVkU2V0dGluZ3MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWRpdG9yLXNldHRpbmdzJylcbiAgICBpZiAoc3RvcmVkU2V0dGluZ3MpIHtcbiAgICAgIHNldHRpbmdzID0gSlNPTi5wYXJzZShzdG9yZWRTZXR0aW5ncylcbiAgICB9XG5cbiAgICBQcm9qZWN0TWFuYWdlci5idWlsZFByb2plY3RNYW5hZ2VyKHNldHRpbmdzKVxuICAgIENvbW1hbmRNYW5hZ2VyLmJ1aWxkQ29tbWFuZE1hbmFnZXIoKVxuICAgIFNjZW5lTWFuYWdlci5idWlsZFNjZW5lTWFuYWdlcigpXG4gICAgQ29udHJvbE1hbmFnZXIuYnVpbGRDb250cm9sTWFuYWdlcigpXG4gICAgTm9kZU1hbmFnZXIuYnVpbGROb2RlTWFuYWdlcihTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmUpXG4gICAgU291cmNlTWFuYWdlci5idWlsZFNvdXJjZU1hbmFnZXIoKVxuICAgIENhY2hlTWFuYWdlci5pbml0KClcblxuICAgIHJlZ2lzdGVyUHJlZGVmaW5lZE5vZGVzKClcbiAgICByZWdpc3RlclByZWRlZmluZWRTb3VyY2VzKClcblxuICAgIFByb2plY3RNYW5hZ2VyLmluc3RhbmNlLmluaXRpYWxpemVGZWF0aGVyc0NsaWVudChnZXRUb2tlbigpKVxuXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuYWRkTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlJFTkRFUkVSX0lOSVRJQUxJWkVELnRvU3RyaW5nKCksIHRoaXMuc2V0RGVidWdpbmZvKVxuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmFkZExpc3RlbmVyKEVkaXRvckV2ZW50cy5QUk9KRUNUX0xPQURFRC50b1N0cmluZygpLCB0aGlzLm9uUHJvamVjdExvYWRlZClcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihFZGl0b3JFdmVudHMuRVJST1IudG9TdHJpbmcoKSwgdGhpcy5vbkVkaXRvckVycm9yKVxuICAgIENvbW1hbmRNYW5hZ2VyLmluc3RhbmNlLmFkZExpc3RlbmVyKEVkaXRvckV2ZW50cy5TQVZFX1BST0pFQ1QudG9TdHJpbmcoKSwgdGhpcy5vblNhdmVQcm9qZWN0KVxuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIC8vIGVycm9yOiBudWxsLFxuICAgICAgcHJvamVjdDogbnVsbCxcbiAgICAgIHBhcmVudFNjZW5lSWQ6IG51bGwsXG4gICAgICBwYXRoUGFyYW1zOiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKHByb3BzLm1hdGNoLnBhcmFtcykpLFxuICAgICAgcXVlcnlQYXJhbXM6IG5ldyBNYXAobmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKS5lbnRyaWVzKCkpLFxuICAgICAgc2V0dGluZ3NDb250ZXh0OiB7XG4gICAgICAgIHNldHRpbmdzLFxuICAgICAgICB1cGRhdGVTZXR0aW5nOiB0aGlzLnVwZGF0ZVNldHRpbmdcbiAgICAgIH0sXG4gICAgICBjcmVhdGluZ1Byb2plY3Q6IG51bGwsXG4gICAgICAvLyB0ZW1wbGF0ZVVybDogZGVmYXVsdFRlbXBsYXRlVXJsLFxuICAgICAgRGlhbG9nQ29tcG9uZW50OiBudWxsLFxuICAgICAgZGlhbG9nUHJvcHM6IHt9LFxuICAgICAgbW9kaWZpZWQ6IGZhbHNlXG4gICAgfVxuXG4gICAgdGhpcy50ID0gdGhpcy5wcm9wcy50XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBjb25zdCBkaXNwYXRjaCA9IFN0b3JlLnN0b3JlLmRpc3BhdGNoXG4gICAgaWYgKGFjY2Vzc0xvY2F0aW9uU3RhdGUoKS5sb2NhdGlvbnMudXBkYXRlTmVlZGVkLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBkaXNwYXRjaChMb2NhdGlvblNlcnZpY2UuZmV0Y2hBZG1pbkxvY2F0aW9ucygpKVxuICAgIH1cbiAgICBpZiAoYWNjZXNzU2NlbmVTdGF0ZSgpLnNjZW5lcy51cGRhdGVOZWVkZWQudmFsdWUgPT09IHRydWUpIHtcbiAgICAgIGRpc3BhdGNoKFNjZW5lU2VydmljZS5mZXRjaEFkbWluU2NlbmVzKCkpXG4gICAgfVxuICAgIGlmIChhY2Nlc3NMb2NhdGlvblN0YXRlKCkubG9jYXRpb25UeXBlcy51cGRhdGVOZWVkZWQudmFsdWUgPT09IHRydWUpIHtcbiAgICAgIGRpc3BhdGNoKExvY2F0aW9uU2VydmljZS5mZXRjaExvY2F0aW9uVHlwZXMoKSlcbiAgICB9XG4gICAgY29uc3QgcGF0aFBhcmFtcyA9IHRoaXMuc3RhdGUucGF0aFBhcmFtc1xuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gdGhpcy5zdGF0ZS5xdWVyeVBhcmFtc1xuICAgIGNvbnN0IHByb2plY3RJZCA9IHBhdGhQYXJhbXMuZ2V0KCdwcm9qZWN0SWQnKVxuXG4gICAgaWYgKHByb2plY3RJZCA9PT0gJ25ldycpIHtcbiAgICAgIGlmIChxdWVyeVBhcmFtcy5oYXMoJ3RlbXBsYXRlJykpIHtcbiAgICAgICAgdGhpcy5sb2FkUHJvamVjdFRlbXBsYXRlKHF1ZXJ5UGFyYW1zLmdldCgndGVtcGxhdGUnKSlcbiAgICAgIH0gZWxzZSBpZiAocXVlcnlQYXJhbXMuaGFzKCdzY2VuZUlkJykpIHtcbiAgICAgICAgdGhpcy5sb2FkU2NlbmUocXVlcnlQYXJhbXMuZ2V0KCdzY2VuZUlkJykpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxvYWRQcm9qZWN0VGVtcGxhdGUoZGVmYXVsdFRlbXBsYXRlVXJsKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocHJvamVjdElkID09PSAndHV0b3JpYWwnKSB7XG4gICAgICB0aGlzLmxvYWRQcm9qZWN0VGVtcGxhdGUodHV0b3JpYWxUZW1wbGF0ZVVybClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sb2FkUHJvamVjdChwcm9qZWN0SWQpXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogRWRpdG9yQ29udGFpbmVyUHJvcHMpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5sb2NhdGlvbi5wYXRobmFtZSAhPT0gcHJldlByb3BzLmxvY2F0aW9uLnBhdGhuYW1lICYmICF0aGlzLnN0YXRlLmNyZWF0aW5nUHJvamVjdCkge1xuICAgICAgLy8gY29uc3QgeyBwcm9qZWN0SWQgfSA9IHRoaXMucHJvcHMubWF0Y2gucGFyYW1zO1xuICAgICAgY29uc3QgcHJldlByb2plY3RJZCA9IHByZXZQcm9wcy5tYXRjaC5wYXJhbXMucHJvamVjdElkXG4gICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBNYXAobmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKS5lbnRyaWVzKCkpXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgcXVlcnlQYXJhbXNcbiAgICAgIH0pXG4gICAgICBjb25zdCBwYXRoUGFyYW1zID0gdGhpcy5zdGF0ZS5wYXRoUGFyYW1zXG4gICAgICBjb25zdCBwcm9qZWN0SWQgPSBwYXRoUGFyYW1zLmdldCgncHJvamVjdElkJylcbiAgICAgIGxldCB0ZW1wbGF0ZVVybCA9IG51bGxcblxuICAgICAgaWYgKHByb2plY3RJZCA9PT0gJ25ldycgJiYgIXF1ZXJ5UGFyYW1zLmhhcygnc2NlbmVJZCcpKSB7XG4gICAgICAgIHRlbXBsYXRlVXJsID0gcXVlcnlQYXJhbXMuZ2V0KCd0ZW1wbGF0ZScpIHx8IGRlZmF1bHRUZW1wbGF0ZVVybFxuICAgICAgfSBlbHNlIGlmIChwcm9qZWN0SWQgPT09ICd0dXRvcmlhbCcpIHtcbiAgICAgICAgdGVtcGxhdGVVcmwgPSB0dXRvcmlhbFRlbXBsYXRlVXJsXG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9qZWN0SWQgPT09ICduZXcnIHx8IHByb2plY3RJZCA9PT0gJ3R1dG9yaWFsJykge1xuICAgICAgICB0aGlzLmxvYWRQcm9qZWN0VGVtcGxhdGUodGVtcGxhdGVVcmwpXG4gICAgICB9IGVsc2UgaWYgKHByZXZQcm9qZWN0SWQgIT09ICd0dXRvcmlhbCcgJiYgcHJldlByb2plY3RJZCAhPT0gJ25ldycpIHtcbiAgICAgICAgdGhpcy5sb2FkUHJvamVjdChwcm9qZWN0SWQpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoRWRpdG9yRXZlbnRzLlNBVkVfUFJPSkVDVC50b1N0cmluZygpLCB0aGlzLm9uU2F2ZVByb2plY3QpXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UucmVtb3ZlTGlzdGVuZXIoRWRpdG9yRXZlbnRzLkVSUk9SLnRvU3RyaW5nKCksIHRoaXMub25FZGl0b3JFcnJvcilcbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihFZGl0b3JFdmVudHMuUFJPSkVDVF9MT0FERUQudG9TdHJpbmcoKSwgdGhpcy5vblByb2plY3RMb2FkZWQpXG4gICAgUHJvamVjdE1hbmFnZXIuaW5zdGFuY2UuZGlzcG9zZSgpXG4gIH1cblxuICB0OiBGdW5jdGlvblxuXG4gIGFzeW5jIGxvYWRQcm9qZWN0VGVtcGxhdGUodGVtcGxhdGVGaWxlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBwcm9qZWN0OiBudWxsLFxuICAgICAgcGFyZW50U2NlbmVJZDogbnVsbFxuICAgICAgLy8gdGVtcGxhdGVVcmxcbiAgICB9KVxuXG4gICAgdGhpcy5zaG93RGlhbG9nKFByb2dyZXNzRGlhbG9nLCB7XG4gICAgICB0aXRsZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZycpLCAvLyBcIkxvYWRpbmcgUHJvamVjdFwiLFxuICAgICAgbWVzc2FnZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZ01zZycpXG4gICAgfSlcblxuICAgIHRyeSB7XG4gICAgICBpZiAodGVtcGxhdGVGaWxlLm1ldGFkYXRhKSB7XG4gICAgICAgIGRlbGV0ZSB0ZW1wbGF0ZUZpbGUubWV0YWRhdGEuc2NlbmVVcmxcbiAgICAgICAgZGVsZXRlIHRlbXBsYXRlRmlsZS5tZXRhZGF0YS5zY2VuZUlkXG4gICAgICB9XG5cbiAgICAgIGF3YWl0IFByb2plY3RNYW5hZ2VyLmluc3RhbmNlLmxvYWRQcm9qZWN0KHRlbXBsYXRlRmlsZSlcblxuICAgICAgdGhpcy5oaWRlRGlhbG9nKClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcblxuICAgICAgdGhpcy5zaG93RGlhbG9nKEVycm9yRGlhbG9nLCB7XG4gICAgICAgIHRpdGxlOiB0aGlzLnQoJ2VkaXRvcjpsb2FkaW5nRXJyb3InKSxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCB0aGlzLnQoJ2VkaXRvcjpsb2FkaW5nRXJyb3JNc2cnKSxcbiAgICAgICAgZXJyb3JcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZFNjZW5lKHNjZW5lSWQpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHByb2plY3Q6IG51bGwsXG4gICAgICBwYXJlbnRTY2VuZUlkOiBzY2VuZUlkXG4gICAgICAvLyB0ZW1wbGF0ZVVybDogbnVsbCxcbiAgICB9KVxuXG4gICAgdGhpcy5zaG93RGlhbG9nKFByb2dyZXNzRGlhbG9nLCB7XG4gICAgICB0aXRsZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZycpLFxuICAgICAgbWVzc2FnZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZ01zZycpXG4gICAgfSlcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzY2VuZTogYW55ID0gYXdhaXQgZ2V0U2NlbmUoc2NlbmVJZClcbiAgICAgIGNvbnNvbGUud2FybignbG9hZFNjZW5lOnNjZW5lJywgc2NlbmUpXG4gICAgICBjb25zdCBwcm9qZWN0RmlsZSA9IHNjZW5lLmRhdGFcblxuICAgICAgYXdhaXQgUHJvamVjdE1hbmFnZXIuaW5zdGFuY2UubG9hZFByb2plY3QocHJvamVjdEZpbGUpXG5cbiAgICAgIHRoaXMuaGlkZURpYWxvZygpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG5cbiAgICAgIHRoaXMuc2hvd0RpYWxvZyhFcnJvckRpYWxvZywge1xuICAgICAgICB0aXRsZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZ0Vycm9yJyksXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgdGhpcy50KCdlZGl0b3I6bG9hZGluZ0Vycm9yTXNnJyksXG4gICAgICAgIGVycm9yXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGltcG9ydFByb2plY3QocHJvamVjdEZpbGUpIHtcbiAgICBjb25zdCBwcm9qZWN0ID0gdGhpcy5zdGF0ZS5wcm9qZWN0XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHByb2plY3Q6IG51bGwsXG4gICAgICBwYXJlbnRTY2VuZUlkOiBudWxsXG4gICAgICAvLyB0ZW1wbGF0ZVVybDogbnVsbCxcbiAgICB9KVxuXG4gICAgdGhpcy5zaG93RGlhbG9nKFByb2dyZXNzRGlhbG9nLCB7XG4gICAgICB0aXRsZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZycpLFxuICAgICAgbWVzc2FnZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZ01zZycpXG4gICAgfSlcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBQcm9qZWN0TWFuYWdlci5pbnN0YW5jZS5sb2FkUHJvamVjdChwcm9qZWN0RmlsZSlcblxuICAgICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lTW9kaWZpZWQgPSB0cnVlXG4gICAgICB0aGlzLnVwZGF0ZU1vZGlmaWVkU3RhdGUoKVxuXG4gICAgICB0aGlzLmhpZGVEaWFsb2coKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxuXG4gICAgICB0aGlzLnNob3dEaWFsb2coRXJyb3JEaWFsb2csIHtcbiAgICAgICAgdGl0bGU6IHRoaXMudCgnZWRpdG9yOmxvYWRpbmdFcnJvcicpLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIHx8IHRoaXMudCgnZWRpdG9yOmxvYWRpbmdFcnJvck1zZycpLFxuICAgICAgICBlcnJvclxuICAgICAgfSlcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKHByb2plY3QpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgcHJvamVjdFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGxvYWRQcm9qZWN0KHByb2plY3RJZCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgcHJvamVjdDogbnVsbCxcbiAgICAgIHBhcmVudFNjZW5lSWQ6IG51bGxcbiAgICB9KVxuXG4gICAgdGhpcy5zaG93RGlhbG9nKFByb2dyZXNzRGlhbG9nLCB7XG4gICAgICB0aXRsZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZycpLFxuICAgICAgbWVzc2FnZTogdGhpcy50KCdlZGl0b3I6bG9hZGluZ01zZycpXG4gICAgfSlcblxuICAgIGxldCBwcm9qZWN0XG5cbiAgICB0cnkge1xuICAgICAgcHJvamVjdCA9IGF3YWl0IGdldFByb2plY3QocHJvamVjdElkKVxuICAgICAgUHJvamVjdE1hbmFnZXIuaW5zdGFuY2Uub3duZWRGaWxlSWRzID0gSlNPTi5wYXJzZShwcm9qZWN0Lm93bmVkRmlsZUlkcylcbiAgICAgIGdsb2JhbFRoaXMuY3VycmVudFByb2plY3RJRCA9IHByb2plY3QucHJvamVjdF9pZFxuXG4gICAgICBjb25zdCBwcm9qZWN0SW5kZXggPSBwcm9qZWN0LnByb2plY3RfdXJsLnNwbGl0KCdjb2xsZWN0aW9uLycpWzFdXG4gICAgICBjb25zdCBwcm9qZWN0RmlsZSA9IGF3YWl0IFByb2plY3RNYW5hZ2VyLmluc3RhbmNlLmZlYXRoZXJzQ2xpZW50LnNlcnZpY2UoYGNvbGxlY3Rpb25gKS5nZXQocHJvamVjdEluZGV4LCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGF3YWl0IFByb2plY3RNYW5hZ2VyLmluc3RhbmNlLmxvYWRQcm9qZWN0KHByb2plY3RGaWxlKVxuXG4gICAgICB0aGlzLmhpZGVEaWFsb2coKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxuXG4gICAgICB0aGlzLnNob3dEaWFsb2coRXJyb3JEaWFsb2csIHtcbiAgICAgICAgdGl0bGU6IHRoaXMudCgnZWRpdG9yOmxvYWRpbmdFcnJvcicpLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIHx8IHRoaXMudCgnZWRpdG9yOmxvYWRpbmdFcnJvck1zZycpLFxuICAgICAgICBlcnJvclxuICAgICAgfSlcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKHByb2plY3QpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgcHJvamVjdFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZU1vZGlmaWVkU3RhdGUodGhlbj8pIHtcbiAgICBjb25zdCBuZXh0TW9kaWZpZWQgPSBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmVNb2RpZmllZCAmJiAhdGhpcy5zdGF0ZS5jcmVhdGluZ1Byb2plY3RcblxuICAgIGlmIChuZXh0TW9kaWZpZWQgIT09IHRoaXMuc3RhdGUubW9kaWZpZWQpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBtb2RpZmllZDogbmV4dE1vZGlmaWVkIH0sIHRoZW4pXG4gICAgfSBlbHNlIGlmICh0aGVuKSB7XG4gICAgICB0aGVuKClcbiAgICB9XG4gIH1cblxuICBnZW5lcmF0ZVRvb2xiYXJNZW51ID0gKCkgPT4ge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6IHRoaXMudCgnZWRpdG9yOm1lbnViYXIubmV3UHJvamVjdCcpLFxuICAgICAgICBhY3Rpb246IHRoaXMub25OZXdQcm9qZWN0XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiB0aGlzLnQoJ2VkaXRvcjptZW51YmFyLnNhdmVQcm9qZWN0JyksXG4gICAgICAgIGhvdGtleTogYCR7Y21kT3JDdHJsU3RyaW5nfSArIFNgLFxuICAgICAgICBhY3Rpb246IHRoaXMub25TYXZlUHJvamVjdFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogdGhpcy50KCdlZGl0b3I6bWVudWJhci5zYXZlQXMnKSxcbiAgICAgICAgYWN0aW9uOiB0aGlzLm9uRHVwbGljYXRlUHJvamVjdFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogdGhpcy50KCdlZGl0b3I6bWVudWJhci5leHBvcnRHTEInKSwgLy8gVE9ETzogRGlzYWJsZWQgdGVtcG9yYXJpbHkgdGlsbCB3b3JrZXJzIGFyZSB3b3JraW5nXG4gICAgICAgIGFjdGlvbjogdGhpcy5vbkV4cG9ydFByb2plY3RcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6IHRoaXMudCgnZWRpdG9yOm1lbnViYXIuaW1wb3J0UHJvamVjdCcpLFxuICAgICAgICBhY3Rpb246IHRoaXMub25JbXBvcnRMZWdhY3lQcm9qZWN0XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiB0aGlzLnQoJ2VkaXRvcjptZW51YmFyLmV4cG9ydFByb2plY3QnKSxcbiAgICAgICAgYWN0aW9uOiB0aGlzLm9uRXhwb3J0TGVnYWN5UHJvamVjdFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogdGhpcy50KCdlZGl0b3I6bWVudWJhci5xdWl0JyksXG4gICAgICAgIGFjdGlvbjogdGhpcy5vbk9wZW5Qcm9qZWN0XG4gICAgICB9XG4gICAgXVxuICB9XG5cbiAgc2V0RGVidWdpbmZvID0gKCkgPT4ge1xuICAgIGNvbnN0IGdsID0gU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnJlbmRlcmVyLndlYmdsUmVuZGVyZXIuZ2V0Q29udGV4dCgpXG5cbiAgICBjb25zdCBkZWJ1Z0luZm8gPSBnbC5nZXRFeHRlbnNpb24oJ1dFQkdMX2RlYnVnX3JlbmRlcmVyX2luZm8nKVxuXG4gICAgbGV0IHdlYmdsVmVuZG9yID0gJ1Vua25vd24nXG4gICAgbGV0IHdlYmdsUmVuZGVyZXIgPSAnVW5rbm93bidcblxuICAgIGlmIChkZWJ1Z0luZm8pIHtcbiAgICAgIHdlYmdsVmVuZG9yID0gZ2wuZ2V0UGFyYW1ldGVyKGRlYnVnSW5mby5VTk1BU0tFRF9WRU5ET1JfV0VCR0wpXG4gICAgICB3ZWJnbFJlbmRlcmVyID0gZ2wuZ2V0UGFyYW1ldGVyKGRlYnVnSW5mby5VTk1BU0tFRF9SRU5ERVJFUl9XRUJHTClcbiAgICB9XG5cbiAgICBDb21tYW5kTWFuYWdlci5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihFZGl0b3JFdmVudHMuUkVOREVSRVJfSU5JVElBTElaRUQudG9TdHJpbmcoKSwgdGhpcy5zZXREZWJ1Z2luZm8pXG4gIH1cblxuICAvKipcbiAgICogIERpYWxvZyBDb250ZXh0XG4gICAqL1xuXG4gIHNob3dEaWFsb2cgPSAoRGlhbG9nQ29tcG9uZW50LCBkaWFsb2dQcm9wcyA9IHt9KSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBEaWFsb2dDb21wb25lbnQsXG4gICAgICBkaWFsb2dQcm9wc1xuICAgIH0pXG4gIH1cblxuICBoaWRlRGlhbG9nID0gKCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgRGlhbG9nQ29tcG9uZW50OiBudWxsLFxuICAgICAgZGlhbG9nUHJvcHM6IHt9XG4gICAgfSlcbiAgfVxuXG4gIGRpYWxvZ0NvbnRleHQgPSB7XG4gICAgc2hvd0RpYWxvZzogdGhpcy5zaG93RGlhbG9nLFxuICAgIGhpZGVEaWFsb2c6IHRoaXMuaGlkZURpYWxvZ1xuICB9XG5cbiAgLyoqXG4gICAqIFNjZW5lIEV2ZW50IEhhbmRsZXJzXG4gICAqL1xuXG4gIG9uRWRpdG9yRXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICBpZiAoZXJyb3JbJ2Fib3J0ZWQnXSkge1xuICAgICAgdGhpcy5oaWRlRGlhbG9nKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG5cbiAgICB0aGlzLnNob3dEaWFsb2coRXJyb3JEaWFsb2csIHtcbiAgICAgIHRpdGxlOiBlcnJvci50aXRsZSB8fCB0aGlzLnQoJ2VkaXRvcjplcnJvcicpLFxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCB0aGlzLnQoJ2VkaXRvcjplcnJvck1zZycpLFxuICAgICAgZXJyb3JcbiAgICB9KVxuICB9XG5cbiAgb25Qcm9qZWN0TG9hZGVkID0gKCkgPT4ge1xuICAgIHRoaXMudXBkYXRlTW9kaWZpZWRTdGF0ZSgpXG4gIH1cblxuICB1cGRhdGVTZXR0aW5nKGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCBzZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24odGhpcy5zdGF0ZS5zZXR0aW5nc0NvbnRleHQuc2V0dGluZ3MsIHsgW2tleV06IHZhbHVlIH0pXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VkaXRvci1zZXR0aW5ncycsIEpTT04uc3RyaW5naWZ5KHNldHRpbmdzKSlcbiAgICBQcm9qZWN0TWFuYWdlci5pbnN0YW5jZS5zZXR0aW5ncyA9IHNldHRpbmdzXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuZW1pdEV2ZW50KEVkaXRvckV2ZW50cy5TRVRUSU5HU19DSEFOR0VEKVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2V0dGluZ3NDb250ZXh0OiB7XG4gICAgICAgIC4uLnRoaXMuc3RhdGUuc2V0dGluZ3NDb250ZXh0LFxuICAgICAgICBzZXR0aW5nc1xuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogIFByb2plY3QgQWN0aW9uc1xuICAgKi9cblxuICBjcmVhdGVQcm9qZWN0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgcGFyZW50U2NlbmVJZCB9ID0gdGhpcy5zdGF0ZSBhcyBhbnlcbiAgICB0aGlzLnNob3dEaWFsb2coUHJvZ3Jlc3NEaWFsb2csIHtcbiAgICAgIHRpdGxlOiB0aGlzLnQoJ2VkaXRvcjpnZW5lcmF0ZVNjcmVlbnNob3QnKSxcbiAgICAgIG1lc3NhZ2U6IHRoaXMudCgnZWRpdG9yOmdlbmVyYXRlU2NyZWVuc2hvdE1zZycpXG4gICAgfSlcblxuICAgIC8vIFdhaXQgZm9yIDVtcyBzbyB0aGF0IHRoZSBQcm9ncmVzc0RpYWxvZyBzaG93cyB1cC5cbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1KSlcblxuICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBTY2VuZU1hbmFnZXIuaW5zdGFuY2UudGFrZVNjcmVlbnNob3QoNTEyLCAzMjApXG5cbiAgICBjb25zdCByZXN1bHQ6IGFueSA9IChhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5zaG93RGlhbG9nKFNhdmVOZXdQcm9qZWN0RGlhbG9nLCB7XG4gICAgICAgIHRodW1ibmFpbFVybDogVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKSxcbiAgICAgICAgaW5pdGlhbE5hbWU6IFNjZW5lTWFuYWdlci5pbnN0YW5jZS5zY2VuZS5uYW1lLFxuICAgICAgICBvbkNvbmZpcm06IHJlc29sdmUsXG4gICAgICAgIG9uQ2FuY2VsOiByZXNvbHZlXG4gICAgICB9KVxuICAgIH0pKSBhcyBhbnlcblxuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICB0aGlzLmhpZGVEaWFsb2coKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICBjb25zdCBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKClcblxuICAgIHRoaXMuc2hvd0RpYWxvZyhQcm9ncmVzc0RpYWxvZywge1xuICAgICAgdGl0bGU6IHRoaXMudCgnZWRpdG9yOnNhdmluZycpLFxuICAgICAgbWVzc2FnZTogdGhpcy50KCdlZGl0b3I6c2F2aW5nTXNnJyksXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgb25DYW5jZWw6ICgpID0+IHtcbiAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KClcbiAgICAgICAgdGhpcy5oaWRlRGlhbG9nKClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgQ29tbWFuZE1hbmFnZXIuaW5zdGFuY2UuZXhlY3V0ZUNvbW1hbmQoRWRpdG9yQ29tbWFuZHMuTU9ESUZZX1BST1BFUlRZLCBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmUsIHtcbiAgICAgIHByb3BlcnRpZXM6IHsgbmFtZTogcmVzdWx0Lm5hbWUgfVxuICAgIH0pXG4gICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lLnNldE1ldGFkYXRhKHsgbmFtZTogcmVzdWx0Lm5hbWUgfSlcblxuICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBjcmVhdGVQcm9qZWN0KFxuICAgICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lLFxuICAgICAgcGFyZW50U2NlbmVJZCxcbiAgICAgIGJsb2IsXG4gICAgICBhYm9ydENvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgdGhpcy5zaG93RGlhbG9nLFxuICAgICAgdGhpcy5oaWRlRGlhbG9nXG4gICAgKVxuXG4gICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lTW9kaWZpZWQgPSBmYWxzZVxuICAgIGdsb2JhbFRoaXMuY3VycmVudFByb2plY3RJRCA9IHByb2plY3QucHJvamVjdF9pZFxuXG4gICAgY29uc3QgcGF0aFBhcmFtcyA9IHRoaXMuc3RhdGUucGF0aFBhcmFtc1xuICAgIHBhdGhQYXJhbXMuc2V0KCdwcm9qZWN0SWQnLCBwcm9qZWN0LnByb2plY3RfaWQpXG4gICAgdGhpcy51cGRhdGVNb2RpZmllZFN0YXRlKCgpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBjcmVhdGluZ1Byb2plY3Q6IHRydWUsIHByb2plY3QsIHBhdGhQYXJhbXMgfSwgKCkgPT4ge1xuICAgICAgICB0aGlzLnByb3BzLmhpc3RvcnkucmVwbGFjZShgL2VkaXRvci9wcm9qZWN0cy8ke3Byb2plY3QucHJvamVjdF9pZH1gKVxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgY3JlYXRpbmdQcm9qZWN0OiBmYWxzZSB9KVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgcmV0dXJuIHByb2plY3RcbiAgfVxuXG4gIG9uTmV3UHJvamVjdCA9IGFzeW5jICgpID0+IHtcbiAgICB0aGlzLnByb3BzLmhpc3RvcnkucHVzaCgnL2VkaXRvci9wcm9qZWN0cy9uZXcnKVxuICB9XG5cbiAgb25PcGVuUHJvamVjdCA9ICgpID0+IHtcbiAgICB0aGlzLnByb3BzLmhpc3RvcnkucHVzaCgnL2VkaXRvci9wcm9qZWN0cycpXG4gIH1cblxuICBvbkR1cGxpY2F0ZVByb2plY3QgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpXG4gICAgdGhpcy5zaG93RGlhbG9nKFByb2dyZXNzRGlhbG9nLCB7XG4gICAgICB0aXRsZTogdGhpcy50KCdlZGl0b3I6ZHVwbGljYXRpbmcnKSxcbiAgICAgIG1lc3NhZ2U6IHRoaXMudCgnZWRpdG9yOmR1cGxpY2F0aW5nTXNnJyksXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgb25DYW5jZWw6ICgpID0+IHtcbiAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KClcbiAgICAgICAgdGhpcy5oaWRlRGlhbG9nKClcbiAgICAgIH1cbiAgICB9KVxuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUpKVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBuZXdQcm9qZWN0ID0gYXdhaXQgdGhpcy5jcmVhdGVQcm9qZWN0KClcbiAgICAgIFNjZW5lTWFuYWdlci5pbnN0YW5jZS5zY2VuZU1vZGlmaWVkID0gZmFsc2VcbiAgICAgIHRoaXMudXBkYXRlTW9kaWZpZWRTdGF0ZSgpXG5cbiAgICAgIHRoaXMuaGlkZURpYWxvZygpXG4gICAgICBjb25zdCBwYXRoUGFyYW1zID0gdGhpcy5zdGF0ZS5wYXRoUGFyYW1zXG4gICAgICBwYXRoUGFyYW1zLnNldCgncHJvamVjdElkJywgbmV3UHJvamVjdC5wcm9qZWN0X2lkKVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHBhdGhQYXJhbXM6IHBhdGhQYXJhbXMgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcblxuICAgICAgdGhpcy5zaG93RGlhbG9nKEVycm9yRGlhbG9nLCB7XG4gICAgICAgIHRpdGxlOiB0aGlzLnQoJ2VkaXRvcjpzYXZpbmdFcnJvcicpLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIHx8IHRoaXMudCgnZWRpdG9yOnNhdmluZ0Vycm9yTXNnJylcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgb25FeHBvcnRQcm9qZWN0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5zaG93RGlhbG9nKEV4cG9ydFByb2plY3REaWFsb2csIHtcbiAgICAgICAgZGVmYXVsdE9wdGlvbnM6IE9iamVjdC5hc3NpZ24oe30sIFNjZW5lTWFuYWdlci5EZWZhdWx0RXhwb3J0T3B0aW9ucyksXG4gICAgICAgIG9uQ29uZmlybTogcmVzb2x2ZSxcbiAgICAgICAgb25DYW5jZWw6IHJlc29sdmVcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgdGhpcy5oaWRlRGlhbG9nKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKVxuXG4gICAgdGhpcy5zaG93RGlhbG9nKFByb2dyZXNzRGlhbG9nLCB7XG4gICAgICB0aXRsZTogdGhpcy50KCdlZGl0b3I6ZXhwb3J0aW5nJyksXG4gICAgICBtZXNzYWdlOiB0aGlzLnQoJ2VkaXRvcjpleHBvcnRpbmdNc2cnKSxcbiAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgICBvbkNhbmNlbDogKCkgPT4gYWJvcnRDb250cm9sbGVyLmFib3J0KClcbiAgICB9KVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZ2xiQmxvYiB9ID0gYXdhaXQgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLmV4cG9ydFNjZW5lKG9wdGlvbnMpXG5cbiAgICAgIHRoaXMuaGlkZURpYWxvZygpXG5cbiAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gICAgICBlbC5kb3dubG9hZCA9IFNjZW5lTWFuYWdlci5pbnN0YW5jZS5zY2VuZS5uYW1lICsgJy5nbGInXG4gICAgICBlbC5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChnbGJCbG9iKVxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbClcbiAgICAgIGVsLmNsaWNrKClcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWwpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvclsnYWJvcnRlZCddKSB7XG4gICAgICAgIHRoaXMuaGlkZURpYWxvZygpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxuXG4gICAgICB0aGlzLnNob3dEaWFsb2coRXJyb3JEaWFsb2csIHtcbiAgICAgICAgdGl0bGU6IHRoaXMudCgnZWRpdG9yOmV4cG9ydGluZ0Vycm9yJyksXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgdGhpcy50KCdlZGl0b3I6ZXhwb3J0aW5nRXJyb3JNc2cnKSxcbiAgICAgICAgZXJyb3JcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgb25JbXBvcnRMZWdhY3lQcm9qZWN0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGNvbmZpcm0gPSBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5zaG93RGlhbG9nKENvbmZpcm1EaWFsb2csIHtcbiAgICAgICAgdGl0bGU6IHRoaXMudCgnZWRpdG9yOmltcG9ydExlZ2FjeScpLFxuICAgICAgICBtZXNzYWdlOiB0aGlzLnQoJ2VkaXRvcjppbXBvcnRMZWdhY3lNc2cnKSxcbiAgICAgICAgb25Db25maXJtOiAoKSA9PiByZXNvbHZlKHRydWUpLFxuICAgICAgICBvbkNhbmNlbDogKCkgPT4gcmVzb2x2ZShmYWxzZSlcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHRoaXMuaGlkZURpYWxvZygpXG5cbiAgICBpZiAoIWNvbmZpcm0pIHJldHVyblxuXG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXG4gICAgZWwudHlwZSA9ICdmaWxlJ1xuICAgIGVsLmFjY2VwdCA9ICcud29ybGQnXG4gICAgZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIGVsLm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgaWYgKGVsLmZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgZmlsZVJlYWRlcjogYW55ID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZSgoZmlsZVJlYWRlciBhcyBhbnkpLnJlc3VsdClcblxuICAgICAgICAgIGlmIChqc29uLm1ldGFkYXRhKSB7XG4gICAgICAgICAgICBkZWxldGUganNvbi5tZXRhZGF0YS5zY2VuZVVybFxuICAgICAgICAgICAgZGVsZXRlIGpzb24ubWV0YWRhdGEuc2NlbmVJZFxuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuaW1wb3J0UHJvamVjdChqc29uKVxuICAgICAgICB9XG4gICAgICAgIGZpbGVSZWFkZXIucmVhZEFzVGV4dChlbC5maWxlc1swXSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWwuY2xpY2soKVxuICB9XG5cbiAgb25FeHBvcnRMZWdhY3lQcm9qZWN0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgcHJvamVjdCB9ID0gdGhpcy5zdGF0ZVxuICAgIGNvbnN0IHByb2plY3RGaWxlID0gYXdhaXQgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lLnNlcmlhbGl6ZShwcm9qZWN0LnByb2plY3RfaWQpXG5cbiAgICBpZiAocHJvamVjdEZpbGUubWV0YWRhdGEpIHtcbiAgICAgIGRlbGV0ZSBwcm9qZWN0RmlsZS5tZXRhZGF0YS5zY2VuZVVybFxuICAgICAgZGVsZXRlIHByb2plY3RGaWxlLm1ldGFkYXRhLnNjZW5lSWRcbiAgICB9XG5cbiAgICBjb25zdCBwcm9qZWN0SnNvbiA9IEpTT04uc3RyaW5naWZ5KHByb2plY3RGaWxlKVxuICAgIGNvbnN0IHByb2plY3RCbG9iID0gbmV3IEJsb2IoW3Byb2plY3RKc29uXSlcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxuICAgIGNvbnN0IGZpbGVOYW1lID0gU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lLm5hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICctJylcbiAgICBlbC5kb3dubG9hZCA9IGZpbGVOYW1lICsgJy53b3JsZCdcbiAgICBlbC5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChwcm9qZWN0QmxvYilcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsKVxuICAgIGVsLmNsaWNrKClcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsKVxuICB9XG5cbiAgb25TYXZlUHJvamVjdCA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKClcblxuICAgIHRoaXMuc2hvd0RpYWxvZyhQcm9ncmVzc0RpYWxvZywge1xuICAgICAgdGl0bGU6IHRoaXMudCgnZWRpdG9yOnNhdmluZycpLFxuICAgICAgbWVzc2FnZTogdGhpcy50KCdlZGl0b3I6c2F2aW5nTXNnJyksXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlLFxuICAgICAgb25DYW5jZWw6ICgpID0+IHtcbiAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KClcbiAgICAgICAgdGhpcy5oaWRlRGlhbG9nKClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gV2FpdCBmb3IgNW1zIHNvIHRoYXQgdGhlIFByb2dyZXNzRGlhbG9nIHNob3dzIHVwLlxuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUpKVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgcHJvamVjdCB9ID0gdGhpcy5zdGF0ZVxuICAgICAgaWYgKHByb2plY3QpIHtcbiAgICAgICAgY29uc3QgbmV3UHJvamVjdCA9IGF3YWl0IHNhdmVQcm9qZWN0KHByb2plY3QucHJvamVjdF9pZCwgYWJvcnRDb250cm9sbGVyLnNpZ25hbClcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgcHJvamVjdDogbmV3UHJvamVjdCB9KVxuICAgICAgICBjb25zdCBwYXRoUGFyYW1zID0gdGhpcy5zdGF0ZS5wYXRoUGFyYW1zXG4gICAgICAgIHBhdGhQYXJhbXMuc2V0KCdwcm9qZWN0SWQnLCBuZXdQcm9qZWN0LnByb2plY3RfaWQpXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBwYXRoUGFyYW1zOiBwYXRoUGFyYW1zIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZVByb2plY3QoKVxuICAgICAgfVxuXG4gICAgICBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmVNb2RpZmllZCA9IGZhbHNlXG4gICAgICB0aGlzLnVwZGF0ZU1vZGlmaWVkU3RhdGUoKVxuXG4gICAgICB0aGlzLmhpZGVEaWFsb2coKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxuXG4gICAgICB0aGlzLnNob3dEaWFsb2coRXJyb3JEaWFsb2csIHtcbiAgICAgICAgdGl0bGU6IHRoaXMudCgnZWRpdG9yOnNhdmluZ0Vycm9yJyksXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgdGhpcy50KCdlZGl0b3I6c2F2aW5nRXJyb3JNc2cnKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvLyBDdXJyZW50bHkgZG9lc24ndCB3b3JrXG4gIG9uUHVibGlzaFByb2plY3QgPSBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBwcm9qZWN0ID0gdGhpcy5zdGF0ZS5wcm9qZWN0XG5cbiAgICAgIGlmICghcHJvamVjdCkge1xuICAgICAgICBwcm9qZWN0ID0gYXdhaXQgdGhpcy5jcmVhdGVQcm9qZWN0KClcbiAgICAgIH1cblxuICAgICAgaWYgKCFwcm9qZWN0KSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBwcm9qZWN0ID0gYXdhaXQgcHVibGlzaFByb2plY3QocHJvamVjdCwgdGhpcy5zaG93RGlhbG9nLCB0aGlzLmhpZGVEaWFsb2cpXG5cbiAgICAgIGlmICghcHJvamVjdCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lTW9kaWZpZWQgPSBmYWxzZVxuICAgICAgdGhpcy51cGRhdGVNb2RpZmllZFN0YXRlKClcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHByb2plY3QgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yWydhYm9ydGVkc2V0dGluZ3NDb250ZXh0J10pIHtcbiAgICAgICAgdGhpcy5oaWRlRGlhbG9nKClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG4gICAgICB0aGlzLnNob3dEaWFsb2coRXJyb3JEaWFsb2csIHtcbiAgICAgICAgdGl0bGU6IHRoaXMudCgnZWRpdG9yOnB1Ymxpc2hpbmdFcnJvcicpLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIHx8IHRoaXMudCgnZWRpdG9yOnB1Ymxpc2hpbmdFcnJvck1zZycpLFxuICAgICAgICBlcnJvclxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBnZXRTY2VuZUlkKCkge1xuICAgIGNvbnN0IHsgcHJvamVjdCB9ID0gdGhpcy5zdGF0ZSBhcyBhbnlcbiAgICByZXR1cm4gKFxuICAgICAgKHByb2plY3QgJiYgcHJvamVjdC5zY2VuZSAmJiBwcm9qZWN0LnNjZW5lLnNjZW5lX2lkKSB8fFxuICAgICAgKFNjZW5lTWFuYWdlci5pbnN0YW5jZS5zY2VuZSAmJlxuICAgICAgICBTY2VuZU1hbmFnZXIuaW5zdGFuY2Uuc2NlbmUubWV0YWRhdGEgJiZcbiAgICAgICAgU2NlbmVNYW5hZ2VyLmluc3RhbmNlLnNjZW5lLm1ldGFkYXRhLnNjZW5lSWQpXG4gICAgKVxuICB9XG5cbiAgb25PcGVuU2NlbmUgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2NlbmVJZCA9IHRoaXMuZ2V0U2NlbmVJZCgpXG5cbiAgICBpZiAoc2NlbmVJZCkge1xuICAgICAgY29uc3QgdXJsID0gZ2V0U2NlbmVVcmwoc2NlbmVJZClcbiAgICAgIHdpbmRvdy5vcGVuKHVybClcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBEaWFsb2dDb21wb25lbnQsIGRpYWxvZ1Byb3BzLCBzZXR0aW5nc0NvbnRleHQgfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCB0b29sYmFyTWVudSA9IHRoaXMuZ2VuZXJhdGVUb29sYmFyTWVudSgpXG4gICAgLy8gY29uc3QgaXNQdWJsaXNoZWRTY2VuZSA9ICEhdGhpcy5nZXRTY2VuZUlkKClcbiAgICAvLyBjb25zdCBsb2NhdGlvbnMgPSB1c2VMb2NhdGlvblN0YXRlKCkubG9jYXRpb25zLmxvY2F0aW9ucy52YWx1ZVxuICAgIC8vIGxldCBhc3NpZ25lZVNjZW5lXG4gICAgLy8gaWYgKGxvY2F0aW9ucykge1xuICAgIC8vICAgbG9jYXRpb25zLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAvLyAgICAgaWYgKGVsZW1lbnQuc2NlbmVJZCA9PT0gdGhpcy5zdGF0ZS5xdWVyeVBhcmFtcy5nZXQoJ3Byb2plY3RJZCcpKSB7XG4gICAgLy8gICAgICAgYXNzaWduZWVTY2VuZSA9IGVsZW1lbnRcbiAgICAvLyAgICAgfVxuICAgIC8vICAgfSlcbiAgICAvLyB9XG5cbiAgICBsZXQgZGVmYXVsdExheW91dCA9IHtcbiAgICAgIGRvY2tib3g6IHtcbiAgICAgICAgbW9kZTogJ2hvcml6b250YWwnIGFzIERvY2tNb2RlLFxuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1vZGU6ICd2ZXJ0aWNhbCcgYXMgRG9ja01vZGUsXG4gICAgICAgICAgICBzaXplOiA4LFxuICAgICAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRhYnM6IFt7IGlkOiAndmlld1BhbmVsJywgdGl0bGU6ICdWaWV3cG9ydCcsIGNvbnRlbnQ6IDxkaXYgLz4gfV0sXG4gICAgICAgICAgICAgICAgc2l6ZTogMVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtb2RlOiAndmVydGljYWwnIGFzIERvY2tNb2RlLFxuICAgICAgICAgICAgc2l6ZTogMixcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0YWJzOiBbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAnaGllcmFyY2h5UGFuZWwnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogKFxuICAgICAgICAgICAgICAgICAgICAgIDxQYW5lbERyYWdDb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxJY29uIGFzPXtQcm9qZWN0RGlhZ3JhbX0gc2l6ZT17MTJ9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxUaXRsZT5IaWVyYXJjaHk8L1BhbmVsVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9QYW5lbERyYWdDb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IDxIaWVyYXJjaHlQYW5lbENvbnRhaW5lciAvPlxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRhYnM6IFtcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdwcm9wZXJ0aWVzUGFuZWwnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogKFxuICAgICAgICAgICAgICAgICAgICAgIDxQYW5lbERyYWdDb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxJY29uIGFzPXtTbGlkZXJzSH0gc2l6ZT17MTJ9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxUaXRsZT5Qcm9wZXJ0aWVzPC9QYW5lbFRpdGxlPlxuICAgICAgICAgICAgICAgICAgICAgIDwvUGFuZWxEcmFnQ29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiA8UHJvcGVydGllc1BhbmVsQ29udGFpbmVyIC8+XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZDogJ2Fzc2V0c1BhbmVsJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdFbGVtZW50cycsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IDxBc3NldHNQYW5lbCAvPlxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdmaWxlQnJvd3NlclBhbmVsJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IChcbiAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxEcmFnQ29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFBhbmVsSWNvbiBhcz17QXJjaGl2ZX0gc2l6ZT17MTJ9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxUaXRsZT5GaWxlIEJyb3dzZXI8L1BhbmVsVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgPC9QYW5lbERyYWdDb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IDxGaWxlQnJvd3NlclBhbmVsIC8+XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxTdHlsZWRFZGl0b3JDb250YWluZXIgaWQ9XCJlZGl0b3ItY29udGFpbmVyXCI+XG4gICAgICAgIDxTZXR0aW5nc0NvbnRleHRQcm92aWRlciB2YWx1ZT17c2V0dGluZ3NDb250ZXh0fT5cbiAgICAgICAgICA8RGlhbG9nQ29udGV4dFByb3ZpZGVyIHZhbHVlPXt0aGlzLmRpYWxvZ0NvbnRleHR9PlxuICAgICAgICAgICAgPERuZFByb3ZpZGVyIGJhY2tlbmQ9e0hUTUw1QmFja2VuZH0+XG4gICAgICAgICAgICAgIDxEcmFnTGF5ZXIgLz5cbiAgICAgICAgICAgICAge3Rvb2xiYXJNZW51ICYmIDxUb29sQmFyIG1lbnU9e3Rvb2xiYXJNZW51fSAvPn1cbiAgICAgICAgICAgICAgPFdvcmtzcGFjZUNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICA8Vmlld3BvcnRQYW5lbENvbnRhaW5lciAvPlxuICAgICAgICAgICAgICAgIDxEb2NrQ29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgPERvY2tMYXlvdXRcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdExheW91dD17ZGVmYXVsdExheW91dH1cbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgcG9pbnRlckV2ZW50czogJ25vbmUnLCBwb3NpdGlvbjogJ2Fic29sdXRlJywgbGVmdDogNSwgdG9wOiA1NSwgcmlnaHQ6IDUsIGJvdHRvbTogNSB9fVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L0RvY2tDb250YWluZXI+XG4gICAgICAgICAgICAgIDwvV29ya3NwYWNlQ29udGFpbmVyPlxuICAgICAgICAgICAgICA8TW9kYWxcbiAgICAgICAgICAgICAgICBhcmlhSGlkZUFwcD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgaXNPcGVuPXshIURpYWxvZ0NvbXBvbmVudH1cbiAgICAgICAgICAgICAgICBvblJlcXVlc3RDbG9zZT17dGhpcy5oaWRlRGlhbG9nfVxuICAgICAgICAgICAgICAgIHNob3VsZENsb3NlT25PdmVybGF5Q2xpY2s9e2ZhbHNlfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIk1vZGFsXCJcbiAgICAgICAgICAgICAgICBvdmVybGF5Q2xhc3NOYW1lPVwiT3ZlcmxheVwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7RGlhbG9nQ29tcG9uZW50ICYmIChcbiAgICAgICAgICAgICAgICAgIDxEaWFsb2dDb21wb25lbnQgb25Db25maXJtPXt0aGlzLmhpZGVEaWFsb2d9IG9uQ2FuY2VsPXt0aGlzLmhpZGVEaWFsb2d9IHsuLi5kaWFsb2dQcm9wc30gLz5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L01vZGFsPlxuICAgICAgICAgICAgPC9EbmRQcm92aWRlcj5cbiAgICAgICAgICA8L0RpYWxvZ0NvbnRleHRQcm92aWRlcj5cbiAgICAgICAgPC9TZXR0aW5nc0NvbnRleHRQcm92aWRlcj5cbiAgICAgIDwvU3R5bGVkRWRpdG9yQ29udGFpbmVyPlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoVHJhbnNsYXRpb24oKSh3aXRoUm91dGVyKEVkaXRvckNvbnRhaW5lcikpXG4iXSwibmFtZXMiOlsiX3R5cGVvZiIsInZlcmlmeUludmFyaWFudHMiLCJvd25LZXlzIiwiX2RlZmluZVByb3BlcnR5IiwiX29iamVjdFNwcmVhZCIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwiX2NsYXNzQ2FsbENoZWNrIiwiX2NyZWF0ZUNsYXNzIiwiaW5pdGlhbFN0YXRlIiwid2l0aG91dCIsImRpcnR5SGFuZGxlcklkcyIsImRyYWdPZmZzZXQiLCJyZWZDb3VudCIsImRyYWdPcGVyYXRpb24iLCJzdGF0ZUlkIiwiX2dldFNvdXJjZUNsaWVudE9mZnNldCIsIl9nZXREaWZmZXJlbmNlRnJvbUluaXRpYWxPZmZzZXQiLCJpbmRleCIsIl9hcnJheVdpdGhIb2xlcyIsIl9pdGVyYWJsZVRvQXJyYXlMaW1pdCIsIl91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSIsIl9ub25JdGVyYWJsZVJlc3QiLCJfYXJyYXlMaWtlVG9BcnJheSIsIl9zbGljZWRUb0FycmF5IiwiX2FkZFNvdXJjZSIsIl9hZGRUYXJnZXQiLCJfcmVtb3ZlU291cmNlIiwiX3JlbW92ZVRhcmdldCIsIl9leGNsdWRlZCIsIm1lbW8iLCJ1c2VFZmZlY3QiLCJfanN4IiwiaXNTYWZhcmkiLCJOYXRpdmVUeXBlcy5GSUxFIiwiTmF0aXZlVHlwZXMuSFRNTCIsIk5hdGl2ZVR5cGVzLlVSTCIsIk5hdGl2ZVR5cGVzLlRFWFQiLCJSZWFjdC5mb3J3YXJkUmVmIiwiUmVhY3QuY3JlYXRlRWxlbWVudCIsIl9leHRlbmRzIiwiQ2FyZXRSaWdodCIsImlzRnJhZ21lbnQiLCJSZWFjdC51c2VTdGF0ZSIsIlJlYWN0LnVzZVJlZiIsIlJlYWN0LnVzZUVmZmVjdCIsImlzTWVtbyIsIl9pbmhlcml0cyIsIlJlc2l6ZU9ic2VydmVyIiwid2FybmluZyIsIlJlYWN0LmlzVmFsaWRFbGVtZW50IiwiUmVhY3QuY2xvbmVFbGVtZW50IiwiUmVhY3QuQ29tcG9uZW50IiwidXNlUmVmIiwicmFmIiwidXNlU3RhdGUiLCJERUZBVUxUX1NJWkUiLCJ1c2VNZW1vIiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIiwiUmVhY3QudXNlQ29udGV4dCIsIlJlYWN0LmNyZWF0ZUNvbnRleHQiLCJSZWFjdC51c2VNZW1vIiwidXNlQ2FsbGJhY2siLCJSZWFjdC51c2VMYXlvdXRFZmZlY3QiLCJPdmVyZmxvdyIsIkljb24iLCJSZWFjdC51c2VDYWxsYmFjayIsImZvcndhcmRSZWYiLCJ1c2VJbXBlcmF0aXZlSGFuZGxlIiwiY2FuVXNlRE9NIiwidXNlTGF5b3V0RWZmZWN0IiwiZ2V0VHJhbnNpdGlvbk5hbWUiLCJnZXRNb3Rpb24iLCJMRUZUIiwiZ2V0T2Zmc2V0IiwicmVxdWlyZSQkMCIsImlzRXF1YWwiLCJhZGRFdmVudExpc3RlbmVyIiwidW5kZWZpbmVkIiwiX3JlZ2VuZXJhdG9yUnVudGltZSIsIlJlYWN0LnVzZUltcGVyYXRpdmVIYW5kbGUiLCJSZWFjdC5DaGlsZHJlbiIsIkFsaWduIiwiaXNNb2JpbGUiLCJSZWFjdC5jcmVhdGVSZWYiLCJub29wIiwiYXV0b0FkanVzdE92ZXJmbG93IiwicGxhY2VtZW50cyIsInBsYWNlbWVudHNSdGwiLCJwb3B1cFBsYWNlbWVudE1hcCIsIk1lbnVDb250ZXh0UHJvdmlkZXIiLCJ1c2VNZXJnZWRTdGF0ZSIsIk1lbnUiLCJNZW51SXRlbSIsIlN1Yk1lbnUiLCJEaXZpZGVyIiwiUGxhY2VtZW50cyIsIlJlYWN0LkZyYWdtZW50IiwiRHJvcGRvd24iLCJBZGRCdXR0b24iLCJjcmVhdGVDb250ZXh0IiwiVGFiTm9kZSIsIk9wZXJhdGlvbk5vZGUiLCJUYWJOYXZMaXN0IiwiX19leHRlbmRzIiwiX19hc3NpZ24iLCJob2lzdFN0YXRpY3MiLCJSZWFjdERPTS5maW5kRE9NTm9kZSIsIlN1YlBvcHVwTWVudSIsImNvbm5lY3RlZCIsIl9fcmVzdCIsIkRyYWdNYW5hZ2VyLnJlbW92ZUhhbmRsZXJzIiwiRHJhZ01hbmFnZXIuYWRkSGFuZGxlcnMiLCJEcmFnTWFuYWdlci5pc0RyYWdnaW5nIiwiRHJhZ01hbmFnZXIuRHJhZ1N0YXRlIiwiYnJvd3NlclBhcnNlcnNMaXN0IiwiYnJvd3NlciIsImdlcldpbmRvd0JvcmRlciIsImRlYm91bmNlIiwidGhpcyIsIm1hcFdpbmRvd1RvRWxlbWVudCIsIm1hcEVsZW1lbnRUb1NjcmVlblJlY3QiLCJUYWJzIiwiQWxnb3JpdGhtLmZpeEZsb2F0UGFuZWxQb3MiLCJBbGdvcml0aG0uZml4TGF5b3V0RGF0YSIsIkRyYWdNYW5hZ2VyLmFkZERyYWdTdGF0ZUxpc3RlbmVyIiwiQWxnb3JpdGhtLm1heGltaXplIiwiQWxnb3JpdGhtLm1vdmVUb0Zyb250IiwiQWxnb3JpdGhtLnJlbW92ZUZyb21MYXlvdXQiLCJBbGdvcml0aG0uRmlsdGVyIiwiQWxnb3JpdGhtLmdldFVwZGF0ZWRPYmplY3QiLCJBbGdvcml0aG0uY29udmVyVG9QYW5lbCIsIkFsZ29yaXRobS5uZXh0WkluZGV4IiwiQWxnb3JpdGhtLmZsb2F0UGFuZWwiLCJBbGdvcml0aG0ucGFuZWxUb1dpbmRvdyIsIkFsZ29yaXRobS5hZGRUYWJUb1BhbmVsIiwiQWxnb3JpdGhtLmRvY2tQYW5lbFRvUGFuZWwiLCJBbGdvcml0aG0uZG9ja1BhbmVsVG9Cb3giLCJBbGdvcml0aG0uYWRkTmV4dFRvVGFiIiwiQWxnb3JpdGhtLmZpbmQiLCJBbGdvcml0aG0uZmluZE5lYXJlc3RQYW5lbCIsIkRyYWdNYW5hZ2VyLnJlbW92ZURyYWdTdGF0ZUxpc3RlbmVyIiwiU2VyaWFsaXplci5zYXZlTGF5b3V0RGF0YSIsIlNlcmlhbGl6ZXIubG9hZExheW91dERhdGEiLCJyZXNldFN0YXRlIiwibG9nIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsImFyaWFBcHBIaWRlciIsIl9zYWZlSFRNTEVsZW1lbnQiLCJyZXF1aXJlJCQxIiwicG9ydGFsT3Blbkluc3RhbmNlc18xIiwiYm9keVRyYXBfMSIsInJlcXVpcmUkJDIiLCJmb2N1c01hbmFnZXIiLCJyZXF1aXJlJCQzIiwicmVxdWlyZSQkNCIsInJlcXVpcmUkJDUiLCJjbGFzc0xpc3QiLCJyZXF1aXJlJCQ2IiwicmVxdWlyZSQkNyIsIk1vZGFsXzEiLCJNb2RhbCIsIkNvbXBvbmVudCIsImNyZWF0ZUVsZW1lbnQiLCJQdXJlQ29tcG9uZW50IiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UiLCJ1c2VDb250ZXh0IiwiVGhlbWVDb250ZXh0IiwiRnJhZ21lbnQiLCJOYW1lSW5wdXRHcm91cCIsIlRyYW5zZm9ybVByb3BlcnR5R3JvdXAiLCJzdHlsZXMudG9vbGJhcklucHV0R3JvdXAiLCJzdHlsZXMudG9vbEJ1dHRvbiIsInN0eWxlcy5zZWxlY3RlZCIsInN0eWxlcy50b29sYmFyTnVtZXJpY1N0ZXBwZXJJbnB1dCIsInN0eWxlcy5zZWxlY3RJbnB1dCIsInN0eWxlcy5wbGF5QnV0dG9uQ29udGFpbmVyIiwic3R5bGVzLnRvb2xJY29uIiwic3R5bGVzLnRvb2xiYXJDb250YWluZXIiLCJNYWluTWVudSIsImNvbnRyb2xzVGV4dCIsInN0eWxlcy52aWV3cG9ydENvbnRhaW5lciIsInN0eWxlcy52aWV3cG9ydENhbnZhcyIsInN0eWxlcy5jb250cm9sc1RleHQiLCJpMThuIiwic3R5bGVzIiwiUHVibGlzaERpYWxvZyIsIkhpZXJhcmNoeVBhbmVsQ29udGFpbmVyIiwiUHJvcGVydGllc1BhbmVsQ29udGFpbmVyIl0sIm1hcHBpbmdzIjoiNjdEQUFPLEdBQUksSUFFWCxBQUFDLFVBQVUsRUFBYSxDQUN0QixFQUFZLE9BQVksU0FDeEIsRUFBWSxPQUFZLFdBQ3ZCLElBQWdCLElBQWMsS0NMMUIsR0FBSSxJQUFjLHVCQUNkLEdBQWEsc0JBQ2IsR0FBc0IsK0JBQ3RCLEdBQVEsaUJBQ1IsR0FBTyxnQkFDUCxHQUFXLG9CQ0pmLFlBQXlCLEVBQWMsRUFBb0IsQ0FDaEUsTUFBTyxDQUNMLEtBQU0sR0FDTixRQUFTLENBQ1AsbUJBQW9CLEdBQXNCLEtBQzFDLGFBQWMsR0FBZ0IsT0NOcEMsWUFBaUIsRUFBSyxDQUE2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
