import{I as s,L as f,a as d,b as n}from"./[projectId].a008d20c.js";import{d as u,E as e,g as l}from"./avatarFunctions.6d66cf01.js";import"./index.7b02be28.js";import"./vendor.475cb2ff.js";import"./_app.f0a72417.js";import"./AuthService.e8999ddc.js";import"./AlertService.5d8abaff.js";import"./feathers.32f4d4e8.js";import"./three.module.493739a3.js";import"./SystemUpdateType.772fc25d.js";import"./upload.bd537b46.js";import"./index.81138b53.js";const O=({keyboard:p,mouse:r})=>{typeof p!="undefined"&&(e.keyboardInputEnabled=p),typeof r!="undefined"&&(e.mouseInputEnabled=r)};async function T(p){const r=u([s,f]);return()=>{const{delta:c}=p;!e.xrSession,e.inputState.forEach((a,t)=>{e.prevInputState.has(t)&&(a.type===d.BUTTON?a.lifecycleState===n.Started&&e.prevInputState.get(t)?.lifecycleState===n.Started&&(a.lifecycleState=n.Continued):a.lifecycleState!==n.Ended&&(a.lifecycleState=JSON.stringify(a.value)===JSON.stringify(e.prevInputState.get(t)?.value)?n.Unchanged:n.Changed),e.prevInputState.get(t)?.lifecycleState===n.Ended&&a.lifecycleState===n.Ended&&e.inputState.delete(t))}),e.prevInputState.clear(),e.inputState.forEach((a,t)=>{e.prevInputState.set(t,a)});for(const a of r(p)){const t=l(a,s);t.data.clear(),e.inputState.forEach((o,i)=>{t.schema.inputMap.has(i)&&t.data.set(t.schema.inputMap.get(i),JSON.parse(JSON.stringify(o)))}),t.data.forEach((o,i)=>{t.schema.behaviorMap.has(i)&&t.schema.behaviorMap.get(i)(a,i,o,c)})}}}export{T as default,O as enableInput};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2xpZW50SW5wdXRTeXN0ZW0uOWU1Y2FjYjguanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2VuZ2luZS9zcmMvaW5wdXQvc3lzdGVtcy9DbGllbnRJbnB1dFN5c3RlbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMaWZlY3ljbGVWYWx1ZSB9IGZyb20gJy4uLy4uL2NvbW1vbi9lbnVtcy9MaWZlY3ljbGVWYWx1ZSdcbmltcG9ydCB7IGRlZmluZVF1ZXJ5LCBnZXRDb21wb25lbnQgfSBmcm9tICcuLi8uLi9lY3MvZnVuY3Rpb25zL0NvbXBvbmVudEZ1bmN0aW9ucydcbmltcG9ydCB7IElucHV0Q29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50cy9JbnB1dENvbXBvbmVudCdcbmltcG9ydCB7IExvY2FsSW5wdXRUYWdDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL0xvY2FsSW5wdXRUYWdDb21wb25lbnQnXG5pbXBvcnQgeyBJbnB1dFR5cGUgfSBmcm9tICcuLi9lbnVtcy9JbnB1dFR5cGUnXG5pbXBvcnQgeyBJbnB1dFZhbHVlIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9JbnB1dFZhbHVlJ1xuaW1wb3J0IHsgSW5wdXRBbGlhcyB9IGZyb20gJy4uL3R5cGVzL0lucHV0QWxpYXMnXG5pbXBvcnQgeyBFbmdpbmUgfSBmcm9tICcuLi8uLi9lY3MvY2xhc3Nlcy9FbmdpbmUnXG5pbXBvcnQgeyBoYW5kbGVHYW1lcGFkcyB9IGZyb20gJy4uL2Z1bmN0aW9ucy9HYW1lcGFkSW5wdXQnXG5pbXBvcnQgeyBTeXN0ZW0gfSBmcm9tICcuLi8uLi9lY3MvY2xhc3Nlcy9TeXN0ZW0nXG5pbXBvcnQgeyBXb3JsZCB9IGZyb20gJy4uLy4uL2Vjcy9jbGFzc2VzL1dvcmxkJ1xuXG5leHBvcnQgY29uc3QgZW5hYmxlSW5wdXQgPSAoeyBrZXlib2FyZCwgbW91c2UgfTogeyBrZXlib2FyZD86IGJvb2xlYW47IG1vdXNlPzogYm9vbGVhbiB9KSA9PiB7XG4gIGlmICh0eXBlb2Yga2V5Ym9hcmQgIT09ICd1bmRlZmluZWQnKSBFbmdpbmUua2V5Ym9hcmRJbnB1dEVuYWJsZWQgPSBrZXlib2FyZFxuICBpZiAodHlwZW9mIG1vdXNlICE9PSAndW5kZWZpbmVkJykgRW5naW5lLm1vdXNlSW5wdXRFbmFibGVkID0gbW91c2Vcbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gQ2xpZW50SW5wdXRTeXN0ZW0od29ybGQ6IFdvcmxkKTogUHJvbWlzZTxTeXN0ZW0+IHtcbiAgY29uc3QgbG9jYWxDbGllbnRJbnB1dFF1ZXJ5ID0gZGVmaW5lUXVlcnkoW0lucHV0Q29tcG9uZW50LCBMb2NhbElucHV0VGFnQ29tcG9uZW50XSlcblxuICByZXR1cm4gKCkgPT4ge1xuICAgIGNvbnN0IHsgZGVsdGEgfSA9IHdvcmxkXG5cbiAgICBpZiAoIUVuZ2luZS54clNlc3Npb24pIHtcbiAgICAgIC8vIGhhbmRsZUdhbWVwYWRzKClcbiAgICB9XG5cbiAgICAvLyBmb3IgY29udGludW91cyBpbnB1dCwgZmlndXJlIG91dCBpZiB0aGUgY3VycmVudCBkYXRhIGFuZCBwcmV2aW91cyBkYXRhIGlzIHRoZSBzYW1lXG4gICAgRW5naW5lLmlucHV0U3RhdGUuZm9yRWFjaCgodmFsdWU6IElucHV0VmFsdWUsIGtleTogSW5wdXRBbGlhcykgPT4ge1xuICAgICAgaWYgKEVuZ2luZS5wcmV2SW5wdXRTdGF0ZS5oYXMoa2V5KSkge1xuICAgICAgICBpZiAodmFsdWUudHlwZSA9PT0gSW5wdXRUeXBlLkJVVFRPTikge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHZhbHVlLmxpZmVjeWNsZVN0YXRlID09PSBMaWZlY3ljbGVWYWx1ZS5TdGFydGVkICYmXG4gICAgICAgICAgICBFbmdpbmUucHJldklucHV0U3RhdGUuZ2V0KGtleSk/LmxpZmVjeWNsZVN0YXRlID09PSBMaWZlY3ljbGVWYWx1ZS5TdGFydGVkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB2YWx1ZS5saWZlY3ljbGVTdGF0ZSA9IExpZmVjeWNsZVZhbHVlLkNvbnRpbnVlZFxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodmFsdWUubGlmZWN5Y2xlU3RhdGUgIT09IExpZmVjeWNsZVZhbHVlLkVuZGVkKSB7XG4gICAgICAgICAgICB2YWx1ZS5saWZlY3ljbGVTdGF0ZSA9XG4gICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHZhbHVlLnZhbHVlKSA9PT0gSlNPTi5zdHJpbmdpZnkoRW5naW5lLnByZXZJbnB1dFN0YXRlLmdldChrZXkpPy52YWx1ZSlcbiAgICAgICAgICAgICAgICA/IExpZmVjeWNsZVZhbHVlLlVuY2hhbmdlZFxuICAgICAgICAgICAgICAgIDogTGlmZWN5Y2xlVmFsdWUuQ2hhbmdlZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBFbmdpbmUucHJldklucHV0U3RhdGUuZ2V0KGtleSk/LmxpZmVjeWNsZVN0YXRlID09PSBMaWZlY3ljbGVWYWx1ZS5FbmRlZCAmJlxuICAgICAgICAgIHZhbHVlLmxpZmVjeWNsZVN0YXRlID09PSBMaWZlY3ljbGVWYWx1ZS5FbmRlZFxuICAgICAgICApIHtcbiAgICAgICAgICBFbmdpbmUuaW5wdXRTdGF0ZS5kZWxldGUoa2V5KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIEVuZ2luZS5wcmV2SW5wdXRTdGF0ZS5jbGVhcigpXG4gICAgRW5naW5lLmlucHV0U3RhdGUuZm9yRWFjaCgodmFsdWU6IElucHV0VmFsdWUsIGtleTogSW5wdXRBbGlhcykgPT4ge1xuICAgICAgRW5naW5lLnByZXZJbnB1dFN0YXRlLnNldChrZXksIHZhbHVlKVxuICAgIH0pXG5cbiAgICAvLyBjb3B5IGNsaWVudCBpbnB1dCBzdGF0ZSB0byBpbnB1dCBjb21wb25lbnRcbiAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiBsb2NhbENsaWVudElucHV0UXVlcnkod29ybGQpKSB7XG4gICAgICBjb25zdCBpbnB1dENvbXBvbmVudCA9IGdldENvbXBvbmVudChlbnRpdHksIElucHV0Q29tcG9uZW50KVxuICAgICAgaW5wdXRDb21wb25lbnQuZGF0YS5jbGVhcigpXG4gICAgICBFbmdpbmUuaW5wdXRTdGF0ZS5mb3JFYWNoKCh2YWx1ZTogSW5wdXRWYWx1ZSwga2V5OiBJbnB1dEFsaWFzKSA9PiB7XG4gICAgICAgIGlmIChpbnB1dENvbXBvbmVudC5zY2hlbWEuaW5wdXRNYXAuaGFzKGtleSkpIHtcbiAgICAgICAgICBpbnB1dENvbXBvbmVudC5kYXRhLnNldChpbnB1dENvbXBvbmVudC5zY2hlbWEuaW5wdXRNYXAuZ2V0KGtleSkhLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHZhbHVlKSkpXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGlucHV0Q29tcG9uZW50LmRhdGEuZm9yRWFjaCgodmFsdWU6IElucHV0VmFsdWUsIGtleTogSW5wdXRBbGlhcykgPT4ge1xuICAgICAgICBpZiAoaW5wdXRDb21wb25lbnQuc2NoZW1hLmJlaGF2aW9yTWFwLmhhcyhrZXkpKSB7XG4gICAgICAgICAgaW5wdXRDb21wb25lbnQuc2NoZW1hLmJlaGF2aW9yTWFwLmdldChrZXkpIShlbnRpdHksIGtleSwgdmFsdWUsIGRlbHRhKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJtY0FZYSxHQUFjLENBQUMsQ0FBRSxXQUFVLFdBQXFELENBQ3ZGLE1BQU8sSUFBYSxnQkFBb0IscUJBQXVCLEdBQy9ELE1BQU8sSUFBVSxnQkFBb0Isa0JBQW9CLHFCQUdmLEVBQStCLE1BQ3ZFLEdBQXdCLEVBQVksQ0FBQyxFQUFnQixVQUVwRCxJQUFNLE1BQ0wsQ0FBRSxTQUFVLEVBRWQsQ0FBQyxFQUFPLFlBS0wsV0FBVyxRQUFRLENBQUMsRUFBbUIsSUFBb0IsQ0FDNUQsRUFBTyxlQUFlLElBQUksS0FDeEIsRUFBTSxPQUFTLEVBQVUsT0FFekIsRUFBTSxpQkFBbUIsRUFBZSxTQUN4QyxFQUFPLGVBQWUsSUFBSSxJQUFNLGlCQUFtQixFQUFlLFlBRTVELGVBQWlCLEVBQWUsV0FHcEMsRUFBTSxpQkFBbUIsRUFBZSxVQUNwQyxlQUNKLEtBQUssVUFBVSxFQUFNLFNBQVcsS0FBSyxVQUFVLEVBQU8sZUFBZSxJQUFJLElBQU0sT0FDM0UsRUFBZSxVQUNmLEVBQWUsU0FLdkIsRUFBTyxlQUFlLElBQUksSUFBTSxpQkFBbUIsRUFBZSxPQUNsRSxFQUFNLGlCQUFtQixFQUFlLFNBRWpDLFdBQVcsT0FBTyxRQUt4QixlQUFlLFVBQ2YsV0FBVyxRQUFRLENBQUMsRUFBbUIsSUFBb0IsR0FDekQsZUFBZSxJQUFJLEVBQUssY0FJdEIsS0FBVSxHQUFzQixHQUFRLE1BQzNDLEdBQWlCLEVBQWEsRUFBUSxLQUM3QixLQUFLLFVBQ2IsV0FBVyxRQUFRLENBQUMsRUFBbUIsSUFBb0IsQ0FDNUQsRUFBZSxPQUFPLFNBQVMsSUFBSSxNQUN0QixLQUFLLElBQUksRUFBZSxPQUFPLFNBQVMsSUFBSSxHQUFPLEtBQUssTUFBTSxLQUFLLFVBQVUsU0FJakYsS0FBSyxRQUFRLENBQUMsRUFBbUIsSUFBb0IsQ0FDOUQsRUFBZSxPQUFPLFlBQVksSUFBSSxNQUN6QixPQUFPLFlBQVksSUFBSSxHQUFNLEVBQVEsRUFBSyxFQUFPIn0=
