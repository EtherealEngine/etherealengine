import{b as V}from"./avatarFunctions.6d66cf01.js";import"./three.module.493739a3.js";import"./index.7b02be28.js";import"./vendor.475cb2ff.js";const ae=Symbol("@@webxr-polyfill/EventTarget");class Te{constructor(){this[ae]={listeners:new Map}}addEventListener(e,s){if(typeof e!="string")throw new Error("`type` must be a string");if(typeof s!="function")throw new Error("`listener` must be a function");const i=this[ae].listeners.get(e)||[];i.push(s),this[ae].listeners.set(e,i)}removeEventListener(e,s){if(typeof e!="string")throw new Error("`type` must be a string");if(typeof s!="function")throw new Error("`listener` must be a function");const i=this[ae].listeners.get(e)||[];for(let r=i.length;r>=0;r--)i[r]===s&&i.pop()}dispatchEvent(e,s){const i=this[ae].listeners.get(e)||[],r=[];for(let n=0;n<i.length;n++)r[n]=i[n];for(let n of r)n(s);typeof this[`on${e}`]=="function"&&this[`on${e}`](s)}}const A=Symbol("@@webxr-polyfill/XR"),Vt=["inline","immersive-vr","immersive-ar"],zt={inline:{requiredFeatures:["viewer"],optionalFeatures:[]},"immersive-vr":{requiredFeatures:["viewer","local"],optionalFeatures:[]},"immersive-ar":{requiredFeatures:["viewer","local"],optionalFeatures:[]}},Nt=`Polyfill Error: Must call navigator.xr.isSessionSupported() with any XRSessionMode
or navigator.xr.requestSession('inline') prior to requesting an immersive
session. This is a limitation specific to the WebXR Polyfill and does not apply
to native implementations of the API.`;class ve extends Te{constructor(e){super();this[A]={device:null,devicePromise:e,immersiveSession:null,inlineSessions:new Set},e.then(s=>{this[A].device=s})}async isSessionSupported(e){return this[A].device||await this[A].devicePromise,e!="inline"?Promise.resolve(this[A].device.isSessionSupported(e)):Promise.resolve(!0)}async requestSession(e,s){if(!this[A].device){if(e!="inline")throw new Error(Nt);await this[A].devicePromise}if(!Vt.includes(e))throw new TypeError(`The provided value '${e}' is not a valid enum value of type XRSessionMode`);const i=zt[e],r=i.requiredFeatures.concat(s&&s.requiredFeatures?s.requiredFeatures:[]),n=i.optionalFeatures.concat(s&&s.optionalFeatures?s.optionalFeatures:[]),a=new Set;let o=!1;for(let u of r)this[A].device.isFeatureSupported(u)?a.add(u):(console.error(`The required feature '${u}' is not supported`),o=!0);if(o)throw new DOMException("Session does not support some required features","NotSupportedError");for(let u of n)this[A].device.isFeatureSupported(u)?a.add(u):console.log(`The optional feature '${u}' is not supported`);const l=await this[A].device.requestSession(e,a),c=new XRSession(this[A].device,e,l);e=="inline"?this[A].inlineSessions.add(c):this[A].immersiveSession=c;const d=()=>{e=="inline"?this[A].inlineSessions.delete(c):this[A].immersiveSession=null,c.removeEventListener("end",d)};return c.addEventListener("end",d),c}}const Me=Symbol("@@webxr-polyfill/XRPose");class je{constructor(e,s){this[Me]={transform:e,emulatedPosition:s}}get transform(){return this[Me].transform}get emulatedPosition(){return this[Me].emulatedPosition}}const Ge=Symbol("@@webxr-polyfill/XRViewerPose");class $e extends je{constructor(e,s,i=!1){super(e,i);this[Ge]={views:s}}get views(){return this[Ge].views}}const oe=Symbol("@@webxr-polyfill/XRViewport");class We{constructor(e){this[oe]={target:e}}get x(){return this[oe].target.x}get y(){return this[oe].target.y}get width(){return this[oe].target.width}get height(){return this[oe].target.height}}var qe=1e-6,O=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Xt(){var t=new O(9);return O!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function E(){var t=new O(16);return O!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function ge(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function B(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function z(t,e){var s=e[0],i=e[1],r=e[2],n=e[3],a=e[4],o=e[5],l=e[6],c=e[7],d=e[8],u=e[9],p=e[10],f=e[11],g=e[12],y=e[13],m=e[14],R=e[15],M=s*o-i*a,w=s*l-r*a,x=s*c-n*a,S=i*l-r*o,v=i*c-n*o,X=r*c-n*l,ee=d*y-u*g,te=d*m-p*g,se=d*R-f*g,ie=u*m-p*y,re=u*R-f*y,ne=p*R-f*m,P=M*ne-w*re+x*ie+S*se-v*te+X*ee;return P?(P=1/P,t[0]=(o*ne-l*re+c*ie)*P,t[1]=(r*re-i*ne-n*ie)*P,t[2]=(y*X-m*v+R*S)*P,t[3]=(p*v-u*X-f*S)*P,t[4]=(l*se-a*ne-c*te)*P,t[5]=(s*ne-r*se+n*te)*P,t[6]=(m*x-g*X-R*w)*P,t[7]=(d*X-p*x+f*w)*P,t[8]=(a*re-o*se+c*ee)*P,t[9]=(i*se-s*re-n*ee)*P,t[10]=(g*v-y*x+R*M)*P,t[11]=(u*x-d*v-f*M)*P,t[12]=(o*te-a*ie-l*ee)*P,t[13]=(s*ie-i*te+r*ee)*P,t[14]=(y*w-g*S-m*M)*P,t[15]=(d*S-u*w+p*M)*P,t):null}function L(t,e,s){var i=e[0],r=e[1],n=e[2],a=e[3],o=e[4],l=e[5],c=e[6],d=e[7],u=e[8],p=e[9],f=e[10],g=e[11],y=e[12],m=e[13],R=e[14],M=e[15],w=s[0],x=s[1],S=s[2],v=s[3];return t[0]=w*i+x*o+S*u+v*y,t[1]=w*r+x*l+S*p+v*m,t[2]=w*n+x*c+S*f+v*R,t[3]=w*a+x*d+S*g+v*M,w=s[4],x=s[5],S=s[6],v=s[7],t[4]=w*i+x*o+S*u+v*y,t[5]=w*r+x*l+S*p+v*m,t[6]=w*n+x*c+S*f+v*R,t[7]=w*a+x*d+S*g+v*M,w=s[8],x=s[9],S=s[10],v=s[11],t[8]=w*i+x*o+S*u+v*y,t[9]=w*r+x*l+S*p+v*m,t[10]=w*n+x*c+S*f+v*R,t[11]=w*a+x*d+S*g+v*M,w=s[12],x=s[13],S=s[14],v=s[15],t[12]=w*i+x*o+S*u+v*y,t[13]=w*r+x*l+S*p+v*m,t[14]=w*n+x*c+S*f+v*R,t[15]=w*a+x*d+S*g+v*M,t}function Bt(t,e,s){var i=s[0],r=s[1],n=s[2],a,o,l,c,d,u,p,f,g,y,m,R;return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*n+e[12],t[13]=e[1]*i+e[5]*r+e[9]*n+e[13],t[14]=e[2]*i+e[6]*r+e[10]*n+e[14],t[15]=e[3]*i+e[7]*r+e[11]*n+e[15]):(a=e[0],o=e[1],l=e[2],c=e[3],d=e[4],u=e[5],p=e[6],f=e[7],g=e[8],y=e[9],m=e[10],R=e[11],t[0]=a,t[1]=o,t[2]=l,t[3]=c,t[4]=d,t[5]=u,t[6]=p,t[7]=f,t[8]=g,t[9]=y,t[10]=m,t[11]=R,t[12]=a*i+d*r+g*n+e[12],t[13]=o*i+u*r+y*n+e[13],t[14]=l*i+p*r+m*n+e[14],t[15]=c*i+f*r+R*n+e[15]),t}function Ut(t,e,s){var i=Math.sin(s),r=Math.cos(s),n=e[4],a=e[5],o=e[6],l=e[7],c=e[8],d=e[9],u=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=n*r+c*i,t[5]=a*r+d*i,t[6]=o*r+u*i,t[7]=l*r+p*i,t[8]=c*r-n*i,t[9]=d*r-a*i,t[10]=u*r-o*i,t[11]=p*r-l*i,t}function kt(t,e,s){var i=Math.sin(s),r=Math.cos(s),n=e[0],a=e[1],o=e[2],l=e[3],c=e[8],d=e[9],u=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=n*r-c*i,t[1]=a*r-d*i,t[2]=o*r-u*i,t[3]=l*r-p*i,t[8]=n*i+c*r,t[9]=a*i+d*r,t[10]=o*i+u*r,t[11]=l*i+p*r,t}function Ht(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Qe(t,e,s){var i=s[0],r=s[1],n=s[2],a=Math.hypot(i,r,n),o,l,c;return a<qe?null:(a=1/a,i*=a,r*=a,n*=a,o=Math.sin(e),l=Math.cos(e),c=1-l,t[0]=i*i*c+l,t[1]=r*i*c+n*o,t[2]=n*i*c-r*o,t[3]=0,t[4]=i*r*c-n*o,t[5]=r*r*c+l,t[6]=n*r*c+i*o,t[7]=0,t[8]=i*n*c+r*o,t[9]=r*n*c-i*o,t[10]=n*n*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function j(t,e,s){var i=e[0],r=e[1],n=e[2],a=e[3],o=i+i,l=r+r,c=n+n,d=i*o,u=i*l,p=i*c,f=r*l,g=r*c,y=n*c,m=a*o,R=a*l,M=a*c;return t[0]=1-(f+y),t[1]=u+M,t[2]=p-R,t[3]=0,t[4]=u-M,t[5]=1-(d+y),t[6]=g+m,t[7]=0,t[8]=p+R,t[9]=g-m,t[10]=1-(d+f),t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t}function Ye(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function jt(t,e){var s=e[0],i=e[1],r=e[2],n=e[4],a=e[5],o=e[6],l=e[8],c=e[9],d=e[10];return t[0]=Math.hypot(s,i,r),t[1]=Math.hypot(n,a,o),t[2]=Math.hypot(l,c,d),t}function Ie(t,e){var s=new O(3);jt(s,e);var i=1/s[0],r=1/s[1],n=1/s[2],a=e[0]*i,o=e[1]*r,l=e[2]*n,c=e[4]*i,d=e[5]*r,u=e[6]*n,p=e[8]*i,f=e[9]*r,g=e[10]*n,y=a+d+g,m=0;return y>0?(m=Math.sqrt(y+1)*2,t[3]=.25*m,t[0]=(u-f)/m,t[1]=(p-l)/m,t[2]=(o-c)/m):a>d&&a>g?(m=Math.sqrt(1+a-d-g)*2,t[3]=(u-f)/m,t[0]=.25*m,t[1]=(o+c)/m,t[2]=(p+l)/m):d>g?(m=Math.sqrt(1+d-a-g)*2,t[3]=(p-l)/m,t[0]=(o+c)/m,t[1]=.25*m,t[2]=(u+f)/m):(m=Math.sqrt(1+g-a-d)*2,t[3]=(o-c)/m,t[0]=(p+l)/m,t[1]=(u+f)/m,t[2]=.25*m),t}function Ze(t,e,s,i){var r=e[0],n=e[1],a=e[2],o=e[3],l=r+r,c=n+n,d=a+a,u=r*l,p=r*c,f=r*d,g=n*c,y=n*d,m=a*d,R=o*l,M=o*c,w=o*d,x=i[0],S=i[1],v=i[2];return t[0]=(1-(g+m))*x,t[1]=(p+w)*x,t[2]=(f-M)*x,t[3]=0,t[4]=(p-w)*S,t[5]=(1-(u+m))*S,t[6]=(y+R)*S,t[7]=0,t[8]=(f+M)*v,t[9]=(y-R)*v,t[10]=(1-(u+g))*v,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t}function Q(t,e,s,i,r){var n=1/Math.tan(e/2),a;return t[0]=n/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0?(a=1/(i-r),t[10]=(r+i)*a,t[14]=2*r*i*a):(t[10]=-1,t[14]=-2*i),t}function I(){var t=new O(3);return O!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Je(t){var e=new O(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Gt(t){var e=t[0],s=t[1],i=t[2];return Math.hypot(e,s,i)}function N(t,e,s){var i=new O(3);return i[0]=t,i[1]=e,i[2]=s,i}function Fe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function G(t,e,s,i){return t[0]=e,t[1]=s,t[2]=i,t}function le(t,e,s){return t[0]=e[0]+s[0],t[1]=e[1]+s[1],t[2]=e[2]+s[2],t}function Ke(t,e,s){return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function $t(t,e){var s=e[0],i=e[1],r=e[2],n=s*s+i*i+r*r;return n>0&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function ye(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function we(t,e,s){var i=e[0],r=e[1],n=e[2],a=s[0],o=s[1],l=s[2];return t[0]=r*l-n*o,t[1]=n*a-i*l,t[2]=i*o-r*a,t}function Wt(t,e,s){var i=e[0],r=e[1],n=e[2],a=s[3]*i+s[7]*r+s[11]*n+s[15];return a=a||1,t[0]=(s[0]*i+s[4]*r+s[8]*n+s[12])/a,t[1]=(s[1]*i+s[5]*r+s[9]*n+s[13])/a,t[2]=(s[2]*i+s[6]*r+s[10]*n+s[14])/a,t}function $(t,e,s){var i=s[0],r=s[1],n=s[2],a=s[3],o=e[0],l=e[1],c=e[2],d=r*c-n*l,u=n*o-i*c,p=i*l-r*o,f=r*p-n*u,g=n*d-i*p,y=i*u-r*d,m=a*2;return d*=m,u*=m,p*=m,f*=2,g*=2,y*=2,t[0]=o+d+f,t[1]=l+u+g,t[2]=c+p+y,t}function qt(t,e){var s=t[0],i=t[1],r=t[2],n=e[0],a=e[1],o=e[2],l=Math.sqrt(s*s+i*i+r*r),c=Math.sqrt(n*n+a*a+o*o),d=l*c,u=d&&ye(t,e)/d;return Math.acos(Math.min(Math.max(u,-1),1))}var Qt=Gt;(function(){var t=I();return function(e,s,i,r,n,a){var o,l;for(s||(s=3),i||(i=0),r?l=Math.min(r*s+i,e.length):l=e.length,o=i;o<l;o+=s)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],n(t,t,a),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e}})();function Ae(){var t=new O(4);return O!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Yt(t){var e=new O(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Zt(t,e,s,i){var r=new O(4);return r[0]=t,r[1]=e,r[2]=s,r[3]=i,r}function Jt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function et(t,e,s,i,r){return t[0]=e,t[1]=s,t[2]=i,t[3]=r,t}function Kt(t,e){var s=e[0],i=e[1],r=e[2],n=e[3],a=s*s+i*i+r*r+n*n;return a>0&&(a=1/Math.sqrt(a)),t[0]=s*a,t[1]=i*a,t[2]=r*a,t[3]=n*a,t}function tt(t,e,s){var i=e[0],r=e[1],n=e[2],a=e[3];return t[0]=s[0]*i+s[4]*r+s[8]*n+s[12]*a,t[1]=s[1]*i+s[5]*r+s[9]*n+s[13]*a,t[2]=s[2]*i+s[6]*r+s[10]*n+s[14]*a,t[3]=s[3]*i+s[7]*r+s[11]*n+s[15]*a,t}(function(){var t=Ae();return function(e,s,i,r,n,a){var o,l;for(s||(s=4),i||(i=0),r?l=Math.min(r*s+i,e.length):l=e.length,o=i;o<l;o+=s)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],n(t,t,a),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}})();function C(){var t=new O(4);return O!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function es(t,e,s){s=s*.5;var i=Math.sin(s);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(s),t}function st(t,e,s){var i=e[0],r=e[1],n=e[2],a=e[3],o=s[0],l=s[1],c=s[2],d=s[3];return t[0]=i*d+a*o+r*c-n*l,t[1]=r*d+a*l+n*o-i*c,t[2]=n*d+a*c+i*l-r*o,t[3]=a*d-i*o-r*l-n*c,t}function ce(t,e,s,i){var r=e[0],n=e[1],a=e[2],o=e[3],l=s[0],c=s[1],d=s[2],u=s[3],p,f,g,y,m;return f=r*l+n*c+a*d+o*u,f<0&&(f=-f,l=-l,c=-c,d=-d,u=-u),1-f>qe?(p=Math.acos(f),g=Math.sin(p),y=Math.sin((1-i)*p)/g,m=Math.sin(i*p)/g):(y=1-i,m=i),t[0]=y*r+m*l,t[1]=y*n+m*c,t[2]=y*a+m*d,t[3]=y*o+m*u,t}function it(t,e){var s=e[0],i=e[1],r=e[2],n=e[3],a=s*s+i*i+r*r+n*n,o=a?1/a:0;return t[0]=-s*o,t[1]=-i*o,t[2]=-r*o,t[3]=n*o,t}function ts(t,e){var s=e[0]+e[4]+e[8],i;if(s>0)i=Math.sqrt(s+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[r*3+r]&&(r=2);var n=(r+1)%3,a=(r+2)%3;i=Math.sqrt(e[r*3+r]-e[n*3+n]-e[a*3+a]+1),t[r]=.5*i,i=.5/i,t[3]=(e[n*3+a]-e[a*3+n])*i,t[n]=(e[n*3+r]+e[r*3+n])*i,t[a]=(e[a*3+r]+e[r*3+a])*i}return t}function ss(t,e,s,i){var r=.5*Math.PI/180;e*=r,s*=r,i*=r;var n=Math.sin(e),a=Math.cos(e),o=Math.sin(s),l=Math.cos(s),c=Math.sin(i),d=Math.cos(i);return t[0]=n*l*d-a*o*c,t[1]=a*o*d+n*l*c,t[2]=a*l*c-n*o*d,t[3]=a*l*d+n*o*c,t}var rt=Yt,is=Zt,Oe=Jt,Se=Kt;(function(){var t=I(),e=N(1,0,0),s=N(0,1,0);return function(i,r,n){var a=ye(r,n);return a<-.999999?(we(t,e,r),Qt(t)<1e-6&&we(t,s,r),$t(t,t),es(i,t,Math.PI),i):a>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(we(t,r,n),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+a,Se(i,i))}})();(function(){var t=C(),e=C();return function(s,i,r,n,a,o){return ce(t,i,a,o),ce(e,r,n,o),ce(s,t,e,2*o*(1-o)),s}})();(function(){var t=Xt();return function(e,s,i,r){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-s[0],t[5]=-s[1],t[8]=-s[2],Se(e,ts(e,t))}})();const b=Symbol("@@webxr-polyfill/XRRigidTransform");class W{constructor(){if(this[b]={matrix:null,position:null,orientation:null,inverse:null},arguments.length===0)this[b].matrix=B(new Float32Array(16));else if(arguments.length===1)arguments[0]instanceof Float32Array?this[b].matrix=arguments[0]:(this[b].position=this._getPoint(arguments[0]),this[b].orientation=DOMPointReadOnly.fromPoint({x:0,y:0,z:0,w:1}));else if(arguments.length===2)this[b].position=this._getPoint(arguments[0]),this[b].orientation=this._getPoint(arguments[1]);else throw new Error("Too many arguments!");if(this[b].matrix){let e=I();Ye(e,this[b].matrix),this[b].position=DOMPointReadOnly.fromPoint({x:e[0],y:e[1],z:e[2]});let s=C();Ie(s,this[b].matrix),this[b].orientation=DOMPointReadOnly.fromPoint({x:s[0],y:s[1],z:s[2],w:s[3]})}else this[b].matrix=B(new Float32Array(16)),j(this[b].matrix,is(this[b].orientation.x,this[b].orientation.y,this[b].orientation.z,this[b].orientation.w),N(this[b].position.x,this[b].position.y,this[b].position.z))}_getPoint(e){return e instanceof DOMPointReadOnly?e:DOMPointReadOnly.fromPoint(e)}get matrix(){return this[b].matrix}get position(){return this[b].position}get orientation(){return this[b].orientation}get inverse(){if(this[b].inverse===null){let e=B(new Float32Array(16));z(e,this[b].matrix),this[b].inverse=new W(e),this[b].inverse[b].inverse=this}return this[b].inverse}}const nt=["left","right","none"],U=Symbol("@@webxr-polyfill/XRView");class at{constructor(e,s,i,r){if(!nt.includes(i))throw new Error(`XREye must be one of: ${nt}`);const n=Object.create(null),a=new We(n);this[U]={device:e,eye:i,viewport:a,temp:n,sessionId:r,transform:s}}get eye(){return this[U].eye}get projectionMatrix(){return this[U].device.getProjectionMatrix(this.eye)}get transform(){return this[U].transform}_getViewport(e){if(this[U].device.getViewport(this[U].sessionId,this.eye,e,this[U].temp))return this[U].viewport}}const T=Symbol("@@webxr-polyfill/XRFrame"),ot="XRFrame access outside the callback that produced it is invalid.",rs="getViewerPose can only be called on XRFrame objects passed to XRSession.requestAnimationFrame callbacks.";let ns=0;class he{constructor(e,s,i){this[T]={id:++ns,active:!1,animationFrame:!1,device:e,session:s,sessionId:i}}get session(){return this[T].session}getViewerPose(e){if(!this[T].animationFrame)throw new DOMException(rs,"InvalidStateError");if(!this[T].active)throw new DOMException(ot,"InvalidStateError");const s=this[T].device,i=this[T].session;i[h].viewerSpace._ensurePoseUpdated(s,this[T].id),e._ensurePoseUpdated(s,this[T].id);let r=e._getSpaceRelativeTransform(i[h].viewerSpace);const n=[];for(let o of i[h].viewSpaces){o._ensurePoseUpdated(s,this[T].id);let l=e._getSpaceRelativeTransform(o),c=new at(s,l,o.eye,this[T].sessionId);n.push(c)}return new $e(r,n,!1)}getPose(e,s){if(!this[T].active)throw new DOMException(ot,"InvalidStateError");const i=this[T].device;if(e._specialType==="target-ray"||e._specialType==="grip")return i.getInputPose(e._inputSource,s,e._specialType);{e._ensurePoseUpdated(i,this[T].id),s._ensurePoseUpdated(i,this[T].id);let r=s._getSpaceRelativeTransform(e);return r?new XRPose(r,!1):null}}}const _=Symbol("@@webxr-polyfill/XRSpace");class Y{constructor(e=null,s=null){this[_]={specialType:e,inputSource:s,baseMatrix:null,inverseBaseMatrix:null,lastFrameId:-1}}get _specialType(){return this[_].specialType}get _inputSource(){return this[_].inputSource}_ensurePoseUpdated(e,s){s!=this[_].lastFrameId&&(this[_].lastFrameId=s,this._onPoseUpdate(e))}_onPoseUpdate(e){this[_].specialType=="viewer"&&(this._baseMatrix=e.getBasePoseMatrix())}set _baseMatrix(e){this[_].baseMatrix=e,this[_].inverseBaseMatrix=null}get _baseMatrix(){return this[_].baseMatrix||this[_].inverseBaseMatrix&&(this[_].baseMatrix=new Float32Array(16),z(this[_].baseMatrix,this[_].inverseBaseMatrix)),this[_].baseMatrix}set _inverseBaseMatrix(e){this[_].inverseBaseMatrix=e,this[_].baseMatrix=null}get _inverseBaseMatrix(){return this[_].inverseBaseMatrix||this[_].baseMatrix&&(this[_].inverseBaseMatrix=new Float32Array(16),z(this[_].inverseBaseMatrix,this[_].baseMatrix)),this[_].inverseBaseMatrix}_getSpaceRelativeTransform(e){if(!this._inverseBaseMatrix||!e._baseMatrix)return null;let s=new Float32Array(16);return L(s,this._inverseBaseMatrix,e._baseMatrix),new W(s)}}const as=1.6,k=Symbol("@@webxr-polyfill/XRReferenceSpace"),xe=["viewer","local","local-floor","bounded-floor","unbounded"];function os(t){return t==="bounded-floor"||t==="local-floor"}class de extends Y{constructor(e,s=null){if(!xe.includes(e))throw new Error(`XRReferenceSpaceType must be one of ${xe}`);super(e);if(e==="bounded-floor"&&!s)throw new Error("XRReferenceSpace cannot use 'bounded-floor' type if the platform does not provide the floor level");os(e)&&!s&&(s=B(new Float32Array(16)),s[13]=as),this._inverseBaseMatrix=s||B(new Float32Array(16)),this[k]={type:e,transform:s,originOffset:B(new Float32Array(16))}}_transformBasePoseMatrix(e,s){L(e,this._inverseBaseMatrix,s)}_originOffsetMatrix(){return this[k].originOffset}_adjustForOriginOffset(e){let s=new Float32Array(16);z(s,this[k].originOffset),L(e,s,e)}_getSpaceRelativeTransform(e){let s=super._getSpaceRelativeTransform(e);return this._adjustForOriginOffset(s.matrix),new XRRigidTransform(s.matrix)}getOffsetReferenceSpace(e){let s=new de(this[k].type,this[k].transform,this[k].bounds);return L(s[k].originOffset,this[k].originOffset,e.matrix),s}}const ue=Symbol("@@webxr-polyfill/XRRenderState"),ls=Object.freeze({depthNear:.1,depthFar:1e3,inlineVerticalFieldOfView:null,baseLayer:null});class Ce{constructor(e={}){const s=Object.assign({},ls,e);this[ue]={config:s}}get depthNear(){return this[ue].config.depthNear}get depthFar(){return this[ue].config.depthFar}get inlineVerticalFieldOfView(){return this[ue].config.inlineVerticalFieldOfView}get baseLayer(){return this[ue].config.baseLayer}}const Le=Symbol("@@webxr-polyfill/XRInputSourceEvent");class be extends Event{constructor(e,s){super(e,s);this[Le]={frame:s.frame,inputSource:s.inputSource},Object.setPrototypeOf(this,be.prototype)}get frame(){return this[Le].frame}get inputSource(){return this[Le].inputSource}}const lt=Symbol("@@webxr-polyfill/XRSessionEvent");class pe extends Event{constructor(e,s){super(e,s);this[lt]={session:s.session},Object.setPrototypeOf(this,pe.prototype)}get session(){return this[lt].session}}const Ee=Symbol("@@webxr-polyfill/XRInputSourcesChangeEvent");class Re extends Event{constructor(e,s){super(e,s);this[Ee]={session:s.session,added:s.added,removed:s.removed},Object.setPrototypeOf(this,Re.prototype)}get session(){return this[Ee].session}get added(){return this[Ee].added}get removed(){return this[Ee].removed}}const h=Symbol("@@webxr-polyfill/XRSession");class De extends Y{constructor(e){super(e)}get eye(){return this._specialType}_onPoseUpdate(e){this._inverseBaseMatrix=e.getBaseViewMatrix(this._specialType)}}class Z extends Te{constructor(e,s,i){super();let r=s!="inline",n=new Ce({inlineVerticalFieldOfView:r?null:Math.PI*.5});this[h]={device:e,mode:s,immersive:r,ended:!1,suspended:!1,frameCallbacks:[],currentFrameCallbacks:null,frameHandle:0,deviceFrameHandle:null,id:i,activeRenderState:n,pendingRenderState:null,viewerSpace:new de("viewer"),viewSpaces:[],currentInputSources:[]},r?this[h].viewSpaces.push(new De("left"),new De("right")):this[h].viewSpaces.push(new De("none")),this[h].onDeviceFrame=()=>{if(this[h].ended||this[h].suspended||(this[h].deviceFrameHandle=null,this[h].startDeviceFrameLoop(),this[h].pendingRenderState!==null&&(this[h].activeRenderState=new Ce(this[h].pendingRenderState),this[h].pendingRenderState=null,this[h].activeRenderState.baseLayer&&this[h].device.onBaseLayerSet(this[h].id,this[h].activeRenderState.baseLayer)),this[h].activeRenderState.baseLayer===null))return;const a=new he(e,this,this[h].id),o=this[h].currentFrameCallbacks=this[h].frameCallbacks;this[h].frameCallbacks=[],a[T].active=!0,a[T].animationFrame=!0,this[h].device.onFrameStart(this[h].id,this[h].activeRenderState),this._checkInputSourcesChange();const l=performance.now();for(let c=0;c<o.length;c++)try{!o[c].cancelled&&typeof o[c].callback=="function"&&o[c].callback(l,a)}catch(d){console.error(d)}this[h].currentFrameCallbacks=null,a[T].active=!1,this[h].device.onFrameEnd(this[h].id)},this[h].startDeviceFrameLoop=()=>{this[h].deviceFrameHandle===null&&(this[h].deviceFrameHandle=this[h].device.requestAnimationFrame(this[h].onDeviceFrame))},this[h].stopDeviceFrameLoop=()=>{const a=this[h].deviceFrameHandle;a!==null&&(this[h].device.cancelAnimationFrame(a),this[h].deviceFrameHandle=null)},this[h].onPresentationEnd=a=>{if(a!==this[h].id){this[h].suspended=!1,this[h].startDeviceFrameLoop(),this.dispatchEvent("focus",{session:this});return}this[h].ended=!0,this[h].stopDeviceFrameLoop(),e.removeEventListener("@@webxr-polyfill/vr-present-end",this[h].onPresentationEnd),e.removeEventListener("@@webxr-polyfill/vr-present-start",this[h].onPresentationStart),e.removeEventListener("@@webxr-polyfill/input-select-start",this[h].onSelectStart),e.removeEventListener("@@webxr-polyfill/input-select-end",this[h].onSelectEnd),this.dispatchEvent("end",new pe("end",{session:this}))},e.addEventListener("@@webxr-polyfill/vr-present-end",this[h].onPresentationEnd),this[h].onPresentationStart=a=>{a!==this[h].id&&(this[h].suspended=!0,this[h].stopDeviceFrameLoop(),this.dispatchEvent("blur",{session:this}))},e.addEventListener("@@webxr-polyfill/vr-present-start",this[h].onPresentationStart),this[h].onSelectStart=a=>{a.sessionId===this[h].id&&this[h].dispatchInputSourceEvent("selectstart",a.inputSource)},e.addEventListener("@@webxr-polyfill/input-select-start",this[h].onSelectStart),this[h].onSelectEnd=a=>{a.sessionId===this[h].id&&(this[h].dispatchInputSourceEvent("selectend",a.inputSource),this[h].dispatchInputSourceEvent("select",a.inputSource))},e.addEventListener("@@webxr-polyfill/input-select-end",this[h].onSelectEnd),this[h].onSqueezeStart=a=>{a.sessionId===this[h].id&&this[h].dispatchInputSourceEvent("squeezestart",a.inputSource)},e.addEventListener("@@webxr-polyfill/input-squeeze-start",this[h].onSqueezeStart),this[h].onSqueezeEnd=a=>{a.sessionId===this[h].id&&(this[h].dispatchInputSourceEvent("squeezeend",a.inputSource),this[h].dispatchInputSourceEvent("squeeze",a.inputSource))},e.addEventListener("@@webxr-polyfill/input-squeeze-end",this[h].onSqueezeEnd),this[h].dispatchInputSourceEvent=(a,o)=>{const l=new he(e,this,this[h].id),c=new be(a,{frame:l,inputSource:o});l[T].active=!0,this.dispatchEvent(a,c),l[T].active=!1},this[h].startDeviceFrameLoop(),this.onblur=void 0,this.onfocus=void 0,this.onresetpose=void 0,this.onend=void 0,this.onselect=void 0,this.onselectstart=void 0,this.onselectend=void 0}get renderState(){return this[h].activeRenderState}get environmentBlendMode(){return this[h].device.environmentBlendMode||"opaque"}async requestReferenceSpace(e){if(this[h].ended)return;if(!xe.includes(e))throw new TypeError(`XRReferenceSpaceType must be one of ${xe}`);if(!this[h].device.doesSessionSupportReferenceSpace(this[h].id,e))throw new DOMException(`The ${e} reference space is not supported by this session.`,"NotSupportedError");if(e==="viewer")return this[h].viewerSpace;let s=await this[h].device.requestFrameOfReferenceTransform(e);if(e==="bounded-floor")throw s?this[h].device.requestStageBounds()?new DOMException(`The WebXR polyfill does not support the ${e} reference space yet.`,"NotSupportedError"):new DOMException(`${e} XRReferenceSpace not supported by this device.`,"NotSupportedError"):new DOMException(`${e} XRReferenceSpace not supported by this device.`,"NotSupportedError");return new de(e,s)}requestAnimationFrame(e){if(this[h].ended)return;const s=++this[h].frameHandle;return this[h].frameCallbacks.push({handle:s,callback:e,cancelled:!1}),s}cancelAnimationFrame(e){let s=this[h].frameCallbacks,i=s.findIndex(r=>r&&r.handle===e);i>-1&&(s[i].cancelled=!0,s.splice(i,1)),s=this[h].currentFrameCallbacks,s&&(i=s.findIndex(r=>r&&r.handle===e),i>-1&&(s[i].cancelled=!0))}get inputSources(){return this[h].device.getInputSources()}async end(){if(!this[h].ended)return this[h].immersive&&(this[h].ended=!0,this[h].device.removeEventListener("@@webxr-polyfill/vr-present-start",this[h].onPresentationStart),this[h].device.removeEventListener("@@webxr-polyfill/vr-present-end",this[h].onPresentationEnd),this[h].device.removeEventListener("@@webxr-polyfill/input-select-start",this[h].onSelectStart),this[h].device.removeEventListener("@@webxr-polyfill/input-select-end",this[h].onSelectEnd),this.dispatchEvent("end",new pe("end",{session:this}))),this[h].stopDeviceFrameLoop(),this[h].device.endSession(this[h].id)}updateRenderState(e){if(this[h].ended){const i="Can't call updateRenderState on an XRSession that has already ended.";throw new Error(i)}if(e.baseLayer&&e.baseLayer._session!==this){const i="Called updateRenderState with a base layer that was created by a different session.";throw new Error(i)}if(e.inlineVerticalFieldOfView!==null&&e.inlineVerticalFieldOfView!==void 0)if(this[h].immersive){const i="inlineVerticalFieldOfView must not be set for an XRRenderState passed to updateRenderState for an immersive session.";throw new Error(i)}else e.inlineVerticalFieldOfView=Math.min(3.13,Math.max(.01,e.inlineVerticalFieldOfView));if(this[h].pendingRenderState===null){const i=this[h].activeRenderState;this[h].pendingRenderState={depthNear:i.depthNear,depthFar:i.depthFar,inlineVerticalFieldOfView:i.inlineVerticalFieldOfView,baseLayer:i.baseLayer}}Object.assign(this[h].pendingRenderState,e)}_checkInputSourcesChange(){const e=[],s=[],i=this.inputSources,r=this[h].currentInputSources;for(const n of i)r.includes(n)||e.push(n);for(const n of r)i.includes(n)||s.push(n);(e.length>0||s.length>0)&&this.dispatchEvent("inputsourceschange",new Re("inputsourceschange",{session:this,added:e,removed:s})),this[h].currentInputSources.length=0;for(const n of i)this[h].currentInputSources.push(n)}}const H=Symbol("@@webxr-polyfill/XRInputSource");class ct{constructor(e){this[H]={impl:e,gripSpace:new Y("grip",this),targetRaySpace:new Y("target-ray",this)}}get handedness(){return this[H].impl.handedness}get targetRayMode(){return this[H].impl.targetRayMode}get gripSpace(){let e=this[H].impl.targetRayMode;return e==="gaze"||e==="screen"?null:this[H].gripSpace}get targetRaySpace(){return this[H].targetRaySpace}get profiles(){return this[H].impl.profiles}get gamepad(){return this[H].impl.gamepad}}const ht=Symbol("@@webxr-polyfill/polyfilled-xr-compatible"),_e=Symbol("@@webxr-polyfill/xr-compatible"),q=Symbol("@@webxr-polyfill/XRWebGLLayer"),cs=Object.freeze({antialias:!0,depth:!1,stencil:!1,alpha:!0,multiview:!1,ignoreDepthValues:!1,framebufferScaleFactor:1});class hs{constructor(e,s,i={}){const r=Object.assign({},cs,i);if(!(e instanceof Z))throw new Error("session must be a XRSession");if(e.ended)throw new Error("InvalidStateError");if(s[ht]&&s[_e]!==!0)throw new Error("InvalidStateError");const n=s.getParameter(s.FRAMEBUFFER_BINDING);this[q]={context:s,config:r,framebuffer:n,session:e}}get context(){return this[q].context}get antialias(){return this[q].config.antialias}get ignoreDepthValues(){return!0}get framebuffer(){return this[q].framebuffer}get framebufferWidth(){return this[q].context.drawingBufferWidth}get framebufferHeight(){return this[q].context.drawingBufferHeight}get _session(){return this[q].session}getViewport(e){return e._getViewport(this)}static getNativeFramebufferScaleFactor(e){if(!e)throw new TypeError("getNativeFramebufferScaleFactor must be passed a session.");return e[h].ended?0:1}}const Ve=Symbol("@@webxr-polyfill/XRReferenceSpaceEvent");class ze extends Event{constructor(e,s){super(e,s);this[Ve]={referenceSpace:s.referenceSpace,transform:s.transform||null},Object.setPrototypeOf(this,ze.prototype)}get referenceSpace(){return this[Ve].referenceSpace}get transform(){return this[Ve].transform}}var fe={XRSystem:ve,XRSession:Z,XRSessionEvent:pe,XRFrame:he,XRView:at,XRViewport:We,XRViewerPose:$e,XRWebGLLayer:hs,XRSpace:Y,XRReferenceSpace:de,XRReferenceSpaceEvent:ze,XRInputSource:ct,XRInputSourceEvent:be,XRInputSourcesChangeEvent:Re,XRRenderState:Ce,XRRigidTransform:W,XRPose:je};const dt=t=>typeof t.prototype.makeXRCompatible=="function"?!1:(t.prototype.makeXRCompatible=function(){return this[_e]=!0,Promise.resolve()},!0),ut=t=>{const e=t.prototype.getContext;t.prototype.getContext=function(s,i){const r=e.call(this,s,i);return r&&(r[ht]=!0,i&&"xrCompatible"in i&&(r[_e]=i.xrCompatible)),r}};class Ne extends Te{constructor(e){super();this.global=e,this.onWindowResize=this.onWindowResize.bind(this),this.global.window.addEventListener("resize",this.onWindowResize),this.environmentBlendMode="opaque"}onBaseLayerSet(e,s){throw new Error("Not implemented")}isSessionSupported(e){throw new Error("Not implemented")}isFeatureSupported(e){throw new Error("Not implemented")}async requestSession(e,s){throw new Error("Not implemented")}requestAnimationFrame(e){throw new Error("Not implemented")}onFrameStart(e){throw new Error("Not implemented")}onFrameEnd(e){throw new Error("Not implemented")}doesSessionSupportReferenceSpace(e,s){throw new Error("Not implemented")}requestStageBounds(){throw new Error("Not implemented")}async requestFrameOfReferenceTransform(e,s){}cancelAnimationFrame(e){throw new Error("Not implemented")}endSession(e){throw new Error("Not implemented")}getViewport(e,s,i,r){throw new Error("Not implemented")}getProjectionMatrix(e){throw new Error("Not implemented")}getBasePoseMatrix(){throw new Error("Not implemented")}getBaseViewMatrix(e){throw new Error("Not implemented")}getInputSources(){throw new Error("Not implemented")}getInputPose(e,s,i){throw new Error("Not implemented")}onWindowResize(){this.onWindowResize()}}let ds=0;class us{constructor(e,s){this.mode=e,this.enabledFeatures=s,this.ended=null,this.baseLayer=null,this.id=++ds}}class ps extends Ne{constructor(e){super(e);this.sessions=new Map,this.projectionMatrix=E(),this.identityMatrix=E()}onBaseLayerSet(e,s){const i=this.sessions.get(e);i.baseLayer=s}isSessionSupported(e){return e=="inline"}isFeatureSupported(e){switch(e){case"viewer":return!0;default:return!1}}async requestSession(e,s){if(!this.isSessionSupported(e))return Promise.reject();const i=new us(e,s);return this.sessions.set(i.id,i),Promise.resolve(i.id)}requestAnimationFrame(e){return window.requestAnimationFrame(e)}cancelAnimationFrame(e){window.cancelAnimationFrame(e)}onFrameStart(e,s){const i=this.sessions.get(e);if(i.baseLayer){const r=i.baseLayer.context.canvas;Q(this.projectionMatrix,s.inlineVerticalFieldOfView,r.width/r.height,s.depthNear,s.depthFar)}}onFrameEnd(e){}async endSession(e){const s=this.sessions.get(e);s.ended=!0}doesSessionSupportReferenceSpace(e,s){const i=this.sessions.get(e);return i.ended?!1:i.enabledFeatures.has(s)}requestStageBounds(){return null}async requestFrameOfReferenceTransform(e,s){return null}getProjectionMatrix(e){return this.projectionMatrix}getViewport(e,s,i,r){this.sessions.get(e);const{width:n,height:a}=i.context.canvas;return r.x=r.y=0,r.width=n,r.height=a,!0}getBasePoseMatrix(){return this.identityMatrix}getBaseViewMatrix(e){return this.identityMatrix}getInputSources(){return[]}getInputPose(e,s,i){return null}onWindowResize(){}}let fs={mapping:"",profiles:["google-daydream","generic-trigger-touchpad"],buttons:{length:3,0:null,1:null,2:0}},ms={mapping:"xr-standard",profiles:["htc-vive-focus","generic-trigger-touchpad"],buttons:{length:3,0:1,1:null,2:0}},vs={mapping:"xr-standard",profiles:["oculus-go","generic-trigger-touchpad"],buttons:{length:3,0:1,1:null,2:0},gripTransform:{orientation:[Math.PI*.11,0,0,1]}},pt={mapping:"xr-standard",displayProfiles:{"Oculus Quest":["oculus-touch-v2","oculus-touch","generic-trigger-squeeze-thumbstick"]},profiles:["oculus-touch","generic-trigger-squeeze-thumbstick"],axes:{length:4,0:null,1:null,2:0,3:1},buttons:{length:7,0:1,1:2,2:null,3:0,4:3,5:4,6:null},gripTransform:{position:[0,-.02,.04,1],orientation:[Math.PI*.11,0,0,1]}},gs={mapping:"xr-standard",profiles:["htc-vive","generic-trigger-squeeze-touchpad"],displayProfiles:{"HTC Vive":["htc-vive","generic-trigger-squeeze-touchpad"],"HTC Vive DVT":["htc-vive","generic-trigger-squeeze-touchpad"],"Valve Index":["valve-index","generic-trigger-squeeze-touchpad-thumbstick"]},buttons:{length:3,0:1,1:2,2:0},gripTransform:{position:[0,0,.05,1]},targetRayTransform:{orientation:[Math.PI*-.08,0,0,1]},userAgentOverrides:{Firefox:{axes:{invert:[1,3]}}}},ys={mapping:"xr-standard",profiles:["samsung-gearvr","generic-trigger-touchpad"],buttons:{length:3,0:1,1:null,2:0},gripTransform:{orientation:[Math.PI*.11,0,0,1]}},ws={mapping:"xr-standard",profiles:["samsung-odyssey","microsoft-mixed-reality","generic-trigger-squeeze-touchpad-thumbstick"],buttons:{length:4,0:1,1:0,2:2,3:4},gripTransform:{position:[0,-.02,.04,1],orientation:[Math.PI*.11,0,0,1]}},Xe={mapping:"xr-standard",profiles:["microsoft-mixed-reality","generic-trigger-squeeze-touchpad-thumbstick"],buttons:{length:4,0:1,1:0,2:2,3:4},gripTransform:{position:[0,-.02,.04,1],orientation:[Math.PI*.11,0,0,1]}},Ss={"Daydream Controller":fs,"Gear VR Controller":ys,"HTC Vive Focus Controller":ms,"Oculus Go Controller":vs,"Oculus Touch (Right)":pt,"Oculus Touch (Left)":pt,"OpenVR Gamepad":gs,"Spatial Controller (Spatial Interaction Source) 045E-065A":Xe,"Spatial Controller (Spatial Interaction Source) 045E-065D":ws,"Windows Mixed Reality (Right)":Xe,"Windows Mixed Reality (Left)":Xe};const ft=N(.155,-.465,-.15),xs=N(-.155,-.465,-.15),bs=N(0,0,-.25),Es=N(0,0,.05),mt=N(-.08,.14,.08),vt=.4,Rs=.4,_s=.61,Ps=.175,Ts=.12,Ms=.87,gt=180/Math.PI;function Is(t,e,s){function i(l,c,d){return l<c?c:l>d?d:l}var r=e[0]*e[0],n=e[1]*e[1],a=e[2]*e[2],o=e[3]*e[3];if(s==="XYZ")t[0]=Math.atan2(2*(e[0]*e[3]-e[1]*e[2]),o-r-n+a),t[1]=Math.asin(i(2*(e[0]*e[2]+e[1]*e[3]),-1,1)),t[2]=Math.atan2(2*(e[2]*e[3]-e[0]*e[1]),o+r-n-a);else if(s==="YXZ")t[0]=Math.asin(i(2*(e[0]*e[3]-e[1]*e[2]),-1,1)),t[1]=Math.atan2(2*(e[0]*e[2]+e[1]*e[3]),o-r-n+a),t[2]=Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),o-r+n-a);else if(s==="ZXY")t[0]=Math.asin(i(2*(e[0]*e[3]+e[1]*e[2]),-1,1)),t[1]=Math.atan2(2*(e[1]*e[3]-e[2]*e[0]),o-r-n+a),t[2]=Math.atan2(2*(e[2]*e[3]-e[0]*e[1]),o-r+n-a);else if(s==="ZYX")t[0]=Math.atan2(2*(e[0]*e[3]+e[2]*e[1]),o-r-n+a),t[1]=Math.asin(i(2*(e[1]*e[3]-e[0]*e[2]),-1,1)),t[2]=Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),o+r-n-a);else if(s==="YZX")t[0]=Math.atan2(2*(e[0]*e[3]-e[2]*e[1]),o-r+n-a),t[1]=Math.atan2(2*(e[1]*e[3]-e[0]*e[2]),o+r-n-a),t[2]=Math.asin(i(2*(e[0]*e[1]+e[2]*e[3]),-1,1));else if(s==="XZY")t[0]=Math.atan2(2*(e[0]*e[3]+e[1]*e[2]),o-r+n-a),t[1]=Math.atan2(2*(e[0]*e[2]+e[1]*e[3]),o+r-n-a),t[2]=Math.asin(i(2*(e[2]*e[3]-e[0]*e[1]),-1,1));else{console.log("No order given for quaternion to euler conversion.");return}}class Fs{constructor(){this.hand="right",this.headElbowOffset=ft,this.controllerQ=C(),this.lastControllerQ=C(),this.headQ=C(),this.headPos=I(),this.elbowPos=I(),this.wristPos=I(),this.time=null,this.lastTime=null,this.rootQ=C(),this.position=I()}setHandedness(e){this.hand!=e&&(this.hand=e,this.hand=="left"?this.headElbowOffset=xs:this.headElbowOffset=ft)}update(e,s){this.time=now(),e&&(Oe(this.lastControllerQ,this.controllerQ),Oe(this.controllerQ,e)),s&&(Ye(this.headPos,s),Ie(this.headQ,s));let i=this.getHeadYawOrientation_(),r=this.quatAngle_(this.lastControllerQ,this.controllerQ),n=(this.time-this.lastTime)/1e3;r/n>_s?ce(this.rootQ,this.rootQ,i,Math.min(r/Ps,1)):Oe(this.rootQ,i);let o=N(0,0,-1);$(o,o,this.controllerQ);let l=ye(o,[0,1,0]),c=this.clamp_((l-Ts)/Ms,0,1),d=rt(this.rootQ);it(d,d),st(d,d,this.controllerQ);let u=this.elbowPos;Fe(u,this.headPos),le(u,u,this.headElbowOffset);let p=Je(mt);Ke(p,p,c),le(u,u,p);let g=this.quatAngle_(d,C())*gt,y=1-Math.pow(g/180,4);sssss;let m=vt,R=1-vt,M=y*(m+R*c*Rs),w=C();ce(w,w,d,M);let x=it(C(),w),S=rt(d);st(S,S,x);let v=this.wristPos;Fe(v,Es),$(v,v,w),le(v,v,bs),$(v,v,S),le(v,v,u);let X=Je(mt);Ke(X,X,c),le(this.position,this.wristPos,X),$(this.position,this.position,this.rootQ),this.lastTime=this.time}getPosition(){return this.position}getHeadYawOrientation_(){let e=I();return Is(e,this.headQ,"YXZ"),ss(C(),0,e[1]*gt,0)}clamp_(e,s,i){return Math.min(Math.max(e,s),i)}quatAngle_(e,s){let i=[0,0,-1],r=[0,0,-1];return $(i,i,e),$(r,r,s),qt(i,r)}}const F=Symbol("@@webxr-polyfill/XRRemappedGamepad"),yt={pressed:!1,touched:!1,value:0};Object.freeze(yt);class As{constructor(e,s,i){if(i||(i={}),i.userAgentOverrides){for(let c in i.userAgentOverrides)if(navigator.userAgent.includes(c)){let d=i.userAgentOverrides[c];for(let u in d)u in i?Object.assign(i[u],d[u]):i[u]=d[u];break}}let r=new Array(i.axes&&i.axes.length?i.axes.length:e.axes.length),n=new Array(i.buttons&&i.buttons.length?i.buttons.length:e.buttons.length),a=null;if(i.gripTransform){let c=i.gripTransform.orientation||[0,0,0,1];a=E(),j(a,Se(c,c),i.gripTransform.position||[0,0,0])}let o=null;if(i.targetRayTransform){let c=i.targetRayTransform.orientation||[0,0,0,1];o=E(),j(o,Se(c,c),i.targetRayTransform.position||[0,0,0])}let l=i.profiles;i.displayProfiles&&s.displayName in i.displayProfiles&&(l=i.displayProfiles[s.displayName]),this[F]={gamepad:e,map:i,profiles:l||[e.id],mapping:i.mapping||e.mapping,axes:r,buttons:n,gripTransform:a,targetRayTransform:o},this._update()}_update(){let e=this[F].gamepad,s=this[F].map,i=this[F].axes;for(let n=0;n<i.length;++n)s.axes&&n in s.axes?s.axes[n]===null?i[n]=0:i[n]=e.axes[s.axes[n]]:i[n]=e.axes[n];if(s.axes&&s.axes.invert)for(let n of s.axes.invert)n<i.length&&(i[n]*=-1);let r=this[F].buttons;for(let n=0;n<r.length;++n)s.buttons&&n in s.buttons?s.buttons[n]===null?r[n]=yt:r[n]=e.buttons[s.buttons[n]]:r[n]=e.buttons[n]}get id(){return""}get _profiles(){return this[F].profiles}get index(){return-1}get connected(){return this[F].gamepad.connected}get timestamp(){return this[F].gamepad.timestamp}get mapping(){return this[F].mapping}get axes(){return this[F].axes}get buttons(){return this[F].buttons}get hapticActuators(){return this[F].gamepad.hapticActuators}}class wt{constructor(e,s,i=0,r=-1){this.polyfill=e,this.display=s,this.nativeGamepad=null,this.gamepad=null,this.inputSource=new ct(this),this.lastPosition=I(),this.emulatedPosition=!1,this.basePoseMatrix=E(),this.outputMatrix=E(),this.primaryButtonIndex=i,this.primaryActionPressed=!1,this.primarySqueezeButtonIndex=r,this.primarySqueezeActionPressed=!1,this.handedness="",this.targetRayMode="gaze",this.armModel=null}get profiles(){return this.gamepad?this.gamepad._profiles:[]}updateFromGamepad(e){this.nativeGamepad!==e&&(this.nativeGamepad=e,e?this.gamepad=new As(e,this.display,Ss[e.id]):this.gamepad=null),this.handedness=e.hand===""?"none":e.hand,this.gamepad&&this.gamepad._update(),e.pose?(this.targetRayMode="tracked-pointer",this.emulatedPosition=!e.pose.hasPosition):e.hand===""&&(this.targetRayMode="gaze",this.emulatedPosition=!1)}updateBasePoseMatrix(){if(this.nativeGamepad&&this.nativeGamepad.pose){let e=this.nativeGamepad.pose,s=e.position,i=e.orientation;if(!s&&!i)return;s?(this.lastPosition[0]=s[0],this.lastPosition[1]=s[1],this.lastPosition[2]=s[2]):e.hasPosition?s=this.lastPosition:(this.armModel||(this.armModel=new Fs),this.armModel.setHandedness(this.nativeGamepad.hand),this.armModel.update(i,this.polyfill.getBasePoseMatrix()),s=this.armModel.getPosition()),j(this.basePoseMatrix,i,s)}else ge(this.basePoseMatrix,this.polyfill.getBasePoseMatrix());return this.basePoseMatrix}getXRPose(e,s){switch(this.updateBasePoseMatrix(),s){case"target-ray":e._transformBasePoseMatrix(this.outputMatrix,this.basePoseMatrix),this.gamepad&&this.gamepad[F].targetRayTransform&&L(this.outputMatrix,this.outputMatrix,this.gamepad[F].targetRayTransform);break;case"grip":if(!this.nativeGamepad||!this.nativeGamepad.pose)return null;e._transformBasePoseMatrix(this.outputMatrix,this.basePoseMatrix),this.gamepad&&this.gamepad[F].gripTransform&&L(this.outputMatrix,this.outputMatrix,this.gamepad[F].gripTransform);break;default:return null}return e._adjustForOriginOffset(this.outputMatrix),new XRPose(new XRRigidTransform(this.outputMatrix),this.emulatedPosition)}}const Os=t=>!!(t.ImageBitmapRenderingContext&&t.createImageBitmap),Cs=t=>{t.style.display="block",t.style.position="absolute",t.style.width=t.style.height="1px",t.style.top=t.style.left="0px"},Ls=!1,St={highRefreshRate:!0},xt={oculus:1,openvr:1,"spatial controller (spatial interaction source)":1};let Ds=0;class Vs{constructor(e,s,i={}){if(this.mode=e,this.enabledFeatures=s,this.outputContext=null,this.immersive=e=="immersive-vr"||e=="immersive-ar",this.ended=null,this.baseLayer=null,this.id=++Ds,this.modifiedCanvasLayer=!1,this.outputContext&&!Ls){const r=i.renderContextType||"2d";this.renderContext=this.outputContext.canvas.getContext(r)}}}class zs extends Ne{constructor(e,s){const{canPresent:i}=s.capabilities;super(e);this.display=s,this.frame=new e.VRFrameData,this.sessions=new Map,this.immersiveSession=null,this.canPresent=i,this.baseModelMatrix=E(),this.gamepadInputSources={},this.tempVec3=new Float32Array(3),this.onVRDisplayPresentChange=this.onVRDisplayPresentChange.bind(this),e.window.addEventListener("vrdisplaypresentchange",this.onVRDisplayPresentChange),this.CAN_USE_GAMEPAD=e.navigator&&"getGamepads"in e.navigator,this.HAS_BITMAP_SUPPORT=Os(e)}get depthNear(){return this.display.depthNear}set depthNear(e){this.display.depthNear=e}get depthFar(){return this.display.depthFar}set depthFar(e){this.display.depthFar=e}onBaseLayerSet(e,s){const i=this.sessions.get(e),r=s.context.canvas;if(i.immersive){const n=this.display.getEyeParameters("left"),a=this.display.getEyeParameters("right");r.width=Math.max(n.renderWidth,a.renderWidth)*2,r.height=Math.max(n.renderHeight,a.renderHeight),this.display.requestPresent([{source:r,attributes:St}]).then(()=>{this.global.document.body.contains(r)||(i.modifiedCanvasLayer=!0,this.global.document.body.appendChild(r),Cs(r)),i.baseLayer=s})}else i.baseLayer=s}isSessionSupported(e){return!(e=="immersive-ar"||e=="immersive-vr"&&this.canPresent===!1)}isFeatureSupported(e){switch(e){case"viewer":return!0;case"local":return!0;case"local-floor":return!0;case"bounded":return!1;case"unbounded":return!1;default:return!1}}async requestSession(e,s){if(!this.isSessionSupported(e))return Promise.reject();let i=e=="immersive-vr";if(i){const n=this.global.document.createElement("canvas");n.getContext("webgl"),await this.display.requestPresent([{source:n,attributes:St}])}const r=new Vs(e,s,{renderContextType:this.HAS_BITMAP_SUPPORT?"bitmaprenderer":"2d"});return this.sessions.set(r.id,r),i&&(this.immersiveSession=r,this.dispatchEvent("@@webxr-polyfill/vr-present-start",r.id)),Promise.resolve(r.id)}requestAnimationFrame(e){return this.display.requestAnimationFrame(e)}getPrimaryButtonIndex(e){let s=0,i=e.id.toLowerCase();for(let r in xt)if(i.includes(r)){s=xt[r];break}return Math.min(s,e.buttons.length-1)}onFrameStart(e,s){this.display.depthNear=s.depthNear,this.display.depthFar=s.depthFar,this.display.getFrameData(this.frame);const i=this.sessions.get(e);if(i.immersive&&this.CAN_USE_GAMEPAD){let r=this.gamepadInputSources;this.gamepadInputSources={};let n=this.global.navigator.getGamepads();for(let a=0;a<n.length;++a){let o=n[a];if(o&&o.displayId>0){let l=r[a];if(l||(l=new wt(this,this.display,this.getPrimaryButtonIndex(o))),l.updateFromGamepad(o),this.gamepadInputSources[a]=l,l.primaryButtonIndex!=-1){let c=o.buttons[l.primaryButtonIndex].pressed;c&&!l.primaryActionPressed?this.dispatchEvent("@@webxr-polyfill/input-select-start",{sessionId:i.id,inputSource:l.inputSource}):!c&&l.primaryActionPressed&&this.dispatchEvent("@@webxr-polyfill/input-select-end",{sessionId:i.id,inputSource:l.inputSource}),l.primaryActionPressed=c}if(l.primarySqueezeButtonIndex!=-1){let c=o.buttons[l.primarySqueezeButtonIndex].pressed;c&&!l.primarySqueezeActionPressed?this.dispatchEvent("@@webxr-polyfill/input-squeeze-start",{sessionId:i.id,inputSource:l.inputSource}):!c&&l.primarySqueezeActionPressed&&this.dispatchEvent("@@webxr-polyfill/input-squeeze-end",{sessionId:i.id,inputSource:l.inputSource}),l.primarySqueezeActionPressed=c}}}}if(!i.immersive&&i.baseLayer){const r=i.baseLayer.context.canvas;Q(this.frame.leftProjectionMatrix,s.inlineVerticalFieldOfView,r.width/r.height,s.depthNear,s.depthFar)}}onFrameEnd(e){const s=this.sessions.get(e);if(!(s.ended||!s.baseLayer)){if(s.outputContext&&!(s.immersive&&!this.display.capabilities.hasExternalDisplay)){const i=s.immersive&&this.display.capabilities.hasExternalDisplay,r=s.baseLayer.context.canvas,n=i?r.width/2:r.width,a=r.height;{const o=s.outputContext.canvas,l=o.width,c=o.height,d=s.renderContext;this.HAS_BITMAP_SUPPORT?r.transferToImageBitmap?d.transferFromImageBitmap(r.transferToImageBitmap()):this.global.createImageBitmap(r,0,0,n,a,{resizeWidth:l,resizeHeight:c}).then(u=>d.transferFromImageBitmap(u)):d.drawImage(r,0,0,n,a,0,0,l,c)}}s.immersive&&s.baseLayer&&this.display.submitFrame()}}cancelAnimationFrame(e){this.display.cancelAnimationFrame(e)}async endSession(e){const s=this.sessions.get(e);if(!s.ended){if(s.immersive)return this.display.exitPresent();s.ended=!0}}doesSessionSupportReferenceSpace(e,s){const i=this.sessions.get(e);return i.ended?!1:i.enabledFeatures.has(s)}requestStageBounds(){if(this.display.stageParameters){const e=this.display.stageParameters.sizeX,s=this.display.stageParameters.sizeZ,i=[];return i.push(-e/2),i.push(-s/2),i.push(e/2),i.push(-s/2),i.push(e/2),i.push(s/2),i.push(-e/2),i.push(s/2),i}return null}async requestFrameOfReferenceTransform(e,s){return(e==="local-floor"||e==="bounded-floor")&&this.display.stageParameters&&this.display.stageParameters.sittingToStandingTransform?this.display.stageParameters.sittingToStandingTransform:null}getProjectionMatrix(e){if(e==="left")return this.frame.leftProjectionMatrix;if(e==="right")return this.frame.rightProjectionMatrix;if(e==="none")return this.frame.leftProjectionMatrix;throw new Error("eye must be of type 'left' or 'right'")}getViewport(e,s,i,r){const n=this.sessions.get(e),{width:a,height:o}=i.context.canvas;if(!n.immersive)return r.x=r.y=0,r.width=a,r.height=o,!0;if(s==="left"||s==="none")r.x=0;else if(s==="right")r.x=a/2;else return!1;return r.y=0,r.width=a/2,r.height=o,!0}getBasePoseMatrix(){let{position:e,orientation:s}=this.frame.pose;return!e&&!s?this.baseModelMatrix:(e||(e=this.tempVec3,e[0]=e[1]=e[2]=0),j(this.baseModelMatrix,s,e),this.baseModelMatrix)}getBaseViewMatrix(e){if(e==="left"||e==="none")return this.frame.leftViewMatrix;if(e==="right")return this.frame.rightViewMatrix;throw new Error("eye must be of type 'left' or 'right'")}getInputSources(){let e=[];for(let s in this.gamepadInputSources)e.push(this.gamepadInputSources[s].inputSource);return e}getInputPose(e,s,i){if(!s)return null;for(let r in this.gamepadInputSources){let n=this.gamepadInputSources[r];if(n.inputSource===e)return n.getXRPose(s,i)}return null}onWindowResize(){}onVRDisplayPresentChange(e){this.display.isPresenting||this.sessions.forEach(s=>{if(s.immersive&&!s.ended){if(s.modifiedCanvasLayer){const i=s.baseLayer.context.canvas;document.body.removeChild(i),i.setAttribute("style","")}this.immersiveSession===s&&(this.immersiveSession=null),this.dispatchEvent("@@webxr-polyfill/vr-present-end",s.id)}})}}const Ns=async function(t){let e=null;if("getVRDisplays"in t.navigator)try{const s=await t.navigator.getVRDisplays();s&&s.length&&(e=new zs(t,s[0]))}catch(s){}return e},Xs=async function(t,e){if(e.webvr){let s=await Ns(t);if(s)return s}return new ps(t)},Bs=typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{},Us={global:Bs,webvr:!0,cardboard:!0,cardboardConfig:null,allowCardboardOnDesktop:!1},Pe=["navigator","HTMLCanvasElement","WebGLRenderingContext"];class ks{constructor(e={}){this.config=Object.freeze(Object.assign({},Us,e)),this.global=this.config.global,this.nativeWebXR="xr"in this.global.navigator,this.injected=!1,this.nativeWebXR?this._injectCompatibilityShims(this.global):this._injectPolyfill(this.global)}_injectPolyfill(e){if(!Pe.every(s=>!!e[s]))throw new Error(`Global must have the following attributes : ${Pe}`);for(const s of Object.keys(fe))e[s]!==void 0?console.warn(`${s} already defined on global.`):e[s]=fe[s];dt(e.WebGLRenderingContext)&&(ut(e.HTMLCanvasElement),e.OffscreenCanvas&&ut(e.OffscreenCanvas),e.WebGL2RenderingContext&&dt(e.WebGL2RenderingContext),window.isSecureContext||console.warn(`WebXR Polyfill Warning:
This page is not running in a secure context (https:// or localhost)!
This means that although the page may be able to use the WebXR Polyfill it will
not be able to use native WebXR implementations, and as such will not be able to
access dedicated VR or AR hardware, and will not be able to take advantage of
any performance improvements a native WebXR implementation may offer. Please
host this content on a secure origin for the best user experience.
`)),this.injected=!0,this._patchNavigatorXR()}_patchNavigatorXR(){let e=Xs(this.global,this.config);console.log("patch xr nav"),this.xr=new fe.XRSystem(e),Object.defineProperty(this.global.navigator,"xr",{value:this.xr,configurable:!0})}_injectCompatibilityShims(e){if(!Pe.every(s=>!!e[s]))throw new Error(`Global must have the following attributes : ${Pe}`);if(e.navigator.xr&&"supportsSession"in e.navigator.xr&&!("isSessionSupported"in e.navigator.xr)){let s=e.navigator.xr.supportsSession;e.navigator.xr.isSessionSupported=function(i){return s.call(this,i).then(()=>!0).catch(()=>!1)},e.navigator.xr.supportsSession=function(i){return console.warn("navigator.xr.supportsSession() is deprecated. Please call navigator.xr.isSessionSupported() instead and check the boolean value returned when the promise resolves."),s.call(this,i)}}}}const D=Symbol("@@webxr-polyfill/XRRay");class bt{constructor(e,s){const i={x:0,y:0,z:0,w:1},r={x:0,y:0,z:-1,w:0};if(e&&e instanceof W){const o=e.matrix,l=et(Ae(),i.x,i.y,i.z,i.w),c=et(Ae(),r.x,r.y,r.z,r.w);tt(l,l,o),tt(c,c,o),i.x=l[0],i.y=l[1],i.z=l[2],i.w=l[3],_directionVec4.x=c[0],_directionVec4.y=c[1],_directionVec4.z=c[2],_directionVec4.w=c[3]}else e&&(i.x=e.x,i.y=e.y,i.z=e.z,i.w=e.w),s&&(r.x=s.x,r.y=s.y,r.z=s.z,r.w=s.w);const n=Math.sqrt(r.x*r.x+r.y*r.y+r.z*r.z)||1;r.x=r.x/n,r.y=r.y/n,r.z=r.z/n,this[D]={origin:new DOMPointReadOnly(i.x,i.y,i.z,i.w),direction:new DOMPointReadOnly(r.x,r.y,r.z,r.w),matrix:null}}get origin(){return this[D].origin}get direction(){return this[D].direction}get matrix(){if(this[D].matrix)return this[D].matrix;const e=G(I(),0,0,-1),s=G(I(),this[D].origin.x,this[D].origin.y,this[D].origin.z),i=G(I(),this[D].direction.x,this[D].direction.y,this[D].direction.z),r=we(I(),i,e),n=ye(i,e),a=E();n>-1&&n<1?Qe(a,Math.acos(n),r):n===-1&&Qe(a,Math.acos(n),G(I(),1,0,0));const o=Ht(E(),s),l=L(E(),o,a);return this[D].matrix=l,l}}const J=Symbol("@@webxr-polyfill/XRHitTestSource");class Et{constructor(e,s){if(s.entityTypes&&s.entityTypes.length>0)throw new Error("XRHitTestSource does not support entityTypes option yet.");this[J]={session:e,space:s.space,offsetRay:s.offsetRay||new bt,active:!0}}cancel(){this[J].active=!1}get _space(){return this[J].space}get _session(){return this[J].session}get _offsetRay(){return this[J].offsetRay}get _active(){return this[J].active}}const Be=Symbol("@@webxr-polyfill/XRHitTestResult");class Ue{constructor(e,s){this[Be]={frame:e,transform:s}}getPose(e){const s=new Y;return s._baseMatrix=ge(E(),this[Be].transform.matrix),this[Be].frame.getPose(s,e)}}const K=Symbol("@@webxr-polyfill/XRTransientInputHitTestSource");class ke{constructor(e,s){if(s.entityTypes&&s.entityTypes.length>0)throw new Error("XRHitTestSource does not support entityTypes option yet.");this[K]={session:e,profile:s.profile,offsetRay:s.offsetRay||new XRRay,active:!0}}cancel(){this[K].active=!1}get _profile(){return this[K].profile}get _session(){return this[K].session}get _offsetRay(){return this[K].offsetRay}get _active(){return this[K].active}}const He=Symbol("@@webxr-polyfill/XRTransientInputHitTestResult");class Rt{constructor(e,s,i){this[He]={frame:e,inputSource:i,results:s}}get inputSource(){return this[He].inputSource}get results(){return this[He].results}}var _t={XRHitTestResult:Ue,XRHitTestSource:Et,XRTransientInputHitTestResult:Rt,XRTransientInputHitTestSource:ke,XRRay:bt};const Pt=["inline"],Tt=[0,1.6,0],Mt="9999",Hs="10001",It={width:1024,height:2048},Ft={width:.05,height:.1,depth:.005},me=(t,e)=>{V.instance.dispatchEvent({type:t,detail:typeof cloneInto!="undefined"?cloneInto(e,window):e})};class js extends Ne{constructor(e,s={}){super(e);this.sessions=new Map,this.modes=s.modes||Pt,this.features=s.features||[],this.position=Fe(I(),Tt),this.quaternion=C(),this.scale=N(1,1,1),this.matrix=E(),this.projectionMatrix=E(),this.leftProjectionMatrix=E(),this.rightProjectionMatrix=E(),this.viewMatrix=E(),this.leftViewMatrix=E(),this.rightViewMatrix=E(),this.gamepads=[],this.gamepadInputSources=[],this.stereoEffectEnabled=s.stereoEffect!==void 0?s.stereoEffect:!0,this.div=document.createElement("div"),this.div.style.position="absolute",this.div.style.width="100%",this.div.style.height="100%",this.div.style.top="0",this.div.style.left="0",this.div.style.zIndex=Mt,this.originalCanvasParams={parentElement:null,width:0,height:0},this.domOverlayRoot=null,this.arDevice=this.modes.includes("immersive-ar"),this.resolution=s.resolution!==void 0?s.resolution:It,this.deviceSize=s.size!==void 0?s.size:Ft,this.arScene=null,this.touched=!1,this.isPointerAndTabledCloseEnough=!1,this.hitTestSources=[],this.hitTestResults=new Map,this.hitTestSourcesForTransientInput=[],this.hitTestResultsForTransientInput=new Map,this._initializeControllers(s),this._setupEventListeners()}onBaseLayerSet(e,s){const i=this.sessions.get(e);if(i.immersive&&i.baseLayer&&this._removeBaseLayerCanvasFromDiv(e),i.baseLayer=s,i.immersive&&i.baseLayer&&(this._appendBaseLayerCanvasToDiv(e),i.ar)){const r=i.baseLayer.context.canvas;r.width=this.resolution.width,r.height=this.resolution.height,this.arScene.setCanvas(r),r.parentElement&&r.parentElement.removeChild(r)}}isSessionSupported(e){return this.modes.includes(e)}isFeatureSupported(e){if(this.features.includes(e))return!0;switch(e){case"viewer":return!0;case"local":return!0;case"local-floor":return!0;case"bounded-floor":return!1;case"unbounded":return!1;case"dom-overlay":return!0;default:return!1}}async requestSession(e,s){if(!this.isSessionSupported(e))return Promise.reject();const i=e==="immersive-vr"||e==="immersive-ar",r=new $s(e,s);return this.sessions.set(r.id,r),e==="immersive-ar"&&this.arScene.inject(this.div),i&&(this.dispatchEvent("@@webxr-polyfill/vr-present-start",r.id),this._notifyEnterImmersive()),Promise.resolve(r.id)}requestAnimationFrame(e){return this.global.requestAnimationFrame(e)}cancelAnimationFrame(e){this.global.cancelAnimationFrame(e)}onFrameStart(e,s){const i=this.sessions.get(e),r=i.baseLayer.context,n=r.canvas,a=s.depthNear,o=s.depthFar,l=n.width,c=n.height;if(i.immersive){const d=r.getParameter(r.COLOR_CLEAR_VALUE),u=r.getParameter(r.DEPTH_CLEAR_VALUE),p=r.getParameter(r.STENCIL_CLEAR_VALUE);r.clearColor(0,0,0,0),r.clearDepth(1,0),r.clearStencil(0),r.clear(r.DEPTH_BUFFER_BIT|r.COLOR_BUFFER_BIT|r.STENCIL_BUFFER_BIT),r.clearColor(d[0],d[1],d[2],d[3]),r.clearDepth(u),r.clearStencil(p)}if(i.vr){const d=l*(this.stereoEffectEnabled?.5:1)/c;Q(this.leftProjectionMatrix,Math.PI/2,d,a,o),Q(this.rightProjectionMatrix,Math.PI/2,d,a,o)}else if(i.ar){const d=this.deviceSize.width/this.deviceSize.height;Q(this.projectionMatrix,Math.PI/2,d,a,o)}else{const d=l/c;Q(this.projectionMatrix,s.inlineVerticalFieldOfView,d,a,o)}if(i.ar?Ze(this.matrix,this.gamepads[1].pose.orientation,this.gamepads[1].pose.position,this.scale):Ze(this.matrix,this.quaternion,this.position,this.scale),z(this.viewMatrix,this.matrix),z(this.leftViewMatrix,Ot(ge(this.leftViewMatrix,this.matrix),-.02)),z(this.rightViewMatrix,Ot(ge(this.rightViewMatrix,this.matrix),.02)),i.immersive){if(this.arDevice)if(this.touched&&this._isPointerCloseEnoughToTablet()){this.isPointerAndTabledCloseEnough||(this._updateInputButtonPressed(!0,0,0),this.isPointerAndTabledCloseEnough=!0,this.arScene.touched());const d=this._getTouchCoordinates();this._updateInputAxes(0,d[0],-d[1])}else this.isPointerAndTabledCloseEnough&&(this._updateInputButtonPressed(!1,0,0),this.isPointerAndTabledCloseEnough=!1,this.arScene.released()),this._updateInputAxes(0,0,0);for(let d=0;d<this.gamepads.length;++d){const u=this.gamepads[d],p=this.gamepadInputSources[d];if(p.updateFromGamepad(u),this.arDevice&&d===0&&(p.targetRayMode="screen"),p.primaryButtonIndex!==-1){const f=u.buttons[p.primaryButtonIndex].pressed;f&&!p.primaryActionPressed?this.arDevice?p.active=!0:this.dispatchEvent("@@webxr-polyfill/input-select-start",{sessionId:i.id,inputSource:p.inputSource}):!f&&p.primaryActionPressed&&(this.arDevice&&(p.active=!1),this.dispatchEvent("@@webxr-polyfill/input-select-end",{sessionId:i.id,inputSource:p.inputSource}))}if(p.primarySqueezeButtonIndex!==-1){const f=u.buttons[p.primarySqueezeButtonIndex].pressed;f&&!p.primarySqueezeActionPressed?this.dispatchEvent("@@webxr-polyfill/input-squeeze-start",{sessionId:i.id,inputSource:p.inputSource}):!f&&p.primarySqueezeActionPressed&&this.dispatchEvent("@@webxr-polyfill/input-squeeze-end",{sessionId:i.id,inputSource:p.inputSource}),p.primarySqueezeActionPressed=f}}this._hitTest(e,this.hitTestSources,this.hitTestResults),this._hitTest(e,this.hitTestSourcesForTransientInput,this.hitTestResultsForTransientInput)}}onFrameEnd(e){const s=this.sessions.get(e);if(s.immersive)for(let i=0;i<this.gamepads.length;++i){const r=this.gamepads[i],n=this.gamepadInputSources[i];if(n.primaryButtonIndex!==-1){const a=r.buttons[n.primaryButtonIndex].pressed;a&&!n.primaryActionPressed&&this.arDevice&&this.dispatchEvent("@@webxr-polyfill/input-select-start",{sessionId:s.id,inputSource:n.inputSource}),n.primaryActionPressed=a}}}async requestFrameOfReferenceTransform(e,s){const i=E();switch(e){case"viewer":case"local":return i[13]=-Tt[1],i;case"local-floor":return i;case"bounded-floor":case"unbound":default:return i}}endSession(e){const s=this.sessions.get(e);s.immersive&&s.baseLayer&&(this._removeBaseLayerCanvasFromDiv(e),this.domOverlayRoot=null,s.ar&&(this.arScene.eject(),this.arScene.releaseCanvas()),this.dispatchEvent("@@webxr-polyfill/vr-present-end",e),this._notifyLeaveImmersive()),s.ended=!0}doesSessionSupportReferenceSpace(e,s){const i=this.sessions.get(e);return i.ended?!1:i.enabledFeatures.has(s)}getViewport(e,s,i,r){const n=this.sessions.get(e),a=n.baseLayer.context.canvas,o=a.width,l=a.height;return n.ar?(r.x=0,r.y=0,r.width=o,r.height=l):(s==="none"?(r.x=0,r.width=o):this.stereoEffectEnabled?(r.x=s==="left"?0:o/2,r.width=o/2):(r.x=0,r.width=s==="left"?o:0),r.y=0,r.height=l),!0}getProjectionMatrix(e){return this.arDevice||e==="none"?this.projectionMatrix:e==="left"?this.leftProjectionMatrix:this.rightProjectionMatrix}getBasePoseMatrix(){return this.matrix}getBaseViewMatrix(e){return e==="none"||this.arDevice||!this.stereoEffectEnabled?this.viewMatrix:e==="left"?this.leftViewMatrix:this.rightViewMatrix}getInputSources(){const e=[];for(const s of this.gamepadInputSources)s.active&&e.push(s.inputSource);return e}getInputPose(e,s,i){for(const r of this.gamepadInputSources)if(r.inputSource===e){const n=r.getXRPose(s,i);if(this.arDevice&&r===this.gamepadInputSources[0]){if(!r.active)return null;const a=z(E(),this.viewMatrix);s._transformBasePoseMatrix(a,a);const o=z(E(),a);L(n.transform.matrix,o,n.transform.matrix);const l=B(E()),c=.1,d=this.deviceSize.width/this.deviceSize.height,u=.005,p=n.transform.matrix[12]/((this.deviceSize.width-u)*.5)*d,f=n.transform.matrix[13]/((this.deviceSize.height-u)*.5);kt(l,l,-p*Math.PI/4),Ut(l,l,f*Math.PI/4),l[12]=p*c,l[13]=f*c,l[14]=-c,L(n.transform.matrix,a,l),z(n.transform.inverse.matrix,n.transform.matrix)}return n}return null}onWindowResize(){}setDomOverlayRoot(e){this.domOverlayRoot=e}addHitTestSource(e){this.hitTestSources.push(e)}getHitTestResults(e){return this.hitTestResults.get(e)||[]}addHitTestSourceForTransientInput(e){this.hitTestSourcesForTransientInput.push(e)}getHitTestResultsForTransientInput(e){return this.hitTestResultsForTransientInput.get(e)||[]}_appendBaseLayerCanvasToDiv(e){const i=this.sessions.get(e).baseLayer.context.canvas;if(this.originalCanvasParams.width=i.width,this.originalCanvasParams.height=i.height,document.body.appendChild(this.div),i instanceof HTMLCanvasElement&&(this.originalCanvasParams.parentElement=i.parentElement,i.width=window.innerWidth,i.height=window.innerHeight,this.div.appendChild(i),this.domOverlayRoot)){const r=this.domOverlayRoot;r.style._zIndex=r.style.zIndex,this.domOverlayRoot.contains(this.div)?this.div.style.zIndex="":r.style.zIndex=Hs}}_removeBaseLayerCanvasFromDiv(e){const i=this.sessions.get(e).baseLayer.context.canvas;if(i.width=this.originalCanvasParams.width,i.height=this.originalCanvasParams.height,this.div.parentElement===document.body&&document.body.removeChild(this.div),i.parentElement===this.div&&this.div.removeChild(i),i instanceof HTMLCanvasElement&&(this.originalCanvasParams.parentElement&&this.originalCanvasParams.parentElement.appendChild(i),this.originalCanvasParams.parentElement=null,this.domOverlayRoot)){const r=this.domOverlayRoot;r.style.zIndex=r.style._zIndex,delete r.style._zIndex,this.div.style.zIndex=Mt}}_isPointerCloseEnoughToTablet(){const e=this.gamepads[0].pose,s=j(E(),e.orientation,e.position);L(s,this.viewMatrix,s);const i=s[12]/(this.deviceSize.width*.5),r=s[13]/(this.deviceSize.height*.5),n=s[14];return i<=1&&i>=-1&&r<=1&&r>=-1&&n<=.01&&n>=0}_getTouchCoordinates(){const e=this.gamepads[0].pose,s=j(E(),e.orientation,e.position);L(s,this.viewMatrix,s);const i=s[12]/(this.deviceSize.width*.5),r=s[13]/(this.deviceSize.height*.5);return[i,r]}_hitTest(e,s,i){let r=0;for(let n=0;n<s.length;n++){const a=s[n];a._active&&(s[r++]=a)}s.length=r,i.clear();for(const n of s){if(e!==n._session[h].id)continue;let a;if(n instanceof ke){if(!this.gamepadInputSources[0].active||!n._profile.includes("touch"))continue;const p=this.gamepads[0],f=B(E());f[12]=p.axes[0],f[13]=-p.axes[1],a=L(f,this.matrix,f)}else if(a=n._space._baseMatrix,!a)continue;const o=n._offsetRay,l=G(I(),o.origin.x,o.origin.y,o.origin.z),c=G(I(),o.direction.x,o.direction.y,o.direction.z);Wt(l,l,a),$(c,c,Ie(C(),a));const d=this.arScene.getHitTestResults(l,c),u=[];for(const p of d){const f=E();f[12]=p.point.x,f[13]=p.point.y,f[14]=p.point.z,u.push(f)}i.set(n,u)}}_notifyPoseUpdate(){me("device-pose",{position:this.position,quaternion:this.quaternion})}_notifyInputPoseUpdate(e){const s=this.gamepads[e].pose,i=e===0?"rightController":"leftController";me("device-input-pose",{position:s.position,quaternion:s.orientation,objectName:i})}_notifyEnterImmersive(){me("device-enter-immersive",{})}_notifyLeaveImmersive(){me("device-leave-immersive",{})}_requestVirtualRoomAsset(){me("webxr-virtual-room-request",{})}_updateStereoEffect(e){this.stereoEffectEnabled=e}_updatePose(e,s){for(let i=0;i<3;i++)this.position[i]=e[i];for(let i=0;i<4;i++)this.quaternion[i]=s[i]}_updateInputPose(e,s,i){if(i>=this.gamepads.length)return;const n=this.gamepads[i].pose;for(let a=0;a<3;a++)n.position[a]=e[a];for(let a=0;a<4;a++)n.orientation[a]=s[a]}_updateInputButtonPressed(e,s,i){if(s>=this.gamepads.length)return;const r=this.gamepads[s];i>=r.buttons.length||(r.buttons[i].pressed=e,r.buttons[i].value=e?1:0)}_updateInputAxesChanged(e,s,i){if(s>=this.gamepads.length)return;const r=this.gamepads[s];i>=r.axes.length||(r.axes[i]=e)}_updateInputAxes(e,s,i){if(e>=this.gamepads.length)return;const r=this.gamepads[e];r.axes[0]=s,r.axes[1]=i}_initializeControllers(e){const i=e.controllers!==void 0?e.controllers.length:0;this.gamepads.length=0,this.gamepadInputSources.length=0;for(let r=0;r<i;r++){const n=e.controllers[r],a=n.id||"",o=n.hasPosition||!1,l=n.buttonNum||0,c=n.primaryButtonIndex!==void 0?n.primaryButtonIndex:0,d=n.primarySqueezeButtonIndex!==void 0?n.primarySqueezeButtonIndex:-1;this.gamepads.push(Ws(a,r===0?"right":"left",l,o));const u=new wt(this,{},c,d);u.active=!this.arDevice,this.gamepadInputSources.push(u)}}_setupEventListeners(){V.instance.addEventListener("webxr-device",e=>{const s=e.detail.deviceDefinition;this.modes=s.modes||Pt,this.features=s.features||[],this.arDevice=this.modes.includes("immersive-ar"),this.resolution=s.resolution!==void 0?s.resolution:It,this.deviceSize=s.size!==void 0?s.size:Ft;for(let i=0;i<this.gamepads.length;++i){const r=this.gamepads[i],n=this.gamepadInputSources[i];n.active=!this.arDevice,n.primaryButtonIndex!==-1&&(r.buttons[n.primaryButtonIndex].pressed=!1),n.primarySqueezeButtonIndex!==-1&&(r.buttons[n.primarySqueezeButtonIndex].pressed=!1)}this.requestAnimationFrame(()=>{this.requestAnimationFrame(()=>{this._initializeControllers(s)})})}),V.instance.addEventListener("webxr-pose",e=>{const s=e.detail.position,i=e.detail.quaternion;this.arDevice?this.arScene&&(this._updatePose(s,i),this.arScene.updateCameraTransform(s,i)):this._updatePose(s,i)},!1),V.instance.addEventListener("webxr-input-pose",e=>{const s=e.detail.position,i=e.detail.quaternion,r=e.detail.objectName;if(this.arDevice)switch(r){case"rightController":this._updateInputPose(s,i,0),this.arScene&&this.arScene.updatePointerTransform(s,i);break;case"leftController":this._updateInputPose(s,i,1),this.arScene&&this.arScene.updateTabletTransform(s,i);break}else switch(r){case"rightController":case"leftController":this._updateInputPose(s,i,r==="rightController"?0:1);break}}),V.instance.addEventListener("webxr-input-button",e=>{if(this.arDevice)return;const s=e.detail.pressed,i=e.detail.objectName,r=e.detail.buttonIndex;switch(i){case"rightController":case"leftController":this._updateInputButtonPressed(s,i==="rightController"?0:1,r);break}},!1),V.instance.addEventListener("webxr-input-axes",e=>{if(this.arDevice)return;const s=e.detail.value,i=e.detail.objectName,r=e.detail.axesIndex;switch(i){case"rightController":case"leftController":this._updateInputAxesChanged(s,i==="rightController"?0:1,r);break}},!1),V.instance.addEventListener("webxr-stereo-effect",e=>{this._updateStereoEffect(e.detail.enabled)}),V.instance.addEventListener("webxr-virtual-room-response",e=>{const s=e.detail.buffer;this.arScene.loadVirtualRoomAsset(s)})}}let Gs=0;class $s{constructor(e,s){this.mode=e,this.immersive=e=="immersive-vr"||e=="immersive-ar",this.vr=e==="immersive-vr",this.ar=e==="immersive-ar",this.id=++Gs,this.baseLayer=null,this.inlineVerticalFieldOfView=Math.PI*.5,this.ended=!1,this.enabledFeatures=s}}const Ws=(t,e,s,i)=>{const r=[];for(let n=0;n<s;n++)r.push({pressed:!1,touched:!1,value:0});return{id:t||"",pose:{hasPosition:i,position:[0,0,0],orientation:[0,0,0,1]},buttons:r,hand:e,mapping:"xr-standard",axes:[0,0]}},At=I(),Ot=(t,e)=>(G(At,e,0,0),Bt(t,t,At));class ei extends ks{constructor(){super({global:globalThis});this.global=this.global;let e=null;const s=ve.prototype.requestSession;ve.prototype.requestSession=function(r,n={}){return s.call(this,r,n).then(a=>{if(r==="immersive-vr"||r==="immersive-ar"){e=a;const o=n.optionalFeatures,l=n.domOverlay;o&&o.includes("dom-overlay")&&l&&l.root&&(a[h].device.setDomOverlayRoot(l.root),a.domOverlayState={type:"screen"})}return a})};const i=Z.prototype.end;if(Z.prototype.end=function(){return i.call(this).then(()=>{e===this&&(e=null)})},V.instance.addEventListener("webxr-exit-immersive",r=>{e&&!e.ended&&e.end().then(()=>{e=null})}),Z.prototype.requestHitTestSource=function(r){const n=new Et(this,r);return this[h].device.addHitTestSource(n),Promise.resolve(n)},Z.prototype.requestHitTestSourceForTransientInput=function(r){const n=new ke(this,r);return this[h].device.addHitTestSourceForTransientInput(n),Promise.resolve(n)},he.prototype.getHitTestResults=function(r){const a=this.session[h].device.getHitTestResults(r),o=[];for(const l of a)o.push(new Ue(this,new W(l)));return o},he.prototype.getHitTestResultsForTransientInput=function(r){const n=this.session[h].device,a=n.getHitTestResultsForTransientInput(r);if(a.length===0)return[];const o=[];for(const c of a)o.push(new Ue(this,new W(c)));const l=n.getInputSources()[0];return[new Rt(this,o,l)]},this.nativeWebXR)Ct(),this.injected=!0,this._patchNavigatorXR();else{Lt();let r=!1;const n=()=>r?!1:Qs(this.global.XRSystem)?(Ct(),r=!0,!0):!1,a=new MutationObserver(l=>{for(const c of l){for(const d of c.addedNodes)if(d.localName==="script"&&n()){a.disconnect();break}if(r)break}});a.observe(document,{subtree:!0,childList:!0});const o=l=>{r||(a.disconnect(),n()),document.removeEventListener("DOMContentLoaded",o)};document.addEventListener("DOMContentLoaded",o)}}_patchNavigatorXR(){const e=qs();this.xr=new ve(e),Object.defineProperty(this.global.navigator,"xr",{value:this.xr,configurable:!0})}}const qs=async()=>new Promise((t,e)=>{const s=i=>{V.instance.removeEventListener("webxr-device-init",s),t(new js(globalThis,Object.assign({},i.detail.deviceDefinition,{stereoEffect:i.detail.stereoEffect})))};V.instance.addEventListener("webxr-device-init",s,!1)}),Qs=t=>/\[native code\]/i.test(t.toString()),Ct=()=>{console.log("WebXR emulator extension overrides native WebXR API with polyfill.");for(const t in fe)globalThis[t]=fe[t];Lt(),typeof WebGLRenderingContext!="undefined"&&Dt(WebGLRenderingContext),typeof WebGL2RenderingContext!="undefined"&&Dt(WebGL2RenderingContext)},Lt=()=>{for(const t in _t)globalThis[t]=_t[t]},Dt=t=>{t.prototype.makeXRCompatible=function(){return this[_e]=!0,Promise.resolve()}};export{ei as XREngineWebXRPolyfill};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ3VzdG9tV2ViWFJQb2x5ZmlsbC5jMTA4N2FkOS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vZW5naW5lL3NyYy9ib3Qvd2VieHItZW11bGF0b3Ivd2VieHItcG9seWZpbGwvRXZlbnRUYXJnZXQuanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2JvdC93ZWJ4ci1lbXVsYXRvci93ZWJ4ci1wb2x5ZmlsbC9hcGkvWFJTeXN0ZW0uanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2JvdC93ZWJ4ci1lbXVsYXRvci93ZWJ4ci1wb2x5ZmlsbC9hcGkvWFJQb3NlLmpzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9ib3Qvd2VieHItZW11bGF0b3Ivd2VieHItcG9seWZpbGwvYXBpL1hSVmlld2VyUG9zZS5qcyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYm90L3dlYnhyLWVtdWxhdG9yL3dlYnhyLXBvbHlmaWxsL2FwaS9YUlZpZXdwb3J0LmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2dsLW1hdHJpeC9lc20vY29tbW9uLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2dsLW1hdHJpeC9lc20vbWF0My5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9nbC1tYXRyaXgvZXNtL21hdDQuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZ2wtbWF0cml4L2VzbS92ZWMzLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2dsLW1hdHJpeC9lc20vdmVjNC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9nbC1tYXRyaXgvZXNtL3F1YXQuanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2JvdC93ZWJ4ci1lbXVsYXRvci93ZWJ4ci1wb2x5ZmlsbC9hcGkvWFJSaWdpZFRyYW5zZm9ybS5qcyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYm90L3dlYnhyLWVtdWxhdG9yL3dlYnhyLXBvbHlmaWxsL2FwaS9YUlZpZXcuanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2JvdC93ZWJ4ci1lbXVsYXRvci93ZWJ4ci1wb2x5ZmlsbC9hcGkvWFJGcmFtZS5qcyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYm90L3dlYnhyLWVtdWxhdG9yL3dlYnhyLXBvbHlmaWxsL2FwaS9YUlNwYWNlLmpzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9ib3Qvd2VieHItZW11bGF0b3Ivd2VieHItcG9seWZpbGwvYXBpL1hSUmVmZXJlbmNlU3BhY2UuanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2JvdC93ZWJ4ci1lbXVsYXRvci93ZWJ4ci1wb2x5ZmlsbC9hcGkvWFJSZW5kZXJTdGF0ZS5qcyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYm90L3dlYnhyLWVtdWxhdG9yL3dlYnhyLXBvbHlmaWxsL2FwaS9YUklucHV0U291cmNlRXZlbnQuanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2JvdC93ZWJ4ci1lbXVsYXRvci93ZWJ4ci1wb2x5ZmlsbC9hcGkvWFJTZXNzaW9uRXZlbnQuanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2JvdC93ZWJ4ci1lbXVsYXRvci93ZWJ4ci1wb2x5ZmlsbC9hcGkvWFJJbnB1dFNvdXJjZXNDaGFuZ2VFdmVudC5qcyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYm90L3dlYnhyLWVtdWxhdG9yL3dlYnhyLXBvbHlmaWxsL2FwaS9YUlNlc3Npb24uanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2JvdC93ZWJ4ci1lbXVsYXRvci93ZWJ4ci1wb2x5ZmlsbC9hcGkvWFJJbnB1dFNvdXJjZS5qcyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYm90L3dlYnhyLWVtdWxhdG9yL3dlYnhyLXBvbHlmaWxsL2NvbnN0YW50cy5qcyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYm90L3dlYnhyLWVtdWxhdG9yL3dlYnhyLXBvbHlmaWxsL2FwaS9YUldlYkdMTGF5ZXIuanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2JvdC93ZWJ4ci1lbXVsYXRvci93ZWJ4ci1wb2x5ZmlsbC9hcGkvWFJSZWZlcmVuY2VTcGFjZUV2ZW50LmpzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9ib3Qvd2VieHItZW11bGF0b3Ivd2VieHItcG9seWZpbGwvYXBpL2luZGV4LmpzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9ib3Qvd2VieHItZW11bGF0b3Ivd2VieHItcG9seWZpbGwvcG9seWZpbGwtZ2xvYmFscy5qcyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYm90L3dlYnhyLWVtdWxhdG9yL3dlYnhyLXBvbHlmaWxsL2RldmljZXMvWFJEZXZpY2UuanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2JvdC93ZWJ4ci1lbXVsYXRvci93ZWJ4ci1wb2x5ZmlsbC9kZXZpY2VzL0lubGluZURldmljZS5qcyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYm90L3dlYnhyLWVtdWxhdG9yL3dlYnhyLXBvbHlmaWxsL2RldmljZXMvR2FtZXBhZE1hcHBpbmdzLmpzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9ib3Qvd2VieHItZW11bGF0b3Ivd2VieHItcG9seWZpbGwvZGV2aWNlcy9PcmllbnRhdGlvbkFybU1vZGVsLmpzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9ib3Qvd2VieHItZW11bGF0b3Ivd2VieHItcG9seWZpbGwvZGV2aWNlcy9HYW1lcGFkWFJJbnB1dFNvdXJjZS5qcyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYm90L3dlYnhyLWVtdWxhdG9yL3dlYnhyLXBvbHlmaWxsL3V0aWxzLmpzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9ib3Qvd2VieHItZW11bGF0b3Ivd2VieHItcG9seWZpbGwvZGV2aWNlcy9XZWJWUkRldmljZS5qcyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYm90L3dlYnhyLWVtdWxhdG9yL3dlYnhyLXBvbHlmaWxsL2RldmljZXMuanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2JvdC93ZWJ4ci1lbXVsYXRvci93ZWJ4ci1wb2x5ZmlsbC9XZWJYUlBvbHlmaWxsLmpzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9ib3Qvd2VieHItZW11bGF0b3IvYXBpL1hSUmF5LmpzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9ib3Qvd2VieHItZW11bGF0b3IvYXBpL1hSSGl0VGVzdFNvdXJjZS5qcyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYm90L3dlYnhyLWVtdWxhdG9yL2FwaS9YUkhpdFRlc3RSZXN1bHQuanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2JvdC93ZWJ4ci1lbXVsYXRvci9hcGkvWFJUcmFuc2llbnRJbnB1dEhpdFRlc3RTb3VyY2UuanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2JvdC93ZWJ4ci1lbXVsYXRvci9hcGkvWFJUcmFuc2llbnRJbnB1dEhpdFRlc3RSZXN1bHQuanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2JvdC93ZWJ4ci1lbXVsYXRvci9hcGkvaW5kZXguanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2JvdC93ZWJ4ci1lbXVsYXRvci9FbXVsYXRlZFhSRGV2aWNlLmpzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9ib3Qvd2VieHItZW11bGF0b3IvQ3VzdG9tV2ViWFJQb2x5ZmlsbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5jb25zdCBQUklWQVRFID0gU3ltYm9sKCdAQHdlYnhyLXBvbHlmaWxsL0V2ZW50VGFyZ2V0Jyk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV2ZW50VGFyZ2V0IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpc1tQUklWQVRFXSA9IHtcbiAgICAgIGxpc3RlbmVyczogbmV3IE1hcCgpLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXJcbiAgICovXG4gIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAodHlwZW9mIHR5cGUgIT09ICdzdHJpbmcnKSB7IHRocm93IG5ldyBFcnJvcignYHR5cGVgIG11c3QgYmUgYSBzdHJpbmcnKTsgfVxuICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHsgdGhyb3cgbmV3IEVycm9yKCdgbGlzdGVuZXJgIG11c3QgYmUgYSBmdW5jdGlvbicpOyB9XG5cbiAgICBjb25zdCB0eXBlZExpc3RlbmVycyA9IHRoaXNbUFJJVkFURV0ubGlzdGVuZXJzLmdldCh0eXBlKSB8fCBbXTtcbiAgICB0eXBlZExpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICB0aGlzW1BSSVZBVEVdLmxpc3RlbmVycy5zZXQodHlwZSwgdHlwZWRMaXN0ZW5lcnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyXG4gICAqL1xuICByZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgaWYgKHR5cGVvZiB0eXBlICE9PSAnc3RyaW5nJykgeyB0aHJvdyBuZXcgRXJyb3IoJ2B0eXBlYCBtdXN0IGJlIGEgc3RyaW5nJyk7IH1cbiAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7IHRocm93IG5ldyBFcnJvcignYGxpc3RlbmVyYCBtdXN0IGJlIGEgZnVuY3Rpb24nKTsgfVxuXG4gICAgY29uc3QgdHlwZWRMaXN0ZW5lcnMgPSB0aGlzW1BSSVZBVEVdLmxpc3RlbmVycy5nZXQodHlwZSkgfHwgW107XG5cbiAgICBmb3IgKGxldCBpID0gdHlwZWRMaXN0ZW5lcnMubGVuZ3RoOyBpID49IDA7IGktLSkge1xuICAgICAgaWYgKHR5cGVkTGlzdGVuZXJzW2ldID09PSBsaXN0ZW5lcikge1xuICAgICAgICB0eXBlZExpc3RlbmVycy5wb3AoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50XG4gICAqL1xuICBkaXNwYXRjaEV2ZW50KHR5cGUsIGV2ZW50KSB7XG4gICAgY29uc3QgdHlwZWRMaXN0ZW5lcnMgPSB0aGlzW1BSSVZBVEVdLmxpc3RlbmVycy5nZXQodHlwZSkgfHwgW107XG5cbiAgICAvLyBDb3B5IG92ZXIgYWxsIHRoZSBsaXN0ZW5lcnMgYmVjYXVzZSBhIGNhbGxiYWNrIGNvdWxkIHJlbW92ZVxuICAgIC8vIGFuIGV2ZW50IGxpc3RlbmVyLCBwcmV2ZW50aW5nIGFsbCBsaXN0ZW5lcnMgZnJvbSBmaXJpbmcgd2hlblxuICAgIC8vIHRoZSBldmVudCB3YXMgZmlyc3QgZGlzcGF0Y2hlZC5cbiAgICBjb25zdCBxdWV1ZSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHlwZWRMaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHF1ZXVlW2ldID0gdHlwZWRMaXN0ZW5lcnNbaV07XG4gICAgfVxuXG4gICAgZm9yIChsZXQgbGlzdGVuZXIgb2YgcXVldWUpIHtcbiAgICAgIGxpc3RlbmVyKGV2ZW50KTtcbiAgICB9XG5cbiAgICAvLyBBbHNvIGZpcmUgaWYgdGhpcyBFdmVudFRhcmdldCBoYXMgYW4gYG9uJHtFVkVOVF9UWVBFfWAgcHJvcGVydHlcbiAgICAvLyB0aGF0J3MgYSBmdW5jdGlvblxuICAgIGlmICh0eXBlb2YgdGhpc1tgb24ke3R5cGV9YF0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXNbYG9uJHt0eXBlfWBdKGV2ZW50KTtcbiAgICB9XG4gIH1cbn0iLCIvKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgRXZlbnRUYXJnZXQgZnJvbSAnLi4vRXZlbnRUYXJnZXQuanMnXG5cbmV4cG9ydCBjb25zdCBQUklWQVRFID0gU3ltYm9sKCdAQHdlYnhyLXBvbHlmaWxsL1hSJyk7XG5cbmV4cG9ydCBjb25zdCBYUlNlc3Npb25Nb2RlcyA9IFsnaW5saW5lJywgJ2ltbWVyc2l2ZS12cicsICdpbW1lcnNpdmUtYXInXTtcblxuY29uc3QgREVGQVVMVF9TRVNTSU9OX09QVElPTlMgPSB7XG4gICdpbmxpbmUnOiB7XG4gICAgcmVxdWlyZWRGZWF0dXJlczogWyd2aWV3ZXInXSxcbiAgICBvcHRpb25hbEZlYXR1cmVzOiBbXSxcbiAgfSxcbiAgJ2ltbWVyc2l2ZS12cic6IHtcbiAgICByZXF1aXJlZEZlYXR1cmVzOiBbJ3ZpZXdlcicsICdsb2NhbCddLFxuICAgIG9wdGlvbmFsRmVhdHVyZXM6IFtdLFxuICB9LFxuICAnaW1tZXJzaXZlLWFyJzoge1xuICAgIHJlcXVpcmVkRmVhdHVyZXM6IFsndmlld2VyJywgJ2xvY2FsJ10sXG4gICAgb3B0aW9uYWxGZWF0dXJlczogW10sXG4gIH1cbn07XG5cbmNvbnN0IFBPTFlGSUxMX1JFUVVFU1RfU0VTU0lPTl9FUlJPUiA9IFxuYFBvbHlmaWxsIEVycm9yOiBNdXN0IGNhbGwgbmF2aWdhdG9yLnhyLmlzU2Vzc2lvblN1cHBvcnRlZCgpIHdpdGggYW55IFhSU2Vzc2lvbk1vZGVcbm9yIG5hdmlnYXRvci54ci5yZXF1ZXN0U2Vzc2lvbignaW5saW5lJykgcHJpb3IgdG8gcmVxdWVzdGluZyBhbiBpbW1lcnNpdmVcbnNlc3Npb24uIFRoaXMgaXMgYSBsaW1pdGF0aW9uIHNwZWNpZmljIHRvIHRoZSBXZWJYUiBQb2x5ZmlsbCBhbmQgZG9lcyBub3QgYXBwbHlcbnRvIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIEFQSS5gXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFhSU3lzdGVtIGV4dGVuZHMgRXZlbnRUYXJnZXQge1xuICAvKipcbiAgICogUmVjZWl2ZXMgYSBwcm9taXNlIG9mIGFuIFhSRGV2aWNlLCBzbyB0aGF0IHRoZSBwb2x5ZmlsbFxuICAgKiBjYW4gcGFzcyBpbiBzb21lIGluaXRpYWwgY2hlY2tzIHRvIGFzeW5jaHJvbm91c2x5IHByb3ZpZGUgWFJEZXZpY2VzXG4gICAqIGlmIGNvbnRlbnQgaW1tZWRpYXRlbHkgcmVxdWVzdHMgYHJlcXVlc3REZXZpY2UoKWAuXG4gICAqXG4gICAqIEBwYXJhbSB7UHJvbWlzZTxYUkRldmljZT59IGRldmljZVByb21pc2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRldmljZVByb21pc2UpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXNbUFJJVkFURV0gPSB7XG4gICAgICBkZXZpY2U6IG51bGwsXG4gICAgICBkZXZpY2VQcm9taXNlLFxuICAgICAgaW1tZXJzaXZlU2Vzc2lvbjogbnVsbCxcbiAgICAgIGlubGluZVNlc3Npb25zOiBuZXcgU2V0KCksXG4gICAgfTtcblxuICAgIGRldmljZVByb21pc2UudGhlbigoZGV2aWNlKSA9PiB7IHRoaXNbUFJJVkFURV0uZGV2aWNlID0gZGV2aWNlOyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1hSU2Vzc2lvbk1vZGV9IG1vZGVcbiAgICogQHJldHVybiB7UHJvbWlzZTxib29sZWFuPn1cbiAgICovXG4gIGFzeW5jIGlzU2Vzc2lvblN1cHBvcnRlZChtb2RlKSB7XG4gICAgLy8gQWx3YXlzIGVuc3VyZSB0aGF0IHdlIHdhaXQgZm9yIHRoZSBkZXZpY2UgcHJvbWlzZSB0byByZXNvbHZlLlxuICAgIGlmICghdGhpc1tQUklWQVRFXS5kZXZpY2UpIHtcbiAgICAgIGF3YWl0IHRoaXNbUFJJVkFURV0uZGV2aWNlUHJvbWlzZTtcbiAgICB9XG5cbiAgICAvLyAnaW5saW5lJyBpcyBhbHdheXMgZ3VhcmFudGVlZCB0byBiZSBzdXBwb3J0ZWQuXG4gICAgaWYgKG1vZGUgIT0gJ2lubGluZScpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpc1tQUklWQVRFXS5kZXZpY2UuaXNTZXNzaW9uU3VwcG9ydGVkKG1vZGUpKTtcbiAgICB9IFxuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1hSU2Vzc2lvbk1vZGV9IG1vZGVcbiAgICogQHBhcmFtIHtYUlNlc3Npb25Jbml0fSBvcHRpb25zXG4gICAqIEByZXR1cm4ge1Byb21pc2U8WFJTZXNzaW9uPn1cbiAgICovXG4gIGFzeW5jIHJlcXVlc3RTZXNzaW9uKG1vZGUsIG9wdGlvbnMpIHtcbiAgICAvLyBJZiB0aGUgZGV2aWNlIGhhc24ndCByZXNvbHZlZCB5ZXQsIHdhaXQgZm9yIGl0IGFuZCB0cnkgYWdhaW4uXG4gICAgaWYgKCF0aGlzW1BSSVZBVEVdLmRldmljZSkge1xuICAgICAgaWYgKG1vZGUgIT0gJ2lubGluZScpIHtcbiAgICAgICAgLy8gQmVjYXVzZSByZXF1ZXN0aW5nIGltbWVyc2l2ZSBtb2RlcyByZXF1aXJlcyBhIHVzZXIgZ2VzdHVyZSwgd2UgY2FuJ3RcbiAgICAgICAgLy8gd2FpdCBmb3IgYSBwcm9taXNlIHRvIHJlc29sdmUgYmVmb3JlIG1ha2luZyB0aGUgcmVhbCBzZXNzaW9uIHJlcXVlc3QuXG4gICAgICAgIC8vIEZvciB0aGF0IHJlYXNvbiwgd2UnbGwgdGhyb3cgYSBwb2x5ZmlsbC1zcGVjaWZpYyBlcnJvciBoZXJlLlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoUE9MWUZJTExfUkVRVUVTVF9TRVNTSU9OX0VSUk9SKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXNbUFJJVkFURV0uZGV2aWNlUHJvbWlzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIVhSU2Vzc2lvbk1vZGVzLmluY2x1ZGVzKG1vZGUpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgIGBUaGUgcHJvdmlkZWQgdmFsdWUgJyR7bW9kZX0nIGlzIG5vdCBhIHZhbGlkIGVudW0gdmFsdWUgb2YgdHlwZSBYUlNlc3Npb25Nb2RlYCk7XG4gICAgfVxuXG4gICAgLy8gUmVzb2x2ZSB3aGljaCBvZiB0aGUgcmVxdWVzdGVkIGZlYXR1cmVzIGFyZSBzdXBwb3J0ZWQgYW5kIHJlamVjdCBpZiBhXG4gICAgLy8gcmVxdWlyZWQgZmVhdHVyZSBpc24ndCBhdmFpbGFibGUuXG4gICAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSBERUZBVUxUX1NFU1NJT05fT1BUSU9OU1ttb2RlXTtcbiAgICBjb25zdCByZXF1aXJlZEZlYXR1cmVzID0gZGVmYXVsdE9wdGlvbnMucmVxdWlyZWRGZWF0dXJlcy5jb25jYXQoXG4gICAgICAgIG9wdGlvbnMgJiYgb3B0aW9ucy5yZXF1aXJlZEZlYXR1cmVzID8gb3B0aW9ucy5yZXF1aXJlZEZlYXR1cmVzIDogW10pO1xuICAgIGNvbnN0IG9wdGlvbmFsRmVhdHVyZXMgPSBkZWZhdWx0T3B0aW9ucy5vcHRpb25hbEZlYXR1cmVzLmNvbmNhdChcbiAgICAgICAgb3B0aW9ucyAmJiBvcHRpb25zLm9wdGlvbmFsRmVhdHVyZXMgPyBvcHRpb25zLm9wdGlvbmFsRmVhdHVyZXMgOiBbXSk7XG4gICAgY29uc3QgZW5hYmxlZEZlYXR1cmVzID0gbmV3IFNldCgpO1xuXG4gICAgbGV0IHJlcXVpcmVtZW50c0ZhaWxlZCA9IGZhbHNlO1xuICAgIGZvciAobGV0IGZlYXR1cmUgb2YgcmVxdWlyZWRGZWF0dXJlcykge1xuICAgICAgaWYgKCF0aGlzW1BSSVZBVEVdLmRldmljZS5pc0ZlYXR1cmVTdXBwb3J0ZWQoZmVhdHVyZSkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgVGhlIHJlcXVpcmVkIGZlYXR1cmUgJyR7ZmVhdHVyZX0nIGlzIG5vdCBzdXBwb3J0ZWRgKTtcbiAgICAgICAgcmVxdWlyZW1lbnRzRmFpbGVkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVuYWJsZWRGZWF0dXJlcy5hZGQoZmVhdHVyZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJlcXVpcmVtZW50c0ZhaWxlZCkge1xuICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignU2Vzc2lvbiBkb2VzIG5vdCBzdXBwb3J0IHNvbWUgcmVxdWlyZWQgZmVhdHVyZXMnLCAnTm90U3VwcG9ydGVkRXJyb3InKTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBmZWF0dXJlIG9mIG9wdGlvbmFsRmVhdHVyZXMpIHtcbiAgICAgIGlmICghdGhpc1tQUklWQVRFXS5kZXZpY2UuaXNGZWF0dXJlU3VwcG9ydGVkKGZlYXR1cmUpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBUaGUgb3B0aW9uYWwgZmVhdHVyZSAnJHtmZWF0dXJlfScgaXMgbm90IHN1cHBvcnRlZGApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW5hYmxlZEZlYXR1cmVzLmFkZChmZWF0dXJlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYWxsIGRldmljZSdzIHJlcXVlc3RTZXNzaW9uLCB3aGljaCBkb2VzIHNvbWUgaW5pdGlhbGl6YXRpb24gKDEuMSBcbiAgICAvLyBmYWxsYmFjayBjYWxscyBgdnJEaXNwbGF5LnJlcXVlc3RQcmVzZW50KClgIGZvciBleGFtcGxlKS4gQ291bGQgdGhyb3cgXG4gICAgLy8gZHVlIHRvIG1pc3NpbmcgdXNlciBnZXN0dXJlLlxuICAgIGNvbnN0IHNlc3Npb25JZCA9IGF3YWl0IHRoaXNbUFJJVkFURV0uZGV2aWNlLnJlcXVlc3RTZXNzaW9uKG1vZGUsIGVuYWJsZWRGZWF0dXJlcyk7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IG5ldyBYUlNlc3Npb24odGhpc1tQUklWQVRFXS5kZXZpY2UsIG1vZGUsIHNlc3Npb25JZCk7XG5cbiAgICBpZiAobW9kZSA9PSAnaW5saW5lJykge1xuICAgICAgdGhpc1tQUklWQVRFXS5pbmxpbmVTZXNzaW9ucy5hZGQoc2Vzc2lvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXNbUFJJVkFURV0uaW1tZXJzaXZlU2Vzc2lvbiA9IHNlc3Npb247XG4gICAgfVxuXG4gICAgY29uc3Qgb25TZXNzaW9uRW5kID0gKCkgPT4ge1xuICAgICAgaWYgKG1vZGUgPT0gJ2lubGluZScpIHtcbiAgICAgICAgdGhpc1tQUklWQVRFXS5pbmxpbmVTZXNzaW9ucy5kZWxldGUoc2Vzc2lvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzW1BSSVZBVEVdLmltbWVyc2l2ZVNlc3Npb24gPSBudWxsO1xuICAgICAgfVxuICAgICAgc2Vzc2lvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdlbmQnLCBvblNlc3Npb25FbmQpO1xuICAgIH07XG4gICAgc2Vzc2lvbi5hZGRFdmVudExpc3RlbmVyKCdlbmQnLCBvblNlc3Npb25FbmQpO1xuXG4gICAgcmV0dXJuIHNlc3Npb247XG4gIH1cbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmV4cG9ydCBjb25zdCBQUklWQVRFID0gU3ltYm9sKCdAQHdlYnhyLXBvbHlmaWxsL1hSUG9zZScpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBYUlBvc2Uge1xuICAvKipcbiAgICogQHBhcmFtIHtYUlJpZ2lkVHJhbnNmb3JtfSB0cmFuc2Zvcm0gXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW11bGF0ZWRQb3NpdGlvbiBcbiAgICovXG4gIGNvbnN0cnVjdG9yKHRyYW5zZm9ybSwgZW11bGF0ZWRQb3NpdGlvbikge1xuICAgIHRoaXNbUFJJVkFURV0gPSB7XG4gICAgICB0cmFuc2Zvcm0sXG4gICAgICBlbXVsYXRlZFBvc2l0aW9uLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7WFJSaWdpZFRyYW5zZm9ybX1cbiAgICovXG4gIGdldCB0cmFuc2Zvcm0oKSB7IHJldHVybiB0aGlzW1BSSVZBVEVdLnRyYW5zZm9ybTsgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sfVxuICAgKi9cbiAgZ2V0IGVtdWxhdGVkUG9zaXRpb24oKSB7IHJldHVybiB0aGlzW1BSSVZBVEVdLmVtdWxhdGVkUG9zaXRpb247IH1cbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCBYUlBvc2UgZnJvbSAnLi9YUlBvc2UnO1xuXG5leHBvcnQgY29uc3QgUFJJVkFURSA9IFN5bWJvbCgnQEB3ZWJ4ci1wb2x5ZmlsbC9YUlZpZXdlclBvc2UnKTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgWFJWaWV3ZXJQb3NlIGV4dGVuZHMgWFJQb3NlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7WFJEZXZpY2V9IGRldmljZVxuICAgKi9cbiAgY29uc3RydWN0b3IodHJhbnNmb3JtLCB2aWV3cywgZW11bGF0ZWRQb3NpdGlvbiA9IGZhbHNlKSB7XG4gICAgc3VwZXIodHJhbnNmb3JtLCBlbXVsYXRlZFBvc2l0aW9uKTtcbiAgICB0aGlzW1BSSVZBVEVdID0ge1xuICAgICAgdmlld3NcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0FycmF5PFhSVmlldz59XG4gICAqL1xuICBnZXQgdmlld3MoKSB7XG4gICAgcmV0dXJuIHRoaXNbUFJJVkFURV0udmlld3M7XG4gIH1cbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmV4cG9ydCBjb25zdCBQUklWQVRFID0gU3ltYm9sKCdAQHdlYnhyLXBvbHlmaWxsL1hSVmlld3BvcnQnKTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgWFJWaWV3cG9ydCB7XG4gIC8qKlxuICAgKiBUYWtlcyBhIHByb3h5IG9iamVjdCB0aGF0IHRoaXMgdmlld3BvcnQncyBYUlZpZXdcbiAgICogdXBkYXRlcyBhbmQgd2Ugc2VydmUgaGVyZSB0byBtYXRjaCBBUEkuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXRcbiAgICovXG4gIGNvbnN0cnVjdG9yKHRhcmdldCkge1xuICAgIHRoaXNbUFJJVkFURV0gPSB7IHRhcmdldCB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGdldCB4KCkgeyByZXR1cm4gdGhpc1tQUklWQVRFXS50YXJnZXQueDsgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgeSgpIHsgcmV0dXJuIHRoaXNbUFJJVkFURV0udGFyZ2V0Lnk7IH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IHdpZHRoKCkgeyByZXR1cm4gdGhpc1tQUklWQVRFXS50YXJnZXQud2lkdGg7IH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IGhlaWdodCgpIHsgcmV0dXJuIHRoaXNbUFJJVkFURV0udGFyZ2V0LmhlaWdodDsgfVxufVxuIiwiLyoqXHJcbiAqIENvbW1vbiB1dGlsaXRpZXNcclxuICogQG1vZHVsZSBnbE1hdHJpeFxyXG4gKi9cbi8vIENvbmZpZ3VyYXRpb24gQ29uc3RhbnRzXG5leHBvcnQgdmFyIEVQU0lMT04gPSAwLjAwMDAwMTtcbmV4cG9ydCB2YXIgQVJSQVlfVFlQRSA9IHR5cGVvZiBGbG9hdDMyQXJyYXkgIT09ICd1bmRlZmluZWQnID8gRmxvYXQzMkFycmF5IDogQXJyYXk7XG5leHBvcnQgdmFyIFJBTkRPTSA9IE1hdGgucmFuZG9tO1xuLyoqXHJcbiAqIFNldHMgdGhlIHR5cGUgb2YgYXJyYXkgdXNlZCB3aGVuIGNyZWF0aW5nIG5ldyB2ZWN0b3JzIGFuZCBtYXRyaWNlc1xyXG4gKlxyXG4gKiBAcGFyYW0ge0Zsb2F0MzJBcnJheUNvbnN0cnVjdG9yIHwgQXJyYXlDb25zdHJ1Y3Rvcn0gdHlwZSBBcnJheSB0eXBlLCBzdWNoIGFzIEZsb2F0MzJBcnJheSBvciBBcnJheVxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNldE1hdHJpeEFycmF5VHlwZSh0eXBlKSB7XG4gIEFSUkFZX1RZUEUgPSB0eXBlO1xufVxudmFyIGRlZ3JlZSA9IE1hdGguUEkgLyAxODA7XG4vKipcclxuICogQ29udmVydCBEZWdyZWUgVG8gUmFkaWFuXHJcbiAqXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBhIEFuZ2xlIGluIERlZ3JlZXNcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0b1JhZGlhbihhKSB7XG4gIHJldHVybiBhICogZGVncmVlO1xufVxuLyoqXHJcbiAqIFRlc3RzIHdoZXRoZXIgb3Igbm90IHRoZSBhcmd1bWVudHMgaGF2ZSBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIHZhbHVlLCB3aXRoaW4gYW4gYWJzb2x1dGVcclxuICogb3IgcmVsYXRpdmUgdG9sZXJhbmNlIG9mIGdsTWF0cml4LkVQU0lMT04gKGFuIGFic29sdXRlIHRvbGVyYW5jZSBpcyB1c2VkIGZvciB2YWx1ZXMgbGVzc1xyXG4gKiB0aGFuIG9yIGVxdWFsIHRvIDEuMCwgYW5kIGEgcmVsYXRpdmUgdG9sZXJhbmNlIGlzIHVzZWQgZm9yIGxhcmdlciB2YWx1ZXMpXHJcbiAqXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBhIFRoZSBmaXJzdCBudW1iZXIgdG8gdGVzdC5cclxuICogQHBhcmFtIHtOdW1iZXJ9IGIgVGhlIHNlY29uZCBudW1iZXIgdG8gdGVzdC5cclxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIG51bWJlcnMgYXJlIGFwcHJveGltYXRlbHkgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICByZXR1cm4gTWF0aC5hYnMoYSAtIGIpIDw9IEVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEpLCBNYXRoLmFicyhiKSk7XG59XG5pZiAoIU1hdGguaHlwb3QpIE1hdGguaHlwb3QgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB5ID0gMCxcbiAgICAgIGkgPSBhcmd1bWVudHMubGVuZ3RoO1xuXG4gIHdoaWxlIChpLS0pIHtcbiAgICB5ICs9IGFyZ3VtZW50c1tpXSAqIGFyZ3VtZW50c1tpXTtcbiAgfVxuXG4gIHJldHVybiBNYXRoLnNxcnQoeSk7XG59OyIsImltcG9ydCAqIGFzIGdsTWF0cml4IGZyb20gXCIuL2NvbW1vbi5qc1wiO1xuLyoqXHJcbiAqIDN4MyBNYXRyaXhcclxuICogQG1vZHVsZSBtYXQzXHJcbiAqL1xuXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyBpZGVudGl0eSBtYXQzXHJcbiAqXHJcbiAqIEByZXR1cm5zIHttYXQzfSBhIG5ldyAzeDMgbWF0cml4XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoOSk7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDA7XG4gICAgb3V0WzVdID0gMDtcbiAgICBvdXRbNl0gPSAwO1xuICAgIG91dFs3XSA9IDA7XG4gIH1cblxuICBvdXRbMF0gPSAxO1xuICBvdXRbNF0gPSAxO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIENvcGllcyB0aGUgdXBwZXItbGVmdCAzeDMgdmFsdWVzIGludG8gdGhlIGdpdmVuIG1hdDMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgM3gzIG1hdHJpeFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSAgIHRoZSBzb3VyY2UgNHg0IG1hdHJpeFxyXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbU1hdDQob3V0LCBhKSB7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IGFbMl07XG4gIG91dFszXSA9IGFbNF07XG4gIG91dFs0XSA9IGFbNV07XG4gIG91dFs1XSA9IGFbNl07XG4gIG91dFs2XSA9IGFbOF07XG4gIG91dFs3XSA9IGFbOV07XG4gIG91dFs4XSA9IGFbMTBdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcgbWF0MyBpbml0aWFsaXplZCB3aXRoIHZhbHVlcyBmcm9tIGFuIGV4aXN0aW5nIG1hdHJpeFxyXG4gKlxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSBtYXRyaXggdG8gY2xvbmVcclxuICogQHJldHVybnMge21hdDN9IGEgbmV3IDN4MyBtYXRyaXhcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShhKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg5KTtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgb3V0WzRdID0gYVs0XTtcbiAgb3V0WzVdID0gYVs1XTtcbiAgb3V0WzZdID0gYVs2XTtcbiAgb3V0WzddID0gYVs3XTtcbiAgb3V0WzhdID0gYVs4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgbWF0MyB0byBhbm90aGVyXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBzb3VyY2UgbWF0cml4XHJcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICBvdXRbNF0gPSBhWzRdO1xuICBvdXRbNV0gPSBhWzVdO1xuICBvdXRbNl0gPSBhWzZdO1xuICBvdXRbN10gPSBhWzddO1xuICBvdXRbOF0gPSBhWzhdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIENyZWF0ZSBhIG5ldyBtYXQzIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xyXG4gKlxyXG4gKiBAcGFyYW0ge051bWJlcn0gbTAwIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDAgcG9zaXRpb24gKGluZGV4IDApXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDEgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggMSlcclxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMiBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAyKVxyXG4gKiBAcGFyYW0ge051bWJlcn0gbTEwIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDAgcG9zaXRpb24gKGluZGV4IDMpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTEgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggNClcclxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMiBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAyIHBvc2l0aW9uIChpbmRleCA1KVxyXG4gKiBAcGFyYW0ge051bWJlcn0gbTIwIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDAgcG9zaXRpb24gKGluZGV4IDYpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjEgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggNylcclxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMiBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAyIHBvc2l0aW9uIChpbmRleCA4KVxyXG4gKiBAcmV0dXJucyB7bWF0M30gQSBuZXcgbWF0M1xyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21WYWx1ZXMobTAwLCBtMDEsIG0wMiwgbTEwLCBtMTEsIG0xMiwgbTIwLCBtMjEsIG0yMikge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoOSk7XG4gIG91dFswXSA9IG0wMDtcbiAgb3V0WzFdID0gbTAxO1xuICBvdXRbMl0gPSBtMDI7XG4gIG91dFszXSA9IG0xMDtcbiAgb3V0WzRdID0gbTExO1xuICBvdXRbNV0gPSBtMTI7XG4gIG91dFs2XSA9IG0yMDtcbiAgb3V0WzddID0gbTIxO1xuICBvdXRbOF0gPSBtMjI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgbWF0MyB0byB0aGUgZ2l2ZW4gdmFsdWVzXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDAgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMClcclxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMSBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAxIHBvc2l0aW9uIChpbmRleCAxKVxyXG4gKiBAcGFyYW0ge051bWJlcn0gbTAyIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDIgcG9zaXRpb24gKGluZGV4IDIpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTAgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMylcclxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMSBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA0KVxyXG4gKiBAcGFyYW0ge051bWJlcn0gbTEyIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDIgcG9zaXRpb24gKGluZGV4IDUpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjAgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggNilcclxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMSBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA3KVxyXG4gKiBAcGFyYW0ge051bWJlcn0gbTIyIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDIgcG9zaXRpb24gKGluZGV4IDgpXHJcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXQob3V0LCBtMDAsIG0wMSwgbTAyLCBtMTAsIG0xMSwgbTEyLCBtMjAsIG0yMSwgbTIyKSB7XG4gIG91dFswXSA9IG0wMDtcbiAgb3V0WzFdID0gbTAxO1xuICBvdXRbMl0gPSBtMDI7XG4gIG91dFszXSA9IG0xMDtcbiAgb3V0WzRdID0gbTExO1xuICBvdXRbNV0gPSBtMTI7XG4gIG91dFs2XSA9IG0yMDtcbiAgb3V0WzddID0gbTIxO1xuICBvdXRbOF0gPSBtMjI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogU2V0IGEgbWF0MyB0byB0aGUgaWRlbnRpdHkgbWF0cml4XHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XHJcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eShvdXQpIHtcbiAgb3V0WzBdID0gMTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMTtcbiAgb3V0WzVdID0gMDtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBUcmFuc3Bvc2UgdGhlIHZhbHVlcyBvZiBhIG1hdDNcclxuICpcclxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcclxuICogQHJldHVybnMge21hdDN9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zcG9zZShvdXQsIGEpIHtcbiAgLy8gSWYgd2UgYXJlIHRyYW5zcG9zaW5nIG91cnNlbHZlcyB3ZSBjYW4gc2tpcCBhIGZldyBzdGVwcyBidXQgaGF2ZSB0byBjYWNoZSBzb21lIHZhbHVlc1xuICBpZiAob3V0ID09PSBhKSB7XG4gICAgdmFyIGEwMSA9IGFbMV0sXG4gICAgICAgIGEwMiA9IGFbMl0sXG4gICAgICAgIGExMiA9IGFbNV07XG4gICAgb3V0WzFdID0gYVszXTtcbiAgICBvdXRbMl0gPSBhWzZdO1xuICAgIG91dFszXSA9IGEwMTtcbiAgICBvdXRbNV0gPSBhWzddO1xuICAgIG91dFs2XSA9IGEwMjtcbiAgICBvdXRbN10gPSBhMTI7XG4gIH0gZWxzZSB7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzNdO1xuICAgIG91dFsyXSA9IGFbNl07XG4gICAgb3V0WzNdID0gYVsxXTtcbiAgICBvdXRbNF0gPSBhWzRdO1xuICAgIG91dFs1XSA9IGFbN107XG4gICAgb3V0WzZdID0gYVsyXTtcbiAgICBvdXRbN10gPSBhWzVdO1xuICAgIG91dFs4XSA9IGFbOF07XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIEludmVydHMgYSBtYXQzXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBzb3VyY2UgbWF0cml4XHJcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnQob3V0LCBhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl07XG4gIHZhciBhMTAgPSBhWzNdLFxuICAgICAgYTExID0gYVs0XSxcbiAgICAgIGExMiA9IGFbNV07XG4gIHZhciBhMjAgPSBhWzZdLFxuICAgICAgYTIxID0gYVs3XSxcbiAgICAgIGEyMiA9IGFbOF07XG4gIHZhciBiMDEgPSBhMjIgKiBhMTEgLSBhMTIgKiBhMjE7XG4gIHZhciBiMTEgPSAtYTIyICogYTEwICsgYTEyICogYTIwO1xuICB2YXIgYjIxID0gYTIxICogYTEwIC0gYTExICogYTIwOyAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50XG5cbiAgdmFyIGRldCA9IGEwMCAqIGIwMSArIGEwMSAqIGIxMSArIGEwMiAqIGIyMTtcblxuICBpZiAoIWRldCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZGV0ID0gMS4wIC8gZGV0O1xuICBvdXRbMF0gPSBiMDEgKiBkZXQ7XG4gIG91dFsxXSA9ICgtYTIyICogYTAxICsgYTAyICogYTIxKSAqIGRldDtcbiAgb3V0WzJdID0gKGExMiAqIGEwMSAtIGEwMiAqIGExMSkgKiBkZXQ7XG4gIG91dFszXSA9IGIxMSAqIGRldDtcbiAgb3V0WzRdID0gKGEyMiAqIGEwMCAtIGEwMiAqIGEyMCkgKiBkZXQ7XG4gIG91dFs1XSA9ICgtYTEyICogYTAwICsgYTAyICogYTEwKSAqIGRldDtcbiAgb3V0WzZdID0gYjIxICogZGV0O1xuICBvdXRbN10gPSAoLWEyMSAqIGEwMCArIGEwMSAqIGEyMCkgKiBkZXQ7XG4gIG91dFs4XSA9IChhMTEgKiBhMDAgLSBhMDEgKiBhMTApICogZGV0O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgdGhlIGFkanVnYXRlIG9mIGEgbWF0M1xyXG4gKlxyXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgc291cmNlIG1hdHJpeFxyXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRqb2ludChvdXQsIGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXTtcbiAgdmFyIGExMCA9IGFbM10sXG4gICAgICBhMTEgPSBhWzRdLFxuICAgICAgYTEyID0gYVs1XTtcbiAgdmFyIGEyMCA9IGFbNl0sXG4gICAgICBhMjEgPSBhWzddLFxuICAgICAgYTIyID0gYVs4XTtcbiAgb3V0WzBdID0gYTExICogYTIyIC0gYTEyICogYTIxO1xuICBvdXRbMV0gPSBhMDIgKiBhMjEgLSBhMDEgKiBhMjI7XG4gIG91dFsyXSA9IGEwMSAqIGExMiAtIGEwMiAqIGExMTtcbiAgb3V0WzNdID0gYTEyICogYTIwIC0gYTEwICogYTIyO1xuICBvdXRbNF0gPSBhMDAgKiBhMjIgLSBhMDIgKiBhMjA7XG4gIG91dFs1XSA9IGEwMiAqIGExMCAtIGEwMCAqIGExMjtcbiAgb3V0WzZdID0gYTEwICogYTIxIC0gYTExICogYTIwO1xuICBvdXRbN10gPSBhMDEgKiBhMjAgLSBhMDAgKiBhMjE7XG4gIG91dFs4XSA9IGEwMCAqIGExMSAtIGEwMSAqIGExMDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDYWxjdWxhdGVzIHRoZSBkZXRlcm1pbmFudCBvZiBhIG1hdDNcclxuICpcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcclxuICogQHJldHVybnMge051bWJlcn0gZGV0ZXJtaW5hbnQgb2YgYVxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluYW50KGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXTtcbiAgdmFyIGExMCA9IGFbM10sXG4gICAgICBhMTEgPSBhWzRdLFxuICAgICAgYTEyID0gYVs1XTtcbiAgdmFyIGEyMCA9IGFbNl0sXG4gICAgICBhMjEgPSBhWzddLFxuICAgICAgYTIyID0gYVs4XTtcbiAgcmV0dXJuIGEwMCAqIChhMjIgKiBhMTEgLSBhMTIgKiBhMjEpICsgYTAxICogKC1hMjIgKiBhMTAgKyBhMTIgKiBhMjApICsgYTAyICogKGEyMSAqIGExMCAtIGExMSAqIGEyMCk7XG59XG4vKipcclxuICogTXVsdGlwbGllcyB0d28gbWF0MydzXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxyXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkob3V0LCBhLCBiKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl07XG4gIHZhciBhMTAgPSBhWzNdLFxuICAgICAgYTExID0gYVs0XSxcbiAgICAgIGExMiA9IGFbNV07XG4gIHZhciBhMjAgPSBhWzZdLFxuICAgICAgYTIxID0gYVs3XSxcbiAgICAgIGEyMiA9IGFbOF07XG4gIHZhciBiMDAgPSBiWzBdLFxuICAgICAgYjAxID0gYlsxXSxcbiAgICAgIGIwMiA9IGJbMl07XG4gIHZhciBiMTAgPSBiWzNdLFxuICAgICAgYjExID0gYls0XSxcbiAgICAgIGIxMiA9IGJbNV07XG4gIHZhciBiMjAgPSBiWzZdLFxuICAgICAgYjIxID0gYls3XSxcbiAgICAgIGIyMiA9IGJbOF07XG4gIG91dFswXSA9IGIwMCAqIGEwMCArIGIwMSAqIGExMCArIGIwMiAqIGEyMDtcbiAgb3V0WzFdID0gYjAwICogYTAxICsgYjAxICogYTExICsgYjAyICogYTIxO1xuICBvdXRbMl0gPSBiMDAgKiBhMDIgKyBiMDEgKiBhMTIgKyBiMDIgKiBhMjI7XG4gIG91dFszXSA9IGIxMCAqIGEwMCArIGIxMSAqIGExMCArIGIxMiAqIGEyMDtcbiAgb3V0WzRdID0gYjEwICogYTAxICsgYjExICogYTExICsgYjEyICogYTIxO1xuICBvdXRbNV0gPSBiMTAgKiBhMDIgKyBiMTEgKiBhMTIgKyBiMTIgKiBhMjI7XG4gIG91dFs2XSA9IGIyMCAqIGEwMCArIGIyMSAqIGExMCArIGIyMiAqIGEyMDtcbiAgb3V0WzddID0gYjIwICogYTAxICsgYjIxICogYTExICsgYjIyICogYTIxO1xuICBvdXRbOF0gPSBiMjAgKiBhMDIgKyBiMjEgKiBhMTIgKyBiMjIgKiBhMjI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogVHJhbnNsYXRlIGEgbWF0MyBieSB0aGUgZ2l2ZW4gdmVjdG9yXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBtYXRyaXggdG8gdHJhbnNsYXRlXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSB2IHZlY3RvciB0byB0cmFuc2xhdGUgYnlcclxuICogQHJldHVybnMge21hdDN9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zbGF0ZShvdXQsIGEsIHYpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGExMCA9IGFbM10sXG4gICAgICBhMTEgPSBhWzRdLFxuICAgICAgYTEyID0gYVs1XSxcbiAgICAgIGEyMCA9IGFbNl0sXG4gICAgICBhMjEgPSBhWzddLFxuICAgICAgYTIyID0gYVs4XSxcbiAgICAgIHggPSB2WzBdLFxuICAgICAgeSA9IHZbMV07XG4gIG91dFswXSA9IGEwMDtcbiAgb3V0WzFdID0gYTAxO1xuICBvdXRbMl0gPSBhMDI7XG4gIG91dFszXSA9IGExMDtcbiAgb3V0WzRdID0gYTExO1xuICBvdXRbNV0gPSBhMTI7XG4gIG91dFs2XSA9IHggKiBhMDAgKyB5ICogYTEwICsgYTIwO1xuICBvdXRbN10gPSB4ICogYTAxICsgeSAqIGExMSArIGEyMTtcbiAgb3V0WzhdID0geCAqIGEwMiArIHkgKiBhMTIgKyBhMjI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogUm90YXRlcyBhIG1hdDMgYnkgdGhlIGdpdmVuIGFuZ2xlXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XHJcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGUob3V0LCBhLCByYWQpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGExMCA9IGFbM10sXG4gICAgICBhMTEgPSBhWzRdLFxuICAgICAgYTEyID0gYVs1XSxcbiAgICAgIGEyMCA9IGFbNl0sXG4gICAgICBhMjEgPSBhWzddLFxuICAgICAgYTIyID0gYVs4XSxcbiAgICAgIHMgPSBNYXRoLnNpbihyYWQpLFxuICAgICAgYyA9IE1hdGguY29zKHJhZCk7XG4gIG91dFswXSA9IGMgKiBhMDAgKyBzICogYTEwO1xuICBvdXRbMV0gPSBjICogYTAxICsgcyAqIGExMTtcbiAgb3V0WzJdID0gYyAqIGEwMiArIHMgKiBhMTI7XG4gIG91dFszXSA9IGMgKiBhMTAgLSBzICogYTAwO1xuICBvdXRbNF0gPSBjICogYTExIC0gcyAqIGEwMTtcbiAgb3V0WzVdID0gYyAqIGExMiAtIHMgKiBhMDI7XG4gIG91dFs2XSA9IGEyMDtcbiAgb3V0WzddID0gYTIxO1xuICBvdXRbOF0gPSBhMjI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogU2NhbGVzIHRoZSBtYXQzIGJ5IHRoZSBkaW1lbnNpb25zIGluIHRoZSBnaXZlbiB2ZWMyXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMyfSB2IHRoZSB2ZWMyIHRvIHNjYWxlIHRoZSBtYXRyaXggYnlcclxuICogQHJldHVybnMge21hdDN9IG91dFxyXG4gKiovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShvdXQsIGEsIHYpIHtcbiAgdmFyIHggPSB2WzBdLFxuICAgICAgeSA9IHZbMV07XG4gIG91dFswXSA9IHggKiBhWzBdO1xuICBvdXRbMV0gPSB4ICogYVsxXTtcbiAgb3V0WzJdID0geCAqIGFbMl07XG4gIG91dFszXSA9IHkgKiBhWzNdO1xuICBvdXRbNF0gPSB5ICogYVs0XTtcbiAgb3V0WzVdID0geSAqIGFbNV07XG4gIG91dFs2XSA9IGFbNl07XG4gIG91dFs3XSA9IGFbN107XG4gIG91dFs4XSA9IGFbOF07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgdmVjdG9yIHRyYW5zbGF0aW9uXHJcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxyXG4gKlxyXG4gKiAgICAgbWF0My5pZGVudGl0eShkZXN0KTtcclxuICogICAgIG1hdDMudHJhbnNsYXRlKGRlc3QsIGRlc3QsIHZlYyk7XHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IHYgVHJhbnNsYXRpb24gdmVjdG9yXHJcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVHJhbnNsYXRpb24ob3V0LCB2KSB7XG4gIG91dFswXSA9IDE7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDE7XG4gIG91dFs1XSA9IDA7XG4gIG91dFs2XSA9IHZbMF07XG4gIG91dFs3XSA9IHZbMV07XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgZ2l2ZW4gYW5nbGVcclxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XHJcbiAqXHJcbiAqICAgICBtYXQzLmlkZW50aXR5KGRlc3QpO1xyXG4gKiAgICAgbWF0My5yb3RhdGUoZGVzdCwgZGVzdCwgcmFkKTtcclxuICpcclxuICogQHBhcmFtIHttYXQzfSBvdXQgbWF0MyByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxyXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxyXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVJvdGF0aW9uKG91dCwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgIGMgPSBNYXRoLmNvcyhyYWQpO1xuICBvdXRbMF0gPSBjO1xuICBvdXRbMV0gPSBzO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAtcztcbiAgb3V0WzRdID0gYztcbiAgb3V0WzVdID0gMDtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSB2ZWN0b3Igc2NhbGluZ1xyXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcclxuICpcclxuICogICAgIG1hdDMuaWRlbnRpdHkoZGVzdCk7XHJcbiAqICAgICBtYXQzLnNjYWxlKGRlc3QsIGRlc3QsIHZlYyk7XHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzJ9IHYgU2NhbGluZyB2ZWN0b3JcclxuICogQHJldHVybnMge21hdDN9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21TY2FsaW5nKG91dCwgdikge1xuICBvdXRbMF0gPSB2WzBdO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSB2WzFdO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIENvcGllcyB0aGUgdmFsdWVzIGZyb20gYSBtYXQyZCBpbnRvIGEgbWF0M1xyXG4gKlxyXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0MmR9IGEgdGhlIG1hdHJpeCB0byBjb3B5XHJcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcclxuICoqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbU1hdDJkKG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSBhWzJdO1xuICBvdXRbNF0gPSBhWzNdO1xuICBvdXRbNV0gPSAwO1xuICBvdXRbNl0gPSBhWzRdO1xuICBvdXRbN10gPSBhWzVdO1xuICBvdXRbOF0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgYSAzeDMgbWF0cml4IGZyb20gdGhlIGdpdmVuIHF1YXRlcm5pb25cclxuICpcclxuICogQHBhcmFtIHttYXQzfSBvdXQgbWF0MyByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSBRdWF0ZXJuaW9uIHRvIGNyZWF0ZSBtYXRyaXggZnJvbVxyXG4gKlxyXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVF1YXQob3V0LCBxKSB7XG4gIHZhciB4ID0gcVswXSxcbiAgICAgIHkgPSBxWzFdLFxuICAgICAgeiA9IHFbMl0sXG4gICAgICB3ID0gcVszXTtcbiAgdmFyIHgyID0geCArIHg7XG4gIHZhciB5MiA9IHkgKyB5O1xuICB2YXIgejIgPSB6ICsgejtcbiAgdmFyIHh4ID0geCAqIHgyO1xuICB2YXIgeXggPSB5ICogeDI7XG4gIHZhciB5eSA9IHkgKiB5MjtcbiAgdmFyIHp4ID0geiAqIHgyO1xuICB2YXIgenkgPSB6ICogeTI7XG4gIHZhciB6eiA9IHogKiB6MjtcbiAgdmFyIHd4ID0gdyAqIHgyO1xuICB2YXIgd3kgPSB3ICogeTI7XG4gIHZhciB3eiA9IHcgKiB6MjtcbiAgb3V0WzBdID0gMSAtIHl5IC0geno7XG4gIG91dFszXSA9IHl4IC0gd3o7XG4gIG91dFs2XSA9IHp4ICsgd3k7XG4gIG91dFsxXSA9IHl4ICsgd3o7XG4gIG91dFs0XSA9IDEgLSB4eCAtIHp6O1xuICBvdXRbN10gPSB6eSAtIHd4O1xuICBvdXRbMl0gPSB6eCAtIHd5O1xuICBvdXRbNV0gPSB6eSArIHd4O1xuICBvdXRbOF0gPSAxIC0geHggLSB5eTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDYWxjdWxhdGVzIGEgM3gzIG5vcm1hbCBtYXRyaXggKHRyYW5zcG9zZSBpbnZlcnNlKSBmcm9tIHRoZSA0eDQgbWF0cml4XHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgTWF0NCB0byBkZXJpdmUgdGhlIG5vcm1hbCBtYXRyaXggZnJvbVxyXG4gKlxyXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsRnJvbU1hdDQob3V0LCBhKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMDMgPSBhWzNdO1xuICB2YXIgYTEwID0gYVs0XSxcbiAgICAgIGExMSA9IGFbNV0sXG4gICAgICBhMTIgPSBhWzZdLFxuICAgICAgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF0sXG4gICAgICBhMjEgPSBhWzldLFxuICAgICAgYTIyID0gYVsxMF0sXG4gICAgICBhMjMgPSBhWzExXTtcbiAgdmFyIGEzMCA9IGFbMTJdLFxuICAgICAgYTMxID0gYVsxM10sXG4gICAgICBhMzIgPSBhWzE0XSxcbiAgICAgIGEzMyA9IGFbMTVdO1xuICB2YXIgYjAwID0gYTAwICogYTExIC0gYTAxICogYTEwO1xuICB2YXIgYjAxID0gYTAwICogYTEyIC0gYTAyICogYTEwO1xuICB2YXIgYjAyID0gYTAwICogYTEzIC0gYTAzICogYTEwO1xuICB2YXIgYjAzID0gYTAxICogYTEyIC0gYTAyICogYTExO1xuICB2YXIgYjA0ID0gYTAxICogYTEzIC0gYTAzICogYTExO1xuICB2YXIgYjA1ID0gYTAyICogYTEzIC0gYTAzICogYTEyO1xuICB2YXIgYjA2ID0gYTIwICogYTMxIC0gYTIxICogYTMwO1xuICB2YXIgYjA3ID0gYTIwICogYTMyIC0gYTIyICogYTMwO1xuICB2YXIgYjA4ID0gYTIwICogYTMzIC0gYTIzICogYTMwO1xuICB2YXIgYjA5ID0gYTIxICogYTMyIC0gYTIyICogYTMxO1xuICB2YXIgYjEwID0gYTIxICogYTMzIC0gYTIzICogYTMxO1xuICB2YXIgYjExID0gYTIyICogYTMzIC0gYTIzICogYTMyOyAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50XG5cbiAgdmFyIGRldCA9IGIwMCAqIGIxMSAtIGIwMSAqIGIxMCArIGIwMiAqIGIwOSArIGIwMyAqIGIwOCAtIGIwNCAqIGIwNyArIGIwNSAqIGIwNjtcblxuICBpZiAoIWRldCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZGV0ID0gMS4wIC8gZGV0O1xuICBvdXRbMF0gPSAoYTExICogYjExIC0gYTEyICogYjEwICsgYTEzICogYjA5KSAqIGRldDtcbiAgb3V0WzFdID0gKGExMiAqIGIwOCAtIGExMCAqIGIxMSAtIGExMyAqIGIwNykgKiBkZXQ7XG4gIG91dFsyXSA9IChhMTAgKiBiMTAgLSBhMTEgKiBiMDggKyBhMTMgKiBiMDYpICogZGV0O1xuICBvdXRbM10gPSAoYTAyICogYjEwIC0gYTAxICogYjExIC0gYTAzICogYjA5KSAqIGRldDtcbiAgb3V0WzRdID0gKGEwMCAqIGIxMSAtIGEwMiAqIGIwOCArIGEwMyAqIGIwNykgKiBkZXQ7XG4gIG91dFs1XSA9IChhMDEgKiBiMDggLSBhMDAgKiBiMTAgLSBhMDMgKiBiMDYpICogZGV0O1xuICBvdXRbNl0gPSAoYTMxICogYjA1IC0gYTMyICogYjA0ICsgYTMzICogYjAzKSAqIGRldDtcbiAgb3V0WzddID0gKGEzMiAqIGIwMiAtIGEzMCAqIGIwNSAtIGEzMyAqIGIwMSkgKiBkZXQ7XG4gIG91dFs4XSA9IChhMzAgKiBiMDQgLSBhMzEgKiBiMDIgKyBhMzMgKiBiMDApICogZGV0O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIDJEIHByb2plY3Rpb24gbWF0cml4IHdpdGggdGhlIGdpdmVuIGJvdW5kc1xyXG4gKlxyXG4gKiBAcGFyYW0ge21hdDN9IG91dCBtYXQzIGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBXaWR0aCBvZiB5b3VyIGdsIGNvbnRleHRcclxuICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCBIZWlnaHQgb2YgZ2wgY29udGV4dFxyXG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcHJvamVjdGlvbihvdXQsIHdpZHRoLCBoZWlnaHQpIHtcbiAgb3V0WzBdID0gMiAvIHdpZHRoO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAtMiAvIGhlaWdodDtcbiAgb3V0WzVdID0gMDtcbiAgb3V0WzZdID0gLTE7XG4gIG91dFs3XSA9IDE7XG4gIG91dFs4XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIG1hdDNcclxuICpcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgbWF0cml4IHRvIHJlcHJlc2VudCBhcyBhIHN0cmluZ1xyXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cihhKSB7XG4gIHJldHVybiBcIm1hdDMoXCIgKyBhWzBdICsgXCIsIFwiICsgYVsxXSArIFwiLCBcIiArIGFbMl0gKyBcIiwgXCIgKyBhWzNdICsgXCIsIFwiICsgYVs0XSArIFwiLCBcIiArIGFbNV0gKyBcIiwgXCIgKyBhWzZdICsgXCIsIFwiICsgYVs3XSArIFwiLCBcIiArIGFbOF0gKyBcIilcIjtcbn1cbi8qKlxyXG4gKiBSZXR1cm5zIEZyb2Jlbml1cyBub3JtIG9mIGEgbWF0M1xyXG4gKlxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSB0aGUgbWF0cml4IHRvIGNhbGN1bGF0ZSBGcm9iZW5pdXMgbm9ybSBvZlxyXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBGcm9iZW5pdXMgbm9ybVxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb2IoYSkge1xuICByZXR1cm4gTWF0aC5oeXBvdChhWzBdLCBhWzFdLCBhWzJdLCBhWzNdLCBhWzRdLCBhWzVdLCBhWzZdLCBhWzddLCBhWzhdKTtcbn1cbi8qKlxyXG4gKiBBZGRzIHR3byBtYXQzJ3NcclxuICpcclxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXHJcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGQob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdO1xuICBvdXRbMV0gPSBhWzFdICsgYlsxXTtcbiAgb3V0WzJdID0gYVsyXSArIGJbMl07XG4gIG91dFszXSA9IGFbM10gKyBiWzNdO1xuICBvdXRbNF0gPSBhWzRdICsgYls0XTtcbiAgb3V0WzVdID0gYVs1XSArIGJbNV07XG4gIG91dFs2XSA9IGFbNl0gKyBiWzZdO1xuICBvdXRbN10gPSBhWzddICsgYls3XTtcbiAgb3V0WzhdID0gYVs4XSArIGJbOF07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogU3VidHJhY3RzIG1hdHJpeCBiIGZyb20gbWF0cml4IGFcclxuICpcclxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXHJcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdWJ0cmFjdChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAtIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLSBiWzFdO1xuICBvdXRbMl0gPSBhWzJdIC0gYlsyXTtcbiAgb3V0WzNdID0gYVszXSAtIGJbM107XG4gIG91dFs0XSA9IGFbNF0gLSBiWzRdO1xuICBvdXRbNV0gPSBhWzVdIC0gYls1XTtcbiAgb3V0WzZdID0gYVs2XSAtIGJbNl07XG4gIG91dFs3XSA9IGFbN10gLSBiWzddO1xuICBvdXRbOF0gPSBhWzhdIC0gYls4XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBNdWx0aXBseSBlYWNoIGVsZW1lbnQgb2YgdGhlIG1hdHJpeCBieSBhIHNjYWxhci5cclxuICpcclxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIG1hdHJpeCB0byBzY2FsZVxyXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIG1hdHJpeCdzIGVsZW1lbnRzIGJ5XHJcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseVNjYWxhcihvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAqIGI7XG4gIG91dFsxXSA9IGFbMV0gKiBiO1xuICBvdXRbMl0gPSBhWzJdICogYjtcbiAgb3V0WzNdID0gYVszXSAqIGI7XG4gIG91dFs0XSA9IGFbNF0gKiBiO1xuICBvdXRbNV0gPSBhWzVdICogYjtcbiAgb3V0WzZdID0gYVs2XSAqIGI7XG4gIG91dFs3XSA9IGFbN10gKiBiO1xuICBvdXRbOF0gPSBhWzhdICogYjtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBBZGRzIHR3byBtYXQzJ3MgYWZ0ZXIgbXVsdGlwbHlpbmcgZWFjaCBlbGVtZW50IG9mIHRoZSBzZWNvbmQgb3BlcmFuZCBieSBhIHNjYWxhciB2YWx1ZS5cclxuICpcclxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSB0aGUgYW1vdW50IHRvIHNjYWxlIGIncyBlbGVtZW50cyBieSBiZWZvcmUgYWRkaW5nXHJcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseVNjYWxhckFuZEFkZChvdXQsIGEsIGIsIHNjYWxlKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdICogc2NhbGU7XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdICogc2NhbGU7XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdICogc2NhbGU7XG4gIG91dFszXSA9IGFbM10gKyBiWzNdICogc2NhbGU7XG4gIG91dFs0XSA9IGFbNF0gKyBiWzRdICogc2NhbGU7XG4gIG91dFs1XSA9IGFbNV0gKyBiWzVdICogc2NhbGU7XG4gIG91dFs2XSA9IGFbNl0gKyBiWzZdICogc2NhbGU7XG4gIG91dFs3XSA9IGFbN10gKyBiWzddICogc2NhbGU7XG4gIG91dFs4XSA9IGFbOF0gKyBiWzhdICogc2NhbGU7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgbWF0cmljZXMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxyXG4gKlxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYSBUaGUgZmlyc3QgbWF0cml4LlxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0M30gYiBUaGUgc2Vjb25kIG1hdHJpeC5cclxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIG1hdHJpY2VzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV4YWN0RXF1YWxzKGEsIGIpIHtcbiAgcmV0dXJuIGFbMF0gPT09IGJbMF0gJiYgYVsxXSA9PT0gYlsxXSAmJiBhWzJdID09PSBiWzJdICYmIGFbM10gPT09IGJbM10gJiYgYVs0XSA9PT0gYls0XSAmJiBhWzVdID09PSBiWzVdICYmIGFbNl0gPT09IGJbNl0gJiYgYVs3XSA9PT0gYls3XSAmJiBhWzhdID09PSBiWzhdO1xufVxuLyoqXHJcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIG1hdHJpY2VzIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbi5cclxuICpcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGEgVGhlIGZpcnN0IG1hdHJpeC5cclxuICogQHBhcmFtIHtSZWFkb25seU1hdDN9IGIgVGhlIHNlY29uZCBtYXRyaXguXHJcbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBtYXRyaWNlcyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICB2YXIgYTAgPSBhWzBdLFxuICAgICAgYTEgPSBhWzFdLFxuICAgICAgYTIgPSBhWzJdLFxuICAgICAgYTMgPSBhWzNdLFxuICAgICAgYTQgPSBhWzRdLFxuICAgICAgYTUgPSBhWzVdLFxuICAgICAgYTYgPSBhWzZdLFxuICAgICAgYTcgPSBhWzddLFxuICAgICAgYTggPSBhWzhdO1xuICB2YXIgYjAgPSBiWzBdLFxuICAgICAgYjEgPSBiWzFdLFxuICAgICAgYjIgPSBiWzJdLFxuICAgICAgYjMgPSBiWzNdLFxuICAgICAgYjQgPSBiWzRdLFxuICAgICAgYjUgPSBiWzVdLFxuICAgICAgYjYgPSBiWzZdLFxuICAgICAgYjcgPSBiWzddLFxuICAgICAgYjggPSBiWzhdO1xuICByZXR1cm4gTWF0aC5hYnMoYTAgLSBiMCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTApLCBNYXRoLmFicyhiMCkpICYmIE1hdGguYWJzKGExIC0gYjEpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExKSwgTWF0aC5hYnMoYjEpKSAmJiBNYXRoLmFicyhhMiAtIGIyKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMiksIE1hdGguYWJzKGIyKSkgJiYgTWF0aC5hYnMoYTMgLSBiMykgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTMpLCBNYXRoLmFicyhiMykpICYmIE1hdGguYWJzKGE0IC0gYjQpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE0KSwgTWF0aC5hYnMoYjQpKSAmJiBNYXRoLmFicyhhNSAtIGI1KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNSksIE1hdGguYWJzKGI1KSkgJiYgTWF0aC5hYnMoYTYgLSBiNikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTYpLCBNYXRoLmFicyhiNikpICYmIE1hdGguYWJzKGE3IC0gYjcpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE3KSwgTWF0aC5hYnMoYjcpKSAmJiBNYXRoLmFicyhhOCAtIGI4KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhOCksIE1hdGguYWJzKGI4KSk7XG59XG4vKipcclxuICogQWxpYXMgZm9yIHtAbGluayBtYXQzLm11bHRpcGx5fVxyXG4gKiBAZnVuY3Rpb25cclxuICovXG5cbmV4cG9ydCB2YXIgbXVsID0gbXVsdGlwbHk7XG4vKipcclxuICogQWxpYXMgZm9yIHtAbGluayBtYXQzLnN1YnRyYWN0fVxyXG4gKiBAZnVuY3Rpb25cclxuICovXG5cbmV4cG9ydCB2YXIgc3ViID0gc3VidHJhY3Q7IiwiaW1wb3J0ICogYXMgZ2xNYXRyaXggZnJvbSBcIi4vY29tbW9uLmpzXCI7XG4vKipcclxuICogNHg0IE1hdHJpeDxicj5Gb3JtYXQ6IGNvbHVtbi1tYWpvciwgd2hlbiB0eXBlZCBvdXQgaXQgbG9va3MgbGlrZSByb3ctbWFqb3I8YnI+VGhlIG1hdHJpY2VzIGFyZSBiZWluZyBwb3N0IG11bHRpcGxpZWQuXHJcbiAqIEBtb2R1bGUgbWF0NFxyXG4gKi9cblxuLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcgaWRlbnRpdHkgbWF0NFxyXG4gKlxyXG4gKiBAcmV0dXJucyB7bWF0NH0gYSBuZXcgNHg0IG1hdHJpeFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDE2KTtcblxuICBpZiAoZ2xNYXRyaXguQVJSQVlfVFlQRSAhPSBGbG9hdDMyQXJyYXkpIHtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgICBvdXRbNF0gPSAwO1xuICAgIG91dFs2XSA9IDA7XG4gICAgb3V0WzddID0gMDtcbiAgICBvdXRbOF0gPSAwO1xuICAgIG91dFs5XSA9IDA7XG4gICAgb3V0WzExXSA9IDA7XG4gICAgb3V0WzEyXSA9IDA7XG4gICAgb3V0WzEzXSA9IDA7XG4gICAgb3V0WzE0XSA9IDA7XG4gIH1cblxuICBvdXRbMF0gPSAxO1xuICBvdXRbNV0gPSAxO1xuICBvdXRbMTBdID0gMTtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyBtYXQ0IGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgbWF0cml4XHJcbiAqXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIG1hdHJpeCB0byBjbG9uZVxyXG4gKiBAcmV0dXJucyB7bWF0NH0gYSBuZXcgNHg0IG1hdHJpeFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGEpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDE2KTtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgb3V0WzNdID0gYVszXTtcbiAgb3V0WzRdID0gYVs0XTtcbiAgb3V0WzVdID0gYVs1XTtcbiAgb3V0WzZdID0gYVs2XTtcbiAgb3V0WzddID0gYVs3XTtcbiAgb3V0WzhdID0gYVs4XTtcbiAgb3V0WzldID0gYVs5XTtcbiAgb3V0WzEwXSA9IGFbMTBdO1xuICBvdXRbMTFdID0gYVsxMV07XG4gIG91dFsxMl0gPSBhWzEyXTtcbiAgb3V0WzEzXSA9IGFbMTNdO1xuICBvdXRbMTRdID0gYVsxNF07XG4gIG91dFsxNV0gPSBhWzE1XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgbWF0NCB0byBhbm90aGVyXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBzb3VyY2UgbWF0cml4XHJcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICBvdXRbNF0gPSBhWzRdO1xuICBvdXRbNV0gPSBhWzVdO1xuICBvdXRbNl0gPSBhWzZdO1xuICBvdXRbN10gPSBhWzddO1xuICBvdXRbOF0gPSBhWzhdO1xuICBvdXRbOV0gPSBhWzldO1xuICBvdXRbMTBdID0gYVsxMF07XG4gIG91dFsxMV0gPSBhWzExXTtcbiAgb3V0WzEyXSA9IGFbMTJdO1xuICBvdXRbMTNdID0gYVsxM107XG4gIG91dFsxNF0gPSBhWzE0XTtcbiAgb3V0WzE1XSA9IGFbMTVdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIENyZWF0ZSBhIG5ldyBtYXQ0IHdpdGggdGhlIGdpdmVuIHZhbHVlc1xyXG4gKlxyXG4gKiBAcGFyYW0ge051bWJlcn0gbTAwIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDAgcG9zaXRpb24gKGluZGV4IDApXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDEgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggMSlcclxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMiBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAyKVxyXG4gKiBAcGFyYW0ge051bWJlcn0gbTAzIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDMgcG9zaXRpb24gKGluZGV4IDMpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTAgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggNClcclxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMSBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA1KVxyXG4gKiBAcGFyYW0ge051bWJlcn0gbTEyIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDIgcG9zaXRpb24gKGluZGV4IDYpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTMgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggNylcclxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMCBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAwIHBvc2l0aW9uIChpbmRleCA4KVxyXG4gKiBAcGFyYW0ge051bWJlcn0gbTIxIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDEgcG9zaXRpb24gKGluZGV4IDkpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjIgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggMTApXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjMgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggMTEpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzAgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMTIpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzEgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggMTMpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzIgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggMTQpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzMgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggMTUpXHJcbiAqIEByZXR1cm5zIHttYXQ0fSBBIG5ldyBtYXQ0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVZhbHVlcyhtMDAsIG0wMSwgbTAyLCBtMDMsIG0xMCwgbTExLCBtMTIsIG0xMywgbTIwLCBtMjEsIG0yMiwgbTIzLCBtMzAsIG0zMSwgbTMyLCBtMzMpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDE2KTtcbiAgb3V0WzBdID0gbTAwO1xuICBvdXRbMV0gPSBtMDE7XG4gIG91dFsyXSA9IG0wMjtcbiAgb3V0WzNdID0gbTAzO1xuICBvdXRbNF0gPSBtMTA7XG4gIG91dFs1XSA9IG0xMTtcbiAgb3V0WzZdID0gbTEyO1xuICBvdXRbN10gPSBtMTM7XG4gIG91dFs4XSA9IG0yMDtcbiAgb3V0WzldID0gbTIxO1xuICBvdXRbMTBdID0gbTIyO1xuICBvdXRbMTFdID0gbTIzO1xuICBvdXRbMTJdID0gbTMwO1xuICBvdXRbMTNdID0gbTMxO1xuICBvdXRbMTRdID0gbTMyO1xuICBvdXRbMTVdID0gbTMzO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIG1hdDQgdG8gdGhlIGdpdmVuIHZhbHVlc1xyXG4gKlxyXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxyXG4gKiBAcGFyYW0ge051bWJlcn0gbTAwIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDAgcG9zaXRpb24gKGluZGV4IDApXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMDEgQ29tcG9uZW50IGluIGNvbHVtbiAwLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggMSlcclxuICogQHBhcmFtIHtOdW1iZXJ9IG0wMiBDb21wb25lbnQgaW4gY29sdW1uIDAsIHJvdyAyIHBvc2l0aW9uIChpbmRleCAyKVxyXG4gKiBAcGFyYW0ge051bWJlcn0gbTAzIENvbXBvbmVudCBpbiBjb2x1bW4gMCwgcm93IDMgcG9zaXRpb24gKGluZGV4IDMpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTAgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggNClcclxuICogQHBhcmFtIHtOdW1iZXJ9IG0xMSBDb21wb25lbnQgaW4gY29sdW1uIDEsIHJvdyAxIHBvc2l0aW9uIChpbmRleCA1KVxyXG4gKiBAcGFyYW0ge051bWJlcn0gbTEyIENvbXBvbmVudCBpbiBjb2x1bW4gMSwgcm93IDIgcG9zaXRpb24gKGluZGV4IDYpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMTMgQ29tcG9uZW50IGluIGNvbHVtbiAxLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggNylcclxuICogQHBhcmFtIHtOdW1iZXJ9IG0yMCBDb21wb25lbnQgaW4gY29sdW1uIDIsIHJvdyAwIHBvc2l0aW9uIChpbmRleCA4KVxyXG4gKiBAcGFyYW0ge051bWJlcn0gbTIxIENvbXBvbmVudCBpbiBjb2x1bW4gMiwgcm93IDEgcG9zaXRpb24gKGluZGV4IDkpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjIgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggMTApXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMjMgQ29tcG9uZW50IGluIGNvbHVtbiAyLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggMTEpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzAgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMCBwb3NpdGlvbiAoaW5kZXggMTIpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzEgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMSBwb3NpdGlvbiAoaW5kZXggMTMpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzIgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMiBwb3NpdGlvbiAoaW5kZXggMTQpXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBtMzMgQ29tcG9uZW50IGluIGNvbHVtbiAzLCByb3cgMyBwb3NpdGlvbiAoaW5kZXggMTUpXHJcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXQob3V0LCBtMDAsIG0wMSwgbTAyLCBtMDMsIG0xMCwgbTExLCBtMTIsIG0xMywgbTIwLCBtMjEsIG0yMiwgbTIzLCBtMzAsIG0zMSwgbTMyLCBtMzMpIHtcbiAgb3V0WzBdID0gbTAwO1xuICBvdXRbMV0gPSBtMDE7XG4gIG91dFsyXSA9IG0wMjtcbiAgb3V0WzNdID0gbTAzO1xuICBvdXRbNF0gPSBtMTA7XG4gIG91dFs1XSA9IG0xMTtcbiAgb3V0WzZdID0gbTEyO1xuICBvdXRbN10gPSBtMTM7XG4gIG91dFs4XSA9IG0yMDtcbiAgb3V0WzldID0gbTIxO1xuICBvdXRbMTBdID0gbTIyO1xuICBvdXRbMTFdID0gbTIzO1xuICBvdXRbMTJdID0gbTMwO1xuICBvdXRbMTNdID0gbTMxO1xuICBvdXRbMTRdID0gbTMyO1xuICBvdXRbMTVdID0gbTMzO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFNldCBhIG1hdDQgdG8gdGhlIGlkZW50aXR5IG1hdHJpeFxyXG4gKlxyXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxyXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkob3V0KSB7XG4gIG91dFswXSA9IDE7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IDE7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IDA7XG4gIG91dFs5XSA9IDA7XG4gIG91dFsxMF0gPSAxO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IDA7XG4gIG91dFsxM10gPSAwO1xuICBvdXRbMTRdID0gMDtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogVHJhbnNwb3NlIHRoZSB2YWx1ZXMgb2YgYSBtYXQ0XHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBzb3VyY2UgbWF0cml4XHJcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc3Bvc2Uob3V0LCBhKSB7XG4gIC8vIElmIHdlIGFyZSB0cmFuc3Bvc2luZyBvdXJzZWx2ZXMgd2UgY2FuIHNraXAgYSBmZXcgc3RlcHMgYnV0IGhhdmUgdG8gY2FjaGUgc29tZSB2YWx1ZXNcbiAgaWYgKG91dCA9PT0gYSkge1xuICAgIHZhciBhMDEgPSBhWzFdLFxuICAgICAgICBhMDIgPSBhWzJdLFxuICAgICAgICBhMDMgPSBhWzNdO1xuICAgIHZhciBhMTIgPSBhWzZdLFxuICAgICAgICBhMTMgPSBhWzddO1xuICAgIHZhciBhMjMgPSBhWzExXTtcbiAgICBvdXRbMV0gPSBhWzRdO1xuICAgIG91dFsyXSA9IGFbOF07XG4gICAgb3V0WzNdID0gYVsxMl07XG4gICAgb3V0WzRdID0gYTAxO1xuICAgIG91dFs2XSA9IGFbOV07XG4gICAgb3V0WzddID0gYVsxM107XG4gICAgb3V0WzhdID0gYTAyO1xuICAgIG91dFs5XSA9IGExMjtcbiAgICBvdXRbMTFdID0gYVsxNF07XG4gICAgb3V0WzEyXSA9IGEwMztcbiAgICBvdXRbMTNdID0gYTEzO1xuICAgIG91dFsxNF0gPSBhMjM7XG4gIH0gZWxzZSB7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzRdO1xuICAgIG91dFsyXSA9IGFbOF07XG4gICAgb3V0WzNdID0gYVsxMl07XG4gICAgb3V0WzRdID0gYVsxXTtcbiAgICBvdXRbNV0gPSBhWzVdO1xuICAgIG91dFs2XSA9IGFbOV07XG4gICAgb3V0WzddID0gYVsxM107XG4gICAgb3V0WzhdID0gYVsyXTtcbiAgICBvdXRbOV0gPSBhWzZdO1xuICAgIG91dFsxMF0gPSBhWzEwXTtcbiAgICBvdXRbMTFdID0gYVsxNF07XG4gICAgb3V0WzEyXSA9IGFbM107XG4gICAgb3V0WzEzXSA9IGFbN107XG4gICAgb3V0WzE0XSA9IGFbMTFdO1xuICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogSW52ZXJ0cyBhIG1hdDRcclxuICpcclxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIHNvdXJjZSBtYXRyaXhcclxuICogQHJldHVybnMge21hdDR9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGludmVydChvdXQsIGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGEwMyA9IGFbM107XG4gIHZhciBhMTAgPSBhWzRdLFxuICAgICAgYTExID0gYVs1XSxcbiAgICAgIGExMiA9IGFbNl0sXG4gICAgICBhMTMgPSBhWzddO1xuICB2YXIgYTIwID0gYVs4XSxcbiAgICAgIGEyMSA9IGFbOV0sXG4gICAgICBhMjIgPSBhWzEwXSxcbiAgICAgIGEyMyA9IGFbMTFdO1xuICB2YXIgYTMwID0gYVsxMl0sXG4gICAgICBhMzEgPSBhWzEzXSxcbiAgICAgIGEzMiA9IGFbMTRdLFxuICAgICAgYTMzID0gYVsxNV07XG4gIHZhciBiMDAgPSBhMDAgKiBhMTEgLSBhMDEgKiBhMTA7XG4gIHZhciBiMDEgPSBhMDAgKiBhMTIgLSBhMDIgKiBhMTA7XG4gIHZhciBiMDIgPSBhMDAgKiBhMTMgLSBhMDMgKiBhMTA7XG4gIHZhciBiMDMgPSBhMDEgKiBhMTIgLSBhMDIgKiBhMTE7XG4gIHZhciBiMDQgPSBhMDEgKiBhMTMgLSBhMDMgKiBhMTE7XG4gIHZhciBiMDUgPSBhMDIgKiBhMTMgLSBhMDMgKiBhMTI7XG4gIHZhciBiMDYgPSBhMjAgKiBhMzEgLSBhMjEgKiBhMzA7XG4gIHZhciBiMDcgPSBhMjAgKiBhMzIgLSBhMjIgKiBhMzA7XG4gIHZhciBiMDggPSBhMjAgKiBhMzMgLSBhMjMgKiBhMzA7XG4gIHZhciBiMDkgPSBhMjEgKiBhMzIgLSBhMjIgKiBhMzE7XG4gIHZhciBiMTAgPSBhMjEgKiBhMzMgLSBhMjMgKiBhMzE7XG4gIHZhciBiMTEgPSBhMjIgKiBhMzMgLSBhMjMgKiBhMzI7IC8vIENhbGN1bGF0ZSB0aGUgZGV0ZXJtaW5hbnRcblxuICB2YXIgZGV0ID0gYjAwICogYjExIC0gYjAxICogYjEwICsgYjAyICogYjA5ICsgYjAzICogYjA4IC0gYjA0ICogYjA3ICsgYjA1ICogYjA2O1xuXG4gIGlmICghZGV0KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBkZXQgPSAxLjAgLyBkZXQ7XG4gIG91dFswXSA9IChhMTEgKiBiMTEgLSBhMTIgKiBiMTAgKyBhMTMgKiBiMDkpICogZGV0O1xuICBvdXRbMV0gPSAoYTAyICogYjEwIC0gYTAxICogYjExIC0gYTAzICogYjA5KSAqIGRldDtcbiAgb3V0WzJdID0gKGEzMSAqIGIwNSAtIGEzMiAqIGIwNCArIGEzMyAqIGIwMykgKiBkZXQ7XG4gIG91dFszXSA9IChhMjIgKiBiMDQgLSBhMjEgKiBiMDUgLSBhMjMgKiBiMDMpICogZGV0O1xuICBvdXRbNF0gPSAoYTEyICogYjA4IC0gYTEwICogYjExIC0gYTEzICogYjA3KSAqIGRldDtcbiAgb3V0WzVdID0gKGEwMCAqIGIxMSAtIGEwMiAqIGIwOCArIGEwMyAqIGIwNykgKiBkZXQ7XG4gIG91dFs2XSA9IChhMzIgKiBiMDIgLSBhMzAgKiBiMDUgLSBhMzMgKiBiMDEpICogZGV0O1xuICBvdXRbN10gPSAoYTIwICogYjA1IC0gYTIyICogYjAyICsgYTIzICogYjAxKSAqIGRldDtcbiAgb3V0WzhdID0gKGExMCAqIGIxMCAtIGExMSAqIGIwOCArIGExMyAqIGIwNikgKiBkZXQ7XG4gIG91dFs5XSA9IChhMDEgKiBiMDggLSBhMDAgKiBiMTAgLSBhMDMgKiBiMDYpICogZGV0O1xuICBvdXRbMTBdID0gKGEzMCAqIGIwNCAtIGEzMSAqIGIwMiArIGEzMyAqIGIwMCkgKiBkZXQ7XG4gIG91dFsxMV0gPSAoYTIxICogYjAyIC0gYTIwICogYjA0IC0gYTIzICogYjAwKSAqIGRldDtcbiAgb3V0WzEyXSA9IChhMTEgKiBiMDcgLSBhMTAgKiBiMDkgLSBhMTIgKiBiMDYpICogZGV0O1xuICBvdXRbMTNdID0gKGEwMCAqIGIwOSAtIGEwMSAqIGIwNyArIGEwMiAqIGIwNikgKiBkZXQ7XG4gIG91dFsxNF0gPSAoYTMxICogYjAxIC0gYTMwICogYjAzIC0gYTMyICogYjAwKSAqIGRldDtcbiAgb3V0WzE1XSA9IChhMjAgKiBiMDMgLSBhMjEgKiBiMDEgKyBhMjIgKiBiMDApICogZGV0O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgdGhlIGFkanVnYXRlIG9mIGEgbWF0NFxyXG4gKlxyXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgc291cmNlIG1hdHJpeFxyXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRqb2ludChvdXQsIGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGEwMyA9IGFbM107XG4gIHZhciBhMTAgPSBhWzRdLFxuICAgICAgYTExID0gYVs1XSxcbiAgICAgIGExMiA9IGFbNl0sXG4gICAgICBhMTMgPSBhWzddO1xuICB2YXIgYTIwID0gYVs4XSxcbiAgICAgIGEyMSA9IGFbOV0sXG4gICAgICBhMjIgPSBhWzEwXSxcbiAgICAgIGEyMyA9IGFbMTFdO1xuICB2YXIgYTMwID0gYVsxMl0sXG4gICAgICBhMzEgPSBhWzEzXSxcbiAgICAgIGEzMiA9IGFbMTRdLFxuICAgICAgYTMzID0gYVsxNV07XG4gIG91dFswXSA9IGExMSAqIChhMjIgKiBhMzMgLSBhMjMgKiBhMzIpIC0gYTIxICogKGExMiAqIGEzMyAtIGExMyAqIGEzMikgKyBhMzEgKiAoYTEyICogYTIzIC0gYTEzICogYTIyKTtcbiAgb3V0WzFdID0gLShhMDEgKiAoYTIyICogYTMzIC0gYTIzICogYTMyKSAtIGEyMSAqIChhMDIgKiBhMzMgLSBhMDMgKiBhMzIpICsgYTMxICogKGEwMiAqIGEyMyAtIGEwMyAqIGEyMikpO1xuICBvdXRbMl0gPSBhMDEgKiAoYTEyICogYTMzIC0gYTEzICogYTMyKSAtIGExMSAqIChhMDIgKiBhMzMgLSBhMDMgKiBhMzIpICsgYTMxICogKGEwMiAqIGExMyAtIGEwMyAqIGExMik7XG4gIG91dFszXSA9IC0oYTAxICogKGExMiAqIGEyMyAtIGExMyAqIGEyMikgLSBhMTEgKiAoYTAyICogYTIzIC0gYTAzICogYTIyKSArIGEyMSAqIChhMDIgKiBhMTMgLSBhMDMgKiBhMTIpKTtcbiAgb3V0WzRdID0gLShhMTAgKiAoYTIyICogYTMzIC0gYTIzICogYTMyKSAtIGEyMCAqIChhMTIgKiBhMzMgLSBhMTMgKiBhMzIpICsgYTMwICogKGExMiAqIGEyMyAtIGExMyAqIGEyMikpO1xuICBvdXRbNV0gPSBhMDAgKiAoYTIyICogYTMzIC0gYTIzICogYTMyKSAtIGEyMCAqIChhMDIgKiBhMzMgLSBhMDMgKiBhMzIpICsgYTMwICogKGEwMiAqIGEyMyAtIGEwMyAqIGEyMik7XG4gIG91dFs2XSA9IC0oYTAwICogKGExMiAqIGEzMyAtIGExMyAqIGEzMikgLSBhMTAgKiAoYTAyICogYTMzIC0gYTAzICogYTMyKSArIGEzMCAqIChhMDIgKiBhMTMgLSBhMDMgKiBhMTIpKTtcbiAgb3V0WzddID0gYTAwICogKGExMiAqIGEyMyAtIGExMyAqIGEyMikgLSBhMTAgKiAoYTAyICogYTIzIC0gYTAzICogYTIyKSArIGEyMCAqIChhMDIgKiBhMTMgLSBhMDMgKiBhMTIpO1xuICBvdXRbOF0gPSBhMTAgKiAoYTIxICogYTMzIC0gYTIzICogYTMxKSAtIGEyMCAqIChhMTEgKiBhMzMgLSBhMTMgKiBhMzEpICsgYTMwICogKGExMSAqIGEyMyAtIGExMyAqIGEyMSk7XG4gIG91dFs5XSA9IC0oYTAwICogKGEyMSAqIGEzMyAtIGEyMyAqIGEzMSkgLSBhMjAgKiAoYTAxICogYTMzIC0gYTAzICogYTMxKSArIGEzMCAqIChhMDEgKiBhMjMgLSBhMDMgKiBhMjEpKTtcbiAgb3V0WzEwXSA9IGEwMCAqIChhMTEgKiBhMzMgLSBhMTMgKiBhMzEpIC0gYTEwICogKGEwMSAqIGEzMyAtIGEwMyAqIGEzMSkgKyBhMzAgKiAoYTAxICogYTEzIC0gYTAzICogYTExKTtcbiAgb3V0WzExXSA9IC0oYTAwICogKGExMSAqIGEyMyAtIGExMyAqIGEyMSkgLSBhMTAgKiAoYTAxICogYTIzIC0gYTAzICogYTIxKSArIGEyMCAqIChhMDEgKiBhMTMgLSBhMDMgKiBhMTEpKTtcbiAgb3V0WzEyXSA9IC0oYTEwICogKGEyMSAqIGEzMiAtIGEyMiAqIGEzMSkgLSBhMjAgKiAoYTExICogYTMyIC0gYTEyICogYTMxKSArIGEzMCAqIChhMTEgKiBhMjIgLSBhMTIgKiBhMjEpKTtcbiAgb3V0WzEzXSA9IGEwMCAqIChhMjEgKiBhMzIgLSBhMjIgKiBhMzEpIC0gYTIwICogKGEwMSAqIGEzMiAtIGEwMiAqIGEzMSkgKyBhMzAgKiAoYTAxICogYTIyIC0gYTAyICogYTIxKTtcbiAgb3V0WzE0XSA9IC0oYTAwICogKGExMSAqIGEzMiAtIGExMiAqIGEzMSkgLSBhMTAgKiAoYTAxICogYTMyIC0gYTAyICogYTMxKSArIGEzMCAqIChhMDEgKiBhMTIgLSBhMDIgKiBhMTEpKTtcbiAgb3V0WzE1XSA9IGEwMCAqIChhMTEgKiBhMjIgLSBhMTIgKiBhMjEpIC0gYTEwICogKGEwMSAqIGEyMiAtIGEwMiAqIGEyMSkgKyBhMjAgKiAoYTAxICogYTEyIC0gYTAyICogYTExKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDYWxjdWxhdGVzIHRoZSBkZXRlcm1pbmFudCBvZiBhIG1hdDRcclxuICpcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIHNvdXJjZSBtYXRyaXhcclxuICogQHJldHVybnMge051bWJlcn0gZGV0ZXJtaW5hbnQgb2YgYVxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluYW50KGEpIHtcbiAgdmFyIGEwMCA9IGFbMF0sXG4gICAgICBhMDEgPSBhWzFdLFxuICAgICAgYTAyID0gYVsyXSxcbiAgICAgIGEwMyA9IGFbM107XG4gIHZhciBhMTAgPSBhWzRdLFxuICAgICAgYTExID0gYVs1XSxcbiAgICAgIGExMiA9IGFbNl0sXG4gICAgICBhMTMgPSBhWzddO1xuICB2YXIgYTIwID0gYVs4XSxcbiAgICAgIGEyMSA9IGFbOV0sXG4gICAgICBhMjIgPSBhWzEwXSxcbiAgICAgIGEyMyA9IGFbMTFdO1xuICB2YXIgYTMwID0gYVsxMl0sXG4gICAgICBhMzEgPSBhWzEzXSxcbiAgICAgIGEzMiA9IGFbMTRdLFxuICAgICAgYTMzID0gYVsxNV07XG4gIHZhciBiMDAgPSBhMDAgKiBhMTEgLSBhMDEgKiBhMTA7XG4gIHZhciBiMDEgPSBhMDAgKiBhMTIgLSBhMDIgKiBhMTA7XG4gIHZhciBiMDIgPSBhMDAgKiBhMTMgLSBhMDMgKiBhMTA7XG4gIHZhciBiMDMgPSBhMDEgKiBhMTIgLSBhMDIgKiBhMTE7XG4gIHZhciBiMDQgPSBhMDEgKiBhMTMgLSBhMDMgKiBhMTE7XG4gIHZhciBiMDUgPSBhMDIgKiBhMTMgLSBhMDMgKiBhMTI7XG4gIHZhciBiMDYgPSBhMjAgKiBhMzEgLSBhMjEgKiBhMzA7XG4gIHZhciBiMDcgPSBhMjAgKiBhMzIgLSBhMjIgKiBhMzA7XG4gIHZhciBiMDggPSBhMjAgKiBhMzMgLSBhMjMgKiBhMzA7XG4gIHZhciBiMDkgPSBhMjEgKiBhMzIgLSBhMjIgKiBhMzE7XG4gIHZhciBiMTAgPSBhMjEgKiBhMzMgLSBhMjMgKiBhMzE7XG4gIHZhciBiMTEgPSBhMjIgKiBhMzMgLSBhMjMgKiBhMzI7IC8vIENhbGN1bGF0ZSB0aGUgZGV0ZXJtaW5hbnRcblxuICByZXR1cm4gYjAwICogYjExIC0gYjAxICogYjEwICsgYjAyICogYjA5ICsgYjAzICogYjA4IC0gYjA0ICogYjA3ICsgYjA1ICogYjA2O1xufVxuLyoqXHJcbiAqIE11bHRpcGxpZXMgdHdvIG1hdDRzXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxyXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkob3V0LCBhLCBiKSB7XG4gIHZhciBhMDAgPSBhWzBdLFxuICAgICAgYTAxID0gYVsxXSxcbiAgICAgIGEwMiA9IGFbMl0sXG4gICAgICBhMDMgPSBhWzNdO1xuICB2YXIgYTEwID0gYVs0XSxcbiAgICAgIGExMSA9IGFbNV0sXG4gICAgICBhMTIgPSBhWzZdLFxuICAgICAgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF0sXG4gICAgICBhMjEgPSBhWzldLFxuICAgICAgYTIyID0gYVsxMF0sXG4gICAgICBhMjMgPSBhWzExXTtcbiAgdmFyIGEzMCA9IGFbMTJdLFxuICAgICAgYTMxID0gYVsxM10sXG4gICAgICBhMzIgPSBhWzE0XSxcbiAgICAgIGEzMyA9IGFbMTVdOyAvLyBDYWNoZSBvbmx5IHRoZSBjdXJyZW50IGxpbmUgb2YgdGhlIHNlY29uZCBtYXRyaXhcblxuICB2YXIgYjAgPSBiWzBdLFxuICAgICAgYjEgPSBiWzFdLFxuICAgICAgYjIgPSBiWzJdLFxuICAgICAgYjMgPSBiWzNdO1xuICBvdXRbMF0gPSBiMCAqIGEwMCArIGIxICogYTEwICsgYjIgKiBhMjAgKyBiMyAqIGEzMDtcbiAgb3V0WzFdID0gYjAgKiBhMDEgKyBiMSAqIGExMSArIGIyICogYTIxICsgYjMgKiBhMzE7XG4gIG91dFsyXSA9IGIwICogYTAyICsgYjEgKiBhMTIgKyBiMiAqIGEyMiArIGIzICogYTMyO1xuICBvdXRbM10gPSBiMCAqIGEwMyArIGIxICogYTEzICsgYjIgKiBhMjMgKyBiMyAqIGEzMztcbiAgYjAgPSBiWzRdO1xuICBiMSA9IGJbNV07XG4gIGIyID0gYls2XTtcbiAgYjMgPSBiWzddO1xuICBvdXRbNF0gPSBiMCAqIGEwMCArIGIxICogYTEwICsgYjIgKiBhMjAgKyBiMyAqIGEzMDtcbiAgb3V0WzVdID0gYjAgKiBhMDEgKyBiMSAqIGExMSArIGIyICogYTIxICsgYjMgKiBhMzE7XG4gIG91dFs2XSA9IGIwICogYTAyICsgYjEgKiBhMTIgKyBiMiAqIGEyMiArIGIzICogYTMyO1xuICBvdXRbN10gPSBiMCAqIGEwMyArIGIxICogYTEzICsgYjIgKiBhMjMgKyBiMyAqIGEzMztcbiAgYjAgPSBiWzhdO1xuICBiMSA9IGJbOV07XG4gIGIyID0gYlsxMF07XG4gIGIzID0gYlsxMV07XG4gIG91dFs4XSA9IGIwICogYTAwICsgYjEgKiBhMTAgKyBiMiAqIGEyMCArIGIzICogYTMwO1xuICBvdXRbOV0gPSBiMCAqIGEwMSArIGIxICogYTExICsgYjIgKiBhMjEgKyBiMyAqIGEzMTtcbiAgb3V0WzEwXSA9IGIwICogYTAyICsgYjEgKiBhMTIgKyBiMiAqIGEyMiArIGIzICogYTMyO1xuICBvdXRbMTFdID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7XG4gIGIwID0gYlsxMl07XG4gIGIxID0gYlsxM107XG4gIGIyID0gYlsxNF07XG4gIGIzID0gYlsxNV07XG4gIG91dFsxMl0gPSBiMCAqIGEwMCArIGIxICogYTEwICsgYjIgKiBhMjAgKyBiMyAqIGEzMDtcbiAgb3V0WzEzXSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxO1xuICBvdXRbMTRdID0gYjAgKiBhMDIgKyBiMSAqIGExMiArIGIyICogYTIyICsgYjMgKiBhMzI7XG4gIG91dFsxNV0gPSBiMCAqIGEwMyArIGIxICogYTEzICsgYjIgKiBhMjMgKyBiMyAqIGEzMztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBUcmFuc2xhdGUgYSBtYXQ0IGJ5IHRoZSBnaXZlbiB2ZWN0b3JcclxuICpcclxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byB0cmFuc2xhdGVcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgdmVjdG9yIHRvIHRyYW5zbGF0ZSBieVxyXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKG91dCwgYSwgdikge1xuICB2YXIgeCA9IHZbMF0sXG4gICAgICB5ID0gdlsxXSxcbiAgICAgIHogPSB2WzJdO1xuICB2YXIgYTAwLCBhMDEsIGEwMiwgYTAzO1xuICB2YXIgYTEwLCBhMTEsIGExMiwgYTEzO1xuICB2YXIgYTIwLCBhMjEsIGEyMiwgYTIzO1xuXG4gIGlmIChhID09PSBvdXQpIHtcbiAgICBvdXRbMTJdID0gYVswXSAqIHggKyBhWzRdICogeSArIGFbOF0gKiB6ICsgYVsxMl07XG4gICAgb3V0WzEzXSA9IGFbMV0gKiB4ICsgYVs1XSAqIHkgKyBhWzldICogeiArIGFbMTNdO1xuICAgIG91dFsxNF0gPSBhWzJdICogeCArIGFbNl0gKiB5ICsgYVsxMF0gKiB6ICsgYVsxNF07XG4gICAgb3V0WzE1XSA9IGFbM10gKiB4ICsgYVs3XSAqIHkgKyBhWzExXSAqIHogKyBhWzE1XTtcbiAgfSBlbHNlIHtcbiAgICBhMDAgPSBhWzBdO1xuICAgIGEwMSA9IGFbMV07XG4gICAgYTAyID0gYVsyXTtcbiAgICBhMDMgPSBhWzNdO1xuICAgIGExMCA9IGFbNF07XG4gICAgYTExID0gYVs1XTtcbiAgICBhMTIgPSBhWzZdO1xuICAgIGExMyA9IGFbN107XG4gICAgYTIwID0gYVs4XTtcbiAgICBhMjEgPSBhWzldO1xuICAgIGEyMiA9IGFbMTBdO1xuICAgIGEyMyA9IGFbMTFdO1xuICAgIG91dFswXSA9IGEwMDtcbiAgICBvdXRbMV0gPSBhMDE7XG4gICAgb3V0WzJdID0gYTAyO1xuICAgIG91dFszXSA9IGEwMztcbiAgICBvdXRbNF0gPSBhMTA7XG4gICAgb3V0WzVdID0gYTExO1xuICAgIG91dFs2XSA9IGExMjtcbiAgICBvdXRbN10gPSBhMTM7XG4gICAgb3V0WzhdID0gYTIwO1xuICAgIG91dFs5XSA9IGEyMTtcbiAgICBvdXRbMTBdID0gYTIyO1xuICAgIG91dFsxMV0gPSBhMjM7XG4gICAgb3V0WzEyXSA9IGEwMCAqIHggKyBhMTAgKiB5ICsgYTIwICogeiArIGFbMTJdO1xuICAgIG91dFsxM10gPSBhMDEgKiB4ICsgYTExICogeSArIGEyMSAqIHogKyBhWzEzXTtcbiAgICBvdXRbMTRdID0gYTAyICogeCArIGExMiAqIHkgKyBhMjIgKiB6ICsgYVsxNF07XG4gICAgb3V0WzE1XSA9IGEwMyAqIHggKyBhMTMgKiB5ICsgYTIzICogeiArIGFbMTVdO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBTY2FsZXMgdGhlIG1hdDQgYnkgdGhlIGRpbWVuc2lvbnMgaW4gdGhlIGdpdmVuIHZlYzMgbm90IHVzaW5nIHZlY3Rvcml6YXRpb25cclxuICpcclxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byBzY2FsZVxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdiB0aGUgdmVjMyB0byBzY2FsZSB0aGUgbWF0cml4IGJ5XHJcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcclxuICoqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUob3V0LCBhLCB2KSB7XG4gIHZhciB4ID0gdlswXSxcbiAgICAgIHkgPSB2WzFdLFxuICAgICAgeiA9IHZbMl07XG4gIG91dFswXSA9IGFbMF0gKiB4O1xuICBvdXRbMV0gPSBhWzFdICogeDtcbiAgb3V0WzJdID0gYVsyXSAqIHg7XG4gIG91dFszXSA9IGFbM10gKiB4O1xuICBvdXRbNF0gPSBhWzRdICogeTtcbiAgb3V0WzVdID0gYVs1XSAqIHk7XG4gIG91dFs2XSA9IGFbNl0gKiB5O1xuICBvdXRbN10gPSBhWzddICogeTtcbiAgb3V0WzhdID0gYVs4XSAqIHo7XG4gIG91dFs5XSA9IGFbOV0gKiB6O1xuICBvdXRbMTBdID0gYVsxMF0gKiB6O1xuICBvdXRbMTFdID0gYVsxMV0gKiB6O1xuICBvdXRbMTJdID0gYVsxMl07XG4gIG91dFsxM10gPSBhWzEzXTtcbiAgb3V0WzE0XSA9IGFbMTRdO1xuICBvdXRbMTVdID0gYVsxNV07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogUm90YXRlcyBhIG1hdDQgYnkgdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgZ2l2ZW4gYXhpc1xyXG4gKlxyXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxyXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYXhpcyB0aGUgYXhpcyB0byByb3RhdGUgYXJvdW5kXHJcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGUob3V0LCBhLCByYWQsIGF4aXMpIHtcbiAgdmFyIHggPSBheGlzWzBdLFxuICAgICAgeSA9IGF4aXNbMV0sXG4gICAgICB6ID0gYXhpc1syXTtcbiAgdmFyIGxlbiA9IE1hdGguaHlwb3QoeCwgeSwgeik7XG4gIHZhciBzLCBjLCB0O1xuICB2YXIgYTAwLCBhMDEsIGEwMiwgYTAzO1xuICB2YXIgYTEwLCBhMTEsIGExMiwgYTEzO1xuICB2YXIgYTIwLCBhMjEsIGEyMiwgYTIzO1xuICB2YXIgYjAwLCBiMDEsIGIwMjtcbiAgdmFyIGIxMCwgYjExLCBiMTI7XG4gIHZhciBiMjAsIGIyMSwgYjIyO1xuXG4gIGlmIChsZW4gPCBnbE1hdHJpeC5FUFNJTE9OKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBsZW4gPSAxIC8gbGVuO1xuICB4ICo9IGxlbjtcbiAgeSAqPSBsZW47XG4gIHogKj0gbGVuO1xuICBzID0gTWF0aC5zaW4ocmFkKTtcbiAgYyA9IE1hdGguY29zKHJhZCk7XG4gIHQgPSAxIC0gYztcbiAgYTAwID0gYVswXTtcbiAgYTAxID0gYVsxXTtcbiAgYTAyID0gYVsyXTtcbiAgYTAzID0gYVszXTtcbiAgYTEwID0gYVs0XTtcbiAgYTExID0gYVs1XTtcbiAgYTEyID0gYVs2XTtcbiAgYTEzID0gYVs3XTtcbiAgYTIwID0gYVs4XTtcbiAgYTIxID0gYVs5XTtcbiAgYTIyID0gYVsxMF07XG4gIGEyMyA9IGFbMTFdOyAvLyBDb25zdHJ1Y3QgdGhlIGVsZW1lbnRzIG9mIHRoZSByb3RhdGlvbiBtYXRyaXhcblxuICBiMDAgPSB4ICogeCAqIHQgKyBjO1xuICBiMDEgPSB5ICogeCAqIHQgKyB6ICogcztcbiAgYjAyID0geiAqIHggKiB0IC0geSAqIHM7XG4gIGIxMCA9IHggKiB5ICogdCAtIHogKiBzO1xuICBiMTEgPSB5ICogeSAqIHQgKyBjO1xuICBiMTIgPSB6ICogeSAqIHQgKyB4ICogcztcbiAgYjIwID0geCAqIHogKiB0ICsgeSAqIHM7XG4gIGIyMSA9IHkgKiB6ICogdCAtIHggKiBzO1xuICBiMjIgPSB6ICogeiAqIHQgKyBjOyAvLyBQZXJmb3JtIHJvdGF0aW9uLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuXG4gIG91dFswXSA9IGEwMCAqIGIwMCArIGExMCAqIGIwMSArIGEyMCAqIGIwMjtcbiAgb3V0WzFdID0gYTAxICogYjAwICsgYTExICogYjAxICsgYTIxICogYjAyO1xuICBvdXRbMl0gPSBhMDIgKiBiMDAgKyBhMTIgKiBiMDEgKyBhMjIgKiBiMDI7XG4gIG91dFszXSA9IGEwMyAqIGIwMCArIGExMyAqIGIwMSArIGEyMyAqIGIwMjtcbiAgb3V0WzRdID0gYTAwICogYjEwICsgYTEwICogYjExICsgYTIwICogYjEyO1xuICBvdXRbNV0gPSBhMDEgKiBiMTAgKyBhMTEgKiBiMTEgKyBhMjEgKiBiMTI7XG4gIG91dFs2XSA9IGEwMiAqIGIxMCArIGExMiAqIGIxMSArIGEyMiAqIGIxMjtcbiAgb3V0WzddID0gYTAzICogYjEwICsgYTEzICogYjExICsgYTIzICogYjEyO1xuICBvdXRbOF0gPSBhMDAgKiBiMjAgKyBhMTAgKiBiMjEgKyBhMjAgKiBiMjI7XG4gIG91dFs5XSA9IGEwMSAqIGIyMCArIGExMSAqIGIyMSArIGEyMSAqIGIyMjtcbiAgb3V0WzEwXSA9IGEwMiAqIGIyMCArIGExMiAqIGIyMSArIGEyMiAqIGIyMjtcbiAgb3V0WzExXSA9IGEwMyAqIGIyMCArIGExMyAqIGIyMSArIGEyMyAqIGIyMjtcblxuICBpZiAoYSAhPT0gb3V0KSB7XG4gICAgLy8gSWYgdGhlIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gZGlmZmVyLCBjb3B5IHRoZSB1bmNoYW5nZWQgbGFzdCByb3dcbiAgICBvdXRbMTJdID0gYVsxMl07XG4gICAgb3V0WzEzXSA9IGFbMTNdO1xuICAgIG91dFsxNF0gPSBhWzE0XTtcbiAgICBvdXRbMTVdID0gYVsxNV07XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFJvdGF0ZXMgYSBtYXRyaXggYnkgdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWCBheGlzXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XHJcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVYKG91dCwgYSwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGMgPSBNYXRoLmNvcyhyYWQpO1xuICB2YXIgYTEwID0gYVs0XTtcbiAgdmFyIGExMSA9IGFbNV07XG4gIHZhciBhMTIgPSBhWzZdO1xuICB2YXIgYTEzID0gYVs3XTtcbiAgdmFyIGEyMCA9IGFbOF07XG4gIHZhciBhMjEgPSBhWzldO1xuICB2YXIgYTIyID0gYVsxMF07XG4gIHZhciBhMjMgPSBhWzExXTtcblxuICBpZiAoYSAhPT0gb3V0KSB7XG4gICAgLy8gSWYgdGhlIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gZGlmZmVyLCBjb3B5IHRoZSB1bmNoYW5nZWQgcm93c1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVsxXTtcbiAgICBvdXRbMl0gPSBhWzJdO1xuICAgIG91dFszXSA9IGFbM107XG4gICAgb3V0WzEyXSA9IGFbMTJdO1xuICAgIG91dFsxM10gPSBhWzEzXTtcbiAgICBvdXRbMTRdID0gYVsxNF07XG4gICAgb3V0WzE1XSA9IGFbMTVdO1xuICB9IC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuXG4gIG91dFs0XSA9IGExMCAqIGMgKyBhMjAgKiBzO1xuICBvdXRbNV0gPSBhMTEgKiBjICsgYTIxICogcztcbiAgb3V0WzZdID0gYTEyICogYyArIGEyMiAqIHM7XG4gIG91dFs3XSA9IGExMyAqIGMgKyBhMjMgKiBzO1xuICBvdXRbOF0gPSBhMjAgKiBjIC0gYTEwICogcztcbiAgb3V0WzldID0gYTIxICogYyAtIGExMSAqIHM7XG4gIG91dFsxMF0gPSBhMjIgKiBjIC0gYTEyICogcztcbiAgb3V0WzExXSA9IGEyMyAqIGMgLSBhMTMgKiBzO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFJvdGF0ZXMgYSBtYXRyaXggYnkgdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWSBheGlzXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XHJcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVZKG91dCwgYSwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGMgPSBNYXRoLmNvcyhyYWQpO1xuICB2YXIgYTAwID0gYVswXTtcbiAgdmFyIGEwMSA9IGFbMV07XG4gIHZhciBhMDIgPSBhWzJdO1xuICB2YXIgYTAzID0gYVszXTtcbiAgdmFyIGEyMCA9IGFbOF07XG4gIHZhciBhMjEgPSBhWzldO1xuICB2YXIgYTIyID0gYVsxMF07XG4gIHZhciBhMjMgPSBhWzExXTtcblxuICBpZiAoYSAhPT0gb3V0KSB7XG4gICAgLy8gSWYgdGhlIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gZGlmZmVyLCBjb3B5IHRoZSB1bmNoYW5nZWQgcm93c1xuICAgIG91dFs0XSA9IGFbNF07XG4gICAgb3V0WzVdID0gYVs1XTtcbiAgICBvdXRbNl0gPSBhWzZdO1xuICAgIG91dFs3XSA9IGFbN107XG4gICAgb3V0WzEyXSA9IGFbMTJdO1xuICAgIG91dFsxM10gPSBhWzEzXTtcbiAgICBvdXRbMTRdID0gYVsxNF07XG4gICAgb3V0WzE1XSA9IGFbMTVdO1xuICB9IC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuXG4gIG91dFswXSA9IGEwMCAqIGMgLSBhMjAgKiBzO1xuICBvdXRbMV0gPSBhMDEgKiBjIC0gYTIxICogcztcbiAgb3V0WzJdID0gYTAyICogYyAtIGEyMiAqIHM7XG4gIG91dFszXSA9IGEwMyAqIGMgLSBhMjMgKiBzO1xuICBvdXRbOF0gPSBhMDAgKiBzICsgYTIwICogYztcbiAgb3V0WzldID0gYTAxICogcyArIGEyMSAqIGM7XG4gIG91dFsxMF0gPSBhMDIgKiBzICsgYTIyICogYztcbiAgb3V0WzExXSA9IGEwMyAqIHMgKyBhMjMgKiBjO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFJvdGF0ZXMgYSBtYXRyaXggYnkgdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWiBheGlzXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XHJcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVaKG91dCwgYSwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGMgPSBNYXRoLmNvcyhyYWQpO1xuICB2YXIgYTAwID0gYVswXTtcbiAgdmFyIGEwMSA9IGFbMV07XG4gIHZhciBhMDIgPSBhWzJdO1xuICB2YXIgYTAzID0gYVszXTtcbiAgdmFyIGExMCA9IGFbNF07XG4gIHZhciBhMTEgPSBhWzVdO1xuICB2YXIgYTEyID0gYVs2XTtcbiAgdmFyIGExMyA9IGFbN107XG5cbiAgaWYgKGEgIT09IG91dCkge1xuICAgIC8vIElmIHRoZSBzb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGRpZmZlciwgY29weSB0aGUgdW5jaGFuZ2VkIGxhc3Qgcm93XG4gICAgb3V0WzhdID0gYVs4XTtcbiAgICBvdXRbOV0gPSBhWzldO1xuICAgIG91dFsxMF0gPSBhWzEwXTtcbiAgICBvdXRbMTFdID0gYVsxMV07XG4gICAgb3V0WzEyXSA9IGFbMTJdO1xuICAgIG91dFsxM10gPSBhWzEzXTtcbiAgICBvdXRbMTRdID0gYVsxNF07XG4gICAgb3V0WzE1XSA9IGFbMTVdO1xuICB9IC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuXG4gIG91dFswXSA9IGEwMCAqIGMgKyBhMTAgKiBzO1xuICBvdXRbMV0gPSBhMDEgKiBjICsgYTExICogcztcbiAgb3V0WzJdID0gYTAyICogYyArIGExMiAqIHM7XG4gIG91dFszXSA9IGEwMyAqIGMgKyBhMTMgKiBzO1xuICBvdXRbNF0gPSBhMTAgKiBjIC0gYTAwICogcztcbiAgb3V0WzVdID0gYTExICogYyAtIGEwMSAqIHM7XG4gIG91dFs2XSA9IGExMiAqIGMgLSBhMDIgKiBzO1xuICBvdXRbN10gPSBhMTMgKiBjIC0gYTAzICogcztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSB2ZWN0b3IgdHJhbnNsYXRpb25cclxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XHJcbiAqXHJcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xyXG4gKiAgICAgbWF0NC50cmFuc2xhdGUoZGVzdCwgZGVzdCwgdmVjKTtcclxuICpcclxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdiBUcmFuc2xhdGlvbiB2ZWN0b3JcclxuICogQHJldHVybnMge21hdDR9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21UcmFuc2xhdGlvbihvdXQsIHYpIHtcbiAgb3V0WzBdID0gMTtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gMTtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IDE7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gdlswXTtcbiAgb3V0WzEzXSA9IHZbMV07XG4gIG91dFsxNF0gPSB2WzJdO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSB2ZWN0b3Igc2NhbGluZ1xyXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcclxuICpcclxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XHJcbiAqICAgICBtYXQ0LnNjYWxlKGRlc3QsIGRlc3QsIHZlYyk7XHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgU2NhbGluZyB2ZWN0b3JcclxuICogQHJldHVybnMge21hdDR9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21TY2FsaW5nKG91dCwgdikge1xuICBvdXRbMF0gPSB2WzBdO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSB2WzFdO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gdlsyXTtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIGdpdmVuIGFuZ2xlIGFyb3VuZCBhIGdpdmVuIGF4aXNcclxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XHJcbiAqXHJcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xyXG4gKiAgICAgbWF0NC5yb3RhdGUoZGVzdCwgZGVzdCwgcmFkLCBheGlzKTtcclxuICpcclxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxyXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYXhpcyB0aGUgYXhpcyB0byByb3RhdGUgYXJvdW5kXHJcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUm90YXRpb24ob3V0LCByYWQsIGF4aXMpIHtcbiAgdmFyIHggPSBheGlzWzBdLFxuICAgICAgeSA9IGF4aXNbMV0sXG4gICAgICB6ID0gYXhpc1syXTtcbiAgdmFyIGxlbiA9IE1hdGguaHlwb3QoeCwgeSwgeik7XG4gIHZhciBzLCBjLCB0O1xuXG4gIGlmIChsZW4gPCBnbE1hdHJpeC5FUFNJTE9OKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBsZW4gPSAxIC8gbGVuO1xuICB4ICo9IGxlbjtcbiAgeSAqPSBsZW47XG4gIHogKj0gbGVuO1xuICBzID0gTWF0aC5zaW4ocmFkKTtcbiAgYyA9IE1hdGguY29zKHJhZCk7XG4gIHQgPSAxIC0gYzsgLy8gUGVyZm9ybSByb3RhdGlvbi1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuICBvdXRbMF0gPSB4ICogeCAqIHQgKyBjO1xuICBvdXRbMV0gPSB5ICogeCAqIHQgKyB6ICogcztcbiAgb3V0WzJdID0geiAqIHggKiB0IC0geSAqIHM7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHggKiB5ICogdCAtIHogKiBzO1xuICBvdXRbNV0gPSB5ICogeSAqIHQgKyBjO1xuICBvdXRbNl0gPSB6ICogeSAqIHQgKyB4ICogcztcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0geCAqIHogKiB0ICsgeSAqIHM7XG4gIG91dFs5XSA9IHkgKiB6ICogdCAtIHggKiBzO1xuICBvdXRbMTBdID0geiAqIHogKiB0ICsgYztcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSB0aGUgZ2l2ZW4gYW5nbGUgYXJvdW5kIHRoZSBYIGF4aXNcclxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XHJcbiAqXHJcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xyXG4gKiAgICAgbWF0NC5yb3RhdGVYKGRlc3QsIGRlc3QsIHJhZCk7XHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcclxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcclxuICogQHJldHVybnMge21hdDR9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21YUm90YXRpb24ob3V0LCByYWQpIHtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICB2YXIgYyA9IE1hdGguY29zKHJhZCk7IC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cblxuICBvdXRbMF0gPSAxO1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSBjO1xuICBvdXRbNl0gPSBzO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAtcztcbiAgb3V0WzEwXSA9IGM7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWSBheGlzXHJcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxyXG4gKlxyXG4gKiAgICAgbWF0NC5pZGVudGl0eShkZXN0KTtcclxuICogICAgIG1hdDQucm90YXRlWShkZXN0LCBkZXN0LCByYWQpO1xyXG4gKlxyXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XHJcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XHJcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tWVJvdGF0aW9uKG91dCwgcmFkKSB7XG4gIHZhciBzID0gTWF0aC5zaW4ocmFkKTtcbiAgdmFyIGMgPSBNYXRoLmNvcyhyYWQpOyAvLyBQZXJmb3JtIGF4aXMtc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG5cbiAgb3V0WzBdID0gYztcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gLXM7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IDE7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IHM7XG4gIG91dFs5XSA9IDA7XG4gIG91dFsxMF0gPSBjO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IDA7XG4gIG91dFsxM10gPSAwO1xuICBvdXRbMTRdID0gMDtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIFogYXhpc1xyXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcclxuICpcclxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XHJcbiAqICAgICBtYXQ0LnJvdGF0ZVooZGVzdCwgZGVzdCwgcmFkKTtcclxuICpcclxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxyXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxyXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVpSb3RhdGlvbihvdXQsIHJhZCkge1xuICB2YXIgcyA9IE1hdGguc2luKHJhZCk7XG4gIHZhciBjID0gTWF0aC5jb3MocmFkKTsgLy8gUGVyZm9ybSBheGlzLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuXG4gIG91dFswXSA9IGM7XG4gIG91dFsxXSA9IHM7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IC1zO1xuICBvdXRbNV0gPSBjO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTBdID0gMTtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE0XSA9IDA7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSBhIHF1YXRlcm5pb24gcm90YXRpb24gYW5kIHZlY3RvciB0cmFuc2xhdGlvblxyXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcclxuICpcclxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XHJcbiAqICAgICBtYXQ0LnRyYW5zbGF0ZShkZXN0LCB2ZWMpO1xyXG4gKiAgICAgbGV0IHF1YXRNYXQgPSBtYXQ0LmNyZWF0ZSgpO1xyXG4gKiAgICAgcXVhdDQudG9NYXQ0KHF1YXQsIHF1YXRNYXQpO1xyXG4gKiAgICAgbWF0NC5tdWx0aXBseShkZXN0LCBxdWF0TWF0KTtcclxuICpcclxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxyXG4gKiBAcGFyYW0ge3F1YXQ0fSBxIFJvdGF0aW9uIHF1YXRlcm5pb25cclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgVHJhbnNsYXRpb24gdmVjdG9yXHJcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUm90YXRpb25UcmFuc2xhdGlvbihvdXQsIHEsIHYpIHtcbiAgLy8gUXVhdGVybmlvbiBtYXRoXG4gIHZhciB4ID0gcVswXSxcbiAgICAgIHkgPSBxWzFdLFxuICAgICAgeiA9IHFbMl0sXG4gICAgICB3ID0gcVszXTtcbiAgdmFyIHgyID0geCArIHg7XG4gIHZhciB5MiA9IHkgKyB5O1xuICB2YXIgejIgPSB6ICsgejtcbiAgdmFyIHh4ID0geCAqIHgyO1xuICB2YXIgeHkgPSB4ICogeTI7XG4gIHZhciB4eiA9IHggKiB6MjtcbiAgdmFyIHl5ID0geSAqIHkyO1xuICB2YXIgeXogPSB5ICogejI7XG4gIHZhciB6eiA9IHogKiB6MjtcbiAgdmFyIHd4ID0gdyAqIHgyO1xuICB2YXIgd3kgPSB3ICogeTI7XG4gIHZhciB3eiA9IHcgKiB6MjtcbiAgb3V0WzBdID0gMSAtICh5eSArIHp6KTtcbiAgb3V0WzFdID0geHkgKyB3ejtcbiAgb3V0WzJdID0geHogLSB3eTtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0geHkgLSB3ejtcbiAgb3V0WzVdID0gMSAtICh4eCArIHp6KTtcbiAgb3V0WzZdID0geXogKyB3eDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0geHogKyB3eTtcbiAgb3V0WzldID0geXogLSB3eDtcbiAgb3V0WzEwXSA9IDEgLSAoeHggKyB5eSk7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gdlswXTtcbiAgb3V0WzEzXSA9IHZbMV07XG4gIG91dFsxNF0gPSB2WzJdO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IG1hdDQgZnJvbSBhIGR1YWwgcXVhdC5cclxuICpcclxuICogQHBhcmFtIHttYXQ0fSBvdXQgTWF0cml4XHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0Mn0gYSBEdWFsIFF1YXRlcm5pb25cclxuICogQHJldHVybnMge21hdDR9IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUXVhdDIob3V0LCBhKSB7XG4gIHZhciB0cmFuc2xhdGlvbiA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDMpO1xuICB2YXIgYnggPSAtYVswXSxcbiAgICAgIGJ5ID0gLWFbMV0sXG4gICAgICBieiA9IC1hWzJdLFxuICAgICAgYncgPSBhWzNdLFxuICAgICAgYXggPSBhWzRdLFxuICAgICAgYXkgPSBhWzVdLFxuICAgICAgYXogPSBhWzZdLFxuICAgICAgYXcgPSBhWzddO1xuICB2YXIgbWFnbml0dWRlID0gYnggKiBieCArIGJ5ICogYnkgKyBieiAqIGJ6ICsgYncgKiBidzsgLy9Pbmx5IHNjYWxlIGlmIGl0IG1ha2VzIHNlbnNlXG5cbiAgaWYgKG1hZ25pdHVkZSA+IDApIHtcbiAgICB0cmFuc2xhdGlvblswXSA9IChheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5KSAqIDIgLyBtYWduaXR1ZGU7XG4gICAgdHJhbnNsYXRpb25bMV0gPSAoYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBieikgKiAyIC8gbWFnbml0dWRlO1xuICAgIHRyYW5zbGF0aW9uWzJdID0gKGF6ICogYncgKyBhdyAqIGJ6ICsgYXggKiBieSAtIGF5ICogYngpICogMiAvIG1hZ25pdHVkZTtcbiAgfSBlbHNlIHtcbiAgICB0cmFuc2xhdGlvblswXSA9IChheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5KSAqIDI7XG4gICAgdHJhbnNsYXRpb25bMV0gPSAoYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBieikgKiAyO1xuICAgIHRyYW5zbGF0aW9uWzJdID0gKGF6ICogYncgKyBhdyAqIGJ6ICsgYXggKiBieSAtIGF5ICogYngpICogMjtcbiAgfVxuXG4gIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uKG91dCwgYSwgdHJhbnNsYXRpb24pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHRyYW5zbGF0aW9uIHZlY3RvciBjb21wb25lbnQgb2YgYSB0cmFuc2Zvcm1hdGlvblxyXG4gKiAgbWF0cml4LiBJZiBhIG1hdHJpeCBpcyBidWlsdCB3aXRoIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uLFxyXG4gKiAgdGhlIHJldHVybmVkIHZlY3RvciB3aWxsIGJlIHRoZSBzYW1lIGFzIHRoZSB0cmFuc2xhdGlvbiB2ZWN0b3JcclxuICogIG9yaWdpbmFsbHkgc3VwcGxpZWQuXHJcbiAqIEBwYXJhbSAge3ZlYzN9IG91dCBWZWN0b3IgdG8gcmVjZWl2ZSB0cmFuc2xhdGlvbiBjb21wb25lbnRcclxuICogQHBhcmFtICB7UmVhZG9ubHlNYXQ0fSBtYXQgTWF0cml4IHRvIGJlIGRlY29tcG9zZWQgKGlucHV0KVxyXG4gKiBAcmV0dXJuIHt2ZWMzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2xhdGlvbihvdXQsIG1hdCkge1xuICBvdXRbMF0gPSBtYXRbMTJdO1xuICBvdXRbMV0gPSBtYXRbMTNdO1xuICBvdXRbMl0gPSBtYXRbMTRdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFJldHVybnMgdGhlIHNjYWxpbmcgZmFjdG9yIGNvbXBvbmVudCBvZiBhIHRyYW5zZm9ybWF0aW9uXHJcbiAqICBtYXRyaXguIElmIGEgbWF0cml4IGlzIGJ1aWx0IHdpdGggZnJvbVJvdGF0aW9uVHJhbnNsYXRpb25TY2FsZVxyXG4gKiAgd2l0aCBhIG5vcm1hbGl6ZWQgUXVhdGVybmlvbiBwYXJhbXRlciwgdGhlIHJldHVybmVkIHZlY3RvciB3aWxsIGJlXHJcbiAqICB0aGUgc2FtZSBhcyB0aGUgc2NhbGluZyB2ZWN0b3JcclxuICogIG9yaWdpbmFsbHkgc3VwcGxpZWQuXHJcbiAqIEBwYXJhbSAge3ZlYzN9IG91dCBWZWN0b3IgdG8gcmVjZWl2ZSBzY2FsaW5nIGZhY3RvciBjb21wb25lbnRcclxuICogQHBhcmFtICB7UmVhZG9ubHlNYXQ0fSBtYXQgTWF0cml4IHRvIGJlIGRlY29tcG9zZWQgKGlucHV0KVxyXG4gKiBAcmV0dXJuIHt2ZWMzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY2FsaW5nKG91dCwgbWF0KSB7XG4gIHZhciBtMTEgPSBtYXRbMF07XG4gIHZhciBtMTIgPSBtYXRbMV07XG4gIHZhciBtMTMgPSBtYXRbMl07XG4gIHZhciBtMjEgPSBtYXRbNF07XG4gIHZhciBtMjIgPSBtYXRbNV07XG4gIHZhciBtMjMgPSBtYXRbNl07XG4gIHZhciBtMzEgPSBtYXRbOF07XG4gIHZhciBtMzIgPSBtYXRbOV07XG4gIHZhciBtMzMgPSBtYXRbMTBdO1xuICBvdXRbMF0gPSBNYXRoLmh5cG90KG0xMSwgbTEyLCBtMTMpO1xuICBvdXRbMV0gPSBNYXRoLmh5cG90KG0yMSwgbTIyLCBtMjMpO1xuICBvdXRbMl0gPSBNYXRoLmh5cG90KG0zMSwgbTMyLCBtMzMpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFJldHVybnMgYSBxdWF0ZXJuaW9uIHJlcHJlc2VudGluZyB0aGUgcm90YXRpb25hbCBjb21wb25lbnRcclxuICogIG9mIGEgdHJhbnNmb3JtYXRpb24gbWF0cml4LiBJZiBhIG1hdHJpeCBpcyBidWlsdCB3aXRoXHJcbiAqICBmcm9tUm90YXRpb25UcmFuc2xhdGlvbiwgdGhlIHJldHVybmVkIHF1YXRlcm5pb24gd2lsbCBiZSB0aGVcclxuICogIHNhbWUgYXMgdGhlIHF1YXRlcm5pb24gb3JpZ2luYWxseSBzdXBwbGllZC5cclxuICogQHBhcmFtIHtxdWF0fSBvdXQgUXVhdGVybmlvbiB0byByZWNlaXZlIHRoZSByb3RhdGlvbiBjb21wb25lbnRcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IG1hdCBNYXRyaXggdG8gYmUgZGVjb21wb3NlZCAoaW5wdXQpXHJcbiAqIEByZXR1cm4ge3F1YXR9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJvdGF0aW9uKG91dCwgbWF0KSB7XG4gIHZhciBzY2FsaW5nID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoMyk7XG4gIGdldFNjYWxpbmcoc2NhbGluZywgbWF0KTtcbiAgdmFyIGlzMSA9IDEgLyBzY2FsaW5nWzBdO1xuICB2YXIgaXMyID0gMSAvIHNjYWxpbmdbMV07XG4gIHZhciBpczMgPSAxIC8gc2NhbGluZ1syXTtcbiAgdmFyIHNtMTEgPSBtYXRbMF0gKiBpczE7XG4gIHZhciBzbTEyID0gbWF0WzFdICogaXMyO1xuICB2YXIgc20xMyA9IG1hdFsyXSAqIGlzMztcbiAgdmFyIHNtMjEgPSBtYXRbNF0gKiBpczE7XG4gIHZhciBzbTIyID0gbWF0WzVdICogaXMyO1xuICB2YXIgc20yMyA9IG1hdFs2XSAqIGlzMztcbiAgdmFyIHNtMzEgPSBtYXRbOF0gKiBpczE7XG4gIHZhciBzbTMyID0gbWF0WzldICogaXMyO1xuICB2YXIgc20zMyA9IG1hdFsxMF0gKiBpczM7XG4gIHZhciB0cmFjZSA9IHNtMTEgKyBzbTIyICsgc20zMztcbiAgdmFyIFMgPSAwO1xuXG4gIGlmICh0cmFjZSA+IDApIHtcbiAgICBTID0gTWF0aC5zcXJ0KHRyYWNlICsgMS4wKSAqIDI7XG4gICAgb3V0WzNdID0gMC4yNSAqIFM7XG4gICAgb3V0WzBdID0gKHNtMjMgLSBzbTMyKSAvIFM7XG4gICAgb3V0WzFdID0gKHNtMzEgLSBzbTEzKSAvIFM7XG4gICAgb3V0WzJdID0gKHNtMTIgLSBzbTIxKSAvIFM7XG4gIH0gZWxzZSBpZiAoc20xMSA+IHNtMjIgJiYgc20xMSA+IHNtMzMpIHtcbiAgICBTID0gTWF0aC5zcXJ0KDEuMCArIHNtMTEgLSBzbTIyIC0gc20zMykgKiAyO1xuICAgIG91dFszXSA9IChzbTIzIC0gc20zMikgLyBTO1xuICAgIG91dFswXSA9IDAuMjUgKiBTO1xuICAgIG91dFsxXSA9IChzbTEyICsgc20yMSkgLyBTO1xuICAgIG91dFsyXSA9IChzbTMxICsgc20xMykgLyBTO1xuICB9IGVsc2UgaWYgKHNtMjIgPiBzbTMzKSB7XG4gICAgUyA9IE1hdGguc3FydCgxLjAgKyBzbTIyIC0gc20xMSAtIHNtMzMpICogMjtcbiAgICBvdXRbM10gPSAoc20zMSAtIHNtMTMpIC8gUztcbiAgICBvdXRbMF0gPSAoc20xMiArIHNtMjEpIC8gUztcbiAgICBvdXRbMV0gPSAwLjI1ICogUztcbiAgICBvdXRbMl0gPSAoc20yMyArIHNtMzIpIC8gUztcbiAgfSBlbHNlIHtcbiAgICBTID0gTWF0aC5zcXJ0KDEuMCArIHNtMzMgLSBzbTExIC0gc20yMikgKiAyO1xuICAgIG91dFszXSA9IChzbTEyIC0gc20yMSkgLyBTO1xuICAgIG91dFswXSA9IChzbTMxICsgc20xMykgLyBTO1xuICAgIG91dFsxXSA9IChzbTIzICsgc20zMikgLyBTO1xuICAgIG91dFsyXSA9IDAuMjUgKiBTO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSBxdWF0ZXJuaW9uIHJvdGF0aW9uLCB2ZWN0b3IgdHJhbnNsYXRpb24gYW5kIHZlY3RvciBzY2FsZVxyXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcclxuICpcclxuICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7XHJcbiAqICAgICBtYXQ0LnRyYW5zbGF0ZShkZXN0LCB2ZWMpO1xyXG4gKiAgICAgbGV0IHF1YXRNYXQgPSBtYXQ0LmNyZWF0ZSgpO1xyXG4gKiAgICAgcXVhdDQudG9NYXQ0KHF1YXQsIHF1YXRNYXQpO1xyXG4gKiAgICAgbWF0NC5tdWx0aXBseShkZXN0LCBxdWF0TWF0KTtcclxuICogICAgIG1hdDQuc2NhbGUoZGVzdCwgc2NhbGUpXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcclxuICogQHBhcmFtIHtxdWF0NH0gcSBSb3RhdGlvbiBxdWF0ZXJuaW9uXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSB2IFRyYW5zbGF0aW9uIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gcyBTY2FsaW5nIHZlY3RvclxyXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVJvdGF0aW9uVHJhbnNsYXRpb25TY2FsZShvdXQsIHEsIHYsIHMpIHtcbiAgLy8gUXVhdGVybmlvbiBtYXRoXG4gIHZhciB4ID0gcVswXSxcbiAgICAgIHkgPSBxWzFdLFxuICAgICAgeiA9IHFbMl0sXG4gICAgICB3ID0gcVszXTtcbiAgdmFyIHgyID0geCArIHg7XG4gIHZhciB5MiA9IHkgKyB5O1xuICB2YXIgejIgPSB6ICsgejtcbiAgdmFyIHh4ID0geCAqIHgyO1xuICB2YXIgeHkgPSB4ICogeTI7XG4gIHZhciB4eiA9IHggKiB6MjtcbiAgdmFyIHl5ID0geSAqIHkyO1xuICB2YXIgeXogPSB5ICogejI7XG4gIHZhciB6eiA9IHogKiB6MjtcbiAgdmFyIHd4ID0gdyAqIHgyO1xuICB2YXIgd3kgPSB3ICogeTI7XG4gIHZhciB3eiA9IHcgKiB6MjtcbiAgdmFyIHN4ID0gc1swXTtcbiAgdmFyIHN5ID0gc1sxXTtcbiAgdmFyIHN6ID0gc1syXTtcbiAgb3V0WzBdID0gKDEgLSAoeXkgKyB6eikpICogc3g7XG4gIG91dFsxXSA9ICh4eSArIHd6KSAqIHN4O1xuICBvdXRbMl0gPSAoeHogLSB3eSkgKiBzeDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gKHh5IC0gd3opICogc3k7XG4gIG91dFs1XSA9ICgxIC0gKHh4ICsgenopKSAqIHN5O1xuICBvdXRbNl0gPSAoeXogKyB3eCkgKiBzeTtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gKHh6ICsgd3kpICogc3o7XG4gIG91dFs5XSA9ICh5eiAtIHd4KSAqIHN6O1xuICBvdXRbMTBdID0gKDEgLSAoeHggKyB5eSkpICogc3o7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gdlswXTtcbiAgb3V0WzEzXSA9IHZbMV07XG4gIG91dFsxNF0gPSB2WzJdO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSBxdWF0ZXJuaW9uIHJvdGF0aW9uLCB2ZWN0b3IgdHJhbnNsYXRpb24gYW5kIHZlY3RvciBzY2FsZSwgcm90YXRpbmcgYW5kIHNjYWxpbmcgYXJvdW5kIHRoZSBnaXZlbiBvcmlnaW5cclxuICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6XHJcbiAqXHJcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xyXG4gKiAgICAgbWF0NC50cmFuc2xhdGUoZGVzdCwgdmVjKTtcclxuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIG9yaWdpbik7XHJcbiAqICAgICBsZXQgcXVhdE1hdCA9IG1hdDQuY3JlYXRlKCk7XHJcbiAqICAgICBxdWF0NC50b01hdDQocXVhdCwgcXVhdE1hdCk7XHJcbiAqICAgICBtYXQ0Lm11bHRpcGx5KGRlc3QsIHF1YXRNYXQpO1xyXG4gKiAgICAgbWF0NC5zY2FsZShkZXN0LCBzY2FsZSlcclxuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIG5lZ2F0aXZlT3JpZ2luKTtcclxuICpcclxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxyXG4gKiBAcGFyYW0ge3F1YXQ0fSBxIFJvdGF0aW9uIHF1YXRlcm5pb25cclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHYgVHJhbnNsYXRpb24gdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBzIFNjYWxpbmcgdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBvIFRoZSBvcmlnaW4gdmVjdG9yIGFyb3VuZCB3aGljaCB0byBzY2FsZSBhbmQgcm90YXRlXHJcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUm90YXRpb25UcmFuc2xhdGlvblNjYWxlT3JpZ2luKG91dCwgcSwgdiwgcywgbykge1xuICAvLyBRdWF0ZXJuaW9uIG1hdGhcbiAgdmFyIHggPSBxWzBdLFxuICAgICAgeSA9IHFbMV0sXG4gICAgICB6ID0gcVsyXSxcbiAgICAgIHcgPSBxWzNdO1xuICB2YXIgeDIgPSB4ICsgeDtcbiAgdmFyIHkyID0geSArIHk7XG4gIHZhciB6MiA9IHogKyB6O1xuICB2YXIgeHggPSB4ICogeDI7XG4gIHZhciB4eSA9IHggKiB5MjtcbiAgdmFyIHh6ID0geCAqIHoyO1xuICB2YXIgeXkgPSB5ICogeTI7XG4gIHZhciB5eiA9IHkgKiB6MjtcbiAgdmFyIHp6ID0geiAqIHoyO1xuICB2YXIgd3ggPSB3ICogeDI7XG4gIHZhciB3eSA9IHcgKiB5MjtcbiAgdmFyIHd6ID0gdyAqIHoyO1xuICB2YXIgc3ggPSBzWzBdO1xuICB2YXIgc3kgPSBzWzFdO1xuICB2YXIgc3ogPSBzWzJdO1xuICB2YXIgb3ggPSBvWzBdO1xuICB2YXIgb3kgPSBvWzFdO1xuICB2YXIgb3ogPSBvWzJdO1xuICB2YXIgb3V0MCA9ICgxIC0gKHl5ICsgenopKSAqIHN4O1xuICB2YXIgb3V0MSA9ICh4eSArIHd6KSAqIHN4O1xuICB2YXIgb3V0MiA9ICh4eiAtIHd5KSAqIHN4O1xuICB2YXIgb3V0NCA9ICh4eSAtIHd6KSAqIHN5O1xuICB2YXIgb3V0NSA9ICgxIC0gKHh4ICsgenopKSAqIHN5O1xuICB2YXIgb3V0NiA9ICh5eiArIHd4KSAqIHN5O1xuICB2YXIgb3V0OCA9ICh4eiArIHd5KSAqIHN6O1xuICB2YXIgb3V0OSA9ICh5eiAtIHd4KSAqIHN6O1xuICB2YXIgb3V0MTAgPSAoMSAtICh4eCArIHl5KSkgKiBzejtcbiAgb3V0WzBdID0gb3V0MDtcbiAgb3V0WzFdID0gb3V0MTtcbiAgb3V0WzJdID0gb3V0MjtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gb3V0NDtcbiAgb3V0WzVdID0gb3V0NTtcbiAgb3V0WzZdID0gb3V0NjtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gb3V0ODtcbiAgb3V0WzldID0gb3V0OTtcbiAgb3V0WzEwXSA9IG91dDEwO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IHZbMF0gKyBveCAtIChvdXQwICogb3ggKyBvdXQ0ICogb3kgKyBvdXQ4ICogb3opO1xuICBvdXRbMTNdID0gdlsxXSArIG95IC0gKG91dDEgKiBveCArIG91dDUgKiBveSArIG91dDkgKiBveik7XG4gIG91dFsxNF0gPSB2WzJdICsgb3ogLSAob3V0MiAqIG94ICsgb3V0NiAqIG95ICsgb3V0MTAgKiBveik7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgYSA0eDQgbWF0cml4IGZyb20gdGhlIGdpdmVuIHF1YXRlcm5pb25cclxuICpcclxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gcSBRdWF0ZXJuaW9uIHRvIGNyZWF0ZSBtYXRyaXggZnJvbVxyXG4gKlxyXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVF1YXQob3V0LCBxKSB7XG4gIHZhciB4ID0gcVswXSxcbiAgICAgIHkgPSBxWzFdLFxuICAgICAgeiA9IHFbMl0sXG4gICAgICB3ID0gcVszXTtcbiAgdmFyIHgyID0geCArIHg7XG4gIHZhciB5MiA9IHkgKyB5O1xuICB2YXIgejIgPSB6ICsgejtcbiAgdmFyIHh4ID0geCAqIHgyO1xuICB2YXIgeXggPSB5ICogeDI7XG4gIHZhciB5eSA9IHkgKiB5MjtcbiAgdmFyIHp4ID0geiAqIHgyO1xuICB2YXIgenkgPSB6ICogeTI7XG4gIHZhciB6eiA9IHogKiB6MjtcbiAgdmFyIHd4ID0gdyAqIHgyO1xuICB2YXIgd3kgPSB3ICogeTI7XG4gIHZhciB3eiA9IHcgKiB6MjtcbiAgb3V0WzBdID0gMSAtIHl5IC0geno7XG4gIG91dFsxXSA9IHl4ICsgd3o7XG4gIG91dFsyXSA9IHp4IC0gd3k7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHl4IC0gd3o7XG4gIG91dFs1XSA9IDEgLSB4eCAtIHp6O1xuICBvdXRbNl0gPSB6eSArIHd4O1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSB6eCArIHd5O1xuICBvdXRbOV0gPSB6eSAtIHd4O1xuICBvdXRbMTBdID0gMSAtIHh4IC0geXk7XG4gIG91dFsxMV0gPSAwO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSAwO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBmcnVzdHVtIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBib3VuZHNcclxuICpcclxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xyXG4gKiBAcGFyYW0ge051bWJlcn0gbGVmdCBMZWZ0IGJvdW5kIG9mIHRoZSBmcnVzdHVtXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSByaWdodCBSaWdodCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxyXG4gKiBAcGFyYW0ge051bWJlcn0gYm90dG9tIEJvdHRvbSBib3VuZCBvZiB0aGUgZnJ1c3R1bVxyXG4gKiBAcGFyYW0ge051bWJlcn0gdG9wIFRvcCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxyXG4gKiBAcGFyYW0ge051bWJlcn0gbmVhciBOZWFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXHJcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcnVzdHVtKG91dCwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpIHtcbiAgdmFyIHJsID0gMSAvIChyaWdodCAtIGxlZnQpO1xuICB2YXIgdGIgPSAxIC8gKHRvcCAtIGJvdHRvbSk7XG4gIHZhciBuZiA9IDEgLyAobmVhciAtIGZhcik7XG4gIG91dFswXSA9IG5lYXIgKiAyICogcmw7XG4gIG91dFsxXSA9IDA7XG4gIG91dFsyXSA9IDA7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IDA7XG4gIG91dFs1XSA9IG5lYXIgKiAyICogdGI7XG4gIG91dFs2XSA9IDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IChyaWdodCArIGxlZnQpICogcmw7XG4gIG91dFs5XSA9ICh0b3AgKyBib3R0b20pICogdGI7XG4gIG91dFsxMF0gPSAoZmFyICsgbmVhcikgKiBuZjtcbiAgb3V0WzExXSA9IC0xO1xuICBvdXRbMTJdID0gMDtcbiAgb3V0WzEzXSA9IDA7XG4gIG91dFsxNF0gPSBmYXIgKiBuZWFyICogMiAqIG5mO1xuICBvdXRbMTVdID0gMDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBwZXJzcGVjdGl2ZSBwcm9qZWN0aW9uIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBib3VuZHMuXHJcbiAqIFBhc3NpbmcgbnVsbC91bmRlZmluZWQvbm8gdmFsdWUgZm9yIGZhciB3aWxsIGdlbmVyYXRlIGluZmluaXRlIHByb2plY3Rpb24gbWF0cml4LlxyXG4gKlxyXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBmb3Z5IFZlcnRpY2FsIGZpZWxkIG9mIHZpZXcgaW4gcmFkaWFuc1xyXG4gKiBAcGFyYW0ge251bWJlcn0gYXNwZWN0IEFzcGVjdCByYXRpby4gdHlwaWNhbGx5IHZpZXdwb3J0IHdpZHRoL2hlaWdodFxyXG4gKiBAcGFyYW0ge251bWJlcn0gbmVhciBOZWFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtLCBjYW4gYmUgbnVsbCBvciBJbmZpbml0eVxyXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGVyc3BlY3RpdmUob3V0LCBmb3Z5LCBhc3BlY3QsIG5lYXIsIGZhcikge1xuICB2YXIgZiA9IDEuMCAvIE1hdGgudGFuKGZvdnkgLyAyKSxcbiAgICAgIG5mO1xuICBvdXRbMF0gPSBmIC8gYXNwZWN0O1xuICBvdXRbMV0gPSAwO1xuICBvdXRbMl0gPSAwO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSAwO1xuICBvdXRbNV0gPSBmO1xuICBvdXRbNl0gPSAwO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSAwO1xuICBvdXRbOV0gPSAwO1xuICBvdXRbMTFdID0gLTE7XG4gIG91dFsxMl0gPSAwO1xuICBvdXRbMTNdID0gMDtcbiAgb3V0WzE1XSA9IDA7XG5cbiAgaWYgKGZhciAhPSBudWxsICYmIGZhciAhPT0gSW5maW5pdHkpIHtcbiAgICBuZiA9IDEgLyAobmVhciAtIGZhcik7XG4gICAgb3V0WzEwXSA9IChmYXIgKyBuZWFyKSAqIG5mO1xuICAgIG91dFsxNF0gPSAyICogZmFyICogbmVhciAqIG5mO1xuICB9IGVsc2Uge1xuICAgIG91dFsxMF0gPSAtMTtcbiAgICBvdXRbMTRdID0gLTIgKiBuZWFyO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBwZXJzcGVjdGl2ZSBwcm9qZWN0aW9uIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBmaWVsZCBvZiB2aWV3LlxyXG4gKiBUaGlzIGlzIHByaW1hcmlseSB1c2VmdWwgZm9yIGdlbmVyYXRpbmcgcHJvamVjdGlvbiBtYXRyaWNlcyB0byBiZSB1c2VkXHJcbiAqIHdpdGggdGhlIHN0aWxsIGV4cGVyaWVtZW50YWwgV2ViVlIgQVBJLlxyXG4gKlxyXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBmb3YgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGZvbGxvd2luZyB2YWx1ZXM6IHVwRGVncmVlcywgZG93bkRlZ3JlZXMsIGxlZnREZWdyZWVzLCByaWdodERlZ3JlZXNcclxuICogQHBhcmFtIHtudW1iZXJ9IG5lYXIgTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxyXG4gKiBAcGFyYW0ge251bWJlcn0gZmFyIEZhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxyXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGVyc3BlY3RpdmVGcm9tRmllbGRPZlZpZXcob3V0LCBmb3YsIG5lYXIsIGZhcikge1xuICB2YXIgdXBUYW4gPSBNYXRoLnRhbihmb3YudXBEZWdyZWVzICogTWF0aC5QSSAvIDE4MC4wKTtcbiAgdmFyIGRvd25UYW4gPSBNYXRoLnRhbihmb3YuZG93bkRlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwLjApO1xuICB2YXIgbGVmdFRhbiA9IE1hdGgudGFuKGZvdi5sZWZ0RGVncmVlcyAqIE1hdGguUEkgLyAxODAuMCk7XG4gIHZhciByaWdodFRhbiA9IE1hdGgudGFuKGZvdi5yaWdodERlZ3JlZXMgKiBNYXRoLlBJIC8gMTgwLjApO1xuICB2YXIgeFNjYWxlID0gMi4wIC8gKGxlZnRUYW4gKyByaWdodFRhbik7XG4gIHZhciB5U2NhbGUgPSAyLjAgLyAodXBUYW4gKyBkb3duVGFuKTtcbiAgb3V0WzBdID0geFNjYWxlO1xuICBvdXRbMV0gPSAwLjA7XG4gIG91dFsyXSA9IDAuMDtcbiAgb3V0WzNdID0gMC4wO1xuICBvdXRbNF0gPSAwLjA7XG4gIG91dFs1XSA9IHlTY2FsZTtcbiAgb3V0WzZdID0gMC4wO1xuICBvdXRbN10gPSAwLjA7XG4gIG91dFs4XSA9IC0oKGxlZnRUYW4gLSByaWdodFRhbikgKiB4U2NhbGUgKiAwLjUpO1xuICBvdXRbOV0gPSAodXBUYW4gLSBkb3duVGFuKSAqIHlTY2FsZSAqIDAuNTtcbiAgb3V0WzEwXSA9IGZhciAvIChuZWFyIC0gZmFyKTtcbiAgb3V0WzExXSA9IC0xLjA7XG4gIG91dFsxMl0gPSAwLjA7XG4gIG91dFsxM10gPSAwLjA7XG4gIG91dFsxNF0gPSBmYXIgKiBuZWFyIC8gKG5lYXIgLSBmYXIpO1xuICBvdXRbMTVdID0gMC4wO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIG9ydGhvZ29uYWwgcHJvamVjdGlvbiBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gYm91bmRzXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cclxuICogQHBhcmFtIHtudW1iZXJ9IGxlZnQgTGVmdCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxyXG4gKiBAcGFyYW0ge251bWJlcn0gcmlnaHQgUmlnaHQgYm91bmQgb2YgdGhlIGZydXN0dW1cclxuICogQHBhcmFtIHtudW1iZXJ9IGJvdHRvbSBCb3R0b20gYm91bmQgb2YgdGhlIGZydXN0dW1cclxuICogQHBhcmFtIHtudW1iZXJ9IHRvcCBUb3AgYm91bmQgb2YgdGhlIGZydXN0dW1cclxuICogQHBhcmFtIHtudW1iZXJ9IG5lYXIgTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxyXG4gKiBAcGFyYW0ge251bWJlcn0gZmFyIEZhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxyXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gb3J0aG8ob3V0LCBsZWZ0LCByaWdodCwgYm90dG9tLCB0b3AsIG5lYXIsIGZhcikge1xuICB2YXIgbHIgPSAxIC8gKGxlZnQgLSByaWdodCk7XG4gIHZhciBidCA9IDEgLyAoYm90dG9tIC0gdG9wKTtcbiAgdmFyIG5mID0gMSAvIChuZWFyIC0gZmFyKTtcbiAgb3V0WzBdID0gLTIgKiBscjtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMDtcbiAgb3V0WzRdID0gMDtcbiAgb3V0WzVdID0gLTIgKiBidDtcbiAgb3V0WzZdID0gMDtcbiAgb3V0WzddID0gMDtcbiAgb3V0WzhdID0gMDtcbiAgb3V0WzldID0gMDtcbiAgb3V0WzEwXSA9IDIgKiBuZjtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAobGVmdCArIHJpZ2h0KSAqIGxyO1xuICBvdXRbMTNdID0gKHRvcCArIGJvdHRvbSkgKiBidDtcbiAgb3V0WzE0XSA9IChmYXIgKyBuZWFyKSAqIG5mO1xuICBvdXRbMTVdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBsb29rLWF0IG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBleWUgcG9zaXRpb24sIGZvY2FsIHBvaW50LCBhbmQgdXAgYXhpcy5cclxuICogSWYgeW91IHdhbnQgYSBtYXRyaXggdGhhdCBhY3R1YWxseSBtYWtlcyBhbiBvYmplY3QgbG9vayBhdCBhbm90aGVyIG9iamVjdCwgeW91IHNob3VsZCB1c2UgdGFyZ2V0VG8gaW5zdGVhZC5cclxuICpcclxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gZXllIFBvc2l0aW9uIG9mIHRoZSB2aWV3ZXJcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGNlbnRlciBQb2ludCB0aGUgdmlld2VyIGlzIGxvb2tpbmcgYXRcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHVwIHZlYzMgcG9pbnRpbmcgdXBcclxuICogQHJldHVybnMge21hdDR9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxvb2tBdChvdXQsIGV5ZSwgY2VudGVyLCB1cCkge1xuICB2YXIgeDAsIHgxLCB4MiwgeTAsIHkxLCB5MiwgejAsIHoxLCB6MiwgbGVuO1xuICB2YXIgZXlleCA9IGV5ZVswXTtcbiAgdmFyIGV5ZXkgPSBleWVbMV07XG4gIHZhciBleWV6ID0gZXllWzJdO1xuICB2YXIgdXB4ID0gdXBbMF07XG4gIHZhciB1cHkgPSB1cFsxXTtcbiAgdmFyIHVweiA9IHVwWzJdO1xuICB2YXIgY2VudGVyeCA9IGNlbnRlclswXTtcbiAgdmFyIGNlbnRlcnkgPSBjZW50ZXJbMV07XG4gIHZhciBjZW50ZXJ6ID0gY2VudGVyWzJdO1xuXG4gIGlmIChNYXRoLmFicyhleWV4IC0gY2VudGVyeCkgPCBnbE1hdHJpeC5FUFNJTE9OICYmIE1hdGguYWJzKGV5ZXkgLSBjZW50ZXJ5KSA8IGdsTWF0cml4LkVQU0lMT04gJiYgTWF0aC5hYnMoZXlleiAtIGNlbnRlcnopIDwgZ2xNYXRyaXguRVBTSUxPTikge1xuICAgIHJldHVybiBpZGVudGl0eShvdXQpO1xuICB9XG5cbiAgejAgPSBleWV4IC0gY2VudGVyeDtcbiAgejEgPSBleWV5IC0gY2VudGVyeTtcbiAgejIgPSBleWV6IC0gY2VudGVyejtcbiAgbGVuID0gMSAvIE1hdGguaHlwb3QoejAsIHoxLCB6Mik7XG4gIHowICo9IGxlbjtcbiAgejEgKj0gbGVuO1xuICB6MiAqPSBsZW47XG4gIHgwID0gdXB5ICogejIgLSB1cHogKiB6MTtcbiAgeDEgPSB1cHogKiB6MCAtIHVweCAqIHoyO1xuICB4MiA9IHVweCAqIHoxIC0gdXB5ICogejA7XG4gIGxlbiA9IE1hdGguaHlwb3QoeDAsIHgxLCB4Mik7XG5cbiAgaWYgKCFsZW4pIHtcbiAgICB4MCA9IDA7XG4gICAgeDEgPSAwO1xuICAgIHgyID0gMDtcbiAgfSBlbHNlIHtcbiAgICBsZW4gPSAxIC8gbGVuO1xuICAgIHgwICo9IGxlbjtcbiAgICB4MSAqPSBsZW47XG4gICAgeDIgKj0gbGVuO1xuICB9XG5cbiAgeTAgPSB6MSAqIHgyIC0gejIgKiB4MTtcbiAgeTEgPSB6MiAqIHgwIC0gejAgKiB4MjtcbiAgeTIgPSB6MCAqIHgxIC0gejEgKiB4MDtcbiAgbGVuID0gTWF0aC5oeXBvdCh5MCwgeTEsIHkyKTtcblxuICBpZiAoIWxlbikge1xuICAgIHkwID0gMDtcbiAgICB5MSA9IDA7XG4gICAgeTIgPSAwO1xuICB9IGVsc2Uge1xuICAgIGxlbiA9IDEgLyBsZW47XG4gICAgeTAgKj0gbGVuO1xuICAgIHkxICo9IGxlbjtcbiAgICB5MiAqPSBsZW47XG4gIH1cblxuICBvdXRbMF0gPSB4MDtcbiAgb3V0WzFdID0geTA7XG4gIG91dFsyXSA9IHowO1xuICBvdXRbM10gPSAwO1xuICBvdXRbNF0gPSB4MTtcbiAgb3V0WzVdID0geTE7XG4gIG91dFs2XSA9IHoxO1xuICBvdXRbN10gPSAwO1xuICBvdXRbOF0gPSB4MjtcbiAgb3V0WzldID0geTI7XG4gIG91dFsxMF0gPSB6MjtcbiAgb3V0WzExXSA9IDA7XG4gIG91dFsxMl0gPSAtKHgwICogZXlleCArIHgxICogZXlleSArIHgyICogZXlleik7XG4gIG91dFsxM10gPSAtKHkwICogZXlleCArIHkxICogZXlleSArIHkyICogZXlleik7XG4gIG91dFsxNF0gPSAtKHowICogZXlleCArIHoxICogZXlleSArIHoyICogZXlleik7XG4gIG91dFsxNV0gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIG1hdHJpeCB0aGF0IG1ha2VzIHNvbWV0aGluZyBsb29rIGF0IHNvbWV0aGluZyBlbHNlLlxyXG4gKlxyXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBleWUgUG9zaXRpb24gb2YgdGhlIHZpZXdlclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gY2VudGVyIFBvaW50IHRoZSB2aWV3ZXIgaXMgbG9va2luZyBhdFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gdXAgdmVjMyBwb2ludGluZyB1cFxyXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdGFyZ2V0VG8ob3V0LCBleWUsIHRhcmdldCwgdXApIHtcbiAgdmFyIGV5ZXggPSBleWVbMF0sXG4gICAgICBleWV5ID0gZXllWzFdLFxuICAgICAgZXlleiA9IGV5ZVsyXSxcbiAgICAgIHVweCA9IHVwWzBdLFxuICAgICAgdXB5ID0gdXBbMV0sXG4gICAgICB1cHogPSB1cFsyXTtcbiAgdmFyIHowID0gZXlleCAtIHRhcmdldFswXSxcbiAgICAgIHoxID0gZXlleSAtIHRhcmdldFsxXSxcbiAgICAgIHoyID0gZXlleiAtIHRhcmdldFsyXTtcbiAgdmFyIGxlbiA9IHowICogejAgKyB6MSAqIHoxICsgejIgKiB6MjtcblxuICBpZiAobGVuID4gMCkge1xuICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQobGVuKTtcbiAgICB6MCAqPSBsZW47XG4gICAgejEgKj0gbGVuO1xuICAgIHoyICo9IGxlbjtcbiAgfVxuXG4gIHZhciB4MCA9IHVweSAqIHoyIC0gdXB6ICogejEsXG4gICAgICB4MSA9IHVweiAqIHowIC0gdXB4ICogejIsXG4gICAgICB4MiA9IHVweCAqIHoxIC0gdXB5ICogejA7XG4gIGxlbiA9IHgwICogeDAgKyB4MSAqIHgxICsgeDIgKiB4MjtcblxuICBpZiAobGVuID4gMCkge1xuICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQobGVuKTtcbiAgICB4MCAqPSBsZW47XG4gICAgeDEgKj0gbGVuO1xuICAgIHgyICo9IGxlbjtcbiAgfVxuXG4gIG91dFswXSA9IHgwO1xuICBvdXRbMV0gPSB4MTtcbiAgb3V0WzJdID0geDI7XG4gIG91dFszXSA9IDA7XG4gIG91dFs0XSA9IHoxICogeDIgLSB6MiAqIHgxO1xuICBvdXRbNV0gPSB6MiAqIHgwIC0gejAgKiB4MjtcbiAgb3V0WzZdID0gejAgKiB4MSAtIHoxICogeDA7XG4gIG91dFs3XSA9IDA7XG4gIG91dFs4XSA9IHowO1xuICBvdXRbOV0gPSB6MTtcbiAgb3V0WzEwXSA9IHoyO1xuICBvdXRbMTFdID0gMDtcbiAgb3V0WzEyXSA9IGV5ZXg7XG4gIG91dFsxM10gPSBleWV5O1xuICBvdXRbMTRdID0gZXllejtcbiAgb3V0WzE1XSA9IDE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIG1hdDRcclxuICpcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgbWF0cml4IHRvIHJlcHJlc2VudCBhcyBhIHN0cmluZ1xyXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cihhKSB7XG4gIHJldHVybiBcIm1hdDQoXCIgKyBhWzBdICsgXCIsIFwiICsgYVsxXSArIFwiLCBcIiArIGFbMl0gKyBcIiwgXCIgKyBhWzNdICsgXCIsIFwiICsgYVs0XSArIFwiLCBcIiArIGFbNV0gKyBcIiwgXCIgKyBhWzZdICsgXCIsIFwiICsgYVs3XSArIFwiLCBcIiArIGFbOF0gKyBcIiwgXCIgKyBhWzldICsgXCIsIFwiICsgYVsxMF0gKyBcIiwgXCIgKyBhWzExXSArIFwiLCBcIiArIGFbMTJdICsgXCIsIFwiICsgYVsxM10gKyBcIiwgXCIgKyBhWzE0XSArIFwiLCBcIiArIGFbMTVdICsgXCIpXCI7XG59XG4vKipcclxuICogUmV0dXJucyBGcm9iZW5pdXMgbm9ybSBvZiBhIG1hdDRcclxuICpcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byBjYWxjdWxhdGUgRnJvYmVuaXVzIG5vcm0gb2ZcclxuICogQHJldHVybnMge051bWJlcn0gRnJvYmVuaXVzIG5vcm1cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9iKGEpIHtcbiAgcmV0dXJuIE1hdGguaHlwb3QoYVswXSwgYVsxXSwgYVsyXSwgYVszXSwgYVs0XSwgYVs1XSwgYVs2XSwgYVs3XSwgYVs4XSwgYVs5XSwgYVsxMF0sIGFbMTFdLCBhWzEyXSwgYVsxM10sIGFbMTRdLCBhWzE1XSk7XG59XG4vKipcclxuICogQWRkcyB0d28gbWF0NCdzXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxyXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXTtcbiAgb3V0WzFdID0gYVsxXSArIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdO1xuICBvdXRbM10gPSBhWzNdICsgYlszXTtcbiAgb3V0WzRdID0gYVs0XSArIGJbNF07XG4gIG91dFs1XSA9IGFbNV0gKyBiWzVdO1xuICBvdXRbNl0gPSBhWzZdICsgYls2XTtcbiAgb3V0WzddID0gYVs3XSArIGJbN107XG4gIG91dFs4XSA9IGFbOF0gKyBiWzhdO1xuICBvdXRbOV0gPSBhWzldICsgYls5XTtcbiAgb3V0WzEwXSA9IGFbMTBdICsgYlsxMF07XG4gIG91dFsxMV0gPSBhWzExXSArIGJbMTFdO1xuICBvdXRbMTJdID0gYVsxMl0gKyBiWzEyXTtcbiAgb3V0WzEzXSA9IGFbMTNdICsgYlsxM107XG4gIG91dFsxNF0gPSBhWzE0XSArIGJbMTRdO1xuICBvdXRbMTVdID0gYVsxNV0gKyBiWzE1XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBTdWJ0cmFjdHMgbWF0cml4IGIgZnJvbSBtYXRyaXggYVxyXG4gKlxyXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcclxuICogQHJldHVybnMge21hdDR9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnRyYWN0KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdIC0gYlswXTtcbiAgb3V0WzFdID0gYVsxXSAtIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gLSBiWzJdO1xuICBvdXRbM10gPSBhWzNdIC0gYlszXTtcbiAgb3V0WzRdID0gYVs0XSAtIGJbNF07XG4gIG91dFs1XSA9IGFbNV0gLSBiWzVdO1xuICBvdXRbNl0gPSBhWzZdIC0gYls2XTtcbiAgb3V0WzddID0gYVs3XSAtIGJbN107XG4gIG91dFs4XSA9IGFbOF0gLSBiWzhdO1xuICBvdXRbOV0gPSBhWzldIC0gYls5XTtcbiAgb3V0WzEwXSA9IGFbMTBdIC0gYlsxMF07XG4gIG91dFsxMV0gPSBhWzExXSAtIGJbMTFdO1xuICBvdXRbMTJdID0gYVsxMl0gLSBiWzEyXTtcbiAgb3V0WzEzXSA9IGFbMTNdIC0gYlsxM107XG4gIG91dFsxNF0gPSBhWzE0XSAtIGJbMTRdO1xuICBvdXRbMTVdID0gYVsxNV0gLSBiWzE1XTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBNdWx0aXBseSBlYWNoIGVsZW1lbnQgb2YgdGhlIG1hdHJpeCBieSBhIHNjYWxhci5cclxuICpcclxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgdGhlIG1hdHJpeCB0byBzY2FsZVxyXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIG1hdHJpeCdzIGVsZW1lbnRzIGJ5XHJcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseVNjYWxhcihvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAqIGI7XG4gIG91dFsxXSA9IGFbMV0gKiBiO1xuICBvdXRbMl0gPSBhWzJdICogYjtcbiAgb3V0WzNdID0gYVszXSAqIGI7XG4gIG91dFs0XSA9IGFbNF0gKiBiO1xuICBvdXRbNV0gPSBhWzVdICogYjtcbiAgb3V0WzZdID0gYVs2XSAqIGI7XG4gIG91dFs3XSA9IGFbN10gKiBiO1xuICBvdXRbOF0gPSBhWzhdICogYjtcbiAgb3V0WzldID0gYVs5XSAqIGI7XG4gIG91dFsxMF0gPSBhWzEwXSAqIGI7XG4gIG91dFsxMV0gPSBhWzExXSAqIGI7XG4gIG91dFsxMl0gPSBhWzEyXSAqIGI7XG4gIG91dFsxM10gPSBhWzEzXSAqIGI7XG4gIG91dFsxNF0gPSBhWzE0XSAqIGI7XG4gIG91dFsxNV0gPSBhWzE1XSAqIGI7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogQWRkcyB0d28gbWF0NCdzIGFmdGVyIG11bHRpcGx5aW5nIGVhY2ggZWxlbWVudCBvZiB0aGUgc2Vjb25kIG9wZXJhbmQgYnkgYSBzY2FsYXIgdmFsdWUuXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQ0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge051bWJlcn0gc2NhbGUgdGhlIGFtb3VudCB0byBzY2FsZSBiJ3MgZWxlbWVudHMgYnkgYmVmb3JlIGFkZGluZ1xyXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHlTY2FsYXJBbmRBZGQob3V0LCBhLCBiLCBzY2FsZSkge1xuICBvdXRbMF0gPSBhWzBdICsgYlswXSAqIHNjYWxlO1xuICBvdXRbMV0gPSBhWzFdICsgYlsxXSAqIHNjYWxlO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXSAqIHNjYWxlO1xuICBvdXRbM10gPSBhWzNdICsgYlszXSAqIHNjYWxlO1xuICBvdXRbNF0gPSBhWzRdICsgYls0XSAqIHNjYWxlO1xuICBvdXRbNV0gPSBhWzVdICsgYls1XSAqIHNjYWxlO1xuICBvdXRbNl0gPSBhWzZdICsgYls2XSAqIHNjYWxlO1xuICBvdXRbN10gPSBhWzddICsgYls3XSAqIHNjYWxlO1xuICBvdXRbOF0gPSBhWzhdICsgYls4XSAqIHNjYWxlO1xuICBvdXRbOV0gPSBhWzldICsgYls5XSAqIHNjYWxlO1xuICBvdXRbMTBdID0gYVsxMF0gKyBiWzEwXSAqIHNjYWxlO1xuICBvdXRbMTFdID0gYVsxMV0gKyBiWzExXSAqIHNjYWxlO1xuICBvdXRbMTJdID0gYVsxMl0gKyBiWzEyXSAqIHNjYWxlO1xuICBvdXRbMTNdID0gYVsxM10gKyBiWzEzXSAqIHNjYWxlO1xuICBvdXRbMTRdID0gYVsxNF0gKyBiWzE0XSAqIHNjYWxlO1xuICBvdXRbMTVdID0gYVsxNV0gKyBiWzE1XSAqIHNjYWxlO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIG1hdHJpY2VzIGhhdmUgZXhhY3RseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbiAod2hlbiBjb21wYXJlZCB3aXRoID09PSlcclxuICpcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgVGhlIGZpcnN0IG1hdHJpeC5cclxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGIgVGhlIHNlY29uZCBtYXRyaXguXHJcbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBtYXRyaWNlcyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBleGFjdEVxdWFscyhhLCBiKSB7XG4gIHJldHVybiBhWzBdID09PSBiWzBdICYmIGFbMV0gPT09IGJbMV0gJiYgYVsyXSA9PT0gYlsyXSAmJiBhWzNdID09PSBiWzNdICYmIGFbNF0gPT09IGJbNF0gJiYgYVs1XSA9PT0gYls1XSAmJiBhWzZdID09PSBiWzZdICYmIGFbN10gPT09IGJbN10gJiYgYVs4XSA9PT0gYls4XSAmJiBhWzldID09PSBiWzldICYmIGFbMTBdID09PSBiWzEwXSAmJiBhWzExXSA9PT0gYlsxMV0gJiYgYVsxMl0gPT09IGJbMTJdICYmIGFbMTNdID09PSBiWzEzXSAmJiBhWzE0XSA9PT0gYlsxNF0gJiYgYVsxNV0gPT09IGJbMTVdO1xufVxuLyoqXHJcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIG1hdHJpY2VzIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbi5cclxuICpcclxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGEgVGhlIGZpcnN0IG1hdHJpeC5cclxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IGIgVGhlIHNlY29uZCBtYXRyaXguXHJcbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSBtYXRyaWNlcyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICB2YXIgYTAgPSBhWzBdLFxuICAgICAgYTEgPSBhWzFdLFxuICAgICAgYTIgPSBhWzJdLFxuICAgICAgYTMgPSBhWzNdO1xuICB2YXIgYTQgPSBhWzRdLFxuICAgICAgYTUgPSBhWzVdLFxuICAgICAgYTYgPSBhWzZdLFxuICAgICAgYTcgPSBhWzddO1xuICB2YXIgYTggPSBhWzhdLFxuICAgICAgYTkgPSBhWzldLFxuICAgICAgYTEwID0gYVsxMF0sXG4gICAgICBhMTEgPSBhWzExXTtcbiAgdmFyIGExMiA9IGFbMTJdLFxuICAgICAgYTEzID0gYVsxM10sXG4gICAgICBhMTQgPSBhWzE0XSxcbiAgICAgIGExNSA9IGFbMTVdO1xuICB2YXIgYjAgPSBiWzBdLFxuICAgICAgYjEgPSBiWzFdLFxuICAgICAgYjIgPSBiWzJdLFxuICAgICAgYjMgPSBiWzNdO1xuICB2YXIgYjQgPSBiWzRdLFxuICAgICAgYjUgPSBiWzVdLFxuICAgICAgYjYgPSBiWzZdLFxuICAgICAgYjcgPSBiWzddO1xuICB2YXIgYjggPSBiWzhdLFxuICAgICAgYjkgPSBiWzldLFxuICAgICAgYjEwID0gYlsxMF0sXG4gICAgICBiMTEgPSBiWzExXTtcbiAgdmFyIGIxMiA9IGJbMTJdLFxuICAgICAgYjEzID0gYlsxM10sXG4gICAgICBiMTQgPSBiWzE0XSxcbiAgICAgIGIxNSA9IGJbMTVdO1xuICByZXR1cm4gTWF0aC5hYnMoYTAgLSBiMCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTApLCBNYXRoLmFicyhiMCkpICYmIE1hdGguYWJzKGExIC0gYjEpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExKSwgTWF0aC5hYnMoYjEpKSAmJiBNYXRoLmFicyhhMiAtIGIyKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMiksIE1hdGguYWJzKGIyKSkgJiYgTWF0aC5hYnMoYTMgLSBiMykgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTMpLCBNYXRoLmFicyhiMykpICYmIE1hdGguYWJzKGE0IC0gYjQpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE0KSwgTWF0aC5hYnMoYjQpKSAmJiBNYXRoLmFicyhhNSAtIGI1KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhNSksIE1hdGguYWJzKGI1KSkgJiYgTWF0aC5hYnMoYTYgLSBiNikgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTYpLCBNYXRoLmFicyhiNikpICYmIE1hdGguYWJzKGE3IC0gYjcpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGE3KSwgTWF0aC5hYnMoYjcpKSAmJiBNYXRoLmFicyhhOCAtIGI4KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhOCksIE1hdGguYWJzKGI4KSkgJiYgTWF0aC5hYnMoYTkgLSBiOSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTkpLCBNYXRoLmFicyhiOSkpICYmIE1hdGguYWJzKGExMCAtIGIxMCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTEwKSwgTWF0aC5hYnMoYjEwKSkgJiYgTWF0aC5hYnMoYTExIC0gYjExKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMTEpLCBNYXRoLmFicyhiMTEpKSAmJiBNYXRoLmFicyhhMTIgLSBiMTIpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExMiksIE1hdGguYWJzKGIxMikpICYmIE1hdGguYWJzKGExMyAtIGIxMykgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTEzKSwgTWF0aC5hYnMoYjEzKSkgJiYgTWF0aC5hYnMoYTE0IC0gYjE0KSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMTQpLCBNYXRoLmFicyhiMTQpKSAmJiBNYXRoLmFicyhhMTUgLSBiMTUpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExNSksIE1hdGguYWJzKGIxNSkpO1xufVxuLyoqXHJcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0NC5tdWx0aXBseX1cclxuICogQGZ1bmN0aW9uXHJcbiAqL1xuXG5leHBvcnQgdmFyIG11bCA9IG11bHRpcGx5O1xuLyoqXHJcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0NC5zdWJ0cmFjdH1cclxuICogQGZ1bmN0aW9uXHJcbiAqL1xuXG5leHBvcnQgdmFyIHN1YiA9IHN1YnRyYWN0OyIsImltcG9ydCAqIGFzIGdsTWF0cml4IGZyb20gXCIuL2NvbW1vbi5qc1wiO1xuLyoqXHJcbiAqIDMgRGltZW5zaW9uYWwgVmVjdG9yXHJcbiAqIEBtb2R1bGUgdmVjM1xyXG4gKi9cblxuLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcsIGVtcHR5IHZlYzNcclxuICpcclxuICogQHJldHVybnMge3ZlYzN9IGEgbmV3IDNEIHZlY3RvclxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgdmFyIG91dCA9IG5ldyBnbE1hdHJpeC5BUlJBWV9UWVBFKDMpO1xuXG4gIGlmIChnbE1hdHJpeC5BUlJBWV9UWVBFICE9IEZsb2F0MzJBcnJheSkge1xuICAgIG91dFswXSA9IDA7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IHZlYzMgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyB2ZWN0b3JcclxuICpcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIGNsb25lXHJcbiAqIEByZXR1cm5zIHt2ZWMzfSBhIG5ldyAzRCB2ZWN0b3JcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShhKSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSgzKTtcbiAgb3V0WzBdID0gYVswXTtcbiAgb3V0WzFdID0gYVsxXTtcbiAgb3V0WzJdID0gYVsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSB2ZWMzXHJcbiAqXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBjYWxjdWxhdGUgbGVuZ3RoIG9mXHJcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGxlbmd0aCBvZiBhXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGVuZ3RoKGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgcmV0dXJuIE1hdGguaHlwb3QoeCwgeSwgeik7XG59XG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyB2ZWMzIGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xyXG4gKlxyXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxyXG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxyXG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxyXG4gKiBAcmV0dXJucyB7dmVjM30gYSBuZXcgM0QgdmVjdG9yXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVZhbHVlcyh4LCB5LCB6KSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSgzKTtcbiAgb3V0WzBdID0geDtcbiAgb3V0WzFdID0geTtcbiAgb3V0WzJdID0gejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgdmVjMyB0byBhbm90aGVyXHJcbiAqXHJcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBzb3VyY2UgdmVjdG9yXHJcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzMgdG8gdGhlIGdpdmVuIHZhbHVlc1xyXG4gKlxyXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxyXG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxyXG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxyXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0KG91dCwgeCwgeSwgeikge1xuICBvdXRbMF0gPSB4O1xuICBvdXRbMV0gPSB5O1xuICBvdXRbMl0gPSB6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIEFkZHMgdHdvIHZlYzMnc1xyXG4gKlxyXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcclxuICogQHJldHVybnMge3ZlYzN9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBTdWJ0cmFjdHMgdmVjdG9yIGIgZnJvbSB2ZWN0b3IgYVxyXG4gKlxyXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcclxuICogQHJldHVybnMge3ZlYzN9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YnRyYWN0KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdIC0gYlswXTtcbiAgb3V0WzFdID0gYVsxXSAtIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gLSBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIE11bHRpcGxpZXMgdHdvIHZlYzMnc1xyXG4gKlxyXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcclxuICogQHJldHVybnMge3ZlYzN9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYlswXTtcbiAgb3V0WzFdID0gYVsxXSAqIGJbMV07XG4gIG91dFsyXSA9IGFbMl0gKiBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIERpdmlkZXMgdHdvIHZlYzMnc1xyXG4gKlxyXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcclxuICogQHJldHVybnMge3ZlYzN9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRpdmlkZShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAvIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLyBiWzFdO1xuICBvdXRbMl0gPSBhWzJdIC8gYlsyXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBNYXRoLmNlaWwgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzXHJcbiAqXHJcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBjZWlsXHJcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjZWlsKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLmNlaWwoYVswXSk7XG4gIG91dFsxXSA9IE1hdGguY2VpbChhWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5jZWlsKGFbMl0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIE1hdGguZmxvb3IgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzXHJcbiAqXHJcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBmbG9vclxyXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZmxvb3Iob3V0LCBhKSB7XG4gIG91dFswXSA9IE1hdGguZmxvb3IoYVswXSk7XG4gIG91dFsxXSA9IE1hdGguZmxvb3IoYVsxXSk7XG4gIG91dFsyXSA9IE1hdGguZmxvb3IoYVsyXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogUmV0dXJucyB0aGUgbWluaW11bSBvZiB0d28gdmVjMydzXHJcbiAqXHJcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxyXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWluKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBNYXRoLm1pbihhWzBdLCBiWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5taW4oYVsxXSwgYlsxXSk7XG4gIG91dFsyXSA9IE1hdGgubWluKGFbMl0sIGJbMl0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFJldHVybnMgdGhlIG1heGltdW0gb2YgdHdvIHZlYzMnc1xyXG4gKlxyXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcclxuICogQHJldHVybnMge3ZlYzN9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIG1heChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gTWF0aC5tYXgoYVswXSwgYlswXSk7XG4gIG91dFsxXSA9IE1hdGgubWF4KGFbMV0sIGJbMV0pO1xuICBvdXRbMl0gPSBNYXRoLm1heChhWzJdLCBiWzJdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBNYXRoLnJvdW5kIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjM1xyXG4gKlxyXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gcm91bmRcclxuICogQHJldHVybnMge3ZlYzN9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdW5kKG91dCwgYSkge1xuICBvdXRbMF0gPSBNYXRoLnJvdW5kKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLnJvdW5kKGFbMV0pO1xuICBvdXRbMl0gPSBNYXRoLnJvdW5kKGFbMl0pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFNjYWxlcyBhIHZlYzMgYnkgYSBzY2FsYXIgbnVtYmVyXHJcbiAqXHJcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSB2ZWN0b3IgdG8gc2NhbGVcclxuICogQHBhcmFtIHtOdW1iZXJ9IGIgYW1vdW50IHRvIHNjYWxlIHRoZSB2ZWN0b3IgYnlcclxuICogQHJldHVybnMge3ZlYzN9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBhWzBdICogYjtcbiAgb3V0WzFdID0gYVsxXSAqIGI7XG4gIG91dFsyXSA9IGFbMl0gKiBiO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIEFkZHMgdHdvIHZlYzMncyBhZnRlciBzY2FsaW5nIHRoZSBzZWNvbmQgb3BlcmFuZCBieSBhIHNjYWxhciB2YWx1ZVxyXG4gKlxyXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcclxuICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlIHRoZSBhbW91bnQgdG8gc2NhbGUgYiBieSBiZWZvcmUgYWRkaW5nXHJcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZUFuZEFkZChvdXQsIGEsIGIsIHNjYWxlKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdICogc2NhbGU7XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdICogc2NhbGU7XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdICogc2NhbGU7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogQ2FsY3VsYXRlcyB0aGUgZXVjbGlkaWFuIGRpc3RhbmNlIGJldHdlZW4gdHdvIHZlYzMnc1xyXG4gKlxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcclxuICogQHJldHVybnMge051bWJlcn0gZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2UoYSwgYikge1xuICB2YXIgeCA9IGJbMF0gLSBhWzBdO1xuICB2YXIgeSA9IGJbMV0gLSBhWzFdO1xuICB2YXIgeiA9IGJbMl0gLSBhWzJdO1xuICByZXR1cm4gTWF0aC5oeXBvdCh4LCB5LCB6KTtcbn1cbi8qKlxyXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGV1Y2xpZGlhbiBkaXN0YW5jZSBiZXR3ZWVuIHR3byB2ZWMzJ3NcclxuICpcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXHJcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlKGEsIGIpIHtcbiAgdmFyIHggPSBiWzBdIC0gYVswXTtcbiAgdmFyIHkgPSBiWzFdIC0gYVsxXTtcbiAgdmFyIHogPSBiWzJdIC0gYVsyXTtcbiAgcmV0dXJuIHggKiB4ICsgeSAqIHkgKyB6ICogejtcbn1cbi8qKlxyXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGxlbmd0aCBvZiBhIHZlYzNcclxuICpcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBzcXVhcmVkIGxlbmd0aCBvZlxyXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGxlbmd0aCBvZiBhXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZExlbmd0aChhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHJldHVybiB4ICogeCArIHkgKiB5ICsgeiAqIHo7XG59XG4vKipcclxuICogTmVnYXRlcyB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzNcclxuICpcclxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdmVjdG9yIHRvIG5lZ2F0ZVxyXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbmVnYXRlKG91dCwgYSkge1xuICBvdXRbMF0gPSAtYVswXTtcbiAgb3V0WzFdID0gLWFbMV07XG4gIG91dFsyXSA9IC1hWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFJldHVybnMgdGhlIGludmVyc2Ugb2YgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzXHJcbiAqXHJcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHZlY3RvciB0byBpbnZlcnRcclxuICogQHJldHVybnMge3ZlYzN9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGludmVyc2Uob3V0LCBhKSB7XG4gIG91dFswXSA9IDEuMCAvIGFbMF07XG4gIG91dFsxXSA9IDEuMCAvIGFbMV07XG4gIG91dFsyXSA9IDEuMCAvIGFbMl07XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogTm9ybWFsaXplIGEgdmVjM1xyXG4gKlxyXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gbm9ybWFsaXplXHJcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUob3V0LCBhKSB7XG4gIHZhciB4ID0gYVswXTtcbiAgdmFyIHkgPSBhWzFdO1xuICB2YXIgeiA9IGFbMl07XG4gIHZhciBsZW4gPSB4ICogeCArIHkgKiB5ICsgeiAqIHo7XG5cbiAgaWYgKGxlbiA+IDApIHtcbiAgICAvL1RPRE86IGV2YWx1YXRlIHVzZSBvZiBnbG1faW52c3FydCBoZXJlP1xuICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQobGVuKTtcbiAgfVxuXG4gIG91dFswXSA9IGFbMF0gKiBsZW47XG4gIG91dFsxXSA9IGFbMV0gKiBsZW47XG4gIG91dFsyXSA9IGFbMl0gKiBsZW47XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogQ2FsY3VsYXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlYzMnc1xyXG4gKlxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcclxuICogQHJldHVybnMge051bWJlcn0gZG90IHByb2R1Y3Qgb2YgYSBhbmQgYlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRvdChhLCBiKSB7XG4gIHJldHVybiBhWzBdICogYlswXSArIGFbMV0gKiBiWzFdICsgYVsyXSAqIGJbMl07XG59XG4vKipcclxuICogQ29tcHV0ZXMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdHdvIHZlYzMnc1xyXG4gKlxyXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcclxuICogQHJldHVybnMge3ZlYzN9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGNyb3NzKG91dCwgYSwgYikge1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdO1xuICB2YXIgYnggPSBiWzBdLFxuICAgICAgYnkgPSBiWzFdLFxuICAgICAgYnogPSBiWzJdO1xuICBvdXRbMF0gPSBheSAqIGJ6IC0gYXogKiBieTtcbiAgb3V0WzFdID0gYXogKiBieCAtIGF4ICogYno7XG4gIG91dFsyXSA9IGF4ICogYnkgLSBheSAqIGJ4O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFBlcmZvcm1zIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjMydzXHJcbiAqXHJcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXHJcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsZXJwKG91dCwgYSwgYiwgdCkge1xuICB2YXIgYXggPSBhWzBdO1xuICB2YXIgYXkgPSBhWzFdO1xuICB2YXIgYXogPSBhWzJdO1xuICBvdXRbMF0gPSBheCArIHQgKiAoYlswXSAtIGF4KTtcbiAgb3V0WzFdID0gYXkgKyB0ICogKGJbMV0gLSBheSk7XG4gIG91dFsyXSA9IGF6ICsgdCAqIChiWzJdIC0gYXopO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFBlcmZvcm1zIGEgaGVybWl0ZSBpbnRlcnBvbGF0aW9uIHdpdGggdHdvIGNvbnRyb2wgcG9pbnRzXHJcbiAqXHJcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYyB0aGUgdGhpcmQgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gZCB0aGUgZm91cnRoIG9wZXJhbmRcclxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQsIGluIHRoZSByYW5nZSBbMC0xXSwgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xyXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaGVybWl0ZShvdXQsIGEsIGIsIGMsIGQsIHQpIHtcbiAgdmFyIGZhY3RvclRpbWVzMiA9IHQgKiB0O1xuICB2YXIgZmFjdG9yMSA9IGZhY3RvclRpbWVzMiAqICgyICogdCAtIDMpICsgMTtcbiAgdmFyIGZhY3RvcjIgPSBmYWN0b3JUaW1lczIgKiAodCAtIDIpICsgdDtcbiAgdmFyIGZhY3RvcjMgPSBmYWN0b3JUaW1lczIgKiAodCAtIDEpO1xuICB2YXIgZmFjdG9yNCA9IGZhY3RvclRpbWVzMiAqICgzIC0gMiAqIHQpO1xuICBvdXRbMF0gPSBhWzBdICogZmFjdG9yMSArIGJbMF0gKiBmYWN0b3IyICsgY1swXSAqIGZhY3RvcjMgKyBkWzBdICogZmFjdG9yNDtcbiAgb3V0WzFdID0gYVsxXSAqIGZhY3RvcjEgKyBiWzFdICogZmFjdG9yMiArIGNbMV0gKiBmYWN0b3IzICsgZFsxXSAqIGZhY3RvcjQ7XG4gIG91dFsyXSA9IGFbMl0gKiBmYWN0b3IxICsgYlsyXSAqIGZhY3RvcjIgKyBjWzJdICogZmFjdG9yMyArIGRbMl0gKiBmYWN0b3I0O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFBlcmZvcm1zIGEgYmV6aWVyIGludGVycG9sYXRpb24gd2l0aCB0d28gY29udHJvbCBwb2ludHNcclxuICpcclxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBjIHRoZSB0aGlyZCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBkIHRoZSBmb3VydGggb3BlcmFuZFxyXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXHJcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBiZXppZXIob3V0LCBhLCBiLCBjLCBkLCB0KSB7XG4gIHZhciBpbnZlcnNlRmFjdG9yID0gMSAtIHQ7XG4gIHZhciBpbnZlcnNlRmFjdG9yVGltZXNUd28gPSBpbnZlcnNlRmFjdG9yICogaW52ZXJzZUZhY3RvcjtcbiAgdmFyIGZhY3RvclRpbWVzMiA9IHQgKiB0O1xuICB2YXIgZmFjdG9yMSA9IGludmVyc2VGYWN0b3JUaW1lc1R3byAqIGludmVyc2VGYWN0b3I7XG4gIHZhciBmYWN0b3IyID0gMyAqIHQgKiBpbnZlcnNlRmFjdG9yVGltZXNUd287XG4gIHZhciBmYWN0b3IzID0gMyAqIGZhY3RvclRpbWVzMiAqIGludmVyc2VGYWN0b3I7XG4gIHZhciBmYWN0b3I0ID0gZmFjdG9yVGltZXMyICogdDtcbiAgb3V0WzBdID0gYVswXSAqIGZhY3RvcjEgKyBiWzBdICogZmFjdG9yMiArIGNbMF0gKiBmYWN0b3IzICsgZFswXSAqIGZhY3RvcjQ7XG4gIG91dFsxXSA9IGFbMV0gKiBmYWN0b3IxICsgYlsxXSAqIGZhY3RvcjIgKyBjWzFdICogZmFjdG9yMyArIGRbMV0gKiBmYWN0b3I0O1xuICBvdXRbMl0gPSBhWzJdICogZmFjdG9yMSArIGJbMl0gKiBmYWN0b3IyICsgY1syXSAqIGZhY3RvcjMgKyBkWzJdICogZmFjdG9yNDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSByYW5kb20gdmVjdG9yIHdpdGggdGhlIGdpdmVuIHNjYWxlXHJcbiAqXHJcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBbc2NhbGVdIExlbmd0aCBvZiB0aGUgcmVzdWx0aW5nIHZlY3Rvci4gSWYgb21taXR0ZWQsIGEgdW5pdCB2ZWN0b3Igd2lsbCBiZSByZXR1cm5lZFxyXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tKG91dCwgc2NhbGUpIHtcbiAgc2NhbGUgPSBzY2FsZSB8fCAxLjA7XG4gIHZhciByID0gZ2xNYXRyaXguUkFORE9NKCkgKiAyLjAgKiBNYXRoLlBJO1xuICB2YXIgeiA9IGdsTWF0cml4LlJBTkRPTSgpICogMi4wIC0gMS4wO1xuICB2YXIgelNjYWxlID0gTWF0aC5zcXJ0KDEuMCAtIHogKiB6KSAqIHNjYWxlO1xuICBvdXRbMF0gPSBNYXRoLmNvcyhyKSAqIHpTY2FsZTtcbiAgb3V0WzFdID0gTWF0aC5zaW4ocikgKiB6U2NhbGU7XG4gIG91dFsyXSA9IHogKiBzY2FsZTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWMzIHdpdGggYSBtYXQ0LlxyXG4gKiA0dGggdmVjdG9yIGNvbXBvbmVudCBpcyBpbXBsaWNpdGx5ICcxJ1xyXG4gKlxyXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5TWF0NH0gbSBtYXRyaXggdG8gdHJhbnNmb3JtIHdpdGhcclxuICogQHJldHVybnMge3ZlYzN9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybU1hdDQob3V0LCBhLCBtKSB7XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdLFxuICAgICAgeiA9IGFbMl07XG4gIHZhciB3ID0gbVszXSAqIHggKyBtWzddICogeSArIG1bMTFdICogeiArIG1bMTVdO1xuICB3ID0gdyB8fCAxLjA7XG4gIG91dFswXSA9IChtWzBdICogeCArIG1bNF0gKiB5ICsgbVs4XSAqIHogKyBtWzEyXSkgLyB3O1xuICBvdXRbMV0gPSAobVsxXSAqIHggKyBtWzVdICogeSArIG1bOV0gKiB6ICsgbVsxM10pIC8gdztcbiAgb3V0WzJdID0gKG1bMl0gKiB4ICsgbVs2XSAqIHkgKyBtWzEwXSAqIHogKyBtWzE0XSkgLyB3O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzMgd2l0aCBhIG1hdDMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBtIHRoZSAzeDMgbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXHJcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1NYXQzKG91dCwgYSwgbSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdO1xuICBvdXRbMF0gPSB4ICogbVswXSArIHkgKiBtWzNdICsgeiAqIG1bNl07XG4gIG91dFsxXSA9IHggKiBtWzFdICsgeSAqIG1bNF0gKyB6ICogbVs3XTtcbiAgb3V0WzJdID0geCAqIG1bMl0gKyB5ICogbVs1XSArIHogKiBtWzhdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzMgd2l0aCBhIHF1YXRcclxuICogQ2FuIGFsc28gYmUgdXNlZCBmb3IgZHVhbCBxdWF0ZXJuaW9ucy4gKE11bHRpcGx5IGl0IHdpdGggdGhlIHJlYWwgcGFydClcclxuICpcclxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cclxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgcXVhdGVybmlvbiB0byB0cmFuc2Zvcm0gd2l0aFxyXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtUXVhdChvdXQsIGEsIHEpIHtcbiAgLy8gYmVuY2htYXJrczogaHR0cHM6Ly9qc3BlcmYuY29tL3F1YXRlcm5pb24tdHJhbnNmb3JtLXZlYzMtaW1wbGVtZW50YXRpb25zLWZpeGVkXG4gIHZhciBxeCA9IHFbMF0sXG4gICAgICBxeSA9IHFbMV0sXG4gICAgICBxeiA9IHFbMl0sXG4gICAgICBxdyA9IHFbM107XG4gIHZhciB4ID0gYVswXSxcbiAgICAgIHkgPSBhWzFdLFxuICAgICAgeiA9IGFbMl07IC8vIHZhciBxdmVjID0gW3F4LCBxeSwgcXpdO1xuICAvLyB2YXIgdXYgPSB2ZWMzLmNyb3NzKFtdLCBxdmVjLCBhKTtcblxuICB2YXIgdXZ4ID0gcXkgKiB6IC0gcXogKiB5LFxuICAgICAgdXZ5ID0gcXogKiB4IC0gcXggKiB6LFxuICAgICAgdXZ6ID0gcXggKiB5IC0gcXkgKiB4OyAvLyB2YXIgdXV2ID0gdmVjMy5jcm9zcyhbXSwgcXZlYywgdXYpO1xuXG4gIHZhciB1dXZ4ID0gcXkgKiB1dnogLSBxeiAqIHV2eSxcbiAgICAgIHV1dnkgPSBxeiAqIHV2eCAtIHF4ICogdXZ6LFxuICAgICAgdXV2eiA9IHF4ICogdXZ5IC0gcXkgKiB1dng7IC8vIHZlYzMuc2NhbGUodXYsIHV2LCAyICogdyk7XG5cbiAgdmFyIHcyID0gcXcgKiAyO1xuICB1dnggKj0gdzI7XG4gIHV2eSAqPSB3MjtcbiAgdXZ6ICo9IHcyOyAvLyB2ZWMzLnNjYWxlKHV1diwgdXV2LCAyKTtcblxuICB1dXZ4ICo9IDI7XG4gIHV1dnkgKj0gMjtcbiAgdXV2eiAqPSAyOyAvLyByZXR1cm4gdmVjMy5hZGQob3V0LCBhLCB2ZWMzLmFkZChvdXQsIHV2LCB1dXYpKTtcblxuICBvdXRbMF0gPSB4ICsgdXZ4ICsgdXV2eDtcbiAgb3V0WzFdID0geSArIHV2eSArIHV1dnk7XG4gIG91dFsyXSA9IHogKyB1dnogKyB1dXZ6O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFJvdGF0ZSBhIDNEIHZlY3RvciBhcm91bmQgdGhlIHgtYXhpc1xyXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCBUaGUgcmVjZWl2aW5nIHZlYzNcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgVGhlIHZlYzMgcG9pbnQgdG8gcm90YXRlXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIFRoZSBvcmlnaW4gb2YgdGhlIHJvdGF0aW9uXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgVGhlIGFuZ2xlIG9mIHJvdGF0aW9uIGluIHJhZGlhbnNcclxuICogQHJldHVybnMge3ZlYzN9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVgob3V0LCBhLCBiLCByYWQpIHtcbiAgdmFyIHAgPSBbXSxcbiAgICAgIHIgPSBbXTsgLy9UcmFuc2xhdGUgcG9pbnQgdG8gdGhlIG9yaWdpblxuXG4gIHBbMF0gPSBhWzBdIC0gYlswXTtcbiAgcFsxXSA9IGFbMV0gLSBiWzFdO1xuICBwWzJdID0gYVsyXSAtIGJbMl07IC8vcGVyZm9ybSByb3RhdGlvblxuXG4gIHJbMF0gPSBwWzBdO1xuICByWzFdID0gcFsxXSAqIE1hdGguY29zKHJhZCkgLSBwWzJdICogTWF0aC5zaW4ocmFkKTtcbiAgclsyXSA9IHBbMV0gKiBNYXRoLnNpbihyYWQpICsgcFsyXSAqIE1hdGguY29zKHJhZCk7IC8vdHJhbnNsYXRlIHRvIGNvcnJlY3QgcG9zaXRpb25cblxuICBvdXRbMF0gPSByWzBdICsgYlswXTtcbiAgb3V0WzFdID0gclsxXSArIGJbMV07XG4gIG91dFsyXSA9IHJbMl0gKyBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFJvdGF0ZSBhIDNEIHZlY3RvciBhcm91bmQgdGhlIHktYXhpc1xyXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCBUaGUgcmVjZWl2aW5nIHZlYzNcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgVGhlIHZlYzMgcG9pbnQgdG8gcm90YXRlXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIFRoZSBvcmlnaW4gb2YgdGhlIHJvdGF0aW9uXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgVGhlIGFuZ2xlIG9mIHJvdGF0aW9uIGluIHJhZGlhbnNcclxuICogQHJldHVybnMge3ZlYzN9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVkob3V0LCBhLCBiLCByYWQpIHtcbiAgdmFyIHAgPSBbXSxcbiAgICAgIHIgPSBbXTsgLy9UcmFuc2xhdGUgcG9pbnQgdG8gdGhlIG9yaWdpblxuXG4gIHBbMF0gPSBhWzBdIC0gYlswXTtcbiAgcFsxXSA9IGFbMV0gLSBiWzFdO1xuICBwWzJdID0gYVsyXSAtIGJbMl07IC8vcGVyZm9ybSByb3RhdGlvblxuXG4gIHJbMF0gPSBwWzJdICogTWF0aC5zaW4ocmFkKSArIHBbMF0gKiBNYXRoLmNvcyhyYWQpO1xuICByWzFdID0gcFsxXTtcbiAgclsyXSA9IHBbMl0gKiBNYXRoLmNvcyhyYWQpIC0gcFswXSAqIE1hdGguc2luKHJhZCk7IC8vdHJhbnNsYXRlIHRvIGNvcnJlY3QgcG9zaXRpb25cblxuICBvdXRbMF0gPSByWzBdICsgYlswXTtcbiAgb3V0WzFdID0gclsxXSArIGJbMV07XG4gIG91dFsyXSA9IHJbMl0gKyBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFJvdGF0ZSBhIDNEIHZlY3RvciBhcm91bmQgdGhlIHotYXhpc1xyXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCBUaGUgcmVjZWl2aW5nIHZlYzNcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgVGhlIHZlYzMgcG9pbnQgdG8gcm90YXRlXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIFRoZSBvcmlnaW4gb2YgdGhlIHJvdGF0aW9uXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgVGhlIGFuZ2xlIG9mIHJvdGF0aW9uIGluIHJhZGlhbnNcclxuICogQHJldHVybnMge3ZlYzN9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZVoob3V0LCBhLCBiLCByYWQpIHtcbiAgdmFyIHAgPSBbXSxcbiAgICAgIHIgPSBbXTsgLy9UcmFuc2xhdGUgcG9pbnQgdG8gdGhlIG9yaWdpblxuXG4gIHBbMF0gPSBhWzBdIC0gYlswXTtcbiAgcFsxXSA9IGFbMV0gLSBiWzFdO1xuICBwWzJdID0gYVsyXSAtIGJbMl07IC8vcGVyZm9ybSByb3RhdGlvblxuXG4gIHJbMF0gPSBwWzBdICogTWF0aC5jb3MocmFkKSAtIHBbMV0gKiBNYXRoLnNpbihyYWQpO1xuICByWzFdID0gcFswXSAqIE1hdGguc2luKHJhZCkgKyBwWzFdICogTWF0aC5jb3MocmFkKTtcbiAgclsyXSA9IHBbMl07IC8vdHJhbnNsYXRlIHRvIGNvcnJlY3QgcG9zaXRpb25cblxuICBvdXRbMF0gPSByWzBdICsgYlswXTtcbiAgb3V0WzFdID0gclsxXSArIGJbMV07XG4gIG91dFsyXSA9IHJbMl0gKyBiWzJdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIEdldCB0aGUgYW5nbGUgYmV0d2VlbiB0d28gM0QgdmVjdG9yc1xyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSBUaGUgZmlyc3Qgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiBUaGUgc2Vjb25kIG9wZXJhbmRcclxuICogQHJldHVybnMge051bWJlcn0gVGhlIGFuZ2xlIGluIHJhZGlhbnNcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBhbmdsZShhLCBiKSB7XG4gIHZhciBheCA9IGFbMF0sXG4gICAgICBheSA9IGFbMV0sXG4gICAgICBheiA9IGFbMl0sXG4gICAgICBieCA9IGJbMF0sXG4gICAgICBieSA9IGJbMV0sXG4gICAgICBieiA9IGJbMl0sXG4gICAgICBtYWcxID0gTWF0aC5zcXJ0KGF4ICogYXggKyBheSAqIGF5ICsgYXogKiBheiksXG4gICAgICBtYWcyID0gTWF0aC5zcXJ0KGJ4ICogYnggKyBieSAqIGJ5ICsgYnogKiBieiksXG4gICAgICBtYWcgPSBtYWcxICogbWFnMixcbiAgICAgIGNvc2luZSA9IG1hZyAmJiBkb3QoYSwgYikgLyBtYWc7XG4gIHJldHVybiBNYXRoLmFjb3MoTWF0aC5taW4oTWF0aC5tYXgoY29zaW5lLCAtMSksIDEpKTtcbn1cbi8qKlxyXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzIHRvIHplcm9cclxuICpcclxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcclxuICogQHJldHVybnMge3ZlYzN9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHplcm8ob3V0KSB7XG4gIG91dFswXSA9IDAuMDtcbiAgb3V0WzFdID0gMC4wO1xuICBvdXRbMl0gPSAwLjA7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHZlY3RvclxyXG4gKlxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSB2ZWN0b3IgdG8gcmVwcmVzZW50IGFzIGEgc3RyaW5nXHJcbiAqIEByZXR1cm5zIHtTdHJpbmd9IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVjdG9yXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyKGEpIHtcbiAgcmV0dXJuIFwidmVjMyhcIiArIGFbMF0gKyBcIiwgXCIgKyBhWzFdICsgXCIsIFwiICsgYVsyXSArIFwiKVwiO1xufVxuLyoqXHJcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHZlY3RvcnMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxyXG4gKlxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYSBUaGUgZmlyc3QgdmVjdG9yLlxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gYiBUaGUgc2Vjb25kIHZlY3Rvci5cclxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIHZlY3RvcnMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhhY3RFcXVhbHMoYSwgYikge1xuICByZXR1cm4gYVswXSA9PT0gYlswXSAmJiBhWzFdID09PSBiWzFdICYmIGFbMl0gPT09IGJbMl07XG59XG4vKipcclxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgdmVjdG9ycyBoYXZlIGFwcHJveGltYXRlbHkgdGhlIHNhbWUgZWxlbWVudHMgaW4gdGhlIHNhbWUgcG9zaXRpb24uXHJcbiAqXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBhIFRoZSBmaXJzdCB2ZWN0b3IuXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIFRoZSBzZWNvbmQgdmVjdG9yLlxyXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmVjdG9ycyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYSwgYikge1xuICB2YXIgYTAgPSBhWzBdLFxuICAgICAgYTEgPSBhWzFdLFxuICAgICAgYTIgPSBhWzJdO1xuICB2YXIgYjAgPSBiWzBdLFxuICAgICAgYjEgPSBiWzFdLFxuICAgICAgYjIgPSBiWzJdO1xuICByZXR1cm4gTWF0aC5hYnMoYTAgLSBiMCkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTApLCBNYXRoLmFicyhiMCkpICYmIE1hdGguYWJzKGExIC0gYjEpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGExKSwgTWF0aC5hYnMoYjEpKSAmJiBNYXRoLmFicyhhMiAtIGIyKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMiksIE1hdGguYWJzKGIyKSk7XG59XG4vKipcclxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLnN1YnRyYWN0fVxyXG4gKiBAZnVuY3Rpb25cclxuICovXG5cbmV4cG9ydCB2YXIgc3ViID0gc3VidHJhY3Q7XG4vKipcclxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLm11bHRpcGx5fVxyXG4gKiBAZnVuY3Rpb25cclxuICovXG5cbmV4cG9ydCB2YXIgbXVsID0gbXVsdGlwbHk7XG4vKipcclxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLmRpdmlkZX1cclxuICogQGZ1bmN0aW9uXHJcbiAqL1xuXG5leHBvcnQgdmFyIGRpdiA9IGRpdmlkZTtcbi8qKlxyXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMuZGlzdGFuY2V9XHJcbiAqIEBmdW5jdGlvblxyXG4gKi9cblxuZXhwb3J0IHZhciBkaXN0ID0gZGlzdGFuY2U7XG4vKipcclxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLnNxdWFyZWREaXN0YW5jZX1cclxuICogQGZ1bmN0aW9uXHJcbiAqL1xuXG5leHBvcnQgdmFyIHNxckRpc3QgPSBzcXVhcmVkRGlzdGFuY2U7XG4vKipcclxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLmxlbmd0aH1cclxuICogQGZ1bmN0aW9uXHJcbiAqL1xuXG5leHBvcnQgdmFyIGxlbiA9IGxlbmd0aDtcbi8qKlxyXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMuc3F1YXJlZExlbmd0aH1cclxuICogQGZ1bmN0aW9uXHJcbiAqL1xuXG5leHBvcnQgdmFyIHNxckxlbiA9IHNxdWFyZWRMZW5ndGg7XG4vKipcclxuICogUGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvdmVyIGFuIGFycmF5IG9mIHZlYzNzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0FycmF5fSBhIHRoZSBhcnJheSBvZiB2ZWN0b3JzIHRvIGl0ZXJhdGUgb3ZlclxyXG4gKiBAcGFyYW0ge051bWJlcn0gc3RyaWRlIE51bWJlciBvZiBlbGVtZW50cyBiZXR3ZWVuIHRoZSBzdGFydCBvZiBlYWNoIHZlYzMuIElmIDAgYXNzdW1lcyB0aWdodGx5IHBhY2tlZFxyXG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IE51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5XHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBOdW1iZXIgb2YgdmVjM3MgdG8gaXRlcmF0ZSBvdmVyLiBJZiAwIGl0ZXJhdGVzIG92ZXIgZW50aXJlIGFycmF5XHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggdmVjdG9yIGluIHRoZSBhcnJheVxyXG4gKiBAcGFyYW0ge09iamVjdH0gW2FyZ10gYWRkaXRpb25hbCBhcmd1bWVudCB0byBwYXNzIHRvIGZuXHJcbiAqIEByZXR1cm5zIHtBcnJheX0gYVxyXG4gKiBAZnVuY3Rpb25cclxuICovXG5cbmV4cG9ydCB2YXIgZm9yRWFjaCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHZlYyA9IGNyZWF0ZSgpO1xuICByZXR1cm4gZnVuY3Rpb24gKGEsIHN0cmlkZSwgb2Zmc2V0LCBjb3VudCwgZm4sIGFyZykge1xuICAgIHZhciBpLCBsO1xuXG4gICAgaWYgKCFzdHJpZGUpIHtcbiAgICAgIHN0cmlkZSA9IDM7XG4gICAgfVxuXG4gICAgaWYgKCFvZmZzZXQpIHtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGNvdW50KSB7XG4gICAgICBsID0gTWF0aC5taW4oY291bnQgKiBzdHJpZGUgKyBvZmZzZXQsIGEubGVuZ3RoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbCA9IGEubGVuZ3RoO1xuICAgIH1cblxuICAgIGZvciAoaSA9IG9mZnNldDsgaSA8IGw7IGkgKz0gc3RyaWRlKSB7XG4gICAgICB2ZWNbMF0gPSBhW2ldO1xuICAgICAgdmVjWzFdID0gYVtpICsgMV07XG4gICAgICB2ZWNbMl0gPSBhW2kgKyAyXTtcbiAgICAgIGZuKHZlYywgdmVjLCBhcmcpO1xuICAgICAgYVtpXSA9IHZlY1swXTtcbiAgICAgIGFbaSArIDFdID0gdmVjWzFdO1xuICAgICAgYVtpICsgMl0gPSB2ZWNbMl07XG4gICAgfVxuXG4gICAgcmV0dXJuIGE7XG4gIH07XG59KCk7IiwiaW1wb3J0ICogYXMgZ2xNYXRyaXggZnJvbSBcIi4vY29tbW9uLmpzXCI7XG4vKipcclxuICogNCBEaW1lbnNpb25hbCBWZWN0b3JcclxuICogQG1vZHVsZSB2ZWM0XHJcbiAqL1xuXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldywgZW1wdHkgdmVjNFxyXG4gKlxyXG4gKiBAcmV0dXJucyB7dmVjNH0gYSBuZXcgNEQgdmVjdG9yXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoNCk7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyB2ZWM0IGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgdmVjdG9yXHJcbiAqXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBjbG9uZVxyXG4gKiBAcmV0dXJucyB7dmVjNH0gYSBuZXcgNEQgdmVjdG9yXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2xvbmUoYSkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoNCk7XG4gIG91dFswXSA9IGFbMF07XG4gIG91dFsxXSA9IGFbMV07XG4gIG91dFsyXSA9IGFbMl07XG4gIG91dFszXSA9IGFbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyB2ZWM0IGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xyXG4gKlxyXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxyXG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxyXG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxyXG4gKiBAcGFyYW0ge051bWJlcn0gdyBXIGNvbXBvbmVudFxyXG4gKiBAcmV0dXJucyB7dmVjNH0gYSBuZXcgNEQgdmVjdG9yXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVZhbHVlcyh4LCB5LCB6LCB3KSB7XG4gIHZhciBvdXQgPSBuZXcgZ2xNYXRyaXguQVJSQVlfVFlQRSg0KTtcbiAgb3V0WzBdID0geDtcbiAgb3V0WzFdID0geTtcbiAgb3V0WzJdID0gejtcbiAgb3V0WzNdID0gdztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgdmVjNCB0byBhbm90aGVyXHJcbiAqXHJcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBzb3VyY2UgdmVjdG9yXHJcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KG91dCwgYSkge1xuICBvdXRbMF0gPSBhWzBdO1xuICBvdXRbMV0gPSBhWzFdO1xuICBvdXRbMl0gPSBhWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzQgdG8gdGhlIGdpdmVuIHZhbHVlc1xyXG4gKlxyXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxyXG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxyXG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxyXG4gKiBAcGFyYW0ge051bWJlcn0gdyBXIGNvbXBvbmVudFxyXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0KG91dCwgeCwgeSwgeiwgdykge1xuICBvdXRbMF0gPSB4O1xuICBvdXRbMV0gPSB5O1xuICBvdXRbMl0gPSB6O1xuICBvdXRbM10gPSB3O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIEFkZHMgdHdvIHZlYzQnc1xyXG4gKlxyXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcclxuICogQHJldHVybnMge3ZlYzR9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSArIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdO1xuICBvdXRbMl0gPSBhWzJdICsgYlsyXTtcbiAgb3V0WzNdID0gYVszXSArIGJbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogU3VidHJhY3RzIHZlY3RvciBiIGZyb20gdmVjdG9yIGFcclxuICpcclxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXHJcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdWJ0cmFjdChvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAtIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLSBiWzFdO1xuICBvdXRbMl0gPSBhWzJdIC0gYlsyXTtcbiAgb3V0WzNdID0gYVszXSAtIGJbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogTXVsdGlwbGllcyB0d28gdmVjNCdzXHJcbiAqXHJcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxyXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKiBiWzBdO1xuICBvdXRbMV0gPSBhWzFdICogYlsxXTtcbiAgb3V0WzJdID0gYVsyXSAqIGJbMl07XG4gIG91dFszXSA9IGFbM10gKiBiWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIERpdmlkZXMgdHdvIHZlYzQnc1xyXG4gKlxyXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcclxuICogQHJldHVybnMge3ZlYzR9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRpdmlkZShvdXQsIGEsIGIpIHtcbiAgb3V0WzBdID0gYVswXSAvIGJbMF07XG4gIG91dFsxXSA9IGFbMV0gLyBiWzFdO1xuICBvdXRbMl0gPSBhWzJdIC8gYlsyXTtcbiAgb3V0WzNdID0gYVszXSAvIGJbM107XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogTWF0aC5jZWlsIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNFxyXG4gKlxyXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gY2VpbFxyXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2VpbChvdXQsIGEpIHtcbiAgb3V0WzBdID0gTWF0aC5jZWlsKGFbMF0pO1xuICBvdXRbMV0gPSBNYXRoLmNlaWwoYVsxXSk7XG4gIG91dFsyXSA9IE1hdGguY2VpbChhWzJdKTtcbiAgb3V0WzNdID0gTWF0aC5jZWlsKGFbM10pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIE1hdGguZmxvb3IgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0XHJcbiAqXHJcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byBmbG9vclxyXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZmxvb3Iob3V0LCBhKSB7XG4gIG91dFswXSA9IE1hdGguZmxvb3IoYVswXSk7XG4gIG91dFsxXSA9IE1hdGguZmxvb3IoYVsxXSk7XG4gIG91dFsyXSA9IE1hdGguZmxvb3IoYVsyXSk7XG4gIG91dFszXSA9IE1hdGguZmxvb3IoYVszXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogUmV0dXJucyB0aGUgbWluaW11bSBvZiB0d28gdmVjNCdzXHJcbiAqXHJcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxyXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbWluKG91dCwgYSwgYikge1xuICBvdXRbMF0gPSBNYXRoLm1pbihhWzBdLCBiWzBdKTtcbiAgb3V0WzFdID0gTWF0aC5taW4oYVsxXSwgYlsxXSk7XG4gIG91dFsyXSA9IE1hdGgubWluKGFbMl0sIGJbMl0pO1xuICBvdXRbM10gPSBNYXRoLm1pbihhWzNdLCBiWzNdKTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBtYXhpbXVtIG9mIHR3byB2ZWM0J3NcclxuICpcclxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXHJcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtYXgob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IE1hdGgubWF4KGFbMF0sIGJbMF0pO1xuICBvdXRbMV0gPSBNYXRoLm1heChhWzFdLCBiWzFdKTtcbiAgb3V0WzJdID0gTWF0aC5tYXgoYVsyXSwgYlsyXSk7XG4gIG91dFszXSA9IE1hdGgubWF4KGFbM10sIGJbM10pO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIE1hdGgucm91bmQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0XHJcbiAqXHJcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byByb3VuZFxyXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm91bmQob3V0LCBhKSB7XG4gIG91dFswXSA9IE1hdGgucm91bmQoYVswXSk7XG4gIG91dFsxXSA9IE1hdGgucm91bmQoYVsxXSk7XG4gIG91dFsyXSA9IE1hdGgucm91bmQoYVsyXSk7XG4gIG91dFszXSA9IE1hdGgucm91bmQoYVszXSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogU2NhbGVzIGEgdmVjNCBieSBhIHNjYWxhciBudW1iZXJcclxuICpcclxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIHZlY3RvciB0byBzY2FsZVxyXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHZlY3RvciBieVxyXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUob3V0LCBhLCBiKSB7XG4gIG91dFswXSA9IGFbMF0gKiBiO1xuICBvdXRbMV0gPSBhWzFdICogYjtcbiAgb3V0WzJdID0gYVsyXSAqIGI7XG4gIG91dFszXSA9IGFbM10gKiBiO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIEFkZHMgdHdvIHZlYzQncyBhZnRlciBzY2FsaW5nIHRoZSBzZWNvbmQgb3BlcmFuZCBieSBhIHNjYWxhciB2YWx1ZVxyXG4gKlxyXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcclxuICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlIHRoZSBhbW91bnQgdG8gc2NhbGUgYiBieSBiZWZvcmUgYWRkaW5nXHJcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZUFuZEFkZChvdXQsIGEsIGIsIHNjYWxlKSB7XG4gIG91dFswXSA9IGFbMF0gKyBiWzBdICogc2NhbGU7XG4gIG91dFsxXSA9IGFbMV0gKyBiWzFdICogc2NhbGU7XG4gIG91dFsyXSA9IGFbMl0gKyBiWzJdICogc2NhbGU7XG4gIG91dFszXSA9IGFbM10gKyBiWzNdICogc2NhbGU7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogQ2FsY3VsYXRlcyB0aGUgZXVjbGlkaWFuIGRpc3RhbmNlIGJldHdlZW4gdHdvIHZlYzQnc1xyXG4gKlxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcclxuICogQHJldHVybnMge051bWJlcn0gZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2UoYSwgYikge1xuICB2YXIgeCA9IGJbMF0gLSBhWzBdO1xuICB2YXIgeSA9IGJbMV0gLSBhWzFdO1xuICB2YXIgeiA9IGJbMl0gLSBhWzJdO1xuICB2YXIgdyA9IGJbM10gLSBhWzNdO1xuICByZXR1cm4gTWF0aC5oeXBvdCh4LCB5LCB6LCB3KTtcbn1cbi8qKlxyXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGV1Y2xpZGlhbiBkaXN0YW5jZSBiZXR3ZWVuIHR3byB2ZWM0J3NcclxuICpcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXHJcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlKGEsIGIpIHtcbiAgdmFyIHggPSBiWzBdIC0gYVswXTtcbiAgdmFyIHkgPSBiWzFdIC0gYVsxXTtcbiAgdmFyIHogPSBiWzJdIC0gYVsyXTtcbiAgdmFyIHcgPSBiWzNdIC0gYVszXTtcbiAgcmV0dXJuIHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3O1xufVxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgdGhlIGxlbmd0aCBvZiBhIHZlYzRcclxuICpcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBsZW5ndGggb2ZcclxuICogQHJldHVybnMge051bWJlcn0gbGVuZ3RoIG9mIGFcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsZW5ndGgoYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICB2YXIgdyA9IGFbM107XG4gIHJldHVybiBNYXRoLmh5cG90KHgsIHksIHosIHcpO1xufVxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgbGVuZ3RoIG9mIGEgdmVjNFxyXG4gKlxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIHNxdWFyZWQgbGVuZ3RoIG9mXHJcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgbGVuZ3RoIG9mIGFcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkTGVuZ3RoKGEpIHtcbiAgdmFyIHggPSBhWzBdO1xuICB2YXIgeSA9IGFbMV07XG4gIHZhciB6ID0gYVsyXTtcbiAgdmFyIHcgPSBhWzNdO1xuICByZXR1cm4geCAqIHggKyB5ICogeSArIHogKiB6ICsgdyAqIHc7XG59XG4vKipcclxuICogTmVnYXRlcyB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzRcclxuICpcclxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIG5lZ2F0ZVxyXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbmVnYXRlKG91dCwgYSkge1xuICBvdXRbMF0gPSAtYVswXTtcbiAgb3V0WzFdID0gLWFbMV07XG4gIG91dFsyXSA9IC1hWzJdO1xuICBvdXRbM10gPSAtYVszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBpbnZlcnNlIG9mIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNFxyXG4gKlxyXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB2ZWN0b3IgdG8gaW52ZXJ0XHJcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnNlKG91dCwgYSkge1xuICBvdXRbMF0gPSAxLjAgLyBhWzBdO1xuICBvdXRbMV0gPSAxLjAgLyBhWzFdO1xuICBvdXRbMl0gPSAxLjAgLyBhWzJdO1xuICBvdXRbM10gPSAxLjAgLyBhWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIE5vcm1hbGl6ZSBhIHZlYzRcclxuICpcclxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdmVjdG9yIHRvIG5vcm1hbGl6ZVxyXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKG91dCwgYSkge1xuICB2YXIgeCA9IGFbMF07XG4gIHZhciB5ID0gYVsxXTtcbiAgdmFyIHogPSBhWzJdO1xuICB2YXIgdyA9IGFbM107XG4gIHZhciBsZW4gPSB4ICogeCArIHkgKiB5ICsgeiAqIHogKyB3ICogdztcblxuICBpZiAobGVuID4gMCkge1xuICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQobGVuKTtcbiAgfVxuXG4gIG91dFswXSA9IHggKiBsZW47XG4gIG91dFsxXSA9IHkgKiBsZW47XG4gIG91dFsyXSA9IHogKiBsZW47XG4gIG91dFszXSA9IHcgKiBsZW47XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogQ2FsY3VsYXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlYzQnc1xyXG4gKlxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcclxuICogQHJldHVybnMge051bWJlcn0gZG90IHByb2R1Y3Qgb2YgYSBhbmQgYlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGRvdChhLCBiKSB7XG4gIHJldHVybiBhWzBdICogYlswXSArIGFbMV0gKiBiWzFdICsgYVsyXSAqIGJbMl0gKyBhWzNdICogYlszXTtcbn1cbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBjcm9zcy1wcm9kdWN0IG9mIHRocmVlIHZlY3RvcnMgaW4gYSA0LWRpbWVuc2lvbmFsIHNwYWNlXHJcbiAqXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSByZXN1bHQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IFUgdGhlIGZpcnN0IHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gViB0aGUgc2Vjb25kIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gVyB0aGUgdGhpcmQgdmVjdG9yXHJcbiAqIEByZXR1cm5zIHt2ZWM0fSByZXN1bHRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjcm9zcyhvdXQsIHUsIHYsIHcpIHtcbiAgdmFyIEEgPSB2WzBdICogd1sxXSAtIHZbMV0gKiB3WzBdLFxuICAgICAgQiA9IHZbMF0gKiB3WzJdIC0gdlsyXSAqIHdbMF0sXG4gICAgICBDID0gdlswXSAqIHdbM10gLSB2WzNdICogd1swXSxcbiAgICAgIEQgPSB2WzFdICogd1syXSAtIHZbMl0gKiB3WzFdLFxuICAgICAgRSA9IHZbMV0gKiB3WzNdIC0gdlszXSAqIHdbMV0sXG4gICAgICBGID0gdlsyXSAqIHdbM10gLSB2WzNdICogd1syXTtcbiAgdmFyIEcgPSB1WzBdO1xuICB2YXIgSCA9IHVbMV07XG4gIHZhciBJID0gdVsyXTtcbiAgdmFyIEogPSB1WzNdO1xuICBvdXRbMF0gPSBIICogRiAtIEkgKiBFICsgSiAqIEQ7XG4gIG91dFsxXSA9IC0oRyAqIEYpICsgSSAqIEMgLSBKICogQjtcbiAgb3V0WzJdID0gRyAqIEUgLSBIICogQyArIEogKiBBO1xuICBvdXRbM10gPSAtKEcgKiBEKSArIEggKiBCIC0gSSAqIEE7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogUGVyZm9ybXMgYSBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byB2ZWM0J3NcclxuICpcclxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcclxuICogQHJldHVybnMge3ZlYzR9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxlcnAob3V0LCBhLCBiLCB0KSB7XG4gIHZhciBheCA9IGFbMF07XG4gIHZhciBheSA9IGFbMV07XG4gIHZhciBheiA9IGFbMl07XG4gIHZhciBhdyA9IGFbM107XG4gIG91dFswXSA9IGF4ICsgdCAqIChiWzBdIC0gYXgpO1xuICBvdXRbMV0gPSBheSArIHQgKiAoYlsxXSAtIGF5KTtcbiAgb3V0WzJdID0gYXogKyB0ICogKGJbMl0gLSBheik7XG4gIG91dFszXSA9IGF3ICsgdCAqIChiWzNdIC0gYXcpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIHJhbmRvbSB2ZWN0b3Igd2l0aCB0aGUgZ2l2ZW4gc2NhbGVcclxuICpcclxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcclxuICogQHBhcmFtIHtOdW1iZXJ9IFtzY2FsZV0gTGVuZ3RoIG9mIHRoZSByZXN1bHRpbmcgdmVjdG9yLiBJZiBvbW1pdHRlZCwgYSB1bml0IHZlY3RvciB3aWxsIGJlIHJldHVybmVkXHJcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiByYW5kb20ob3V0LCBzY2FsZSkge1xuICBzY2FsZSA9IHNjYWxlIHx8IDEuMDsgLy8gTWFyc2FnbGlhLCBHZW9yZ2UuIENob29zaW5nIGEgUG9pbnQgZnJvbSB0aGUgU3VyZmFjZSBvZiBhXG4gIC8vIFNwaGVyZS4gQW5uLiBNYXRoLiBTdGF0aXN0LiA0MyAoMTk3MiksIG5vLiAyLCA2NDUtLTY0Ni5cbiAgLy8gaHR0cDovL3Byb2plY3RldWNsaWQub3JnL2V1Y2xpZC5hb21zLzExNzc2OTI2NDQ7XG5cbiAgdmFyIHYxLCB2MiwgdjMsIHY0O1xuICB2YXIgczEsIHMyO1xuXG4gIGRvIHtcbiAgICB2MSA9IGdsTWF0cml4LlJBTkRPTSgpICogMiAtIDE7XG4gICAgdjIgPSBnbE1hdHJpeC5SQU5ET00oKSAqIDIgLSAxO1xuICAgIHMxID0gdjEgKiB2MSArIHYyICogdjI7XG4gIH0gd2hpbGUgKHMxID49IDEpO1xuXG4gIGRvIHtcbiAgICB2MyA9IGdsTWF0cml4LlJBTkRPTSgpICogMiAtIDE7XG4gICAgdjQgPSBnbE1hdHJpeC5SQU5ET00oKSAqIDIgLSAxO1xuICAgIHMyID0gdjMgKiB2MyArIHY0ICogdjQ7XG4gIH0gd2hpbGUgKHMyID49IDEpO1xuXG4gIHZhciBkID0gTWF0aC5zcXJ0KCgxIC0gczEpIC8gczIpO1xuICBvdXRbMF0gPSBzY2FsZSAqIHYxO1xuICBvdXRbMV0gPSBzY2FsZSAqIHYyO1xuICBvdXRbMl0gPSBzY2FsZSAqIHYzICogZDtcbiAgb3V0WzNdID0gc2NhbGUgKiB2NCAqIGQ7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogVHJhbnNmb3JtcyB0aGUgdmVjNCB3aXRoIGEgbWF0NC5cclxuICpcclxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cclxuICogQHBhcmFtIHtSZWFkb25seU1hdDR9IG0gbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXHJcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1NYXQ0KG91dCwgYSwgbSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdLFxuICAgICAgdyA9IGFbM107XG4gIG91dFswXSA9IG1bMF0gKiB4ICsgbVs0XSAqIHkgKyBtWzhdICogeiArIG1bMTJdICogdztcbiAgb3V0WzFdID0gbVsxXSAqIHggKyBtWzVdICogeSArIG1bOV0gKiB6ICsgbVsxM10gKiB3O1xuICBvdXRbMl0gPSBtWzJdICogeCArIG1bNl0gKiB5ICsgbVsxMF0gKiB6ICsgbVsxNF0gKiB3O1xuICBvdXRbM10gPSBtWzNdICogeCArIG1bN10gKiB5ICsgbVsxMV0gKiB6ICsgbVsxNV0gKiB3O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzQgd2l0aCBhIHF1YXRcclxuICpcclxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cclxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IHEgcXVhdGVybmlvbiB0byB0cmFuc2Zvcm0gd2l0aFxyXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtUXVhdChvdXQsIGEsIHEpIHtcbiAgdmFyIHggPSBhWzBdLFxuICAgICAgeSA9IGFbMV0sXG4gICAgICB6ID0gYVsyXTtcbiAgdmFyIHF4ID0gcVswXSxcbiAgICAgIHF5ID0gcVsxXSxcbiAgICAgIHF6ID0gcVsyXSxcbiAgICAgIHF3ID0gcVszXTsgLy8gY2FsY3VsYXRlIHF1YXQgKiB2ZWNcblxuICB2YXIgaXggPSBxdyAqIHggKyBxeSAqIHogLSBxeiAqIHk7XG4gIHZhciBpeSA9IHF3ICogeSArIHF6ICogeCAtIHF4ICogejtcbiAgdmFyIGl6ID0gcXcgKiB6ICsgcXggKiB5IC0gcXkgKiB4O1xuICB2YXIgaXcgPSAtcXggKiB4IC0gcXkgKiB5IC0gcXogKiB6OyAvLyBjYWxjdWxhdGUgcmVzdWx0ICogaW52ZXJzZSBxdWF0XG5cbiAgb3V0WzBdID0gaXggKiBxdyArIGl3ICogLXF4ICsgaXkgKiAtcXogLSBpeiAqIC1xeTtcbiAgb3V0WzFdID0gaXkgKiBxdyArIGl3ICogLXF5ICsgaXogKiAtcXggLSBpeCAqIC1xejtcbiAgb3V0WzJdID0gaXogKiBxdyArIGl3ICogLXF6ICsgaXggKiAtcXkgLSBpeSAqIC1xeDtcbiAgb3V0WzNdID0gYVszXTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0IHRvIHplcm9cclxuICpcclxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcclxuICogQHJldHVybnMge3ZlYzR9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHplcm8ob3V0KSB7XG4gIG91dFswXSA9IDAuMDtcbiAgb3V0WzFdID0gMC4wO1xuICBvdXRbMl0gPSAwLjA7XG4gIG91dFszXSA9IDAuMDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgdmVjdG9yXHJcbiAqXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWM0fSBhIHZlY3RvciB0byByZXByZXNlbnQgYXMgYSBzdHJpbmdcclxuICogQHJldHVybnMge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3JcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdHIoYSkge1xuICByZXR1cm4gXCJ2ZWM0KFwiICsgYVswXSArIFwiLCBcIiArIGFbMV0gKyBcIiwgXCIgKyBhWzJdICsgXCIsIFwiICsgYVszXSArIFwiKVwiO1xufVxuLyoqXHJcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHZlY3RvcnMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxyXG4gKlxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYSBUaGUgZmlyc3QgdmVjdG9yLlxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjNH0gYiBUaGUgc2Vjb25kIHZlY3Rvci5cclxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWYgdGhlIHZlY3RvcnMgYXJlIGVxdWFsLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhhY3RFcXVhbHMoYSwgYikge1xuICByZXR1cm4gYVswXSA9PT0gYlswXSAmJiBhWzFdID09PSBiWzFdICYmIGFbMl0gPT09IGJbMl0gJiYgYVszXSA9PT0gYlszXTtcbn1cbi8qKlxyXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSB2ZWN0b3JzIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbi5cclxuICpcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGEgVGhlIGZpcnN0IHZlY3Rvci5cclxuICogQHBhcmFtIHtSZWFkb25seVZlYzR9IGIgVGhlIHNlY29uZCB2ZWN0b3IuXHJcbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSB2ZWN0b3JzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhhLCBiKSB7XG4gIHZhciBhMCA9IGFbMF0sXG4gICAgICBhMSA9IGFbMV0sXG4gICAgICBhMiA9IGFbMl0sXG4gICAgICBhMyA9IGFbM107XG4gIHZhciBiMCA9IGJbMF0sXG4gICAgICBiMSA9IGJbMV0sXG4gICAgICBiMiA9IGJbMl0sXG4gICAgICBiMyA9IGJbM107XG4gIHJldHVybiBNYXRoLmFicyhhMCAtIGIwKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMCksIE1hdGguYWJzKGIwKSkgJiYgTWF0aC5hYnMoYTEgLSBiMSkgPD0gZ2xNYXRyaXguRVBTSUxPTiAqIE1hdGgubWF4KDEuMCwgTWF0aC5hYnMoYTEpLCBNYXRoLmFicyhiMSkpICYmIE1hdGguYWJzKGEyIC0gYjIpIDw9IGdsTWF0cml4LkVQU0lMT04gKiBNYXRoLm1heCgxLjAsIE1hdGguYWJzKGEyKSwgTWF0aC5hYnMoYjIpKSAmJiBNYXRoLmFicyhhMyAtIGIzKSA8PSBnbE1hdHJpeC5FUFNJTE9OICogTWF0aC5tYXgoMS4wLCBNYXRoLmFicyhhMyksIE1hdGguYWJzKGIzKSk7XG59XG4vKipcclxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LnN1YnRyYWN0fVxyXG4gKiBAZnVuY3Rpb25cclxuICovXG5cbmV4cG9ydCB2YXIgc3ViID0gc3VidHJhY3Q7XG4vKipcclxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0Lm11bHRpcGx5fVxyXG4gKiBAZnVuY3Rpb25cclxuICovXG5cbmV4cG9ydCB2YXIgbXVsID0gbXVsdGlwbHk7XG4vKipcclxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LmRpdmlkZX1cclxuICogQGZ1bmN0aW9uXHJcbiAqL1xuXG5leHBvcnQgdmFyIGRpdiA9IGRpdmlkZTtcbi8qKlxyXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzQuZGlzdGFuY2V9XHJcbiAqIEBmdW5jdGlvblxyXG4gKi9cblxuZXhwb3J0IHZhciBkaXN0ID0gZGlzdGFuY2U7XG4vKipcclxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LnNxdWFyZWREaXN0YW5jZX1cclxuICogQGZ1bmN0aW9uXHJcbiAqL1xuXG5leHBvcnQgdmFyIHNxckRpc3QgPSBzcXVhcmVkRGlzdGFuY2U7XG4vKipcclxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0Lmxlbmd0aH1cclxuICogQGZ1bmN0aW9uXHJcbiAqL1xuXG5leHBvcnQgdmFyIGxlbiA9IGxlbmd0aDtcbi8qKlxyXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzQuc3F1YXJlZExlbmd0aH1cclxuICogQGZ1bmN0aW9uXHJcbiAqL1xuXG5leHBvcnQgdmFyIHNxckxlbiA9IHNxdWFyZWRMZW5ndGg7XG4vKipcclxuICogUGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvdmVyIGFuIGFycmF5IG9mIHZlYzRzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0FycmF5fSBhIHRoZSBhcnJheSBvZiB2ZWN0b3JzIHRvIGl0ZXJhdGUgb3ZlclxyXG4gKiBAcGFyYW0ge051bWJlcn0gc3RyaWRlIE51bWJlciBvZiBlbGVtZW50cyBiZXR3ZWVuIHRoZSBzdGFydCBvZiBlYWNoIHZlYzQuIElmIDAgYXNzdW1lcyB0aWdodGx5IHBhY2tlZFxyXG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IE51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5XHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBOdW1iZXIgb2YgdmVjNHMgdG8gaXRlcmF0ZSBvdmVyLiBJZiAwIGl0ZXJhdGVzIG92ZXIgZW50aXJlIGFycmF5XHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggdmVjdG9yIGluIHRoZSBhcnJheVxyXG4gKiBAcGFyYW0ge09iamVjdH0gW2FyZ10gYWRkaXRpb25hbCBhcmd1bWVudCB0byBwYXNzIHRvIGZuXHJcbiAqIEByZXR1cm5zIHtBcnJheX0gYVxyXG4gKiBAZnVuY3Rpb25cclxuICovXG5cbmV4cG9ydCB2YXIgZm9yRWFjaCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHZlYyA9IGNyZWF0ZSgpO1xuICByZXR1cm4gZnVuY3Rpb24gKGEsIHN0cmlkZSwgb2Zmc2V0LCBjb3VudCwgZm4sIGFyZykge1xuICAgIHZhciBpLCBsO1xuXG4gICAgaWYgKCFzdHJpZGUpIHtcbiAgICAgIHN0cmlkZSA9IDQ7XG4gICAgfVxuXG4gICAgaWYgKCFvZmZzZXQpIHtcbiAgICAgIG9mZnNldCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGNvdW50KSB7XG4gICAgICBsID0gTWF0aC5taW4oY291bnQgKiBzdHJpZGUgKyBvZmZzZXQsIGEubGVuZ3RoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbCA9IGEubGVuZ3RoO1xuICAgIH1cblxuICAgIGZvciAoaSA9IG9mZnNldDsgaSA8IGw7IGkgKz0gc3RyaWRlKSB7XG4gICAgICB2ZWNbMF0gPSBhW2ldO1xuICAgICAgdmVjWzFdID0gYVtpICsgMV07XG4gICAgICB2ZWNbMl0gPSBhW2kgKyAyXTtcbiAgICAgIHZlY1szXSA9IGFbaSArIDNdO1xuICAgICAgZm4odmVjLCB2ZWMsIGFyZyk7XG4gICAgICBhW2ldID0gdmVjWzBdO1xuICAgICAgYVtpICsgMV0gPSB2ZWNbMV07XG4gICAgICBhW2kgKyAyXSA9IHZlY1syXTtcbiAgICAgIGFbaSArIDNdID0gdmVjWzNdO1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9O1xufSgpOyIsImltcG9ydCAqIGFzIGdsTWF0cml4IGZyb20gXCIuL2NvbW1vbi5qc1wiO1xuaW1wb3J0ICogYXMgbWF0MyBmcm9tIFwiLi9tYXQzLmpzXCI7XG5pbXBvcnQgKiBhcyB2ZWMzIGZyb20gXCIuL3ZlYzMuanNcIjtcbmltcG9ydCAqIGFzIHZlYzQgZnJvbSBcIi4vdmVjNC5qc1wiO1xuLyoqXHJcbiAqIFF1YXRlcm5pb25cclxuICogQG1vZHVsZSBxdWF0XHJcbiAqL1xuXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyBpZGVudGl0eSBxdWF0XHJcbiAqXHJcbiAqIEByZXR1cm5zIHtxdWF0fSBhIG5ldyBxdWF0ZXJuaW9uXHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICB2YXIgb3V0ID0gbmV3IGdsTWF0cml4LkFSUkFZX1RZUEUoNCk7XG5cbiAgaWYgKGdsTWF0cml4LkFSUkFZX1RZUEUgIT0gRmxvYXQzMkFycmF5KSB7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gIH1cblxuICBvdXRbM10gPSAxO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFNldCBhIHF1YXQgdG8gdGhlIGlkZW50aXR5IHF1YXRlcm5pb25cclxuICpcclxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXHJcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eShvdXQpIHtcbiAgb3V0WzBdID0gMDtcbiAgb3V0WzFdID0gMDtcbiAgb3V0WzJdID0gMDtcbiAgb3V0WzNdID0gMTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBTZXRzIGEgcXVhdCBmcm9tIHRoZSBnaXZlbiBhbmdsZSBhbmQgcm90YXRpb24gYXhpcyxcclxuICogdGhlbiByZXR1cm5zIGl0LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGF4aXMgdGhlIGF4aXMgYXJvdW5kIHdoaWNoIHRvIHJvdGF0ZVxyXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSBpbiByYWRpYW5zXHJcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcclxuICoqL1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0QXhpc0FuZ2xlKG91dCwgYXhpcywgcmFkKSB7XG4gIHJhZCA9IHJhZCAqIDAuNTtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICBvdXRbMF0gPSBzICogYXhpc1swXTtcbiAgb3V0WzFdID0gcyAqIGF4aXNbMV07XG4gIG91dFsyXSA9IHMgKiBheGlzWzJdO1xuICBvdXRbM10gPSBNYXRoLmNvcyhyYWQpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIEdldHMgdGhlIHJvdGF0aW9uIGF4aXMgYW5kIGFuZ2xlIGZvciBhIGdpdmVuXHJcbiAqICBxdWF0ZXJuaW9uLiBJZiBhIHF1YXRlcm5pb24gaXMgY3JlYXRlZCB3aXRoXHJcbiAqICBzZXRBeGlzQW5nbGUsIHRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIHRoZSBzYW1lXHJcbiAqICB2YWx1ZXMgYXMgcHJvdmlkaWVkIGluIHRoZSBvcmlnaW5hbCBwYXJhbWV0ZXIgbGlzdFxyXG4gKiAgT1IgZnVuY3Rpb25hbGx5IGVxdWl2YWxlbnQgdmFsdWVzLlxyXG4gKiBFeGFtcGxlOiBUaGUgcXVhdGVybmlvbiBmb3JtZWQgYnkgYXhpcyBbMCwgMCwgMV0gYW5kXHJcbiAqICBhbmdsZSAtOTAgaXMgdGhlIHNhbWUgYXMgdGhlIHF1YXRlcm5pb24gZm9ybWVkIGJ5XHJcbiAqICBbMCwgMCwgMV0gYW5kIDI3MC4gVGhpcyBtZXRob2QgZmF2b3JzIHRoZSBsYXR0ZXIuXHJcbiAqIEBwYXJhbSAge3ZlYzN9IG91dF9heGlzICBWZWN0b3IgcmVjZWl2aW5nIHRoZSBheGlzIG9mIHJvdGF0aW9uXHJcbiAqIEBwYXJhbSAge1JlYWRvbmx5UXVhdH0gcSAgICAgUXVhdGVybmlvbiB0byBiZSBkZWNvbXBvc2VkXHJcbiAqIEByZXR1cm4ge051bWJlcn0gICAgIEFuZ2xlLCBpbiByYWRpYW5zLCBvZiB0aGUgcm90YXRpb25cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBeGlzQW5nbGUob3V0X2F4aXMsIHEpIHtcbiAgdmFyIHJhZCA9IE1hdGguYWNvcyhxWzNdKSAqIDIuMDtcbiAgdmFyIHMgPSBNYXRoLnNpbihyYWQgLyAyLjApO1xuXG4gIGlmIChzID4gZ2xNYXRyaXguRVBTSUxPTikge1xuICAgIG91dF9heGlzWzBdID0gcVswXSAvIHM7XG4gICAgb3V0X2F4aXNbMV0gPSBxWzFdIC8gcztcbiAgICBvdXRfYXhpc1syXSA9IHFbMl0gLyBzO1xuICB9IGVsc2Uge1xuICAgIC8vIElmIHMgaXMgemVybywgcmV0dXJuIGFueSBheGlzIChubyByb3RhdGlvbiAtIGF4aXMgZG9lcyBub3QgbWF0dGVyKVxuICAgIG91dF9heGlzWzBdID0gMTtcbiAgICBvdXRfYXhpc1sxXSA9IDA7XG4gICAgb3V0X2F4aXNbMl0gPSAwO1xuICB9XG5cbiAgcmV0dXJuIHJhZDtcbn1cbi8qKlxyXG4gKiBHZXRzIHRoZSBhbmd1bGFyIGRpc3RhbmNlIGJldHdlZW4gdHdvIHVuaXQgcXVhdGVybmlvbnNcclxuICpcclxuICogQHBhcmFtICB7UmVhZG9ubHlRdWF0fSBhICAgICBPcmlnaW4gdW5pdCBxdWF0ZXJuaW9uXHJcbiAqIEBwYXJhbSAge1JlYWRvbmx5UXVhdH0gYiAgICAgRGVzdGluYXRpb24gdW5pdCBxdWF0ZXJuaW9uXHJcbiAqIEByZXR1cm4ge051bWJlcn0gICAgIEFuZ2xlLCBpbiByYWRpYW5zLCBiZXR3ZWVuIHRoZSB0d28gcXVhdGVybmlvbnNcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbmdsZShhLCBiKSB7XG4gIHZhciBkb3Rwcm9kdWN0ID0gZG90KGEsIGIpO1xuICByZXR1cm4gTWF0aC5hY29zKDIgKiBkb3Rwcm9kdWN0ICogZG90cHJvZHVjdCAtIDEpO1xufVxuLyoqXHJcbiAqIE11bHRpcGxpZXMgdHdvIHF1YXQnc1xyXG4gKlxyXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cclxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcclxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXHJcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseShvdXQsIGEsIGIpIHtcbiAgdmFyIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXSxcbiAgICAgIGF3ID0gYVszXTtcbiAgdmFyIGJ4ID0gYlswXSxcbiAgICAgIGJ5ID0gYlsxXSxcbiAgICAgIGJ6ID0gYlsyXSxcbiAgICAgIGJ3ID0gYlszXTtcbiAgb3V0WzBdID0gYXggKiBidyArIGF3ICogYnggKyBheSAqIGJ6IC0gYXogKiBieTtcbiAgb3V0WzFdID0gYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBiejtcbiAgb3V0WzJdID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieDtcbiAgb3V0WzNdID0gYXcgKiBidyAtIGF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBiejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBSb3RhdGVzIGEgcXVhdGVybmlvbiBieSB0aGUgZ2l2ZW4gYW5nbGUgYWJvdXQgdGhlIFggYXhpc1xyXG4gKlxyXG4gKiBAcGFyYW0ge3F1YXR9IG91dCBxdWF0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gcm90YXRlXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWQgYW5nbGUgKGluIHJhZGlhbnMpIHRvIHJvdGF0ZVxyXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWChvdXQsIGEsIHJhZCkge1xuICByYWQgKj0gMC41O1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYXcgPSBhWzNdO1xuICB2YXIgYnggPSBNYXRoLnNpbihyYWQpLFxuICAgICAgYncgPSBNYXRoLmNvcyhyYWQpO1xuICBvdXRbMF0gPSBheCAqIGJ3ICsgYXcgKiBieDtcbiAgb3V0WzFdID0gYXkgKiBidyArIGF6ICogYng7XG4gIG91dFsyXSA9IGF6ICogYncgLSBheSAqIGJ4O1xuICBvdXRbM10gPSBhdyAqIGJ3IC0gYXggKiBieDtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBSb3RhdGVzIGEgcXVhdGVybmlvbiBieSB0aGUgZ2l2ZW4gYW5nbGUgYWJvdXQgdGhlIFkgYXhpc1xyXG4gKlxyXG4gKiBAcGFyYW0ge3F1YXR9IG91dCBxdWF0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gcm90YXRlXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWQgYW5nbGUgKGluIHJhZGlhbnMpIHRvIHJvdGF0ZVxyXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWShvdXQsIGEsIHJhZCkge1xuICByYWQgKj0gMC41O1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYXcgPSBhWzNdO1xuICB2YXIgYnkgPSBNYXRoLnNpbihyYWQpLFxuICAgICAgYncgPSBNYXRoLmNvcyhyYWQpO1xuICBvdXRbMF0gPSBheCAqIGJ3IC0gYXogKiBieTtcbiAgb3V0WzFdID0gYXkgKiBidyArIGF3ICogYnk7XG4gIG91dFsyXSA9IGF6ICogYncgKyBheCAqIGJ5O1xuICBvdXRbM10gPSBhdyAqIGJ3IC0gYXkgKiBieTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBSb3RhdGVzIGEgcXVhdGVybmlvbiBieSB0aGUgZ2l2ZW4gYW5nbGUgYWJvdXQgdGhlIFogYXhpc1xyXG4gKlxyXG4gKiBAcGFyYW0ge3F1YXR9IG91dCBxdWF0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gcm90YXRlXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWQgYW5nbGUgKGluIHJhZGlhbnMpIHRvIHJvdGF0ZVxyXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlWihvdXQsIGEsIHJhZCkge1xuICByYWQgKj0gMC41O1xuICB2YXIgYXggPSBhWzBdLFxuICAgICAgYXkgPSBhWzFdLFxuICAgICAgYXogPSBhWzJdLFxuICAgICAgYXcgPSBhWzNdO1xuICB2YXIgYnogPSBNYXRoLnNpbihyYWQpLFxuICAgICAgYncgPSBNYXRoLmNvcyhyYWQpO1xuICBvdXRbMF0gPSBheCAqIGJ3ICsgYXkgKiBiejtcbiAgb3V0WzFdID0gYXkgKiBidyAtIGF4ICogYno7XG4gIG91dFsyXSA9IGF6ICogYncgKyBhdyAqIGJ6O1xuICBvdXRbM10gPSBhdyAqIGJ3IC0gYXogKiBiejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDYWxjdWxhdGVzIHRoZSBXIGNvbXBvbmVudCBvZiBhIHF1YXQgZnJvbSB0aGUgWCwgWSwgYW5kIFogY29tcG9uZW50cy5cclxuICogQXNzdW1lcyB0aGF0IHF1YXRlcm5pb24gaXMgMSB1bml0IGluIGxlbmd0aC5cclxuICogQW55IGV4aXN0aW5nIFcgY29tcG9uZW50IHdpbGwgYmUgaWdub3JlZC5cclxuICpcclxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gY2FsY3VsYXRlIFcgY29tcG9uZW50IG9mXHJcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVXKG91dCwgYSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdO1xuICBvdXRbMF0gPSB4O1xuICBvdXRbMV0gPSB5O1xuICBvdXRbMl0gPSB6O1xuICBvdXRbM10gPSBNYXRoLnNxcnQoTWF0aC5hYnMoMS4wIC0geCAqIHggLSB5ICogeSAtIHogKiB6KSk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogQ2FsY3VsYXRlIHRoZSBleHBvbmVudGlhbCBvZiBhIHVuaXQgcXVhdGVybmlvbi5cclxuICpcclxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gY2FsY3VsYXRlIHRoZSBleHBvbmVudGlhbCBvZlxyXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhwKG91dCwgYSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdLFxuICAgICAgdyA9IGFbM107XG4gIHZhciByID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7XG4gIHZhciBldCA9IE1hdGguZXhwKHcpO1xuICB2YXIgcyA9IHIgPiAwID8gZXQgKiBNYXRoLnNpbihyKSAvIHIgOiAwO1xuICBvdXRbMF0gPSB4ICogcztcbiAgb3V0WzFdID0geSAqIHM7XG4gIG91dFsyXSA9IHogKiBzO1xuICBvdXRbM10gPSBldCAqIE1hdGguY29zKHIpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIENhbGN1bGF0ZSB0aGUgbmF0dXJhbCBsb2dhcml0aG0gb2YgYSB1bml0IHF1YXRlcm5pb24uXHJcbiAqXHJcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBxdWF0IHRvIGNhbGN1bGF0ZSB0aGUgZXhwb25lbnRpYWwgb2ZcclxuICogQHJldHVybnMge3F1YXR9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxuKG91dCwgYSkge1xuICB2YXIgeCA9IGFbMF0sXG4gICAgICB5ID0gYVsxXSxcbiAgICAgIHogPSBhWzJdLFxuICAgICAgdyA9IGFbM107XG4gIHZhciByID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7XG4gIHZhciB0ID0gciA+IDAgPyBNYXRoLmF0YW4yKHIsIHcpIC8gciA6IDA7XG4gIG91dFswXSA9IHggKiB0O1xuICBvdXRbMV0gPSB5ICogdDtcbiAgb3V0WzJdID0geiAqIHQ7XG4gIG91dFszXSA9IDAuNSAqIE1hdGgubG9nKHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3KTtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDYWxjdWxhdGUgdGhlIHNjYWxhciBwb3dlciBvZiBhIHVuaXQgcXVhdGVybmlvbi5cclxuICpcclxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gY2FsY3VsYXRlIHRoZSBleHBvbmVudGlhbCBvZlxyXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHF1YXRlcm5pb24gYnlcclxuICogQHJldHVybnMge3F1YXR9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBvdyhvdXQsIGEsIGIpIHtcbiAgbG4ob3V0LCBhKTtcbiAgc2NhbGUob3V0LCBvdXQsIGIpO1xuICBleHAob3V0LCBvdXQpO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIFBlcmZvcm1zIGEgc3BoZXJpY2FsIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHF1YXRcclxuICpcclxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxyXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXHJcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzbGVycChvdXQsIGEsIGIsIHQpIHtcbiAgLy8gYmVuY2htYXJrczpcbiAgLy8gICAgaHR0cDovL2pzcGVyZi5jb20vcXVhdGVybmlvbi1zbGVycC1pbXBsZW1lbnRhdGlvbnNcbiAgdmFyIGF4ID0gYVswXSxcbiAgICAgIGF5ID0gYVsxXSxcbiAgICAgIGF6ID0gYVsyXSxcbiAgICAgIGF3ID0gYVszXTtcbiAgdmFyIGJ4ID0gYlswXSxcbiAgICAgIGJ5ID0gYlsxXSxcbiAgICAgIGJ6ID0gYlsyXSxcbiAgICAgIGJ3ID0gYlszXTtcbiAgdmFyIG9tZWdhLCBjb3NvbSwgc2lub20sIHNjYWxlMCwgc2NhbGUxOyAvLyBjYWxjIGNvc2luZVxuXG4gIGNvc29tID0gYXggKiBieCArIGF5ICogYnkgKyBheiAqIGJ6ICsgYXcgKiBidzsgLy8gYWRqdXN0IHNpZ25zIChpZiBuZWNlc3NhcnkpXG5cbiAgaWYgKGNvc29tIDwgMC4wKSB7XG4gICAgY29zb20gPSAtY29zb207XG4gICAgYnggPSAtYng7XG4gICAgYnkgPSAtYnk7XG4gICAgYnogPSAtYno7XG4gICAgYncgPSAtYnc7XG4gIH0gLy8gY2FsY3VsYXRlIGNvZWZmaWNpZW50c1xuXG5cbiAgaWYgKDEuMCAtIGNvc29tID4gZ2xNYXRyaXguRVBTSUxPTikge1xuICAgIC8vIHN0YW5kYXJkIGNhc2UgKHNsZXJwKVxuICAgIG9tZWdhID0gTWF0aC5hY29zKGNvc29tKTtcbiAgICBzaW5vbSA9IE1hdGguc2luKG9tZWdhKTtcbiAgICBzY2FsZTAgPSBNYXRoLnNpbigoMS4wIC0gdCkgKiBvbWVnYSkgLyBzaW5vbTtcbiAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207XG4gIH0gZWxzZSB7XG4gICAgLy8gXCJmcm9tXCIgYW5kIFwidG9cIiBxdWF0ZXJuaW9ucyBhcmUgdmVyeSBjbG9zZVxuICAgIC8vICAuLi4gc28gd2UgY2FuIGRvIGEgbGluZWFyIGludGVycG9sYXRpb25cbiAgICBzY2FsZTAgPSAxLjAgLSB0O1xuICAgIHNjYWxlMSA9IHQ7XG4gIH0gLy8gY2FsY3VsYXRlIGZpbmFsIHZhbHVlc1xuXG5cbiAgb3V0WzBdID0gc2NhbGUwICogYXggKyBzY2FsZTEgKiBieDtcbiAgb3V0WzFdID0gc2NhbGUwICogYXkgKyBzY2FsZTEgKiBieTtcbiAgb3V0WzJdID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejtcbiAgb3V0WzNdID0gc2NhbGUwICogYXcgKyBzY2FsZTEgKiBidztcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSByYW5kb20gdW5pdCBxdWF0ZXJuaW9uXHJcbiAqXHJcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxyXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcmFuZG9tKG91dCkge1xuICAvLyBJbXBsZW1lbnRhdGlvbiBvZiBodHRwOi8vcGxhbm5pbmcuY3MudWl1Yy5lZHUvbm9kZTE5OC5odG1sXG4gIC8vIFRPRE86IENhbGxpbmcgcmFuZG9tIDMgdGltZXMgaXMgcHJvYmFibHkgbm90IHRoZSBmYXN0ZXN0IHNvbHV0aW9uXG4gIHZhciB1MSA9IGdsTWF0cml4LlJBTkRPTSgpO1xuICB2YXIgdTIgPSBnbE1hdHJpeC5SQU5ET00oKTtcbiAgdmFyIHUzID0gZ2xNYXRyaXguUkFORE9NKCk7XG4gIHZhciBzcXJ0MU1pbnVzVTEgPSBNYXRoLnNxcnQoMSAtIHUxKTtcbiAgdmFyIHNxcnRVMSA9IE1hdGguc3FydCh1MSk7XG4gIG91dFswXSA9IHNxcnQxTWludXNVMSAqIE1hdGguc2luKDIuMCAqIE1hdGguUEkgKiB1Mik7XG4gIG91dFsxXSA9IHNxcnQxTWludXNVMSAqIE1hdGguY29zKDIuMCAqIE1hdGguUEkgKiB1Mik7XG4gIG91dFsyXSA9IHNxcnRVMSAqIE1hdGguc2luKDIuMCAqIE1hdGguUEkgKiB1Myk7XG4gIG91dFszXSA9IHNxcnRVMSAqIE1hdGguY29zKDIuMCAqIE1hdGguUEkgKiB1Myk7XG4gIHJldHVybiBvdXQ7XG59XG4vKipcclxuICogQ2FsY3VsYXRlcyB0aGUgaW52ZXJzZSBvZiBhIHF1YXRcclxuICpcclxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gY2FsY3VsYXRlIGludmVyc2Ugb2ZcclxuICogQHJldHVybnMge3F1YXR9IG91dFxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGludmVydChvdXQsIGEpIHtcbiAgdmFyIGEwID0gYVswXSxcbiAgICAgIGExID0gYVsxXSxcbiAgICAgIGEyID0gYVsyXSxcbiAgICAgIGEzID0gYVszXTtcbiAgdmFyIGRvdCA9IGEwICogYTAgKyBhMSAqIGExICsgYTIgKiBhMiArIGEzICogYTM7XG4gIHZhciBpbnZEb3QgPSBkb3QgPyAxLjAgLyBkb3QgOiAwOyAvLyBUT0RPOiBXb3VsZCBiZSBmYXN0ZXIgdG8gcmV0dXJuIFswLDAsMCwwXSBpbW1lZGlhdGVseSBpZiBkb3QgPT0gMFxuXG4gIG91dFswXSA9IC1hMCAqIGludkRvdDtcbiAgb3V0WzFdID0gLWExICogaW52RG90O1xuICBvdXRbMl0gPSAtYTIgKiBpbnZEb3Q7XG4gIG91dFszXSA9IGEzICogaW52RG90O1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgdGhlIGNvbmp1Z2F0ZSBvZiBhIHF1YXRcclxuICogSWYgdGhlIHF1YXRlcm5pb24gaXMgbm9ybWFsaXplZCwgdGhpcyBmdW5jdGlvbiBpcyBmYXN0ZXIgdGhhbiBxdWF0LmludmVyc2UgYW5kIHByb2R1Y2VzIHRoZSBzYW1lIHJlc3VsdC5cclxuICpcclxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHF1YXQgdG8gY2FsY3VsYXRlIGNvbmp1Z2F0ZSBvZlxyXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XHJcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY29uanVnYXRlKG91dCwgYSkge1xuICBvdXRbMF0gPSAtYVswXTtcbiAgb3V0WzFdID0gLWFbMV07XG4gIG91dFsyXSA9IC1hWzJdO1xuICBvdXRbM10gPSBhWzNdO1xuICByZXR1cm4gb3V0O1xufVxuLyoqXHJcbiAqIENyZWF0ZXMgYSBxdWF0ZXJuaW9uIGZyb20gdGhlIGdpdmVuIDN4MyByb3RhdGlvbiBtYXRyaXguXHJcbiAqXHJcbiAqIE5PVEU6IFRoZSByZXN1bHRhbnQgcXVhdGVybmlvbiBpcyBub3Qgbm9ybWFsaXplZCwgc28geW91IHNob3VsZCBiZSBzdXJlXHJcbiAqIHRvIHJlbm9ybWFsaXplIHRoZSBxdWF0ZXJuaW9uIHlvdXJzZWxmIHdoZXJlIG5lY2Vzc2FyeS5cclxuICpcclxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlNYXQzfSBtIHJvdGF0aW9uIG1hdHJpeFxyXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XHJcbiAqIEBmdW5jdGlvblxyXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21NYXQzKG91dCwgbSkge1xuICAvLyBBbGdvcml0aG0gaW4gS2VuIFNob2VtYWtlJ3MgYXJ0aWNsZSBpbiAxOTg3IFNJR0dSQVBIIGNvdXJzZSBub3Rlc1xuICAvLyBhcnRpY2xlIFwiUXVhdGVybmlvbiBDYWxjdWx1cyBhbmQgRmFzdCBBbmltYXRpb25cIi5cbiAgdmFyIGZUcmFjZSA9IG1bMF0gKyBtWzRdICsgbVs4XTtcbiAgdmFyIGZSb290O1xuXG4gIGlmIChmVHJhY2UgPiAwLjApIHtcbiAgICAvLyB8d3wgPiAxLzIsIG1heSBhcyB3ZWxsIGNob29zZSB3ID4gMS8yXG4gICAgZlJvb3QgPSBNYXRoLnNxcnQoZlRyYWNlICsgMS4wKTsgLy8gMndcblxuICAgIG91dFszXSA9IDAuNSAqIGZSb290O1xuICAgIGZSb290ID0gMC41IC8gZlJvb3Q7IC8vIDEvKDR3KVxuXG4gICAgb3V0WzBdID0gKG1bNV0gLSBtWzddKSAqIGZSb290O1xuICAgIG91dFsxXSA9IChtWzZdIC0gbVsyXSkgKiBmUm9vdDtcbiAgICBvdXRbMl0gPSAobVsxXSAtIG1bM10pICogZlJvb3Q7XG4gIH0gZWxzZSB7XG4gICAgLy8gfHd8IDw9IDEvMlxuICAgIHZhciBpID0gMDtcbiAgICBpZiAobVs0XSA+IG1bMF0pIGkgPSAxO1xuICAgIGlmIChtWzhdID4gbVtpICogMyArIGldKSBpID0gMjtcbiAgICB2YXIgaiA9IChpICsgMSkgJSAzO1xuICAgIHZhciBrID0gKGkgKyAyKSAlIDM7XG4gICAgZlJvb3QgPSBNYXRoLnNxcnQobVtpICogMyArIGldIC0gbVtqICogMyArIGpdIC0gbVtrICogMyArIGtdICsgMS4wKTtcbiAgICBvdXRbaV0gPSAwLjUgKiBmUm9vdDtcbiAgICBmUm9vdCA9IDAuNSAvIGZSb290O1xuICAgIG91dFszXSA9IChtW2ogKiAzICsga10gLSBtW2sgKiAzICsgal0pICogZlJvb3Q7XG4gICAgb3V0W2pdID0gKG1baiAqIDMgKyBpXSArIG1baSAqIDMgKyBqXSkgKiBmUm9vdDtcbiAgICBvdXRba10gPSAobVtrICogMyArIGldICsgbVtpICogMyArIGtdKSAqIGZSb290O1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBDcmVhdGVzIGEgcXVhdGVybmlvbiBmcm9tIHRoZSBnaXZlbiBldWxlciBhbmdsZSB4LCB5LCB6LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cclxuICogQHBhcmFtIHt4fSBBbmdsZSB0byByb3RhdGUgYXJvdW5kIFggYXhpcyBpbiBkZWdyZWVzLlxyXG4gKiBAcGFyYW0ge3l9IEFuZ2xlIHRvIHJvdGF0ZSBhcm91bmQgWSBheGlzIGluIGRlZ3JlZXMuXHJcbiAqIEBwYXJhbSB7en0gQW5nbGUgdG8gcm90YXRlIGFyb3VuZCBaIGF4aXMgaW4gZGVncmVlcy5cclxuICogQHJldHVybnMge3F1YXR9IG91dFxyXG4gKiBAZnVuY3Rpb25cclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRXVsZXIob3V0LCB4LCB5LCB6KSB7XG4gIHZhciBoYWxmVG9SYWQgPSAwLjUgKiBNYXRoLlBJIC8gMTgwLjA7XG4gIHggKj0gaGFsZlRvUmFkO1xuICB5ICo9IGhhbGZUb1JhZDtcbiAgeiAqPSBoYWxmVG9SYWQ7XG4gIHZhciBzeCA9IE1hdGguc2luKHgpO1xuICB2YXIgY3ggPSBNYXRoLmNvcyh4KTtcbiAgdmFyIHN5ID0gTWF0aC5zaW4oeSk7XG4gIHZhciBjeSA9IE1hdGguY29zKHkpO1xuICB2YXIgc3ogPSBNYXRoLnNpbih6KTtcbiAgdmFyIGN6ID0gTWF0aC5jb3Moeik7XG4gIG91dFswXSA9IHN4ICogY3kgKiBjeiAtIGN4ICogc3kgKiBzejtcbiAgb3V0WzFdID0gY3ggKiBzeSAqIGN6ICsgc3ggKiBjeSAqIHN6O1xuICBvdXRbMl0gPSBjeCAqIGN5ICogc3ogLSBzeCAqIHN5ICogY3o7XG4gIG91dFszXSA9IGN4ICogY3kgKiBjeiArIHN4ICogc3kgKiBzejtcbiAgcmV0dXJuIG91dDtcbn1cbi8qKlxyXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgcXVhdGVuaW9uXHJcbiAqXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHZlY3RvciB0byByZXByZXNlbnQgYXMgYSBzdHJpbmdcclxuICogQHJldHVybnMge1N0cmluZ30gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZWN0b3JcclxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzdHIoYSkge1xuICByZXR1cm4gXCJxdWF0KFwiICsgYVswXSArIFwiLCBcIiArIGFbMV0gKyBcIiwgXCIgKyBhWzJdICsgXCIsIFwiICsgYVszXSArIFwiKVwiO1xufVxuLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcgcXVhdCBpbml0aWFsaXplZCB3aXRoIHZhbHVlcyBmcm9tIGFuIGV4aXN0aW5nIHF1YXRlcm5pb25cclxuICpcclxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdGVybmlvbiB0byBjbG9uZVxyXG4gKiBAcmV0dXJucyB7cXVhdH0gYSBuZXcgcXVhdGVybmlvblxyXG4gKiBAZnVuY3Rpb25cclxuICovXG5cbmV4cG9ydCB2YXIgY2xvbmUgPSB2ZWM0LmNsb25lO1xuLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcgcXVhdCBpbml0aWFsaXplZCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcclxuICpcclxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcclxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcclxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcclxuICogQHBhcmFtIHtOdW1iZXJ9IHcgVyBjb21wb25lbnRcclxuICogQHJldHVybnMge3F1YXR9IGEgbmV3IHF1YXRlcm5pb25cclxuICogQGZ1bmN0aW9uXHJcbiAqL1xuXG5leHBvcnQgdmFyIGZyb21WYWx1ZXMgPSB2ZWM0LmZyb21WYWx1ZXM7XG4vKipcclxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIHF1YXQgdG8gYW5vdGhlclxyXG4gKlxyXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cclxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIHNvdXJjZSBxdWF0ZXJuaW9uXHJcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcclxuICogQGZ1bmN0aW9uXHJcbiAqL1xuXG5leHBvcnQgdmFyIGNvcHkgPSB2ZWM0LmNvcHk7XG4vKipcclxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgcXVhdCB0byB0aGUgZ2l2ZW4gdmFsdWVzXHJcbiAqXHJcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxyXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxyXG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxyXG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxyXG4gKiBAcGFyYW0ge051bWJlcn0gdyBXIGNvbXBvbmVudFxyXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XHJcbiAqIEBmdW5jdGlvblxyXG4gKi9cblxuZXhwb3J0IHZhciBzZXQgPSB2ZWM0LnNldDtcbi8qKlxyXG4gKiBBZGRzIHR3byBxdWF0J3NcclxuICpcclxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxyXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XHJcbiAqIEBmdW5jdGlvblxyXG4gKi9cblxuZXhwb3J0IHZhciBhZGQgPSB2ZWM0LmFkZDtcbi8qKlxyXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHF1YXQubXVsdGlwbHl9XHJcbiAqIEBmdW5jdGlvblxyXG4gKi9cblxuZXhwb3J0IHZhciBtdWwgPSBtdWx0aXBseTtcbi8qKlxyXG4gKiBTY2FsZXMgYSBxdWF0IGJ5IGEgc2NhbGFyIG51bWJlclxyXG4gKlxyXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSB0aGUgdmVjdG9yIHRvIHNjYWxlXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSBiIGFtb3VudCB0byBzY2FsZSB0aGUgdmVjdG9yIGJ5XHJcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcclxuICogQGZ1bmN0aW9uXHJcbiAqL1xuXG5leHBvcnQgdmFyIHNjYWxlID0gdmVjNC5zY2FsZTtcbi8qKlxyXG4gKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0d28gcXVhdCdzXHJcbiAqXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxyXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkb3QgcHJvZHVjdCBvZiBhIGFuZCBiXHJcbiAqIEBmdW5jdGlvblxyXG4gKi9cblxuZXhwb3J0IHZhciBkb3QgPSB2ZWM0LmRvdDtcbi8qKlxyXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHF1YXQnc1xyXG4gKlxyXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cclxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcclxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50LCBpbiB0aGUgcmFuZ2UgWzAtMV0sIGJldHdlZW4gdGhlIHR3byBpbnB1dHNcclxuICogQHJldHVybnMge3F1YXR9IG91dFxyXG4gKiBAZnVuY3Rpb25cclxuICovXG5cbmV4cG9ydCB2YXIgbGVycCA9IHZlYzQubGVycDtcbi8qKlxyXG4gKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSBxdWF0XHJcbiAqXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHZlY3RvciB0byBjYWxjdWxhdGUgbGVuZ3RoIG9mXHJcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGxlbmd0aCBvZiBhXHJcbiAqL1xuXG5leHBvcnQgdmFyIGxlbmd0aCA9IHZlYzQubGVuZ3RoO1xuLyoqXHJcbiAqIEFsaWFzIGZvciB7QGxpbmsgcXVhdC5sZW5ndGh9XHJcbiAqIEBmdW5jdGlvblxyXG4gKi9cblxuZXhwb3J0IHZhciBsZW4gPSBsZW5ndGg7XG4vKipcclxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBsZW5ndGggb2YgYSBxdWF0XHJcbiAqXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBhIHZlY3RvciB0byBjYWxjdWxhdGUgc3F1YXJlZCBsZW5ndGggb2ZcclxuICogQHJldHVybnMge051bWJlcn0gc3F1YXJlZCBsZW5ndGggb2YgYVxyXG4gKiBAZnVuY3Rpb25cclxuICovXG5cbmV4cG9ydCB2YXIgc3F1YXJlZExlbmd0aCA9IHZlYzQuc3F1YXJlZExlbmd0aDtcbi8qKlxyXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHF1YXQuc3F1YXJlZExlbmd0aH1cclxuICogQGZ1bmN0aW9uXHJcbiAqL1xuXG5leHBvcnQgdmFyIHNxckxlbiA9IHNxdWFyZWRMZW5ndGg7XG4vKipcclxuICogTm9ybWFsaXplIGEgcXVhdFxyXG4gKlxyXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cclxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgcXVhdGVybmlvbiB0byBub3JtYWxpemVcclxuICogQHJldHVybnMge3F1YXR9IG91dFxyXG4gKiBAZnVuY3Rpb25cclxuICovXG5cbmV4cG9ydCB2YXIgbm9ybWFsaXplID0gdmVjNC5ub3JtYWxpemU7XG4vKipcclxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgcXVhdGVybmlvbnMgaGF2ZSBleGFjdGx5IHRoZSBzYW1lIGVsZW1lbnRzIGluIHRoZSBzYW1lIHBvc2l0aW9uICh3aGVuIGNvbXBhcmVkIHdpdGggPT09KVxyXG4gKlxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5UXVhdH0gYSBUaGUgZmlyc3QgcXVhdGVybmlvbi5cclxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgVGhlIHNlY29uZCBxdWF0ZXJuaW9uLlxyXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmVjdG9ycyBhcmUgZXF1YWwsIGZhbHNlIG90aGVyd2lzZS5cclxuICovXG5cbmV4cG9ydCB2YXIgZXhhY3RFcXVhbHMgPSB2ZWM0LmV4YWN0RXF1YWxzO1xuLyoqXHJcbiAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHF1YXRlcm5pb25zIGhhdmUgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgc2FtZSBwb3NpdGlvbi5cclxuICpcclxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgVGhlIGZpcnN0IHZlY3Rvci5cclxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgVGhlIHNlY29uZCB2ZWN0b3IuXHJcbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmIHRoZSB2ZWN0b3JzIGFyZSBlcXVhbCwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gKi9cblxuZXhwb3J0IHZhciBlcXVhbHMgPSB2ZWM0LmVxdWFscztcbi8qKlxyXG4gKiBTZXRzIGEgcXVhdGVybmlvbiB0byByZXByZXNlbnQgdGhlIHNob3J0ZXN0IHJvdGF0aW9uIGZyb20gb25lXHJcbiAqIHZlY3RvciB0byBhbm90aGVyLlxyXG4gKlxyXG4gKiBCb3RoIHZlY3RvcnMgYXJlIGFzc3VtZWQgdG8gYmUgdW5pdCBsZW5ndGguXHJcbiAqXHJcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvbi5cclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IGEgdGhlIGluaXRpYWwgdmVjdG9yXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlWZWMzfSBiIHRoZSBkZXN0aW5hdGlvbiB2ZWN0b3JcclxuICogQHJldHVybnMge3F1YXR9IG91dFxyXG4gKi9cblxuZXhwb3J0IHZhciByb3RhdGlvblRvID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdG1wdmVjMyA9IHZlYzMuY3JlYXRlKCk7XG4gIHZhciB4VW5pdFZlYzMgPSB2ZWMzLmZyb21WYWx1ZXMoMSwgMCwgMCk7XG4gIHZhciB5VW5pdFZlYzMgPSB2ZWMzLmZyb21WYWx1ZXMoMCwgMSwgMCk7XG4gIHJldHVybiBmdW5jdGlvbiAob3V0LCBhLCBiKSB7XG4gICAgdmFyIGRvdCA9IHZlYzMuZG90KGEsIGIpO1xuXG4gICAgaWYgKGRvdCA8IC0wLjk5OTk5OSkge1xuICAgICAgdmVjMy5jcm9zcyh0bXB2ZWMzLCB4VW5pdFZlYzMsIGEpO1xuICAgICAgaWYgKHZlYzMubGVuKHRtcHZlYzMpIDwgMC4wMDAwMDEpIHZlYzMuY3Jvc3ModG1wdmVjMywgeVVuaXRWZWMzLCBhKTtcbiAgICAgIHZlYzMubm9ybWFsaXplKHRtcHZlYzMsIHRtcHZlYzMpO1xuICAgICAgc2V0QXhpc0FuZ2xlKG91dCwgdG1wdmVjMywgTWF0aC5QSSk7XG4gICAgICByZXR1cm4gb3V0O1xuICAgIH0gZWxzZSBpZiAoZG90ID4gMC45OTk5OTkpIHtcbiAgICAgIG91dFswXSA9IDA7XG4gICAgICBvdXRbMV0gPSAwO1xuICAgICAgb3V0WzJdID0gMDtcbiAgICAgIG91dFszXSA9IDE7XG4gICAgICByZXR1cm4gb3V0O1xuICAgIH0gZWxzZSB7XG4gICAgICB2ZWMzLmNyb3NzKHRtcHZlYzMsIGEsIGIpO1xuICAgICAgb3V0WzBdID0gdG1wdmVjM1swXTtcbiAgICAgIG91dFsxXSA9IHRtcHZlYzNbMV07XG4gICAgICBvdXRbMl0gPSB0bXB2ZWMzWzJdO1xuICAgICAgb3V0WzNdID0gMSArIGRvdDtcbiAgICAgIHJldHVybiBub3JtYWxpemUob3V0LCBvdXQpO1xuICAgIH1cbiAgfTtcbn0oKTtcbi8qKlxyXG4gKiBQZXJmb3JtcyBhIHNwaGVyaWNhbCBsaW5lYXIgaW50ZXJwb2xhdGlvbiB3aXRoIHR3byBjb250cm9sIHBvaW50c1xyXG4gKlxyXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cclxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcclxuICogQHBhcmFtIHtSZWFkb25seVF1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBjIHRoZSB0aGlyZCBvcGVyYW5kXHJcbiAqIEBwYXJhbSB7UmVhZG9ubHlRdWF0fSBkIHRoZSBmb3VydGggb3BlcmFuZFxyXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCwgaW4gdGhlIHJhbmdlIFswLTFdLCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXHJcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcclxuICovXG5cbmV4cG9ydCB2YXIgc3FsZXJwID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdGVtcDEgPSBjcmVhdGUoKTtcbiAgdmFyIHRlbXAyID0gY3JlYXRlKCk7XG4gIHJldHVybiBmdW5jdGlvbiAob3V0LCBhLCBiLCBjLCBkLCB0KSB7XG4gICAgc2xlcnAodGVtcDEsIGEsIGQsIHQpO1xuICAgIHNsZXJwKHRlbXAyLCBiLCBjLCB0KTtcbiAgICBzbGVycChvdXQsIHRlbXAxLCB0ZW1wMiwgMiAqIHQgKiAoMSAtIHQpKTtcbiAgICByZXR1cm4gb3V0O1xuICB9O1xufSgpO1xuLyoqXHJcbiAqIFNldHMgdGhlIHNwZWNpZmllZCBxdWF0ZXJuaW9uIHdpdGggdmFsdWVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuXHJcbiAqIGF4ZXMuIEVhY2ggYXhpcyBpcyBhIHZlYzMgYW5kIGlzIGV4cGVjdGVkIHRvIGJlIHVuaXQgbGVuZ3RoIGFuZFxyXG4gKiBwZXJwZW5kaWN1bGFyIHRvIGFsbCBvdGhlciBzcGVjaWZpZWQgYXhlcy5cclxuICpcclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHZpZXcgIHRoZSB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSB2aWV3aW5nIGRpcmVjdGlvblxyXG4gKiBAcGFyYW0ge1JlYWRvbmx5VmVjM30gcmlnaHQgdGhlIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIGxvY2FsIFwicmlnaHRcIiBkaXJlY3Rpb25cclxuICogQHBhcmFtIHtSZWFkb25seVZlYzN9IHVwICAgIHRoZSB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBsb2NhbCBcInVwXCIgZGlyZWN0aW9uXHJcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcclxuICovXG5cbmV4cG9ydCB2YXIgc2V0QXhlcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIG1hdHIgPSBtYXQzLmNyZWF0ZSgpO1xuICByZXR1cm4gZnVuY3Rpb24gKG91dCwgdmlldywgcmlnaHQsIHVwKSB7XG4gICAgbWF0clswXSA9IHJpZ2h0WzBdO1xuICAgIG1hdHJbM10gPSByaWdodFsxXTtcbiAgICBtYXRyWzZdID0gcmlnaHRbMl07XG4gICAgbWF0clsxXSA9IHVwWzBdO1xuICAgIG1hdHJbNF0gPSB1cFsxXTtcbiAgICBtYXRyWzddID0gdXBbMl07XG4gICAgbWF0clsyXSA9IC12aWV3WzBdO1xuICAgIG1hdHJbNV0gPSAtdmlld1sxXTtcbiAgICBtYXRyWzhdID0gLXZpZXdbMl07XG4gICAgcmV0dXJuIG5vcm1hbGl6ZShvdXQsIGZyb21NYXQzKG91dCwgbWF0cikpO1xuICB9O1xufSgpOyIsIi8qXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIHZlYzMsXG4gIHF1YXQsXG4gIG1hdDRcbn0gZnJvbSAnZ2wtbWF0cml4JztcblxuZXhwb3J0IGNvbnN0IFBSSVZBVEUgPSBTeW1ib2woJ0BAd2VieHItcG9seWZpbGwvWFJSaWdpZFRyYW5zZm9ybScpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBYUlJpZ2lkVHJhbnNmb3JtIHtcbiAgLy8gbm8gYXJndW1lbnRzOiBpZGVudGl0eSB0cmFuc2Zvcm1cbiAgLy8gKEZsb2F0MzJBcnJheSk6IHRyYW5zZm9ybSBiYXNlZCBvbiBtYXRyaXhcbiAgLy8gKERPTVBvaW50UmVhZE9ubHkpOiB0cmFuc2Zvcm0gYmFzZWQgb24gcG9zaXRpb24gd2l0aG91dCBhbnkgcm90YXRpb25cbiAgLy8gKERPTVBvaW50UmVhZE9ubHksIERPTVBvaW50UmVhZE9ubHkpOiB0cmFuc2Zvcm0gYmFzZWQgb24gcG9zaXRpb24gYW5kXG4gIC8vIG9yaWVudGF0aW9uIHF1YXRlcm5pb25cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpc1tQUklWQVRFXSA9IHtcbiAgICAgIG1hdHJpeDogbnVsbCxcbiAgICAgIHBvc2l0aW9uOiBudWxsLFxuICAgICAgb3JpZW50YXRpb246IG51bGwsXG4gICAgICBpbnZlcnNlOiBudWxsLFxuICAgIH07XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpc1tQUklWQVRFXS5tYXRyaXggPSBtYXQ0LmlkZW50aXR5KG5ldyBGbG9hdDMyQXJyYXkoMTYpKTtcbiAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGlmIChhcmd1bWVudHNbMF0gaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpIHtcbiAgICAgICAgdGhpc1tQUklWQVRFXS5tYXRyaXggPSBhcmd1bWVudHNbMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzW1BSSVZBVEVdLnBvc2l0aW9uID0gdGhpcy5fZ2V0UG9pbnQoYXJndW1lbnRzWzBdKTtcbiAgICAgICAgdGhpc1tQUklWQVRFXS5vcmllbnRhdGlvbiA9IERPTVBvaW50UmVhZE9ubHkuZnJvbVBvaW50KHtcbiAgICAgICAgICAgIHg6IDAsIHk6IDAsIHo6IDAsIHc6IDFcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgICB0aGlzW1BSSVZBVEVdLnBvc2l0aW9uID0gdGhpcy5fZ2V0UG9pbnQoYXJndW1lbnRzWzBdKTtcbiAgICAgIHRoaXNbUFJJVkFURV0ub3JpZW50YXRpb24gPSB0aGlzLl9nZXRQb2ludChhcmd1bWVudHNbMV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb28gbWFueSBhcmd1bWVudHMhXCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzW1BSSVZBVEVdLm1hdHJpeCkge1xuICAgICAgICAvLyBEZWNvbXBvc2UgbWF0cml4IGludG8gcG9zaXRpb24gYW5kIG9yaWVudGF0aW9uLlxuICAgICAgICBsZXQgcG9zaXRpb24gPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICBtYXQ0LmdldFRyYW5zbGF0aW9uKHBvc2l0aW9uLCB0aGlzW1BSSVZBVEVdLm1hdHJpeCk7XG4gICAgICAgIHRoaXNbUFJJVkFURV0ucG9zaXRpb24gPSBET01Qb2ludFJlYWRPbmx5LmZyb21Qb2ludCh7XG4gICAgICAgICAgICB4OiBwb3NpdGlvblswXSxcbiAgICAgICAgICAgIHk6IHBvc2l0aW9uWzFdLFxuICAgICAgICAgICAgejogcG9zaXRpb25bMl1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IG9yaWVudGF0aW9uID0gcXVhdC5jcmVhdGUoKTtcbiAgICAgICAgbWF0NC5nZXRSb3RhdGlvbihvcmllbnRhdGlvbiwgdGhpc1tQUklWQVRFXS5tYXRyaXgpO1xuICAgICAgICB0aGlzW1BSSVZBVEVdLm9yaWVudGF0aW9uID0gRE9NUG9pbnRSZWFkT25seS5mcm9tUG9pbnQoe1xuICAgICAgICAgIHg6IG9yaWVudGF0aW9uWzBdLFxuICAgICAgICAgIHk6IG9yaWVudGF0aW9uWzFdLFxuICAgICAgICAgIHo6IG9yaWVudGF0aW9uWzJdLFxuICAgICAgICAgIHc6IG9yaWVudGF0aW9uWzNdXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENvbXBvc2UgbWF0cml4IGZyb20gcG9zaXRpb24gYW5kIG9yaWVudGF0aW9uLlxuICAgICAgICB0aGlzW1BSSVZBVEVdLm1hdHJpeCA9IG1hdDQuaWRlbnRpdHkobmV3IEZsb2F0MzJBcnJheSgxNikpO1xuICAgICAgICBtYXQ0LmZyb21Sb3RhdGlvblRyYW5zbGF0aW9uKFxuICAgICAgICAgIHRoaXNbUFJJVkFURV0ubWF0cml4LFxuICAgICAgICAgIHF1YXQuZnJvbVZhbHVlcyhcbiAgICAgICAgICAgIHRoaXNbUFJJVkFURV0ub3JpZW50YXRpb24ueCxcbiAgICAgICAgICAgIHRoaXNbUFJJVkFURV0ub3JpZW50YXRpb24ueSxcbiAgICAgICAgICAgIHRoaXNbUFJJVkFURV0ub3JpZW50YXRpb24ueixcbiAgICAgICAgICAgIHRoaXNbUFJJVkFURV0ub3JpZW50YXRpb24udyksXG4gICAgICAgICAgdmVjMy5mcm9tVmFsdWVzKFxuICAgICAgICAgICAgdGhpc1tQUklWQVRFXS5wb3NpdGlvbi54LFxuICAgICAgICAgICAgdGhpc1tQUklWQVRFXS5wb3NpdGlvbi55LFxuICAgICAgICAgICAgdGhpc1tQUklWQVRFXS5wb3NpdGlvbi56KVxuICAgICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcnkgdG8gY29udmVydCBhcmcgdG8gYSBET01Qb2ludFJlYWRPbmx5IGlmIGl0IGlzbid0IGFscmVhZHkgb25lLlxuICAgKiBAcGFyYW0geyp9IGFyZ1xuICAgKiBAcmV0dXJuIHtET01Qb2ludFJlYWRPbmx5fVxuICAgKi9cbiAgX2dldFBvaW50KGFyZykge1xuICAgIGlmIChhcmcgaW5zdGFuY2VvZiBET01Qb2ludFJlYWRPbmx5KSB7XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH1cblxuICAgIHJldHVybiBET01Qb2ludFJlYWRPbmx5LmZyb21Qb2ludChhcmcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0Zsb2F0MzJBcnJheX1cbiAgICovXG4gIGdldCBtYXRyaXgoKSB7IHJldHVybiB0aGlzW1BSSVZBVEVdLm1hdHJpeDsgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtET01Qb2ludFJlYWRPbmx5fVxuICAgKi9cbiAgZ2V0IHBvc2l0aW9uKCkgeyByZXR1cm4gdGhpc1tQUklWQVRFXS5wb3NpdGlvbjsgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtET01Qb2ludFJlYWRPbmx5fVxuICAgKi9cbiAgZ2V0IG9yaWVudGF0aW9uKCkgeyByZXR1cm4gdGhpc1tQUklWQVRFXS5vcmllbnRhdGlvbjsgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtYUlJpZ2lkVHJhbnNmb3JtfVxuICAgKi9cbiAgZ2V0IGludmVyc2UoKSB7XG4gICAgaWYgKHRoaXNbUFJJVkFURV0uaW52ZXJzZSA9PT0gbnVsbCkge1xuICAgICAgbGV0IGludk1hdHJpeCA9IG1hdDQuaWRlbnRpdHkobmV3IEZsb2F0MzJBcnJheSgxNikpO1xuICAgICAgbWF0NC5pbnZlcnQoaW52TWF0cml4LCB0aGlzW1BSSVZBVEVdLm1hdHJpeCk7XG4gICAgICB0aGlzW1BSSVZBVEVdLmludmVyc2UgPSBuZXcgWFJSaWdpZFRyYW5zZm9ybShpbnZNYXRyaXgpO1xuICAgICAgdGhpc1tQUklWQVRFXS5pbnZlcnNlW1BSSVZBVEVdLmludmVyc2UgPSB0aGlzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzW1BSSVZBVEVdLmludmVyc2U7XG4gIH1cbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCBYUlZpZXdwb3J0IGZyb20gJy4vWFJWaWV3cG9ydCc7XG5pbXBvcnQgWFJSaWdpZFRyYW5zZm9ybSBmcm9tICcuL1hSUmlnaWRUcmFuc2Zvcm0nO1xuXG5jb25zdCBYUkV5ZXMgPSBbJ2xlZnQnLCAncmlnaHQnLCAnbm9uZSddO1xuXG5leHBvcnQgY29uc3QgUFJJVkFURSA9IFN5bWJvbCgnQEB3ZWJ4ci1wb2x5ZmlsbC9YUlZpZXcnKTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgWFJWaWV3IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7WFJEZXZpY2V9IGRldmljZVxuICAgKiBAcGFyYW0ge1hSRXllfSBleWVcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNlc3Npb25JZFxuICAgKi9cbiAgY29uc3RydWN0b3IoZGV2aWNlLCB0cmFuc2Zvcm0sIGV5ZSwgc2Vzc2lvbklkKSB7XG4gICAgaWYgKCFYUkV5ZXMuaW5jbHVkZXMoZXllKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBYUkV5ZSBtdXN0IGJlIG9uZSBvZjogJHtYUkV5ZXN9YCk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGEgc2hhcmVkIG9iamVjdCB0aGF0IGNhbiBiZSB1cGRhdGVkIGJ5IG90aGVyIGNvZGVcbiAgICAvLyB0aGF0IGNhbiB1cGRhdGUgWFJWaWV3cG9ydCB2YWx1ZXMgdG8gYWRoZXJlIHRvIEFQSS5cbiAgICAvLyBVZ2x5IGJ1dCBpdCB3b3Jrcy5cbiAgICBjb25zdCB0ZW1wID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBjb25zdCB2aWV3cG9ydCA9IG5ldyBYUlZpZXdwb3J0KHRlbXApO1xuXG4gICAgdGhpc1tQUklWQVRFXSA9IHtcbiAgICAgIGRldmljZSxcbiAgICAgIGV5ZSxcbiAgICAgIHZpZXdwb3J0LFxuICAgICAgdGVtcCxcbiAgICAgIHNlc3Npb25JZCxcbiAgICAgIHRyYW5zZm9ybSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1hSRXllfVxuICAgKi9cbiAgZ2V0IGV5ZSgpIHsgcmV0dXJuIHRoaXNbUFJJVkFURV0uZXllOyB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0Zsb2F0MzJBcnJheX1cbiAgICovXG4gIGdldCBwcm9qZWN0aW9uTWF0cml4KCkgeyByZXR1cm4gdGhpc1tQUklWQVRFXS5kZXZpY2UuZ2V0UHJvamVjdGlvbk1hdHJpeCh0aGlzLmV5ZSk7IH1cblxuICAvKipcbiAgICogQHJldHVybiB7WFJSaWdpZFRyYW5zZm9ybX1cbiAgICovXG4gIGdldCB0cmFuc2Zvcm0oKSB7IHJldHVybiB0aGlzW1BSSVZBVEVdLnRyYW5zZm9ybTsgfVxuXG4gIC8qKlxuICAgKiBOT04tU1RBTkRBUkRcbiAgICpcbiAgICogYGdldFZpZXdwb3J0YCBpcyBub3cgZXhwb3NlZCB2aWEgWFJXZWJHTExheWVyIGluc3RlYWQgb2YgWFJWaWV3LlxuICAgKiBYUldlYkdMTGF5ZXIgZGVsZWdhdGVzIGFsbCB0aGUgYWN0dWFsIHdvcmsgdG8gdGhpcyBmdW5jdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtYUldlYkdMTGF5ZXJ9IGxheWVyXG4gICAqIEByZXR1cm4ge1hSVmlld3BvcnQ/fVxuICAgKi9cbiAgX2dldFZpZXdwb3J0KGxheWVyKSB7XG4gICAgaWYgKHRoaXNbUFJJVkFURV0uZGV2aWNlLmdldFZpZXdwb3J0KHRoaXNbUFJJVkFURV0uc2Vzc2lvbklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXllLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbUFJJVkFURV0udGVtcCkpIHtcbiAgICAgIHJldHVybiB0aGlzW1BSSVZBVEVdLnZpZXdwb3J0O1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1BSSVZBVEUgYXMgU0VTU0lPTl9QUklWQVRFfSBmcm9tICcuL1hSU2Vzc2lvbic7XG5pbXBvcnQgWFJWaWV3ZXJQb3NlIGZyb20gJy4vWFJWaWV3ZXJQb3NlJztcbmltcG9ydCBYUlZpZXcgZnJvbSAnLi9YUlZpZXcnO1xuXG5leHBvcnQgY29uc3QgUFJJVkFURSA9IFN5bWJvbCgnQEB3ZWJ4ci1wb2x5ZmlsbC9YUkZyYW1lJyk7XG5cbmNvbnN0IE5PTl9BQ1RJVkVfTVNHID0gXCJYUkZyYW1lIGFjY2VzcyBvdXRzaWRlIHRoZSBjYWxsYmFjayB0aGF0IHByb2R1Y2VkIGl0IGlzIGludmFsaWQuXCI7XG5jb25zdCBOT05fQU5JTUZSQU1FX01TRyA9IFwiZ2V0Vmlld2VyUG9zZSBjYW4gb25seSBiZSBjYWxsZWQgb24gWFJGcmFtZSBvYmplY3RzIHBhc3NlZCB0byBYUlNlc3Npb24ucmVxdWVzdEFuaW1hdGlvbkZyYW1lIGNhbGxiYWNrcy5cIjtcblxubGV0IE5FWFRfRlJBTUVfSUQgPSAwO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBYUkZyYW1lIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7WFJEZXZpY2V9IGRldmljZVxuICAgKiBAcGFyYW0ge1hSU2Vzc2lvbn0gc2Vzc2lvblxuICAgKiBAcGFyYW0ge251bWJlcn0gc2Vzc2lvbklkXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXZpY2UsIHNlc3Npb24sIHNlc3Npb25JZCkge1xuICAgIHRoaXNbUFJJVkFURV0gPSB7XG4gICAgICBpZDogKytORVhUX0ZSQU1FX0lELFxuICAgICAgYWN0aXZlOiBmYWxzZSxcbiAgICAgIGFuaW1hdGlvbkZyYW1lOiBmYWxzZSxcbiAgICAgIGRldmljZSxcbiAgICAgIHNlc3Npb24sXG4gICAgICBzZXNzaW9uSWRcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1hSU2Vzc2lvbn0gc2Vzc2lvblxuICAgKi9cbiAgZ2V0IHNlc3Npb24oKSB7IHJldHVybiB0aGlzW1BSSVZBVEVdLnNlc3Npb247IH1cblxuICAvKipcbiAgICogQHBhcmFtIHtYUlJlZmVyZW5jZVNwYWNlfSByZWZlcmVuY2VTcGFjZVxuICAgKiBAcmV0dXJuIHtYUlZpZXdlclBvc2U/fVxuICAgKi9cbiAgZ2V0Vmlld2VyUG9zZShyZWZlcmVuY2VTcGFjZSkge1xuICAgIGlmICghdGhpc1tQUklWQVRFXS5hbmltYXRpb25GcmFtZSkge1xuICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihOT05fQU5JTUZSQU1FX01TRywgJ0ludmFsaWRTdGF0ZUVycm9yJyk7XG4gICAgfVxuICAgIGlmICghdGhpc1tQUklWQVRFXS5hY3RpdmUpIHtcbiAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oTk9OX0FDVElWRV9NU0csICdJbnZhbGlkU3RhdGVFcnJvcicpO1xuICAgIH1cblxuICAgIGNvbnN0IGRldmljZSA9IHRoaXNbUFJJVkFURV0uZGV2aWNlO1xuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzW1BSSVZBVEVdLnNlc3Npb247XG5cbiAgICBzZXNzaW9uW1NFU1NJT05fUFJJVkFURV0udmlld2VyU3BhY2UuX2Vuc3VyZVBvc2VVcGRhdGVkKGRldmljZSwgdGhpc1tQUklWQVRFXS5pZCk7XG4gICAgcmVmZXJlbmNlU3BhY2UuX2Vuc3VyZVBvc2VVcGRhdGVkKGRldmljZSwgdGhpc1tQUklWQVRFXS5pZCk7XG5cbiAgICBsZXQgdmlld2VyVHJhbnNmb3JtID0gcmVmZXJlbmNlU3BhY2UuX2dldFNwYWNlUmVsYXRpdmVUcmFuc2Zvcm0oc2Vzc2lvbltTRVNTSU9OX1BSSVZBVEVdLnZpZXdlclNwYWNlKTtcblxuICAgIGNvbnN0IHZpZXdzID0gW107XG4gICAgZm9yIChsZXQgdmlld1NwYWNlIG9mIHNlc3Npb25bU0VTU0lPTl9QUklWQVRFXS52aWV3U3BhY2VzKSB7XG4gICAgICB2aWV3U3BhY2UuX2Vuc3VyZVBvc2VVcGRhdGVkKGRldmljZSwgdGhpc1tQUklWQVRFXS5pZCk7XG4gICAgICBsZXQgdmlld1RyYW5zZm9ybSA9IHJlZmVyZW5jZVNwYWNlLl9nZXRTcGFjZVJlbGF0aXZlVHJhbnNmb3JtKHZpZXdTcGFjZSk7XG4gICAgICBsZXQgdmlldyA9IG5ldyBYUlZpZXcoZGV2aWNlLCB2aWV3VHJhbnNmb3JtLCB2aWV3U3BhY2UuZXllLCB0aGlzW1BSSVZBVEVdLnNlc3Npb25JZCk7XG4gICAgICB2aWV3cy5wdXNoKHZpZXcpO1xuICAgIH1cbiAgICBsZXQgdmlld2VyUG9zZSA9IG5ldyBYUlZpZXdlclBvc2Uodmlld2VyVHJhbnNmb3JtLCB2aWV3cywgZmFsc2UgLyogVE9ETzogZW11bGF0ZWRQb3NpdGlvbiAqLyk7XG5cbiAgICByZXR1cm4gdmlld2VyUG9zZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1hSU3BhY2V9IHNwYWNlXG4gICAqIEBwYXJhbSB7WFJTcGFjZX0gYmFzZVNwYWNlXG4gICAqIEByZXR1cm4ge1hSUG9zZT99IHBvc2VcbiAgICovXG4gIGdldFBvc2Uoc3BhY2UsIGJhc2VTcGFjZSkge1xuICAgIGlmICghdGhpc1tQUklWQVRFXS5hY3RpdmUpIHtcbiAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oTk9OX0FDVElWRV9NU0csICdJbnZhbGlkU3RhdGVFcnJvcicpO1xuICAgIH1cblxuICAgIGNvbnN0IGRldmljZSA9IHRoaXNbUFJJVkFURV0uZGV2aWNlO1xuICAgIGlmIChzcGFjZS5fc3BlY2lhbFR5cGUgPT09IFwidGFyZ2V0LXJheVwiIHx8IHNwYWNlLl9zcGVjaWFsVHlwZSA9PT0gXCJncmlwXCIpIHtcbiAgICAgIC8vIFRPRE86IFN0b3Agc3BlY2lhbC1jYXNpbmcgaW5wdXQuXG4gICAgICByZXR1cm4gZGV2aWNlLmdldElucHV0UG9zZShcbiAgICAgICAgc3BhY2UuX2lucHV0U291cmNlLCBiYXNlU3BhY2UsIHNwYWNlLl9zcGVjaWFsVHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwYWNlLl9lbnN1cmVQb3NlVXBkYXRlZChkZXZpY2UsIHRoaXNbUFJJVkFURV0uaWQpO1xuICAgICAgYmFzZVNwYWNlLl9lbnN1cmVQb3NlVXBkYXRlZChkZXZpY2UsIHRoaXNbUFJJVkFURV0uaWQpO1xuICAgICAgbGV0IHRyYW5zZm9ybSA9IGJhc2VTcGFjZS5fZ2V0U3BhY2VSZWxhdGl2ZVRyYW5zZm9ybShzcGFjZSk7XG4gICAgICBpZiAoIXRyYW5zZm9ybSkgeyByZXR1cm4gbnVsbDsgfVxuICAgICAgcmV0dXJuIG5ldyBYUlBvc2UodHJhbnNmb3JtLCBmYWxzZSAvKiBUT0RPOiBlbXVsYXRlZFBvc2l0aW9uICovKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCBYUlJpZ2lkVHJhbnNmb3JtIGZyb20gJy4vWFJSaWdpZFRyYW5zZm9ybSc7XG5pbXBvcnQge1xuICBtYXQ0XG59IGZyb20gJ2dsLW1hdHJpeCc7XG5cbmV4cG9ydCBjb25zdCBQUklWQVRFID0gU3ltYm9sKCdAQHdlYnhyLXBvbHlmaWxsL1hSU3BhY2UnKTtcblxuLy8gTm90IGV4cG9zZWQsIGZvciByZWZlcmVuY2Ugb25seVxuZXhwb3J0IGNvbnN0IFhSU3BhY2VTcGVjaWFsVHlwZXMgPSBbXG4gIFwiZ3JpcFwiLFxuICBcInRhcmdldC1yYXlcIlxuXTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgWFJTcGFjZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZz99IHNwZWNpYWxUeXBlXG4gICAqIEBwYXJhbSB7WFJJbnB1dFNvdXJjZT99IGlucHV0U291cmNlIFxuICAgKi9cbiAgY29uc3RydWN0b3Ioc3BlY2lhbFR5cGUgPSBudWxsLCBpbnB1dFNvdXJjZSA9IG51bGwpIHtcbiAgICB0aGlzW1BSSVZBVEVdID0ge1xuICAgICAgc3BlY2lhbFR5cGUsXG4gICAgICBpbnB1dFNvdXJjZSxcbiAgICAgIC8vIFRoZSB0cmFuc2Zvcm0gZm9yIHRoZSBzcGFjZSBpbiB0aGUgYmFzZSBzcGFjZSwgYWxvbmcgd2l0aCBpdCdzIGludmVyc2VcbiAgICAgIGJhc2VNYXRyaXg6IG51bGwsXG4gICAgICBpbnZlcnNlQmFzZU1hdHJpeDogbnVsbCxcbiAgICAgIGxhc3RGcmFtZUlkOiAtMVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nP31cbiAgICovXG4gIGdldCBfc3BlY2lhbFR5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXNbUFJJVkFURV0uc3BlY2lhbFR5cGU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7WFJJbnB1dFNvdXJjZT99XG4gICAqL1xuICBnZXQgX2lucHV0U291cmNlKCkge1xuICAgIHJldHVybiB0aGlzW1BSSVZBVEVdLmlucHV0U291cmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIE5PTi1TVEFOREFSRFxuICAgKiBUcmlnZ2VyIGFuIHVwZGF0ZSBmb3IgdGhpcyBzcGFjZSdzIGJhc2UgcG9zZSBpZiBuZWNlc3NhcnlcbiAgICogQHBhcmFtIHtYUkRldmljZX0gZGV2aWNlXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBmcmFtZUlkXG4gICAqL1xuICBfZW5zdXJlUG9zZVVwZGF0ZWQoZGV2aWNlLCBmcmFtZUlkKSB7XG4gICAgaWYgKGZyYW1lSWQgPT0gdGhpc1tQUklWQVRFXS5sYXN0RnJhbWVJZCkgcmV0dXJuO1xuICAgIHRoaXNbUFJJVkFURV0ubGFzdEZyYW1lSWQgPSBmcmFtZUlkO1xuICAgIHRoaXMuX29uUG9zZVVwZGF0ZShkZXZpY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIE5PTi1TVEFOREFSRFxuICAgKiBDYWxsZWQgd2hlbiB0aGlzIHNwYWNlJ3MgYmFzZSBwb3NlIG5lZWRzIHRvIGJlIHVwZGF0ZWRcbiAgICogQHBhcmFtIHtYUkRldmljZX0gZGV2aWNlXG4gICAqL1xuICBfb25Qb3NlVXBkYXRlKGRldmljZSkge1xuICAgIGlmICh0aGlzW1BSSVZBVEVdLnNwZWNpYWxUeXBlID09ICd2aWV3ZXInKSB7XG4gICAgICB0aGlzLl9iYXNlTWF0cml4ID0gZGV2aWNlLmdldEJhc2VQb3NlTWF0cml4KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE5PTi1TVEFOREFSRFxuICAgKiBAcGFyYW0ge0Zsb2F0MzJBcnJheSgxNil9IG1hdHJpeFxuICAgKi9cbiAgc2V0IF9iYXNlTWF0cml4KG1hdHJpeCkge1xuICAgIHRoaXNbUFJJVkFURV0uYmFzZU1hdHJpeCA9IG1hdHJpeDtcbiAgICB0aGlzW1BSSVZBVEVdLmludmVyc2VCYXNlTWF0cml4ID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBOT04tU1RBTkRBUkRcbiAgICogQHJldHVybiB7RmxvYXQzMkFycmF5KDE2KX1cbiAgICovXG4gIGdldCBfYmFzZU1hdHJpeCgpIHtcbiAgICBpZiAoIXRoaXNbUFJJVkFURV0uYmFzZU1hdHJpeCkge1xuICAgICAgaWYgKHRoaXNbUFJJVkFURV0uaW52ZXJzZUJhc2VNYXRyaXgpIHtcbiAgICAgICAgdGhpc1tQUklWQVRFXS5iYXNlTWF0cml4ID0gbmV3IEZsb2F0MzJBcnJheSgxNik7XG4gICAgICAgIG1hdDQuaW52ZXJ0KHRoaXNbUFJJVkFURV0uYmFzZU1hdHJpeCwgdGhpc1tQUklWQVRFXS5pbnZlcnNlQmFzZU1hdHJpeCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzW1BSSVZBVEVdLmJhc2VNYXRyaXg7XG4gIH1cblxuICAvKipcbiAgICogTk9OLVNUQU5EQVJEXG4gICAqIEBwYXJhbSB7RmxvYXQzMkFycmF5KDE2KX0gbWF0cml4XG4gICAqL1xuICBzZXQgX2ludmVyc2VCYXNlTWF0cml4KG1hdHJpeCkge1xuICAgIHRoaXNbUFJJVkFURV0uaW52ZXJzZUJhc2VNYXRyaXggPSBtYXRyaXg7XG4gICAgdGhpc1tQUklWQVRFXS5iYXNlTWF0cml4ID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBOT04tU1RBTkRBUkRcbiAgICogQHJldHVybiB7RmxvYXQzMkFycmF5KDE2KX1cbiAgICovXG4gIGdldCBfaW52ZXJzZUJhc2VNYXRyaXgoKSB7XG4gICAgaWYgKCF0aGlzW1BSSVZBVEVdLmludmVyc2VCYXNlTWF0cml4KSB7XG4gICAgICBpZiAodGhpc1tQUklWQVRFXS5iYXNlTWF0cml4KSB7XG4gICAgICAgIHRoaXNbUFJJVkFURV0uaW52ZXJzZUJhc2VNYXRyaXggPSBuZXcgRmxvYXQzMkFycmF5KDE2KTtcbiAgICAgICAgbWF0NC5pbnZlcnQodGhpc1tQUklWQVRFXS5pbnZlcnNlQmFzZU1hdHJpeCwgdGhpc1tQUklWQVRFXS5iYXNlTWF0cml4KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXNbUFJJVkFURV0uaW52ZXJzZUJhc2VNYXRyaXg7XG4gIH1cblxuICAvKipcbiAgICogTk9OLVNUQU5EQVJEXG4gICAqIEdldHMgdGhlIHRyYW5zZm9ybSBvZiB0aGUgZ2l2ZW4gc3BhY2UgaW4gdGhpcyBzcGFjZVxuICAgKlxuICAgKiBAcGFyYW0ge1hSU3BhY2V9IHNwYWNlXG4gICAqIEByZXR1cm4ge1hSUmlnaWRUcmFuc2Zvcm19XG4gICAqL1xuICBfZ2V0U3BhY2VSZWxhdGl2ZVRyYW5zZm9ybShzcGFjZSkge1xuICAgIGlmICghdGhpcy5faW52ZXJzZUJhc2VNYXRyaXggfHwgIXNwYWNlLl9iYXNlTWF0cml4KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbGV0IG91dCA9IG5ldyBGbG9hdDMyQXJyYXkoMTYpO1xuICAgIG1hdDQubXVsdGlwbHkob3V0LCB0aGlzLl9pbnZlcnNlQmFzZU1hdHJpeCwgc3BhY2UuX2Jhc2VNYXRyaXgpO1xuICAgIHJldHVybiBuZXcgWFJSaWdpZFRyYW5zZm9ybShvdXQpO1xuICB9XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgWFJTcGFjZSBmcm9tICcuL1hSU3BhY2UnO1xuaW1wb3J0IHtcbiAgbWF0NFxufSBmcm9tICdnbC1tYXRyaXgnO1xuXG5jb25zdCBERUZBVUxUX0VNVUxBVElPTl9IRUlHSFQgPSAxLjY7XG5cbmV4cG9ydCBjb25zdCBQUklWQVRFID0gU3ltYm9sKCdAQHdlYnhyLXBvbHlmaWxsL1hSUmVmZXJlbmNlU3BhY2UnKTtcblxuZXhwb3J0IGNvbnN0IFhSUmVmZXJlbmNlU3BhY2VUeXBlcyA9IFtcbiAgJ3ZpZXdlcicsXG4gICdsb2NhbCcsXG4gICdsb2NhbC1mbG9vcicsXG4gICdib3VuZGVkLWZsb29yJyxcbiAgJ3VuYm91bmRlZCcgLy8gVE9ETzogJ3VuYm91bmRlZCcgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgcG9seWZpbGwuXG5dO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNGbG9vcih0eXBlKSB7XG4gIHJldHVybiB0eXBlID09PSAnYm91bmRlZC1mbG9vcicgfHwgdHlwZSA9PT0gJ2xvY2FsLWZsb29yJztcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgWFJSZWZlcmVuY2VTcGFjZSBleHRlbmRzIFhSU3BhY2Uge1xuICAvKipcbiAgICogT3B0aW9uYWxseSB0YWtlcyBhIGB0cmFuc2Zvcm1gIGZyb20gYSBkZXZpY2UncyByZXF1ZXN0RnJhbWVPZlJlZmVyZW5jZU1hdHJpeFxuICAgKiBzbyBkZXZpY2UncyBjYW4gcHJvdmlkZSB0aGVpciBvd24gdHJhbnNmb3JtcyBmb3Igc3RhZ2UgKG9yIGlmIHRoZXlcbiAgICogd2FudGVkIHRvIG92ZXJyaWRlIGV5ZS1sZXZlbC9oZWFkLW1vZGVsKS5cbiAgICpcbiAgICogQHBhcmFtIHtYUlJlZmVyZW5jZVNwYWNlVHlwZX0gdHlwZVxuICAgKiBAcGFyYW0ge0Zsb2F0MzJBcnJheT99IHRyYW5zZm9ybVxuICAgKi9cbiAgY29uc3RydWN0b3IodHlwZSwgdHJhbnNmb3JtID0gbnVsbCkge1xuICAgIGlmICghWFJSZWZlcmVuY2VTcGFjZVR5cGVzLmluY2x1ZGVzKHR5cGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFhSUmVmZXJlbmNlU3BhY2VUeXBlIG11c3QgYmUgb25lIG9mICR7WFJSZWZlcmVuY2VTcGFjZVR5cGVzfWApO1xuICAgIH1cblxuICAgIHN1cGVyKHR5cGUpO1xuXG4gICAgLy8gSWYgc3RhZ2UgZW11bGF0aW9uIGlzIGRpc2FibGVkLCBhbmQgdGhpcyBpcyBhIHN0YWdlIGZyYW1lIG9mIHJlZmVyZW5jZSxcbiAgICAvLyBhbmQgdGhlIFhSRGV2aWNlIGRpZCBub3QgcHJvdmlkZSBhIHRyYW5zZm9ybSwgdGhpcyBpcyBhbiBpbnZhbGlkXG4gICAgLy8gY29uZmlndXJhdGlvbiBhbmQgd2Ugc2hvdWxkbid0IGVtdWxhdGUgaGVyZS4gWFJTZXNzaW9uLnJlcXVlc3RGcmFtZU9mUmVmZXJlbmNlXG4gICAgLy8gc2hvdWxkIGNoZWNrIHRoaXMgYXMgd2VsbC5cbiAgICBpZiAodHlwZSA9PT0gJ2JvdW5kZWQtZmxvb3InICYmICF0cmFuc2Zvcm0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgWFJSZWZlcmVuY2VTcGFjZSBjYW5ub3QgdXNlICdib3VuZGVkLWZsb29yJyB0eXBlIGlmIHRoZSBwbGF0Zm9ybSBkb2VzIG5vdCBwcm92aWRlIHRoZSBmbG9vciBsZXZlbGApO1xuICAgIH1cblxuICAgIC8vIElmIHdlJ3JlIHVzaW5nIGZsb29yLWxldmVsIHJlZmVyZW5jZSBhbmQgbm8gdHJhbnNmb3JtLCB3ZSdyZSBlbXVsYXRpbmcuXG4gICAgLy8gU2V0IGVtdWxhdGVkIGhlaWdodCBmcm9tIG9wdGlvbiBvciB1c2UgdGhlIGRlZmF1bHRcbiAgICBpZiAoaXNGbG9vcih0eXBlKSAmJiAhdHJhbnNmb3JtKSB7XG4gICAgICAvLyBBcHBseSBhbiBlbXVsYXRlZCBoZWlnaHQgdG8gdGhlIGB5YCB0cmFuc2xhdGlvblxuICAgICAgdHJhbnNmb3JtID0gbWF0NC5pZGVudGl0eShuZXcgRmxvYXQzMkFycmF5KDE2KSk7XG4gICAgICB0cmFuc2Zvcm1bMTNdID0gREVGQVVMVF9FTVVMQVRJT05fSEVJR0hUO1xuICAgIH1cblxuICAgIHRoaXMuX2ludmVyc2VCYXNlTWF0cml4ID0gdHJhbnNmb3JtIHx8IG1hdDQuaWRlbnRpdHkobmV3IEZsb2F0MzJBcnJheSgxNikpO1xuXG4gICAgdGhpc1tQUklWQVRFXSA9IHtcbiAgICAgIHR5cGUsXG4gICAgICB0cmFuc2Zvcm0sXG4gICAgICBvcmlnaW5PZmZzZXQgOiBtYXQ0LmlkZW50aXR5KG5ldyBGbG9hdDMyQXJyYXkoMTYpKSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIE5PTi1TVEFOREFSRFxuICAgKiBUYWtlcyBhIGJhc2UgcG9zZSBtb2RlbCBtYXRyaXggYW5kIHRyYW5zZm9ybXMgaXQgYnkgdGhlXG4gICAqIGZyYW1lIG9mIHJlZmVyZW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtGbG9hdDMyQXJyYXl9IG91dFxuICAgKiBAcGFyYW0ge0Zsb2F0MzJBcnJheX0gcG9zZVxuICAgKi9cbiAgX3RyYW5zZm9ybUJhc2VQb3NlTWF0cml4KG91dCwgcG9zZSkge1xuICAgIG1hdDQubXVsdGlwbHkob3V0LCB0aGlzLl9pbnZlcnNlQmFzZU1hdHJpeCwgcG9zZSk7XG4gIH1cblxuICAvKipcbiAgICogTk9OLVNUQU5EQVJEXG4gICAqIFxuICAgKiBAcmV0dXJuIHtGbG9hdDMyQXJyYXl9XG4gICAqL1xuICBfb3JpZ2luT2Zmc2V0TWF0cml4KCkge1xuICAgIHJldHVybiB0aGlzW1BSSVZBVEVdLm9yaWdpbk9mZnNldDtcbiAgfVxuXG4gIC8qKlxuICAgKiB0cmFuc2Zvcm1NYXRyaXggPSBJbnYoT3JpZ2luT2Zmc2V0TWF0cml4KSAqIHRyYW5zZm9ybU1hdHJpeFxuICAgKiBAcGFyYW0ge0Zsb2F0MzJBcnJheX0gdHJhbnNmb3JtTWF0cml4IFxuICAgKi9cbiAgX2FkanVzdEZvck9yaWdpbk9mZnNldCh0cmFuc2Zvcm1NYXRyaXgpIHtcbiAgICBsZXQgaW52ZXJzZU9yaWdpbk9mZnNldE1hdHJpeCA9IG5ldyBGbG9hdDMyQXJyYXkoMTYpO1xuICAgIG1hdDQuaW52ZXJ0KGludmVyc2VPcmlnaW5PZmZzZXRNYXRyaXgsIHRoaXNbUFJJVkFURV0ub3JpZ2luT2Zmc2V0KTtcbiAgICBtYXQ0Lm11bHRpcGx5KHRyYW5zZm9ybU1hdHJpeCwgaW52ZXJzZU9yaWdpbk9mZnNldE1hdHJpeCwgdHJhbnNmb3JtTWF0cml4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB0cmFuc2Zvcm0gb2YgdGhlIGdpdmVuIHNwYWNlIGluIHRoaXMgc3BhY2VcbiAgICpcbiAgICogQHBhcmFtIHtYUlNwYWNlfSBzcGFjZVxuICAgKiBAcmV0dXJuIHtYUlJpZ2lkVHJhbnNmb3JtfVxuICAgKi9cbiAgX2dldFNwYWNlUmVsYXRpdmVUcmFuc2Zvcm0oc3BhY2UpIHtcbiAgICBsZXQgdHJhbnNmb3JtID0gc3VwZXIuX2dldFNwYWNlUmVsYXRpdmVUcmFuc2Zvcm0oc3BhY2UpO1xuICAgIC8vIFRPRE86IE9wdGltaXplIGF3YXkgZG91YmxlIGNyZWF0aW9uIG9mIFhSUmlnaWRUcmFuc2Zvcm1cbiAgICB0aGlzLl9hZGp1c3RGb3JPcmlnaW5PZmZzZXQodHJhbnNmb3JtLm1hdHJpeClcbiAgICByZXR1cm4gbmV3IFhSUmlnaWRUcmFuc2Zvcm0odHJhbnNmb3JtLm1hdHJpeCk7XG4gIH1cblxuICAvKipcbiAgICogRG9lc24ndCB1cGRhdGUgdGhlIGJvdW5kIGdlb21ldHJ5IGZvciBib3VuZGVkIHJlZmVyZW5jZSBzcGFjZXMuXG4gICAqIEBwYXJhbSB7WFJSaWdpZFRyYW5zZm9ybX0gYWRkaXRpb25hbE9mZnNldFxuICAgKiBAcmV0dXJuIHtYUlJlZmVyZW5jZVNwYWNlfVxuICAqL1xuICBnZXRPZmZzZXRSZWZlcmVuY2VTcGFjZShhZGRpdGlvbmFsT2Zmc2V0KSB7XG4gICAgbGV0IG5ld1NwYWNlID0gbmV3IFhSUmVmZXJlbmNlU3BhY2UoXG4gICAgICB0aGlzW1BSSVZBVEVdLnR5cGUsXG4gICAgICB0aGlzW1BSSVZBVEVdLnRyYW5zZm9ybSxcbiAgICAgIHRoaXNbUFJJVkFURV0uYm91bmRzKTtcblxuICAgIG1hdDQubXVsdGlwbHkobmV3U3BhY2VbUFJJVkFURV0ub3JpZ2luT2Zmc2V0LCB0aGlzW1BSSVZBVEVdLm9yaWdpbk9mZnNldCwgYWRkaXRpb25hbE9mZnNldC5tYXRyaXgpO1xuICAgIHJldHVybiBuZXdTcGFjZTtcbiAgfVxufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0IGNvbnN0IFBSSVZBVEUgPSBTeW1ib2woJ0BAd2VieHItcG9seWZpbGwvWFJSZW5kZXJTdGF0ZScpO1xuXG5leHBvcnQgY29uc3QgWFJSZW5kZXJTdGF0ZUluaXQgPSBPYmplY3QuZnJlZXplKHtcbiAgZGVwdGhOZWFyOiAwLjEsXG4gIGRlcHRoRmFyOiAxMDAwLjAsXG4gIGlubGluZVZlcnRpY2FsRmllbGRPZlZpZXc6IG51bGwsXG4gIGJhc2VMYXllcjogbnVsbFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFhSUmVuZGVyU3RhdGUge1xuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3Q/fSBzdGF0ZUluaXRcbiAgICovXG4gIGNvbnN0cnVjdG9yKHN0YXRlSW5pdCA9IHt9KSB7XG4gICAgY29uc3QgY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgWFJSZW5kZXJTdGF0ZUluaXQsIHN0YXRlSW5pdCk7XG4gICAgdGhpc1tQUklWQVRFXSA9IHsgY29uZmlnIH07XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IGRlcHRoTmVhcigpIHsgcmV0dXJuIHRoaXNbUFJJVkFURV0uY29uZmlnLmRlcHRoTmVhcjsgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgZGVwdGhGYXIoKSB7IHJldHVybiB0aGlzW1BSSVZBVEVdLmNvbmZpZy5kZXB0aEZhcjsgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXI/fVxuICAgKi9cbiAgZ2V0IGlubGluZVZlcnRpY2FsRmllbGRPZlZpZXcoKSB7IHJldHVybiB0aGlzW1BSSVZBVEVdLmNvbmZpZy5pbmxpbmVWZXJ0aWNhbEZpZWxkT2ZWaWV3OyB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1hSV2ViR0xMYXllcn1cbiAgICovXG4gIGdldCBiYXNlTGF5ZXIoKSB7IHJldHVybiB0aGlzW1BSSVZBVEVdLmNvbmZpZy5iYXNlTGF5ZXI7IH1cbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmV4cG9ydCBjb25zdCBQUklWQVRFID0gU3ltYm9sKCdAQHdlYnhyLXBvbHlmaWxsL1hSSW5wdXRTb3VyY2VFdmVudCcpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBYUklucHV0U291cmNlRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRJbml0RGljdFxuICAgKi9cbiAgY29uc3RydWN0b3IodHlwZSwgZXZlbnRJbml0RGljdCkge1xuICAgIHN1cGVyKHR5cGUsIGV2ZW50SW5pdERpY3QpO1xuICAgIHRoaXNbUFJJVkFURV0gPSB7XG4gICAgICBmcmFtZTogZXZlbnRJbml0RGljdC5mcmFtZSxcbiAgICAgIGlucHV0U291cmNlOiBldmVudEluaXREaWN0LmlucHV0U291cmNlXG4gICAgfTtcbiAgICAvLyBzYWZhcmkgYnVnOiAgc3VwZXIoKSBzZWVtcyB0byByZXR1cm4gb2JqZWN0IG9mIHR5cGUgRXZlbnQsIHdpdGggRXZlbnQgYXMgcHJvdG90eXBlXG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIFhSSW5wdXRTb3VyY2VFdmVudC5wcm90b3R5cGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1hSRnJhbWV9XG4gICAqL1xuICBnZXQgZnJhbWUoKSB7IHJldHVybiB0aGlzW1BSSVZBVEVdLmZyYW1lOyB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1hSSW5wdXRTb3VyY2V9XG4gICAqL1xuICBnZXQgaW5wdXRTb3VyY2UoKSB7IHJldHVybiB0aGlzW1BSSVZBVEVdLmlucHV0U291cmNlOyB9XG59IiwiLypcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0IGNvbnN0IFBSSVZBVEUgPSBTeW1ib2woJ0BAd2VieHItcG9seWZpbGwvWFJTZXNzaW9uRXZlbnQnKTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgWFJTZXNzaW9uRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRJbml0RGljdFxuICAgKi9cbiAgY29uc3RydWN0b3IodHlwZSwgZXZlbnRJbml0RGljdCkge1xuICAgIHN1cGVyKHR5cGUsIGV2ZW50SW5pdERpY3QpO1xuICAgIHRoaXNbUFJJVkFURV0gPSB7XG4gICAgICBzZXNzaW9uOiBldmVudEluaXREaWN0LnNlc3Npb25cbiAgICB9O1xuICAgIC8vIHNhZmFyaSBidWc6ICBzdXBlcigpIHNlZW1zIHRvIHJldHVybiBvYmplY3Qgb2YgdHlwZSBFdmVudCwgd2l0aCBFdmVudCBhcyBwcm90b3R5cGVcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgWFJTZXNzaW9uRXZlbnQucHJvdG90eXBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtYUlNlc3Npb259XG4gICAqL1xuICBnZXQgc2Vzc2lvbigpIHsgcmV0dXJuIHRoaXNbUFJJVkFURV0uc2Vzc2lvbjsgfVxufSIsIi8qXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmV4cG9ydCBjb25zdCBQUklWQVRFID0gU3ltYm9sKCdAQHdlYnhyLXBvbHlmaWxsL1hSSW5wdXRTb3VyY2VzQ2hhbmdlRXZlbnQnKTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgWFJJbnB1dFNvdXJjZXNDaGFuZ2VFdmVudCBleHRlbmRzIEV2ZW50IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudEluaXREaWN0XG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0eXBlLCBldmVudEluaXREaWN0KSB7XG4gICAgc3VwZXIodHlwZSwgZXZlbnRJbml0RGljdCk7XG4gICAgdGhpc1tQUklWQVRFXSA9IHtcbiAgICAgIHNlc3Npb246IGV2ZW50SW5pdERpY3Quc2Vzc2lvbixcbiAgICAgIGFkZGVkOiBldmVudEluaXREaWN0LmFkZGVkLFxuICAgICAgcmVtb3ZlZDogZXZlbnRJbml0RGljdC5yZW1vdmVkXG4gICAgfTtcbiAgICAvLyBzYWZhcmkgYnVnOiAgc3VwZXIoKSBzZWVtcyB0byByZXR1cm4gb2JqZWN0IG9mIHR5cGUgRXZlbnQsIHdpdGggRXZlbnQgYXMgcHJvdG90eXBlXG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIFhSSW5wdXRTb3VyY2VzQ2hhbmdlRXZlbnQucHJvdG90eXBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtYUlNlc3Npb259XG4gICAqL1xuICBnZXQgc2Vzc2lvbigpIHsgcmV0dXJuIHRoaXNbUFJJVkFURV0uc2Vzc2lvbjsgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtBcnJheTxYUklucHV0U291cmNlPn1cbiAgICovXG4gIGdldCBhZGRlZCgpIHsgcmV0dXJuIHRoaXNbUFJJVkFURV0uYWRkZWQ7IH1cblxuICAvKipcbiAgICogQHJldHVybiB7QXJyYXk8WFJJbnB1dFNvdXJjZT59XG4gICAqL1xuICBnZXQgcmVtb3ZlZCgpIHsgcmV0dXJuIHRoaXNbUFJJVkFURV0ucmVtb3ZlZDsgfVxufSIsIi8qXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuLi9FdmVudFRhcmdldC5qcydcbmltcG9ydCBYUkZyYW1lLCB7UFJJVkFURSBhcyBYUkZSQU1FX1BSSVZBVEV9IGZyb20gJy4vWFJGcmFtZSc7XG5pbXBvcnQgWFJSZWZlcmVuY2VTcGFjZSwge1xuICBYUlJlZmVyZW5jZVNwYWNlVHlwZXNcbn0gZnJvbSAnLi9YUlJlZmVyZW5jZVNwYWNlJztcbmltcG9ydCBYUlJlbmRlclN0YXRlIGZyb20gJy4vWFJSZW5kZXJTdGF0ZSc7XG5pbXBvcnQgWFJJbnB1dFNvdXJjZUV2ZW50IGZyb20gJy4vWFJJbnB1dFNvdXJjZUV2ZW50JztcbmltcG9ydCBYUlNlc3Npb25FdmVudCBmcm9tICcuL1hSU2Vzc2lvbkV2ZW50JztcbmltcG9ydCBYUlNwYWNlIGZyb20gJy4vWFJTcGFjZSc7XG5pbXBvcnQgWFJJbnB1dFNvdXJjZXNDaGFuZ2VFdmVudCBmcm9tICcuL1hSSW5wdXRTb3VyY2VzQ2hhbmdlRXZlbnQnO1xuXG5leHBvcnQgY29uc3QgUFJJVkFURSA9IFN5bWJvbCgnQEB3ZWJ4ci1wb2x5ZmlsbC9YUlNlc3Npb24nKTtcblxuLy8gTm9uc3RhbmRhcmQgaGVscGVyIGNsYXNzLiBOb3QgZXhwb3NlZCBieSB0aGUgQVBJIGFueXdoZXJlLlxuY2xhc3MgWFJWaWV3U3BhY2UgZXh0ZW5kcyBYUlNwYWNlIHtcbiAgY29uc3RydWN0b3IoZXllKSB7XG4gICAgc3VwZXIoZXllKTtcbiAgfVxuXG4gIGdldCBleWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NwZWNpYWxUeXBlO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHRoaXMgc3BhY2UncyBiYXNlIHBvc2UgbmVlZHMgdG8gYmUgdXBkYXRlZFxuICAgKiBAcGFyYW0ge1hSRGV2aWNlfSBkZXZpY2VcbiAgICovXG4gIF9vblBvc2VVcGRhdGUoZGV2aWNlKSB7XG4gICAgdGhpcy5faW52ZXJzZUJhc2VNYXRyaXggPSBkZXZpY2UuZ2V0QmFzZVZpZXdNYXRyaXgodGhpcy5fc3BlY2lhbFR5cGUpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFhSU2Vzc2lvbiBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7WFJEZXZpY2V9IGRldmljZVxuICAgKiBAcGFyYW0ge1hSU2Vzc2lvbk1vZGV9IG1vZGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkZXZpY2UsIG1vZGUsIGlkKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGxldCBpbW1lcnNpdmUgPSBtb2RlICE9ICdpbmxpbmUnO1xuXG4gICAgLy8gaW5saW5lVmVydGljYWxGaWVsZE9mVmlldyBtdXN0IGluaXRpYWxpemUgdG8gUEkvMiBmb3IgaW5saW5lIHNlc3Npb25zLlxuICAgIGxldCBpbml0aWFsUmVuZGVyU3RhdGUgPSBuZXcgWFJSZW5kZXJTdGF0ZSh7XG4gICAgICBpbmxpbmVWZXJ0aWNhbEZpZWxkT2ZWaWV3OiBpbW1lcnNpdmUgPyBudWxsIDogTWF0aC5QSSAqIDAuNVxuICAgIH0pO1xuXG4gICAgdGhpc1tQUklWQVRFXSA9IHtcbiAgICAgIGRldmljZSxcbiAgICAgIG1vZGUsXG4gICAgICBpbW1lcnNpdmUsXG4gICAgICBlbmRlZDogZmFsc2UsXG4gICAgICBzdXNwZW5kZWQ6IGZhbHNlLFxuICAgICAgZnJhbWVDYWxsYmFja3M6IFtdLFxuICAgICAgY3VycmVudEZyYW1lQ2FsbGJhY2tzOiBudWxsLFxuICAgICAgZnJhbWVIYW5kbGU6IDAsXG4gICAgICBkZXZpY2VGcmFtZUhhbmRsZTogbnVsbCxcbiAgICAgIGlkLFxuICAgICAgYWN0aXZlUmVuZGVyU3RhdGU6IGluaXRpYWxSZW5kZXJTdGF0ZSxcbiAgICAgIHBlbmRpbmdSZW5kZXJTdGF0ZTogbnVsbCxcbiAgICAgIHZpZXdlclNwYWNlOiBuZXcgWFJSZWZlcmVuY2VTcGFjZShcInZpZXdlclwiKSxcbiAgICAgIHZpZXdTcGFjZXM6IFtdLFxuICAgICAgY3VycmVudElucHV0U291cmNlczogW11cbiAgICB9O1xuXG4gICAgaWYgKGltbWVyc2l2ZSkge1xuICAgICAgdGhpc1tQUklWQVRFXS52aWV3U3BhY2VzLnB1c2gobmV3IFhSVmlld1NwYWNlKCdsZWZ0JyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgWFJWaWV3U3BhY2UoJ3JpZ2h0JykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzW1BSSVZBVEVdLnZpZXdTcGFjZXMucHVzaChuZXcgWFJWaWV3U3BhY2UoJ25vbmUnKSk7XG4gICAgfVxuXG4gICAgLy8gU2luZ2xlIGhhbmRsZXIgZm9yIGFuaW1hdGlvbiBmcmFtZXMgZnJvbSB0aGUgZGV2aWNlLiBUaGUgc3BlYyBzYXlzIHRoaXMgbXVzdFxuICAgIC8vIHJ1biBvbiBldmVyeSBjYW5kaWRhdGUgZnJhbWUgZXZlbiBpZiB0aGVyZSBhcmUgbm8gY2FsbGJhY2tzIHF1ZXVlZCB1cC5cbiAgICB0aGlzW1BSSVZBVEVdLm9uRGV2aWNlRnJhbWUgPSAoKSA9PiB7XG4gICAgICBpZiAodGhpc1tQUklWQVRFXS5lbmRlZCB8fCB0aGlzW1BSSVZBVEVdLnN1c3BlbmRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFF1ZXVlIG5leHQgZnJhbWVcbiAgICAgIHRoaXNbUFJJVkFURV0uZGV2aWNlRnJhbWVIYW5kbGUgPSBudWxsO1xuICAgICAgdGhpc1tQUklWQVRFXS5zdGFydERldmljZUZyYW1lTG9vcCgpO1xuXG4gICAgICAvLyAtIElmIHNlc3Npb27igJlzIHBlbmRpbmcgcmVuZGVyIHN0YXRlIGlzIG5vdCBudWxsLCBhcHBseSB0aGUgcGVuZGluZyByZW5kZXIgc3RhdGUuXG4gICAgICBpZiAodGhpc1tQUklWQVRFXS5wZW5kaW5nUmVuZGVyU3RhdGUgIT09IG51bGwpIHtcbiAgICAgICAgLy8gQXBwbHkgcGVuZGluZyByZW5kZXIgc3RhdGUuXG4gICAgICAgIHRoaXNbUFJJVkFURV0uYWN0aXZlUmVuZGVyU3RhdGUgPSBuZXcgWFJSZW5kZXJTdGF0ZSh0aGlzW1BSSVZBVEVdLnBlbmRpbmdSZW5kZXJTdGF0ZSk7XG4gICAgICAgIHRoaXNbUFJJVkFURV0ucGVuZGluZ1JlbmRlclN0YXRlID0gbnVsbDtcblxuICAgICAgICAvLyBSZXBvcnQgdG8gdGhlIGRldmljZSBzaW5jZSBpdCdsbCBuZWVkIHRvIGhhbmRsZSB0aGUgbGF5ZXIgZm9yIHJlbmRlcmluZy5cbiAgICAgICAgaWYgKHRoaXNbUFJJVkFURV0uYWN0aXZlUmVuZGVyU3RhdGUuYmFzZUxheWVyKSB7XG4gICAgICAgICAgdGhpc1tQUklWQVRFXS5kZXZpY2Uub25CYXNlTGF5ZXJTZXQoXG4gICAgICAgICAgICB0aGlzW1BSSVZBVEVdLmlkLFxuICAgICAgICAgICAgdGhpc1tQUklWQVRFXS5hY3RpdmVSZW5kZXJTdGF0ZS5iYXNlTGF5ZXIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIC0gSWYgc2Vzc2lvbuKAmXMgcmVuZGVyU3RhdGUncyBiYXNlTGF5ZXIgaXMgbnVsbCwgYWJvcnQgdGhlc2Ugc3RlcHMuXG4gICAgICBpZiAodGhpc1tQUklWQVRFXS5hY3RpdmVSZW5kZXJTdGF0ZS5iYXNlTGF5ZXIgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyAtIElmIHNlc3Npb27igJlzIG1vZGUgaXMgXCJpbmxpbmVcIiBhbmQgc2Vzc2lvbuKAmXMgcmVuZGVyU3RhdGUncyBvdXRwdXQgY2FudmFzIGlzIG51bGwsXG4gICAgICAvLyAgIGFib3J0IHRoZXNlIHN0ZXBzLlxuICAgICAgLy8gPz8/XG5cbiAgICAgIGNvbnN0IGZyYW1lID0gbmV3IFhSRnJhbWUoZGV2aWNlLCB0aGlzLCB0aGlzW1BSSVZBVEVdLmlkKTtcblxuICAgICAgLy8gLSBMZXQgY2FsbGJhY2tzIGJlIGEgbGlzdCBvZiB0aGUgZW50cmllcyBpbiBzZXNzaW9u4oCZcyBsaXN0IG9mIGFuaW1hdGlvbiBmcmFtZVxuICAgICAgLy8gICBjYWxsYmFjaywgaW4gdGhlIG9yZGVyIGluIHdoaWNoIHRoZXkgd2VyZSBhZGRlZCB0byB0aGUgbGlzdC5cbiAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXNbUFJJVkFURV0uY3VycmVudEZyYW1lQ2FsbGJhY2tzID0gdGhpc1tQUklWQVRFXS5mcmFtZUNhbGxiYWNrcztcblxuICAgICAgLy8gLSBTZXQgc2Vzc2lvbuKAmXMgbGlzdCBvZiBhbmltYXRpb24gZnJhbWUgY2FsbGJhY2tzIHRvIHRoZSBlbXB0eSBsaXN0LlxuICAgICAgdGhpc1tQUklWQVRFXS5mcmFtZUNhbGxiYWNrcyA9IFtdO1xuXG4gICAgICAvLyAtIFNldCBmcmFtZeKAmXMgYWN0aXZlIGJvb2xlYW4gdG8gdHJ1ZS5cbiAgICAgIGZyYW1lW1hSRlJBTUVfUFJJVkFURV0uYWN0aXZlID0gdHJ1ZTtcblxuICAgICAgLy8gLSBTZXQgZnJhbWXigJlzIGFuaW1hdGlvbkZyYW1lIGJvb2xlYW4gdG8gdHJ1ZS5cbiAgICAgIGZyYW1lW1hSRlJBTUVfUFJJVkFURV0uYW5pbWF0aW9uRnJhbWUgPSB0cnVlO1xuXG4gICAgICB0aGlzW1BSSVZBVEVdLmRldmljZS5vbkZyYW1lU3RhcnQodGhpc1tQUklWQVRFXS5pZCwgdGhpc1tQUklWQVRFXS5hY3RpdmVSZW5kZXJTdGF0ZSk7XG4gICAgICAvLyBpbnB1dFNvdXJjZXMgY2FuIGJlIHBvcHVsYXRlZCBpbiAub25GcmFtZVN0YXJ0KClcbiAgICAgIC8vIHNvIGNoZWNrIHRoZSBjaGFuZ2UgYW5kIGZpcmUgaW5wdXRzb3VyY2VzY2hhbmdlIGV2ZW50IGlmIG5lZWRlZFxuICAgICAgdGhpcy5fY2hlY2tJbnB1dFNvdXJjZXNDaGFuZ2UoKTtcblxuICAgICAgLy8gLSBGb3IgZWFjaCBlbnRyeSBpbiBjYWxsYmFja3MsIGluIG9yZGVyOlxuICAgICAgLy8gICAtIElmIHRoZSBlbnRyeeKAmXMgY2FuY2VsbGVkIGJvb2xlYW4gaXMgdHJ1ZSwgY29udGludWUgdG8gdGhlIG5leHQgZW50cnkuXG4gICAgICAvLyAgIC0gSW52b2tlIHRoZSBXZWIgSURMIGNhbGxiYWNrIGZ1bmN0aW9uLCBwYXNzaW5nIG5vdyBhbmQgZnJhbWUgYXMgdGhlIGFyZ3VtZW50c1xuICAgICAgLy8gICAtIElmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24sIHJlcG9ydCB0aGUgZXhjZXB0aW9uLlxuICAgICAgY29uc3QgcmlnaHROb3cgPSBwZXJmb3JtYW5jZS5ub3coKSAvLyBEYXRlLm5vdygpOyAvL3Nob3VsZCB3ZSBnZXQgdGhpcyBmcm9tIGFyZ3VtZW50cz9cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCFjYWxsYmFja3NbaV0uY2FuY2VsbGVkICYmIHR5cGVvZiBjYWxsYmFja3NbaV0uY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrc1tpXS5jYWxsYmFjayhyaWdodE5vdywgZnJhbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXNbUFJJVkFURV0uY3VycmVudEZyYW1lQ2FsbGJhY2tzID0gbnVsbDtcblxuICAgICAgLy8gLSBTZXQgZnJhbWXigJlzIGFjdGl2ZSBib29sZWFuIHRvIGZhbHNlLlxuICAgICAgZnJhbWVbWFJGUkFNRV9QUklWQVRFXS5hY3RpdmUgPSBmYWxzZTtcblxuICAgICAgdGhpc1tQUklWQVRFXS5kZXZpY2Uub25GcmFtZUVuZCh0aGlzW1BSSVZBVEVdLmlkKTtcbiAgICB9O1xuXG4gICAgdGhpc1tQUklWQVRFXS5zdGFydERldmljZUZyYW1lTG9vcCA9ICgpID0+IHtcbiAgICAgIGlmICh0aGlzW1BSSVZBVEVdLmRldmljZUZyYW1lSGFuZGxlID09PSBudWxsKSB7XG4gICAgICAgIHRoaXNbUFJJVkFURV0uZGV2aWNlRnJhbWVIYW5kbGUgPSB0aGlzW1BSSVZBVEVdLmRldmljZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoXG4gICAgICAgICAgdGhpc1tQUklWQVRFXS5vbkRldmljZUZyYW1lXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXNbUFJJVkFURV0uc3RvcERldmljZUZyYW1lTG9vcCA9ICgpID0+IHtcbiAgICAgIGNvbnN0IGhhbmRsZSA9IHRoaXNbUFJJVkFURV0uZGV2aWNlRnJhbWVIYW5kbGU7XG4gICAgICBpZiAoaGFuZGxlICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXNbUFJJVkFURV0uZGV2aWNlLmNhbmNlbEFuaW1hdGlvbkZyYW1lKGhhbmRsZSk7XG4gICAgICAgIHRoaXNbUFJJVkFURV0uZGV2aWNlRnJhbWVIYW5kbGUgPSBudWxsO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBIb29rIGludG8gdGhlIFhSRGlzcGxheSdzIGB2ci1wcmVzZW50LWVuZGAgZXZlbnQgc28gd2UgY2FuXG4gICAgLy8gd3JhcCB1cCB0aGluZ3MgaGVyZSBpZiB3ZSdyZSBjdXQgb2ZmIGZyb20gdGhlIHVuZGVybHlpbmdcbiAgICAvLyBwb2x5ZmlsbGVkIGRldmljZSBvciBleHBsaWNpdGx5IGVuZGVkIHZpYSBgc2Vzc2lvbi5lbmQoKWAgZm9yIHRoaXNcbiAgICAvLyBzZXNzaW9uLlxuICAgIHRoaXNbUFJJVkFURV0ub25QcmVzZW50YXRpb25FbmQgPSBzZXNzaW9uSWQgPT4ge1xuICAgICAgLy8gSWYgdGhpcyBzZXNzaW9uIHdhcyBzdXNwZW5kZWQsIHJlc3VtZSBpdCBub3cgdGhhdCBhbiBpbW1lcnNpdmVcbiAgICAgIC8vIHNlc3Npb24gaGFzIGVuZGVkLlxuICAgICAgaWYgKHNlc3Npb25JZCAhPT0gdGhpc1tQUklWQVRFXS5pZCkge1xuICAgICAgICB0aGlzW1BSSVZBVEVdLnN1c3BlbmRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzW1BSSVZBVEVdLnN0YXJ0RGV2aWNlRnJhbWVMb29wKCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCgnZm9jdXMnLCB7IHNlc3Npb246IHRoaXMgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gT3RoZXJ3aXNlLCB0aGlzIGlzIHRoZSBpbW1lcnNpdmUgc2Vzc2lvbiB0aGF0IGhhcyBlbmRlZC5cbiAgICAgIC8vIFNldCBgZW5kZWRgIHRvIHRydWUgc28gd2UgY2FuIGRpc2FibGUgYWxsIGZ1bmN0aW9uYWxpdHlcbiAgICAgIC8vIGluIHRoaXMgWFJTZXNzaW9uXG4gICAgICB0aGlzW1BSSVZBVEVdLmVuZGVkID0gdHJ1ZTtcbiAgICAgIHRoaXNbUFJJVkFURV0uc3RvcERldmljZUZyYW1lTG9vcCgpO1xuICAgICAgZGV2aWNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ0BAd2VieHItcG9seWZpbGwvdnItcHJlc2VudC1lbmQnLCB0aGlzW1BSSVZBVEVdLm9uUHJlc2VudGF0aW9uRW5kKTtcbiAgICAgIGRldmljZS5yZW1vdmVFdmVudExpc3RlbmVyKCdAQHdlYnhyLXBvbHlmaWxsL3ZyLXByZXNlbnQtc3RhcnQnLCB0aGlzW1BSSVZBVEVdLm9uUHJlc2VudGF0aW9uU3RhcnQpO1xuICAgICAgZGV2aWNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ0BAd2VieHItcG9seWZpbGwvaW5wdXQtc2VsZWN0LXN0YXJ0JywgdGhpc1tQUklWQVRFXS5vblNlbGVjdFN0YXJ0KTtcbiAgICAgIGRldmljZS5yZW1vdmVFdmVudExpc3RlbmVyKCdAQHdlYnhyLXBvbHlmaWxsL2lucHV0LXNlbGVjdC1lbmQnLCB0aGlzW1BSSVZBVEVdLm9uU2VsZWN0RW5kKTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCgnZW5kJywgbmV3IFhSU2Vzc2lvbkV2ZW50KCdlbmQnLCB7IHNlc3Npb246IHRoaXMgfSkpO1xuICAgIH07XG4gICAgZGV2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ0BAd2VieHItcG9seWZpbGwvdnItcHJlc2VudC1lbmQnLCB0aGlzW1BSSVZBVEVdLm9uUHJlc2VudGF0aW9uRW5kKTtcblxuICAgIC8vIEhvb2sgaW50byB0aGUgWFJEaXNwbGF5J3MgYHZyLXByZXNlbnQtc3RhcnRgIGV2ZW50IHNvIHdlIGNhblxuICAgIC8vIHN1c3BlbmQgaWYgYW5vdGhlciBzZXNzaW9uIGhhcyBiZWd1biBpbW1lcnNpdmUgcHJlc2VudGF0aW9uLlxuICAgIHRoaXNbUFJJVkFURV0ub25QcmVzZW50YXRpb25TdGFydCA9IHNlc3Npb25JZCA9PiB7XG4gICAgICAvLyBJZ25vcmUgaWYgdGhpcyBpcyB0aGUgc2Vzc2lvbiB0aGF0IGhhcyBiZWd1biBpbW1lcnNpdmUgcHJlc2VudGluZ1xuICAgICAgaWYgKHNlc3Npb25JZCA9PT0gdGhpc1tQUklWQVRFXS5pZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXNbUFJJVkFURV0uc3VzcGVuZGVkID0gdHJ1ZTtcbiAgICAgIHRoaXNbUFJJVkFURV0uc3RvcERldmljZUZyYW1lTG9vcCgpO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdibHVyJywgeyBzZXNzaW9uOiB0aGlzIH0pO1xuICAgIH07XG4gICAgZGV2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ0BAd2VieHItcG9seWZpbGwvdnItcHJlc2VudC1zdGFydCcsIHRoaXNbUFJJVkFURV0ub25QcmVzZW50YXRpb25TdGFydCk7XG5cbiAgICB0aGlzW1BSSVZBVEVdLm9uU2VsZWN0U3RhcnQgPSBldnQgPT4ge1xuICAgICAgLy8gSWdub3JlIGlmIHRoaXMgZXZlbnQgaXMgbm90IGZvciB0aGlzIHNlc3Npb24uXG4gICAgICBpZiAoZXZ0LnNlc3Npb25JZCAhPT0gdGhpc1tQUklWQVRFXS5pZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXNbUFJJVkFURV0uZGlzcGF0Y2hJbnB1dFNvdXJjZUV2ZW50KCdzZWxlY3RzdGFydCcsICBldnQuaW5wdXRTb3VyY2UpO1xuICAgIH07XG4gICAgZGV2aWNlLmFkZEV2ZW50TGlzdGVuZXIoJ0BAd2VieHItcG9seWZpbGwvaW5wdXQtc2VsZWN0LXN0YXJ0JywgdGhpc1tQUklWQVRFXS5vblNlbGVjdFN0YXJ0KTtcblxuICAgIHRoaXNbUFJJVkFURV0ub25TZWxlY3RFbmQgPSBldnQgPT4ge1xuICAgICAgLy8gSWdub3JlIGlmIHRoaXMgZXZlbnQgaXMgbm90IGZvciB0aGlzIHNlc3Npb24uXG4gICAgICBpZiAoZXZ0LnNlc3Npb25JZCAhPT0gdGhpc1tQUklWQVRFXS5pZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXNbUFJJVkFURV0uZGlzcGF0Y2hJbnB1dFNvdXJjZUV2ZW50KCdzZWxlY3RlbmQnLCAgZXZ0LmlucHV0U291cmNlKTtcblxuICAgICAgLy8gU2FkbHksIHRoZXJlJ3Mgbm8gd2F5IHRvIG1ha2UgdGhpcyBhIHVzZXIgZ2VzdHVyZS5cbiAgICAgIHRoaXNbUFJJVkFURV0uZGlzcGF0Y2hJbnB1dFNvdXJjZUV2ZW50KCdzZWxlY3QnLCAgZXZ0LmlucHV0U291cmNlKTtcbiAgICB9O1xuICAgIGRldmljZS5hZGRFdmVudExpc3RlbmVyKCdAQHdlYnhyLXBvbHlmaWxsL2lucHV0LXNlbGVjdC1lbmQnLCB0aGlzW1BSSVZBVEVdLm9uU2VsZWN0RW5kKTtcblxuICAgIHRoaXNbUFJJVkFURV0ub25TcXVlZXplU3RhcnQgPSBldnQgPT4ge1xuICAgICAgLy8gSWdub3JlIGlmIHRoaXMgZXZlbnQgaXMgbm90IGZvciB0aGlzIHNlc3Npb24uXG4gICAgICBpZiAoZXZ0LnNlc3Npb25JZCAhPT0gdGhpc1tQUklWQVRFXS5pZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXNbUFJJVkFURV0uZGlzcGF0Y2hJbnB1dFNvdXJjZUV2ZW50KCdzcXVlZXplc3RhcnQnLCAgZXZ0LmlucHV0U291cmNlKTtcbiAgICB9O1xuICAgIGRldmljZS5hZGRFdmVudExpc3RlbmVyKCdAQHdlYnhyLXBvbHlmaWxsL2lucHV0LXNxdWVlemUtc3RhcnQnLCB0aGlzW1BSSVZBVEVdLm9uU3F1ZWV6ZVN0YXJ0KTtcblxuICAgIHRoaXNbUFJJVkFURV0ub25TcXVlZXplRW5kID0gZXZ0ID0+IHtcbiAgICAgIC8vIElnbm9yZSBpZiB0aGlzIGV2ZW50IGlzIG5vdCBmb3IgdGhpcyBzZXNzaW9uLlxuICAgICAgaWYgKGV2dC5zZXNzaW9uSWQgIT09IHRoaXNbUFJJVkFURV0uaWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzW1BSSVZBVEVdLmRpc3BhdGNoSW5wdXRTb3VyY2VFdmVudCgnc3F1ZWV6ZWVuZCcsICBldnQuaW5wdXRTb3VyY2UpO1xuXG4gICAgICAvLyBGb2xsb3dpbmcgdGhlIHNhbWUgd2F5IGFzIHNlbGVjdCBldmVudFxuICAgICAgdGhpc1tQUklWQVRFXS5kaXNwYXRjaElucHV0U291cmNlRXZlbnQoJ3NxdWVlemUnLCAgZXZ0LmlucHV0U291cmNlKTtcbiAgICB9O1xuICAgIGRldmljZS5hZGRFdmVudExpc3RlbmVyKCdAQHdlYnhyLXBvbHlmaWxsL2lucHV0LXNxdWVlemUtZW5kJywgdGhpc1tQUklWQVRFXS5vblNxdWVlemVFbmQpO1xuXG4gICAgdGhpc1tQUklWQVRFXS5kaXNwYXRjaElucHV0U291cmNlRXZlbnQgPSAodHlwZSwgaW5wdXRTb3VyY2UpID0+IHtcbiAgICAgIGNvbnN0IGZyYW1lID0gbmV3IFhSRnJhbWUoZGV2aWNlLCB0aGlzLCB0aGlzW1BSSVZBVEVdLmlkKTtcbiAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IFhSSW5wdXRTb3VyY2VFdmVudCh0eXBlLCB7IGZyYW1lLCBpbnB1dFNvdXJjZSB9KTtcbiAgICAgIGZyYW1lW1hSRlJBTUVfUFJJVkFURV0uYWN0aXZlID0gdHJ1ZTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0eXBlLCBldmVudCk7XG4gICAgICBmcmFtZVtYUkZSQU1FX1BSSVZBVEVdLmFjdGl2ZSA9IGZhbHNlO1xuICAgIH07XG5cbiAgICAvLyBTdGFydCB0aGUgZnJhbWUgbG9vcFxuICAgIHRoaXNbUFJJVkFURV0uc3RhcnREZXZpY2VGcmFtZUxvb3AoKTtcblxuICAgIHRoaXMub25ibHVyID0gdW5kZWZpbmVkO1xuICAgIHRoaXMub25mb2N1cyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm9ucmVzZXRwb3NlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMub25lbmQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5vbnNlbGVjdCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm9uc2VsZWN0c3RhcnQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5vbnNlbGVjdGVuZCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtYUlJlbmRlclN0YXRlfVxuICAgKi9cbiAgZ2V0IHJlbmRlclN0YXRlKCkgeyByZXR1cm4gdGhpc1tQUklWQVRFXS5hY3RpdmVSZW5kZXJTdGF0ZTsgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtYUkVudmlyb25tZW50QmxlbmRNb2RlfVxuICAgKi9cbiAgZ2V0IGVudmlyb25tZW50QmxlbmRNb2RlKCkge1xuICAgIHJldHVybiB0aGlzW1BSSVZBVEVdLmRldmljZS5lbnZpcm9ubWVudEJsZW5kTW9kZSB8fCAnb3BhcXVlJztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICAgKiBAcmV0dXJuIHtYUlJlZmVyZW5jZVNwYWNlfVxuICAgKi9cbiAgYXN5bmMgcmVxdWVzdFJlZmVyZW5jZVNwYWNlKHR5cGUpIHtcbiAgICBpZiAodGhpc1tQUklWQVRFXS5lbmRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghWFJSZWZlcmVuY2VTcGFjZVR5cGVzLmluY2x1ZGVzKHR5cGUpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBYUlJlZmVyZW5jZVNwYWNlVHlwZSBtdXN0IGJlIG9uZSBvZiAke1hSUmVmZXJlbmNlU3BhY2VUeXBlc31gKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXNbUFJJVkFURV0uZGV2aWNlLmRvZXNTZXNzaW9uU3VwcG9ydFJlZmVyZW5jZVNwYWNlKHRoaXNbUFJJVkFURV0uaWQsIHR5cGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKGBUaGUgJHt0eXBlfSByZWZlcmVuY2Ugc3BhY2UgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIHNlc3Npb24uYCwgJ05vdFN1cHBvcnRlZEVycm9yJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGUgPT09ICd2aWV3ZXInKSB7XG4gICAgICByZXR1cm4gdGhpc1tQUklWQVRFXS52aWV3ZXJTcGFjZTtcbiAgICB9XG5cbiAgICAvLyBSZXF1ZXN0IGEgdHJhbnNmb3JtIGZyb20gdGhlIGRldmljZSBnaXZlbiB0aGUgdmFsdWVzLiBJZiByZXR1cm5pbmcgYVxuICAgIC8vIHRyYW5zZm9ybSAocHJvYmFibHkgXCJsb2NhbC1mbG9vclwiIG9yIFwiYm91bmRlZC1mbG9vclwiKSwgdXNlIGl0LCBhbmQgaWZcbiAgICAvLyB1bmRlZmluZWQsIFhSUmVmZXJlbmNlU3BhY2Ugd2lsbCB1c2UgYSBkZWZhdWx0IHRyYW5zZm9ybS4gVGhpcyBjYWxsIGNhblxuICAgIC8vIHRocm93LCByZWplY3RpbmcgdGhlIHByb21pc2UsIGluZGljYXRpbmcgdGhlIGRldmljZSBkb2VzIG5vdCBzdXBwb3J0IHRoYXRcbiAgICAvLyBmcmFtZSBvZiByZWZlcmVuY2UuXG4gICAgbGV0IHRyYW5zZm9ybSA9IGF3YWl0IHRoaXNbUFJJVkFURV0uZGV2aWNlLnJlcXVlc3RGcmFtZU9mUmVmZXJlbmNlVHJhbnNmb3JtKHR5cGUpO1xuXG4gICAgLy8gVE9ETzogJ2JvdW5kZWQtZmxvb3InIGlzIG9ubHkgYmxvY2tlZCBiZWNhdXNlIHdlIGN1cnJlbnRseSBkb24ndCByZXBvcnRcbiAgICAvLyB0aGUgYm91bmRzIGdlb21ldHJ5IGNvcnJlY3RseS5cbiAgICBpZiAodHlwZSA9PT0gJ2JvdW5kZWQtZmxvb3InKSB7XG4gICAgICBpZiAoIXRyYW5zZm9ybSkge1xuICAgICAgICAvLyAnYm91bmRlZC1mbG9vcicgc3BhY2VzIG11c3QgaGF2ZSBhIHRyYW5zZm9ybSBzdXBwbGllZCBieSB0aGUgZGV2aWNlLlxuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKGAke3R5cGV9IFhSUmVmZXJlbmNlU3BhY2Ugbm90IHN1cHBvcnRlZCBieSB0aGlzIGRldmljZS5gLCAnTm90U3VwcG9ydGVkRXJyb3InKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbGV0IGJvdW5kcyA9IHRoaXNbUFJJVkFURV0uZGV2aWNlLnJlcXVlc3RTdGFnZUJvdW5kcygpO1xuICAgICAgaWYgKCFib3VuZHMpIHtcbiAgICAgICAgLy8gJ2JvdW5kZWQtZmxvb3InIHNwYWNlcyBtdXN0IGhhdmUgYm91bmRzIGdlb21ldHJ5LlxuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKGAke3R5cGV9IFhSUmVmZXJlbmNlU3BhY2Ugbm90IHN1cHBvcnRlZCBieSB0aGlzIGRldmljZS5gLCAnTm90U3VwcG9ydGVkRXJyb3InKTtcbiAgICAgICAgXG4gICAgICB9XG4gICAgICAvLyBUT0RPOiBDcmVhdGUgYW4gWFJCb3VuZGVkUmVmZXJlbmNlU3BhY2Ugd2l0aCB0aGUgY29ycmVjdCBib3VuZGFyaWVzLlxuICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihgVGhlIFdlYlhSIHBvbHlmaWxsIGRvZXMgbm90IHN1cHBvcnQgdGhlICR7dHlwZX0gcmVmZXJlbmNlIHNwYWNlIHlldC5gLCAnTm90U3VwcG9ydGVkRXJyb3InKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFhSUmVmZXJlbmNlU3BhY2UodHlwZSwgdHJhbnNmb3JtKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spIHtcbiAgICBpZiAodGhpc1tQUklWQVRFXS5lbmRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEFkZCBjYWxsYmFjayB0byB0aGUgcXVldWUgYW5kIHJldHVybiBpdHMgaGFuZGxlXG4gICAgY29uc3QgaGFuZGxlID0gKyt0aGlzW1BSSVZBVEVdLmZyYW1lSGFuZGxlO1xuICAgIHRoaXNbUFJJVkFURV0uZnJhbWVDYWxsYmFja3MucHVzaCh7XG4gICAgICBoYW5kbGUsXG4gICAgICBjYWxsYmFjayxcbiAgICAgIGNhbmNlbGxlZDogZmFsc2VcbiAgICB9KTtcbiAgICByZXR1cm4gaGFuZGxlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGVcbiAgICovXG4gIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGhhbmRsZSkge1xuICAgIC8vIFJlbW92ZSB0aGUgY2FsbGJhY2sgd2l0aCB0aGF0IGhhbmRsZSBmcm9tIHRoZSBxdWV1ZVxuICAgIGxldCBjYWxsYmFja3MgPSB0aGlzW1BSSVZBVEVdLmZyYW1lQ2FsbGJhY2tzO1xuICAgIGxldCBpbmRleCA9IGNhbGxiYWNrcy5maW5kSW5kZXgoZCA9PiBkICYmIGQuaGFuZGxlID09PSBoYW5kbGUpO1xuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICBjYWxsYmFja3NbaW5kZXhdLmNhbmNlbGxlZCA9IHRydWU7XG4gICAgICBjYWxsYmFja3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gICAgLy8gSWYgY2FuY2VsQW5pbWF0aW9uRnJhbWUgaXMgY2FsbGVkIGZyb20gd2l0aGluIGEgZnJhbWUgY2FsbGJhY2ssIGFsc28gY2hlY2tcbiAgICAvLyB0aGUgcmVtYWluaW5nIGNhbGxiYWNrcyBmb3IgdGhlIGN1cnJlbnQgZnJhbWU6XG4gICAgY2FsbGJhY2tzID0gdGhpc1tQUklWQVRFXS5jdXJyZW50RnJhbWVDYWxsYmFja3M7XG4gICAgaWYgKGNhbGxiYWNrcykge1xuICAgICAgaW5kZXggPSBjYWxsYmFja3MuZmluZEluZGV4KGQgPT4gZCAmJiBkLmhhbmRsZSA9PT0gaGFuZGxlKTtcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIGNhbGxiYWNrc1tpbmRleF0uY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gUmVseSBvbiBjYW5jZWxsZWQgZmxhZyBvbmx5OyBkb24ndCBtdXRhdGUgdGhpcyBhcnJheSB3aGlsZSBpdCdzIGJlaW5nIGl0ZXJhdGVkXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0FycmF5PFhSSW5wdXRTb3VyY2U+fSBpbnB1dCBzb3VyY2VzXG4gICAqL1xuICBnZXQgaW5wdXRTb3VyY2VzKCkge1xuICAgIHJldHVybiB0aGlzW1BSSVZBVEVdLmRldmljZS5nZXRJbnB1dFNvdXJjZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fVxuICAgKi9cbiAgYXN5bmMgZW5kKCkge1xuICAgIGlmICh0aGlzW1BSSVZBVEVdLmVuZGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgdGhpcyBpcyBhbiBpbW1lcnNpdmUgc2Vzc2lvbiwgdHJpZ2dlciB0aGUgcGxhdGZvcm0gdG8gZW5kLCB3aGljaFxuICAgIC8vIHdpbGwgY2FsbCB0aGUgYG9uUHJlc2VudGF0aW9uRW5kYCBoYW5kbGVyLCB3cmFwcGluZyB0aGlzIHVwLlxuICAgIGlmICh0aGlzW1BSSVZBVEVdLmltbWVyc2l2ZSkge1xuICAgICAgdGhpc1tQUklWQVRFXS5lbmRlZCA9IHRydWU7XG4gICAgICB0aGlzW1BSSVZBVEVdLmRldmljZS5yZW1vdmVFdmVudExpc3RlbmVyKCdAQHdlYnhyLXBvbHlmaWxsL3ZyLXByZXNlbnQtc3RhcnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbUFJJVkFURV0ub25QcmVzZW50YXRpb25TdGFydCk7XG4gICAgICB0aGlzW1BSSVZBVEVdLmRldmljZS5yZW1vdmVFdmVudExpc3RlbmVyKCdAQHdlYnhyLXBvbHlmaWxsL3ZyLXByZXNlbnQtZW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW1BSSVZBVEVdLm9uUHJlc2VudGF0aW9uRW5kKTtcbiAgICAgIHRoaXNbUFJJVkFURV0uZGV2aWNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ0BAd2VieHItcG9seWZpbGwvaW5wdXQtc2VsZWN0LXN0YXJ0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW1BSSVZBVEVdLm9uU2VsZWN0U3RhcnQpO1xuICAgICAgdGhpc1tQUklWQVRFXS5kZXZpY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcignQEB3ZWJ4ci1wb2x5ZmlsbC9pbnB1dC1zZWxlY3QtZW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW1BSSVZBVEVdLm9uU2VsZWN0RW5kKTtcblxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdlbmQnLCBuZXcgWFJTZXNzaW9uRXZlbnQoJ2VuZCcsIHsgc2Vzc2lvbjogdGhpcyB9KSk7XG4gICAgfVxuXG4gICAgdGhpc1tQUklWQVRFXS5zdG9wRGV2aWNlRnJhbWVMb29wKCk7XG4gICAgcmV0dXJuIHRoaXNbUFJJVkFURV0uZGV2aWNlLmVuZFNlc3Npb24odGhpc1tQUklWQVRFXS5pZCk7XG4gIH1cblxuICAvKipcbiAgICogUXVldWVzIGFuIHVwZGF0ZSB0byB0aGUgYWN0aXZlIHJlbmRlciBzdGF0ZSB0byBiZSBhcHBsaWVkIG9uIHRoZSBuZXh0XG4gICAqIGZyYW1lLiBVbnNldCBmaWVsZHMgb2YgbmV3U3RhdGUgd2lsbCBub3QgYmUgY2hhbmdlZC5cbiAgICogXG4gICAqIEBwYXJhbSB7WFJSZW5kZXJTdGF0ZUluaXQ/fSBuZXdTdGF0ZSBcbiAgICovXG4gIHVwZGF0ZVJlbmRlclN0YXRlKG5ld1N0YXRlKSB7XG4gICAgaWYgKHRoaXNbUFJJVkFURV0uZW5kZWQpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBcIkNhbid0IGNhbGwgdXBkYXRlUmVuZGVyU3RhdGUgb24gYW4gWFJTZXNzaW9uIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICBcInRoYXQgaGFzIGFscmVhZHkgZW5kZWQuXCI7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfVxuXG4gICAgaWYgKG5ld1N0YXRlLmJhc2VMYXllciAmJiAobmV3U3RhdGUuYmFzZUxheWVyLl9zZXNzaW9uICE9PSB0aGlzKSkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IFwiQ2FsbGVkIHVwZGF0ZVJlbmRlclN0YXRlIHdpdGggYSBiYXNlIGxheWVyIHRoYXQgd2FzIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICBcImNyZWF0ZWQgYnkgYSBkaWZmZXJlbnQgc2Vzc2lvbi5cIjtcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG5cbiAgICBjb25zdCBmb3ZTZXQgPSAobmV3U3RhdGUuaW5saW5lVmVydGljYWxGaWVsZE9mVmlldyAhPT0gbnVsbCkgJiZcbiAgICAgICAgICAgICAgICAgICAobmV3U3RhdGUuaW5saW5lVmVydGljYWxGaWVsZE9mVmlldyAhPT0gdW5kZWZpbmVkKTtcblxuICAgIGlmIChmb3ZTZXQpIHtcbiAgICAgIGlmICh0aGlzW1BSSVZBVEVdLmltbWVyc2l2ZSkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gXCJpbmxpbmVWZXJ0aWNhbEZpZWxkT2ZWaWV3IG11c3Qgbm90IGJlIHNldCBmb3IgYW4gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJYUlJlbmRlclN0YXRlIHBhc3NlZCB0byB1cGRhdGVSZW5kZXJTdGF0ZSBmb3IgYW4gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJpbW1lcnNpdmUgc2Vzc2lvbi5cIjtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQ2xhbXAgdGhlIGlubGluZSBGb1YgdG8gYSBzYW5lIHJhbmdlLlxuICAgICAgICBuZXdTdGF0ZS5pbmxpbmVWZXJ0aWNhbEZpZWxkT2ZWaWV3ID0gTWF0aC5taW4oXG4gICAgICAgICAgMy4xMywgTWF0aC5tYXgoMC4wMSwgbmV3U3RhdGUuaW5saW5lVmVydGljYWxGaWVsZE9mVmlldykpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzW1BSSVZBVEVdLnBlbmRpbmdSZW5kZXJTdGF0ZSA9PT0gbnVsbCkge1xuICAgICAgY29uc3QgYWN0aXZlUmVuZGVyU3RhdGUgPSB0aGlzW1BSSVZBVEVdLmFjdGl2ZVJlbmRlclN0YXRlO1xuICAgICAgdGhpc1tQUklWQVRFXS5wZW5kaW5nUmVuZGVyU3RhdGUgPSB7XG4gICAgICAgIGRlcHRoTmVhcjogYWN0aXZlUmVuZGVyU3RhdGUuZGVwdGhOZWFyLFxuICAgICAgICBkZXB0aEZhcjogYWN0aXZlUmVuZGVyU3RhdGUuZGVwdGhGYXIsXG4gICAgICAgIGlubGluZVZlcnRpY2FsRmllbGRPZlZpZXc6IGFjdGl2ZVJlbmRlclN0YXRlLmlubGluZVZlcnRpY2FsRmllbGRPZlZpZXcsXG4gICAgICAgIGJhc2VMYXllcjogYWN0aXZlUmVuZGVyU3RhdGUuYmFzZUxheWVyXG4gICAgICB9O1xuICAgIH1cbiAgICBPYmplY3QuYXNzaWduKHRoaXNbUFJJVkFURV0ucGVuZGluZ1JlbmRlclN0YXRlLCBuZXdTdGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZXMgdGhlIGlucHV0U291cmNlcyB3aXRoIHRoZSBvbmVzIGluIHRoZSBwcmV2aW91cyBmcmFtZS5cbiAgICogRmlyZXMgaW1wdXRzb3VyY2VzY2hhbmdlIGV2ZW50IGlmIGFueSBhZGRlZCBvciByZW1vdmVkXG4gICAqIGlucHV0U291cmNlIGlzIGZvdW5kLlxuICAgKi9cbiAgX2NoZWNrSW5wdXRTb3VyY2VzQ2hhbmdlKCkge1xuICAgIGNvbnN0IGFkZGVkID0gW107XG4gICAgY29uc3QgcmVtb3ZlZCA9IFtdO1xuICAgIGNvbnN0IG5ld0lucHV0U291cmNlcyA9IHRoaXMuaW5wdXRTb3VyY2VzO1xuICAgIGNvbnN0IG9sZElucHV0U291cmNlcyA9IHRoaXNbUFJJVkFURV0uY3VycmVudElucHV0U291cmNlcztcblxuICAgIGZvciAoY29uc3QgbmV3SW5wdXRTb3VyY2Ugb2YgbmV3SW5wdXRTb3VyY2VzKSB7XG4gICAgICBpZiAoIW9sZElucHV0U291cmNlcy5pbmNsdWRlcyhuZXdJbnB1dFNvdXJjZSkpIHtcbiAgICAgICAgYWRkZWQucHVzaChuZXdJbnB1dFNvdXJjZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBvbGRJbnB1dFNvdXJjZSBvZiBvbGRJbnB1dFNvdXJjZXMpIHtcbiAgICAgIGlmICghbmV3SW5wdXRTb3VyY2VzLmluY2x1ZGVzKG9sZElucHV0U291cmNlKSkge1xuICAgICAgICByZW1vdmVkLnB1c2gob2xkSW5wdXRTb3VyY2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhZGRlZC5sZW5ndGggPiAwIHx8IHJlbW92ZWQubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdpbnB1dHNvdXJjZXNjaGFuZ2UnLCBuZXcgWFJJbnB1dFNvdXJjZXNDaGFuZ2VFdmVudCgnaW5wdXRzb3VyY2VzY2hhbmdlJywge1xuICAgICAgICBzZXNzaW9uOiB0aGlzLFxuICAgICAgICBhZGRlZDogYWRkZWQsXG4gICAgICAgIHJlbW92ZWQ6IHJlbW92ZWRcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICB0aGlzW1BSSVZBVEVdLmN1cnJlbnRJbnB1dFNvdXJjZXMubGVuZ3RoID0gMDtcbiAgICBmb3IgKGNvbnN0IG5ld0lucHV0U291cmNlIG9mIG5ld0lucHV0U291cmNlcykge1xuICAgICAgdGhpc1tQUklWQVRFXS5jdXJyZW50SW5wdXRTb3VyY2VzLnB1c2gobmV3SW5wdXRTb3VyY2UpO1xuICAgIH1cbiAgfVxufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IFhSU3BhY2UgZnJvbSAnLi9YUlNwYWNlJztcblxuZXhwb3J0IGNvbnN0IFBSSVZBVEUgPSBTeW1ib2woJ0BAd2VieHItcG9seWZpbGwvWFJJbnB1dFNvdXJjZScpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBYUklucHV0U291cmNlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7R2FtZXBhZFhSSW5wdXRTb3VyY2V9IGltcGwgXG4gICAqL1xuICBjb25zdHJ1Y3RvcihpbXBsKSB7XG4gICAgdGhpc1tQUklWQVRFXSA9IHtcbiAgICAgIGltcGwsXG4gICAgICBncmlwU3BhY2U6IG5ldyBYUlNwYWNlKFwiZ3JpcFwiLCB0aGlzKSxcbiAgICAgIHRhcmdldFJheVNwYWNlOiBuZXcgWFJTcGFjZShcInRhcmdldC1yYXlcIiwgdGhpcylcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1hSSGFuZGVkbmVzc31cbiAgICovXG4gIGdldCBoYW5kZWRuZXNzKCkgeyByZXR1cm4gdGhpc1tQUklWQVRFXS5pbXBsLmhhbmRlZG5lc3M7IH1cblxuICAvKipcbiAgICogQHJldHVybiB7WFJUYXJnZXRSYXlNb2RlfVxuICAgKi9cbiAgZ2V0IHRhcmdldFJheU1vZGUoKSB7IHJldHVybiB0aGlzW1BSSVZBVEVdLmltcGwudGFyZ2V0UmF5TW9kZTsgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtYUlNwYWNlfVxuICAgKi9cbiAgZ2V0IGdyaXBTcGFjZSgpIHtcbiAgICBsZXQgbW9kZSA9IHRoaXNbUFJJVkFURV0uaW1wbC50YXJnZXRSYXlNb2RlO1xuICAgIGlmIChtb2RlID09PSBcImdhemVcIiB8fCBtb2RlID09PSBcInNjcmVlblwiKSB7XG4gICAgICAvLyBncmlwIHNwYWNlIG11c3QgYmUgbnVsbCBmb3Igbm9uLXRyYWNrYWJsZSBpbnB1dCBzb3VyY2VzXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXNbUFJJVkFURV0uZ3JpcFNwYWNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1hSU3BhY2V9XG4gICAqL1xuICBnZXQgdGFyZ2V0UmF5U3BhY2UoKSB7IHJldHVybiB0aGlzW1BSSVZBVEVdLnRhcmdldFJheVNwYWNlOyB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0FycmF5PFN0cmluZz59XG4gICAqL1xuICBnZXQgcHJvZmlsZXMoKSB7IHJldHVybiB0aGlzW1BSSVZBVEVdLmltcGwucHJvZmlsZXM7IH1cblxuICAvKipcbiAgICogQHJldHVybiB7R2FtZXBhZH1cbiAgICovXG4gIGdldCBnYW1lcGFkKCkgeyByZXR1cm4gdGhpc1tQUklWQVRFXS5pbXBsLmdhbWVwYWQ7IH1cbn1cbiIsIi8qXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBUb2tlbiBmb3Igc3RvcmluZyB3aGV0aGVyIG9yIG5vdCBhIFdlYkdMUmVuZGVyaW5nQ29udGV4dCBoYXNcclxuICogYSBwb2x5ZmlsbCBmb3IgYHhyQ29tcGF0aWJsZWAvYG1ha2VYUkNvbXBhdGlibGUoKWBcclxuICovXHJcbmV4cG9ydCBjb25zdCBQT0xZRklMTEVEX1hSX0NPTVBBVElCTEUgPSBTeW1ib2woJ0BAd2VieHItcG9seWZpbGwvcG9seWZpbGxlZC14ci1jb21wYXRpYmxlJyk7XHJcblxyXG4vKipcclxuICogVG9rZW4gZm9yIHN0b3JpbmcgdGhlIFhSIGNvbXBhdGlibGUgYm9vbGVhbiBzZXQgb24gYSBXZWJHTFJlbmRlcmluZ0NvbnRleHRcclxuICogdmlhIGBnbC5tYWtlWFJDb21wYXRpYmxlKClgIG9yIHZpYSBjcmVhdGlvblxyXG4gKiBwYXJhbWV0ZXJzIGxpa2UgYGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcsIHsgeHJDb21wYXRpYmxlIH0pYFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFhSX0NPTVBBVElCTEUgPSBTeW1ib2woJ0BAd2VieHItcG9seWZpbGwveHItY29tcGF0aWJsZScpO1xyXG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgWFJTZXNzaW9uLCB7IFBSSVZBVEUgYXMgU0VTU0lPTl9QUklWQVRFIH0gZnJvbSAnLi9YUlNlc3Npb24nO1xuaW1wb3J0IHtcbiAgUE9MWUZJTExFRF9YUl9DT01QQVRJQkxFLFxuICBYUl9DT01QQVRJQkxFLFxufSBmcm9tICcuLi9jb25zdGFudHMnO1xuXG5leHBvcnQgY29uc3QgUFJJVkFURSA9IFN5bWJvbCgnQEB3ZWJ4ci1wb2x5ZmlsbC9YUldlYkdMTGF5ZXInKTtcblxuZXhwb3J0IGNvbnN0IFhSV2ViR0xMYXllckluaXQgPSBPYmplY3QuZnJlZXplKHtcbiAgYW50aWFsaWFzOiB0cnVlLFxuICBkZXB0aDogZmFsc2UsXG4gIHN0ZW5jaWw6IGZhbHNlLFxuICBhbHBoYTogdHJ1ZSxcbiAgbXVsdGl2aWV3OiBmYWxzZSxcbiAgaWdub3JlRGVwdGhWYWx1ZXM6IGZhbHNlLFxuICBmcmFtZWJ1ZmZlclNjYWxlRmFjdG9yOiAxLjAsXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgWFJXZWJHTExheWVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7WFJTZXNzaW9ufSBzZXNzaW9uIFxuICAgKiBAcGFyYW0ge1hSV2ViR0xSZW5kZXJpbmdDb250ZXh0fSBjb250ZXh0IFxuICAgKiBAcGFyYW0ge09iamVjdD99IGxheWVySW5pdCBcbiAgICovXG4gIGNvbnN0cnVjdG9yKHNlc3Npb24sIGNvbnRleHQsIGxheWVySW5pdD17fSkge1xuICAgIGNvbnN0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIFhSV2ViR0xMYXllckluaXQsIGxheWVySW5pdCk7XG5cbiAgICBpZiAoIShzZXNzaW9uIGluc3RhbmNlb2YgWFJTZXNzaW9uKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdzZXNzaW9uIG11c3QgYmUgYSBYUlNlc3Npb24nKTtcbiAgICB9XG5cbiAgICBpZiAoc2Vzc2lvbi5lbmRlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkU3RhdGVFcnJvcmApO1xuICAgIH1cblxuICAgIC8vIFNpbmNlIHdlJ3JlIHBvbHlmaWxsaW5nLCB3ZSdyZSBwcm9iYWJseSBwb2x5ZmlsbGluZ1xuICAgIC8vIHRoZSBjb21wYXRpYmxlIFhSIGRldmljZSBiaXQgYXMgd2VsbC4gSXQnZCBiZVxuICAgIC8vIHVudXN1YWwgZm9yIHRoaXMgYml0IHRvIG5vdCBiZSBwb2x5ZmlsbGVkLlxuICAgIGlmIChjb250ZXh0W1BPTFlGSUxMRURfWFJfQ09NUEFUSUJMRV0pIHtcbiAgICAgIGlmIChjb250ZXh0W1hSX0NPTVBBVElCTEVdICE9PSB0cnVlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZFN0YXRlRXJyb3JgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBVc2UgdGhlIGRlZmF1bHQgZnJhbWVidWZmZXJcbiAgICBjb25zdCBmcmFtZWJ1ZmZlciA9IGNvbnRleHQuZ2V0UGFyYW1ldGVyKGNvbnRleHQuRlJBTUVCVUZGRVJfQklORElORyk7XG5cbiAgICB0aGlzW1BSSVZBVEVdID0ge1xuICAgICAgY29udGV4dCxcbiAgICAgIGNvbmZpZyxcbiAgICAgIGZyYW1lYnVmZmVyLFxuICAgICAgc2Vzc2lvbixcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1dlYkdMUmVuZGVyaW5nQ29udGV4dH1cbiAgICovXG4gIGdldCBjb250ZXh0KCkgeyByZXR1cm4gdGhpc1tQUklWQVRFXS5jb250ZXh0OyB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBnZXQgYW50aWFsaWFzKCkgeyByZXR1cm4gdGhpc1tQUklWQVRFXS5jb25maWcuYW50aWFsaWFzOyB9XG5cbiAgLyoqXG4gICAqIFRoZSBwb2x5ZmlsbCB3aWxsIGFsd2F5cyBpZ25vcmUgZGVwdGggdmFsdWVzLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZ2V0IGlnbm9yZURlcHRoVmFsdWVzKCkgeyByZXR1cm4gdHJ1ZTsgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtXZWJHTEZyYW1lYnVmZmVyfVxuICAgKi9cbiAgZ2V0IGZyYW1lYnVmZmVyKCkgeyByZXR1cm4gdGhpc1tQUklWQVRFXS5mcmFtZWJ1ZmZlcjsgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgZnJhbWVidWZmZXJXaWR0aCgpIHsgcmV0dXJuIHRoaXNbUFJJVkFURV0uY29udGV4dC5kcmF3aW5nQnVmZmVyV2lkdGg7IH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IGZyYW1lYnVmZmVySGVpZ2h0KCkgeyByZXR1cm4gdGhpc1tQUklWQVRFXS5jb250ZXh0LmRyYXdpbmdCdWZmZXJIZWlnaHQ7IH1cblxuICAvKipcbiAgICogQHJldHVybiB7WFJTZXNzaW9ufVxuICAgKi9cbiAgZ2V0IF9zZXNzaW9uKCkgeyByZXR1cm4gdGhpc1tQUklWQVRFXS5zZXNzaW9uOyB9XG5cbiAgLyoqXG4gICAqIEBUT0RPIE5vIG1lbnRpb24gaW4gc3BlYyBvbiBub3QgcmV1c2luZyB0aGUgWFJWaWV3cG9ydCBvbiBldmVyeSBmcmFtZS5cbiAgICogXG4gICAqIEBUT0RPIEluIHRoZSBmdXR1cmUgbWF5YmUgYWxsIHRoaXMgbG9naWMgc2hvdWxkIGJlIGhhbmRsZWQgaGVyZSBpbnN0ZWFkIG9mXG4gICAqIGRlbGVnYXRlZCB0byB0aGUgWFJWaWV3P1xuICAgKlxuICAgKiBAcGFyYW0ge1hSVmlld30gdmlld1xuICAgKiBAcmV0dXJuIHtYUlZpZXdwb3J0P31cbiAgICovXG4gIGdldFZpZXdwb3J0KHZpZXcpIHtcbiAgICByZXR1cm4gdmlldy5fZ2V0Vmlld3BvcnQodGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgc2NhbGUgZmFjdG9yIHRvIGJlIHJlcXVlc3RlZCBpZiB5b3Ugd2FudCB0byBtYXRjaCB0aGUgZGV2aWNlXG4gICAqIHJlc29sdXRpb24gYXQgdGhlIGNlbnRlciBvZiB0aGUgdXNlcidzIHZpc2lvbi4gVGhlIHBvbHlmaWxsIHdpbGwgYWx3YXlzXG4gICAqIHJlcG9ydCAxLjAuXG4gICAqIFxuICAgKiBAcGFyYW0ge1hSU2Vzc2lvbn0gc2Vzc2lvbiBcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgc3RhdGljIGdldE5hdGl2ZUZyYW1lYnVmZmVyU2NhbGVGYWN0b3Ioc2Vzc2lvbikge1xuICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZ2V0TmF0aXZlRnJhbWVidWZmZXJTY2FsZUZhY3RvciBtdXN0IGJlIHBhc3NlZCBhIHNlc3Npb24uJylcbiAgICB9XG5cbiAgICBpZiAoc2Vzc2lvbltTRVNTSU9OX1BSSVZBVEVdLmVuZGVkKSB7IHJldHVybiAwLjA7IH1cblxuICAgIHJldHVybiAxLjA7XG4gIH1cbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmV4cG9ydCBjb25zdCBQUklWQVRFID0gU3ltYm9sKCdAQHdlYnhyLXBvbHlmaWxsL1hSUmVmZXJlbmNlU3BhY2VFdmVudCcpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBYUlJlZmVyZW5jZVNwYWNlRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRJbml0RGljdFxuICAgKi9cbiAgY29uc3RydWN0b3IodHlwZSwgZXZlbnRJbml0RGljdCkge1xuICAgIHN1cGVyKHR5cGUsIGV2ZW50SW5pdERpY3QpO1xuICAgIHRoaXNbUFJJVkFURV0gPSB7XG4gICAgICByZWZlcmVuY2VTcGFjZTogZXZlbnRJbml0RGljdC5yZWZlcmVuY2VTcGFjZSxcbiAgICAgIHRyYW5zZm9ybTogZXZlbnRJbml0RGljdC50cmFuc2Zvcm0gfHwgbnVsbFxuICAgIH07XG4gICAgLy8gc2FmYXJpIGJ1ZzogIHN1cGVyKCkgc2VlbXMgdG8gcmV0dXJuIG9iamVjdCBvZiB0eXBlIEV2ZW50LCB3aXRoIEV2ZW50IGFzIHByb3RvdHlwZVxuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBYUlJlZmVyZW5jZVNwYWNlRXZlbnQucHJvdG90eXBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtYUkZyYW1lfVxuICAgKi9cbiAgZ2V0IHJlZmVyZW5jZVNwYWNlKCkgeyByZXR1cm4gdGhpc1tQUklWQVRFXS5yZWZlcmVuY2VTcGFjZTsgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtYUklucHV0U291cmNlfVxuICAgKi9cbiAgZ2V0IHRyYW5zZm9ybSgpIHsgcmV0dXJuIHRoaXNbUFJJVkFURV0udHJhbnNmb3JtOyB9XG59IiwiLypcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IFhSU3lzdGVtIGZyb20gJy4vWFJTeXN0ZW0nO1xuaW1wb3J0IFhSU2Vzc2lvbiBmcm9tICcuL1hSU2Vzc2lvbic7XG5pbXBvcnQgWFJTZXNzaW9uRXZlbnQgZnJvbSAnLi9YUlNlc3Npb25FdmVudCc7XG5pbXBvcnQgWFJGcmFtZSBmcm9tICcuL1hSRnJhbWUnO1xuaW1wb3J0IFhSVmlldyBmcm9tICcuL1hSVmlldyc7XG5pbXBvcnQgWFJWaWV3cG9ydCBmcm9tICcuL1hSVmlld3BvcnQnO1xuaW1wb3J0IFhSVmlld2VyUG9zZSBmcm9tICcuL1hSVmlld2VyUG9zZSc7XG5pbXBvcnQgWFJJbnB1dFNvdXJjZSBmcm9tICcuL1hSSW5wdXRTb3VyY2UnO1xuaW1wb3J0IFhSSW5wdXRTb3VyY2VFdmVudCBmcm9tICcuL1hSSW5wdXRTb3VyY2VFdmVudCc7XG5pbXBvcnQgWFJJbnB1dFNvdXJjZXNDaGFuZ2VFdmVudCBmcm9tICcuL1hSSW5wdXRTb3VyY2VzQ2hhbmdlRXZlbnQnO1xuaW1wb3J0IFhSV2ViR0xMYXllciBmcm9tICcuL1hSV2ViR0xMYXllcic7XG5pbXBvcnQgWFJTcGFjZSBmcm9tICcuL1hSU3BhY2UnO1xuaW1wb3J0IFhSUmVmZXJlbmNlU3BhY2UgZnJvbSAnLi9YUlJlZmVyZW5jZVNwYWNlJztcbmltcG9ydCBYUlJlZmVyZW5jZVNwYWNlRXZlbnQgZnJvbSAnLi9YUlJlZmVyZW5jZVNwYWNlRXZlbnQnO1xuaW1wb3J0IFhSUmVuZGVyU3RhdGUgZnJvbSAnLi9YUlJlbmRlclN0YXRlJztcbmltcG9ydCBYUlJpZ2lkVHJhbnNmb3JtIGZyb20gJy4vWFJSaWdpZFRyYW5zZm9ybSc7XG5pbXBvcnQgWFJQb3NlIGZyb20gJy4vWFJQb3NlJztcblxuLyoqXG4gKiBFdmVyeXRoaW5nIGV4cG9zZWQgaGVyZSB3aWxsIGFsc28gYmUgYXR0YWNoZWQgdG8gdGhlIHdpbmRvd1xuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIFhSU3lzdGVtLFxuICBYUlNlc3Npb24sXG4gIFhSU2Vzc2lvbkV2ZW50LFxuICBYUkZyYW1lLFxuICBYUlZpZXcsXG4gIFhSVmlld3BvcnQsXG4gIFhSVmlld2VyUG9zZSxcbiAgWFJXZWJHTExheWVyLFxuICBYUlNwYWNlLFxuICBYUlJlZmVyZW5jZVNwYWNlLFxuICBYUlJlZmVyZW5jZVNwYWNlRXZlbnQsXG4gIFhSSW5wdXRTb3VyY2UsXG4gIFhSSW5wdXRTb3VyY2VFdmVudCxcbiAgWFJJbnB1dFNvdXJjZXNDaGFuZ2VFdmVudCxcbiAgWFJSZW5kZXJTdGF0ZSxcbiAgWFJSaWdpZFRyYW5zZm9ybSxcbiAgWFJQb3NlLFxufTtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIFBPTFlGSUxMRURfWFJfQ09NUEFUSUJMRSxcbiAgWFJfQ09NUEFUSUJMRSxcbn0gZnJvbSAnLi9jb25zdGFudHMnO1xuXG5jb25zdCBjb250ZXh0VHlwZXMgPSBbJ3dlYmdsJywgJ2V4cGVyaW1lbnRhbC13ZWJnbCddO1xuXG4vKipcbiAqIFRha2VzIHRoZSBXZWJHTFJlbmRlcmluZ0NvbnRleHQgY29uc3RydWN0b3JcbiAqIGFuZCBjcmVhdGVzIGEgYG1ha2VYUkNvbXBhdGlibGVgIGZ1bmN0aW9uIGlmIGl0IGRvZXMgbm90IGV4aXN0LlxuICogUmV0dXJucyBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCB0aGUgZnVuY3Rpb25cbiAqIHdhcyBwb2x5ZmlsbGVkLlxuICpcbiAqIEBwYXJhbSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IHBvbHlmaWxsTWFrZVhSQ29tcGF0aWJsZSA9IENvbnRleHQgPT4ge1xuICBpZiAodHlwZW9mIENvbnRleHQucHJvdG90eXBlLm1ha2VYUkNvbXBhdGlibGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBDcmVhdGUgYG1ha2VYUkNvbXBhdGlibGVgIGFuZCBpZiBzdWNjZXNzZnVsLCBzdG9yZVxuICAvLyB0aGUgWFJEZXZpY2UgYXMgYSBwcml2YXRlIGF0dHJpYnV0ZSBmb3IgZXJyb3IgY2hlY2tpbmdcbiAgQ29udGV4dC5wcm90b3R5cGUubWFrZVhSQ29tcGF0aWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzW1hSX0NPTVBBVElCTEVdID0gdHJ1ZTtcbiAgICAvLyBUaGlzIGlzIGFsbCBmYWtlLCBzbyBqdXN0IHJlc29sdmUgaW1tZWRpYXRlbHkuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9O1xuXG4gIHJldHVybiB0cnVlO1xufTtcblxuXG4vKipcbiAqIFRha2VzIHRoZSBIVE1MQ2FudmFzRWxlbWVudCBvciBPZmZzY3JlZW5DYW52YXMgY29uc3RydWN0b3JcbiAqIGFuZCB3cmFwcyBpdHMgYGdldENvbnRleHRgIGZ1bmN0aW9uIHRvIHBhdGNoIHRoZSBjb250ZXh0IHdpdGggYVxuICogUE9MWUZJTExFRF9YUl9DT01QQVRJQkxFIGJpdCBzbyB0aGUgQVBJIGtub3dzIGl0J3MgYWxzbyB3b3JraW5nIHdpdGggYVxuICogcG9seWZpbGxlZCBgeHJDb21wYXRpYmxlYCBiaXQuIENhbiBkbyBleHRyYSBjaGVja2luZyBmb3IgdmFsaWRpdHkuXG4gKlxuICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudH0gQ2FudmFzXG4gKi9cbmV4cG9ydCBjb25zdCBwb2x5ZmlsbEdldENvbnRleHQgPSAoQ2FudmFzKSA9PiB7XG4gIGNvbnN0IGdldENvbnRleHQgPSBDYW52YXMucHJvdG90eXBlLmdldENvbnRleHQ7XG4gIENhbnZhcy5wcm90b3R5cGUuZ2V0Q29udGV4dCA9IGZ1bmN0aW9uIChjb250ZXh0VHlwZSwgZ2xBdHRyaWJzKSB7XG4gICAgY29uc3QgY3R4ID0gZ2V0Q29udGV4dC5jYWxsKHRoaXMsIGNvbnRleHRUeXBlLCBnbEF0dHJpYnMpO1xuXG4gICAgaWYgKGN0eCkge1xuICAgICAgLy8gU2V0IHRoaXMgYml0IHNvIHRoZSBBUEkga25vd3MgdGhlIFdlYkdMUmVuZGVyaW5nQ29udGV4dCBpc1xuICAgICAgLy8gYWxzbyBwb2x5ZmlsbGVkIGEgYml0XG4gICAgICBjdHhbUE9MWUZJTExFRF9YUl9DT01QQVRJQkxFXSA9IHRydWU7XG5cbiAgICAgIC8vIElmIHdlJ3ZlIHBvbHlmaWxsZWQgV2ViR0xSZW5kZXJpbmdDb250ZXh0J3MgeHJDb21wYXRpYmxlXG4gICAgICAvLyBiaXQsIHN0b3JlIHRoZSBib29sZWFuIGluIHRoZSBwcml2YXRlIHRva2VuIGlmIGNyZWF0ZWQgdmlhXG4gICAgICAvLyBjcmVhdGlvbiBwYXJhbWV0ZXJzXG4gICAgICBpZiAoZ2xBdHRyaWJzICYmICgneHJDb21wYXRpYmxlJyBpbiBnbEF0dHJpYnMpKSB7XG4gICAgICAgIGN0eFtYUl9DT01QQVRJQkxFXSA9IGdsQXR0cmlicy54ckNvbXBhdGlibGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGN0eDtcbiAgfVxufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4uL0V2ZW50VGFyZ2V0LmpzJ1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgWFJEZXZpY2UgZXh0ZW5kcyBFdmVudFRhcmdldCB7XG4gIC8qKlxuICAgKiBUYWtlcyBhIFZSRGlzcGxheSBvYmplY3QgZnJvbSB0aGUgV2ViVlIgMS4xIHNwZWMuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBnbG9iYWxcbiAgICovXG4gIGNvbnN0cnVjdG9yKGdsb2JhbCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLmdsb2JhbCA9IGdsb2JhbDtcbiAgICB0aGlzLm9uV2luZG93UmVzaXplID0gdGhpcy5vbldpbmRvd1Jlc2l6ZS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5nbG9iYWwud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMub25XaW5kb3dSZXNpemUpO1xuXG4gICAgLy8gVmFsdWUgaXMgdXNlZCBmb3IgYFhSU2Vzc2lvbi5wcm90b3R5cGUuZW52aXJvbm1lbnRCbGVuZE1vZGVgXG4gICAgLy8gYW5kIHNob3VsZCBiZSBvbmUgb2YgWFJFbnZpcm9ubWVudEJsZW5kTW9kZSB0eXBlczogJ29wYXF1ZScsICdhZGRpdGl2ZScsXG4gICAgLy8gb3IgJ2FscGhhLWJsZW5kJy5cbiAgICB0aGlzLmVudmlyb25tZW50QmxlbmRNb2RlID0gJ29wYXF1ZSc7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gYSBYUlNlc3Npb24gaGFzIGEgYGJhc2VMYXllcmAgcHJvcGVydHkgc2V0LlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc2Vzc2lvbklkXG4gICAqIEBwYXJhbSB7WFJXZWJHTExheWVyfSBsYXllclxuICAgKi9cbiAgb25CYXNlTGF5ZXJTZXQoc2Vzc2lvbklkLCBsYXllcikgeyB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCcpOyB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7WFJTZXNzaW9uTW9kZX0gbW9kZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNTZXNzaW9uU3VwcG9ydGVkKG1vZGUpIHsgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQnKTsgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmVhdHVyZURlc2NyaXB0b3JcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzRmVhdHVyZVN1cHBvcnRlZChmZWF0dXJlRGVzY3JpcHRvcikgeyB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCcpOyB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIGlmIGNyZWF0aW5nIGEgc2Vzc2lvbiBpcyBzdWNjZXNzZnVsLlxuICAgKiBVc3VhbGx5IHVzZWQgdG8gc2V0IHVwIHByZXNlbnRhdGlvbiBpbiB0aGUgZGV2aWNlLlxuICAgKlxuICAgKiBAcGFyYW0ge1hSU2Vzc2lvbk1vZGV9IG1vZGVcbiAgICogQHBhcmFtIHtTZXQ8c3RyaW5nPn0gZW5hYmxlZEZlYXR1cmVzXG4gICAqIEByZXR1cm4ge1Byb21pc2U8bnVtYmVyPn1cbiAgICovXG4gIGFzeW5jIHJlcXVlc3RTZXNzaW9uKG1vZGUsIGVuYWJsZWRGZWF0dXJlcykgeyB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCcpOyB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKSB7IHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkJyk7IH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNlc3Npb25JZFxuICAgKi9cbiAgb25GcmFtZVN0YXJ0KHNlc3Npb25JZCkgeyB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCcpOyB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzZXNzaW9uSWRcbiAgICovXG4gIG9uRnJhbWVFbmQoc2Vzc2lvbklkKSB7IHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkJyk7IH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNlc3Npb25JZFxuICAgKiBAcGFyYW0ge1hSUmVmZXJlbmNlU3BhY2VUeXBlfSB0eXBlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBkb2VzU2Vzc2lvblN1cHBvcnRSZWZlcmVuY2VTcGFjZShzZXNzaW9uSWQsIHR5cGUpIHsgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQnKTsgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtPYmplY3Q/fVxuICAgKi9cbiAgcmVxdWVzdFN0YWdlQm91bmRzKCkgeyB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCcpOyB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIHJlc29sdmluZyB0byBhIHRyYW5zZm9ybSBpZiBYUkRldmljZVxuICAgKiBjYW4gc3VwcG9ydCBmcmFtZSBvZiByZWZlcmVuY2UgYW5kIHByb3ZpZGVzIGl0cyBvd24gdmFsdWVzLlxuICAgKiBDYW4gcmVzb2x2ZSB0byBgdW5kZWZpbmVkYCBpZiB0aGUgcG9seWZpbGxlZCBBUEkgY2FuIHByb3ZpZGVcbiAgICogYSBkZWZhdWx0LiBSZWplY3RzIGlmIHRoaXMgWFJEZXZpY2UgY2Fubm90XG4gICAqIHN1cHBvcnQgdGhlIGZyYW1lIG9mIHJlZmVyZW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtYUkZyYW1lT2ZSZWZlcmVuY2VUeXBlfSB0eXBlXG4gICAqIEBwYXJhbSB7WFJGcmFtZU9mUmVmZXJlbmNlT3B0aW9uc30gb3B0aW9uc1xuICAgKiBAcmV0dXJuIHtQcm9taXNlPFhSRnJhbWVPZlJlZmVyZW5jZT59XG4gICAqL1xuICBhc3luYyByZXF1ZXN0RnJhbWVPZlJlZmVyZW5jZVRyYW5zZm9ybSh0eXBlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAqL1xuICBjYW5jZWxBbmltYXRpb25GcmFtZShoYW5kbGUpIHsgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQnKTsgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc2Vzc2lvbklkXG4gICAqL1xuICBlbmRTZXNzaW9uKHNlc3Npb25JZCkgeyB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCcpOyB9XG5cbiAgLyoqXG4gICAqIFRha2VzIGEgWFJFeWUgYW5kIGEgdGFyZ2V0IHRvIGFwcGx5IHByb3BlcnRpZXMgb2ZcbiAgICogYHhgLCBgeWAsIGB3aWR0aGAgYW5kIGBoZWlnaHRgIG9uLiBSZXR1cm5zIGEgYm9vbGVhblxuICAgKiBpbmRpY2F0aW5nIGlmIGl0IHN1Y2Nlc3NmdWxseSB3YXMgYWJsZSB0byBwb3B1bGF0ZVxuICAgKiB0YXJnZXQncyB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzZXNzaW9uSWRcbiAgICogQHBhcmFtIHtYUkV5ZX0gZXllXG4gICAqIEBwYXJhbSB7WFJXZWJHTExheWVyfSBsYXllclxuICAgKiBAcGFyYW0ge09iamVjdD99IHRhcmdldFxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZ2V0Vmlld3BvcnQoc2Vzc2lvbklkLCBleWUsIGxheWVyLCB0YXJnZXQpIHsgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQnKTsgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1hSRXllfSBleWVcbiAgICogQHJldHVybiB7RmxvYXQzMkFycmF5fVxuICAgKi9cbiAgZ2V0UHJvamVjdGlvbk1hdHJpeChleWUpIHsgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQnKTsgfVxuXG4gIC8qKlxuICAgKiBHZXQgbW9kZWwgbWF0cml4IHVuYWZmZWN0ZWQgYnkgZnJhbWUgb2YgcmVmZXJlbmNlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtGbG9hdDMyQXJyYXl9XG4gICAqL1xuICBnZXRCYXNlUG9zZU1hdHJpeCgpIHsgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQnKTsgfVxuXG4gIC8qKlxuICAgKiBHZXQgdmlldyBtYXRyaXggdW5hZmZlY3RlZCBieSBmcmFtZSBvZiByZWZlcmVuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7WFJFeWV9IGV5ZVxuICAgKiBAcmV0dXJuIHtGbG9hdDMyQXJyYXl9XG4gICAqL1xuICBnZXRCYXNlVmlld01hdHJpeChleWUpIHsgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQnKTsgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBsaXN0IG9mIGlucHV0IHNvdXJjZXMuXG4gICAqXG4gICAqIEByZXR1cm4ge0FycmF5PFhSSW5wdXRTb3VyY2U+fVxuICAgKi9cbiAgZ2V0SW5wdXRTb3VyY2VzKCkgeyB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCcpOyB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY3VycmVudCBwb3NlIG9mIGFuIGlucHV0IHNvdXJjZS5cbiAgICpcbiAgICogQHBhcmFtIHtYUklucHV0U291cmNlfSBpbnB1dFNvdXJjZVxuICAgKiBAcGFyYW0ge1hSQ29vcmRpbmF0ZVN5c3RlbX0gY29vcmRpbmF0ZVN5c3RlbVxuICAgKiBAcGFyYW0ge1N0cmluZ30gcG9zZVR5cGVcbiAgICogQHJldHVybiB7WFJQb3NlfVxuICAgKi9cbiAgZ2V0SW5wdXRQb3NlKGlucHV0U291cmNlLCBjb29yZGluYXRlU3lzdGVtLCBwb3NlVHlwZSkgeyB0aHJvdyBuZXcgRXJyb3IoJ05vdCBpbXBsZW1lbnRlZCcpOyB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCBvbiB3aW5kb3cgcmVzaXplLlxuICAgKi9cbiAgb25XaW5kb3dSZXNpemUoKSB7XG4gICAgLy8gQm91bmQgYnkgWFJEZXZpY2UgYW5kIGNhbGxlZCBvbiByZXNpemUsIGJ1dFxuICAgIC8vIHRoaXMgd2lsbCBjYWxsIGNoaWxkIGNsYXNzIG9uV2luZG93UmVzaXplIChvciwgaWYgbm90IGRlZmluZWQsXG4gICAgLy8gY2FsbCBhbiBpbmZpbml0ZSBsb29wIEkgZ3Vlc3MpXG4gICAgdGhpcy5vbldpbmRvd1Jlc2l6ZSgpO1xuICB9XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICBtYXQ0XG59IGZyb20gJ2dsLW1hdHJpeCc7XG5pbXBvcnQgWFJEZXZpY2UgZnJvbSAnLi9YUkRldmljZSc7XG5cbmNvbnN0IFRFU1RfRU5WID0gcHJvY2Vzcy5lbnYuQVBQX0VOViA9PT0gJ3Rlc3QnO1xuXG4vKipcbiAqIEEgU2Vzc2lvbiBoZWxwZXIgY2xhc3MgdG8gbWlycm9yIGFuIFhSU2Vzc2lvbiBhbmQgY29ycmVsYXRlXG4gKiBiZXR3ZWVuIGFuIFhSU2Vzc2lvbiwgYW5kIHRyYWNraW5nIHNlc3Npb25zIGluIGEgWFJEZXZpY2UuXG4gKiBNb3N0bHkgcmVmZXJlbmNlZCB2aWEgYHNlc3Npb24uaWRgIGR1ZSB0byBuZWVkaW5nIHRvIHZlcmlmeVxuICogc2Vzc2lvbiBjcmVhdGlvbiBpcyBwb3NzaWJsZSBvbiB0aGUgWFJEZXZpY2UgYmVmb3JlXG4gKiB0aGUgWFJTZXNzaW9uIGNhbiBiZSBjcmVhdGVkLlxuICovXG5sZXQgU0VTU0lPTl9JRCA9IDA7XG5jbGFzcyBTZXNzaW9uIHtcbiAgY29uc3RydWN0b3IobW9kZSwgZW5hYmxlZEZlYXR1cmVzKSB7XG4gICAgdGhpcy5tb2RlID0gbW9kZTtcbiAgICB0aGlzLmVuYWJsZWRGZWF0dXJlcyA9IGVuYWJsZWRGZWF0dXJlcztcbiAgICB0aGlzLmVuZGVkID0gbnVsbDtcbiAgICB0aGlzLmJhc2VMYXllciA9IG51bGw7XG4gICAgdGhpcy5pZCA9ICsrU0VTU0lPTl9JRDtcbiAgfVxufTtcblxuLyoqXG4gKiBBbiBYUkRldmljZSB3aGljaCBvbmx5IHN1cHBvcnRzIHNlbnNvcmxlc3MgaW5saW5lIHNlc3Npb25zLCB1c2VkIGFzIGFcbiAqIGZhbGxiYWNrIHdoZW4gbm8gb3RoZXIgdHlwZSBvZiBYUkRldmljZSBpcyBhdmFpbGFibGUgYXMgYSB3YXkgdG8gc2F0aXNmeSB0aGVcbiAqIHNwZWMgcmVxdWlyZW1lbnQgdGhhdCBpbmxpbmUgc2Vzc2lvbnMgYXJlIGFsd2F5cyBzdXBwb3J0ZWQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElubGluZURldmljZSBleHRlbmRzIFhSRGV2aWNlIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYW4gaW5saW5lLW9ubHkgWFJEZXZpY2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKGdsb2JhbCkge1xuICAgIHN1cGVyKGdsb2JhbCk7XG5cbiAgICB0aGlzLnNlc3Npb25zID0gbmV3IE1hcCgpO1xuICAgIHRoaXMucHJvamVjdGlvbk1hdHJpeCA9IG1hdDQuY3JlYXRlKCk7XG4gICAgdGhpcy5pZGVudGl0eU1hdHJpeCA9IG1hdDQuY3JlYXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gYSBYUlNlc3Npb24gaGFzIGEgYGJhc2VMYXllcmAgcHJvcGVydHkgc2V0LlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc2Vzc2lvbklkXG4gICAqIEBwYXJhbSB7WFJXZWJHTExheWVyfSBsYXllclxuICAgKi9cbiAgb25CYXNlTGF5ZXJTZXQoc2Vzc2lvbklkLCBsYXllcikge1xuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb25zLmdldChzZXNzaW9uSWQpO1xuICAgIHNlc3Npb24uYmFzZUxheWVyID0gbGF5ZXI7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSByZXF1ZXN0ZWQgbW9kZSBpcyBpbmxpbmVcbiAgICpcbiAgICogQHBhcmFtIHtYUlNlc3Npb25Nb2RlfSBtb2RlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc1Nlc3Npb25TdXBwb3J0ZWQobW9kZSkge1xuICAgIHJldHVybiBtb2RlID09ICdpbmxpbmUnO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmZWF0dXJlRGVzY3JpcHRvclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNGZWF0dXJlU3VwcG9ydGVkKGZlYXR1cmVEZXNjcmlwdG9yKSB7XG4gICAgc3dpdGNoKGZlYXR1cmVEZXNjcmlwdG9yKSB7XG4gICAgICAvLyBPbmx5IHZpZXdlciByZWZlcmVuY2Ugc3BhY2VzIGFyZSBzdXBwb3J0ZWRcbiAgICAgIGNhc2UgJ3ZpZXdlcic6IHJldHVybiB0cnVlO1xuICAgICAgZGVmYXVsdDogcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBhIHNlc3Npb24gSUQgaWYgY3JlYXRpbmcgYSBzZXNzaW9uIGlzIHN1Y2Nlc3NmdWwuXG4gICAqXG4gICAqIEBwYXJhbSB7WFJTZXNzaW9uTW9kZX0gbW9kZVxuICAgKiBAcGFyYW0ge1NldDxzdHJpbmc+fSBlbmFibGVkRmVhdHVyZXNcbiAgICogQHJldHVybiB7UHJvbWlzZTxudW1iZXI+fVxuICAgKi9cbiAgYXN5bmMgcmVxdWVzdFNlc3Npb24obW9kZSwgZW5hYmxlZEZlYXR1cmVzKSB7XG4gICAgaWYgKCF0aGlzLmlzU2Vzc2lvblN1cHBvcnRlZChtb2RlKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2Vzc2lvbiA9IG5ldyBTZXNzaW9uKG1vZGUsIGVuYWJsZWRGZWF0dXJlcyk7XG5cbiAgICB0aGlzLnNlc3Npb25zLnNldChzZXNzaW9uLmlkLCBzZXNzaW9uKTtcblxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoc2Vzc2lvbi5pZCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAqL1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZVxuICAgKi9cbiAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoaGFuZGxlKSB7XG4gICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKGhhbmRsZSk7XG4gIH1cblxuICBvbkZyYW1lU3RhcnQoc2Vzc2lvbklkLCByZW5kZXJTdGF0ZSkge1xuICAgIC8vIEBUT0RPIE91ciB0ZXN0IGVudmlyb25tZW50IGRvZXNuJ3QgaGF2ZSB0aGUgY2FudmFzIHBhY2thZ2UgZm9yIG5vdyxcbiAgICAvLyBidXQgdGhpcyBjb3VsZCBiZSBzb21ldGhpbmcgd2UgYWRkIHRvIHRoZSB0ZXN0cy5cbiAgICBpZiAoVEVTVF9FTlYpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5zZXNzaW9ucy5nZXQoc2Vzc2lvbklkKTtcblxuICAgIC8vIElmIHRoZSBzZXNzaW9uIGlzIGlubGluZSBtYWtlIHN1cmUgdGhlIHByb2plY3Rpb24gbWF0cml4IG1hdGNoZXMgdGhlIFxuICAgIC8vIGFzcGVjdCByYXRpbyBvZiB0aGUgdW5kZXJseWluZyBXZWJHTCBjYW52YXMuXG4gICAgaWYgKHNlc3Npb24uYmFzZUxheWVyKSB7XG4gICAgICBjb25zdCBjYW52YXMgPSBzZXNzaW9uLmJhc2VMYXllci5jb250ZXh0LmNhbnZhcztcbiAgICAgIC8vIFVwZGF0ZSB0aGUgcHJvamVjdGlvbiBtYXRyaXguXG4gICAgICBtYXQ0LnBlcnNwZWN0aXZlKHRoaXMucHJvamVjdGlvbk1hdHJpeCwgcmVuZGVyU3RhdGUuaW5saW5lVmVydGljYWxGaWVsZE9mVmlldyxcbiAgICAgICAgICBjYW52YXMud2lkdGgvY2FudmFzLmhlaWdodCwgcmVuZGVyU3RhdGUuZGVwdGhOZWFyLCByZW5kZXJTdGF0ZS5kZXB0aEZhcik7XG4gICAgfVxuICB9XG5cbiAgb25GcmFtZUVuZChzZXNzaW9uSWQpIHtcbiAgICAvLyBOb3RoaW5nIHRvIGRvIGhlcmUgYmVjYXVzZSBpbmxpbmUgYWx3YXlzIHJlbmRlcnMgdG8gdGhlIGNhbnZhcyBiYWNrYnVmZmVyXG4gICAgLy8gZGlyZWN0bHkuXG4gIH1cblxuICAvKipcbiAgICogQFRPRE8gU3BlY1xuICAgKi9cbiAgYXN5bmMgZW5kU2Vzc2lvbihzZXNzaW9uSWQpIHtcbiAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5zZXNzaW9ucy5nZXQoc2Vzc2lvbklkKTtcbiAgICBzZXNzaW9uLmVuZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc2Vzc2lvbklkXG4gICAqIEBwYXJhbSB7WFJSZWZlcmVuY2VTcGFjZVR5cGV9IHR5cGVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGRvZXNTZXNzaW9uU3VwcG9ydFJlZmVyZW5jZVNwYWNlKHNlc3Npb25JZCwgdHlwZSkge1xuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb25zLmdldChzZXNzaW9uSWQpO1xuICAgIGlmIChzZXNzaW9uLmVuZGVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlc3Npb24uZW5hYmxlZEZlYXR1cmVzLmhhcyh0eXBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmxpbmUgc2Vzc2lvbnMgZG9uJ3QgaGF2ZSBzdGFnZSBib3VuZHNcbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0P31cbiAgICovXG4gIHJlcXVlc3RTdGFnZUJvdW5kcygpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmxpbmUgc2Vzc2lvbnMgZG9uJ3QgaGF2ZSBtdWx0aXBsZSBmcmFtZXMgb2YgcmVmZXJlbmNlXG4gICAqXG4gICAqIEBwYXJhbSB7WFJGcmFtZU9mUmVmZXJlbmNlVHlwZX0gdHlwZVxuICAgKiBAcGFyYW0ge1hSRnJhbWVPZlJlZmVyZW5jZU9wdGlvbnN9IG9wdGlvbnNcbiAgICogQHJldHVybiB7UHJvbWlzZTxGbG9hdDMyQXJyYXk+fVxuICAgKi9cbiAgYXN5bmMgcmVxdWVzdEZyYW1lT2ZSZWZlcmVuY2VUcmFuc2Zvcm0odHlwZSwgb3B0aW9ucykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7WFJFeWV9IGV5ZVxuICAgKiBAcmV0dXJuIHtGbG9hdDMyQXJyYXl9XG4gICAqL1xuICBnZXRQcm9qZWN0aW9uTWF0cml4KGV5ZSkge1xuICAgIHJldHVybiB0aGlzLnByb2plY3Rpb25NYXRyaXg7XG4gIH1cblxuICAvKipcbiAgICogVGFrZXMgYSBYUkV5ZSBhbmQgYSB0YXJnZXQgdG8gYXBwbHkgcHJvcGVydGllcyBvZlxuICAgKiBgeGAsIGB5YCwgYHdpZHRoYCBhbmQgYGhlaWdodGAgb24uIFJldHVybnMgYSBib29sZWFuXG4gICAqIGluZGljYXRpbmcgaWYgaXQgc3VjY2Vzc2Z1bGx5IHdhcyBhYmxlIHRvIHBvcHVsYXRlXG4gICAqIHRhcmdldCdzIHZhbHVlcy5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNlc3Npb25JZFxuICAgKiBAcGFyYW0ge1hSRXllfSBleWVcbiAgICogQHBhcmFtIHtYUldlYkdMTGF5ZXJ9IGxheWVyXG4gICAqIEBwYXJhbSB7T2JqZWN0P30gdGFyZ2V0XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBnZXRWaWV3cG9ydChzZXNzaW9uSWQsIGV5ZSwgbGF5ZXIsIHRhcmdldCkge1xuICAgIC8vIEBUT0RPIGNhbiB3ZSBoYXZlIGFub3RoZXIgbGF5ZXIgcGFzc2VkIGluIHRoYXRcbiAgICAvLyB3YXNuJ3QgdGhlIHNhbWUgb25lIGFzIHRoZSBgYmFzZUxheWVyYD9cblxuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb25zLmdldChzZXNzaW9uSWQpO1xuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gbGF5ZXIuY29udGV4dC5jYW52YXM7XG5cbiAgICAvLyBJbmxpbmUgc2Vzc2lvbnMgcmV0dXJuIHRoZSB3aG9sZSBjYW52YXMgYXMgdGhlIHZpZXdwb3J0XG4gICAgdGFyZ2V0LnggPSB0YXJnZXQueSA9IDA7XG4gICAgdGFyZ2V0LndpZHRoID0gd2lkdGg7XG4gICAgdGFyZ2V0LmhlaWdodCA9IGhlaWdodDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbW9kZWwgbWF0cml4IHVuYWZmZWN0ZWQgYnkgZnJhbWUgb2YgcmVmZXJlbmNlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtGbG9hdDMyQXJyYXl9XG4gICAqL1xuICBnZXRCYXNlUG9zZU1hdHJpeCgpIHtcbiAgICByZXR1cm4gdGhpcy5pZGVudGl0eU1hdHJpeDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdmlldyBtYXRyaXggdW5hZmZlY3RlZCBieSBmcmFtZSBvZiByZWZlcmVuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7WFJFeWV9IGV5ZVxuICAgKiBAcmV0dXJuIHtGbG9hdDMyQXJyYXl9XG4gICAqL1xuICBnZXRCYXNlVmlld01hdHJpeChleWUpIHtcbiAgICByZXR1cm4gdGhpcy5pZGVudGl0eU1hdHJpeDtcbiAgfVxuXG4gIC8qKlxuICAgKiBObyBwZXJzaXN0ZW50IGlucHV0IHNvdXJjZXMgZm9yIHRoZSBpbmxpbmUgc2Vzc2lvblxuICAgKi9cbiAgZ2V0SW5wdXRTb3VyY2VzKCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGdldElucHV0UG9zZShpbnB1dFNvdXJjZSwgY29vcmRpbmF0ZVN5c3RlbSwgcG9zZVR5cGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgb24gd2luZG93IHJlc2l6ZS5cbiAgICovXG4gIG9uV2luZG93UmVzaXplKCkge1xuICB9XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMTkgSW1tZXJzaXZlIFdlYiBDb21tdW5pdHkgR3JvdXAuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLypcbkV4YW1wbGUgR2FtZXBhZCBtYXBwaW5nLiBBbnkgb2YgdGhlIHZhbHVlcyBtYXkgYmUgb21pdHRlZCBmb3IgdGhlIG9yaWdpbmFsXG5nYW1lcGFkIHZhbHVlcyB0byBwYXNzIHRocm91Z2ggdW5jaGFuZ2VkLlxuXG5cIkdhbWVwYWQgSUQgU3RyaW5nXCI6IHsgLy8gVGhlIEdhbWVwYWQuaWQgdGhhdCB0aGlzIGVudHJ5IG1hcHMgdG8uXG4gIG1hcHBpbmc6ICd4ci1zdGFuZGFyZCcsIC8vIE92ZXJyaWRlcyB0aGUgR2FtZXBhZC5tYXBwaW5nIHRoYXQgaXMgcmVwb3J0ZWRcbiAgcHJvZmlsZXM6IFsnZ2FtZXBhZC1pZC1zdHJpbmcnXSwgLy8gVGhlIHByb2ZpbGVzIGFycmF5IHRoYXQgc2hvdWxkIGJlIHJlcG9ydGVkXG4gIGRpc3BsYXlQcm9maWxlczoge1xuICAgIC8vIEFsdGVybmF0aXZlIHByb2ZpbGVzIGFycmF5cyB0byByZXBvcnQgaWYgdGhlIFZSRGV2aWNlLmRpc3BsYXlOYW1lIG1hdGNoZXNcbiAgICBcIldlYlZSIERpc3BsYXkgTmFtZVwiOiBbJ2dhbWVwYWQtaWQtc3RyaW5nJ11cbiAgfSxcbiAgYXhlczogeyAvLyBSZW1hcHMgdGhlIHJlcG9ydGVkIGF4ZXNcbiAgICBsZW5ndGg6IDIsIC8vIE92ZXJyaWRlcyB0aGUgbGVuZ3RoIG9mIHRoZSByZXBvcnRlZCBheGVzIGFycmF5XG4gICAgaW52ZXJ0OiBbMF0gLy8gTGlzdCBvZiBtYXBwZWQgYXhlcyB3aG8ncyB2YWx1ZSBzaG91bGQgYmUgaW52ZXJ0ZWRcbiAgICAwOiAyLCAvLyBSZW1hcHMgYXhlc1swXSB0byByZXBvcnQgYXhpc1syXSBmcm9tIHRoZSBvcmlnaW5hbCBnYW1lcGFkIG9iamVjdFxuICAgIDE6IG51bGwsIC8vIFJlbWFwcyBheGVzWzFdIHRvIGEgcGxhY2Vob2xkZXIgYXhpcyAoYWx3YXlzIHJlcG9ydHMgMClcbiAgfSxcbiAgYnV0dG9uczogeyAvLyBSZW1hcHMgdGhlIHJlcG9ydGVkIGJ1dHRvbnNcbiAgICBsZW5ndGg6IDIsIC8vIE92ZXJyaWRlcyB0aGUgbGVuZ3RoIG9mIHRoZSByZXBvcnRlZCBidXR0b25zIGFycmF5XG4gICAgMDogMiwgLy8gUmVtYXBzIGJ1dHRvbnNbMF0gdG8gcmVwb3J0IGJ1dHRvbnNbMl0gZnJvbSB0aGUgb3JpZ2luYWwgZ2FtZXBhZCBvYmplY3RcbiAgICAxOiBudWxsIC8vIFJlbWFwcyBidXR0b25zWzFdIHRvIGEgcGxhY2Vob2xkZXIgYnV0dG9uIChhbHdheXMgcmVwb3J0cyAwL2ZhbHNlKVxuICB9LFxuICBncmlwVHJhbnNmb3JtOiB7IC8vIEFuIGFkZGl0aW9uYWwgdHJhbnNmb3JtIHRvIGFwcGx5IHRvIHRoZSBncmlwU3BhY2UncyBwb3NlXG4gICAgcG9zaXRpb246IFswLCAwLCAwLjVdLCAvLyBBZGRpdGlvbmFsIHRyYW5zbGF0aW9uIHZlY3RvciB0byBhcHBseVxuICAgIG9yaWVudGF0aW9uOiBbMCwgMCwgMCwgMV0gLy8gQWRkaXRpb25hbCByb3RhdGlvbiBxdWF0ZXJuaW9uIHRvIGFwcGx5XG4gIH0sXG4gIHRhcmdldFJheVRyYW5zZm9ybTogeyAvLyBBbiBhZGRpdGlvbmFsIHRyYW5zZm9ybSB0byBhcHBseSB0byB0aGUgdGFyZ2V0UmF5U3BhY2UncyBwb3NlXG4gICAgcG9zaXRpb246IFswLCAwLCAwLjVdLCAvLyBBZGRpdGlvbmFsIHRyYW5zbGF0aW9uIHZlY3RvciB0byBhcHBseVxuICAgIG9yaWVudGF0aW9uOiBbMCwgMCwgMCwgMV0gLy8gQWRkaXRpb25hbCByb3RhdGlvbiBxdWF0ZXJuaW9uIHRvIGFwcGx5XG4gIH1cbn1cbiovXG5cbmxldCBkYXlkcmVhbSA9IHtcbiAgbWFwcGluZzogJycsXG4gIHByb2ZpbGVzOiBbJ2dvb2dsZS1kYXlkcmVhbScsICdnZW5lcmljLXRyaWdnZXItdG91Y2hwYWQnXSxcbiAgYnV0dG9uczoge1xuICAgIGxlbmd0aDogMyxcbiAgICAwOiBudWxsLFxuICAgIDE6IG51bGwsXG4gICAgMjogMFxuICB9LFxufTtcblxubGV0IHZpdmVGb2N1cyA9IHtcbiAgbWFwcGluZzogJ3hyLXN0YW5kYXJkJyxcbiAgcHJvZmlsZXM6IFsnaHRjLXZpdmUtZm9jdXMnLCAnZ2VuZXJpYy10cmlnZ2VyLXRvdWNocGFkJ10sXG4gIGJ1dHRvbnM6IHtcbiAgICBsZW5ndGg6IDMsXG4gICAgMDogMSxcbiAgICAxOiBudWxsLFxuICAgIDI6IDBcbiAgfSxcbn07XG5cbmxldCBvY3VsdXNHbyA9IHtcbiAgbWFwcGluZzogJ3hyLXN0YW5kYXJkJyxcbiAgcHJvZmlsZXM6IFsnb2N1bHVzLWdvJywgJ2dlbmVyaWMtdHJpZ2dlci10b3VjaHBhZCddLFxuICBidXR0b25zOiB7XG4gICAgbGVuZ3RoOiAzLFxuICAgIDA6IDEsXG4gICAgMTogbnVsbCxcbiAgICAyOiAwXG4gIH0sXG4gIC8vIEdyaXAgYWRqdXN0bWVudHMgZGV0ZXJtaW5lZCBleHBlcmltZW50YWxseS5cbiAgZ3JpcFRyYW5zZm9ybToge1xuICAgIG9yaWVudGF0aW9uOiBbTWF0aC5QSSAqIDAuMTEsIDAsIDAsIDFdXG4gIH1cbn07XG5cbi8vIEFwcGxpZXMgdG8gYm90aCBsZWZ0IGFuZCByaWdodCBPY3VsdXMgVG91Y2ggY29udHJvbGxlcnMuXG5sZXQgb2N1bHVzVG91Y2ggPSB7XG4gIG1hcHBpbmc6ICd4ci1zdGFuZGFyZCcsXG4gIGRpc3BsYXlQcm9maWxlczoge1xuICAgICdPY3VsdXMgUXVlc3QnOiBbJ29jdWx1cy10b3VjaC12MicsICdvY3VsdXMtdG91Y2gnLCAnZ2VuZXJpYy10cmlnZ2VyLXNxdWVlemUtdGh1bWJzdGljayddXG4gIH0sXG4gIHByb2ZpbGVzOiBbJ29jdWx1cy10b3VjaCcsICdnZW5lcmljLXRyaWdnZXItc3F1ZWV6ZS10aHVtYnN0aWNrJ10sXG4gIGF4ZXM6IHtcbiAgICBsZW5ndGg6IDQsXG4gICAgMDogbnVsbCxcbiAgICAxOiBudWxsLFxuICAgIDI6IDAsXG4gICAgMzogMVxuICB9LFxuICBidXR0b25zOiB7XG4gICAgbGVuZ3RoOiA3LFxuICAgIDA6IDEsXG4gICAgMTogMixcbiAgICAyOiBudWxsLFxuICAgIDM6IDAsXG4gICAgNDogMyxcbiAgICA1OiA0LFxuICAgIDY6IG51bGxcbiAgfSxcbiAgLy8gR3JpcCBhZGp1c3RtZW50cyBkZXRlcm1pbmVkIGV4cGVyaW1lbnRhbGx5LlxuICBncmlwVHJhbnNmb3JtOiB7XG4gICAgcG9zaXRpb246IFswLCAtMC4wMiwgMC4wNCwgMV0sXG4gICAgb3JpZW50YXRpb246IFtNYXRoLlBJICogMC4xMSwgMCwgMCwgMV1cbiAgfVxufTtcblxubGV0IG9wZW5WciA9IHtcbiAgbWFwcGluZzogJ3hyLXN0YW5kYXJkJyxcbiAgcHJvZmlsZXM6IFsnaHRjLXZpdmUnLCAnZ2VuZXJpYy10cmlnZ2VyLXNxdWVlemUtdG91Y2hwYWQnXSxcbiAgZGlzcGxheVByb2ZpbGVzOiB7XG4gICAgJ0hUQyBWaXZlJzogWydodGMtdml2ZScsICdnZW5lcmljLXRyaWdnZXItc3F1ZWV6ZS10b3VjaHBhZCddLFxuICAgICdIVEMgVml2ZSBEVlQnOiBbJ2h0Yy12aXZlJywgJ2dlbmVyaWMtdHJpZ2dlci1zcXVlZXplLXRvdWNocGFkJ10sXG4gICAgJ1ZhbHZlIEluZGV4JzogWyd2YWx2ZS1pbmRleCcsICdnZW5lcmljLXRyaWdnZXItc3F1ZWV6ZS10b3VjaHBhZC10aHVtYnN0aWNrJ11cbiAgfSxcbiAgYnV0dG9uczoge1xuICAgIGxlbmd0aDogMyxcbiAgICAwOiAxLFxuICAgIDE6IDIsXG4gICAgMjogMFxuICB9LFxuICAvLyBUcmFuc2Zvcm0gYWRqdXN0bWVudHMgZGV0ZXJtaW5lZCBleHBlcmltZW50YWxseS5cbiAgZ3JpcFRyYW5zZm9ybToge1xuICAgIHBvc2l0aW9uOiBbMCwgMCwgMC4wNSwgMV0sXG4gIH0sXG4gIHRhcmdldFJheVRyYW5zZm9ybToge1xuICAgIG9yaWVudGF0aW9uOiBbTWF0aC5QSSAqIC0wLjA4LCAwLCAwLCAxXVxuICB9LFxuICB1c2VyQWdlbnRPdmVycmlkZXM6IHtcbiAgICBcIkZpcmVmb3hcIjoge1xuICAgICAgYXhlczoge1xuICAgICAgICBpbnZlcnQ6IFsxLCAzXVxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxubGV0IHNhbXN1bmdHZWFyVlIgPSB7XG4gIG1hcHBpbmc6ICd4ci1zdGFuZGFyZCcsXG4gIHByb2ZpbGVzOiBbJ3NhbXN1bmctZ2VhcnZyJywgJ2dlbmVyaWMtdHJpZ2dlci10b3VjaHBhZCddLFxuICBidXR0b25zOiB7XG4gICAgbGVuZ3RoOiAzLFxuICAgIDA6IDEsXG4gICAgMTogbnVsbCxcbiAgICAyOiAwXG4gIH0sXG4gIGdyaXBUcmFuc2Zvcm06IHtcbiAgICBvcmllbnRhdGlvbjogW01hdGguUEkgKiAwLjExLCAwLCAwLCAxXVxuICB9XG59O1xuXG5sZXQgc2Ftc3VuZ09keXNzZXkgPSB7XG4gIG1hcHBpbmc6ICd4ci1zdGFuZGFyZCcsXG4gIHByb2ZpbGVzOiBbJ3NhbXN1bmctb2R5c3NleScsICdtaWNyb3NvZnQtbWl4ZWQtcmVhbGl0eScsICdnZW5lcmljLXRyaWdnZXItc3F1ZWV6ZS10b3VjaHBhZC10aHVtYnN0aWNrJ10sXG4gIGJ1dHRvbnM6IHtcbiAgICBsZW5ndGg6IDQsXG4gICAgMDogMSwgLy8gaW5kZXggZmluZ2VyIHRyaWdnZXJcbiAgICAxOiAwLCAvLyBwcmVzc2FibGUgam95c3RpY2tcbiAgICAyOiAyLCAvLyBncmlwIHRyaWdnZXJcbiAgICAzOiA0LCAvLyBwcmVzc2FibGUgdG91Y2hwYWRcbiAgfSxcbiAgLy8gR3JpcCBhZGp1c3RtZW50cyBkZXRlcm1pbmVkIGV4cGVyaW1lbnRhbGx5LlxuICBncmlwVHJhbnNmb3JtOiB7XG4gICAgcG9zaXRpb246IFswLCAtMC4wMiwgMC4wNCwgMV0sXG4gICAgb3JpZW50YXRpb246IFtNYXRoLlBJICogMC4xMSwgMCwgMCwgMV1cbiAgfVxufTtcblxubGV0IHdpbmRvd3NNaXhlZFJlYWxpdHkgPSB7XG4gIG1hcHBpbmc6ICd4ci1zdGFuZGFyZCcsXG4gIHByb2ZpbGVzOiBbJ21pY3Jvc29mdC1taXhlZC1yZWFsaXR5JywgJ2dlbmVyaWMtdHJpZ2dlci1zcXVlZXplLXRvdWNocGFkLXRodW1ic3RpY2snXSxcbiAgYnV0dG9uczoge1xuICAgIGxlbmd0aDogNCxcbiAgICAwOiAxLCAvLyBpbmRleCBmaW5nZXIgdHJpZ2dlclxuICAgIDE6IDAsIC8vIHByZXNzYWJsZSBqb3lzdGlja1xuICAgIDI6IDIsIC8vIGdyaXAgdHJpZ2dlclxuICAgIDM6IDQsIC8vIHByZXNzYWJsZSB0b3VjaHBhZFxuICB9LFxuICAvLyBHcmlwIGFkanVzdG1lbnRzIGRldGVybWluZWQgZXhwZXJpbWVudGFsbHkuXG4gIGdyaXBUcmFuc2Zvcm06IHtcbiAgICBwb3NpdGlvbjogWzAsIC0wLjAyLCAwLjA0LCAxXSxcbiAgICBvcmllbnRhdGlvbjogW01hdGguUEkgKiAwLjExLCAwLCAwLCAxXVxuICB9XG59O1xuXG5sZXQgR2FtZXBhZE1hcHBpbmdzID0ge1xuICAnRGF5ZHJlYW0gQ29udHJvbGxlcic6IGRheWRyZWFtLFxuICAnR2VhciBWUiBDb250cm9sbGVyJzogc2Ftc3VuZ0dlYXJWUixcbiAgJ0hUQyBWaXZlIEZvY3VzIENvbnRyb2xsZXInOiB2aXZlRm9jdXMsXG4gICdPY3VsdXMgR28gQ29udHJvbGxlcic6IG9jdWx1c0dvLFxuICAnT2N1bHVzIFRvdWNoIChSaWdodCknOiBvY3VsdXNUb3VjaCxcbiAgJ09jdWx1cyBUb3VjaCAoTGVmdCknOiBvY3VsdXNUb3VjaCxcbiAgJ09wZW5WUiBHYW1lcGFkJzogb3BlblZyLFxuICAnU3BhdGlhbCBDb250cm9sbGVyIChTcGF0aWFsIEludGVyYWN0aW9uIFNvdXJjZSkgMDQ1RS0wNjVBJzogd2luZG93c01peGVkUmVhbGl0eSxcbiAgJ1NwYXRpYWwgQ29udHJvbGxlciAoU3BhdGlhbCBJbnRlcmFjdGlvbiBTb3VyY2UpIDA0NUUtMDY1RCc6IHNhbXN1bmdPZHlzc2V5LFxuICAnV2luZG93cyBNaXhlZCBSZWFsaXR5IChSaWdodCknOiB3aW5kb3dzTWl4ZWRSZWFsaXR5LFxuICAnV2luZG93cyBNaXhlZCBSZWFsaXR5IChMZWZ0KSc6IHdpbmRvd3NNaXhlZFJlYWxpdHksXG59O1xuXG5leHBvcnQgZGVmYXVsdCBHYW1lcGFkTWFwcGluZ3M7XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMTYgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbmltcG9ydCB7XG4gIHZlYzMsXG4gIHF1YXQsXG4gIG1hdDRcbn0gZnJvbSAnZ2wtbWF0cml4JztcblxuY29uc3QgSEVBRF9FTEJPV19PRkZTRVRfUklHSFRIQU5ERUQgPSB2ZWMzLmZyb21WYWx1ZXMoMC4xNTUsIC0wLjQ2NSwgLTAuMTUpO1xuY29uc3QgSEVBRF9FTEJPV19PRkZTRVRfTEVGVEhBTkRFRCA9IHZlYzMuZnJvbVZhbHVlcygtMC4xNTUsIC0wLjQ2NSwgLTAuMTUpO1xuY29uc3QgRUxCT1dfV1JJU1RfT0ZGU0VUID0gdmVjMy5mcm9tVmFsdWVzKDAsIDAsIC0wLjI1KTtcbmNvbnN0IFdSSVNUX0NPTlRST0xMRVJfT0ZGU0VUID0gdmVjMy5mcm9tVmFsdWVzKDAsIDAsIDAuMDUpO1xuY29uc3QgQVJNX0VYVEVOU0lPTl9PRkZTRVQgPSB2ZWMzLmZyb21WYWx1ZXMoLTAuMDgsIDAuMTQsIDAuMDgpO1xuXG5jb25zdCBFTEJPV19CRU5EX1JBVElPID0gMC40OyAvLyA0MCUgZWxib3csIDYwJSB3cmlzdC5cbmNvbnN0IEVYVEVOU0lPTl9SQVRJT19XRUlHSFQgPSAwLjQ7XG5cbmNvbnN0IE1JTl9BTkdVTEFSX1NQRUVEID0gMC42MTsgLy8gMzUgZGVncmVlcyBwZXIgc2Vjb25kIChpbiByYWRpYW5zKS5cbmNvbnN0IE1JTl9BTkdMRV9ERUxUQSA9IDAuMTc1OyAvLyAxMCBkZWdyZWVzIChpbiByYWRpYW5zKS5cblxuY29uc3QgTUlOX0VYVEVOU0lPTl9DT1MgPSAwLjEyOyAvLyBjb3Mgb2YgODMgZGVncmVlcy5cbmNvbnN0IE1BWF9FWFRFTlNJT05fQ09TID0gMC44NzsgLy8gY29zIG9mIDMwIGRlZ3JlZXMuXG5cbmNvbnN0IFJBRF9UT19ERUcgPSAxODAgLyBNYXRoLlBJO1xuXG5mdW5jdGlvbiBldWxlckZyb21RdWF0ZXJuaW9uKG91dCwgcSwgb3JkZXIpIHtcbiAgZnVuY3Rpb24gY2xhbXAodmFsdWUsIG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuICh2YWx1ZSA8IG1pbiA/IG1pbiA6ICh2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlKSk7XG4gIH1cbiAgLy8gQm9ycm93ZWQgZnJvbSBUaHJlZS5KUyA6KVxuICAvLyBxIGlzIGFzc3VtZWQgdG8gYmUgbm9ybWFsaXplZFxuICAvLyBodHRwOi8vd3d3Lm1hdGh3b3Jrcy5jb20vbWF0bGFiY2VudHJhbC9maWxlZXhjaGFuZ2UvMjA2OTYtZnVuY3Rpb24tdG8tY29udmVydC1iZXR3ZWVuLWRjbS1ldWxlci1hbmdsZXMtcXVhdGVybmlvbnMtYW5kLWV1bGVyLXZlY3RvcnMvY29udGVudC9TcGluQ2FsYy5tXG4gIHZhciBzcXggPSBxWzBdICogcVswXTtcbiAgdmFyIHNxeSA9IHFbMV0gKiBxWzFdO1xuICB2YXIgc3F6ID0gcVsyXSAqIHFbMl07XG4gIHZhciBzcXcgPSBxWzNdICogcVszXTtcblxuICBpZiAoIG9yZGVyID09PSAnWFlaJyApIHtcbiAgICBvdXRbMF0gPSBNYXRoLmF0YW4yKCAyICogKCBxWzBdICogcVszXSAtIHFbMV0gKiBxWzJdICksICggc3F3IC0gc3F4IC0gc3F5ICsgc3F6ICkgKTtcbiAgICBvdXRbMV0gPSBNYXRoLmFzaW4oICBjbGFtcCggMiAqICggcVswXSAqIHFbMl0gKyBxWzFdICogcVszXSApLCAtMSwgMSApICk7XG4gICAgb3V0WzJdID0gTWF0aC5hdGFuMiggMiAqICggcVsyXSAqIHFbM10gLSBxWzBdICogcVsxXSApLCAoIHNxdyArIHNxeCAtIHNxeSAtIHNxeiApICk7XG4gIH0gZWxzZSBpZiAoIG9yZGVyID09PSAgJ1lYWicgKSB7XG4gICAgb3V0WzBdID0gTWF0aC5hc2luKCAgY2xhbXAoIDIgKiAoIHFbMF0gKiBxWzNdIC0gcVsxXSAqIHFbMl0gKSwgLTEsIDEgKSApO1xuICAgIG91dFsxXSA9IE1hdGguYXRhbjIoIDIgKiAoIHFbMF0gKiBxWzJdICsgcVsxXSAqIHFbM10gKSwgKCBzcXcgLSBzcXggLSBzcXkgKyBzcXogKSApO1xuICAgIG91dFsyXSA9IE1hdGguYXRhbjIoIDIgKiAoIHFbMF0gKiBxWzFdICsgcVsyXSAqIHFbM10gKSwgKCBzcXcgLSBzcXggKyBzcXkgLSBzcXogKSApO1xuICB9IGVsc2UgaWYgKCBvcmRlciA9PT0gJ1pYWScgKSB7XG4gICAgb3V0WzBdID0gTWF0aC5hc2luKCAgY2xhbXAoIDIgKiAoIHFbMF0gKiBxWzNdICsgcVsxXSAqIHFbMl0gKSwgLTEsIDEgKSApO1xuICAgIG91dFsxXSA9IE1hdGguYXRhbjIoIDIgKiAoIHFbMV0gKiBxWzNdIC0gcVsyXSAqIHFbMF0gKSwgKCBzcXcgLSBzcXggLSBzcXkgKyBzcXogKSApO1xuICAgIG91dFsyXSA9IE1hdGguYXRhbjIoIDIgKiAoIHFbMl0gKiBxWzNdIC0gcVswXSAqIHFbMV0gKSwgKCBzcXcgLSBzcXggKyBzcXkgLSBzcXogKSApO1xuICB9IGVsc2UgaWYgKCBvcmRlciA9PT0gJ1pZWCcgKSB7XG4gICAgb3V0WzBdID0gTWF0aC5hdGFuMiggMiAqICggcVswXSAqIHFbM10gKyBxWzJdICogcVsxXSApLCAoIHNxdyAtIHNxeCAtIHNxeSArIHNxeiApICk7XG4gICAgb3V0WzFdID0gTWF0aC5hc2luKCAgY2xhbXAoIDIgKiAoIHFbMV0gKiBxWzNdIC0gcVswXSAqIHFbMl0gKSwgLTEsIDEgKSApO1xuICAgIG91dFsyXSA9IE1hdGguYXRhbjIoIDIgKiAoIHFbMF0gKiBxWzFdICsgcVsyXSAqIHFbM10gKSwgKCBzcXcgKyBzcXggLSBzcXkgLSBzcXogKSApO1xuICB9IGVsc2UgaWYgKCBvcmRlciA9PT0gJ1laWCcgKSB7XG4gICAgb3V0WzBdID0gTWF0aC5hdGFuMiggMiAqICggcVswXSAqIHFbM10gLSBxWzJdICogcVsxXSApLCAoIHNxdyAtIHNxeCArIHNxeSAtIHNxeiApICk7XG4gICAgb3V0WzFdID0gTWF0aC5hdGFuMiggMiAqICggcVsxXSAqIHFbM10gLSBxWzBdICogcVsyXSApLCAoIHNxdyArIHNxeCAtIHNxeSAtIHNxeiApICk7XG4gICAgb3V0WzJdID0gTWF0aC5hc2luKCAgY2xhbXAoIDIgKiAoIHFbMF0gKiBxWzFdICsgcVsyXSAqIHFbM10gKSwgLTEsIDEgKSApO1xuICB9IGVsc2UgaWYgKCBvcmRlciA9PT0gJ1haWScgKSB7XG4gICAgb3V0WzBdID0gTWF0aC5hdGFuMiggMiAqICggcVswXSAqIHFbM10gKyBxWzFdICogcVsyXSApLCAoIHNxdyAtIHNxeCArIHNxeSAtIHNxeiApICk7XG4gICAgb3V0WzFdID0gTWF0aC5hdGFuMiggMiAqICggcVswXSAqIHFbMl0gKyBxWzFdICogcVszXSApLCAoIHNxdyArIHNxeCAtIHNxeSAtIHNxeiApICk7XG4gICAgb3V0WzJdID0gTWF0aC5hc2luKCAgY2xhbXAoIDIgKiAoIHFbMl0gKiBxWzNdIC0gcVswXSAqIHFbMV0gKSwgLTEsIDEgKSApO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKCdObyBvcmRlciBnaXZlbiBmb3IgcXVhdGVybmlvbiB0byBldWxlciBjb252ZXJzaW9uLicpO1xuICAgIHJldHVybjtcbiAgfVxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGFybSBtb2RlbCBmb3IgdGhlIERheWRyZWFtIGNvbnRyb2xsZXIuIEZlZWQgaXQgYSBjYW1lcmEgYW5kXG4gKiB0aGUgY29udHJvbGxlci4gVXBkYXRlIGl0IG9uIGEgUkFGLlxuICpcbiAqIEdldCB0aGUgbW9kZWwncyBwb3NlIHVzaW5nIGdldFBvc2UoKS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JpZW50YXRpb25Bcm1Nb2RlbCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaGFuZCA9ICdyaWdodCc7XG4gICAgdGhpcy5oZWFkRWxib3dPZmZzZXQgPSBIRUFEX0VMQk9XX09GRlNFVF9SSUdIVEhBTkRFRDtcblxuICAgIC8vIEN1cnJlbnQgYW5kIHByZXZpb3VzIGNvbnRyb2xsZXIgb3JpZW50YXRpb25zLlxuICAgIHRoaXMuY29udHJvbGxlclEgPSBxdWF0LmNyZWF0ZSgpO1xuICAgIHRoaXMubGFzdENvbnRyb2xsZXJRID0gcXVhdC5jcmVhdGUoKTtcblxuICAgIC8vIEN1cnJlbnQgYW5kIHByZXZpb3VzIGhlYWQgb3JpZW50YXRpb25zLlxuICAgIHRoaXMuaGVhZFEgPSBxdWF0LmNyZWF0ZSgpO1xuXG4gICAgLy8gQ3VycmVudCBoZWFkIHBvc2l0aW9uLlxuICAgIHRoaXMuaGVhZFBvcyA9IHZlYzMuY3JlYXRlKCk7XG5cbiAgICAvLyBQb3NpdGlvbnMgb2Ygb3RoZXIgam9pbnRzIChtb3N0bHkgZm9yIGRlYnVnZ2luZykuXG4gICAgdGhpcy5lbGJvd1BvcyA9IHZlYzMuY3JlYXRlKCk7XG4gICAgdGhpcy53cmlzdFBvcyA9IHZlYzMuY3JlYXRlKCk7XG5cbiAgICAvLyBDdXJyZW50IGFuZCBwcmV2aW91cyB0aW1lcyB0aGUgbW9kZWwgd2FzIHVwZGF0ZWQuXG4gICAgdGhpcy50aW1lID0gbnVsbDtcbiAgICB0aGlzLmxhc3RUaW1lID0gbnVsbDtcblxuICAgIC8vIFJvb3Qgcm90YXRpb24uXG4gICAgdGhpcy5yb290USA9IHF1YXQuY3JlYXRlKCk7XG5cbiAgICAvLyBDdXJyZW50IHBvc2l0aW9uIHRoYXQgdGhpcyBhcm0gbW9kZWwgY2FsY3VsYXRlcy5cbiAgICB0aGlzLnBvc2l0aW9uID0gdmVjMy5jcmVhdGUoKTtcbiAgfVxuXG4gIHNldEhhbmRlZG5lc3MoaGFuZCkge1xuICAgIGlmICh0aGlzLmhhbmQgIT0gaGFuZCkge1xuICAgICAgdGhpcy5oYW5kID0gaGFuZDtcbiAgICAgIGlmICh0aGlzLmhhbmQgPT0gJ2xlZnQnKSB7XG4gICAgICAgIHRoaXMuaGVhZEVsYm93T2Zmc2V0ID0gSEVBRF9FTEJPV19PRkZTRVRfTEVGVEhBTkRFRDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGVhZEVsYm93T2Zmc2V0ID0gSEVBRF9FTEJPV19PRkZTRVRfUklHSFRIQU5ERUQ7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCBvbiBhIFJBRi5cbiAgICovXG4gIHVwZGF0ZShjb250cm9sbGVyT3JpZW50YXRpb24sIGhlYWRQb3NlTWF0cml4KSB7XG4gICAgdGhpcy50aW1lID0gbm93KCk7XG5cbiAgICAvLyBVcGRhdGUgdGhlIGludGVybmFsIGNvcGllcyBvZiB0aGUgY29udHJvbGxlciBhbmQgaGVhZCBwb3NlLlxuICAgIGlmIChjb250cm9sbGVyT3JpZW50YXRpb24pIHtcbiAgICAgIHF1YXQuY29weSh0aGlzLmxhc3RDb250cm9sbGVyUSwgdGhpcy5jb250cm9sbGVyUSk7XG4gICAgICBxdWF0LmNvcHkodGhpcy5jb250cm9sbGVyUSwgY29udHJvbGxlck9yaWVudGF0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAoaGVhZFBvc2VNYXRyaXgpIHtcbiAgICAgIG1hdDQuZ2V0VHJhbnNsYXRpb24odGhpcy5oZWFkUG9zLCBoZWFkUG9zZU1hdHJpeCk7XG4gICAgICBtYXQ0LmdldFJvdGF0aW9uKHRoaXMuaGVhZFEsIGhlYWRQb3NlTWF0cml4KTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgY29udHJvbGxlcidzIGFuZ3VsYXIgdmVsb2NpdHkgaXMgYWJvdmUgYSBjZXJ0YWluIGFtb3VudCwgd2UgY2FuXG4gICAgLy8gYXNzdW1lIHRvcnNvIHJvdGF0aW9uIGFuZCBtb3ZlIHRoZSBlbGJvdyBqb2ludCByZWxhdGl2ZSB0byB0aGVcbiAgICAvLyBjYW1lcmEgb3JpZW50YXRpb24uXG4gICAgbGV0IGhlYWRZYXdRID0gdGhpcy5nZXRIZWFkWWF3T3JpZW50YXRpb25fKCk7XG4gICAgbGV0IGFuZ2xlRGVsdGEgPSB0aGlzLnF1YXRBbmdsZV8odGhpcy5sYXN0Q29udHJvbGxlclEsIHRoaXMuY29udHJvbGxlclEpO1xuICAgIGxldCB0aW1lRGVsdGEgPSAodGhpcy50aW1lIC0gdGhpcy5sYXN0VGltZSkgLyAxMDAwO1xuICAgIGxldCBjb250cm9sbGVyQW5ndWxhclNwZWVkID0gYW5nbGVEZWx0YSAvIHRpbWVEZWx0YTtcbiAgICBpZiAoY29udHJvbGxlckFuZ3VsYXJTcGVlZCA+IE1JTl9BTkdVTEFSX1NQRUVEKSB7XG4gICAgICAvLyBBdHRlbnVhdGUgdGhlIFJvb3Qgcm90YXRpb24gc2xpZ2h0bHkuXG4gICAgICBxdWF0LnNsZXJwKHRoaXMucm9vdFEsIHRoaXMucm9vdFEsIGhlYWRZYXdRLFxuICAgICAgICAgICAgICAgICBNYXRoLm1pbihhbmdsZURlbHRhIC8gTUlOX0FOR0xFX0RFTFRBLCAxLjApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcXVhdC5jb3B5KHRoaXMucm9vdFEsIGhlYWRZYXdRKTtcbiAgICB9XG5cbiAgICAvLyBXZSB3YW50IHRvIG1vdmUgdGhlIGVsYm93IHVwIGFuZCB0byB0aGUgY2VudGVyIGFzIHRoZSB1c2VyIHBvaW50cyB0aGVcbiAgICAvLyBjb250cm9sbGVyIHVwd2FyZHMsIHNvIHRoYXQgdGhleSBjYW4gZWFzaWx5IHNlZSB0aGUgY29udHJvbGxlciBhbmQgaXRzXG4gICAgLy8gdG9vbCB0aXBzLlxuICAgIGxldCBjb250cm9sbGVyRm9yd2FyZCA9IHZlYzMuZnJvbVZhbHVlcygwLCAwLCAtMS4wKTtcbiAgICB2ZWMzLnRyYW5zZm9ybVF1YXQoY29udHJvbGxlckZvcndhcmQsIGNvbnRyb2xsZXJGb3J3YXJkLCB0aGlzLmNvbnRyb2xsZXJRKTtcbiAgICBsZXQgY29udHJvbGxlckRvdFkgPSB2ZWMzLmRvdChjb250cm9sbGVyRm9yd2FyZCwgWzAsIDEsIDBdKTtcbiAgICBsZXQgZXh0ZW5zaW9uUmF0aW8gPSB0aGlzLmNsYW1wXyhcbiAgICAgICAgKGNvbnRyb2xsZXJEb3RZIC0gTUlOX0VYVEVOU0lPTl9DT1MpIC8gTUFYX0VYVEVOU0lPTl9DT1MsIDAuMCwgMS4wKTtcblxuICAgIC8vIENvbnRyb2xsZXIgb3JpZW50YXRpb24gaW4gY2FtZXJhIHNwYWNlLlxuICAgIGxldCBjb250cm9sbGVyQ2FtZXJhUSA9IHF1YXQuY2xvbmUodGhpcy5yb290USk7XG4gICAgcXVhdC5pbnZlcnQoY29udHJvbGxlckNhbWVyYVEsIGNvbnRyb2xsZXJDYW1lcmFRKTtcbiAgICBxdWF0Lm11bHRpcGx5KGNvbnRyb2xsZXJDYW1lcmFRLCBjb250cm9sbGVyQ2FtZXJhUSwgdGhpcy5jb250cm9sbGVyUSk7XG5cblxuICAgIC8vIENhbGN1bGF0ZSBlbGJvdyBwb3NpdGlvbi5cbiAgICBsZXQgZWxib3dQb3MgPSB0aGlzLmVsYm93UG9zO1xuICAgIHZlYzMuY29weShlbGJvd1BvcywgdGhpcy5oZWFkUG9zKTtcbiAgICB2ZWMzLmFkZChlbGJvd1BvcywgZWxib3dQb3MsIHRoaXMuaGVhZEVsYm93T2Zmc2V0KTtcbiAgICBsZXQgZWxib3dPZmZzZXQgPSB2ZWMzLmNsb25lKEFSTV9FWFRFTlNJT05fT0ZGU0VUKTtcbiAgICB2ZWMzLnNjYWxlKGVsYm93T2Zmc2V0LCBlbGJvd09mZnNldCwgZXh0ZW5zaW9uUmF0aW8pO1xuICAgIHZlYzMuYWRkKGVsYm93UG9zLCBlbGJvd1BvcywgZWxib3dPZmZzZXQpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIGpvaW50IGFuZ2xlcy4gR2VuZXJhbGx5IDQwJSBvZiByb3RhdGlvbiBhcHBsaWVkIHRvIGVsYm93LCA2MCVcbiAgICAvLyB0byB3cmlzdCwgYnV0IGlmIGNvbnRyb2xsZXIgaXMgcmFpc2VkIGhpZ2hlciwgbW9yZSByb3RhdGlvbiBjb21lcyBmcm9tXG4gICAgLy8gdGhlIHdyaXN0LlxuICAgIGxldCB0b3RhbEFuZ2xlID0gdGhpcy5xdWF0QW5nbGVfKGNvbnRyb2xsZXJDYW1lcmFRLCBxdWF0LmNyZWF0ZSgpKTtcbiAgICBsZXQgdG90YWxBbmdsZURlZyA9IHRvdGFsQW5nbGUgKiBSQURfVE9fREVHO1xuICAgIGxldCBsZXJwU3VwcHJlc3Npb24gPSAxIC0gTWF0aC5wb3codG90YWxBbmdsZURlZyAvIDE4MCwgNCk7c3Nzc3NcblxuICAgIGxldCBlbGJvd1JhdGlvID0gRUxCT1dfQkVORF9SQVRJTztcbiAgICBsZXQgd3Jpc3RSYXRpbyA9IDEgLSBFTEJPV19CRU5EX1JBVElPO1xuICAgIGxldCBsZXJwVmFsdWUgPSBsZXJwU3VwcHJlc3Npb24gKlxuICAgICAgICAoZWxib3dSYXRpbyArIHdyaXN0UmF0aW8gKiBleHRlbnNpb25SYXRpbyAqIEVYVEVOU0lPTl9SQVRJT19XRUlHSFQpO1xuXG4gICAgbGV0IHdyaXN0USA9IHF1YXQuY3JlYXRlKCk7XG4gICAgcXVhdC5zbGVycCh3cmlzdFEsIHdyaXN0USwgY29udHJvbGxlckNhbWVyYVEsIGxlcnBWYWx1ZSk7XG4gICAgbGV0IGludldyaXN0USA9IHF1YXQuaW52ZXJ0KHF1YXQuY3JlYXRlKCksIHdyaXN0USk7XG4gICAgbGV0IGVsYm93USA9IHF1YXQuY2xvbmUoY29udHJvbGxlckNhbWVyYVEpO1xuICAgIHF1YXQubXVsdGlwbHkoZWxib3dRLCBlbGJvd1EsIGludldyaXN0USk7XG5cbiAgICAvLyBDYWxjdWxhdGUgb3VyIGZpbmFsIGNvbnRyb2xsZXIgcG9zaXRpb24gYmFzZWQgb24gYWxsIG91ciBqb2ludCByb3RhdGlvbnNcbiAgICAvLyBhbmQgbGVuZ3Rocy5cbiAgICAvKlxuICAgIHBvc2l0aW9uXyA9XG4gICAgICByb290X3JvdF8gKiAoXG4gICAgICAgIGNvbnRyb2xsZXJfcm9vdF9vZmZzZXRfICtcbjI6ICAgICAgKGFybV9leHRlbnNpb25fICogYW10X2V4dGVuc2lvbikgK1xuMTogICAgICBlbGJvd19yb3QgKiAoa0NvbnRyb2xsZXJGb3JlYXJtICsgKHdyaXN0X3JvdCAqIGtDb250cm9sbGVyUG9zaXRpb24pKVxuICAgICAgKTtcbiAgICAqL1xuICAgIGxldCB3cmlzdFBvcyA9IHRoaXMud3Jpc3RQb3M7XG4gICAgdmVjMy5jb3B5KHdyaXN0UG9zLCBXUklTVF9DT05UUk9MTEVSX09GRlNFVCk7XG4gICAgdmVjMy50cmFuc2Zvcm1RdWF0KHdyaXN0UG9zLCB3cmlzdFBvcywgd3Jpc3RRKTtcbiAgICB2ZWMzLmFkZCh3cmlzdFBvcywgd3Jpc3RQb3MsIEVMQk9XX1dSSVNUX09GRlNFVCk7XG4gICAgdmVjMy50cmFuc2Zvcm1RdWF0KHdyaXN0UG9zLCB3cmlzdFBvcywgZWxib3dRKTtcbiAgICB2ZWMzLmFkZCh3cmlzdFBvcywgd3Jpc3RQb3MsIGVsYm93UG9zKTtcblxuICAgIGxldCBvZmZzZXQgPSB2ZWMzLmNsb25lKEFSTV9FWFRFTlNJT05fT0ZGU0VUKTtcbiAgICB2ZWMzLnNjYWxlKG9mZnNldCwgb2Zmc2V0LCBleHRlbnNpb25SYXRpbyk7XG5cbiAgICAvLyBTZXQgdGhlIHJlc3VsdGluZyBwb3NlIG9yaWVudGF0aW9uIGFuZCBwb3NpdGlvbi5cbiAgICB2ZWMzLmFkZCh0aGlzLnBvc2l0aW9uLCB0aGlzLndyaXN0UG9zLCBvZmZzZXQpO1xuICAgIHZlYzMudHJhbnNmb3JtUXVhdCh0aGlzLnBvc2l0aW9uLCB0aGlzLnBvc2l0aW9uLCB0aGlzLnJvb3RRKTtcblxuICAgIHRoaXMubGFzdFRpbWUgPSB0aGlzLnRpbWU7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcG9zaXRpb24gY2FsY3VsYXRlZCBieSB0aGUgbW9kZWwuXG4gICAqL1xuICBnZXRQb3NpdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wb3NpdGlvbjtcbiAgfVxuXG4gIGdldEhlYWRZYXdPcmllbnRhdGlvbl8oKSB7XG4gICAgbGV0IGhlYWRFdWxlciA9IHZlYzMuY3JlYXRlKCk7XG4gICAgZXVsZXJGcm9tUXVhdGVybmlvbihoZWFkRXVsZXIsIHRoaXMuaGVhZFEsICdZWFonKTtcbiAgICBsZXQgZGVzdGluYXRpb25RID0gcXVhdC5mcm9tRXVsZXIocXVhdC5jcmVhdGUoKSwgMCwgaGVhZEV1bGVyWzFdICogUkFEX1RPX0RFRywgMCk7XG4gICAgcmV0dXJuIGRlc3RpbmF0aW9uUTtcbiAgfVxuXG4gIGNsYW1wXyh2YWx1ZSwgbWluLCBtYXgpIHtcbiAgICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodmFsdWUsIG1pbiksIG1heCk7XG4gIH1cblxuICBxdWF0QW5nbGVfKHExLCBxMikge1xuICAgIGxldCB2ZWMxID0gWzAsIDAsIC0xXTtcbiAgICBsZXQgdmVjMiA9IFswLCAwLCAtMV07XG4gICAgdmVjMy50cmFuc2Zvcm1RdWF0KHZlYzEsIHZlYzEsIHExKTtcbiAgICB2ZWMzLnRyYW5zZm9ybVF1YXQodmVjMiwgdmVjMiwgcTIpO1xuICAgIHJldHVybiB2ZWMzLmFuZ2xlKHZlYzEsIHZlYzIpO1xuICB9XG59IiwiLypcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IEdhbWVwYWRNYXBwaW5ncyBmcm9tICcuL0dhbWVwYWRNYXBwaW5ncyc7XG5pbXBvcnQgWFJJbnB1dFNvdXJjZSBmcm9tICcuLi9hcGkvWFJJbnB1dFNvdXJjZSc7XG5pbXBvcnQgT3JpZW50YXRpb25Bcm1Nb2RlbCBmcm9tICcuL09yaWVudGF0aW9uQXJtTW9kZWwnO1xuaW1wb3J0IHtcbiAgdmVjMyxcbiAgcXVhdCxcbiAgbWF0NFxufSBmcm9tICdnbC1tYXRyaXgnO1xuXG5leHBvcnQgY29uc3QgUFJJVkFURSA9IFN5bWJvbCgnQEB3ZWJ4ci1wb2x5ZmlsbC9YUlJlbWFwcGVkR2FtZXBhZCcpO1xuXG5jb25zdCBQTEFDRUhPTERFUl9CVVRUT04gPSB7IHByZXNzZWQ6IGZhbHNlLCB0b3VjaGVkOiBmYWxzZSwgdmFsdWU6IDAuMCB9O1xuT2JqZWN0LmZyZWV6ZShQTEFDRUhPTERFUl9CVVRUT04pO1xuXG5jbGFzcyBYUlJlbWFwcGVkR2FtZXBhZCB7XG4gIGNvbnN0cnVjdG9yKGdhbWVwYWQsIGRpc3BsYXksIG1hcCkge1xuICAgIGlmICghbWFwKSB7XG4gICAgICBtYXAgPSB7fTtcbiAgICB9XG5cbiAgICAvLyBBcHBseSB1c2VyLWFnZW50LXNwZWNpZmljIG92ZXJyaWRlcyB0byB0aGUgbWFwcGluZyB3aGVuIGFwcGxpY2FibGUuXG4gICAgaWYgKG1hcC51c2VyQWdlbnRPdmVycmlkZXMpIHtcbiAgICAgIGZvciAobGV0IGFnZW50IGluIG1hcC51c2VyQWdlbnRPdmVycmlkZXMpIHtcbiAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoYWdlbnQpKSB7XG4gICAgICAgICAgbGV0IG92ZXJyaWRlID0gbWFwLnVzZXJBZ2VudE92ZXJyaWRlc1thZ2VudF07XG5cbiAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gb3ZlcnJpZGUpIHtcbiAgICAgICAgICAgIGlmIChrZXkgaW4gbWFwKSB7XG4gICAgICAgICAgICAgIC8vIElmIHRoZSBrZXkgYWxyZWFkeSBleGlzdHMsIG1lcmdlIHRoZSBvdmVycmlkZSB2YWx1ZXMgaW50byB0aGVcbiAgICAgICAgICAgICAgLy8gZXhpc3RpbmcgZGljdGlvbmFyeS5cbiAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihtYXBba2V5XSwgb3ZlcnJpZGVba2V5XSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBJZiB0aGUgYmFzZSBtYXBwaW5nIGRvZXNuJ3QgaGF2ZSB0aGlzIGtleSwgaW5zZXJ0IHRoZSBvdmVycmlkZVxuICAgICAgICAgICAgICAvLyB2YWx1ZXMgd2hvbGVzYWxlLlxuICAgICAgICAgICAgICBtYXBba2V5XSA9IG92ZXJyaWRlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGF4ZXMgPSBuZXcgQXJyYXkobWFwLmF4ZXMgJiYgbWFwLmF4ZXMubGVuZ3RoID8gbWFwLmF4ZXMubGVuZ3RoIDogZ2FtZXBhZC5heGVzLmxlbmd0aCk7XG4gICAgbGV0IGJ1dHRvbnMgPSBuZXcgQXJyYXkobWFwLmJ1dHRvbnMgJiYgbWFwLmJ1dHRvbnMubGVuZ3RoID8gbWFwLmJ1dHRvbnMubGVuZ3RoIDogZ2FtZXBhZC5idXR0b25zLmxlbmd0aCk7XG5cbiAgICBsZXQgZ3JpcFRyYW5zZm9ybSA9IG51bGw7XG4gICAgaWYgKG1hcC5ncmlwVHJhbnNmb3JtKSB7XG4gICAgICBsZXQgb3JpZW50YXRpb24gPSBtYXAuZ3JpcFRyYW5zZm9ybS5vcmllbnRhdGlvbiB8fCBbMCwgMCwgMCwgMV07XG4gICAgICBncmlwVHJhbnNmb3JtID0gbWF0NC5jcmVhdGUoKTtcbiAgICAgIG1hdDQuZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24oXG4gICAgICAgIGdyaXBUcmFuc2Zvcm0sXG4gICAgICAgIHF1YXQubm9ybWFsaXplKG9yaWVudGF0aW9uLCBvcmllbnRhdGlvbiksXG4gICAgICAgIG1hcC5ncmlwVHJhbnNmb3JtLnBvc2l0aW9uIHx8IFswLCAwLCAwXVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgdGFyZ2V0UmF5VHJhbnNmb3JtID0gbnVsbDtcbiAgICBpZiAobWFwLnRhcmdldFJheVRyYW5zZm9ybSkge1xuICAgICAgbGV0IG9yaWVudGF0aW9uID0gIG1hcC50YXJnZXRSYXlUcmFuc2Zvcm0ub3JpZW50YXRpb24gfHwgWzAsIDAsIDAsIDFdO1xuICAgICAgdGFyZ2V0UmF5VHJhbnNmb3JtID0gbWF0NC5jcmVhdGUoKTtcbiAgICAgIG1hdDQuZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24oXG4gICAgICAgIHRhcmdldFJheVRyYW5zZm9ybSxcbiAgICAgICAgcXVhdC5ub3JtYWxpemUob3JpZW50YXRpb24sIG9yaWVudGF0aW9uKSxcbiAgICAgICAgbWFwLnRhcmdldFJheVRyYW5zZm9ybS5wb3NpdGlvbiB8fCBbMCwgMCwgMF1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IHByb2ZpbGVzID0gbWFwLnByb2ZpbGVzO1xuICAgIGlmIChtYXAuZGlzcGxheVByb2ZpbGVzKSB7XG4gICAgICBpZiAoZGlzcGxheS5kaXNwbGF5TmFtZSBpbiBtYXAuZGlzcGxheVByb2ZpbGVzKSB7XG4gICAgICAgIHByb2ZpbGVzID0gbWFwLmRpc3BsYXlQcm9maWxlc1tkaXNwbGF5LmRpc3BsYXlOYW1lXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzW1BSSVZBVEVdID0ge1xuICAgICAgZ2FtZXBhZCxcbiAgICAgIG1hcCxcbiAgICAgIHByb2ZpbGVzOiBwcm9maWxlcyB8fCBbZ2FtZXBhZC5pZF0sXG4gICAgICBtYXBwaW5nOiBtYXAubWFwcGluZyB8fCBnYW1lcGFkLm1hcHBpbmcsXG4gICAgICBheGVzLFxuICAgICAgYnV0dG9ucyxcbiAgICAgIGdyaXBUcmFuc2Zvcm0sXG4gICAgICB0YXJnZXRSYXlUcmFuc2Zvcm0sXG4gICAgfTtcblxuICAgIHRoaXMuX3VwZGF0ZSgpO1xuICB9XG5cbiAgX3VwZGF0ZSgpIHtcbiAgICBsZXQgZ2FtZXBhZCA9IHRoaXNbUFJJVkFURV0uZ2FtZXBhZDtcbiAgICBsZXQgbWFwID0gdGhpc1tQUklWQVRFXS5tYXA7XG5cbiAgICBsZXQgYXhlcyA9IHRoaXNbUFJJVkFURV0uYXhlcztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4ZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGlmIChtYXAuYXhlcyAmJiBpIGluIG1hcC5heGVzKSB7XG4gICAgICAgIGlmIChtYXAuYXhlc1tpXSA9PT0gbnVsbCkge1xuICAgICAgICAgIGF4ZXNbaV0gPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF4ZXNbaV0gPSBnYW1lcGFkLmF4ZXNbbWFwLmF4ZXNbaV1dO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBheGVzW2ldID0gZ2FtZXBhZC5heGVzW2ldO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtYXAuYXhlcyAmJiBtYXAuYXhlcy5pbnZlcnQpIHtcbiAgICAgIGZvciAobGV0IGF4aXMgb2YgbWFwLmF4ZXMuaW52ZXJ0KSB7XG4gICAgICAgIGlmIChheGlzIDwgYXhlcy5sZW5ndGgpIHtcbiAgICAgICAgICBheGVzW2F4aXNdICo9IC0xO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGJ1dHRvbnMgPSB0aGlzW1BSSVZBVEVdLmJ1dHRvbnM7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidXR0b25zLmxlbmd0aDsgKytpKSB7XG4gICAgICBpZiAobWFwLmJ1dHRvbnMgJiYgaSBpbiBtYXAuYnV0dG9ucykge1xuICAgICAgICBpZiAobWFwLmJ1dHRvbnNbaV0gPT09IG51bGwpIHtcbiAgICAgICAgICBidXR0b25zW2ldID0gUExBQ0VIT0xERVJfQlVUVE9OO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJ1dHRvbnNbaV0gPSBnYW1lcGFkLmJ1dHRvbnNbbWFwLmJ1dHRvbnNbaV1dO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidXR0b25zW2ldID0gZ2FtZXBhZC5idXR0b25zW2ldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCBpZCgpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBnZXQgX3Byb2ZpbGVzKCkge1xuICAgIHJldHVybiB0aGlzW1BSSVZBVEVdLnByb2ZpbGVzO1xuICB9XG5cbiAgZ2V0IGluZGV4KCkge1xuICAgIHJldHVybiAtMTsgXG4gIH1cblxuICBnZXQgY29ubmVjdGVkKCkge1xuICAgIHJldHVybiB0aGlzW1BSSVZBVEVdLmdhbWVwYWQuY29ubmVjdGVkO1xuICB9XG5cbiAgZ2V0IHRpbWVzdGFtcCgpIHtcbiAgICByZXR1cm4gdGhpc1tQUklWQVRFXS5nYW1lcGFkLnRpbWVzdGFtcDtcbiAgfVxuXG4gIGdldCBtYXBwaW5nKCkge1xuICAgIHJldHVybiB0aGlzW1BSSVZBVEVdLm1hcHBpbmc7XG4gIH1cblxuICBnZXQgYXhlcygpIHtcbiAgICByZXR1cm4gdGhpc1tQUklWQVRFXS5heGVzO1xuICB9XG5cbiAgZ2V0IGJ1dHRvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXNbUFJJVkFURV0uYnV0dG9ucztcbiAgfVxuXG4gIC8vIE5vbi1zdGFuZGFyZCBleHRlbnNpb25cbiAgZ2V0IGhhcHRpY0FjdHVhdG9ycygpIHtcbiAgICByZXR1cm4gdGhpc1tQUklWQVRFXS5nYW1lcGFkLmhhcHRpY0FjdHVhdG9ycztcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lcGFkWFJJbnB1dFNvdXJjZSB7XG4gIGNvbnN0cnVjdG9yKHBvbHlmaWxsLCBkaXNwbGF5LCBwcmltYXJ5QnV0dG9uSW5kZXggPSAwLCBwcmltYXJ5U3F1ZWV6ZUJ1dHRvbkluZGV4ID0gLTEpIHtcbiAgICB0aGlzLnBvbHlmaWxsID0gcG9seWZpbGw7XG4gICAgdGhpcy5kaXNwbGF5ID0gZGlzcGxheTtcbiAgICB0aGlzLm5hdGl2ZUdhbWVwYWQgPSBudWxsO1xuICAgIHRoaXMuZ2FtZXBhZCA9IG51bGw7XG4gICAgdGhpcy5pbnB1dFNvdXJjZSA9IG5ldyBYUklucHV0U291cmNlKHRoaXMpO1xuICAgIHRoaXMubGFzdFBvc2l0aW9uID0gdmVjMy5jcmVhdGUoKTtcbiAgICB0aGlzLmVtdWxhdGVkUG9zaXRpb24gPSBmYWxzZTtcbiAgICB0aGlzLmJhc2VQb3NlTWF0cml4ID0gbWF0NC5jcmVhdGUoKTtcbiAgICB0aGlzLm91dHB1dE1hdHJpeCA9IG1hdDQuY3JlYXRlKCk7XG4gICAgdGhpcy5wcmltYXJ5QnV0dG9uSW5kZXggPSBwcmltYXJ5QnV0dG9uSW5kZXg7XG4gICAgdGhpcy5wcmltYXJ5QWN0aW9uUHJlc3NlZCA9IGZhbHNlO1xuICAgIHRoaXMucHJpbWFyeVNxdWVlemVCdXR0b25JbmRleCA9IHByaW1hcnlTcXVlZXplQnV0dG9uSW5kZXg7XG4gICAgdGhpcy5wcmltYXJ5U3F1ZWV6ZUFjdGlvblByZXNzZWQgPSBmYWxzZTtcbiAgICB0aGlzLmhhbmRlZG5lc3MgPSAnJztcbiAgICB0aGlzLnRhcmdldFJheU1vZGUgPSAnZ2F6ZSc7XG4gICAgdGhpcy5hcm1Nb2RlbCA9IG51bGw7XG4gIH1cblxuICBnZXQgcHJvZmlsZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2FtZXBhZCA/IHRoaXMuZ2FtZXBhZC5fcHJvZmlsZXMgOiBbXTtcbiAgfVxuXG4gIHVwZGF0ZUZyb21HYW1lcGFkKGdhbWVwYWQpIHtcbiAgICBpZiAodGhpcy5uYXRpdmVHYW1lcGFkICE9PSBnYW1lcGFkKSB7XG4gICAgICB0aGlzLm5hdGl2ZUdhbWVwYWQgPSBnYW1lcGFkO1xuICAgICAgaWYgKGdhbWVwYWQpIHtcbiAgICAgICAgdGhpcy5nYW1lcGFkID0gbmV3IFhSUmVtYXBwZWRHYW1lcGFkKGdhbWVwYWQsIHRoaXMuZGlzcGxheSwgR2FtZXBhZE1hcHBpbmdzW2dhbWVwYWQuaWRdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZ2FtZXBhZCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuaGFuZGVkbmVzcyA9IGdhbWVwYWQuaGFuZCA9PT0gJycgPyAnbm9uZScgOiBnYW1lcGFkLmhhbmRcblxuICAgIGlmICh0aGlzLmdhbWVwYWQpIHtcbiAgICAgIHRoaXMuZ2FtZXBhZC5fdXBkYXRlKCk7XG4gICAgfVxuXG4gICAgaWYgKGdhbWVwYWQucG9zZSkge1xuICAgICAgdGhpcy50YXJnZXRSYXlNb2RlID0gJ3RyYWNrZWQtcG9pbnRlcic7XG4gICAgICB0aGlzLmVtdWxhdGVkUG9zaXRpb24gPSAhZ2FtZXBhZC5wb3NlLmhhc1Bvc2l0aW9uO1xuICAgIH0gZWxzZSBpZiAoZ2FtZXBhZC5oYW5kID09PSAnJykge1xuICAgICAgdGhpcy50YXJnZXRSYXlNb2RlID0gJ2dhemUnO1xuICAgICAgdGhpcy5lbXVsYXRlZFBvc2l0aW9uID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlQmFzZVBvc2VNYXRyaXgoKSB7XG4gICAgaWYgKHRoaXMubmF0aXZlR2FtZXBhZCAmJiB0aGlzLm5hdGl2ZUdhbWVwYWQucG9zZSkge1xuICAgICAgbGV0IHBvc2UgPSB0aGlzLm5hdGl2ZUdhbWVwYWQucG9zZTtcbiAgICAgIGxldCBwb3NpdGlvbiA9IHBvc2UucG9zaXRpb247XG4gICAgICBsZXQgb3JpZW50YXRpb24gPSBwb3NlLm9yaWVudGF0aW9uO1xuICAgICAgLy8gT24gaW5pdGlhbGl6YXRpb24sIHdlIG1pZ2h0IG5vdCBoYXZlIGFueSB2YWx1ZXNcbiAgICAgIGlmICghcG9zaXRpb24gJiYgIW9yaWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghcG9zaXRpb24pIHtcbiAgICAgICAgaWYgKCFwb3NlLmhhc1Bvc2l0aW9uKSB7XG4gICAgICAgICAgaWYgKCF0aGlzLmFybU1vZGVsKSB7XG4gICAgICAgICAgICB0aGlzLmFybU1vZGVsID0gbmV3IE9yaWVudGF0aW9uQXJtTW9kZWwoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmFybU1vZGVsLnNldEhhbmRlZG5lc3ModGhpcy5uYXRpdmVHYW1lcGFkLmhhbmQpO1xuICAgICAgICAgIHRoaXMuYXJtTW9kZWwudXBkYXRlKG9yaWVudGF0aW9uLCB0aGlzLnBvbHlmaWxsLmdldEJhc2VQb3NlTWF0cml4KCkpO1xuICAgICAgICAgIHBvc2l0aW9uID0gdGhpcy5hcm1Nb2RlbC5nZXRQb3NpdGlvbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBvc2l0aW9uID0gdGhpcy5sYXN0UG9zaXRpb247XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFRoaXMgaXMgaWYgd2UgdGVtcG9yYXJpbHkgbG9zZSB0cmFja2luZywgc28gdGhlIGNvbnRyb2xsZXIgZG9lc24ndFxuICAgICAgICAvLyBzbmFwIGJhY2sgdG8gdGhlIG9yaWdpbi5cbiAgICAgICAgdGhpcy5sYXN0UG9zaXRpb25bMF0gPSBwb3NpdGlvblswXTtcbiAgICAgICAgdGhpcy5sYXN0UG9zaXRpb25bMV0gPSBwb3NpdGlvblsxXTtcbiAgICAgICAgdGhpcy5sYXN0UG9zaXRpb25bMl0gPSBwb3NpdGlvblsyXTtcbiAgICAgIH1cbiAgICAgIG1hdDQuZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24odGhpcy5iYXNlUG9zZU1hdHJpeCwgb3JpZW50YXRpb24sIHBvc2l0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWF0NC5jb3B5KHRoaXMuYmFzZVBvc2VNYXRyaXgsIHRoaXMucG9seWZpbGwuZ2V0QmFzZVBvc2VNYXRyaXgoKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmJhc2VQb3NlTWF0cml4O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7WFJSZWZlcmVuY2VTcGFjZX0gY29vcmRpbmF0ZVN5c3RlbVxuICAgKiBAcGFyYW0ge3N0cmluZ30gcG9zZVR5cGVcbiAgICogQHJldHVybiB7WFJQb3NlP31cbiAgICovXG4gIGdldFhSUG9zZShjb29yZGluYXRlU3lzdGVtLCBwb3NlVHlwZSkge1xuICAgIHRoaXMudXBkYXRlQmFzZVBvc2VNYXRyaXgoKTtcblxuICAgIHN3aXRjaChwb3NlVHlwZSkge1xuICAgICAgY2FzZSBcInRhcmdldC1yYXlcIjpcbiAgICAgICAgY29vcmRpbmF0ZVN5c3RlbS5fdHJhbnNmb3JtQmFzZVBvc2VNYXRyaXgodGhpcy5vdXRwdXRNYXRyaXgsIHRoaXMuYmFzZVBvc2VNYXRyaXgpO1xuICAgICAgICBpZiAodGhpcy5nYW1lcGFkICYmIHRoaXMuZ2FtZXBhZFtQUklWQVRFXS50YXJnZXRSYXlUcmFuc2Zvcm0pIHtcbiAgICAgICAgICBtYXQ0Lm11bHRpcGx5KHRoaXMub3V0cHV0TWF0cml4LCB0aGlzLm91dHB1dE1hdHJpeCwgdGhpcy5nYW1lcGFkW1BSSVZBVEVdLnRhcmdldFJheVRyYW5zZm9ybSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZ3JpcFwiOlxuICAgICAgICBpZiAoIXRoaXMubmF0aXZlR2FtZXBhZCB8fCAhdGhpcy5uYXRpdmVHYW1lcGFkLnBvc2UpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiBEb2VzIHRoZSBncmlwIG1hdHJpeCBuZWVkIHRvIGJlIHR3ZWFrZWQ/XG4gICAgICAgIGNvb3JkaW5hdGVTeXN0ZW0uX3RyYW5zZm9ybUJhc2VQb3NlTWF0cml4KHRoaXMub3V0cHV0TWF0cml4LCB0aGlzLmJhc2VQb3NlTWF0cml4KTtcbiAgICAgICAgaWYgKHRoaXMuZ2FtZXBhZCAmJiB0aGlzLmdhbWVwYWRbUFJJVkFURV0uZ3JpcFRyYW5zZm9ybSkge1xuICAgICAgICAgIG1hdDQubXVsdGlwbHkodGhpcy5vdXRwdXRNYXRyaXgsIHRoaXMub3V0cHV0TWF0cml4LCB0aGlzLmdhbWVwYWRbUFJJVkFURV0uZ3JpcFRyYW5zZm9ybSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb29yZGluYXRlU3lzdGVtLl9hZGp1c3RGb3JPcmlnaW5PZmZzZXQodGhpcy5vdXRwdXRNYXRyaXgpO1xuXG4gICAgcmV0dXJuIG5ldyBYUlBvc2UobmV3IFhSUmlnaWRUcmFuc2Zvcm0odGhpcy5vdXRwdXRNYXRyaXgpLCB0aGlzLmVtdWxhdGVkUG9zaXRpb24pO1xuICB9XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFdoZXRoZXIgb3IgYW4gSW1hZ2VCaXRNYXBSZW5kZXJpbmdDb250ZXh0IHNob3VsZCBiZSB1c2VkIHRvIHBvbHlmaWxsXG4gKiBhbiBYUlByZXNlbnRhdGlvbkNvbnRleHQuXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IGlzSW1hZ2VCaXRtYXBTdXBwb3J0ZWQgPSBnbG9iYWwgPT5cbiAgISEoZ2xvYmFsLkltYWdlQml0bWFwUmVuZGVyaW5nQ29udGV4dCAmJlxuICAgICBnbG9iYWwuY3JlYXRlSW1hZ2VCaXRtYXApO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBvciBub3QgdGhpcyBnbG9iYWwncyB1c2VyIGFnZW50IGlzXG4gKiBjb25zaWRlcmVkIGEgbW9iaWxlIGRldmljZS4gVGFrZW4gZnJvbSB3ZWJ2ci1wb2x5ZmlsbC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZ2xvYmFsXG4gKi9cbmV4cG9ydCBjb25zdCBpc01vYmlsZSA9IGdsb2JhbCA9PiB7XG4gIHZhciBjaGVjayA9IGZhbHNlO1xuICAoZnVuY3Rpb24oYSl7aWYoLyhhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWluby9pLnRlc3QoYSl8fC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pLnRlc3QoYS5zdWJzdHIoMCw0KSkpY2hlY2sgPSB0cnVlfSkoZ2xvYmFsLm5hdmlnYXRvci51c2VyQWdlbnR8fGdsb2JhbC5uYXZpZ2F0b3IudmVuZG9yfHxnbG9iYWwub3BlcmEpO1xuICByZXR1cm4gY2hlY2s7XG59O1xuXG5leHBvcnQgY29uc3QgYXBwbHlDYW52YXNTdHlsZXNGb3JNaW5pbWFsUmVuZGVyaW5nID0gY2FudmFzID0+IHtcbiAgY2FudmFzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICBjYW52YXMuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICBjYW52YXMuc3R5bGUud2lkdGggPSBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gJzFweCc7XG4gIGNhbnZhcy5zdHlsZS50b3AgPSBjYW52YXMuc3R5bGUubGVmdCA9ICcwcHgnO1xufTtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7XG4gIG1hdDRcbn0gZnJvbSAnZ2wtbWF0cml4JztcbmltcG9ydCBYUkRldmljZSBmcm9tICcuL1hSRGV2aWNlJztcbmltcG9ydCBHYW1lcGFkWFJJbnB1dFNvdXJjZSBmcm9tICcuL0dhbWVwYWRYUklucHV0U291cmNlJztcbmltcG9ydCB7XG4gIGlzSW1hZ2VCaXRtYXBTdXBwb3J0ZWQsXG4gIGFwcGx5Q2FudmFzU3R5bGVzRm9yTWluaW1hbFJlbmRlcmluZ1xufSBmcm9tICcuLi91dGlscyc7XG5cbmNvbnN0IFBSSVZBVEUgPSBTeW1ib2woJ0BAd2VieHItcG9seWZpbGwvV2ViVlJEZXZpY2UnKTtcbmNvbnN0IFRFU1RfRU5WID0gcHJvY2Vzcy5lbnYuQVBQX0VOViA9PT0gJ3Rlc3QnO1xuXG5jb25zdCBFWFRSQV9QUkVTRU5UQVRJT05fQVRUUklCVVRFUyA9IHtcbiAgLy8gTm9uLXN0YW5kYXJkIGF0dHJpYnV0ZSB0byBlbmFibGUgcnVubmluZyBhdCB0aGUgbmF0aXZlIGRldmljZSByZWZyZXNoIHJhdGVcbiAgLy8gb24gdGhlIE9jdWx1cyBHby5cbiAgaGlnaFJlZnJlc2hSYXRlOiB0cnVlLFxufTtcblxuLy8gSWYgYSBnYW1lcGFkIGlkIHN0cmluZyBpbmNsdWRlcyB0aGUgbmFtZSBvZiB0aGUga2V5IGZyb20gdGhlIG1hcCwgdGhlIGJ1dHRvblxuLy8gaW5kZXggZ2l2ZW4gd2lsbCBiZSB0aGUgb25lIHVzZWQgYXMgdGhhdCBjb250cm9sbGVyJ3MgcHJpbWFyeSBhY3Rpb24gYnV0dG9uXG4vLyByYXRoZXIgdGhhbiB0aGUgZGVmYXVsdCBvZiBidXR0b24gMC5cbmNvbnN0IFBSSU1BUllfQlVUVE9OX01BUCA9IHtcbiAgb2N1bHVzOiAxLFxuICBvcGVudnI6IDEsXG4gICdzcGF0aWFsIGNvbnRyb2xsZXIgKHNwYXRpYWwgaW50ZXJhY3Rpb24gc291cmNlKSc6IDFcbn07XG5cbi8qKlxuICogQSBTZXNzaW9uIGhlbHBlciBjbGFzcyB0byBtaXJyb3IgYW4gWFJTZXNzaW9uIGFuZCBjb3JyZWxhdGVcbiAqIGJldHdlZW4gYW4gWFJTZXNzaW9uLCBhbmQgdHJhY2tpbmcgc2Vzc2lvbnMgaW4gYSBYUkRldmljZS5cbiAqIE1vc3RseSByZWZlcmVuY2VkIHZpYSBgc2Vzc2lvbi5pZGAgZHVlIHRvIG5lZWRpbmcgdG8gdmVyaWZ5XG4gKiBzZXNzaW9uIGNyZWF0aW9uIGlzIHBvc3NpYmxlIG9uIHRoZSBYUkRldmljZSBiZWZvcmVcbiAqIHRoZSBYUlNlc3Npb24gY2FuIGJlIGNyZWF0ZWQuXG4gKi9cbmxldCBTRVNTSU9OX0lEID0gMDtcbmNsYXNzIFNlc3Npb24ge1xuICBjb25zdHJ1Y3Rvcihtb2RlLCBlbmFibGVkRmVhdHVyZXMsIHBvbHlmaWxsT3B0aW9ucz17fSkge1xuICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gICAgdGhpcy5lbmFibGVkRmVhdHVyZXMgPSBlbmFibGVkRmVhdHVyZXM7XG4gICAgdGhpcy5vdXRwdXRDb250ZXh0ID0gbnVsbDtcbiAgICB0aGlzLmltbWVyc2l2ZSA9IG1vZGUgPT0gJ2ltbWVyc2l2ZS12cicgfHwgbW9kZSA9PSAnaW1tZXJzaXZlLWFyJztcbiAgICB0aGlzLmVuZGVkID0gbnVsbDtcbiAgICB0aGlzLmJhc2VMYXllciA9IG51bGw7XG4gICAgdGhpcy5pZCA9ICsrU0VTU0lPTl9JRDtcbiAgICAvLyBBIGZsYWcgaW5kaWNhdGluZyB3aGV0aGVyIG9yIG5vdCB0aGUgY2FudmFzIHVzZWQgZm9yXG4gICAgLy8gWFJXZWJHTExheWVyIHdhcyBpbmplY3RlZCBpbnRvIHRoZSBET00gdG8gd29yayBhcm91bmRcbiAgICAvLyBGaXJlZm94IERlc2t0b3AgYnVnOiBodHRwczovL2J1Z3ppbC5sYS8xNDM1MzM5XG4gICAgdGhpcy5tb2RpZmllZENhbnZhc0xheWVyID0gZmFsc2U7XG5cbiAgICAvLyBTaW5jZSBYUlByZXNlbnRhdGlvbkNvbnRleHQgaXMgY3JlYXRlZCBvdXRzaWRlIG9mIHRoZSBtYWluIEFQSVxuICAgIC8vIGFuZCBkb2VzIG5vdCBleHBvc2UgdGhlIHJlYWwgMmQvYml0bWFwcmVuZGVyIGNvbnRleHQsIG1hbnVhbGx5IGZldGNoXG4gICAgLy8gaXQgYW5kIHN0b3JlIGl0LlxuICAgIGlmICh0aGlzLm91dHB1dENvbnRleHQgJiYgIVRFU1RfRU5WKSB7XG4gICAgICBjb25zdCByZW5kZXJDb250ZXh0VHlwZSA9IHBvbHlmaWxsT3B0aW9ucy5yZW5kZXJDb250ZXh0VHlwZSB8fCAnMmQnO1xuICAgICAgdGhpcy5yZW5kZXJDb250ZXh0ID0gdGhpcy5vdXRwdXRDb250ZXh0LmNhbnZhcy5nZXRDb250ZXh0KHJlbmRlckNvbnRleHRUeXBlKTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYlZSRGV2aWNlIGV4dGVuZHMgWFJEZXZpY2Uge1xuICAvKipcbiAgICogVGFrZXMgYSBWUkRpc3BsYXkgaW5zdGFuY2UgYW5kIGEgVlJGcmFtZURhdGFcbiAgICogY29uc3RydWN0b3IgZnJvbSB0aGUgV2ViVlIgMS4xIHNwZWMuXG4gICAqXG4gICAqIEBwYXJhbSB7VlJEaXNwbGF5fSBkaXNwbGF5XG4gICAqIEBwYXJhbSB7VlJGcmFtZURhdGF9IFZSRnJhbWVEYXRhXG4gICAqL1xuICBjb25zdHJ1Y3RvcihnbG9iYWwsIGRpc3BsYXkpIHtcbiAgICBjb25zdCB7IGNhblByZXNlbnQgfSA9IGRpc3BsYXkuY2FwYWJpbGl0aWVzO1xuICAgIHN1cGVyKGdsb2JhbCk7XG5cbiAgICB0aGlzLmRpc3BsYXkgPSBkaXNwbGF5O1xuICAgIHRoaXMuZnJhbWUgPSBuZXcgZ2xvYmFsLlZSRnJhbWVEYXRhKCk7XG4gICAgdGhpcy5zZXNzaW9ucyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmltbWVyc2l2ZVNlc3Npb24gPSBudWxsO1xuICAgIHRoaXMuY2FuUHJlc2VudCA9IGNhblByZXNlbnQ7XG4gICAgdGhpcy5iYXNlTW9kZWxNYXRyaXggPSBtYXQ0LmNyZWF0ZSgpO1xuICAgIHRoaXMuZ2FtZXBhZElucHV0U291cmNlcyA9IHt9O1xuICAgIHRoaXMudGVtcFZlYzMgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuXG4gICAgdGhpcy5vblZSRGlzcGxheVByZXNlbnRDaGFuZ2UgPSB0aGlzLm9uVlJEaXNwbGF5UHJlc2VudENoYW5nZS5iaW5kKHRoaXMpO1xuXG4gICAgZ2xvYmFsLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd2cmRpc3BsYXlwcmVzZW50Y2hhbmdlJywgdGhpcy5vblZSRGlzcGxheVByZXNlbnRDaGFuZ2UpO1xuXG4gICAgdGhpcy5DQU5fVVNFX0dBTUVQQUQgPSBnbG9iYWwubmF2aWdhdG9yICYmICgnZ2V0R2FtZXBhZHMnIGluIGdsb2JhbC5uYXZpZ2F0b3IpO1xuICAgIHRoaXMuSEFTX0JJVE1BUF9TVVBQT1JUID0gaXNJbWFnZUJpdG1hcFN1cHBvcnRlZChnbG9iYWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGdldCBkZXB0aE5lYXIoKSB7IHJldHVybiB0aGlzLmRpc3BsYXkuZGVwdGhOZWFyOyB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfVxuICAgKi9cbiAgc2V0IGRlcHRoTmVhcih2YWwpIHsgdGhpcy5kaXNwbGF5LmRlcHRoTmVhciA9IHZhbDsgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgZGVwdGhGYXIoKSB7IHJldHVybiB0aGlzLmRpc3BsYXkuZGVwdGhGYXI7IH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9XG4gICAqL1xuICBzZXQgZGVwdGhGYXIodmFsKSB7IHRoaXMuZGlzcGxheS5kZXB0aEZhciA9IHZhbDsgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhIFhSU2Vzc2lvbiBoYXMgYSBgYmFzZUxheWVyYCBwcm9wZXJ0eSBzZXQuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzZXNzaW9uSWRcbiAgICogQHBhcmFtIHtYUldlYkdMTGF5ZXJ9IGxheWVyXG4gICAqL1xuICBvbkJhc2VMYXllclNldChzZXNzaW9uSWQsIGxheWVyKSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbnMuZ2V0KHNlc3Npb25JZCk7XG4gICAgY29uc3QgY2FudmFzID0gbGF5ZXIuY29udGV4dC5jYW52YXM7XG5cbiAgICAvLyBJZiB3ZSdyZSBpbiBhbiBpbW1lcnNpdmUgc2Vzc2lvbiwgcmVwbGFjZSB0aGUgZHVtbXkgbGF5ZXIgb25cbiAgICAvLyB0aGUgMS4xIGRldmljZS5cbiAgICBpZiAoc2Vzc2lvbi5pbW1lcnNpdmUpIHtcbiAgICAgIC8vIFdhaXQgZm9yIHRoaXMgdG8gcmVzb2x2ZSBiZWZvcmUgc2V0dGluZyBzZXNzaW9uLmJhc2VMYXllcixcbiAgICAgIC8vIGJ1dCB3ZSBjYW4gc3RpbGwgc2FmZWx5IHJldHVybiB0aGlzIGZ1bmN0aW9uIHN5bmNocm9ub3VzbHlcbiAgICAgIC8vIFdlIGhhdmUgdG8gc2V0IHRoZSB1bmRlcmx5aW5nIGNhbnZhcyB0byB0aGUgc2l6ZVxuICAgICAgLy8gcmVxdWVzdGVkIGJ5IHRoZSAxLjEgZGV2aWNlLlxuICAgICAgY29uc3QgbGVmdCA9IHRoaXMuZGlzcGxheS5nZXRFeWVQYXJhbWV0ZXJzKCdsZWZ0Jyk7XG4gICAgICBjb25zdCByaWdodCA9IHRoaXMuZGlzcGxheS5nZXRFeWVQYXJhbWV0ZXJzKCdyaWdodCcpO1xuXG4gICAgICAvLyBHZW5lcmF0ZSBoZWlnaHQvd2lkdGggZHVlIHRvIG9wdGljcyBhcyBwZXIgMS4xIHNwZWNcbiAgICAgIGNhbnZhcy53aWR0aCA9IE1hdGgubWF4KGxlZnQucmVuZGVyV2lkdGgsIHJpZ2h0LnJlbmRlcldpZHRoKSAqIDI7XG4gICAgICBjYW52YXMuaGVpZ2h0ID0gTWF0aC5tYXgobGVmdC5yZW5kZXJIZWlnaHQsIHJpZ2h0LnJlbmRlckhlaWdodCk7XG4gICAgICB0aGlzLmRpc3BsYXkucmVxdWVzdFByZXNlbnQoW3tcbiAgICAgICAgICBzb3VyY2U6IGNhbnZhcywgYXR0cmlidXRlczogRVhUUkFfUFJFU0VOVEFUSU9OX0FUVFJJQlVURVNcbiAgICAgICAgfV0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAvLyBJZiBjYW52YXMgaXMgbm90IGluIHRoZSBET00sIHdlIG11c3QgaW5qZWN0IGl0IGFueXdheSxcbiAgICAgICAgLy8gZHVlIHRvIGEgYnVnIGluIEZpcmVmb3ggRGVza3RvcCwgYW5kIGVuc3VyZSBpdCBpcyB2aXNpYmxlLFxuICAgICAgICAvLyBzbyBzdHlsZSBpdCB0byBiZSAxeDEgaW4gdGhlIHVwcGVyIGxlZnQgY29ybmVyLlxuICAgICAgICAvLyBodHRwczovL2J1Z3ppbC5sYS8xNDM1MzM5XG4gICAgICAgIC8vIE91ciB0ZXN0IGVudmlyb25tZW50IGRvZXNuJ3QgaGF2ZSB0aGUgY2FudmFzIHBhY2thZ2UsIHNraXBcbiAgICAgICAgLy8gaW4gdGVzdHMgZm9yIG5vdy5cbiAgICAgICAgaWYgKCFURVNUX0VOViAmJiAhdGhpcy5nbG9iYWwuZG9jdW1lbnQuYm9keS5jb250YWlucyhjYW52YXMpKSB7XG4gICAgICAgICAgc2Vzc2lvbi5tb2RpZmllZENhbnZhc0xheWVyID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmdsb2JhbC5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbnZhcyk7XG4gICAgICAgICAgYXBwbHlDYW52YXNTdHlsZXNGb3JNaW5pbWFsUmVuZGVyaW5nKGNhbnZhcyk7XG4gICAgICAgIH1cbiAgICAgICAgc2Vzc2lvbi5iYXNlTGF5ZXIgPSBsYXllcjtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBJZiBhIG5vbi1pbW1lcnNpdmUgc2Vzc2lvbiB0aGF0IGhhcyBhbiBvdXRwdXRDb250ZXh0XG4gICAgLy8gd2Ugb25seSBoYXZlIGEgbWFnaWMgd2luZG93LlxuICAgIGVsc2Uge1xuICAgICAgc2Vzc2lvbi5iYXNlTGF5ZXIgPSBsYXllcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSWYgYSAxLjEgVlJEaXNwbGF5IGNhbm5vdCBwcmVzZW50LCBpdCBjb3VsZCBiZSBhIDZET0YgZGV2aWNlXG4gICAqIHRoYXQgZG9lc24ndCBoYXZlIGl0cyBvd24gd2F5IHRvIHByZXNlbnQsIGJ1dCB1c2VkIGluIG1hZ2ljXG4gICAqIHdpbmRvdyBtb2RlLiBTbyBpbiBXZWJYUiBsaW5nbywgdGhpcyBjYW5ub3Qgc3VwcG9ydCBhblxuICAgKiBcImltbWVyc2l2ZVwiIHNlc3Npb24uXG4gICAqXG4gICAqIEBwYXJhbSB7WFJTZXNzaW9uTW9kZX0gbW9kZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNTZXNzaW9uU3VwcG9ydGVkKG1vZGUpIHtcbiAgICAvLyBBUiBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBXZWJWUkRldmljZVxuICAgIGlmIChtb2RlID09ICdpbW1lcnNpdmUtYXInKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChtb2RlID09ICdpbW1lcnNpdmUtdnInICYmIHRoaXMuY2FuUHJlc2VudCA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZlYXR1cmVEZXNjcmlwdG9yXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0ZlYXR1cmVTdXBwb3J0ZWQoZmVhdHVyZURlc2NyaXB0b3IpIHtcbiAgICBzd2l0Y2goZmVhdHVyZURlc2NyaXB0b3IpIHtcbiAgICAgIGNhc2UgJ3ZpZXdlcic6IHJldHVybiB0cnVlO1xuICAgICAgY2FzZSAnbG9jYWwnOiByZXR1cm4gdHJ1ZTtcbiAgICAgIGNhc2UgJ2xvY2FsLWZsb29yJzogcmV0dXJuIHRydWU7XG5cbiAgICAgIC8vIFRPRE86IFdlICpjYW4qIHN1cHBvcnQgJ2JvdW5kZWQtZmxvb3InIHJlZmVyZW5jZSBzcGFjZXMgd2l0aCB3aGF0IFdlYlZSXG4gICAgICAvLyBnaXZlcyB1cywgYnV0IGl0J2xsIHRha2Ugc29tZSBhZGRpdGlvbmFsIHdvcmsgYW5kIG1heSBoYXZlIHRyaWNreVxuICAgICAgLy8gdGltaW5nIGlzc3Vlcy5cbiAgICAgIGNhc2UgJ2JvdW5kZWQnOiByZXR1cm4gZmFsc2U7XG5cbiAgICAgIC8vICd1bmJvdW5kZWQnIGlzIHVubGlrZWx5IHRvIGV2ZXIgYmUgc3VwcG9ydGVkIGJ5IHRoZSBwb2x5ZmlsbCwgc2luY2VcbiAgICAgIC8vIGl0J3MgcHJldHR5IG11Y2ggaW1wb3NzaWJsZSB0byBkbyBjb3JyZWN0bHkgd2l0aG91dCBuYXRpdmUgc3VwcG9ydC5cbiAgICAgIGNhc2UgJ3VuYm91bmRlZCc6IHJldHVybiBmYWxzZTtcbiAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2Ugb2YgYSBzZXNzaW9uIElEIGlmIGNyZWF0aW5nIGEgc2Vzc2lvbiBpcyBzdWNjZXNzZnVsLlxuICAgKiBVc3VhbGx5IHVzZWQgdG8gc2V0IHVwIHByZXNlbnRhdGlvbiBpbiB0aGUgZGV2aWNlLlxuICAgKiBXZSBjYW4ndCBzdGFydCBwcmVzZW50aW5nIGluIGEgMS4xIGRldmljZSB1bnRpbCB3ZSBoYXZlIGEgY2FudmFzXG4gICAqIGxheWVyLCBzbyB1c2UgYSBkdW1teSBsYXllciB1bnRpbCBgb25CYXNlTGF5ZXJTZXRgIGlzIGNhbGxlZC5cbiAgICogTWF5IHJlamVjdCBpZiBzZXNzaW9uIGlzIG5vdCBzdXBwb3J0ZWQsIG9yIGlmIGFuIGVycm9yIGlzIHRocm93blxuICAgKiB3aGVuIGNhbGxpbmcgYHJlcXVlc3RQcmVzZW50YC5cbiAgICpcbiAgICogQHBhcmFtIHtYUlNlc3Npb25Nb2RlfSBtb2RlXG4gICAqIEBwYXJhbSB7U2V0PHN0cmluZz59IGVuYWJsZWRGZWF0dXJlc1xuICAgKiBAcmV0dXJuIHtQcm9taXNlPG51bWJlcj59XG4gICAqL1xuICBhc3luYyByZXF1ZXN0U2Vzc2lvbihtb2RlLCBlbmFibGVkRmVhdHVyZXMpIHtcbiAgICBpZiAoIXRoaXMuaXNTZXNzaW9uU3VwcG9ydGVkKG1vZGUpKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbiAgICB9XG5cbiAgICBsZXQgaW1tZXJzaXZlID0gbW9kZSA9PSAnaW1tZXJzaXZlLXZyJztcblxuICAgIC8vIElmIHdlJ3JlIGdvaW5nIHRvIHByZXNlbnQgdG8gZGV2aWNlLCBpbW1lZGlhdGVseSBjYWxsIGByZXF1ZXN0UHJlc2VudGBcbiAgICAvLyBzaW5jZSB0aGlzIG5lZWRzIHRvIGJlIGluc2lkZSBvZiBhIHVzZXIgZ2VzdHVyZSBmb3IgQ2FyZGJvYXJkXG4gICAgLy8gKHJlcXVpcmVzIGEgdXNlciBnZXN0dXJlIGZvciBgcmVxdWVzdEZ1bGxzY3JlZW5gKSwgYXMgd2VsbCBhc1xuICAgIC8vIFdlYlZSIDEuMSByZXF1aXJpbmcgdG8gYmUgaW4gYSB1c2VyIGdlc3R1cmUuIFVzZSBhIGR1bW15IGNhbnZhcyxcbiAgICAvLyB1bnRpbCB3ZSBnZXQgdGhlIHJlYWwgY2FudmFzIHRvIHByZXNlbnQgdmlhIGBvbkJhc2VMYXllclNldGAuXG4gICAgaWYgKGltbWVyc2l2ZSkge1xuICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5nbG9iYWwuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG5cbiAgICAgIC8vIE91ciB0ZXN0IGVudmlyb25tZW50IGRvZXNuJ3QgaGF2ZSB0aGUgY2FudmFzIHBhY2thZ2UsIG5vciB0aGlzXG4gICAgICAvLyByZXN0cmljdGlvbiwgc28gc2tpcC5cbiAgICAgIGlmICghVEVTVF9FTlYpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGFuZCBkaXNjYXJkIGEgY29udGV4dCB0byBhdm9pZFxuICAgICAgICAvLyBcIkRPTUV4Y2VwdGlvbjogTGF5ZXIgc291cmNlIG11c3QgaGF2ZSBhIFdlYkdMUmVuZGVyaW5nQ29udGV4dFwiXG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcpO1xuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5kaXNwbGF5LnJlcXVlc3RQcmVzZW50KFt7XG4gICAgICAgICAgc291cmNlOiBjYW52YXMsIGF0dHJpYnV0ZXM6IEVYVFJBX1BSRVNFTlRBVElPTl9BVFRSSUJVVEVTIH1dKTtcbiAgICB9XG5cbiAgICBjb25zdCBzZXNzaW9uID0gbmV3IFNlc3Npb24obW9kZSwgZW5hYmxlZEZlYXR1cmVzLCB7XG4gICAgICByZW5kZXJDb250ZXh0VHlwZTogdGhpcy5IQVNfQklUTUFQX1NVUFBPUlQgPyAnYml0bWFwcmVuZGVyZXInIDogJzJkJ1xuICAgIH0pO1xuXG4gICAgdGhpcy5zZXNzaW9ucy5zZXQoc2Vzc2lvbi5pZCwgc2Vzc2lvbik7XG5cbiAgICBpZiAoaW1tZXJzaXZlKSB7XG4gICAgICB0aGlzLmltbWVyc2l2ZVNlc3Npb24gPSBzZXNzaW9uO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdAQHdlYnhyLXBvbHlmaWxsL3ZyLXByZXNlbnQtc3RhcnQnLCBzZXNzaW9uLmlkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHNlc3Npb24uaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGxheS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spO1xuICB9XG5cbiAgZ2V0UHJpbWFyeUJ1dHRvbkluZGV4KGdhbWVwYWQpIHtcbiAgICBsZXQgcHJpbWFyeUJ1dHRvbiA9IDA7XG4gICAgbGV0IG5hbWUgPSBnYW1lcGFkLmlkLnRvTG93ZXJDYXNlKCk7XG4gICAgZm9yIChsZXQga2V5IGluIFBSSU1BUllfQlVUVE9OX01BUCkge1xuICAgICAgaWYgKG5hbWUuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICBwcmltYXJ5QnV0dG9uID0gUFJJTUFSWV9CVVRUT05fTUFQW2tleV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBNYWtlIHN1cmUgdGhlIGluZGV4IGlzIGFjdHVhbGx5IGluIHRoZSBidXR0b24gcmFuZ2UuXG4gICAgcmV0dXJuIE1hdGgubWluKHByaW1hcnlCdXR0b24sIGdhbWVwYWQuYnV0dG9ucy5sZW5ndGggLSAxKTtcbiAgfVxuXG4gIG9uRnJhbWVTdGFydChzZXNzaW9uSWQsIHJlbmRlclN0YXRlKSB7XG4gICAgdGhpcy5kaXNwbGF5LmRlcHRoTmVhciA9IHJlbmRlclN0YXRlLmRlcHRoTmVhcjtcbiAgICB0aGlzLmRpc3BsYXkuZGVwdGhGYXIgPSByZW5kZXJTdGF0ZS5kZXB0aEZhclxuXG4gICAgdGhpcy5kaXNwbGF5LmdldEZyYW1lRGF0YSh0aGlzLmZyYW1lKTtcblxuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb25zLmdldChzZXNzaW9uSWQpO1xuXG4gICAgaWYgKHNlc3Npb24uaW1tZXJzaXZlICYmIHRoaXMuQ0FOX1VTRV9HQU1FUEFEKSB7XG4gICAgICAvLyBVcGRhdGUgaW5wdXRzIGZyb20gZ2FtZXBhZCBkYXRhXG4gICAgICBsZXQgcHJldklucHV0U291cmNlcyA9IHRoaXMuZ2FtZXBhZElucHV0U291cmNlcztcbiAgICAgIHRoaXMuZ2FtZXBhZElucHV0U291cmNlcyA9IHt9O1xuICAgICAgbGV0IGdhbWVwYWRzID0gdGhpcy5nbG9iYWwubmF2aWdhdG9yLmdldEdhbWVwYWRzKCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdhbWVwYWRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGxldCBnYW1lcGFkID0gZ2FtZXBhZHNbaV07XG4gICAgICAgIC8vIFN1cHBvc2VkbHkgdGhlIGdhbWVwYWQncyBkaXNwbGF5SWQgc2hvdWxkIG1hdGNoIHRoZSBWUkRpc3BsYXkncyBpZCxcbiAgICAgICAgLy8gYnV0IGluIHByYWN0aWNlIGFueXRoaW5nIHdpdGggYSBub24temVybyBkaXNwbGF5SWQgaXMgYW4gWFJcbiAgICAgICAgLy8gY29udHJvbGxlciwgd2hpY2ggaXMgYWxtb3N0IGNlcnRhaW5seSBhc3NvY2lhdGVkIHdpdGggYW55IFZSRGlzcGxheVxuICAgICAgICAvLyB3ZSB3ZXJlIGFibGUgdG8gZ2V0LlxuICAgICAgICBpZiAoZ2FtZXBhZCAmJiBnYW1lcGFkLmRpc3BsYXlJZCA+IDApIHtcbiAgICAgICAgICAvLyBGb3VuZCBhIGdhbWVwYWQgaW5wdXQgc291cmNlIGZvciB0aGlzIGluZGV4LlxuICAgICAgICAgIGxldCBpbnB1dFNvdXJjZUltcGwgPSBwcmV2SW5wdXRTb3VyY2VzW2ldO1xuICAgICAgICAgIGlmICghaW5wdXRTb3VyY2VJbXBsKSB7XG4gICAgICAgICAgICBpbnB1dFNvdXJjZUltcGwgPSBuZXcgR2FtZXBhZFhSSW5wdXRTb3VyY2UodGhpcywgdGhpcy5kaXNwbGF5LCB0aGlzLmdldFByaW1hcnlCdXR0b25JbmRleChnYW1lcGFkKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlucHV0U291cmNlSW1wbC51cGRhdGVGcm9tR2FtZXBhZChnYW1lcGFkKTtcbiAgICAgICAgICB0aGlzLmdhbWVwYWRJbnB1dFNvdXJjZXNbaV0gPSBpbnB1dFNvdXJjZUltcGw7XG5cbiAgICAgICAgICAvLyBQcm9jZXNzIHRoZSBwcmltYXJ5IGFjdGlvbiBmb3IgdGhlIGNvbnRyb2xsZXJcbiAgICAgICAgICBpZiAoaW5wdXRTb3VyY2VJbXBsLnByaW1hcnlCdXR0b25JbmRleCAhPSAtMSkge1xuICAgICAgICAgICAgbGV0IHByaW1hcnlBY3Rpb25QcmVzc2VkID0gZ2FtZXBhZC5idXR0b25zW2lucHV0U291cmNlSW1wbC5wcmltYXJ5QnV0dG9uSW5kZXhdLnByZXNzZWQ7XG4gICAgICAgICAgICBpZiAocHJpbWFyeUFjdGlvblByZXNzZWQgJiYgIWlucHV0U291cmNlSW1wbC5wcmltYXJ5QWN0aW9uUHJlc3NlZCkge1xuICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoJ0BAd2VieHItcG9seWZpbGwvaW5wdXQtc2VsZWN0LXN0YXJ0JywgeyBzZXNzaW9uSWQ6IHNlc3Npb24uaWQsIGlucHV0U291cmNlOiBpbnB1dFNvdXJjZUltcGwuaW5wdXRTb3VyY2UgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFwcmltYXJ5QWN0aW9uUHJlc3NlZCAmJiBpbnB1dFNvdXJjZUltcGwucHJpbWFyeUFjdGlvblByZXNzZWQpIHtcbiAgICAgICAgICAgICAgLy8gVGhpcyB3aWxsIGFsc28gZmlyZSBhIHNlbGVjdCBldmVudFxuICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoJ0BAd2VieHItcG9seWZpbGwvaW5wdXQtc2VsZWN0LWVuZCcsIHsgc2Vzc2lvbklkOiBzZXNzaW9uLmlkLCBpbnB1dFNvdXJjZTogaW5wdXRTb3VyY2VJbXBsLmlucHV0U291cmNlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5wdXRTb3VyY2VJbXBsLnByaW1hcnlBY3Rpb25QcmVzc2VkID0gcHJpbWFyeUFjdGlvblByZXNzZWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpbnB1dFNvdXJjZUltcGwucHJpbWFyeVNxdWVlemVCdXR0b25JbmRleCAhPSAtMSkge1xuICAgICAgICAgICAgbGV0IHByaW1hcnlTcXVlZXplQWN0aW9uUHJlc3NlZCA9IGdhbWVwYWQuYnV0dG9uc1tpbnB1dFNvdXJjZUltcGwucHJpbWFyeVNxdWVlemVCdXR0b25JbmRleF0ucHJlc3NlZDtcbiAgICAgICAgICAgIGlmIChwcmltYXJ5U3F1ZWV6ZUFjdGlvblByZXNzZWQgJiYgIWlucHV0U291cmNlSW1wbC5wcmltYXJ5U3F1ZWV6ZUFjdGlvblByZXNzZWQpIHtcbiAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdAQHdlYnhyLXBvbHlmaWxsL2lucHV0LXNxdWVlemUtc3RhcnQnLCB7IHNlc3Npb25JZDogc2Vzc2lvbi5pZCwgaW5wdXRTb3VyY2U6IGlucHV0U291cmNlSW1wbC5pbnB1dFNvdXJjZSB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXByaW1hcnlTcXVlZXplQWN0aW9uUHJlc3NlZCAmJiBpbnB1dFNvdXJjZUltcGwucHJpbWFyeVNxdWVlemVBY3Rpb25QcmVzc2VkKSB7XG4gICAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBhbHNvIGZpcmUgYSBzZWxlY3QgZXZlbnRcbiAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdAQHdlYnhyLXBvbHlmaWxsL2lucHV0LXNxdWVlemUtZW5kJywgeyBzZXNzaW9uSWQ6IHNlc3Npb24uaWQsIGlucHV0U291cmNlOiBpbnB1dFNvdXJjZUltcGwuaW5wdXRTb3VyY2UgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnB1dFNvdXJjZUltcGwucHJpbWFyeVNxdWVlemVBY3Rpb25QcmVzc2VkID0gcHJpbWFyeVNxdWVlemVBY3Rpb25QcmVzc2VkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEBUT0RPIE91ciB0ZXN0IGVudmlyb25tZW50IGRvZXNuJ3QgaGF2ZSB0aGUgY2FudmFzIHBhY2thZ2UgZm9yIG5vdyxcbiAgICAvLyBidXQgdGhpcyBjb3VsZCBiZSBzb21ldGhpbmcgd2UgYWRkIHRvIHRoZSB0ZXN0cy5cbiAgICBpZiAoVEVTVF9FTlYpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgc2Vzc2lvbiBpcyBpbmxpbmUgbWFrZSBzdXJlIHRoZSBwcm9qZWN0aW9uIG1hdHJpeCBtYXRjaGVzIHRoZSBcbiAgICAvLyBhc3BlY3QgcmF0aW8gb2YgdGhlIHVuZGVybHlpbmcgV2ViR0wgY2FudmFzLlxuICAgIGlmICghc2Vzc2lvbi5pbW1lcnNpdmUgJiYgc2Vzc2lvbi5iYXNlTGF5ZXIpIHtcbiAgICAgIGNvbnN0IGNhbnZhcyA9IHNlc3Npb24uYmFzZUxheWVyLmNvbnRleHQuY2FudmFzO1xuICAgICAgLy8gVXBkYXRlIHRoZSBwcm9qZWN0aW9uIG1hdHJpeC5cbiAgICAgIG1hdDQucGVyc3BlY3RpdmUodGhpcy5mcmFtZS5sZWZ0UHJvamVjdGlvbk1hdHJpeCwgcmVuZGVyU3RhdGUuaW5saW5lVmVydGljYWxGaWVsZE9mVmlldyxcbiAgICAgICAgICBjYW52YXMud2lkdGgvY2FudmFzLmhlaWdodCwgcmVuZGVyU3RhdGUuZGVwdGhOZWFyLCByZW5kZXJTdGF0ZS5kZXB0aEZhcik7XG4gICAgfVxuICB9XG5cbiAgb25GcmFtZUVuZChzZXNzaW9uSWQpIHtcbiAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5zZXNzaW9ucy5nZXQoc2Vzc2lvbklkKTtcblxuICAgIC8vIERpc2NhcmQgaWYgdGhpcyBzZXNzaW9uIGlzIGFscmVhZHkgZW5kZWQsIG9yIGlmIGl0IGRvZXNcbiAgICAvLyBub3QgeWV0IGhhdmUgYSBiYXNlTGF5ZXIuXG4gICAgaWYgKHNlc3Npb24uZW5kZWQgfHwgIXNlc3Npb24uYmFzZUxheWVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgc2Vzc2lvbiBpcyBoYXMgYW4gb3V0cHV0Q29udGV4dCwgd2hldGhlciBtYWdpYyB3aW5kb3dcbiAgICAvLyBvciBtaXJyb3JpbmcgKHNlc3Npb24uaW1tZXJzaXZlID09PSB0cnVlKSwgY29weSB0aGUgYmFzZUxheWVyXG4gICAgLy8gcGl4ZWxzIHRvIHRoZSBYUlByZXNlbnRhdGlvbkNvbnRleHRcbiAgICAvLyBIb3dldmVyLCBhYm9ydCBpZiB0aGlzIGEgbWlycm9yZWQgY29udGV4dCwgYW5kIG91ciBWUkRpc3BsYXlcbiAgICAvLyBkb2VzIG5vdCBoYXZlIGFuIGV4dGVybmFsIGRpc3BsYXk7IHRoaXMga2lsbHMgcGVyZm9ybWFuY2UgcmF0aGVyXG4gICAgLy8gcXVpY2tseSBvbiBtb2JpbGUgZm9yIGEgY2FudmFzIHRoYXQncyBub3Qgc2Vlbi5cbiAgICBpZiAoc2Vzc2lvbi5vdXRwdXRDb250ZXh0ICYmXG4gICAgICAgICEoc2Vzc2lvbi5pbW1lcnNpdmUgJiYgIXRoaXMuZGlzcGxheS5jYXBhYmlsaXRpZXMuaGFzRXh0ZXJuYWxEaXNwbGF5KSkge1xuICAgICAgY29uc3QgbWlycm9yaW5nID1cbiAgICAgICAgc2Vzc2lvbi5pbW1lcnNpdmUgJiYgdGhpcy5kaXNwbGF5LmNhcGFiaWxpdGllcy5oYXNFeHRlcm5hbERpc3BsYXk7XG5cbiAgICAgIGNvbnN0IGlDYW52YXMgPSBzZXNzaW9uLmJhc2VMYXllci5jb250ZXh0LmNhbnZhcztcbiAgICAgIGNvbnN0IGlXaWR0aCA9IG1pcnJvcmluZyA/IGlDYW52YXMud2lkdGggLyAyIDogaUNhbnZhcy53aWR0aDtcbiAgICAgIGNvbnN0IGlIZWlnaHQgPSBpQ2FudmFzLmhlaWdodDtcblxuICAgICAgLy8gQFRPRE8gT3VyIHRlc3QgZW52aXJvbm1lbnQgZG9lc24ndCBoYXZlIHRoZSBjYW52YXMgcGFja2FnZSBmb3Igbm93LFxuICAgICAgLy8gYnV0IHRoaXMgY291bGQgYmUgc29tZXRoaW5nIHdlIGFkZCB0byB0aGUgdGVzdHMuXG4gICAgICBpZiAoIVRFU1RfRU5WKSB7XG4gICAgICAgIGNvbnN0IG9DYW52YXMgPSBzZXNzaW9uLm91dHB1dENvbnRleHQuY2FudmFzO1xuICAgICAgICBjb25zdCBvV2lkdGggPSBvQ2FudmFzLndpZHRoO1xuICAgICAgICBjb25zdCBvSGVpZ2h0ID0gb0NhbnZhcy5oZWlnaHQ7XG5cbiAgICAgICAgLy8gVGhlIHJlYWwgdW5kZXJseWluZyBSZW5kZXJDb250ZXh0IHRoYXQgd2lsbCBkaXNwbGF5IGNvbnRlbnRcbiAgICAgICAgLy8gZm9yIHRoZSBwb2x5ZmlsbGVkIFhSUHJlc2VudGF0aW9uQ29udGV4dFxuICAgICAgICBjb25zdCByZW5kZXJDb250ZXh0ID0gc2Vzc2lvbi5yZW5kZXJDb250ZXh0O1xuXG4gICAgICAgIC8vIElmIHdlJ3JlIHVzaW5nIGFuIEltYWdlQml0bWFwUmVuZGVyaW5nQ29udGV4dCBhcyBvdXIgWFJQcmVzZW50YXRpb25Db250ZXh0XG4gICAgICAgIGlmICh0aGlzLkhBU19CSVRNQVBfU1VQUE9SVCkge1xuICAgICAgICAgIC8vIElmIHRoZSBkZXZlbG9wZXIgaXMgdXNpbmcgYW4gT2Zmc2NyZWVuQ2FudmFzLCBhbmQgSW1hZ2VCaXRtYXBSZW5kZXJpbmdDb250ZXh0XG4gICAgICAgICAgLy8gaXMgc3VwcG9ydGVkLCB0cmFuc2ZlciB0aGUgYml0bWFwIGRpcmVjdGx5LlxuICAgICAgICAgIGlmIChpQ2FudmFzLnRyYW5zZmVyVG9JbWFnZUJpdG1hcCkge1xuICAgICAgICAgICAgcmVuZGVyQ29udGV4dC50cmFuc2ZlckZyb21JbWFnZUJpdG1hcChpQ2FudmFzLnRyYW5zZmVyVG9JbWFnZUJpdG1hcCgpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gT3RoZXJ3aXNlIHdlJ3JlIHVzaW5nIGFuIEhUTUxDYW52YXNFbGVtZW50LCBzbyB3ZSBhc3luYyBnZW5lcmF0ZVxuICAgICAgICAgIC8vIGEgYml0bWFwIGFuZCB0aGVuIHRyYW5zZmVyIHRoZSBiaXRtYXAgZGlyZWN0bHkuXG4gICAgICAgICAgLy8gQFRPRE8gZG9lcyB0aGlzIHRlY2huaXF1ZSByZXN1bHQgaW4gYWx3YXlzIGJlaW5nIGEgZnJhbWUgYmVoaW5kP1xuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5nbG9iYWwuY3JlYXRlSW1hZ2VCaXRtYXAoaUNhbnZhcywgMCwgMCwgaVdpZHRoLCBpSGVpZ2h0LCB7XG4gICAgICAgICAgICAgIHJlc2l6ZVdpZHRoOiBvV2lkdGgsXG4gICAgICAgICAgICAgIHJlc2l6ZUhlaWdodDogb0hlaWdodCxcbiAgICAgICAgICAgIH0pLnRoZW4oYml0bWFwID0+IHJlbmRlckNvbnRleHQudHJhbnNmZXJGcm9tSW1hZ2VCaXRtYXAoYml0bWFwKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgLy8gV2Ugd2FudCB0byByZW5kZXIgb25seSBoYWxmIG9mIHRoZSBsYXllciBjb250ZXh0IChsZWZ0IGV5ZSlcbiAgICAgICAgICAvLyBwcm9wb3J0aW9uYWwgdG8gdGhlIHNpemUgb2YgdGhlIG91dHB1dENvbnRleHQgY2FudmFzLlxuICAgICAgICAgIC8vIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIHN4LCBzeSwgc1dpZHRoLCBzSGVpZ2h0LCBkeCwgZHksIGRXaWR0aCwgZEhlaWdodCk7XG4gICAgICAgICAgcmVuZGVyQ29udGV4dC5kcmF3SW1hZ2UoaUNhbnZhcywgMCwgMCwgaVdpZHRoLCBpSGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsIDAsIG9XaWR0aCwgb0hlaWdodCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBPbmx5IHN1Ym1pdCBmcmFtZSBpZiB3ZSdyZSBwcmVzZW50aW5nIGFuIGltbWVyc2l2ZSBzZXNzaW9uLlxuICAgIC8vIG9uIGEgc2Vzc2lvbiB3aWxsIHN0YXJ0IHByZXNlbnRpbmcgaW4gMS4xIGJ1dCB3ZSBzdGlsbCBoYXZlXG4gICAgLy8gdG8gc2V0IHVwIHRoZSB3aWR0aC9oZWlnaHQgY29ycmVjdGx5IGFuZCB3YWl0IGZvciBgYmFzZUxheWVyYCB0b1xuICAgIC8vIGJlIHNldC5cbiAgICBpZiAoc2Vzc2lvbi5pbW1lcnNpdmUgJiYgc2Vzc2lvbi5iYXNlTGF5ZXIpIHtcbiAgICAgIHRoaXMuZGlzcGxheS5zdWJtaXRGcmFtZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlXG4gICAqL1xuICBjYW5jZWxBbmltYXRpb25GcmFtZShoYW5kbGUpIHtcbiAgICB0aGlzLmRpc3BsYXkuY2FuY2VsQW5pbWF0aW9uRnJhbWUoaGFuZGxlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAVE9ETyBTcGVjXG4gICAqL1xuICBhc3luYyBlbmRTZXNzaW9uKHNlc3Npb25JZCkge1xuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb25zLmdldChzZXNzaW9uSWQpO1xuXG4gICAgaWYgKHNlc3Npb24uZW5kZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGlzIGlzIGFuIGltbWVyc2l2ZSBzZXNzaW9uLCBlbmQgcHJlc2VudGluZztcbiAgICAvLyB0aGUgdnJkaXNwbGF5cHJlc2VudGNoYW5nZSBldmVudCB3aWxsIGZsaXAgdGhlIGBlbmRlZGAgYml0LlxuICAgIGlmIChzZXNzaW9uLmltbWVyc2l2ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheS5leGl0UHJlc2VudCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXNzaW9uLmVuZGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNlc3Npb25JZFxuICAgKiBAcGFyYW0ge1hSUmVmZXJlbmNlU3BhY2VUeXBlfSB0eXBlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBkb2VzU2Vzc2lvblN1cHBvcnRSZWZlcmVuY2VTcGFjZShzZXNzaW9uSWQsIHR5cGUpIHtcbiAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5zZXNzaW9ucy5nZXQoc2Vzc2lvbklkKTtcbiAgICBpZiAoc2Vzc2lvbi5lbmRlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiBzZXNzaW9uLmVuYWJsZWRGZWF0dXJlcy5oYXModHlwZSk7XG4gIH1cblxuICAvKipcbiAgICogSWYgdGhlIFZSRGlzcGxheSBoYXMgc3RhZ2UgcGFyYW1ldGVycywgY29udmVydCB0aGVtXG4gICAqIHRvIGFuIGFycmF5IG9mIFgsIFogcGFpcmluZ3MuXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdD99XG4gICAqL1xuICByZXF1ZXN0U3RhZ2VCb3VuZHMoKSB7XG4gICAgaWYgKHRoaXMuZGlzcGxheS5zdGFnZVBhcmFtZXRlcnMpIHtcbiAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5kaXNwbGF5LnN0YWdlUGFyYW1ldGVycy5zaXplWDtcbiAgICAgIGNvbnN0IGRlcHRoID0gdGhpcy5kaXNwbGF5LnN0YWdlUGFyYW1ldGVycy5zaXplWjtcbiAgICAgIGNvbnN0IGRhdGEgPSBbXTtcblxuICAgICAgZGF0YS5wdXNoKC13aWR0aCAvIDIpOyAvLyBYXG4gICAgICBkYXRhLnB1c2goLWRlcHRoIC8gMik7IC8vIFpcbiAgICAgIGRhdGEucHVzaCh3aWR0aCAvIDIpOyAvLyBYXG4gICAgICBkYXRhLnB1c2goLWRlcHRoIC8gMik7IC8vIFpcbiAgICAgIGRhdGEucHVzaCh3aWR0aCAvIDIpOyAvLyBYXG4gICAgICBkYXRhLnB1c2goZGVwdGggLyAyKTsgLy8gWlxuICAgICAgZGF0YS5wdXNoKC13aWR0aCAvIDIpOyAvLyBYXG4gICAgICBkYXRhLnB1c2goZGVwdGggLyAyKTsgLy8gWlxuXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgcmVzb2x2aW5nIHRvIGEgdHJhbnNmb3JtIGlmIFhSRGV2aWNlXG4gICAqIGNhbiBzdXBwb3J0IGZyYW1lIG9mIHJlZmVyZW5jZSBhbmQgcHJvdmlkZXMgaXRzIG93biB2YWx1ZXMuXG4gICAqIENhbiByZXNvbHZlIHRvIGB1bmRlZmluZWRgIGlmIHRoZSBwb2x5ZmlsbGVkIEFQSSBjYW4gcHJvdmlkZVxuICAgKiBhIGRlZmF1bHQuIFJlamVjdHMgaWYgdGhpcyBYUkRldmljZSBjYW5ub3RcbiAgICogc3VwcG9ydCB0aGUgZnJhbWUgb2YgcmVmZXJlbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge1hSRnJhbWVPZlJlZmVyZW5jZVR5cGV9IHR5cGVcbiAgICogQHBhcmFtIHtYUkZyYW1lT2ZSZWZlcmVuY2VPcHRpb25zfSBvcHRpb25zXG4gICAqIEByZXR1cm4ge1Byb21pc2U8ZmxvYXQzMnJyYXk+fVxuICAgKi9cbiAgYXN5bmMgcmVxdWVzdEZyYW1lT2ZSZWZlcmVuY2VUcmFuc2Zvcm0odHlwZSwgb3B0aW9ucykge1xuICAgIGlmICgodHlwZSA9PT0gJ2xvY2FsLWZsb29yJyB8fCB0eXBlID09PSAnYm91bmRlZC1mbG9vcicpICYmXG4gICAgICAgIHRoaXMuZGlzcGxheS5zdGFnZVBhcmFtZXRlcnMgJiZcbiAgICAgICAgdGhpcy5kaXNwbGF5LnN0YWdlUGFyYW1ldGVycy5zaXR0aW5nVG9TdGFuZGluZ1RyYW5zZm9ybSkge1xuICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheS5zdGFnZVBhcmFtZXRlcnMuc2l0dGluZ1RvU3RhbmRpbmdUcmFuc2Zvcm07XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtYUkV5ZX0gZXllXG4gICAqIEByZXR1cm4ge0Zsb2F0MzJBcnJheX1cbiAgICovXG4gIGdldFByb2plY3Rpb25NYXRyaXgoZXllKSB7XG4gICAgaWYgKGV5ZSA9PT0gJ2xlZnQnKSB7XG4gICAgICByZXR1cm4gdGhpcy5mcmFtZS5sZWZ0UHJvamVjdGlvbk1hdHJpeDtcbiAgICB9IGVsc2UgaWYgKGV5ZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgcmV0dXJuIHRoaXMuZnJhbWUucmlnaHRQcm9qZWN0aW9uTWF0cml4O1xuICAgIH0gZWxzZSBpZiAoZXllID09PSAnbm9uZScpIHtcbiAgICAgIHJldHVybiB0aGlzLmZyYW1lLmxlZnRQcm9qZWN0aW9uTWF0cml4O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGV5ZSBtdXN0IGJlIG9mIHR5cGUgJ2xlZnQnIG9yICdyaWdodCdgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGFrZXMgYSBYUkV5ZSBhbmQgYSB0YXJnZXQgdG8gYXBwbHkgcHJvcGVydGllcyBvZlxuICAgKiBgeGAsIGB5YCwgYHdpZHRoYCBhbmQgYGhlaWdodGAgb24uIFJldHVybnMgYSBib29sZWFuXG4gICAqIGluZGljYXRpbmcgaWYgaXQgc3VjY2Vzc2Z1bGx5IHdhcyBhYmxlIHRvIHBvcHVsYXRlXG4gICAqIHRhcmdldCdzIHZhbHVlcy5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNlc3Npb25JZFxuICAgKiBAcGFyYW0ge1hSRXllfSBleWVcbiAgICogQHBhcmFtIHtYUldlYkdMTGF5ZXJ9IGxheWVyXG4gICAqIEBwYXJhbSB7T2JqZWN0P30gdGFyZ2V0XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBnZXRWaWV3cG9ydChzZXNzaW9uSWQsIGV5ZSwgbGF5ZXIsIHRhcmdldCkge1xuICAgIC8vIEBUT0RPIGNhbiB3ZSBoYXZlIGFub3RoZXIgbGF5ZXIgcGFzc2VkIGluIHRoYXRcbiAgICAvLyB3YXNuJ3QgdGhlIHNhbWUgb25lIGFzIHRoZSBgYmFzZUxheWVyYD9cblxuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb25zLmdldChzZXNzaW9uSWQpO1xuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gbGF5ZXIuY29udGV4dC5jYW52YXM7XG5cbiAgICAvLyBJZiB0aGlzIGlzIGEgbm9uLWltbWVyc2l2ZSBzZXNzaW9uLCByZXR1cm4gdGhlXG4gICAgLy8gd2hvbGUgY2FudmFzIGFzIHRoZSB2aWV3cG9ydFxuICAgIGlmICghc2Vzc2lvbi5pbW1lcnNpdmUpIHtcbiAgICAgIHRhcmdldC54ID0gdGFyZ2V0LnkgPSAwO1xuICAgICAgdGFyZ2V0LndpZHRoID0gd2lkdGg7XG4gICAgICB0YXJnZXQuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gV2ViR0wgMS4xIHZpZXdwb3J0cyBhcmUganVzdFxuICAgIGlmIChleWUgPT09ICdsZWZ0JyB8fCBleWUgPT09ICdub25lJykge1xuICAgICAgdGFyZ2V0LnggPSAwO1xuICAgIH0gZWxzZSBpZiAoZXllID09PSAncmlnaHQnKSB7XG4gICAgICB0YXJnZXQueCA9IHdpZHRoIC8gMjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRhcmdldC55ID0gMDtcbiAgICB0YXJnZXQud2lkdGggPSB3aWR0aCAvIDI7XG4gICAgdGFyZ2V0LmhlaWdodCA9IGhlaWdodDtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBtb2RlbCBtYXRyaXggdW5hZmZlY3RlZCBieSBmcmFtZSBvZiByZWZlcmVuY2UuXG4gICAqXG4gICAqIEByZXR1cm4ge0Zsb2F0MzJBcnJheX1cbiAgICovXG4gIGdldEJhc2VQb3NlTWF0cml4KCkge1xuICAgIGxldCB7IHBvc2l0aW9uLCBvcmllbnRhdGlvbiB9ID0gdGhpcy5mcmFtZS5wb3NlO1xuICAgIC8vIE9uIGluaXRpYWxpemF0aW9uLCB3ZSBtaWdodCBub3QgaGF2ZSBhbnkgdmFsdWVzXG4gICAgaWYgKCFwb3NpdGlvbiAmJiAhb3JpZW50YXRpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLmJhc2VNb2RlbE1hdHJpeDtcbiAgICB9XG4gICAgaWYgKCFwb3NpdGlvbikge1xuICAgICAgcG9zaXRpb24gPSB0aGlzLnRlbXBWZWMzO1xuICAgICAgcG9zaXRpb25bMF0gPSBwb3NpdGlvblsxXSA9IHBvc2l0aW9uWzJdID0gMDtcbiAgICB9XG4gICAgbWF0NC5mcm9tUm90YXRpb25UcmFuc2xhdGlvbih0aGlzLmJhc2VNb2RlbE1hdHJpeCwgb3JpZW50YXRpb24sIHBvc2l0aW9uKTtcbiAgICByZXR1cm4gdGhpcy5iYXNlTW9kZWxNYXRyaXg7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHZpZXcgbWF0cml4IHVuYWZmZWN0ZWQgYnkgZnJhbWUgb2YgcmVmZXJlbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge1hSRXllfSBleWVcbiAgICogQHJldHVybiB7RmxvYXQzMkFycmF5fVxuICAgKi9cbiAgZ2V0QmFzZVZpZXdNYXRyaXgoZXllKSB7XG4gICAgaWYgKGV5ZSA9PT0gJ2xlZnQnIHx8IGV5ZSA9PT0gJ25vbmUnKSB7XG4gICAgICByZXR1cm4gdGhpcy5mcmFtZS5sZWZ0Vmlld01hdHJpeDtcbiAgICB9IGVsc2UgaWYgKGV5ZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgcmV0dXJuIHRoaXMuZnJhbWUucmlnaHRWaWV3TWF0cml4O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGV5ZSBtdXN0IGJlIG9mIHR5cGUgJ2xlZnQnIG9yICdyaWdodCdgKTtcbiAgICB9XG4gIH1cblxuICBnZXRJbnB1dFNvdXJjZXMoKSB7XG4gICAgbGV0IGlucHV0U291cmNlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgaW4gdGhpcy5nYW1lcGFkSW5wdXRTb3VyY2VzKSB7XG4gICAgICBpbnB1dFNvdXJjZXMucHVzaCh0aGlzLmdhbWVwYWRJbnB1dFNvdXJjZXNbaV0uaW5wdXRTb3VyY2UpO1xuICAgIH1cbiAgICByZXR1cm4gaW5wdXRTb3VyY2VzO1xuICB9XG5cbiAgZ2V0SW5wdXRQb3NlKGlucHV0U291cmNlLCBjb29yZGluYXRlU3lzdGVtLCBwb3NlVHlwZSkge1xuICAgIGlmICghY29vcmRpbmF0ZVN5c3RlbSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSBpbiB0aGlzLmdhbWVwYWRJbnB1dFNvdXJjZXMpIHtcbiAgICAgIGxldCBpbnB1dFNvdXJjZUltcGwgPSB0aGlzLmdhbWVwYWRJbnB1dFNvdXJjZXNbaV07XG4gICAgICBpZiAoaW5wdXRTb3VyY2VJbXBsLmlucHV0U291cmNlID09PSBpbnB1dFNvdXJjZSkge1xuICAgICAgICByZXR1cm4gaW5wdXRTb3VyY2VJbXBsLmdldFhSUG9zZShjb29yZGluYXRlU3lzdGVtLCBwb3NlVHlwZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCBvbiB3aW5kb3cgcmVzaXplLlxuICAgKlxuICAgKi9cbiAgb25XaW5kb3dSZXNpemUoKSB7XG4gIH1cblxuICAvKipcbiAgICogTGlzdGVucyB0byB0aGUgTmF0aXZlIDEuMSBgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3ZyZGlzcGxheXByZXNlbnRjaGFuZ2UnKWBcbiAgICogZXZlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gICAqL1xuICBvblZSRGlzcGxheVByZXNlbnRDaGFuZ2UoZSkge1xuICAgIGlmICghdGhpcy5kaXNwbGF5LmlzUHJlc2VudGluZykge1xuICAgICAgdGhpcy5zZXNzaW9ucy5mb3JFYWNoKHNlc3Npb24gPT4ge1xuICAgICAgICBpZiAoc2Vzc2lvbi5pbW1lcnNpdmUgJiYgIXNlc3Npb24uZW5kZWQpIHtcbiAgICAgICAgICAvLyBJZiB3ZSBpbmplY3RlZCBhbmQgbW9kaWZpZWQgdGhlIGNhbnZhcyBsYXllclxuICAgICAgICAgIC8vIGR1ZSB0byBodHRwczovL2J1Z3ppbC5sYS8xNDM1MzM5LCB0aGVuIHJlbW92ZSBpdCBmcm9tIHRoZSBET01cbiAgICAgICAgICAvLyBhbmQgcmVtb3ZlIHN0eWxlcy5cbiAgICAgICAgICBpZiAoc2Vzc2lvbi5tb2RpZmllZENhbnZhc0xheWVyKSB7XG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBzZXNzaW9uLmJhc2VMYXllci5jb250ZXh0LmNhbnZhcztcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoY2FudmFzKTtcbiAgICAgICAgICAgIGNhbnZhcy5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJycpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy5pbW1lcnNpdmVTZXNzaW9uID09PSBzZXNzaW9uKSB7XG4gICAgICAgICAgICB0aGlzLmltbWVyc2l2ZVNlc3Npb24gPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoJ0BAd2VieHItcG9seWZpbGwvdnItcHJlc2VudC1lbmQnLCBzZXNzaW9uLmlkKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vLyBpbXBvcnQgQ2FyZGJvYXJkWFJEZXZpY2UgZnJvbSAnLi9kZXZpY2VzL0NhcmRib2FyZFhSRGV2aWNlJztcbmltcG9ydCBJbmxpbmVEZXZpY2UgZnJvbSAnLi9kZXZpY2VzL0lubGluZURldmljZSc7XG5pbXBvcnQgV2ViVlJEZXZpY2UgZnJvbSAnLi9kZXZpY2VzL1dlYlZSRGV2aWNlJztcblxuLy8gaW1wb3J0IHsgaXNNb2JpbGUgfSBmcm9tICcuL3V0aWxzJztcblxuLyoqXG4gKiBRdWVyaWVzIGJyb3dzZXIgdG8gc2VlIGlmIGFueSBWUkRpc3BsYXkgZXhpc3RzLlxuICogUmVzb2x2ZXMgdG8gYSBwb2x5ZmlsbGVkIFhSRGV2aWNlIG9yIG51bGwuXG4gKi9cbmNvbnN0IGdldFdlYlZSRGV2aWNlID0gYXN5bmMgZnVuY3Rpb24gKGdsb2JhbCkge1xuICBsZXQgZGV2aWNlID0gbnVsbDtcbiAgaWYgKCdnZXRWUkRpc3BsYXlzJyBpbiBnbG9iYWwubmF2aWdhdG9yKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRpc3BsYXlzID0gYXdhaXQgZ2xvYmFsLm5hdmlnYXRvci5nZXRWUkRpc3BsYXlzKCk7XG4gICAgICBpZiAoZGlzcGxheXMgJiYgZGlzcGxheXMubGVuZ3RoKSB7XG4gICAgICAgIGRldmljZSA9IG5ldyBXZWJWUkRldmljZShnbG9iYWwsIGRpc3BsYXlzWzBdKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7fVxuICB9XG5cbiAgcmV0dXJuIGRldmljZTtcbn07XG5cbi8qKlxuICogUmV0dXJuIGFuIFhSRGV2aWNlIGludGVyZmFjZSBiYXNlZCBvZmYgb2YgY29uZmlndXJhdGlvblxuICogYW5kIHBsYXRmb3JtLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBnbG9iYWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcbiAqIEByZXR1cm4ge1Byb21pc2U8WFJEZXZpY2U/Pn1cbiAqL1xuZXhwb3J0IGNvbnN0IHJlcXVlc3RYUkRldmljZSA9IGFzeW5jIGZ1bmN0aW9uIChnbG9iYWwsIGNvbmZpZykge1xuICAvLyBDaGVjayBmb3IgYSAxLjEgVlJEaXNwbGF5LlxuICBpZiAoY29uZmlnLndlYnZyKSB7XG4gICAgbGV0IHhyID0gYXdhaXQgZ2V0V2ViVlJEZXZpY2UoZ2xvYmFsKTtcbiAgICBpZiAoeHIpIHtcbiAgICAgIHJldHVybiB4cjtcbiAgICB9XG4gIH0vKlxuICAvLyBJZiBubyBXZWJWUiBkZXZpY2VzIGFyZSBwcmVzZW50LCBjaGVjayB0byBzZWUgaWYgYSBDYXJkYm9hcmQgZGV2aWNlIGlzXG4gIC8vIGFsbG93ZWQgYW5kIGlmIHNvIHJldHVybiB0aGF0LlxuICAvLyBUT0RPOiBUaGlzIHByb2JhYmx5IHJlcXVpcmVzIG1vcmUgY2hhbmdlcyB0byBhbGxvdyBjcmVhdGluZyBhblxuICAvLyBpbW1lcnNpdmUgc2Vzc2lvbiBpbiBhIGhlYWRzZXQgdGhhdCBnZXRzIGNvbm5lY3RlZCBsYXRlci5cbiAgbGV0IG1vYmlsZSA9IGlzTW9iaWxlKGdsb2JhbCk7XG4gIGlmICgobW9iaWxlICYmIGNvbmZpZy5jYXJkYm9hcmQpIHx8XG4gICAgICAoIW1vYmlsZSAmJiBjb25maWcuYWxsb3dDYXJkYm9hcmRPbkRlc2t0b3ApKSB7XG4gICAgLy8gSWYgd2UncmUgb24gQ2FyZGJvYXJkLCBtYWtlIHN1cmUgdGhhdCBWUkZyYW1lRGF0YSBpcyBhIGdsb2JhbFxuICAgIGlmICghZ2xvYmFsLlZSRnJhbWVEYXRhKSB7XG4gICAgICBnbG9iYWwuVlJGcmFtZURhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmlnaHRWaWV3TWF0cml4ID0gbmV3IEZsb2F0MzJBcnJheSgxNik7XG4gICAgICAgIHRoaXMubGVmdFZpZXdNYXRyaXggPSBuZXcgRmxvYXQzMkFycmF5KDE2KTtcbiAgICAgICAgdGhpcy5yaWdodFByb2plY3Rpb25NYXRyaXggPSBuZXcgRmxvYXQzMkFycmF5KDE2KTtcbiAgICAgICAgdGhpcy5sZWZ0UHJvamVjdGlvbk1hdHJpeCA9IG5ldyBGbG9hdDMyQXJyYXkoMTYpO1xuICAgICAgICB0aGlzLnBvc2UgPSBudWxsO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IENhcmRib2FyZFhSRGV2aWNlKGdsb2JhbCwgY29uZmlnLmNhcmRib2FyZENvbmZpZyk7XG4gIH0qL1xuXG4gIC8vIElubGluZSBzZXNzaW9ucyBhcmUgYWx3YXlzIGFsbG93ZWQsIHNvIGlmIG5vIG90aGVyIGRldmljZSBpcyBhdmFpbGFibGVcbiAgLy8gY3JlYXRlIG9uZSB0aGF0IG9ubHkgc3VwcG9ydHMgc2Vuc29ybGVzcyBpbmxpbmUgc2Vzc2lvbnMuXG4gIHJldHVybiBuZXcgSW5saW5lRGV2aWNlKGdsb2JhbCk7XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgQVBJIGZyb20gJy4vYXBpL2luZGV4JztcbmltcG9ydCB7XG4gIHBvbHlmaWxsTWFrZVhSQ29tcGF0aWJsZSxcbiAgcG9seWZpbGxHZXRDb250ZXh0XG59IGZyb20gJy4vcG9seWZpbGwtZ2xvYmFscyc7XG5pbXBvcnQgeyByZXF1ZXN0WFJEZXZpY2UgfSBmcm9tICcuL2RldmljZXMnO1xuXG5jb25zdCBHTE9CQUwgPSB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6XG4gICAgICAgICAgICAgICAgdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6XG4gICAgICAgICAgICAgICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB7fTtcblxuY29uc3QgQ09ORklHX0RFRkFVTFRTID0ge1xuICAvLyBUaGUgZGVmYXVsdCBnbG9iYWwgdG8gdXNlIGZvciBuZWVkZWQgQVBJcy5cbiAgZ2xvYmFsOiBHTE9CQUwsXG4gIC8vIFdoZXRoZXIgc3VwcG9ydCBmb3IgYSBicm93c2VyIGltcGxlbWVudGluZyBXZWJWUiAxLjEgaXMgZW5hYmxlZC5cbiAgLy8gSWYgZW5hYmxlZCwgWFIgc3VwcG9ydCBpcyBwb3dlcmVkIGJ5IG5hdGl2ZSBXZWJWUiAxLjEgVlJEaXNwbGF5cyxcbiAgLy8gZXhwb3NlZCBhcyBYUkRldmljZXMuXG4gIHdlYnZyOiB0cnVlLFxuICAvLyBXaGV0aGVyIGEgQ2FyZGJvYXJkWFJEZXZpY2Ugc2hvdWxkIGJlIGRpc2NvdmVyYWJsZSBpZiBvblxuICAvLyBhIG1vYmlsZSBkZXZpY2UsIGFuZCBubyBvdGhlciBuYXRpdmUgKDEuMSBWUkRpc3BsYXkgaWYgYHdlYnZyYCBvbixcbiAgLy8gb3IgWFJEZXZpY2UpIGZvdW5kLlxuICBjYXJkYm9hcmQ6IHRydWUsXG4gIC8vIFRoZSBjb25maWd1cmF0aW9uIHRvIGJlIHVzZWQgZm9yIENhcmRib2FyZFZSRGlzcGxheSB3aGVuIHVzZWQuXG4gIC8vIEhhcyBubyBlZmZlY3QgaWYgYGNhcmRib2FyZDogZmFsc2VgIG9yIGFub3RoZXIgWFJEZXZpY2UgaXMgdXNlZC5cbiAgLy8gQ29uZmlndXJhdGlvbiBjYW4gYmUgZm91bmQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9pbW1lcnNpdmUtd2ViL2NhcmRib2FyZC12ci1kaXNwbGF5L2Jsb2IvbWFzdGVyL3NyYy9vcHRpb25zLmpzXG4gIGNhcmRib2FyZENvbmZpZzogbnVsbCxcbiAgLy8gV2hldGhlciBhIENhcmRib2FyZFhSRGV2aWNlIHNob3VsZCBiZSBjcmVhdGVkIGlmIG5vIFdlYlhSIEFQSSBmb3VuZFxuICAvLyBvbiBkZXNrdG9wIG9yIG5vdC4gU3RlcmVvc2NvcGljIHJlbmRlcmluZyB3aXRoIGEgZ3lybyBvZnRlbiBkb2VzIG5vdCBtYWtlIHNlbnNlIG9uIGRlc2t0b3AsIGFuZCBwcm9iYWJseSBvbmx5IHVzZWZ1bCBmb3IgZGVidWdnaW5nLlxuICBhbGxvd0NhcmRib2FyZE9uRGVza3RvcDogZmFsc2UsXG59O1xuXG5jb25zdCBwYXJ0aWFscyA9IFsnbmF2aWdhdG9yJywgJ0hUTUxDYW52YXNFbGVtZW50JywgJ1dlYkdMUmVuZGVyaW5nQ29udGV4dCddO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWJYUlBvbHlmaWxsIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0P30gY29uZmlnXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb25maWc9e30pIHtcbiAgICB0aGlzLmNvbmZpZyA9IE9iamVjdC5mcmVlemUoT2JqZWN0LmFzc2lnbih7fSwgQ09ORklHX0RFRkFVTFRTLCBjb25maWcpKTtcbiAgICB0aGlzLmdsb2JhbCA9IHRoaXMuY29uZmlnLmdsb2JhbDtcbiAgICB0aGlzLm5hdGl2ZVdlYlhSID0gJ3hyJyBpbiB0aGlzLmdsb2JhbC5uYXZpZ2F0b3I7XG4gICAgdGhpcy5pbmplY3RlZCA9IGZhbHNlO1xuXG4gICAgLy8gSWYgbm8gbmF0aXZlIFdlYlhSIGltcGxlbWVudGF0aW9uIGZvdW5kLCBpbmplY3Qgb25lXG4gICAgaWYgKCF0aGlzLm5hdGl2ZVdlYlhSKSB7XG4gICAgICB0aGlzLl9pbmplY3RQb2x5ZmlsbCh0aGlzLmdsb2JhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2luamVjdENvbXBhdGliaWxpdHlTaGltcyh0aGlzLmdsb2JhbCk7XG4gICAgfVxuICB9XG5cbiAgX2luamVjdFBvbHlmaWxsKGdsb2JhbCkge1xuICAgIGlmICghcGFydGlhbHMuZXZlcnkoaWZhY2UgPT4gISFnbG9iYWxbaWZhY2VdKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBHbG9iYWwgbXVzdCBoYXZlIHRoZSBmb2xsb3dpbmcgYXR0cmlidXRlcyA6ICR7cGFydGlhbHN9YCk7XG4gICAgfVxuXG4gICAgLy8gQXBwbHkgY2xhc3NlcyBhcyBnbG9iYWxzXG4gICAgZm9yIChjb25zdCBjbGFzc05hbWUgb2YgT2JqZWN0LmtleXMoQVBJKSkge1xuICAgICAgaWYgKGdsb2JhbFtjbGFzc05hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGAke2NsYXNzTmFtZX0gYWxyZWFkeSBkZWZpbmVkIG9uIGdsb2JhbC5gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdsb2JhbFtjbGFzc05hbWVdID0gQVBJW2NsYXNzTmFtZV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVGVzdCBlbnZpcm9ubWVudCBkb2VzIG5vdCBoYXZlIHJlbmRlcmluZyBjb250ZXh0c1xuICAgIGlmIChwcm9jZXNzLmVudi5BUFBfRU5WICE9PSAndGVzdCcpIHtcbiAgICAgIC8vIEF0dGVtcHRzIHRvIHBvbHlmaWxsIFdlYkdMUmVuZGVyaW5nQ29udGV4dCdzIGBtYWtlWFJDb21wYXRpYmxlYFxuICAgICAgLy8gaWYgaXQgZG9lcyBub3QgZXhpc3QuXG4gICAgICBjb25zdCBwb2x5ZmlsbGVkQ3R4ID0gcG9seWZpbGxNYWtlWFJDb21wYXRpYmxlKGdsb2JhbC5XZWJHTFJlbmRlcmluZ0NvbnRleHQpO1xuXG4gICAgICAvLyBJZiB3ZSBwb2x5ZmlsbGVkIGBtYWtlWFJDb21wYXRpYmxlYCwgYWxzbyBwb2x5ZmlsbCB0aGUgY29udGV4dCBjcmVhdGlvblxuICAgICAgLy8gcGFyYW1ldGVyIGB7IHhyQ29tcGF0aWJsZSB9YC5cbiAgICAgIGlmIChwb2x5ZmlsbGVkQ3R4KSB7XG4gICAgICAgIHBvbHlmaWxsR2V0Q29udGV4dChnbG9iYWwuSFRNTENhbnZhc0VsZW1lbnQpO1xuXG4gICAgICAgIC8vIElmIE9mZnNjcmVlbkNhbnZhcyBpcyBhdmFpbGFibGUsIHBhdGNoIGl0cyBgZ2V0Q29udGV4dGAgbWV0aG9kIGFzIHdlbGxcbiAgICAgICAgLy8gZm9yIHRoZSBjb21wYXRpYmxlIFhSRGV2aWNlIGJpdC5cbiAgICAgICAgaWYgKGdsb2JhbC5PZmZzY3JlZW5DYW52YXMpIHtcbiAgICAgICAgICBwb2x5ZmlsbEdldENvbnRleHQoZ2xvYmFsLk9mZnNjcmVlbkNhbnZhcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB3ZSBuZWVkZWQgdG8gcG9seWZpbGwgV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBkbyB0aGUgc2FtZVxuICAgICAgICAvLyBmb3IgV2ViR0wyIGNvbnRleHRzIGlmIGl0IGV4aXN0cy5cbiAgICAgICAgaWYgKGdsb2JhbC5XZWJHTDJSZW5kZXJpbmdDb250ZXh0KXtcbiAgICAgICAgICBwb2x5ZmlsbE1ha2VYUkNvbXBhdGlibGUoZ2xvYmFsLldlYkdMMlJlbmRlcmluZ0NvbnRleHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF3aW5kb3cuaXNTZWN1cmVDb250ZXh0KSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBXZWJYUiBQb2x5ZmlsbCBXYXJuaW5nOlxuVGhpcyBwYWdlIGlzIG5vdCBydW5uaW5nIGluIGEgc2VjdXJlIGNvbnRleHQgKGh0dHBzOi8vIG9yIGxvY2FsaG9zdCkhXG5UaGlzIG1lYW5zIHRoYXQgYWx0aG91Z2ggdGhlIHBhZ2UgbWF5IGJlIGFibGUgdG8gdXNlIHRoZSBXZWJYUiBQb2x5ZmlsbCBpdCB3aWxsXG5ub3QgYmUgYWJsZSB0byB1c2UgbmF0aXZlIFdlYlhSIGltcGxlbWVudGF0aW9ucywgYW5kIGFzIHN1Y2ggd2lsbCBub3QgYmUgYWJsZSB0b1xuYWNjZXNzIGRlZGljYXRlZCBWUiBvciBBUiBoYXJkd2FyZSwgYW5kIHdpbGwgbm90IGJlIGFibGUgdG8gdGFrZSBhZHZhbnRhZ2Ugb2ZcbmFueSBwZXJmb3JtYW5jZSBpbXByb3ZlbWVudHMgYSBuYXRpdmUgV2ViWFIgaW1wbGVtZW50YXRpb24gbWF5IG9mZmVyLiBQbGVhc2Vcbmhvc3QgdGhpcyBjb250ZW50IG9uIGEgc2VjdXJlIG9yaWdpbiBmb3IgdGhlIGJlc3QgdXNlciBleHBlcmllbmNlLlxuYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmluamVjdGVkID0gdHJ1ZTtcblxuICAgIHRoaXMuX3BhdGNoTmF2aWdhdG9yWFIoKTtcbiAgfVxuXG4gIF9wYXRjaE5hdmlnYXRvclhSKCkge1xuICAgIC8vIFJlcXVlc3QgYSBwb2x5ZmlsbGVkIFhSRGV2aWNlLlxuICAgIGxldCBkZXZpY2VQcm9taXNlID0gcmVxdWVzdFhSRGV2aWNlKHRoaXMuZ2xvYmFsLCB0aGlzLmNvbmZpZyk7XG4gICAgY29uc29sZS5sb2coJ3BhdGNoIHhyIG5hdicpXG4gICAgLy8gQ3JlYXRlIGBuYXZpZ2F0b3IueHJgIGluc3RhbmNlIHBvcHVsYXRlZCB3aXRoIHRoZSBYUkRldmljZSBwcm9taXNlXG4gICAgLy8gcmVxdWVzdGVkIGFib3ZlLiBUaGUgcHJvbWlzZSByZXNvbHZlIHdpbGwgYmUgbW9uaXRvcmVkIGJ5IHRoZSBYUiBvYmplY3QuXG4gICAgdGhpcy54ciA9IG5ldyBBUEkuWFJTeXN0ZW0oZGV2aWNlUHJvbWlzZSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuZ2xvYmFsLm5hdmlnYXRvciwgJ3hyJywge1xuICAgICAgdmFsdWU6IHRoaXMueHIsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgfSk7XG4gIH1cblxuICBfaW5qZWN0Q29tcGF0aWJpbGl0eVNoaW1zKGdsb2JhbCkge1xuICAgIGlmICghcGFydGlhbHMuZXZlcnkoaWZhY2UgPT4gISFnbG9iYWxbaWZhY2VdKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBHbG9iYWwgbXVzdCBoYXZlIHRoZSBmb2xsb3dpbmcgYXR0cmlidXRlcyA6ICR7cGFydGlhbHN9YCk7XG4gICAgfVxuXG4gICAgLy8gUGF0Y2ggZm9yIENocm9tZSA3Ni03ODogZXhwb3NlZCBzdXBwb3J0c1Nlc3Npb24gcmF0aGVyIHRoYW5cbiAgICAvLyBpc1Nlc3Npb25TdXBwb3J0ZWQuIFdyYXBzIHRoZSBmdW5jdGlvbiB0byBlbnN1cmUgdGhlIHByb21pc2UgcHJvcGVybHlcbiAgICAvLyByZXNvbHZlcyB3aXRoIGEgYm9vbGVhbi5cbiAgICBpZiAoZ2xvYmFsLm5hdmlnYXRvci54ciAmJlxuICAgICAgICAnc3VwcG9ydHNTZXNzaW9uJyBpbiBnbG9iYWwubmF2aWdhdG9yLnhyICYmXG4gICAgICAgICEoJ2lzU2Vzc2lvblN1cHBvcnRlZCcgaW4gZ2xvYmFsLm5hdmlnYXRvci54cikpIHtcbiAgICAgIGxldCBvcmlnaW5hbFN1cHBvcnRzU2Vzc2lvbiA9IGdsb2JhbC5uYXZpZ2F0b3IueHIuc3VwcG9ydHNTZXNzaW9uO1xuICAgICAgZ2xvYmFsLm5hdmlnYXRvci54ci5pc1Nlc3Npb25TdXBwb3J0ZWQgPSBmdW5jdGlvbihtb2RlKSB7XG4gICAgICAgIHJldHVybiBvcmlnaW5hbFN1cHBvcnRzU2Vzc2lvbi5jYWxsKHRoaXMsIG1vZGUpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZ2xvYmFsLm5hdmlnYXRvci54ci5zdXBwb3J0c1Nlc3Npb24gPSBmdW5jdGlvbihtb2RlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIm5hdmlnYXRvci54ci5zdXBwb3J0c1Nlc3Npb24oKSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgXCIgK1xuICAgICAgICBcImNhbGwgbmF2aWdhdG9yLnhyLmlzU2Vzc2lvblN1cHBvcnRlZCgpIGluc3RlYWQgYW5kIGNoZWNrIHRoZSBib29sZWFuIFwiICtcbiAgICAgICAgXCJ2YWx1ZSByZXR1cm5lZCB3aGVuIHRoZSBwcm9taXNlIHJlc29sdmVzLlwiKTtcbiAgICAgICAgcmV0dXJuIG9yaWdpbmFsU3VwcG9ydHNTZXNzaW9uLmNhbGwodGhpcywgbW9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJleHBvcnQgY29uc3QgUFJJVkFURSA9IFN5bWJvbCgnQEB3ZWJ4ci1wb2x5ZmlsbC9YUlJheScpO1xuaW1wb3J0IFhSUmlnaWRUcmFuc2Zvcm0gZnJvbSAnLi4vd2VieHItcG9seWZpbGwvYXBpL1hSUmlnaWRUcmFuc2Zvcm0nO1xuaW1wb3J0IHtcbiAgdmVjMyxcbiAgdmVjNCxcbiAgbWF0NFxufSBmcm9tICdnbC1tYXRyaXgnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBYUlJheSB7XG4gIGNvbnN0cnVjdG9yKG9yaWdpbiwgZGlyZWN0aW9uKSB7XG4gICAgY29uc3QgX29yaWdpbiA9IHt4OiAwLCB5OiAwLCB6OiAwLCB3OiAxfTtcbiAgICBjb25zdCBfZGlyZWN0aW9uID0ge3g6IDAsIHk6IDAsIHo6IC0xLCB3OiAwfTtcblxuICAgIGlmIChvcmlnaW4gJiYgb3JpZ2luIGluc3RhbmNlb2YgWFJSaWdpZFRyYW5zZm9ybSkge1xuICAgICAgY29uc3QgdHJhbnNmb3JtID0gb3JpZ2luO1xuICAgICAgY29uc3QgbWF0cml4ID0gdHJhbnNmb3JtLm1hdHJpeDtcbiAgICAgIGNvbnN0IG9yaWdpblZlYzQgPSB2ZWM0LnNldCh2ZWM0LmNyZWF0ZSgpLCBfb3JpZ2luLngsIF9vcmlnaW4ueSwgX29yaWdpbi56LCBfb3JpZ2luLncpIDtcbiAgICAgIGNvbnN0IGRpcmVjdGlvblZlYzQgPSB2ZWM0LnNldCh2ZWM0LmNyZWF0ZSgpLCBfZGlyZWN0aW9uLngsIF9kaXJlY3Rpb24ueSwgX2RpcmVjdGlvbi56LCBfZGlyZWN0aW9uLncpO1xuICAgICAgdmVjNC50cmFuc2Zvcm1NYXQ0KG9yaWdpblZlYzQsIG9yaWdpblZlYzQsIG1hdHJpeCk7XG4gICAgICB2ZWM0LnRyYW5zZm9ybU1hdDQoZGlyZWN0aW9uVmVjNCwgZGlyZWN0aW9uVmVjNCwgbWF0cml4KTtcbiAgICAgIF9vcmlnaW4ueCA9IG9yaWdpblZlYzRbMF07XG4gICAgICBfb3JpZ2luLnkgPSBvcmlnaW5WZWM0WzFdO1xuICAgICAgX29yaWdpbi56ID0gb3JpZ2luVmVjNFsyXTtcbiAgICAgIF9vcmlnaW4udyA9IG9yaWdpblZlYzRbM107XG4gICAgICBfZGlyZWN0aW9uVmVjNC54ID0gZGlyZWN0aW9uVmVjNFswXTtcbiAgICAgIF9kaXJlY3Rpb25WZWM0LnkgPSBkaXJlY3Rpb25WZWM0WzFdO1xuICAgICAgX2RpcmVjdGlvblZlYzQueiA9IGRpcmVjdGlvblZlYzRbMl07XG4gICAgICBfZGlyZWN0aW9uVmVjNC53ID0gZGlyZWN0aW9uVmVjNFszXTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKG9yaWdpbikge1xuICAgICAgICBfb3JpZ2luLnggPSBvcmlnaW4ueDtcbiAgICAgICAgX29yaWdpbi55ID0gb3JpZ2luLnk7XG4gICAgICAgIF9vcmlnaW4ueiA9IG9yaWdpbi56O1xuICAgICAgICBfb3JpZ2luLncgPSBvcmlnaW4udztcbiAgICAgIH0gXG4gICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgIF9kaXJlY3Rpb24ueCA9IGRpcmVjdGlvbi54O1xuICAgICAgICBfZGlyZWN0aW9uLnkgPSBkaXJlY3Rpb24ueTtcbiAgICAgICAgX2RpcmVjdGlvbi56ID0gZGlyZWN0aW9uLno7XG4gICAgICAgIF9kaXJlY3Rpb24udyA9IGRpcmVjdGlvbi53O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5vcm1hbGl6ZSBkaXJlY3Rpb25cbiAgICBjb25zdCBsZW5ndGggPSBNYXRoLnNxcnQoX2RpcmVjdGlvbi54ICogX2RpcmVjdGlvbi54ICtcbiAgICAgIF9kaXJlY3Rpb24ueSAqIF9kaXJlY3Rpb24ueSArIF9kaXJlY3Rpb24ueiAqIF9kaXJlY3Rpb24ueikgfHwgMTtcbiAgICBfZGlyZWN0aW9uLnggPSBfZGlyZWN0aW9uLnggLyBsZW5ndGg7XG4gICAgX2RpcmVjdGlvbi55ID0gX2RpcmVjdGlvbi55IC8gbGVuZ3RoO1xuICAgIF9kaXJlY3Rpb24ueiA9IF9kaXJlY3Rpb24ueiAvIGxlbmd0aDtcblxuICAgIHRoaXNbUFJJVkFURV0gPSB7XG4gICAgICBvcmlnaW46IG5ldyBET01Qb2ludFJlYWRPbmx5KF9vcmlnaW4ueCwgX29yaWdpbi55LCBfb3JpZ2luLnosIF9vcmlnaW4udyksXG4gICAgICBkaXJlY3Rpb246IG5ldyBET01Qb2ludFJlYWRPbmx5KF9kaXJlY3Rpb24ueCwgX2RpcmVjdGlvbi55LCBfZGlyZWN0aW9uLnosIF9kaXJlY3Rpb24udyksXG4gICAgICBtYXRyaXg6IG51bGxcbiAgICB9O1xuICB9XG5cbiAgZ2V0IG9yaWdpbigpIHtcbiAgICByZXR1cm4gdGhpc1tQUklWQVRFXS5vcmlnaW47XG4gIH1cblxuICBnZXQgZGlyZWN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzW1BSSVZBVEVdLmRpcmVjdGlvbjtcbiAgfVxuXG4gIGdldCBtYXRyaXgoKSB7XG4gICAgaWYgKHRoaXNbUFJJVkFURV0ubWF0cml4KSB7XG4gICAgICByZXR1cm4gdGhpc1tQUklWQVRFXS5tYXRyaXg7XG4gICAgfVxuICAgIC8vIEBUT0RPOiBDaGVjayBpZiB0aGUgY2FsY3VsYXRpb24gaXMgY29ycmVjdFxuICAgIGNvbnN0IHogPSB2ZWMzLnNldCh2ZWMzLmNyZWF0ZSgpLCAwLCAwLCAtMSk7XG4gICAgY29uc3Qgb3JpZ2luID0gdmVjMy5zZXQodmVjMy5jcmVhdGUoKSxcbiAgICAgIHRoaXNbUFJJVkFURV0ub3JpZ2luLngsXG4gICAgICB0aGlzW1BSSVZBVEVdLm9yaWdpbi55LFxuICAgICAgdGhpc1tQUklWQVRFXS5vcmlnaW4uelxuICAgICk7XG4gICAgY29uc3QgZGlyZWN0aW9uID0gdmVjMy5zZXQodmVjMy5jcmVhdGUoKSxcbiAgICAgIHRoaXNbUFJJVkFURV0uZGlyZWN0aW9uLngsXG4gICAgICB0aGlzW1BSSVZBVEVdLmRpcmVjdGlvbi55LFxuICAgICAgdGhpc1tQUklWQVRFXS5kaXJlY3Rpb24uelxuICAgICk7XG4gICAgY29uc3QgYXhpcyA9IHZlYzMuY3Jvc3ModmVjMy5jcmVhdGUoKSwgZGlyZWN0aW9uLCB6KTtcbiAgICBjb25zdCBjb3NBbmdsZSA9IHZlYzMuZG90KGRpcmVjdGlvbiwgeik7XG4gICAgY29uc3Qgcm90YXRpb24gPSBtYXQ0LmNyZWF0ZSgpO1xuICAgIGlmIChjb3NBbmdsZSA+IC0xICYmIGNvc0FuZ2xlIDwgMSkge1xuICAgICAgbWF0NC5mcm9tUm90YXRpb24ocm90YXRpb24sIE1hdGguYWNvcyhjb3NBbmdsZSksIGF4aXMpO1xuICAgIH0gZWxzZSBpZiAoY29zQW5nbGUgPT09IC0xKSB7XG4gICAgICBtYXQ0LmZyb21Sb3RhdGlvbihyb3RhdGlvbiwgTWF0aC5hY29zKGNvc0FuZ2xlKSwgdmVjMy5zZXQodmVjMy5jcmVhdGUoKSwgMSwgMCwgMCkpO1xuICAgIH1cbiAgICBjb25zdCB0cmFuc2xhdGlvbiA9IG1hdDQuZnJvbVRyYW5zbGF0aW9uKG1hdDQuY3JlYXRlKCksIG9yaWdpbik7XG4gICAgY29uc3QgbWF0cml4ID0gbWF0NC5tdWx0aXBseShtYXQ0LmNyZWF0ZSgpLCB0cmFuc2xhdGlvbiwgcm90YXRpb24pO1xuICAgIHRoaXNbUFJJVkFURV0ubWF0cml4ID0gbWF0cml4O1xuICAgIHJldHVybiBtYXRyaXg7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBQUklWQVRFID0gU3ltYm9sKCdAQHdlYnhyLXBvbHlmaWxsL1hSSGl0VGVzdFNvdXJjZScpO1xuXG5pbXBvcnQgWFJSYXkgZnJvbSAnLi9YUlJheSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFhSSGl0VGVzdFNvdXJjZSB7XG4gIGNvbnN0cnVjdG9yKHNlc3Npb24sIG9wdGlvbnMpIHtcbiAgICAvLyBAVE9ETzogU3VwcG9ydCBvcHRpb25zLmVudGl0eVR5cGVzIGFuZCBvcHRpb25zLm9mZnNldFJheVxuICAgIGlmIChvcHRpb25zLmVudGl0eVR5cGVzICYmIG9wdGlvbnMuZW50aXR5VHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdYUkhpdFRlc3RTb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBlbnRpdHlUeXBlcyBvcHRpb24geWV0LicpO1xuICAgIH1cbiAgICB0aGlzW1BSSVZBVEVdID0ge1xuICAgICAgc2Vzc2lvbixcbiAgICAgIHNwYWNlOiBvcHRpb25zLnNwYWNlLFxuICAgICAgb2Zmc2V0UmF5OiBvcHRpb25zLm9mZnNldFJheSB8fCBuZXcgWFJSYXkoKSxcbiAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgIH07XG4gIH1cblxuICBjYW5jZWwoKSB7XG4gICAgLy8gQFRPRE86IFRocm93IEludmFsaWRTdGF0ZUVycm9yIGlmIGFjdGl2ZSBpcyBhbHJlYWR5IGZhbHNlXG4gICAgdGhpc1tQUklWQVRFXS5hY3RpdmUgPSBmYWxzZTtcbiAgfVxuXG4gIGdldCBfc3BhY2UoKSB7XG4gICAgcmV0dXJuIHRoaXNbUFJJVkFURV0uc3BhY2U7XG4gIH1cblxuICBnZXQgX3Nlc3Npb24oKSB7XG4gICAgcmV0dXJuIHRoaXNbUFJJVkFURV0uc2Vzc2lvbjtcbiAgfVxuXG4gIGdldCBfb2Zmc2V0UmF5KCkge1xuICAgIHJldHVybiB0aGlzW1BSSVZBVEVdLm9mZnNldFJheTtcbiAgfVxuXG4gIGdldCBfYWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzW1BSSVZBVEVdLmFjdGl2ZTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IFBSSVZBVEUgPSBTeW1ib2woJ0BAd2VieHItcG9seWZpbGwvWFJIaXRUZXN0UmVzdWx0Jyk7XG5pbXBvcnQgWFJTcGFjZSBmcm9tICcuLi93ZWJ4ci1wb2x5ZmlsbC9hcGkvWFJTcGFjZSc7XG5pbXBvcnQge1xuICBtYXQ0XG59IGZyb20gJ2dsLW1hdHJpeCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFhSSGl0VGVzdFJlc3VsdCB7XG4gIGNvbnN0cnVjdG9yKGZyYW1lLCB0cmFuc2Zvcm0pIHtcbiAgICB0aGlzW1BSSVZBVEVdID0ge1xuICAgICAgZnJhbWUsXG4gICAgICB0cmFuc2Zvcm1cbiAgICB9O1xuICB9XG5cbiAgZ2V0UG9zZShiYXNlU3BhY2UpIHtcbiAgICBjb25zdCBzcGFjZSA9IG5ldyBYUlNwYWNlKCk7XG4gICAgc3BhY2UuX2Jhc2VNYXRyaXggPSBtYXQ0LmNvcHkobWF0NC5jcmVhdGUoKSwgdGhpc1tQUklWQVRFXS50cmFuc2Zvcm0ubWF0cml4KTtcbiAgICByZXR1cm4gdGhpc1tQUklWQVRFXS5mcmFtZS5nZXRQb3NlKHNwYWNlLCBiYXNlU3BhY2UpO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgUFJJVkFURSA9IFN5bWJvbCgnQEB3ZWJ4ci1wb2x5ZmlsbC9YUlRyYW5zaWVudElucHV0SGl0VGVzdFNvdXJjZScpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBYUlRyYW5zaWVudElucHV0SGl0VGVzdFNvdXJjZSB7XG4gIGNvbnN0cnVjdG9yKHNlc3Npb24sIG9wdGlvbnMpIHtcbiAgICAvLyBAVE9ETzogU3VwcG9ydCBvcHRpb25zLmVudGl0eVR5cGVzIGFuZCBvcHRpb25zLm9mZnNldFJheVxuICAgIGlmIChvcHRpb25zLmVudGl0eVR5cGVzICYmIG9wdGlvbnMuZW50aXR5VHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdYUkhpdFRlc3RTb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBlbnRpdHlUeXBlcyBvcHRpb24geWV0LicpO1xuICAgIH1cbiAgICB0aGlzW1BSSVZBVEVdID0ge1xuICAgICAgc2Vzc2lvbixcbiAgICAgIHByb2ZpbGU6IG9wdGlvbnMucHJvZmlsZSxcbiAgICAgIG9mZnNldFJheTogb3B0aW9ucy5vZmZzZXRSYXkgfHwgbmV3IFhSUmF5KCksXG4gICAgICBhY3RpdmU6IHRydWVcbiAgICB9O1xuICB9XG5cbiAgY2FuY2VsKCkge1xuICAgIC8vIEBUT0RPOiBUaHJvdyBJbnZhbGlkU3RhdGVFcnJvciBpZiBhY3RpdmUgaXMgYWxyZWFkeSBmYWxzZVxuICAgIHRoaXNbUFJJVkFURV0uYWN0aXZlID0gZmFsc2U7XG4gIH1cblxuICBnZXQgX3Byb2ZpbGUoKSB7XG4gICAgcmV0dXJuIHRoaXNbUFJJVkFURV0ucHJvZmlsZTtcbiAgfVxuXG4gIGdldCBfc2Vzc2lvbigpIHtcbiAgICByZXR1cm4gdGhpc1tQUklWQVRFXS5zZXNzaW9uO1xuICB9XG5cbiAgZ2V0IF9vZmZzZXRSYXkoKSB7XG4gICAgcmV0dXJuIHRoaXNbUFJJVkFURV0ub2Zmc2V0UmF5O1xuICB9XG5cbiAgZ2V0IF9hY3RpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXNbUFJJVkFURV0uYWN0aXZlO1xuICB9XG59XG4iLCJpbXBvcnQgWFJQb3NlIGZyb20gJy4uL3dlYnhyLXBvbHlmaWxsL2FwaS9YUlBvc2UnO1xuXG5leHBvcnQgY29uc3QgUFJJVkFURSA9IFN5bWJvbCgnQEB3ZWJ4ci1wb2x5ZmlsbC9YUlRyYW5zaWVudElucHV0SGl0VGVzdFJlc3VsdCcpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBYUlRyYW5zaWVudElucHV0SGl0VGVzdFJlc3VsdCB7XG4gIGNvbnN0cnVjdG9yKGZyYW1lLCByZXN1bHRzLCBpbnB1dFNvdXJjZSkge1xuICAgIHRoaXNbUFJJVkFURV0gPSB7XG4gICAgICBmcmFtZSxcbiAgICAgIGlucHV0U291cmNlLFxuICAgICAgcmVzdWx0c1xuICAgIH07XG4gIH1cblxuICBnZXQgaW5wdXRTb3VyY2UoKSB7XG4gICAgcmV0dXJuIHRoaXNbUFJJVkFURV0uaW5wdXRTb3VyY2U7XG4gIH1cblxuICBnZXQgcmVzdWx0cygpIHtcbiAgICByZXR1cm4gdGhpc1tQUklWQVRFXS5yZXN1bHRzO1xuICB9XG59XG4iLCJpbXBvcnQgWFJIaXRUZXN0UmVzdWx0IGZyb20gJy4vWFJIaXRUZXN0UmVzdWx0JztcbmltcG9ydCBYUkhpdFRlc3RTb3VyY2UgZnJvbSAnLi9YUkhpdFRlc3RTb3VyY2UnO1xuaW1wb3J0IFhSVHJhbnNpZW50SW5wdXRIaXRUZXN0UmVzdWx0IGZyb20gJy4vWFJUcmFuc2llbnRJbnB1dEhpdFRlc3RSZXN1bHQnO1xuaW1wb3J0IFhSVHJhbnNpZW50SW5wdXRIaXRUZXN0U291cmNlIGZyb20gJy4vWFJUcmFuc2llbnRJbnB1dEhpdFRlc3RTb3VyY2UnO1xuaW1wb3J0IFhSUmF5IGZyb20gJy4vWFJSYXknO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIFhSSGl0VGVzdFJlc3VsdCxcbiAgWFJIaXRUZXN0U291cmNlLFxuICBYUlRyYW5zaWVudElucHV0SGl0VGVzdFJlc3VsdCxcbiAgWFJUcmFuc2llbnRJbnB1dEhpdFRlc3RTb3VyY2UsXG4gIFhSUmF5XG59O1xuIiwiaW1wb3J0IFhSRGV2aWNlIGZyb20gJy4vd2VieHItcG9seWZpbGwvZGV2aWNlcy9YUkRldmljZSc7XG4vLyBpbXBvcnQgWFJJbnB1dFNvdXJjZSBmcm9tICcuL3dlYnhyLXBvbHlmaWxsL2FwaS9YUklucHV0U291cmNlJztcbmltcG9ydCBYUlRyYW5zaWVudElucHV0SGl0VGVzdFNvdXJjZSBmcm9tICcuL2FwaS9YUlRyYW5zaWVudElucHV0SGl0VGVzdFNvdXJjZSc7XG5pbXBvcnQge1BSSVZBVEUgYXMgWFJTRVNTSU9OX1BSSVZBVEV9IGZyb20gJy4vd2VieHItcG9seWZpbGwvYXBpL1hSU2Vzc2lvbic7XG5pbXBvcnQgR2FtZXBhZFhSSW5wdXRTb3VyY2UgZnJvbSAnLi93ZWJ4ci1wb2x5ZmlsbC9kZXZpY2VzL0dhbWVwYWRYUklucHV0U291cmNlJztcbmltcG9ydCB7XG4gIHZlYzMsXG4gIHF1YXQsXG4gIG1hdDRcbn0gZnJvbSAnZ2wtbWF0cml4JztcbmltcG9ydCB7IEVuZ2luZUV2ZW50cyB9IGZyb20gJy4uLy4uL2Vjcy9jbGFzc2VzL0VuZ2luZUV2ZW50cyc7XG4vLyBpbXBvcnQgQVJTY2VuZSBmcm9tICcuL0FSU2NlbmUnO1xuXG5jb25zdCBERUZBVUxUX01PREVTID0gWydpbmxpbmUnXTtcblxuLy8gQFRPRE86IFRoaXMgdmFsdWUgc2hvdWxkIHNoYXJlZCB3aXRoIHBhbmVsLmpzP1xuY29uc3QgREVGQVVMVF9IRUFEU0VUX1BPU0lUSU9OID0gWzAsIDEuNiwgMF07XG5cbi8vIDEwMDAwIGlzIGZvciBBUiBTY2VuZVxuY29uc3QgRElWX1pfSU5ERVggPSAnOTk5OSc7XG5jb25zdCBET01fT1ZFUkxBWV9aX0lOREVYID0gJzEwMDAxJztcblxuLy8gRm9yIEFSXG5jb25zdCBERUZBVUxUX1JFU09MVVRJT04gPSB7d2lkdGg6IDEwMjQsIGhlaWdodDogMjA0OH07XG5jb25zdCBERUZBVUxUX0RFVklDRV9TSVpFID0ge3dpZHRoOiAwLjA1LCBoZWlnaHQ6IDAuMSwgZGVwdGg6IDAuMDA1fTtcblxuLy8gQFRPRE86IER1cGxpY2F0ZWQgd2l0aCBjb250ZW50LXNjcmlwdHMuanMuIE1vdmUgdG8gc29tZXdoZXJlIGNvbW1vbiBwbGFjZT9cbmNvbnN0IGRpc3BhdGNoQ3VzdG9tRXZlbnQgPSAodHlwZSwgZGV0YWlsKSA9PiB7XG4gIEVuZ2luZUV2ZW50cy5pbnN0YW5jZS5kaXNwYXRjaEV2ZW50KHsgXG4gICAgdHlwZSwgXG4gICAgZGV0YWlsOiB0eXBlb2YgY2xvbmVJbnRvICE9PSAndW5kZWZpbmVkJyA/IGNsb25lSW50byhkZXRhaWwsIHdpbmRvdykgOiBkZXRhaWwgXG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW11bGF0ZWRYUkRldmljZSBleHRlbmRzIFhSRGV2aWNlIHtcblxuICAvLyBAVE9ETzogd3JpdGUgY29uZmlnIHBhcmFtZXRlciBjb21tZW50XG5cbiAgY29uc3RydWN0b3IoZ2xvYmFsLCBjb25maWc9e30pIHtcbiAgICBzdXBlcihnbG9iYWwpO1xuXG4gICAgdGhpcy5zZXNzaW9ucyA9IG5ldyBNYXAoKTtcblxuICAgIHRoaXMubW9kZXMgPSBjb25maWcubW9kZXMgfHwgREVGQVVMVF9NT0RFUztcbiAgICB0aGlzLmZlYXR1cmVzID0gY29uZmlnLmZlYXR1cmVzIHx8IFtdO1xuXG4gICAgLy8gaGVhZHNldFxuICAgIHRoaXMucG9zaXRpb24gPSB2ZWMzLmNvcHkodmVjMy5jcmVhdGUoKSwgREVGQVVMVF9IRUFEU0VUX1BPU0lUSU9OKTtcbiAgICB0aGlzLnF1YXRlcm5pb24gPSBxdWF0LmNyZWF0ZSgpO1xuICAgIHRoaXMuc2NhbGUgPSB2ZWMzLmZyb21WYWx1ZXMoMSwgMSwgMSk7XG4gICAgdGhpcy5tYXRyaXggPSBtYXQ0LmNyZWF0ZSgpO1xuICAgIHRoaXMucHJvamVjdGlvbk1hdHJpeCA9IG1hdDQuY3JlYXRlKCk7XG4gICAgdGhpcy5sZWZ0UHJvamVjdGlvbk1hdHJpeCA9IG1hdDQuY3JlYXRlKCk7XG4gICAgdGhpcy5yaWdodFByb2plY3Rpb25NYXRyaXggPSBtYXQ0LmNyZWF0ZSgpO1xuICAgIHRoaXMudmlld01hdHJpeCA9IG1hdDQuY3JlYXRlKCk7XG4gICAgdGhpcy5sZWZ0Vmlld01hdHJpeCA9IG1hdDQuY3JlYXRlKCk7XG4gICAgdGhpcy5yaWdodFZpZXdNYXRyaXggPSBtYXQ0LmNyZWF0ZSgpO1xuXG4gICAgLy8gY29udHJvbGxlcnNcbiAgICB0aGlzLmdhbWVwYWRzID0gW107XG4gICAgdGhpcy5nYW1lcGFkSW5wdXRTb3VyY2VzID0gW107XG5cbiAgICAvLyBvdGhlciBjb25maWd1cmF0aW9uc1xuICAgIHRoaXMuc3RlcmVvRWZmZWN0RW5hYmxlZCA9IGNvbmZpZy5zdGVyZW9FZmZlY3QgIT09IHVuZGVmaW5lZCA/IGNvbmZpZy5zdGVyZW9FZmZlY3QgOiB0cnVlO1xuXG4gICAgLy8gQFRPRE86IEVkaXQgdGhpcyBjb21tZW50XG4gICAgLy8gRm9yIGNhc2Ugd2hlcmUgYmFzZUxheWVyJ3MgY2FudmFzIGlzbid0IGluIGRvY3VtZW50LmJvZHlcblxuICAgIHRoaXMuZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5kaXYuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHRoaXMuZGl2LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMuZGl2LnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB0aGlzLmRpdi5zdHlsZS50b3AgPSAnMCc7XG4gICAgdGhpcy5kaXYuc3R5bGUubGVmdCA9ICcwJztcbiAgICB0aGlzLmRpdi5zdHlsZS56SW5kZXggPSBESVZfWl9JTkRFWDsgLy8gVG8gb3ZlcnJpZGUgd2luZG93IG92ZXJhbGxcbiAgICB0aGlzLm9yaWdpbmFsQ2FudmFzUGFyYW1zID0ge1xuICAgICAgcGFyZW50RWxlbWVudDogbnVsbCxcbiAgICAgIHdpZHRoOiAwLFxuICAgICAgaGVpZ2h0OiAwXG4gICAgfTtcblxuICAgIC8vIEZvciBET00gb3ZlcmxheSBBUElcblxuICAgIHRoaXMuZG9tT3ZlcmxheVJvb3QgPSBudWxsO1xuXG4gICAgLy8gRm9yIEFSXG5cbiAgICAvLyBBc3N1bWluZyBhIGRldmljZSBzdXBwb3J0cyBhdCBtb3N0IGVpdGhlciBvbmUgVlIgb3IgQVJcbiAgICB0aGlzLmFyRGV2aWNlID0gdGhpcy5tb2Rlcy5pbmNsdWRlcygnaW1tZXJzaXZlLWFyJyk7XG4gICAgdGhpcy5yZXNvbHV0aW9uID0gY29uZmlnLnJlc29sdXRpb24gIT09IHVuZGVmaW5lZCA/IGNvbmZpZy5yZXNvbHV0aW9uIDogREVGQVVMVF9SRVNPTFVUSU9OO1xuICAgIHRoaXMuZGV2aWNlU2l6ZSA9IGNvbmZpZy5zaXplICE9PSB1bmRlZmluZWQgPyBjb25maWcuc2l6ZSA6IERFRkFVTFRfREVWSUNFX1NJWkU7XG4gICAgdGhpcy5hclNjZW5lID0gbnVsbDtcbiAgICB0aGlzLnRvdWNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLmlzUG9pbnRlckFuZFRhYmxlZENsb3NlRW5vdWdoID0gZmFsc2U7IC8vIFVHSC4uLiBAVE9ETzogUmVuYW1lXG5cbiAgICB0aGlzLmhpdFRlc3RTb3VyY2VzID0gW107XG4gICAgdGhpcy5oaXRUZXN0UmVzdWx0cyA9IG5ldyBNYXAoKTtcblxuICAgIHRoaXMuaGl0VGVzdFNvdXJjZXNGb3JUcmFuc2llbnRJbnB1dCA9IFtdO1xuICAgIHRoaXMuaGl0VGVzdFJlc3VsdHNGb3JUcmFuc2llbnRJbnB1dCA9IG5ldyBNYXAoKTtcblxuICAgIC8vXG4gICAgdGhpcy5faW5pdGlhbGl6ZUNvbnRyb2xsZXJzKGNvbmZpZyk7XG4gICAgdGhpcy5fc2V0dXBFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgb25CYXNlTGF5ZXJTZXQoc2Vzc2lvbklkLCBsYXllcikge1xuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb25zLmdldChzZXNzaW9uSWQpO1xuXG4gICAgLy8gUmVtb3ZlIG9sZCBjYW52YXMgZmlyc3RcbiAgICBpZiAoc2Vzc2lvbi5pbW1lcnNpdmUgJiYgc2Vzc2lvbi5iYXNlTGF5ZXIpIHtcbiAgICAgIHRoaXMuX3JlbW92ZUJhc2VMYXllckNhbnZhc0Zyb21EaXYoc2Vzc2lvbklkKTtcbiAgICB9XG5cbiAgICBzZXNzaW9uLmJhc2VMYXllciA9IGxheWVyO1xuICAgIGlmIChzZXNzaW9uLmltbWVyc2l2ZSAmJiBzZXNzaW9uLmJhc2VMYXllcikge1xuICAgICAgdGhpcy5fYXBwZW5kQmFzZUxheWVyQ2FudmFzVG9EaXYoc2Vzc2lvbklkKTtcbiAgICAgIGlmIChzZXNzaW9uLmFyKSB7XG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHNlc3Npb24uYmFzZUxheWVyLmNvbnRleHQuY2FudmFzO1xuICAgICAgICBjYW52YXMud2lkdGggPSB0aGlzLnJlc29sdXRpb24ud2lkdGg7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSB0aGlzLnJlc29sdXRpb24uaGVpZ2h0O1xuICAgICAgICB0aGlzLmFyU2NlbmUuc2V0Q2FudmFzKGNhbnZhcyk7XG4gICAgICAgIGlmIChjYW52YXMucGFyZW50RWxlbWVudCkge1xuICAgICAgICAgIC8vIE5vdCBzdXJlIHdoeSBidXQgdGhpcyBpcyBuZWNlc3NhcnkgZm9yIEZpcmVmb3guXG4gICAgICAgICAgLy8gT3RoZXJ3aXNlLCB0aGUgY2FudmFzIHdvbid0IGJlIHJlbmRlcmVkIGluIEFSIHNjZW5lLlxuICAgICAgICAgIC8vIEBUT0RPOiBGaWd1cmUgb3V0IHRoZSByb290IGlzc3VlIGFuZCByZXNvbHZlLlxuICAgICAgICAgIGNhbnZhcy5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGNhbnZhcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpc1Nlc3Npb25TdXBwb3J0ZWQobW9kZSkge1xuICAgIHJldHVybiB0aGlzLm1vZGVzLmluY2x1ZGVzKG1vZGUpO1xuICB9XG5cbiAgaXNGZWF0dXJlU3VwcG9ydGVkKGZlYXR1cmVEZXNjcmlwdG9yKSB7XG4gICAgaWYgKHRoaXMuZmVhdHVyZXMuaW5jbHVkZXMoZmVhdHVyZURlc2NyaXB0b3IpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgc3dpdGNoKGZlYXR1cmVEZXNjcmlwdG9yKSB7XG4gICAgICBjYXNlICd2aWV3ZXInOiByZXR1cm4gdHJ1ZTtcbiAgICAgIGNhc2UgJ2xvY2FsJzogcmV0dXJuIHRydWU7XG4gICAgICBjYXNlICdsb2NhbC1mbG9vcic6IHJldHVybiB0cnVlO1xuICAgICAgY2FzZSAnYm91bmRlZC1mbG9vcic6IHJldHVybiBmYWxzZTtcbiAgICAgIGNhc2UgJ3VuYm91bmRlZCc6IHJldHVybiBmYWxzZTtcbiAgICAgIGNhc2UgJ2RvbS1vdmVybGF5JzogcmV0dXJuIHRydWU7XG4gICAgICBkZWZhdWx0OiByZXR1cm4gZmFsc2U7IC8vIEBUT0RPOiBUaHJvdyBhbiBlcnJvcj9cbiAgICB9XG4gIH1cblxuICBhc3luYyByZXF1ZXN0U2Vzc2lvbihtb2RlLCBlbmFibGVkRmVhdHVyZXMpIHsgXG4gICAgaWYoIXRoaXMuaXNTZXNzaW9uU3VwcG9ydGVkKG1vZGUpKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbiAgICB9XG4gICAgY29uc3QgaW1tZXJzaXZlID0gbW9kZSA9PT0gJ2ltbWVyc2l2ZS12cicgfHwgbW9kZSA9PT0gJ2ltbWVyc2l2ZS1hcic7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IG5ldyBTZXNzaW9uKG1vZGUsIGVuYWJsZWRGZWF0dXJlcyk7XG4gICAgdGhpcy5zZXNzaW9ucy5zZXQoc2Vzc2lvbi5pZCwgc2Vzc2lvbik7XG4gICAgaWYgKG1vZGUgPT09ICdpbW1lcnNpdmUtYXInKSB7XG4gICAgICAvLyB3ZSBjdXJyZW50bHkgZG9uJ3Qgc3VwcG9ydCBBUiwgc28ga2VlcCB0aGluZ3Mgc2ltcGxlIGZvciBub3dcbiAgICAgIC8vIGlmICghdGhpcy5hclNjZW5lKSB7XG4gICAgICAvLyAgIHRoaXMuYXJTY2VuZSA9IG5ldyBBUlNjZW5lKHRoaXMuZGV2aWNlU2l6ZSk7XG4gICAgICAvLyAgIHRoaXMuX3JlcXVlc3RWaXJ0dWFsUm9vbUFzc2V0KCk7XG4gICAgICAvLyAgIHRoaXMuYXJTY2VuZS5vblRvdWNoID0gcG9zaXRpb24gPT4ge1xuICAgICAgLy8gICAgIHRoaXMudG91Y2hlZCA9IHRydWU7XG4gICAgICAvLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgIC8vICAgICAgIHRoaXMuZ2FtZXBhZHNbMF0ucG9zZS5wb3NpdGlvbltpXSA9IHBvc2l0aW9uW2ldO1xuICAgICAgLy8gICAgIH1cbiAgICAgIC8vICAgICB0aGlzLmFyU2NlbmUudXBkYXRlUG9pbnRlclRyYW5zZm9ybSh0aGlzLmdhbWVwYWRzWzBdLnBvc2UucG9zaXRpb24sIHRoaXMuZ2FtZXBhZHNbMF0ucG9zZS5vcmllbnRhdGlvbik7XG4gICAgICAvLyAgICAgdGhpcy5fbm90aWZ5SW5wdXRQb3NlVXBkYXRlKDApO1xuICAgICAgLy8gICB9O1xuICAgICAgLy8gICB0aGlzLmFyU2NlbmUub25SZWxlYXNlID0gKCkgPT4ge1xuICAgICAgLy8gICAgIHRoaXMudG91Y2hlZCA9IGZhbHNlO1xuICAgICAgLy8gICB9O1xuICAgICAgLy8gICB0aGlzLmFyU2NlbmUub25DYW1lcmFQb3NlVXBkYXRlID0gKHBvc2l0aW9uQXJyYXksIHF1YXRlcm5pb25BcnJheSkgPT4ge1xuICAgICAgLy8gICAgIHRoaXMuX3VwZGF0ZVBvc2UocG9zaXRpb25BcnJheSwgcXVhdGVybmlvbkFycmF5KTtcbiAgICAgIC8vICAgICB0aGlzLmFyU2NlbmUudXBkYXRlQ2FtZXJhVHJhbnNmb3JtKHBvc2l0aW9uQXJyYXksIHF1YXRlcm5pb25BcnJheSk7XG4gICAgICAvLyAgICAgdGhpcy5fbm90aWZ5UG9zZVVwZGF0ZSgpO1xuICAgICAgLy8gICB9O1xuICAgICAgLy8gICB0aGlzLmFyU2NlbmUub25UYWJsZXRQb3NlVXBkYXRlID0gKHBvc2l0aW9uQXJyYXksIHF1YXRlcm5pb25BcnJheSkgPT4ge1xuICAgICAgLy8gICAgIHRoaXMuX3VwZGF0ZUlucHV0UG9zZShwb3NpdGlvbkFycmF5LCBxdWF0ZXJuaW9uQXJyYXksIDEpO1xuICAgICAgLy8gICAgIHRoaXMuYXJTY2VuZS51cGRhdGVUYWJsZXRUcmFuc2Zvcm0ocG9zaXRpb25BcnJheSwgcXVhdGVybmlvbkFycmF5KTtcbiAgICAgIC8vICAgICB0aGlzLl9ub3RpZnlJbnB1dFBvc2VVcGRhdGUoMSk7XG4gICAgICAvLyAgIH07XG4gICAgICAvLyB9XG4gICAgICB0aGlzLmFyU2NlbmUuaW5qZWN0KHRoaXMuZGl2KTtcbiAgICB9XG4gICAgaWYgKGltbWVyc2l2ZSkge1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdAQHdlYnhyLXBvbHlmaWxsL3ZyLXByZXNlbnQtc3RhcnQnLCBzZXNzaW9uLmlkKTtcbiAgICAgIHRoaXMuX25vdGlmeUVudGVySW1tZXJzaXZlKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoc2Vzc2lvbi5pZCk7XG4gIH1cblxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5nbG9iYWwucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKTtcbiAgfVxuXG4gIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGhhbmRsZSkge1xuICAgIHRoaXMuZ2xvYmFsLmNhbmNlbEFuaW1hdGlvbkZyYW1lKGhhbmRsZSk7XG4gIH1cblxuICBvbkZyYW1lU3RhcnQoc2Vzc2lvbklkLCByZW5kZXJTdGF0ZSkge1xuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb25zLmdldChzZXNzaW9uSWQpO1xuICAgIC8vIGd1YXJhbnRlZWQgYnkgdGhlIGNhbGxlciB0aGF0IHNlc3Npb24uYmFzZUxheWVyIGlzIG5vdCBudWxsXG4gICAgY29uc3QgY29udGV4dCA9IHNlc3Npb24uYmFzZUxheWVyLmNvbnRleHQ7XG4gICAgY29uc3QgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgY29uc3QgbmVhciA9IHJlbmRlclN0YXRlLmRlcHRoTmVhcjtcbiAgICBjb25zdCBmYXIgPSByZW5kZXJTdGF0ZS5kZXB0aEZhcjtcbiAgICBjb25zdCB3aWR0aCA9IGNhbnZhcy53aWR0aDtcbiAgICBjb25zdCBoZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xuXG4gICAgLy8gSWYgc2Vzc2lvbiBpcyBub3QgYW4gaW5saW5lIHNlc3Npb24sIFhSV2ViR0xMYXllcidzIGNvbXBvc2l0aW9uIGRpc2FibGVkIGJvb2xlYW5cbiAgICAvLyBzaG91bGQgYmUgZmFsc2UgYW5kIHRoZW4gZnJhbWVidWZmZXIgc2hvdWxkIGJlIG1hcmtlZCBhcyBvcGFxdWUuXG4gICAgLy8gVGhlIGJ1ZmZlcnMgYXR0YWNoZWQgdG8gYW4gb3BhcXVlIGZyYW1lYnVmZmVyIG11c3QgYmUgY2xlYXJlZCBwcmlvciB0byB0aGVcbiAgICAvLyBwcm9jZXNzaW5nIG9mIGVhY2ggWFIgYW5pbWF0aW9uIGZyYW1lLlxuICAgIGlmIChzZXNzaW9uLmltbWVyc2l2ZSkge1xuICAgICAgY29uc3QgY3VycmVudENsZWFyQ29sb3IgPSBjb250ZXh0LmdldFBhcmFtZXRlcihjb250ZXh0LkNPTE9SX0NMRUFSX1ZBTFVFKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRDbGVhckRlcHRoID0gY29udGV4dC5nZXRQYXJhbWV0ZXIoY29udGV4dC5ERVBUSF9DTEVBUl9WQUxVRSk7XG4gICAgICBjb25zdCBjdXJyZW50Q2xlYXJTdGVuY2lsID0gY29udGV4dC5nZXRQYXJhbWV0ZXIoY29udGV4dC5TVEVOQ0lMX0NMRUFSX1ZBTFVFKTtcbiAgICAgIGNvbnRleHQuY2xlYXJDb2xvcigwLjAsIDAuMCwgMC4wLCAwLjApO1xuICAgICAgY29udGV4dC5jbGVhckRlcHRoKDEsMCk7XG4gICAgICBjb250ZXh0LmNsZWFyU3RlbmNpbCgwLjApO1xuICAgICAgY29udGV4dC5jbGVhcihjb250ZXh0LkRFUFRIX0JVRkZFUl9CSVQgfCBjb250ZXh0LkNPTE9SX0JVRkZFUl9CSVQgfCBjb250ZXh0LlNURU5DSUxfQlVGRkVSX0JJVCApO1xuICAgICAgY29udGV4dC5jbGVhckNvbG9yKGN1cnJlbnRDbGVhckNvbG9yWzBdLCBjdXJyZW50Q2xlYXJDb2xvclsxXSwgY3VycmVudENsZWFyQ29sb3JbMl0sIGN1cnJlbnRDbGVhckNvbG9yWzNdKTtcbiAgICAgIGNvbnRleHQuY2xlYXJEZXB0aChjdXJyZW50Q2xlYXJEZXB0aCk7XG4gICAgICBjb250ZXh0LmNsZWFyU3RlbmNpbChjdXJyZW50Q2xlYXJTdGVuY2lsKTtcbiAgICB9XG5cbiAgICBpZiAoc2Vzc2lvbi52cikge1xuICAgICAgLy8gQFRPRE86IHByb3BlciBGT1ZcbiAgICAgIGNvbnN0IGFzcGVjdCA9IHdpZHRoICogKHRoaXMuc3RlcmVvRWZmZWN0RW5hYmxlZCA/IDAuNSA6IDEuMCkgLyBoZWlnaHQ7XG4gICAgICBtYXQ0LnBlcnNwZWN0aXZlKHRoaXMubGVmdFByb2plY3Rpb25NYXRyaXgsIE1hdGguUEkgLyAyLCBhc3BlY3QsIG5lYXIsIGZhcik7XG4gICAgICBtYXQ0LnBlcnNwZWN0aXZlKHRoaXMucmlnaHRQcm9qZWN0aW9uTWF0cml4LCBNYXRoLlBJIC8gMiwgYXNwZWN0LCBuZWFyLCBmYXIpO1xuICAgIH0gZWxzZSBpZiAoc2Vzc2lvbi5hcikge1xuICAgICAgLy8gQFRPRE86IHByb3BlciBGT1ZcbiAgICAgIGNvbnN0IGFzcGVjdCA9IHRoaXMuZGV2aWNlU2l6ZS53aWR0aCAvIHRoaXMuZGV2aWNlU2l6ZS5oZWlnaHQ7XG4gICAgICBtYXQ0LnBlcnNwZWN0aXZlKHRoaXMucHJvamVjdGlvbk1hdHJpeCwgTWF0aC5QSSAvIDIsIGFzcGVjdCwgbmVhciwgZmFyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYXNwZWN0ID0gd2lkdGggLyBoZWlnaHQ7XG4gICAgICBtYXQ0LnBlcnNwZWN0aXZlKHRoaXMucHJvamVjdGlvbk1hdHJpeCwgcmVuZGVyU3RhdGUuaW5saW5lVmVydGljYWxGaWVsZE9mVmlldywgYXNwZWN0LCBuZWFyLCBmYXIpO1xuICAgIH1cbiAgICBpZiAoc2Vzc2lvbi5hcikge1xuICAgICAgbWF0NC5mcm9tUm90YXRpb25UcmFuc2xhdGlvblNjYWxlKHRoaXMubWF0cml4LCB0aGlzLmdhbWVwYWRzWzFdLnBvc2Uub3JpZW50YXRpb24sIHRoaXMuZ2FtZXBhZHNbMV0ucG9zZS5wb3NpdGlvbiwgdGhpcy5zY2FsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1hdDQuZnJvbVJvdGF0aW9uVHJhbnNsYXRpb25TY2FsZSh0aGlzLm1hdHJpeCwgdGhpcy5xdWF0ZXJuaW9uLCB0aGlzLnBvc2l0aW9uLCB0aGlzLnNjYWxlKTtcbiAgICB9XG4gICAgbWF0NC5pbnZlcnQodGhpcy52aWV3TWF0cml4LCB0aGlzLm1hdHJpeCk7XG5cbiAgICAvLyBNb3ZlIG1hdHJpY2VzIGxlZnQvcmlnaHQgYSBiaXQgYW5kIHRoZW4gY2FsY3VsYXRlIGxlZnQvcmlnaHRWaWV3TWF0cml4XG4gICAgLy8gQFRPRE86IHByb3BlciBsZWZ0L3JpZ2h0IGRpc3RhbmNlXG4gICAgbWF0NC5pbnZlcnQodGhpcy5sZWZ0Vmlld01hdHJpeCwgdHJhbnNsYXRlT25YKG1hdDQuY29weSh0aGlzLmxlZnRWaWV3TWF0cml4LCB0aGlzLm1hdHJpeCksIC0wLjAyKSk7XG4gICAgbWF0NC5pbnZlcnQodGhpcy5yaWdodFZpZXdNYXRyaXgsIHRyYW5zbGF0ZU9uWChtYXQ0LmNvcHkodGhpcy5yaWdodFZpZXdNYXRyaXgsIHRoaXMubWF0cml4KSwgMC4wMikpO1xuXG4gICAgLy8gQFRPRE86IENvbmZpcm0gaWYgaW5wdXQgZXZlbnRzIGFyZSBvbmx5IGZvciBpbW1lcnNpdmUgc2Vzc2lvblxuICAgIC8vIEBUT0RPOiBJZiB0aGVyZSBhcmUgbXVsdGlwbGUgaW1tZXJzaXZlIHNlc3Npb25zLCBpbnB1dCBldmVudHMgYXJlIGZpcmVkIG9ubHkgZm9yIHRoZSBmaXJzdCBzZXNzaW9uLlxuICAgIC8vICAgICAgICBGaXggdGhpcyBpc3N1ZSAoaWYgbXVsdGlwbGUgaW1tZXJzaXZlIHNlc3Npb25zIGNhbiBiZSBjcmVhdGVkKS5cbiAgICBpZiAoc2Vzc2lvbi5pbW1lcnNpdmUpIHtcbiAgICAgIGlmICh0aGlzLmFyRGV2aWNlKSB7XG4gICAgICAgIGlmICh0aGlzLnRvdWNoZWQgJiYgdGhpcy5faXNQb2ludGVyQ2xvc2VFbm91Z2hUb1RhYmxldCgpKSB7XG4gICAgICAgICAgaWYgKCF0aGlzLmlzUG9pbnRlckFuZFRhYmxlZENsb3NlRW5vdWdoKSB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVJbnB1dEJ1dHRvblByZXNzZWQodHJ1ZSwgMCwgMCk7XG4gICAgICAgICAgICB0aGlzLmlzUG9pbnRlckFuZFRhYmxlZENsb3NlRW5vdWdoID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYXJTY2VuZS50b3VjaGVkKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gdGhpcy5fZ2V0VG91Y2hDb29yZGluYXRlcygpO1xuICAgICAgICAgIHRoaXMuX3VwZGF0ZUlucHV0QXhlcygwLCBjb29yZGluYXRlc1swXSwgLWNvb3JkaW5hdGVzWzFdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy5pc1BvaW50ZXJBbmRUYWJsZWRDbG9zZUVub3VnaCkge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlSW5wdXRCdXR0b25QcmVzc2VkKGZhbHNlLCAwLCAwKTtcbiAgICAgICAgICAgIHRoaXMuaXNQb2ludGVyQW5kVGFibGVkQ2xvc2VFbm91Z2ggPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuYXJTY2VuZS5yZWxlYXNlZCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl91cGRhdGVJbnB1dEF4ZXMoMCwgMCwgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmdhbWVwYWRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGNvbnN0IGdhbWVwYWQgPSB0aGlzLmdhbWVwYWRzW2ldO1xuICAgICAgICBjb25zdCBpbnB1dFNvdXJjZUltcGwgPSB0aGlzLmdhbWVwYWRJbnB1dFNvdXJjZXNbaV07XG4gICAgICAgIGlucHV0U291cmNlSW1wbC51cGRhdGVGcm9tR2FtZXBhZChnYW1lcGFkKTtcbiAgICAgICAgLy8gQFRPRE86IHRlbXBvcmFsIHdvcmthcm91bmQgYmVjYXVzZSB0aGUgcG9seWZpbGwgZG9lc24ndCBoYXZlIGEgd2F5IHRvIHNldCAnc2NyZWVuJy5cbiAgICAgICAgLy8gICAgICAgIFdlIHNob3VsZCBzZW5kIHRoZSBmZWVkYmFjayB0byB0aGUgcG9seWZpbGwuXG4gICAgICAgIGlmICh0aGlzLmFyRGV2aWNlICYmIGkgPT09IDApIHtcbiAgICAgICAgICBpbnB1dFNvdXJjZUltcGwudGFyZ2V0UmF5TW9kZSA9ICdzY3JlZW4nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnB1dFNvdXJjZUltcGwucHJpbWFyeUJ1dHRvbkluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIGNvbnN0IHByaW1hcnlBY3Rpb25QcmVzc2VkID0gZ2FtZXBhZC5idXR0b25zW2lucHV0U291cmNlSW1wbC5wcmltYXJ5QnV0dG9uSW5kZXhdLnByZXNzZWQ7XG4gICAgICAgICAgaWYgKHByaW1hcnlBY3Rpb25QcmVzc2VkICYmICFpbnB1dFNvdXJjZUltcGwucHJpbWFyeUFjdGlvblByZXNzZWQpIHtcbiAgICAgICAgICAgIC8vIEZpcmUgcHJpbWFyeSBhY3Rpb24gc2VsZWN0IHN0YXJ0IGV2ZW50IGluIG9uRW5kRnJhbWUoKSBmb3IgQVIgZGV2aWNlLlxuICAgICAgICAgICAgLy8gU2VlIHRoZSBjb21tZW50IGluIG9uRW5kRnJhbWUoKSBmb3IgdGhlIGRldGFpbC5cbiAgICAgICAgICAgIGlmICh0aGlzLmFyRGV2aWNlKSB7XG4gICAgICAgICAgICAgIGlucHV0U291cmNlSW1wbC5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdAQHdlYnhyLXBvbHlmaWxsL2lucHV0LXNlbGVjdC1zdGFydCcsIHsgc2Vzc2lvbklkOiBzZXNzaW9uLmlkLCBpbnB1dFNvdXJjZTogaW5wdXRTb3VyY2VJbXBsLmlucHV0U291cmNlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoIXByaW1hcnlBY3Rpb25QcmVzc2VkICYmIGlucHV0U291cmNlSW1wbC5wcmltYXJ5QWN0aW9uUHJlc3NlZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJEZXZpY2UpIHtcbiAgICAgICAgICAgICAgaW5wdXRTb3VyY2VJbXBsLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdAQHdlYnhyLXBvbHlmaWxsL2lucHV0LXNlbGVjdC1lbmQnLCB7IHNlc3Npb25JZDogc2Vzc2lvbi5pZCwgaW5wdXRTb3VyY2U6IGlucHV0U291cmNlSW1wbC5pbnB1dFNvdXJjZSB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gaW1wdXRTb3VyY2VJbXBsLnByaW1hcnlBY3Rpb25QcmVzc2VkIGlzIHVwZGF0ZWQgaW4gb25GcmFtZUVuZCgpLlxuICAgICAgICB9XG4gICAgICAgIGlmIChpbnB1dFNvdXJjZUltcGwucHJpbWFyeVNxdWVlemVCdXR0b25JbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBjb25zdCBwcmltYXJ5U3F1ZWV6ZUFjdGlvblByZXNzZWQgPSBnYW1lcGFkLmJ1dHRvbnNbaW5wdXRTb3VyY2VJbXBsLnByaW1hcnlTcXVlZXplQnV0dG9uSW5kZXhdLnByZXNzZWQ7XG4gICAgICAgICAgaWYgKHByaW1hcnlTcXVlZXplQWN0aW9uUHJlc3NlZCAmJiAhaW5wdXRTb3VyY2VJbXBsLnByaW1hcnlTcXVlZXplQWN0aW9uUHJlc3NlZCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdAQHdlYnhyLXBvbHlmaWxsL2lucHV0LXNxdWVlemUtc3RhcnQnLCB7IHNlc3Npb25JZDogc2Vzc2lvbi5pZCwgaW5wdXRTb3VyY2U6IGlucHV0U291cmNlSW1wbC5pbnB1dFNvdXJjZSB9KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCFwcmltYXJ5U3F1ZWV6ZUFjdGlvblByZXNzZWQgJiYgaW5wdXRTb3VyY2VJbXBsLnByaW1hcnlTcXVlZXplQWN0aW9uUHJlc3NlZCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdAQHdlYnhyLXBvbHlmaWxsL2lucHV0LXNxdWVlemUtZW5kJywgeyBzZXNzaW9uSWQ6IHNlc3Npb24uaWQsIGlucHV0U291cmNlOiBpbnB1dFNvdXJjZUltcGwuaW5wdXRTb3VyY2UgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlucHV0U291cmNlSW1wbC5wcmltYXJ5U3F1ZWV6ZUFjdGlvblByZXNzZWQgPSBwcmltYXJ5U3F1ZWV6ZUFjdGlvblByZXNzZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5faGl0VGVzdChzZXNzaW9uSWQsIHRoaXMuaGl0VGVzdFNvdXJjZXMsIHRoaXMuaGl0VGVzdFJlc3VsdHMpO1xuICAgICAgdGhpcy5faGl0VGVzdChzZXNzaW9uSWQsIHRoaXMuaGl0VGVzdFNvdXJjZXNGb3JUcmFuc2llbnRJbnB1dCwgdGhpcy5oaXRUZXN0UmVzdWx0c0ZvclRyYW5zaWVudElucHV0KTtcbiAgICB9XG4gIH1cblxuICBvbkZyYW1lRW5kKHNlc3Npb25JZCkge1xuICAgIC8vIFdlIGhhbmRsZSB0b3VjaCBldmVudCBvbiBBUiBkZXZpY2UgYXMgdHJhbnNpZW50IGlucHV0IGZvciBub3cuXG4gICAgLy8gSWYgcHJpbWFyeSBhY3Rpb24gaGFwcGVucyBvbiB0cmFuc2llbnQgaW5wdXRcbiAgICAvLyAxLiBGaXJzdCBmaXJlIGludHB1dHNvdXJjZXNjaGFuZ2UgZXZlbnRcbiAgICAvLyAyLiBBbmQgdGhlbiBmaXJlIHNlbGVjdCBzdGFydCBldmVudFxuICAgIC8vIEJ1dCBpbiB3ZWJ4ci1wb2x5ZmlsbC5qcywgaW5wdXRzb3VyY2VzY2hhbmdlIGV2ZW50IGlzIGZpcmVkXG4gICAgLy8gYWZ0ZXIgb25GcmFtZVN0YXJ0KCkgYnkgbWFraW5nIGFuIGlucHV0IHNvdXJjZSBhY3RpdmUuXG4gICAgLy8gU28gSSBuZWVkIHRvIHBvc3Rwb25lIGlucHV0IHNlbGVjdCBldmVudCB1bnRpbCBvbkZyYW1lRW5kKCkgaGVyZS5cbiAgICAvLyBSZWdhcmRpbmcgc2VsZWN0IGFuZCBzZWxlY3QgZW5kIGV2ZW50cywgdGhleSBzaG91bGQgYmUgZmlyZWRcbiAgICAvLyBiZWZvcmUgaW5wdXRzb3VyY2VzY2hhbmdlIGV2ZW50LCBzbyBvayB0byBiZSBpbiBvbkZyYW1lU3RhcnQoKS5cbiAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5zZXNzaW9ucy5nZXQoc2Vzc2lvbklkKTtcbiAgICBpZiAoc2Vzc2lvbi5pbW1lcnNpdmUpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5nYW1lcGFkcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCBnYW1lcGFkID0gdGhpcy5nYW1lcGFkc1tpXTtcbiAgICAgICAgY29uc3QgaW5wdXRTb3VyY2VJbXBsID0gdGhpcy5nYW1lcGFkSW5wdXRTb3VyY2VzW2ldO1xuICAgICAgICBpZiAoaW5wdXRTb3VyY2VJbXBsLnByaW1hcnlCdXR0b25JbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBjb25zdCBwcmltYXJ5QWN0aW9uUHJlc3NlZCA9IGdhbWVwYWQuYnV0dG9uc1tpbnB1dFNvdXJjZUltcGwucHJpbWFyeUJ1dHRvbkluZGV4XS5wcmVzc2VkO1xuICAgICAgICAgIGlmIChwcmltYXJ5QWN0aW9uUHJlc3NlZCAmJiAhaW5wdXRTb3VyY2VJbXBsLnByaW1hcnlBY3Rpb25QcmVzc2VkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hckRldmljZSkge1xuICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoJ0BAd2VieHItcG9seWZpbGwvaW5wdXQtc2VsZWN0LXN0YXJ0JywgeyBzZXNzaW9uSWQ6IHNlc3Npb24uaWQsIGlucHV0U291cmNlOiBpbnB1dFNvdXJjZUltcGwuaW5wdXRTb3VyY2UgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlucHV0U291cmNlSW1wbC5wcmltYXJ5QWN0aW9uUHJlc3NlZCA9IHByaW1hcnlBY3Rpb25QcmVzc2VkOyBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlcXVlc3RGcmFtZU9mUmVmZXJlbmNlVHJhbnNmb3JtKHR5cGUsIG9wdGlvbnMpIHtcbiAgICAvLyBAVE9ETzogQWRkIG5vdGVcbiAgICBjb25zdCBtYXRyaXggPSBtYXQ0LmNyZWF0ZSgpO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAndmlld2VyJzpcbiAgICAgIGNhc2UgJ2xvY2FsJzpcbiAgICAgICAgbWF0cml4WzEzXSA9IC1ERUZBVUxUX0hFQURTRVRfUE9TSVRJT05bMV07XG4gICAgICAgIHJldHVybiBtYXRyaXg7XG5cbiAgICAgIGNhc2UgJ2xvY2FsLWZsb29yJzpcbiAgICAgICAgcmV0dXJuIG1hdHJpeDtcblxuICAgICAgY2FzZSAnYm91bmRlZC1mbG9vcic6XG4gICAgICBjYXNlICd1bmJvdW5kJzpcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8vIEBUT0RPOiBUaHJvdyBhbiBlcnJvcj9cbiAgICAgICAgcmV0dXJuIG1hdHJpeDtcbiAgICB9XG4gIH1cblxuICBlbmRTZXNzaW9uKHNlc3Npb25JZCkge1xuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb25zLmdldChzZXNzaW9uSWQpO1xuICAgIGlmIChzZXNzaW9uLmltbWVyc2l2ZSAmJiBzZXNzaW9uLmJhc2VMYXllcikge1xuICAgICAgdGhpcy5fcmVtb3ZlQmFzZUxheWVyQ2FudmFzRnJvbURpdihzZXNzaW9uSWQpO1xuICAgICAgdGhpcy5kb21PdmVybGF5Um9vdCA9IG51bGw7XG4gICAgICBpZiAoc2Vzc2lvbi5hcikge1xuICAgICAgICB0aGlzLmFyU2NlbmUuZWplY3QoKTtcbiAgICAgICAgdGhpcy5hclNjZW5lLnJlbGVhc2VDYW52YXMoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCgnQEB3ZWJ4ci1wb2x5ZmlsbC92ci1wcmVzZW50LWVuZCcsIHNlc3Npb25JZCk7XG4gICAgICB0aGlzLl9ub3RpZnlMZWF2ZUltbWVyc2l2ZSgpO1xuICAgIH1cbiAgICBzZXNzaW9uLmVuZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGRvZXNTZXNzaW9uU3VwcG9ydFJlZmVyZW5jZVNwYWNlKHNlc3Npb25JZCwgdHlwZSkge1xuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb25zLmdldChzZXNzaW9uSWQpO1xuICAgIGlmIChzZXNzaW9uLmVuZGVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBzZXNzaW9uLmVuYWJsZWRGZWF0dXJlcy5oYXModHlwZSk7XG4gIH1cblxuICBnZXRWaWV3cG9ydChzZXNzaW9uSWQsIGV5ZSwgbGF5ZXIsIHRhcmdldCkge1xuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb25zLmdldChzZXNzaW9uSWQpO1xuICAgIGNvbnN0IGNhbnZhcyA9IHNlc3Npb24uYmFzZUxheWVyLmNvbnRleHQuY2FudmFzO1xuICAgIGNvbnN0IHdpZHRoID0gY2FudmFzLndpZHRoO1xuICAgIGNvbnN0IGhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XG4gICAgaWYgKHNlc3Npb24uYXIpIHtcbiAgICAgIC8vIEN1cnJlbnRseSB0aGUgcG9seWZpbGwgbGV0IGFueSBpbW1lcnNpdmUgbW9kZSBoYXMgdHdvIFZpZXdTcGFjZXMgbGVmdCBhbmQgcmlnaHQuXG4gICAgICAvLyBSZXR1cm4gdGhlIHNhbWUgdmlld3BvcnQgZm9yIGFueSBleWUgdHlwZSBzbyBmYXIuXG4gICAgICAvLyBAVE9ETzogU2VuZCBmZWVkYmFjayB0byB3ZWJ4ci1wb2x5ZmlsbC5qcyBhYm91dCBvbmUgJ25vbmUnIHZpZXcgb3B0aW9uXG4gICAgICAvLyAgICAgICAgZm9yIEFSIG1vbm9zY29waWMgZGV2aWNlXG4gICAgICB0YXJnZXQueCA9IDA7XG4gICAgICB0YXJnZXQueSA9IDA7XG4gICAgICB0YXJnZXQud2lkdGggPSB3aWR0aDtcbiAgICAgIHRhcmdldC5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChleWUgPT09ICdub25lJykge1xuICAgICAgICB0YXJnZXQueCA9IDA7XG4gICAgICAgIHRhcmdldC53aWR0aCA9IHdpZHRoO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnN0ZXJlb0VmZmVjdEVuYWJsZWQpIHtcbiAgICAgICAgdGFyZ2V0LnggPSBleWUgPT09ICdsZWZ0JyA/IDAgOiB3aWR0aCAvIDI7XG4gICAgICAgIHRhcmdldC53aWR0aCA9IHdpZHRoIC8gMjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhcmdldC54ID0gMDtcbiAgICAgICAgdGFyZ2V0LndpZHRoID0gZXllID09PSAnbGVmdCcgPyB3aWR0aCA6IDA7XG4gICAgICB9XG4gICAgICB0YXJnZXQueSA9IDA7XG4gICAgICB0YXJnZXQuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGdldFByb2plY3Rpb25NYXRyaXgoZXllKSB7XG4gICAgcmV0dXJuIHRoaXMuYXJEZXZpY2UgfHwgZXllID09PSAnbm9uZScgPyB0aGlzLnByb2plY3Rpb25NYXRyaXggOlxuICAgICAgICAgICBleWUgPT09ICdsZWZ0JyA/IHRoaXMubGVmdFByb2plY3Rpb25NYXRyaXggOiB0aGlzLnJpZ2h0UHJvamVjdGlvbk1hdHJpeDtcbiAgfVxuXG4gIGdldEJhc2VQb3NlTWF0cml4KCkge1xuICAgIHJldHVybiB0aGlzLm1hdHJpeDtcbiAgfVxuXG4gIGdldEJhc2VWaWV3TWF0cml4KGV5ZSkge1xuICAgIGlmIChleWUgPT09ICdub25lJyB8fCB0aGlzLmFyRGV2aWNlIHx8ICF0aGlzLnN0ZXJlb0VmZmVjdEVuYWJsZWQpIHsgcmV0dXJuIHRoaXMudmlld01hdHJpeDsgfVxuICAgIHJldHVybiBleWUgPT09ICdsZWZ0JyA/IHRoaXMubGVmdFZpZXdNYXRyaXggOiB0aGlzLnJpZ2h0Vmlld01hdHJpeDtcbiAgfVxuXG4gIGdldElucHV0U291cmNlcygpIHtcbiAgICBjb25zdCBpbnB1dFNvdXJjZXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGlucHV0U291cmNlSW1wbCBvZiB0aGlzLmdhbWVwYWRJbnB1dFNvdXJjZXMpIHtcbiAgICAgIGlmIChpbnB1dFNvdXJjZUltcGwuYWN0aXZlKSB7XG4gICAgICAgIGlucHV0U291cmNlcy5wdXNoKGlucHV0U291cmNlSW1wbC5pbnB1dFNvdXJjZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbnB1dFNvdXJjZXM7XG4gIH1cblxuICBnZXRJbnB1dFBvc2UoaW5wdXRTb3VyY2UsIGNvb3JkaW5hdGVTeXN0ZW0sIHBvc2VUeXBlKSB7XG4gICAgZm9yIChjb25zdCBpbnB1dFNvdXJjZUltcGwgb2YgdGhpcy5nYW1lcGFkSW5wdXRTb3VyY2VzKSB7XG4gICAgICBpZiAoaW5wdXRTb3VyY2VJbXBsLmlucHV0U291cmNlID09PSBpbnB1dFNvdXJjZSkge1xuICAgICAgICBjb25zdCBwb3NlID0gaW5wdXRTb3VyY2VJbXBsLmdldFhSUG9zZShjb29yZGluYXRlU3lzdGVtLCBwb3NlVHlwZSk7XG5cbiAgICAgICAgLy8gSW4gQVIgbW9kZSwgY2FsY3VsYXRlIHRoZSBpbnB1dCBwb3NlIGZvciByaWdodCBjb250cm9sbGVyXG4gICAgICAgIC8vIGZyb20gdGhlIHJlbGF0aW9uIG9mIHJpZ2h0IGNvbnRyb2xsZXIocG9pbnRlcikgYW5kIGxlZnQgY29udHJvbGxlcih0YWJsZXQpXG4gICAgICAgIGlmICh0aGlzLmFyRGV2aWNlICYmIGlucHV0U291cmNlSW1wbCA9PT0gdGhpcy5nYW1lcGFkSW5wdXRTb3VyY2VzWzBdKSB7XG4gICAgICAgICAgaWYgKCFpbnB1dFNvdXJjZUltcGwuYWN0aXZlKSB7IHJldHVybiBudWxsOyB9XG4gICAgICAgICAgLy8gQFRPRE86IEFkZCBub3RlIGFib3V0IHRoaXMgbWF0cml4XG4gICAgICAgICAgLy8gQFRPRE86IE9wdGltaXplIGlmIHBvc3NpYmxlXG4gICAgICAgICAgY29uc3Qgdmlld01hdHJpeEludmVyc2UgPSBtYXQ0LmludmVydChtYXQ0LmNyZWF0ZSgpLCB0aGlzLnZpZXdNYXRyaXgpO1xuICAgICAgICAgIGNvb3JkaW5hdGVTeXN0ZW0uX3RyYW5zZm9ybUJhc2VQb3NlTWF0cml4KHZpZXdNYXRyaXhJbnZlcnNlLCB2aWV3TWF0cml4SW52ZXJzZSk7XG4gICAgICAgICAgY29uc3Qgdmlld01hdHJpeCA9IG1hdDQuaW52ZXJ0KG1hdDQuY3JlYXRlKCksIHZpZXdNYXRyaXhJbnZlcnNlKTtcbiAgICAgICAgICBtYXQ0Lm11bHRpcGx5KHBvc2UudHJhbnNmb3JtLm1hdHJpeCwgdmlld01hdHJpeCwgcG9zZS50cmFuc2Zvcm0ubWF0cml4KTtcbiAgICAgICAgICBjb25zdCBtYXRyaXggPSBtYXQ0LmlkZW50aXR5KG1hdDQuY3JlYXRlKCkpO1xuICAgICAgICAgIC8vIEFzc3VtaW5nIEZPViBpcyA5MCBkZWdyZWUgQFRPRE86IFJlbW92ZSB0aGlzIGNvbnN0cmFpbnRcbiAgICAgICAgICBjb25zdCBuZWFyID0gMC4xOyAvLyBAVE9ETzogU2hvdWxkIGJlIGZyb20gcmVuZGVyIHN0YXRlXG4gICAgICAgICAgY29uc3QgYXNwZWN0ID0gdGhpcy5kZXZpY2VTaXplLndpZHRoIC8gdGhpcy5kZXZpY2VTaXplLmhlaWdodDtcbiAgICAgICAgICAvLyBAVE9ETzogRHVwbGljYXRlIHdpdGggQVJTY2VuZS5qcy4gU2hvdWxkIHdlIGltcG9ydCBmcm9tIGNvbW1vbiBwbGFjZT9cbiAgICAgICAgICBjb25zdCBvdXRzaWRlRnJhbWVXaWR0aCA9IDAuMDA1O1xuICAgICAgICAgIGNvbnN0IGR4ID0gcG9zZS50cmFuc2Zvcm0ubWF0cml4WzEyXSAvXG4gICAgICAgICAgICAoKHRoaXMuZGV2aWNlU2l6ZS53aWR0aCAtIG91dHNpZGVGcmFtZVdpZHRoKSAqIDAuNSkgKiBhc3BlY3Q7XG4gICAgICAgICAgY29uc3QgZHkgPSBwb3NlLnRyYW5zZm9ybS5tYXRyaXhbMTNdIC9cbiAgICAgICAgICAgICgodGhpcy5kZXZpY2VTaXplLmhlaWdodCAtIG91dHNpZGVGcmFtZVdpZHRoKSAqIDAuNSk7XG4gICAgICAgICAgbWF0NC5yb3RhdGVZKG1hdHJpeCwgbWF0cml4LCAtZHggKiBNYXRoLlBJIC8gNCk7XG4gICAgICAgICAgbWF0NC5yb3RhdGVYKG1hdHJpeCwgbWF0cml4LCBkeSAqIE1hdGguUEkgLyA0KTtcbiAgICAgICAgICBtYXRyaXhbMTJdID0gZHggKiBuZWFyO1xuICAgICAgICAgIG1hdHJpeFsxM10gPSBkeSAqIG5lYXI7XG4gICAgICAgICAgbWF0cml4WzE0XSA9IC1uZWFyO1xuICAgICAgICAgIG1hdDQubXVsdGlwbHkocG9zZS50cmFuc2Zvcm0ubWF0cml4LCB2aWV3TWF0cml4SW52ZXJzZSwgbWF0cml4KTtcbiAgICAgICAgICBtYXQ0LmludmVydChwb3NlLnRyYW5zZm9ybS5pbnZlcnNlLm1hdHJpeCwgcG9zZS50cmFuc2Zvcm0ubWF0cml4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwb3NlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIG9uV2luZG93UmVzaXplKCkge1xuICAgIC8vIEBUT0RPOiBpbXBsZW1lbnRcbiAgfVxuXG4gIC8vIERPTSBPdmVybGF5IEFQSVxuXG4gIHNldERvbU92ZXJsYXlSb290KHJvb3QpIHtcbiAgICB0aGlzLmRvbU92ZXJsYXlSb290ID0gcm9vdDtcbiAgfVxuXG4gIC8vIEFSIEhpdHRpbmcgdGVzdFxuXG4gIGFkZEhpdFRlc3RTb3VyY2Uoc291cmNlKSB7XG4gICAgdGhpcy5oaXRUZXN0U291cmNlcy5wdXNoKHNvdXJjZSk7XG4gIH1cblxuICBnZXRIaXRUZXN0UmVzdWx0cyhzb3VyY2UpIHtcbiAgICByZXR1cm4gdGhpcy5oaXRUZXN0UmVzdWx0cy5nZXQoc291cmNlKSB8fCBbXTtcbiAgfVxuXG4gIGFkZEhpdFRlc3RTb3VyY2VGb3JUcmFuc2llbnRJbnB1dChzb3VyY2UpIHtcbiAgICB0aGlzLmhpdFRlc3RTb3VyY2VzRm9yVHJhbnNpZW50SW5wdXQucHVzaChzb3VyY2UpO1xuICB9XG5cbiAgZ2V0SGl0VGVzdFJlc3VsdHNGb3JUcmFuc2llbnRJbnB1dChzb3VyY2UpIHtcbiAgICByZXR1cm4gdGhpcy5oaXRUZXN0UmVzdWx0c0ZvclRyYW5zaWVudElucHV0LmdldChzb3VyY2UpIHx8IFtdO1xuICB9XG5cbiAgLy8gUHJpdmF0ZSBtZXRob2RzXG5cbiAgLy8gSWYgc2Vzc2lvbiBpcyBpbW1lcnNpdmUgbW9kZSwgcmVzaXplIHRoZSBjYW52YXMgc2l6ZSB0byBmdWxsIHdpbmRvdyBzaXplLlxuICAvLyBUbyBkbyB0aGF0LCBjaGFuZ2luZyBjYW52YXMgc2l6ZSBhbmQgbW92aW5nIHRoZSBjYW52YXMgdG9cbiAgLy8gdGhlIHNwZWNpYWwgZGl2LiBUaGV5IGFyZSByZXN0b3JlZCB3aGVuIGV4aXRpbmcgaW1tZXJzaXZlIG1vZGUuXG4gIC8vIEBUT0RPOiBTaW1wbGlmeSB0aGUgbWV0aG9kIG5hbWVzXG5cbiAgX2FwcGVuZEJhc2VMYXllckNhbnZhc1RvRGl2KHNlc3Npb25JZCkge1xuICAgIGNvbnN0IHNlc3Npb24gPSB0aGlzLnNlc3Npb25zLmdldChzZXNzaW9uSWQpO1xuICAgIGNvbnN0IGNhbnZhcyA9IHNlc3Npb24uYmFzZUxheWVyLmNvbnRleHQuY2FudmFzO1xuXG4gICAgdGhpcy5vcmlnaW5hbENhbnZhc1BhcmFtcy53aWR0aCA9IGNhbnZhcy53aWR0aDtcbiAgICB0aGlzLm9yaWdpbmFsQ2FudmFzUGFyYW1zLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XG5cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZGl2KTtcblxuICAgIC8vIElmIGNhbnZhcyBpcyBPZmZzY3JlZW5DYW52YXMgd2UgZG9uJ3QgZnVydGhlciB0b3VjaCBzbyBmYXIuXG4gICAgaWYgKCEoY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpKSB7IHJldHVybjsgfVxuXG4gICAgdGhpcy5vcmlnaW5hbENhbnZhc1BhcmFtcy5wYXJlbnRFbGVtZW50ID0gY2FudmFzLnBhcmVudEVsZW1lbnQ7XG4gICAgY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICB0aGlzLmRpdi5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG4gICAgLy8gRE9NIG92ZXJsYXkgQVBJXG4gICAgLy8gQFRPRE86IElzIHRoaXMgdGhlIGJlc3QgcGxhY2UgdG8gaGFuZGxlP1xuICAgIC8vIEBUT0RPOiBXaGF0IGlmIGRvbSBlbGVtZW50IGlzIGFwcGVuZWQvcmVtb3ZlZCB3aGlsZSBpbiBpbW1lcnNpdmUgbW9kZT9cbiAgICAvLyAgICAgICAgU2hvdWxkIHdlIG9ic2VydmU/XG4gICAgaWYgKHRoaXMuZG9tT3ZlcmxheVJvb3QpIHtcbiAgICAgIGNvbnN0IGVsID0gdGhpcy5kb21PdmVybGF5Um9vdDtcbiAgICAgIGVsLnN0eWxlLl96SW5kZXggPSBlbC5zdHlsZS56SW5kZXg7IC8vIFBvbGx1dGluZyBpcyBiYWQuLi5cbiAgICAgIGlmICh0aGlzLmRvbU92ZXJsYXlSb290LmNvbnRhaW5zKHRoaXMuZGl2KSkge1xuICAgICAgICB0aGlzLmRpdi5zdHlsZS56SW5kZXggPSAnJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLnN0eWxlLnpJbmRleCA9IERPTV9PVkVSTEFZX1pfSU5ERVg7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX3JlbW92ZUJhc2VMYXllckNhbnZhc0Zyb21EaXYoc2Vzc2lvbklkKSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IHRoaXMuc2Vzc2lvbnMuZ2V0KHNlc3Npb25JZCk7XG4gICAgY29uc3QgY2FudmFzID0gc2Vzc2lvbi5iYXNlTGF5ZXIuY29udGV4dC5jYW52YXM7XG5cbiAgICBjYW52YXMud2lkdGggPSB0aGlzLm9yaWdpbmFsQ2FudmFzUGFyYW1zLndpZHRoO1xuICAgIGNhbnZhcy5oZWlnaHQgPSB0aGlzLm9yaWdpbmFsQ2FudmFzUGFyYW1zLmhlaWdodDtcblxuICAgIC8vIFRoZXJlIG1heSBiZSBhIGNhc2Ugd2hlcmUgYW4gYXBwbGljYXRpb24gb3BlcmF0ZXMgRE9NIGVsZW1lbnRzXG4gICAgLy8gaW4gaW1tZXJzaXZlIG1vZGUuIEluIHN1Y2ggY2FzZSwgd2UgZG9uJ3QgcmVzdG9yZSBET00gZWxlbWVudHNcbiAgICAvLyBoaWVyYXJjaGllcyBzbyBmYXIuXG4gICAgaWYgKHRoaXMuZGl2LnBhcmVudEVsZW1lbnQgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5kaXYpO1xuICAgIH1cbiAgICBpZiAoY2FudmFzLnBhcmVudEVsZW1lbnQgPT09IHRoaXMuZGl2KSB7XG4gICAgICB0aGlzLmRpdi5yZW1vdmVDaGlsZChjYW52YXMpO1xuICAgIH1cblxuICAgIC8vIElmIGNhbnZhcyBpcyBPZmZzY3JlZW5DYW52YXMgd2UgZG9uJ3QgdG91Y2ggc28gZmFyLlxuICAgIGlmICghKGNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSkgeyByZXR1cm47IH1cblxuICAgIGlmICh0aGlzLm9yaWdpbmFsQ2FudmFzUGFyYW1zLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgIHRoaXMub3JpZ2luYWxDYW52YXNQYXJhbXMucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChjYW52YXMpO1xuICAgIH1cbiAgICB0aGlzLm9yaWdpbmFsQ2FudmFzUGFyYW1zLnBhcmVudEVsZW1lbnQgPSBudWxsO1xuXG4gICAgLy8gRE9NIG92ZXJsYXkgQVBJXG4gICAgLy8gQFRPRE86IElzIHRoaXMgdGhlIGJlc3QgcGxhY2UgdG8gaGFuZGxlP1xuICAgIGlmICh0aGlzLmRvbU92ZXJsYXlSb290KSB7XG4gICAgICBjb25zdCBlbCA9IHRoaXMuZG9tT3ZlcmxheVJvb3Q7XG4gICAgICBlbC5zdHlsZS56SW5kZXggPSBlbC5zdHlsZS5fekluZGV4O1xuICAgICAgZGVsZXRlIGVsLnN0eWxlLl96SW5kZXg7XG4gICAgICB0aGlzLmRpdi5zdHlsZS56SW5kZXggPSBESVZfWl9JTkRFWDtcbiAgICB9XG4gIH1cblxuICAvLyBGb3IgQVIuIENoZWNrIGlmIHJpZ2h0IGNvbnRyb2xsZXIocG9pbnRlcikgaXMgdG91Y2hlZCB3aXRoIGxlZnQgY29udHJvbGxlcih0YWJsZXQpXG5cbiAgLy8gVUdILi4uIEBUT0RPOiBSZW5hbWVcbiAgX2lzUG9pbnRlckNsb3NlRW5vdWdoVG9UYWJsZXQoKSB7XG4gICAgLy8gQFRPRE86IE9wdGltaXplIGlmIHBvc3NpYmxlXG4gICAgY29uc3QgcG9zZSA9IHRoaXMuZ2FtZXBhZHNbMF0ucG9zZTtcbiAgICBjb25zdCBtYXRyaXggPSBtYXQ0LmZyb21Sb3RhdGlvblRyYW5zbGF0aW9uKG1hdDQuY3JlYXRlKCksIHBvc2Uub3JpZW50YXRpb24sIHBvc2UucG9zaXRpb24pO1xuICAgIG1hdDQubXVsdGlwbHkobWF0cml4LCB0aGlzLnZpZXdNYXRyaXgsIG1hdHJpeCk7XG4gICAgY29uc3QgZHggPSBtYXRyaXhbMTJdIC8gKHRoaXMuZGV2aWNlU2l6ZS53aWR0aCAqIDAuNSk7XG4gICAgY29uc3QgZHkgPSBtYXRyaXhbMTNdIC8gKHRoaXMuZGV2aWNlU2l6ZS5oZWlnaHQgKiAwLjUpO1xuICAgIGNvbnN0IGR6ID0gbWF0cml4WzE0XTtcbiAgICByZXR1cm4gZHggPD0gMS4wICYmIGR4ID49IC0xLjAgJiZcbiAgICAgICAgICAgZHkgPD0gMS4wICYmIGR5ID49IC0xLjAgJiZcbiAgICAgICAgICAgZHogPD0gMC4wMSAmJiBkeiA+PSAwLjA7XG4gIH1cblxuICBfZ2V0VG91Y2hDb29yZGluYXRlcygpIHtcbiAgICAvLyBAVE9ETzogT3B0aW1pemUgaWYgcG9zc2libGVcbiAgICBjb25zdCBwb3NlID0gdGhpcy5nYW1lcGFkc1swXS5wb3NlO1xuICAgIGNvbnN0IG1hdHJpeCA9IG1hdDQuZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24obWF0NC5jcmVhdGUoKSwgcG9zZS5vcmllbnRhdGlvbiwgcG9zZS5wb3NpdGlvbik7XG4gICAgbWF0NC5tdWx0aXBseShtYXRyaXgsIHRoaXMudmlld01hdHJpeCwgbWF0cml4KTtcbiAgICBjb25zdCBkeCA9IG1hdHJpeFsxMl0gLyAodGhpcy5kZXZpY2VTaXplLndpZHRoICogMC41KTtcbiAgICBjb25zdCBkeSA9IG1hdHJpeFsxM10gLyAodGhpcy5kZXZpY2VTaXplLmhlaWdodCAqIDAuNSk7XG4gICAgcmV0dXJuIFtkeCwgZHldO1xuICB9XG5cbiAgLy8gSGl0IFRlc3RcblxuICBfaGl0VGVzdChzZXNzaW9uSWQsIGhpdFRlc3RTb3VyY2VzLCBoaXRUZXN0UmVzdWx0cykge1xuICAgIC8vIFJlbW92ZSBpbmFjdGl2ZSBzb3VyY2VzIGZpcnN0XG4gICAgbGV0IGFjdGl2ZUhpdFRlc3RTb3VyY2VOdW0gPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGl0VGVzdFNvdXJjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHNvdXJjZSA9IGhpdFRlc3RTb3VyY2VzW2ldO1xuICAgICAgaWYgKHNvdXJjZS5fYWN0aXZlKSB7XG4gICAgICAgIGhpdFRlc3RTb3VyY2VzW2FjdGl2ZUhpdFRlc3RTb3VyY2VOdW0rK10gPSBzb3VyY2U7XG4gICAgICB9XG4gICAgfVxuICAgIGhpdFRlc3RTb3VyY2VzLmxlbmd0aCA9IGFjdGl2ZUhpdFRlc3RTb3VyY2VOdW07XG5cbiAgICAvLyBEbyBoaXQgdGVzdCBuZXh0XG4gICAgaGl0VGVzdFJlc3VsdHMuY2xlYXIoKTtcbiAgICBmb3IgKGNvbnN0IHNvdXJjZSBvZiBoaXRUZXN0U291cmNlcykge1xuICAgICAgaWYgKHNlc3Npb25JZCAhPT0gc291cmNlLl9zZXNzaW9uW1hSU0VTU0lPTl9QUklWQVRFXS5pZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0cyBiYXNlIG1hdHJpeCBkZXBlbmRpbmcgb24gaGl0IHRlc3Qgc291cmNlIHR5cGVcbiAgICAgIGxldCBiYXNlTWF0cml4O1xuICAgICAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIFhSVHJhbnNpZW50SW5wdXRIaXRUZXN0U291cmNlKSB7XG4gICAgICAgIGlmICghdGhpcy5nYW1lcGFkSW5wdXRTb3VyY2VzWzBdLmFjdGl2ZSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc291cmNlLl9wcm9maWxlLmluY2x1ZGVzKCd0b3VjaCcpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ2FtZXBhZCA9IHRoaXMuZ2FtZXBhZHNbMF07XG4gICAgICAgIGNvbnN0IG1hdHJpeCA9IG1hdDQuaWRlbnRpdHkobWF0NC5jcmVhdGUoKSk7XG4gICAgICAgIG1hdHJpeFsxMl0gPSBnYW1lcGFkLmF4ZXNbMF07XG4gICAgICAgIG1hdHJpeFsxM10gPSAtZ2FtZXBhZC5heGVzWzFdO1xuICAgICAgICBiYXNlTWF0cml4ID0gbWF0NC5tdWx0aXBseShtYXRyaXgsIHRoaXMubWF0cml4LCBtYXRyaXgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmFzZU1hdHJpeCA9IHNvdXJjZS5fc3BhY2UuX2Jhc2VNYXRyaXg7XG4gICAgICAgIGlmICghYmFzZU1hdHJpeCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENhbGN1bGF0ZXMgb3JpZ2luIGFuZCBkaXJlY3Rpb24gdXNlZCBmb3IgaGl0IHRlc3QgaW4gQVIgc2NlbmVcbiAgICAgIGNvbnN0IG9mZnNldFJheSA9IHNvdXJjZS5fb2Zmc2V0UmF5O1xuICAgICAgY29uc3Qgb3JpZ2luID0gdmVjMy5zZXQodmVjMy5jcmVhdGUoKSwgb2Zmc2V0UmF5Lm9yaWdpbi54LCBvZmZzZXRSYXkub3JpZ2luLnksIG9mZnNldFJheS5vcmlnaW4ueik7XG4gICAgICBjb25zdCBkaXJlY3Rpb24gPSB2ZWMzLnNldCh2ZWMzLmNyZWF0ZSgpLCBvZmZzZXRSYXkuZGlyZWN0aW9uLngsIG9mZnNldFJheS5kaXJlY3Rpb24ueSwgb2Zmc2V0UmF5LmRpcmVjdGlvbi56KTtcbiAgICAgIHZlYzMudHJhbnNmb3JtTWF0NChvcmlnaW4sIG9yaWdpbiwgYmFzZU1hdHJpeCk7XG4gICAgICB2ZWMzLnRyYW5zZm9ybVF1YXQoZGlyZWN0aW9uLCBkaXJlY3Rpb24sIG1hdDQuZ2V0Um90YXRpb24ocXVhdC5jcmVhdGUoKSwgYmFzZU1hdHJpeCkpO1xuXG4gICAgICAvLyBEbyBoaXQgdGVzdCBpbiBBUiBzY2VuZSBhbmQgc3RvcmVzIHRoZSByZXN1bHQgbWF0cmljZXNcbiAgICAgIGNvbnN0IGFySGl0VGVzdFJlc3VsdHMgPSB0aGlzLmFyU2NlbmUuZ2V0SGl0VGVzdFJlc3VsdHMob3JpZ2luLCBkaXJlY3Rpb24pO1xuICAgICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgYXJIaXRUZXN0UmVzdWx0cykge1xuICAgICAgICBjb25zdCBtYXRyaXggPSBtYXQ0LmNyZWF0ZSgpO1xuICAgICAgICAvLyBAVE9ETzogU2F2ZSByb3RhdGlvblxuICAgICAgICBtYXRyaXhbMTJdID0gcmVzdWx0LnBvaW50Lng7XG4gICAgICAgIG1hdHJpeFsxM10gPSByZXN1bHQucG9pbnQueTtcbiAgICAgICAgbWF0cml4WzE0XSA9IHJlc3VsdC5wb2ludC56O1xuICAgICAgICByZXN1bHRzLnB1c2gobWF0cml4KTtcbiAgICAgIH1cbiAgICAgIGhpdFRlc3RSZXN1bHRzLnNldChzb3VyY2UsIHJlc3VsdHMpO1xuICAgIH1cbiAgfVxuXG4gIC8vIE5vdGlmeSB0aGUgdXBkYXRlIHRvIHBhbmVsXG5cbiAgX25vdGlmeVBvc2VVcGRhdGUoKSB7XG4gICAgZGlzcGF0Y2hDdXN0b21FdmVudCgnZGV2aWNlLXBvc2UnLCB7XG4gICAgICBwb3NpdGlvbjogdGhpcy5wb3NpdGlvbixcbiAgICAgIHF1YXRlcm5pb246IHRoaXMucXVhdGVybmlvblxuICAgIH0pO1xuICB9XG5cbiAgLy8gY29udHJvbGxlckluZGV4OiAwID0+IFJpZ2h0LCAxID0+IExlZnRcbiAgX25vdGlmeUlucHV0UG9zZVVwZGF0ZShjb250cm9sbGVySW5kZXgpIHtcbiAgICBjb25zdCBwb3NlID0gdGhpcy5nYW1lcGFkc1tjb250cm9sbGVySW5kZXhdLnBvc2U7XG4gICAgY29uc3Qgb2JqZWN0TmFtZSA9IGNvbnRyb2xsZXJJbmRleCA9PT0gMCA/ICdyaWdodENvbnRyb2xsZXInIDogJ2xlZnRDb250cm9sbGVyJztcbiAgICBkaXNwYXRjaEN1c3RvbUV2ZW50KCdkZXZpY2UtaW5wdXQtcG9zZScsIHtcbiAgICAgIHBvc2l0aW9uOiBwb3NlLnBvc2l0aW9uLFxuICAgICAgcXVhdGVybmlvbjogcG9zZS5vcmllbnRhdGlvbixcbiAgICAgIG9iamVjdE5hbWU6IG9iamVjdE5hbWVcbiAgICB9KTtcbiAgfVxuXG4gIF9ub3RpZnlFbnRlckltbWVyc2l2ZSgpIHtcbiAgICBkaXNwYXRjaEN1c3RvbUV2ZW50KCdkZXZpY2UtZW50ZXItaW1tZXJzaXZlJywge30pO1xuICB9XG5cbiAgX25vdGlmeUxlYXZlSW1tZXJzaXZlKCkge1xuICAgIGRpc3BhdGNoQ3VzdG9tRXZlbnQoJ2RldmljZS1sZWF2ZS1pbW1lcnNpdmUnLCB7fSk7XG4gIH1cblxuICAvLyBTZW5kIHJlcXVlc3QgdG8gY29udGVudC1zY3JpcHRzXG5cbiAgX3JlcXVlc3RWaXJ0dWFsUm9vbUFzc2V0KCkge1xuICAgIGRpc3BhdGNoQ3VzdG9tRXZlbnQoJ3dlYnhyLXZpcnR1YWwtcm9vbS1yZXF1ZXN0Jywge30pO1xuICB9XG5cbiAgLy8gRGV2aWNlIHN0YXR1cyB1cGRhdGUgbWV0aG9kcyBpbnZva2VkIGZyb20gZXZlbnQgbGlzdGVuZXJzLlxuXG4gIF91cGRhdGVTdGVyZW9FZmZlY3QoZW5hYmxlZCkge1xuICAgIHRoaXMuc3RlcmVvRWZmZWN0RW5hYmxlZCA9IGVuYWJsZWQ7XG4gIH1cblxuICBfdXBkYXRlUG9zZShwb3NpdGlvbkFycmF5LCBxdWF0ZXJuaW9uQXJyYXkpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgdGhpcy5wb3NpdGlvbltpXSA9IHBvc2l0aW9uQXJyYXlbaV07XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICB0aGlzLnF1YXRlcm5pb25baV0gPSBxdWF0ZXJuaW9uQXJyYXlbaV07XG4gICAgfVxuICB9XG5cbiAgX3VwZGF0ZUlucHV0UG9zZShwb3NpdGlvbkFycmF5LCBxdWF0ZXJuaW9uQXJyYXksIGluZGV4KSB7XG4gICAgaWYgKGluZGV4ID49IHRoaXMuZ2FtZXBhZHMubGVuZ3RoKSB7IHJldHVybjsgfVxuICAgIGNvbnN0IGdhbWVwYWQgPSB0aGlzLmdhbWVwYWRzW2luZGV4XTtcbiAgICBjb25zdCBwb3NlID0gZ2FtZXBhZC5wb3NlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICBwb3NlLnBvc2l0aW9uW2ldID0gcG9zaXRpb25BcnJheVtpXTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgIHBvc2Uub3JpZW50YXRpb25baV0gPSBxdWF0ZXJuaW9uQXJyYXlbaV07XG4gICAgfVxuICB9XG5cbiAgX3VwZGF0ZUlucHV0QnV0dG9uUHJlc3NlZChwcmVzc2VkLCBjb250cm9sbGVySW5kZXgsIGJ1dHRvbkluZGV4KSB7XG4gICAgaWYgKGNvbnRyb2xsZXJJbmRleCA+PSB0aGlzLmdhbWVwYWRzLmxlbmd0aCkgeyByZXR1cm47IH1cbiAgICBjb25zdCBnYW1lcGFkID0gdGhpcy5nYW1lcGFkc1tjb250cm9sbGVySW5kZXhdO1xuICAgIGlmIChidXR0b25JbmRleCA+PSBnYW1lcGFkLmJ1dHRvbnMubGVuZ3RoKSB7IHJldHVybjsgfVxuICAgIGdhbWVwYWQuYnV0dG9uc1tidXR0b25JbmRleF0ucHJlc3NlZCA9IHByZXNzZWQ7XG4gICAgZ2FtZXBhZC5idXR0b25zW2J1dHRvbkluZGV4XS52YWx1ZSA9IHByZXNzZWQgPyAxLjAgOiAwLjA7XG4gIH1cblxuICBfdXBkYXRlSW5wdXRBeGVzQ2hhbmdlZCh2YWx1ZSwgY29udHJvbGxlckluZGV4LCBheGVzSW5kZXgpIHtcbiAgICBpZiAoY29udHJvbGxlckluZGV4ID49IHRoaXMuZ2FtZXBhZHMubGVuZ3RoKSB7IHJldHVybjsgfVxuICAgIGNvbnN0IGdhbWVwYWQgPSB0aGlzLmdhbWVwYWRzW2NvbnRyb2xsZXJJbmRleF07XG4gICAgaWYgKGF4ZXNJbmRleCA+PSBnYW1lcGFkLmF4ZXMubGVuZ3RoKSB7IHJldHVybjsgfVxuICAgIGdhbWVwYWQuYXhlc1theGVzSW5kZXhdID0gdmFsdWU7XG4gIH1cblxuICBfdXBkYXRlSW5wdXRBeGVzKGNvbnRyb2xsZXJJbmRleCwgeCwgeSkge1xuICAgIGlmIChjb250cm9sbGVySW5kZXggPj0gdGhpcy5nYW1lcGFkcy5sZW5ndGgpIHsgcmV0dXJuOyB9XG4gICAgY29uc3QgZ2FtZXBhZCA9IHRoaXMuZ2FtZXBhZHNbY29udHJvbGxlckluZGV4XTtcbiAgICBnYW1lcGFkLmF4ZXNbMF0gPSB4O1xuICAgIGdhbWVwYWQuYXhlc1sxXSA9IHk7XG4gIH1cblxuICBfaW5pdGlhbGl6ZUNvbnRyb2xsZXJzKGNvbmZpZykge1xuICAgIGNvbnN0IGhhc0NvbnRyb2xsZXIgPSBjb25maWcuY29udHJvbGxlcnMgIT09IHVuZGVmaW5lZDtcbiAgICBjb25zdCBjb250cm9sbGVyTnVtID0gaGFzQ29udHJvbGxlciA/IGNvbmZpZy5jb250cm9sbGVycy5sZW5ndGggOiAwO1xuICAgIHRoaXMuZ2FtZXBhZHMubGVuZ3RoID0gMDtcbiAgICB0aGlzLmdhbWVwYWRJbnB1dFNvdXJjZXMubGVuZ3RoID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRyb2xsZXJOdW07IGkrKykge1xuICAgICAgY29uc3QgY29udHJvbGxlciA9IGNvbmZpZy5jb250cm9sbGVyc1tpXTtcbiAgICAgIGNvbnN0IGlkID0gY29udHJvbGxlci5pZCB8fCAnJztcbiAgICAgIGNvbnN0IGhhc1Bvc2l0aW9uID0gY29udHJvbGxlci5oYXNQb3NpdGlvbiB8fCBmYWxzZTtcbiAgICAgIGNvbnN0IGJ1dHRvbk51bSA9IGNvbnRyb2xsZXIuYnV0dG9uTnVtIHx8IDA7XG4gICAgICBjb25zdCBwcmltYXJ5QnV0dG9uSW5kZXggPSBjb250cm9sbGVyLnByaW1hcnlCdXR0b25JbmRleCAhPT0gdW5kZWZpbmVkID8gY29udHJvbGxlci5wcmltYXJ5QnV0dG9uSW5kZXggOiAwO1xuICAgICAgY29uc3QgcHJpbWFyeVNxdWVlemVCdXR0b25JbmRleCA9IGNvbnRyb2xsZXIucHJpbWFyeVNxdWVlemVCdXR0b25JbmRleCAhPT0gdW5kZWZpbmVkID8gY29udHJvbGxlci5wcmltYXJ5U3F1ZWV6ZUJ1dHRvbkluZGV4IDogLTE7XG4gICAgICB0aGlzLmdhbWVwYWRzLnB1c2goY3JlYXRlR2FtZXBhZChpZCwgaSA9PT0gMCA/ICdyaWdodCcgOiAnbGVmdCcsIGJ1dHRvbk51bSwgaGFzUG9zaXRpb24pKTtcbiAgICAgIC8vIEBUT0RPOiB0YXJnZXRSYXlNb2RlIHNob3VsZCBiZSBzY3JlZW4gZm9yIHJpZ2h0IGNvbnRyb2xsZXIocG9pbnRlcikgaW4gQVJcbiAgICAgIGNvbnN0IGltcHV0U291cmNlSW1wbCA9IG5ldyBHYW1lcGFkWFJJbnB1dFNvdXJjZSh0aGlzLCB7fSwgcHJpbWFyeUJ1dHRvbkluZGV4LCBwcmltYXJ5U3F1ZWV6ZUJ1dHRvbkluZGV4KTtcbiAgICAgIGltcHV0U291cmNlSW1wbC5hY3RpdmUgPSAhdGhpcy5hckRldmljZTsgLy8gT3ZlcnJpZGUgcHJvcGVydHkgZm9yIHRyYW5zaWVudCBpbXB1dFxuICAgICAgdGhpcy5nYW1lcGFkSW5wdXRTb3VyY2VzLnB1c2goaW1wdXRTb3VyY2VJbXBsKTtcbiAgICB9XG4gIH1cblxuICAvLyBTZXQgdXAgZXZlbnQgbGlzdGVuZXJzLiBFdmVudHMgYXJlIHNlbnQgZnJvbSBwYW5lbCB2aWEgYmFja2dyb3VuZC5cblxuICBfc2V0dXBFdmVudExpc3RlbmVycygpIHtcbiAgICBFbmdpbmVFdmVudHMuaW5zdGFuY2UuYWRkRXZlbnRMaXN0ZW5lcignd2VieHItZGV2aWNlJywgZXZlbnQgPT4ge1xuICAgICAgY29uc3QgY29uZmlnID0gZXZlbnQuZGV0YWlsLmRldmljZURlZmluaXRpb247XG5cbiAgICAgIHRoaXMubW9kZXMgPSBjb25maWcubW9kZXMgfHwgREVGQVVMVF9NT0RFUztcbiAgICAgIHRoaXMuZmVhdHVyZXMgPSBjb25maWcuZmVhdHVyZXMgfHwgW107XG4gICAgICB0aGlzLmFyRGV2aWNlID0gdGhpcy5tb2Rlcy5pbmNsdWRlcygnaW1tZXJzaXZlLWFyJyk7XG4gICAgICB0aGlzLnJlc29sdXRpb24gPSBjb25maWcucmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkID8gY29uZmlnLnJlc29sdXRpb24gOiBERUZBVUxUX1JFU09MVVRJT047XG4gICAgICB0aGlzLmRldmljZVNpemUgPSBjb25maWcuc2l6ZSAhPT0gdW5kZWZpbmVkID8gY29uZmlnLnNpemUgOiBERUZBVUxUX0RFVklDRV9TSVpFO1xuXG4gICAgICAvLyBOb3RlOiBKdXN0IGluIGNhc2UgcmVsZWFzZSBwcmltYXJ5IGJ1dHRvbnMgYW5kIHdhaXQgZm9yIHR3byBmcmFtZXMgdG8gZmlyZSBzZWxlY3RlbmQgZXZlbnRcbiAgICAgIC8vICAgICAgIGJlZm9yZSBpbml0aWFsaXplIGNvbnRyb2xsZXJzLlxuICAgICAgLy8gQFRPRE86IFZlcnkgaGFja3kuIFdlIHNob3VsZCBnbyB3aXRoIG1vcmUgcHJvcGVyIHdheS5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5nYW1lcGFkcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCBnYW1lcGFkID0gdGhpcy5nYW1lcGFkc1tpXTtcbiAgICAgICAgY29uc3QgaW5wdXRTb3VyY2VJbXBsID0gdGhpcy5nYW1lcGFkSW5wdXRTb3VyY2VzW2ldO1xuICAgICAgICBpbnB1dFNvdXJjZUltcGwuYWN0aXZlID0gIXRoaXMuYXJEZXZpY2U7XG4gICAgICAgIGlmIChpbnB1dFNvdXJjZUltcGwucHJpbWFyeUJ1dHRvbkluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIGdhbWVwYWQuYnV0dG9uc1tpbnB1dFNvdXJjZUltcGwucHJpbWFyeUJ1dHRvbkluZGV4XS5wcmVzc2VkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0U291cmNlSW1wbC5wcmltYXJ5U3F1ZWV6ZUJ1dHRvbkluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIGdhbWVwYWQuYnV0dG9uc1tpbnB1dFNvdXJjZUltcGwucHJpbWFyeVNxdWVlemVCdXR0b25JbmRleF0ucHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgdGhpcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuX2luaXRpYWxpemVDb250cm9sbGVycyhjb25maWcpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgRW5naW5lRXZlbnRzLmluc3RhbmNlLmFkZEV2ZW50TGlzdGVuZXIoJ3dlYnhyLXBvc2UnLCBldmVudCA9PiB7XG4gICAgICBjb25zdCBwb3NpdGlvbkFycmF5ID0gZXZlbnQuZGV0YWlsLnBvc2l0aW9uO1xuICAgICAgY29uc3QgcXVhdGVybmlvbkFycmF5ID0gZXZlbnQuZGV0YWlsLnF1YXRlcm5pb247XG4gICAgICBpZiAodGhpcy5hckRldmljZSkge1xuICAgICAgICBpZiAodGhpcy5hclNjZW5lKSB7XG4gICAgICAgICAgdGhpcy5fdXBkYXRlUG9zZShwb3NpdGlvbkFycmF5LCBxdWF0ZXJuaW9uQXJyYXkpO1xuICAgICAgICAgIC8vIEluIEFSLW1vZGUsIGVtdWxhdGVkIGhlYWRzZXQgY29ycmVzcG9uZHMgdG8gY2FtZXJhIGluIEFSIHNjZW5lXG4gICAgICAgICAgdGhpcy5hclNjZW5lLnVwZGF0ZUNhbWVyYVRyYW5zZm9ybShwb3NpdGlvbkFycmF5LCBxdWF0ZXJuaW9uQXJyYXkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl91cGRhdGVQb3NlKHBvc2l0aW9uQXJyYXksIHF1YXRlcm5pb25BcnJheSk7XG4gICAgICB9XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgRW5naW5lRXZlbnRzLmluc3RhbmNlLmFkZEV2ZW50TGlzdGVuZXIoJ3dlYnhyLWlucHV0LXBvc2UnLCBldmVudCA9PiB7XG4gICAgICBjb25zdCBwb3NpdGlvbkFycmF5ID0gZXZlbnQuZGV0YWlsLnBvc2l0aW9uO1xuICAgICAgY29uc3QgcXVhdGVybmlvbkFycmF5ID0gZXZlbnQuZGV0YWlsLnF1YXRlcm5pb247XG4gICAgICBjb25zdCBvYmplY3ROYW1lID0gZXZlbnQuZGV0YWlsLm9iamVjdE5hbWU7XG5cbiAgICAgIGlmICh0aGlzLmFyRGV2aWNlKSB7XG4gICAgICAgIC8vIEluIEFSLW1vZGUsIHJpZ2h0IGNvbnRyb2xsZXIgY29ycmVzcG9uZHMgdG8gcG9pbnRlciBhbmQgbGVmdCBjb250cm9sbGVyIGNvcnJlc3BvbmRzIHRvIHRhYmxldFxuICAgICAgICBzd2l0Y2ggKG9iamVjdE5hbWUpIHtcbiAgICAgICAgICBjYXNlICdyaWdodENvbnRyb2xsZXInOlxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlSW5wdXRQb3NlKHBvc2l0aW9uQXJyYXksIHF1YXRlcm5pb25BcnJheSwgMCk7XG4gICAgICAgICAgICBpZiAodGhpcy5hclNjZW5lKSB7XG4gICAgICAgICAgICAgIHRoaXMuYXJTY2VuZS51cGRhdGVQb2ludGVyVHJhbnNmb3JtKHBvc2l0aW9uQXJyYXksIHF1YXRlcm5pb25BcnJheSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdsZWZ0Q29udHJvbGxlcic6XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVJbnB1dFBvc2UocG9zaXRpb25BcnJheSwgcXVhdGVybmlvbkFycmF5LCAxKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFyU2NlbmUpIHtcbiAgICAgICAgICAgICAgdGhpcy5hclNjZW5lLnVwZGF0ZVRhYmxldFRyYW5zZm9ybShwb3NpdGlvbkFycmF5LCBxdWF0ZXJuaW9uQXJyYXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN3aXRjaCAob2JqZWN0TmFtZSkge1xuICAgICAgICAgIGNhc2UgJ3JpZ2h0Q29udHJvbGxlcic6XG4gICAgICAgICAgY2FzZSAnbGVmdENvbnRyb2xsZXInOlxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlSW5wdXRQb3NlKHBvc2l0aW9uQXJyYXksIHF1YXRlcm5pb25BcnJheSxcbiAgICAgICAgICAgICAgb2JqZWN0TmFtZSA9PT0gJ3JpZ2h0Q29udHJvbGxlcicgPyAwIDogMSk7IC8vIEBUT0RPOiByZW1vdmUgbWFnaWMgbnVtYmVyXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgRW5naW5lRXZlbnRzLmluc3RhbmNlLmFkZEV2ZW50TGlzdGVuZXIoJ3dlYnhyLWlucHV0LWJ1dHRvbicsIGV2ZW50ID0+IHtcbiAgICAgIC8vIElnbm9yZSBidXR0b24gdHJpZ2dlciBpbiBBUiBtb2RlXG4gICAgICAvLyBAVE9ETzogRGlzYWJsZSBidXR0b24gaW4gZGV2dG9vbCBwYW5lbCBpbiBBUiBtb2RlXG4gICAgICBpZiAodGhpcy5hckRldmljZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByZXNzZWQgPSBldmVudC5kZXRhaWwucHJlc3NlZDtcbiAgICAgIGNvbnN0IG9iamVjdE5hbWUgPSBldmVudC5kZXRhaWwub2JqZWN0TmFtZTtcbiAgICAgIGNvbnN0IGJ1dHRvbkluZGV4ID0gZXZlbnQuZGV0YWlsLmJ1dHRvbkluZGV4O1xuXG4gICAgICBzd2l0Y2ggKG9iamVjdE5hbWUpIHtcbiAgICAgICAgY2FzZSAncmlnaHRDb250cm9sbGVyJzpcbiAgICAgICAgY2FzZSAnbGVmdENvbnRyb2xsZXInOlxuICAgICAgICAgIHRoaXMuX3VwZGF0ZUlucHV0QnV0dG9uUHJlc3NlZChwcmVzc2VkLFxuICAgICAgICAgICAgb2JqZWN0TmFtZSA9PT0gJ3JpZ2h0Q29udHJvbGxlcicgPyAwIDogMSwgLy8gQFRPRE86IHJlbW92ZSBtYWdpYyBudW1iZXJcbiAgICAgICAgICAgIGJ1dHRvbkluZGV4KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9LCBmYWxzZSk7XG5cbiAgICBFbmdpbmVFdmVudHMuaW5zdGFuY2UuYWRkRXZlbnRMaXN0ZW5lcignd2VieHItaW5wdXQtYXhlcycsIGV2ZW50ID0+IHtcbiAgICAgIGlmICh0aGlzLmFyRGV2aWNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdmFsdWUgPSBldmVudC5kZXRhaWwudmFsdWU7XG4gICAgICBjb25zdCBvYmplY3ROYW1lID0gZXZlbnQuZGV0YWlsLm9iamVjdE5hbWU7XG4gICAgICBjb25zdCBheGVzSW5kZXggPSBldmVudC5kZXRhaWwuYXhlc0luZGV4O1xuXG4gICAgICBzd2l0Y2ggKG9iamVjdE5hbWUpIHtcbiAgICAgICAgY2FzZSAncmlnaHRDb250cm9sbGVyJzpcbiAgICAgICAgY2FzZSAnbGVmdENvbnRyb2xsZXInOlxuICAgICAgICAgIHRoaXMuX3VwZGF0ZUlucHV0QXhlc0NoYW5nZWQodmFsdWUsXG4gICAgICAgICAgICBvYmplY3ROYW1lID09PSAncmlnaHRDb250cm9sbGVyJyA/IDAgOiAxLCAvLyBAVE9ETzogcmVtb3ZlIG1hZ2ljIG51bWJlclxuICAgICAgICAgICAgYXhlc0luZGV4KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9LCBmYWxzZSk7XG5cbiAgICBFbmdpbmVFdmVudHMuaW5zdGFuY2UuYWRkRXZlbnRMaXN0ZW5lcignd2VieHItc3RlcmVvLWVmZmVjdCcsIGV2ZW50ID0+IHtcbiAgICAgIHRoaXMuX3VwZGF0ZVN0ZXJlb0VmZmVjdChldmVudC5kZXRhaWwuZW5hYmxlZCk7XG4gICAgfSk7XG5cbiAgICBFbmdpbmVFdmVudHMuaW5zdGFuY2UuYWRkRXZlbnRMaXN0ZW5lcignd2VieHItdmlydHVhbC1yb29tLXJlc3BvbnNlJywgZXZlbnQgPT4ge1xuICAgICAgY29uc3QgdmlydHVhbFJvb21Bc3NldEJ1ZmZlciA9IGV2ZW50LmRldGFpbC5idWZmZXI7XG4gICAgICB0aGlzLmFyU2NlbmUubG9hZFZpcnR1YWxSb29tQXNzZXQodmlydHVhbFJvb21Bc3NldEJ1ZmZlcik7XG4gICAgfSk7XG4gIH1cbn07XG5cbmxldCBTRVNTSU9OX0lEID0gMDtcbmNsYXNzIFNlc3Npb24ge1xuICBjb25zdHJ1Y3Rvcihtb2RlLCBlbmFibGVkRmVhdHVyZXMpIHtcbiAgICB0aGlzLm1vZGUgPSBtb2RlO1xuICAgIHRoaXMuaW1tZXJzaXZlID0gbW9kZSA9PSAnaW1tZXJzaXZlLXZyJyB8fCBtb2RlID09ICdpbW1lcnNpdmUtYXInO1xuICAgIHRoaXMudnIgPSBtb2RlID09PSAnaW1tZXJzaXZlLXZyJztcbiAgICB0aGlzLmFyID0gbW9kZSA9PT0gJ2ltbWVyc2l2ZS1hcic7XG4gICAgdGhpcy5pZCA9ICsrU0VTU0lPTl9JRDtcbiAgICB0aGlzLmJhc2VMYXllciA9IG51bGw7XG4gICAgdGhpcy5pbmxpbmVWZXJ0aWNhbEZpZWxkT2ZWaWV3ID0gTWF0aC5QSSAqIDAuNTtcbiAgICB0aGlzLmVuZGVkID0gZmFsc2U7XG4gICAgdGhpcy5lbmFibGVkRmVhdHVyZXMgPSBlbmFibGVkRmVhdHVyZXM7XG4gIH1cbn1cblxuY29uc3QgY3JlYXRlR2FtZXBhZCA9IChpZCwgaGFuZCwgYnV0dG9uTnVtLCBoYXNQb3NpdGlvbikgPT4ge1xuICBjb25zdCBidXR0b25zID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYnV0dG9uTnVtOyBpKyspIHtcbiAgICBidXR0b25zLnB1c2goe1xuICAgICAgcHJlc3NlZDogZmFsc2UsXG4gICAgICB0b3VjaGVkOiBmYWxzZSxcbiAgICAgIHZhbHVlOiAwLjBcbiAgICB9KTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGlkOiBpZCB8fCAnJyxcbiAgICBwb3NlOiB7XG4gICAgICBoYXNQb3NpdGlvbjogaGFzUG9zaXRpb24sXG4gICAgICBwb3NpdGlvbjogWzAsIDAsIDBdLFxuICAgICAgb3JpZW50YXRpb246IFswLCAwLCAwLCAxXVxuICAgIH0sXG4gICAgYnV0dG9uczogYnV0dG9ucyxcbiAgICBoYW5kOiBoYW5kLFxuICAgIG1hcHBpbmc6ICd4ci1zdGFuZGFyZCcsXG4gICAgYXhlczogWzAsIDBdXG4gIH07XG59O1xuXG5jb25zdCB0bXBWZWMzID0gdmVjMy5jcmVhdGUoKTtcbmNvbnN0IHRyYW5zbGF0ZU9uWCA9IChtYXRyaXgsIGRpc3RhbmNlKSA9PiB7XG4gIHZlYzMuc2V0KHRtcFZlYzMsIGRpc3RhbmNlLCAwLCAwKTtcbiAgcmV0dXJuIG1hdDQudHJhbnNsYXRlKG1hdHJpeCwgbWF0cml4LCB0bXBWZWMzKTtcbn07XG4iLCIvLyBAdHMtbm9jaGVja1xuaW1wb3J0IFdlYlhSUG9seWZpbGwgZnJvbSAnLi93ZWJ4ci1wb2x5ZmlsbC9XZWJYUlBvbHlmaWxsJ1xuaW1wb3J0IHsgWFJfQ09NUEFUSUJMRSB9IGZyb20gJy4vd2VieHItcG9seWZpbGwvY29uc3RhbnRzJ1xuaW1wb3J0IFhSU3lzdGVtIGZyb20gJy4vd2VieHItcG9seWZpbGwvYXBpL1hSU3lzdGVtJ1xuaW1wb3J0IFhSU2Vzc2lvbiwgeyBQUklWQVRFIGFzIFhSU0VTU0lPTl9QUklWQVRFIH0gZnJvbSAnLi93ZWJ4ci1wb2x5ZmlsbC9hcGkvWFJTZXNzaW9uJ1xuaW1wb3J0IFhSRnJhbWUgZnJvbSAnLi93ZWJ4ci1wb2x5ZmlsbC9hcGkvWFJGcmFtZSdcbmltcG9ydCBYUlJpZ2lkVHJhbnNmb3JtIGZyb20gJy4vd2VieHItcG9seWZpbGwvYXBpL1hSUmlnaWRUcmFuc2Zvcm0nXG5pbXBvcnQgWFJIaXRUZXN0U291cmNlIGZyb20gJy4vYXBpL1hSSGl0VGVzdFNvdXJjZSdcbmltcG9ydCBYUkhpdFRlc3RSZXN1bHQgZnJvbSAnLi9hcGkvWFJIaXRUZXN0UmVzdWx0J1xuaW1wb3J0IFhSVHJhbnNpZW50SW5wdXRIaXRUZXN0U291cmNlIGZyb20gJy4vYXBpL1hSVHJhbnNpZW50SW5wdXRIaXRUZXN0U291cmNlJ1xuaW1wb3J0IFhSVHJhbnNpZW50SW5wdXRIaXRUZXN0UmVzdWx0IGZyb20gJy4vYXBpL1hSVHJhbnNpZW50SW5wdXRIaXRUZXN0UmVzdWx0J1xuaW1wb3J0IEFQSSBmcm9tICcuL3dlYnhyLXBvbHlmaWxsL2FwaS9pbmRleCdcbmltcG9ydCBFWF9BUEkgZnJvbSAnLi9hcGkvaW5kZXgnXG5pbXBvcnQgRW11bGF0ZWRYUkRldmljZSBmcm9tICcuL0VtdWxhdGVkWFJEZXZpY2UnXG5pbXBvcnQgeyBFbmdpbmVFdmVudHMgfSBmcm9tICcuLi8uLi9lY3MvY2xhc3Nlcy9FbmdpbmVFdmVudHMnXG5cbi8qKlxuICogQWRhcHRlZCBmcm9tIHRoZSBtb3ppbGxhIHdlYnhyIGVtdWxhdG9yXG4gKiBodHRwczovL2dpdGh1Yi5jb20vTW96aWxsYVJlYWxpdHkvV2ViWFItZW11bGF0b3ItZXh0ZW5zaW9uXG4gKi9cblxuZXhwb3J0IGNsYXNzIFhSRW5naW5lV2ViWFJQb2x5ZmlsbCBleHRlbmRzIFdlYlhSUG9seWZpbGwge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcih7IGdsb2JhbDogZ2xvYmFsVGhpcyB9KVxuICAgIHRoaXMuZ2xvYmFsID0gdGhpcy5nbG9iYWxcblxuICAgIC8vIE5vdGU6IEV4cGVyaW1lbnRhbC5cbiAgICAvLyAgICAgICBPdmVycmlkZSBzb21lIFhSIEFQSXMgdG8gdHJhY2sgYWN0aXZlIGltbWVyc2l2ZSBzZXNzaW9uIHRvXG4gICAgLy8gICAgICAgZW5hYmxlIHRvIGV4aXQgaW1tZXJzaXZlIGJ5IHRoZSBleHRlbnNpb24uXG4gICAgLy8gICAgICAgRXhpdGluZyB3aXRob3V0IHVzZXIgZ2VzdHVyZSBpbiB0aGUgcGFnZSBtaWdodCB2aW9sYXRlIHNlY3VyaXR5IHBvbGljeVxuICAgIC8vICAgICAgIHNvIHRoZXJlIG1pZ2h0IGJlIGEgY2hhbmNlIHRoYXQgd2UgcmVtb3ZlIHRoaXMgZmVhdHVyZSBhdCBzb21lIHBvaW50LlxuXG4gICAgbGV0IGFjdGl2ZUltbWVyc2l2ZVNlc3Npb24gPSBudWxsXG4gICAgY29uc3Qgb3JpZ2luYWxSZXF1ZXN0U2Vzc2lvbiA9IFhSU3lzdGVtLnByb3RvdHlwZS5yZXF1ZXN0U2Vzc2lvblxuICAgIFhSU3lzdGVtLnByb3RvdHlwZS5yZXF1ZXN0U2Vzc2lvbiA9IGZ1bmN0aW9uIChtb2RlLCBlbmFibGVkRmVhdHVyZXM6IGFueSA9IHt9KSB7XG4gICAgICByZXR1cm4gb3JpZ2luYWxSZXF1ZXN0U2Vzc2lvbi5jYWxsKHRoaXMsIG1vZGUsIGVuYWJsZWRGZWF0dXJlcykudGhlbigoc2Vzc2lvbikgPT4ge1xuICAgICAgICBpZiAobW9kZSA9PT0gJ2ltbWVyc2l2ZS12cicgfHwgbW9kZSA9PT0gJ2ltbWVyc2l2ZS1hcicpIHtcbiAgICAgICAgICBhY3RpdmVJbW1lcnNpdmVTZXNzaW9uID0gc2Vzc2lvblxuXG4gICAgICAgICAgLy8gRE9NLU92ZXJsYXkgQVBJXG4gICAgICAgICAgY29uc3Qgb3B0aW9uYWxGZWF0dXJlcyA9IGVuYWJsZWRGZWF0dXJlcy5vcHRpb25hbEZlYXR1cmVzXG4gICAgICAgICAgY29uc3QgZG9tT3ZlcmxheSA9IGVuYWJsZWRGZWF0dXJlcy5kb21PdmVybGF5XG4gICAgICAgICAgaWYgKG9wdGlvbmFsRmVhdHVyZXMgJiYgb3B0aW9uYWxGZWF0dXJlcy5pbmNsdWRlcygnZG9tLW92ZXJsYXknKSAmJiBkb21PdmVybGF5ICYmIGRvbU92ZXJsYXkucm9vdCkge1xuICAgICAgICAgICAgY29uc3QgZGV2aWNlID0gc2Vzc2lvbltYUlNFU1NJT05fUFJJVkFURV0uZGV2aWNlXG4gICAgICAgICAgICBkZXZpY2Uuc2V0RG9tT3ZlcmxheVJvb3QoZG9tT3ZlcmxheS5yb290KVxuICAgICAgICAgICAgc2Vzc2lvbi5kb21PdmVybGF5U3RhdGUgPSB7IHR5cGU6ICdzY3JlZW4nIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlc3Npb25cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3Qgb3JpZ2luYWxFbmQgPSBYUlNlc3Npb24ucHJvdG90eXBlLmVuZFxuICAgIFhSU2Vzc2lvbi5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG9yaWdpbmFsRW5kLmNhbGwodGhpcykudGhlbigoKSA9PiB7XG4gICAgICAgIGlmIChhY3RpdmVJbW1lcnNpdmVTZXNzaW9uID09PSB0aGlzKSB7XG4gICAgICAgICAgYWN0aXZlSW1tZXJzaXZlU2Vzc2lvbiA9IG51bGxcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBFbmdpbmVFdmVudHMuaW5zdGFuY2UuYWRkRXZlbnRMaXN0ZW5lcignd2VieHItZXhpdC1pbW1lcnNpdmUnLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChhY3RpdmVJbW1lcnNpdmVTZXNzaW9uICYmICFhY3RpdmVJbW1lcnNpdmVTZXNzaW9uLmVuZGVkKSB7XG4gICAgICAgIGFjdGl2ZUltbWVyc2l2ZVNlc3Npb24uZW5kKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgYWN0aXZlSW1tZXJzaXZlU2Vzc2lvbiA9IG51bGxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gRXh0ZW5kaW5nIFhSU2Vzc2lvbiBhbmQgWFJGcmFtZSBmb3IgQVIgaGl0dGluZyB0ZXN0IEFQSS5cbiAgICA7KFhSU2Vzc2lvbi5wcm90b3R5cGUgYXMgYW55KS5yZXF1ZXN0SGl0VGVzdFNvdXJjZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICBjb25zdCBzb3VyY2UgPSBuZXcgWFJIaXRUZXN0U291cmNlKHRoaXMsIG9wdGlvbnMpXG4gICAgICBjb25zdCBkZXZpY2UgPSB0aGlzW1hSU0VTU0lPTl9QUklWQVRFXS5kZXZpY2VcbiAgICAgIGRldmljZS5hZGRIaXRUZXN0U291cmNlKHNvdXJjZSlcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoc291cmNlKVxuICAgIH1cbiAgICA7KFhSU2Vzc2lvbi5wcm90b3R5cGUgYXMgYW55KS5yZXF1ZXN0SGl0VGVzdFNvdXJjZUZvclRyYW5zaWVudElucHV0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IHNvdXJjZSA9IG5ldyBYUlRyYW5zaWVudElucHV0SGl0VGVzdFNvdXJjZSh0aGlzLCBvcHRpb25zKVxuICAgICAgY29uc3QgZGV2aWNlID0gdGhpc1tYUlNFU1NJT05fUFJJVkFURV0uZGV2aWNlXG4gICAgICBkZXZpY2UuYWRkSGl0VGVzdFNvdXJjZUZvclRyYW5zaWVudElucHV0KHNvdXJjZSlcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoc291cmNlKVxuICAgIH1cbiAgICA7KFhSRnJhbWUucHJvdG90eXBlIGFzIGFueSkuZ2V0SGl0VGVzdFJlc3VsdHMgPSBmdW5jdGlvbiAoaGl0VGVzdFNvdXJjZSkge1xuICAgICAgY29uc3QgZGV2aWNlID0gdGhpcy5zZXNzaW9uW1hSU0VTU0lPTl9QUklWQVRFXS5kZXZpY2VcbiAgICAgIGNvbnN0IGhpdFRlc3RSZXN1bHRzID0gZGV2aWNlLmdldEhpdFRlc3RSZXN1bHRzKGhpdFRlc3RTb3VyY2UpXG4gICAgICBjb25zdCByZXN1bHRzID0gW11cbiAgICAgIGZvciAoY29uc3QgbWF0cml4IG9mIGhpdFRlc3RSZXN1bHRzKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgWFJIaXRUZXN0UmVzdWx0KHRoaXMsIG5ldyBYUlJpZ2lkVHJhbnNmb3JtKG1hdHJpeCkpKVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHNcbiAgICB9XG4gICAgOyhYUkZyYW1lLnByb3RvdHlwZSBhcyBhbnkpLmdldEhpdFRlc3RSZXN1bHRzRm9yVHJhbnNpZW50SW5wdXQgPSBmdW5jdGlvbiAoaGl0VGVzdFNvdXJjZSkge1xuICAgICAgY29uc3QgZGV2aWNlID0gdGhpcy5zZXNzaW9uW1hSU0VTU0lPTl9QUklWQVRFXS5kZXZpY2VcbiAgICAgIGNvbnN0IGhpdFRlc3RSZXN1bHRzID0gZGV2aWNlLmdldEhpdFRlc3RSZXN1bHRzRm9yVHJhbnNpZW50SW5wdXQoaGl0VGVzdFNvdXJjZSlcbiAgICAgIGlmIChoaXRUZXN0UmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICB9XG4gICAgICBjb25zdCByZXN1bHRzID0gW11cbiAgICAgIGZvciAoY29uc3QgbWF0cml4IG9mIGhpdFRlc3RSZXN1bHRzKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgWFJIaXRUZXN0UmVzdWx0KHRoaXMsIG5ldyBYUlJpZ2lkVHJhbnNmb3JtKG1hdHJpeCkpKVxuICAgICAgfVxuICAgICAgY29uc3QgaW5wdXRTb3VyY2UgPSBkZXZpY2UuZ2V0SW5wdXRTb3VyY2VzKClbMF1cbiAgICAgIHJldHVybiBbbmV3IFhSVHJhbnNpZW50SW5wdXRIaXRUZXN0UmVzdWx0KHRoaXMsIHJlc3VsdHMsIGlucHV0U291cmNlKV1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5uYXRpdmVXZWJYUikge1xuICAgICAgLy8gTm90ZTogRXZlbiBpZiBuYXRpdmUgV2ViWFIgQVBJIGlzIGF2YWlsYWJsZSB0aGUgZXh0ZW5zaW9uIG92ZXJyaWRlc1xuICAgICAgLy8gICAgICAgaXQgd2l0aCBXZWJYUiBwb2x5ZmlsbCBiZWNhdXNlIHRoZSBleHRlbnNpb24gZG9lc24ndCB3b3JrIHdpdGhcbiAgICAgIC8vICAgICAgIHRoZSBuYXRpdmUgb25lICh5ZXQpLlxuICAgICAgb3ZlcnJpZGVBUEkoKVxuICAgICAgdGhpcy5pbmplY3RlZCA9IHRydWVcbiAgICAgIHRoaXMuX3BhdGNoTmF2aWdhdG9yWFIoKVxuICAgIH0gZWxzZSB7XG4gICAgICBpbnN0YWxsRVhfQVBJKClcbiAgICAgIC8vIE5vdGU6IFdlYlhSIEFQSSBwb2x5ZmlsbCBjYW4gYmUgb3ZlcnJpZGRlbiBieSBuYXRpdmUgV2ViWFIgQVBJIG9uIHRoZSBsYXRlc3QgQ2hyb21lIDc4XG4gICAgICAvLyAgICAgICBhZnRlciB0aGUgZXh0ZW5zaW9uIGlzIGxvYWRlZCBidXQgYmVmb3JlIGxvYWRpbmcgcGFnZSBpcyBjb21wbGV0ZWRcbiAgICAgIC8vICAgICAgIGlmIHRoZSBuYXRpdmUgV2ViWFIgQVBJIGlzIGRpc2FibGVkIHZpYSBjaHJvbWU6Ly9mbGFncyBhbmQgdGhlIHBhZ2UgaW5jbHVkZXNcbiAgICAgIC8vICAgICAgIFdlYlhSIG9yaWdpbiB0cmlhbC5cbiAgICAgIC8vICAgICAgIEhlcmUgaXMgYSB3b3JrYXJvdW5kLiBDaGVjayBpZiBYUiBjbGFzcyBpcyBuYXRpdmUgY29kZSB3aGVuIG5vZGUgaXMgYXBwZW5kZWQgb3JcbiAgICAgIC8vICAgICAgIHRoZSBwYWdlIGlzIGxvYWRlZC4gSWYgaXQgZGV0ZWN0cywgb3ZlcnJpZGUgV2ViWFIgQVBJIHdpdGggdGhlIHBvbHlmaWxsLlxuICAgICAgLy8gQFRPRE86IFJlbW92ZSB0aGlzIHdvcmthcm91bmQgaWYgdGhlIG1ham9yIGJyb3dzZXIgb2ZmaWNpYWxseSBzdXBwb3J0IG5hdGl2ZSBXZWJYUiBBUElcbiAgICAgIGxldCBvdmVycmlkZGVuID0gZmFsc2VcbiAgICAgIGNvbnN0IG92ZXJyaWRlSWZOZWVkZWQgPSAoKSA9PiB7XG4gICAgICAgIGlmIChvdmVycmlkZGVuKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTmF0aXZlRnVuY3Rpb24odGhpcy5nbG9iYWwuWFJTeXN0ZW0pKSB7XG4gICAgICAgICAgb3ZlcnJpZGVBUEkoKVxuICAgICAgICAgIG92ZXJyaWRkZW4gPSB0cnVlXG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKGxpc3QpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCByZWNvcmQgb2YgbGlzdCkge1xuICAgICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiByZWNvcmQuYWRkZWROb2Rlcykge1xuICAgICAgICAgICAgaWYgKChub2RlIGFzIGFueSkubG9jYWxOYW1lID09PSAnc2NyaXB0JyAmJiBvdmVycmlkZUlmTmVlZGVkKCkpIHtcbiAgICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChvdmVycmlkZGVuKSB7XG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQsIHsgc3VidHJlZTogdHJ1ZSwgY2hpbGRMaXN0OiB0cnVlIH0pXG4gICAgICBjb25zdCBvbkxvYWQgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKCFvdmVycmlkZGVuKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgICAgICAgb3ZlcnJpZGVJZk5lZWRlZCgpXG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIG9uTG9hZClcbiAgICAgIH1cbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBvbkxvYWQpXG4gICAgfVxuICB9XG5cbiAgX3BhdGNoTmF2aWdhdG9yWFIoKSB7XG4gICAgY29uc3QgZGV2aWNlUHJvbWlzZSA9IHJlcXVlc3RYUkRldmljZSgpXG4gICAgdGhpcy54ciA9IG5ldyBYUlN5c3RlbShkZXZpY2VQcm9taXNlKVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmdsb2JhbC5uYXZpZ2F0b3IsICd4cicsIHtcbiAgICAgIHZhbHVlOiB0aGlzLnhyLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSlcbiAgfVxufVxuXG5jb25zdCByZXF1ZXN0WFJEZXZpY2UgPSBhc3luYyAoKSA9PiB7XG4gIC8vIHJlc29sdmUgd2hlbiByZWNlaXZpbmcgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzIGZyb20gY29udGVudC1zY3JpcHQgYXMgYW4gZXZlbnRcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBjYWxsYmFjayA9IChldmVudCkgPT4ge1xuICAgICAgRW5naW5lRXZlbnRzLmluc3RhbmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dlYnhyLWRldmljZS1pbml0JywgY2FsbGJhY2spXG4gICAgICByZXNvbHZlKFxuICAgICAgICBuZXcgRW11bGF0ZWRYUkRldmljZShcbiAgICAgICAgICBnbG9iYWxUaGlzLFxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oe30sIGV2ZW50LmRldGFpbC5kZXZpY2VEZWZpbml0aW9uLCB7IHN0ZXJlb0VmZmVjdDogZXZlbnQuZGV0YWlsLnN0ZXJlb0VmZmVjdCB9KVxuICAgICAgICApXG4gICAgICApXG4gICAgfVxuICAgIEVuZ2luZUV2ZW50cy5pbnN0YW5jZS5hZGRFdmVudExpc3RlbmVyKCd3ZWJ4ci1kZXZpY2UtaW5pdCcsIGNhbGxiYWNrLCBmYWxzZSlcbiAgfSlcbn1cblxuLy8gRWFzeSBuYXRpdmUgZnVuY3Rpb24gZGV0ZWN0aW9uLlxuY29uc3QgaXNOYXRpdmVGdW5jdGlvbiA9IChmdW5jKSA9PiB7XG4gIHJldHVybiAvXFxbbmF0aXZlIGNvZGVcXF0vaS50ZXN0KGZ1bmMudG9TdHJpbmcoKSlcbn1cblxuY29uc3Qgb3ZlcnJpZGVBUEkgPSAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdXZWJYUiBlbXVsYXRvciBleHRlbnNpb24gb3ZlcnJpZGVzIG5hdGl2ZSBXZWJYUiBBUEkgd2l0aCBwb2x5ZmlsbC4nKVxuICBmb3IgKGNvbnN0IGNsYXNzTmFtZSBpbiBBUEkpIHtcbiAgICBnbG9iYWxUaGlzW2NsYXNzTmFtZV0gPSBBUElbY2xhc3NOYW1lXVxuICB9XG4gIGluc3RhbGxFWF9BUEkoKVxuXG4gIC8vIFNpbmNlIChkZXNrdG9wKSBDaHJvbWUgODggV2ViR0woMilSZW5kZXJpbmdDb250ZXh0Lm1ha2VYUkNvbXBhdGlibGUoKSBzZWVtc1xuICAvLyB0byBzdGFydCB0byByZWplY3QgaWYgbm8gaW1tZXJzaXZlIFhSIGRldmljZSBpcyBwbHVnZ2VkIGluLlxuICAvLyBTbyB3ZSBuZWVkIHRvIG92ZXJyaWRlIHRoZW0sIHRvby4gT3RoZXJ3aXNlIEpTIGVuZ2luZXMvYXBwcyBpbmNsdWRpbmdcbiAgLy8gXCJhd2FpdCBjb250ZXh0Lm1ha2VYUkNvbXBhdGlibGUoKTtcIiB3b24ndCB3b3JrIHdpdGggdGhlIGV4dGVuc2lvbi5cbiAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Nb3ppbGxhUmVhbGl0eS9XZWJYUi1lbXVsYXRvci1leHRlbnNpb24vaXNzdWVzLzI2NlxuICBpZiAodHlwZW9mIFdlYkdMUmVuZGVyaW5nQ29udGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBvdmVycmlkZU1ha2VYUkNvbXBhdGlibGUoV2ViR0xSZW5kZXJpbmdDb250ZXh0KVxuICB9XG4gIGlmICh0eXBlb2YgV2ViR0wyUmVuZGVyaW5nQ29udGV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBvdmVycmlkZU1ha2VYUkNvbXBhdGlibGUoV2ViR0wyUmVuZGVyaW5nQ29udGV4dClcbiAgfVxufVxuXG5jb25zdCBpbnN0YWxsRVhfQVBJID0gKCkgPT4ge1xuICBmb3IgKGNvbnN0IGNsYXNzTmFtZSBpbiBFWF9BUEkpIHtcbiAgICBnbG9iYWxUaGlzW2NsYXNzTmFtZV0gPSBFWF9BUElbY2xhc3NOYW1lXVxuICB9XG59XG5cbmNvbnN0IG92ZXJyaWRlTWFrZVhSQ29tcGF0aWJsZSA9IChDb250ZXh0KSA9PiB7XG4gIENvbnRleHQucHJvdG90eXBlLm1ha2VYUkNvbXBhdGlibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpc1tYUl9DT01QQVRJQkxFXSA9IHRydWVcbiAgICAvLyBUaGlzIGlzIGFsbCBmYWtlLCBzbyBqdXN0IHJlc29sdmUgaW1tZWRpYXRlbHkuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJQUklWQVRFIiwiWFJQb3NlIiwiZ2xNYXRyaXguQVJSQVlfVFlQRSIsImdsTWF0cml4LkVQU0lMT04iLCJjcmVhdGUiLCJ2ZWM0LmNsb25lIiwidmVjNC5mcm9tVmFsdWVzIiwidmVjNC5jb3B5IiwidmVjNC5ub3JtYWxpemUiLCJ2ZWMzLmNyZWF0ZSIsInZlYzMuZnJvbVZhbHVlcyIsImRvdCIsInZlYzMuZG90IiwidmVjMy5jcm9zcyIsInZlYzMubGVuIiwidmVjMy5ub3JtYWxpemUiLCJtYXQzLmNyZWF0ZSIsIm1hdDQuaWRlbnRpdHkiLCJtYXQ0LmdldFRyYW5zbGF0aW9uIiwicXVhdC5jcmVhdGUiLCJtYXQ0LmdldFJvdGF0aW9uIiwibWF0NC5mcm9tUm90YXRpb25UcmFuc2xhdGlvbiIsInF1YXQuZnJvbVZhbHVlcyIsIm1hdDQuaW52ZXJ0IiwiWFJSaWdpZFRyYW5zZm9ybSIsIlNFU1NJT05fUFJJVkFURSIsIm1hdDQubXVsdGlwbHkiLCJYUkZSQU1FX1BSSVZBVEUiLCJYUlNlc3Npb24iLCJTRVNTSU9OX0lEIiwibWF0NC5jcmVhdGUiLCJTZXNzaW9uIiwibWF0NC5wZXJzcGVjdGl2ZSIsInF1YXQuY29weSIsInF1YXQuc2xlcnAiLCJ2ZWMzLnRyYW5zZm9ybVF1YXQiLCJxdWF0LmNsb25lIiwicXVhdC5pbnZlcnQiLCJxdWF0Lm11bHRpcGx5IiwidmVjMy5jb3B5IiwidmVjMy5hZGQiLCJ2ZWMzLmNsb25lIiwidmVjMy5zY2FsZSIsInF1YXQuZnJvbUV1bGVyIiwidmVjMy5hbmdsZSIsInF1YXQubm9ybWFsaXplIiwibWF0NC5jb3B5IiwicmVxdWVzdFhSRGV2aWNlIiwidmVjNC5zZXQiLCJ2ZWM0LmNyZWF0ZSIsInZlYzQudHJhbnNmb3JtTWF0NCIsInZlYzMuc2V0IiwibWF0NC5mcm9tUm90YXRpb24iLCJtYXQ0LmZyb21UcmFuc2xhdGlvbiIsIlhSUmF5IiwibWF0NC5mcm9tUm90YXRpb25UcmFuc2xhdGlvblNjYWxlIiwibWF0NC5yb3RhdGVZIiwibWF0NC5yb3RhdGVYIiwiWFJTRVNTSU9OX1BSSVZBVEUiLCJ2ZWMzLnRyYW5zZm9ybU1hdDQiLCJtYXQ0LnRyYW5zbGF0ZSJdLCJtYXBwaW5ncyI6IjhJQWVBLEtBQU1BLElBQVUsT0FBTyxnQ0FFUixRQUFrQixDQUMvQixhQUFjLENBQ1osS0FBS0EsSUFBVyxDQUNkLFVBQVcsR0FBSSxNQVFuQixpQkFBaUIsRUFBTSxFQUFVLENBQy9CLEdBQUksTUFBTyxJQUFTLFNBQVksS0FBTSxJQUFJLE9BQU0sMkJBQ2hELEdBQUksTUFBTyxJQUFhLFdBQWMsS0FBTSxJQUFJLE9BQU0saUNBRXRELEtBQU0sR0FBaUIsS0FBS0EsSUFBUyxVQUFVLElBQUksSUFBUyxHQUM1RCxFQUFlLEtBQUssR0FDcEIsS0FBS0EsSUFBUyxVQUFVLElBQUksRUFBTSxHQU9wQyxvQkFBb0IsRUFBTSxFQUFVLENBQ2xDLEdBQUksTUFBTyxJQUFTLFNBQVksS0FBTSxJQUFJLE9BQU0sMkJBQ2hELEdBQUksTUFBTyxJQUFhLFdBQWMsS0FBTSxJQUFJLE9BQU0saUNBRXRELEtBQU0sR0FBaUIsS0FBS0EsSUFBUyxVQUFVLElBQUksSUFBUyxHQUU1RCxPQUFTLEdBQUksRUFBZSxPQUFRLEdBQUssRUFBRyxJQUMxQyxBQUFJLEVBQWUsS0FBTyxHQUN4QixFQUFlLE1BU3JCLGNBQWMsRUFBTSxFQUFPLENBQ3pCLEtBQU0sR0FBaUIsS0FBS0EsSUFBUyxVQUFVLElBQUksSUFBUyxHQUt0RCxFQUFRLEdBQ2QsT0FBUyxHQUFJLEVBQUcsRUFBSSxFQUFlLE9BQVEsSUFDekMsRUFBTSxHQUFLLEVBQWUsR0FHNUIsT0FBUyxLQUFZLEdBQ25CLEVBQVMsR0FLWCxBQUFJLE1BQU8sTUFBSyxLQUFLLE1BQVksWUFDL0IsS0FBSyxLQUFLLEtBQVEsSUMzRGpCLEtBQU1BLEdBQVUsT0FBTyx1QkFFakIsR0FBaUIsQ0FBQyxTQUFVLGVBQWdCLGdCQUVuRCxHQUEwQixDQUM5QixPQUFVLENBQ1IsaUJBQWtCLENBQUMsVUFDbkIsaUJBQWtCLElB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LEVBQUUsSUFDWixFQUFJLElBQU0sRUFBRSxJQUNaLEVBQUksSUFBTSxFQUFFLElBQ1osRUFBSSxJQUFNLEVBQUUsSUFDWixFQUFJLElBQU0sRUFBRSxJQUNMLEVBNkZGLFdBQWtCLEVBQUssQ0FDNUIsU0FBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxJQUFNLEVBQ1YsRUFBSSxJQUFNLEVBQ1YsRUFBSSxJQUFNLEVBQ1YsRUFBSSxJQUFNLEVBQ1YsRUFBSSxJQUFNLEVBQ1YsRUFBSSxJQUFNLEVBQ0gsRUE0REYsV0FBZ0IsRUFBSyxFQUFHLENBQzdCLEdBQUksR0FBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLElBQ1IsRUFBTSxFQUFFLElBQ1IsRUFBTSxFQUFFLElBQ1IsRUFBTSxFQUFFLElBQ1IsRUFBTSxFQUFFLElBQ1IsRUFBTSxFQUFFLElBQ1IsRUFBTSxFQUFNLEVBQU0sRUFBTSxFQUN4QixFQUFNLEVBQU0sRUFBTSxFQUFNLEVBQ3hCLEVBQU0sRUFBTSxFQUFNLEVBQU0sRUFDeEIsRUFBTSxFQUFNLEVBQU0sRUFBTSxFQUN4QixFQUFNLEVBQU0sRUFBTSxFQUFNLEVBQ3hCLEVBQU0sRUFBTSxFQUFNLEVBQU0sRUFDeEIsR0FBTSxFQUFNLEVBQU0sRUFBTSxFQUN4QixHQUFNLEVBQU0sRUFBTSxFQUFNLEVBQ3hCLEdBQU0sRUFBTSxFQUFNLEVBQU0sRUFDeEIsR0FBTSxFQUFNLEVBQU0sRUFBTSxFQUN4QixHQUFNLEVBQU0sRUFBTSxFQUFNLEVBQ3hCLEdBQU0sRUFBTSxFQUFNLEVBQU0sRUFFeEIsRUFBTSxFQUFNLEdBQU0sRUFBTSxHQUFNLEVBQU0sR0FBTSxFQUFNLEdBQU0sRUFBTSxHQUFNLEVBQU0sR0FFNUUsTUFBSyxHQUlMLEdBQU0sRUFBTSxFQUNaLEVBQUksR0FBTSxHQUFNLEdBQU0sRUFBTSxHQUFNLEVBQU0sSUFBTyxFQUMvQyxFQUFJLEdBQU0sR0FBTSxHQUFNLEVBQU0sR0FBTSxFQUFNLElBQU8sRUFDL0MsRUFBSSxHQUFNLEdBQU0sRUFBTSxFQUFNLEVBQU0sRUFBTSxHQUFPLEVBQy9DLEVBQUksR0FBTSxHQUFNLEVBQU0sRUFBTSxFQUFNLEVBQU0sR0FBTyxFQUMvQyxFQUFJLEdBQU0sR0FBTSxHQUFNLEVBQU0sR0FBTSxFQUFNLElBQU8sRUFDL0MsRUFBSSxHQUFNLEdBQU0sR0FBTSxFQUFNLEdBQU0sRUFBTSxJQUFPLEVBQy9DLEVBQUksR0FBTSxHQUFNLEVBQU0sRUFBTSxFQUFNLEVBQU0sR0FBTyxFQUMvQyxFQUFJLEdBQU0sR0FBTSxFQUFNLEVBQU0sRUFBTSxFQUFNLEdBQU8sRUFDL0MsRUFBSSxHQUFNLEdBQU0sR0FBTSxFQUFNLEdBQU0sRUFBTSxJQUFPLEVBQy9DLEVBQUksR0FBTSxHQUFNLEdBQU0sRUFBTSxHQUFNLEVBQU0sSUFBTyxFQUMvQyxFQUFJLElBQU8sR0FBTSxFQUFNLEVBQU0sRUFBTSxFQUFNLEdBQU8sRUFDaEQsRUFBSSxJQUFPLEdBQU0sRUFBTSxFQUFNLEVBQU0sRUFBTSxHQUFPLEVBQ2hELEVBQUksSUFBTyxHQUFNLEdBQU0sRUFBTSxHQUFNLEVBQU0sSUFBTyxFQUNoRCxFQUFJLElBQU8sR0FBTSxHQUFNLEVBQU0sR0FBTSxFQUFNLElBQU8sRUFDaEQsRUFBSSxJQUFPLEdBQU0sRUFBTSxFQUFNLEVBQU0sRUFBTSxHQUFPLEVBQ2hELEVBQUksSUFBTyxHQUFNLEVBQU0sRUFBTSxFQUFNLEVBQU0sR0FBTyxFQUN6QyxHQXBCRSxLQWlISixXQUFrQixFQUFLLEVBQUcsRUFBRyxDQUNsQyxHQUFJLEdBQU0sRUFBRSxHQUNSLEVBQU0sRUFBRSxHQUNSLEVBQU0sRUFBRSxHQUNSLEVBQU0sRUFBRSxHQUNSLEVBQU0sRUFBRSxHQUNSLEVBQU0sRUFBRSxHQUNSLEVBQU0sRUFBRSxHQUNSLEVBQU0sRUFBRSxHQUNSLEVBQU0sRUFBRSxHQUNSLEVBQU0sRUFBRSxHQUNSLEVBQU0sRUFBRSxJQUNSLEVBQU0sRUFBRSxJQUNSLEVBQU0sRUFBRSxJQUNSLEVBQU0sRUFBRSxJQUNSLEVBQU0sRUFBRSxJQUNSLEVBQU0sRUFBRSxJQUVSLEVBQUssRUFBRSxHQUNQLEVBQUssRUFBRSxHQUNQLEVBQUssRUFBRSxHQUNQLEVBQUssRUFBRSxHQUNYLFNBQUksR0FBSyxFQUFLLEVBQU0sRUFBSyxFQUFNLEVBQUssRUFBTSxFQUFLLEVBQy9DLEVBQUksR0FBSyxFQUFLLEVBQU0sRUFBSyxFQUFNLEVBQUssRUFBTSxFQUFLLEVBQy9DLEVBQUksR0FBSyxFQUFLLEVBQU0sRUFBSyxFQUFNLEVBQUssRUFBTSxFQUFLLEVBQy9DLEVBQUksR0FBSyxFQUFLLEVBQU0sRUFBSyxFQUFNLEVBQUssRUFBTSxFQUFLLEVBQy9DLEVBQUssRUFBRSxHQUNQLEVBQUssRUFBRSxHQUNQLEVBQUssRUFBRSxHQUNQLEVBQUssRUFBRSxHQUNQLEVBQUksR0FBSyxFQUFLLEVBQU0sRUFBSyxFQUFNLEVBQUssRUFBTSxFQUFLLEVBQy9DLEVBQUksR0FBSyxFQUFLLEVBQU0sRUFBSyxFQUFNLEVBQUssRUFBTSxFQUFLLEVBQy9DLEVBQUksR0FBSyxFQUFLLEVBQU0sRUFBSyxFQUFNLEVBQUssRUFBTSxFQUFLLEVBQy9DLEVBQUksR0FBSyxFQUFLLEVBQU0sRUFBSyxFQUFNLEVBQUssRUFBTSxFQUFLLEVBQy9DLEVBQUssRUFBRSxHQUNQLEVBQUssRUFBRSxHQUNQLEVBQUssRUFBRSxJQUNQLEVBQUssRUFBRSxJQUNQLEVBQUksR0FBSyxFQUFLLEVBQU0sRUFBSyxFQUFNLEVBQUssRUFBTSxFQUFLLEVBQy9DLEVBQUksR0FBSyxFQUFLLEVBQU0sRUFBSyxFQUFNLEVBQUssRUFBTSxFQUFLLEVBQy9DLEVBQUksSUFBTSxFQUFLLEVBQU0sRUFBSyxFQUFNLEVBQUssRUFBTSxFQUFLLEVBQ2hELEVBQUksSUFBTSxFQUFLLEVBQU0sRUFBSyxFQUFNLEVBQUssRUFBTSxFQUFLLEVBQ2hELEVBQUssRUFBRSxJQUNQLEVBQUssRUFBRSxJQUNQLEVBQUssRUFBRSxJQUNQLEVBQUssRUFBRSxJQUNQLEVBQUksSUFBTSxFQUFLLEVBQU0sRUFBSyxFQUFNLEVBQUssRUFBTSxFQUFLLEVBQ2hELEVBQUksSUFBTSxFQUFLLEVBQU0sRUFBSyxFQUFNLEVBQUssRUFBTSxFQUFLLEVBQ2hELEVBQUksSUFBTSxFQUFLLEVBQU0sRUFBSyxFQUFNLEVBQUssRUFBTSxFQUFLLEVBQ2hELEVBQUksSUFBTSxFQUFLLEVBQU0sRUFBSyxFQUFNLEVBQUssRUFBTSxFQUFLLEVBQ3pDLEVBV0YsWUFBbUIsRUFBSyxFQUFHLEVBQUcsQ0FDbkMsR0FBSSxHQUFJLEVBQUUsR0FDTixFQUFJLEVBQUUsR0FDTixFQUFJLEVBQUUsR0FDTixFQUFLLEVBQUssRUFBSyxFQUNmLEVBQUssRUFBSyxFQUFLLEVBQ2YsRUFBSyxFQUFLLEVBQUssRUFFbkIsTUFBSSxLQUFNLEVBQ1IsR0FBSSxJQUFNLEVBQUUsR0FBSyxFQUFJLEVBQUUsR0FBSyxFQUFJLEVBQUUsR0FBSyxFQUFJLEVBQUUsSUFDN0MsRUFBSSxJQUFNLEVBQUUsR0FBSyxFQUFJLEVBQUUsR0FBSyxFQUFJLEVBQUUsR0FBSyxFQUFJLEVBQUUsSUFDN0MsRUFBSSxJQUFNLEVBQUUsR0FBSyxFQUFJLEVBQUUsR0FBSyxFQUFJLEVBQUUsSUFBTSxFQUFJLEVBQUUsSUFDOUMsRUFBSSxJQUFNLEVBQUUsR0FBSyxFQUFJLEVBQUUsR0FBSyxFQUFJLEVBQUUsSUFBTSxFQUFJLEVBQUUsS0FFOUMsR0FBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLElBQ1IsRUFBTSxFQUFFLElBQ1IsRUFBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxHQUFLLEVBQ1QsRUFBSSxJQUFNLEVBQ1YsRUFBSSxJQUFNLEVBQ1YsRUFBSSxJQUFNLEVBQU0sRUFBSSxFQUFNLEVBQUksRUFBTSxFQUFJLEVBQUUsSUFDMUMsRUFBSSxJQUFNLEVBQU0sRUFBSSxFQUFNLEVBQUksRUFBTSxFQUFJLEVBQUUsSUFDMUMsRUFBSSxJQUFNLEVBQU0sRUFBSSxFQUFNLEVBQUksRUFBTSxFQUFJLEVBQUUsSUFDMUMsRUFBSSxJQUFNLEVBQU0sRUFBSSxFQUFNLEVBQUksRUFBTSxFQUFJLEVBQUUsS0FHckMsRUEwSEYsWUFBaUIsRUFBSyxFQUFHLEVBQUssQ0FDbkMsR0FBSSxHQUFJLEtBQUssSUFBSSxHQUNiLEVBQUksS0FBSyxJQUFJLEdBQ2IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLEdBQ1IsRUFBTSxFQUFFLElBQ1IsRUFBTSxFQUFFLElBRVosTUFBSSxLQUFNLEdBRVIsR0FBSSxHQUFLLEVBQUUsR0FDWCxFQUFJLEdBQUssRUFBRSxHQUNYLEVBQUksR0FBSyxFQUFFLEdBQ1gsRUFBSSxHQUFLLEVBQUUsR0FDWCxFQUFJLElBQU0sRUFBRSxJQUNaLEVBQUksSUFBTSxFQUFFLElBQ1osRUFBSSxJQUFNLEVBQUUsSUFDWixFQUFJLElBQU0sRUFBRSxLQUlkLEVBQUksR0FBSyxFQUFNLEVBQUksRUFBTSxFQUN6QixFQUFJ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LElBQ25FLEVBQUksR0FBSyxLQUFLLE1BQU8sRUFBTSxHQUFFLEdBQUssRUFBRSxHQUFLLEVBQUUsR0FBSyxFQUFFLElBQVEsRUFBTSxFQUFNLEVBQU0sR0FDNUUsRUFBSSxHQUFLLEtBQUssTUFBTyxFQUFNLEdBQUUsR0FBSyxFQUFFLEdBQUssRUFBRSxHQUFLLEVBQUUsSUFBUSxFQUFNLEVBQU0sRUFBTSxXQUNsRSxJQUFVLE1BQ3BCLEVBQUksR0FBSyxLQUFLLE1BQU8sRUFBTSxHQUFFLEdBQUssRUFBRSxHQUFLLEVBQUUsR0FBSyxFQUFFLElBQVEsRUFBTSxFQUFNLEVBQU0sR0FDNUUsRUFBSSxHQUFLLEtBQUssS0FBTyxFQUFPLEVBQU0sR0FBRSxHQUFLLEVBQUUsR0FBSyxFQUFFLEdBQUssRUFBRSxJQUFNLEdBQUksSUFDbkUsRUFBSSxHQUFLLEtBQUssTUFBTyxFQUFNLEdBQUUsR0FBSyxFQUFFLEdBQUssRUFBRSxHQUFLLEVBQUUsSUFBUSxFQUFNLEVBQU0sRUFBTSxXQUNsRSxJQUFVLE1BQ3BCLEVBQUksR0FBSyxLQUFLLE1BQU8sRUFBTSxHQUFFLEdBQUssRUFBRSxHQUFLLEVBQUUsR0FBSyxFQUFFLElBQVEsRUFBTSxFQUFNLEVBQU0sR0FDNUUsRUFBSSxHQUFLLEtBQUssTUFBTyxFQUFNLEdBQUUsR0FBSyxFQUFFLEdBQUssRUFBRSxHQUFLLEVBQUUsSUFBUSxFQUFNLEVBQU0sRUFBTSxHQUM1RSxFQUFJLEdBQUssS0FBSyxLQUFPLEVBQU8sRUFBTSxHQUFFLEdBQUssRUFBRSxHQUFLLEVBQUUsR0FBSyxFQUFFLElBQU0sR0FBSSxZQUN6RCxJQUFVLE1BQ3BCLEVBQUksR0FBSyxLQUFLLE1BQU8sRUFBTSxHQUFFLEdBQUssRUFBRSxHQUFLLEVBQUUsR0FBSyxFQUFFLElBQVEsRUFBTSxFQUFNLEVBQU0sR0FDNUUsRUFBSSxHQUFLLEtBQUssTUFBTyxFQUFNLEdBQUUsR0FBSyxFQUFFLEdBQUssRUFBRSxHQUFLLEVBQUUsSUFBUSxFQUFNLEVBQU0sRUFBTSxHQUM1RSxFQUFJLEdBQUss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
