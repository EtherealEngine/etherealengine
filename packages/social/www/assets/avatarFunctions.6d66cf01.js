import{I as Cr,O as We,D as en,T as Pr,F as Qe,B as Pe,a as Kn,U as Xn,b as tn,c as Dr,d as Fr,e as Br,f as kr,g as De,L as nn,h as st,C as $n,i as Fe,j as ee,k as Yn,l as _t,m as sn,M as Be,n as rn,o as Ee,p as on,q as Ur,r as Nr,N as Gr,t as Jn,u as jr,v as Hr,w as qr,x as Zn,y as an,z as Vr,R as rt,A as es,E as zr,H as Wr,J as ln,K as Qr,X as Kr,Y as Xr,Z as $r,_ as ts,$ as ns,a0 as ss,s as Et,a1 as it,a2 as St,a3 as It,a4 as rs,a5 as Yr,a6 as is,a7 as Jr,a8 as Zr,G as ke,P as os,a9 as re,aa as as,ab as cn,ac as un,ad as ls,ae as Rt,af as Ue,ag as V,ah as pn,ai as ei,aj as Mt,ak as ti,V as _,al as ni,am as cs,an as Lt,ao as si,ap as Ke,aq as hn,ar as ri,as as ii,at as oi,Q as j,au as ai,av as us,aw as li,ax as ci,ay as ps,az as hs}from"./three.module.493739a3.js";import{_ as ui}from"./index.7b02be28.js";import{f as pi,n as hi}from"./vendor.475cb2ff.js";const Xe=typeof process!="object"||typeof process.versions!="object"||typeof process.versions.node=="undefined",fi={RESET_ENGINE:"CORE_RESET_ENGINE",INITIALIZED_ENGINE:"CORE_INITIALIZED_ENGINE",CONNECT_TO_WORLD:"CORE_CONNECT_TO_WORLD",CONNECT_TO_WORLD_TIMEOUT:"CORE_CONNECT_TO_WORLD_TIMEOUT",JOINED_WORLD:"CORE_JOINED_WORLD",LEAVE_WORLD:"CORE_LEAVE_WORLD",SCENE_LOADED:"CORE_SCENE_LOADED",ENABLE_SCENE:"CORE_ENABLE_SCENE",USER_ENGAGE:"CORE_USER_ENGAGE",WINDOW_FOCUS:"CORE_WINDOW_FOCUS",ENTITY_DEBUG_DATA:"CORE_ENTITY_DEBUG_DATA",OBJECT_HOVER:"INTERACTIVE_SYSTEM_OBJECT_HOVER",OBJECT_ACTIVATION:"INTERACTIVE_SYSTEM_OBJECT_ACTIVATION",PORTAL_REDIRECT_EVENT:"PHYSICS_SYSTEM_PORTAL_REDIRECT",XR_START:"WEBXR_RENDERER_SYSTEM_XR_START",XR_SESSION:"WEBXR_RENDERER_SYSTEM_XR_SESSION",XR_END:"WEBXR_RENDERER_SYSTEM_XR_END",CONNECT:"NETWORK_CONNECT",CONNECTION_LOST:"CORE_CONNECTION_LOST",AVATAR_DEBUG:"CORE_AVATAR_DEBUG",PHYSICS_DEBUG:"CORE_PHYSICS_DEBUG",START_SUSPENDED_CONTEXTS:"POSITIONAL_AUDIO_START_SUSPENDED_CONTEXTS",SUSPEND_POSITIONAL_AUDIO:"POSITIONAL_AUDIO_SUSPEND_POSITIONAL_AUDIO",BROWSER_NOT_SUPPORTED:"BROWSER_NOT_SUPPORTED"};class ne{static instance=new ne;static EVENTS=fi;_listeners={};reset(){Object.keys(ne.instance._listeners).forEach(e=>{delete ne.instance._listeners[e]})}once(e,t,...n){const s=r=>{ne.instance.removeEventListener(e,s),t(r)};ne.instance.addEventListener(e,s)}addEventListener(e,t,...n){const s=ne.instance._listeners;s[e]===void 0&&(s[e]=[]),s[e].indexOf(t)===-1&&s[e].push(t)}hasEventListener(e,t,...n){return ne.instance._listeners[e]!==void 0&&ne.instance._listeners[e].indexOf(t)!==-1}removeEventListener(e,t,...n){const s=ne.instance._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}removeAllListenersForEvent(e,t,...n){t?delete ne.instance._listeners[e]:ne.instance._listeners[e]=[]}dispatchEvent(e,...t){const n=ne.instance._listeners[e.type];if(n!==void 0){const s=n.slice(0);for(let r=0;r<s.length;r++)s[r].call(ne.instance,e,...t)}}}var Se={i8:"i8",ui8:"ui8",ui8c:"ui8c",i16:"i16",ui16:"ui16",i32:"i32",ui32:"ui32",f32:"f32",f64:"f64",eid:"eid"},Ot={i8:"Int8",ui8:"Uint8",ui8c:"Uint8Clamped",i16:"Int16",ui16:"Uint16",i32:"Int32",ui32:"Uint32",eid:"Uint32",f32:"Float32",f64:"Float64"},me={i8:Int8Array,ui8:Uint8Array,ui8c:Uint8ClampedArray,i16:Int16Array,ui16:Uint16Array,i32:Int32Array,ui32:Uint32Array,f32:Float32Array,f64:Float64Array,eid:Uint32Array},Ct={uint8:2**8,uint16:2**16,uint32:2**32},di=i=>e=>Math.ceil(e/i)*i,fs=di(4),mi=Symbol("storeRef"),ot=Symbol("storeSize"),yi=Symbol("storeMaps"),ye=Symbol("storeFlattened"),Pt=Symbol("storeBase"),ds=Symbol("storeType"),fn=Symbol("storeArrayCount"),we=Symbol("storeSubarrays"),at=Symbol("subarrayCursors"),ms=Symbol("subarray"),dn=Symbol("subarrayFrom"),mn=Symbol("subarrayTo"),yn=Symbol("subStore"),gn=Symbol("tagStore"),Dt=Symbol("indexType"),Ft=Symbol("indexBytes"),ys=Symbol("isEidType"),be={},gs=(i,e)=>{const t=new ArrayBuffer(e*i.BYTES_PER_ELEMENT),n=new i.constructor(t);return n.set(i,0),n},gi=(i,e)=>{if(ArrayBuffer.isView(i))i[e]=i.slice(0);else{const t=i[yn].slice(0);i[e]=i.map((n,s)=>{const r=i[s][dn],o=i[s][mn];return t.subarray(r,o)})}},wi=(i,e,t)=>{const n=i[at];let s=e[ds];const r=e[0].length,o=r<=Ct.uint8?Se.ui8:r<=Ct.uint16?Se.ui16:Se.ui32;if(n[s]===0){const c=i[fn][s],p=Array(c).fill(0).reduce((h,f)=>h+r,0),u=new me[s](fs(p*t));u.set(i[we][s]),i[we][s]=u,u[Dt]=Ot[o],u[Ft]=me[o].BYTES_PER_ELEMENT}const a=n[s];let l=0;for(let c=0;c<t;c++){const p=n[s]+c*r,u=p+r;e[c]=i[we][s].subarray(p,u),e[c][dn]=p,e[c][mn]=u,e[c][ms]=!0,e[c][Dt]=Ot[o],e[c][Ft]=me[o].BYTES_PER_ELEMENT,l=u}n[s]=l,e[yn]=i[we][s].subarray(a,l)},ws=(i,e,t)=>{Object.keys(e).forEach(n=>{const s=e[n];Array.isArray(s)?(wi(i,s,t),e[ye].push(s)):ArrayBuffer.isView(s)?(e[n]=gs(s,t),e[ye].push(e[n])):typeof s=="object"&&ws(i,e[n],t)})},bs=(i,e)=>{i[gn]||(i[ot]=e,i[ye].length=0,Object.keys(i[at]).forEach(t=>{i[at][t]=0}),ws(i,i,e))},vs=(i,e)=>{i[ye]&&i[ye].forEach(t=>{ArrayBuffer.isView(t)?t[e]=0:t[e].fill(0)})},bi=(i,e)=>{const t=e*me[i].BYTES_PER_ELEMENT,n=new ArrayBuffer(t),s=new me[i](n);return s[ys]=i===Se.eid,s},vi=(i,e,t)=>{const n=i[ot],s=Array(n).fill(0);s[ds]=e,s[ys]=e===Se.eid;const r=i[at],o=t<=Ct.uint8?Se.ui8:t<=Ct.uint16?Se.ui16:Se.ui32;if(!t)throw new Error("bitECS - Must define component array length");if(!me[e])throw new Error(`bitECS - Invalid component array property type ${e}`);if(!i[we][e]){const c=i[fn][e],p=Array(c).fill(0).reduce((h,f)=>h+t,0),u=new me[e](fs(p*n));i[we][e]=u,u[Dt]=Ot[o],u[Ft]=me[o].BYTES_PER_ELEMENT}const a=r[e];let l=0;for(let c=0;c<n;c++){const p=r[e]+c*t,u=p+t;s[c]=i[we][e].subarray(p,u),s[c][dn]=p,s[c][mn]=u,s[c][ms]=!0,s[c][Dt]=Ot[o],s[c][Ft]=me[o].BYTES_PER_ELEMENT,l=u}return r[e]=l,s[yn]=i[we][e].subarray(a,l),s},Ts=i=>Array.isArray(i)&&typeof i[0]=="string"&&typeof i[1]=="number",Ti=(i,e)=>{const t=Symbol("store");if(!i||!Object.keys(i).length)return be[t]={[ot]:e,[gn]:!0,[Pt]:()=>be[t]},be[t];i=JSON.parse(JSON.stringify(i));const n={},s=o=>{const a=Object.keys(o);for(const l of a)Ts(o[l])?(n[o[l][0]]||(n[o[l][0]]=0),n[o[l][0]]++):o[l]instanceof Object&&s(o[l])};s(i);const r={[ot]:e,[yi]:{},[we]:{},[mi]:t,[at]:Object.keys(me).reduce((o,a)=>({...o,[a]:0}),{}),[ye]:[],[fn]:n};if(i instanceof Object&&Object.keys(i).length){const o=(a,l)=>{if(typeof a[l]=="string")a[l]=bi(a[l],e),a[l][Pt]=()=>be[t],r[ye].push(a[l]);else if(Ts(a[l])){const[c,p]=a[l];a[l]=vi(r,c,p),a[l][Pt]=()=>be[t],r[ye].push(a[l])}else a[l]instanceof Object&&(a[l]=Object.keys(a[l]).reduce(o,a[l]));return a};return be[t]=Object.assign(Object.keys(i).reduce(o,i),r),be[t][Pt]=()=>be[t],be[t]}},Ne=()=>{const i=[],e=[];i.sort=function(r){const o=Array.prototype.sort.call(this,r);for(let a=0;a<i.length;a++)e[i[a]]=a;return o};const t=r=>i[e[r]]===r;return{add:r=>{t(r)||(e[r]=i.push(r)-1)},remove:r=>{if(!t(r))return;const o=e[r],a=i.pop();a!==r&&(i[o]=a,e[a]=o)},has:t,sparse:e,dense:i}},le=Symbol("entityMasks"),$e=Symbol("entityComponents"),Ie=Symbol("entitySparseSet"),lt=Symbol("entityArray"),xi=1e5,wn=0,ct=xi,Ai=()=>ct-ct/5,Bt=()=>ct,bn=[],_i=()=>wn,Ei=new Map,ka=i=>{if(wn>=Ai()){const t=ct,n=Math.ceil(t/2/4)*4,s=t+n;ct=s,qi(s),Bi(s),console.info(`\u{1F47E} bitECS - resizing all data stores from ${t} to ${s}`)}const e=bn.length>0?bn.shift():wn++;return i[Ie].add(e),Ei.set(e,i),i[vn].forEach(t=>{Ut(i,t,e)&&Nt(t,e)}),i[$e].set(e,new Set),e},Si=(i,e)=>{if(!!i[Ie].has(e)){i[kt].forEach(t=>{xn(i,t,e)}),bn.push(e),i[Ie].remove(e),i[$e].delete(e),i[Es].delete(i[En].get(e)),i[En].delete(e);for(let t=0;t<i[le].length;t++)i[le][t][e]=0}},xs=(i,e)=>Array.from(i[$e].get(e));function Ua(i){return()=>[i,"not"]}var kt=Symbol("queries"),vn=Symbol("notQueries"),Ii=Symbol("queryAny"),Ri=Symbol("queryAll"),Mi=Symbol("queryNone"),Re=Symbol("queryMap"),ut=Symbol("$dirtyQueries"),As=Symbol("queryComponents"),Li=i=>e=>{e[Re].has(i)||Tn(e,i);const t=e[Re].get(i),n=t.entered.dense.slice();return t.entered=Ne(),n},Oi=i=>e=>{e[Re].has(i)||Tn(e,i);const t=e[Re].get(i),n=t.exited.dense.slice();return t.exited=Ne(),n},Tn=(i,e)=>{const t=[],n=[],s=[];e[As].forEach(x=>{if(typeof x=="function"){const[S,M]=x();i[ge].has(S)||An(i,S),M==="not"&&n.push(S),M==="changed"&&(s.push(S),t.push(S))}else i[ge].has(x)||An(i,x),t.push(x)});const r=x=>i[ge].get(x),o=t.concat(n).map(r),a=Ne(),l=[],c=[],p=Ne(),u=Ne(),h=Ne(),f=o.map(x=>x.generationId).reduce((x,S)=>(x.includes(S)||x.push(S),x),[]),d=(x,S)=>(x[S.generationId]||(x[S.generationId]=0),x[S.generationId]|=S.bitflag,x),m=t.map(r).reduce(d,{}),w=n.map(r).reduce(d,{}),y=o.reduce(d,{}),b=t.filter(x=>!x[gn]).map(x=>Object.getOwnPropertySymbols(x).includes(ye)?x[ye]:[x]).reduce((x,S)=>x.concat(S),[]),E=b.map(x=>{const S=Symbol();return gi(x,S),x[S]},[]),R=Object.assign(a,{archetypes:l,changed:c,components:t,notComponents:n,changedComponents:s,allComponents:o,masks:m,notMasks:w,hasMasks:y,generations:f,flatProps:b,toRemove:p,entered:u,exited:h,shadows:E});i[Re].set(e,R),i[kt].add(R),o.forEach(x=>{x.queries.add(R)}),n.length&&i[vn].add(R);for(let x=0;x<_i();x++){if(!i[Ie].has(x))continue;Ut(i,R,x)&&Nt(R,x)}},Ci=(i,e)=>{e&&(i.changed=[]);const{flatProps:t,shadows:n}=i;for(let s=0;s<i.dense.length;s++){const r=i.dense[s];let o=!1;for(let a=0;a<t.length;a++){const l=t[a],c=n[a];if(ArrayBuffer.isView(l[r])){for(let p=0;p<l[r].length;p++)if(l[r][p]!==c[r][p]){o=!0;break}c[r].set(l[r])}else l[r]!==c[r]&&(o=!0,c[r]=l[r])}o&&i.changed.push(r)}return i.changed},Pi=(...i)=>{let e,t,n,s;if(Array.isArray(i[0])&&(e=i[0]),e===void 0||e[ge]!==void 0)return o=>o?o[lt]:e[lt];const r=function(o,a=!0){o[Re].has(r)||Tn(o,r);const l=o[Re].get(r);return Fi(o),l.changedComponents.length?Ci(l,a):l.dense};return r[As]=e,r[Ii]=t,r[Ri]=n,r[Mi]=s,r},Ut=(i,e,t)=>{const{masks:n,notMasks:s,generations:r}=e;for(let o=0;o<r.length;o++){const a=r[o],l=n[a],c=s[a],p=i[le][a][t];if(c&&(p&c)!=0||l&&(p&l)!==l)return!1}return!0},Nt=(i,e)=>{i.has(e)||(i.add(e),i.entered.add(e))},Di=i=>{for(let e=i.toRemove.dense.length-1;e>=0;e--){const t=i.toRemove.dense[e];i.toRemove.remove(t),i.remove(t)}},Fi=i=>{!i[ut].size||(i[ut].forEach(Di),i[ut].clear())},xn=(i,e,t)=>{!e.has(t)||e.toRemove.has(t)||(e.toRemove.add(t),i[ut].add(e),e.exited.add(t))},ge=Symbol("componentMap"),_s=[],Bi=i=>{_s.forEach(e=>bs(e,i))},ki=i=>{const e=Ti(i,Bt());return i&&Object.keys(i).length&&_s.push(e),e},Ui=i=>{i[ht]*=2,i[ht]>=2**31&&(i[ht]=1,i[le].push(new Uint32Array(i[pt])))},An=(i,e)=>{if(!e)throw new Error("bitECS - Cannot register null or undefined component");const t=new Set,n=new Set,s=new Set;i[kt].forEach(r=>{r.allComponents.includes(e)&&t.add(r)}),i[ge].set(e,{generationId:i[le].length-1,bitflag:i[ht],store:e,queries:t,notQueries:n,changedQueries:s}),e[ot]<Bt()&&bs(e,Bt()),Ui(i)},_n=(i,e,t)=>{const n=i[ge].get(e);if(!n)return!1;const{generationId:s,bitflag:r}=n;return(i[le][s][t]&r)===r},Ni=(i,e,t,n=!0)=>{if(t===void 0)throw new Error("bitECS - entity is undefined.");if(!i[Ie].has(t))throw new Error("bitECS - entity does not exist in the world.");if(i[ge].has(e)||An(i,e),_n(i,e,t))return;const s=i[ge].get(e),{generationId:r,bitflag:o,queries:a,notQueries:l}=s;i[le][r][t]|=o,a.forEach(c=>{c.toRemove.has(t)&&c.toRemove.remove(t);const p=Ut(i,c,t);p&&Nt(c,t),p||xn(i,c,t)}),i[$e].get(t).add(e),n&&vs(e,t)},Gi=(i,e,t,n=!1)=>{if(t===void 0)throw new Error("bitECS - entity is undefined.");if(!i[Ie].has(t))throw new Error("bitECS - entity does not exist in the world.");if(!_n(i,e,t))return;const s=i[ge].get(e),{generationId:r,bitflag:o,queries:a}=s;i[le][r][t]&=~o,a.forEach(l=>{l.toRemove.has(t)&&l.toRemove.remove(t);const c=Ut(i,l,t);c&&Nt(l,t),c||xn(i,l,t)}),i[$e].get(t).delete(e),n&&vs(e,t)},pt=Symbol("size"),ji=Symbol("resizeThreshold"),ht=Symbol("bitflag"),Hi=Symbol("archetypes"),Es=Symbol("localEntities"),En=Symbol("localEntityLookp"),Ss=[],qi=i=>{Ss.forEach(e=>{e[pt]=i;for(let t=0;t<e[le].length;t++){const n=e[le][t];e[le][t]=gs(n,i)}e[ji]=e[pt]-e[pt]/5})},Na=(i={})=>{const e=i;return Vi(e),Ss.push(e),e},Vi=i=>{const e=Bt();return i[pt]=e,i[lt]&&i[lt].forEach(t=>Si(i,t)),i[le]=[new Uint32Array(e)],i[$e]=new Map,i[Hi]=[],i[Ie]=Ne(),i[lt]=i[Ie].dense,i[ht]=1,i[ge]=new Map,i[Re]=new Map,i[kt]=new Set,i[vn]=new Set,i[ut]=new Set,i[Es]=new Map,i[En]=new Map,i},Ga=(...i)=>e=>{let t=e;for(let n=0;n<i.length;n++)t=i[n](t);return t};class Ge{static userId;static initOptions;static engineTimer=null;static xrSupported=!1;static isBot=!1;static offlineMode=!1;static isHMD=!1;static isExecuting=!1;static physicsFrameRate=60;static physxWorker=null;static accumulator;static justExecuted;static params;static timeScaleTarget=1;static defaultWorld=null;static currentWorld=null;static worlds=[];static renderer=null;static effectComposer=null;static xrRenderer=null;static xrSession=null;static context=null;static csm=null;static scene=null;static sceneLoaded=!1;static camera=null;static activeCameraEntity;static activeCameraFollowTarget;static cameraTransform;static audioListener=null;static enabled=!0;static tick=0;static useAudioSystem=!1;static inputState=new Map;static prevInputState=new Map;static isInitialized=!1;static hasJoinedWorld=!1;static publicPath;static workers=[];static simpleMaterials=!1;static hasEngaged=!1;static mouseInputEnabled=!0;static keyboardInputEnabled=!0;static xrFrame;static spatialAudio=!1;static xrControllerModel=!0;static getEntityComponents=xs}class zi{name="EXT_remove_materials";parser;constructor(e){this.parser=e}async beforeRoot(){const t=this.parser.json;t.images=[],t.textures=[],t.materials=[],t.samplers=[],t.meshes.forEach(n=>{n.primitives.forEach(s=>{delete s.material})})}loadImage(){return null}loadMaterial(){return null}loadTexture(){return null}}class Wi{name="EXT_mesh_gpu_instancing";parser;constructor(e){this.parser=e}createNodeMesh(e){const n=this.parser.json.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=n.extensions[this.name].attributes,o=[],a={};o.push(this.parser.createNodeMesh(e));for(const l in r)o.push(this.parser.getDependency("accessor",r[l]).then(c=>(a[l]=c,a[l])));return Promise.all(o).then(l=>{const c=l[0];if(!c.isMesh)return c;const u=l[1].count,h=c.matrix.clone(),f=c.position.clone().set(0,0,0),d=c.quaternion.clone().set(0,0,0,1),m=c.scale.clone().set(1,1,1),w=new Cr(c.geometry,c.material,u);for(let y=0;y<u;y++)a.TRANSLATION&&f.fromBufferAttribute(a.TRANSLATION,y),a.ROTATION&&d.fromBufferAttribute(a.ROTATION,y),a.SCALE&&m.fromBufferAttribute(a.SCALE,y),w.setMatrixAt(y,h.compose(f,d,m));return We.prototype.copy.call(w,c),w.frustumCulled=!1,this.parser.assignFinalMaterial(w),w})}loadImage(){return null}loadMaterial(){return null}loadTexture(){return null}}let Gt;const ja=async()=>{if(typeof Gt=="undefined"){const{default:i}=await ui(()=>import("./draco3dgltf.623ad6b3.js").then(function(e){return e.d}),["assets/draco3dgltf.623ad6b3.js","assets/vendor.475cb2ff.js","assets/___vite-browser-external_commonjs-proxy.0e203c6e.js","assets/__vite-browser-external.b6126e45.js"]);Gt=await i.createDecoderModule()}};class Qi{constructor(e){this.timeLoaded=0,this.manager=e||en,this.materials=null,this.verbosity=0,this.attributeOptions={},this.drawMode=Pr,this.nativeAttributeMap={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.dispose=()=>{}}load(e,t,n,s){var r=this,o=new Qe(r.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.load(e,function(a){r.decodeDracoFile(a,t)},n,s)}setPath(e){return this.path=e,this}setVerbosity(e){return this.verbosity=e,this}setDrawMode(e){return this.drawMode=e,this}setSkipDequantization(e,t){var n=!0;return typeof t!="undefined"&&(n=t),this.getAttributeOptions(e).skipDequantization=n,this}decodeDracoFile(e,t,n,s){this.decodeDracoFileInternal(e,Gt,t,n,s)}decodeDracoFileInternal(e,t,n,s,r){var o=new t.DecoderBuffer;o.Init(new Int8Array(e),e.byteLength);var a=new t.Decoder,l=a.GetEncodedGeometryType(o);if(l==t.TRIANGULAR_MESH)this.verbosity>0&&console.log("Loaded a mesh.");else if(l==t.POINT_CLOUD)this.verbosity>0&&console.log("Loaded a point cloud.");else{var c="NodeDRACOLoader: Unknown geometry type.";throw console.error(c),new Error(c)}n(this.convertDracoGeometryTo3JS(t,a,l,o,s,r))}addAttributeToGeometry(e,t,n,s,r,o,a,l){if(o.ptr===0){var c="NodeDRACOLoader: No attribute "+s;throw console.error(c),new Error(c)}var p=o.num_components(),u=n.num_points(),h=u*p,f,d;switch(r){case Float32Array:f=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(n,o,f),l[s]=new Float32Array(h),d=De;break;case Int8Array:f=new e.DracoInt8Array,t.GetAttributeInt8ForAllPoints(n,o,f),l[s]=new Int8Array(h),d=kr;break;case Int16Array:f=new e.DracoInt16Array,t.GetAttributeInt16ForAllPoints(n,o,f),l[s]=new Int16Array(h),d=Br;break;case Int32Array:f=new e.DracoInt32Array,t.GetAttributeInt32ForAllPoints(n,o,f),l[s]=new Int32Array(h),d=Fr;break;case Uint8Array:f=new e.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(n,o,f),l[s]=new Uint8Array(h),d=Dr;break;case Uint16Array:f=new e.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(n,o,f),l[s]=new Uint16Array(h),d=tn;break;case Uint32Array:f=new e.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(n,o,f),l[s]=new Uint32Array(h),d=Xn;break;default:var c="NodeDRACOLoader: Unexpected attribute type.";throw console.error(c),new Error(c)}for(var m=0;m<h;m++)l[s][m]=f.GetValue(m);a.setAttribute(s,new d(l[s],p)),e.destroy(f)}convertDracoGeometryTo3JS(e,t,n,s,r,o){this.getAttributeOptions("position").skipDequantization===!0&&t.SkipAttributeTransform(e.POSITION);var a,l;if(n===e.TRIANGULAR_MESH?(a=new e.Mesh,l=t.DecodeBufferToMesh(s,a)):(a=new e.PointCloud,l=t.DecodeBufferToPointCloud(s,a)),!l.ok()||a.ptr==0){var c="NodeDRACOLoader: Decoding failed: ";throw c+=l.error_msg(),console.error(c),e.destroy(t),e.destroy(a),new Error(c)}e.destroy(s);var p;n==e.TRIANGULAR_MESH?(p=a.num_faces(),this.verbosity>0&&console.log("Number of faces loaded: "+p.toString())):p=0;var u=a.num_points(),h=a.num_attributes();this.verbosity>0&&(console.log("Number of points loaded: "+u.toString()),console.log("Number of attributes loaded: "+h.toString()));var f=t.GetAttributeId(a,e.POSITION);if(f==-1){var c="NodeDRACOLoader: No position attribute found.";throw console.error(c),e.destroy(t),e.destroy(a),new Error(c)}var d=t.GetAttribute(a,f),m={},w=new Pe;if(r)for(var y in r){var b=o[y],E=r[y],R=t.GetAttributeByUniqueId(a,E);this.addAttributeToGeometry(e,t,a,y,b,R,w,m)}else for(var y in this.nativeAttributeMap){var x=t.GetAttributeId(a,e[this.nativeAttributeMap[y]]);if(x!==-1){this.verbosity>0&&console.log("Loaded "+y+" attribute.");var R=t.GetAttribute(a,x);this.addAttributeToGeometry(e,t,a,y,Float32Array,R,w,m)}}if(n==e.TRIANGULAR_MESH)if(this.drawMode===Kn){var S=new e.DracoInt32Array;t.GetTriangleStripsFromMesh(a,S),m.indices=new Uint32Array(S.size());for(var M=0;M<S.size();++M)m.indices[M]=S.GetValue(M);e.destroy(S)}else{var D=p*3;m.indices=new Uint32Array(D);for(var F=new e.DracoInt32Array,M=0;M<p;++M){t.GetFaceFromMesh(a,M,F);var k=M*3;m.indices[k]=F.GetValue(0),m.indices[k+1]=F.GetValue(1),m.indices[k+2]=F.GetValue(2)}e.destroy(F)}w.drawMode=this.drawMode,n==e.TRIANGULAR_MESH&&w.setIndex(new(m.indices.length>65535?Xn:tn)(m.indices,1));var H=new e.AttributeQuantizationTransform;if(H.InitFromAttribute(d)){w.attributes.position.isQuantized=!0,w.attributes.position.maxRange=H.range(),w.attributes.position.numQuantizationBits=H.quantization_bits(),w.attributes.position.minValues=new Float32Array(3);for(var M=0;M<3;++M)w.attributes.position.minValues[M]=H.min_value(M)}return e.destroy(H),e.destroy(t),e.destroy(a),w}isVersionSupported(e,t){t(Gt.isVersionSupported(e))}getAttributeOptions(e){return typeof this.attributeOptions[e]=="undefined"&&(this.attributeOptions[e]={}),this.attributeOptions[e]}}const Sn=new WeakMap;class Ki extends nn{constructor(e){super(e);this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,s){const r=new Qe(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(s)},n,s)}decodeDracoFile(e,t,n,s){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const n=JSON.stringify(t);if(Sn.has(e)){const l=Sn.get(e);if(l.key===n)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(r,o).then(l=>(s=l,new Promise((c,p)=>{s._callbacks[r]={resolve:c,reject:p},s.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),Sn.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new Pe;e.index&&t.setIndex(new st(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const s=e.attributes[n],r=s.name,o=s.array,a=s.itemSize;t.setAttribute(r,new st(o,a))}return t}_loadLibrary(e,t){const n=new Qe(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((s,r)=>{n.load(e,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const s=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const r=Xi.toString(),o=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const o=r.data;switch(o.type){case"decode":s._callbacks[o.id].resolve(o);break;case"error":s._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Xi(){let i,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":i=a.decoderConfig,e=new Promise(function(p){i.onModuleLoaded=function(u){p({draco:u})},DracoDecoderModule(i)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(p=>{const u=p.draco,h=new u.Decoder,f=new u.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{const d=t(u,h,f,c),m=d.attributes.map(w=>w.array.buffer);d.index&&m.push(d.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:d},m)}catch(d){console.error(d),self.postMessage({type:"error",id:a.id,error:d.message})}finally{u.destroy(f),u.destroy(h)}});break}};function t(o,a,l,c){const p=c.attributeIDs,u=c.attributeTypes;let h,f;const d=a.GetEncodedGeometryType(l);if(d===o.TRIANGULAR_MESH)h=new o.Mesh,f=a.DecodeBufferToMesh(l,h);else if(d===o.POINT_CLOUD)h=new o.PointCloud,f=a.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const m={index:null,attributes:[]};for(const w in p){const y=self[u[w]];let b,E;if(c.useUniqueIDs)E=p[w],b=a.GetAttributeByUniqueId(h,E);else{if(E=a.GetAttributeId(h,o[p[w]]),E===-1)continue;b=a.GetAttribute(h,E)}m.attributes.push(s(o,a,h,w,y,b))}return d===o.TRIANGULAR_MESH&&(m.index=n(o,a,h)),o.destroy(h),m}function n(o,a,l){const p=l.num_faces()*3,u=p*4,h=o._malloc(u);a.GetTrianglesUInt32Array(l,u,h);const f=new Uint32Array(o.HEAPF32.buffer,h,p).slice();return o._free(h),{array:f,itemSize:1}}function s(o,a,l,c,p,u){const h=u.num_components(),d=l.num_points()*h,m=d*p.BYTES_PER_ELEMENT,w=r(o,p),y=o._malloc(m);a.GetAttributeDataArrayForAllPoints(l,u,w,m,y);const b=new p(o.HEAPF32.buffer,y,d).slice();return o._free(y),{name:c,array:b,itemSize:h}}function r(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}var In={exports:{}};(function(i,e){var t=typeof self!="undefined"?self:hi,n=function(){function r(){this.fetch=!1,this.DOMException=t.DOMException}return r.prototype=t,new r}();(function(r){(function(o){var a={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(g){return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};function l(g){return g&&DataView.prototype.isPrototypeOf(g)}if(a.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=ArrayBuffer.isView||function(g){return g&&c.indexOf(Object.prototype.toString.call(g))>-1};function u(g){if(typeof g!="string"&&(g=String(g)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(g))throw new TypeError("Invalid character in header field name");return g.toLowerCase()}function h(g){return typeof g!="string"&&(g=String(g)),g}function f(g){var v={next:function(){var C=g.shift();return{done:C===void 0,value:C}}};return a.iterable&&(v[Symbol.iterator]=function(){return v}),v}function d(g){this.map={},g instanceof d?g.forEach(function(v,C){this.append(C,v)},this):Array.isArray(g)?g.forEach(function(v){this.append(v[0],v[1])},this):g&&Object.getOwnPropertyNames(g).forEach(function(v){this.append(v,g[v])},this)}d.prototype.append=function(g,v){g=u(g),v=h(v);var C=this.map[g];this.map[g]=C?C+", "+v:v},d.prototype.delete=function(g){delete this.map[u(g)]},d.prototype.get=function(g){return g=u(g),this.has(g)?this.map[g]:null},d.prototype.has=function(g){return this.map.hasOwnProperty(u(g))},d.prototype.set=function(g,v){this.map[u(g)]=h(v)},d.prototype.forEach=function(g,v){for(var C in this.map)this.map.hasOwnProperty(C)&&g.call(v,this.map[C],C,this)},d.prototype.keys=function(){var g=[];return this.forEach(function(v,C){g.push(C)}),f(g)},d.prototype.values=function(){var g=[];return this.forEach(function(v){g.push(v)}),f(g)},d.prototype.entries=function(){var g=[];return this.forEach(function(v,C){g.push([C,v])}),f(g)},a.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function m(g){if(g.bodyUsed)return Promise.reject(new TypeError("Already read"));g.bodyUsed=!0}function w(g){return new Promise(function(v,C){g.onload=function(){v(g.result)},g.onerror=function(){C(g.error)}})}function y(g){var v=new FileReader,C=w(v);return v.readAsArrayBuffer(g),C}function b(g){var v=new FileReader,C=w(v);return v.readAsText(g),C}function E(g){for(var v=new Uint8Array(g),C=new Array(v.length),X=0;X<v.length;X++)C[X]=String.fromCharCode(v[X]);return C.join("")}function R(g){if(g.slice)return g.slice(0);var v=new Uint8Array(g.byteLength);return v.set(new Uint8Array(g)),v.buffer}function x(){return this.bodyUsed=!1,this._initBody=function(g){this._bodyInit=g,g?typeof g=="string"?this._bodyText=g:a.blob&&Blob.prototype.isPrototypeOf(g)?this._bodyBlob=g:a.formData&&FormData.prototype.isPrototypeOf(g)?this._bodyFormData=g:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)?this._bodyText=g.toString():a.arrayBuffer&&a.blob&&l(g)?(this._bodyArrayBuffer=R(g.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(g)||p(g))?this._bodyArrayBuffer=R(g):this._bodyText=g=Object.prototype.toString.call(g):this._bodyText="",this.headers.get("content-type")||(typeof g=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var g=m(this);if(g)return g;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var g=m(this);if(g)return g;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(F)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function M(g){var v=g.toUpperCase();return S.indexOf(v)>-1?v:g}function D(g,v){v=v||{};var C=v.body;if(g instanceof D){if(g.bodyUsed)throw new TypeError("Already read");this.url=g.url,this.credentials=g.credentials,v.headers||(this.headers=new d(g.headers)),this.method=g.method,this.mode=g.mode,this.signal=g.signal,!C&&g._bodyInit!=null&&(C=g._bodyInit,g.bodyUsed=!0)}else this.url=String(g);if(this.credentials=v.credentials||this.credentials||"same-origin",(v.headers||!this.headers)&&(this.headers=new d(v.headers)),this.method=M(v.method||this.method||"GET"),this.mode=v.mode||this.mode||null,this.signal=v.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&C)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(C)}D.prototype.clone=function(){return new D(this,{body:this._bodyInit})};function F(g){var v=new FormData;return g.trim().split("&").forEach(function(C){if(C){var X=C.split("="),$=X.shift().replace(/\+/g," "),T=X.join("=").replace(/\+/g," ");v.append(decodeURIComponent($),decodeURIComponent(T))}}),v}function k(g){var v=new d,C=g.replace(/\r?\n[\t ]+/g," ");return C.split(/\r?\n/).forEach(function(X){var $=X.split(":"),T=$.shift().trim();if(T){var Q=$.join(":").trim();v.append(T,Q)}}),v}x.call(D.prototype);function H(g,v){v||(v={}),this.type="default",this.status=v.status===void 0?200:v.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in v?v.statusText:"OK",this.headers=new d(v.headers),this.url=v.url||"",this._initBody(g)}x.call(H.prototype),H.prototype.clone=function(){return new H(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},H.error=function(){var g=new H(null,{status:0,statusText:""});return g.type="error",g};var ae=[301,302,303,307,308];H.redirect=function(g,v){if(ae.indexOf(v)===-1)throw new RangeError("Invalid status code");return new H(null,{status:v,headers:{location:g}})},o.DOMException=r.DOMException;try{new o.DOMException}catch(g){o.DOMException=function(v,C){this.message=v,this.name=C;var X=Error(v);this.stack=X.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function J(g,v){return new Promise(function(C,X){var $=new D(g,v);if($.signal&&$.signal.aborted)return X(new o.DOMException("Aborted","AbortError"));var T=new XMLHttpRequest;function Q(){T.abort()}T.onload=function(){var N={status:T.status,statusText:T.statusText,headers:k(T.getAllResponseHeaders()||"")};N.url="responseURL"in T?T.responseURL:N.headers.get("X-Request-URL");var G="response"in T?T.response:T.responseText;C(new H(G,N))},T.onerror=function(){X(new TypeError("Network request failed"))},T.ontimeout=function(){X(new TypeError("Network request failed"))},T.onabort=function(){X(new o.DOMException("Aborted","AbortError"))},T.open($.method,$.url,!0),$.credentials==="include"?T.withCredentials=!0:$.credentials==="omit"&&(T.withCredentials=!1),"responseType"in T&&a.blob&&(T.responseType="blob"),$.headers.forEach(function(N,G){T.setRequestHeader(G,N)}),$.signal&&($.signal.addEventListener("abort",Q),T.onreadystatechange=function(){T.readyState===4&&$.signal.removeEventListener("abort",Q)}),T.send(typeof $._bodyInit=="undefined"?null:$._bodyInit)})}return J.polyfill=!0,r.fetch||(r.fetch=J,r.Headers=d,r.Request=D,r.Response=H),o.Headers=d,o.Request=D,o.Response=H,o.fetch=J,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=n;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,i.exports=e})(In,In.exports);var $i=pi(In.exports);const Me={};class Is extends nn{constructor(e){super(e)}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=$n.get(e);if(o!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;if(Me[e]!==void 0){Me[e].push({onLoad:t,onProgress:n,onError:s});return}const a=/^data:(.*?)(;base64)?,(.*)$/,l=e.match(a);if(l){const c=l[1],p=!!l[2];let u=l[3];u=decodeURIComponent(u),p&&(u=atob(u));try{let h;const f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":const d=new Uint8Array(u.length);for(let w=0;w<u.length;w++)d[w]=u.charCodeAt(w);f==="blob"?h=new Blob([d.buffer],{type:c}):h=d.buffer;break;case"document":h=new DOMParser().parseFromString(u,c);break;case"json":h=JSON.parse(u);break;default:h=u;break}setTimeout(function(){t&&t(h),r.manager.itemEnd(e)},0)}catch(h){setTimeout(function(){s&&s(h),r.manager.itemError(e),r.manager.itemEnd(e)},0)}}else Me[e]=[],Me[e].push({onLoad:t,onProgress:n,onError:s}),$i(e).then(c=>c.blob()).then(async c=>{const p=await c.arrayBuffer(),u=Me[e];r.manager.itemStart(e),delete Me[e],c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),$n.add(e,c);for(let h=0,f=u.length;h<f;h++){const d=u[h];d.onLoad&&d.onLoad(p)}r.manager.itemEnd(e)}).catch(c=>{const p=Me[e];delete Me[e];for(let u=0,h=p.length;u<h;u++){const f=p[u];f.onError&&f.onError(c)}r.manager.itemError(e),r.manager.itemEnd(e)})}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Yi extends nn{constructor(e){super(e);this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new to(t)}),this.register(function(t){return new so(t)}),this.register(function(t){return new ro(t)}),this.register(function(t){return new no(t)}),this.register(function(t){return new Zi(t)}),this.register(function(t){return new io(t)})}load(e,t,n,s){const r=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=Fe.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){s?s(c):console.error(c),r.manager.itemError(e),r.manager.itemEnd(e)},l=new Is(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{r.parse(c,o,function(p){t(p),r.manager.itemEnd(e)},a)}catch(p){a(p)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,s){let r;const o={},a={};if(typeof e=="string")r=e;else if(Fe.decodeText(new Uint8Array(e,0,4))===Rs){try{o[U.KHR_BINARY_GLTF]=new oo(e)}catch(u){s&&s(u);return}r=o[U.KHR_BINARY_GLTF].content}else r=Fe.decodeText(new Uint8Array(e));const l=JSON.parse(r);if(l.asset===void 0||l.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new go(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const u=this.pluginCallbacks[p](c);a[u.name]=u,o[u.name]=!0}if(l.extensionsUsed)for(let p=0;p<l.extensionsUsed.length;++p){const u=l.extensionsUsed[p],h=l.extensionsRequired||[];switch(u){case U.KHR_MATERIALS_UNLIT:o[u]=new eo;break;case U.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[u]=new co;break;case U.KHR_DRACO_MESH_COMPRESSION:o[u]=new ao(l,this.dracoLoader);break;case U.KHR_TEXTURE_TRANSFORM:o[u]=new lo;break;case U.KHR_MESH_QUANTIZATION:o[u]=new uo;break;default:h.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,s)}}function Ji(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const U={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class Zi{constructor(e){this.parser=e,this.name=U.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,s=t.length;n<s;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let s=t.cache.get(n);if(s)return s;const r=t.json,l=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let c;const p=new ee(16777215);l.color!==void 0&&p.fromArray(l.color);const u=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new sn(p),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new _t(p),c.distance=u;break;case"spot":c=new Yn(p),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),s=Promise.resolve(c),t.cache.add(n,s),s}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return n._getNodeRef(t.cache,a,l)})}}class eo{constructor(){this.name=U.KHR_MATERIALS_UNLIT}getMaterialType(){return Be}extendParams(e,t,n){const s=[];e.color=new ee(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}r.baseColorTexture!==void 0&&s.push(n.assignTexture(e,"map",r.baseColorTexture))}return Promise.all(s)}}class to{constructor(e){this.parser=e,this.name=U.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:rn}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ee(a,-a)}return Promise.all(r)}}class no{constructor(e){this.parser=e,this.name=U.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:rn}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class so{constructor(e){this.parser=e,this.name=U.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,s=n.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=n.images[r.source],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,a)}}class ro{constructor(e){this.parser=e,this.name=U.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,a,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class io{constructor(e){this.name=U.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const s=n.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([r,o.ready]).then(function(a){const l=s.byteOffset||0,c=s.byteLength||0,p=s.count,u=s.byteStride,h=new ArrayBuffer(p*u),f=new Uint8Array(a[0],l,c);return o.decodeGltfBuffer(new Uint8Array(h),p,u,f,s.mode,s.filter),h})}else return null}}const Rs="glTF",ft=12,Ms={JSON:1313821514,BIN:5130562};class oo{constructor(e){this.name=U.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,ft);if(this.header={magic:Fe.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Rs)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-ft,s=new DataView(e,ft);let r=0;for(;r<n;){const o=s.getUint32(r,!0);r+=4;const a=s.getUint32(r,!0);if(r+=4,a===Ms.JSON){const l=new Uint8Array(e,ft+r,o);this.content=Fe.decodeText(l)}else if(a===Ms.BIN){const l=ft+r;this.body=e.slice(l,l+o)}r+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class ao{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=U.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const p in o){const u=Mn[p]||p.toLowerCase();a[u]=o[p]}for(const p in e.attributes){const u=Mn[p]||p.toLowerCase();if(o[p]!==void 0){const h=n.accessors[e.attributes[p]],f=dt[h.componentType];c[u]=f,l[u]=h.normalized===!0}}return t.getDependency("bufferView",r).then(function(p){return new Promise(function(u){s.decodeDracoFile(p,function(h){for(const f in h.attributes){const d=h.attributes[f],m=l[f];m!==void 0&&(d.normalized=m)}u(h)},a,c)})})}}class lo{constructor(){this.name=U.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Rn extends on{constructor(e){super();this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),n=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),s=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),a={specular:{value:new ee().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const c in a)l.uniforms[c]=a[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",s).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class co{constructor(){this.name=U.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return Rn}extendParams(e,t,n){const s=t.extensions[this.name];e.color=new ee(1,1,1),e.opacity=1;const r=[];if(Array.isArray(s.diffuseFactor)){const o=s.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(s.diffuseTexture!==void 0&&r.push(n.assignTexture(e,"map",s.diffuseTexture)),e.emissive=new ee(0,0,0),e.glossiness=s.glossinessFactor!==void 0?s.glossinessFactor:1,e.specular=new ee(1,1,1),Array.isArray(s.specularFactor)&&e.specular.fromArray(s.specularFactor),s.specularGlossinessTexture!==void 0){const o=s.specularGlossinessTexture;r.push(n.assignTexture(e,"glossinessMap",o)),r.push(n.assignTexture(e,"specularMap",o))}return Promise.all(r)}createMaterial(e){const t=new Rn(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=Ur,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class uo{constructor(){this.name=U.KHR_MESH_QUANTIZATION}}class Ye extends Nr{constructor(e,t,n,s){super(e,t,n,s)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)t[o]=n[r+o];return t}}Ye.prototype.beforeStart_=Ye.prototype.copySampleValue_;Ye.prototype.afterEnd_=Ye.prototype.copySampleValue_;Ye.prototype.interpolate_=function(i,e,t,n){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=o*2,l=o*3,c=n-e,p=(t-e)/c,u=p*p,h=u*p,f=i*l,d=f-l,m=-2*h+3*u,w=h-u,y=1-m,b=w-u+p;for(let E=0;E!==o;E++){const R=r[d+E+o],x=r[d+E+a]*c,S=r[f+E+o],M=r[f+E]*c;s[E]=y*R+b*x+m*S+w*M}return s};const ve={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},dt={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Ls={9728:Gr,9729:Jn,9984:jr,9985:Hr,9986:qr,9987:Zn},Os={33071:an,33648:Vr,10497:rt},Cs={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Mn={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Le={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},po={CUBICSPLINE:void 0,LINEAR:es,STEP:zr},Ln={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Ps(i,e){return typeof i!="string"||i===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(i)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(i)||/^data:.*,.*$/i.test(i)||/^blob:.*$/i.test(i)?i:e+i)}function ho(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new on({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ei})),i.DefaultMaterial}function mt(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function je(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function fo(i,e,t){let n=!1,s=!1;for(let a=0,l=e.length;a<l;a++){const c=e[a];if(c.POSITION!==void 0&&(n=!0),c.NORMAL!==void 0&&(s=!0),n&&s)break}if(!n&&!s)return Promise.resolve(i);const r=[],o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];if(n){const p=c.POSITION!==void 0?t.getDependency("accessor",c.POSITION):i.attributes.position;r.push(p)}if(s){const p=c.NORMAL!==void 0?t.getDependency("accessor",c.NORMAL):i.attributes.normal;o.push(p)}}return Promise.all([Promise.all(r),Promise.all(o)]).then(function(a){const l=a[0],c=a[1];return n&&(i.morphAttributes.position=l),s&&(i.morphAttributes.normal=c),i.morphTargetsRelative=!0,i})}function mo(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,s=t.length;n<s;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function yo(i){const e=i.extensions&&i.extensions[U.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+Ds(e.attributes):t=i.indices+":"+Ds(i.attributes)+":"+i.mode,t}function Ds(i){let e="";const t=Object.keys(i).sort();for(let n=0,s=t.length;n<s;n++)e+=t[n]+":"+i[t[n]]+";";return e}function On(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class go{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Ji,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap!="undefined"&&/Firefox/.test(navigator.userAgent)===!1?this.textureLoader=new Wr(this.options.manager):this.textureLoader=new ln(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Is(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,s=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:n,userData:{}};mt(r,a,s),je(a,s),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const o=t[s].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const o=e[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const s=n.clone();return s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const s=e(t[n]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let s=this.cache.get(n);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this.loadNode(t);break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this.loadAnimation(t);break;case"camera":s=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[U.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){n.load(Ps(t.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const s=t.byteLength||0,r=t.byteOffset||0;return n.slice(r,r+s)})}loadAccessor(e){const t=this,n=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0)return Promise.resolve(null);const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const a=o[0],l=Cs[s.type],c=dt[s.componentType],p=c.BYTES_PER_ELEMENT,u=p*l,h=s.byteOffset||0,f=s.bufferView!==void 0?n.bufferViews[s.bufferView].byteStride:void 0,d=s.normalized===!0;let m,w;if(f&&f!==u){const y=Math.floor(h/f),b="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+y+":"+s.count;let E=t.cache.get(b);E||(m=new c(a,y*f,s.count*f/p),E=new Qr(m,f/p),t.cache.add(b,E)),w=new Kr(E,l,h%f/p,d)}else a===null?m=new c(s.count*l):m=new c(a,h,s.count*l),w=new st(m,l,d);if(s.sparse!==void 0){const y=Cs.SCALAR,b=dt[s.sparse.indices.componentType],E=s.sparse.indices.byteOffset||0,R=s.sparse.values.byteOffset||0,x=new b(o[1],E,s.sparse.count*y),S=new c(o[2],R,s.sparse.count*l);a!==null&&(w=new st(w.array.slice(),w.itemSize,w.normalized));for(let M=0,D=x.length;M<D;M++){const F=x[M];if(w.setX(F,S[M*l]),l>=2&&w.setY(F,S[M*l+1]),l>=3&&w.setZ(F,S[M*l+2]),l>=4&&w.setW(F,S[M*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return w})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e],r=t.images[s.source];let o=this.textureLoader;if(r.uri){const a=n.manager.getHandler(r.uri);a!==null&&(o=a)}return this.loadTextureImage(e,r,o)}loadTextureImage(e,t,n){const s=this,r=this.json,o=this.options,a=r.textures[e],l=(t.uri||t.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=self.URL||self.webkitURL;let p=t.uri||"",u=!1,h=!0;const f=p.search(/\.jpe?g($|\?)/i)>0||p.search(/^data\:image\/jpeg/)===0;if((t.mimeType==="image/jpeg"||f)&&(h=!1),t.bufferView!==void 0)p=s.getDependency("bufferView",t.bufferView).then(function(m){if(t.mimeType==="image/png"){const y=new DataView(m,25,1).getUint8(0,!1);h=y===6||y===4||y===3}u=!0;const w=new Blob([m],{type:t.mimeType});return p=c.createObjectURL(w),p});else if(t.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(p).then(function(m){return new Promise(function(w,y){let b=w;n.isImageBitmapLoader===!0&&(b=function(E){const R=new Mt(E);R.needsUpdate=!0,w(R)}),n.load(Ps(m,o.path),b,void 0,y)})}).then(function(m){u===!0&&c.revokeObjectURL(p),m.flipY=!1,a.name&&(m.name=a.name),h||(m.format=Xr);const y=(r.samplers||{})[a.sampler]||{};return m.magFilter=Ls[y.magFilter]||Jn,m.minFilter=Ls[y.minFilter]||Zn,m.wrapS=Os[y.wrapS]||rt,m.wrapT=Os[y.wrapT]||rt,s.associations.set(m,{type:"textures",index:e}),m}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",p),null});return this.textureCache[l]=d,d}assignTexture(e,t,n){const s=this;return this.getDependency("texture",n.index).then(function(r){if(n.texCoord!==void 0&&n.texCoord!=0&&!(t==="aoMap"&&n.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),s.extensions[U.KHR_TEXTURE_TRANSFORM]){const o=n.extensions!==void 0?n.extensions[U.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const a=s.associations.get(r);r=s.extensions[U.KHR_TEXTURE_TRANSFORM].extendTexture(r,o),s.associations.set(r,a)}}e[t]=r})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const s=t.attributes.tangent!==void 0,r=t.attributes.color!==void 0,o=t.attributes.normal===void 0,a=Object.keys(t.morphAttributes).length>0,l=a&&t.morphAttributes.normal!==void 0;if(e.isPoints){const c="PointsMaterial:"+n.uuid;let p=this.cache.get(c);p||(p=new $r,ts.prototype.copy.call(p,n),p.color.copy(n.color),p.map=n.map,p.sizeAttenuation=!1,this.cache.add(c,p)),n=p}else if(e.isLine){const c="LineBasicMaterial:"+n.uuid;let p=this.cache.get(c);p||(p=new ns,ts.prototype.copy.call(p,n),p.color.copy(n.color),this.cache.add(c,p)),n=p}if(s||r||o||a){let c="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(c+="specular-glossiness:"),s&&(c+="vertex-tangents:"),r&&(c+="vertex-colors:"),o&&(c+="flat-shading:"),a&&(c+="morph-targets:"),l&&(c+="morph-normals:");let p=this.cache.get(c);p||(p=n.clone(),r&&(p.vertexColors=!0),o&&(p.flatShading=!0),a&&(p.morphTargets=!0),l&&(p.morphNormals=!0),s&&(p.vertexTangents=!0,p.normalScale&&(p.normalScale.y*=-1),p.clearcoatNormalScale&&(p.clearcoatNormalScale.y*=-1)),this.cache.add(c,p),this.associations.set(p,this.associations.get(n))),n=p}n.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return on}loadMaterial(e){const t=this,n=this.json,s=this.extensions,r=n.materials[e];let o;const a={},l=r.extensions||{},c=[];if(l[U.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const u=s[U.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=u.getMaterialType(),c.push(u.extendParams(a,r,t))}else if(l[U.KHR_MATERIALS_UNLIT]){const u=s[U.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),c.push(u.extendParams(a,r,t))}else{const u=r.pbrMetallicRoughness||{};if(a.color=new ee(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const h=u.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}u.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",u.baseColorTexture)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}r.doubleSided===!0&&(a.side=ss);const p=r.alphaMode||Ln.OPAQUE;return p===Ln.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,p===Ln.MASK&&(a.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==Be&&(c.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new Ee(1,-1),r.normalTexture.scale!==void 0&&a.normalScale.set(r.normalTexture.scale,-r.normalTexture.scale)),r.occlusionTexture!==void 0&&o!==Be&&(c.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==Be&&(a.emissive=new ee().fromArray(r.emissiveFactor)),r.emissiveTexture!==void 0&&o!==Be&&c.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture)),Promise.all(c).then(function(){let u;return o===Rn?u=s[U.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):u=new o(a),r.name&&(u.name=r.name),u.map&&(u.map.encoding=Et),u.emissiveMap&&(u.emissiveMap.encoding=Et),je(u,r),t.associations.set(u,{type:"materials",index:e}),r.extensions&&mt(s,u,r),u})}createUniqueName(e){const t=it.sanitizeNodeName(e||"");let n=t;for(let s=1;this.nodeNamesUsed[n];++s)n=t+"_"+s;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,s=this.primitiveCache;function r(a){return n[U.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return Bs(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],p=yo(c),u=s[p];if(u)o.push(u.promise);else{let h;c.extensions&&c.extensions[U.KHR_DRACO_MESH_COMPRESSION]?h=r(c):h=Bs(new Pe,c,t),s[p]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,s=this.extensions,r=n.meshes[e],o=r.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const p=o[l].material===void 0?ho(this.cache):this.getDependency("material",o[l].material);a.push(p)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),p=l[l.length-1],u=[];for(let f=0,d=p.length;f<d;f++){const m=p[f],w=o[f];let y;const b=c[f];if(w.mode===ve.TRIANGLES||w.mode===ve.TRIANGLE_STRIP||w.mode===ve.TRIANGLE_FAN||w.mode===void 0)y=r.isSkinnedMesh===!0?new St(m,b):new It(m,b),y.isSkinnedMesh===!0&&!y.geometry.attributes.skinWeight.normalized&&y.normalizeSkinWeights(),w.mode===ve.TRIANGLE_STRIP?y.geometry=ks(y.geometry,Kn):w.mode===ve.TRIANGLE_FAN&&(y.geometry=ks(y.geometry,rs));else if(w.mode===ve.LINES)y=new Yr(m,b);else if(w.mode===ve.LINE_STRIP)y=new is(m,b);else if(w.mode===ve.LINE_LOOP)y=new Jr(m,b);else if(w.mode===ve.POINTS)y=new Zr(m,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+w.mode);Object.keys(y.geometry.morphAttributes).length>0&&mo(y,r),y.name=t.createUniqueName(r.name||"mesh_"+e),je(y,r),w.extensions&&mt(s,y,w),t.assignFinalMaterial(y),u.push(y)}if(u.length===1)return u[0];const h=new ke;for(let f=0,d=u.length;f<d;f++)h.add(u[f]);return h})}loadCamera(e){let t;const n=this.json.cameras[e],s=n[n.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new os(re.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):n.type==="orthographic"&&(t=new as(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),je(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(s){return n.inverseBindMatrices=s,n})}loadAnimation(e){const n=this.json.animations[e],s=[],r=[],o=[],a=[],l=[];for(let c=0,p=n.channels.length;c<p;c++){const u=n.channels[c],h=n.samplers[u.sampler],f=u.target,d=f.node!==void 0?f.node:f.id,m=n.parameters!==void 0?n.parameters[h.input]:h.input,w=n.parameters!==void 0?n.parameters[h.output]:h.output;s.push(this.getDependency("node",d)),r.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",w)),a.push(h),l.push(f)}return Promise.all([Promise.all(s),Promise.all(r),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const p=c[0],u=c[1],h=c[2],f=c[3],d=c[4],m=[];for(let y=0,b=p.length;y<b;y++){const E=p[y],R=u[y],x=h[y],S=f[y],M=d[y];if(E===void 0)continue;E.updateMatrix(),E.matrixAutoUpdate=!0;let D;switch(Le[M.path]){case Le.weights:D=ls;break;case Le.rotation:D=un;break;case Le.position:case Le.scale:default:D=cn;break}const F=E.name?E.name:E.uuid,k=S.interpolation!==void 0?po[S.interpolation]:es,H=[];Le[M.path]===Le.weights?E.traverse(function(J){J.isMesh===!0&&J.morphTargetInfluences&&H.push(J.name?J.name:J.uuid)}):H.push(F);let ae=x.array;if(x.normalized){const J=On(ae.constructor),g=new Float32Array(ae.length);for(let v=0,C=ae.length;v<C;v++)g[v]=ae[v]*J;ae=g}for(let J=0,g=H.length;J<g;J++){const v=new D(H[J]+"."+Le[M.path],R.array,ae,k);S.interpolation==="CUBICSPLINE"&&(v.createInterpolant=function(X){return new Ye(this.times,this.values,this.getValueSize()/3,X)},v.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(v)}}const w=n.name?n.name:"animation_"+e;return new Rt(w,void 0,m)})}createNodeMesh(e){const t=this.json,n=this,s=t.nodes[e];return s.mesh===void 0?null:n.getDependency("mesh",s.mesh).then(function(r){const o=n._getNodeRef(n.meshCache,s.mesh,r);return s.weights!==void 0&&o.traverse(function(a){if(!!a.isMesh)for(let l=0,c=s.weights.length;l<c;l++)a.morphTargetInfluences[l]=s.weights[l]}),o})}loadNode(e){const t=this.json,n=this.extensions,s=this,r=t.nodes[e],o=r.name?s.createUniqueName(r.name):"";return function(){const a=[],l=s._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),r.camera!==void 0&&a.push(s.getDependency("camera",r.camera).then(function(c){return s._getNodeRef(s.cameraCache,r.camera,c)})),s._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),Promise.all(a)}().then(function(a){let l;if(r.isBone===!0?l=new Ue:a.length>1?l=new ke:a.length===1?l=a[0]:l=new We,l!==a[0])for(let c=0,p=a.length;c<p;c++)l.add(a[c]);if(r.name&&(l.userData.name=r.name,l.name=o),je(l,r),r.extensions&&mt(n,l,r),r.matrix!==void 0){const c=new V;c.fromArray(r.matrix),l.applyMatrix4(c)}else r.translation!==void 0&&l.position.fromArray(r.translation),r.rotation!==void 0&&l.quaternion.fromArray(r.rotation),r.scale!==void 0&&l.scale.fromArray(r.scale);return s.associations.set(l,{type:"nodes",index:e}),l})}loadScene(e){const t=this.json,n=this.extensions,s=this.json.scenes[e],r=this,o=new ke;s.name&&(o.name=r.createUniqueName(s.name)),je(o,s),s.extensions&&mt(n,o,s);const a=s.nodes||[],l=[];for(let c=0,p=a.length;c<p;c++)l.push(Fs(a[c],o,t,r));return Promise.all(l).then(function(){return o})}}function Fs(i,e,t,n){const s=t.nodes[i];return n.getDependency("node",i).then(function(r){if(s.skin===void 0)return r;let o;return n.getDependency("skin",s.skin).then(function(a){o=a;const l=[];for(let c=0,p=o.joints.length;c<p;c++)l.push(n.getDependency("node",o.joints[c]));return Promise.all(l)}).then(function(a){return r.traverse(function(l){if(!l.isMesh)return;const c=[],p=[];for(let u=0,h=a.length;u<h;u++){const f=a[u];if(f){c.push(f);const d=new V;o.inverseBindMatrices!==void 0&&d.fromArray(o.inverseBindMatrices.array,u*16),p.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[u])}l.bind(new pn(c,p),l.matrixWorld)}),r})}).then(function(r){e.add(r);const o=[];if(s.children){const a=s.children;for(let l=0,c=a.length;l<c;l++){const p=a[l];o.push(Fs(p,r,t,n))}}return Promise.all(o)})}function wo(i,e,t){const n=e.attributes,s=new ti;if(n.POSITION!==void 0){const a=t.json.accessors[n.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(s.set(new _(l[0],l[1],l[2]),new _(c[0],c[1],c[2])),a.normalized){const p=On(dt[a.componentType]);s.min.multiplyScalar(p),s.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const a=new _,l=new _;for(let c=0,p=r.length;c<p;c++){const u=r[c];if(u.POSITION!==void 0){const h=t.json.accessors[u.POSITION],f=h.min,d=h.max;if(f!==void 0&&d!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(d[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(d[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(d[2]))),h.normalized){const m=On(dt[h.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(a)}i.boundingBox=s;const o=new ni;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,i.boundingSphere=o}function Bs(i,e,t){const n=e.attributes,s=[];function r(o,a){return t.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=Mn[o]||o.toLowerCase();a in i.attributes||s.push(r(n[o],a))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(a){i.setIndex(a)});s.push(o)}return je(i,e),wo(i,e,t),Promise.all(s).then(function(){return e.targets!==void 0?fo(i,e.targets,t):i})}function ks(i,e){let t=i.getIndex();if(t===null){const o=[],a=i.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,s=[];if(e===rs)for(let o=1;o<=n;o++)s.push(t.getX(0)),s.push(t.getX(o)),s.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2==0?(s.push(t.getX(o)),s.push(t.getX(o+1)),s.push(t.getX(o+2))):(s.push(t.getX(o+2)),s.push(t.getX(o+1)),s.push(t.getX(o)));s.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=i.clone();return r.setIndex(s),r}const jt=new Yi;Xe||jt.register(i=>new zi(i));jt.register(i=>new Wi(i));const Ht=Xe?new Ki:new Qi;Xe?Ht.setDecoderPath("/loader_decoders/"):(Ht.getDecoderModule=()=>{},Ht.preload=()=>{});jt.setDRACOLoader(Ht);function qt(){return jt}async function Ha(i){return await new Promise((e,t)=>{qt().load(i,n=>{n.scene.traverse(s=>{s.name=s.name.replace("mixamorig","")}),Us(n),e({animations:n.animations,scene:n.scene,json:{},stats:{}})},null,n=>{console.log(n),t(n)})})}const Us=i=>{bo(i.parser),vo(i)},bo=i=>{const e=async t=>{const n=i.json.materials[t].extensions.MOZ_lightmap,[s,r]=await Promise.all([i.getDependency("material",t),i.getDependency("texture",n.index)]);return s.lightMap=r,s.lightMapIntensity=n.intensity!==void 0?n.intensity:1,s.needsUpdate=!0,r};for(let t=0;t<i.json.materials?.length;t++){const n=i.json.materials[t];!n.extensions||n.extensions.MOZ_lightmap&&e(t)}},vo=i=>{if(i.parser.json?.extensions?.MOZ_hubs_components?.MOZ_hubs_components?.version===3){const e=[];i.scene.traverse(t=>{if(t.userData.gltfExtensions&&t.userData.gltfExtensions.MOZ_hubs_components){let n;switch(Object.keys(t.userData.gltfExtensions.MOZ_hubs_components)[0]){case"directional-light":n=To(t);break;case"point-light":n=xo(t);break;case"ambient-light":n=Ao(t);break}n&&(n.position.copy(t.position),n.quaternion.copy(t.quaternion),t.parent.add(n),e.push(t),console.log(n))}});for(const t of e)t.parent.remove(t)}},Ns=(i,e)=>{typeof e.castShadow!="undefined"&&(i.castShadow=e.castShadow),typeof e.shadowResolution!="undefined"&&i.shadow.mapSize.set(e.shadowResolution[0],e.shadowResolution[1]),typeof e.shadowBias!="undefined"&&(i.shadow.bias=e.shadowBias),typeof e.shadowRadius!="undefined"&&(i.shadow.radius=e.shadowRadius)},To=i=>{if(!Ge.csm)return;const e=i.userData.gltfExtensions.MOZ_hubs_components["directional-light"],t=new sn(e.color,e.intensity);return Ns(t,e),t},xo=i=>{const e=i.userData.gltfExtensions.MOZ_hubs_components["point-light"],t=new _t(e.color,e.intensity,e.distance,e.decay);return Ns(t,e),t},Ao=i=>{const e=i.userData.gltfExtensions.MOZ_hubs_components["ambient-light"];return new cs(e.color,e.intensity)};class Gs{path;manager;constructor(){this.manager=this.manager!==void 0?this.manager:en}load(e,t,n,s){const r=new Mt,o=new Qe(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(e,a=>{r.image=this.parse(a),r.needsUpdate=!0,t!==void 0&&t(r)},n,s),r}parse(e){function t(T){switch(T.image_type){case h:case m:(T.colormap_length>256||T.colormap_size!==24||T.colormap_type!==1)&&console.error("TGALoader: Invalid type colormap data for indexed type.");break;case f:case d:case w:case y:T.colormap_type&&console.error("TGALoader: Invalid type colormap data for colormap type.");break;case u:console.error("TGALoader: No data.");default:console.error('TGALoader: Invalid type "%s".',T.image_type)}(T.width<=0||T.height<=0)&&console.error("TGALoader: Invalid image size."),T.pixel_size!==8&&T.pixel_size!==16&&T.pixel_size!==24&&T.pixel_size!==32&&console.error('TGALoader: Invalid pixel size "%s".',T.pixel_size)}function n(T,Q,N,G,Z){let q,z;const B=N.pixel_size>>3,P=N.width*N.height*B;if(Q&&(z=Z.subarray(G,G+=N.colormap_length*(N.colormap_size>>3))),T){q=new Uint8Array(P);let L,I,O,K=0;const de=new Uint8Array(B);for(;K<P;)if(L=Z[G++],I=(L&127)+1,L&128){for(O=0;O<B;++O)de[O]=Z[G++];for(O=0;O<I;++O)q.set(de,K+O*B);K+=B*I}else{for(I*=B,O=0;O<I;++O)q[K+O]=Z[G++];K+=I}}else q=Z.subarray(G,G+=Q?N.width*N.height:P);return{pixel_data:q,palettes:z}}function s(T,Q,N,G,Z,q,z,B,P){const L=P;let I,O=0,K,de;const At=k.width;for(de=Q;de!==G;de+=N)for(K=Z;K!==z;K+=q,O++)I=B[O],T[(K+At*de)*4+3]=255,T[(K+At*de)*4+2]=L[I*3+0],T[(K+At*de)*4+1]=L[I*3+1],T[(K+At*de)*4+0]=L[I*3+2];return T}function r(T,Q,N,G,Z,q,z,B){let P,L=0,I,O;const K=k.width;for(O=Q;O!==G;O+=N)for(I=Z;I!==z;I+=q,L+=2)P=B[L+0]+(B[L+1]<<8),T[(I+K*O)*4+0]=(P&31744)>>7,T[(I+K*O)*4+1]=(P&992)>>2,T[(I+K*O)*4+2]=(P&31)>>3,T[(I+K*O)*4+3]=P&32768?0:255;return T}function o(T,Q,N,G,Z,q,z,B){let P=0,L,I;const O=k.width;for(I=Q;I!==G;I+=N)for(L=Z;L!==z;L+=q,P+=3)T[(L+O*I)*4+3]=255,T[(L+O*I)*4+2]=B[P+0],T[(L+O*I)*4+1]=B[P+1],T[(L+O*I)*4+0]=B[P+2];return T}function a(T,Q,N,G,Z,q,z,B){let P=0,L,I;const O=k.width;for(I=Q;I!==G;I+=N)for(L=Z;L!==z;L+=q,P+=4)T[(L+O*I)*4+2]=B[P+0],T[(L+O*I)*4+1]=B[P+1],T[(L+O*I)*4+0]=B[P+2],T[(L+O*I)*4+3]=B[P+3];return T}function l(T,Q,N,G,Z,q,z,B){let P,L=0,I,O;const K=k.width;for(O=Q;O!==G;O+=N)for(I=Z;I!==z;I+=q,L++)P=B[L],T[(I+K*O)*4+0]=P,T[(I+K*O)*4+1]=P,T[(I+K*O)*4+2]=P,T[(I+K*O)*4+3]=255;return T}function c(T,Q,N,G,Z,q,z,B){let P=0,L,I;const O=k.width;for(I=Q;I!==G;I+=N)for(L=Z;L!==z;L+=q,P+=2)T[(L+O*I)*4+0]=B[P+0],T[(L+O*I)*4+1]=B[P+0],T[(L+O*I)*4+2]=B[P+0],T[(L+O*I)*4+3]=B[P+1];return T}function p(T,Q,N,G,Z){let q,z,B,P,L,I;switch((k.flags&b)>>E){default:case S:q=0,B=1,L=Q,z=0,P=1,I=N;break;case R:q=0,B=1,L=Q,z=N-1,P=-1,I=-1;break;case M:q=Q-1,B=-1,L=-1,z=0,P=1,I=N;break;case x:q=Q-1,B=-1,L=-1,z=N-1,P=-1,I=-1;break}if(J)switch(k.pixel_size){case 8:l(T,z,P,I,q,B,L,G);break;case 16:c(T,z,P,I,q,B,L,G);break;default:console.error("TGALoader: Format not supported.");break}else switch(k.pixel_size){case 8:s(T,z,P,I,q,B,L,G,Z);break;case 16:r(T,z,P,I,q,B,L,G);break;case 24:o(T,z,P,I,q,B,L,G);break;case 32:a(T,z,P,I,q,B,L,G);break;default:console.error("TGALoader: Format not supported.");break}return T}const u=0,h=1,f=2,d=3,m=9,w=10,y=11,b=48,E=4,R=0,x=1,S=2,M=3;e.length<19&&console.error("TGALoader: Not enough data to contain header.");const D=new Uint8Array(e);let F=0;const k={id_length:D[F++],colormap_type:D[F++],image_type:D[F++],colormap_index:D[F++]|D[F++]<<8,colormap_length:D[F++]|D[F++]<<8,colormap_size:D[F++],origin:[D[F++]|D[F++]<<8,D[F++]|D[F++]<<8],width:D[F++]|D[F++]<<8,height:D[F++]|D[F++]<<8,pixel_size:D[F++],flags:D[F++]};t(k),k.id_length+F>e.length&&console.error("TGALoader: No data."),F+=k.id_length;let H=!1,ae=!1,J=!1;switch(k.image_type){case m:H=!0,ae=!0;break;case h:ae=!0;break;case w:H=!0;break;case f:break;case y:H=!0,J=!0;break;case d:J=!0;break}const g=typeof OffscreenCanvas!="undefined",v=g?new OffscreenCanvas(k.width,k.height):document.createElement("canvas");v.width=k.width,v.height=k.height;const C=v.getContext("2d"),X=C.createImageData(k.width,k.height),$=n(H,ae,k,F,D);return p(X.data,k.width,k.height,$.pixel_data,$.palettes),C.putImageData(X,0,0),g?v.transferToImageBitmap():v}setPath(e){return this.path=e,this}}function js(i,e,t){const n=t.length-i-1;if(e>=t[n])return n-1;if(e<=t[i])return i;let s=i,r=n,o=Math.floor((s+r)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?r=o:s=o,o=Math.floor((s+r)/2);return o}function _o(i,e,t,n){const s=[],r=[],o=[];s[0]=1;for(let a=1;a<=t;++a){r[a]=e-n[i+1-a],o[a]=n[i+a]-e;let l=0;for(let c=0;c<a;++c){const p=o[c+1],u=r[a-c],h=s[c]/(p+u);s[c]=l+p*h,l=u*h}s[a]=l}return s}function Eo(i,e,t,n){const s=js(i,n,e),r=_o(s,n,i,e),o=new Lt(0,0,0,0);for(let a=0;a<=i;++a){const l=t[s-i+a],c=r[a],p=l.w*c;o.x+=l.x*p,o.y+=l.y*p,o.z+=l.z*p,o.w+=l.w*c}return o}function So(i,e,t,n,s){const r=[];for(let u=0;u<=t;++u)r[u]=0;const o=[];for(let u=0;u<=n;++u)o[u]=r.slice(0);const a=[];for(let u=0;u<=t;++u)a[u]=r.slice(0);a[0][0]=1;const l=r.slice(0),c=r.slice(0);for(let u=1;u<=t;++u){l[u]=e-s[i+1-u],c[u]=s[i+u]-e;let h=0;for(let f=0;f<u;++f){const d=c[f+1],m=l[u-f];a[u][f]=d+m;const w=a[f][u-1]/a[u][f];a[f][u]=h+d*w,h=m*w}a[u][u]=h}for(let u=0;u<=t;++u)o[0][u]=a[u][t];for(let u=0;u<=t;++u){let h=0,f=1;const d=[];for(let m=0;m<=t;++m)d[m]=r.slice(0);d[0][0]=1;for(let m=1;m<=n;++m){let w=0;const y=u-m,b=t-m;u>=m&&(d[f][0]=d[h][0]/a[b+1][y],w=d[f][0]*a[y][b]);const E=y>=-1?1:-y,R=u-1<=b?m-1:t-u;for(let S=E;S<=R;++S)d[f][S]=(d[h][S]-d[h][S-1])/a[b+1][y+S],w+=d[f][S]*a[y+S][b];u<=b&&(d[f][m]=-d[h][m-1]/a[b+1][u],w+=d[f][m]*a[u][b]),o[m][u]=w;const x=h;h=f,f=x}}let p=t;for(let u=1;u<=n;++u){for(let h=0;h<=t;++h)o[u][h]*=p;p*=t-u}return o}function Io(i,e,t,n,s){const r=s<i?s:i,o=[],a=js(i,n,e),l=So(a,n,i,r,e),c=[];for(let p=0;p<t.length;++p){const u=t[p].clone(),h=u.w;u.x*=h,u.y*=h,u.z*=h,c[p]=u}for(let p=0;p<=r;++p){const u=c[a-i].clone().multiplyScalar(l[p][0]);for(let h=1;h<=i;++h)u.add(c[a-i+h].clone().multiplyScalar(l[p][h]));o[p]=u}for(let p=r+1;p<=s+1;++p)o[p]=new Lt(0,0,0);return o}function Ro(i,e){let t=1;for(let s=2;s<=i;++s)t*=s;let n=1;for(let s=2;s<=e;++s)n*=s;for(let s=2;s<=i-e;++s)n*=s;return t/n}function Mo(i){const e=i.length,t=[],n=[];for(let r=0;r<e;++r){const o=i[r];t[r]=new _(o.x,o.y,o.z),n[r]=o.w}const s=[];for(let r=0;r<e;++r){const o=t[r].clone();for(let a=1;a<=r;++a)o.sub(s[r-a].clone().multiplyScalar(Ro(r,a)*n[a]));s[r]=o.divideScalar(n[0])}return s}function Lo(i,e,t,n,s){const r=Io(i,e,t,n,s);return Mo(r)}class Oo extends si{degree;knots;controlPoints;startKnot;endKnot;constructor(e,t,n,s,r){super();this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=s||0,this.endKnot=r||this.knots.length-1;for(let o=0;o<n.length;++o){const a=n[o];this.controlPoints[o]=new Lt(a.x,a.y,a.z,a.w)}}getPoint(e,t){const n=t||new _,s=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),r=Eo(this.degree,this.knots,this.controlPoints,s);return r.w!=1&&r.divideScalar(r.w),n.set(r.x,r.y,r.z)}getTangent(e,t){const n=t||new _,s=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),r=Lo(this.degree,this.knots,this.controlPoints,s,1);return n.copy(r[1]).normalize(),n}}/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var Hs={},ie=void 0,Co=Hs;function Cn(i,e){var t=i.split("."),n=Co;!(t[0]in n)&&n.execScript&&n.execScript("var "+t[0]);for(var s;t.length&&(s=t.shift());)!t.length&&e!==ie?n[s]=e:n=n[s]?n[s]:n[s]={}}var W=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined"&&typeof DataView!="undefined";function He(i){var e=i.length,t=0,n=Number.POSITIVE_INFINITY,s,r,o,a,l,c,p,u,h,f;for(u=0;u<e;++u)i[u]>t&&(t=i[u]),i[u]<n&&(n=i[u]);for(s=1<<t,r=new(W?Uint32Array:Array)(s),o=1,a=0,l=2;o<=t;){for(u=0;u<e;++u)if(i[u]===o){for(c=0,p=a,h=0;h<o;++h)c=c<<1|p&1,p>>=1;for(f=o<<16|u,h=c;h<s;h+=l)r[h]=f;++a}++o,a<<=1,l<<=1}return[r,t,n]}function Oe(i,e){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=W?new Uint8Array(i):i,this.m=!1,this.i=Vt,this.r=!1,(e||!(e={}))&&(e.index&&(this.a=e.index),e.bufferSize&&(this.h=e.bufferSize),e.bufferType&&(this.i=e.bufferType),e.resize&&(this.r=e.resize)),this.i){case Pn:this.b=32768,this.c=new(W?Uint8Array:Array)(32768+this.h+258);break;case Vt:this.b=0,this.c=new(W?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var Pn=0,Vt=1,qs={t:Pn,s:Vt};Oe.prototype.k=function(){for(;!this.m;){var i=ce(this,3);switch(i&1&&(this.m=!0),i>>>=1,i){case 0:var e=this.input,t=this.a,n=this.c,s=this.b,r=e.length,o=ie,a=ie,l=n.length,c=ie;if(this.d=this.f=0,t+1>=r)throw Error("invalid uncompressed block header: LEN");if(o=e[t++]|e[t++]<<8,t+1>=r)throw Error("invalid uncompressed block header: NLEN");if(a=e[t++]|e[t++]<<8,o===~a)throw Error("invalid uncompressed block header: length verify");if(t+o>e.length)throw Error("input buffer is broken");switch(this.i){case Pn:for(;s+o>n.length;){if(c=l-s,o-=c,W)n.set(e.subarray(t,t+c),s),s+=c,t+=c;else for(;c--;)n[s++]=e[t++];this.b=s,n=this.e(),s=this.b}break;case Vt:for(;s+o>n.length;)n=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(W)n.set(e.subarray(t,t+o),s),s+=o,t+=o;else for(;o--;)n[s++]=e[t++];this.a=t,this.b=s,this.c=n;break;case 1:this.j(Po,Do);break;case 2:for(var p=ce(this,5)+257,u=ce(this,5)+1,h=ce(this,4)+4,f=new(W?Uint8Array:Array)(Dn.length),d=ie,m=ie,w=ie,y=ie,b=ie,E=ie,R=ie,x=ie,S=ie,x=0;x<h;++x)f[Dn[x]]=ce(this,3);if(!W)for(x=h,h=f.length;x<h;++x)f[Dn[x]]=0;for(d=He(f),y=new(W?Uint8Array:Array)(p+u),x=0,S=p+u;x<S;)switch(b=yt(this,d),b){case 16:for(R=3+ce(this,2);R--;)y[x++]=E;break;case 17:for(R=3+ce(this,3);R--;)y[x++]=0;E=0;break;case 18:for(R=11+ce(this,7);R--;)y[x++]=0;E=0;break;default:E=y[x++]=b}m=He(W?y.subarray(0,p):y.slice(0,p)),w=He(W?y.subarray(p):y.slice(p)),this.j(m,w);break;default:throw Error("unknown BTYPE: "+i)}}return this.n()};var Vs=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Dn=W?new Uint16Array(Vs):Vs,zs=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],Ws=W?new Uint16Array(zs):zs,Qs=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],zt=W?new Uint8Array(Qs):Qs,Ks=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Xs=W?new Uint16Array(Ks):Ks,$s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Wt=W?new Uint8Array($s):$s,Fn=new(W?Uint8Array:Array)(288),qe,Ys;qe=0;for(Ys=Fn.length;qe<Ys;++qe)Fn[qe]=143>=qe?8:255>=qe?9:279>=qe?7:8;var Po=He(Fn),Bn=new(W?Uint8Array:Array)(30),Qt,Js;Qt=0;for(Js=Bn.length;Qt<Js;++Qt)Bn[Qt]=5;var Do=He(Bn);function ce(i,e){for(var t=i.f,n=i.d,s=i.input,r=i.a,o=s.length,a;n<e;){if(r>=o)throw Error("input buffer is broken");t|=s[r++]<<n,n+=8}return a=t&(1<<e)-1,i.f=t>>>e,i.d=n-e,i.a=r,a}function yt(i,e){for(var t=i.f,n=i.d,s=i.input,r=i.a,o=s.length,a=e[0],l=e[1],c,p;n<l&&!(r>=o);)t|=s[r++]<<n,n+=8;if(c=a[t&(1<<l)-1],p=c>>>16,p>n)throw Error("invalid code length: "+p);return i.f=t>>p,i.d=n-p,i.a=r,c&65535}Oe.prototype.j=function(i,e){var t=this.c,n=this.b;this.o=i;for(var s=t.length-258,r,o,a,l;(r=yt(this,i))!==256;)if(256>r)n>=s&&(this.b=n,t=this.e(),n=this.b),t[n++]=r;else for(o=r-257,l=Ws[o],0<zt[o]&&(l+=ce(this,zt[o])),r=yt(this,e),a=Xs[r],0<Wt[r]&&(a+=ce(this,Wt[r])),n>=s&&(this.b=n,t=this.e(),n=this.b);l--;)t[n]=t[n++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=n};Oe.prototype.w=function(i,e){var t=this.c,n=this.b;this.o=i;for(var s=t.length,r,o,a,l;(r=yt(this,i))!==256;)if(256>r)n>=s&&(t=this.e(),s=t.length),t[n++]=r;else for(o=r-257,l=Ws[o],0<zt[o]&&(l+=ce(this,zt[o])),r=yt(this,e),a=Xs[r],0<Wt[r]&&(a+=ce(this,Wt[r])),n+l>s&&(t=this.e(),s=t.length);l--;)t[n]=t[n++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=n};Oe.prototype.e=function(){var i=new(W?Uint8Array:Array)(this.b-32768),e=this.b-32768,t,n,s=this.c;if(W)i.set(s.subarray(32768,i.length));else for(t=0,n=i.length;t<n;++t)i[t]=s[t+32768];if(this.g.push(i),this.l+=i.length,W)s.set(s.subarray(e,e+32768));else for(t=0;32768>t;++t)s[t]=s[e+t];return this.b=32768,s};Oe.prototype.z=function(i){var e,t=this.input.length/this.a+1|0,n,s,r,o=this.input,a=this.c;return i&&(typeof i.p=="number"&&(t=i.p),typeof i.u=="number"&&(t+=i.u)),2>t?(n=(o.length-this.a)/this.o[2],r=258*(n/2)|0,s=r<a.length?a.length+r:a.length<<1):s=a.length*t,W?(e=new Uint8Array(s),e.set(a)):e=a,this.c=e};Oe.prototype.n=function(){var i=0,e=this.c,t=this.g,n,s=new(W?Uint8Array:Array)(this.l+(this.b-32768)),r,o,a,l;if(t.length===0)return W?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(r=0,o=t.length;r<o;++r)for(n=t[r],a=0,l=n.length;a<l;++a)s[i++]=n[a];for(r=32768,o=this.b;r<o;++r)s[i++]=e[r];return this.g=[],this.buffer=s};Oe.prototype.v=function(){var i,e=this.b;return W?this.r?(i=new Uint8Array(e),i.set(this.c.subarray(0,e))):i=this.c.subarray(0,e):(this.c.length>e&&(this.c.length=e),i=this.c),this.buffer=i};function kn(i,e){var t,n;switch(this.input=i,this.a=0,(e||!(e={}))&&(e.index&&(this.a=e.index),e.verify&&(this.A=e.verify)),t=i[this.a++],n=i[this.a++],t&15){case Zs:this.method=Zs;break;default:throw Error("unsupported compression method")}if(((t<<8)+n)%31!=0)throw Error("invalid fcheck flag:"+((t<<8)+n)%31);if(n&32)throw Error("fdict flag is not supported");this.q=new Oe(i,{index:this.a,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})}kn.prototype.k=function(){var i=this.input,e,t;if(e=this.q.k(),this.a=this.q.a,this.A){t=(i[this.a++]<<24|i[this.a++]<<16|i[this.a++]<<8|i[this.a++])>>>0;var n=e;if(typeof n=="string"){var s=n.split(""),r,o;for(r=0,o=s.length;r<o;r++)s[r]=(s[r].charCodeAt(0)&255)>>>0;n=s}for(var a=1,l=0,c=n.length,p,u=0;0<c;){p=1024<c?1024:c,c-=p;do a+=n[u++],l+=a;while(--p);a%=65521,l%=65521}if(t!==(l<<16|a)>>>0)throw Error("invalid adler-32 checksum")}return e};var Zs=8;Cn("Zlib.Inflate",kn);Cn("Zlib.Inflate.prototype.decompress",kn.prototype.k);var Un={ADAPTIVE:qs.s,BLOCK:qs.t},gt,wt,Je,er;if(Object.keys)gt=Object.keys(Un);else for(wt in gt=[],Je=0,Un)gt[Je++]=wt;Je=0;for(er=gt.length;Je<er;++Je)wt=gt[Je],Cn("Zlib.Inflate.BufferType."+wt,Un[wt]);var tr=Hs.Zlib.Inflate,Fo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Inflate:tr});class A{static fbxTree;static sceneGraph;static connections;static serverUrl;crossOrigin;resourcePath;path;manager;constructor(e){this.manager=e||en}load(e,t,n,s){const r=e.split("/").pop();A.serverUrl=e.split(r)[0];const o="",a=new Qe(this.manager);a.setPath(o),a.setResponseType("arraybuffer"),a.load(e,l=>{try{t(this.parse(l,o))}catch(c){setTimeout(()=>{s&&s(c),this.manager.itemError(e),console.log("load error",c)},0)}},n,s)}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setCrossOrigin(e){return this.crossOrigin=e,this}parse(e,t){if(jo(e))A.fbxTree=new Go().parse(e);else{const s=ar(e);if(!Ho(s))throw new Error("FBXLoader: Unknown format.");if(rr(s)<7e3)throw new Error("FBXLoader: FBX version not supported, FileVersion: "+rr(s));A.fbxTree=new No().parse(s)}const n=new ln(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Bo(n).parse(A.fbxTree)}}class Bo{textureLoader;constructor(e){this.textureLoader=e}parse(e){A.connections=this.parseConnections();const t=this.parseImages(),n=this.parseTextures(t),s=this.parseMaterials(n),r=this.parseDeformers(),o=new ko().parse(r);return this.parseScene(r,o,s),A.sceneGraph}parseConnections(){const e=new Map;return"Connections"in A.fbxTree&&A.fbxTree.Connections.connections.forEach(n=>{const s=n[0],r=n[1],o=n[2];e.has(s)||e.set(s,{parents:[],children:[]});const a={ID:r,relationship:o};e.get(s).parents.push(a),e.has(r)||e.set(r,{parents:[],children:[]});const l={ID:s,relationship:o};e.get(r).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in A.fbxTree.Objects){const n=A.fbxTree.Objects.Video;for(const s in n){const r=n[s],o=parseInt(s),a=r.RelativeFilename.split("\\").pop()||r.Filename.split("\\").pop();if(e[o]=`${A.serverUrl}${a}`,"Content"in r){const l=r.Content instanceof ArrayBuffer&&r.Content.byteLength>0,c=typeof r.Content=="string"&&r.Content!=="";if(l||c){const p=this.parseImage(n[s]);t[r.RelativeFilename||r.Filename]=p}}}}for(const n in e){const s=e[n];t[s]!==void 0?e[n]=t[s]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,s=n.slice(n.lastIndexOf(".")+1).toLowerCase();let r;switch(s){case"bmp":r="image/bmp";break;case"jpg":case"jpeg":r="image/jpeg";break;case"png":r="image/png";break;case"tif":r="image/tiff";break;case"tga":if(typeof new Gs!="function"){console.warn("FBXLoader: TGALoader is required to load TGA textures");return}else{if(this.textureLoader.manager.getHandler(".tga")===null){const o=new Gs;o.setPath(this.textureLoader.path),this.textureLoader.manager.addHandler(/\.tga$/i,o)}r="image/tga";break}default:console.warn('FBXLoader: Image type "'+s+'" is not supported.');return}if(typeof t=="string")return"data:"+r+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:r}))}}parseTextures(e){const t=new Map;if("Texture"in A.fbxTree.Objects){const n=A.fbxTree.Objects.Texture;for(const s in n){const r=this.parseTexture(n[s],e);t.set(parseInt(s),r)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const s=e.WrapModeU,r=e.WrapModeV,o=s!==void 0?s.value:0,a=r!==void 0?r.value:0;if(n.wrapS=o===0?rt:an,n.wrapT=a===0?rt:an,"Scaling"in e){const l=e.Scaling.value;n.repeat.x=l[0],n.repeat.y=l[1]}return n}loadTexture(e,t){let n;const s=this.textureLoader.path,r=A.connections.get(e.id).children;r!==void 0&&r.length>0&&t[r[0].ID]!==void 0&&(n=t[r[0].ID],(n.indexOf("blob:")===0||n.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.textureLoader.getHandler(".tga");l===null?(console.warn("FBXLoader: TGALoader not found, creating empty placeholder texture for",n),o=new Mt):o=l.load(n)}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating empty placeholder texture for",n),o=new Mt):o=this.textureLoader.load(n);return this.textureLoader.setPath(s),o}parseMaterials(e){const t=new Map;if("Material"in A.fbxTree.Objects){const n=A.fbxTree.Objects.Material;for(const s in n){const r=this.parseMaterial(n[s],e);r!==null&&t.set(parseInt(s),r)}}return t}parseMaterial(e,t){const n=e.id,s=e.attrName;let r=e.ShadingModel;if(typeof r=="object"&&(r=r.value),!A.connections.has(n))return null;const o=this.parseParameters(e,t,n);let a;switch(r.toLowerCase()){case"phong":a=new hn;break;case"lambert":a=new ri;break;default:console.warn('FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',r),a=new hn;break}return a.setValues(o),a.name=s,a}parseParameters(e,t,n){const s={};return e.BumpFactor&&(s.bumpScale=e.BumpFactor.value),e.Diffuse?s.color=new ee().fromArray(e.Diffuse.value):e.DiffuseColor&&e.DiffuseColor.type==="Color"&&(s.color=new ee().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(s.displacementScale=e.DisplacementFactor.value),e.Emissive?s.emissive=new ee().fromArray(e.Emissive.value):e.EmissiveColor&&e.EmissiveColor.type==="Color"&&(s.emissive=new ee().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(s.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(s.opacity=parseFloat(e.Opacity.value)),s.opacity<1&&(s.transparent=!0),e.ReflectionFactor&&(s.reflectivity=e.ReflectionFactor.value),e.Shininess&&(s.shininess=e.Shininess.value),e.Specular?s.specular=new ee().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(s.specular=new ee().fromArray(e.SpecularColor.value)),A.connections.get(n).children.forEach(r=>{const o=r.relationship;switch(o){case"Bump":s.bumpMap=this.getTexture(t,r.ID);break;case"Maya|TEX_ao_map":s.aoMap=this.getTexture(t,r.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":s.map=this.getTexture(t,r.ID);break;case"DisplacementColor":s.displacementMap=this.getTexture(t,r.ID);break;case"EmissiveColor":s.emissiveMap=this.getTexture(t,r.ID);break;case"NormalMap":case"Maya|TEX_normal_map":s.normalMap=this.getTexture(t,r.ID);break;case"ReflectionColor":s.envMap=this.getTexture(t,r.ID),s.envMap.mapping=ii;break;case"SpecularColor":s.specularMap=this.getTexture(t,r.ID);break;case"TransparentColor":s.alphaMap=this.getTexture(t,r.ID),s.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("FBXLoader: %s map is not supported in js, skipping texture.",o);break}}),s}getTexture(e,t){return"LayeredTexture"in A.fbxTree.Objects&&t in A.fbxTree.Objects.LayeredTexture&&(console.warn("FBXLoader: layered textures are not supported in js. Discarding all but first layer."),t=A.connections.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in A.fbxTree.Objects){const n=A.fbxTree.Objects.Deformer;for(const s in n){const r=n[s],o=A.connections.get(parseInt(s));if(r.attrType==="Skin"){const a=this.parseSkeleton(o,n);a.ID=s,o.parents.length>1&&console.warn("FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[s]=a}else if(r.attrType==="BlendShape"){const a={id:s};a.rawTargets=this.parseMorphTargets(o,n),a.id=s,o.parents.length>1&&console.warn("FBXLoader: morph target attached to more than one geometry is not supported."),t[s]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach(s=>{const r=t[s.ID];if(r.attrType!=="Cluster")return;const o={ID:s.ID,indices:[],weights:[],transformLink:new V().fromArray(r.TransformLink.a)};"Indexes"in r&&(o.indices=r.Indexes.a,o.weights=r.Weights.a),n.push(o)}),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let s=0;s<e.children.length;s++){const r=e.children[s],o=t[r.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=A.connections.get(parseInt(r.ID)).children.filter(l=>l.relationship===void 0)[0].ID,n.push(a)}return n}parseScene(e,t,n){A.sceneGraph=new ke;const s=this.parseModels(e.skeletons,t,n),r=A.fbxTree.Objects.Model;s.forEach(a=>{const l=r[a.ID];this.setLookAtProperties(a,l),A.connections.get(a.ID).parents.forEach(p=>{const u=s.get(p.ID);u!==void 0&&u.add(a)}),a.parent===null&&A.sceneGraph.add(a)}),this.bindSkeleton(e.skeletons,t,s),this.createAmbientLight(),this.setupMorphMaterials(),A.sceneGraph.traverse(a=>{if(a.userData.transformData){a.parent&&(a.userData.transformData.parentMatrixWorld=a.parent.matrix);const l=ir(a.userData.transformData);a.applyMatrix(l)}});const o=new Uo().parse();A.sceneGraph.children.length===1&&A.sceneGraph.children[0].isGroup&&(A.sceneGraph.children[0].animations=o,A.sceneGraph=A.sceneGraph.children[0]),A.sceneGraph.animations=o}parseModels(e,t,n){const s=new Map,r=A.fbxTree.Objects.Model;for(const o in r){const a=parseInt(o),l=r[o],c=A.connections.get(a);let p=this.buildSkeleton(c,e,a,l.attrName);if(!p){switch(l.attrType){case"Camera":p=this.createCamera(c);break;case"Light":p=this.createLight(c);break;case"Mesh":p=this.createMesh(c,t,n);break;case"NurbsCurve":p=this.createCurve(c,t);break;case"LimbNode":case"Root":p=new Ue;break;case"Null":default:p=new ke;break}p.name=it.sanitizeNodeName(l.attrName),p.ID=a}this.getTransformData(p,l),s.set(a,p)}return s}buildSkeleton(e,t,n,s){let r=null;return e.parents.forEach(o=>{for(const a in t){const l=t[a];l.rawBones.forEach((c,p)=>{if(c.ID===o.ID){const u=r;r=new Ue,r.matrixWorld.copy(c.transformLink),r.name=it.sanitizeNodeName(s),r.ID=n,l.bones[p]=r,u!==null&&r.add(u)}})}}),r}createCamera(e){let t,n;if(e.children.forEach(s=>{const r=A.fbxTree.Objects.NodeAttribute[s.ID];r!==void 0&&(n=r)}),n===void 0)t=new We;else{let s=0;n.CameraProjectionType!==void 0&&n.CameraProjectionType.value===1&&(s=1);let r=1;n.NearPlane!==void 0&&(r=n.NearPlane.value/1e3);let o=1e3;n.FarPlane!==void 0&&(o=n.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;n.AspectWidth!==void 0&&n.AspectHeight!==void 0&&(a=n.AspectWidth.value,l=n.AspectHeight.value);const c=a/l;let p=45;n.FieldOfView!==void 0&&(p=n.FieldOfView.value);const u=n.FocalLength?n.FocalLength.value:null;switch(s){case 0:t=new os(p,c,r,o),u!==null&&t.setFocalLength(u);break;case 1:t=new as(-a/2,a/2,l/2,-l/2,r,o);break;default:console.warn("FBXLoader: Unknown camera type "+s+"."),t=new We;break}}return t}createLight(e){let t,n;if(e.children.forEach(s=>{const r=A.fbxTree.Objects.NodeAttribute[s.ID];r!==void 0&&(n=r)}),n===void 0)t=new We;else{let s;n.LightType===void 0?s=0:s=n.LightType.value;let r=16777215;n.Color!==void 0&&(r=new ee().fromArray(n.Color.value));let o=n.Intensity===void 0?1:n.Intensity.value/100;n.CastLightOnObject!==void 0&&n.CastLightOnObject.value===0&&(o=0);let a=0;n.FarAttenuationEnd!==void 0&&(n.EnableFarAttenuation!==void 0&&n.EnableFarAttenuation.value===0?a=0:a=n.FarAttenuationEnd.value);const l=1;switch(s){case 0:t=new _t(r,o,a,l);break;case 1:t=new sn(r,o);break;case 2:let c=Math.PI/3;n.InnerAngle!==void 0&&(c=re.degToRad(n.InnerAngle.value));let p=0;n.OuterAngle!==void 0&&(p=re.degToRad(n.OuterAngle.value),p=Math.max(p,1)),t=new Yn(r,o,a,c,p,l);break;default:console.warn("FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new _t(r,o);break}n.CastShadows!==void 0&&n.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,n){let s,r=null,o=null;const a=[];return e.children.forEach(l=>{t.has(l.ID)&&(r=t.get(l.ID)),n.has(l.ID)&&a.push(n.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new hn({color:13421772}),a.push(o)),"color"in r.attributes&&a.forEach(l=>{}),r.FBX_Deformer?(a.forEach(l=>{l.skinning=!0}),s=new St(r,o),s.normalizeSkinWeights()):s=new It(r,o),s}createCurve(e,t){const n=e.children.reduce((r,o)=>(t.has(o.ID)&&(r=t.get(o.ID)),r),null),s=new ns({color:3342591,linewidth:1});return new is(n,s)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?n.eulerOrder=or(t.RotationOrder.value):n.eulerOrder="ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){"LookAtProperty"in t&&A.connections.get(e.ID).children.forEach(s=>{if(s.relationship==="LookAtProperty"){const r=A.fbxTree.Objects.Model[s.ID];if("Lcl_Translation"in r){const o=r.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),A.sceneGraph.add(e.target)):e.lookAt(new _().fromArray(o))}}})}bindSkeleton(e,t,n){const s=this.parsePoseNodes();for(const r in e){const o=e[r];A.connections.get(parseInt(o.ID)).parents.forEach(l=>{if(t.has(l.ID)){const c=l.ID;A.connections.get(c).parents.forEach(u=>{n.has(u.ID)&&n.get(u.ID).bind(new pn(o.bones),s[u.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in A.fbxTree.Objects){const t=A.fbxTree.Objects.Pose;for(const n in t)if(t[n].attrType==="BindPose"){const s=t[n].PoseNode;Array.isArray(s)?s.forEach(r=>{e[r.Node]=new V().fromArray(r.Matrix.a)}):e[s.Node]=new V().fromArray(s.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in A.fbxTree&&"AmbientColor"in A.fbxTree.GlobalSettings){const e=A.fbxTree.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],s=e[2];if(t!==0||n!==0||s!==0){const r=new ee(t,n,s);A.sceneGraph.add(new cs(r,1))}}}setupMorphMaterials(){A.sceneGraph.traverse(e=>{e.isMesh&&e.geometry.morphAttributes.position&&e.geometry.morphAttributes.position.length&&(Array.isArray(e.material)?e.material.forEach((t,n)=>{this.setupMorphMaterial(e,t,n)}):this.setupMorphMaterial(e,e.material))})}setupMorphMaterial(e,t,n){const s=e.uuid,r=t.uuid;let o=!1;if(A.sceneGraph.traverse(a=>{a.isMesh&&(Array.isArray(a.material)?a.material.forEach(l=>{l.uuid===r&&a.uuid!==s&&(o=!0)}):a.material.uuid===r&&a.uuid!==s&&(o=!0))}),o){const a=t.clone();a.morphTargets=!0,n===void 0?e.material=a:e.material[n]=a}else t.morphTargets=!0}}class ko{constructor(){}parse(e){const t=new Map;if("Geometry"in A.fbxTree.Objects){const n=A.fbxTree.Objects.Geometry;for(const s in n){const r=A.connections.get(parseInt(s)),o=this.parseGeometry(r,n[s],e);t.set(parseInt(s),o)}}return t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const s=n.skeletons,r=n.morphTargets,o=e.parents.map(h=>A.fbxTree.Objects.Model[h.ID]);if(o.length===0)return;const a=e.children.reduce((h,f)=>(s[f.ID]!==void 0&&(h=s[f.ID]),h),null),l=e.children.reduce((h,f)=>(r[f.ID]!==void 0&&(h=r[f.ID]),h),null),c=o[0],p={};"RotationOrder"in c&&(p.eulerOrder=or(c.RotationOrder.value)),"InheritType"in c&&(p.inheritType=parseInt(c.InheritType.value)),"GeometricTranslation"in c&&(p.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(p.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(p.scale=c.GeometricScaling.value);const u=ir(p);return this.genGeometry(t,a,l,u)}genGeometry(e,t,n,s){const r=new Pe;e.attrName&&(r.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new De(a.vertex,3);if(s.applyToBufferAttribute(l),r.addAttribute("position",l),a.colors.length>0&&r.addAttribute("color",new De(a.colors,3)),t&&(r.addAttribute("skinIndex",new tn(a.weightsIndices,4)),r.addAttribute("skinWeight",new De(a.vertexWeights,4)),r.FBX_Deformer=t),a.normal.length>0){const c=new De(a.normal,3),p=new oi().getNormalMatrix(s);c.applyMatrix3(p),r.addAttribute("normal",c)}if(a.uvs.forEach((c,p)=>{let u="uv"+(p+1).toString();p===0&&(u="uv"),r.addAttribute(u,new De(a.uvs[p],2))}),o.material&&o.material.mappingType!=="AllSame"){let c=a.materialIndex[0],p=0;if(a.materialIndex.forEach((u,h)=>{u!==c&&(r.addGroup(p,h-p,c),c=u,p=h)}),r.groups.length>0){const u=r.groups[r.groups.length-1],h=u.start+u.count;h!==a.materialIndex.length&&r.addGroup(h,a.materialIndex.length-h,c)}r.groups.length===0&&r.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(r,e,n,s),r}parseGeoNode(e,t){const n={};if(n.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],n.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let s=0;for(;e.LayerElementUV[s];)n.uv.push(this.parseUVs(e.LayerElementUV[s])),s++}return n.weightTable={},t!==null&&(n.skeleton=t,t.rawBones.forEach((s,r)=>{s.indices.forEach((o,a)=>{n.weightTable[o]===void 0&&(n.weightTable[o]=[]),n.weightTable[o].push({id:r,weight:s.weights[a]})})})),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n,s=0,r=0,o=!1,a=[],l=[],c=[],p=[],u=[],h=[];return e.vertexIndices.forEach((f,d)=>{let m=!1;f<0&&(f=f^-1,m=!0);let w=[],y=[];if(a.push(f*3,f*3+1,f*3+2),e.color){const b=Kt(d,s,f,e.color);c.push(b[0],b[1],b[2])}if(e.skeleton){if(e.weightTable[f]!==void 0&&e.weightTable[f].forEach(b=>{y.push(b.weight),w.push(b.id)}),y.length>4){o||(console.warn("FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);const b=[0,0,0,0],E=[0,0,0,0];y.forEach((R,x)=>{let S=R,M=w[x];E.forEach((D,F,k)=>{if(S>D){k[F]=S,S=D;const H=b[F];b[F]=M,M=H}})}),w=b,y=E}for(;y.length<4;)y.push(0),w.push(0);for(let b=0;b<4;++b)u.push(y[b]),h.push(w[b])}if(e.normal){const b=Kt(d,s,f,e.normal);l.push(b[0],b[1],b[2])}e.material&&e.material.mappingType!=="AllSame"&&Kt(d,s,f,e.material)[0],e.uv&&e.uv.forEach((b,E)=>{const R=Kt(d,s,f,b);p[E]===void 0&&(p[E]=[]),p[E].push(R[0]),p[E].push(R[1])}),r++,m&&(this.genFace(t,e,a,n,l,c,p,u,h,r),s++,r=0,a=[],l=[],c=[],p=[],u=[],h=[])}),t}genFace(e,t,n,s,r,o,a,l,c,p){for(let u=2;u<p;u++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[(u-1)*3]]),e.vertex.push(t.vertexPositions[n[(u-1)*3+1]]),e.vertex.push(t.vertexPositions[n[(u-1)*3+2]]),e.vertex.push(t.vertexPositions[n[u*3]]),e.vertex.push(t.vertexPositions[n[u*3+1]]),e.vertex.push(t.vertexPositions[n[u*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(u-1)*4]),e.vertexWeights.push(l[(u-1)*4+1]),e.vertexWeights.push(l[(u-1)*4+2]),e.vertexWeights.push(l[(u-1)*4+3]),e.vertexWeights.push(l[u*4]),e.vertexWeights.push(l[u*4+1]),e.vertexWeights.push(l[u*4+2]),e.vertexWeights.push(l[u*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(u-1)*4]),e.weightsIndices.push(c[(u-1)*4+1]),e.weightsIndices.push(c[(u-1)*4+2]),e.weightsIndices.push(c[(u-1)*4+3]),e.weightsIndices.push(c[u*4]),e.weightsIndices.push(c[u*4+1]),e.weightsIndices.push(c[u*4+2]),e.weightsIndices.push(c[u*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(u-1)*3]),e.colors.push(o[(u-1)*3+1]),e.colors.push(o[(u-1)*3+2]),e.colors.push(o[u*3]),e.colors.push(o[u*3+1]),e.colors.push(o[u*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(s),e.materialIndex.push(s),e.materialIndex.push(s)),t.normal&&(e.normal.push(r[0]),e.normal.push(r[1]),e.normal.push(r[2]),e.normal.push(r[(u-1)*3]),e.normal.push(r[(u-1)*3+1]),e.normal.push(r[(u-1)*3+2]),e.normal.push(r[u*3]),e.normal.push(r[u*3+1]),e.normal.push(r[u*3+2])),t.uv&&t.uv.forEach((h,f)=>{e.uvs[f]===void 0&&(e.uvs[f]=[]),e.uvs[f].push(a[f][0]),e.uvs[f].push(a[f][1]),e.uvs[f].push(a[f][(u-1)*2]),e.uvs[f].push(a[f][(u-1)*2+1]),e.uvs[f].push(a[f][u*2]),e.uvs[f].push(a[f][u*2+1])})}addMorphTargets(e,t,n,s){n!==null&&(e.morphAttributes.position=[],n.rawTargets.forEach(r=>{const o=A.fbxTree.Objects.Geometry[r.geoID];o!==void 0&&this.genMorphGeometry(e,t,o,s,r.name)}))}genMorphGeometry(e,t,n,s,r){const o=new Pe;n.attrName&&(o.name=n.attrName);const a=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],l=t.Vertices!==void 0?t.Vertices.a.slice():[],c=n.Vertices!==void 0?n.Vertices.a:[],p=n.Indexes!==void 0?n.Indexes.a:[];for(let d=0;d<p.length;d++){const m=p[d]*3;l[m]+=c[d*3],l[m+1]+=c[d*3+1],l[m+2]+=c[d*3+2]}const u={vertexIndices:a,vertexPositions:l},h=this.genBuffers(u),f=new De(h.vertex,3);f.name=r||n.attrName,s.applyToBufferAttribute(f),e.morphAttributes.position.push(f)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,s=e.Normals.a;let r=[];return n==="IndexToDirect"&&("NormalIndex"in e?r=e.NormalIndex.a:"NormalsIndex"in e&&(r=e.NormalsIndex.a)),{dataSize:3,buffer:s,indices:r,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,s=e.UV.a;let r=[];return n==="IndexToDirect"&&(r=e.UVIndex.a),{dataSize:2,buffer:s,indices:r,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,s=e.Colors.a;let r=[];return n==="IndexToDirect"&&(r=e.ColorIndex.a),{dataSize:4,buffer:s,indices:r,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const s=e.Materials.a,r=[];for(let o=0;o<s.length;++o)r.push(o);return{dataSize:1,buffer:s,indices:r,mappingType:t,referenceType:n}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Pe;const n=t-1,s=e.KnotVector.a,r=[],o=e.Points.a;for(let f=0,d=o.length;f<d;f+=4)r.push(new Lt().fromArray(o,f));let a,l;if(e.Form==="Closed")r.push(r[0]);else if(e.Form==="Periodic"){a=n,l=s.length-1-a;for(let f=0;f<n;++f)r.push(r[f])}const p=new Oo(n,s,r,a,l).getPoint(r.length*7),u=new Float32Array(Number(p.length)*3),h=new Pe;return h.addAttribute("position",new st(u,3)),h}}class Uo{constructor(){}parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const n in t){const s=t[n],r=this.addClip(s);e.push(r)}return e}parseClips(){if(A.fbxTree.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=A.fbxTree.Objects.AnimationCurveNode,t=new Map;for(const n in e){const s=e[n];if(s.attrName.match(/S|R|T|DeformPercent/)!==null){const r={id:s.id,attr:s.attrName,curves:{}};t.set(r.id,r)}}return t}parseAnimationCurves(e){const t=A.fbxTree.Objects.AnimationCurve;for(const n in t){const s={id:t[n].id,times:t[n].KeyTime.a.map(qo),values:t[n].KeyValueFloat.a},r=A.connections.get(s.id);if(r!==void 0){const o=r.parents[0].ID,a=r.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=s:a.match(/Y/)?e.get(o).curves.y=s:a.match(/Z/)?e.get(o).curves.z=s:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=s)}}}parseAnimationLayers(e){const t=A.fbxTree.Objects.AnimationLayer,n=new Map;for(const s in t){const r=[],o=A.connections.get(parseInt(s));o!==void 0&&(o.children.forEach((l,c)=>{if(e.has(l.ID)){const p=e.get(l.ID);if(p.curves.x!==void 0||p.curves.y!==void 0||p.curves.z!==void 0){if(r[c]===void 0){const u=A.connections.get(l.ID).parents.filter(h=>h.relationship!==void 0)[0].ID;if(u!==void 0){const h=A.fbxTree.Objects.Model[u.toString()],f={modelName:it.sanitizeNodeName(h.attrName),ID:h.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};A.sceneGraph.traverse(d=>{d.ID===h.id&&(f.transform=d.matrix,d.userData.transformData&&(f.eulerOrder=d.userData.transformData.eulerOrder))}),f.transform||(f.transform=new V),"PreRotation"in h&&(f.preRotation=h.PreRotation.value),"PostRotation"in h&&(f.postRotation=h.PostRotation.value),r[c]=f}}r[c]&&(r[c][p.attr]=p)}else if(p.curves.morph!==void 0){if(r[c]===void 0){const u=A.connections.get(l.ID).parents.filter(y=>y.relationship!==void 0)[0].ID,h=A.connections.get(u).parents[0].ID,f=A.connections.get(h).parents[0].ID,d=A.connections.get(f).parents[0].ID,m=A.fbxTree.Objects.Model[d],w={modelName:it.sanitizeNodeName(m.attrName),morphName:A.fbxTree.Objects.Deformer[u].attrName};r[c]=w}r[c][p.attr]=p}}}),n.set(parseInt(s),r))}return n}parseAnimStacks(e){const t=A.fbxTree.Objects.AnimationStack,n={};for(const s in t){const r=A.connections.get(parseInt(s)).children;r.length>1&&console.warn("FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(r[0].ID);n[s]={name:t[s].attrName,layer:o}}return n}addClip(e){let t=[];return e.layer.forEach(n=>{t=t.concat(this.generateTracks(n))}),new Rt(e.name,-1,t)}generateTracks(e){const t=[];let n=new _,s=new j,r=new _;if(e.transform&&e.transform.decompose(n,s,r),n=n.toArray(),s=new Ke().setFromQuaternion(s,e.eulerOrder).toArray(),r=r.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,s,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,r,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,n,s){const r=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(r,t,n);return new cn(e+"."+s,r,o)}generateRotationTrack(e,t,n,s,r,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(re.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(re.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(re.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,n);s!==void 0&&(s=s.map(re.degToRad),s.push(o),s=new Ke().fromArray(s),s=new j().setFromEuler(s)),r!==void 0&&(r=r.map(re.degToRad),r.push(o),r=new Ke().fromArray(r),r=new j().setFromEuler(r).inverse());const c=new j,p=new Ke,u=[];for(let h=0;h<l.length;h+=3)p.set(l[h],l[h+1],l[h+2],o),c.setFromEuler(p),s!==void 0&&c.premultiply(s),r!==void 0&&c.multiply(r),c.toArray(u,h/3*4);return new un(e+".quaternion",a,u)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map(r=>r/100),s=A.sceneGraph.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new ls(e.modelName+".morphTargetInfluences["+s+"]",t.times,n)}getTimesForAllAxes(e){let t=[];return e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort((n,s)=>n-s).filter((n,s,r)=>r.indexOf(n)==s),t}getKeyframeTrackValues(e,t,n){const s=n,r=[];let o=-1,a=-1,l=-1;return e.forEach(c=>{if(t.x&&(o=t.x.times.indexOf(c)),t.y&&(a=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),o!==-1){const p=t.x.values[o];r.push(p),s[0]=p}else r.push(s[0]);if(a!==-1){const p=t.y.values[a];r.push(p),s[1]=p}else r.push(s[1]);if(l!==-1){const p=t.z.values[l];r.push(p),s[2]=p}else r.push(s[2])}),r}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const n=e.values[t-1],s=e.values[t]-n,r=Math.abs(s);if(r>=180){const o=r/180,a=s/o;let l=n+a;const c=e.times[t-1],u=(e.times[t]-c)/o;let h=c+u;const f=[],d=[];for(;h<e.times[t];)f.push(h),h+=u,d.push(l),l+=a;e.times=lr(e.times,t,f),e.values=lr(e.values,t,d)}}}}class No{allNodes;currentPropName;currentProp;currentIndent;nodeStack;constructor(){}getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new sr,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=e.split(/[\r\n]+/);return t.forEach((n,s)=>{const r=n.match(/^[\s\t]*;/),o=n.match(/^[\s\t]*$/);if(r||o)return;const a=n.match("^\\t{"+this.currentIndent+"}(\\w+):(.*){",""),l=n.match("^\\t{"+this.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=n.match("^\\t{"+(this.currentIndent-1)+"}}");a?this.parseNodeBegin(n,a):l?this.parseNodeProperty(n,l,t[++s]):c?this.popStack():n.match(/^[^\s\t}]/)&&this.parseNodePropertyContinued(n)}),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),s=t[2].split(",").map(l=>l.trim().replace(/^"/,"").replace(/"$/,"")),r={name:n},o=this.parseNodeAttr(s),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(n,r):n in a?(n==="PoseNode"?a.PoseNode.push(r):a[n].id!==void 0&&(a[n]={},a[n][a[n].id]=a[n]),o.id!==""&&(a[n][o.id]=r)):typeof o.id=="number"?(a[n]={},a[n][o.id]=r):n!=="Properties70"&&(n==="PoseNode"?a[n]=[r]:a[n]=r),typeof o.id=="number"&&(r.id=o.id),o.name!==""&&(r.attrName=o.name),o.type!==""&&(r.attrType=o.type),this.pushStack(r)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",s="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),s=e[2]),{id:t,name:n,type:s}}parseNodeProperty(e,t,n){let s=t[1].replace(/^"/,"").replace(/"$/,"").trim(),r=t[2].replace(/^"/,"").replace(/"$/,"").trim();s==="Content"&&r===","&&(r=n.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,s,r);return}if(s==="C"){const l=r.split(",").slice(1),c=parseInt(l[0]),p=parseInt(l[1]);let u=r.split(",").slice(3);u=u.map(h=>h.trim().replace(/^"/,"")),s="connections",r=[c,p],zo(r,u),o[s]===void 0&&(o[s]=[])}s==="Node"&&(o.id=r),s in o&&Array.isArray(o[s])?o[s].push(r):s!=="a"?o[s]=r:o.a=r,this.setCurrentProp(o,s),s==="a"&&r.slice(-1)!==","&&(o.a=Gn(r))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=Gn(t.a))}parseNodeSpecialProperty(e,t,n){const s=n.split('",').map(p=>p.trim().replace(/^\"/,"").replace(/\s/,"_")),r=s[0],o=s[1],a=s[2],l=s[3];let c=s[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=Gn(c);break}this.getPrevNode()[r]={type:o,type2:a,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),r)}}class Go{constructor(){}parse(e){const t=new nr(e);t.skip(23);const n=t.getUint32();console.log("FBXLoader: FBX binary version: "+n);const s=new sr;for(;!this.endOfContent(t);){const r=this.parseNode(t,n);r!==null&&s.add(r.name,r)}return s}endOfContent(e){return e.size()%16==0?(e.getOffset()+160+16&~15)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},s=t>=7500?e.getUint64():e.getUint32(),r=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(s===0)return null;const l=[];for(let h=0;h<r;h++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",p=l.length>1?l[1]:"",u=l.length>2?l[2]:"";for(n.singleProperty=r===1&&e.getOffset()===s;s>e.getOffset();){const h=this.parseNode(e,t);h!==null&&this.parseSubNode(a,n,h)}return n.propertyList=l,typeof c=="number"&&(n.id=c),p!==""&&(n.attrName=p),u!==""&&(n.attrType=u),a!==""&&(n.name=a),n}parseSubNode(e,t,n){if(n.singleProperty===!0){const s=n.propertyList[0];Array.isArray(s)?(t[n.name]=n,n.a=s):t[n.name]=s}else if(e==="Connections"&&n.name==="C"){const s=[];n.propertyList.forEach((r,o)=>{o!==0&&s.push(r)}),t.connections===void 0&&(t.connections=[]),t.connections.push(s)}else if(n.name==="Properties70")Object.keys(n).forEach(r=>{t[r]=n[r]});else if(e==="Properties70"&&n.name==="P"){let s=n.propertyList[0],r=n.propertyList[1];const o=n.propertyList[2],a=n.propertyList[3];let l;s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),r==="Color"||r==="ColorRGB"||r==="Vector"||r==="Vector3D"||r.indexOf("Lcl_")===0?l=[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:l=n.propertyList[4],t[s]={type:r,type2:o,flag:a,value:l}}else t[n.name]===void 0?typeof n.id=="number"?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:n.name==="PoseNode"?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):t[n.name][n.id]===void 0&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":const n=e.getUint32();return e.getArrayBuffer(n);case"S":const s=e.getUint32();return e.getString(s);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),o=e.getUint32(),a=e.getUint32();if(o===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}typeof Fo=="undefined"&&console.error("FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");const l=new tr(new Uint8Array(e.getArrayBuffer(a))),c=new nr(l.decompress().buffer);switch(t){case"b":case"c":return c.getBooleanArray(r);case"d":return c.getFloat64Array(r);case"f":return c.getFloat32Array(r);case"i":return c.getInt32Array(r);case"l":return c.getInt64Array(r)}default:throw new Error("FBXLoader: Unknown property type "+t)}}}class nr{littleEndian;offset;dv;constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)==1}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let s=0;s<e;s++)t[s]=this.getUint8();const n=t.indexOf(0);return n>=0&&(t=t.slice(0,n)),Fe.decodeText(new Uint8Array(t))}}class sr{constructor(){}add(e,t){this[e]=t}}function jo(i){const e="Kaydara FBX Binary  \0";return i.byteLength>=e.length&&e===ar(i,0,e.length)}function Ho(i){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function n(s){const r=i[s-1];return i=i.slice(t+s),t++,r}for(let s=0;s<e.length;++s)if(n(1)===e[s])return!1;return!0}function rr(i){const e=/FBXVersion: (\d+)/,t=i.match(e);if(t)return parseInt(t[1]);throw new Error("FBXLoader: Cannot find the version number for the file given.")}function qo(i){return i/46186158e3}const Vo=[];function Kt(i,e,t,n){let s;switch(n.mappingType){case"ByPolygonVertex":s=i;break;case"ByPolygon":s=e;break;case"ByVertice":s=t;break;case"AllSame":s=n.indices[0];break;default:console.warn("FBXLoader: unknown attribute mapping type "+n.mappingType)}n.referenceType==="IndexToDirect"&&(s=n.indices[s]);const r=s*n.dataSize,o=r+n.dataSize;return Wo(Vo,n.buffer,r,o)}const Nn=new Ke,Ze=new _;function ir(i){const e=new V,t=new V,n=new V,s=new V,r=new V,o=new V,a=new V,l=new V,c=new V;let p=new V;const u=new V,h=i.inheritType?i.inheritType:0;if(i.translation&&e.setPosition(Ze.fromArray(i.translation)),i.preRotation){const M=i.preRotation.map(re.degToRad);M.push(i.eulerOrder),t.makeRotationFromEuler(Nn.fromArray(M))}if(i.rotation){const M=i.rotation.map(re.degToRad);M.push(i.eulerOrder),n.makeRotationFromEuler(Nn.fromArray(M))}if(i.postRotation){const M=i.postRotation.map(re.degToRad);M.push(i.eulerOrder),s.makeRotationFromEuler(Nn.fromArray(M))}i.scale&&r.scale(Ze.fromArray(i.scale)),i.scalingOffset&&a.setPosition(Ze.fromArray(i.scalingOffset)),i.scalingPivot&&o.setPosition(Ze.fromArray(i.scalingPivot)),i.rotationOffset&&l.setPosition(Ze.fromArray(i.rotationOffset)),i.rotationPivot&&c.setPosition(Ze.fromArray(i.rotationPivot)),i.parentMatrixWorld&&(p=i.parentMatrixWorld);const f=t.multiply(n).multiply(s),d=new V;p.extractRotation(d);const m=new V;m.copyPosition(p);const w=m.invert().multiply(p),y=d.invert().multiply(w),b=r;let E;if(h===0)E=d.multiply(f).multiply(y).multiply(b);else if(h===1)E=d.multiply(y).multiply(f).multiply(b);else{const M=new V().copy(r),D=y.multiply(M.invert());E=d.multiply(f).multiply(D).multiply(b)}let R=e.multiply(l).multiply(c).multiply(t).multiply(n).multiply(s).multiply(c.invert()).multiply(a).multiply(o).multiply(r).multiply(o.invert());const x=new V().copyPosition(R),S=p.multiply(x);return u.copyPosition(S),R=u.multiply(E),R}function or(i){i=i||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return i===6?(console.warn("FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[i]}function Gn(i){return i.split(",").map(t=>parseFloat(t))}function ar(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=i.byteLength),Fe.decodeText(new Uint8Array(i,e,t))}function zo(i,e){for(let t=0,n=i.length,s=e.length;t<s;t++,n++)i[n]=e[t]}function Wo(i,e,t,n){for(let s=t,r=0;s<n;s++,r++)i[r]=e[s];return i}function lr(i,e,t){return i.slice(0,e).concat(t).concat(i.slice(e))}var se;(function(i){i[i.glTF=0]="glTF",i[i.FBX=1]="FBX",i[i.OBJ=2]="OBJ",i[i.VRM=3]="VRM",i[i.PNG=4]="PNG",i[i.JPEG=5]="JPEG",i[i.MP4=6]="MP4",i[i.TS=7]="TS",i[i.MKV=8]="MKV",i[i.MP3=9]="MP3",i[i.OGG=10]="OGG",i[i.AAC=11]="AAC",i[i.CSV=12]="CSV",i[i.PlainText=13]="PlainText",i[i.DOC=14]="DOC",i[i.XLS=15]="XLS",i[i.Script=16]="Script"})(se||(se={}));var bt;(function(i){i[i.Model=0]="Model",i[i.Image=1]="Image",i[i.Video=2]="Video",i[i.Audio=3]="Audio",i[i.Document=4]="Document",i[i.Text=5]="Text",i[i.Script=6]="Script"})(bt||(bt={}));const Qo=new RegExp("(?:^[a-z][a-z0-9+.-]*:|//)"),cr=i=>Qo.test(i),Ko={"0":5,"1":15,"2":30},ur=new RegExp(/^(.*)_LOD(\d+)$/),Xo=(i,e)=>{const t=new Map;i.traverse(n=>{if(!!n.isMesh){if(typeof e.receiveShadow!="undefined"&&(n.receiveShadow=e.receiveShadow),typeof e.castShadow!="undefined"&&(n.castShadow=e.castShadow),t.has(n.material))n.material=t.get(n.material);else if(n.material?.userData?.gltfExtensions?.KHR_materials_clearcoat){const s=new rn({});s.setValues(n.material),s.clearcoat=n.material.userData.gltfExtensions.KHR_materials_clearcoat.clearcoatFactor,s.clearcoatRoughness=n.material.userData.gltfExtensions.KHR_materials_clearcoat.clearcoatRoughnessFactor,s.defines={STANDARD:"",PHYSICAL:""},t.set(n.material,s),n.material=s}}}),t.clear(),pr(i),i.children.length&&i.children.forEach(n=>pr(n))},pr=i=>{if(!!!i.children?.find(n=>String(n.name).match(ur)))return i;const t=new Map;return i.children.forEach(n=>{const s=n.name.match(ur);if(!s)return;const[r,o,a]=s;!o||!a||(t.has(o)||t.set(o,[]),t.get(o)?.push({object:n,level:a}))}),t.forEach((n,s)=>{const r=new ai;r.name=s,n[0].object.parent?.add(r),n.forEach(({level:o,object:a})=>{r.addLevel(a,Te.LOD_DISTANCES[o])})}),i},$o=i=>/\.(?:gltf|glb)$/.test(i)?se.glTF:/\.(?:fbx)$/.test(i)?se.FBX:/\.(?:vrm)$/.test(i)?se.VRM:/\.(?:png)$/.test(i)?se.PNG:/\.(?:jpg|jpeg|)$/.test(i)?se.JPEG:null,Yo=i=>/\.(?:gltf|glb|vrm|fbx|obj)$/.test(i)?bt.Model:/\.png|jpg|jpeg$/.test(i)?bt.Image:null,Jo=new A,Zo=new ln,ea=new Qe,ta=i=>{switch(i){case se.glTF:case se.VRM:return qt();case se.FBX:return Jo;case se.PNG:case se.JPEG:return Zo;default:return ea}},hr=(i,e=s=>{},t=s=>{},n=s=>{})=>{if(!i.url){n(new Error("URL is empty"));return}const s=cr(i.url)?i.url:Ge.publicPath+i.url;Te.Cache.has(s)&&e(Te.Cache.get(s));const r=$o(s),o=Yo(s);ta(r).load(s,l=>{(r===se.glTF||r===se.VRM)&&Us(l),o===bt.Model&&Xo(l.scene,i),Te.Cache.set(s,l),e(l)},t,n)};class Te{static Cache=new Map;static loaders=new Map;static LOD_DISTANCES=Ko;assetType;assetClass;result;static load(e,t=r=>{},n=r=>{},s=r=>{}){hr(e,t,n,s)}static async loadAsync(e){return new Promise((t,n)=>{hr(e,t,()=>{},t)})}static getFromCache(e){return Te.Cache.get(cr(e)?e:Ge.publicPath+e)}}function Ve(){let i=Ge.currentWorld;return i||(i=Ge.defaultWorld),i}const na=new Map,xe=(i,e)=>{const t=ki(e),n=new Map;return e&&Object.defineProperty(t,"_schema",{value:e}),Object.defineProperty(t,"_map",{value:n}),Object.defineProperty(t,"_name",{value:i,enumerable:!0}),Object.defineProperty(t,"get",{value:function(s){return n.get(s)}}),Object.defineProperty(t,"set",{value:function(s,r){return e&&Object.defineProperties(r,Object.keys(e).reduce((o,a)=>(o[a]={get(){return t[a][s]},set(l){t[a][s]=l}},o),{})),n.set(s,r)}}),Object.defineProperty(t,"delete",{value:function(s){return n.delete(s)}}),na.set(i,t),t},he=(i,e)=>{if(typeof i=="undefined")throw new Error("[getComponent]: entity is undefined");return e.get(i)},et=(i,e,t,n=Ve())=>{if(typeof i=="undefined")throw new Error("[addComponent]: entity is undefined");if(Ni(n,e,i),e._schema)for(const[s]of Object.entries(e._schema))e[s][i]=t[s];return n._removedComponents.get(i)?.delete(e),e.set(i,t),e.get(i)},qa=(i,e,t=Ve())=>{if(typeof i=="undefined")throw new Error("[hasComponent]: entity is undefined");return _n(t,e,i)},sa=(i,e,t=Ve())=>{if(typeof i=="undefined"){console.warn("[removeComponent]: entity is undefined");return}const n=e.get(i),s=t._removedComponents.get(i)??new Set;return t._removedComponents.set(i,s.add(e)),Gi(t,e,i),n},Va=(i,e=Ve())=>{for(const t of xs(e,i))sa(i,t,e)};function za(i){const e=Pi(i),t=Li(e),n=Oi(e),s=(r=Ve())=>e(r);return s.enter=(r=Ve())=>t(r),s.exit=(r=Ve())=>n(r),s}class Xt{static instance=new Xt;_animations;_defaultModel;_defaultSkeleton;getAnimationDuration(e){const t=this._animations.find(n=>n.name===e);return t?t.duration:0}getAnimations(){return new Promise(e=>{this._animations&&e(this._animations),Xe||e([]),qt().load(Ge.publicPath+"/models/avatars/Animations.glb",t=>{t.scene.traverse(n=>{n.type==="SkinnedMesh"&&!this._defaultSkeleton&&(this._defaultSkeleton=n)}),this._defaultSkeleton||(this._defaultSkeleton=Or()),this._animations=t.animations,this._animations?.forEach(n=>{n.tracks=n.tracks.filter(s=>!s.name.match(/^CC_Base_/))}),e(this._animations)},console.log,console.error)})}getDefaultModel(){return new Promise(e=>{this._defaultModel&&e(this._defaultModel),Xe||e(new ke),qt().load(Ge.publicPath+"/models/avatars/Razer1.glb",t=>{this._defaultModel=t.scene,this._defaultModel.traverse(n=>{n.material&&(n.material.transparent=!0,n.material.opacity=.5)}),e(this._defaultModel)},console.log,console.error)})}}const fr=xe("AnimationComponent"),jn=xe("AvatarComponent");class $t{static retarget(e,t,n){n||(n={preserveMatrix:!0,preservePosition:!0,preserveHipPosition:!1,useTargetMatrix:!1,hip:"hip",names:{}});const s=new _,r=new j,o=new _,a=new V,l=new V,c=new V;n.preserveMatrix=n.preserveMatrix!==void 0?n.preserveMatrix:!0,n.preservePosition=n.preservePosition!==void 0?n.preservePosition:!0,n.preserveHipPosition=n.preserveHipPosition!==void 0?n.preserveHipPosition:!1,n.useTargetMatrix=n.useTargetMatrix!==void 0?n.useTargetMatrix:!1,n.hip=n.hip!==void 0?n.hip:"hip",n.names=n.names||{};const p=t.isObject3D?t.skeleton.bones:this.getBones(t),u=e.isObject3D?e.skeleton.bones:this.getBones(e);let h,f,d,m,w;if(e.isObject3D?e.skeleton.pose():(n.useTargetMatrix=!0,n.preserveMatrix=!1),n.preservePosition){w=[];for(let y=0;y<u.length;y++)w.push(u[y].position.clone())}if(n.preserveMatrix){e.updateMatrixWorld(),e.matrixWorld.identity();for(let y=0;y<e.children.length;++y)e.children[y].updateMatrixWorld(!0)}if(n.offsets){h=[];for(let y=0;y<u.length;++y)f=u[y],d=n.names[f.name]||f.name,n.offsets&&n.offsets[d]&&(f.matrix.multiply(n.offsets[d]),f.matrix.decompose(f.position,f.quaternion,f.scale),f.updateMatrixWorld()),h.push(f.matrixWorld.clone())}for(let y=0;y<u.length;++y){if(f=u[y],d=n.names[f.name]||f.name,m=this.getBoneByName(d,p),c.copy(f.matrixWorld),m){if(m.updateMatrixWorld(),n.useTargetMatrix?l.copy(m.matrixWorld):(l.copy(e.matrixWorld).invert(),l.multiply(m.matrixWorld)),o.setFromMatrixScale(l),l.scale(o.set(1/o.x,1/o.y,1/o.z)),c.makeRotationFromQuaternion(r.setFromRotationMatrix(l)),e.isObject3D){const b=u.indexOf(f),E=h?h[b]:a.copy(e.skeleton.boneInverses[b]).invert();c.multiply(E)}c.copyPosition(l)}f.parent&&f.parent.isBone?(f.matrix.copy(f.parent.matrixWorld).invert(),f.matrix.multiply(c)):f.matrix.copy(c),n.preserveHipPosition&&d===n.hip&&f.matrix.setPosition(s.set(0,f.position.y,0)),f.matrix.decompose(f.position,f.quaternion,f.scale),f.updateMatrixWorld()}if(n.preservePosition)for(let y=0;y<u.length;++y)f=u[y],d=n.names[f.name]||f.name,d!==n.hip&&f.position.copy(w[y]);n.preserveMatrix&&e.updateMatrixWorld(!0)}static retargetClip(e,t,n,s={}){s.useFirstFramePosition=s.useFirstFramePosition!==void 0?s.useFirstFramePosition:!1,s.fps=s.fps!==void 0?s.fps:30,s.names=s.names||[],t.isObject3D||(t=this.getHelperFromSkeleton(t));const r=Math.round(n.duration*(s.fps/1e3)*1e3),o=1/s.fps,a=[],l=new us(t),c=this.getBones(e.skeleton),p=[];let u,h,f,d,m;l.clipAction(n).play(),l.update(0),t.updateMatrixWorld();for(let w=0;w<r;++w){const y=w*o;this.retarget(e,t,s);for(let b=0;b<c.length;++b)m=s.names[c[b].name]||c[b].name,f=this.getBoneByName(m,t.skeleton),f&&(h=c[b],d=p[b]=p[b]||{bone:h},s.hip===m&&(d.pos||(d.pos={times:new Float32Array(r),values:new Float32Array(r*3)}),s.useFirstFramePosition&&(w===0&&(u=h.position.clone()),h.position.sub(u)),d.pos.times[w]=y,h.position.toArray(d.pos.values,w*3)),d.quat||(d.quat={times:new Float32Array(r),values:new Float32Array(r*4)}),d.quat.times[w]=y,h.quaternion.toArray(d.quat.values,w*4));l.update(o),t.updateMatrixWorld()}for(let w=0;w<p.length;++w)d=p[w],d&&(d.pos&&a.push(new cn(".bones["+d.bone.name+"].position",d.pos.times,d.pos.values)),a.push(new un(".bones["+d.bone.name+"].quaternion",d.quat.times,d.quat.values)));return l.uncacheAction(n),new Rt(n.name,-1,a)}static getHelperFromSkeleton(e){const t=new li(e.bones[0]);return t.skeleton=e,t}static getSkeletonOffsets(e,t,n={}){const s=new _,r=new _,o=new _,a=new _,l=new Ee,c=new Ee;n.hip=n.hip!==void 0?n.hip:"hip",n.names=n.names||{},t.isObject3D||(t=this.getHelperFromSkeleton(t));const p=Object.keys(n.names),u=Object.values(n.names),h=t.isObject3D?t.skeleton.bones:this.getBones(t),f=e.isObject3D?e.skeleton.bones:this.getBones(e),d=[];let m,w,y,b;for(e.skeleton.pose(),b=0;b<f.length;++b)if(m=f[b],y=n.names[m.name]||m.name,w=this.getBoneByName(y,h),w&&y!==n.hip){const E=this.getNearestBone(m.parent,p),R=this.getNearestBone(w.parent,u);E.updateMatrixWorld(),R.updateMatrixWorld(),s.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(m.matrixWorld),o.setFromMatrixPosition(R.matrixWorld),a.setFromMatrixPosition(w.matrixWorld),l.subVectors(new Ee(r.x,r.y),new Ee(s.x,s.y)).normalize(),c.subVectors(new Ee(a.x,a.y),new Ee(o.x,o.y)).normalize();const x=l.angle()-c.angle(),S=new V().makeRotationFromEuler(new Ke(0,0,x));m.matrix.multiply(S),m.matrix.decompose(m.position,m.quaternion,m.scale),m.updateMatrixWorld(),d[y]=S}return d}static renameBones(e,t){const n=this.getBones(e);for(let s=0;s<n.length;++s){const r=n[s];t[r.name]&&(r.name=t[r.name])}return this}static getBones(e){return Array.isArray(e)?e:e.bones}static getBoneByName(e,t){for(let n=0,s=this.getBones(t);n<s.length;n++)if(e===s[n].name)return s[n]}static getNearestBone(e,t){for(;e.isBone;){if(t.indexOf(e.name)!==-1)return e;e=e.parent}}static findBoneTrackData(e,t){const n=/\[(.*)\]\.(.*)/,s={name:e};for(let r=0;r<t.length;++r){const o=n.exec(t[r].name);o&&e===o[1]&&(s[o[2]]=r)}return s}static getEqualsBonesNames(e,t){const n=this.getBones(e),s=this.getBones(t),r=[];e:for(let o=0;o<n.length;o++){const a=n[o].name;for(let l=0;l<s.length;l++)if(a===s[l].name){r.push(a);continue e}}return r}static clone(e){const t=new Map,n=new Map,s=e.clone();return dr(e,s,(r,o)=>{t.set(o,r),n.set(r,o)}),s.traverse(r=>{if(!r.isSkinnedMesh)return;const o=r,a=t.get(r),l=a.skeleton.bones;o.skeleton=a.skeleton.clone(),o.bindMatrix.copy(a.bindMatrix),o.skeleton.bones=l.map(c=>(n.has(c)||console.warn("Bone was not cloned",c,". Common reason is that bones parent is out of clone source",e),n.get(c))),o.bind(o.skeleton,o.bindMatrix)}),s}}function dr(i,e,t){t(i,e);for(let n=0;n<i.children.length;n++)dr(i.children[n],e.children[n],t)}const tt=xe("AvatarAnimationComponent");class ra{static render=(e,t)=>{const n=this.updateCurrentState(e,t),s=this.unmountPreviousState(e,t);this.renderIdleWeight(e,n,s)};static mountCurrentState=e=>{const t=he(e,tt),n=he(e,fr);t.currentState.timeElapsedSinceUpdate=0,t.currentState.animations.forEach(s=>{!s.clip&&(s.clip=Rt.findByName(Xt.instance._animations,s.name),!s.clip)||(s.action=n.mixer.clipAction(s.clip),s.decorateAction&&s.decorateAction(s.action))})};static updateCurrentState=(e,t)=>{const n=he(e,tt);let s=0;const r=n.currentState;return r.timeElapsedSinceUpdate+=t,r.animations.forEach(o=>{if(!!o.clip){if(r.weightParams?.interpolate&&o.weight!==o.transitionEndWeight&&(o.weight=this.interpolateWeight(r.timeElapsedSinceUpdate,r.transitionDuration,o.transitionStartWeight,o.transitionEndWeight)),s+=o.weight,o.action.setEffectiveWeight(o.weight),o.action.setEffectiveTimeScale(o.timeScale||1),o.weight>0&&(o.action.play(),r.syncActions)){for(let a=0;a<r.animations.length;a++)if(r.animations[a].action&&r.animations[a].weight>0){o.action.syncWith(r.animations[a].action);break}}r.weightParams?.resetAnimation&&o.weight<=0&&o.action.reset()}}),s};static unmountPreviousState=(e,t,n)=>{const s=he(e,tt);let r=0;return s.prevState&&(s.prevState.timeElapsedSinceUpdate+=t,s.prevState.animations.forEach(o=>{o.weight=n?0:this.interpolateWeight(s.prevState.timeElapsedSinceUpdate,s.prevState.transitionDuration,o.transitionStartWeight,o.transitionEndWeight),o.action.setEffectiveWeight(o.weight),r+=o.weight,o.weight<=0&&(o.action.reset(),o.action.isRunning()&&o.action.stop())}),s.prevState.name!==s.animationGraph.defaultState.name&&r<=0&&this.resetPreviousState(e,!0)),r};static renderIdleWeight=(e,t,n)=>{const s=he(e,tt),r=s.animationGraph.defaultState;r.animations[0].weight=Math.max(1-(n+t),0),s.currentState.name===r.name&&r.animations[0].weight<1&&(r.animations[0].weight=1),r.animations[0].action&&r.animations[0].action.setEffectiveWeight(r.animations[0].weight)};static interpolateWeight=(e,t,n,s)=>re.clamp(re.mapLinear(e,0,t,n,s),0,1);static resetPreviousState=(e,t)=>{const n=he(e,tt);n.prevState.timeElapsedSinceUpdate=0,n.prevState.animations.forEach(s=>{s.transitionStartWeight=s.weight,s.transitionEndWeight=0}),t&&(n.prevState=null)}}const ia=xe("AvatarPendingComponent"),oa=xe("AvatarEffectComponent");class aa{time=0;object;maxHeight=1;minHeight=0;step=.001;constructor(e,t,n){e.traverse(s=>{s.material&&(s.visible=!0)}),this.object=e,this.minHeight=t-1,this.maxHeight=n+1,this.step=(this.maxHeight-this.minHeight)/150,this.time=this.minHeight}dispose(){}update(e){return this.time<=this.maxHeight?(this.object.traverse(t=>{t.material&&t.name!=="light_obj"&&t.name!=="plate_obj"&&t.material.uniforms&&(t.material.uniforms.time.value=this.time)}),this.time+=this.step,!1):(this.dispose(),!0)}static getDissolveTexture(e){const t=["varying float posY;","varying vec2 vUv;","#include <skinning_pars_vertex>","void main() {","#include <skinbase_vertex>","#include <begin_vertex>","#include <skinning_vertex>","#include <project_vertex>","vec2 clipSpace = gl_Position.xy / gl_Position.w;","vUv = clipSpace * 0.5 + 0.5;","posY = position.y;","}"].join(`
`),n=["varying vec2 vUv;","varying float posY;","#include <skinning_pars_vertex>","void main() {","#include <skinbase_vertex>","#include <begin_vertex>","#include <skinning_vertex>","#include <project_vertex>","vUv = uv;","posY = position.y;","}"].join(`
`),s=["uniform vec3 color;","varying vec2 vUv;","varying float posY;","uniform float time;","uniform sampler2D texture_dissolve;","float rand(float co) { return fract(sin(co*(91.3458)) * 47453.5453); }","void main() {","	gl_FragColor = vec4(color.r, color.g, color.b, 1.0);","	float offset = posY - time;"," if(offset > (-0.01 - rand(time) * 0.3)){","   gl_FragColor.r = 0.0;","   gl_FragColor.g = 1.0;","   gl_FragColor.b = 0.0;"," }"," if(offset > 0.0){","   discard;"," }","}"].join(`
`),r=["uniform vec3 color;","varying vec2 vUv;","varying float posY;","uniform float time;","uniform sampler2D texture_dissolve;","uniform sampler2D origin_texture;","float rand(float co) { return fract(sin(co*(91.3458)) * 47453.5453); }","void main() {","	gl_FragColor = texture2D(origin_texture, vUv);","	float offset = posY - time;"," if(offset > (-0.01 - rand(time) * 0.3)){","   gl_FragColor.r = 0.0;","   gl_FragColor.g = 1.0;","   gl_FragColor.b = 0.0;"," }"," if(offset > 0.0){","   discard;"," }","}"].join(`
`),o=e.geometry.hasAttribute("uv"),a=e.material.map!==null;return new ci({uniforms:{color:{value:e.material.color},origin_texture:{value:e.material.map},time:{value:-200}},vertexShader:o?n:t,fragmentShader:a?r:s})}}const mr={None:0,Avatar:1,Portal:2,Scene:3},yr=[{name:"Hips",parentIndex:null,position:[21209638824798676e-34,1.0495057106018066,.025098741054534912],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"Spine",parentIndex:0,position:[9234152287262987e-23,.10181593894958496,.0013151764869689941],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"Spine1",parentIndex:1,position:[25193997998940176e-25,.10083436965942383,-.010008037090301514],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"Spine2",parentIndex:2,position:[34574867413539323e-25,.09100031852722168,-.013734161853790283],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"Neck",parentIndex:3,position:[633428953733528e-23,.1667165756225586,-.025161653757095337],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"Head",parentIndex:4,position:[-42423238255651086e-25,.09617877006530762,.01685008406639099],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"HeadTop_End",parentIndex:5,position:[-6508244609904068e-24,.17815160751342773,.02584981918334961],quaternion:[21604543576358992e-23,0,0,1],scale:[1,1,1]},{name:"LeftEye",parentIndex:5,position:[.030675604939460754,.06409502029418945,.09283554553985596],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"RightEye",parentIndex:5,position:[-.030675504356622696,.06409502029418945,.09283548593521118],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftShoulder",parentIndex:3,position:[.04570446163415909,.10945963859558105,-.026279866695404053],quaternion:[-.7071068286895752,-.7071068286895752,-5338508302088485e-23,5338508302088485e-23],scale:[1,1,1]},{name:"LeftArm",parentIndex:9,position:[-.005245692562311888,.10592369735240936,.022321192547678947],quaternion:[0,-31786505871878035e-24,0,1],scale:[1,1,1]},{name:"LeftForeArm",parentIndex:10,position:[-957689508140902e-21,.2784152626991272,-3577546863198222e-22],quaternion:[0,-3552713678800501e-30,0,1],scale:[1,1,1]},{name:"LeftHand",parentIndex:11,position:[-24243377083621453e-23,.28328830003738403,-3875570087075175e-22],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandThumb1",parentIndex:12,position:[-.01575041003525257,.02466142177581787,-.02682414837181568],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandThumb2",parentIndex:13,position:[-.018646955490112305,.03229802846908569,-.018646808341145515],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandThumb3",parentIndex:14,position:[-.015314816497266293,.026525676250457764,-.015314699150621891],quaternion:[0,-3552713678800501e-30,0,1],scale:[1,1,1]},{name:"LeftHandIndex1",parentIndex:12,position:[-.005170824006199837,.09109306335449219,-.02260074019432068],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandIndex2",parentIndex:16,position:[-2039360236238963e-24,.03676408529281616,-2986021172546316e-22],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandIndex3",parentIndex:17,position:[23637917934138386e-23,.028830647468566895,44645597085946065e-23],quaternion:[0,0,0,1],scale:[1,.9999999403953552,1]},{name:"LeftHandMiddle1",parentIndex:12,position:[-24243377083621453e-23,.095333993434906,-14913847223851917e-23],quaternion:[0,-3552713678800501e-30,0,1],scale:[1,1,1]},{name:"LeftHandMiddle2",parentIndex:19,position:[-40151766356189e-22,.03698235750198364,-17894079462621448e-23],quaternion:[0,3552713678800501e-30,0,1],scale:[1,1,1]},{name:"LeftHandMiddle3",parentIndex:20,position:[-480852349937777e-21,.029509305953979492,-14913851487108332e-23],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandRing1",parentIndex:12,position:[-.0004394110874272883,.0910453200340271,.018650829792022705],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandRing2",parentIndex:22,position:[-5645705680734636e-24,.03154021501541138,-895722109817143e-22],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandRing3",parentIndex:23,position:[-4824828465643805e-22,.029376745223999023,8924168071189342e-23],quaternion:[0,-3552713678800501e-30,0,1],scale:[1,1,1]},{name:"LeftHandPinky1",parentIndex:12,position:[-.004886634647846222,.08077782392501831,.038060665130615234],quaternion:[0,0,0,1],scale:[1,.9999999403953552,1]},{name:"LeftHandPinky2",parentIndex:25,position:[-7342598529191946e-24,.03600031137466431,2676668486856215e-22],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"LeftHandPinky3",parentIndex:26,position:[-7342598529191946e-24,.021142184734344482,-5540385927815805e-25],quaternion:[7542257662862539e-22,-7240569175337441e-22,-6033837507857243e-21,1],scale:[1,1,1]},{name:"RightShoulder",parentIndex:3,position:[-.04569969326257706,.10946178436279297,-.02628016471862793],quaternion:[0,0,.7071068286895752,.7071068286895752],scale:[.9999998807907104,.9999998807907104,1]},{name:"RightArm",parentIndex:28,position:[-.005247950553894043,.1059284508228302,-.022320985794067383],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightForeArm",parentIndex:29,position:[-35762786865234375e-23,.2784152030944824,11548399925231934e-23],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightHand",parentIndex:30,position:[11920928955078125e-23,.2832883298397064,562518835067749e-21],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightHandPinky1",parentIndex:31,position:[-.004884481430053711,.08076684921979904,-.03806009516119957],quaternion:[0,0,-3552713678800501e-30,1],scale:[1,1,1]},{name:"RightHandPinky2",parentIndex:32,position:[11920928955078125e-23,.03600042313337326,5140900611877441e-22],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"RightHandPinky3",parentIndex:33,position:[11920928955078125e-23,.021142177283763885,1564621925354004e-22],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"RightHandRing1",parentIndex:31,position:[-.00043904781341552734,.09103595465421677,-.01865074411034584],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightHandRing2",parentIndex:35,position:[5960464477539062e-22,.03154020756483078,4991888999938965e-22],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightHandRing3",parentIndex:36,position:[-35762786865234375e-23,.02937679924070835,-3948807716369629e-22],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightHandMiddle1",parentIndex:31,position:[0,.09532522410154343,14901161193847656e-23],quaternion:[0,0,-3552713678800501e-30,1],scale:[1,1,1]},{name:"RightHandMiddle2",parentIndex:38,position:[-11920928955078125e-23,.036982350051403046,-20489096641540527e-23],quaternion:[0,0,0,1],scale:[1,1,1]},{name:"RightHandMiddle3",parentIndex:39,position:[-11920928955078125e-23,.02950924076139927,3725310282476357e-24],quaternion:[-8470329472543003e-37,8413088892211817e-23,6018531076210112e-51,1],scale:[1,1,1]},{name:"RightHandIndex1",parentIndex:31,position:[-.005167722702026367,.09108298271894455,.022601155564188957],quaternion:[0,0,-3552713678800501e-30,1],scale:[1,1,1]},{name:"RightHandIndex2",parentIndex:41,position:[-11920928955078125e-23,.036764077842235565,32782554626464844e-23],quaternion:[0,0,0,1],scale:[.9999999403953552,.9999998807907104,1]},{name:"RightHandIndex3",parentIndex:42,position:[-5960464477539062e-22,.028830699622631073,38743019104003906e-23],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightHandThumb1",parentIndex:31,position:[-.015726923942565918,.024648122489452362,.02682625874876976],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightHandThumb2",parentIndex:44,position:[-.018647074699401855,.032297778874635696,.01864716224372387],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"RightHandThumb3",parentIndex:45,position:[-.015314221382141113,.02652602083981037,.015314459800720215],quaternion:[0,0,-3552713678800501e-30,1],scale:[.9999999403953552,.9999999403953552,1]},{name:"LeftUpLeg",parentIndex:0,position:[.08207781612873077,-.0675172209739685,-.015995562076568604],quaternion:[-1,0,-7549790126404332e-23,13433127321604843e-23],scale:[1,1,1]},{name:"LeftLeg",parentIndex:47,position:[-5646270118120356e-24,.44370466470718384,-.0028464184142649174],quaternion:[-13438216228678357e-23,-31786509424591713e-24,-5701752733014908e-30,1],scale:[1,.9999999403953552,1]},{name:"LeftFoot",parentIndex:48,position:[5888123766339959e-24,.4442787170410156,.02982190251350403],quaternion:[-.7071068286895752,-3090862676913275e-23,-3090862321641907e-23,.7071068286895752],scale:[1,1,1]},{name:"LeftToeBase",parentIndex:49,position:[-29802322387695312e-24,.10710558295249939,.08728671818971634],quaternion:[0,3552714525833448e-30,6162975822039155e-48,1],scale:[1,1,1]},{name:"RightUpLeg",parentIndex:0,position:[-.08207795768976212,-.06751662492752075,-.01599562168121338],quaternion:[1,0,7549790126404332e-23,0],scale:[1,1,1]},{name:"RightLeg",parentIndex:51,position:[18066163010033165e-25,.44370537996292114,-.002861559623852372],quaternion:[6692968668176036e-23,-3178651297730539e-23,7970505494763608e-30,1],scale:[1,1,1]},{name:"RightFoot",parentIndex:52,position:[5888049603441914e-24,.444277286529541,.029837876558303833],quaternion:[-.7071067094802856,-30908619663705394e-24,-30908619663705394e-24,.7071068286895752],scale:[1,1,1]},{name:"RightToeBase",parentIndex:53,position:[-14901161193847656e-24,.10710566490888596,.08728665858507156],quaternion:[4015134891233174e-23,-521080354294037e-29,-11930843402178038e-38,1],scale:[1,1,1]}],gr=xe("IKObj"),oe=new _(0,1,0),vt=new _(0,-1,0),Hn=new _(1,0,0),wr=new _(-1,0,0),Y=new _(0,0,1),br=new _(0,0,-1);new _(0,0,0);const vr=new _,Tr=new _;class la{end_idx;chainBones;length;cnt;altForward;altUp;ikSolver;constructor(){this.chainBones=[],this.length=0,this.cnt=0,this.end_idx=null,this.altForward=Y.clone(),this.altUp=oe.clone()}first(){return this.chainBones[0].index}last(){return this.chainBones[this.cnt-1].index}index(e){return this.chainBones[e].index}setOffsets(e,t,n){const r=n.bones[this.chainBones[0].index].world.quaternion.clone().invert();return this.altForward=new _().copy(e).applyQuaternion(r).normalize(),this.altUp=new _().copy(t).applyQuaternion(r).normalize(),this}computeLengthFromBones(e){const t=this.cnt-1;let n=0,s,r,o;for(o=0;o<t;o++)r=e[this.chainBones[o].index],vr.copy(e[this.chainBones[o].index].world.position),Tr.copy(e[this.chainBones[o+1].index].world.position),r.length=vr.distanceTo(Tr),this.chainBones[o].length=r.length,n+=r.length;return this.end_idx!==null&&this.end_idx>-1?(s=this.chainBones[t],s.length=e[this.end_idx].world.position.distanceTo(e[this.chainBones[t].index].world.position),e[this.chainBones[t].index].length=s.length,n+=s.length):console.warn("Recompute Chain Len, End Index is missing"),this.length=n,this}}const ca=xe("IKRigComponent"),ua=xe("IKRigTargetComponent");var Ae;(function(i){i[i.MIXAMO=0]="MIXAMO",i[i.TREX=1]="TREX"})(Ae||(Ae={}));const pa=new j,ha=new j,Yt=new j;new _;function fa(i,e,t,n,s,r){let o=e.bones[i.chainBones[0].index],a=e.bones[i.chainBones[1].index],l=t.bones[i.chainBones[0].index],c=t.bones[i.chainBones[1].index],p=o.length,u=a.length,h=pa,f;Ar(i,e,n,r,h);const d=ha.copy(h),m={aLen:p,cLen:s,bLen:u};f=xt(p,s,u);const w=f;return h.premultiply(Yt.setFromAxisAngle(n.x,-f)).premultiply(Yt.copy(r.quaternion).invert()),t.setBone(o.idx,h),l.world.position.copy(r.position),l.world.quaternion.copy(r.quaternion),l.world.scale.copy(r.scale),nt(l.world,{quaternion:h,position:o.local.position,scale:o.local.scale}),f=Math.PI-xt(p,u,s),h.copy(l.world.quaternion).multiply(a.local.quaternion).premultiply(Yt.setFromAxisAngle(n.x,f)).premultiply(Yt.copy(l.world.quaternion).invert()),t.setBone(a.idx,h),c.world.position.copy(l.world.position),c.world.quaternion.copy(l.world.quaternion),c.world.scale.copy(l.world.scale),nt(c.world,{quaternion:h,position:a.local.position,scale:a.local.scale}),{rotAfterAim:d,acbLen:m,firstRad:w}}function xr(i,e,t,n,s,r){let o=e.bones[i.chainBones[0].index],a=e.bones[i.chainBones[1].index],l=e.bones[i.chainBones[2].index],c=t.bones[i.chainBones[0].index],p=t.bones[i.chainBones[1].index],u=t.bones[i.chainBones[2].index],h=o.length,f=a.length,d=l.length,m=a.length*.5,w=(h+m)/(h+f+d),y=s*w,b=s-y,E=new j,R;Ar(i,e,n,r,E),R=xt(h,y,m),E.premultiply(new j().setFromAxisAngle(n.x,-R)).premultiply(r.quaternion.clone().invert()),t.setBone(o.idx,E),c.world.position.copy(r.position),c.world.quaternion.copy(r.quaternion),c.world.scale.copy(r.scale),nt(c.world,{...o.local,quaternion:E}),R=Math.PI-xt(h,m,y),E.copy(c.world.quaternion).multiply(a.local.quaternion).premultiply(new j().setFromAxisAngle(n.x,R)).premultiply(c.world.quaternion.clone().invert()),t.setBone(a.idx,E),p.world.position.copy(c.world.position),p.world.quaternion.copy(c.world.quaternion),p.world.scale.copy(c.world.scale),nt(p.world,{...a.local,quaternion:E}),R=Math.PI-xt(d,m,b),E.copy(p.world.quaternion).multiply(l.local.quaternion).premultiply(new j().setFromAxisAngle(n.x,-R)).premultiply(p.world.quaternion.invert()),t.setBone(l.idx,E),u.world.position.copy(p.world.position),u.world.quaternion.copy(p.world.quaternion),u.world.scale.copy(p.world.scale),nt(u.world,{...l.local,quaternion:E})}function nt(i,e){i.position.add(e.position.clone().multiply(i.scale).applyQuaternion(i.quaternion)),e.scale&&i.scale.multiply(e.scale),i.quaternion.multiply(e.quaternion)}function Ar(i,e,t,n,s){const r=new j;e.bones[i.first()].bone.getWorldQuaternion(r);const o=i.altForward.clone().applyQuaternion(r);let a=new j().setFromUnitVectors(o,t.z);s.copy(a).multiply(r),o.copy(i.altUp).applyQuaternion(s);let l=o.angleTo(t.y);l<=.00017453292?l=0:(o.crossVectors(o,t.z),o.dot(t.y)>=0&&(l=-l)),s.premultiply(new j().setFromAxisAngle(t.z,l))}const _r=new V,ue=new j,Ce=new j,te=new _,fe=new _,Tt=new _,qn=new _;function xt(i,e,t){let n=(i*i+e*e-t*t)/(2*i*e);return n<-1?n=-1:n>1&&(n=1),Math.acos(n)}function da(i){i.points={},i.chains={},pe(i,"hip","Hips"),pe(i,"head","Head"),pe(i,"neck","Neck"),pe(i,"chest","Spine2"),pe(i,"foot_l","LeftFoot"),pe(i,"foot_r","RightFoot"),_e(i,"arm_r",["RightArm","RightForeArm"],"RightHand"),_e(i,"arm_l",["LeftArm","LeftForeArm"],"LeftHand"),_e(i,"leg_r",["RightUpLeg","RightLeg"],"RightFoot"),_e(i,"leg_l",["LeftUpLeg","LeftLeg"],"LeftFoot"),_e(i,"spine",["Spine","Spine1","Spine2"]),i.chains.leg_l.computeLengthFromBones(i.tpose.bones),i.chains.leg_r.computeLengthFromBones(i.tpose.bones),i.chains.arm_l.computeLengthFromBones(i.tpose.bones),i.chains.arm_r.computeLengthFromBones(i.tpose.bones),i.chains.leg_l.setOffsets(vt,Y,i.tpose),i.chains.leg_r.setOffsets(vt,Y,i.tpose),i.chains.arm_r.setOffsets(wr,br,i.tpose),i.chains.arm_l.setOffsets(Hn,br,i.tpose)}function ma(i){i.points={},i.chains={},pe(i,"hip","hip"),pe(i,"head","face_joint"),pe(i,"foot_l","LeftFoot"),pe(i,"foot_r","RightFoot"),pe(i,"wing_l","left_wing"),pe(i,"wing_r","right_wing"),_e(i,"leg_r",["RightUpLeg","RightKnee","RightShin"],"RightFoot",xr),_e(i,"leg_l",["LeftUpLeg","LeftKnee","LeftShin"],"LeftFoot",xr),_e(i,"spine",["Spine","Spine1"]),_e(i,"tail",["tail_1","tail_2","tail_3","tail_4","tail_5","tail_6","tail_7"]),i.chains.leg_l.computeLengthFromBones(i.tpose.bones),i.chains.leg_r.computeLengthFromBones(i.tpose.bones),i.chains.leg_l.setOffsets(vt,Y,i.tpose),i.chains.leg_r.setOffsets(vt,Y,i.tpose)}function Wa(i,e){ya(i),ga(i,e),Jt(i.pose,i.chains.leg_l,e.leg_l),Jt(i.pose,i.chains.leg_r,e.leg_r),Vn(i,i.points.foot_l,e.foot_l,Y,oe),Vn(i,i.points.foot_r,e.foot_r,Y,oe),wa(i,i.chains.spine,e,oe,Y),Jt(i.pose,i.chains.arm_l,e.arm_l),Jt(i.pose,i.chains.arm_r,e.arm_r),Vn(i,i.points.head,e.head,Y,oe)}const ze={position:new _,quaternion:new j,invQuaternion:new j,scale:new _,reset:function(){this.position.setScalar(0),this.quaternion.identity(),this.invQuaternion.identity(),this.scale.setScalar(0)}};function ya(i){ze.reset();const e=i.pose.skeleton.bones.find(t=>!(t.parent instanceof Ue));e.parent&&(e.parent.getWorldPosition(ze.position),e.parent.getWorldQuaternion(ze.quaternion),e.parent.getWorldScale(ze.scale),ze.invQuaternion.copy(ze.quaternion).invert());for(let t=0;t<i.pose.skeleton.bones.length;t++){const n=i.pose.skeleton.bones[t],s=i.pose.bones[t];n.getWorldPosition(s.world.position),n.getWorldQuaternion(s.world.quaternion),n.getWorldScale(s.world.scale),Ir(s.world.position,s.world.quaternion,s.world.scale,ze),s.local.position.copy(n.position),s.local.quaternion.copy(n.quaternion),s.local.scale.copy(n.scale)}}function ga(i,e){const t=i.points.hip,n=i.pose.bones[t.index],s=i.tpose.bones[t.index],r=s.world.invQuaternion,o=te.copy(Y).applyQuaternion(r),a=fe.copy(oe).applyQuaternion(r),l=Tt.copy(o).applyQuaternion(n.world.quaternion),c=qn.copy(a).applyQuaternion(n.world.quaternion),p=te.copy(Y).applyQuaternion(s.world.quaternion),u=ue.setFromUnitVectors(p,l).multiply(s.world.quaternion),h=fe.copy(oe).applyQuaternion(u);let f=h.angleTo(c);h.cross(l).dot(c)>=0&&(f=-f),e.hip.bind_height=s.local.position.y,e.hip.movement.copy(n.world.position).sub(s.world.position),e.hip.dir.copy(l),e.hip.twist=f}function Jt(i,e,t){const n=i.bones[e.first()],s=i.bones[e.end_idx],r=te.subVectors(s.world.position,n.world.position);t.lengthScale=r.length()/e.length,t.dir.copy(r).normalize();const o=fe.copy(e.altUp).applyQuaternion(n.world.quaternion).cross(r);t.jointDirection.copy(r).cross(o).normalize()}function Vn(i,e,t,n,s){const r=i.pose.bones[e.index],a=i.tpose.bones[e.index].world.invQuaternion,l=te.copy(n).applyQuaternion(a),c=fe.copy(s).applyQuaternion(a);t.lookDirection.copy(l).applyQuaternion(r.world.quaternion),t.twistDirection.copy(c).applyQuaternion(r.world.quaternion)}function wa(i,e,t,n,s){const r=[e.first(),e.last()],o=te,a=fe;let l=0,c,p;for(const u of r){p=i.tpose.bones[u],c=i.pose.bones[u];const h=p.world.invQuaternion;o.copy(n).applyQuaternion(h).applyQuaternion(c.world.quaternion),a.copy(s).applyQuaternion(h).applyQuaternion(c.world.quaternion),t.spine[l].lookDirection.copy(o),t.spine[l].twistDirection.copy(a),l++}}function Qa(i,e){va(e,i),Zt(e,i,i.chains.leg_l,e.leg_l),Zt(e,i,i.chains.leg_r,e.leg_r),zn(e,i,"foot_l",Y,oe),zn(e,i,"foot_r",Y,oe),Aa(e,i,i.chains.spine,e.spine,oe,Y),i.chains.arm_l&&Zt(e,i,i.chains.arm_l,e.arm_l),i.chains.arm_r&&Zt(e,i,i.chains.arm_r,e.arm_r),zn(e,i,"head",Y,oe),ba(i)}function ba(i){for(let e=0;e<i.pose.bones.length;e++){const t=i.pose.bones[e],n=t.bone;n.position.copy(t.local.position),n.quaternion.copy(t.local.quaternion),n.scale.copy(t.local.scale)}i.pose.skeleton.update()}function va(i,e){const t=e.points.hip,n=e.tpose.bones[t.index],s=e.tpose.getParentRotation(t.index),r=ue.setFromUnitVectors(Y,i.hip.dir).multiply(n.world.quaternion);i.hip.twist!=0&&r.premultiply(Ce.setFromAxisAngle(i.hip.dir,i.hip.twist)),r.premultiply(Ce.copy(s).invert());const o=n.world.position.y/i.hip.bind_height,a=te.copy(i.hip.movement).multiplyScalar(o).add(n.world.position),l=e.pose.bones[t.index];l.local.quaternion.copy(r),l.local.position.copy(a),l.world.position.copy(e.pose.bones[t.index].local.position),l.world.quaternion.copy(e.pose.bones[t.index].local.quaternion)}function Zt(i,e,t,n,s=0){const o=e.pose.bones[t.first()].bone,a={position:te,quaternion:ue,scale:fe},l={position:Tt,quaternion:Ce,scale:qn};o.parent.getWorldPosition(a.position),o.parent.getWorldQuaternion(a.quaternion),o.parent.getWorldScale(a.scale),o.getWorldPosition(l.position),o.getWorldQuaternion(l.quaternion),o.getWorldScale(l.scale),e.pose.get_parent_world(t.first(),a,l);let c=t.length*n.lengthScale;Ta(i,l.position,n.dir,n.jointDirection,c),s&&xa(i,s),t.ikSolver(t,e.tpose,e.pose,i.axis,i.length,a),t.chainBones.forEach(({index:p})=>{const u=e.pose.bones[p];u.bone.position.copy(u.local.position),u.bone.quaternion.copy(u.local.quaternion),u.bone.scale.copy(u.local.scale)})}function Ta(i,e,t,n,s){i.startPosition.copy(e),i.endPosition.copy(t).multiplyScalar(s).add(e);const r=i.startPosition.distanceToSquared(i.endPosition);i.length=Math.sqrt(r),i.axis.fromDirection(t,n)}function zn(i,e,t,n,s){const r=e.points[t],o=i[t],a=e.tpose.bones[r.index],l=e.pose.getParentRotation(r.index),c=ue.copy(l).multiply(a.local.quaternion),p=a.world.invQuaternion,u=te.copy(n).applyQuaternion(p),h=fe.copy(s).applyQuaternion(p),f=Tt.copy(u).applyQuaternion(c),d=Ce.setFromUnitVectors(f,o.lookDirection);d.multiply(c);const m=h.applyQuaternion(d),w=ue.setFromUnitVectors(m,o.twistDirection);d.premultiply(w),d.premultiply(ue.copy(l).invert()),e.pose.setBone(r.index,d)}function xa(i,e){const t=i.startPosition,n=i.endPosition,s=(e-t.y)/(n.y-t.y);i.endPosition.set((n.x-t.x)*s+t.x,e,(n.z-t.z)*s+t.z);const r=i.startPosition.distanceTo(i.endPosition);i.length=r}function Aa(i,e,t,n,s,r){const o=e.pose.bones[t.first()],a=e.pose.bones[o.p_idx];i.spineParentPosition.copy(a.local.position),i.spineChildPosition.copy(o.local.position),i.spineParentQuaternion.copy(a.local.quaternion),i.spineChildQuaternion.copy(o.local.quaternion),i.spineParentScale.copy(a.local.scale),i.spineChildScale.copy(o.local.scale);const l=t.cnt-1;for(let c=0;c<=l;c++){const p=t.chainBones[c].index,u=e.tpose.bones[p],h=c/l,f=te.copy(i.spineParentScale).multiply(u.local.position).applyQuaternion(i.spineParentQuaternion);i.spineChildPosition.copy(i.spineParentPosition).add(f),i.spineChildScale.copy(i.spineParentScale).multiply(u.local.scale),i.spineChildQuaternion.copy(i.spineParentQuaternion).multiply(u.local.quaternion);const d=u.world.invQuaternion,m=Tt.copy(s).applyQuaternion(d),w=qn.copy(r).applyQuaternion(d),y=m.applyQuaternion(i.spineChildQuaternion),b=te.lerpVectors(n[0].lookDirection,n[1].lookDirection,h),E=fe.lerpVectors(n[0].twistDirection,n[1].twistDirection,h),R=Ce.setFromUnitVectors(y,b).multiply(i.spineChildQuaternion),x=w.applyQuaternion(R),S=ue.setFromUnitVectors(x,E);R.premultiply(S);const M=ue.copy(i.spineParentQuaternion).invert();if(R.premultiply(M),e.pose.setBone(p,R),h!=1){const D=te.copy(i.spineParentScale).multiply(u.local.position).applyQuaternion(i.spineParentQuaternion);i.spineParentPosition.copy(i.spineParentPosition).add(D),i.spineParentScale.multiply(u.local.scale),i.spineParentQuaternion.multiply(R)}}}function Wn(i,e,t){const n=t.length-1;for(let s=0;s<=n;s++){let r=i.skeleton.bones.find(h=>h.name=t[s]);const o=ue;r.getWorldQuaternion(o);const a=te.copy(Y).applyQuaternion(o),l=fe.crossVectors(c,a).normalize();a.crossVectors(l,c).normalize();const c=Tt.copy(e),p=Ce;_r.makeBasis(l,c,a),p.setFromRotationMatrix(_r),p.dot(o)<0&&_a(p);const u=ue;if(r.getWorldQuaternion(u),Qn(p,u),r.setRotationFromQuaternion(p),s!=n){const h=te;r.getWorldScale(h),h.multiply(r.scale),u.multiply(p);const f=fe;r.getWorldPosition(f),r=i.bones.find(d=>d.name=t[s+1]).bone,r.position.copy(f),r.quaternion.copy(u),r.scale.copy(h)}}i.skeleton.update()}function Qn(i,e){let t=e.x,n=e.y,s=e.z,r=e.w;const o=t*t+n*n+s*s+r*r;if(o==0)t=n=s=r=0;else{const u=1/o;t=-t*u,n=-n*u,s=-s*u,r=r*u}const a=i.x,l=i.y,c=i.z,p=i.w;i.x=t*p+r*a+n*c-s*l,i.y=n*p+r*l+s*a-t*c,i.z=s*p+r*c+t*l-n*a,i.w=r*p-t*a-n*l-s*c}function _a(i){return i.x=-i.x,i.y=-i.y,i.z=-i.z,i.w=-i.w,i}function Er(i,e){console.warn("spin_bone_forward is not tested");const t=te,n=ue,s=i.getBone(e),r=s.bone,o=Ce;r.parent.getWorldQuaternion(o),r.position.copy(t).add(fe.set(0,s.length,0)),t.multiply(scl),t.applyQuaternion(rot),t.x=0,t.normalize(),n.setFromUnitVectors(t,Y),n.multiply(r.quaternion),Qn(n,r.quaternion),i.setBone(s.idx,n)}function Sr(i,e){console.warn("spin_bone_forward is not tested");const t=te,n=ue,s=i.getBone(e),r=s.bone,o=Ce;r.parent.getWorldQuaternion(o),Ea(t,r.quaternion,oe),n.setFromUnitVectors(t,Y),n.multiply(r.quaternion),Qn(n,o),i.setBone(s.idx,n)}function Ea(i,e,t){const n=e.x,s=e.y,r=e.z,o=e.w,a=t.x,l=t.y,c=t.z,p=s*c-r*l,u=r*a-n*c,h=n*l-s*a,f=o*p+s*h-r*u,d=o*u+r*p-n*h,m=o*h+n*u-s*p;return i.x=a+2*f,i.y=l+2*d,i.z=c+2*m,i}function Ir(i,e,t,n){const s=n.invQuaternion;i.sub(n.position).applyQuaternion(s).divide(n.scale),e.premultiply(s),t.divide(n.scale)}class Rr{static ROTATION=1;static POSITION=2;static SCALE=4;entity;skeleton;bones;rootOffset={quaternion:new j,position:new _(0,0,0),scale:new _(1,1,1)};helper;align_leg(e){return Wn(this,vt,e),this}align_arm_left(e){return Wn(this,Hn,e),this}align_arm_right(e){return Wn(this,wr,e),this}align_foot(e){return Er(this,e),Sr(this,e),this}spin_bone_forward(e){return Er(this,e),this}align_bone_forward(e){return Sr(this,e),this}constructor(e,t=!1){this.bones=[];const n=t?$t.clone(e):e;if(this.skeleton=this.get_skeleton(n),!this.skeleton.bones[0])debugger;this.rootOffset=new We;const s={position:new _,quaternion:new j,invQuaternion:new j,scale:new _},r=this.skeleton.bones.find(o=>!(o.parent instanceof Ue));r.parent&&(r.parent.getWorldPosition(s.position),r.parent.getWorldQuaternion(s.quaternion),r.parent.getWorldScale(s.scale),s.invQuaternion.copy(s.quaternion).invert());for(let o=0;o<this.skeleton.bones.length;o++){const a=this.skeleton.bones[o];let l,c;a.parent&&a.parent instanceof Ue&&(l=this.skeleton.bones.indexOf(a.parent),c=a.parent);const p={bone:a,parent:c,chg_state:0,idx:o,p_idx:l,length:.1,name:a.name,local:{position:a.position.clone(),quaternion:a.quaternion.clone(),scale:a.scale.clone()},world:{position:new _,quaternion:new j,invQuaternion:new j,scale:new _}};a.getWorldPosition(p.world.position),a.getWorldQuaternion(p.world.quaternion),a.getWorldScale(p.world.scale),Ir(p.world.position,p.world.quaternion,p.world.scale,s),p.world.invQuaternion.copy(p.world.quaternion).invert(),a.children.length>0&&(p.length=a.children[0].position.length()),this.bones[o]=p}this.skeleton.update()}get_skeleton(e){let t=null;return e.traverse(n=>{if(n instanceof St&&n.skeleton!=null){if(t&&t.bones.length>n.skeleton.bones.length)return;t=n.skeleton}}),t}setOffset(e,t,n){return this.rootOffset.quaternion.copy(e),this.rootOffset.position.copy(t),this.rootOffset.scale.copy(n),this}setBone(e,t,n,s){return t&&this.bones[e].local.quaternion.copy(t),n&&this.bones[e].local.position.copy(n),s&&this.bones[e].local.scale.copy(s),this}getBone(e){return this.bones.find(t=>t.name===e)}apply(){let e,t;for(let n=0;n<this.skeleton.bones.length;n++)e=this.bones[n],t=this.skeleton.bones[n],t.quaternion.copy(e.local.quaternion),t.position.copy(e.local.position),t.scale.copy(e.local.scale);return this.skeleton.update(),this}parentQuaternion=new j;parentScale=new _(1,1,1);parentPosition=new _(0,0,0);childQuaternion=new j;childScale=new _(1,1,1);childPosition=new _(0,0,0);setChildFromParent(e,t){console.log("parent, child",e,t);const n=new _().copy(e.scale).multiply(t.position).applyQuaternion(e.quaternion);return this.childPosition=new _().copy(e.position).add(n),console.log("v is",n),console.log("this.childPosition",this.childPosition),this.childScale=new _().copy(e.scale).multiply(t.scale),this.childQuaternion=new j().copy(e.quaternion).multiply(t.quaternion),this}getParentRotation(e){const t=this.bones[e],n=new j;if(t.p_idx==null)n.identity();else{let s=this.bones[t.p_idx];for(n.copy(s.local.quaternion);s.p_idx!=null;)s=this.bones[s.p_idx],n.premultiply(s.local.quaternion)}return n.premultiply(this.rootOffset.quaternion),n}transformAdd_rev(e,t){e.position.multiply(t.scale).applyQuaternion(t.quaternion).add(t.position),e.scale.multiply(t.scale),e.quaternion.premultiply(t.quaternion)}get_parent_world(e,t=null,n=null,s=null){const r=this.bones[e];if(r.p_idx==null)t.position.set(0,0,0),t.scale.set(0,0,0),t.quaternion.set(0,0,0,0);else{let o=this.bones[r.p_idx];for(t.position.copy(o.local.position),t.scale.copy(o.local.scale),t.quaternion.copy(o.local.quaternion);o.p_idx!=null;)o=this.bones[o.p_idx],this.transformAdd_rev(t,o.local)}return this.transformAdd_rev(t,this.rootOffset),s&&this.transformAdd_rev(t,s),n&&(n.position.copy(t.position),n.scale.copy(t.scale),n.quaternion.copy(t.quaternion),nt(n,r.local)),t}}function Sa(i,e,t=null,n=!1,s=Ae.MIXAMO){return Mr(ca,i,e,t,n,s)}function Ia(i,e,t=null,n=!1,s=Ae.MIXAMO){return Mr(ua,i,e,t,n,s)}function Mr(i,e,t,n=null,s=!1,r=Ae.MIXAMO){const o=t.getObjectByProperty("type","SkinnedMesh");et(e,gr,{ref:o});const a=et(e,i,{tpose:new Rr(t,!0),pose:new Rr(t,!1),chains:null,points:null});switch(r){case Ae.MIXAMO:da(a);break;case Ae.TREX:ma(a);break;default:console.error("Unsupported rig type",r)}if(a.tpose.apply(),!Object.keys(a.chains).length||!Object.keys(a.points).length)debugger;return a}function pe(i,e,t){const n=i.tpose.bones;i.points[e]={index:n.findIndex(s=>s.name.includes(t))}}function _e(i,e,t,n=null,s=null){let r;const o=i.tpose.bones,a=new la;for(r of t){const l=o.findIndex(h=>h.name.includes(r));if(l===-1){console.warn("addChain: Bone [%s] not found in armature",r,o);continue}const c=o[l].bone;let p=0;c.children.length>0&&(p=c.children[0].position.length());const u={index:l,ref:c,length:p};a.chainBones.push(u),a.cnt++,a.length+=p}n&&(a.end_idx=o.findIndex(l=>l.name.toLowerCase().includes(n.toLowerCase()))),a.ikSolver=s??fa,i.chains[e]=a}class Ra{x;y;z;constructor(){this.x=new _().copy(Hn),this.y=new _().copy(oe),this.z=new _().copy(Y)}set(e,t,n,s=!1){return this.x.copy(e),this.y.copy(t),this.z.copy(n),s&&(this.x.normalize(),this.y.normalize(),this.z.normalize()),this}fromDirection(e,t){return this.z.copy(e).normalize(),this.x.copy(t).cross(this.z).normalize(),this.y.copy(this.z).cross(this.x).normalize(),this}rotate(e,t="x",n=null){n=n||this;const s=Math.sin(e),r=Math.cos(e);let o,a,l;switch(t){case"y":o=this.x[0],l=this.x[2],this.x[0]=l*s+o*r,this.x[2]=l*r-o*s,o=this.z[0],l=this.z[2],this.z[0]=l*s+o*r,this.z[2]=l*r-o*s;break;case"x":a=this.y[1],l=this.y[2],this.y[1]=a*r-l*s,this.y[2]=a*s+l*r,a=this.z[1],l=this.z[2],this.z[1]=a*r-l*s,this.z[2]=a*s+l*r;break;case"z":o=this.x[0],a=this.x[1],this.x[0]=o*r-a*s,this.x[1]=o*s+a*r,o=this.y[0],a=this.y[1],this.y[0]=o*r-a*s,this.y[1]=o*s+a*r;break}return n}}const Ma=function(){return{startPosition:new _,endPosition:new _,axis:new Ra,length:0,spineParentQuaternion:new j,spineParentPosition:new _,spineParentScale:new _,spineChildQuaternion:new j,spineChildPosition:new _,spineChildScale:new _,hip:{bind_height:0,movement:new _,dir:new _,twist:0},foot_l:{lookDirection:new _,twistDirection:new _},foot_r:{lookDirection:new _,twistDirection:new _},leg_l:{lengthScale:0,dir:new _,jointDirection:new _},leg_r:{lengthScale:0,dir:new _,jointDirection:new _},arm_l:{lengthScale:0,dir:new _,jointDirection:new _},arm_r:{lengthScale:0,dir:new _,jointDirection:new _},spine:[{lookDirection:new _,twistDirection:new _},{lookDirection:new _,twistDirection:new _}],head:{lookDirection:new _,twistDirection:new _}}},La=xe("IKPoseComponent"),Ka=(i,e,t)=>{const n=he(i,jn);n&&(n.avatarId=e,n.avatarURL=t),Oa(i)},Oa=i=>{if(!Xe)return;const e=he(i,jn)?.avatarURL;e?Te.load({url:e,castShadow:!0,receiveShadow:!0},t=>{console.log(t.scene),Lr(i,$t.clone(t.scene),e)}):Lr(i,$t.clone(Xt.instance._defaultModel))},Ca=i=>{i.layers.disable(mr.Scene),i.layers.enable(mr.Avatar)},Lr=(i,e,t)=>{const n=he(i,jn),s=he(i,fr),r=he(i,tt);let o=e;e.traverse(d=>{d.name?.includes("mixamorig")&&(d.name=d.name.replace("mixamorig","")),d.name?.toLowerCase().includes("hips")&&(o=d)});const a=[];o.traverse(d=>a.push(d.name)),s.mixer.stopAllAction(),n.modelContainer.children.forEach(d=>d.removeFromParent());let l=[];e.traverse(d=>{Ca(d),typeof d.material!="undefined"&&(l.push({id:d.uuid,material:d.material.clone()}),d.material=aa.getDissolveTexture(d))}),e.children.forEach(d=>n.modelContainer.add(d));const c=n.modelContainer.getObjectByProperty("type","SkinnedMesh"),p=c.skeleton.bones.find(d=>d.parent.type!=="Bone");et(i,gr,{ref:c});const u=t?.includes("trex")?Ae.TREX:Ae.MIXAMO;Ia(i,p?.parent,null,!1,u),et(i,La,Ma());const h=$t.clone(Or().parent);Sa(i,h),s.mixer=new us(h);const f=[];h.traverse(d=>{d.name&&d.name.length&&f.push(d.name)}),f.forEach(d=>{a.includes(d)||console.warn(`[Avatar Loader]: Bone '${d}' not found`)}),a.forEach(d=>{f.includes(d)||console.warn(`[Avatar Loader]: Bone '${d}' not supported`)}),r.currentState&&ra.mountCurrentState(i),s.mixer.update(1/60),Pa(i,l)},Pa=async(i,e)=>{const t=Te.getFromCache("/itemLight.png"),n=Te.getFromCache("/itemPlate.png"),s=new It(new ps(.04,3.2),new Be({transparent:!0,map:t,blending:hs,depthWrite:!1,side:ss})),r=new It(new ps(1.6,1.6),new Be({transparent:!1,map:n,blending:hs,depthWrite:!1}));s.geometry.computeBoundingSphere(),r.geometry.computeBoundingSphere(),s.name="light_obj",r.name="plate_obj",t.encoding=Et,t.needsUpdate=!0,n.encoding=Et,n.needsUpdate=!0,et(i,ia,{light:s,plate:r}),et(i,oa,{opacityMultiplier:0,originMaterials:e})};function Or(){const i=[];yr.forEach(s=>{const r=new Ue;r.name=s.name,r.position.fromArray(s.position),r.quaternion.fromArray(s.quaternion),r.scale.fromArray(s.scale),i.push(r)}),yr.forEach((s,r)=>{s.parentIndex!==null&&i[s.parentIndex].add(i[r])});const e=new ke,t=new St,n=new pn(i);return t.bind(n),e.add(t),e.add(i[0]),t}export{jn as A,oa as B,mr as C,ia as D,Ge as E,aa as F,Yi as G,Oa as H,La as I,Pi as J,Ha as L,Ua as N,Gs as T,et as a,ne as b,xe as c,za as d,fr as e,tt as f,he as g,qa as h,Xe as i,ra as j,ka as k,Va as l,Si as m,Na as n,ja as o,Xt as p,Ga as q,sa as r,Ka as s,Te as t,Ve as u,ca as v,ua as w,Wa as x,Qa as y,yr as z};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXZhdGFyRnVuY3Rpb25zLjZkNjZjZjAxLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9lbmdpbmUvc3JjL2NvbW1vbi9mdW5jdGlvbnMvaXNDbGllbnQudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2Vjcy9jbGFzc2VzL0VuZ2luZUV2ZW50cy50cyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9iaXRlY3MvZGlzdC9pbmRleC5tanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2Vjcy9jbGFzc2VzL0VuZ2luZS50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYXNzZXRzL2NsYXNzZXMvR0xURlJlbW92ZU1hdGVyaWFsc0V4dGVuc2lvbi50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYXNzZXRzL2NsYXNzZXMvR0xURkluc3RhbmNpbmdFeHRlbnNpb24udHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2Fzc2V0cy9sb2FkZXJzL2dsdGYvTm9kZURyYWNvTG9hZGVyLmpzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hc3NldHMvbG9hZGVycy9nbHRmL0RSQUNPTG9hZGVyLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nyb3NzLWZldGNoL2Rpc3QvYnJvd3Nlci1wb255ZmlsbC5qcyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYXNzZXRzL2xvYWRlcnMvZ2x0Zi9GaWxlTG9hZGVyLmpzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hc3NldHMvbG9hZGVycy9nbHRmL0dMVEZMb2FkZXIuanMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2Fzc2V0cy9mdW5jdGlvbnMvTG9hZEdMVEYudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2Fzc2V0cy9sb2FkZXJzL3RnYS9UR0FMb2FkZXIudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2Fzc2V0cy9sb2FkZXJzL2ZieC9OVVJCU1V0aWxzLnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hc3NldHMvbG9hZGVycy9mYngvTlVSQlNDdXJ2ZS50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYXNzZXRzL2xvYWRlcnMvZmJ4L2luZmxhdGUubW9kdWxlLm1pbi5qcyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYXNzZXRzL2xvYWRlcnMvZmJ4L0ZCWExvYWRlci50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYXNzZXRzL2VudW0vQXNzZXRUeXBlLnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hc3NldHMvZW51bS9Bc3NldENsYXNzLnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9jb21tb24vZnVuY3Rpb25zL2lzQWJzb2x1dGVQYXRoLnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hc3NldHMvY29uc3RhbnRzL0xvYWRlckNvbnN0YW50cy50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYXNzZXRzL2NsYXNzZXMvQXNzZXRMb2FkZXIudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2Vjcy9mdW5jdGlvbnMvU3lzdGVtSG9va3MudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2Vjcy9mdW5jdGlvbnMvQ29tcG9uZW50RnVuY3Rpb25zLnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hdmF0YXIvQW5pbWF0aW9uTWFuYWdlci50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvYXZhdGFyL2NvbXBvbmVudHMvQW5pbWF0aW9uQ29tcG9uZW50LnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hdmF0YXIvY29tcG9uZW50cy9BdmF0YXJDb21wb25lbnQudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2F2YXRhci9Ta2VsZXRvblV0aWxzLnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hdmF0YXIvY29tcG9uZW50cy9BdmF0YXJBbmltYXRpb25Db21wb25lbnQudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2F2YXRhci9hbmltYXRpb25zL0FuaW1hdGlvblJlbmRlcmVyLnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hdmF0YXIvY29tcG9uZW50cy9BdmF0YXJQZW5kaW5nQ29tcG9uZW50LnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9hdmF0YXIvY29tcG9uZW50cy9BdmF0YXJFZmZlY3RDb21wb25lbnQudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2F2YXRhci9EaXNzb2x2ZUVmZmVjdC50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvY2FtZXJhL2NvbnN0YW50cy9DYW1lcmFMYXllcnMudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2F2YXRhci9EZWZhdWx0U2tlbGV0b25Cb25lcy50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvaWtyaWcvY29tcG9uZW50cy9JS09iai50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvaWtyaWcvY29uc3RhbnRzL1ZlY3RvcjNDb25zdGFudHMudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2lrcmlnL2NsYXNzZXMvQ2hhaW4udHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2lrcmlnL2NvbXBvbmVudHMvSUtSaWdDb21wb25lbnQudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2lrcmlnL2VudW1zL0FybWF0dXJlVHlwZS50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvaWtyaWcvZnVuY3Rpb25zL0lLU29sdmVycy50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvaWtyaWcvZnVuY3Rpb25zL0lLRnVuY3Rpb25zLnRzIiwiLi4vLi4vLi4vZW5naW5lL3NyYy9pa3JpZy9jbGFzc2VzL1Bvc2UudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2lrcmlnL2Z1bmN0aW9ucy9SaWdGdW5jdGlvbnMudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2lrcmlnL2NsYXNzZXMvQXhpcy50cyIsIi4uLy4uLy4uL2VuZ2luZS9zcmMvaWtyaWcvY29tcG9uZW50cy9JS1Bvc2VDb21wb25lbnQudHMiLCIuLi8uLi8uLi9lbmdpbmUvc3JjL2F2YXRhci9mdW5jdGlvbnMvYXZhdGFyRnVuY3Rpb25zLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3lzdGVtIGlzIGNsaWVudCBvciBub3QuICovXG5leHBvcnQgY29uc3QgaXNDbGllbnQgPVxuICB0eXBlb2YgcHJvY2VzcyAhPT0gJ29iamVjdCcgfHwgdHlwZW9mIHByb2Nlc3MudmVyc2lvbnMgIT09ICdvYmplY3QnIHx8IHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zLm5vZGUgPT09ICd1bmRlZmluZWQnXG4iLCIvKipcbiAqXG4gKiBAYXV0aG9yIEpvc2ggRmllbGQgPGdpdGh1Yi5jb20vSGV4YUZpZWxkPlxuICovXG5cbmNvbnN0IEVWRU5UUyA9IHtcbiAgLy8gVE9ETzogYWRkIGRvYyBmb3JtYXR0aW5nIHRvIHRoZXNlXG5cbiAgLy8gSU5JVEFMSVpBVElPTlxuICBSRVNFVF9FTkdJTkU6ICdDT1JFX1JFU0VUX0VOR0lORScsXG4gIElOSVRJQUxJWkVEX0VOR0lORTogJ0NPUkVfSU5JVElBTElaRURfRU5HSU5FJywgLy8geyB9XG4gIENPTk5FQ1RfVE9fV09STEQ6ICdDT1JFX0NPTk5FQ1RfVE9fV09STEQnLCAvLyB7IH1cbiAgQ09OTkVDVF9UT19XT1JMRF9USU1FT1VUOiAnQ09SRV9DT05ORUNUX1RPX1dPUkxEX1RJTUVPVVQnLCAvLyB7IH1cbiAgSk9JTkVEX1dPUkxEOiAnQ09SRV9KT0lORURfV09STEQnLCAvLyB7IH1cbiAgTEVBVkVfV09STEQ6ICdDT1JFX0xFQVZFX1dPUkxEJywgLy8geyB9XG4gIFNDRU5FX0xPQURFRDogJ0NPUkVfU0NFTkVfTE9BREVEJywgLy8geyB9XG5cbiAgLy8gU3RhcnQgb3Igc3RvcCBjbGllbnQgc2lkZSBwaHlzaWNzICYgcmVuZGVyaW5nXG4gIEVOQUJMRV9TQ0VORTogJ0NPUkVfRU5BQkxFX1NDRU5FJywgLy8geyByZW5kZXJlcjogYm9vbGVhbiwgcGh5c2ljczogYm9vbGVhbiB9XG5cbiAgLy8gTUlTQ1xuICBVU0VSX0VOR0FHRTogJ0NPUkVfVVNFUl9FTkdBR0UnLCAvLyB7IH1cbiAgV0lORE9XX0ZPQ1VTOiAnQ09SRV9XSU5ET1dfRk9DVVMnLCAvLyAgeyBmb2N1c2VkOiBib29sZWFuIH1cbiAgRU5USVRZX0RFQlVHX0RBVEE6ICdDT1JFX0VOVElUWV9ERUJVR19EQVRBJywgLy8gVE9ETzogdG8gcGlwZSBvZmZzY3JlZW4gZW50aXR5IGRhdGEgdG8gVUlcblxuICBPQkpFQ1RfSE9WRVI6ICdJTlRFUkFDVElWRV9TWVNURU1fT0JKRUNUX0hPVkVSJyxcbiAgT0JKRUNUX0FDVElWQVRJT046ICdJTlRFUkFDVElWRV9TWVNURU1fT0JKRUNUX0FDVElWQVRJT04nLFxuXG4gIFBPUlRBTF9SRURJUkVDVF9FVkVOVDogJ1BIWVNJQ1NfU1lTVEVNX1BPUlRBTF9SRURJUkVDVCcsXG5cbiAgWFJfU1RBUlQ6ICdXRUJYUl9SRU5ERVJFUl9TWVNURU1fWFJfU1RBUlQnLFxuICBYUl9TRVNTSU9OOiAnV0VCWFJfUkVOREVSRVJfU1lTVEVNX1hSX1NFU1NJT04nLFxuICBYUl9FTkQ6ICdXRUJYUl9SRU5ERVJFUl9TWVNURU1fWFJfRU5EJyxcblxuICBDT05ORUNUOiAnTkVUV09SS19DT05ORUNUJyxcbiAgQ09OTkVDVElPTl9MT1NUOiAnQ09SRV9DT05ORUNUSU9OX0xPU1QnLFxuXG4gIEFWQVRBUl9ERUJVRzogJ0NPUkVfQVZBVEFSX0RFQlVHJyxcbiAgUEhZU0lDU19ERUJVRzogJ0NPUkVfUEhZU0lDU19ERUJVRycsXG5cbiAgU1RBUlRfU1VTUEVOREVEX0NPTlRFWFRTOiAnUE9TSVRJT05BTF9BVURJT19TVEFSVF9TVVNQRU5ERURfQ09OVEVYVFMnLFxuICBTVVNQRU5EX1BPU0lUSU9OQUxfQVVESU86ICdQT1NJVElPTkFMX0FVRElPX1NVU1BFTkRfUE9TSVRJT05BTF9BVURJTycsXG5cbiAgQlJPV1NFUl9OT1RfU1VQUE9SVEVEOiAnQlJPV1NFUl9OT1RfU1VQUE9SVEVEJ1xufVxuXG4vKipcbiAqXG4gKiBAYXV0aG9yIEpvc2ggRmllbGQgPGdpdGh1Yi5jb20vSGV4YUZpZWxkPlxuICovXG5leHBvcnQgY2xhc3MgRW5naW5lRXZlbnRzIHtcbiAgcHVibGljIHN0YXRpYyBpbnN0YW5jZTogRW5naW5lRXZlbnRzID0gbmV3IEVuZ2luZUV2ZW50cygpXG4gIHN0YXRpYyBFVkVOVFMgPSBFVkVOVFNcbiAgX2xpc3RlbmVycyA9IHt9XG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICBPYmplY3Qua2V5cyhFbmdpbmVFdmVudHMuaW5zdGFuY2UuX2xpc3RlbmVycykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBkZWxldGUgRW5naW5lRXZlbnRzLmluc3RhbmNlLl9saXN0ZW5lcnNba2V5XVxuICAgIH0pXG4gIH1cbiAgb25jZShldmVudE5hbWU6IHN0cmluZyB8IG51bWJlciwgbGlzdGVuZXI6IEZ1bmN0aW9uLCAuLi5hcmdzOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBvbkV2ZW50ID0gKGV2KSA9PiB7XG4gICAgICBFbmdpbmVFdmVudHMuaW5zdGFuY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIG9uRXZlbnQpXG4gICAgICBsaXN0ZW5lcihldilcbiAgICB9XG4gICAgRW5naW5lRXZlbnRzLmluc3RhbmNlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBvbkV2ZW50KVxuICB9XG4gIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lOiBzdHJpbmcgfCBudW1iZXIsIGxpc3RlbmVyOiBGdW5jdGlvbiwgLi4uYXJnczogYW55KTogdm9pZCB7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gRW5naW5lRXZlbnRzLmluc3RhbmNlLl9saXN0ZW5lcnNcbiAgICBpZiAobGlzdGVuZXJzW2V2ZW50TmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgbGlzdGVuZXJzW2V2ZW50TmFtZV0gPSBbXVxuICAgIH1cblxuICAgIGlmIChsaXN0ZW5lcnNbZXZlbnROYW1lXS5pbmRleE9mKGxpc3RlbmVyKSA9PT0gLTEpIHtcbiAgICAgIGxpc3RlbmVyc1tldmVudE5hbWVdLnB1c2gobGlzdGVuZXIpXG4gICAgfVxuICB9XG4gIGhhc0V2ZW50TGlzdGVuZXIoZXZlbnROYW1lOiBzdHJpbmcgfCBudW1iZXIsIGxpc3RlbmVyOiBGdW5jdGlvbiwgLi4uYXJnczogYW55KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIEVuZ2luZUV2ZW50cy5pbnN0YW5jZS5fbGlzdGVuZXJzW2V2ZW50TmFtZV0gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgRW5naW5lRXZlbnRzLmluc3RhbmNlLl9saXN0ZW5lcnNbZXZlbnROYW1lXS5pbmRleE9mKGxpc3RlbmVyKSAhPT0gLTFcbiAgICApXG4gIH1cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWU6IHN0cmluZyB8IG51bWJlciwgbGlzdGVuZXI6IEZ1bmN0aW9uLCAuLi5hcmdzOiBhbnkpOiB2b2lkIHtcbiAgICBjb25zdCBsaXN0ZW5lckFycmF5ID0gRW5naW5lRXZlbnRzLmluc3RhbmNlLl9saXN0ZW5lcnNbZXZlbnROYW1lXVxuICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJBcnJheS5pbmRleE9mKGxpc3RlbmVyKVxuICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICBsaXN0ZW5lckFycmF5LnNwbGljZShpbmRleCwgMSlcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmVtb3ZlQWxsTGlzdGVuZXJzRm9yRXZlbnQoZXZlbnROYW1lOiBzdHJpbmcsIGRlbGV0ZUV2ZW50PzogYm9vbGVhbiwgLi4uYXJnczogYW55KSB7XG4gICAgaWYgKGRlbGV0ZUV2ZW50KSB7XG4gICAgICBkZWxldGUgRW5naW5lRXZlbnRzLmluc3RhbmNlLl9saXN0ZW5lcnNbZXZlbnROYW1lXVxuICAgIH0gZWxzZSB7XG4gICAgICBFbmdpbmVFdmVudHMuaW5zdGFuY2UuX2xpc3RlbmVyc1tldmVudE5hbWVdID0gW11cbiAgICB9XG4gIH1cbiAgZGlzcGF0Y2hFdmVudChldmVudDogeyB0eXBlOiBzdHJpbmc7IFthdHRhY2htZW50OiBzdHJpbmddOiBhbnkgfSwgLi4uYXJnczogYW55KTogdm9pZCB7XG4gICAgY29uc3QgbGlzdGVuZXJBcnJheSA9IEVuZ2luZUV2ZW50cy5pbnN0YW5jZS5fbGlzdGVuZXJzW2V2ZW50LnR5cGVdXG4gICAgaWYgKGxpc3RlbmVyQXJyYXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgYXJyYXkgPSBsaXN0ZW5lckFycmF5LnNsaWNlKDApXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFycmF5W2ldLmNhbGwoRW5naW5lRXZlbnRzLmluc3RhbmNlLCBldmVudCwgLi4uYXJncylcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8vIHNyYy9Db25zdGFudHMuanNcbnZhciBUWVBFU19FTlVNID0ge1xuICBpODogXCJpOFwiLFxuICB1aTg6IFwidWk4XCIsXG4gIHVpOGM6IFwidWk4Y1wiLFxuICBpMTY6IFwiaTE2XCIsXG4gIHVpMTY6IFwidWkxNlwiLFxuICBpMzI6IFwiaTMyXCIsXG4gIHVpMzI6IFwidWkzMlwiLFxuICBmMzI6IFwiZjMyXCIsXG4gIGY2NDogXCJmNjRcIixcbiAgZWlkOiBcImVpZFwiXG59O1xudmFyIFRZUEVTX05BTUVTID0ge1xuICBpODogXCJJbnQ4XCIsXG4gIHVpODogXCJVaW50OFwiLFxuICB1aThjOiBcIlVpbnQ4Q2xhbXBlZFwiLFxuICBpMTY6IFwiSW50MTZcIixcbiAgdWkxNjogXCJVaW50MTZcIixcbiAgaTMyOiBcIkludDMyXCIsXG4gIHVpMzI6IFwiVWludDMyXCIsXG4gIGVpZDogXCJVaW50MzJcIixcbiAgZjMyOiBcIkZsb2F0MzJcIixcbiAgZjY0OiBcIkZsb2F0NjRcIlxufTtcbnZhciBUWVBFUyA9IHtcbiAgaTg6IEludDhBcnJheSxcbiAgdWk4OiBVaW50OEFycmF5LFxuICB1aThjOiBVaW50OENsYW1wZWRBcnJheSxcbiAgaTE2OiBJbnQxNkFycmF5LFxuICB1aTE2OiBVaW50MTZBcnJheSxcbiAgaTMyOiBJbnQzMkFycmF5LFxuICB1aTMyOiBVaW50MzJBcnJheSxcbiAgZjMyOiBGbG9hdDMyQXJyYXksXG4gIGY2NDogRmxvYXQ2NEFycmF5LFxuICBlaWQ6IFVpbnQzMkFycmF5XG59O1xudmFyIFVOU0lHTkVEX01BWCA9IHtcbiAgdWludDg6IDIgKiogOCxcbiAgdWludDE2OiAyICoqIDE2LFxuICB1aW50MzI6IDIgKiogMzJcbn07XG5cbi8vIHNyYy9TdG9yYWdlLmpzXG52YXIgcm91bmRUb011bHRpcGxlID0gKG11bCkgPT4gKHgpID0+IE1hdGguY2VpbCh4IC8gbXVsKSAqIG11bDtcbnZhciByb3VuZFRvTXVsdGlwbGU0ID0gcm91bmRUb011bHRpcGxlKDQpO1xudmFyICRzdG9yZVJlZiA9IFN5bWJvbChcInN0b3JlUmVmXCIpO1xudmFyICRzdG9yZVNpemUgPSBTeW1ib2woXCJzdG9yZVNpemVcIik7XG52YXIgJHN0b3JlTWFwcyA9IFN5bWJvbChcInN0b3JlTWFwc1wiKTtcbnZhciAkc3RvcmVGbGF0dGVuZWQgPSBTeW1ib2woXCJzdG9yZUZsYXR0ZW5lZFwiKTtcbnZhciAkc3RvcmVCYXNlID0gU3ltYm9sKFwic3RvcmVCYXNlXCIpO1xudmFyICRzdG9yZVR5cGUgPSBTeW1ib2woXCJzdG9yZVR5cGVcIik7XG52YXIgJHN0b3JlQXJyYXlDb3VudHMgPSBTeW1ib2woXCJzdG9yZUFycmF5Q291bnRcIik7XG52YXIgJHN0b3JlU3ViYXJyYXlzID0gU3ltYm9sKFwic3RvcmVTdWJhcnJheXNcIik7XG52YXIgJHN1YmFycmF5Q3Vyc29ycyA9IFN5bWJvbChcInN1YmFycmF5Q3Vyc29yc1wiKTtcbnZhciAkc3ViYXJyYXkgPSBTeW1ib2woXCJzdWJhcnJheVwiKTtcbnZhciAkc3ViYXJyYXlGcm9tID0gU3ltYm9sKFwic3ViYXJyYXlGcm9tXCIpO1xudmFyICRzdWJhcnJheVRvID0gU3ltYm9sKFwic3ViYXJyYXlUb1wiKTtcbnZhciAkcGFyZW50QXJyYXkgPSBTeW1ib2woXCJzdWJTdG9yZVwiKTtcbnZhciAkdGFnU3RvcmUgPSBTeW1ib2woXCJ0YWdTdG9yZVwiKTtcbnZhciAkcXVlcnlTaGFkb3cgPSBTeW1ib2woXCJxdWVyeVNoYWRvd1wiKTtcbnZhciAkc2VyaWFsaXplU2hhZG93ID0gU3ltYm9sKFwic2VyaWFsaXplU2hhZG93XCIpO1xudmFyICRpbmRleFR5cGUgPSBTeW1ib2woXCJpbmRleFR5cGVcIik7XG52YXIgJGluZGV4Qnl0ZXMgPSBTeW1ib2woXCJpbmRleEJ5dGVzXCIpO1xudmFyICRpc0VpZFR5cGUgPSBTeW1ib2woXCJpc0VpZFR5cGVcIik7XG52YXIgc3RvcmVzID0ge307XG52YXIgcmVzaXplID0gKHRhLCBzaXplKSA9PiB7XG4gIGNvbnN0IG5ld0J1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihzaXplICogdGEuQllURVNfUEVSX0VMRU1FTlQpO1xuICBjb25zdCBuZXdUYSA9IG5ldyB0YS5jb25zdHJ1Y3RvcihuZXdCdWZmZXIpO1xuICBuZXdUYS5zZXQodGEsIDApO1xuICByZXR1cm4gbmV3VGE7XG59O1xudmFyIGNyZWF0ZVNoYWRvdyA9IChzdG9yZSwga2V5KSA9PiB7XG4gIGlmICghQXJyYXlCdWZmZXIuaXNWaWV3KHN0b3JlKSkge1xuICAgIGNvbnN0IHNoYWRvd1N0b3JlID0gc3RvcmVbJHBhcmVudEFycmF5XS5zbGljZSgwKTtcbiAgICBzdG9yZVtrZXldID0gc3RvcmUubWFwKChfLCBlaWQpID0+IHtcbiAgICAgIGNvbnN0IGZyb20gPSBzdG9yZVtlaWRdWyRzdWJhcnJheUZyb21dO1xuICAgICAgY29uc3QgdG8gPSBzdG9yZVtlaWRdWyRzdWJhcnJheVRvXTtcbiAgICAgIHJldHVybiBzaGFkb3dTdG9yZS5zdWJhcnJheShmcm9tLCB0byk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgc3RvcmVba2V5XSA9IHN0b3JlLnNsaWNlKDApO1xuICB9XG59O1xudmFyIHJlc2l6ZVN1YmFycmF5ID0gKG1ldGFkYXRhLCBzdG9yZSwgc2l6ZSkgPT4ge1xuICBjb25zdCBjdXJzb3JzID0gbWV0YWRhdGFbJHN1YmFycmF5Q3Vyc29yc107XG4gIGxldCB0eXBlID0gc3RvcmVbJHN0b3JlVHlwZV07XG4gIGNvbnN0IGxlbmd0aCA9IHN0b3JlWzBdLmxlbmd0aDtcbiAgY29uc3QgaW5kZXhUeXBlID0gbGVuZ3RoIDw9IFVOU0lHTkVEX01BWC51aW50OCA/IFRZUEVTX0VOVU0udWk4IDogbGVuZ3RoIDw9IFVOU0lHTkVEX01BWC51aW50MTYgPyBUWVBFU19FTlVNLnVpMTYgOiBUWVBFU19FTlVNLnVpMzI7XG4gIGlmIChjdXJzb3JzW3R5cGVdID09PSAwKSB7XG4gICAgY29uc3QgYXJyYXlDb3VudCA9IG1ldGFkYXRhWyRzdG9yZUFycmF5Q291bnRzXVt0eXBlXTtcbiAgICBjb25zdCBzdW1tZWRMZW5ndGggPSBBcnJheShhcnJheUNvdW50KS5maWxsKDApLnJlZHVjZSgoYSwgcCkgPT4gYSArIGxlbmd0aCwgMCk7XG4gICAgY29uc3QgYXJyYXkgPSBuZXcgVFlQRVNbdHlwZV0ocm91bmRUb011bHRpcGxlNChzdW1tZWRMZW5ndGggKiBzaXplKSk7XG4gICAgYXJyYXkuc2V0KG1ldGFkYXRhWyRzdG9yZVN1YmFycmF5c11bdHlwZV0pO1xuICAgIG1ldGFkYXRhWyRzdG9yZVN1YmFycmF5c11bdHlwZV0gPSBhcnJheTtcbiAgICBhcnJheVskaW5kZXhUeXBlXSA9IFRZUEVTX05BTUVTW2luZGV4VHlwZV07XG4gICAgYXJyYXlbJGluZGV4Qnl0ZXNdID0gVFlQRVNbaW5kZXhUeXBlXS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgfVxuICBjb25zdCBzdGFydCA9IGN1cnNvcnNbdHlwZV07XG4gIGxldCBlbmQgPSAwO1xuICBmb3IgKGxldCBlaWQgPSAwOyBlaWQgPCBzaXplOyBlaWQrKykge1xuICAgIGNvbnN0IGZyb20gPSBjdXJzb3JzW3R5cGVdICsgZWlkICogbGVuZ3RoO1xuICAgIGNvbnN0IHRvID0gZnJvbSArIGxlbmd0aDtcbiAgICBzdG9yZVtlaWRdID0gbWV0YWRhdGFbJHN0b3JlU3ViYXJyYXlzXVt0eXBlXS5zdWJhcnJheShmcm9tLCB0byk7XG4gICAgc3RvcmVbZWlkXVskc3ViYXJyYXlGcm9tXSA9IGZyb207XG4gICAgc3RvcmVbZWlkXVskc3ViYXJyYXlUb10gPSB0bztcbiAgICBzdG9yZVtlaWRdWyRzdWJhcnJheV0gPSB0cnVlO1xuICAgIHN0b3JlW2VpZF1bJGluZGV4VHlwZV0gPSBUWVBFU19OQU1FU1tpbmRleFR5cGVdO1xuICAgIHN0b3JlW2VpZF1bJGluZGV4Qnl0ZXNdID0gVFlQRVNbaW5kZXhUeXBlXS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgICBlbmQgPSB0bztcbiAgfVxuICBjdXJzb3JzW3R5cGVdID0gZW5kO1xuICBzdG9yZVskcGFyZW50QXJyYXldID0gbWV0YWRhdGFbJHN0b3JlU3ViYXJyYXlzXVt0eXBlXS5zdWJhcnJheShzdGFydCwgZW5kKTtcbn07XG52YXIgcmVzaXplUmVjdXJzaXZlID0gKG1ldGFkYXRhLCBzdG9yZSwgc2l6ZSkgPT4ge1xuICBPYmplY3Qua2V5cyhzdG9yZSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgY29uc3QgdGEgPSBzdG9yZVtrZXldO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHRhKSkge1xuICAgICAgcmVzaXplU3ViYXJyYXkobWV0YWRhdGEsIHRhLCBzaXplKTtcbiAgICAgIHN0b3JlWyRzdG9yZUZsYXR0ZW5lZF0ucHVzaCh0YSk7XG4gICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcodGEpKSB7XG4gICAgICBzdG9yZVtrZXldID0gcmVzaXplKHRhLCBzaXplKTtcbiAgICAgIHN0b3JlWyRzdG9yZUZsYXR0ZW5lZF0ucHVzaChzdG9yZVtrZXldKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0YSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgcmVzaXplUmVjdXJzaXZlKG1ldGFkYXRhLCBzdG9yZVtrZXldLCBzaXplKTtcbiAgICB9XG4gIH0pO1xufTtcbnZhciByZXNpemVTdG9yZSA9IChzdG9yZSwgc2l6ZSkgPT4ge1xuICBpZiAoc3RvcmVbJHRhZ1N0b3JlXSlcbiAgICByZXR1cm47XG4gIHN0b3JlWyRzdG9yZVNpemVdID0gc2l6ZTtcbiAgc3RvcmVbJHN0b3JlRmxhdHRlbmVkXS5sZW5ndGggPSAwO1xuICBPYmplY3Qua2V5cyhzdG9yZVskc3ViYXJyYXlDdXJzb3JzXSkuZm9yRWFjaCgoaykgPT4ge1xuICAgIHN0b3JlWyRzdWJhcnJheUN1cnNvcnNdW2tdID0gMDtcbiAgfSk7XG4gIHJlc2l6ZVJlY3Vyc2l2ZShzdG9yZSwgc3RvcmUsIHNpemUpO1xufTtcbnZhciByZXNldFN0b3JlRm9yID0gKHN0b3JlLCBlaWQpID0+IHtcbiAgaWYgKHN0b3JlWyRzdG9yZUZsYXR0ZW5lZF0pIHtcbiAgICBzdG9yZVskc3RvcmVGbGF0dGVuZWRdLmZvckVhY2goKHRhKSA9PiB7XG4gICAgICBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KHRhKSlcbiAgICAgICAgdGFbZWlkXSA9IDA7XG4gICAgICBlbHNlXG4gICAgICAgIHRhW2VpZF0uZmlsbCgwKTtcbiAgICB9KTtcbiAgfVxufTtcbnZhciBjcmVhdGVUeXBlU3RvcmUgPSAodHlwZSwgbGVuZ3RoKSA9PiB7XG4gIGNvbnN0IHRvdGFsQnl0ZXMgPSBsZW5ndGggKiBUWVBFU1t0eXBlXS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgY29uc3QgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKHRvdGFsQnl0ZXMpO1xuICBjb25zdCBzdG9yZSA9IG5ldyBUWVBFU1t0eXBlXShidWZmZXIpO1xuICBzdG9yZVskaXNFaWRUeXBlXSA9IHR5cGUgPT09IFRZUEVTX0VOVU0uZWlkO1xuICByZXR1cm4gc3RvcmU7XG59O1xudmFyIHBhcmVudEFycmF5ID0gKHN0b3JlKSA9PiBzdG9yZVskcGFyZW50QXJyYXldO1xudmFyIGNyZWF0ZUFycmF5U3RvcmUgPSAobWV0YWRhdGEsIHR5cGUsIGxlbmd0aCkgPT4ge1xuICBjb25zdCBzaXplID0gbWV0YWRhdGFbJHN0b3JlU2l6ZV07XG4gIGNvbnN0IHN0b3JlID0gQXJyYXkoc2l6ZSkuZmlsbCgwKTtcbiAgc3RvcmVbJHN0b3JlVHlwZV0gPSB0eXBlO1xuICBzdG9yZVskaXNFaWRUeXBlXSA9IHR5cGUgPT09IFRZUEVTX0VOVU0uZWlkO1xuICBjb25zdCBjdXJzb3JzID0gbWV0YWRhdGFbJHN1YmFycmF5Q3Vyc29yc107XG4gIGNvbnN0IGluZGV4VHlwZSA9IGxlbmd0aCA8PSBVTlNJR05FRF9NQVgudWludDggPyBUWVBFU19FTlVNLnVpOCA6IGxlbmd0aCA8PSBVTlNJR05FRF9NQVgudWludDE2ID8gVFlQRVNfRU5VTS51aTE2IDogVFlQRVNfRU5VTS51aTMyO1xuICBpZiAoIWxlbmd0aClcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJiaXRFQ1MgLSBNdXN0IGRlZmluZSBjb21wb25lbnQgYXJyYXkgbGVuZ3RoXCIpO1xuICBpZiAoIVRZUEVTW3R5cGVdKVxuICAgIHRocm93IG5ldyBFcnJvcihgYml0RUNTIC0gSW52YWxpZCBjb21wb25lbnQgYXJyYXkgcHJvcGVydHkgdHlwZSAke3R5cGV9YCk7XG4gIGlmICghbWV0YWRhdGFbJHN0b3JlU3ViYXJyYXlzXVt0eXBlXSkge1xuICAgIGNvbnN0IGFycmF5Q291bnQgPSBtZXRhZGF0YVskc3RvcmVBcnJheUNvdW50c11bdHlwZV07XG4gICAgY29uc3Qgc3VtbWVkTGVuZ3RoID0gQXJyYXkoYXJyYXlDb3VudCkuZmlsbCgwKS5yZWR1Y2UoKGEsIHApID0+IGEgKyBsZW5ndGgsIDApO1xuICAgIGNvbnN0IGFycmF5ID0gbmV3IFRZUEVTW3R5cGVdKHJvdW5kVG9NdWx0aXBsZTQoc3VtbWVkTGVuZ3RoICogc2l6ZSkpO1xuICAgIG1ldGFkYXRhWyRzdG9yZVN1YmFycmF5c11bdHlwZV0gPSBhcnJheTtcbiAgICBhcnJheVskaW5kZXhUeXBlXSA9IFRZUEVTX05BTUVTW2luZGV4VHlwZV07XG4gICAgYXJyYXlbJGluZGV4Qnl0ZXNdID0gVFlQRVNbaW5kZXhUeXBlXS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgfVxuICBjb25zdCBzdGFydCA9IGN1cnNvcnNbdHlwZV07XG4gIGxldCBlbmQgPSAwO1xuICBmb3IgKGxldCBlaWQgPSAwOyBlaWQgPCBzaXplOyBlaWQrKykge1xuICAgIGNvbnN0IGZyb20gPSBjdXJzb3JzW3R5cGVdICsgZWlkICogbGVuZ3RoO1xuICAgIGNvbnN0IHRvID0gZnJvbSArIGxlbmd0aDtcbiAgICBzdG9yZVtlaWRdID0gbWV0YWRhdGFbJHN0b3JlU3ViYXJyYXlzXVt0eXBlXS5zdWJhcnJheShmcm9tLCB0byk7XG4gICAgc3RvcmVbZWlkXVskc3ViYXJyYXlGcm9tXSA9IGZyb207XG4gICAgc3RvcmVbZWlkXVskc3ViYXJyYXlUb10gPSB0bztcbiAgICBzdG9yZVtlaWRdWyRzdWJhcnJheV0gPSB0cnVlO1xuICAgIHN0b3JlW2VpZF1bJGluZGV4VHlwZV0gPSBUWVBFU19OQU1FU1tpbmRleFR5cGVdO1xuICAgIHN0b3JlW2VpZF1bJGluZGV4Qnl0ZXNdID0gVFlQRVNbaW5kZXhUeXBlXS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgICBlbmQgPSB0bztcbiAgfVxuICBjdXJzb3JzW3R5cGVdID0gZW5kO1xuICBzdG9yZVskcGFyZW50QXJyYXldID0gbWV0YWRhdGFbJHN0b3JlU3ViYXJyYXlzXVt0eXBlXS5zdWJhcnJheShzdGFydCwgZW5kKTtcbiAgcmV0dXJuIHN0b3JlO1xufTtcbnZhciBpc0FycmF5VHlwZSA9ICh4KSA9PiBBcnJheS5pc0FycmF5KHgpICYmIHR5cGVvZiB4WzBdID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiB4WzFdID09PSBcIm51bWJlclwiO1xudmFyIGNyZWF0ZVN0b3JlID0gKHNjaGVtYSwgc2l6ZSkgPT4ge1xuICBjb25zdCAkc3RvcmUgPSBTeW1ib2woXCJzdG9yZVwiKTtcbiAgaWYgKCFzY2hlbWEgfHwgIU9iamVjdC5rZXlzKHNjaGVtYSkubGVuZ3RoKSB7XG4gICAgc3RvcmVzWyRzdG9yZV0gPSB7XG4gICAgICBbJHN0b3JlU2l6ZV06IHNpemUsXG4gICAgICBbJHRhZ1N0b3JlXTogdHJ1ZSxcbiAgICAgIFskc3RvcmVCYXNlXTogKCkgPT4gc3RvcmVzWyRzdG9yZV1cbiAgICB9O1xuICAgIHJldHVybiBzdG9yZXNbJHN0b3JlXTtcbiAgfVxuICBzY2hlbWEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHNjaGVtYSkpO1xuICBjb25zdCBhcnJheUNvdW50cyA9IHt9O1xuICBjb25zdCBjb2xsZWN0QXJyYXlDb3VudHMgPSAocykgPT4ge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhzKTtcbiAgICBmb3IgKGNvbnN0IGsgb2Yga2V5cykge1xuICAgICAgaWYgKGlzQXJyYXlUeXBlKHNba10pKSB7XG4gICAgICAgIGlmICghYXJyYXlDb3VudHNbc1trXVswXV0pXG4gICAgICAgICAgYXJyYXlDb3VudHNbc1trXVswXV0gPSAwO1xuICAgICAgICBhcnJheUNvdW50c1tzW2tdWzBdXSsrO1xuICAgICAgfSBlbHNlIGlmIChzW2tdIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgIGNvbGxlY3RBcnJheUNvdW50cyhzW2tdKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGNvbGxlY3RBcnJheUNvdW50cyhzY2hlbWEpO1xuICBjb25zdCBtZXRhZGF0YSA9IHtcbiAgICBbJHN0b3JlU2l6ZV06IHNpemUsXG4gICAgWyRzdG9yZU1hcHNdOiB7fSxcbiAgICBbJHN0b3JlU3ViYXJyYXlzXToge30sXG4gICAgWyRzdG9yZVJlZl06ICRzdG9yZSxcbiAgICBbJHN1YmFycmF5Q3Vyc29yc106IE9iamVjdC5rZXlzKFRZUEVTKS5yZWR1Y2UoKGEsIHR5cGUpID0+ICh7IC4uLmEsIFt0eXBlXTogMCB9KSwge30pLFxuICAgIFskc3RvcmVGbGF0dGVuZWRdOiBbXSxcbiAgICBbJHN0b3JlQXJyYXlDb3VudHNdOiBhcnJheUNvdW50c1xuICB9O1xuICBpZiAoc2NoZW1hIGluc3RhbmNlb2YgT2JqZWN0ICYmIE9iamVjdC5rZXlzKHNjaGVtYSkubGVuZ3RoKSB7XG4gICAgY29uc3QgcmVjdXJzaXZlVHJhbnNmb3JtID0gKGEsIGspID0+IHtcbiAgICAgIGlmICh0eXBlb2YgYVtrXSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBhW2tdID0gY3JlYXRlVHlwZVN0b3JlKGFba10sIHNpemUpO1xuICAgICAgICBhW2tdWyRzdG9yZUJhc2VdID0gKCkgPT4gc3RvcmVzWyRzdG9yZV07XG4gICAgICAgIG1ldGFkYXRhWyRzdG9yZUZsYXR0ZW5lZF0ucHVzaChhW2tdKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNBcnJheVR5cGUoYVtrXSkpIHtcbiAgICAgICAgY29uc3QgW3R5cGUsIGxlbmd0aF0gPSBhW2tdO1xuICAgICAgICBhW2tdID0gY3JlYXRlQXJyYXlTdG9yZShtZXRhZGF0YSwgdHlwZSwgbGVuZ3RoKTtcbiAgICAgICAgYVtrXVskc3RvcmVCYXNlXSA9ICgpID0+IHN0b3Jlc1skc3RvcmVdO1xuICAgICAgICBtZXRhZGF0YVskc3RvcmVGbGF0dGVuZWRdLnB1c2goYVtrXSk7XG4gICAgICB9IGVsc2UgaWYgKGFba10gaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgMC4xMjtcbiAgICAgICAgYVtrXSA9IE9iamVjdC5rZXlzKGFba10pLnJlZHVjZShyZWN1cnNpdmVUcmFuc2Zvcm0sIGFba10pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGE7XG4gICAgfTtcbiAgICBzdG9yZXNbJHN0b3JlXSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmtleXMoc2NoZW1hKS5yZWR1Y2UocmVjdXJzaXZlVHJhbnNmb3JtLCBzY2hlbWEpLCBtZXRhZGF0YSk7XG4gICAgc3RvcmVzWyRzdG9yZV1bJHN0b3JlQmFzZV0gPSAoKSA9PiBzdG9yZXNbJHN0b3JlXTtcbiAgICByZXR1cm4gc3RvcmVzWyRzdG9yZV07XG4gIH1cbn07XG5cbi8vIHNyYy9VdGlsLmpzXG52YXIgU3BhcnNlU2V0ID0gKCkgPT4ge1xuICBjb25zdCBkZW5zZSA9IFtdO1xuICBjb25zdCBzcGFyc2UgPSBbXTtcbiAgZGVuc2Uuc29ydCA9IGZ1bmN0aW9uKGNvbXBhcmF0b3IpIHtcbiAgICBjb25zdCByZXN1bHQgPSBBcnJheS5wcm90b3R5cGUuc29ydC5jYWxsKHRoaXMsIGNvbXBhcmF0b3IpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVuc2UubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNwYXJzZVtkZW5zZVtpXV0gPSBpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBjb25zdCBoYXMgPSAodmFsKSA9PiBkZW5zZVtzcGFyc2VbdmFsXV0gPT09IHZhbDtcbiAgY29uc3QgYWRkID0gKHZhbCkgPT4ge1xuICAgIGlmIChoYXModmFsKSlcbiAgICAgIHJldHVybjtcbiAgICBzcGFyc2VbdmFsXSA9IGRlbnNlLnB1c2godmFsKSAtIDE7XG4gIH07XG4gIGNvbnN0IHJlbW92ZSA9ICh2YWwpID0+IHtcbiAgICBpZiAoIWhhcyh2YWwpKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGluZGV4ID0gc3BhcnNlW3ZhbF07XG4gICAgY29uc3Qgc3dhcHBlZCA9IGRlbnNlLnBvcCgpO1xuICAgIGlmIChzd2FwcGVkICE9PSB2YWwpIHtcbiAgICAgIGRlbnNlW2luZGV4XSA9IHN3YXBwZWQ7XG4gICAgICBzcGFyc2Vbc3dhcHBlZF0gPSBpbmRleDtcbiAgICB9XG4gIH07XG4gIHJldHVybiB7XG4gICAgYWRkLFxuICAgIHJlbW92ZSxcbiAgICBoYXMsXG4gICAgc3BhcnNlLFxuICAgIGRlbnNlXG4gIH07XG59O1xuXG4vLyBzcmMvU2VyaWFsaXplLmpzXG52YXIgREVTRVJJQUxJWkVfTU9ERSA9IHtcbiAgUkVQTEFDRTogMCxcbiAgQVBQRU5EOiAxLFxuICBNQVA6IDJcbn07XG52YXIgcmVzaXplZCA9IGZhbHNlO1xudmFyIHNldFNlcmlhbGl6YXRpb25SZXNpemVkID0gKHYpID0+IHtcbiAgcmVzaXplZCA9IHY7XG59O1xudmFyIGNhbm9uaWNhbGl6ZSA9ICh0YXJnZXQpID0+IHtcbiAgbGV0IGNvbXBvbmVudFByb3BzID0gW107XG4gIGxldCBjaGFuZ2VkUHJvcHMgPSBuZXcgTWFwKCk7XG4gIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkpIHtcbiAgICBjb21wb25lbnRQcm9wcyA9IHRhcmdldC5tYXAoKHApID0+IHtcbiAgICAgIGlmICghcClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYml0RUNTIC0gQ2Fubm90IHNlcmlhbGl6ZSB1bmRlZmluZWQgY29tcG9uZW50XCIpO1xuICAgICAgaWYgKHR5cGVvZiBwID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY29uc3QgW2MsIG1vZF0gPSBwKCk7XG4gICAgICAgIGlmIChtb2QgPT09IFwiY2hhbmdlZFwiKSB7XG4gICAgICAgICAgY1skc3RvcmVGbGF0dGVuZWRdLmZvckVhY2goKHByb3ApID0+IHtcbiAgICAgICAgICAgIGNvbnN0ICQgPSBTeW1ib2woKTtcbiAgICAgICAgICAgIGNyZWF0ZVNoYWRvdyhwcm9wLCAkKTtcbiAgICAgICAgICAgIGNoYW5nZWRQcm9wcy5zZXQocHJvcCwgJCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIGNbJHN0b3JlRmxhdHRlbmVkXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocCkuaW5jbHVkZXMoJHN0b3JlRmxhdHRlbmVkKSkge1xuICAgICAgICByZXR1cm4gcFskc3RvcmVGbGF0dGVuZWRdO1xuICAgICAgfVxuICAgICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocCkuaW5jbHVkZXMoJHN0b3JlQmFzZSkpIHtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgICB9XG4gICAgfSkucmVkdWNlKChhLCB2KSA9PiBhLmNvbmNhdCh2KSwgW10pO1xuICB9XG4gIHJldHVybiBbY29tcG9uZW50UHJvcHMsIGNoYW5nZWRQcm9wc107XG59O1xudmFyIGRlZmluZVNlcmlhbGl6ZXIgPSAodGFyZ2V0LCBtYXhCeXRlcyA9IDJlNykgPT4ge1xuICBjb25zdCBpc1dvcmxkID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0YXJnZXQpLmluY2x1ZGVzKCRjb21wb25lbnRNYXApO1xuICBsZXQgW2NvbXBvbmVudFByb3BzLCBjaGFuZ2VkUHJvcHNdID0gY2Fub25pY2FsaXplKHRhcmdldCk7XG4gIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihtYXhCeXRlcyk7XG4gIGNvbnN0IHZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyKTtcbiAgcmV0dXJuIChlbnRzKSA9PiB7XG4gICAgaWYgKHJlc2l6ZWQpIHtcbiAgICAgIFtjb21wb25lbnRQcm9wcywgY2hhbmdlZFByb3BzXSA9IGNhbm9uaWNhbGl6ZSh0YXJnZXQpO1xuICAgICAgcmVzaXplZCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaXNXb3JsZCkge1xuICAgICAgY29tcG9uZW50UHJvcHMgPSBbXTtcbiAgICAgIHRhcmdldFskY29tcG9uZW50TWFwXS5mb3JFYWNoKChjLCBjb21wb25lbnQpID0+IHtcbiAgICAgICAgaWYgKGNvbXBvbmVudFskc3RvcmVGbGF0dGVuZWRdKVxuICAgICAgICAgIGNvbXBvbmVudFByb3BzLnB1c2goLi4uY29tcG9uZW50WyRzdG9yZUZsYXR0ZW5lZF0pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgY29tcG9uZW50UHJvcHMucHVzaChjb21wb25lbnQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGxldCB3b3JsZDtcbiAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlbnRzKS5pbmNsdWRlcygkY29tcG9uZW50TWFwKSkge1xuICAgICAgd29ybGQgPSBlbnRzO1xuICAgICAgZW50cyA9IGVudHNbJGVudGl0eUFycmF5XTtcbiAgICB9IGVsc2Uge1xuICAgICAgd29ybGQgPSBlaWRUb1dvcmxkLmdldChlbnRzWzBdKTtcbiAgICB9XG4gICAgbGV0IHdoZXJlID0gMDtcbiAgICBpZiAoIWVudHMubGVuZ3RoKVxuICAgICAgcmV0dXJuIGJ1ZmZlci5zbGljZSgwLCB3aGVyZSk7XG4gICAgZm9yIChsZXQgcGlkID0gMDsgcGlkIDwgY29tcG9uZW50UHJvcHMubGVuZ3RoOyBwaWQrKykge1xuICAgICAgY29uc3QgcHJvcCA9IGNvbXBvbmVudFByb3BzW3BpZF07XG4gICAgICBjb25zdCAkZGlmZiA9IGNoYW5nZWRQcm9wcy5nZXQocHJvcCk7XG4gICAgICB2aWV3LnNldFVpbnQ4KHdoZXJlLCBwaWQpO1xuICAgICAgd2hlcmUgKz0gMTtcbiAgICAgIGNvbnN0IGNvdW50V2hlcmUgPSB3aGVyZTtcbiAgICAgIHdoZXJlICs9IDQ7XG4gICAgICBsZXQgd3JpdGVDb3VudCA9IDA7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgZWlkID0gZW50c1tpXTtcbiAgICAgICAgaWYgKCFoYXNDb21wb25lbnQod29ybGQsIHByb3BbJHN0b3JlQmFzZV0oKSwgZWlkKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJld2luZFdoZXJlID0gd2hlcmU7XG4gICAgICAgIHZpZXcuc2V0VWludDMyKHdoZXJlLCBlaWQpO1xuICAgICAgICB3aGVyZSArPSA0O1xuICAgICAgICBpZiAocHJvcFskdGFnU3RvcmVdKSB7XG4gICAgICAgICAgd3JpdGVDb3VudCsrO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcocHJvcFtlaWRdKSkge1xuICAgICAgICAgIGNvbnN0IHR5cGUgPSBwcm9wW2VpZF0uY29uc3RydWN0b3IubmFtZS5yZXBsYWNlKFwiQXJyYXlcIiwgXCJcIik7XG4gICAgICAgICAgY29uc3QgaW5kZXhUeXBlID0gcHJvcFtlaWRdWyRpbmRleFR5cGVdO1xuICAgICAgICAgIGNvbnN0IGluZGV4Qnl0ZXMgPSBwcm9wW2VpZF1bJGluZGV4Qnl0ZXNdO1xuICAgICAgICAgIGNvbnN0IGNvdW50V2hlcmUyID0gd2hlcmU7XG4gICAgICAgICAgd2hlcmUgKz0gaW5kZXhCeXRlcztcbiAgICAgICAgICBsZXQgYXJyYXlXcml0ZUNvdW50ID0gMDtcbiAgICAgICAgICBmb3IgKGxldCBpMiA9IDA7IGkyIDwgcHJvcFtlaWRdLmxlbmd0aDsgaTIrKykge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwcm9wW2VpZF1baTJdO1xuICAgICAgICAgICAgaWYgKCRkaWZmICYmIHByb3BbZWlkXVtpMl0gPT09IHByb3BbJGRpZmZdW2VpZF1baTJdKSB7XG4gICAgICAgICAgICAgIHByb3BbJGRpZmZdW2VpZF1baTJdID0gcHJvcFtlaWRdW2kyXTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJGRpZmYpXG4gICAgICAgICAgICAgIHByb3BbJGRpZmZdW2VpZF1baTJdID0gcHJvcFtlaWRdW2kyXTtcbiAgICAgICAgICAgIHZpZXdbYHNldCR7aW5kZXhUeXBlfWBdKHdoZXJlLCBpMik7XG4gICAgICAgICAgICB3aGVyZSArPSBpbmRleEJ5dGVzO1xuICAgICAgICAgICAgdmlld1tgc2V0JHt0eXBlfWBdKHdoZXJlLCB2YWx1ZSk7XG4gICAgICAgICAgICB3aGVyZSArPSBwcm9wW2VpZF0uQllURVNfUEVSX0VMRU1FTlQ7XG4gICAgICAgICAgICBhcnJheVdyaXRlQ291bnQrKztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGFycmF5V3JpdGVDb3VudCA+IDApIHtcbiAgICAgICAgICAgIHZpZXdbYHNldCR7aW5kZXhUeXBlfWBdKGNvdW50V2hlcmUyLCBhcnJheVdyaXRlQ291bnQpO1xuICAgICAgICAgICAgd3JpdGVDb3VudCsrO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3aGVyZSA9IHJld2luZFdoZXJlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoJGRpZmYgJiYgcHJvcFskZGlmZl1bZWlkXSA9PT0gcHJvcFtlaWRdKSB7XG4gICAgICAgICAgICB3aGVyZSA9IHJld2luZFdoZXJlO1xuICAgICAgICAgICAgcHJvcFskZGlmZl1bZWlkXSA9IHByb3BbZWlkXTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoJGRpZmYpXG4gICAgICAgICAgICBwcm9wWyRkaWZmXVtlaWRdID0gcHJvcFtlaWRdO1xuICAgICAgICAgIGNvbnN0IHR5cGUgPSBwcm9wLmNvbnN0cnVjdG9yLm5hbWUucmVwbGFjZShcIkFycmF5XCIsIFwiXCIpO1xuICAgICAgICAgIHZpZXdbYHNldCR7dHlwZX1gXSh3aGVyZSwgcHJvcFtlaWRdKTtcbiAgICAgICAgICB3aGVyZSArPSBwcm9wLkJZVEVTX1BFUl9FTEVNRU5UO1xuICAgICAgICAgIHdyaXRlQ291bnQrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHdyaXRlQ291bnQgPiAwKSB7XG4gICAgICAgIHZpZXcuc2V0VWludDMyKGNvdW50V2hlcmUsIHdyaXRlQ291bnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2hlcmUgLT0gNTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGJ1ZmZlci5zbGljZSgwLCB3aGVyZSk7XG4gIH07XG59O1xudmFyIG5ld0VudGl0aWVzID0gbmV3IE1hcCgpO1xudmFyIGRlZmluZURlc2VyaWFsaXplciA9ICh0YXJnZXQpID0+IHtcbiAgY29uc3QgaXNXb3JsZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KS5pbmNsdWRlcygkY29tcG9uZW50TWFwKTtcbiAgbGV0IFtjb21wb25lbnRQcm9wc10gPSBjYW5vbmljYWxpemUodGFyZ2V0KTtcbiAgcmV0dXJuICh3b3JsZCwgcGFja2V0LCBtb2RlID0gMCkgPT4ge1xuICAgIG5ld0VudGl0aWVzLmNsZWFyKCk7XG4gICAgaWYgKHJlc2l6ZWQpIHtcbiAgICAgIFtjb21wb25lbnRQcm9wc10gPSBjYW5vbmljYWxpemUodGFyZ2V0KTtcbiAgICAgIHJlc2l6ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGlzV29ybGQpIHtcbiAgICAgIGNvbXBvbmVudFByb3BzID0gW107XG4gICAgICB0YXJnZXRbJGNvbXBvbmVudE1hcF0uZm9yRWFjaCgoYywgY29tcG9uZW50KSA9PiB7XG4gICAgICAgIGlmIChjb21wb25lbnRbJHN0b3JlRmxhdHRlbmVkXSlcbiAgICAgICAgICBjb21wb25lbnRQcm9wcy5wdXNoKC4uLmNvbXBvbmVudFskc3RvcmVGbGF0dGVuZWRdKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIGNvbXBvbmVudFByb3BzLnB1c2goY29tcG9uZW50KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBsb2NhbEVudGl0aWVzID0gd29ybGRbJGxvY2FsRW50aXRpZXNdO1xuICAgIGNvbnN0IGxvY2FsRW50aXR5TG9va3VwID0gd29ybGRbJGxvY2FsRW50aXR5TG9va3VwXTtcbiAgICBjb25zdCB2aWV3ID0gbmV3IERhdGFWaWV3KHBhY2tldCk7XG4gICAgbGV0IHdoZXJlID0gMDtcbiAgICB3aGlsZSAod2hlcmUgPCBwYWNrZXQuYnl0ZUxlbmd0aCkge1xuICAgICAgY29uc3QgcGlkID0gdmlldy5nZXRVaW50OCh3aGVyZSk7XG4gICAgICB3aGVyZSArPSAxO1xuICAgICAgY29uc3QgZW50aXR5Q291bnQgPSB2aWV3LmdldFVpbnQzMih3aGVyZSk7XG4gICAgICB3aGVyZSArPSA0O1xuICAgICAgY29uc3QgcHJvcCA9IGNvbXBvbmVudFByb3BzW3BpZF07XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVudGl0eUNvdW50OyBpKyspIHtcbiAgICAgICAgbGV0IGVpZCA9IHZpZXcuZ2V0VWludDMyKHdoZXJlKTtcbiAgICAgICAgd2hlcmUgKz0gNDtcbiAgICAgICAgaWYgKG1vZGUgPT09IERFU0VSSUFMSVpFX01PREUuTUFQKSB7XG4gICAgICAgICAgaWYgKGxvY2FsRW50aXRpZXMuaGFzKGVpZCkpIHtcbiAgICAgICAgICAgIGVpZCA9IGxvY2FsRW50aXRpZXMuZ2V0KGVpZCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChuZXdFbnRpdGllcy5oYXMoZWlkKSkge1xuICAgICAgICAgICAgZWlkID0gbmV3RW50aXRpZXMuZ2V0KGVpZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0VpZCA9IGFkZEVudGl0eSh3b3JsZCk7XG4gICAgICAgICAgICBsb2NhbEVudGl0aWVzLnNldChlaWQsIG5ld0VpZCk7XG4gICAgICAgICAgICBsb2NhbEVudGl0eUxvb2t1cC5zZXQobmV3RWlkLCBlaWQpO1xuICAgICAgICAgICAgbmV3RW50aXRpZXMuc2V0KGVpZCwgbmV3RWlkKTtcbiAgICAgICAgICAgIGVpZCA9IG5ld0VpZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1vZGUgPT09IERFU0VSSUFMSVpFX01PREUuQVBQRU5EIHx8IG1vZGUgPT09IERFU0VSSUFMSVpFX01PREUuUkVQTEFDRSAmJiAhd29ybGRbJGVudGl0eVNwYXJzZVNldF0uaGFzKGVpZCkpIHtcbiAgICAgICAgICBjb25zdCBuZXdFaWQgPSBuZXdFbnRpdGllcy5nZXQoZWlkKSB8fCBhZGRFbnRpdHkod29ybGQpO1xuICAgICAgICAgIG5ld0VudGl0aWVzLnNldChlaWQsIG5ld0VpZCk7XG4gICAgICAgICAgZWlkID0gbmV3RWlkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHByb3BbJHN0b3JlQmFzZV0oKTtcbiAgICAgICAgaWYgKCFoYXNDb21wb25lbnQod29ybGQsIGNvbXBvbmVudCwgZWlkKSkge1xuICAgICAgICAgIGFkZENvbXBvbmVudCh3b3JsZCwgY29tcG9uZW50LCBlaWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb21wb25lbnRbJHRhZ1N0b3JlXSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcocHJvcFtlaWRdKSkge1xuICAgICAgICAgIGNvbnN0IGFycmF5ID0gcHJvcFtlaWRdO1xuICAgICAgICAgIGNvbnN0IGNvdW50ID0gdmlld1tgZ2V0JHthcnJheVskaW5kZXhUeXBlXX1gXSh3aGVyZSk7XG4gICAgICAgICAgd2hlcmUgKz0gYXJyYXlbJGluZGV4Qnl0ZXNdO1xuICAgICAgICAgIGZvciAobGV0IGkyID0gMDsgaTIgPCBjb3VudDsgaTIrKykge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB2aWV3W2BnZXQke2FycmF5WyRpbmRleFR5cGVdfWBdKHdoZXJlKTtcbiAgICAgICAgICAgIHdoZXJlICs9IGFycmF5WyRpbmRleEJ5dGVzXTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmlld1tgZ2V0JHthcnJheS5jb25zdHJ1Y3Rvci5uYW1lLnJlcGxhY2UoXCJBcnJheVwiLCBcIlwiKX1gXSh3aGVyZSk7XG4gICAgICAgICAgICB3aGVyZSArPSBhcnJheS5CWVRFU19QRVJfRUxFTUVOVDtcbiAgICAgICAgICAgIGlmIChwcm9wWyRpc0VpZFR5cGVdKSB7XG4gICAgICAgICAgICAgIGxldCBsb2NhbEVpZCA9IGxvY2FsRW50aXRpZXMuZ2V0KHZhbHVlKTtcbiAgICAgICAgICAgICAgaWYgKCF3b3JsZFskZW50aXR5U3BhcnNlU2V0XS5oYXMobG9jYWxFaWQpKVxuICAgICAgICAgICAgICAgIGxvY2FsRWlkID0gYWRkRW50aXR5KHdvcmxkKTtcbiAgICAgICAgICAgICAgcHJvcFtlaWRdW2luZGV4XSA9IGxvY2FsRWlkO1xuICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgIHByb3BbZWlkXVtpbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgdmFsdWUgPSB2aWV3W2BnZXQke3Byb3AuY29uc3RydWN0b3IubmFtZS5yZXBsYWNlKFwiQXJyYXlcIiwgXCJcIil9YF0od2hlcmUpO1xuICAgICAgICAgIHdoZXJlICs9IHByb3AuQllURVNfUEVSX0VMRU1FTlQ7XG4gICAgICAgICAgaWYgKHByb3BbJGlzRWlkVHlwZV0pIHtcbiAgICAgICAgICAgIGxldCBsb2NhbEVpZCA9IGxvY2FsRW50aXRpZXMuZ2V0KHZhbHVlKTtcbiAgICAgICAgICAgIGlmICghd29ybGRbJGVudGl0eVNwYXJzZVNldF0uaGFzKGxvY2FsRWlkKSlcbiAgICAgICAgICAgICAgbG9jYWxFaWQgPSBhZGRFbnRpdHkod29ybGQpO1xuICAgICAgICAgICAgcHJvcFtlaWRdID0gbG9jYWxFaWQ7XG4gICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICBwcm9wW2VpZF0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG5cbi8vIHNyYy9FbnRpdHkuanNcbnZhciAkZW50aXR5TWFza3MgPSBTeW1ib2woXCJlbnRpdHlNYXNrc1wiKTtcbnZhciAkZW50aXR5Q29tcG9uZW50cyA9IFN5bWJvbChcImVudGl0eUNvbXBvbmVudHNcIik7XG52YXIgJGVudGl0eVNwYXJzZVNldCA9IFN5bWJvbChcImVudGl0eVNwYXJzZVNldFwiKTtcbnZhciAkZW50aXR5QXJyYXkgPSBTeW1ib2woXCJlbnRpdHlBcnJheVwiKTtcbnZhciAkZW50aXR5SW5kaWNlcyA9IFN5bWJvbChcImVudGl0eUluZGljZXNcIik7XG52YXIgJHJlbW92ZWRFbnRpdGllcyA9IFN5bWJvbChcInJlbW92ZWRFbnRpdGllc1wiKTtcbnZhciBkZWZhdWx0U2l6ZSA9IDFlNTtcbnZhciBnbG9iYWxFbnRpdHlDdXJzb3IgPSAwO1xudmFyIGdsb2JhbFNpemUgPSBkZWZhdWx0U2l6ZTtcbnZhciByZXNpemVUaHJlc2hvbGQgPSAoKSA9PiBnbG9iYWxTaXplIC0gZ2xvYmFsU2l6ZSAvIDU7XG52YXIgZ2V0R2xvYmFsU2l6ZSA9ICgpID0+IGdsb2JhbFNpemU7XG52YXIgcmVtb3ZlZCA9IFtdO1xudmFyIHJlc2V0R2xvYmFscyA9ICgpID0+IHtcbiAgZ2xvYmFsU2l6ZSA9IGRlZmF1bHRTaXplO1xuICBnbG9iYWxFbnRpdHlDdXJzb3IgPSAwO1xuICByZW1vdmVkLmxlbmd0aCA9IDA7XG59O1xudmFyIHNldERlZmF1bHRTaXplID0gKHNpemUpID0+IHtcbiAgZGVmYXVsdFNpemUgPSBzaXplO1xuICByZXNldEdsb2JhbHMoKTtcbn07XG52YXIgZ2V0RW50aXR5Q3Vyc29yID0gKCkgPT4gZ2xvYmFsRW50aXR5Q3Vyc29yO1xudmFyIGVpZFRvV29ybGQgPSBuZXcgTWFwKCk7XG52YXIgYWRkRW50aXR5ID0gKHdvcmxkKSA9PiB7XG4gIGlmIChnbG9iYWxFbnRpdHlDdXJzb3IgPj0gcmVzaXplVGhyZXNob2xkKCkpIHtcbiAgICBjb25zdCBzaXplID0gZ2xvYmFsU2l6ZTtcbiAgICBjb25zdCBhbW91bnQgPSBNYXRoLmNlaWwoc2l6ZSAvIDIgLyA0KSAqIDQ7XG4gICAgY29uc3QgbmV3U2l6ZSA9IHNpemUgKyBhbW91bnQ7XG4gICAgZ2xvYmFsU2l6ZSA9IG5ld1NpemU7XG4gICAgcmVzaXplV29ybGRzKG5ld1NpemUpO1xuICAgIHJlc2l6ZUNvbXBvbmVudHMobmV3U2l6ZSk7XG4gICAgc2V0U2VyaWFsaXphdGlvblJlc2l6ZWQodHJ1ZSk7XG4gICAgY29uc29sZS5pbmZvKGBcXHV7MUY0N0V9IGJpdEVDUyAtIHJlc2l6aW5nIGFsbCBkYXRhIHN0b3JlcyBmcm9tICR7c2l6ZX0gdG8gJHtuZXdTaXplfWApO1xuICB9XG4gIGNvbnN0IGVpZCA9IHJlbW92ZWQubGVuZ3RoID4gMCA/IHJlbW92ZWQuc2hpZnQoKSA6IGdsb2JhbEVudGl0eUN1cnNvcisrO1xuICB3b3JsZFskZW50aXR5U3BhcnNlU2V0XS5hZGQoZWlkKTtcbiAgZWlkVG9Xb3JsZC5zZXQoZWlkLCB3b3JsZCk7XG4gIHdvcmxkWyRub3RRdWVyaWVzXS5mb3JFYWNoKChxKSA9PiB7XG4gICAgY29uc3QgbWF0Y2ggPSBxdWVyeUNoZWNrRW50aXR5KHdvcmxkLCBxLCBlaWQpO1xuICAgIGlmIChtYXRjaClcbiAgICAgIHF1ZXJ5QWRkRW50aXR5KHEsIGVpZCk7XG4gIH0pO1xuICB3b3JsZFskZW50aXR5Q29tcG9uZW50c10uc2V0KGVpZCwgbmV3IFNldCgpKTtcbiAgcmV0dXJuIGVpZDtcbn07XG52YXIgcmVtb3ZlRW50aXR5ID0gKHdvcmxkLCBlaWQpID0+IHtcbiAgaWYgKCF3b3JsZFskZW50aXR5U3BhcnNlU2V0XS5oYXMoZWlkKSlcbiAgICByZXR1cm47XG4gIHdvcmxkWyRxdWVyaWVzXS5mb3JFYWNoKChxKSA9PiB7XG4gICAgcXVlcnlSZW1vdmVFbnRpdHkod29ybGQsIHEsIGVpZCk7XG4gIH0pO1xuICByZW1vdmVkLnB1c2goZWlkKTtcbiAgd29ybGRbJGVudGl0eVNwYXJzZVNldF0ucmVtb3ZlKGVpZCk7XG4gIHdvcmxkWyRlbnRpdHlDb21wb25lbnRzXS5kZWxldGUoZWlkKTtcbiAgd29ybGRbJGxvY2FsRW50aXRpZXNdLmRlbGV0ZSh3b3JsZFskbG9jYWxFbnRpdHlMb29rdXBdLmdldChlaWQpKTtcbiAgd29ybGRbJGxvY2FsRW50aXR5TG9va3VwXS5kZWxldGUoZWlkKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3JsZFskZW50aXR5TWFza3NdLmxlbmd0aDsgaSsrKVxuICAgIHdvcmxkWyRlbnRpdHlNYXNrc11baV1bZWlkXSA9IDA7XG59O1xudmFyIGdldEVudGl0eUNvbXBvbmVudHMgPSAod29ybGQsIGVpZCkgPT4gQXJyYXkuZnJvbSh3b3JsZFskZW50aXR5Q29tcG9uZW50c10uZ2V0KGVpZCkpO1xuXG4vLyBzcmMvUXVlcnkuanNcbmZ1bmN0aW9uIE5vdChjKSB7XG4gIHJldHVybiAoKSA9PiBbYywgXCJub3RcIl07XG59XG5mdW5jdGlvbiBDaGFuZ2VkKGMpIHtcbiAgcmV0dXJuICgpID0+IFtjLCBcImNoYW5nZWRcIl07XG59XG5mdW5jdGlvbiBBbnkoLi4uY29tcHMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIFF1ZXJ5QW55KCkge1xuICAgIHJldHVybiBjb21wcztcbiAgfTtcbn1cbmZ1bmN0aW9uIEFsbCguLi5jb21wcykge1xuICByZXR1cm4gZnVuY3Rpb24gUXVlcnlBbGwoKSB7XG4gICAgcmV0dXJuIGNvbXBzO1xuICB9O1xufVxuZnVuY3Rpb24gTm9uZSguLi5jb21wcykge1xuICByZXR1cm4gZnVuY3Rpb24gUXVlcnlOb25lKCkge1xuICAgIHJldHVybiBjb21wcztcbiAgfTtcbn1cbnZhciAkcXVlcmllcyA9IFN5bWJvbChcInF1ZXJpZXNcIik7XG52YXIgJG5vdFF1ZXJpZXMgPSBTeW1ib2woXCJub3RRdWVyaWVzXCIpO1xudmFyICRxdWVyeUFueSA9IFN5bWJvbChcInF1ZXJ5QW55XCIpO1xudmFyICRxdWVyeUFsbCA9IFN5bWJvbChcInF1ZXJ5QWxsXCIpO1xudmFyICRxdWVyeU5vbmUgPSBTeW1ib2woXCJxdWVyeU5vbmVcIik7XG52YXIgJHF1ZXJ5TWFwID0gU3ltYm9sKFwicXVlcnlNYXBcIik7XG52YXIgJGRpcnR5UXVlcmllcyA9IFN5bWJvbChcIiRkaXJ0eVF1ZXJpZXNcIik7XG52YXIgJHF1ZXJ5Q29tcG9uZW50cyA9IFN5bWJvbChcInF1ZXJ5Q29tcG9uZW50c1wiKTtcbnZhciAkZW50ZXJRdWVyeSA9IFN5bWJvbChcImVudGVyUXVlcnlcIik7XG52YXIgJGV4aXRRdWVyeSA9IFN5bWJvbChcImV4aXRRdWVyeVwiKTtcbnZhciBlbnRlclF1ZXJ5ID0gKHF1ZXJ5KSA9PiAod29ybGQpID0+IHtcbiAgaWYgKCF3b3JsZFskcXVlcnlNYXBdLmhhcyhxdWVyeSkpXG4gICAgcmVnaXN0ZXJRdWVyeSh3b3JsZCwgcXVlcnkpO1xuICBjb25zdCBxID0gd29ybGRbJHF1ZXJ5TWFwXS5nZXQocXVlcnkpO1xuICBjb25zdCBlbnRlcmVkID0gcS5lbnRlcmVkLmRlbnNlLnNsaWNlKCk7XG4gIHEuZW50ZXJlZCA9IFNwYXJzZVNldCgpO1xuICByZXR1cm4gZW50ZXJlZDtcbn07XG52YXIgZXhpdFF1ZXJ5ID0gKHF1ZXJ5KSA9PiAod29ybGQpID0+IHtcbiAgaWYgKCF3b3JsZFskcXVlcnlNYXBdLmhhcyhxdWVyeSkpXG4gICAgcmVnaXN0ZXJRdWVyeSh3b3JsZCwgcXVlcnkpO1xuICBjb25zdCBxID0gd29ybGRbJHF1ZXJ5TWFwXS5nZXQocXVlcnkpO1xuICBjb25zdCBleGl0ZWQgPSBxLmV4aXRlZC5kZW5zZS5zbGljZSgpO1xuICBxLmV4aXRlZCA9IFNwYXJzZVNldCgpO1xuICByZXR1cm4gZXhpdGVkO1xufTtcbnZhciByZWdpc3RlclF1ZXJ5ID0gKHdvcmxkLCBxdWVyeSkgPT4ge1xuICBjb25zdCBjb21wb25lbnRzMiA9IFtdO1xuICBjb25zdCBub3RDb21wb25lbnRzID0gW107XG4gIGNvbnN0IGNoYW5nZWRDb21wb25lbnRzID0gW107XG4gIHF1ZXJ5WyRxdWVyeUNvbXBvbmVudHNdLmZvckVhY2goKGMpID0+IHtcbiAgICBpZiAodHlwZW9mIGMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgY29uc3QgW2NvbXAsIG1vZF0gPSBjKCk7XG4gICAgICBpZiAoIXdvcmxkWyRjb21wb25lbnRNYXBdLmhhcyhjb21wKSlcbiAgICAgICAgcmVnaXN0ZXJDb21wb25lbnQod29ybGQsIGNvbXApO1xuICAgICAgaWYgKG1vZCA9PT0gXCJub3RcIikge1xuICAgICAgICBub3RDb21wb25lbnRzLnB1c2goY29tcCk7XG4gICAgICB9XG4gICAgICBpZiAobW9kID09PSBcImNoYW5nZWRcIikge1xuICAgICAgICBjaGFuZ2VkQ29tcG9uZW50cy5wdXNoKGNvbXApO1xuICAgICAgICBjb21wb25lbnRzMi5wdXNoKGNvbXApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXdvcmxkWyRjb21wb25lbnRNYXBdLmhhcyhjKSlcbiAgICAgICAgcmVnaXN0ZXJDb21wb25lbnQod29ybGQsIGMpO1xuICAgICAgY29tcG9uZW50czIucHVzaChjKTtcbiAgICB9XG4gIH0pO1xuICBjb25zdCBtYXBDb21wb25lbnRzID0gKGMpID0+IHdvcmxkWyRjb21wb25lbnRNYXBdLmdldChjKTtcbiAgY29uc3QgYWxsQ29tcG9uZW50cyA9IGNvbXBvbmVudHMyLmNvbmNhdChub3RDb21wb25lbnRzKS5tYXAobWFwQ29tcG9uZW50cyk7XG4gIGNvbnN0IHNwYXJzZVNldCA9IFNwYXJzZVNldCgpO1xuICBjb25zdCBhcmNoZXR5cGVzID0gW107XG4gIGNvbnN0IGNoYW5nZWQgPSBbXTtcbiAgY29uc3QgdG9SZW1vdmUgPSBTcGFyc2VTZXQoKTtcbiAgY29uc3QgZW50ZXJlZCA9IFNwYXJzZVNldCgpO1xuICBjb25zdCBleGl0ZWQgPSBTcGFyc2VTZXQoKTtcbiAgY29uc3QgZ2VuZXJhdGlvbnMgPSBhbGxDb21wb25lbnRzLm1hcCgoYykgPT4gYy5nZW5lcmF0aW9uSWQpLnJlZHVjZSgoYSwgdikgPT4ge1xuICAgIGlmIChhLmluY2x1ZGVzKHYpKVxuICAgICAgcmV0dXJuIGE7XG4gICAgYS5wdXNoKHYpO1xuICAgIHJldHVybiBhO1xuICB9LCBbXSk7XG4gIGNvbnN0IHJlZHVjZUJpdGZsYWdzID0gKGEsIGMpID0+IHtcbiAgICBpZiAoIWFbYy5nZW5lcmF0aW9uSWRdKVxuICAgICAgYVtjLmdlbmVyYXRpb25JZF0gPSAwO1xuICAgIGFbYy5nZW5lcmF0aW9uSWRdIHw9IGMuYml0ZmxhZztcbiAgICByZXR1cm4gYTtcbiAgfTtcbiAgY29uc3QgbWFza3MgPSBjb21wb25lbnRzMi5tYXAobWFwQ29tcG9uZW50cykucmVkdWNlKHJlZHVjZUJpdGZsYWdzLCB7fSk7XG4gIGNvbnN0IG5vdE1hc2tzID0gbm90Q29tcG9uZW50cy5tYXAobWFwQ29tcG9uZW50cykucmVkdWNlKHJlZHVjZUJpdGZsYWdzLCB7fSk7XG4gIGNvbnN0IGhhc01hc2tzID0gYWxsQ29tcG9uZW50cy5yZWR1Y2UocmVkdWNlQml0ZmxhZ3MsIHt9KTtcbiAgY29uc3QgZmxhdFByb3BzID0gY29tcG9uZW50czIuZmlsdGVyKChjKSA9PiAhY1skdGFnU3RvcmVdKS5tYXAoKGMpID0+IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoYykuaW5jbHVkZXMoJHN0b3JlRmxhdHRlbmVkKSA/IGNbJHN0b3JlRmxhdHRlbmVkXSA6IFtjXSkucmVkdWNlKChhLCB2KSA9PiBhLmNvbmNhdCh2KSwgW10pO1xuICBjb25zdCBzaGFkb3dzID0gZmxhdFByb3BzLm1hcCgocHJvcCkgPT4ge1xuICAgIGNvbnN0ICQgPSBTeW1ib2woKTtcbiAgICBjcmVhdGVTaGFkb3cocHJvcCwgJCk7XG4gICAgcmV0dXJuIHByb3BbJF07XG4gIH0sIFtdKTtcbiAgY29uc3QgcSA9IE9iamVjdC5hc3NpZ24oc3BhcnNlU2V0LCB7XG4gICAgYXJjaGV0eXBlcyxcbiAgICBjaGFuZ2VkLFxuICAgIGNvbXBvbmVudHM6IGNvbXBvbmVudHMyLFxuICAgIG5vdENvbXBvbmVudHMsXG4gICAgY2hhbmdlZENvbXBvbmVudHMsXG4gICAgYWxsQ29tcG9uZW50cyxcbiAgICBtYXNrcyxcbiAgICBub3RNYXNrcyxcbiAgICBoYXNNYXNrcyxcbiAgICBnZW5lcmF0aW9ucyxcbiAgICBmbGF0UHJvcHMsXG4gICAgdG9SZW1vdmUsXG4gICAgZW50ZXJlZCxcbiAgICBleGl0ZWQsXG4gICAgc2hhZG93c1xuICB9KTtcbiAgd29ybGRbJHF1ZXJ5TWFwXS5zZXQocXVlcnksIHEpO1xuICB3b3JsZFskcXVlcmllc10uYWRkKHEpO1xuICBhbGxDb21wb25lbnRzLmZvckVhY2goKGMpID0+IHtcbiAgICBjLnF1ZXJpZXMuYWRkKHEpO1xuICB9KTtcbiAgaWYgKG5vdENvbXBvbmVudHMubGVuZ3RoKVxuICAgIHdvcmxkWyRub3RRdWVyaWVzXS5hZGQocSk7XG4gIGZvciAobGV0IGVpZCA9IDA7IGVpZCA8IGdldEVudGl0eUN1cnNvcigpOyBlaWQrKykge1xuICAgIGlmICghd29ybGRbJGVudGl0eVNwYXJzZVNldF0uaGFzKGVpZCkpXG4gICAgICBjb250aW51ZTtcbiAgICBjb25zdCBtYXRjaCA9IHF1ZXJ5Q2hlY2tFbnRpdHkod29ybGQsIHEsIGVpZCk7XG4gICAgaWYgKG1hdGNoKVxuICAgICAgcXVlcnlBZGRFbnRpdHkocSwgZWlkKTtcbiAgfVxufTtcbnZhciBkaWZmID0gKHEsIGNsZWFyRGlmZikgPT4ge1xuICBpZiAoY2xlYXJEaWZmKVxuICAgIHEuY2hhbmdlZCA9IFtdO1xuICBjb25zdCB7IGZsYXRQcm9wcywgc2hhZG93cyB9ID0gcTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBxLmRlbnNlLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgZWlkID0gcS5kZW5zZVtpXTtcbiAgICBsZXQgZGlydHkgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBwaWQgPSAwOyBwaWQgPCBmbGF0UHJvcHMubGVuZ3RoOyBwaWQrKykge1xuICAgICAgY29uc3QgcHJvcCA9IGZsYXRQcm9wc1twaWRdO1xuICAgICAgY29uc3Qgc2hhZG93ID0gc2hhZG93c1twaWRdO1xuICAgICAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhwcm9wW2VpZF0pKSB7XG4gICAgICAgIGZvciAobGV0IGkyID0gMDsgaTIgPCBwcm9wW2VpZF0ubGVuZ3RoOyBpMisrKSB7XG4gICAgICAgICAgaWYgKHByb3BbZWlkXVtpMl0gIT09IHNoYWRvd1tlaWRdW2kyXSkge1xuICAgICAgICAgICAgZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNoYWRvd1tlaWRdLnNldChwcm9wW2VpZF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHByb3BbZWlkXSAhPT0gc2hhZG93W2VpZF0pIHtcbiAgICAgICAgICBkaXJ0eSA9IHRydWU7XG4gICAgICAgICAgc2hhZG93W2VpZF0gPSBwcm9wW2VpZF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRpcnR5KVxuICAgICAgcS5jaGFuZ2VkLnB1c2goZWlkKTtcbiAgfVxuICByZXR1cm4gcS5jaGFuZ2VkO1xufTtcbnZhciBmbGF0dGVuID0gKGEsIHYpID0+IGEuY29uY2F0KHYpO1xudmFyIGFnZ3JlZ2F0ZUNvbXBvbmVudHNGb3IgPSAobW9kKSA9PiAoeCkgPT4geC5maWx0ZXIoKGYpID0+IGYubmFtZSA9PT0gbW9kKCkuY29uc3RydWN0b3IubmFtZSkucmVkdWNlKGZsYXR0ZW4pO1xudmFyIGdldEFueUNvbXBvbmVudHMgPSBhZ2dyZWdhdGVDb21wb25lbnRzRm9yKEFueSk7XG52YXIgZ2V0QWxsQ29tcG9uZW50cyA9IGFnZ3JlZ2F0ZUNvbXBvbmVudHNGb3IoQWxsKTtcbnZhciBnZXROb25lQ29tcG9uZW50cyA9IGFnZ3JlZ2F0ZUNvbXBvbmVudHNGb3IoTm9uZSk7XG52YXIgZGVmaW5lUXVlcnkgPSAoLi4uYXJncykgPT4ge1xuICBsZXQgY29tcG9uZW50czI7XG4gIGxldCBhbnksIGFsbCwgbm9uZTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHtcbiAgICBjb21wb25lbnRzMiA9IGFyZ3NbMF07XG4gIH0gZWxzZSB7XG4gIH1cbiAgaWYgKGNvbXBvbmVudHMyID09PSB2b2lkIDAgfHwgY29tcG9uZW50czJbJGNvbXBvbmVudE1hcF0gIT09IHZvaWQgMCkge1xuICAgIHJldHVybiAod29ybGQpID0+IHdvcmxkID8gd29ybGRbJGVudGl0eUFycmF5XSA6IGNvbXBvbmVudHMyWyRlbnRpdHlBcnJheV07XG4gIH1cbiAgY29uc3QgcXVlcnkgPSBmdW5jdGlvbih3b3JsZCwgY2xlYXJEaWZmID0gdHJ1ZSkge1xuICAgIGlmICghd29ybGRbJHF1ZXJ5TWFwXS5oYXMocXVlcnkpKVxuICAgICAgcmVnaXN0ZXJRdWVyeSh3b3JsZCwgcXVlcnkpO1xuICAgIGNvbnN0IHEgPSB3b3JsZFskcXVlcnlNYXBdLmdldChxdWVyeSk7XG4gICAgY29tbWl0UmVtb3ZhbHMod29ybGQpO1xuICAgIGlmIChxLmNoYW5nZWRDb21wb25lbnRzLmxlbmd0aClcbiAgICAgIHJldHVybiBkaWZmKHEsIGNsZWFyRGlmZik7XG4gICAgcmV0dXJuIHEuZGVuc2U7XG4gIH07XG4gIHF1ZXJ5WyRxdWVyeUNvbXBvbmVudHNdID0gY29tcG9uZW50czI7XG4gIHF1ZXJ5WyRxdWVyeUFueV0gPSBhbnk7XG4gIHF1ZXJ5WyRxdWVyeUFsbF0gPSBhbGw7XG4gIHF1ZXJ5WyRxdWVyeU5vbmVdID0gbm9uZTtcbiAgcmV0dXJuIHF1ZXJ5O1xufTtcbnZhciBxdWVyeUNoZWNrRW50aXR5ID0gKHdvcmxkLCBxLCBlaWQpID0+IHtcbiAgY29uc3QgeyBtYXNrcywgbm90TWFza3MsIGdlbmVyYXRpb25zIH0gPSBxO1xuICBsZXQgb3IgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGdlbmVyYXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgZ2VuZXJhdGlvbklkID0gZ2VuZXJhdGlvbnNbaV07XG4gICAgY29uc3QgcU1hc2sgPSBtYXNrc1tnZW5lcmF0aW9uSWRdO1xuICAgIGNvbnN0IHFOb3RNYXNrID0gbm90TWFza3NbZ2VuZXJhdGlvbklkXTtcbiAgICBjb25zdCBlTWFzayA9IHdvcmxkWyRlbnRpdHlNYXNrc11bZ2VuZXJhdGlvbklkXVtlaWRdO1xuICAgIGlmIChxTm90TWFzayAmJiAoZU1hc2sgJiBxTm90TWFzaykgIT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHFNYXNrICYmIChlTWFzayAmIHFNYXNrKSAhPT0gcU1hc2spIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xudmFyIHF1ZXJ5QWRkRW50aXR5ID0gKHEsIGVpZCkgPT4ge1xuICBpZiAocS5oYXMoZWlkKSlcbiAgICByZXR1cm47XG4gIHEuYWRkKGVpZCk7XG4gIHEuZW50ZXJlZC5hZGQoZWlkKTtcbn07XG52YXIgcXVlcnlDb21taXRSZW1vdmFscyA9IChxKSA9PiB7XG4gIGZvciAobGV0IGkgPSBxLnRvUmVtb3ZlLmRlbnNlLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgY29uc3QgZWlkID0gcS50b1JlbW92ZS5kZW5zZVtpXTtcbiAgICBxLnRvUmVtb3ZlLnJlbW92ZShlaWQpO1xuICAgIHEucmVtb3ZlKGVpZCk7XG4gIH1cbn07XG52YXIgY29tbWl0UmVtb3ZhbHMgPSAod29ybGQpID0+IHtcbiAgaWYgKCF3b3JsZFskZGlydHlRdWVyaWVzXS5zaXplKVxuICAgIHJldHVybjtcbiAgd29ybGRbJGRpcnR5UXVlcmllc10uZm9yRWFjaChxdWVyeUNvbW1pdFJlbW92YWxzKTtcbiAgd29ybGRbJGRpcnR5UXVlcmllc10uY2xlYXIoKTtcbn07XG52YXIgcXVlcnlSZW1vdmVFbnRpdHkgPSAod29ybGQsIHEsIGVpZCkgPT4ge1xuICBpZiAoIXEuaGFzKGVpZCkgfHwgcS50b1JlbW92ZS5oYXMoZWlkKSlcbiAgICByZXR1cm47XG4gIHEudG9SZW1vdmUuYWRkKGVpZCk7XG4gIHdvcmxkWyRkaXJ0eVF1ZXJpZXNdLmFkZChxKTtcbiAgcS5leGl0ZWQuYWRkKGVpZCk7XG59O1xudmFyIHJlc2V0Q2hhbmdlZFF1ZXJ5ID0gKHdvcmxkLCBxdWVyeSkgPT4ge1xuICBjb25zdCBxID0gd29ybGRbJHF1ZXJ5TWFwXS5nZXQocXVlcnkpO1xuICBxLmNoYW5nZWQgPSBbXTtcbn07XG52YXIgcmVtb3ZlUXVlcnkgPSAod29ybGQsIHF1ZXJ5KSA9PiB7XG4gIGNvbnN0IHEgPSB3b3JsZFskcXVlcnlNYXBdLmdldChxdWVyeSk7XG4gIHdvcmxkWyRxdWVyaWVzXS5kZWxldGUocSk7XG4gIHdvcmxkWyRxdWVyeU1hcF0uZGVsZXRlKHF1ZXJ5KTtcbn07XG5cbi8vIHNyYy9Db21wb25lbnQuanNcbnZhciAkY29tcG9uZW50TWFwID0gU3ltYm9sKFwiY29tcG9uZW50TWFwXCIpO1xudmFyIGNvbXBvbmVudHMgPSBbXTtcbnZhciByZXNpemVDb21wb25lbnRzID0gKHNpemUpID0+IHtcbiAgY29tcG9uZW50cy5mb3JFYWNoKChjb21wb25lbnQpID0+IHJlc2l6ZVN0b3JlKGNvbXBvbmVudCwgc2l6ZSkpO1xufTtcbnZhciBkZWZpbmVDb21wb25lbnQgPSAoc2NoZW1hKSA9PiB7XG4gIGNvbnN0IGNvbXBvbmVudCA9IGNyZWF0ZVN0b3JlKHNjaGVtYSwgZ2V0R2xvYmFsU2l6ZSgpKTtcbiAgaWYgKHNjaGVtYSAmJiBPYmplY3Qua2V5cyhzY2hlbWEpLmxlbmd0aClcbiAgICBjb21wb25lbnRzLnB1c2goY29tcG9uZW50KTtcbiAgcmV0dXJuIGNvbXBvbmVudDtcbn07XG52YXIgaW5jcmVtZW50Qml0ZmxhZyA9ICh3b3JsZCkgPT4ge1xuICB3b3JsZFskYml0ZmxhZ10gKj0gMjtcbiAgaWYgKHdvcmxkWyRiaXRmbGFnXSA+PSAyICoqIDMxKSB7XG4gICAgd29ybGRbJGJpdGZsYWddID0gMTtcbiAgICB3b3JsZFskZW50aXR5TWFza3NdLnB1c2gobmV3IFVpbnQzMkFycmF5KHdvcmxkWyRzaXplXSkpO1xuICB9XG59O1xudmFyIHJlZ2lzdGVyQ29tcG9uZW50ID0gKHdvcmxkLCBjb21wb25lbnQpID0+IHtcbiAgaWYgKCFjb21wb25lbnQpXG4gICAgdGhyb3cgbmV3IEVycm9yKGBiaXRFQ1MgLSBDYW5ub3QgcmVnaXN0ZXIgbnVsbCBvciB1bmRlZmluZWQgY29tcG9uZW50YCk7XG4gIGNvbnN0IHF1ZXJpZXMgPSBuZXcgU2V0KCk7XG4gIGNvbnN0IG5vdFF1ZXJpZXMgPSBuZXcgU2V0KCk7XG4gIGNvbnN0IGNoYW5nZWRRdWVyaWVzID0gbmV3IFNldCgpO1xuICB3b3JsZFskcXVlcmllc10uZm9yRWFjaCgocSkgPT4ge1xuICAgIGlmIChxLmFsbENvbXBvbmVudHMuaW5jbHVkZXMoY29tcG9uZW50KSkge1xuICAgICAgcXVlcmllcy5hZGQocSk7XG4gICAgfVxuICB9KTtcbiAgd29ybGRbJGNvbXBvbmVudE1hcF0uc2V0KGNvbXBvbmVudCwge1xuICAgIGdlbmVyYXRpb25JZDogd29ybGRbJGVudGl0eU1hc2tzXS5sZW5ndGggLSAxLFxuICAgIGJpdGZsYWc6IHdvcmxkWyRiaXRmbGFnXSxcbiAgICBzdG9yZTogY29tcG9uZW50LFxuICAgIHF1ZXJpZXMsXG4gICAgbm90UXVlcmllcyxcbiAgICBjaGFuZ2VkUXVlcmllc1xuICB9KTtcbiAgaWYgKGNvbXBvbmVudFskc3RvcmVTaXplXSA8IGdldEdsb2JhbFNpemUoKSkge1xuICAgIHJlc2l6ZVN0b3JlKGNvbXBvbmVudCwgZ2V0R2xvYmFsU2l6ZSgpKTtcbiAgfVxuICBpbmNyZW1lbnRCaXRmbGFnKHdvcmxkKTtcbn07XG52YXIgcmVnaXN0ZXJDb21wb25lbnRzID0gKHdvcmxkLCBjb21wb25lbnRzMikgPT4ge1xuICBjb21wb25lbnRzMi5mb3JFYWNoKChjKSA9PiByZWdpc3RlckNvbXBvbmVudCh3b3JsZCwgYykpO1xufTtcbnZhciBoYXNDb21wb25lbnQgPSAod29ybGQsIGNvbXBvbmVudCwgZWlkKSA9PiB7XG4gIGNvbnN0IHJlZ2lzdGVyZWRDb21wb25lbnQgPSB3b3JsZFskY29tcG9uZW50TWFwXS5nZXQoY29tcG9uZW50KTtcbiAgaWYgKCFyZWdpc3RlcmVkQ29tcG9uZW50KVxuICAgIHJldHVybiBmYWxzZTtcbiAgY29uc3QgeyBnZW5lcmF0aW9uSWQsIGJpdGZsYWcgfSA9IHJlZ2lzdGVyZWRDb21wb25lbnQ7XG4gIGNvbnN0IG1hc2sgPSB3b3JsZFskZW50aXR5TWFza3NdW2dlbmVyYXRpb25JZF1bZWlkXTtcbiAgcmV0dXJuIChtYXNrICYgYml0ZmxhZykgPT09IGJpdGZsYWc7XG59O1xudmFyIGFkZENvbXBvbmVudCA9ICh3b3JsZCwgY29tcG9uZW50LCBlaWQsIHJlc2V0ID0gdHJ1ZSkgPT4ge1xuICBpZiAoZWlkID09PSB2b2lkIDApXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiYml0RUNTIC0gZW50aXR5IGlzIHVuZGVmaW5lZC5cIik7XG4gIGlmICghd29ybGRbJGVudGl0eVNwYXJzZVNldF0uaGFzKGVpZCkpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiYml0RUNTIC0gZW50aXR5IGRvZXMgbm90IGV4aXN0IGluIHRoZSB3b3JsZC5cIik7XG4gIGlmICghd29ybGRbJGNvbXBvbmVudE1hcF0uaGFzKGNvbXBvbmVudCkpXG4gICAgcmVnaXN0ZXJDb21wb25lbnQod29ybGQsIGNvbXBvbmVudCk7XG4gIGlmIChoYXNDb21wb25lbnQod29ybGQsIGNvbXBvbmVudCwgZWlkKSlcbiAgICByZXR1cm47XG4gIGNvbnN0IGMgPSB3b3JsZFskY29tcG9uZW50TWFwXS5nZXQoY29tcG9uZW50KTtcbiAgY29uc3QgeyBnZW5lcmF0aW9uSWQsIGJpdGZsYWcsIHF1ZXJpZXMsIG5vdFF1ZXJpZXMgfSA9IGM7XG4gIHdvcmxkWyRlbnRpdHlNYXNrc11bZ2VuZXJhdGlvbklkXVtlaWRdIHw9IGJpdGZsYWc7XG4gIHF1ZXJpZXMuZm9yRWFjaCgocSkgPT4ge1xuICAgIGlmIChxLnRvUmVtb3ZlLmhhcyhlaWQpKVxuICAgICAgcS50b1JlbW92ZS5yZW1vdmUoZWlkKTtcbiAgICBjb25zdCBtYXRjaCA9IHF1ZXJ5Q2hlY2tFbnRpdHkod29ybGQsIHEsIGVpZCk7XG4gICAgaWYgKG1hdGNoKVxuICAgICAgcXVlcnlBZGRFbnRpdHkocSwgZWlkKTtcbiAgICBpZiAoIW1hdGNoKVxuICAgICAgcXVlcnlSZW1vdmVFbnRpdHkod29ybGQsIHEsIGVpZCk7XG4gIH0pO1xuICB3b3JsZFskZW50aXR5Q29tcG9uZW50c10uZ2V0KGVpZCkuYWRkKGNvbXBvbmVudCk7XG4gIGlmIChyZXNldClcbiAgICByZXNldFN0b3JlRm9yKGNvbXBvbmVudCwgZWlkKTtcbn07XG52YXIgcmVtb3ZlQ29tcG9uZW50ID0gKHdvcmxkLCBjb21wb25lbnQsIGVpZCwgcmVzZXQgPSBmYWxzZSkgPT4ge1xuICBpZiAoZWlkID09PSB2b2lkIDApXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiYml0RUNTIC0gZW50aXR5IGlzIHVuZGVmaW5lZC5cIik7XG4gIGlmICghd29ybGRbJGVudGl0eVNwYXJzZVNldF0uaGFzKGVpZCkpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiYml0RUNTIC0gZW50aXR5IGRvZXMgbm90IGV4aXN0IGluIHRoZSB3b3JsZC5cIik7XG4gIGlmICghaGFzQ29tcG9uZW50KHdvcmxkLCBjb21wb25lbnQsIGVpZCkpXG4gICAgcmV0dXJuO1xuICBjb25zdCBjID0gd29ybGRbJGNvbXBvbmVudE1hcF0uZ2V0KGNvbXBvbmVudCk7XG4gIGNvbnN0IHsgZ2VuZXJhdGlvbklkLCBiaXRmbGFnLCBxdWVyaWVzIH0gPSBjO1xuICB3b3JsZFskZW50aXR5TWFza3NdW2dlbmVyYXRpb25JZF1bZWlkXSAmPSB+Yml0ZmxhZztcbiAgcXVlcmllcy5mb3JFYWNoKChxKSA9PiB7XG4gICAgaWYgKHEudG9SZW1vdmUuaGFzKGVpZCkpXG4gICAgICBxLnRvUmVtb3ZlLnJlbW92ZShlaWQpO1xuICAgIGNvbnN0IG1hdGNoID0gcXVlcnlDaGVja0VudGl0eSh3b3JsZCwgcSwgZWlkKTtcbiAgICBpZiAobWF0Y2gpXG4gICAgICBxdWVyeUFkZEVudGl0eShxLCBlaWQpO1xuICAgIGlmICghbWF0Y2gpXG4gICAgICBxdWVyeVJlbW92ZUVudGl0eSh3b3JsZCwgcSwgZWlkKTtcbiAgfSk7XG4gIHdvcmxkWyRlbnRpdHlDb21wb25lbnRzXS5nZXQoZWlkKS5kZWxldGUoY29tcG9uZW50KTtcbiAgaWYgKHJlc2V0KVxuICAgIHJlc2V0U3RvcmVGb3IoY29tcG9uZW50LCBlaWQpO1xufTtcblxuLy8gc3JjL1dvcmxkLmpzXG52YXIgJHNpemUgPSBTeW1ib2woXCJzaXplXCIpO1xudmFyICRyZXNpemVUaHJlc2hvbGQgPSBTeW1ib2woXCJyZXNpemVUaHJlc2hvbGRcIik7XG52YXIgJGJpdGZsYWcgPSBTeW1ib2woXCJiaXRmbGFnXCIpO1xudmFyICRhcmNoZXR5cGVzID0gU3ltYm9sKFwiYXJjaGV0eXBlc1wiKTtcbnZhciAkbG9jYWxFbnRpdGllcyA9IFN5bWJvbChcImxvY2FsRW50aXRpZXNcIik7XG52YXIgJGxvY2FsRW50aXR5TG9va3VwID0gU3ltYm9sKFwibG9jYWxFbnRpdHlMb29rcFwiKTtcbnZhciB3b3JsZHMgPSBbXTtcbnZhciByZXNpemVXb3JsZHMgPSAoc2l6ZSkgPT4ge1xuICB3b3JsZHMuZm9yRWFjaCgod29ybGQpID0+IHtcbiAgICB3b3JsZFskc2l6ZV0gPSBzaXplO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29ybGRbJGVudGl0eU1hc2tzXS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbWFza3MgPSB3b3JsZFskZW50aXR5TWFza3NdW2ldO1xuICAgICAgd29ybGRbJGVudGl0eU1hc2tzXVtpXSA9IHJlc2l6ZShtYXNrcywgc2l6ZSk7XG4gICAgfVxuICAgIHdvcmxkWyRyZXNpemVUaHJlc2hvbGRdID0gd29ybGRbJHNpemVdIC0gd29ybGRbJHNpemVdIC8gNTtcbiAgfSk7XG59O1xudmFyIGNyZWF0ZVdvcmxkID0gKG9iaiA9IHt9KSA9PiB7XG4gIGNvbnN0IHdvcmxkID0gb2JqO1xuICByZXNldFdvcmxkKHdvcmxkKTtcbiAgd29ybGRzLnB1c2god29ybGQpO1xuICByZXR1cm4gd29ybGQ7XG59O1xudmFyIHJlc2V0V29ybGQgPSAod29ybGQpID0+IHtcbiAgY29uc3Qgc2l6ZSA9IGdldEdsb2JhbFNpemUoKTtcbiAgd29ybGRbJHNpemVdID0gc2l6ZTtcbiAgaWYgKHdvcmxkWyRlbnRpdHlBcnJheV0pXG4gICAgd29ybGRbJGVudGl0eUFycmF5XS5mb3JFYWNoKChlaWQpID0+IHJlbW92ZUVudGl0eSh3b3JsZCwgZWlkKSk7XG4gIHdvcmxkWyRlbnRpdHlNYXNrc10gPSBbbmV3IFVpbnQzMkFycmF5KHNpemUpXTtcbiAgd29ybGRbJGVudGl0eUNvbXBvbmVudHNdID0gbmV3IE1hcCgpO1xuICB3b3JsZFskYXJjaGV0eXBlc10gPSBbXTtcbiAgd29ybGRbJGVudGl0eVNwYXJzZVNldF0gPSBTcGFyc2VTZXQoKTtcbiAgd29ybGRbJGVudGl0eUFycmF5XSA9IHdvcmxkWyRlbnRpdHlTcGFyc2VTZXRdLmRlbnNlO1xuICB3b3JsZFskYml0ZmxhZ10gPSAxO1xuICB3b3JsZFskY29tcG9uZW50TWFwXSA9IG5ldyBNYXAoKTtcbiAgd29ybGRbJHF1ZXJ5TWFwXSA9IG5ldyBNYXAoKTtcbiAgd29ybGRbJHF1ZXJpZXNdID0gbmV3IFNldCgpO1xuICB3b3JsZFskbm90UXVlcmllc10gPSBuZXcgU2V0KCk7XG4gIHdvcmxkWyRkaXJ0eVF1ZXJpZXNdID0gbmV3IFNldCgpO1xuICB3b3JsZFskbG9jYWxFbnRpdGllc10gPSBuZXcgTWFwKCk7XG4gIHdvcmxkWyRsb2NhbEVudGl0eUxvb2t1cF0gPSBuZXcgTWFwKCk7XG4gIHJldHVybiB3b3JsZDtcbn07XG52YXIgZGVsZXRlV29ybGQgPSAod29ybGQpID0+IHtcbiAgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh3b3JsZCkuZm9yRWFjaCgoJCkgPT4ge1xuICAgIGRlbGV0ZSB3b3JsZFskXTtcbiAgfSk7XG4gIE9iamVjdC5rZXlzKHdvcmxkKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBkZWxldGUgd29ybGRba2V5XTtcbiAgfSk7XG4gIHdvcmxkcy5zcGxpY2Uod29ybGRzLmluZGV4T2Yod29ybGQpLCAxKTtcbn07XG5cbi8vIHNyYy9TeXN0ZW0uanNcbnZhciBkZWZpbmVTeXN0ZW0gPSAodXBkYXRlKSA9PiAod29ybGQsIC4uLmFyZ3MpID0+IHtcbiAgdXBkYXRlKHdvcmxkLCAuLi5hcmdzKTtcbiAgcmV0dXJuIHdvcmxkO1xufTtcblxuLy8gc3JjL2luZGV4LmpzXG52YXIgcGlwZSA9ICguLi5mbnMpID0+IChpbnB1dCkgPT4ge1xuICBsZXQgdG1wID0gaW5wdXQ7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZm5zLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgZm4gPSBmbnNbaV07XG4gICAgdG1wID0gZm4odG1wKTtcbiAgfVxuICByZXR1cm4gdG1wO1xufTtcbnZhciBUeXBlcyA9IFRZUEVTX0VOVU07XG5leHBvcnQge1xuICBDaGFuZ2VkLFxuICBERVNFUklBTElaRV9NT0RFLFxuICBOb3QsXG4gIFR5cGVzLFxuICBhZGRDb21wb25lbnQsXG4gIGFkZEVudGl0eSxcbiAgY29tbWl0UmVtb3ZhbHMsXG4gIGNyZWF0ZVdvcmxkLFxuICBkZWZpbmVDb21wb25lbnQsXG4gIGRlZmluZURlc2VyaWFsaXplcixcbiAgZGVmaW5lUXVlcnksXG4gIGRlZmluZVNlcmlhbGl6ZXIsXG4gIGRlZmluZVN5c3RlbSxcbiAgZGVsZXRlV29ybGQsXG4gIGVudGVyUXVlcnksXG4gIGV4aXRRdWVyeSxcbiAgZ2V0RW50aXR5Q29tcG9uZW50cyxcbiAgaGFzQ29tcG9uZW50LFxuICBwYXJlbnRBcnJheSxcbiAgcGlwZSxcbiAgcmVnaXN0ZXJDb21wb25lbnQsXG4gIHJlZ2lzdGVyQ29tcG9uZW50cyxcbiAgcmVtb3ZlQ29tcG9uZW50LFxuICByZW1vdmVFbnRpdHksXG4gIHJlbW92ZVF1ZXJ5LFxuICByZXNldENoYW5nZWRRdWVyeSxcbiAgcmVzZXRXb3JsZCxcbiAgc2V0RGVmYXVsdFNpemVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwXG4iLCIvKipcbiAqIFRoaXMgZmlsZSBjb25zdGFpbnMgZGVjbGFyYXRpb24gb2YgRW5naW5lIENsYXNzLlxuICpcbiAqIEBhdXRob3IgRmVybmFuZG8gU2VycmFubywgUm9iZXJ0IExvbmdcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovXG5cbmltcG9ydCB7IFBlcnNwZWN0aXZlQ2FtZXJhLCBTY2VuZSwgV2ViR0xSZW5kZXJlciwgWFJGcmFtZSwgWFJTZXNzaW9uIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBUcmFuc2Zvcm1Db21wb25lbnQgfSBmcm9tICcuLi8uLi90cmFuc2Zvcm0vY29tcG9uZW50cy9UcmFuc2Zvcm1Db21wb25lbnQnXG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tICcuL0VudGl0eSdcbmltcG9ydCB7IElucHV0VmFsdWUgfSBmcm9tICcuLi8uLi9pbnB1dC9pbnRlcmZhY2VzL0lucHV0VmFsdWUnXG5pbXBvcnQgeyBFbmdpbmVFdmVudHMgfSBmcm9tICcuL0VuZ2luZUV2ZW50cydcbmltcG9ydCB7IEluaXRpYWxpemVPcHRpb25zIH0gZnJvbSAnLi4vLi4vaW5pdGlhbGl6YXRpb25PcHRpb25zJ1xuaW1wb3J0IHsgQ1NNIH0gZnJvbSAnLi4vLi4vYXNzZXRzL2NzbS9DU00nXG5pbXBvcnQgeyBFZmZlY3RDb21wb3NlcldpdGhTY2hlbWEgfSBmcm9tICcuLi8uLi9yZW5kZXJlci9XZWJHTFJlbmRlcmVyU3lzdGVtJ1xuaW1wb3J0IHsgT3J0aG9ncmFwaGljQ2FtZXJhIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBXb3JsZCB9IGZyb20gJy4uL2NsYXNzZXMvV29ybGQnXG5pbXBvcnQgeyBVc2VySWQgfSBmcm9tICdAeHJlbmdpbmUvY29tbW9uL3NyYy9pbnRlcmZhY2VzL1VzZXJJZCdcbmltcG9ydCB7IGdldEVudGl0eUNvbXBvbmVudHMgfSBmcm9tICdiaXRlY3MnXG5cbi8qKlxuICogVGhpcyBpcyB0aGUgYmFzZSBjbGFzcyB3aGljaCBob2xkcyBhbGwgdGhlIGRhdGEgcmVsYXRlZCB0byB0aGUgc2NlbmUsIGNhbWVyYSxzeXN0ZW0gZXRjLlxuICogRGF0YSBpcyBob2xkZWQgc3RhdGljYWxseSBoZW5jZSB3aWxsIGJlIGF2YWlsYWJsZSBldmVyeXdoZXJlLlxuICpcbiAqIEBhdXRob3IgU2hhdywgSm9zaCwgVnlhY2hlc2xhdiwgR2hlcmljIGFuZCB0aGUgWFJFbmdpbmUgVGVhbVxuICovXG5leHBvcnQgY2xhc3MgRW5naW5lIHtcbiAgLyoqIFRoZSB1dWlkIG9mIHRoZSBsb2dnZWQtaW4gdXNlciAqL1xuICBwdWJsaWMgc3RhdGljIHVzZXJJZDogVXNlcklkXG5cbiAgcHVibGljIHN0YXRpYyBpbml0T3B0aW9uczogSW5pdGlhbGl6ZU9wdGlvbnNcbiAgcHVibGljIHN0YXRpYyBlbmdpbmVUaW1lcjogeyBzdGFydDogRnVuY3Rpb247IHN0b3A6IEZ1bmN0aW9uOyBjbGVhcjogRnVuY3Rpb24gfSA9IG51bGwhXG5cbiAgcHVibGljIHN0YXRpYyB4clN1cHBvcnRlZCA9IGZhbHNlXG4gIHB1YmxpYyBzdGF0aWMgaXNCb3QgPSBmYWxzZVxuXG4gIHB1YmxpYyBzdGF0aWMgb2ZmbGluZU1vZGUgPSBmYWxzZVxuICBwdWJsaWMgc3RhdGljIGlzSE1EID0gZmFsc2VcblxuICAvL3B1YmxpYyBzdGF0aWMgc3RhdHM6IFN0YXRzXG4gIC8vIE1vdmUgZm9yIHN1cmVcbiAgLy8gcHVibGljIHN0YXRpYyBza3k6IFNreTtcblxuICAvKiogSW5kaWNhdGVzIHdoZXRoZXIgZW5naW5lIGlzIGN1cnJlbnRseSBleGVjdXRpbmcgb3Igbm90LiAqL1xuICBwdWJsaWMgc3RhdGljIGlzRXhlY3V0aW5nID0gZmFsc2VcblxuICAvKipcbiAgICogRnJhbWUgcmF0ZSBmb3IgcGh5c2ljcyBzeXN0ZW0uXG4gICAqXG4gICAqIEBkZWZhdWx0IDYwXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHBoeXNpY3NGcmFtZVJhdGUgPSA2MFxuICBwdWJsaWMgc3RhdGljIHBoeXN4V29ya2VyOiBXb3JrZXIgPSBudWxsIVxuXG4gIC8qKlxuICAgKiBGcmFtZSByYXRlIGZvciBuZXR3b3JrIHN5c3RlbS5cbiAgICpcbiAgICogQGRlZmF1bHQgMjBcbiAgICovXG5cbiAgcHVibGljIHN0YXRpYyBhY2N1bXVsYXRvcjogbnVtYmVyXG4gIHB1YmxpYyBzdGF0aWMganVzdEV4ZWN1dGVkOiBib29sZWFuXG4gIHB1YmxpYyBzdGF0aWMgcGFyYW1zOiBhbnlcbiAgLyoqXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgdGltZVNjYWxlVGFyZ2V0ID0gMVxuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCB3b3JsZFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBkZWZhdWx0V29ybGQ6IFdvcmxkID0gbnVsbCFcblxuICAvKipcbiAgICogVGhlIGN1cnJlbnRseSBleGVjdXRpbmcgd29ybGRcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgY3VycmVudFdvcmxkOiBXb3JsZCB8IG51bGwgPSBudWxsXG5cbiAgLyoqXG4gICAqIEFsbCB3b3JsZHMgdGhhdCBhcmUgY3VycmVudGx5IGluc3RhbnRpYXRlZFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyB3b3JsZHM6IFdvcmxkW10gPSBbXVxuXG4gIC8qKlxuICAgKiBSZWZlcmVuY2UgdG8gdGhlIHRocmVlLmpzIHJlbmRlcmVyIG9iamVjdC5cbiAgICogVGhpcyBpcyBzZXQgaW4ge0BsaW5rIGluaXRpYWxpemUuaW5pdGlhbGl6ZUVuZ2luZSB8IGluaXRpYWxpemVFbmdpbmUoKX0uXG4gICAqL1xuICBzdGF0aWMgcmVuZGVyZXI6IFdlYkdMUmVuZGVyZXIgPSBudWxsIVxuICBzdGF0aWMgZWZmZWN0Q29tcG9zZXI6IEVmZmVjdENvbXBvc2VyV2l0aFNjaGVtYSA9IG51bGwhXG4gIHN0YXRpYyB4clJlbmRlcmVyID0gbnVsbCEgYXMgYW55XG4gIHN0YXRpYyB4clNlc3Npb246IFhSU2Vzc2lvbiA9IG51bGwhXG4gIHN0YXRpYyBjb250ZXh0ID0gbnVsbCFcbiAgc3RhdGljIGNzbTogQ1NNID0gbnVsbCFcbiAgLyoqXG4gICAqIFJlZmVyZW5jZSB0byB0aGUgdGhyZWUuanMgc2NlbmUgb2JqZWN0LlxuICAgKiBUaGlzIGlzIHNldCBpbiB7QGxpbmsgaW5pdGlhbGl6ZS5pbml0aWFsaXplRW5naW5lIHwgaW5pdGlhbGl6ZUVuZ2luZSgpfS5cbiAgICovXG4gIHN0YXRpYyBzY2VuZTogU2NlbmUgPSBudWxsIVxuICBzdGF0aWMgc2NlbmVMb2FkZWQgPSBmYWxzZVxuXG4gIC8qKlxuICAgKiBSZWZlcmVuY2UgdG8gdGhlIHRocmVlLmpzIHBlcnNwZWN0aXZlIGNhbWVyYSBvYmplY3QuXG4gICAqIFRoaXMgaXMgc2V0IGluIHtAbGluayBpbml0aWFsaXplLmluaXRpYWxpemVFbmdpbmUgfCBpbml0aWFsaXplRW5naW5lKCl9LlxuICAgKi9cbiAgc3RhdGljIGNhbWVyYTogUGVyc3BlY3RpdmVDYW1lcmEgfCBPcnRob2dyYXBoaWNDYW1lcmEgPSBudWxsIVxuICBzdGF0aWMgYWN0aXZlQ2FtZXJhRW50aXR5OiBFbnRpdHlcbiAgc3RhdGljIGFjdGl2ZUNhbWVyYUZvbGxvd1RhcmdldDogRW50aXR5IHwgbnVsbFxuXG4gIC8qKlxuICAgKiBSZWZlcmVuY2UgdG8gdGhlIFRyYW5zZm9ybSBjb21wb25lbnQgb2YgdGhlIHRocmVlLmpzIGNhbWVyYSBvYmplY3QuXG4gICAqIFRoaXMgaG9sZHMgZGF0YSByZWxhdGVkIHRvIGNhbWVyYSBwb3NpdGlvbiwgYW5nbGUgZXRjLlxuICAgKiBUaGlzIGlzIHNldCBpbiB7QGxpbmsgaW5pdGlhbGl6ZS5pbml0aWFsaXplRW5naW5lIHwgaW5pdGlhbGl6ZUVuZ2luZSgpfS5cbiAgICovXG4gIHN0YXRpYyBjYW1lcmFUcmFuc2Zvcm06IHR5cGVvZiBUcmFuc2Zvcm1Db21wb25lbnRcblxuICAvKipcbiAgICogUmVmZXJlbmNlIHRvIHRoZSBhdWRpb0xpc3RlbmVyLlxuICAgKiBUaGlzIGlzIGEgdmlydHVhbCBsaXN0bmVyIGZvciBhbGwgcG9zaXRpb25hbCBhbmQgbm9uLXBvc2l0aW9uYWwgYXVkaW8uXG4gICAqL1xuICBzdGF0aWMgYXVkaW9MaXN0ZW5lcjogYW55ID0gbnVsbFxuXG4gIC8qKlxuICAgKiBDb250cm9scyB3aGV0aGVyIGVuZ2luZSBzaG91bGQgZXhlY3V0ZSB0aGlzIGZyYW1lLlxuICAgKiBFbmdpbmUgY2FuIGJlIHBhdXNlZCBieSBzZXR0aW5nIGVuYWJsZWQgdG8gZmFsc2UuXG4gICAqIEBkZWZhdWx0IHRydWVcbiAgICovXG4gIHN0YXRpYyBlbmFibGVkID0gdHJ1ZVxuXG4gIHN0YXRpYyB0aWNrID0gMFxuXG4gIHN0YXRpYyB1c2VBdWRpb1N5c3RlbSA9IGZhbHNlXG5cbiAgc3RhdGljIGlucHV0U3RhdGUgPSBuZXcgTWFwPGFueSwgSW5wdXRWYWx1ZT4oKVxuICBzdGF0aWMgcHJldklucHV0U3RhdGUgPSBuZXcgTWFwPGFueSwgSW5wdXRWYWx1ZT4oKVxuXG4gIHN0YXRpYyBpc0luaXRpYWxpemVkID0gZmFsc2VcblxuICBzdGF0aWMgaGFzSm9pbmVkV29ybGQgPSBmYWxzZVxuXG4gIHN0YXRpYyBwdWJsaWNQYXRoOiBzdHJpbmdcblxuICBzdGF0aWMgd29ya2VycyA9IFtdIGFzIGFueVtdXG4gIHN0YXRpYyBzaW1wbGVNYXRlcmlhbHMgPSBmYWxzZVxuXG4gIHN0YXRpYyBoYXNFbmdhZ2VkID0gZmFsc2VcbiAgc3RhdGljIG1vdXNlSW5wdXRFbmFibGVkID0gdHJ1ZVxuICBzdGF0aWMga2V5Ym9hcmRJbnB1dEVuYWJsZWQgPSB0cnVlXG5cbiAgc3RhdGljIHhyRnJhbWU6IFhSRnJhbWVcbiAgc3RhdGljIHNwYXRpYWxBdWRpbyA9IGZhbHNlXG4gIHN0YXRpYyB4ckNvbnRyb2xsZXJNb2RlbCA9IHRydWVcblxuICBzdGF0aWMgZ2V0RW50aXR5Q29tcG9uZW50cyA9IGdldEVudGl0eUNvbXBvbmVudHNcbn1cblxuZXhwb3J0IGNvbnN0IGF3YWl0RW5naW5lTG9hZGVkID0gKCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcbiAgICBpZiAoRW5naW5lLmlzSW5pdGlhbGl6ZWQpIHJlc29sdmUoKVxuICAgIEVuZ2luZUV2ZW50cy5pbnN0YW5jZS5hZGRFdmVudExpc3RlbmVyKEVuZ2luZUV2ZW50cy5FVkVOVFMuSU5JVElBTElaRURfRU5HSU5FLCByZXNvbHZlKVxuICB9KVxufVxuXG5leHBvcnQgY29uc3QgYXdhaXRFbmdhZ2VkID0gKCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcbiAgICBpZiAoRW5naW5lLmhhc0VuZ2FnZWQpIHJlc29sdmUoKVxuICAgIEVuZ2luZUV2ZW50cy5pbnN0YW5jZS5hZGRFdmVudExpc3RlbmVyKEVuZ2luZUV2ZW50cy5FVkVOVFMuVVNFUl9FTkdBR0UsIHJlc29sdmUpXG4gIH0pXG59XG4iLCJpbXBvcnQgdHlwZSB7IEdMVEZQYXJzZXIgfSBmcm9tICcuLi9sb2FkZXJzL2dsdGYvR0xURkxvYWRlcidcblxuZXhwb3J0IGNsYXNzIEdMVEZSZW1vdmVNYXRlcmlhbHNFeHRlbnNpb24ge1xuICBuYW1lID0gJ0VYVF9yZW1vdmVfbWF0ZXJpYWxzJ1xuICBwYXJzZXI6IEdMVEZQYXJzZXJcbiAgY29uc3RydWN0b3IocGFyc2VyKSB7XG4gICAgdGhpcy5wYXJzZXIgPSBwYXJzZXJcbiAgfVxuICBhc3luYyBiZWZvcmVSb290KCkge1xuICAgIGNvbnN0IHBhcnNlciA9IHRoaXMucGFyc2VyXG4gICAgY29uc3QganNvbiA9IHBhcnNlci5qc29uXG4gICAganNvbi5pbWFnZXMgPSBbXVxuICAgIGpzb24udGV4dHVyZXMgPSBbXVxuICAgIGpzb24ubWF0ZXJpYWxzID0gW11cbiAgICBqc29uLnNhbXBsZXJzID0gW11cbiAgICBqc29uLm1lc2hlcy5mb3JFYWNoKChtZXNoKSA9PiB7XG4gICAgICBtZXNoLnByaW1pdGl2ZXMuZm9yRWFjaCgocHJpbWl0aXZlKSA9PiB7XG4gICAgICAgIGRlbGV0ZSBwcmltaXRpdmUubWF0ZXJpYWxcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuICBsb2FkSW1hZ2UoKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBsb2FkTWF0ZXJpYWwoKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBsb2FkVGV4dHVyZSgpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG4iLCIvKipcbiAqIEdQVSBJbnN0YW5jaW5nIEV4dGVuc2lvblxuICpcbiAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9leHRlbnNpb25zLzIuMC9WZW5kb3IvRVhUX21lc2hfZ3B1X2luc3RhbmNpbmdcbiAqXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBHTFRGUGFyc2VyIH0gZnJvbSAnLi4vbG9hZGVycy9nbHRmL0dMVEZMb2FkZXInXG5pbXBvcnQgeyBJbnN0YW5jZWRNZXNoLCBPYmplY3QzRCB9IGZyb20gJ3RocmVlJ1xuXG5leHBvcnQgY2xhc3MgR0xURkluc3RhbmNpbmdFeHRlbnNpb24ge1xuICBuYW1lID0gJ0VYVF9tZXNoX2dwdV9pbnN0YW5jaW5nJ1xuICBwYXJzZXI6IEdMVEZQYXJzZXJcbiAgY29uc3RydWN0b3IocGFyc2VyKSB7XG4gICAgdGhpcy5wYXJzZXIgPSBwYXJzZXJcbiAgfVxuXG4gIGNyZWF0ZU5vZGVNZXNoKG5vZGVJbmRleCkge1xuICAgIGNvbnN0IGpzb24gPSB0aGlzLnBhcnNlci5qc29uXG4gICAgY29uc3Qgbm9kZURlZiA9IGpzb24ubm9kZXNbbm9kZUluZGV4XVxuXG4gICAgaWYgKCFub2RlRGVmLmV4dGVuc2lvbnMgfHwgIW5vZGVEZWYuZXh0ZW5zaW9uc1t0aGlzLm5hbWVdIHx8IG5vZGVEZWYubWVzaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IGV4dGVuc2lvbkRlZiA9IG5vZGVEZWYuZXh0ZW5zaW9uc1t0aGlzLm5hbWVdXG4gICAgY29uc3QgYXR0cmlidXRlc0RlZiA9IGV4dGVuc2lvbkRlZi5hdHRyaWJ1dGVzXG5cbiAgICAvLyBAVE9ETzogU2hvdWxkIHdlIGRpcmVjdGx5IGNyZWF0ZSBJbnN0YW5jZWRNZXNoLCBub3QgZnJvbSByZWd1bGFyIE1lc2g/XG4gICAgLy8gQFRPRE86IENhbiB3ZSBzdXBwb3J0IEluc3RhbmNlZE1lc2ggKyBTa2lubmVkTWVzaD9cbiAgICBjb25zdCBwZW5kaW5nID0gW10gYXMgYW55XG4gICAgY29uc3QgYXR0cmlidXRlcyA9IHt9IGFzIGFueVxuICAgIHBlbmRpbmcucHVzaCh0aGlzLnBhcnNlci5jcmVhdGVOb2RlTWVzaChub2RlSW5kZXgpKVxuICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJpYnV0ZXNEZWYpIHtcbiAgICAgIHBlbmRpbmcucHVzaChcbiAgICAgICAgdGhpcy5wYXJzZXIuZ2V0RGVwZW5kZW5jeSgnYWNjZXNzb3InLCBhdHRyaWJ1dGVzRGVmW2tleV0pLnRoZW4oKGFjY2Vzc29yKSA9PiB7XG4gICAgICAgICAgYXR0cmlidXRlc1trZXldID0gYWNjZXNzb3JcbiAgICAgICAgICByZXR1cm4gYXR0cmlidXRlc1trZXldXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHBlbmRpbmcpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgIGNvbnN0IG1lc2ggPSByZXN1bHRzWzBdIGFzIGFueVxuXG4gICAgICAvLyBAVE9ETzogRml4IG1lLiBTdXBwb3J0IEdyb3VwICg9IGdsVEYgbXVsdGlwbGUgbWVzaC5wcmltaXRpdmVzKS5cbiAgICAgIGlmICghbWVzaC5pc01lc2gpIHtcbiAgICAgICAgcmV0dXJuIG1lc2hcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0XzEgPSByZXN1bHRzWzFdIGFzIGFueVxuICAgICAgY29uc3QgY291bnQgPSByZXN1bHRfMS5jb3VudCAvLyBBbGwgYXR0cmlidXRlIGNvdW50cyBzaG91bGQgYmUgc2FtZVxuXG4gICAgICAvLyBGb3IgV29ya2luZ1xuICAgICAgY29uc3QgbSA9IG1lc2gubWF0cml4LmNsb25lKClcbiAgICAgIGNvbnN0IHAgPSBtZXNoLnBvc2l0aW9uLmNsb25lKCkuc2V0KDAsIDAsIDApXG4gICAgICBjb25zdCBxID0gbWVzaC5xdWF0ZXJuaW9uLmNsb25lKCkuc2V0KDAsIDAsIDAsIDEpXG4gICAgICBjb25zdCBzID0gbWVzaC5zY2FsZS5jbG9uZSgpLnNldCgxLCAxLCAxKVxuXG4gICAgICBjb25zdCBpbnN0YW5jZWRNZXNoID0gbmV3IEluc3RhbmNlZE1lc2gobWVzaC5nZW9tZXRyeSwgbWVzaC5tYXRlcmlhbCwgY291bnQpXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXMuVFJBTlNMQVRJT04pIHtcbiAgICAgICAgICBwLmZyb21CdWZmZXJBdHRyaWJ1dGUoYXR0cmlidXRlcy5UUkFOU0xBVElPTiwgaSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0cmlidXRlcy5ST1RBVElPTikge1xuICAgICAgICAgIHEuZnJvbUJ1ZmZlckF0dHJpYnV0ZShhdHRyaWJ1dGVzLlJPVEFUSU9OLCBpKVxuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRyaWJ1dGVzLlNDQUxFKSB7XG4gICAgICAgICAgcy5mcm9tQnVmZmVyQXR0cmlidXRlKGF0dHJpYnV0ZXMuU0NBTEUsIGkpXG4gICAgICAgIH1cbiAgICAgICAgLy8gQFRPRE86IFN1cHBvcnQgX0lEIGFuZCBvdGhlcnNcbiAgICAgICAgaW5zdGFuY2VkTWVzaC5zZXRNYXRyaXhBdChpLCBtLmNvbXBvc2UocCwgcSwgcykpXG4gICAgICB9XG5cbiAgICAgIC8vIEp1c3QgaW4gY2FzZVxuICAgICAgT2JqZWN0M0QucHJvdG90eXBlLmNvcHkuY2FsbChpbnN0YW5jZWRNZXNoLCBtZXNoKVxuXG4gICAgICBpbnN0YW5jZWRNZXNoLmZydXN0dW1DdWxsZWQgPSBmYWxzZVxuICAgICAgdGhpcy5wYXJzZXIuYXNzaWduRmluYWxNYXRlcmlhbChpbnN0YW5jZWRNZXNoKVxuICAgICAgcmV0dXJuIGluc3RhbmNlZE1lc2hcbiAgICB9KVxuICB9XG5cbiAgbG9hZEltYWdlKCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgbG9hZE1hdGVyaWFsKCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbiAgbG9hZFRleHR1cmUoKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMTYgVGhlIERyYWNvIEF1dGhvcnMuXG4vL1xuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy9cbi8vICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vL1xuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbi8vXG4vLyAndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IEZpbGVMb2FkZXIsIEJ1ZmZlckdlb21ldHJ5LCBEZWZhdWx0TG9hZGluZ01hbmFnZXIsIEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUsIEludDE2QnVmZmVyQXR0cmlidXRlLCBJbnQzMkJ1ZmZlckF0dHJpYnV0ZSwgSW50OEJ1ZmZlckF0dHJpYnV0ZSwgVHJpYW5nbGVzRHJhd01vZGUsIFRyaWFuZ2xlU3RyaXBEcmF3TW9kZSwgVWludDE2QnVmZmVyQXR0cmlidXRlLCBVaW50MzJCdWZmZXJBdHRyaWJ1dGUsIFVpbnQ4QnVmZmVyQXR0cmlidXRlIH0gZnJvbSBcInRocmVlXCI7XG5cbmxldCBEUkFDT19ERUNPREVSXG5cbmV4cG9ydCBjb25zdCBsb2FkRFJBQ09EZWNvZGVyID0gYXN5bmMgKCkgPT4ge1xuICBpZiAodHlwZW9mIERSQUNPX0RFQ09ERVIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgY29uc3QgeyBkZWZhdWx0OiBkcmFjbzNkZ2x0ZiB9ID0gYXdhaXQgaW1wb3J0KCdkcmFjbzNkZ2x0ZicpO1xuICAgIERSQUNPX0RFQ09ERVIgPSBhd2FpdCBkcmFjbzNkZ2x0Zi5jcmVhdGVEZWNvZGVyTW9kdWxlKClcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTm9kZURSQUNPTG9hZGVyIHtcbiAgY29uc3RydWN0b3IobWFuYWdlcikge1xuICAgIHRoaXMudGltZUxvYWRlZCA9IDA7XG4gICAgdGhpcy5tYW5hZ2VyID0gbWFuYWdlciB8fCBEZWZhdWx0TG9hZGluZ01hbmFnZXI7XG4gICAgdGhpcy5tYXRlcmlhbHMgPSBudWxsO1xuICAgIHRoaXMudmVyYm9zaXR5ID0gMDtcbiAgICB0aGlzLmF0dHJpYnV0ZU9wdGlvbnMgPSB7fTtcbiAgICB0aGlzLmRyYXdNb2RlID0gVHJpYW5nbGVzRHJhd01vZGU7XG4gICAgLy8gTmF0aXZlIERyYWNvIGF0dHJpYnV0ZSB0eXBlIHRvIEpTIGF0dHJpYnV0ZSB0eXBlLlxuICAgIHRoaXMubmF0aXZlQXR0cmlidXRlTWFwID0ge1xuICAgICAgJ3Bvc2l0aW9uJzogJ1BPU0lUSU9OJyxcbiAgICAgICdub3JtYWwnOiAnTk9STUFMJyxcbiAgICAgICdjb2xvcic6ICdDT0xPUicsXG4gICAgICAndXYnOiAnVEVYX0NPT1JEJ1xuICAgIH07XG4gICAgdGhpcy5kaXNwb3NlID0gKCkgPT4geyB9XG4gIH1cblxuXG4gIGxvYWQodXJsLCBvbkxvYWQsIG9uUHJvZ3Jlc3MsIG9uRXJyb3IpIHtcbiAgICB2YXIgc2NvcGUgPSB0aGlzO1xuICAgIHZhciBsb2FkZXIgPSBuZXcgRmlsZUxvYWRlcihzY29wZS5tYW5hZ2VyKTtcbiAgICBsb2FkZXIuc2V0UGF0aCh0aGlzLnBhdGgpO1xuICAgIGxvYWRlci5zZXRSZXNwb25zZVR5cGUoJ2FycmF5YnVmZmVyJyk7XG4gICAgbG9hZGVyLmxvYWQodXJsLCBmdW5jdGlvbiAoYmxvYikge1xuICAgICAgc2NvcGUuZGVjb2RlRHJhY29GaWxlKGJsb2IsIG9uTG9hZCk7XG4gICAgfSwgb25Qcm9ncmVzcywgb25FcnJvcik7XG4gIH1cblxuICBzZXRQYXRoKHZhbHVlKSB7XG4gICAgdGhpcy5wYXRoID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBzZXRWZXJib3NpdHkobGV2ZWwpIHtcbiAgICB0aGlzLnZlcmJvc2l0eSA9IGxldmVsO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqICBTZXRzIGRlc2lyZWQgbW9kZSBmb3IgZ2VuZXJhdGVkIGdlb21ldHJ5IGluZGljZXMuXG4gICAqICBDYW4gYmUgZWl0aGVyOlxuICAgKiAgICAgIFRyaWFuZ2xlc0RyYXdNb2RlXG4gICAqICAgICAgVHJpYW5nbGVTdHJpcERyYXdNb2RlXG4gICAqL1xuICBzZXREcmF3TW9kZShkcmF3TW9kZSkge1xuICAgIHRoaXMuZHJhd01vZGUgPSBkcmF3TW9kZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTa2lwcyBkZXF1YW50aXphdGlvbiBmb3IgYSBzcGVjaWZpYyBhdHRyaWJ1dGUuXG4gICAqIHxhdHRyaWJ1dGVOYW1lfCBpcyB0aGUganMgbmFtZSBvZiB0aGUgZ2l2ZW4gYXR0cmlidXRlIHR5cGUuXG4gICAqIFRoZSBvbmx5IGN1cnJlbnRseSBzdXBwb3J0ZWQgfGF0dHJpYnV0ZU5hbWV8IGlzICdwb3NpdGlvbicsIG1vcmUgbWF5IGJlXG4gICAqIGFkZGVkIGluIGZ1dHVyZS5cbiAgICovXG4gIHNldFNraXBEZXF1YW50aXphdGlvbihhdHRyaWJ1dGVOYW1lLCBza2lwKSB7XG4gICAgdmFyIHNraXBEZXF1YW50aXphdGlvbiA9IHRydWU7XG4gICAgaWYgKHR5cGVvZiBza2lwICE9PSAndW5kZWZpbmVkJylcbiAgICAgIHNraXBEZXF1YW50aXphdGlvbiA9IHNraXA7XG4gICAgdGhpcy5nZXRBdHRyaWJ1dGVPcHRpb25zKGF0dHJpYnV0ZU5hbWUpLnNraXBEZXF1YW50aXphdGlvbiA9XG4gICAgICBza2lwRGVxdWFudGl6YXRpb247XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogRGVjb21wcmVzc2VzIGEgRHJhY28gYnVmZmVyLiBOYW1lcyBvZiBhdHRyaWJ1dGVzIChmb3IgSUQgYW5kIHR5cGUgbWFwcylcbiAgICogbXVzdCBiZSBvbmUgb2YgdGhlIHN1cHBvcnRlZCBqcyB0eXBlcywgaW5jbHVkaW5nOiBwb3NpdGlvbiwgY29sb3IsXG4gICAqIG5vcm1hbCwgdXYsIHV2Miwgc2tpbkluZGV4LCBza2luV2VpZ2h0LlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSByYXdCdWZmZXJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICogQHBhcmFtIHtPYmplY3R8dW5kZWZpbmVkfSBhdHRyaWJ1dGVVbmlxdWVJZE1hcCBQcm92aWRlcyBhIHByZS1kZWZpbmVkIElEXG4gICAqICAgICBmb3IgZWFjaCBhdHRyaWJ1dGUgaW4gdGhlIGdlb21ldHJ5IHRvIGJlIGRlY29kZWQuIElmIGdpdmVuLFxuICAgKiAgICAgYGF0dHJpYnV0ZVR5cGVNYXBgIGlzIHJlcXVpcmVkIGFuZCBgbmF0aXZlQXR0cmlidXRlTWFwYCB3aWxsIGJlXG4gICAqICAgICBpZ25vcmVkLlxuICAgKiBAcGFyYW0ge09iamVjdHx1bmRlZmluZWR9IGF0dHJpYnV0ZVR5cGVNYXAgUHJvdmlkZXMgYSBwcmVkZWZpbmVkIGRhdGFcbiAgICogICAgIHR5cGUgKGFzIGEgdHlwZWQgYXJyYXkgY29uc3RydWN0b3IpIGZvciBlYWNoIGF0dHJpYnV0ZSBpbiB0aGVcbiAgICogICAgIGdlb21ldHJ5IHRvIGJlIGRlY29kZWQuXG4gICAqL1xuICBkZWNvZGVEcmFjb0ZpbGUocmF3QnVmZmVyLCBjYWxsYmFjaywgYXR0cmlidXRlVW5pcXVlSWRNYXAsIGF0dHJpYnV0ZVR5cGVNYXApIHtcbiAgICB0aGlzLmRlY29kZURyYWNvRmlsZUludGVybmFsKHJhd0J1ZmZlciwgRFJBQ09fREVDT0RFUiwgY2FsbGJhY2ssIGF0dHJpYnV0ZVVuaXF1ZUlkTWFwLCBhdHRyaWJ1dGVUeXBlTWFwKTtcbiAgfVxuXG4gIGRlY29kZURyYWNvRmlsZUludGVybmFsKHJhd0J1ZmZlciwgZHJhY29EZWNvZGVyLCBjYWxsYmFjaywgYXR0cmlidXRlVW5pcXVlSWRNYXAsIGF0dHJpYnV0ZVR5cGVNYXApIHtcbiAgICAvKlxuICAgICAgKiBIZXJlIGlzIGhvdyB0byB1c2UgRHJhY28gSmF2YXNjcmlwdCBkZWNvZGVyIGFuZCBnZXQgdGhlIGdlb21ldHJ5LlxuICAgICAgKi9cbiAgICB2YXIgYnVmZmVyID0gbmV3IGRyYWNvRGVjb2Rlci5EZWNvZGVyQnVmZmVyKCk7XG4gICAgYnVmZmVyLkluaXQobmV3IEludDhBcnJheShyYXdCdWZmZXIpLCByYXdCdWZmZXIuYnl0ZUxlbmd0aCk7XG4gICAgdmFyIGRlY29kZXIgPSBuZXcgZHJhY29EZWNvZGVyLkRlY29kZXIoKTtcblxuICAgIC8qXG4gICAgICAqIERldGVybWluZSB3aGF0IHR5cGUgaXMgdGhpcyBmaWxlOiBtZXNoIG9yIHBvaW50IGNsb3VkLlxuICAgICAgKi9cbiAgICB2YXIgZ2VvbWV0cnlUeXBlID0gZGVjb2Rlci5HZXRFbmNvZGVkR2VvbWV0cnlUeXBlKGJ1ZmZlcik7XG4gICAgaWYgKGdlb21ldHJ5VHlwZSA9PSBkcmFjb0RlY29kZXIuVFJJQU5HVUxBUl9NRVNIKSB7XG4gICAgICBpZiAodGhpcy52ZXJib3NpdHkgPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdMb2FkZWQgYSBtZXNoLicpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZ2VvbWV0cnlUeXBlID09IGRyYWNvRGVjb2Rlci5QT0lOVF9DTE9VRCkge1xuICAgICAgaWYgKHRoaXMudmVyYm9zaXR5ID4gMCkge1xuICAgICAgICBjb25zb2xlLmxvZygnTG9hZGVkIGEgcG9pbnQgY2xvdWQuJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBlcnJvck1zZyA9ICdOb2RlRFJBQ09Mb2FkZXI6IFVua25vd24gZ2VvbWV0cnkgdHlwZS4nO1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvck1zZyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNc2cpO1xuICAgIH1cbiAgICBjYWxsYmFjayh0aGlzLmNvbnZlcnREcmFjb0dlb21ldHJ5VG8zSlMoZHJhY29EZWNvZGVyLCBkZWNvZGVyLFxuICAgICAgZ2VvbWV0cnlUeXBlLCBidWZmZXIsIGF0dHJpYnV0ZVVuaXF1ZUlkTWFwLCBhdHRyaWJ1dGVUeXBlTWFwKSk7XG4gIH1cblxuICBhZGRBdHRyaWJ1dGVUb0dlb21ldHJ5KGRyYWNvRGVjb2RlciwgZGVjb2RlciwgZHJhY29HZW9tZXRyeSxcbiAgICBhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVUeXBlLCBhdHRyaWJ1dGUsXG4gICAgZ2VvbWV0cnksIGdlb21ldHJ5QnVmZmVyKSB7XG4gICAgaWYgKGF0dHJpYnV0ZS5wdHIgPT09IDApIHtcbiAgICAgIHZhciBlcnJvck1zZyA9ICdOb2RlRFJBQ09Mb2FkZXI6IE5vIGF0dHJpYnV0ZSAnICsgYXR0cmlidXRlTmFtZTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JNc2cpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTXNnKTtcbiAgICB9XG5cbiAgICB2YXIgbnVtQ29tcG9uZW50cyA9IGF0dHJpYnV0ZS5udW1fY29tcG9uZW50cygpO1xuICAgIHZhciBudW1Qb2ludHMgPSBkcmFjb0dlb21ldHJ5Lm51bV9wb2ludHMoKTtcbiAgICB2YXIgbnVtVmFsdWVzID0gbnVtUG9pbnRzICogbnVtQ29tcG9uZW50cztcbiAgICB2YXIgYXR0cmlidXRlRGF0YTtcbiAgICB2YXIgVHlwZWRCdWZmZXJBdHRyaWJ1dGU7XG5cbiAgICBzd2l0Y2ggKGF0dHJpYnV0ZVR5cGUpIHtcblxuICAgICAgY2FzZSBGbG9hdDMyQXJyYXk6XG4gICAgICAgIGF0dHJpYnV0ZURhdGEgPSBuZXcgZHJhY29EZWNvZGVyLkRyYWNvRmxvYXQzMkFycmF5KCk7XG4gICAgICAgIGRlY29kZXIuR2V0QXR0cmlidXRlRmxvYXRGb3JBbGxQb2ludHMoXG4gICAgICAgICAgZHJhY29HZW9tZXRyeSwgYXR0cmlidXRlLCBhdHRyaWJ1dGVEYXRhKTtcbiAgICAgICAgZ2VvbWV0cnlCdWZmZXJbYXR0cmlidXRlTmFtZV0gPSBuZXcgRmxvYXQzMkFycmF5KG51bVZhbHVlcyk7XG4gICAgICAgIFR5cGVkQnVmZmVyQXR0cmlidXRlID0gRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgSW50OEFycmF5OlxuICAgICAgICBhdHRyaWJ1dGVEYXRhID0gbmV3IGRyYWNvRGVjb2Rlci5EcmFjb0ludDhBcnJheSgpO1xuICAgICAgICBkZWNvZGVyLkdldEF0dHJpYnV0ZUludDhGb3JBbGxQb2ludHMoXG4gICAgICAgICAgZHJhY29HZW9tZXRyeSwgYXR0cmlidXRlLCBhdHRyaWJ1dGVEYXRhKTtcbiAgICAgICAgZ2VvbWV0cnlCdWZmZXJbYXR0cmlidXRlTmFtZV0gPSBuZXcgSW50OEFycmF5KG51bVZhbHVlcyk7XG4gICAgICAgIFR5cGVkQnVmZmVyQXR0cmlidXRlID0gSW50OEJ1ZmZlckF0dHJpYnV0ZTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgSW50MTZBcnJheTpcbiAgICAgICAgYXR0cmlidXRlRGF0YSA9IG5ldyBkcmFjb0RlY29kZXIuRHJhY29JbnQxNkFycmF5KCk7XG4gICAgICAgIGRlY29kZXIuR2V0QXR0cmlidXRlSW50MTZGb3JBbGxQb2ludHMoXG4gICAgICAgICAgZHJhY29HZW9tZXRyeSwgYXR0cmlidXRlLCBhdHRyaWJ1dGVEYXRhKTtcbiAgICAgICAgZ2VvbWV0cnlCdWZmZXJbYXR0cmlidXRlTmFtZV0gPSBuZXcgSW50MTZBcnJheShudW1WYWx1ZXMpO1xuICAgICAgICBUeXBlZEJ1ZmZlckF0dHJpYnV0ZSA9IEludDE2QnVmZmVyQXR0cmlidXRlO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBJbnQzMkFycmF5OlxuICAgICAgICBhdHRyaWJ1dGVEYXRhID0gbmV3IGRyYWNvRGVjb2Rlci5EcmFjb0ludDMyQXJyYXkoKTtcbiAgICAgICAgZGVjb2Rlci5HZXRBdHRyaWJ1dGVJbnQzMkZvckFsbFBvaW50cyhcbiAgICAgICAgICBkcmFjb0dlb21ldHJ5LCBhdHRyaWJ1dGUsIGF0dHJpYnV0ZURhdGEpO1xuICAgICAgICBnZW9tZXRyeUJ1ZmZlclthdHRyaWJ1dGVOYW1lXSA9IG5ldyBJbnQzMkFycmF5KG51bVZhbHVlcyk7XG4gICAgICAgIFR5cGVkQnVmZmVyQXR0cmlidXRlID0gSW50MzJCdWZmZXJBdHRyaWJ1dGU7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFVpbnQ4QXJyYXk6XG4gICAgICAgIGF0dHJpYnV0ZURhdGEgPSBuZXcgZHJhY29EZWNvZGVyLkRyYWNvVUludDhBcnJheSgpO1xuICAgICAgICBkZWNvZGVyLkdldEF0dHJpYnV0ZVVJbnQ4Rm9yQWxsUG9pbnRzKFxuICAgICAgICAgIGRyYWNvR2VvbWV0cnksIGF0dHJpYnV0ZSwgYXR0cmlidXRlRGF0YSk7XG4gICAgICAgIGdlb21ldHJ5QnVmZmVyW2F0dHJpYnV0ZU5hbWVdID0gbmV3IFVpbnQ4QXJyYXkobnVtVmFsdWVzKTtcbiAgICAgICAgVHlwZWRCdWZmZXJBdHRyaWJ1dGUgPSBVaW50OEJ1ZmZlckF0dHJpYnV0ZTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgVWludDE2QXJyYXk6XG4gICAgICAgIGF0dHJpYnV0ZURhdGEgPSBuZXcgZHJhY29EZWNvZGVyLkRyYWNvVUludDE2QXJyYXkoKTtcbiAgICAgICAgZGVjb2Rlci5HZXRBdHRyaWJ1dGVVSW50MTZGb3JBbGxQb2ludHMoXG4gICAgICAgICAgZHJhY29HZW9tZXRyeSwgYXR0cmlidXRlLCBhdHRyaWJ1dGVEYXRhKTtcbiAgICAgICAgZ2VvbWV0cnlCdWZmZXJbYXR0cmlidXRlTmFtZV0gPSBuZXcgVWludDE2QXJyYXkobnVtVmFsdWVzKTtcbiAgICAgICAgVHlwZWRCdWZmZXJBdHRyaWJ1dGUgPSBVaW50MTZCdWZmZXJBdHRyaWJ1dGU7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFVpbnQzMkFycmF5OlxuICAgICAgICBhdHRyaWJ1dGVEYXRhID0gbmV3IGRyYWNvRGVjb2Rlci5EcmFjb1VJbnQzMkFycmF5KCk7XG4gICAgICAgIGRlY29kZXIuR2V0QXR0cmlidXRlVUludDMyRm9yQWxsUG9pbnRzKFxuICAgICAgICAgIGRyYWNvR2VvbWV0cnksIGF0dHJpYnV0ZSwgYXR0cmlidXRlRGF0YSk7XG4gICAgICAgIGdlb21ldHJ5QnVmZmVyW2F0dHJpYnV0ZU5hbWVdID0gbmV3IFVpbnQzMkFycmF5KG51bVZhbHVlcyk7XG4gICAgICAgIFR5cGVkQnVmZmVyQXR0cmlidXRlID0gVWludDMyQnVmZmVyQXR0cmlidXRlO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdmFyIGVycm9yTXNnID0gJ05vZGVEUkFDT0xvYWRlcjogVW5leHBlY3RlZCBhdHRyaWJ1dGUgdHlwZS4nO1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yTXNnKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTXNnKTtcblxuICAgIH1cblxuICAgIC8vIENvcHkgZGF0YSBmcm9tIGRlY29kZXIuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1WYWx1ZXM7IGkrKykge1xuICAgICAgZ2VvbWV0cnlCdWZmZXJbYXR0cmlidXRlTmFtZV1baV0gPSBhdHRyaWJ1dGVEYXRhLkdldFZhbHVlKGkpO1xuICAgIH1cbiAgICAvLyBBZGQgYXR0cmlidXRlIHRvIFRIUkVFSlMgZ2VvbWV0cnkgZm9yIHJlbmRlcmluZy5cbiAgICBnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSxcbiAgICAgIG5ldyBUeXBlZEJ1ZmZlckF0dHJpYnV0ZShnZW9tZXRyeUJ1ZmZlclthdHRyaWJ1dGVOYW1lXSxcbiAgICAgICAgbnVtQ29tcG9uZW50cykpO1xuICAgIGRyYWNvRGVjb2Rlci5kZXN0cm95KGF0dHJpYnV0ZURhdGEpO1xuICB9XG5cbiAgY29udmVydERyYWNvR2VvbWV0cnlUbzNKUyhkcmFjb0RlY29kZXIsIGRlY29kZXIsIGdlb21ldHJ5VHlwZSxcbiAgICBidWZmZXIsIGF0dHJpYnV0ZVVuaXF1ZUlkTWFwLFxuICAgIGF0dHJpYnV0ZVR5cGVNYXApIHtcbiAgICAvLyBUT0RPOiBTaG91bGQgbm90IGFzc3VtZSBuYXRpdmUgRHJhY28gYXR0cmlidXRlIElEcyBhcHBseS5cbiAgICBpZiAodGhpcy5nZXRBdHRyaWJ1dGVPcHRpb25zKCdwb3NpdGlvbicpLnNraXBEZXF1YW50aXphdGlvbiA9PT0gdHJ1ZSkge1xuICAgICAgZGVjb2Rlci5Ta2lwQXR0cmlidXRlVHJhbnNmb3JtKGRyYWNvRGVjb2Rlci5QT1NJVElPTik7XG4gICAgfVxuICAgIHZhciBkcmFjb0dlb21ldHJ5O1xuICAgIHZhciBkZWNvZGluZ1N0YXR1cztcbiAgICAvLyB2YXIgc3RhcnRfdGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIGlmIChnZW9tZXRyeVR5cGUgPT09IGRyYWNvRGVjb2Rlci5UUklBTkdVTEFSX01FU0gpIHtcbiAgICAgIGRyYWNvR2VvbWV0cnkgPSBuZXcgZHJhY29EZWNvZGVyLk1lc2goKTtcbiAgICAgIGRlY29kaW5nU3RhdHVzID0gZGVjb2Rlci5EZWNvZGVCdWZmZXJUb01lc2goYnVmZmVyLCBkcmFjb0dlb21ldHJ5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZHJhY29HZW9tZXRyeSA9IG5ldyBkcmFjb0RlY29kZXIuUG9pbnRDbG91ZCgpO1xuICAgICAgZGVjb2RpbmdTdGF0dXMgPVxuICAgICAgICBkZWNvZGVyLkRlY29kZUJ1ZmZlclRvUG9pbnRDbG91ZChidWZmZXIsIGRyYWNvR2VvbWV0cnkpO1xuICAgIH1cbiAgICBpZiAoIWRlY29kaW5nU3RhdHVzLm9rKCkgfHwgZHJhY29HZW9tZXRyeS5wdHIgPT0gMCkge1xuICAgICAgdmFyIGVycm9yTXNnID0gJ05vZGVEUkFDT0xvYWRlcjogRGVjb2RpbmcgZmFpbGVkOiAnO1xuICAgICAgZXJyb3JNc2cgKz0gZGVjb2RpbmdTdGF0dXMuZXJyb3JfbXNnKCk7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yTXNnKTtcbiAgICAgIGRyYWNvRGVjb2Rlci5kZXN0cm95KGRlY29kZXIpO1xuICAgICAgZHJhY29EZWNvZGVyLmRlc3Ryb3koZHJhY29HZW9tZXRyeSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNc2cpO1xuICAgIH1cblxuICAgIC8vIHZhciBkZWNvZGVfZW5kID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgZHJhY29EZWNvZGVyLmRlc3Ryb3koYnVmZmVyKTtcbiAgICAvKlxuICAgICAgKiBFeGFtcGxlIG9uIGhvdyB0byByZXRyaWV2ZSBtZXNoIGFuZCBhdHRyaWJ1dGVzLlxuICAgICAgKi9cbiAgICB2YXIgbnVtRmFjZXM7XG4gICAgaWYgKGdlb21ldHJ5VHlwZSA9PSBkcmFjb0RlY29kZXIuVFJJQU5HVUxBUl9NRVNIKSB7XG4gICAgICBudW1GYWNlcyA9IGRyYWNvR2VvbWV0cnkubnVtX2ZhY2VzKCk7XG4gICAgICBpZiAodGhpcy52ZXJib3NpdHkgPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdOdW1iZXIgb2YgZmFjZXMgbG9hZGVkOiAnICsgbnVtRmFjZXMudG9TdHJpbmcoKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG51bUZhY2VzID0gMDtcbiAgICB9XG5cbiAgICB2YXIgbnVtUG9pbnRzID0gZHJhY29HZW9tZXRyeS5udW1fcG9pbnRzKCk7XG4gICAgdmFyIG51bUF0dHJpYnV0ZXMgPSBkcmFjb0dlb21ldHJ5Lm51bV9hdHRyaWJ1dGVzKCk7XG4gICAgaWYgKHRoaXMudmVyYm9zaXR5ID4gMCkge1xuICAgICAgY29uc29sZS5sb2coJ051bWJlciBvZiBwb2ludHMgbG9hZGVkOiAnICsgbnVtUG9pbnRzLnRvU3RyaW5nKCkpO1xuICAgICAgY29uc29sZS5sb2coJ051bWJlciBvZiBhdHRyaWJ1dGVzIGxvYWRlZDogJyArXG4gICAgICAgIG51bUF0dHJpYnV0ZXMudG9TdHJpbmcoKSk7XG4gICAgfVxuXG4gICAgLy8gVmVyaWZ5IGlmIHRoZXJlIGlzIHBvc2l0aW9uIGF0dHJpYnV0ZS5cbiAgICAvLyBUT0RPOiBTaG91bGQgbm90IGFzc3VtZSBuYXRpdmUgRHJhY28gYXR0cmlidXRlIElEcyBhcHBseS5cbiAgICB2YXIgcG9zQXR0SWQgPSBkZWNvZGVyLkdldEF0dHJpYnV0ZUlkKGRyYWNvR2VvbWV0cnksXG4gICAgICBkcmFjb0RlY29kZXIuUE9TSVRJT04pO1xuICAgIGlmIChwb3NBdHRJZCA9PSAtMSkge1xuICAgICAgdmFyIGVycm9yTXNnID0gJ05vZGVEUkFDT0xvYWRlcjogTm8gcG9zaXRpb24gYXR0cmlidXRlIGZvdW5kLic7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yTXNnKTtcbiAgICAgIGRyYWNvRGVjb2Rlci5kZXN0cm95KGRlY29kZXIpO1xuICAgICAgZHJhY29EZWNvZGVyLmRlc3Ryb3koZHJhY29HZW9tZXRyeSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNc2cpO1xuICAgIH1cbiAgICB2YXIgcG9zQXR0cmlidXRlID0gZGVjb2Rlci5HZXRBdHRyaWJ1dGUoZHJhY29HZW9tZXRyeSwgcG9zQXR0SWQpO1xuXG4gICAgLy8gU3RydWN0dXJlIGZvciBjb252ZXJ0aW5nIHRvIFRIUkVFSlMgZ2VvbWV0cnkgbGF0ZXIuXG4gICAgdmFyIGdlb21ldHJ5QnVmZmVyID0ge307XG4gICAgLy8gSW1wb3J0IGRhdGEgdG8gVGhyZWUgSlMgZ2VvbWV0cnkuXG4gICAgdmFyIGdlb21ldHJ5ID0gbmV3IEJ1ZmZlckdlb21ldHJ5KCk7XG5cbiAgICAvLyBEbyBub3QgdXNlIGJvdGggdGhlIG5hdGl2ZSBhdHRyaWJ1dGUgbWFwIGFuZCBhIHByb3ZpZGVkIChlLmcuIGdsVEYpIG1hcC5cbiAgICBpZiAoYXR0cmlidXRlVW5pcXVlSWRNYXApIHtcblxuICAgICAgLy8gQWRkIGF0dHJpYnV0ZXMgb2YgdXNlciBzcGVjaWZpZWQgdW5pcXVlIGlkLiBFLmcuIEdMVEYgbW9kZWxzLlxuICAgICAgZm9yICh2YXIgYXR0cmlidXRlTmFtZSBpbiBhdHRyaWJ1dGVVbmlxdWVJZE1hcCkge1xuICAgICAgICB2YXIgYXR0cmlidXRlVHlwZSA9IGF0dHJpYnV0ZVR5cGVNYXBbYXR0cmlidXRlTmFtZV07XG4gICAgICAgIHZhciBhdHRyaWJ1dGVJZCA9IGF0dHJpYnV0ZVVuaXF1ZUlkTWFwW2F0dHJpYnV0ZU5hbWVdO1xuICAgICAgICB2YXIgYXR0cmlidXRlID0gZGVjb2Rlci5HZXRBdHRyaWJ1dGVCeVVuaXF1ZUlkKGRyYWNvR2VvbWV0cnksXG4gICAgICAgICAgYXR0cmlidXRlSWQpO1xuICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZVRvR2VvbWV0cnkoZHJhY29EZWNvZGVyLCBkZWNvZGVyLCBkcmFjb0dlb21ldHJ5LFxuICAgICAgICAgIGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVR5cGUsIGF0dHJpYnV0ZSwgZ2VvbWV0cnksIGdlb21ldHJ5QnVmZmVyKTtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG5cbiAgICAgIC8vIEFkZCBuYXRpdmUgRHJhY28gYXR0cmlidXRlIHR5cGUgdG8gZ2VvbWV0cnkuXG4gICAgICBmb3IgKHZhciBhdHRyaWJ1dGVOYW1lIGluIHRoaXMubmF0aXZlQXR0cmlidXRlTWFwKSB7XG4gICAgICAgIHZhciBhdHRJZCA9IGRlY29kZXIuR2V0QXR0cmlidXRlSWQoZHJhY29HZW9tZXRyeSxcbiAgICAgICAgICBkcmFjb0RlY29kZXJbdGhpcy5uYXRpdmVBdHRyaWJ1dGVNYXBbYXR0cmlidXRlTmFtZV1dKTtcbiAgICAgICAgaWYgKGF0dElkICE9PSAtMSkge1xuICAgICAgICAgIGlmICh0aGlzLnZlcmJvc2l0eSA+IDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMb2FkZWQgJyArIGF0dHJpYnV0ZU5hbWUgKyAnIGF0dHJpYnV0ZS4nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IGRlY29kZXIuR2V0QXR0cmlidXRlKGRyYWNvR2VvbWV0cnksIGF0dElkKTtcbiAgICAgICAgICB0aGlzLmFkZEF0dHJpYnV0ZVRvR2VvbWV0cnkoZHJhY29EZWNvZGVyLCBkZWNvZGVyLCBkcmFjb0dlb21ldHJ5LFxuICAgICAgICAgICAgYXR0cmlidXRlTmFtZSwgRmxvYXQzMkFycmF5LCBhdHRyaWJ1dGUsIGdlb21ldHJ5LCBnZW9tZXRyeUJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH1cblxuICAgIC8vIEZvciBtZXNoLCB3ZSBuZWVkIHRvIGdlbmVyYXRlIHRoZSBmYWNlcy5cbiAgICBpZiAoZ2VvbWV0cnlUeXBlID09IGRyYWNvRGVjb2Rlci5UUklBTkdVTEFSX01FU0gpIHtcbiAgICAgIGlmICh0aGlzLmRyYXdNb2RlID09PSBUcmlhbmdsZVN0cmlwRHJhd01vZGUpIHtcbiAgICAgICAgdmFyIHN0cmlwc0FycmF5ID0gbmV3IGRyYWNvRGVjb2Rlci5EcmFjb0ludDMyQXJyYXkoKTtcbiAgICAgICAgdmFyIG51bVN0cmlwcyA9IGRlY29kZXIuR2V0VHJpYW5nbGVTdHJpcHNGcm9tTWVzaChcbiAgICAgICAgICBkcmFjb0dlb21ldHJ5LCBzdHJpcHNBcnJheSk7XG4gICAgICAgIGdlb21ldHJ5QnVmZmVyLmluZGljZXMgPSBuZXcgVWludDMyQXJyYXkoc3RyaXBzQXJyYXkuc2l6ZSgpKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpcHNBcnJheS5zaXplKCk7ICsraSkge1xuICAgICAgICAgIGdlb21ldHJ5QnVmZmVyLmluZGljZXNbaV0gPSBzdHJpcHNBcnJheS5HZXRWYWx1ZShpKTtcbiAgICAgICAgfVxuICAgICAgICBkcmFjb0RlY29kZXIuZGVzdHJveShzdHJpcHNBcnJheSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbnVtSW5kaWNlcyA9IG51bUZhY2VzICogMztcbiAgICAgICAgZ2VvbWV0cnlCdWZmZXIuaW5kaWNlcyA9IG5ldyBVaW50MzJBcnJheShudW1JbmRpY2VzKTtcbiAgICAgICAgdmFyIGlhID0gbmV3IGRyYWNvRGVjb2Rlci5EcmFjb0ludDMyQXJyYXkoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1GYWNlczsgKytpKSB7XG4gICAgICAgICAgZGVjb2Rlci5HZXRGYWNlRnJvbU1lc2goZHJhY29HZW9tZXRyeSwgaSwgaWEpO1xuICAgICAgICAgIHZhciBpbmRleCA9IGkgKiAzO1xuICAgICAgICAgIGdlb21ldHJ5QnVmZmVyLmluZGljZXNbaW5kZXhdID0gaWEuR2V0VmFsdWUoMCk7XG4gICAgICAgICAgZ2VvbWV0cnlCdWZmZXIuaW5kaWNlc1tpbmRleCArIDFdID0gaWEuR2V0VmFsdWUoMSk7XG4gICAgICAgICAgZ2VvbWV0cnlCdWZmZXIuaW5kaWNlc1tpbmRleCArIDJdID0gaWEuR2V0VmFsdWUoMik7XG4gICAgICAgIH1cbiAgICAgICAgZHJhY29EZWNvZGVyLmRlc3Ryb3koaWEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGdlb21ldHJ5LmRyYXdNb2RlID0gdGhpcy5kcmF3TW9kZTtcbiAgICBpZiAoZ2VvbWV0cnlUeXBlID09IGRyYWNvRGVjb2Rlci5UUklBTkdVTEFSX01FU0gpIHtcbiAgICAgIGdlb21ldHJ5LnNldEluZGV4KG5ldyAoZ2VvbWV0cnlCdWZmZXIuaW5kaWNlcy5sZW5ndGggPiA2NTUzNSA/XG4gICAgICAgIFVpbnQzMkJ1ZmZlckF0dHJpYnV0ZSA6IFVpbnQxNkJ1ZmZlckF0dHJpYnV0ZSlcbiAgICAgICAgKGdlb21ldHJ5QnVmZmVyLmluZGljZXMsIDEpKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBTaG91bGQgbm90IGFzc3VtZSBuYXRpdmUgRHJhY28gYXR0cmlidXRlIElEcyBhcHBseS5cbiAgICAvLyBUT0RPOiBDYW4gb3RoZXIgYXR0cmlidXRlIHR5cGVzIGJlIHF1YW50aXplZD9cbiAgICB2YXIgcG9zVHJhbnNmb3JtID0gbmV3IGRyYWNvRGVjb2Rlci5BdHRyaWJ1dGVRdWFudGl6YXRpb25UcmFuc2Zvcm0oKTtcbiAgICBpZiAocG9zVHJhbnNmb3JtLkluaXRGcm9tQXR0cmlidXRlKHBvc0F0dHJpYnV0ZSkpIHtcbiAgICAgIC8vIFF1YW50aXplZCBhdHRyaWJ1dGUuIFN0b3JlIHRoZSBxdWFudGl6YXRpb24gcGFyYW1ldGVycyBpbnRvIHRoZVxuICAgICAgLy8ganMgYXR0cmlidXRlLlxuICAgICAgZ2VvbWV0cnkuYXR0cmlidXRlc1sncG9zaXRpb24nXS5pc1F1YW50aXplZCA9IHRydWU7XG4gICAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzWydwb3NpdGlvbiddLm1heFJhbmdlID0gcG9zVHJhbnNmb3JtLnJhbmdlKCk7XG4gICAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzWydwb3NpdGlvbiddLm51bVF1YW50aXphdGlvbkJpdHMgPVxuICAgICAgICBwb3NUcmFuc2Zvcm0ucXVhbnRpemF0aW9uX2JpdHMoKTtcbiAgICAgIGdlb21ldHJ5LmF0dHJpYnV0ZXNbJ3Bvc2l0aW9uJ10ubWluVmFsdWVzID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgKytpKSB7XG4gICAgICAgIGdlb21ldHJ5LmF0dHJpYnV0ZXNbJ3Bvc2l0aW9uJ10ubWluVmFsdWVzW2ldID1cbiAgICAgICAgICBwb3NUcmFuc2Zvcm0ubWluX3ZhbHVlKGkpO1xuICAgICAgfVxuICAgIH1cbiAgICBkcmFjb0RlY29kZXIuZGVzdHJveShwb3NUcmFuc2Zvcm0pO1xuICAgIGRyYWNvRGVjb2Rlci5kZXN0cm95KGRlY29kZXIpO1xuICAgIGRyYWNvRGVjb2Rlci5kZXN0cm95KGRyYWNvR2VvbWV0cnkpO1xuXG4gICAgLy8gdGhpcy5kZWNvZGVfdGltZSA9IGRlY29kZV9lbmQgLSBzdGFydF90aW1lO1xuICAgIC8vIHRoaXMuaW1wb3J0X3RpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIGRlY29kZV9lbmQ7XG5cbiAgICAvLyBpZiAodGhpcy52ZXJib3NpdHkgPiAwKSB7XG4gICAgLy8gICBjb25zb2xlLmxvZygnRGVjb2RlIHRpbWU6ICcgKyB0aGlzLmRlY29kZV90aW1lKTtcbiAgICAvLyAgIGNvbnNvbGUubG9nKCdJbXBvcnQgdGltZTogJyArIHRoaXMuaW1wb3J0X3RpbWUpO1xuICAgIC8vIH1cbiAgICByZXR1cm4gZ2VvbWV0cnk7XG4gIH1cblxuICBpc1ZlcnNpb25TdXBwb3J0ZWQodmVyc2lvbiwgY2FsbGJhY2spIHtcbiAgICBjYWxsYmFjayhEUkFDT19ERUNPREVSLmlzVmVyc2lvblN1cHBvcnRlZCh2ZXJzaW9uKSk7XG4gIH1cblxuICBnZXRBdHRyaWJ1dGVPcHRpb25zKGF0dHJpYnV0ZU5hbWUpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuYXR0cmlidXRlT3B0aW9uc1thdHRyaWJ1dGVOYW1lXSA9PT0gJ3VuZGVmaW5lZCcpXG4gICAgICB0aGlzLmF0dHJpYnV0ZU9wdGlvbnNbYXR0cmlidXRlTmFtZV0gPSB7fTtcbiAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVPcHRpb25zW2F0dHJpYnV0ZU5hbWVdO1xuICB9XG59XG4iLCJpbXBvcnQge1xuXHRCdWZmZXJBdHRyaWJ1dGUsXG5cdEJ1ZmZlckdlb21ldHJ5LFxuXHRGaWxlTG9hZGVyLFxuXHRMb2FkZXJcbn0gZnJvbSAndGhyZWUnO1xuXG5jb25zdCBfdGFza0NhY2hlID0gbmV3IFdlYWtNYXAoKTtcblxuY2xhc3MgRFJBQ09Mb2FkZXIgZXh0ZW5kcyBMb2FkZXIge1xuXG5cdGNvbnN0cnVjdG9yKCBtYW5hZ2VyICkge1xuXG5cdFx0c3VwZXIoIG1hbmFnZXIgKTtcblxuXHRcdHRoaXMuZGVjb2RlclBhdGggPSAnJztcblx0XHR0aGlzLmRlY29kZXJDb25maWcgPSB7fTtcblx0XHR0aGlzLmRlY29kZXJCaW5hcnkgPSBudWxsO1xuXHRcdHRoaXMuZGVjb2RlclBlbmRpbmcgPSBudWxsO1xuXG5cdFx0dGhpcy53b3JrZXJMaW1pdCA9IDQ7XG5cdFx0dGhpcy53b3JrZXJQb29sID0gW107XG5cdFx0dGhpcy53b3JrZXJOZXh0VGFza0lEID0gMTtcblx0XHR0aGlzLndvcmtlclNvdXJjZVVSTCA9ICcnO1xuXG5cdFx0dGhpcy5kZWZhdWx0QXR0cmlidXRlSURzID0ge1xuXHRcdFx0cG9zaXRpb246ICdQT1NJVElPTicsXG5cdFx0XHRub3JtYWw6ICdOT1JNQUwnLFxuXHRcdFx0Y29sb3I6ICdDT0xPUicsXG5cdFx0XHR1djogJ1RFWF9DT09SRCdcblx0XHR9O1xuXHRcdHRoaXMuZGVmYXVsdEF0dHJpYnV0ZVR5cGVzID0ge1xuXHRcdFx0cG9zaXRpb246ICdGbG9hdDMyQXJyYXknLFxuXHRcdFx0bm9ybWFsOiAnRmxvYXQzMkFycmF5Jyxcblx0XHRcdGNvbG9yOiAnRmxvYXQzMkFycmF5Jyxcblx0XHRcdHV2OiAnRmxvYXQzMkFycmF5J1xuXHRcdH07XG5cblx0fVxuXG5cdHNldERlY29kZXJQYXRoKCBwYXRoICkge1xuXG5cdFx0dGhpcy5kZWNvZGVyUGF0aCA9IHBhdGg7XG5cblx0XHRyZXR1cm4gdGhpcztcblxuXHR9XG5cblx0c2V0RGVjb2RlckNvbmZpZyggY29uZmlnICkge1xuXG5cdFx0dGhpcy5kZWNvZGVyQ29uZmlnID0gY29uZmlnO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fVxuXG5cdHNldFdvcmtlckxpbWl0KCB3b3JrZXJMaW1pdCApIHtcblxuXHRcdHRoaXMud29ya2VyTGltaXQgPSB3b3JrZXJMaW1pdDtcblxuXHRcdHJldHVybiB0aGlzO1xuXG5cdH1cblxuXHRsb2FkKCB1cmwsIG9uTG9hZCwgb25Qcm9ncmVzcywgb25FcnJvciApIHtcblxuXHRcdGNvbnN0IGxvYWRlciA9IG5ldyBGaWxlTG9hZGVyKCB0aGlzLm1hbmFnZXIgKTtcblxuXHRcdGxvYWRlci5zZXRQYXRoKCB0aGlzLnBhdGggKTtcblx0XHRsb2FkZXIuc2V0UmVzcG9uc2VUeXBlKCAnYXJyYXlidWZmZXInICk7XG5cdFx0bG9hZGVyLnNldFJlcXVlc3RIZWFkZXIoIHRoaXMucmVxdWVzdEhlYWRlciApO1xuXHRcdGxvYWRlci5zZXRXaXRoQ3JlZGVudGlhbHMoIHRoaXMud2l0aENyZWRlbnRpYWxzICk7XG5cblx0XHRsb2FkZXIubG9hZCggdXJsLCAoIGJ1ZmZlciApID0+IHtcblxuXHRcdFx0Y29uc3QgdGFza0NvbmZpZyA9IHtcblx0XHRcdFx0YXR0cmlidXRlSURzOiB0aGlzLmRlZmF1bHRBdHRyaWJ1dGVJRHMsXG5cdFx0XHRcdGF0dHJpYnV0ZVR5cGVzOiB0aGlzLmRlZmF1bHRBdHRyaWJ1dGVUeXBlcyxcblx0XHRcdFx0dXNlVW5pcXVlSURzOiBmYWxzZVxuXHRcdFx0fTtcblxuXHRcdFx0dGhpcy5kZWNvZGVHZW9tZXRyeSggYnVmZmVyLCB0YXNrQ29uZmlnIClcblx0XHRcdFx0LnRoZW4oIG9uTG9hZCApXG5cdFx0XHRcdC5jYXRjaCggb25FcnJvciApO1xuXG5cdFx0fSwgb25Qcm9ncmVzcywgb25FcnJvciApO1xuXG5cdH1cblxuXHQvKiogQGRlcHJlY2F0ZWQgS2VwdCBmb3IgYmFja3dhcmQtY29tcGF0aWJpbGl0eSB3aXRoIHByZXZpb3VzIERSQUNPTG9hZGVyIHZlcnNpb25zLiAqL1xuXHRkZWNvZGVEcmFjb0ZpbGUoIGJ1ZmZlciwgY2FsbGJhY2ssIGF0dHJpYnV0ZUlEcywgYXR0cmlidXRlVHlwZXMgKSB7XG5cblx0XHRjb25zdCB0YXNrQ29uZmlnID0ge1xuXHRcdFx0YXR0cmlidXRlSURzOiBhdHRyaWJ1dGVJRHMgfHwgdGhpcy5kZWZhdWx0QXR0cmlidXRlSURzLFxuXHRcdFx0YXR0cmlidXRlVHlwZXM6IGF0dHJpYnV0ZVR5cGVzIHx8IHRoaXMuZGVmYXVsdEF0dHJpYnV0ZVR5cGVzLFxuXHRcdFx0dXNlVW5pcXVlSURzOiAhISBhdHRyaWJ1dGVJRHNcblx0XHR9O1xuXG5cdFx0dGhpcy5kZWNvZGVHZW9tZXRyeSggYnVmZmVyLCB0YXNrQ29uZmlnICkudGhlbiggY2FsbGJhY2sgKTtcblxuXHR9XG5cblx0ZGVjb2RlR2VvbWV0cnkoIGJ1ZmZlciwgdGFza0NvbmZpZyApIHtcblxuXHRcdC8vIFRPRE86IEZvciBiYWNrd2FyZC1jb21wYXRpYmlsaXR5LCBzdXBwb3J0ICdhdHRyaWJ1dGVUeXBlcycgb2JqZWN0cyBjb250YWluaW5nXG5cdFx0Ly8gcmVmZXJlbmNlcyAocmF0aGVyIHRoYW4gbmFtZXMpIHRvIHR5cGVkIGFycmF5IGNvbnN0cnVjdG9ycy4gVGhlc2UgbXVzdCBiZVxuXHRcdC8vIHNlcmlhbGl6ZWQgYmVmb3JlIHNlbmRpbmcgdGhlbSB0byB0aGUgd29ya2VyLlxuXHRcdGZvciAoIGNvbnN0IGF0dHJpYnV0ZSBpbiB0YXNrQ29uZmlnLmF0dHJpYnV0ZVR5cGVzICkge1xuXG5cdFx0XHRjb25zdCB0eXBlID0gdGFza0NvbmZpZy5hdHRyaWJ1dGVUeXBlc1sgYXR0cmlidXRlIF07XG5cblx0XHRcdGlmICggdHlwZS5CWVRFU19QRVJfRUxFTUVOVCAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdHRhc2tDb25maWcuYXR0cmlidXRlVHlwZXNbIGF0dHJpYnV0ZSBdID0gdHlwZS5uYW1lO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHQvL1xuXG5cdFx0Y29uc3QgdGFza0tleSA9IEpTT04uc3RyaW5naWZ5KCB0YXNrQ29uZmlnICk7XG5cblx0XHQvLyBDaGVjayBmb3IgYW4gZXhpc3RpbmcgdGFzayB1c2luZyB0aGlzIGJ1ZmZlci4gQSB0cmFuc2ZlcnJlZCBidWZmZXIgY2Fubm90IGJlIHRyYW5zZmVycmVkXG5cdFx0Ly8gYWdhaW4gZnJvbSB0aGlzIHRocmVhZC5cblx0XHRpZiAoIF90YXNrQ2FjaGUuaGFzKCBidWZmZXIgKSApIHtcblxuXHRcdFx0Y29uc3QgY2FjaGVkVGFzayA9IF90YXNrQ2FjaGUuZ2V0KCBidWZmZXIgKTtcblxuXHRcdFx0aWYgKCBjYWNoZWRUYXNrLmtleSA9PT0gdGFza0tleSApIHtcblxuXHRcdFx0XHRyZXR1cm4gY2FjaGVkVGFzay5wcm9taXNlO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBidWZmZXIuYnl0ZUxlbmd0aCA9PT0gMCApIHtcblxuXHRcdFx0XHQvLyBUZWNobmljYWxseSwgaXQgd291bGQgYmUgcG9zc2libGUgdG8gd2FpdCBmb3IgdGhlIHByZXZpb3VzIHRhc2sgdG8gY29tcGxldGUsXG5cdFx0XHRcdC8vIHRyYW5zZmVyIHRoZSBidWZmZXIgYmFjaywgYW5kIGRlY29kZSBhZ2FpbiB3aXRoIHRoZSBzZWNvbmQgY29uZmlndXJhdGlvbi4gVGhhdFxuXHRcdFx0XHQvLyBpcyBjb21wbGV4LCBhbmQgSSBkb24ndCBrbm93IG9mIGFueSByZWFzb24gdG8gZGVjb2RlIGEgRHJhY28gYnVmZmVyIHR3aWNlIGluXG5cdFx0XHRcdC8vIGRpZmZlcmVudCB3YXlzLCBzbyB0aGlzIGlzIGxlZnQgdW5pbXBsZW1lbnRlZC5cblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXG5cdFx0XHRcdFx0J1RIUkVFLkRSQUNPTG9hZGVyOiBVbmFibGUgdG8gcmUtZGVjb2RlIGEgYnVmZmVyIHdpdGggZGlmZmVyZW50ICcgK1xuXHRcdFx0XHRcdCdzZXR0aW5ncy4gQnVmZmVyIGhhcyBhbHJlYWR5IGJlZW4gdHJhbnNmZXJyZWQuJ1xuXG5cdFx0XHRcdCk7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdC8vXG5cblx0XHRsZXQgd29ya2VyO1xuXHRcdGNvbnN0IHRhc2tJRCA9IHRoaXMud29ya2VyTmV4dFRhc2tJRCArKztcblx0XHRjb25zdCB0YXNrQ29zdCA9IGJ1ZmZlci5ieXRlTGVuZ3RoO1xuXG5cdFx0Ly8gT2J0YWluIGEgd29ya2VyIGFuZCBhc3NpZ24gYSB0YXNrLCBhbmQgY29uc3RydWN0IGEgZ2VvbWV0cnkgaW5zdGFuY2Vcblx0XHQvLyB3aGVuIHRoZSB0YXNrIGNvbXBsZXRlcy5cblx0XHRjb25zdCBnZW9tZXRyeVBlbmRpbmcgPSB0aGlzLl9nZXRXb3JrZXIoIHRhc2tJRCwgdGFza0Nvc3QgKVxuXHRcdFx0LnRoZW4oICggX3dvcmtlciApID0+IHtcblxuXHRcdFx0XHR3b3JrZXIgPSBfd29ya2VyO1xuXG5cdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSggKCByZXNvbHZlLCByZWplY3QgKSA9PiB7XG5cblx0XHRcdFx0XHR3b3JrZXIuX2NhbGxiYWNrc1sgdGFza0lEIF0gPSB7IHJlc29sdmUsIHJlamVjdCB9O1xuXG5cdFx0XHRcdFx0d29ya2VyLnBvc3RNZXNzYWdlKCB7IHR5cGU6ICdkZWNvZGUnLCBpZDogdGFza0lELCB0YXNrQ29uZmlnLCBidWZmZXIgfSwgWyBidWZmZXIgXSApO1xuXG5cdFx0XHRcdFx0Ly8gdGhpcy5kZWJ1ZygpO1xuXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0fSApXG5cdFx0XHQudGhlbiggKCBtZXNzYWdlICkgPT4gdGhpcy5fY3JlYXRlR2VvbWV0cnkoIG1lc3NhZ2UuZ2VvbWV0cnkgKSApO1xuXG5cdFx0Ly8gUmVtb3ZlIHRhc2sgZnJvbSB0aGUgdGFzayBsaXN0LlxuXHRcdC8vIE5vdGU6IHJlcGxhY2VkICcuZmluYWxseSgpJyB3aXRoICcuY2F0Y2goKS50aGVuKCknIGJsb2NrIC0gaU9TIDExIHN1cHBvcnQgKCMxOTQxNilcblx0XHRnZW9tZXRyeVBlbmRpbmdcblx0XHRcdC5jYXRjaCggKCkgPT4gdHJ1ZSApXG5cdFx0XHQudGhlbiggKCkgPT4ge1xuXG5cdFx0XHRcdGlmICggd29ya2VyICYmIHRhc2tJRCApIHtcblxuXHRcdFx0XHRcdHRoaXMuX3JlbGVhc2VUYXNrKCB3b3JrZXIsIHRhc2tJRCApO1xuXG5cdFx0XHRcdFx0Ly8gdGhpcy5kZWJ1ZygpO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSApO1xuXG5cdFx0Ly8gQ2FjaGUgdGhlIHRhc2sgcmVzdWx0LlxuXHRcdF90YXNrQ2FjaGUuc2V0KCBidWZmZXIsIHtcblxuXHRcdFx0a2V5OiB0YXNrS2V5LFxuXHRcdFx0cHJvbWlzZTogZ2VvbWV0cnlQZW5kaW5nXG5cblx0XHR9ICk7XG5cblx0XHRyZXR1cm4gZ2VvbWV0cnlQZW5kaW5nO1xuXG5cdH1cblxuXHRfY3JlYXRlR2VvbWV0cnkoIGdlb21ldHJ5RGF0YSApIHtcblxuXHRcdGNvbnN0IGdlb21ldHJ5ID0gbmV3IEJ1ZmZlckdlb21ldHJ5KCk7XG5cblx0XHRpZiAoIGdlb21ldHJ5RGF0YS5pbmRleCApIHtcblxuXHRcdFx0Z2VvbWV0cnkuc2V0SW5kZXgoIG5ldyBCdWZmZXJBdHRyaWJ1dGUoIGdlb21ldHJ5RGF0YS5pbmRleC5hcnJheSwgMSApICk7XG5cblx0XHR9XG5cblx0XHRmb3IgKCBsZXQgaSA9IDA7IGkgPCBnZW9tZXRyeURhdGEuYXR0cmlidXRlcy5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdGNvbnN0IGF0dHJpYnV0ZSA9IGdlb21ldHJ5RGF0YS5hdHRyaWJ1dGVzWyBpIF07XG5cdFx0XHRjb25zdCBuYW1lID0gYXR0cmlidXRlLm5hbWU7XG5cdFx0XHRjb25zdCBhcnJheSA9IGF0dHJpYnV0ZS5hcnJheTtcblx0XHRcdGNvbnN0IGl0ZW1TaXplID0gYXR0cmlidXRlLml0ZW1TaXplO1xuXG5cdFx0XHRnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoIG5hbWUsIG5ldyBCdWZmZXJBdHRyaWJ1dGUoIGFycmF5LCBpdGVtU2l6ZSApICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gZ2VvbWV0cnk7XG5cblx0fVxuXG5cdF9sb2FkTGlicmFyeSggdXJsLCByZXNwb25zZVR5cGUgKSB7XG5cblx0XHRjb25zdCBsb2FkZXIgPSBuZXcgRmlsZUxvYWRlciggdGhpcy5tYW5hZ2VyICk7XG5cdFx0bG9hZGVyLnNldFBhdGgoIHRoaXMuZGVjb2RlclBhdGggKTtcblx0XHRsb2FkZXIuc2V0UmVzcG9uc2VUeXBlKCByZXNwb25zZVR5cGUgKTtcblx0XHRsb2FkZXIuc2V0V2l0aENyZWRlbnRpYWxzKCB0aGlzLndpdGhDcmVkZW50aWFscyApO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKCAoIHJlc29sdmUsIHJlamVjdCApID0+IHtcblxuXHRcdFx0bG9hZGVyLmxvYWQoIHVybCwgcmVzb2x2ZSwgdW5kZWZpbmVkLCByZWplY3QgKTtcblxuXHRcdH0gKTtcblxuXHR9XG5cblx0cHJlbG9hZCgpIHtcblxuXHRcdHRoaXMuX2luaXREZWNvZGVyKCk7XG5cblx0XHRyZXR1cm4gdGhpcztcblxuXHR9XG5cblx0X2luaXREZWNvZGVyKCkge1xuXG5cdFx0aWYgKCB0aGlzLmRlY29kZXJQZW5kaW5nICkgcmV0dXJuIHRoaXMuZGVjb2RlclBlbmRpbmc7XG5cblx0XHRjb25zdCB1c2VKUyA9IHR5cGVvZiBXZWJBc3NlbWJseSAhPT0gJ29iamVjdCcgfHwgdGhpcy5kZWNvZGVyQ29uZmlnLnR5cGUgPT09ICdqcyc7XG5cdFx0Y29uc3QgbGlicmFyaWVzUGVuZGluZyA9IFtdO1xuXG5cdFx0aWYgKCB1c2VKUyApIHtcblxuXHRcdFx0bGlicmFyaWVzUGVuZGluZy5wdXNoKCB0aGlzLl9sb2FkTGlicmFyeSggJ2RyYWNvX2RlY29kZXIuanMnLCAndGV4dCcgKSApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0bGlicmFyaWVzUGVuZGluZy5wdXNoKCB0aGlzLl9sb2FkTGlicmFyeSggJ2RyYWNvX3dhc21fd3JhcHBlci5qcycsICd0ZXh0JyApICk7XG5cdFx0XHRsaWJyYXJpZXNQZW5kaW5nLnB1c2goIHRoaXMuX2xvYWRMaWJyYXJ5KCAnZHJhY29fZGVjb2Rlci53YXNtJywgJ2FycmF5YnVmZmVyJyApICk7XG5cblx0XHR9XG5cblx0XHR0aGlzLmRlY29kZXJQZW5kaW5nID0gUHJvbWlzZS5hbGwoIGxpYnJhcmllc1BlbmRpbmcgKVxuXHRcdFx0LnRoZW4oICggbGlicmFyaWVzICkgPT4ge1xuXG5cdFx0XHRcdGNvbnN0IGpzQ29udGVudCA9IGxpYnJhcmllc1sgMCBdO1xuXG5cdFx0XHRcdGlmICggISB1c2VKUyApIHtcblxuXHRcdFx0XHRcdHRoaXMuZGVjb2RlckNvbmZpZy53YXNtQmluYXJ5ID0gbGlicmFyaWVzWyAxIF07XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGZuID0gRFJBQ09Xb3JrZXIudG9TdHJpbmcoKTtcblxuXHRcdFx0XHRjb25zdCBib2R5ID0gW1xuXHRcdFx0XHRcdCcvKiBkcmFjbyBkZWNvZGVyICovJyxcblx0XHRcdFx0XHRqc0NvbnRlbnQsXG5cdFx0XHRcdFx0JycsXG5cdFx0XHRcdFx0Jy8qIHdvcmtlciAqLycsXG5cdFx0XHRcdFx0Zm4uc3Vic3RyaW5nKCBmbi5pbmRleE9mKCAneycgKSArIDEsIGZuLmxhc3RJbmRleE9mKCAnfScgKSApXG5cdFx0XHRcdF0uam9pbiggJ1xcbicgKTtcblxuXHRcdFx0XHR0aGlzLndvcmtlclNvdXJjZVVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoIG5ldyBCbG9iKCBbIGJvZHkgXSApICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdHJldHVybiB0aGlzLmRlY29kZXJQZW5kaW5nO1xuXG5cdH1cblxuXHRfZ2V0V29ya2VyKCB0YXNrSUQsIHRhc2tDb3N0ICkge1xuXG5cdFx0cmV0dXJuIHRoaXMuX2luaXREZWNvZGVyKCkudGhlbiggKCkgPT4ge1xuXG5cdFx0XHRpZiAoIHRoaXMud29ya2VyUG9vbC5sZW5ndGggPCB0aGlzLndvcmtlckxpbWl0ICkge1xuXG5cdFx0XHRcdGNvbnN0IHdvcmtlciA9IG5ldyBXb3JrZXIoIHRoaXMud29ya2VyU291cmNlVVJMICk7XG5cblx0XHRcdFx0d29ya2VyLl9jYWxsYmFja3MgPSB7fTtcblx0XHRcdFx0d29ya2VyLl90YXNrQ29zdHMgPSB7fTtcblx0XHRcdFx0d29ya2VyLl90YXNrTG9hZCA9IDA7XG5cblx0XHRcdFx0d29ya2VyLnBvc3RNZXNzYWdlKCB7IHR5cGU6ICdpbml0JywgZGVjb2RlckNvbmZpZzogdGhpcy5kZWNvZGVyQ29uZmlnIH0gKTtcblxuXHRcdFx0XHR3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKCBlICkge1xuXG5cdFx0XHRcdFx0Y29uc3QgbWVzc2FnZSA9IGUuZGF0YTtcblxuXHRcdFx0XHRcdHN3aXRjaCAoIG1lc3NhZ2UudHlwZSApIHtcblxuXHRcdFx0XHRcdFx0Y2FzZSAnZGVjb2RlJzpcblx0XHRcdFx0XHRcdFx0d29ya2VyLl9jYWxsYmFja3NbIG1lc3NhZ2UuaWQgXS5yZXNvbHZlKCBtZXNzYWdlICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlICdlcnJvcic6XG5cdFx0XHRcdFx0XHRcdHdvcmtlci5fY2FsbGJhY2tzWyBtZXNzYWdlLmlkIF0ucmVqZWN0KCBtZXNzYWdlICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCAnVEhSRUUuRFJBQ09Mb2FkZXI6IFVuZXhwZWN0ZWQgbWVzc2FnZSwgXCInICsgbWVzc2FnZS50eXBlICsgJ1wiJyApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0dGhpcy53b3JrZXJQb29sLnB1c2goIHdvcmtlciApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdHRoaXMud29ya2VyUG9vbC5zb3J0KCBmdW5jdGlvbiAoIGEsIGIgKSB7XG5cblx0XHRcdFx0XHRyZXR1cm4gYS5fdGFza0xvYWQgPiBiLl90YXNrTG9hZCA/IC0gMSA6IDE7XG5cblx0XHRcdFx0fSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHdvcmtlciA9IHRoaXMud29ya2VyUG9vbFsgdGhpcy53b3JrZXJQb29sLmxlbmd0aCAtIDEgXTtcblx0XHRcdHdvcmtlci5fdGFza0Nvc3RzWyB0YXNrSUQgXSA9IHRhc2tDb3N0O1xuXHRcdFx0d29ya2VyLl90YXNrTG9hZCArPSB0YXNrQ29zdDtcblx0XHRcdHJldHVybiB3b3JrZXI7XG5cblx0XHR9ICk7XG5cblx0fVxuXG5cdF9yZWxlYXNlVGFzayggd29ya2VyLCB0YXNrSUQgKSB7XG5cblx0XHR3b3JrZXIuX3Rhc2tMb2FkIC09IHdvcmtlci5fdGFza0Nvc3RzWyB0YXNrSUQgXTtcblx0XHRkZWxldGUgd29ya2VyLl9jYWxsYmFja3NbIHRhc2tJRCBdO1xuXHRcdGRlbGV0ZSB3b3JrZXIuX3Rhc2tDb3N0c1sgdGFza0lEIF07XG5cblx0fVxuXG5cdGRlYnVnKCkge1xuXG5cdFx0Y29uc29sZS5sb2coICdUYXNrIGxvYWQ6ICcsIHRoaXMud29ya2VyUG9vbC5tYXAoICggd29ya2VyICkgPT4gd29ya2VyLl90YXNrTG9hZCApICk7XG5cblx0fVxuXG5cdGRpc3Bvc2UoKSB7XG5cblx0XHRmb3IgKCBsZXQgaSA9IDA7IGkgPCB0aGlzLndvcmtlclBvb2wubGVuZ3RoOyArKyBpICkge1xuXG5cdFx0XHR0aGlzLndvcmtlclBvb2xbIGkgXS50ZXJtaW5hdGUoKTtcblxuXHRcdH1cblxuXHRcdHRoaXMud29ya2VyUG9vbC5sZW5ndGggPSAwO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fVxuXG59XG5cbi8qIFdFQiBXT1JLRVIgKi9cblxuZnVuY3Rpb24gRFJBQ09Xb3JrZXIoKSB7XG5cblx0bGV0IGRlY29kZXJDb25maWc7XG5cdGxldCBkZWNvZGVyUGVuZGluZztcblxuXHRvbm1lc3NhZ2UgPSBmdW5jdGlvbiAoIGUgKSB7XG5cblx0XHRjb25zdCBtZXNzYWdlID0gZS5kYXRhO1xuXG5cdFx0c3dpdGNoICggbWVzc2FnZS50eXBlICkge1xuXG5cdFx0XHRjYXNlICdpbml0Jzpcblx0XHRcdFx0ZGVjb2RlckNvbmZpZyA9IG1lc3NhZ2UuZGVjb2RlckNvbmZpZztcblx0XHRcdFx0ZGVjb2RlclBlbmRpbmcgPSBuZXcgUHJvbWlzZSggZnVuY3Rpb24gKCByZXNvbHZlLyosIHJlamVjdCovICkge1xuXG5cdFx0XHRcdFx0ZGVjb2RlckNvbmZpZy5vbk1vZHVsZUxvYWRlZCA9IGZ1bmN0aW9uICggZHJhY28gKSB7XG5cblx0XHRcdFx0XHRcdC8vIE1vZHVsZSBpcyBQcm9taXNlLWxpa2UuIFdyYXAgYmVmb3JlIHJlc29sdmluZyB0byBhdm9pZCBsb29wLlxuXHRcdFx0XHRcdFx0cmVzb2x2ZSggeyBkcmFjbzogZHJhY28gfSApO1xuXG5cdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdERyYWNvRGVjb2Rlck1vZHVsZSggZGVjb2RlckNvbmZpZyApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cblx0XHRcdFx0fSApO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAnZGVjb2RlJzpcblx0XHRcdFx0Y29uc3QgYnVmZmVyID0gbWVzc2FnZS5idWZmZXI7XG5cdFx0XHRcdGNvbnN0IHRhc2tDb25maWcgPSBtZXNzYWdlLnRhc2tDb25maWc7XG5cdFx0XHRcdGRlY29kZXJQZW5kaW5nLnRoZW4oICggbW9kdWxlICkgPT4ge1xuXG5cdFx0XHRcdFx0Y29uc3QgZHJhY28gPSBtb2R1bGUuZHJhY287XG5cdFx0XHRcdFx0Y29uc3QgZGVjb2RlciA9IG5ldyBkcmFjby5EZWNvZGVyKCk7XG5cdFx0XHRcdFx0Y29uc3QgZGVjb2RlckJ1ZmZlciA9IG5ldyBkcmFjby5EZWNvZGVyQnVmZmVyKCk7XG5cdFx0XHRcdFx0ZGVjb2RlckJ1ZmZlci5Jbml0KCBuZXcgSW50OEFycmF5KCBidWZmZXIgKSwgYnVmZmVyLmJ5dGVMZW5ndGggKTtcblxuXHRcdFx0XHRcdHRyeSB7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGdlb21ldHJ5ID0gZGVjb2RlR2VvbWV0cnkoIGRyYWNvLCBkZWNvZGVyLCBkZWNvZGVyQnVmZmVyLCB0YXNrQ29uZmlnICk7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGJ1ZmZlcnMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLm1hcCggKCBhdHRyICkgPT4gYXR0ci5hcnJheS5idWZmZXIgKTtcblxuXHRcdFx0XHRcdFx0aWYgKCBnZW9tZXRyeS5pbmRleCApIGJ1ZmZlcnMucHVzaCggZ2VvbWV0cnkuaW5kZXguYXJyYXkuYnVmZmVyICk7XG5cblx0XHRcdFx0XHRcdHNlbGYucG9zdE1lc3NhZ2UoIHsgdHlwZTogJ2RlY29kZScsIGlkOiBtZXNzYWdlLmlkLCBnZW9tZXRyeSB9LCBidWZmZXJzICk7XG5cblx0XHRcdFx0XHR9IGNhdGNoICggZXJyb3IgKSB7XG5cblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoIGVycm9yICk7XG5cblx0XHRcdFx0XHRcdHNlbGYucG9zdE1lc3NhZ2UoIHsgdHlwZTogJ2Vycm9yJywgaWQ6IG1lc3NhZ2UuaWQsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0gKTtcblxuXHRcdFx0XHRcdH0gZmluYWxseSB7XG5cblx0XHRcdFx0XHRcdGRyYWNvLmRlc3Ryb3koIGRlY29kZXJCdWZmZXIgKTtcblx0XHRcdFx0XHRcdGRyYWNvLmRlc3Ryb3koIGRlY29kZXIgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9ICk7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0fVxuXG5cdH07XG5cblx0ZnVuY3Rpb24gZGVjb2RlR2VvbWV0cnkoIGRyYWNvLCBkZWNvZGVyLCBkZWNvZGVyQnVmZmVyLCB0YXNrQ29uZmlnICkge1xuXG5cdFx0Y29uc3QgYXR0cmlidXRlSURzID0gdGFza0NvbmZpZy5hdHRyaWJ1dGVJRHM7XG5cdFx0Y29uc3QgYXR0cmlidXRlVHlwZXMgPSB0YXNrQ29uZmlnLmF0dHJpYnV0ZVR5cGVzO1xuXG5cdFx0bGV0IGRyYWNvR2VvbWV0cnk7XG5cdFx0bGV0IGRlY29kaW5nU3RhdHVzO1xuXG5cdFx0Y29uc3QgZ2VvbWV0cnlUeXBlID0gZGVjb2Rlci5HZXRFbmNvZGVkR2VvbWV0cnlUeXBlKCBkZWNvZGVyQnVmZmVyICk7XG5cblx0XHRpZiAoIGdlb21ldHJ5VHlwZSA9PT0gZHJhY28uVFJJQU5HVUxBUl9NRVNIICkge1xuXG5cdFx0XHRkcmFjb0dlb21ldHJ5ID0gbmV3IGRyYWNvLk1lc2goKTtcblx0XHRcdGRlY29kaW5nU3RhdHVzID0gZGVjb2Rlci5EZWNvZGVCdWZmZXJUb01lc2goIGRlY29kZXJCdWZmZXIsIGRyYWNvR2VvbWV0cnkgKTtcblxuXHRcdH0gZWxzZSBpZiAoIGdlb21ldHJ5VHlwZSA9PT0gZHJhY28uUE9JTlRfQ0xPVUQgKSB7XG5cblx0XHRcdGRyYWNvR2VvbWV0cnkgPSBuZXcgZHJhY28uUG9pbnRDbG91ZCgpO1xuXHRcdFx0ZGVjb2RpbmdTdGF0dXMgPSBkZWNvZGVyLkRlY29kZUJ1ZmZlclRvUG9pbnRDbG91ZCggZGVjb2RlckJ1ZmZlciwgZHJhY29HZW9tZXRyeSApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuRFJBQ09Mb2FkZXI6IFVuZXhwZWN0ZWQgZ2VvbWV0cnkgdHlwZS4nICk7XG5cblx0XHR9XG5cblx0XHRpZiAoICEgZGVjb2RpbmdTdGF0dXMub2soKSB8fCBkcmFjb0dlb21ldHJ5LnB0ciA9PT0gMCApIHtcblxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuRFJBQ09Mb2FkZXI6IERlY29kaW5nIGZhaWxlZDogJyArIGRlY29kaW5nU3RhdHVzLmVycm9yX21zZygpICk7XG5cblx0XHR9XG5cblx0XHRjb25zdCBnZW9tZXRyeSA9IHsgaW5kZXg6IG51bGwsIGF0dHJpYnV0ZXM6IFtdIH07XG5cblx0XHQvLyBHYXRoZXIgYWxsIHZlcnRleCBhdHRyaWJ1dGVzLlxuXHRcdGZvciAoIGNvbnN0IGF0dHJpYnV0ZU5hbWUgaW4gYXR0cmlidXRlSURzICkge1xuXG5cdFx0XHRjb25zdCBhdHRyaWJ1dGVUeXBlID0gc2VsZlsgYXR0cmlidXRlVHlwZXNbIGF0dHJpYnV0ZU5hbWUgXSBdO1xuXG5cdFx0XHRsZXQgYXR0cmlidXRlO1xuXHRcdFx0bGV0IGF0dHJpYnV0ZUlEO1xuXG5cdFx0XHQvLyBBIERyYWNvIGZpbGUgbWF5IGJlIGNyZWF0ZWQgd2l0aCBkZWZhdWx0IHZlcnRleCBhdHRyaWJ1dGVzLCB3aG9zZSBhdHRyaWJ1dGUgSURzXG5cdFx0XHQvLyBhcmUgbWFwcGVkIDE6MSBmcm9tIHRoZWlyIHNlbWFudGljIG5hbWUgKFBPU0lUSU9OLCBOT1JNQUwsIC4uLikuIEFsdGVybmF0aXZlbHksXG5cdFx0XHQvLyBhIERyYWNvIGZpbGUgbWF5IGNvbnRhaW4gYSBjdXN0b20gc2V0IG9mIGF0dHJpYnV0ZXMsIGlkZW50aWZpZWQgYnkga25vd24gdW5pcXVlXG5cdFx0XHQvLyBJRHMuIGdsVEYgZmlsZXMgYWx3YXlzIGRvIHRoZSBsYXR0ZXIsIGFuZCBgLmRyY2AgZmlsZXMgdHlwaWNhbGx5IGRvIHRoZSBmb3JtZXIuXG5cdFx0XHRpZiAoIHRhc2tDb25maWcudXNlVW5pcXVlSURzICkge1xuXG5cdFx0XHRcdGF0dHJpYnV0ZUlEID0gYXR0cmlidXRlSURzWyBhdHRyaWJ1dGVOYW1lIF07XG5cdFx0XHRcdGF0dHJpYnV0ZSA9IGRlY29kZXIuR2V0QXR0cmlidXRlQnlVbmlxdWVJZCggZHJhY29HZW9tZXRyeSwgYXR0cmlidXRlSUQgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRhdHRyaWJ1dGVJRCA9IGRlY29kZXIuR2V0QXR0cmlidXRlSWQoIGRyYWNvR2VvbWV0cnksIGRyYWNvWyBhdHRyaWJ1dGVJRHNbIGF0dHJpYnV0ZU5hbWUgXSBdICk7XG5cblx0XHRcdFx0aWYgKCBhdHRyaWJ1dGVJRCA9PT0gLSAxICkgY29udGludWU7XG5cblx0XHRcdFx0YXR0cmlidXRlID0gZGVjb2Rlci5HZXRBdHRyaWJ1dGUoIGRyYWNvR2VvbWV0cnksIGF0dHJpYnV0ZUlEICk7XG5cblx0XHRcdH1cblxuXHRcdFx0Z2VvbWV0cnkuYXR0cmlidXRlcy5wdXNoKCBkZWNvZGVBdHRyaWJ1dGUoIGRyYWNvLCBkZWNvZGVyLCBkcmFjb0dlb21ldHJ5LCBhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVUeXBlLCBhdHRyaWJ1dGUgKSApO1xuXG5cdFx0fVxuXG5cdFx0Ly8gQWRkIGluZGV4LlxuXHRcdGlmICggZ2VvbWV0cnlUeXBlID09PSBkcmFjby5UUklBTkdVTEFSX01FU0ggKSB7XG5cblx0XHRcdGdlb21ldHJ5LmluZGV4ID0gZGVjb2RlSW5kZXgoIGRyYWNvLCBkZWNvZGVyLCBkcmFjb0dlb21ldHJ5ICk7XG5cblx0XHR9XG5cblx0XHRkcmFjby5kZXN0cm95KCBkcmFjb0dlb21ldHJ5ICk7XG5cblx0XHRyZXR1cm4gZ2VvbWV0cnk7XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGRlY29kZUluZGV4KCBkcmFjbywgZGVjb2RlciwgZHJhY29HZW9tZXRyeSApIHtcblxuXHRcdGNvbnN0IG51bUZhY2VzID0gZHJhY29HZW9tZXRyeS5udW1fZmFjZXMoKTtcblx0XHRjb25zdCBudW1JbmRpY2VzID0gbnVtRmFjZXMgKiAzO1xuXHRcdGNvbnN0IGJ5dGVMZW5ndGggPSBudW1JbmRpY2VzICogNDtcblxuXHRcdGNvbnN0IHB0ciA9IGRyYWNvLl9tYWxsb2MoIGJ5dGVMZW5ndGggKTtcblx0XHRkZWNvZGVyLkdldFRyaWFuZ2xlc1VJbnQzMkFycmF5KCBkcmFjb0dlb21ldHJ5LCBieXRlTGVuZ3RoLCBwdHIgKTtcblx0XHRjb25zdCBpbmRleCA9IG5ldyBVaW50MzJBcnJheSggZHJhY28uSEVBUEYzMi5idWZmZXIsIHB0ciwgbnVtSW5kaWNlcyApLnNsaWNlKCk7XG5cdFx0ZHJhY28uX2ZyZWUoIHB0ciApO1xuXG5cdFx0cmV0dXJuIHsgYXJyYXk6IGluZGV4LCBpdGVtU2l6ZTogMSB9O1xuXG5cdH1cblxuXHRmdW5jdGlvbiBkZWNvZGVBdHRyaWJ1dGUoIGRyYWNvLCBkZWNvZGVyLCBkcmFjb0dlb21ldHJ5LCBhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVUeXBlLCBhdHRyaWJ1dGUgKSB7XG5cblx0XHRjb25zdCBudW1Db21wb25lbnRzID0gYXR0cmlidXRlLm51bV9jb21wb25lbnRzKCk7XG5cdFx0Y29uc3QgbnVtUG9pbnRzID0gZHJhY29HZW9tZXRyeS5udW1fcG9pbnRzKCk7XG5cdFx0Y29uc3QgbnVtVmFsdWVzID0gbnVtUG9pbnRzICogbnVtQ29tcG9uZW50cztcblx0XHRjb25zdCBieXRlTGVuZ3RoID0gbnVtVmFsdWVzICogYXR0cmlidXRlVHlwZS5CWVRFU19QRVJfRUxFTUVOVDtcblx0XHRjb25zdCBkYXRhVHlwZSA9IGdldERyYWNvRGF0YVR5cGUoIGRyYWNvLCBhdHRyaWJ1dGVUeXBlICk7XG5cblx0XHRjb25zdCBwdHIgPSBkcmFjby5fbWFsbG9jKCBieXRlTGVuZ3RoICk7XG5cdFx0ZGVjb2Rlci5HZXRBdHRyaWJ1dGVEYXRhQXJyYXlGb3JBbGxQb2ludHMoIGRyYWNvR2VvbWV0cnksIGF0dHJpYnV0ZSwgZGF0YVR5cGUsIGJ5dGVMZW5ndGgsIHB0ciApO1xuXHRcdGNvbnN0IGFycmF5ID0gbmV3IGF0dHJpYnV0ZVR5cGUoIGRyYWNvLkhFQVBGMzIuYnVmZmVyLCBwdHIsIG51bVZhbHVlcyApLnNsaWNlKCk7XG5cdFx0ZHJhY28uX2ZyZWUoIHB0ciApO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdG5hbWU6IGF0dHJpYnV0ZU5hbWUsXG5cdFx0XHRhcnJheTogYXJyYXksXG5cdFx0XHRpdGVtU2l6ZTogbnVtQ29tcG9uZW50c1xuXHRcdH07XG5cblx0fVxuXG5cdGZ1bmN0aW9uIGdldERyYWNvRGF0YVR5cGUoIGRyYWNvLCBhdHRyaWJ1dGVUeXBlICkge1xuXG5cdFx0c3dpdGNoICggYXR0cmlidXRlVHlwZSApIHtcblxuXHRcdFx0Y2FzZSBGbG9hdDMyQXJyYXk6IHJldHVybiBkcmFjby5EVF9GTE9BVDMyO1xuXHRcdFx0Y2FzZSBJbnQ4QXJyYXk6IHJldHVybiBkcmFjby5EVF9JTlQ4O1xuXHRcdFx0Y2FzZSBJbnQxNkFycmF5OiByZXR1cm4gZHJhY28uRFRfSU5UMTY7XG5cdFx0XHRjYXNlIEludDMyQXJyYXk6IHJldHVybiBkcmFjby5EVF9JTlQzMjtcblx0XHRcdGNhc2UgVWludDhBcnJheTogcmV0dXJuIGRyYWNvLkRUX1VJTlQ4O1xuXHRcdFx0Y2FzZSBVaW50MTZBcnJheTogcmV0dXJuIGRyYWNvLkRUX1VJTlQxNjtcblx0XHRcdGNhc2UgVWludDMyQXJyYXk6IHJldHVybiBkcmFjby5EVF9VSU5UMzI7XG5cblx0XHR9XG5cblx0fVxuXG59XG5cbmV4cG9ydCB7IERSQUNPTG9hZGVyIH07IiwidmFyIGdsb2JhbCA9IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzO1xudmFyIF9fc2VsZl9fID0gKGZ1bmN0aW9uICgpIHtcbmZ1bmN0aW9uIEYoKSB7XG50aGlzLmZldGNoID0gZmFsc2U7XG50aGlzLkRPTUV4Y2VwdGlvbiA9IGdsb2JhbC5ET01FeGNlcHRpb25cbn1cbkYucHJvdG90eXBlID0gZ2xvYmFsO1xucmV0dXJuIG5ldyBGKCk7XG59KSgpO1xuKGZ1bmN0aW9uKHNlbGYpIHtcblxudmFyIGlycmVsZXZhbnQgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHtcblxuICB2YXIgc3VwcG9ydCA9IHtcbiAgICBzZWFyY2hQYXJhbXM6ICdVUkxTZWFyY2hQYXJhbXMnIGluIHNlbGYsXG4gICAgaXRlcmFibGU6ICdTeW1ib2wnIGluIHNlbGYgJiYgJ2l0ZXJhdG9yJyBpbiBTeW1ib2wsXG4gICAgYmxvYjpcbiAgICAgICdGaWxlUmVhZGVyJyBpbiBzZWxmICYmXG4gICAgICAnQmxvYicgaW4gc2VsZiAmJlxuICAgICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIG5ldyBCbG9iKCk7XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9KSgpLFxuICAgIGZvcm1EYXRhOiAnRm9ybURhdGEnIGluIHNlbGYsXG4gICAgYXJyYXlCdWZmZXI6ICdBcnJheUJ1ZmZlcicgaW4gc2VsZlxuICB9O1xuXG4gIGZ1bmN0aW9uIGlzRGF0YVZpZXcob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAmJiBEYXRhVmlldy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihvYmopXG4gIH1cblxuICBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlcikge1xuICAgIHZhciB2aWV3Q2xhc3NlcyA9IFtcbiAgICAgICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgVWludDhBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJyxcbiAgICAgICdbb2JqZWN0IEludDE2QXJyYXldJyxcbiAgICAgICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG4gICAgICAnW29iamVjdCBJbnQzMkFycmF5XScsXG4gICAgICAnW29iamVjdCBVaW50MzJBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG4gICAgICAnW29iamVjdCBGbG9hdDY0QXJyYXldJ1xuICAgIF07XG5cbiAgICB2YXIgaXNBcnJheUJ1ZmZlclZpZXcgPVxuICAgICAgQXJyYXlCdWZmZXIuaXNWaWV3IHx8XG4gICAgICBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAmJiB2aWV3Q2xhc3Nlcy5pbmRleE9mKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopKSA+IC0xXG4gICAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgbmFtZSA9IFN0cmluZyhuYW1lKTtcbiAgICB9XG4gICAgaWYgKC9bXmEtejAtOVxcLSMkJSYnKisuXl9gfH5dL2kudGVzdChuYW1lKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBjaGFyYWN0ZXIgaW4gaGVhZGVyIGZpZWxkIG5hbWUnKVxuICAgIH1cbiAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpXG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgLy8gQnVpbGQgYSBkZXN0cnVjdGl2ZSBpdGVyYXRvciBmb3IgdGhlIHZhbHVlIGxpc3RcbiAgZnVuY3Rpb24gaXRlcmF0b3JGb3IoaXRlbXMpIHtcbiAgICB2YXIgaXRlcmF0b3IgPSB7XG4gICAgICBuZXh0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gaXRlbXMuc2hpZnQoKTtcbiAgICAgICAgcmV0dXJuIHtkb25lOiB2YWx1ZSA9PT0gdW5kZWZpbmVkLCB2YWx1ZTogdmFsdWV9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gICAgICBpdGVyYXRvcltTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvclxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gaXRlcmF0b3JcbiAgfVxuXG4gIGZ1bmN0aW9uIEhlYWRlcnMoaGVhZGVycykge1xuICAgIHRoaXMubWFwID0ge307XG5cbiAgICBpZiAoaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpIHtcbiAgICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgICB0aGlzLmFwcGVuZChuYW1lLCB2YWx1ZSk7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaGVhZGVycykpIHtcbiAgICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQoaGVhZGVyWzBdLCBoZWFkZXJbMV0pO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfSBlbHNlIGlmIChoZWFkZXJzKSB7XG4gICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhoZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgaGVhZGVyc1tuYW1lXSk7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpO1xuICAgIHZhbHVlID0gbm9ybWFsaXplVmFsdWUodmFsdWUpO1xuICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMubWFwW25hbWVdO1xuICAgIHRoaXMubWFwW25hbWVdID0gb2xkVmFsdWUgPyBvbGRWYWx1ZSArICcsICcgKyB2YWx1ZSA6IHZhbHVlO1xuICB9O1xuXG4gIEhlYWRlcnMucHJvdG90eXBlWydkZWxldGUnXSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV07XG4gIH07XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpO1xuICAgIHJldHVybiB0aGlzLmhhcyhuYW1lKSA/IHRoaXMubWFwW25hbWVdIDogbnVsbFxuICB9O1xuXG4gIEhlYWRlcnMucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAuaGFzT3duUHJvcGVydHkobm9ybWFsaXplTmFtZShuYW1lKSlcbiAgfTtcblxuICBIZWFkZXJzLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldID0gbm9ybWFsaXplVmFsdWUodmFsdWUpO1xuICB9O1xuXG4gIEhlYWRlcnMucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5tYXApIHtcbiAgICAgIGlmICh0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHRoaXMubWFwW25hbWVdLCBuYW1lLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgSGVhZGVycy5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpdGVtcyA9IFtdO1xuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgaXRlbXMucHVzaChuYW1lKTtcbiAgICB9KTtcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH07XG5cbiAgSGVhZGVycy5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW107XG4gICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpdGVtcy5wdXNoKHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH07XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZW50cmllcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpdGVtcyA9IFtdO1xuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgaXRlbXMucHVzaChbbmFtZSwgdmFsdWVdKTtcbiAgICB9KTtcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH07XG5cbiAgaWYgKHN1cHBvcnQuaXRlcmFibGUpIHtcbiAgICBIZWFkZXJzLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gSGVhZGVycy5wcm90b3R5cGUuZW50cmllcztcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcbiAgICBpZiAoYm9keS5ib2R5VXNlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpKVxuICAgIH1cbiAgICBib2R5LmJvZHlVc2VkID0gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdCk7XG4gICAgICB9O1xuICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KHJlYWRlci5lcnJvcik7XG4gICAgICB9O1xuICAgIH0pXG4gIH1cblxuICBmdW5jdGlvbiByZWFkQmxvYkFzQXJyYXlCdWZmZXIoYmxvYikge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIHZhciBwcm9taXNlID0gZmlsZVJlYWRlclJlYWR5KHJlYWRlcik7XG4gICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpO1xuICAgIHJldHVybiBwcm9taXNlXG4gIH1cblxuICBmdW5jdGlvbiByZWFkQmxvYkFzVGV4dChibG9iKSB7XG4gICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgdmFyIHByb21pc2UgPSBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKTtcbiAgICByZWFkZXIucmVhZEFzVGV4dChibG9iKTtcbiAgICByZXR1cm4gcHJvbWlzZVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEFycmF5QnVmZmVyQXNUZXh0KGJ1Zikge1xuICAgIHZhciB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmKTtcbiAgICB2YXIgY2hhcnMgPSBuZXcgQXJyYXkodmlldy5sZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aWV3Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjaGFyc1tpXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUodmlld1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBjaGFycy5qb2luKCcnKVxuICB9XG5cbiAgZnVuY3Rpb24gYnVmZmVyQ2xvbmUoYnVmKSB7XG4gICAgaWYgKGJ1Zi5zbGljZSkge1xuICAgICAgcmV0dXJuIGJ1Zi5zbGljZSgwKVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1Zi5ieXRlTGVuZ3RoKTtcbiAgICAgIHZpZXcuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZikpO1xuICAgICAgcmV0dXJuIHZpZXcuYnVmZmVyXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gQm9keSgpIHtcbiAgICB0aGlzLmJvZHlVc2VkID0gZmFsc2U7XG5cbiAgICB0aGlzLl9pbml0Qm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAgIHRoaXMuX2JvZHlJbml0ID0gYm9keTtcbiAgICAgIGlmICghYm9keSkge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9ICcnO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5O1xuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmJsb2IgJiYgQmxvYi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5QmxvYiA9IGJvZHk7XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUZvcm1EYXRhID0gYm9keTtcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keS50b1N0cmluZygpO1xuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIHN1cHBvcnQuYmxvYiAmJiBpc0RhdGFWaWV3KGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlBcnJheUJ1ZmZlciA9IGJ1ZmZlckNsb25lKGJvZHkuYnVmZmVyKTtcbiAgICAgICAgLy8gSUUgMTAtMTEgY2FuJ3QgaGFuZGxlIGEgRGF0YVZpZXcgYm9keS5cbiAgICAgICAgdGhpcy5fYm9keUluaXQgPSBuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSk7XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIgJiYgKEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpIHx8IGlzQXJyYXlCdWZmZXJWaWV3KGJvZHkpKSkge1xuICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIgPSBidWZmZXJDbG9uZShib2R5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChib2R5KTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkge1xuICAgICAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCcpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlCbG9iICYmIHRoaXMuX2JvZHlCbG9iLnR5cGUpIHtcbiAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCB0aGlzLl9ib2R5QmxvYi50eXBlKTtcbiAgICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoc3VwcG9ydC5ibG9iKSB7XG4gICAgICB0aGlzLmJsb2IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcyk7XG4gICAgICAgIGlmIChyZWplY3RlZCkge1xuICAgICAgICAgIHJldHVybiByZWplY3RlZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QmxvYilcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5QXJyYXlCdWZmZXJdKSlcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYicpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keVRleHRdKSlcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpcy5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5fYm9keUFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnN1bWVkKHRoaXMpIHx8IFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuYmxvYigpLnRoZW4ocmVhZEJsb2JBc0FycmF5QnVmZmVyKVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIHRoaXMudGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcyk7XG4gICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHJlamVjdGVkXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICByZXR1cm4gcmVhZEJsb2JBc1RleHQodGhpcy5fYm9keUJsb2IpXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlYWRBcnJheUJ1ZmZlckFzVGV4dCh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIHRleHQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHN1cHBvcnQuZm9ybURhdGEpIHtcbiAgICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oZGVjb2RlKVxuICAgICAgfTtcbiAgICB9XG5cbiAgICB0aGlzLmpzb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKEpTT04ucGFyc2UpXG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvLyBIVFRQIG1ldGhvZHMgd2hvc2UgY2FwaXRhbGl6YXRpb24gc2hvdWxkIGJlIG5vcm1hbGl6ZWRcbiAgdmFyIG1ldGhvZHMgPSBbJ0RFTEVURScsICdHRVQnLCAnSEVBRCcsICdPUFRJT05TJywgJ1BPU1QnLCAnUFVUJ107XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKG1ldGhvZCkge1xuICAgIHZhciB1cGNhc2VkID0gbWV0aG9kLnRvVXBwZXJDYXNlKCk7XG4gICAgcmV0dXJuIG1ldGhvZHMuaW5kZXhPZih1cGNhc2VkKSA+IC0xID8gdXBjYXNlZCA6IG1ldGhvZFxuICB9XG5cbiAgZnVuY3Rpb24gUmVxdWVzdChpbnB1dCwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHZhciBib2R5ID0gb3B0aW9ucy5ib2R5O1xuXG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgUmVxdWVzdCkge1xuICAgICAgaWYgKGlucHV0LmJvZHlVc2VkKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpXG4gICAgICB9XG4gICAgICB0aGlzLnVybCA9IGlucHV0LnVybDtcbiAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBpbnB1dC5jcmVkZW50aWFscztcbiAgICAgIGlmICghb3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKGlucHV0LmhlYWRlcnMpO1xuICAgICAgfVxuICAgICAgdGhpcy5tZXRob2QgPSBpbnB1dC5tZXRob2Q7XG4gICAgICB0aGlzLm1vZGUgPSBpbnB1dC5tb2RlO1xuICAgICAgdGhpcy5zaWduYWwgPSBpbnB1dC5zaWduYWw7XG4gICAgICBpZiAoIWJvZHkgJiYgaW5wdXQuX2JvZHlJbml0ICE9IG51bGwpIHtcbiAgICAgICAgYm9keSA9IGlucHV0Ll9ib2R5SW5pdDtcbiAgICAgICAgaW5wdXQuYm9keVVzZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnVybCA9IFN0cmluZyhpbnB1dCk7XG4gICAgfVxuXG4gICAgdGhpcy5jcmVkZW50aWFscyA9IG9wdGlvbnMuY3JlZGVudGlhbHMgfHwgdGhpcy5jcmVkZW50aWFscyB8fCAnc2FtZS1vcmlnaW4nO1xuICAgIGlmIChvcHRpb25zLmhlYWRlcnMgfHwgIXRoaXMuaGVhZGVycykge1xuICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKTtcbiAgICB9XG4gICAgdGhpcy5tZXRob2QgPSBub3JtYWxpemVNZXRob2Qob3B0aW9ucy5tZXRob2QgfHwgdGhpcy5tZXRob2QgfHwgJ0dFVCcpO1xuICAgIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCB0aGlzLm1vZGUgfHwgbnVsbDtcbiAgICB0aGlzLnNpZ25hbCA9IG9wdGlvbnMuc2lnbmFsIHx8IHRoaXMuc2lnbmFsO1xuICAgIHRoaXMucmVmZXJyZXIgPSBudWxsO1xuXG4gICAgaWYgKCh0aGlzLm1ldGhvZCA9PT0gJ0dFVCcgfHwgdGhpcy5tZXRob2QgPT09ICdIRUFEJykgJiYgYm9keSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9keSBub3QgYWxsb3dlZCBmb3IgR0VUIG9yIEhFQUQgcmVxdWVzdHMnKVxuICAgIH1cbiAgICB0aGlzLl9pbml0Qm9keShib2R5KTtcbiAgfVxuXG4gIFJlcXVlc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBSZXF1ZXN0KHRoaXMsIHtib2R5OiB0aGlzLl9ib2R5SW5pdH0pXG4gIH07XG5cbiAgZnVuY3Rpb24gZGVjb2RlKGJvZHkpIHtcbiAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIGJvZHlcbiAgICAgIC50cmltKClcbiAgICAgIC5zcGxpdCgnJicpXG4gICAgICAuZm9yRWFjaChmdW5jdGlvbihieXRlcykge1xuICAgICAgICBpZiAoYnl0ZXMpIHtcbiAgICAgICAgICB2YXIgc3BsaXQgPSBieXRlcy5zcGxpdCgnPScpO1xuICAgICAgICAgIHZhciBuYW1lID0gc3BsaXQuc2hpZnQoKS5yZXBsYWNlKC9cXCsvZywgJyAnKTtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc9JykucmVwbGFjZSgvXFwrL2csICcgJyk7XG4gICAgICAgICAgZm9ybS5hcHBlbmQoZGVjb2RlVVJJQ29tcG9uZW50KG5hbWUpLCBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgcmV0dXJuIGZvcm1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBhcnNlSGVhZGVycyhyYXdIZWFkZXJzKSB7XG4gICAgdmFyIGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgIC8vIFJlcGxhY2UgaW5zdGFuY2VzIG9mIFxcclxcbiBhbmQgXFxuIGZvbGxvd2VkIGJ5IGF0IGxlYXN0IG9uZSBzcGFjZSBvciBob3Jpem9udGFsIHRhYiB3aXRoIGEgc3BhY2VcbiAgICAvLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNzIzMCNzZWN0aW9uLTMuMlxuICAgIHZhciBwcmVQcm9jZXNzZWRIZWFkZXJzID0gcmF3SGVhZGVycy5yZXBsYWNlKC9cXHI/XFxuW1xcdCBdKy9nLCAnICcpO1xuICAgIHByZVByb2Nlc3NlZEhlYWRlcnMuc3BsaXQoL1xccj9cXG4vKS5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgIHZhciBwYXJ0cyA9IGxpbmUuc3BsaXQoJzonKTtcbiAgICAgIHZhciBrZXkgPSBwYXJ0cy5zaGlmdCgpLnRyaW0oKTtcbiAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gcGFydHMuam9pbignOicpLnRyaW0oKTtcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoa2V5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGhlYWRlcnNcbiAgfVxuXG4gIEJvZHkuY2FsbChSZXF1ZXN0LnByb3RvdHlwZSk7XG5cbiAgZnVuY3Rpb24gUmVzcG9uc2UoYm9keUluaXQsIG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICB0aGlzLnR5cGUgPSAnZGVmYXVsdCc7XG4gICAgdGhpcy5zdGF0dXMgPSBvcHRpb25zLnN0YXR1cyA9PT0gdW5kZWZpbmVkID8gMjAwIDogb3B0aW9ucy5zdGF0dXM7XG4gICAgdGhpcy5vayA9IHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMDtcbiAgICB0aGlzLnN0YXR1c1RleHQgPSAnc3RhdHVzVGV4dCcgaW4gb3B0aW9ucyA/IG9wdGlvbnMuc3RhdHVzVGV4dCA6ICdPSyc7XG4gICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKTtcbiAgICB0aGlzLnVybCA9IG9wdGlvbnMudXJsIHx8ICcnO1xuICAgIHRoaXMuX2luaXRCb2R5KGJvZHlJbml0KTtcbiAgfVxuXG4gIEJvZHkuY2FsbChSZXNwb25zZS5wcm90b3R5cGUpO1xuXG4gIFJlc3BvbnNlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UodGhpcy5fYm9keUluaXQsIHtcbiAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgICBzdGF0dXNUZXh0OiB0aGlzLnN0YXR1c1RleHQsXG4gICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpLFxuICAgICAgdXJsOiB0aGlzLnVybFxuICAgIH0pXG4gIH07XG5cbiAgUmVzcG9uc2UuZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogMCwgc3RhdHVzVGV4dDogJyd9KTtcbiAgICByZXNwb25zZS50eXBlID0gJ2Vycm9yJztcbiAgICByZXR1cm4gcmVzcG9uc2VcbiAgfTtcblxuICB2YXIgcmVkaXJlY3RTdGF0dXNlcyA9IFszMDEsIDMwMiwgMzAzLCAzMDcsIDMwOF07XG5cbiAgUmVzcG9uc2UucmVkaXJlY3QgPSBmdW5jdGlvbih1cmwsIHN0YXR1cykge1xuICAgIGlmIChyZWRpcmVjdFN0YXR1c2VzLmluZGV4T2Yoc3RhdHVzKSA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHN0YXR1cyBjb2RlJylcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IHN0YXR1cywgaGVhZGVyczoge2xvY2F0aW9uOiB1cmx9fSlcbiAgfTtcblxuICBleHBvcnRzLkRPTUV4Y2VwdGlvbiA9IHNlbGYuRE9NRXhjZXB0aW9uO1xuICB0cnkge1xuICAgIG5ldyBleHBvcnRzLkRPTUV4Y2VwdGlvbigpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBleHBvcnRzLkRPTUV4Y2VwdGlvbiA9IGZ1bmN0aW9uKG1lc3NhZ2UsIG5hbWUpIHtcbiAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgdmFyIGVycm9yID0gRXJyb3IobWVzc2FnZSk7XG4gICAgICB0aGlzLnN0YWNrID0gZXJyb3Iuc3RhY2s7XG4gICAgfTtcbiAgICBleHBvcnRzLkRPTUV4Y2VwdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG4gICAgZXhwb3J0cy5ET01FeGNlcHRpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gZXhwb3J0cy5ET01FeGNlcHRpb247XG4gIH1cblxuICBmdW5jdGlvbiBmZXRjaChpbnB1dCwgaW5pdCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoaW5wdXQsIGluaXQpO1xuXG4gICAgICBpZiAocmVxdWVzdC5zaWduYWwgJiYgcmVxdWVzdC5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBleHBvcnRzLkRPTUV4Y2VwdGlvbignQWJvcnRlZCcsICdBYm9ydEVycm9yJykpXG4gICAgICB9XG5cbiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgZnVuY3Rpb24gYWJvcnRYaHIoKSB7XG4gICAgICAgIHhoci5hYm9ydCgpO1xuICAgICAgfVxuXG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgIHN0YXR1czogeGhyLnN0YXR1cyxcbiAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dCxcbiAgICAgICAgICBoZWFkZXJzOiBwYXJzZUhlYWRlcnMoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8ICcnKVxuICAgICAgICB9O1xuICAgICAgICBvcHRpb25zLnVybCA9ICdyZXNwb25zZVVSTCcgaW4geGhyID8geGhyLnJlc3BvbnNlVVJMIDogb3B0aW9ucy5oZWFkZXJzLmdldCgnWC1SZXF1ZXN0LVVSTCcpO1xuICAgICAgICB2YXIgYm9keSA9ICdyZXNwb25zZScgaW4geGhyID8geGhyLnJlc3BvbnNlIDogeGhyLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgcmVzb2x2ZShuZXcgUmVzcG9uc2UoYm9keSwgb3B0aW9ucykpO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSk7XG4gICAgICB9O1xuXG4gICAgICB4aHIub250aW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9uYWJvcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBleHBvcnRzLkRPTUV4Y2VwdGlvbignQWJvcnRlZCcsICdBYm9ydEVycm9yJykpO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9wZW4ocmVxdWVzdC5tZXRob2QsIHJlcXVlc3QudXJsLCB0cnVlKTtcblxuICAgICAgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdpbmNsdWRlJykge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAocmVxdWVzdC5jcmVkZW50aWFscyA9PT0gJ29taXQnKSB7XG4gICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCdyZXNwb25zZVR5cGUnIGluIHhociAmJiBzdXBwb3J0LmJsb2IpIHtcbiAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJztcbiAgICAgIH1cblxuICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSwgdmFsdWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXF1ZXN0LnNpZ25hbCkge1xuICAgICAgICByZXF1ZXN0LnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGFib3J0WGhyKTtcblxuICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgLy8gRE9ORSAoc3VjY2VzcyBvciBmYWlsdXJlKVxuICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgcmVxdWVzdC5zaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhYm9ydFhocik7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB4aHIuc2VuZCh0eXBlb2YgcmVxdWVzdC5fYm9keUluaXQgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IHJlcXVlc3QuX2JvZHlJbml0KTtcbiAgICB9KVxuICB9XG5cbiAgZmV0Y2gucG9seWZpbGwgPSB0cnVlO1xuXG4gIGlmICghc2VsZi5mZXRjaCkge1xuICAgIHNlbGYuZmV0Y2ggPSBmZXRjaDtcbiAgICBzZWxmLkhlYWRlcnMgPSBIZWFkZXJzO1xuICAgIHNlbGYuUmVxdWVzdCA9IFJlcXVlc3Q7XG4gICAgc2VsZi5SZXNwb25zZSA9IFJlc3BvbnNlO1xuICB9XG5cbiAgZXhwb3J0cy5IZWFkZXJzID0gSGVhZGVycztcbiAgZXhwb3J0cy5SZXF1ZXN0ID0gUmVxdWVzdDtcbiAgZXhwb3J0cy5SZXNwb25zZSA9IFJlc3BvbnNlO1xuICBleHBvcnRzLmZldGNoID0gZmV0Y2g7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxuICByZXR1cm4gZXhwb3J0cztcblxufSh7fSkpO1xufSkoX19zZWxmX18pO1xuX19zZWxmX18uZmV0Y2gucG9ueWZpbGwgPSB0cnVlO1xuLy8gUmVtb3ZlIFwicG9seWZpbGxcIiBwcm9wZXJ0eSBhZGRlZCBieSB3aGF0d2ctZmV0Y2hcbmRlbGV0ZSBfX3NlbGZfXy5mZXRjaC5wb2x5ZmlsbDtcbi8vIENob29zZSBiZXR3ZWVuIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbiAoZ2xvYmFsKSBvciBjdXN0b20gaW1wbGVtZW50YXRpb24gKF9fc2VsZl9fKVxuLy8gdmFyIGN0eCA9IGdsb2JhbC5mZXRjaCA/IGdsb2JhbCA6IF9fc2VsZl9fO1xudmFyIGN0eCA9IF9fc2VsZl9fOyAvLyB0aGlzIGxpbmUgZGlzYWJsZSBzZXJ2aWNlIHdvcmtlciBzdXBwb3J0IHRlbXBvcmFyaWx5XG5leHBvcnRzID0gY3R4LmZldGNoIC8vIFRvIGVuYWJsZTogaW1wb3J0IGZldGNoIGZyb20gJ2Nyb3NzLWZldGNoJ1xuZXhwb3J0cy5kZWZhdWx0ID0gY3R4LmZldGNoIC8vIEZvciBUeXBlU2NyaXB0IGNvbnN1bWVycyB3aXRob3V0IGVzTW9kdWxlSW50ZXJvcC5cbmV4cG9ydHMuZmV0Y2ggPSBjdHguZmV0Y2ggLy8gVG8gZW5hYmxlOiBpbXBvcnQge2ZldGNofSBmcm9tICdjcm9zcy1mZXRjaCdcbmV4cG9ydHMuSGVhZGVycyA9IGN0eC5IZWFkZXJzXG5leHBvcnRzLlJlcXVlc3QgPSBjdHguUmVxdWVzdFxuZXhwb3J0cy5SZXNwb25zZSA9IGN0eC5SZXNwb25zZVxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzXG4iLCJpbXBvcnQgeyBDYWNoZSwgTG9hZGVyIH0gZnJvbSAndGhyZWUnO1xuaW1wb3J0IGZldGNoIGZyb20gXCJjcm9zcy1mZXRjaFwiXG5cbmNvbnN0IGxvYWRpbmcgPSB7fTtcblxuY2xhc3MgRmlsZUxvYWRlciBleHRlbmRzIExvYWRlciB7XG5cblx0Y29uc3RydWN0b3IobWFuYWdlcikge1xuICAgIHN1cGVyKG1hbmFnZXIpXG4gIH1cblxuXHRsb2FkKHVybCwgb25Mb2FkLCBvblByb2dyZXNzLCBvbkVycm9yKSB7XG5cblx0XHRpZiAodXJsID09PSB1bmRlZmluZWQpIHVybCA9ICcnO1xuXG5cdFx0aWYgKHRoaXMucGF0aCAhPT0gdW5kZWZpbmVkKSB1cmwgPSB0aGlzLnBhdGggKyB1cmw7XG5cblx0XHR1cmwgPSB0aGlzLm1hbmFnZXIucmVzb2x2ZVVSTCh1cmwpO1xuXG5cdFx0Y29uc3Qgc2NvcGUgPSB0aGlzO1xuXG5cdFx0Y29uc3QgY2FjaGVkID0gQ2FjaGUuZ2V0KHVybCk7XG5cblx0XHRpZiAoY2FjaGVkICE9PSB1bmRlZmluZWQpIHtcblxuXHRcdFx0c2NvcGUubWFuYWdlci5pdGVtU3RhcnQodXJsKTtcblxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0aWYgKG9uTG9hZCkgb25Mb2FkKGNhY2hlZCk7XG5cblx0XHRcdFx0c2NvcGUubWFuYWdlci5pdGVtRW5kKHVybCk7XG5cblx0XHRcdH0sIDApO1xuXG5cdFx0XHRyZXR1cm4gY2FjaGVkO1xuXG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgaWYgcmVxdWVzdCBpcyBkdXBsaWNhdGVcblxuXHRcdGlmIChsb2FkaW5nW3VybF0gIT09IHVuZGVmaW5lZCkge1xuXG5cdFx0XHRsb2FkaW5nW3VybF0ucHVzaCh7XG5cblx0XHRcdFx0b25Mb2FkOiBvbkxvYWQsXG5cdFx0XHRcdG9uUHJvZ3Jlc3M6IG9uUHJvZ3Jlc3MsXG5cdFx0XHRcdG9uRXJyb3I6IG9uRXJyb3JcblxuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybjtcblxuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBkYXRhOiBVUklcblx0XHRjb25zdCBkYXRhVXJpUmVnZXggPSAvXmRhdGE6KC4qPykoO2Jhc2U2NCk/LCguKikkLztcblx0XHRjb25zdCBkYXRhVXJpUmVnZXhSZXN1bHQgPSB1cmwubWF0Y2goZGF0YVVyaVJlZ2V4KTtcblxuXHRcdC8vIFNhZmFyaSBjYW4gbm90IGhhbmRsZSBEYXRhIFVSSXMgdGhyb3VnaCBYTUxIdHRwUmVxdWVzdCBzbyBwcm9jZXNzIG1hbnVhbGx5XG5cdFx0aWYgKGRhdGFVcmlSZWdleFJlc3VsdCkge1xuXG5cdFx0XHRjb25zdCBtaW1lVHlwZSA9IGRhdGFVcmlSZWdleFJlc3VsdFsxXTtcblx0XHRcdGNvbnN0IGlzQmFzZTY0ID0gISFkYXRhVXJpUmVnZXhSZXN1bHRbMl07XG5cblx0XHRcdGxldCBkYXRhID0gZGF0YVVyaVJlZ2V4UmVzdWx0WzNdO1xuXHRcdFx0ZGF0YSA9IGRlY29kZVVSSUNvbXBvbmVudChkYXRhKTtcblxuXHRcdFx0aWYgKGlzQmFzZTY0KSBkYXRhID0gYXRvYihkYXRhKTtcblxuXHRcdFx0dHJ5IHtcblxuXHRcdFx0XHRsZXQgcmVzcG9uc2U7XG5cdFx0XHRcdGNvbnN0IHJlc3BvbnNlVHlwZSA9ICh0aGlzLnJlc3BvbnNlVHlwZSB8fCAnJykudG9Mb3dlckNhc2UoKTtcblxuXHRcdFx0XHRzd2l0Y2ggKHJlc3BvbnNlVHlwZSkge1xuXG5cdFx0XHRcdFx0Y2FzZSAnYXJyYXlidWZmZXInOlxuXHRcdFx0XHRcdGNhc2UgJ2Jsb2InOlxuXG5cdFx0XHRcdFx0XHRjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YS5sZW5ndGgpO1xuXG5cdFx0XHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcblxuXHRcdFx0XHRcdFx0XHR2aWV3W2ldID0gZGF0YS5jaGFyQ29kZUF0KGkpO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChyZXNwb25zZVR5cGUgPT09ICdibG9iJykge1xuXG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlID0gbmV3IEJsb2IoW3ZpZXcuYnVmZmVyXSwgeyB0eXBlOiBtaW1lVHlwZSB9KTtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRyZXNwb25zZSA9IHZpZXcuYnVmZmVyO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnZG9jdW1lbnQnOlxuXG5cdFx0XHRcdFx0XHRjb25zdCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XG5cdFx0XHRcdFx0XHRyZXNwb25zZSA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoZGF0YSwgbWltZVR5cGUpO1xuXG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ2pzb24nOlxuXG5cdFx0XHRcdFx0XHRyZXNwb25zZSA9IEpTT04ucGFyc2UoZGF0YSk7XG5cblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0ZGVmYXVsdDogLy8gJ3RleHQnIG9yIG90aGVyXG5cblx0XHRcdFx0XHRcdHJlc3BvbnNlID0gZGF0YTtcblxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFdhaXQgZm9yIG5leHQgYnJvd3NlciB0aWNrIGxpa2Ugc3RhbmRhcmQgWE1MSHR0cFJlcXVlc3QgZXZlbnQgZGlzcGF0Y2hpbmcgZG9lc1xuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdGlmIChvbkxvYWQpIG9uTG9hZChyZXNwb25zZSk7XG5cblx0XHRcdFx0XHRzY29wZS5tYW5hZ2VyLml0ZW1FbmQodXJsKTtcblxuXHRcdFx0XHR9LCAwKTtcblxuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblxuXHRcdFx0XHQvLyBXYWl0IGZvciBuZXh0IGJyb3dzZXIgdGljayBsaWtlIHN0YW5kYXJkIFhNTEh0dHBSZXF1ZXN0IGV2ZW50IGRpc3BhdGNoaW5nIGRvZXNcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRpZiAob25FcnJvcikgb25FcnJvcihlcnJvcik7XG5cblx0XHRcdFx0XHRzY29wZS5tYW5hZ2VyLml0ZW1FcnJvcih1cmwpO1xuXHRcdFx0XHRcdHNjb3BlLm1hbmFnZXIuaXRlbUVuZCh1cmwpO1xuXG5cdFx0XHRcdH0sIDApO1xuXG5cdFx0XHR9XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBJbml0aWFsaXNlIGFycmF5IGZvciBkdXBsaWNhdGUgcmVxdWVzdHNcblxuXHRcdFx0bG9hZGluZ1t1cmxdID0gW107XG5cblx0XHRcdGxvYWRpbmdbdXJsXS5wdXNoKHtcblxuXHRcdFx0XHRvbkxvYWQ6IG9uTG9hZCxcblx0XHRcdFx0b25Qcm9ncmVzczogb25Qcm9ncmVzcyxcblx0XHRcdFx0b25FcnJvcjogb25FcnJvclxuXG5cdFx0XHR9KTtcblxuXG5cdFx0XHRmZXRjaCh1cmwpLnRoZW4ocmVzID0+IHJlcy5ibG9iKCkpLnRoZW4oYXN5bmMgKHJlcykgPT4ge1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIioqKioqKioqKioqKioqKioqIFVSTCBJU1wiLCB1cmwpO1xuXHRcdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcy5hcnJheUJ1ZmZlcigpO1xuXG5cdFx0XHRcdGNvbnN0IGNhbGxiYWNrcyA9IGxvYWRpbmdbdXJsXTtcblx0XHRcdFx0c2NvcGUubWFuYWdlci5pdGVtU3RhcnQodXJsKTtcblxuXHRcdFx0XHRkZWxldGUgbG9hZGluZ1t1cmxdO1xuXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKFwiKioqKioqKioqIEZpbGVMb2FkZXIgTE9BREVEXCIpXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKHJlcyk7XG5cblx0XHRcdFx0Ly8gU29tZSBicm93c2VycyByZXR1cm4gSFRUUCBTdGF0dXMgMCB3aGVuIHVzaW5nIG5vbi1odHRwIHByb3RvY29sXG5cdFx0XHRcdC8vIGUuZy4gJ2ZpbGU6Ly8nIG9yICdkYXRhOi8vJy4gSGFuZGxlIGFzIHN1Y2Nlc3MuXG5cblx0XHRcdFx0aWYgKHJlcy5zdGF0dXMgPT09IDApIGNvbnNvbGUud2FybignVEhSRUUuRmlsZUxvYWRlcjogSFRUUCBTdGF0dXMgMCByZWNlaXZlZC4nKTtcblxuXHRcdFx0XHQvLyBBZGQgdG8gY2FjaGUgb25seSBvbiBIVFRQIHN1Y2Nlc3MsIHNvIHRoYXQgd2UgZG8gbm90IGNhY2hlXG5cdFx0XHRcdC8vIGVycm9yIHJlc3BvbnNlIGJvZGllcyBhcyBwcm9wZXIgcmVzcG9uc2VzIHRvIHJlcXVlc3RzLlxuXHRcdFx0XHRDYWNoZS5hZGQodXJsLCByZXMpO1xuXG5cdFx0XHRcdGZvciAobGV0IGkgPSAwLCBpbCA9IGNhbGxiYWNrcy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7XG5cdFx0XHRcdFx0Ly8gY29uc29sZS5sb2coXCIqKioqKioqKioqKioqKiogQ0FMTEJBQ0tcIilcblxuXHRcdFx0XHRcdGNvbnN0IGNhbGxiYWNrID0gY2FsbGJhY2tzW2ldO1xuXHRcdFx0XHRcdGlmIChjYWxsYmFjay5vbkxvYWQpIGNhbGxiYWNrLm9uTG9hZChyZXNwb25zZSk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHNjb3BlLm1hbmFnZXIuaXRlbUVuZCh1cmwpO1xuXHRcdFx0fSkuY2F0Y2goKGV2ZW50KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGNhbGxiYWNrcyA9IGxvYWRpbmdbdXJsXTtcblxuXHRcdFx0XHRkZWxldGUgbG9hZGluZ1t1cmxdO1xuXG5cdFx0XHRcdGZvciAobGV0IGkgPSAwLCBpbCA9IGNhbGxiYWNrcy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7XG5cblx0XHRcdFx0XHRjb25zdCBjYWxsYmFjayA9IGNhbGxiYWNrc1tpXTtcblx0XHRcdFx0XHRpZiAoY2FsbGJhY2sub25FcnJvcikgY2FsbGJhY2sub25FcnJvcihldmVudCk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHNjb3BlLm1hbmFnZXIuaXRlbUVycm9yKHVybCk7XG5cdFx0XHRcdHNjb3BlLm1hbmFnZXIuaXRlbUVuZCh1cmwpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0c2V0UmVzcG9uc2VUeXBlICh2YWx1ZSkge1xuXG5cdFx0dGhpcy5yZXNwb25zZVR5cGUgPSB2YWx1ZTtcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9XG5cblx0c2V0TWltZVR5cGUgKHZhbHVlKSB7XG5cblx0XHR0aGlzLm1pbWVUeXBlID0gdmFsdWU7XG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fVxuXG59XG5cblxuZXhwb3J0IHsgRmlsZUxvYWRlciB9O1xuIiwiaW1wb3J0IHtcblx0QW5pbWF0aW9uQ2xpcCxcblx0Qm9uZSxcblx0Qm94Myxcblx0QnVmZmVyQXR0cmlidXRlLFxuXHRCdWZmZXJHZW9tZXRyeSxcblx0Q2xhbXBUb0VkZ2VXcmFwcGluZyxcblx0Q29sb3IsXG5cdERpcmVjdGlvbmFsTGlnaHQsXG5cdERvdWJsZVNpZGUsXG5cdEZyb250U2lkZSxcblx0R3JvdXAsXG5cdEltYWdlQml0bWFwTG9hZGVyLFxuXHRJbnRlcmxlYXZlZEJ1ZmZlcixcblx0SW50ZXJsZWF2ZWRCdWZmZXJBdHRyaWJ1dGUsXG5cdEludGVycG9sYW50LFxuXHRJbnRlcnBvbGF0ZURpc2NyZXRlLFxuXHRJbnRlcnBvbGF0ZUxpbmVhcixcblx0TGluZSxcblx0TGluZUJhc2ljTWF0ZXJpYWwsXG5cdExpbmVMb29wLFxuXHRMaW5lU2VnbWVudHMsXG5cdExpbmVhckZpbHRlcixcblx0TGluZWFyTWlwbWFwTGluZWFyRmlsdGVyLFxuXHRMaW5lYXJNaXBtYXBOZWFyZXN0RmlsdGVyLFxuXHRMb2FkZXIsXG5cdExvYWRlclV0aWxzLFxuXHRNYXRlcmlhbCxcblx0TWF0aFV0aWxzLFxuXHRNYXRyaXg0LFxuXHRNZXNoLFxuXHRNZXNoQmFzaWNNYXRlcmlhbCxcblx0TWVzaFBoeXNpY2FsTWF0ZXJpYWwsXG5cdE1lc2hTdGFuZGFyZE1hdGVyaWFsLFxuXHRNaXJyb3JlZFJlcGVhdFdyYXBwaW5nLFxuXHROZWFyZXN0RmlsdGVyLFxuXHROZWFyZXN0TWlwbWFwTGluZWFyRmlsdGVyLFxuXHROZWFyZXN0TWlwbWFwTmVhcmVzdEZpbHRlcixcblx0TnVtYmVyS2V5ZnJhbWVUcmFjayxcblx0T2JqZWN0M0QsXG5cdE9ydGhvZ3JhcGhpY0NhbWVyYSxcblx0UGVyc3BlY3RpdmVDYW1lcmEsXG5cdFBvaW50TGlnaHQsXG5cdFBvaW50cyxcblx0UG9pbnRzTWF0ZXJpYWwsXG5cdFByb3BlcnR5QmluZGluZyxcblx0UXVhdGVybmlvbktleWZyYW1lVHJhY2ssXG5cdFJHQkZvcm1hdCxcblx0UmVwZWF0V3JhcHBpbmcsXG5cdFNrZWxldG9uLFxuXHRTa2lubmVkTWVzaCxcblx0U3BoZXJlLFxuXHRTcG90TGlnaHQsXG5cdFRhbmdlbnRTcGFjZU5vcm1hbE1hcCxcblx0VGV4dHVyZSxcblx0VGV4dHVyZUxvYWRlcixcblx0VHJpYW5nbGVGYW5EcmF3TW9kZSxcblx0VHJpYW5nbGVTdHJpcERyYXdNb2RlLFxuXHRWZWN0b3IyLFxuXHRWZWN0b3IzLFxuXHRWZWN0b3JLZXlmcmFtZVRyYWNrLFxuXHRzUkdCRW5jb2Rpbmdcbn0gZnJvbSAndGhyZWUnO1xuXG5pbXBvcnQgeyBGaWxlTG9hZGVyIH0gZnJvbSAnLi9GaWxlTG9hZGVyJztcblxuY2xhc3MgR0xURkxvYWRlciBleHRlbmRzIExvYWRlciB7XG5cblx0Y29uc3RydWN0b3IoIG1hbmFnZXIgKSB7XG5cblx0XHRzdXBlciggbWFuYWdlciApO1xuXG5cdFx0dGhpcy5kcmFjb0xvYWRlciA9IG51bGw7XG5cdFx0dGhpcy5rdHgyTG9hZGVyID0gbnVsbDtcblx0XHR0aGlzLm1lc2hvcHREZWNvZGVyID0gbnVsbDtcblxuXHRcdHRoaXMucGx1Z2luQ2FsbGJhY2tzID0gW107XG5cblx0XHR0aGlzLnJlZ2lzdGVyKCBmdW5jdGlvbiAoIHBhcnNlciApIHtcblxuXHRcdFx0cmV0dXJuIG5ldyBHTFRGTWF0ZXJpYWxzQ2xlYXJjb2F0RXh0ZW5zaW9uKCBwYXJzZXIgKTtcblxuXHRcdH0gKTtcblxuXHRcdHRoaXMucmVnaXN0ZXIoIGZ1bmN0aW9uICggcGFyc2VyICkge1xuXG5cdFx0XHRyZXR1cm4gbmV3IEdMVEZUZXh0dXJlQmFzaXNVRXh0ZW5zaW9uKCBwYXJzZXIgKTtcblxuXHRcdH0gKTtcblxuXHRcdHRoaXMucmVnaXN0ZXIoIGZ1bmN0aW9uICggcGFyc2VyICkge1xuXG5cdFx0XHRyZXR1cm4gbmV3IEdMVEZUZXh0dXJlV2ViUEV4dGVuc2lvbiggcGFyc2VyICk7XG5cblx0XHR9ICk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyKCBmdW5jdGlvbiAoIHBhcnNlciApIHtcblxuXHRcdFx0cmV0dXJuIG5ldyBHTFRGTWF0ZXJpYWxzVHJhbnNtaXNzaW9uRXh0ZW5zaW9uKCBwYXJzZXIgKTtcblxuXHRcdH0gKTtcblxuXHRcdHRoaXMucmVnaXN0ZXIoIGZ1bmN0aW9uICggcGFyc2VyICkge1xuXG5cdFx0XHRyZXR1cm4gbmV3IEdMVEZMaWdodHNFeHRlbnNpb24oIHBhcnNlciApO1xuXG5cdFx0fSApO1xuXG5cdFx0dGhpcy5yZWdpc3RlciggZnVuY3Rpb24gKCBwYXJzZXIgKSB7XG5cblx0XHRcdHJldHVybiBuZXcgR0xURk1lc2hvcHRDb21wcmVzc2lvbiggcGFyc2VyICk7XG5cblx0XHR9ICk7XG5cblx0fVxuXG5cdGxvYWQoIHVybCwgb25Mb2FkLCBvblByb2dyZXNzLCBvbkVycm9yICkge1xuXG5cdFx0Y29uc3Qgc2NvcGUgPSB0aGlzO1xuXG5cdFx0bGV0IHJlc291cmNlUGF0aDtcblxuXHRcdGlmICggdGhpcy5yZXNvdXJjZVBhdGggIT09ICcnICkge1xuXG5cdFx0XHRyZXNvdXJjZVBhdGggPSB0aGlzLnJlc291cmNlUGF0aDtcblxuXHRcdH0gZWxzZSBpZiAoIHRoaXMucGF0aCAhPT0gJycgKSB7XG5cblx0XHRcdHJlc291cmNlUGF0aCA9IHRoaXMucGF0aDtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdHJlc291cmNlUGF0aCA9IExvYWRlclV0aWxzLmV4dHJhY3RVcmxCYXNlKCB1cmwgKTtcblxuXHRcdH1cblxuXHRcdC8vIFRlbGxzIHRoZSBMb2FkaW5nTWFuYWdlciB0byB0cmFjayBhbiBleHRyYSBpdGVtLCB3aGljaCByZXNvbHZlcyBhZnRlclxuXHRcdC8vIHRoZSBtb2RlbCBpcyBmdWxseSBsb2FkZWQuIFRoaXMgbWVhbnMgdGhlIGNvdW50IG9mIGl0ZW1zIGxvYWRlZCB3aWxsXG5cdFx0Ly8gYmUgaW5jb3JyZWN0LCBidXQgZW5zdXJlcyBtYW5hZ2VyLm9uTG9hZCgpIGRvZXMgbm90IGZpcmUgZWFybHkuXG5cdFx0dGhpcy5tYW5hZ2VyLml0ZW1TdGFydCggdXJsICk7XG5cblx0XHRjb25zdCBfb25FcnJvciA9IGZ1bmN0aW9uICggZSApIHtcblxuXHRcdFx0aWYgKCBvbkVycm9yICkge1xuXG5cdFx0XHRcdG9uRXJyb3IoIGUgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCBlICk7XG5cblx0XHRcdH1cblxuXHRcdFx0c2NvcGUubWFuYWdlci5pdGVtRXJyb3IoIHVybCApO1xuXHRcdFx0c2NvcGUubWFuYWdlci5pdGVtRW5kKCB1cmwgKTtcblxuXHRcdH07XG5cblx0XHRjb25zdCBsb2FkZXIgPSBuZXcgRmlsZUxvYWRlciggdGhpcy5tYW5hZ2VyICk7XG5cblx0XHRsb2FkZXIuc2V0UGF0aCggdGhpcy5wYXRoICk7XG5cdFx0bG9hZGVyLnNldFJlc3BvbnNlVHlwZSggJ2FycmF5YnVmZmVyJyApO1xuXHRcdGxvYWRlci5zZXRSZXF1ZXN0SGVhZGVyKCB0aGlzLnJlcXVlc3RIZWFkZXIgKTtcblx0XHRsb2FkZXIuc2V0V2l0aENyZWRlbnRpYWxzKCB0aGlzLndpdGhDcmVkZW50aWFscyApO1xuXG5cdFx0bG9hZGVyLmxvYWQoIHVybCwgZnVuY3Rpb24gKCBkYXRhICkge1xuXG5cdFx0XHR0cnkge1xuXG5cdFx0XHRcdHNjb3BlLnBhcnNlKCBkYXRhLCByZXNvdXJjZVBhdGgsIGZ1bmN0aW9uICggZ2x0ZiApIHtcblxuXHRcdFx0XHRcdG9uTG9hZCggZ2x0ZiApO1xuXG5cdFx0XHRcdFx0c2NvcGUubWFuYWdlci5pdGVtRW5kKCB1cmwgKTtcblxuXHRcdFx0XHR9LCBfb25FcnJvciApO1xuXG5cdFx0XHR9IGNhdGNoICggZSApIHtcblxuXHRcdFx0XHRfb25FcnJvciggZSApO1xuXG5cdFx0XHR9XG5cblx0XHR9LCBvblByb2dyZXNzLCBfb25FcnJvciApO1xuXG5cdH1cblxuXHRzZXREUkFDT0xvYWRlciggZHJhY29Mb2FkZXIgKSB7XG5cblx0XHR0aGlzLmRyYWNvTG9hZGVyID0gZHJhY29Mb2FkZXI7XG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fVxuXG5cdHNldEREU0xvYWRlcigpIHtcblxuXHRcdHRocm93IG5ldyBFcnJvcihcblxuXHRcdFx0J1RIUkVFLkdMVEZMb2FkZXI6IFwiTVNGVF90ZXh0dXJlX2Rkc1wiIG5vIGxvbmdlciBzdXBwb3J0ZWQuIFBsZWFzZSB1cGRhdGUgdG8gXCJLSFJfdGV4dHVyZV9iYXNpc3VcIi4nXG5cblx0XHQpO1xuXG5cdH1cblxuXHRzZXRLVFgyTG9hZGVyKCBrdHgyTG9hZGVyICkge1xuXG5cdFx0dGhpcy5rdHgyTG9hZGVyID0ga3R4MkxvYWRlcjtcblx0XHRyZXR1cm4gdGhpcztcblxuXHR9XG5cblx0c2V0TWVzaG9wdERlY29kZXIoIG1lc2hvcHREZWNvZGVyICkge1xuXG5cdFx0dGhpcy5tZXNob3B0RGVjb2RlciA9IG1lc2hvcHREZWNvZGVyO1xuXHRcdHJldHVybiB0aGlzO1xuXG5cdH1cblxuXHRyZWdpc3RlciggY2FsbGJhY2sgKSB7XG5cblx0XHRpZiAoIHRoaXMucGx1Z2luQ2FsbGJhY2tzLmluZGV4T2YoIGNhbGxiYWNrICkgPT09IC0gMSApIHtcblxuXHRcdFx0dGhpcy5wbHVnaW5DYWxsYmFja3MucHVzaCggY2FsbGJhY2sgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXG5cdH1cblxuXHR1bnJlZ2lzdGVyKCBjYWxsYmFjayApIHtcblxuXHRcdGlmICggdGhpcy5wbHVnaW5DYWxsYmFja3MuaW5kZXhPZiggY2FsbGJhY2sgKSAhPT0gLSAxICkge1xuXG5cdFx0XHR0aGlzLnBsdWdpbkNhbGxiYWNrcy5zcGxpY2UoIHRoaXMucGx1Z2luQ2FsbGJhY2tzLmluZGV4T2YoIGNhbGxiYWNrICksIDEgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXG5cdH1cblxuXHRwYXJzZSggZGF0YSwgcGF0aCwgb25Mb2FkLCBvbkVycm9yICkge1xuXG5cdFx0bGV0IGNvbnRlbnQ7XG5cdFx0Y29uc3QgZXh0ZW5zaW9ucyA9IHt9O1xuXHRcdGNvbnN0IHBsdWdpbnMgPSB7fTtcblxuXHRcdGlmICggdHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnICkge1xuXG5cdFx0XHRjb250ZW50ID0gZGF0YTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdGNvbnN0IG1hZ2ljID0gTG9hZGVyVXRpbHMuZGVjb2RlVGV4dCggbmV3IFVpbnQ4QXJyYXkoIGRhdGEsIDAsIDQgKSApO1xuXG5cdFx0XHRpZiAoIG1hZ2ljID09PSBCSU5BUllfRVhURU5TSU9OX0hFQURFUl9NQUdJQyApIHtcblxuXHRcdFx0XHR0cnkge1xuXG5cdFx0XHRcdFx0ZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfQklOQVJZX0dMVEYgXSA9IG5ldyBHTFRGQmluYXJ5RXh0ZW5zaW9uKCBkYXRhICk7XG5cblx0XHRcdFx0fSBjYXRjaCAoIGVycm9yICkge1xuXG5cdFx0XHRcdFx0aWYgKCBvbkVycm9yICkgb25FcnJvciggZXJyb3IgKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnRlbnQgPSBleHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9CSU5BUllfR0xURiBdLmNvbnRlbnQ7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Y29udGVudCA9IExvYWRlclV0aWxzLmRlY29kZVRleHQoIG5ldyBVaW50OEFycmF5KCBkYXRhICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0Y29uc3QganNvbiA9IEpTT04ucGFyc2UoIGNvbnRlbnQgKTtcblxuXHRcdGlmICgganNvbi5hc3NldCA9PT0gdW5kZWZpbmVkIHx8IGpzb24uYXNzZXQudmVyc2lvblsgMCBdIDwgMiApIHtcblxuXHRcdFx0aWYgKCBvbkVycm9yICkgb25FcnJvciggbmV3IEVycm9yKCAnVEhSRUUuR0xURkxvYWRlcjogVW5zdXBwb3J0ZWQgYXNzZXQuIGdsVEYgdmVyc2lvbnMgPj0yLjAgYXJlIHN1cHBvcnRlZC4nICkgKTtcblx0XHRcdHJldHVybjtcblxuXHRcdH1cblxuXHRcdGNvbnN0IHBhcnNlciA9IG5ldyBHTFRGUGFyc2VyKCBqc29uLCB7XG5cblx0XHRcdHBhdGg6IHBhdGggfHwgdGhpcy5yZXNvdXJjZVBhdGggfHwgJycsXG5cdFx0XHRjcm9zc09yaWdpbjogdGhpcy5jcm9zc09yaWdpbixcblx0XHRcdHJlcXVlc3RIZWFkZXI6IHRoaXMucmVxdWVzdEhlYWRlcixcblx0XHRcdG1hbmFnZXI6IHRoaXMubWFuYWdlcixcblx0XHRcdGt0eDJMb2FkZXI6IHRoaXMua3R4MkxvYWRlcixcblx0XHRcdG1lc2hvcHREZWNvZGVyOiB0aGlzLm1lc2hvcHREZWNvZGVyXG5cblx0XHR9ICk7XG5cblx0XHRwYXJzZXIuZmlsZUxvYWRlci5zZXRSZXF1ZXN0SGVhZGVyKCB0aGlzLnJlcXVlc3RIZWFkZXIgKTtcblxuXHRcdGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMucGx1Z2luQ2FsbGJhY2tzLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0Y29uc3QgcGx1Z2luID0gdGhpcy5wbHVnaW5DYWxsYmFja3NbIGkgXSggcGFyc2VyICk7XG5cdFx0XHRwbHVnaW5zWyBwbHVnaW4ubmFtZSBdID0gcGx1Z2luO1xuXG5cdFx0XHQvLyBXb3JrYXJvdW5kIHRvIGF2b2lkIGRldGVybWluaW5nIGFzIHVua25vd24gZXh0ZW5zaW9uXG5cdFx0XHQvLyBpbiBhZGRVbmtub3duRXh0ZW5zaW9uc1RvVXNlckRhdGEoKS5cblx0XHRcdC8vIFJlbW92ZSB0aGlzIHdvcmthcm91bmQgaWYgd2UgbW92ZSBhbGwgdGhlIGV4aXN0aW5nXG5cdFx0XHQvLyBleHRlbnNpb24gaGFuZGxlcnMgdG8gcGx1Z2luIHN5c3RlbVxuXHRcdFx0ZXh0ZW5zaW9uc1sgcGx1Z2luLm5hbWUgXSA9IHRydWU7XG5cblx0XHR9XG5cblx0XHRpZiAoIGpzb24uZXh0ZW5zaW9uc1VzZWQgKSB7XG5cblx0XHRcdGZvciAoIGxldCBpID0gMDsgaSA8IGpzb24uZXh0ZW5zaW9uc1VzZWQubGVuZ3RoOyArKyBpICkge1xuXG5cdFx0XHRcdGNvbnN0IGV4dGVuc2lvbk5hbWUgPSBqc29uLmV4dGVuc2lvbnNVc2VkWyBpIF07XG5cdFx0XHRcdGNvbnN0IGV4dGVuc2lvbnNSZXF1aXJlZCA9IGpzb24uZXh0ZW5zaW9uc1JlcXVpcmVkIHx8IFtdO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGV4dGVuc2lvbk5hbWUgKSB7XG5cblx0XHRcdFx0XHRjYXNlIEVYVEVOU0lPTlMuS0hSX01BVEVSSUFMU19VTkxJVDpcblx0XHRcdFx0XHRcdGV4dGVuc2lvbnNbIGV4dGVuc2lvbk5hbWUgXSA9IG5ldyBHTFRGTWF0ZXJpYWxzVW5saXRFeHRlbnNpb24oKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSBFWFRFTlNJT05TLktIUl9NQVRFUklBTFNfUEJSX1NQRUNVTEFSX0dMT1NTSU5FU1M6XG5cdFx0XHRcdFx0XHRleHRlbnNpb25zWyBleHRlbnNpb25OYW1lIF0gPSBuZXcgR0xURk1hdGVyaWFsc1BiclNwZWN1bGFyR2xvc3NpbmVzc0V4dGVuc2lvbigpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlIEVYVEVOU0lPTlMuS0hSX0RSQUNPX01FU0hfQ09NUFJFU1NJT046XG5cdFx0XHRcdFx0XHRleHRlbnNpb25zWyBleHRlbnNpb25OYW1lIF0gPSBuZXcgR0xURkRyYWNvTWVzaENvbXByZXNzaW9uRXh0ZW5zaW9uKCBqc29uLCB0aGlzLmRyYWNvTG9hZGVyICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgRVhURU5TSU9OUy5LSFJfVEVYVFVSRV9UUkFOU0ZPUk06XG5cdFx0XHRcdFx0XHRleHRlbnNpb25zWyBleHRlbnNpb25OYW1lIF0gPSBuZXcgR0xURlRleHR1cmVUcmFuc2Zvcm1FeHRlbnNpb24oKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSBFWFRFTlNJT05TLktIUl9NRVNIX1FVQU5USVpBVElPTjpcblx0XHRcdFx0XHRcdGV4dGVuc2lvbnNbIGV4dGVuc2lvbk5hbWUgXSA9IG5ldyBHTFRGTWVzaFF1YW50aXphdGlvbkV4dGVuc2lvbigpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRkZWZhdWx0OlxuXG5cdFx0XHRcdFx0XHRpZiAoIGV4dGVuc2lvbnNSZXF1aXJlZC5pbmRleE9mKCBleHRlbnNpb25OYW1lICkgPj0gMCAmJiBwbHVnaW5zWyBleHRlbnNpb25OYW1lIF0gPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5HTFRGTG9hZGVyOiBVbmtub3duIGV4dGVuc2lvbiBcIicgKyBleHRlbnNpb25OYW1lICsgJ1wiLicgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0cGFyc2VyLnNldEV4dGVuc2lvbnMoIGV4dGVuc2lvbnMgKTtcblx0XHRwYXJzZXIuc2V0UGx1Z2lucyggcGx1Z2lucyApO1xuICAgIHBhcnNlci5wYXJzZSggb25Mb2FkLCBvbkVycm9yICk7XG5cblx0fVxuXG59XG5cbi8qIEdMVEZSRUdJU1RSWSAqL1xuXG5mdW5jdGlvbiBHTFRGUmVnaXN0cnkoKSB7XG5cblx0bGV0IG9iamVjdHMgPSB7fTtcblxuXHRyZXR1cm5cdHtcblxuXHRcdGdldDogZnVuY3Rpb24gKCBrZXkgKSB7XG5cblx0XHRcdHJldHVybiBvYmplY3RzWyBrZXkgXTtcblxuXHRcdH0sXG5cblx0XHRhZGQ6IGZ1bmN0aW9uICgga2V5LCBvYmplY3QgKSB7XG5cblx0XHRcdG9iamVjdHNbIGtleSBdID0gb2JqZWN0O1xuXG5cdFx0fSxcblxuXHRcdHJlbW92ZTogZnVuY3Rpb24gKCBrZXkgKSB7XG5cblx0XHRcdGRlbGV0ZSBvYmplY3RzWyBrZXkgXTtcblxuXHRcdH0sXG5cblx0XHRyZW1vdmVBbGw6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0b2JqZWN0cyA9IHt9O1xuXG5cdFx0fVxuXG5cdH07XG5cbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKioqKioqIEVYVEVOU0lPTlMgKioqKioqKioqKiovXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5jb25zdCBFWFRFTlNJT05TID0ge1xuXHRLSFJfQklOQVJZX0dMVEY6ICdLSFJfYmluYXJ5X2dsVEYnLFxuXHRLSFJfRFJBQ09fTUVTSF9DT01QUkVTU0lPTjogJ0tIUl9kcmFjb19tZXNoX2NvbXByZXNzaW9uJyxcblx0S0hSX0xJR0hUU19QVU5DVFVBTDogJ0tIUl9saWdodHNfcHVuY3R1YWwnLFxuXHRLSFJfTUFURVJJQUxTX0NMRUFSQ09BVDogJ0tIUl9tYXRlcmlhbHNfY2xlYXJjb2F0Jyxcblx0S0hSX01BVEVSSUFMU19QQlJfU1BFQ1VMQVJfR0xPU1NJTkVTUzogJ0tIUl9tYXRlcmlhbHNfcGJyU3BlY3VsYXJHbG9zc2luZXNzJyxcblx0S0hSX01BVEVSSUFMU19UUkFOU01JU1NJT046ICdLSFJfbWF0ZXJpYWxzX3RyYW5zbWlzc2lvbicsXG5cdEtIUl9NQVRFUklBTFNfVU5MSVQ6ICdLSFJfbWF0ZXJpYWxzX3VubGl0Jyxcblx0S0hSX1RFWFRVUkVfQkFTSVNVOiAnS0hSX3RleHR1cmVfYmFzaXN1Jyxcblx0S0hSX1RFWFRVUkVfVFJBTlNGT1JNOiAnS0hSX3RleHR1cmVfdHJhbnNmb3JtJyxcblx0S0hSX01FU0hfUVVBTlRJWkFUSU9OOiAnS0hSX21lc2hfcXVhbnRpemF0aW9uJyxcblx0RVhUX1RFWFRVUkVfV0VCUDogJ0VYVF90ZXh0dXJlX3dlYnAnLFxuXHRFWFRfTUVTSE9QVF9DT01QUkVTU0lPTjogJ0VYVF9tZXNob3B0X2NvbXByZXNzaW9uJ1xufTtcblxuLyoqXG4gKiBQdW5jdHVhbCBMaWdodHMgRXh0ZW5zaW9uXG4gKlxuICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX2xpZ2h0c19wdW5jdHVhbFxuICovXG5jbGFzcyBHTFRGTGlnaHRzRXh0ZW5zaW9uIHtcblxuXHRjb25zdHJ1Y3RvciggcGFyc2VyICkge1xuXG5cdFx0dGhpcy5wYXJzZXIgPSBwYXJzZXI7XG5cdFx0dGhpcy5uYW1lID0gRVhURU5TSU9OUy5LSFJfTElHSFRTX1BVTkNUVUFMO1xuXG5cdFx0Ly8gT2JqZWN0M0QgaW5zdGFuY2UgY2FjaGVzXG5cdFx0dGhpcy5jYWNoZSA9IHsgcmVmczoge30sIHVzZXM6IHt9IH07XG5cblx0fVxuXG5cdF9tYXJrRGVmcygpIHtcblxuXHRcdGNvbnN0IHBhcnNlciA9IHRoaXMucGFyc2VyO1xuXHRcdGNvbnN0IG5vZGVEZWZzID0gdGhpcy5wYXJzZXIuanNvbi5ub2RlcyB8fCBbXTtcblxuXHRcdGZvciAoIGxldCBub2RlSW5kZXggPSAwLCBub2RlTGVuZ3RoID0gbm9kZURlZnMubGVuZ3RoOyBub2RlSW5kZXggPCBub2RlTGVuZ3RoOyBub2RlSW5kZXggKysgKSB7XG5cblx0XHRcdGNvbnN0IG5vZGVEZWYgPSBub2RlRGVmc1sgbm9kZUluZGV4IF07XG5cblx0XHRcdGlmICggbm9kZURlZi5leHRlbnNpb25zXG5cdFx0XHRcdFx0JiYgbm9kZURlZi5leHRlbnNpb25zWyB0aGlzLm5hbWUgXVxuXHRcdFx0XHRcdCYmIG5vZGVEZWYuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF0ubGlnaHQgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRwYXJzZXIuX2FkZE5vZGVSZWYoIHRoaXMuY2FjaGUsIG5vZGVEZWYuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF0ubGlnaHQgKTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdH1cblxuXHRfbG9hZExpZ2h0KCBsaWdodEluZGV4ICkge1xuXG5cdFx0Y29uc3QgcGFyc2VyID0gdGhpcy5wYXJzZXI7XG5cdFx0Y29uc3QgY2FjaGVLZXkgPSAnbGlnaHQ6JyArIGxpZ2h0SW5kZXg7XG5cdFx0bGV0IGRlcGVuZGVuY3kgPSBwYXJzZXIuY2FjaGUuZ2V0KCBjYWNoZUtleSApO1xuXG5cdFx0aWYgKCBkZXBlbmRlbmN5ICkgcmV0dXJuIGRlcGVuZGVuY3k7XG5cblx0XHRjb25zdCBqc29uID0gcGFyc2VyLmpzb247XG5cdFx0Y29uc3QgZXh0ZW5zaW9ucyA9ICgganNvbi5leHRlbnNpb25zICYmIGpzb24uZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF0gKSB8fCB7fTtcblx0XHRjb25zdCBsaWdodERlZnMgPSBleHRlbnNpb25zLmxpZ2h0cyB8fCBbXTtcblx0XHRjb25zdCBsaWdodERlZiA9IGxpZ2h0RGVmc1sgbGlnaHRJbmRleCBdO1xuXHRcdGxldCBsaWdodE5vZGU7XG5cblx0XHRjb25zdCBjb2xvciA9IG5ldyBDb2xvciggMHhmZmZmZmYgKTtcblxuXHRcdGlmICggbGlnaHREZWYuY29sb3IgIT09IHVuZGVmaW5lZCApIGNvbG9yLmZyb21BcnJheSggbGlnaHREZWYuY29sb3IgKTtcblxuXHRcdGNvbnN0IHJhbmdlID0gbGlnaHREZWYucmFuZ2UgIT09IHVuZGVmaW5lZCA/IGxpZ2h0RGVmLnJhbmdlIDogMDtcblxuXHRcdHN3aXRjaCAoIGxpZ2h0RGVmLnR5cGUgKSB7XG5cblx0XHRcdGNhc2UgJ2RpcmVjdGlvbmFsJzpcblx0XHRcdFx0bGlnaHROb2RlID0gbmV3IERpcmVjdGlvbmFsTGlnaHQoIGNvbG9yICk7XG5cdFx0XHRcdGxpZ2h0Tm9kZS50YXJnZXQucG9zaXRpb24uc2V0KCAwLCAwLCAtIDEgKTtcblx0XHRcdFx0bGlnaHROb2RlLmFkZCggbGlnaHROb2RlLnRhcmdldCApO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAncG9pbnQnOlxuXHRcdFx0XHRsaWdodE5vZGUgPSBuZXcgUG9pbnRMaWdodCggY29sb3IgKTtcblx0XHRcdFx0bGlnaHROb2RlLmRpc3RhbmNlID0gcmFuZ2U7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlICdzcG90Jzpcblx0XHRcdFx0bGlnaHROb2RlID0gbmV3IFNwb3RMaWdodCggY29sb3IgKTtcblx0XHRcdFx0bGlnaHROb2RlLmRpc3RhbmNlID0gcmFuZ2U7XG5cdFx0XHRcdC8vIEhhbmRsZSBzcG90bGlnaHQgcHJvcGVydGllcy5cblx0XHRcdFx0bGlnaHREZWYuc3BvdCA9IGxpZ2h0RGVmLnNwb3QgfHwge307XG5cdFx0XHRcdGxpZ2h0RGVmLnNwb3QuaW5uZXJDb25lQW5nbGUgPSBsaWdodERlZi5zcG90LmlubmVyQ29uZUFuZ2xlICE9PSB1bmRlZmluZWQgPyBsaWdodERlZi5zcG90LmlubmVyQ29uZUFuZ2xlIDogMDtcblx0XHRcdFx0bGlnaHREZWYuc3BvdC5vdXRlckNvbmVBbmdsZSA9IGxpZ2h0RGVmLnNwb3Qub3V0ZXJDb25lQW5nbGUgIT09IHVuZGVmaW5lZCA/IGxpZ2h0RGVmLnNwb3Qub3V0ZXJDb25lQW5nbGUgOiBNYXRoLlBJIC8gNC4wO1xuXHRcdFx0XHRsaWdodE5vZGUuYW5nbGUgPSBsaWdodERlZi5zcG90Lm91dGVyQ29uZUFuZ2xlO1xuXHRcdFx0XHRsaWdodE5vZGUucGVudW1icmEgPSAxLjAgLSBsaWdodERlZi5zcG90LmlubmVyQ29uZUFuZ2xlIC8gbGlnaHREZWYuc3BvdC5vdXRlckNvbmVBbmdsZTtcblx0XHRcdFx0bGlnaHROb2RlLnRhcmdldC5wb3NpdGlvbi5zZXQoIDAsIDAsIC0gMSApO1xuXHRcdFx0XHRsaWdodE5vZGUuYWRkKCBsaWdodE5vZGUudGFyZ2V0ICk7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBVbmV4cGVjdGVkIGxpZ2h0IHR5cGU6ICcgKyBsaWdodERlZi50eXBlICk7XG5cblx0XHR9XG5cblx0XHQvLyBTb21lIGxpZ2h0cyAoZS5nLiBzcG90KSBkZWZhdWx0IHRvIGEgcG9zaXRpb24gb3RoZXIgdGhhbiB0aGUgb3JpZ2luLiBSZXNldCB0aGUgcG9zaXRpb25cblx0XHQvLyBoZXJlLCBiZWNhdXNlIG5vZGUtbGV2ZWwgcGFyc2luZyB3aWxsIG9ubHkgb3ZlcnJpZGUgcG9zaXRpb24gaWYgZXhwbGljaXRseSBzcGVjaWZpZWQuXG5cdFx0bGlnaHROb2RlLnBvc2l0aW9uLnNldCggMCwgMCwgMCApO1xuXG5cdFx0bGlnaHROb2RlLmRlY2F5ID0gMjtcblxuXHRcdGlmICggbGlnaHREZWYuaW50ZW5zaXR5ICE9PSB1bmRlZmluZWQgKSBsaWdodE5vZGUuaW50ZW5zaXR5ID0gbGlnaHREZWYuaW50ZW5zaXR5O1xuXG5cdFx0bGlnaHROb2RlLm5hbWUgPSBwYXJzZXIuY3JlYXRlVW5pcXVlTmFtZSggbGlnaHREZWYubmFtZSB8fCAoICdsaWdodF8nICsgbGlnaHRJbmRleCApICk7XG5cblx0XHRkZXBlbmRlbmN5ID0gUHJvbWlzZS5yZXNvbHZlKCBsaWdodE5vZGUgKTtcblxuXHRcdHBhcnNlci5jYWNoZS5hZGQoIGNhY2hlS2V5LCBkZXBlbmRlbmN5ICk7XG5cblx0XHRyZXR1cm4gZGVwZW5kZW5jeTtcblxuXHR9XG5cblx0Y3JlYXRlTm9kZUF0dGFjaG1lbnQoIG5vZGVJbmRleCApIHtcblxuXHRcdGNvbnN0IHNlbGYgPSB0aGlzO1xuXHRcdGNvbnN0IHBhcnNlciA9IHRoaXMucGFyc2VyO1xuXHRcdGNvbnN0IGpzb24gPSBwYXJzZXIuanNvbjtcblx0XHRjb25zdCBub2RlRGVmID0ganNvbi5ub2Rlc1sgbm9kZUluZGV4IF07XG5cdFx0Y29uc3QgbGlnaHREZWYgPSAoIG5vZGVEZWYuZXh0ZW5zaW9ucyAmJiBub2RlRGVmLmV4dGVuc2lvbnNbIHRoaXMubmFtZSBdICkgfHwge307XG5cdFx0Y29uc3QgbGlnaHRJbmRleCA9IGxpZ2h0RGVmLmxpZ2h0O1xuXG5cdFx0aWYgKCBsaWdodEluZGV4ID09PSB1bmRlZmluZWQgKSByZXR1cm4gbnVsbDtcblxuXHRcdHJldHVybiB0aGlzLl9sb2FkTGlnaHQoIGxpZ2h0SW5kZXggKS50aGVuKCBmdW5jdGlvbiAoIGxpZ2h0ICkge1xuXG5cdFx0XHRyZXR1cm4gcGFyc2VyLl9nZXROb2RlUmVmKCBzZWxmLmNhY2hlLCBsaWdodEluZGV4LCBsaWdodCApO1xuXG5cdFx0fSApO1xuXG5cdH1cblxufVxuXG4vKipcbiAqIFVubGl0IE1hdGVyaWFscyBFeHRlbnNpb25cbiAqXG4gKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfbWF0ZXJpYWxzX3VubGl0XG4gKi9cbmNsYXNzIEdMVEZNYXRlcmlhbHNVbmxpdEV4dGVuc2lvbiB7XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cblx0XHR0aGlzLm5hbWUgPSBFWFRFTlNJT05TLktIUl9NQVRFUklBTFNfVU5MSVQ7XG5cblx0fVxuXG5cdGdldE1hdGVyaWFsVHlwZSgpIHtcblxuXHRcdHJldHVybiBNZXNoQmFzaWNNYXRlcmlhbDtcblxuXHR9XG5cblx0ZXh0ZW5kUGFyYW1zKCBtYXRlcmlhbFBhcmFtcywgbWF0ZXJpYWxEZWYsIHBhcnNlciApIHtcblxuXHRcdGNvbnN0IHBlbmRpbmcgPSBbXTtcblxuXHRcdG1hdGVyaWFsUGFyYW1zLmNvbG9yID0gbmV3IENvbG9yKCAxLjAsIDEuMCwgMS4wICk7XG5cdFx0bWF0ZXJpYWxQYXJhbXMub3BhY2l0eSA9IDEuMDtcblxuXHRcdGNvbnN0IG1ldGFsbGljUm91Z2huZXNzID0gbWF0ZXJpYWxEZWYucGJyTWV0YWxsaWNSb3VnaG5lc3M7XG5cblx0XHRpZiAoIG1ldGFsbGljUm91Z2huZXNzICkge1xuXG5cdFx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIG1ldGFsbGljUm91Z2huZXNzLmJhc2VDb2xvckZhY3RvciApICkge1xuXG5cdFx0XHRcdGNvbnN0IGFycmF5ID0gbWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yRmFjdG9yO1xuXG5cdFx0XHRcdG1hdGVyaWFsUGFyYW1zLmNvbG9yLmZyb21BcnJheSggYXJyYXkgKTtcblx0XHRcdFx0bWF0ZXJpYWxQYXJhbXMub3BhY2l0eSA9IGFycmF5WyAzIF07XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBtZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JUZXh0dXJlICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdtYXAnLCBtZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JUZXh0dXJlICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKCBwZW5kaW5nICk7XG5cblx0fVxuXG59XG5cbi8qKlxuICogQ2xlYXJjb2F0IE1hdGVyaWFscyBFeHRlbnNpb25cbiAqXG4gKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfbWF0ZXJpYWxzX2NsZWFyY29hdFxuICovXG5jbGFzcyBHTFRGTWF0ZXJpYWxzQ2xlYXJjb2F0RXh0ZW5zaW9uIHtcblxuXHRjb25zdHJ1Y3RvciggcGFyc2VyICkge1xuXG5cdFx0dGhpcy5wYXJzZXIgPSBwYXJzZXI7XG5cdFx0dGhpcy5uYW1lID0gRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX0NMRUFSQ09BVDtcblxuXHR9XG5cblx0Z2V0TWF0ZXJpYWxUeXBlKCBtYXRlcmlhbEluZGV4ICkge1xuXG5cdFx0Y29uc3QgcGFyc2VyID0gdGhpcy5wYXJzZXI7XG5cdFx0Y29uc3QgbWF0ZXJpYWxEZWYgPSBwYXJzZXIuanNvbi5tYXRlcmlhbHNbIG1hdGVyaWFsSW5kZXggXTtcblxuXHRcdGlmICggISBtYXRlcmlhbERlZi5leHRlbnNpb25zIHx8ICEgbWF0ZXJpYWxEZWYuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF0gKSByZXR1cm4gbnVsbDtcblxuXHRcdHJldHVybiBNZXNoUGh5c2ljYWxNYXRlcmlhbDtcblxuXHR9XG5cblx0ZXh0ZW5kTWF0ZXJpYWxQYXJhbXMoIG1hdGVyaWFsSW5kZXgsIG1hdGVyaWFsUGFyYW1zICkge1xuXG5cdFx0Y29uc3QgcGFyc2VyID0gdGhpcy5wYXJzZXI7XG5cdFx0Y29uc3QgbWF0ZXJpYWxEZWYgPSBwYXJzZXIuanNvbi5tYXRlcmlhbHNbIG1hdGVyaWFsSW5kZXggXTtcblxuXHRcdGlmICggISBtYXRlcmlhbERlZi5leHRlbnNpb25zIHx8ICEgbWF0ZXJpYWxEZWYuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF0gKSB7XG5cblx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblxuXHRcdH1cblxuXHRcdGNvbnN0IHBlbmRpbmcgPSBbXTtcblxuXHRcdGNvbnN0IGV4dGVuc2lvbiA9IG1hdGVyaWFsRGVmLmV4dGVuc2lvbnNbIHRoaXMubmFtZSBdO1xuXG5cdFx0aWYgKCBleHRlbnNpb24uY2xlYXJjb2F0RmFjdG9yICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdG1hdGVyaWFsUGFyYW1zLmNsZWFyY29hdCA9IGV4dGVuc2lvbi5jbGVhcmNvYXRGYWN0b3I7XG5cblx0XHR9XG5cblx0XHRpZiAoIGV4dGVuc2lvbi5jbGVhcmNvYXRUZXh0dXJlICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAnY2xlYXJjb2F0TWFwJywgZXh0ZW5zaW9uLmNsZWFyY29hdFRleHR1cmUgKSApO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBleHRlbnNpb24uY2xlYXJjb2F0Um91Z2huZXNzRmFjdG9yICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdG1hdGVyaWFsUGFyYW1zLmNsZWFyY29hdFJvdWdobmVzcyA9IGV4dGVuc2lvbi5jbGVhcmNvYXRSb3VnaG5lc3NGYWN0b3I7XG5cblx0XHR9XG5cblx0XHRpZiAoIGV4dGVuc2lvbi5jbGVhcmNvYXRSb3VnaG5lc3NUZXh0dXJlICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAnY2xlYXJjb2F0Um91Z2huZXNzTWFwJywgZXh0ZW5zaW9uLmNsZWFyY29hdFJvdWdobmVzc1RleHR1cmUgKSApO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBleHRlbnNpb24uY2xlYXJjb2F0Tm9ybWFsVGV4dHVyZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBtYXRlcmlhbFBhcmFtcywgJ2NsZWFyY29hdE5vcm1hbE1hcCcsIGV4dGVuc2lvbi5jbGVhcmNvYXROb3JtYWxUZXh0dXJlICkgKTtcblxuXHRcdFx0aWYgKCBleHRlbnNpb24uY2xlYXJjb2F0Tm9ybWFsVGV4dHVyZS5zY2FsZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdGNvbnN0IHNjYWxlID0gZXh0ZW5zaW9uLmNsZWFyY29hdE5vcm1hbFRleHR1cmUuc2NhbGU7XG5cblx0XHRcdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9pc3N1ZXMvMTE0MzgjaXNzdWVjb21tZW50LTUwNzAwMzk5NVxuXHRcdFx0XHRtYXRlcmlhbFBhcmFtcy5jbGVhcmNvYXROb3JtYWxTY2FsZSA9IG5ldyBWZWN0b3IyKCBzY2FsZSwgLSBzY2FsZSApO1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoIHBlbmRpbmcgKTtcblxuXHR9XG5cbn1cblxuLyoqXG4gKiBUcmFuc21pc3Npb24gTWF0ZXJpYWxzIEV4dGVuc2lvblxuICpcbiAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9leHRlbnNpb25zLzIuMC9LaHJvbm9zL0tIUl9tYXRlcmlhbHNfdHJhbnNtaXNzaW9uXG4gKiBEcmFmdDogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3B1bGwvMTY5OFxuICovXG5jbGFzcyBHTFRGTWF0ZXJpYWxzVHJhbnNtaXNzaW9uRXh0ZW5zaW9uIHtcblxuXHRjb25zdHJ1Y3RvciggcGFyc2VyICkge1xuXG5cdFx0dGhpcy5wYXJzZXIgPSBwYXJzZXI7XG5cdFx0dGhpcy5uYW1lID0gRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1RSQU5TTUlTU0lPTjtcblxuXHR9XG5cblx0Z2V0TWF0ZXJpYWxUeXBlKCBtYXRlcmlhbEluZGV4ICkge1xuXG5cdFx0Y29uc3QgcGFyc2VyID0gdGhpcy5wYXJzZXI7XG5cdFx0Y29uc3QgbWF0ZXJpYWxEZWYgPSBwYXJzZXIuanNvbi5tYXRlcmlhbHNbIG1hdGVyaWFsSW5kZXggXTtcblxuXHRcdGlmICggISBtYXRlcmlhbERlZi5leHRlbnNpb25zIHx8ICEgbWF0ZXJpYWxEZWYuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF0gKSByZXR1cm4gbnVsbDtcblxuXHRcdHJldHVybiBNZXNoUGh5c2ljYWxNYXRlcmlhbDtcblxuXHR9XG5cblx0ZXh0ZW5kTWF0ZXJpYWxQYXJhbXMoIG1hdGVyaWFsSW5kZXgsIG1hdGVyaWFsUGFyYW1zICkge1xuXG5cdFx0Y29uc3QgcGFyc2VyID0gdGhpcy5wYXJzZXI7XG5cdFx0Y29uc3QgbWF0ZXJpYWxEZWYgPSBwYXJzZXIuanNvbi5tYXRlcmlhbHNbIG1hdGVyaWFsSW5kZXggXTtcblxuXHRcdGlmICggISBtYXRlcmlhbERlZi5leHRlbnNpb25zIHx8ICEgbWF0ZXJpYWxEZWYuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF0gKSB7XG5cblx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblxuXHRcdH1cblxuXHRcdGNvbnN0IHBlbmRpbmcgPSBbXTtcblxuXHRcdGNvbnN0IGV4dGVuc2lvbiA9IG1hdGVyaWFsRGVmLmV4dGVuc2lvbnNbIHRoaXMubmFtZSBdO1xuXG5cdFx0aWYgKCBleHRlbnNpb24udHJhbnNtaXNzaW9uRmFjdG9yICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdG1hdGVyaWFsUGFyYW1zLnRyYW5zbWlzc2lvbiA9IGV4dGVuc2lvbi50cmFuc21pc3Npb25GYWN0b3I7XG5cblx0XHR9XG5cblx0XHRpZiAoIGV4dGVuc2lvbi50cmFuc21pc3Npb25UZXh0dXJlICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAndHJhbnNtaXNzaW9uTWFwJywgZXh0ZW5zaW9uLnRyYW5zbWlzc2lvblRleHR1cmUgKSApO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKCBwZW5kaW5nICk7XG5cblx0fVxuXG59XG5cbi8qKlxuICogQmFzaXNVIFRleHR1cmUgRXh0ZW5zaW9uXG4gKlxuICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX3RleHR1cmVfYmFzaXN1XG4gKi9cbmNsYXNzIEdMVEZUZXh0dXJlQmFzaXNVRXh0ZW5zaW9uIHtcblxuXHRjb25zdHJ1Y3RvciggcGFyc2VyICkge1xuXG5cdFx0dGhpcy5wYXJzZXIgPSBwYXJzZXI7XG5cdFx0dGhpcy5uYW1lID0gRVhURU5TSU9OUy5LSFJfVEVYVFVSRV9CQVNJU1U7XG5cblx0fVxuXG5cdGxvYWRUZXh0dXJlKCB0ZXh0dXJlSW5kZXggKSB7XG5cblx0XHRjb25zdCBwYXJzZXIgPSB0aGlzLnBhcnNlcjtcblx0XHRjb25zdCBqc29uID0gcGFyc2VyLmpzb247XG5cblx0XHRjb25zdCB0ZXh0dXJlRGVmID0ganNvbi50ZXh0dXJlc1sgdGV4dHVyZUluZGV4IF07XG5cblx0XHRpZiAoICEgdGV4dHVyZURlZi5leHRlbnNpb25zIHx8ICEgdGV4dHVyZURlZi5leHRlbnNpb25zWyB0aGlzLm5hbWUgXSApIHtcblxuXHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHR9XG5cblx0XHRjb25zdCBleHRlbnNpb24gPSB0ZXh0dXJlRGVmLmV4dGVuc2lvbnNbIHRoaXMubmFtZSBdO1xuXHRcdGNvbnN0IHNvdXJjZSA9IGpzb24uaW1hZ2VzWyBleHRlbnNpb24uc291cmNlIF07XG5cdFx0Y29uc3QgbG9hZGVyID0gcGFyc2VyLm9wdGlvbnMua3R4MkxvYWRlcjtcblxuXHRcdGlmICggISBsb2FkZXIgKSB7XG5cblx0XHRcdGlmICgganNvbi5leHRlbnNpb25zUmVxdWlyZWQgJiYganNvbi5leHRlbnNpb25zUmVxdWlyZWQuaW5kZXhPZiggdGhpcy5uYW1lICkgPj0gMCApIHtcblxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBzZXRLVFgyTG9hZGVyIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBsb2FkaW5nIEtUWDIgdGV4dHVyZXMnICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Ly8gQXNzdW1lcyB0aGF0IHRoZSBleHRlbnNpb24gaXMgb3B0aW9uYWwgYW5kIHRoYXQgYSBmYWxsYmFjayB0ZXh0dXJlIGlzIHByZXNlbnRcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHJldHVybiBwYXJzZXIubG9hZFRleHR1cmVJbWFnZSggdGV4dHVyZUluZGV4LCBzb3VyY2UsIGxvYWRlciApO1xuXG5cdH1cblxufVxuXG4vKipcbiAqIFdlYlAgVGV4dHVyZSBFeHRlbnNpb25cbiAqXG4gKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvZXh0ZW5zaW9ucy8yLjAvVmVuZG9yL0VYVF90ZXh0dXJlX3dlYnBcbiAqL1xuY2xhc3MgR0xURlRleHR1cmVXZWJQRXh0ZW5zaW9uIHtcblxuXHRjb25zdHJ1Y3RvciggcGFyc2VyICkge1xuXG5cdFx0dGhpcy5wYXJzZXIgPSBwYXJzZXI7XG5cdFx0dGhpcy5uYW1lID0gRVhURU5TSU9OUy5FWFRfVEVYVFVSRV9XRUJQO1xuXHRcdHRoaXMuaXNTdXBwb3J0ZWQgPSBudWxsO1xuXG5cdH1cblxuXHRsb2FkVGV4dHVyZSggdGV4dHVyZUluZGV4ICkge1xuXG5cdFx0Y29uc3QgbmFtZSA9IHRoaXMubmFtZTtcblx0XHRjb25zdCBwYXJzZXIgPSB0aGlzLnBhcnNlcjtcblx0XHRjb25zdCBqc29uID0gcGFyc2VyLmpzb247XG5cblx0XHRjb25zdCB0ZXh0dXJlRGVmID0ganNvbi50ZXh0dXJlc1sgdGV4dHVyZUluZGV4IF07XG5cblx0XHRpZiAoICEgdGV4dHVyZURlZi5leHRlbnNpb25zIHx8ICEgdGV4dHVyZURlZi5leHRlbnNpb25zWyBuYW1lIF0gKSB7XG5cblx0XHRcdHJldHVybiBudWxsO1xuXG5cdFx0fVxuXG5cdFx0Y29uc3QgZXh0ZW5zaW9uID0gdGV4dHVyZURlZi5leHRlbnNpb25zWyBuYW1lIF07XG5cdFx0Y29uc3Qgc291cmNlID0ganNvbi5pbWFnZXNbIGV4dGVuc2lvbi5zb3VyY2UgXTtcblxuXHRcdGxldCBsb2FkZXIgPSBwYXJzZXIudGV4dHVyZUxvYWRlcjtcblx0XHRpZiAoIHNvdXJjZS51cmkgKSB7XG5cblx0XHRcdGNvbnN0IGhhbmRsZXIgPSBwYXJzZXIub3B0aW9ucy5tYW5hZ2VyLmdldEhhbmRsZXIoIHNvdXJjZS51cmkgKTtcblx0XHRcdGlmICggaGFuZGxlciAhPT0gbnVsbCApIGxvYWRlciA9IGhhbmRsZXI7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5kZXRlY3RTdXBwb3J0KCkudGhlbiggZnVuY3Rpb24gKCBpc1N1cHBvcnRlZCApIHtcblxuXHRcdFx0aWYgKCBpc1N1cHBvcnRlZCApIHJldHVybiBwYXJzZXIubG9hZFRleHR1cmVJbWFnZSggdGV4dHVyZUluZGV4LCBzb3VyY2UsIGxvYWRlciApO1xuXG5cdFx0XHRpZiAoIGpzb24uZXh0ZW5zaW9uc1JlcXVpcmVkICYmIGpzb24uZXh0ZW5zaW9uc1JlcXVpcmVkLmluZGV4T2YoIG5hbWUgKSA+PSAwICkge1xuXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IFdlYlAgcmVxdWlyZWQgYnkgYXNzZXQgYnV0IHVuc3VwcG9ydGVkLicgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBGYWxsIGJhY2sgdG8gUE5HIG9yIEpQRUcuXG5cdFx0XHRyZXR1cm4gcGFyc2VyLmxvYWRUZXh0dXJlKCB0ZXh0dXJlSW5kZXggKTtcblxuXHRcdH0gKTtcblxuXHR9XG5cblx0ZGV0ZWN0U3VwcG9ydCgpIHtcblxuXHRcdGlmICggISB0aGlzLmlzU3VwcG9ydGVkICkge1xuXG5cdFx0XHR0aGlzLmlzU3VwcG9ydGVkID0gbmV3IFByb21pc2UoIGZ1bmN0aW9uICggcmVzb2x2ZSApIHtcblxuXHRcdFx0XHRjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuXG5cdFx0XHRcdC8vIExvc3N5IHRlc3QgaW1hZ2UuIFN1cHBvcnQgZm9yIGxvc3N5IGltYWdlcyBkb2Vzbid0IGd1YXJhbnRlZSBzdXBwb3J0IGZvciBhbGxcblx0XHRcdFx0Ly8gV2ViUCBpbWFnZXMsIHVuZm9ydHVuYXRlbHkuXG5cdFx0XHRcdGltYWdlLnNyYyA9ICdkYXRhOmltYWdlL3dlYnA7YmFzZTY0LFVrbEdSaUlBQUFCWFJVSlFWbEE0SUJZQUFBQXdBUUNkQVNvQkFBRUFEc0QrSmFRQUEzQUFBQUFBJztcblxuXHRcdFx0XHRpbWFnZS5vbmxvYWQgPSBpbWFnZS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0cmVzb2x2ZSggaW1hZ2UuaGVpZ2h0ID09PSAxICk7XG5cblx0XHRcdFx0fTtcblxuXHRcdFx0fSApO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuaXNTdXBwb3J0ZWQ7XG5cblx0fVxuXG59XG5cbi8qKlxuICogbWVzaG9wdCBCdWZmZXJWaWV3IENvbXByZXNzaW9uIEV4dGVuc2lvblxuICpcbiAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9leHRlbnNpb25zLzIuMC9WZW5kb3IvRVhUX21lc2hvcHRfY29tcHJlc3Npb25cbiAqL1xuY2xhc3MgR0xURk1lc2hvcHRDb21wcmVzc2lvbiB7XG5cblx0Y29uc3RydWN0b3IoIHBhcnNlciApIHtcblxuXHRcdHRoaXMubmFtZSA9IEVYVEVOU0lPTlMuRVhUX01FU0hPUFRfQ09NUFJFU1NJT047XG5cdFx0dGhpcy5wYXJzZXIgPSBwYXJzZXI7XG5cblx0fVxuXG5cdGxvYWRCdWZmZXJWaWV3KCBpbmRleCApIHtcblxuXHRcdGNvbnN0IGpzb24gPSB0aGlzLnBhcnNlci5qc29uO1xuXHRcdGNvbnN0IGJ1ZmZlclZpZXcgPSBqc29uLmJ1ZmZlclZpZXdzWyBpbmRleCBdO1xuXG5cdFx0aWYgKCBidWZmZXJWaWV3LmV4dGVuc2lvbnMgJiYgYnVmZmVyVmlldy5leHRlbnNpb25zWyB0aGlzLm5hbWUgXSApIHtcblxuXHRcdFx0Y29uc3QgZXh0ZW5zaW9uRGVmID0gYnVmZmVyVmlldy5leHRlbnNpb25zWyB0aGlzLm5hbWUgXTtcblxuXHRcdFx0Y29uc3QgYnVmZmVyID0gdGhpcy5wYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ2J1ZmZlcicsIGV4dGVuc2lvbkRlZi5idWZmZXIgKTtcblx0XHRcdGNvbnN0IGRlY29kZXIgPSB0aGlzLnBhcnNlci5vcHRpb25zLm1lc2hvcHREZWNvZGVyO1xuXG5cdFx0XHRpZiAoICEgZGVjb2RlciB8fCAhIGRlY29kZXIuc3VwcG9ydGVkICkge1xuXG5cdFx0XHRcdGlmICgganNvbi5leHRlbnNpb25zUmVxdWlyZWQgJiYganNvbi5leHRlbnNpb25zUmVxdWlyZWQuaW5kZXhPZiggdGhpcy5uYW1lICkgPj0gMCApIHtcblxuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IHNldE1lc2hvcHREZWNvZGVyIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBsb2FkaW5nIGNvbXByZXNzZWQgZmlsZXMnICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdC8vIEFzc3VtZXMgdGhhdCB0aGUgZXh0ZW5zaW9uIGlzIG9wdGlvbmFsIGFuZCB0aGF0IGZhbGxiYWNrIGJ1ZmZlciBkYXRhIGlzIHByZXNlbnRcblx0XHRcdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIFByb21pc2UuYWxsKCBbIGJ1ZmZlciwgZGVjb2Rlci5yZWFkeSBdICkudGhlbiggZnVuY3Rpb24gKCByZXMgKSB7XG5cblx0XHRcdFx0Y29uc3QgYnl0ZU9mZnNldCA9IGV4dGVuc2lvbkRlZi5ieXRlT2Zmc2V0IHx8IDA7XG5cdFx0XHRcdGNvbnN0IGJ5dGVMZW5ndGggPSBleHRlbnNpb25EZWYuYnl0ZUxlbmd0aCB8fCAwO1xuXG5cdFx0XHRcdGNvbnN0IGNvdW50ID0gZXh0ZW5zaW9uRGVmLmNvdW50O1xuXHRcdFx0XHRjb25zdCBzdHJpZGUgPSBleHRlbnNpb25EZWYuYnl0ZVN0cmlkZTtcblxuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBuZXcgQXJyYXlCdWZmZXIoIGNvdW50ICogc3RyaWRlICk7XG5cdFx0XHRcdGNvbnN0IHNvdXJjZSA9IG5ldyBVaW50OEFycmF5KCByZXNbIDAgXSwgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCApO1xuXG5cdFx0XHRcdGRlY29kZXIuZGVjb2RlR2x0ZkJ1ZmZlciggbmV3IFVpbnQ4QXJyYXkoIHJlc3VsdCApLCBjb3VudCwgc3RyaWRlLCBzb3VyY2UsIGV4dGVuc2lvbkRlZi5tb2RlLCBleHRlbnNpb25EZWYuZmlsdGVyICk7XG5cdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cblx0XHRcdH0gKTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdHJldHVybiBudWxsO1xuXG5cdFx0fVxuXG5cdH1cblxufVxuXG4vKiBCSU5BUlkgRVhURU5TSU9OICovXG5jb25zdCBCSU5BUllfRVhURU5TSU9OX0hFQURFUl9NQUdJQyA9ICdnbFRGJztcbmNvbnN0IEJJTkFSWV9FWFRFTlNJT05fSEVBREVSX0xFTkdUSCA9IDEyO1xuY29uc3QgQklOQVJZX0VYVEVOU0lPTl9DSFVOS19UWVBFUyA9IHsgSlNPTjogMHg0RTRGNTM0QSwgQklOOiAweDAwNEU0OTQyIH07XG5cbmNsYXNzIEdMVEZCaW5hcnlFeHRlbnNpb24ge1xuXG5cdGNvbnN0cnVjdG9yKCBkYXRhICkge1xuXG5cdFx0dGhpcy5uYW1lID0gRVhURU5TSU9OUy5LSFJfQklOQVJZX0dMVEY7XG5cdFx0dGhpcy5jb250ZW50ID0gbnVsbDtcblx0XHR0aGlzLmJvZHkgPSBudWxsO1xuXG5cdFx0Y29uc3QgaGVhZGVyVmlldyA9IG5ldyBEYXRhVmlldyggZGF0YSwgMCwgQklOQVJZX0VYVEVOU0lPTl9IRUFERVJfTEVOR1RIICk7XG5cblx0XHR0aGlzLmhlYWRlciA9IHtcblx0XHRcdG1hZ2ljOiBMb2FkZXJVdGlscy5kZWNvZGVUZXh0KCBuZXcgVWludDhBcnJheSggZGF0YS5zbGljZSggMCwgNCApICkgKSxcblx0XHRcdHZlcnNpb246IGhlYWRlclZpZXcuZ2V0VWludDMyKCA0LCB0cnVlICksXG5cdFx0XHRsZW5ndGg6IGhlYWRlclZpZXcuZ2V0VWludDMyKCA4LCB0cnVlIClcblx0XHR9O1xuXG5cdFx0aWYgKCB0aGlzLmhlYWRlci5tYWdpYyAhPT0gQklOQVJZX0VYVEVOU0lPTl9IRUFERVJfTUFHSUMgKSB7XG5cblx0XHRcdHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IFVuc3VwcG9ydGVkIGdsVEYtQmluYXJ5IGhlYWRlci4nICk7XG5cblx0XHR9IGVsc2UgaWYgKCB0aGlzLmhlYWRlci52ZXJzaW9uIDwgMi4wICkge1xuXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyOiBMZWdhY3kgYmluYXJ5IGZpbGUgZGV0ZWN0ZWQuJyApO1xuXG5cdFx0fVxuXG5cdFx0Y29uc3QgY2h1bmtDb250ZW50c0xlbmd0aCA9IHRoaXMuaGVhZGVyLmxlbmd0aCAtIEJJTkFSWV9FWFRFTlNJT05fSEVBREVSX0xFTkdUSDtcblx0XHRjb25zdCBjaHVua1ZpZXcgPSBuZXcgRGF0YVZpZXcoIGRhdGEsIEJJTkFSWV9FWFRFTlNJT05fSEVBREVSX0xFTkdUSCApO1xuXHRcdGxldCBjaHVua0luZGV4ID0gMDtcblxuXHRcdHdoaWxlICggY2h1bmtJbmRleCA8IGNodW5rQ29udGVudHNMZW5ndGggKSB7XG5cblx0XHRcdGNvbnN0IGNodW5rTGVuZ3RoID0gY2h1bmtWaWV3LmdldFVpbnQzMiggY2h1bmtJbmRleCwgdHJ1ZSApO1xuXHRcdFx0Y2h1bmtJbmRleCArPSA0O1xuXG5cdFx0XHRjb25zdCBjaHVua1R5cGUgPSBjaHVua1ZpZXcuZ2V0VWludDMyKCBjaHVua0luZGV4LCB0cnVlICk7XG5cdFx0XHRjaHVua0luZGV4ICs9IDQ7XG5cblx0XHRcdGlmICggY2h1bmtUeXBlID09PSBCSU5BUllfRVhURU5TSU9OX0NIVU5LX1RZUEVTLkpTT04gKSB7XG5cblx0XHRcdFx0Y29uc3QgY29udGVudEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoIGRhdGEsIEJJTkFSWV9FWFRFTlNJT05fSEVBREVSX0xFTkdUSCArIGNodW5rSW5kZXgsIGNodW5rTGVuZ3RoICk7XG5cdFx0XHRcdHRoaXMuY29udGVudCA9IExvYWRlclV0aWxzLmRlY29kZVRleHQoIGNvbnRlbnRBcnJheSApO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBjaHVua1R5cGUgPT09IEJJTkFSWV9FWFRFTlNJT05fQ0hVTktfVFlQRVMuQklOICkge1xuXG5cdFx0XHRcdGNvbnN0IGJ5dGVPZmZzZXQgPSBCSU5BUllfRVhURU5TSU9OX0hFQURFUl9MRU5HVEggKyBjaHVua0luZGV4O1xuXHRcdFx0XHR0aGlzLmJvZHkgPSBkYXRhLnNsaWNlKCBieXRlT2Zmc2V0LCBieXRlT2Zmc2V0ICsgY2h1bmtMZW5ndGggKTtcblxuXHRcdFx0fVxuXG5cdFx0XHQvLyBDbGllbnRzIG11c3QgaWdub3JlIGNodW5rcyB3aXRoIHVua25vd24gdHlwZXMuXG5cblx0XHRcdGNodW5rSW5kZXggKz0gY2h1bmtMZW5ndGg7XG5cblx0XHR9XG5cblx0XHRpZiAoIHRoaXMuY29udGVudCA9PT0gbnVsbCApIHtcblxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuR0xURkxvYWRlcjogSlNPTiBjb250ZW50IG5vdCBmb3VuZC4nICk7XG5cblx0XHR9XG5cblx0fVxuXG59XG5cbi8qKlxuICogRFJBQ08gTWVzaCBDb21wcmVzc2lvbiBFeHRlbnNpb25cbiAqXG4gKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfZHJhY29fbWVzaF9jb21wcmVzc2lvblxuICovXG5jbGFzcyBHTFRGRHJhY29NZXNoQ29tcHJlc3Npb25FeHRlbnNpb24ge1xuXG5cdGNvbnN0cnVjdG9yKCBqc29uLCBkcmFjb0xvYWRlciApIHtcblxuXHRcdGlmICggISBkcmFjb0xvYWRlciApIHtcblxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuR0xURkxvYWRlcjogTm8gRFJBQ09Mb2FkZXIgaW5zdGFuY2UgcHJvdmlkZWQuJyApO1xuXG5cdFx0fVxuXG5cdFx0dGhpcy5uYW1lID0gRVhURU5TSU9OUy5LSFJfRFJBQ09fTUVTSF9DT01QUkVTU0lPTjtcblx0XHR0aGlzLmpzb24gPSBqc29uO1xuXHRcdHRoaXMuZHJhY29Mb2FkZXIgPSBkcmFjb0xvYWRlcjtcblx0XHR0aGlzLmRyYWNvTG9hZGVyLnByZWxvYWQoKTtcblxuXHR9XG5cblx0ZGVjb2RlUHJpbWl0aXZlKCBwcmltaXRpdmUsIHBhcnNlciApIHtcblxuXHRcdGNvbnN0IGpzb24gPSB0aGlzLmpzb247XG5cdFx0Y29uc3QgZHJhY29Mb2FkZXIgPSB0aGlzLmRyYWNvTG9hZGVyO1xuXHRcdGNvbnN0IGJ1ZmZlclZpZXdJbmRleCA9IHByaW1pdGl2ZS5leHRlbnNpb25zWyB0aGlzLm5hbWUgXS5idWZmZXJWaWV3O1xuXHRcdGNvbnN0IGdsdGZBdHRyaWJ1dGVNYXAgPSBwcmltaXRpdmUuZXh0ZW5zaW9uc1sgdGhpcy5uYW1lIF0uYXR0cmlidXRlcztcblx0XHRjb25zdCB0aHJlZUF0dHJpYnV0ZU1hcCA9IHt9O1xuXHRcdGNvbnN0IGF0dHJpYnV0ZU5vcm1hbGl6ZWRNYXAgPSB7fTtcblx0XHRjb25zdCBhdHRyaWJ1dGVUeXBlTWFwID0ge307XG5cblx0XHRmb3IgKCBjb25zdCBhdHRyaWJ1dGVOYW1lIGluIGdsdGZBdHRyaWJ1dGVNYXAgKSB7XG5cblx0XHRcdGNvbnN0IHRocmVlQXR0cmlidXRlTmFtZSA9IEFUVFJJQlVURVNbIGF0dHJpYnV0ZU5hbWUgXSB8fCBhdHRyaWJ1dGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRcdHRocmVlQXR0cmlidXRlTWFwWyB0aHJlZUF0dHJpYnV0ZU5hbWUgXSA9IGdsdGZBdHRyaWJ1dGVNYXBbIGF0dHJpYnV0ZU5hbWUgXTtcblxuXHRcdH1cblxuXHRcdGZvciAoIGNvbnN0IGF0dHJpYnV0ZU5hbWUgaW4gcHJpbWl0aXZlLmF0dHJpYnV0ZXMgKSB7XG5cblx0XHRcdGNvbnN0IHRocmVlQXR0cmlidXRlTmFtZSA9IEFUVFJJQlVURVNbIGF0dHJpYnV0ZU5hbWUgXSB8fCBhdHRyaWJ1dGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRcdGlmICggZ2x0ZkF0dHJpYnV0ZU1hcFsgYXR0cmlidXRlTmFtZSBdICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0Y29uc3QgYWNjZXNzb3JEZWYgPSBqc29uLmFjY2Vzc29yc1sgcHJpbWl0aXZlLmF0dHJpYnV0ZXNbIGF0dHJpYnV0ZU5hbWUgXSBdO1xuXHRcdFx0XHRjb25zdCBjb21wb25lbnRUeXBlID0gV0VCR0xfQ09NUE9ORU5UX1RZUEVTWyBhY2Nlc3NvckRlZi5jb21wb25lbnRUeXBlIF07XG5cblx0XHRcdFx0YXR0cmlidXRlVHlwZU1hcFsgdGhyZWVBdHRyaWJ1dGVOYW1lIF0gPSBjb21wb25lbnRUeXBlO1xuXHRcdFx0XHRhdHRyaWJ1dGVOb3JtYWxpemVkTWFwWyB0aHJlZUF0dHJpYnV0ZU5hbWUgXSA9IGFjY2Vzc29yRGVmLm5vcm1hbGl6ZWQgPT09IHRydWU7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHJldHVybiBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ2J1ZmZlclZpZXcnLCBidWZmZXJWaWV3SW5kZXggKS50aGVuKCBmdW5jdGlvbiAoIGJ1ZmZlclZpZXcgKSB7XG5cblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSggZnVuY3Rpb24gKCByZXNvbHZlICkge1xuXG5cdFx0XHRcdGRyYWNvTG9hZGVyLmRlY29kZURyYWNvRmlsZSggYnVmZmVyVmlldywgZnVuY3Rpb24gKCBnZW9tZXRyeSApIHtcblxuXHRcdFx0XHRcdGZvciAoIGNvbnN0IGF0dHJpYnV0ZU5hbWUgaW4gZ2VvbWV0cnkuYXR0cmlidXRlcyApIHtcblxuXHRcdFx0XHRcdFx0Y29uc3QgYXR0cmlidXRlID0gZ2VvbWV0cnkuYXR0cmlidXRlc1sgYXR0cmlidXRlTmFtZSBdO1xuXHRcdFx0XHRcdFx0Y29uc3Qgbm9ybWFsaXplZCA9IGF0dHJpYnV0ZU5vcm1hbGl6ZWRNYXBbIGF0dHJpYnV0ZU5hbWUgXTtcblxuXHRcdFx0XHRcdFx0aWYgKCBub3JtYWxpemVkICE9PSB1bmRlZmluZWQgKSBhdHRyaWJ1dGUubm9ybWFsaXplZCA9IG5vcm1hbGl6ZWQ7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXNvbHZlKCBnZW9tZXRyeSApO1xuXG5cdFx0XHRcdH0sIHRocmVlQXR0cmlidXRlTWFwLCBhdHRyaWJ1dGVUeXBlTWFwICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdH0gKTtcblxuXHR9XG5cbn1cblxuLyoqXG4gKiBUZXh0dXJlIFRyYW5zZm9ybSBFeHRlbnNpb25cbiAqXG4gKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvZXh0ZW5zaW9ucy8yLjAvS2hyb25vcy9LSFJfdGV4dHVyZV90cmFuc2Zvcm1cbiAqL1xuY2xhc3MgR0xURlRleHR1cmVUcmFuc2Zvcm1FeHRlbnNpb24ge1xuXG5cdGNvbnN0cnVjdG9yKCkge1xuXG5cdFx0dGhpcy5uYW1lID0gRVhURU5TSU9OUy5LSFJfVEVYVFVSRV9UUkFOU0ZPUk07XG5cblx0fVxuXG5cdGV4dGVuZFRleHR1cmUoIHRleHR1cmUsIHRyYW5zZm9ybSApIHtcblxuXHRcdGlmICggdHJhbnNmb3JtLnRleENvb3JkICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLkdMVEZMb2FkZXI6IEN1c3RvbSBVViBzZXRzIGluIFwiJyArIHRoaXMubmFtZSArICdcIiBleHRlbnNpb24gbm90IHlldCBzdXBwb3J0ZWQuJyApO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCB0cmFuc2Zvcm0ub2Zmc2V0ID09PSB1bmRlZmluZWQgJiYgdHJhbnNmb3JtLnJvdGF0aW9uID09PSB1bmRlZmluZWQgJiYgdHJhbnNmb3JtLnNjYWxlID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL3RocmVlLmpzL2lzc3Vlcy8yMTgxOS5cblx0XHRcdHJldHVybiB0ZXh0dXJlO1xuXG5cdFx0fVxuXG5cdFx0dGV4dHVyZSA9IHRleHR1cmUuY2xvbmUoKTtcblxuXHRcdGlmICggdHJhbnNmb3JtLm9mZnNldCAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHR0ZXh0dXJlLm9mZnNldC5mcm9tQXJyYXkoIHRyYW5zZm9ybS5vZmZzZXQgKTtcblxuXHRcdH1cblxuXHRcdGlmICggdHJhbnNmb3JtLnJvdGF0aW9uICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdHRleHR1cmUucm90YXRpb24gPSB0cmFuc2Zvcm0ucm90YXRpb247XG5cblx0XHR9XG5cblx0XHRpZiAoIHRyYW5zZm9ybS5zY2FsZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHR0ZXh0dXJlLnJlcGVhdC5mcm9tQXJyYXkoIHRyYW5zZm9ybS5zY2FsZSApO1xuXG5cdFx0fVxuXG5cdFx0dGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWU7XG5cblx0XHRyZXR1cm4gdGV4dHVyZTtcblxuXHR9XG5cbn1cblxuLyoqXG4gKiBTcGVjdWxhci1HbG9zc2luZXNzIEV4dGVuc2lvblxuICpcbiAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9leHRlbnNpb25zLzIuMC9LaHJvbm9zL0tIUl9tYXRlcmlhbHNfcGJyU3BlY3VsYXJHbG9zc2luZXNzXG4gKi9cblxuLyoqXG4gKiBBIHN1YiBjbGFzcyBvZiBTdGFuZGFyZE1hdGVyaWFsIHdpdGggc29tZSBvZiB0aGUgZnVuY3Rpb25hbGl0eVxuICogY2hhbmdlZCB2aWEgdGhlIGBvbkJlZm9yZUNvbXBpbGVgIGNhbGxiYWNrXG4gKiBAcGFpbGhlYWRcbiAqL1xuY2xhc3MgR0xURk1lc2hTdGFuZGFyZFNHTWF0ZXJpYWwgZXh0ZW5kcyBNZXNoU3RhbmRhcmRNYXRlcmlhbCB7XG5cblx0Y29uc3RydWN0b3IoIHBhcmFtcyApIHtcblxuXHRcdHN1cGVyKCk7XG5cblx0XHR0aGlzLmlzR0xURlNwZWN1bGFyR2xvc3NpbmVzc01hdGVyaWFsID0gdHJ1ZTtcblxuXHRcdC8vdmFyaW91cyBjaHVua3MgdGhhdCBuZWVkIHJlcGxhY2luZ1xuXHRcdGNvbnN0IHNwZWN1bGFyTWFwUGFyc0ZyYWdtZW50Q2h1bmsgPSBbXG5cdFx0XHQnI2lmZGVmIFVTRV9TUEVDVUxBUk1BUCcsXG5cdFx0XHQnXHR1bmlmb3JtIHNhbXBsZXIyRCBzcGVjdWxhck1hcDsnLFxuXHRcdFx0JyNlbmRpZidcblx0XHRdLmpvaW4oICdcXG4nICk7XG5cblx0XHRjb25zdCBnbG9zc2luZXNzTWFwUGFyc0ZyYWdtZW50Q2h1bmsgPSBbXG5cdFx0XHQnI2lmZGVmIFVTRV9HTE9TU0lORVNTTUFQJyxcblx0XHRcdCdcdHVuaWZvcm0gc2FtcGxlcjJEIGdsb3NzaW5lc3NNYXA7Jyxcblx0XHRcdCcjZW5kaWYnXG5cdFx0XS5qb2luKCAnXFxuJyApO1xuXG5cdFx0Y29uc3Qgc3BlY3VsYXJNYXBGcmFnbWVudENodW5rID0gW1xuXHRcdFx0J3ZlYzMgc3BlY3VsYXJGYWN0b3IgPSBzcGVjdWxhcjsnLFxuXHRcdFx0JyNpZmRlZiBVU0VfU1BFQ1VMQVJNQVAnLFxuXHRcdFx0J1x0dmVjNCB0ZXhlbFNwZWN1bGFyID0gdGV4dHVyZTJEKCBzcGVjdWxhck1hcCwgdlV2ICk7Jyxcblx0XHRcdCdcdHRleGVsU3BlY3VsYXIgPSBzUkdCVG9MaW5lYXIoIHRleGVsU3BlY3VsYXIgKTsnLFxuXHRcdFx0J1x0Ly8gcmVhZHMgY2hhbm5lbCBSR0IsIGNvbXBhdGlibGUgd2l0aCBhIGdsVEYgU3BlY3VsYXItR2xvc3NpbmVzcyAoUkdCQSkgdGV4dHVyZScsXG5cdFx0XHQnXHRzcGVjdWxhckZhY3RvciAqPSB0ZXhlbFNwZWN1bGFyLnJnYjsnLFxuXHRcdFx0JyNlbmRpZidcblx0XHRdLmpvaW4oICdcXG4nICk7XG5cblx0XHRjb25zdCBnbG9zc2luZXNzTWFwRnJhZ21lbnRDaHVuayA9IFtcblx0XHRcdCdmbG9hdCBnbG9zc2luZXNzRmFjdG9yID0gZ2xvc3NpbmVzczsnLFxuXHRcdFx0JyNpZmRlZiBVU0VfR0xPU1NJTkVTU01BUCcsXG5cdFx0XHQnXHR2ZWM0IHRleGVsR2xvc3NpbmVzcyA9IHRleHR1cmUyRCggZ2xvc3NpbmVzc01hcCwgdlV2ICk7Jyxcblx0XHRcdCdcdC8vIHJlYWRzIGNoYW5uZWwgQSwgY29tcGF0aWJsZSB3aXRoIGEgZ2xURiBTcGVjdWxhci1HbG9zc2luZXNzIChSR0JBKSB0ZXh0dXJlJyxcblx0XHRcdCdcdGdsb3NzaW5lc3NGYWN0b3IgKj0gdGV4ZWxHbG9zc2luZXNzLmE7Jyxcblx0XHRcdCcjZW5kaWYnXG5cdFx0XS5qb2luKCAnXFxuJyApO1xuXG5cdFx0Y29uc3QgbGlnaHRQaHlzaWNhbEZyYWdtZW50Q2h1bmsgPSBbXG5cdFx0XHQnUGh5c2ljYWxNYXRlcmlhbCBtYXRlcmlhbDsnLFxuXHRcdFx0J21hdGVyaWFsLmRpZmZ1c2VDb2xvciA9IGRpZmZ1c2VDb2xvci5yZ2IgKiAoIDEuIC0gbWF4KCBzcGVjdWxhckZhY3Rvci5yLCBtYXgoIHNwZWN1bGFyRmFjdG9yLmcsIHNwZWN1bGFyRmFjdG9yLmIgKSApICk7Jyxcblx0XHRcdCd2ZWMzIGR4eSA9IG1heCggYWJzKCBkRmR4KCBnZW9tZXRyeU5vcm1hbCApICksIGFicyggZEZkeSggZ2VvbWV0cnlOb3JtYWwgKSApICk7Jyxcblx0XHRcdCdmbG9hdCBnZW9tZXRyeVJvdWdobmVzcyA9IG1heCggbWF4KCBkeHkueCwgZHh5LnkgKSwgZHh5LnogKTsnLFxuXHRcdFx0J21hdGVyaWFsLnNwZWN1bGFyUm91Z2huZXNzID0gbWF4KCAxLjAgLSBnbG9zc2luZXNzRmFjdG9yLCAwLjA1MjUgKTsgLy8gMC4wNTI1IGNvcnJlc3BvbmRzIHRvIHRoZSBiYXNlIG1pcCBvZiBhIDI1NiBjdWJlbWFwLicsXG5cdFx0XHQnbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MgKz0gZ2VvbWV0cnlSb3VnaG5lc3M7Jyxcblx0XHRcdCdtYXRlcmlhbC5zcGVjdWxhclJvdWdobmVzcyA9IG1pbiggbWF0ZXJpYWwuc3BlY3VsYXJSb3VnaG5lc3MsIDEuMCApOycsXG5cdFx0XHQnbWF0ZXJpYWwuc3BlY3VsYXJDb2xvciA9IHNwZWN1bGFyRmFjdG9yOycsXG5cdFx0XS5qb2luKCAnXFxuJyApO1xuXG5cdFx0Y29uc3QgdW5pZm9ybXMgPSB7XG5cdFx0XHRzcGVjdWxhcjogeyB2YWx1ZTogbmV3IENvbG9yKCkuc2V0SGV4KCAweGZmZmZmZiApIH0sXG5cdFx0XHRnbG9zc2luZXNzOiB7IHZhbHVlOiAxIH0sXG5cdFx0XHRzcGVjdWxhck1hcDogeyB2YWx1ZTogbnVsbCB9LFxuXHRcdFx0Z2xvc3NpbmVzc01hcDogeyB2YWx1ZTogbnVsbCB9XG5cdFx0fTtcblxuXHRcdHRoaXMuX2V4dHJhVW5pZm9ybXMgPSB1bmlmb3JtcztcblxuXHRcdHRoaXMub25CZWZvcmVDb21waWxlID0gZnVuY3Rpb24gKCBzaGFkZXIgKSB7XG5cblx0XHRcdGZvciAoIGNvbnN0IHVuaWZvcm1OYW1lIGluIHVuaWZvcm1zICkge1xuXG5cdFx0XHRcdHNoYWRlci51bmlmb3Jtc1sgdW5pZm9ybU5hbWUgXSA9IHVuaWZvcm1zWyB1bmlmb3JtTmFtZSBdO1xuXG5cdFx0XHR9XG5cblx0XHRcdHNoYWRlci5mcmFnbWVudFNoYWRlciA9IHNoYWRlci5mcmFnbWVudFNoYWRlclxuXHRcdFx0XHQucmVwbGFjZSggJ3VuaWZvcm0gZmxvYXQgcm91Z2huZXNzOycsICd1bmlmb3JtIHZlYzMgc3BlY3VsYXI7JyApXG5cdFx0XHRcdC5yZXBsYWNlKCAndW5pZm9ybSBmbG9hdCBtZXRhbG5lc3M7JywgJ3VuaWZvcm0gZmxvYXQgZ2xvc3NpbmVzczsnIClcblx0XHRcdFx0LnJlcGxhY2UoICcjaW5jbHVkZSA8cm91Z2huZXNzbWFwX3BhcnNfZnJhZ21lbnQ+Jywgc3BlY3VsYXJNYXBQYXJzRnJhZ21lbnRDaHVuayApXG5cdFx0XHRcdC5yZXBsYWNlKCAnI2luY2x1ZGUgPG1ldGFsbmVzc21hcF9wYXJzX2ZyYWdtZW50PicsIGdsb3NzaW5lc3NNYXBQYXJzRnJhZ21lbnRDaHVuayApXG5cdFx0XHRcdC5yZXBsYWNlKCAnI2luY2x1ZGUgPHJvdWdobmVzc21hcF9mcmFnbWVudD4nLCBzcGVjdWxhck1hcEZyYWdtZW50Q2h1bmsgKVxuXHRcdFx0XHQucmVwbGFjZSggJyNpbmNsdWRlIDxtZXRhbG5lc3NtYXBfZnJhZ21lbnQ+JywgZ2xvc3NpbmVzc01hcEZyYWdtZW50Q2h1bmsgKVxuXHRcdFx0XHQucmVwbGFjZSggJyNpbmNsdWRlIDxsaWdodHNfcGh5c2ljYWxfZnJhZ21lbnQ+JywgbGlnaHRQaHlzaWNhbEZyYWdtZW50Q2h1bmsgKTtcblxuXHRcdH07XG5cblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydGllcyggdGhpcywge1xuXG5cdFx0XHRzcGVjdWxhcjoge1xuXHRcdFx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdHJldHVybiB1bmlmb3Jtcy5zcGVjdWxhci52YWx1ZTtcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzZXQ6IGZ1bmN0aW9uICggdiApIHtcblxuXHRcdFx0XHRcdHVuaWZvcm1zLnNwZWN1bGFyLnZhbHVlID0gdjtcblxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHRzcGVjdWxhck1hcDoge1xuXHRcdFx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdHJldHVybiB1bmlmb3Jtcy5zcGVjdWxhck1hcC52YWx1ZTtcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzZXQ6IGZ1bmN0aW9uICggdiApIHtcblxuXHRcdFx0XHRcdHVuaWZvcm1zLnNwZWN1bGFyTWFwLnZhbHVlID0gdjtcblxuXHRcdFx0XHRcdGlmICggdiApIHtcblxuXHRcdFx0XHRcdFx0dGhpcy5kZWZpbmVzLlVTRV9TUEVDVUxBUk1BUCA9ICcnOyAvLyBVU0VfVVYgaXMgc2V0IGJ5IHRoZSByZW5kZXJlciBmb3Igc3BlY3VsYXIgbWFwc1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuZGVmaW5lcy5VU0VfU1BFQ1VMQVJNQVA7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXHRcdFx0fSxcblxuXHRcdFx0Z2xvc3NpbmVzczoge1xuXHRcdFx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdHJldHVybiB1bmlmb3Jtcy5nbG9zc2luZXNzLnZhbHVlO1xuXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHNldDogZnVuY3Rpb24gKCB2ICkge1xuXG5cdFx0XHRcdFx0dW5pZm9ybXMuZ2xvc3NpbmVzcy52YWx1ZSA9IHY7XG5cblx0XHRcdFx0fVxuXHRcdFx0fSxcblxuXHRcdFx0Z2xvc3NpbmVzc01hcDoge1xuXHRcdFx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdHJldHVybiB1bmlmb3Jtcy5nbG9zc2luZXNzTWFwLnZhbHVlO1xuXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHNldDogZnVuY3Rpb24gKCB2ICkge1xuXG5cdFx0XHRcdFx0dW5pZm9ybXMuZ2xvc3NpbmVzc01hcC52YWx1ZSA9IHY7XG5cblx0XHRcdFx0XHRpZiAoIHYgKSB7XG5cblx0XHRcdFx0XHRcdHRoaXMuZGVmaW5lcy5VU0VfR0xPU1NJTkVTU01BUCA9ICcnO1xuXHRcdFx0XHRcdFx0dGhpcy5kZWZpbmVzLlVTRV9VViA9ICcnO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuZGVmaW5lcy5VU0VfR0xPU1NJTkVTU01BUDtcblx0XHRcdFx0XHRcdGRlbGV0ZSB0aGlzLmRlZmluZXMuVVNFX1VWO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdH0gKTtcblxuXHRcdGRlbGV0ZSB0aGlzLm1ldGFsbmVzcztcblx0XHRkZWxldGUgdGhpcy5yb3VnaG5lc3M7XG5cdFx0ZGVsZXRlIHRoaXMubWV0YWxuZXNzTWFwO1xuXHRcdGRlbGV0ZSB0aGlzLnJvdWdobmVzc01hcDtcblxuXHRcdHRoaXMuc2V0VmFsdWVzKCBwYXJhbXMgKTtcblxuXHR9XG5cblx0Y29weSggc291cmNlICkge1xuXG5cdFx0c3VwZXIuY29weSggc291cmNlICk7XG5cblx0XHR0aGlzLnNwZWN1bGFyTWFwID0gc291cmNlLnNwZWN1bGFyTWFwO1xuXHRcdHRoaXMuc3BlY3VsYXIuY29weSggc291cmNlLnNwZWN1bGFyICk7XG5cdFx0dGhpcy5nbG9zc2luZXNzTWFwID0gc291cmNlLmdsb3NzaW5lc3NNYXA7XG5cdFx0dGhpcy5nbG9zc2luZXNzID0gc291cmNlLmdsb3NzaW5lc3M7XG5cdFx0ZGVsZXRlIHRoaXMubWV0YWxuZXNzO1xuXHRcdGRlbGV0ZSB0aGlzLnJvdWdobmVzcztcblx0XHRkZWxldGUgdGhpcy5tZXRhbG5lc3NNYXA7XG5cdFx0ZGVsZXRlIHRoaXMucm91Z2huZXNzTWFwO1xuXHRcdHJldHVybiB0aGlzO1xuXG5cdH1cblxufVxuXG5cbmNsYXNzIEdMVEZNYXRlcmlhbHNQYnJTcGVjdWxhckdsb3NzaW5lc3NFeHRlbnNpb24ge1xuXG5cdGNvbnN0cnVjdG9yKCkge1xuXG5cdFx0dGhpcy5uYW1lID0gRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1BCUl9TUEVDVUxBUl9HTE9TU0lORVNTO1xuXG5cdFx0dGhpcy5zcGVjdWxhckdsb3NzaW5lc3NQYXJhbXMgPSBbXG5cdFx0XHQnY29sb3InLFxuXHRcdFx0J21hcCcsXG5cdFx0XHQnbGlnaHRNYXAnLFxuXHRcdFx0J2xpZ2h0TWFwSW50ZW5zaXR5Jyxcblx0XHRcdCdhb01hcCcsXG5cdFx0XHQnYW9NYXBJbnRlbnNpdHknLFxuXHRcdFx0J2VtaXNzaXZlJyxcblx0XHRcdCdlbWlzc2l2ZUludGVuc2l0eScsXG5cdFx0XHQnZW1pc3NpdmVNYXAnLFxuXHRcdFx0J2J1bXBNYXAnLFxuXHRcdFx0J2J1bXBTY2FsZScsXG5cdFx0XHQnbm9ybWFsTWFwJyxcblx0XHRcdCdub3JtYWxNYXBUeXBlJyxcblx0XHRcdCdkaXNwbGFjZW1lbnRNYXAnLFxuXHRcdFx0J2Rpc3BsYWNlbWVudFNjYWxlJyxcblx0XHRcdCdkaXNwbGFjZW1lbnRCaWFzJyxcblx0XHRcdCdzcGVjdWxhck1hcCcsXG5cdFx0XHQnc3BlY3VsYXInLFxuXHRcdFx0J2dsb3NzaW5lc3NNYXAnLFxuXHRcdFx0J2dsb3NzaW5lc3MnLFxuXHRcdFx0J2FscGhhTWFwJyxcblx0XHRcdCdlbnZNYXAnLFxuXHRcdFx0J2Vudk1hcEludGVuc2l0eScsXG5cdFx0XHQncmVmcmFjdGlvblJhdGlvJyxcblx0XHRdO1xuXG5cdH1cblxuXHRnZXRNYXRlcmlhbFR5cGUoKSB7XG5cblx0XHRyZXR1cm4gR0xURk1lc2hTdGFuZGFyZFNHTWF0ZXJpYWw7XG5cblx0fVxuXG5cdGV4dGVuZFBhcmFtcyggbWF0ZXJpYWxQYXJhbXMsIG1hdGVyaWFsRGVmLCBwYXJzZXIgKSB7XG5cblx0XHRjb25zdCBwYnJTcGVjdWxhckdsb3NzaW5lc3MgPSBtYXRlcmlhbERlZi5leHRlbnNpb25zWyB0aGlzLm5hbWUgXTtcblxuXHRcdG1hdGVyaWFsUGFyYW1zLmNvbG9yID0gbmV3IENvbG9yKCAxLjAsIDEuMCwgMS4wICk7XG5cdFx0bWF0ZXJpYWxQYXJhbXMub3BhY2l0eSA9IDEuMDtcblxuXHRcdGNvbnN0IHBlbmRpbmcgPSBbXTtcblxuXHRcdGlmICggQXJyYXkuaXNBcnJheSggcGJyU3BlY3VsYXJHbG9zc2luZXNzLmRpZmZ1c2VGYWN0b3IgKSApIHtcblxuXHRcdFx0Y29uc3QgYXJyYXkgPSBwYnJTcGVjdWxhckdsb3NzaW5lc3MuZGlmZnVzZUZhY3RvcjtcblxuXHRcdFx0bWF0ZXJpYWxQYXJhbXMuY29sb3IuZnJvbUFycmF5KCBhcnJheSApO1xuXHRcdFx0bWF0ZXJpYWxQYXJhbXMub3BhY2l0eSA9IGFycmF5WyAzIF07XG5cblx0XHR9XG5cblx0XHRpZiAoIHBiclNwZWN1bGFyR2xvc3NpbmVzcy5kaWZmdXNlVGV4dHVyZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBtYXRlcmlhbFBhcmFtcywgJ21hcCcsIHBiclNwZWN1bGFyR2xvc3NpbmVzcy5kaWZmdXNlVGV4dHVyZSApICk7XG5cblx0XHR9XG5cblx0XHRtYXRlcmlhbFBhcmFtcy5lbWlzc2l2ZSA9IG5ldyBDb2xvciggMC4wLCAwLjAsIDAuMCApO1xuXHRcdG1hdGVyaWFsUGFyYW1zLmdsb3NzaW5lc3MgPSBwYnJTcGVjdWxhckdsb3NzaW5lc3MuZ2xvc3NpbmVzc0ZhY3RvciAhPT0gdW5kZWZpbmVkID8gcGJyU3BlY3VsYXJHbG9zc2luZXNzLmdsb3NzaW5lc3NGYWN0b3IgOiAxLjA7XG5cdFx0bWF0ZXJpYWxQYXJhbXMuc3BlY3VsYXIgPSBuZXcgQ29sb3IoIDEuMCwgMS4wLCAxLjAgKTtcblxuXHRcdGlmICggQXJyYXkuaXNBcnJheSggcGJyU3BlY3VsYXJHbG9zc2luZXNzLnNwZWN1bGFyRmFjdG9yICkgKSB7XG5cblx0XHRcdG1hdGVyaWFsUGFyYW1zLnNwZWN1bGFyLmZyb21BcnJheSggcGJyU3BlY3VsYXJHbG9zc2luZXNzLnNwZWN1bGFyRmFjdG9yICk7XG5cblx0XHR9XG5cblx0XHRpZiAoIHBiclNwZWN1bGFyR2xvc3NpbmVzcy5zcGVjdWxhckdsb3NzaW5lc3NUZXh0dXJlICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdGNvbnN0IHNwZWNHbG9zc01hcERlZiA9IHBiclNwZWN1bGFyR2xvc3NpbmVzcy5zcGVjdWxhckdsb3NzaW5lc3NUZXh0dXJlO1xuXHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdnbG9zc2luZXNzTWFwJywgc3BlY0dsb3NzTWFwRGVmICkgKTtcblx0XHRcdHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAnc3BlY3VsYXJNYXAnLCBzcGVjR2xvc3NNYXBEZWYgKSApO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKCBwZW5kaW5nICk7XG5cblx0fVxuXG5cdGNyZWF0ZU1hdGVyaWFsKCBtYXRlcmlhbFBhcmFtcyApIHtcblxuXHRcdGNvbnN0IG1hdGVyaWFsID0gbmV3IEdMVEZNZXNoU3RhbmRhcmRTR01hdGVyaWFsKCBtYXRlcmlhbFBhcmFtcyApO1xuXHRcdG1hdGVyaWFsLmZvZyA9IHRydWU7XG5cblx0XHRtYXRlcmlhbC5jb2xvciA9IG1hdGVyaWFsUGFyYW1zLmNvbG9yO1xuXG5cdFx0bWF0ZXJpYWwubWFwID0gbWF0ZXJpYWxQYXJhbXMubWFwID09PSB1bmRlZmluZWQgPyBudWxsIDogbWF0ZXJpYWxQYXJhbXMubWFwO1xuXG5cdFx0bWF0ZXJpYWwubGlnaHRNYXAgPSBudWxsO1xuXHRcdG1hdGVyaWFsLmxpZ2h0TWFwSW50ZW5zaXR5ID0gMS4wO1xuXG5cdFx0bWF0ZXJpYWwuYW9NYXAgPSBtYXRlcmlhbFBhcmFtcy5hb01hcCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IG1hdGVyaWFsUGFyYW1zLmFvTWFwO1xuXHRcdG1hdGVyaWFsLmFvTWFwSW50ZW5zaXR5ID0gMS4wO1xuXG5cdFx0bWF0ZXJpYWwuZW1pc3NpdmUgPSBtYXRlcmlhbFBhcmFtcy5lbWlzc2l2ZTtcblx0XHRtYXRlcmlhbC5lbWlzc2l2ZUludGVuc2l0eSA9IDEuMDtcblx0XHRtYXRlcmlhbC5lbWlzc2l2ZU1hcCA9IG1hdGVyaWFsUGFyYW1zLmVtaXNzaXZlTWFwID09PSB1bmRlZmluZWQgPyBudWxsIDogbWF0ZXJpYWxQYXJhbXMuZW1pc3NpdmVNYXA7XG5cblx0XHRtYXRlcmlhbC5idW1wTWFwID0gbWF0ZXJpYWxQYXJhbXMuYnVtcE1hcCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IG1hdGVyaWFsUGFyYW1zLmJ1bXBNYXA7XG5cdFx0bWF0ZXJpYWwuYnVtcFNjYWxlID0gMTtcblxuXHRcdG1hdGVyaWFsLm5vcm1hbE1hcCA9IG1hdGVyaWFsUGFyYW1zLm5vcm1hbE1hcCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IG1hdGVyaWFsUGFyYW1zLm5vcm1hbE1hcDtcblx0XHRtYXRlcmlhbC5ub3JtYWxNYXBUeXBlID0gVGFuZ2VudFNwYWNlTm9ybWFsTWFwO1xuXG5cdFx0aWYgKCBtYXRlcmlhbFBhcmFtcy5ub3JtYWxTY2FsZSApIG1hdGVyaWFsLm5vcm1hbFNjYWxlID0gbWF0ZXJpYWxQYXJhbXMubm9ybWFsU2NhbGU7XG5cblx0XHRtYXRlcmlhbC5kaXNwbGFjZW1lbnRNYXAgPSBudWxsO1xuXHRcdG1hdGVyaWFsLmRpc3BsYWNlbWVudFNjYWxlID0gMTtcblx0XHRtYXRlcmlhbC5kaXNwbGFjZW1lbnRCaWFzID0gMDtcblxuXHRcdG1hdGVyaWFsLnNwZWN1bGFyTWFwID0gbWF0ZXJpYWxQYXJhbXMuc3BlY3VsYXJNYXAgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBtYXRlcmlhbFBhcmFtcy5zcGVjdWxhck1hcDtcblx0XHRtYXRlcmlhbC5zcGVjdWxhciA9IG1hdGVyaWFsUGFyYW1zLnNwZWN1bGFyO1xuXG5cdFx0bWF0ZXJpYWwuZ2xvc3NpbmVzc01hcCA9IG1hdGVyaWFsUGFyYW1zLmdsb3NzaW5lc3NNYXAgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBtYXRlcmlhbFBhcmFtcy5nbG9zc2luZXNzTWFwO1xuXHRcdG1hdGVyaWFsLmdsb3NzaW5lc3MgPSBtYXRlcmlhbFBhcmFtcy5nbG9zc2luZXNzO1xuXG5cdFx0bWF0ZXJpYWwuYWxwaGFNYXAgPSBudWxsO1xuXG5cdFx0bWF0ZXJpYWwuZW52TWFwID0gbWF0ZXJpYWxQYXJhbXMuZW52TWFwID09PSB1bmRlZmluZWQgPyBudWxsIDogbWF0ZXJpYWxQYXJhbXMuZW52TWFwO1xuXHRcdG1hdGVyaWFsLmVudk1hcEludGVuc2l0eSA9IDEuMDtcblxuXHRcdG1hdGVyaWFsLnJlZnJhY3Rpb25SYXRpbyA9IDAuOTg7XG5cblx0XHRyZXR1cm4gbWF0ZXJpYWw7XG5cblx0fVxuXG59XG5cbi8qKlxuICogTWVzaCBRdWFudGl6YXRpb24gRXh0ZW5zaW9uXG4gKlxuICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX21lc2hfcXVhbnRpemF0aW9uXG4gKi9cbmNsYXNzIEdMVEZNZXNoUXVhbnRpemF0aW9uRXh0ZW5zaW9uIHtcblxuXHRjb25zdHJ1Y3RvcigpIHtcblxuXHRcdHRoaXMubmFtZSA9IEVYVEVOU0lPTlMuS0hSX01FU0hfUVVBTlRJWkFUSU9OO1xuXG5cdH1cblxufVxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKioqKiogSU5URVJQT0xBVElPTiAqKioqKioqKi9cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8vIFNwbGluZSBJbnRlcnBvbGF0aW9uXG4vLyBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAvUkVBRE1FLm1kI2FwcGVuZGl4LWMtc3BsaW5lLWludGVycG9sYXRpb25cbmNsYXNzIEdMVEZDdWJpY1NwbGluZUludGVycG9sYW50IGV4dGVuZHMgSW50ZXJwb2xhbnQge1xuXG5cdGNvbnN0cnVjdG9yKCBwYXJhbWV0ZXJQb3NpdGlvbnMsIHNhbXBsZVZhbHVlcywgc2FtcGxlU2l6ZSwgcmVzdWx0QnVmZmVyICkge1xuXG5cdFx0c3VwZXIoIHBhcmFtZXRlclBvc2l0aW9ucywgc2FtcGxlVmFsdWVzLCBzYW1wbGVTaXplLCByZXN1bHRCdWZmZXIgKTtcblxuXHR9XG5cblx0Y29weVNhbXBsZVZhbHVlXyggaW5kZXggKSB7XG5cblx0XHQvLyBDb3BpZXMgYSBzYW1wbGUgdmFsdWUgdG8gdGhlIHJlc3VsdCBidWZmZXIuIFNlZSBkZXNjcmlwdGlvbiBvZiBnbFRGXG5cdFx0Ly8gQ1VCSUNTUExJTkUgdmFsdWVzIGxheW91dCBpbiBpbnRlcnBvbGF0ZV8oKSBmdW5jdGlvbiBiZWxvdy5cblxuXHRcdGNvbnN0IHJlc3VsdCA9IHRoaXMucmVzdWx0QnVmZmVyLFxuXHRcdFx0dmFsdWVzID0gdGhpcy5zYW1wbGVWYWx1ZXMsXG5cdFx0XHR2YWx1ZVNpemUgPSB0aGlzLnZhbHVlU2l6ZSxcblx0XHRcdG9mZnNldCA9IGluZGV4ICogdmFsdWVTaXplICogMyArIHZhbHVlU2l6ZTtcblxuXHRcdGZvciAoIGxldCBpID0gMDsgaSAhPT0gdmFsdWVTaXplOyBpICsrICkge1xuXG5cdFx0XHRyZXN1bHRbIGkgXSA9IHZhbHVlc1sgb2Zmc2V0ICsgaSBdO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblxuXHR9XG5cbn1cblxuR0xURkN1YmljU3BsaW5lSW50ZXJwb2xhbnQucHJvdG90eXBlLmJlZm9yZVN0YXJ0XyA9IEdMVEZDdWJpY1NwbGluZUludGVycG9sYW50LnByb3RvdHlwZS5jb3B5U2FtcGxlVmFsdWVfO1xuXG5HTFRGQ3ViaWNTcGxpbmVJbnRlcnBvbGFudC5wcm90b3R5cGUuYWZ0ZXJFbmRfID0gR0xURkN1YmljU3BsaW5lSW50ZXJwb2xhbnQucHJvdG90eXBlLmNvcHlTYW1wbGVWYWx1ZV87XG5cbkdMVEZDdWJpY1NwbGluZUludGVycG9sYW50LnByb3RvdHlwZS5pbnRlcnBvbGF0ZV8gPSBmdW5jdGlvbiAoIGkxLCB0MCwgdCwgdDEgKSB7XG5cblx0Y29uc3QgcmVzdWx0ID0gdGhpcy5yZXN1bHRCdWZmZXI7XG5cdGNvbnN0IHZhbHVlcyA9IHRoaXMuc2FtcGxlVmFsdWVzO1xuXHRjb25zdCBzdHJpZGUgPSB0aGlzLnZhbHVlU2l6ZTtcblxuXHRjb25zdCBzdHJpZGUyID0gc3RyaWRlICogMjtcblx0Y29uc3Qgc3RyaWRlMyA9IHN0cmlkZSAqIDM7XG5cblx0Y29uc3QgdGQgPSB0MSAtIHQwO1xuXG5cdGNvbnN0IHAgPSAoIHQgLSB0MCApIC8gdGQ7XG5cdGNvbnN0IHBwID0gcCAqIHA7XG5cdGNvbnN0IHBwcCA9IHBwICogcDtcblxuXHRjb25zdCBvZmZzZXQxID0gaTEgKiBzdHJpZGUzO1xuXHRjb25zdCBvZmZzZXQwID0gb2Zmc2V0MSAtIHN0cmlkZTM7XG5cblx0Y29uc3QgczIgPSAtIDIgKiBwcHAgKyAzICogcHA7XG5cdGNvbnN0IHMzID0gcHBwIC0gcHA7XG5cdGNvbnN0IHMwID0gMSAtIHMyO1xuXHRjb25zdCBzMSA9IHMzIC0gcHAgKyBwO1xuXG5cdC8vIExheW91dCBvZiBrZXlmcmFtZSBvdXRwdXQgdmFsdWVzIGZvciBDVUJJQ1NQTElORSBhbmltYXRpb25zOlxuXHQvLyAgIFsgaW5UYW5nZW50XzEsIHNwbGluZVZlcnRleF8xLCBvdXRUYW5nZW50XzEsIGluVGFuZ2VudF8yLCBzcGxpbmVWZXJ0ZXhfMiwgLi4uIF1cblx0Zm9yICggbGV0IGkgPSAwOyBpICE9PSBzdHJpZGU7IGkgKysgKSB7XG5cblx0XHRjb25zdCBwMCA9IHZhbHVlc1sgb2Zmc2V0MCArIGkgKyBzdHJpZGUgXTsgLy8gc3BsaW5lVmVydGV4X2tcblx0XHRjb25zdCBtMCA9IHZhbHVlc1sgb2Zmc2V0MCArIGkgKyBzdHJpZGUyIF0gKiB0ZDsgLy8gb3V0VGFuZ2VudF9rICogKHRfaysxIC0gdF9rKVxuXHRcdGNvbnN0IHAxID0gdmFsdWVzWyBvZmZzZXQxICsgaSArIHN0cmlkZSBdOyAvLyBzcGxpbmVWZXJ0ZXhfaysxXG5cdFx0Y29uc3QgbTEgPSB2YWx1ZXNbIG9mZnNldDEgKyBpIF0gKiB0ZDsgLy8gaW5UYW5nZW50X2srMSAqICh0X2srMSAtIHRfaylcblxuXHRcdHJlc3VsdFsgaSBdID0gczAgKiBwMCArIHMxICogbTAgKyBzMiAqIHAxICsgczMgKiBtMTtcblxuXHR9XG5cblx0cmV0dXJuIHJlc3VsdDtcblxufTtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKioqKioqIElOVEVSTkFMUyAqKioqKioqKioqKiovXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKiBDT05TVEFOVFMgKi9cblxuY29uc3QgV0VCR0xfQ09OU1RBTlRTID0ge1xuXHRGTE9BVDogNTEyNixcblx0Ly9GTE9BVF9NQVQyOiAzNTY3NCxcblx0RkxPQVRfTUFUMzogMzU2NzUsXG5cdEZMT0FUX01BVDQ6IDM1Njc2LFxuXHRGTE9BVF9WRUMyOiAzNTY2NCxcblx0RkxPQVRfVkVDMzogMzU2NjUsXG5cdEZMT0FUX1ZFQzQ6IDM1NjY2LFxuXHRMSU5FQVI6IDk3MjksXG5cdFJFUEVBVDogMTA0OTcsXG5cdFNBTVBMRVJfMkQ6IDM1Njc4LFxuXHRQT0lOVFM6IDAsXG5cdExJTkVTOiAxLFxuXHRMSU5FX0xPT1A6IDIsXG5cdExJTkVfU1RSSVA6IDMsXG5cdFRSSUFOR0xFUzogNCxcblx0VFJJQU5HTEVfU1RSSVA6IDUsXG5cdFRSSUFOR0xFX0ZBTjogNixcblx0VU5TSUdORURfQllURTogNTEyMSxcblx0VU5TSUdORURfU0hPUlQ6IDUxMjNcbn07XG5cbmNvbnN0IFdFQkdMX0NPTVBPTkVOVF9UWVBFUyA9IHtcblx0NTEyMDogSW50OEFycmF5LFxuXHQ1MTIxOiBVaW50OEFycmF5LFxuXHQ1MTIyOiBJbnQxNkFycmF5LFxuXHQ1MTIzOiBVaW50MTZBcnJheSxcblx0NTEyNTogVWludDMyQXJyYXksXG5cdDUxMjY6IEZsb2F0MzJBcnJheVxufTtcblxuY29uc3QgV0VCR0xfRklMVEVSUyA9IHtcblx0OTcyODogTmVhcmVzdEZpbHRlcixcblx0OTcyOTogTGluZWFyRmlsdGVyLFxuXHQ5OTg0OiBOZWFyZXN0TWlwbWFwTmVhcmVzdEZpbHRlcixcblx0OTk4NTogTGluZWFyTWlwbWFwTmVhcmVzdEZpbHRlcixcblx0OTk4NjogTmVhcmVzdE1pcG1hcExpbmVhckZpbHRlcixcblx0OTk4NzogTGluZWFyTWlwbWFwTGluZWFyRmlsdGVyXG59O1xuXG5jb25zdCBXRUJHTF9XUkFQUElOR1MgPSB7XG5cdDMzMDcxOiBDbGFtcFRvRWRnZVdyYXBwaW5nLFxuXHQzMzY0ODogTWlycm9yZWRSZXBlYXRXcmFwcGluZyxcblx0MTA0OTc6IFJlcGVhdFdyYXBwaW5nXG59O1xuXG5jb25zdCBXRUJHTF9UWVBFX1NJWkVTID0ge1xuXHQnU0NBTEFSJzogMSxcblx0J1ZFQzInOiAyLFxuXHQnVkVDMyc6IDMsXG5cdCdWRUM0JzogNCxcblx0J01BVDInOiA0LFxuXHQnTUFUMyc6IDksXG5cdCdNQVQ0JzogMTZcbn07XG5cbmNvbnN0IEFUVFJJQlVURVMgPSB7XG5cdFBPU0lUSU9OOiAncG9zaXRpb24nLFxuXHROT1JNQUw6ICdub3JtYWwnLFxuXHRUQU5HRU5UOiAndGFuZ2VudCcsXG5cdFRFWENPT1JEXzA6ICd1dicsXG5cdFRFWENPT1JEXzE6ICd1djInLFxuXHRDT0xPUl8wOiAnY29sb3InLFxuXHRXRUlHSFRTXzA6ICdza2luV2VpZ2h0Jyxcblx0Sk9JTlRTXzA6ICdza2luSW5kZXgnLFxufTtcblxuY29uc3QgUEFUSF9QUk9QRVJUSUVTID0ge1xuXHRzY2FsZTogJ3NjYWxlJyxcblx0dHJhbnNsYXRpb246ICdwb3NpdGlvbicsXG5cdHJvdGF0aW9uOiAncXVhdGVybmlvbicsXG5cdHdlaWdodHM6ICdtb3JwaFRhcmdldEluZmx1ZW5jZXMnXG59O1xuXG5jb25zdCBJTlRFUlBPTEFUSU9OID0ge1xuXHRDVUJJQ1NQTElORTogdW5kZWZpbmVkLCAvLyBXZSB1c2UgYSBjdXN0b20gaW50ZXJwb2xhbnQgKEdMVEZDdWJpY1NwbGluZUludGVycG9sYXRpb24pIGZvciBDVUJJQ1NQTElORSB0cmFja3MuIEVhY2hcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAvLyBrZXlmcmFtZSB0cmFjayB3aWxsIGJlIGluaXRpYWxpemVkIHdpdGggYSBkZWZhdWx0IGludGVycG9sYXRpb24gdHlwZSwgdGhlbiBtb2RpZmllZC5cblx0TElORUFSOiBJbnRlcnBvbGF0ZUxpbmVhcixcblx0U1RFUDogSW50ZXJwb2xhdGVEaXNjcmV0ZVxufTtcblxuY29uc3QgQUxQSEFfTU9ERVMgPSB7XG5cdE9QQVFVRTogJ09QQVFVRScsXG5cdE1BU0s6ICdNQVNLJyxcblx0QkxFTkQ6ICdCTEVORCdcbn07XG5cbi8qIFVUSUxJVFkgRlVOQ1RJT05TICovXG5cbmZ1bmN0aW9uIHJlc29sdmVVUkwoIHVybCwgcGF0aCApIHtcblxuXHQvLyBJbnZhbGlkIFVSTFxuXHRpZiAoIHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnIHx8IHVybCA9PT0gJycgKSByZXR1cm4gJyc7XG5cblx0Ly8gSG9zdCBSZWxhdGl2ZSBVUkxcblx0aWYgKCAvXmh0dHBzPzpcXC9cXC8vaS50ZXN0KCBwYXRoICkgJiYgL15cXC8vLnRlc3QoIHVybCApICkge1xuXG5cdFx0cGF0aCA9IHBhdGgucmVwbGFjZSggLyheaHR0cHM/OlxcL1xcL1teXFwvXSspLiovaSwgJyQxJyApO1xuXG5cdH1cblxuXHQvLyBBYnNvbHV0ZSBVUkwgaHR0cDovLyxodHRwczovLywvL1xuXHRpZiAoIC9eKGh0dHBzPzopP1xcL1xcLy9pLnRlc3QoIHVybCApICkgcmV0dXJuIHVybDtcblxuXHQvLyBEYXRhIFVSSVxuXHRpZiAoIC9eZGF0YTouKiwuKiQvaS50ZXN0KCB1cmwgKSApIHJldHVybiB1cmw7XG5cblx0Ly8gQmxvYiBVUkxcblx0aWYgKCAvXmJsb2I6LiokL2kudGVzdCggdXJsICkgKSByZXR1cm4gdXJsO1xuXG5cdC8vIFJlbGF0aXZlIFVSTFxuXHRyZXR1cm4gcGF0aCArIHVybDtcblxufVxuXG4vKipcbiAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjZGVmYXVsdC1tYXRlcmlhbFxuICovXG5mdW5jdGlvbiBjcmVhdGVEZWZhdWx0TWF0ZXJpYWwoIGNhY2hlICkge1xuXG5cdGlmICggY2FjaGVbICdEZWZhdWx0TWF0ZXJpYWwnIF0gPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdGNhY2hlWyAnRGVmYXVsdE1hdGVyaWFsJyBdID0gbmV3IE1lc2hTdGFuZGFyZE1hdGVyaWFsKCB7XG5cdFx0XHRjb2xvcjogMHhGRkZGRkYsXG5cdFx0XHRlbWlzc2l2ZTogMHgwMDAwMDAsXG5cdFx0XHRtZXRhbG5lc3M6IDEsXG5cdFx0XHRyb3VnaG5lc3M6IDEsXG5cdFx0XHR0cmFuc3BhcmVudDogZmFsc2UsXG5cdFx0XHRkZXB0aFRlc3Q6IHRydWUsXG5cdFx0XHRzaWRlOiBGcm9udFNpZGVcblx0XHR9ICk7XG5cblx0fVxuXG5cdHJldHVybiBjYWNoZVsgJ0RlZmF1bHRNYXRlcmlhbCcgXTtcblxufVxuXG5mdW5jdGlvbiBhZGRVbmtub3duRXh0ZW5zaW9uc1RvVXNlckRhdGEoIGtub3duRXh0ZW5zaW9ucywgb2JqZWN0LCBvYmplY3REZWYgKSB7XG5cblx0Ly8gQWRkIHVua25vd24gZ2xURiBleHRlbnNpb25zIHRvIGFuIG9iamVjdCdzIHVzZXJEYXRhLlxuXG5cdGZvciAoIGNvbnN0IG5hbWUgaW4gb2JqZWN0RGVmLmV4dGVuc2lvbnMgKSB7XG5cblx0XHRpZiAoIGtub3duRXh0ZW5zaW9uc1sgbmFtZSBdID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdG9iamVjdC51c2VyRGF0YS5nbHRmRXh0ZW5zaW9ucyA9IG9iamVjdC51c2VyRGF0YS5nbHRmRXh0ZW5zaW9ucyB8fCB7fTtcblx0XHRcdG9iamVjdC51c2VyRGF0YS5nbHRmRXh0ZW5zaW9uc1sgbmFtZSBdID0gb2JqZWN0RGVmLmV4dGVuc2lvbnNbIG5hbWUgXTtcblxuXHRcdH1cblxuXHR9XG5cbn1cblxuLyoqXG4gKiBAcGFyYW0ge09iamVjdDNEfE1hdGVyaWFsfEJ1ZmZlckdlb21ldHJ5fSBvYmplY3RcbiAqIEBwYXJhbSB7R0xURi5kZWZpbml0aW9ufSBnbHRmRGVmXG4gKi9cbmZ1bmN0aW9uIGFzc2lnbkV4dHJhc1RvVXNlckRhdGEoIG9iamVjdCwgZ2x0ZkRlZiApIHtcblxuXHRpZiAoIGdsdGZEZWYuZXh0cmFzICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRpZiAoIHR5cGVvZiBnbHRmRGVmLmV4dHJhcyA9PT0gJ29iamVjdCcgKSB7XG5cblx0XHRcdE9iamVjdC5hc3NpZ24oIG9iamVjdC51c2VyRGF0YSwgZ2x0ZkRlZi5leHRyYXMgKTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLkdMVEZMb2FkZXI6IElnbm9yaW5nIHByaW1pdGl2ZSB0eXBlIC5leHRyYXMsICcgKyBnbHRmRGVmLmV4dHJhcyApO1xuXG5cdFx0fVxuXG5cdH1cblxufVxuXG4vKipcbiAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjbW9ycGgtdGFyZ2V0c1xuICpcbiAqIEBwYXJhbSB7QnVmZmVyR2VvbWV0cnl9IGdlb21ldHJ5XG4gKiBAcGFyYW0ge0FycmF5PEdMVEYuVGFyZ2V0Pn0gdGFyZ2V0c1xuICogQHBhcmFtIHtHTFRGUGFyc2VyfSBwYXJzZXJcbiAqIEByZXR1cm4ge1Byb21pc2U8QnVmZmVyR2VvbWV0cnk+fVxuICovXG5mdW5jdGlvbiBhZGRNb3JwaFRhcmdldHMoIGdlb21ldHJ5LCB0YXJnZXRzLCBwYXJzZXIgKSB7XG5cblx0bGV0IGhhc01vcnBoUG9zaXRpb24gPSBmYWxzZTtcblx0bGV0IGhhc01vcnBoTm9ybWFsID0gZmFsc2U7XG5cblx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IHRhcmdldHMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRjb25zdCB0YXJnZXQgPSB0YXJnZXRzWyBpIF07XG5cblx0XHRpZiAoIHRhcmdldC5QT1NJVElPTiAhPT0gdW5kZWZpbmVkICkgaGFzTW9ycGhQb3NpdGlvbiA9IHRydWU7XG5cdFx0aWYgKCB0YXJnZXQuTk9STUFMICE9PSB1bmRlZmluZWQgKSBoYXNNb3JwaE5vcm1hbCA9IHRydWU7XG5cblx0XHRpZiAoIGhhc01vcnBoUG9zaXRpb24gJiYgaGFzTW9ycGhOb3JtYWwgKSBicmVhaztcblxuXHR9XG5cblx0aWYgKCAhIGhhc01vcnBoUG9zaXRpb24gJiYgISBoYXNNb3JwaE5vcm1hbCApIHJldHVybiBQcm9taXNlLnJlc29sdmUoIGdlb21ldHJ5ICk7XG5cblx0Y29uc3QgcGVuZGluZ1Bvc2l0aW9uQWNjZXNzb3JzID0gW107XG5cdGNvbnN0IHBlbmRpbmdOb3JtYWxBY2Nlc3NvcnMgPSBbXTtcblxuXHRmb3IgKCBsZXQgaSA9IDAsIGlsID0gdGFyZ2V0cy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdGNvbnN0IHRhcmdldCA9IHRhcmdldHNbIGkgXTtcblxuXHRcdGlmICggaGFzTW9ycGhQb3NpdGlvbiApIHtcblxuXHRcdFx0Y29uc3QgcGVuZGluZ0FjY2Vzc29yID0gdGFyZ2V0LlBPU0lUSU9OICE9PSB1bmRlZmluZWRcblx0XHRcdFx0PyBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ2FjY2Vzc29yJywgdGFyZ2V0LlBPU0lUSU9OIClcblx0XHRcdFx0OiBnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uO1xuXG5cdFx0XHRwZW5kaW5nUG9zaXRpb25BY2Nlc3NvcnMucHVzaCggcGVuZGluZ0FjY2Vzc29yICk7XG5cblx0XHR9XG5cblx0XHRpZiAoIGhhc01vcnBoTm9ybWFsICkge1xuXG5cdFx0XHRjb25zdCBwZW5kaW5nQWNjZXNzb3IgPSB0YXJnZXQuTk9STUFMICE9PSB1bmRlZmluZWRcblx0XHRcdFx0PyBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ2FjY2Vzc29yJywgdGFyZ2V0Lk5PUk1BTCApXG5cdFx0XHRcdDogZ2VvbWV0cnkuYXR0cmlidXRlcy5ub3JtYWw7XG5cblx0XHRcdHBlbmRpbmdOb3JtYWxBY2Nlc3NvcnMucHVzaCggcGVuZGluZ0FjY2Vzc29yICk7XG5cblx0XHR9XG5cblx0fVxuXG5cdHJldHVybiBQcm9taXNlLmFsbCggW1xuXHRcdFByb21pc2UuYWxsKCBwZW5kaW5nUG9zaXRpb25BY2Nlc3NvcnMgKSxcblx0XHRQcm9taXNlLmFsbCggcGVuZGluZ05vcm1hbEFjY2Vzc29ycyApXG5cdF0gKS50aGVuKCBmdW5jdGlvbiAoIGFjY2Vzc29ycyApIHtcblxuXHRcdGNvbnN0IG1vcnBoUG9zaXRpb25zID0gYWNjZXNzb3JzWyAwIF07XG5cdFx0Y29uc3QgbW9ycGhOb3JtYWxzID0gYWNjZXNzb3JzWyAxIF07XG5cblx0XHRpZiAoIGhhc01vcnBoUG9zaXRpb24gKSBnZW9tZXRyeS5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24gPSBtb3JwaFBvc2l0aW9ucztcblx0XHRpZiAoIGhhc01vcnBoTm9ybWFsICkgZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLm5vcm1hbCA9IG1vcnBoTm9ybWFscztcblx0XHRnZW9tZXRyeS5tb3JwaFRhcmdldHNSZWxhdGl2ZSA9IHRydWU7XG5cblx0XHRyZXR1cm4gZ2VvbWV0cnk7XG5cblx0fSApO1xuXG59XG5cbi8qKlxuICogQHBhcmFtIHtNZXNofSBtZXNoXG4gKiBAcGFyYW0ge0dMVEYuTWVzaH0gbWVzaERlZlxuICovXG5mdW5jdGlvbiB1cGRhdGVNb3JwaFRhcmdldHMoIG1lc2gsIG1lc2hEZWYgKSB7XG5cblx0bWVzaC51cGRhdGVNb3JwaFRhcmdldHMoKTtcblxuXHRpZiAoIG1lc2hEZWYud2VpZ2h0cyAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IG1lc2hEZWYud2VpZ2h0cy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0bWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbIGkgXSA9IG1lc2hEZWYud2VpZ2h0c1sgaSBdO1xuXG5cdFx0fVxuXG5cdH1cblxuXHQvLyAuZXh0cmFzIGhhcyB1c2VyLWRlZmluZWQgZGF0YSwgc28gY2hlY2sgdGhhdCAuZXh0cmFzLnRhcmdldE5hbWVzIGlzIGFuIGFycmF5LlxuXHRpZiAoIG1lc2hEZWYuZXh0cmFzICYmIEFycmF5LmlzQXJyYXkoIG1lc2hEZWYuZXh0cmFzLnRhcmdldE5hbWVzICkgKSB7XG5cblx0XHRjb25zdCB0YXJnZXROYW1lcyA9IG1lc2hEZWYuZXh0cmFzLnRhcmdldE5hbWVzO1xuXG5cdFx0aWYgKCBtZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcy5sZW5ndGggPT09IHRhcmdldE5hbWVzLmxlbmd0aCApIHtcblxuXHRcdFx0bWVzaC5tb3JwaFRhcmdldERpY3Rpb25hcnkgPSB7fTtcblxuXHRcdFx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IHRhcmdldE5hbWVzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0XHRcdG1lc2gubW9ycGhUYXJnZXREaWN0aW9uYXJ5WyB0YXJnZXROYW1lc1sgaSBdIF0gPSBpO1xuXG5cdFx0XHR9XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5HTFRGTG9hZGVyOiBJbnZhbGlkIGV4dHJhcy50YXJnZXROYW1lcyBsZW5ndGguIElnbm9yaW5nIG5hbWVzLicgKTtcblxuXHRcdH1cblxuXHR9XG5cbn1cblxuZnVuY3Rpb24gY3JlYXRlUHJpbWl0aXZlS2V5KCBwcmltaXRpdmVEZWYgKSB7XG5cblx0Y29uc3QgZHJhY29FeHRlbnNpb24gPSBwcmltaXRpdmVEZWYuZXh0ZW5zaW9ucyAmJiBwcmltaXRpdmVEZWYuZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfRFJBQ09fTUVTSF9DT01QUkVTU0lPTiBdO1xuXHRsZXQgZ2VvbWV0cnlLZXk7XG5cblx0aWYgKCBkcmFjb0V4dGVuc2lvbiApIHtcblxuXHRcdGdlb21ldHJ5S2V5ID0gJ2RyYWNvOicgKyBkcmFjb0V4dGVuc2lvbi5idWZmZXJWaWV3XG5cdFx0XHRcdCsgJzonICsgZHJhY29FeHRlbnNpb24uaW5kaWNlc1xuXHRcdFx0XHQrICc6JyArIGNyZWF0ZUF0dHJpYnV0ZXNLZXkoIGRyYWNvRXh0ZW5zaW9uLmF0dHJpYnV0ZXMgKTtcblxuXHR9IGVsc2Uge1xuXG5cdFx0Z2VvbWV0cnlLZXkgPSBwcmltaXRpdmVEZWYuaW5kaWNlcyArICc6JyArIGNyZWF0ZUF0dHJpYnV0ZXNLZXkoIHByaW1pdGl2ZURlZi5hdHRyaWJ1dGVzICkgKyAnOicgKyBwcmltaXRpdmVEZWYubW9kZTtcblxuXHR9XG5cblx0cmV0dXJuIGdlb21ldHJ5S2V5O1xuXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUF0dHJpYnV0ZXNLZXkoIGF0dHJpYnV0ZXMgKSB7XG5cblx0bGV0IGF0dHJpYnV0ZXNLZXkgPSAnJztcblxuXHRjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoIGF0dHJpYnV0ZXMgKS5zb3J0KCk7XG5cblx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IGtleXMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRhdHRyaWJ1dGVzS2V5ICs9IGtleXNbIGkgXSArICc6JyArIGF0dHJpYnV0ZXNbIGtleXNbIGkgXSBdICsgJzsnO1xuXG5cdH1cblxuXHRyZXR1cm4gYXR0cmlidXRlc0tleTtcblxufVxuXG5mdW5jdGlvbiBnZXROb3JtYWxpemVkQ29tcG9uZW50U2NhbGUoIGNvbnN0cnVjdG9yICkge1xuXG5cdC8vIFJlZmVyZW5jZTpcblx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL2V4dGVuc2lvbnMvMi4wL0tocm9ub3MvS0hSX21lc2hfcXVhbnRpemF0aW9uI2VuY29kaW5nLXF1YW50aXplZC1kYXRhXG5cblx0c3dpdGNoICggY29uc3RydWN0b3IgKSB7XG5cblx0XHRjYXNlIEludDhBcnJheTpcblx0XHRcdHJldHVybiAxIC8gMTI3O1xuXG5cdFx0Y2FzZSBVaW50OEFycmF5OlxuXHRcdFx0cmV0dXJuIDEgLyAyNTU7XG5cblx0XHRjYXNlIEludDE2QXJyYXk6XG5cdFx0XHRyZXR1cm4gMSAvIDMyNzY3O1xuXG5cdFx0Y2FzZSBVaW50MTZBcnJheTpcblx0XHRcdHJldHVybiAxIC8gNjU1MzU7XG5cblx0XHRkZWZhdWx0OlxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuR0xURkxvYWRlcjogVW5zdXBwb3J0ZWQgbm9ybWFsaXplZCBhY2Nlc3NvciBjb21wb25lbnQgdHlwZS4nICk7XG5cblx0fVxuXG59XG5cbi8qIEdMVEYgUEFSU0VSICovXG5cbmNsYXNzIEdMVEZQYXJzZXIge1xuXG5cdGNvbnN0cnVjdG9yKCBqc29uID0ge30sIG9wdGlvbnMgPSB7fSApIHtcblxuXHRcdHRoaXMuanNvbiA9IGpzb247XG5cdFx0dGhpcy5leHRlbnNpb25zID0ge307XG5cdFx0dGhpcy5wbHVnaW5zID0ge307XG5cdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcblxuXHRcdC8vIGxvYWRlciBvYmplY3QgY2FjaGVcblx0XHR0aGlzLmNhY2hlID0gbmV3IEdMVEZSZWdpc3RyeSgpO1xuXG5cdFx0Ly8gYXNzb2NpYXRpb25zIGJldHdlZW4gVGhyZWUuanMgb2JqZWN0cyBhbmQgZ2xURiBlbGVtZW50c1xuXHRcdHRoaXMuYXNzb2NpYXRpb25zID0gbmV3IE1hcCgpO1xuXG5cdFx0Ly8gQnVmZmVyR2VvbWV0cnkgY2FjaGluZ1xuXHRcdHRoaXMucHJpbWl0aXZlQ2FjaGUgPSB7fTtcblxuXHRcdC8vIE9iamVjdDNEIGluc3RhbmNlIGNhY2hlc1xuXHRcdHRoaXMubWVzaENhY2hlID0geyByZWZzOiB7fSwgdXNlczoge30gfTtcblx0XHR0aGlzLmNhbWVyYUNhY2hlID0geyByZWZzOiB7fSwgdXNlczoge30gfTtcblx0XHR0aGlzLmxpZ2h0Q2FjaGUgPSB7IHJlZnM6IHt9LCB1c2VzOiB7fSB9O1xuXG5cdFx0dGhpcy50ZXh0dXJlQ2FjaGUgPSB7fTtcblxuXHRcdC8vIFRyYWNrIG5vZGUgbmFtZXMsIHRvIGVuc3VyZSBubyBkdXBsaWNhdGVzXG5cdFx0dGhpcy5ub2RlTmFtZXNVc2VkID0ge307XG5cblx0XHQvLyBVc2UgYW4gSW1hZ2VCaXRtYXBMb2FkZXIgaWYgaW1hZ2VCaXRtYXBzIGFyZSBzdXBwb3J0ZWQuIE1vdmVzIG11Y2ggb2YgdGhlXG5cdFx0Ly8gZXhwZW5zaXZlIHdvcmsgb2YgdXBsb2FkaW5nIGEgdGV4dHVyZSB0byB0aGUgR1BVIG9mZiB0aGUgbWFpbiB0aHJlYWQuXG5cdFx0aWYgKCB0eXBlb2YgY3JlYXRlSW1hZ2VCaXRtYXAgIT09ICd1bmRlZmluZWQnICYmIC9GaXJlZm94Ly50ZXN0KCBuYXZpZ2F0b3IudXNlckFnZW50ICkgPT09IGZhbHNlICkge1xuXG5cdFx0XHR0aGlzLnRleHR1cmVMb2FkZXIgPSBuZXcgSW1hZ2VCaXRtYXBMb2FkZXIoIHRoaXMub3B0aW9ucy5tYW5hZ2VyICk7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHR0aGlzLnRleHR1cmVMb2FkZXIgPSBuZXcgVGV4dHVyZUxvYWRlciggdGhpcy5vcHRpb25zLm1hbmFnZXIgKTtcblxuXHRcdH1cblxuXHRcdHRoaXMudGV4dHVyZUxvYWRlci5zZXRDcm9zc09yaWdpbiggdGhpcy5vcHRpb25zLmNyb3NzT3JpZ2luICk7XG5cdFx0dGhpcy50ZXh0dXJlTG9hZGVyLnNldFJlcXVlc3RIZWFkZXIoIHRoaXMub3B0aW9ucy5yZXF1ZXN0SGVhZGVyICk7XG5cblx0XHR0aGlzLmZpbGVMb2FkZXIgPSBuZXcgRmlsZUxvYWRlciggdGhpcy5vcHRpb25zLm1hbmFnZXIgKTtcblx0XHR0aGlzLmZpbGVMb2FkZXIuc2V0UmVzcG9uc2VUeXBlKCAnYXJyYXlidWZmZXInICk7XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5jcm9zc09yaWdpbiA9PT0gJ3VzZS1jcmVkZW50aWFscycgKSB7XG5cblx0XHRcdHRoaXMuZmlsZUxvYWRlci5zZXRXaXRoQ3JlZGVudGlhbHMoIHRydWUgKTtcblxuXHRcdH1cblxuXHR9XG5cblx0c2V0RXh0ZW5zaW9ucyggZXh0ZW5zaW9ucyApIHtcblxuXHRcdHRoaXMuZXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnM7XG5cblx0fVxuXG5cdHNldFBsdWdpbnMoIHBsdWdpbnMgKSB7XG5cblx0XHR0aGlzLnBsdWdpbnMgPSBwbHVnaW5zO1xuXG5cdH1cblxuXHRwYXJzZSggb25Mb2FkLCBvbkVycm9yICkge1xuXG5cdFx0Y29uc3QgcGFyc2VyID0gdGhpcztcblx0XHRjb25zdCBqc29uID0gdGhpcy5qc29uO1xuXHRcdGNvbnN0IGV4dGVuc2lvbnMgPSB0aGlzLmV4dGVuc2lvbnM7XG5cblx0XHQvLyBDbGVhciB0aGUgbG9hZGVyIGNhY2hlXG5cdFx0dGhpcy5jYWNoZS5yZW1vdmVBbGwoKTtcblxuXHRcdC8vIE1hcmsgdGhlIHNwZWNpYWwgbm9kZXMvbWVzaGVzIGluIGpzb24gZm9yIGVmZmljaWVudCBwYXJzZVxuXHRcdHRoaXMuX2ludm9rZUFsbCggZnVuY3Rpb24gKCBleHQgKSB7XG5cblx0XHRcdHJldHVybiBleHQuX21hcmtEZWZzICYmIGV4dC5fbWFya0RlZnMoKTtcblxuXHRcdH0gKTtcblxuXHRcdFByb21pc2UuYWxsKCB0aGlzLl9pbnZva2VBbGwoIGZ1bmN0aW9uICggZXh0ICkge1xuXG5cdFx0XHRyZXR1cm4gZXh0LmJlZm9yZVJvb3QgJiYgZXh0LmJlZm9yZVJvb3QoKTtcblxuXHRcdH0gKSApLnRoZW4oIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0cmV0dXJuIFByb21pc2UuYWxsKCBbXG5cblx0XHRcdFx0cGFyc2VyLmdldERlcGVuZGVuY2llcyggJ3NjZW5lJyApLFxuXHRcdFx0XHRwYXJzZXIuZ2V0RGVwZW5kZW5jaWVzKCAnYW5pbWF0aW9uJyApLFxuXHRcdFx0XHRwYXJzZXIuZ2V0RGVwZW5kZW5jaWVzKCAnY2FtZXJhJyApLFxuXG5cdFx0XHRdICk7XG5cblx0XHR9ICkudGhlbiggZnVuY3Rpb24gKCBkZXBlbmRlbmNpZXMgKSB7XG5cblx0XHRcdGNvbnN0IHJlc3VsdCA9IHtcblx0XHRcdFx0c2NlbmU6IGRlcGVuZGVuY2llc1sgMCBdWyBqc29uLnNjZW5lIHx8IDAgXSxcblx0XHRcdFx0c2NlbmVzOiBkZXBlbmRlbmNpZXNbIDAgXSxcblx0XHRcdFx0YW5pbWF0aW9uczogZGVwZW5kZW5jaWVzWyAxIF0sXG5cdFx0XHRcdGNhbWVyYXM6IGRlcGVuZGVuY2llc1sgMiBdLFxuXHRcdFx0XHRhc3NldDoganNvbi5hc3NldCxcblx0XHRcdFx0cGFyc2VyOiBwYXJzZXIsXG5cdFx0XHRcdHVzZXJEYXRhOiB7fVxuXHRcdFx0fTtcblxuXHRcdFx0YWRkVW5rbm93bkV4dGVuc2lvbnNUb1VzZXJEYXRhKCBleHRlbnNpb25zLCByZXN1bHQsIGpzb24gKTtcblxuXHRcdFx0YXNzaWduRXh0cmFzVG9Vc2VyRGF0YSggcmVzdWx0LCBqc29uICk7XG5cblx0XHRcdFByb21pc2UuYWxsKCBwYXJzZXIuX2ludm9rZUFsbCggZnVuY3Rpb24gKCBleHQgKSB7XG5cblx0XHRcdFx0cmV0dXJuIGV4dC5hZnRlclJvb3QgJiYgZXh0LmFmdGVyUm9vdCggcmVzdWx0ICk7XG5cblx0XHRcdH0gKSApLnRoZW4oIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRvbkxvYWQoIHJlc3VsdCApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHR9ICkuY2F0Y2goIG9uRXJyb3IgKTtcblxuXHR9XG5cblx0LyoqXG5cdCAqIE1hcmtzIHRoZSBzcGVjaWFsIG5vZGVzL21lc2hlcyBpbiBqc29uIGZvciBlZmZpY2llbnQgcGFyc2UuXG5cdCAqL1xuXHRfbWFya0RlZnMoKSB7XG5cblx0XHRjb25zdCBub2RlRGVmcyA9IHRoaXMuanNvbi5ub2RlcyB8fCBbXTtcblx0XHRjb25zdCBza2luRGVmcyA9IHRoaXMuanNvbi5za2lucyB8fCBbXTtcblx0XHRjb25zdCBtZXNoRGVmcyA9IHRoaXMuanNvbi5tZXNoZXMgfHwgW107XG5cblx0XHQvLyBOb3RoaW5nIGluIHRoZSBub2RlIGRlZmluaXRpb24gaW5kaWNhdGVzIHdoZXRoZXIgaXQgaXMgYSBCb25lIG9yIGFuXG5cdFx0Ly8gT2JqZWN0M0QuIFVzZSB0aGUgc2tpbnMnIGpvaW50IHJlZmVyZW5jZXMgdG8gbWFyayBib25lcy5cblx0XHRmb3IgKCBsZXQgc2tpbkluZGV4ID0gMCwgc2tpbkxlbmd0aCA9IHNraW5EZWZzLmxlbmd0aDsgc2tpbkluZGV4IDwgc2tpbkxlbmd0aDsgc2tpbkluZGV4ICsrICkge1xuXG5cdFx0XHRjb25zdCBqb2ludHMgPSBza2luRGVmc1sgc2tpbkluZGV4IF0uam9pbnRzO1xuXG5cdFx0XHRmb3IgKCBsZXQgaSA9IDAsIGlsID0gam9pbnRzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0XHRcdG5vZGVEZWZzWyBqb2ludHNbIGkgXSBdLmlzQm9uZSA9IHRydWU7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdC8vIEl0ZXJhdGUgb3ZlciBhbGwgbm9kZXMsIG1hcmtpbmcgcmVmZXJlbmNlcyB0byBzaGFyZWQgcmVzb3VyY2VzLFxuXHRcdC8vIGFzIHdlbGwgYXMgc2tlbGV0b24gam9pbnRzLlxuXHRcdGZvciAoIGxldCBub2RlSW5kZXggPSAwLCBub2RlTGVuZ3RoID0gbm9kZURlZnMubGVuZ3RoOyBub2RlSW5kZXggPCBub2RlTGVuZ3RoOyBub2RlSW5kZXggKysgKSB7XG5cblx0XHRcdGNvbnN0IG5vZGVEZWYgPSBub2RlRGVmc1sgbm9kZUluZGV4IF07XG5cblx0XHRcdGlmICggbm9kZURlZi5tZXNoICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0dGhpcy5fYWRkTm9kZVJlZiggdGhpcy5tZXNoQ2FjaGUsIG5vZGVEZWYubWVzaCApO1xuXG5cdFx0XHRcdC8vIE5vdGhpbmcgaW4gdGhlIG1lc2ggZGVmaW5pdGlvbiBpbmRpY2F0ZXMgd2hldGhlciBpdCBpc1xuXHRcdFx0XHQvLyBhIFNraW5uZWRNZXNoIG9yIE1lc2guIFVzZSB0aGUgbm9kZSdzIG1lc2ggcmVmZXJlbmNlXG5cdFx0XHRcdC8vIHRvIG1hcmsgU2tpbm5lZE1lc2ggaWYgbm9kZSBoYXMgc2tpbi5cblx0XHRcdFx0aWYgKCBub2RlRGVmLnNraW4gIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdG1lc2hEZWZzWyBub2RlRGVmLm1lc2ggXS5pc1NraW5uZWRNZXNoID0gdHJ1ZTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBub2RlRGVmLmNhbWVyYSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdHRoaXMuX2FkZE5vZGVSZWYoIHRoaXMuY2FtZXJhQ2FjaGUsIG5vZGVEZWYuY2FtZXJhICk7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHR9XG5cblx0LyoqXG5cdCAqIENvdW50cyByZWZlcmVuY2VzIHRvIHNoYXJlZCBub2RlIC8gT2JqZWN0M0QgcmVzb3VyY2VzLiBUaGVzZSByZXNvdXJjZXNcblx0ICogY2FuIGJlIHJldXNlZCwgb3IgXCJpbnN0YW50aWF0ZWRcIiwgYXQgbXVsdGlwbGUgbm9kZXMgaW4gdGhlIHNjZW5lXG5cdCAqIGhpZXJhcmNoeS4gTWVzaCwgQ2FtZXJhLCBhbmQgTGlnaHQgaW5zdGFuY2VzIGFyZSBpbnN0YW50aWF0ZWQgYW5kIG11c3Rcblx0ICogYmUgbWFya2VkLiBOb24tc2NlbmVncmFwaCByZXNvdXJjZXMgKGxpa2UgTWF0ZXJpYWxzLCBHZW9tZXRyaWVzLCBhbmRcblx0ICogVGV4dHVyZXMpIGNhbiBiZSByZXVzZWQgZGlyZWN0bHkgYW5kIGFyZSBub3QgbWFya2VkIGhlcmUuXG5cdCAqXG5cdCAqIEV4YW1wbGU6IENlc2l1bU1pbGtUcnVjayBzYW1wbGUgbW9kZWwgcmV1c2VzIFwiV2hlZWxcIiBtZXNoZXMuXG5cdCAqL1xuXHRfYWRkTm9kZVJlZiggY2FjaGUsIGluZGV4ICkge1xuXG5cdFx0aWYgKCBpbmRleCA9PT0gdW5kZWZpbmVkICkgcmV0dXJuO1xuXG5cdFx0aWYgKCBjYWNoZS5yZWZzWyBpbmRleCBdID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdGNhY2hlLnJlZnNbIGluZGV4IF0gPSBjYWNoZS51c2VzWyBpbmRleCBdID0gMDtcblxuXHRcdH1cblxuXHRcdGNhY2hlLnJlZnNbIGluZGV4IF0gKys7XG5cblx0fVxuXG5cdC8qKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIGEgc2hhcmVkIHJlc291cmNlLCBjbG9uaW5nIGl0IGlmIG5lY2Vzc2FyeS4gKi9cblx0X2dldE5vZGVSZWYoIGNhY2hlLCBpbmRleCwgb2JqZWN0ICkge1xuXG5cdFx0aWYgKCBjYWNoZS5yZWZzWyBpbmRleCBdIDw9IDEgKSByZXR1cm4gb2JqZWN0O1xuXG5cdFx0Y29uc3QgcmVmID0gb2JqZWN0LmNsb25lKCk7XG5cblx0XHRyZWYubmFtZSArPSAnX2luc3RhbmNlXycgKyAoIGNhY2hlLnVzZXNbIGluZGV4IF0gKysgKTtcblxuXHRcdHJldHVybiByZWY7XG5cblx0fVxuXG5cdF9pbnZva2VPbmUoIGZ1bmMgKSB7XG5cblx0XHRjb25zdCBleHRlbnNpb25zID0gT2JqZWN0LnZhbHVlcyggdGhpcy5wbHVnaW5zICk7XG5cdFx0ZXh0ZW5zaW9ucy5wdXNoKCB0aGlzICk7XG5cblx0XHRmb3IgKCBsZXQgaSA9IDA7IGkgPCBleHRlbnNpb25zLmxlbmd0aDsgaSArKyApIHtcblxuXHRcdFx0Y29uc3QgcmVzdWx0ID0gZnVuYyggZXh0ZW5zaW9uc1sgaSBdICk7XG5cblx0XHRcdGlmICggcmVzdWx0ICkgcmV0dXJuIHJlc3VsdDtcblxuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXG5cdH1cblxuXHRfaW52b2tlQWxsKCBmdW5jICkge1xuXG5cdFx0Y29uc3QgZXh0ZW5zaW9ucyA9IE9iamVjdC52YWx1ZXMoIHRoaXMucGx1Z2lucyApO1xuXHRcdGV4dGVuc2lvbnMudW5zaGlmdCggdGhpcyApO1xuXG5cdFx0Y29uc3QgcGVuZGluZyA9IFtdO1xuXG5cdFx0Zm9yICggbGV0IGkgPSAwOyBpIDwgZXh0ZW5zaW9ucy5sZW5ndGg7IGkgKysgKSB7XG5cblx0XHRcdGNvbnN0IHJlc3VsdCA9IGZ1bmMoIGV4dGVuc2lvbnNbIGkgXSApO1xuXG5cdFx0XHRpZiAoIHJlc3VsdCApIHBlbmRpbmcucHVzaCggcmVzdWx0ICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gcGVuZGluZztcblxuXHR9XG5cblx0LyoqXG5cdCAqIFJlcXVlc3RzIHRoZSBzcGVjaWZpZWQgZGVwZW5kZW5jeSBhc3luY2hyb25vdXNseSwgd2l0aCBjYWNoaW5nLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuXHQgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcblx0ICogQHJldHVybiB7UHJvbWlzZTxPYmplY3QzRHxNYXRlcmlhbHxUSFJFRS5UZXh0dXJlfEFuaW1hdGlvbkNsaXB8QXJyYXlCdWZmZXJ8T2JqZWN0Pn1cblx0ICovXG5cdGdldERlcGVuZGVuY3koIHR5cGUsIGluZGV4ICkge1xuXG5cdFx0Y29uc3QgY2FjaGVLZXkgPSB0eXBlICsgJzonICsgaW5kZXg7XG5cdFx0bGV0IGRlcGVuZGVuY3kgPSB0aGlzLmNhY2hlLmdldCggY2FjaGVLZXkgKTtcblxuXHRcdGlmICggISBkZXBlbmRlbmN5ICkge1xuXG5cdFx0XHRzd2l0Y2ggKCB0eXBlICkge1xuXG5cdFx0XHRcdGNhc2UgJ3NjZW5lJzpcblx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gdGhpcy5sb2FkU2NlbmUoIGluZGV4ICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnbm9kZSc6XG5cdFx0XHRcdFx0ZGVwZW5kZW5jeSA9IHRoaXMubG9hZE5vZGUoIGluZGV4ICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnbWVzaCc6XG5cdFx0XHRcdFx0ZGVwZW5kZW5jeSA9IHRoaXMuX2ludm9rZU9uZSggZnVuY3Rpb24gKCBleHQgKSB7XG5cblx0XHRcdFx0XHRcdHJldHVybiBleHQubG9hZE1lc2ggJiYgZXh0LmxvYWRNZXNoKCBpbmRleCApO1xuXG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ2FjY2Vzc29yJzpcblx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gdGhpcy5sb2FkQWNjZXNzb3IoIGluZGV4ICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAnYnVmZmVyVmlldyc6XG5cdFx0XHRcdFx0ZGVwZW5kZW5jeSA9IHRoaXMuX2ludm9rZU9uZSggZnVuY3Rpb24gKCBleHQgKSB7XG5cblx0XHRcdFx0XHRcdHJldHVybiBleHQubG9hZEJ1ZmZlclZpZXcgJiYgZXh0LmxvYWRCdWZmZXJWaWV3KCBpbmRleCApO1xuXG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ2J1ZmZlcic6XG5cdFx0XHRcdFx0ZGVwZW5kZW5jeSA9IHRoaXMubG9hZEJ1ZmZlciggaW5kZXggKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdtYXRlcmlhbCc6XG5cdFx0XHRcdFx0ZGVwZW5kZW5jeSA9IHRoaXMuX2ludm9rZU9uZSggZnVuY3Rpb24gKCBleHQgKSB7XG5cblx0XHRcdFx0XHRcdHJldHVybiBleHQubG9hZE1hdGVyaWFsICYmIGV4dC5sb2FkTWF0ZXJpYWwoIGluZGV4ICk7XG5cblx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAndGV4dHVyZSc6XG4gICAgICAgICAgZGVwZW5kZW5jeSA9IHRoaXMuX2ludm9rZU9uZSggZnVuY3Rpb24gKCBleHQgKSB7XG5cblx0XHRcdFx0XHRcdHJldHVybiBleHQubG9hZFRleHR1cmUgJiYgZXh0LmxvYWRUZXh0dXJlKCBpbmRleCApO1xuXG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ3NraW4nOlxuXHRcdFx0XHRcdGRlcGVuZGVuY3kgPSB0aGlzLmxvYWRTa2luKCBpbmRleCApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ2FuaW1hdGlvbic6XG5cdFx0XHRcdFx0ZGVwZW5kZW5jeSA9IHRoaXMubG9hZEFuaW1hdGlvbiggaW5kZXggKTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlICdjYW1lcmEnOlxuXHRcdFx0XHRcdGRlcGVuZGVuY3kgPSB0aGlzLmxvYWRDYW1lcmEoIGluZGV4ICk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoICdVbmtub3duIHR5cGU6ICcgKyB0eXBlICk7XG5cblx0XHRcdH1cblxuXHRcdFx0dGhpcy5jYWNoZS5hZGQoIGNhY2hlS2V5LCBkZXBlbmRlbmN5ICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gZGVwZW5kZW5jeTtcblxuXHR9XG5cblx0LyoqXG5cdCAqIFJlcXVlc3RzIGFsbCBkZXBlbmRlbmNpZXMgb2YgdGhlIHNwZWNpZmllZCB0eXBlIGFzeW5jaHJvbm91c2x5LCB3aXRoIGNhY2hpbmcuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG5cdCAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXk8T2JqZWN0Pj59XG5cdCAqL1xuXHRnZXREZXBlbmRlbmNpZXMoIHR5cGUgKSB7XG5cblx0XHRsZXQgZGVwZW5kZW5jaWVzID0gdGhpcy5jYWNoZS5nZXQoIHR5cGUgKTtcblxuXHRcdGlmICggISBkZXBlbmRlbmNpZXMgKSB7XG5cblx0XHRcdGNvbnN0IHBhcnNlciA9IHRoaXM7XG5cdFx0XHRjb25zdCBkZWZzID0gdGhpcy5qc29uWyB0eXBlICsgKCB0eXBlID09PSAnbWVzaCcgPyAnZXMnIDogJ3MnICkgXSB8fCBbXTtcblxuXHRcdFx0ZGVwZW5kZW5jaWVzID0gUHJvbWlzZS5hbGwoIGRlZnMubWFwKCBmdW5jdGlvbiAoIGRlZiwgaW5kZXggKSB7XG5cblx0XHRcdFx0cmV0dXJuIHBhcnNlci5nZXREZXBlbmRlbmN5KCB0eXBlLCBpbmRleCApO1xuXG5cdFx0XHR9ICkgKTtcblxuXHRcdFx0dGhpcy5jYWNoZS5hZGQoIHR5cGUsIGRlcGVuZGVuY2llcyApO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlcGVuZGVuY2llcztcblxuXHR9XG5cblx0LyoqXG5cdCAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjYnVmZmVycy1hbmQtYnVmZmVyLXZpZXdzXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBidWZmZXJJbmRleFxuXHQgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5QnVmZmVyPn1cblx0ICovXG5cdGxvYWRCdWZmZXIoIGJ1ZmZlckluZGV4ICkge1xuXG5cdFx0Y29uc3QgYnVmZmVyRGVmID0gdGhpcy5qc29uLmJ1ZmZlcnNbIGJ1ZmZlckluZGV4IF07XG5cdFx0Y29uc3QgbG9hZGVyID0gdGhpcy5maWxlTG9hZGVyO1xuXG5cdFx0aWYgKCBidWZmZXJEZWYudHlwZSAmJiBidWZmZXJEZWYudHlwZSAhPT0gJ2FycmF5YnVmZmVyJyApIHtcblxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuR0xURkxvYWRlcjogJyArIGJ1ZmZlckRlZi50eXBlICsgJyBidWZmZXIgdHlwZSBpcyBub3Qgc3VwcG9ydGVkLicgKTtcblxuXHRcdH1cblxuXHRcdC8vIElmIHByZXNlbnQsIEdMQiBjb250YWluZXIgaXMgcmVxdWlyZWQgdG8gYmUgdGhlIGZpcnN0IGJ1ZmZlci5cblx0XHRpZiAoIGJ1ZmZlckRlZi51cmkgPT09IHVuZGVmaW5lZCAmJiBidWZmZXJJbmRleCA9PT0gMCApIHtcblxuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSggdGhpcy5leHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9CSU5BUllfR0xURiBdLmJvZHkgKTtcblxuXHRcdH1cblxuXHRcdGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2UoIGZ1bmN0aW9uICggcmVzb2x2ZSwgcmVqZWN0ICkge1xuXG5cdFx0XHRsb2FkZXIubG9hZCggcmVzb2x2ZVVSTCggYnVmZmVyRGVmLnVyaSwgb3B0aW9ucy5wYXRoICksIHJlc29sdmUsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdHJlamVjdCggbmV3IEVycm9yKCAnVEhSRUUuR0xURkxvYWRlcjogRmFpbGVkIHRvIGxvYWQgYnVmZmVyIFwiJyArIGJ1ZmZlckRlZi51cmkgKyAnXCIuJyApICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdH0gKTtcblxuXHR9XG5cblx0LyoqXG5cdCAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjYnVmZmVycy1hbmQtYnVmZmVyLXZpZXdzXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBidWZmZXJWaWV3SW5kZXhcblx0ICogQHJldHVybiB7UHJvbWlzZTxBcnJheUJ1ZmZlcj59XG5cdCAqL1xuXHRsb2FkQnVmZmVyVmlldyggYnVmZmVyVmlld0luZGV4ICkge1xuXG5cdFx0Y29uc3QgYnVmZmVyVmlld0RlZiA9IHRoaXMuanNvbi5idWZmZXJWaWV3c1sgYnVmZmVyVmlld0luZGV4IF07XG5cblx0XHRyZXR1cm4gdGhpcy5nZXREZXBlbmRlbmN5KCAnYnVmZmVyJywgYnVmZmVyVmlld0RlZi5idWZmZXIgKS50aGVuKCBmdW5jdGlvbiAoIGJ1ZmZlciApIHtcblxuXHRcdFx0Y29uc3QgYnl0ZUxlbmd0aCA9IGJ1ZmZlclZpZXdEZWYuYnl0ZUxlbmd0aCB8fCAwO1xuXHRcdFx0Y29uc3QgYnl0ZU9mZnNldCA9IGJ1ZmZlclZpZXdEZWYuYnl0ZU9mZnNldCB8fCAwO1xuXHRcdFx0cmV0dXJuIGJ1ZmZlci5zbGljZSggYnl0ZU9mZnNldCwgYnl0ZU9mZnNldCArIGJ5dGVMZW5ndGggKTtcblxuXHRcdH0gKTtcblxuXHR9XG5cblx0LyoqXG5cdCAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjYWNjZXNzb3JzXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBhY2Nlc3NvckluZGV4XG5cdCAqIEByZXR1cm4ge1Byb21pc2U8QnVmZmVyQXR0cmlidXRlfEludGVybGVhdmVkQnVmZmVyQXR0cmlidXRlPn1cblx0ICovXG5cdGxvYWRBY2Nlc3NvciggYWNjZXNzb3JJbmRleCApIHtcblxuXHRcdGNvbnN0IHBhcnNlciA9IHRoaXM7XG5cdFx0Y29uc3QganNvbiA9IHRoaXMuanNvbjtcblxuXHRcdGNvbnN0IGFjY2Vzc29yRGVmID0gdGhpcy5qc29uLmFjY2Vzc29yc1sgYWNjZXNzb3JJbmRleCBdO1xuXG5cdFx0aWYgKCBhY2Nlc3NvckRlZi5idWZmZXJWaWV3ID09PSB1bmRlZmluZWQgJiYgYWNjZXNzb3JEZWYuc3BhcnNlID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdC8vIElnbm9yZSBlbXB0eSBhY2Nlc3NvcnMsIHdoaWNoIG1heSBiZSB1c2VkIHRvIGRlY2xhcmUgcnVudGltZVxuXHRcdFx0Ly8gaW5mb3JtYXRpb24gYWJvdXQgYXR0cmlidXRlcyBjb21pbmcgZnJvbSBhbm90aGVyIHNvdXJjZSAoZS5nLiBEcmFjb1xuXHRcdFx0Ly8gY29tcHJlc3Npb24gZXh0ZW5zaW9uKS5cblx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoIG51bGwgKTtcblxuXHRcdH1cblxuXHRcdGNvbnN0IHBlbmRpbmdCdWZmZXJWaWV3cyA9IFtdO1xuXG5cdFx0aWYgKCBhY2Nlc3NvckRlZi5idWZmZXJWaWV3ICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdHBlbmRpbmdCdWZmZXJWaWV3cy5wdXNoKCB0aGlzLmdldERlcGVuZGVuY3koICdidWZmZXJWaWV3JywgYWNjZXNzb3JEZWYuYnVmZmVyVmlldyApICk7XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRwZW5kaW5nQnVmZmVyVmlld3MucHVzaCggbnVsbCApO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBhY2Nlc3NvckRlZi5zcGFyc2UgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0cGVuZGluZ0J1ZmZlclZpZXdzLnB1c2goIHRoaXMuZ2V0RGVwZW5kZW5jeSggJ2J1ZmZlclZpZXcnLCBhY2Nlc3NvckRlZi5zcGFyc2UuaW5kaWNlcy5idWZmZXJWaWV3ICkgKTtcblx0XHRcdHBlbmRpbmdCdWZmZXJWaWV3cy5wdXNoKCB0aGlzLmdldERlcGVuZGVuY3koICdidWZmZXJWaWV3JywgYWNjZXNzb3JEZWYuc3BhcnNlLnZhbHVlcy5idWZmZXJWaWV3ICkgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBQcm9taXNlLmFsbCggcGVuZGluZ0J1ZmZlclZpZXdzICkudGhlbiggZnVuY3Rpb24gKCBidWZmZXJWaWV3cyApIHtcblxuXHRcdFx0Y29uc3QgYnVmZmVyVmlldyA9IGJ1ZmZlclZpZXdzWyAwIF07XG5cblx0XHRcdGNvbnN0IGl0ZW1TaXplID0gV0VCR0xfVFlQRV9TSVpFU1sgYWNjZXNzb3JEZWYudHlwZSBdO1xuXHRcdFx0Y29uc3QgVHlwZWRBcnJheSA9IFdFQkdMX0NPTVBPTkVOVF9UWVBFU1sgYWNjZXNzb3JEZWYuY29tcG9uZW50VHlwZSBdO1xuXG5cdFx0XHQvLyBGb3IgVkVDMzogaXRlbVNpemUgaXMgMywgZWxlbWVudEJ5dGVzIGlzIDQsIGl0ZW1CeXRlcyBpcyAxMi5cblx0XHRcdGNvbnN0IGVsZW1lbnRCeXRlcyA9IFR5cGVkQXJyYXkuQllURVNfUEVSX0VMRU1FTlQ7XG5cdFx0XHRjb25zdCBpdGVtQnl0ZXMgPSBlbGVtZW50Qnl0ZXMgKiBpdGVtU2l6ZTtcblx0XHRcdGNvbnN0IGJ5dGVPZmZzZXQgPSBhY2Nlc3NvckRlZi5ieXRlT2Zmc2V0IHx8IDA7XG5cdFx0XHRjb25zdCBieXRlU3RyaWRlID0gYWNjZXNzb3JEZWYuYnVmZmVyVmlldyAhPT0gdW5kZWZpbmVkID8ganNvbi5idWZmZXJWaWV3c1sgYWNjZXNzb3JEZWYuYnVmZmVyVmlldyBdLmJ5dGVTdHJpZGUgOiB1bmRlZmluZWQ7XG5cdFx0XHRjb25zdCBub3JtYWxpemVkID0gYWNjZXNzb3JEZWYubm9ybWFsaXplZCA9PT0gdHJ1ZTtcblx0XHRcdGxldCBhcnJheSwgYnVmZmVyQXR0cmlidXRlO1xuXG5cdFx0XHQvLyBUaGUgYnVmZmVyIGlzIG5vdCBpbnRlcmxlYXZlZCBpZiB0aGUgc3RyaWRlIGlzIHRoZSBpdGVtIHNpemUgaW4gYnl0ZXMuXG5cdFx0XHRpZiAoIGJ5dGVTdHJpZGUgJiYgYnl0ZVN0cmlkZSAhPT0gaXRlbUJ5dGVzICkge1xuXG5cdFx0XHRcdC8vIEVhY2ggXCJzbGljZVwiIG9mIHRoZSBidWZmZXIsIGFzIGRlZmluZWQgYnkgJ2NvdW50JyBlbGVtZW50cyBvZiAnYnl0ZVN0cmlkZScgYnl0ZXMsIGdldHMgaXRzIG93biBJbnRlcmxlYXZlZEJ1ZmZlclxuXHRcdFx0XHQvLyBUaGlzIG1ha2VzIHN1cmUgdGhhdCBJQkEuY291bnQgcmVmbGVjdHMgYWNjZXNzb3IuY291bnQgcHJvcGVybHlcblx0XHRcdFx0Y29uc3QgaWJTbGljZSA9IE1hdGguZmxvb3IoIGJ5dGVPZmZzZXQgLyBieXRlU3RyaWRlICk7XG5cdFx0XHRcdGNvbnN0IGliQ2FjaGVLZXkgPSAnSW50ZXJsZWF2ZWRCdWZmZXI6JyArIGFjY2Vzc29yRGVmLmJ1ZmZlclZpZXcgKyAnOicgKyBhY2Nlc3NvckRlZi5jb21wb25lbnRUeXBlICsgJzonICsgaWJTbGljZSArICc6JyArIGFjY2Vzc29yRGVmLmNvdW50O1xuXHRcdFx0XHRsZXQgaWIgPSBwYXJzZXIuY2FjaGUuZ2V0KCBpYkNhY2hlS2V5ICk7XG5cblx0XHRcdFx0aWYgKCAhIGliICkge1xuXG5cdFx0XHRcdFx0YXJyYXkgPSBuZXcgVHlwZWRBcnJheSggYnVmZmVyVmlldywgaWJTbGljZSAqIGJ5dGVTdHJpZGUsIGFjY2Vzc29yRGVmLmNvdW50ICogYnl0ZVN0cmlkZSAvIGVsZW1lbnRCeXRlcyApO1xuXG5cdFx0XHRcdFx0Ly8gSW50ZWdlciBwYXJhbWV0ZXJzIHRvIElCL0lCQSBhcmUgaW4gYXJyYXkgZWxlbWVudHMsIG5vdCBieXRlcy5cblx0XHRcdFx0XHRpYiA9IG5ldyBJbnRlcmxlYXZlZEJ1ZmZlciggYXJyYXksIGJ5dGVTdHJpZGUgLyBlbGVtZW50Qnl0ZXMgKTtcblxuXHRcdFx0XHRcdHBhcnNlci5jYWNoZS5hZGQoIGliQ2FjaGVLZXksIGliICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGJ1ZmZlckF0dHJpYnV0ZSA9IG5ldyBJbnRlcmxlYXZlZEJ1ZmZlckF0dHJpYnV0ZSggaWIsIGl0ZW1TaXplLCAoIGJ5dGVPZmZzZXQgJSBieXRlU3RyaWRlICkgLyBlbGVtZW50Qnl0ZXMsIG5vcm1hbGl6ZWQgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRpZiAoIGJ1ZmZlclZpZXcgPT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHRhcnJheSA9IG5ldyBUeXBlZEFycmF5KCBhY2Nlc3NvckRlZi5jb3VudCAqIGl0ZW1TaXplICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdGFycmF5ID0gbmV3IFR5cGVkQXJyYXkoIGJ1ZmZlclZpZXcsIGJ5dGVPZmZzZXQsIGFjY2Vzc29yRGVmLmNvdW50ICogaXRlbVNpemUgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0YnVmZmVyQXR0cmlidXRlID0gbmV3IEJ1ZmZlckF0dHJpYnV0ZSggYXJyYXksIGl0ZW1TaXplLCBub3JtYWxpemVkICk7XG5cblx0XHRcdH1cblxuXHRcdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wL1JFQURNRS5tZCNzcGFyc2UtYWNjZXNzb3JzXG5cdFx0XHRpZiAoIGFjY2Vzc29yRGVmLnNwYXJzZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdGNvbnN0IGl0ZW1TaXplSW5kaWNlcyA9IFdFQkdMX1RZUEVfU0laRVMuU0NBTEFSO1xuXHRcdFx0XHRjb25zdCBUeXBlZEFycmF5SW5kaWNlcyA9IFdFQkdMX0NPTVBPTkVOVF9UWVBFU1sgYWNjZXNzb3JEZWYuc3BhcnNlLmluZGljZXMuY29tcG9uZW50VHlwZSBdO1xuXG5cdFx0XHRcdGNvbnN0IGJ5dGVPZmZzZXRJbmRpY2VzID0gYWNjZXNzb3JEZWYuc3BhcnNlLmluZGljZXMuYnl0ZU9mZnNldCB8fCAwO1xuXHRcdFx0XHRjb25zdCBieXRlT2Zmc2V0VmFsdWVzID0gYWNjZXNzb3JEZWYuc3BhcnNlLnZhbHVlcy5ieXRlT2Zmc2V0IHx8IDA7XG5cblx0XHRcdFx0Y29uc3Qgc3BhcnNlSW5kaWNlcyA9IG5ldyBUeXBlZEFycmF5SW5kaWNlcyggYnVmZmVyVmlld3NbIDEgXSwgYnl0ZU9mZnNldEluZGljZXMsIGFjY2Vzc29yRGVmLnNwYXJzZS5jb3VudCAqIGl0ZW1TaXplSW5kaWNlcyApO1xuXHRcdFx0XHRjb25zdCBzcGFyc2VWYWx1ZXMgPSBuZXcgVHlwZWRBcnJheSggYnVmZmVyVmlld3NbIDIgXSwgYnl0ZU9mZnNldFZhbHVlcywgYWNjZXNzb3JEZWYuc3BhcnNlLmNvdW50ICogaXRlbVNpemUgKTtcblxuXHRcdFx0XHRpZiAoIGJ1ZmZlclZpZXcgIT09IG51bGwgKSB7XG5cblx0XHRcdFx0XHQvLyBBdm9pZCBtb2RpZnlpbmcgdGhlIG9yaWdpbmFsIEFycmF5QnVmZmVyLCBpZiB0aGUgYnVmZmVyVmlldyB3YXNuJ3QgaW5pdGlhbGl6ZWQgd2l0aCB6ZXJvZXMuXG5cdFx0XHRcdFx0YnVmZmVyQXR0cmlidXRlID0gbmV3IEJ1ZmZlckF0dHJpYnV0ZSggYnVmZmVyQXR0cmlidXRlLmFycmF5LnNsaWNlKCksIGJ1ZmZlckF0dHJpYnV0ZS5pdGVtU2l6ZSwgYnVmZmVyQXR0cmlidXRlLm5vcm1hbGl6ZWQgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IHNwYXJzZUluZGljZXMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRcdFx0XHRjb25zdCBpbmRleCA9IHNwYXJzZUluZGljZXNbIGkgXTtcblxuXHRcdFx0XHRcdGJ1ZmZlckF0dHJpYnV0ZS5zZXRYKCBpbmRleCwgc3BhcnNlVmFsdWVzWyBpICogaXRlbVNpemUgXSApO1xuXHRcdFx0XHRcdGlmICggaXRlbVNpemUgPj0gMiApIGJ1ZmZlckF0dHJpYnV0ZS5zZXRZKCBpbmRleCwgc3BhcnNlVmFsdWVzWyBpICogaXRlbVNpemUgKyAxIF0gKTtcblx0XHRcdFx0XHRpZiAoIGl0ZW1TaXplID49IDMgKSBidWZmZXJBdHRyaWJ1dGUuc2V0WiggaW5kZXgsIHNwYXJzZVZhbHVlc1sgaSAqIGl0ZW1TaXplICsgMiBdICk7XG5cdFx0XHRcdFx0aWYgKCBpdGVtU2l6ZSA+PSA0ICkgYnVmZmVyQXR0cmlidXRlLnNldFcoIGluZGV4LCBzcGFyc2VWYWx1ZXNbIGkgKiBpdGVtU2l6ZSArIDMgXSApO1xuXHRcdFx0XHRcdGlmICggaXRlbVNpemUgPj0gNSApIHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IFVuc3VwcG9ydGVkIGl0ZW1TaXplIGluIHNwYXJzZSBCdWZmZXJBdHRyaWJ1dGUuJyApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gYnVmZmVyQXR0cmlidXRlO1xuXG5cdFx0fSApO1xuXG5cdH1cblxuXHQvKipcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wI3RleHR1cmVzXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB0ZXh0dXJlSW5kZXhcblx0ICogQHJldHVybiB7UHJvbWlzZTxUSFJFRS5UZXh0dXJlPn1cblx0ICovXG5cdGxvYWRUZXh0dXJlKCB0ZXh0dXJlSW5kZXggKSB7XG5cblx0XHRjb25zdCBqc29uID0gdGhpcy5qc29uO1xuXHRcdGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cdFx0Y29uc3QgdGV4dHVyZURlZiA9IGpzb24udGV4dHVyZXNbIHRleHR1cmVJbmRleCBdO1xuXHRcdGNvbnN0IHNvdXJjZSA9IGpzb24uaW1hZ2VzWyB0ZXh0dXJlRGVmLnNvdXJjZSBdO1xuXG5cdFx0bGV0IGxvYWRlciA9IHRoaXMudGV4dHVyZUxvYWRlcjtcblxuXHRcdGlmICggc291cmNlLnVyaSApIHtcblxuXHRcdFx0Y29uc3QgaGFuZGxlciA9IG9wdGlvbnMubWFuYWdlci5nZXRIYW5kbGVyKCBzb3VyY2UudXJpICk7XG5cdFx0XHRpZiAoIGhhbmRsZXIgIT09IG51bGwgKSBsb2FkZXIgPSBoYW5kbGVyO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMubG9hZFRleHR1cmVJbWFnZSggdGV4dHVyZUluZGV4LCBzb3VyY2UsIGxvYWRlciApO1xuXG5cdH1cblxuXHRsb2FkVGV4dHVyZUltYWdlKCB0ZXh0dXJlSW5kZXgsIHNvdXJjZSwgbG9hZGVyICkge1xuXG5cdFx0Y29uc3QgcGFyc2VyID0gdGhpcztcblx0XHRjb25zdCBqc29uID0gdGhpcy5qc29uO1xuXHRcdGNvbnN0IG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cblx0XHRjb25zdCB0ZXh0dXJlRGVmID0ganNvbi50ZXh0dXJlc1sgdGV4dHVyZUluZGV4IF07XG5cblx0XHRjb25zdCBjYWNoZUtleSA9ICggc291cmNlLnVyaSB8fCBzb3VyY2UuYnVmZmVyVmlldyApICsgJzonICsgdGV4dHVyZURlZi5zYW1wbGVyO1xuXG5cdFx0aWYgKCB0aGlzLnRleHR1cmVDYWNoZVsgY2FjaGVLZXkgXSApIHtcblxuXHRcdFx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2IvdGhyZWUuanMvaXNzdWVzLzIxNTU5LlxuXHRcdFx0cmV0dXJuIHRoaXMudGV4dHVyZUNhY2hlWyBjYWNoZUtleSBdO1xuXG5cdFx0fVxuXG5cdFx0Y29uc3QgVVJMID0gc2VsZi5VUkwgfHwgc2VsZi53ZWJraXRVUkw7XG5cblx0XHRsZXQgc291cmNlVVJJID0gc291cmNlLnVyaSB8fCAnJztcblx0XHRsZXQgaXNPYmplY3RVUkwgPSBmYWxzZTtcblx0XHRsZXQgaGFzQWxwaGEgPSB0cnVlO1xuXG5cdFx0Y29uc3QgaXNKUEVHID0gc291cmNlVVJJLnNlYXJjaCggL1xcLmpwZT9nKCR8XFw/KS9pICkgPiAwIHx8IHNvdXJjZVVSSS5zZWFyY2goIC9eZGF0YVxcOmltYWdlXFwvanBlZy8gKSA9PT0gMDtcblxuXHRcdGlmICggc291cmNlLm1pbWVUeXBlID09PSAnaW1hZ2UvanBlZycgfHwgaXNKUEVHICkgaGFzQWxwaGEgPSBmYWxzZTtcblxuXHRcdGlmICggc291cmNlLmJ1ZmZlclZpZXcgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0Ly8gTG9hZCBiaW5hcnkgaW1hZ2UgZGF0YSBmcm9tIGJ1ZmZlclZpZXcsIGlmIHByb3ZpZGVkLlxuXG5cdFx0XHRzb3VyY2VVUkkgPSBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ2J1ZmZlclZpZXcnLCBzb3VyY2UuYnVmZmVyVmlldyApLnRoZW4oIGZ1bmN0aW9uICggYnVmZmVyVmlldyApIHtcblxuXHRcdFx0XHRpZiAoIHNvdXJjZS5taW1lVHlwZSA9PT0gJ2ltYWdlL3BuZycgKSB7XG5cblx0XHRcdFx0XHQvLyBJbnNwZWN0IHRoZSBQTkcgJ0lIRFInIGNodW5rIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSBpbWFnZSBjb3VsZCBoYXZlIGFuXG5cdFx0XHRcdFx0Ly8gYWxwaGEgY2hhbm5lbC4gVGhpcyBjaGVjayBpcyBjb25zZXJ2YXRpdmUg4oCUIHRoZSBpbWFnZSBjb3VsZCBoYXZlIGFuIGFscGhhXG5cdFx0XHRcdFx0Ly8gY2hhbm5lbCB3aXRoIGFsbCB2YWx1ZXMgPT0gMSwgYW5kIHRoZSBpbmRleGVkIHR5cGUgKGNvbG9yVHlwZSA9PSAzKSBvbmx5XG5cdFx0XHRcdFx0Ly8gc29tZXRpbWVzIGNvbnRhaW5zIGFscGhhLlxuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0Ly8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUG9ydGFibGVfTmV0d29ya19HcmFwaGljcyNGaWxlX2hlYWRlclxuXHRcdFx0XHRcdGNvbnN0IGNvbG9yVHlwZSA9IG5ldyBEYXRhVmlldyggYnVmZmVyVmlldywgMjUsIDEgKS5nZXRVaW50OCggMCwgZmFsc2UgKTtcblx0XHRcdFx0XHRoYXNBbHBoYSA9IGNvbG9yVHlwZSA9PT0gNiB8fCBjb2xvclR5cGUgPT09IDQgfHwgY29sb3JUeXBlID09PSAzO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpc09iamVjdFVSTCA9IHRydWU7XG5cdFx0XHRcdGNvbnN0IGJsb2IgPSBuZXcgQmxvYiggWyBidWZmZXJWaWV3IF0sIHsgdHlwZTogc291cmNlLm1pbWVUeXBlIH0gKTtcblx0XHRcdFx0c291cmNlVVJJID0gVVJMLmNyZWF0ZU9iamVjdFVSTCggYmxvYiApO1xuXHRcdFx0XHRyZXR1cm4gc291cmNlVVJJO1xuXG5cdFx0XHR9ICk7XG5cblx0XHR9IGVsc2UgaWYgKCBzb3VyY2UudXJpID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdHRocm93IG5ldyBFcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IEltYWdlICcgKyB0ZXh0dXJlSW5kZXggKyAnIGlzIG1pc3NpbmcgVVJJIGFuZCBidWZmZXJWaWV3JyApO1xuXG5cdFx0fVxuXG5cdFx0Y29uc3QgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSggc291cmNlVVJJICkudGhlbiggZnVuY3Rpb24gKCBzb3VyY2VVUkkgKSB7XG5cblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSggZnVuY3Rpb24gKCByZXNvbHZlLCByZWplY3QgKSB7XG5cblx0XHRcdFx0bGV0IG9uTG9hZCA9IHJlc29sdmU7XG5cblx0XHRcdFx0aWYgKCBsb2FkZXIuaXNJbWFnZUJpdG1hcExvYWRlciA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdG9uTG9hZCA9IGZ1bmN0aW9uICggaW1hZ2VCaXRtYXAgKSB7XG5cblx0XHRcdFx0XHRcdGNvbnN0IHRleHR1cmUgPSBuZXcgVGV4dHVyZSggaW1hZ2VCaXRtYXAgKTtcblx0XHRcdFx0XHRcdHRleHR1cmUubmVlZHNVcGRhdGUgPSB0cnVlO1xuXG5cdFx0XHRcdFx0XHRyZXNvbHZlKCB0ZXh0dXJlICk7XG5cblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRsb2FkZXIubG9hZCggcmVzb2x2ZVVSTCggc291cmNlVVJJLCBvcHRpb25zLnBhdGggKSwgb25Mb2FkLCB1bmRlZmluZWQsIHJlamVjdCApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHR9ICkudGhlbiggZnVuY3Rpb24gKCB0ZXh0dXJlICkge1xuXG5cdFx0XHQvLyBDbGVhbiB1cCByZXNvdXJjZXMgYW5kIGNvbmZpZ3VyZSBUZXh0dXJlLlxuXG5cdFx0XHRpZiAoIGlzT2JqZWN0VVJMID09PSB0cnVlICkge1xuXG5cdFx0XHRcdFVSTC5yZXZva2VPYmplY3RVUkwoIHNvdXJjZVVSSSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHRleHR1cmUuZmxpcFkgPSBmYWxzZTtcblxuXHRcdFx0aWYgKCB0ZXh0dXJlRGVmLm5hbWUgKSB0ZXh0dXJlLm5hbWUgPSB0ZXh0dXJlRGVmLm5hbWU7XG5cblx0XHRcdC8vIFdoZW4gdGhlcmUgaXMgZGVmaW5pdGVseSBubyBhbHBoYSBjaGFubmVsIGluIHRoZSB0ZXh0dXJlLCBzZXQgUkdCRm9ybWF0IHRvIHNhdmUgc3BhY2UuXG5cdFx0XHRpZiAoICEgaGFzQWxwaGEgKSB0ZXh0dXJlLmZvcm1hdCA9IFJHQkZvcm1hdDtcblxuXHRcdFx0Y29uc3Qgc2FtcGxlcnMgPSBqc29uLnNhbXBsZXJzIHx8IHt9O1xuXHRcdFx0Y29uc3Qgc2FtcGxlciA9IHNhbXBsZXJzWyB0ZXh0dXJlRGVmLnNhbXBsZXIgXSB8fCB7fTtcblxuXHRcdFx0dGV4dHVyZS5tYWdGaWx0ZXIgPSBXRUJHTF9GSUxURVJTWyBzYW1wbGVyLm1hZ0ZpbHRlciBdIHx8IExpbmVhckZpbHRlcjtcblx0XHRcdHRleHR1cmUubWluRmlsdGVyID0gV0VCR0xfRklMVEVSU1sgc2FtcGxlci5taW5GaWx0ZXIgXSB8fCBMaW5lYXJNaXBtYXBMaW5lYXJGaWx0ZXI7XG5cdFx0XHR0ZXh0dXJlLndyYXBTID0gV0VCR0xfV1JBUFBJTkdTWyBzYW1wbGVyLndyYXBTIF0gfHwgUmVwZWF0V3JhcHBpbmc7XG5cdFx0XHR0ZXh0dXJlLndyYXBUID0gV0VCR0xfV1JBUFBJTkdTWyBzYW1wbGVyLndyYXBUIF0gfHwgUmVwZWF0V3JhcHBpbmc7XG5cblx0XHRcdHBhcnNlci5hc3NvY2lhdGlvbnMuc2V0KCB0ZXh0dXJlLCB7XG5cdFx0XHRcdHR5cGU6ICd0ZXh0dXJlcycsXG5cdFx0XHRcdGluZGV4OiB0ZXh0dXJlSW5kZXhcblx0XHRcdH0gKTtcblxuXHRcdFx0cmV0dXJuIHRleHR1cmU7XG5cblx0XHR9ICkuY2F0Y2goIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0Y29uc29sZS5lcnJvciggJ1RIUkVFLkdMVEZMb2FkZXI6IENvdWxkblxcJ3QgbG9hZCB0ZXh0dXJlJywgc291cmNlVVJJICk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdH0gKTtcblxuXHRcdHRoaXMudGV4dHVyZUNhY2hlWyBjYWNoZUtleSBdID0gcHJvbWlzZTtcblxuXHRcdHJldHVybiBwcm9taXNlO1xuXG5cdH1cblxuXHQvKipcblx0ICogQXN5bmNocm9ub3VzbHkgYXNzaWducyBhIHRleHR1cmUgdG8gdGhlIGdpdmVuIG1hdGVyaWFsIHBhcmFtZXRlcnMuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBtYXRlcmlhbFBhcmFtc1xuXHQgKiBAcGFyYW0ge3N0cmluZ30gbWFwTmFtZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gbWFwRGVmXG5cdCAqIEByZXR1cm4ge1Byb21pc2V9XG5cdCAqL1xuXHRhc3NpZ25UZXh0dXJlKCBtYXRlcmlhbFBhcmFtcywgbWFwTmFtZSwgbWFwRGVmICkge1xuXG5cdFx0Y29uc3QgcGFyc2VyID0gdGhpcztcblxuXHRcdHJldHVybiB0aGlzLmdldERlcGVuZGVuY3koICd0ZXh0dXJlJywgbWFwRGVmLmluZGV4ICkudGhlbiggZnVuY3Rpb24gKCB0ZXh0dXJlICkge1xuXG5cdFx0XHQvLyBNYXRlcmlhbHMgc2FtcGxlIGFvTWFwIGZyb20gVVYgc2V0IDEgYW5kIG90aGVyIG1hcHMgZnJvbSBVViBzZXQgMCAtIHRoaXMgY2FuJ3QgYmUgY29uZmlndXJlZFxuXHRcdFx0Ly8gSG93ZXZlciwgd2Ugd2lsbCBjb3B5IFVWIHNldCAwIHRvIFVWIHNldCAxIG9uIGRlbWFuZCBmb3IgYW9NYXBcblx0XHRcdGlmICggbWFwRGVmLnRleENvb3JkICE9PSB1bmRlZmluZWQgJiYgbWFwRGVmLnRleENvb3JkICE9IDAgJiYgISAoIG1hcE5hbWUgPT09ICdhb01hcCcgJiYgbWFwRGVmLnRleENvb3JkID09IDEgKSApIHtcblxuXHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5HTFRGTG9hZGVyOiBDdXN0b20gVVYgc2V0ICcgKyBtYXBEZWYudGV4Q29vcmQgKyAnIGZvciB0ZXh0dXJlICcgKyBtYXBOYW1lICsgJyBub3QgeWV0IHN1cHBvcnRlZC4nICk7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBwYXJzZXIuZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfVEVYVFVSRV9UUkFOU0ZPUk0gXSApIHtcblxuXHRcdFx0XHRjb25zdCB0cmFuc2Zvcm0gPSBtYXBEZWYuZXh0ZW5zaW9ucyAhPT0gdW5kZWZpbmVkID8gbWFwRGVmLmV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX1RFWFRVUkVfVFJBTlNGT1JNIF0gOiB1bmRlZmluZWQ7XG5cblx0XHRcdFx0aWYgKCB0cmFuc2Zvcm0gKSB7XG5cblx0XHRcdFx0XHRjb25zdCBnbHRmUmVmZXJlbmNlID0gcGFyc2VyLmFzc29jaWF0aW9ucy5nZXQoIHRleHR1cmUgKTtcblx0XHRcdFx0XHR0ZXh0dXJlID0gcGFyc2VyLmV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX1RFWFRVUkVfVFJBTlNGT1JNIF0uZXh0ZW5kVGV4dHVyZSggdGV4dHVyZSwgdHJhbnNmb3JtICk7XG5cdFx0XHRcdFx0cGFyc2VyLmFzc29jaWF0aW9ucy5zZXQoIHRleHR1cmUsIGdsdGZSZWZlcmVuY2UgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0bWF0ZXJpYWxQYXJhbXNbIG1hcE5hbWUgXSA9IHRleHR1cmU7XG5cblx0XHR9ICk7XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBBc3NpZ25zIGZpbmFsIG1hdGVyaWFsIHRvIGEgTWVzaCwgTGluZSwgb3IgUG9pbnRzIGluc3RhbmNlLiBUaGUgaW5zdGFuY2Vcblx0ICogYWxyZWFkeSBoYXMgYSBtYXRlcmlhbCAoZ2VuZXJhdGVkIGZyb20gdGhlIGdsVEYgbWF0ZXJpYWwgb3B0aW9ucyBhbG9uZSlcblx0ICogYnV0IHJldXNlIG9mIHRoZSBzYW1lIGdsVEYgbWF0ZXJpYWwgbWF5IHJlcXVpcmUgbXVsdGlwbGUgdGhyZWVqcyBtYXRlcmlhbHNcblx0ICogdG8gYWNjb21tb2RhdGUgZGlmZmVyZW50IHByaW1pdGl2ZSB0eXBlcywgZGVmaW5lcywgZXRjLiBOZXcgbWF0ZXJpYWxzIHdpbGxcblx0ICogYmUgY3JlYXRlZCBpZiBuZWNlc3NhcnksIGFuZCByZXVzZWQgZnJvbSBhIGNhY2hlLlxuXHQgKiBAcGFyYW0gIHtPYmplY3QzRH0gbWVzaCBNZXNoLCBMaW5lLCBvciBQb2ludHMgaW5zdGFuY2UuXG5cdCAqL1xuXHRhc3NpZ25GaW5hbE1hdGVyaWFsKCBtZXNoICkge1xuXG5cdFx0Y29uc3QgZ2VvbWV0cnkgPSBtZXNoLmdlb21ldHJ5O1xuXHRcdGxldCBtYXRlcmlhbCA9IG1lc2gubWF0ZXJpYWw7XG5cblx0XHRjb25zdCB1c2VWZXJ0ZXhUYW5nZW50cyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMudGFuZ2VudCAhPT0gdW5kZWZpbmVkO1xuXHRcdGNvbnN0IHVzZVZlcnRleENvbG9ycyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMuY29sb3IgIT09IHVuZGVmaW5lZDtcblx0XHRjb25zdCB1c2VGbGF0U2hhZGluZyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMubm9ybWFsID09PSB1bmRlZmluZWQ7XG5cdFx0Y29uc3QgdXNlTW9ycGhUYXJnZXRzID0gT2JqZWN0LmtleXMoIGdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcyApLmxlbmd0aCA+IDA7XG5cdFx0Y29uc3QgdXNlTW9ycGhOb3JtYWxzID0gdXNlTW9ycGhUYXJnZXRzICYmIGdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5ub3JtYWwgIT09IHVuZGVmaW5lZDtcblxuXHRcdGlmICggbWVzaC5pc1BvaW50cyApIHtcblxuXHRcdFx0Y29uc3QgY2FjaGVLZXkgPSAnUG9pbnRzTWF0ZXJpYWw6JyArIG1hdGVyaWFsLnV1aWQ7XG5cblx0XHRcdGxldCBwb2ludHNNYXRlcmlhbCA9IHRoaXMuY2FjaGUuZ2V0KCBjYWNoZUtleSApO1xuXG5cdFx0XHRpZiAoICEgcG9pbnRzTWF0ZXJpYWwgKSB7XG5cblx0XHRcdFx0cG9pbnRzTWF0ZXJpYWwgPSBuZXcgUG9pbnRzTWF0ZXJpYWwoKTtcblx0XHRcdFx0TWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCggcG9pbnRzTWF0ZXJpYWwsIG1hdGVyaWFsICk7XG5cdFx0XHRcdHBvaW50c01hdGVyaWFsLmNvbG9yLmNvcHkoIG1hdGVyaWFsLmNvbG9yICk7XG5cdFx0XHRcdHBvaW50c01hdGVyaWFsLm1hcCA9IG1hdGVyaWFsLm1hcDtcblx0XHRcdFx0cG9pbnRzTWF0ZXJpYWwuc2l6ZUF0dGVudWF0aW9uID0gZmFsc2U7IC8vIGdsVEYgc3BlYyBzYXlzIHBvaW50cyBzaG91bGQgYmUgMXB4XG5cblx0XHRcdFx0dGhpcy5jYWNoZS5hZGQoIGNhY2hlS2V5LCBwb2ludHNNYXRlcmlhbCApO1xuXG5cdFx0XHR9XG5cblx0XHRcdG1hdGVyaWFsID0gcG9pbnRzTWF0ZXJpYWw7XG5cblx0XHR9IGVsc2UgaWYgKCBtZXNoLmlzTGluZSApIHtcblxuXHRcdFx0Y29uc3QgY2FjaGVLZXkgPSAnTGluZUJhc2ljTWF0ZXJpYWw6JyArIG1hdGVyaWFsLnV1aWQ7XG5cblx0XHRcdGxldCBsaW5lTWF0ZXJpYWwgPSB0aGlzLmNhY2hlLmdldCggY2FjaGVLZXkgKTtcblxuXHRcdFx0aWYgKCAhIGxpbmVNYXRlcmlhbCApIHtcblxuXHRcdFx0XHRsaW5lTWF0ZXJpYWwgPSBuZXcgTGluZUJhc2ljTWF0ZXJpYWwoKTtcblx0XHRcdFx0TWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCggbGluZU1hdGVyaWFsLCBtYXRlcmlhbCApO1xuXHRcdFx0XHRsaW5lTWF0ZXJpYWwuY29sb3IuY29weSggbWF0ZXJpYWwuY29sb3IgKTtcblxuXHRcdFx0XHR0aGlzLmNhY2hlLmFkZCggY2FjaGVLZXksIGxpbmVNYXRlcmlhbCApO1xuXG5cdFx0XHR9XG5cblx0XHRcdG1hdGVyaWFsID0gbGluZU1hdGVyaWFsO1xuXG5cdFx0fVxuXG5cdFx0Ly8gQ2xvbmUgdGhlIG1hdGVyaWFsIGlmIGl0IHdpbGwgYmUgbW9kaWZpZWRcblx0XHRpZiAoIHVzZVZlcnRleFRhbmdlbnRzIHx8IHVzZVZlcnRleENvbG9ycyB8fCB1c2VGbGF0U2hhZGluZyB8fCB1c2VNb3JwaFRhcmdldHMgKSB7XG5cblx0XHRcdGxldCBjYWNoZUtleSA9ICdDbG9uZWRNYXRlcmlhbDonICsgbWF0ZXJpYWwudXVpZCArICc6JztcblxuXHRcdFx0aWYgKCBtYXRlcmlhbC5pc0dMVEZTcGVjdWxhckdsb3NzaW5lc3NNYXRlcmlhbCApIGNhY2hlS2V5ICs9ICdzcGVjdWxhci1nbG9zc2luZXNzOic7XG5cdFx0XHRpZiAoIHVzZVZlcnRleFRhbmdlbnRzICkgY2FjaGVLZXkgKz0gJ3ZlcnRleC10YW5nZW50czonO1xuXHRcdFx0aWYgKCB1c2VWZXJ0ZXhDb2xvcnMgKSBjYWNoZUtleSArPSAndmVydGV4LWNvbG9yczonO1xuXHRcdFx0aWYgKCB1c2VGbGF0U2hhZGluZyApIGNhY2hlS2V5ICs9ICdmbGF0LXNoYWRpbmc6Jztcblx0XHRcdGlmICggdXNlTW9ycGhUYXJnZXRzICkgY2FjaGVLZXkgKz0gJ21vcnBoLXRhcmdldHM6Jztcblx0XHRcdGlmICggdXNlTW9ycGhOb3JtYWxzICkgY2FjaGVLZXkgKz0gJ21vcnBoLW5vcm1hbHM6JztcblxuXHRcdFx0bGV0IGNhY2hlZE1hdGVyaWFsID0gdGhpcy5jYWNoZS5nZXQoIGNhY2hlS2V5ICk7XG5cblx0XHRcdGlmICggISBjYWNoZWRNYXRlcmlhbCApIHtcblxuXHRcdFx0XHRjYWNoZWRNYXRlcmlhbCA9IG1hdGVyaWFsLmNsb25lKCk7XG5cblx0XHRcdFx0aWYgKCB1c2VWZXJ0ZXhDb2xvcnMgKSBjYWNoZWRNYXRlcmlhbC52ZXJ0ZXhDb2xvcnMgPSB0cnVlO1xuXHRcdFx0XHRpZiAoIHVzZUZsYXRTaGFkaW5nICkgY2FjaGVkTWF0ZXJpYWwuZmxhdFNoYWRpbmcgPSB0cnVlO1xuXHRcdFx0XHRpZiAoIHVzZU1vcnBoVGFyZ2V0cyApIGNhY2hlZE1hdGVyaWFsLm1vcnBoVGFyZ2V0cyA9IHRydWU7XG5cdFx0XHRcdGlmICggdXNlTW9ycGhOb3JtYWxzICkgY2FjaGVkTWF0ZXJpYWwubW9ycGhOb3JtYWxzID0gdHJ1ZTtcblxuXHRcdFx0XHRpZiAoIHVzZVZlcnRleFRhbmdlbnRzICkge1xuXG5cdFx0XHRcdFx0Y2FjaGVkTWF0ZXJpYWwudmVydGV4VGFuZ2VudHMgPSB0cnVlO1xuXG5cdFx0XHRcdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9pc3N1ZXMvMTE0MzgjaXNzdWVjb21tZW50LTUwNzAwMzk5NVxuXHRcdFx0XHRcdGlmICggY2FjaGVkTWF0ZXJpYWwubm9ybWFsU2NhbGUgKSBjYWNoZWRNYXRlcmlhbC5ub3JtYWxTY2FsZS55ICo9IC0gMTtcblx0XHRcdFx0XHRpZiAoIGNhY2hlZE1hdGVyaWFsLmNsZWFyY29hdE5vcm1hbFNjYWxlICkgY2FjaGVkTWF0ZXJpYWwuY2xlYXJjb2F0Tm9ybWFsU2NhbGUueSAqPSAtIDE7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMuY2FjaGUuYWRkKCBjYWNoZUtleSwgY2FjaGVkTWF0ZXJpYWwgKTtcblxuXHRcdFx0XHR0aGlzLmFzc29jaWF0aW9ucy5zZXQoIGNhY2hlZE1hdGVyaWFsLCB0aGlzLmFzc29jaWF0aW9ucy5nZXQoIG1hdGVyaWFsICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRtYXRlcmlhbCA9IGNhY2hlZE1hdGVyaWFsO1xuXG5cdFx0fVxuXG5cdFx0Ly8gd29ya2Fyb3VuZHMgZm9yIG1lc2ggYW5kIGdlb21ldHJ5XG5cblx0XHRpZiAoIG1hdGVyaWFsLmFvTWFwICYmIGdlb21ldHJ5LmF0dHJpYnV0ZXMudXYyID09PSB1bmRlZmluZWQgJiYgZ2VvbWV0cnkuYXR0cmlidXRlcy51diAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoICd1djInLCBnZW9tZXRyeS5hdHRyaWJ1dGVzLnV2ICk7XG5cblx0XHR9XG5cblx0XHRtZXNoLm1hdGVyaWFsID0gbWF0ZXJpYWw7XG5cblx0fVxuXG5cdGdldE1hdGVyaWFsVHlwZSggLyogbWF0ZXJpYWxJbmRleCAqLyApIHtcblxuXHRcdHJldHVybiBNZXNoU3RhbmRhcmRNYXRlcmlhbDtcblxuXHR9XG5cblx0LyoqXG5cdCAqIFNwZWNpZmljYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9ibG9iL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMC9SRUFETUUubWQjbWF0ZXJpYWxzXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBtYXRlcmlhbEluZGV4XG5cdCAqIEByZXR1cm4ge1Byb21pc2U8TWF0ZXJpYWw+fVxuXHQgKi9cblx0bG9hZE1hdGVyaWFsKCBtYXRlcmlhbEluZGV4ICkge1xuXG5cdFx0Y29uc3QgcGFyc2VyID0gdGhpcztcblx0XHRjb25zdCBqc29uID0gdGhpcy5qc29uO1xuXHRcdGNvbnN0IGV4dGVuc2lvbnMgPSB0aGlzLmV4dGVuc2lvbnM7XG5cdFx0Y29uc3QgbWF0ZXJpYWxEZWYgPSBqc29uLm1hdGVyaWFsc1sgbWF0ZXJpYWxJbmRleCBdO1xuXG5cdFx0bGV0IG1hdGVyaWFsVHlwZTtcblx0XHRjb25zdCBtYXRlcmlhbFBhcmFtcyA9IHt9O1xuXHRcdGNvbnN0IG1hdGVyaWFsRXh0ZW5zaW9ucyA9IG1hdGVyaWFsRGVmLmV4dGVuc2lvbnMgfHwge307XG5cblx0XHRjb25zdCBwZW5kaW5nID0gW107XG5cblx0XHRpZiAoIG1hdGVyaWFsRXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1BCUl9TUEVDVUxBUl9HTE9TU0lORVNTIF0gKSB7XG5cblx0XHRcdGNvbnN0IHNnRXh0ZW5zaW9uID0gZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1BCUl9TUEVDVUxBUl9HTE9TU0lORVNTIF07XG5cdFx0XHRtYXRlcmlhbFR5cGUgPSBzZ0V4dGVuc2lvbi5nZXRNYXRlcmlhbFR5cGUoKTtcblx0XHRcdHBlbmRpbmcucHVzaCggc2dFeHRlbnNpb24uZXh0ZW5kUGFyYW1zKCBtYXRlcmlhbFBhcmFtcywgbWF0ZXJpYWxEZWYsIHBhcnNlciApICk7XG5cblx0XHR9IGVsc2UgaWYgKCBtYXRlcmlhbEV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX01BVEVSSUFMU19VTkxJVCBdICkge1xuXG5cdFx0XHRjb25zdCBrbXVFeHRlbnNpb24gPSBleHRlbnNpb25zWyBFWFRFTlNJT05TLktIUl9NQVRFUklBTFNfVU5MSVQgXTtcblx0XHRcdG1hdGVyaWFsVHlwZSA9IGttdUV4dGVuc2lvbi5nZXRNYXRlcmlhbFR5cGUoKTtcblx0XHRcdHBlbmRpbmcucHVzaCgga211RXh0ZW5zaW9uLmV4dGVuZFBhcmFtcyggbWF0ZXJpYWxQYXJhbXMsIG1hdGVyaWFsRGVmLCBwYXJzZXIgKSApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gU3BlY2lmaWNhdGlvbjpcblx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi90cmVlL21hc3Rlci9zcGVjaWZpY2F0aW9uLzIuMCNtZXRhbGxpYy1yb3VnaG5lc3MtbWF0ZXJpYWxcblxuXHRcdFx0Y29uc3QgbWV0YWxsaWNSb3VnaG5lc3MgPSBtYXRlcmlhbERlZi5wYnJNZXRhbGxpY1JvdWdobmVzcyB8fCB7fTtcblxuXHRcdFx0bWF0ZXJpYWxQYXJhbXMuY29sb3IgPSBuZXcgQ29sb3IoIDEuMCwgMS4wLCAxLjAgKTtcblx0XHRcdG1hdGVyaWFsUGFyYW1zLm9wYWNpdHkgPSAxLjA7XG5cblx0XHRcdGlmICggQXJyYXkuaXNBcnJheSggbWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yRmFjdG9yICkgKSB7XG5cblx0XHRcdFx0Y29uc3QgYXJyYXkgPSBtZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JGYWN0b3I7XG5cblx0XHRcdFx0bWF0ZXJpYWxQYXJhbXMuY29sb3IuZnJvbUFycmF5KCBhcnJheSApO1xuXHRcdFx0XHRtYXRlcmlhbFBhcmFtcy5vcGFjaXR5ID0gYXJyYXlbIDMgXTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIG1ldGFsbGljUm91Z2huZXNzLmJhc2VDb2xvclRleHR1cmUgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBtYXRlcmlhbFBhcmFtcywgJ21hcCcsIG1ldGFsbGljUm91Z2huZXNzLmJhc2VDb2xvclRleHR1cmUgKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdG1hdGVyaWFsUGFyYW1zLm1ldGFsbmVzcyA9IG1ldGFsbGljUm91Z2huZXNzLm1ldGFsbGljRmFjdG9yICE9PSB1bmRlZmluZWQgPyBtZXRhbGxpY1JvdWdobmVzcy5tZXRhbGxpY0ZhY3RvciA6IDEuMDtcblx0XHRcdG1hdGVyaWFsUGFyYW1zLnJvdWdobmVzcyA9IG1ldGFsbGljUm91Z2huZXNzLnJvdWdobmVzc0ZhY3RvciAhPT0gdW5kZWZpbmVkID8gbWV0YWxsaWNSb3VnaG5lc3Mucm91Z2huZXNzRmFjdG9yIDogMS4wO1xuXG5cdFx0XHRpZiAoIG1ldGFsbGljUm91Z2huZXNzLm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdHBlbmRpbmcucHVzaCggcGFyc2VyLmFzc2lnblRleHR1cmUoIG1hdGVyaWFsUGFyYW1zLCAnbWV0YWxuZXNzTWFwJywgbWV0YWxsaWNSb3VnaG5lc3MubWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlICkgKTtcblx0XHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdyb3VnaG5lc3NNYXAnLCBtZXRhbGxpY1JvdWdobmVzcy5tZXRhbGxpY1JvdWdobmVzc1RleHR1cmUgKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdG1hdGVyaWFsVHlwZSA9IHRoaXMuX2ludm9rZU9uZSggZnVuY3Rpb24gKCBleHQgKSB7XG5cblx0XHRcdFx0cmV0dXJuIGV4dC5nZXRNYXRlcmlhbFR5cGUgJiYgZXh0LmdldE1hdGVyaWFsVHlwZSggbWF0ZXJpYWxJbmRleCApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHRcdHBlbmRpbmcucHVzaCggUHJvbWlzZS5hbGwoIHRoaXMuX2ludm9rZUFsbCggZnVuY3Rpb24gKCBleHQgKSB7XG5cblx0XHRcdFx0cmV0dXJuIGV4dC5leHRlbmRNYXRlcmlhbFBhcmFtcyAmJiBleHQuZXh0ZW5kTWF0ZXJpYWxQYXJhbXMoIG1hdGVyaWFsSW5kZXgsIG1hdGVyaWFsUGFyYW1zICk7XG5cblx0XHRcdH0gKSApICk7XG5cblx0XHR9XG5cblx0XHRpZiAoIG1hdGVyaWFsRGVmLmRvdWJsZVNpZGVkID09PSB0cnVlICkge1xuXG5cdFx0XHRtYXRlcmlhbFBhcmFtcy5zaWRlID0gRG91YmxlU2lkZTtcblxuXHRcdH1cblxuXHRcdGNvbnN0IGFscGhhTW9kZSA9IG1hdGVyaWFsRGVmLmFscGhhTW9kZSB8fCBBTFBIQV9NT0RFUy5PUEFRVUU7XG5cblx0XHRpZiAoIGFscGhhTW9kZSA9PT0gQUxQSEFfTU9ERVMuQkxFTkQgKSB7XG5cblx0XHRcdG1hdGVyaWFsUGFyYW1zLnRyYW5zcGFyZW50ID0gdHJ1ZTtcblxuXHRcdFx0Ly8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL3RocmVlLmpzL2lzc3Vlcy8xNzcwNlxuXHRcdFx0bWF0ZXJpYWxQYXJhbXMuZGVwdGhXcml0ZSA9IGZhbHNlO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0bWF0ZXJpYWxQYXJhbXMudHJhbnNwYXJlbnQgPSBmYWxzZTtcblxuXHRcdFx0aWYgKCBhbHBoYU1vZGUgPT09IEFMUEhBX01PREVTLk1BU0sgKSB7XG5cblx0XHRcdFx0bWF0ZXJpYWxQYXJhbXMuYWxwaGFUZXN0ID0gbWF0ZXJpYWxEZWYuYWxwaGFDdXRvZmYgIT09IHVuZGVmaW5lZCA/IG1hdGVyaWFsRGVmLmFscGhhQ3V0b2ZmIDogMC41O1xuXG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRpZiAoIG1hdGVyaWFsRGVmLm5vcm1hbFRleHR1cmUgIT09IHVuZGVmaW5lZCAmJiBtYXRlcmlhbFR5cGUgIT09IE1lc2hCYXNpY01hdGVyaWFsICkge1xuXG5cdFx0XHRwZW5kaW5nLnB1c2goIHBhcnNlci5hc3NpZ25UZXh0dXJlKCBtYXRlcmlhbFBhcmFtcywgJ25vcm1hbE1hcCcsIG1hdGVyaWFsRGVmLm5vcm1hbFRleHR1cmUgKSApO1xuXG5cdFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL3RocmVlLmpzL2lzc3Vlcy8xMTQzOCNpc3N1ZWNvbW1lbnQtNTA3MDAzOTk1XG5cdFx0XHRtYXRlcmlhbFBhcmFtcy5ub3JtYWxTY2FsZSA9IG5ldyBWZWN0b3IyKCAxLCAtIDEgKTtcblxuXHRcdFx0aWYgKCBtYXRlcmlhbERlZi5ub3JtYWxUZXh0dXJlLnNjYWxlICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0bWF0ZXJpYWxQYXJhbXMubm9ybWFsU2NhbGUuc2V0KCBtYXRlcmlhbERlZi5ub3JtYWxUZXh0dXJlLnNjYWxlLCAtIG1hdGVyaWFsRGVmLm5vcm1hbFRleHR1cmUuc2NhbGUgKTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0aWYgKCBtYXRlcmlhbERlZi5vY2NsdXNpb25UZXh0dXJlICE9PSB1bmRlZmluZWQgJiYgbWF0ZXJpYWxUeXBlICE9PSBNZXNoQmFzaWNNYXRlcmlhbCApIHtcblxuXHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdhb01hcCcsIG1hdGVyaWFsRGVmLm9jY2x1c2lvblRleHR1cmUgKSApO1xuXG5cdFx0XHRpZiAoIG1hdGVyaWFsRGVmLm9jY2x1c2lvblRleHR1cmUuc3RyZW5ndGggIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRtYXRlcmlhbFBhcmFtcy5hb01hcEludGVuc2l0eSA9IG1hdGVyaWFsRGVmLm9jY2x1c2lvblRleHR1cmUuc3RyZW5ndGg7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGlmICggbWF0ZXJpYWxEZWYuZW1pc3NpdmVGYWN0b3IgIT09IHVuZGVmaW5lZCAmJiBtYXRlcmlhbFR5cGUgIT09IE1lc2hCYXNpY01hdGVyaWFsICkge1xuXG5cdFx0XHRtYXRlcmlhbFBhcmFtcy5lbWlzc2l2ZSA9IG5ldyBDb2xvcigpLmZyb21BcnJheSggbWF0ZXJpYWxEZWYuZW1pc3NpdmVGYWN0b3IgKTtcblxuXHRcdH1cblxuXHRcdGlmICggbWF0ZXJpYWxEZWYuZW1pc3NpdmVUZXh0dXJlICE9PSB1bmRlZmluZWQgJiYgbWF0ZXJpYWxUeXBlICE9PSBNZXNoQmFzaWNNYXRlcmlhbCApIHtcblxuXHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuYXNzaWduVGV4dHVyZSggbWF0ZXJpYWxQYXJhbXMsICdlbWlzc2l2ZU1hcCcsIG1hdGVyaWFsRGVmLmVtaXNzaXZlVGV4dHVyZSApICk7XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoIHBlbmRpbmcgKS50aGVuKCBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdGxldCBtYXRlcmlhbDtcblxuXHRcdFx0aWYgKCBtYXRlcmlhbFR5cGUgPT09IEdMVEZNZXNoU3RhbmRhcmRTR01hdGVyaWFsICkge1xuXG5cdFx0XHRcdG1hdGVyaWFsID0gZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfTUFURVJJQUxTX1BCUl9TUEVDVUxBUl9HTE9TU0lORVNTIF0uY3JlYXRlTWF0ZXJpYWwoIG1hdGVyaWFsUGFyYW1zICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0bWF0ZXJpYWwgPSBuZXcgbWF0ZXJpYWxUeXBlKCBtYXRlcmlhbFBhcmFtcyApO1xuXG5cdFx0XHR9XG5cblx0XHRcdGlmICggbWF0ZXJpYWxEZWYubmFtZSApIG1hdGVyaWFsLm5hbWUgPSBtYXRlcmlhbERlZi5uYW1lO1xuXG5cdFx0XHQvLyBiYXNlQ29sb3JUZXh0dXJlLCBlbWlzc2l2ZVRleHR1cmUsIGFuZCBzcGVjdWxhckdsb3NzaW5lc3NUZXh0dXJlIHVzZSBzUkdCIGVuY29kaW5nLlxuXHRcdFx0aWYgKCBtYXRlcmlhbC5tYXAgKSBtYXRlcmlhbC5tYXAuZW5jb2RpbmcgPSBzUkdCRW5jb2Rpbmc7XG5cdFx0XHRpZiAoIG1hdGVyaWFsLmVtaXNzaXZlTWFwICkgbWF0ZXJpYWwuZW1pc3NpdmVNYXAuZW5jb2RpbmcgPSBzUkdCRW5jb2Rpbmc7XG5cblx0XHRcdGFzc2lnbkV4dHJhc1RvVXNlckRhdGEoIG1hdGVyaWFsLCBtYXRlcmlhbERlZiApO1xuXG5cdFx0XHRwYXJzZXIuYXNzb2NpYXRpb25zLnNldCggbWF0ZXJpYWwsIHsgdHlwZTogJ21hdGVyaWFscycsIGluZGV4OiBtYXRlcmlhbEluZGV4IH0gKTtcblxuXHRcdFx0aWYgKCBtYXRlcmlhbERlZi5leHRlbnNpb25zICkgYWRkVW5rbm93bkV4dGVuc2lvbnNUb1VzZXJEYXRhKCBleHRlbnNpb25zLCBtYXRlcmlhbCwgbWF0ZXJpYWxEZWYgKTtcblxuXHRcdFx0cmV0dXJuIG1hdGVyaWFsO1xuXG5cdFx0fSApO1xuXG5cdH1cblxuXHQvKiogV2hlbiBPYmplY3QzRCBpbnN0YW5jZXMgYXJlIHRhcmdldGVkIGJ5IGFuaW1hdGlvbiwgdGhleSBuZWVkIHVuaXF1ZSBuYW1lcy4gKi9cblx0Y3JlYXRlVW5pcXVlTmFtZSggb3JpZ2luYWxOYW1lICkge1xuXG5cdFx0Y29uc3Qgc2FuaXRpemVkTmFtZSA9IFByb3BlcnR5QmluZGluZy5zYW5pdGl6ZU5vZGVOYW1lKCBvcmlnaW5hbE5hbWUgfHwgJycgKTtcblxuXHRcdGxldCBuYW1lID0gc2FuaXRpemVkTmFtZTtcblxuXHRcdGZvciAoIGxldCBpID0gMTsgdGhpcy5ub2RlTmFtZXNVc2VkWyBuYW1lIF07ICsrIGkgKSB7XG5cblx0XHRcdG5hbWUgPSBzYW5pdGl6ZWROYW1lICsgJ18nICsgaTtcblxuXHRcdH1cblxuXHRcdHRoaXMubm9kZU5hbWVzVXNlZFsgbmFtZSBdID0gdHJ1ZTtcblxuXHRcdHJldHVybiBuYW1lO1xuXG5cdH1cblxuXHQvKipcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wL1JFQURNRS5tZCNnZW9tZXRyeVxuXHQgKlxuXHQgKiBDcmVhdGVzIEJ1ZmZlckdlb21ldHJpZXMgZnJvbSBwcmltaXRpdmVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5PEdMVEYuUHJpbWl0aXZlPn0gcHJpbWl0aXZlc1xuXHQgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5PEJ1ZmZlckdlb21ldHJ5Pj59XG5cdCAqL1xuXHRsb2FkR2VvbWV0cmllcyggcHJpbWl0aXZlcyApIHtcblxuXHRcdGNvbnN0IHBhcnNlciA9IHRoaXM7XG5cdFx0Y29uc3QgZXh0ZW5zaW9ucyA9IHRoaXMuZXh0ZW5zaW9ucztcblx0XHRjb25zdCBjYWNoZSA9IHRoaXMucHJpbWl0aXZlQ2FjaGU7XG5cblx0XHRmdW5jdGlvbiBjcmVhdGVEcmFjb1ByaW1pdGl2ZSggcHJpbWl0aXZlICkge1xuXG5cdFx0XHRyZXR1cm4gZXh0ZW5zaW9uc1sgRVhURU5TSU9OUy5LSFJfRFJBQ09fTUVTSF9DT01QUkVTU0lPTiBdXG5cdFx0XHRcdC5kZWNvZGVQcmltaXRpdmUoIHByaW1pdGl2ZSwgcGFyc2VyIClcblx0XHRcdFx0LnRoZW4oIGZ1bmN0aW9uICggZ2VvbWV0cnkgKSB7XG5cblx0XHRcdFx0XHRyZXR1cm4gYWRkUHJpbWl0aXZlQXR0cmlidXRlcyggZ2VvbWV0cnksIHByaW1pdGl2ZSwgcGFyc2VyICk7XG5cblx0XHRcdFx0fSApO1xuXG5cdFx0fVxuXG5cdFx0Y29uc3QgcGVuZGluZyA9IFtdO1xuXG5cdFx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IHByaW1pdGl2ZXMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRcdGNvbnN0IHByaW1pdGl2ZSA9IHByaW1pdGl2ZXNbIGkgXTtcblx0XHRcdGNvbnN0IGNhY2hlS2V5ID0gY3JlYXRlUHJpbWl0aXZlS2V5KCBwcmltaXRpdmUgKTtcblxuXHRcdFx0Ly8gU2VlIGlmIHdlJ3ZlIGFscmVhZHkgY3JlYXRlZCB0aGlzIGdlb21ldHJ5XG5cdFx0XHRjb25zdCBjYWNoZWQgPSBjYWNoZVsgY2FjaGVLZXkgXTtcblxuXHRcdFx0aWYgKCBjYWNoZWQgKSB7XG5cblx0XHRcdFx0Ly8gVXNlIHRoZSBjYWNoZWQgZ2VvbWV0cnkgaWYgaXQgZXhpc3RzXG5cdFx0XHRcdHBlbmRpbmcucHVzaCggY2FjaGVkLnByb21pc2UgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRsZXQgZ2VvbWV0cnlQcm9taXNlO1xuXG5cdFx0XHRcdGlmICggcHJpbWl0aXZlLmV4dGVuc2lvbnMgJiYgcHJpbWl0aXZlLmV4dGVuc2lvbnNbIEVYVEVOU0lPTlMuS0hSX0RSQUNPX01FU0hfQ09NUFJFU1NJT04gXSApIHtcblxuXHRcdFx0XHRcdC8vIFVzZSBEUkFDTyBnZW9tZXRyeSBpZiBhdmFpbGFibGVcblx0XHRcdFx0XHRnZW9tZXRyeVByb21pc2UgPSBjcmVhdGVEcmFjb1ByaW1pdGl2ZSggcHJpbWl0aXZlICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSBjcmVhdGUgYSBuZXcgZ2VvbWV0cnlcblx0XHRcdFx0XHRnZW9tZXRyeVByb21pc2UgPSBhZGRQcmltaXRpdmVBdHRyaWJ1dGVzKCBuZXcgQnVmZmVyR2VvbWV0cnkoKSwgcHJpbWl0aXZlLCBwYXJzZXIgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQ2FjaGUgdGhpcyBnZW9tZXRyeVxuXHRcdFx0XHRjYWNoZVsgY2FjaGVLZXkgXSA9IHsgcHJpbWl0aXZlOiBwcmltaXRpdmUsIHByb21pc2U6IGdlb21ldHJ5UHJvbWlzZSB9O1xuXG5cdFx0XHRcdHBlbmRpbmcucHVzaCggZ2VvbWV0cnlQcm9taXNlICk7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdHJldHVybiBQcm9taXNlLmFsbCggcGVuZGluZyApO1xuXG5cdH1cblxuXHQvKipcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wL1JFQURNRS5tZCNtZXNoZXNcblx0ICogQHBhcmFtIHtudW1iZXJ9IG1lc2hJbmRleFxuXHQgKiBAcmV0dXJuIHtQcm9taXNlPEdyb3VwfE1lc2h8U2tpbm5lZE1lc2g+fVxuXHQgKi9cblx0bG9hZE1lc2goIG1lc2hJbmRleCApIHtcblxuXHRcdGNvbnN0IHBhcnNlciA9IHRoaXM7XG5cdFx0Y29uc3QganNvbiA9IHRoaXMuanNvbjtcblx0XHRjb25zdCBleHRlbnNpb25zID0gdGhpcy5leHRlbnNpb25zO1xuXG5cdFx0Y29uc3QgbWVzaERlZiA9IGpzb24ubWVzaGVzWyBtZXNoSW5kZXggXTtcblx0XHRjb25zdCBwcmltaXRpdmVzID0gbWVzaERlZi5wcmltaXRpdmVzO1xuXG5cdFx0Y29uc3QgcGVuZGluZyA9IFtdO1xuXG5cdFx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IHByaW1pdGl2ZXMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRcdGNvbnN0IG1hdGVyaWFsID0gcHJpbWl0aXZlc1sgaSBdLm1hdGVyaWFsID09PSB1bmRlZmluZWRcblx0XHRcdFx0PyBjcmVhdGVEZWZhdWx0TWF0ZXJpYWwoIHRoaXMuY2FjaGUgKVxuXHRcdFx0XHQ6IHRoaXMuZ2V0RGVwZW5kZW5jeSggJ21hdGVyaWFsJywgcHJpbWl0aXZlc1sgaSBdLm1hdGVyaWFsICk7XG5cblx0XHRcdHBlbmRpbmcucHVzaCggbWF0ZXJpYWwgKTtcblxuXHRcdH1cblxuXHRcdHBlbmRpbmcucHVzaCggcGFyc2VyLmxvYWRHZW9tZXRyaWVzKCBwcmltaXRpdmVzICkgKTtcblxuXHRcdHJldHVybiBQcm9taXNlLmFsbCggcGVuZGluZyApLnRoZW4oIGZ1bmN0aW9uICggcmVzdWx0cyApIHtcblxuXHRcdFx0Y29uc3QgbWF0ZXJpYWxzID0gcmVzdWx0cy5zbGljZSggMCwgcmVzdWx0cy5sZW5ndGggLSAxICk7XG5cdFx0XHRjb25zdCBnZW9tZXRyaWVzID0gcmVzdWx0c1sgcmVzdWx0cy5sZW5ndGggLSAxIF07XG5cblx0XHRcdGNvbnN0IG1lc2hlcyA9IFtdO1xuXG5cdFx0XHRmb3IgKCBsZXQgaSA9IDAsIGlsID0gZ2VvbWV0cmllcy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0XHRjb25zdCBnZW9tZXRyeSA9IGdlb21ldHJpZXNbIGkgXTtcblx0XHRcdFx0Y29uc3QgcHJpbWl0aXZlID0gcHJpbWl0aXZlc1sgaSBdO1xuXG5cdFx0XHRcdC8vIDEuIGNyZWF0ZSBNZXNoXG5cblx0XHRcdFx0bGV0IG1lc2g7XG5cblx0XHRcdFx0Y29uc3QgbWF0ZXJpYWwgPSBtYXRlcmlhbHNbIGkgXTtcblxuXHRcdFx0XHRpZiAoIHByaW1pdGl2ZS5tb2RlID09PSBXRUJHTF9DT05TVEFOVFMuVFJJQU5HTEVTIHx8XG5cdFx0XHRcdFx0XHRwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLlRSSUFOR0xFX1NUUklQIHx8XG5cdFx0XHRcdFx0XHRwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLlRSSUFOR0xFX0ZBTiB8fFxuXHRcdFx0XHRcdFx0cHJpbWl0aXZlLm1vZGUgPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdC8vIC5pc1NraW5uZWRNZXNoIGlzbid0IGluIGdsVEYgc3BlYy4gU2VlIC5fbWFya0RlZnMoKVxuXHRcdFx0XHRcdG1lc2ggPSBtZXNoRGVmLmlzU2tpbm5lZE1lc2ggPT09IHRydWVcblx0XHRcdFx0XHRcdD8gbmV3IFNraW5uZWRNZXNoKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKVxuXHRcdFx0XHRcdFx0OiBuZXcgTWVzaCggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG5cblx0XHRcdFx0XHRpZiAoIG1lc2guaXNTa2lubmVkTWVzaCA9PT0gdHJ1ZSAmJiAhIG1lc2guZ2VvbWV0cnkuYXR0cmlidXRlcy5za2luV2VpZ2h0Lm5vcm1hbGl6ZWQgKSB7XG5cblx0XHRcdFx0XHRcdC8vIHdlIG5vcm1hbGl6ZSBmbG9hdGluZyBwb2ludCBza2luIHdlaWdodCBhcnJheSB0byBmaXggbWFsZm9ybWVkIGFzc2V0cyAoc2VlICMxNTMxOSlcblx0XHRcdFx0XHRcdC8vIGl0J3MgaW1wb3J0YW50IHRvIHNraXAgdGhpcyBmb3Igbm9uLWZsb2F0MzIgZGF0YSBzaW5jZSBub3JtYWxpemVTa2luV2VpZ2h0cyBhc3N1bWVzIG5vbi1ub3JtYWxpemVkIGlucHV0c1xuXHRcdFx0XHRcdFx0bWVzaC5ub3JtYWxpemVTa2luV2VpZ2h0cygpO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCBwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLlRSSUFOR0xFX1NUUklQICkge1xuXG5cdFx0XHRcdFx0XHRtZXNoLmdlb21ldHJ5ID0gdG9UcmlhbmdsZXNEcmF3TW9kZSggbWVzaC5nZW9tZXRyeSwgVHJpYW5nbGVTdHJpcERyYXdNb2RlICk7XG5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKCBwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLlRSSUFOR0xFX0ZBTiApIHtcblxuXHRcdFx0XHRcdFx0bWVzaC5nZW9tZXRyeSA9IHRvVHJpYW5nbGVzRHJhd01vZGUoIG1lc2guZ2VvbWV0cnksIFRyaWFuZ2xlRmFuRHJhd01vZGUgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9IGVsc2UgaWYgKCBwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLkxJTkVTICkge1xuXG5cdFx0XHRcdFx0bWVzaCA9IG5ldyBMaW5lU2VnbWVudHMoIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xuXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHByaW1pdGl2ZS5tb2RlID09PSBXRUJHTF9DT05TVEFOVFMuTElORV9TVFJJUCApIHtcblxuXHRcdFx0XHRcdG1lc2ggPSBuZXcgTGluZSggZ2VvbWV0cnksIG1hdGVyaWFsICk7XG5cblx0XHRcdFx0fSBlbHNlIGlmICggcHJpbWl0aXZlLm1vZGUgPT09IFdFQkdMX0NPTlNUQU5UUy5MSU5FX0xPT1AgKSB7XG5cblx0XHRcdFx0XHRtZXNoID0gbmV3IExpbmVMb29wKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKTtcblxuXHRcdFx0XHR9IGVsc2UgaWYgKCBwcmltaXRpdmUubW9kZSA9PT0gV0VCR0xfQ09OU1RBTlRTLlBPSU5UUyApIHtcblxuXHRcdFx0XHRcdG1lc2ggPSBuZXcgUG9pbnRzKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCAnVEhSRUUuR0xURkxvYWRlcjogUHJpbWl0aXZlIG1vZGUgdW5zdXBwb3J0ZWQ6ICcgKyBwcmltaXRpdmUubW9kZSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIE9iamVjdC5rZXlzKCBtZXNoLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcyApLmxlbmd0aCA+IDAgKSB7XG5cblx0XHRcdFx0XHR1cGRhdGVNb3JwaFRhcmdldHMoIG1lc2gsIG1lc2hEZWYgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0bWVzaC5uYW1lID0gcGFyc2VyLmNyZWF0ZVVuaXF1ZU5hbWUoIG1lc2hEZWYubmFtZSB8fCAoICdtZXNoXycgKyBtZXNoSW5kZXggKSApO1xuXG5cdFx0XHRcdGFzc2lnbkV4dHJhc1RvVXNlckRhdGEoIG1lc2gsIG1lc2hEZWYgKTtcblxuXHRcdFx0XHRpZiAoIHByaW1pdGl2ZS5leHRlbnNpb25zICkgYWRkVW5rbm93bkV4dGVuc2lvbnNUb1VzZXJEYXRhKCBleHRlbnNpb25zLCBtZXNoLCBwcmltaXRpdmUgKTtcblxuXHRcdFx0XHRwYXJzZXIuYXNzaWduRmluYWxNYXRlcmlhbCggbWVzaCApO1xuXG5cdFx0XHRcdG1lc2hlcy5wdXNoKCBtZXNoICk7XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBtZXNoZXMubGVuZ3RoID09PSAxICkge1xuXG5cdFx0XHRcdHJldHVybiBtZXNoZXNbIDAgXTtcblxuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBncm91cCA9IG5ldyBHcm91cCgpO1xuXG5cdFx0XHRmb3IgKCBsZXQgaSA9IDAsIGlsID0gbWVzaGVzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0XHRcdGdyb3VwLmFkZCggbWVzaGVzWyBpIF0gKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZ3JvdXA7XG5cblx0XHR9ICk7XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAjY2FtZXJhc1xuXHQgKiBAcGFyYW0ge251bWJlcn0gY2FtZXJhSW5kZXhcblx0ICogQHJldHVybiB7UHJvbWlzZTxUSFJFRS5DYW1lcmE+fVxuXHQgKi9cblx0bG9hZENhbWVyYSggY2FtZXJhSW5kZXggKSB7XG5cblx0XHRsZXQgY2FtZXJhO1xuXHRcdGNvbnN0IGNhbWVyYURlZiA9IHRoaXMuanNvbi5jYW1lcmFzWyBjYW1lcmFJbmRleCBdO1xuXHRcdGNvbnN0IHBhcmFtcyA9IGNhbWVyYURlZlsgY2FtZXJhRGVmLnR5cGUgXTtcblxuXHRcdGlmICggISBwYXJhbXMgKSB7XG5cblx0XHRcdGNvbnNvbGUud2FybiggJ1RIUkVFLkdMVEZMb2FkZXI6IE1pc3NpbmcgY2FtZXJhIHBhcmFtZXRlcnMuJyApO1xuXHRcdFx0cmV0dXJuO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBjYW1lcmFEZWYudHlwZSA9PT0gJ3BlcnNwZWN0aXZlJyApIHtcblxuXHRcdFx0Y2FtZXJhID0gbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKCBNYXRoVXRpbHMucmFkVG9EZWcoIHBhcmFtcy55Zm92ICksIHBhcmFtcy5hc3BlY3RSYXRpbyB8fCAxLCBwYXJhbXMuem5lYXIgfHwgMSwgcGFyYW1zLnpmYXIgfHwgMmU2ICk7XG5cblx0XHR9IGVsc2UgaWYgKCBjYW1lcmFEZWYudHlwZSA9PT0gJ29ydGhvZ3JhcGhpYycgKSB7XG5cblx0XHRcdGNhbWVyYSA9IG5ldyBPcnRob2dyYXBoaWNDYW1lcmEoIC0gcGFyYW1zLnhtYWcsIHBhcmFtcy54bWFnLCBwYXJhbXMueW1hZywgLSBwYXJhbXMueW1hZywgcGFyYW1zLnpuZWFyLCBwYXJhbXMuemZhciApO1xuXG5cdFx0fVxuXG5cdFx0aWYgKCBjYW1lcmFEZWYubmFtZSApIGNhbWVyYS5uYW1lID0gdGhpcy5jcmVhdGVVbmlxdWVOYW1lKCBjYW1lcmFEZWYubmFtZSApO1xuXG5cdFx0YXNzaWduRXh0cmFzVG9Vc2VyRGF0YSggY2FtZXJhLCBjYW1lcmFEZWYgKTtcblxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoIGNhbWVyYSApO1xuXG5cdH1cblxuXHQvKipcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wI3NraW5zXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBza2luSW5kZXhcblx0ICogQHJldHVybiB7UHJvbWlzZTxPYmplY3Q+fVxuXHQgKi9cblx0bG9hZFNraW4oIHNraW5JbmRleCApIHtcblxuXHRcdGNvbnN0IHNraW5EZWYgPSB0aGlzLmpzb24uc2tpbnNbIHNraW5JbmRleCBdO1xuXG5cdFx0Y29uc3Qgc2tpbkVudHJ5ID0geyBqb2ludHM6IHNraW5EZWYuam9pbnRzIH07XG5cblx0XHRpZiAoIHNraW5EZWYuaW52ZXJzZUJpbmRNYXRyaWNlcyA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCBza2luRW50cnkgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmdldERlcGVuZGVuY3koICdhY2Nlc3NvcicsIHNraW5EZWYuaW52ZXJzZUJpbmRNYXRyaWNlcyApLnRoZW4oIGZ1bmN0aW9uICggYWNjZXNzb3IgKSB7XG5cblx0XHRcdHNraW5FbnRyeS5pbnZlcnNlQmluZE1hdHJpY2VzID0gYWNjZXNzb3I7XG5cblx0XHRcdHJldHVybiBza2luRW50cnk7XG5cblx0XHR9ICk7XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAjYW5pbWF0aW9uc1xuXHQgKiBAcGFyYW0ge251bWJlcn0gYW5pbWF0aW9uSW5kZXhcblx0ICogQHJldHVybiB7UHJvbWlzZTxBbmltYXRpb25DbGlwPn1cblx0ICovXG5cdGxvYWRBbmltYXRpb24oIGFuaW1hdGlvbkluZGV4ICkge1xuXG5cdFx0Y29uc3QganNvbiA9IHRoaXMuanNvbjtcblxuXHRcdGNvbnN0IGFuaW1hdGlvbkRlZiA9IGpzb24uYW5pbWF0aW9uc1sgYW5pbWF0aW9uSW5kZXggXTtcblxuXHRcdGNvbnN0IHBlbmRpbmdOb2RlcyA9IFtdO1xuXHRcdGNvbnN0IHBlbmRpbmdJbnB1dEFjY2Vzc29ycyA9IFtdO1xuXHRcdGNvbnN0IHBlbmRpbmdPdXRwdXRBY2Nlc3NvcnMgPSBbXTtcblx0XHRjb25zdCBwZW5kaW5nU2FtcGxlcnMgPSBbXTtcblx0XHRjb25zdCBwZW5kaW5nVGFyZ2V0cyA9IFtdO1xuXG5cdFx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IGFuaW1hdGlvbkRlZi5jaGFubmVscy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0Y29uc3QgY2hhbm5lbCA9IGFuaW1hdGlvbkRlZi5jaGFubmVsc1sgaSBdO1xuXHRcdFx0Y29uc3Qgc2FtcGxlciA9IGFuaW1hdGlvbkRlZi5zYW1wbGVyc1sgY2hhbm5lbC5zYW1wbGVyIF07XG5cdFx0XHRjb25zdCB0YXJnZXQgPSBjaGFubmVsLnRhcmdldDtcblx0XHRcdGNvbnN0IG5hbWUgPSB0YXJnZXQubm9kZSAhPT0gdW5kZWZpbmVkID8gdGFyZ2V0Lm5vZGUgOiB0YXJnZXQuaWQ7IC8vIE5PVEU6IHRhcmdldC5pZCBpcyBkZXByZWNhdGVkLlxuXHRcdFx0Y29uc3QgaW5wdXQgPSBhbmltYXRpb25EZWYucGFyYW1ldGVycyAhPT0gdW5kZWZpbmVkID8gYW5pbWF0aW9uRGVmLnBhcmFtZXRlcnNbIHNhbXBsZXIuaW5wdXQgXSA6IHNhbXBsZXIuaW5wdXQ7XG5cdFx0XHRjb25zdCBvdXRwdXQgPSBhbmltYXRpb25EZWYucGFyYW1ldGVycyAhPT0gdW5kZWZpbmVkID8gYW5pbWF0aW9uRGVmLnBhcmFtZXRlcnNbIHNhbXBsZXIub3V0cHV0IF0gOiBzYW1wbGVyLm91dHB1dDtcblxuXHRcdFx0cGVuZGluZ05vZGVzLnB1c2goIHRoaXMuZ2V0RGVwZW5kZW5jeSggJ25vZGUnLCBuYW1lICkgKTtcblx0XHRcdHBlbmRpbmdJbnB1dEFjY2Vzc29ycy5wdXNoKCB0aGlzLmdldERlcGVuZGVuY3koICdhY2Nlc3NvcicsIGlucHV0ICkgKTtcblx0XHRcdHBlbmRpbmdPdXRwdXRBY2Nlc3NvcnMucHVzaCggdGhpcy5nZXREZXBlbmRlbmN5KCAnYWNjZXNzb3InLCBvdXRwdXQgKSApO1xuXHRcdFx0cGVuZGluZ1NhbXBsZXJzLnB1c2goIHNhbXBsZXIgKTtcblx0XHRcdHBlbmRpbmdUYXJnZXRzLnB1c2goIHRhcmdldCApO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKCBbXG5cblx0XHRcdFByb21pc2UuYWxsKCBwZW5kaW5nTm9kZXMgKSxcblx0XHRcdFByb21pc2UuYWxsKCBwZW5kaW5nSW5wdXRBY2Nlc3NvcnMgKSxcblx0XHRcdFByb21pc2UuYWxsKCBwZW5kaW5nT3V0cHV0QWNjZXNzb3JzICksXG5cdFx0XHRQcm9taXNlLmFsbCggcGVuZGluZ1NhbXBsZXJzICksXG5cdFx0XHRQcm9taXNlLmFsbCggcGVuZGluZ1RhcmdldHMgKVxuXG5cdFx0XSApLnRoZW4oIGZ1bmN0aW9uICggZGVwZW5kZW5jaWVzICkge1xuXG5cdFx0XHRjb25zdCBub2RlcyA9IGRlcGVuZGVuY2llc1sgMCBdO1xuXHRcdFx0Y29uc3QgaW5wdXRBY2Nlc3NvcnMgPSBkZXBlbmRlbmNpZXNbIDEgXTtcblx0XHRcdGNvbnN0IG91dHB1dEFjY2Vzc29ycyA9IGRlcGVuZGVuY2llc1sgMiBdO1xuXHRcdFx0Y29uc3Qgc2FtcGxlcnMgPSBkZXBlbmRlbmNpZXNbIDMgXTtcblx0XHRcdGNvbnN0IHRhcmdldHMgPSBkZXBlbmRlbmNpZXNbIDQgXTtcblxuXHRcdFx0Y29uc3QgdHJhY2tzID0gW107XG5cblx0XHRcdGZvciAoIGxldCBpID0gMCwgaWwgPSBub2Rlcy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0XHRjb25zdCBub2RlID0gbm9kZXNbIGkgXTtcblx0XHRcdFx0Y29uc3QgaW5wdXRBY2Nlc3NvciA9IGlucHV0QWNjZXNzb3JzWyBpIF07XG5cdFx0XHRcdGNvbnN0IG91dHB1dEFjY2Vzc29yID0gb3V0cHV0QWNjZXNzb3JzWyBpIF07XG5cdFx0XHRcdGNvbnN0IHNhbXBsZXIgPSBzYW1wbGVyc1sgaSBdO1xuXHRcdFx0XHRjb25zdCB0YXJnZXQgPSB0YXJnZXRzWyBpIF07XG5cblx0XHRcdFx0aWYgKCBub2RlID09PSB1bmRlZmluZWQgKSBjb250aW51ZTtcblxuXHRcdFx0XHRub2RlLnVwZGF0ZU1hdHJpeCgpO1xuXHRcdFx0XHRub2RlLm1hdHJpeEF1dG9VcGRhdGUgPSB0cnVlO1xuXG5cdFx0XHRcdGxldCBUeXBlZEtleWZyYW1lVHJhY2s7XG5cblx0XHRcdFx0c3dpdGNoICggUEFUSF9QUk9QRVJUSUVTWyB0YXJnZXQucGF0aCBdICkge1xuXG5cdFx0XHRcdFx0Y2FzZSBQQVRIX1BST1BFUlRJRVMud2VpZ2h0czpcblxuXHRcdFx0XHRcdFx0VHlwZWRLZXlmcmFtZVRyYWNrID0gTnVtYmVyS2V5ZnJhbWVUcmFjaztcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSBQQVRIX1BST1BFUlRJRVMucm90YXRpb246XG5cblx0XHRcdFx0XHRcdFR5cGVkS2V5ZnJhbWVUcmFjayA9IFF1YXRlcm5pb25LZXlmcmFtZVRyYWNrO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlIFBBVEhfUFJPUEVSVElFUy5wb3NpdGlvbjpcblx0XHRcdFx0XHRjYXNlIFBBVEhfUFJPUEVSVElFUy5zY2FsZTpcblx0XHRcdFx0XHRkZWZhdWx0OlxuXG5cdFx0XHRcdFx0XHRUeXBlZEtleWZyYW1lVHJhY2sgPSBWZWN0b3JLZXlmcmFtZVRyYWNrO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IHRhcmdldE5hbWUgPSBub2RlLm5hbWUgPyBub2RlLm5hbWUgOiBub2RlLnV1aWQ7XG5cblx0XHRcdFx0Y29uc3QgaW50ZXJwb2xhdGlvbiA9IHNhbXBsZXIuaW50ZXJwb2xhdGlvbiAhPT0gdW5kZWZpbmVkID8gSU5URVJQT0xBVElPTlsgc2FtcGxlci5pbnRlcnBvbGF0aW9uIF0gOiBJbnRlcnBvbGF0ZUxpbmVhcjtcblxuXHRcdFx0XHRjb25zdCB0YXJnZXROYW1lcyA9IFtdO1xuXG5cdFx0XHRcdGlmICggUEFUSF9QUk9QRVJUSUVTWyB0YXJnZXQucGF0aCBdID09PSBQQVRIX1BST1BFUlRJRVMud2VpZ2h0cyApIHtcblxuXHRcdFx0XHRcdC8vIE5vZGUgbWF5IGJlIGEgR3JvdXAgKGdsVEYgbWVzaCB3aXRoIHNldmVyYWwgcHJpbWl0aXZlcykgb3IgYSBNZXNoLlxuXHRcdFx0XHRcdG5vZGUudHJhdmVyc2UoIGZ1bmN0aW9uICggb2JqZWN0ICkge1xuXG5cdFx0XHRcdFx0XHRpZiAoIG9iamVjdC5pc01lc2ggPT09IHRydWUgJiYgb2JqZWN0Lm1vcnBoVGFyZ2V0SW5mbHVlbmNlcyApIHtcblxuXHRcdFx0XHRcdFx0XHR0YXJnZXROYW1lcy5wdXNoKCBvYmplY3QubmFtZSA/IG9iamVjdC5uYW1lIDogb2JqZWN0LnV1aWQgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHR0YXJnZXROYW1lcy5wdXNoKCB0YXJnZXROYW1lICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGxldCBvdXRwdXRBcnJheSA9IG91dHB1dEFjY2Vzc29yLmFycmF5O1xuXG5cdFx0XHRcdGlmICggb3V0cHV0QWNjZXNzb3Iubm9ybWFsaXplZCApIHtcblxuXHRcdFx0XHRcdGNvbnN0IHNjYWxlID0gZ2V0Tm9ybWFsaXplZENvbXBvbmVudFNjYWxlKCBvdXRwdXRBcnJheS5jb25zdHJ1Y3RvciApO1xuXHRcdFx0XHRcdGNvbnN0IHNjYWxlZCA9IG5ldyBGbG9hdDMyQXJyYXkoIG91dHB1dEFycmF5Lmxlbmd0aCApO1xuXG5cdFx0XHRcdFx0Zm9yICggbGV0IGogPSAwLCBqbCA9IG91dHB1dEFycmF5Lmxlbmd0aDsgaiA8IGpsOyBqICsrICkge1xuXG5cdFx0XHRcdFx0XHRzY2FsZWRbIGogXSA9IG91dHB1dEFycmF5WyBqIF0gKiBzY2FsZTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdG91dHB1dEFycmF5ID0gc2NhbGVkO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmb3IgKCBsZXQgaiA9IDAsIGpsID0gdGFyZ2V0TmFtZXMubGVuZ3RoOyBqIDwgamw7IGogKysgKSB7XG5cblx0XHRcdFx0XHRjb25zdCB0cmFjayA9IG5ldyBUeXBlZEtleWZyYW1lVHJhY2soXG5cdFx0XHRcdFx0XHR0YXJnZXROYW1lc1sgaiBdICsgJy4nICsgUEFUSF9QUk9QRVJUSUVTWyB0YXJnZXQucGF0aCBdLFxuXHRcdFx0XHRcdFx0aW5wdXRBY2Nlc3Nvci5hcnJheSxcblx0XHRcdFx0XHRcdG91dHB1dEFycmF5LFxuXHRcdFx0XHRcdFx0aW50ZXJwb2xhdGlvblxuXHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHQvLyBPdmVycmlkZSBpbnRlcnBvbGF0aW9uIHdpdGggY3VzdG9tIGZhY3RvcnkgbWV0aG9kLlxuXHRcdFx0XHRcdGlmICggc2FtcGxlci5pbnRlcnBvbGF0aW9uID09PSAnQ1VCSUNTUExJTkUnICkge1xuXG5cdFx0XHRcdFx0XHR0cmFjay5jcmVhdGVJbnRlcnBvbGFudCA9IGZ1bmN0aW9uIEludGVycG9sYW50RmFjdG9yeU1ldGhvZEdMVEZDdWJpY1NwbGluZSggcmVzdWx0ICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIEEgQ1VCSUNTUExJTkUga2V5ZnJhbWUgaW4gZ2xURiBoYXMgdGhyZWUgb3V0cHV0IHZhbHVlcyBmb3IgZWFjaCBpbnB1dCB2YWx1ZSxcblx0XHRcdFx0XHRcdFx0Ly8gcmVwcmVzZW50aW5nIGluVGFuZ2VudCwgc3BsaW5lVmVydGV4LCBhbmQgb3V0VGFuZ2VudC4gQXMgYSByZXN1bHQsIHRyYWNrLmdldFZhbHVlU2l6ZSgpXG5cdFx0XHRcdFx0XHRcdC8vIG11c3QgYmUgZGl2aWRlZCBieSB0aHJlZSB0byBnZXQgdGhlIGludGVycG9sYW50J3Mgc2FtcGxlU2l6ZSBhcmd1bWVudC5cblxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gbmV3IEdMVEZDdWJpY1NwbGluZUludGVycG9sYW50KCB0aGlzLnRpbWVzLCB0aGlzLnZhbHVlcywgdGhpcy5nZXRWYWx1ZVNpemUoKSAvIDMsIHJlc3VsdCApO1xuXG5cdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHQvLyBNYXJrIGFzIENVQklDU1BMSU5FLiBgdHJhY2suZ2V0SW50ZXJwb2xhdGlvbigpYCBkb2Vzbid0IHN1cHBvcnQgY3VzdG9tIGludGVycG9sYW50cy5cblx0XHRcdFx0XHRcdHRyYWNrLmNyZWF0ZUludGVycG9sYW50LmlzSW50ZXJwb2xhbnRGYWN0b3J5TWV0aG9kR0xURkN1YmljU3BsaW5lID0gdHJ1ZTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHRyYWNrcy5wdXNoKCB0cmFjayApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBuYW1lID0gYW5pbWF0aW9uRGVmLm5hbWUgPyBhbmltYXRpb25EZWYubmFtZSA6ICdhbmltYXRpb25fJyArIGFuaW1hdGlvbkluZGV4O1xuXG5cdFx0XHRyZXR1cm4gbmV3IEFuaW1hdGlvbkNsaXAoIG5hbWUsIHVuZGVmaW5lZCwgdHJhY2tzICk7XG5cblx0XHR9ICk7XG5cblx0fVxuXG5cdGNyZWF0ZU5vZGVNZXNoKCBub2RlSW5kZXggKSB7XG5cblx0XHRjb25zdCBqc29uID0gdGhpcy5qc29uO1xuXHRcdGNvbnN0IHBhcnNlciA9IHRoaXM7XG5cdFx0Y29uc3Qgbm9kZURlZiA9IGpzb24ubm9kZXNbIG5vZGVJbmRleCBdO1xuXG5cdFx0aWYgKCBub2RlRGVmLm1lc2ggPT09IHVuZGVmaW5lZCApIHJldHVybiBudWxsO1xuXG5cdFx0cmV0dXJuIHBhcnNlci5nZXREZXBlbmRlbmN5KCAnbWVzaCcsIG5vZGVEZWYubWVzaCApLnRoZW4oIGZ1bmN0aW9uICggbWVzaCApIHtcblxuXHRcdFx0Y29uc3Qgbm9kZSA9IHBhcnNlci5fZ2V0Tm9kZVJlZiggcGFyc2VyLm1lc2hDYWNoZSwgbm9kZURlZi5tZXNoLCBtZXNoICk7XG5cblx0XHRcdC8vIGlmIHdlaWdodHMgYXJlIHByb3ZpZGVkIG9uIHRoZSBub2RlLCBvdmVycmlkZSB3ZWlnaHRzIG9uIHRoZSBtZXNoLlxuXHRcdFx0aWYgKCBub2RlRGVmLndlaWdodHMgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRub2RlLnRyYXZlcnNlKCBmdW5jdGlvbiAoIG8gKSB7XG5cblx0XHRcdFx0XHRpZiAoICEgby5pc01lc2ggKSByZXR1cm47XG5cblx0XHRcdFx0XHRmb3IgKCBsZXQgaSA9IDAsIGlsID0gbm9kZURlZi53ZWlnaHRzLmxlbmd0aDsgaSA8IGlsOyBpICsrICkge1xuXG5cdFx0XHRcdFx0XHRvLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1sgaSBdID0gbm9kZURlZi53ZWlnaHRzWyBpIF07XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBub2RlO1xuXG5cdFx0fSApO1xuXG5cdH1cblxuXHQvKipcblx0ICogU3BlY2lmaWNhdGlvbjogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL3RyZWUvbWFzdGVyL3NwZWNpZmljYXRpb24vMi4wI25vZGVzLWFuZC1oaWVyYXJjaHlcblx0ICogQHBhcmFtIHtudW1iZXJ9IG5vZGVJbmRleFxuXHQgKiBAcmV0dXJuIHtQcm9taXNlPE9iamVjdDNEPn1cblx0ICovXG5cdGxvYWROb2RlKCBub2RlSW5kZXggKSB7XG5cblx0XHRjb25zdCBqc29uID0gdGhpcy5qc29uO1xuXHRcdGNvbnN0IGV4dGVuc2lvbnMgPSB0aGlzLmV4dGVuc2lvbnM7XG5cdFx0Y29uc3QgcGFyc2VyID0gdGhpcztcblxuXHRcdGNvbnN0IG5vZGVEZWYgPSBqc29uLm5vZGVzWyBub2RlSW5kZXggXTtcblxuXHRcdC8vIHJlc2VydmUgbm9kZSdzIG5hbWUgYmVmb3JlIGl0cyBkZXBlbmRlbmNpZXMsIHNvIHRoZSByb290IGhhcyB0aGUgaW50ZW5kZWQgbmFtZS5cblx0XHRjb25zdCBub2RlTmFtZSA9IG5vZGVEZWYubmFtZSA/IHBhcnNlci5jcmVhdGVVbmlxdWVOYW1lKCBub2RlRGVmLm5hbWUgKSA6ICcnO1xuXG5cdFx0cmV0dXJuICggZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRjb25zdCBwZW5kaW5nID0gW107XG5cblx0XHRcdGNvbnN0IG1lc2hQcm9taXNlID0gcGFyc2VyLl9pbnZva2VPbmUoIGZ1bmN0aW9uICggZXh0ICkge1xuXG5cdFx0XHRcdHJldHVybiBleHQuY3JlYXRlTm9kZU1lc2ggJiYgZXh0LmNyZWF0ZU5vZGVNZXNoKCBub2RlSW5kZXggKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0XHRpZiAoIG1lc2hQcm9taXNlICkge1xuXG5cdFx0XHRcdHBlbmRpbmcucHVzaCggbWVzaFByb21pc2UgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIG5vZGVEZWYuY2FtZXJhICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0cGVuZGluZy5wdXNoKCBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ2NhbWVyYScsIG5vZGVEZWYuY2FtZXJhICkudGhlbiggZnVuY3Rpb24gKCBjYW1lcmEgKSB7XG5cblx0XHRcdFx0XHRyZXR1cm4gcGFyc2VyLl9nZXROb2RlUmVmKCBwYXJzZXIuY2FtZXJhQ2FjaGUsIG5vZGVEZWYuY2FtZXJhLCBjYW1lcmEgKTtcblxuXHRcdFx0XHR9ICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRwYXJzZXIuX2ludm9rZUFsbCggZnVuY3Rpb24gKCBleHQgKSB7XG5cblx0XHRcdFx0cmV0dXJuIGV4dC5jcmVhdGVOb2RlQXR0YWNobWVudCAmJiBleHQuY3JlYXRlTm9kZUF0dGFjaG1lbnQoIG5vZGVJbmRleCApO1xuXG5cdFx0XHR9ICkuZm9yRWFjaCggZnVuY3Rpb24gKCBwcm9taXNlICkge1xuXG5cdFx0XHRcdHBlbmRpbmcucHVzaCggcHJvbWlzZSApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHRcdHJldHVybiBQcm9taXNlLmFsbCggcGVuZGluZyApO1xuXG5cdFx0fSgpICkudGhlbiggZnVuY3Rpb24gKCBvYmplY3RzICkge1xuXG5cdFx0XHRsZXQgbm9kZTtcblxuXHRcdFx0Ly8gLmlzQm9uZSBpc24ndCBpbiBnbFRGIHNwZWMuIFNlZSAuX21hcmtEZWZzXG5cdFx0XHRpZiAoIG5vZGVEZWYuaXNCb25lID09PSB0cnVlICkge1xuXG5cdFx0XHRcdG5vZGUgPSBuZXcgQm9uZSgpO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBvYmplY3RzLmxlbmd0aCA+IDEgKSB7XG5cblx0XHRcdFx0bm9kZSA9IG5ldyBHcm91cCgpO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBvYmplY3RzLmxlbmd0aCA9PT0gMSApIHtcblxuXHRcdFx0XHRub2RlID0gb2JqZWN0c1sgMCBdO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdG5vZGUgPSBuZXcgT2JqZWN0M0QoKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIG5vZGUgIT09IG9iamVjdHNbIDAgXSApIHtcblxuXHRcdFx0XHRmb3IgKCBsZXQgaSA9IDAsIGlsID0gb2JqZWN0cy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0XHRcdG5vZGUuYWRkKCBvYmplY3RzWyBpIF0gKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBub2RlRGVmLm5hbWUgKSB7XG5cblx0XHRcdFx0bm9kZS51c2VyRGF0YS5uYW1lID0gbm9kZURlZi5uYW1lO1xuXHRcdFx0XHRub2RlLm5hbWUgPSBub2RlTmFtZTtcblxuXHRcdFx0fVxuXG5cdFx0XHRhc3NpZ25FeHRyYXNUb1VzZXJEYXRhKCBub2RlLCBub2RlRGVmICk7XG5cblx0XHRcdGlmICggbm9kZURlZi5leHRlbnNpb25zICkgYWRkVW5rbm93bkV4dGVuc2lvbnNUb1VzZXJEYXRhKCBleHRlbnNpb25zLCBub2RlLCBub2RlRGVmICk7XG5cblx0XHRcdGlmICggbm9kZURlZi5tYXRyaXggIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRjb25zdCBtYXRyaXggPSBuZXcgTWF0cml4NCgpO1xuXHRcdFx0XHRtYXRyaXguZnJvbUFycmF5KCBub2RlRGVmLm1hdHJpeCApO1xuXHRcdFx0XHRub2RlLmFwcGx5TWF0cml4NCggbWF0cml4ICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0aWYgKCBub2RlRGVmLnRyYW5zbGF0aW9uICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRub2RlLnBvc2l0aW9uLmZyb21BcnJheSggbm9kZURlZi50cmFuc2xhdGlvbiApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIG5vZGVEZWYucm90YXRpb24gIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdG5vZGUucXVhdGVybmlvbi5mcm9tQXJyYXkoIG5vZGVEZWYucm90YXRpb24gKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBub2RlRGVmLnNjYWxlICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0XHRub2RlLnNjYWxlLmZyb21BcnJheSggbm9kZURlZi5zY2FsZSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0XHRwYXJzZXIuYXNzb2NpYXRpb25zLnNldCggbm9kZSwgeyB0eXBlOiAnbm9kZXMnLCBpbmRleDogbm9kZUluZGV4IH0gKTtcblxuXHRcdFx0cmV0dXJuIG5vZGU7XG5cblx0XHR9ICk7XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBTcGVjaWZpY2F0aW9uOiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvdHJlZS9tYXN0ZXIvc3BlY2lmaWNhdGlvbi8yLjAjc2NlbmVzXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBzY2VuZUluZGV4XG5cdCAqIEByZXR1cm4ge1Byb21pc2U8R3JvdXA+fVxuXHQgKi9cblx0bG9hZFNjZW5lKCBzY2VuZUluZGV4ICkge1xuXG5cdFx0Y29uc3QganNvbiA9IHRoaXMuanNvbjtcblx0XHRjb25zdCBleHRlbnNpb25zID0gdGhpcy5leHRlbnNpb25zO1xuXHRcdGNvbnN0IHNjZW5lRGVmID0gdGhpcy5qc29uLnNjZW5lc1sgc2NlbmVJbmRleCBdO1xuXHRcdGNvbnN0IHBhcnNlciA9IHRoaXM7XG5cblx0XHQvLyBMb2FkZXIgcmV0dXJucyBHcm91cCwgbm90IFNjZW5lLlxuXHRcdC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9pc3N1ZXMvMTgzNDIjaXNzdWVjb21tZW50LTU3ODk4MTE3MlxuXHRcdGNvbnN0IHNjZW5lID0gbmV3IEdyb3VwKCk7XG5cdFx0aWYgKCBzY2VuZURlZi5uYW1lICkgc2NlbmUubmFtZSA9IHBhcnNlci5jcmVhdGVVbmlxdWVOYW1lKCBzY2VuZURlZi5uYW1lICk7XG5cblx0XHRhc3NpZ25FeHRyYXNUb1VzZXJEYXRhKCBzY2VuZSwgc2NlbmVEZWYgKTtcblxuXHRcdGlmICggc2NlbmVEZWYuZXh0ZW5zaW9ucyApIGFkZFVua25vd25FeHRlbnNpb25zVG9Vc2VyRGF0YSggZXh0ZW5zaW9ucywgc2NlbmUsIHNjZW5lRGVmICk7XG5cblx0XHRjb25zdCBub2RlSWRzID0gc2NlbmVEZWYubm9kZXMgfHwgW107XG5cblx0XHRjb25zdCBwZW5kaW5nID0gW107XG5cblx0XHRmb3IgKCBsZXQgaSA9IDAsIGlsID0gbm9kZUlkcy5sZW5ndGg7IGkgPCBpbDsgaSArKyApIHtcblxuXHRcdFx0cGVuZGluZy5wdXNoKCBidWlsZE5vZGVIaWVyYWNoeSggbm9kZUlkc1sgaSBdLCBzY2VuZSwganNvbiwgcGFyc2VyICkgKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiBQcm9taXNlLmFsbCggcGVuZGluZyApLnRoZW4oIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0cmV0dXJuIHNjZW5lO1xuXG5cdFx0fSApO1xuXG5cdH1cblxufVxuXG5mdW5jdGlvbiBidWlsZE5vZGVIaWVyYWNoeSggbm9kZUlkLCBwYXJlbnRPYmplY3QsIGpzb24sIHBhcnNlciApIHtcblxuXHRjb25zdCBub2RlRGVmID0ganNvbi5ub2Rlc1sgbm9kZUlkIF07XG5cblx0cmV0dXJuIHBhcnNlci5nZXREZXBlbmRlbmN5KCAnbm9kZScsIG5vZGVJZCApLnRoZW4oIGZ1bmN0aW9uICggbm9kZSApIHtcblxuXHRcdGlmICggbm9kZURlZi5za2luID09PSB1bmRlZmluZWQgKSByZXR1cm4gbm9kZTtcblxuXHRcdC8vIGJ1aWxkIHNrZWxldG9uIGhlcmUgYXMgd2VsbFxuXG5cdFx0bGV0IHNraW5FbnRyeTtcblxuXHRcdHJldHVybiBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ3NraW4nLCBub2RlRGVmLnNraW4gKS50aGVuKCBmdW5jdGlvbiAoIHNraW4gKSB7XG5cblx0XHRcdHNraW5FbnRyeSA9IHNraW47XG5cblx0XHRcdGNvbnN0IHBlbmRpbmdKb2ludHMgPSBbXTtcblxuXHRcdFx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IHNraW5FbnRyeS5qb2ludHMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRcdFx0cGVuZGluZ0pvaW50cy5wdXNoKCBwYXJzZXIuZ2V0RGVwZW5kZW5jeSggJ25vZGUnLCBza2luRW50cnkuam9pbnRzWyBpIF0gKSApO1xuXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBQcm9taXNlLmFsbCggcGVuZGluZ0pvaW50cyApO1xuXG5cdFx0fSApLnRoZW4oIGZ1bmN0aW9uICggam9pbnROb2RlcyApIHtcblxuXHRcdFx0bm9kZS50cmF2ZXJzZSggZnVuY3Rpb24gKCBtZXNoICkge1xuXG5cdFx0XHRcdGlmICggISBtZXNoLmlzTWVzaCApIHJldHVybjtcblxuXHRcdFx0XHRjb25zdCBib25lcyA9IFtdO1xuXHRcdFx0XHRjb25zdCBib25lSW52ZXJzZXMgPSBbXTtcblxuXHRcdFx0XHRmb3IgKCBsZXQgaiA9IDAsIGpsID0gam9pbnROb2Rlcy5sZW5ndGg7IGogPCBqbDsgaiArKyApIHtcblxuXHRcdFx0XHRcdGNvbnN0IGpvaW50Tm9kZSA9IGpvaW50Tm9kZXNbIGogXTtcblxuXHRcdFx0XHRcdGlmICggam9pbnROb2RlICkge1xuXG5cdFx0XHRcdFx0XHRib25lcy5wdXNoKCBqb2ludE5vZGUgKTtcblxuXHRcdFx0XHRcdFx0Y29uc3QgbWF0ID0gbmV3IE1hdHJpeDQoKTtcblxuXHRcdFx0XHRcdFx0aWYgKCBza2luRW50cnkuaW52ZXJzZUJpbmRNYXRyaWNlcyAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdFx0XHRcdG1hdC5mcm9tQXJyYXkoIHNraW5FbnRyeS5pbnZlcnNlQmluZE1hdHJpY2VzLmFycmF5LCBqICogMTYgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRib25lSW52ZXJzZXMucHVzaCggbWF0ICk7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5HTFRGTG9hZGVyOiBKb2ludCBcIiVzXCIgY291bGQgbm90IGJlIGZvdW5kLicsIHNraW5FbnRyeS5qb2ludHNbIGogXSApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRtZXNoLmJpbmQoIG5ldyBTa2VsZXRvbiggYm9uZXMsIGJvbmVJbnZlcnNlcyApLCBtZXNoLm1hdHJpeFdvcmxkICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdFx0cmV0dXJuIG5vZGU7XG5cblx0XHR9ICk7XG5cblx0fSApLnRoZW4oIGZ1bmN0aW9uICggbm9kZSApIHtcblxuXHRcdC8vIGJ1aWxkIG5vZGUgaGllcmFjaHlcblxuXHRcdHBhcmVudE9iamVjdC5hZGQoIG5vZGUgKTtcblxuXHRcdGNvbnN0IHBlbmRpbmcgPSBbXTtcblxuXHRcdGlmICggbm9kZURlZi5jaGlsZHJlbiApIHtcblxuXHRcdFx0Y29uc3QgY2hpbGRyZW4gPSBub2RlRGVmLmNoaWxkcmVuO1xuXG5cdFx0XHRmb3IgKCBsZXQgaSA9IDAsIGlsID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRcdFx0Y29uc3QgY2hpbGQgPSBjaGlsZHJlblsgaSBdO1xuXHRcdFx0XHRwZW5kaW5nLnB1c2goIGJ1aWxkTm9kZUhpZXJhY2h5KCBjaGlsZCwgbm9kZSwganNvbiwgcGFyc2VyICkgKTtcblxuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIFByb21pc2UuYWxsKCBwZW5kaW5nICk7XG5cblx0fSApO1xuXG59XG5cbi8qKlxuICogQHBhcmFtIHtCdWZmZXJHZW9tZXRyeX0gZ2VvbWV0cnlcbiAqIEBwYXJhbSB7R0xURi5QcmltaXRpdmV9IHByaW1pdGl2ZURlZlxuICogQHBhcmFtIHtHTFRGUGFyc2VyfSBwYXJzZXJcbiAqL1xuZnVuY3Rpb24gY29tcHV0ZUJvdW5kcyggZ2VvbWV0cnksIHByaW1pdGl2ZURlZiwgcGFyc2VyICkge1xuXG5cdGNvbnN0IGF0dHJpYnV0ZXMgPSBwcmltaXRpdmVEZWYuYXR0cmlidXRlcztcblxuXHRjb25zdCBib3ggPSBuZXcgQm94MygpO1xuXG5cdGlmICggYXR0cmlidXRlcy5QT1NJVElPTiAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0Y29uc3QgYWNjZXNzb3IgPSBwYXJzZXIuanNvbi5hY2Nlc3NvcnNbIGF0dHJpYnV0ZXMuUE9TSVRJT04gXTtcblxuXHRcdGNvbnN0IG1pbiA9IGFjY2Vzc29yLm1pbjtcblx0XHRjb25zdCBtYXggPSBhY2Nlc3Nvci5tYXg7XG5cblx0XHQvLyBnbFRGIHJlcXVpcmVzICdtaW4nIGFuZCAnbWF4JywgYnV0IFZSTSAod2hpY2ggZXh0ZW5kcyBnbFRGKSBjdXJyZW50bHkgaWdub3JlcyB0aGF0IHJlcXVpcmVtZW50LlxuXG5cdFx0aWYgKCBtaW4gIT09IHVuZGVmaW5lZCAmJiBtYXggIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0Ym94LnNldChcblx0XHRcdFx0bmV3IFZlY3RvcjMoIG1pblsgMCBdLCBtaW5bIDEgXSwgbWluWyAyIF0gKSxcblx0XHRcdFx0bmV3IFZlY3RvcjMoIG1heFsgMCBdLCBtYXhbIDEgXSwgbWF4WyAyIF0gKVxuXHRcdFx0KTtcblxuXHRcdFx0aWYgKCBhY2Nlc3Nvci5ub3JtYWxpemVkICkge1xuXG5cdFx0XHRcdGNvbnN0IGJveFNjYWxlID0gZ2V0Tm9ybWFsaXplZENvbXBvbmVudFNjYWxlKCBXRUJHTF9DT01QT05FTlRfVFlQRVNbIGFjY2Vzc29yLmNvbXBvbmVudFR5cGUgXSApO1xuXHRcdFx0XHRib3gubWluLm11bHRpcGx5U2NhbGFyKCBib3hTY2FsZSApO1xuXHRcdFx0XHRib3gubWF4Lm11bHRpcGx5U2NhbGFyKCBib3hTY2FsZSApO1xuXG5cdFx0XHR9XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHRjb25zb2xlLndhcm4oICdUSFJFRS5HTFRGTG9hZGVyOiBNaXNzaW5nIG1pbi9tYXggcHJvcGVydGllcyBmb3IgYWNjZXNzb3IgUE9TSVRJT04uJyApO1xuXG5cdFx0XHRyZXR1cm47XG5cblx0XHR9XG5cblx0fSBlbHNlIHtcblxuXHRcdHJldHVybjtcblxuXHR9XG5cblx0Y29uc3QgdGFyZ2V0cyA9IHByaW1pdGl2ZURlZi50YXJnZXRzO1xuXG5cdGlmICggdGFyZ2V0cyAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0Y29uc3QgbWF4RGlzcGxhY2VtZW50ID0gbmV3IFZlY3RvcjMoKTtcblx0XHRjb25zdCB2ZWN0b3IgPSBuZXcgVmVjdG9yMygpO1xuXG5cdFx0Zm9yICggbGV0IGkgPSAwLCBpbCA9IHRhcmdldHMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cblx0XHRcdGNvbnN0IHRhcmdldCA9IHRhcmdldHNbIGkgXTtcblxuXHRcdFx0aWYgKCB0YXJnZXQuUE9TSVRJT04gIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRjb25zdCBhY2Nlc3NvciA9IHBhcnNlci5qc29uLmFjY2Vzc29yc1sgdGFyZ2V0LlBPU0lUSU9OIF07XG5cdFx0XHRcdGNvbnN0IG1pbiA9IGFjY2Vzc29yLm1pbjtcblx0XHRcdFx0Y29uc3QgbWF4ID0gYWNjZXNzb3IubWF4O1xuXG5cdFx0XHRcdC8vIGdsVEYgcmVxdWlyZXMgJ21pbicgYW5kICdtYXgnLCBidXQgVlJNICh3aGljaCBleHRlbmRzIGdsVEYpIGN1cnJlbnRseSBpZ25vcmVzIHRoYXQgcmVxdWlyZW1lbnQuXG5cblx0XHRcdFx0aWYgKCBtaW4gIT09IHVuZGVmaW5lZCAmJiBtYXggIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRcdC8vIHdlIG5lZWQgdG8gZ2V0IG1heCBvZiBhYnNvbHV0ZSBjb21wb25lbnRzIGJlY2F1c2UgdGFyZ2V0IHdlaWdodCBpcyBbLTEsMV1cblx0XHRcdFx0XHR2ZWN0b3Iuc2V0WCggTWF0aC5tYXgoIE1hdGguYWJzKCBtaW5bIDAgXSApLCBNYXRoLmFicyggbWF4WyAwIF0gKSApICk7XG5cdFx0XHRcdFx0dmVjdG9yLnNldFkoIE1hdGgubWF4KCBNYXRoLmFicyggbWluWyAxIF0gKSwgTWF0aC5hYnMoIG1heFsgMSBdICkgKSApO1xuXHRcdFx0XHRcdHZlY3Rvci5zZXRaKCBNYXRoLm1heCggTWF0aC5hYnMoIG1pblsgMiBdICksIE1hdGguYWJzKCBtYXhbIDIgXSApICkgKTtcblxuXG5cdFx0XHRcdFx0aWYgKCBhY2Nlc3Nvci5ub3JtYWxpemVkICkge1xuXG5cdFx0XHRcdFx0XHRjb25zdCBib3hTY2FsZSA9IGdldE5vcm1hbGl6ZWRDb21wb25lbnRTY2FsZSggV0VCR0xfQ09NUE9ORU5UX1RZUEVTWyBhY2Nlc3Nvci5jb21wb25lbnRUeXBlIF0gKTtcblx0XHRcdFx0XHRcdHZlY3Rvci5tdWx0aXBseVNjYWxhciggYm94U2NhbGUgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE5vdGU6IHRoaXMgYXNzdW1lcyB0aGF0IHRoZSBzdW0gb2YgYWxsIHdlaWdodHMgaXMgYXQgbW9zdCAxLiBUaGlzIGlzbid0IHF1aXRlIGNvcnJlY3QgLSBpdCdzIG1vcmUgY29uc2VydmF0aXZlXG5cdFx0XHRcdFx0Ly8gdG8gYXNzdW1lIHRoYXQgZWFjaCB0YXJnZXQgY2FuIGhhdmUgYSBtYXggd2VpZ2h0IG9mIDEuIEhvd2V2ZXIsIGZvciBzb21lIHVzZSBjYXNlcyAtIG5vdGFibHksIHdoZW4gbW9ycGggdGFyZ2V0c1xuXHRcdFx0XHRcdC8vIGFyZSB1c2VkIHRvIGltcGxlbWVudCBrZXktZnJhbWUgYW5pbWF0aW9ucyBhbmQgYXMgc3VjaCBvbmx5IHR3byBhcmUgYWN0aXZlIGF0IGEgdGltZSAtIHRoaXMgcmVzdWx0cyBpbiB2ZXJ5IGxhcmdlXG5cdFx0XHRcdFx0Ly8gYm94ZXMuIFNvIGZvciBub3cgd2UgbWFrZSBhIGJveCB0aGF0J3Mgc29tZXRpbWVzIGEgdG91Y2ggdG9vIHNtYWxsIGJ1dCBpcyBob3BlZnVsbHkgbW9zdGx5IG9mIHJlYXNvbmFibGUgc2l6ZS5cblx0XHRcdFx0XHRtYXhEaXNwbGFjZW1lbnQubWF4KCB2ZWN0b3IgKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuR0xURkxvYWRlcjogTWlzc2luZyBtaW4vbWF4IHByb3BlcnRpZXMgZm9yIGFjY2Vzc29yIFBPU0lUSU9OLicgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdC8vIEFzIHBlciBjb21tZW50IGFib3ZlIHRoaXMgYm94IGlzbid0IGNvbnNlcnZhdGl2ZSwgYnV0IGhhcyBhIHJlYXNvbmFibGUgc2l6ZSBmb3IgYSB2ZXJ5IGxhcmdlIG51bWJlciBvZiBtb3JwaCB0YXJnZXRzLlxuXHRcdGJveC5leHBhbmRCeVZlY3RvciggbWF4RGlzcGxhY2VtZW50ICk7XG5cblx0fVxuXG5cdGdlb21ldHJ5LmJvdW5kaW5nQm94ID0gYm94O1xuXG5cdGNvbnN0IHNwaGVyZSA9IG5ldyBTcGhlcmUoKTtcblxuXHRib3guZ2V0Q2VudGVyKCBzcGhlcmUuY2VudGVyICk7XG5cdHNwaGVyZS5yYWRpdXMgPSBib3gubWluLmRpc3RhbmNlVG8oIGJveC5tYXggKSAvIDI7XG5cblx0Z2VvbWV0cnkuYm91bmRpbmdTcGhlcmUgPSBzcGhlcmU7XG5cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0J1ZmZlckdlb21ldHJ5fSBnZW9tZXRyeVxuICogQHBhcmFtIHtHTFRGLlByaW1pdGl2ZX0gcHJpbWl0aXZlRGVmXG4gKiBAcGFyYW0ge0dMVEZQYXJzZXJ9IHBhcnNlclxuICogQHJldHVybiB7UHJvbWlzZTxCdWZmZXJHZW9tZXRyeT59XG4gKi9cbmZ1bmN0aW9uIGFkZFByaW1pdGl2ZUF0dHJpYnV0ZXMoIGdlb21ldHJ5LCBwcmltaXRpdmVEZWYsIHBhcnNlciApIHtcblxuXHRjb25zdCBhdHRyaWJ1dGVzID0gcHJpbWl0aXZlRGVmLmF0dHJpYnV0ZXM7XG5cblx0Y29uc3QgcGVuZGluZyA9IFtdO1xuXG5cdGZ1bmN0aW9uIGFzc2lnbkF0dHJpYnV0ZUFjY2Vzc29yKCBhY2Nlc3NvckluZGV4LCBhdHRyaWJ1dGVOYW1lICkge1xuXG5cdFx0cmV0dXJuIHBhcnNlci5nZXREZXBlbmRlbmN5KCAnYWNjZXNzb3InLCBhY2Nlc3NvckluZGV4IClcblx0XHRcdC50aGVuKCBmdW5jdGlvbiAoIGFjY2Vzc29yICkge1xuXG5cdFx0XHRcdGdlb21ldHJ5LnNldEF0dHJpYnV0ZSggYXR0cmlidXRlTmFtZSwgYWNjZXNzb3IgKTtcblxuXHRcdFx0fSApO1xuXG5cdH1cblxuXHRmb3IgKCBjb25zdCBnbHRmQXR0cmlidXRlTmFtZSBpbiBhdHRyaWJ1dGVzICkge1xuXG5cdFx0Y29uc3QgdGhyZWVBdHRyaWJ1dGVOYW1lID0gQVRUUklCVVRFU1sgZ2x0ZkF0dHJpYnV0ZU5hbWUgXSB8fCBnbHRmQXR0cmlidXRlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0Ly8gU2tpcCBhdHRyaWJ1dGVzIGFscmVhZHkgcHJvdmlkZWQgYnkgZS5nLiBEcmFjbyBleHRlbnNpb24uXG5cdFx0aWYgKCB0aHJlZUF0dHJpYnV0ZU5hbWUgaW4gZ2VvbWV0cnkuYXR0cmlidXRlcyApIGNvbnRpbnVlO1xuXG5cdFx0cGVuZGluZy5wdXNoKCBhc3NpZ25BdHRyaWJ1dGVBY2Nlc3NvciggYXR0cmlidXRlc1sgZ2x0ZkF0dHJpYnV0ZU5hbWUgXSwgdGhyZWVBdHRyaWJ1dGVOYW1lICkgKTtcblxuXHR9XG5cblx0aWYgKCBwcmltaXRpdmVEZWYuaW5kaWNlcyAhPT0gdW5kZWZpbmVkICYmICEgZ2VvbWV0cnkuaW5kZXggKSB7XG5cblx0XHRjb25zdCBhY2Nlc3NvciA9IHBhcnNlci5nZXREZXBlbmRlbmN5KCAnYWNjZXNzb3InLCBwcmltaXRpdmVEZWYuaW5kaWNlcyApLnRoZW4oIGZ1bmN0aW9uICggYWNjZXNzb3IgKSB7XG5cblx0XHRcdGdlb21ldHJ5LnNldEluZGV4KCBhY2Nlc3NvciApO1xuXG5cdFx0fSApO1xuXG5cdFx0cGVuZGluZy5wdXNoKCBhY2Nlc3NvciApO1xuXG5cdH1cblxuXHRhc3NpZ25FeHRyYXNUb1VzZXJEYXRhKCBnZW9tZXRyeSwgcHJpbWl0aXZlRGVmICk7XG5cblx0Y29tcHV0ZUJvdW5kcyggZ2VvbWV0cnksIHByaW1pdGl2ZURlZiwgcGFyc2VyICk7XG5cblx0cmV0dXJuIFByb21pc2UuYWxsKCBwZW5kaW5nICkudGhlbiggZnVuY3Rpb24gKCkge1xuXG5cdFx0cmV0dXJuIHByaW1pdGl2ZURlZi50YXJnZXRzICE9PSB1bmRlZmluZWRcblx0XHRcdD8gYWRkTW9ycGhUYXJnZXRzKCBnZW9tZXRyeSwgcHJpbWl0aXZlRGVmLnRhcmdldHMsIHBhcnNlciApXG5cdFx0XHQ6IGdlb21ldHJ5O1xuXG5cdH0gKTtcblxufVxuXG4vKipcbiAqIEBwYXJhbSB7QnVmZmVyR2VvbWV0cnl9IGdlb21ldHJ5XG4gKiBAcGFyYW0ge051bWJlcn0gZHJhd01vZGVcbiAqIEByZXR1cm4ge0J1ZmZlckdlb21ldHJ5fVxuICovXG5mdW5jdGlvbiB0b1RyaWFuZ2xlc0RyYXdNb2RlKCBnZW9tZXRyeSwgZHJhd01vZGUgKSB7XG5cblx0bGV0IGluZGV4ID0gZ2VvbWV0cnkuZ2V0SW5kZXgoKTtcblxuXHQvLyBnZW5lcmF0ZSBpbmRleCBpZiBub3QgcHJlc2VudFxuXG5cdGlmICggaW5kZXggPT09IG51bGwgKSB7XG5cblx0XHRjb25zdCBpbmRpY2VzID0gW107XG5cblx0XHRjb25zdCBwb3NpdGlvbiA9IGdlb21ldHJ5LmdldEF0dHJpYnV0ZSggJ3Bvc2l0aW9uJyApO1xuXG5cdFx0aWYgKCBwb3NpdGlvbiAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRmb3IgKCBsZXQgaSA9IDA7IGkgPCBwb3NpdGlvbi5jb3VudDsgaSArKyApIHtcblxuXHRcdFx0XHRpbmRpY2VzLnB1c2goIGkgKTtcblxuXHRcdFx0fVxuXG5cdFx0XHRnZW9tZXRyeS5zZXRJbmRleCggaW5kaWNlcyApO1xuXHRcdFx0aW5kZXggPSBnZW9tZXRyeS5nZXRJbmRleCgpO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Y29uc29sZS5lcnJvciggJ1RIUkVFLkdMVEZMb2FkZXIudG9UcmlhbmdsZXNEcmF3TW9kZSgpOiBVbmRlZmluZWQgcG9zaXRpb24gYXR0cmlidXRlLiBQcm9jZXNzaW5nIG5vdCBwb3NzaWJsZS4nICk7XG5cdFx0XHRyZXR1cm4gZ2VvbWV0cnk7XG5cblx0XHR9XG5cblx0fVxuXG5cdC8vXG5cblx0Y29uc3QgbnVtYmVyT2ZUcmlhbmdsZXMgPSBpbmRleC5jb3VudCAtIDI7XG5cdGNvbnN0IG5ld0luZGljZXMgPSBbXTtcblxuXHRpZiAoIGRyYXdNb2RlID09PSBUcmlhbmdsZUZhbkRyYXdNb2RlICkge1xuXG5cdFx0Ly8gZ2wuVFJJQU5HTEVfRkFOXG5cblx0XHRmb3IgKCBsZXQgaSA9IDE7IGkgPD0gbnVtYmVyT2ZUcmlhbmdsZXM7IGkgKysgKSB7XG5cblx0XHRcdG5ld0luZGljZXMucHVzaCggaW5kZXguZ2V0WCggMCApICk7XG5cdFx0XHRuZXdJbmRpY2VzLnB1c2goIGluZGV4LmdldFgoIGkgKSApO1xuXHRcdFx0bmV3SW5kaWNlcy5wdXNoKCBpbmRleC5nZXRYKCBpICsgMSApICk7XG5cblx0XHR9XG5cblx0fSBlbHNlIHtcblxuXHRcdC8vIGdsLlRSSUFOR0xFX1NUUklQXG5cblx0XHRmb3IgKCBsZXQgaSA9IDA7IGkgPCBudW1iZXJPZlRyaWFuZ2xlczsgaSArKyApIHtcblxuXHRcdFx0aWYgKCBpICUgMiA9PT0gMCApIHtcblxuXHRcdFx0XHRuZXdJbmRpY2VzLnB1c2goIGluZGV4LmdldFgoIGkgKSApO1xuXHRcdFx0XHRuZXdJbmRpY2VzLnB1c2goIGluZGV4LmdldFgoIGkgKyAxICkgKTtcblx0XHRcdFx0bmV3SW5kaWNlcy5wdXNoKCBpbmRleC5nZXRYKCBpICsgMiApICk7XG5cblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRuZXdJbmRpY2VzLnB1c2goIGluZGV4LmdldFgoIGkgKyAyICkgKTtcblx0XHRcdFx0bmV3SW5kaWNlcy5wdXNoKCBpbmRleC5nZXRYKCBpICsgMSApICk7XG5cdFx0XHRcdG5ld0luZGljZXMucHVzaCggaW5kZXguZ2V0WCggaSApICk7XG5cblx0XHRcdH1cblxuXHRcdH1cblxuXHR9XG5cblx0aWYgKCAoIG5ld0luZGljZXMubGVuZ3RoIC8gMyApICE9PSBudW1iZXJPZlRyaWFuZ2xlcyApIHtcblxuXHRcdGNvbnNvbGUuZXJyb3IoICdUSFJFRS5HTFRGTG9hZGVyLnRvVHJpYW5nbGVzRHJhd01vZGUoKTogVW5hYmxlIHRvIGdlbmVyYXRlIGNvcnJlY3QgYW1vdW50IG9mIHRyaWFuZ2xlcy4nICk7XG5cblx0fVxuXG5cdC8vIGJ1aWxkIGZpbmFsIGdlb21ldHJ5XG5cblx0Y29uc3QgbmV3R2VvbWV0cnkgPSBnZW9tZXRyeS5jbG9uZSgpO1xuXHRuZXdHZW9tZXRyeS5zZXRJbmRleCggbmV3SW5kaWNlcyApO1xuXG5cdHJldHVybiBuZXdHZW9tZXRyeTtcblxufVxuXG5leHBvcnQgeyBHTFRGTG9hZGVyIH07IiwiaW1wb3J0IHsgQW1iaWVudExpZ2h0LCBBbmltYXRpb25DbGlwLCBEaXJlY3Rpb25hbExpZ2h0LCBPYmplY3QzRCwgUG9pbnRMaWdodCwgR3JvdXAsIE1lc2ggfSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IGlzQ2xpZW50IH0gZnJvbSAnLi4vLi4vY29tbW9uL2Z1bmN0aW9ucy9pc0NsaWVudCdcbmltcG9ydCB7IEVuZ2luZSB9IGZyb20gJy4uLy4uL2Vjcy9jbGFzc2VzL0VuZ2luZSdcbmltcG9ydCB7IEdMVEZSZW1vdmVNYXRlcmlhbHNFeHRlbnNpb24gfSBmcm9tICcuLi9jbGFzc2VzL0dMVEZSZW1vdmVNYXRlcmlhbHNFeHRlbnNpb24nXG5pbXBvcnQgeyBHTFRGSW5zdGFuY2luZ0V4dGVuc2lvbiB9IGZyb20gJy4uL2NsYXNzZXMvR0xURkluc3RhbmNpbmdFeHRlbnNpb24nXG5pbXBvcnQgeyBOb2RlRFJBQ09Mb2FkZXIgfSBmcm9tICcuLi9sb2FkZXJzL2dsdGYvTm9kZURyYWNvTG9hZGVyJ1xuaW1wb3J0IHsgRFJBQ09Mb2FkZXIgfSBmcm9tICcuLi9sb2FkZXJzL2dsdGYvRFJBQ09Mb2FkZXInXG5pbXBvcnQgeyBHTFRGTG9hZGVyIH0gZnJvbSAnLi4vbG9hZGVycy9nbHRmL0dMVEZMb2FkZXInXG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciByZXN1bHQgb2YgdGhlIEdMVEYgQXNzZXQgbG9hZC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMb2FkR0xURlJlc3VsdEludGVyZmFjZSB7XG4gIGFuaW1hdGlvbnM6IEFuaW1hdGlvbkNsaXBbXVxuICBzY2VuZTogT2JqZWN0M0QgfCBHcm91cCB8IE1lc2hcbiAganNvbjogYW55XG4gIHN0YXRzOiBhbnlcbn1cblxuY29uc3QgbG9hZGVyID0gbmV3IEdMVEZMb2FkZXIoKVxuXG5pZiAoIWlzQ2xpZW50KSB7XG4gIGxvYWRlci5yZWdpc3RlcigocGFyc2VyKSA9PiBuZXcgR0xURlJlbW92ZU1hdGVyaWFsc0V4dGVuc2lvbihwYXJzZXIpKVxufVxuXG5sb2FkZXIucmVnaXN0ZXIoKHBhcnNlcikgPT4gbmV3IEdMVEZJbnN0YW5jaW5nRXh0ZW5zaW9uKHBhcnNlcikpXG5cbmNvbnN0IGRyYWNvTG9hZGVyOiBhbnkgPSBpc0NsaWVudCA/IG5ldyBEUkFDT0xvYWRlcigpIDogbmV3IE5vZGVEUkFDT0xvYWRlcigpXG4vLyBjb25zdCBkcmFjb0xvYWRlciA9IG5ldyBEUkFDT0xvYWRlcigpXG5pZiAoaXNDbGllbnQpIHtcbiAgZHJhY29Mb2FkZXIuc2V0RGVjb2RlclBhdGgoJy9sb2FkZXJfZGVjb2RlcnMvJylcbn0gZWxzZSB7XG4gIDsoZHJhY29Mb2FkZXIgYXMgYW55KS5nZXREZWNvZGVyTW9kdWxlID0gKCkgPT4ge31cbiAgOyhkcmFjb0xvYWRlciBhcyBhbnkpLnByZWxvYWQgPSAoKSA9PiB7fVxufVxuOyhsb2FkZXIgYXMgYW55KS5zZXREUkFDT0xvYWRlcihkcmFjb0xvYWRlcilcblxuZXhwb3J0IGZ1bmN0aW9uIGdldExvYWRlcigpOiBhbnkge1xuICByZXR1cm4gbG9hZGVyXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwb3NlRHJhY29Mb2FkZXJXb3JrZXJzKCk6IHZvaWQge1xuICBsb2FkZXIuZHJhY29Mb2FkZXI/LmRpc3Bvc2UoKVxufVxuXG4vKipcbiAqIExvYWRzIGFuIEFzc2V0IHdoaWNoIGlzIGluIEdMVEYgZm9ybWF0LlxuICpcbiAqIEBwYXJhbSB1cmwgVVJMIG9mIHRoZSBhc3NldC5cbiAqIEByZXR1cm5zIGEgcHJvbWlzZSBvZiB7QGxpbmsgTG9hZEdMVEZSZXN1bHRJbnRlcmZhY2V9LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gTG9hZEdMVEYodXJsOiBzdHJpbmcpOiBQcm9taXNlPExvYWRHTFRGUmVzdWx0SW50ZXJmYWNlPiB7XG4gIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZTxMb2FkR0xURlJlc3VsdEludGVyZmFjZT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGdldExvYWRlcigpLmxvYWQoXG4gICAgICB1cmwsXG4gICAgICAoZ2x0ZikgPT4ge1xuICAgICAgICAvLyBUT0RPOiBSZW1vdmUgbWUgd2hlbiB3ZSBhZGQgcmV0YXJnZXRpbmdcbiAgICAgICAgZ2x0Zi5zY2VuZS50cmF2ZXJzZSgobykgPT4ge1xuICAgICAgICAgIG8ubmFtZSA9IG8ubmFtZS5yZXBsYWNlKCdtaXhhbW9yaWcnLCAnJylcbiAgICAgICAgfSlcblxuICAgICAgICBsb2FkRXh0ZW50aW9ucyhnbHRmKVxuICAgICAgICByZXNvbHZlKHsgYW5pbWF0aW9uczogZ2x0Zi5hbmltYXRpb25zLCBzY2VuZTogZ2x0Zi5zY2VuZSwganNvbjoge30sIHN0YXRzOiB7fSB9KVxuICAgICAgfSxcbiAgICAgIG51bGwsXG4gICAgICAoZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgICAgICByZWplY3QoZSlcbiAgICAgIH1cbiAgICApXG4gIH0pXG59XG5cbmV4cG9ydCBjb25zdCBsb2FkRXh0ZW50aW9ucyA9IChnbHRmKSA9PiB7XG4gIGxvYWRMaWdodG1hcHMoZ2x0Zi5wYXJzZXIpXG4gIGxvYWRMaWdodHMoZ2x0Zilcbn1cblxuY29uc3QgbG9hZExpZ2h0bWFwcyA9IChwYXJzZXIpID0+IHtcbiAgY29uc3QgbG9hZExpZ2h0bWFwID0gYXN5bmMgKG1hdGVyaWFsSW5kZXgpID0+IHtcbiAgICBjb25zdCBsaWdodG1hcERlZiA9IHBhcnNlci5qc29uLm1hdGVyaWFsc1ttYXRlcmlhbEluZGV4XS5leHRlbnNpb25zLk1PWl9saWdodG1hcFxuICAgIGNvbnN0IFttYXRlcmlhbCwgbGlnaHRNYXBdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgcGFyc2VyLmdldERlcGVuZGVuY3koJ21hdGVyaWFsJywgbWF0ZXJpYWxJbmRleCksXG4gICAgICBwYXJzZXIuZ2V0RGVwZW5kZW5jeSgndGV4dHVyZScsIGxpZ2h0bWFwRGVmLmluZGV4KVxuICAgIF0pXG4gICAgbWF0ZXJpYWwubGlnaHRNYXAgPSBsaWdodE1hcFxuICAgIG1hdGVyaWFsLmxpZ2h0TWFwSW50ZW5zaXR5ID0gbGlnaHRtYXBEZWYuaW50ZW5zaXR5ICE9PSB1bmRlZmluZWQgPyBsaWdodG1hcERlZi5pbnRlbnNpdHkgOiAxXG4gICAgbWF0ZXJpYWwubmVlZHNVcGRhdGUgPSB0cnVlXG4gICAgcmV0dXJuIGxpZ2h0TWFwXG4gIH1cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJzZXIuanNvbi5tYXRlcmlhbHM/Lmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgbWF0ZXJpYWxOb2RlID0gcGFyc2VyLmpzb24ubWF0ZXJpYWxzW2ldXG5cbiAgICBpZiAoIW1hdGVyaWFsTm9kZS5leHRlbnNpb25zKSBjb250aW51ZVxuXG4gICAgaWYgKG1hdGVyaWFsTm9kZS5leHRlbnNpb25zLk1PWl9saWdodG1hcCkge1xuICAgICAgbG9hZExpZ2h0bWFwKGkpXG4gICAgfVxuICB9XG59XG5cbi8vIHRoaXMgaXNuJ3QgdGhlIGJlc3Qgc29sdXRpb24uIGluc3RlYWQgd2Ugc2hvdWxkIGV4cG9zZSB0aGUgcGx1Z2luL2V4dGVuc2lvbiByZWdpc3RlciBpbiBHTFRGTG9hZGVyLmpzXG5cbmNvbnN0IGxvYWRMaWdodHMgPSAoZ2x0ZikgPT4ge1xuICBpZiAoZ2x0Zi5wYXJzZXIuanNvbj8uZXh0ZW5zaW9ucz8uTU9aX2h1YnNfY29tcG9uZW50cz8uTU9aX2h1YnNfY29tcG9uZW50cz8udmVyc2lvbiA9PT0gMykge1xuICAgIGNvbnN0IG9ianNUb1JlbW92ZTogYW55W10gPSBbXVxuICAgIGdsdGYuc2NlbmUudHJhdmVyc2UoKG9iaikgPT4ge1xuICAgICAgaWYgKG9iai51c2VyRGF0YS5nbHRmRXh0ZW5zaW9ucyAmJiBvYmoudXNlckRhdGEuZ2x0ZkV4dGVuc2lvbnMuTU9aX2h1YnNfY29tcG9uZW50cykge1xuICAgICAgICBsZXQgcmVwbGFjZW1lbnRcbiAgICAgICAgc3dpdGNoIChPYmplY3Qua2V5cyhvYmoudXNlckRhdGEuZ2x0ZkV4dGVuc2lvbnMuTU9aX2h1YnNfY29tcG9uZW50cylbMF0pIHtcbiAgICAgICAgICBjYXNlICdkaXJlY3Rpb25hbC1saWdodCc6XG4gICAgICAgICAgICByZXBsYWNlbWVudCA9IF9kaXJlY3Rpb25hbChvYmopXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ3BvaW50LWxpZ2h0JzpcbiAgICAgICAgICAgIHJlcGxhY2VtZW50ID0gX3BvaW50KG9iailcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnYW1iaWVudC1saWdodCc6XG4gICAgICAgICAgICByZXBsYWNlbWVudCA9IF9hbWJpZW50KG9iailcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcGxhY2VtZW50KSB7XG4gICAgICAgICAgcmVwbGFjZW1lbnQucG9zaXRpb24uY29weShvYmoucG9zaXRpb24pXG4gICAgICAgICAgcmVwbGFjZW1lbnQucXVhdGVybmlvbi5jb3B5KG9iai5xdWF0ZXJuaW9uKVxuICAgICAgICAgIG9iai5wYXJlbnQuYWRkKHJlcGxhY2VtZW50KVxuICAgICAgICAgIG9ianNUb1JlbW92ZS5wdXNoKG9iailcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXBsYWNlbWVudClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgZm9yIChjb25zdCBvYmogb2Ygb2Jqc1RvUmVtb3ZlKSB7XG4gICAgICBvYmoucGFyZW50LnJlbW92ZShvYmopXG4gICAgfVxuICB9XG59XG5cbmNvbnN0IF9zaGFkb3cgPSAobGlnaHQsIGxpZ2h0RGF0YSkgPT4ge1xuICBpZiAodHlwZW9mIGxpZ2h0RGF0YS5jYXN0U2hhZG93ICE9PSAndW5kZWZpbmVkJykgbGlnaHQuY2FzdFNoYWRvdyA9IGxpZ2h0RGF0YS5jYXN0U2hhZG93XG4gIGlmICh0eXBlb2YgbGlnaHREYXRhLnNoYWRvd1Jlc29sdXRpb24gIT09ICd1bmRlZmluZWQnKVxuICAgIGxpZ2h0LnNoYWRvdy5tYXBTaXplLnNldChsaWdodERhdGEuc2hhZG93UmVzb2x1dGlvblswXSwgbGlnaHREYXRhLnNoYWRvd1Jlc29sdXRpb25bMV0pXG4gIGlmICh0eXBlb2YgbGlnaHREYXRhLnNoYWRvd0JpYXMgIT09ICd1bmRlZmluZWQnKSBsaWdodC5zaGFkb3cuYmlhcyA9IGxpZ2h0RGF0YS5zaGFkb3dCaWFzXG4gIGlmICh0eXBlb2YgbGlnaHREYXRhLnNoYWRvd1JhZGl1cyAhPT0gJ3VuZGVmaW5lZCcpIGxpZ2h0LnNoYWRvdy5yYWRpdXMgPSBsaWdodERhdGEuc2hhZG93UmFkaXVzXG59XG5cbmNvbnN0IF9kaXJlY3Rpb25hbCA9IChvYmopID0+IHtcbiAgaWYgKCFFbmdpbmUuY3NtKSByZXR1cm4gLy8gY3VycmVudGx5IHRoaXMgYnJlYWtzIENTTVxuICBjb25zdCBsaWdodERhdGEgPSBvYmoudXNlckRhdGEuZ2x0ZkV4dGVuc2lvbnMuTU9aX2h1YnNfY29tcG9uZW50c1snZGlyZWN0aW9uYWwtbGlnaHQnXVxuICBjb25zdCBsaWdodCA9IG5ldyBEaXJlY3Rpb25hbExpZ2h0KGxpZ2h0RGF0YS5jb2xvciwgbGlnaHREYXRhLmludGVuc2l0eSlcbiAgX3NoYWRvdyhsaWdodCwgbGlnaHREYXRhKVxuICByZXR1cm4gbGlnaHRcbn1cblxuY29uc3QgX3BvaW50ID0gKG9iaikgPT4ge1xuICBjb25zdCBsaWdodERhdGEgPSBvYmoudXNlckRhdGEuZ2x0ZkV4dGVuc2lvbnMuTU9aX2h1YnNfY29tcG9uZW50c1sncG9pbnQtbGlnaHQnXVxuICBjb25zdCBsaWdodCA9IG5ldyBQb2ludExpZ2h0KGxpZ2h0RGF0YS5jb2xvciwgbGlnaHREYXRhLmludGVuc2l0eSwgbGlnaHREYXRhLmRpc3RhbmNlLCBsaWdodERhdGEuZGVjYXkpXG4gIF9zaGFkb3cobGlnaHQsIGxpZ2h0RGF0YSlcbiAgcmV0dXJuIGxpZ2h0XG59XG5cbmNvbnN0IF9hbWJpZW50ID0gKG9iaikgPT4ge1xuICBjb25zdCBsaWdodERhdGEgPSBvYmoudXNlckRhdGEuZ2x0ZkV4dGVuc2lvbnMuTU9aX2h1YnNfY29tcG9uZW50c1snYW1iaWVudC1saWdodCddXG4gIGNvbnN0IGxpZ2h0ID0gbmV3IEFtYmllbnRMaWdodChsaWdodERhdGEuY29sb3IsIGxpZ2h0RGF0YS5pbnRlbnNpdHkpXG4gIHJldHVybiBsaWdodFxufVxuIiwiaW1wb3J0IHsgRGVmYXVsdExvYWRpbmdNYW5hZ2VyLCBUZXh0dXJlLCBGaWxlTG9hZGVyIH0gZnJvbSAndGhyZWUnXG5cbmRlY2xhcmUgY29uc3QgT2Zmc2NyZWVuQ2FudmFzOiB7XG4gIHByb3RvdHlwZTogYW55XG4gIG5ldyAod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiBhbnlcbn1cblxuLyoqIExvYWRlciBjbGFzcyBmb3IgVEdBIGFzc2V0LiAqL1xuZXhwb3J0IGNsYXNzIFRHQUxvYWRlciB7XG4gIC8qKiBQYXRoIG9mIHRoZSBhc3NldC4gKi9cbiAgcGF0aDogYW55XG4gIC8qKiBMb2FkaW5nIG1hbmFnZXIgZm9yIFRHQSBhc3NldC4gKi9cbiAgbWFuYWdlcjogYW55XG5cbiAgLyoqIENvbnN0cnVjdHMgVEdBIExvYWRlci4gKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5tYW5hZ2VyID0gdGhpcy5tYW5hZ2VyICE9PSB1bmRlZmluZWQgPyB0aGlzLm1hbmFnZXIgOiBEZWZhdWx0TG9hZGluZ01hbmFnZXJcbiAgfVxuXG4gIC8qKiBMb2FkIFRHQSB0ZXh0dXJlLiAqL1xuICBsb2FkKHVybCwgb25Mb2FkLCBvblByb2dyZXNzLCBvbkVycm9yKTogVGV4dHVyZSB7XG4gICAgY29uc3QgdGV4dHVyZSA9IG5ldyBUZXh0dXJlKClcblxuICAgIGNvbnN0IGxvYWRlciA9IG5ldyBGaWxlTG9hZGVyKHRoaXMubWFuYWdlcilcbiAgICBsb2FkZXIuc2V0UmVzcG9uc2VUeXBlKCdhcnJheWJ1ZmZlcicpXG4gICAgbG9hZGVyLnNldFBhdGgodGhpcy5wYXRoKVxuXG4gICAgbG9hZGVyLmxvYWQoXG4gICAgICB1cmwsXG4gICAgICAoYnVmZmVyKSA9PiB7XG4gICAgICAgIHRleHR1cmUuaW1hZ2UgPSB0aGlzLnBhcnNlKGJ1ZmZlcilcbiAgICAgICAgdGV4dHVyZS5uZWVkc1VwZGF0ZSA9IHRydWVcblxuICAgICAgICBpZiAob25Mb2FkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBvbkxvYWQodGV4dHVyZSlcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uUHJvZ3Jlc3MsXG4gICAgICBvbkVycm9yXG4gICAgKVxuXG4gICAgcmV0dXJuIHRleHR1cmVcbiAgfVxuXG4gIC8qKiBQYXJzZSB0aGUgYXNzZXQuICovXG4gIHBhcnNlKGJ1ZmZlcikge1xuICAgIC8vIHJlZmVyZW5jZSBmcm9tIHZ0aGliYXVsdCwgaHR0cHM6Ly9naXRodWIuY29tL3Z0aGliYXVsdC9yb0Jyb3dzZXIvYmxvYi9tYXN0ZXIvc3JjL0xvYWRlcnMvVGFyZ2EuanNcblxuICAgIGZ1bmN0aW9uIHRnYUNoZWNrSGVhZGVyKGhlYWRlcikge1xuICAgICAgc3dpdGNoIChoZWFkZXIuaW1hZ2VfdHlwZSkge1xuICAgICAgICAvLyBjaGVjayBpbmRleGVkIHR5cGVcblxuICAgICAgICBjYXNlIFRHQV9UWVBFX0lOREVYRUQ6XG4gICAgICAgIGNhc2UgVEdBX1RZUEVfUkxFX0lOREVYRUQ6XG4gICAgICAgICAgaWYgKGhlYWRlci5jb2xvcm1hcF9sZW5ndGggPiAyNTYgfHwgaGVhZGVyLmNvbG9ybWFwX3NpemUgIT09IDI0IHx8IGhlYWRlci5jb2xvcm1hcF90eXBlICE9PSAxKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUR0FMb2FkZXI6IEludmFsaWQgdHlwZSBjb2xvcm1hcCBkYXRhIGZvciBpbmRleGVkIHR5cGUuJylcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICAvLyBjaGVjayBjb2xvcm1hcCB0eXBlXG5cbiAgICAgICAgY2FzZSBUR0FfVFlQRV9SR0I6XG4gICAgICAgIGNhc2UgVEdBX1RZUEVfR1JFWTpcbiAgICAgICAgY2FzZSBUR0FfVFlQRV9STEVfUkdCOlxuICAgICAgICBjYXNlIFRHQV9UWVBFX1JMRV9HUkVZOlxuICAgICAgICAgIGlmIChoZWFkZXIuY29sb3JtYXBfdHlwZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVEdBTG9hZGVyOiBJbnZhbGlkIHR5cGUgY29sb3JtYXAgZGF0YSBmb3IgY29sb3JtYXAgdHlwZS4nKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIC8vIFdoYXQgdGhlIG5lZWQgb2YgYSBmaWxlIHdpdGhvdXQgZGF0YSA/XG5cbiAgICAgICAgY2FzZSBUR0FfVFlQRV9OT19EQVRBOlxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RHQUxvYWRlcjogTm8gZGF0YS4nKVxuXG4gICAgICAgIC8vIEludmFsaWQgdHlwZSA/XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdUR0FMb2FkZXI6IEludmFsaWQgdHlwZSBcIiVzXCIuJywgaGVhZGVyLmltYWdlX3R5cGUpXG4gICAgICB9XG5cbiAgICAgIC8vIGNoZWNrIGltYWdlIHdpZHRoIGFuZCBoZWlnaHRcblxuICAgICAgaWYgKGhlYWRlci53aWR0aCA8PSAwIHx8IGhlYWRlci5oZWlnaHQgPD0gMCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdUR0FMb2FkZXI6IEludmFsaWQgaW1hZ2Ugc2l6ZS4nKVxuICAgICAgfVxuXG4gICAgICAvLyBjaGVjayBpbWFnZSBwaXhlbCBzaXplXG5cbiAgICAgIGlmIChoZWFkZXIucGl4ZWxfc2l6ZSAhPT0gOCAmJiBoZWFkZXIucGl4ZWxfc2l6ZSAhPT0gMTYgJiYgaGVhZGVyLnBpeGVsX3NpemUgIT09IDI0ICYmIGhlYWRlci5waXhlbF9zaXplICE9PSAzMikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdUR0FMb2FkZXI6IEludmFsaWQgcGl4ZWwgc2l6ZSBcIiVzXCIuJywgaGVhZGVyLnBpeGVsX3NpemUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gcGFyc2UgdGdhIGltYWdlIGJ1ZmZlclxuXG4gICAgZnVuY3Rpb24gdGdhUGFyc2UodXNlX3JsZSwgdXNlX3BhbCwgaGVhZGVyLCBvZmZzZXQsIGRhdGEpIHtcbiAgICAgIGxldCBwaXhlbF9kYXRhLCBwYWxldHRlc1xuXG4gICAgICBjb25zdCBwaXhlbF9zaXplID0gaGVhZGVyLnBpeGVsX3NpemUgPj4gM1xuICAgICAgY29uc3QgcGl4ZWxfdG90YWwgPSBoZWFkZXIud2lkdGggKiBoZWFkZXIuaGVpZ2h0ICogcGl4ZWxfc2l6ZVxuXG4gICAgICAvLyByZWFkIHBhbGV0dGVzXG5cbiAgICAgIGlmICh1c2VfcGFsKSB7XG4gICAgICAgIHBhbGV0dGVzID0gZGF0YS5zdWJhcnJheShvZmZzZXQsIChvZmZzZXQgKz0gaGVhZGVyLmNvbG9ybWFwX2xlbmd0aCAqIChoZWFkZXIuY29sb3JtYXBfc2l6ZSA+PiAzKSkpXG4gICAgICB9XG5cbiAgICAgIC8vIHJlYWQgUkxFXG5cbiAgICAgIGlmICh1c2VfcmxlKSB7XG4gICAgICAgIHBpeGVsX2RhdGEgPSBuZXcgVWludDhBcnJheShwaXhlbF90b3RhbClcblxuICAgICAgICBsZXQgYywgY291bnQsIGlcbiAgICAgICAgbGV0IHNoaWZ0ID0gMFxuICAgICAgICBjb25zdCBwaXhlbHMgPSBuZXcgVWludDhBcnJheShwaXhlbF9zaXplKVxuXG4gICAgICAgIHdoaWxlIChzaGlmdCA8IHBpeGVsX3RvdGFsKSB7XG4gICAgICAgICAgYyA9IGRhdGFbb2Zmc2V0KytdXG4gICAgICAgICAgY291bnQgPSAoYyAmIDB4N2YpICsgMVxuXG4gICAgICAgICAgLy8gUkxFIHBpeGVsc1xuXG4gICAgICAgICAgaWYgKGMgJiAweDgwKSB7XG4gICAgICAgICAgICAvLyBiaW5kIHBpeGVsIHRtcCBhcnJheVxuXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcGl4ZWxfc2l6ZTsgKytpKSB7XG4gICAgICAgICAgICAgIHBpeGVsc1tpXSA9IGRhdGFbb2Zmc2V0KytdXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGNvcHkgcGl4ZWwgYXJyYXlcblxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgICAgICAgICAgcGl4ZWxfZGF0YS5zZXQocGl4ZWxzLCBzaGlmdCArIGkgKiBwaXhlbF9zaXplKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzaGlmdCArPSBwaXhlbF9zaXplICogY291bnRcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gcmF3IHBpeGVsc1xuXG4gICAgICAgICAgICBjb3VudCAqPSBwaXhlbF9zaXplXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICAgICAgICBwaXhlbF9kYXRhW3NoaWZ0ICsgaV0gPSBkYXRhW29mZnNldCsrXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hpZnQgKz0gY291bnRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHJhdyBwaXhlbHNcblxuICAgICAgICBwaXhlbF9kYXRhID0gZGF0YS5zdWJhcnJheShvZmZzZXQsIChvZmZzZXQgKz0gdXNlX3BhbCA/IGhlYWRlci53aWR0aCAqIGhlYWRlci5oZWlnaHQgOiBwaXhlbF90b3RhbCkpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBpeGVsX2RhdGE6IHBpeGVsX2RhdGEsXG4gICAgICAgIHBhbGV0dGVzOiBwYWxldHRlc1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRnYUdldEltYWdlRGF0YThiaXRzKGltYWdlRGF0YSwgeV9zdGFydCwgeV9zdGVwLCB5X2VuZCwgeF9zdGFydCwgeF9zdGVwLCB4X2VuZCwgaW1hZ2UsIHBhbGV0dGVzKSB7XG4gICAgICBjb25zdCBjb2xvcm1hcCA9IHBhbGV0dGVzXG4gICAgICBsZXQgY29sb3IsXG4gICAgICAgIGkgPSAwLFxuICAgICAgICB4LFxuICAgICAgICB5XG4gICAgICBjb25zdCB3aWR0aCA9IGhlYWRlci53aWR0aFxuXG4gICAgICBmb3IgKHkgPSB5X3N0YXJ0OyB5ICE9PSB5X2VuZDsgeSArPSB5X3N0ZXApIHtcbiAgICAgICAgZm9yICh4ID0geF9zdGFydDsgeCAhPT0geF9lbmQ7IHggKz0geF9zdGVwLCBpKyspIHtcbiAgICAgICAgICBjb2xvciA9IGltYWdlW2ldXG4gICAgICAgICAgaW1hZ2VEYXRhWyh4ICsgd2lkdGggKiB5KSAqIDQgKyAzXSA9IDI1NVxuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgMl0gPSBjb2xvcm1hcFtjb2xvciAqIDMgKyAwXVxuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgMV0gPSBjb2xvcm1hcFtjb2xvciAqIDMgKyAxXVxuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgMF0gPSBjb2xvcm1hcFtjb2xvciAqIDMgKyAyXVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbWFnZURhdGFcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0Z2FHZXRJbWFnZURhdGExNmJpdHMoaW1hZ2VEYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSkge1xuICAgICAgbGV0IGNvbG9yLFxuICAgICAgICBpID0gMCxcbiAgICAgICAgeCxcbiAgICAgICAgeVxuICAgICAgY29uc3Qgd2lkdGggPSBoZWFkZXIud2lkdGhcblxuICAgICAgZm9yICh5ID0geV9zdGFydDsgeSAhPT0geV9lbmQ7IHkgKz0geV9zdGVwKSB7XG4gICAgICAgIGZvciAoeCA9IHhfc3RhcnQ7IHggIT09IHhfZW5kOyB4ICs9IHhfc3RlcCwgaSArPSAyKSB7XG4gICAgICAgICAgY29sb3IgPSBpbWFnZVtpICsgMF0gKyAoaW1hZ2VbaSArIDFdIDw8IDgpIC8vIEludmVyc2VkID9cbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDBdID0gKGNvbG9yICYgMHg3YzAwKSA+PiA3XG4gICAgICAgICAgaW1hZ2VEYXRhWyh4ICsgd2lkdGggKiB5KSAqIDQgKyAxXSA9IChjb2xvciAmIDB4MDNlMCkgPj4gMlxuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgMl0gPSAoY29sb3IgJiAweDAwMWYpID4+IDNcbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDNdID0gY29sb3IgJiAweDgwMDAgPyAwIDogMjU1XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGltYWdlRGF0YVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRnYUdldEltYWdlRGF0YTI0Yml0cyhpbWFnZURhdGEsIHlfc3RhcnQsIHlfc3RlcCwgeV9lbmQsIHhfc3RhcnQsIHhfc3RlcCwgeF9lbmQsIGltYWdlKSB7XG4gICAgICBsZXQgaSA9IDAsXG4gICAgICAgIHgsXG4gICAgICAgIHlcbiAgICAgIGNvbnN0IHdpZHRoID0gaGVhZGVyLndpZHRoXG5cbiAgICAgIGZvciAoeSA9IHlfc3RhcnQ7IHkgIT09IHlfZW5kOyB5ICs9IHlfc3RlcCkge1xuICAgICAgICBmb3IgKHggPSB4X3N0YXJ0OyB4ICE9PSB4X2VuZDsgeCArPSB4X3N0ZXAsIGkgKz0gMykge1xuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgM10gPSAyNTVcbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDJdID0gaW1hZ2VbaSArIDBdXG4gICAgICAgICAgaW1hZ2VEYXRhWyh4ICsgd2lkdGggKiB5KSAqIDQgKyAxXSA9IGltYWdlW2kgKyAxXVxuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgMF0gPSBpbWFnZVtpICsgMl1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaW1hZ2VEYXRhXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdGdhR2V0SW1hZ2VEYXRhMzJiaXRzKGltYWdlRGF0YSwgeV9zdGFydCwgeV9zdGVwLCB5X2VuZCwgeF9zdGFydCwgeF9zdGVwLCB4X2VuZCwgaW1hZ2UpIHtcbiAgICAgIGxldCBpID0gMCxcbiAgICAgICAgeCxcbiAgICAgICAgeVxuICAgICAgY29uc3Qgd2lkdGggPSBoZWFkZXIud2lkdGhcblxuICAgICAgZm9yICh5ID0geV9zdGFydDsgeSAhPT0geV9lbmQ7IHkgKz0geV9zdGVwKSB7XG4gICAgICAgIGZvciAoeCA9IHhfc3RhcnQ7IHggIT09IHhfZW5kOyB4ICs9IHhfc3RlcCwgaSArPSA0KSB7XG4gICAgICAgICAgaW1hZ2VEYXRhWyh4ICsgd2lkdGggKiB5KSAqIDQgKyAyXSA9IGltYWdlW2kgKyAwXVxuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgMV0gPSBpbWFnZVtpICsgMV1cbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDBdID0gaW1hZ2VbaSArIDJdXG4gICAgICAgICAgaW1hZ2VEYXRhWyh4ICsgd2lkdGggKiB5KSAqIDQgKyAzXSA9IGltYWdlW2kgKyAzXVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbWFnZURhdGFcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0Z2FHZXRJbWFnZURhdGFHcmV5OGJpdHMoaW1hZ2VEYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSkge1xuICAgICAgbGV0IGNvbG9yLFxuICAgICAgICBpID0gMCxcbiAgICAgICAgeCxcbiAgICAgICAgeVxuICAgICAgY29uc3Qgd2lkdGggPSBoZWFkZXIud2lkdGhcblxuICAgICAgZm9yICh5ID0geV9zdGFydDsgeSAhPT0geV9lbmQ7IHkgKz0geV9zdGVwKSB7XG4gICAgICAgIGZvciAoeCA9IHhfc3RhcnQ7IHggIT09IHhfZW5kOyB4ICs9IHhfc3RlcCwgaSsrKSB7XG4gICAgICAgICAgY29sb3IgPSBpbWFnZVtpXVxuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgMF0gPSBjb2xvclxuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgMV0gPSBjb2xvclxuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgMl0gPSBjb2xvclxuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgM10gPSAyNTVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaW1hZ2VEYXRhXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdGdhR2V0SW1hZ2VEYXRhR3JleTE2Yml0cyhpbWFnZURhdGEsIHlfc3RhcnQsIHlfc3RlcCwgeV9lbmQsIHhfc3RhcnQsIHhfc3RlcCwgeF9lbmQsIGltYWdlKSB7XG4gICAgICBsZXQgaSA9IDAsXG4gICAgICAgIHgsXG4gICAgICAgIHlcbiAgICAgIGNvbnN0IHdpZHRoID0gaGVhZGVyLndpZHRoXG5cbiAgICAgIGZvciAoeSA9IHlfc3RhcnQ7IHkgIT09IHlfZW5kOyB5ICs9IHlfc3RlcCkge1xuICAgICAgICBmb3IgKHggPSB4X3N0YXJ0OyB4ICE9PSB4X2VuZDsgeCArPSB4X3N0ZXAsIGkgKz0gMikge1xuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgMF0gPSBpbWFnZVtpICsgMF1cbiAgICAgICAgICBpbWFnZURhdGFbKHggKyB3aWR0aCAqIHkpICogNCArIDFdID0gaW1hZ2VbaSArIDBdXG4gICAgICAgICAgaW1hZ2VEYXRhWyh4ICsgd2lkdGggKiB5KSAqIDQgKyAyXSA9IGltYWdlW2kgKyAwXVxuICAgICAgICAgIGltYWdlRGF0YVsoeCArIHdpZHRoICogeSkgKiA0ICsgM10gPSBpbWFnZVtpICsgMV1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaW1hZ2VEYXRhXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0VGdhUkdCQShkYXRhLCB3aWR0aCwgaGVpZ2h0LCBpbWFnZSwgcGFsZXR0ZSkge1xuICAgICAgbGV0IHhfc3RhcnQsIHlfc3RhcnQsIHhfc3RlcCwgeV9zdGVwLCB4X2VuZCwgeV9lbmRcblxuICAgICAgc3dpdGNoICgoaGVhZGVyLmZsYWdzICYgVEdBX09SSUdJTl9NQVNLKSA+PiBUR0FfT1JJR0lOX1NISUZUKSB7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNhc2UgVEdBX09SSUdJTl9VTDpcbiAgICAgICAgICB4X3N0YXJ0ID0gMFxuICAgICAgICAgIHhfc3RlcCA9IDFcbiAgICAgICAgICB4X2VuZCA9IHdpZHRoXG4gICAgICAgICAgeV9zdGFydCA9IDBcbiAgICAgICAgICB5X3N0ZXAgPSAxXG4gICAgICAgICAgeV9lbmQgPSBoZWlnaHRcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgVEdBX09SSUdJTl9CTDpcbiAgICAgICAgICB4X3N0YXJ0ID0gMFxuICAgICAgICAgIHhfc3RlcCA9IDFcbiAgICAgICAgICB4X2VuZCA9IHdpZHRoXG4gICAgICAgICAgeV9zdGFydCA9IGhlaWdodCAtIDFcbiAgICAgICAgICB5X3N0ZXAgPSAtMVxuICAgICAgICAgIHlfZW5kID0gLTFcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgVEdBX09SSUdJTl9VUjpcbiAgICAgICAgICB4X3N0YXJ0ID0gd2lkdGggLSAxXG4gICAgICAgICAgeF9zdGVwID0gLTFcbiAgICAgICAgICB4X2VuZCA9IC0xXG4gICAgICAgICAgeV9zdGFydCA9IDBcbiAgICAgICAgICB5X3N0ZXAgPSAxXG4gICAgICAgICAgeV9lbmQgPSBoZWlnaHRcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgVEdBX09SSUdJTl9CUjpcbiAgICAgICAgICB4X3N0YXJ0ID0gd2lkdGggLSAxXG4gICAgICAgICAgeF9zdGVwID0gLTFcbiAgICAgICAgICB4X2VuZCA9IC0xXG4gICAgICAgICAgeV9zdGFydCA9IGhlaWdodCAtIDFcbiAgICAgICAgICB5X3N0ZXAgPSAtMVxuICAgICAgICAgIHlfZW5kID0gLTFcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBpZiAodXNlX2dyZXkpIHtcbiAgICAgICAgc3dpdGNoIChoZWFkZXIucGl4ZWxfc2l6ZSkge1xuICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHRnYUdldEltYWdlRGF0YUdyZXk4Yml0cyhkYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSlcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlIDE2OlxuICAgICAgICAgICAgdGdhR2V0SW1hZ2VEYXRhR3JleTE2Yml0cyhkYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSlcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVEdBTG9hZGVyOiBGb3JtYXQgbm90IHN1cHBvcnRlZC4nKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpdGNoIChoZWFkZXIucGl4ZWxfc2l6ZSkge1xuICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHRnYUdldEltYWdlRGF0YThiaXRzKGRhdGEsIHlfc3RhcnQsIHlfc3RlcCwgeV9lbmQsIHhfc3RhcnQsIHhfc3RlcCwgeF9lbmQsIGltYWdlLCBwYWxldHRlKVxuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgMTY6XG4gICAgICAgICAgICB0Z2FHZXRJbWFnZURhdGExNmJpdHMoZGF0YSwgeV9zdGFydCwgeV9zdGVwLCB5X2VuZCwgeF9zdGFydCwgeF9zdGVwLCB4X2VuZCwgaW1hZ2UpXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAyNDpcbiAgICAgICAgICAgIHRnYUdldEltYWdlRGF0YTI0Yml0cyhkYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCBpbWFnZSlcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlIDMyOlxuICAgICAgICAgICAgdGdhR2V0SW1hZ2VEYXRhMzJiaXRzKGRhdGEsIHlfc3RhcnQsIHlfc3RlcCwgeV9lbmQsIHhfc3RhcnQsIHhfc3RlcCwgeF9lbmQsIGltYWdlKVxuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUR0FMb2FkZXI6IEZvcm1hdCBub3Qgc3VwcG9ydGVkLicpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIExvYWQgaW1hZ2UgZGF0YSBhY2NvcmRpbmcgdG8gc3BlY2lmaWMgbWV0aG9kXG4gICAgICAvLyBjb25zdCBmdW5jID0gJ3RnYUdldEltYWdlRGF0YScgKyAodXNlX2dyZXkgPyAnR3JleScgOiAnJykgKyAoaGVhZGVyLnBpeGVsX3NpemUpICsgJ2JpdHMnO1xuICAgICAgLy8gZnVuYyhkYXRhLCB5X3N0YXJ0LCB5X3N0ZXAsIHlfZW5kLCB4X3N0YXJ0LCB4X3N0ZXAsIHhfZW5kLCB3aWR0aCwgaW1hZ2UsIHBhbGV0dGUgKTtcbiAgICAgIHJldHVybiBkYXRhXG4gICAgfVxuXG4gICAgLy8gVEdBIGNvbnN0YW50c1xuXG4gICAgY29uc3QgVEdBX1RZUEVfTk9fREFUQSA9IDAsXG4gICAgICBUR0FfVFlQRV9JTkRFWEVEID0gMSxcbiAgICAgIFRHQV9UWVBFX1JHQiA9IDIsXG4gICAgICBUR0FfVFlQRV9HUkVZID0gMyxcbiAgICAgIFRHQV9UWVBFX1JMRV9JTkRFWEVEID0gOSxcbiAgICAgIFRHQV9UWVBFX1JMRV9SR0IgPSAxMCxcbiAgICAgIFRHQV9UWVBFX1JMRV9HUkVZID0gMTEsXG4gICAgICBUR0FfT1JJR0lOX01BU0sgPSAweDMwLFxuICAgICAgVEdBX09SSUdJTl9TSElGVCA9IDB4MDQsXG4gICAgICBUR0FfT1JJR0lOX0JMID0gMHgwMCxcbiAgICAgIFRHQV9PUklHSU5fQlIgPSAweDAxLFxuICAgICAgVEdBX09SSUdJTl9VTCA9IDB4MDIsXG4gICAgICBUR0FfT1JJR0lOX1VSID0gMHgwM1xuXG4gICAgaWYgKGJ1ZmZlci5sZW5ndGggPCAxOSkgY29uc29sZS5lcnJvcignVEdBTG9hZGVyOiBOb3QgZW5vdWdoIGRhdGEgdG8gY29udGFpbiBoZWFkZXIuJylcblxuICAgIGNvbnN0IGNvbnRlbnQgPSBuZXcgVWludDhBcnJheShidWZmZXIpXG4gICAgbGV0IG9mZnNldCA9IDBcbiAgICBjb25zdCBoZWFkZXIgPSB7XG4gICAgICBpZF9sZW5ndGg6IGNvbnRlbnRbb2Zmc2V0KytdLFxuICAgICAgY29sb3JtYXBfdHlwZTogY29udGVudFtvZmZzZXQrK10sXG4gICAgICBpbWFnZV90eXBlOiBjb250ZW50W29mZnNldCsrXSxcbiAgICAgIGNvbG9ybWFwX2luZGV4OiBjb250ZW50W29mZnNldCsrXSB8IChjb250ZW50W29mZnNldCsrXSA8PCA4KSxcbiAgICAgIGNvbG9ybWFwX2xlbmd0aDogY29udGVudFtvZmZzZXQrK10gfCAoY29udGVudFtvZmZzZXQrK10gPDwgOCksXG4gICAgICBjb2xvcm1hcF9zaXplOiBjb250ZW50W29mZnNldCsrXSxcbiAgICAgIG9yaWdpbjogW2NvbnRlbnRbb2Zmc2V0KytdIHwgKGNvbnRlbnRbb2Zmc2V0KytdIDw8IDgpLCBjb250ZW50W29mZnNldCsrXSB8IChjb250ZW50W29mZnNldCsrXSA8PCA4KV0sXG4gICAgICB3aWR0aDogY29udGVudFtvZmZzZXQrK10gfCAoY29udGVudFtvZmZzZXQrK10gPDwgOCksXG4gICAgICBoZWlnaHQ6IGNvbnRlbnRbb2Zmc2V0KytdIHwgKGNvbnRlbnRbb2Zmc2V0KytdIDw8IDgpLFxuICAgICAgcGl4ZWxfc2l6ZTogY29udGVudFtvZmZzZXQrK10sXG4gICAgICBmbGFnczogY29udGVudFtvZmZzZXQrK11cbiAgICB9XG5cbiAgICAvLyBjaGVjayB0Z2EgaWYgaXQgaXMgdmFsaWQgZm9ybWF0XG5cbiAgICB0Z2FDaGVja0hlYWRlcihoZWFkZXIpXG5cbiAgICBpZiAoaGVhZGVyLmlkX2xlbmd0aCArIG9mZnNldCA+IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1RHQUxvYWRlcjogTm8gZGF0YS4nKVxuICAgIH1cblxuICAgIC8vIHNraXAgdGhlIG5lZWRuJ3QgZGF0YVxuXG4gICAgb2Zmc2V0ICs9IGhlYWRlci5pZF9sZW5ndGhcblxuICAgIC8vIGdldCB0YXJnYSBpbmZvcm1hdGlvbiBhYm91dCBSTEUgY29tcHJlc3Npb24gYW5kIHBhbGV0dGVcblxuICAgIGxldCB1c2VfcmxlID0gZmFsc2UsXG4gICAgICB1c2VfcGFsID0gZmFsc2UsXG4gICAgICB1c2VfZ3JleSA9IGZhbHNlXG5cbiAgICBzd2l0Y2ggKGhlYWRlci5pbWFnZV90eXBlKSB7XG4gICAgICBjYXNlIFRHQV9UWVBFX1JMRV9JTkRFWEVEOlxuICAgICAgICB1c2VfcmxlID0gdHJ1ZVxuICAgICAgICB1c2VfcGFsID0gdHJ1ZVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIFRHQV9UWVBFX0lOREVYRUQ6XG4gICAgICAgIHVzZV9wYWwgPSB0cnVlXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgVEdBX1RZUEVfUkxFX1JHQjpcbiAgICAgICAgdXNlX3JsZSA9IHRydWVcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBUR0FfVFlQRV9SR0I6XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgVEdBX1RZUEVfUkxFX0dSRVk6XG4gICAgICAgIHVzZV9ybGUgPSB0cnVlXG4gICAgICAgIHVzZV9ncmV5ID0gdHJ1ZVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIFRHQV9UWVBFX0dSRVk6XG4gICAgICAgIHVzZV9ncmV5ID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIC8vXG5cbiAgICBjb25zdCB1c2VPZmZzY3JlZW4gPSB0eXBlb2YgT2Zmc2NyZWVuQ2FudmFzICE9PSAndW5kZWZpbmVkJ1xuXG4gICAgY29uc3QgY2FudmFzID0gdXNlT2Zmc2NyZWVuID8gbmV3IE9mZnNjcmVlbkNhbnZhcyhoZWFkZXIud2lkdGgsIGhlYWRlci5oZWlnaHQpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJylcbiAgICBjYW52YXMud2lkdGggPSBoZWFkZXIud2lkdGhcbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVhZGVyLmhlaWdodFxuXG4gICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG4gICAgY29uc3QgaW1hZ2VEYXRhID0gY29udGV4dC5jcmVhdGVJbWFnZURhdGEoaGVhZGVyLndpZHRoLCBoZWFkZXIuaGVpZ2h0KVxuXG4gICAgY29uc3QgcmVzdWx0ID0gdGdhUGFyc2UodXNlX3JsZSwgdXNlX3BhbCwgaGVhZGVyLCBvZmZzZXQsIGNvbnRlbnQpXG4gICAgY29uc3QgcmdiYURhdGEgPSBnZXRUZ2FSR0JBKGltYWdlRGF0YS5kYXRhLCBoZWFkZXIud2lkdGgsIGhlYWRlci5oZWlnaHQsIHJlc3VsdC5waXhlbF9kYXRhLCByZXN1bHQucGFsZXR0ZXMpXG5cbiAgICBjb250ZXh0LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApXG5cbiAgICByZXR1cm4gdXNlT2Zmc2NyZWVuID8gY2FudmFzLnRyYW5zZmVyVG9JbWFnZUJpdG1hcCgpIDogY2FudmFzXG4gIH1cblxuICAvKiogU2V0dGVyIG1ldGhvZCBmb3IgcGF0aCBQcm9wZXJ0eS4gKi9cbiAgc2V0UGF0aCh2YWx1ZSk6IFRHQUxvYWRlciB7XG4gICAgdGhpcy5wYXRoID0gdmFsdWVcbiAgICByZXR1cm4gdGhpc1xuICB9XG59XG4iLCIvLyBAdHMtbm9jaGVja1xuaW1wb3J0IHsgVmVjdG9yMywgVmVjdG9yNCB9IGZyb20gJ3RocmVlJ1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqXHROVVJCUyBVdGlsc1xuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4vKlxuRmluZHMga25vdCB2ZWN0b3Igc3Bhbi5cbnAgOiBkZWdyZWVcbnUgOiBwYXJhbWV0cmljIHZhbHVlXG5VIDoga25vdCB2ZWN0b3JcbnJldHVybnMgdGhlIHNwYW5cbiovXG5leHBvcnQgZnVuY3Rpb24gZmluZFNwYW4ocDogbnVtYmVyLCB1OiBudW1iZXIsIFU6IG51bWJlcltdKTogbnVtYmVyIHtcbiAgY29uc3QgbiA9IFUubGVuZ3RoIC0gcCAtIDFcblxuICBpZiAodSA+PSBVW25dKSB7XG4gICAgcmV0dXJuIG4gLSAxXG4gIH1cblxuICBpZiAodSA8PSBVW3BdKSB7XG4gICAgcmV0dXJuIHBcbiAgfVxuXG4gIGxldCBsb3cgPSBwXG4gIGxldCBoaWdoID0gblxuICBsZXQgbWlkID0gTWF0aC5mbG9vcigobG93ICsgaGlnaCkgLyAyKVxuXG4gIHdoaWxlICh1IDwgVVttaWRdIHx8IHUgPj0gVVttaWQgKyAxXSkge1xuICAgIGlmICh1IDwgVVttaWRdKSB7XG4gICAgICBoaWdoID0gbWlkXG4gICAgfSBlbHNlIHtcbiAgICAgIGxvdyA9IG1pZFxuICAgIH1cblxuICAgIG1pZCA9IE1hdGguZmxvb3IoKGxvdyArIGhpZ2gpIC8gMilcbiAgfVxuXG4gIHJldHVybiBtaWRcbn1cblxuLypcbkNhbGN1bGF0ZSBiYXNpcyBmdW5jdGlvbnMuIFNlZSBUaGUgTlVSQlMgQm9vaywgcGFnZSA3MCwgYWxnb3JpdGhtIEEyLjJcbnNwYW4gOiBzcGFuIGluIHdoaWNoIHUgbGllc1xudSAgICA6IHBhcmFtZXRyaWMgcG9pbnRcbnAgICAgOiBkZWdyZWVcblUgICAgOiBrbm90IHZlY3RvclxucmV0dXJucyBhcnJheVtwKzFdIHdpdGggYmFzaXMgZnVuY3Rpb25zIHZhbHVlcy5cbiovXG5leHBvcnQgZnVuY3Rpb24gY2FsY0Jhc2lzRnVuY3Rpb25zKHNwYW46IG51bWJlciwgdTogbnVtYmVyLCBwOiBudW1iZXIsIFU6IG51bWJlcltdKTogbnVtYmVyW10ge1xuICBjb25zdCBOID0gW11cbiAgY29uc3QgbGVmdCA9IFtdXG4gIGNvbnN0IHJpZ2h0ID0gW11cbiAgTlswXSA9IDEuMFxuXG4gIGZvciAobGV0IGogPSAxOyBqIDw9IHA7ICsraikge1xuICAgIGxlZnRbal0gPSB1IC0gVVtzcGFuICsgMSAtIGpdXG4gICAgcmlnaHRbal0gPSBVW3NwYW4gKyBqXSAtIHVcblxuICAgIGxldCBzYXZlZCA9IDAuMFxuXG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCBqOyArK3IpIHtcbiAgICAgIGNvbnN0IHJ2ID0gcmlnaHRbciArIDFdXG4gICAgICBjb25zdCBsdiA9IGxlZnRbaiAtIHJdXG4gICAgICBjb25zdCB0ZW1wID0gTltyXSAvIChydiArIGx2KVxuICAgICAgTltyXSA9IHNhdmVkICsgcnYgKiB0ZW1wXG4gICAgICBzYXZlZCA9IGx2ICogdGVtcFxuICAgIH1cblxuICAgIE5bal0gPSBzYXZlZFxuICB9XG5cbiAgcmV0dXJuIE5cbn1cblxuLypcbkNhbGN1bGF0ZSBCLVNwbGluZSBjdXJ2ZSBwb2ludHMuIFNlZSBUaGUgTlVSQlMgQm9vaywgcGFnZSA4MiwgYWxnb3JpdGhtIEEzLjEuXG5wIDogZGVncmVlIG9mIEItU3BsaW5lXG5VIDoga25vdCB2ZWN0b3JcblAgOiBjb250cm9sIHBvaW50cyAoeCwgeSwgeiwgdylcbnUgOiBwYXJhbWV0cmljIHBvaW50XG5yZXR1cm5zIHBvaW50IGZvciBnaXZlbiB1XG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGNCU3BsaW5lUG9pbnQocDogbnVtYmVyLCBVOiBudW1iZXJbXSwgUDogVmVjdG9yNFtdLCB1OiBudW1iZXIpOiBWZWN0b3I0IHtcbiAgY29uc3Qgc3BhbiA9IGZpbmRTcGFuKHAsIHUsIFUpXG4gIGNvbnN0IE4gPSBjYWxjQmFzaXNGdW5jdGlvbnMoc3BhbiwgdSwgcCwgVSlcbiAgY29uc3QgQyA9IG5ldyBWZWN0b3I0KDAsIDAsIDAsIDApXG5cbiAgZm9yIChsZXQgaiA9IDA7IGogPD0gcDsgKytqKSB7XG4gICAgY29uc3QgcG9pbnQgPSBQW3NwYW4gLSBwICsgal1cbiAgICBjb25zdCBOaiA9IE5bal1cbiAgICBjb25zdCB3TmogPSBwb2ludC53ICogTmpcbiAgICBDLnggKz0gcG9pbnQueCAqIHdOalxuICAgIEMueSArPSBwb2ludC55ICogd05qXG4gICAgQy56ICs9IHBvaW50LnogKiB3TmpcbiAgICBDLncgKz0gcG9pbnQudyAqIE5qXG4gIH1cblxuICByZXR1cm4gQ1xufVxuXG4vKlxuQ2FsY3VsYXRlIGJhc2lzIGZ1bmN0aW9ucyBkZXJpdmF0aXZlcy4gU2VlIFRoZSBOVVJCUyBCb29rLCBwYWdlIDcyLCBhbGdvcml0aG0gQTIuMy5cbnNwYW4gOiBzcGFuIGluIHdoaWNoIHUgbGllc1xudSAgICA6IHBhcmFtZXRyaWMgcG9pbnRcbnAgICAgOiBkZWdyZWVcbm4gICAgOiBudW1iZXIgb2YgZGVyaXZhdGl2ZXMgdG8gY2FsY3VsYXRlXG5VICAgIDoga25vdCB2ZWN0b3JcbnJldHVybnMgYXJyYXlbbisxXVtwKzFdIHdpdGggYmFzaXMgZnVuY3Rpb25zIGRlcml2YXRpdmVzXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGNCYXNpc0Z1bmN0aW9uRGVyaXZhdGl2ZXMoc3BhbjogbnVtYmVyLCB1OiBudW1iZXIsIHA6IG51bWJlciwgbjogbnVtYmVyLCBVOiBudW1iZXJbXSk6IG51bWJlcltdW10ge1xuICBjb25zdCB6ZXJvQXJyID0gW11cbiAgZm9yIChsZXQgaSA9IDA7IGkgPD0gcDsgKytpKSB6ZXJvQXJyW2ldID0gMC4wXG5cbiAgY29uc3QgZGVycyA9IFtdXG4gIGZvciAobGV0IGkgPSAwOyBpIDw9IG47ICsraSkgZGVyc1tpXSA9IHplcm9BcnIuc2xpY2UoMClcblxuICBjb25zdCBuZHUgPSBbXVxuICBmb3IgKGxldCBpID0gMDsgaSA8PSBwOyArK2kpIG5kdVtpXSA9IHplcm9BcnIuc2xpY2UoMClcblxuICBuZHVbMF1bMF0gPSAxLjBcblxuICBjb25zdCBsZWZ0ID0gemVyb0Fyci5zbGljZSgwKVxuICBjb25zdCByaWdodCA9IHplcm9BcnIuc2xpY2UoMClcblxuICBmb3IgKGxldCBqID0gMTsgaiA8PSBwOyArK2opIHtcbiAgICBsZWZ0W2pdID0gdSAtIFVbc3BhbiArIDEgLSBqXVxuICAgIHJpZ2h0W2pdID0gVVtzcGFuICsgal0gLSB1XG5cbiAgICBsZXQgc2F2ZWQgPSAwLjBcblxuICAgIGZvciAobGV0IHIgPSAwOyByIDwgajsgKytyKSB7XG4gICAgICBjb25zdCBydiA9IHJpZ2h0W3IgKyAxXVxuICAgICAgY29uc3QgbHYgPSBsZWZ0W2ogLSByXVxuICAgICAgbmR1W2pdW3JdID0gcnYgKyBsdlxuXG4gICAgICBjb25zdCB0ZW1wID0gbmR1W3JdW2ogLSAxXSAvIG5kdVtqXVtyXVxuICAgICAgbmR1W3JdW2pdID0gc2F2ZWQgKyBydiAqIHRlbXBcbiAgICAgIHNhdmVkID0gbHYgKiB0ZW1wXG4gICAgfVxuXG4gICAgbmR1W2pdW2pdID0gc2F2ZWRcbiAgfVxuXG4gIGZvciAobGV0IGogPSAwOyBqIDw9IHA7ICsraikge1xuICAgIGRlcnNbMF1bal0gPSBuZHVbal1bcF1cbiAgfVxuXG4gIGZvciAobGV0IHIgPSAwOyByIDw9IHA7ICsrcikge1xuICAgIGxldCBzMSA9IDBcbiAgICBsZXQgczIgPSAxXG5cbiAgICBjb25zdCBhID0gW11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBwOyArK2kpIHtcbiAgICAgIGFbaV0gPSB6ZXJvQXJyLnNsaWNlKDApXG4gICAgfVxuICAgIGFbMF1bMF0gPSAxLjBcblxuICAgIGZvciAobGV0IGsgPSAxOyBrIDw9IG47ICsraykge1xuICAgICAgbGV0IGQgPSAwLjBcbiAgICAgIGNvbnN0IHJrID0gciAtIGtcbiAgICAgIGNvbnN0IHBrID0gcCAtIGtcblxuICAgICAgaWYgKHIgPj0gaykge1xuICAgICAgICBhW3MyXVswXSA9IGFbczFdWzBdIC8gbmR1W3BrICsgMV1bcmtdXG4gICAgICAgIGQgPSBhW3MyXVswXSAqIG5kdVtya11bcGtdXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGoxID0gcmsgPj0gLTEgPyAxIDogLXJrXG4gICAgICBjb25zdCBqMiA9IHIgLSAxIDw9IHBrID8gayAtIDEgOiBwIC0gclxuXG4gICAgICBmb3IgKGxldCBqID0gajE7IGogPD0gajI7ICsraikge1xuICAgICAgICBhW3MyXVtqXSA9IChhW3MxXVtqXSAtIGFbczFdW2ogLSAxXSkgLyBuZHVbcGsgKyAxXVtyayArIGpdXG4gICAgICAgIGQgKz0gYVtzMl1bal0gKiBuZHVbcmsgKyBqXVtwa11cbiAgICAgIH1cblxuICAgICAgaWYgKHIgPD0gcGspIHtcbiAgICAgICAgYVtzMl1ba10gPSAtYVtzMV1bayAtIDFdIC8gbmR1W3BrICsgMV1bcl1cbiAgICAgICAgZCArPSBhW3MyXVtrXSAqIG5kdVtyXVtwa11cbiAgICAgIH1cblxuICAgICAgZGVyc1trXVtyXSA9IGRcblxuICAgICAgY29uc3QgaiA9IHMxXG4gICAgICBzMSA9IHMyXG4gICAgICBzMiA9IGpcbiAgICB9XG4gIH1cblxuICBsZXQgciA9IHBcblxuICBmb3IgKGxldCBrID0gMTsgayA8PSBuOyArK2spIHtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8PSBwOyArK2opIHtcbiAgICAgIGRlcnNba11bal0gKj0gclxuICAgIH1cbiAgICByICo9IHAgLSBrXG4gIH1cblxuICByZXR1cm4gZGVyc1xufVxuXG4vKlxuXHRDYWxjdWxhdGUgZGVyaXZhdGl2ZXMgb2YgYSBCLVNwbGluZS4gU2VlIFRoZSBOVVJCUyBCb29rLCBwYWdlIDkzLCBhbGdvcml0aG0gQTMuMi5cblx0cCAgOiBkZWdyZWVcblx0VSAgOiBrbm90IHZlY3RvclxuXHRQICA6IGNvbnRyb2wgcG9pbnRzXG5cdHUgIDogUGFyYW1ldHJpYyBwb2ludHNcblx0bmQgOiBudW1iZXIgb2YgZGVyaXZhdGl2ZXNcblx0cmV0dXJucyBhcnJheVtkKzFdIHdpdGggZGVyaXZhdGl2ZXNcblx0Ki9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjQlNwbGluZURlcml2YXRpdmVzKHA6IG51bWJlciwgVTogbnVtYmVyW10sIFA6IFZlY3RvcjRbXSwgdTogbnVtYmVyLCBuZDogbnVtYmVyKTogVmVjdG9yNFtdIHtcbiAgY29uc3QgZHUgPSBuZCA8IHAgPyBuZCA6IHBcbiAgY29uc3QgQ0sgPSBbXVxuICBjb25zdCBzcGFuID0gZmluZFNwYW4ocCwgdSwgVSlcbiAgY29uc3QgbmRlcnMgPSBjYWxjQmFzaXNGdW5jdGlvbkRlcml2YXRpdmVzKHNwYW4sIHUsIHAsIGR1LCBVKVxuICBjb25zdCBQdyA9IFtdXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBQLmxlbmd0aDsgKytpKSB7XG4gICAgY29uc3QgcG9pbnQgPSBQW2ldLmNsb25lKClcbiAgICBjb25zdCB3ID0gcG9pbnQud1xuXG4gICAgcG9pbnQueCAqPSB3XG4gICAgcG9pbnQueSAqPSB3XG4gICAgcG9pbnQueiAqPSB3XG5cbiAgICBQd1tpXSA9IHBvaW50XG4gIH1cbiAgZm9yIChsZXQgayA9IDA7IGsgPD0gZHU7ICsraykge1xuICAgIGNvbnN0IHBvaW50ID0gUHdbc3BhbiAtIHBdLmNsb25lKCkubXVsdGlwbHlTY2FsYXIobmRlcnNba11bMF0pXG5cbiAgICBmb3IgKGxldCBqID0gMTsgaiA8PSBwOyArK2opIHtcbiAgICAgIHBvaW50LmFkZChQd1tzcGFuIC0gcCArIGpdLmNsb25lKCkubXVsdGlwbHlTY2FsYXIobmRlcnNba11bal0pKVxuICAgIH1cblxuICAgIENLW2tdID0gcG9pbnRcbiAgfVxuXG4gIGZvciAobGV0IGsgPSBkdSArIDE7IGsgPD0gbmQgKyAxOyArK2spIHtcbiAgICBDS1trXSA9IG5ldyBWZWN0b3I0KDAsIDAsIDApXG4gIH1cblxuICByZXR1cm4gQ0tcbn1cblxuLypcbkNhbGN1bGF0ZSBcIksgb3ZlciBJXCJcbnJldHVybnMgayEvKGkhKGstaSkhKVxuKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjS292ZXJJKGs6IG51bWJlciwgaTogbnVtYmVyKTogbnVtYmVyIHtcbiAgbGV0IG5vbSA9IDFcblxuICBmb3IgKGxldCBqID0gMjsgaiA8PSBrOyArK2opIHtcbiAgICBub20gKj0galxuICB9XG5cbiAgbGV0IGRlbm9tID0gMVxuXG4gIGZvciAobGV0IGogPSAyOyBqIDw9IGk7ICsraikge1xuICAgIGRlbm9tICo9IGpcbiAgfVxuXG4gIGZvciAobGV0IGogPSAyOyBqIDw9IGsgLSBpOyArK2opIHtcbiAgICBkZW5vbSAqPSBqXG4gIH1cblxuICByZXR1cm4gbm9tIC8gZGVub21cbn1cblxuLypcbkNhbGN1bGF0ZSBkZXJpdmF0aXZlcyAoMC1uZCkgb2YgcmF0aW9uYWwgY3VydmUuIFNlZSBUaGUgTlVSQlMgQm9vaywgcGFnZSAxMjcsIGFsZ29yaXRobSBBNC4yLlxuUGRlcnMgOiByZXN1bHQgb2YgZnVuY3Rpb24gY2FsY0JTcGxpbmVEZXJpdmF0aXZlc1xucmV0dXJucyBhcnJheSB3aXRoIGRlcml2YXRpdmVzIGZvciByYXRpb25hbCBjdXJ2ZS5cbiovXG5leHBvcnQgZnVuY3Rpb24gY2FsY1JhdGlvbmFsQ3VydmVEZXJpdmF0aXZlcyhQZGVyczogVmVjdG9yNFtdKTogVmVjdG9yM1tdIHtcbiAgY29uc3QgbmQgPSBQZGVycy5sZW5ndGhcbiAgY29uc3QgQWRlcnMgPSBbXVxuICBjb25zdCB3ZGVycyA9IFtdXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZDsgKytpKSB7XG4gICAgY29uc3QgcG9pbnQgPSBQZGVyc1tpXVxuICAgIEFkZXJzW2ldID0gbmV3IFZlY3RvcjMocG9pbnQueCwgcG9pbnQueSwgcG9pbnQueilcbiAgICB3ZGVyc1tpXSA9IHBvaW50LndcbiAgfVxuXG4gIGNvbnN0IENLID0gW11cblxuICBmb3IgKGxldCBrID0gMDsgayA8IG5kOyArK2spIHtcbiAgICBjb25zdCB2ID0gQWRlcnNba10uY2xvbmUoKVxuXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gazsgKytpKSB7XG4gICAgICB2LnN1YihDS1trIC0gaV0uY2xvbmUoKS5tdWx0aXBseVNjYWxhcihjYWxjS292ZXJJKGssIGkpICogd2RlcnNbaV0pKVxuICAgIH1cblxuICAgIENLW2tdID0gdi5kaXZpZGVTY2FsYXIod2RlcnNbMF0pXG4gIH1cblxuICByZXR1cm4gQ0tcbn1cblxuLypcbkNhbGN1bGF0ZSBOVVJCUyBjdXJ2ZSBkZXJpdmF0aXZlcy4gU2VlIFRoZSBOVVJCUyBCb29rLCBwYWdlIDEyNywgYWxnb3JpdGhtIEE0LjIuXG5wICA6IGRlZ3JlZVxuVSAgOiBrbm90IHZlY3RvclxuUCAgOiBjb250cm9sIHBvaW50cyBpbiBob21vZ2VuZW91cyBzcGFjZVxudSAgOiBwYXJhbWV0cmljIHBvaW50c1xubmQgOiBudW1iZXIgb2YgZGVyaXZhdGl2ZXNcbnJldHVybnMgYXJyYXkgd2l0aCBkZXJpdmF0aXZlcy5cbiovXG5leHBvcnQgZnVuY3Rpb24gY2FsY05VUkJTRGVyaXZhdGl2ZXMocDogbnVtYmVyLCBVOiBudW1iZXJbXSwgUDogVmVjdG9yNFtdLCB1OiBudW1iZXIsIG5kOiBudW1iZXIpOiBWZWN0b3IzW10ge1xuICBjb25zdCBQZGVycyA9IGNhbGNCU3BsaW5lRGVyaXZhdGl2ZXMocCwgVSwgUCwgdSwgbmQpXG4gIHJldHVybiBjYWxjUmF0aW9uYWxDdXJ2ZURlcml2YXRpdmVzKFBkZXJzKVxufVxuXG4vKlxuQ2FsY3VsYXRlIHJhdGlvbmFsIEItU3BsaW5lIHN1cmZhY2UgcG9pbnQuIFNlZSBUaGUgTlVSQlMgQm9vaywgcGFnZSAxMzQsIGFsZ29yaXRobSBBNC4zLlxucDEsIHAyIDogZGVncmVlcyBvZiBCLVNwbGluZSBzdXJmYWNlXG5VMSwgVTIgOiBrbm90IHZlY3RvcnNcblAgICAgICA6IGNvbnRyb2wgcG9pbnRzICh4LCB5LCB6LCB3KVxudSwgdiAgIDogcGFyYW1ldHJpYyB2YWx1ZXNcbnJldHVybnMgcG9pbnQgZm9yIGdpdmVuICh1LCB2KVxuKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjU3VyZmFjZVBvaW50KFxuICBwOiBudW1iZXIsXG4gIHE6IG51bWJlcixcbiAgVTogbnVtYmVyW10sXG4gIFY6IG51bWJlcltdLFxuICBQOiBWZWN0b3I0W10sXG4gIHU6IG51bWJlcixcbiAgdjogbnVtYmVyLFxuICB0YXJnZXQ6IFZlY3RvcjNcbikge1xuICBjb25zdCB1c3BhbiA9IGZpbmRTcGFuKHAsIHUsIFUpXG4gIGNvbnN0IHZzcGFuID0gZmluZFNwYW4ocSwgdiwgVilcbiAgY29uc3QgTnUgPSBjYWxjQmFzaXNGdW5jdGlvbnModXNwYW4sIHUsIHAsIFUpXG4gIGNvbnN0IE52ID0gY2FsY0Jhc2lzRnVuY3Rpb25zKHZzcGFuLCB2LCBxLCBWKVxuICBjb25zdCB0ZW1wID0gW11cblxuICBmb3IgKGxldCBsID0gMDsgbCA8PSBxOyArK2wpIHtcbiAgICB0ZW1wW2xdID0gbmV3IFZlY3RvcjQoMCwgMCwgMCwgMClcbiAgICBmb3IgKGxldCBrID0gMDsgayA8PSBwOyArK2spIHtcbiAgICAgIGNvbnN0IHBvaW50ID0gUFt1c3BhbiAtIHAgKyBrXVt2c3BhbiAtIHEgKyBsXS5jbG9uZSgpXG4gICAgICBjb25zdCB3ID0gcG9pbnQud1xuICAgICAgcG9pbnQueCAqPSB3XG4gICAgICBwb2ludC55ICo9IHdcbiAgICAgIHBvaW50LnogKj0gd1xuICAgICAgdGVtcFtsXS5hZGQocG9pbnQubXVsdGlwbHlTY2FsYXIoTnVba10pKVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IFN3ID0gbmV3IFZlY3RvcjQoMCwgMCwgMCwgMClcbiAgZm9yIChsZXQgbCA9IDA7IGwgPD0gcTsgKytsKSB7XG4gICAgU3cuYWRkKHRlbXBbbF0ubXVsdGlwbHlTY2FsYXIoTnZbbF0pKVxuICB9XG5cbiAgU3cuZGl2aWRlU2NhbGFyKFN3LncpXG4gIHRhcmdldC5zZXQoU3cueCwgU3cueSwgU3cueilcbn1cbiIsImltcG9ydCB7IEN1cnZlLCBWZWN0b3IyLCBWZWN0b3IzLCBWZWN0b3I0IH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgKiBhcyBOVVJCU1V0aWxzIGZyb20gJy4vTlVSQlNVdGlscydcbi8qKlxuICogTlVSQlMgY3VydmUgb2JqZWN0XG4gKlxuICogRGVyaXZlcyBmcm9tIEN1cnZlLCBvdmVycmlkaW5nIGdldFBvaW50IGFuZCBnZXRUYW5nZW50LlxuICpcbiAqIEltcGxlbWVudGF0aW9uIGlzIGJhc2VkIG9uICh4LCB5IFssIHo9MCBbLCB3PTFdXSkgY29udHJvbCBwb2ludHMgd2l0aCB3PXdlaWdodC5cbiAqXG4gKiovXG5cbmV4cG9ydCBjbGFzcyBOVVJCU0N1cnZlIGV4dGVuZHMgQ3VydmU8VmVjdG9yMz4ge1xuICBkZWdyZWU6IG51bWJlclxuICBrbm90czogbnVtYmVyW11cbiAgY29udHJvbFBvaW50czogYW55W11cbiAgc3RhcnRLbm90OiBudW1iZXJcbiAgZW5kS25vdDogbnVtYmVyXG5cbiAgY29uc3RydWN0b3IoZGVncmVlOiBudW1iZXIsIGtub3RzOiBudW1iZXJbXSwgY29udHJvbFBvaW50czogVmVjdG9yNFtdLCBzdGFydEtub3Q6IG51bWJlciwgZW5kS25vdDogbnVtYmVyKSB7XG4gICAgc3VwZXIoKVxuICAgIHRoaXMuZGVncmVlID0gZGVncmVlXG4gICAgdGhpcy5rbm90cyA9IGtub3RzXG4gICAgdGhpcy5jb250cm9sUG9pbnRzID0gW11cbiAgICAvLyBVc2VkIGJ5IHBlcmlvZGljIE5VUkJTIHRvIHJlbW92ZSBoaWRkZW4gc3BhbnNcbiAgICB0aGlzLnN0YXJ0S25vdCA9IHN0YXJ0S25vdCB8fCAwXG4gICAgdGhpcy5lbmRLbm90ID0gZW5kS25vdCB8fCB0aGlzLmtub3RzLmxlbmd0aCAtIDFcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRyb2xQb2ludHMubGVuZ3RoOyArK2kpIHtcbiAgICAgIC8vIGVuc3VyZSBWZWN0b3I0IGZvciBjb250cm9sIHBvaW50c1xuICAgICAgY29uc3QgcG9pbnQgPSBjb250cm9sUG9pbnRzW2ldIGFzIFZlY3RvcjRcbiAgICAgIHRoaXMuY29udHJvbFBvaW50c1tpXSA9IG5ldyBWZWN0b3I0KHBvaW50LngsIHBvaW50LnksIHBvaW50LnosIHBvaW50LncpXG4gICAgfVxuICB9XG5cbiAgZ2V0UG9pbnQodCwgb3B0aW9uYWxUYXJnZXQ/KSB7XG4gICAgY29uc3QgcG9pbnQgPSBvcHRpb25hbFRhcmdldCB8fCBuZXcgVmVjdG9yMygpXG5cbiAgICBjb25zdCB1ID0gdGhpcy5rbm90c1t0aGlzLnN0YXJ0S25vdF0gKyB0ICogKHRoaXMua25vdHNbdGhpcy5lbmRLbm90XSAtIHRoaXMua25vdHNbdGhpcy5zdGFydEtub3RdKSAvLyBsaW5lYXIgbWFwcGluZyB0LT51XG5cbiAgICAvLyBmb2xsb3dpbmcgcmVzdWx0cyBpbiAod3gsIHd5LCB3eiwgdykgaG9tb2dlbmVvdXMgcG9pbnRcbiAgICBjb25zdCBocG9pbnQ6IGFueSA9IE5VUkJTVXRpbHMuY2FsY0JTcGxpbmVQb2ludCh0aGlzLmRlZ3JlZSwgdGhpcy5rbm90cywgdGhpcy5jb250cm9sUG9pbnRzLCB1KVxuXG4gICAgaWYgKGhwb2ludC53ICE9IDEuMCkge1xuICAgICAgLy8gcHJvamVjdCB0byAzRCBzcGFjZTogKHd4LCB3eSwgd3osIHcpIC0+ICh4LCB5LCB6LCAxKVxuICAgICAgaHBvaW50LmRpdmlkZVNjYWxhcihocG9pbnQudylcbiAgICB9XG5cbiAgICByZXR1cm4gcG9pbnQuc2V0KGhwb2ludC54LCBocG9pbnQueSwgaHBvaW50LnopXG4gIH1cblxuICBnZXRUYW5nZW50KHQsIG9wdGlvbmFsVGFyZ2V0Pykge1xuICAgIGNvbnN0IHRhbmdlbnQgPSBvcHRpb25hbFRhcmdldCB8fCBuZXcgVmVjdG9yMygpXG5cbiAgICBjb25zdCB1ID0gdGhpcy5rbm90c1swXSArIHQgKiAodGhpcy5rbm90c1t0aGlzLmtub3RzLmxlbmd0aCAtIDFdIC0gdGhpcy5rbm90c1swXSlcbiAgICBjb25zdCBkZXJzID0gTlVSQlNVdGlscy5jYWxjTlVSQlNEZXJpdmF0aXZlcyh0aGlzLmRlZ3JlZSwgdGhpcy5rbm90cywgdGhpcy5jb250cm9sUG9pbnRzLCB1LCAxKVxuICAgIHRhbmdlbnQuY29weShkZXJzWzFdKS5ub3JtYWxpemUoKVxuXG4gICAgcmV0dXJuIHRhbmdlbnRcbiAgfVxufVxuIiwiLyoqIEBsaWNlbnNlIHpsaWIuanMgMjAxMiAtIGltYXlhIFsgaHR0cHM6Ly9naXRodWIuY29tL2ltYXlhL3psaWIuanMgXSBUaGUgTUlUIExpY2Vuc2UgKi92YXIgbW9kPXt9LCBsPXZvaWQgMCxhYT1tb2Q7ZnVuY3Rpb24gcihjLGQpe3ZhciBhPWMuc3BsaXQoXCIuXCIpLGI9YWE7IShhWzBdaW4gYikmJmIuZXhlY1NjcmlwdCYmYi5leGVjU2NyaXB0KFwidmFyIFwiK2FbMF0pO2Zvcih2YXIgZTthLmxlbmd0aCYmKGU9YS5zaGlmdCgpKTspIWEubGVuZ3RoJiZkIT09bD9iW2VdPWQ6Yj1iW2VdP2JbZV06YltlXT17fX07dmFyIHQ9XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBVaW50OEFycmF5JiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIFVpbnQxNkFycmF5JiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIFVpbnQzMkFycmF5JiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIERhdGFWaWV3O2Z1bmN0aW9uIHYoYyl7dmFyIGQ9Yy5sZW5ndGgsYT0wLGI9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLGUsZixnLGgsayxtLG4scCxzLHg7Zm9yKHA9MDtwPGQ7KytwKWNbcF0+YSYmKGE9Y1twXSksY1twXTxiJiYoYj1jW3BdKTtlPTE8PGE7Zj1uZXcgKHQ/VWludDMyQXJyYXk6QXJyYXkpKGUpO2c9MTtoPTA7Zm9yKGs9MjtnPD1hOyl7Zm9yKHA9MDtwPGQ7KytwKWlmKGNbcF09PT1nKXttPTA7bj1oO2ZvcihzPTA7czxnOysrcyltPW08PDF8biYxLG4+Pj0xO3g9Zzw8MTZ8cDtmb3Iocz1tO3M8ZTtzKz1rKWZbc109eDsrK2h9KytnO2g8PD0xO2s8PD0xfXJldHVybltmLGEsYl19O2Z1bmN0aW9uIHcoYyxkKXt0aGlzLmc9W107dGhpcy5oPTMyNzY4O3RoaXMuZD10aGlzLmY9dGhpcy5hPXRoaXMubD0wO3RoaXMuaW5wdXQ9dD9uZXcgVWludDhBcnJheShjKTpjO3RoaXMubT0hMTt0aGlzLmk9eTt0aGlzLnI9ITE7aWYoZHx8IShkPXt9KSlkLmluZGV4JiYodGhpcy5hPWQuaW5kZXgpLGQuYnVmZmVyU2l6ZSYmKHRoaXMuaD1kLmJ1ZmZlclNpemUpLGQuYnVmZmVyVHlwZSYmKHRoaXMuaT1kLmJ1ZmZlclR5cGUpLGQucmVzaXplJiYodGhpcy5yPWQucmVzaXplKTtzd2l0Y2godGhpcy5pKXtjYXNlIEE6dGhpcy5iPTMyNzY4O3RoaXMuYz1uZXcgKHQ/VWludDhBcnJheTpBcnJheSkoMzI3NjgrdGhpcy5oKzI1OCk7YnJlYWs7Y2FzZSB5OnRoaXMuYj0wO3RoaXMuYz1uZXcgKHQ/VWludDhBcnJheTpBcnJheSkodGhpcy5oKTt0aGlzLmU9dGhpcy56O3RoaXMubj10aGlzLnY7dGhpcy5qPXRoaXMudzticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwiaW52YWxpZCBpbmZsYXRlIG1vZGVcIik7XG59fXZhciBBPTAseT0xLEI9e3Q6QSxzOnl9O1xudy5wcm90b3R5cGUuaz1mdW5jdGlvbigpe2Zvcig7IXRoaXMubTspe3ZhciBjPUModGhpcywzKTtjJjEmJih0aGlzLm09ITApO2M+Pj49MTtzd2l0Y2goYyl7Y2FzZSAwOnZhciBkPXRoaXMuaW5wdXQsYT10aGlzLmEsYj10aGlzLmMsZT10aGlzLmIsZj1kLmxlbmd0aCxnPWwsaD1sLGs9Yi5sZW5ndGgsbT1sO3RoaXMuZD10aGlzLmY9MDtpZihhKzE+PWYpdGhyb3cgRXJyb3IoXCJpbnZhbGlkIHVuY29tcHJlc3NlZCBibG9jayBoZWFkZXI6IExFTlwiKTtnPWRbYSsrXXxkW2ErK108PDg7aWYoYSsxPj1mKXRocm93IEVycm9yKFwiaW52YWxpZCB1bmNvbXByZXNzZWQgYmxvY2sgaGVhZGVyOiBOTEVOXCIpO2g9ZFthKytdfGRbYSsrXTw8ODtpZihnPT09fmgpdGhyb3cgRXJyb3IoXCJpbnZhbGlkIHVuY29tcHJlc3NlZCBibG9jayBoZWFkZXI6IGxlbmd0aCB2ZXJpZnlcIik7aWYoYStnPmQubGVuZ3RoKXRocm93IEVycm9yKFwiaW5wdXQgYnVmZmVyIGlzIGJyb2tlblwiKTtzd2l0Y2godGhpcy5pKXtjYXNlIEE6Zm9yKDtlK1xuZz5iLmxlbmd0aDspe209ay1lO2ctPW07aWYodCliLnNldChkLnN1YmFycmF5KGEsYSttKSxlKSxlKz1tLGErPW07ZWxzZSBmb3IoO20tLTspYltlKytdPWRbYSsrXTt0aGlzLmI9ZTtiPXRoaXMuZSgpO2U9dGhpcy5ifWJyZWFrO2Nhc2UgeTpmb3IoO2UrZz5iLmxlbmd0aDspYj10aGlzLmUoe3A6Mn0pO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJpbnZhbGlkIGluZmxhdGUgbW9kZVwiKTt9aWYodCliLnNldChkLnN1YmFycmF5KGEsYStnKSxlKSxlKz1nLGErPWc7ZWxzZSBmb3IoO2ctLTspYltlKytdPWRbYSsrXTt0aGlzLmE9YTt0aGlzLmI9ZTt0aGlzLmM9YjticmVhaztjYXNlIDE6dGhpcy5qKGJhLGNhKTticmVhaztjYXNlIDI6Zm9yKHZhciBuPUModGhpcyw1KSsyNTcscD1DKHRoaXMsNSkrMSxzPUModGhpcyw0KSs0LHg9bmV3ICh0P1VpbnQ4QXJyYXk6QXJyYXkpKEQubGVuZ3RoKSxTPWwsVD1sLFU9bCx1PWwsTT1sLEY9bCx6PWwscT1sLFY9bCxxPTA7cTxzOysrcSl4W0RbcV1dPVxuQyh0aGlzLDMpO2lmKCF0KXtxPXM7Zm9yKHM9eC5sZW5ndGg7cTxzOysrcSl4W0RbcV1dPTB9Uz12KHgpO3U9bmV3ICh0P1VpbnQ4QXJyYXk6QXJyYXkpKG4rcCk7cT0wO2ZvcihWPW4rcDtxPFY7KXN3aXRjaChNPUUodGhpcyxTKSxNKXtjYXNlIDE2OmZvcih6PTMrQyh0aGlzLDIpO3otLTspdVtxKytdPUY7YnJlYWs7Y2FzZSAxNzpmb3Ioej0zK0ModGhpcywzKTt6LS07KXVbcSsrXT0wO0Y9MDticmVhaztjYXNlIDE4OmZvcih6PTExK0ModGhpcyw3KTt6LS07KXVbcSsrXT0wO0Y9MDticmVhaztkZWZhdWx0OkY9dVtxKytdPU19VD10P3YodS5zdWJhcnJheSgwLG4pKTp2KHUuc2xpY2UoMCxuKSk7VT10P3YodS5zdWJhcnJheShuKSk6dih1LnNsaWNlKG4pKTt0aGlzLmooVCxVKTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwidW5rbm93biBCVFlQRTogXCIrYyk7fX1yZXR1cm4gdGhpcy5uKCl9O1xudmFyIEc9WzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdLEQ9dD9uZXcgVWludDE2QXJyYXkoRyk6RyxIPVszLDQsNSw2LDcsOCw5LDEwLDExLDEzLDE1LDE3LDE5LDIzLDI3LDMxLDM1LDQzLDUxLDU5LDY3LDgzLDk5LDExNSwxMzEsMTYzLDE5NSwyMjcsMjU4LDI1OCwyNThdLEk9dD9uZXcgVWludDE2QXJyYXkoSCk6SCxKPVswLDAsMCwwLDAsMCwwLDAsMSwxLDEsMSwyLDIsMiwyLDMsMywzLDMsNCw0LDQsNCw1LDUsNSw1LDAsMCwwXSxLPXQ/bmV3IFVpbnQ4QXJyYXkoSik6SixMPVsxLDIsMyw0LDUsNyw5LDEzLDE3LDI1LDMzLDQ5LDY1LDk3LDEyOSwxOTMsMjU3LDM4NSw1MTMsNzY5LDEwMjUsMTUzNywyMDQ5LDMwNzMsNDA5Nyw2MTQ1LDgxOTMsMTIyODksMTYzODUsMjQ1NzddLGRhPXQ/bmV3IFVpbnQxNkFycmF5KEwpOkwsZWE9WzAsMCwwLDAsMSwxLDIsMiwzLDMsNCw0LDUsNSw2LDYsNyw3LDgsOCw5LDksMTAsMTAsMTEsMTEsMTIsMTIsXG4xMywxM10sTj10P25ldyBVaW50OEFycmF5KGVhKTplYSxPPW5ldyAodD9VaW50OEFycmF5OkFycmF5KSgyODgpLFAsZmE7UD0wO2ZvcihmYT1PLmxlbmd0aDtQPGZhOysrUClPW1BdPTE0Mz49UD84OjI1NT49UD85OjI3OT49UD83Ojg7dmFyIGJhPXYoTyksUT1uZXcgKHQ/VWludDhBcnJheTpBcnJheSkoMzApLFIsZ2E7Uj0wO2ZvcihnYT1RLmxlbmd0aDtSPGdhOysrUilRW1JdPTU7dmFyIGNhPXYoUSk7ZnVuY3Rpb24gQyhjLGQpe2Zvcih2YXIgYT1jLmYsYj1jLmQsZT1jLmlucHV0LGY9Yy5hLGc9ZS5sZW5ndGgsaDtiPGQ7KXtpZihmPj1nKXRocm93IEVycm9yKFwiaW5wdXQgYnVmZmVyIGlzIGJyb2tlblwiKTthfD1lW2YrK108PGI7Yis9OH1oPWEmKDE8PGQpLTE7Yy5mPWE+Pj5kO2MuZD1iLWQ7Yy5hPWY7cmV0dXJuIGh9XG5mdW5jdGlvbiBFKGMsZCl7Zm9yKHZhciBhPWMuZixiPWMuZCxlPWMuaW5wdXQsZj1jLmEsZz1lLmxlbmd0aCxoPWRbMF0saz1kWzFdLG0sbjtiPGsmJiEoZj49Zyk7KWF8PWVbZisrXTw8YixiKz04O209aFthJigxPDxrKS0xXTtuPW0+Pj4xNjtpZihuPmIpdGhyb3cgRXJyb3IoXCJpbnZhbGlkIGNvZGUgbGVuZ3RoOiBcIituKTtjLmY9YT4+bjtjLmQ9Yi1uO2MuYT1mO3JldHVybiBtJjY1NTM1fVxudy5wcm90b3R5cGUuaj1mdW5jdGlvbihjLGQpe3ZhciBhPXRoaXMuYyxiPXRoaXMuYjt0aGlzLm89Yztmb3IodmFyIGU9YS5sZW5ndGgtMjU4LGYsZyxoLGs7MjU2IT09KGY9RSh0aGlzLGMpKTspaWYoMjU2PmYpYj49ZSYmKHRoaXMuYj1iLGE9dGhpcy5lKCksYj10aGlzLmIpLGFbYisrXT1mO2Vsc2V7Zz1mLTI1NztrPUlbZ107MDxLW2ddJiYoays9Qyh0aGlzLEtbZ10pKTtmPUUodGhpcyxkKTtoPWRhW2ZdOzA8TltmXSYmKGgrPUModGhpcyxOW2ZdKSk7Yj49ZSYmKHRoaXMuYj1iLGE9dGhpcy5lKCksYj10aGlzLmIpO2Zvcig7ay0tOylhW2JdPWFbYisrLWhdfWZvcig7ODw9dGhpcy5kOyl0aGlzLmQtPTgsdGhpcy5hLS07dGhpcy5iPWJ9O1xudy5wcm90b3R5cGUudz1mdW5jdGlvbihjLGQpe3ZhciBhPXRoaXMuYyxiPXRoaXMuYjt0aGlzLm89Yztmb3IodmFyIGU9YS5sZW5ndGgsZixnLGgsazsyNTYhPT0oZj1FKHRoaXMsYykpOylpZigyNTY+ZiliPj1lJiYoYT10aGlzLmUoKSxlPWEubGVuZ3RoKSxhW2IrK109ZjtlbHNle2c9Zi0yNTc7az1JW2ddOzA8S1tnXSYmKGsrPUModGhpcyxLW2ddKSk7Zj1FKHRoaXMsZCk7aD1kYVtmXTswPE5bZl0mJihoKz1DKHRoaXMsTltmXSkpO2Iraz5lJiYoYT10aGlzLmUoKSxlPWEubGVuZ3RoKTtmb3IoO2stLTspYVtiXT1hW2IrKy1oXX1mb3IoOzg8PXRoaXMuZDspdGhpcy5kLT04LHRoaXMuYS0tO3RoaXMuYj1ifTtcbncucHJvdG90eXBlLmU9ZnVuY3Rpb24oKXt2YXIgYz1uZXcgKHQ/VWludDhBcnJheTpBcnJheSkodGhpcy5iLTMyNzY4KSxkPXRoaXMuYi0zMjc2OCxhLGIsZT10aGlzLmM7aWYodCljLnNldChlLnN1YmFycmF5KDMyNzY4LGMubGVuZ3RoKSk7ZWxzZXthPTA7Zm9yKGI9Yy5sZW5ndGg7YTxiOysrYSljW2FdPWVbYSszMjc2OF19dGhpcy5nLnB1c2goYyk7dGhpcy5sKz1jLmxlbmd0aDtpZih0KWUuc2V0KGUuc3ViYXJyYXkoZCxkKzMyNzY4KSk7ZWxzZSBmb3IoYT0wOzMyNzY4PmE7KythKWVbYV09ZVtkK2FdO3RoaXMuYj0zMjc2ODtyZXR1cm4gZX07XG53LnByb3RvdHlwZS56PWZ1bmN0aW9uKGMpe3ZhciBkLGE9dGhpcy5pbnB1dC5sZW5ndGgvdGhpcy5hKzF8MCxiLGUsZixnPXRoaXMuaW5wdXQsaD10aGlzLmM7YyYmKFwibnVtYmVyXCI9PT10eXBlb2YgYy5wJiYoYT1jLnApLFwibnVtYmVyXCI9PT10eXBlb2YgYy51JiYoYSs9Yy51KSk7Mj5hPyhiPShnLmxlbmd0aC10aGlzLmEpL3RoaXMub1syXSxmPTI1OCooYi8yKXwwLGU9ZjxoLmxlbmd0aD9oLmxlbmd0aCtmOmgubGVuZ3RoPDwxKTplPWgubGVuZ3RoKmE7dD8oZD1uZXcgVWludDhBcnJheShlKSxkLnNldChoKSk6ZD1oO3JldHVybiB0aGlzLmM9ZH07XG53LnByb3RvdHlwZS5uPWZ1bmN0aW9uKCl7dmFyIGM9MCxkPXRoaXMuYyxhPXRoaXMuZyxiLGU9bmV3ICh0P1VpbnQ4QXJyYXk6QXJyYXkpKHRoaXMubCsodGhpcy5iLTMyNzY4KSksZixnLGgsaztpZigwPT09YS5sZW5ndGgpcmV0dXJuIHQ/dGhpcy5jLnN1YmFycmF5KDMyNzY4LHRoaXMuYik6dGhpcy5jLnNsaWNlKDMyNzY4LHRoaXMuYik7Zj0wO2ZvcihnPWEubGVuZ3RoO2Y8ZzsrK2Ype2I9YVtmXTtoPTA7Zm9yKGs9Yi5sZW5ndGg7aDxrOysraCllW2MrK109YltoXX1mPTMyNzY4O2ZvcihnPXRoaXMuYjtmPGc7KytmKWVbYysrXT1kW2ZdO3RoaXMuZz1bXTtyZXR1cm4gdGhpcy5idWZmZXI9ZX07XG53LnByb3RvdHlwZS52PWZ1bmN0aW9uKCl7dmFyIGMsZD10aGlzLmI7dD90aGlzLnI/KGM9bmV3IFVpbnQ4QXJyYXkoZCksYy5zZXQodGhpcy5jLnN1YmFycmF5KDAsZCkpKTpjPXRoaXMuYy5zdWJhcnJheSgwLGQpOih0aGlzLmMubGVuZ3RoPmQmJih0aGlzLmMubGVuZ3RoPWQpLGM9dGhpcy5jKTtyZXR1cm4gdGhpcy5idWZmZXI9Y307ZnVuY3Rpb24gVyhjLGQpe3ZhciBhLGI7dGhpcy5pbnB1dD1jO3RoaXMuYT0wO2lmKGR8fCEoZD17fSkpZC5pbmRleCYmKHRoaXMuYT1kLmluZGV4KSxkLnZlcmlmeSYmKHRoaXMuQT1kLnZlcmlmeSk7YT1jW3RoaXMuYSsrXTtiPWNbdGhpcy5hKytdO3N3aXRjaChhJjE1KXtjYXNlIGhhOnRoaXMubWV0aG9kPWhhO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJ1bnN1cHBvcnRlZCBjb21wcmVzc2lvbiBtZXRob2RcIik7fWlmKDAhPT0oKGE8PDgpK2IpJTMxKXRocm93IEVycm9yKFwiaW52YWxpZCBmY2hlY2sgZmxhZzpcIisoKGE8PDgpK2IpJTMxKTtpZihiJjMyKXRocm93IEVycm9yKFwiZmRpY3QgZmxhZyBpcyBub3Qgc3VwcG9ydGVkXCIpO3RoaXMucT1uZXcgdyhjLHtpbmRleDp0aGlzLmEsYnVmZmVyU2l6ZTpkLmJ1ZmZlclNpemUsYnVmZmVyVHlwZTpkLmJ1ZmZlclR5cGUscmVzaXplOmQucmVzaXplfSl9XG5XLnByb3RvdHlwZS5rPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5pbnB1dCxkLGE7ZD10aGlzLnEuaygpO3RoaXMuYT10aGlzLnEuYTtpZih0aGlzLkEpe2E9KGNbdGhpcy5hKytdPDwyNHxjW3RoaXMuYSsrXTw8MTZ8Y1t0aGlzLmErK108PDh8Y1t0aGlzLmErK10pPj4+MDt2YXIgYj1kO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYil7dmFyIGU9Yi5zcGxpdChcIlwiKSxmLGc7Zj0wO2ZvcihnPWUubGVuZ3RoO2Y8ZztmKyspZVtmXT0oZVtmXS5jaGFyQ29kZUF0KDApJjI1NSk+Pj4wO2I9ZX1mb3IodmFyIGg9MSxrPTAsbT1iLmxlbmd0aCxuLHA9MDswPG07KXtuPTEwMjQ8bT8xMDI0Om07bS09bjtkbyBoKz1iW3ArK10says9aDt3aGlsZSgtLW4pO2glPTY1NTIxO2slPTY1NTIxfWlmKGEhPT0oazw8MTZ8aCk+Pj4wKXRocm93IEVycm9yKFwiaW52YWxpZCBhZGxlci0zMiBjaGVja3N1bVwiKTt9cmV0dXJuIGR9O3ZhciBoYT04O3IoXCJabGliLkluZmxhdGVcIixXKTtyKFwiWmxpYi5JbmZsYXRlLnByb3RvdHlwZS5kZWNvbXByZXNzXCIsVy5wcm90b3R5cGUuayk7dmFyIFg9e0FEQVBUSVZFOkIucyxCTE9DSzpCLnR9LFksWiwkLGlhO2lmKE9iamVjdC5rZXlzKVk9T2JqZWN0LmtleXMoWCk7ZWxzZSBmb3IoWiBpbiBZPVtdLCQ9MCxYKVlbJCsrXT1aOyQ9MDtmb3IoaWE9WS5sZW5ndGg7JDxpYTsrKyQpWj1ZWyRdLHIoXCJabGliLkluZmxhdGUuQnVmZmVyVHlwZS5cIitaLFhbWl0pO1xudmFyIEluZmxhdGU9bW9kLlpsaWIuSW5mbGF0ZTtcbmV4cG9ydCB7IEluZmxhdGUgfTtcbiIsImltcG9ydCB7XG4gIFF1YXRlcm5pb24sXG4gIEFtYmllbnRMaWdodCxcbiAgQW5pbWF0aW9uQ2xpcCxcbiAgQm9uZSxcbiAgQnVmZmVyQXR0cmlidXRlLFxuICBCdWZmZXJHZW9tZXRyeSxcbiAgQ2xhbXBUb0VkZ2VXcmFwcGluZyxcbiAgQ29sb3IsXG4gIERlZmF1bHRMb2FkaW5nTWFuYWdlcixcbiAgTWF0aFV0aWxzLFxuICBEaXJlY3Rpb25hbExpZ2h0LFxuICBFcXVpcmVjdGFuZ3VsYXJSZWZsZWN0aW9uTWFwcGluZyxcbiAgRXVsZXIsXG4gIEZpbGVMb2FkZXIsXG4gIEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUsXG4gIEdyb3VwLFxuICBMaW5lLFxuICBMaW5lQmFzaWNNYXRlcmlhbCxcbiAgTG9hZGVyLFxuICBMb2FkZXJVdGlscyxcbiAgTWF0cml4MyxcbiAgTWF0cml4NCxcbiAgTWVzaCxcbiAgTWVzaExhbWJlcnRNYXRlcmlhbCxcbiAgTWVzaFBob25nTWF0ZXJpYWwsXG4gIE51bWJlcktleWZyYW1lVHJhY2ssXG4gIE9iamVjdDNELFxuICBPcnRob2dyYXBoaWNDYW1lcmEsXG4gIFBlcnNwZWN0aXZlQ2FtZXJhLFxuICBQb2ludExpZ2h0LFxuICBQcm9wZXJ0eUJpbmRpbmcsXG4gIFF1YXRlcm5pb25LZXlmcmFtZVRyYWNrLFxuICBSZXBlYXRXcmFwcGluZyxcbiAgU2tlbGV0b24sXG4gIFNraW5uZWRNZXNoLFxuICBTcG90TGlnaHQsXG4gIFRleHR1cmUsXG4gIFRleHR1cmVMb2FkZXIsXG4gIFVpbnQxNkJ1ZmZlckF0dHJpYnV0ZSxcbiAgVmVjdG9yMyxcbiAgVmVjdG9yNCxcbiAgVmVjdG9yS2V5ZnJhbWVUcmFjayxcbiAgTG9hZGluZ01hbmFnZXJcbn0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBUR0FMb2FkZXIgfSBmcm9tICcuLi90Z2EvVEdBTG9hZGVyJ1xuaW1wb3J0IHsgTlVSQlNDdXJ2ZSB9IGZyb20gJy4vTlVSQlNDdXJ2ZSdcbmltcG9ydCAqIGFzIFpsaWIgZnJvbSAnLi9pbmZsYXRlLm1vZHVsZS5taW4uanMnXG5cbmV4cG9ydCBjbGFzcyBGQlhMb2FkZXIge1xuICBzdGF0aWMgZmJ4VHJlZTogYW55XG4gIHN0YXRpYyBzY2VuZUdyYXBoOiBhbnlcbiAgc3RhdGljIGNvbm5lY3Rpb25zOiBhbnlcbiAgc3RhdGljIHNlcnZlclVybDogc3RyaW5nXG4gIGNyb3NzT3JpZ2luOiBhbnlcbiAgcmVzb3VyY2VQYXRoOiBhbnlcbiAgcGF0aDogYW55XG4gIG1hbmFnZXI6IGFueVxuXG4gIGNvbnN0cnVjdG9yKG1hbmFnZXI/OiBMb2FkaW5nTWFuYWdlcikge1xuICAgIHRoaXMubWFuYWdlciA9IG1hbmFnZXIgfHwgRGVmYXVsdExvYWRpbmdNYW5hZ2VyXG4gIH1cblxuICBsb2FkKHVybCwgb25Mb2FkLCBvblByb2dyZXNzPywgb25FcnJvcj8pIHtcbiAgICAvLyBjb25zdCBwYXRoID1cbiAgICAvLyAgIHRoaXMucGF0aCA9PT0gdW5kZWZpbmVkXG4gICAgLy8gICAgID8gTG9hZGVyVXRpbHMuZXh0cmFjdFVybEJhc2UodXJsKVxuICAgIC8vICAgICA6IHRoaXMucGF0aFxuXG4gICAgY29uc3QgdXJsUG9wID0gdXJsLnNwbGl0KCcvJykucG9wKClcblxuICAgIEZCWExvYWRlci5zZXJ2ZXJVcmwgPSB1cmwuc3BsaXQodXJsUG9wKVswXVxuXG4gICAgLy8gdGhyZWUg7JeQ7IScIHBhdGggKyB1cmwg66GcIO2YuOy2nO2VqFxuICAgIGNvbnN0IHBhdGggPSAnJ1xuXG4gICAgY29uc3QgbG9hZGVyID0gbmV3IEZpbGVMb2FkZXIodGhpcy5tYW5hZ2VyKVxuICAgIGxvYWRlci5zZXRQYXRoKHBhdGgpXG4gICAgbG9hZGVyLnNldFJlc3BvbnNlVHlwZSgnYXJyYXlidWZmZXInKVxuXG4gICAgbG9hZGVyLmxvYWQoXG4gICAgICB1cmwsXG4gICAgICAoYnVmZmVyKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgb25Mb2FkKHRoaXMucGFyc2UoYnVmZmVyLCBwYXRoKSlcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmIChvbkVycm9yKSBvbkVycm9yKGVycm9yKVxuICAgICAgICAgICAgdGhpcy5tYW5hZ2VyLml0ZW1FcnJvcih1cmwpXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbG9hZCBlcnJvcicsIGVycm9yKVxuICAgICAgICAgIH0sIDApXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvblByb2dyZXNzLFxuICAgICAgb25FcnJvclxuICAgIClcbiAgfVxuXG4gIHNldFBhdGgodmFsdWUpIHtcbiAgICB0aGlzLnBhdGggPSB2YWx1ZVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBzZXRSZXNvdXJjZVBhdGgodmFsdWUpIHtcbiAgICB0aGlzLnJlc291cmNlUGF0aCA9IHZhbHVlXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHNldENyb3NzT3JpZ2luKHZhbHVlKSB7XG4gICAgdGhpcy5jcm9zc09yaWdpbiA9IHZhbHVlXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHBhcnNlKEZCWEJ1ZmZlciwgcGF0aCkge1xuICAgIGlmIChpc0ZieEZvcm1hdEJpbmFyeShGQlhCdWZmZXIpKSB7XG4gICAgICBGQlhMb2FkZXIuZmJ4VHJlZSA9IG5ldyBCaW5hcnlQYXJzZXIoKS5wYXJzZShGQlhCdWZmZXIpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IEZCWFRleHQgPSBjb252ZXJ0QXJyYXlCdWZmZXJUb1N0cmluZyhGQlhCdWZmZXIpXG5cbiAgICAgIGlmICghaXNGYnhGb3JtYXRBU0NJSShGQlhUZXh0KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZCWExvYWRlcjogVW5rbm93biBmb3JtYXQuJylcbiAgICAgIH1cblxuICAgICAgaWYgKGdldEZieFZlcnNpb24oRkJYVGV4dCkgPCA3MDAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRkJYTG9hZGVyOiBGQlggdmVyc2lvbiBub3Qgc3VwcG9ydGVkLCBGaWxlVmVyc2lvbjogJyArIGdldEZieFZlcnNpb24oRkJYVGV4dCkpXG4gICAgICB9XG5cbiAgICAgIEZCWExvYWRlci5mYnhUcmVlID0gbmV3IFRleHRQYXJzZXIoKS5wYXJzZShGQlhUZXh0KVxuICAgIH1cblxuICAgIGNvbnN0IHRleHR1cmVMb2FkZXIgPSBuZXcgVGV4dHVyZUxvYWRlcih0aGlzLm1hbmFnZXIpXG4gICAgICAuc2V0UGF0aCh0aGlzLnJlc291cmNlUGF0aCB8fCBwYXRoKVxuICAgICAgLnNldENyb3NzT3JpZ2luKHRoaXMuY3Jvc3NPcmlnaW4pXG5cbiAgICByZXR1cm4gbmV3IEZCWFRyZWVQYXJzZXIodGV4dHVyZUxvYWRlcikucGFyc2UoRkJYTG9hZGVyLmZieFRyZWUpXG4gIH1cbn1cblxuaW50ZXJmYWNlIEZCWFRyZWVQYXJzZXJJbnRlcmZhY2Uge1xuICB0ZXh0dXJlTG9hZGVyOiBhbnlcbn1cblxuY2xhc3MgRkJYVHJlZVBhcnNlcjxGQlhUcmVlUGFyc2VySW50ZXJmYWNlPiB7XG4gIHRleHR1cmVMb2FkZXI6IGFueVxuICBjb25zdHJ1Y3Rvcih0ZXh0dXJlTG9hZGVyKSB7XG4gICAgdGhpcy50ZXh0dXJlTG9hZGVyID0gdGV4dHVyZUxvYWRlclxuICB9XG5cbiAgcGFyc2UoZmJ4VHJlZSkge1xuICAgIEZCWExvYWRlci5jb25uZWN0aW9ucyA9IHRoaXMucGFyc2VDb25uZWN0aW9ucygpXG5cbiAgICBjb25zdCBpbWFnZXMgPSB0aGlzLnBhcnNlSW1hZ2VzKClcbiAgICBjb25zdCB0ZXh0dXJlcyA9IHRoaXMucGFyc2VUZXh0dXJlcyhpbWFnZXMpXG4gICAgY29uc3QgbWF0ZXJpYWxzID0gdGhpcy5wYXJzZU1hdGVyaWFscyh0ZXh0dXJlcylcbiAgICBjb25zdCBkZWZvcm1lcnMgPSB0aGlzLnBhcnNlRGVmb3JtZXJzKClcbiAgICBjb25zdCBnZW9tZXRyeU1hcCA9IG5ldyBHZW9tZXRyeVBhcnNlcigpLnBhcnNlKGRlZm9ybWVycylcblxuICAgIHRoaXMucGFyc2VTY2VuZShkZWZvcm1lcnMsIGdlb21ldHJ5TWFwLCBtYXRlcmlhbHMpXG5cbiAgICByZXR1cm4gRkJYTG9hZGVyLnNjZW5lR3JhcGhcbiAgfVxuXG4gIHBhcnNlQ29ubmVjdGlvbnMoKSB7XG4gICAgY29uc3QgY29ubmVjdGlvbk1hcCA9IG5ldyBNYXAoKVxuXG4gICAgaWYgKCdDb25uZWN0aW9ucycgaW4gRkJYTG9hZGVyLmZieFRyZWUpIHtcbiAgICAgIGNvbnN0IHJhd0Nvbm5lY3Rpb25zID0gRkJYTG9hZGVyLmZieFRyZWUuQ29ubmVjdGlvbnMuY29ubmVjdGlvbnNcblxuICAgICAgcmF3Q29ubmVjdGlvbnMuZm9yRWFjaCgocmF3Q29ubmVjdGlvbikgPT4ge1xuICAgICAgICBjb25zdCBmcm9tSUQgPSByYXdDb25uZWN0aW9uWzBdXG4gICAgICAgIGNvbnN0IHRvSUQgPSByYXdDb25uZWN0aW9uWzFdXG4gICAgICAgIGNvbnN0IHJlbGF0aW9uc2hpcCA9IHJhd0Nvbm5lY3Rpb25bMl1cblxuICAgICAgICBpZiAoIWNvbm5lY3Rpb25NYXAuaGFzKGZyb21JRCkpIHtcbiAgICAgICAgICBjb25uZWN0aW9uTWFwLnNldChmcm9tSUQsIHtcbiAgICAgICAgICAgIHBhcmVudHM6IFtdLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtdXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBhcmVudFJlbGF0aW9uc2hpcCA9IHsgSUQ6IHRvSUQsIHJlbGF0aW9uc2hpcDogcmVsYXRpb25zaGlwIH1cbiAgICAgICAgY29ubmVjdGlvbk1hcC5nZXQoZnJvbUlEKS5wYXJlbnRzLnB1c2gocGFyZW50UmVsYXRpb25zaGlwKVxuXG4gICAgICAgIGlmICghY29ubmVjdGlvbk1hcC5oYXModG9JRCkpIHtcbiAgICAgICAgICBjb25uZWN0aW9uTWFwLnNldCh0b0lELCB7XG4gICAgICAgICAgICBwYXJlbnRzOiBbXSxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbXVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjaGlsZFJlbGF0aW9uc2hpcCA9IHsgSUQ6IGZyb21JRCwgcmVsYXRpb25zaGlwOiByZWxhdGlvbnNoaXAgfVxuICAgICAgICBjb25uZWN0aW9uTWFwLmdldCh0b0lEKS5jaGlsZHJlbi5wdXNoKGNoaWxkUmVsYXRpb25zaGlwKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gY29ubmVjdGlvbk1hcFxuICB9XG5cbiAgcGFyc2VJbWFnZXMoKSB7XG4gICAgY29uc3QgaW1hZ2VzID0ge31cbiAgICBjb25zdCBibG9icyA9IHt9XG5cbiAgICBpZiAoJ1ZpZGVvJyBpbiBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzKSB7XG4gICAgICBjb25zdCB2aWRlb05vZGVzID0gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cy5WaWRlb1xuXG4gICAgICBmb3IgKGNvbnN0IG5vZGVJRCBpbiB2aWRlb05vZGVzKSB7XG4gICAgICAgIGNvbnN0IHZpZGVvTm9kZSA9IHZpZGVvTm9kZXNbbm9kZUlEXVxuXG4gICAgICAgIGNvbnN0IGlkID0gcGFyc2VJbnQobm9kZUlEKVxuXG4gICAgICAgIGNvbnN0IGl0ZW1OYW1lID0gdmlkZW9Ob2RlLlJlbGF0aXZlRmlsZW5hbWUuc3BsaXQoJ1xcXFwnKS5wb3AoKSB8fCB2aWRlb05vZGUuRmlsZW5hbWUuc3BsaXQoJ1xcXFwnKS5wb3AoKVxuXG4gICAgICAgIGltYWdlc1tpZF0gPSBgJHtGQlhMb2FkZXIuc2VydmVyVXJsfSR7aXRlbU5hbWV9YFxuXG4gICAgICAgIC8vIHJhdyBpbWFnZSBkYXRhIGlzIGluIHZpZGVvTm9kZS5Db250ZW50XG4gICAgICAgIGlmICgnQ29udGVudCcgaW4gdmlkZW9Ob2RlKSB7XG4gICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXJDb250ZW50ID0gdmlkZW9Ob2RlLkNvbnRlbnQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciAmJiB2aWRlb05vZGUuQ29udGVudC5ieXRlTGVuZ3RoID4gMFxuICAgICAgICAgIGNvbnN0IGJhc2U2NENvbnRlbnQgPSB0eXBlb2YgdmlkZW9Ob2RlLkNvbnRlbnQgPT09ICdzdHJpbmcnICYmIHZpZGVvTm9kZS5Db250ZW50ICE9PSAnJ1xuXG4gICAgICAgICAgaWYgKGFycmF5QnVmZmVyQ29udGVudCB8fCBiYXNlNjRDb250ZW50KSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZSA9IHRoaXMucGFyc2VJbWFnZSh2aWRlb05vZGVzW25vZGVJRF0pXG5cbiAgICAgICAgICAgIGJsb2JzW3ZpZGVvTm9kZS5SZWxhdGl2ZUZpbGVuYW1lIHx8IHZpZGVvTm9kZS5GaWxlbmFtZV0gPSBpbWFnZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgaWQgaW4gaW1hZ2VzKSB7XG4gICAgICBjb25zdCBmaWxlbmFtZSA9IGltYWdlc1tpZF1cblxuICAgICAgaWYgKGJsb2JzW2ZpbGVuYW1lXSAhPT0gdW5kZWZpbmVkKSBpbWFnZXNbaWRdID0gYmxvYnNbZmlsZW5hbWVdXG4gICAgICBlbHNlIGltYWdlc1tpZF0gPSBpbWFnZXNbaWRdLnNwbGl0KCdcXFxcJykucG9wKClcbiAgICB9XG5cbiAgICByZXR1cm4gaW1hZ2VzXG4gIH1cblxuICBwYXJzZUltYWdlKHZpZGVvTm9kZSkge1xuICAgIGNvbnN0IGNvbnRlbnQgPSB2aWRlb05vZGUuQ29udGVudFxuICAgIGNvbnN0IGZpbGVOYW1lID0gdmlkZW9Ob2RlLlJlbGF0aXZlRmlsZW5hbWUgfHwgdmlkZW9Ob2RlLkZpbGVuYW1lXG4gICAgY29uc3QgZXh0ZW5zaW9uID0gZmlsZU5hbWUuc2xpY2UoZmlsZU5hbWUubGFzdEluZGV4T2YoJy4nKSArIDEpLnRvTG93ZXJDYXNlKClcblxuICAgIGxldCB0eXBlXG5cbiAgICBzd2l0Y2ggKGV4dGVuc2lvbikge1xuICAgICAgY2FzZSAnYm1wJzpcbiAgICAgICAgdHlwZSA9ICdpbWFnZS9ibXAnXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ2pwZyc6XG4gICAgICBjYXNlICdqcGVnJzpcbiAgICAgICAgdHlwZSA9ICdpbWFnZS9qcGVnJ1xuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdwbmcnOlxuICAgICAgICB0eXBlID0gJ2ltYWdlL3BuZydcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAndGlmJzpcbiAgICAgICAgdHlwZSA9ICdpbWFnZS90aWZmJ1xuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICd0Z2EnOlxuICAgICAgICBpZiAodHlwZW9mIG5ldyBUR0FMb2FkZXIoKSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGNvbnNvbGUud2FybignRkJYTG9hZGVyOiBUR0FMb2FkZXIgaXMgcmVxdWlyZWQgdG8gbG9hZCBUR0EgdGV4dHVyZXMnKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0aGlzLnRleHR1cmVMb2FkZXIubWFuYWdlci5nZXRIYW5kbGVyKCcudGdhJykgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHRnYUxvYWRlciA9IG5ldyBUR0FMb2FkZXIoKVxuICAgICAgICAgICAgdGdhTG9hZGVyLnNldFBhdGgodGhpcy50ZXh0dXJlTG9hZGVyLnBhdGgpXG5cbiAgICAgICAgICAgIHRoaXMudGV4dHVyZUxvYWRlci5tYW5hZ2VyLmFkZEhhbmRsZXIoL1xcLnRnYSQvaSwgdGdhTG9hZGVyKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHR5cGUgPSAnaW1hZ2UvdGdhJ1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29uc29sZS53YXJuKCdGQlhMb2FkZXI6IEltYWdlIHR5cGUgXCInICsgZXh0ZW5zaW9uICsgJ1wiIGlzIG5vdCBzdXBwb3J0ZWQuJylcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gQVNDSUkgZm9ybWF0XG4gICAgICByZXR1cm4gJ2RhdGE6JyArIHR5cGUgKyAnO2Jhc2U2NCwnICsgY29udGVudFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBCaW5hcnkgRm9ybWF0XG4gICAgICBjb25zdCBhcnJheSA9IG5ldyBVaW50OEFycmF5KGNvbnRlbnQpXG4gICAgICByZXR1cm4gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW2FycmF5XSwgeyB0eXBlOiB0eXBlIH0pKVxuICAgIH1cbiAgfVxuXG4gIHBhcnNlVGV4dHVyZXMoaW1hZ2VzKSB7XG4gICAgY29uc3QgdGV4dHVyZU1hcCA9IG5ldyBNYXAoKVxuXG4gICAgaWYgKCdUZXh0dXJlJyBpbiBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzKSB7XG4gICAgICBjb25zdCB0ZXh0dXJlTm9kZXMgPSBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzLlRleHR1cmVcbiAgICAgIGZvciAoY29uc3Qgbm9kZUlEIGluIHRleHR1cmVOb2Rlcykge1xuICAgICAgICBjb25zdCB0ZXh0dXJlID0gdGhpcy5wYXJzZVRleHR1cmUodGV4dHVyZU5vZGVzW25vZGVJRF0sIGltYWdlcylcbiAgICAgICAgdGV4dHVyZU1hcC5zZXQocGFyc2VJbnQobm9kZUlEKSwgdGV4dHVyZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGV4dHVyZU1hcFxuICB9XG5cbiAgcGFyc2VUZXh0dXJlKHRleHR1cmVOb2RlLCBpbWFnZXMpIHtcbiAgICBjb25zdCB0ZXh0dXJlID0gdGhpcy5sb2FkVGV4dHVyZSh0ZXh0dXJlTm9kZSwgaW1hZ2VzKVxuXG4gICAgdGV4dHVyZS5JRCA9IHRleHR1cmVOb2RlLmlkXG5cbiAgICB0ZXh0dXJlLm5hbWUgPSB0ZXh0dXJlTm9kZS5hdHRyTmFtZVxuXG4gICAgY29uc3Qgd3JhcE1vZGVVID0gdGV4dHVyZU5vZGUuV3JhcE1vZGVVXG4gICAgY29uc3Qgd3JhcE1vZGVWID0gdGV4dHVyZU5vZGUuV3JhcE1vZGVWXG5cbiAgICBjb25zdCB2YWx1ZVUgPSB3cmFwTW9kZVUgIT09IHVuZGVmaW5lZCA/IHdyYXBNb2RlVS52YWx1ZSA6IDBcbiAgICBjb25zdCB2YWx1ZVYgPSB3cmFwTW9kZVYgIT09IHVuZGVmaW5lZCA/IHdyYXBNb2RlVi52YWx1ZSA6IDBcblxuICAgIC8vIGh0dHA6Ly9kb3dubG9hZC5hdXRvZGVzay5jb20vdXMvZmJ4L1NES2RvY3MvRkJYX1NES19IZWxwL2ZpbGVzL2ZieHNka3JlZi9jbGFzc19rX2ZieF90ZXh0dXJlLmh0bWwjODg5NjQwZTYzZTJlNjgxMjU5ZWE4MTA2MWI4NTE0M2FcbiAgICAvLyAwOiByZXBlYXQoZGVmYXVsdCksIDE6IGNsYW1wXG5cbiAgICB0ZXh0dXJlLndyYXBTID0gdmFsdWVVID09PSAwID8gUmVwZWF0V3JhcHBpbmcgOiBDbGFtcFRvRWRnZVdyYXBwaW5nXG4gICAgdGV4dHVyZS53cmFwVCA9IHZhbHVlViA9PT0gMCA/IFJlcGVhdFdyYXBwaW5nIDogQ2xhbXBUb0VkZ2VXcmFwcGluZ1xuXG4gICAgaWYgKCdTY2FsaW5nJyBpbiB0ZXh0dXJlTm9kZSkge1xuICAgICAgY29uc3QgdmFsdWVzID0gdGV4dHVyZU5vZGUuU2NhbGluZy52YWx1ZVxuXG4gICAgICB0ZXh0dXJlLnJlcGVhdC54ID0gdmFsdWVzWzBdXG4gICAgICB0ZXh0dXJlLnJlcGVhdC55ID0gdmFsdWVzWzFdXG4gICAgfVxuXG4gICAgcmV0dXJuIHRleHR1cmVcbiAgfVxuXG4gIGxvYWRUZXh0dXJlKHRleHR1cmVOb2RlLCBpbWFnZXMpIHtcbiAgICBsZXQgZmlsZU5hbWVcbiAgICBjb25zdCBjdXJyZW50UGF0aCA9IHRoaXMudGV4dHVyZUxvYWRlci5wYXRoXG4gICAgY29uc3QgY2hpbGRyZW4gPSBGQlhMb2FkZXIuY29ubmVjdGlvbnMuZ2V0KHRleHR1cmVOb2RlLmlkKS5jaGlsZHJlblxuXG4gICAgaWYgKGNoaWxkcmVuICE9PSB1bmRlZmluZWQgJiYgY2hpbGRyZW4ubGVuZ3RoID4gMCAmJiBpbWFnZXNbY2hpbGRyZW5bMF0uSURdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGZpbGVOYW1lID0gaW1hZ2VzW2NoaWxkcmVuWzBdLklEXVxuXG4gICAgICBpZiAoZmlsZU5hbWUuaW5kZXhPZignYmxvYjonKSA9PT0gMCB8fCBmaWxlTmFtZS5pbmRleE9mKCdkYXRhOicpID09PSAwKSB7XG4gICAgICAgIHRoaXMudGV4dHVyZUxvYWRlci5zZXRQYXRoKHVuZGVmaW5lZClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgdGV4dHVyZVxuXG4gICAgY29uc3QgZXh0ZW5zaW9uID0gdGV4dHVyZU5vZGUuRmlsZU5hbWUuc2xpY2UoLTMpLnRvTG93ZXJDYXNlKClcblxuICAgIGlmIChleHRlbnNpb24gPT09ICd0Z2EnKSB7XG4gICAgICBjb25zdCBsb2FkZXIgPSB0aGlzLnRleHR1cmVMb2FkZXIuZ2V0SGFuZGxlcignLnRnYScpXG5cbiAgICAgIGlmIChsb2FkZXIgPT09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdGQlhMb2FkZXI6IFRHQUxvYWRlciBub3QgZm91bmQsIGNyZWF0aW5nIGVtcHR5IHBsYWNlaG9sZGVyIHRleHR1cmUgZm9yJywgZmlsZU5hbWUpXG4gICAgICAgIHRleHR1cmUgPSBuZXcgVGV4dHVyZSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0ZXh0dXJlID0gbG9hZGVyLmxvYWQoZmlsZU5hbWUpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChleHRlbnNpb24gPT09ICdwc2QnKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0ZCWExvYWRlcjogUFNEIHRleHR1cmVzIGFyZSBub3Qgc3VwcG9ydGVkLCBjcmVhdGluZyBlbXB0eSBwbGFjZWhvbGRlciB0ZXh0dXJlIGZvcicsIGZpbGVOYW1lKVxuICAgICAgdGV4dHVyZSA9IG5ldyBUZXh0dXJlKClcbiAgICB9IGVsc2Uge1xuICAgICAgdGV4dHVyZSA9IHRoaXMudGV4dHVyZUxvYWRlci5sb2FkKGZpbGVOYW1lKVxuICAgIH1cblxuICAgIHRoaXMudGV4dHVyZUxvYWRlci5zZXRQYXRoKGN1cnJlbnRQYXRoKVxuXG4gICAgcmV0dXJuIHRleHR1cmVcbiAgfVxuXG4gIHBhcnNlTWF0ZXJpYWxzKHRleHR1cmVNYXApIHtcbiAgICBjb25zdCBtYXRlcmlhbE1hcCA9IG5ldyBNYXAoKVxuXG4gICAgaWYgKCdNYXRlcmlhbCcgaW4gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cykge1xuICAgICAgY29uc3QgbWF0ZXJpYWxOb2RlcyA9IEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMuTWF0ZXJpYWxcblxuICAgICAgZm9yIChjb25zdCBub2RlSUQgaW4gbWF0ZXJpYWxOb2Rlcykge1xuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMucGFyc2VNYXRlcmlhbChtYXRlcmlhbE5vZGVzW25vZGVJRF0sIHRleHR1cmVNYXApXG5cbiAgICAgICAgaWYgKG1hdGVyaWFsICE9PSBudWxsKSBtYXRlcmlhbE1hcC5zZXQocGFyc2VJbnQobm9kZUlEKSwgbWF0ZXJpYWwpXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hdGVyaWFsTWFwXG4gIH1cblxuICBwYXJzZU1hdGVyaWFsKG1hdGVyaWFsTm9kZSwgdGV4dHVyZU1hcCkge1xuICAgIGNvbnN0IElEID0gbWF0ZXJpYWxOb2RlLmlkXG4gICAgY29uc3QgbmFtZSA9IG1hdGVyaWFsTm9kZS5hdHRyTmFtZVxuICAgIGxldCB0eXBlID0gbWF0ZXJpYWxOb2RlLlNoYWRpbmdNb2RlbFxuXG4gICAgLy8gQ2FzZSB3aGVyZSBGQlggd3JhcHMgc2hhZGluZyBtb2RlbCBpbiBwcm9wZXJ0eSBvYmplY3QuXG4gICAgaWYgKHR5cGVvZiB0eXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgdHlwZSA9IHR5cGUudmFsdWVcbiAgICB9XG5cbiAgICAvLyBJZ25vcmUgdW51c2VkIG1hdGVyaWFscyB3aGljaCBkb24ndCBoYXZlIGFueSBjb25uZWN0aW9ucy5cbiAgICBpZiAoIUZCWExvYWRlci5jb25uZWN0aW9ucy5oYXMoSUQpKSByZXR1cm4gbnVsbFxuXG4gICAgY29uc3QgcGFyYW1ldGVycyA9IHRoaXMucGFyc2VQYXJhbWV0ZXJzKG1hdGVyaWFsTm9kZSwgdGV4dHVyZU1hcCwgSUQpXG5cbiAgICBsZXQgbWF0ZXJpYWxcblxuICAgIHN3aXRjaCAodHlwZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdwaG9uZyc6XG4gICAgICAgIG1hdGVyaWFsID0gbmV3IE1lc2hQaG9uZ01hdGVyaWFsKClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2xhbWJlcnQnOlxuICAgICAgICBtYXRlcmlhbCA9IG5ldyBNZXNoTGFtYmVydE1hdGVyaWFsKClcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnNvbGUud2FybignRkJYTG9hZGVyOiB1bmtub3duIG1hdGVyaWFsIHR5cGUgXCIlc1wiLiBEZWZhdWx0aW5nIHRvIE1lc2hQaG9uZ01hdGVyaWFsLicsIHR5cGUpXG4gICAgICAgIG1hdGVyaWFsID0gbmV3IE1lc2hQaG9uZ01hdGVyaWFsKClcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBtYXRlcmlhbC5zZXRWYWx1ZXMocGFyYW1ldGVycylcbiAgICBtYXRlcmlhbC5uYW1lID0gbmFtZVxuXG4gICAgcmV0dXJuIG1hdGVyaWFsXG4gIH1cblxuICBwYXJzZVBhcmFtZXRlcnMobWF0ZXJpYWxOb2RlLCB0ZXh0dXJlTWFwLCBJRCkge1xuICAgIGNvbnN0IHBhcmFtZXRlcnM6IGFueSA9IHt9XG5cbiAgICBpZiAobWF0ZXJpYWxOb2RlLkJ1bXBGYWN0b3IpIHtcbiAgICAgIHBhcmFtZXRlcnMuYnVtcFNjYWxlID0gbWF0ZXJpYWxOb2RlLkJ1bXBGYWN0b3IudmFsdWVcbiAgICB9XG4gICAgaWYgKG1hdGVyaWFsTm9kZS5EaWZmdXNlKSB7XG4gICAgICBwYXJhbWV0ZXJzLmNvbG9yID0gbmV3IENvbG9yKCkuZnJvbUFycmF5KG1hdGVyaWFsTm9kZS5EaWZmdXNlLnZhbHVlKVxuICAgIH0gZWxzZSBpZiAobWF0ZXJpYWxOb2RlLkRpZmZ1c2VDb2xvciAmJiBtYXRlcmlhbE5vZGUuRGlmZnVzZUNvbG9yLnR5cGUgPT09ICdDb2xvcicpIHtcbiAgICAgIC8vIFRoZSBibGVuZGVyIGV4cG9ydGVyIGV4cG9ydHMgZGlmZnVzZSBoZXJlIGluc3RlYWQgb2YgaW4gbWF0ZXJpYWxOb2RlLkRpZmZ1c2VcbiAgICAgIHBhcmFtZXRlcnMuY29sb3IgPSBuZXcgQ29sb3IoKS5mcm9tQXJyYXkobWF0ZXJpYWxOb2RlLkRpZmZ1c2VDb2xvci52YWx1ZSlcbiAgICB9XG5cbiAgICBpZiAobWF0ZXJpYWxOb2RlLkRpc3BsYWNlbWVudEZhY3Rvcikge1xuICAgICAgcGFyYW1ldGVycy5kaXNwbGFjZW1lbnRTY2FsZSA9IG1hdGVyaWFsTm9kZS5EaXNwbGFjZW1lbnRGYWN0b3IudmFsdWVcbiAgICB9XG5cbiAgICBpZiAobWF0ZXJpYWxOb2RlLkVtaXNzaXZlKSB7XG4gICAgICBwYXJhbWV0ZXJzLmVtaXNzaXZlID0gbmV3IENvbG9yKCkuZnJvbUFycmF5KG1hdGVyaWFsTm9kZS5FbWlzc2l2ZS52YWx1ZSlcbiAgICB9IGVsc2UgaWYgKG1hdGVyaWFsTm9kZS5FbWlzc2l2ZUNvbG9yICYmIG1hdGVyaWFsTm9kZS5FbWlzc2l2ZUNvbG9yLnR5cGUgPT09ICdDb2xvcicpIHtcbiAgICAgIC8vIFRoZSBibGVuZGVyIGV4cG9ydGVyIGV4cG9ydHMgZW1pc3NpdmUgY29sb3IgaGVyZSBpbnN0ZWFkIG9mIGluIG1hdGVyaWFsTm9kZS5FbWlzc2l2ZVxuICAgICAgcGFyYW1ldGVycy5lbWlzc2l2ZSA9IG5ldyBDb2xvcigpLmZyb21BcnJheShtYXRlcmlhbE5vZGUuRW1pc3NpdmVDb2xvci52YWx1ZSlcbiAgICB9XG5cbiAgICBpZiAobWF0ZXJpYWxOb2RlLkVtaXNzaXZlRmFjdG9yKSB7XG4gICAgICBwYXJhbWV0ZXJzLmVtaXNzaXZlSW50ZW5zaXR5ID0gcGFyc2VGbG9hdChtYXRlcmlhbE5vZGUuRW1pc3NpdmVGYWN0b3IudmFsdWUpXG4gICAgfVxuXG4gICAgaWYgKG1hdGVyaWFsTm9kZS5PcGFjaXR5KSB7XG4gICAgICBwYXJhbWV0ZXJzLm9wYWNpdHkgPSBwYXJzZUZsb2F0KG1hdGVyaWFsTm9kZS5PcGFjaXR5LnZhbHVlKVxuICAgIH1cblxuICAgIGlmIChwYXJhbWV0ZXJzLm9wYWNpdHkgPCAxLjApIHtcbiAgICAgIHBhcmFtZXRlcnMudHJhbnNwYXJlbnQgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKG1hdGVyaWFsTm9kZS5SZWZsZWN0aW9uRmFjdG9yKSB7XG4gICAgICBwYXJhbWV0ZXJzLnJlZmxlY3Rpdml0eSA9IG1hdGVyaWFsTm9kZS5SZWZsZWN0aW9uRmFjdG9yLnZhbHVlXG4gICAgfVxuXG4gICAgaWYgKG1hdGVyaWFsTm9kZS5TaGluaW5lc3MpIHtcbiAgICAgIHBhcmFtZXRlcnMuc2hpbmluZXNzID0gbWF0ZXJpYWxOb2RlLlNoaW5pbmVzcy52YWx1ZVxuICAgIH1cblxuICAgIGlmIChtYXRlcmlhbE5vZGUuU3BlY3VsYXIpIHtcbiAgICAgIHBhcmFtZXRlcnMuc3BlY3VsYXIgPSBuZXcgQ29sb3IoKS5mcm9tQXJyYXkobWF0ZXJpYWxOb2RlLlNwZWN1bGFyLnZhbHVlKVxuICAgIH0gZWxzZSBpZiAobWF0ZXJpYWxOb2RlLlNwZWN1bGFyQ29sb3IgJiYgbWF0ZXJpYWxOb2RlLlNwZWN1bGFyQ29sb3IudHlwZSA9PT0gJ0NvbG9yJykge1xuICAgICAgLy8gVGhlIGJsZW5kZXIgZXhwb3J0ZXIgZXhwb3J0cyBzcGVjdWxhciBjb2xvciBoZXJlIGluc3RlYWQgb2YgaW4gbWF0ZXJpYWxOb2RlLlNwZWN1bGFyXG4gICAgICBwYXJhbWV0ZXJzLnNwZWN1bGFyID0gbmV3IENvbG9yKCkuZnJvbUFycmF5KG1hdGVyaWFsTm9kZS5TcGVjdWxhckNvbG9yLnZhbHVlKVxuICAgIH1cblxuICAgIEZCWExvYWRlci5jb25uZWN0aW9ucy5nZXQoSUQpLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICBjb25zdCB0eXBlID0gY2hpbGQucmVsYXRpb25zaGlwXG5cbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdCdW1wJzpcbiAgICAgICAgICBwYXJhbWV0ZXJzLmJ1bXBNYXAgPSB0aGlzLmdldFRleHR1cmUodGV4dHVyZU1hcCwgY2hpbGQuSUQpXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdNYXlhfFRFWF9hb19tYXAnOlxuICAgICAgICAgIHBhcmFtZXRlcnMuYW9NYXAgPSB0aGlzLmdldFRleHR1cmUodGV4dHVyZU1hcCwgY2hpbGQuSUQpXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdEaWZmdXNlQ29sb3InOlxuICAgICAgICBjYXNlICdNYXlhfFRFWF9jb2xvcl9tYXAnOlxuICAgICAgICAgIHBhcmFtZXRlcnMubWFwID0gdGhpcy5nZXRUZXh0dXJlKHRleHR1cmVNYXAsIGNoaWxkLklEKVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnRGlzcGxhY2VtZW50Q29sb3InOlxuICAgICAgICAgIHBhcmFtZXRlcnMuZGlzcGxhY2VtZW50TWFwID0gdGhpcy5nZXRUZXh0dXJlKHRleHR1cmVNYXAsIGNoaWxkLklEKVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnRW1pc3NpdmVDb2xvcic6XG4gICAgICAgICAgcGFyYW1ldGVycy5lbWlzc2l2ZU1hcCA9IHRoaXMuZ2V0VGV4dHVyZSh0ZXh0dXJlTWFwLCBjaGlsZC5JRClcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ05vcm1hbE1hcCc6XG4gICAgICAgIGNhc2UgJ01heWF8VEVYX25vcm1hbF9tYXAnOlxuICAgICAgICAgIHBhcmFtZXRlcnMubm9ybWFsTWFwID0gdGhpcy5nZXRUZXh0dXJlKHRleHR1cmVNYXAsIGNoaWxkLklEKVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnUmVmbGVjdGlvbkNvbG9yJzpcbiAgICAgICAgICBwYXJhbWV0ZXJzLmVudk1hcCA9IHRoaXMuZ2V0VGV4dHVyZSh0ZXh0dXJlTWFwLCBjaGlsZC5JRClcbiAgICAgICAgICBwYXJhbWV0ZXJzLmVudk1hcC5tYXBwaW5nID0gRXF1aXJlY3Rhbmd1bGFyUmVmbGVjdGlvbk1hcHBpbmdcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ1NwZWN1bGFyQ29sb3InOlxuICAgICAgICAgIHBhcmFtZXRlcnMuc3BlY3VsYXJNYXAgPSB0aGlzLmdldFRleHR1cmUodGV4dHVyZU1hcCwgY2hpbGQuSUQpXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdUcmFuc3BhcmVudENvbG9yJzpcbiAgICAgICAgICBwYXJhbWV0ZXJzLmFscGhhTWFwID0gdGhpcy5nZXRUZXh0dXJlKHRleHR1cmVNYXAsIGNoaWxkLklEKVxuICAgICAgICAgIHBhcmFtZXRlcnMudHJhbnNwYXJlbnQgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdBbWJpZW50Q29sb3InOlxuICAgICAgICBjYXNlICdTaGluaW5lc3NFeHBvbmVudCc6IC8vIEFLQSBnbG9zc2luZXNzIG1hcFxuICAgICAgICBjYXNlICdTcGVjdWxhckZhY3Rvcic6IC8vIEFLQSBzcGVjdWxhckxldmVsXG4gICAgICAgIGNhc2UgJ1ZlY3RvckRpc3BsYWNlbWVudENvbG9yJzogLy8gTk9URTogU2VlbXMgdG8gYmUgYSBjb3B5IG9mIERpc3BsYWNlbWVudENvbG9yXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29uc29sZS53YXJuKCdGQlhMb2FkZXI6ICVzIG1hcCBpcyBub3Qgc3VwcG9ydGVkIGluIGpzLCBza2lwcGluZyB0ZXh0dXJlLicsIHR5cGUpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIHBhcmFtZXRlcnNcbiAgfVxuXG4gIGdldFRleHR1cmUodGV4dHVyZU1hcCwgaWQpIHtcbiAgICAvLyBpZiB0aGUgdGV4dHVyZSBpcyBhIGxheWVyZWQgdGV4dHVyZSwganVzdCB1c2UgdGhlIGZpcnN0IGxheWVyIGFuZCBpc3N1ZSBhIHdhcm5pbmdcbiAgICBpZiAoJ0xheWVyZWRUZXh0dXJlJyBpbiBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzICYmIGlkIGluIEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMuTGF5ZXJlZFRleHR1cmUpIHtcbiAgICAgIGNvbnNvbGUud2FybignRkJYTG9hZGVyOiBsYXllcmVkIHRleHR1cmVzIGFyZSBub3Qgc3VwcG9ydGVkIGluIGpzLiBEaXNjYXJkaW5nIGFsbCBidXQgZmlyc3QgbGF5ZXIuJylcbiAgICAgIGlkID0gRkJYTG9hZGVyLmNvbm5lY3Rpb25zLmdldChpZCkuY2hpbGRyZW5bMF0uSURcbiAgICB9XG5cbiAgICByZXR1cm4gdGV4dHVyZU1hcC5nZXQoaWQpXG4gIH1cblxuICBwYXJzZURlZm9ybWVycygpIHtcbiAgICBjb25zdCBza2VsZXRvbnM6IGFueSA9IHt9XG4gICAgY29uc3QgbW9ycGhUYXJnZXRzOiBhbnkgPSB7fVxuXG4gICAgaWYgKCdEZWZvcm1lcicgaW4gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cykge1xuICAgICAgY29uc3QgRGVmb3JtZXJOb2RlcyA9IEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMuRGVmb3JtZXJcblxuICAgICAgZm9yIChjb25zdCBub2RlSUQgaW4gRGVmb3JtZXJOb2Rlcykge1xuICAgICAgICBjb25zdCBkZWZvcm1lck5vZGUgPSBEZWZvcm1lck5vZGVzW25vZGVJRF1cblxuICAgICAgICBjb25zdCByZWxhdGlvbnNoaXBzID0gRkJYTG9hZGVyLmNvbm5lY3Rpb25zLmdldChwYXJzZUludChub2RlSUQpKVxuXG4gICAgICAgIGlmIChkZWZvcm1lck5vZGUuYXR0clR5cGUgPT09ICdTa2luJykge1xuICAgICAgICAgIGNvbnN0IHNrZWxldG9uOiBhbnkgPSB0aGlzLnBhcnNlU2tlbGV0b24ocmVsYXRpb25zaGlwcywgRGVmb3JtZXJOb2RlcylcbiAgICAgICAgICBza2VsZXRvbi5JRCA9IG5vZGVJRFxuXG4gICAgICAgICAgaWYgKHJlbGF0aW9uc2hpcHMucGFyZW50cy5sZW5ndGggPiAxKVxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdGQlhMb2FkZXI6IHNrZWxldG9uIGF0dGFjaGVkIHRvIG1vcmUgdGhhbiBvbmUgZ2VvbWV0cnkgaXMgbm90IHN1cHBvcnRlZC4nKVxuICAgICAgICAgIHNrZWxldG9uLmdlb21ldHJ5SUQgPSByZWxhdGlvbnNoaXBzLnBhcmVudHNbMF0uSURcblxuICAgICAgICAgIHNrZWxldG9uc1tub2RlSURdID0gc2tlbGV0b25cbiAgICAgICAgfSBlbHNlIGlmIChkZWZvcm1lck5vZGUuYXR0clR5cGUgPT09ICdCbGVuZFNoYXBlJykge1xuICAgICAgICAgIGNvbnN0IG1vcnBoVGFyZ2V0OiBhbnkgPSB7XG4gICAgICAgICAgICBpZDogbm9kZUlEXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbW9ycGhUYXJnZXQucmF3VGFyZ2V0cyA9IHRoaXMucGFyc2VNb3JwaFRhcmdldHMocmVsYXRpb25zaGlwcywgRGVmb3JtZXJOb2RlcylcbiAgICAgICAgICBtb3JwaFRhcmdldC5pZCA9IG5vZGVJRFxuXG4gICAgICAgICAgaWYgKHJlbGF0aW9uc2hpcHMucGFyZW50cy5sZW5ndGggPiAxKVxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdGQlhMb2FkZXI6IG1vcnBoIHRhcmdldCBhdHRhY2hlZCB0byBtb3JlIHRoYW4gb25lIGdlb21ldHJ5IGlzIG5vdCBzdXBwb3J0ZWQuJylcblxuICAgICAgICAgIG1vcnBoVGFyZ2V0c1tub2RlSURdID0gbW9ycGhUYXJnZXRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBza2VsZXRvbnM6IHNrZWxldG9ucyxcbiAgICAgIG1vcnBoVGFyZ2V0czogbW9ycGhUYXJnZXRzXG4gICAgfVxuICB9XG5cbiAgcGFyc2VTa2VsZXRvbihyZWxhdGlvbnNoaXBzLCBkZWZvcm1lck5vZGVzKSB7XG4gICAgY29uc3QgcmF3Qm9uZXM6IGFueSA9IFtdXG5cbiAgICByZWxhdGlvbnNoaXBzLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICBjb25zdCBib25lTm9kZSA9IGRlZm9ybWVyTm9kZXNbY2hpbGQuSURdXG5cbiAgICAgIGlmIChib25lTm9kZS5hdHRyVHlwZSAhPT0gJ0NsdXN0ZXInKSByZXR1cm5cblxuICAgICAgY29uc3QgcmF3Qm9uZSA9IHtcbiAgICAgICAgSUQ6IGNoaWxkLklELFxuICAgICAgICBpbmRpY2VzOiBbXSxcbiAgICAgICAgd2VpZ2h0czogW10sXG4gICAgICAgIHRyYW5zZm9ybUxpbms6IG5ldyBNYXRyaXg0KCkuZnJvbUFycmF5KGJvbmVOb2RlLlRyYW5zZm9ybUxpbmsuYSlcbiAgICAgICAgLy8gdHJhbnNmb3JtOiBuZXcgTWF0cml4NCgpLmZyb21BcnJheSggYm9uZU5vZGUuVHJhbnNmb3JtLmEgKSxcbiAgICAgICAgLy8gbGlua01vZGU6IGJvbmVOb2RlLk1vZGUsXG4gICAgICB9XG5cbiAgICAgIGlmICgnSW5kZXhlcycgaW4gYm9uZU5vZGUpIHtcbiAgICAgICAgcmF3Qm9uZS5pbmRpY2VzID0gYm9uZU5vZGUuSW5kZXhlcy5hXG4gICAgICAgIHJhd0JvbmUud2VpZ2h0cyA9IGJvbmVOb2RlLldlaWdodHMuYVxuICAgICAgfVxuXG4gICAgICByYXdCb25lcy5wdXNoKHJhd0JvbmUpXG4gICAgfSlcblxuICAgIHJldHVybiB7XG4gICAgICByYXdCb25lczogcmF3Qm9uZXMsXG4gICAgICBib25lczogW11cbiAgICB9XG4gIH1cblxuICBwYXJzZU1vcnBoVGFyZ2V0cyhyZWxhdGlvbnNoaXBzLCBkZWZvcm1lck5vZGVzKSB7XG4gICAgY29uc3QgcmF3TW9ycGhUYXJnZXRzOiBhbnkgPSBbXVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWxhdGlvbnNoaXBzLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IHJlbGF0aW9uc2hpcHMuY2hpbGRyZW5baV1cblxuICAgICAgY29uc3QgbW9ycGhUYXJnZXROb2RlID0gZGVmb3JtZXJOb2Rlc1tjaGlsZC5JRF1cblxuICAgICAgY29uc3QgcmF3TW9ycGhUYXJnZXQ6IGFueSA9IHtcbiAgICAgICAgbmFtZTogbW9ycGhUYXJnZXROb2RlLmF0dHJOYW1lLFxuICAgICAgICBpbml0aWFsV2VpZ2h0OiBtb3JwaFRhcmdldE5vZGUuRGVmb3JtUGVyY2VudCxcbiAgICAgICAgaWQ6IG1vcnBoVGFyZ2V0Tm9kZS5pZCxcbiAgICAgICAgZnVsbFdlaWdodHM6IG1vcnBoVGFyZ2V0Tm9kZS5GdWxsV2VpZ2h0cy5hXG4gICAgICB9XG5cbiAgICAgIGlmIChtb3JwaFRhcmdldE5vZGUuYXR0clR5cGUgIT09ICdCbGVuZFNoYXBlQ2hhbm5lbCcpIHJldHVyblxuXG4gICAgICByYXdNb3JwaFRhcmdldC5nZW9JRCA9IEZCWExvYWRlci5jb25uZWN0aW9ucy5nZXQocGFyc2VJbnQoY2hpbGQuSUQpKS5jaGlsZHJlbi5maWx0ZXIoKGNoaWxkKSA9PiB7XG4gICAgICAgIHJldHVybiBjaGlsZC5yZWxhdGlvbnNoaXAgPT09IHVuZGVmaW5lZFxuICAgICAgfSlbMF0uSURcblxuICAgICAgcmF3TW9ycGhUYXJnZXRzLnB1c2gocmF3TW9ycGhUYXJnZXQpXG4gICAgfVxuXG4gICAgcmV0dXJuIHJhd01vcnBoVGFyZ2V0c1xuICB9XG5cbiAgcGFyc2VTY2VuZShkZWZvcm1lcnMsIGdlb21ldHJ5TWFwLCBtYXRlcmlhbE1hcCkge1xuICAgIEZCWExvYWRlci5zY2VuZUdyYXBoID0gbmV3IEdyb3VwKClcblxuICAgIGNvbnN0IG1vZGVsTWFwID0gdGhpcy5wYXJzZU1vZGVscyhkZWZvcm1lcnMuc2tlbGV0b25zLCBnZW9tZXRyeU1hcCwgbWF0ZXJpYWxNYXApXG5cbiAgICBjb25zdCBtb2RlbE5vZGVzID0gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cy5Nb2RlbFxuXG4gICAgbW9kZWxNYXAuZm9yRWFjaCgobW9kZWwpID0+IHtcbiAgICAgIGNvbnN0IG1vZGVsTm9kZSA9IG1vZGVsTm9kZXNbbW9kZWwuSURdXG4gICAgICB0aGlzLnNldExvb2tBdFByb3BlcnRpZXMobW9kZWwsIG1vZGVsTm9kZSlcblxuICAgICAgY29uc3QgcGFyZW50Q29ubmVjdGlvbnMgPSBGQlhMb2FkZXIuY29ubmVjdGlvbnMuZ2V0KG1vZGVsLklEKS5wYXJlbnRzXG5cbiAgICAgIHBhcmVudENvbm5lY3Rpb25zLmZvckVhY2goKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gbW9kZWxNYXAuZ2V0KGNvbm5lY3Rpb24uSUQpXG4gICAgICAgIGlmIChwYXJlbnQgIT09IHVuZGVmaW5lZCkgcGFyZW50LmFkZChtb2RlbClcbiAgICAgIH0pXG5cbiAgICAgIGlmIChtb2RlbC5wYXJlbnQgPT09IG51bGwpIHtcbiAgICAgICAgRkJYTG9hZGVyLnNjZW5lR3JhcGguYWRkKG1vZGVsKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICB0aGlzLmJpbmRTa2VsZXRvbihkZWZvcm1lcnMuc2tlbGV0b25zLCBnZW9tZXRyeU1hcCwgbW9kZWxNYXApXG5cbiAgICB0aGlzLmNyZWF0ZUFtYmllbnRMaWdodCgpXG5cbiAgICB0aGlzLnNldHVwTW9ycGhNYXRlcmlhbHMoKVxuXG4gICAgRkJYTG9hZGVyLnNjZW5lR3JhcGgudHJhdmVyc2UoKG5vZGUpID0+IHtcbiAgICAgIGlmIChub2RlLnVzZXJEYXRhLnRyYW5zZm9ybURhdGEpIHtcbiAgICAgICAgaWYgKG5vZGUucGFyZW50KSBub2RlLnVzZXJEYXRhLnRyYW5zZm9ybURhdGEucGFyZW50TWF0cml4V29ybGQgPSBub2RlLnBhcmVudC5tYXRyaXhcblxuICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSBnZW5lcmF0ZVRyYW5zZm9ybShub2RlLnVzZXJEYXRhLnRyYW5zZm9ybURhdGEpXG5cbiAgICAgICAgbm9kZS5hcHBseU1hdHJpeCh0cmFuc2Zvcm0pXG4gICAgICB9XG4gICAgfSlcblxuICAgIGNvbnN0IGFuaW1hdGlvbnMgPSBuZXcgQW5pbWF0aW9uUGFyc2VyKCkucGFyc2UoKVxuXG4gICAgLy8gaWYgYWxsIHRoZSBtb2RlbHMgd2hlcmUgYWxyZWFkeSBjb21iaW5lZCBpbiBhIHNpbmdsZSBncm91cCwganVzdCByZXR1cm4gdGhhdFxuICAgIGlmIChGQlhMb2FkZXIuc2NlbmVHcmFwaC5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiYgRkJYTG9hZGVyLnNjZW5lR3JhcGguY2hpbGRyZW5bMF0uaXNHcm91cCkge1xuICAgICAgRkJYTG9hZGVyLnNjZW5lR3JhcGguY2hpbGRyZW5bMF0uYW5pbWF0aW9ucyA9IGFuaW1hdGlvbnNcbiAgICAgIEZCWExvYWRlci5zY2VuZUdyYXBoID0gRkJYTG9hZGVyLnNjZW5lR3JhcGguY2hpbGRyZW5bMF1cbiAgICB9XG5cbiAgICBGQlhMb2FkZXIuc2NlbmVHcmFwaC5hbmltYXRpb25zID0gYW5pbWF0aW9uc1xuICB9XG5cbiAgLy8gcGFyc2Ugbm9kZXMgaW4gRkJYVHJlZS5PYmplY3RzLk1vZGVsXG4gIHBhcnNlTW9kZWxzKHNrZWxldG9ucywgZ2VvbWV0cnlNYXAsIG1hdGVyaWFsTWFwKSB7XG4gICAgY29uc3QgbW9kZWxNYXAgPSBuZXcgTWFwKClcbiAgICBjb25zdCBtb2RlbE5vZGVzID0gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cy5Nb2RlbFxuXG4gICAgZm9yIChjb25zdCBub2RlSUQgaW4gbW9kZWxOb2Rlcykge1xuICAgICAgY29uc3QgaWQgPSBwYXJzZUludChub2RlSUQpXG4gICAgICBjb25zdCBub2RlID0gbW9kZWxOb2Rlc1tub2RlSURdXG4gICAgICBjb25zdCByZWxhdGlvbnNoaXBzID0gRkJYTG9hZGVyLmNvbm5lY3Rpb25zLmdldChpZClcblxuICAgICAgbGV0IG1vZGVsID0gdGhpcy5idWlsZFNrZWxldG9uKHJlbGF0aW9uc2hpcHMsIHNrZWxldG9ucywgaWQsIG5vZGUuYXR0ck5hbWUpXG5cbiAgICAgIGlmICghbW9kZWwpIHtcbiAgICAgICAgc3dpdGNoIChub2RlLmF0dHJUeXBlKSB7XG4gICAgICAgICAgY2FzZSAnQ2FtZXJhJzpcbiAgICAgICAgICAgIG1vZGVsID0gdGhpcy5jcmVhdGVDYW1lcmEocmVsYXRpb25zaGlwcylcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnTGlnaHQnOlxuICAgICAgICAgICAgbW9kZWwgPSB0aGlzLmNyZWF0ZUxpZ2h0KHJlbGF0aW9uc2hpcHMpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ01lc2gnOlxuICAgICAgICAgICAgbW9kZWwgPSB0aGlzLmNyZWF0ZU1lc2gocmVsYXRpb25zaGlwcywgZ2VvbWV0cnlNYXAsIG1hdGVyaWFsTWFwKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdOdXJic0N1cnZlJzpcbiAgICAgICAgICAgIG1vZGVsID0gdGhpcy5jcmVhdGVDdXJ2ZShyZWxhdGlvbnNoaXBzLCBnZW9tZXRyeU1hcClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnTGltYk5vZGUnOlxuICAgICAgICAgIGNhc2UgJ1Jvb3QnOlxuICAgICAgICAgICAgbW9kZWwgPSBuZXcgQm9uZSgpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ051bGwnOlxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBtb2RlbCA9IG5ldyBHcm91cCgpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgbW9kZWwubmFtZSA9IFByb3BlcnR5QmluZGluZ1snc2FuaXRpemVOb2RlTmFtZSddKG5vZGUuYXR0ck5hbWUpXG4gICAgICAgIG1vZGVsLklEID0gaWRcbiAgICAgIH1cblxuICAgICAgdGhpcy5nZXRUcmFuc2Zvcm1EYXRhKG1vZGVsLCBub2RlKVxuICAgICAgbW9kZWxNYXAuc2V0KGlkLCBtb2RlbClcbiAgICB9XG5cbiAgICByZXR1cm4gbW9kZWxNYXBcbiAgfVxuXG4gIGJ1aWxkU2tlbGV0b24ocmVsYXRpb25zaGlwcywgc2tlbGV0b25zLCBpZCwgbmFtZSkge1xuICAgIGxldCBib25lOiBhbnkgPSBudWxsXG5cbiAgICByZWxhdGlvbnNoaXBzLnBhcmVudHMuZm9yRWFjaCgocGFyZW50KSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IElEIGluIHNrZWxldG9ucykge1xuICAgICAgICBjb25zdCBza2VsZXRvbiA9IHNrZWxldG9uc1tJRF1cblxuICAgICAgICBza2VsZXRvbi5yYXdCb25lcy5mb3JFYWNoKChyYXdCb25lLCBpKSA9PiB7XG4gICAgICAgICAgaWYgKHJhd0JvbmUuSUQgPT09IHBhcmVudC5JRCkge1xuICAgICAgICAgICAgY29uc3Qgc3ViQm9uZSA9IGJvbmVcbiAgICAgICAgICAgIGJvbmUgPSBuZXcgQm9uZSgpXG5cbiAgICAgICAgICAgIGJvbmUubWF0cml4V29ybGQuY29weShyYXdCb25lLnRyYW5zZm9ybUxpbmspXG5cbiAgICAgICAgICAgIC8vIHNldCBuYW1lIGFuZCBpZCBoZXJlIC0gb3RoZXJ3aXNlIGluIGNhc2VzIHdoZXJlIFwic3ViQm9uZVwiIGlzIGNyZWF0ZWQgaXQgd2lsbCBub3QgaGF2ZSBhIG5hbWUgLyBpZFxuICAgICAgICAgICAgYm9uZS5uYW1lID0gUHJvcGVydHlCaW5kaW5nWydzYW5pdGl6ZU5vZGVOYW1lJ10obmFtZSlcbiAgICAgICAgICAgIGJvbmUuSUQgPSBpZFxuXG4gICAgICAgICAgICBza2VsZXRvbi5ib25lc1tpXSA9IGJvbmVcblxuICAgICAgICAgICAgLy8gSW4gY2FzZXMgd2hlcmUgYSBib25lIGlzIHNoYXJlZCBiZXR3ZWVuIG11bHRpcGxlIG1lc2hlc1xuICAgICAgICAgICAgLy8gZHVwbGljYXRlIHRoZSBib25lIGhlcmUgYW5kIGFuZCBpdCBhcyBhIGNoaWxkIG9mIHRoZSBmaXJzdCBib25lXG4gICAgICAgICAgICBpZiAoc3ViQm9uZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBib25lLmFkZChzdWJCb25lKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIGJvbmVcbiAgfVxuXG4gIC8vIGNyZWF0ZSBhIFBlcnNwZWN0aXZlQ2FtZXJhIG9yIE9ydGhvZ3JhcGhpY0NhbWVyYVxuICBjcmVhdGVDYW1lcmEocmVsYXRpb25zaGlwcykge1xuICAgIGxldCBtb2RlbFxuICAgIGxldCBjYW1lcmFBdHRyaWJ1dGVcblxuICAgIHJlbGF0aW9uc2hpcHMuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgIGNvbnN0IGF0dHIgPSBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzLk5vZGVBdHRyaWJ1dGVbY2hpbGQuSURdXG5cbiAgICAgIGlmIChhdHRyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY2FtZXJhQXR0cmlidXRlID0gYXR0clxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZiAoY2FtZXJhQXR0cmlidXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG1vZGVsID0gbmV3IE9iamVjdDNEKClcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHR5cGUgPSAwXG4gICAgICBpZiAoY2FtZXJhQXR0cmlidXRlLkNhbWVyYVByb2plY3Rpb25UeXBlICE9PSB1bmRlZmluZWQgJiYgY2FtZXJhQXR0cmlidXRlLkNhbWVyYVByb2plY3Rpb25UeXBlLnZhbHVlID09PSAxKSB7XG4gICAgICAgIHR5cGUgPSAxXG4gICAgICB9XG5cbiAgICAgIGxldCBuZWFyQ2xpcHBpbmdQbGFuZSA9IDFcbiAgICAgIGlmIChjYW1lcmFBdHRyaWJ1dGUuTmVhclBsYW5lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmVhckNsaXBwaW5nUGxhbmUgPSBjYW1lcmFBdHRyaWJ1dGUuTmVhclBsYW5lLnZhbHVlIC8gMTAwMFxuICAgICAgfVxuXG4gICAgICBsZXQgZmFyQ2xpcHBpbmdQbGFuZSA9IDEwMDBcbiAgICAgIGlmIChjYW1lcmFBdHRyaWJ1dGUuRmFyUGxhbmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmYXJDbGlwcGluZ1BsYW5lID0gY2FtZXJhQXR0cmlidXRlLkZhclBsYW5lLnZhbHVlIC8gMTAwMFxuICAgICAgfVxuXG4gICAgICBsZXQgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aFxuICAgICAgbGV0IGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodFxuXG4gICAgICBpZiAoY2FtZXJhQXR0cmlidXRlLkFzcGVjdFdpZHRoICE9PSB1bmRlZmluZWQgJiYgY2FtZXJhQXR0cmlidXRlLkFzcGVjdEhlaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHdpZHRoID0gY2FtZXJhQXR0cmlidXRlLkFzcGVjdFdpZHRoLnZhbHVlXG4gICAgICAgIGhlaWdodCA9IGNhbWVyYUF0dHJpYnV0ZS5Bc3BlY3RIZWlnaHQudmFsdWVcbiAgICAgIH1cblxuICAgICAgY29uc3QgYXNwZWN0ID0gd2lkdGggLyBoZWlnaHRcblxuICAgICAgbGV0IGZvdiA9IDQ1XG4gICAgICBpZiAoY2FtZXJhQXR0cmlidXRlLkZpZWxkT2ZWaWV3ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZm92ID0gY2FtZXJhQXR0cmlidXRlLkZpZWxkT2ZWaWV3LnZhbHVlXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZvY2FsTGVuZ3RoID0gY2FtZXJhQXR0cmlidXRlLkZvY2FsTGVuZ3RoID8gY2FtZXJhQXR0cmlidXRlLkZvY2FsTGVuZ3RoLnZhbHVlIDogbnVsbFxuXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAwOiAvLyBQZXJzcGVjdGl2ZVxuICAgICAgICAgIG1vZGVsID0gbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKGZvdiwgYXNwZWN0LCBuZWFyQ2xpcHBpbmdQbGFuZSwgZmFyQ2xpcHBpbmdQbGFuZSlcbiAgICAgICAgICBpZiAoZm9jYWxMZW5ndGggIT09IG51bGwpIG1vZGVsLnNldEZvY2FsTGVuZ3RoKGZvY2FsTGVuZ3RoKVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAxOiAvLyBPcnRob2dyYXBoaWNcbiAgICAgICAgICBtb2RlbCA9IG5ldyBPcnRob2dyYXBoaWNDYW1lcmEoXG4gICAgICAgICAgICAtd2lkdGggLyAyLFxuICAgICAgICAgICAgd2lkdGggLyAyLFxuICAgICAgICAgICAgaGVpZ2h0IC8gMixcbiAgICAgICAgICAgIC1oZWlnaHQgLyAyLFxuICAgICAgICAgICAgbmVhckNsaXBwaW5nUGxhbmUsXG4gICAgICAgICAgICBmYXJDbGlwcGluZ1BsYW5lXG4gICAgICAgICAgKVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0ZCWExvYWRlcjogVW5rbm93biBjYW1lcmEgdHlwZSAnICsgdHlwZSArICcuJylcbiAgICAgICAgICBtb2RlbCA9IG5ldyBPYmplY3QzRCgpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbW9kZWxcbiAgfVxuXG4gIC8vIENyZWF0ZSBhIERpcmVjdGlvbmFsTGlnaHQsIFBvaW50TGlnaHQgb3IgU3BvdExpZ2h0XG4gIGNyZWF0ZUxpZ2h0KHJlbGF0aW9uc2hpcHMpIHtcbiAgICBsZXQgbW9kZWxcbiAgICBsZXQgbGlnaHRBdHRyaWJ1dGVcblxuICAgIHJlbGF0aW9uc2hpcHMuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgIGNvbnN0IGF0dHIgPSBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzLk5vZGVBdHRyaWJ1dGVbY2hpbGQuSURdXG5cbiAgICAgIGlmIChhdHRyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbGlnaHRBdHRyaWJ1dGUgPSBhdHRyXG4gICAgICB9XG4gICAgfSlcblxuICAgIGlmIChsaWdodEF0dHJpYnV0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBtb2RlbCA9IG5ldyBPYmplY3QzRCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB0eXBlXG5cbiAgICAgIC8vIExpZ2h0VHlwZSBjYW4gYmUgdW5kZWZpbmVkIGZvciBQb2ludCBsaWdodHNcbiAgICAgIGlmIChsaWdodEF0dHJpYnV0ZS5MaWdodFR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0eXBlID0gMFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHlwZSA9IGxpZ2h0QXR0cmlidXRlLkxpZ2h0VHlwZS52YWx1ZVxuICAgICAgfVxuXG4gICAgICBsZXQgY29sb3I6IGFueSA9IDB4ZmZmZmZmXG5cbiAgICAgIGlmIChsaWdodEF0dHJpYnV0ZS5Db2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbG9yID0gbmV3IENvbG9yKCkuZnJvbUFycmF5KGxpZ2h0QXR0cmlidXRlLkNvbG9yLnZhbHVlKVxuICAgICAgfVxuXG4gICAgICBsZXQgaW50ZW5zaXR5ID0gbGlnaHRBdHRyaWJ1dGUuSW50ZW5zaXR5ID09PSB1bmRlZmluZWQgPyAxIDogbGlnaHRBdHRyaWJ1dGUuSW50ZW5zaXR5LnZhbHVlIC8gMTAwXG5cbiAgICAgIC8vIGxpZ2h0IGRpc2FibGVkXG4gICAgICBpZiAobGlnaHRBdHRyaWJ1dGUuQ2FzdExpZ2h0T25PYmplY3QgIT09IHVuZGVmaW5lZCAmJiBsaWdodEF0dHJpYnV0ZS5DYXN0TGlnaHRPbk9iamVjdC52YWx1ZSA9PT0gMCkge1xuICAgICAgICBpbnRlbnNpdHkgPSAwXG4gICAgICB9XG5cbiAgICAgIGxldCBkaXN0YW5jZSA9IDBcbiAgICAgIGlmIChsaWdodEF0dHJpYnV0ZS5GYXJBdHRlbnVhdGlvbkVuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChsaWdodEF0dHJpYnV0ZS5FbmFibGVGYXJBdHRlbnVhdGlvbiAhPT0gdW5kZWZpbmVkICYmIGxpZ2h0QXR0cmlidXRlLkVuYWJsZUZhckF0dGVudWF0aW9uLnZhbHVlID09PSAwKSB7XG4gICAgICAgICAgZGlzdGFuY2UgPSAwXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGlzdGFuY2UgPSBsaWdodEF0dHJpYnV0ZS5GYXJBdHRlbnVhdGlvbkVuZC52YWx1ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRPRE86IGNvdWxkIHRoaXMgYmUgY2FsY3VsYXRlZCBsaW5lYXJseSBmcm9tIEZhckF0dGVudWF0aW9uU3RhcnQgdG8gRmFyQXR0ZW51YXRpb25FbmQ/XG4gICAgICBjb25zdCBkZWNheSA9IDFcblxuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgMDogLy8gUG9pbnRcbiAgICAgICAgICBtb2RlbCA9IG5ldyBQb2ludExpZ2h0KGNvbG9yLCBpbnRlbnNpdHksIGRpc3RhbmNlLCBkZWNheSlcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgMTogLy8gRGlyZWN0aW9uYWxcbiAgICAgICAgICBtb2RlbCA9IG5ldyBEaXJlY3Rpb25hbExpZ2h0KGNvbG9yLCBpbnRlbnNpdHkpXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlIDI6IC8vIFNwb3RcbiAgICAgICAgICBsZXQgYW5nbGUgPSBNYXRoLlBJIC8gM1xuXG4gICAgICAgICAgaWYgKGxpZ2h0QXR0cmlidXRlLklubmVyQW5nbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYW5nbGUgPSBNYXRoVXRpbHMuZGVnVG9SYWQobGlnaHRBdHRyaWJ1dGUuSW5uZXJBbmdsZS52YWx1ZSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsZXQgcGVudW1icmEgPSAwXG4gICAgICAgICAgaWYgKGxpZ2h0QXR0cmlidXRlLk91dGVyQW5nbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gVE9ETzogdGhpcyBpcyBub3QgY29ycmVjdCAtIEZCWCBjYWxjdWxhdGVzIG91dGVyIGFuZCBpbm5lciBhbmdsZSBpbiBkZWdyZWVzXG4gICAgICAgICAgICAvLyB3aXRoIE91dGVyQW5nbGUgPiBJbm5lckFuZ2xlICYmIE91dGVyQW5nbGUgPD0gTWF0aC5QSVxuICAgICAgICAgICAgLy8gd2hpbGUganMgdXNlcyBhIHBlbnVtYnJhIGJldHdlZW4gKDAsIDEpIHRvIGF0dGVudWF0ZSB0aGUgaW5uZXIgYW5nbGVcbiAgICAgICAgICAgIHBlbnVtYnJhID0gTWF0aFV0aWxzLmRlZ1RvUmFkKGxpZ2h0QXR0cmlidXRlLk91dGVyQW5nbGUudmFsdWUpXG4gICAgICAgICAgICBwZW51bWJyYSA9IE1hdGgubWF4KHBlbnVtYnJhLCAxKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG1vZGVsID0gbmV3IFNwb3RMaWdodChjb2xvciwgaW50ZW5zaXR5LCBkaXN0YW5jZSwgYW5nbGUsIHBlbnVtYnJhLCBkZWNheSlcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgJ0ZCWExvYWRlcjogVW5rbm93biBsaWdodCB0eXBlICcgKyBsaWdodEF0dHJpYnV0ZS5MaWdodFR5cGUudmFsdWUgKyAnLCBkZWZhdWx0aW5nIHRvIGEgUG9pbnRMaWdodC4nXG4gICAgICAgICAgKVxuICAgICAgICAgIG1vZGVsID0gbmV3IFBvaW50TGlnaHQoY29sb3IsIGludGVuc2l0eSlcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBpZiAobGlnaHRBdHRyaWJ1dGUuQ2FzdFNoYWRvd3MgIT09IHVuZGVmaW5lZCAmJiBsaWdodEF0dHJpYnV0ZS5DYXN0U2hhZG93cy52YWx1ZSA9PT0gMSkge1xuICAgICAgICBtb2RlbC5jYXN0U2hhZG93ID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtb2RlbFxuICB9XG5cbiAgY3JlYXRlTWVzaChyZWxhdGlvbnNoaXBzLCBnZW9tZXRyeU1hcCwgbWF0ZXJpYWxNYXApIHtcbiAgICBsZXQgbW9kZWxcbiAgICBsZXQgZ2VvbWV0cnk6IGFueSA9IG51bGxcbiAgICBsZXQgbWF0ZXJpYWw6IGFueSA9IG51bGxcbiAgICBjb25zdCBtYXRlcmlhbHM6IGFueSA9IFtdXG5cbiAgICAvLyBnZXQgZ2VvbWV0cnkgYW5kIG1hdGVyaWFscyhzKSBmcm9tIGNvbm5lY3Rpb25zXG4gICAgcmVsYXRpb25zaGlwcy5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgaWYgKGdlb21ldHJ5TWFwLmhhcyhjaGlsZC5JRCkpIHtcbiAgICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyeU1hcC5nZXQoY2hpbGQuSUQpXG4gICAgICB9XG5cbiAgICAgIGlmIChtYXRlcmlhbE1hcC5oYXMoY2hpbGQuSUQpKSB7XG4gICAgICAgIG1hdGVyaWFscy5wdXNoKG1hdGVyaWFsTWFwLmdldChjaGlsZC5JRCkpXG4gICAgICB9XG4gICAgfSlcblxuICAgIGlmIChtYXRlcmlhbHMubGVuZ3RoID4gMSkge1xuICAgICAgbWF0ZXJpYWwgPSBtYXRlcmlhbHNcbiAgICB9IGVsc2UgaWYgKG1hdGVyaWFscy5sZW5ndGggPiAwKSB7XG4gICAgICBtYXRlcmlhbCA9IG1hdGVyaWFsc1swXVxuICAgIH0gZWxzZSB7XG4gICAgICBtYXRlcmlhbCA9IG5ldyBNZXNoUGhvbmdNYXRlcmlhbCh7IGNvbG9yOiAweGNjY2NjYyB9KVxuICAgICAgbWF0ZXJpYWxzLnB1c2gobWF0ZXJpYWwpXG4gICAgfVxuXG4gICAgaWYgKCdjb2xvcicgaW4gZ2VvbWV0cnkuYXR0cmlidXRlcykge1xuICAgICAgbWF0ZXJpYWxzLmZvckVhY2goKG1hdGVyaWFsKSA9PiB7XG4gICAgICAgIC8vIG1hdGVyaWFsLnZlcnRleENvbG9ycyA9IFZlcnRleENvbG9ycztcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGdlb21ldHJ5LkZCWF9EZWZvcm1lcikge1xuICAgICAgbWF0ZXJpYWxzLmZvckVhY2goKG1hdGVyaWFsKSA9PiB7XG4gICAgICAgIG1hdGVyaWFsLnNraW5uaW5nID0gdHJ1ZVxuICAgICAgfSlcblxuICAgICAgbW9kZWwgPSBuZXcgU2tpbm5lZE1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKVxuICAgICAgbW9kZWwubm9ybWFsaXplU2tpbldlaWdodHMoKVxuICAgIH0gZWxzZSB7XG4gICAgICBtb2RlbCA9IG5ldyBNZXNoKGdlb21ldHJ5LCBtYXRlcmlhbClcbiAgICB9XG5cbiAgICByZXR1cm4gbW9kZWxcbiAgfVxuXG4gIGNyZWF0ZUN1cnZlKHJlbGF0aW9uc2hpcHMsIGdlb21ldHJ5TWFwKSB7XG4gICAgY29uc3QgZ2VvbWV0cnkgPSByZWxhdGlvbnNoaXBzLmNoaWxkcmVuLnJlZHVjZSgoZ2VvLCBjaGlsZCkgPT4ge1xuICAgICAgaWYgKGdlb21ldHJ5TWFwLmhhcyhjaGlsZC5JRCkpIGdlbyA9IGdlb21ldHJ5TWFwLmdldChjaGlsZC5JRClcblxuICAgICAgcmV0dXJuIGdlb1xuICAgIH0sIG51bGwpXG5cbiAgICAvLyBGQlggZG9lcyBub3QgbGlzdCBtYXRlcmlhbHMgZm9yIE51cmJzIGxpbmVzLCBzbyB3ZSdsbCBqdXN0IHB1dCBvdXIgb3duIGluIGhlcmUuXG4gICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgTGluZUJhc2ljTWF0ZXJpYWwoeyBjb2xvcjogMHgzMzAwZmYsIGxpbmV3aWR0aDogMSB9KVxuICAgIHJldHVybiBuZXcgTGluZShnZW9tZXRyeSwgbWF0ZXJpYWwpXG4gIH1cblxuICAvLyBwYXJzZSB0aGUgbW9kZWwgbm9kZSBmb3IgdHJhbnNmb3JtIGRhdGFcbiAgZ2V0VHJhbnNmb3JtRGF0YShtb2RlbCwgbW9kZWxOb2RlKSB7XG4gICAgY29uc3QgdHJhbnNmb3JtRGF0YTogYW55ID0ge31cblxuICAgIGlmICgnSW5oZXJpdFR5cGUnIGluIG1vZGVsTm9kZSkgdHJhbnNmb3JtRGF0YS5pbmhlcml0VHlwZSA9IHBhcnNlSW50KG1vZGVsTm9kZS5Jbmhlcml0VHlwZS52YWx1ZSlcblxuICAgIGlmICgnUm90YXRpb25PcmRlcicgaW4gbW9kZWxOb2RlKSB0cmFuc2Zvcm1EYXRhLmV1bGVyT3JkZXIgPSBnZXRFdWxlck9yZGVyKG1vZGVsTm9kZS5Sb3RhdGlvbk9yZGVyLnZhbHVlKVxuICAgIGVsc2UgdHJhbnNmb3JtRGF0YS5ldWxlck9yZGVyID0gJ1pZWCdcblxuICAgIGlmICgnTGNsX1RyYW5zbGF0aW9uJyBpbiBtb2RlbE5vZGUpIHRyYW5zZm9ybURhdGEudHJhbnNsYXRpb24gPSBtb2RlbE5vZGUuTGNsX1RyYW5zbGF0aW9uLnZhbHVlXG5cbiAgICBpZiAoJ1ByZVJvdGF0aW9uJyBpbiBtb2RlbE5vZGUpIHRyYW5zZm9ybURhdGEucHJlUm90YXRpb24gPSBtb2RlbE5vZGUuUHJlUm90YXRpb24udmFsdWVcbiAgICBpZiAoJ0xjbF9Sb3RhdGlvbicgaW4gbW9kZWxOb2RlKSB0cmFuc2Zvcm1EYXRhLnJvdGF0aW9uID0gbW9kZWxOb2RlLkxjbF9Sb3RhdGlvbi52YWx1ZVxuICAgIGlmICgnUG9zdFJvdGF0aW9uJyBpbiBtb2RlbE5vZGUpIHRyYW5zZm9ybURhdGEucG9zdFJvdGF0aW9uID0gbW9kZWxOb2RlLlBvc3RSb3RhdGlvbi52YWx1ZVxuXG4gICAgaWYgKCdMY2xfU2NhbGluZycgaW4gbW9kZWxOb2RlKSB0cmFuc2Zvcm1EYXRhLnNjYWxlID0gbW9kZWxOb2RlLkxjbF9TY2FsaW5nLnZhbHVlXG5cbiAgICBpZiAoJ1NjYWxpbmdPZmZzZXQnIGluIG1vZGVsTm9kZSkgdHJhbnNmb3JtRGF0YS5zY2FsaW5nT2Zmc2V0ID0gbW9kZWxOb2RlLlNjYWxpbmdPZmZzZXQudmFsdWVcbiAgICBpZiAoJ1NjYWxpbmdQaXZvdCcgaW4gbW9kZWxOb2RlKSB0cmFuc2Zvcm1EYXRhLnNjYWxpbmdQaXZvdCA9IG1vZGVsTm9kZS5TY2FsaW5nUGl2b3QudmFsdWVcblxuICAgIGlmICgnUm90YXRpb25PZmZzZXQnIGluIG1vZGVsTm9kZSkgdHJhbnNmb3JtRGF0YS5yb3RhdGlvbk9mZnNldCA9IG1vZGVsTm9kZS5Sb3RhdGlvbk9mZnNldC52YWx1ZVxuICAgIGlmICgnUm90YXRpb25QaXZvdCcgaW4gbW9kZWxOb2RlKSB0cmFuc2Zvcm1EYXRhLnJvdGF0aW9uUGl2b3QgPSBtb2RlbE5vZGUuUm90YXRpb25QaXZvdC52YWx1ZVxuXG4gICAgbW9kZWwudXNlckRhdGEudHJhbnNmb3JtRGF0YSA9IHRyYW5zZm9ybURhdGFcbiAgfVxuXG4gIHNldExvb2tBdFByb3BlcnRpZXMobW9kZWwsIG1vZGVsTm9kZSkge1xuICAgIGlmICgnTG9va0F0UHJvcGVydHknIGluIG1vZGVsTm9kZSkge1xuICAgICAgY29uc3QgY2hpbGRyZW4gPSBGQlhMb2FkZXIuY29ubmVjdGlvbnMuZ2V0KG1vZGVsLklEKS5jaGlsZHJlblxuXG4gICAgICBjaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICBpZiAoY2hpbGQucmVsYXRpb25zaGlwID09PSAnTG9va0F0UHJvcGVydHknKSB7XG4gICAgICAgICAgY29uc3QgbG9va0F0VGFyZ2V0ID0gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cy5Nb2RlbFtjaGlsZC5JRF1cblxuICAgICAgICAgIGlmICgnTGNsX1RyYW5zbGF0aW9uJyBpbiBsb29rQXRUYXJnZXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBvcyA9IGxvb2tBdFRhcmdldC5MY2xfVHJhbnNsYXRpb24udmFsdWVcblxuICAgICAgICAgICAgLy8gRGlyZWN0aW9uYWxMaWdodCwgU3BvdExpZ2h0XG4gICAgICAgICAgICBpZiAobW9kZWwudGFyZ2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgbW9kZWwudGFyZ2V0LnBvc2l0aW9uLmZyb21BcnJheShwb3MpXG4gICAgICAgICAgICAgIEZCWExvYWRlci5zY2VuZUdyYXBoLmFkZChtb2RlbC50YXJnZXQpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBDYW1lcmFzIGFuZCBvdGhlciBPYmplY3QzRHNcblxuICAgICAgICAgICAgICBtb2RlbC5sb29rQXQobmV3IFZlY3RvcjMoKS5mcm9tQXJyYXkocG9zKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYmluZFNrZWxldG9uKHNrZWxldG9ucywgZ2VvbWV0cnlNYXAsIG1vZGVsTWFwKSB7XG4gICAgY29uc3QgYmluZE1hdHJpY2VzID0gdGhpcy5wYXJzZVBvc2VOb2RlcygpXG5cbiAgICBmb3IgKGNvbnN0IElEIGluIHNrZWxldG9ucykge1xuICAgICAgY29uc3Qgc2tlbGV0b24gPSBza2VsZXRvbnNbSURdXG5cbiAgICAgIGNvbnN0IHBhcmVudHMgPSBGQlhMb2FkZXIuY29ubmVjdGlvbnMuZ2V0KHBhcnNlSW50KHNrZWxldG9uLklEKSkucGFyZW50c1xuXG4gICAgICBwYXJlbnRzLmZvckVhY2goKHBhcmVudCkgPT4ge1xuICAgICAgICBpZiAoZ2VvbWV0cnlNYXAuaGFzKHBhcmVudC5JRCkpIHtcbiAgICAgICAgICBjb25zdCBnZW9JRCA9IHBhcmVudC5JRFxuICAgICAgICAgIGNvbnN0IGdlb1JlbGF0aW9uc2hpcHMgPSBGQlhMb2FkZXIuY29ubmVjdGlvbnMuZ2V0KGdlb0lEKVxuXG4gICAgICAgICAgZ2VvUmVsYXRpb25zaGlwcy5wYXJlbnRzLmZvckVhY2goKGdlb0Nvbm5QYXJlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChtb2RlbE1hcC5oYXMoZ2VvQ29ublBhcmVudC5JRCkpIHtcbiAgICAgICAgICAgICAgY29uc3QgbW9kZWwgPSBtb2RlbE1hcC5nZXQoZ2VvQ29ublBhcmVudC5JRClcblxuICAgICAgICAgICAgICBtb2RlbC5iaW5kKG5ldyBTa2VsZXRvbihza2VsZXRvbi5ib25lcyksIGJpbmRNYXRyaWNlc1tnZW9Db25uUGFyZW50LklEXSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHBhcnNlUG9zZU5vZGVzKCkge1xuICAgIGNvbnN0IGJpbmRNYXRyaWNlcyA9IHt9XG5cbiAgICBpZiAoJ1Bvc2UnIGluIEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMpIHtcbiAgICAgIGNvbnN0IEJpbmRQb3NlTm9kZSA9IEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMuUG9zZVxuXG4gICAgICBmb3IgKGNvbnN0IG5vZGVJRCBpbiBCaW5kUG9zZU5vZGUpIHtcbiAgICAgICAgaWYgKEJpbmRQb3NlTm9kZVtub2RlSURdLmF0dHJUeXBlID09PSAnQmluZFBvc2UnKSB7XG4gICAgICAgICAgY29uc3QgcG9zZU5vZGVzID0gQmluZFBvc2VOb2RlW25vZGVJRF0uUG9zZU5vZGVcblxuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBvc2VOb2RlcykpIHtcbiAgICAgICAgICAgIHBvc2VOb2Rlcy5mb3JFYWNoKChwb3NlTm9kZSkgPT4ge1xuICAgICAgICAgICAgICBiaW5kTWF0cmljZXNbcG9zZU5vZGUuTm9kZV0gPSBuZXcgTWF0cml4NCgpLmZyb21BcnJheShwb3NlTm9kZS5NYXRyaXguYSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJpbmRNYXRyaWNlc1twb3NlTm9kZXMuTm9kZV0gPSBuZXcgTWF0cml4NCgpLmZyb21BcnJheShwb3NlTm9kZXMuTWF0cml4LmEpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGJpbmRNYXRyaWNlc1xuICB9XG5cbiAgLy8gUGFyc2UgYW1iaWVudCBjb2xvciBpbiBGQlhUcmVlLkdsb2JhbFNldHRpbmdzIC0gaWYgaXQncyBub3Qgc2V0IHRvIGJsYWNrIChkZWZhdWx0KSwgY3JlYXRlIGFuIGFtYmllbnQgbGlnaHRcbiAgY3JlYXRlQW1iaWVudExpZ2h0KCkge1xuICAgIGlmICgnR2xvYmFsU2V0dGluZ3MnIGluIEZCWExvYWRlci5mYnhUcmVlICYmICdBbWJpZW50Q29sb3InIGluIEZCWExvYWRlci5mYnhUcmVlLkdsb2JhbFNldHRpbmdzKSB7XG4gICAgICBjb25zdCBhbWJpZW50Q29sb3IgPSBGQlhMb2FkZXIuZmJ4VHJlZS5HbG9iYWxTZXR0aW5ncy5BbWJpZW50Q29sb3IudmFsdWVcbiAgICAgIGNvbnN0IHIgPSBhbWJpZW50Q29sb3JbMF1cbiAgICAgIGNvbnN0IGcgPSBhbWJpZW50Q29sb3JbMV1cbiAgICAgIGNvbnN0IGIgPSBhbWJpZW50Q29sb3JbMl1cblxuICAgICAgaWYgKHIgIT09IDAgfHwgZyAhPT0gMCB8fCBiICE9PSAwKSB7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gbmV3IENvbG9yKHIsIGcsIGIpXG4gICAgICAgIEZCWExvYWRlci5zY2VuZUdyYXBoLmFkZChuZXcgQW1iaWVudExpZ2h0KGNvbG9yLCAxKSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzZXR1cE1vcnBoTWF0ZXJpYWxzKCkge1xuICAgIEZCWExvYWRlci5zY2VuZUdyYXBoLnRyYXZlcnNlKChjaGlsZCkgPT4ge1xuICAgICAgaWYgKGNoaWxkLmlzTWVzaCkge1xuICAgICAgICBpZiAoY2hpbGQuZ2VvbWV0cnkubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uICYmIGNoaWxkLmdlb21ldHJ5Lm1vcnBoQXR0cmlidXRlcy5wb3NpdGlvbi5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZC5tYXRlcmlhbCkpIHtcbiAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsLmZvckVhY2goKG1hdGVyaWFsLCBpKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuc2V0dXBNb3JwaE1hdGVyaWFsKGNoaWxkLCBtYXRlcmlhbCwgaSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dXBNb3JwaE1hdGVyaWFsKGNoaWxkLCBjaGlsZC5tYXRlcmlhbClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgc2V0dXBNb3JwaE1hdGVyaWFsKGNoaWxkLCBtYXRlcmlhbCwgaW5kZXg/KSB7XG4gICAgY29uc3QgdXVpZCA9IGNoaWxkLnV1aWRcbiAgICBjb25zdCBtYXRVdWlkID0gbWF0ZXJpYWwudXVpZFxuXG4gICAgLy8gaWYgYSBnZW9tZXRyeSBoYXMgbW9ycGggdGFyZ2V0cywgaXQgY2Fubm90IHNoYXJlIHRoZSBtYXRlcmlhbCB3aXRoIG90aGVyIGdlb21ldHJpZXNcbiAgICBsZXQgc2hhcmVkTWF0ID0gZmFsc2VcblxuICAgIEZCWExvYWRlci5zY2VuZUdyYXBoLnRyYXZlcnNlKChub2RlKSA9PiB7XG4gICAgICBpZiAobm9kZS5pc01lc2gpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm9kZS5tYXRlcmlhbCkpIHtcbiAgICAgICAgICBub2RlLm1hdGVyaWFsLmZvckVhY2goKG1hdCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hdC51dWlkID09PSBtYXRVdWlkICYmIG5vZGUudXVpZCAhPT0gdXVpZCkgc2hhcmVkTWF0ID0gdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZiAobm9kZS5tYXRlcmlhbC51dWlkID09PSBtYXRVdWlkICYmIG5vZGUudXVpZCAhPT0gdXVpZCkgc2hhcmVkTWF0ID0gdHJ1ZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZiAoc2hhcmVkTWF0KSB7XG4gICAgICBjb25zdCBjbG9uZWRNYXQgPSBtYXRlcmlhbC5jbG9uZSgpXG4gICAgICBjbG9uZWRNYXQubW9ycGhUYXJnZXRzID0gdHJ1ZVxuXG4gICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkgY2hpbGQubWF0ZXJpYWwgPSBjbG9uZWRNYXRcbiAgICAgIGVsc2UgY2hpbGQubWF0ZXJpYWxbaW5kZXhdID0gY2xvbmVkTWF0XG4gICAgfSBlbHNlIG1hdGVyaWFsLm1vcnBoVGFyZ2V0cyA9IHRydWVcbiAgfVxufVxuXG5jbGFzcyBHZW9tZXRyeVBhcnNlciB7XG4gIGNvbnN0cnVjdG9yKCkge31cblxuICBwYXJzZShkZWZvcm1lcnMpIHtcbiAgICBjb25zdCBnZW9tZXRyeU1hcCA9IG5ldyBNYXAoKVxuXG4gICAgaWYgKCdHZW9tZXRyeScgaW4gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cykge1xuICAgICAgY29uc3QgZ2VvTm9kZXMgPSBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzLkdlb21ldHJ5XG5cbiAgICAgIGZvciAoY29uc3Qgbm9kZUlEIGluIGdlb05vZGVzKSB7XG4gICAgICAgIGNvbnN0IHJlbGF0aW9uc2hpcHMgPSBGQlhMb2FkZXIuY29ubmVjdGlvbnMuZ2V0KHBhcnNlSW50KG5vZGVJRCkpXG4gICAgICAgIGNvbnN0IGdlbyA9IHRoaXMucGFyc2VHZW9tZXRyeShyZWxhdGlvbnNoaXBzLCBnZW9Ob2Rlc1tub2RlSURdLCBkZWZvcm1lcnMpXG5cbiAgICAgICAgZ2VvbWV0cnlNYXAuc2V0KHBhcnNlSW50KG5vZGVJRCksIGdlbylcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZ2VvbWV0cnlNYXBcbiAgfVxuXG4gIC8vIFBhcnNlIHNpbmdsZSBub2RlIGluIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeVxuICBwYXJzZUdlb21ldHJ5KHJlbGF0aW9uc2hpcHMsIGdlb05vZGUsIGRlZm9ybWVycykge1xuICAgIHN3aXRjaCAoZ2VvTm9kZS5hdHRyVHlwZSkge1xuICAgICAgY2FzZSAnTWVzaCc6XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlTWVzaEdlb21ldHJ5KHJlbGF0aW9uc2hpcHMsIGdlb05vZGUsIGRlZm9ybWVycylcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnTnVyYnNDdXJ2ZSc6XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlTnVyYnNHZW9tZXRyeShnZW9Ob2RlKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIC8vIFBhcnNlIHNpbmdsZSBub2RlIG1lc2ggZ2VvbWV0cnkgaW4gRkJYVHJlZS5PYmplY3RzLkdlb21ldHJ5XG4gIHBhcnNlTWVzaEdlb21ldHJ5KHJlbGF0aW9uc2hpcHMsIGdlb05vZGUsIGRlZm9ybWVycykge1xuICAgIGNvbnN0IHNrZWxldG9ucyA9IGRlZm9ybWVycy5za2VsZXRvbnNcbiAgICBjb25zdCBtb3JwaFRhcmdldHMgPSBkZWZvcm1lcnMubW9ycGhUYXJnZXRzXG5cbiAgICBjb25zdCBtb2RlbE5vZGVzID0gcmVsYXRpb25zaGlwcy5wYXJlbnRzLm1hcCgocGFyZW50KSA9PiB7XG4gICAgICByZXR1cm4gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cy5Nb2RlbFtwYXJlbnQuSURdXG4gICAgfSlcblxuICAgIC8vIGRvbid0IGNyZWF0ZSBnZW9tZXRyeSBpZiBpdCBpcyBub3QgYXNzb2NpYXRlZCB3aXRoIGFueSBtb2RlbHNcbiAgICBpZiAobW9kZWxOb2Rlcy5sZW5ndGggPT09IDApIHJldHVyblxuXG4gICAgY29uc3Qgc2tlbGV0b24gPSByZWxhdGlvbnNoaXBzLmNoaWxkcmVuLnJlZHVjZSgoc2tlbGV0b24sIGNoaWxkKSA9PiB7XG4gICAgICBpZiAoc2tlbGV0b25zW2NoaWxkLklEXSAhPT0gdW5kZWZpbmVkKSBza2VsZXRvbiA9IHNrZWxldG9uc1tjaGlsZC5JRF1cblxuICAgICAgcmV0dXJuIHNrZWxldG9uXG4gICAgfSwgbnVsbClcblxuICAgIGNvbnN0IG1vcnBoVGFyZ2V0ID0gcmVsYXRpb25zaGlwcy5jaGlsZHJlbi5yZWR1Y2UoKG1vcnBoVGFyZ2V0LCBjaGlsZCkgPT4ge1xuICAgICAgaWYgKG1vcnBoVGFyZ2V0c1tjaGlsZC5JRF0gIT09IHVuZGVmaW5lZCkgbW9ycGhUYXJnZXQgPSBtb3JwaFRhcmdldHNbY2hpbGQuSURdXG5cbiAgICAgIHJldHVybiBtb3JwaFRhcmdldFxuICAgIH0sIG51bGwpXG5cbiAgICAvLyBBc3N1bWUgb25lIG1vZGVsIGFuZCBnZXQgdGhlIHByZVJvdGF0aW9uIGZyb20gdGhhdFxuICAgIC8vIGlmIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmUgbW9kZWwgYXNzb2NpYXRlZCB3aXRoIHRoZSBnZW9tZXRyeSB0aGlzIG1heSBjYXVzZSBwcm9ibGVtc1xuICAgIGNvbnN0IG1vZGVsTm9kZSA9IG1vZGVsTm9kZXNbMF1cblxuICAgIGNvbnN0IHRyYW5zZm9ybURhdGE6IGFueSA9IHt9XG5cbiAgICBpZiAoJ1JvdGF0aW9uT3JkZXInIGluIG1vZGVsTm9kZSkgdHJhbnNmb3JtRGF0YS5ldWxlck9yZGVyID0gZ2V0RXVsZXJPcmRlcihtb2RlbE5vZGUuUm90YXRpb25PcmRlci52YWx1ZSlcbiAgICBpZiAoJ0luaGVyaXRUeXBlJyBpbiBtb2RlbE5vZGUpIHRyYW5zZm9ybURhdGEuaW5oZXJpdFR5cGUgPSBwYXJzZUludChtb2RlbE5vZGUuSW5oZXJpdFR5cGUudmFsdWUpXG5cbiAgICBpZiAoJ0dlb21ldHJpY1RyYW5zbGF0aW9uJyBpbiBtb2RlbE5vZGUpIHRyYW5zZm9ybURhdGEudHJhbnNsYXRpb24gPSBtb2RlbE5vZGUuR2VvbWV0cmljVHJhbnNsYXRpb24udmFsdWVcbiAgICBpZiAoJ0dlb21ldHJpY1JvdGF0aW9uJyBpbiBtb2RlbE5vZGUpIHRyYW5zZm9ybURhdGEucm90YXRpb24gPSBtb2RlbE5vZGUuR2VvbWV0cmljUm90YXRpb24udmFsdWVcbiAgICBpZiAoJ0dlb21ldHJpY1NjYWxpbmcnIGluIG1vZGVsTm9kZSkgdHJhbnNmb3JtRGF0YS5zY2FsZSA9IG1vZGVsTm9kZS5HZW9tZXRyaWNTY2FsaW5nLnZhbHVlXG5cbiAgICBjb25zdCB0cmFuc2Zvcm0gPSBnZW5lcmF0ZVRyYW5zZm9ybSh0cmFuc2Zvcm1EYXRhKVxuXG4gICAgcmV0dXJuIHRoaXMuZ2VuR2VvbWV0cnkoZ2VvTm9kZSwgc2tlbGV0b24sIG1vcnBoVGFyZ2V0LCB0cmFuc2Zvcm0pXG4gIH1cblxuICAvLyBHZW5lcmF0ZSBhIEJ1ZmZlckdlb21ldHJ5IGZyb20gYSBub2RlIGluIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeVxuICBnZW5HZW9tZXRyeShnZW9Ob2RlLCBza2VsZXRvbiwgbW9ycGhUYXJnZXQsIHByZVRyYW5zZm9ybSkge1xuICAgIGNvbnN0IGdlbzogYW55ID0gbmV3IEJ1ZmZlckdlb21ldHJ5KClcbiAgICBpZiAoZ2VvTm9kZS5hdHRyTmFtZSkgZ2VvLm5hbWUgPSBnZW9Ob2RlLmF0dHJOYW1lXG5cbiAgICBjb25zdCBnZW9JbmZvOiBhbnkgPSB0aGlzLnBhcnNlR2VvTm9kZShnZW9Ob2RlLCBza2VsZXRvbilcbiAgICBjb25zdCBidWZmZXJzOiBhbnkgPSB0aGlzLmdlbkJ1ZmZlcnMoZ2VvSW5mbylcblxuICAgIGNvbnN0IHBvc2l0aW9uQXR0cmlidXRlID0gbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoYnVmZmVycy52ZXJ0ZXgsIDMpXG5cbiAgICBwcmVUcmFuc2Zvcm0uYXBwbHlUb0J1ZmZlckF0dHJpYnV0ZShwb3NpdGlvbkF0dHJpYnV0ZSlcblxuICAgIGdlby5hZGRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgcG9zaXRpb25BdHRyaWJ1dGUpXG5cbiAgICBpZiAoYnVmZmVycy5jb2xvcnMubGVuZ3RoID4gMCkge1xuICAgICAgZ2VvLmFkZEF0dHJpYnV0ZSgnY29sb3InLCBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShidWZmZXJzLmNvbG9ycywgMykpXG4gICAgfVxuXG4gICAgaWYgKHNrZWxldG9uKSB7XG4gICAgICBnZW8uYWRkQXR0cmlidXRlKCdza2luSW5kZXgnLCBuZXcgVWludDE2QnVmZmVyQXR0cmlidXRlKGJ1ZmZlcnMud2VpZ2h0c0luZGljZXMsIDQpKVxuXG4gICAgICBnZW8uYWRkQXR0cmlidXRlKCdza2luV2VpZ2h0JywgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoYnVmZmVycy52ZXJ0ZXhXZWlnaHRzLCA0KSlcblxuICAgICAgLy8gdXNlZCBsYXRlciB0byBiaW5kIHRoZSBza2VsZXRvbiB0byB0aGUgbW9kZWxcbiAgICAgIGdlby5GQlhfRGVmb3JtZXIgPSBza2VsZXRvblxuICAgIH1cblxuICAgIGlmIChidWZmZXJzLm5vcm1hbC5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBub3JtYWxBdHRyaWJ1dGUgPSBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShidWZmZXJzLm5vcm1hbCwgMylcblxuICAgICAgY29uc3Qgbm9ybWFsTWF0cml4ID0gbmV3IE1hdHJpeDMoKS5nZXROb3JtYWxNYXRyaXgocHJlVHJhbnNmb3JtKVxuICAgICAgbm9ybWFsQXR0cmlidXRlLmFwcGx5TWF0cml4Myhub3JtYWxNYXRyaXgpXG5cbiAgICAgIGdlby5hZGRBdHRyaWJ1dGUoJ25vcm1hbCcsIG5vcm1hbEF0dHJpYnV0ZSlcbiAgICB9XG5cbiAgICBidWZmZXJzLnV2cy5mb3JFYWNoKCh1dkJ1ZmZlciwgaSkgPT4ge1xuICAgICAgLy8gc3Vic2VxdWVudCB1diBidWZmZXJzIGFyZSBjYWxsZWQgJ3V2MScsICd1djInLCAuLi5cbiAgICAgIGxldCBuYW1lID0gJ3V2JyArIChpICsgMSkudG9TdHJpbmcoKVxuXG4gICAgICAvLyB0aGUgZmlyc3QgdXYgYnVmZmVyIGlzIGp1c3QgY2FsbGVkICd1didcbiAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgIG5hbWUgPSAndXYnXG4gICAgICB9XG5cbiAgICAgIGdlby5hZGRBdHRyaWJ1dGUobmFtZSwgbmV3IEZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoYnVmZmVycy51dnNbaV0sIDIpKVxuICAgIH0pXG5cbiAgICBpZiAoZ2VvSW5mby5tYXRlcmlhbCAmJiBnZW9JbmZvLm1hdGVyaWFsLm1hcHBpbmdUeXBlICE9PSAnQWxsU2FtZScpIHtcbiAgICAgIC8vIENvbnZlcnQgdGhlIG1hdGVyaWFsIGluZGljZXMgb2YgZWFjaCB2ZXJ0ZXggaW50byByZW5kZXJpbmcgZ3JvdXBzIG9uIHRoZSBnZW9tZXRyeS5cbiAgICAgIGxldCBwcmV2TWF0ZXJpYWxJbmRleCA9IGJ1ZmZlcnMubWF0ZXJpYWxJbmRleFswXVxuICAgICAgbGV0IHN0YXJ0SW5kZXggPSAwXG5cbiAgICAgIGJ1ZmZlcnMubWF0ZXJpYWxJbmRleC5mb3JFYWNoKChjdXJyZW50SW5kZXgsIGkpID0+IHtcbiAgICAgICAgaWYgKGN1cnJlbnRJbmRleCAhPT0gcHJldk1hdGVyaWFsSW5kZXgpIHtcbiAgICAgICAgICBnZW8uYWRkR3JvdXAoc3RhcnRJbmRleCwgaSAtIHN0YXJ0SW5kZXgsIHByZXZNYXRlcmlhbEluZGV4KVxuXG4gICAgICAgICAgcHJldk1hdGVyaWFsSW5kZXggPSBjdXJyZW50SW5kZXhcbiAgICAgICAgICBzdGFydEluZGV4ID0gaVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICAvLyB0aGUgbG9vcCBhYm92ZSBkb2Vzbid0IGFkZCB0aGUgbGFzdCBncm91cCwgZG8gdGhhdCBoZXJlLlxuICAgICAgaWYgKGdlby5ncm91cHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBsYXN0R3JvdXAgPSBnZW8uZ3JvdXBzW2dlby5ncm91cHMubGVuZ3RoIC0gMV1cbiAgICAgICAgY29uc3QgbGFzdEluZGV4ID0gbGFzdEdyb3VwLnN0YXJ0ICsgbGFzdEdyb3VwLmNvdW50XG5cbiAgICAgICAgaWYgKGxhc3RJbmRleCAhPT0gYnVmZmVycy5tYXRlcmlhbEluZGV4Lmxlbmd0aCkge1xuICAgICAgICAgIGdlby5hZGRHcm91cChsYXN0SW5kZXgsIGJ1ZmZlcnMubWF0ZXJpYWxJbmRleC5sZW5ndGggLSBsYXN0SW5kZXgsIHByZXZNYXRlcmlhbEluZGV4KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGNhc2Ugd2hlcmUgdGhlcmUgYXJlIG11bHRpcGxlIG1hdGVyaWFscyBidXQgdGhlIHdob2xlIGdlb21ldHJ5IGlzIG9ubHlcbiAgICAgIC8vIHVzaW5nIG9uZSBvZiB0aGVtXG4gICAgICBpZiAoZ2VvLmdyb3Vwcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZ2VvLmFkZEdyb3VwKDAsIGJ1ZmZlcnMubWF0ZXJpYWxJbmRleC5sZW5ndGgsIGJ1ZmZlcnMubWF0ZXJpYWxJbmRleFswXSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmFkZE1vcnBoVGFyZ2V0cyhnZW8sIGdlb05vZGUsIG1vcnBoVGFyZ2V0LCBwcmVUcmFuc2Zvcm0pXG5cbiAgICByZXR1cm4gZ2VvXG4gIH1cblxuICBwYXJzZUdlb05vZGUoZ2VvTm9kZSwgc2tlbGV0b24pIHtcbiAgICBjb25zdCBnZW9JbmZvOiBhbnkgPSB7fVxuXG4gICAgZ2VvSW5mby52ZXJ0ZXhQb3NpdGlvbnMgPSBnZW9Ob2RlLlZlcnRpY2VzICE9PSB1bmRlZmluZWQgPyBnZW9Ob2RlLlZlcnRpY2VzLmEgOiBbXVxuICAgIGdlb0luZm8udmVydGV4SW5kaWNlcyA9IGdlb05vZGUuUG9seWdvblZlcnRleEluZGV4ICE9PSB1bmRlZmluZWQgPyBnZW9Ob2RlLlBvbHlnb25WZXJ0ZXhJbmRleC5hIDogW11cblxuICAgIGlmIChnZW9Ob2RlLkxheWVyRWxlbWVudENvbG9yKSB7XG4gICAgICBnZW9JbmZvLmNvbG9yID0gdGhpcy5wYXJzZVZlcnRleENvbG9ycyhnZW9Ob2RlLkxheWVyRWxlbWVudENvbG9yWzBdKVxuICAgIH1cblxuICAgIGlmIChnZW9Ob2RlLkxheWVyRWxlbWVudE1hdGVyaWFsKSB7XG4gICAgICBnZW9JbmZvLm1hdGVyaWFsID0gdGhpcy5wYXJzZU1hdGVyaWFsSW5kaWNlcyhnZW9Ob2RlLkxheWVyRWxlbWVudE1hdGVyaWFsWzBdKVxuICAgIH1cblxuICAgIGlmIChnZW9Ob2RlLkxheWVyRWxlbWVudE5vcm1hbCkge1xuICAgICAgZ2VvSW5mby5ub3JtYWwgPSB0aGlzLnBhcnNlTm9ybWFscyhnZW9Ob2RlLkxheWVyRWxlbWVudE5vcm1hbFswXSlcbiAgICB9XG5cbiAgICBpZiAoZ2VvTm9kZS5MYXllckVsZW1lbnRVVikge1xuICAgICAgZ2VvSW5mby51diA9IFtdXG5cbiAgICAgIGxldCBpID0gMFxuICAgICAgd2hpbGUgKGdlb05vZGUuTGF5ZXJFbGVtZW50VVZbaV0pIHtcbiAgICAgICAgZ2VvSW5mby51di5wdXNoKHRoaXMucGFyc2VVVnMoZ2VvTm9kZS5MYXllckVsZW1lbnRVVltpXSkpXG4gICAgICAgIGkrK1xuICAgICAgfVxuICAgIH1cblxuICAgIGdlb0luZm8ud2VpZ2h0VGFibGUgPSB7fVxuXG4gICAgaWYgKHNrZWxldG9uICE9PSBudWxsKSB7XG4gICAgICBnZW9JbmZvLnNrZWxldG9uID0gc2tlbGV0b25cblxuICAgICAgc2tlbGV0b24ucmF3Qm9uZXMuZm9yRWFjaCgocmF3Qm9uZSwgaSkgPT4ge1xuICAgICAgICAvLyBsb29wIG92ZXIgdGhlIGJvbmUncyB2ZXJ0ZXggaW5kaWNlcyBhbmQgd2VpZ2h0c1xuICAgICAgICByYXdCb25lLmluZGljZXMuZm9yRWFjaCgoaW5kZXgsIGopID0+IHtcbiAgICAgICAgICBpZiAoZ2VvSW5mby53ZWlnaHRUYWJsZVtpbmRleF0gPT09IHVuZGVmaW5lZCkgZ2VvSW5mby53ZWlnaHRUYWJsZVtpbmRleF0gPSBbXVxuXG4gICAgICAgICAgZ2VvSW5mby53ZWlnaHRUYWJsZVtpbmRleF0ucHVzaCh7XG4gICAgICAgICAgICBpZDogaSxcbiAgICAgICAgICAgIHdlaWdodDogcmF3Qm9uZS53ZWlnaHRzW2pdXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIGdlb0luZm9cbiAgfVxuXG4gIGdlbkJ1ZmZlcnMoZ2VvSW5mbykge1xuICAgIGNvbnN0IGJ1ZmZlcnM6IGFueSA9IHtcbiAgICAgIHZlcnRleDogW10sXG4gICAgICBub3JtYWw6IFtdLFxuICAgICAgY29sb3JzOiBbXSxcbiAgICAgIHV2czogW10sXG4gICAgICBtYXRlcmlhbEluZGV4OiBbXSxcbiAgICAgIHZlcnRleFdlaWdodHM6IFtdLFxuICAgICAgd2VpZ2h0c0luZGljZXM6IFtdXG4gICAgfVxuXG4gICAgbGV0IG1hdGVyaWFsSW5kZXhcbiAgICBsZXQgcG9seWdvbkluZGV4ID0gMFxuICAgIGxldCBmYWNlTGVuZ3RoID0gMFxuICAgIGxldCBkaXNwbGF5ZWRXZWlnaHRzV2FybmluZyA9IGZhbHNlXG5cbiAgICAvLyB0aGVzZSB3aWxsIGhvbGQgZGF0YSBmb3IgYSBzaW5nbGUgZmFjZVxuICAgIGxldCBmYWNlUG9zaXRpb25JbmRleGVzOiBhbnkgPSBbXVxuICAgIGxldCBmYWNlTm9ybWFsczogYW55ID0gW11cbiAgICBsZXQgZmFjZUNvbG9yczogYW55ID0gW11cbiAgICBsZXQgZmFjZVVWczogYW55ID0gW11cbiAgICBsZXQgZmFjZVdlaWdodHM6IGFueSA9IFtdXG4gICAgbGV0IGZhY2VXZWlnaHRJbmRpY2VzOiBhbnkgPSBbXVxuXG4gICAgZ2VvSW5mby52ZXJ0ZXhJbmRpY2VzLmZvckVhY2goKHZlcnRleEluZGV4LCBwb2x5Z29uVmVydGV4SW5kZXgpID0+IHtcbiAgICAgIGxldCBlbmRPZkZhY2UgPSBmYWxzZVxuXG4gICAgICAvLyBGYWNlIGluZGV4IGFuZCB2ZXJ0ZXggaW5kZXggYXJyYXlzIGFyZSBjb21iaW5lZCBpbiBhIHNpbmdsZSBhcnJheVxuICAgICAgLy8gQSBjdWJlIHdpdGggcXVhZCBmYWNlcyBsb29rcyBsaWtlIHRoaXM6XG4gICAgICAvLyBQb2x5Z29uVmVydGV4SW5kZXg6ICoyNCB7XG4gICAgICAvLyAgYTogMCwgMSwgMywgLTMsIDIsIDMsIDUsIC01LCA0LCA1LCA3LCAtNywgNiwgNywgMSwgLTEsIDEsIDcsIDUsIC00LCA2LCAwLCAyLCAtNVxuICAgICAgLy8gIH1cbiAgICAgIC8vIE5lZ2F0aXZlIG51bWJlcnMgbWFyayB0aGUgZW5kIG9mIGEgZmFjZSAtIGZpcnN0IGZhY2UgaGVyZSBpcyAwLCAxLCAzLCAtM1xuICAgICAgLy8gdG8gZmluZCBpbmRleCBvZiBsYXN0IHZlcnRleCBiaXQgc2hpZnQgdGhlIGluZGV4OiBeIC0gMVxuICAgICAgaWYgKHZlcnRleEluZGV4IDwgMCkge1xuICAgICAgICB2ZXJ0ZXhJbmRleCA9IHZlcnRleEluZGV4IF4gLTEgLy8gZXF1aXZhbGVudCB0byAoIHggKiAtMSApIC0gMVxuICAgICAgICBlbmRPZkZhY2UgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGxldCB3ZWlnaHRJbmRpY2VzOiBhbnkgPSBbXVxuICAgICAgbGV0IHdlaWdodHM6IGFueSA9IFtdXG5cbiAgICAgIGZhY2VQb3NpdGlvbkluZGV4ZXMucHVzaCh2ZXJ0ZXhJbmRleCAqIDMsIHZlcnRleEluZGV4ICogMyArIDEsIHZlcnRleEluZGV4ICogMyArIDIpXG5cbiAgICAgIGlmIChnZW9JbmZvLmNvbG9yKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBnZXREYXRhKHBvbHlnb25WZXJ0ZXhJbmRleCwgcG9seWdvbkluZGV4LCB2ZXJ0ZXhJbmRleCwgZ2VvSW5mby5jb2xvcilcblxuICAgICAgICBmYWNlQ29sb3JzLnB1c2goZGF0YVswXSwgZGF0YVsxXSwgZGF0YVsyXSlcbiAgICAgIH1cblxuICAgICAgaWYgKGdlb0luZm8uc2tlbGV0b24pIHtcbiAgICAgICAgaWYgKGdlb0luZm8ud2VpZ2h0VGFibGVbdmVydGV4SW5kZXhdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBnZW9JbmZvLndlaWdodFRhYmxlW3ZlcnRleEluZGV4XS5mb3JFYWNoKCh3dCkgPT4ge1xuICAgICAgICAgICAgd2VpZ2h0cy5wdXNoKHd0LndlaWdodClcbiAgICAgICAgICAgIHdlaWdodEluZGljZXMucHVzaCh3dC5pZClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHdlaWdodHMubGVuZ3RoID4gNCkge1xuICAgICAgICAgIGlmICghZGlzcGxheWVkV2VpZ2h0c1dhcm5pbmcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgJ0ZCWExvYWRlcjogVmVydGV4IGhhcyBtb3JlIHRoYW4gNCBza2lubmluZyB3ZWlnaHRzIGFzc2lnbmVkIHRvIHZlcnRleC4gRGVsZXRpbmcgYWRkaXRpb25hbCB3ZWlnaHRzLidcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGRpc3BsYXllZFdlaWdodHNXYXJuaW5nID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHdJbmRleCA9IFswLCAwLCAwLCAwXVxuICAgICAgICAgIGNvbnN0IFdlaWdodCA9IFswLCAwLCAwLCAwXVxuXG4gICAgICAgICAgd2VpZ2h0cy5mb3JFYWNoKCh3ZWlnaHQsIHdlaWdodEluZGV4KSA9PiB7XG4gICAgICAgICAgICBsZXQgY3VycmVudFdlaWdodCA9IHdlaWdodFxuICAgICAgICAgICAgbGV0IGN1cnJlbnRJbmRleCA9IHdlaWdodEluZGljZXNbd2VpZ2h0SW5kZXhdXG5cbiAgICAgICAgICAgIFdlaWdodC5mb3JFYWNoKChjb21wYXJlZFdlaWdodCwgY29tcGFyZWRXZWlnaHRJbmRleCwgY29tcGFyZWRXZWlnaHRBcnJheSkgPT4ge1xuICAgICAgICAgICAgICBpZiAoY3VycmVudFdlaWdodCA+IGNvbXBhcmVkV2VpZ2h0KSB7XG4gICAgICAgICAgICAgICAgY29tcGFyZWRXZWlnaHRBcnJheVtjb21wYXJlZFdlaWdodEluZGV4XSA9IGN1cnJlbnRXZWlnaHRcbiAgICAgICAgICAgICAgICBjdXJyZW50V2VpZ2h0ID0gY29tcGFyZWRXZWlnaHRcblxuICAgICAgICAgICAgICAgIGNvbnN0IHRtcCA9IHdJbmRleFtjb21wYXJlZFdlaWdodEluZGV4XVxuICAgICAgICAgICAgICAgIHdJbmRleFtjb21wYXJlZFdlaWdodEluZGV4XSA9IGN1cnJlbnRJbmRleFxuICAgICAgICAgICAgICAgIGN1cnJlbnRJbmRleCA9IHRtcFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICB3ZWlnaHRJbmRpY2VzID0gd0luZGV4XG4gICAgICAgICAgd2VpZ2h0cyA9IFdlaWdodFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgdGhlIHdlaWdodCBhcnJheSBpcyBzaG9ydGVyIHRoYW4gNCBwYWQgd2l0aCAwc1xuICAgICAgICB3aGlsZSAod2VpZ2h0cy5sZW5ndGggPCA0KSB7XG4gICAgICAgICAgd2VpZ2h0cy5wdXNoKDApXG4gICAgICAgICAgd2VpZ2h0SW5kaWNlcy5wdXNoKDApXG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7ICsraSkge1xuICAgICAgICAgIGZhY2VXZWlnaHRzLnB1c2god2VpZ2h0c1tpXSlcbiAgICAgICAgICBmYWNlV2VpZ2h0SW5kaWNlcy5wdXNoKHdlaWdodEluZGljZXNbaV0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGdlb0luZm8ubm9ybWFsKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBnZXREYXRhKHBvbHlnb25WZXJ0ZXhJbmRleCwgcG9seWdvbkluZGV4LCB2ZXJ0ZXhJbmRleCwgZ2VvSW5mby5ub3JtYWwpXG5cbiAgICAgICAgZmFjZU5vcm1hbHMucHVzaChkYXRhWzBdLCBkYXRhWzFdLCBkYXRhWzJdKVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2VvSW5mby5tYXRlcmlhbCAmJiBnZW9JbmZvLm1hdGVyaWFsLm1hcHBpbmdUeXBlICE9PSAnQWxsU2FtZScpIHtcbiAgICAgICAgY29uc3QgbWF0ZXJpYWxJbmRleCA9IGdldERhdGEocG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCBnZW9JbmZvLm1hdGVyaWFsKVswXVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2VvSW5mby51dikge1xuICAgICAgICBnZW9JbmZvLnV2LmZvckVhY2goKHV2LCBpKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IGdldERhdGEocG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCB1dilcblxuICAgICAgICAgIGlmIChmYWNlVVZzW2ldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZhY2VVVnNbaV0gPSBbXVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZhY2VVVnNbaV0ucHVzaChkYXRhWzBdKVxuICAgICAgICAgIGZhY2VVVnNbaV0ucHVzaChkYXRhWzFdKVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBmYWNlTGVuZ3RoKytcblxuICAgICAgaWYgKGVuZE9mRmFjZSkge1xuICAgICAgICB0aGlzLmdlbkZhY2UoXG4gICAgICAgICAgYnVmZmVycyxcbiAgICAgICAgICBnZW9JbmZvLFxuICAgICAgICAgIGZhY2VQb3NpdGlvbkluZGV4ZXMsXG4gICAgICAgICAgbWF0ZXJpYWxJbmRleCxcbiAgICAgICAgICBmYWNlTm9ybWFscyxcbiAgICAgICAgICBmYWNlQ29sb3JzLFxuICAgICAgICAgIGZhY2VVVnMsXG4gICAgICAgICAgZmFjZVdlaWdodHMsXG4gICAgICAgICAgZmFjZVdlaWdodEluZGljZXMsXG4gICAgICAgICAgZmFjZUxlbmd0aFxuICAgICAgICApXG5cbiAgICAgICAgcG9seWdvbkluZGV4KytcbiAgICAgICAgZmFjZUxlbmd0aCA9IDBcblxuICAgICAgICAvLyByZXNldCBhcnJheXMgZm9yIHRoZSBuZXh0IGZhY2VcbiAgICAgICAgZmFjZVBvc2l0aW9uSW5kZXhlcyA9IFtdXG4gICAgICAgIGZhY2VOb3JtYWxzID0gW11cbiAgICAgICAgZmFjZUNvbG9ycyA9IFtdXG4gICAgICAgIGZhY2VVVnMgPSBbXVxuICAgICAgICBmYWNlV2VpZ2h0cyA9IFtdXG4gICAgICAgIGZhY2VXZWlnaHRJbmRpY2VzID0gW11cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIGJ1ZmZlcnNcbiAgfVxuXG4gIC8vIEdlbmVyYXRlIGRhdGEgZm9yIGEgc2luZ2xlIGZhY2UgaW4gYSBnZW9tZXRyeS4gSWYgdGhlIGZhY2UgaXMgYSBxdWFkIHRoZW4gc3BsaXQgaXQgaW50byAyIHRyaXNcbiAgZ2VuRmFjZShcbiAgICBidWZmZXJzLFxuICAgIGdlb0luZm8sXG4gICAgZmFjZVBvc2l0aW9uSW5kZXhlcyxcbiAgICBtYXRlcmlhbEluZGV4LFxuICAgIGZhY2VOb3JtYWxzLFxuICAgIGZhY2VDb2xvcnMsXG4gICAgZmFjZVVWcyxcbiAgICBmYWNlV2VpZ2h0cyxcbiAgICBmYWNlV2VpZ2h0SW5kaWNlcyxcbiAgICBmYWNlTGVuZ3RoXG4gICkge1xuICAgIGZvciAobGV0IGkgPSAyOyBpIDwgZmFjZUxlbmd0aDsgaSsrKSB7XG4gICAgICBidWZmZXJzLnZlcnRleC5wdXNoKGdlb0luZm8udmVydGV4UG9zaXRpb25zW2ZhY2VQb3NpdGlvbkluZGV4ZXNbMF1dKVxuICAgICAgYnVmZmVycy52ZXJ0ZXgucHVzaChnZW9JbmZvLnZlcnRleFBvc2l0aW9uc1tmYWNlUG9zaXRpb25JbmRleGVzWzFdXSlcbiAgICAgIGJ1ZmZlcnMudmVydGV4LnB1c2goZ2VvSW5mby52ZXJ0ZXhQb3NpdGlvbnNbZmFjZVBvc2l0aW9uSW5kZXhlc1syXV0pXG5cbiAgICAgIGJ1ZmZlcnMudmVydGV4LnB1c2goZ2VvSW5mby52ZXJ0ZXhQb3NpdGlvbnNbZmFjZVBvc2l0aW9uSW5kZXhlc1soaSAtIDEpICogM11dKVxuICAgICAgYnVmZmVycy52ZXJ0ZXgucHVzaChnZW9JbmZvLnZlcnRleFBvc2l0aW9uc1tmYWNlUG9zaXRpb25JbmRleGVzWyhpIC0gMSkgKiAzICsgMV1dKVxuICAgICAgYnVmZmVycy52ZXJ0ZXgucHVzaChnZW9JbmZvLnZlcnRleFBvc2l0aW9uc1tmYWNlUG9zaXRpb25JbmRleGVzWyhpIC0gMSkgKiAzICsgMl1dKVxuXG4gICAgICBidWZmZXJzLnZlcnRleC5wdXNoKGdlb0luZm8udmVydGV4UG9zaXRpb25zW2ZhY2VQb3NpdGlvbkluZGV4ZXNbaSAqIDNdXSlcbiAgICAgIGJ1ZmZlcnMudmVydGV4LnB1c2goZ2VvSW5mby52ZXJ0ZXhQb3NpdGlvbnNbZmFjZVBvc2l0aW9uSW5kZXhlc1tpICogMyArIDFdXSlcbiAgICAgIGJ1ZmZlcnMudmVydGV4LnB1c2goZ2VvSW5mby52ZXJ0ZXhQb3NpdGlvbnNbZmFjZVBvc2l0aW9uSW5kZXhlc1tpICogMyArIDJdXSlcblxuICAgICAgaWYgKGdlb0luZm8uc2tlbGV0b24pIHtcbiAgICAgICAgYnVmZmVycy52ZXJ0ZXhXZWlnaHRzLnB1c2goZmFjZVdlaWdodHNbMF0pXG4gICAgICAgIGJ1ZmZlcnMudmVydGV4V2VpZ2h0cy5wdXNoKGZhY2VXZWlnaHRzWzFdKVxuICAgICAgICBidWZmZXJzLnZlcnRleFdlaWdodHMucHVzaChmYWNlV2VpZ2h0c1syXSlcbiAgICAgICAgYnVmZmVycy52ZXJ0ZXhXZWlnaHRzLnB1c2goZmFjZVdlaWdodHNbM10pXG5cbiAgICAgICAgYnVmZmVycy52ZXJ0ZXhXZWlnaHRzLnB1c2goZmFjZVdlaWdodHNbKGkgLSAxKSAqIDRdKVxuICAgICAgICBidWZmZXJzLnZlcnRleFdlaWdodHMucHVzaChmYWNlV2VpZ2h0c1soaSAtIDEpICogNCArIDFdKVxuICAgICAgICBidWZmZXJzLnZlcnRleFdlaWdodHMucHVzaChmYWNlV2VpZ2h0c1soaSAtIDEpICogNCArIDJdKVxuICAgICAgICBidWZmZXJzLnZlcnRleFdlaWdodHMucHVzaChmYWNlV2VpZ2h0c1soaSAtIDEpICogNCArIDNdKVxuXG4gICAgICAgIGJ1ZmZlcnMudmVydGV4V2VpZ2h0cy5wdXNoKGZhY2VXZWlnaHRzW2kgKiA0XSlcbiAgICAgICAgYnVmZmVycy52ZXJ0ZXhXZWlnaHRzLnB1c2goZmFjZVdlaWdodHNbaSAqIDQgKyAxXSlcbiAgICAgICAgYnVmZmVycy52ZXJ0ZXhXZWlnaHRzLnB1c2goZmFjZVdlaWdodHNbaSAqIDQgKyAyXSlcbiAgICAgICAgYnVmZmVycy52ZXJ0ZXhXZWlnaHRzLnB1c2goZmFjZVdlaWdodHNbaSAqIDQgKyAzXSlcblxuICAgICAgICBidWZmZXJzLndlaWdodHNJbmRpY2VzLnB1c2goZmFjZVdlaWdodEluZGljZXNbMF0pXG4gICAgICAgIGJ1ZmZlcnMud2VpZ2h0c0luZGljZXMucHVzaChmYWNlV2VpZ2h0SW5kaWNlc1sxXSlcbiAgICAgICAgYnVmZmVycy53ZWlnaHRzSW5kaWNlcy5wdXNoKGZhY2VXZWlnaHRJbmRpY2VzWzJdKVxuICAgICAgICBidWZmZXJzLndlaWdodHNJbmRpY2VzLnB1c2goZmFjZVdlaWdodEluZGljZXNbM10pXG5cbiAgICAgICAgYnVmZmVycy53ZWlnaHRzSW5kaWNlcy5wdXNoKGZhY2VXZWlnaHRJbmRpY2VzWyhpIC0gMSkgKiA0XSlcbiAgICAgICAgYnVmZmVycy53ZWlnaHRzSW5kaWNlcy5wdXNoKGZhY2VXZWlnaHRJbmRpY2VzWyhpIC0gMSkgKiA0ICsgMV0pXG4gICAgICAgIGJ1ZmZlcnMud2VpZ2h0c0luZGljZXMucHVzaChmYWNlV2VpZ2h0SW5kaWNlc1soaSAtIDEpICogNCArIDJdKVxuICAgICAgICBidWZmZXJzLndlaWdodHNJbmRpY2VzLnB1c2goZmFjZVdlaWdodEluZGljZXNbKGkgLSAxKSAqIDQgKyAzXSlcblxuICAgICAgICBidWZmZXJzLndlaWdodHNJbmRpY2VzLnB1c2goZmFjZVdlaWdodEluZGljZXNbaSAqIDRdKVxuICAgICAgICBidWZmZXJzLndlaWdodHNJbmRpY2VzLnB1c2goZmFjZVdlaWdodEluZGljZXNbaSAqIDQgKyAxXSlcbiAgICAgICAgYnVmZmVycy53ZWlnaHRzSW5kaWNlcy5wdXNoKGZhY2VXZWlnaHRJbmRpY2VzW2kgKiA0ICsgMl0pXG4gICAgICAgIGJ1ZmZlcnMud2VpZ2h0c0luZGljZXMucHVzaChmYWNlV2VpZ2h0SW5kaWNlc1tpICogNCArIDNdKVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2VvSW5mby5jb2xvcikge1xuICAgICAgICBidWZmZXJzLmNvbG9ycy5wdXNoKGZhY2VDb2xvcnNbMF0pXG4gICAgICAgIGJ1ZmZlcnMuY29sb3JzLnB1c2goZmFjZUNvbG9yc1sxXSlcbiAgICAgICAgYnVmZmVycy5jb2xvcnMucHVzaChmYWNlQ29sb3JzWzJdKVxuXG4gICAgICAgIGJ1ZmZlcnMuY29sb3JzLnB1c2goZmFjZUNvbG9yc1soaSAtIDEpICogM10pXG4gICAgICAgIGJ1ZmZlcnMuY29sb3JzLnB1c2goZmFjZUNvbG9yc1soaSAtIDEpICogMyArIDFdKVxuICAgICAgICBidWZmZXJzLmNvbG9ycy5wdXNoKGZhY2VDb2xvcnNbKGkgLSAxKSAqIDMgKyAyXSlcblxuICAgICAgICBidWZmZXJzLmNvbG9ycy5wdXNoKGZhY2VDb2xvcnNbaSAqIDNdKVxuICAgICAgICBidWZmZXJzLmNvbG9ycy5wdXNoKGZhY2VDb2xvcnNbaSAqIDMgKyAxXSlcbiAgICAgICAgYnVmZmVycy5jb2xvcnMucHVzaChmYWNlQ29sb3JzW2kgKiAzICsgMl0pXG4gICAgICB9XG5cbiAgICAgIGlmIChnZW9JbmZvLm1hdGVyaWFsICYmIGdlb0luZm8ubWF0ZXJpYWwubWFwcGluZ1R5cGUgIT09ICdBbGxTYW1lJykge1xuICAgICAgICBidWZmZXJzLm1hdGVyaWFsSW5kZXgucHVzaChtYXRlcmlhbEluZGV4KVxuICAgICAgICBidWZmZXJzLm1hdGVyaWFsSW5kZXgucHVzaChtYXRlcmlhbEluZGV4KVxuICAgICAgICBidWZmZXJzLm1hdGVyaWFsSW5kZXgucHVzaChtYXRlcmlhbEluZGV4KVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2VvSW5mby5ub3JtYWwpIHtcbiAgICAgICAgYnVmZmVycy5ub3JtYWwucHVzaChmYWNlTm9ybWFsc1swXSlcbiAgICAgICAgYnVmZmVycy5ub3JtYWwucHVzaChmYWNlTm9ybWFsc1sxXSlcbiAgICAgICAgYnVmZmVycy5ub3JtYWwucHVzaChmYWNlTm9ybWFsc1syXSlcblxuICAgICAgICBidWZmZXJzLm5vcm1hbC5wdXNoKGZhY2VOb3JtYWxzWyhpIC0gMSkgKiAzXSlcbiAgICAgICAgYnVmZmVycy5ub3JtYWwucHVzaChmYWNlTm9ybWFsc1soaSAtIDEpICogMyArIDFdKVxuICAgICAgICBidWZmZXJzLm5vcm1hbC5wdXNoKGZhY2VOb3JtYWxzWyhpIC0gMSkgKiAzICsgMl0pXG5cbiAgICAgICAgYnVmZmVycy5ub3JtYWwucHVzaChmYWNlTm9ybWFsc1tpICogM10pXG4gICAgICAgIGJ1ZmZlcnMubm9ybWFsLnB1c2goZmFjZU5vcm1hbHNbaSAqIDMgKyAxXSlcbiAgICAgICAgYnVmZmVycy5ub3JtYWwucHVzaChmYWNlTm9ybWFsc1tpICogMyArIDJdKVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2VvSW5mby51dikge1xuICAgICAgICBnZW9JbmZvLnV2LmZvckVhY2goKHV2LCBqKSA9PiB7XG4gICAgICAgICAgaWYgKGJ1ZmZlcnMudXZzW2pdID09PSB1bmRlZmluZWQpIGJ1ZmZlcnMudXZzW2pdID0gW11cblxuICAgICAgICAgIGJ1ZmZlcnMudXZzW2pdLnB1c2goZmFjZVVWc1tqXVswXSlcbiAgICAgICAgICBidWZmZXJzLnV2c1tqXS5wdXNoKGZhY2VVVnNbal1bMV0pXG5cbiAgICAgICAgICBidWZmZXJzLnV2c1tqXS5wdXNoKGZhY2VVVnNbal1bKGkgLSAxKSAqIDJdKVxuICAgICAgICAgIGJ1ZmZlcnMudXZzW2pdLnB1c2goZmFjZVVWc1tqXVsoaSAtIDEpICogMiArIDFdKVxuXG4gICAgICAgICAgYnVmZmVycy51dnNbal0ucHVzaChmYWNlVVZzW2pdW2kgKiAyXSlcbiAgICAgICAgICBidWZmZXJzLnV2c1tqXS5wdXNoKGZhY2VVVnNbal1baSAqIDIgKyAxXSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhZGRNb3JwaFRhcmdldHMocGFyZW50R2VvLCBwYXJlbnRHZW9Ob2RlLCBtb3JwaFRhcmdldCwgcHJlVHJhbnNmb3JtKSB7XG4gICAgaWYgKG1vcnBoVGFyZ2V0ID09PSBudWxsKSByZXR1cm5cblxuICAgIHBhcmVudEdlby5tb3JwaEF0dHJpYnV0ZXMucG9zaXRpb24gPSBbXVxuICAgIC8vIHBhcmVudEdlby5tb3JwaEF0dHJpYnV0ZXMubm9ybWFsID0gW107IC8vIG5vdCBpbXBsZW1lbnRlZFxuXG4gICAgbW9ycGhUYXJnZXQucmF3VGFyZ2V0cy5mb3JFYWNoKChyYXdUYXJnZXQpID0+IHtcbiAgICAgIGNvbnN0IG1vcnBoR2VvTm9kZSA9IEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMuR2VvbWV0cnlbcmF3VGFyZ2V0Lmdlb0lEXVxuXG4gICAgICBpZiAobW9ycGhHZW9Ob2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5nZW5Nb3JwaEdlb21ldHJ5KHBhcmVudEdlbywgcGFyZW50R2VvTm9kZSwgbW9ycGhHZW9Ob2RlLCBwcmVUcmFuc2Zvcm0sIHJhd1RhcmdldC5uYW1lKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBhIG1vcnBoIGdlb21ldHJ5IG5vZGUgaXMgc2ltaWxhciB0byBhIHN0YW5kYXJkICBub2RlLCBhbmQgdGhlIG5vZGUgaXMgYWxzbyBjb250YWluZWRcbiAgLy8gaW4gRkJYVHJlZS5PYmplY3RzLkdlb21ldHJ5LCBob3dldmVyIGl0IGNhbiBvbmx5IGhhdmUgYXR0cmlidXRlcyBmb3IgcG9zaXRpb24sIG5vcm1hbFxuICAvLyBhbmQgYSBzcGVjaWFsIGF0dHJpYnV0ZSBJbmRleCBkZWZpbmluZyB3aGljaCB2ZXJ0aWNlcyBvZiB0aGUgb3JpZ2luYWwgZ2VvbWV0cnkgYXJlIGFmZmVjdGVkXG4gIC8vIE5vcm1hbCBhbmQgcG9zaXRpb24gYXR0cmlidXRlcyBvbmx5IGhhdmUgZGF0YSBmb3IgdGhlIHZlcnRpY2VzIHRoYXQgYXJlIGFmZmVjdGVkIGJ5IHRoZSBtb3JwaFxuICBnZW5Nb3JwaEdlb21ldHJ5KHBhcmVudEdlbywgcGFyZW50R2VvTm9kZSwgbW9ycGhHZW9Ob2RlLCBwcmVUcmFuc2Zvcm0sIG5hbWUpIHtcbiAgICBjb25zdCBtb3JwaEdlbyA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpXG4gICAgaWYgKG1vcnBoR2VvTm9kZS5hdHRyTmFtZSkgbW9ycGhHZW8ubmFtZSA9IG1vcnBoR2VvTm9kZS5hdHRyTmFtZVxuXG4gICAgY29uc3QgdmVydGV4SW5kaWNlcyA9IHBhcmVudEdlb05vZGUuUG9seWdvblZlcnRleEluZGV4ICE9PSB1bmRlZmluZWQgPyBwYXJlbnRHZW9Ob2RlLlBvbHlnb25WZXJ0ZXhJbmRleC5hIDogW11cblxuICAgIC8vIG1ha2UgYSBjb3B5IG9mIHRoZSBwYXJlbnQncyB2ZXJ0ZXggcG9zaXRpb25zXG4gICAgY29uc3QgdmVydGV4UG9zaXRpb25zID0gcGFyZW50R2VvTm9kZS5WZXJ0aWNlcyAhPT0gdW5kZWZpbmVkID8gcGFyZW50R2VvTm9kZS5WZXJ0aWNlcy5hLnNsaWNlKCkgOiBbXVxuXG4gICAgY29uc3QgbW9ycGhQb3NpdGlvbnMgPSBtb3JwaEdlb05vZGUuVmVydGljZXMgIT09IHVuZGVmaW5lZCA/IG1vcnBoR2VvTm9kZS5WZXJ0aWNlcy5hIDogW11cbiAgICBjb25zdCBpbmRpY2VzID0gbW9ycGhHZW9Ob2RlLkluZGV4ZXMgIT09IHVuZGVmaW5lZCA/IG1vcnBoR2VvTm9kZS5JbmRleGVzLmEgOiBbXVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBtb3JwaEluZGV4ID0gaW5kaWNlc1tpXSAqIDNcblxuICAgICAgLy8gRkJYIGZvcm1hdCB1c2VzIGJsZW5kIHNoYXBlcyByYXRoZXIgdGhhbiBtb3JwaCB0YXJnZXRzLiBUaGlzIGNhbiBiZSBjb252ZXJ0ZWRcbiAgICAgIC8vIGJ5IGFkZGl0aXZlbHkgY29tYmluaW5nIHRoZSBibGVuZCBzaGFwZSBwb3NpdGlvbnMgd2l0aCB0aGUgb3JpZ2luYWwgZ2VvbWV0cnkncyBwb3NpdGlvbnNcbiAgICAgIHZlcnRleFBvc2l0aW9uc1ttb3JwaEluZGV4XSArPSBtb3JwaFBvc2l0aW9uc1tpICogM11cbiAgICAgIHZlcnRleFBvc2l0aW9uc1ttb3JwaEluZGV4ICsgMV0gKz0gbW9ycGhQb3NpdGlvbnNbaSAqIDMgKyAxXVxuICAgICAgdmVydGV4UG9zaXRpb25zW21vcnBoSW5kZXggKyAyXSArPSBtb3JwaFBvc2l0aW9uc1tpICogMyArIDJdXG4gICAgfVxuXG4gICAgLy8gVE9ETzogYWRkIG1vcnBoIG5vcm1hbCBzdXBwb3J0XG4gICAgY29uc3QgbW9ycGhHZW9JbmZvID0ge1xuICAgICAgdmVydGV4SW5kaWNlczogdmVydGV4SW5kaWNlcyxcbiAgICAgIHZlcnRleFBvc2l0aW9uczogdmVydGV4UG9zaXRpb25zXG4gICAgfVxuXG4gICAgY29uc3QgbW9ycGhCdWZmZXJzID0gdGhpcy5nZW5CdWZmZXJzKG1vcnBoR2VvSW5mbylcblxuICAgIGNvbnN0IHBvc2l0aW9uQXR0cmlidXRlOiBhbnkgPSBuZXcgRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZShtb3JwaEJ1ZmZlcnMudmVydGV4LCAzKVxuICAgIHBvc2l0aW9uQXR0cmlidXRlLm5hbWUgPSBuYW1lIHx8IG1vcnBoR2VvTm9kZS5hdHRyTmFtZVxuXG4gICAgcHJlVHJhbnNmb3JtLmFwcGx5VG9CdWZmZXJBdHRyaWJ1dGUocG9zaXRpb25BdHRyaWJ1dGUpXG5cbiAgICBwYXJlbnRHZW8ubW9ycGhBdHRyaWJ1dGVzLnBvc2l0aW9uLnB1c2gocG9zaXRpb25BdHRyaWJ1dGUpXG4gIH1cblxuICAvLyBQYXJzZSBub3JtYWwgZnJvbSBGQlhUcmVlLk9iamVjdHMuR2VvbWV0cnkuTGF5ZXJFbGVtZW50Tm9ybWFsIGlmIGl0IGV4aXN0c1xuICBwYXJzZU5vcm1hbHMoTm9ybWFsTm9kZSkge1xuICAgIGNvbnN0IG1hcHBpbmdUeXBlID0gTm9ybWFsTm9kZS5NYXBwaW5nSW5mb3JtYXRpb25UeXBlXG4gICAgY29uc3QgcmVmZXJlbmNlVHlwZSA9IE5vcm1hbE5vZGUuUmVmZXJlbmNlSW5mb3JtYXRpb25UeXBlXG4gICAgY29uc3QgYnVmZmVyID0gTm9ybWFsTm9kZS5Ob3JtYWxzLmFcbiAgICBsZXQgaW5kZXhCdWZmZXI6IGFueSA9IFtdXG4gICAgaWYgKHJlZmVyZW5jZVR5cGUgPT09ICdJbmRleFRvRGlyZWN0Jykge1xuICAgICAgaWYgKCdOb3JtYWxJbmRleCcgaW4gTm9ybWFsTm9kZSkge1xuICAgICAgICBpbmRleEJ1ZmZlciA9IE5vcm1hbE5vZGUuTm9ybWFsSW5kZXguYVxuICAgICAgfSBlbHNlIGlmICgnTm9ybWFsc0luZGV4JyBpbiBOb3JtYWxOb2RlKSB7XG4gICAgICAgIGluZGV4QnVmZmVyID0gTm9ybWFsTm9kZS5Ob3JtYWxzSW5kZXguYVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhU2l6ZTogMyxcbiAgICAgIGJ1ZmZlcjogYnVmZmVyLFxuICAgICAgaW5kaWNlczogaW5kZXhCdWZmZXIsXG4gICAgICBtYXBwaW5nVHlwZTogbWFwcGluZ1R5cGUsXG4gICAgICByZWZlcmVuY2VUeXBlOiByZWZlcmVuY2VUeXBlXG4gICAgfVxuICB9XG5cbiAgLy8gUGFyc2UgVVZzIGZyb20gRkJYVHJlZS5PYmplY3RzLkdlb21ldHJ5LkxheWVyRWxlbWVudFVWIGlmIGl0IGV4aXN0c1xuICBwYXJzZVVWcyhVVk5vZGUpIHtcbiAgICBjb25zdCBtYXBwaW5nVHlwZSA9IFVWTm9kZS5NYXBwaW5nSW5mb3JtYXRpb25UeXBlXG4gICAgY29uc3QgcmVmZXJlbmNlVHlwZSA9IFVWTm9kZS5SZWZlcmVuY2VJbmZvcm1hdGlvblR5cGVcbiAgICBjb25zdCBidWZmZXIgPSBVVk5vZGUuVVYuYVxuICAgIGxldCBpbmRleEJ1ZmZlciA9IFtdXG4gICAgaWYgKHJlZmVyZW5jZVR5cGUgPT09ICdJbmRleFRvRGlyZWN0Jykge1xuICAgICAgaW5kZXhCdWZmZXIgPSBVVk5vZGUuVVZJbmRleC5hXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGFTaXplOiAyLFxuICAgICAgYnVmZmVyOiBidWZmZXIsXG4gICAgICBpbmRpY2VzOiBpbmRleEJ1ZmZlcixcbiAgICAgIG1hcHBpbmdUeXBlOiBtYXBwaW5nVHlwZSxcbiAgICAgIHJlZmVyZW5jZVR5cGU6IHJlZmVyZW5jZVR5cGVcbiAgICB9XG4gIH1cblxuICAvLyBQYXJzZSBWZXJ0ZXggQ29sb3JzIGZyb20gRkJYVHJlZS5PYmplY3RzLkdlb21ldHJ5LkxheWVyRWxlbWVudENvbG9yIGlmIGl0IGV4aXN0c1xuICBwYXJzZVZlcnRleENvbG9ycyhDb2xvck5vZGUpIHtcbiAgICBjb25zdCBtYXBwaW5nVHlwZSA9IENvbG9yTm9kZS5NYXBwaW5nSW5mb3JtYXRpb25UeXBlXG4gICAgY29uc3QgcmVmZXJlbmNlVHlwZSA9IENvbG9yTm9kZS5SZWZlcmVuY2VJbmZvcm1hdGlvblR5cGVcbiAgICBjb25zdCBidWZmZXIgPSBDb2xvck5vZGUuQ29sb3JzLmFcbiAgICBsZXQgaW5kZXhCdWZmZXIgPSBbXVxuICAgIGlmIChyZWZlcmVuY2VUeXBlID09PSAnSW5kZXhUb0RpcmVjdCcpIHtcbiAgICAgIGluZGV4QnVmZmVyID0gQ29sb3JOb2RlLkNvbG9ySW5kZXguYVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhU2l6ZTogNCxcbiAgICAgIGJ1ZmZlcjogYnVmZmVyLFxuICAgICAgaW5kaWNlczogaW5kZXhCdWZmZXIsXG4gICAgICBtYXBwaW5nVHlwZTogbWFwcGluZ1R5cGUsXG4gICAgICByZWZlcmVuY2VUeXBlOiByZWZlcmVuY2VUeXBlXG4gICAgfVxuICB9XG5cbiAgLy8gUGFyc2UgbWFwcGluZyBhbmQgbWF0ZXJpYWwgZGF0YSBpbiBGQlhUcmVlLk9iamVjdHMuR2VvbWV0cnkuTGF5ZXJFbGVtZW50TWF0ZXJpYWwgaWYgaXQgZXhpc3RzXG4gIHBhcnNlTWF0ZXJpYWxJbmRpY2VzKE1hdGVyaWFsTm9kZSkge1xuICAgIGNvbnN0IG1hcHBpbmdUeXBlID0gTWF0ZXJpYWxOb2RlLk1hcHBpbmdJbmZvcm1hdGlvblR5cGVcbiAgICBjb25zdCByZWZlcmVuY2VUeXBlID0gTWF0ZXJpYWxOb2RlLlJlZmVyZW5jZUluZm9ybWF0aW9uVHlwZVxuXG4gICAgaWYgKG1hcHBpbmdUeXBlID09PSAnTm9NYXBwaW5nSW5mb3JtYXRpb24nKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhU2l6ZTogMSxcbiAgICAgICAgYnVmZmVyOiBbMF0sXG4gICAgICAgIGluZGljZXM6IFswXSxcbiAgICAgICAgbWFwcGluZ1R5cGU6ICdBbGxTYW1lJyxcbiAgICAgICAgcmVmZXJlbmNlVHlwZTogcmVmZXJlbmNlVHlwZVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG1hdGVyaWFsSW5kZXhCdWZmZXIgPSBNYXRlcmlhbE5vZGUuTWF0ZXJpYWxzLmFcblxuICAgIC8vIFNpbmNlIG1hdGVyaWFscyBhcmUgc3RvcmVkIGFzIGluZGljZXMsIHRoZXJlJ3MgYSBiaXQgb2YgYSBtaXNtYXRjaCBiZXR3ZWVuIEZCWCBhbmQgd2hhdFxuICAgIC8vIHdlIGV4cGVjdC5TbyB3ZSBjcmVhdGUgYW4gaW50ZXJtZWRpYXRlIGJ1ZmZlciB0aGF0IHBvaW50cyB0byB0aGUgaW5kZXggaW4gdGhlIGJ1ZmZlcixcbiAgICAvLyBmb3IgY29uZm9ybWluZyB3aXRoIHRoZSBvdGhlciBmdW5jdGlvbnMgd2UndmUgd3JpdHRlbiBmb3Igb3RoZXIgZGF0YS5cbiAgICBjb25zdCBtYXRlcmlhbEluZGljZXM6IGFueSA9IFtdXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdGVyaWFsSW5kZXhCdWZmZXIubGVuZ3RoOyArK2kpIHtcbiAgICAgIG1hdGVyaWFsSW5kaWNlcy5wdXNoKGkpXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGFTaXplOiAxLFxuICAgICAgYnVmZmVyOiBtYXRlcmlhbEluZGV4QnVmZmVyLFxuICAgICAgaW5kaWNlczogbWF0ZXJpYWxJbmRpY2VzLFxuICAgICAgbWFwcGluZ1R5cGU6IG1hcHBpbmdUeXBlLFxuICAgICAgcmVmZXJlbmNlVHlwZTogcmVmZXJlbmNlVHlwZVxuICAgIH1cbiAgfVxuXG4gIC8vIEdlbmVyYXRlIGEgTnVyYkdlb21ldHJ5IGZyb20gYSBub2RlIGluIEZCWFRyZWUuT2JqZWN0cy5HZW9tZXRyeVxuICBwYXJzZU51cmJzR2VvbWV0cnkoZ2VvTm9kZSkge1xuICAgIC8vIGlmICggTlVSQlNDdXJ2ZSA9PT0gdW5kZWZpbmVkICkge1xuXG4gICAgLy8gICBjb25zb2xlLmVycm9yKCAnRkJYTG9hZGVyOiBUaGUgbG9hZGVyIHJlbGllcyBvbiBOVVJCU0N1cnZlIGZvciBhbnkgbnVyYnMgcHJlc2VudCBpbiB0aGUgbW9kZWwuIE51cmJzIHdpbGwgc2hvdyB1cCBhcyBlbXB0eSBnZW9tZXRyeS4nICk7XG4gICAgLy8gICByZXR1cm4gbmV3IEJ1ZmZlckdlb21ldHJ5KCk7XG5cbiAgICAvLyB9XG5cbiAgICBjb25zdCBvcmRlciA9IHBhcnNlSW50KGdlb05vZGUuT3JkZXIpXG5cbiAgICBpZiAoaXNOYU4ob3JkZXIpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGQlhMb2FkZXI6IEludmFsaWQgT3JkZXIgJXMgZ2l2ZW4gZm9yIGdlb21ldHJ5IElEOiAlcycsIGdlb05vZGUuT3JkZXIsIGdlb05vZGUuaWQpXG4gICAgICByZXR1cm4gbmV3IEJ1ZmZlckdlb21ldHJ5KClcbiAgICB9XG5cbiAgICBjb25zdCBkZWdyZWUgPSBvcmRlciAtIDFcblxuICAgIGNvbnN0IGtub3RzID0gZ2VvTm9kZS5Lbm90VmVjdG9yLmFcbiAgICBjb25zdCBjb250cm9sUG9pbnRzOiBhbnkgPSBbXVxuICAgIGNvbnN0IHBvaW50c1ZhbHVlcyA9IGdlb05vZGUuUG9pbnRzLmFcblxuICAgIGZvciAobGV0IGkgPSAwLCBsID0gcG9pbnRzVmFsdWVzLmxlbmd0aDsgaSA8IGw7IGkgKz0gNCkge1xuICAgICAgY29udHJvbFBvaW50cy5wdXNoKG5ldyBWZWN0b3I0KCkuZnJvbUFycmF5KHBvaW50c1ZhbHVlcywgaSkpXG4gICAgfVxuXG4gICAgbGV0IHN0YXJ0S25vdCwgZW5kS25vdFxuXG4gICAgaWYgKGdlb05vZGUuRm9ybSA9PT0gJ0Nsb3NlZCcpIHtcbiAgICAgIGNvbnRyb2xQb2ludHMucHVzaChjb250cm9sUG9pbnRzWzBdKVxuICAgIH0gZWxzZSBpZiAoZ2VvTm9kZS5Gb3JtID09PSAnUGVyaW9kaWMnKSB7XG4gICAgICBzdGFydEtub3QgPSBkZWdyZWVcbiAgICAgIGVuZEtub3QgPSBrbm90cy5sZW5ndGggLSAxIC0gc3RhcnRLbm90XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVncmVlOyArK2kpIHtcbiAgICAgICAgY29udHJvbFBvaW50cy5wdXNoKGNvbnRyb2xQb2ludHNbaV0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY3VydmUgPSBuZXcgTlVSQlNDdXJ2ZShkZWdyZWUsIGtub3RzLCBjb250cm9sUG9pbnRzLCBzdGFydEtub3QsIGVuZEtub3QpXG4gICAgY29uc3QgdmVydGljZXMgPSBjdXJ2ZS5nZXRQb2ludChjb250cm9sUG9pbnRzLmxlbmd0aCAqIDcpXG5cbiAgICBjb25zdCBwb3NpdGlvbnMgPSBuZXcgRmxvYXQzMkFycmF5KE51bWJlcih2ZXJ0aWNlcy5sZW5ndGgpICogMylcblxuICAgIC8vIHZlcnRpY2VzLmZvckVhY2goICggdmVydGV4LCBpICkgPT4ge1xuXG4gICAgLy8gICB2ZXJ0ZXgudG9BcnJheSggcG9zaXRpb25zLCBpICogMyApO1xuXG4gICAgLy8gfSApO1xuXG4gICAgY29uc3QgZ2VvbWV0cnkgPSBuZXcgQnVmZmVyR2VvbWV0cnkoKVxuICAgIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSgncG9zaXRpb24nLCBuZXcgQnVmZmVyQXR0cmlidXRlKHBvc2l0aW9ucywgMykpXG5cbiAgICByZXR1cm4gZ2VvbWV0cnlcbiAgfVxufVxuXG5jbGFzcyBBbmltYXRpb25QYXJzZXIge1xuICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgcGFyc2UoKSB7XG4gICAgY29uc3QgYW5pbWF0aW9uQ2xpcHM6IGFueSA9IFtdXG5cbiAgICBjb25zdCByYXdDbGlwcyA9IHRoaXMucGFyc2VDbGlwcygpXG5cbiAgICBpZiAocmF3Q2xpcHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmF3Q2xpcHMpIHtcbiAgICAgICAgY29uc3QgcmF3Q2xpcCA9IHJhd0NsaXBzW2tleV1cblxuICAgICAgICBjb25zdCBjbGlwID0gdGhpcy5hZGRDbGlwKHJhd0NsaXApXG5cbiAgICAgICAgYW5pbWF0aW9uQ2xpcHMucHVzaChjbGlwKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhbmltYXRpb25DbGlwc1xuICB9XG5cbiAgcGFyc2VDbGlwcygpIHtcbiAgICAvLyBzaW5jZSB0aGUgYWN0dWFsIHRyYW5zZm9ybWF0aW9uIGRhdGEgaXMgc3RvcmVkIGluIEZCWFRyZWUuT2JqZWN0cy5BbmltYXRpb25DdXJ2ZSxcbiAgICAvLyBpZiB0aGlzIGlzIHVuZGVmaW5lZCB3ZSBjYW4gc2FmZWx5IGFzc3VtZSB0aGVyZSBhcmUgbm8gYW5pbWF0aW9uc1xuICAgIGlmIChGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzLkFuaW1hdGlvbkN1cnZlID09PSB1bmRlZmluZWQpIHJldHVybiB1bmRlZmluZWRcblxuICAgIGNvbnN0IGN1cnZlTm9kZXNNYXAgPSB0aGlzLnBhcnNlQW5pbWF0aW9uQ3VydmVOb2RlcygpXG5cbiAgICB0aGlzLnBhcnNlQW5pbWF0aW9uQ3VydmVzKGN1cnZlTm9kZXNNYXApXG5cbiAgICBjb25zdCBsYXllcnNNYXAgPSB0aGlzLnBhcnNlQW5pbWF0aW9uTGF5ZXJzKGN1cnZlTm9kZXNNYXApXG4gICAgY29uc3QgcmF3Q2xpcHMgPSB0aGlzLnBhcnNlQW5pbVN0YWNrcyhsYXllcnNNYXApXG5cbiAgICByZXR1cm4gcmF3Q2xpcHNcbiAgfVxuXG4gIC8vIHBhcnNlIG5vZGVzIGluIEZCWFRyZWUuT2JqZWN0cy5BbmltYXRpb25DdXJ2ZU5vZGVcbiAgLy8gZWFjaCBBbmltYXRpb25DdXJ2ZU5vZGUgaG9sZHMgZGF0YSBmb3IgYW4gYW5pbWF0aW9uIHRyYW5zZm9ybSBmb3IgYSBtb2RlbCAoZS5nLiBsZWZ0IGFybSByb3RhdGlvbiApXG4gIC8vIGFuZCBpcyByZWZlcmVuY2VkIGJ5IGFuIEFuaW1hdGlvbkxheWVyXG4gIHBhcnNlQW5pbWF0aW9uQ3VydmVOb2RlcygpIHtcbiAgICBjb25zdCByYXdDdXJ2ZU5vZGVzID0gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cy5BbmltYXRpb25DdXJ2ZU5vZGVcblxuICAgIGNvbnN0IGN1cnZlTm9kZXNNYXAgPSBuZXcgTWFwKClcblxuICAgIGZvciAoY29uc3Qgbm9kZUlEIGluIHJhd0N1cnZlTm9kZXMpIHtcbiAgICAgIGNvbnN0IHJhd0N1cnZlTm9kZSA9IHJhd0N1cnZlTm9kZXNbbm9kZUlEXVxuXG4gICAgICBpZiAocmF3Q3VydmVOb2RlLmF0dHJOYW1lLm1hdGNoKC9TfFJ8VHxEZWZvcm1QZXJjZW50LykgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgY3VydmVOb2RlID0ge1xuICAgICAgICAgIGlkOiByYXdDdXJ2ZU5vZGUuaWQsXG4gICAgICAgICAgYXR0cjogcmF3Q3VydmVOb2RlLmF0dHJOYW1lLFxuICAgICAgICAgIGN1cnZlczoge31cbiAgICAgICAgfVxuXG4gICAgICAgIGN1cnZlTm9kZXNNYXAuc2V0KGN1cnZlTm9kZS5pZCwgY3VydmVOb2RlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjdXJ2ZU5vZGVzTWFwXG4gIH1cblxuICAvLyBwYXJzZSBub2RlcyBpbiBGQlhUcmVlLk9iamVjdHMuQW5pbWF0aW9uQ3VydmUgYW5kIGNvbm5lY3QgdGhlbSB1cCB0b1xuICAvLyBwcmV2aW91c2x5IHBhcnNlZCBBbmltYXRpb25DdXJ2ZU5vZGVzLiBFYWNoIEFuaW1hdGlvbkN1cnZlIGhvbGRzIGRhdGEgZm9yIGEgc2luZ2xlIGFuaW1hdGVkXG4gIC8vIGF4aXMgKCBlLmcuIHRpbWVzIGFuZCB2YWx1ZXMgb2YgeCByb3RhdGlvbilcbiAgcGFyc2VBbmltYXRpb25DdXJ2ZXMoY3VydmVOb2Rlc01hcCkge1xuICAgIGNvbnN0IHJhd0N1cnZlcyA9IEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMuQW5pbWF0aW9uQ3VydmVcblxuICAgIC8vIFRPRE86IE1hbnkgdmFsdWVzIGFyZSBpZGVudGljYWwgdXAgdG8gcm91bmRvZmYgZXJyb3IsIGJ1dCB3b24ndCBiZSBvcHRpbWlzZWRcbiAgICAvLyBlLmcuIHBvc2l0aW9uIHRpbWVzOiBbMCwgMC40LCAwLiA4XVxuICAgIC8vIHBvc2l0aW9uIHZhbHVlczogWzcuMjM1MzgzMzUwMjM0NzdlLTcsIDkzLjY3NTE4NjE1NzIyNjU2LCAtMC45OTgyNjk1NTc5NTI4ODA5LCA3LjIzNTM4MzM1MDIzNDc3ZS03LCA5My42NzUxODYxNTcyMjY1NiwgLTAuOTk4MjY5NTU3OTUyODgwOSwgNy4yMzUzODQ0ODcxMDMxNDdlLTcsIDkzLjY3NTIwOTA0NTQxMDE2LCAtMC45OTgyNjk1NTc5NTI4ODA5XVxuICAgIC8vIGNsZWFybHksIHRoaXMgc2hvdWxkIGJlIG9wdGltaXNlZCB0b1xuICAgIC8vIHRpbWVzOiBbMF0sIHBvc2l0aW9ucyBbNy4yMzUzODMzNTAyMzQ3N2UtNywgOTMuNjc1MTg2MTU3MjI2NTYsIC0wLjk5ODI2OTU1Nzk1Mjg4MDldXG4gICAgLy8gdGhpcyBzaG93cyB1cCBpbiBuZWFybHkgZXZlcnkgRkJYIGZpbGUsIGFuZCBnZW5lcmFsbHkgdGltZSBhcnJheSBpcyBsZW5ndGggPiAxMDBcblxuICAgIGZvciAoY29uc3Qgbm9kZUlEIGluIHJhd0N1cnZlcykge1xuICAgICAgY29uc3QgYW5pbWF0aW9uQ3VydmUgPSB7XG4gICAgICAgIGlkOiByYXdDdXJ2ZXNbbm9kZUlEXS5pZCxcbiAgICAgICAgdGltZXM6IHJhd0N1cnZlc1tub2RlSURdLktleVRpbWUuYS5tYXAoY29udmVydEZCWFRpbWVUb1NlY29uZHMpLFxuICAgICAgICB2YWx1ZXM6IHJhd0N1cnZlc1tub2RlSURdLktleVZhbHVlRmxvYXQuYVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZWxhdGlvbnNoaXBzID0gRkJYTG9hZGVyLmNvbm5lY3Rpb25zLmdldChhbmltYXRpb25DdXJ2ZS5pZClcblxuICAgICAgaWYgKHJlbGF0aW9uc2hpcHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBhbmltYXRpb25DdXJ2ZUlEID0gcmVsYXRpb25zaGlwcy5wYXJlbnRzWzBdLklEXG4gICAgICAgIGNvbnN0IGFuaW1hdGlvbkN1cnZlUmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwcy5wYXJlbnRzWzBdLnJlbGF0aW9uc2hpcFxuXG4gICAgICAgIGlmIChhbmltYXRpb25DdXJ2ZVJlbGF0aW9uc2hpcC5tYXRjaCgvWC8pKSB7XG4gICAgICAgICAgY3VydmVOb2Rlc01hcC5nZXQoYW5pbWF0aW9uQ3VydmVJRCkuY3VydmVzWyd4J10gPSBhbmltYXRpb25DdXJ2ZVxuICAgICAgICB9IGVsc2UgaWYgKGFuaW1hdGlvbkN1cnZlUmVsYXRpb25zaGlwLm1hdGNoKC9ZLykpIHtcbiAgICAgICAgICBjdXJ2ZU5vZGVzTWFwLmdldChhbmltYXRpb25DdXJ2ZUlEKS5jdXJ2ZXNbJ3knXSA9IGFuaW1hdGlvbkN1cnZlXG4gICAgICAgIH0gZWxzZSBpZiAoYW5pbWF0aW9uQ3VydmVSZWxhdGlvbnNoaXAubWF0Y2goL1ovKSkge1xuICAgICAgICAgIGN1cnZlTm9kZXNNYXAuZ2V0KGFuaW1hdGlvbkN1cnZlSUQpLmN1cnZlc1sneiddID0gYW5pbWF0aW9uQ3VydmVcbiAgICAgICAgfSBlbHNlIGlmIChhbmltYXRpb25DdXJ2ZVJlbGF0aW9uc2hpcC5tYXRjaCgvZHxEZWZvcm1QZXJjZW50LykgJiYgY3VydmVOb2Rlc01hcC5oYXMoYW5pbWF0aW9uQ3VydmVJRCkpIHtcbiAgICAgICAgICBjdXJ2ZU5vZGVzTWFwLmdldChhbmltYXRpb25DdXJ2ZUlEKS5jdXJ2ZXNbJ21vcnBoJ10gPSBhbmltYXRpb25DdXJ2ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gcGFyc2Ugbm9kZXMgaW4gRkJYVHJlZS5PYmplY3RzLkFuaW1hdGlvbkxheWVyLiBFYWNoIGxheWVycyBob2xkcyByZWZlcmVuY2VzXG4gIC8vIHRvIGNvbnN0aW91cyBBbmltYXRpb25DdXJ2ZU5vZGVzIGFuZCBpcyByZWZlcmVuY2VkIGJ5IGFuIEFuaW1hdGlvblN0YWNrIG5vZGVcbiAgLy8gbm90ZTogdGhlb3JldGljYWxseSBhIHN0YWNrIGNhbiBoYXZlIG11bHRpcGxlIGxheWVycywgaG93ZXZlciBpbiBwcmFjdGljZSB0aGVyZSBhbHdheXMgc2VlbXMgdG8gYmUgb25lIHBlciBzdGFja1xuICBwYXJzZUFuaW1hdGlvbkxheWVycyhjdXJ2ZU5vZGVzTWFwKSB7XG4gICAgY29uc3QgcmF3TGF5ZXJzID0gRkJYTG9hZGVyLmZieFRyZWUuT2JqZWN0cy5BbmltYXRpb25MYXllclxuXG4gICAgY29uc3QgbGF5ZXJzTWFwID0gbmV3IE1hcCgpXG5cbiAgICBmb3IgKGNvbnN0IG5vZGVJRCBpbiByYXdMYXllcnMpIHtcbiAgICAgIGNvbnN0IGxheWVyQ3VydmVOb2RlczogYW55ID0gW11cblxuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IEZCWExvYWRlci5jb25uZWN0aW9ucy5nZXQocGFyc2VJbnQobm9kZUlEKSlcblxuICAgICAgaWYgKGNvbm5lY3Rpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBhbGwgdGhlIGFuaW1hdGlvbkN1cnZlTm9kZXMgdXNlZCBpbiB0aGUgbGF5ZXJcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBjb25uZWN0aW9uLmNoaWxkcmVuXG5cbiAgICAgICAgY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQsIGkpID0+IHtcbiAgICAgICAgICBpZiAoY3VydmVOb2Rlc01hcC5oYXMoY2hpbGQuSUQpKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJ2ZU5vZGUgPSBjdXJ2ZU5vZGVzTWFwLmdldChjaGlsZC5JRClcblxuICAgICAgICAgICAgLy8gY2hlY2sgdGhhdCB0aGUgY3VydmVzIGFyZSBkZWZpbmVkIGZvciBhdCBsZWFzdCBvbmUgYXhpcywgb3RoZXJ3aXNlIGlnbm9yZSB0aGUgY3VydmVOb2RlXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGN1cnZlTm9kZS5jdXJ2ZXMueCAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgIGN1cnZlTm9kZS5jdXJ2ZXMueSAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgIGN1cnZlTm9kZS5jdXJ2ZXMueiAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgaWYgKGxheWVyQ3VydmVOb2Rlc1tpXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9kZWxJRCA9IEZCWExvYWRlci5jb25uZWN0aW9ucy5nZXQoY2hpbGQuSUQpLnBhcmVudHMuZmlsdGVyKChwYXJlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnQucmVsYXRpb25zaGlwICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9KVswXS5JRFxuXG4gICAgICAgICAgICAgICAgaWYgKG1vZGVsSUQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgcmF3TW9kZWwgPSBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzLk1vZGVsW21vZGVsSUQudG9TdHJpbmcoKV1cblxuICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZTogYW55ID0ge1xuICAgICAgICAgICAgICAgICAgICBtb2RlbE5hbWU6IFByb3BlcnR5QmluZGluZ1snc2FuaXRpemVOb2RlTmFtZSddKHJhd01vZGVsLmF0dHJOYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgSUQ6IHJhd01vZGVsLmlkLFxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsUG9zaXRpb246IFswLCAwLCAwXSxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFJvdGF0aW9uOiBbMCwgMCwgMF0sXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxTY2FsZTogWzEsIDEsIDFdXG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIEZCWExvYWRlci5zY2VuZUdyYXBoLnRyYXZlcnNlKChjaGlsZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQuSUQgPT09IHJhd01vZGVsLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgbm9kZS50cmFuc2Zvcm0gPSBjaGlsZC5tYXRyaXhcblxuICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC51c2VyRGF0YS50cmFuc2Zvcm1EYXRhKSBub2RlLmV1bGVyT3JkZXIgPSBjaGlsZC51c2VyRGF0YS50cmFuc2Zvcm1EYXRhLmV1bGVyT3JkZXJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgaWYgKCFub2RlLnRyYW5zZm9ybSkgbm9kZS50cmFuc2Zvcm0gPSBuZXcgTWF0cml4NCgpXG5cbiAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBhbmltYXRlZCBtb2RlbCBpcyBwcmUgcm90YXRlZCwgd2UnbGwgaGF2ZSB0byBhcHBseSB0aGUgcHJlIHJvdGF0aW9ucyB0byBldmVyeVxuICAgICAgICAgICAgICAgICAgLy8gYW5pbWF0aW9uIHZhbHVlIGFzIHdlbGxcbiAgICAgICAgICAgICAgICAgIGlmICgnUHJlUm90YXRpb24nIGluIHJhd01vZGVsKSBub2RlLnByZVJvdGF0aW9uID0gcmF3TW9kZWwuUHJlUm90YXRpb24udmFsdWVcbiAgICAgICAgICAgICAgICAgIGlmICgnUG9zdFJvdGF0aW9uJyBpbiByYXdNb2RlbCkgbm9kZS5wb3N0Um90YXRpb24gPSByYXdNb2RlbC5Qb3N0Um90YXRpb24udmFsdWVcblxuICAgICAgICAgICAgICAgICAgbGF5ZXJDdXJ2ZU5vZGVzW2ldID0gbm9kZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChsYXllckN1cnZlTm9kZXNbaV0pIGxheWVyQ3VydmVOb2Rlc1tpXVtjdXJ2ZU5vZGUuYXR0cl0gPSBjdXJ2ZU5vZGVcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VydmVOb2RlLmN1cnZlcy5tb3JwaCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIGlmIChsYXllckN1cnZlTm9kZXNbaV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlZm9ybWVySUQgPSBGQlhMb2FkZXIuY29ubmVjdGlvbnMuZ2V0KGNoaWxkLklEKS5wYXJlbnRzLmZpbHRlcigocGFyZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gcGFyZW50LnJlbGF0aW9uc2hpcCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfSlbMF0uSURcblxuICAgICAgICAgICAgICAgIGNvbnN0IG1vcnBoZXJJRCA9IEZCWExvYWRlci5jb25uZWN0aW9ucy5nZXQoZGVmb3JtZXJJRCkucGFyZW50c1swXS5JRFxuICAgICAgICAgICAgICAgIGNvbnN0IGdlb0lEID0gRkJYTG9hZGVyLmNvbm5lY3Rpb25zLmdldChtb3JwaGVySUQpLnBhcmVudHNbMF0uSURcblxuICAgICAgICAgICAgICAgIC8vIGFzc3VtaW5nIGdlb21ldHJ5IGlzIG5vdCB1c2VkIGluIG1vcmUgdGhhbiBvbmUgbW9kZWxcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RlbElEID0gRkJYTG9hZGVyLmNvbm5lY3Rpb25zLmdldChnZW9JRCkucGFyZW50c1swXS5JRFxuXG4gICAgICAgICAgICAgICAgY29uc3QgcmF3TW9kZWwgPSBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzLk1vZGVsW21vZGVsSURdXG5cbiAgICAgICAgICAgICAgICBjb25zdCBub2RlID0ge1xuICAgICAgICAgICAgICAgICAgbW9kZWxOYW1lOiBQcm9wZXJ0eUJpbmRpbmdbJ3Nhbml0aXplTm9kZU5hbWUnXShyYXdNb2RlbC5hdHRyTmFtZSksXG4gICAgICAgICAgICAgICAgICBtb3JwaE5hbWU6IEZCWExvYWRlci5mYnhUcmVlLk9iamVjdHMuRGVmb3JtZXJbZGVmb3JtZXJJRF0uYXR0ck5hbWVcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsYXllckN1cnZlTm9kZXNbaV0gPSBub2RlXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBsYXllckN1cnZlTm9kZXNbaV1bY3VydmVOb2RlLmF0dHJdID0gY3VydmVOb2RlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGxheWVyc01hcC5zZXQocGFyc2VJbnQobm9kZUlEKSwgbGF5ZXJDdXJ2ZU5vZGVzKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBsYXllcnNNYXBcbiAgfVxuXG4gIC8vIHBhcnNlIG5vZGVzIGluIEZCWFRyZWUuT2JqZWN0cy5BbmltYXRpb25TdGFjay4gVGhlc2UgYXJlIHRoZSB0b3AgbGV2ZWwgbm9kZSBpbiB0aGUgYW5pbWF0aW9uXG4gIC8vIGhpZXJhcmNoeS4gRWFjaCBTdGFjayBub2RlIHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgYSBBbmltYXRpb25DbGlwXG4gIHBhcnNlQW5pbVN0YWNrcyhsYXllcnNNYXApIHtcbiAgICBjb25zdCByYXdTdGFja3MgPSBGQlhMb2FkZXIuZmJ4VHJlZS5PYmplY3RzLkFuaW1hdGlvblN0YWNrXG5cbiAgICAvLyBjb25uZWN0IHRoZSBzdGFja3MgKGNsaXBzKSB1cCB0byB0aGUgbGF5ZXJzXG4gICAgY29uc3QgcmF3Q2xpcHMgPSB7fVxuXG4gICAgZm9yIChjb25zdCBub2RlSUQgaW4gcmF3U3RhY2tzKSB7XG4gICAgICBjb25zdCBjaGlsZHJlbiA9IEZCWExvYWRlci5jb25uZWN0aW9ucy5nZXQocGFyc2VJbnQobm9kZUlEKSkuY2hpbGRyZW5cblxuICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgLy8gaXQgc2VlbXMgbGlrZSBzdGFja3Mgd2lsbCBhbHdheXMgYmUgYXNzb2NpYXRlZCB3aXRoIGEgc2luZ2xlIGxheWVyLiBCdXQganVzdCBpbiBjYXNlIHRoZXJlIGFyZSBmaWxlc1xuICAgICAgICAvLyB3aGVyZSB0aGVyZSBhcmUgbXVsdGlwbGUgbGF5ZXJzIHBlciBzdGFjaywgd2UnbGwgZGlzcGxheSBhIHdhcm5pbmdcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICdGQlhMb2FkZXI6IEVuY291bnRlcmVkIGFuIGFuaW1hdGlvbiBzdGFjayB3aXRoIG11bHRpcGxlIGxheWVycywgdGhpcyBpcyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZC4gSWdub3Jpbmcgc3Vic2VxdWVudCBsYXllcnMuJ1xuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxheWVyID0gbGF5ZXJzTWFwLmdldChjaGlsZHJlblswXS5JRClcblxuICAgICAgcmF3Q2xpcHNbbm9kZUlEXSA9IHtcbiAgICAgICAgbmFtZTogcmF3U3RhY2tzW25vZGVJRF0uYXR0ck5hbWUsXG4gICAgICAgIGxheWVyOiBsYXllclxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByYXdDbGlwc1xuICB9XG5cbiAgYWRkQ2xpcChyYXdDbGlwKSB7XG4gICAgbGV0IHRyYWNrcyA9IFtdXG5cbiAgICByYXdDbGlwLmxheWVyLmZvckVhY2goKHJhd1RyYWNrcykgPT4ge1xuICAgICAgdHJhY2tzID0gdHJhY2tzLmNvbmNhdCh0aGlzLmdlbmVyYXRlVHJhY2tzKHJhd1RyYWNrcykpXG4gICAgfSlcblxuICAgIHJldHVybiBuZXcgQW5pbWF0aW9uQ2xpcChyYXdDbGlwLm5hbWUsIC0xLCB0cmFja3MpXG4gIH1cblxuICBnZW5lcmF0ZVRyYWNrcyhyYXdUcmFja3MpIHtcbiAgICBjb25zdCB0cmFja3M6IGFueSA9IFtdXG5cbiAgICBsZXQgaW5pdGlhbFBvc2l0aW9uOiBhbnkgPSBuZXcgVmVjdG9yMygpXG4gICAgbGV0IGluaXRpYWxSb3RhdGlvbjogYW55ID0gbmV3IFF1YXRlcm5pb24oKVxuICAgIGxldCBpbml0aWFsU2NhbGU6IGFueSA9IG5ldyBWZWN0b3IzKClcblxuICAgIGlmIChyYXdUcmFja3MudHJhbnNmb3JtKSByYXdUcmFja3MudHJhbnNmb3JtLmRlY29tcG9zZShpbml0aWFsUG9zaXRpb24sIGluaXRpYWxSb3RhdGlvbiwgaW5pdGlhbFNjYWxlKVxuXG4gICAgaW5pdGlhbFBvc2l0aW9uID0gaW5pdGlhbFBvc2l0aW9uLnRvQXJyYXkoKVxuICAgIGluaXRpYWxSb3RhdGlvbiA9IG5ldyBFdWxlcigpLnNldEZyb21RdWF0ZXJuaW9uKGluaXRpYWxSb3RhdGlvbiwgcmF3VHJhY2tzLmV1bGVyT3JkZXIpLnRvQXJyYXkoKVxuICAgIGluaXRpYWxTY2FsZSA9IGluaXRpYWxTY2FsZS50b0FycmF5KClcblxuICAgIGlmIChyYXdUcmFja3MuVCAhPT0gdW5kZWZpbmVkICYmIE9iamVjdC5rZXlzKHJhd1RyYWNrcy5ULmN1cnZlcykubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgcG9zaXRpb25UcmFjayA9IHRoaXMuZ2VuZXJhdGVWZWN0b3JUcmFjayhcbiAgICAgICAgcmF3VHJhY2tzLm1vZGVsTmFtZSxcbiAgICAgICAgcmF3VHJhY2tzLlQuY3VydmVzLFxuICAgICAgICBpbml0aWFsUG9zaXRpb24sXG4gICAgICAgICdwb3NpdGlvbidcbiAgICAgIClcbiAgICAgIGlmIChwb3NpdGlvblRyYWNrICE9PSB1bmRlZmluZWQpIHRyYWNrcy5wdXNoKHBvc2l0aW9uVHJhY2spXG4gICAgfVxuXG4gICAgaWYgKHJhd1RyYWNrcy5SICE9PSB1bmRlZmluZWQgJiYgT2JqZWN0LmtleXMocmF3VHJhY2tzLlIuY3VydmVzKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCByb3RhdGlvblRyYWNrID0gdGhpcy5nZW5lcmF0ZVJvdGF0aW9uVHJhY2soXG4gICAgICAgIHJhd1RyYWNrcy5tb2RlbE5hbWUsXG4gICAgICAgIHJhd1RyYWNrcy5SLmN1cnZlcyxcbiAgICAgICAgaW5pdGlhbFJvdGF0aW9uLFxuICAgICAgICByYXdUcmFja3MucHJlUm90YXRpb24sXG4gICAgICAgIHJhd1RyYWNrcy5wb3N0Um90YXRpb24sXG4gICAgICAgIHJhd1RyYWNrcy5ldWxlck9yZGVyXG4gICAgICApXG4gICAgICBpZiAocm90YXRpb25UcmFjayAhPT0gdW5kZWZpbmVkKSB0cmFja3MucHVzaChyb3RhdGlvblRyYWNrKVxuICAgIH1cblxuICAgIGlmIChyYXdUcmFja3MuUyAhPT0gdW5kZWZpbmVkICYmIE9iamVjdC5rZXlzKHJhd1RyYWNrcy5TLmN1cnZlcykubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgc2NhbGVUcmFjayA9IHRoaXMuZ2VuZXJhdGVWZWN0b3JUcmFjayhyYXdUcmFja3MubW9kZWxOYW1lLCByYXdUcmFja3MuUy5jdXJ2ZXMsIGluaXRpYWxTY2FsZSwgJ3NjYWxlJylcbiAgICAgIGlmIChzY2FsZVRyYWNrICE9PSB1bmRlZmluZWQpIHRyYWNrcy5wdXNoKHNjYWxlVHJhY2spXG4gICAgfVxuXG4gICAgaWYgKHJhd1RyYWNrcy5EZWZvcm1QZXJjZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IG1vcnBoVHJhY2sgPSB0aGlzLmdlbmVyYXRlTW9ycGhUcmFjayhyYXdUcmFja3MpXG4gICAgICBpZiAobW9ycGhUcmFjayAhPT0gdW5kZWZpbmVkKSB0cmFja3MucHVzaChtb3JwaFRyYWNrKVxuICAgIH1cblxuICAgIHJldHVybiB0cmFja3NcbiAgfVxuXG4gIGdlbmVyYXRlVmVjdG9yVHJhY2sobW9kZWxOYW1lLCBjdXJ2ZXMsIGluaXRpYWxWYWx1ZSwgdHlwZSkge1xuICAgIGNvbnN0IHRpbWVzID0gdGhpcy5nZXRUaW1lc0ZvckFsbEF4ZXMoY3VydmVzKVxuICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMuZ2V0S2V5ZnJhbWVUcmFja1ZhbHVlcyh0aW1lcywgY3VydmVzLCBpbml0aWFsVmFsdWUpXG5cbiAgICByZXR1cm4gbmV3IFZlY3RvcktleWZyYW1lVHJhY2sobW9kZWxOYW1lICsgJy4nICsgdHlwZSwgdGltZXMsIHZhbHVlcylcbiAgfVxuXG4gIGdlbmVyYXRlUm90YXRpb25UcmFjayhtb2RlbE5hbWUsIGN1cnZlcywgaW5pdGlhbFZhbHVlLCBwcmVSb3RhdGlvbiwgcG9zdFJvdGF0aW9uLCBldWxlck9yZGVyKSB7XG4gICAgaWYgKGN1cnZlcy54ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaW50ZXJwb2xhdGVSb3RhdGlvbnMoY3VydmVzLngpXG4gICAgICBjdXJ2ZXMueC52YWx1ZXMgPSBjdXJ2ZXMueC52YWx1ZXMubWFwKE1hdGhVdGlscy5kZWdUb1JhZClcbiAgICB9XG4gICAgaWYgKGN1cnZlcy55ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaW50ZXJwb2xhdGVSb3RhdGlvbnMoY3VydmVzLnkpXG4gICAgICBjdXJ2ZXMueS52YWx1ZXMgPSBjdXJ2ZXMueS52YWx1ZXMubWFwKE1hdGhVdGlscy5kZWdUb1JhZClcbiAgICB9XG4gICAgaWYgKGN1cnZlcy56ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaW50ZXJwb2xhdGVSb3RhdGlvbnMoY3VydmVzLnopXG4gICAgICBjdXJ2ZXMuei52YWx1ZXMgPSBjdXJ2ZXMuei52YWx1ZXMubWFwKE1hdGhVdGlscy5kZWdUb1JhZClcbiAgICB9XG5cbiAgICBjb25zdCB0aW1lcyA9IHRoaXMuZ2V0VGltZXNGb3JBbGxBeGVzKGN1cnZlcylcbiAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLmdldEtleWZyYW1lVHJhY2tWYWx1ZXModGltZXMsIGN1cnZlcywgaW5pdGlhbFZhbHVlKVxuXG4gICAgaWYgKHByZVJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHByZVJvdGF0aW9uID0gcHJlUm90YXRpb24ubWFwKE1hdGhVdGlscy5kZWdUb1JhZClcbiAgICAgIHByZVJvdGF0aW9uLnB1c2goZXVsZXJPcmRlcilcblxuICAgICAgcHJlUm90YXRpb24gPSBuZXcgRXVsZXIoKS5mcm9tQXJyYXkocHJlUm90YXRpb24pXG4gICAgICBwcmVSb3RhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCkuc2V0RnJvbUV1bGVyKHByZVJvdGF0aW9uKVxuICAgIH1cblxuICAgIGlmIChwb3N0Um90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcG9zdFJvdGF0aW9uID0gcG9zdFJvdGF0aW9uLm1hcChNYXRoVXRpbHMuZGVnVG9SYWQpXG4gICAgICBwb3N0Um90YXRpb24ucHVzaChldWxlck9yZGVyKVxuXG4gICAgICBwb3N0Um90YXRpb24gPSBuZXcgRXVsZXIoKS5mcm9tQXJyYXkocG9zdFJvdGF0aW9uKVxuICAgICAgcG9zdFJvdGF0aW9uID0gbmV3IFF1YXRlcm5pb24oKS5zZXRGcm9tRXVsZXIocG9zdFJvdGF0aW9uKS5pbnZlcnNlKClcbiAgICB9XG5cbiAgICBjb25zdCBxdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKVxuICAgIGNvbnN0IGV1bGVyID0gbmV3IEV1bGVyKClcblxuICAgIGNvbnN0IHF1YXRlcm5pb25WYWx1ZXMgPSBbXVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgIGV1bGVyLnNldCh2YWx1ZXNbaV0sIHZhbHVlc1tpICsgMV0sIHZhbHVlc1tpICsgMl0sIGV1bGVyT3JkZXIpXG5cbiAgICAgIHF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKGV1bGVyKVxuXG4gICAgICBpZiAocHJlUm90YXRpb24gIT09IHVuZGVmaW5lZCkgcXVhdGVybmlvbi5wcmVtdWx0aXBseShwcmVSb3RhdGlvbilcbiAgICAgIGlmIChwb3N0Um90YXRpb24gIT09IHVuZGVmaW5lZCkgcXVhdGVybmlvbi5tdWx0aXBseShwb3N0Um90YXRpb24pXG5cbiAgICAgIHF1YXRlcm5pb24udG9BcnJheShxdWF0ZXJuaW9uVmFsdWVzLCAoaSAvIDMpICogNClcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFF1YXRlcm5pb25LZXlmcmFtZVRyYWNrKG1vZGVsTmFtZSArICcucXVhdGVybmlvbicsIHRpbWVzLCBxdWF0ZXJuaW9uVmFsdWVzKVxuICB9XG5cbiAgZ2VuZXJhdGVNb3JwaFRyYWNrKHJhd1RyYWNrcykge1xuICAgIGNvbnN0IGN1cnZlcyA9IHJhd1RyYWNrcy5EZWZvcm1QZXJjZW50LmN1cnZlcy5tb3JwaFxuICAgIGNvbnN0IHZhbHVlcyA9IGN1cnZlcy52YWx1ZXMubWFwKCh2YWwpID0+IHtcbiAgICAgIHJldHVybiB2YWwgLyAxMDBcbiAgICB9KVxuXG4gICAgY29uc3QgbW9ycGhOdW0gPSBGQlhMb2FkZXIuc2NlbmVHcmFwaC5nZXRPYmplY3RCeU5hbWUocmF3VHJhY2tzLm1vZGVsTmFtZSkubW9ycGhUYXJnZXREaWN0aW9uYXJ5W1xuICAgICAgcmF3VHJhY2tzLm1vcnBoTmFtZVxuICAgIF1cblxuICAgIHJldHVybiBuZXcgTnVtYmVyS2V5ZnJhbWVUcmFjayhcbiAgICAgIHJhd1RyYWNrcy5tb2RlbE5hbWUgKyAnLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1snICsgbW9ycGhOdW0gKyAnXScsXG4gICAgICBjdXJ2ZXMudGltZXMsXG4gICAgICB2YWx1ZXNcbiAgICApXG4gIH1cblxuICAvLyBGb3IgYWxsIGFuaW1hdGVkIG9iamVjdHMsIHRpbWVzIGFyZSBkZWZpbmVkIHNlcGFyYXRlbHkgZm9yIGVhY2ggYXhpc1xuICAvLyBIZXJlIHdlJ2xsIGNvbWJpbmUgdGhlIHRpbWVzIGludG8gb25lIHNvcnRlZCBhcnJheSB3aXRob3V0IGR1cGxpY2F0ZXNcbiAgZ2V0VGltZXNGb3JBbGxBeGVzKGN1cnZlcykge1xuICAgIGxldCB0aW1lcyA9IFtdXG5cbiAgICAvLyBmaXJzdCBqb2luIHRvZ2V0aGVyIHRoZSB0aW1lcyBmb3IgZWFjaCBheGlzLCBpZiBkZWZpbmVkXG4gICAgaWYgKGN1cnZlcy54ICE9PSB1bmRlZmluZWQpIHRpbWVzID0gdGltZXMuY29uY2F0KGN1cnZlcy54LnRpbWVzKVxuICAgIGlmIChjdXJ2ZXMueSAhPT0gdW5kZWZpbmVkKSB0aW1lcyA9IHRpbWVzLmNvbmNhdChjdXJ2ZXMueS50aW1lcylcbiAgICBpZiAoY3VydmVzLnogIT09IHVuZGVmaW5lZCkgdGltZXMgPSB0aW1lcy5jb25jYXQoY3VydmVzLnoudGltZXMpXG5cbiAgICAvLyB0aGVuIHNvcnQgdGhlbSBhbmQgcmVtb3ZlIGR1cGxpY2F0ZXNcbiAgICB0aW1lcyA9IHRpbWVzXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICByZXR1cm4gYSAtIGJcbiAgICAgIH0pXG4gICAgICAuZmlsdGVyKChlbGVtLCBpbmRleCwgYXJyYXkpID0+IHtcbiAgICAgICAgcmV0dXJuIGFycmF5LmluZGV4T2YoZWxlbSkgPT0gaW5kZXhcbiAgICAgIH0pXG5cbiAgICByZXR1cm4gdGltZXNcbiAgfVxuXG4gIGdldEtleWZyYW1lVHJhY2tWYWx1ZXModGltZXMsIGN1cnZlcywgaW5pdGlhbFZhbHVlKSB7XG4gICAgY29uc3QgcHJldlZhbHVlID0gaW5pdGlhbFZhbHVlXG5cbiAgICBjb25zdCB2YWx1ZXM6IGFueSA9IFtdXG5cbiAgICBsZXQgeEluZGV4ID0gLTFcbiAgICBsZXQgeUluZGV4ID0gLTFcbiAgICBsZXQgekluZGV4ID0gLTFcblxuICAgIHRpbWVzLmZvckVhY2goKHRpbWUpID0+IHtcbiAgICAgIGlmIChjdXJ2ZXMueCkgeEluZGV4ID0gY3VydmVzLngudGltZXMuaW5kZXhPZih0aW1lKVxuICAgICAgaWYgKGN1cnZlcy55KSB5SW5kZXggPSBjdXJ2ZXMueS50aW1lcy5pbmRleE9mKHRpbWUpXG4gICAgICBpZiAoY3VydmVzLnopIHpJbmRleCA9IGN1cnZlcy56LnRpbWVzLmluZGV4T2YodGltZSlcblxuICAgICAgLy8gaWYgdGhlcmUgaXMgYW4geCB2YWx1ZSBkZWZpbmVkIGZvciB0aGlzIGZyYW1lLCB1c2UgdGhhdFxuICAgICAgaWYgKHhJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgY29uc3QgeFZhbHVlID0gY3VydmVzLngudmFsdWVzW3hJbmRleF1cbiAgICAgICAgdmFsdWVzLnB1c2goeFZhbHVlKVxuICAgICAgICBwcmV2VmFsdWVbMF0gPSB4VmFsdWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG90aGVyd2lzZSB1c2UgdGhlIHggdmFsdWUgZnJvbSB0aGUgcHJldmlvdXMgZnJhbWVcbiAgICAgICAgdmFsdWVzLnB1c2gocHJldlZhbHVlWzBdKVxuICAgICAgfVxuXG4gICAgICBpZiAoeUluZGV4ICE9PSAtMSkge1xuICAgICAgICBjb25zdCB5VmFsdWUgPSBjdXJ2ZXMueS52YWx1ZXNbeUluZGV4XVxuICAgICAgICB2YWx1ZXMucHVzaCh5VmFsdWUpXG4gICAgICAgIHByZXZWYWx1ZVsxXSA9IHlWYWx1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWVzLnB1c2gocHJldlZhbHVlWzFdKVxuICAgICAgfVxuXG4gICAgICBpZiAoekluZGV4ICE9PSAtMSkge1xuICAgICAgICBjb25zdCB6VmFsdWUgPSBjdXJ2ZXMuei52YWx1ZXNbekluZGV4XVxuICAgICAgICB2YWx1ZXMucHVzaCh6VmFsdWUpXG4gICAgICAgIHByZXZWYWx1ZVsyXSA9IHpWYWx1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWVzLnB1c2gocHJldlZhbHVlWzJdKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gdmFsdWVzXG4gIH1cblxuICAvLyBSb3RhdGlvbnMgYXJlIGRlZmluZWQgYXMgRXVsZXIgYW5nbGVzIHdoaWNoIGNhbiBoYXZlIHZhbHVlcyAgb2YgYW55IHNpemVcbiAgLy8gVGhlc2Ugd2lsbCBiZSBjb252ZXJ0ZWQgdG8gcXVhdGVybmlvbnMgd2hpY2ggZG9uJ3Qgc3VwcG9ydCB2YWx1ZXMgZ3JlYXRlciB0aGFuXG4gIC8vIFBJLCBzbyB3ZSdsbCBpbnRlcnBvbGF0ZSBsYXJnZSByb3RhdGlvbnNcbiAgaW50ZXJwb2xhdGVSb3RhdGlvbnMoY3VydmUpIHtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IGN1cnZlLnZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgaW5pdGlhbFZhbHVlID0gY3VydmUudmFsdWVzW2kgLSAxXVxuICAgICAgY29uc3QgdmFsdWVzU3BhbiA9IGN1cnZlLnZhbHVlc1tpXSAtIGluaXRpYWxWYWx1ZVxuXG4gICAgICBjb25zdCBhYnNvbHV0ZVNwYW4gPSBNYXRoLmFicyh2YWx1ZXNTcGFuKVxuXG4gICAgICBpZiAoYWJzb2x1dGVTcGFuID49IDE4MCkge1xuICAgICAgICBjb25zdCBudW1TdWJJbnRlcnZhbHMgPSBhYnNvbHV0ZVNwYW4gLyAxODBcblxuICAgICAgICBjb25zdCBzdGVwID0gdmFsdWVzU3BhbiAvIG51bVN1YkludGVydmFsc1xuICAgICAgICBsZXQgbmV4dFZhbHVlID0gaW5pdGlhbFZhbHVlICsgc3RlcFxuXG4gICAgICAgIGNvbnN0IGluaXRpYWxUaW1lID0gY3VydmUudGltZXNbaSAtIDFdXG4gICAgICAgIGNvbnN0IHRpbWVTcGFuID0gY3VydmUudGltZXNbaV0gLSBpbml0aWFsVGltZVxuICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHRpbWVTcGFuIC8gbnVtU3ViSW50ZXJ2YWxzXG4gICAgICAgIGxldCBuZXh0VGltZSA9IGluaXRpYWxUaW1lICsgaW50ZXJ2YWxcblxuICAgICAgICBjb25zdCBpbnRlcnBvbGF0ZWRUaW1lczogYW55ID0gW11cbiAgICAgICAgY29uc3QgaW50ZXJwb2xhdGVkVmFsdWVzOiBhbnkgPSBbXVxuXG4gICAgICAgIHdoaWxlIChuZXh0VGltZSA8IGN1cnZlLnRpbWVzW2ldKSB7XG4gICAgICAgICAgaW50ZXJwb2xhdGVkVGltZXMucHVzaChuZXh0VGltZSlcbiAgICAgICAgICBuZXh0VGltZSArPSBpbnRlcnZhbFxuXG4gICAgICAgICAgaW50ZXJwb2xhdGVkVmFsdWVzLnB1c2gobmV4dFZhbHVlKVxuICAgICAgICAgIG5leHRWYWx1ZSArPSBzdGVwXG4gICAgICAgIH1cblxuICAgICAgICBjdXJ2ZS50aW1lcyA9IGluamVjdChjdXJ2ZS50aW1lcywgaSwgaW50ZXJwb2xhdGVkVGltZXMpXG4gICAgICAgIGN1cnZlLnZhbHVlcyA9IGluamVjdChjdXJ2ZS52YWx1ZXMsIGksIGludGVycG9sYXRlZFZhbHVlcylcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuY2xhc3MgVGV4dFBhcnNlciB7XG4gIGFsbE5vZGVzOiBhbnlcbiAgY3VycmVudFByb3BOYW1lOiBhbnlcbiAgY3VycmVudFByb3A6IGFueVxuICBjdXJyZW50SW5kZW50OiBhbnlcbiAgbm9kZVN0YWNrOiBhbnlcbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIGdldFByZXZOb2RlKCkge1xuICAgIHJldHVybiB0aGlzLm5vZGVTdGFja1t0aGlzLmN1cnJlbnRJbmRlbnQgLSAyXVxuICB9XG5cbiAgZ2V0Q3VycmVudE5vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMubm9kZVN0YWNrW3RoaXMuY3VycmVudEluZGVudCAtIDFdXG4gIH1cblxuICBnZXRDdXJyZW50UHJvcCgpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50UHJvcFxuICB9XG5cbiAgcHVzaFN0YWNrKG5vZGUpIHtcbiAgICB0aGlzLm5vZGVTdGFjay5wdXNoKG5vZGUpXG4gICAgdGhpcy5jdXJyZW50SW5kZW50ICs9IDFcbiAgfVxuXG4gIHBvcFN0YWNrKCkge1xuICAgIHRoaXMubm9kZVN0YWNrLnBvcCgpXG4gICAgdGhpcy5jdXJyZW50SW5kZW50IC09IDFcbiAgfVxuXG4gIHNldEN1cnJlbnRQcm9wKHZhbCwgbmFtZSkge1xuICAgIHRoaXMuY3VycmVudFByb3AgPSB2YWxcbiAgICB0aGlzLmN1cnJlbnRQcm9wTmFtZSA9IG5hbWVcbiAgfVxuXG4gIHBhcnNlKHRleHQpIHtcbiAgICB0aGlzLmN1cnJlbnRJbmRlbnQgPSAwXG5cbiAgICB0aGlzLmFsbE5vZGVzID0gbmV3IEZCWFRyZWUoKVxuICAgIHRoaXMubm9kZVN0YWNrID0gW11cbiAgICB0aGlzLmN1cnJlbnRQcm9wID0gW11cbiAgICB0aGlzLmN1cnJlbnRQcm9wTmFtZSA9ICcnXG5cbiAgICBjb25zdCBzcGxpdCA9IHRleHQuc3BsaXQoL1tcXHJcXG5dKy8pXG5cbiAgICBzcGxpdC5mb3JFYWNoKChsaW5lLCBpKSA9PiB7XG4gICAgICBjb25zdCBtYXRjaENvbW1lbnQgPSBsaW5lLm1hdGNoKC9eW1xcc1xcdF0qOy8pXG4gICAgICBjb25zdCBtYXRjaEVtcHR5ID0gbGluZS5tYXRjaCgvXltcXHNcXHRdKiQvKVxuXG4gICAgICBpZiAobWF0Y2hDb21tZW50IHx8IG1hdGNoRW1wdHkpIHJldHVyblxuXG4gICAgICBjb25zdCBtYXRjaEJlZ2lubmluZyA9IGxpbmUubWF0Y2goJ15cXFxcdHsnICsgdGhpcy5jdXJyZW50SW5kZW50ICsgJ30oXFxcXHcrKTooLiopeycsICcnKVxuICAgICAgY29uc3QgbWF0Y2hQcm9wZXJ0eSA9IGxpbmUubWF0Y2goJ15cXFxcdHsnICsgdGhpcy5jdXJyZW50SW5kZW50ICsgJ30oXFxcXHcrKTpbXFxcXHNcXFxcdFxcXFxyXFxcXG5dKC4qKScpXG4gICAgICBjb25zdCBtYXRjaEVuZCA9IGxpbmUubWF0Y2goJ15cXFxcdHsnICsgKHRoaXMuY3VycmVudEluZGVudCAtIDEpICsgJ319JylcblxuICAgICAgaWYgKG1hdGNoQmVnaW5uaW5nKSB7XG4gICAgICAgIHRoaXMucGFyc2VOb2RlQmVnaW4obGluZSwgbWF0Y2hCZWdpbm5pbmcpXG4gICAgICB9IGVsc2UgaWYgKG1hdGNoUHJvcGVydHkpIHtcbiAgICAgICAgdGhpcy5wYXJzZU5vZGVQcm9wZXJ0eShsaW5lLCBtYXRjaFByb3BlcnR5LCBzcGxpdFsrK2ldKVxuICAgICAgfSBlbHNlIGlmIChtYXRjaEVuZCkge1xuICAgICAgICB0aGlzLnBvcFN0YWNrKClcbiAgICAgIH0gZWxzZSBpZiAobGluZS5tYXRjaCgvXlteXFxzXFx0fV0vKSkge1xuICAgICAgICAvLyBsYXJnZSBhcnJheXMgYXJlIHNwbGl0IG92ZXIgbXVsdGlwbGUgbGluZXMgdGVybWluYXRlZCB3aXRoIGEgJywnIGNoYXJhY3RlclxuICAgICAgICAvLyBpZiB0aGlzIGlzIGVuY291bnRlcmVkIHRoZSBsaW5lIG5lZWRzIHRvIGJlIGpvaW5lZCB0byB0aGUgcHJldmlvdXMgbGluZVxuICAgICAgICB0aGlzLnBhcnNlTm9kZVByb3BlcnR5Q29udGludWVkKGxpbmUpXG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiB0aGlzLmFsbE5vZGVzXG4gIH1cblxuICBwYXJzZU5vZGVCZWdpbihsaW5lLCBwcm9wZXJ0eSkge1xuICAgIGNvbnN0IG5vZGVOYW1lID0gcHJvcGVydHlbMV0udHJpbSgpLnJlcGxhY2UoL15cIi8sICcnKS5yZXBsYWNlKC9cIiQvLCAnJylcblxuICAgIGNvbnN0IG5vZGVBdHRycyA9IHByb3BlcnR5WzJdLnNwbGl0KCcsJykubWFwKChhdHRyKSA9PiB7XG4gICAgICByZXR1cm4gYXR0ci50cmltKCkucmVwbGFjZSgvXlwiLywgJycpLnJlcGxhY2UoL1wiJC8sICcnKVxuICAgIH0pXG5cbiAgICBjb25zdCBub2RlOiBhbnkgPSB7IG5hbWU6IG5vZGVOYW1lIH1cbiAgICBjb25zdCBhdHRycyA9IHRoaXMucGFyc2VOb2RlQXR0cihub2RlQXR0cnMpXG5cbiAgICBjb25zdCBjdXJyZW50Tm9kZSA9IHRoaXMuZ2V0Q3VycmVudE5vZGUoKVxuXG4gICAgLy8gYSB0b3Agbm9kZVxuICAgIGlmICh0aGlzLmN1cnJlbnRJbmRlbnQgPT09IDApIHtcbiAgICAgIHRoaXMuYWxsTm9kZXMuYWRkKG5vZGVOYW1lLCBub2RlKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBhIHN1Ym5vZGVcblxuICAgICAgLy8gaWYgdGhlIHN1Ym5vZGUgYWxyZWFkeSBleGlzdHMsIGFwcGVuZCBpdFxuICAgICAgaWYgKG5vZGVOYW1lIGluIGN1cnJlbnROb2RlKSB7XG4gICAgICAgIC8vIHNwZWNpYWwgY2FzZSBQb3NlIG5lZWRzIFBvc2VOb2RlcyBhcyBhbiBhcnJheVxuICAgICAgICBpZiAobm9kZU5hbWUgPT09ICdQb3NlTm9kZScpIHtcbiAgICAgICAgICBjdXJyZW50Tm9kZS5Qb3NlTm9kZS5wdXNoKG5vZGUpXG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudE5vZGVbbm9kZU5hbWVdLmlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjdXJyZW50Tm9kZVtub2RlTmFtZV0gPSB7fVxuICAgICAgICAgIGN1cnJlbnROb2RlW25vZGVOYW1lXVtjdXJyZW50Tm9kZVtub2RlTmFtZV0uaWRdID0gY3VycmVudE5vZGVbbm9kZU5hbWVdXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXR0cnMuaWQgIT09ICcnKSBjdXJyZW50Tm9kZVtub2RlTmFtZV1bYXR0cnMuaWRdID0gbm9kZVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYXR0cnMuaWQgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGN1cnJlbnROb2RlW25vZGVOYW1lXSA9IHt9XG4gICAgICAgIGN1cnJlbnROb2RlW25vZGVOYW1lXVthdHRycy5pZF0gPSBub2RlXG4gICAgICB9IGVsc2UgaWYgKG5vZGVOYW1lICE9PSAnUHJvcGVydGllczcwJykge1xuICAgICAgICBpZiAobm9kZU5hbWUgPT09ICdQb3NlTm9kZScpIGN1cnJlbnROb2RlW25vZGVOYW1lXSA9IFtub2RlXVxuICAgICAgICBlbHNlIGN1cnJlbnROb2RlW25vZGVOYW1lXSA9IG5vZGVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGF0dHJzLmlkID09PSAnbnVtYmVyJykgbm9kZS5pZCA9IGF0dHJzLmlkXG4gICAgaWYgKGF0dHJzLm5hbWUgIT09ICcnKSBub2RlLmF0dHJOYW1lID0gYXR0cnMubmFtZVxuICAgIGlmIChhdHRycy50eXBlICE9PSAnJykgbm9kZS5hdHRyVHlwZSA9IGF0dHJzLnR5cGVcblxuICAgIHRoaXMucHVzaFN0YWNrKG5vZGUpXG4gIH1cblxuICBwYXJzZU5vZGVBdHRyKGF0dHJzKSB7XG4gICAgbGV0IGlkID0gYXR0cnNbMF1cblxuICAgIGlmIChhdHRyc1swXSAhPT0gJycpIHtcbiAgICAgIGlkID0gcGFyc2VJbnQoYXR0cnNbMF0pXG5cbiAgICAgIGlmIChpc05hTihpZCkpIHtcbiAgICAgICAgaWQgPSBhdHRyc1swXVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBuYW1lID0gJycsXG4gICAgICB0eXBlID0gJydcblxuICAgIGlmIChhdHRycy5sZW5ndGggPiAxKSB7XG4gICAgICBuYW1lID0gYXR0cnNbMV0ucmVwbGFjZSgvXihcXHcrKTo6LywgJycpXG4gICAgICB0eXBlID0gYXR0cnNbMl1cbiAgICB9XG5cbiAgICByZXR1cm4geyBpZDogaWQsIG5hbWU6IG5hbWUsIHR5cGU6IHR5cGUgfVxuICB9XG5cbiAgcGFyc2VOb2RlUHJvcGVydHkobGluZSwgcHJvcGVydHksIGNvbnRlbnRMaW5lKSB7XG4gICAgbGV0IHByb3BOYW1lID0gcHJvcGVydHlbMV0ucmVwbGFjZSgvXlwiLywgJycpLnJlcGxhY2UoL1wiJC8sICcnKS50cmltKClcbiAgICBsZXQgcHJvcFZhbHVlID0gcHJvcGVydHlbMl0ucmVwbGFjZSgvXlwiLywgJycpLnJlcGxhY2UoL1wiJC8sICcnKS50cmltKClcblxuICAgIC8vIGZvciBzcGVjaWFsIGNhc2U6IGJhc2U2NCBpbWFnZSBkYXRhIGZvbGxvd3MgXCJDb250ZW50OiAsXCIgbGluZVxuICAgIC8vXHRDb250ZW50OiAsXG4gICAgLy9cdCBcIi85ai80UkRhUlhocFpnQUFUVTBBLi4uXCJcbiAgICBpZiAocHJvcE5hbWUgPT09ICdDb250ZW50JyAmJiBwcm9wVmFsdWUgPT09ICcsJykge1xuICAgICAgcHJvcFZhbHVlID0gY29udGVudExpbmUucmVwbGFjZSgvXCIvZywgJycpLnJlcGxhY2UoLywkLywgJycpLnRyaW0oKVxuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnROb2RlID0gdGhpcy5nZXRDdXJyZW50Tm9kZSgpXG4gICAgY29uc3QgcGFyZW50TmFtZSA9IGN1cnJlbnROb2RlLm5hbWVcblxuICAgIGlmIChwYXJlbnROYW1lID09PSAnUHJvcGVydGllczcwJykge1xuICAgICAgdGhpcy5wYXJzZU5vZGVTcGVjaWFsUHJvcGVydHkobGluZSwgcHJvcE5hbWUsIHByb3BWYWx1ZSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIENvbm5lY3Rpb25zXG4gICAgaWYgKHByb3BOYW1lID09PSAnQycpIHtcbiAgICAgIGNvbnN0IGNvbm5Qcm9wcyA9IHByb3BWYWx1ZS5zcGxpdCgnLCcpLnNsaWNlKDEpXG4gICAgICBjb25zdCBmcm9tID0gcGFyc2VJbnQoY29ublByb3BzWzBdKVxuICAgICAgY29uc3QgdG8gPSBwYXJzZUludChjb25uUHJvcHNbMV0pXG5cbiAgICAgIGxldCByZXN0ID0gcHJvcFZhbHVlLnNwbGl0KCcsJykuc2xpY2UoMylcblxuICAgICAgcmVzdCA9IHJlc3QubWFwKChlbGVtKSA9PiB7XG4gICAgICAgIHJldHVybiBlbGVtLnRyaW0oKS5yZXBsYWNlKC9eXCIvLCAnJylcbiAgICAgIH0pXG5cbiAgICAgIHByb3BOYW1lID0gJ2Nvbm5lY3Rpb25zJ1xuICAgICAgcHJvcFZhbHVlID0gW2Zyb20sIHRvXVxuICAgICAgYXBwZW5kKHByb3BWYWx1ZSwgcmVzdClcblxuICAgICAgaWYgKGN1cnJlbnROb2RlW3Byb3BOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGN1cnJlbnROb2RlW3Byb3BOYW1lXSA9IFtdXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTm9kZVxuICAgIGlmIChwcm9wTmFtZSA9PT0gJ05vZGUnKSBjdXJyZW50Tm9kZS5pZCA9IHByb3BWYWx1ZVxuXG4gICAgLy8gY29ubmVjdGlvbnNcbiAgICBpZiAocHJvcE5hbWUgaW4gY3VycmVudE5vZGUgJiYgQXJyYXkuaXNBcnJheShjdXJyZW50Tm9kZVtwcm9wTmFtZV0pKSB7XG4gICAgICBjdXJyZW50Tm9kZVtwcm9wTmFtZV0ucHVzaChwcm9wVmFsdWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwcm9wTmFtZSAhPT0gJ2EnKSBjdXJyZW50Tm9kZVtwcm9wTmFtZV0gPSBwcm9wVmFsdWVcbiAgICAgIGVsc2UgY3VycmVudE5vZGUuYSA9IHByb3BWYWx1ZVxuICAgIH1cblxuICAgIHRoaXMuc2V0Q3VycmVudFByb3AoY3VycmVudE5vZGUsIHByb3BOYW1lKVxuXG4gICAgLy8gY29udmVydCBzdHJpbmcgdG8gYXJyYXksIHVubGVzcyBpdCBlbmRzIGluICcsJyBpbiB3aGljaCBjYXNlIG1vcmUgd2lsbCBiZSBhZGRlZCB0byBpdFxuICAgIGlmIChwcm9wTmFtZSA9PT0gJ2EnICYmIHByb3BWYWx1ZS5zbGljZSgtMSkgIT09ICcsJykge1xuICAgICAgY3VycmVudE5vZGUuYSA9IHBhcnNlTnVtYmVyQXJyYXkocHJvcFZhbHVlKVxuICAgIH1cbiAgfVxuXG4gIHBhcnNlTm9kZVByb3BlcnR5Q29udGludWVkKGxpbmUpIHtcbiAgICBjb25zdCBjdXJyZW50Tm9kZSA9IHRoaXMuZ2V0Q3VycmVudE5vZGUoKVxuXG4gICAgY3VycmVudE5vZGUuYSArPSBsaW5lXG5cbiAgICAvLyBpZiB0aGUgbGluZSBkb2Vzbid0IGVuZCBpbiAnLCcgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgb2YgdGhlIHByb3BlcnR5IHZhbHVlXG4gICAgLy8gc28gY29udmVydCB0aGUgc3RyaW5nIHRvIGFuIGFycmF5XG4gICAgaWYgKGxpbmUuc2xpY2UoLTEpICE9PSAnLCcpIHtcbiAgICAgIGN1cnJlbnROb2RlLmEgPSBwYXJzZU51bWJlckFycmF5KGN1cnJlbnROb2RlLmEpXG4gICAgfVxuICB9XG5cbiAgLy8gcGFyc2UgXCJQcm9wZXJ0eTcwXCJcbiAgcGFyc2VOb2RlU3BlY2lhbFByb3BlcnR5KGxpbmUsIHByb3BOYW1lLCBwcm9wVmFsdWUpIHtcbiAgICAvLyBzcGxpdCB0aGlzXG4gICAgLy8gUDogXCJMY2wgU2NhbGluZ1wiLCBcIkxjbCBTY2FsaW5nXCIsIFwiXCIsIFwiQVwiLDEsMSwxXG4gICAgLy8gaW50byBhcnJheSBsaWtlIGJlbG93XG4gICAgLy8gW1wiTGNsIFNjYWxpbmdcIiwgXCJMY2wgU2NhbGluZ1wiLCBcIlwiLCBcIkFcIiwgXCIxLDEsMVwiIF1cbiAgICBjb25zdCBwcm9wcyA9IHByb3BWYWx1ZS5zcGxpdCgnXCIsJykubWFwKChwcm9wKSA9PiB7XG4gICAgICByZXR1cm4gcHJvcC50cmltKCkucmVwbGFjZSgvXlxcXCIvLCAnJykucmVwbGFjZSgvXFxzLywgJ18nKVxuICAgIH0pXG5cbiAgICBjb25zdCBpbm5lclByb3BOYW1lID0gcHJvcHNbMF1cbiAgICBjb25zdCBpbm5lclByb3BUeXBlMSA9IHByb3BzWzFdXG4gICAgY29uc3QgaW5uZXJQcm9wVHlwZTIgPSBwcm9wc1syXVxuICAgIGNvbnN0IGlubmVyUHJvcEZsYWcgPSBwcm9wc1szXVxuICAgIGxldCBpbm5lclByb3BWYWx1ZSA9IHByb3BzWzRdXG5cbiAgICAvLyBjYXN0IHZhbHVlcyB3aGVyZSBuZWVkZWQsIG90aGVyd2lzZSBsZWF2ZSBhcyBzdHJpbmdzXG4gICAgc3dpdGNoIChpbm5lclByb3BUeXBlMSkge1xuICAgICAgY2FzZSAnaW50JzpcbiAgICAgIGNhc2UgJ2VudW0nOlxuICAgICAgY2FzZSAnYm9vbCc6XG4gICAgICBjYXNlICdVTG9uZ0xvbmcnOlxuICAgICAgY2FzZSAnZG91YmxlJzpcbiAgICAgIGNhc2UgJ051bWJlcic6XG4gICAgICBjYXNlICdGaWVsZE9mVmlldyc6XG4gICAgICAgIGlubmVyUHJvcFZhbHVlID0gcGFyc2VGbG9hdChpbm5lclByb3BWYWx1ZSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnQ29sb3InOlxuICAgICAgY2FzZSAnQ29sb3JSR0InOlxuICAgICAgY2FzZSAnVmVjdG9yM0QnOlxuICAgICAgY2FzZSAnTGNsX1RyYW5zbGF0aW9uJzpcbiAgICAgIGNhc2UgJ0xjbF9Sb3RhdGlvbic6XG4gICAgICBjYXNlICdMY2xfU2NhbGluZyc6XG4gICAgICAgIGlubmVyUHJvcFZhbHVlID0gcGFyc2VOdW1iZXJBcnJheShpbm5lclByb3BWYWx1ZSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICAvLyBDQVVUSU9OOiB0aGVzZSBwcm9wcyBtdXN0IGFwcGVuZCB0byBwYXJlbnQncyBwYXJlbnRcbiAgICB0aGlzLmdldFByZXZOb2RlKClbaW5uZXJQcm9wTmFtZV0gPSB7XG4gICAgICB0eXBlOiBpbm5lclByb3BUeXBlMSxcbiAgICAgIHR5cGUyOiBpbm5lclByb3BUeXBlMixcbiAgICAgIGZsYWc6IGlubmVyUHJvcEZsYWcsXG4gICAgICB2YWx1ZTogaW5uZXJQcm9wVmFsdWVcbiAgICB9XG5cbiAgICB0aGlzLnNldEN1cnJlbnRQcm9wKHRoaXMuZ2V0UHJldk5vZGUoKSwgaW5uZXJQcm9wTmFtZSlcbiAgfVxufVxuXG5jbGFzcyBCaW5hcnlQYXJzZXIge1xuICBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgcGFyc2UoYnVmZmVyKSB7XG4gICAgY29uc3QgcmVhZGVyID0gbmV3IEJpbmFyeVJlYWRlcihidWZmZXIpXG4gICAgcmVhZGVyLnNraXAoMjMpIC8vIHNraXAgbWFnaWMgMjMgYnl0ZXNcblxuICAgIGNvbnN0IHZlcnNpb24gPSByZWFkZXIuZ2V0VWludDMyKClcblxuICAgIGNvbnNvbGUubG9nKCdGQlhMb2FkZXI6IEZCWCBiaW5hcnkgdmVyc2lvbjogJyArIHZlcnNpb24pXG5cbiAgICBjb25zdCBhbGxOb2RlcyA9IG5ldyBGQlhUcmVlKClcblxuICAgIHdoaWxlICghdGhpcy5lbmRPZkNvbnRlbnQocmVhZGVyKSkge1xuICAgICAgY29uc3Qgbm9kZSA9IHRoaXMucGFyc2VOb2RlKHJlYWRlciwgdmVyc2lvbilcbiAgICAgIGlmIChub2RlICE9PSBudWxsKSBhbGxOb2Rlcy5hZGQobm9kZS5uYW1lLCBub2RlKVxuICAgIH1cblxuICAgIHJldHVybiBhbGxOb2Rlc1xuICB9XG5cbiAgLy8gQ2hlY2sgaWYgcmVhZGVyIGhhcyByZWFjaGVkIHRoZSBlbmQgb2YgY29udGVudC5cbiAgZW5kT2ZDb250ZW50KHJlYWRlcikge1xuICAgIC8vIGZvb3RlciBzaXplOiAxNjBieXRlcyArIDE2LWJ5dGUgYWxpZ25tZW50IHBhZGRpbmdcbiAgICAvLyAtIDE2Ynl0ZXM6IG1hZ2ljXG4gICAgLy8gLSBwYWRkaW5nIHRpbCAxNi1ieXRlIGFsaWdubWVudCAoYXQgbGVhc3QgMWJ5dGU/KVxuICAgIC8vXHQoc2VlbXMgbGlrZSBzb21lIGV4cG9ydGVycyBlbWJlZCBmaXhlZCAxNSBvciAxNmJ5dGVzPylcbiAgICAvLyAtIDRieXRlczogbWFnaWNcbiAgICAvLyAtIDRieXRlczogdmVyc2lvblxuICAgIC8vIC0gMTIwYnl0ZXM6IHplcm9cbiAgICAvLyAtIDE2Ynl0ZXM6IG1hZ2ljXG4gICAgaWYgKHJlYWRlci5zaXplKCkgJSAxNiA9PT0gMCkge1xuICAgICAgcmV0dXJuICgocmVhZGVyLmdldE9mZnNldCgpICsgMTYwICsgMTYpICYgfjB4ZikgPj0gcmVhZGVyLnNpemUoKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcmVhZGVyLmdldE9mZnNldCgpICsgMTYwICsgMTYgPj0gcmVhZGVyLnNpemUoKVxuICAgIH1cbiAgfVxuXG4gIC8vIHJlY3Vyc2l2ZWx5IHBhcnNlIG5vZGVzIHVudGlsIHRoZSBlbmQgb2YgdGhlIGZpbGUgaXMgcmVhY2hlZFxuICBwYXJzZU5vZGUocmVhZGVyLCB2ZXJzaW9uKSB7XG4gICAgY29uc3Qgbm9kZTogYW55ID0ge31cblxuICAgIC8vIFRoZSBmaXJzdCB0aHJlZSBkYXRhIHNpemVzIGRlcGVuZHMgb24gdmVyc2lvbi5cbiAgICBjb25zdCBlbmRPZmZzZXQgPSB2ZXJzaW9uID49IDc1MDAgPyByZWFkZXIuZ2V0VWludDY0KCkgOiByZWFkZXIuZ2V0VWludDMyKClcbiAgICBjb25zdCBudW1Qcm9wZXJ0aWVzID0gdmVyc2lvbiA+PSA3NTAwID8gcmVhZGVyLmdldFVpbnQ2NCgpIDogcmVhZGVyLmdldFVpbnQzMigpXG5cbiAgICAvLyBub3RlOiBkbyBub3QgcmVtb3ZlIHRoaXMgZXZlbiBpZiB5b3UgZ2V0IGEgbGludGVyIHdhcm5pbmcgYXMgaXQgbW92ZXMgdGhlIGJ1ZmZlciBmb3J3YXJkXG4gICAgY29uc3QgcHJvcGVydHlMaXN0TGVuID0gdmVyc2lvbiA+PSA3NTAwID8gcmVhZGVyLmdldFVpbnQ2NCgpIDogcmVhZGVyLmdldFVpbnQzMigpXG5cbiAgICBjb25zdCBuYW1lTGVuID0gcmVhZGVyLmdldFVpbnQ4KClcbiAgICBjb25zdCBuYW1lID0gcmVhZGVyLmdldFN0cmluZyhuYW1lTGVuKVxuXG4gICAgLy8gUmVnYXJkcyB0aGlzIG5vZGUgYXMgTlVMTC1yZWNvcmQgaWYgZW5kT2Zmc2V0IGlzIHplcm9cbiAgICBpZiAoZW5kT2Zmc2V0ID09PSAwKSByZXR1cm4gbnVsbFxuXG4gICAgY29uc3QgcHJvcGVydHlMaXN0OiBhbnkgPSBbXVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1Qcm9wZXJ0aWVzOyBpKyspIHtcbiAgICAgIHByb3BlcnR5TGlzdC5wdXNoKHRoaXMucGFyc2VQcm9wZXJ0eShyZWFkZXIpKVxuICAgIH1cblxuICAgIC8vIFJlZ2FyZHMgdGhlIGZpcnN0IHRocmVlIGVsZW1lbnRzIGluIHByb3BlcnR5TGlzdCBhcyBpZCwgYXR0ck5hbWUsIGFuZCBhdHRyVHlwZVxuICAgIGNvbnN0IGlkID0gcHJvcGVydHlMaXN0Lmxlbmd0aCA+IDAgPyBwcm9wZXJ0eUxpc3RbMF0gOiAnJ1xuICAgIGNvbnN0IGF0dHJOYW1lID0gcHJvcGVydHlMaXN0Lmxlbmd0aCA+IDEgPyBwcm9wZXJ0eUxpc3RbMV0gOiAnJ1xuICAgIGNvbnN0IGF0dHJUeXBlID0gcHJvcGVydHlMaXN0Lmxlbmd0aCA+IDIgPyBwcm9wZXJ0eUxpc3RbMl0gOiAnJ1xuXG4gICAgLy8gY2hlY2sgaWYgdGhpcyBub2RlIHJlcHJlc2VudHMganVzdCBhIHNpbmdsZSBwcm9wZXJ0eVxuICAgIC8vIGxpa2UgKG5hbWUsIDApIHNldCBvciAobmFtZTIsIFswLCAxLCAyXSkgc2V0IG9mIHtuYW1lOiAwLCBuYW1lMjogWzAsIDEsIDJdfVxuICAgIG5vZGUuc2luZ2xlUHJvcGVydHkgPSBudW1Qcm9wZXJ0aWVzID09PSAxICYmIHJlYWRlci5nZXRPZmZzZXQoKSA9PT0gZW5kT2Zmc2V0ID8gdHJ1ZSA6IGZhbHNlXG5cbiAgICB3aGlsZSAoZW5kT2Zmc2V0ID4gcmVhZGVyLmdldE9mZnNldCgpKSB7XG4gICAgICBjb25zdCBzdWJOb2RlID0gdGhpcy5wYXJzZU5vZGUocmVhZGVyLCB2ZXJzaW9uKVxuXG4gICAgICBpZiAoc3ViTm9kZSAhPT0gbnVsbCkgdGhpcy5wYXJzZVN1Yk5vZGUobmFtZSwgbm9kZSwgc3ViTm9kZSlcbiAgICB9XG5cbiAgICBub2RlLnByb3BlcnR5TGlzdCA9IHByb3BlcnR5TGlzdCAvLyByYXcgcHJvcGVydHkgbGlzdCB1c2VkIGJ5IHBhcmVudFxuXG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gJ251bWJlcicpIG5vZGUuaWQgPSBpZFxuICAgIGlmIChhdHRyTmFtZSAhPT0gJycpIG5vZGUuYXR0ck5hbWUgPSBhdHRyTmFtZVxuICAgIGlmIChhdHRyVHlwZSAhPT0gJycpIG5vZGUuYXR0clR5cGUgPSBhdHRyVHlwZVxuICAgIGlmIChuYW1lICE9PSAnJykgbm9kZS5uYW1lID0gbmFtZVxuXG4gICAgcmV0dXJuIG5vZGVcbiAgfVxuXG4gIHBhcnNlU3ViTm9kZShuYW1lLCBub2RlLCBzdWJOb2RlKSB7XG4gICAgLy8gc3BlY2lhbCBjYXNlOiBjaGlsZCBub2RlIGlzIHNpbmdsZSBwcm9wZXJ0eVxuICAgIGlmIChzdWJOb2RlLnNpbmdsZVByb3BlcnR5ID09PSB0cnVlKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHN1Yk5vZGUucHJvcGVydHlMaXN0WzBdXG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBub2RlW3N1Yk5vZGUubmFtZV0gPSBzdWJOb2RlXG5cbiAgICAgICAgc3ViTm9kZS5hID0gdmFsdWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGVbc3ViTm9kZS5uYW1lXSA9IHZhbHVlXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChuYW1lID09PSAnQ29ubmVjdGlvbnMnICYmIHN1Yk5vZGUubmFtZSA9PT0gJ0MnKSB7XG4gICAgICBjb25zdCBhcnJheTogYW55ID0gW11cblxuICAgICAgc3ViTm9kZS5wcm9wZXJ0eUxpc3QuZm9yRWFjaCgocHJvcGVydHksIGkpID0+IHtcbiAgICAgICAgLy8gZmlyc3QgQ29ubmVjdGlvbiBpcyBGQlggdHlwZSAoT08sIE9QLCBldGMuKS4gV2UnbGwgZGlzY2FyZCB0aGVzZVxuICAgICAgICBpZiAoaSAhPT0gMCkgYXJyYXkucHVzaChwcm9wZXJ0eSlcbiAgICAgIH0pXG5cbiAgICAgIGlmIChub2RlLmNvbm5lY3Rpb25zID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbm9kZS5jb25uZWN0aW9ucyA9IFtdXG4gICAgICB9XG5cbiAgICAgIG5vZGUuY29ubmVjdGlvbnMucHVzaChhcnJheSlcbiAgICB9IGVsc2UgaWYgKHN1Yk5vZGUubmFtZSA9PT0gJ1Byb3BlcnRpZXM3MCcpIHtcbiAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhzdWJOb2RlKVxuXG4gICAgICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBub2RlW2tleV0gPSBzdWJOb2RlW2tleV1cbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmIChuYW1lID09PSAnUHJvcGVydGllczcwJyAmJiBzdWJOb2RlLm5hbWUgPT09ICdQJykge1xuICAgICAgbGV0IGlubmVyUHJvcE5hbWUgPSBzdWJOb2RlLnByb3BlcnR5TGlzdFswXVxuICAgICAgbGV0IGlubmVyUHJvcFR5cGUxID0gc3ViTm9kZS5wcm9wZXJ0eUxpc3RbMV1cbiAgICAgIGNvbnN0IGlubmVyUHJvcFR5cGUyID0gc3ViTm9kZS5wcm9wZXJ0eUxpc3RbMl1cbiAgICAgIGNvbnN0IGlubmVyUHJvcEZsYWcgPSBzdWJOb2RlLnByb3BlcnR5TGlzdFszXVxuICAgICAgbGV0IGlubmVyUHJvcFZhbHVlXG5cbiAgICAgIGlmIChpbm5lclByb3BOYW1lLmluZGV4T2YoJ0xjbCAnKSA9PT0gMCkgaW5uZXJQcm9wTmFtZSA9IGlubmVyUHJvcE5hbWUucmVwbGFjZSgnTGNsICcsICdMY2xfJylcbiAgICAgIGlmIChpbm5lclByb3BUeXBlMS5pbmRleE9mKCdMY2wgJykgPT09IDApIGlubmVyUHJvcFR5cGUxID0gaW5uZXJQcm9wVHlwZTEucmVwbGFjZSgnTGNsICcsICdMY2xfJylcblxuICAgICAgaWYgKFxuICAgICAgICBpbm5lclByb3BUeXBlMSA9PT0gJ0NvbG9yJyB8fFxuICAgICAgICBpbm5lclByb3BUeXBlMSA9PT0gJ0NvbG9yUkdCJyB8fFxuICAgICAgICBpbm5lclByb3BUeXBlMSA9PT0gJ1ZlY3RvcicgfHxcbiAgICAgICAgaW5uZXJQcm9wVHlwZTEgPT09ICdWZWN0b3IzRCcgfHxcbiAgICAgICAgaW5uZXJQcm9wVHlwZTEuaW5kZXhPZignTGNsXycpID09PSAwXG4gICAgICApIHtcbiAgICAgICAgaW5uZXJQcm9wVmFsdWUgPSBbc3ViTm9kZS5wcm9wZXJ0eUxpc3RbNF0sIHN1Yk5vZGUucHJvcGVydHlMaXN0WzVdLCBzdWJOb2RlLnByb3BlcnR5TGlzdFs2XV1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlubmVyUHJvcFZhbHVlID0gc3ViTm9kZS5wcm9wZXJ0eUxpc3RbNF1cbiAgICAgIH1cblxuICAgICAgLy8gdGhpcyB3aWxsIGJlIGNvcGllZCB0byBwYXJlbnQsIHNlZSBhYm92ZVxuICAgICAgbm9kZVtpbm5lclByb3BOYW1lXSA9IHtcbiAgICAgICAgdHlwZTogaW5uZXJQcm9wVHlwZTEsXG4gICAgICAgIHR5cGUyOiBpbm5lclByb3BUeXBlMixcbiAgICAgICAgZmxhZzogaW5uZXJQcm9wRmxhZyxcbiAgICAgICAgdmFsdWU6IGlubmVyUHJvcFZhbHVlXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChub2RlW3N1Yk5vZGUubmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHR5cGVvZiBzdWJOb2RlLmlkID09PSAnbnVtYmVyJykge1xuICAgICAgICBub2RlW3N1Yk5vZGUubmFtZV0gPSB7fVxuICAgICAgICBub2RlW3N1Yk5vZGUubmFtZV1bc3ViTm9kZS5pZF0gPSBzdWJOb2RlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlW3N1Yk5vZGUubmFtZV0gPSBzdWJOb2RlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzdWJOb2RlLm5hbWUgPT09ICdQb3NlTm9kZScpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG5vZGVbc3ViTm9kZS5uYW1lXSkpIHtcbiAgICAgICAgICBub2RlW3N1Yk5vZGUubmFtZV0gPSBbbm9kZVtzdWJOb2RlLm5hbWVdXVxuICAgICAgICB9XG5cbiAgICAgICAgbm9kZVtzdWJOb2RlLm5hbWVdLnB1c2goc3ViTm9kZSlcbiAgICAgIH0gZWxzZSBpZiAobm9kZVtzdWJOb2RlLm5hbWVdW3N1Yk5vZGUuaWRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbm9kZVtzdWJOb2RlLm5hbWVdW3N1Yk5vZGUuaWRdID0gc3ViTm9kZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHBhcnNlUHJvcGVydHkocmVhZGVyKSB7XG4gICAgY29uc3QgdHlwZSA9IHJlYWRlci5nZXRTdHJpbmcoMSlcblxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnQyc6XG4gICAgICAgIHJldHVybiByZWFkZXIuZ2V0Qm9vbGVhbigpXG5cbiAgICAgIGNhc2UgJ0QnOlxuICAgICAgICByZXR1cm4gcmVhZGVyLmdldEZsb2F0NjQoKVxuXG4gICAgICBjYXNlICdGJzpcbiAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRGbG9hdDMyKClcblxuICAgICAgY2FzZSAnSSc6XG4gICAgICAgIHJldHVybiByZWFkZXIuZ2V0SW50MzIoKVxuXG4gICAgICBjYXNlICdMJzpcbiAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRJbnQ2NCgpXG5cbiAgICAgIGNhc2UgJ1InOlxuICAgICAgICBjb25zdCBsZW5ndGggPSByZWFkZXIuZ2V0VWludDMyKClcbiAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRBcnJheUJ1ZmZlcihsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ1MnOlxuICAgICAgICBjb25zdCBsZW5ndGgyID0gcmVhZGVyLmdldFVpbnQzMigpXG4gICAgICAgIHJldHVybiByZWFkZXIuZ2V0U3RyaW5nKGxlbmd0aDIpXG5cbiAgICAgIGNhc2UgJ1knOlxuICAgICAgICByZXR1cm4gcmVhZGVyLmdldEludDE2KClcblxuICAgICAgY2FzZSAnYic6XG4gICAgICBjYXNlICdjJzpcbiAgICAgIGNhc2UgJ2QnOlxuICAgICAgY2FzZSAnZic6XG4gICAgICBjYXNlICdpJzpcbiAgICAgIGNhc2UgJ2wnOlxuICAgICAgICBjb25zdCBhcnJheUxlbmd0aCA9IHJlYWRlci5nZXRVaW50MzIoKVxuICAgICAgICBjb25zdCBlbmNvZGluZyA9IHJlYWRlci5nZXRVaW50MzIoKSAvLyAwOiBub24tY29tcHJlc3NlZCwgMTogY29tcHJlc3NlZFxuICAgICAgICBjb25zdCBjb21wcmVzc2VkTGVuZ3RoID0gcmVhZGVyLmdldFVpbnQzMigpXG5cbiAgICAgICAgaWYgKGVuY29kaW5nID09PSAwKSB7XG4gICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdiJzpcbiAgICAgICAgICAgIGNhc2UgJ2MnOlxuICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLmdldEJvb2xlYW5BcnJheShhcnJheUxlbmd0aClcblxuICAgICAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgICAgICAgIHJldHVybiByZWFkZXIuZ2V0RmxvYXQ2NEFycmF5KGFycmF5TGVuZ3RoKVxuXG4gICAgICAgICAgICBjYXNlICdmJzpcbiAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5nZXRGbG9hdDMyQXJyYXkoYXJyYXlMZW5ndGgpXG5cbiAgICAgICAgICAgIGNhc2UgJ2knOlxuICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLmdldEludDMyQXJyYXkoYXJyYXlMZW5ndGgpXG5cbiAgICAgICAgICAgIGNhc2UgJ2wnOlxuICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLmdldEludDY0QXJyYXkoYXJyYXlMZW5ndGgpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBabGliID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAnRkJYTG9hZGVyOiBFeHRlcm5hbCBsaWJyYXJ5IEluZmxhdGUubWluLmpzIHJlcXVpcmVkLCBvYnRhaW4gb3IgaW1wb3J0IGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2ltYXlhL3psaWIuanMnXG4gICAgICAgICAgKVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaW5mbGF0ZSA9IG5ldyBabGliLkluZmxhdGUobmV3IFVpbnQ4QXJyYXkocmVhZGVyLmdldEFycmF5QnVmZmVyKGNvbXByZXNzZWRMZW5ndGgpKSkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuICAgICAgICBjb25zdCByZWFkZXIyID0gbmV3IEJpbmFyeVJlYWRlcihpbmZsYXRlLmRlY29tcHJlc3MoKS5idWZmZXIpXG5cbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgY2FzZSAnYic6XG4gICAgICAgICAgY2FzZSAnYyc6XG4gICAgICAgICAgICByZXR1cm4gcmVhZGVyMi5nZXRCb29sZWFuQXJyYXkoYXJyYXlMZW5ndGgpXG5cbiAgICAgICAgICBjYXNlICdkJzpcbiAgICAgICAgICAgIHJldHVybiByZWFkZXIyLmdldEZsb2F0NjRBcnJheShhcnJheUxlbmd0aClcblxuICAgICAgICAgIGNhc2UgJ2YnOlxuICAgICAgICAgICAgcmV0dXJuIHJlYWRlcjIuZ2V0RmxvYXQzMkFycmF5KGFycmF5TGVuZ3RoKVxuXG4gICAgICAgICAgY2FzZSAnaSc6XG4gICAgICAgICAgICByZXR1cm4gcmVhZGVyMi5nZXRJbnQzMkFycmF5KGFycmF5TGVuZ3RoKVxuXG4gICAgICAgICAgY2FzZSAnbCc6XG4gICAgICAgICAgICByZXR1cm4gcmVhZGVyMi5nZXRJbnQ2NEFycmF5KGFycmF5TGVuZ3RoKVxuICAgICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRkJYTG9hZGVyOiBVbmtub3duIHByb3BlcnR5IHR5cGUgJyArIHR5cGUpXG4gICAgfVxuICB9XG59XG5cbmNsYXNzIEJpbmFyeVJlYWRlciB7XG4gIGxpdHRsZUVuZGlhbjogYW55XG4gIG9mZnNldDogbnVtYmVyXG4gIGR2OiBEYXRhVmlld1xuICBjb25zdHJ1Y3RvcihidWZmZXIsIGxpdHRsZUVuZGlhbj8pIHtcbiAgICB0aGlzLmR2ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcilcbiAgICB0aGlzLm9mZnNldCA9IDBcbiAgICB0aGlzLmxpdHRsZUVuZGlhbiA9IGxpdHRsZUVuZGlhbiAhPT0gdW5kZWZpbmVkID8gbGl0dGxlRW5kaWFuIDogdHJ1ZVxuICB9XG5cbiAgZ2V0T2Zmc2V0KCkge1xuICAgIHJldHVybiB0aGlzLm9mZnNldFxuICB9XG5cbiAgc2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5kdi5idWZmZXIuYnl0ZUxlbmd0aFxuICB9XG5cbiAgc2tpcChsZW5ndGgpIHtcbiAgICB0aGlzLm9mZnNldCArPSBsZW5ndGhcbiAgfVxuXG4gIC8vIHNlZW1zIGxpa2UgdHJ1ZS9mYWxzZSByZXByZXNlbnRhdGlvbiBkZXBlbmRzIG9uIGV4cG9ydGVyLlxuICAvLyB0cnVlOiAxIG9yICdZJyg9MHg1OSksIGZhbHNlOiAwIG9yICdUJyg9MHg1NClcbiAgLy8gdGhlbiBzZWVzIExTQi5cbiAgZ2V0Qm9vbGVhbigpIHtcbiAgICByZXR1cm4gKHRoaXMuZ2V0VWludDgoKSAmIDEpID09PSAxXG4gIH1cblxuICBnZXRCb29sZWFuQXJyYXkoc2l6ZSkge1xuICAgIGNvbnN0IGE6IGFueSA9IFtdXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgYS5wdXNoKHRoaXMuZ2V0Qm9vbGVhbigpKVxuICAgIH1cblxuICAgIHJldHVybiBhXG4gIH1cblxuICBnZXRVaW50OCgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZHYuZ2V0VWludDgodGhpcy5vZmZzZXQpXG4gICAgdGhpcy5vZmZzZXQgKz0gMVxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgZ2V0SW50MTYoKSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLmR2LmdldEludDE2KHRoaXMub2Zmc2V0LCB0aGlzLmxpdHRsZUVuZGlhbilcbiAgICB0aGlzLm9mZnNldCArPSAyXG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICBnZXRJbnQzMigpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZHYuZ2V0SW50MzIodGhpcy5vZmZzZXQsIHRoaXMubGl0dGxlRW5kaWFuKVxuICAgIHRoaXMub2Zmc2V0ICs9IDRcbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIGdldEludDMyQXJyYXkoc2l6ZSkge1xuICAgIGNvbnN0IGE6IGFueSA9IFtdXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgYS5wdXNoKHRoaXMuZ2V0SW50MzIoKSlcbiAgICB9XG5cbiAgICByZXR1cm4gYVxuICB9XG5cbiAgZ2V0VWludDMyKCkge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5kdi5nZXRVaW50MzIodGhpcy5vZmZzZXQsIHRoaXMubGl0dGxlRW5kaWFuKVxuICAgIHRoaXMub2Zmc2V0ICs9IDRcbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIC8vIEphdmFTY3JpcHQgZG9lc24ndCBzdXBwb3J0IDY0LWJpdCBpbnRlZ2VyIHNvIGNhbGN1bGF0ZSB0aGlzIGhlcmVcbiAgLy8gMSA8PCAzMiB3aWxsIHJldHVybiAxIHNvIHVzaW5nIG11bHRpcGx5IG9wZXJhdGlvbiBpbnN0ZWFkIGhlcmUuXG4gIC8vIFRoZXJlJ3MgYSBwb3NzaWJpbGl0eSB0aGF0IHRoaXMgbWV0aG9kIHJldHVybnMgd3JvbmcgdmFsdWUgaWYgdGhlIHZhbHVlXG4gIC8vIGlzIG91dCBvZiB0aGUgcmFuZ2UgYmV0d2VlbiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiBhbmQgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIuXG4gIC8vIFRPRE86IHNhZmVseSBoYW5kbGUgNjQtYml0IGludGVnZXJcbiAgZ2V0SW50NjQoKSB7XG4gICAgbGV0IGxvdywgaGlnaFxuXG4gICAgaWYgKHRoaXMubGl0dGxlRW5kaWFuKSB7XG4gICAgICBsb3cgPSB0aGlzLmdldFVpbnQzMigpXG4gICAgICBoaWdoID0gdGhpcy5nZXRVaW50MzIoKVxuICAgIH0gZWxzZSB7XG4gICAgICBoaWdoID0gdGhpcy5nZXRVaW50MzIoKVxuICAgICAgbG93ID0gdGhpcy5nZXRVaW50MzIoKVxuICAgIH1cblxuICAgIC8vIGNhbGN1bGF0ZSBuZWdhdGl2ZSB2YWx1ZVxuICAgIGlmIChoaWdoICYgMHg4MDAwMDAwMCkge1xuICAgICAgaGlnaCA9IH5oaWdoICYgMHhmZmZmZmZmZlxuICAgICAgbG93ID0gfmxvdyAmIDB4ZmZmZmZmZmZcblxuICAgICAgaWYgKGxvdyA9PT0gMHhmZmZmZmZmZikgaGlnaCA9IChoaWdoICsgMSkgJiAweGZmZmZmZmZmXG5cbiAgICAgIGxvdyA9IChsb3cgKyAxKSAmIDB4ZmZmZmZmZmZcblxuICAgICAgcmV0dXJuIC0oaGlnaCAqIDB4MTAwMDAwMDAwICsgbG93KVxuICAgIH1cblxuICAgIHJldHVybiBoaWdoICogMHgxMDAwMDAwMDAgKyBsb3dcbiAgfVxuXG4gIGdldEludDY0QXJyYXkoc2l6ZSkge1xuICAgIGNvbnN0IGE6IGFueSA9IFtdXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgYS5wdXNoKHRoaXMuZ2V0SW50NjQoKSlcbiAgICB9XG5cbiAgICByZXR1cm4gYVxuICB9XG5cbiAgLy8gTm90ZTogc2VlIGdldEludDY0KCkgY29tbWVudFxuICBnZXRVaW50NjQoKSB7XG4gICAgbGV0IGxvdywgaGlnaFxuXG4gICAgaWYgKHRoaXMubGl0dGxlRW5kaWFuKSB7XG4gICAgICBsb3cgPSB0aGlzLmdldFVpbnQzMigpXG4gICAgICBoaWdoID0gdGhpcy5nZXRVaW50MzIoKVxuICAgIH0gZWxzZSB7XG4gICAgICBoaWdoID0gdGhpcy5nZXRVaW50MzIoKVxuICAgICAgbG93ID0gdGhpcy5nZXRVaW50MzIoKVxuICAgIH1cblxuICAgIHJldHVybiBoaWdoICogMHgxMDAwMDAwMDAgKyBsb3dcbiAgfVxuXG4gIGdldEZsb2F0MzIoKSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLmR2LmdldEZsb2F0MzIodGhpcy5vZmZzZXQsIHRoaXMubGl0dGxlRW5kaWFuKVxuICAgIHRoaXMub2Zmc2V0ICs9IDRcbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIGdldEZsb2F0MzJBcnJheShzaXplKSB7XG4gICAgY29uc3QgYTogYW55ID0gW11cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICBhLnB1c2godGhpcy5nZXRGbG9hdDMyKCkpXG4gICAgfVxuXG4gICAgcmV0dXJuIGFcbiAgfVxuXG4gIGdldEZsb2F0NjQoKSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLmR2LmdldEZsb2F0NjQodGhpcy5vZmZzZXQsIHRoaXMubGl0dGxlRW5kaWFuKVxuICAgIHRoaXMub2Zmc2V0ICs9IDhcbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIGdldEZsb2F0NjRBcnJheShzaXplKSB7XG4gICAgY29uc3QgYTogYW55ID0gW11cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICBhLnB1c2godGhpcy5nZXRGbG9hdDY0KCkpXG4gICAgfVxuXG4gICAgcmV0dXJuIGFcbiAgfVxuXG4gIGdldEFycmF5QnVmZmVyKHNpemUpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZHYuYnVmZmVyLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLm9mZnNldCArIHNpemUpXG4gICAgdGhpcy5vZmZzZXQgKz0gc2l6ZVxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgZ2V0U3RyaW5nKHNpemUpIHtcbiAgICAvLyBub3RlOiBzYWZhcmkgOSBkb2Vzbid0IHN1cHBvcnQgVWludDhBcnJheS5pbmRleE9mOyBjcmVhdGUgaW50ZXJtZWRpYXRlIGFycmF5IGluc3RlYWRcbiAgICBsZXQgYTogYW55ID0gW11cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICBhW2ldID0gdGhpcy5nZXRVaW50OCgpXG4gICAgfVxuXG4gICAgY29uc3QgbnVsbEJ5dGUgPSBhLmluZGV4T2YoMClcbiAgICBpZiAobnVsbEJ5dGUgPj0gMCkgYSA9IGEuc2xpY2UoMCwgbnVsbEJ5dGUpXG5cbiAgICByZXR1cm4gTG9hZGVyVXRpbHMuZGVjb2RlVGV4dChuZXcgVWludDhBcnJheShhKSlcbiAgfVxufVxuXG5jbGFzcyBGQlhUcmVlIHtcbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIGFkZChrZXksIHZhbCkge1xuICAgIHRoaXNba2V5XSA9IHZhbFxuICB9XG59XG5cbmZ1bmN0aW9uIGlzRmJ4Rm9ybWF0QmluYXJ5KGJ1ZmZlcikge1xuICBjb25zdCBDT1JSRUNUID0gJ0theWRhcmEgRkJYIEJpbmFyeSAgXFwwJ1xuXG4gIHJldHVybiBidWZmZXIuYnl0ZUxlbmd0aCA+PSBDT1JSRUNULmxlbmd0aCAmJiBDT1JSRUNUID09PSBjb252ZXJ0QXJyYXlCdWZmZXJUb1N0cmluZyhidWZmZXIsIDAsIENPUlJFQ1QubGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBpc0ZieEZvcm1hdEFTQ0lJKHRleHQpIHtcbiAgY29uc3QgQ09SUkVDVCA9IFtcbiAgICAnSycsXG4gICAgJ2EnLFxuICAgICd5JyxcbiAgICAnZCcsXG4gICAgJ2EnLFxuICAgICdyJyxcbiAgICAnYScsXG4gICAgJ1xcXFwnLFxuICAgICdGJyxcbiAgICAnQicsXG4gICAgJ1gnLFxuICAgICdcXFxcJyxcbiAgICAnQicsXG4gICAgJ2knLFxuICAgICduJyxcbiAgICAnYScsXG4gICAgJ3InLFxuICAgICd5JyxcbiAgICAnXFxcXCcsXG4gICAgJ1xcXFwnXG4gIF1cblxuICBsZXQgY3Vyc29yID0gMFxuXG4gIGZ1bmN0aW9uIHJlYWQob2Zmc2V0KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gdGV4dFtvZmZzZXQgLSAxXVxuICAgIHRleHQgPSB0ZXh0LnNsaWNlKGN1cnNvciArIG9mZnNldClcbiAgICBjdXJzb3IrK1xuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgQ09SUkVDVC5sZW5ndGg7ICsraSkge1xuICAgIGNvbnN0IG51bSA9IHJlYWQoMSlcbiAgICBpZiAobnVtID09PSBDT1JSRUNUW2ldKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuXG5mdW5jdGlvbiBnZXRGYnhWZXJzaW9uKHRleHQpIHtcbiAgY29uc3QgdmVyc2lvblJlZ0V4cCA9IC9GQlhWZXJzaW9uOiAoXFxkKykvXG4gIGNvbnN0IG1hdGNoID0gdGV4dC5tYXRjaCh2ZXJzaW9uUmVnRXhwKVxuICBpZiAobWF0Y2gpIHtcbiAgICBjb25zdCB2ZXJzaW9uID0gcGFyc2VJbnQobWF0Y2hbMV0pXG4gICAgcmV0dXJuIHZlcnNpb25cbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoJ0ZCWExvYWRlcjogQ2Fubm90IGZpbmQgdGhlIHZlcnNpb24gbnVtYmVyIGZvciB0aGUgZmlsZSBnaXZlbi4nKVxufVxuXG4vLyBDb252ZXJ0cyBGQlggdGlja3MgaW50byByZWFsIHRpbWUgc2Vjb25kcy5cbmZ1bmN0aW9uIGNvbnZlcnRGQlhUaW1lVG9TZWNvbmRzKHRpbWUpIHtcbiAgcmV0dXJuIHRpbWUgLyA0NjE4NjE1ODAwMFxufVxuXG5jb25zdCBkYXRhQXJyYXkgPSBbXVxuXG4vLyBleHRyYWN0cyB0aGUgZGF0YSBmcm9tIHRoZSBjb3JyZWN0IHBvc2l0aW9uIGluIHRoZSBGQlggYXJyYXkgYmFzZWQgb24gaW5kZXhpbmcgdHlwZVxuZnVuY3Rpb24gZ2V0RGF0YShwb2x5Z29uVmVydGV4SW5kZXgsIHBvbHlnb25JbmRleCwgdmVydGV4SW5kZXgsIGluZm9PYmplY3QpIHtcbiAgbGV0IGluZGV4XG5cbiAgc3dpdGNoIChpbmZvT2JqZWN0Lm1hcHBpbmdUeXBlKSB7XG4gICAgY2FzZSAnQnlQb2x5Z29uVmVydGV4JzpcbiAgICAgIGluZGV4ID0gcG9seWdvblZlcnRleEluZGV4XG4gICAgICBicmVha1xuICAgIGNhc2UgJ0J5UG9seWdvbic6XG4gICAgICBpbmRleCA9IHBvbHlnb25JbmRleFxuICAgICAgYnJlYWtcbiAgICBjYXNlICdCeVZlcnRpY2UnOlxuICAgICAgaW5kZXggPSB2ZXJ0ZXhJbmRleFxuICAgICAgYnJlYWtcbiAgICBjYXNlICdBbGxTYW1lJzpcbiAgICAgIGluZGV4ID0gaW5mb09iamVjdC5pbmRpY2VzWzBdXG4gICAgICBicmVha1xuICAgIGRlZmF1bHQ6XG4gICAgICBjb25zb2xlLndhcm4oJ0ZCWExvYWRlcjogdW5rbm93biBhdHRyaWJ1dGUgbWFwcGluZyB0eXBlICcgKyBpbmZvT2JqZWN0Lm1hcHBpbmdUeXBlKVxuICB9XG5cbiAgaWYgKGluZm9PYmplY3QucmVmZXJlbmNlVHlwZSA9PT0gJ0luZGV4VG9EaXJlY3QnKSBpbmRleCA9IGluZm9PYmplY3QuaW5kaWNlc1tpbmRleF1cblxuICBjb25zdCBmcm9tID0gaW5kZXggKiBpbmZvT2JqZWN0LmRhdGFTaXplXG4gIGNvbnN0IHRvID0gZnJvbSArIGluZm9PYmplY3QuZGF0YVNpemVcblxuICByZXR1cm4gc2xpY2UoZGF0YUFycmF5LCBpbmZvT2JqZWN0LmJ1ZmZlciwgZnJvbSwgdG8pXG59XG5cbmNvbnN0IHRlbXBFdWxlciA9IG5ldyBFdWxlcigpXG5jb25zdCB0ZW1wVmVjID0gbmV3IFZlY3RvcjMoKVxuXG4vLyBnZW5lcmF0ZSB0cmFuc2Zvcm1hdGlvbiBmcm9tIEZCWCB0cmFuc2Zvcm0gZGF0YVxuLy8gcmVmOiBodHRwczovL2hlbHAuYXV0b2Rlc2suY29tL3ZpZXcvRkJYLzIwMTcvRU5VLz9ndWlkPV9fZmlsZXNfR1VJRF8xMENERDYzQ183OUMxXzRGMkRfQkIyOF9BRDJCRTY1QTAyRURfaHRtXG4vLyByZWY6IGh0dHA6Ly9kb2NzLmF1dG9kZXNrLmNvbS9GQlgvMjAxNC9FTlUvRkJYLVNESy1Eb2N1bWVudGF0aW9uL2luZGV4Lmh0bWw/dXJsPWNwcF9yZWYvX3RyYW5zZm9ybWF0aW9uc18ybWFpbl84Y3h4LWV4YW1wbGUuaHRtbCx0b3BpY051bWJlcj1jcHBfcmVmX190cmFuc2Zvcm1hdGlvbnNfMm1haW5fOGN4eF9leGFtcGxlX2h0bWxmYzEwYTFlMS1iMThkLTRlNzItOWRjMC03MGQwZjE5NTlmNWVcbmZ1bmN0aW9uIGdlbmVyYXRlVHJhbnNmb3JtKHRyYW5zZm9ybURhdGEpIHtcbiAgY29uc3QgbFRyYW5zbGF0aW9uTSA9IG5ldyBNYXRyaXg0KClcbiAgY29uc3QgbFByZVJvdGF0aW9uTSA9IG5ldyBNYXRyaXg0KClcbiAgY29uc3QgbFJvdGF0aW9uTSA9IG5ldyBNYXRyaXg0KClcbiAgY29uc3QgbFBvc3RSb3RhdGlvbk0gPSBuZXcgTWF0cml4NCgpXG5cbiAgY29uc3QgbFNjYWxpbmdNID0gbmV3IE1hdHJpeDQoKVxuICBjb25zdCBsU2NhbGluZ1Bpdm90TSA9IG5ldyBNYXRyaXg0KClcbiAgY29uc3QgbFNjYWxpbmdPZmZzZXRNID0gbmV3IE1hdHJpeDQoKVxuICBjb25zdCBsUm90YXRpb25PZmZzZXRNID0gbmV3IE1hdHJpeDQoKVxuICBjb25zdCBsUm90YXRpb25QaXZvdE0gPSBuZXcgTWF0cml4NCgpXG5cbiAgbGV0IGxQYXJlbnRHWCA9IG5ldyBNYXRyaXg0KClcbiAgY29uc3QgbEdsb2JhbFQgPSBuZXcgTWF0cml4NCgpXG5cbiAgY29uc3QgaW5oZXJpdFR5cGUgPSB0cmFuc2Zvcm1EYXRhLmluaGVyaXRUeXBlID8gdHJhbnNmb3JtRGF0YS5pbmhlcml0VHlwZSA6IDBcblxuICBpZiAodHJhbnNmb3JtRGF0YS50cmFuc2xhdGlvbikgbFRyYW5zbGF0aW9uTS5zZXRQb3NpdGlvbih0ZW1wVmVjLmZyb21BcnJheSh0cmFuc2Zvcm1EYXRhLnRyYW5zbGF0aW9uKSlcblxuICBpZiAodHJhbnNmb3JtRGF0YS5wcmVSb3RhdGlvbikge1xuICAgIGNvbnN0IGFycmF5ID0gdHJhbnNmb3JtRGF0YS5wcmVSb3RhdGlvbi5tYXAoTWF0aFV0aWxzLmRlZ1RvUmFkKVxuICAgIGFycmF5LnB1c2godHJhbnNmb3JtRGF0YS5ldWxlck9yZGVyKVxuICAgIGxQcmVSb3RhdGlvbk0ubWFrZVJvdGF0aW9uRnJvbUV1bGVyKHRlbXBFdWxlci5mcm9tQXJyYXkoYXJyYXkpKVxuICB9XG5cbiAgaWYgKHRyYW5zZm9ybURhdGEucm90YXRpb24pIHtcbiAgICBjb25zdCBhcnJheSA9IHRyYW5zZm9ybURhdGEucm90YXRpb24ubWFwKE1hdGhVdGlscy5kZWdUb1JhZClcbiAgICBhcnJheS5wdXNoKHRyYW5zZm9ybURhdGEuZXVsZXJPcmRlcilcbiAgICBsUm90YXRpb25NLm1ha2VSb3RhdGlvbkZyb21FdWxlcih0ZW1wRXVsZXIuZnJvbUFycmF5KGFycmF5KSlcbiAgfVxuXG4gIGlmICh0cmFuc2Zvcm1EYXRhLnBvc3RSb3RhdGlvbikge1xuICAgIGNvbnN0IGFycmF5ID0gdHJhbnNmb3JtRGF0YS5wb3N0Um90YXRpb24ubWFwKE1hdGhVdGlscy5kZWdUb1JhZClcbiAgICBhcnJheS5wdXNoKHRyYW5zZm9ybURhdGEuZXVsZXJPcmRlcilcbiAgICBsUG9zdFJvdGF0aW9uTS5tYWtlUm90YXRpb25Gcm9tRXVsZXIodGVtcEV1bGVyLmZyb21BcnJheShhcnJheSkpXG4gIH1cblxuICBpZiAodHJhbnNmb3JtRGF0YS5zY2FsZSkgbFNjYWxpbmdNLnNjYWxlKHRlbXBWZWMuZnJvbUFycmF5KHRyYW5zZm9ybURhdGEuc2NhbGUpKVxuXG4gIC8vIFBpdm90cyBhbmQgb2Zmc2V0c1xuICBpZiAodHJhbnNmb3JtRGF0YS5zY2FsaW5nT2Zmc2V0KSBsU2NhbGluZ09mZnNldE0uc2V0UG9zaXRpb24odGVtcFZlYy5mcm9tQXJyYXkodHJhbnNmb3JtRGF0YS5zY2FsaW5nT2Zmc2V0KSlcbiAgaWYgKHRyYW5zZm9ybURhdGEuc2NhbGluZ1Bpdm90KSBsU2NhbGluZ1Bpdm90TS5zZXRQb3NpdGlvbih0ZW1wVmVjLmZyb21BcnJheSh0cmFuc2Zvcm1EYXRhLnNjYWxpbmdQaXZvdCkpXG4gIGlmICh0cmFuc2Zvcm1EYXRhLnJvdGF0aW9uT2Zmc2V0KSBsUm90YXRpb25PZmZzZXRNLnNldFBvc2l0aW9uKHRlbXBWZWMuZnJvbUFycmF5KHRyYW5zZm9ybURhdGEucm90YXRpb25PZmZzZXQpKVxuICBpZiAodHJhbnNmb3JtRGF0YS5yb3RhdGlvblBpdm90KSBsUm90YXRpb25QaXZvdE0uc2V0UG9zaXRpb24odGVtcFZlYy5mcm9tQXJyYXkodHJhbnNmb3JtRGF0YS5yb3RhdGlvblBpdm90KSlcblxuICAvLyBwYXJlbnQgdHJhbnNmb3JtXG4gIGlmICh0cmFuc2Zvcm1EYXRhLnBhcmVudE1hdHJpeFdvcmxkKSBsUGFyZW50R1ggPSB0cmFuc2Zvcm1EYXRhLnBhcmVudE1hdHJpeFdvcmxkXG5cbiAgLy8gR2xvYmFsIFJvdGF0aW9uXG4gIGNvbnN0IGxMUk0gPSBsUHJlUm90YXRpb25NLm11bHRpcGx5KGxSb3RhdGlvbk0pLm11bHRpcGx5KGxQb3N0Um90YXRpb25NKVxuICBjb25zdCBsUGFyZW50R1JNID0gbmV3IE1hdHJpeDQoKVxuICBsUGFyZW50R1guZXh0cmFjdFJvdGF0aW9uKGxQYXJlbnRHUk0pXG5cbiAgLy8gR2xvYmFsIFNoZWFyKlNjYWxpbmdcbiAgY29uc3QgbFBhcmVudFRNID0gbmV3IE1hdHJpeDQoKVxuICBsUGFyZW50VE0uY29weVBvc2l0aW9uKGxQYXJlbnRHWClcbiAgY29uc3QgbFBhcmVudEdSU00gPSBsUGFyZW50VE0uaW52ZXJ0KCkubXVsdGlwbHkobFBhcmVudEdYKVxuICBjb25zdCBsUGFyZW50R1NNID0gbFBhcmVudEdSTS5pbnZlcnQoKS5tdWx0aXBseShsUGFyZW50R1JTTSlcbiAgY29uc3QgbExTTSA9IGxTY2FsaW5nTVxuXG4gIGxldCBsR2xvYmFsUlNcbiAgaWYgKGluaGVyaXRUeXBlID09PSAwKSB7XG4gICAgbEdsb2JhbFJTID0gbFBhcmVudEdSTS5tdWx0aXBseShsTFJNKS5tdWx0aXBseShsUGFyZW50R1NNKS5tdWx0aXBseShsTFNNKVxuICB9IGVsc2UgaWYgKGluaGVyaXRUeXBlID09PSAxKSB7XG4gICAgbEdsb2JhbFJTID0gbFBhcmVudEdSTS5tdWx0aXBseShsUGFyZW50R1NNKS5tdWx0aXBseShsTFJNKS5tdWx0aXBseShsTFNNKVxuICB9IGVsc2Uge1xuICAgIGNvbnN0IGxQYXJlbnRMU00gPSBuZXcgTWF0cml4NCgpLmNvcHkobFNjYWxpbmdNKVxuXG4gICAgY29uc3QgbFBhcmVudEdTTV9ub0xvY2FsID0gbFBhcmVudEdTTS5tdWx0aXBseShsUGFyZW50TFNNLmludmVydCgpKVxuXG4gICAgbEdsb2JhbFJTID0gbFBhcmVudEdSTS5tdWx0aXBseShsTFJNKS5tdWx0aXBseShsUGFyZW50R1NNX25vTG9jYWwpLm11bHRpcGx5KGxMU00pXG4gIH1cblxuICAvLyBDYWxjdWxhdGUgdGhlIGxvY2FsIHRyYW5zZm9ybSBtYXRyaXhcbiAgbGV0IGxUcmFuc2Zvcm0gPSBsVHJhbnNsYXRpb25NXG4gICAgLm11bHRpcGx5KGxSb3RhdGlvbk9mZnNldE0pXG4gICAgLm11bHRpcGx5KGxSb3RhdGlvblBpdm90TSlcbiAgICAubXVsdGlwbHkobFByZVJvdGF0aW9uTSlcbiAgICAubXVsdGlwbHkobFJvdGF0aW9uTSlcbiAgICAubXVsdGlwbHkobFBvc3RSb3RhdGlvbk0pXG4gICAgLm11bHRpcGx5KGxSb3RhdGlvblBpdm90TS5pbnZlcnQoKSlcbiAgICAubXVsdGlwbHkobFNjYWxpbmdPZmZzZXRNKVxuICAgIC5tdWx0aXBseShsU2NhbGluZ1Bpdm90TSlcbiAgICAubXVsdGlwbHkobFNjYWxpbmdNKVxuICAgIC5tdWx0aXBseShsU2NhbGluZ1Bpdm90TS5pbnZlcnQoKSlcblxuICBjb25zdCBsTG9jYWxUV2l0aEFsbFBpdm90QW5kT2Zmc2V0SW5mbyA9IG5ldyBNYXRyaXg0KCkuY29weVBvc2l0aW9uKGxUcmFuc2Zvcm0pXG5cbiAgY29uc3QgbEdsb2JhbFRyYW5zbGF0aW9uID0gbFBhcmVudEdYLm11bHRpcGx5KGxMb2NhbFRXaXRoQWxsUGl2b3RBbmRPZmZzZXRJbmZvKVxuICBsR2xvYmFsVC5jb3B5UG9zaXRpb24obEdsb2JhbFRyYW5zbGF0aW9uKVxuXG4gIGxUcmFuc2Zvcm0gPSBsR2xvYmFsVC5tdWx0aXBseShsR2xvYmFsUlMpXG5cbiAgcmV0dXJuIGxUcmFuc2Zvcm1cbn1cblxuLy8gUmV0dXJucyB0aGUganMgaW50cmluc2ljIEV1bGVyIG9yZGVyIGNvcnJlc3BvbmRpbmcgdG8gRkJYIGV4dHJpbnNpYyBFdWxlciBvcmRlclxuLy8gcmVmOiBodHRwOi8vaGVscC5hdXRvZGVzay5jb20vdmlldy9GQlgvMjAxNy9FTlUvP2d1aWQ9X19jcHBfcmVmX2NsYXNzX2ZieF9ldWxlcl9odG1sXG5mdW5jdGlvbiBnZXRFdWxlck9yZGVyKG9yZGVyKSB7XG4gIG9yZGVyID0gb3JkZXIgfHwgMFxuXG4gIGNvbnN0IGVudW1zID0gW1xuICAgICdaWVgnLCAvLyAtPiBYWVogZXh0cmluc2ljXG4gICAgJ1laWCcsIC8vIC0+IFhaWSBleHRyaW5zaWNcbiAgICAnWFpZJywgLy8gLT4gWVpYIGV4dHJpbnNpY1xuICAgICdaWFknLCAvLyAtPiBZWFogZXh0cmluc2ljXG4gICAgJ1lYWicsIC8vIC0+IFpYWSBleHRyaW5zaWNcbiAgICAnWFlaJyAvLyAtPiBaWVggZXh0cmluc2ljXG4gICAgLy8nU3BoZXJpY1hZWicsIC8vIG5vdCBwb3NzaWJsZSB0byBzdXBwb3J0XG4gIF1cblxuICBpZiAob3JkZXIgPT09IDYpIHtcbiAgICBjb25zb2xlLndhcm4oJ0ZCWExvYWRlcjogdW5zdXBwb3J0ZWQgRXVsZXIgT3JkZXI6IFNwaGVyaWNhbCBYWVouIEFuaW1hdGlvbnMgYW5kIHJvdGF0aW9ucyBtYXkgYmUgaW5jb3JyZWN0LicpXG4gICAgcmV0dXJuIGVudW1zWzBdXG4gIH1cblxuICByZXR1cm4gZW51bXNbb3JkZXJdXG59XG5cbi8vIFBhcnNlcyBjb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBudW1iZXJzIGFuZCByZXR1cm5zIHRoZW0gYW4gYXJyYXkuXG4vLyBVc2VkIGludGVybmFsbHkgYnkgdGhlIFRleHRQYXJzZXJcbmZ1bmN0aW9uIHBhcnNlTnVtYmVyQXJyYXkodmFsdWUpIHtcbiAgY29uc3QgYXJyYXkgPSB2YWx1ZS5zcGxpdCgnLCcpLm1hcCgodmFsKSA9PiB7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsKVxuICB9KVxuXG4gIHJldHVybiBhcnJheVxufVxuXG5mdW5jdGlvbiBjb252ZXJ0QXJyYXlCdWZmZXJUb1N0cmluZyhidWZmZXIsIGZyb20/LCB0bz8pIHtcbiAgaWYgKGZyb20gPT09IHVuZGVmaW5lZCkgZnJvbSA9IDBcbiAgaWYgKHRvID09PSB1bmRlZmluZWQpIHRvID0gYnVmZmVyLmJ5dGVMZW5ndGhcblxuICByZXR1cm4gTG9hZGVyVXRpbHMuZGVjb2RlVGV4dChuZXcgVWludDhBcnJheShidWZmZXIsIGZyb20sIHRvKSlcbn1cblxuZnVuY3Rpb24gYXBwZW5kKGEsIGIpIHtcbiAgZm9yIChsZXQgaSA9IDAsIGogPSBhLmxlbmd0aCwgbCA9IGIubGVuZ3RoOyBpIDwgbDsgaSsrLCBqKyspIHtcbiAgICBhW2pdID0gYltpXVxuICB9XG59XG5cbmZ1bmN0aW9uIHNsaWNlKGEsIGIsIGZyb20sIHRvKSB7XG4gIGZvciAobGV0IGkgPSBmcm9tLCBqID0gMDsgaSA8IHRvOyBpKyssIGorKykge1xuICAgIGFbal0gPSBiW2ldXG4gIH1cblxuICByZXR1cm4gYVxufVxuXG4vLyBpbmplY3QgYXJyYXkgYTIgaW50byBhcnJheSBhMSBhdCBpbmRleFxuZnVuY3Rpb24gaW5qZWN0KGExLCBpbmRleCwgYTIpIHtcbiAgcmV0dXJuIGExLnNsaWNlKDAsIGluZGV4KS5jb25jYXQoYTIpLmNvbmNhdChhMS5zbGljZShpbmRleCkpXG59XG5cbmV4cG9ydCBkZWZhdWx0IEZCWExvYWRlclxuIiwiLyoqIExpc3Qgb2YgQXNzZXQgVHlwZXMuICovXG5leHBvcnQgZW51bSBBc3NldFR5cGUge1xuICBnbFRGLFxuICBGQlgsXG4gIE9CSixcbiAgVlJNLFxuICBQTkcsXG4gIEpQRUcsXG4gIE1QNCxcbiAgVFMsXG4gIE1LVixcbiAgTVAzLFxuICBPR0csXG4gIEFBQyxcbiAgQ1NWLFxuICBQbGFpblRleHQsXG4gIERPQyxcbiAgWExTLFxuICBTY3JpcHRcbn1cbiIsIi8qKiBMaXN0IG9mIEFzc2V0IENsYXNzZXMuICovXG5leHBvcnQgZW51bSBBc3NldENsYXNzIHtcbiAgTW9kZWwsXG4gIEltYWdlLFxuICBWaWRlbyxcbiAgQXVkaW8sXG4gIERvY3VtZW50LFxuICBUZXh0LFxuICBTY3JpcHRcbn1cbiIsImNvbnN0IGlzQWJzb2x1dGUgPSBuZXcgUmVnRXhwKGAoPzpeW2Etel1bYS16MC05Ky4tXSo6fFxcL1xcLylgKVxuZXhwb3J0IGNvbnN0IGlzQWJzb2x1dGVQYXRoID0gKHBhdGgpID0+IHtcbiAgcmV0dXJuIGlzQWJzb2x1dGUudGVzdChwYXRoKVxufVxuIiwiZXhwb3J0IGNvbnN0IERFRkFVTFRfTE9EX0RJU1RBTkNFUyA9IHtcbiAgJzAnOiA1LFxuICAnMSc6IDE1LFxuICAnMic6IDMwXG59XG5cbmV4cG9ydCBjb25zdCBMT0RTX1JFR0VYUCA9IG5ldyBSZWdFeHAoL14oLiopX0xPRChcXGQrKSQvKVxuXG5leHBvcnQgY29uc3QgTE9BREVSX1NUQVRVUyA9IHtcbiAgTE9BREVEOiAwLFxuICBMT0FESU5HOiAxLFxuICBFUlJPUjogMlxufVxuIiwiaW1wb3J0IHsgRmlsZUxvYWRlciwgTWVzaFBoeXNpY2FsTWF0ZXJpYWwsIE9iamVjdDNELCBMT0QsIFRleHR1cmVMb2FkZXIgfSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IGdldExvYWRlciBhcyBnZXRHTFRGTG9hZGVyLCBsb2FkRXh0ZW50aW9ucyB9IGZyb20gJy4uL2Z1bmN0aW9ucy9Mb2FkR0xURidcbmltcG9ydCB7IEZCWExvYWRlciB9IGZyb20gJy4uL2xvYWRlcnMvZmJ4L0ZCWExvYWRlcidcbmltcG9ydCB7IEFzc2V0VHlwZSB9IGZyb20gJy4uL2VudW0vQXNzZXRUeXBlJ1xuaW1wb3J0IHsgQXNzZXRDbGFzcyB9IGZyb20gJy4uL2VudW0vQXNzZXRDbGFzcydcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gJy4uLy4uL2Vjcy9jbGFzc2VzL0VudGl0eSdcbmltcG9ydCB7IGlzQWJzb2x1dGVQYXRoIH0gZnJvbSAnLi4vLi4vY29tbW9uL2Z1bmN0aW9ucy9pc0Fic29sdXRlUGF0aCdcbmltcG9ydCB7IEVuZ2luZSB9IGZyb20gJy4uLy4uL2Vjcy9jbGFzc2VzL0VuZ2luZSdcbmltcG9ydCB7IExPRFNfUkVHRVhQLCBERUZBVUxUX0xPRF9ESVNUQU5DRVMgfSBmcm9tICcuLi9jb25zdGFudHMvTG9hZGVyQ29uc3RhbnRzJ1xuXG5leHBvcnQgY29uc3QgcHJvY2Vzc01vZGVsQXNzZXQgPSAoYXNzZXQ6IGFueSwgcGFyYW1zOiBBc3NldExvYWRlclBhcmFtVHlwZSk6IHZvaWQgPT4ge1xuICBjb25zdCByZXBsYWNlZE1hdGVyaWFscyA9IG5ldyBNYXAoKVxuICBhc3NldC50cmF2ZXJzZSgoY2hpbGQpID0+IHtcbiAgICBpZiAoIWNoaWxkLmlzTWVzaCkgcmV0dXJuXG5cbiAgICBpZiAodHlwZW9mIHBhcmFtcy5yZWNlaXZlU2hhZG93ICE9PSAndW5kZWZpbmVkJykgY2hpbGQucmVjZWl2ZVNoYWRvdyA9IHBhcmFtcy5yZWNlaXZlU2hhZG93XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMuY2FzdFNoYWRvdyAhPT0gJ3VuZGVmaW5lZCcpIGNoaWxkLmNhc3RTaGFkb3cgPSBwYXJhbXMuY2FzdFNoYWRvd1xuXG4gICAgaWYgKHJlcGxhY2VkTWF0ZXJpYWxzLmhhcyhjaGlsZC5tYXRlcmlhbCkpIHtcbiAgICAgIGNoaWxkLm1hdGVyaWFsID0gcmVwbGFjZWRNYXRlcmlhbHMuZ2V0KGNoaWxkLm1hdGVyaWFsKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoY2hpbGQubWF0ZXJpYWw/LnVzZXJEYXRhPy5nbHRmRXh0ZW5zaW9ucz8uS0hSX21hdGVyaWFsc19jbGVhcmNvYXQpIHtcbiAgICAgICAgY29uc3QgbmV3TWF0ZXJpYWwgPSBuZXcgTWVzaFBoeXNpY2FsTWF0ZXJpYWwoe30pXG4gICAgICAgIG5ld01hdGVyaWFsLnNldFZhbHVlcyhjaGlsZC5tYXRlcmlhbCkgLy8gdG8gY29weSBwcm9wZXJ0aWVzIG9mIG9yaWdpbmFsIG1hdGVyaWFsXG4gICAgICAgIG5ld01hdGVyaWFsLmNsZWFyY29hdCA9IGNoaWxkLm1hdGVyaWFsLnVzZXJEYXRhLmdsdGZFeHRlbnNpb25zLktIUl9tYXRlcmlhbHNfY2xlYXJjb2F0LmNsZWFyY29hdEZhY3RvclxuICAgICAgICBuZXdNYXRlcmlhbC5jbGVhcmNvYXRSb3VnaG5lc3MgPVxuICAgICAgICAgIGNoaWxkLm1hdGVyaWFsLnVzZXJEYXRhLmdsdGZFeHRlbnNpb25zLktIUl9tYXRlcmlhbHNfY2xlYXJjb2F0LmNsZWFyY29hdFJvdWdobmVzc0ZhY3RvclxuICAgICAgICBuZXdNYXRlcmlhbC5kZWZpbmVzID0geyBTVEFOREFSRDogJycsIFBIWVNJQ0FMOiAnJyB9IC8vIG92ZXJyaWRlIGlmIGl0J3MgcmVwbGFjZWQgYnkgbm9uIFBIWVNJQ0FMIGRlZmluZXMgb2YgY2hpbGQubWF0ZXJpYWxcblxuICAgICAgICByZXBsYWNlZE1hdGVyaWFscy5zZXQoY2hpbGQubWF0ZXJpYWwsIG5ld01hdGVyaWFsKVxuICAgICAgICBjaGlsZC5tYXRlcmlhbCA9IG5ld01hdGVyaWFsXG4gICAgICB9XG4gICAgfVxuICB9KVxuICByZXBsYWNlZE1hdGVyaWFscy5jbGVhcigpXG5cbiAgaGFuZGxlTE9Ecyhhc3NldClcblxuICBpZiAoYXNzZXQuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgYXNzZXQuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IGhhbmRsZUxPRHMoY2hpbGQpKVxuICB9XG59XG5cbi8qKlxuICogSGFuZGxlcyBMZXZlbCBvZiBEZXRhaWwgZm9yIGFzc2V0LlxuICogQHBhcmFtIGFzc2V0IEFzc2V0IG9uIHdoaWNoIExPRCB3aWxsIGFwcGx5LlxuICogQHJldHVybnMgTE9EIGhhbmRsZWQgYXNzZXQuXG4gKi9cbmV4cG9ydCBjb25zdCBoYW5kbGVMT0RzID0gKGFzc2V0OiBPYmplY3QzRCk6IE9iamVjdDNEID0+IHtcbiAgY29uc3QgaGF2ZUFueUxPRHMgPSAhIWFzc2V0LmNoaWxkcmVuPy5maW5kKChjKSA9PiBTdHJpbmcoYy5uYW1lKS5tYXRjaChMT0RTX1JFR0VYUCkpXG4gIGlmICghaGF2ZUFueUxPRHMpIHtcbiAgICByZXR1cm4gYXNzZXRcbiAgfVxuXG4gIGNvbnN0IExPRHMgPSBuZXcgTWFwPHN0cmluZywgeyBvYmplY3Q6IE9iamVjdDNEOyBsZXZlbDogc3RyaW5nIH1bXT4oKVxuICBhc3NldC5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgIGNvbnN0IGNoaWxkTWF0Y2ggPSBjaGlsZC5uYW1lLm1hdGNoKExPRFNfUkVHRVhQKVxuICAgIGlmICghY2hpbGRNYXRjaCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IFtfLCBuYW1lLCBsZXZlbF06IHN0cmluZ1tdID0gY2hpbGRNYXRjaFxuICAgIGlmICghbmFtZSB8fCAhbGV2ZWwpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICghTE9Ecy5oYXMobmFtZSkpIHtcbiAgICAgIExPRHMuc2V0KG5hbWUsIFtdKVxuICAgIH1cblxuICAgIExPRHMuZ2V0KG5hbWUpPy5wdXNoKHsgb2JqZWN0OiBjaGlsZCwgbGV2ZWwgfSlcbiAgfSlcblxuICBMT0RzLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICBjb25zdCBsb2QgPSBuZXcgTE9EKClcbiAgICBsb2QubmFtZSA9IGtleVxuICAgIHZhbHVlWzBdLm9iamVjdC5wYXJlbnQ/LmFkZChsb2QpXG5cbiAgICB2YWx1ZS5mb3JFYWNoKCh7IGxldmVsLCBvYmplY3QgfSkgPT4ge1xuICAgICAgbG9kLmFkZExldmVsKG9iamVjdCwgQXNzZXRMb2FkZXIuTE9EX0RJU1RBTkNFU1tsZXZlbF0pXG4gICAgfSlcbiAgfSlcblxuICByZXR1cm4gYXNzZXRcbn1cblxuLyoqXG4gKiBHZXQgYXNzZXQgdHlwZSBmcm9tIHRoZSBhc3NldCBmaWxlIGV4dGVuc2lvbi5cbiAqIEBwYXJhbSBhc3NldEZpbGVOYW1lIE5hbWUgb2YgdGhlIEFzc2V0IGZpbGUuXG4gKiBAcmV0dXJucyBBc3NldCB0eXBlIG9mIHRoZSBmaWxlLlxuICovXG5leHBvcnQgY29uc3QgZ2V0QXNzZXRUeXBlID0gKGFzc2V0RmlsZU5hbWU6IHN0cmluZyk6IEFzc2V0VHlwZSA9PiB7XG4gIGlmICgvXFwuKD86Z2x0ZnxnbGIpJC8udGVzdChhc3NldEZpbGVOYW1lKSkgcmV0dXJuIEFzc2V0VHlwZS5nbFRGXG4gIGVsc2UgaWYgKC9cXC4oPzpmYngpJC8udGVzdChhc3NldEZpbGVOYW1lKSkgcmV0dXJuIEFzc2V0VHlwZS5GQlhcbiAgZWxzZSBpZiAoL1xcLig/OnZybSkkLy50ZXN0KGFzc2V0RmlsZU5hbWUpKSByZXR1cm4gQXNzZXRUeXBlLlZSTVxuICBlbHNlIGlmICgvXFwuKD86cG5nKSQvLnRlc3QoYXNzZXRGaWxlTmFtZSkpIHJldHVybiBBc3NldFR5cGUuUE5HXG4gIGVsc2UgaWYgKC9cXC4oPzpqcGd8anBlZ3wpJC8udGVzdChhc3NldEZpbGVOYW1lKSkgcmV0dXJuIEFzc2V0VHlwZS5KUEVHXG4gIHJldHVybiBudWxsIVxufVxuXG4vKipcbiAqIEdldCBhc3NldCBjbGFzcyBmcm9tIHRoZSBhc3NldCBmaWxlIGV4dGVuc2lvbi5cbiAqIEBwYXJhbSBhc3NldEZpbGVOYW1lIE5hbWUgb2YgdGhlIEFzc2V0IGZpbGUuXG4gKiBAcmV0dXJucyBBc3NldCBjbGFzcyBvZiB0aGUgZmlsZS5cbiAqL1xuZXhwb3J0IGNvbnN0IGdldEFzc2V0Q2xhc3MgPSAoYXNzZXRGaWxlTmFtZTogc3RyaW5nKTogQXNzZXRDbGFzcyA9PiB7XG4gIGlmICgvXFwuKD86Z2x0ZnxnbGJ8dnJtfGZieHxvYmopJC8udGVzdChhc3NldEZpbGVOYW1lKSkge1xuICAgIHJldHVybiBBc3NldENsYXNzLk1vZGVsXG4gIH0gZWxzZSBpZiAoL1xcLnBuZ3xqcGd8anBlZyQvLnRlc3QoYXNzZXRGaWxlTmFtZSkpIHtcbiAgICByZXR1cm4gQXNzZXRDbGFzcy5JbWFnZVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsIVxuICB9XG59XG5cbmNvbnN0IGZieExvYWRlciA9IG5ldyBGQlhMb2FkZXIoKVxuY29uc3QgdGV4dHVyZUxvYWRlciA9IG5ldyBUZXh0dXJlTG9hZGVyKClcbmNvbnN0IGZpbGVMb2FkZXIgPSBuZXcgRmlsZUxvYWRlcigpXG5cbmNvbnN0IGdldExvYWRlciA9IChhc3NldFR5cGU6IEFzc2V0VHlwZSkgPT4ge1xuICBzd2l0Y2ggKGFzc2V0VHlwZSkge1xuICAgIGNhc2UgQXNzZXRUeXBlLmdsVEY6XG4gICAgY2FzZSBBc3NldFR5cGUuVlJNOlxuICAgICAgcmV0dXJuIGdldEdMVEZMb2FkZXIoKVxuICAgIGNhc2UgQXNzZXRUeXBlLkZCWDpcbiAgICAgIHJldHVybiBmYnhMb2FkZXJcbiAgICBjYXNlIEFzc2V0VHlwZS5QTkc6XG4gICAgY2FzZSBBc3NldFR5cGUuSlBFRzpcbiAgICAgIHJldHVybiB0ZXh0dXJlTG9hZGVyXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmaWxlTG9hZGVyXG4gIH1cbn1cblxudHlwZSBBc3NldExvYWRlclBhcmFtVHlwZSA9IHtcbiAgdXJsOiBzdHJpbmdcbiAgY2FzdFNoYWRvdz86IGJvb2xlYW5cbiAgcmVjZWl2ZVNoYWRvdz86IGJvb2xlYW5cbiAgW2tleTogc3RyaW5nXTogYW55XG59XG5cbmNvbnN0IGxvYWQgPSAoXG4gIHBhcmFtczogQXNzZXRMb2FkZXJQYXJhbVR5cGUsXG4gIG9uTG9hZCA9IChyZXNwb25zZTogYW55KSA9PiB7fSxcbiAgb25Qcm9ncmVzcyA9IChyZXF1ZXN0OiBQcm9ncmVzc0V2ZW50KSA9PiB7fSxcbiAgb25FcnJvciA9IChldmVudDogRXJyb3JFdmVudCB8IEVycm9yKSA9PiB7fVxuKSA9PiB7XG4gIGlmICghcGFyYW1zLnVybCkge1xuICAgIG9uRXJyb3IobmV3IEVycm9yKCdVUkwgaXMgZW1wdHknKSlcbiAgICByZXR1cm5cbiAgfVxuICBjb25zdCB1cmwgPSBpc0Fic29sdXRlUGF0aChwYXJhbXMudXJsKSA/IHBhcmFtcy51cmwgOiBFbmdpbmUucHVibGljUGF0aCArIHBhcmFtcy51cmxcblxuICBpZiAoQXNzZXRMb2FkZXIuQ2FjaGUuaGFzKHVybCkpIHtcbiAgICBvbkxvYWQoQXNzZXRMb2FkZXIuQ2FjaGUuZ2V0KHVybCkpXG4gIH1cblxuICBjb25zdCBhc3NldFR5cGUgPSBnZXRBc3NldFR5cGUodXJsKVxuICBjb25zdCBhc3NldENsYXNzID0gZ2V0QXNzZXRDbGFzcyh1cmwpXG5cbiAgY29uc3QgbG9hZGVyID0gZ2V0TG9hZGVyKGFzc2V0VHlwZSlcblxuICBsb2FkZXIubG9hZChcbiAgICB1cmwsXG4gICAgKGFzc2V0KSA9PiB7XG4gICAgICBpZiAoYXNzZXRUeXBlID09PSBBc3NldFR5cGUuZ2xURiB8fCBhc3NldFR5cGUgPT09IEFzc2V0VHlwZS5WUk0pIHtcbiAgICAgICAgbG9hZEV4dGVudGlvbnMoYXNzZXQpXG4gICAgICB9XG5cbiAgICAgIGlmIChhc3NldENsYXNzID09PSBBc3NldENsYXNzLk1vZGVsKSB7XG4gICAgICAgIHByb2Nlc3NNb2RlbEFzc2V0KGFzc2V0LnNjZW5lLCBwYXJhbXMpXG4gICAgICB9XG5cbiAgICAgIEFzc2V0TG9hZGVyLkNhY2hlLnNldCh1cmwsIGFzc2V0KVxuXG4gICAgICBvbkxvYWQoYXNzZXQpXG4gICAgfSxcbiAgICBvblByb2dyZXNzLFxuICAgIG9uRXJyb3JcbiAgKVxufVxuXG5leHBvcnQgY2xhc3MgQXNzZXRMb2FkZXIge1xuICBzdGF0aWMgQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgYW55PigpXG4gIHN0YXRpYyBsb2FkZXJzID0gbmV3IE1hcDxudW1iZXIsIGFueT4oKVxuICBzdGF0aWMgTE9EX0RJU1RBTkNFUyA9IERFRkFVTFRfTE9EX0RJU1RBTkNFU1xuXG4gIGFzc2V0VHlwZTogQXNzZXRUeXBlXG4gIGFzc2V0Q2xhc3M6IEFzc2V0Q2xhc3NcbiAgcmVzdWx0OiBhbnlcblxuICBzdGF0aWMgbG9hZChcbiAgICBwYXJhbXM6IEFzc2V0TG9hZGVyUGFyYW1UeXBlLFxuICAgIG9uTG9hZCA9IChyZXNwb25zZTogYW55KSA9PiB7fSxcbiAgICBvblByb2dyZXNzID0gKHJlcXVlc3Q6IFByb2dyZXNzRXZlbnQpID0+IHt9LFxuICAgIG9uRXJyb3IgPSAoZXZlbnQ6IEVycm9yRXZlbnQgfCBFcnJvcikgPT4ge31cbiAgKSB7XG4gICAgbG9hZChwYXJhbXMsIG9uTG9hZCwgb25Qcm9ncmVzcywgb25FcnJvcilcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBsb2FkQXN5bmMocGFyYW1zOiBBc3NldExvYWRlclBhcmFtVHlwZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTxhbnk+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxvYWQocGFyYW1zLCByZXNvbHZlLCAoKSA9PiB7fSwgcmVzb2x2ZSlcbiAgICB9KVxuICB9XG5cbiAgLy8gVE9ETzogd2UgYXJlIHJlcGxjaWF0aW5nIGNvZGUgaGVyZSwgd2Ugc2hvdWxkIHJlZmFjdG9yIEFzc2V0TG9hZGVyIHRvIGJlIGVudGlyZWx5IGZ1bmN0aW9uYWxcbiAgc3RhdGljIGdldEZyb21DYWNoZSh1cmw6IHN0cmluZykge1xuICAgIHJldHVybiBBc3NldExvYWRlci5DYWNoZS5nZXQoaXNBYnNvbHV0ZVBhdGgodXJsKSA/IHVybCA6IEVuZ2luZS5wdWJsaWNQYXRoICsgdXJsKVxuICB9XG59XG4iLCJpbXBvcnQgeyBFbmdpbmUgfSBmcm9tICcuLi9jbGFzc2VzL0VuZ2luZSdcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVdvcmxkKCkge1xuICBsZXQgY3VycmVudFdvcmxkID0gRW5naW5lLmN1cnJlbnRXb3JsZFxuICBpZiAoIWN1cnJlbnRXb3JsZCkge1xuICAgIC8vIGNvbnNvbGUudHJhY2UoJ1dhcm5pbmc6IEFzc3VtaW5nIGRlZmF1bHQgd29ybGQuIChJdCBpcyBhZHZpc2FibGUgdG8gb25seSBjYWxsIEVDUyBmdW5jdGlvbnMgaW5zaWRlIGEgc3lzdGVtKScpXG4gICAgY3VycmVudFdvcmxkID0gRW5naW5lLmRlZmF1bHRXb3JsZFxuICB9XG4gIHJldHVybiBjdXJyZW50V29ybGQhXG59XG4iLCJpbXBvcnQgKiBhcyBiaXRFQ1MgZnJvbSAnYml0ZWNzJ1xuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnLi4vY2xhc3Nlcy9FbnRpdHknXG5pbXBvcnQgeyB1c2VXb3JsZCB9IGZyb20gJy4vU3lzdGVtSG9va3MnXG5cbmV4cG9ydCBjb25zdCBDb21wb25lbnRNYXAgPSBuZXcgTWFwPHN0cmluZywgQ29tcG9uZW50VHlwZTxhbnk+PigpXG5cbi8vIFRPRE86IGJlbmNobWFyayBtYXAgdnMgYXJyYXkgZm9yIGNvbXBvbmVudE1hcFxuZXhwb3J0IGNvbnN0IGNyZWF0ZU1hcHBlZENvbXBvbmVudCA9IDxUIGV4dGVuZHMge30sIFMgZXh0ZW5kcyBiaXRFQ1MuSVNjaGVtYSA9IGJpdEVDUy5JU2NoZW1hPihcbiAgbmFtZTogc3RyaW5nLFxuICBzY2hlbWE/OiBTXG4pID0+IHtcbiAgY29uc3QgY29tcG9uZW50ID0gYml0RUNTLmRlZmluZUNvbXBvbmVudChzY2hlbWEpXG4gIGNvbnN0IGNvbXBvbmVudE1hcCA9IG5ldyBNYXA8bnVtYmVyLCBUICYgU29BUHJveHk8Uz4+KClcbiAgLy8gY29uc3QgY29tcG9uZW50TWFwID0gW11cblxuICBpZiAoc2NoZW1hKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvbXBvbmVudCwgJ19zY2hlbWEnLCB7XG4gICAgICB2YWx1ZTogc2NoZW1hXG4gICAgfSlcbiAgfVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29tcG9uZW50LCAnX21hcCcsIHtcbiAgICB2YWx1ZTogY29tcG9uZW50TWFwXG4gIH0pXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb21wb25lbnQsICdfbmFtZScsIHtcbiAgICB2YWx1ZTogbmFtZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0pXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb21wb25lbnQsICdnZXQnLCB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uIChlaWQ6IG51bWJlcikge1xuICAgICAgLy8gcmV0dXJuIGNvbXBvbmVudE1hcFtlaWRdXG4gICAgICByZXR1cm4gY29tcG9uZW50TWFwLmdldChlaWQpXG4gICAgfVxuICB9KVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29tcG9uZW50LCAnc2V0Jywge1xuICAgIHZhbHVlOiBmdW5jdGlvbiAoZWlkOiBudW1iZXIsIHZhbHVlOiBhbnkpIHtcbiAgICAgIGlmIChzY2hlbWEpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoXG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgT2JqZWN0LmtleXMoc2NoZW1hKS5yZWR1Y2UoKGEsIGspID0+IHtcbiAgICAgICAgICAgIGFba10gPSB7XG4gICAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcG9uZW50W2tdW2VpZF1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgc2V0KHZhbCkge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudFtrXVtlaWRdID0gdmFsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhXG4gICAgICAgICAgfSwge30pXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIC8vIGNvbXBvbmVudE1hcFtlaWRdID0gdmFsdWVcbiAgICAgIHJldHVybiBjb21wb25lbnRNYXAuc2V0KGVpZCwgdmFsdWUpXG4gICAgfVxuICB9KVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29tcG9uZW50LCAnZGVsZXRlJywge1xuICAgIHZhbHVlOiBmdW5jdGlvbiAoZWlkOiBudW1iZXIpIHtcbiAgICAgIC8vIGNvbXBvbmVudE1hcFtlaWRdID0gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gY29tcG9uZW50TWFwLmRlbGV0ZShlaWQpXG4gICAgfVxuICB9KVxuXG4gIENvbXBvbmVudE1hcC5zZXQobmFtZSwgY29tcG9uZW50KVxuXG4gIHJldHVybiBjb21wb25lbnQgYXMgTWFwcGVkQ29tcG9uZW50PFQsIFM+XG59XG5cbmV4cG9ydCB0eXBlIFNvQVByb3h5PFMgZXh0ZW5kcyBiaXRFQ1MuSVNjaGVtYT4gPSB7XG4gIFtrZXkgaW4ga2V5b2YgU106IFNba2V5XSBleHRlbmRzIGJpdEVDUy5UeXBlXG4gICAgPyBudW1iZXJcbiAgICA6IFNba2V5XSBleHRlbmRzIFtpbmZlciBSVCwgbnVtYmVyXVxuICAgID8gUlQgZXh0ZW5kcyBiaXRFQ1MuVHlwZVxuICAgICAgPyBBcnJheTxudW1iZXI+XG4gICAgICA6IHVua25vd25cbiAgICA6IFNba2V5XSBleHRlbmRzIGJpdEVDUy5JU2NoZW1hXG4gICAgPyBTb0FQcm94eTxTW2tleV0+XG4gICAgOiB1bmtub3duXG59XG5cbmV4cG9ydCB0eXBlIE1hcHBlZENvbXBvbmVudDxULCBTIGV4dGVuZHMgYml0RUNTLklTY2hlbWE+ID0gYml0RUNTLkNvbXBvbmVudFR5cGU8Uz4gJiB7XG4gIGdldDogKGVudGl0eTogbnVtYmVyKSA9PiBUICYgU29BUHJveHk8Uz5cbiAgc2V0OiAoZW50aXR5OiBudW1iZXIsIHZhbHVlOiBUICYgU29BUHJveHk8Uz4pID0+IHZvaWRcbiAgZGVsZXRlOiAoZW50aXR5OiBudW1iZXIpID0+IHZvaWRcbn1cblxuZXhwb3J0IHR5cGUgQ29tcG9uZW50Q29uc3RydWN0b3I8VCwgUyBleHRlbmRzIGJpdEVDUy5JU2NoZW1hPiA9IE1hcHBlZENvbXBvbmVudDxULCBTPlxuZXhwb3J0IHR5cGUgQ29tcG9uZW50VHlwZTxDIGV4dGVuZHMgTWFwcGVkQ29tcG9uZW50PGFueSwgYW55Pj4gPSBSZXR1cm5UeXBlPENbJ2dldCddPlxuXG5leHBvcnQgY29uc3QgZ2V0Q29tcG9uZW50ID0gPFQsIFMgZXh0ZW5kcyBiaXRFQ1MuSVNjaGVtYT4oXG4gIGVudGl0eTogRW50aXR5LFxuICBjb21wb25lbnQ6IE1hcHBlZENvbXBvbmVudDxULCBTPlxuICAvLyBnZXRSZW1vdmVkID0gZmFsc2UsXG4gIC8vIHdvcmxkID0gdXNlV29ybGQoKVxuKTogVCAmIFNvQVByb3h5PFM+ID0+IHtcbiAgaWYgKHR5cGVvZiBlbnRpdHkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdbZ2V0Q29tcG9uZW50XTogZW50aXR5IGlzIHVuZGVmaW5lZCcpXG4gIH1cbiAgcmV0dXJuIGNvbXBvbmVudC5nZXQoZW50aXR5KVxuICAvLyBpZiAoZ2V0UmVtb3ZlZCB8fCBoYXNDb21wb25lbnQoZW50aXR5LCBjb21wb25lbnQsIHdvcmxkKSkgcmV0dXJuIGNvbXBvbmVudC5nZXQoZW50aXR5KVxufVxuXG5leHBvcnQgY29uc3QgYWRkQ29tcG9uZW50ID0gPFQsIFMgZXh0ZW5kcyBiaXRFQ1MuSVNjaGVtYT4oXG4gIGVudGl0eTogRW50aXR5LFxuICBjb21wb25lbnQ6IE1hcHBlZENvbXBvbmVudDxULCBTPixcbiAgYXJnczogVCAmIFBhcnRpYWw8U29BUHJveHk8Uz4+LFxuICB3b3JsZCA9IHVzZVdvcmxkKClcbikgPT4ge1xuICBpZiAodHlwZW9mIGVudGl0eSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1thZGRDb21wb25lbnRdOiBlbnRpdHkgaXMgdW5kZWZpbmVkJylcbiAgfVxuICBiaXRFQ1MuYWRkQ29tcG9uZW50KHdvcmxkLCBjb21wb25lbnQsIGVudGl0eSlcbiAgaWYgKChjb21wb25lbnQgYXMgYW55KS5fc2NoZW1hKSB7XG4gICAgZm9yIChjb25zdCBba2V5XSBvZiBPYmplY3QuZW50cmllcygoY29tcG9uZW50IGFzIGFueSkuX3NjaGVtYSBhcyBhbnkpKSB7XG4gICAgICBjb21wb25lbnRba2V5XVtlbnRpdHldID0gYXJnc1trZXldXG4gICAgfVxuICB9XG4gIHdvcmxkLl9yZW1vdmVkQ29tcG9uZW50cy5nZXQoZW50aXR5KT8uZGVsZXRlKGNvbXBvbmVudClcbiAgY29tcG9uZW50LnNldChlbnRpdHksIGFyZ3MgYXMgVCAmIFNvQVByb3h5PFM+KVxuICByZXR1cm4gY29tcG9uZW50LmdldChlbnRpdHkpXG59XG5cbmV4cG9ydCBjb25zdCBoYXNDb21wb25lbnQgPSA8VCwgUyBleHRlbmRzIGJpdEVDUy5JU2NoZW1hPihcbiAgZW50aXR5OiBFbnRpdHksXG4gIGNvbXBvbmVudDogTWFwcGVkQ29tcG9uZW50PFQsIFM+LFxuICB3b3JsZCA9IHVzZVdvcmxkKClcbikgPT4ge1xuICBpZiAodHlwZW9mIGVudGl0eSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1toYXNDb21wb25lbnRdOiBlbnRpdHkgaXMgdW5kZWZpbmVkJylcbiAgfVxuICAvLyByZXR1cm4gdHlwZW9mIGNvbXBvbmVudC5nZXQoZW50aXR5KSAhPT0gJ3VuZGVmaW5lZCdcbiAgcmV0dXJuIGJpdEVDUy5oYXNDb21wb25lbnQod29ybGQsIGNvbXBvbmVudCwgZW50aXR5KVxufVxuXG5leHBvcnQgY29uc3QgcmVtb3ZlQ29tcG9uZW50ID0gPFQsIFMgZXh0ZW5kcyBiaXRFQ1MuSVNjaGVtYT4oXG4gIGVudGl0eTogRW50aXR5LFxuICBjb21wb25lbnQ6IE1hcHBlZENvbXBvbmVudDxULCBTPixcbiAgd29ybGQgPSB1c2VXb3JsZCgpXG4pID0+IHtcbiAgaWYgKHR5cGVvZiBlbnRpdHkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgY29uc29sZS53YXJuKCdbcmVtb3ZlQ29tcG9uZW50XTogZW50aXR5IGlzIHVuZGVmaW5lZCcpXG4gICAgcmV0dXJuXG4gIH1cbiAgY29uc3QgY29tcG9uZW50UmVmID0gY29tcG9uZW50LmdldChlbnRpdHkpXG4gIGNvbnN0IHJlbW92ZWQgPSB3b3JsZC5fcmVtb3ZlZENvbXBvbmVudHMuZ2V0KGVudGl0eSkgPz8gbmV3IFNldCgpXG4gIHdvcmxkLl9yZW1vdmVkQ29tcG9uZW50cy5zZXQoZW50aXR5LCByZW1vdmVkLmFkZChjb21wb25lbnQpKVxuICBiaXRFQ1MucmVtb3ZlQ29tcG9uZW50KHdvcmxkLCBjb21wb25lbnQsIGVudGl0eSlcbiAgcmV0dXJuIGNvbXBvbmVudFJlZlxufVxuXG5leHBvcnQgY29uc3QgZ2V0QWxsQ29tcG9uZW50c09mVHlwZSA9IDxULCBTIGV4dGVuZHMgYml0RUNTLklTY2hlbWE+KFxuICBjb21wb25lbnQ6IE1hcHBlZENvbXBvbmVudDxULCBTPixcbiAgd29ybGQgPSB1c2VXb3JsZCgpXG4pOiBUW10gPT4ge1xuICBjb25zdCBxdWVyeSA9IGRlZmluZVF1ZXJ5KFtjb21wb25lbnRdKVxuICBjb25zdCBlbnRpdGllcyA9IHF1ZXJ5KHdvcmxkKVxuICByZXR1cm4gZW50aXRpZXMubWFwKChlKSA9PiB7XG4gICAgcmV0dXJuIGdldENvbXBvbmVudChlLCBjb21wb25lbnQpIVxuICB9KVxufVxuXG5leHBvcnQgY29uc3QgZ2V0QWxsRW50aXRpZXNXaXRoQ29tcG9uZW50ID0gPFQsIFMgZXh0ZW5kcyBiaXRFQ1MuSVNjaGVtYT4oXG4gIGNvbXBvbmVudDogTWFwcGVkQ29tcG9uZW50PFQsIFM+LFxuICB3b3JsZCA9IHVzZVdvcmxkKClcbik6IEVudGl0eVtdID0+IHtcbiAgY29uc3QgcXVlcnkgPSBkZWZpbmVRdWVyeShbY29tcG9uZW50XSlcbiAgcmV0dXJuIHF1ZXJ5KHdvcmxkKVxufVxuXG5leHBvcnQgY29uc3QgcmVtb3ZlQWxsQ29tcG9uZW50cyA9IChlbnRpdHk6IEVudGl0eSwgd29ybGQgPSB1c2VXb3JsZCgpKSA9PiB7XG4gIGZvciAoY29uc3QgY29tcG9uZW50IG9mIGJpdEVDUy5nZXRFbnRpdHlDb21wb25lbnRzKHdvcmxkLCBlbnRpdHkpKSB7XG4gICAgcmVtb3ZlQ29tcG9uZW50KGVudGl0eSwgY29tcG9uZW50IGFzIE1hcHBlZENvbXBvbmVudDxhbnksIGFueT4sIHdvcmxkKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVRdWVyeShjb21wb25lbnRzOiAoYml0RUNTLkNvbXBvbmVudCB8IGJpdEVDUy5RdWVyeU1vZGlmaWVyKVtdKSB7XG4gIGNvbnN0IHF1ZXJ5ID0gYml0RUNTLmRlZmluZVF1ZXJ5KGNvbXBvbmVudHMpIGFzIGJpdEVDUy5RdWVyeVxuICBjb25zdCBlbnRlclF1ZXJ5ID0gYml0RUNTLmVudGVyUXVlcnkocXVlcnkpXG4gIGNvbnN0IGV4aXRRdWVyeSA9IGJpdEVDUy5leGl0UXVlcnkocXVlcnkpXG4gIGNvbnN0IHdyYXBwZWRRdWVyeSA9ICh3b3JsZCA9IHVzZVdvcmxkKCkpID0+IHF1ZXJ5KHdvcmxkKSBhcyBFbnRpdHlbXVxuICB3cmFwcGVkUXVlcnkuZW50ZXIgPSAod29ybGQgPSB1c2VXb3JsZCgpKSA9PiBlbnRlclF1ZXJ5KHdvcmxkKSBhcyBFbnRpdHlbXVxuICB3cmFwcGVkUXVlcnkuZXhpdCA9ICh3b3JsZCA9IHVzZVdvcmxkKCkpID0+IGV4aXRRdWVyeSh3b3JsZCkgYXMgRW50aXR5W11cbiAgcmV0dXJuIHdyYXBwZWRRdWVyeVxufVxuXG5leHBvcnQgdHlwZSBRdWVyeSA9IFJldHVyblR5cGU8dHlwZW9mIGRlZmluZVF1ZXJ5PlxuIiwiaW1wb3J0IHsgQW5pbWF0aW9uQ2xpcCwgR3JvdXAsIE1hdGVyaWFsLCBNZXNoLCBTa2VsZXRvbiwgQm9uZSwgU2tpbm5lZE1lc2gsIFZlY3RvcjMgfSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IGdldExvYWRlciB9IGZyb20gJy4uL2Fzc2V0cy9mdW5jdGlvbnMvTG9hZEdMVEYnXG5pbXBvcnQgeyBpc0NsaWVudCB9IGZyb20gJy4uL2NvbW1vbi9mdW5jdGlvbnMvaXNDbGllbnQnXG5pbXBvcnQgeyBFbmdpbmUgfSBmcm9tICcuLi9lY3MvY2xhc3Nlcy9FbmdpbmUnXG5pbXBvcnQgeyBnZXREZWZhdWx0U2tlbGV0b24gfSBmcm9tICcuL2Z1bmN0aW9ucy9hdmF0YXJGdW5jdGlvbnMnXG5cbmV4cG9ydCBjbGFzcyBBbmltYXRpb25NYW5hZ2VyIHtcbiAgc3RhdGljIGluc3RhbmNlOiBBbmltYXRpb25NYW5hZ2VyID0gbmV3IEFuaW1hdGlvbk1hbmFnZXIoKVxuXG4gIF9hbmltYXRpb25zOiBBbmltYXRpb25DbGlwW11cbiAgX2RlZmF1bHRNb2RlbDogR3JvdXBcbiAgX2RlZmF1bHRTa2VsZXRvbjogU2tpbm5lZE1lc2hcblxuICBnZXRBbmltYXRpb25EdXJhdGlvbihuYW1lOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGNvbnN0IGFuaW1hdGlvbiA9IHRoaXMuX2FuaW1hdGlvbnMuZmluZCgoYSkgPT4gYS5uYW1lID09PSBuYW1lKVxuICAgIHJldHVybiBhbmltYXRpb24gPyBhbmltYXRpb24uZHVyYXRpb24gOiAwXG4gIH1cblxuICBnZXRBbmltYXRpb25zKCk6IFByb21pc2U8QW5pbWF0aW9uQ2xpcFtdPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBpZiAodGhpcy5fYW5pbWF0aW9ucykge1xuICAgICAgICByZXNvbHZlKHRoaXMuX2FuaW1hdGlvbnMpXG4gICAgICB9XG4gICAgICBpZiAoIWlzQ2xpZW50KSB7XG4gICAgICAgIHJlc29sdmUoW10pXG4gICAgICB9XG4gICAgICBnZXRMb2FkZXIoKS5sb2FkKFxuICAgICAgICBFbmdpbmUucHVibGljUGF0aCArICcvbW9kZWxzL2F2YXRhcnMvQW5pbWF0aW9ucy5nbGInLFxuICAgICAgICAoZ2x0ZikgPT4ge1xuICAgICAgICAgIGdsdGYuc2NlbmUudHJhdmVyc2UoKGNoaWxkKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2hpbGQudHlwZSA9PT0gJ1NraW5uZWRNZXNoJyAmJiAhdGhpcy5fZGVmYXVsdFNrZWxldG9uKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2RlZmF1bHRTa2VsZXRvbiA9IGNoaWxkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcblxuICAgICAgICAgIGlmICghdGhpcy5fZGVmYXVsdFNrZWxldG9uKSB7XG4gICAgICAgICAgICAvLyByZWNvbnN0cnVjdCBza2VsZXRvbiBmcm9tIHN0b3JlZCBkYXRhXG4gICAgICAgICAgICB0aGlzLl9kZWZhdWx0U2tlbGV0b24gPSBnZXREZWZhdWx0U2tlbGV0b24oKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuX2FuaW1hdGlvbnMgPSBnbHRmLmFuaW1hdGlvbnNcbiAgICAgICAgICB0aGlzLl9hbmltYXRpb25zPy5mb3JFYWNoKChjbGlwKSA9PiB7XG4gICAgICAgICAgICAvLyBUT0RPOiBtYWtlIGxpc3Qgb2YgbW9ycGggdGFyZ2V0cyBuYW1lc1xuICAgICAgICAgICAgY2xpcC50cmFja3MgPSBjbGlwLnRyYWNrcy5maWx0ZXIoKHRyYWNrKSA9PiAhdHJhY2submFtZS5tYXRjaCgvXkNDX0Jhc2VfLykpXG4gICAgICAgICAgfSlcbiAgICAgICAgICByZXNvbHZlKHRoaXMuX2FuaW1hdGlvbnMpXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnNvbGUubG9nLFxuICAgICAgICBjb25zb2xlLmVycm9yXG4gICAgICApXG4gICAgfSlcbiAgfVxuICBnZXREZWZhdWx0TW9kZWwoKTogUHJvbWlzZTxHcm91cD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgaWYgKHRoaXMuX2RlZmF1bHRNb2RlbCkge1xuICAgICAgICByZXNvbHZlKHRoaXMuX2RlZmF1bHRNb2RlbClcbiAgICAgIH1cbiAgICAgIGlmICghaXNDbGllbnQpIHtcbiAgICAgICAgcmVzb2x2ZShuZXcgR3JvdXAoKSlcbiAgICAgIH1cbiAgICAgIGdldExvYWRlcigpLmxvYWQoXG4gICAgICAgIEVuZ2luZS5wdWJsaWNQYXRoICsgJy9tb2RlbHMvYXZhdGFycy9SYXplcjEuZ2xiJyxcbiAgICAgICAgKGdsdGYpID0+IHtcbiAgICAgICAgICB0aGlzLl9kZWZhdWx0TW9kZWwgPSBnbHRmLnNjZW5lXG4gICAgICAgICAgdGhpcy5fZGVmYXVsdE1vZGVsLnRyYXZlcnNlKChvYmo6IE1lc2gpID0+IHtcbiAgICAgICAgICAgIGlmIChvYmoubWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgOyhvYmoubWF0ZXJpYWwgYXMgTWF0ZXJpYWwpLnRyYW5zcGFyZW50ID0gdHJ1ZVxuICAgICAgICAgICAgICA7KG9iai5tYXRlcmlhbCBhcyBNYXRlcmlhbCkub3BhY2l0eSA9IDAuNVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgcmVzb2x2ZSh0aGlzLl9kZWZhdWx0TW9kZWwpXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnNvbGUubG9nLFxuICAgICAgICBjb25zb2xlLmVycm9yXG4gICAgICApXG4gICAgfSlcbiAgfVxufVxuIiwiaW1wb3J0IHsgQW5pbWF0aW9uQ2xpcCwgQW5pbWF0aW9uTWl4ZXIgfSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IGNyZWF0ZU1hcHBlZENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2Vjcy9mdW5jdGlvbnMvQ29tcG9uZW50RnVuY3Rpb25zJ1xuXG50eXBlIEFuaW1hdGlvbkNvbXBvbmVudFR5cGUgPSB7XG4gIG1peGVyOiBBbmltYXRpb25NaXhlclxuICBhbmltYXRpb25zOiBBbmltYXRpb25DbGlwW11cbiAgYW5pbWF0aW9uU3BlZWQ6IG51bWJlclxufVxuXG5leHBvcnQgY29uc3QgQW5pbWF0aW9uQ29tcG9uZW50ID0gY3JlYXRlTWFwcGVkQ29tcG9uZW50PEFuaW1hdGlvbkNvbXBvbmVudFR5cGU+KCdBbmltYXRpb25Db21wb25lbnQnKVxuIiwiaW1wb3J0IHsgR3JvdXAgfSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IGNyZWF0ZU1hcHBlZENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2Vjcy9mdW5jdGlvbnMvQ29tcG9uZW50RnVuY3Rpb25zJ1xuXG5leHBvcnQgdHlwZSBBdmF0YXJDb21wb25lbnRUeXBlID0ge1xuICAvKipcbiAgICogQHByb3BlcnR5IHtHcm91cH0gbW9kZWxDb250YWluZXIgaXMgYSBncm91cCB0aGF0IGhvbGRzIHRoZSBtb2RlbCBzdWNoIHRoYXQgdGhlIGFuaW1hdGlvbnMgJiBJSyBjYW4gbW92ZSBzZXBlcmF0ZSBmcm9tIHRoZSB0cmFuc2Zvcm0gJiBjb2xsaWRlclxuICAgKiBJdCdzIGNlbnRlciBpcyBhdCB0aGUgY2VudGVyIG9mIHRoZSBjb2xsaWRlciwgZXhjZXB0IHdpdGggeSBzaXR0aW5nIGF0IHRoZSBib3R0b20gb2YgdGhlIGNvbGxpZGVyLCBmbHVzaCB3aXRoIHRoZSBncm91bmRcbiAgICovXG4gIG1vZGVsQ29udGFpbmVyOiBHcm91cFxuICBpc0dyb3VuZGVkOiBib29sZWFuXG4gIGF2YXRhcklkOiBzdHJpbmdcbiAgdGh1bWJuYWlsVVJMPzogc3RyaW5nXG4gIGF2YXRhclVSTD86IHN0cmluZ1xuICBhdmF0YXJIZWlnaHQ6IG51bWJlclxuICBhdmF0YXJIYWxmSGVpZ2h0OiBudW1iZXJcbn1cblxuZXhwb3J0IGNvbnN0IEF2YXRhckNvbXBvbmVudCA9IGNyZWF0ZU1hcHBlZENvbXBvbmVudDxBdmF0YXJDb21wb25lbnRUeXBlPignQXZhdGFyQ29tcG9uZW50JylcbiIsImltcG9ydCB7XG4gIEFuaW1hdGlvbkNsaXAsXG4gIEFuaW1hdGlvbk1peGVyLFxuICBFdWxlcixcbiAgTWF0cml4NCxcbiAgUXVhdGVybmlvbixcbiAgUXVhdGVybmlvbktleWZyYW1lVHJhY2ssXG4gIFNrZWxldG9uSGVscGVyLFxuICBWZWN0b3IyLFxuICBWZWN0b3IzLFxuICBWZWN0b3JLZXlmcmFtZVRyYWNrXG59IGZyb20gJ3RocmVlJ1xuXG5pbnRlcmZhY2UgU2hvcnRPcHRpb25zIHtcbiAgbmFtZXM/OiBhbnlcbiAgaGlwPzogc3RyaW5nXG59XG5cbmludGVyZmFjZSBSZXRhcmdldE9wdGlvbnMge1xuICB1c2VGaXJzdEZyYW1lUG9zaXRpb24/OiBib29sZWFuXG4gIGZwcz86IG51bWJlclxuICBuYW1lcz86IGFueVxuICBoaXA/OiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIE9wdGlvbnMge1xuICBwcmVzZXJ2ZU1hdHJpeD86IGJvb2xlYW5cbiAgcHJlc2VydmVQb3NpdGlvbj86IGJvb2xlYW5cbiAgcHJlc2VydmVIaXBQb3NpdGlvbj86IGJvb2xlYW5cbiAgdXNlVGFyZ2V0TWF0cml4PzogYm9vbGVhblxuICBoaXA/OiBzdHJpbmdcbiAgbmFtZXM/OiBhbnlcbiAgb2Zmc2V0cz86IGFueVxufVxuXG5jbGFzcyBTa2VsZXRvblV0aWxzIHtcbiAgc3RhdGljIHJldGFyZ2V0KHRhcmdldCwgc291cmNlLCBvcHRpb25zOiBPcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKVxuICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgcHJlc2VydmVNYXRyaXg6IHRydWUsXG4gICAgICAgIHByZXNlcnZlUG9zaXRpb246IHRydWUsXG4gICAgICAgIHByZXNlcnZlSGlwUG9zaXRpb246IGZhbHNlLFxuICAgICAgICB1c2VUYXJnZXRNYXRyaXg6IGZhbHNlLFxuICAgICAgICBoaXA6ICdoaXAnLFxuICAgICAgICBuYW1lczoge31cbiAgICAgIH1cbiAgICBjb25zdCBwb3MgPSBuZXcgVmVjdG9yMygpLFxuICAgICAgcXVhdCA9IG5ldyBRdWF0ZXJuaW9uKCksXG4gICAgICBzY2FsZSA9IG5ldyBWZWN0b3IzKCksXG4gICAgICBiaW5kQm9uZU1hdHJpeCA9IG5ldyBNYXRyaXg0KCksXG4gICAgICByZWxhdGl2ZU1hdHJpeCA9IG5ldyBNYXRyaXg0KCksXG4gICAgICBnbG9iYWxNYXRyaXggPSBuZXcgTWF0cml4NCgpXG5cbiAgICBvcHRpb25zLnByZXNlcnZlTWF0cml4ID0gb3B0aW9ucy5wcmVzZXJ2ZU1hdHJpeCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5wcmVzZXJ2ZU1hdHJpeCA6IHRydWVcbiAgICBvcHRpb25zLnByZXNlcnZlUG9zaXRpb24gPSBvcHRpb25zLnByZXNlcnZlUG9zaXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucHJlc2VydmVQb3NpdGlvbiA6IHRydWVcbiAgICBvcHRpb25zLnByZXNlcnZlSGlwUG9zaXRpb24gPSBvcHRpb25zLnByZXNlcnZlSGlwUG9zaXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucHJlc2VydmVIaXBQb3NpdGlvbiA6IGZhbHNlXG4gICAgb3B0aW9ucy51c2VUYXJnZXRNYXRyaXggPSBvcHRpb25zLnVzZVRhcmdldE1hdHJpeCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy51c2VUYXJnZXRNYXRyaXggOiBmYWxzZVxuICAgIG9wdGlvbnMuaGlwID0gb3B0aW9ucy5oaXAgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaGlwIDogJ2hpcCdcbiAgICBvcHRpb25zLm5hbWVzID0gb3B0aW9ucy5uYW1lcyB8fCB7fVxuXG4gICAgY29uc3Qgc291cmNlQm9uZXMgPSBzb3VyY2UuaXNPYmplY3QzRCA/IHNvdXJjZS5za2VsZXRvbi5ib25lcyA6IHRoaXMuZ2V0Qm9uZXMoc291cmNlKSxcbiAgICAgIGJvbmVzID0gdGFyZ2V0LmlzT2JqZWN0M0QgPyB0YXJnZXQuc2tlbGV0b24uYm9uZXMgOiB0aGlzLmdldEJvbmVzKHRhcmdldClcblxuICAgIGxldCBiaW5kQm9uZXMsIGJvbmUsIG5hbWUsIGJvbmVUbywgYm9uZXNQb3NpdGlvblxuXG4gICAgLy8gcmVzZXQgYm9uZXNcblxuICAgIGlmICh0YXJnZXQuaXNPYmplY3QzRCkge1xuICAgICAgdGFyZ2V0LnNrZWxldG9uLnBvc2UoKVxuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zLnVzZVRhcmdldE1hdHJpeCA9IHRydWVcbiAgICAgIG9wdGlvbnMucHJlc2VydmVNYXRyaXggPSBmYWxzZVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnByZXNlcnZlUG9zaXRpb24pIHtcbiAgICAgIGJvbmVzUG9zaXRpb24gPSBbXVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJvbmVzUG9zaXRpb24ucHVzaChib25lc1tpXS5wb3NpdGlvbi5jbG9uZSgpKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnByZXNlcnZlTWF0cml4KSB7XG4gICAgICAvLyByZXNldCBtYXRyaXhcblxuICAgICAgdGFyZ2V0LnVwZGF0ZU1hdHJpeFdvcmxkKClcblxuICAgICAgdGFyZ2V0Lm1hdHJpeFdvcmxkLmlkZW50aXR5KClcblxuICAgICAgLy8gcmVzZXQgY2hpbGRyZW4gbWF0cml4XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFyZ2V0LmNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHRhcmdldC5jaGlsZHJlbltpXS51cGRhdGVNYXRyaXhXb3JsZCh0cnVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLm9mZnNldHMpIHtcbiAgICAgIGJpbmRCb25lcyA9IFtdXG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9uZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgYm9uZSA9IGJvbmVzW2ldXG4gICAgICAgIG5hbWUgPSBvcHRpb25zLm5hbWVzW2JvbmUubmFtZV0gfHwgYm9uZS5uYW1lXG5cbiAgICAgICAgaWYgKG9wdGlvbnMub2Zmc2V0cyAmJiBvcHRpb25zLm9mZnNldHNbbmFtZV0pIHtcbiAgICAgICAgICBib25lLm1hdHJpeC5tdWx0aXBseShvcHRpb25zLm9mZnNldHNbbmFtZV0pXG5cbiAgICAgICAgICBib25lLm1hdHJpeC5kZWNvbXBvc2UoYm9uZS5wb3NpdGlvbiwgYm9uZS5xdWF0ZXJuaW9uLCBib25lLnNjYWxlKVxuXG4gICAgICAgICAgYm9uZS51cGRhdGVNYXRyaXhXb3JsZCgpXG4gICAgICAgIH1cblxuICAgICAgICBiaW5kQm9uZXMucHVzaChib25lLm1hdHJpeFdvcmxkLmNsb25lKCkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib25lcy5sZW5ndGg7ICsraSkge1xuICAgICAgYm9uZSA9IGJvbmVzW2ldXG4gICAgICBuYW1lID0gb3B0aW9ucy5uYW1lc1tib25lLm5hbWVdIHx8IGJvbmUubmFtZVxuXG4gICAgICBib25lVG8gPSB0aGlzLmdldEJvbmVCeU5hbWUobmFtZSwgc291cmNlQm9uZXMpXG5cbiAgICAgIGdsb2JhbE1hdHJpeC5jb3B5KGJvbmUubWF0cml4V29ybGQpXG5cbiAgICAgIGlmIChib25lVG8pIHtcbiAgICAgICAgYm9uZVRvLnVwZGF0ZU1hdHJpeFdvcmxkKClcblxuICAgICAgICBpZiAob3B0aW9ucy51c2VUYXJnZXRNYXRyaXgpIHtcbiAgICAgICAgICByZWxhdGl2ZU1hdHJpeC5jb3B5KGJvbmVUby5tYXRyaXhXb3JsZClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZWxhdGl2ZU1hdHJpeC5jb3B5KHRhcmdldC5tYXRyaXhXb3JsZCkuaW52ZXJ0KClcbiAgICAgICAgICByZWxhdGl2ZU1hdHJpeC5tdWx0aXBseShib25lVG8ubWF0cml4V29ybGQpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZ25vcmUgc2NhbGUgdG8gZXh0cmFjdCByb3RhdGlvblxuXG4gICAgICAgIHNjYWxlLnNldEZyb21NYXRyaXhTY2FsZShyZWxhdGl2ZU1hdHJpeClcbiAgICAgICAgcmVsYXRpdmVNYXRyaXguc2NhbGUoc2NhbGUuc2V0KDEgLyBzY2FsZS54LCAxIC8gc2NhbGUueSwgMSAvIHNjYWxlLnopKVxuXG4gICAgICAgIC8vIGFwcGx5IHRvIGdsb2JhbCBtYXRyaXhcblxuICAgICAgICBnbG9iYWxNYXRyaXgubWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocXVhdC5zZXRGcm9tUm90YXRpb25NYXRyaXgocmVsYXRpdmVNYXRyaXgpKVxuXG4gICAgICAgIGlmICh0YXJnZXQuaXNPYmplY3QzRCkge1xuICAgICAgICAgIGNvbnN0IGJvbmVJbmRleCA9IGJvbmVzLmluZGV4T2YoYm9uZSksXG4gICAgICAgICAgICB3QmluZE1hdHJpeCA9IGJpbmRCb25lc1xuICAgICAgICAgICAgICA/IGJpbmRCb25lc1tib25lSW5kZXhdXG4gICAgICAgICAgICAgIDogYmluZEJvbmVNYXRyaXguY29weSh0YXJnZXQuc2tlbGV0b24uYm9uZUludmVyc2VzW2JvbmVJbmRleF0pLmludmVydCgpXG5cbiAgICAgICAgICBnbG9iYWxNYXRyaXgubXVsdGlwbHkod0JpbmRNYXRyaXgpXG4gICAgICAgIH1cblxuICAgICAgICBnbG9iYWxNYXRyaXguY29weVBvc2l0aW9uKHJlbGF0aXZlTWF0cml4KVxuICAgICAgfVxuXG4gICAgICBpZiAoYm9uZS5wYXJlbnQgJiYgYm9uZS5wYXJlbnQuaXNCb25lKSB7XG4gICAgICAgIGJvbmUubWF0cml4LmNvcHkoYm9uZS5wYXJlbnQubWF0cml4V29ybGQpLmludmVydCgpXG4gICAgICAgIGJvbmUubWF0cml4Lm11bHRpcGx5KGdsb2JhbE1hdHJpeClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJvbmUubWF0cml4LmNvcHkoZ2xvYmFsTWF0cml4KVxuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5wcmVzZXJ2ZUhpcFBvc2l0aW9uICYmIG5hbWUgPT09IG9wdGlvbnMuaGlwKSB7XG4gICAgICAgIGJvbmUubWF0cml4LnNldFBvc2l0aW9uKHBvcy5zZXQoMCwgYm9uZS5wb3NpdGlvbi55LCAwKSlcbiAgICAgIH1cblxuICAgICAgYm9uZS5tYXRyaXguZGVjb21wb3NlKGJvbmUucG9zaXRpb24sIGJvbmUucXVhdGVybmlvbiwgYm9uZS5zY2FsZSlcblxuICAgICAgYm9uZS51cGRhdGVNYXRyaXhXb3JsZCgpXG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMucHJlc2VydmVQb3NpdGlvbikge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib25lcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBib25lID0gYm9uZXNbaV1cbiAgICAgICAgbmFtZSA9IG9wdGlvbnMubmFtZXNbYm9uZS5uYW1lXSB8fCBib25lLm5hbWVcblxuICAgICAgICBpZiAobmFtZSAhPT0gb3B0aW9ucy5oaXApIHtcbiAgICAgICAgICBib25lLnBvc2l0aW9uLmNvcHkoYm9uZXNQb3NpdGlvbltpXSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnByZXNlcnZlTWF0cml4KSB7XG4gICAgICAvLyByZXN0b3JlIG1hdHJpeFxuXG4gICAgICB0YXJnZXQudXBkYXRlTWF0cml4V29ybGQodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgcmV0YXJnZXRDbGlwKHRhcmdldCwgc291cmNlLCBjbGlwLCBvcHRpb25zOiBSZXRhcmdldE9wdGlvbnMgPSB7fSkge1xuICAgIG9wdGlvbnMudXNlRmlyc3RGcmFtZVBvc2l0aW9uID0gb3B0aW9ucy51c2VGaXJzdEZyYW1lUG9zaXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudXNlRmlyc3RGcmFtZVBvc2l0aW9uIDogZmFsc2VcbiAgICBvcHRpb25zLmZwcyA9IG9wdGlvbnMuZnBzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmZwcyA6IDMwXG4gICAgb3B0aW9ucy5uYW1lcyA9IG9wdGlvbnMubmFtZXMgfHwgW11cblxuICAgIGlmICghc291cmNlLmlzT2JqZWN0M0QpIHtcbiAgICAgIHNvdXJjZSA9IHRoaXMuZ2V0SGVscGVyRnJvbVNrZWxldG9uKHNvdXJjZSlcbiAgICB9XG5cbiAgICBjb25zdCBudW1GcmFtZXMgPSBNYXRoLnJvdW5kKGNsaXAuZHVyYXRpb24gKiAob3B0aW9ucy5mcHMgLyAxMDAwKSAqIDEwMDApLFxuICAgICAgZGVsdGEgPSAxIC8gb3B0aW9ucy5mcHMsXG4gICAgICBjb252ZXJ0ZWRUcmFja3M6IChWZWN0b3JLZXlmcmFtZVRyYWNrIHwgUXVhdGVybmlvbktleWZyYW1lVHJhY2spW10gPSBbXSxcbiAgICAgIG1peGVyID0gbmV3IEFuaW1hdGlvbk1peGVyKHNvdXJjZSksXG4gICAgICBib25lcyA9IHRoaXMuZ2V0Qm9uZXModGFyZ2V0LnNrZWxldG9uKSxcbiAgICAgIGJvbmVEYXRhcyA9IFtdXG4gICAgbGV0IHBvc2l0aW9uT2Zmc2V0LCBib25lLCBib25lVG8sIGJvbmVEYXRhLCBuYW1lXG5cbiAgICBtaXhlci5jbGlwQWN0aW9uKGNsaXApLnBsYXkoKVxuICAgIG1peGVyLnVwZGF0ZSgwKVxuXG4gICAgc291cmNlLnVwZGF0ZU1hdHJpeFdvcmxkKClcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtRnJhbWVzOyArK2kpIHtcbiAgICAgIGNvbnN0IHRpbWUgPSBpICogZGVsdGFcblxuICAgICAgdGhpcy5yZXRhcmdldCh0YXJnZXQsIHNvdXJjZSwgb3B0aW9ucylcblxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBib25lcy5sZW5ndGg7ICsraikge1xuICAgICAgICBuYW1lID0gb3B0aW9ucy5uYW1lc1tib25lc1tqXS5uYW1lXSB8fCBib25lc1tqXS5uYW1lXG5cbiAgICAgICAgYm9uZVRvID0gdGhpcy5nZXRCb25lQnlOYW1lKG5hbWUsIHNvdXJjZS5za2VsZXRvbilcblxuICAgICAgICBpZiAoYm9uZVRvKSB7XG4gICAgICAgICAgYm9uZSA9IGJvbmVzW2pdXG4gICAgICAgICAgYm9uZURhdGEgPSBib25lRGF0YXNbal0gPSBib25lRGF0YXNbal0gfHwgeyBib25lOiBib25lIH1cblxuICAgICAgICAgIGlmIChvcHRpb25zLmhpcCA9PT0gbmFtZSkge1xuICAgICAgICAgICAgaWYgKCFib25lRGF0YS5wb3MpIHtcbiAgICAgICAgICAgICAgYm9uZURhdGEucG9zID0ge1xuICAgICAgICAgICAgICAgIHRpbWVzOiBuZXcgRmxvYXQzMkFycmF5KG51bUZyYW1lcyksXG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuZXcgRmxvYXQzMkFycmF5KG51bUZyYW1lcyAqIDMpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudXNlRmlyc3RGcmFtZVBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb25PZmZzZXQgPSBib25lLnBvc2l0aW9uLmNsb25lKClcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJvbmUucG9zaXRpb24uc3ViKHBvc2l0aW9uT2Zmc2V0KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBib25lRGF0YS5wb3MudGltZXNbaV0gPSB0aW1lXG5cbiAgICAgICAgICAgIGJvbmUucG9zaXRpb24udG9BcnJheShib25lRGF0YS5wb3MudmFsdWVzLCBpICogMylcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWJvbmVEYXRhLnF1YXQpIHtcbiAgICAgICAgICAgIGJvbmVEYXRhLnF1YXQgPSB7XG4gICAgICAgICAgICAgIHRpbWVzOiBuZXcgRmxvYXQzMkFycmF5KG51bUZyYW1lcyksXG4gICAgICAgICAgICAgIHZhbHVlczogbmV3IEZsb2F0MzJBcnJheShudW1GcmFtZXMgKiA0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJvbmVEYXRhLnF1YXQudGltZXNbaV0gPSB0aW1lXG5cbiAgICAgICAgICBib25lLnF1YXRlcm5pb24udG9BcnJheShib25lRGF0YS5xdWF0LnZhbHVlcywgaSAqIDQpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWl4ZXIudXBkYXRlKGRlbHRhKVxuXG4gICAgICBzb3VyY2UudXBkYXRlTWF0cml4V29ybGQoKVxuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9uZURhdGFzLmxlbmd0aDsgKytpKSB7XG4gICAgICBib25lRGF0YSA9IGJvbmVEYXRhc1tpXVxuXG4gICAgICBpZiAoYm9uZURhdGEpIHtcbiAgICAgICAgaWYgKGJvbmVEYXRhLnBvcykge1xuICAgICAgICAgIGNvbnZlcnRlZFRyYWNrcy5wdXNoKFxuICAgICAgICAgICAgbmV3IFZlY3RvcktleWZyYW1lVHJhY2soXG4gICAgICAgICAgICAgICcuYm9uZXNbJyArIGJvbmVEYXRhLmJvbmUubmFtZSArICddLnBvc2l0aW9uJyxcbiAgICAgICAgICAgICAgYm9uZURhdGEucG9zLnRpbWVzLFxuICAgICAgICAgICAgICBib25lRGF0YS5wb3MudmFsdWVzXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICB9XG5cbiAgICAgICAgY29udmVydGVkVHJhY2tzLnB1c2goXG4gICAgICAgICAgbmV3IFF1YXRlcm5pb25LZXlmcmFtZVRyYWNrKFxuICAgICAgICAgICAgJy5ib25lc1snICsgYm9uZURhdGEuYm9uZS5uYW1lICsgJ10ucXVhdGVybmlvbicsXG4gICAgICAgICAgICBib25lRGF0YS5xdWF0LnRpbWVzLFxuICAgICAgICAgICAgYm9uZURhdGEucXVhdC52YWx1ZXNcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBtaXhlci51bmNhY2hlQWN0aW9uKGNsaXApXG5cbiAgICByZXR1cm4gbmV3IEFuaW1hdGlvbkNsaXAoY2xpcC5uYW1lLCAtMSwgY29udmVydGVkVHJhY2tzKVxuICB9XG5cbiAgc3RhdGljIGdldEhlbHBlckZyb21Ta2VsZXRvbihza2VsZXRvbikge1xuICAgIGNvbnN0IHNvdXJjZSA9IG5ldyBTa2VsZXRvbkhlbHBlcihza2VsZXRvbi5ib25lc1swXSlcbiAgICA7KHNvdXJjZSBhcyBhbnkpLnNrZWxldG9uID0gc2tlbGV0b25cblxuICAgIHJldHVybiBzb3VyY2VcbiAgfVxuXG4gIHN0YXRpYyBnZXRTa2VsZXRvbk9mZnNldHModGFyZ2V0LCBzb3VyY2UsIG9wdGlvbnM6IFNob3J0T3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgdGFyZ2V0UGFyZW50UG9zID0gbmV3IFZlY3RvcjMoKSxcbiAgICAgIHRhcmdldFBvcyA9IG5ldyBWZWN0b3IzKCksXG4gICAgICBzb3VyY2VQYXJlbnRQb3MgPSBuZXcgVmVjdG9yMygpLFxuICAgICAgc291cmNlUG9zID0gbmV3IFZlY3RvcjMoKSxcbiAgICAgIHRhcmdldERpciA9IG5ldyBWZWN0b3IyKCksXG4gICAgICBzb3VyY2VEaXIgPSBuZXcgVmVjdG9yMigpXG5cbiAgICBvcHRpb25zLmhpcCA9IG9wdGlvbnMuaGlwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmhpcCA6ICdoaXAnXG4gICAgb3B0aW9ucy5uYW1lcyA9IG9wdGlvbnMubmFtZXMgfHwge31cblxuICAgIGlmICghc291cmNlLmlzT2JqZWN0M0QpIHtcbiAgICAgIHNvdXJjZSA9IHRoaXMuZ2V0SGVscGVyRnJvbVNrZWxldG9uKHNvdXJjZSlcbiAgICB9XG5cbiAgICBjb25zdCBuYW1lS2V5cyA9IE9iamVjdC5rZXlzKG9wdGlvbnMubmFtZXMpLFxuICAgICAgbmFtZVZhbHVlcyA9IE9iamVjdC52YWx1ZXMob3B0aW9ucy5uYW1lcyksXG4gICAgICBzb3VyY2VCb25lcyA9IHNvdXJjZS5pc09iamVjdDNEID8gc291cmNlLnNrZWxldG9uLmJvbmVzIDogdGhpcy5nZXRCb25lcyhzb3VyY2UpLFxuICAgICAgYm9uZXMgPSB0YXJnZXQuaXNPYmplY3QzRCA/IHRhcmdldC5za2VsZXRvbi5ib25lcyA6IHRoaXMuZ2V0Qm9uZXModGFyZ2V0KSxcbiAgICAgIG9mZnNldHM6IE1hdHJpeDRbXSA9IFtdXG5cbiAgICBsZXQgYm9uZSwgYm9uZVRvLCBuYW1lLCBpXG5cbiAgICB0YXJnZXQuc2tlbGV0b24ucG9zZSgpXG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgYm9uZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGJvbmUgPSBib25lc1tpXVxuICAgICAgbmFtZSA9IG9wdGlvbnMubmFtZXNbYm9uZS5uYW1lXSB8fCBib25lLm5hbWVcblxuICAgICAgYm9uZVRvID0gdGhpcy5nZXRCb25lQnlOYW1lKG5hbWUsIHNvdXJjZUJvbmVzKVxuXG4gICAgICBpZiAoYm9uZVRvICYmIG5hbWUgIT09IG9wdGlvbnMuaGlwKSB7XG4gICAgICAgIGNvbnN0IGJvbmVQYXJlbnQgPSB0aGlzLmdldE5lYXJlc3RCb25lKGJvbmUucGFyZW50LCBuYW1lS2V5cyksXG4gICAgICAgICAgYm9uZVRvUGFyZW50ID0gdGhpcy5nZXROZWFyZXN0Qm9uZShib25lVG8ucGFyZW50LCBuYW1lVmFsdWVzKVxuXG4gICAgICAgIGJvbmVQYXJlbnQudXBkYXRlTWF0cml4V29ybGQoKVxuICAgICAgICBib25lVG9QYXJlbnQudXBkYXRlTWF0cml4V29ybGQoKVxuXG4gICAgICAgIHRhcmdldFBhcmVudFBvcy5zZXRGcm9tTWF0cml4UG9zaXRpb24oYm9uZVBhcmVudC5tYXRyaXhXb3JsZClcbiAgICAgICAgdGFyZ2V0UG9zLnNldEZyb21NYXRyaXhQb3NpdGlvbihib25lLm1hdHJpeFdvcmxkKVxuXG4gICAgICAgIHNvdXJjZVBhcmVudFBvcy5zZXRGcm9tTWF0cml4UG9zaXRpb24oYm9uZVRvUGFyZW50Lm1hdHJpeFdvcmxkKVxuICAgICAgICBzb3VyY2VQb3Muc2V0RnJvbU1hdHJpeFBvc2l0aW9uKGJvbmVUby5tYXRyaXhXb3JsZClcblxuICAgICAgICB0YXJnZXREaXJcbiAgICAgICAgICAuc3ViVmVjdG9ycyhuZXcgVmVjdG9yMih0YXJnZXRQb3MueCwgdGFyZ2V0UG9zLnkpLCBuZXcgVmVjdG9yMih0YXJnZXRQYXJlbnRQb3MueCwgdGFyZ2V0UGFyZW50UG9zLnkpKVxuICAgICAgICAgIC5ub3JtYWxpemUoKVxuXG4gICAgICAgIHNvdXJjZURpclxuICAgICAgICAgIC5zdWJWZWN0b3JzKG5ldyBWZWN0b3IyKHNvdXJjZVBvcy54LCBzb3VyY2VQb3MueSksIG5ldyBWZWN0b3IyKHNvdXJjZVBhcmVudFBvcy54LCBzb3VyY2VQYXJlbnRQb3MueSkpXG4gICAgICAgICAgLm5vcm1hbGl6ZSgpXG5cbiAgICAgICAgY29uc3QgbGF0ZXJpYWxBbmdsZSA9IHRhcmdldERpci5hbmdsZSgpIC0gc291cmNlRGlyLmFuZ2xlKClcblxuICAgICAgICBjb25zdCBvZmZzZXQgPSBuZXcgTWF0cml4NCgpLm1ha2VSb3RhdGlvbkZyb21FdWxlcihuZXcgRXVsZXIoMCwgMCwgbGF0ZXJpYWxBbmdsZSkpXG5cbiAgICAgICAgYm9uZS5tYXRyaXgubXVsdGlwbHkob2Zmc2V0KVxuXG4gICAgICAgIGJvbmUubWF0cml4LmRlY29tcG9zZShib25lLnBvc2l0aW9uLCBib25lLnF1YXRlcm5pb24sIGJvbmUuc2NhbGUpXG5cbiAgICAgICAgYm9uZS51cGRhdGVNYXRyaXhXb3JsZCgpXG5cbiAgICAgICAgb2Zmc2V0c1tuYW1lXSA9IG9mZnNldFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvZmZzZXRzXG4gIH1cblxuICBzdGF0aWMgcmVuYW1lQm9uZXMoc2tlbGV0b24sIG5hbWVzKSB7XG4gICAgY29uc3QgYm9uZXMgPSB0aGlzLmdldEJvbmVzKHNrZWxldG9uKVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib25lcy5sZW5ndGg7ICsraSkge1xuICAgICAgY29uc3QgYm9uZSA9IGJvbmVzW2ldXG5cbiAgICAgIGlmIChuYW1lc1tib25lLm5hbWVdKSB7XG4gICAgICAgIGJvbmUubmFtZSA9IG5hbWVzW2JvbmUubmFtZV1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgc3RhdGljIGdldEJvbmVzKHNrZWxldG9uKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoc2tlbGV0b24pID8gc2tlbGV0b24gOiBza2VsZXRvbi5ib25lc1xuICB9XG5cbiAgc3RhdGljIGdldEJvbmVCeU5hbWUobmFtZSwgc2tlbGV0b24pIHtcbiAgICBmb3IgKGxldCBpID0gMCwgYm9uZXMgPSB0aGlzLmdldEJvbmVzKHNrZWxldG9uKTsgaSA8IGJvbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAobmFtZSA9PT0gYm9uZXNbaV0ubmFtZSkgcmV0dXJuIGJvbmVzW2ldXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldE5lYXJlc3RCb25lKGJvbmUsIG5hbWVzKSB7XG4gICAgd2hpbGUgKGJvbmUuaXNCb25lKSB7XG4gICAgICBpZiAobmFtZXMuaW5kZXhPZihib25lLm5hbWUpICE9PSAtMSkge1xuICAgICAgICByZXR1cm4gYm9uZVxuICAgICAgfVxuXG4gICAgICBib25lID0gYm9uZS5wYXJlbnRcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZmluZEJvbmVUcmFja0RhdGEobmFtZSwgdHJhY2tzKSB7XG4gICAgY29uc3QgcmVnZXhwID0gL1xcWyguKilcXF1cXC4oLiopLyxcbiAgICAgIHJlc3VsdCA9IHsgbmFtZTogbmFtZSB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYWNrcy5sZW5ndGg7ICsraSkge1xuICAgICAgLy8gMSBpcyB0cmFjayBuYW1lXG4gICAgICAvLyAyIGlzIHRyYWNrIHR5cGVcbiAgICAgIGNvbnN0IHRyYWNrRGF0YSA9IHJlZ2V4cC5leGVjKHRyYWNrc1tpXS5uYW1lKVxuXG4gICAgICBpZiAodHJhY2tEYXRhICYmIG5hbWUgPT09IHRyYWNrRGF0YVsxXSkge1xuICAgICAgICByZXN1bHRbdHJhY2tEYXRhWzJdXSA9IGlcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBzdGF0aWMgZ2V0RXF1YWxzQm9uZXNOYW1lcyhza2VsZXRvbiwgdGFyZ2V0U2tlbGV0b24pIHtcbiAgICBjb25zdCBzb3VyY2VCb25lcyA9IHRoaXMuZ2V0Qm9uZXMoc2tlbGV0b24pLFxuICAgICAgdGFyZ2V0Qm9uZXMgPSB0aGlzLmdldEJvbmVzKHRhcmdldFNrZWxldG9uKSxcbiAgICAgIGJvbmVzOiBhbnkgPSBbXVxuXG4gICAgc2VhcmNoOiBmb3IgKGxldCBpID0gMDsgaSA8IHNvdXJjZUJvbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBib25lTmFtZSA9IHNvdXJjZUJvbmVzW2ldLm5hbWVcblxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0YXJnZXRCb25lcy5sZW5ndGg7IGorKykge1xuICAgICAgICBpZiAoYm9uZU5hbWUgPT09IHRhcmdldEJvbmVzW2pdLm5hbWUpIHtcbiAgICAgICAgICBib25lcy5wdXNoKGJvbmVOYW1lKVxuXG4gICAgICAgICAgY29udGludWUgc2VhcmNoXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYm9uZXNcbiAgfVxuXG4gIHN0YXRpYyBjbG9uZShzb3VyY2UpIHtcbiAgICBjb25zdCBzb3VyY2VMb29rdXAgPSBuZXcgTWFwKClcbiAgICBjb25zdCBjbG9uZUxvb2t1cCA9IG5ldyBNYXAoKVxuXG4gICAgY29uc3QgY2xvbmUgPSBzb3VyY2UuY2xvbmUoKVxuXG4gICAgcGFyYWxsZWxUcmF2ZXJzZShzb3VyY2UsIGNsb25lLCAoc291cmNlTm9kZSwgY2xvbmVkTm9kZSkgPT4ge1xuICAgICAgc291cmNlTG9va3VwLnNldChjbG9uZWROb2RlLCBzb3VyY2VOb2RlKVxuICAgICAgY2xvbmVMb29rdXAuc2V0KHNvdXJjZU5vZGUsIGNsb25lZE5vZGUpXG4gICAgfSlcblxuICAgIGNsb25lLnRyYXZlcnNlKChub2RlKSA9PiB7XG4gICAgICBpZiAoIW5vZGUuaXNTa2lubmVkTWVzaCkgcmV0dXJuXG5cbiAgICAgIGNvbnN0IGNsb25lZE1lc2ggPSBub2RlXG4gICAgICBjb25zdCBzb3VyY2VNZXNoID0gc291cmNlTG9va3VwLmdldChub2RlKVxuICAgICAgY29uc3Qgc291cmNlQm9uZXMgPSBzb3VyY2VNZXNoLnNrZWxldG9uLmJvbmVzXG5cbiAgICAgIGNsb25lZE1lc2guc2tlbGV0b24gPSBzb3VyY2VNZXNoLnNrZWxldG9uLmNsb25lKClcbiAgICAgIGNsb25lZE1lc2guYmluZE1hdHJpeC5jb3B5KHNvdXJjZU1lc2guYmluZE1hdHJpeClcblxuICAgICAgY2xvbmVkTWVzaC5za2VsZXRvbi5ib25lcyA9IHNvdXJjZUJvbmVzLm1hcCgoYm9uZSkgPT4ge1xuICAgICAgICBpZiAoIWNsb25lTG9va3VwLmhhcyhib25lKSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICdCb25lIHdhcyBub3QgY2xvbmVkJyxcbiAgICAgICAgICAgIGJvbmUsXG4gICAgICAgICAgICAnLiBDb21tb24gcmVhc29uIGlzIHRoYXQgYm9uZXMgcGFyZW50IGlzIG91dCBvZiBjbG9uZSBzb3VyY2UnLFxuICAgICAgICAgICAgc291cmNlXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbG9uZUxvb2t1cC5nZXQoYm9uZSlcbiAgICAgIH0pXG5cbiAgICAgIGNsb25lZE1lc2guYmluZChjbG9uZWRNZXNoLnNrZWxldG9uLCBjbG9uZWRNZXNoLmJpbmRNYXRyaXgpXG4gICAgfSlcblxuICAgIHJldHVybiBjbG9uZVxuICB9XG59XG5cbmZ1bmN0aW9uIHBhcmFsbGVsVHJhdmVyc2UoYSwgYiwgY2FsbGJhY2spIHtcbiAgY2FsbGJhY2soYSwgYilcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGEuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICBwYXJhbGxlbFRyYXZlcnNlKGEuY2hpbGRyZW5baV0sIGIuY2hpbGRyZW5baV0sIGNhbGxiYWNrKVxuICB9XG59XG5cbmV4cG9ydCB7IFNrZWxldG9uVXRpbHMgfVxuIiwiaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgY3JlYXRlTWFwcGVkQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vZWNzL2Z1bmN0aW9ucy9Db21wb25lbnRGdW5jdGlvbnMnXG5pbXBvcnQgeyBBbmltYXRpb25HcmFwaCB9IGZyb20gJy4uL2FuaW1hdGlvbnMvQW5pbWF0aW9uR3JhcGgnXG5pbXBvcnQgeyBBbmltYXRpb25TdGF0ZSB9IGZyb20gJy4uL2FuaW1hdGlvbnMvQW5pbWF0aW9uU3RhdGUnXG5cbmV4cG9ydCB0eXBlIEF2YXRhckFuaW1hdGlvbkNvbXBvbmVudFR5cGUgPSB7XG4gIC8qKiBBbmltYWl0b24gZ3JhcGggb2YgdGhpcyBlbnRpdHkgKi9cbiAgYW5pbWF0aW9uR3JhcGg6IEFuaW1hdGlvbkdyYXBoXG5cbiAgLyoqIEN1cnJlbnQgYW5pbWF0aW9uIHN0YXRlICovXG4gIGN1cnJlbnRTdGF0ZTogQW5pbWF0aW9uU3RhdGVcblxuICAvKiogUHJldmlvdXMgYW5pbWF0aW9uIHN0YXRlICovXG4gIHByZXZTdGF0ZTogQW5pbWF0aW9uU3RhdGVcblxuICAvKiogUHJldmlvdXMgdmVsb2NpdHkgb2YgdGhlIGF2YXRhciAqL1xuICBwcmV2VmVsb2NpdHk6IFZlY3RvcjNcbn1cblxuZXhwb3J0IGNvbnN0IEF2YXRhckFuaW1hdGlvbkNvbXBvbmVudCA9IGNyZWF0ZU1hcHBlZENvbXBvbmVudDxBdmF0YXJBbmltYXRpb25Db21wb25lbnRUeXBlPignQXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50JylcbiIsImltcG9ydCB7IEFuaW1hdGlvbkNsaXAsIE1hdGhVdGlscyB9IGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnLi4vLi4vZWNzL2NsYXNzZXMvRW50aXR5J1xuaW1wb3J0IHsgZ2V0Q29tcG9uZW50IH0gZnJvbSAnLi4vLi4vZWNzL2Z1bmN0aW9ucy9Db21wb25lbnRGdW5jdGlvbnMnXG5pbXBvcnQgeyBBbmltYXRpb25NYW5hZ2VyIH0gZnJvbSAnLi4vQW5pbWF0aW9uTWFuYWdlcidcbmltcG9ydCB7IEFuaW1hdGlvbkNvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudHMvQW5pbWF0aW9uQ29tcG9uZW50J1xuaW1wb3J0IHsgQXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50cy9BdmF0YXJBbmltYXRpb25Db21wb25lbnQnXG5pbXBvcnQgeyBBbmltYXRpb24gfSBmcm9tICcuL1V0aWwnXG5cbi8qKiBDbGFzcyB0byBoYW5kbGUgcmVuZGVyaW5nIG9mIGFuIGFuaW1hdGlvbiBhbmQgc21vb3Rob3V0IHRoZSB0cmFuc2l0aW9uIG9mIHRoZSBhbmltYXRpb24gZnJvbSBvbmUgc3RhdGUgdG8gYW5vdGhlciAqL1xuZXhwb3J0IGNsYXNzIEFuaW1hdGlvblJlbmRlcmVyIHtcbiAgLyoqIFJlbmRlcnMgY3VycmVudCBzdGF0ZSBhbmltYXRpb25zLCB1bm1vdW50cyBwcmV2aW91cyBzdGF0ZSBhbmltYXRpb25zIGFuZCBhbHNvIHJlbmRlcnMgaWRsZSB3ZWlnaHQgd2l0aCBkZWZhdWx0IGFuaW1hdGlvblxuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBUaW1lIHNpbmNlIGxhc3QgZnJhbWVcbiAgICovXG4gIHN0YXRpYyByZW5kZXIgPSAoZW50aXR5OiBFbnRpdHksIGRlbHRhOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBjdXJyZW50U3RhdGVXZWlnaHRzID0gdGhpcy51cGRhdGVDdXJyZW50U3RhdGUoZW50aXR5LCBkZWx0YSlcbiAgICBjb25zdCBwcmV2U3RhdGVXZWlnaHRzID0gdGhpcy51bm1vdW50UHJldmlvdXNTdGF0ZShlbnRpdHksIGRlbHRhKVxuICAgIHRoaXMucmVuZGVySWRsZVdlaWdodChlbnRpdHksIGN1cnJlbnRTdGF0ZVdlaWdodHMsIHByZXZTdGF0ZVdlaWdodHMpXG4gIH1cblxuICAvKipcbiAgICogTW91bnRzIGN1cnJlbnQgc3RhdGUgYnkgc2V0dGluZyBhbmQgY29uZmlndXJpbmcgYWN0aW9uIGZvciBhbmltYXRpb25cbiAgICogQHBhcmFtIHtFbnRpdHl9IGVudGl0eVxuICAgKi9cbiAgc3RhdGljIG1vdW50Q3VycmVudFN0YXRlID0gKGVudGl0eTogRW50aXR5KSA9PiB7XG4gICAgY29uc3QgYXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50ID0gZ2V0Q29tcG9uZW50KGVudGl0eSwgQXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50KVxuICAgIGNvbnN0IGFuaW1hdGlvbkNvbXBvbmVudCA9IGdldENvbXBvbmVudChlbnRpdHksIEFuaW1hdGlvbkNvbXBvbmVudClcbiAgICAvLyBSZXNldCB1cGRhdGUgdGltZVxuICAgIGF2YXRhckFuaW1hdGlvbkNvbXBvbmVudC5jdXJyZW50U3RhdGUudGltZUVsYXBzZWRTaW5jZVVwZGF0ZSA9IDBcblxuICAgIGF2YXRhckFuaW1hdGlvbkNvbXBvbmVudC5jdXJyZW50U3RhdGUuYW5pbWF0aW9ucy5mb3JFYWNoKChhbmltYXRpb24pID0+IHtcbiAgICAgIC8vIFRha2UgdGhlIGNsaXAgZnJvbSB0aGUgbG9hZGVkIGFuaW1hdGlvbnNcbiAgICAgIGlmICghYW5pbWF0aW9uLmNsaXApIHtcbiAgICAgICAgYW5pbWF0aW9uLmNsaXAgPSBBbmltYXRpb25DbGlwLmZpbmRCeU5hbWUoQW5pbWF0aW9uTWFuYWdlci5pbnN0YW5jZS5fYW5pbWF0aW9ucywgYW5pbWF0aW9uLm5hbWUpXG5cbiAgICAgICAgaWYgKCFhbmltYXRpb24uY2xpcCkgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIGdldCBhY3Rpb24gZnJvbSB0aGUgYW5pbWF0aW9uIG1peGVyXG4gICAgICBhbmltYXRpb24uYWN0aW9uID0gYW5pbWF0aW9uQ29tcG9uZW50Lm1peGVyLmNsaXBBY3Rpb24oYW5pbWF0aW9uLmNsaXApXG5cbiAgICAgIC8vIEFwcGx5IHN0YXRlIHNwZWNpZmljIGRlY29yYXRpb25zIHRvIHRoZSBhY3Rpb25cbiAgICAgIGlmIChhbmltYXRpb24uZGVjb3JhdGVBY3Rpb24pIGFuaW1hdGlvbi5kZWNvcmF0ZUFjdGlvbihhbmltYXRpb24uYWN0aW9uKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyBhbmltYXRpb24gb2YgY3VycmVudCBzdGF0ZSBhbmQgYXBwbHkgaW50ZXJwb2xhdGlvbiBpZiByZXF1aXJlZCB0byBtYWtlIHNtb290aCB0cmFuc2l0aW9uIGZvciBhbmltYXRpb25zXG4gICAqIEBwYXJhbSBhdmF0YXJBbmltYXRpb25Db21wb25lbnQgQW5pbWF0aW9uIGNvbXBvbmVudCB3aGljaCBob2xkcyBhbmltYXRpb24gZGV0YWlsc1xuICAgKiBAcGFyYW0gZGVsdGEgVGltZSBzaW5jZSBsYXN0IGZyYW1lXG4gICAqIEByZXR1cm5zIFRvdGFsIHdlaWdodHMgb2YgY3VycmVudGx5IG1vdW50ZWQgc3RhdGUncyBhbmltYXRpb25zXG4gICAqL1xuICBzdGF0aWMgdXBkYXRlQ3VycmVudFN0YXRlID0gKGVudGl0eTogRW50aXR5LCBkZWx0YTogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgICBjb25zdCBhdmF0YXJBbmltYXRpb25Db21wb25lbnQgPSBnZXRDb21wb25lbnQoZW50aXR5LCBBdmF0YXJBbmltYXRpb25Db21wb25lbnQpXG4gICAgbGV0IGN1cnJlbnRTdGF0ZVdlaWdodCA9IDBcbiAgICBjb25zdCBjdXJyU3RhdGUgPSBhdmF0YXJBbmltYXRpb25Db21wb25lbnQuY3VycmVudFN0YXRlXG5cbiAgICAvLyBBZHZhbmNlcyB0aGUgZWxhcHNlZCB0aW1lXG4gICAgY3VyclN0YXRlLnRpbWVFbGFwc2VkU2luY2VVcGRhdGUgKz0gZGVsdGFcblxuICAgIGN1cnJTdGF0ZS5hbmltYXRpb25zLmZvckVhY2goKGFuaW1hdGlvbjogQW5pbWF0aW9uKTogdm9pZCA9PiB7XG4gICAgICBpZiAoIWFuaW1hdGlvbi5jbGlwKSByZXR1cm5cblxuICAgICAgLy8gSUYgaW50ZXJwb2xhdGlvbiBpcyByZXVxaXJlZCBhbmQgYW5pbWF0aW9uIHdlaWdodCBpcyBub3QgZmluYWwgd2VpZ2h0IHRoZW4gaW50ZXJwb2xhdGVcbiAgICAgIGlmIChjdXJyU3RhdGUud2VpZ2h0UGFyYW1zPy5pbnRlcnBvbGF0ZSAmJiBhbmltYXRpb24ud2VpZ2h0ICE9PSBhbmltYXRpb24udHJhbnNpdGlvbkVuZFdlaWdodCkge1xuICAgICAgICBhbmltYXRpb24ud2VpZ2h0ID0gdGhpcy5pbnRlcnBvbGF0ZVdlaWdodChcbiAgICAgICAgICBjdXJyU3RhdGUudGltZUVsYXBzZWRTaW5jZVVwZGF0ZSxcbiAgICAgICAgICBjdXJyU3RhdGUudHJhbnNpdGlvbkR1cmF0aW9uLFxuICAgICAgICAgIGFuaW1hdGlvbi50cmFuc2l0aW9uU3RhcnRXZWlnaHQsXG4gICAgICAgICAgYW5pbWF0aW9uLnRyYW5zaXRpb25FbmRXZWlnaHRcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjdXJyZW50U3RhdGVXZWlnaHQgKz0gYW5pbWF0aW9uLndlaWdodFxuICAgICAgYW5pbWF0aW9uLmFjdGlvbi5zZXRFZmZlY3RpdmVXZWlnaHQoYW5pbWF0aW9uLndlaWdodClcbiAgICAgIGFuaW1hdGlvbi5hY3Rpb24uc2V0RWZmZWN0aXZlVGltZVNjYWxlKGFuaW1hdGlvbi50aW1lU2NhbGUgfHwgMSlcblxuICAgICAgLy8gVE9ETzogU29tdGhpbmcgYXJvdW5kIGhlcmUgaXMgaGF2aW5nIGEgc3RyYW5nZSBpbXBhY3Qgb24gdGhlIGxvb3BpbmdcbiAgICAgIC8vIFdlIHNob3VsZCBmaWd1cmUgb3V0IGhvdy93aHkgdGhpcyBpcyBhZmZlY3RpbmcgdGhlIHdhbGsgYW5pbWF0aW9ucywgYW5kIHdoeSBpdCdzIGRpZmZlcmVudCBmcm9tIHJ1biBhbmltc1xuXG4gICAgICBpZiAoYW5pbWF0aW9uLndlaWdodCA+IDApIHtcbiAgICAgICAgYW5pbWF0aW9uLmFjdGlvbi5wbGF5KClcbiAgICAgICAgaWYgKGN1cnJTdGF0ZS5zeW5jQWN0aW9ucykge1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3VyclN0YXRlLmFuaW1hdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChjdXJyU3RhdGUuYW5pbWF0aW9uc1tpXS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgaWYgKGN1cnJTdGF0ZS5hbmltYXRpb25zW2ldLndlaWdodCA+IDApIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24uYWN0aW9uLnN5bmNXaXRoKGN1cnJTdGF0ZS5hbmltYXRpb25zW2ldLmFjdGlvbilcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlc2V0IGFuaW1hdGlvbiBpbiBpbnRyYSBzdGF0ZSB0cmFuc2l0aW9uXG4gICAgICBpZiAoY3VyclN0YXRlLndlaWdodFBhcmFtcz8ucmVzZXRBbmltYXRpb24gJiYgYW5pbWF0aW9uLndlaWdodCA8PSAwKSB7XG4gICAgICAgIGFuaW1hdGlvbi5hY3Rpb24ucmVzZXQoKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gY3VycmVudFN0YXRlV2VpZ2h0XG4gIH1cblxuICAvKipcbiAgICogVW5tb3VudHMgcHJldmlvdXN0IHN0YXRlIGlmIGFueVxuICAgKiBAcGFyYW0gYXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50IEFuaW1hdGlvbiBjb21wb25lbnQgd2hpY2ggaG9sZHMgYW5pbWF0aW9uIGRldGFpbHNcbiAgICogQHBhcmFtIGRlbHRhIFRpbWUgc2luY2UgbGFzdCBmcmFtZVxuICAgKiBAcGFyYW0gc3RvcEltbWVkaWF0ZWx5IFdoZXRoZXIgdG8gc3RvcCBpbW1lZGlhdGVseSB3aXRob3V0IHNtb290aCB0cmFuc2l0aW9uXG4gICAqIEByZXR1cm5zIFRvdGFsIHdlaWdodCBvZiBwcmV2aW91cyBzdGF0ZSdzIGFuaW1hdGlvbnNcbiAgICovXG4gIHN0YXRpYyB1bm1vdW50UHJldmlvdXNTdGF0ZSA9IChlbnRpdHk6IEVudGl0eSwgZGVsdGE6IG51bWJlciwgc3RvcEltbWVkaWF0ZWx5PzogYm9vbGVhbik6IG51bWJlciA9PiB7XG4gICAgY29uc3QgYXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50ID0gZ2V0Q29tcG9uZW50KGVudGl0eSwgQXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50KVxuICAgIGxldCBwcmV2U3RhdGVXZWlnaHQgPSAwXG5cbiAgICBpZiAoIWF2YXRhckFuaW1hdGlvbkNvbXBvbmVudC5wcmV2U3RhdGUpIHtcbiAgICAgIHJldHVybiBwcmV2U3RhdGVXZWlnaHRcbiAgICB9XG5cbiAgICAvLyBBZHZhbmNlcyB0aGUgZWxhcHNlZCB0aW1lXG4gICAgYXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50LnByZXZTdGF0ZS50aW1lRWxhcHNlZFNpbmNlVXBkYXRlICs9IGRlbHRhXG5cbiAgICBhdmF0YXJBbmltYXRpb25Db21wb25lbnQucHJldlN0YXRlLmFuaW1hdGlvbnMuZm9yRWFjaCgoYW5pbWF0aW9uKSA9PiB7XG4gICAgICAvLyBHZXQgdGhlIGludGVycG9sYXRlZCB3ZWlnaHQgYW5kIGFwcGx5IHRvIHRoZSBhY3Rpb25cbiAgICAgIGFuaW1hdGlvbi53ZWlnaHQgPSBzdG9wSW1tZWRpYXRlbHlcbiAgICAgICAgPyAwXG4gICAgICAgIDogdGhpcy5pbnRlcnBvbGF0ZVdlaWdodChcbiAgICAgICAgICAgIGF2YXRhckFuaW1hdGlvbkNvbXBvbmVudC5wcmV2U3RhdGUudGltZUVsYXBzZWRTaW5jZVVwZGF0ZSxcbiAgICAgICAgICAgIGF2YXRhckFuaW1hdGlvbkNvbXBvbmVudC5wcmV2U3RhdGUudHJhbnNpdGlvbkR1cmF0aW9uLFxuICAgICAgICAgICAgYW5pbWF0aW9uLnRyYW5zaXRpb25TdGFydFdlaWdodCxcbiAgICAgICAgICAgIGFuaW1hdGlvbi50cmFuc2l0aW9uRW5kV2VpZ2h0XG4gICAgICAgICAgKVxuXG4gICAgICBhbmltYXRpb24uYWN0aW9uLnNldEVmZmVjdGl2ZVdlaWdodChhbmltYXRpb24ud2VpZ2h0KVxuICAgICAgcHJldlN0YXRlV2VpZ2h0ICs9IGFuaW1hdGlvbi53ZWlnaHRcblxuICAgICAgaWYgKGFuaW1hdGlvbi53ZWlnaHQgPD0gMCkge1xuICAgICAgICAvLyBSZXNldCB0aGUgYW5pbWF0aW9uIG9mIHRoZSBhY3Rpb25cblxuICAgICAgICBhbmltYXRpb24uYWN0aW9uLnJlc2V0KClcblxuICAgICAgICAvLyBTdG9wIHRoZSBhY3Rpb25cbiAgICAgICAgaWYgKGFuaW1hdGlvbi5hY3Rpb24uaXNSdW5uaW5nKCkpIHtcbiAgICAgICAgICBhbmltYXRpb24uYWN0aW9uLnN0b3AoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIGlmIChhdmF0YXJBbmltYXRpb25Db21wb25lbnQucHJldlN0YXRlLm5hbWUgIT09IGF2YXRhckFuaW1hdGlvbkNvbXBvbmVudC5hbmltYXRpb25HcmFwaC5kZWZhdWx0U3RhdGUubmFtZSkge1xuICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gd2VpZ2h0IGluIHRoZSBwcmV2U3RhdGUgYW5pbWF0aW9ucyB0aGVuIHJlbW92ZSBpdC5cbiAgICAgIGlmIChwcmV2U3RhdGVXZWlnaHQgPD0gMCkge1xuICAgICAgICB0aGlzLnJlc2V0UHJldmlvdXNTdGF0ZShlbnRpdHksIHRydWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHByZXZTdGF0ZVdlaWdodFxuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlcnMgaWRsZSB3ZWlnaHQgd2l0aCBkZWZhdWx0IGFuaW1hdGlvbiB0byBwcmV2ZW50IFQgcG9zZSBiZWluZyByZW5kZXJlZFxuICAgKiBAcGFyYW0gYXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50IEFuaW1hdGlvbiBjb21wb25lbnQgd2hpY2ggaG9sZHMgYW5pbWF0aW9uIGRldGFpbHNcbiAgICogQHBhcmFtIGN1cnJlbnRTdGF0ZVdlaWdodCBXZWlnaHQgb2YgdGhlIGN1cnJlbnQgc3RhdGVcbiAgICogQHBhcmFtIHByZXZTdGF0ZVdlaWdodCBXZWlnaHQgb2YgdGhlIHByZXZpb3VzIHN0YXRlXG4gICAqL1xuICBzdGF0aWMgcmVuZGVySWRsZVdlaWdodCA9IChlbnRpdHk6IEVudGl0eSwgY3VycmVudFN0YXRlV2VpZ2h0OiBudW1iZXIsIHByZXZTdGF0ZVdlaWdodDogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgYXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50ID0gZ2V0Q29tcG9uZW50KGVudGl0eSwgQXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50KVxuICAgIGNvbnN0IGRlZmF1bHRTdGF0ZSA9IGF2YXRhckFuaW1hdGlvbkNvbXBvbmVudC5hbmltYXRpb25HcmFwaC5kZWZhdWx0U3RhdGVcbiAgICBkZWZhdWx0U3RhdGUuYW5pbWF0aW9uc1swXS53ZWlnaHQgPSBNYXRoLm1heCgxIC0gKHByZXZTdGF0ZVdlaWdodCArIGN1cnJlbnRTdGF0ZVdlaWdodCksIDApXG5cbiAgICAvLyBJZiBjdXJyZW4gc3RhdGUgaXMgZGVmYXVsdCBzdGF0ZSB0aGVuIGFzc2lnbiBhbGwgdGhlIHdlaWdodCB0byBpdCB0byBwcmV2ZW50IHBhcnRpYWwgVCBwb3NlXG4gICAgaWYgKGF2YXRhckFuaW1hdGlvbkNvbXBvbmVudC5jdXJyZW50U3RhdGUubmFtZSA9PT0gZGVmYXVsdFN0YXRlLm5hbWUgJiYgZGVmYXVsdFN0YXRlLmFuaW1hdGlvbnNbMF0ud2VpZ2h0IDwgMSkge1xuICAgICAgZGVmYXVsdFN0YXRlLmFuaW1hdGlvbnNbMF0ud2VpZ2h0ID0gMVxuICAgIH1cblxuICAgIGlmIChkZWZhdWx0U3RhdGUuYW5pbWF0aW9uc1swXS5hY3Rpb24pIHtcbiAgICAgIGRlZmF1bHRTdGF0ZS5hbmltYXRpb25zWzBdLmFjdGlvbi5zZXRFZmZlY3RpdmVXZWlnaHQoZGVmYXVsdFN0YXRlLmFuaW1hdGlvbnNbMF0ud2VpZ2h0KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbnRlcnBvbGF0ZXMgd2VpZ2h0IGJldHdlZW4gc3RhcnQgYW5kIGVuZCB3ZWlnaHQgZm9yIGVsYXBzZWQgdGltZVxuICAgKiBAcGFyYW0gZWxhcHNlZFRpbWUgVGltZSBlbGFwc2VkIHNpbmNlIHRyYW5zaXRpb24gc3RhcnRlZFxuICAgKiBAcGFyYW0gZHVyYXRpb24gQW5pbWFpdG9uIHRyYW5zaXRpb24gZHVyYXRpb25cbiAgICogQHBhcmFtIHN0YXJ0V2VpZ2h0IFN0YXJ0IHdlaWdodCBmcm9tIHdoaWNoIGludGVycG9sYXRlZCB3ZWlnaCB3aWxsIGJlIGNhbGN1bGF0ZWRcbiAgICogQHBhcmFtIGVuZHdlaWdodCBlbmQgd2VpZ2h0IHRvd2FyZHMgd2hpY2ggaW50ZXJwb2xhdGVkIHdlaWdoIHdpbGwgYmUgY2FsY3VsYXRlZFxuICAgKiBAcmV0dXJucyBJbnRlcnBvbGF0ZWQgd2VpZ2h0XG4gICAqL1xuICBzdGF0aWMgaW50ZXJwb2xhdGVXZWlnaHQgPSAoXG4gICAgZWxhcHNlZFRpbWU6IG51bWJlcixcbiAgICBkdXJhdGlvbjogbnVtYmVyLFxuICAgIHN0YXJ0V2VpZ2h0OiBudW1iZXIsXG4gICAgZW5kd2VpZ2h0OiBudW1iZXJcbiAgKTogbnVtYmVyID0+IHtcbiAgICByZXR1cm4gTWF0aFV0aWxzLmNsYW1wKE1hdGhVdGlscy5tYXBMaW5lYXIoZWxhcHNlZFRpbWUsIDAsIGR1cmF0aW9uLCBzdGFydFdlaWdodCwgZW5kd2VpZ2h0KSwgMCwgMSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldHMgdGhlIHByZXZpb3VzZSBzdGF0ZVxuICAgKiBAcGFyYW0ge0VudGl0eX0gZW50aXR5XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZW1wdHlQcmV2U3RhdGUgV2hldGVyaCB0byBtYWtlIHByZXZpb3VzIHN0YXRlIG51bGwgYWZ0ZXIgcmVzZXRcbiAgICovXG4gIHN0YXRpYyByZXNldFByZXZpb3VzU3RhdGUgPSAoZW50aXR5OiBFbnRpdHksIGVtcHR5UHJldlN0YXRlPzogYm9vbGVhbik6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGF2YXRhckFuaW1hdGlvbkNvbXBvbmVudCA9IGdldENvbXBvbmVudChlbnRpdHksIEF2YXRhckFuaW1hdGlvbkNvbXBvbmVudClcbiAgICBhdmF0YXJBbmltYXRpb25Db21wb25lbnQucHJldlN0YXRlLnRpbWVFbGFwc2VkU2luY2VVcGRhdGUgPSAwXG4gICAgYXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50LnByZXZTdGF0ZS5hbmltYXRpb25zLmZvckVhY2goKGEpID0+IHtcbiAgICAgIGEudHJhbnNpdGlvblN0YXJ0V2VpZ2h0ID0gYS53ZWlnaHRcbiAgICAgIGEudHJhbnNpdGlvbkVuZFdlaWdodCA9IDBcbiAgICB9KVxuXG4gICAgaWYgKGVtcHR5UHJldlN0YXRlKSB7XG4gICAgICBhdmF0YXJBbmltYXRpb25Db21wb25lbnQucHJldlN0YXRlID0gbnVsbCFcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IE1lc2ggfSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IGNyZWF0ZU1hcHBlZENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2Vjcy9mdW5jdGlvbnMvQ29tcG9uZW50RnVuY3Rpb25zJ1xuXG5leHBvcnQgdHlwZSBBdmF0YXJQZW5kaW5nQ29tcG9uZW50VHlwZSA9IHtcbiAgbGlnaHQ6IE1lc2hcbiAgcGxhdGU6IE1lc2hcbn1cblxuZXhwb3J0IGNvbnN0IEF2YXRhclBlbmRpbmdDb21wb25lbnQgPSBjcmVhdGVNYXBwZWRDb21wb25lbnQ8QXZhdGFyUGVuZGluZ0NvbXBvbmVudFR5cGU+KCdBdmF0YXJQZW5kaW5nQ29tcG9uZW50JylcbiIsImltcG9ydCB7IE1hdGVyaWFsIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBjcmVhdGVNYXBwZWRDb21wb25lbnQgfSBmcm9tICcuLi8uLi9lY3MvZnVuY3Rpb25zL0NvbXBvbmVudEZ1bmN0aW9ucydcblxuZXhwb3J0IHR5cGUgTWF0ZXJpYWxNYXAgPSB7XG4gIGlkOiBzdHJpbmdcbiAgbWF0ZXJpYWw6IE1hdGVyaWFsXG59XG5cbmV4cG9ydCB0eXBlIEF2YXRhckVmZmVjdENvbXBvbmVudFR5cGUgPSB7XG4gIG9wYWNpdHlNdWx0aXBsaWVyOiBudW1iZXJcbiAgb3JpZ2luTWF0ZXJpYWxzOiBBcnJheTxNYXRlcmlhbE1hcD5cbn1cblxuZXhwb3J0IGNvbnN0IEF2YXRhckVmZmVjdENvbXBvbmVudCA9IGNyZWF0ZU1hcHBlZENvbXBvbmVudDxBdmF0YXJFZmZlY3RDb21wb25lbnRUeXBlPignQXZhdGFyRWZmZWN0Q29tcG9uZW50JylcbiIsImltcG9ydCB7IE1hdGVyaWFsLCBTaGFkZXJNYXRlcmlhbCwgQnVmZmVyQXR0cmlidXRlLCBSZXBlYXRXcmFwcGluZywgRG91YmxlU2lkZSwgT2JqZWN0M0QsIE1lc2ggfSBmcm9tICd0aHJlZSdcblxuZXhwb3J0IGNsYXNzIERpc3NvbHZlRWZmZWN0IHtcbiAgdGltZSA9IDBcbiAgb2JqZWN0XG4gIG1heEhlaWdodCA9IDFcbiAgbWluSGVpZ2h0ID0gMFxuICBzdGVwID0gMC4wMDFcblxuICBjb25zdHJ1Y3RvcihvYmplY3Q6IE9iamVjdDNELCBtaW5IZWlnaHQ6IG51bWJlciwgbWF4SGVpZ2h0OiBudW1iZXIpIHtcbiAgICBvYmplY3QudHJhdmVyc2UoKGNoaWxkKSA9PiB7XG4gICAgICBpZiAoY2hpbGRbJ21hdGVyaWFsJ10pIHtcbiAgICAgICAgY2hpbGQudmlzaWJsZSA9IHRydWVcbiAgICAgIH1cbiAgICB9KVxuICAgIHRoaXMub2JqZWN0ID0gb2JqZWN0XG4gICAgdGhpcy5taW5IZWlnaHQgPSBtaW5IZWlnaHQgLSAxXG4gICAgdGhpcy5tYXhIZWlnaHQgPSBtYXhIZWlnaHQgKyAxXG4gICAgdGhpcy5zdGVwID0gKHRoaXMubWF4SGVpZ2h0IC0gdGhpcy5taW5IZWlnaHQpIC8gMTUwXG4gICAgdGhpcy50aW1lID0gdGhpcy5taW5IZWlnaHRcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7fVxuXG4gIHVwZGF0ZShkdCkge1xuICAgIGlmICh0aGlzLnRpbWUgPD0gdGhpcy5tYXhIZWlnaHQpIHtcbiAgICAgIHRoaXMub2JqZWN0LnRyYXZlcnNlKChjaGlsZCkgPT4ge1xuICAgICAgICBpZiAoY2hpbGRbJ21hdGVyaWFsJ10gJiYgY2hpbGQubmFtZSAhPT0gJ2xpZ2h0X29iaicgJiYgY2hpbGQubmFtZSAhPT0gJ3BsYXRlX29iaicpIHtcbiAgICAgICAgICBpZiAoY2hpbGQubWF0ZXJpYWwudW5pZm9ybXMpIGNoaWxkLm1hdGVyaWFsLnVuaWZvcm1zLnRpbWUudmFsdWUgPSB0aGlzLnRpbWVcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgdGhpcy50aW1lICs9IHRoaXMuc3RlcFxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHRoaXMuZGlzcG9zZSgpXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHN0YXRpYyBnZXREaXNzb2x2ZVRleHR1cmUob2JqZWN0OiBNZXNoKTogU2hhZGVyTWF0ZXJpYWwge1xuICAgIGNvbnN0IHZlcnRleE5vblVWU2hhZGVyID0gW1xuICAgICAgJ3ZhcnlpbmcgZmxvYXQgcG9zWTsnLFxuICAgICAgJ3ZhcnlpbmcgdmVjMiB2VXY7JyxcbiAgICAgICcjaW5jbHVkZSA8c2tpbm5pbmdfcGFyc192ZXJ0ZXg+JyxcbiAgICAgICd2b2lkIG1haW4oKSB7JyxcbiAgICAgICcjaW5jbHVkZSA8c2tpbmJhc2VfdmVydGV4PicsXG4gICAgICAnI2luY2x1ZGUgPGJlZ2luX3ZlcnRleD4nLFxuICAgICAgJyNpbmNsdWRlIDxza2lubmluZ192ZXJ0ZXg+JyxcbiAgICAgICcjaW5jbHVkZSA8cHJvamVjdF92ZXJ0ZXg+JyxcbiAgICAgICd2ZWMyIGNsaXBTcGFjZSA9IGdsX1Bvc2l0aW9uLnh5IC8gZ2xfUG9zaXRpb24udzsnLFxuICAgICAgJ3ZVdiA9IGNsaXBTcGFjZSAqIDAuNSArIDAuNTsnLFxuICAgICAgJ3Bvc1kgPSBwb3NpdGlvbi55OycsXG4gICAgICAnfSdcbiAgICBdLmpvaW4oJ1xcbicpXG5cbiAgICBjb25zdCB2ZXJ0ZXhVVlNoYWRlciA9IFtcbiAgICAgICd2YXJ5aW5nIHZlYzIgdlV2OycsXG4gICAgICAndmFyeWluZyBmbG9hdCBwb3NZOycsXG4gICAgICAnI2luY2x1ZGUgPHNraW5uaW5nX3BhcnNfdmVydGV4PicsXG4gICAgICAndm9pZCBtYWluKCkgeycsXG4gICAgICAnI2luY2x1ZGUgPHNraW5iYXNlX3ZlcnRleD4nLFxuICAgICAgJyNpbmNsdWRlIDxiZWdpbl92ZXJ0ZXg+JyxcbiAgICAgICcjaW5jbHVkZSA8c2tpbm5pbmdfdmVydGV4PicsXG4gICAgICAnI2luY2x1ZGUgPHByb2plY3RfdmVydGV4PicsXG4gICAgICAndlV2ID0gdXY7JyxcbiAgICAgICdwb3NZID0gcG9zaXRpb24ueTsnLFxuICAgICAgJ30nXG4gICAgXS5qb2luKCdcXG4nKVxuXG4gICAgY29uc3QgZnJhZ21lbnRDb2xvclNoYWRlciA9IFtcbiAgICAgICd1bmlmb3JtIHZlYzMgY29sb3I7JyxcbiAgICAgICd2YXJ5aW5nIHZlYzIgdlV2OycsXG4gICAgICAndmFyeWluZyBmbG9hdCBwb3NZOycsXG4gICAgICAndW5pZm9ybSBmbG9hdCB0aW1lOycsXG4gICAgICAndW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZV9kaXNzb2x2ZTsnLFxuICAgICAgJ2Zsb2F0IHJhbmQoZmxvYXQgY28pIHsgcmV0dXJuIGZyYWN0KHNpbihjbyooOTEuMzQ1OCkpICogNDc0NTMuNTQ1Myk7IH0nLFxuICAgICAgJ3ZvaWQgbWFpbigpIHsnLFxuICAgICAgLy8gJyB2ZWM0IGRpc3NvbHZlRGF0YSA9IHRleHR1cmUyRCggdGV4dHVyZV9kaXNzb2x2ZSwgdlV2ICk7JyxcbiAgICAgIC8vICcgZmxvYXQgZ3JleVZhbHVlID0gZGlzc29sdmVEYXRhLmc7JyxcbiAgICAgIC8vICcgZmxvYXQgZGlmZmVyZW5jZSA9IGdyZXlWYWx1ZSAtIHRpbWU7JyxcbiAgICAgICdcdGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IuciwgY29sb3IuZywgY29sb3IuYiwgMS4wKTsnLFxuICAgICAgJ1x0ZmxvYXQgb2Zmc2V0ID0gcG9zWSAtIHRpbWU7JyxcbiAgICAgICcgaWYob2Zmc2V0ID4gKC0wLjAxIC0gcmFuZCh0aW1lKSAqIDAuMykpeycsXG4gICAgICAnICAgZ2xfRnJhZ0NvbG9yLnIgPSAwLjA7JyxcbiAgICAgICcgICBnbF9GcmFnQ29sb3IuZyA9IDEuMDsnLFxuICAgICAgJyAgIGdsX0ZyYWdDb2xvci5iID0gMC4wOycsXG4gICAgICAnIH0nLFxuICAgICAgJyBpZihvZmZzZXQgPiAwLjApeycsXG4gICAgICAnICAgZGlzY2FyZDsnLFxuICAgICAgJyB9JyxcbiAgICAgICd9J1xuICAgIF0uam9pbignXFxuJylcblxuICAgIGNvbnN0IGZyYWdtZW50VGV4dHVyZVNoYWRlciA9IFtcbiAgICAgICd1bmlmb3JtIHZlYzMgY29sb3I7JyxcbiAgICAgICd2YXJ5aW5nIHZlYzIgdlV2OycsXG4gICAgICAndmFyeWluZyBmbG9hdCBwb3NZOycsXG4gICAgICAndW5pZm9ybSBmbG9hdCB0aW1lOycsXG4gICAgICAndW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZV9kaXNzb2x2ZTsnLFxuICAgICAgJ3VuaWZvcm0gc2FtcGxlcjJEIG9yaWdpbl90ZXh0dXJlOycsXG4gICAgICAnZmxvYXQgcmFuZChmbG9hdCBjbykgeyByZXR1cm4gZnJhY3Qoc2luKGNvKig5MS4zNDU4KSkgKiA0NzQ1My41NDUzKTsgfScsXG4gICAgICAndm9pZCBtYWluKCkgeycsXG4gICAgICAvLyAnIHZlYzQgZGlzc29sdmVEYXRhID0gdGV4dHVyZTJEKCB0ZXh0dXJlX2Rpc3NvbHZlLCB2VXYgKTsnLFxuICAgICAgLy8gJyBmbG9hdCBncmV5VmFsdWUgPSBkaXNzb2x2ZURhdGEuZzsnLFxuICAgICAgLy8gJyBmbG9hdCBkaWZmZXJlbmNlID0gZ3JleVZhbHVlIC0gdGltZTsnLFxuICAgICAgJ1x0Z2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKG9yaWdpbl90ZXh0dXJlLCB2VXYpOycsXG4gICAgICAnXHRmbG9hdCBvZmZzZXQgPSBwb3NZIC0gdGltZTsnLFxuICAgICAgJyBpZihvZmZzZXQgPiAoLTAuMDEgLSByYW5kKHRpbWUpICogMC4zKSl7JyxcbiAgICAgICcgICBnbF9GcmFnQ29sb3IuciA9IDAuMDsnLFxuICAgICAgJyAgIGdsX0ZyYWdDb2xvci5nID0gMS4wOycsXG4gICAgICAnICAgZ2xfRnJhZ0NvbG9yLmIgPSAwLjA7JyxcbiAgICAgICcgfScsXG4gICAgICAnIGlmKG9mZnNldCA+IDAuMCl7JyxcbiAgICAgICcgICBkaXNjYXJkOycsXG4gICAgICAnIH0nLFxuICAgICAgJ30nXG4gICAgXS5qb2luKCdcXG4nKVxuXG4gICAgY29uc3QgaGFzVVYgPSBvYmplY3QuZ2VvbWV0cnkuaGFzQXR0cmlidXRlKCd1dicpXG4gICAgY29uc3QgaGFzVGV4dHVyZSA9ICg8YW55Pm9iamVjdC5tYXRlcmlhbCkubWFwICE9PSBudWxsXG5cbiAgICBjb25zdCBtYXQgPSBuZXcgU2hhZGVyTWF0ZXJpYWwoe1xuICAgICAgdW5pZm9ybXM6IHtcbiAgICAgICAgY29sb3I6IHtcbiAgICAgICAgICB2YWx1ZTogKDxhbnk+b2JqZWN0Lm1hdGVyaWFsKS5jb2xvclxuICAgICAgICB9LFxuICAgICAgICBvcmlnaW5fdGV4dHVyZToge1xuICAgICAgICAgIHZhbHVlOiAoPGFueT5vYmplY3QubWF0ZXJpYWwpLm1hcFxuICAgICAgICB9LFxuICAgICAgICAvLyB0ZXh0dXJlX2Rpc3NvbHZlOiB7XG4gICAgICAgIC8vICAgdmFsdWU6IHRleHR1cmVOb2lzZVxuICAgICAgICAvLyB9LFxuICAgICAgICB0aW1lOiB7XG4gICAgICAgICAgdmFsdWU6IC0yMDBcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHZlcnRleFNoYWRlcjogaGFzVVYgPyB2ZXJ0ZXhVVlNoYWRlciA6IHZlcnRleE5vblVWU2hhZGVyLFxuICAgICAgZnJhZ21lbnRTaGFkZXI6IGhhc1RleHR1cmUgPyBmcmFnbWVudFRleHR1cmVTaGFkZXIgOiBmcmFnbWVudENvbG9yU2hhZGVyXG4gICAgfSlcblxuICAgIHJldHVybiBtYXRcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IENhbWVyYUxheWVycyA9IHtcbiAgTm9uZTogMCxcbiAgQXZhdGFyOiAxLFxuICBQb3J0YWw6IDIsXG4gIFNjZW5lOiAzXG59XG4iLCIvLyB0cG9zZVxuZXhwb3J0IGNvbnN0IGJvbmVzRGF0YSA9IFtcbiAge1xuICAgIG5hbWU6ICdIaXBzJyxcbiAgICBwYXJlbnRJbmRleDogbnVsbCxcbiAgICBwb3NpdGlvbjogWy0xLjY1NDM2MTIyNTEwNjA1NTNlLTI0LCAwLjk5NjcyMDk2OTY3Njk3MTQsIDQuMzU2ODA1NDA1MzM2NjcyZS04XSxcbiAgICBxdWF0ZXJuaW9uOiBbLTAuMDYwNDc4NzYxNzkyMTgyOTIsIDEuMjk3OTg2NDI5NDQ5MzM4MmUtOCwgNC40MTgwMDMyNDMyNDUwMzllLTcsIDAuOTk4MTY5NDgxNzU0MzAzXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnU3BpbmUnLFxuICAgIHBhcmVudEluZGV4OiAwLFxuICAgIHBvc2l0aW9uOiBbMS4xMzY4ODk5MjU3MzQzMzg0ZS0xMywgMC4wOTk5OTA4NTk2Mjc3MjM3LCAtMC4wMDAyMDE5NzU5MjY3NTY4NTg4M10sXG4gICAgcXVhdGVybmlvbjogWy0wLjAwMDc1MzIwNTU2MDYxMzQyMzYsIDEuMzQzMDY5MjExNDAxMzcxZS04LCAtNC40MTc4NTk3MTM2MTI0MTU0ZS03LCAwLjk5OTk5OTcwMTk3Njc3NjFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdTcGluZTEnLFxuICAgIHBhcmVudEluZGV4OiAxLFxuICAgIHBvc2l0aW9uOiBbLTkuOTk5OTk5OTc0NzUyNDI3ZS03LCAwLjExNzMxOTMwMDc3MDc1OTU4LCAwLjAwMDExNzk4NzM5NDMzMjg4NTc0XSxcbiAgICBxdWF0ZXJuaW9uOiBbLTAuMDAxMzA2MTU2NzQ0MjQ5MTY1LCA0LjE2NzE3NDc1Njg0ODExNDZlLTE0LCAtNi44MjE3NjA0OTU4OTk0OThlLTEzLCAwLjk5OTk5OTE2NTUzNDk3MzFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdTcGluZTInLFxuICAgIHBhcmVudEluZGV4OiAyLFxuICAgIHBvc2l0aW9uOiBbOS45OTk5OTk5NzQ3NTI0MjdlLTcsIDAuMTM0NTg3MzkyMjEwOTYwNCwgMC4wMDA1Mzg5MzE1Nzc0NjY0MjgzXSxcbiAgICBxdWF0ZXJuaW9uOiBbMC4wODQyMTM3NzA5MjU5OTg2OSwgLTIuMDY3MjE2MDAyMzgxODg3ZS0xNywgLTMuNzk3NzI1OTg1NzU0NDcxNWUtMTgsIDAuOTk2NDQ3NzQxOTg1MzIxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTmVjaycsXG4gICAgcGFyZW50SW5kZXg6IDMsXG4gICAgcG9zaXRpb246IFs3LjA5OTcwODYxNDY1NzYxNDRlLTE1LCAwLjE1MDUyNzc2MDM4NjQ2Njk4LCAwLjAwMTM4Nzg2ODA3NjU2Mjg4MTVdLFxuICAgIHF1YXRlcm5pb246IFswLjEyOTk3ODI1NDQzNzQ0NjYsIC0xLjI2ODIwMjU0NjY5NDQ5M2UtMTQsIC0yLjMxMDAzOTYzNzg3NDczOWUtMTMsIDAuOTkxNTE2OTQ3NzQ2Mjc2OV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0hlYWQnLFxuICAgIHBhcmVudEluZGV4OiA0LFxuICAgIHBvc2l0aW9uOiBbOS42Nzk0MTczMDU5NjAyMzNlLTE5LCAwLjEwNzg5MTQyNTQ5MDM3OTMzLCAtMC4wMDA5MzI1NDQ3MDI2NjQwMTc3XSxcbiAgICBxdWF0ZXJuaW9uOiBbLTAuMTUxNDk5OTg2NjQ4NTU5NTcsIC03LjE5MzE1MTg1MzQxMzE2NWUtMTgsIC01Ljg0MTY2MTk4MjQxMjc4OWUtMTgsIDAuOTg4NDU3MjYyNTE2MDIxN10sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0hlYWRUb3BfRW5kJyxcbiAgICBwYXJlbnRJbmRleDogNSxcbiAgICBwb3NpdGlvbjogWzAuMDAwMDAxOTk5OTk5OTk0OTUwNDg1NCwgMC4xODQ3NDY5ODA2NjcxMTQyNiwgMC4wNjYzNjM5OTc3NTc0MzQ4NF0sXG4gICAgcXVhdGVybmlvbjogWzIuNTI4NjcxMzE2NzgxNTgzM2UtOCwgLTEuNzg5MzI0NDI3NDQwNTEzNmUtMTgsIDEuNjc5ODMxMzQ5NzE2MjQ5MmUtMjUsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0RXllJyxcbiAgICBwYXJlbnRJbmRleDogNSxcbiAgICBwb3NpdGlvbjogWzAuMDI5NDc4OTk4ODU0NzU2MzU1LCAwLjA3NjgxNzA0MzEyNTYyOTQzLCAwLjA5MTIwNjk5NzYzMjk4MDM1XSxcbiAgICBxdWF0ZXJuaW9uOiBbMC43MDc5NTg1NzkwNjM0MTU1LCAwLjAwMDAwOTQyOTUzNDY1NzEwMTYxMywgMC4wMDAwMDk0NTIyOTI5NDMwMjQwNzcsIDAuNzA2MjU0MDA1NDMyMTI4OV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0RXllJyxcbiAgICBwYXJlbnRJbmRleDogNSxcbiAgICBwb3NpdGlvbjogWy0wLjAyOTQ0NDk5ODEzMDIwMjI5MywgMC4wNzY4MTcwNDMxMjU2Mjk0MywgMC4wOTEyMDQ5OTM0MjY3OTk3N10sXG4gICAgcXVhdGVybmlvbjogWzAuNzA3OTU4NjM4NjY4MDYwMywgMC4wMDAwMDQ3OTg5NjE5ODE1NzgwMzE2LCAwLjAwMDAwNDgxMDU0MzAzMjM2MzA1NywgMC43MDYyNTM5NDU4Mjc0ODQxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdFNob3VsZGVyJyxcbiAgICBwYXJlbnRJbmRleDogMyxcbiAgICBwb3NpdGlvbjogWzAuMDYxMDU3OTk5NzMwMTEwMTcsIDAuMDkxMzI0ODEzNjYzOTU5NSwgMC4wMDMwODk2NDAyODk1NDUwNTldLFxuICAgIHF1YXRlcm5pb246IFswLjcwNjkzOTc1Njg3MDI2OTgsIDAuNzA2OTM5Njk3MjY1NjI1LCAtMC4wMTUzNzAxODczNDk2MTc0ODEsIDAuMDE1MzcwMjUxNjEwODc1MTNdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0QXJtJyxcbiAgICBwYXJlbnRJbmRleDogOSxcbiAgICBwb3NpdGlvbjogWy0wLjAwMjY1ODk3Nzg3MTc2MDcyNiwgMC4xMjY1NDk5ODg5ODUwNjE2NSwgMC4wMjYwMDg5OTcxMTI1MTI1OV0sXG4gICAgcXVhdGVybmlvbjogWzQuNDcwMzQ4MzU4MTU0Mjk3ZS04LCAzLjc3NDg5NDcwNzkzMDc5OGUtOCwgLTQuNDcwMzQ4MzU4MTU0Mjk3ZS04LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEZvcmVBcm0nLFxuICAgIHBhcmVudEluZGV4OiAxMCxcbiAgICBwb3NpdGlvbjogWy0xLjkzNzMwMjIyOTc0ODYzODZlLTgsIDAuMjc0MDQ2OTU3NDkyODI4MzcsIC0zLjUxNjAyMTI1MTkyNTg0OTRlLTldLFxuICAgIHF1YXRlcm5pb246IFstNS45NjA0NjQxMjIyNjc2OTQ2ZS04LCAzLjkwMDg2NTg1MjU1NzQ0NWUtOSwgLTQuMzQ1NjYyODMxMjE4Nzg1ZS0xOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kJyxcbiAgICBwYXJlbnRJbmRleDogMTEsXG4gICAgcG9zaXRpb246IFstMS45MzczMjE0MTQ0MDI1MDRlLTgsIDAuMjc2MTQ1MTAwNTkzNTY2OSwgLTMuNTE2MDIxMjUxOTI1ODQ5NGUtOV0sXG4gICAgcXVhdGVybmlvbjogWzIuOTgwMjMyMDYxMTMzODQ3M2UtOCwgMC4wMDAwMjU3NjQxMDc3MDQxNjI1OTgsIDEuNTQ5ODc4MjgxMjcwNjIyNGUtMTIsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZE1pZGRsZTEnLFxuICAgIHBhcmVudEluZGV4OiAxMixcbiAgICBwb3NpdGlvbjogWzEuMzc1MDg3Nzc2OTc4MDM0NWUtOCwgMC4xMjc3NTQ5ODYyODYxNjMzMywgLTQuMTE4MTkyMDA5NjI3ODE5ZS05XSxcbiAgICBxdWF0ZXJuaW9uOiBbMS40OTAxMTU5NDE3NDkwODE3ZS04LCA0LjQ2OTk4NDkxNTU0NDk1NTZlLTgsIC0yLjk4MDQ2NDk0MTUxNTQ5M2UtOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kTWlkZGxlMicsXG4gICAgcGFyZW50SW5kZXg6IDEzLFxuICAgIHBvc2l0aW9uOiBbMS4zNzUwODc3NzY5NzgwMzQ1ZS04LCAwLjAzNjE0MDAyNDY2MjAxNzgyLCAtNC4xMTgxOTIwMDk2Mjc4MTllLTldLFxuICAgIHF1YXRlcm5pb246IFstMS40OTAxMTYyOTcwMjA0NDk2ZS04LCAtMS40OTAyOTgxOTU5NjA4MDRlLTgsIDcuNzYyNjc5OTMwMjgwMTgxZS0xMywgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kTWlkZGxlMycsXG4gICAgcGFyZW50SW5kZXg6IDE0LFxuICAgIHBvc2l0aW9uOiBbMS4zNzUwODc3NzY5NzgwMzQ1ZS04LCAwLjAzNDU5Nzg3MzY4Nzc0NDE0LCAtMy45MjkwMTcxMTE2NTkwNWUtMTBdLFxuICAgIHF1YXRlcm5pb246IFstNS41MzM5MDM0MTM2Mzc1NzVlLTE1LCAxLjgxODk4OTQwMzU0NTg1NjVlLTEyLCAxLjQ5MDExNjExOTM4NDc2NTZlLTgsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZFRodW1iMScsXG4gICAgcGFyZW50SW5kZXg6IDEyLFxuICAgIHBvc2l0aW9uOiBbLTAuMDIxNjcwMTkwNjE3NDQyMTMsIDAuMDM3ODg4MDA1Mzc1ODYyMTIsIC0wLjAzMDAzMDk3MzI1NTYzNDMwOF0sXG4gICAgcXVhdGVybmlvbjogWy0wLjIyMzUzNDI3MTEyMTAyNTA5LCAtMC4wNjAxNzI5MTE3MzMzODg5LCAwLjI1MTcwMzUzMDU1MDAwMzA1LCAwLjkzOTcxMTE1MzUwNzIzMjddLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZFRodW1iMicsXG4gICAgcGFyZW50SW5kZXg6IDE2LFxuICAgIHBvc2l0aW9uOiBbLTAuMDAwMDEzMTAxMzIzOTI5NzMxNzM0LCAwLjA0NzQ0ODg5MjE0NjM0ODk1LCAwLjAwMDE2ODM0OTU1MDIyMjA0NjY3XSxcbiAgICBxdWF0ZXJuaW9uOiBbMC4wMDAzMTgzODc1ODE1MDExNTYxLCAwLjAwMDQ5ODY2MzkyNTEwMDExNzksIDAuMDAwMzMwODkyMTg3Nzc2MDQ0LCAwLjk5OTk5OTc2MTU4MTQyMDldLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZFRodW1iMycsXG4gICAgcGFyZW50SW5kZXg6IDE3LFxuICAgIHBvc2l0aW9uOiBbMC4wMDAwMTcxMzM3NTI0MDc5NzE3NywgMC4wNDM4MjEwMjE5MTQ0ODIxMiwgMC4wMDAxMjc2MDEyOTE3NTE0ODkwNF0sXG4gICAgcXVhdGVybmlvbjogWzAuMDAwNjE2NTg3ODczMDgyNjA4LCAtMC4wMDAzNTY2MDE2OTY2OTQyNjk4LCAwLjAwMDAwODkzNTEzMDYwODczMzc0MywgMC45OTk5OTk3NjE1ODE0MjA5XSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRJbmRleDEnLFxuICAgIHBhcmVudEluZGV4OiAxMixcbiAgICBwb3NpdGlvbjogWy0wLjAwMjMxNzAyMjA2NjU2MzM2OCwgMC4xMjI2NjYwNjA5MjQ1MzAwMywgLTAuMDI4MjIxMDA1NTczODY4NzVdLFxuICAgIHF1YXRlcm5pb246IFs3LjQ1MDU4MTMwNzQ2NjU2NGUtOCwgLTEuODE4OTg5NjIwMzg2MjkxZS0xMiwgMS40OTAxMTYxMTkzODQ3NjU2ZS04LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRJbmRleDInLFxuICAgIHBhcmVudEluZGV4OiAxOSxcbiAgICBwb3NpdGlvbjogWzEuNjgwMDI2NTcxMTkzNTkzNmUtNywgMC4wMzg5MTk5ODUyOTQzNDIwNCwgLTEuNDMzMzYzNjQ5OTk0MTM1ZS05XSxcbiAgICBxdWF0ZXJuaW9uOiBbLTEuMDQzMDgxMjgzNTY5MzM2ZS03LCAtMS40OTAyOTgxOTU5NjA4MDRlLTgsIDcuNzQ5MzU3MjUzOTg0Njc5ZS0xMywgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kSW5kZXgzJyxcbiAgICBwYXJlbnRJbmRleDogMjAsXG4gICAgcG9zaXRpb246IFsxLjY4MDAyNjU3MTE5MzU5MzZlLTcsIDAuMDM0MTUyMDMwOTQ0ODI0MjIsIC0xLjQzMzM2MzY0OTk5NDEzNWUtOV0sXG4gICAgcXVhdGVybmlvbjogWzMuNTQ4ODM3NjU2MDMzODY1M2UtMTUsIC0xLjQ4OTkzNDM5ODA4MDA5NWUtOCwgNS45NjA1NDI2MzcyMzk5OTZlLTgsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZFJpbmcxJyxcbiAgICBwYXJlbnRJbmRleDogMTIsXG4gICAgcG9zaXRpb246IFswLjAwMDA5ODg3OTIzMDc5MDc3MTU0LCAwLjEyMTQ3MDAzNDEyMjQ2NzA0LCAwLjAyMjE2NTk4OTUwMzI2NDQyN10sXG4gICAgcXVhdGVybmlvbjogWzIuOTgwMjMyMjM4NzY5NTMxMmUtOCwgMi45ODAwNTA2OTUxMDA1NDQ1ZS04LCAtMS40OTAyNzEwMTc3MDExNjEzZS04LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRSaW5nMicsXG4gICAgcGFyZW50SW5kZXg6IDIyLFxuICAgIHBvc2l0aW9uOiBbNS40NzMwMjA3OTIxMjM4NjE2ZS04LCAwLjAzNjAxMTk5Mzg4NTA0MDI4LCAxLjA2MjI4OTgxMTY3MDc4MDJlLTldLFxuICAgIHF1YXRlcm5pb246IFstMi45ODAyMzIwNjExMzM4NDczZS04LCAtMi45ODAyMzI1OTQwNDA4OTllLTgsIDQuNDcwNTAyNTQ1OTI3OTU3ZS04LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRSaW5nMycsXG4gICAgcGFyZW50SW5kZXg6IDIzLFxuICAgIHBvc2l0aW9uOiBbNS40NzMwMjA3OTIxMjM4NjE2ZS04LCAwLjAzMzA3Mjk0ODQ1NTgxMDU1LCAxLjA2MjI4OTgxMTY3MDc4MDJlLTldLFxuICAgIHF1YXRlcm5pb246IFs1Ljk2MDQ2NDEyMjI2NzY5NDZlLTgsIDEuNDg5OTM0Mzk4MDgwMDk1ZS04LCAtMS40OTAxOTMyMTMyNzE1OTU2ZS04LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRQaW5reTEnLFxuICAgIHBhcmVudEluZGV4OiAxMixcbiAgICBwb3NpdGlvbjogWy0wLjAwMjI2Mzk1OTk2Mjg3NDY1MSwgMC4xMDkwODIwNDMxNzA5Mjg5NiwgMC4wNDcyNTc5ODk2NDUwMDQyN10sXG4gICAgcXVhdGVybmlvbjogWzIuOTgwMjMyMjM4NzY5NTMxMmUtOCwgMS40ODk5MzQzOTgwODAwOTVlLTgsIDEuNDkwMDM4ODQ3ODYyMjUxN2UtOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kUGlua3kyJyxcbiAgICBwYXJlbnRJbmRleDogMjUsXG4gICAgcG9zaXRpb246IFstNS42MjQ5OTczNTY3OTAxMThlLTgsIDAuMDQxMzY3MDUzOTg1NTk1NywgNS4yNDU5NjU0Mzk4MjYyNWUtOV0sXG4gICAgcXVhdGVybmlvbjogWzIuOTgwMjMyMjM4NzY5NTMxMmUtOCwgMS40OTAyOTgwMTgzMjUxMjAyZS04LCAtMS40OTAxOTM1Njg1NDI5NjM1ZS04LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRQaW5reTMnLFxuICAgIHBhcmVudEluZGV4OiAyNixcbiAgICBwb3NpdGlvbjogWy01LjYyNDk5NzM1Njc5MDExOGUtOCwgMC4wMjU5NDgxMDcyNDI1ODQyMywgNS4yNDU5NjU0Mzk4MjYyNWUtOV0sXG4gICAgcXVhdGVybmlvbjogWy01Ljk2MDQ2NDQ3NzUzOTA2M2UtOCwgMi45ODA1OTYwMzY2NTAyNDA0ZS04LCAyLjk4MDA3NzM0MDQ1MzEzNTVlLTgsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodFNob3VsZGVyJyxcbiAgICBwYXJlbnRJbmRleDogMyxcbiAgICBwb3NpdGlvbjogWy0wLjA2MTA1Njk5NzYyNzAxOTg4LCAwLjA5MTMyNTg4NjU0NzU2NTQ2LCAwLjAwMzA4OTU5NTU4NjA2MTQ3NzddLFxuICAgIHF1YXRlcm5pb246IFstMC4wMTUzNzAyOTkxMDgzMjY0MzUsIDAuMDE1MzcwMjc5NTUwNTUyMzY4LCAwLjcwNjkzOTc1Njg3MDI2OTgsIDAuNzA2OTM5Njk3MjY1NjI1XSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRBcm0nLFxuICAgIHBhcmVudEluZGV4OiAyOCxcbiAgICBwb3NpdGlvbjogWy0wLjAwMjY2MDAzODY0ODE3MzIxMywgMC4xMjY1NTAwMDM4ODYyMjI4NCwgLTAuMDI2MDA4OTk3MTEyNTEyNTldLFxuICAgIHF1YXRlcm5pb246IFsxLjQ5MDExNjAzMDU2NjkyMzdlLTgsIC0xLjM2NjU5NzUwMTgyODQzN2UtOSwgLTQuNDcwMzQ4NzEzNDI1NjY1ZS04LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRGb3JlQXJtJyxcbiAgICBwYXJlbnRJbmRleDogMjksXG4gICAgcG9zaXRpb246IFstMi42OTc2MDIxNDE2NjU4MTE0ZS05LCAwLjI3NDA0Njk1NzQ5MjgyODM3LCAzLjY4MzQxMDkwOTYxNjIxMzhlLTldLFxuICAgIHF1YXRlcm5pb246IFstNS45NjA0NjM3NjY5OTYzMjdlLTgsIC0zLjkwMDg2MTg1NTc1NDU1NmUtOSwgMy4wOTIxNTM3MDE1MzI4NDE2ZS0xNSwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZCcsXG4gICAgcGFyZW50SW5kZXg6IDMwLFxuICAgIHBvc2l0aW9uOiBbLTIuNjk3Nzk1NzY0NTYxMzA2ZS05LCAwLjI3NjE0NTE2MDE5ODIxMTY3LCAzLjY4MzQxMDkwOTYxNjIxMzhlLTldLFxuICAgIHF1YXRlcm5pb246IFsyLjk4MDIzMjA2MTEzMzg0NzNlLTgsIC0wLjAwMDAyNTk0MjkyMzQ1NzQ3ODE3MywgLTEuNTQ0NTU3ODg0MzY5ODAxNmUtMTIsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRNaWRkbGUxJyxcbiAgICBwYXJlbnRJbmRleDogMzEsXG4gICAgcG9zaXRpb246IFs4LjM1NTUyNzgyNTE4Nzg5MmUtOSwgMC4xMjc3NTQ5ODYyODYxNjMzMywgNS4zNzY5MzI2NzY4ODE1NTJlLTldLFxuICAgIHF1YXRlcm5pb246IFsxLjQ5MDExNTk0MTc0OTA4MTdlLTgsIC00LjQ2OTk4NDkxNTU0NDk1NTZlLTgsIDIuOTgwNDY1Mjk2Nzg2ODYwNmUtOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZE1pZGRsZTInLFxuICAgIHBhcmVudEluZGV4OiAzMixcbiAgICBwb3NpdGlvbjogWzEuMjc1NjQ4MTczNzU5NjkxNGUtNywgMC4wMzYxMzk5NjUwNTczNzMwNSwgNS4zNzY5MzI2NzY4ODE1NTJlLTldLFxuICAgIHF1YXRlcm5pb246IFstMS40OTAxMTYyOTcwMjA0NDk2ZS04LCAxLjQ5MDI5ODE5NTk2MDgwNGUtOCwgLTcuNzYyNjc5OTMwMjgwMTgxZS0xMywgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZE1pZGRsZTMnLFxuICAgIHBhcmVudEluZGV4OiAzMyxcbiAgICBwb3NpdGlvbjogWzEuMjc1NjQ4MTczNzU5NjkxNGUtNywgMC4wMzQ1OTc5MzMyOTIzODg5MTYsIDUuMzc2OTMyNjc2ODgxNTUyZS05XSxcbiAgICBxdWF0ZXJuaW9uOiBbNS45NjA0NjQ0Nzc1MzkwNjNlLTgsIC0yLjk4MDIzMjU5NDA0MDg5OWUtOCwgLTQuNDcwMTk0MTcwMzgwNjM3ZS04LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kVGh1bWIxJyxcbiAgICBwYXJlbnRJbmRleDogMzEsXG4gICAgcG9zaXRpb246IFstMC4wMjE2NzAwMzk3NDMxODUwNDMsIDAuMDM3ODg3OTc1NTczNTM5NzM0LCAwLjAzMDAzMDkyODU1MjE1MDcyNl0sXG4gICAgcXVhdGVybmlvbjogWzAuMjIyMTI3Njc2MDEwMTMxODQsIDAuMDU5NTkxNTY5MDA2NDQzMDI0LCAwLjI1MjE1MDMyNjk2NzIzOTQsIDAuOTM5OTYxOTEwMjQ3ODAyN10sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZFRodW1iMicsXG4gICAgcGFyZW50SW5kZXg6IDM1LFxuICAgIHBvc2l0aW9uOiBbMC4wMDAwMjUxNTc0MDc0MzU0NzIxMjMsIDAuMDQ3NDQ5MzQyOTA2NDc1MDcsIC0wLjAwMDAyMTIxMjQyMzIzNDgyODc0OF0sXG4gICAgcXVhdGVybmlvbjogWzAuMDAyNTgyMjEyMjExNTY0MTgzMiwgMC4wMDA3NTc3OTMxOTc0MDgzMTg1LCAwLjAwMTUxMDYzMTk5MTU1MDMyNjMsIDAuOTk5OTk1MjMxNjI4NDE4XSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kVGh1bWIzJyxcbiAgICBwYXJlbnRJbmRleDogMzYsXG4gICAgcG9zaXRpb246IFswLjAwMDE1NTg2NTg0MDQ5NzQyNjcsIDAuMDQzODIwNDg5MTk3OTY5NDQsIC0wLjAwMDI0NTY3MzU1Mjg1Mzk4NjZdLFxuICAgIHF1YXRlcm5pb246IFswLjAwMDc3MzU2MjQ2NzY1NzAyOTYsIC0wLjAwMDIyMzc2ODE2MTk1OTAxNDgzLCAtMC4wMDA0Mzk1MDI0NzM0NTQ5MjI0NCwgMC45OTk5OTk1ODI3Njc0ODY2XSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kSW5kZXgxJyxcbiAgICBwYXJlbnRJbmRleDogMzEsXG4gICAgcG9zaXRpb246IFstMC4wMDIzMTcwMjUwOTMzNjE3MzUzLCAwLjEyMjY2NjAwMTMxOTg4NTI1LCAwLjAyODIyMTAwNzQzNjUxMzldLFxuICAgIHF1YXRlcm5pb246IFsxLjQ5MDExNjExOTM4NDc2NTZlLTgsIDEuODE4OTg5NjIwMzg2MjkxZS0xMiwgLTEuNDkwMTE2MDMwNTY2OTIzN2UtOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZEluZGV4MicsXG4gICAgcGFyZW50SW5kZXg6IDM4LFxuICAgIHBvc2l0aW9uOiBbNC41ODY1MjQ5Mzc2MjIwMTZlLTgsIDAuMDM4OTE5OTg1Mjk0MzQyMDQsIC04LjM2NzM1MTI1NjMxMDk0ZS0xMF0sXG4gICAgcXVhdGVybmlvbjogWy00LjQ3MDM0OTA2ODY5NzAzMjZlLTgsIDEuNDkwMjk4MTk1OTYwODA0ZS04LCAtNy43NDA0NzU0Njk3ODc2NzhlLTEzLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kSW5kZXgzJyxcbiAgICBwYXJlbnRJbmRleDogMzksXG4gICAgcG9zaXRpb246IFs0LjU4NjUyNDkzNzYyMjAxNmUtOCwgMC4wMzQxNTIwOTA1NDk0Njg5OTQsIC04LjM2NzM1MTI1NjMxMDk0ZS0xMF0sXG4gICAgcXVhdGVybmlvbjogWzIuOTgwMjMyMjM4NzY5NTMxMmUtOCwgLTEuNDkwMTE2Mjk3MDIwNDQ5NmUtOCwgLTIuOTgwMTU1MzIyNTE4Mzg1MmUtOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZFJpbmcxJyxcbiAgICBwYXJlbnRJbmRleDogMzEsXG4gICAgcG9zaXRpb246IFswLjAwMDA5ODg3MTg5NjYyNTQ5NjQ1LCAwLjEyMTQ3MDAzNDEyMjQ2NzA0LCAtMC4wMjIxNjU5ODc2NDA2MTkyNzhdLFxuICAgIHF1YXRlcm5pb246IFsyLjk4MDIzMjA2MTEzMzg0NzNlLTgsIC0yLjk4MDA1MDY5NTEwMDU0NDVlLTgsIDEuNDkwMjcwNjYyNDI5NzkzNGUtOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZFJpbmcyJyxcbiAgICBwYXJlbnRJbmRleDogNDEsXG4gICAgcG9zaXRpb246IFsxLjY2NjA2MjQxNjkxNjI0NzVlLTcsIDAuMDM2MDExOTM0MjgwMzk1NTEsIDEuODE4OTg5NDAzNTQ1ODU2NWUtMTBdLFxuICAgIHF1YXRlcm5pb246IFstMi45ODAyMzE4ODM0OTgxNjM0ZS04LCAyLjk4MDIzMjU5NDA0MDg5OWUtOCwgLTQuNDcwNTAyNTQ1OTI3OTU3ZS04LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kUmluZzMnLFxuICAgIHBhcmVudEluZGV4OiA0MixcbiAgICBwb3NpdGlvbjogWzQuNzM5Njk1MjE0MDg0MzQ5NmUtOCwgMC4wMzMwNzMwNjc2NjUxMDAxLCAxLjgxODk4OTQwMzU0NTg1NjVlLTEwXSxcbiAgICBxdWF0ZXJuaW9uOiBbNS45NjA0NjM3NjY5OTYzMjdlLTgsIC0xLjQ4OTU3MDYwMDE5OTM4NThlLTgsIDcuNDUwNjU3MzM1NTM5MjllLTgsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRQaW5reTEnLFxuICAgIHBhcmVudEluZGV4OiAzMSxcbiAgICBwb3NpdGlvbjogWy0wLjAwMjI2Mzk2OTUwODkzMTA0MDgsIDAuMTA5MDgyMDQzMTcwOTI4OTYsIC0wLjA0NzI1Nzk4OTY0NTAwNDI3XSxcbiAgICBxdWF0ZXJuaW9uOiBbNy40NTA1ODEzMDc0NjY1NjRlLTgsIDEuODE4OTg5NjIwMzg2MjkxZS0xMiwgLTEuNDkwMTE1OTQxNzQ5MDgxN2UtOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZFBpbmt5MicsXG4gICAgcGFyZW50SW5kZXg6IDQ0LFxuICAgIHBvc2l0aW9uOiBbLTYuNTc3NjkzMDU2ODk3MjZlLTgsIDAuMDQxMzY2OTk0MzgwOTUwOTMsIC0zLjc5ODA0OTg3NDYwMzc0OGUtOV0sXG4gICAgcXVhdGVybmlvbjogWy0xLjQ5MDExNjExOTM4NDc2NTZlLTgsIC0yLjk4MDU5NjAzNjY1MDI0MDRlLTgsIDEuNDkwMjcwODQwMDY1NDc3NGUtOCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZFBpbmt5MycsXG4gICAgcGFyZW50SW5kZXg6IDQ1LFxuICAgIHBvc2l0aW9uOiBbNS4zNDMxOTA0MjM0NDU3NzZlLTgsIDAuMDI1OTQ4MTA3MjQyNTg0MjMsIC0zLjc5ODA0OTg3NDYwMzc0OGUtOV0sXG4gICAgcXVhdGVybmlvbjogWy04Ljk0MDY5NjcxNjMwODU5NGUtOCwgMCwgMS4zMzkzNjkxNTM3Nzk5NjhlLTE1LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRVcExlZycsXG4gICAgcGFyZW50SW5kZXg6IDAsXG4gICAgcG9zaXRpb246IFstMC4wOTEyNDQ5OTU1OTQwMjQ2NiwgLTAuMDY2MDEwMjI5Mjg5NTMxNzEsIC0wLjAwODU4NjY0Njk4ODk4NzkyM10sXG4gICAgcXVhdGVybmlvbjogWy0wLjk5ODE2OTY2MDU2ODIzNzMsIC00LjMxNjU1MjIzNTY1MDMwNmUtNywgLTEuMTU0NjQ4NTAxMjU1OTA2ZS03LCAwLjA2MDQ3NjA4MzMwODQ1ODMzXSxcbiAgICBzY2FsZTogWzEsIDEsIDAuOTk5OTkzMDI2MjU2NTYxM11cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodExlZycsXG4gICAgcGFyZW50SW5kZXg6IDQ3LFxuICAgIHBvc2l0aW9uOiBbLTAuMDAyNDQ3MDEwMDE3OTMxNDYxMywgMC40MDU5NTQwNjI5Mzg2OTAyLCAwLjAwNTE0NTAzNjYxNTQzMTMwOV0sXG4gICAgcXVhdGVybmlvbjogWzAuMDIzNzk2Mjc4OTgzMzU0NTcsIC0xLjA3NzIzNzU4ODAyMDgwNzRlLTgsIDMuMzYyMDY1NzM2OTIyNjU5ZS05LCAwLjk5OTcxNjkzNzU0MTk2MTddLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEZvb3QnLFxuICAgIHBhcmVudEluZGV4OiA0OCxcbiAgICBwb3NpdGlvbjogWzAuMDAyNDQ3MDIxMTkzODAyMzU2NywgMC40MjA5ODI5ODY2ODg2MTM5LCAwLjAwMDU3ODMyMTkyMzk2NzQ1MDldLFxuICAgIHF1YXRlcm5pb246IFstMC40NDU5NTMwMTE1MTI3NTYzNSwgMS41Mzg5NjQ2NTM0OTEzNDgxZS03LCAtMS4xOTg1MDcxMDY4OTIwNjZlLTcsIDAuODk1MDU2MzY2OTIwNDcxMl0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0VG9lQmFzZScsXG4gICAgcGFyZW50SW5kZXg6IDQ5LFxuICAgIHBvc2l0aW9uOiBbLTAuMDAzNzMzOTkyMzQzNzY4NDc3NCwgMC4xNjQyNzg3NzU0NTM1Njc1LCAtMC4wMDAxODUwOTAxMTcxNTY1MDU1OF0sXG4gICAgcXVhdGVybmlvbjogWy0wLjM0MDAzNjMwMjgwNDk0NjksIC0xLjgzMDA4OTc4NjM4MDk5NWUtNywgLTkuNTg2NDg0MTM5ODQ1MTk3ZS04LCAwLjk0MDQxMjM0MjU0ODM3MDRdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodFRvZV9FbmQnLFxuICAgIHBhcmVudEluZGV4OiA1MCxcbiAgICBwb3NpdGlvbjogWy05LjYyNzAyMTQwMjI4MDg4OWUtMTEsIDAuMDk5OTI1Njk2ODQ5ODIzLCAtMy43ODUxNDk5NzEyMzYwMjRlLTExXSxcbiAgICBxdWF0ZXJuaW9uOiBbMi4yMTM1MzQ3Nzc2OTUyNTg1ZS04LCAtNy4wOTU3OTMyMDQ4NTg5MzE0ZS0xNSwgLTIuMTE4NjQzMTA4MTczMjIzOGUtMTEsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0VXBMZWcnLFxuICAgIHBhcmVudEluZGV4OiAwLFxuICAgIHBvc2l0aW9uOiBbMC4wOTEyNDQ5OTU1OTQwMjQ2NiwgLTAuMDY2MDEwMjI5Mjg5NTMxNzEsIC0wLjAwODU4NjY0Njk4ODk4NzkyM10sXG4gICAgcXVhdGVybmlvbjogWy0wLjk5ODE3MDQ5NTAzMzI2NDIsIC00LjMxODg2MjM1MjE5MjgwOTNlLTcsIC0xLjE1NDcwMTA4MTQxODM1MjNlLTcsIDAuMDYwNDYyMDMxNTEzNDUyNTNdLFxuICAgIHNjYWxlOiBbMSwgMSwgMC45OTk5NzYwOTg1Mzc0NDUxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRMZWcnLFxuICAgIHBhcmVudEluZGV4OiA1MixcbiAgICBwb3NpdGlvbjogWzAuMDAyNDQ3MDA4MTU1Mjg2MzEyLCAwLjQwNTk1Mzk3MzUzMTcyMywgMC4wMDUxNzAxMTg5OTUwMTA4NTNdLFxuICAgIHF1YXRlcm5pb246IFswLjAyMzgyNTY3MzM4NjQ1NDU4MiwgLTEuMjEyMzU0ODc0MjY5Mjk0N2UtNywgLTMuNDU2NDY5Nzc3MDYzMzc1N2UtOSwgMC45OTk3MTYyMjIyODYyMjQ0XSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEZvb3QnLFxuICAgIHBhcmVudEluZGV4OiA1MyxcbiAgICBwb3NpdGlvbjogWy0wLjAwMjQ0Njk4OTUyODgzNDgyLCAwLjQyMDk4MjgzNzY3NzAwMTk1LCAwLjAwMDU1MjMwMjI4NDYzMTg3ODFdLFxuICAgIHF1YXRlcm5pb246IFstMC40NDU5NzA1OTQ4ODI5NjUxLCAxLjYxOTIzODUwMzI4MDkzOThlLTcsIC0xLjE3ODcxMzU4ODk1NjI3MDVlLTcsIDAuODk1MDQ3NzI0MjQ2OTc4OF0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRUb2VCYXNlJyxcbiAgICBwYXJlbnRJbmRleDogNTQsXG4gICAgcG9zaXRpb246IFswLjAwMzczNDAwMDI2MDAxMDM2MTcsIDAuMTY0MjgwMjgwNDcwODQ4MDgsIC0wLjAwMDE4NTA5NzE2MDI4MzQ3NjExXSxcbiAgICBxdWF0ZXJuaW9uOiBbLTAuMzQwMDMyOTA1MzQwMTk0NywgLTcuMTUyMzA1NDE0NTkyNzc0ZS04LCAtNS42ODkxMDE0NTY1OTYyOTA1ZS04LCAwLjk0MDQxMzUzNDY0MTI2NTldLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0VG9lX0VuZCcsXG4gICAgcGFyZW50SW5kZXg6IDU1LFxuICAgIHBvc2l0aW9uOiBbLTMuMDE5MjM4NDcwMzQ3NTc0ZS0xMCwgMC4wOTk5Mjc0MTc5MzM5NDA4OSwgMS4yOTkxMzE5MTMxNTcyMjU0ZS0xMF0sXG4gICAgcXVhdGVybmlvbjogWzcuMjMzNzQyNDkzODk1MDc5ZS05LCAxLjM0ODc3MDM3MjQ2MTU0MzRlLTE0LCA0LjkyNjM4OTI5NjUwMDEzM2UtMTAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfVxuXVxuXG4vLyB4cmVuZ2luZSB0cG9zZSBib25lcyBmcm9tIEFuaW1hdGlvbnMuZ2xiXG5leHBvcnQgY29uc3QgYm9uZXNEYXRhMiA9IFtcbiAge1xuICAgIG5hbWU6ICdIaXBzJyxcbiAgICBwYXJlbnRJbmRleDogbnVsbCxcbiAgICBwb3NpdGlvbjogWzIuMTIwOTYzODgyNDc5ODY3NmUtMTgsIDEuMDQ5NTA1NzEwNjAxODA2NiwgMC4wMjUwOTg3NDEwNTQ1MzQ5MTJdLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnU3BpbmUnLFxuICAgIHBhcmVudEluZGV4OiAwLFxuICAgIHBvc2l0aW9uOiBbOS4yMzQxNTIyODcyNjI5ODdlLTgsIDAuMTAxODE1OTM4OTQ5NTg0OTYsIDAuMDAxMzE1MTc2NDg2OTY4OTk0MV0sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdTcGluZTEnLFxuICAgIHBhcmVudEluZGV4OiAxLFxuICAgIHBvc2l0aW9uOiBbMi41MTkzOTk3OTk4OTQwMTc2ZS05LCAwLjEwMDgzNDM2OTY1OTQyMzgzLCAtMC4wMTAwMDgwMzcwOTAzMDE1MTRdLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnU3BpbmUyJyxcbiAgICBwYXJlbnRJbmRleDogMixcbiAgICBwb3NpdGlvbjogWzMuNDU3NDg2NzQxMzUzOTMyM2UtOSwgMC4wOTEwMDAzMTg1MjcyMjE2OCwgLTAuMDEzNzM0MTYxODUzNzkwMjgzXSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ05lY2snLFxuICAgIHBhcmVudEluZGV4OiAzLFxuICAgIHBvc2l0aW9uOiBbNi4zMzQyODk1MzczMzUyOGUtOSwgMC4xNjY3MTY1NzU2MjI1NTg2LCAtMC4wMjUxNjE2NTM3NTcwOTUzMzddLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnSGVhZCcsXG4gICAgcGFyZW50SW5kZXg6IDQsXG4gICAgcG9zaXRpb246IFstNC4yNDIzMjM4MjU1NjUxMDg2ZS05LCAwLjA5NjE3ODc3MDA2NTMwNzYyLCAwLjAxNjg1MDA4NDA2NjM5MDk5XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0hlYWRUb3BfRW5kJyxcbiAgICBwYXJlbnRJbmRleDogNSxcbiAgICBwb3NpdGlvbjogWy02LjUwODI0NDYwOTkwNDA2OGUtOSwgMC4xNzgxNTE2MDc1MTM0Mjc3MywgMC4wMjU4NDk4MTkxODMzNDk2MV0sXG4gICAgcXVhdGVybmlvbjogWzIuMTYwNDU0MzU3NjM1ODk5MmUtNywgMCwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRFeWUnLFxuICAgIHBhcmVudEluZGV4OiA1LFxuICAgIHBvc2l0aW9uOiBbMC4wMzA2NzU2MDQ5Mzk0NjA3NTQsIDAuMDY0MDk1MDIwMjk0MTg5NDUsIDAuMDkyODM1NTQ1NTM5ODU1OTZdLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRFeWUnLFxuICAgIHBhcmVudEluZGV4OiA1LFxuICAgIHBvc2l0aW9uOiBbLTAuMDMwNjc1NTA0MzU2NjIyNjk2LCAwLjA2NDA5NTAyMDI5NDE4OTQ1LCAwLjA5MjgzNTQ4NTkzNTIxMTE4XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRTaG91bGRlcicsXG4gICAgcGFyZW50SW5kZXg6IDMsXG4gICAgcG9zaXRpb246IFswLjA0NTcwNDQ2MTYzNDE1OTA5LCAwLjEwOTQ1OTYzODU5NTU4MTA1LCAtMC4wMjYyNzk4NjY2OTU0MDQwNTNdLFxuICAgIHF1YXRlcm5pb246IFstMC43MDcxMDY4Mjg2ODk1NzUyLCAtMC43MDcxMDY4Mjg2ODk1NzUyLCAtNS4zMzg1MDgzMDIwODg0ODVlLTgsIDUuMzM4NTA4MzAyMDg4NDg1ZS04XSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEFybScsXG4gICAgcGFyZW50SW5kZXg6IDksXG4gICAgcG9zaXRpb246IFstMC4wMDUyNDU2OTI1NjIzMTE4ODgsIDAuMTA1OTIzNjk3MzUyNDA5MzYsIDAuMDIyMzIxMTkyNTQ3Njc4OTQ3XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgLTMuMTc4NjUwNTg3MTg3ODAzNWUtOCwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRGb3JlQXJtJyxcbiAgICBwYXJlbnRJbmRleDogMTAsXG4gICAgcG9zaXRpb246IFstOS41NzY4OTUwODE0MDkwMmUtNywgMC4yNzg0MTUyNjI2OTkxMjcyLCAtMy41Nzc1NDY4NjMxOTgyMjJlLTddLFxuICAgIHF1YXRlcm5pb246IFswLCAtMy41NTI3MTM2Nzg4MDA1MDFlLTE1LCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmQnLFxuICAgIHBhcmVudEluZGV4OiAxMSxcbiAgICBwb3NpdGlvbjogWy0yLjQyNDMzNzcwODM2MjE0NTNlLTcsIDAuMjgzMjg4MzAwMDM3Mzg0MDMsIC0zLjg3NTU3MDA4NzA3NTE3NWUtN10sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZFRodW1iMScsXG4gICAgcGFyZW50SW5kZXg6IDEyLFxuICAgIHBvc2l0aW9uOiBbLTAuMDE1NzUwNDEwMDM1MjUyNTcsIDAuMDI0NjYxNDIxNzc1ODE3ODcsIC0wLjAyNjgyNDE0ODM3MTgxNTY4XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kVGh1bWIyJyxcbiAgICBwYXJlbnRJbmRleDogMTMsXG4gICAgcG9zaXRpb246IFstMC4wMTg2NDY5NTU0OTAxMTIzMDUsIDAuMDMyMjk4MDI4NDY5MDg1NjksIC0wLjAxODY0NjgwODM0MTE0NTUxNV0sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZFRodW1iMycsXG4gICAgcGFyZW50SW5kZXg6IDE0LFxuICAgIHBvc2l0aW9uOiBbLTAuMDE1MzE0ODE2NDk3MjY2MjkzLCAwLjAyNjUyNTY3NjI1MDQ1Nzc2NCwgLTAuMDE1MzE0Njk5MTUwNjIxODkxXSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgLTMuNTUyNzEzNjc4ODAwNTAxZS0xNSwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kSW5kZXgxJyxcbiAgICBwYXJlbnRJbmRleDogMTIsXG4gICAgcG9zaXRpb246IFstMC4wMDUxNzA4MjQwMDYxOTk4MzcsIDAuMDkxMDkzMDYzMzU0NDkyMTksIC0wLjAyMjYwMDc0MDE5NDMyMDY4XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kSW5kZXgyJyxcbiAgICBwYXJlbnRJbmRleDogMTYsXG4gICAgcG9zaXRpb246IFstMi4wMzkzNjAyMzYyMzg5NjNlLTksIDAuMDM2NzY0MDg1MjkyODE2MTYsIC0yLjk4NjAyMTE3MjU0NjMxNmUtN10sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZEluZGV4MycsXG4gICAgcGFyZW50SW5kZXg6IDE3LFxuICAgIHBvc2l0aW9uOiBbMi4zNjM3OTE3OTM0MTM4Mzg2ZS03LCAwLjAyODgzMDY0NzQ2ODU2Njg5NSwgNC40NjQ1NTk3MDg1OTQ2MDY1ZS03XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAwLjk5OTk5OTk0MDM5NTM1NTIsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRNaWRkbGUxJyxcbiAgICBwYXJlbnRJbmRleDogMTIsXG4gICAgcG9zaXRpb246IFstMi40MjQzMzc3MDgzNjIxNDUzZS03LCAwLjA5NTMzMzk5MzQzNDkwNiwgLTEuNDkxMzg0NzIyMzg1MTkxN2UtN10sXG4gICAgcXVhdGVybmlvbjogWzAsIC0zLjU1MjcxMzY3ODgwMDUwMWUtMTUsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZE1pZGRsZTInLFxuICAgIHBhcmVudEluZGV4OiAxOSxcbiAgICBwb3NpdGlvbjogWy00LjAxNTE3NjYzNTYxODllLTksIDAuMDM2OTgyMzU3NTAxOTgzNjQsIC0xLjc4OTQwNzk0NjI2MjE0NDhlLTddLFxuICAgIHF1YXRlcm5pb246IFswLCAzLjU1MjcxMzY3ODgwMDUwMWUtMTUsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZE1pZGRsZTMnLFxuICAgIHBhcmVudEluZGV4OiAyMCxcbiAgICBwb3NpdGlvbjogWy00LjgwODUyMzQ5OTM3Nzc3ZS03LCAwLjAyOTUwOTMwNTk1Mzk3OTQ5MiwgLTEuNDkxMzg1MTQ4NzEwODMzMmUtN10sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZFJpbmcxJyxcbiAgICBwYXJlbnRJbmRleDogMTIsXG4gICAgcG9zaXRpb246IFstMC4wMDA0Mzk0MTEwODc0MjcyODgzLCAwLjA5MTA0NTMyMDAzNDAyNzEsIDAuMDE4NjUwODI5NzkyMDIyNzA1XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgMCwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRIYW5kUmluZzInLFxuICAgIHBhcmVudEluZGV4OiAyMixcbiAgICBwb3NpdGlvbjogWy01LjY0NTcwNTY4MDczNDYzNmUtOSwgMC4wMzE1NDAyMTUwMTU0MTEzOCwgLTguOTU3MjIxMDk4MTcxNDNlLThdLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRSaW5nMycsXG4gICAgcGFyZW50SW5kZXg6IDIzLFxuICAgIHBvc2l0aW9uOiBbLTQuODI0ODI4NDY1NjQzODA1ZS03LCAwLjAyOTM3Njc0NTIyMzk5OTAyMywgOC45MjQxNjgwNzExODkzNDJlLThdLFxuICAgIHF1YXRlcm5pb246IFswLCAtMy41NTI3MTM2Nzg4MDA1MDFlLTE1LCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTGVmdEhhbmRQaW5reTEnLFxuICAgIHBhcmVudEluZGV4OiAxMixcbiAgICBwb3NpdGlvbjogWy0wLjAwNDg4NjYzNDY0Nzg0NjIyMiwgMC4wODA3Nzc4MjM5MjUwMTgzMSwgMC4wMzgwNjA2NjUxMzA2MTUyMzRdLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDAuOTk5OTk5OTQwMzk1MzU1MiwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZFBpbmt5MicsXG4gICAgcGFyZW50SW5kZXg6IDI1LFxuICAgIHBvc2l0aW9uOiBbLTcuMzQyNTk4NTI5MTkxOTQ2ZS05LCAwLjAzNjAwMDMxMTM3NDY2NDMxLCAyLjY3NjY2ODQ4Njg1NjIxNWUtN10sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0SGFuZFBpbmt5MycsXG4gICAgcGFyZW50SW5kZXg6IDI2LFxuICAgIHBvc2l0aW9uOiBbLTcuMzQyNTk4NTI5MTkxOTQ2ZS05LCAwLjAyMTE0MjE4NDczNDM0NDQ4MiwgLTUuNTQwMzg1OTI3ODE1ODA1ZS0xMF0sXG4gICAgcXVhdGVybmlvbjogWzcuNTQyMjU3NjYyODYyNTM5ZS03LCAtNy4yNDA1NjkxNzUzMzc0NDFlLTcsIC0wLjAwMDAwNjAzMzgzNzUwNzg1NzI0MywgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0U2hvdWxkZXInLFxuICAgIHBhcmVudEluZGV4OiAzLFxuICAgIHBvc2l0aW9uOiBbLTAuMDQ1Njk5NjkzMjYyNTc3MDYsIDAuMTA5NDYxNzg0MzYyNzkyOTcsIC0wLjAyNjI4MDE2NDcxODYyNzkzXSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgMC43MDcxMDY4Mjg2ODk1NzUyLCAwLjcwNzEwNjgyODY4OTU3NTJdLFxuICAgIHNjYWxlOiBbMC45OTk5OTk4ODA3OTA3MTA0LCAwLjk5OTk5OTg4MDc5MDcxMDQsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRBcm0nLFxuICAgIHBhcmVudEluZGV4OiAyOCxcbiAgICBwb3NpdGlvbjogWy0wLjAwNTI0Nzk1MDU1Mzg5NDA0MywgMC4xMDU5Mjg0NTA4MjI4MzAyLCAtMC4wMjIzMjA5ODU3OTQwNjczODNdLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAtMy41NTI3MTM2Nzg4MDA1MDFlLTE1LCAxXSxcbiAgICBzY2FsZTogWzAuOTk5OTk5OTQwMzk1MzU1MiwgMC45OTk5OTk5NDAzOTUzNTUyLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0Rm9yZUFybScsXG4gICAgcGFyZW50SW5kZXg6IDI5LFxuICAgIHBvc2l0aW9uOiBbLTMuNTc2Mjc4Njg2NTIzNDM3NWUtNywgMC4yNzg0MTUyMDMwOTQ0ODI0LCAxLjE1NDgzOTk5MjUyMzE5MzRlLTddLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAtMy41NTI3MTM2Nzg4MDA1MDFlLTE1LCAxXSxcbiAgICBzY2FsZTogWzAuOTk5OTk5OTQwMzk1MzU1MiwgMC45OTk5OTk5NDAzOTUzNTUyLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZCcsXG4gICAgcGFyZW50SW5kZXg6IDMwLFxuICAgIHBvc2l0aW9uOiBbMS4xOTIwOTI4OTU1MDc4MTI1ZS03LCAwLjI4MzI4ODMyOTgzOTcwNjQsIDUuNjI1MTg4MzUwNjc3NDllLTddLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAtMy41NTI3MTM2Nzg4MDA1MDFlLTE1LCAxXSxcbiAgICBzY2FsZTogWzAuOTk5OTk5OTQwMzk1MzU1MiwgMC45OTk5OTk5NDAzOTUzNTUyLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZFBpbmt5MScsXG4gICAgcGFyZW50SW5kZXg6IDMxLFxuICAgIHBvc2l0aW9uOiBbLTAuMDA0ODg0NDgxNDMwMDUzNzExLCAwLjA4MDc2Njg0OTIxOTc5OTA0LCAtMC4wMzgwNjAwOTUxNjExOTk1N10sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIC0zLjU1MjcxMzY3ODgwMDUwMWUtMTUsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRQaW5reTInLFxuICAgIHBhcmVudEluZGV4OiAzMixcbiAgICBwb3NpdGlvbjogWzEuMTkyMDkyODk1NTA3ODEyNWUtNywgMC4wMzYwMDA0MjMxMzMzNzMyNiwgNS4xNDA5MDA2MTE4Nzc0NDFlLTddLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kUGlua3kzJyxcbiAgICBwYXJlbnRJbmRleDogMzMsXG4gICAgcG9zaXRpb246IFsxLjE5MjA5Mjg5NTUwNzgxMjVlLTcsIDAuMDIxMTQyMTc3MjgzNzYzODg1LCAxLjU2NDYyMTkyNTM1NDAwNGUtN10sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIDAsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRSaW5nMScsXG4gICAgcGFyZW50SW5kZXg6IDMxLFxuICAgIHBvc2l0aW9uOiBbLTAuMDAwNDM5MDQ3ODEzNDE1NTI3MzQsIDAuMDkxMDM1OTU0NjU0MjE2NzcsIC0wLjAxODY1MDc0NDExMDM0NTg0XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgLTMuNTUyNzEzNjc4ODAwNTAxZS0xNSwgMV0sXG4gICAgc2NhbGU6IFswLjk5OTk5OTk0MDM5NTM1NTIsIDAuOTk5OTk5OTQwMzk1MzU1MiwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRSaW5nMicsXG4gICAgcGFyZW50SW5kZXg6IDM1LFxuICAgIHBvc2l0aW9uOiBbNS45NjA0NjQ0Nzc1MzkwNjJlLTcsIDAuMDMxNTQwMjA3NTY0ODMwNzgsIDQuOTkxODg4OTk5OTM4OTY1ZS03XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgLTMuNTUyNzEzNjc4ODAwNTAxZS0xNSwgMV0sXG4gICAgc2NhbGU6IFswLjk5OTk5OTk0MDM5NTM1NTIsIDAuOTk5OTk5OTQwMzk1MzU1MiwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRSaW5nMycsXG4gICAgcGFyZW50SW5kZXg6IDM2LFxuICAgIHBvc2l0aW9uOiBbLTMuNTc2Mjc4Njg2NTIzNDM3NWUtNywgMC4wMjkzNzY3OTkyNDA3MDgzNSwgLTMuOTQ4ODA3NzE2MzY5NjI5ZS03XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgLTMuNTUyNzEzNjc4ODAwNTAxZS0xNSwgMV0sXG4gICAgc2NhbGU6IFswLjk5OTk5OTk0MDM5NTM1NTIsIDAuOTk5OTk5OTQwMzk1MzU1MiwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRNaWRkbGUxJyxcbiAgICBwYXJlbnRJbmRleDogMzEsXG4gICAgcG9zaXRpb246IFswLCAwLjA5NTMyNTIyNDEwMTU0MzQzLCAxLjQ5MDExNjExOTM4NDc2NTZlLTddLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAtMy41NTI3MTM2Nzg4MDA1MDFlLTE1LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kTWlkZGxlMicsXG4gICAgcGFyZW50SW5kZXg6IDM4LFxuICAgIHBvc2l0aW9uOiBbLTEuMTkyMDkyODk1NTA3ODEyNWUtNywgMC4wMzY5ODIzNTAwNTE0MDMwNDYsIC0yLjA0ODkwOTY2NDE1NDA1MjdlLTddLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAwLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kTWlkZGxlMycsXG4gICAgcGFyZW50SW5kZXg6IDM5LFxuICAgIHBvc2l0aW9uOiBbLTEuMTkyMDkyODk1NTA3ODEyNWUtNywgMC4wMjk1MDkyNDA3NjEzOTkyNywgMy43MjUzMTAyODI0NzYzNTdlLTldLFxuICAgIHF1YXRlcm5pb246IFstOC40NzAzMjk0NzI1NDMwMDNlLTIyLCA4LjQxMzA4ODg5MjIxMTgxN2UtOCwgNi4wMTg1MzEwNzYyMTAxMTJlLTM2LCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kSW5kZXgxJyxcbiAgICBwYXJlbnRJbmRleDogMzEsXG4gICAgcG9zaXRpb246IFstMC4wMDUxNjc3MjI3MDIwMjYzNjcsIDAuMDkxMDgyOTgyNzE4OTQ0NTUsIDAuMDIyNjAxMTU1NTY0MTg4OTU3XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgLTMuNTUyNzEzNjc4ODAwNTAxZS0xNSwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZEluZGV4MicsXG4gICAgcGFyZW50SW5kZXg6IDQxLFxuICAgIHBvc2l0aW9uOiBbLTEuMTkyMDkyODk1NTA3ODEyNWUtNywgMC4wMzY3NjQwNzc4NDIyMzU1NjUsIDMuMjc4MjU1NDYyNjQ2NDg0NGUtN10sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIDAsIDFdLFxuICAgIHNjYWxlOiBbMC45OTk5OTk5NDAzOTUzNTUyLCAwLjk5OTk5OTg4MDc5MDcxMDQsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kSW5kZXgzJyxcbiAgICBwYXJlbnRJbmRleDogNDIsXG4gICAgcG9zaXRpb246IFstNS45NjA0NjQ0Nzc1MzkwNjJlLTcsIDAuMDI4ODMwNjk5NjIyNjMxMDczLCAzLjg3NDMwMTkxMDQwMDM5MDZlLTddLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAtMy41NTI3MTM2Nzg4MDA1MDFlLTE1LCAxXSxcbiAgICBzY2FsZTogWzAuOTk5OTk5OTQwMzk1MzU1MiwgMC45OTk5OTk5NDAzOTUzNTUyLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ1JpZ2h0SGFuZFRodW1iMScsXG4gICAgcGFyZW50SW5kZXg6IDMxLFxuICAgIHBvc2l0aW9uOiBbLTAuMDE1NzI2OTIzOTQyNTY1OTE4LCAwLjAyNDY0ODEyMjQ4OTQ1MjM2MiwgMC4wMjY4MjYyNTg3NDg3Njk3Nl0sXG4gICAgcXVhdGVybmlvbjogWzAsIDAsIC0zLjU1MjcxMzY3ODgwMDUwMWUtMTUsIDFdLFxuICAgIHNjYWxlOiBbMC45OTk5OTk5NDAzOTUzNTUyLCAwLjk5OTk5OTk0MDM5NTM1NTIsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRIYW5kVGh1bWIyJyxcbiAgICBwYXJlbnRJbmRleDogNDQsXG4gICAgcG9zaXRpb246IFstMC4wMTg2NDcwNzQ2OTk0MDE4NTUsIDAuMDMyMjk3Nzc4ODc0NjM1Njk2LCAwLjAxODY0NzE2MjI0MzcyMzg3XSxcbiAgICBxdWF0ZXJuaW9uOiBbMCwgMCwgLTMuNTUyNzEzNjc4ODAwNTAxZS0xNSwgMV0sXG4gICAgc2NhbGU6IFswLjk5OTk5OTk0MDM5NTM1NTIsIDAuOTk5OTk5OTQwMzk1MzU1MiwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEhhbmRUaHVtYjMnLFxuICAgIHBhcmVudEluZGV4OiA0NSxcbiAgICBwb3NpdGlvbjogWy0wLjAxNTMxNDIyMTM4MjE0MTExMywgMC4wMjY1MjYwMjA4Mzk4MTAzNywgMC4wMTUzMTQ0NTk4MDA3MjAyMTVdLFxuICAgIHF1YXRlcm5pb246IFswLCAwLCAtMy41NTI3MTM2Nzg4MDA1MDFlLTE1LCAxXSxcbiAgICBzY2FsZTogWzAuOTk5OTk5OTQwMzk1MzU1MiwgMC45OTk5OTk5NDAzOTUzNTUyLCAxXVxuICB9LFxuICB7XG4gICAgbmFtZTogJ0xlZnRVcExlZycsXG4gICAgcGFyZW50SW5kZXg6IDAsXG4gICAgcG9zaXRpb246IFswLjA4MjA3NzgxNjEyODczMDc3LCAtMC4wNjc1MTcyMjA5NzM5Njg1LCAtMC4wMTU5OTU1NjIwNzY1Njg2MDRdLFxuICAgIHF1YXRlcm5pb246IFstMSwgMCwgLTcuNTQ5NzkwMTI2NDA0MzMyZS04LCAxLjM0MzMxMjczMjE2MDQ4NDNlLTddLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0TGVnJyxcbiAgICBwYXJlbnRJbmRleDogNDcsXG4gICAgcG9zaXRpb246IFstNS42NDYyNzAxMTgxMjAzNTZlLTksIDAuNDQzNzA0NjY0NzA3MTgzODQsIC0wLjAwMjg0NjQxODQxNDI2NDkxNzRdLFxuICAgIHF1YXRlcm5pb246IFstMS4zNDM4MjE2MjI4Njc4MzU3ZS03LCAtMy4xNzg2NTA5NDI0NTkxNzEzZS04LCAtNS43MDE3NTI3MzMwMTQ5MDhlLTE1LCAxXSxcbiAgICBzY2FsZTogWzEsIDAuOTk5OTk5OTQwMzk1MzU1MiwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0Rm9vdCcsXG4gICAgcGFyZW50SW5kZXg6IDQ4LFxuICAgIHBvc2l0aW9uOiBbNS44ODgxMjM3NjYzMzk5NTllLTksIDAuNDQ0Mjc4NzE3MDQxMDE1NiwgMC4wMjk4MjE5MDI1MTM1MDQwM10sXG4gICAgcXVhdGVybmlvbjogWy0wLjcwNzEwNjgyODY4OTU3NTIsIC0zLjA5MDg2MjY3NjkxMzI3NWUtOCwgLTMuMDkwODYyMzIxNjQxOTA3ZS04LCAwLjcwNzEwNjgyODY4OTU3NTJdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWZ0VG9lQmFzZScsXG4gICAgcGFyZW50SW5kZXg6IDQ5LFxuICAgIHBvc2l0aW9uOiBbLTIuOTgwMjMyMjM4NzY5NTMxMmUtOCwgMC4xMDcxMDU1ODI5NTI0OTkzOSwgMC4wODcyODY3MTgxODk3MTYzNF0sXG4gICAgcXVhdGVybmlvbjogWzAsIDMuNTUyNzE0NTI1ODMzNDQ4ZS0xNSwgNi4xNjI5NzU4MjIwMzkxNTVlLTMzLCAxXSxcbiAgICBzY2FsZTogWzEsIDEsIDFdXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnUmlnaHRVcExlZycsXG4gICAgcGFyZW50SW5kZXg6IDAsXG4gICAgcG9zaXRpb246IFstMC4wODIwNzc5NTc2ODk3NjIxMiwgLTAuMDY3NTE2NjI0OTI3NTIwNzUsIC0wLjAxNTk5NTYyMTY4MTIxMzM4XSxcbiAgICBxdWF0ZXJuaW9uOiBbMSwgMCwgNy41NDk3OTAxMjY0MDQzMzJlLTgsIDBdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodExlZycsXG4gICAgcGFyZW50SW5kZXg6IDUxLFxuICAgIHBvc2l0aW9uOiBbMS44MDY2MTYzMDEwMDMzMTY1ZS05LCAwLjQ0MzcwNTM3OTk2MjkyMTE0LCAtMC4wMDI4NjE1NTk2MjM4NTIzNzJdLFxuICAgIHF1YXRlcm5pb246IFs2LjY5Mjk2ODY2ODE3NjAzNmUtOCwgLTMuMTc4NjUxMjk3NzMwNTM5ZS04LCA3Ljk3MDUwNTQ5NDc2MzYwOGUtMTUsIDFdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodEZvb3QnLFxuICAgIHBhcmVudEluZGV4OiA1MixcbiAgICBwb3NpdGlvbjogWzUuODg4MDQ5NjAzNDQxOTE0ZS05LCAwLjQ0NDI3NzI4NjUyOTU0MSwgMC4wMjk4Mzc4NzY1NTgzMDM4MzNdLFxuICAgIHF1YXRlcm5pb246IFstMC43MDcxMDY3MDk0ODAyODU2LCAtMy4wOTA4NjE5NjYzNzA1Mzk0ZS04LCAtMy4wOTA4NjE5NjYzNzA1Mzk0ZS04LCAwLjcwNzEwNjgyODY4OTU3NTJdLFxuICAgIHNjYWxlOiBbMSwgMSwgMV1cbiAgfSxcbiAge1xuICAgIG5hbWU6ICdSaWdodFRvZUJhc2UnLFxuICAgIHBhcmVudEluZGV4OiA1MyxcbiAgICBwb3NpdGlvbjogWy0xLjQ5MDExNjExOTM4NDc2NTZlLTgsIDAuMTA3MTA1NjY0OTA4ODg1OTYsIDAuMDg3Mjg2NjU4NTg1MDcxNTZdLFxuICAgIHF1YXRlcm5pb246IFs0LjAxNTEzNDg5MTIzMzE3NGUtOCwgLTUuMjEwODAzNTQyOTQwMzdlLTE1LCAtMS4xOTMwODQzNDAyMTc4MDM4ZS0yMiwgMV0sXG4gICAgc2NhbGU6IFsxLCAxLCAxXVxuICB9XG5dXG4iLCJpbXBvcnQgeyBTa2lubmVkTWVzaCB9IGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgY3JlYXRlTWFwcGVkQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vZWNzL2Z1bmN0aW9ucy9Db21wb25lbnRGdW5jdGlvbnMnXG5cbnR5cGUgSUtPYmpUeXBlID0ge1xuICByZWY6IFNraW5uZWRNZXNoXG59XG5cbmV4cG9ydCBjb25zdCBJS09iaiA9IGNyZWF0ZU1hcHBlZENvbXBvbmVudDxJS09ialR5cGU+KCdJS09iaicpXG4iLCIvLyBDT05TVEFOVFNcblxuaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gJ3RocmVlJ1xuXG5leHBvcnQgY29uc3QgVVAgPSBuZXcgVmVjdG9yMygwLCAxLCAwKVxuZXhwb3J0IGNvbnN0IERPV04gPSBuZXcgVmVjdG9yMygwLCAtMSwgMClcbmV4cG9ydCBjb25zdCBMRUZUID0gbmV3IFZlY3RvcjMoMSwgMCwgMClcbmV4cG9ydCBjb25zdCBSSUdIVCA9IG5ldyBWZWN0b3IzKC0xLCAwLCAwKVxuZXhwb3J0IGNvbnN0IEZPUldBUkQgPSBuZXcgVmVjdG9yMygwLCAwLCAxKVxuZXhwb3J0IGNvbnN0IEJBQ0sgPSBuZXcgVmVjdG9yMygwLCAwLCAtMSlcbmV4cG9ydCBjb25zdCBaRVJPID0gbmV3IFZlY3RvcjMoMCwgMCwgMClcbiIsImltcG9ydCB7IEJvbmUsIFF1YXRlcm5pb24sIFZlY3RvcjMgfSBmcm9tICd0aHJlZSdcbmltcG9ydCBQb3NlLCB7IFBvc2VCb25lTG9jYWxTdGF0ZSB9IGZyb20gJy4vUG9zZSdcbmltcG9ydCB7IEZPUldBUkQsIFVQIH0gZnJvbSAnLi4vY29uc3RhbnRzL1ZlY3RvcjNDb25zdGFudHMnXG5pbXBvcnQgeyBJS1NvbHZlckZ1bmN0aW9uIH0gZnJvbSAnLi4vZnVuY3Rpb25zL0lLU29sdmVycydcblxudHlwZSBDaGFpbkJvbmVEYXRhID0geyBpbmRleDogbnVtYmVyOyByZWY6IEJvbmU7IGxlbmd0aDogbnVtYmVyIH1cblxuY29uc3QgYm9uZVdvcmxkUG9zaXRpb24gPSBuZXcgVmVjdG9yMygpLFxuICBjaGlsZFdvcmxkUG9zaXRpb24gPSBuZXcgVmVjdG9yMygpXG5leHBvcnQgY2xhc3MgQ2hhaW4ge1xuICBlbmRfaWR4OiBudW1iZXIgfCBudWxsXG4gIGNoYWluQm9uZXM6IENoYWluQm9uZURhdGFbXVxuICBsZW5ndGg6IG51bWJlclxuICBjbnQ6IG51bWJlclxuICBhbHRGb3J3YXJkOiBWZWN0b3IzXG4gIGFsdFVwOiBWZWN0b3IzXG4gIGlrU29sdmVyOiBJS1NvbHZlckZ1bmN0aW9uXG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jaGFpbkJvbmVzID0gW10gLy8gSW5kZXggdG8gYSBib25lIGluIGFuIGFybWF0dXJlIC8gcG9zZVxuICAgIHRoaXMubGVuZ3RoID0gMCAvLyBDaGFpbiBMZW5ndGhcbiAgICB0aGlzLmNudCA9IDAgLy8gSG93IG1hbnkgQm9uZXMgaW4gdGhlIGNoYWluXG5cbiAgICAvL3RoaXMuYWxpZ25fYXhpc1x0PSBheGlzO1x0XHRcdC8vIENoYWluIGlzIGFsaWduZWQgdG8gd2hpY2ggYXhpc1xuICAgIHRoaXMuZW5kX2lkeCA9IG51bGwgLy8gSm9pbnQgdGhhdCBNYXJrcyB0aGUgdHJ1ZSBlbmQgb2YgdGhlIGNoYWluXG5cbiAgICB0aGlzLmFsdEZvcndhcmQgPSBGT1JXQVJELmNsb25lKClcbiAgICB0aGlzLmFsdFVwID0gVVAuY2xvbmUoKVxuICB9XG5cbiAgLy8gR2V0IFNrZWxldG9uIEluZGV4IG9mIEJvbmVzXG4gIGZpcnN0KCkge1xuICAgIHJldHVybiB0aGlzLmNoYWluQm9uZXNbMF0uaW5kZXhcbiAgfVxuICBsYXN0KCkge1xuICAgIHJldHVybiB0aGlzLmNoYWluQm9uZXNbdGhpcy5jbnQgLSAxXS5pbmRleFxuICB9XG4gIGluZGV4KGkpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFpbkJvbmVzW2ldLmluZGV4XG4gIH1cblxuICBzZXRPZmZzZXRzKGZ3ZDogVmVjdG9yMywgdXA6IFZlY3RvcjMsIHRwb3NlOiBQb3NlKSB7XG4gICAgLy8gT1JJR0lOQUwgQ09ERVxuICAgIC8vIFx0bGV0IGIgPSB0cG9zZS5ib25lc1sgdGhpcy5ib25lc1sgMCBdLmlkeCBdLFxuICAgIC8vIFx0cSA9IFF1YXQuaW52ZXJ0KCBiLndvcmxkLnJvdCApO1x0Ly8gSW52ZXJ0IFdvcmxkIFNwYWNlIFJvdGF0aW9uXG5cbiAgICAvLyB0aGlzLmFsdF9md2QuZnJvbV9xdWF0KCBxLCBmd2QgKTtcdC8vIFVzZSBpbnZlcnQgdG8gZ2V0IGRpcmVjdGlvbiB0aGF0IHdpbGwgUmVjcmVhdGUgdGhlIHJlYWwgZGlyZWN0aW9uXG4gICAgLy8gdGhpcy5hbHRfdXAuZnJvbV9xdWF0KCBxLCB1cCApO1xuICAgIGNvbnN0IGIgPSB0cG9zZS5ib25lc1t0aGlzLmNoYWluQm9uZXNbMF0uaW5kZXhdXG5cbiAgICBjb25zdCBxID0gYi53b3JsZC5xdWF0ZXJuaW9uLmNsb25lKCkuaW52ZXJ0KCkgLy8gSW52ZXJ0IFdvcmxkIFNwYWNlIFJvdGF0aW9uXG4gICAgdGhpcy5hbHRGb3J3YXJkID0gbmV3IFZlY3RvcjMoKS5jb3B5KGZ3ZCkuYXBwbHlRdWF0ZXJuaW9uKHEpLm5vcm1hbGl6ZSgpIC8vIFVzZSBpbnZlcnQgdG8gZ2V0IGRpcmVjdGlvbiB0aGF0IHdpbGwgUmVjcmVhdGUgdGhlIHJlYWwgZGlyZWN0aW9uXG4gICAgdGhpcy5hbHRVcCA9IG5ldyBWZWN0b3IzKCkuY29weSh1cCkuYXBwbHlRdWF0ZXJuaW9uKHEpLm5vcm1hbGl6ZSgpXG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgY29tcHV0ZUxlbmd0aEZyb21Cb25lcyhib25lczogUG9zZUJvbmVMb2NhbFN0YXRlW10pIHtcbiAgICAvLyBSZWNvbXB1dGUgdGhlIExlbmd0aCBvZiB0aGUgYm9uZXMgZm9yIGVhY2ggY2hhaW4uIE1vc3Qgb2Z0ZW4gdGhpc1xuICAgIC8vIGlzIGEgcmVzdWx0IG9mIHNjYWxlIGJlaW5nIGFwcGxpZWQgdG8gdGhlIGFybWF0dXJlIG9iamVjdCB0aGF0IGNhblxuICAgIC8vIG9ubHkgYmUgY29tcHV0ZWQgYWZ0ZXIgdGhlIHJpZyBpcyBzZXR1cFxuXG4gICAgY29uc3QgZW5kID0gdGhpcy5jbnQgLSAxXG4gICAgbGV0IHN1bSA9IDAsXG4gICAgICBiZDogQ2hhaW5Cb25lRGF0YSxcbiAgICAgIGJzOiBQb3NlQm9uZUxvY2FsU3RhdGUsXG4gICAgICBpOiBudW1iZXJcblxuICAgIC8vIExvb3AgRXZlcnkgQm9uZSBFeGNlcHQgTGFzdCBvbmVcbiAgICBmb3IgKGkgPSAwOyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIGJzID0gYm9uZXNbdGhpcy5jaGFpbkJvbmVzW2ldLmluZGV4XVxuXG4gICAgICBib25lV29ybGRQb3NpdGlvbi5jb3B5KGJvbmVzW3RoaXMuY2hhaW5Cb25lc1tpXS5pbmRleF0ud29ybGQucG9zaXRpb24pXG4gICAgICBjaGlsZFdvcmxkUG9zaXRpb24uY29weShib25lc1t0aGlzLmNoYWluQm9uZXNbaSArIDFdLmluZGV4XS53b3JsZC5wb3NpdGlvbilcbiAgICAgIC8vdGhpcy5jaGFpbkJvbmVzW2kgKyAxXS5yZWYuZ2V0V29ybGRQb3NpdGlvbihjaGlsZFdvcmxkUG9zaXRpb24pXG5cbiAgICAgIGJzLmxlbmd0aCA9IGJvbmVXb3JsZFBvc2l0aW9uLmRpc3RhbmNlVG8oY2hpbGRXb3JsZFBvc2l0aW9uKVxuICAgICAgdGhpcy5jaGFpbkJvbmVzW2ldLmxlbmd0aCA9IGJzLmxlbmd0aFxuXG4gICAgICBzdW0gKz0gYnMubGVuZ3RoXG4gICAgfVxuXG4gICAgLy8gSWYgRW5kIFBvaW50IGV4aXN0cywgQ2FuIGNhbGN1bGF0ZSB0aGUgZmluYWwgYm9uZSdzIGxlbmd0aFxuICAgIGlmICh0aGlzLmVuZF9pZHggIT09IG51bGwgJiYgdGhpcy5lbmRfaWR4ID4gLTEpIHtcbiAgICAgIGJkID0gdGhpcy5jaGFpbkJvbmVzW2VuZF1cbiAgICAgIGJkLmxlbmd0aCA9IGJvbmVzW3RoaXMuZW5kX2lkeF0ud29ybGQucG9zaXRpb24uZGlzdGFuY2VUbyhib25lc1t0aGlzLmNoYWluQm9uZXNbZW5kXS5pbmRleF0ud29ybGQucG9zaXRpb24pXG4gICAgICBib25lc1t0aGlzLmNoYWluQm9uZXNbZW5kXS5pbmRleF0ubGVuZ3RoID0gYmQubGVuZ3RoXG4gICAgICBzdW0gKz0gYmQubGVuZ3RoXG4gICAgfSBlbHNlIGNvbnNvbGUud2FybignUmVjb21wdXRlIENoYWluIExlbiwgRW5kIEluZGV4IGlzIG1pc3NpbmcnKVxuXG4gICAgdGhpcy5sZW5ndGggPSBzdW1cbiAgICByZXR1cm4gdGhpc1xuICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVNYXBwZWRDb21wb25lbnQgfSBmcm9tICcuLi8uLi9lY3MvZnVuY3Rpb25zL0NvbXBvbmVudEZ1bmN0aW9ucydcbmltcG9ydCBQb3NlIGZyb20gJy4uL2NsYXNzZXMvUG9zZSdcbmltcG9ydCB7IENoYWluIH0gZnJvbSAnLi4vY2xhc3Nlcy9DaGFpbidcblxuZXhwb3J0IHR5cGUgUG9pbnREYXRhID0geyBpbmRleDogbnVtYmVyIH1cblxuZXhwb3J0IHR5cGUgSUtSaWdDb21wb25lbnRUeXBlID0ge1xuICB0cG9zZT86IFBvc2UgLy8gU3RhcnRpbmcgcG9zZSB0byBjYWxjdWxhdGUgdmFsdWVzIGZyb21cbiAgcG9zZT86IFBvc2UgLy8gV29ya2luZyBwb3NlIHRvIGFwcGx5IG1hdGggdG8gYW5kIGNvcHkgYmFjayB0byBib25lc1xuICBjaGFpbnM/OiBSZWNvcmQ8c3RyaW5nLCBDaGFpbj4gLy8gSUsgQ2hhaW5zXG4gIHBvaW50cz86IFJlY29yZDxzdHJpbmcsIFBvaW50RGF0YT4gLy8gSW5kaXZpZHVhbCBJSyBwb2ludHMgKGhhbmRzLCBoZWFkLCBmZWV0KVxufVxuXG5leHBvcnQgY29uc3QgSUtSaWdDb21wb25lbnQgPSBjcmVhdGVNYXBwZWRDb21wb25lbnQ8SUtSaWdDb21wb25lbnRUeXBlPignSUtSaWdDb21wb25lbnQnKVxuZXhwb3J0IGNvbnN0IElLUmlnVGFyZ2V0Q29tcG9uZW50ID0gY3JlYXRlTWFwcGVkQ29tcG9uZW50PElLUmlnQ29tcG9uZW50VHlwZT4oJ0lLUmlnVGFyZ2V0Q29tcG9uZW50JylcbiIsImV4cG9ydCBlbnVtIEFybWF0dXJlVHlwZSB7XG4gIE1JWEFNTyxcbiAgVFJFWFxufVxuIiwiaW1wb3J0IHsgQ2hhaW4gfSBmcm9tICcuLi9jbGFzc2VzL0NoYWluJ1xuaW1wb3J0IFBvc2UsIHsgUG9zZUJvbmVUcmFuc2Zvcm0gfSBmcm9tICcuLi9jbGFzc2VzL1Bvc2UnXG5pbXBvcnQgeyBRdWF0ZXJuaW9uLCBWZWN0b3IzIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBBeGlzIH0gZnJvbSAnLi4vY2xhc3Nlcy9BeGlzJ1xuaW1wb3J0IHsgY29zU1NTIH0gZnJvbSAnLi9JS0Z1bmN0aW9ucydcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gTXVsdGkgQm9uZSBTb2x2ZXJzXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmV4cG9ydCB0eXBlIElLU29sdmVyRnVuY3Rpb24gPSAoXG4gIGNoYWluOiBDaGFpbixcbiAgdHBvc2U6IFBvc2UsXG4gIHBvc2U6IFBvc2UsXG4gIGF4aXM6IEF4aXMsXG4gIGNMZW46IG51bWJlcixcbiAgcF93dDogUG9zZUJvbmVUcmFuc2Zvcm1cbikgPT4gdm9pZFxuXG5jb25zdCB0ZW1wUXVhdDEgPSBuZXcgUXVhdGVybmlvbigpXG5jb25zdCB0ZW1wUXVhdDIgPSBuZXcgUXVhdGVybmlvbigpXG5jb25zdCB0ZW1wUXVhdDMgPSBuZXcgUXVhdGVybmlvbigpXG5jb25zdCB0ZW1wVmVjMSA9IG5ldyBWZWN0b3IzKClcblxuLyoqXG4gKlxuICogQHBhcmFtIGNoYWluXG4gKiBAcGFyYW0gdHBvc2VcbiAqIEBwYXJhbSBwb3NlXG4gKiBAcGFyYW0gYXhpcyBJS1Bvc2UudGFyZ2V0LmF4aXNcbiAqIEBwYXJhbSBjTGVuIElLUG9zZS50YXJnZXQubGVuXG4gKiBAcGFyYW0gcF93dCBwYXJlbnQgd29ybGQgdHJhbnNmb3JtXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb2x2ZUxpbWIoY2hhaW46IENoYWluLCB0cG9zZTogUG9zZSwgcG9zZTogUG9zZSwgYXhpczogQXhpcywgY0xlbjogbnVtYmVyLCBwX3d0OiBQb3NlQm9uZVRyYW5zZm9ybSkge1xuICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG4gIC8vIFVzaW5nIGxhdyBvZiBjb3MgU1NTLCB3ZSBuZWVkIHRoZSBsZW5ndGggb2YgYWxsIHNpZGVzIG9mIHRoZSB0cmlhbmdsZVxuICBsZXQgYmluZEEgPSB0cG9zZS5ib25lc1tjaGFpbi5jaGFpbkJvbmVzWzBdLmluZGV4XSwgLy8gQm9uZSBSZWZlcmVuY2UgZnJvbSBCaW5kXG4gICAgYmluZEIgPSB0cG9zZS5ib25lc1tjaGFpbi5jaGFpbkJvbmVzWzFdLmluZGV4XSxcbiAgICBwb3NlQSA9IHBvc2UuYm9uZXNbY2hhaW4uY2hhaW5Cb25lc1swXS5pbmRleF0sIC8vIEJvbmUgUmVmZXJlbmNlIGZyb20gUG9zZVxuICAgIHBvc2VCID0gcG9zZS5ib25lc1tjaGFpbi5jaGFpbkJvbmVzWzFdLmluZGV4XSxcbiAgICBhTGVuID0gYmluZEEubGVuZ3RoLFxuICAgIGJMZW4gPSBiaW5kQi5sZW5ndGgsXG4gICAgcm90ID0gdGVtcFF1YXQxLFxuICAgIHJhZDogbnVtYmVyXG5cbiAgLy9+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flxuICAvLyBGSVJTVCBCT05FIC0gQWltIHRoZW4gcm90YXRlIGJ5IHRoZSBhbmdsZS5cbiAgX2FpbV9ib25lMihjaGFpbiwgdHBvc2UsIGF4aXMsIHBfd3QsIHJvdCkgLy8gQWltIHRoZSBmaXJzdCBib25lIHRvd2FyZCB0aGUgdGFyZ2V0IG9yaWVudGVkIHdpdGggdGhlIGJlbmQgZGlyZWN0aW9uLlxuXG4gIGNvbnN0IHJvdEFmdGVyQWltID0gdGVtcFF1YXQyLmNvcHkocm90KVxuICBjb25zdCBhY2JMZW4gPSB7IGFMZW4sIGNMZW4sIGJMZW4gfVxuXG4gIHJhZCA9IGNvc1NTUyhhTGVuLCBjTGVuLCBiTGVuKSAvLyBHZXQgdGhlIEFuZ2xlIGJldHdlZW4gRmlyc3QgQm9uZSBhbmQgVGFyZ2V0LlxuXG4gIGNvbnN0IGZpcnN0UmFkID0gcmFkXG5cbiAgcm90XG4gICAgLnByZW11bHRpcGx5KHRlbXBRdWF0My5zZXRGcm9tQXhpc0FuZ2xlKGF4aXMueCwgLXJhZCkpIC8vIFVzZSB0aGUgVGFyZ2V0J3MgWCBheGlzIGZvciByb3RhdGlvbiBhbG9uZyB3aXRoIHRoZSBhbmdsZSBmcm9tIFNTU1xuICAgIC5wcmVtdWx0aXBseSh0ZW1wUXVhdDMuY29weShwX3d0LnF1YXRlcm5pb24pLmludmVydCgpKSAvLyBDb252ZXJ0IHRvIEJvbmUncyBMb2NhbCBTcGFjZSBieSBtdWwgaW52ZXJ0IG9mIHBhcmVudCBib25lIHJvdGF0aW9uXG5cbiAgcG9zZS5zZXRCb25lKGJpbmRBLmlkeCwgcm90KSAvLyBTYXZlIHJlc3VsdCB0byBib25lLlxuICAvLyBVcGRhdGUgV29ybGQgRGF0YSBmb3IgZnV0dXJlIHVzZVxuXG4gIHBvc2VBLndvcmxkLnBvc2l0aW9uLmNvcHkocF93dC5wb3NpdGlvbilcbiAgcG9zZUEud29ybGQucXVhdGVybmlvbi5jb3B5KHBfd3QucXVhdGVybmlvbilcbiAgcG9zZUEud29ybGQuc2NhbGUuY29weShwX3d0LnNjYWxlKVxuICB0cmFuc2Zvcm1BZGQoXG4gICAgLy8gdHJhbnNmb3JtXG4gICAgcG9zZUEud29ybGQsXG4gICAgLy8gYWRkXG4gICAge1xuICAgICAgcXVhdGVybmlvbjogcm90LFxuICAgICAgcG9zaXRpb246IGJpbmRBLmxvY2FsLnBvc2l0aW9uLFxuICAgICAgc2NhbGU6IGJpbmRBLmxvY2FsLnNjYWxlXG4gICAgfVxuICApXG5cbiAgLy9+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flxuICAvLyBTRUNPTkQgQk9ORVxuICAvLyBOZWVkIHRvIHJvdGF0ZSBmcm9tIFJpZ2h0IHRvIExlZnQsIFNvIHRha2UgdGhlIGFuZ2xlIGFuZCBzdWJ0cmFjdCBpdCBmcm9tIDE4MCB0byByb3RhdGUgZnJvbVxuICAvLyB0aGUgb3RoZXIgZGlyZWN0aW9uLiBFeC4gTC0+UiA3MCBkZWdyZWVzID09IFItPkwgMTEwIGRlZ3JlZXNcbiAgcmFkID0gTWF0aC5QSSAtIGNvc1NTUyhhTGVuLCBiTGVuLCBjTGVuKVxuXG4gIHJvdFxuICAgIC5jb3B5KHBvc2VBLndvcmxkLnF1YXRlcm5pb24pXG4gICAgLm11bHRpcGx5KGJpbmRCLmxvY2FsLnF1YXRlcm5pb24pIC8vIEFkZCBCb25lIDIncyBMb2NhbCBCaW5kIFJvdGF0aW9uIHRvIEJvbmUgMSdzIG5ldyBXb3JsZCBSb3RhdGlvbi5cbiAgICAucHJlbXVsdGlwbHkodGVtcFF1YXQzLnNldEZyb21BeGlzQW5nbGUoYXhpcy54LCByYWQpKSAvLyBSb3RhdGUgaXQgYnkgdGhlIHRhcmdldCdzIHgtYXhpc1xuICAgIC5wcmVtdWx0aXBseSh0ZW1wUXVhdDMuY29weShwb3NlQS53b3JsZC5xdWF0ZXJuaW9uKS5pbnZlcnQoKSkgLy8gQ29udmVydCB0byBCb25lJ3MgTG9jYWwgU3BhY2VcblxuICBwb3NlLnNldEJvbmUoYmluZEIuaWR4LCByb3QpIC8vIFNhdmUgcmVzdWx0IHRvIGJvbmUuXG5cbiAgLy8gVXBkYXRlIFdvcmxkIERhdGEgZm9yIGZ1dHVyZSB1c2VcbiAgcG9zZUIud29ybGQucG9zaXRpb24uY29weShwb3NlQS53b3JsZC5wb3NpdGlvbilcbiAgcG9zZUIud29ybGQucXVhdGVybmlvbi5jb3B5KHBvc2VBLndvcmxkLnF1YXRlcm5pb24pXG4gIHBvc2VCLndvcmxkLnNjYWxlLmNvcHkocG9zZUEud29ybGQuc2NhbGUpXG4gIHRyYW5zZm9ybUFkZChcbiAgICAvLyB0cmFuc2Zvcm1cbiAgICBwb3NlQi53b3JsZCxcbiAgICAvLyBhZGRcbiAgICB7XG4gICAgICBxdWF0ZXJuaW9uOiByb3QsXG4gICAgICBwb3NpdGlvbjogYmluZEIubG9jYWwucG9zaXRpb24sXG4gICAgICBzY2FsZTogYmluZEIubG9jYWwuc2NhbGVcbiAgICB9XG4gIClcblxuICAvLyBUT0RPOiBCZWNhdXNlIG9mIHRoZSBxdWF0ZXJuaW9uIG9iamVjdCBwcm9wLCBpdCBpcyBiZXR0ZXIgdG9cbiAgLy8gQWNjZXB0IGFuIG91dHB1dCBvYmplY3QgcGFyYW1ldGVyIGluc3RlYWQgb2YgcmV0dXJuaW5nIG5ldyBvYmplY3RcbiAgLy8gYW5kIHB1c2ggdGhlIG9iamVjdCBjb25zdHJ1Y3Rpb24gdXAgdGhlIGNoYWluXG4gIHJldHVybiB7XG4gICAgcm90QWZ0ZXJBaW0sXG4gICAgYWNiTGVuLFxuICAgIGZpcnN0UmFkXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNvbHZlVGhyZWVCb25lKFxuICBjaGFpbjogQ2hhaW4sXG4gIHRwb3NlOiBQb3NlLFxuICBwb3NlOiBQb3NlLFxuICBheGlzOiBBeGlzLFxuICBjTGVuOiBudW1iZXIsXG4gIHBfd3Q6IFBvc2VCb25lVHJhbnNmb3JtXG4pIHtcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gR2V0IHRoZSBsZW5ndGggb2YgdGhlIGJvbmVzLCB0aGUgY2FsY3VsYXRlIHRoZSByYXRpbyBsZW5ndGggZm9yIHRoZSBib25lcyBiYXNlZCBvbiB0aGUgY2hhaW4gbGVuZ3RoXG4gIC8vIFRoZSAzIGJvbmVzIHdoZW4gcGxhY2VkIGluIGEgemlnLXphZyBwYXR0ZXJuIGNyZWF0ZXMgYSBQYXJhbGxlbG9ncmFtIHNoYXBlLiBXZSBjYW4gYnJlYWsgdGhlIHNoYXBlIGRvd24gaW50byB0d28gdHJpYW5nbGVzXG4gIC8vIEJ5IHVzaW5nIHRoZSByYXRpbyBvZiB0aGUgVGFyZ2V0IGxlbmd0aCBkaXZpZGVkIGJldHdlZW4gdGhlIDIgdHJpYW5nbGVzLCB0aGVuIHVzaW5nIHRoZSBmaXJzdCBib25lICsgaGFsZiBvZiB0aGUgc2Vjb25kIGJvdW5kXG4gIC8vIHRvIHNvbHZlIGZvciB0aGUgdG9wIDIgam9pbnRzLCB0aGVuIHVpbmcgdGhlIGhhbGYgb2YgdGhlIHNlY29uZCBib25lICsgM3JkIGJvbmUgdG8gc29sdmUgZm9yIHRoZSBib3R0b20gam9pbnQuXG4gIC8vIElmIGFsbCBib25lcyBhcmUgZXF1YWwgbGVuZ3RoLCAgdGhlbiB3ZSBvbmx5IG5lZWQgdG8gdXNlIGhhbGYgb2YgdGhlIHRhcmdldCBsZW5ndGggYW5kIG9ubHkgdGVzdCBvbmUgdHJpYW5nbGUgYW5kIHVzZSB0aGF0IGZvclxuICAvLyBib3RoIHRyaWFuZ2xlcywgYnV0IGlmIGJvbmVzIGFyZSB1bmV2ZW4sIHRoZW4gd2UgbmVlZCB0byBzb2x2ZSBhbiBhbmdsZSBmb3IgZWFjaCB0cmlhbmdsZSB3aGljaCB0aGlzIGZ1bmN0aW9uIGRvZXMuXG5cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgbGV0IGJpbmRfYSA9IHRwb3NlLmJvbmVzW2NoYWluLmNoYWluQm9uZXNbMF0uaW5kZXhdLCAvLyBCb25lIFJlZmVyZW5jZSBmcm9tIEJpbmRcbiAgICBiaW5kX2IgPSB0cG9zZS5ib25lc1tjaGFpbi5jaGFpbkJvbmVzWzFdLmluZGV4XSxcbiAgICBiaW5kX2MgPSB0cG9zZS5ib25lc1tjaGFpbi5jaGFpbkJvbmVzWzJdLmluZGV4XSxcbiAgICBwb3NlX2EgPSBwb3NlLmJvbmVzW2NoYWluLmNoYWluQm9uZXNbMF0uaW5kZXhdLCAvLyBCb25lIFJlZmVyZW5jZSBmcm9tIFBvc2VcbiAgICBwb3NlX2IgPSBwb3NlLmJvbmVzW2NoYWluLmNoYWluQm9uZXNbMV0uaW5kZXhdLFxuICAgIHBvc2VfYyA9IHBvc2UuYm9uZXNbY2hhaW4uY2hhaW5Cb25lc1syXS5pbmRleF0sXG4gICAgYV9sZW4gPSBiaW5kX2EubGVuZ3RoLCAvLyBGaXJzdCBCb25lIGxlbmd0aFxuICAgIGJfbGVuID0gYmluZF9iLmxlbmd0aCwgLy8gU2Vjb25kIEJvbmUgTGVuZ3RoXG4gICAgY19sZW4gPSBiaW5kX2MubGVuZ3RoLCAvLyBUaGlyZCBCb25lIExlbmd0aFxuICAgIGJoX2xlbiA9IGJpbmRfYi5sZW5ndGggKiAwLjUsIC8vIEhvdyBNdWNoIG9mIEJvbmUgMiB0byB1c2Ugd2l0aCBCb25lIDFcbiAgICB0X3JhdGlvID0gKGFfbGVuICsgYmhfbGVuKSAvIChhX2xlbiArIGJfbGVuICsgY19sZW4pLCAvLyBIb3cgbXVjaCB0byBzdWJkaXZpZGUgdGhlIFRhcmdldCBsZW5ndGggYmV0d2VlbiB0aGUgdHdvIHRyaWFuZ2xlc1xuICAgIHRhX2xlbiA9IGNMZW4gKiB0X3JhdGlvLCAvLyBHb2VzIHdpdGggQSAmIEJcbiAgICB0Yl9sZW4gPSBjTGVuIC0gdGFfbGVuLCAvLyBHb2VzIHdpdGggQiAmIENcbiAgICByb3QgPSBuZXcgUXVhdGVybmlvbigpLFxuICAgIHJhZFxuXG4gIC8vfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG4gIC8vIEJvbmUgQVxuICBfYWltX2JvbmUyKGNoYWluLCB0cG9zZSwgYXhpcywgcF93dCwgcm90KSAvLyBBaW0gdGhlIGZpcnN0IGJvbmUgdG93YXJkIHRoZSB0YXJnZXQgb3JpZW50ZWQgd2l0aCB0aGUgYmVuZCBkaXJlY3Rpb24uXG5cbiAgcmFkID0gY29zU1NTKGFfbGVuLCB0YV9sZW4sIGJoX2xlbikgLy8gR2V0IHRoZSBBbmdsZSBiZXR3ZWVuIEZpcnN0IEJvbmUgYW5kIFRhcmdldC5cbiAgcm90XG4gICAgLnByZW11bHRpcGx5KG5ldyBRdWF0ZXJuaW9uKCkuc2V0RnJvbUF4aXNBbmdsZShheGlzLngsIC1yYWQpKSAvLyBSb3RhdGUgdGhlIHRoZSBhaW1lZCBib25lIGJ5IHRoZSBhbmdsZSBmcm9tIFNTU1xuICAgIC5wcmVtdWx0aXBseShwX3d0LnF1YXRlcm5pb24uY2xvbmUoKS5pbnZlcnQoKSkgLy8gQ29udmVydCB0byBCb25lJ3MgTG9jYWwgU3BhY2UgYnkgbXVsIGludmVydCBvZiBwYXJlbnQgYm9uZSByb3RhdGlvblxuXG4gIHBvc2Uuc2V0Qm9uZShiaW5kX2EuaWR4LCByb3QpXG5cbiAgcG9zZV9hLndvcmxkLnBvc2l0aW9uLmNvcHkocF93dC5wb3NpdGlvbilcbiAgcG9zZV9hLndvcmxkLnF1YXRlcm5pb24uY29weShwX3d0LnF1YXRlcm5pb24pXG4gIHBvc2VfYS53b3JsZC5zY2FsZS5jb3B5KHBfd3Quc2NhbGUpXG5cbiAgdHJhbnNmb3JtQWRkKHBvc2VfYS53b3JsZCwgeyAuLi5iaW5kX2EubG9jYWwsIHF1YXRlcm5pb246IHJvdCB9KVxuXG4gIC8vfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG4gIC8vIEJvbmUgQlxuICByYWQgPSBNYXRoLlBJIC0gY29zU1NTKGFfbGVuLCBiaF9sZW4sIHRhX2xlbilcblxuICByb3RcbiAgICAuY29weShwb3NlX2Eud29ybGQucXVhdGVybmlvbilcbiAgICAubXVsdGlwbHkoYmluZF9iLmxvY2FsLnF1YXRlcm5pb24pIC8vIEFkZCBCb25lIExvY2FsIHRvIGdldCBpdHMgV1Mgcm90XG4gICAgLnByZW11bHRpcGx5KG5ldyBRdWF0ZXJuaW9uKCkuc2V0RnJvbUF4aXNBbmdsZShheGlzLngsIHJhZCkpIC8vIFJvdGF0ZSBpdCBieSB0aGUgdGFyZ2V0J3MgeC1heGlzIC5wbXVsKCB0bXAuZnJvbV9heGlzX2FuZ2xlKCB0aGlzLmF4aXMueCwgcmFkICkgKVxuICAgIC5wcmVtdWx0aXBseShwb3NlX2Eud29ybGQucXVhdGVybmlvbi5jbG9uZSgpLmludmVydCgpKSAvLyBDb252ZXJ0IHRvIExvY2FsIFNwYWNlIGluIHRlbXAgdG8gc2F2ZSBXUyByb3QgZm9yIG5leHQgYm9uZS5cblxuICBwb3NlLnNldEJvbmUoYmluZF9iLmlkeCwgcm90KVxuXG4gIHBvc2VfYi53b3JsZC5wb3NpdGlvbi5jb3B5KHBvc2VfYS53b3JsZC5wb3NpdGlvbilcbiAgcG9zZV9iLndvcmxkLnF1YXRlcm5pb24uY29weShwb3NlX2Eud29ybGQucXVhdGVybmlvbilcbiAgcG9zZV9iLndvcmxkLnNjYWxlLmNvcHkocG9zZV9hLndvcmxkLnNjYWxlKVxuXG4gIHRyYW5zZm9ybUFkZChwb3NlX2Iud29ybGQsIHsgLi4uYmluZF9iLmxvY2FsLCBxdWF0ZXJuaW9uOiByb3QgfSlcblxuICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flxuICAvLyBCb25lIENcbiAgcmFkID0gTWF0aC5QSSAtIGNvc1NTUyhjX2xlbiwgYmhfbGVuLCB0Yl9sZW4pXG4gIHJvdFxuICAgIC5jb3B5KHBvc2VfYi53b3JsZC5xdWF0ZXJuaW9uKVxuICAgIC5tdWx0aXBseShiaW5kX2MubG9jYWwucXVhdGVybmlvbikgLy8gU3RpbGwgY29udGFpbnMgV1MgZnJvbSBwcmV2aW91cyBib25lLCBBZGQgbmV4dCBib25lJ3MgbG9jYWxcbiAgICAucHJlbXVsdGlwbHkobmV3IFF1YXRlcm5pb24oKS5zZXRGcm9tQXhpc0FuZ2xlKGF4aXMueCwgLXJhZCkpIC8vIFJvdGF0ZSBpdCBieSB0aGUgdGFyZ2V0J3MgeC1heGlzXG4gICAgLnByZW11bHRpcGx5KHBvc2VfYi53b3JsZC5xdWF0ZXJuaW9uLmludmVydCgpKSAvLyBDb252ZXJ0IHRvIEJvbmUncyBMb2NhbCBTcGFjZVxuXG4gIHBvc2Uuc2V0Qm9uZShiaW5kX2MuaWR4LCByb3QpXG5cbiAgcG9zZV9jLndvcmxkLnBvc2l0aW9uLmNvcHkocG9zZV9iLndvcmxkLnBvc2l0aW9uKVxuICBwb3NlX2Mud29ybGQucXVhdGVybmlvbi5jb3B5KHBvc2VfYi53b3JsZC5xdWF0ZXJuaW9uKVxuICBwb3NlX2Mud29ybGQuc2NhbGUuY29weShwb3NlX2Iud29ybGQuc2NhbGUpXG5cbiAgdHJhbnNmb3JtQWRkKHBvc2VfYy53b3JsZCwgeyAuLi5iaW5kX2MubG9jYWwsIHF1YXRlcm5pb246IHJvdCB9KVxufVxuXG4vLyBDb21wdXRpbmcgVHJhbnNmb3JtcywgUGFyZW50IC0+IENoaWxkXG4vKipcbiAqXG4gKiBAcGFyYW0gdGFyZ2V0IHRhcmdldCB0cmFuc2Zvcm0gKHdpbGwgYmUgbW9kaWZpZWQpXG4gKiBAcGFyYW0gc291cmNlIHNvdXJjZSB0cmFuc2Zvcm1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybUFkZCh0YXJnZXQ6IFBvc2VCb25lVHJhbnNmb3JtLCBzb3VyY2U6IFBvc2VCb25lVHJhbnNmb3JtKSB7XG4gIC8vfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5cbiAgLy8gUE9TSVRJT04gLSBwYXJlbnQucG9zaXRpb24gKyAoIHBhcmVudC5yb3RhdGlvbiAqICggcGFyZW50LnNjYWxlICogY2hpbGQucG9zaXRpb24gKSApXG4gIC8vIHBvcy5hZGQoIFZlYzMubXVsKCB0aGlzLnNjbCwgY3AgKS50cmFuc2Zvcm1fcXVhdCggdGhpcy5yb3QgKSApO1xuICB0YXJnZXQucG9zaXRpb24uYWRkKHNvdXJjZS5wb3NpdGlvbi5jbG9uZSgpLm11bHRpcGx5KHRhcmdldC5zY2FsZSkuYXBwbHlRdWF0ZXJuaW9uKHRhcmdldC5xdWF0ZXJuaW9uKSlcblxuICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG4gIC8vIFNDQUxFIC0gcGFyZW50LnNjYWxlICogY2hpbGQuc2NhbGVcbiAgaWYgKHNvdXJjZS5zY2FsZSkgdGFyZ2V0LnNjYWxlLm11bHRpcGx5KHNvdXJjZS5zY2FsZSlcblxuICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG4gIC8vIFJPVEFUSU9OIC0gcGFyZW50LnJvdGF0aW9uICogY2hpbGQucm90YXRpb25cbiAgdGFyZ2V0LnF1YXRlcm5pb24ubXVsdGlwbHkoc291cmNlLnF1YXRlcm5pb24pXG59XG5cbi8vLy8gaGVscGVyc1xuXG5mdW5jdGlvbiBfYWltX2JvbmUyKGNoYWluOiBDaGFpbiwgdHBvc2U6IFBvc2UsIGF4aXM6IEF4aXMsIHBfd3Q6IFBvc2VCb25lVHJhbnNmb3JtLCBvdXQ6IFF1YXRlcm5pb24pIHtcbiAgY29uc3Qgcm90ID0gbmV3IFF1YXRlcm5pb24oKVxuICB0cG9zZS5ib25lc1tjaGFpbi5maXJzdCgpXS5ib25lLmdldFdvcmxkUXVhdGVybmlvbihyb3QpIC8vIEdldCBXb3JsZCBTcGFjZSBSb3RhdGlvbiBmb3IgQm9uZVxuICBjb25zdCBkaXIgPSBjaGFpbi5hbHRGb3J3YXJkLmNsb25lKCkuYXBwbHlRdWF0ZXJuaW9uKHJvdCkgLy8gR2V0IEJvbmUncyBXUyBGb3J3YXJkIERpclxuXG4gIC8vU3dpbmdcbiAgbGV0IHEgPSBuZXcgUXVhdGVybmlvbigpLnNldEZyb21Vbml0VmVjdG9ycyhkaXIsIGF4aXMueilcbiAgb3V0LmNvcHkocSkubXVsdGlwbHkocm90KVxuXG4gIC8vIFR3aXN0XG4gIC8vIGxldCB1X2RpciA9IGNoYWluLmFsdFVwLmNsb25lKCkuYXBwbHlRdWF0ZXJuaW9uKG91dClcbiAgLy8gbGV0IHR3aXN0eCA9IHVfZGlyLmFuZ2xlVG8oYXhpcy55KVxuICAvL0FwcC5EZWJ1Zy5sbiggY3QucG9zLCBWZWMzLmFkZCggY3QucG9zLCB1X2RpciksIFwid2hpdGVcIiApO1xuXG4gIGRpci5jb3B5KGNoYWluLmFsdFVwKS5hcHBseVF1YXRlcm5pb24ob3V0KSAvLyBBZnRlciBTd2luZywgV2hhdHMgdGhlIFVQIERpcmVjdGlvblxuICBsZXQgdHdpc3QgPSBkaXIuYW5nbGVUbyhheGlzLnkpIC8vIEdldCBkaWZmZXJlbmNlIGJldHdlZW4gU3dpbmcgVXAgYW5kIFRhcmdldCBVcFxuXG4gIGlmICh0d2lzdCA8PSAwLjAwMDE3NDUzMjkyKSB0d2lzdCA9IDBcbiAgZWxzZSB7XG4gICAgLy9sZXQgbF9kaXIgIFx0PSBWZWMzLmNyb3NzKCBkaXIsIHRoaXMuYXhpcy56ICk7XG4gICAgZGlyLmNyb3NzVmVjdG9ycyhkaXIsIGF4aXMueikgLy8gR2V0IFN3aW5nIExFRlQsIHVzZWQgdG8gdGVzdCBpZiB0d2lzdCBpcyBvbiB0aGUgbmVnYXRpdmUgc2lkZS5cbiAgICAvL0FwcC5EZWJ1Zy5sbiggY3QucG9zLCBWZWMzLmFkZCggY3QucG9zLCBsX2RpciksIFwiYmxhY2tcIiApO1xuXG4gICAgaWYgKGRpci5kb3QoYXhpcy55KSA+PSAwKSB0d2lzdCA9IC10d2lzdFxuICB9XG5cbiAgb3V0LnByZW11bHRpcGx5KG5ldyBRdWF0ZXJuaW9uKCkuc2V0RnJvbUF4aXNBbmdsZShheGlzLnosIHR3aXN0KSkgLy8gQXBwbHkgVHdpc3Rcbn1cbiIsIi8vIFJlZmVyZW5jZXM6XG4vLyBodHRwczovL3lvdXR1LmJlL09NbVhvM0planhrXG4vLyBodHRwczovL2dpdGh1Yi5jb20vc2tldGNocHVuay9GdW5XaXRoV2ViR0wyL3RyZWUvbWFzdGVyL2xlc3Nvbl8xMzdfaWtfcmlnc1xuXG4vLyBAdHMtbm9jaGVja1xuaW1wb3J0IHsgSUtSaWdDb21wb25lbnRUeXBlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9JS1JpZ0NvbXBvbmVudCdcbmltcG9ydCB7IEJvbmUsIE9iamVjdDNELCBRdWF0ZXJuaW9uLCBWZWN0b3IzLCBNYXRyaXg0IH0gZnJvbSAndGhyZWUnXG5pbXBvcnQge1xuICBJS1Bvc2VDb21wb25lbnQsXG4gIElLUG9zZUNvbXBvbmVudFR5cGUsXG4gIElLUG9zZUxpbWJEYXRhLFxuICBJS1Bvc2VMb29rVHdpc3QsXG4gIElLUG9zZVNwaW5lRGF0YVxufSBmcm9tICcuLi9jb21wb25lbnRzL0lLUG9zZUNvbXBvbmVudCdcbmltcG9ydCB7IEJBQ0ssIERPV04sIFVQLCBGT1JXQVJELCBMRUZULCBSSUdIVCB9IGZyb20gJy4uLy4uL2lrcmlnL2NvbnN0YW50cy9WZWN0b3IzQ29uc3RhbnRzJ1xuaW1wb3J0IHsgYWRkQ2hhaW4sIGFkZFBvaW50IH0gZnJvbSAnLi9SaWdGdW5jdGlvbnMnXG5pbXBvcnQgUG9zZSwgeyBQb3NlQm9uZUxvY2FsU3RhdGUgfSBmcm9tICcuLi9jbGFzc2VzL1Bvc2UnXG5pbXBvcnQgeyBDaGFpbiB9IGZyb20gJy4uL2NsYXNzZXMvQ2hhaW4nXG5pbXBvcnQgeyBzb2x2ZVRocmVlQm9uZSB9IGZyb20gJy4vSUtTb2x2ZXJzJ1xuXG5jb25zdCB0ZW1wTWF0ID0gbmV3IE1hdHJpeDQoKVxuY29uc3QgdGVtcFF1YXQxID0gbmV3IFF1YXRlcm5pb24oKVxuY29uc3QgdGVtcFF1YXQyID0gbmV3IFF1YXRlcm5pb24oKVxuY29uc3QgdGVtcFZlYzEgPSBuZXcgVmVjdG9yMygpXG5jb25zdCB0ZW1wVmVjMiA9IG5ldyBWZWN0b3IzKClcbmNvbnN0IHRlbXBWZWMzID0gbmV3IFZlY3RvcjMoKVxuY29uc3QgdGVtcFZlYzQgPSBuZXcgVmVjdG9yMygpXG5cbi8qKlxuICogVXNlZCB3aGVuIHdlIGtub3cgdGhyZWUgc2lkZXMgb2YgdGhlIHRyaWFuZ2xlLCBhbmQgd2FudCB0byBmaW5kIHRoZSBtaXNzaW5nIGFuZ2xlLlxuICogY29zKEMpID0gKGFeMiArIGJeMiAtIGNeMikgLyAyYWJcbiAqIEBwYXJhbSBhTGVuIExlbmd0aCBvZiBzaWRlIGFcbiAqIEBwYXJhbSBiTGVuIExlbmd0aCBvZiBzaWRlIGJcbiAqIEBwYXJhbSBjTGVuIExlbmd0aCBvZiBzaWRlIGNcbiAqIEByZXR1cm5zIEFuZ2xlIEMgaW4gcmFkaWFuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY29zU1NTKGFMZW46IG51bWJlciwgYkxlbjogbnVtYmVyLCBjTGVuOiBudW1iZXIpOiBudW1iZXIge1xuICAvLyBUaGUgQW5nbGUgYmV0d2VlbiBBIGFuZCBCIHdpdGggQyBiZWluZyB0aGUgb3Bwb3NpdGUgbGVuZ3RoIG9mIHRoZSBhbmdsZS5cbiAgbGV0IHYgPSAoYUxlbiAqIGFMZW4gKyBiTGVuICogYkxlbiAtIGNMZW4gKiBjTGVuKSAvICgyICogYUxlbiAqIGJMZW4pXG4gIGlmICh2IDwgLTEpIHYgPSAtMVxuICAvLyBDbGFtcCB0byBwcmV2ZW50IE5hTiBFcnJvcnNcbiAgZWxzZSBpZiAodiA+IDEpIHYgPSAxXG4gIHJldHVybiBNYXRoLmFjb3Modilcbn1cblxuLyoqXG4gKiBBdXRvIFNldHVwIHRoZSBQb2ludHMgYW5kIENoYWlucyBiYXNlZCBvbiBLbm93biBTa2VsZXRvbiBTdHJ1Y3R1cmVzLlxuICogQHBhcmFtIHJpZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBNaXhhbW9JS1JpZyhyaWc6IElLUmlnQ29tcG9uZW50VHlwZSk6IHZvaWQge1xuICByaWcucG9pbnRzID0ge31cbiAgcmlnLmNoYWlucyA9IHt9XG5cbiAgYWRkUG9pbnQocmlnLCAnaGlwJywgJ0hpcHMnKVxuICBhZGRQb2ludChyaWcsICdoZWFkJywgJ0hlYWQnKVxuICBhZGRQb2ludChyaWcsICduZWNrJywgJ05lY2snKVxuICBhZGRQb2ludChyaWcsICdjaGVzdCcsICdTcGluZTInKVxuICBhZGRQb2ludChyaWcsICdmb290X2wnLCAnTGVmdEZvb3QnKVxuICBhZGRQb2ludChyaWcsICdmb290X3InLCAnUmlnaHRGb290JylcbiAgYWRkQ2hhaW4ocmlnLCAnYXJtX3InLCBbJ1JpZ2h0QXJtJywgJ1JpZ2h0Rm9yZUFybSddLCAnUmlnaHRIYW5kJykgLy9cInhcIixcbiAgYWRkQ2hhaW4ocmlnLCAnYXJtX2wnLCBbJ0xlZnRBcm0nLCAnTGVmdEZvcmVBcm0nXSwgJ0xlZnRIYW5kJykgLy9cInhcIixcbiAgYWRkQ2hhaW4ocmlnLCAnbGVnX3InLCBbJ1JpZ2h0VXBMZWcnLCAnUmlnaHRMZWcnXSwgJ1JpZ2h0Rm9vdCcpIC8vXCJ6XCIsXG4gIGFkZENoYWluKHJpZywgJ2xlZ19sJywgWydMZWZ0VXBMZWcnLCAnTGVmdExlZyddLCAnTGVmdEZvb3QnKSAvL1wielwiLFxuICBhZGRDaGFpbihyaWcsICdzcGluZScsIFsnU3BpbmUnLCAnU3BpbmUxJywgJ1NwaW5lMiddKSAvLywgXCJ5XCJcblxuICByaWcuY2hhaW5zLmxlZ19sLmNvbXB1dGVMZW5ndGhGcm9tQm9uZXMocmlnLnRwb3NlLmJvbmVzKVxuICByaWcuY2hhaW5zLmxlZ19yLmNvbXB1dGVMZW5ndGhGcm9tQm9uZXMocmlnLnRwb3NlLmJvbmVzKVxuICByaWcuY2hhaW5zLmFybV9sLmNvbXB1dGVMZW5ndGhGcm9tQm9uZXMocmlnLnRwb3NlLmJvbmVzKVxuICByaWcuY2hhaW5zLmFybV9yLmNvbXB1dGVMZW5ndGhGcm9tQm9uZXMocmlnLnRwb3NlLmJvbmVzKVxuICByaWcuY2hhaW5zLmxlZ19sLnNldE9mZnNldHMoRE9XTiwgRk9SV0FSRCwgcmlnLnRwb3NlKVxuICByaWcuY2hhaW5zLmxlZ19yLnNldE9mZnNldHMoRE9XTiwgRk9SV0FSRCwgcmlnLnRwb3NlKVxuICByaWcuY2hhaW5zLmFybV9yLnNldE9mZnNldHMoUklHSFQsIEJBQ0ssIHJpZy50cG9zZSlcbiAgcmlnLmNoYWlucy5hcm1fbC5zZXRPZmZzZXRzKExFRlQsIEJBQ0ssIHJpZy50cG9zZSlcbn1cblxuLyoqXG4gKiBBdXRvIFNldHVwIHRoZSBQb2ludHMgYW5kIENoYWlucyBiYXNlZCBvbiBLbm93biBTa2VsZXRvbiBTdHJ1Y3R1cmVzLlxuICogQHBhcmFtIHJpZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBUUmV4SUtSaWcocmlnOiBJS1JpZ0NvbXBvbmVudFR5cGUpOiB2b2lkIHtcbiAgcmlnLnBvaW50cyA9IHt9XG4gIHJpZy5jaGFpbnMgPSB7fVxuICAvLyBUT0RPOkZpeFxuXG4gIGFkZFBvaW50KHJpZywgJ2hpcCcsICdoaXAnKVxuICBhZGRQb2ludChyaWcsICdoZWFkJywgJ2ZhY2Vfam9pbnQnKVxuICBhZGRQb2ludChyaWcsICdmb290X2wnLCAnTGVmdEZvb3QnKVxuICBhZGRQb2ludChyaWcsICdmb290X3InLCAnUmlnaHRGb290JylcblxuICBhZGRQb2ludChyaWcsICd3aW5nX2wnLCAnbGVmdF93aW5nJylcbiAgYWRkUG9pbnQocmlnLCAnd2luZ19yJywgJ3JpZ2h0X3dpbmcnKVxuXG4gIGFkZENoYWluKHJpZywgJ2xlZ19yJywgWydSaWdodFVwTGVnJywgJ1JpZ2h0S25lZScsICdSaWdodFNoaW4nXSwgJ1JpZ2h0Rm9vdCcsIHNvbHZlVGhyZWVCb25lKVxuICBhZGRDaGFpbihyaWcsICdsZWdfbCcsIFsnTGVmdFVwTGVnJywgJ0xlZnRLbmVlJywgJ0xlZnRTaGluJ10sICdMZWZ0Rm9vdCcsIHNvbHZlVGhyZWVCb25lKVxuICBhZGRDaGFpbihyaWcsICdzcGluZScsIFsnU3BpbmUnLCAnU3BpbmUxJ10pXG4gIGFkZENoYWluKHJpZywgJ3RhaWwnLCBbJ3RhaWxfMScsICd0YWlsXzInLCAndGFpbF8zJywgJ3RhaWxfNCcsICd0YWlsXzUnLCAndGFpbF82JywgJ3RhaWxfNyddKVxuICAvLyBUT0RPOiBjcmVhdGUgc2V0X2xlZ19sbXQgYW5kIGFwcGx5P1xuICAvLyBzZXRfbGVnX2xtdChlbnRpdHksIG51bGwsIC0wLjEgKVxuXG4gIHJpZy5jaGFpbnMubGVnX2wuY29tcHV0ZUxlbmd0aEZyb21Cb25lcyhyaWcudHBvc2UuYm9uZXMpXG4gIHJpZy5jaGFpbnMubGVnX3IuY29tcHV0ZUxlbmd0aEZyb21Cb25lcyhyaWcudHBvc2UuYm9uZXMpXG4gIHJpZy5jaGFpbnMubGVnX2wuc2V0T2Zmc2V0cyhET1dOLCBGT1JXQVJELCByaWcudHBvc2UpXG4gIHJpZy5jaGFpbnMubGVnX3Iuc2V0T2Zmc2V0cyhET1dOLCBGT1JXQVJELCByaWcudHBvc2UpXG59XG5cbi8qKlxuICogQ29tcHV0ZSB0aGUgSUsgcG9zZSBiYXNlZCBvbiB0aGUgb3JpZ2luYWwgcG9zZVxuICogQHBhcmFtIHJpZ1xuICogQHBhcmFtIGlrUG9zZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZUlLUG9zZShyaWc6IElLUmlnQ29tcG9uZW50VHlwZSwgaWtQb3NlOiBJS1Bvc2VDb21wb25lbnRUeXBlKTogdm9pZCB7XG4gIHVwZGF0ZVBvc2VCb25lc0Zyb21Ta2VsZXRvbihyaWcpXG5cbiAgY29tcHV0ZUhpcChyaWcsIGlrUG9zZSlcblxuICBjb21wdXRlTGltYihyaWcucG9zZSwgcmlnLmNoYWlucy5sZWdfbCwgaWtQb3NlLmxlZ19sKVxuICBjb21wdXRlTGltYihyaWcucG9zZSwgcmlnLmNoYWlucy5sZWdfciwgaWtQb3NlLmxlZ19yKVxuXG4gIGNvbXB1dGVMb29rVHdpc3QocmlnLCByaWcucG9pbnRzLmZvb3RfbCwgaWtQb3NlLmZvb3RfbCwgRk9SV0FSRCwgVVApIC8vIExvb2sgPSBGd2QsIFR3aXN0ID0gVXBcbiAgY29tcHV0ZUxvb2tUd2lzdChyaWcsIHJpZy5wb2ludHMuZm9vdF9yLCBpa1Bvc2UuZm9vdF9yLCBGT1JXQVJELCBVUClcblxuICBjb21wdXRlU3BpbmUocmlnLCByaWcuY2hhaW5zLnNwaW5lLCBpa1Bvc2UsIFVQLCBGT1JXQVJEKVxuXG4gIGNvbXB1dGVMaW1iKHJpZy5wb3NlLCByaWcuY2hhaW5zLmFybV9sLCBpa1Bvc2UuYXJtX2wpXG4gIGNvbXB1dGVMaW1iKHJpZy5wb3NlLCByaWcuY2hhaW5zLmFybV9yLCBpa1Bvc2UuYXJtX3IpXG5cbiAgY29tcHV0ZUxvb2tUd2lzdChyaWcsIHJpZy5wb2ludHMuaGVhZCwgaWtQb3NlLmhlYWQsIEZPUldBUkQsIFVQKVxufVxuXG5jb25zdCBza2VsZXRvblRyYW5zZm9ybSA9IHtcbiAgcG9zaXRpb246IG5ldyBWZWN0b3IzKCksXG4gIHF1YXRlcm5pb246IG5ldyBRdWF0ZXJuaW9uKCksXG4gIGludlF1YXRlcm5pb246IG5ldyBRdWF0ZXJuaW9uKCksXG4gIHNjYWxlOiBuZXcgVmVjdG9yMygpLFxuXG4gIHJlc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5wb3NpdGlvbi5zZXRTY2FsYXIoMClcbiAgICB0aGlzLnF1YXRlcm5pb24uaWRlbnRpdHkoKVxuICAgIHRoaXMuaW52UXVhdGVybmlvbi5pZGVudGl0eSgpXG4gICAgdGhpcy5zY2FsZS5zZXRTY2FsYXIoMClcbiAgfVxufVxuXG4vKipcbiAqIFVwZGF0ZSBwb3NlIGJvbmVzIGZyb20gYW5pbWF0ZWQgc2tlbGV0b24gYm9uZXNcbiAqIEBwYXJhbSByaWdcbiAqL1xuZnVuY3Rpb24gdXBkYXRlUG9zZUJvbmVzRnJvbVNrZWxldG9uKHJpZzogSUtSaWdDb21wb25lbnRUeXBlKTogdm9pZCB7XG4gIHNrZWxldG9uVHJhbnNmb3JtLnJlc2V0KClcblxuICBjb25zdCByb290Qm9uZSA9IHJpZy5wb3NlLnNrZWxldG9uLmJvbmVzLmZpbmQoKGIpID0+ICEoYi5wYXJlbnQgaW5zdGFuY2VvZiBCb25lKSlcblxuICBpZiAocm9vdEJvbmUucGFyZW50KSB7XG4gICAgcm9vdEJvbmUucGFyZW50LmdldFdvcmxkUG9zaXRpb24oc2tlbGV0b25UcmFuc2Zvcm0ucG9zaXRpb24pXG4gICAgcm9vdEJvbmUucGFyZW50LmdldFdvcmxkUXVhdGVybmlvbihza2VsZXRvblRyYW5zZm9ybS5xdWF0ZXJuaW9uKVxuICAgIHJvb3RCb25lLnBhcmVudC5nZXRXb3JsZFNjYWxlKHNrZWxldG9uVHJhbnNmb3JtLnNjYWxlKVxuICAgIHNrZWxldG9uVHJhbnNmb3JtLmludlF1YXRlcm5pb24uY29weShza2VsZXRvblRyYW5zZm9ybS5xdWF0ZXJuaW9uKS5pbnZlcnQoKVxuICB9XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByaWcucG9zZS5za2VsZXRvbi5ib25lcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGJvbmUgPSByaWcucG9zZS5za2VsZXRvbi5ib25lc1tpXVxuICAgIGNvbnN0IHBvc2UgPSByaWcucG9zZS5ib25lc1tpXVxuXG4gICAgYm9uZS5nZXRXb3JsZFBvc2l0aW9uKHBvc2Uud29ybGQucG9zaXRpb24pXG4gICAgYm9uZS5nZXRXb3JsZFF1YXRlcm5pb24ocG9zZS53b3JsZC5xdWF0ZXJuaW9uKVxuICAgIGJvbmUuZ2V0V29ybGRTY2FsZShwb3NlLndvcmxkLnNjYWxlKVxuXG4gICAgd29ybGRUb01vZGVsKHBvc2Uud29ybGQucG9zaXRpb24sIHBvc2Uud29ybGQucXVhdGVybmlvbiwgcG9zZS53b3JsZC5zY2FsZSwgc2tlbGV0b25UcmFuc2Zvcm0pXG5cbiAgICBwb3NlLmxvY2FsLnBvc2l0aW9uLmNvcHkoYm9uZS5wb3NpdGlvbilcbiAgICBwb3NlLmxvY2FsLnF1YXRlcm5pb24uY29weShib25lLnF1YXRlcm5pb24pXG4gICAgcG9zZS5sb2NhbC5zY2FsZS5jb3B5KGJvbmUuc2NhbGUpXG4gIH1cbn1cblxuLyoqXG4gKiBDb21wdXRlcyBIaXAgSUsgYW5kIHN0b3JlcyBpdCBpbiB0aGUgaWtQb3NlXG4gKiBAcGFyYW0gcmlnIFNrZWxldG9uIHJpZyBkYXRhXG4gKiBAcGFyYW0gaWtQb3NlIFBvc2UgdG8gc2F2ZSBjb21wdXRlZCBkYXRhIGludG9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVIaXAocmlnOiBJS1JpZ0NvbXBvbmVudFR5cGUsIGlrUG9zZTogSUtQb3NlQ29tcG9uZW50VHlwZSkge1xuICAvLyBGaXJzdCB0aGluZyB3ZSBuZWVkIGlzIHRoZSBIaXAgYm9uZSBmcm9tIHRoZSBBbmltYXRlZCBQb3NlXG4gIC8vIFBsdXMgd2hhdCB0aGUgaGlwJ3MgQmluZCBQb3NlIGFzIHdlbGwuXG4gIC8vIFdlIHVzZSB0aGVzZSB0d28gc3RhdGVzIHRvIGRldGVybWluZSB3aGF0IGNoYW5nZSB0aGUgYW5pbWF0aW9uIGRpZCB0byB0aGUgdHBvc2UuXG5cbiAgY29uc3QgYm9uZUluZm8gPSByaWcucG9pbnRzLmhpcCwgLy8gUmlnIEhpcCBJbmZvXG4gICAgcG9zZUJvbmVJbmZvID0gcmlnLnBvc2UuYm9uZXNbYm9uZUluZm8uaW5kZXhdLCAvLyBBbmltYXRlZCBQb3NlIEJvbmVcbiAgICBiaW5kQm9uZUluZm8gPSByaWcudHBvc2UuYm9uZXNbYm9uZUluZm8uaW5kZXhdIC8vIFRQb3NlIEJvbmVcblxuICAvLyBMZXRzIGNyZWF0ZSB0aGUgUXVhdGVybmlvbiBJbnZlcnNlIERpcmVjdGlvbiBiYXNlZCBvbiB0aGVcbiAgLy8gVEJvbmUncyBXb3JsZCBTcGFjZSByb3RhdGlvbi4gV2UgZG9uJ3QgcmVhbGx5IGtub3cgdGhlIG9yaWVudGF0aW9uXG4gIC8vIG9mIHRoZSBib25lJ3Mgc3RhcnRpbmcgcm90YXRpb24gYW5kIG91ciB0YXJnZXRzIHdpbGwgaGF2ZSB0aGVpciBvd25cbiAgLy8gb3JpZW50YXRpb24sIHNvIGJ5IGRvaW5nIHRoaXMgd2UgY2FuIGVhc2lseSBzYXkgbm8gbWF0dGVyIHdoYXQgdGhlXG4gIC8vIGRlZmF1bHQgZGlyZWN0aW9uIG9mIHRoZSBoaXAsIHdlIHdhbnQgdG8gc2F5IGFsbCBoaXBzIGJvbmVzIHBvaW50XG4gIC8vIGF0IHRoZSBGT1JXQVJEIGF4aXMgYW5kIHRoZSB0YWlsIG9mIHRoZSBib25lIHBvaW50cyBVUC5cblxuICBjb25zdCBxdWF0SW52ZXJzZSA9IGJpbmRCb25lSW5mby53b3JsZC5pbnZRdWF0ZXJuaW9uXG4gIGNvbnN0IGFsdEZvcndhcmQgPSB0ZW1wVmVjMS5jb3B5KEZPUldBUkQpLmFwcGx5UXVhdGVybmlvbihxdWF0SW52ZXJzZSlcbiAgY29uc3QgYWx0VXAgPSB0ZW1wVmVjMi5jb3B5KFVQKS5hcHBseVF1YXRlcm5pb24ocXVhdEludmVyc2UpXG4gIGNvbnN0IHBvc2VGb3J3YXJkID0gdGVtcFZlYzMuY29weShhbHRGb3J3YXJkKS5hcHBseVF1YXRlcm5pb24ocG9zZUJvbmVJbmZvLndvcmxkLnF1YXRlcm5pb24pXG4gIGNvbnN0IHBvc2VVcCA9IHRlbXBWZWM0LmNvcHkoYWx0VXApLmFwcGx5UXVhdGVybmlvbihwb3NlQm9uZUluZm8ud29ybGQucXVhdGVybmlvbilcblxuICAvLyBXaXRoIG91ciBkaXJlY3Rpb25zIGtub3duIGJldHdlZW4gb3VyIFRQb3NlIGFuZCBBbmltYXRlZCBQb3NlLCBOZXh0IHdlXG4gIC8vIHN0YXJ0IHRvIGNhbGN1bGF0ZSB0aGUgU3dpbmcgYW5kIFR3aXN0IFZhbHVlcyB0byBzd2luZyBvdXIgVFBvc2UgaW50b1xuICAvLyBUaGUgYW5pbWF0aW9uIGRpcmVjdGlvblxuXG4gIGNvbnN0IGJpbmRGd2QgPSB0ZW1wVmVjMS5jb3B5KEZPUldBUkQpLmFwcGx5UXVhdGVybmlvbihiaW5kQm9uZUluZm8ud29ybGQucXVhdGVybmlvbilcblxuICBjb25zdCBzd2luZyA9IHRlbXBRdWF0MVxuICAgIC5zZXRGcm9tVW5pdFZlY3RvcnMoYmluZEZ3ZCwgcG9zZUZvcndhcmQpIC8vIEZpcnN0IHdlIGNyZWF0ZSBhIHN3aW5nIHJvdGF0aW9uIGZyb20gb25lIGRpciB0byB0aGUgb3RoZXIuXG4gICAgLm11bHRpcGx5KGJpbmRCb25lSW5mby53b3JsZC5xdWF0ZXJuaW9uKSAvLyBUaGVuIHdlIGFwcGx5IGl0IHRvIHRoZSBUQm9uZSBSb3RhdGlvbiwgdGhpcyB3aWxsIGRvIGEgRldEIFN3aW5nIHdoaWNoIHdpbGwgY3JlYXRlXG5cbiAgLy8gQSBuZXcgVXAgZGlyZWN0aW9uIGJhc2VkIG9uIG9ubHkgc3dpbmcuXG4gIGNvbnN0IHN3aW5nVXAgPSB0ZW1wVmVjMi5jb3B5KFVQKS5hcHBseVF1YXRlcm5pb24oc3dpbmcpXG4gIGxldCB0d2lzdCA9IHN3aW5nVXAuYW5nbGVUbyhwb3NlVXApIC8vIFN3aW5nICsgUG9zZSBoYXZlIHNhbWUgRndkLCBVc2UgQW5nbGUgYmV0d2VlbiBib3RoIFVQcyBmb3IgdHdpc3RcblxuICAvLyBUaGUgZGlmZmVyZW5jZSBiZXR3ZWVuIFBvc2UgVVAgYW5kIFN3aW5nIFVQIGlzIHdoYXQgbWFrZXMgdXAgb3VyIHR3aXN0IHNpbmNlIHRoZXkgYm90aFxuICAvLyBzaGFyZSB0aGUgc2FtZSBmb3J3YXJkIGFjY2Vzcy4gVGhlIGlzc3VlIGlzIHRoYXQgd2UgZG8gbm90IGtub3cgaWYgdGhhdCB0d2lzdCBpcyBpbiB0aGUgTmVnYXRpdmUgZGlyZWN0aW9uXG4gIC8vIG9yIHBvc2l0aXZlLiBTbyBieSBjb21wdXRpbmcgdGhlIFN3aW5nIExlZnQgRGlyZWN0aW9uLCB3ZSBjYW4gdXNlIHRoZSBEb3QgUHJvZHVjdCB0byBkZXRlcm1pbmVcbiAgLy8gaWYgc3dpbmcgVVAgaXMgT3ZlciA5MCBEZWdyZWVzLCBpZiBzbyB0aGVuIGl0cyBhIHBvc2l0aXZlIHR3aXN0IGVsc2UgaXRzIG5lZ2F0aXZlLlxuICBjb25zdCBkb3QgPSBzd2luZ1VwLmNyb3NzKHBvc2VGb3J3YXJkKS5kb3QocG9zZVVwKVxuICBpZiAoZG90ID49IDApIHR3aXN0ID0gLXR3aXN0XG5cbiAgLy8gU2F2ZSBhbGwgdGhlIGluZm8gd2UgbmVlZCB0byBvdXIgSUsgUG9zZS5cbiAgaWtQb3NlLmhpcC5iaW5kX2hlaWdodCA9IGJpbmRCb25lSW5mby5sb2NhbC5wb3NpdGlvbi55IC8vIFRoZSBCaW5kIFBvc2UgSGVpZ2h0IG9mIHRoZSBIaXAsIEhlbHBzIHdpdGggc2NhbGluZy5cbiAgaWtQb3NlLmhpcC5tb3ZlbWVudC5jb3B5KHBvc2VCb25lSW5mby53b3JsZC5wb3NpdGlvbikuc3ViKGJpbmRCb25lSW5mby53b3JsZC5wb3NpdGlvbikgLy8gSG93IG11Y2ggbW92ZW1lbnQgZGlkIHRoZSBoaXAgZG8gYmV0d2VlbiBCaW5kIGFuZCBBbmltYXRlZC5cbiAgaWtQb3NlLmhpcC5kaXIuY29weShwb3NlRm9yd2FyZCkgLy8gUG9zZSBGb3J3YXJkIGlzIHRoZSBkaXJlY3Rpb24gd2Ugd2FudCB0aGUgSGlwIHRvIFBvaW50IHRvLlxuICBpa1Bvc2UuaGlwLnR3aXN0ID0gdHdpc3QgLy8gSG93IE11Y2ggVHdpc3RpbmcgdG8gQXBwbHkgYWZ0ZXIgcG9pbnRpbmcgaW4gdGhlIGNvcnJlY3QgZGlyZWN0aW9uLlxufVxuXG4vKipcbiAqIENvbXB1dGVzIExpbWJzIElLXG4gKiBAcGFyYW0gcG9zZVxuICogQHBhcmFtIGNoYWluXG4gKiBAcGFyYW0gaWtMaW1iXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlTGltYihwb3NlOiBQb3NlLCBjaGFpbjogQ2hhaW4sIGlrTGltYikge1xuICAvLyBMaW1iIElLIHRlbmRzIHRvIGJlIGZhaXJseSBlYXN5IHRvIGRldGVybWluZS4gV2hhdCB5b3UgbmVlZCBpcyB0aGUgZGlyZWN0aW9uIHRoZSBlbmQgZWZmZWN0b3IgaXMgaW5cbiAgLy8gcmVsYXRpb24gdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgbGltYiBjaGFpbiwgbGlrZSB0aGUgU2hvdWxkZXIgZm9yIGFuIGFybSBjaGFpbi4gQWZ0ZXIgeW91IGhhdmUgdGhlXG4gIC8vIGRpcmVjdGlvbiwgeW91IGNhbiB1c2UgaXQgdG8gZ2V0IHRoZSBkaXN0YW5jZS4gRGlzdGFuY2UgaXMgaW1wb3J0YW50IHRvIGNyZWF0ZSBhIHNjYWxlIHZhbHVlIGJhc2VkIG9uXG4gIC8vIHRoZSBsZW5ndGggb2YgdGhlIGNoYWluLiBTaW5jZSBhbiBhcm0gb3IgbGVnJ3MgbGVuZ3RoIGNhbiB2YXJ5IGJldHdlZW4gbW9kZWxzLCBpZiB5b3Ugbm9ybWFsaXplIHRoZVxuICAvLyBkaXN0YW5jZSwgaXQgYmVjb21lcyBlYXN5IHRvIHRyYW5zbGF0ZSBpdCB0byBvdGhlciBtb2RlbHMuIFRoZSBsYXN0IGJpdCBvZiBpbmZvIGlzIHdlIG5lZWQgdGhlIGRpcmVjdGlvblxuICAvLyB0aGF0IHRoZSBqb2ludCBuZWVkcyB0byBwb2ludC4gSW4gdGhpcyBleGFtcGxlLCB3ZSBwcmVjb21wdXRlIHRoZSBRdWF0ZXJuaW9uIEludmVyc2UgRGlyIGZvciBlYWNoIGNoYWluXG4gIC8vIGJhc2VkIG9uIHRoZSBiaW5kIHBvc2UuIFdlIGNhbiB0cmFuc2Zvcm0gdGhhdCBkaXJlY3Rpb24gd2l0aCB0aGUgQW5pbWF0ZWQgcm90YXRpb24gdG8gZ2l2ZSB1cyB3aGVyZSB0aGVcbiAgLy8gam9pbnQgZGlyZWN0aW9uIGhhcyBtb3ZlZCB0by5cblxuICAvLyBUT0RPOiBPdXIgYm9uZXMgYXJlIGdldHRpbmcgZnVydGhlciBhcGFydCwgc28gd2UgbmVlZCB0byBmaWd1cmUgb3V0IHdoeVxuICBjb25zdCBib25lQSA9IHBvc2UuYm9uZXNbY2hhaW4uZmlyc3QoKV0sIC8vIEZpcnN0IEJvbmVcbiAgICBib25lQiA9IHBvc2UuYm9uZXNbY2hhaW4uZW5kX2lkeF0gLy8gRU5EIEJvbmUsIHdoaWNoIGlzIG5vdCBwYXJ0IG9mIHRoZSBjaGFpbiAoSGFuZCxGb290KVxuXG4gIGNvbnN0IGFUb0JWZWN0b3IgPSB0ZW1wVmVjMS5zdWJWZWN0b3JzKGJvbmVCLndvcmxkLnBvc2l0aW9uLCBib25lQS53b3JsZC5wb3NpdGlvbikgLy8gRGlyZWN0aW9uIGZyb20gRmlyc3QgQm9uZSB0byBGaW5hbCBCb25lICggSUsgRGlyZWN0aW9uIClcblxuICAvLyBDb21wdXRlIHRoZSBmaW5hbCBJSyBJbmZvcm1hdGlvbiBuZWVkZWQgZm9yIHRoZSBMaW1iXG4gIGlrTGltYi5sZW5ndGhTY2FsZSA9IGFUb0JWZWN0b3IubGVuZ3RoKCkgLyBjaGFpbi5sZW5ndGggLy8gTm9ybWFsaXplIHRoZSBkaXN0YW5jZSBiYXNlIG9uIHRoZSBsZW5ndGggb2YgdGhlIENoYWluLlxuICBpa0xpbWIuZGlyLmNvcHkoYVRvQlZlY3Rvcikubm9ybWFsaXplKCkgLy8gV2UgYWxzbyBub3JtYWxpemUgdGhlIGRpcmVjdGlvbiB0byB0aGUgZW5kIGVmZmVjdG9yLlxuXG4gIC8vIFdlIHVzZSB0aGUgZmlyc3QgYm9uZSBvZiB0aGUgY2hhaW4gcGx1cyB0aGUgUHJlIGNvbXB1dGVkIEFMVCBVUCB0byBlYXNpbHkgZ2V0IHRoZSBkaXJlY3Rpb24gb2YgdGhlIGpvaW50XG4gIGNvbnN0IGxlZnREaXIgPSB0ZW1wVmVjMi5jb3B5KGNoYWluLmFsdFVwKS5hcHBseVF1YXRlcm5pb24oYm9uZUEud29ybGQucXVhdGVybmlvbikuY3Jvc3MoYVRvQlZlY3RvcikgLy8gV2UgbmVlZCBsZWZ0IHRvIHJlYWxpZ24gdXBcbiAgaWtMaW1iLmpvaW50RGlyZWN0aW9uLmNvcHkoYVRvQlZlY3RvcikuY3Jvc3MobGVmdERpcikubm9ybWFsaXplKCkgLy8gUmVjYWxjIFVwLCBtYWtlIGl0IG9ydGhvZ29uYWwgdG8gTEVGVCBhbmQgRldEXG59XG5cbi8qKlxuICogQ29tcHV0ZXMgdHdpc3QgZm9yIHRoZSBmZWV0IGFuZCBoZWFkIGJvbmVzXG4gKiBAcGFyYW0gcmlnXG4gKiBAcGFyYW0gYm9uZUluZm9cbiAqIEBwYXJhbSBpa1xuICogQHBhcmFtIGxvb2tEaXJlY3Rpb25cbiAqIEBwYXJhbSB0d2lzdERpcmVjdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZUxvb2tUd2lzdChyaWc6IElLUmlnQ29tcG9uZW50VHlwZSwgYm9uZUluZm8sIGlrLCBsb29rRGlyZWN0aW9uLCB0d2lzdERpcmVjdGlvbikge1xuICBjb25zdCBwb3NlID0gcmlnLnBvc2UuYm9uZXNbYm9uZUluZm8uaW5kZXhdLFxuICAgIGJpbmQgPSByaWcudHBvc2UuYm9uZXNbYm9uZUluZm8uaW5kZXhdIC8vIFRQb3NlIEJvbmVcblxuICAvLyBGaXJzdCBjb21wdXRlIHRoZSBRdWF0ZXJuaW9uIEludmVydCBEaXJlY3Rpb25zIGJhc2VkIG9uIHRoZSBEZWZpbmVkXG4gIC8vIERpcmVjdGlvbnMgdGhhdCB3YXMgcGFzc2VkIGludG8gdGhlIGZ1bmN0aW9uLiBNb3N0IG9mdGVuLCB5b3VyIGxvb2tcbiAgLy8gZGlyZWN0aW9uIGlzIEZPUldBUkQgYW5kIHRoZSBEaXJlY3Rpb24gdXNlZCB0byBkZXRlcm1pbmUgdHdpc3QgaXMgVVAuXG4gIC8vIEJ1dCB0aGVyZSBhcmUgdGltZXMgd2UgbmVlZCB0aGUgZGlyZWN0aW9ucyB0byBiZSBkaWZmZXJlbnQgZGVwZW5kaW5nXG4gIC8vIG9uIGhvdyB3ZSB2aWV3IHRoZSBib25lIGluIGNlcnRhaW4gc2l0dWF0aW9ucy5cblxuICBjb25zdCBpbnZRdWF0ID0gYmluZC53b3JsZC5pbnZRdWF0ZXJuaW9uXG4gIGNvbnN0IGFsdExvb2tEaXJlY3Rpb24gPSB0ZW1wVmVjMS5jb3B5KGxvb2tEaXJlY3Rpb24pLmFwcGx5UXVhdGVybmlvbihpbnZRdWF0KSxcbiAgICBhbHRUd2lzdERpcmVjdGlvbiA9IHRlbXBWZWMyLmNvcHkodHdpc3REaXJlY3Rpb24pLmFwcGx5UXVhdGVybmlvbihpbnZRdWF0KVxuXG4gIGlrLmxvb2tEaXJlY3Rpb24uY29weShhbHRMb29rRGlyZWN0aW9uKS5hcHBseVF1YXRlcm5pb24ocG9zZS53b3JsZC5xdWF0ZXJuaW9uKVxuICBpay50d2lzdERpcmVjdGlvbi5jb3B5KGFsdFR3aXN0RGlyZWN0aW9uKS5hcHBseVF1YXRlcm5pb24ocG9zZS53b3JsZC5xdWF0ZXJuaW9uKVxufVxuXG4vKipcbiAqIENvbXB1dGVzIHNwaW5lIElLIHBvc2VcbiAqIEBwYXJhbSByaWdcbiAqIEBwYXJhbSBjaGFpblxuICogQHBhcmFtIGlrUG9zZVxuICogQHBhcmFtIGxvb2tEaXJlY3Rpb25cbiAqIEBwYXJhbSB0d2lzdERpcmVjdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZVNwaW5lKFxuICByaWc6IElLUmlnQ29tcG9uZW50VHlwZSxcbiAgY2hhaW46IENoYWluLFxuICBpa1Bvc2U6IElLUG9zZUNvbXBvbmVudFR5cGUsXG4gIGxvb2tEaXJlY3Rpb246IFZlY3RvcjMsXG4gIHR3aXN0RGlyZWN0aW9uOiBWZWN0b3IzXG4pOiB2b2lkIHtcbiAgY29uc3QgaWR4X2FyeSA9IFtjaGFpbi5maXJzdCgpLCBjaGFpbi5sYXN0KCldLFxuICAgIGxvb2tEaXIgPSB0ZW1wVmVjMSxcbiAgICB0d2lzdERpciA9IHRlbXBWZWMyXG5cbiAgbGV0IGogPSAwLFxuICAgIHBvc2VCb25lOiBQb3NlQm9uZUxvY2FsU3RhdGUsXG4gICAgYmluZEJvbmU6IFBvc2VCb25lTG9jYWxTdGF0ZVxuXG4gIGZvciAoY29uc3QgaSBvZiBpZHhfYXJ5KSB7XG4gICAgLy8gRmlyc3QgZ2V0IHJlZmVyZW5jZSB0byB0aGUgQm9uZXNcbiAgICBiaW5kQm9uZSA9IHJpZy50cG9zZS5ib25lc1tpXVxuICAgIHBvc2VCb25lID0gcmlnLnBvc2UuYm9uZXNbaV1cblxuICAgIC8vIENyZWF0ZSBRdWF0IEludmVyc2UgRGlyZWN0aW9uXG4gICAgLy8gVHJhbnNmb3JtIHRoZSBJbnYgRGlyIGJ5IHRoZSBBbmltYXRlZCBQb3NlIHRvIGdldCB0aGVpciBkaXJlY3Rpb25cblxuICAgIGNvbnN0IHF1YXRJbnZlcnNlID0gYmluZEJvbmUud29ybGQuaW52UXVhdGVybmlvblxuICAgIGxvb2tEaXIuY29weShsb29rRGlyZWN0aW9uKS5hcHBseVF1YXRlcm5pb24ocXVhdEludmVyc2UpLmFwcGx5UXVhdGVybmlvbihwb3NlQm9uZS53b3JsZC5xdWF0ZXJuaW9uKVxuICAgIHR3aXN0RGlyLmNvcHkodHdpc3REaXJlY3Rpb24pLmFwcGx5UXVhdGVybmlvbihxdWF0SW52ZXJzZSkuYXBwbHlRdWF0ZXJuaW9uKHBvc2VCb25lLndvcmxkLnF1YXRlcm5pb24pXG5cbiAgICAvLyBTYXZlIElLXG4gICAgaWtQb3NlLnNwaW5lW2pdLmxvb2tEaXJlY3Rpb24uY29weShsb29rRGlyKVxuICAgIGlrUG9zZS5zcGluZVtqXS50d2lzdERpcmVjdGlvbi5jb3B5KHR3aXN0RGlyKVxuICAgIGorK1xuICB9XG59XG5cbi8qKlxuICogQXBwbGllcyB1cGRhdGVkIHBvc2UgdG8gZ2l2ZW4gcmlnXG4gKiBAcGFyYW0gdGFyZ2V0UmlnIHdpbGwgYmUgbW9kaWZpZWRcbiAqIEBwYXJhbSBpa1Bvc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5SUtQb3NlVG9JS1JpZyh0YXJnZXRSaWc6IElLUmlnQ29tcG9uZW50VHlwZSwgaWtQb3NlOiBJS1Bvc2VDb21wb25lbnRUeXBlKTogdm9pZCB7XG4gIGFwcGx5SGlwKGlrUG9zZSwgdGFyZ2V0UmlnKVxuXG4gIGFwcGx5TGltYihpa1Bvc2UsIHRhcmdldFJpZywgdGFyZ2V0UmlnLmNoYWlucy5sZWdfbCwgaWtQb3NlLmxlZ19sKVxuICBhcHBseUxpbWIoaWtQb3NlLCB0YXJnZXRSaWcsIHRhcmdldFJpZy5jaGFpbnMubGVnX3IsIGlrUG9zZS5sZWdfcilcblxuICBhcHBseUxvb2tUd2lzdChpa1Bvc2UsIHRhcmdldFJpZywgJ2Zvb3RfbCcsIEZPUldBUkQsIFVQKVxuICBhcHBseUxvb2tUd2lzdChpa1Bvc2UsIHRhcmdldFJpZywgJ2Zvb3RfcicsIEZPUldBUkQsIFVQKVxuICBhcHBseVNwaW5lKGlrUG9zZSwgdGFyZ2V0UmlnLCB0YXJnZXRSaWcuY2hhaW5zLnNwaW5lLCBpa1Bvc2Uuc3BpbmUsIFVQLCBGT1JXQVJEKVxuXG4gIGlmICh0YXJnZXRSaWcuY2hhaW5zLmFybV9sKSBhcHBseUxpbWIoaWtQb3NlLCB0YXJnZXRSaWcsIHRhcmdldFJpZy5jaGFpbnMuYXJtX2wsIGlrUG9zZS5hcm1fbClcbiAgaWYgKHRhcmdldFJpZy5jaGFpbnMuYXJtX3IpIGFwcGx5TGltYihpa1Bvc2UsIHRhcmdldFJpZywgdGFyZ2V0UmlnLmNoYWlucy5hcm1fciwgaWtQb3NlLmFybV9yKVxuXG4gIGFwcGx5TG9va1R3aXN0KGlrUG9zZSwgdGFyZ2V0UmlnLCAnaGVhZCcsIEZPUldBUkQsIFVQKVxuXG4gIC8vIHVwZGF0ZSByZWFsIGJvbmVzIHdpdGggY2FsY3VsYXRlZFxuICBhcHBseVBvc2VUb1JpZyh0YXJnZXRSaWcpXG59XG5cbi8qKlxuICogdXBkYXRlIHNrZWxldG9uIGJvbmVzIGJ5IHBvc2UgYm9uZXMgc3RhdGVzXG4gKiBAcGFyYW0gdGFyZ2V0UmlnXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVBvc2VUb1JpZyh0YXJnZXRSaWc6IElLUmlnQ29tcG9uZW50VHlwZSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHRhcmdldFJpZy5wb3NlLmJvbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcG9zZUJvbmUgPSB0YXJnZXRSaWcucG9zZS5ib25lc1tpXVxuICAgIGNvbnN0IGFybWF0dXJlQm9uZSA9IHBvc2VCb25lLmJvbmVcblxuICAgIGFybWF0dXJlQm9uZS5wb3NpdGlvbi5jb3B5KHBvc2VCb25lLmxvY2FsLnBvc2l0aW9uKVxuICAgIGFybWF0dXJlQm9uZS5xdWF0ZXJuaW9uLmNvcHkocG9zZUJvbmUubG9jYWwucXVhdGVybmlvbilcbiAgICBhcm1hdHVyZUJvbmUuc2NhbGUuY29weShwb3NlQm9uZS5sb2NhbC5zY2FsZSlcbiAgfVxuICB0YXJnZXRSaWcucG9zZS5za2VsZXRvbi51cGRhdGUoKVxufVxuXG4vKipcbiAqIEFwcGxpZXMgaGlwIG9mIHRoZSBpayBwb3NlIHRvIGlrIHJpZ1xuICogQHBhcmFtIGlrUG9zZVxuICogQHBhcmFtIHJpZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlIaXAoaWtQb3NlOiBSZXR1cm5UeXBlPHR5cGVvZiBJS1Bvc2VDb21wb25lbnQuZ2V0PiwgcmlnOiBJS1JpZ0NvbXBvbmVudFR5cGUpIHtcbiAgLy8gRmlyc3Qgc3RlcCBpcyB3ZSBuZWVkIHRvIGdldCBhY2Nlc3MgdG8gdGhlIFJpZydzIFRQb3NlIGFuZCBQb3NlIEhpcCBCb25lLlxuICAvLyBUaGUgaWRlYSBpcyB0byB0cmFuc2Zvcm0gb3VyIEJpbmQgUG9zZSBpbnRvIGEgTmV3IFBvc2UgYmFzZWQgb24gSUsgRGF0YVxuICBjb25zdCBib25lSW5mbyA9IHJpZy5wb2ludHMuaGlwXG4gIGNvbnN0IGJpbmQgPSByaWcudHBvc2UuYm9uZXNbYm9uZUluZm8uaW5kZXhdXG5cbiAgLy8gQXBwbHkgSUsgU3dpbmcgJiBUd2lzdCAoIEhBTkRMRSBST1RBVElPTiApXG4gIC8vIFdoZW4gd2UgY29tcHV0ZSB0aGUgSUsgSGlwLCBXZSB1c2VkIHF1YXRlcm5pb24gaW52ZXJ0IGRpcmVjdGlvbiBhbmQgZGVmaW5lZCB0aGF0XG4gIC8vIHRoZSBoaXAgYWx3YXlzIHBvaW50cyBpbiB0aGUgRk9SV0FSRCBBeGlzLCBzbyBXZSBjYW4gdXNlIHRoYXQgdG8gcXVpY2t5IGdldCBTd2luZyBSb3RhdGlvblxuICAvLyBUYWtlIG5vdGUgdGhhdCB2ZWdldGEgYW5kIHJvYm9yZXgncyBIaXBzIGFyZSBjb21wbGV0ZWx5IGRpZmZlcmVudCBidXQgYnkgdXNpbmcgdGhhdCBpbnZlcnNlXG4gIC8vIGRpcmVjdGlvbiB0cmljaywgd2UgYXJlIGVhc2lseSBhYmxlIHRvIGFwcGx5IHRoZSBzYW1lIG1vdmVtZW50IHRvIGJvdGguXG5cbiAgY29uc3QgcGFyZW50Um90YXRpb24gPSByaWcudHBvc2UuZ2V0UGFyZW50Um90YXRpb24oYm9uZUluZm8uaW5kZXgpXG5cbiAgY29uc3QgcSA9IHRlbXBRdWF0MVxuICAgIC5zZXRGcm9tVW5pdFZlY3RvcnMoRk9SV0FSRCwgaWtQb3NlLmhpcC5kaXIpIC8vIENyZWF0ZSBTd2luZyBSb3RhdGlvblxuICAgIC5tdWx0aXBseShiaW5kLndvcmxkLnF1YXRlcm5pb24pIC8vIEFwcGx5IGl0IHRvIG91ciBXUyBSb3RhdGlvblxuXG4gIC8vIElmIFRoZXJlIGlzIGEgVHdpc3QgVmFsdWUsIEFwcGx5IHRoYXQgYXMgYSBQcmVNdWx0aXBsaWNhdGlvbi5cbiAgaWYgKGlrUG9zZS5oaXAudHdpc3QgIT0gMCkgcS5wcmVtdWx0aXBseSh0ZW1wUXVhdDIuc2V0RnJvbUF4aXNBbmdsZShpa1Bvc2UuaGlwLmRpciwgaWtQb3NlLmhpcC50d2lzdCkpXG5cbiAgLy8gSW4gdGhlIGVuZCwgd2UgbmVlZCB0byBjb252ZXJ0IHRvIGxvY2FsIHNwYWNlLiBTaW1wbHkgcHJlbXVsIGJ5IHRoZSBpbnZlcnNlIG9mIHRoZSBwYXJlbnRcbiAgLy8gcG11bF9pbnZlcnQocSwgcGFyZW50Um90YXRpb24pXG4gIHEucHJlbXVsdGlwbHkodGVtcFF1YXQyLmNvcHkocGFyZW50Um90YXRpb24pLmludmVydCgpKVxuXG4gIC8vIFRSQU5TTEFUSU9OXG4gIGNvbnN0IGhfc2NsID0gYmluZC53b3JsZC5wb3NpdGlvbi55IC8gaWtQb3NlLmhpcC5iaW5kX2hlaWdodCAvLyBDcmVhdGUgU2NhbGUgdmFsdWUgZnJvbSBTcmMncyBIaXAgSGVpZ2h0IGFuZCBUYXJnZXQncyBIaXAgSGVpZ2h0XG4gIGNvbnN0IHBvc2l0aW9uID0gdGVtcFZlYzFcbiAgICAuY29weShpa1Bvc2UuaGlwLm1vdmVtZW50KVxuICAgIC5tdWx0aXBseVNjYWxhcihoX3NjbCkgLy8gU2NhbGUgdGhlIFRyYW5zbGF0aW9uIERpZmZlcm5jZSB0byBNYXRjaCB0aGlzIE1vZGVscyBTY2FsZVxuICAgIC5hZGQoYmluZC53b3JsZC5wb3NpdGlvbikgLy8gVGhlbiBBZGQgdGhhdCBjaGFuZ2UgdG8gdGhlIFRQb3NlIFBvc2l0aW9uXG5cbiAgLy8gTUFZQkUgd2Ugd2FudCB0byBrZWVwIHRoZSBzdHJpZGUgZGlzdGFuY2UgZXhhY3QsIHdlIGNhbiByZXNldCB0aGUgWFogcG9zaXRpb25zXG4gIC8vIEJVVCB3ZSBuZWVkIHRvIGtlZXAgdGhlIFkgTW92ZW1lbnQgc2NhbGVkLCBlbHNlIG91ciBsZWcgSUsgd29uJ3Qgd29yayB3ZWxsIHNpbmNlXG4gIC8vIG91ciBzb3VyY2UgaXMgdGFsbGVyIHRoZW4gb3VyIHRhcmdldHMsIHRoaXMgd2lsbCBjYXVzZSBvdXIgdGFyZ2V0IGxlZ3MgdG8gYWx3YXlzXG4gIC8vIHN0cmFpZ2h0ZW4gb3V0LlxuICAvLyBwb3NpdGlvbi54ID0gaWtQb3NlLmhpcC5tb3ZlbWVudC54O1xuICAvLyBwb3NpdGlvbi56ID0gaWtQb3NlLmhpcC5tb3ZlbWVudC56O1xuXG4gIGNvbnN0IHBvc2UgPSByaWcucG9zZS5ib25lc1tib25lSW5mby5pbmRleF1cbiAgcG9zZS5sb2NhbC5xdWF0ZXJuaW9uLmNvcHkocSkgLy8gU2F2ZSBMUyByb3RhdGlvbiB0byBwb3NlXG4gIHBvc2UubG9jYWwucG9zaXRpb24uY29weShwb3NpdGlvbikgLy8gU2F2ZSBMUyByb3RhdGlvbiB0byBwb3NlXG5cbiAgcG9zZS53b3JsZC5wb3NpdGlvbi5jb3B5KHJpZy5wb3NlLmJvbmVzW2JvbmVJbmZvLmluZGV4XS5sb2NhbC5wb3NpdGlvbilcbiAgcG9zZS53b3JsZC5xdWF0ZXJuaW9uLmNvcHkocmlnLnBvc2UuYm9uZXNbYm9uZUluZm8uaW5kZXhdLmxvY2FsLnF1YXRlcm5pb24pXG59XG5cbi8qKlxuICogQXBwbGllcyBsaW1icyBvZiB0aGUgaWsgcG9zZSB0byBpayByaWdcbiAqIEBwYXJhbSBpa1Bvc2VcbiAqIEBwYXJhbSByaWdcbiAqIEBwYXJhbSBjaGFpblxuICogQHBhcmFtIGxpbWJcbiAqIEBwYXJhbSBncm91bmRpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5TGltYihcbiAgaWtQb3NlOiBSZXR1cm5UeXBlPHR5cGVvZiBJS1Bvc2VDb21wb25lbnQuZ2V0PixcbiAgcmlnOiBJS1JpZ0NvbXBvbmVudFR5cGUsXG4gIGNoYWluOiBDaGFpbixcbiAgbGltYjogSUtQb3NlTGltYkRhdGEsXG4gIGdyb3VuZGluZyA9IDBcbikge1xuICAvLyBTZXR1cCBJSyBUYXJnZXRcbiAgY29uc3QgYmluZEJvbmVEYXRhID0gcmlnLnBvc2UuYm9uZXNbY2hhaW4uZmlyc3QoKV1cbiAgY29uc3QgYmluZEJvbmUgPSBiaW5kQm9uZURhdGEuYm9uZVxuXG4gIGNvbnN0IHBhcmVudFRyYW5zZm9ybSA9IHtcbiAgICBwb3NpdGlvbjogdGVtcFZlYzEsXG4gICAgcXVhdGVybmlvbjogdGVtcFF1YXQxLFxuICAgIHNjYWxlOiB0ZW1wVmVjMlxuICB9XG4gIGNvbnN0IGNoaWxkVHJhbnNmb3JtID0ge1xuICAgIHBvc2l0aW9uOiB0ZW1wVmVjMyxcbiAgICBxdWF0ZXJuaW9uOiB0ZW1wUXVhdDIsXG4gICAgc2NhbGU6IHRlbXBWZWM0XG4gIH1cblxuICBiaW5kQm9uZS5wYXJlbnQuZ2V0V29ybGRQb3NpdGlvbihwYXJlbnRUcmFuc2Zvcm0ucG9zaXRpb24pXG4gIGJpbmRCb25lLnBhcmVudC5nZXRXb3JsZFF1YXRlcm5pb24ocGFyZW50VHJhbnNmb3JtLnF1YXRlcm5pb24pXG4gIGJpbmRCb25lLnBhcmVudC5nZXRXb3JsZFNjYWxlKHBhcmVudFRyYW5zZm9ybS5zY2FsZSlcbiAgYmluZEJvbmUuZ2V0V29ybGRQb3NpdGlvbihjaGlsZFRyYW5zZm9ybS5wb3NpdGlvbilcbiAgYmluZEJvbmUuZ2V0V29ybGRRdWF0ZXJuaW9uKGNoaWxkVHJhbnNmb3JtLnF1YXRlcm5pb24pXG4gIGJpbmRCb25lLmdldFdvcmxkU2NhbGUoY2hpbGRUcmFuc2Zvcm0uc2NhbGUpXG5cbiAgcmlnLnBvc2UuZ2V0X3BhcmVudF93b3JsZChjaGFpbi5maXJzdCgpLCBwYXJlbnRUcmFuc2Zvcm0sIGNoaWxkVHJhbnNmb3JtKVxuXG4gIC8vIEhvdyBtdWNoIG9mIHRoZSBDaGFpbiBsZW5ndGggdG8gdXNlIHRvIGNhbGMgRW5kIEVmZmVjdG9yXG4gIC8vIGxldCBsZW4gPSAocmlnLmxlZ19sZW5fbG10IHx8IGNoYWluLmxlbikgKiBsaW1iLmxlbl9zY2FsZVxuICBsZXQgbGVuID0gY2hhaW4ubGVuZ3RoICogbGltYi5sZW5ndGhTY2FsZVxuXG4gIC8vIHRoaXMudGFyZ2V0LmZyb21fcG9zX2RpciggY190cmFuLnBvcywgbGltYi5kaXIsIGxpbWIuam9pbnRfZGlyLCBsZW4gKTtcdC8vIFNldHVwIElLIFRhcmdldFxuICB0YXJnZXRGcm9tUG9zRGlyKGlrUG9zZSwgY2hpbGRUcmFuc2Zvcm0ucG9zaXRpb24sIGxpbWIuZGlyLCBsaW1iLmpvaW50RGlyZWN0aW9uLCBsZW4pXG5cbiAgLy8vLy8vLy8vL1xuXG4gIC8vIFRPRE86IHRlc3QgaXQsIGN1cnJlbnRseSBub3QgdXNlZCBpbiBhcHBseSAoc2FtZSBhcyBpbiBvcmlnaW5hbCBsaWIgZXhhbXBsZSlcbiAgaWYgKGdyb3VuZGluZykgYXBwbHlHcm91bmRpbmcoaWtQb3NlLCBncm91bmRpbmcpXG5cbiAgLy8gLS0tLS0tLS0tIElLIFNvbHZlclxuICBjaGFpbi5pa1NvbHZlcihjaGFpbiwgcmlnLnRwb3NlLCByaWcucG9zZSwgaWtQb3NlLmF4aXMsIGlrUG9zZS5sZW5ndGgsIHBhcmVudFRyYW5zZm9ybSlcblxuICAvLyBhcHBseSBjYWxjdWxhdGVkIHBvc2l0aW9ucyB0byBcInJlYWxcIiBib25lc1xuICBjaGFpbi5jaGFpbkJvbmVzLmZvckVhY2goKHsgaW5kZXg6IGJvbmVJbmRleCB9KSA9PiB7XG4gICAgY29uc3QgcG9zZUJvbmUgPSByaWcucG9zZS5ib25lc1tib25lSW5kZXhdXG5cbiAgICBwb3NlQm9uZS5ib25lLnBvc2l0aW9uLmNvcHkocG9zZUJvbmUubG9jYWwucG9zaXRpb24pXG4gICAgcG9zZUJvbmUuYm9uZS5xdWF0ZXJuaW9uLmNvcHkocG9zZUJvbmUubG9jYWwucXVhdGVybmlvbilcbiAgICBwb3NlQm9uZS5ib25lLnNjYWxlLmNvcHkocG9zZUJvbmUubG9jYWwuc2NhbGUpXG4gIH0pXG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBpa1Bvc2Ugd2lsbCBiZSBtb2RpZmllZFxuICogQHBhcmFtIHBvc1xuICogQHBhcmFtIGRpclxuICogQHBhcmFtIHVwX2RpclxuICogQHBhcmFtIGxlbl9zY2xcbiAqL1xuZnVuY3Rpb24gdGFyZ2V0RnJvbVBvc0RpcihcbiAgaWtQb3NlOiBJS1Bvc2VDb21wb25lbnRUeXBlLFxuICBwb3M6IFZlY3RvcjMsXG4gIGRpcjogVmVjdG9yMyxcbiAgdXBfZGlyOiBWZWN0b3IzLFxuICBsZW5fc2NsOiBudW1iZXJcbik6IHZvaWQge1xuICBpa1Bvc2Uuc3RhcnRQb3NpdGlvbi5jb3B5KHBvcylcbiAgaWtQb3NlLmVuZFBvc2l0aW9uXG4gICAgLmNvcHkoZGlyKVxuICAgIC5tdWx0aXBseVNjYWxhcihsZW5fc2NsKSAvLyBDb21wdXRlIEVuZCBFZmZlY3RvclxuICAgIC5hZGQocG9zKVxuXG4gIGNvbnN0IGxlbl9zcXIgPSBpa1Bvc2Uuc3RhcnRQb3NpdGlvbi5kaXN0YW5jZVRvU3F1YXJlZChpa1Bvc2UuZW5kUG9zaXRpb24pXG4gIGlrUG9zZS5sZW5ndGggPSBNYXRoLnNxcnQobGVuX3NxcilcblxuICBpa1Bvc2UuYXhpcy5mcm9tRGlyZWN0aW9uKGRpciwgdXBfZGlyKSAvLyBUYXJnZXQgQXhpc1xufVxuXG4vKipcbiAqIEFwcGx5IGxvb2svdHdpc3QgcGFydCBvZiB0aGUgcG9zZSB0byB0aGUgdGFyZ2V0IHJpZ1xuICogQHBhcmFtIGlrUG9zZVxuICogQHBhcmFtIHJpZyBhcHBseSB0aGUgcG9zZSB0byB0aGlzIHJpZ1xuICogQHBhcmFtIGJvbmVOYW1lXG4gKiBAcGFyYW0gbG9va0RpcmVjdGlvblxuICogQHBhcmFtIHR3aXN0RGlyZWN0aW9uXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlMb29rVHdpc3QoXG4gIGlrUG9zZTogSUtQb3NlQ29tcG9uZW50VHlwZSxcbiAgcmlnOiBJS1JpZ0NvbXBvbmVudFR5cGUsXG4gIGJvbmVOYW1lOiBzdHJpbmcsXG4gIGxvb2tEaXJlY3Rpb246IFZlY3RvcjMsXG4gIHR3aXN0RGlyZWN0aW9uOiBWZWN0b3IzXG4pIHtcbiAgLy8gRmlyc3Qgd2UgbmVlZCB0byBnZXQgdGhlIFdTIFJvdGF0aW9uIG9mIHRoZSBwYXJlbnQgdG8gdGhlIEZvb3RcbiAgLy8gVGhlbiBBZGQgdGhlIEZvb3QncyBMUyBCaW5kIHJvdGF0aW9uLiBUaGUgaWRlYSBpcyB0byBzZWUgd2hlcmVcbiAgLy8gdGhlIGZvb3Qgd2lsbCBjdXJyZW50bHkgYmUgaWYgaXQgaGFzIHlldCB0byBoYXZlIGFueSByb3RhdGlvblxuICAvLyBhcHBsaWVkIHRvIGl0LlxuICBjb25zdCBib25lSW5mbyA9IHJpZy5wb2ludHNbYm9uZU5hbWVdLFxuICAgIGlrOiBJS1Bvc2VMb29rVHdpc3QgPSBpa1Bvc2VbYm9uZU5hbWVdXG5cbiAgY29uc3QgYmluZCA9IHJpZy50cG9zZS5ib25lc1tib25lSW5mby5pbmRleF1cblxuICBjb25zdCByb290UXVhdGVybmlvbiA9IHJpZy5wb3NlLmdldFBhcmVudFJvdGF0aW9uKGJvbmVJbmZvLmluZGV4KVxuICBjb25zdCBjaGlsZFJvdGF0aW9uID0gdGVtcFF1YXQxLmNvcHkocm9vdFF1YXRlcm5pb24pLm11bHRpcGx5KGJpbmQubG9jYWwucXVhdGVybmlvbilcblxuICAvLyBOZXh0IHdlIG5lZWQgdG8gZ2V0IHRoZSBGb290J3MgUXVhdGVybmlvbiBJbnZlcnNlIERpcmVjdGlvblxuICAvLyBXaGljaCBtYXRjaGVzIHVwIHdpdGggdGhlIHNhbWUgRGlyZWN0aW9ucyB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgSUtcbiAgLy8gaW5mb3JtYXRpb24uXG4gIGNvbnN0IHF1YXRJbnZlcnNlID0gYmluZC53b3JsZC5pbnZRdWF0ZXJuaW9uXG5cbiAgY29uc3QgYWx0TG9va0RpcmVjdGlvbiA9IHRlbXBWZWMxLmNvcHkobG9va0RpcmVjdGlvbikuYXBwbHlRdWF0ZXJuaW9uKHF1YXRJbnZlcnNlKSxcbiAgICBhbHRUd2lzdERpcmVjdGlvbiA9IHRlbXBWZWMyLmNvcHkodHdpc3REaXJlY3Rpb24pLmFwcGx5UXVhdGVybmlvbihxdWF0SW52ZXJzZSlcblxuICAvLyBBZnRlciB0aGUgSElQIHdhcyBtb3ZlZCBhbmQgVGhlIExpbWIgSUsgaXMgY29tcGxldGUsIFRoaXMgaXMgd2hlcmVcbiAgLy8gdGhlIEFMVCBMb29rIERpcmVjdGlvbiBjdXJyZW50bHkgcG9pbnRzIHRvLlxuICBjb25zdCBjdXJyZW50TG9va0RpcmVjdGlvbiA9IHRlbXBWZWMzLmNvcHkoYWx0TG9va0RpcmVjdGlvbikuYXBwbHlRdWF0ZXJuaW9uKGNoaWxkUm90YXRpb24pXG5cbiAgLy8gTm93IHdlIHN0YXJ0IGJ1aWxkaW5nIG91dCBmaW5hbCByb3RhdGlvbiB0aGF0IHdlXG4gIC8vIHdhbnQgdG8gYXBwbHkgdG8gdGhlIGJvbmUgdG8gZ2V0IGl0IHBvaW50aW5nIGF0IHRoZVxuICAvLyByaWdodCBkaXJlY3Rpb24gYW5kIHR3aXN0ZWQgdG8gbWF0Y2ggdGhlIG9yaWdpbmFsIGFuaW1hdGlvbi5cbiAgY29uc3Qgcm90YXRpb24gPSB0ZW1wUXVhdDIuc2V0RnJvbVVuaXRWZWN0b3JzKGN1cnJlbnRMb29rRGlyZWN0aW9uLCBpay5sb29rRGlyZWN0aW9uKSAvLyBDcmVhdGUgb3VyIFN3aW5nIFJvdGF0aW9uXG4gIHJvdGF0aW9uLm11bHRpcGx5KGNoaWxkUm90YXRpb24pIC8vIFRoZW4gQXBwbHkgdG8gb3VyIGZvb3RcblxuICAvLyBOb3cgd2UgbmVlZCB0byBrbm93IHdoZXJlIHRoZSBUd2lzdCBEaXJlY3Rpb24gcG9pbnRzIHRvIGFmdGVyXG4gIC8vIHN3aW5nIHJvdGF0aW9uIGhhcyBiZWVuIGFwcGxpZWQuIFRoZW4gdXNlIGl0IHRvIGNvbXB1dGUgb3VyIHR3aXN0IHJvdGF0aW9uLlxuICBjb25zdCBjdXJyZW50VHdpc3REaXJlY3Rpb24gPSBhbHRUd2lzdERpcmVjdGlvbi5hcHBseVF1YXRlcm5pb24ocm90YXRpb24pXG4gIGNvbnN0IHR3aXN0ID0gdGVtcFF1YXQxLnNldEZyb21Vbml0VmVjdG9ycyhjdXJyZW50VHdpc3REaXJlY3Rpb24sIGlrLnR3aXN0RGlyZWN0aW9uKVxuICByb3RhdGlvbi5wcmVtdWx0aXBseSh0d2lzdCkgLy8gQXBwbHkgVHdpc3RcblxuICByb3RhdGlvbi5wcmVtdWx0aXBseSh0ZW1wUXVhdDEuY29weShyb290UXVhdGVybmlvbikuaW52ZXJ0KCkpIC8vIFRvIExvY2FsIFNwYWNlXG5cbiAgcmlnLnBvc2Uuc2V0Qm9uZShib25lSW5mby5pbmRleCwgcm90YXRpb24pIC8vIFNhdmUgdG8gcG9zZS5cbn1cblxuLyoqXG4gKiBLZWVwIHRoZSBmZWV0IG9uIHRoZSBncm91bmRcbiAqIEBwYXJhbSBpa1Bvc2VcbiAqIEBwYXJhbSB5TGltaXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5R3JvdW5kaW5nKGlrUG9zZTogSUtQb3NlQ29tcG9uZW50VHlwZSwgeUxpbWl0OiBudW1iZXIpOiB2b2lkIHtcbiAgLy8gT25jZSB3ZSBoYXZlIG91dCBJSyBUYXJnZXQgc2V0dXAsIFdlIGNhbiB1c2UgaXRzIGRhdGEgdG8gdGVzdCB2YXJpb3VzIHRoaW5nc1xuICAvLyBGaXJzdCB3ZSBjYW4gdGVzdCBpZiB0aGUgZW5kIGVmZmVjdG9yIGlzIGJlbG93IHRoZSBoZWlnaHQgbGltaXQuIEVhY2ggZm9vdFxuICAvLyBtYXkgbmVlZCBhIGRpZmZlcmVudCBvZmYgdGhlIGdyb3VuZCBvZmZzZXQgc2luY2UgdGhlIGJvbmVzIHJhcmVseSB0b3VjaCB0aGUgZmxvb3JcbiAgLy8gcGVyZmVjdGx5LlxuXG4gIC8vIFdoZXJlIG9uIHRoZSBsaW5lIGJldHdlZW4gdGhlIFN0YXJ0IGFuZCBlbmQgUG9pbnRzIHdvdWxkIHdvcmsgZm9yIG91clxuICAvLyBZIExpbWl0LiBBbiBlYXN5IHNvbHV0aW9uIGlzIHRvIGZpbmQgdGhlIFNDQUxFIGJhc2VkIG9uIGRvaW5nIGEgMUQgU2NhbGVcbiAgLy9vcGVyYXRpb24gb24gdGhlIFkgVmFsdWVzIG9ubHkuIFdoYXRldmVyIHNjYWxlIHZhbHVlIHdlIGdldCB3aXRoIFkgd2UgY2FuIHVzZSBvbiBYIGFuZCBaXG4gIGNvbnN0IGEgPSBpa1Bvc2Uuc3RhcnRQb3NpdGlvbixcbiAgICBiID0gaWtQb3NlLmVuZFBvc2l0aW9uLFxuICAgIHMgPSAoeUxpbWl0IC0gYS55KSAvIChiLnkgLSBhLnkpIC8vIE5vcm1hbGl6ZSBMaW1pdCBWYWx1ZSBpbiB0aGUgTWF4L01pbiBSYW5nZSBvZiBZLlxuXG4gIC8vIENoYW5nZSB0aGUgZW5kIGVmZmVjdG9yIG9mIG91ciB0YXJnZXRcbiAgaWtQb3NlLmVuZFBvc2l0aW9uLnNldCgoYi54IC0gYS54KSAqIHMgKyBhLngsIHlMaW1pdCwgKGIueiAtIGEueikgKiBzICsgYS56KVxuXG4gIC8vIFNpbmNlIHdlIGNoYW5nZWQgdGhlIGVuZCBlZmZlY3RvciwgbGV0cyB1cGRhdGUgdGhlIFNxciBMZW5ndGggYW5kIExlbmd0aCBvZiBvdXIgdGFyZ2V0XG4gIC8vIFRoaXMgaXMgbm9ybWFsbHkgY29tcHV0ZWQgYnkgb3VyIElLIFRhcmdldCB3aGVuIHdlIHNldCBpdCwgYnV0IHNpbmNlIEkgZGlkbid0IGJvdGhlclxuICAvLyB0byBjcmVhdGUgYSBtZXRob2QgdG8gdXBkYXRlIHRoZSBlbmQgZWZmZWN0b3IsIHdlIG5lZWQgdG8gZG8gdGhlc2UgZXh0cmEgdXBkYXRlcy5cbiAgY29uc3QgZGlzdGFuY2UgPSBpa1Bvc2Uuc3RhcnRQb3NpdGlvbi5kaXN0YW5jZVRvKGlrUG9zZS5lbmRQb3NpdGlvbilcbiAgaWtQb3NlLmxlbmd0aCA9IGRpc3RhbmNlXG59XG5cbi8qKlxuICogQXBwbHkgdGhlIHBvc2UgdG8gdGhlIHRhcmdldCByaWdcbiAqIEBwYXJhbSBpa1Bvc2VcbiAqIEBwYXJhbSByaWdcbiAqIEBwYXJhbSBjaGFpblxuICogQHBhcmFtIGlrXG4gKiBAcGFyYW0gbG9va0RpcmVjdGlvblxuICogQHBhcmFtIHR3aXN0RGlyZWN0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVNwaW5lKFxuICBpa1Bvc2U6IElLUG9zZUNvbXBvbmVudFR5cGUsXG4gIHJpZzogSUtSaWdDb21wb25lbnRUeXBlLFxuICBjaGFpbjogQ2hhaW4sXG4gIGlrOiBJS1Bvc2VTcGluZURhdGEsXG4gIGxvb2tEaXJlY3Rpb246IFZlY3RvcjMsXG4gIHR3aXN0RGlyZWN0aW9uOiBWZWN0b3IzXG4pIHtcbiAgLy8gRm9yIHRoZSBzcGluZSwgd2UgaGF2ZSB0aGUgc3RhcnQgYW5kIGVuZCBJSyBkaXJlY3Rpb25zLiBTaW5jZSBzcGluZXMgY2FuIGhhdmUgdmFyaW91c1xuICAvLyBhbW91bnQgb2YgYm9uZXMsIHRoZSBzaW1wbGVzdCBzb2x1dGlvbiBpcyB0byBsZXJwIGZyb20gc3RhcnQgdG8gZmluaXNoLiBUaGUgZmlyc3RcbiAgLy8gc3BpbmUgYm9uZSBpcyBpbXBvcnRhbnQgdG8gY29udHJvbCBvZmZzZXRzIGZyb20gdGhlIGhpcHMsIGFuZCB0aGUgZmluYWwgb25lIHVzdWFsbHlcbiAgLy8gY29udHJvbHMgdGhlIGNoZXN0IHdoaWNoIGRpY3RhdGVzIHdoZXJlIHRoZSBhcm1zIGFuZCBoZWFkIGFyZSBnb2luZyB0byBiZSBsb2NhdGVkLlxuICAvLyBBbnl0aGluZyBiZXR3ZWVuIGlzIGhvdyB0aGUgc3BpbmUgd291bGQga2luZCBvZiByZWFjdC5cbiAgLy8gU2luY2Ugd2UgYXJlIGJ1aWxkaW5nIHVwIHRoZSBTa2VsZXRvbiwgV2UgbG9vayBhdCB0aGUgcG9zZSBvYmplY3QgdG8ga25vdyB3aGVyZSB0aGUgSGlwc1xuICAvLyBjdXJyZW50bHkgZXhpc3QgaW4gV29ybGQgU3BhY2UuXG5cbiAgY29uc3QgYm9uZUluZm8gPSByaWcucG9zZS5ib25lc1tjaGFpbi5maXJzdCgpXVxuICBjb25zdCBwYXJlbnRJbmZvID0gcmlnLnBvc2UuYm9uZXNbYm9uZUluZm8ucF9pZHhdXG5cbiAgLy8gVE9ETzogcmlnLnBvc2UuZ2V0X3BhcmVudF93b3JsZCggY2hhaW4uZmlyc3QoKSApXG5cbiAgLy8gQ29weSBib25lIHRvIG91ciB0cmFuc2Zvcm0gdmFyaWFibGVzIHRvIHdvcmsgb24gdGhlbVxuICBpa1Bvc2Uuc3BpbmVQYXJlbnRQb3NpdGlvbi5jb3B5KHBhcmVudEluZm8ubG9jYWwucG9zaXRpb24pXG4gIGlrUG9zZS5zcGluZUNoaWxkUG9zaXRpb24uY29weShib25lSW5mby5sb2NhbC5wb3NpdGlvbilcblxuICBpa1Bvc2Uuc3BpbmVQYXJlbnRRdWF0ZXJuaW9uLmNvcHkocGFyZW50SW5mby5sb2NhbC5xdWF0ZXJuaW9uKVxuICBpa1Bvc2Uuc3BpbmVDaGlsZFF1YXRlcm5pb24uY29weShib25lSW5mby5sb2NhbC5xdWF0ZXJuaW9uKVxuXG4gIGlrUG9zZS5zcGluZVBhcmVudFNjYWxlLmNvcHkocGFyZW50SW5mby5sb2NhbC5zY2FsZSlcbiAgaWtQb3NlLnNwaW5lQ2hpbGRTY2FsZS5jb3B5KGJvbmVJbmZvLmxvY2FsLnNjYWxlKVxuXG4gIGNvbnN0IGNudCA9IGNoYWluLmNudCAtIDFcblxuICBmb3IgKGxldCBpID0gMDsgaSA8PSBjbnQ7IGkrKykge1xuICAgIC8vIFByZXBhcmUgZm9yIHRoZSBJdGVyYXRpb25cbiAgICBjb25zdCBib25lSW5kZXggPSBjaGFpbi5jaGFpbkJvbmVzW2ldLmluZGV4IC8vIEJvbmUgSW5kZXhcbiAgICBjb25zdCBib25lQmluZCA9IHJpZy50cG9zZS5ib25lc1tib25lSW5kZXhdIC8vIEJpbmQgVmFsdWVzIG9mIHRoZSBCb25lXG4gICAgY29uc3QgdCA9IGkgLyBjbnQgLy8gKiogMjtcdFx0Ly8gVGhlIExlcnAgVGltZSwgYmUgMCBvbiBmaXJzdCBib25lLCAxIGF0IGZpbmFsIGJvbmUsIENhbiB1c2UgY3VydmVzIHRvIGRpc3RyaWJ1dGUgdGhlIGxlcnAgZGlmZmVyZW50bHlcblxuICAgIC8vIEdldCBib25lIGluIFdTIHRoYXQgaGFzIHlldCB0byBoYXZlIGFueSByb3RhdGlvbiBhcHBsaWVkXG4gICAgLy8gY2hpbGRUcmFuc2Zvcm0uc2V0RnJvbUFkZChwYXJlbnRUcmFuc2Zvcm0sIGJpbmQpO1xuXG4gICAgLy8gUE9TSVRJT04gLSBwYXJlbnQucG9zaXRpb24gKyAoIHBhcmVudC5xdWF0ZXJuaW9uICogKCBwYXJlbnQuc2NhbGUgKiBjaGlsZC5wb3NpdGlvbiApIClcbiAgICBjb25zdCB2ID0gdGVtcFZlYzFcbiAgICAgIC5jb3B5KGlrUG9zZS5zcGluZVBhcmVudFNjYWxlKVxuICAgICAgLm11bHRpcGx5KGJvbmVCaW5kLmxvY2FsLnBvc2l0aW9uKSAvLyBwYXJlbnQuc2NhbGUgKiBjaGlsZC5wb3NpdGlvbjtcbiAgICAgIC5hcHBseVF1YXRlcm5pb24oaWtQb3NlLnNwaW5lUGFyZW50UXVhdGVybmlvbikgLy9WZWMzLnRyYW5zZm9ybVF1YXQoIHYsIHRwLnF1YXRlcm5pb24sIHYgKTtcbiAgICBpa1Bvc2Uuc3BpbmVDaGlsZFBvc2l0aW9uLmNvcHkoaWtQb3NlLnNwaW5lUGFyZW50UG9zaXRpb24pLmFkZCh2KSAvLyBWZWMzLmFkZCggdHAucG9zaXRpb24sIHYsIHRoaXMucG9zaXRpb24gKTtcblxuICAgIC8vIFNDQUxFIC0gcGFyZW50LnNjYWxlICogY2hpbGQuc2NhbGVcbiAgICBpa1Bvc2Uuc3BpbmVDaGlsZFNjYWxlLmNvcHkoaWtQb3NlLnNwaW5lUGFyZW50U2NhbGUpLm11bHRpcGx5KGJvbmVCaW5kLmxvY2FsLnNjYWxlKVxuXG4gICAgLy8gUk9UQVRJT04gLSBwYXJlbnQucXVhdGVybmlvbiAqIGNoaWxkLnF1YXRlcm5pb25cbiAgICBpa1Bvc2Uuc3BpbmVDaGlsZFF1YXRlcm5pb24uY29weShpa1Bvc2Uuc3BpbmVQYXJlbnRRdWF0ZXJuaW9uKS5tdWx0aXBseShib25lQmluZC5sb2NhbC5xdWF0ZXJuaW9uKVxuXG4gICAgLy8gQ29tcHV0ZSBvdXIgUXVhdCBJbnZlcnNlIERpcmVjdGlvbiwgdXNpbmcgdGhlIERlZmluZWQgTG9vayZUd2lzdCBEaXJlY3Rpb25cbiAgICBjb25zdCBpbnZRdWF0ID0gYm9uZUJpbmQud29ybGQuaW52UXVhdGVybmlvblxuICAgIGNvbnN0IGFsdExvb2sgPSB0ZW1wVmVjMy5jb3B5KGxvb2tEaXJlY3Rpb24pLmFwcGx5UXVhdGVybmlvbihpbnZRdWF0KVxuICAgIGNvbnN0IGFsdFR3aXN0ID0gdGVtcFZlYzQuY29weSh0d2lzdERpcmVjdGlvbikuYXBwbHlRdWF0ZXJuaW9uKGludlF1YXQpXG5cbiAgICBjb25zdCBjdXJyZW50TG9vayA9IGFsdExvb2suYXBwbHlRdWF0ZXJuaW9uKGlrUG9zZS5zcGluZUNoaWxkUXVhdGVybmlvbikgLy8gV2hhdCBkaXJlY3Rpb24gaXMgdGhlIGJvbmUgcG9pbnQgbG9va2luZyBub3csIHdpdGhvdXQgYW55IGV4dHJhIHJvdGF0aW9uXG5cbiAgICAvLyBMZXJwIG91ciBUYXJnZXQgSUsgRGlyZWN0aW9ucyBmb3IgdGhpcyBib25lXG4gICAgY29uc3QgaWtMb29rID0gdGVtcFZlYzEubGVycFZlY3RvcnMoaWtbMF0ubG9va0RpcmVjdGlvbiwgaWtbMV0ubG9va0RpcmVjdGlvbiwgdClcbiAgICBjb25zdCBpa1R3aXN0ID0gdGVtcFZlYzIubGVycFZlY3RvcnMoaWtbMF0udHdpc3REaXJlY3Rpb24sIGlrWzFdLnR3aXN0RGlyZWN0aW9uLCB0KVxuXG4gICAgY29uc3Qgcm90YXRpb24gPSB0ZW1wUXVhdDJcbiAgICAgIC5zZXRGcm9tVW5pdFZlY3RvcnMoY3VycmVudExvb2ssIGlrTG9vaykgLy8gQ3JlYXRlIG91ciBTd2luZyBSb3RhdGlvblxuICAgICAgLm11bHRpcGx5KGlrUG9zZS5zcGluZUNoaWxkUXVhdGVybmlvbikgLy8gVGhlbiBBcHBseSB0byBvdXIgQm9uZSwgc28gaXRzIG5vdyBzd29uZyB0byBtYXRjaCB0aGUgc3dpbmcgZGlyZWN0aW9uLlxuXG4gICAgY29uc3QgY3VycmVudFR3aXN0ID0gYWx0VHdpc3QuYXBwbHlRdWF0ZXJuaW9uKHJvdGF0aW9uKSAvLyBHZXQgb3VyIEN1cnJlbnQgVHdpc3QgRGlyZWN0aW9uIGZyb20gT3VyIFN3aW5nIFJvdGF0aW9uXG4gICAgY29uc3QgcXVhdCA9IHRlbXBRdWF0MS5zZXRGcm9tVW5pdFZlY3RvcnMoY3VycmVudFR3aXN0LCBpa1R3aXN0KSAvLyBDcmVhdGUgb3VyIHR3aXN0IHJvdGF0aW9uXG4gICAgcm90YXRpb24ucHJlbXVsdGlwbHkocXVhdCkgLy8gQXBwbHkgVHdpc3Qgc28gbm93IGl0IG1hdGNoZXMgb3VyIElLIFR3aXN0IGRpcmVjdGlvblxuXG4gICAgY29uc3Qgc3BpbmVQYXJlbnRRdWF0ZXJuaW9uSW52ZXJzZSA9IHRlbXBRdWF0MS5jb3B5KGlrUG9zZS5zcGluZVBhcmVudFF1YXRlcm5pb24pLmludmVydCgpXG5cbiAgICByb3RhdGlvbi5wcmVtdWx0aXBseShzcGluZVBhcmVudFF1YXRlcm5pb25JbnZlcnNlKSAvLyBUbyBMb2NhbCBTcGFjZVxuXG4gICAgcmlnLnBvc2Uuc2V0Qm9uZShib25lSW5kZXgsIHJvdGF0aW9uKSAvLyBTYXZlIHJlc3VsdCB0byBib25lLlxuICAgIC8vIHJpZy5wb3NlLmJvbmVzW2JvbmVJbmRleF0uYm9uZS5zZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHJvdGF0aW9uKSAvLyBTYXZlIHJlc3VsdCB0byBib25lLlxuICAgIC8vIHJpZy5wb3NlLmJvbmVzW2JvbmVJbmRleF0ubG9jYWwucXVhdGVybmlvbi5jb3B5KHJvdGF0aW9uKSAvLyBTYXZlIHJlc3VsdCB0byBib25lLlxuXG4gICAgaWYgKHQgIT0gMSkge1xuICAgICAgLy8gT1JJR0lOQUwgQ09ERSBpc1xuICAgICAgLy8gdGhpcy5hZGQoaWtQb3NlLnNwaW5lUGFyZW50UXVhdGVybmlvbiwgcm90YXRpb24sIGJvbmVCaW5kVmFsdWUucG9zaXRpb24sIGJvbmVCaW5kVmFsdWUuc2NhbGUpOyAvLyBDb21wdXRlIHRoZSBXUyBUcmFuc2Zvcm0gZm9yIHRoZSBuZXh0IGJvbmUgaW4gdGhlIGNoYWluLlxuICAgICAgY29uc3QgcGFyZW50U2NhbGVDaGlsZFBvc2l0aW9uID0gdGVtcFZlYzFcbiAgICAgICAgLmNvcHkoaWtQb3NlLnNwaW5lUGFyZW50U2NhbGUpXG4gICAgICAgIC5tdWx0aXBseShib25lQmluZC5sb2NhbC5wb3NpdGlvbilcbiAgICAgICAgLmFwcGx5UXVhdGVybmlvbihpa1Bvc2Uuc3BpbmVQYXJlbnRRdWF0ZXJuaW9uKVxuICAgICAgLy8gUE9TSVRJT04gLSBwYXJlbnQucG9zaXRpb24gKyAoIHBhcmVudC5xdWF0ZXJuaW9uICogKCBwYXJlbnQuc2NhbGUgKiBjaGlsZC5wb3NpdGlvbiApIClcbiAgICAgIC8vIFRPRE86IE11bHRpcGxpZWQgaW4gcHJvcGVyIG9yZGVyP1xuICAgICAgaWtQb3NlLnNwaW5lUGFyZW50UG9zaXRpb24uY29weShpa1Bvc2Uuc3BpbmVQYXJlbnRQb3NpdGlvbikuYWRkKHBhcmVudFNjYWxlQ2hpbGRQb3NpdGlvbilcbiAgICAgIC8vIFNDQUxFIC0gcGFyZW50LnNjYWxlICogY2hpbGQuc2NhbGVcbiAgICAgIGlrUG9zZS5zcGluZVBhcmVudFNjYWxlLm11bHRpcGx5KGJvbmVCaW5kLmxvY2FsLnNjYWxlKVxuICAgICAgLy8gUk9UQVRJT04gLSBwYXJlbnQucXVhdGVybmlvbiAqIGNoaWxkLnF1YXRlcm5pb25cbiAgICAgIGlrUG9zZS5zcGluZVBhcmVudFF1YXRlcm5pb24ubXVsdGlwbHkocm90YXRpb24pXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSBwb3NlXG4gKiBAcGFyYW0gZGlyXG4gKiBAcGFyYW0gYm9uZU5hbWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhbGlnbkNoYWluKHBvc2U6IFBvc2UsIGRpcjogVmVjdG9yMywgYm9uZU5hbWVzOiBzdHJpbmdbXSkge1xuICBjb25zdCBhRW5kID0gYm9uZU5hbWVzLmxlbmd0aCAtIDEgLy8gRW5kIEluZGV4XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPD0gYUVuZDsgaSsrKSB7XG4gICAgbGV0IGJvbmU6IE9iamVjdDNEID0gcG9zZS5za2VsZXRvbi5ib25lcy5maW5kKChib25lKSA9PiAoYm9uZS5uYW1lID0gYm9uZU5hbWVzW2ldKSkgLy8gQm9uZSBSZWZlcmVuY2VcblxuICAgIC8vfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5cbiAgICAvLyBVcCBkaXJlY3Rpb24gaXMgd2hlcmUgd2UgbmVlZCB0aGUgYm9uZSB0byBwb2ludCB0by5cbiAgICAvLyBXZSB0aGVuIGdldCB0aGUgYm9uZSdzIGN1cnJlbnQgZm9yd2FyZCBkaXJlY3Rpb24sIHVzZSBpdFxuICAgIC8vIHRvIGdldCBpdHMgbGVmdCwgdGhlbiBmaW5pc2ggaXQgb2ZmIGJ5IHJlY2FsY3VsYXRpbmdcbiAgICAvLyBmd2QgdG8gbWFrZSBpdCBvcnRob2dvbmFsLiBXYW50IHRvIHRyeSB0byBrZWVwIHRoZSBvcmllbnRhdGlvblxuICAgIC8vIHdoaWxlICggZndkLCBsZnQgKSByZWFsaWduaW5nIHRoZSB1cCBkaXJlY3Rpb24uXG4gICAgY29uc3QgY2hpbGRXb3JsZFEgPSB0ZW1wUXVhdDFcbiAgICBib25lLmdldFdvcmxkUXVhdGVybmlvbihjaGlsZFdvcmxkUSlcblxuICAgIGNvbnN0IGZvcndhcmREaXIgPSB0ZW1wVmVjMS5jb3B5KEZPUldBUkQpLmFwcGx5UXVhdGVybmlvbihjaGlsZFdvcmxkUSkgLy8gRmluZCBCb25lJ3MgRm9yd2FyZCBXb3JsZCBEaXJlY3Rpb25cbiAgICBjb25zdCBsZWZ0RGlyID0gdGVtcFZlYzIuY3Jvc3NWZWN0b3JzKHVwRGlyLCBmb3J3YXJkRGlyKS5ub3JtYWxpemUoKSAvLyBHZXQgV29ybGQgTGVmdFxuICAgIGZvcndhcmREaXIuY3Jvc3NWZWN0b3JzKGxlZnREaXIsIHVwRGlyKS5ub3JtYWxpemUoKSAvLyBSZWFsaWduIEZvcndhcmRcbiAgICBjb25zdCB1cERpciA9IHRlbXBWZWMzLmNvcHkoZGlyKVxuXG4gICAgY29uc3QgZmluYWxSb3RhdGlvbiA9IHRlbXBRdWF0MlxuICAgIHRlbXBNYXQubWFrZUJhc2lzKGxlZnREaXIsIHVwRGlyLCBmb3J3YXJkRGlyKVxuICAgIGZpbmFsUm90YXRpb24uc2V0RnJvbVJvdGF0aW9uTWF0cml4KHRlbXBNYXQpIC8vIENyZWF0ZSBSb3RhdGlvbiBmcm9tIHJvdCBNYXRyaXhcblxuICAgIGlmIChmaW5hbFJvdGF0aW9uLmRvdChjaGlsZFdvcmxkUSkgPCAwKSBuZWdhdGVRdWF0KGZpbmFsUm90YXRpb24pIC8vIERvIGEgSW52ZXJ0ZWQgcm90YXRpb24gY2hlY2ssIG5lZ2F0ZSBpdCBpZiB1bmRlciB6ZXJvLlxuXG4gICAgY29uc3QgcGFyZW50V29ybGRRID0gdGVtcFF1YXQxXG4gICAgYm9uZS5nZXRXb3JsZFF1YXRlcm5pb24ocGFyZW50V29ybGRRKVxuXG4gICAgLy9yLnBtdWwoIHEuZnJvbV9pbnZlcnQoIHB0LnJvdCApICk7XHRcdC8vIE1vdmUgcm90YXRpb24gdG8gbG9jYWwgc3BhY2VcbiAgICBwbXVsSW52ZXJ0KGZpbmFsUm90YXRpb24sIHBhcmVudFdvcmxkUSkgLy8gTW92ZSByb3RhdGlvbiB0byBsb2NhbCBzcGFjZVxuICAgIC8vIHBvc2Uuc2V0X2JvbmUoIGJvbmUuaWR4LCBmaW5hbFJvdGF0aW9uICk7XHRcdFx0XHRcdC8vIFVwZGF0ZSBQb3NlIHdpdGggbmV3IGxzIHJvdGF0aW9uXG4gICAgYm9uZS5zZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKGZpbmFsUm90YXRpb24pXG5cbiAgICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG4gICAgLy8gSWYgbm90IHRoZSBsYXN0IGJvbmUsIHRha2UgdGhlbiB0aGUgbmV3IHJvdGF0aW9uIHRvIGNhbGMgdGhlIG5leHQgcGFyZW50c1xuICAgIC8vIHdvcmxkIHNwYWNlIHRyYW5zZm9ybSBmb3IgdGhlIG5leHQgYm9uZSBvbiB0aGUgbGlzdC5cbiAgICBpZiAoaSAhPSBhRW5kKSB7XG4gICAgICAvLyBwdC5hZGQoIGZpbmFsUm90YXRpb24sIGJvbmUubG9jYWwucG9zLCBib25lLmxvY2FsLnNjbCApO1xuICAgICAgLy9+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flxuICAgICAgLy8gUE9TSVRJT04gLSBwYXJlbnQucG9zaXRpb24gKyAoIHBhcmVudC5yb3RhdGlvbiAqICggcGFyZW50LnNjYWxlICogY2hpbGQucG9zaXRpb24gKSApXG4gICAgICAvLyBjb25zdCB0ID0gbmV3IFZlY3RvcjMoKS5jb3B5KGNoaWxkV29ybGRQKS5hZGQobmV3IFZlY3RvcjMoKS5jb3B5KGNoaWxkV29ybGRTKS5tdWx0aXBseShib25lLnBvc2l0aW9uKSlcbiAgICAgIC8vIHRyYW5zZm9ybVF1YXQodCwgY2hpbGRXb3JsZFEpXG5cbiAgICAgIC8vfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5cbiAgICAgIC8vIFNDQUxFIC0gcGFyZW50LnNjYWxlICogY2hpbGQuc2NhbGVcbiAgICAgIGNvbnN0IHBhcmVudFdvcmxkUyA9IHRlbXBWZWMxXG4gICAgICBib25lLmdldFdvcmxkU2NhbGUocGFyZW50V29ybGRTKVxuICAgICAgcGFyZW50V29ybGRTLm11bHRpcGx5KGJvbmUuc2NhbGUpXG5cbiAgICAgIC8vfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5cbiAgICAgIC8vIFJPVEFUSU9OIC0gcGFyZW50LnJvdGF0aW9uICogY2hpbGQucm90YXRpb25cbiAgICAgIHBhcmVudFdvcmxkUS5tdWx0aXBseShmaW5hbFJvdGF0aW9uKVxuICAgICAgY29uc3QgcGFyZW50V29ybGRQID0gdGVtcFZlYzJcbiAgICAgIGJvbmUuZ2V0V29ybGRQb3NpdGlvbihwYXJlbnRXb3JsZFApXG5cbiAgICAgIGJvbmUgPSBwb3NlLmJvbmVzLmZpbmQoKGJvbmUpID0+IChib25lLm5hbWUgPSBib25lTmFtZXNbaSArIDFdKSkuYm9uZSBhcyBPYmplY3QzRCAvLyBCb25lIFJlZmVyZW5jZVxuICAgICAgYm9uZS5wb3NpdGlvbi5jb3B5KHBhcmVudFdvcmxkUClcbiAgICAgIGJvbmUucXVhdGVybmlvbi5jb3B5KHBhcmVudFdvcmxkUSlcbiAgICAgIGJvbmUuc2NhbGUuY29weShwYXJlbnRXb3JsZFMpXG4gICAgfVxuICB9XG4gIHBvc2Uuc2tlbGV0b24udXBkYXRlKClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBtdWxJbnZlcnQocU91dDogUXVhdGVybmlvbiwgcTogUXVhdGVybmlvbikge1xuICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG4gIC8vIHEuaW52ZXJ0KClcbiAgbGV0IGF4ID0gcS54LFxuICAgIGF5ID0gcS55LFxuICAgIGF6ID0gcS56LFxuICAgIGF3ID0gcS53XG4gIGNvbnN0IGRvdCA9IGF4ICogYXggKyBheSAqIGF5ICsgYXogKiBheiArIGF3ICogYXdcblxuICBpZiAoZG90ID09IDApIHtcbiAgICBheCA9IGF5ID0gYXogPSBhdyA9IDBcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBkb3RJbnYgPSAxLjAgLyBkb3RcbiAgICBheCA9IC1heCAqIGRvdEludlxuICAgIGF5ID0gLWF5ICogZG90SW52XG4gICAgYXogPSAtYXogKiBkb3RJbnZcbiAgICBhdyA9IGF3ICogZG90SW52XG4gIH1cblxuICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG4gIC8vIFF1YXQubXVsKCBhLCBiICk7XG4gIGNvbnN0IGJ4ID0gcU91dC54LFxuICAgIGJ5ID0gcU91dC55LFxuICAgIGJ6ID0gcU91dC56LFxuICAgIGJ3ID0gcU91dC53XG4gIHFPdXQueCA9IGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnlcbiAgcU91dC55ID0gYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBielxuICBxT3V0LnogPSBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4XG4gIHFPdXQudyA9IGF3ICogYncgLSBheCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYnpcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5lZ2F0ZVF1YXQocTogUXVhdGVybmlvbik6IFF1YXRlcm5pb24ge1xuICBxLnggPSAtcS54XG4gIHEueSA9IC1xLnlcbiAgcS56ID0gLXEuelxuICBxLncgPSAtcS53XG4gIHJldHVybiBxXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzcGluQm9uZUZvcndhcmQocG9zZTogUG9zZSwgZm9vdDogc3RyaW5nKSB7XG4gIC8vIFRPRE86IGNoZWNrIGlmIHRoaXMgZnVuY3Rpb24gaXMgdXNlZFxuICBjb25zb2xlLndhcm4oJ3NwaW5fYm9uZV9mb3J3YXJkIGlzIG5vdCB0ZXN0ZWQnKVxuICBjb25zdCB2ID0gdGVtcFZlYzEsXG4gICAgcSA9IHRlbXBRdWF0MSxcbiAgICBib25lU3RhdGUgPSBwb3NlLmdldEJvbmUoZm9vdClcbiAgY29uc3QgYiA9IGJvbmVTdGF0ZS5ib25lXG5cbiAgY29uc3QgcGFyZW50V29ybGRRdWF0ZXJuaW9uID0gdGVtcFF1YXQyXG4gIGIucGFyZW50LmdldFdvcmxkUXVhdGVybmlvbihwYXJlbnRXb3JsZFF1YXRlcm5pb24pXG5cbiAgYi5wb3NpdGlvbi5jb3B5KHYpLmFkZCh0ZW1wVmVjMi5zZXQoMCwgYm9uZVN0YXRlLmxlbmd0aCwgMCkpXG5cbiAgdi5tdWx0aXBseShzY2wpXG4gIHYuYXBwbHlRdWF0ZXJuaW9uKHJvdClcblxuICAvLyB2LnN1YiggYi5wb3NpdGlvbiApO1x0XHRcdFx0XHRcdFx0Ly8gR2V0IFRoZSBkaXJlY3Rpb24gdG8gdGhlIHRhaWxcbiAgdi54ID0gMCAvLyBGbGF0dGVuIHZlY3RvciB0byAyRCBieSByZW1vdmluZyBZIFBvc2l0aW9uXG4gIHYubm9ybWFsaXplKCkgLy8gTWFrZSBpdCBhIHVuaXQgdmVjdG9yXG4gIHEuc2V0RnJvbVVuaXRWZWN0b3JzKHYsIEZPUldBUkQpIC8vIFJvdGF0aW9uIG5lZWRlZCB0byBwb2ludCB0aGUgZm9vdCBmb3J3YXJkLlxuICBxLm11bHRpcGx5KGIucXVhdGVybmlvbikgLy8gTW92ZSBXUyBGb290IHRvIHBvaW50IGZvcndhcmRcbiAgcG11bEludmVydChxLCBiLnF1YXRlcm5pb24pIC8vIFRvIExvY2FsIFNwYWNlXG4gIHBvc2Uuc2V0Qm9uZShib25lU3RhdGUuaWR4LCBxKSAvLyBTYXZlIHRvIFBvc2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBtdWxBeGlzQW5nbGUob3V0LCBheGlzLCBhbmdsZSkge1xuICBjb25zdCBoYWxmID0gYW5nbGUgKiAwLjUsXG4gICAgcyA9IE1hdGguc2luKGhhbGYpLFxuICAgIGF4ID0gYXhpcy54ICogcywgLy8gQSBRdWF0IGJhc2VkIG9uIEF4aXMgQW5nbGVcbiAgICBheSA9IGF4aXMueSAqIHMsXG4gICAgYXogPSBheGlzLnogKiBzLFxuICAgIGF3ID0gTWF0aC5jb3MoaGFsZiksXG4gICAgYnggPSBvdXQueCwgLy8gQiBvZiBtdWxcbiAgICBieSA9IG91dC55LFxuICAgIGJ6ID0gb3V0LnosXG4gICAgYncgPSBvdXQud1xuXG4gIC8vIFF1YXQubXVsKCBhLCBiICk7XG4gIG91dC54ID0gYXggKiBidyArIGF3ICogYnggKyBheSAqIGJ6IC0gYXogKiBieVxuICBvdXQueSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYnpcbiAgb3V0LnogPSBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4XG4gIG91dC53ID0gYXcgKiBidyAtIGF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBielxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWxpZ25Cb25lRm9yd2FyZChwb3NlOiBQb3NlLCBiX25hbWU6IHN0cmluZykge1xuICAvLyBUT0RPOiBjaGVjayBpZiB0aGlzIGZ1bmN0aW9uIGlzIHVzZWRcbiAgY29uc29sZS53YXJuKCdzcGluX2JvbmVfZm9yd2FyZCBpcyBub3QgdGVzdGVkJylcbiAgY29uc3QgdiA9IHRlbXBWZWMxLFxuICAgIHEgPSB0ZW1wUXVhdDEsXG4gICAgYm9uZVN0YXRlID0gcG9zZS5nZXRCb25lKGJfbmFtZSlcbiAgY29uc3QgYiA9IGJvbmVTdGF0ZS5ib25lXG5cbiAgY29uc3QgcGFyZW50V29ybGRRdWF0ZXJuaW9uID0gdGVtcFF1YXQyXG4gIGIucGFyZW50LmdldFdvcmxkUXVhdGVybmlvbihwYXJlbnRXb3JsZFF1YXRlcm5pb24pXG5cbiAgZnJvbVF1YXQodiwgYi5xdWF0ZXJuaW9uLCBVUCkgLy8gR2V0IEJvbmUncyBXUyBVUCBEaXJlY3Rpb25cblxuICBxLnNldEZyb21Vbml0VmVjdG9ycyh2LCBGT1JXQVJEKSAvLyBEaWZmZXJlbmNlIGJldHdlZW4gQ3VycmVudCBVUCBhbmQgV1MgRm9yd2FyZFxuICBxLm11bHRpcGx5KGIucXVhdGVybmlvbikgLy8gUHJlTXVsIERpZmZlcmVuY2UgdG8gQ3VycmVudCBSb3RhdGlvblxuICBwbXVsSW52ZXJ0KHEsIHBhcmVudFdvcmxkUXVhdGVybmlvbikgLy8gQ29udmVydCB0byBMb2NhbCBTcGFjZVxuXG4gIHBvc2Uuc2V0Qm9uZShib25lU3RhdGUuaWR4LCBxKSAvLyBTYXZlIHRvIFBvc2Vcbn1cblxuZnVuY3Rpb24gZnJvbVF1YXQob3V0OiBWZWN0b3IzLCBxOiBRdWF0ZXJuaW9uLCB2OiBWZWN0b3IzKSB7XG4gIGNvbnN0IHF4ID0gcS54LFxuICAgIHF5ID0gcS55LFxuICAgIHF6ID0gcS56LFxuICAgIHF3ID0gcS53LFxuICAgIHZ4ID0gdi54LFxuICAgIHZ5ID0gdi55LFxuICAgIHZ6ID0gdi56LFxuICAgIHgxID0gcXkgKiB2eiAtIHF6ICogdnksXG4gICAgeTEgPSBxeiAqIHZ4IC0gcXggKiB2eixcbiAgICB6MSA9IHF4ICogdnkgLSBxeSAqIHZ4LFxuICAgIHgyID0gcXcgKiB4MSArIHF5ICogejEgLSBxeiAqIHkxLFxuICAgIHkyID0gcXcgKiB5MSArIHF6ICogeDEgLSBxeCAqIHoxLFxuICAgIHoyID0gcXcgKiB6MSArIHF4ICogeTEgLSBxeSAqIHgxXG5cbiAgb3V0LnggPSB2eCArIDIgKiB4MlxuICBvdXQueSA9IHZ5ICsgMiAqIHkyXG4gIG91dC56ID0gdnogKyAyICogejJcbiAgcmV0dXJuIG91dFxufVxuXG4vKipcbiAqIENyZWF0ZSBhIHN3aW5nL3R3aXN0IGNvbXBvbmVudHMgYmFzZWQgb24gdGhlIGdpdmVuIGlucHV0IHF1YXRlcm5pb25zXG4gKiBSZWY6IGh0dHA6Ly9hbGxlbmNob3UubmV0LzIwMTgvMDUvZ2FtZS1tYXRoLXN3aW5nLXR3aXN0LWludGVycG9sYXRpb24tc3RlcnAvXG4gKiBAcGFyYW0gc291cmNlXG4gKiBAcGFyYW0gdGFyZ2V0XG4gKiBAcGFyYW0gZm9yd2FyZFxuICogQHBhcmFtIHVwXG4gKiBAcGFyYW0gb3V0IHtzd2luZzogUXVhdGVybmlvbiwgdHdpc3Q6IG51bWJlcn1cbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlU3dpbmdBbmRUd2lzdChzb3VyY2U6IFF1YXRlcm5pb24sIHRhcmdldDogUXVhdGVybmlvbiwgZm9yd2FyZDogVmVjdG9yMywgdXA6IFZlY3RvcjMsIG91dDogYW55KSB7XG4gIGNvbnN0IHF1YXRJbnZlcnNlID0gdGVtcFF1YXQxLmNvcHkodGFyZ2V0KS5pbnZlcnQoKSxcbiAgICBhbHRGb3J3YXJkID0gdGVtcFZlYzEuY29weShmb3J3YXJkKS5hcHBseVF1YXRlcm5pb24ocXVhdEludmVyc2UpLFxuICAgIGFsdFVwID0gdGVtcFZlYzIuY29weSh1cCkuYXBwbHlRdWF0ZXJuaW9uKHF1YXRJbnZlcnNlKVxuXG4gIGNvbnN0IHBvc2VGb3J3YXJkID0gYWx0Rm9yd2FyZC5hcHBseVF1YXRlcm5pb24oc291cmNlKSxcbiAgICBwb3NlVXAgPSBhbHRVcC5hcHBseVF1YXRlcm5pb24oc291cmNlKVxuXG4gIGNvbnN0IHN3aW5nID0gdGVtcFF1YXQxXG4gICAgLnNldEZyb21Vbml0VmVjdG9ycyhmb3J3YXJkLCBwb3NlRm9yd2FyZCkgLy8gRmlyc3Qgd2UgY3JlYXRlIGEgc3dpbmcgcm90YXRpb24gZnJvbSBvbmUgZGlyIHRvIHRoZSBvdGhlci5cbiAgICAubXVsdGlwbHkodGFyZ2V0KSAvLyBUaGVuIHdlIGFwcGx5IGl0IHRvIHRoZSBUQm9uZSBSb3RhdGlvbiwgdGhpcyB3aWxsIGRvIGEgRldEIFN3aW5nIHdoaWNoIHdpbGwgY3JlYXRlXG5cbiAgLy8gYSBuZXcgVXAgZGlyZWN0aW9uIGJhc2VkIG9uIG9ubHkgc3dpbmcuXG4gIGNvbnN0IHN3aW5nVXAgPSB0ZW1wVmVjMy5jb3B5KHVwKS5hcHBseVF1YXRlcm5pb24oc3dpbmcpXG4gIGxldCB0d2lzdCA9IHN3aW5nVXAuYW5nbGVUbyhwb3NlVXApXG5cbiAgY29uc3QgdmVjM0RvdCA9IHN3aW5nVXAuY3Jvc3MocG9zZUZvcndhcmQpLmRvdChwb3NlVXApXG4gIGlmICh2ZWMzRG90ID49IDApIHR3aXN0ID0gLXR3aXN0XG5cbiAgb3V0LnN3aW5nLmNvcHkoc3dpbmcpXG4gIG91dC50d2lzdCA9IHR3aXN0XG59XG5cbi8qKlxuICogQXBwbGllcyBzd2luZy90d2lzdCByb3RhdGlvbiB0byB0aGUgdGFyZ2V0IHF1YXRlcm5pb25cbiAqIEBwYXJhbSB0YXJnZXRcbiAqIEBwYXJhbSBzd2luZ1xuICogQHBhcmFtIHR3aXN0XG4gKiBAcGFyYW0gb3JpZ2luYWxGb3J3YXJkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVN3aW5nQW5kVHdpc3QodGFyZ2V0OiBRdWF0ZXJuaW9uLCBzd2luZzogUXVhdGVybmlvbiwgdHdpc3Q6IG51bWJlciwgb3JpZ2luYWxGb3J3YXJkOiBWZWN0b3IzKSB7XG4gIGNvbnN0IHAgPSB0ZW1wUXVhdDEuY29weSh0YXJnZXQpXG4gIHRhcmdldC5wcmVtdWx0aXBseShzd2luZykgLy8gUHJlTXVsdGlwbHkgb3VyIHN3aW5nIHJvdGF0aW9uIHRvIG91ciB0YXJnZXQncyBjdXJyZW50IHJvdGF0aW9uLlxuXG4gIHRhcmdldC5wcmVtdWx0aXBseSh0ZW1wUXVhdDIuc2V0RnJvbUF4aXNBbmdsZShvcmlnaW5hbEZvcndhcmQsIHR3aXN0KSlcblxuICBwbXVsSW52ZXJ0KHRhcmdldCwgcClcbn1cblxuLyoqXG4gKiBDb252ZXJ0IHdvcmxkIGNvb3JkaW5hdGVzIHRvIG1vZGVsIGNvb3JkaW5hdGVzIHdpdGggcm9vdCB0cmFuc2Zvcm1cbiAqIEBwYXJhbSBwb3NpdGlvbiB3aWxsIGJlIG1vZGlmaWVkXG4gKiBAcGFyYW0gcXVhdGVybmlvbiB3aWxsIGJlIG1vZGlmaWVkXG4gKiBAcGFyYW0gc2NhbGUgd2lsbCBiZSBtb2RpZmllZFxuICogQHBhcmFtIHJvb3RUcmFuc2Zvcm1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdvcmxkVG9Nb2RlbChcbiAgcG9zaXRpb246IFZlY3RvcjMsXG4gIHF1YXRlcm5pb246IFF1YXRlcm5pb24sXG4gIHNjYWxlOiBWZWN0b3IzLFxuICByb290VHJhbnNmb3JtOiB7IHBvc2l0aW9uOiBWZWN0b3IzOyBxdWF0ZXJuaW9uOiBRdWF0ZXJuaW9uOyBpbnZRdWF0ZXJuaW9uOiBRdWF0ZXJuaW9uOyBzY2FsZTogVmVjdG9yMyB9XG4pOiB2b2lkIHtcbiAgY29uc3Qgcm9vdFJvdGF0aW9uSW52ZXJ0ZWQgPSByb290VHJhbnNmb3JtLmludlF1YXRlcm5pb25cbiAgcG9zaXRpb24uc3ViKHJvb3RUcmFuc2Zvcm0ucG9zaXRpb24pLmFwcGx5UXVhdGVybmlvbihyb290Um90YXRpb25JbnZlcnRlZCkuZGl2aWRlKHJvb3RUcmFuc2Zvcm0uc2NhbGUpXG4gIHF1YXRlcm5pb24ucHJlbXVsdGlwbHkocm9vdFJvdGF0aW9uSW52ZXJ0ZWQpXG4gIHNjYWxlLmRpdmlkZShyb290VHJhbnNmb3JtLnNjYWxlKVxufVxuIiwiLy8gQHRzLW5vY2hlY2tcbmltcG9ydCB7IEJvbmUsIFNraW5uZWRNZXNoIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBPYmplY3QzRCwgUXVhdGVybmlvbiwgU2tlbGV0b24sIFZlY3RvcjMgfSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IFNrZWxldG9uVXRpbHMgfSBmcm9tICcuLi8uLi9hdmF0YXIvU2tlbGV0b25VdGlscydcbmltcG9ydCB7IERPV04sIExFRlQsIFJJR0hUIH0gZnJvbSAnLi4vY29uc3RhbnRzL1ZlY3RvcjNDb25zdGFudHMnXG5pbXBvcnQgeyBzcGluQm9uZUZvcndhcmQsIGFsaWduQ2hhaW4sIGFsaWduQm9uZUZvcndhcmQsIHdvcmxkVG9Nb2RlbCB9IGZyb20gJy4uL2Z1bmN0aW9ucy9JS0Z1bmN0aW9ucydcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gJy4uLy4uL2Vjcy9jbGFzc2VzL0VudGl0eSdcbmltcG9ydCB7IHRyYW5zZm9ybUFkZCB9IGZyb20gJy4uL2Z1bmN0aW9ucy9JS1NvbHZlcnMnXG5cbmV4cG9ydCB0eXBlIFBvc2VCb25lVHJhbnNmb3JtID0ge1xuICBwb3NpdGlvbjogVmVjdG9yM1xuICBxdWF0ZXJuaW9uOiBRdWF0ZXJuaW9uXG4gIHNjYWxlOiBWZWN0b3IzXG59XG5cbmV4cG9ydCB0eXBlIFBvc2VCb25lTG9jYWxTdGF0ZSA9IHtcbiAgYm9uZTogQm9uZVxuICBwYXJlbnQ6IEJvbmUgfCBudWxsXG4gIGNoZ19zdGF0ZTogbnVtYmVyIC8vIElmIExvY2FsIEhhcyBCZWVuIFVwZGF0ZWRcbiAgaWR4OiBudW1iZXIgLy8gQm9uZSBJbmRleCBpbiBBcm1hdHVyZVxuICBwX2lkeDogbnVtYmVyIHwgbnVsbCAvLyBQYXJlbnQgQm9uZSBJbmRleCBpbiBBcm1hdHVyZVxuICBsZW5ndGg6IG51bWJlciAvLyBMZW5ndGggb2YgQm9uZVxuICBuYW1lOiBzdHJpbmdcbiAgbG9jYWw6IFBvc2VCb25lVHJhbnNmb3JtIC8vIExvY2FsIFRyYW5zZm9ybSwgdXNlIEJpbmQgcG9zZSBhcyBkZWZhdWx0XG4gIHdvcmxkOiBQb3NlQm9uZVRyYW5zZm9ybSAvLyBNb2RlbCBTcGFjZSBUcmFuc2Zvcm1cbn1cblxuY2xhc3MgUG9zZSB7XG4gIHN0YXRpYyBST1RBVElPTiA9IDFcbiAgc3RhdGljIFBPU0lUSU9OID0gMlxuICBzdGF0aWMgU0NBTEUgPSA0XG5cbiAgZW50aXR5OiBFbnRpdHlcbiAgc2tlbGV0b246IFNrZWxldG9uXG4gIGJvbmVzOiBQb3NlQm9uZUxvY2FsU3RhdGVbXVxuICByb290T2Zmc2V0ID0ge1xuICAgIHF1YXRlcm5pb246IG5ldyBRdWF0ZXJuaW9uKCksXG4gICAgcG9zaXRpb246IG5ldyBWZWN0b3IzKDAsIDAsIDApLFxuICAgIHNjYWxlOiBuZXcgVmVjdG9yMygxLCAxLCAxKVxuICB9XG4gIGhlbHBlcjogYW55XG5cbiAgYWxpZ25fbGVnKGJfbmFtZXM6IHN0cmluZ1tdKSB7XG4gICAgYWxpZ25DaGFpbih0aGlzLCBET1dOLCBiX25hbWVzKVxuICAgIHJldHVybiB0aGlzXG4gIH1cbiAgYWxpZ25fYXJtX2xlZnQoYl9uYW1lczogc3RyaW5nW10pIHtcbiAgICBhbGlnbkNoYWluKHRoaXMsIExFRlQsIGJfbmFtZXMpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuICBhbGlnbl9hcm1fcmlnaHQoYl9uYW1lczogc3RyaW5nW10pIHtcbiAgICBhbGlnbkNoYWluKHRoaXMsIFJJR0hULCBiX25hbWVzKVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBhbGlnbl9mb290KGJfbmFtZTogc3RyaW5nKSB7XG4gICAgc3BpbkJvbmVGb3J3YXJkKHRoaXMsIGJfbmFtZSlcbiAgICBhbGlnbkJvbmVGb3J3YXJkKHRoaXMsIGJfbmFtZSlcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgc3Bpbl9ib25lX2ZvcndhcmQoYl9uYW1lOiBzdHJpbmcpIHtcbiAgICBzcGluQm9uZUZvcndhcmQodGhpcywgYl9uYW1lKVxuICAgIHJldHVybiB0aGlzXG4gIH1cbiAgYWxpZ25fYm9uZV9mb3J3YXJkKGJfbmFtZTogc3RyaW5nKSB7XG4gICAgYWxpZ25Cb25lRm9yd2FyZCh0aGlzLCBiX25hbWUpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gcm9vdE9iamVjdCBvYmplY3QgY29udGFpbmluZyBza2lubmVkTWVzaCBhbmQgaXQncyBib25lc1xuICAgKiBAcGFyYW0gY2xvbmUgbWFrZSBhIGNsb25lZCB2ZXJzaW9uIG9mIHNrZWxldG9uXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihyb290T2JqZWN0OiBPYmplY3QzRCwgY2xvbmUgPSBmYWxzZSkge1xuICAgIHRoaXMuYm9uZXMgPSBbXVxuICAgIGNvbnN0IHBhcmVudDogT2JqZWN0M0QgPSBjbG9uZSA/IFNrZWxldG9uVXRpbHMuY2xvbmUocm9vdE9iamVjdCkgOiByb290T2JqZWN0XG4gICAgdGhpcy5za2VsZXRvbiA9IHRoaXMuZ2V0X3NrZWxldG9uKHBhcmVudCkgLy8gUmVjcmVhdGlvbiBvZiBCb25lIEhpZXJhcmNoeVxuXG4gICAgaWYgKCF0aGlzLnNrZWxldG9uLmJvbmVzWzBdKSB7XG4gICAgICBkZWJ1Z2dlclxuICAgIH1cblxuICAgIC8vIHRoaXMuYm9uZXMgPSB0aGlzLnNrZWxldG9uLmJvbmVzXG4gICAgdGhpcy5yb290T2Zmc2V0ID0gbmV3IE9iamVjdDNEKCkgLy8gUGFyZW50IFRyYW5zZm9ybSBmb3IgUm9vdCBCb25lICggU2tlbGV0b25zIGZyb20gRkJYIGltcG9ydHMgbmVlZCB0aGlzIHRvIHJlbmRlciByaWdodCApXG5cbiAgICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5cbiAgICAvLyBDcmVhdGUgQm9uZSBUcmFuc2Zvcm0gSGllcmFyY2h5IHRvIGRvIHRyYW5zZm9ybWF0aW9uc1xuICAgIC8vIHdpdGhvdXQgY2hhbmdpbmcgdGhlIGFjdHVhbCBhcm1hdHVyZS5cbiAgICBjb25zdCBza2VsZXRvblRyYW5zZm9ybSA9IHtcbiAgICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMygpLFxuICAgICAgcXVhdGVybmlvbjogbmV3IFF1YXRlcm5pb24oKSxcbiAgICAgIGludlF1YXRlcm5pb246IG5ldyBRdWF0ZXJuaW9uKCksXG4gICAgICBzY2FsZTogbmV3IFZlY3RvcjMoKVxuICAgIH1cblxuICAgIGNvbnN0IHJvb3RCb25lID0gdGhpcy5za2VsZXRvbi5ib25lcy5maW5kKChiKSA9PiAhKGIucGFyZW50IGluc3RhbmNlb2YgQm9uZSkpXG4gICAgaWYgKHJvb3RCb25lLnBhcmVudCkge1xuICAgICAgcm9vdEJvbmUucGFyZW50LmdldFdvcmxkUG9zaXRpb24oc2tlbGV0b25UcmFuc2Zvcm0ucG9zaXRpb24pXG4gICAgICByb290Qm9uZS5wYXJlbnQuZ2V0V29ybGRRdWF0ZXJuaW9uKHNrZWxldG9uVHJhbnNmb3JtLnF1YXRlcm5pb24pXG4gICAgICByb290Qm9uZS5wYXJlbnQuZ2V0V29ybGRTY2FsZShza2VsZXRvblRyYW5zZm9ybS5zY2FsZSlcbiAgICAgIHNrZWxldG9uVHJhbnNmb3JtLmludlF1YXRlcm5pb24uY29weShza2VsZXRvblRyYW5zZm9ybS5xdWF0ZXJuaW9uKS5pbnZlcnQoKVxuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5za2VsZXRvbi5ib25lcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYiA9IHRoaXMuc2tlbGV0b24uYm9uZXNbaV1cbiAgICAgIGxldCBwX2lkeCwgYm9uZVBhcmVudFxuICAgICAgaWYgKGIucGFyZW50ICYmIGIucGFyZW50IGluc3RhbmNlb2YgQm9uZSkge1xuICAgICAgICBwX2lkeCA9IHRoaXMuc2tlbGV0b24uYm9uZXMuaW5kZXhPZihiLnBhcmVudClcbiAgICAgICAgYm9uZVBhcmVudCA9IGIucGFyZW50XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGJvbmVEYXRhID0ge1xuICAgICAgICBib25lOiBiLFxuICAgICAgICBwYXJlbnQ6IGJvbmVQYXJlbnQsXG4gICAgICAgIGNoZ19zdGF0ZTogMCwgLy8gSWYgTG9jYWwgSGFzIEJlZW4gVXBkYXRlZFxuICAgICAgICBpZHg6IGksIC8vIEJvbmUgSW5kZXggaW4gQXJtYXR1cmVcbiAgICAgICAgcF9pZHg6IHBfaWR4LCAvLyBQYXJlbnQgQm9uZSBJbmRleCBpbiBBcm1hdHVyZVxuICAgICAgICBsZW5ndGg6IDAuMSwgLy8gTGVuZ3RoIG9mIEJvbmVcbiAgICAgICAgbmFtZTogYi5uYW1lLFxuICAgICAgICBsb2NhbDoge1xuICAgICAgICAgIHBvc2l0aW9uOiBiLnBvc2l0aW9uLmNsb25lKCksXG4gICAgICAgICAgcXVhdGVybmlvbjogYi5xdWF0ZXJuaW9uLmNsb25lKCksXG4gICAgICAgICAgc2NhbGU6IGIuc2NhbGUuY2xvbmUoKVxuICAgICAgICB9LCAvLyBMb2NhbCBUcmFuc2Zvcm0sIHVzZSBCaW5kIHBvc2UgYXMgZGVmYXVsdFxuICAgICAgICB3b3JsZDoge1xuICAgICAgICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMygpLFxuICAgICAgICAgIHF1YXRlcm5pb246IG5ldyBRdWF0ZXJuaW9uKCksXG4gICAgICAgICAgaW52UXVhdGVybmlvbjogbmV3IFF1YXRlcm5pb24oKSxcbiAgICAgICAgICBzY2FsZTogbmV3IFZlY3RvcjMoKVxuICAgICAgICB9IC8vIE1vZGVsIFNwYWNlIFRyYW5zZm9ybVxuICAgICAgfVxuXG4gICAgICBiLmdldFdvcmxkUG9zaXRpb24oYm9uZURhdGEud29ybGQucG9zaXRpb24pXG4gICAgICBiLmdldFdvcmxkUXVhdGVybmlvbihib25lRGF0YS53b3JsZC5xdWF0ZXJuaW9uKVxuICAgICAgYi5nZXRXb3JsZFNjYWxlKGJvbmVEYXRhLndvcmxkLnNjYWxlKVxuXG4gICAgICAvLyBjb252ZXJ0IHRvIG1vZGVsIHNwYWNlXG4gICAgICB3b3JsZFRvTW9kZWwoYm9uZURhdGEud29ybGQucG9zaXRpb24sIGJvbmVEYXRhLndvcmxkLnF1YXRlcm5pb24sIGJvbmVEYXRhLndvcmxkLnNjYWxlLCBza2VsZXRvblRyYW5zZm9ybSlcbiAgICAgIC8vIENhbGN1bGF0ZSB0aGlzIG9uY2UgZm9yIHRwb3NlXG4gICAgICBib25lRGF0YS53b3JsZC5pbnZRdWF0ZXJuaW9uLmNvcHkoYm9uZURhdGEud29ybGQucXVhdGVybmlvbikuaW52ZXJ0KClcblxuICAgICAgLy9iWydpbmRleCddID0gaVxuICAgICAgaWYgKGIuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBiLmdldFdvcmxkUG9zaXRpb24oYldvcmxkUG9zaXRpb24pXG4gICAgICAgIC8vIGIuY2hpbGRyZW5bMF0uZ2V0V29ybGRQb3NpdGlvbihiQ2hpbGRXb3JsZFBvc2l0aW9uKVxuICAgICAgICAvLyBiV29ybGRQb3NpdGlvbi5kaXZpZGUoc2tlbGV0b25UcmFuc2Zvcm0uc2NhbGUpXG4gICAgICAgIC8vIGJDaGlsZFdvcmxkUG9zaXRpb24uZGl2aWRlKHNrZWxldG9uVHJhbnNmb3JtLnNjYWxlKVxuXG4gICAgICAgIGJvbmVEYXRhLmxlbmd0aCA9IGIuY2hpbGRyZW5bMF0ucG9zaXRpb24ubGVuZ3RoKClcbiAgICAgIH1cblxuICAgICAgdGhpcy5ib25lc1tpXSA9IGJvbmVEYXRhXG4gICAgfVxuXG4gICAgdGhpcy5za2VsZXRvbi51cGRhdGUoKVxuICB9XG5cbiAgZ2V0X3NrZWxldG9uKHJvb3RPYmplY3Q6IE9iamVjdDNEKTogU2tlbGV0b24gfCBudWxsIHtcbiAgICBsZXQgc2tlbGV0b246IFNrZWxldG9uID0gbnVsbFxuXG4gICAgcm9vdE9iamVjdC50cmF2ZXJzZSgob2JqZWN0KSA9PiB7XG4gICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgU2tpbm5lZE1lc2ggJiYgb2JqZWN0LnNrZWxldG9uICE9IG51bGwpIHtcbiAgICAgICAgaWYgKHNrZWxldG9uICYmIHNrZWxldG9uLmJvbmVzLmxlbmd0aCA+IG9iamVjdC5za2VsZXRvbi5ib25lcy5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBza2VsZXRvbiA9IG9iamVjdC5za2VsZXRvblxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gc2tlbGV0b25cbiAgfVxuXG4gIHNldE9mZnNldChxdWF0ZXJuaW9uOiBRdWF0ZXJuaW9uLCBwb3NpdGlvbjogVmVjdG9yMywgc2NhbGU6IFZlY3RvcjMpIHtcbiAgICB0aGlzLnJvb3RPZmZzZXQucXVhdGVybmlvbi5jb3B5KHF1YXRlcm5pb24pXG4gICAgdGhpcy5yb290T2Zmc2V0LnBvc2l0aW9uLmNvcHkocG9zaXRpb24pXG4gICAgdGhpcy5yb290T2Zmc2V0LnNjYWxlLmNvcHkoc2NhbGUpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHNldEJvbmUoaW5kZXg6IG51bWJlciwgcXVhdGVybmlvbj86IFF1YXRlcm5pb24sIHBvc2l0aW9uPzogVmVjdG9yMywgc2NhbGU/OiBWZWN0b3IzKSB7XG4gICAgLy8gVE9ETzogY2hlY2sgdGhpcyBvdXQsIHRoZXkgc3RvcmUgdGhpcyBpbiBzZXBhcmF0ZSBzdHJ1Y3R1cmUgdGhhdCBkb2VzIG5vdCBjaGFuZ2Ugb3JpZ2luYWwgYm9uZSBkYXRhXG4gICAgaWYgKHF1YXRlcm5pb24pIHRoaXMuYm9uZXNbaW5kZXhdLmxvY2FsLnF1YXRlcm5pb24uY29weShxdWF0ZXJuaW9uKVxuICAgIGlmIChwb3NpdGlvbikgdGhpcy5ib25lc1tpbmRleF0ubG9jYWwucG9zaXRpb24uY29weShwb3NpdGlvbilcbiAgICBpZiAoc2NhbGUpIHRoaXMuYm9uZXNbaW5kZXhdLmxvY2FsLnNjYWxlLmNvcHkoc2NhbGUpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIGdldEJvbmUobmFtZTogc3RyaW5nKTogUG9zZUJvbmVMb2NhbFN0YXRlIHtcbiAgICAvLyBUT0RPOiByZXBsYWNlIHdpdGggTWFwP1xuICAgIHJldHVybiB0aGlzLmJvbmVzLmZpbmQoKGIpID0+IGIubmFtZSA9PT0gbmFtZSlcbiAgfVxuXG4gIGFwcGx5KCk6IFBvc2Uge1xuICAgIC8vIENvcGllcyBtb2RpZmllZCBMcXVhdEludmVyc2VvY2FsIFRyYW5zZm9ybXMgb2YgdGhlIFBvc2UgdG8gdGhlIEJvbmUgRW50aXRpZXMuXG4gICAgLy8gY29uc3QgdGFyZ2V0U2tlbGV0b246IFNrZWxldG9uID0gZ2V0Q29tcG9uZW50KHRoaXMuZW50aXR5LCBJS09iaikucmVmLnNrZWxldG9uXG5cbiAgICBsZXQgcGI6IFBvc2VCb25lTG9jYWxTdGF0ZSwgLy8gUG9zZSBCb25lXG4gICAgICBvOiBCb25lIC8vIEJvbmUgT2JqZWN0XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNrZWxldG9uLmJvbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwYiA9IHRoaXMuYm9uZXNbaV1cblxuICAgICAgLy8gQ2hlY2sgaWYgYm9uZSBoYXMgYmVlbiBtb2RpZmllZCBpbiB0aGUgcG9zZVxuICAgICAgbyA9IHRoaXMuc2tlbGV0b24uYm9uZXNbaV1cbiAgICAgIC8vIENvcHkgY2hhbmdlcyB0byBCb25lIEVudGl0eVxuICAgICAgLy8gby5zZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHBiLnF1YXRlcm5pb24pXG5cbiAgICAgIG8ucXVhdGVybmlvbi5jb3B5KHBiLmxvY2FsLnF1YXRlcm5pb24pXG4gICAgICBvLnBvc2l0aW9uLmNvcHkocGIubG9jYWwucG9zaXRpb24pXG4gICAgICBvLnNjYWxlLmNvcHkocGIubG9jYWwuc2NhbGUpXG4gICAgfVxuICAgIHRoaXMuc2tlbGV0b24udXBkYXRlKClcbiAgICAvLyB0YXJnZXRTa2VsZXRvbi51cGRhdGUoKVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvLyBJZiB0aGVzZSBhcmUgdGVtcCB2YXJzIG9rYXksIGJ1dCB0aGVzZSBtaWdodCBuZWVkIHRvIG1vdmUgdG8gdGhlIGJvbmVzPz8gRG8gd2UgbmVlZCB0aGVzZSBpZiB3ZSBoYXZlIHdvcmxkIHBvc2VzIG9uIGJvbmVzP1xuICBwYXJlbnRRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKVxuICBwYXJlbnRTY2FsZSA9IG5ldyBWZWN0b3IzKDEsIDEsIDEpXG4gIHBhcmVudFBvc2l0aW9uID0gbmV3IFZlY3RvcjMoMCwgMCwgMClcblxuICBjaGlsZFF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpXG4gIGNoaWxkU2NhbGUgPSBuZXcgVmVjdG9yMygxLCAxLCAxKVxuICBjaGlsZFBvc2l0aW9uID0gbmV3IFZlY3RvcjMoMCwgMCwgMClcblxuICAvLyBNYWtlIHN1cmUgdGhpcyBpcyBwcm9wZXJseSBuYW1lZFxuICBzZXRDaGlsZEZyb21QYXJlbnQocGFyZW50OiBPYmplY3QzRCwgY2hpbGQ6IE9iamVjdDNEKTogUG9zZSB7XG4gICAgY29uc29sZS5sb2coJ3BhcmVudCwgY2hpbGQnLCBwYXJlbnQsIGNoaWxkKVxuXG4gICAgLy8gUE9TSVRJT04gLSBwYXJlbnQucG9zaXRpb24gKyAoIHBhcmVudC5xdWF0ZXJuaW9uICogKCBwYXJlbnQuc2NhbGUgKiBjaGlsZC5wb3NpdGlvbiApIClcbiAgICAvLyBUT0RPOiBNYWtlIHN1cmUgdGhpcyBtYXRyaXggaXNuJ3QgZmxpcHBlZFxuICAgIGNvbnN0IHY6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMygpXG4gICAgICAuY29weShwYXJlbnQuc2NhbGUpXG4gICAgICAubXVsdGlwbHkoY2hpbGQucG9zaXRpb24pIC8vIHBhcmVudC5zY2FsZSAqIGNoaWxkLnBvc2l0aW9uO1xuICAgICAgLmFwcGx5UXVhdGVybmlvbihwYXJlbnQucXVhdGVybmlvbikgLy9WZWMzLnRyYW5zZm9ybVF1YXQoIHYsIHRwLnF1YXRlcm5pb24sIHYgKTtcbiAgICB0aGlzLmNoaWxkUG9zaXRpb24gPSBuZXcgVmVjdG9yMygpLmNvcHkocGFyZW50LnBvc2l0aW9uKS5hZGQodikgLy8gVmVjMy5hZGQoIHRwLnBvc2l0aW9uLCB2LCB0aGlzLnBvc2l0aW9uICk7XG5cbiAgICBjb25zb2xlLmxvZygndiBpcycsIHYpXG4gICAgY29uc29sZS5sb2coJ3RoaXMuY2hpbGRQb3NpdGlvbicsIHRoaXMuY2hpbGRQb3NpdGlvbilcblxuICAgIC8vIFNDQUxFIC0gcGFyZW50LnNjYWxlICogY2hpbGQuc2NhbGVcbiAgICAvLyBUT0RPOiBub3QgZmxpcHBlZCwgcmlnaHQ/XG4gICAgdGhpcy5jaGlsZFNjYWxlID0gbmV3IFZlY3RvcjMoKS5jb3B5KHBhcmVudC5zY2FsZSkubXVsdGlwbHkoY2hpbGQuc2NhbGUpXG5cbiAgICAvLyBST1RBVElPTiAtIHBhcmVudC5xdWF0ZXJuaW9uICogY2hpbGQucXVhdGVybmlvblxuICAgIHRoaXMuY2hpbGRRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKS5jb3B5KHBhcmVudC5xdWF0ZXJuaW9uKS5tdWx0aXBseShjaGlsZC5xdWF0ZXJuaW9uKVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIGdldFBhcmVudFJvdGF0aW9uKGJvbmVJbmRleDogbnVtYmVyKTogUXVhdGVybmlvbiB7XG4gICAgLy8gLy8gT1JJR0lOQUwgQ09ERVxuICAgIC8vIC8vIGdldF9wYXJlbnRfcm90KCBiX2lkeCwgcT1udWxsICl7XG4gICAgLy8gLy8gXHRsZXQgY2JvbmUgPSB0aGlzLmJvbmVzWyBiX2lkeCBdO1xuICAgIC8vIC8vIFx0cSA9IHEgfHwgbmV3IFF1YXQoKTtcbiAgICAvL1xuICAgIC8vIGNvbnN0IGJvbmUgPSB0aGlzLnNrZWxldG9uLmJvbmVzW3RoaXMuYm9uZXNbYm9uZUluZGV4XS5pZHhdXG4gICAgLy8gY29uc3QgcSA9IG5ldyBRdWF0ZXJuaW9uKClcbiAgICAvL1xuICAgIC8vIC8vIE9SSUdJTkFMIENPREVcbiAgICAvLyAvL2lmKCBjYm9uZS5wX2lkeCA9PSBudWxsICkgcS5yZXNldCgpO1xuICAgIC8vIC8vIENoaWxkIGlzIGEgUm9vdCBCb25lLCBqdXN0IHJlc2V0IHNpbmNlIHRoZXJlIGlzIG5vIHBhcmVudC5cbiAgICAvLyBpZiAoYm9uZS5wYXJlbnQgPT0gbnVsbCkgcS5pZGVudGl0eSgpXG4gICAgLy8gZWxzZSB7XG4gICAgLy8gICAvLyBPUklHSU5BTCBDT0RFXG4gICAgLy8gICAvLyBsZXQgYiA9IHRoaXMuYm9uZXNbIGNib25lLnBfaWR4IF07XG4gICAgLy8gICAvLyBcdHEuY29weSggYi5sb2NhbC5yb3QgKTtcbiAgICAvL1xuICAgIC8vICAgLy8gXHR3aGlsZSggYi5wX2lkeCAhPSBudWxsICl7XG4gICAgLy8gICAvLyBcdFx0YiA9IHRoaXMuYm9uZXNbIGIucF9pZHggXTtcbiAgICAvLyAgIC8vIFx0XHRxLnBtdWwoIGIubG9jYWwucm90ICk7XG4gICAgLy8gICAvLyBcdH1cbiAgICAvLyAgIC8vIFBhcmVudHMgRXhpc3QsIGxvb3AgdGlsbCByZWFjaGluZyB0aGUgcm9vdFxuICAgIC8vICAgbGV0IGIgPSBib25lLnBhcmVudFxuICAgIC8vICAgcS5jb3B5KGIucXVhdGVybmlvbilcbiAgICAvLyAgIHdoaWxlIChiLnBhcmVudCAhPSBudWxsICYmIGIucGFyZW50LnR5cGUgPT09ICdCb25lJykge1xuICAgIC8vICAgICBiID0gYi5wYXJlbnRcbiAgICAvLyAgICAgcS5wcmVtdWx0aXBseShiLnF1YXRlcm5pb24pXG4gICAgLy8gICB9XG4gICAgLy8gfVxuICAgIC8vIC8vIE9SSUdJTkFMIENPREVcbiAgICAvLyAvLyBxLnBtdWwoIHRoaXMucm9vdF9vZmZzZXQucm90ICk7IC8vIEFkZCBTdGFydGluZyBPZmZzZXRcbiAgICAvLyBxLnByZW11bHRpcGx5KHRoaXMucm9vdE9mZnNldC5xdWF0ZXJuaW9uKSAvLyBBZGQgU3RhcnRpbmcgT2Zmc2V0XG4gICAgY29uc3QgY2JvbmUgPSB0aGlzLmJvbmVzW2JvbmVJbmRleF1cbiAgICBjb25zdCBxID0gbmV3IFF1YXRlcm5pb24oKVxuXG4gICAgLy9+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG4gICAgLy8gQ2hpbGQgaXMgYSBSb290IEJvbmUsIGp1c3QgcmVzZXQgc2luY2UgdGhlcmUgaXMgbm8gcGFyZW50LlxuICAgIGlmIChjYm9uZS5wX2lkeCA9PSBudWxsKSBxLmlkZW50aXR5KClcbiAgICBlbHNlIHtcbiAgICAgIC8vIFBhcmVudHMgRXhpc3QsIGxvb3AgdGlsbCByZWFjaGluZyB0aGUgcm9vdFxuICAgICAgbGV0IGIgPSB0aGlzLmJvbmVzW2Nib25lLnBfaWR4XVxuICAgICAgcS5jb3B5KGIubG9jYWwucXVhdGVybmlvbilcblxuICAgICAgd2hpbGUgKGIucF9pZHggIT0gbnVsbCkge1xuICAgICAgICBiID0gdGhpcy5ib25lc1tiLnBfaWR4XVxuICAgICAgICBxLnByZW11bHRpcGx5KGIubG9jYWwucXVhdGVybmlvbilcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5cbiAgICBxLnByZW11bHRpcGx5KHRoaXMucm9vdE9mZnNldC5xdWF0ZXJuaW9uKSAvLyBBZGQgU3RhcnRpbmcgT2Zmc2V0XG4gICAgcmV0dXJuIHFcbiAgfVxuXG4gIHRyYW5zZm9ybUFkZF9yZXYocHQ6IFBvc2VCb25lVHJhbnNmb3JtLCBjdDogUG9zZUJvbmVUcmFuc2Zvcm0pIHtcbiAgICBwdC5wb3NpdGlvbi5tdWx0aXBseShjdC5zY2FsZSkuYXBwbHlRdWF0ZXJuaW9uKGN0LnF1YXRlcm5pb24pLmFkZChjdC5wb3NpdGlvbilcbiAgICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+XG4gICAgLy8gU0NBTEUgLSBwYXJlbnQuc2NhbGUgKiBjaGlsZC5zY2FsZVxuICAgIHB0LnNjYWxlLm11bHRpcGx5KGN0LnNjYWxlKVxuICAgIC8vfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5cbiAgICAvLyBST1RBVElPTiAtIHBhcmVudC5yb3RhdGlvbiAqIGNoaWxkLnJvdGF0aW9uXG4gICAgcHQucXVhdGVybmlvbi5wcmVtdWx0aXBseShjdC5xdWF0ZXJuaW9uKSAvLyBNdXN0IFJvdGF0ZSBmcm9tIFBhcmVudC0+Q2hpbGQsIG5lZWQgUE1VTFxuICB9XG5cbiAgZ2V0X3BhcmVudF93b3JsZChcbiAgICBiX2lkeDogbnVtYmVyLFxuICAgIHB0OiBQb3NlQm9uZVRyYW5zZm9ybSA9IG51bGwsXG4gICAgY3Q6IFBvc2VCb25lVHJhbnNmb3JtID0gbnVsbCxcbiAgICB0X29mZnNldDogUG9zZUJvbmVUcmFuc2Zvcm0gPSBudWxsXG4gICkge1xuICAgIGNvbnN0IGNib25lID0gdGhpcy5ib25lc1tiX2lkeF1cblxuICAgIC8vfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+flxuXG4gICAgLy8gQ2hpbGQgaXMgYSBSb290IEJvbmUsIGp1c3QgcmVzZXQgc2luY2UgdGhlcmUgaXMgbm8gcGFyZW50LlxuICAgIGlmIChjYm9uZS5wX2lkeCA9PSBudWxsKSB7XG4gICAgICBwdC5wb3NpdGlvbi5zZXQoMCwgMCwgMClcbiAgICAgIHB0LnNjYWxlLnNldCgwLCAwLCAwKVxuICAgICAgcHQucXVhdGVybmlvbi5zZXQoMCwgMCwgMCwgMClcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUGFyZW50cyBFeGlzdCwgbG9vcCB0aWxsIHJlYWNoaW5nIHRoZSByb290XG4gICAgICBsZXQgYiA9IHRoaXMuYm9uZXNbY2JvbmUucF9pZHhdXG4gICAgICBwdC5wb3NpdGlvbi5jb3B5KGIubG9jYWwucG9zaXRpb24pXG4gICAgICBwdC5zY2FsZS5jb3B5KGIubG9jYWwuc2NhbGUpXG4gICAgICBwdC5xdWF0ZXJuaW9uLmNvcHkoYi5sb2NhbC5xdWF0ZXJuaW9uKVxuXG4gICAgICB3aGlsZSAoYi5wX2lkeCAhPSBudWxsKSB7XG4gICAgICAgIGIgPSB0aGlzLmJvbmVzW2IucF9pZHhdXG4gICAgICAgIHRoaXMudHJhbnNmb3JtQWRkX3JldihwdCwgYi5sb2NhbClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvL35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5cblxuICAgIHRoaXMudHJhbnNmb3JtQWRkX3JldihwdCwgdGhpcy5yb290T2Zmc2V0KSAvLyBBZGQgU3RhcnRpbmcgT2Zmc2V0XG4gICAgaWYgKHRfb2Zmc2V0KSB7XG4gICAgICB0aGlzLnRyYW5zZm9ybUFkZF9yZXYocHQsIHRfb2Zmc2V0KSAvLyBBZGQgQWRkaXRpb25hbCBTdGFydGluZyBPZmZzZXRcbiAgICB9XG5cbiAgICBpZiAoY3QpIHtcbiAgICAgIGN0LnBvc2l0aW9uLmNvcHkocHQucG9zaXRpb24pXG4gICAgICBjdC5zY2FsZS5jb3B5KHB0LnNjYWxlKVxuICAgICAgY3QucXVhdGVybmlvbi5jb3B5KHB0LnF1YXRlcm5pb24pXG4gICAgICB0cmFuc2Zvcm1BZGQoY3QsIGNib25lLmxvY2FsKSAvLyBSZXF1ZXN0aW5nIENoaWxkIFdTIEluZm8gVG9vXG4gICAgICAvLyBjdC5mcm9tX2FkZChwdCwgY2JvbmUubG9jYWwpIC8vIFJlcXVlc3RpbmcgQ2hpbGQgV1MgSW5mbyBUb29cbiAgICB9XG5cbiAgICByZXR1cm4gcHRcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3NlXG4iLCIvLyBAdHMtbm9jaGVja1xuaW1wb3J0IHsgT2JqZWN0M0QsIFNraW5uZWRNZXNoIH0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBhZGRDb21wb25lbnQsIGdldENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2Vjcy9mdW5jdGlvbnMvQ29tcG9uZW50RnVuY3Rpb25zJ1xuaW1wb3J0IHsgQ2hhaW4gfSBmcm9tICcuLi9jbGFzc2VzL0NoYWluJ1xuaW1wb3J0IHsgSUtPYmogfSBmcm9tICcuLi9jb21wb25lbnRzL0lLT2JqJ1xuaW1wb3J0IHsgSUtSaWdDb21wb25lbnQsIElLUmlnVGFyZ2V0Q29tcG9uZW50LCBJS1JpZ0NvbXBvbmVudFR5cGUgfSBmcm9tICcuLi9jb21wb25lbnRzL0lLUmlnQ29tcG9uZW50J1xuaW1wb3J0IHsgQXJtYXR1cmVUeXBlIH0gZnJvbSAnLi4vZW51bXMvQXJtYXR1cmVUeXBlJ1xuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnLi4vLi4vZWNzL2NsYXNzZXMvRW50aXR5J1xuaW1wb3J0IFBvc2UgZnJvbSAnLi4vY2xhc3Nlcy9Qb3NlJ1xuaW1wb3J0IHsgc2V0dXBNaXhhbW9JS1JpZywgc2V0dXBUUmV4SUtSaWcgfSBmcm9tICcuL0lLRnVuY3Rpb25zJ1xuaW1wb3J0IHsgSUtTb2x2ZXJGdW5jdGlvbiwgc29sdmVMaW1iIH0gZnJvbSAnLi9JS1NvbHZlcnMnXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRSaWcoXG4gIGVudGl0eTogRW50aXR5LFxuICByb290T2JqZWN0OiBPYmplY3QzRCxcbiAgdHBvc2UgPSBudWxsLFxuICB1c2Vfbm9kZV9vZmZzZXQgPSBmYWxzZSxcbiAgYXJtX3R5cGU6IEFybWF0dXJlVHlwZSA9IEFybWF0dXJlVHlwZS5NSVhBTU9cbik6IElLUmlnQ29tcG9uZW50VHlwZSB7XG4gIHJldHVybiBfYWRkUmlnKElLUmlnQ29tcG9uZW50LCBlbnRpdHksIHJvb3RPYmplY3QsIHRwb3NlLCB1c2Vfbm9kZV9vZmZzZXQsIGFybV90eXBlKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkVGFyZ2V0UmlnKFxuICBlbnRpdHk6IEVudGl0eSxcbiAgcm9vdE9iamVjdDogT2JqZWN0M0QsXG4gIHRwb3NlID0gbnVsbCxcbiAgdXNlX25vZGVfb2Zmc2V0ID0gZmFsc2UsXG4gIGFybV90eXBlOiBBcm1hdHVyZVR5cGUgPSBBcm1hdHVyZVR5cGUuTUlYQU1PXG4pOiBJS1JpZ0NvbXBvbmVudFR5cGUge1xuICByZXR1cm4gX2FkZFJpZyhJS1JpZ1RhcmdldENvbXBvbmVudCwgZW50aXR5LCByb290T2JqZWN0LCB0cG9zZSwgdXNlX25vZGVfb2Zmc2V0LCBhcm1fdHlwZSlcbn1cblxuZnVuY3Rpb24gX2FkZFJpZyhcbiAgY29tcG9uZW50Q2xhc3M6IHR5cGVvZiBJS1JpZ0NvbXBvbmVudCB8IHR5cGVvZiBJS1JpZ1RhcmdldENvbXBvbmVudCxcbiAgZW50aXR5OiBFbnRpdHksXG4gIHJvb3RPYmplY3Q6IE9iamVjdDNELFxuICB0cG9zZSA9IG51bGwsXG4gIHVzZV9ub2RlX29mZnNldCA9IGZhbHNlLFxuICBhcm1fdHlwZTogQXJtYXR1cmVUeXBlID0gQXJtYXR1cmVUeXBlLk1JWEFNT1xuKTogSUtSaWdDb21wb25lbnRUeXBlIHtcbiAgLy8gTk9URTogcm9vdE9iamVjdCBzaG91bGQgY29udGFpbiBza2lubmVkTWVzaCBhbmQgaXQncyBib25lc1xuICBjb25zdCBza2lubmVkTWVzaCA9IHJvb3RPYmplY3QuZ2V0T2JqZWN0QnlQcm9wZXJ0eSgndHlwZScsICdTa2lubmVkTWVzaCcpIGFzIFNraW5uZWRNZXNoXG5cbiAgYWRkQ29tcG9uZW50KGVudGl0eSwgSUtPYmosIHsgcmVmOiBza2lubmVkTWVzaCB9KVxuICBjb25zdCByaWcgPSBhZGRDb21wb25lbnQoZW50aXR5LCBjb21wb25lbnRDbGFzcywge1xuICAgIHRwb3NlOiBuZXcgUG9zZShyb290T2JqZWN0LCB0cnVlKSwgLy8gSWYgUGFzc2luZyBhIFRQb3NlLCBpdCBtdXN0IGhhdmUgaXRzIHdvcmxkIHNwYWNlIGNvbXB1dGVkLlxuICAgIHBvc2U6IG5ldyBQb3NlKHJvb3RPYmplY3QsIGZhbHNlKSxcbiAgICBjaGFpbnM6IG51bGwsIC8vIHdpbGwgYmUgcG9wdWxhdGVkIGxhdGVyIGluIHNldHVwIHJpZ1xuICAgIHBvaW50czogbnVsbCAvLyB3aWxsIGJlIHBvcHVsYXRlZCBsYXRlciBpbiBzZXR1cCByaWdcbiAgfSlcblxuICAvL1xuICAvLyAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIC8vIEFwcGx5IE5vZGUncyBTdGFydGluZyBUcmFuc2Zvcm0gYXMgYW4gb2Zmc2V0IGZvciBwb3Nlcy5cbiAgLy8gLy8gVGhpcyBpcyBvbmx5IGltcG9ydGFudCB3aGVuIGNvbXB1dGluZyBXb3JsZCBTcGFjZSBUcmFuc2Zvcm1zIHdoZW5cbiAgLy8gLy8gZGVhbGluZyB3aXRoIHNwZWNpZmljIHNrZWxldG9ucywgbGlrZSBNaXhhbW8gc3R1ZmYuXG4gIC8vIC8vIE5lZWQgdG8gZG8gdGhpcyB0byByZW5kZXIgdGhpbmdzIGNvcnJlY3RseVxuICAvLyBpZiAodXNlX25vZGVfb2Zmc2V0KSB7XG4gIC8vICAgbGV0IGwgPSBlbnRpdHkuT2JqID8gZW50aXR5Lk9iai5nZXRfdHJhbnNmb3JtKCkgOiBlbnRpdHkuTm9kZS5sb2NhbCAvLyBPYmogaXMgYSBUaHJlZUpTIENvbXBvbmVudFxuICAvL1xuICAvLyAgIHRoaXMucG9zZS5zZXRfb2Zmc2V0KGwucm90LCBsLnBvcywgbC5zY2wpXG4gIC8vICAgaWYgKCF0cG9zZSkgdGhpcy50cG9zZS5zZXRfb2Zmc2V0KGwucm90LCBsLnBvcywgbC5zY2wpXG4gIC8vIH1cbiAgLy9cbiAgLy8gLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyAvLyBJZiBUUG9zZSBXYXMgQ3JlYXRlZCBieSBSaWcsIGl0IGRvZXMgbm90IGhhdmUgaXRzIHdvcmxkXG4gIC8vIC8vIFNwYWNlIENvbXB1dGVkLiBNdXN0IGRvIHRoaXMgYWZ0ZXIgc2V0dGluZyBvZmZzZXQgdG8gd29yayByaWdodC5cbiAgLy8gaWYgKCF0cG9zZSkgdGhpcy50cG9zZS51cGRhdGVfd29ybGQoKVxuICAvL1xuICAvLyAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIC8vIEF1dG8gU2V0dXAgdGhlIFBvaW50cyBhbmQgQ2hhaW5zIGJhc2VkIG9uXG4gIC8vIC8vIEtub3duIFNrZWxldG9uIFN0cnVjdHVyZXMuXG4gIHN3aXRjaCAoYXJtX3R5cGUpIHtcbiAgICBjYXNlIEFybWF0dXJlVHlwZS5NSVhBTU86XG4gICAgICBzZXR1cE1peGFtb0lLUmlnKHJpZylcbiAgICAgIGJyZWFrXG4gICAgY2FzZSBBcm1hdHVyZVR5cGUuVFJFWDpcbiAgICAgIHNldHVwVFJleElLUmlnKHJpZylcbiAgICAgIGJyZWFrXG4gICAgZGVmYXVsdDpcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1Vuc3VwcG9ydGVkIHJpZyB0eXBlJywgYXJtX3R5cGUpXG4gIH1cblxuICByaWcudHBvc2UuYXBwbHkoKVxuXG4gIGlmICghT2JqZWN0LmtleXMocmlnLmNoYWlucykubGVuZ3RoIHx8ICFPYmplY3Qua2V5cyhyaWcucG9pbnRzKS5sZW5ndGgpIHtcbiAgICBkZWJ1Z2dlclxuICB9XG5cbiAgcmV0dXJuIHJpZ1xufVxuXG5mdW5jdGlvbiBpbml0TWl4YW1vUmlnKGFybWF0dXJlLCByaWcpIHtcbiAgY29uc29sZS5lcnJvcignaW5pdE1peGFtb1JpZyBOT1QgSU1QTEVNRU5URUQnKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkUG9pbnQocmlnOiBJS1JpZ0NvbXBvbmVudFR5cGUsIG5hbWU6IHN0cmluZywgYm9uZU5hbWU6IHN0cmluZyk6IHZvaWQge1xuICBjb25zdCBib25lcyA9IHJpZy50cG9zZS5ib25lc1xuICByaWcucG9pbnRzW25hbWVdID0ge1xuICAgIGluZGV4OiBib25lcy5maW5kSW5kZXgoKGJvbmUpID0+IGJvbmUubmFtZS5pbmNsdWRlcyhib25lTmFtZSkpXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZENoYWluKFxuICByaWc6IElLUmlnQ29tcG9uZW50VHlwZSxcbiAgbmFtZTogc3RyaW5nLFxuICBuYW1lQXJyYXk6IHN0cmluZ1tdLFxuICBlbmRfbmFtZTogc3RyaW5nIHwgbnVsbCA9IG51bGwsXG4gIGlrU29sdmVyOiBJS1NvbHZlckZ1bmN0aW9uIHwgbnVsbCA9IG51bGxcbikge1xuICAvLyAgYXhpcz1cInpcIixcbiAgbGV0IGJvbmVOYW1lOiBzdHJpbmcsIGJcbiAgY29uc3QgYm9uZXMgPSByaWcudHBvc2UuYm9uZXNcblxuICBjb25zdCBjaGFpbiA9IG5ldyBDaGFpbigpIC8vIGF4aXNcbiAgZm9yIChib25lTmFtZSBvZiBuYW1lQXJyYXkpIHtcbiAgICBjb25zdCBpbmRleCA9IGJvbmVzLmZpbmRJbmRleCgoYm9uZSkgPT4gYm9uZS5uYW1lLmluY2x1ZGVzKGJvbmVOYW1lKSlcbiAgICAvLyBUT0RPOiBza2lwIHRoZSBib25lPyBvciBza2lwIHRoZSBjaGFpbj8gb3IgdGhyb3cgZXJyb3I/XG4gICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgY29uc29sZS53YXJuKCdhZGRDaGFpbjogQm9uZSBbJXNdIG5vdCBmb3VuZCBpbiBhcm1hdHVyZScsIGJvbmVOYW1lLCBib25lcylcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuICAgIGNvbnN0IGJvbmUgPSBib25lc1tpbmRleF0uYm9uZVxuXG4gICAgbGV0IGxlbmd0aCA9IDBcbiAgICBpZiAoYm9uZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICBsZW5ndGggPSBib25lLmNoaWxkcmVuWzBdLnBvc2l0aW9uLmxlbmd0aCgpXG4gICAgfVxuICAgIGNvbnN0IG8gPSB7IGluZGV4LCByZWY6IGJvbmUsIGxlbmd0aCB9XG5cbiAgICBjaGFpbi5jaGFpbkJvbmVzLnB1c2gobylcbiAgICBjaGFpbi5jbnQrK1xuICAgIGNoYWluLmxlbmd0aCArPSBsZW5ndGhcbiAgfVxuXG4gIGlmIChlbmRfbmFtZSkge1xuICAgIGNoYWluLmVuZF9pZHggPSBib25lcy5maW5kSW5kZXgoKGJvbmUpID0+IGJvbmUubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGVuZF9uYW1lLnRvTG93ZXJDYXNlKCkpKVxuICB9XG5cbiAgY2hhaW4uaWtTb2x2ZXIgPSBpa1NvbHZlciA/PyBzb2x2ZUxpbWJcblxuICByaWcuY2hhaW5zW25hbWVdID0gY2hhaW5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFBvc2l0aW9uKGVudGl0eTogRW50aXR5LCAuLi5wOiBudW1iZXJbXSkge1xuICBjb25zdCB7IHJlZiB9ID0gZ2V0Q29tcG9uZW50KGVudGl0eSwgSUtPYmopXG4gIGlmIChwLmxlbmd0aCA9PSAzKSByZWYucG9zaXRpb24uZnJvbUFycmF5KHApXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSaWdUcmFuc2Zvcm0oZW50aXR5OiBFbnRpdHkpIHtcbiAgY29uc3QgeyByZWYgfSA9IGdldENvbXBvbmVudChlbnRpdHksIElLT2JqKVxuICBjb25zdCBwID0gcmVmLnBvc2l0aW9uLFxuICAgIHEgPSByZWYucXVhdGVybmlvbixcbiAgICBzID0gcmVmLnNjYWxlXG4gIHJldHVybiB7XG4gICAgcG9zaXRpb246IFtwLngsIHAueSwgcC56XSxcbiAgICBxdWF0ZXJuaW9uOiBbcS54LCBxLnksIHEueiwgcS53XSxcbiAgICBzY2FsZTogW3MueCwgcy55LCBzLnpdXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFJlZmVyZW5jZShlbnRpdHk6IEVudGl0eSwgbzogU2tpbm5lZE1lc2gpIHtcbiAgZ2V0Q29tcG9uZW50KGVudGl0eSwgSUtPYmopLnJlZiA9IG9cbiAgLy8gRW5naW5lLnNjZW5lLmFkZCggbyApO1xufVxuIiwiaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgTEVGVCwgVVAsIEZPUldBUkQgfSBmcm9tICcuLi9jb25zdGFudHMvVmVjdG9yM0NvbnN0YW50cydcblxuLypcbjN4MyBSb3RhdGlvbiBNYXRyaXhcblIgIFQgIEYgICAgICBcbjAwIDAzIDA2XG4wMSAwNCAwN1xuMDIgMDUgMDhcblxubGVmdFx0KDAsMSwyKVxudXBcdFx0KDMsNCw1KVxuZm9yd2FyZFx0KDYsNyw5KVxuKi9cbmV4cG9ydCBjbGFzcyBBeGlzIHtcbiAgeDogVmVjdG9yM1xuICB5OiBWZWN0b3IzXG4gIHo6IFZlY3RvcjNcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy54ID0gbmV3IFZlY3RvcjMoKS5jb3B5KExFRlQpXG4gICAgdGhpcy55ID0gbmV3IFZlY3RvcjMoKS5jb3B5KFVQKVxuICAgIHRoaXMueiA9IG5ldyBWZWN0b3IzKCkuY29weShGT1JXQVJEKVxuICB9XG4gIC8vUGFzc2luZyBpbiBWZWN0b3JzLlxuICBzZXQoeCwgeSwgeiwgZG9fbm9ybSA9IGZhbHNlKSB7XG4gICAgdGhpcy54LmNvcHkoeClcbiAgICB0aGlzLnkuY29weSh5KVxuICAgIHRoaXMuei5jb3B5KHopXG5cbiAgICBpZiAoZG9fbm9ybSkge1xuICAgICAgdGhpcy54Lm5vcm1hbGl6ZSgpXG4gICAgICB0aGlzLnkubm9ybWFsaXplKClcbiAgICAgIHRoaXMuei5ub3JtYWxpemUoKVxuICAgIH1cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgZnJvbURpcmVjdGlvbihmd2QsIHVwKSB7XG4gICAgdGhpcy56LmNvcHkoZndkKS5ub3JtYWxpemUoKVxuICAgIHRoaXMueC5jb3B5KHVwKS5jcm9zcyh0aGlzLnopLm5vcm1hbGl6ZSgpXG4gICAgdGhpcy55LmNvcHkodGhpcy56KS5jcm9zcyh0aGlzLngpLm5vcm1hbGl6ZSgpXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHJvdGF0ZShyYWQsIGF4aXMgPSAneCcsIG91dDogYW55ID0gbnVsbCkge1xuICAgIG91dCA9IG91dCB8fCB0aGlzXG5cbiAgICBjb25zdCBzaW4gPSBNYXRoLnNpbihyYWQpLFxuICAgICAgY29zID0gTWF0aC5jb3MocmFkKVxuICAgIGxldCB4LCB5LCB6XG5cbiAgICBzd2l0Y2ggKGF4aXMpIHtcbiAgICAgIGNhc2UgJ3knOiAvLy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgICAgIHggPSB0aGlzLnhbMF1cbiAgICAgICAgeiA9IHRoaXMueFsyXVxuICAgICAgICB0aGlzLnhbMF0gPSB6ICogc2luICsgeCAqIGNvcyAvL3hcbiAgICAgICAgdGhpcy54WzJdID0geiAqIGNvcyAtIHggKiBzaW4gLy96XG5cbiAgICAgICAgeCA9IHRoaXMuelswXVxuICAgICAgICB6ID0gdGhpcy56WzJdXG4gICAgICAgIHRoaXMuelswXSA9IHogKiBzaW4gKyB4ICogY29zIC8veFxuICAgICAgICB0aGlzLnpbMl0gPSB6ICogY29zIC0geCAqIHNpbiAvL3pcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3gnOiAvLy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgICAgIHkgPSB0aGlzLnlbMV1cbiAgICAgICAgeiA9IHRoaXMueVsyXVxuICAgICAgICB0aGlzLnlbMV0gPSB5ICogY29zIC0geiAqIHNpbiAvL3lcbiAgICAgICAgdGhpcy55WzJdID0geSAqIHNpbiArIHogKiBjb3MgLy96XG5cbiAgICAgICAgeSA9IHRoaXMuelsxXVxuICAgICAgICB6ID0gdGhpcy56WzJdXG4gICAgICAgIHRoaXMuelsxXSA9IHkgKiBjb3MgLSB6ICogc2luIC8veVxuICAgICAgICB0aGlzLnpbMl0gPSB5ICogc2luICsgeiAqIGNvcyAvL3pcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3onOiAvLy4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uXG4gICAgICAgIHggPSB0aGlzLnhbMF1cbiAgICAgICAgeSA9IHRoaXMueFsxXVxuICAgICAgICB0aGlzLnhbMF0gPSB4ICogY29zIC0geSAqIHNpbiAvL3hcbiAgICAgICAgdGhpcy54WzFdID0geCAqIHNpbiArIHkgKiBjb3MgLy95XG5cbiAgICAgICAgeCA9IHRoaXMueVswXVxuICAgICAgICB5ID0gdGhpcy55WzFdXG4gICAgICAgIHRoaXMueVswXSA9IHggKiBjb3MgLSB5ICogc2luIC8veFxuICAgICAgICB0aGlzLnlbMV0gPSB4ICogc2luICsgeSAqIGNvcyAvL3lcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0XG4gIH1cbn1cbiIsImltcG9ydCB7IFF1YXRlcm5pb24sIFZlY3RvcjMgfSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IGNyZWF0ZU1hcHBlZENvbXBvbmVudCB9IGZyb20gJy4uLy4uL2Vjcy9mdW5jdGlvbnMvQ29tcG9uZW50RnVuY3Rpb25zJ1xuaW1wb3J0IHsgQXhpcyB9IGZyb20gJy4uL2NsYXNzZXMvQXhpcydcblxuZXhwb3J0IHR5cGUgSUtQb3NlTGltYkRhdGEgPSB7IGxlbmd0aFNjYWxlOiBudW1iZXI7IGRpcjogVmVjdG9yMzsgam9pbnREaXJlY3Rpb246IFZlY3RvcjMgfVxuZXhwb3J0IHR5cGUgSUtQb3NlTG9va1R3aXN0ID0geyBsb29rRGlyZWN0aW9uOiBWZWN0b3IzOyB0d2lzdERpcmVjdGlvbjogVmVjdG9yMyB9XG5leHBvcnQgdHlwZSBJS1Bvc2VIaXBEYXRhID0ge1xuICBiaW5kX2hlaWdodDogbnVtYmVyXG4gIG1vdmVtZW50OiBWZWN0b3IzXG4gIGRpcjogVmVjdG9yM1xuICB0d2lzdDogbnVtYmVyXG59XG5leHBvcnQgdHlwZSBJS1Bvc2VTcGluZURhdGEgPSBbSUtQb3NlTG9va1R3aXN0LCBJS1Bvc2VMb29rVHdpc3RdXG5cbmV4cG9ydCB0eXBlIElLUG9zZUNvbXBvbmVudFR5cGUgPSB7XG4gIHN0YXJ0UG9zaXRpb24/OiBWZWN0b3IzIC8vIFN0YXJ0IG9mIGNoYWluICh3b3JsZCBzcGFjZSBwb3NpdGlvbiBvZiBzaG91bGRlciBmb3IgYW4gYXJtIGNoYWluKVxuICBlbmRQb3NpdGlvbj86IFZlY3RvcjMgLy8gVGFyZ2V0IHBvc2l0aW9uIGZvciBjaGFpbiB0byByZWFjaCAoZW5kIGVmZmVjdG9yKVxuICBheGlzPzogQXhpcyAvLyBBeGlzIG9mIHJvdGF0aW9uIHRvd2FyZCB0aGUgZW5kIHBvc2l0aW9uXG4gIGxlbmd0aD86IG51bWJlclxuXG4gIHNwaW5lUGFyZW50UXVhdGVybmlvbj86IFF1YXRlcm5pb25cbiAgc3BpbmVQYXJlbnRQb3NpdGlvbj86IFZlY3RvcjNcbiAgc3BpbmVQYXJlbnRTY2FsZT86IFZlY3RvcjNcblxuICBzcGluZUNoaWxkUXVhdGVybmlvbj86IFF1YXRlcm5pb25cbiAgc3BpbmVDaGlsZFBvc2l0aW9uPzogVmVjdG9yM1xuICBzcGluZUNoaWxkU2NhbGU/OiBWZWN0b3IzXG5cbiAgaGlwPzogSUtQb3NlSGlwRGF0YVxuXG4gIGZvb3RfbD86IElLUG9zZUxvb2tUd2lzdFxuICBmb290X3I/OiBJS1Bvc2VMb29rVHdpc3RcblxuICAvLyBJSyBEYXRhIGZvciBsaW1icyBpcyBmaXJzdCB0aGUgRGlyZWN0aW9uIHRvd2FyZCB0aGUgRW5kIEVmZmVjdG9yLFxuICAvLyBUaGUgc2NhbGVkIGxlbmd0aCB0byB0aGUgZW5kIGVmZmVjdG9yLCBwbHVzIHRoZSBkaXJlY3Rpb24gdGhhdFxuICAvLyB0aGUgS05FRSBvciBFTEJPVyBpcyBwb2ludGluZy4gRm9yIElLIFRhcmdldGluZywgRGlyIGlzIEZPUldBUkQgYW5kXG4gIC8vIGpvaW50IGRpciBpcyBVUFxuICBsZWdfbD86IElLUG9zZUxpbWJEYXRhXG4gIGxlZ19yPzogSUtQb3NlTGltYkRhdGFcbiAgYXJtX2w/OiBJS1Bvc2VMaW1iRGF0YVxuICBhcm1fcj86IElLUG9zZUxpbWJEYXRhXG5cbiAgc3BpbmU/OiBJS1Bvc2VTcGluZURhdGFcblxuICBoZWFkPzogSUtQb3NlTG9va1R3aXN0XG59XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0SUtQb3NlQ29tcG9uZW50VmFsdWVzID0gZnVuY3Rpb24gKCk6IElLUG9zZUNvbXBvbmVudFR5cGUge1xuICByZXR1cm4ge1xuICAgIHN0YXJ0UG9zaXRpb246IG5ldyBWZWN0b3IzKCksIC8vIFN0YXJ0IG9mIGNoYWluICh3b3JsZCBzcGFjZSBwb3NpdGlvbiBvZiBzaG91bGRlciBmb3IgYW4gYXJtIGNoYWluKVxuICAgIGVuZFBvc2l0aW9uOiBuZXcgVmVjdG9yMygpLCAvLyBUYXJnZXQgcG9zaXRpb24gZm9yIGNoYWluIHRvIHJlYWNoIChlbmQgZWZmZWN0b3IpXG4gICAgYXhpczogbmV3IEF4aXMoKSwgLy8gQXhpcyBvZiByb3RhdGlvbiB0b3dhcmQgdGhlIGVuZCBwb3NpdGlvblxuICAgIGxlbmd0aDogMCxcblxuICAgIHNwaW5lUGFyZW50UXVhdGVybmlvbjogbmV3IFF1YXRlcm5pb24oKSxcbiAgICBzcGluZVBhcmVudFBvc2l0aW9uOiBuZXcgVmVjdG9yMygpLFxuICAgIHNwaW5lUGFyZW50U2NhbGU6IG5ldyBWZWN0b3IzKCksXG5cbiAgICBzcGluZUNoaWxkUXVhdGVybmlvbjogbmV3IFF1YXRlcm5pb24oKSxcbiAgICBzcGluZUNoaWxkUG9zaXRpb246IG5ldyBWZWN0b3IzKCksXG4gICAgc3BpbmVDaGlsZFNjYWxlOiBuZXcgVmVjdG9yMygpLFxuXG4gICAgaGlwOiB7XG4gICAgICBiaW5kX2hlaWdodDogMCxcbiAgICAgIG1vdmVtZW50OiBuZXcgVmVjdG9yMygpLFxuICAgICAgZGlyOiBuZXcgVmVjdG9yMygpLFxuICAgICAgdHdpc3Q6IDBcbiAgICB9LFxuXG4gICAgZm9vdF9sOiB7IGxvb2tEaXJlY3Rpb246IG5ldyBWZWN0b3IzKCksIHR3aXN0RGlyZWN0aW9uOiBuZXcgVmVjdG9yMygpIH0sXG4gICAgZm9vdF9yOiB7IGxvb2tEaXJlY3Rpb246IG5ldyBWZWN0b3IzKCksIHR3aXN0RGlyZWN0aW9uOiBuZXcgVmVjdG9yMygpIH0sXG5cbiAgICAvLyBJSyBEYXRhIGZvciBsaW1icyBpcyBmaXJzdCB0aGUgRGlyZWN0aW9uIHRvd2FyZCB0aGUgRW5kIEVmZmVjdG9yLFxuICAgIC8vIFRoZSBzY2FsZWQgbGVuZ3RoIHRvIHRoZSBlbmQgZWZmZWN0b3IsIHBsdXMgdGhlIGRpcmVjdGlvbiB0aGF0XG4gICAgLy8gdGhlIEtORUUgb3IgRUxCT1cgaXMgcG9pbnRpbmcuIEZvciBJSyBUYXJnZXRpbmcsIERpciBpcyBGT1JXQVJEIGFuZFxuICAgIC8vIGpvaW50IGRpciBpcyBVUFxuICAgIGxlZ19sOiB7IGxlbmd0aFNjYWxlOiAwLCBkaXI6IG5ldyBWZWN0b3IzKCksIGpvaW50RGlyZWN0aW9uOiBuZXcgVmVjdG9yMygpIH0sXG4gICAgbGVnX3I6IHsgbGVuZ3RoU2NhbGU6IDAsIGRpcjogbmV3IFZlY3RvcjMoKSwgam9pbnREaXJlY3Rpb246IG5ldyBWZWN0b3IzKCkgfSxcbiAgICBhcm1fbDogeyBsZW5ndGhTY2FsZTogMCwgZGlyOiBuZXcgVmVjdG9yMygpLCBqb2ludERpcmVjdGlvbjogbmV3IFZlY3RvcjMoKSB9LFxuICAgIGFybV9yOiB7IGxlbmd0aFNjYWxlOiAwLCBkaXI6IG5ldyBWZWN0b3IzKCksIGpvaW50RGlyZWN0aW9uOiBuZXcgVmVjdG9yMygpIH0sXG5cbiAgICBzcGluZTogW1xuICAgICAgeyBsb29rRGlyZWN0aW9uOiBuZXcgVmVjdG9yMygpLCB0d2lzdERpcmVjdGlvbjogbmV3IFZlY3RvcjMoKSB9LFxuICAgICAgeyBsb29rRGlyZWN0aW9uOiBuZXcgVmVjdG9yMygpLCB0d2lzdERpcmVjdGlvbjogbmV3IFZlY3RvcjMoKSB9XG4gICAgXSxcblxuICAgIGhlYWQ6IHsgbG9va0RpcmVjdGlvbjogbmV3IFZlY3RvcjMoKSwgdHdpc3REaXJlY3Rpb246IG5ldyBWZWN0b3IzKCkgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBJS1Bvc2VDb21wb25lbnQgPSBjcmVhdGVNYXBwZWRDb21wb25lbnQ8SUtQb3NlQ29tcG9uZW50VHlwZT4oJ0lLUG9zZUNvbXBvbmVudCcpXG4iLCJpbXBvcnQge1xuICBBZGRpdGl2ZUJsZW5kaW5nLFxuICBBbmltYXRpb25NaXhlcixcbiAgQm9uZSxcbiAgRG91YmxlU2lkZSxcbiAgR3JvdXAsXG4gIE1lc2gsXG4gIE1lc2hCYXNpY01hdGVyaWFsLFxuICBPYmplY3QzRCxcbiAgUGxhbmVHZW9tZXRyeSxcbiAgU2tlbGV0b24sXG4gIFNraW5uZWRNZXNoLFxuICBzUkdCRW5jb2Rpbmdcbn0gZnJvbSAndGhyZWUnXG5pbXBvcnQgeyBBc3NldExvYWRlciB9IGZyb20gJy4uLy4uL2Fzc2V0cy9jbGFzc2VzL0Fzc2V0TG9hZGVyJ1xuaW1wb3J0IHsgaXNDbGllbnQgfSBmcm9tICcuLi8uLi9jb21tb24vZnVuY3Rpb25zL2lzQ2xpZW50J1xuaW1wb3J0IHsgYWRkQ29tcG9uZW50LCBnZXRDb21wb25lbnQgfSBmcm9tICcuLi8uLi9lY3MvZnVuY3Rpb25zL0NvbXBvbmVudEZ1bmN0aW9ucydcbmltcG9ydCB7IEFuaW1hdGlvbk1hbmFnZXIgfSBmcm9tICcuLi9BbmltYXRpb25NYW5hZ2VyJ1xuaW1wb3J0IHsgQW5pbWF0aW9uQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50cy9BbmltYXRpb25Db21wb25lbnQnXG5pbXBvcnQgeyBBdmF0YXJDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL0F2YXRhckNvbXBvbmVudCdcbmltcG9ydCB7IFNrZWxldG9uVXRpbHMgfSBmcm9tICcuLi9Ta2VsZXRvblV0aWxzJ1xuaW1wb3J0IHsgQW5pbWF0aW9uUmVuZGVyZXIgfSBmcm9tICcuLi9hbmltYXRpb25zL0FuaW1hdGlvblJlbmRlcmVyJ1xuaW1wb3J0IHsgQXZhdGFyQW5pbWF0aW9uQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50cy9BdmF0YXJBbmltYXRpb25Db21wb25lbnQnXG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tICcuLi8uLi9lY3MvY2xhc3Nlcy9FbnRpdHknXG5pbXBvcnQgeyBBdmF0YXJQZW5kaW5nQ29tcG9uZW50IH0gZnJvbSAnLi4vY29tcG9uZW50cy9BdmF0YXJQZW5kaW5nQ29tcG9uZW50J1xuaW1wb3J0IHsgQXZhdGFyRWZmZWN0Q29tcG9uZW50LCBNYXRlcmlhbE1hcCB9IGZyb20gJy4uL2NvbXBvbmVudHMvQXZhdGFyRWZmZWN0Q29tcG9uZW50J1xuaW1wb3J0IHsgRGlzc29sdmVFZmZlY3QgfSBmcm9tICcuLi9EaXNzb2x2ZUVmZmVjdCdcbmltcG9ydCB7IENhbWVyYUxheWVycyB9IGZyb20gJy4uLy4uL2NhbWVyYS9jb25zdGFudHMvQ2FtZXJhTGF5ZXJzJ1xuaW1wb3J0IHsgYm9uZXNEYXRhMiB9IGZyb20gJy4uL0RlZmF1bHRTa2VsZXRvbkJvbmVzJ1xuaW1wb3J0IHsgSUtPYmogfSBmcm9tICcuLi8uLi9pa3JpZy9jb21wb25lbnRzL0lLT2JqJ1xuaW1wb3J0IHsgYWRkUmlnLCBhZGRUYXJnZXRSaWcgfSBmcm9tICcuLi8uLi9pa3JpZy9mdW5jdGlvbnMvUmlnRnVuY3Rpb25zJ1xuaW1wb3J0IHsgZGVmYXVsdElLUG9zZUNvbXBvbmVudFZhbHVlcywgSUtQb3NlQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vaWtyaWcvY29tcG9uZW50cy9JS1Bvc2VDb21wb25lbnQnXG5pbXBvcnQgeyBBcm1hdHVyZVR5cGUgfSBmcm9tICcuLi8uLi9pa3JpZy9lbnVtcy9Bcm1hdHVyZVR5cGUnXG5cbmV4cG9ydCBjb25zdCBzZXRBdmF0YXIgPSAoZW50aXR5LCBhdmF0YXJJZCwgYXZhdGFyVVJMKSA9PiB7XG4gIGNvbnN0IGF2YXRhciA9IGdldENvbXBvbmVudChlbnRpdHksIEF2YXRhckNvbXBvbmVudClcbiAgaWYgKGF2YXRhcikge1xuICAgIGF2YXRhci5hdmF0YXJJZCA9IGF2YXRhcklkXG4gICAgYXZhdGFyLmF2YXRhclVSTCA9IGF2YXRhclVSTFxuICB9XG4gIGxvYWRBdmF0YXJGb3JFbnRpdHkoZW50aXR5KVxufVxuXG5leHBvcnQgY29uc3QgbG9hZEF2YXRhckZvckVudGl0eSA9IChlbnRpdHk6IEVudGl0eSkgPT4ge1xuICBpZiAoIWlzQ2xpZW50KSByZXR1cm5cbiAgY29uc3QgYXZhdGFyVVJMID0gZ2V0Q29tcG9uZW50KGVudGl0eSwgQXZhdGFyQ29tcG9uZW50KT8uYXZhdGFyVVJMXG4gIGlmIChhdmF0YXJVUkwpIHtcbiAgICBBc3NldExvYWRlci5sb2FkKFxuICAgICAge1xuICAgICAgICB1cmw6IGF2YXRhclVSTCxcbiAgICAgICAgY2FzdFNoYWRvdzogdHJ1ZSxcbiAgICAgICAgcmVjZWl2ZVNoYWRvdzogdHJ1ZVxuICAgICAgfSxcbiAgICAgIChnbHRmOiBhbnkpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZ2x0Zi5zY2VuZSlcbiAgICAgICAgc2V0dXBBdmF0YXIoZW50aXR5LCBTa2VsZXRvblV0aWxzLmNsb25lKGdsdGYuc2NlbmUpLCBhdmF0YXJVUkwpXG4gICAgICB9XG4gICAgKVxuICB9IGVsc2Uge1xuICAgIHNldHVwQXZhdGFyKGVudGl0eSwgU2tlbGV0b25VdGlscy5jbG9uZShBbmltYXRpb25NYW5hZ2VyLmluc3RhbmNlLl9kZWZhdWx0TW9kZWwpKVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBzZXRBdmF0YXJMYXllciA9IChvYmo6IE9iamVjdDNEKSA9PiB7XG4gIG9iai5sYXllcnMuZGlzYWJsZShDYW1lcmFMYXllcnMuU2NlbmUpXG4gIG9iai5sYXllcnMuZW5hYmxlKENhbWVyYUxheWVycy5BdmF0YXIpXG59XG5cbmNvbnN0IHNldHVwQXZhdGFyID0gKGVudGl0eTogRW50aXR5LCBtb2RlbDogYW55LCBhdmF0YXJVUkw/OiBzdHJpbmcpID0+IHtcbiAgY29uc3QgYXZhdGFyID0gZ2V0Q29tcG9uZW50KGVudGl0eSwgQXZhdGFyQ29tcG9uZW50KVxuICBjb25zdCBhbmltYXRpb25Db21wb25lbnQgPSBnZXRDb21wb25lbnQoZW50aXR5LCBBbmltYXRpb25Db21wb25lbnQpXG4gIGNvbnN0IGF2YXRhckFuaW1hdGlvbkNvbXBvbmVudCA9IGdldENvbXBvbmVudChlbnRpdHksIEF2YXRhckFuaW1hdGlvbkNvbXBvbmVudClcblxuICBsZXQgaGlwcyA9IG1vZGVsXG5cbiAgbW9kZWwudHJhdmVyc2UoKG8pID0+IHtcbiAgICAvLyBUT0RPOiBSZW1vdmUgbWUgd2hlbiB3ZSBhZGQgcmV0YXJnZXRpbmdcbiAgICBpZiAoby5uYW1lPy5pbmNsdWRlcygnbWl4YW1vcmlnJykpIHtcbiAgICAgIG8ubmFtZSA9IG8ubmFtZS5yZXBsYWNlKCdtaXhhbW9yaWcnLCAnJylcbiAgICB9XG4gICAgaWYgKG8ubmFtZT8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnaGlwcycpKSBoaXBzID0gb1xuICB9KVxuXG4gIGNvbnN0IGxvYWRlZEF2YXRhckJvbmVOYW1lczogc3RyaW5nW10gPSBbXVxuICBoaXBzLnRyYXZlcnNlKChjaGlsZCkgPT4gbG9hZGVkQXZhdGFyQm9uZU5hbWVzLnB1c2goY2hpbGQubmFtZSkpXG5cbiAgYW5pbWF0aW9uQ29tcG9uZW50Lm1peGVyLnN0b3BBbGxBY3Rpb24oKVxuICBhdmF0YXIubW9kZWxDb250YWluZXIuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IGNoaWxkLnJlbW92ZUZyb21QYXJlbnQoKSlcblxuICBsZXQgbWF0ZXJpYWxMaXN0OiBBcnJheTxNYXRlcmlhbE1hcD4gPSBbXVxuXG4gIG1vZGVsLnRyYXZlcnNlKChvYmplY3QpID0+IHtcbiAgICBzZXRBdmF0YXJMYXllcihvYmplY3QpXG5cbiAgICBpZiAodHlwZW9mIG9iamVjdC5tYXRlcmlhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIG9iamVjdC5tYXRlcmlhbCA9IG9iamVjdC5tYXRlcmlhbC5jbG9uZSgpXG4gICAgICBtYXRlcmlhbExpc3QucHVzaCh7XG4gICAgICAgIGlkOiBvYmplY3QudXVpZCxcbiAgICAgICAgbWF0ZXJpYWw6IG9iamVjdC5tYXRlcmlhbC5jbG9uZSgpXG4gICAgICB9KVxuICAgICAgb2JqZWN0Lm1hdGVyaWFsID0gRGlzc29sdmVFZmZlY3QuZ2V0RGlzc29sdmVUZXh0dXJlKG9iamVjdClcbiAgICB9XG4gIH0pXG5cbiAgbW9kZWwuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IGF2YXRhci5tb2RlbENvbnRhaW5lci5hZGQoY2hpbGQpKVxuXG4gIC8vIFRPRE86IGZpbmQgc2tpbm5lZCBtZXNoIGluIGF2YXRhci5tb2RlbENvbnRhaW5lclxuICBjb25zdCBhdmF0YXJTa2lubmVkTWVzaCA9IGF2YXRhci5tb2RlbENvbnRhaW5lci5nZXRPYmplY3RCeVByb3BlcnR5KCd0eXBlJywgJ1NraW5uZWRNZXNoJykgYXMgU2tpbm5lZE1lc2hcbiAgY29uc3Qgcm9vdEJvbmUgPSBhdmF0YXJTa2lubmVkTWVzaC5za2VsZXRvbi5ib25lcy5maW5kKChiKSA9PiBiLnBhcmVudCEudHlwZSAhPT0gJ0JvbmUnKVxuICBhZGRDb21wb25lbnQoZW50aXR5LCBJS09iaiwgeyByZWY6IGF2YXRhclNraW5uZWRNZXNoIH0pXG4gIC8vIFRPRE86IGFkZCB3YXkgdG8gaGFuZGxlIGFybWF0dXJlIHR5cGVcbiAgY29uc3QgYXJtYXR1cmVUeXBlID0gYXZhdGFyVVJMPy5pbmNsdWRlcygndHJleCcpID8gQXJtYXR1cmVUeXBlLlRSRVggOiBBcm1hdHVyZVR5cGUuTUlYQU1PXG4gIGFkZFRhcmdldFJpZyhlbnRpdHksIHJvb3RCb25lPy5wYXJlbnQhLCBudWxsLCBmYWxzZSwgYXJtYXR1cmVUeXBlKVxuICBhZGRDb21wb25lbnQoZW50aXR5LCBJS1Bvc2VDb21wb25lbnQsIGRlZmF1bHRJS1Bvc2VDb21wb25lbnRWYWx1ZXMoKSlcblxuICAvLyBhbmltYXRpb24gd2lsbCBiZSBhcHBsaWVkIHRvIHRoaXMgc2tlbGV0b24gaW5zdGVhZCBvZiBhdmF0YXJcbiAgY29uc3Qgc291cmNlU2tlbGV0b25Sb290ID0gU2tlbGV0b25VdGlscy5jbG9uZShnZXREZWZhdWx0U2tlbGV0b24oKS5wYXJlbnQpXG4gIGFkZFJpZyhlbnRpdHksIHNvdXJjZVNrZWxldG9uUm9vdClcbiAgYW5pbWF0aW9uQ29tcG9uZW50Lm1peGVyID0gbmV3IEFuaW1hdGlvbk1peGVyKHNvdXJjZVNrZWxldG9uUm9vdClcblxuICBjb25zdCByZXRhcmdldGVkQm9uZXM6IHN0cmluZ1tdID0gW11cblxuICBzb3VyY2VTa2VsZXRvblJvb3QudHJhdmVyc2UoKGNoaWxkKSA9PiB7XG4gICAgaWYgKGNoaWxkLm5hbWUgJiYgY2hpbGQubmFtZS5sZW5ndGgpIHJldGFyZ2V0ZWRCb25lcy5wdXNoKGNoaWxkLm5hbWUpXG4gIH0pXG5cbiAgcmV0YXJnZXRlZEJvbmVzLmZvckVhY2goKHIpID0+IHtcbiAgICBpZiAoIWxvYWRlZEF2YXRhckJvbmVOYW1lcy5pbmNsdWRlcyhyKSkgY29uc29sZS53YXJuKGBbQXZhdGFyIExvYWRlcl06IEJvbmUgJyR7cn0nIG5vdCBmb3VuZGApXG4gIH0pXG5cbiAgbG9hZGVkQXZhdGFyQm9uZU5hbWVzLmZvckVhY2goKHIpID0+IHtcbiAgICBpZiAoIXJldGFyZ2V0ZWRCb25lcy5pbmNsdWRlcyhyKSkgY29uc29sZS53YXJuKGBbQXZhdGFyIExvYWRlcl06IEJvbmUgJyR7cn0nIG5vdCBzdXBwb3J0ZWRgKVxuICB9KVxuXG4gIGlmIChhdmF0YXJBbmltYXRpb25Db21wb25lbnQuY3VycmVudFN0YXRlKSB7XG4gICAgQW5pbWF0aW9uUmVuZGVyZXIubW91bnRDdXJyZW50U3RhdGUoZW50aXR5KVxuICB9XG5cbiAgLy8gYWR2YW5jZSBhbmltYXRpb24gZm9yIGEgZnJhbWUgdG8gZWxpbWluYXRlIHBvdGVudGlhbCB0LXBvc2VcbiAgYW5pbWF0aW9uQ29tcG9uZW50Lm1peGVyLnVwZGF0ZSgxIC8gNjApXG5cbiAgbG9hZEdyb3dpbmdFZmZlY3RPYmplY3QoZW50aXR5LCBtYXRlcmlhbExpc3QpXG59XG5cbmNvbnN0IGxvYWRHcm93aW5nRWZmZWN0T2JqZWN0ID0gYXN5bmMgKGVudGl0eTogRW50aXR5LCBvcmlnaW5hbE1hdExpc3Q6IEFycmF5PE1hdGVyaWFsTWFwPikgPT4ge1xuICBjb25zdCB0ZXh0dXJlTGlnaHQgPSBBc3NldExvYWRlci5nZXRGcm9tQ2FjaGUoJy9pdGVtTGlnaHQucG5nJylcbiAgY29uc3QgdGV4dHVyZVBsYXRlID0gQXNzZXRMb2FkZXIuZ2V0RnJvbUNhY2hlKCcvaXRlbVBsYXRlLnBuZycpXG5cbiAgY29uc3QgbGlnaHRNZXNoID0gbmV3IE1lc2goXG4gICAgbmV3IFBsYW5lR2VvbWV0cnkoMC4wNCwgMy4yKSxcbiAgICBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsXG4gICAgICBtYXA6IHRleHR1cmVMaWdodCxcbiAgICAgIGJsZW5kaW5nOiBBZGRpdGl2ZUJsZW5kaW5nLFxuICAgICAgZGVwdGhXcml0ZTogZmFsc2UsXG4gICAgICBzaWRlOiBEb3VibGVTaWRlXG4gICAgfSlcbiAgKVxuXG4gIGNvbnN0IHBsYXRlTWVzaCA9IG5ldyBNZXNoKFxuICAgIG5ldyBQbGFuZUdlb21ldHJ5KDEuNiwgMS42KSxcbiAgICBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoe1xuICAgICAgdHJhbnNwYXJlbnQ6IGZhbHNlLFxuICAgICAgbWFwOiB0ZXh0dXJlUGxhdGUsXG4gICAgICBibGVuZGluZzogQWRkaXRpdmVCbGVuZGluZyxcbiAgICAgIGRlcHRoV3JpdGU6IGZhbHNlXG4gICAgfSlcbiAgKVxuXG4gIGxpZ2h0TWVzaC5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdTcGhlcmUoKVxuICBwbGF0ZU1lc2guZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKClcbiAgbGlnaHRNZXNoLm5hbWUgPSAnbGlnaHRfb2JqJ1xuICBwbGF0ZU1lc2gubmFtZSA9ICdwbGF0ZV9vYmonXG5cbiAgdGV4dHVyZUxpZ2h0LmVuY29kaW5nID0gc1JHQkVuY29kaW5nXG4gIHRleHR1cmVMaWdodC5uZWVkc1VwZGF0ZSA9IHRydWVcbiAgdGV4dHVyZVBsYXRlLmVuY29kaW5nID0gc1JHQkVuY29kaW5nXG4gIHRleHR1cmVQbGF0ZS5uZWVkc1VwZGF0ZSA9IHRydWVcblxuICBhZGRDb21wb25lbnQoZW50aXR5LCBBdmF0YXJQZW5kaW5nQ29tcG9uZW50LCB7XG4gICAgbGlnaHQ6IGxpZ2h0TWVzaCxcbiAgICBwbGF0ZTogcGxhdGVNZXNoXG4gIH0pXG4gIGFkZENvbXBvbmVudChlbnRpdHksIEF2YXRhckVmZmVjdENvbXBvbmVudCwge1xuICAgIG9wYWNpdHlNdWx0aXBsaWVyOiAwLFxuICAgIG9yaWdpbk1hdGVyaWFsczogb3JpZ2luYWxNYXRMaXN0XG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0U2tlbGV0b24oKTogU2tpbm5lZE1lc2gge1xuICBjb25zdCBib25lczogQm9uZVtdID0gW11cbiAgYm9uZXNEYXRhMi5mb3JFYWNoKChkYXRhKSA9PiB7XG4gICAgY29uc3QgYm9uZSA9IG5ldyBCb25lKClcbiAgICBib25lLm5hbWUgPSBkYXRhLm5hbWVcbiAgICBib25lLnBvc2l0aW9uLmZyb21BcnJheShkYXRhLnBvc2l0aW9uKVxuICAgIGJvbmUucXVhdGVybmlvbi5mcm9tQXJyYXkoZGF0YS5xdWF0ZXJuaW9uKVxuICAgIGJvbmUuc2NhbGUuZnJvbUFycmF5KGRhdGEuc2NhbGUpXG4gICAgYm9uZXMucHVzaChib25lKVxuICB9KVxuXG4gIGJvbmVzRGF0YTIuZm9yRWFjaCgoZGF0YSwgaW5kZXgpID0+IHtcbiAgICBpZiAoZGF0YS5wYXJlbnRJbmRleCAhPT0gbnVsbCkge1xuICAgICAgYm9uZXNbZGF0YS5wYXJlbnRJbmRleF0uYWRkKGJvbmVzW2luZGV4XSlcbiAgICB9XG4gIH0pXG5cbiAgY29uc3QgZ3JvdXAgPSBuZXcgR3JvdXAoKVxuICBjb25zdCBza2lubmVkTWVzaCA9IG5ldyBTa2lubmVkTWVzaCgpXG4gIGNvbnN0IHNrZWxldG9uID0gbmV3IFNrZWxldG9uKGJvbmVzKVxuICBza2lubmVkTWVzaC5iaW5kKHNrZWxldG9uKVxuICBncm91cC5hZGQoc2tpbm5lZE1lc2gpXG4gIGdyb3VwLmFkZChib25lc1swXSkgLy8gd2UgYXNzdW1lIHRoYXQgcm9vdCBib25lIGlzIHRoZSBmaXJzdCBvbmVcblxuICByZXR1cm4gc2tpbm5lZE1lc2hcbn1cbiJdLCJuYW1lcyI6WyJkZWZpbmVRdWVyeSIsImhhc0NvbXBvbmVudCIsImFkZENvbXBvbmVudCIsInJlbW92ZUNvbXBvbmVudCIsIkZpbGVMb2FkZXIiLCJ0aGlzIiwiTlVSQlNVdGlscy5jYWxjQlNwbGluZVBvaW50IiwiTlVSQlNVdGlscy5jYWxjTlVSQlNEZXJpdmF0aXZlcyIsIlpsaWIuSW5mbGF0ZSIsImdldEdMVEZMb2FkZXIiLCJiaXRFQ1MuZGVmaW5lQ29tcG9uZW50IiwiYml0RUNTLmhhc0NvbXBvbmVudCIsImJpdEVDUy5nZXRFbnRpdHlDb21wb25lbnRzIiwiYml0RUNTLmRlZmluZVF1ZXJ5IiwiZW50ZXJRdWVyeSIsImJpdEVDUy5lbnRlclF1ZXJ5IiwiZXhpdFF1ZXJ5IiwiYml0RUNTLmV4aXRRdWVyeSIsInRlbXBRdWF0MSIsInRlbXBRdWF0MiJdLCJtYXBwaW5ncyI6InkyQkFDYSxJQUNYLE1BQU8sVUFBWSxVQUFZLE1BQU8sU0FBUSxVQUFhLFVBQVksTUFBTyxTQUFRLFNBQVMsTUFBUyxZQ0dwRyxHQUFTLENBSWIsYUFBYyxvQkFDZCxtQkFBb0IsMEJBQ3BCLGlCQUFrQix3QkFDbEIseUJBQTBCLGdDQUMxQixhQUFjLG9CQUNkLFlBQWEsbUJBQ2IsYUFBYyxvQkFHZCxhQUFjLG9CQUdkLFlBQWEsbUJBQ2IsYUFBYyxvQkFDZCxrQkFBbUIseUJBRW5CLGFBQWMsa0NBQ2Qsa0JBQW1CLHVDQUVuQixzQkFBdUIsaUNBRXZCLFNBQVUsaUNBQ1YsV0FBWSxtQ0FDWixPQUFRLCtCQUVSLFFBQVMsa0JBQ1QsZ0JBQWlCLHVCQUVqQixhQUFjLG9CQUNkLGNBQWUscUJBRWYseUJBQTBCLDRDQUMxQix5QkFBMEIsNENBRTFCLHNCQUF1QixpQ0FPQyxPQUNWLFVBQXlCLEdBQUksVUFDcEMsUUFBUyxHQUNoQixXQUFhLEdBQ04sT0FBYyxRQUNaLEtBQUssR0FBYSxT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QUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksS0FBSyxHQUFFLEVBQUUsR0FBSSxhQUFZLElBQUcsR0FBRSxHQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxHQUFFLEVBQUUsR0FBSSxZQUFXLElBQUcsR0FBRSxHQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssTUFBTSxNQUFNLE9BQU8sR0FBRyxFQUFFLEdBQUksYUFBWSxJQUFHLEdBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQ2xmLEdBQUcsSUFBSSxHQUFFLEVBQUUsR0FBSSxZQUFXLElBQUksR0FBRyxHQUFFLEdBQUssR0FBRSxXQUFXLE9BQU8sS0FBSyxHQUFFLEdBQUcsR0FBRSxFQUFFLElBQUksR0FBRyxHQUFFLE9BQU8sR0FBRSxHQUFHLEVBQUUsR0FBRSxHQUFFLElBQUcsS0FBSyxHQUFFLEVBQUUsS0FBSyxHQUFFLEVBQUUsS0FBSyxHQUFFLEVBQUUsRUFBRSxHQUFJLElBQUcsR0FBRSxJQUFHLEdBQUUsR0FBSyxHQUFFLFdBQVcsT0FBTyxJQUFJLEdBQUUsR0FBRyxHQUFFLEVBQUUsSUFBSSxHQUFHLEdBQUUsT0FBTyxHQUFFLEdBQUcsRUFBRSxHQUFFLEdBQUUsSUFBRyxFQUFFLEdBQUksSUFBRyxHQUFFLElBQUcsWUFBVyxFQUFFLEVBQUUsQ0FBQyxPQUFRLEdBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxHQUFHLENBQUMsR0FBRyxHQUFHLEVBQUUsS0FBTSxPQUFNLDBCQUEwQixHQUFHLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxTQUFFLEVBQUcsSUFBRyxHQUFHLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFTLEVBQ3haLFlBQVcsRUFBRSxFQUFFLENBQUMsT0FBUSxHQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUUsSUFBRyxJQUFJLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUEyQixHQUF6QixFQUFFLEVBQUUsRUFBRyxJQUFHLEdBQUcsR0FBRyxFQUFFLElBQUksR0FBTSxFQUFFLEVBQUUsS0FBTSxPQUFNLHdCQUF3QixHQUFHLFNBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBUyxFQUFFLE1BQ3hOLEdBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxFQUFFLENBQUMsR0FBSSxHQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxPQUFRLEdBQUUsRUFBRSxPQUFPLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxBQUFPLEdBQUUsR0FBRSxLQUFLLE1BQWhCLEtBQXFCLEdBQUcsSUFBSSxFQUFFLEdBQUcsR0FBSSxNQUFLLEVBQUUsRUFBRSxFQUFFLEtBQUssSUFBSSxFQUFFLEtBQUssR0FBRyxFQUFFLEtBQUssTUFBbUksS0FBNUgsRUFBRSxFQUFFLElBQUksRUFBRSxHQUFFLEdBQUcsRUFBRSxHQUFFLElBQUssSUFBRyxHQUFFLEtBQUssR0FBRSxLQUFLLEVBQUUsR0FBRSxLQUFLLEdBQUcsRUFBRSxHQUFHLEdBQUcsRUFBRSxHQUFFLElBQUssSUFBRyxHQUFFLEtBQUssR0FBRSxLQUFLLEdBQUcsR0FBSSxNQUFLLEVBQUUsRUFBRSxFQUFFLEtBQUssSUFBSSxFQUFFLEtBQUssR0FBUSxLQUFLLEVBQUUsR0FBRyxFQUFFLElBQUksR0FBRyxLQUFLLEdBQUcsS0FBSyxHQUFHLEtBQUssR0FBRyxFQUFFLEtBQUssSUFBSSxLQUFLLEVBQUUsR0FDelcsR0FBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLEVBQUUsQ0FBQyxHQUFJLEdBQUUsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxFQUFFLE9BQVEsR0FBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsRUFBRSxBQUFPLEdBQUUsR0FBRSxLQUFLLE1BQWhCLEtBQXFCLEdBQUcsSUFBSSxFQUFFLEdBQUcsR0FBSSxHQUFFLEtBQUssSUFBSSxFQUFFLEVBQUUsUUFBUSxFQUFFLEtBQUssTUFBNkgsS0FBdEgsRUFBRSxFQUFFLElBQUksRUFBRSxHQUFFLEdBQUcsRUFBRSxHQUFFLElBQUssSUFBRyxHQUFFLEtBQUssR0FBRSxLQUFLLEVBQUUsR0FBRSxLQUFLLEdBQUcsRUFBRSxHQUFHLEdBQUcsRUFBRSxHQUFFLElBQUssSUFBRyxHQUFFLEtBQUssR0FBRSxLQUFLLEVBQUUsRUFBRSxHQUFJLEdBQUUsS0FBSyxJQUFJLEVBQUUsRUFBRSxRQUFhLEtBQUssRUFBRSxHQUFHLEVBQUUsSUFBSSxHQUFHLEtBQUssR0FBRyxLQUFLLEdBQUcsS0FBSyxHQUFHLEVBQUUsS0FBSyxJQUFJLEtBQUssRUFBRSxHQUN4VixHQUFFLFVBQVUsRUFBRSxVQUFVLENBQUMsR0FBSSxHQUFFLEdBQUssR0FBRSxXQUFXLE9BQU8sS0FBSyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLFNBQVMsTUFBTSxFQUFFLGFBQWtCLEtBQUosRUFBRSxFQUFNLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxPQUF1QyxHQUFoQyxLQUFLLEVBQUUsS0FBSyxHQUFHLEtBQUssR0FBRyxFQUFFLE9BQVUsRUFBRSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsRUFBRSxZQUFhLEtBQUksRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxHQUFHLFlBQUssRUFBRSxNQUFhLEdBQ3BULEdBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxDQUFDLEdBQUksR0FBRSxFQUFFLEtBQUssTUFBTSxPQUFPLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLEVBQUUsVUFBSSxDQUFXLE1BQU8sR0FBRSxHQUFwQixVQUF3QixHQUFFLEVBQUUsR0FBRyxBQUFXLE1BQU8sR0FBRSxHQUFwQixVQUF3QixJQUFHLEVBQUUsSUFBSSxFQUFFLEVBQUcsR0FBRyxHQUFFLE9BQU8sS0FBSyxHQUFHLEtBQUssRUFBRSxHQUFHLEVBQUUsSUFBSyxHQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLEVBQUUsUUFBUSxHQUFHLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRyxHQUFFLEdBQUksWUFBVyxHQUFHLEVBQUUsSUFBSSxJQUFJLEVBQUUsRUFBUyxLQUFLLEVBQUUsR0FDclQsR0FBRSxVQUFVLEVBQUUsVUFBVSxDQUFDLEdBQUksR0FBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxHQUFLLEdBQUUsV0FBVyxPQUFPLEtBQUssRUFBRyxNQUFLLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsQUFBSSxFQUFFLFNBQU4sRUFBYSxNQUFPLEdBQUUsS0FBSyxFQUFFLFNBQVMsTUFBTSxLQUFLLEdBQUcsS0FBSyxFQUFFLE1BQU0sTUFBTSxLQUFLLEdBQU8sSUFBSixFQUFFLEVBQU0sRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsRUFBYyxJQUFYLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBTSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLEdBQVcsSUFBUixFQUFFLE1BQVUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxHQUFHLFlBQUssRUFBRSxHQUFVLEtBQUssT0FBTyxHQUNqVixHQUFFLFVBQVUsRUFBRSxVQUFVLENBQUMsR0FBSSxHQUFFLEVBQUUsS0FBSyxFQUFFLFNBQUUsS0FBSyxFQUFHLEdBQUUsR0FBSSxZQUFXLEdBQUcsRUFBRSxJQUFJLEtBQUssRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsR0FBSSxNQUFLLEVBQUUsT0FBTyxHQUFJLE1BQUssRUFBRSxPQUFPLEdBQUcsRUFBRSxLQUFLLEdBQVUsS0FBSyxPQUFPLEdBQUcsWUFBVyxFQUFFLEVBQUUsQ0FBQyxHQUFJLEdBQUUsRUFBd0gsT0FBdEgsS0FBSyxNQUFNLEVBQUUsS0FBSyxFQUFFLEVBQUssSUFBRyxDQUFFLEdBQUUsTUFBSSxHQUFFLE9BQVEsTUFBSyxFQUFFLEVBQUUsT0FBTyxFQUFFLFFBQVMsTUFBSyxFQUFFLEVBQUUsU0FBUSxFQUFFLEVBQUUsS0FBSyxLQUFLLEVBQUUsRUFBRSxLQUFLLEtBQVksRUFBRSxRQUFTLElBQUcsS0FBSyxPQUFPLEdBQUcsY0FBYyxLQUFNLE9BQU0sa0NBQW1DLEdBQUcsQUFBTSxLQUFHLEdBQUcsR0FBRyxJQUFmLEVBQWtCLEtBQU0sT0FBTSx1QkFBeUIsS0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEVBQUUsR0FBRyxLQUFNLE9BQU0sK0JBQStCLEtBQUssRUFBRSxHQUFJLElBQUUsRUFBRSxDQUFDLE1BQU0sS0FBSyxFQUFFLFdBQVcsRUFBRSxXQUFXLFdBQVcsRUFBRSxXQUFXLE9BQU8sRUFBRSxTQUM3bkIsR0FBRSxVQUFVLEVBQUUsVUFBVSxDQUFDLEdBQUksR0FBRSxLQUFLLE1BQU0sRUFBRSxFQUErQixHQUE3QixFQUFFLEtBQUssRUFBRSxJQUFJLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBSyxLQUFLLEVBQUUsQ0FBQyxFQUFHLEdBQUUsS0FBSyxNQUFNLEdBQUcsRUFBRSxLQUFLLE1BQU0sR0FBRyxFQUFFLEtBQUssTUFBTSxFQUFFLEVBQUUsS0FBSyxRQUFRLEVBQUUsR0FBSSxHQUFFLEVBQUUsR0FBRyxBQUFXLE1BQU8sSUFBbEIsU0FBb0IsQ0FBQyxHQUFJLEdBQUUsRUFBRSxNQUFNLElBQUksRUFBRSxFQUFNLElBQUosRUFBRSxFQUFNLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxJQUFJLEVBQUUsR0FBSSxHQUFFLEdBQUcsV0FBVyxHQUFHLE9BQU8sRUFBRSxFQUFFLEVBQUUsT0FBUSxHQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsRUFBRyxJQUFHLEVBQUUsS0FBSyxHQUFHLFFBQVEsRUFBRSxHQUFHLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxJQUFLLElBQUcsR0FBRyxLQUFLLEVBQUUsS0FBTSxPQUFNLDZCQUE4QixNQUFPLElBQUcsR0FBSSxJQUFHLEVBQUUsR0FBRSxlQUFlLElBQUcsR0FBRSxvQ0FBb0MsR0FBRSxVQUFVLEdBQUcsR0FBSSxJQUFFLENBQUMsU0FBUyxHQUFFLEVBQUUsTUFBTSxHQUFFLEdBQUcsR0FBRSxHQUFFLEdBQUUsR0FBRyxHQUFHLE9BQU8sS0FBSyxHQUFFLE9BQU8sS0FBSyxRQUFRLEtBQUksS0FBSyxJQUFFLEdBQUcsR0FBRSxFQUFFLEdBQUUsR0FBRSxNQUFLLEdBQUUsR0FBRSxFQUFFLElBQUksR0FBRyxHQUFFLE9BQU8sR0FBRSxHQUFHLEVBQUUsR0FBRSxHQUFFLEdBQUUsSUFBRyxHQUFFLDJCQUEyQixHQUFFLEdBQUUsS0FDcnNCLEdBQUksSUFBUSxHQUFJLEtBQUssMkZDa0NFLE9BQ2QsZUFDQSxrQkFDQSxtQkFDQSxXQUNQLFlBQ0EsYUFDQSxLQUNBLFFBRUEsWUFBWSxFQUEwQixNQUMvQixRQUFVLEdBQVcsR0FHNUIsS0FBSyxFQUFLLEVBQVEsRUFBYSxFQUFVLE1BTWpDLEdBQVMsRUFBSSxNQUFNLEtBQUssUUFFcEIsVUFBWSxFQUFJLE1BQU0sR0FBUSxRQUdsQyxHQUFPLEdBRVAsRUFBUyxHQUFJSCxJQUFXLEtBQUssV0FDNUIsUUFBUSxLQUNSLGdCQUFnQixpQkFFaEIsS0FDTCxFQUNBLEFBQUMsR0FBVyxJQUNOLEdBQ0ssS0FBSyxNQUFNLEVBQVEsVUFDbkIsY0FDSSxJQUFNLENBQ1gsS0FBaUIsUUFDaEIsUUFBUSxVQUFVLFdBQ2YsSUFBSSxhQUFjLElBQ3pCLEtBR1AsRUFDQSxHQUlKLFFBQVEsRUFBTyxhQUNSLEtBQU8sRUFDTCxLQUdULGdCQUFnQixFQUFPLGFBQ2hCLGFBQWUsRUFDYixLQUdULGVBQWUsRUFBTyxhQUNmLFlBQWMsRUFDWixLQUdULE1BQU0sRUFBVyxFQUFNLElBQ2pCLEdBQWtCLEtBQ1YsUUFBVSxHQUFJLE1BQWUsTUFBTSxPQUN4QyxNQUNDLEdBQVUsR0FBMkIsTUFFdkMsQ0FBQyxHQUFpQixRQUNkLElBQUksT0FBTSxpQ0FHZCxHQUFjLEdBQVcsU0FDckIsSUFBSSxPQUFNLHNEQUF3RCxHQUFjLE1BRzlFLFFBQVUsR0FBSSxNQUFhLE1BQU0sUUFHdkMsR0FBZ0IsR0FBSSxJQUFjLEtBQUssU0FDMUMsUUFBUSxLQUFLLGNBQWdCLEdBQzdCLGVBQWUsS0FBSyxtQkFFaEIsSUFBSSxJQUFjLEdBQWUsTUFBTSxFQUFVLFVBUTVELFFBQTRDLENBQzFDLGNBQ0EsWUFBWSxFQUFlLE1BQ3BCLGNBQWdCLEVBR3ZCLE1BQU0sRUFBUyxHQUNILFlBQWMsS0FBSyx3QkFFdkIsR0FBUyxLQUFLLGNBQ2QsRUFBVyxLQUFLLGNBQWMsR0FDOUIsRUFBWSxLQUFLLGVBQWUsR0FDaEMsRUFBWSxLQUFLLGlCQUNqQixFQUFjLEdBQUksTUFBaUIsTUFBTSxlQUUxQyxXQUFXLEVBQVcsRUFBYSxHQUVqQyxFQUFVLFdBR25CLGtCQUFtQixNQUNYLEdBQWdCLEdBQUksV0FFdEIsZUFBaUIsR0FBVSxTQUNOLEVBQVUsUUFBUSxZQUFZLFlBRXRDLFFBQVEsQUFBQyxHQUFrQixNQUNsQyxHQUFTLEVBQWMsR0FDdkIsRUFBTyxFQUFjLEdBQ3JCLEVBQWUsRUFBYyxHQUU5QixFQUFjLElBQUksTUFDUCxJQUFJLEVBQVEsQ0FDeEIsUUFBUyxHQUNULFNBQVUsVUFJUixHQUFxQixDQUFFLEdBQUksRUFBTSxrQkFDekIsSUFBSSxHQUFRLFFBQVEsS0FBSyxHQUVsQyxFQUFjLElBQUksTUFDUCxJQUFJLEVBQU0sQ0FDdEIsUUFBUyxHQUNULFNBQVUsVUFJUixHQUFvQixDQUFFLEdBQUksRUFBUSxrQkFDMUIsSUFBSSxHQUFNLFNBQVMsS0FBSyxLQUluQyxFQUdULGFBQWMsTUFDTixHQUFTLEdBQ1QsRUFBUSxNQUVWLFNBQVcsR0FBVSxRQUFRLFFBQVMsTUFDbEMsR0FBYSxFQUFVLFFBQVEsUUFBUSxlQUVsQyxLQUFVLEdBQVksTUFDekIsR0FBWSxFQUFXLEdBRXZCLEVBQUssU0FBUyxHQUVkLEVBQVcsRUFBVSxpQkFBaUIsTUFBTSxNQUFNLE9BQVMsRUFBVSxTQUFTLE1BQU0sTUFBTSxXQUV6RixHQUFNLEdBQUcsRUFBVSxZQUFZLElBR2xDLFdBQWEsR0FBVyxNQUNwQixHQUFxQixFQUFVLGtCQUFtQixjQUFlLEVBQVUsUUFBUSxXQUFhLEVBQ2hHLEVBQWdCLE1BQU8sR0FBVSxTQUFZLFVBQVksRUFBVSxVQUFZLE1BRWpGLEdBQXNCLEVBQWUsTUFDakMsR0FBUSxLQUFLLFdBQVcsRUFBVyxNQUVuQyxFQUFVLGtCQUFvQixFQUFVLFVBQVksY0FNdkQsS0FBTSxHQUFRLE1BQ2pCLEdBQVcsRUFBTyxHQUVwQixFQUFNLEtBQWMsU0FBa0IsR0FBTSxFQUFNLEtBQzFDLEdBQU0sRUFBTyxHQUFJLE1BQU0sTUFBTSxZQUdwQyxHQUdULFdBQVcsRUFBVyxNQUNkLEdBQVUsRUFBVSxRQUNwQixFQUFXLEVBQVUsa0JBQW9CLEVBQVUsU0FDbkQsRUFBWSxFQUFTLE1BQU0sRUFBUyxZQUFZLEtBQU8sR0FBRyxpQkFFNUQsVUFFSSxPQUNELFFBQ0ksc0JBR0osVUFDQSxTQUNJLHVCQUdKLFFBQ0ksc0JBR0osUUFDSSx1QkFHSixTQUNDLE1BQU8sSUFBSSxLQUFnQixXQUFZLFNBQ2pDLEtBQUssb0VBRVIsSUFDRCxLQUFLLGNBQWMsUUFBUSxXQUFXLFVBQVksS0FBTSxNQUNwRCxHQUFZLEdBQUksTUFDWixRQUFRLEtBQUssY0FBYyxXQUVoQyxjQUFjLFFBQVEsV0FBVyxVQUFXLEtBRzVDLGtDQUtELEtBQUssMEJBQTRCLEVBQVksaUNBSXJELE1BQU8sSUFBWSxlQUVkLFFBQVUsRUFBTyxXQUFhLEVBQ2hDLE1BRUMsR0FBUSxHQUFJLFlBQVcsU0FDdEIsUUFBTyxJQUFJLGdCQUFnQixHQUFJLE1BQUssQ0FBQyxHQUFRLENBQUUsV0FJMUQsY0FBYyxFQUFRLE1BQ2QsR0FBYSxHQUFJLFFBRW5CLFdBQWEsR0FBVSxRQUFRLFFBQVMsTUFDcEMsR0FBZSxFQUFVLFFBQVEsUUFBUSxpQkFDcEMsS0FBVSxHQUFjLE1BQzNCLEdBQVUsS0FBSyxhQUFhLEVBQWEsR0FBUyxLQUM3QyxJQUFJLFNBQVMsR0FBUyxVQUk5QixHQUdULGFBQWEsRUFBYSxFQUFRLE1BQzFCLEdBQVUsS0FBSyxZQUFZLEVBQWEsS0FFdEMsR0FBSyxFQUFZLEtBRWpCLEtBQU8sRUFBWSxjQUVyQixHQUFZLEVBQVksVUFDeEIsRUFBWSxFQUFZLFVBRXhCLEVBQVMsSUFBYyxPQUFZLEVBQVUsTUFBUSxFQUNyRCxFQUFTLElBQWMsT0FBWSxFQUFVLE1BQVEsT0FLbkQsTUFBUSxJQUFXLEVBQUksR0FBaUIsS0FDeEMsTUFBUSxJQUFXLEVBQUksR0FBaUIsR0FFNUMsV0FBYSxHQUFhLE1BQ3RCLEdBQVMsRUFBWSxRQUFRLFFBRTNCLE9BQU8sRUFBSSxFQUFPLEtBQ2xCLE9BQU8sRUFBSSxFQUFPLFNBR3JCLEdBR1QsWUFBWSxFQUFhLEVBQVEsSUFDM0IsUUFDRSxHQUFjLEtBQUssY0FBYyxLQUNqQyxFQUFXLEVBQVUsWUFBWSxJQUFJLEVBQVksSUFBSSxTQUV2RCxJQUFhLFFBQWEsRUFBUyxPQUFTLEdBQUssRUFBTyxFQUFTLEdBQUcsTUFBUSxXQUNuRSxFQUFPLEVBQVMsR0FBRyxJQUUxQixHQUFTLFFBQVEsV0FBYSxHQUFLLEVBQVMsUUFBUSxXQUFhLFNBQzlELGNBQWMsUUFBUSxZQUkzQixRQUVFLEdBQVksRUFBWSxTQUFTLE1BQU0sSUFBSSxpQkFFN0MsSUFBYyxNQUFPLE1BQ2pCLEdBQVMsS0FBSyxjQUFjLFdBQVcsUUFFekMsSUFBVyxjQUNMLEtBQUsseUVBQTBFLEtBQzdFLEdBQUksT0FFSixFQUFPLEtBQUssT0FFZixLQUFjLGVBQ2YsS0FBSyxvRkFBcUYsS0FDeEYsR0FBSSxPQUVKLEtBQUssY0FBYyxLQUFLLGVBRy9CLGNBQWMsUUFBUSxHQUVwQixFQUdULGVBQWUsRUFBWSxNQUNuQixHQUFjLEdBQUksUUFFcEIsWUFBYyxHQUFVLFFBQVEsUUFBUyxNQUNyQyxHQUFnQixFQUFVLFFBQVEsUUFBUSxrQkFFckMsS0FBVSxHQUFlLE1BQzVCLEdBQVcsS0FBSyxjQUFjLEVBQWMsR0FBUyxHQUV2RCxJQUFhLFFBQWtCLElBQUksU0FBUyxHQUFTLFVBSXRELEdBR1QsY0FBYyxFQUFjLEVBQVksTUFDaEMsR0FBSyxFQUFhLEdBQ2xCLEVBQU8sRUFBYSxZQUN0QixHQUFPLEVBQWEsZ0JBR3BCLE1BQU8sSUFBUyxhQUNYLEVBQUssT0FJVixDQUFDLEVBQVUsWUFBWSxJQUFJLFNBQVksV0FFckMsR0FBYSxLQUFLLGdCQUFnQixFQUFjLEVBQVksTUFFOUQsVUFFSSxFQUFLLG1CQUNOLFVBQ1EsR0FBSSxjQUVaLFlBQ1EsR0FBSSwwQkFHUCxLQUFLLDBFQUEyRSxLQUM3RSxHQUFJLG1CQUlWLFVBQVUsS0FDVixLQUFPLEVBRVQsRUFHVCxnQkFBZ0IsRUFBYyxFQUFZLEVBQUksTUFDdEMsR0FBa0IsU0FFcEIsR0FBYSxlQUNKLFVBQVksRUFBYSxXQUFXLE9BRTdDLEVBQWEsVUFDSixNQUFRLEdBQUksTUFBUSxVQUFVLEVBQWEsUUFBUSxPQUNyRCxFQUFhLGNBQWdCLEVBQWEsYUFBYSxPQUFTLFlBRTlELE1BQVEsR0FBSSxNQUFRLFVBQVUsRUFBYSxhQUFhLFFBR2pFLEVBQWEsdUJBQ0osa0JBQW9CLEVBQWEsbUJBQW1CLE9BRzdELEVBQWEsV0FDSixTQUFXLEdBQUksTUFBUSxVQUFVLEVBQWEsU0FBUyxPQUN6RCxFQUFhLGVBQWlCLEVBQWEsY0FBYyxPQUFTLFlBRWhFLFNBQVcsR0FBSSxNQUFRLFVBQVUsRUFBYSxjQUFjLFFBR3JFLEVBQWEsbUJBQ0osa0JBQW9CLFdBQVcsRUFBYSxlQUFlLFFBR3BFLEVBQWEsWUFDSixRQUFVLFdBQVcsRUFBYSxRQUFRLFFBR25ELEVBQVcsUUFBVSxNQUNaLFlBQWMsSUFHdkIsRUFBYSxxQkFDSixhQUFlLEVBQWEsaUJBQWlCLE9BR3RELEVBQWEsY0FDSixVQUFZLEVBQWEsVUFBVSxPQUc1QyxFQUFhLFdBQ0osU0FBVyxHQUFJLE1BQVEsVUFBVSxFQUFhLFNBQVMsT0FDekQsRUFBYSxlQUFpQixFQUFhLGNBQWMsT0FBUyxZQUVoRSxTQUFXLEdBQUksTUFBUSxVQUFVLEVBQWEsY0FBYyxVQUcvRCxZQUFZLElBQUksR0FBSSxTQUFTLFFBQVEsQUFBQyxHQUFVLE1BQ2xELEdBQU8sRUFBTSxvQkFFWCxPQUNELFNBQ1EsUUFBVSxLQUFLLFdBQVcsRUFBWSxFQUFNLGNBR3BELG9CQUNRLE1BQVEsS0FBSyxXQUFXLEVBQVksRUFBTSxjQUdsRCxtQkFDQSx1QkFDUSxJQUFNLEtBQUssV0FBVyxFQUFZLEVBQU0sY0FHaEQsc0JBQ1EsZ0JBQWtCLEtBQUssV0FBVyxFQUFZLEVBQU0sY0FHNUQsa0JBQ1EsWUFBYyxLQUFLLFdBQVcsRUFBWSxFQUFNLGNBR3hELGdCQUNBLHdCQUNRLFVBQVksS0FBSyxXQUFXLEVBQVksRUFBTSxjQUd0RCxvQkFDUSxPQUFTLEtBQUssV0FBVyxFQUFZLEVBQU0sTUFDM0MsT0FBTyxRQUFVLGFBR3pCLGtCQUNRLFlBQWMsS0FBSyxXQUFXLEVBQVksRUFBTSxjQUd4RCxxQkFDUSxTQUFXLEtBQUssV0FBVyxFQUFZLEVBQU0sTUFDN0MsWUFBYyxhQUd0QixtQkFDQSx3QkFDQSxxQkFDQSwwQ0FFSyxLQUFLLDhEQUErRCxZQUszRSxFQUdULFdBQVcsRUFBWSxFQUFJLE9BRXJCLGtCQUFvQixHQUFVLFFBQVEsU0FBVyxJQUFNLEdBQVUsUUFBUSxRQUFRLHlCQUMzRSxLQUFLLDBGQUNSLEVBQVUsWUFBWSxJQUFJLEdBQUksU0FBUyxHQUFHLElBRzFDLEVBQVcsSUFBSSxHQUd4QixnQkFBaUIsTUFDVCxHQUFpQixHQUNqQixFQUFvQixNQUV0QixZQUFjLEdBQVUsUUFBUSxRQUFTLE1BQ3JDLEdBQWdCLEVBQVUsUUFBUSxRQUFRLGtCQUVyQyxLQUFVLEdBQWUsTUFDNUIsR0FBZSxFQUFjLEdBRTdCLEVBQWdCLEVBQVUsWUFBWSxJQUFJLFNBQVMsT0FFckQsRUFBYSxXQUFhLE9BQVEsTUFDOUIsR0FBZ0IsS0FBSyxjQUFjLEVBQWUsS0FDL0MsR0FBSyxFQUVWLEVBQWMsUUFBUSxPQUFTLFdBQ3pCLEtBQUssOEVBQ04sV0FBYSxFQUFjLFFBQVEsR0FBRyxLQUVyQyxHQUFVLFVBQ1gsRUFBYSxXQUFhLGFBQWMsTUFDM0MsR0FBbUIsQ0FDdkIsR0FBSSxLQUdNLFdBQWEsS0FBSyxrQkFBa0IsRUFBZSxLQUNuRCxHQUFLLEVBRWIsRUFBYyxRQUFRLE9BQVMsV0FDekIsS0FBSyxrRkFFRixHQUFVLFVBS3RCLENBQ0wsWUFDQSxnQkFJSixjQUFjLEVBQWUsRUFBZSxNQUNwQyxHQUFnQixZQUVSLFNBQVMsUUFBUSxBQUFDLEdBQVUsTUFDbEMsR0FBVyxFQUFjLEVBQU0sT0FFakMsRUFBUyxXQUFhLHNCQUVwQixHQUFVLENBQ2QsR0FBSSxFQUFNLEdBQ1YsUUFBUyxHQUNULFFBQVMsR0FDVCxjQUFlLEdBQUksS0FBVSxVQUFVLEVBQVMsY0FBYyxJQUs1RCxXQUFhLE9BQ1AsUUFBVSxFQUFTLFFBQVEsSUFDM0IsUUFBVSxFQUFTLFFBQVEsS0FHNUIsS0FBSyxLQUdULENBQ0wsV0FDQSxNQUFPLElBSVgsa0JBQWtCLEVBQWUsRUFBZSxNQUN4QyxHQUF1QixVQUVwQixHQUFJLEVBQUcsRUFBSSxFQUFjLFNBQVMsT0FBUSxJQUFLLE1BQ2hELEdBQVEsRUFBYyxTQUFTLEdBRS9CLEVBQWtCLEVBQWMsRUFBTSxJQUV0QyxFQUFzQixDQUMxQixLQUFNLEVBQWdCLFNBQ3RCLGNBQWUsRUFBZ0IsY0FDL0IsR0FBSSxFQUFnQixHQUNwQixZQUFhLEVBQWdCLFlBQVksTUFHdkMsRUFBZ0IsV0FBYSw2QkFFbEIsTUFBUSxFQUFVLFlBQVksSUFBSSxTQUFTLEVBQU0sS0FBSyxTQUFTLE9BQU8sQUFBQyxHQUM3RSxFQUFNLGVBQWlCLFFBQzdCLEdBQUcsS0FFVSxLQUFLLFNBR2hCLEdBR1QsV0FBVyxFQUFXLEVBQWEsRUFBYSxHQUNwQyxXQUFhLEdBQUksU0FFckIsR0FBVyxLQUFLLFlBQVksRUFBVSxVQUFXLEVBQWEsR0FFOUQsRUFBYSxFQUFVLFFBQVEsUUFBUSxRQUVwQyxRQUFRLEFBQUMsR0FBVSxNQUNwQixHQUFZLEVBQVcsRUFBTSxTQUM5QixvQkFBb0IsRUFBTyxHQUVOLEVBQVUsWUFBWSxJQUFJLEVBQU0sSUFBSSxRQUU1QyxRQUFRLEFBQUMsR0FBZSxNQUNsQyxHQUFTLEVBQVMsSUFBSSxFQUFXLElBQ25DLElBQVcsVUFBa0IsSUFBSSxLQUduQyxFQUFNLFNBQVcsUUFDVCxXQUFXLElBQUksVUFJeEIsYUFBYSxFQUFVLFVBQVcsRUFBYSxRQUUvQywwQkFFQSx3QkFFSyxXQUFXLFNBQVMsQUFBQyxHQUFTLElBQ2xDLEVBQUssU0FBUyxjQUFlLENBQzNCLEVBQUssV0FBYSxTQUFTLGNBQWMsa0JBQW9CLEVBQUssT0FBTyxhQUV2RSxHQUFZLEdBQWtCLEVBQUssU0FBUyxpQkFFN0MsWUFBWSxXQUlmLEdBQWEsR0FBSSxNQUFrQixRQUdyQyxFQUFVLFdBQVcsU0FBUyxTQUFXLEdBQUssRUFBVSxXQUFXLFNBQVMsR0FBRyxZQUN2RSxXQUFXLFNBQVMsR0FBRyxXQUFhLElBQ3BDLFdBQWEsRUFBVSxXQUFXLFNBQVMsTUFHN0MsV0FBVyxXQUFhLEVBSXBDLFlBQVksRUFBVyxFQUFhLEVBQWEsTUFDekMsR0FBVyxHQUFJLEtBQ2YsRUFBYSxFQUFVLFFBQVEsUUFBUSxlQUVsQyxLQUFVLEdBQVksTUFDekIsR0FBSyxTQUFTLEdBQ2QsRUFBTyxFQUFXLEdBQ2xCLEVBQWdCLEVBQVUsWUFBWSxJQUFJLE1BRTVDLEdBQVEsS0FBSyxjQUFjLEVBQWUsRUFBVyxFQUFJLEVBQUssYUFFOUQsQ0FBQyxFQUFPLFFBQ0YsRUFBSyxjQUNOLFdBQ0ssS0FBSyxhQUFhLGFBRXZCLFVBQ0ssS0FBSyxZQUFZLGFBRXRCLFNBQ0ssS0FBSyxXQUFXLEVBQWUsRUFBYSxhQUVqRCxlQUNLLEtBQUssWUFBWSxFQUFlLGFBRXJDLGVBQ0EsU0FDSyxHQUFJLGNBRVQsaUJBRUssR0FBSSxZQUlWLEtBQU8sR0FBZ0IsaUJBQW9CLEVBQUssWUFDaEQsR0FBSyxPQUdSLGlCQUFpQixFQUFPLEtBQ3BCLElBQUksRUFBSSxTQUdaLEdBR1QsY0FBYyxFQUFlLEVBQVcsRUFBSSxFQUFNLElBQzVDLEdBQVksY0FFRixRQUFRLFFBQVEsQUFBQyxHQUFXLFVBQzdCLEtBQU0sR0FBVyxNQUNwQixHQUFXLEVBQVUsS0FFbEIsU0FBUyxRQUFRLENBQUMsRUFBUyxJQUFNLElBQ3BDLEVBQVEsS0FBTyxFQUFPLEdBQUksTUFDdEIsR0FBVSxJQUNULEdBQUksTUFFTixZQUFZLEtBQUssRUFBUSxpQkFHekIsS0FBTyxHQUFnQixpQkFBb0IsS0FDM0MsR0FBSyxJQUVELE1BQU0sR0FBSyxFQUloQixJQUFZLFFBQ1QsSUFBSSxTQU9aLEVBSVQsYUFBYSxFQUFlLElBQ3RCLEdBQ0EsT0FFVSxTQUFTLFFBQVEsQUFBQyxHQUFVLE1BQ2xDLEdBQU8sRUFBVSxRQUFRLFFBQVEsY0FBYyxFQUFNLElBRXZELElBQVMsV0FDTyxLQUlsQixJQUFvQixTQUNkLEdBQUksUUFDUCxJQUNELEdBQU8sRUFDUCxFQUFnQix1QkFBeUIsUUFBYSxFQUFnQixxQkFBcUIsUUFBVSxNQUNoRyxNQUdMLEdBQW9CLEVBQ3BCLEVBQWdCLFlBQWMsV0FDWixFQUFnQixVQUFVLE1BQVEsUUFHcEQsR0FBbUIsSUFDbkIsRUFBZ0IsV0FBYSxXQUNaLEVBQWdCLFNBQVMsTUFBUSxRQUdsRCxHQUFRLE9BQU8sV0FDZixFQUFTLE9BQU8sWUFFaEIsRUFBZ0IsY0FBZ0IsUUFBYSxFQUFnQixlQUFpQixXQUN4RSxFQUFnQixZQUFZLFFBQzNCLEVBQWdCLGFBQWEsWUFHbEMsR0FBUyxFQUFRLEtBRW5CLEdBQU0sR0FDTixFQUFnQixjQUFnQixXQUM1QixFQUFnQixZQUFZLFlBRzlCLEdBQWMsRUFBZ0IsWUFBYyxFQUFnQixZQUFZLE1BQVEsWUFFOUUsT0FDRCxLQUNLLEdBQUksSUFBa0IsRUFBSyxFQUFRLEVBQW1CLEdBQzFELElBQWdCLFFBQVksZUFBZSxhQUc1QyxLQUNLLEdBQUksSUFDVixDQUFDLEVBQVEsRUFDVCxFQUFRLEVBQ1IsRUFBUyxFQUNULENBQUMsRUFBUyxFQUNWLEVBQ0EseUJBS00sS0FBSyxrQ0FBb0MsRUFBTyxPQUNoRCxHQUFJLGlCQUtYLEdBSVQsWUFBWSxFQUFlLElBQ3JCLEdBQ0EsT0FFVSxTQUFTLFFBQVEsQUFBQyxHQUFVLE1BQ2xDLEdBQU8sRUFBVSxRQUFRLFFBQVEsY0FBYyxFQUFNLElBRXZELElBQVMsV0FDTSxLQUlqQixJQUFtQixTQUNiLEdBQUksUUFDUCxJQUNELEdBR0EsRUFBZSxZQUFjLFNBQ3hCLElBRUEsRUFBZSxVQUFVLFNBRzlCLEdBQWEsU0FFYixFQUFlLFFBQVUsV0FDbkIsR0FBSSxNQUFRLFVBQVUsRUFBZSxNQUFNLFdBR2pELEdBQVksRUFBZSxZQUFjLE9BQVksRUFBSSxFQUFlLFVBQVUsTUFBUSxJQUcxRixFQUFlLG9CQUFzQixRQUFhLEVBQWUsa0JBQWtCLFFBQVUsTUFDbkYsTUFHVixHQUFXLEVBQ1gsRUFBZSxvQkFBc0IsU0FDbkMsRUFBZSx1QkFBeUIsUUFBYSxFQUFlLHFCQUFxQixRQUFVLElBQzFGLElBRUEsRUFBZSxrQkFBa0IsWUFLMUMsR0FBUSxTQUVOLE9BQ0QsS0FDSyxHQUFJLElBQVcsRUFBTyxFQUFXLEVBQVUsYUFHaEQsS0FDSyxHQUFJLElBQWlCLEVBQU8sYUFHakMsTUFDQyxHQUFRLEtBQUssR0FBSyxFQUVsQixFQUFlLGFBQWUsV0FDeEIsR0FBVSxTQUFTLEVBQWUsV0FBVyxXQUduRCxHQUFXLEVBQ1gsRUFBZSxhQUFlLFdBSXJCLEdBQVUsU0FBUyxFQUFlLFdBQVcsU0FDN0MsS0FBSyxJQUFJLEVBQVUsTUFHeEIsR0FBSSxJQUFVLEVBQU8sRUFBVyxFQUFVLEVBQU8sRUFBVSx5QkFJM0QsS0FDTixpQ0FBbUMsRUFBZSxVQUFVLE1BQVEsbUNBRTlELEdBQUksSUFBVyxFQUFPLFNBSTlCLEVBQWUsY0FBZ0IsUUFBYSxFQUFlLFlBQVksUUFBVSxNQUM3RSxXQUFhLFVBSWhCLEdBR1QsV0FBVyxFQUFlLEVBQWEsRUFBYSxJQUM5QyxHQUNBLEVBQWdCLEtBQ2hCLEVBQWdCLFVBQ2QsR0FBaUIsWUFHVCxTQUFTLFFBQVEsQUFBQyxHQUFVLENBQ3BDLEVBQVksSUFBSSxFQUFNLFFBQ2IsRUFBWSxJQUFJLEVBQU0sS0FHL0IsRUFBWSxJQUFJLEVBQU0sT0FDZCxLQUFLLEVBQVksSUFBSSxFQUFNLE9BSXJDLEVBQVUsT0FBUyxJQUNWLEVBQ0YsRUFBVSxPQUFTLElBQ2pCLEVBQVUsTUFFVixHQUFJLElBQWtCLENBQUUsTUFBTyxhQUNoQyxLQUFLLElBR2IsU0FBVyxHQUFTLGNBQ1osUUFBUSxBQUFDLEdBQWEsSUFLOUIsRUFBUyxnQkFDRCxRQUFRLEFBQUMsR0FBYSxHQUNyQixTQUFXLE9BR2QsR0FBSSxJQUFZLEVBQVUsS0FDNUIsMEJBRUUsR0FBSSxJQUFLLEVBQVUsR0FHdEIsRUFHVCxZQUFZLEVBQWUsRUFBYSxNQUNoQyxHQUFXLEVBQWMsU0FBUyxPQUFPLENBQUMsRUFBSyxJQUMvQyxHQUFZLElBQUksRUFBTSxRQUFXLEVBQVksSUFBSSxFQUFNLEtBRXBELEdBQ04sTUFHRyxFQUFXLEdBQUksSUFBa0IsQ0FBRSxNQUFPLFFBQVUsVUFBVyxVQUM5RCxJQUFJLElBQUssRUFBVSxHQUk1QixpQkFBaUIsRUFBTyxFQUFXLE1BQzNCLEdBQXFCLEdBRXZCLGVBQWlCLE9BQXlCLFlBQWMsU0FBUyxFQUFVLFlBQVksUUFFdkYsaUJBQW1CLEtBQXlCLFdBQWEsR0FBYyxFQUFVLGNBQWMsU0FDaEYsV0FBYSxNQUU1QixtQkFBcUIsT0FBeUIsWUFBYyxFQUFVLGdCQUFnQixPQUV0RixlQUFpQixPQUF5QixZQUFjLEVBQVUsWUFBWSxPQUM5RSxnQkFBa0IsT0FBeUIsU0FBVyxFQUFVLGFBQWEsT0FDN0UsZ0JBQWtCLE9BQXlCLGFBQWUsRUFBVSxhQUFhLE9BRWpGLGVBQWlCLE9BQXlCLE1BQVEsRUFBVSxZQUFZLE9BRXhFLGlCQUFtQixPQUF5QixjQUFnQixFQUFVLGNBQWMsT0FDcEYsZ0JBQWtCLE9BQXlCLGFBQWUsRUFBVSxhQUFhLE9BRWpGLGtCQUFvQixPQUF5QixlQUFpQixFQUFVLGVBQWUsT0FDdkYsaUJBQW1CLE9BQXlCLGNBQWdCLEVBQVUsY0FBYyxTQUVsRixTQUFTLGNBQWdCLEVBR2pDLG9CQUFvQixFQUFPLEVBQVcsQ0FDaEMsa0JBQW9CLElBQ0wsRUFBVSxZQUFZLElBQUksRUFBTSxJQUFJLFNBRTVDLFFBQVEsQUFBQyxHQUFVLElBQ3RCLEVBQU0sZUFBaUIsaUJBQWtCLE1BQ3JDLEdBQWUsRUFBVSxRQUFRLFFBQVEsTUFBTSxFQUFNLE9BRXZELG1CQUFxQixHQUFjLE1BQy9CLEdBQU0sRUFBYSxnQkFBZ0IsTUFHckMsRUFBTSxTQUFXLFVBQ2IsT0FBTyxTQUFTLFVBQVUsS0FDdEIsV0FBVyxJQUFJLEVBQU0sV0FJekIsT0FBTyxHQUFJLEtBQVUsVUFBVSxRQVFqRCxhQUFhLEVBQVcsRUFBYSxFQUFVLE1BQ3ZDLEdBQWUsS0FBSywwQkFFZixLQUFNLEdBQVcsTUFDcEIsR0FBVyxFQUFVLEdBRVgsRUFBVSxZQUFZLElBQUksU0FBUyxFQUFTLEtBQUssUUFFekQsUUFBUSxBQUFDLEdBQVcsSUFDdEIsRUFBWSxJQUFJLEVBQU8sSUFBSyxNQUN4QixHQUFRLEVBQU8sR0FDSSxFQUFVLFlBQVksSUFBSSxHQUVsQyxRQUFRLFFBQVEsQUFBQyxHQUFrQixDQUM5QyxFQUFTLElBQUksRUFBYyxLQUNmLEVBQVMsSUFBSSxFQUFjLElBRW5DLEtBQUssR0FBSSxJQUFTLEVBQVMsT0FBUSxFQUFhLEVBQWMsV0FRaEYsZ0JBQWlCLE1BQ1QsR0FBZSxNQUVqQixRQUFVLEdBQVUsUUFBUSxRQUFTLE1BQ2pDLEdBQWUsRUFBVSxRQUFRLFFBQVEsY0FFcEMsS0FBVSxNQUNmLEVBQWEsR0FBUSxXQUFhLFdBQVksTUFDMUMsR0FBWSxFQUFhLEdBQVEsU0FFbkMsTUFBTSxRQUFRLEtBQ04sUUFBUSxBQUFDLEdBQWEsR0FDakIsRUFBUyxNQUFRLEdBQUksS0FBVSxVQUFVLEVBQVMsT0FBTyxPQUczRCxFQUFVLE1BQVEsR0FBSSxLQUFVLFVBQVUsRUFBVSxPQUFPLFVBTXpFLEdBSVQsb0JBQXFCLElBQ2Ysa0JBQW9CLEdBQVUsU0FBVyxnQkFBa0IsR0FBVSxRQUFRLGVBQWdCLE1BQ3pGLEdBQWUsRUFBVSxRQUFRLGVBQWUsYUFBYSxNQUM3RCxFQUFJLEVBQWEsR0FDakIsRUFBSSxFQUFhLEdBQ2pCLEVBQUksRUFBYSxNQUVuQixJQUFNLEdBQUssSUFBTSxHQUFLLElBQU0sRUFBRyxNQUMzQixHQUFRLEdBQUksSUFBTSxFQUFHLEVBQUcsS0FDcEIsV0FBVyxJQUFJLEdBQUksSUFBYSxFQUFPLE1BS3ZELHFCQUFzQixHQUNWLFdBQVcsU0FBUyxBQUFDLEdBQVUsQ0FDbkMsRUFBTSxRQUNKLEVBQU0sU0FBUyxnQkFBZ0IsVUFBWSxFQUFNLFNBQVMsZ0JBQWdCLFNBQVMsU0FDakYsTUFBTSxRQUFRLEVBQU0sWUFDaEIsU0FBUyxRQUFRLENBQUMsRUFBVSxJQUFNLE1BQ2pDLG1CQUFtQixFQUFPLEVBQVUsVUFHdEMsbUJBQW1CLEVBQU8sRUFBTSxhQU8vQyxtQkFBbUIsRUFBTyxFQUFVLEVBQVEsTUFDcEMsR0FBTyxFQUFNLEtBQ2IsRUFBVSxFQUFTLFFBR3JCLEdBQVksUUFFTixXQUFXLFNBQVMsQUFBQyxHQUFTLENBQ2xDLEVBQUssU0FDSCxNQUFNLFFBQVEsRUFBSyxZQUNoQixTQUFTLFFBQVEsQUFBQyxHQUFRLENBQ3pCLEVBQUksT0FBUyxHQUFXLEVBQUssT0FBUyxNQUFrQixNQUVyRCxFQUFLLFNBQVMsT0FBUyxHQUFXLEVBQUssT0FBUyxNQUFrQixPQUk3RSxFQUFXLE1BQ1AsR0FBWSxFQUFTLFVBQ2pCLGFBQWUsR0FFckIsSUFBVSxTQUFpQixTQUFXLElBQy9CLFNBQVMsR0FBUyxTQUNmLGFBQWUsSUFJbkMsUUFBcUIsQ0FDbkIsYUFBYyxFQUVkLE1BQU0sRUFBVyxNQUNULEdBQWMsR0FBSSxRQUVwQixZQUFjLEdBQVUsUUFBUSxRQUFTLE1BQ3JDLEdBQVcsRUFBVSxRQUFRLFFBQVEsa0JBRWhDLEtBQVUsR0FBVSxNQUN2QixHQUFnQixFQUFVLFlBQVksSUFBSSxTQUFTLElBQ25ELEVBQU0sS0FBSyxjQUFjLEVBQWUsRUFBUyxHQUFTLEtBRXBELElBQUksU0FBUyxHQUFTLFVBSS9CLEdBSVQsY0FBYyxFQUFlLEVBQVMsRUFBVyxRQUN2QyxFQUFRLGNBQ1QsYUFDSSxNQUFLLGtCQUFrQixFQUFlLEVBQVMsT0FHbkQsbUJBQ0ksTUFBSyxtQkFBbUIsSUFNckMsa0JBQWtCLEVBQWUsRUFBUyxFQUFXLE1BQzdDLEdBQVksRUFBVSxVQUN0QixFQUFlLEVBQVUsYUFFekIsRUFBYSxFQUFjLFFBQVEsSUFBSSxBQUFDLEdBQ3JDLEVBQVUsUUFBUSxRQUFRLE1BQU0sRUFBTyxRQUk1QyxFQUFXLFNBQVcsY0FFcEIsR0FBVyxFQUFjLFNBQVMsT0FBTyxDQUFDLEVBQVUsSUFDcEQsR0FBVSxFQUFNLE1BQVEsV0FBc0IsRUFBVSxFQUFNLEtBRTNELEdBQ04sTUFFRyxFQUFjLEVBQWMsU0FBUyxPQUFPLENBQUMsRUFBYSxJQUMxRCxHQUFhLEVBQU0sTUFBUSxXQUF5QixFQUFhLEVBQU0sS0FFcEUsR0FDTixNQUlHLEVBQVksRUFBVyxHQUV2QixFQUFxQixHQUV2QixpQkFBbUIsT0FBeUIsV0FBYSxHQUFjLEVBQVUsY0FBYyxRQUMvRixlQUFpQixPQUF5QixZQUFjLFNBQVMsRUFBVSxZQUFZLFFBRXZGLHdCQUEwQixPQUF5QixZQUFjLEVBQVUscUJBQXFCLE9BQ2hHLHFCQUF1QixPQUF5QixTQUFXLEVBQVUsa0JBQWtCLE9BQ3ZGLG9CQUFzQixPQUF5QixNQUFRLEVBQVUsaUJBQWlCLFlBRWhGLEdBQVksR0FBa0IsU0FFN0IsTUFBSyxZQUFZLEVBQVMsRUFBVSxFQUFhLEdBSTFELFlBQVksRUFBUyxFQUFVLEVBQWEsRUFBYyxNQUNsRCxHQUFXLEdBQUksSUFDakIsRUFBUSxhQUFjLEtBQU8sRUFBUSxlQUVuQyxHQUFlLEtBQUssYUFBYSxFQUFTLEdBQzFDLEVBQWUsS0FBSyxXQUFXLEdBRS9CLEVBQW9CLEdBQUksSUFBdUIsRUFBUSxPQUFRLFFBRXhELHVCQUF1QixLQUVoQyxhQUFhLFdBQVksR0FFekIsRUFBUSxPQUFPLE9BQVMsS0FDdEIsYUFBYSxRQUFTLEdBQUksSUFBdUIsRUFBUSxPQUFRLElBR25FLE1BQ0UsYUFBYSxZQUFhLEdBQUksSUFBc0IsRUFBUSxlQUFnQixNQUU1RSxhQUFhLGFBQWMsR0FBSSxJQUF1QixFQUFRLGNBQWUsTUFHN0UsYUFBZSxHQUdqQixFQUFRLE9BQU8sT0FBUyxFQUFHLE1BQ3ZCLEdBQWtCLEdBQUksSUFBdUIsRUFBUSxPQUFRLEdBRTdELEVBQWUsR0FBSSxNQUFVLGdCQUFnQixLQUNuQyxhQUFhLEtBRXpCLGFBQWEsU0FBVSxRQUdyQixJQUFJLFFBQVEsQ0FBQyxFQUFVLElBQU0sSUFFL0IsR0FBTyxRQUFZLEdBQUcsV0FHdEIsSUFBTSxNQUNELFFBR0wsYUFBYSxFQUFNLEdBQUksSUFBdUIsRUFBUSxJQUFJLEdBQUksTUFHaEUsRUFBUSxVQUFZLEVBQVEsU0FBUyxjQUFnQixVQUFXLElBRTlELEdBQW9CLEVBQVEsY0FBYyxHQUMxQyxFQUFhLE9BRVQsY0FBYyxRQUFRLENBQUMsRUFBYyxJQUFNLENBQzdDLElBQWlCLE1BQ2YsU0FBUyxFQUFZLEVBQUksRUFBWSxLQUVyQixJQUNQLEtBS2IsRUFBSSxPQUFPLE9BQVMsRUFBRyxNQUNuQixHQUFZLEVBQUksT0FBTyxFQUFJLE9BQU8sT0FBUyxHQUMzQyxFQUFZLEVBQVUsTUFBUSxFQUFVLE1BRTFDLElBQWMsRUFBUSxjQUFjLFVBQ2xDLFNBQVMsRUFBVyxFQUFRLGNBQWMsT0FBUyxFQUFXLEdBTWxFLEVBQUksT0FBTyxTQUFXLEtBQ3BCLFNBQVMsRUFBRyxFQUFRLGNBQWMsT0FBUSxFQUFRLGNBQWMsZ0JBSW5FLGdCQUFnQixFQUFLLEVBQVMsRUFBYSxHQUV6QyxFQUdULGFBQWEsRUFBUyxFQUFVLE1BQ3hCLEdBQWUsUUFFYixnQkFBa0IsRUFBUSxXQUFhLE9BQVksRUFBUSxTQUFTLEVBQUksS0FDeEUsY0FBZ0IsRUFBUSxxQkFBdUIsT0FBWSxFQUFRLG1CQUFtQixFQUFJLEdBRTlGLEVBQVEsc0JBQ0YsTUFBUSxLQUFLLGtCQUFrQixFQUFRLGtCQUFrQixLQUcvRCxFQUFRLHlCQUNGLFNBQVcsS0FBSyxxQkFBcUIsRUFBUSxxQkFBcUIsS0FHeEUsRUFBUSx1QkFDRixPQUFTLEtBQUssYUFBYSxFQUFRLG1CQUFtQixLQUc1RCxFQUFRLGVBQWdCLEdBQ2xCLEdBQUssTUFFVCxHQUFJLE9BQ0QsRUFBUSxlQUFlLE1BQ3BCLEdBQUcsS0FBSyxLQUFLLFNBQVMsRUFBUSxlQUFlLGtCQUtqRCxZQUFjLEdBRWxCLElBQWEsU0FDUCxTQUFXLElBRVYsU0FBUyxRQUFRLENBQUMsRUFBUyxJQUFNLEdBRWhDLFFBQVEsUUFBUSxDQUFDLEVBQU8sSUFBTSxDQUNoQyxFQUFRLFlBQVksS0FBVyxXQUFtQixZQUFZLEdBQVMsTUFFbkUsWUFBWSxHQUFPLEtBQUssQ0FDOUIsR0FBSSxFQUNKLE9BQVEsRUFBUSxRQUFRLFVBTXpCLEVBR1QsV0FBVyxFQUFTLE1BQ1osR0FBZSxDQUNuQixPQUFRLEdBQ1IsT0FBUSxHQUNSLE9BQVEsR0FDUixJQUFLLEdBQ0wsY0FBZSxHQUNmLGNBQWUsR0FDZixlQUFnQixPQUdkLEdBQ0EsRUFBZSxFQUNmLEVBQWEsRUFDYixFQUEwQixHQUcxQixFQUEyQixHQUMzQixFQUFtQixHQUNuQixFQUFrQixHQUNsQixFQUFlLEdBQ2YsRUFBbUIsR0FDbkIsRUFBeUIsWUFFckIsY0FBYyxRQUFRLENBQUMsRUFBYSxJQUF1QixJQUM3RCxHQUFZLEdBU1osRUFBYyxNQUNGLEVBQWMsS0FDaEIsT0FHVixHQUFxQixHQUNyQixFQUFlLFFBRUMsS0FBSyxFQUFjLEVBQUcsRUFBYyxFQUFJLEVBQUcsRUFBYyxFQUFJLEdBRTdFLEVBQVEsTUFBTyxNQUNYLEdBQU8sR0FBUSxFQUFvQixFQUFjLEVBQWEsRUFBUSxTQUVqRSxLQUFLLEVBQUssR0FBSSxFQUFLLEdBQUksRUFBSyxPQUdyQyxFQUFRLFNBQVUsSUFDaEIsRUFBUSxZQUFZLEtBQWlCLFVBQy9CLFlBQVksR0FBYSxRQUFRLEFBQUMsR0FBTyxHQUN2QyxLQUFLLEVBQUcsVUFDRixLQUFLLEVBQUcsTUFJdEIsRUFBUSxPQUFTLEVBQUcsQ0FDakIsWUFDSyxLQUNOLHlHQUV3QixTQUd0QixHQUFTLENBQUMsRUFBRyxFQUFHLEVBQUcsR0FDbkIsRUFBUyxDQUFDLEVBQUcsRUFBRyxFQUFHLEtBRWpCLFFBQVEsQ0FBQyxFQUFRLElBQWdCLElBQ25DLEdBQWdCLEVBQ2hCLEVBQWUsRUFBYyxLQUUxQixRQUFRLENBQUMsRUFBZ0IsRUFBcUIsSUFBd0IsSUFDdkUsRUFBZ0IsRUFBZ0IsR0FDZCxHQUF1QixJQUMzQixPQUVWLEdBQU0sRUFBTyxLQUNaLEdBQXVCLElBQ2YsU0FLTCxJQUNOLE9BSUwsRUFBUSxPQUFTLEtBQ2QsS0FBSyxLQUNDLEtBQUssVUFHWixHQUFJLEVBQUcsRUFBSSxFQUFHLEVBQUUsSUFDWCxLQUFLLEVBQVEsTUFDUCxLQUFLLEVBQWMsT0FJckMsRUFBUSxPQUFRLE1BQ1osR0FBTyxHQUFRLEVBQW9CLEVBQWMsRUFBYSxFQUFRLFVBRWhFLEtBQUssRUFBSyxHQUFJLEVBQUssR0FBSSxFQUFLLElBR3RDLEVBQVEsVUFBWSxFQUFRLFNBQVMsY0FBZ0IsV0FDakMsR0FBUSxFQUFvQixFQUFjLEVBQWEsRUFBUSxVQUFVLEdBRzdGLEVBQVEsTUFDRixHQUFHLFFBQVEsQ0FBQyxFQUFJLElBQU0sTUFDdEIsR0FBTyxHQUFRLEVBQW9CLEVBQWMsRUFBYSxHQUVoRSxFQUFRLEtBQU8sV0FDVCxHQUFLLE1BR1AsR0FBRyxLQUFLLEVBQUssTUFDYixHQUFHLEtBQUssRUFBSyxVQU1yQixTQUNHLFFBQ0gsRUFDQSxFQUNBLEVBQ0EsRUFDQSxFQUNBLEVBQ0EsRUFDQSxFQUNBLEVBQ0EsU0FJVyxJQUdTLEtBQ1IsS0FDRCxLQUNILEtBQ0ksS0FDTSxNQUlqQixFQUlULFFBQ0UsRUFDQSxFQUNBLEVBQ0EsRUFDQSxFQUNBLEVBQ0EsRUFDQSxFQUNBLEVBQ0EsRUFDQSxRQUNTLEdBQUksRUFBRyxFQUFJLEVBQVksTUFDdEIsT0FBTyxLQUFLLEVBQVEsZ0JBQWdCLEVBQW9CLE9BQ3hELE9BQU8sS0FBSyxFQUFRLGdCQUFnQixFQUFvQixPQUN4RCxPQUFPLEtBQUssRUFBUSxnQkFBZ0IsRUFBb0IsT0FFeEQsT0FBTyxLQUFLLEVBQVEsZ0JBQWdCLEtBQXlCLEdBQUssT0FDbEUsT0FBTyxLQUFLLEVBQVEsZ0JBQWdCLEtBQXlCLEdBQUssRUFBSSxPQUN0RSxPQUFPLEtBQUssRUFBUSxnQkFBZ0IsS0FBeUIsR0FBSyxFQUFJLE9BRXRFLE9BQU8sS0FBSyxFQUFRLGdCQUFnQixFQUFvQixFQUFJLE9BQzVELE9BQU8sS0FBSyxFQUFRLGdCQUFnQixFQUFvQixFQUFJLEVBQUksT0FDaEUsT0FBTyxLQUFLLEVBQVEsZ0JBQWdCLEVBQW9CLEVBQUksRUFBSSxLQUVwRSxFQUFRLGFBQ0YsY0FBYyxLQUFLLEVBQVksTUFDL0IsY0FBYyxLQUFLLEVBQVksTUFDL0IsY0FBYyxLQUFLLEVBQVksTUFDL0IsY0FBYyxLQUFLLEVBQVksTUFFL0IsY0FBYyxLQUFLLEtBQWlCLEdBQUssTUFDekMsY0FBYyxLQUFLLEtBQWlCLEdBQUssRUFBSSxNQUM3QyxjQUFjLEtBQUssS0FBaUIsR0FBSyxFQUFJLE1BQzdDLGNBQWMsS0FBSyxLQUFpQixHQUFLLEVBQUksTUFFN0MsY0FBYyxLQUFLLEVBQVksRUFBSSxNQUNuQyxjQUFjLEtBQUssRUFBWSxFQUFJLEVBQUksTUFDdkMsY0FBYyxLQUFLLEVBQVksRUFBSSxFQUFJLE1BQ3ZDLGNBQWMsS0FBSyxFQUFZLEVBQUksRUFBSSxNQUV2QyxlQUFlLEtBQUssRUFBa0IsTUFDdEMsZUFBZSxLQUFLLEVBQWtCLE1BQ3RDLGVBQWUsS0FBSyxFQUFrQixNQUN0QyxlQUFlLEtBQUssRUFBa0IsTUFFdEMsZUFBZSxLQUFLLEtBQXVCLEdBQUssTUFDaEQsZUFBZSxLQUFLLEtBQXVCLEdBQUssRUFBSSxNQUNwRCxlQUFlLEtBQUssS0FBdUIsR0FBSyxFQUFJLE1BQ3BELGVBQWUsS0FBSyxLQUF1QixHQUFLLEVBQUksTUFFcEQsZUFBZSxLQUFLLEVBQWtCLEVBQUksTUFDMUMsZUFBZSxLQUFLLEVBQWtCLEVBQUksRUFBSSxNQUM5QyxlQUFlLEtBQUssRUFBa0IsRUFBSSxFQUFJLE1BQzlDLGVBQWUsS0FBSyxFQUFrQixFQUFJLEVBQUksS0FHcEQsRUFBUSxVQUNGLE9BQU8sS0FBSyxFQUFXLE1BQ3ZCLE9BQU8sS0FBSyxFQUFXLE1BQ3ZCLE9BQU8sS0FBSyxFQUFXLE1BRXZCLE9BQU8sS0FBSyxLQUFnQixHQUFLLE1BQ2pDLE9BQU8sS0FBSyxLQUFnQixHQUFLLEVBQUksTUFDckMsT0FBTyxLQUFLLEtBQWdCLEdBQUssRUFBSSxNQUVyQyxPQUFPLEtBQUssRUFBVyxFQUFJLE1BQzNCLE9BQU8sS0FBSyxFQUFXLEVBQUksRUFBSSxNQUMvQixPQUFPLEtBQUssRUFBVyxFQUFJLEVBQUksS0FHckMsRUFBUSxVQUFZLEVBQVEsU0FBUyxjQUFnQixjQUMvQyxjQUFjLEtBQUssS0FDbkIsY0FBYyxLQUFLLEtBQ25CLGNBQWMsS0FBSyxJQUd6QixFQUFRLFdBQ0YsT0FBTyxLQUFLLEVBQVksTUFDeEIsT0FBTyxLQUFLLEVBQVksTUFDeEIsT0FBTyxLQUFLLEVBQVksTUFFeEIsT0FBTyxLQUFLLEtBQWlCLEdBQUssTUFDbEMsT0FBTyxLQUFLLEtBQWlCLEdBQUssRUFBSSxNQUN0QyxPQUFPLEtBQUssS0FBaUIsR0FBSyxFQUFJLE1BRXRDLE9BQU8sS0FBSyxFQUFZLEVBQUksTUFDNUIsT0FBTyxLQUFLLEVBQVksRUFBSSxFQUFJLE1BQ2hDLE9BQU8sS0FBSyxFQUFZLEVBQUksRUFBSSxLQUd0QyxFQUFRLE1BQ0YsR0FBRyxRQUFRLENBQUMsRUFBSSxJQUFNLENBQ3hCLEVBQVEsSUFBSSxLQUFPLFdBQW1CLElBQUksR0FBSyxNQUUzQyxJQUFJLEdBQUcsS0FBSyxFQUFRLEdBQUcsTUFDdkIsSUFBSSxHQUFHLEtBQUssRUFBUSxHQUFHLE1BRXZCLElBQUksR0FBRyxLQUFLLEVBQVEsTUFBUSxHQUFLLE1BQ2pDLElBQUksR0FBRyxLQUFLLEVBQVEsTUFBUSxHQUFLLEVBQUksTUFFckMsSUFBSSxHQUFHLEtBQUssRUFBUSxHQUFHLEVBQUksTUFDM0IsSUFBSSxHQUFHLEtBQUssRUFBUSxHQUFHLEVBQUksRUFBSSxNQU0vQyxnQkFBZ0IsRUFBVyxFQUFlLEVBQWEsRUFBYyxDQUMvRCxJQUFnQixTQUVWLGdCQUFnQixTQUFXLEtBR3pCLFdBQVcsUUFBUSxBQUFDLEdBQWMsTUFDdEMsR0FBZSxFQUFVLFFBQVEsUUFBUSxTQUFTLEVBQVUsT0FFOUQsSUFBaUIsYUFDZCxpQkFBaUIsRUFBVyxFQUFlLEVBQWMsRUFBYyxFQUFVLFNBUzVGLGlCQUFpQixFQUFXLEVBQWUsRUFBYyxFQUFjLEVBQU0sTUFDckUsR0FBVyxHQUFJLElBQ2pCLEVBQWEsYUFBbUIsS0FBTyxFQUFhLGVBRWxELEdBQWdCLEVBQWMscUJBQXVCLE9BQVksRUFBYyxtQkFBbUIsRUFBSSxHQUd0RyxFQUFrQixFQUFjLFdBQWEsT0FBWSxFQUFjLFNBQVMsRUFBRSxRQUFVLEdBRTVGLEVBQWlCLEVBQWEsV0FBYSxPQUFZLEVBQWEsU0FBUyxFQUFJLEdBQ2pGLEVBQVUsRUFBYSxVQUFZLE9BQVksRUFBYSxRQUFRLEVBQUksVUFFckUsR0FBSSxFQUFHLEVBQUksRUFBUSxPQUFRLElBQUssTUFDakMsR0FBYSxFQUFRLEdBQUssSUFJaEIsSUFBZSxFQUFlLEVBQUksS0FDbEMsRUFBYSxJQUFNLEVBQWUsRUFBSSxFQUFJLEtBQzFDLEVBQWEsSUFBTSxFQUFlLEVBQUksRUFBSSxRQUl0RCxHQUFlLENBQ25CLGdCQUNBLG1CQUdJLEVBQWUsS0FBSyxXQUFXLEdBRS9CLEVBQXlCLEdBQUksSUFBdUIsRUFBYSxPQUFRLEtBQzdELEtBQU8sR0FBUSxFQUFhLFdBRWpDLHVCQUF1QixLQUUxQixnQkFBZ0IsU0FBUyxLQUFLLEdBSTFDLGFBQWEsRUFBWSxNQUNqQixHQUFjLEVBQVcsdUJBQ3pCLEVBQWdCLEVBQVcseUJBQzNCLEVBQVMsRUFBVyxRQUFRLEtBQzlCLEdBQW1CLFNBQ25CLEtBQWtCLGtCQUNoQixlQUFpQixLQUNMLEVBQVcsWUFBWSxFQUM1QixnQkFBa0IsT0FDYixFQUFXLGFBQWEsSUFJbkMsQ0FDTCxTQUFVLEVBQ1YsU0FDQSxRQUFTLEVBQ1QsY0FDQSxpQkFLSixTQUFTLEVBQVEsTUFDVCxHQUFjLEVBQU8sdUJBQ3JCLEVBQWdCLEVBQU8seUJBQ3ZCLEVBQVMsRUFBTyxHQUFHLEtBQ3JCLEdBQWMsU0FDZCxLQUFrQixvQkFDTixFQUFPLFFBQVEsR0FHeEIsQ0FDTCxTQUFVLEVBQ1YsU0FDQSxRQUFTLEVBQ1QsY0FDQSxpQkFLSixrQkFBa0IsRUFBVyxNQUNyQixHQUFjLEVBQVUsdUJBQ3hCLEVBQWdCLEVBQVUseUJBQzFCLEVBQVMsRUFBVSxPQUFPLEtBQzVCLEdBQWMsU0FDZCxLQUFrQixvQkFDTixFQUFVLFdBQVcsR0FHOUIsQ0FDTCxTQUFVLEVBQ1YsU0FDQSxRQUFTLEVBQ1QsY0FDQSxpQkFLSixxQkFBcUIsRUFBYyxNQUMzQixHQUFjLEVBQWEsdUJBQzNCLEVBQWdCLEVBQWEsNEJBRS9CLElBQWdCLDZCQUNYLENBQ0wsU0FBVSxFQUNWLE9BQVEsQ0FBQyxHQUNULFFBQVMsQ0FBQyxHQUNWLFlBQWEsVUFDYixzQkFJRSxHQUFzQixFQUFhLFVBQVUsRUFLN0MsRUFBdUIsVUFFcEIsR0FBSSxFQUFHLEVBQUksRUFBb0IsT0FBUSxFQUFFLElBQ2hDLEtBQUssU0FHaEIsQ0FDTCxTQUFVLEVBQ1YsT0FBUSxFQUNSLFFBQVMsRUFDVCxjQUNBLGlCQUtKLG1CQUFtQixFQUFTLE1BUXBCLEdBQVEsU0FBUyxFQUFRLFVBRTNCLE1BQU0sa0JBQ0EsTUFBTSx3REFBeUQsRUFBUSxNQUFPLEVBQVEsSUFDdkYsR0FBSSxTQUdQLEdBQVMsRUFBUSxFQUVqQixFQUFRLEVBQVEsV0FBVyxFQUMzQixFQUFxQixHQUNyQixFQUFlLEVBQVEsT0FBTyxTQUUzQixHQUFJLEVBQUcsRUFBSSxFQUFhLE9BQVEsRUFBSSxFQUFHLEdBQUssSUFDckMsS0FBSyxHQUFJLE1BQVUsVUFBVSxFQUFjLE9BR3ZELEdBQVcsS0FFWCxFQUFRLE9BQVMsV0FDTCxLQUFLLEVBQWMsWUFDeEIsRUFBUSxPQUFTLFdBQVksR0FDMUIsSUFDRixFQUFNLE9BQVMsRUFBSSxTQUVwQixHQUFJLEVBQUcsRUFBSSxFQUFRLEVBQUUsSUFDZCxLQUFLLEVBQWMsU0FLL0IsR0FBVyxBQURILEdBQUksSUFBVyxFQUFRLEVBQU8sRUFBZSxFQUFXLEdBQy9DLFNBQVMsRUFBYyxPQUFTLEdBRWpELEVBQVksR0FBSSxjQUFhLE9BQU8sRUFBUyxRQUFVLEdBUXZELEVBQVcsR0FBSSxhQUNaLGFBQWEsV0FBWSxHQUFJLElBQWdCLEVBQVcsSUFFMUQsR0FJWCxRQUFzQixDQUNwQixhQUFjLEVBRWQsT0FBUSxNQUNBLEdBQXNCLEdBRXRCLEVBQVcsS0FBSyxnQkFFbEIsSUFBYSxnQkFDSixLQUFPLEdBQVUsTUFDcEIsR0FBVSxFQUFTLEdBRW5CLEVBQU8sS0FBSyxRQUFRLEtBRVgsS0FBSyxTQUlqQixHQUdULFlBQWEsSUFHUCxFQUFVLFFBQVEsUUFBUSxpQkFBbUIsbUJBRTNDLEdBQWdCLEtBQUssZ0NBRXRCLHFCQUFxQixRQUVwQixHQUFZLEtBQUsscUJBQXFCLFNBQzNCLE1BQUssZ0JBQWdCLEdBUXhDLDBCQUEyQixNQUNuQixHQUFnQixFQUFVLFFBQVEsUUFBUSxtQkFFMUMsRUFBZ0IsR0FBSSxjQUVmLEtBQVUsR0FBZSxNQUM1QixHQUFlLEVBQWMsTUFFL0IsRUFBYSxTQUFTLE1BQU0seUJBQTJCLEtBQU0sTUFDekQsR0FBWSxDQUNoQixHQUFJLEVBQWEsR0FDakIsS0FBTSxFQUFhLFNBQ25CLE9BQVEsTUFHSSxJQUFJLEVBQVUsR0FBSSxVQUk3QixHQU1ULHFCQUFxQixFQUFlLE1BQzVCLEdBQVksRUFBVSxRQUFRLFFBQVEsd0JBU2pDLEtBQVUsR0FBVyxNQUN4QixHQUFpQixDQUNyQixHQUFJLEVBQVUsR0FBUSxHQUN0QixNQUFPLEVBQVUsR0FBUSxRQUFRLEVBQUUsSUFBSSxJQUN2QyxPQUFRLEVBQVUsR0FBUSxjQUFjLEdBR3BDLEVBQWdCLEVBQVUsWUFBWSxJQUFJLEVBQWUsT0FFM0QsSUFBa0IsT0FBVyxNQUN6QixHQUFtQixFQUFjLFFBQVEsR0FBRyxHQUM1QyxFQUE2QixFQUFjLFFBQVEsR0FBRyxhQUV4RCxFQUEyQixNQUFNLE9BQ3JCLElBQUksR0FBa0IsT0FBTyxFQUFPLEVBQ3pDLEVBQTJCLE1BQU0sT0FDNUIsSUFBSSxHQUFrQixPQUFPLEVBQU8sRUFDekMsRUFBMkIsTUFBTSxPQUM1QixJQUFJLEdBQWtCLE9BQU8sRUFBTyxFQUN6QyxFQUEyQixNQUFNLG9CQUFzQixFQUFjLElBQUksT0FDcEUsSUFBSSxHQUFrQixPQUFPLE1BQVcsS0FTOUQscUJBQXFCLEVBQWUsTUFDNUIsR0FBWSxFQUFVLFFBQVEsUUFBUSxlQUV0QyxFQUFZLEdBQUksY0FFWCxLQUFVLEdBQVcsTUFDeEIsR0FBdUIsR0FFdkIsRUFBYSxFQUFVLFlBQVksSUFBSSxTQUFTLElBRWxELElBQWUsU0FFQSxFQUFXLFNBRW5CLFFBQVEsQ0FBQyxFQUFPLElBQU0sSUFDekIsRUFBYyxJQUFJLEVBQU0sSUFBSyxNQUN6QixHQUFZLEVBQWMsSUFBSSxFQUFNLE9BSXhDLEVBQVUsT0FBTyxJQUFNLFFBQ3ZCLEVBQVUsT0FBTyxJQUFNLFFBQ3ZCLEVBQVUsT0FBTyxJQUFNLE9BQ3ZCLElBQ0ksRUFBZ0IsS0FBTyxPQUFXLE1BQzlCLEdBQVUsRUFBVSxZQUFZLElBQUksRUFBTSxJQUFJLFFBQVEsT0FBTyxBQUFDLEdBQzNELEVBQU8sZUFBaUIsUUFDOUIsR0FBRyxNQUVGLElBQVksT0FBVyxNQUNuQixHQUFXLEVBQVUsUUFBUSxRQUFRLE1BQU0sRUFBUSxZQUVuRCxFQUFZLENBQ2hCLFVBQVcsR0FBZ0IsaUJBQW9CLEVBQVMsVUFDeEQsR0FBSSxFQUFTLEdBQ2IsZ0JBQWlCLENBQUMsRUFBRyxFQUFHLEdBQ3hCLGdCQUFpQixDQUFDLEVBQUcsRUFBRyxHQUN4QixhQUFjLENBQUMsRUFBRyxFQUFHLE1BR2IsV0FBVyxTQUFTLEFBQUMsR0FBVSxDQUNuQyxFQUFNLEtBQU8sRUFBUyxPQUNuQixVQUFZLEVBQU0sT0FFbkIsRUFBTSxTQUFTLGtCQUFvQixXQUFhLEVBQU0sU0FBUyxjQUFjLGVBSWhGLEVBQUssY0FBZ0IsVUFBWSxHQUFJLElBSXRDLGVBQWlCLE9BQWUsWUFBYyxFQUFTLFlBQVksT0FDbkUsZ0JBQWtCLE9BQWUsYUFBZSxFQUFTLGFBQWEsU0FFMUQsR0FBSyxHQUlyQixFQUFnQixPQUFvQixHQUFHLEVBQVUsTUFBUSxXQUNwRCxFQUFVLE9BQU8sUUFBVSxPQUFXLElBQzNDLEVBQWdCLEtBQU8sT0FBVyxNQUM5QixHQUFhLEVBQVUsWUFBWSxJQUFJLEVBQU0sSUFBSSxRQUFRLE9BQU8sQUFBQyxHQUM5RCxFQUFPLGVBQWlCLFFBQzlCLEdBQUcsR0FFQSxFQUFZLEVBQVUsWUFBWSxJQUFJLEdBQVksUUFBUSxHQUFHLEdBQzdELEVBQVEsRUFBVSxZQUFZLElBQUksR0FBVyxRQUFRLEdBQUcsR0FHeEQsRUFBVSxFQUFVLFlBQVksSUFBSSxHQUFPLFFBQVEsR0FBRyxHQUV0RCxFQUFXLEVBQVUsUUFBUSxRQUFRLE1BQU0sR0FFM0MsRUFBTyxDQUNYLFVBQVcsR0FBZ0IsaUJBQW9CLEVBQVMsVUFDeEQsVUFBVyxFQUFVLFFBQVEsUUFBUSxTQUFTLEdBQVksWUFHNUMsR0FBSyxJQUdQLEdBQUcsRUFBVSxNQUFRLFFBS2pDLElBQUksU0FBUyxHQUFTLFVBSTdCLEdBS1QsZ0JBQWdCLEVBQVcsTUFDbkIsR0FBWSxFQUFVLFFBQVEsUUFBUSxlQUd0QyxFQUFXLFlBRU4sS0FBVSxHQUFXLE1BQ3hCLEdBQVcsRUFBVSxZQUFZLElBQUksU0FBUyxJQUFTLFNBRXpELEVBQVMsT0FBUyxXQUdaLEtBQ04scUlBSUUsR0FBUSxFQUFVLElBQUksRUFBUyxHQUFHLE1BRS9CLEdBQVUsQ0FDakIsS0FBTSxFQUFVLEdBQVEsU0FDeEIsZUFJRyxHQUdULFFBQVEsRUFBUyxJQUNYLEdBQVMsWUFFTCxNQUFNLFFBQVEsQUFBQyxHQUFjLEdBQzFCLEVBQU8sT0FBTyxLQUFLLGVBQWUsTUFHdEMsR0FBSSxJQUFjLEVBQVEsS0FBTSxHQUFJLEdBRzdDLGVBQWUsRUFBVyxNQUNsQixHQUFjLE1BRWhCLEdBQXVCLEdBQUksR0FDM0IsRUFBdUIsR0FBSSxHQUMzQixFQUFvQixHQUFJLE1BRXhCLEVBQVUsYUFBcUIsVUFBVSxVQUFVLEVBQWlCLEVBQWlCLEtBRXZFLEVBQWdCLFlBQ2hCLEdBQUksTUFBUSxrQkFBa0IsRUFBaUIsRUFBVSxZQUFZLFlBQ3hFLEVBQWEsVUFFeEIsRUFBVSxJQUFNLFFBQWEsT0FBTyxLQUFLLEVBQVUsRUFBRSxRQUFRLE9BQVMsRUFBRyxNQUNyRSxHQUFnQixLQUFLLG9CQUN6QixFQUFVLFVBQ1YsRUFBVSxFQUFFLE9BQ1osRUFDQSxZQUVFLElBQWtCLFVBQWtCLEtBQUssTUFHM0MsRUFBVSxJQUFNLFFBQWEsT0FBTyxLQUFLLEVBQVUsRUFBRSxRQUFRLE9BQVMsRUFBRyxNQUNyRSxHQUFnQixLQUFLLHNCQUN6QixFQUFVLFVBQ1YsRUFBVSxFQUFFLE9BQ1osRUFDQSxFQUFVLFlBQ1YsRUFBVSxhQUNWLEVBQVUsWUFFUixJQUFrQixVQUFrQixLQUFLLE1BRzNDLEVBQVUsSUFBTSxRQUFhLE9BQU8sS0FBSyxFQUFVLEVBQUUsUUFBUSxPQUFTLEVBQUcsTUFDckUsR0FBYSxLQUFLLG9CQUFvQixFQUFVLFVBQVcsRUFBVSxFQUFFLE9BQVEsRUFBYyxTQUMvRixJQUFlLFVBQWtCLEtBQUssTUFHeEMsRUFBVSxnQkFBa0IsT0FBVyxNQUNuQyxHQUFhLEtBQUssbUJBQW1CLEdBQ3ZDLElBQWUsVUFBa0IsS0FBSyxTQUdyQyxHQUdULG9CQUFvQixFQUFXLEVBQVEsRUFBYyxFQUFNLE1BQ25ELEdBQVEsS0FBSyxtQkFBbUIsR0FDaEMsRUFBUyxLQUFLLHVCQUF1QixFQUFPLEVBQVEsU0FFbkQsSUFBSSxJQUFvQixFQUFZLElBQU0sRUFBTSxFQUFPLEdBR2hFLHNCQUFzQixFQUFXLEVBQVEsRUFBYyxFQUFhLEVBQWMsRUFBWSxDQUN4RixFQUFPLElBQU0sY0FDVixxQkFBcUIsRUFBTyxLQUMxQixFQUFFLE9BQVMsRUFBTyxFQUFFLE9BQU8sSUFBSSxHQUFVLFdBRTlDLEVBQU8sSUFBTSxjQUNWLHFCQUFxQixFQUFPLEtBQzFCLEVBQUUsT0FBUyxFQUFPLEVBQUUsT0FBTyxJQUFJLEdBQVUsV0FFOUMsRUFBTyxJQUFNLGNBQ1YscUJBQXFCLEVBQU8sS0FDMUIsRUFBRSxPQUFTLEVBQU8sRUFBRSxPQUFPLElBQUksR0FBVSxnQkFHNUMsR0FBUSxLQUFLLG1CQUFtQixHQUNoQyxFQUFTLEtBQUssdUJBQXVCLEVBQU8sRUFBUSxHQUV0RCxJQUFnQixXQUNKLEVBQVksSUFBSSxHQUFVLFlBQzVCLEtBQUssS0FFSCxHQUFJLE1BQVEsVUFBVSxLQUN0QixHQUFJLEtBQWEsYUFBYSxJQUcxQyxJQUFpQixXQUNKLEVBQWEsSUFBSSxHQUFVLFlBQzdCLEtBQUssS0FFSCxHQUFJLE1BQVEsVUFBVSxLQUN0QixHQUFJLEtBQWEsYUFBYSxHQUFjLGdCQUd2RCxHQUFhLEdBQUksR0FDakIsRUFBUSxHQUFJLElBRVosRUFBbUIsVUFFaEIsR0FBSSxFQUFHLEVBQUksRUFBTyxPQUFRLEdBQUssSUFDaEMsSUFBSSxFQUFPLEdBQUksRUFBTyxFQUFJLEdBQUksRUFBTyxFQUFJLEdBQUksS0FFeEMsYUFBYSxHQUVwQixJQUFnQixVQUFzQixZQUFZLEdBQ2xELElBQWlCLFVBQXNCLFNBQVMsS0FFekMsUUFBUSxFQUFtQixFQUFJLEVBQUssU0FHMUMsSUFBSSxJQUF3QixFQUFZLGNBQWUsRUFBTyxHQUd2RSxtQkFBbUIsRUFBVyxNQUN0QixHQUFTLEVBQVUsY0FBYyxPQUFPLE1BQ3hDLEVBQVMsRUFBTyxPQUFPLElBQUksQUFBQyxHQUN6QixFQUFNLEtBR1QsRUFBVyxFQUFVLFdBQVcsZ0JBQWdCLEVBQVUsV0FBVyxzQkFDekUsRUFBVSxpQkFHTCxJQUFJLElBQ1QsRUFBVSxVQUFZLDBCQUE0QixFQUFXLElBQzdELEVBQU8sTUFDUCxHQU1KLG1CQUFtQixFQUFRLElBQ3JCLEdBQVEsU0FHUixHQUFPLElBQU0sV0FBbUIsRUFBTSxPQUFPLEVBQU8sRUFBRSxRQUN0RCxFQUFPLElBQU0sV0FBbUIsRUFBTSxPQUFPLEVBQU8sRUFBRSxRQUN0RCxFQUFPLElBQU0sV0FBbUIsRUFBTSxPQUFPLEVBQU8sRUFBRSxVQUdsRCxFQUNMLEtBQUssQ0FBQyxFQUFHLElBQ0QsRUFBSSxHQUVaLE9BQU8sQ0FBQyxFQUFNLEVBQU8sSUFDYixFQUFNLFFBQVEsSUFBUyxHQUczQixFQUdULHVCQUF1QixFQUFPLEVBQVEsRUFBYyxNQUM1QyxHQUFZLEVBRVosRUFBYyxNQUVoQixHQUFTLEdBQ1QsRUFBUyxHQUNULEVBQVMsWUFFUCxRQUFRLEFBQUMsR0FBUyxJQUNsQixFQUFPLE1BQVksRUFBTyxFQUFFLE1BQU0sUUFBUSxJQUMxQyxFQUFPLE1BQVksRUFBTyxFQUFFLE1BQU0sUUFBUSxJQUMxQyxFQUFPLE1BQVksRUFBTyxFQUFFLE1BQU0sUUFBUSxJQUcxQyxJQUFXLEdBQUksTUFDWCxHQUFTLEVBQU8sRUFBRSxPQUFPLEtBQ3hCLEtBQUssS0FDRixHQUFLLFNBR1IsS0FBSyxFQUFVLE9BR3BCLElBQVcsR0FBSSxNQUNYLEdBQVMsRUFBTyxFQUFFLE9BQU8sS0FDeEIsS0FBSyxLQUNGLEdBQUssU0FFUixLQUFLLEVBQVUsT0FHcEIsSUFBVyxHQUFJLE1BQ1gsR0FBUyxFQUFPLEVBQUUsT0FBTyxLQUN4QixLQUFLLEtBQ0YsR0FBSyxTQUVSLEtBQUssRUFBVSxNQUluQixFQU1ULHFCQUFxQixFQUFPLFFBQ2pCLEdBQUksRUFBRyxFQUFJLEVBQU0sT0FBTyxPQUFRLElBQUssTUFDdEMsR0FBZSxFQUFNLE9BQU8sRUFBSSxHQUNoQyxFQUFhLEVBQU0sT0FBTyxHQUFLLEVBRS9CLEVBQWUsS0FBSyxJQUFJLE1BRTFCLEdBQWdCLElBQUssTUFDakIsR0FBa0IsRUFBZSxJQUVqQyxFQUFPLEVBQWEsS0FDdEIsR0FBWSxFQUFlLE9BRXpCLEdBQWMsRUFBTSxNQUFNLEVBQUksR0FFOUIsRUFBVyxBQURBLEdBQU0sTUFBTSxHQUFLLEdBQ04sS0FDeEIsR0FBVyxFQUFjLE9BRXZCLEdBQXlCLEdBQ3pCLEVBQTBCLFFBRXpCLEVBQVcsRUFBTSxNQUFNLE1BQ1YsS0FBSyxNQUNYLElBRU8sS0FBSyxNQUNYLElBR1QsTUFBUSxHQUFPLEVBQU0sTUFBTyxFQUFHLEtBQy9CLE9BQVMsR0FBTyxFQUFNLE9BQVEsRUFBRyxNQU0vQyxRQUFpQixDQUNmLFNBQ0EsZ0JBQ0EsWUFDQSxjQUNBLFVBQ0EsYUFBYyxFQUVkLGFBQWMsT0FDTCxNQUFLLFVBQVUsS0FBSyxjQUFnQixHQUc3QyxnQkFBaUIsT0FDUixNQUFLLFVBQVUsS0FBSyxjQUFnQixHQUc3QyxnQkFBaUIsT0FDUixNQUFLLFlBR2QsVUFBVSxFQUFNLE1BQ1QsVUFBVSxLQUFLLFFBQ2YsZUFBaUIsRUFHeEIsVUFBVyxNQUNKLFVBQVUsV0FDVixlQUFpQixFQUd4QixlQUFlLEVBQUssRUFBTSxNQUNuQixZQUFjLE9BQ2QsZ0JBQWtCLEVBR3pCLE1BQU0sRUFBTSxNQUNMLGNBQWdCLE9BRWhCLFNBQVcsR0FBSSxTQUNmLFVBQVksUUFDWixZQUFjLFFBQ2QsZ0JBQWtCLFFBRWpCLEdBQVEsRUFBSyxNQUFNLG9CQUVuQixRQUFRLENBQUMsRUFBTSxJQUFNLE1BQ25CLEdBQWUsRUFBSyxNQUFNLGFBQzFCLEVBQWEsRUFBSyxNQUFNLGdCQUUxQixHQUFnQixjQUVkLEdBQWlCLEVBQUssTUFBTSxRQUFVLEtBQUssY0FBZ0IsZ0JBQWlCLElBQzVFLEVBQWdCLEVBQUssTUFBTSxRQUFVLEtBQUssY0FBZ0IsOEJBQzFELEVBQVcsRUFBSyxNQUFNLGNBQWdCLGNBQWdCLEdBQUssTUFFN0QsT0FDRyxlQUFlLEVBQU0sR0FDakIsT0FDSixrQkFBa0IsRUFBTSxFQUFlLEVBQU0sRUFBRSxJQUMzQyxPQUNKLFdBQ0ksRUFBSyxNQUFNLG1CQUdmLDJCQUEyQixLQUk3QixLQUFLLFNBR2QsZUFBZSxFQUFNLEVBQVUsTUFDdkIsR0FBVyxFQUFTLEdBQUcsT0FBTyxRQUFRLEtBQU0sSUFBSSxRQUFRLEtBQU0sSUFFOUQsRUFBWSxFQUFTLEdBQUcsTUFBTSxLQUFLLElBQUksQUFBQyxHQUNyQyxFQUFLLE9BQU8sUUFBUSxLQUFNLElBQUksUUFBUSxLQUFNLEtBRy9DLEVBQVksQ0FBRSxLQUFNLEdBQ3BCLEVBQVEsS0FBSyxjQUFjLEdBRTNCLEVBQWMsS0FBSyxpQkFHckIsS0FBSyxnQkFBa0IsT0FDcEIsU0FBUyxJQUFJLEVBQVUsR0FLeEIsSUFBWSxJQUVWLElBQWEsYUFDSCxTQUFTLEtBQUssR0FDakIsRUFBWSxHQUFVLEtBQU8sV0FDMUIsR0FBWSxLQUNaLEdBQVUsRUFBWSxHQUFVLElBQU0sRUFBWSxJQUc1RCxFQUFNLEtBQU8sT0FBZ0IsR0FBVSxFQUFNLElBQU0sSUFDOUMsTUFBTyxHQUFNLElBQU8sWUFDakIsR0FBWSxLQUNaLEdBQVUsRUFBTSxJQUFNLEdBQ3pCLElBQWEsaUJBQ2xCLElBQWEsYUFBd0IsR0FBWSxDQUFDLEtBQ3JDLEdBQVksR0FJN0IsTUFBTyxHQUFNLElBQU8sYUFBZSxHQUFLLEVBQU0sSUFDOUMsRUFBTSxPQUFTLE9BQVMsU0FBVyxFQUFNLE1BQ3pDLEVBQU0sT0FBUyxPQUFTLFNBQVcsRUFBTSxXQUV4QyxVQUFVLEdBR2pCLGNBQWMsRUFBTyxJQUNmLEdBQUssRUFBTSxHQUVYLEVBQU0sS0FBTyxPQUNWLFNBQVMsRUFBTSxJQUVoQixNQUFNLE9BQ0gsRUFBTSxRQUlYLEdBQU8sR0FDVCxFQUFPLFNBRUwsR0FBTSxPQUFTLE1BQ1YsRUFBTSxHQUFHLFFBQVEsV0FBWSxNQUM3QixFQUFNLElBR1IsQ0FBRSxLQUFRLE9BQVksUUFHL0Isa0JBQWtCLEVBQU0sRUFBVSxFQUFhLElBQ3pDLEdBQVcsRUFBUyxHQUFHLFFBQVEsS0FBTSxJQUFJLFFBQVEsS0FBTSxJQUFJLE9BQzNELEVBQVksRUFBUyxHQUFHLFFBQVEsS0FBTSxJQUFJLFFBQVEsS0FBTSxJQUFJLE9BSzVELElBQWEsV0FBYSxJQUFjLFFBQzlCLEVBQVksUUFBUSxLQUFNLElBQUksUUFBUSxLQUFNLElBQUksYUFHeEQsR0FBYyxLQUFLLG9CQUdyQixBQUZlLEVBQVksT0FFWixlQUFnQixNQUM1Qix5QkFBeUIsRUFBTSxFQUFVLGFBSzVDLElBQWEsSUFBSyxNQUNkLEdBQVksRUFBVSxNQUFNLEtBQUssTUFBTSxHQUN2QyxFQUFPLFNBQVMsRUFBVSxJQUMxQixFQUFLLFNBQVMsRUFBVSxPQUUxQixHQUFPLEVBQVUsTUFBTSxLQUFLLE1BQU0sS0FFL0IsRUFBSyxJQUFJLEFBQUMsR0FDUixFQUFLLE9BQU8sUUFBUSxLQUFNLE9BR3hCLGdCQUNDLENBQUMsRUFBTSxNQUNaLEVBQVcsR0FFZCxFQUFZLEtBQWMsV0FDaEIsR0FBWSxJQUt4QixJQUFhLFdBQW9CLEdBQUssR0FHdEMsSUFBWSxJQUFlLE1BQU0sUUFBUSxFQUFZLE1BQzNDLEdBQVUsS0FBSyxHQUV2QixJQUFhLE1BQWlCLEdBQVksSUFDN0IsRUFBSSxPQUdsQixlQUFlLEVBQWEsR0FHN0IsSUFBYSxLQUFPLEVBQVUsTUFBTSxNQUFRLFFBQ2xDLEVBQUksR0FBaUIsSUFJckMsMkJBQTJCLEVBQU0sTUFDekIsR0FBYyxLQUFLLG1CQUViLEdBQUssRUFJYixFQUFLLE1BQU0sTUFBUSxRQUNULEVBQUksR0FBaUIsRUFBWSxJQUtqRCx5QkFBeUIsRUFBTSxFQUFVLEVBQVcsTUFLNUMsR0FBUSxFQUFVLE1BQU0sTUFBTSxJQUFJLEFBQUMsR0FDaEMsRUFBSyxPQUFPLFFBQVEsTUFBTyxJQUFJLFFBQVEsS0FBTSxNQUdoRCxFQUFnQixFQUFNLEdBQ3RCLEVBQWlCLEVBQU0sR0FDdkIsRUFBaUIsRUFBTSxHQUN2QixFQUFnQixFQUFNLE1BQ3hCLEdBQWlCLEVBQU0sVUFHbkIsT0FDRCxVQUNBLFdBQ0EsV0FDQSxnQkFDQSxhQUNBLGFBQ0EsZ0JBQ2MsV0FBVyxhQUd6QixZQUNBLGVBQ0EsZUFDQSxzQkFDQSxtQkFDQSxnQkFDYyxHQUFpQixjQUtqQyxjQUFjLEdBQWlCLENBQ2xDLEtBQU0sRUFDTixNQUFPLEVBQ1AsS0FBTSxFQUNOLE1BQU8sUUFHSixlQUFlLEtBQUssY0FBZSxJQUk1QyxRQUFtQixDQUNqQixhQUFjLEVBRWQsTUFBTSxFQUFRLE1BQ04sR0FBUyxHQUFJLElBQWEsS0FDekIsS0FBSyxTQUVOLEdBQVUsRUFBTyxvQkFFZixJQUFJLGtDQUFvQyxRQUUxQyxHQUFXLEdBQUksU0FFZCxDQUFDLEtBQUssYUFBYSxJQUFTLE1BQzNCLEdBQU8sS0FBSyxVQUFVLEVBQVEsR0FDaEMsSUFBUyxRQUFlLElBQUksRUFBSyxLQUFNLFNBR3RDLEdBSVQsYUFBYSxFQUFRLE9BU2YsR0FBTyxPQUFTLElBQU8sS0FDVCxZQUFjLElBQU0sR0FBTSxDQUFDLEtBQVEsRUFBTyxPQUVuRCxFQUFPLFlBQWMsSUFBTSxJQUFNLEVBQU8sT0FLbkQsVUFBVSxFQUFRLEVBQVMsTUFDbkIsR0FBWSxHQUdaLEVBQVksR0FBVyxLQUFPLEVBQU8sWUFBYyxFQUFPLFlBQzFELEVBQWdCLEdBQVcsS0FBTyxFQUFPLFlBQWMsRUFBTyxZQUc1QyxHQUFXLEtBQU8sRUFBTyxZQUFjLEVBQU8saUJBRWhFLEdBQVUsRUFBTyxXQUNqQixFQUFPLEVBQU8sVUFBVSxNQUcxQixJQUFjLFFBQVUsV0FFdEIsR0FBb0IsVUFFakIsR0FBSSxFQUFHLEVBQUksRUFBZSxNQUNwQixLQUFLLEtBQUssY0FBYyxTQUlqQyxHQUFLLEVBQWEsT0FBUyxFQUFJLEVBQWEsR0FBSyxHQUNqRCxFQUFXLEVBQWEsT0FBUyxFQUFJLEVBQWEsR0FBSyxHQUN2RCxFQUFXLEVBQWEsT0FBUyxFQUFJLEVBQWEsR0FBSyxTQUl4RCxlQUFpQixJQUFrQixHQUFLLEVBQU8sY0FBZ0IsRUFFN0QsRUFBWSxFQUFPLGFBQWEsTUFDL0IsR0FBVSxLQUFLLFVBQVUsRUFBUSxHQUVuQyxJQUFZLFdBQVcsYUFBYSxFQUFNLEVBQU0sWUFHakQsYUFBZSxFQUVoQixNQUFPLElBQU8sYUFBZSxHQUFLLEdBQ2xDLElBQWEsT0FBUyxTQUFXLEdBQ2pDLElBQWEsT0FBUyxTQUFXLEdBQ2pDLElBQVMsT0FBUyxLQUFPLEdBRXRCLEVBR1QsYUFBYSxFQUFNLEVBQU0sRUFBUyxJQUU1QixFQUFRLGlCQUFtQixHQUFNLE1BQzdCLEdBQVEsRUFBUSxhQUFhLEdBRS9CLE1BQU0sUUFBUSxNQUNYLEVBQVEsTUFBUSxJQUViLEVBQUksS0FFUCxFQUFRLE1BQVEsVUFFZCxJQUFTLGVBQWlCLEVBQVEsT0FBUyxJQUFLLE1BQ25ELEdBQWEsS0FFWCxhQUFhLFFBQVEsQ0FBQyxFQUFVLElBQU0sQ0FFeEMsSUFBTSxLQUFTLEtBQUssS0FHdEIsRUFBSyxjQUFnQixXQUNsQixZQUFjLE1BR2hCLFlBQVksS0FBSyxXQUNiLEVBQVEsT0FBUyxlQUNiLE9BQU8sS0FBSyxHQUVwQixRQUFRLEFBQUMsR0FBUSxHQUNmLEdBQU8sRUFBUSxhQUViLElBQVMsZ0JBQWtCLEVBQVEsT0FBUyxJQUFLLElBQ3RELEdBQWdCLEVBQVEsYUFBYSxHQUNyQyxFQUFpQixFQUFRLGFBQWEsUUFDcEMsR0FBaUIsRUFBUSxhQUFhLEdBQ3RDLEVBQWdCLEVBQVEsYUFBYSxNQUN2QyxHQUVBLEVBQWMsUUFBUSxVQUFZLE1BQW1CLEVBQWMsUUFBUSxPQUFRLFNBQ25GLEVBQWUsUUFBUSxVQUFZLE1BQW9CLEVBQWUsUUFBUSxPQUFRLFNBR3hGLElBQW1CLFNBQ25CLElBQW1CLFlBQ25CLElBQW1CLFVBQ25CLElBQW1CLFlBQ25CLEVBQWUsUUFBUSxVQUFZLElBRWxCLENBQUMsRUFBUSxhQUFhLEdBQUksRUFBUSxhQUFhLEdBQUksRUFBUSxhQUFhLE1BRXhFLEVBQVEsYUFBYSxLQUluQyxHQUFpQixDQUNwQixLQUFNLEVBQ04sTUFBTyxFQUNQLEtBQU0sRUFDTixNQUFPLE9BRUEsR0FBSyxFQUFRLFFBQVUsT0FDNUIsTUFBTyxHQUFRLElBQU8sWUFDbkIsRUFBUSxNQUFRLEtBQ2hCLEVBQVEsTUFBTSxFQUFRLElBQU0sS0FFNUIsRUFBUSxNQUFRLEVBR25CLEVBQVEsT0FBUyxXQUNkLE9BQU0sUUFBUSxFQUFLLEVBQVEsV0FDekIsRUFBUSxNQUFRLENBQUMsRUFBSyxFQUFRLFVBR2hDLEVBQVEsTUFBTSxLQUFLLElBQ2YsRUFBSyxFQUFRLE1BQU0sRUFBUSxNQUFRLFdBQ3ZDLEVBQVEsTUFBTSxFQUFRLElBQU0sR0FLdkMsY0FBYyxFQUFRLE1BQ2QsR0FBTyxFQUFPLFVBQVUsVUFFdEIsT0FDRCxVQUNJLEdBQU8saUJBRVgsVUFDSSxHQUFPLGlCQUVYLFVBQ0ksR0FBTyxpQkFFWCxVQUNJLEdBQU8sZUFFWCxVQUNJLEdBQU8sZUFFWCxTQUNHLEdBQVMsRUFBTyxrQkFDZixHQUFPLGVBQWUsT0FFMUIsU0FDRyxHQUFVLEVBQU8sa0JBQ2hCLEdBQU8sVUFBVSxPQUVyQixVQUNJLEdBQU8sZUFFWCxRQUNBLFFBQ0EsUUFDQSxRQUNBLFFBQ0EsU0FDRyxHQUFjLEVBQU8sWUFDckIsRUFBVyxFQUFPLFlBQ2xCLEVBQW1CLEVBQU8sZUFFNUIsSUFBYSxTQUNQLE9BQ0QsUUFDQSxVQUNJLEdBQU8sZ0JBQWdCLE9BRTNCLFVBQ0ksR0FBTyxnQkFBZ0IsT0FFM0IsVUFDSSxHQUFPLGdCQUFnQixPQUUzQixVQUNJLEdBQU8sY0FBYyxPQUV6QixVQUNJLEdBQU8sY0FBYyxHQUk5QixNQUFPLEtBQVMscUJBQ1YsTUFDTixvSEFJRSxHQUFVLEdBQUlJLElBQWEsR0FBSSxZQUFXLEVBQU8sZUFBZSxLQUNoRSxFQUFVLEdBQUksSUFBYSxFQUFRLGFBQWEsZUFFOUMsT0FDRCxRQUNBLFVBQ0ksR0FBUSxnQkFBZ0IsT0FFNUIsVUFDSSxHQUFRLGdCQUFnQixPQUU1QixVQUNJLEdBQVEsZ0JBQWdCLE9BRTVCLFVBQ0ksR0FBUSxjQUFjLE9BRTFCLFVBQ0ksR0FBUSxjQUFjLGdCQUkzQixJQUFJLE9BQU0sb0NBQXNDLEtBSzlELFFBQW1CLENBQ2pCLGFBQ0EsT0FDQSxHQUNBLFlBQVksRUFBUSxFQUFlLE1BQzVCLEdBQUssR0FBSSxVQUFTLFFBQ2xCLE9BQVMsT0FDVCxhQUFlLElBQWlCLE9BQVksRUFBZSxHQUdsRSxXQUFZLE9BQ0gsTUFBSyxPQUdkLE1BQU8sT0FDRSxNQUFLLEdBQUcsT0FBTyxXQUd4QixLQUFLLEVBQVEsTUFDTixRQUFVLEVBTWpCLFlBQWEsYUFDRSxXQUFhLElBQU8sRUFHbkMsZ0JBQWdCLEVBQU0sTUFDZCxHQUFTLFVBRU4sR0FBSSxFQUFHLEVBQUksRUFBTSxNQUN0QixLQUFLLEtBQUssb0JBR1AsR0FHVCxVQUFXLE1BQ0gsR0FBUSxLQUFLLEdBQUcsU0FBUyxLQUFLLG9CQUMvQixRQUFVLEVBQ1IsRUFHVCxVQUFXLE1BQ0gsR0FBUSxLQUFLLEdBQUcsU0FBUyxLQUFLLE9BQVEsS0FBSywwQkFDNUMsUUFBVSxFQUNSLEVBR1QsVUFBVyxNQUNILEdBQVEsS0FBSyxHQUFHLFNBQVMsS0FBSyxPQUFRLEtBQUssMEJBQzVDLFFBQVUsRUFDUixFQUdULGNBQWMsRUFBTSxNQUNaLEdBQVMsVUFFTixHQUFJLEVBQUcsRUFBSSxFQUFNLE1BQ3RCLEtBQUssS0FBSyxrQkFHUCxHQUdULFdBQVksTUFDSixHQUFRLEtBQUssR0FBRyxVQUFVLEtBQUssT0FBUSxLQUFLLDBCQUM3QyxRQUFVLEVBQ1IsRUFRVCxVQUFXLElBQ0wsR0FBSyxRQUVMLE1BQUssZ0JBQ0QsS0FBSyxjQUNKLEtBQUssZ0JBRUwsS0FBSyxjQUNOLEtBQUssYUFJVCxFQUFPLGNBQ0YsQ0FBQyxFQUFPLGFBQ1QsQ0FBQyxFQUFNLFdBRVQsSUFBUSxlQUFvQixFQUFPLEVBQUssY0FFckMsRUFBTSxFQUFLLFdBRVgsSUFBUyxXQUFjLElBR3pCLEVBQU8sV0FBYyxFQUc5QixjQUFjLEVBQU0sTUFDWixHQUFTLFVBRU4sR0FBSSxFQUFHLEVBQUksRUFBTSxNQUN0QixLQUFLLEtBQUssa0JBR1AsR0FJVCxXQUFZLElBQ04sR0FBSyxRQUVMLE1BQUssZ0JBQ0QsS0FBSyxjQUNKLEtBQUssZ0JBRUwsS0FBSyxjQUNOLEtBQUssYUFHTixFQUFPLFdBQWMsRUFHOUIsWUFBYSxNQUNMLEdBQVEsS0FBSyxHQUFHLFdBQVcsS0FBSyxPQUFRLEtBQUssMEJBQzlDLFFBQVUsRUFDUixFQUdULGdCQUFnQixFQUFNLE1BQ2QsR0FBUyxVQUVOLEdBQUksRUFBRyxFQUFJLEVBQU0sTUFDdEIsS0FBSyxLQUFLLG9CQUdQLEdBR1QsWUFBYSxNQUNMLEdBQVEsS0FBSyxHQUFHLFdBQVcsS0FBSyxPQUFRLEtBQUssMEJBQzlDLFFBQVUsRUFDUixFQUdULGdCQUFnQixFQUFNLE1BQ2QsR0FBUyxVQUVOLEdBQUksRUFBRyxFQUFJLEVBQU0sTUFDdEIsS0FBSyxLQUFLLG9CQUdQLEdBR1QsZUFBZSxFQUFNLE1BQ2IsR0FBUSxLQUFLLEdBQUcsT0FBTyxNQUFNLEtBQUssT0FBUSxLQUFLLE9BQVMsZUFDekQsUUFBVSxFQUNSLEVBR1QsVUFBVSxFQUFNLElBRVYsR0FBUyxVQUVKLEdBQUksRUFBRyxFQUFJLEVBQU0sTUFDdEIsR0FBSyxLQUFLLGdCQUdSLEdBQVcsRUFBRSxRQUFRLFNBQ3ZCLElBQVksTUFBTyxFQUFFLE1BQU0sRUFBRyxJQUUzQixHQUFZLFdBQVcsR0FBSSxZQUFXLEtBSWpELFFBQWMsQ0FDWixhQUFjLEVBRWQsSUFBSSxFQUFLLEVBQUssTUFDUCxHQUFPLEdBSWhCLFlBQTJCLEVBQVEsTUFDM0IsR0FBVSwrQkFFVCxHQUFPLFlBQWMsRUFBUSxRQUFVLElBQVksR0FBMkIsRUFBUSxFQUFHLEVBQVEsUUFHMUcsWUFBMEIsRUFBTSxNQUN4QixHQUFVLENBQ2QsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxLQUNBLElBQ0EsSUFDQSxJQUNBLEtBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsS0FDQSxTQUdFLEdBQVMsYUFFQyxFQUFRLE1BQ2QsR0FBUyxFQUFLLEVBQVMsWUFDdEIsRUFBSyxNQUFNLEVBQVMsT0FFcEIsU0FHQSxHQUFJLEVBQUcsRUFBSSxFQUFRLE9BQVEsRUFBRSxLQUVoQyxBQURRLEVBQUssS0FDTCxFQUFRLFNBQ1gsU0FJSixHQUdULFlBQXVCLEVBQU0sTUFDckIsR0FBZ0Isb0JBQ2hCLEVBQVEsRUFBSyxNQUFNLE1BQ3JCLFFBQ2MsVUFBUyxFQUFNLFNBRzNCLElBQUksT0FBTSxpRUFJbEIsWUFBaUMsRUFBTSxPQUM5QixHQUFPLFdBR2hCLEtBQU0sSUFBWSxHQUdsQixZQUFpQixFQUFvQixFQUFjLEVBQWEsRUFBWSxJQUN0RSxVQUVJLEVBQVcsaUJBQ1osb0JBQ0ssWUFFTCxjQUNLLFlBRUwsY0FDSyxZQUVMLFlBQ0ssRUFBVyxRQUFRLHlCQUduQixLQUFLLDZDQUErQyxFQUFXLGFBR3ZFLEVBQVcsZ0JBQWtCLG9CQUF5QixFQUFXLFFBQVEsU0FFdkUsR0FBTyxFQUFRLEVBQVcsU0FDMUIsRUFBSyxFQUFPLEVBQVcsZUFFdEIsSUFBTSxHQUFXLEVBQVcsT0FBUSxFQUFNLEdBR25ELEtBQU0sSUFBWSxHQUFJLElBQ2hCLEdBQVUsR0FBSSxHQUtwQixZQUEyQixFQUFlLE1BQ2xDLEdBQWdCLEdBQUksR0FDcEIsRUFBZ0IsR0FBSSxHQUNwQixFQUFhLEdBQUksR0FDakIsRUFBaUIsR0FBSSxHQUVyQixFQUFZLEdBQUksR0FDaEIsRUFBaUIsR0FBSSxHQUNyQixFQUFrQixHQUFJLEdBQ3RCLEVBQW1CLEdBQUksR0FDdkIsRUFBa0IsR0FBSSxNQUV4QixHQUFZLEdBQUksUUFDZCxHQUFXLEdBQUksR0FFZixFQUFjLEVBQWMsWUFBYyxFQUFjLFlBQWMsS0FFeEUsRUFBYyxlQUEyQixZQUFZLEdBQVEsVUFBVSxFQUFjLGNBRXJGLEVBQWMsWUFBYSxNQUN2QixHQUFRLEVBQWMsWUFBWSxJQUFJLEdBQVUsWUFDaEQsS0FBSyxFQUFjLGNBQ1gsc0JBQXNCLEdBQVUsVUFBVSxPQUd0RCxFQUFjLFNBQVUsTUFDcEIsR0FBUSxFQUFjLFNBQVMsSUFBSSxHQUFVLFlBQzdDLEtBQUssRUFBYyxjQUNkLHNCQUFzQixHQUFVLFVBQVUsT0FHbkQsRUFBYyxhQUFjLE1BQ3hCLEdBQVEsRUFBYyxhQUFhLElBQUksR0FBVSxZQUNqRCxLQUFLLEVBQWMsY0FDVixzQkFBc0IsR0FBVSxVQUFVLElBR3ZELEVBQWMsU0FBaUIsTUFBTSxHQUFRLFVBQVUsRUFBYyxRQUdyRSxFQUFjLGlCQUErQixZQUFZLEdBQVEsVUFBVSxFQUFjLGdCQUN6RixFQUFjLGdCQUE2QixZQUFZLEdBQVEsVUFBVSxFQUFjLGVBQ3ZGLEVBQWMsa0JBQWlDLFlBQVksR0FBUSxVQUFVLEVBQWMsaUJBQzNGLEVBQWMsaUJBQStCLFlBQVksR0FBUSxVQUFVLEVBQWMsZ0JBR3pGLEVBQWMsc0JBQStCLEVBQWMsd0JBR3pELEdBQU8sRUFBYyxTQUFTLEdBQVksU0FBUyxHQUNuRCxFQUFhLEdBQUksS0FDYixnQkFBZ0IsUUFHcEIsR0FBWSxHQUFJLEtBQ1osYUFBYSxRQUNqQixHQUFjLEVBQVUsU0FBUyxTQUFTLEdBQzFDLEVBQWEsRUFBVyxTQUFTLFNBQVMsR0FDMUMsRUFBTyxLQUVULE1BQ0EsSUFBZ0IsSUFDTixFQUFXLFNBQVMsR0FBTSxTQUFTLEdBQVksU0FBUyxXQUMzRCxJQUFnQixJQUNiLEVBQVcsU0FBUyxHQUFZLFNBQVMsR0FBTSxTQUFTLE9BQy9ELE1BQ0MsR0FBYSxHQUFJLEtBQVUsS0FBSyxHQUVoQyxFQUFxQixFQUFXLFNBQVMsRUFBVyxZQUU5QyxFQUFXLFNBQVMsR0FBTSxTQUFTLEdBQW9CLFNBQVMsTUFJMUUsR0FBYSxFQUNkLFNBQVMsR0FDVCxTQUFTLEdBQ1QsU0FBUyxHQUNULFNBQVMsR0FDVCxTQUFTLEdBQ1QsU0FBUyxFQUFnQixVQUN6QixTQUFTLEdBQ1QsU0FBUyxHQUNULFNBQVMsR0FDVCxTQUFTLEVBQWUsZUFFckIsR0FBbUMsR0FBSSxLQUFVLGFBQWEsR0FFOUQsRUFBcUIsRUFBVSxTQUFTLFlBQ3JDLGFBQWEsS0FFVCxFQUFTLFNBQVMsR0FFeEIsRUFLVCxZQUF1QixFQUFPLEdBQ3BCLEdBQVMsT0FFWCxHQUFRLENBQ1osTUFDQSxNQUNBLE1BQ0EsTUFDQSxNQUNBLGFBSUUsS0FBVSxXQUNKLEtBQUssaUdBQ04sRUFBTSxJQUdSLEVBQU0sR0FLZixZQUEwQixFQUFPLE9BQ2pCLEdBQU0sTUFBTSxLQUFLLElBQUksQUFBQyxHQUMzQixXQUFXLElBTXRCLFlBQW9DLEVBQVEsRUFBTyxFQUFLLE9BQ2xELEtBQVMsV0FBa0IsR0FDM0IsSUFBTyxXQUFnQixFQUFPLFlBRTNCLEdBQVksV0FBVyxHQUFJLFlBQVcsRUFBUSxFQUFNLElBRzdELFlBQWdCLEVBQUcsRUFBRyxRQUNYLEdBQUksRUFBRyxFQUFJLEVBQUUsT0FBUSxFQUFJLEVBQUUsT0FBUSxFQUFJLEVBQUcsSUFBSyxNQUNwRCxHQUFLLEVBQUUsR0FJYixZQUFlLEVBQUcsRUFBRyxFQUFNLEVBQUksUUFDcEIsR0FBSSxFQUFNLEVBQUksRUFBRyxFQUFJLEVBQUksSUFBSyxNQUNuQyxHQUFLLEVBQUUsU0FHSixHQUlULFlBQWdCLEVBQUksRUFBTyxFQUFJLE9BQ3RCLEdBQUcsTUFBTSxFQUFHLEdBQU8sT0FBTyxHQUFJLE9BQU8sRUFBRyxNQUFNLE9DdnNHM0MsSUFBTCxVQUFLLEVBQUwsK1RBQUssZ0JDQUEsSUFBTCxVQUFLLEVBQUwsNEpBQUssYUNEWixLQUFNLElBQWEsR0FBSSxRQUFPLDhCQUNqQixHQUFpQixBQUFDLEdBQ3RCLEdBQVcsS0FBSyxHQ0ZaLEdBQXdCLENBQ25DLElBQUssRUFDTCxJQUFLLEdBQ0wsSUFBSyxJQUdNLEdBQWMsR0FBSSxRQUFPLG1CQ0l6QixHQUFvQixDQUFDLEVBQVksSUFBdUMsTUFDN0UsR0FBb0IsR0FBSSxPQUN4QixTQUFTLEFBQUMsR0FBVSxJQUNwQixFQUFDLEVBQU0sV0FFUCxNQUFPLEdBQU8sZUFBa0IsZ0JBQW1CLGNBQWdCLEVBQU8sZUFDMUUsTUFBTyxHQUFPLFlBQWUsZ0JBQW1CLFdBQWEsRUFBTyxZQUVwRSxFQUFrQixJQUFJLEVBQU0sWUFDeEIsU0FBVyxFQUFrQixJQUFJLEVBQU0sa0JBRXpDLEVBQU0sVUFBVSxVQUFVLGdCQUFnQix3QkFBeUIsTUFDL0QsR0FBYyxHQUFJLElBQXFCLE1BQ2pDLFVBQVUsRUFBTSxZQUNoQixVQUFZLEVBQU0sU0FBUyxTQUFTLGVBQWUsd0JBQXdCLGtCQUMzRSxtQkFDVixFQUFNLFNBQVMsU0FBUyxlQUFlLHdCQUF3QiwyQkFDckQsUUFBVSxDQUFFLFNBQVUsR0FBSSxTQUFVLE1BRTlCLElBQUksRUFBTSxTQUFVLEtBQ2hDLFNBQVcsUUFJTCxXQUVQLEdBRVAsRUFBTSxTQUFTLFVBQ1gsU0FBUyxRQUFRLEFBQUMsR0FBVSxHQUFXLEtBU3BDLEdBQWEsQUFBQyxHQUE4QixJQUVuRCxDQURnQixDQUFDLENBQUMsRUFBTSxVQUFVLEtBQUssQUFBQyxHQUFNLE9BQU8sRUFBRSxNQUFNLE1BQU0sV0FFOUQsUUFHSCxHQUFPLEdBQUksY0FDWCxTQUFTLFFBQVEsQUFBQyxHQUFVLE1BQzFCLEdBQWEsRUFBTSxLQUFLLE1BQU0sT0FDaEMsQ0FBQyxjQUdDLENBQUMsRUFBRyxFQUFNLEdBQW1CLEVBQy9CLENBQUMsR0FBUSxDQUFDLEdBSVQsR0FBSyxJQUFJLE1BQ1AsSUFBSSxFQUFNLE1BR1osSUFBSSxJQUFPLEtBQUssQ0FBRSxPQUFRLEVBQU8sZUFHbkMsUUFBUSxDQUFDLEVBQU8sSUFBUSxNQUNyQixHQUFNLEdBQUksTUFDWixLQUFPLElBQ0wsR0FBRyxPQUFPLFFBQVEsSUFBSSxLQUV0QixRQUFRLENBQUMsQ0FBRSxRQUFPLFlBQWEsR0FDL0IsU0FBUyxFQUFRLEdBQVksY0FBYyxRQUk1QyxHQVFJLEdBQWUsQUFBQyxHQUN2QixrQkFBa0IsS0FBSyxHQUF1QixHQUFVLEtBQ25ELGFBQWEsS0FBSyxHQUF1QixHQUFVLElBQ25ELGFBQWEsS0FBSyxHQUF1QixHQUFVLElBQ25ELGFBQWEsS0FBSyxHQUF1QixHQUFVLElBQ25ELG1CQUFtQixLQUFLLEdBQXVCLEdBQVUsS0FDM0QsS0FRSSxHQUFnQixBQUFDLEdBQ3hCLDhCQUE4QixLQUFLLEdBQzlCLEdBQVcsTUFDVCxrQkFBa0IsS0FBSyxHQUN6QixHQUFXLE1BRVgsS0FJTCxHQUFZLEdBQUksR0FDaEIsR0FBZ0IsR0FBSSxJQUNwQixHQUFhLEdBQUlKLElBRWpCLEdBQVksQUFBQyxHQUF5QixRQUNsQyxPQUNELElBQVUsU0FDVixJQUFVLFVBQ05LLFVBQ0osSUFBVSxVQUNOLFFBQ0osSUFBVSxRQUNWLElBQVUsV0FDTixrQkFFQSxNQVdQLEdBQU8sQ0FDWCxFQUNBLEVBQVMsQUFBQyxHQUFrQixHQUM1QixFQUFhLEFBQUMsR0FBMkIsR0FDekMsRUFBVSxBQUFDLEdBQThCLEtBQ3RDLElBQ0MsQ0FBQyxFQUFPLElBQUssR0FDUCxHQUFJLE9BQU0sNkJBR2QsR0FBTSxHQUFlLEVBQU8sS0FBTyxFQUFPLElBQU0sR0FBTyxXQUFhLEVBQU8sSUFFN0UsR0FBWSxNQUFNLElBQUksTUFDakIsR0FBWSxNQUFNLElBQUksU0FHekIsR0FBWSxHQUFhLEdBQ3pCLEVBQWEsR0FBYyxHQUVsQixHQUFVLEdBRWxCLEtBQ0wsRUFDQSxBQUFDLEdBQVUsQ0FDTCxLQUFjLEdBQVUsTUFBUSxJQUFjLEdBQVUsU0FDM0MsR0FHYixJQUFlLEdBQVcsVUFDVixFQUFNLE1BQU8sTUFHckIsTUFBTSxJQUFJLEVBQUssS0FFcEIsSUFFVCxFQUNBLFlBSXFCLE9BQ2hCLE9BQVEsR0FBSSxXQUNaLFNBQVUsR0FBSSxXQUNkLGVBQWdCLEdBRXZCLFVBQ0EsV0FDQSxhQUVPLE1BQ0wsRUFDQSxFQUFTLEFBQUMsR0FBa0IsR0FDNUIsRUFBYSxBQUFDLEdBQTJCLEdBQ3pDLEVBQVUsQUFBQyxHQUE4QixHQUN6QyxJQUNLLEVBQVEsRUFBUSxFQUFZLGVBR3RCLFdBQVUsRUFBOEIsT0FDNUMsSUFBSSxTQUFhLENBQUMsRUFBUyxJQUFXLElBQ3RDLEVBQVEsRUFBUyxJQUFNLEdBQUksV0FLN0IsY0FBYSxFQUFhLE9BQ3hCLElBQVksTUFBTSxJQUFJLEdBQWUsR0FBTyxFQUFNLEdBQU8sV0FBYSxpQkM3TXRELElBQ3JCLEdBQWUsR0FBTyxtQkFDckIsT0FFWSxHQUFPLGNBRWpCLE9DSkksSUFBZSxHQUFJLEtBR25CLEdBQXdCLENBQ25DLEVBQ0EsSUFDRyxNQUNHLEdBQVlDLEdBQXVCLEdBQ25DLEVBQWUsR0FBSSxXQUdyQixXQUNLLGVBQWUsRUFBVyxVQUFXLENBQzFDLE1BQU8sV0FHSixlQUFlLEVBQVcsT0FBUSxDQUN2QyxNQUFPLFdBRUYsZUFBZSxFQUFXLFFBQVMsQ0FDeEMsTUFBTyxFQUNQLFdBQVksWUFFUCxlQUFlLEVBQVcsTUFBTyxDQUN0QyxNQUFPLFNBQVUsRUFBYSxPQUVyQixHQUFhLElBQUksYUFHckIsZUFBZSxFQUFXLE1BQU8sQ0FDdEMsTUFBTyxTQUFVLEVBQWEsRUFBWSxPQUNwQyxXQUNLLGlCQUNMLEVBQ0EsT0FBTyxLQUFLLEdBQVEsT0FBTyxDQUFDLEVBQUcsT0FDM0IsR0FBSyxDQUNMLEtBQU0sT0FDRyxHQUFVLEdBQUcsSUFFdEIsSUFBSSxFQUFLLEdBQ0csR0FBRyxHQUFPLElBR2pCLEdBQ04sS0FJQSxFQUFhLElBQUksRUFBSyxhQUcxQixlQUFlLEVBQVcsU0FBVSxDQUN6QyxNQUFPLFNBQVUsRUFBYSxPQUVyQixHQUFhLE9BQU8sU0FJbEIsSUFBSSxFQUFNLEdBRWhCLEdBd0JJLEdBQWUsQ0FDMUIsRUFDQSxJQUdvQixJQUNoQixNQUFPLElBQVcsaUJBQ2QsSUFBSSxPQUFNLDZDQUVYLEdBQVUsSUFBSSxJQUlWLEdBQWUsQ0FDMUIsRUFDQSxFQUNBLEVBQ0EsRUFBUSxPQUNMLElBQ0MsTUFBTyxJQUFXLGlCQUNkLElBQUksT0FBTSw2Q0FFRSxFQUFPLEVBQVcsR0FDakMsRUFBa0IsaUJBQ1YsQ0FBQyxJQUFRLFFBQU8sUUFBUyxFQUFrQixXQUMxQyxHQUFLLEdBQVUsRUFBSyxZQUc1QixtQkFBbUIsSUFBSSxJQUFTLE9BQU8sS0FDbkMsSUFBSSxFQUFRLEdBQ2YsRUFBVSxJQUFJLElBR1YsR0FBZSxDQUMxQixFQUNBLEVBQ0EsRUFBUSxPQUNMLElBQ0MsTUFBTyxJQUFXLGlCQUNkLElBQUksT0FBTSw2Q0FHWEMsSUFBb0IsRUFBTyxFQUFXLElBR2xDLEdBQWtCLENBQzdCLEVBQ0EsRUFDQSxFQUFRLE9BQ0wsSUFDQyxNQUFPLElBQVcsWUFBYSxTQUN6QixLQUFLLHNEQUdULEdBQWUsRUFBVSxJQUFJLEdBQzdCLEVBQVUsRUFBTSxtQkFBbUIsSUFBSSxJQUFXLEdBQUksY0FDdEQsbUJBQW1CLElBQUksRUFBUSxFQUFRLElBQUksT0FDMUIsRUFBTyxFQUFXLEdBQ2xDLEdBc0JJLEdBQXNCLENBQUMsRUFBZ0IsRUFBUSxPQUFlLFVBQzlELEtBQWFDLElBQTJCLEVBQU8sTUFDeEMsRUFBUSxFQUF3QyxnQkFJeEMsRUFBeUQsTUFDN0UsR0FBUUMsR0FBbUIsR0FDM0JDLEVBQWFDLEdBQWtCLEdBQy9CQyxFQUFZQyxHQUFpQixHQUM3QixFQUFlLENBQUMsRUFBUSxPQUFlLEVBQU0sWUFDdEMsTUFBUSxDQUFDLEVBQVEsT0FBZUgsRUFBVyxLQUMzQyxLQUFPLENBQUMsRUFBUSxPQUFlRSxFQUFVLEdBQy9DLFVDL0txQixPQUNyQixVQUE2QixHQUFJLElBRXhDLFlBQ0EsY0FDQSxpQkFFQSxxQkFBcUIsRUFBc0IsTUFDbkMsR0FBWSxLQUFLLFlBQVksS0FBSyxBQUFDLEdBQU0sRUFBRSxPQUFTLFNBQ25ELEdBQVksRUFBVSxTQUFXLEVBRzFDLGVBQTBDLE9BQ2pDLElBQUksU0FBUSxBQUFDLEdBQVksQ0FDMUIsS0FBSyxlQUNDLEtBQUssYUFFVixNQUNLLFNBRUUsS0FDVixHQUFPLFdBQWEsaUNBQ3BCLEFBQUMsR0FBUyxHQUNILE1BQU0sU0FBUyxBQUFDLEdBQVUsQ0FDekIsRUFBTSxPQUFTLGVBQWlCLENBQUMsS0FBSyx3QkFDbkMsaUJBQW1CLEtBSXZCLEtBQUssd0JBRUgsaUJBQW1CLFdBR3JCLFlBQWMsRUFBSyxnQkFDbkIsYUFBYSxRQUFRLEFBQUMsR0FBUyxHQUU3QixPQUFTLEVBQUssT0FBTyxPQUFPLEFBQUMsR0FBVSxDQUFDLEVBQU0sS0FBSyxNQUFNLGtCQUV4RCxLQUFLLGNBRWYsUUFBUSxJQUNSLFFBQVEsU0FJZCxpQkFBa0MsT0FDekIsSUFBSSxTQUFRLEFBQUMsR0FBWSxDQUMxQixLQUFLLGlCQUNDLEtBQUssZUFFVixNQUNLLEdBQUksVUFFRixLQUNWLEdBQU8sV0FBYSw2QkFDcEIsQUFBQyxHQUFTLE1BQ0gsY0FBZ0IsRUFBSyxXQUNyQixjQUFjLFNBQVMsQUFBQyxHQUFjLENBQ3JDLEVBQUksVUFDSixHQUFJLFNBQXNCLFlBQWMsR0FDeEMsRUFBSSxTQUFzQixRQUFVLFFBR2xDLEtBQUssZ0JBRWYsUUFBUSxJQUNSLFFBQVEsZUNoRUgsSUFBcUIsR0FBOEMsc0JDUW5FLEdBQWtCLEdBQTJDLG1CQ2tCMUUsUUFBb0IsT0FDWCxVQUFTLEVBQVEsRUFBUSxFQUFrQixDQUMzQyxNQUNPLENBQ1IsZUFBZ0IsR0FDaEIsaUJBQWtCLEdBQ2xCLG9CQUFxQixHQUNyQixnQkFBaUIsR0FDakIsSUFBSyxNQUNMLE1BQU8sVUFFTCxHQUFNLEdBQUksR0FDZCxFQUFPLEdBQUksR0FDWCxFQUFRLEdBQUksR0FDWixFQUFpQixHQUFJLEdBQ3JCLEVBQWlCLEdBQUksR0FDckIsRUFBZSxHQUFJLEtBRWIsZUFBaUIsRUFBUSxpQkFBbUIsT0FBWSxFQUFRLGVBQWlCLEtBQ2pGLGlCQUFtQixFQUFRLG1CQUFxQixPQUFZLEVBQVEsaUJBQW1CLEtBQ3ZGLG9CQUFzQixFQUFRLHNCQUF3QixPQUFZLEVBQVEsb0JBQXNCLEtBQ2hHLGdCQUFrQixFQUFRLGtCQUFvQixPQUFZLEVBQVEsZ0JBQWtCLEtBQ3BGLElBQU0sRUFBUSxNQUFRLE9BQVksRUFBUSxJQUFNLFFBQ2hELE1BQVEsRUFBUSxPQUFTLFFBRTNCLEdBQWMsRUFBTyxXQUFhLEVBQU8sU0FBUyxNQUFRLEtBQUssU0FBUyxHQUM1RSxFQUFRLEVBQU8sV0FBYSxFQUFPLFNBQVMsTUFBUSxLQUFLLFNBQVMsTUFFaEUsR0FBVyxFQUFNLEVBQU0sRUFBUSxLQUkvQixFQUFPLGFBQ0YsU0FBUyxVQUVSLGdCQUFrQixLQUNsQixlQUFpQixJQUd2QixFQUFRLGlCQUFrQixHQUNaLFVBRVAsR0FBSSxFQUFHLEVBQUksRUFBTSxPQUFRLE1BQ2xCLEtBQUssRUFBTSxHQUFHLFNBQVMsWUFJckMsRUFBUSxlQUFnQixHQUduQixzQkFFQSxZQUFZLGtCQUlWLEdBQUksRUFBRyxFQUFJLEVBQU8sU0FBUyxPQUFRLEVBQUUsSUFDckMsU0FBUyxHQUFHLGtCQUFrQixPQUlyQyxFQUFRLFFBQVMsR0FDUCxVQUVILEdBQUksRUFBRyxFQUFJLEVBQU0sT0FBUSxFQUFFLElBQzNCLEVBQU0sS0FDTixFQUFRLE1BQU0sRUFBSyxPQUFTLEVBQUssS0FFcEMsRUFBUSxTQUFXLEVBQVEsUUFBUSxPQUNoQyxPQUFPLFNBQVMsRUFBUSxRQUFRLE1BRWhDLE9BQU8sVUFBVSxFQUFLLFNBQVUsRUFBSyxXQUFZLEVBQUssU0FFdEQsdUJBR0csS0FBSyxFQUFLLFlBQVksZ0JBSTNCLEdBQUksRUFBRyxFQUFJLEVBQU0sT0FBUSxFQUFFLEVBQUcsTUFDOUIsRUFBTSxLQUNOLEVBQVEsTUFBTSxFQUFLLE9BQVMsRUFBSyxPQUUvQixLQUFLLGNBQWMsRUFBTSxLQUVyQixLQUFLLEVBQUssYUFFbkIsRUFBUSxNQUNILG9CQUVILEVBQVEsa0JBQ0ssS0FBSyxFQUFPLGdCQUVaLEtBQUssRUFBTyxhQUFhLFdBQ3pCLFNBQVMsRUFBTyxnQkFLM0IsbUJBQW1CLEtBQ1YsTUFBTSxFQUFNLElBQUksRUFBSSxFQUFNLEVBQUcsRUFBSSxFQUFNLEVBQUcsRUFBSSxFQUFNLE1BSXRELDJCQUEyQixFQUFLLHNCQUFzQixJQUUvRCxFQUFPLFdBQVksTUFDZixHQUFZLEVBQU0sUUFBUSxHQUM5QixFQUFjLEVBQ1YsRUFBVSxHQUNWLEVBQWUsS0FBSyxFQUFPLFNBQVMsYUFBYSxJQUFZLFdBRXRELFNBQVMsS0FHWCxhQUFhLEdBR3hCLEVBQUssUUFBVSxFQUFLLE9BQU8sVUFDeEIsT0FBTyxLQUFLLEVBQUssT0FBTyxhQUFhLFdBQ3JDLE9BQU8sU0FBUyxNQUVoQixPQUFPLEtBQUssR0FHZixFQUFRLHFCQUF1QixJQUFTLEVBQVEsT0FDN0MsT0FBTyxZQUFZLEVBQUksSUFBSSxFQUFHLEVBQUssU0FBUyxFQUFHLE1BR2pELE9BQU8sVUFBVSxFQUFLLFNBQVUsRUFBSyxXQUFZLEVBQUssU0FFdEQsdUJBR0gsRUFBUSx3QkFDRCxHQUFJLEVBQUcsRUFBSSxFQUFNLE9BQVEsRUFBRSxJQUMzQixFQUFNLEtBQ04sRUFBUSxNQUFNLEVBQUssT0FBUyxFQUFLLEtBRXBDLElBQVMsRUFBUSxPQUNkLFNBQVMsS0FBSyxFQUFjLElBS25DLEVBQVEsa0JBR0gsa0JBQWtCLFVBSXRCLGNBQWEsRUFBUSxFQUFRLEVBQU0sRUFBMkIsR0FBSSxHQUMvRCxzQkFBd0IsRUFBUSx3QkFBMEIsT0FBWSxFQUFRLHNCQUF3QixLQUN0RyxJQUFNLEVBQVEsTUFBUSxPQUFZLEVBQVEsSUFBTSxLQUNoRCxNQUFRLEVBQVEsT0FBUyxHQUU1QixFQUFPLGVBQ0QsS0FBSyxzQkFBc0IsU0FHaEMsR0FBWSxLQUFLLE1BQU0sRUFBSyxZQUFvQixJQUFNLEtBQVEsS0FDbEUsRUFBUSxFQUFJLEVBQVEsSUFDcEIsRUFBcUUsR0FDckUsRUFBUSxHQUFJLElBQWUsR0FDM0IsRUFBUSxLQUFLLFNBQVMsRUFBTyxVQUM3QixFQUFZLE1BQ1YsR0FBZ0IsRUFBTSxFQUFRLEVBQVUsSUFFdEMsV0FBVyxHQUFNLFNBQ2pCLE9BQU8sS0FFTiwyQkFFRSxHQUFJLEVBQUcsRUFBSSxFQUFXLEVBQUUsRUFBRyxNQUM1QixHQUFPLEVBQUksT0FFWixTQUFTLEVBQVEsRUFBUSxVQUVyQixHQUFJLEVBQUcsRUFBSSxFQUFNLE9BQVEsRUFBRSxJQUMzQixFQUFRLE1BQU0sRUFBTSxHQUFHLE9BQVMsRUFBTSxHQUFHLE9BRXZDLEtBQUssY0FBYyxFQUFNLEVBQU8sVUFFckMsTUFDSyxFQUFNLEtBQ0YsRUFBVSxHQUFLLEVBQVUsSUFBTSxDQUFFLFFBRXhDLEVBQVEsTUFBUSxHQUNiLEdBQVMsUUFDSCxJQUFNLENBQ2IsTUFBTyxHQUFJLGNBQWEsR0FDeEIsT0FBUSxHQUFJLGNBQWEsRUFBWSxLQUlyQyxFQUFRLHVCQUNOLEtBQU0sTUFDUyxFQUFLLFNBQVMsV0FHNUIsU0FBUyxJQUFJLE1BR1gsSUFBSSxNQUFNLEdBQUssSUFFbkIsU0FBUyxRQUFRLEVBQVMsSUFBSSxPQUFRLEVBQUksSUFHNUMsRUFBUyxTQUNILEtBQU8sQ0FDZCxNQUFPLEdBQUksY0FBYSxHQUN4QixPQUFRLEdBQUksY0FBYSxFQUFZLE9BSWhDLEtBQUssTUFBTSxHQUFLLElBRXBCLFdBQVcsUUFBUSxFQUFTLEtBQUssT0FBUSxFQUFJLE1BSWhELE9BQU8sS0FFTiwyQkFHQSxHQUFJLEVBQUcsRUFBSSxFQUFVLE9BQVEsRUFBRSxJQUMzQixFQUFVLEdBRWpCLEdBQ0UsR0FBUyxPQUNLLEtBQ2QsR0FBSSxJQUNGLFVBQVksRUFBUyxLQUFLLEtBQU8sYUFDakMsRUFBUyxJQUFJLE1BQ2IsRUFBUyxJQUFJLFdBS0gsS0FDZCxHQUFJLElBQ0YsVUFBWSxFQUFTLEtBQUssS0FBTyxlQUNqQyxFQUFTLEtBQUssTUFDZCxFQUFTLEtBQUssbUJBTWhCLGNBQWMsR0FFYixHQUFJLElBQWMsRUFBSyxLQUFNLEdBQUksU0FHbkMsdUJBQXNCLEVBQVUsTUFDL0IsR0FBUyxHQUFJLElBQWUsRUFBUyxNQUFNLElBQy9DLFNBQWUsU0FBVyxFQUVyQixRQUdGLG9CQUFtQixFQUFRLEVBQVEsRUFBd0IsR0FBSSxNQUM5RCxHQUFrQixHQUFJLEdBQzFCLEVBQVksR0FBSSxHQUNoQixFQUFrQixHQUFJLEdBQ3RCLEVBQVksR0FBSSxHQUNoQixFQUFZLEdBQUksSUFDaEIsRUFBWSxHQUFJLE1BRVYsSUFBTSxFQUFRLE1BQVEsT0FBWSxFQUFRLElBQU0sUUFDaEQsTUFBUSxFQUFRLE9BQVMsR0FFNUIsRUFBTyxlQUNELEtBQUssc0JBQXNCLFNBR2hDLEdBQVcsT0FBTyxLQUFLLEVBQVEsT0FDbkMsRUFBYSxPQUFPLE9BQU8sRUFBUSxPQUNuQyxFQUFjLEVBQU8sV0FBYSxFQUFPLFNBQVMsTUFBUSxLQUFLLFNBQVMsR0FDeEUsRUFBUSxFQUFPLFdBQWEsRUFBTyxTQUFTLE1BQVEsS0FBSyxTQUFTLEdBQ2xFLEVBQXFCLE1BRW5CLEdBQU0sRUFBUSxFQUFNLFFBRWpCLFNBQVMsT0FFWCxFQUFJLEVBQUcsRUFBSSxFQUFNLE9BQVEsRUFBRSxPQUN2QixFQUFNLEtBQ04sRUFBUSxNQUFNLEVBQUssT0FBUyxFQUFLLE9BRS9CLEtBQUssY0FBYyxFQUFNLEdBRTlCLEdBQVUsSUFBUyxFQUFRLElBQUssTUFDNUIsR0FBYSxLQUFLLGVBQWUsRUFBSyxPQUFRLEdBQ2xELEVBQWUsS0FBSyxlQUFlLEVBQU8sT0FBUSxLQUV6QyxzQkFDRSxzQkFFRyxzQkFBc0IsRUFBVyxlQUN2QyxzQkFBc0IsRUFBSyxlQUVyQixzQkFBc0IsRUFBYSxlQUN6QyxzQkFBc0IsRUFBTyxlQUdwQyxXQUFXLEdBQUksSUFBUSxFQUFVLEVBQUcsRUFBVSxHQUFJLEdBQUksSUFBUSxFQUFnQixFQUFHLEVBQWdCLElBQ2pHLGNBR0EsV0FBVyxHQUFJLElBQVEsRUFBVSxFQUFHLEVBQVUsR0FBSSxHQUFJLElBQVEsRUFBZ0IsRUFBRyxFQUFnQixJQUNqRyxpQkFFRyxHQUFnQixFQUFVLFFBQVUsRUFBVSxRQUU5QyxFQUFTLEdBQUksS0FBVSxzQkFBc0IsR0FBSSxJQUFNLEVBQUcsRUFBRyxNQUU5RCxPQUFPLFNBQVMsS0FFaEIsT0FBTyxVQUFVLEVBQUssU0FBVSxFQUFLLFdBQVksRUFBSyxTQUV0RCxzQkFFRyxHQUFRLFFBSWIsU0FHRixhQUFZLEVBQVUsRUFBTyxNQUM1QixHQUFRLEtBQUssU0FBUyxVQUVuQixHQUFJLEVBQUcsRUFBSSxFQUFNLE9BQVEsRUFBRSxFQUFHLE1BQy9CLEdBQU8sRUFBTSxHQUVmLEVBQU0sRUFBSyxVQUNSLEtBQU8sRUFBTSxFQUFLLGFBSXBCLFlBR0YsVUFBUyxFQUFVLE9BQ2pCLE9BQU0sUUFBUSxHQUFZLEVBQVcsRUFBUyxZQUdoRCxlQUFjLEVBQU0sRUFBVSxRQUMxQixHQUFJLEVBQUcsRUFBUSxLQUFLLFNBQVMsR0FBVyxFQUFJLEVBQU0sT0FBUSxPQUM3RCxJQUFTLEVBQU0sR0FBRyxXQUFhLEdBQU0sU0FJdEMsZ0JBQWUsRUFBTSxFQUFPLE1BQzFCLEVBQUssUUFBUSxJQUNkLEVBQU0sUUFBUSxFQUFLLFFBQVUsU0FDeEIsS0FHRixFQUFLLGNBSVQsbUJBQWtCLEVBQU0sRUFBUSxNQUMvQixHQUFTLGlCQUNiLEVBQVMsQ0FBRSxlQUVKLEdBQUksRUFBRyxFQUFJLEVBQU8sT0FBUSxFQUFFLEVBQUcsTUFHaEMsR0FBWSxFQUFPLEtBQUssRUFBTyxHQUFHLE1BRXBDLEdBQWEsSUFBUyxFQUFVLE9BQzNCLEVBQVUsSUFBTSxTQUlwQixTQUdGLHFCQUFvQixFQUFVLEVBQWdCLE1BQzdDLEdBQWMsS0FBSyxTQUFTLEdBQ2hDLEVBQWMsS0FBSyxTQUFTLEdBQzVCLEVBQWEsWUFFRSxHQUFJLEVBQUcsRUFBSSxFQUFZLE9BQVEsSUFBSyxNQUM3QyxHQUFXLEVBQVksR0FBRyxZQUV2QixHQUFJLEVBQUcsRUFBSSxFQUFZLE9BQVEsT0FDbEMsSUFBYSxFQUFZLEdBQUcsS0FBTSxHQUM5QixLQUFLLHFCQU9WLFNBR0YsT0FBTSxFQUFRLE1BQ2IsR0FBZSxHQUFJLEtBQ25CLEVBQWMsR0FBSSxLQUVsQixFQUFRLEVBQU8sa0JBRUosRUFBUSxFQUFPLENBQUMsRUFBWSxJQUFlLEdBQzdDLElBQUksRUFBWSxLQUNqQixJQUFJLEVBQVksT0FHeEIsU0FBUyxBQUFDLEdBQVMsSUFDbkIsQ0FBQyxFQUFLLDBCQUVKLEdBQWEsRUFDYixFQUFhLEVBQWEsSUFBSSxHQUM5QixFQUFjLEVBQVcsU0FBUyxRQUU3QixTQUFXLEVBQVcsU0FBUyxVQUMvQixXQUFXLEtBQUssRUFBVyxjQUUzQixTQUFTLE1BQVEsRUFBWSxJQUFJLEFBQUMsR0FDdEMsR0FBWSxJQUFJLFlBQ1gsS0FDTixzQkFDQSxFQUNBLDhEQUNBLEdBR0csRUFBWSxJQUFJLE9BR2QsS0FBSyxFQUFXLFNBQVUsRUFBVyxjQUczQyxHQUlYLFlBQTBCLEVBQUcsRUFBRyxFQUFVLEdBQy9CLEVBQUcsVUFFSCxHQUFJLEVBQUcsRUFBSSxFQUFFLFNBQVMsT0FBUSxPQUNwQixFQUFFLFNBQVMsR0FBSSxFQUFFLFNBQVMsR0FBSSxRQ2hkdEMsSUFBMkIsR0FBb0Qsb0NDVjdELE9BS3RCLFFBQVMsQ0FBQyxFQUFnQixJQUFrQixNQUMzQyxHQUFzQixLQUFLLG1CQUFtQixFQUFRLEdBQ3RELEVBQW1CLEtBQUsscUJBQXFCLEVBQVEsUUFDdEQsaUJBQWlCLEVBQVEsRUFBcUIsVUFPOUMsbUJBQW9CLEFBQUMsR0FBbUIsTUFDdkMsR0FBMkIsR0FBYSxFQUFRLElBQ2hELEVBQXFCLEdBQWEsRUFBUSxNQUV2QixhQUFhLHVCQUF5QixJQUV0QyxhQUFhLFdBQVcsUUFBUSxBQUFDLEdBQWMsQ0FFbEUsQ0FBQyxFQUFVLFNBQ0gsS0FBTyxHQUFjLFdBQVcsR0FBaUIsU0FBUyxZQUFhLEVBQVUsTUFFdkYsQ0FBQyxFQUFVLFVBSVAsT0FBUyxFQUFtQixNQUFNLFdBQVcsRUFBVSxNQUc3RCxFQUFVLGtCQUEwQixlQUFlLEVBQVUsa0JBVTlELG9CQUFxQixDQUFDLEVBQWdCLElBQTBCLE1BQy9ELEdBQTJCLEdBQWEsRUFBUSxPQUNsRCxHQUFxQixPQUNuQixHQUFZLEVBQXlCLHNCQUdqQyx3QkFBMEIsSUFFMUIsV0FBVyxRQUFRLEFBQUMsR0FBK0IsSUFDdkQsRUFBQyxFQUFVLFNBR1gsRUFBVSxjQUFjLGFBQWUsRUFBVSxTQUFXLEVBQVUsd0JBQzlELE9BQVMsS0FBSyxrQkFDdEIsRUFBVSx1QkFDVixFQUFVLG1CQUNWLEVBQVUsc0JBQ1YsRUFBVSx5QkFJUSxFQUFVLFNBQ3RCLE9BQU8sbUJBQW1CLEVBQVUsVUFDcEMsT0FBTyxzQkFBc0IsRUFBVSxXQUFhLEdBSzFELEVBQVUsT0FBUyxNQUNYLE9BQU8sT0FDYixFQUFVLHFCQUNILEdBQUksRUFBRyxFQUFJLEVBQVUsV0FBVyxPQUFRLE9BQzNDLEVBQVUsV0FBVyxHQUFHLFFBQ3RCLEVBQVUsV0FBVyxHQUFHLE9BQVMsRUFBRyxHQUM1QixPQUFPLFNBQVMsRUFBVSxXQUFXLEdBQUcsZUFTeEQsRUFBVSxjQUFjLGdCQUFrQixFQUFVLFFBQVUsS0FDdEQsT0FBTyxXQUlkLFNBVUYsc0JBQXVCLENBQUMsRUFBZ0IsRUFBZSxJQUFzQyxNQUM1RixHQUEyQixHQUFhLEVBQVEsT0FDbEQsR0FBa0IsUUFFakIsR0FBeUIsY0FLTCxVQUFVLHdCQUEwQixJQUVwQyxVQUFVLFdBQVcsUUFBUSxBQUFDLEdBQWMsR0FFekQsT0FBUyxFQUNmLEVBQ0EsS0FBSyxrQkFDSCxFQUF5QixVQUFVLHVCQUNuQyxFQUF5QixVQUFVLG1CQUNuQyxFQUFVLHNCQUNWLEVBQVUsdUJBR04sT0FBTyxtQkFBbUIsRUFBVSxXQUMzQixFQUFVLE9BRXpCLEVBQVUsUUFBVSxNQUdaLE9BQU8sUUFHYixFQUFVLE9BQU8sZUFDVCxPQUFPLFVBS25CLEVBQXlCLFVBQVUsT0FBUyxFQUF5QixlQUFlLGFBQWEsTUFFL0YsR0FBbUIsUUFDaEIsbUJBQW1CLEVBQVEsS0FJN0IsU0FTRixrQkFBbUIsQ0FBQyxFQUFnQixFQUE0QixJQUE0QixNQUMzRixHQUEyQixHQUFhLEVBQVEsSUFDaEQsRUFBZSxFQUF5QixlQUFlLGVBQ2hELFdBQVcsR0FBRyxPQUFTLEtBQUssSUFBSSxLQUF1QixHQUFxQixHQUdyRixFQUF5QixhQUFhLE9BQVMsRUFBYSxNQUFRLEVBQWEsV0FBVyxHQUFHLE9BQVMsTUFDN0YsV0FBVyxHQUFHLE9BQVMsR0FHbEMsRUFBYSxXQUFXLEdBQUcsVUFDaEIsV0FBVyxHQUFHLE9BQU8sbUJBQW1CLEVBQWEsV0FBVyxHQUFHLGVBWTdFLG1CQUFvQixDQUN6QixFQUNBLEVBQ0EsRUFDQSxJQUVPLEdBQVUsTUFBTSxHQUFVLFVBQVUsRUFBYSxFQUFHLEVBQVUsRUFBYSxHQUFZLEVBQUcsU0FRNUYsb0JBQXFCLENBQUMsRUFBZ0IsSUFBbUMsTUFDeEUsR0FBMkIsR0FBYSxFQUFRLE1BQzdCLFVBQVUsdUJBQXlCLElBQ25DLFVBQVUsV0FBVyxRQUFRLEFBQUMsR0FBTSxHQUN6RCxzQkFBd0IsRUFBRSxTQUMxQixvQkFBc0IsSUFHdEIsTUFDdUIsVUFBWSxZQ3pNOUIsSUFBeUIsR0FBa0QsMEJDSzNFLEdBQXdCLEdBQWlELGlDQ1gxRCxDQUMxQixLQUFPLEVBQ1AsT0FDQSxVQUFZLEVBQ1osVUFBWSxFQUNaLEtBQU8sS0FFUCxZQUFZLEVBQWtCLEVBQW1CLEVBQW1CLEdBQzNELFNBQVMsQUFBQyxHQUFVLENBQ3JCLEVBQU0sYUFDRixRQUFVLFdBR2YsT0FBUyxPQUNULFVBQVksRUFBWSxPQUN4QixVQUFZLEVBQVksT0FDeEIsV0FBYSxVQUFZLEtBQUssV0FBYSxTQUMzQyxLQUFPLEtBQUssVUFHbkIsU0FBVSxFQUVWLE9BQU8sRUFBSSxPQUNMLE1BQUssTUFBUSxLQUFLLGdCQUNmLE9BQU8sU0FBUyxBQUFDLEdBQVUsQ0FDMUIsRUFBTSxVQUFlLEVBQU0sT0FBUyxhQUFlLEVBQU0sT0FBUyxhQUNoRSxFQUFNLFNBQVMsYUFBZ0IsU0FBUyxTQUFTLEtBQUssTUFBUSxLQUFLLGFBSXRFLE1BQVEsS0FBSyxLQUNYLFVBRUosVUFDRSxVQUdGLG9CQUFtQixFQUE4QixNQUNoRCxHQUFvQixDQUN4QixzQkFDQSxvQkFDQSxrQ0FDQSxnQkFDQSw2QkFDQSwwQkFDQSw2QkFDQSw0QkFDQSxtREFDQSwrQkFDQSxxQkFDQSxLQUNBLEtBQUs7QUFBQSxHQUVELEVBQWlCLENBQ3JCLG9CQUNBLHNCQUNBLGtDQUNBLGdCQUNBLDZCQUNBLDBCQUNBLDZCQUNBLDRCQUNBLFlBQ0EscUJBQ0EsS0FDQSxLQUFLO0FBQUEsR0FFRCxFQUFzQixDQUMxQixzQkFDQSxvQkFDQSxzQkFDQSxzQkFDQSxzQ0FDQSx5RUFDQSxnQkFJQSx3REFDQSwrQkFDQSw0Q0FDQSwyQkFDQSwyQkFDQSwyQkFDQSxLQUNBLHFCQUNBLGNBQ0EsS0FDQSxLQUNBLEtBQUs7QUFBQSxHQUVELEVBQXdCLENBQzVCLHNCQUNBLG9CQUNBLHNCQUNBLHNCQUNBLHNDQUNBLG9DQUNBLHlFQUNBLGdCQUlBLGtEQUNBLCtCQUNBLDRDQUNBLDJCQUNBLDJCQUNBLDJCQUNBLEtBQ0EscUJBQ0EsY0FDQSxLQUNBLEtBQ0EsS0FBSztBQUFBLEdBRUQsRUFBUSxFQUFPLFNBQVMsYUFBYSxNQUNyQyxFQUFtQixFQUFPLFNBQVUsTUFBUSxXQUV0QyxJQUFJLElBQWUsQ0FDN0IsU0FBVSxDQUNSLE1BQU8sQ0FDTCxNQUFhLEVBQU8sU0FBVSxPQUVoQyxlQUFnQixDQUNkLE1BQWEsRUFBTyxTQUFVLEtBS2hDLEtBQU0sQ0FDSixNQUFPLE9BR1gsYUFBYyxFQUFRLEVBQWlCLEVBQ3ZDLGVBQWdCLEVBQWEsRUFBd0IsVUN6STlDLElBQWUsQ0FDMUIsS0FBTSxFQUNOLE9BQVEsRUFDUixPQUFRLEVBQ1IsTUFBTyxHQ2daSSxHQUFhLENBQ3hCLENBQ0UsS0FBTSxPQUNOLFlBQWEsS0FDYixTQUFVLENBQUMsc0JBQXdCLG1CQUFvQixxQkFDdkQsV0FBWSxDQUFDLEVBQUcsRUFBRyxFQUFHLEdBQ3RCLE1BQU8sQ0FBQyxFQUFHLEVBQUcsSUFFaEIsQ0FDRSxLQUFNLFFBQ04sWUFBYSxFQUNiLFNBQVUsQ0FBQyxxQkFBc0IsbUJBQXFCLHNCQUN0RCxXQUFZLENBQUMsRUFBRyxFQUFHLEVBQUcsR0FDdEIsTUFBTyxDQUFDLEVBQUcsRUFBRyxJQUVoQixDQUNFLEtBQU0sU0FDTixZQUFhLEVBQ2IsU0FBVSxDQUFDLHNCQUF1QixtQkFBcUIsc0JBQ3ZELFdBQVksQ0FBQyxFQUFHLEVBQUcsRUFBRyxHQUN0QixNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxTQUNOLFlBQWEsRUFDYixTQUFVLENBQUMsc0JBQXVCLG1CQUFxQixzQkFDdkQsV0FBWSxDQUFDLEVBQUcsRUFBRyxFQUFHLEdBQ3RCLE1BQU8sQ0FBQyxFQUFHLEVBQUcsSUFFaEIsQ0FDRSxLQUFNLE9BQ04sWUFBYSxFQUNiLFNBQVUsQ0FBQyxvQkFBcUIsa0JBQW9CLHNCQUNwRCxXQUFZLENBQUMsRUFBRyxFQUFHLEVBQUcsR0FDdEIsTUFBTyxDQUFDLEVBQUcsRUFBRyxJQUVoQixDQUNFLEtBQU0sT0FDTixZQUFhLEVBQ2IsU0FBVSxDQUFDLHVCQUF3QixtQkFBcUIsb0JBQ3hELFdBQVksQ0FBQyxFQUFHLEVBQUcsRUFBRyxHQUN0QixNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxjQUNOLFlBQWEsRUFDYixTQUFVLENBQUMsc0JBQXVCLG1CQUFxQixvQkFDdkQsV0FBWSxDQUFDLHNCQUF1QixFQUFHLEVBQUcsR0FDMUMsTUFBTyxDQUFDLEVBQUcsRUFBRyxJQUVoQixDQUNFLEtBQU0sVUFDTixZQUFhLEVBQ2IsU0FBVSxDQUFDLG9CQUFzQixtQkFBcUIsb0JBQ3RELFdBQVksQ0FBQyxFQUFHLEVBQUcsRUFBRyxHQUN0QixNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxXQUNOLFlBQWEsRUFDYixTQUFVLENBQUMscUJBQXVCLG1CQUFxQixvQkFDdkQsV0FBWSxDQUFDLEVBQUcsRUFBRyxFQUFHLEdBQ3RCLE1BQU8sQ0FBQyxFQUFHLEVBQUcsSUFFaEIsQ0FDRSxLQUFNLGVBQ04sWUFBYSxFQUNiLFNBQVUsQ0FBQyxtQkFBcUIsbUJBQXFCLHNCQUNyRCxXQUFZLENBQUMsbUJBQXFCLG1CQUFxQixzQkFBdUIsc0JBQzlFLE1BQU8sQ0FBQyxFQUFHLEVBQUcsSUFFaEIsQ0FDRSxLQUFNLFVBQ04sWUFBYSxFQUNiLFNBQVUsQ0FBQyxxQkFBdUIsbUJBQXFCLHFCQUN2RCxXQUFZLENBQUMsRUFBRyx1QkFBd0IsRUFBRyxHQUMzQyxNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxjQUNOLFlBQWEsR0FDYixTQUFVLENBQUMscUJBQXNCLGtCQUFvQix1QkFDckQsV0FBWSxDQUFDLEVBQUcsc0JBQXdCLEVBQUcsR0FDM0MsTUFBTyxDQUFDLEVBQUcsRUFBRyxJQUVoQixDQUNFLEtBQU0sV0FDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHVCQUF3QixtQkFBcUIsdUJBQ3hELFdBQVksQ0FBQyxFQUFHLEVBQUcsRUFBRyxHQUN0QixNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxpQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLG9CQUFzQixtQkFBcUIscUJBQ3RELFdBQVksQ0FBQyxFQUFHLEVBQUcsRUFBRyxHQUN0QixNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxpQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHFCQUF1QixtQkFBcUIsc0JBQ3ZELFdBQVksQ0FBQyxFQUFHLEVBQUcsRUFBRyxHQUN0QixNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxpQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHFCQUF1QixvQkFBc0Isc0JBQ3hELFdBQVksQ0FBQyxFQUFHLHNCQUF3QixFQUFHLEdBQzNDLE1BQU8sQ0FBQyxFQUFHLEVBQUcsSUFFaEIsQ0FDRSxLQUFNLGlCQUNOLFlBQWEsR0FDYixTQUFVLENBQUMscUJBQXVCLG1CQUFxQixxQkFDdkQsV0FBWSxDQUFDLEVBQUcsRUFBRyxFQUFHLEdBQ3RCLE1BQU8sQ0FBQyxFQUFHLEVBQUcsSUFFaEIsQ0FDRSxLQUFNLGlCQUNOLFlBQWEsR0FDYixTQUFVLENBQUMsc0JBQXVCLG1CQUFxQix1QkFDdkQsV0FBWSxDQUFDLEVBQUcsRUFBRyxFQUFHLEdBQ3RCLE1BQU8sQ0FBQyxFQUFHLEVBQUcsSUFFaEIsQ0FDRSxLQUFNLGlCQUNOLFlBQWEsR0FDYixTQUFVLENBQUMsc0JBQXVCLG9CQUFzQix1QkFDeEQsV0FBWSxDQUFDLEVBQUcsRUFBRyxFQUFHLEdBQ3RCLE1BQU8sQ0FBQyxFQUFHLGtCQUFvQixJQUVqQyxDQUNFLEtBQU0sa0JBQ04sWUFBYSxHQUNiLFNBQVUsQ0FBQyx1QkFBd0IsaUJBQW1CLHdCQUN0RCxXQUFZLENBQUMsRUFBRyxzQkFBd0IsRUFBRyxHQUMzQyxNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxrQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLG9CQUFxQixtQkFBcUIsd0JBQ3JELFdBQVksQ0FBQyxFQUFHLHFCQUF1QixFQUFHLEdBQzFDLE1BQU8sQ0FBQyxFQUFHLEVBQUcsSUFFaEIsQ0FDRSxLQUFNLGtCQUNOLFlBQWEsR0FDYixTQUFVLENBQUMscUJBQXNCLG9CQUFzQix3QkFDdkQsV0FBWSxDQUFDLEVBQUcsRUFBRyxFQUFHLEdBQ3RCLE1BQU8sQ0FBQyxFQUFHLEVBQUcsSUFFaEIsQ0FDRSxLQUFNLGdCQUNOLFlBQWEsR0FDYixTQUFVLENBQUMsc0JBQXdCLGtCQUFvQixxQkFDdkQsV0FBWSxDQUFDLEVBQUcsRUFBRyxFQUFHLEdBQ3RCLE1BQU8sQ0FBQyxFQUFHLEVBQUcsSUFFaEIsQ0FDRSxLQUFNLGdCQUNOLFlBQWEsR0FDYixTQUFVLENBQUMsc0JBQXVCLG1CQUFxQixzQkFDdkQsV0FBWSxDQUFDLEVBQUcsRUFBRyxFQUFHLEdBQ3RCLE1BQU8sQ0FBQyxFQUFHLEVBQUcsSUFFaEIsQ0FDRSxLQUFNLGdCQUNOLFlBQWEsR0FDYixTQUFVLENBQUMsc0JBQXVCLG9CQUFzQixzQkFDeEQsV0FBWSxDQUFDLEVBQUcsc0JBQXdCLEVBQUcsR0FDM0MsTUFBTyxDQUFDLEVBQUcsRUFBRyxJQUVoQixDQUNFLEtBQU0saUJBQ04sWUFBYSxHQUNiLFNBQVUsQ0FBQyxxQkFBdUIsbUJBQXFCLHFCQUN2RCxXQUFZLENBQUMsRUFBRyxFQUFHLEVBQUcsR0FDdEIsTUFBTyxDQUFDLEVBQUcsa0JBQW9CLElBRWpDLENBQ0UsS0FBTSxpQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHNCQUF1QixtQkFBcUIsc0JBQ3ZELFdBQVksQ0FBQyxFQUFHLEVBQUcsRUFBRyxHQUN0QixNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxpQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHNCQUF1QixvQkFBc0IsdUJBQ3hELFdBQVksQ0FBQyxxQkFBc0Isc0JBQXVCLHNCQUEwQixHQUNwRixNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxnQkFDTixZQUFhLEVBQ2IsU0FBVSxDQUFDLG9CQUFzQixtQkFBcUIscUJBQ3RELFdBQVksQ0FBQyxFQUFHLEVBQUcsa0JBQW9CLG1CQUN2QyxNQUFPLENBQUMsa0JBQW9CLGtCQUFvQixJQUVsRCxDQUNFLEtBQU0sV0FDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHFCQUF1QixrQkFBb0Isc0JBQ3RELFdBQVksQ0FBQyxFQUFHLEVBQUcsc0JBQXdCLEdBQzNDLE1BQU8sQ0FBQyxrQkFBb0Isa0JBQW9CLElBRWxELENBQ0UsS0FBTSxlQUNOLFlBQWEsR0FDYixTQUFVLENBQUMsdUJBQXdCLGtCQUFvQix1QkFDdkQsV0FBWSxDQUFDLEVBQUcsRUFBRyxzQkFBd0IsR0FDM0MsTUFBTyxDQUFDLGtCQUFvQixrQkFBb0IsSUFFbEQsQ0FDRSxLQUFNLFlBQ04sWUFBYSxHQUNiLFNBQVUsQ0FBQyxzQkFBdUIsa0JBQW9CLHFCQUN0RCxXQUFZLENBQUMsRUFBRyxFQUFHLHNCQUF3QixHQUMzQyxNQUFPLENBQUMsa0JBQW9CLGtCQUFvQixJQUVsRCxDQUNFLEtBQU0sa0JBQ04sWUFBYSxHQUNiLFNBQVUsQ0FBQyxxQkFBdUIsbUJBQXFCLHFCQUN2RCxXQUFZLENBQUMsRUFBRyxFQUFHLHNCQUF3QixHQUMzQyxNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxrQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHNCQUF1QixtQkFBcUIsc0JBQ3ZELFdBQVksQ0FBQyxFQUFHLEVBQUcsRUFBRyxHQUN0QixNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxrQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHNCQUF1QixvQkFBc0Isc0JBQ3hELFdBQVksQ0FBQyxFQUFHLEVBQUcsRUFBRyxHQUN0QixNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxpQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHVCQUF5QixtQkFBcUIscUJBQ3pELFdBQVksQ0FBQyxFQUFHLEVBQUcsc0JBQXdCLEdBQzNDLE1BQU8sQ0FBQyxrQkFBb0Isa0JBQW9CLElBRWxELENBQ0UsS0FBTSxpQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHFCQUFzQixtQkFBcUIsc0JBQ3RELFdBQVksQ0FBQyxFQUFHLEVBQUcsc0JBQXdCLEdBQzNDLE1BQU8sQ0FBQyxrQkFBb0Isa0JBQW9CLElBRWxELENBQ0UsS0FBTSxpQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHVCQUF3QixtQkFBcUIsdUJBQ3hELFdBQVksQ0FBQyxFQUFHLEVBQUcsc0JBQXdCLEdBQzNDLE1BQU8sQ0FBQyxrQkFBb0Isa0JBQW9CLElBRWxELENBQ0UsS0FBTSxtQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLEVBQUcsbUJBQXFCLHVCQUNuQyxXQUFZLENBQUMsRUFBRyxFQUFHLHNCQUF3QixHQUMzQyxNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxtQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHVCQUF3QixvQkFBc0Isd0JBQ3pELFdBQVksQ0FBQyxFQUFHLEVBQUcsRUFBRyxHQUN0QixNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxtQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHVCQUF3QixtQkFBcUIsc0JBQ3hELFdBQVksQ0FBQyxzQkFBd0IscUJBQXNCLHFCQUF1QixHQUNsRixNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxrQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHFCQUF1QixtQkFBcUIscUJBQ3ZELFdBQVksQ0FBQyxFQUFHLEVBQUcsc0JBQXdCLEdBQzNDLE1BQU8sQ0FBQyxFQUFHLEVBQUcsSUFFaEIsQ0FDRSxLQUFNLGtCQUNOLFlBQWEsR0FDYixTQUFVLENBQUMsdUJBQXdCLG9CQUFzQix1QkFDekQsV0FBWSxDQUFDLEVBQUcsRUFBRyxFQUFHLEdBQ3RCLE1BQU8sQ0FBQyxrQkFBb0Isa0JBQW9CLElBRWxELENBQ0UsS0FBTSxrQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHNCQUF1QixvQkFBc0IsdUJBQ3hELFdBQVksQ0FBQyxFQUFHLEVBQUcsc0JBQXdCLEdBQzNDLE1BQU8sQ0FBQyxrQkFBb0Isa0JBQW9CLElBRWxELENBQ0UsS0FBTSxrQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHFCQUF1QixvQkFBc0Isb0JBQ3hELFdBQVksQ0FBQyxFQUFHLEVBQUcsc0JBQXdCLEdBQzNDLE1BQU8sQ0FBQyxrQkFBb0Isa0JBQW9CLElBRWxELENBQ0UsS0FBTSxrQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHFCQUF1QixvQkFBc0Isb0JBQ3hELFdBQVksQ0FBQyxFQUFHLEVBQUcsc0JBQXdCLEdBQzNDLE1BQU8sQ0FBQyxrQkFBb0Isa0JBQW9CLElBRWxELENBQ0UsS0FBTSxrQkFDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHFCQUF1QixtQkFBcUIscUJBQ3ZELFdBQVksQ0FBQyxFQUFHLEVBQUcsc0JBQXdCLEdBQzNDLE1BQU8sQ0FBQyxrQkFBb0Isa0JBQW9CLElBRWxELENBQ0UsS0FBTSxZQUNOLFlBQWEsRUFDYixTQUFVLENBQUMsbUJBQXFCLG1CQUFxQixzQkFDckQsV0FBWSxDQUFDLEdBQUksRUFBRyxzQkFBdUIsdUJBQzNDLE1BQU8sQ0FBQyxFQUFHLEVBQUcsSUFFaEIsQ0FDRSxLQUFNLFVBQ04sWUFBYSxHQUNiLFNBQVUsQ0FBQyxzQkFBdUIsbUJBQXFCLHVCQUN2RCxXQUFZLENBQUMsdUJBQXdCLHVCQUF3QixzQkFBd0IsR0FDckYsTUFBTyxDQUFDLEVBQUcsa0JBQW9CLElBRWpDLENBQ0UsS0FBTSxXQUNOLFlBQWEsR0FDYixTQUFVLENBQUMscUJBQXNCLGtCQUFvQixvQkFDckQsV0FBWSxDQUFDLG1CQUFxQixzQkFBdUIsc0JBQXVCLG1CQUNoRixNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxjQUNOLFlBQWEsR0FDYixTQUFVLENBQUMsdUJBQXdCLG1CQUFxQixvQkFDeEQsV0FBWSxDQUFDLEVBQUcscUJBQXVCLHFCQUF1QixHQUM5RCxNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxhQUNOLFlBQWEsRUFDYixTQUFVLENBQUMsb0JBQXNCLG9CQUFzQixxQkFDdkQsV0FBWSxDQUFDLEVBQUcsRUFBRyxxQkFBc0IsR0FDekMsTUFBTyxDQUFDLEVBQUcsRUFBRyxJQUVoQixDQUNFLEtBQU0sV0FDTixZQUFhLEdBQ2IsU0FBVSxDQUFDLHNCQUF1QixtQkFBcUIsc0JBQ3ZELFdBQVksQ0FBQyxxQkFBc0Isc0JBQXVCLHFCQUF1QixHQUNqRixNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxZQUNOLFlBQWEsR0FDYixTQUFVLENBQUMscUJBQXNCLGlCQUFtQixxQkFDcEQsV0FBWSxDQUFDLG1CQUFxQix1QkFBd0IsdUJBQXdCLG1CQUNsRixNQUFPLENBQUMsRUFBRyxFQUFHLElBRWhCLENBQ0UsS0FBTSxlQUNOLFlBQWEsR0FDYixTQUFVLENBQUMsdUJBQXdCLG1CQUFxQixvQkFDeEQsV0FBWSxDQUFDLHFCQUFzQixxQkFBdUIsdUJBQXlCLEdBQ25GLE1BQU8sQ0FBQyxFQUFHLEVBQUcsS0M3d0JMLEdBQVEsR0FBaUMsU0NIekMsR0FBSyxHQUFJLEdBQVEsRUFBRyxFQUFHLEdBQ3ZCLEdBQU8sR0FBSSxHQUFRLEVBQUcsR0FBSSxHQUMxQixHQUFPLEdBQUksR0FBUSxFQUFHLEVBQUcsR0FDekIsR0FBUSxHQUFJLEdBQVEsR0FBSSxFQUFHLEdBQzNCLEVBQVUsR0FBSSxHQUFRLEVBQUcsRUFBRyxHQUM1QixHQUFPLEdBQUksR0FBUSxFQUFHLEVBQUcsSUFDbEIsR0FBSSxHQUFRLEVBQUcsRUFBRyxHQ0h0QyxLQUFNLElBQW9CLEdBQUksR0FDNUIsR0FBcUIsR0FBSSxXQUNSLENBQ2pCLFFBQ0EsV0FDQSxPQUNBLElBQ0EsV0FDQSxNQUNBLFNBRUEsYUFBYyxNQUNQLFdBQWEsUUFDYixPQUFTLE9BQ1QsSUFBTSxPQUdOLFFBQVUsVUFFVixXQUFhLEVBQVEsYUFDckIsTUFBUSxHQUFHLFFBSWxCLE9BQVEsT0FDQyxNQUFLLFdBQVcsR0FBRyxNQUU1QixNQUFPLE9BQ0UsTUFBSyxXQUFXLEtBQUssSUFBTSxHQUFHLE1BRXZDLE1BQU0sRUFBRyxPQUNBLE1BQUssV0FBVyxHQUFHLE1BRzVCLFdBQVcsRUFBYyxFQUFhLEVBQWEsTUFTM0MsR0FBSSxBQUZBLEVBQU0sTUFBTSxLQUFLLFdBQVcsR0FBRyxPQUU3QixNQUFNLFdBQVcsUUFBUSxxQkFDaEMsV0FBYSxHQUFJLEtBQVUsS0FBSyxHQUFLLGdCQUFnQixHQUFHLGlCQUN4RCxNQUFRLEdBQUksS0FBVSxLQUFLLEdBQUksZ0JBQWdCLEdBQUcsWUFFaEQsS0FHVCx1QkFBdUIsRUFBNkIsTUFLNUMsR0FBTSxLQUFLLElBQU0sS0FDbkIsR0FBTSxFQUNSLEVBQ0EsRUFDQSxNQUdHLEVBQUksRUFBRyxFQUFJLEVBQUssTUFDZCxFQUFNLEtBQUssV0FBVyxHQUFHLFVBRVosS0FBSyxFQUFNLEtBQUssV0FBVyxHQUFHLE9BQU8sTUFBTSxhQUMxQyxLQUFLLEVBQU0sS0FBSyxXQUFXLEVBQUksR0FBRyxPQUFPLE1BQU0sWUFHL0QsT0FBUyxHQUFrQixXQUFXLFNBQ3BDLFdBQVcsR0FBRyxPQUFTLEVBQUcsVUFFeEIsRUFBRyxhQUlSLE1BQUssVUFBWSxNQUFRLEtBQUssUUFBVSxNQUNyQyxLQUFLLFdBQVcsS0FDbEIsT0FBUyxFQUFNLEtBQUssU0FBUyxNQUFNLFNBQVMsV0FBVyxFQUFNLEtBQUssV0FBVyxHQUFLLE9BQU8sTUFBTSxZQUM1RixLQUFLLFdBQVcsR0FBSyxPQUFPLE9BQVMsRUFBRyxVQUN2QyxFQUFHLGdCQUNHLEtBQUssa0RBRWYsT0FBUyxFQUNQLFdDOUVFLElBQWlCLEdBQTBDLGtCQUMzRCxHQUF1QixHQUEwQywyQkNkbEUsSUFBTCxVQUFLLEVBQUwsNkNBQUssYUNtQlosS0FBTUUsSUFBWSxHQUFJLEdBQ2hCQyxHQUFZLEdBQUksR0FDaEIsR0FBWSxHQUFJLEdBQ0wsR0FBSSxlQVdLLEVBQWMsRUFBYSxFQUFZLEVBQVksRUFBYyxFQUF5QixJQUc5RyxHQUFRLEVBQU0sTUFBTSxFQUFNLFdBQVcsR0FBRyxPQUMxQyxFQUFRLEVBQU0sTUFBTSxFQUFNLFdBQVcsR0FBRyxPQUN4QyxFQUFRLEVBQUssTUFBTSxFQUFNLFdBQVcsR0FBRyxPQUN2QyxFQUFRLEVBQUssTUFBTSxFQUFNLFdBQVcsR0FBRyxPQUN2QyxFQUFPLEVBQU0sT0FDYixFQUFPLEVBQU0sT0FDYixFQUFNRCxHQUNOLEtBSVMsRUFBTyxFQUFPLEVBQU0sRUFBTSxRQUUvQixHQUFjQyxHQUFVLEtBQUssR0FDN0IsRUFBUyxDQUFFLE9BQU0sT0FBTSxVQUV2QixHQUFPLEVBQU0sRUFBTSxRQUVuQixHQUFXLFdBR2QsWUFBWSxHQUFVLGlCQUFpQixFQUFLLEVBQUcsQ0FBQyxJQUNoRCxZQUFZLEdBQVUsS0FBSyxFQUFLLFlBQVksWUFFMUMsUUFBUSxFQUFNLElBQUssS0FHbEIsTUFBTSxTQUFTLEtBQUssRUFBSyxZQUN6QixNQUFNLFdBQVcsS0FBSyxFQUFLLGNBQzNCLE1BQU0sTUFBTSxLQUFLLEVBQUssVUFHMUIsRUFBTSxNQUVOLENBQ0UsV0FBWSxFQUNaLFNBQVUsRUFBTSxNQUFNLFNBQ3RCLE1BQU8sRUFBTSxNQUFNLFVBUWpCLEtBQUssR0FBSyxHQUFPLEVBQU0sRUFBTSxLQUdoQyxLQUFLLEVBQU0sTUFBTSxZQUNqQixTQUFTLEVBQU0sTUFBTSxZQUNyQixZQUFZLEdBQVUsaUJBQWlCLEVBQUssRUFBRyxJQUMvQyxZQUFZLEdBQVUsS0FBSyxFQUFNLE1BQU0sWUFBWSxZQUVqRCxRQUFRLEVBQU0sSUFBSyxLQUdsQixNQUFNLFNBQVMsS0FBSyxFQUFNLE1BQU0sWUFDaEMsTUFBTSxXQUFXLEtBQUssRUFBTSxNQUFNLGNBQ2xDLE1BQU0sTUFBTSxLQUFLLEVBQU0sTUFBTSxVQUdqQyxFQUFNLE1BRU4sQ0FDRSxXQUFZLEVBQ1osU0FBVSxFQUFNLE1BQU0sU0FDdEIsTUFBTyxFQUFNLE1BQU0sUUFPaEIsQ0FDTCxjQUNBLFNBQ0Esd0JBS0YsRUFDQSxFQUNBLEVBQ0EsRUFDQSxFQUNBLEVBQ0EsSUFVSSxHQUFTLEVBQU0sTUFBTSxFQUFNLFdBQVcsR0FBRyxPQUMzQyxFQUFTLEVBQU0sTUFBTSxFQUFNLFdBQVcsR0FBRyxPQUN6QyxFQUFTLEVBQU0sTUFBTSxFQUFNLFdBQVcsR0FBRyxPQUN6QyxFQUFTLEVBQUssTUFBTSxFQUFNLFdBQVcsR0FBRyxPQUN4QyxFQUFTLEVBQUssTUFBTSxFQUFNLFdBQVcsR0FBRyxPQUN4QyxFQUFTLEVBQUssTUFBTSxFQUFNLFdBQVcsR0FBRyxPQUN4QyxFQUFRLEVBQU8sT0FDZixFQUFRLEVBQU8sT0FDZixFQUFRLEVBQU8sT0FDZixFQUFTLEVBQU8sT0FBUyxHQUN6QixLQUFtQixNQUFtQixFQUFRLEdBQzlDLEVBQVMsRUFBTyxFQUNoQixFQUFTLEVBQU8sRUFDaEIsRUFBTSxHQUFJLEdBQ1YsS0FJUyxFQUFPLEVBQU8sRUFBTSxFQUFNLEtBRS9CLEdBQU8sRUFBTyxFQUFRLEtBRXpCLFlBQVksR0FBSSxLQUFhLGlCQUFpQixFQUFLLEVBQUcsQ0FBQyxJQUN2RCxZQUFZLEVBQUssV0FBVyxRQUFRLFlBRWxDLFFBQVEsRUFBTyxJQUFLLEtBRWxCLE1BQU0sU0FBUyxLQUFLLEVBQUssWUFDekIsTUFBTSxXQUFXLEtBQUssRUFBSyxjQUMzQixNQUFNLE1BQU0sS0FBSyxFQUFLLFVBRWhCLEVBQU8sTUFBTyxJQUFLLEVBQU8sTUFBTyxXQUFZLE1BSXBELEtBQUssR0FBSyxHQUFPLEVBQU8sRUFBUSxLQUduQyxLQUFLLEVBQU8sTUFBTSxZQUNsQixTQUFTLEVBQU8sTUFBTSxZQUN0QixZQUFZLEdBQUksS0FBYSxpQkFBaUIsRUFBSyxFQUFHLElBQ3RELFlBQVksRUFBTyxNQUFNLFdBQVcsUUFBUSxZQUUxQyxRQUFRLEVBQU8sSUFBSyxLQUVsQixNQUFNLFNBQVMsS0FBSyxFQUFPLE1BQU0sWUFDakMsTUFBTSxXQUFXLEtBQUssRUFBTyxNQUFNLGNBQ25DLE1BQU0sTUFBTSxLQUFLLEVBQU8sTUFBTSxVQUV4QixFQUFPLE1BQU8sSUFBSyxFQUFPLE1BQU8sV0FBWSxNQUlwRCxLQUFLLEdBQUssR0FBTyxFQUFPLEVBQVEsS0FFbkMsS0FBSyxFQUFPLE1BQU0sWUFDbEIsU0FBUyxFQUFPLE1BQU0sWUFDdEIsWUFBWSxHQUFJLEtBQWEsaUJBQWlCLEVBQUssRUFBRyxDQUFDLElBQ3ZELFlBQVksRUFBTyxNQUFNLFdBQVcsWUFFbEMsUUFBUSxFQUFPLElBQUssS0FFbEIsTUFBTSxTQUFTLEtBQUssRUFBTyxNQUFNLFlBQ2pDLE1BQU0sV0FBVyxLQUFLLEVBQU8sTUFBTSxjQUNuQyxNQUFNLE1BQU0sS0FBSyxFQUFPLE1BQU0sVUFFeEIsRUFBTyxNQUFPLElBQUssRUFBTyxNQUFPLFdBQVksZ0JBUy9CLEVBQTJCLEVBQTJCLEdBSTFFLFNBQVMsSUFBSSxFQUFPLFNBQVMsUUFBUSxTQUFTLEVBQU8sT0FBTyxnQkFBZ0IsRUFBTyxhQUl0RixFQUFPLFNBQWMsTUFBTSxTQUFTLEVBQU8sU0FJeEMsV0FBVyxTQUFTLEVBQU8sWUFLcEMsWUFBb0IsRUFBYyxFQUFhLEVBQVksRUFBeUIsRUFBaUIsTUFDN0YsR0FBTSxHQUFJLEtBQ1YsTUFBTSxFQUFNLFNBQVMsS0FBSyxtQkFBbUIsUUFDN0MsR0FBTSxFQUFNLFdBQVcsUUFBUSxnQkFBZ0IsTUFHakQsR0FBSSxHQUFJLEtBQWEsbUJBQW1CLEVBQUssRUFBSyxLQUNsRCxLQUFLLEdBQUcsU0FBUyxLQU9qQixLQUFLLEVBQU0sT0FBTyxnQkFBZ0IsTUFDbEMsR0FBUSxFQUFJLFFBQVEsRUFBSyxHQUV6QixHQUFTLGVBQXVCLEtBRzlCLGFBQWEsRUFBSyxFQUFLLEdBR3ZCLEVBQUksSUFBSSxFQUFLLElBQU0sTUFBVyxDQUFDLE1BR2pDLFlBQVksR0FBSSxLQUFhLGlCQUFpQixFQUFLLEVBQUcsSUN2TzVELEtBQU0sSUFBVSxHQUFJLEdBQ2QsR0FBWSxHQUFJLEdBQ2hCLEdBQVksR0FBSSxHQUNoQixHQUFXLEdBQUksR0FDZixHQUFXLEdBQUksR0FDZixHQUFXLEdBQUksR0FDZixHQUFXLEdBQUksZUFVRSxFQUFjLEVBQWMsRUFBc0IsSUFFbkUsTUFBWSxFQUFPLEVBQU8sRUFBTyxFQUFPLE1BQWEsRUFBTyxTQUM1RCxHQUFJLEtBQVEsR0FFUCxFQUFJLE1BQU8sR0FDYixLQUFLLEtBQUssZUFPYyxFQUErQixHQUMxRCxPQUFTLEtBQ1QsT0FBUyxNQUVKLEVBQUssTUFBTyxXQUNaLEVBQUssT0FBUSxXQUNiLEVBQUssT0FBUSxXQUNiLEVBQUssUUFBUyxhQUNkLEVBQUssU0FBVSxlQUNmLEVBQUssU0FBVSxnQkFDZixFQUFLLFFBQVMsQ0FBQyxXQUFZLGdCQUFpQixnQkFDNUMsRUFBSyxRQUFTLENBQUMsVUFBVyxlQUFnQixlQUMxQyxFQUFLLFFBQVMsQ0FBQyxhQUFjLFlBQWEsZ0JBQzFDLEVBQUssUUFBUyxDQUFDLFlBQWEsV0FBWSxlQUN4QyxFQUFLLFFBQVMsQ0FBQyxRQUFTLFNBQVUsYUFFdkMsT0FBTyxNQUFNLHVCQUF1QixFQUFJLE1BQU0sU0FDOUMsT0FBTyxNQUFNLHVCQUF1QixFQUFJLE1BQU0sU0FDOUMsT0FBTyxNQUFNLHVCQUF1QixFQUFJLE1BQU0sU0FDOUMsT0FBTyxNQUFNLHVCQUF1QixFQUFJLE1BQU0sU0FDOUMsT0FBTyxNQUFNLFdBQVcsR0FBTSxFQUFTLEVBQUksU0FDM0MsT0FBTyxNQUFNLFdBQVcsR0FBTSxFQUFTLEVBQUksU0FDM0MsT0FBTyxNQUFNLFdBQVcsR0FBTyxHQUFNLEVBQUksU0FDekMsT0FBTyxNQUFNLFdBQVcsR0FBTSxHQUFNLEVBQUksbUJBT2YsRUFBK0IsR0FDeEQsT0FBUyxLQUNULE9BQVMsTUFHSixFQUFLLE1BQU8sVUFDWixFQUFLLE9BQVEsaUJBQ2IsRUFBSyxTQUFVLGVBQ2YsRUFBSyxTQUFVLGdCQUVmLEVBQUssU0FBVSxnQkFDZixFQUFLLFNBQVUsaUJBRWYsRUFBSyxRQUFTLENBQUMsYUFBYyxZQUFhLGFBQWMsWUFBYSxPQUNyRSxFQUFLLFFBQVMsQ0FBQyxZQUFhLFdBQVksWUFBYSxXQUFZLE9BQ2pFLEVBQUssUUFBUyxDQUFDLFFBQVMsY0FDeEIsRUFBSyxPQUFRLENBQUMsU0FBVSxTQUFVLFNBQVUsU0FBVSxTQUFVLFNBQVUsYUFJL0UsT0FBTyxNQUFNLHVCQUF1QixFQUFJLE1BQU0sU0FDOUMsT0FBTyxNQUFNLHVCQUF1QixFQUFJLE1BQU0sU0FDOUMsT0FBTyxNQUFNLFdBQVcsR0FBTSxFQUFTLEVBQUksU0FDM0MsT0FBTyxNQUFNLFdBQVcsR0FBTSxFQUFTLEVBQUksbUJBUW5CLEVBQXlCLEVBQW1DLElBQzVELE1BRWpCLEVBQUssTUFFSixFQUFJLEtBQU0sRUFBSSxPQUFPLE1BQU8sRUFBTyxVQUNuQyxFQUFJLEtBQU0sRUFBSSxPQUFPLE1BQU8sRUFBTyxVQUU5QixFQUFLLEVBQUksT0FBTyxPQUFRLEVBQU8sT0FBUSxFQUFTLE9BQ2hELEVBQUssRUFBSSxPQUFPLE9BQVEsRUFBTyxPQUFRLEVBQVMsT0FFcEQsRUFBSyxFQUFJLE9BQU8sTUFBTyxFQUFRLEdBQUksTUFFcEMsRUFBSSxLQUFNLEVBQUksT0FBTyxNQUFPLEVBQU8sVUFDbkMsRUFBSSxLQUFNLEVBQUksT0FBTyxNQUFPLEVBQU8sVUFFOUIsRUFBSyxFQUFJLE9BQU8sS0FBTSxFQUFPLEtBQU0sRUFBUyxJQUcvRCxLQUFNLElBQW9CLENBQ3hCLFNBQVUsR0FBSSxHQUNkLFdBQVksR0FBSSxHQUNoQixjQUFlLEdBQUksR0FDbkIsTUFBTyxHQUFJLEdBRVgsTUFBTyxVQUFZLE1BQ1osU0FBUyxVQUFVLFFBQ25CLFdBQVcsZ0JBQ1gsY0FBYyxnQkFDZCxNQUFNLFVBQVUsS0FRekIsWUFBcUMsRUFBK0IsSUFDaEQsYUFFWixHQUFXLEVBQUksS0FBSyxTQUFTLE1BQU0sS0FBSyxBQUFDLEdBQU0sSUFBSSxpQkFBa0IsTUFFdkUsRUFBUyxXQUNGLE9BQU8saUJBQWlCLEdBQWtCLFlBQzFDLE9BQU8sbUJBQW1CLEdBQWtCLGNBQzVDLE9BQU8sY0FBYyxHQUFrQixVQUM5QixjQUFjLEtBQUssR0FBa0IsWUFBWSxpQkFHNUQsR0FBSSxFQUFHLEVBQUksRUFBSSxLQUFLLFNBQVMsTUFBTSxPQUFRLElBQUssTUFDakQsR0FBTyxFQUFJLEtBQUssU0FBUyxNQUFNLEdBQy9CLEVBQU8sRUFBSSxLQUFLLE1BQU0sS0FFdkIsaUJBQWlCLEVBQUssTUFBTSxZQUM1QixtQkFBbUIsRUFBSyxNQUFNLGNBQzlCLGNBQWMsRUFBSyxNQUFNLFVBRWpCLEVBQUssTUFBTSxTQUFVLEVBQUssTUFBTSxXQUFZLEVBQUssTUFBTSxNQUFPLE1BRXRFLE1BQU0sU0FBUyxLQUFLLEVBQUssWUFDekIsTUFBTSxXQUFXLEtBQUssRUFBSyxjQUMzQixNQUFNLE1BQU0sS0FBSyxFQUFLLG9CQVNKLEVBQXlCLEVBQTZCLE1BS3pFLEdBQVcsRUFBSSxPQUFPLElBQzFCLEVBQWUsRUFBSSxLQUFLLE1BQU0sRUFBUyxPQUN2QyxFQUFlLEVBQUksTUFBTSxNQUFNLEVBQVMsT0FTcEMsRUFBYyxFQUFhLE1BQU0sY0FDakMsRUFBYSxHQUFTLEtBQUssR0FBUyxnQkFBZ0IsR0FDcEQsRUFBUSxHQUFTLEtBQUssSUFBSSxnQkFBZ0IsR0FDMUMsRUFBYyxHQUFTLEtBQUssR0FBWSxnQkFBZ0IsRUFBYSxNQUFNLFlBQzNFLEVBQVMsR0FBUyxLQUFLLEdBQU8sZ0JBQWdCLEVBQWEsTUFBTSxZQU1qRSxFQUFVLEdBQVMsS0FBSyxHQUFTLGdCQUFnQixFQUFhLE1BQU0sWUFFcEUsRUFBUSxHQUNYLG1CQUFtQixFQUFTLEdBQzVCLFNBQVMsRUFBYSxNQUFNLFlBR3pCLEVBQVUsR0FBUyxLQUFLLElBQUksZ0JBQWdCLE1BQzlDLEdBQVEsRUFBUSxRQUFRLEdBT3hCLEFBRFEsRUFBUSxNQUFNLEdBQWEsSUFBSSxJQUNoQyxNQUFXLENBQUMsS0FHaEIsSUFBSSxZQUFjLEVBQWEsTUFBTSxTQUFTLElBQzlDLElBQUksU0FBUyxLQUFLLEVBQWEsTUFBTSxVQUFVLElBQUksRUFBYSxNQUFNLFlBQ3RFLElBQUksSUFBSSxLQUFLLEtBQ2IsSUFBSSxNQUFRLGNBU08sRUFBWSxFQUFjLEVBQVEsTUFXdEQsR0FBUSxFQUFLLE1BQU0sRUFBTSxTQUM3QixFQUFRLEVBQUssTUFBTSxFQUFNLFNBRXJCLEVBQWEsR0FBUyxXQUFXLEVBQU0sTUFBTSxTQUFVLEVBQU0sTUFBTSxZQUdsRSxZQUFjLEVBQVcsU0FBVyxFQUFNLFNBQzFDLElBQUksS0FBSyxHQUFZLGlCQUd0QixHQUFVLEdBQVMsS0FBSyxFQUFNLE9BQU8sZ0JBQWdCLEVBQU0sTUFBTSxZQUFZLE1BQU0sS0FDbEYsZUFBZSxLQUFLLEdBQVksTUFBTSxHQUFTLHdCQVd2QixFQUF5QixFQUFVLEVBQUksRUFBZSxFQUFnQixNQUMvRixHQUFPLEVBQUksS0FBSyxNQUFNLEVBQVMsT0FTL0IsRUFBVSxBQVJQLEVBQUksTUFBTSxNQUFNLEVBQVMsT0FRYixNQUFNLGNBQ3JCLEVBQW1CLEdBQVMsS0FBSyxHQUFlLGdCQUFnQixHQUNwRSxFQUFvQixHQUFTLEtBQUssR0FBZ0IsZ0JBQWdCLEtBRWpFLGNBQWMsS0FBSyxHQUFrQixnQkFBZ0IsRUFBSyxNQUFNLGNBQ2hFLGVBQWUsS0FBSyxHQUFtQixnQkFBZ0IsRUFBSyxNQUFNLHdCQVlyRSxFQUNBLEVBQ0EsRUFDQSxFQUNBLEVBQ00sTUFDQSxHQUFVLENBQUMsRUFBTSxRQUFTLEVBQU0sUUFDcEMsRUFBVSxHQUNWLEVBQVcsTUFFVCxHQUFJLEVBQ04sRUFDQSxXQUVTLEtBQUssR0FBUyxHQUVaLEVBQUksTUFBTSxNQUFNLEtBQ2hCLEVBQUksS0FBSyxNQUFNLFFBS3BCLEdBQWMsRUFBUyxNQUFNLGdCQUMzQixLQUFLLEdBQWUsZ0JBQWdCLEdBQWEsZ0JBQWdCLEVBQVMsTUFBTSxjQUMvRSxLQUFLLEdBQWdCLGdCQUFnQixHQUFhLGdCQUFnQixFQUFTLE1BQU0sY0FHbkYsTUFBTSxHQUFHLGNBQWMsS0FBSyxLQUM1QixNQUFNLEdBQUcsZUFBZSxLQUFLLG9CQVVMLEVBQStCLEVBQW1DLElBQzFGLEVBQVEsTUFFUCxFQUFRLEVBQVcsRUFBVSxPQUFPLE1BQU8sRUFBTyxVQUNsRCxFQUFRLEVBQVcsRUFBVSxPQUFPLE1BQU8sRUFBTyxVQUU3QyxFQUFRLEVBQVcsU0FBVSxFQUFTLE9BQ3RDLEVBQVEsRUFBVyxTQUFVLEVBQVMsT0FDMUMsRUFBUSxFQUFXLEVBQVUsT0FBTyxNQUFPLEVBQU8sTUFBTyxHQUFJLEdBRXBFLEVBQVUsT0FBTyxVQUFpQixFQUFRLEVBQVcsRUFBVSxPQUFPLE1BQU8sRUFBTyxPQUNwRixFQUFVLE9BQU8sVUFBaUIsRUFBUSxFQUFXLEVBQVUsT0FBTyxNQUFPLEVBQU8sVUFFekUsRUFBUSxFQUFXLE9BQVEsRUFBUyxPQUdwQyxlQU9jLEVBQStCLFFBQ25ELEdBQUksRUFBRyxFQUFJLEVBQVUsS0FBSyxNQUFNLE9BQVEsSUFBSyxNQUM5QyxHQUFXLEVBQVUsS0FBSyxNQUFNLEdBQ2hDLEVBQWUsRUFBUyxPQUVqQixTQUFTLEtBQUssRUFBUyxNQUFNLFlBQzdCLFdBQVcsS0FBSyxFQUFTLE1BQU0sY0FDL0IsTUFBTSxLQUFLLEVBQVMsTUFBTSxTQUUvQixLQUFLLFNBQVMscUJBUUQsRUFBZ0QsRUFBeUIsTUFHMUYsR0FBVyxFQUFJLE9BQU8sSUFDdEIsRUFBTyxFQUFJLE1BQU0sTUFBTSxFQUFTLE9BUWhDLEVBQWlCLEVBQUksTUFBTSxrQkFBa0IsRUFBUyxPQUV0RCxFQUFJLEdBQ1AsbUJBQW1CLEVBQVMsRUFBTyxJQUFJLEtBQ3ZDLFNBQVMsRUFBSyxNQUFNLFlBR25CLEVBQU8sSUFBSSxPQUFTLEtBQUssWUFBWSxHQUFVLGlCQUFpQixFQUFPLElBQUksSUFBSyxFQUFPLElBQUksVUFJN0YsWUFBWSxHQUFVLEtBQUssR0FBZ0IsZUFHdkMsR0FBUSxFQUFLLE1BQU0sU0FBUyxFQUFJLEVBQU8sSUFBSSxZQUMzQyxFQUFXLEdBQ2QsS0FBSyxFQUFPLElBQUksVUFDaEIsZUFBZSxHQUNmLElBQUksRUFBSyxNQUFNLFVBU1osRUFBTyxFQUFJLEtBQUssTUFBTSxFQUFTLFNBQ2hDLE1BQU0sV0FBVyxLQUFLLEtBQ3RCLE1BQU0sU0FBUyxLQUFLLEtBRXBCLE1BQU0sU0FBUyxLQUFLLEVBQUksS0FBSyxNQUFNLEVBQVMsT0FBTyxNQUFNLFlBQ3pELE1BQU0sV0FBVyxLQUFLLEVBQUksS0FBSyxNQUFNLEVBQVMsT0FBTyxNQUFNLHdCQVloRSxFQUNBLEVBQ0EsRUFDQSxFQUNBLEVBQVksRUFDWixNQUdNLEdBQVcsQUFESSxFQUFJLEtBQUssTUFBTSxFQUFNLFNBQ1osS0FFeEIsRUFBa0IsQ0FDdEIsU0FBVSxHQUNWLFdBQVksR0FDWixNQUFPLElBRUgsRUFBaUIsQ0FDckIsU0FBVSxHQUNWLFdBQVksR0FDWixNQUFPLE1BR0EsT0FBTyxpQkFBaUIsRUFBZ0IsWUFDeEMsT0FBTyxtQkFBbUIsRUFBZ0IsY0FDMUMsT0FBTyxjQUFjLEVBQWdCLFNBQ3JDLGlCQUFpQixFQUFlLFlBQ2hDLG1CQUFtQixFQUFlLGNBQ2xDLGNBQWMsRUFBZSxTQUVsQyxLQUFLLGlCQUFpQixFQUFNLFFBQVMsRUFBaUIsTUFJdEQsR0FBTSxFQUFNLE9BQVMsRUFBSyxlQUdiLEVBQVEsRUFBZSxTQUFVLEVBQUssSUFBSyxFQUFLLGVBQWdCLEdBSzdFLE1BQTBCLEVBQVEsS0FHaEMsU0FBUyxFQUFPLEVBQUksTUFBTyxFQUFJLEtBQU0sRUFBTyxLQUFNLEVBQU8sT0FBUSxLQUdqRSxXQUFXLFFBQVEsQ0FBQyxDQUFFLE1BQU8sS0FBZ0IsTUFDM0MsR0FBVyxFQUFJLEtBQUssTUFBTSxLQUV2QixLQUFLLFNBQVMsS0FBSyxFQUFTLE1BQU0sWUFDbEMsS0FBSyxXQUFXLEtBQUssRUFBUyxNQUFNLGNBQ3BDLEtBQUssTUFBTSxLQUFLLEVBQVMsTUFBTSxTQVk1QyxZQUNFLEVBQ0EsRUFDQSxFQUNBLEVBQ0EsRUFDTSxHQUNDLGNBQWMsS0FBSyxLQUNuQixZQUNKLEtBQUssR0FDTCxlQUFlLEdBQ2YsSUFBSSxRQUVELEdBQVUsRUFBTyxjQUFjLGtCQUFrQixFQUFPLGVBQ3ZELE9BQVMsS0FBSyxLQUFLLEtBRW5CLEtBQUssY0FBYyxFQUFLLGVBYS9CLEVBQ0EsRUFDQSxFQUNBLEVBQ0EsRUFDQSxNQUtNLEdBQVcsRUFBSSxPQUFPLEdBQzFCLEVBQXNCLEVBQU8sR0FFekIsRUFBTyxFQUFJLE1BQU0sTUFBTSxFQUFTLE9BRWhDLEVBQWlCLEVBQUksS0FBSyxrQkFBa0IsRUFBUyxPQUNyRCxFQUFnQixHQUFVLEtBQUssR0FBZ0IsU0FBUyxFQUFLLE1BQU0sWUFLbkUsRUFBYyxFQUFLLE1BQU0sY0FFekIsRUFBbUIsR0FBUyxLQUFLLEdBQWUsZ0JBQWdCLEdBQ3BFLEVBQW9CLEdBQVMsS0FBSyxHQUFnQixnQkFBZ0IsR0FJOUQsRUFBdUIsR0FBUyxLQUFLLEdBQWtCLGdCQUFnQixHQUt2RSxFQUFXLEdBQVUsbUJBQW1CLEVBQXNCLEVBQUcsaUJBQzlELFNBQVMsUUFJWixHQUF3QixFQUFrQixnQkFBZ0IsR0FDMUQsRUFBUSxHQUFVLG1CQUFtQixFQUF1QixFQUFHLGtCQUM1RCxZQUFZLEtBRVosWUFBWSxHQUFVLEtBQUssR0FBZ0IsWUFFaEQsS0FBSyxRQUFRLEVBQVMsTUFBTyxlQVFKLEVBQTZCLEVBQXNCLE1BUzFFLEdBQUksRUFBTyxjQUNmLEVBQUksRUFBTyxZQUNYLEtBQWMsRUFBRSxNQUFRLEVBQUksRUFBRSxLQUd6QixZQUFZLE9BQU8sRUFBSSxFQUFFLEdBQUssRUFBSSxFQUFFLEVBQUcsS0FBVyxFQUFJLEVBQUUsR0FBSyxFQUFJLEVBQUUsUUFLcEUsR0FBVyxFQUFPLGNBQWMsV0FBVyxFQUFPLGVBQ2pELE9BQVMsY0FhaEIsRUFDQSxFQUNBLEVBQ0EsRUFDQSxFQUNBLEVBQ0EsTUFTTSxHQUFXLEVBQUksS0FBSyxNQUFNLEVBQU0sU0FDaEMsRUFBYSxFQUFJLEtBQUssTUFBTSxFQUFTLFNBS3BDLG9CQUFvQixLQUFLLEVBQVcsTUFBTSxZQUMxQyxtQkFBbUIsS0FBSyxFQUFTLE1BQU0sWUFFdkMsc0JBQXNCLEtBQUssRUFBVyxNQUFNLGNBQzVDLHFCQUFxQixLQUFLLEVBQVMsTUFBTSxjQUV6QyxpQkFBaUIsS0FBSyxFQUFXLE1BQU0sU0FDdkMsZ0JBQWdCLEtBQUssRUFBUyxNQUFNLFlBRXJDLEdBQU0sRUFBTSxJQUFNLFNBRWYsR0FBSSxFQUFHLEdBQUssRUFBSyxJQUFLLE1BRXZCLEdBQVksRUFBTSxXQUFXLEdBQUcsTUFDaEMsRUFBVyxFQUFJLE1BQU0sTUFBTSxHQUMzQixFQUFJLEVBQUksRUFNUixFQUFJLEdBQ1AsS0FBSyxFQUFPLGtCQUNaLFNBQVMsRUFBUyxNQUFNLFVBQ3hCLGdCQUFnQixFQUFPLHlCQUNuQixtQkFBbUIsS0FBSyxFQUFPLHFCQUFxQixJQUFJLEtBR3hELGdCQUFnQixLQUFLLEVBQU8sa0JBQWtCLFNBQVMsRUFBUyxNQUFNLFNBR3RFLHFCQUFxQixLQUFLLEVBQU8sdUJBQXVCLFNBQVMsRUFBUyxNQUFNLGlCQUdqRixHQUFVLEVBQVMsTUFBTSxjQUN6QixFQUFVLEdBQVMsS0FBSyxHQUFlLGdCQUFnQixHQUN2RCxFQUFXLEdBQVMsS0FBSyxHQUFnQixnQkFBZ0IsR0FFekQsRUFBYyxFQUFRLGdCQUFnQixFQUFPLHNCQUc3QyxFQUFTLEdBQVMsWUFBWSxFQUFHLEdBQUcsY0FBZSxFQUFHLEdBQUcsY0FBZSxHQUN4RSxFQUFVLEdBQVMsWUFBWSxFQUFHLEdBQUcsZUFBZ0IsRUFBRyxHQUFHLGVBQWdCLEdBRTNFLEVBQVcsR0FDZCxtQkFBbUIsRUFBYSxHQUNoQyxTQUFTLEVBQU8sc0JBRWIsRUFBZSxFQUFTLGdCQUFnQixHQUN4QyxFQUFPLEdBQVUsbUJBQW1CLEVBQWMsS0FDL0MsWUFBWSxRQUVmLEdBQStCLEdBQVUsS0FBSyxFQUFPLHVCQUF1QixjQUV6RSxZQUFZLEtBRWpCLEtBQUssUUFBUSxFQUFXLEdBSXhCLEdBQUssRUFBRyxNQUdKLEdBQTJCLEdBQzlCLEtBQUssRUFBTyxrQkFDWixTQUFTLEVBQVMsTUFBTSxVQUN4QixnQkFBZ0IsRUFBTyx5QkFHbkIsb0JBQW9CLEtBQUssRUFBTyxxQkFBcUIsSUFBSSxLQUV6RCxpQkFBaUIsU0FBUyxFQUFTLE1BQU0sU0FFekMsc0JBQXNCLFNBQVMsaUJBV2pCLEVBQVksRUFBYyxFQUFxQixNQUNsRSxHQUFPLEVBQVUsT0FBUyxTQUV2QixHQUFJLEVBQUcsR0FBSyxFQUFNLElBQUssSUFDMUIsR0FBaUIsRUFBSyxTQUFTLE1BQU0sS0FBSyxBQUFDLEdBQVUsRUFBSyxLQUFPLEVBQVUsU0FRekUsR0FBYyxLQUNmLG1CQUFtQixRQUVsQixHQUFhLEdBQVMsS0FBSyxHQUFTLGdCQUFnQixHQUNwRCxFQUFVLEdBQVMsYUFBYSxFQUFPLEdBQVksY0FDOUMsYUFBYSxFQUFTLEdBQU8saUJBQ2xDLEdBQVEsR0FBUyxLQUFLLEdBRXRCLEVBQWdCLE1BQ2QsVUFBVSxFQUFTLEVBQU8sS0FDcEIsc0JBQXNCLElBRWhDLEVBQWMsSUFBSSxHQUFlLE1BQWMsUUFFN0MsR0FBZSxRQUNoQixtQkFBbUIsTUFHYixFQUFlLEtBRXJCLDBCQUEwQixHQUszQixHQUFLLEVBQU0sTUFTUCxHQUFlLEtBQ2hCLGNBQWMsS0FDTixTQUFTLEVBQUssU0FJZCxTQUFTLFFBQ2hCLEdBQWUsS0FDaEIsaUJBQWlCLEtBRWYsRUFBSyxNQUFNLEtBQUssQUFBQyxHQUFVLEVBQUssS0FBTyxFQUFVLEVBQUksSUFBSyxPQUM1RCxTQUFTLEtBQUssS0FDZCxXQUFXLEtBQUssS0FDaEIsTUFBTSxLQUFLLE1BR2YsU0FBUyxxQkFHVyxFQUFrQixFQUFlLElBR3RELEdBQUssRUFBRSxFQUNULEVBQUssRUFBRSxFQUNQLEVBQUssRUFBRSxFQUNQLEVBQUssRUFBRSxPQUNILEdBQU0sRUFBSyxFQUFLLEVBQUssRUFBSyxFQUFLLEVBQUssRUFBSyxLQUUzQyxHQUFPLElBQ0osRUFBSyxFQUFLLEVBQUssTUFDZixNQUNDLEdBQVMsRUFBTSxJQUNoQixDQUFDLEVBQUssSUFDTixDQUFDLEVBQUssSUFDTixDQUFDLEVBQUssSUFDTixFQUFLLE9BS04sR0FBSyxFQUFLLEVBQ2QsRUFBSyxFQUFLLEVBQ1YsRUFBSyxFQUFLLEVBQ1YsRUFBSyxFQUFLLElBQ1AsRUFBSSxFQUFLLEVBQUssRUFBSyxFQUFLLEVBQUssRUFBSyxFQUFLLElBQ3ZDLEVBQUksRUFBSyxFQUFLLEVBQUssRUFBSyxFQUFLLEVBQUssRUFBSyxJQUN2QyxFQUFJLEVBQUssRUFBSyxFQUFLLEVBQUssRUFBSyxFQUFLLEVBQUssSUFDdkMsRUFBSSxFQUFLLEVBQUssRUFBSyxFQUFLLEVBQUssRUFBSyxFQUFLLGNBR25CLEVBQTJCLFVBQ2xELEVBQUksQ0FBQyxFQUFFLElBQ1AsRUFBSSxDQUFDLEVBQUUsSUFDUCxFQUFJLENBQUMsRUFBRSxJQUNQLEVBQUksQ0FBQyxFQUFFLEVBQ0YsY0FHdUIsRUFBWSxFQUFjLFNBRWhELEtBQUssd0NBQ1AsR0FBSSxHQUNSLEVBQUksR0FDSixFQUFZLEVBQUssUUFBUSxHQUNyQixFQUFJLEVBQVUsS0FFZCxFQUF3QixLQUM1QixPQUFPLG1CQUFtQixLQUUxQixTQUFTLEtBQUssR0FBRyxJQUFJLEdBQVMsSUFBSSxFQUFHLEVBQVUsT0FBUSxNQUV2RCxTQUFTLE9BQ1QsZ0JBQWdCLE9BR2hCLEVBQUksSUFDSixjQUNBLG1CQUFtQixFQUFHLEtBQ3RCLFNBQVMsRUFBRSxlQUNGLEVBQUcsRUFBRSxjQUNYLFFBQVEsRUFBVSxJQUFLLGVBc0JHLEVBQVksRUFBZ0IsU0FFbkQsS0FBSyx3Q0FDUCxHQUFJLEdBQ1IsRUFBSSxHQUNKLEVBQVksRUFBSyxRQUFRLEdBQ3JCLEVBQUksRUFBVSxLQUVkLEVBQXdCLEtBQzVCLE9BQU8sbUJBQW1CLE1BRW5CLEVBQUcsRUFBRSxXQUFZLE1BRXhCLG1CQUFtQixFQUFHLEtBQ3RCLFNBQVMsRUFBRSxlQUNGLEVBQUcsS0FFVCxRQUFRLEVBQVUsSUFBSyxHQUc5QixZQUFrQixFQUFjLEVBQWUsRUFBWSxNQUNuRCxHQUFLLEVBQUUsRUFDWCxFQUFLLEVBQUUsRUFDUCxFQUFLLEVBQUUsRUFDUCxFQUFLLEVBQUUsRUFDUCxFQUFLLEVBQUUsRUFDUCxFQUFLLEVBQUUsRUFDUCxFQUFLLEVBQUUsRUFDUCxFQUFLLEVBQUssRUFBSyxFQUFLLEVBQ3BCLEVBQUssRUFBSyxFQUFLLEVBQUssRUFDcEIsRUFBSyxFQUFLLEVBQUssRUFBSyxFQUNwQixFQUFLLEVBQUssRUFBSyxFQUFLLEVBQUssRUFBSyxFQUM5QixFQUFLLEVBQUssRUFBSyxFQUFLLEVBQUssRUFBSyxFQUM5QixFQUFLLEVBQUssRUFBSyxFQUFLLEVBQUssRUFBSyxXQUU1QixFQUFJLEVBQUssRUFBSSxJQUNiLEVBQUksRUFBSyxFQUFJLElBQ2IsRUFBSSxFQUFLLEVBQUksRUFDVixjQTREUCxFQUNBLEVBQ0EsRUFDQSxFQUNNLE1BQ0EsR0FBdUIsRUFBYyxnQkFDbEMsSUFBSSxFQUFjLFVBQVUsZ0JBQWdCLEdBQXNCLE9BQU8sRUFBYyxTQUNyRixZQUFZLEtBQ2pCLE9BQU8sRUFBYyxPQzM2QjdCLFFBQVcsT0FDRixVQUFXLFFBQ1gsVUFBVyxRQUNYLE9BQVEsRUFFZixPQUNBLFNBQ0EsTUFDQSxXQUFhLENBQ1gsV0FBWSxHQUFJLEdBQ2hCLFNBQVUsR0FBSSxHQUFRLEVBQUcsRUFBRyxHQUM1QixNQUFPLEdBQUksR0FBUSxFQUFHLEVBQUcsSUFFM0IsT0FFQSxVQUFVLEVBQW1CLFdBQ2hCLEtBQU0sR0FBTSxHQUNoQixLQUVULGVBQWUsRUFBbUIsV0FDckIsS0FBTSxHQUFNLEdBQ2hCLEtBRVQsZ0JBQWdCLEVBQW1CLFdBQ3RCLEtBQU0sR0FBTyxHQUNqQixLQUdULFdBQVcsRUFBZ0IsV0FDVCxLQUFNLE1BQ0wsS0FBTSxHQUNoQixLQUdULGtCQUFrQixFQUFnQixXQUNoQixLQUFNLEdBQ2YsS0FFVCxtQkFBbUIsRUFBZ0IsV0FDaEIsS0FBTSxHQUNoQixLQVFULFlBQVksRUFBc0IsRUFBUSxHQUFPLE1BQzFDLE1BQVEsUUFDUCxHQUFtQixFQUFRLEdBQWMsTUFBTSxHQUFjLFVBQzlELFNBQVcsS0FBSyxhQUFhLEdBRTlCLENBQUMsS0FBSyxTQUFTLE1BQU0saUJBS3BCLFdBQWEsR0FBSSxTQUtoQixHQUFvQixDQUN4QixTQUFVLEdBQUksR0FDZCxXQUFZLEdBQUksR0FDaEIsY0FBZSxHQUFJLEdBQ25CLE1BQU8sR0FBSSxJQUdQLEVBQVcsS0FBSyxTQUFTLE1BQU0sS0FBSyxBQUFDLEdBQU0sSUFBSSxpQkFBa0IsTUFDbkUsRUFBUyxXQUNGLE9BQU8saUJBQWlCLEVBQWtCLFlBQzFDLE9BQU8sbUJBQW1CLEVBQWtCLGNBQzVDLE9BQU8sY0FBYyxFQUFrQixTQUM5QixjQUFjLEtBQUssRUFBa0IsWUFBWSxpQkFHNUQsR0FBSSxFQUFHLEVBQUksS0FBSyxTQUFTLE1BQU0sT0FBUSxJQUFLLE1BQzdDLEdBQUksS0FBSyxTQUFTLE1BQU0sTUFDMUIsR0FBTyxFQUNQLEVBQUUsUUFBVSxFQUFFLGlCQUFrQixRQUMxQixLQUFLLFNBQVMsTUFBTSxRQUFRLEVBQUUsVUFDekIsRUFBRSxhQUdYLEdBQVcsQ0FDZixLQUFNLEVBQ04sT0FBUSxFQUNSLFVBQVcsRUFDWCxJQUFLLEVBQ0wsUUFDQSxPQUFRLEdBQ1IsS0FBTSxFQUFFLEtBQ1IsTUFBTyxDQUNMLFNBQVUsRUFBRSxTQUFTLFFBQ3JCLFdBQVksRUFBRSxXQUFXLFFBQ3pCLE1BQU8sRUFBRSxNQUFNLFNBRWpCLE1BQU8sQ0FDTCxTQUFVLEdBQUksR0FDZCxXQUFZLEdBQUksR0FDaEIsY0FBZSxHQUFJLEdBQ25CLE1BQU8sR0FBSSxPQUliLGlCQUFpQixFQUFTLE1BQU0sWUFDaEMsbUJBQW1CLEVBQVMsTUFBTSxjQUNsQyxjQUFjLEVBQVMsTUFBTSxVQUdsQixFQUFTLE1BQU0sU0FBVSxFQUFTLE1BQU0sV0FBWSxFQUFTLE1BQU0sTUFBTyxLQUU5RSxNQUFNLGNBQWMsS0FBSyxFQUFTLE1BQU0sWUFBWSxTQUd6RCxFQUFFLFNBQVMsT0FBUyxNQU1iLE9BQVMsRUFBRSxTQUFTLEdBQUcsU0FBUyxlQUd0QyxNQUFNLEdBQUssT0FHYixTQUFTLFNBR2hCLGFBQWEsRUFBdUMsSUFDOUMsR0FBcUIsY0FFZCxTQUFTLEFBQUMsR0FBVyxJQUMxQixZQUFrQixLQUFlLEVBQU8sVUFBWSxLQUFNLElBQ3hELEdBQVksRUFBUyxNQUFNLE9BQVMsRUFBTyxTQUFTLE1BQU0sZ0JBR25ELEVBQU8sWUFJZixFQUdULFVBQVUsRUFBd0IsRUFBbUIsRUFBZ0IsYUFDOUQsV0FBVyxXQUFXLEtBQUssUUFDM0IsV0FBVyxTQUFTLEtBQUssUUFDekIsV0FBVyxNQUFNLEtBQUssR0FDcEIsS0FHVCxRQUFRLEVBQWUsRUFBeUIsRUFBb0IsRUFBaUIsT0FFL0UsU0FBaUIsTUFBTSxHQUFPLE1BQU0sV0FBVyxLQUFLLEdBQ3BELFFBQWUsTUFBTSxHQUFPLE1BQU0sU0FBUyxLQUFLLEdBQ2hELFFBQVksTUFBTSxHQUFPLE1BQU0sTUFBTSxLQUFLLEdBQ3ZDLEtBR1QsUUFBUSxFQUFrQyxPQUVqQyxNQUFLLE1BQU0sS0FBSyxBQUFDLEdBQU0sRUFBRSxPQUFTLEdBRzNDLE9BQWMsSUFJUixHQUNGLFNBQ08sR0FBSSxFQUFHLEVBQUksS0FBSyxTQUFTLE1BQU0sT0FBUSxNQUN6QyxLQUFLLE1BQU0sS0FHWixLQUFLLFNBQVMsTUFBTSxLQUl0QixXQUFXLEtBQUssRUFBRyxNQUFNLGNBQ3pCLFNBQVMsS0FBSyxFQUFHLE1BQU0sWUFDdkIsTUFBTSxLQUFLLEVBQUcsTUFBTSxtQkFFbkIsU0FBUyxTQUVQLEtBSVQsaUJBQW1CLEdBQUksR0FDdkIsWUFBYyxHQUFJLEdBQVEsRUFBRyxFQUFHLEdBQ2hDLGVBQWlCLEdBQUksR0FBUSxFQUFHLEVBQUcsR0FFbkMsZ0JBQWtCLEdBQUksR0FDdEIsV0FBYSxHQUFJLEdBQVEsRUFBRyxFQUFHLEdBQy9CLGNBQWdCLEdBQUksR0FBUSxFQUFHLEVBQUcsR0FHbEMsbUJBQW1CLEVBQWtCLEVBQXVCLFNBQ2xELElBQUksZ0JBQWlCLEVBQVEsUUFJL0IsR0FBYSxHQUFJLEtBQ3BCLEtBQUssRUFBTyxPQUNaLFNBQVMsRUFBTSxVQUNmLGdCQUFnQixFQUFPLHdCQUNyQixjQUFnQixHQUFJLEtBQVUsS0FBSyxFQUFPLFVBQVUsSUFBSSxXQUVyRCxJQUFJLE9BQVEsV0FDWixJQUFJLHFCQUFzQixLQUFLLG9CQUlsQyxXQUFhLEdBQUksS0FBVSxLQUFLLEVBQU8sT0FBTyxTQUFTLEVBQU0sWUFHN0QsZ0JBQWtCLEdBQUksS0FBYSxLQUFLLEVBQU8sWUFBWSxTQUFTLEVBQU0sWUFFeEUsS0FHVCxrQkFBa0IsRUFBK0IsTUFpQ3pDLEdBQVEsS0FBSyxNQUFNLEdBQ25CLEVBQUksR0FBSSxNQUlWLEVBQU0sT0FBUyxPQUFRLGVBQ3RCLElBRUMsR0FBSSxLQUFLLE1BQU0sRUFBTSxhQUN2QixLQUFLLEVBQUUsTUFBTSxZQUVSLEVBQUUsT0FBUyxRQUNaLEtBQUssTUFBTSxFQUFFLFNBQ2YsWUFBWSxFQUFFLE1BQU0scUJBS3hCLFlBQVksS0FBSyxXQUFXLFlBQ3ZCLEVBR1QsaUJBQWlCLEVBQXVCLEVBQXVCLEdBQzFELFNBQVMsU0FBUyxFQUFHLE9BQU8sZ0JBQWdCLEVBQUcsWUFBWSxJQUFJLEVBQUcsWUFHbEUsTUFBTSxTQUFTLEVBQUcsU0FHbEIsV0FBVyxZQUFZLEVBQUcsWUFHL0IsaUJBQ0UsRUFDQSxFQUF3QixLQUN4QixFQUF3QixLQUN4QixFQUE4QixLQUM5QixNQUNNLEdBQVEsS0FBSyxNQUFNLE1BS3JCLEVBQU0sT0FBUyxPQUNkLFNBQVMsSUFBSSxFQUFHLEVBQUcsS0FDbkIsTUFBTSxJQUFJLEVBQUcsRUFBRyxLQUNoQixXQUFXLElBQUksRUFBRyxFQUFHLEVBQUcsT0FDdEIsSUFFRCxHQUFJLEtBQUssTUFBTSxFQUFNLGFBQ3RCLFNBQVMsS0FBSyxFQUFFLE1BQU0sWUFDdEIsTUFBTSxLQUFLLEVBQUUsTUFBTSxTQUNuQixXQUFXLEtBQUssRUFBRSxNQUFNLFlBRXBCLEVBQUUsT0FBUyxRQUNaLEtBQUssTUFBTSxFQUFFLFlBQ1osaUJBQWlCLEVBQUksRUFBRSxtQkFNM0IsaUJBQWlCLEVBQUksS0FBSyxZQUMzQixRQUNHLGlCQUFpQixFQUFJLEdBR3hCLE1BQ0MsU0FBUyxLQUFLLEVBQUcsWUFDakIsTUFBTSxLQUFLLEVBQUcsU0FDZCxXQUFXLEtBQUssRUFBRyxlQUNULEVBQUksRUFBTSxRQUlsQixlQzFWVCxFQUNBLEVBQ0EsRUFBUSxLQUNSLEVBQWtCLEdBQ2xCLEVBQXlCLEdBQWEsT0FDbEIsT0FDYixJQUFRLEdBQWdCLEVBQVEsRUFBWSxFQUFPLEVBQWlCLGVBSTNFLEVBQ0EsRUFDQSxFQUFRLEtBQ1IsRUFBa0IsR0FDbEIsRUFBeUIsR0FBYSxPQUNsQixPQUNiLElBQVEsR0FBc0IsRUFBUSxFQUFZLEVBQU8sRUFBaUIsR0FHbkYsWUFDRSxFQUNBLEVBQ0EsRUFDQSxFQUFRLEtBQ1IsRUFBa0IsR0FDbEIsRUFBeUIsR0FBYSxPQUNsQixNQUVkLEdBQWMsRUFBVyxvQkFBb0IsT0FBUSxrQkFFOUMsRUFBUSxHQUFPLENBQUUsSUFBSyxTQUM3QixHQUFNLEdBQWEsRUFBUSxFQUFnQixDQUMvQyxNQUFPLEdBQUksSUFBSyxFQUFZLElBQzVCLEtBQU0sR0FBSSxJQUFLLEVBQVksSUFDM0IsT0FBUSxLQUNSLE9BQVEsY0F3QkYsT0FDRCxJQUFhLFVBQ0MsYUFFZCxJQUFhLFFBQ0QseUJBR1AsTUFBTSx1QkFBd0IsUUFHdEMsTUFBTSxRQUVOLENBQUMsT0FBTyxLQUFLLEVBQUksUUFBUSxRQUFVLENBQUMsT0FBTyxLQUFLLEVBQUksUUFBUSxzQkFJekQsZUFPZ0IsRUFBeUIsRUFBYyxFQUF3QixNQUNoRixHQUFRLEVBQUksTUFBTSxRQUNwQixPQUFPLEdBQVEsQ0FDakIsTUFBTyxFQUFNLFVBQVUsQUFBQyxHQUFTLEVBQUssS0FBSyxTQUFTLGlCQUt0RCxFQUNBLEVBQ0EsRUFDQSxFQUEwQixLQUMxQixFQUFvQyxLQUNwQyxJQUVJLFFBQ0UsR0FBUSxFQUFJLE1BQU0sTUFFbEIsRUFBUSxHQUFJLFFBQ2IsSUFBWSxHQUFXLE1BQ3BCLEdBQVEsRUFBTSxVQUFVLEFBQUMsR0FBUyxFQUFLLEtBQUssU0FBUyxPQUV2RCxJQUFVLEdBQUksU0FDUixLQUFLLDRDQUE2QyxFQUFVLGlCQUdoRSxHQUFPLEVBQU0sR0FBTyxRQUV0QixHQUFTLEVBQ1QsRUFBSyxTQUFTLE9BQVMsTUFDaEIsRUFBSyxTQUFTLEdBQUcsU0FBUyxlQUUvQixHQUFJLENBQUUsUUFBTyxJQUFLLEVBQU0sWUFFeEIsV0FBVyxLQUFLLEtBQ2hCLFFBQ0EsUUFBVSxFQUdkLE1BQ0ksUUFBVSxFQUFNLFVBQVUsQUFBQyxHQUFTLEVBQUssS0FBSyxjQUFjLFNBQVMsRUFBUyxtQkFHaEYsU0FBVyxHQUFZLEtBRXpCLE9BQU8sR0FBUSxVQy9ISCxDQUNoQixFQUNBLEVBQ0EsRUFDQSxhQUFjLE1BQ1AsRUFBSSxHQUFJLEtBQVUsS0FBSyxTQUN2QixFQUFJLEdBQUksS0FBVSxLQUFLLFNBQ3ZCLEVBQUksR0FBSSxLQUFVLEtBQUssR0FHOUIsSUFBSSxFQUFHLEVBQUcsRUFBRyxFQUFVLEdBQU8sYUFDdkIsRUFBRSxLQUFLLFFBQ1AsRUFBRSxLQUFLLFFBQ1AsRUFBRSxLQUFLLEdBRVIsU0FDRyxFQUFFLGlCQUNGLEVBQUUsaUJBQ0YsRUFBRSxhQUVGLEtBR1QsY0FBYyxFQUFLLEVBQUksYUFDaEIsRUFBRSxLQUFLLEdBQUssaUJBQ1osRUFBRSxLQUFLLEdBQUksTUFBTSxLQUFLLEdBQUcsaUJBQ3pCLEVBQUUsS0FBSyxLQUFLLEdBQUcsTUFBTSxLQUFLLEdBQUcsWUFDM0IsS0FHVCxPQUFPLEVBQUssRUFBTyxJQUFLLEVBQVcsS0FBTSxHQUNqQyxHQUFPLFVBRVAsR0FBTSxLQUFLLElBQUksR0FDbkIsRUFBTSxLQUFLLElBQUksTUFDYixHQUFHLEVBQUcsU0FFRixPQUNELE1BQ0MsS0FBSyxFQUFFLEtBQ1AsS0FBSyxFQUFFLFFBQ04sRUFBRSxHQUFLLEVBQUksRUFBTSxFQUFJLE9BQ3JCLEVBQUUsR0FBSyxFQUFJLEVBQU0sRUFBSSxJQUV0QixLQUFLLEVBQUUsS0FDUCxLQUFLLEVBQUUsUUFDTixFQUFFLEdBQUssRUFBSSxFQUFNLEVBQUksT0FDckIsRUFBRSxHQUFLLEVBQUksRUFBTSxFQUFJLFlBRXZCLE1BQ0MsS0FBSyxFQUFFLEtBQ1AsS0FBSyxFQUFFLFFBQ04sRUFBRSxHQUFLLEVBQUksRUFBTSxFQUFJLE9BQ3JCLEVBQUUsR0FBSyxFQUFJLEVBQU0sRUFBSSxJQUV0QixLQUFLLEVBQUUsS0FDUCxLQUFLLEVBQUUsUUFDTixFQUFFLEdBQUssRUFBSSxFQUFNLEVBQUksT0FDckIsRUFBRSxHQUFLLEVBQUksRUFBTSxFQUFJLFlBRXZCLE1BQ0MsS0FBSyxFQUFFLEtBQ1AsS0FBSyxFQUFFLFFBQ04sRUFBRSxHQUFLLEVBQUksRUFBTSxFQUFJLE9BQ3JCLEVBQUUsR0FBSyxFQUFJLEVBQU0sRUFBSSxJQUV0QixLQUFLLEVBQUUsS0FDUCxLQUFLLEVBQUUsUUFDTixFQUFFLEdBQUssRUFBSSxFQUFNLEVBQUksT0FDckIsRUFBRSxHQUFLLEVBQUksRUFBTSxFQUFJLGNBSXZCLFNDeENFLElBQStCLFVBQWlDLE9BQ3BFLENBQ0wsY0FBZSxHQUFJLEdBQ25CLFlBQWEsR0FBSSxHQUNqQixLQUFNLEdBQUksSUFDVixPQUFRLEVBRVIsc0JBQXVCLEdBQUksR0FDM0Isb0JBQXFCLEdBQUksR0FDekIsaUJBQWtCLEdBQUksR0FFdEIscUJBQXNCLEdBQUksR0FDMUIsbUJBQW9CLEdBQUksR0FDeEIsZ0JBQWlCLEdBQUksR0FFckIsSUFBSyxDQUNILFlBQWEsRUFDYixTQUFVLEdBQUksR0FDZCxJQUFLLEdBQUksR0FDVCxNQUFPLEdBR1QsT0FBUSxDQUFFLGNBQWUsR0FBSSxHQUFXLGVBQWdCLEdBQUksSUFDNUQsT0FBUSxDQUFFLGNBQWUsR0FBSSxHQUFXLGVBQWdCLEdBQUksSUFNNUQsTUFBTyxDQUFFLFlBQWEsRUFBRyxJQUFLLEdBQUksR0FBVyxlQUFnQixHQUFJLElBQ2pFLE1BQU8sQ0FBRSxZQUFhLEVBQUcsSUFBSyxHQUFJLEdBQVcsZUFBZ0IsR0FBSSxJQUNqRSxNQUFPLENBQUUsWUFBYSxFQUFHLElBQUssR0FBSSxHQUFXLGVBQWdCLEdBQUksSUFDakUsTUFBTyxDQUFFLFlBQWEsRUFBRyxJQUFLLEdBQUksR0FBVyxlQUFnQixHQUFJLElBRWpFLE1BQU8sQ0FDTCxDQUFFLGNBQWUsR0FBSSxHQUFXLGVBQWdCLEdBQUksSUFDcEQsQ0FBRSxjQUFlLEdBQUksR0FBVyxlQUFnQixHQUFJLEtBR3RELEtBQU0sQ0FBRSxjQUFlLEdBQUksR0FBVyxlQUFnQixHQUFJLE1BSWpELEdBQWtCLEdBQTJDLG1CQ3hEN0QsR0FBWSxDQUFDLEVBQVEsRUFBVSxJQUFjLE1BQ2xELEdBQVMsR0FBYSxFQUFRLElBQ2hDLE1BQ0ssU0FBVyxJQUNYLFVBQVksTUFFRCxJQUdULEdBQXNCLEFBQUMsR0FBbUIsSUFDakQsQ0FBQyxlQUNDLEdBQVksR0FBYSxFQUFRLEtBQWtCLFVBQ3JELEtBQ1UsS0FDVixDQUNFLElBQUssRUFDTCxXQUFZLEdBQ1osY0FBZSxJQUVqQixBQUFDLEdBQWMsU0FDTCxJQUFJLEVBQUssVUFDTCxFQUFRLEdBQWMsTUFBTSxFQUFLLE9BQVEsUUFJN0MsRUFBUSxHQUFjLE1BQU0sR0FBaUIsU0FBUyxpQkFJekQsR0FBaUIsQUFBQyxHQUFrQixHQUMzQyxPQUFPLFFBQVEsR0FBYSxTQUM1QixPQUFPLE9BQU8sR0FBYSxTQUczQixHQUFjLENBQUMsRUFBZ0IsRUFBWSxJQUF1QixNQUNoRSxHQUFTLEdBQWEsRUFBUSxJQUM5QixFQUFxQixHQUFhLEVBQVEsSUFDMUMsRUFBMkIsR0FBYSxFQUFRLE9BRWxELEdBQU8sSUFFTCxTQUFTLEFBQUMsR0FBTSxDQUVoQixFQUFFLE1BQU0sU0FBUyxpQkFDakIsS0FBTyxFQUFFLEtBQUssUUFBUSxZQUFhLEtBRW5DLEVBQUUsTUFBTSxjQUFjLFNBQVMsWUFBZ0IsVUFHL0MsR0FBa0MsS0FDbkMsU0FBUyxBQUFDLEdBQVUsRUFBc0IsS0FBSyxFQUFNLFNBRXZDLE1BQU0sa0JBQ2xCLGVBQWUsU0FBUyxRQUFRLEFBQUMsR0FBVSxFQUFNLHVCQUVwRCxHQUFtQyxLQUVqQyxTQUFTLEFBQUMsR0FBVyxJQUNWLEdBRVgsTUFBTyxHQUFPLFVBQWEsZ0JBRWhCLEtBQUssQ0FDaEIsR0FBSSxFQUFPLEtBQ1gsU0FBVSxFQUFPLFNBQVMsWUFFckIsU0FBVyxHQUFlLG1CQUFtQixRQUlsRCxTQUFTLFFBQVEsQUFBQyxHQUFVLEVBQU8sZUFBZSxJQUFJLFNBR3RELEdBQW9CLEVBQU8sZUFBZSxvQkFBb0IsT0FBUSxlQUN0RSxFQUFXLEVBQWtCLFNBQVMsTUFBTSxLQUFLLEFBQUMsR0FBTSxFQUFFLE9BQVEsT0FBUyxXQUNwRSxFQUFRLEdBQU8sQ0FBRSxJQUFLLFNBRTdCLEdBQWUsR0FBVyxTQUFTLFFBQVUsR0FBYSxLQUFPLEdBQWEsVUFDdkUsRUFBUSxHQUFVLE9BQVMsS0FBTSxHQUFPLE1BQ3hDLEVBQVEsR0FBaUIsV0FHaEMsR0FBcUIsR0FBYyxNQUFNLEtBQXFCLFdBQzdELEVBQVEsS0FDSSxNQUFRLEdBQUksSUFBZSxRQUV4QyxHQUE0QixLQUVmLFNBQVMsQUFBQyxHQUFVLENBQ2pDLEVBQU0sTUFBUSxFQUFNLEtBQUssVUFBd0IsS0FBSyxFQUFNLFVBR2xELFFBQVEsQUFBQyxHQUFNLENBQ3hCLEVBQXNCLFNBQVMsWUFBWSxLQUFLLDBCQUEwQixvQkFHM0QsUUFBUSxBQUFDLEdBQU0sQ0FDOUIsRUFBZ0IsU0FBUyxZQUFZLEtBQUssMEJBQTBCLHNCQUd2RSxFQUF5QixpQkFDVCxrQkFBa0IsS0FJbkIsTUFBTSxPQUFPLEVBQUksT0FFWixFQUFRLElBRzVCLEdBQTBCLE1BQU8sRUFBZ0IsSUFBd0MsTUFDdkYsR0FBZSxHQUFZLGFBQWEsa0JBQ3hDLEVBQWUsR0FBWSxhQUFhLGtCQUV4QyxFQUFZLEdBQUksSUFDcEIsR0FBSSxJQUFjLElBQU0sS0FDeEIsR0FBSSxJQUFrQixDQUNwQixZQUFhLEdBQ2IsSUFBSyxFQUNMLFNBQVUsR0FDVixXQUFZLEdBQ1osS0FBTSxNQUlKLEVBQVksR0FBSSxJQUNwQixHQUFJLElBQWMsSUFBSyxLQUN2QixHQUFJLElBQWtCLENBQ3BCLFlBQWEsR0FDYixJQUFLLEVBQ0wsU0FBVSxHQUNWLFdBQVksUUFJTixTQUFTLDBCQUNULFNBQVMsMEJBQ1QsS0FBTyxjQUNQLEtBQU8sY0FFSixTQUFXLEtBQ1gsWUFBYyxLQUNkLFNBQVcsS0FDWCxZQUFjLE1BRWQsRUFBUSxHQUF3QixDQUMzQyxNQUFPLEVBQ1AsTUFBTyxPQUVJLEVBQVEsR0FBdUIsQ0FDMUMsa0JBQW1CLEVBQ25CLGdCQUFpQixrQkFJNkIsTUFDMUMsR0FBZ0IsTUFDWCxRQUFRLEFBQUMsR0FBUyxNQUNyQixHQUFPLEdBQUksTUFDWixLQUFPLEVBQUssT0FDWixTQUFTLFVBQVUsRUFBSyxZQUN4QixXQUFXLFVBQVUsRUFBSyxjQUMxQixNQUFNLFVBQVUsRUFBSyxTQUNwQixLQUFLLFFBR0YsUUFBUSxDQUFDLEVBQU0sSUFBVSxDQUM5QixFQUFLLGNBQWdCLFFBQ2pCLEVBQUssYUFBYSxJQUFJLEVBQU0sV0FJaEMsR0FBUSxHQUFJLElBQ1osRUFBYyxHQUFJLElBQ2xCLEVBQVcsR0FBSSxJQUFTLFlBQ2xCLEtBQUssS0FDWCxJQUFJLEtBQ0osSUFBSSxFQUFNLElBRVQifQ==
